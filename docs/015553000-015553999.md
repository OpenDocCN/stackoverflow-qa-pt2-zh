# StackOverflow 问答 15553000-15553999

# google-chrome - 为什么当链接包含图像或任何其他标签时，谷歌浏览器的弹出窗口阻止程序会击落链接？

> ID：15553002
> 
> 赞同：7
> 
> 时间：2013-03-21T16:28:12.260
> 
> 标签：google-chrome, popupwindow, popup-blocker

谷歌浏览器现在有点奇怪，因为 v25 不再尊重 302 重定向标头，并且在页面刷新时愉快地重新发布表单数据，而 v24 和所有其他浏览器运行良好。我不确定这是否只是一个临时的浏览器错误，所以让我描述一下我正在尝试解决的谜团。

据我所知，您无法使用 HTML 或 JavaScript 打开选项卡，但默认情况下，没有明确设置尺寸的新窗口将作为选项卡打开。

首先我试过这个：

```
<a href="URL" onclick="window.open(this.href);return false">
  <img src="NICE IMAGE" alt="foo">
</a> 
```

这在任何地方都有效，除了在 Chrome 中它作为未经授权的弹出窗口被击落。有趣的是，有时当我继续点击它时，Chrome 改变了主意，让链接仍然打开（作为选项卡）。但情况并非总是如此，有时链接仍然无效。

经过几个小时的试验（并且已经从`onclick`简单`target="_blank"`的. 当我用包含一些文本的 a 替换并单击 时，链接无法打开（Chrome 已将其识别为不需要的弹出窗口），但是当我单击标签本身（具有固定大小或填充）时，然后它被接受了，一个新的标签诞生了。`<img>``<a>``<img>``<span>``<span>``<a>`

最后，我只是将图像作为 CSS 背景包含在内，而`<a>`标签仍然为空。使用此标记的每个浏览器现在似乎一切正常：

```
<a href="URL" target="_blank" style="background:url('NICE_IMAGE'); height:XXX; width:XXX" title="Description"></a> 
```

谷歌浏览器的逻辑背后的原因是什么，当一个链接包含一个标签时，它被禁止作为新标签打开，但当它为空时，它可以继续？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:40:40.730

经过一些测试：

*   Chrome 版本 - 25.0.1364.172 m：运行良好！
*   Chrome 版本 - 26.0.1410.43 m：工作正常！

打开选项卡的“正常”方式在两个较新版本中都有效。经测试！

我的代码：

```
<?php
echo '
     <a href="http://www.google.com" onclick="window.open(this.href); return false;">
       <img src="http://static.adzerk.net/Advertisers/2565.png" alt="foo" />
     </a>
     ';
?> 
```

问题应该出在您的页面中...

**编辑：BUG SEARCH** 我搜索了此问题中报告和修复的错误，但找不到任何东西。

# perl - 通过脚本识别静态库之间的循环依赖

> ID：15553006
> 
> 赞同：4
> 
> 时间：2013-03-21T16:28:18.860
> 
> 标签：perl, linker, graph-theory, circular-dependency

我有一个链接一些静态库的二进制文件列表。已确定这些库中有许多是循环依赖的。我们从来没有遇到过麻烦，因为我们将这些静态库包含在 -Wl,--start-group 和 -Wl,--end-group 之间

了解这是一种不好的做法后，我正在尝试清理系统。

我想出了一个 perl 脚本，它告诉我这些库是如何相互依赖的，如下所示：

> libchld.a 依赖于 libprnt.a、libgprnt.a
> 
> libprnt.a 依赖于 libncle.a、libgprnt.a

去一个。

现在，我应该对这些进行拓扑排序，每个节点要么指向上方，要么指向下方。然后如果我在拓扑排序时找到一组循环依赖库，我将不得不通过清理系统**只将那些** 包含在 --start-group 和 --end-group 中（而不是包含整个库） .

是否已经有一些 perl 模块可以进行这种类型的排序？

> 排序::拓扑图::有向

是我要检查的那些。但是，如果图形是圆形的，它们似乎无法处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:34:46.787

> Having understood that this is a bad practice, I'm trying to clean the system.

It's a bad practice because you are not using proper layering, not because it's somehow bad for the linker.

Therefore, cleaning up the link line without re-arranging the libraries into a proper hierarchy with no circular dependencies is a pointless exercise.

And if you do rearrange the libraries, then their proper order will be easy to understand and you wouldn't need to use Perl for that.

# ios - 如何在核心数据中运行同时搜索？

> ID：15553009
> 
> 赞同：0
> 
> 时间：2013-03-21T16:28:23.797
> 
> 标签：ios, core-data, grand-central-dispatch, nsmanagedobjectcontext

我试图了解如何在核心数据中运行同时搜索。

这是我的示例，但它不起作用，因为其中一个 GCD 似乎永远不会激活如果我将 custon MOC 留在那里，我会收到错误“无法找到实体 'Recipe' 的模型”

```
-(void)performSearch:(NSString*)name{

    //TODO: Is there a better way

    //In case the previous search hasn't finished
    if (globaDispatchRequestInprogress) {
        //Send on GCD
        dispatch_queue_t searchQueque = dispatch_queue_create("search queque 2", NULL);
        dispatch_async(searchQueque, ^{
            NSLog(@"\n\nDispatch 2 In Progress*******\n\n");

            //Init local variables
            NSFetchRequest *fetchRequest =[[NSFetchRequest alloc]init];
            NSError *error;

             //Create own MOC for multiThread
             NSManagedObjectContext *tempContext = [[NSManagedObjectContext alloc]init];

             [tempContext setPersistentStoreCoordinator:[self persistentStoreCoordinator]];

            NSPredicate *recipeName = [NSPredicate predicateWithFormat:@"ANY recipe.name ==[c] %@",name];

            //Set predicate to fetch request
            [fetchRequest setPredicate:recipeName];

            //Set query. We are searching recipes
            NSEntityDescription *entity = [NSEntityDescription entityForName:@"Recipe" inManagedObjectContext:tempContext];
            //sets up fetch request details
            [fetchRequest setEntity:entity];

            //Attempt to speed up program
            [fetchRequest setReturnsObjectsAsFaults:NO];

            //Perform fetch assign to return array
            NSArray*records = [tempContext executeFetchRequest:fetchRequest error:&error];

            //Add to temporary results
            //TODO: Add to NSDictionary
            [self addResultsToTemporaryResults:records];

            NSLog(@"Total results = %i",[_temporaryResultsArray count]);

            NSLog(@"\n\nDispatch 2 END**************\n\n");

        });

    }
    //Send on GCD
    dispatch_queue_t searchQueque = dispatch_queue_create("search queque", NULL);
    dispatch_async(searchQueque, ^{
        NSLog(@"\n\nDispatch In Progress*******\n\n");

        //Set flag
        globaDispatchRequestInprogress=YES;

        //Init local variables
        NSFetchRequest *fetchRequest =[[NSFetchRequest alloc]init];
        NSError *error;

         //Create own MOC for multiThread
         NSManagedObjectContext *tempContext = [[NSManagedObjectContext alloc]init];

         [tempContext setPersistentStoreCoordinator:[self persistentStoreCoordinator]];

        NSPredicate *recipeName = [NSPredicate predicateWithFormat:@"ANY recipe.name ==[c] %@",name];

        //Set predicate to fetch request
        [fetchRequest setPredicate:recipeName];

        //Set query. We are searching recipes
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Recipe" inManagedObjectContext:tempContext];
        //sets up fetch request details
        [fetchRequest setEntity:entity];

        //Attempt to speed up program
        [fetchRequest setReturnsObjectsAsFaults:NO];

        //Perform fetch assign to return array
        NSArray*records = [tempContext executeFetchRequest:fetchRequest error:&error];

        //Add to temporary results
        //TODO: Add to NSDictionary
        [self addResultsToTemporaryResults:records];

        NSLog(@"Total results = %i",[_temporaryResultsArray count]);
        globaDispatchRequestInprogress=NO;

        NSLog(@"\n\nDispatch END**************\n\n");

    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:33:39.080

我看到了几件让我怀疑的事情，但没有明显的确凿证据。

如果您看到“无法找到模型”，则表明您的持久存储协调器没有按照您认为的方式进行配置。NSLog self.persistentStoreCoordinator.managedObjectModel 和 self.persistentStoreCoordinator.managedObjectModel.entitiesByName 会很有趣。

Core Data 的首选 GCD 方法是使用 performBlock: 或 performBlockAndWait:，为托管对象上下文提供适当的并发类型。请参阅[http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/index.html](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/index.html)

您在 addResultsToTemporaryResults: 调用中保留了 fetch 的结果。我们看不到它的来源，但它是线程安全的吗？您找到的那些记录在您获取它们的 tempContext 之外不存在，并且只能从找到它们的线程中访问。您可能希望在那里使用 NSManagedObjectIDs（也许您已经在使用）。

您对 dispatch_queue_create() 的第二次调用将始终被执行。你的意思是做一个if-else而不是一个简单的if吗？

When you do -executeFetchRequest:error:, check the result. If it's a nil result, take a look at the NSError you passed in.

# hl7 - Mirth Connect HTTP 侦听器映射响应 ACK 消息

> ID：15553012
> 
> 赞同：1
> 
> 时间：2013-03-21T16:28:33.120
> 
> 标签：hl7, mirth

我们正在尝试合并两个 Mirth 服务器。一台服务器（我们称之为服务器 1）保存所有记录，另一台服务器（服务器 2）从第一个服务器获取 HL7 消息并将消息写入数据库。

到目前为止一切都很完美。但是服务器 1 在发送每个 HL7 消息后，等待 ACK 认为此事务已完成并从列表中发送另一条消息。

来自服务器 2（写入数据库）的成功状态包含 MySQL 响应，例如“*成功：数据库写入成功。更新了 1 行。* ”。这不是服务器 1 所期望的。

因此，Server 1 认为此 ACK 无效，产生错误“ *Message Read Error - Will Retry* ”并不断尝试再次发送相同的消息，导致 Server 2 在数据库中重复消息。

我们正在使用 Mirth Connect HTTP 侦听器，我们找不到任何解决方案将 ACK msg 发送到我们的第一台服务器，即同屏 HTTP 侦听器。

有没有办法做到这一点？有什么建议吗？

真的需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-23T04:53:21.923

问题是您没有正确设置来自服务器 2 的响应，因此它只返回目标的响应。您可以通过目标转换器上的代码创建 ACK：

```
var ackMessage = ACKGenerator.generateAckResponse(connectorMessage.getRawData(), "AA", "Message Successfully Received");
responseMap.put("ackresp", ResponseFactory.getSentResponse(ackMessage)); 
```

在您的源连接器上选择“ackresp”作为响应。您的服务器 1 将收到该 ACK 而不是数据库写入的日志。

# php - 如何使用php在下一页显示用户输入的用户名

> ID：15553016
> 
> 赞同：0
> 
> 时间：2013-03-21T16:28:38.330
> 
> 标签：php, html, database, phpmyadmin

我的主页上有两个输入框，一个用于用户名，一个用于密码。我有一个 php 文件，它将检查我的数据库以检查这些凭据并允许或拒绝访问。当用户获得访问权限时，我想在我的屏幕上显示，登录为：....“在主页上输入的用户名登录”....

这是我的代码，它检查我的数据库以允许或拒绝访问。

```
<?php

$host="localhost"; // Host name 
$username="********"; // Mysql username 
$password="********"; // Mysql password 
$db_name="db?K1012904"; // Database name 
$tbl_name="AdminUser"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
header("location:loginsuccess.php");
}
else {
echo "Wrong Username or Password"; 
}
?> 
```

这是用户输入凭据的地方

```
 <form name="form1" class="navbar-form pull-right" method="post" action="checklogin.php">
          <input name="myusername"  type="text"  id="myusername" placeholder="Email">
          <input name="mypassword" id="mypassword" class="span2" type="text" placeholder="Password">
          <button type="submit" name="submit"class="btn">Sign in</button>
        </form> 
```

这是我试图显示用户名的地方

```
 <p class="navbar-text pull-right">
    Logged in as: <?php echo $myusername ?> </p> 
```

我的问题是我似乎无法显示用户输入的用户名，关于如何让它工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:33:25.457

您将用户名存储在数据库中，只需在会话中存储一个 user_id：

```
$_SESSION['user_id'] = // whatever the logged in user's id ends up being. 
```

然后，在任何后续页面上，拉取该 user_id，并在数据库上运行 select 以查找其他客户端信息。数据库应该是您的用户数据的规范来源，而不是 $_SESSION，除了“已登录”数据库 id 标识符，否则会导致问题。

顺便说一句，您希望研究存储过程和[PDO 绑定查询](http://www.php.net/manual/en/pdostatement.bindparam.php "PDO 绑定参数")以保护您的生活，因为 mysql_query 是老式的且已弃用。同样，stripslashes() 是一个坏信号。哦，你使用的是明文密码。

所以，总的来说，问问自己是否真的想编写自己的登录安全系统并重新审视每个人在这样做时遇到的所有安全标准问题？相反，请研究一个开源身份验证项目对这个*反复*解决的问题的解决方案。[这是在github上](https://github.com/search?p=2&q=php+authentication)搜索php身份验证，以867结果开始，而不是自己滚动，不建议安全经验不足的人使用。

另请参阅： [http](http://pear.php.net/packages.php?catpid=1) ://pear.php.net/packages.php?catpid=1 Pear Auth 类 [https://github.com/Kausheel/Authentication](https://github.com/Kausheel/Authentication) Github Auth Repository to crib from

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:35:54.760

`session_register`在 php 5.3 中已弃用并从 php 5.4 中删除，因此您的会话代码可能根本不起作用。

您应该将`session_start();`使用会话的每个页面放在顶部并分配变量，例如：

```
$_SESSION['myusername'] = $myusername; 
```

然后，您可以像这样访问它：

```
echo $_SESSION['myusername']; 
```

在开始会话的页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:36:00.490

你应该把

```
session_start(); 
```

前

```
session_register(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:36:03.233

您使用的一些方法已被弃用，但仍应有效。

您正在设置一个名为 myusername 的会话变量，它存储用户的用户名。因此，一旦在您想要回显当前用户名的页面上，您就会想要回显变量 $_SESSION['myusername']。

例如

```
<p class="navbar-text pull-right">
Logged in as: <?php echo $_SESSION['myusername']; ?> </p> 
```

我可能是错的，但我相信这会好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T16:37:22.037

您可以在登录时将数据存储在会话变量中

```
session_start();
...
$_SESSION['user_name'] = $user_name; $_SESSION['user_id'] = $user_id; 
```

但不要忘记在注销时使用**session_destroy()销毁会话变量**

# qt - QTWebview 不从 css 加载图像

> ID：15553018
> 
> 赞同：2
> 
> 时间：2013-03-21T16:28:41.313
> 
> 标签：qt, qtwebkit

我`QTWebview`在窗口应用程序中使用。当我按`setHtml`功能加载页面时，我的 Web 视图有时不会加载内容图像。
此问题在加载多个页面后尤其会发生。

我确信这是一个问题，`QTWebview`因为我的页面完全在浏览器中加载。

我嵌入了 Fire bug 并找到了一些东西。`QTWebview`实际上不加载新的css文件。例如，我有 2 个 css 文件。首先，我将第一个文件复制到样式表文件夹并加载 web。然后，我将第二个文件复制到样式表中并强制重新加载 webview。什么都没发生。fire bug中的所有css项目都与第一个相同，外观没有变化。我认为`QTWebview`自动缓存数据以重新加载，但可以找到任何解决方案。有没有人和我一样的问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:48:13.127

我终于找到了解决这个问题的方法。因为我总是加载相同的 URL 并只更改样式表，`QWebview`所以自动使用它的缓存数据。我通过在重新加载之前添加来修复它 `QWebSettings::clearMemoryCaches();`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:47:14.170

这些东西用于`QWebView`本地内容，可能`Web`与一些更改相同，如果你想加载 CSS 文件，你必须把它放在 HTML 文件中并加载 HTML 文件`QWebView`，你可以将你的 HTML 文件嵌入到 a`resource file (.qrc)`并从中加载它通过添加前缀资源`qrc`，这里是一个例子：

在addresses.h文件中：

```
const QString MAIN_HTML = "qrc:/path-to-your-HTML-file-in-resource-file.html"; 
```

在 MainWindow.cpp 中：

```
QWebView *webView = new QWebView();
webView->settings()->setAttribute(QWebSettings::LocalContentCanAccessRemoteUrls, true);
webView->page()->settings()->setAttribute(QWebSettings::JavascriptEnabled, true);
webView->page()->settings()->setAttribute(QWebSettings::OfflineWebApplicationCacheEnabled, true);
webView->page()->setLinkDelegationPolicy(QWebPage::DelegateAllLinks);
webView->settings()->setUserStyleSheetUrl(QUrl("qrc:/path-your-css-file-in-resource-file.css")); 
```

最后加载 HTML 文件：

```
webView->load(QUrl(MAIN_HTML)); // remember to include header file -> #include "addresses.h" 
```

如果您想从本地硬盘加载文件，`QUrl`只需`qrc`从您的地址中删除即可使用：

```
 QUrl::fromLocalFile(":/path-to-your-css-file.css"); 
```

在您的 HTML 文件中（如果它位于资源文件中）：

```
<link type="text/css" rel="stylesheet" href="qrc:/path-to-your-css-file-in-resource-file.css"/> 
```

在您的 HTML 文件中（如果它位于本地硬盘中）：

```
<link type="text/css" rel="stylesheet" href="/path-to-your-css-file.css"/> 
```

所以最好将所有文件嵌入到资源文件中，它将被编译并嵌入到输出的可执行文件中。

# android - Windows 拒绝安装 Android ADB 驱动程序

> ID：15553025
> 
> 赞同：5
> 
> 时间：2013-03-21T16:29:16.173
> 
> 标签：android, usb, windows-7-x64

我正在尝试将调试器从 Windows 7 64 位 PC 连接到 Android 手机（HTC myTouch 4G Android 2.3）。

有趣的是，几个月前一切正常，直到大约一周前，Windows 才开始使用默认的 Android 驱动程序，而不是支持 ADB 的 HTC 驱动程序。

我尝试了这里的说明： [安装 Android USB 驱动程序 - 没有发生](https://stackoverflow.com/questions/2346119/installing-the-android-usb-driver-not-happening)

但它不起作用。我尝试重新启动，重新安装驱动程序，恢复到较早的点，没有任何帮助。

在“设备和打印机”下，我的手机显示为通用的“Android 手机”。当我尝试更新驱动程序并浏览到安装 HTC 驱动程序的 C:\Program Files (x86)\HTC\HTC Driver\Driver Files\Win7_x64 时，我收到以下消息：

“Windows 已确定您设备的驱动程序软件是最新的”。
WPD 文件系统卷驱动程序。

手机上显然开启了USB调试。下一步是重新安装 Windows，但我想避免它，而且不能保证它甚至可以工作。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:21:11.920

# Windows 是一团乱麻

尝试其中一些，如果你幸运的话，一个魔法小精灵会来轻推你的司机从而修复它。

## 1.卸载重装

***可能从设备管理器中卸载***通用驱动程序。
***重新安装***HTC 驱动程序

## 2.卸载干净重装

***可能从设备管理器中卸载***通用驱动程序。
***使用 CCleaner清理***注册表和其他东西（我相信这个应用程序）
***重新安装***HTC 驱动程序

* * *

## 远射

***升级到Win8并做一个刷新系统。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:35:00.563

它只是无缘无故地开始工作。

非常感谢您的建议，但我真的不知道我尝试过的事情中有什么（如果有的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:33:29.040

从 HTC 下载并安装 HTC Sync Manager：

[http://www.htc.com/www/support/software/htc-sync-manager.aspx](http://www.htc.com/www/support/software/htc-sync-manager.aspx)

这将在您的计算机上安装所需的驱动程序。让我们知道它是否有效。

# url - 如何直接访问 Pentaho 报告？

> ID：15553029
> 
> 赞同：0
> 
> 时间：2013-03-21T16:29:25.113
> 
> 标签：url, report, pentaho

我正在使用 Pentaho Report Designer 3.9 制作一些报告。发布它们后，有什么方法可以直接使用如下 URL 访问它们：

**本地主机：8080/reports/my_report**

代替：

**localhost:8080/pentaho/content/reporting/reportviewer/report.html?solution=Reports&path=%2FReports&name=my_report.prpt**

我正在使用 Pentaho Business Analytics 4.8 试用版。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:31:54.383

您可以将报告引擎嵌入到您的应用程序中，然后通过您的应用程序调用它，可以在此处找到文档：http: [//infocenter.pentaho.com/help/nav/4_3](http://infocenter.pentaho.com/help/nav/4_3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T06:44:22.230

考虑到用户已经登录，您可以根据报告请求找到对服务器的实际请求。我所做的是在点击查看报告之前，我在 chrome 中打开了调试模式。然后单击查看报告按钮后，报告请求将显示在列表中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-14T06:28:45.930

您可以使用以下 URL 拨打电话

`http://localhost:8080/pentaho/content/reporting/execute/steel-wheels/dashboards/newpages.pdf?solution=steel-wheels&path=/dashboards&name=my_report.prpt&userid=joe&password=password`

# python - Facebook Graph Search 返回正确的 JSON

> ID：15553032
> 
> 赞同：1
> 
> 时间：2013-03-21T16:29:38.773
> 
> 标签：python, json, facebook-graph-api, mechanize

我最近一直在使用 mechanize 在网络上爬行并做一些事情。我决定写一些算法来以图形方式显示我朋友之间的联系。每个朋友都将是图中的一个节点，如果一个节点是另一个节点的朋友，那么他们之间就会有一条边。本质上只是facebook的共同朋友功能，但我希望它在一个节点表示的图形中，就像一个大蜘蛛网；networkx 库和 matplotlib 可以实现这一点。无论如何，我有一个庞大的字典列表，其中包含我每个朋友的姓名和 ID，如下所示：

```
friends = [
    {
     "name": "friendA",
     "ID": "99999999999"
    },
    {
     "name": friendB",
     "ID": "66666666666"
    }
] 
```

所以我一直在使用 mechanize 的浏览器进入图形搜索页面并执行我需要的操作：

```
import mechanize
import cookielib
cj = cookielibLWPCookieJar()
br = mechanize.Browser()
br.set_cookiejar(cj)
br.addheaders = [('User-Agent', 'Mozilla/5.0(X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
br.set_other_stuff(True)

# this will bring me to the Graph API, after I've logged in and stuff of course
# but for simplicity, we'll just assume I've already done that.
br.open("https://developers.facebook.com/tools/explorer/") 
```

在我访问 Graph API 并获得访问令牌之后，我可以执行以下操作。

```
# find our forms that we need to fill in with necessary information to get mutual friends

for form in br.forms():
    print form

1)
<GET https://developers.facebook.com/search application/x-www-form-urlencoded
<HiddenControl(path=) (readonly)>
<TextControl(selection=Search Facebook Developers)>
<SubmitButtonControl(<None>=) (readonly)>>
2)
<POST https://www.facebook.com/logout.php application/x-www-form-urlencoded
<HiddenControl(fb_dtsg=AQAudA2Y) (readonly)>
<HiddenControl(ref=ds) (readonly)>
<HiddenControl(h=AfeHIBr1AyKI-60f) (readonly)>
<SubmitControl(<None>=Log Out) (readonly)>>
3)
<GET https://developers.facebook.com/tools/explorer/ application/x-www-form-urlencoded
<TextControl(access_token=Paste in an existing Access Token or click 'Get Access Token' to generate one)>
<IgnoreControl(<None>=<None>)>
<SubmitControl(<None>=Debug) (readonly)>>

4)
<GET https://developers.facebook.com/tools/explorer/ application/x-www-form-urlencoded
<SelectControl(method=[, *GET, POST, DELETE])>
<TextControl(path=)>
<SubmitControl(<None>=Submit) (readonly)>>
5)
<GET https://developers.facebook.com/tools/explorer/ application/x-www-form-urlencoded
<HiddenControl(<None>=) (readonly)>
<TextareaControl(<None>=Input FQL query, <Tab> to autocomplete)>
<SubmitControl(<None>=Submit) (readonly)>> 
```

如您所见，有五种表格，其中只有两种我们需要填充信息。我们需要将访问令牌传递给索引 2 处的表单 3，我们需要将查询传递给索引 3 处的表单 4。我刚刚生成了一个访问令牌以在另一个浏览器中使用并复制它进入带有变量的python。如果您不熟悉 mechanize，我可以使用**br.select_form()选择表单**

```
# select form 3 at index 2 to give access token
br.select_form(nr=2)
# to make sure all we need is writable
br.set_all_readonly(False)
access_token_var = 'AAACEdEose0cBAJ1FwFMNE7eLe4CZBPrz3q1AuKEZBsGKuwosCh8sPpHFLkOz2fZBmCV5uohZBI4SOTvUH4ilQEiPJE5KmEF73EdfzCP26jz7RFc9Kguu'
br['access_token'] = access_token_var

# now select the form to give it a path with what we need, which is form 4 at index 3
br.select_form(nr=3)
br["path"] = "/my_user_id/mutualfriends/friends_user_id"
br.submit() 
```

现在，除了查看 JSON 之外，一切正常，表单选择、填充，甚至提交。当我尝试解析生成的 JSON 响应时，它在浏览器中作为 JSON 库完全可见，在 html 响应中找不到它。包含它的元素是隐藏的。在浏览器中我得到这个：

```
{
"data": [
    {
    "name": "some person",
    "ID": "3214564851"
    }
    ....
    ....
    ....
    ....
]
} 
```

我只想从我给 Graph API 的路径中获得与**共同朋友的 JSON 响应。**考虑到这些数据是 API 的全部目的，让这些数据易于解析似乎是他们的首要任务。我目前无法通过 Graph API 迭代生成这些路径响应，而是单独传递路径并彻底复制和粘贴；我不会满足于此。我确定有一种方法可以做到这一点，我只是还没有找到它，非常感谢您的帮助！

**编辑：**

**回答**

不久之后我找到了答案......

我一直在寻找并最终找到的 API 是：

```
https://graph.facebook.com/me/mutualfriends/friend_id?access_token=accessToken 
```

谢谢。

# c# - 函数不适用于长输入参数

> ID：15553034
> 
> 赞同：0
> 
> 时间：2013-03-21T16:29:44.613
> 
> 标签：c#, jquery, asp.net, .net

下面的函数在输入字符串（#txtarea）包含几个字符时有效，但当它包含长字符串时无效，如何让它工作？

下面是我的代码：

```
 $('#insertcmt').click(function () {
        $.getJSON('http://localhost:55679/RESTService.svc/InsertComment?callback=?', { commenttext: $('#txtarea').val() }, function (data) {
        });
        loadcomments();

    }); 
```

服务器端逻辑：

```
 [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    public void InsertComment(string commenttext)
    {
        string sql = "INSERT statement";
        Database db = Utilities.GetDataBase();
        DbCommand cmd = db.GetSqlStringCommand(sql);
        db.ExecuteNonQuery(cmd);
    } 
```

是因为我试图从跨域访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:37:24.277

这可能是由 RFC GET 请求中的限制引起的。看看[这个问题](https://stackoverflow.com/questions/266322/http-uri-get-limit)。

由于您在服务器端逻辑中使用了插入语句，因此无论如何您都应该使用 POST 请求。

```
 $('#insertcmt').click(function () {
    $.post('http://localhost:55679/RESTService.svc/InsertComment?callback=?', { commenttext: $('#txtarea').val() }, function (data) {
    });
    loadcomments();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:38:11.707

长 URL（超过 2000 个字符）可能不适用于所有 Web 浏览器。

使用 POST 方法：

```
$('#insertcmt').click(function () {
  $.post('http://localhost:55679/RESTService.svc/InsertComment?callback=', 
    { commenttext: $('#txtarea').val() }, 
    function (data) {

    });

  loadcomments();
}); 
```

编辑：

您必须将 [WebGet] 属性更改为：

```
[WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:38:22.537

尝试通过 POST 而不是 GET 发送内容，理论上没有通用限制。

# python - Python - 使用 K-means 进行聚类。一些方差为零的列

> ID：15553035
> 
> 赞同：4
> 
> 时间：2013-03-21T16:29:45.103
> 
> 标签：python, cluster-analysis, bioinformatics, k-means, variance

我有一个由约 200 个 99x20 频率数组组成的数据集，每列总和为单位。我已经使用热图（如![这个](../Images/f8025b4a882a14babd2624980f1f3ced.png). 每个数组都非常稀疏，每 99 个位置只有大约 1-7/20 个值是非零的。

但是，我想根据它们的频率分布的相似程度（最小欧几里德距离或类似的东西）对这些样本进行聚类。我将每个 99x20 阵列排列成一个 1980x1 阵列，并将它们聚合成一个 200x1980 观察阵列。

在找到集群之前，我尝试使用`scipy.cluster.vq.whiten`. `whiten`通过方差对每列进行归一化，但由于我展平数据数组的方式，我有一些 (8) 列的频率全为零，因此方差为零。因此，白化数组具有无限值，质心查找失败（或给出约 200 个质心）。

我的问题是，我应该如何解决这个问题？到目前为止，我已经尝试过

*   不要白化数据。这导致 k-means 每次运行时都会给出不同的质心（有点预期），尽管大大增加了`iter`关键字。
*   在展平阵列之前转置阵列。零方差列只是移动。

可以只删除其中一些零方差列吗？这会以任何方式偏向聚类吗？

编辑：我也尝试过使用我自己的 whiten 函数

```
for i in range(arr.shape[1]):
    if np.abs(arr[:,i].std()) < 1e-8: continue
    arr[:,i] /= arr[:,i].std() 
```

这似乎可行，但我不确定这是否会以任何方式偏向聚类。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:12:06.447

首先，删除常量列是非常好的。显然他们不提供信息，所以没有理由保留它们。

然而，K-means 对于稀疏向量并不是特别好。问题是最有可能产生的“质心”*彼此之间*比集群成员更相似。看，在稀疏数据中，每个对象在某种程度上都是一个异常值。而且 K-means 对异常值非常敏感，因为它试图最小化*平方和*。

我建议您执行以下操作：

1.  找到*适用于您的域*的相似性度量。在如何为您的特定用例捕获相似性方面花费大量时间。

2.  一旦你有了相似度，计算 200x200 的相似度矩阵。由于您的数据集非常小，您实际上可以运行昂贵的聚类方法，例如层次聚类，这些方法无法扩展到数千个对象。如果您愿意，您还可以尝试 OPTICS 集群或 DBSCAN。但特别是如果您的数据集更大，DBSCAN 实际上会更有趣。对于微小的数据集，层次聚类很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:47:46.637

删除所有 0 的列不应使数据产生偏差。如果你有 N 维数据，但一维都是同一个数，这与拥有 N-1 维数据完全一样。这种有效维数的性质称为[秩](http://en.wikipedia.org/wiki/Rank_%28linear_algebra%29)。

考虑 3-D 数据，但所有数据点都在 x=0 平面上。你能看出这与二维数据完全相同吗？

# r - 重命名 ldply 中的 .id 列

> ID：15553036
> 
> 赞同：4
> 
> 时间：2013-03-21T16:29:45.487
> 
> 标签：r, plyr

有没有办法为通常`.id`在结果中命名的列分配自定义名称`ldply`？

```
> ldply(setNames(1:3, 1:3), function(i) data.frame(j=1/i))
  .id         j
1   1 1.0000000
2   2 0.5000000
3   3 0.3333333 
```

我知道我可以调用`rename`结果，但我想一次性完成。有什么建议么？

请注意，`adply`遇到类似的问题：

```
> adply(as.array(setNames(1:3, 1:3)), 1, function(i) data.frame(j=1/i))
  X1         j
1  1 1.0000000
2  2 0.5000000
3  3 0.3333333 
```

另一个[相关问题](https://stackoverflow.com/questions/4338325/how-can-i-rename-the-output-rows-cols-of-ply-functions-from-plyr)解决了重命名“数据”列的问题，但答案也未能为该`.id`列提供解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T22:52:49.053

我已经[提出](https://github.com/hadley/plyr/pull/143)了一个[实现](https://github.com/muelleki/plyr)，让我们看看它是否会成为官方`plyr`的。基本上，一个`.idname`允许指定`.id`列名称的新参数，可以通过传递来完全删除它`NULL`：

```
> ldply(setNames(1:3, 1:3), function(i) data.frame(j=1/i), .idname='i')
  i         j
1 1 1.0000000
2 2 0.5000000
3 3 0.3333333 
```

. 使用安装调整后的版本

```
library(devtools)
install_github('plyr', 'krlmlr', ref='140-142-id') 
```

**编辑**：这现在`plyr`在 CRAN 的 1.8.1 中可用：

```
> ldply(setNames(nm=1:3), function(i) data.frame(j=1/i), .id='i') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:48:53.237

您似乎很喜欢使用 setNames，因此您可以将“j”和“newname”分配到一个方便的包装器中。

```
setNames( ldply(setNames(1:3, 1:3), function(i) data.frame(1/i)) , c("newname", "j") )
  newname         j
1       1 1.0000000
2       2 0.5000000
3       3 0.3333333 
```

# android - 如何在 ScrollView 中包含可滚动视图

> ID：15553041
> 
> 赞同：1
> 
> 时间：2013-03-21T16:30:13.147
> 
> 标签：android, android-layout, android-fragments

我使用 v4 支持库编写了一个 FragmentActivity 应用程序，该应用程序由一个具有包含列表视图（列表片段）的布局的片段和一个可重用的片段组成，该片段根据所选的列表项（详细片段）更改其布局。

在大屏幕的布局中，我有一个用于列表片段的片段标记和一个滚动视图作为详细片段的片段容器，以允许其布局溢出屏幕的片段。

最初，对于小屏幕，我使用基本的 ScrollView 作为片段容器。但是，由于列表片段中的列表视图是可滚动的片段，并且滚动视图中不能有可滚动的视图，因此无法滚动；尽管可以滚动其他片段。

因此，我将 ScrollView 改为 FrameLayout，虽然具有可滚动视图的片段可以滚动，但溢出屏幕的片段无法滚动。

我将如何解决这个问题，以使具有可滚动视图的片段和溢出的片段都可以在单面板片段视图中滚动？

提前致谢

编辑：我可能可以在我认为合适的细节片段使用的动态布局中使用 ScrollView，在没有可滚动视图的地方使用它，但有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:44:02.573

好的，我想这确实需要 ScrollView 仅在没有可滚动视图的布局中使用。

我停止使用 ScrollView 作为片段活动布局中的根元素，并且我在适用的情况下手动使用了 ScrollViews，它现在正在工作。

更好的方法仍然受到欢迎和赞赏。

# c# - 为什么除了.edmx 中的默认构造函数之外没有其他构造函数？

> ID：15553044
> 
> 赞同：0
> 
> 时间：2013-03-21T16:30:37.150
> 
> 标签：c#, entity-framework

我在我的 C# 项目中使用实体框架进行数据库连接。

假设我的数据库中有一个表，它有 3 列：表：汽车列：id、颜色、类型、numberOfDoors

以下是我为该表创建新记录的方法：

```
Car c = new Car();//default constructor
c.color = "blue";
c.type = "Opel";
c.numberOfDoors = 2;
myDatabase.tblCar.AddObject(c);
myDatabase.SaveChanges(); 
```

我在项目的很多地方都这样做，所以前 4 行重复了很多。所以我在想，为什么实体框架没有带参数的构造函数？我认为也许 db 中可以为 null 的列可能是导致此问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:33:16.763

实体框架试图尽可能通用。此外，某些模型可能具有 10 多个属性。如果您只需要分配其中的一小部分，那将非常混乱。另一个原因是在实体框架内部构建模型会很麻烦。

这些类是使用`partial`关键字生成的，您应该可以自己添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:35:16.120

EF 为其生成的每个实体（类）生成静态构造函数 CreateX 方法。例如，在我的一个用户类中，我可以执行以下操作：

```
User user = User.CreateUser(userID, password, email, userTypeId); 
```

在快速设置实体类的新实例方面，这可以满足您的大部分需求。当然，这不会将新实例添加到集合中或保存更改；您可能想要创建 50,000 个实例，而每次保存都是浪费的。

# reporting-services - SSRS 2008当月周数计算

> ID：15553048
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:30:58.370
> 
> 标签：reporting-services

我需要在 SSRS 2008 中构造一个数据参数，如果当前周数为 1，则我使用上个月的第一天，如果不是，则使用当天。

即今天是第 4 周，因此将使用今天的日期

如果今天是 3 月 2 日，那么这周就是第 1 周，我会利用上个月的第一天，即 2 月 1 日

注意：周必须在日历周之后。

提前感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:55:09.800

您可以使用以下表达式设置参数默认值：

```
=IIf(Day(Today()) <=7
    and DatePart(DateInterval.WeekDay, Today(), FirstDayOfWeek.Monday)
      >= DatePart(DateInterval.WeekDay, DateSerial(Year(Today()), Month(Today()), 1), FirstDayOfWeek.Monday)
  , DateAdd(DateInterval.Month, -1, DateSerial(Year(Today()), Month(Today()), 1))
  , Today()) 
```

所以：

如果今天是该月的前 7 天之一，并且星期几是 >= 该月第一天的星期几

=> 第一周，所以使用上个月的第一天

=> 否则使用当前日期。

# oauth-2.0 - Google Drive API 问题搜索，包括共享文件

> ID：15553055
> 
> 赞同：0
> 
> 时间：2013-03-21T16:31:28.257
> 
> 标签：oauth-2.0, google-drive-api, google-api-java-client

我正在 Google Drive API 中执行一些文件列表搜索，并发现 API 中的搜索与直接在 Google Drive 网页中对共享文件执行的搜索不匹配。由于性格问题。

如果我在共享文件中搜索“företagsrevision”，例如“fullText contains 'företagsrevision'”，它将找不到任何东西。但是，如果我在 Google Drive Web 中搜索相同内容，我会获得成功。

如果我使用其他一些没有 åäö 的文本没有问题，但是我应该将这些字符转换为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:36:57.677

字符应该是 url 转义的（因为它们出现在 url 中）。除此之外，应该正确找到它们。如果没有，它可能是一个错误。为了提供帮助，您对字符使用什么编码？

# c++ - 结构向量内的结构向量

> ID：15553057
> 
> 赞同：1
> 
> 时间：2013-03-21T16:31:29.687
> 
> 标签：c++, vector, struct

想象一下 C++ 中的社交网络帐户数据库之类的东西。每个帐户都有它的用户名、级别（管理员等）、关注此帐户的用户列表以及向此帐户发送消息的用户列表。

问题是，我想计算每个单独用户收到的消息数，因此内部结构中的名称和计数必须链接在一起。

这是实施的好主意吗？

```
 struct User {
        string name;
        int level;

        vector<string> followedBy;
        struct MessagedBy {
            string name;
            int count;
        };
    };

vector<User> users;
//@TODO vector of MessagedBy as an instance of User 
```

如何*在 structs*向量内创建 structs*向量*？我如何指向它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:35:05.573

所以，你可能想要这样的东西：

```
struct User {
        string name;
        int level;

    vector<string> followedBy;
    struct MessagedBy {
        string name;
        int count;
    };
    vector<MessageBy> messages;
}; 
```

然后你可以使用：

```
cout << "Messages from: " << users[index].messages[otherindex].name << ":" << users[index].messages[otherindex].count; 
```

# php - 如何在 symfony2 中处理带有 FileType 输入的编辑表单

> ID：15553060
> 
> 赞同：3
> 
> 时间：2013-03-21T16:31:41.150
> 
> 标签：php, forms, symfony

在 symfony2 应用程序中，实体消息与文档具有一对多的关系。文档代表用户上传。我创建了一个表格。我实现了两种形式：MessageForm 和 DocumentForm。DocumentForm 存在于 MessageForm 的集合 FormField 中。上传和处理文件确实有效。

但是，如果我想编辑实体消息，则表单包含与现有文档一样多的空文件输入。期望的行为是：

*   FileInputs 上传新文件
*   现有文件的文件名（链接）
*   可以删除现有文件

这应该在表单内部处理。提交表单时应进行更改。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:46:24.573

解决方案是编写自定义表单类型扩展。如[http://symfony.com/doc/2.1/cookbook/form/create_form_type_extension.html](http://symfony.com/doc/2.1/cookbook/form/create_form_type_extension.html)所述。

## 文件类型扩展

```
 <?php

    use Symfony\Component\Form\AbstractTypeExtension;
    use Symfony\Component\Form\FormView;
    use Symfony\Component\Form\FormInterface;
    use Symfony\Component\Form\Util\PropertyPath;
    use Symfony\Component\OptionsResolver\OptionsResolverInterface;

    /**
     * Class FileTypeExtension
     *
     * @see http://symfony.com/doc/2.1/cookbook/form/create_form_type_extension.html
     */
    class FileTypeExtension extends AbstractTypeExtension
    {
        /**
        * Returns the name of the type being extended.
        *
        * @return string The name of the type being extended
        */
        public function getExtendedType()
        {
            return 'file';
        }

        /**
         * Add the image_path option
         *
         * @param OptionsResolverInterface $resolver
         */
        public function setDefaultOptions(OptionsResolverInterface $resolver)
        {
            $resolver->setOptional(array('file_path', 'file_name'));
        }

        /**
         * Pass the image url to the view
         *
         * @param FormView $view
         * @param FormInterface $form
         * @param array $options
         */
        public function buildView(FormView $view, FormInterface $form, array $options)
        {
            if (array_key_exists('file_path', $options)) {
                $parentData = $form->getParent()->getData();

                if (null !== $parentData) {
                    $propertyPath = new PropertyPath($options['file_path']);
                    $fileUrl = $propertyPath->getValue($parentData);
                } else {
                    $fileUrl = null;
                }

                $view->set('file_url', $fileUrl);
            }

            if (array_key_exists('file_name', $options)) {
                $parentData = $form->getParent()->getData();

                if (null !== $parentData) {
                    $propertyPath = new PropertyPath($options['file_name']);
                    $fileName = $propertyPath->getValue($parentData);
                } else {
                    $fileName = null;
                }

                $view->set('file_name', $fileName);
            }
        }
    } 
```

## 自定义的 file_widget

```
 {% block file_widget %}
        {% spaceless %}

            {% if file_url is not null %}
                <div><a href="{{ file_url }}">{{ file_name }}</a></div>
                <div style="display:none">{{ block('form_widget') }}</div>
            {% else %}
                {{ block('form_widget') }}
            {% endif %}

        {% endspaceless %}
    {% endblock %} 
```

## 服务.yml

```
 parameters:
        foobar.file_type_extension.class: Foobar\Form\Extension\FileTypeExtension

    services:
        foobar.file_type_extension:
            class: %replacethis.file_type_extension.class%
            tags:
              - { name: form.type_extension, alias: file } 
```

## 在表单类型内

```
 $builder->add('file','file', array(
                "label" => "Datei",
                "required" => true,
                "attr" => array(),
                "file_path" => "webPath",
                "file_name" => "name"
            )); 
```

就是这样 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:18:35.510

除了上面的回答之外-它可以让你构建一个文件输入，它可以呈现为一个链接（如果它有一个 url）或一个字段（如果它没有）——你可以看看

[http://symfony.com/doc/2.0/cookbook/form/form_collections.html](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)

与一些 jQuery 结合使用可以让您在 UI 中添加字段。

# parallax - 恒星js水平移动物体问题

> ID：15553063
> 
> 赞同：1
> 
> 时间：2013-03-21T16:31:54.090
> 
> 标签：parallax, stellar.js

我一直在寻找一种使对象在垂直滚动时水平移动的方法。我从插件的作者那里找到[了这个很好的答案。](https://stackoverflow.com/questions/13149700/how-to-move-animate-elements-in-from-the-side-with-stellar-js-on-a-vertical-scro)所以水平移动东西的代码看起来像这样：

```
$.stellar.positionProperty.apple = {
    setTop: function($el, newTop, originalTop) {
        $el.css({
            'top': newTop,
            'left': $el.hasClass('apple') ? originalTop - newTop : 0
        });
    },
    setLeft: function($el, newLeft, originalLeft) {
        $el.css('left', newLeft);
    }
}; 
```

问题在于它仅涵盖从左侧的水平滚动。但它也会影响其他元素，即使它们没有示例脚本中的 apple 类。因此，例如，如果我有图像：

```
<section>
  <img></img>
</section> 
```

图像的`absolute`位置和`right:0;`添加`data-stellar-ratio`后，此脚本会将**元素推到左侧**，即使图像没有“apple”类

有没有办法在脚本上定义具有“左”类的图像从左侧滚动，然后具有“右”类的图像从右侧滚动？

# jboss - 为 jboss 6 EAP add-user.sh 配置密码规则

> ID：15553066
> 
> 赞同：1
> 
> 时间：2013-03-21T16:32:04.870
> 
> 标签：jboss, jndi, jboss6.x

有没有办法为 Jboss 6 EAP 中的 add-user.sh 脚本配置密码强度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T11:41:01.133

没有这样的方法来定义规则，但它允许字母数字和特殊字符......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T10:08:58.280

这是不可能的，所以有人在社区 Wildfly 项目中提出了功能请求： [https ://issues.jboss.org/browse/WFLY-1611](https://issues.jboss.org/browse/WFLY-1611)

Wildfly 8 应该拥有它，但不知道何时（如果有的话）它会合并回 EAP 6。

* * *

或者，您*可以*绕过 add-user 并使用独立模式的任何密码手动创建用户。当然，这并不是因为你应该总是这样做，密码规则是为了安全而存在的。**只为开发这样做，当然不要将您的安装或配置文件夹复制到生产中！**

*   去`<jboss-install>/standalone/configuration`打开`mgmt-users.properties`。
*   找到带有 的行`#$REALM_NAME=`并记下`=`, 最后`$`排除的值。就我而言，它是`ManagementRealm`。
*   如果您有 Linux，请运行以下命令（替换您的用户、上面提到的值和密码）：
    `echo -n '<user>:<realm>:<password>' | md5sum`
    如果您有 Windows，则必须找到自己的实用程序来生成 MD5 哈希。如果您将用户/领域/密码组合写入文件以让 MD5 工具完成其工作，请检查文件末尾是否没有换行符，否则哈希将关闭。在这种情况下，您也不需要引号。
*   `md5sum`将输出一个十六进制值。返回`mgmt-users.properties`并在末尾添加一行：
    `<user>=<MD5 hash>`

# c# - 转换为变量类型

> ID：15553070
> 
> 赞同：0
> 
> 时间：2013-03-21T16:32:14.313
> 
> 标签：c#, dynamic, reflection

是否可以从 Dynamic 或 Object 转换为变量类型？目标变量类型是一个泛型类，只是具体数据类型不同。

我正在寻找抽象的解决方案，但情况是这样的：我想要一个针对不同实体的 Linq2SQL 命令 - 我可以 GetProperty + GetValue 的 EntityFramework 上下文，但是必须将它转换为一些确切的类型，但这些来自变量输入 - 数据库表的名称。

我所拥有的示例：

```
 Type NewType = typeof(System.Data.Objects.ObjectSet<>);
 NewType.MakeGenericType(new Type[] {"...some type here that's variable accordint to user input - like Person, Address, Contact, ..."});            
 Object MyObject = Context.GetType().GetProperty("the same variable like above - Person, Address,...", BindingFlags.Public | BindingFlags.Instance).GetValue(Context, null); // this is EntityFramework Context 
```

我需要但不知道该怎么做的例子：

```
 NewType CastedObject = (NewType) MyObject;
 // or
 NewType CastedObject = Convert.ChangeType(MyObject, NewType);
 // or
 NewType CastedObject = MyObject as NewType; 
```

所以我可以这样做：

```
 (from x in CastedObject where x.ID == ID select x).FirstOrDefault(); 
```

对于那些熟悉 PHP 的人，我正在尝试这样做：

```
 (from x in Context.$tablename where x.ID == ID select x).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:36:09.257

既然`NewType`是运行时类型，你怎么会有一个编译时类型的变量`NewType`？编译器必须知道所有变量的“声明”类型。所以你想要的是不可能的。

您*可以*做的事情是强制`MyObject`转换为`dynamic`. 然后像这样的东西`foreach (var x in CastedToDynamic)`会编译（但没有编译时类型检查）。

但是，您不能在`dynamic`表达式上使用 LINQ。你将不得不像这样重写：

```
 dynamic found = null;
    foreach (var x in CastedToDynamic)
    {
      if (x.ID == ID)
      {
        found = x;
        break;
      }
    } 
```

注意：使用哪个重载`==`将在运行时决定。因此，即使`ID`是 (boxed) `System.Guid`，也会（拆箱并）调用该结构内部定义`==`的重载。`==`所以这行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:41:43.743

像这样的东西可能会得到你正在看的东西（严重依赖于反射）

```
 List<dynamic> mylist = new List<dynamic>();
        dynamic data = new ExpandoObject();
        data.Foo = "foo";
        data.ID = 1;
        mylist.Add(data);

        data = new ExpandoObject();
        data.Foo = "foobar";
        data.ID = 2;
        mylist.Add(data);

        data = new ExpandoObject();
        data.Foo = "foobar2";
        data.ID = 2;
        mylist.Add(data);

        data = new ExpandoObject();
        data.Foo = "foobar2";
        data.ID = 3;
        mylist.Add(data);

        int idiminterestedin = 2;

        var dynamicselected = mylist.Select(d=>((IDictionary<string,object>)d)).Where(d=>
        {
            object id;
            if (d.TryGetValue("ID",out id))
            {
                return (id is int) && (int)id == idiminterestedin;
            }
            return false;
        });

        foreach (var v in dynamicselected)
        {
            Console.WriteLine(v["Foo"]);
        }

        Console.ReadLine(); 
```

虽然我可能会跳过 ExpandoObject 并直接查找字典：

```
 Dictionary<string, object> data = new Dictionary<string, object>();
        data["Foo"] = "foo";
        data["ID"] = 1; 
```

然后制作一个通用的扩展函数：

```
static class ExptensionFunction
{
    static T GetValueAs<T>(this Dictionary<string, object> obj, string key)
    {
        return (T)obj[key];
    }

    static bool TryGetValueAs<T>(this Dictionary<string, object> d, string key, out T value)
    {
        object id;
        if (d.TryGetValue(key, out id))
        {
            if (id is T)
            {
                value = (T)id;
                return true;
            }
        }

        value = default(T);
        return false;
    }

    static IEnumerable<Dictionary<string, object>> GetValuesWithKey<T>(this List<Dictionary<string, object>> list, string key, T value)
    {
        return list.Where(d =>
        {
            T id;
            if (d.TryGetValueAs<T>(key, out id))
            {
                return id.Equals(value);
            }
            return false;
        });
    }
} 
```

受此启发：

[动态创建匿名类型？](https://stackoverflow.com/questions/4024754/creating-an-anonymous-type-dynamically)

和

[创建后将属性添加到匿名类型](https://stackoverflow.com/questions/233711/add-property-to-anonymous-type-after-creation)

# java - 什么是 rootPane 或这意味着什么？

> ID：15553081
> 
> 赞同：0
> 
> 时间：2013-03-21T16:32:49.830
> 
> 标签：java, swing, graphics

这是我的第一个问题

我用java创建了一个益智游戏：

```
public class ImageJoorichin extends JApplet implements KeyListener {

Image myImage,alaki;

boolean preViewImage = true; // Control First PreView before Shuffle

int n, // bord higth & wight
    blankX, // Blank X Coordinates
    blankY; // Blank Y Coordinates

int[][] board;

public void init() {

    myImage = getImage( getCodeBase(), "Screen Shot 1391-12-22 at 12.54.54 PM.png" );

    String temp = JOptionPane.showInputDialog(rootPane, "Enter Size of Board", "Board Size", 2);

    n = Integer.parseInt( temp );

    board = new int[ n ][ n ];

    temp = JOptionPane.showInputDialog(rootPane, "1-Easy\n2-Normal\n3-Hard", "Level Defficulty", 2);

    int alaki = Integer.parseInt( temp ),
        numberOfShuffle = 0;

    switch( alaki ) {

        case 1:
            numberOfShuffle = n * n;
            break;

        case 2:
            numberOfShuffle = n * n * n;
            break;

        case 3:
            numberOfShuffle = n * n * n * n;
            break;
    }

    repaint();

    set();

    setSize( 400, 400 );

    shuffle( numberOfShuffle );

    setFocusable(true);
    requestFocus();
    this.addKeyListener(this);

}

public void start() {

    //repaint();
}

// For New Set & Orginaze Table
public void set() {

    blankX = blankY = n - 1;

    for( int i = 0; i < board.length; i++ ) {

        for( int j = 0; j < board[ i ].length; j++ ) {

                board[ i ][ j ] = ( i * n ) + j;
        }
    }
}

public void right() {

    if( blankY < n - 1 ) {

        board[ blankX ][ blankY ] = board[ blankX ][ blankY + 1 ];
        //board[ blankX ][ blankY - 1 ] = 0;
        ++blankY;
    }      
}

public void left() {

    if( blankY > 0 ) {

        board[ blankX ][ blankY ] = board[ blankX ][ blankY - 1 ];
        //board[ blankX + 1 ][ blankY ] = 0;
        --blankY;
    }      
}

public void down() {

    if( blankX < n - 1 ) {

        board[ blankX ][ blankY ] = board[ blankX + 1 ][ blankY ];
        //board[ blankX ][ blankY - 1 ] = 0;
        ++blankX;
    }      
}

public void up() {

    if( blankX > 0 ) {

        board[ blankX ][ blankY ] = board[ blankX - 1 ][ blankY ];
        //board[ blankX ][ blankY - 1 ] = 0;
        --blankX;
    }      
}

public void shuffle( int numberOfShuffels ) {

    for( int i = 0; i < numberOfShuffels; i++ ) {

        int temp = ( int )( Math.random() * 4 ) + 1;

        switch( temp ) {

            case 1:
                up();
                break;

            case 2:
                down();
                break;

            case 3:
                left();
                break;

            case 4:
                right();
                break;

            default:
                break;
        }
    }

}

public void paint( Graphics graphic ) {

    super.paint( graphic );

    myImage.getWidth( rootPane );

    int distance = getWidth() / n;

    if( preViewImage == true ) { 

        graphic.drawImage(myImage, 0, 0, 400, 400, this);
        //graphics.drawLine( 0, 0, 100, 100 );

        preViewImage = false; 

        return;
    }

    else {
        for( int i = 0; i < board.length; i++ ) {

            for( int j = 0; j < board[ i ].length; j++ ) {

                int temp = board[ i ][ j ];

                int I = temp / n; // SX
                int J = temp % n; // SY

                graphic.drawImage( myImage, j * distance, i * distance, ( j + 1 ) * distance, ( i + 1 ) * distance, J * distance, I * distance, ( J + 1 ) * distance, ( I + 1 ) * distance, this );

                if( ! won() ) {

                    graphic.setColor(Color.YELLOW);
                    graphic.drawRect( j * distance, i * distance, distance, distance);
                }
            }
        }

        graphic.setColor(Color.GRAY);
        graphic.fillRect( blankY * distance, blankX * distance, distance, distance);

        if( !won() ) {

            graphic.setColor(Color.YELLOW);
            graphic.drawRect( blankY * distance, blankX * distance, distance, distance);
        }

        else {

            graphic.setFont( new Font( "Tohama", Font.BOLD, 27) );
            graphic.setColor(Color.RED);
            int temp = ( getWidth() - graphic.getFontMetrics().stringWidth( "Congratulation" ) ) / 2;
            graphic.drawString( "Congratulation", temp, getHeight() / 2 );
        }
    }
}

@Override
public void keyTyped( KeyEvent e ) {}

@Override
public void keyReleased( KeyEvent e ) {}

@Override
public void keyPressed( KeyEvent e ) {

    switch( e.getKeyCode() ) {

        case KeyEvent.VK_UP:
            up();
            break;

        case KeyEvent.VK_DOWN:
            down();
            break;

        case KeyEvent.VK_LEFT:
            left();
            break;

        case KeyEvent.VK_RIGHT:
            right();
            break;   
    }

    if( won() ) {

        this.removeKeyListener( this );
    }

    repaint();
}

public boolean won() { 
    for( int i = 0; i < board.length; i++ ) { 

        for( int j = 0; j < board[i].length; j++ ) { 

            if( ( i != blankX || j != blankY ) && board[ i ][ j ] != i * n + j ) { 

                return false; 
            } 
        } 
    } 

    return true; 
} 
```

}

我尝试在随机播放之前显示图像预览。

但我不能！我尝试用它来做`graphic.drawImage()`，但它没有显示......但代码正在工作，因为如果我用它替换`graphic.drawLine()`它就会工作

# fortran - 如何在 Fortran 95 中包含来自不同文件的模块？

> ID：15553096
> 
> 赞同：3
> 
> 时间：2013-03-21T16:33:27.577
> 
> 标签：fortran, fortran95, silverfrost-fortran

我认为这个问题很明显，虽然我用谷歌搜索了它，但我找不到任何解决方案。我想拆分我的源代码以使其更易于维护。如何引用另一个文件中的模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T16:57:52.983

我认为您正在寻找`use`声明。例如，您可能有一个包含模块定义的源文件，大纲：

```
module abstract_types
    implicit none
    ! declarations
  contains
    ! procedure definitions
end module abstract_types 
```

然后，在另一个源文件中，使用该模块的程序，概述：

```
program hello_there
    use abstract_types
    implicit none
    ! declarations
    ! executable statements
end program hello_there 
```

笔记：

*   任何陈述都`use`在陈述之前`implicit`。

*   该`use`语句按名称引用模块。

编译时，一定要先编译模块源文件，再编译程序源文件；在编译时（不是在链接时），编译器将寻找一个模块文件（通常称为`mod`文件）以满足`use`语句中对模块的引用。该`mod`文件有点像头文件，但它是由编译器创建的。

稍后，当您链接程序时，您将需要模块和程序的目标文件。

# gwt - gwt rpc 是否会始终回调我的 onsuccess 或 onfail 方法？

> ID：15553099
> 
> 赞同：1
> 
> 时间：2013-03-21T16:33:35.017
> 
> 标签：gwt, rpc

我已经实施了这篇文章中的建议，并在第一次点击后禁用了我的按钮。[如何在 GWT 应用程序中防止 DoubleSubmit？](https://stackoverflow.com/questions/4549049/how-to-prevent-doublesubmit-in-a-gwt-application) 我想知道的是，在我的失败和成功方法中重新启用按钮后，它是否会始终重新启用。还有什么地方我可以放置一些我总是希望在服务器回复时执行的代码，而不是在失败和成功方法中复制它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:38:37.973

我确实认为每次都会被调用`onSuccess()`。`onFailure()`

至于有一个地方可以放置在获得对服务器的响应时将始终运行的代码，您可以创建一个`AsyncCallback`其中包含代码`onFailure()`和`onSuccess()`方法的代码。然后，您可以在`AsyncCallback`每次创建`AsyncCallback`.

```
public MyAsyncCallback<T> extends AsyncCallback<T>(){

    @Override
    public void onFailure(Throwable caught){
        //Do something
        onResponse()
        failed(caught);
    }

    @Override
    public void onSuccess(T result){
        //Do something
        onResponse()
        succeeded(result);
    }

    public void onResponse(){
        // Do something or nothing by default
    }

    public abstract void failed(Throwable caught);

    public abstract void succeeded(T result);

}; 
```

每当您想创建一个`AsyncCallback`just use时`MyAsyncCallback`：

```
AsyncCallback callback = new MyAsyncCallback(){

    @Override
    public void failed(Throwable caught){
        //Do something
    }

    @Override
    public void succeeded(T result){
        //Do something
    }  

    // Optionally override onResponse() if needed
    @Override
    public void onResponse(){
        //Do something
    }

} 
```

# c# - 从不同的计算机移动精灵

> ID：15553106
> 
> 赞同：-3
> 
> 时间：2013-03-21T16:34:02.427
> 
> 标签：c#, sockets, tcp, xna, tcpclient

我正在做一个任务，我需要使用 XNA 开发机器人环境并使用来自另一台计算机的 c# TCP/IP 套接字技术控制机器人。但是当我将服务器代码插入 XNA 时，它会启动但游戏不会加载。

```
 protected override void Update(GameTime gameTime)
{
//Server Settings
ipAddress = IPAddress.Parse("192.168.0.11");
myList = new TcpListener(ipAddress, 8000);
myList.Start();
s = myList.AcceptSocket();

b = new byte[100];
int? k = s.Receive(b);

// Allows the game to exit
if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
this.Exit();

if (Keyboard.GetState().IsKeyDown(Keys.Right))
//if (k != null)
myRectangle.X += 3;
if (Keyboard.GetState().IsKeyDown(Keys.Left))
myRectangle.X -= 3;
if (Keyboard.GetState().IsKeyDown(Keys.Up))
myRectangle.Y -= 3;
if (Keyboard.GetState().IsKeyDown(Keys.Down))
myRectangle.Y += 3;

//Screen Boundries
if (myRectangle.X <= 0)
myRectangle.X = 0;

if (myRectangle.X + myTexture.Width >= screenWidth)
myRectangle.X = screenWidth - myTexture.Width;

if (myRectangle.Y <= 0)
myRectangle.Y = 0;

s.Close();
myList.Stop();
base.Update(gameTime);
} 
```

任何的想法？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:53:10.807

我不是 TCP 方面的天才……但是每帧都创建一个新的 TCP 侦听器？那可能是个问题。

添加

```
ipAddress = IPAddress.Parse("192.168.0.11");
myList = new TcpListener(ipAddress, 8000);
myList.Start();
s = myList.AcceptSocket(); 
```

到你的 initialize()

和

```
s.Close();
myList.Stop(); 
```

到您的 UnloadContent() 或 dispose 方法。

您还应该考虑将经过的时间添加到您的动作中，因此每台计算机上的速度都相同。

# php - 在 php foreach 循环中从 mysql 获取数据的有效方法

> ID：15553107
> 
> 赞同：1
> 
> 时间：2013-03-21T16:34:02.630
> 
> 标签：php, mysql

我有一些选项存储在 mysql 中。该表包含 4 列，如下所示：

```
option_id | option_name | option_default | option_user_value
------------------------------------------------------------
1         | timezone    | Europe/Athens  |
2         | mode        | 1              |
3         | email       | test@test.test | 
```

到目前为止，我使用以下 php 代码从数据库中获取该信息：

```
$table  = 'options';
$values = '
    option_name,
    option_default,
    option_user_value
';
$where = null;
$options = get_db_entries($table, $values, $where);

if ($options)
{
    foreach ($options as $db_entry)
    {
        if ($db_entry['option_name'] == 'timezone')
        { $_timezone = $db_entry['option_default']; }

        if ($db_entry['option_name'] == 'mode')
        { $_mode = $db_entry['option_default']; }

        if ($db_entry['option_name'] == 'email')
        { $_email = $db_entry['option_default']; }
    }
} 
```

有没有更有效的方法来避免循环中的那些“if”语句？我的意思是有没有办法在没有 IF 的情况下直接将这些列中的信息插入到每个变量中？

只是出于好奇，`get_db_entries()`如果你愿意，也请检查我的功能。我仍在学习（还不熟悉 OO）并提前感谢。祝你今天过得愉快。

```
function get_db_entries($table, $values, $where)
{
    $db_host = '........';
    $db_name = '........';
    $db_user = '........';
    $db_pass = '........';
    //  -----------------------------------------------------
    $dbh = new PDO(
        'mysql:host='.$db_host.'; dbname='.$db_name,
        $db_user,
        $db_pass,
        array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")
    );
    //  -----------------------------------------------------
    if ($where) { $where = ' WHERE '.$where; }

    $sql = 'SELECT '.$values.' FROM '.$table.$where;
    $results = $dbh->query($sql);
    //  -----------------------------------------------------
    $results_array = array();
    foreach ($results as $db_entry)
    { array_push($results_array, $db_entry); }

    return $results_array;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:40:43.297

每次使用数据库连接调用该函数时，您都在打开、查询和关闭与数据库的连接......这会导致 SQL 服务器和 PHP/MySQL 连接器的大量开销。如果有很多查询，您可以在资源不足的情况下运行服务器。将其拉入一个数组，这样您就只使用一个数据库连接和一个查询，如下所示：

```
<?php
$sql = "select * from database.table;";
$result = mysql_query($sql);
while ($db_entry = mysql_fetch_array($result)){

    if ($db_entry['option_name'] == 'timezone')
    { $_timezone = $db_entry['option_default']; }

    if ($db_entry['option_name'] == 'mode')
    { $_mode = $db_entry['option_default']; }

    if ($db_entry['option_name'] == 'email')
    { $_email = $db_entry['option_default']; }

}
?> 
```

PDO 示例（未测试）：

```
<?php
try {
$DBH = new PDO("mssql:host=$host;dbname=$dbname, $user, $pass");    
}
catch(PDOException $e) {  
   echo $e->getMessage();  
}  

$STH = $DBH->query('select * from database.table');

$STH->setFetchMode(PDO::FETCH_OBJ); 

while($row = $STH->fetch()) {

    switch($row->option_name){
    case 'mode':
    $_mode = $row->option_default;
    break;
    case 'email':
    $_email = $row->option_default;
    break;
    case 'timezone':
    //timezone
    $_timezone = $row->option_default;
    default:
    //do something else
    }

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:48:33.660

使用一个数组，`$option_defaults`例如，而不是您的单个变量（`$_timezone`,`$_mode`等`$_email`），并使用作为关联值`$db_entry['option_name']`的键向其中添加条目。`$db_entry['option_default']`

# sharepoint - 可自定义的博客提要 sharepoint 2010 Web 部件

> ID：15553108
> 
> 赞同：1
> 
> 时间：2013-03-21T16:34:11.253
> 
> 标签：sharepoint, blogs, web-parts

我在一所社区大学的 IT 部门工作，我们需要一个 SharePoint 2010 解决方案，它本质上是一个博客，不同的部门可以在其中通过帖子发布公告，并且个人用户可以“订阅”不同的部门以接收公告他们想看到的，但不是他们不想看到的。订阅的帖子应显示在他们在 SharePoint 主屏幕上看到的 Web 部件中。对此的需求如下：

*   发帖仅限于某些用户
*   用于识别帖子来自哪个部门的类别或标签必须严格定义。
*   Web 部件仅显示用户订阅的那些帖子。
*   设置/编辑用户的订阅必须尽可能轻松，我们在这里与很多技术恐惧症用户打交道。

除此之外，我们非常灵活。我想 SharePoint 附带的博客会很好，它的 Web 部分方面阻碍了我们。在 SharePoint 2010 中是否可以实现类似的功能，或者是否有任何人听说过的第三方应用程序可以提供此功能？我们一直在寻找年龄，并没有想出任何东西。

非常感谢你花时间陪伴！

马库斯·沃威尔

# asp.net-mvc - MVC 控制器数据 html.form

> ID：15553109
> 
> 赞同：0
> 
> 时间：2013-03-21T16:34:11.677
> 
> 标签：asp.net-mvc, razor, forms

我有一堆包含可编辑信息的选项卡的视图。每个选项卡都有一个“存储”按钮，按下此按钮后，此选项卡中的数据将被推送到中间对象的静态实例。完成编辑后，用户单击“应用更改”按钮，中间对象中的更改将提交到数据库。

问题是当用户点击某些`Html.BeginForm("somemethod", "somecontroller"))`功能的商店按钮时，因为页面必须返回一个视图；因此，我必须在加载页面时使用中间对象填充字段，否则它们未提交的更改不会显示，但如果用户刷新页面，他们未提交的更改仍会显示为中间对象t 刷新页面时无效。所以我需要用户刷新页面我的表单再次返回视图之间的区别。

所以我的问题可能有一些解决方案，我如何以不需要返回任何视图的类似方式制作表单，目前我的表单如下所示：

```
@using (Html.BeginForm("ModifyRemoteHost", "Management", FormMethod.Post, new { id="userForm"}))
        {
            @Html.TextBox("remoteHostName", null, new { placeholder = "Add User" })
            <input class="k-button" id="remoteHostAdd" name="sourceOperation" type="submit" value="Add" />
            <div id="status"></div>
        }
        <div id="hostsGrid"></div> 
```

在`hostsGrid`页面加载时填充的位置。

或者

有没有办法告诉你是如何到达这个视图的，这样就可以知道你是否要丢弃中间对象，

或者

重新设计？

我是 MVC 的新手，如果我正在做的事情一无所知，我深表歉意。

# c++ - unordered_set.hpp 中的错误 C3083？

> ID：15553111
> 
> 赞同：0
> 
> 时间：2013-03-21T16:34:19.210
> 
> 标签：c++, visual-studio-2010

我有一个使用 boost 的相对较大的项目（在 VS2010 中）。由于某种原因，我无法确定一个简单的代码示例，我在库中遇到了一个错误：

```
boost_1_53_0\boost/unordered/unordered_set.hpp(56): error C3083: 'detail': the symbol to the left of a '::' must be a type
boost_1_53_0\boost/unordered/unordered_set.hpp(505) : see reference to class template instantiation 'anydsl::boost::unordered::unordered_set<T,H,P,A>' being compiled 
```

问题可能来自其他地方，但编译器绝对没有给出关于它的起源的提示。

它可能来自哪里的任何想法？

还有其他人遇到过类似的问题吗？

在遇到错误后，我将我的 boost 1.47.0 升级到了 1.53.0，但问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:56:37.753

正如 所指出的`kassak`，错误消息表明您`unordered_set.hpp`在您自己的另一个命名空间中时包含。永远不要那样做，因为坏事发生了。

在您的特定情况下，编译器会尝试解析

```
typedef boost::unordered::detail::set<A, T, H, P> types; 
```

在您的命名空间内`anydsl`。由于`anydsl::boost::unordered::detail`不存在，它会引发一个（有点误导）`detail`没有命名类型的错误。

# java - Java Awt Pen Tool：图形消失了

> ID：15553113
> 
> 赞同：0
> 
> 时间：2013-03-21T16:34:23.267
> 
> 标签：java, graphics, applet, awt

我将尝试使用 Pen Tool 实现 Java Applet。当我启动小程序时，我可以通过按下和释放鼠标在窗口上正确绘制我的线条。几秒钟后，一切都消失了。解决此问题的一些提示？

```
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

public class MarkPen extends Applet implements ActionListener, AdjustmentListener,     MouseListener, MouseMotionListener {

 private int x = 0;
 private int y = 0;
 private int prevx  = 0;
 private int prevy  = 0;

 private boolean dragging = true;
 private Panel drawPanel = new Panel();

 public void init()
 {
    setLayout(new BorderLayout());

    drawPanel.setBackground(Color.white);
    add(drawPanel, "Center");
    drawPanel.addMouseMotionListener(this);
    drawPanel.addMouseListener(this);

 }

 public void setGraphicalDefaults(MouseEvent e)
 {
    x = e.getX();
    y = e.getY();
    prevx = e.getX();
    prevy = e.getY();
 }

 public void mouseDragged(MouseEvent e)
 {
     Graphics g  = drawPanel.getGraphics();
        g.setColor(Color.black);

        /*
          IF i'm not dragging...
        */
        if (dragging)
        {
           setGraphicalDefaults(e);
           dragging = false;
           g.drawLine(prevx,prevy,x,y);
        }

        /*
          If mouse moved..
        */
        if (x != e.getX() || y != e.getY())
        {
           x = e.getX();
           y = e.getY();

           g.drawLine(prevx,prevy,x,y);

           prevx = x;
           prevy = y;
        }
 }

 public void mouseReleased(MouseEvent e)
 {  
     dragging = true;
 }
 public void mouseEntered(MouseEvent e){}
 public void mouseExited(MouseEvent e){}
 public void mouseMoved(MouseEvent e){}
 public void mousePressed(MouseEvent e){}
 public void mouseClicked(MouseEvent e){}
 public void adjustmentValueChanged(AdjustmentEvent arg0){}
 public void actionPerformed(ActionEvent e){}

} 
```

新版本：我更正了我的代码，下面是工作版本

```
 import java.applet.Applet;
   import java.awt.BorderLayout;
   import java.awt.Color;
   import java.awt.Graphics;
   import java.awt.Graphics2D;
   import java.awt.event.ActionEvent;
   import java.awt.event.ActionListener;
   import java.awt.event.AdjustmentEvent;
   import java.awt.event.AdjustmentListener;
   import java.awt.event.MouseEvent;
   import java.awt.event.MouseListener;
   import java.awt.event.MouseMotionListener;
   import java.awt.image.BufferedImage;

   import javax.swing.JComponent;
   import javax.swing.JPanel;

   public class MarkPen extends Applet implements ActionListener, AdjustmentListener, MouseListener, MouseMotionListener {

     private int x = 0;
     private int y = 0;
     private int prevx  = 0;
     private int prevy  = 0;

     private JPanel drawPanel = new JPanel();

     public void init()
     {
        setLayout(new BorderLayout());

        drawPanel.setBackground(Color.white);
        add(drawPanel, "Center");
        drawPanel.addMouseMotionListener(this);
        drawPanel.addMouseListener(this);
        drawPanel.add(new Comp());
        drawPanel.setDoubleBuffered(true);

     }

    public void setGraphicalDefaults(MouseEvent e)
     {
        x = e.getX();
        y = e.getY();
        prevx = e.getX();
        prevy = e.getY();
     }

    public class Comp extends JComponent{
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g  = drawPanel.getGraphics();
            g.setColor(Color.black);

            g.drawLine(prevx,prevy,x,y);
            prevx = x;
            prevy = y;
            g.dispose();
            repaint();
        }
     }  

     public void mouseDragged(MouseEvent e)
     {
         if (x != e.getX() || y != e.getY())
         {
             x = e.getX();
                         y = e.getY(); 
             }    
        }

        public void mousePressed(MouseEvent e){
             setGraphicalDefaults(e);
        }

        public void mouseReleased(MouseEvent e){}
         public void mouseEntered(MouseEvent e){}
         public void mouseExited(MouseEvent e){}
         public void mouseMoved(MouseEvent e){}
         public void mouseClicked(MouseEvent e){}
         public void adjustmentValueChanged(AdjustmentEvent arg0){}
         public void actionPerformed(ActionEvent e){}    

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:47:15.567

图形正在消失是有道理的，因为您调用`getGraphics()`的组件会产生不稳定的 Graphics 对象，该对象不会持续存在。不要那样做。而是绘制一个`paint(...)`覆盖。更好的是使用 Swing GUI 并在 JPanel 的`paintComponent(...)`方法中绘制或在`paintComponent(...)`方法中显示的 BufferedImage 中绘制。

# java - 寻找像素位置

> ID：15553122
> 
> 赞同：1
> 
> 时间：2013-03-21T16:35:02.900
> 
> 标签：java, pixel

```
public static void sample(BufferedImage image) {
    int width = image.getWidth();
    int height = image.getHeight();
    int value[][] = new int[width][height];
    int valueR[][] = new int[width][height];
    int valueG[][] = new int[width][height];
    int valueB[][] = new int[width][height];
    for (int j = 0; j < height; j++) {
        for (int i = 0; i < width; i++) {
            int pixel = image.getRGB(i, j);
            value[i][j] = pixel;
            Color c = new Color(pixel);
            valueR[i][j]= c.getRed();
            valueG[i][j] = c.getGreen();
            valueB[i][j] = c.getBlue();  
            System.out.println("Red value = "+valueR[i][j]);
            System.out.println("Green value ="+valueG[i][j]);
            System.out.println("Blue value"+valueB[i][j]);
        }
    }
} 
```

上面的代码是将图像的RGB值和像素颜色值分别存储在一个数组中。

```
 public static BigInteger modPow(BigInteger a1, BigInteger e, BigInteger n) {

    BigInteger r = 1;

    for (int i = e.bitLength() - 1; i >= 0; i--) {
        r = (r.multiply(r)).mod(n);
        if (e.testBit(i)) {
            r = (r.multiply(a1)).mod(n);
        }
    }
    System.out.println("C value = " + r);

    int lng = 3;
    BigInteger bi = BigInteger.valueOf(lng);
    BigInteger a = r.divide(bi);
    BigInteger b = r.mod(bi);
    System.out.println("pixel position a = " + a);
    System.out.println("modulus value b = " + b);
    return r;
} 
```

在上面的代码中，我找到了我需要嵌入秘密位的像素位置。所以我需要去那个特定的像素来嵌入消息。但是在前面的代码中，我将像素颜色存储在数组值 [] [] 中。我需要搜索数组 value[][] 以获取我在最后一个代码中得到的像素位置。

**注意：** a1 是当前要嵌入的信息文件位的位置 {e,n} 是公钥

我的问题是如何找到像素位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T04:37:38.963

找到一个像素的位置是一个简单的概念，执行起来很复杂。我在这里编写了一些代码，它**采用 BufferedImage 并通过它搜索特定颜色的像素**。

```
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import java.io.IOException;

public class pixelSearch {

    public static void main(String[] args) {
        //I don't know where you're getting your image but i'll get one from file
        File image = new File("image.bmp");
        try {
            BufferedImage imageToSearch = ImageIO.read(image);

            Color colorToFind = new Color(255,255,255); //define color to search for with RGB vals 255,255,255
            //for more information on constructing colors look here: http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html

            int[] pixelCoordinates = pSearch( colorToFind, imageToSearch ); //search for the pixel
            System.out.println("Found pixel at (" + pixelCoordinates[0] + "," + pixelCoordinates[1] + ")."); //display coordinates
        } catch (IOException e) {
            System.out.println(e.toString());
        }
    }

    private static int[] pSearch ( Color c, BufferedImage pic ){                
        int cVal = c.getRGB(); //get integer value of color we are trying to find

        int x1 = 0;
        int y1 = 0;
        int x2 = pic.getWidth();
        int y2 = pic.getHeight();

        int[] XArray = new int[x2-x1+1]; //create an array to hold all X coordinates in image
        int iterator = 0;
        while (iterator <= x2) {
            XArray[iterator] = x1 + iterator;
            iterator++;
        }
        int [] YArray = new int[y2-y1+1]; //create an array to hold all Y coordinates in image
        iterator = 0;
        while (iterator <= y2) {
            YArray[iterator] = y1 + iterator;
            iterator++;
        }

        //next we iterate throug all the possible coordinates to check each pixel
        for (int yVal : YArray) {
            for (int xVal : XArray) {
                int color = pic.getRGB(xVal, yVal); //get the color of pixel at coords (xVal, yVal) 
                if (color == cVal) { //if the color is equal to the one we inputted to the function
                    int[] cPos = {xVal, yVal}; //store the coordinates
                    return cPos; //return the coordinates
                }
            }
        }

        int[] returnVal = {-1,-1}; //if we didn't find it return -1, -1
        return returnVal;
    }
} 
```

# php - URL Rewrite rewrite x.php?id=1

> ID：15553125
> 
> 赞同：1
> 
> 时间：2013-03-21T16:35:08.803
> 
> 标签：php, .htaccess, url, url-rewriting

我已经搜索了该站点，并且已经成功地重写了一个干净的 URL。只是需要更多的帮助。

我有一个页面，其中包含已成功重写为干净 URL 的记录，如下所示：

`domain/record.php?id=1685 > to > domain/record-Gavin-Rees-1685`使用以下：

.htaccess 文件：

```
RewriteRule ^record-(.*)-(.*)$ /record.php?id=$2 [L] 
```

这在我的 php 文件中：

```
$temp=str_replace(' ','-', $record [record_name]);
$temp=str_replace('.','', $temp);

<a href='/record-". $temp ."-".$record[id]." '> 
```

这很完美。问题是。

我不能让它以另一种方式重写，所以如果你直接去：

```
/record.php?id=1685 it still exists. i tried > RewriteRule ^record.php?id=$ /record-(.*)-(.*)$ [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:48:43.487

这在 .htacces 重写规则中是不可能的，因为您无法定义一个通用规则，该规则了解您的软件内部结构。如果要在 .htaccess 文件中执行此操作，则必须为每个 id 创建一个规则，这将导致一个非常大且不方便的 .htaccess 文件。

获得直接脚本调用重定向的更好方法是，在 php 文件本身中进行重定向并设置 http 状态代码（即 301 - 永久移动）。获取请求的 url，您可以在开始时使用`$_SERVER['REQUEST_URI']`并检查`/record.php`

# spring - Broadleaf Commerce 和多种产品类型

> ID：15553127
> 
> 赞同：1
> 
> 时间：2013-03-21T16:35:14.950
> 
> 标签：spring, hibernate, e-commerce, broadleaf-commerce

我的产品类型少于 5 种，并且我一直在遵循手册：
[http](http://docs.broadleafcommerce.org/current/Extending-Entities-Tutorial.html) ://docs.broadleafcommerce.org/current/Extending-Entities-Tutorial.html 直到“单表继承”，因为我只有更少变体，我不想使用单表继承。 **我已经完成了以下操作，但是在重建并重新启动后，我没有看到在数据库中创建任何表。有任何想法吗？**

**图书**

```
@Entity
@Table(name="SB_BOOKS")
public class BookImpl extends ProductImpl implements Books {
.....
} 
```

**持久性.xml**

```
<class>com.xproject.core.catalog.domain.BookImpl</class> 
```

**上下文实体.xml**

```
<bean id="com.xproject.core.catalog.domain.Book" class="com.xproject.core.catalog.domain.BookImpl" scope="prototype"/> 
```

**更新：**请注意，如果我像这样覆盖（扩展）BLC ProductImpl bean，则会创建表

```
<bean id="org.broadleafcommerce.core.catalog.domain.ProductImpl" class="com.xproject.core.catalog.domain.BookImpl" scope="prototype"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:59:27.473

您在“development.properties”中设置的 blPU.hibernate.hbm2.ddl.auto 是什么？如果您希望 Hibernate 自动为您创建表，那么您应该将此设置为“create”或“create-drop”。另请注意，默认情况下，2 个应用程序（站点和管理员）对此具有不同的值。管理员设置为“更新”，而站点设置为“创建-删除”。如果您只启动管理员，因为 Hibernate DDL 设置为“更新”，我不相信您的新表会被创建。

我还假设您已经在“核心”项目中创建了这个域，这也是推荐的。

资料来源：作为一名阔叶工程师 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T23:12:45.133

通过在 BLC 代码中遵循 phillips 提示并添加继承注释和策略 (JOINED) 来修复它。

```
@Entity
@Table(name="SB_BOOKS")
@Inheritance(strategy = InheritanceType.JOINED) /* FIX */
public class BookImpl extends ProductImpl implements Books {
.....
} 
```

# forms - 多种形式 JSF + primefaces 3.5

> ID：15553132
> 
> 赞同：0
> 
> 时间：2013-03-21T16:35:26.637
> 
> 标签：forms, templates, jsf

我的问题类似于这个[如何在 JSF 页面中使用 <h:form> ？单一形式？多种形式？嵌套表格？](https://stackoverflow.com/questions/7371903/multiple-hform-in-a-jsf-page)，我有一个主页面，其中有一个带有菜单项的 panelMenu，当我单击一些菜单项时，它会刷新页面的中间部分，称为“centro”，如果我单击“左侧内容”，它就像一个模板，只是我想刷新“内容”。

我下载了一个模板，但我不在 jsf 中，所以我在那个 CSS 模板中创建了“布局”，但是我在这里有一个表单来评估一个案例以重定向另一个页面并将其显示在 id“centro”的中间

我的中间页面有问题，有其他表格。我读到的嵌套表单不是一个有效的概念，但我只需要在中间重定向我的页面，但是当我运行项目时。

我的按钮不会调用我的方法，但如果我只运行我的中间页面，它就可以正常工作。

嵌套表格是主要的哪个和我的中间页面的表格，有什么帮助吗？

## 这是我的主页

```
<h:form id="main" onsubmit="#{beanSec.setPer()}">
  <p:layout style="height: 500px;" id="layout">
    <p:layoutUnit position="west" resizable="false" size="188">
      <p:menu style="width: 175px; border:0px ;background: #660000 ;">

        <!-- puse width para el efecto cuando pasa el mouse no altere a los demas solo a este y paddin para alinearlo a mi gusto -->
        <p:menuitem value="Interesados" update="centro"
        ajax="false"
        style="font-size:17px; padding-left: 32px; width: 80%"
        action="#{navBean.setPaginaSecretaria('interesados')}" />
      </p:menu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Acad&#233;mico">
          <p:menuitem value="Matr&#237;cula"
          style="color: black; font-weight: bold" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('matricula')}" />
          <p:menuitem value="Alumnos"
          style="color:black ; font-weight: bold;" update="centro"
          ajax="false" async="true"
          action="#{navBean.setPaginaSecretaria('alumno')}" />
          <p:menuitem value="Programaci&#243;n"
          style="color: black ; font-weight: bold" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('programacion')}" />
          <p:menuitem value="Cursos"
          style="color:black ; font-weight: bold;" update="centro"
          ajax="false" url="ListarCursos.xhtml" />
          <!--action="{navBean.setPaginaSecretaria('cursos')}"-->
          <p:menuitem value="Docentes"
          style="color:black ; font-weight: bold;" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('docente')}" />
          <p:menuitem value="Laboratorios"
          style="color:black ; font-weight: bold ;" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('laboratorio')}" />
        </p:submenu>
      </p:panelMenu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Recaudaci&#243;n">
          <p:menuitem value="Cuentas Bancarias"
          style="color:black ; font-weight: bold" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('cuentas')}" />
          <p:menuitem value="Pagos"
          style="color:black; font-weight: bold;" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('pagos')}" />
        </p:submenu>
      </p:panelMenu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Acreditaciones">
          <p:menuitem value="Convenios"
          style="color:black ; font-weight: bold" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('convenios')}" />
          <p:menuitem value="Certificaciones"
          style="color:black; font-weight: bold;" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('certificaciones')}" />
        </p:submenu>
      </p:panelMenu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Eventos y noticias">
          <p:menuitem value="Eventos"
          style="color: black ; font-weight: bold" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('eventos')}" />
          <p:menuitem value="Noticias"
          style="color: black ; font-weight: bold" update="centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('noticias')}" />
        </p:submenu>
      </p:panelMenu>
      <!-- puse width para el efecto cuando pasa el mouse no altere a los demas solo a este y paddin para alinearlo a mi gusto -->
      <p:menu style="width: 175px; border:0px ;background:#660000;">

        <p:menuitem value="Datos Personales" update="centro"
        style="font-size:17px; padding-left: 32px; width: 80%;"
        ajax="false"
        action="#{navBean.setPaginaSecretaria('datos')}" />
      </p:menu>
    </p:layoutUnit>
    <p:layoutUnit position="center" id="centro"
    style="padding-left: 20px">
      <c:if test="#{navBean.paginaSecretaria eq 'interesados'}">
        <ui:include src="ListarInteresados.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'matricula'}">
        <ui:include src="Matricula.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'alumno'}">
        <ui:include src="ListarAlumnos.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'programacion'}">
        <ui:include src="ListarProgramacion.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'cursos'}">
        <ui:include src="ListarCursos.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'docente'}">
        <ui:include src="ListarDocentes.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'laboratorio'}">
        <ui:include src="ListarLaboratorios.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'cuentas'}">
        <ui:include src="CuentasBancarias.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'pagos'}">
        <ui:include src="Pagos.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'convenios'}">
        <ui:include src="ListarConvenios.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'certificaciones'}">

        <ui:include src="ListarCertificaciones.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'eventos'}">
        <ui:include src="ListarEventos.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'noticias'}">
        <ui:include src="ListarNoticias.xhtml" />
      </c:if>
      <c:if test="#{navBean.paginaSecretaria eq 'datos'}">
        <ui:include src="DatosPersonalesSecretaria.xhtml" />
      </c:if>
    </p:layoutUnit>
  </p:layout>
</h:form> 
```

## 这是我的中间页

```
<h:form>
  <p:dataTable id="dt1" value="#{DAOCurso.listarTodosCursos()}"
  var="datos">
    <f:facet name="header">Listado de Cursos</f:facet>
    <p:column filterBy="#{datos.nombre}"
    filterMatchMode="contains">
      <f:facet name="header">
        <h:outputLabel value="Curso" />
      </f:facet>
      <h:outputText value="#{datos.nombre}" style="color: black">
      </h:outputText>
    </p:column>
    <p:column filterBy="#{datos.siglas}"
    filterMatchMode="contains">
      <f:facet name="header">
        <h:outputLabel value="Siglas" />
      </f:facet>
      <h:outputText value="#{datos.siglas}" style="color: black">
      </h:outputText>
    </p:column>
    <p:column filterBy="#{datos.certificacion.nombre}"
    filterMatchMode="contains">
      <f:facet name="header">
        <h:outputLabel value="Certificaci&#243;n" />
      </f:facet>
      <h:outputText value="#{datos.certificacion.nombre}"
      style="color: black"></h:outputText>
    </p:column>
    <p:column>
      <f:facet name="header">
        <h:outputLabel value="Modificar" />
      </f:facet>
      <p:commandLink value="Modificar" oncomplete="dlg2.show();"
      update=":main:modalDialog2" style="color: black"
      action="#{beanCurso.traerDatos()}">
        <f:setPropertyActionListener target="#{beanCurso.codigo}"
        value="#{datos.codigo}" />
      </p:commandLink>
    </p:column>
  </p:dataTable>
</h:form>
<p:dialog id="modalDialog2" header="Modificar Datos Personales"
widgetVar="dlg2" dynamic="true">
  <h:form id="form2">
    <table>
      <tr>
        <td>
          <h:outputLabel value="Nombre Curso" />
          <p:inputText id="nombre" value="#{beanCurso.nombre}" />
        </td>
      </tr>
      <tr>
        <td>
          <h:outputLabel value="Siglas" />
          <p:inputText value="#{beanCurso.siglas}" />
        </td>
      </tr>
      <tr>
        <td>
          <h:outputLabel value="Certificaci&#243;n" />
          <p:selectOneMenu id="cboCentro"
          value="#{beanCurso.certificacion.codigo}" required="true"
          requiredMessage="Debe seleccionar una certificacion">
            <f:selectItem itemLabel="Seleccione Certificacion"
            id="cert" />
            <f:selectItems value="#{DAOCert.listaCertificaciones()}"
            id="combocert" var="cert" itemValue="#{cert.codigo}"
            itemLabel="#{cert.nombre}" />
          </p:selectOneMenu>
        </td>
      </tr>
      <tr>
        <td>
          <p:selectBooleanCheckbox value="#{beanCurso.vigencia}" />
          <h:outputText value="Vigencia"
          style="font-weight:bold" />
        </td>
      </tr>
      <tr>
        <td>
          <p:commandButton value="Modificar"
          action="#{DAOCurso.modificarCurso()}" ajax="false" />
        </td>
      </tr>
    </table>
  </h:form>
</p:dialog>
<p />
<h:form>
  <p:commandButton value="Agregar" oncomplete="dlg.show();" />
  <p:dialog header="Datos Personales" widgetVar="dlg"
  resizable="false" id="dialogo" dynamic="true">
    <table>
      <tr>
        <td>
          <h:outputLabel value="Nombre Curso" />
          <p:inputText id="nombre" value="#{beanCurso.nombre}" />
        </td>
      </tr>
      <tr>
        <td>
          <h:outputLabel value="Siglas" />
          <p:inputText value="#{beanCurso.siglas}" />
        </td>
      </tr>
      <tr>
        <td>
          <h:outputLabel value="Certificaci&#243;n" />
          <p:selectOneMenu value="#{beanCurso.codCert}"
          required="true"
          requiredMessage="Debe seleccionar una certificacion">
            <f:selectItem itemLabel="Seleccione Certificacion"
            id="cert" itemValue="" />
            <f:selectItems value="#{DAOCert.listaCertificaciones()}"
            id="combocert" var="cert" itemValue="#{cert.codigo}"
            itemLabel="#{cert.nombre}" />
          </p:selectOneMenu>
        </td>
      </tr>
      <tr>
        <td>
          <h:commandButton value="Registrar Curso"
          action="#{DAOCurso.insertarCurso()}" />
        </td>
      </tr>
    </table>
  </p:dialog>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:50:27.007

正如 Luiggi 所说，您应该将主表单拆分为多个表单：

```
<p:layout style="height: 500px;" id="layout">
  <p:layoutUnit position="west" resizable="false" size="188">
    <h:form id="main" onsubmit="#{beanSec.setPer()}">
      <p:menu style="width: 175px; border:0px ;background: #660000 ;">

        <!-- puse width para el efecto cuando pasa el mouse no altere a los demas solo a este y paddin para alinearlo a mi gusto -->
        <p:menuitem value="Interesados" update=":centro"
        ajax="false"
        style="font-size:17px; padding-left: 32px; width: 80%"
        action="#{navBean.setPaginaSecretaria('interesados')}" />
      </p:menu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Acad&#233;mico">
          <p:menuitem value="Matr&#237;cula"
          style="color: black; font-weight: bold" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('matricula')}" />
          <p:menuitem value="Alumnos"
          style="color:black ; font-weight: bold;" update=":centro"
          ajax="false" async="true"
          action="#{navBean.setPaginaSecretaria('alumno')}" />
          <p:menuitem value="Programaci&#243;n"
          style="color: black ; font-weight: bold" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('programacion')}" />
          <p:menuitem value="Cursos"
          style="color:black ; font-weight: bold;" update=":centro"
          ajax="false" url="ListarCursos.xhtml" />
          <!--action="{navBean.setPaginaSecretaria('cursos')}"-->
          <p:menuitem value="Docentes"
          style="color:black ; font-weight: bold;" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('docente')}" />
          <p:menuitem value="Laboratorios"
          style="color:black ; font-weight: bold ;"
          update=":centro" ajax="false"
          action="#{navBean.setPaginaSecretaria('laboratorio')}" />
        </p:submenu>
      </p:panelMenu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Recaudaci&#243;n">
          <p:menuitem value="Cuentas Bancarias"
          style="color:black ; font-weight: bold" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('cuentas')}" />
          <p:menuitem value="Pagos"
          style="color:black; font-weight: bold;" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('pagos')}" />
        </p:submenu>
      </p:panelMenu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Acreditaciones">
          <p:menuitem value="Convenios"
          style="color:black ; font-weight: bold" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('convenios')}" />
          <p:menuitem value="Certificaciones"
          style="color:black; font-weight: bold;" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('certificaciones')}" />
        </p:submenu>
      </p:panelMenu>
      <p:panelMenu style="width:180px;">
        <p:submenu label="Eventos y noticias">
          <p:menuitem value="Eventos"
          style="color: black ; font-weight: bold" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('eventos')}" />
          <p:menuitem value="Noticias"
          style="color: black ; font-weight: bold" update=":centro"
          ajax="false"
          action="#{navBean.setPaginaSecretaria('noticias')}" />
        </p:submenu>
      </p:panelMenu>
      <!-- puse width para el efecto cuando pasa el mouse no altere a los demas solo a este y paddin para alinearlo a mi gusto -->
      <p:menu style="width: 175px; border:0px ;background:#660000;">

        <p:menuitem value="Datos Personales" update=":centro"
        style="font-size:17px; padding-left: 32px; width: 80%;"
        ajax="false"
        action="#{navBean.setPaginaSecretaria('datos')}" />
      </p:menu>
    </h:form>
  </p:layoutUnit>
  <!-- Since you have a form inside each included xhtml file, you don't need following code to be inside the main form-->
  <p:layoutUnit position="center" id="centro"
  style="padding-left: 20px">
    <c:if test="#{navBean.paginaSecretaria eq 'interesados'}">
      <ui:include src="ListarInteresados.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'matricula'}">
      <ui:include src="Matricula.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'alumno'}">
      <ui:include src="ListarAlumnos.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'programacion'}">
      <ui:include src="ListarProgramacion.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'cursos'}">
      <ui:include src="ListarCursos.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'docente'}">
      <ui:include src="ListarDocentes.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'laboratorio'}">
      <ui:include src="ListarLaboratorios.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'cuentas'}">
      <ui:include src="CuentasBancarias.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'pagos'}">
      <ui:include src="Pagos.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'convenios'}">
      <ui:include src="ListarConvenios.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'certificaciones'}">
      <ui:include src="ListarCertificaciones.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'eventos'}">
      <ui:include src="ListarEventos.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'noticias'}">
      <ui:include src="ListarNoticias.xhtml" />
    </c:if>
    <c:if test="#{navBean.paginaSecretaria eq 'datos'}">
      <ui:include src="DatosPersonalesSecretaria.xhtml" />
    </c:if>
  </p:layoutUnit>
</p:layout> 
```

最后一点，您应该避免将 JSTL 与 JSF 一起使用，而是尝试使用渲染属性。

# mysql - MySQL from 子句中的关联性

> ID：15553138
> 
> 赞同：0
> 
> 时间：2013-03-21T16:35:53.297
> 
> 标签：mysql

我想知道这是否：

```
select *
from tableA natural join tableB,tableC natural join tableD; 
```

相当于：

```
select *
from (((tableA natural join tableB),tableC),tableD) natural join tableD; 
```

from 子句是左结合的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:37:40.547

我相信它相当于：

```
select *
from (tableA natural join TableB) cross join
     (tableC natural join TableD) 
```

这是基于[文档](http://dev.mysql.com/doc/refman/5.0/en/join.html)：

> 以前，逗号运算符 (,) 和 JOIN 的优先级相同，因此连接表达式 t1, t2 JOIN t3 被解释为 ((t1, t2) JOIN t3)。现在 JOIN 具有更高的优先级，因此表达式被解释为 (t1, (t2 JOIN t3))。此更改会影响使用 ON 子句的语句，因为该子句只能引用连接操作数中的列，并且优先级的更改会更改对这些操作数的解释。

# javascript - 如果标题包含右对齐文本，jQueryUI 对话框将隐藏关闭 (X) 按钮。我怎样才能解决这个问题？

> ID：15553143
> 
> 赞同：1
> 
> 时间：2013-03-21T16:36:08.337
> 
> 标签：javascript, html, jquery-ui-dialog

我有以下代码示例：

```
<div id="dlgTest1" style="display: none">
    <p>
        Lorem ipsum test popup dialog<br />
        <br />
        Click the OK button to resume activity.
    </p>
</div>
<script type="text/javascript">
$(document).ready(function () {
        var myTitle = 
        "<div style='float: left'>LEFT TEXT</div><div style='float: right'>RIGHT TEXT</div>";
        $("#dlgTest1").dialog({
            title: '', //  new jquery-ui-1.10.2 doesn't allow HTML here
            autoOpen: false,
            minWidth: 500, width: 500,
            minHeight: 200, height: 200,
            resizable: true,
            modal: true,
            show: "blind",
            hide: "explode",
            buttons: {
                "OK": function () {
                    $(this).dialog("close");
                }
            }
        }).siblings('.ui-dialog-titlebar').html(myTitle); // title goes here
        $("#dlgTest1").dialog("open").dialog("moveToTop");
});
</script> 
```

此示例代码打开一个 jQuery 对话框，该对话框在左侧和右侧的标题栏中显示文本，这是通过`myTitle`一个包含两个`<div>`元素的 HTML 代码的变量来实现的。

在以前的 jQueryUI 版本（例如 V1.8.20）中，我能够直接将 title 属性指定为的内容，`myTitle`它就像一个魅力。现在我已经升级到 V1.10.2 并注意到标题不再解释 HTML，而是`<div> ...`在标题中显示。正如你所看到的，我正在使用调整`.siblings('.ui-dialog-titlebar').html(myTitle);`来传递我的 HTML 代码，这基本上是有效的。

但它的副作用是它隐藏了用于关闭对话框的 (X) 按钮（在旧的 jQUery UI V1.8.20 版本中没有出现这种副作用）。我无法回到早期版本的 jQueryUI，因为我需要依赖于最新版本的控件。

**问题：**如何避免 (X) 关闭按钮被右对齐文本隐藏？

**注意：**如果我使用普通文本而不是 HTML 格式的文本，则会显示图标，所以原因**不是**缺少样式或位图。

我已经到处寻找（从[http://jqueryui.com/](http://jqueryui.com/)开始），在 Google 等中搜索，但没有找到解决方案。

任何帮助深表感谢。

* * *

**更新：（**回答下面的评论）

*   我正在使用**ui-lightness** css 主题，没有任何修改
*   添加`padding-right:20px`到`style`右对齐的属性`div`并不能解决问题。

* * *

**最后说明：**

与大家的讨论对我解决问题有很大帮助。我已经发布了最终对我有用的答案。

非常感谢所有支持我的人，你们真的很棒！每个发布答案的人都得到了我的 +1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:44:21.783

问题是您正在替换标题栏的 html，因此您正在删除关闭按钮。

更改`html()`为`append()`，您将需要调整边距/填充以使其看起来正确。

```
var myTitle = 
    "<div style='float: left'>LEFT TEXT</div><div style='float: right; margin-right:10px;'>RIGHT TEXT</div>"; 
```

和

```
}).siblings('.ui-dialog-titlebar').append(myTitle); 
```

[JSFiddle](http://jsfiddle.net/Avqh3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:57:58.113

Epascarello 建议的方法`.append(myTitle)` *不是* `.html(myTitle)`在 JSFiddle 示例中正常工作，但不幸的是`ui-lightness`，不适用于我正在使用的 jQueryUI 的自定义。

但是下面的函数做到了：

```
// Insert HTML formatted title in jQuery dialog V1.10.2
// Parameters: 
// dialog = reference to jQueryUI dialog, 
// hmtlTitle = the title with containing HTML to apply to dialog
function applyHtmlToDialog(dialog, htmlTitle) {
    dialog.data("uiDialog")._title = function (title) { 
            title.html(this.options.title); };
    dialog.dialog('option', 'title', htmlTitle);
} 
```

要使用它，只需按以下方式调用它：

```
applyHtmlToDialog($("#dlgTest1").dialog(), myTitle); 
```

或者，如果您更喜欢在多行中执行此操作：

```
var myDiag = $("#dlgTest1").dialog(//... your dialog definition ...
                                    );
var myTitle = '<div> ... </div>'; 
applyHtmlToDialog(myDiag, myTitle); 
```

它将`myTitle`正确插入并考虑其中包含的 HTML 代码。

* * *

**注意**（一些背景信息）：此解决方案的灵感来自以下 Stackoverflow 文章： [jQueryUI 对话框标题中的图标](https://stackoverflow.com/q/4103964/1016343)。

我发现这种行为的原因是 jQuery 团队担心对话框的 XSS 漏洞，所以他们故意更改了它。

如果您有兴趣，可以在[此处](http://bugs.jqueryui.com/ticket/6016)阅读有关他们讨论的更多信息。因此，`_title`如果您想在标题中使用 HTML 代码，这是 jQuery 提供的官方功能。我相信他们选择了一种不那么简单的方法，就像`.dialog({ title: $("... html ...") })`我个人更喜欢的那样（即使用 $ 表示您*希望*在标题中包含 HTML）。

# c++ - boost::statechart ---发布“串行超时”事件

> ID：15553145
> 
> 赞同：0
> 
> 时间：2013-03-21T16:36:09.297
> 
> 标签：c++, boost, boost-statechart

我一直在使用 boost 的异步状态图来编写程序。在这个程序中，我使用异步串行端口与另一个设备通信。我的状态是等待设备通过串行端口进行确认，然后发布“收到确认”事件。这很好用，但是我也想实现一个“超时”事件。

在以前的程序中，我一直在为我的状态机使用 switch case 语句，其中我有可以在每次运行循环时运行的代码。这意味着我可以运行代码并检查是否应该由于超时而更改状态。像这样：

```
while(1){
    switch (state){
        case 0:{
            sendMessage();
            state = 1;
            sendTime = boost::chrono::steady_clock::now();
        }
        break;
        case 1:{
            if (isConfirmationReceived()){
                // do something
                state = 2;
            }
            else if (boost::chrono::steady_clock::now() > sendTime + boost::chrono::duration<double>(WAIT_LENGTH)){
                //raise a time out error
                state = 3;
            }
        }
        break;
        // etc etc

    }
} 
```

我将如何使用 boost::StateChart 实现这样的事情？我应该以完全不同的方式思考这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T18:00:39.037

我不知道这是否是最佳实践，但我已经通过`EvTick`定期发送我的 SM 事件（1ms 或其他时间）并以超级状态处理事件来解决这个问题。您还可以添加`ClearTimeout() SetTimeout()`和`DisableTimeout()`成员函数并像这样访问它们：

```
context< TimeoutSuperState >().SetTimeout(1000); 
```

您可以让超状态在超时时转换为错误状态，或者`EvOnTimeout`向 SM 发布一个可以根据状态进行不同处理的 SM。

# c# - 有没有办法在 .NET 中执行零复制？

> ID：15553146
> 
> 赞同：9
> 
> 时间：2013-03-21T16:36:13.387
> 
> 标签：c#, .net, io, zero-copy

在 Java 中，我会使用`java.nio`库并使用`FileChannel.transferTo()`and `FileChannel.transferFrom()`。在（特别是）C# 中是否有类似的东西，或者我是否必须从某个地方加载一些非托管的 .dll？谷歌在这种情况下没有用。

编辑：我应该注意我的目标是 .NET 3.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:00:09.497

我认为表现最好的等价物可能是[UnmanagedMemoryStream](http://msdn.microsoft.com/en-us/library/system.io.unmanagedmemorystream.aspx)。

> 此类支持使用现有的基于流的模型访问非托管内存**，并且不需要将非托管内存中的内容复制到堆中**。

虽然我从来没有理由这样做，所以不能保证这个类的适当性（或在你的场景中使用非托管代码/内存）。

# ios - 四指多任务手势激活 UIPinchGestureRecognizer 手势

> ID：15553147
> 
> 赞同：0
> 
> 时间：2013-03-21T16:36:20.777
> 
> 标签：ios, objective-c, ipad, uigesturerecognizer, multitasking-gestures

我正在使用 UIPinchGestureRecognizer，它默认使用 2 个手指。如果用户决定执行多任务手势，则捏合手势动作也会被激活。

如果检测到超过四个 UITouch 实例，是否有办法取消捏合手势？

**编辑删除了示例代码，因为它是错误的方法。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:07:15.080

由于您没有继承 UIPinchGestureRecognizer，因此您不应该使用`touchBegan:withEvent:`. 相反，您应该在发生夹伤时调用的方法中处理它。

```
- (void)handlePinch:(UIPinchGestureRecognizer *)pinchGestureRecognizer
{
    // if there are 2 fingers being used
    if ([pinchGestureRecognizer numberOfTouches] == 2) {
        // do stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T11:20:45.603

对于多任务手势，`numberOfTouches`返回的`UIPinchGestureRecognizer`是 2 而不是 4 或 5，因为某些触摸被忽略了。

如果事件有 4 或 5 次触摸，您可以继承`UIPinchGestureRecognizer`并覆盖以取消识别器：`ignoreTouch:forEvent`

```
- (void) ignoreTouch:(UITouch*)touch forEvent:(UIEvent*)event
{
    [super ignoreTouch:touch forEvent:event];

    // Cancel recognizer during a multitask gesture
    if ([[event allTouches] count] > 3)
    {
        self.state = UIGestureRecognizerStateCancelled;
    }
} 
```

# python - Python解压AES-128加密文件

> ID：15553150
> 
> 赞同：4
> 
> 时间：2013-03-21T16:36:34.347
> 
> 标签：python, zip, aes, zipfile

有没有办法直接用 python 解压缩 AES-128 加密文件，因为 ZipFile 会引发 Bad Password 错误。如果我使用 7zip 它可以工作，所以密码是正确的，但是需要再次安装 7zip 作为依赖项。

我尝试了什么：

```
from ZipFile import ZipFile
zip = ZipFile('test.zip')
zip.extractall(pwd='password') 
```

这会引发错误密码异常。

使用 7zip 检查文件

```
7z l -slt test.zip 
```

这将返回：

```
Encrypted = +
Method = pkAES-128 Deflate 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T17:37:49.027

Python 标准库中的 zipfile 模块仅支持 CRC32 加密的 zip 文件（参见此处：[http](http://hg.python.org/cpython/file/71adf21421d9/Lib/zipfile.py#l420) ://hg.python.org/cpython/file/71adf21421d9/Lib/zipfile.py#l420 ）。所以，没有办法绕过一些第 3 方依赖。

最简单的方法是安装 7zip 并`7z`使用`subprocess`标准库中的模块调用命令行实用程序：

```
import subprocess
subprocess.call(["7z", "x", "-ppassword", "test.zip"]) 
```

另一种选择是 python 模块“PyLzma”，它也可以处理 AES 加密的 7zip 档案：[https](https://github.com/fancycode/pylzma) ://github.com/fancycode/pylzma 。它不直接支持解密经典 zip 文件，但您可以使用它的例程编写自己的解压缩器函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-03-22T10:02:44.743

您可以使用库*pyzipper*：[https](https://github.com/danifus/pyzipper) ://github.com/danifus/pyzipper 。[它的工作原理与 Python 的zipfile](https://docs.python.org/3/library/zipfile.html)几乎相同：

```
import pyzipper

with pyzipper.AESZipFile('my_archive.zip') as f:
    f.pwd = b'myPassword'
    print(f.infolist())
    file_content = f.read('testfile.txt') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-19T10:31:35.260

您可以使用[stream-unzip](https://github.com/uktrade/stream-unzip)解密 AES 加密的 ZIP 文件（完全披露：由我编写）

```
from stream_unzip import stream_unzip

def zipped_chunks(filename):
    with open(filename, 'rb') as f:
        while True:
           chunk = f.read(65536)
           if not chunk:
               break
           yield chunk

for file_name, file_size, unzipped_chunks in stream_unzip(zipped_chunks('test.zip'), password=b'password'):
    for chunk in unzipped_chunks:
        print(chunk) 
```

# spring - 请求过滤器与请求拦截器？

> ID：15553151
> 
> 赞同：0
> 
> 时间：2013-03-21T16:36:34.540
> 
> 标签：spring, rest, filter, jersey, interceptor

我的应用程序公开了一个 RESTful API，当调用该 API 时会调用邮箱服务器并获取数据。如果邮箱服务器出现故障，我希望能够在应用程序运行时禁用该服务。我想这样做的方式是，决定是否调用邮箱服务器的逻辑是从调用邮箱服务器的实际代码中抽象出来的。似乎适合这种情况的两个选项是过滤器和拦截器，但是我正在寻找关于哪个最适合这个要求以及每个选项之间有什么区别的建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:38:09.847

如果您使用的是 Spring MVC，那么您可以使用拦截器，它类似于过滤器，但可以访问 Spring 上下文。如果您使用的是 Jersey，则不能使用拦截器。

# vmware - 需要解决cygwin中“找不到VMware/VIRuntime.pm”

> ID：15553154
> 
> 赞同：2
> 
> 时间：2013-03-21T16:36:43.340
> 
> 标签：vmware

我有一个（也许）不寻常的情况。我需要在 Windows 框中运行 VMware CLI 命令，但是通过 shell 脚本中的 cygwin CLI。我现在不能改变这个，所以任何关于“为什么不这样做”的建议可能都是徒劳的，尽管很感激。这是一个示例脚本。

```
#!/bin/bash
# Paths for vmware-cmd.pl file to run vmware commands from vsphere cli
_vcli_dir="/cygdrive/c/Program Files (x86)/VMware/VMware vSphere CLI"
_vcli_bin="$_vcli_dir/bin"
_vcli_perl="$_vcli_dir/Perl"
_vcli_perl_bin="$_vcli_perl/bin"
_vcli_perl_lib="$_vcli_perl/lib"
_vcli_perl_vlib="$_vcli_perl_lib/VMware"
_vcmd=vmware-cmd.pl

export _orig_path=$PATH
# Add above directories to path variable
export PATH=$PATH:$_vcli_dir:$_vcli_bin:$_vcli_perl:$_vcli_perl_bin:$_vcli_perl_lib:$_vcli_perl_vlib
echo $PATH

$_vcmd /?

export PATH=$_orig_path
echo $PATH 
```

当我运行上面的脚本时，我得到

> 在 @INC 中找不到 VMware/VIRuntime.pm（@INC 包含：/usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int /usr/lib/perl5/site_perl/5.14 /usr/lib/ perl5/vendor_perl/5.14/i686-cygwin-threads-64int /usr/lib/perl5/vendor_perl/5.14 /usr/lib/perl5/5.14/i686-cygwin-threads-64int /usr/lib/perl5/5.14 /usr/ lib/perl5/site_perl/5.10 /usr/lib/perl5/vendor_perl/5.10 /usr/lib/perl5/site_perl/5.8 .) 在 /cygdrive/c/Program Files (x86)/VMware/VMware vSphere CLI/bin/vmware -cmd.pl 第 8 行。开始失败-编译在 /cygdrive/c/Program Files (x86)/VMware/VMware vSphere CLI/bin/vmware-cmd.pl 第 8 行中止。

我可以从 DOS 命令提示符运行相同的 vmware-cmd.pl 脚本

```
c:> vmware-cm.pl 
```

所以我现在我的安装是正确的。

请问有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:17:15.893

这篇文章给了我修复它的想法。但现在我得到了一个核心转储。 [Perl 的@INC 是如何构造的？（又名影响 Perl 模块搜索位置的所有方法是什么？）](https://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-pe)

添加的行是第二个导出 PERL5LIB 行。

```
#!/bin/bash
# Path for vmware-cmd.pl file to run vmware commands from vsphere cli
_vcli_dir="/cygdrive/c/Program Files (x86)/VMware/VMware vSphere CLI"
_vcli_bin="$_vcli_dir/bin"
_vcli_perl="$_vcli_dir/Perl"
_vcli_perl_bin="$_vcli_perl/bin"
_vcli_perl_lib="$_vcli_perl/lib"
_vcli_perl_vlib="$_vcli_perl_lib/VMware"
_vcmd=vmware-cmd.pl

export _orig_path=$PATH
# Add above directories to path variable
export PATH=$PATH:$_vcli_dir:$_vcli_bin:$_vcli_perl:$_vcli_perl_bin:$_vcli_perl_lib:$_vcli_perl_vlib
export PERL5LIB=$_vcli_dir:$_vcli_bin:$_vcli_perl:$_vcli_perl_bin:$_vcli_perl_lib:$_vcli_perl_vlib
echo $PATH

$_vcmd /?

export PATH=$_orig_path
echo $PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T00:58:55.157

俗话说，我通过肘部到达我的**来解决。

我所做的是
- 在我的 Windows 机器上将 vmware cli 安装到默认目录
- 为 VMware 主目录、bin 目录、Perl 目录和 Perl/bin 目录
添加环境变量 - 将这些环境变量添加到我的 PATH 变量中。

然后我创建了一个 vmware-cli.bat 文件，该文件接受参数并将它们连接到具有正确值的 vmware-cli 命令中。例如，我调用它来列出服务器中的虚拟机

cygwin:> ./vmware-cli.bat vmware-cmd.pl --server MyServer --username User --password PW -l

在我essentailly做的批处理文件中

```
REM Get first parm as the command, and then concatenate the rest of the parms
set VCLI_CMD=%1
shift
:LOOP
if %1x==x goto :EXECUTE
set VCLI_CMD=%VCLI_CMD% %1
shift
goto LOOP:

:EXECUTE
%VCLI_CMD% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T13:17:23.133

这是上一篇文章的替代方法，可让您将其保存在同一个 shell 脚本中

```
VIMCMD="/cygdrive/C/Program Files (x86)/VMware/VMware vSphere CLI/bin/vmware-cmd.pl"
VIMCMD_DOS=$(cygpath -d "$VIMCMD")
DOS_VIMCMD="cmd /c $VIMCMD_DOS" 
```

然后你可以运行：

```
$ $DOS_VIMCMD --version
vSphere SDK for Perl version: 6.0.0
Script 'vmware-cmd.pl' version: 6.0.0 
```

# version-control - Git 和 Git 扩展 - 文件和文件夹上没有绿色勾号

> ID：15553157
> 
> 赞同：3
> 
> 时间：2013-03-21T16:36:53.320
> 
> 标签：version-control, git-extensions

我已经转移到 Git 进行源代码控制。几个月前，我安装了 Git Extensions（包括安装中所需的一切），一切都很好——创建一个新的存储库，然后提交一些文件，然后文件和文件夹会有绿色的勾号。

我在朋友的电脑（Windows 7）上安装了 Git Extensions，执行了与上述相同的步骤，但是当转到该目录时，没有一个文件夹或文件有绿色或红色的勾号。尝试转到文件夹选项以更改一些设置，但仍然无法正常工作。

有什么解决方案或想法吗？

# jquery - 将类添加到特定项目

> ID：15553158
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:37:00.520
> 
> 标签：jquery

**jQuery**

```
$('#history-years-menu li a[href='+hTab+']').addClass("selected"); 
```

**html**

```
<ul>
                <li><a href="#1">1980</a></li>
                <li><a href="#2">1950</a></li>
                <li><a href="#3">1960</a></li>
                <li><a href="#4">1970</a></li>
                <li><a href="#5">1980</a></li>
                <li><a href="#6">1990</a></li>
                <li><a href="#7">2000</a></li>
                <li><a href="#8">2010</a></li>
            </ul> 
```

**活动状态**

```
<li class="selected"><a href="#1">1980</a></li> 
```

如果 hTab 等于 #3，我将如何更改上面的 jquery 以选择 #3 的 href？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:41:48.050

要将`.selected`课程应用于`li`您必须从以下级别上一级`a`：

```
$('#history-years-menu li a[href=' + hTab + ']').parent().addClass("selected"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:42:11.707

要将类添加到`<li>`使用中：

```
$('#history-years-menu li a[href=' + hTab + ']').parent().addClass("selected"); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/mTwVp/)**

# curl - 使用 Git 的 libcurl 中不支持或禁用协议 https

> ID：15553161
> 
> 赞同：10
> 
> 时间：2013-03-21T16:37:08.677
> 
> 标签：curl, github, https

我有几个 github 存储库，它们在过去几个月里一直运行良好。
然而，几天前我在尝试推拉时开始遇到一个奇怪的错误
：

错误：
访问 https 时 libcurl 中不支持或禁用协议 https：... 致命：HTTP 请求失败

我没有改变任何我知道的东西，所以不确定
错误来自哪里。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-21T08:09:02.887

如果您安装 Pure Data，则会出现此错误，可能是您的情况。[这里](http://scottmetoyer.com/puredata-and-github-for-windows)描述了 Pure Data 和 git 之间的冲突。Pure Data 安装程序将它自己的 libcurl-4.dll 放在 system32 文件夹中。

即使您没有安装 Pure Data，您的库路径中可能还有另一个 libcurl-4.dll somwhere，它是在 libcurl-4.dll 之前从已安装的 git 位置加载的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-23T14:59:11.297

第一个答案是正确的，但在我的情况下它不是 PureData，我什至找不到哪个程序有冲突。所以我在 C 盘中搜索了 libcurl.dll 并将其从 SysWOW64 文件夹中剪切并粘贴到桌面上。查看它的详细信息，它是由谷歌上的一些“深圳 moyea 软件”引导我到我的 lil 兄弟安装后转换的 youtube。无论如何，删除文件使 git 再次工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T11:48:54.910

也许您安装了不同的 libcurl.dll 版本，其中之一是覆盖 github 版本（支持 https）。

我不知道您的操作系统是什么，但在 Windows 中您必须更改 PATH 设置，因此它将指向正确的 libcurl.dll（在 c:\ 上进行 libcurl 搜索以了解 github 的位置）。

就我而言，是纯数据安装与来自 github 的 libcurl.dll 混淆了。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T18:10:10.453

我有同样的行为。我不知道为什么，但我通过将 Repo orign 更改为 ssh/git 协议来解决它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T21:27:23.100

如果有人无法解决`libcurl`问题，您可以应用此修复程序

1.  编辑`.git/config`你的 repo 目录下的文件
2.  在部分下查找`url=`条目`[remote "origin"]`
3.  `ssh url`从 github 获取您的存储库并`https url`替换`config file`
4.  保存配置文件并关闭它。现在你可以使用 git。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-12T08:49:32.863

在 Windows (10) 中我遇到了同样的问题，在我的系统中，即使 http 也不起作用，我修复了这个为 windows 安装 OpenSSL 的问题。我从[这里获得的](http://gnuwin32.sourceforge.net/packages/openssl.htm)

希望这将有助于未来的访问者以直接的方式解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-05T20:09:00.693

通过从路径 C:\Program Files\Git\bin 中删除“git”解决了这个问题

此致。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-28T00:41:27.630

# 也许你搞砸了 LD_LIBRARY_PATH

我构建了一个包，它在我的`~/.bash_profile`. 这打破了我的 git；由于 gits 对 curl 的依赖，我得到了上述 libcurl 错误：

```
[user@host folder]$ git push
fatal: unable to access 'https://x-access-token:67bada156da713b46d4d64fe37309cb9c5856717@github.com/project/repository.git/': Protocol https not supported or disabled in libcurl 
```

解决方案是在使用别名运行 git 时修复 LD_LIBRARY_PATH：

```
# Fix problem with libcurl
alias git="LD_LIBRARY_PATH=/usr/local/lib git"

export LD_LIBRARY_PATH=/opt/project/lib 
```

接着...

```
[user@host folder]$ source ~/.bash_profile
[user@host folder]$ git push
Counting objects: 24, done.
Delta compression using up to 32 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (13/13), 1.57 KiB | 0 bytes/s, done.
Total 13 (delta 5), reused 0 (delta 0)
remote: Resolving deltas: 100% (5/5), completed with 5 local objects.
To https://x-access-token:67bada156da713b46d4d64fe37309cb9c5856717@github.com/project/repository.git/
   676a842..eb37cb9  enhance-0052 -> enhance-0052 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-14T10:43:28.000

如果它发生在 Windows 中，请以管理员身份启动 Git 终端。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-27T20:49:04.323

我在 macos 和 homebrew 上遇到了同样的错误。当我尝试-> git clone ... 返回时：

致命：无法访问“ [https://github.com/](https://github.com/) ....”：libcurl 中不支持或禁用协议 https

我做了：

```
rm '/usr/local/bin/git' 
```

正如它在上面提到的：

```
brew link git 
```

然后我再次做了一个 git clone 并且出现了一个钥匙串弹出框并点击接受。然后它工作了。

# python - 在 django 中查询模型（两层深）

> ID：15553167
> 
> 赞同：8
> 
> 时间：2013-03-21T16:37:26.680
> 
> 标签：python, django

如果我有以下表格

```
class Town(models.Model):
    created = models.DateTimeField()

class Street(models.Model):
    town = models.ForeignKey(Town)
    created = models.DateTimeField()

class House(models.Model):
    street = models.ForeignKey(Street)
    created = models.DateTimeField() 
```

如果我有城镇的名称/id，如何获得`House`a 中的所有 s ？`Town`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T16:39:07.593

这应该可以解决问题：

```
town_id = 5
houses_in_town = House.objects.filter(street__town__id = town_id) 
```

# hibernate - Grails Groovy GORM ColumnTransformer Postgresql inet macaddr

> ID：15553168
> 
> 赞同：1
> 
> 时间：2013-03-21T16:37:28.240
> 
> 标签：hibernate, grails, mapping, grails-orm, inet

我们有一个包含 inet 和 macaddr 等列类型的 postgres 数据库

我们已经生成了要使用的 Hibernate POJO，并且可以使用映射这些数据类型

```
@ColumnTransformer(write="inet(?)") 
```

POJO 中的映射字段是一个字符串。

这很好用，但我真的很想改用 Grails 域类。

知道是否有与我可以使用的 ColumnTransformer 等效的东西吗？

谢谢

# php - 浏览器超时等待 Soap 客户端

> ID：15553170
> 
> 赞同：0
> 
> 时间：2013-03-21T16:37:32.840
> 
> 标签：php, zend-framework, soap-client

我正在开发一个应用程序，该应用程序使用 PHP 肥皂客户端从 Web 服务获取一些数据。Web 服务访问客户端 SQL 服务器，该服务器的性能非常慢（有些请求需要几分钟才能运行）。

对于较小的请求，一切正常，但如果浏览器等待 2 分钟，它会提示我下载一个空白文件。

我增加了 php max_execution_time、memory_limit 和 default_socket_timeout，但浏览器似乎总是会在 2 分钟后停止等待。

关于如何让浏览器无限期地闲逛的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:59:03.327

Web 服务器超时了——在我的例子中是 Apache。我最初以为是别的东西，因为我增加了 httpd.conf 中的超时值，两分钟后它仍然停止。但是，我使用的是 Zend Server，它有一个额外的配置文件，将超​​时设置为 120 秒——我增加了这个，两分钟后浏览器不再停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:42:15.767

你可以改变你的架构从拉到推。然后用户可以继续使用您的网络应用程序并在数据准备好时收到通知。

或者作为一个简单的解决方法（不理想），如果您能够修改肥皂服务器，您可以拥有另一个 Web 服务来检查数据是否准备好，然后在客户端上您可以每 30 秒调用一次以继续检查数据是否可用而不是等待。

# git - 什么 git commit 实践更好？

> ID：15553172
> 
> 赞同：10
> 
> 时间：2013-03-21T16:37:36.303
> 
> 标签：git, merge, commit, rebase, bisect

我真的相信在一个问题上进行一次提交是一种很好的做法。我确定我在“最佳实践”之类的文章中某处读过它。

因此，我的工作流程如下：

*   对于一个新问题，我使用`git checkout -b new-issue`.
*   将所有更改提交给它。有时这涉及*大量*提交。
*   完成后，我`squash`将提交并将`rebase`它们放入当前的主题分支。
*   如果出现问题，我可以`git revert`提交，找到错误，修复它，然后将新补丁提交到主题分支。我不会更改远程存储库的历史记录。

但是今天，我很惊讶地听到以下工作流程：

*   为新问题创建新分支。
*   将一切都投入其中。
*   用于`merge --no-ff`将问题分支与主题分支合并（因此我们将拥有我们可以的“合并提交” `revert`）。
*   如果出现问题，我们可以使用它`git bisect`来查找错误。

* * *

根据第一种方法，我们将拥有一个干净的 git 历史记录，并且不知道开发期间使用的开销分支。

根据第二种方法，我们将有一个非常混乱的历史，只有一个问题有很多丑陋的、不必要的合并和提交。但是，我们可以使用它`git bisect`来查找错误。（也许这更适合重构？）

* * *

*   您认为这两种方法的优缺点是什么？

*   您使用哪种方法，为什么？

*   在实践中，你真的习惯于`git bisect`寻找错误吗？（我没有……）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T17:36:39.450

第二种方法不必有很多丑陋和不必要的合并和提交。这是我更喜欢做的事情：

1.  创建一个新的主题分支
2.  做一堆提交
3.  在合并回父分支之前，清理提交：
    *   重新定位到父分支的最新版本
    *   壁球错字修复提交
    *   将一次执行多项操作的提交拆分为单独的提交
    *   重新排序提交以使审阅者更容易理解更改的顺序
    *   等等
4.  合并`--no-ff`到父分支

上述步骤会生成如下所示的历史记录：

```
*   354b644 Merge branch 'topic3'
|\
| * 54527e0 remove foo now that it is no longer used
| * 1ef3dad stop linking against foo
| * 7dfc7e5 wrap lines longer than 80 characters, no other changes
| * b45fbcf delete end-of-line whitespace, fix indendataion
|/
*   db13612 Merge branch 'topic2'
|\
| * 961eebf unbreak build by adding a missing semicolon
|/
*   a5b6b16 Merge branch 'topic1'
|\
... (more history not shown) 
```

上图具有方法#1的所有相同优点：

*   您可以使用`--first-parent`参数来`git log`获得类似于方法＃1 的简洁摘要：

    ```
    * 354b644 Merge branch 'topic3'
    * db13612 Merge branch 'topic2'
    * a5b6b16 Merge branch 'topic1'
    ... (more history not shown) 
    ```

*   您仍然可以轻松检查在主题分支中所做的全部更改。例如，`git diff 354b644^..354b644`将向您展示主题 #3 的更改内容。

但是您会获得方法 #1 无法为您带来的好处：

*   历史**更**容易回顾：提交`b45fbcf`和`7dfc7e5`（对于`topic3`分支）引入了很多噪音，但没有实际的逻辑更改。有人试图回答这个问题，“对主题 #3 进行了哪些逻辑更改？” 如果所有这些提交都被压缩成一个，那么可能很难从噪音中挖掘出来。
*   合并提交很好地识别了合并分支上一系列提交的上下文（例如，这组提交是为了解决主题#3）。
*   提交的更精细粒度使得更容易弄清楚为什么进行特定更改，这有助于区分意外更改和有意但微妙的更改。
*   如果多个人在分支上进行了协作，您可以看到他们都是谁以及每个人贡献了多少。
*   合并主题分支上的提交数量让您大致了解更改了多少。
*   提交的时间范围可以提供有用的上下文。
*   您可以轻松地挑选对不同分支进行的特定更改（例如，挑选将错误修复到发布分支所需的最小更改）。

我能想到一个缺点：可能很难将您的软件开发工具配置为仅遵循第一父路径并忽略所有这些中间提交。例如，[没有`--first-parent`参数`git bisect`](https://stackoverflow.com/q/5638211/712605)。另外，我对 Jenkins 不够熟悉，不知道配置它以优先构建和测试第一父路径而不是所有其他提交是多么容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T19:10:36.853

最后，这在很大程度上是个人品味问题......只能解释我的品味（并为此提供一点理由）。

我倾向于保留个人提交，即使它们只是“修复愚蠢的错别字”。任何“历史重写”都会创建以前从未存在过的提交，因此保证从未经过测试。`git bisect`此外，当稍后出现错误时，最少的提交会非常有用。最好能够将其缩小到几条更改的行，而不是把一周的工作挤在一起。

如果开发分支的历史记录一团糟，我会清理它（最低限度，即从未发生过恢复的提交，*可能*会更早应用空格或变量重命名等一般修复，一些重新排序以将相关更改放在一起）。提交仍然很小，很少被压扁。这种清理我主要是逐步进行的。然后我将清理后的分支与“官方”分支合并（或变基）。

# asp.net - 在哪里可以找到 WseWsdl3.exe？

> ID：15553178
> 
> 赞同：4
> 
> 时间：2013-03-21T16:38:05.247
> 
> 标签：asp.net, .net, web-services, proxy

我正在尝试从 WSDL 创建代理类。我从 MSDN 网站获得了工具名称，链接[为 WseWsdl3](http://msdn.microsoft.com/en-us/library/aa529578.aspx)。但我无法在我的机器中找到它。谁能帮我找出来？

还是我需要安装一些东西？

# java - 从 Spring 控制器调用 servlet

> ID：15553179
> 
> 赞同：1
> 
> 时间：2013-03-21T16:38:06.050
> 
> 标签：java, spring, jakarta-ee, tomcat, servlets

我有一个 Spring 控制器 ( **ReportController** ) 和一个常规 servlet ( **ReportServlet** )。

我有一个提交部分信息的表单，**ReportController**应该在将信息发送到**ReportServlet**进行处理之前完成信息。当我在 ReportController 方法中执行此操作时：

```
return "/ReportServlet"; 
```

它试图解决`/views/ReportServlet`（而不是直接`/ReportServlet`）。

**如何从 Spring Controller 调用我的 servlet？**

这是我的`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app ...>

    <display-name>MyProject</display-name>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/loginform.html</url-pattern>
    </servlet-mapping>

    ...

    <servlet>
        <servlet-name>ReportServlet</servlet-name>
        <servlet-class>com.mypackage.ReportServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ReportServlet</servlet-name>
        <url-pattern>/ReportServlet</url-pattern>
    </servlet-mapping> 
   ...
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>/loginform.html</welcome-file>
    </welcome-file-list>

</web-app> 
```

我的`dispatcher-servlet.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
      ...
>

    <!-- Enable annotation driven controllers, validation etc... -->

    <mvc:annotation-driven />
    <context:component-scan base-package="com.p2p.reportsportal.controllers" />
    <context:property-placeholder location="classpath*:config.properties"/>
    <bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/views/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:42:51.613

试试这个：

```
return "forward:/ReportServlet"; 
```

# jquery - 使用淘汰赛隐藏外部点击的div？

> ID：15553184
> 
> 赞同：2
> 
> 时间：2013-03-21T16:38:14.490
> 
> 标签：jquery, knockout.js

如何使用 knockout.js 在外部单击时隐藏 div ...我已经尝试过但没有成功..

html:

```
<body>
<div data-bind="visible: show">
    <h3>hello world</h1>
</div>

<input type='button' data-bind="click: showBox" value="show"/>

    <body> 
```

脚本：

```
var viewModel = function()
{
    self = this;
    self.show =  ko.observable(false);
    self.showBox = function(){
            self.show(true);
        $("body").one("click", function(){

                self.show(false);
        });
     };
}

ko.applyBindings(new viewModel()); 
```

> [这是提琴手的例子：](http://jsfiddle.net/imranpk/cFvKw/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T16:49:08.293

由于您只想在用户单击除 div 之外的任何位置时才隐藏 div，因此您必须添加`stopPropagation()`到 div 的单击事件以及按钮的单击事件，因为否则主体的单击事件将立即触发，隐藏 div 每次尝试单击按钮的时间。请注意，这将使它在显示 div 后单击按钮不会使 div 被隐藏...您还需要移动`$("body").on("click"...`到 showBox 之外。

该模型：

```
var viewModel = function()
{
    self = this;
    self.show =  ko.observable(false);
    self.showBox = function(){
            self.show(true);
     };
     $("body").on("click", function(){
         self.show(false);
     });
}

ko.applyBindings(new viewModel()); 
```

的HTML：

```
<div data-bind="visible: show, click: function(data, event) { event.stopPropagation(); }">
    <h3>hello world</h1>
</div>

<input type='button' data-bind="click: function(data, event) { showBox(data); event.stopPropagation(); }" value="show"/> 
```

和一个工作[小提琴](http://jsfiddle.net/jonhopkins/wvHaZ/1/)

# php - 从 mySQL 检索数据并在 HTML 表中显示为按钮

> ID：15553192
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:38:40.960
> 
> 标签：php, javascript, html, mysql

我想从 mysql 获取数据并作为按钮显示在我的 HTML 文件中的表格中，然后将按钮链接到某个 URL。我已将数据设置为按钮，但无法链接它们。请记住，我是一个相当新的 html/javascript/php 用户！

此代码正确地将所有项目显示为表格中的按钮：

```
<?php
$connection = mysql_connect("localhost", "root", "password");
mysql_select_db("maindatabase", $connection); 
$query_search = "select * from login where _id = '5' ";       
$query_exec = mysql_query($query_search) or die(json_encode("0")); 

while($line = mysql_fetch_assoc($query_exec)) {
echo '<tr>'; 
$temp = $line['user'];
echo '<td><button type="button" onclick="toggleFollowing('.$line['user'].')">'.         ($temp).'</button></td>';

echo '</tr>';
}

?> 
```

这是用于将按钮链接到网站的 javascript：

```
<script 
       type="text/javascript">
function toggleFollowing(name_id) {
window.location = 'www.google.com';
}
</script> 
```

每当我单击按钮时，我都会收到错误消息： Uncaught RefreceError: 'nameofbutton' is not defined

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:47:33.663

在代码中的任何地方都找不到 nameofbutton

所以我最好的猜测是它是从数据库中获取的

也许 $line['user'] 实际上包含弄乱代码的单引号 (')，尝试从浏览器查看源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:48:57.920

您必须转义引号，因为您在 toggleFollowing 函数中将字符串作为参数传递。你必须用反斜杠转义。请试试这个：

```
<?php
$connection = mysql_connect("localhost", "root", "password");
mysql_select_db("maindatabase", $connection); 
$query_search = "select * from login where _id = '5' ";       
$query_exec = mysql_query($query_search) or die(json_encode("0")); 

while($line = mysql_fetch_assoc($query_exec)) {
echo '<tr>'; 
$temp = $line['user'];
echo '<td><button type="button" onclick="toggleFollowing(/'.$line['user'].'/)">'.         ($temp).'</button></td>';

echo '</tr>';
}

?> 
```

希望这可以帮助 ：）

# session - 为单页富 web 应用程序使用会话是不是有点矫枉过正？

> ID：15553194
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:38:53.270
> 
> 标签：session, rich-internet-application

有一个带有登录表单的丰富网络应用程序。登录用户应该能够向服务器数据库发送一些发布请求，从而修改数据库记录。如果用户具有在服务器数据库中添加/修改记录的角色，我如何在服务器中进行跟踪？每次用户想要修改数据库时，我应该将用户名、密码、数据发送到数据库中，还是应该使用会话而不是重新发送用户名/密码？抱歉，我以前没有使用过会话，所以我对它们感到不舒服......但是我看到它们是多页面网络应用程序的方式，但是如果我在一页中使用它们会让我的生活更轻松网络应用程序？或者我应该在每个发布请求到服务器数据库时重新发送用户名/密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:14:06.367

如果您*只*为用户名和密码执行此操作，请每次都执行此操作。如果您使用标准 HTTP 身份验证类型，它会执行此操作 - 它会在每次访问页面时发送登录凭据。如果您需要传递更多信息，并且此信息将在多次访问网页时重复使用，请考虑使用每会话 cookie。

Alternitivley，如果更容易的话 - 我已经看到一些网络应用程序使用会话（或更长）cookie 来获取身份验证信息。事实上，一些 Apache 模块本身就是这样做的。

# php - 如何在字符串中查找特定标签，从中获取值，然后用 PHP 替换字符串

> ID：15553195
> 
> 赞同：0
> 
> 时间：2013-03-21T16:38:54.283
> 
> 标签：php, regex, html-parsing, str-replace, preg-match-all

我有一个这样的字符串：

```
$string = 'some text <div class"myClass" path="myPath_1">some content</div> some text
           some text <div class"myClass" path="myPath_2">some content</div> some text...'; 
```

我需要获取所有出现的属性路径的值：

```
$path = array('myPath_1','myPath_2'); 
```

一旦我有了这个，我必须替换整个 div：

```
<div class"myClass" path="myPath_1">some content</div> 
```

带有图像标签：

```
<img src="myPath_1"> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:49:51.593

```
<?php
$string = 'some text <div class"myClass" path="myPath_1">some content</div> some text
           some text <div class"myClass" path="myPath_2">some content</div> some text...';
$matches = array();
$matches = preg_match_all('/path="([a-zA-Z0-9_]+)"/', $string, $matches, PREG_SET_ORDER);
$paths = array_map(function($m){
    return $m[0];
}, $matches);
var_dump($paths);
// array("myPath_1", "myPath_2")
?> 
```

在这里，我将正则表达式字符串`path="([a-zA-Z0-9_]+)"`与 PHP 的[preg_match_all 函数](http://php.net/manual/en/function.preg-match-all.php)一起使用，它应该与您的路径匹配。`path`，但是不是有效的 html 属性，我不知道您是否知道。考虑将其更改为`data-path`.

我知道您在问如何替换您的 div 标签，但您当前的 html 格式不正确。`<div class"myClass"`应该`<div class="myClass"`改为。但是，您应该能够执行以下操作：

```
<?php
$string = 'some text <div class"myClass" path="myPath_1">some content</div> some text
           some text <div class"myClass" path="myPath_2">some content</div> some text...';
$new_string = preg_replace('<div class=?"myClass" path="([a-zA-Z0-9_]+)">[a-zA-Z0-9 ]+</div>','<img src="$1">');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:50:38.020

您可以尝试使用正则表达式：

```
$pattern = '/<div([a-zA-Z0-9 ="]+)path="([^"]+)">([^<]+)<\/div>/';
echo preg_replace($pattern, '<img src="$2" />', $string); 
```

# c# - EF 5 Migrations 无法连接到我们的数据库，即使它在运行时运行良好

> ID：15553199
> 
> 赞同：27
> 
> 时间：2013-03-21T16:38:59.603
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

我们有三个项目。

*   Company.Domain（类库）
*   Company.PublicWebsite（MVC3 Web 应用程序）
*   Company.InternalWebsite（MVC3 Web 应用程序）

这两个网站项目都有参考`Company.Domain`。

我们的 EF 5`DbContext`存在`Company.Domain.Data.EntityFramework`，它看起来像这样：

```
using System.Data.Entity;
using Company.Domain.Data.EntityFramework.Entities;

namespace Company.Domain.Data.EntityFramework.
{
    public class CompanyEntities : DbContext
    {
        public DbSet<Notification> Notifications { get; set; }
        public DbSet<Report> Reports { get; set; }
        public DbSet<ReportSection> ReportSections { get; set; }
        public DbSet<ReportPage> ReportPages { get; set; }
        // brevity brevity
    }
} 
```

我们过去已启用迁移并成功使用该工具，所以我不确定为什么我们现在遇到问题。我们的迁移配置`Company.Domain.Data.EntityFramework.Migrations`如下所示：

```
namespace Company.Domain.Data.EntityFramework.Migrations
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Migrations;
    using System.Linq;
    using Company.Domain.Data.EntityFramework;

    public class Configuration : DbMigrationsConfiguration<CompanyEntities>
    {
        public Configuration()
        {
            MigrationsDirectory = @"Data\EntityFramework\Migrations";
            AutomaticMigrationsEnabled = false;
        }

        protected override void Seed(CompanyEntities context)
        {
            // empty at the moment
        }
    }
} 
```

`App.config`然后我们在项目的根目录中有一个文件`Company.Domain`，它看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <configSections>
      <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    </configSections>
    <connectionStrings>
      <add name="CompanyEntities" providerName="System.Data.SqlClient" connectionString="Data Source=devsql;Initial Catalog=CompanyEntities;uid=XXXXX;pwd=XXXXX;MultipleActiveResultSets=True;" />
    </connectionStrings>
    <entityFramework>
      <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
        <parameters>
          <parameter value="v11.0" />
        </parameters>
      </defaultConnectionFactory>
    </entityFramework>
    <startup>
      <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  </configuration> 
```

我们的数据库位于网络上的另一台服务器上。我能够在 SQL Server Management Studio 中连接到它，并且我们的应用程序能够在运行时很好地连接。但是，当我尝试运行时`add-migration`，甚至`update-database`出现以下错误：

[http://content.screencast.com/users/Chevex/folders/Snagit/media/80fbfd6a-4956-407f-b88f-d5a53a9e5feb/03.21.2013-10.25.png](http://content.screencast.com/users/Chevex/folders/Snagit/media/80fbfd6a-4956-407f-b88f-d5a53a9e5feb/03.21.2013-10.25.png)

> System.Data.ProviderIncompatibleException：从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。---> System.Data.ProviderIncompatibleException：提供程序未返回 ProviderManifestToken 字符串。---> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

我什至恢复了对模型的更改，然后运行`update-database`只是为了查看它是否会说“数据库正在进行最新迁移”，但我仍然收到上述错误。我一遍又一遍地倒在连接字符串`App.config`上。我无法弄清楚为什么迁移无法连接，但我们的两个网站项目在运行时都可以正常工作。迁移过去曾奏效。`__MigrationHistory`以下是解决方案资源管理器中的迁移与数据库表中的迁移相比。

[http://content.screencast.com/users/Chevex/folders/Snagit/media/7abeaa46-ff0f-4817-a0d7-1adb086e8f0c/03.21.2013-10.30.png](http://content.screencast.com/users/Chevex/folders/Snagit/media/7abeaa46-ff0f-4817-a0d7-1adb086e8f0c/03.21.2013-10.30.png)

[http://content.screencast.com/users/Chevex/folders/Snagit/media/3c6ac54d-f63d-417f-9253-39b6a8fea85d/03.21.2013-10.32.png](http://content.screencast.com/users/Chevex/folders/Snagit/media/3c6ac54d-f63d-417f-9253-39b6a8fea85d/03.21.2013-10.32.png)

看起来我应该能够运行`update-database`并让它告诉我它是最新的，但我得到了那个错误。

据我了解，当我运行迁移命令时，迁移不应该关注我们的两个网站项目，但我也倾注了他们的 Web.config 文件以防万一。连接字符串与 App.config 相同。

### 编辑：

我什至尝试从项目中完全卸载和删除 EF 5 包并重新安装。同样的问题>:(

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-21T17:44:15.960

您的启动项目是否包含 web.config 或 app.config，因为 EF 使用启动项目作为连接字符串的源

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-20T20:52:28.557

好的，所以起初这对我不起作用:(

然后在喝了杯咖啡并添加 StartUPProjectName 到它之后，它做到了！尝试：

更新数据库 -StartUpProjectName MYPROJECT.NAME -Script

尝试将其指向您 web.config/app.config 所在的启动项目

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-03T09:51:15.723

如果您在包管理器控制台中获得启用迁移的帮助

```
Get-Help enable-migrations -detailed 
```

您可以找到 -StartupProjectName 选项的此文档：

> -StartUpProjectName
> 
> ```
>  Specifies the configuration file to use for named connection strings. If
>     omitted, the specified project's configuration file is used. 
> ```

文档有点混乱，但这意味着如果您使用此选项指定项目名称，迁移将在指定项目的配置文件中查找连接字符串。（配置文件可以是`web.config`或`app.config`）。

如果您正在创建 Web 应用程序，连接字符串很可能会在其 中`web.config`，因此您必须指定 Web 应用程序项目。如果是其他类型的项目，则连接字符串将位于`app.config`类库或其他文件的文件中，您必须指定该项目。

此外，建议您为您的`DbContext`类使用指定连接字符串名称的构造函数，即

```
public class CompanyEntities : DbContext
{
    public CompanyEntities()
       :base("ConnectionStringName")
    {
         ...
    }
....
} 
```

这样，您就不必依赖默认连接字符串，这可能会造成混淆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T16:54:41.510

您说您可以通过 SQL Management Studio 进行连接，但我猜您使用的是 Windows 身份验证，而不是`uid=XXXXX;pwd=XXXXX;`连接字符串中提供的。

尝试让 Management Studio 使用该用户 ID 和密码进行连接。

此外，该帐户可能会被锁定（如果它是 Active Directory 帐户）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T17:22:29.550

这听起来很像我的一个客户遇到的问题。它与破坏 machine.config 的 DbProviders 部分有关。他把细节放在这里：[http](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/f2a19487-6d38-4a79-a809-d3efe4c9d9fe) ://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/f2a19487-6d38-4a79-a809-d3efe4c9d9fe （这是亚当·肖尔兹对他老板问题的回答。： ) )

朱丽叶

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-14T21:57:27.107

可能这已经解决了，但我通过在我的解决方案中将启动项目设置为实体 dll 项目（具有 app.config 文件）来解决它。我确实将包管理器控制台窗口中的“默认项目”设置为正确的实体 dll 项目，但这不起作用。详情

[带有 SQL Server 2012 的实体框架 6 提供 System.Data.Entity.Core.ProviderIncompatibleException](https://stackoverflow.com/questions/18583980/entity-framework-6-with-sql-server-2012-gives-) system-data-entity-core-providerin

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-26T09:36:20.187

如果您的解决方案有多个项目，请尝试将解决方案的启动项目设置为包含 Web.Config 或包含 EF 设置的 App.Config 文件的项目。

我为我的模型提供了一个包含 Web 项目和单独项目 (Data.Models) 的解决方案。一切都很好，直到我在解决方案中添加了一个控制台应用程序。一旦我将其设置为启动项目，EF Migrations 就会失败。

此外，如果解决方案中的多个项目启用了迁移，请在执行添加迁移后始终在每个项目上运行更新数据库。我的 web 项目有一个挂起的迁移，并且由于第一个项目中的挂起迁移，第二个项目的迁移奇怪地失败了。

# security - 防止屏幕截图键盘记录器

> ID：15553200
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:39:00.213
> 
> 标签：security, keyboard, keylogger

我正在考虑创建一个屏幕键盘来防止键盘记录程序。主要问题是我发现有一类keloggers，称为screenshot key loggers，每次点击鼠标按钮时都能截取屏幕截图。

出于这个原因，我觉得我创建屏幕键盘的方法并不能防止此类键盘记录器。是否有一种编码不允许截取屏幕截图的应用程序的方法，或者在未经用户许可的情况下向用户发出警报？

编辑

我假设只有用户出现在房间里。因此，我并不是要防止其他用户使用他们的数码相机拍照。我只想防止屏幕截图键盘记录器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:13:03.010

这是[可信计算](http://en.wikipedia.org/wiki/Trusted_Computing)可以解决的问题，但不是在您可能尝试为其部署此功能的任何系统上。除了屏幕截图，请记住，如果设备或一段代码可以进行本地访问，那么屏幕截图是获取该数据的一种方式。另一种方法是*让*数据通过内存或系统的其他处理途径。完全预防是一件非常困难的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:20:00.657

如果您是那种偏执狂，以至于您无法信任您正在使用的计算机，我强烈建议您在身份验证中引入“因素”。

“Google Authenticator”是一个开源的“双因素”安全系统（如 RSA 令牌的软件版本）。这意味着用户必须在他们的智能手机上运行它，但这意味着如果一个人没有手机，即使他们成功地嗅到了用户名和密码，他们也无法登录。谷歌“谷歌身份验证器”。

其他 2 因素方法包括使用硬件令牌密钥或一次性密码列表将一次性登录代码发送到手机（再次必须持有）。

如果您想使用它，我实际上创建了一个特定于 Apache 的端口：[https ://code.google.com/p/google-authenticator-apache-module/](https://code.google.com/p/google-authenticator-apache-module/)

# arrays - 在 bash for 循环中指定多个条件

> ID：15553201
> 
> 赞同：0
> 
> 时间：2013-03-21T16:39:02.790
> 
> 标签：arrays, bash, shell, loops, for-loop

所以我想在我的 bash 脚本中传递一个 for 循环，我希望它根据两个参数停止：

```
for (( x=1; x<= 50 -a $array_position -lt ${#array[@]}; x++ ))
do
    echo ${array[$array_position]}
    array_position=$((array_position+1))
done 
```

我的意图是让这个 for 循环回显 50 个连续的数组值 [0] - [50]，但如果 $array_position 在所有 50 个循环迭代完成之前到达数组的末尾，则停止。

一如既往地感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:55:07.817

问题在于您的陈述中的`-a`or 。将其更改为：`-lt``for`

```
for (( x=1; x<= 50 && $array_position < ${#array[@]}; x++ )) 
```

或者进一步简化整个事情：

```
for (( x=0;  x < 50 && x < ${#array[@]}; x++ ))
do
    echo "${array[$x]}"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:45:47.347

您只需要指定数组大小作为测试，如果达到 50，请使用 break 语句：

```
for (( x=1; x<=${#array[@]}; x++ ))
do
    echo ${array[$array_position]}
    array_position=$((array_position+1))
    [ $x -eq 50 ] && break
done 
```

# intuit-partner-platform - Intuit 合作伙伴平台月度连接计费

> ID：15553203
> 
> 赞同：0
> 
> 时间：2013-03-21T16:39:05.690
> 
> 标签：intuit-partner-platform, quickbooks-online

这一页：

[直觉计费](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0050_Managing_Your_App/2000_Billing_for_IA)

States Intuit 对每个连接每月收费 5.00 美元。这是否意味着如果进行一次连接（每个月的每一天），费用将是 30 x 5 美元 = 150 美元？或者这是否意味着在给定的一个月内，无论在特定公司文件/用户上连接 100 次，都要收取 5 美元的费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:15:15.433

对于您连接的每一家 QuickBooks 公司，这被视为一个连接。在 30 天的免费试用期中，您可以根据需要多次连接和断开与同一家公司的连接，之后每月连接 5 美元。您可以无限制地访问该连接的数据

谢谢贾里德
_

# java - 使用 SimpleDateFormat 解析时区不一致

> ID：15553213
> 
> 赞同：0
> 
> 时间：2013-03-21T16:39:49.560
> 
> 标签：java, android

我正在尝试调试与时区解析的一些不一致，`SimpleDateFormat`这里是日期格式，我用来解析：

```
static private final SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd, h:mmaa zzz", Locale.US); 
```

要解析的日期字符串：

> 2013-03-20，美国东部时间下午 3:36

三星 2.3.5 解析失败适用于 HTC 4.0.4 和 HTC 2.3.3。

以下是一些解析测试的输出：

宏达电 4.0.4：

```
Test : 2013-03-20, 3:36PM EST : Wed Mar 20 21:36:00 CET 2013 : lenient : true
Test : 2013-03-20, 3:36PM EDT : Wed Mar 20 20:36:00 CET 2013 : lenient : true
Test : 2013-03-20, 3:36PM EST : Wed Mar 20 21:36:00 CET 2013 : lenient : false
Test : 2013-03-20, 3:36PM EDT : Wed Mar 20 20:36:00 CET 2013 : lenient : false 
```

宏达电 2.3.3：

```
Test : 2013-03-20, 3:36PM EST : Wed Mar 20 21:36:00 GMT+01:00 2013 : lenient : true
Test : 2013-03-20, 3:36PM EDT : Wed Mar 20 20:36:00 GMT+01:00 2013 : lenient : true
Test : 2013-03-20, 3:36PM EST : Wed Mar 20 21:36:00 GMT+01:00 2013 : lenient : false
Test : 2013-03-20, 3:36PM EDT : Wed Mar 20 20:36:00 GMT+01:00 2013 : lenient : false 
```

三星 2.3.5：

```
Test : 2013-03-20, 3:36PM EST : Wed Mar 20 21:36:00 GMT+01:00 2013 : lenient : true
Test : 2013-03-20, 3:36PM EST : Wed Mar 20 21:36:00 GMT+01:00 2013 : lenient : false 
```

其余的解析在三星上失败。

任何人都可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:56:30.663

There is no JDK available on Android at the moment.

And looking at the reference of [SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html) there is only one version of it. so whatever works on any android OS level should work on all levels. The inconstancy of SimpleDateFormat is most likely due to different [locale](http://developer.android.com/reference/java/util/Locale.html) on different devices. to fix that use one locale instead of using the device's default Locale.

```
new SimpleDateFormat(dataFormat,Locale.US); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:43:48.020

不了解android，但在java中你可以通过以下方式获取系统属性：`java.lang.System.getProperties()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T17:30:20.570

I'm having similar issue on a Samsung Galaxy 7 tablet.

"EDT" is not in the list returned by TimeZone.getAvailableIDs(), so a SimpleDateFormat using "z" does not work.

I'm going to make a hash table of TZ abbreviations and convert the codes to += offset.

Unbelievable, really...

# regex - 正则表达式查找两个字符之间的任何字符，除了

> ID：15553216
> 
> 赞同：1
> 
> 时间：2013-03-21T16:39:54.953
> 
> 标签：regex

我需要一个可以找到缺失括号的正则表达式。

我想在每对 { { 之间查看，并且只找到它们之间没有 } 的那些。

我试过了

```
[\{]*[^}]*[\{]
[\{*][^}][*\{]
[\{][^}][\{]
[{]*[^}]*[{] 
```

自从我做任何正则表达式以来已经五年了，显然我已经生疏了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:44:32.833

你可以使用以下

```
 \{[^{}]*\{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:43:10.957

根据我对您的问题的理解，您似乎想要`\{[^}]*\{`

# algorithm - 技术访谈：MxN 矩阵中最长的非递减子序列

> ID：15553218
> 
> 赞同：12
> 
> 时间：2013-03-21T16:40:05.013
> 
> 标签：algorithm

我最近在一次技术面试中被问到这个问题。这是我的解决方案。[http://pastebin.com/JMVHcfRq](http://pastebin.com/JMVHcfRq)我犯了错误还是有更好的解决方案？

> 使用您选择的语言，在矩形数字网格中通过相邻的非重复单元格（包括对角线）查找最长的非递减序列的长度。该解决方案应处理任意宽度和高度的网格。
> 例如，在下面的网格中，可以追踪的一条合法路径（尽管不是最长的）是 0->3->7->9，其长度为 4。
> 8 2 4
> 0 7 1
> 3 7 9
> 路径只能连接相邻的位置（不能连接 8 -> 9）。通过跟踪路径 0->2->4->7->7->9 或 1->2->4->7->7->8，此示例的最长可能序列的长度为 6。
> 用您选择的语言编写一个方法，该方法将一个矩形的数字网格作为输入，并返回最长的此类序列的长度作为输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:17:23.180

您可以使用有向图对问题进行建模：

每个单元格都是图中的顶点，如果两个单元格 C [i,j] ,C [k,m]相邻且 C [i,j] < C [k,m ，则 C] [i,j] →C [k,m]有一条边。

现在你的问题是在这个图中找到最长的路径，但是这个图是有向无环图，因为问题说矩阵中没有重复的数字，“<”关系是反对称的。所以你的问题减少到在有向无环图中找到最长的路径，这很容易通过首先进行拓扑排序然后找到最长的路径。例如看到[这个](http://en.wikipedia.org/wiki/Longest_path_problem#Acyclic_graphs_and_critical_paths)。

**更新：** 乍一看，我认为不可能有相等的邻居，但现在我看到是可能的，在上面的图形构造中，我们应该用 <= 替换 < 然后确定图形不是无环的，但问题仍然等于在此找到最长的路径图形。

P.S1：如果我对这个最长路径问题有任何多项式答案，我会把它带到这里，但可能通过这种问题分类更容易搜索它。

P.S2：正如评论中提到的mbeckish，[最长](https://stackoverflow.com/users/21727/mbeckish)[路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)在一般图中是NP-Hard，但我认为在这种特殊情况下可以在P中解决，但我现在没有确切的算法。

P.S3：我对它做了一些研究，我看到，[网格图中的哈密顿路径是 NP-Complete](http://books.google.de/books/about/Hamilton_paths_in_grid_graphs.html?id=Vta6GwAACAAJ&redir_esc=y)，所以看来你的问题也是 NP-Complete （我现在没有减少但它们非常接近每个其他）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:42:44.537

在最坏的情况下，您的解决方案需要指数时间（矩阵大小）。

要加快速度，请使用[记忆](http://en.wikipedia.org/wiki/Memoization)化或自下而上的[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:31:16.230

还使用 n dijkstra 调用（反转它以找到最大路径），您可以在 O(n^3) 中解决它。使用最大堆可以将其降低到 0(n^2 log n)。构建图时，只为当前顶点 >= 的邻居创建边。

我尝试了拓扑排序，但我在图中发现了循环。需要检查我的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:05:48.840

在我看来，不测试的起始索引是那些包含在较长路径中的索引，其中包括所有索引允许的“下一个索引”的所有列表。

所以我首先为每个索引映射了允许的下一个索引，并将它们全部从起始索引组中删除以进行测试：

```
*Main> indexesIncludedInLongerPaths
[2,0,4,6,1,7,8] (numbers 4,8,7,3,2,7,9) 
```

剩下两个指标需要测试：

```
*Main> indexesToTest
[3,5] (numbers 0,1) 
```

之后，我从这些起始索引中搜索了所有路径并返回了最长的路径。

```
*Main> nonDesc matrix
[[1,2,4,7,7,9],[0,2,4,7,7,9]] 
```

哈斯克尔代码：

```
import Data.List (nub, delete, sortBy, groupBy)

matrix = [8,2,4
         ,0,7,1
         ,3,7,9]::[Int]
m = 3
n = 3

neighbors index
  | index == 0           = [1,m]
  | index == m - 1       = [m-2, 2*m-1, 2*m-2]
  | index == m*n - 1     = [m*n-2, m*(n-1)-1, m*(n-1)-2]
  | index == m*(n-1)     = [m*(n-1)+1, m*(n-2), m*(n-2)+1]
  | index < m            = [index+1, index-1, index+m, index+m-1, index+m+1]
  | index > m*(n-1)      = [index+1, index-1, index-m, index-m-1, index-m+1]
  | mod index m == 0     = [index+1, index-m, index+m, index-m+1, index+m+1]
  | mod (index+1) m == 0 = [index-1, index-m, index+m, index-m-1, index+m-1]
  | otherwise            = [index+1, index-1, index-m, index+m
                           ,index-m+1, index-m-1, index+m+1, index+m-1]

indexesIncludedInLongerPaths = 
  nub $ concatMap (\x -> [a | a <- neighbors x
                              ,matrix!!x <= matrix!!a]) [0..length matrix-1]

indexesToTest = 
  foldr (\a b -> delete a b) [0..length matrix-1] indexesIncludedInLongerPaths

nonDesc matrix = solve indexesToTest [[]] where
  solve []     result = last $ groupBy (\a b -> length a == length b)
                        $ sortBy (\a b -> compare (length a) (length b)) 
                        $ map (\x -> map (\y -> matrix!!y) x) (concat result)
  solve (x:xs) result = 
    let paths = solve' [x] 
    in solve xs (paths:result)         
      where solve' y = 
              let b = [a | a <- neighbors (last y)
                                ,notElem a y
                                ,matrix!!(last y) <= matrix!!a]
              in if null b
                    then return y
                    else do a <- b
                            solve' (y ++ [a]) 
```

# python - Sqlalchemy：joinedload + limit

> ID：15553220
> 
> 赞同：6
> 
> 时间：2013-03-21T16:40:15.853
> 
> 标签：python, sql, sqlalchemy, subquery, limit

鉴于以下声明：

```
p = db.query(Profile).options(joinedload('*')).filter_by(id=p.id).limit(1).one() 
```

我将得到一个子查询 + 一个连接，而不是一个“纯”连接：

```
SELECT [...] 
FROM (SELECT profile.id AS profile_id, ...
FROM profile 
WHERE profile.id = %(id_1)s 
LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN city AS city_1 ON city_1.id = anon_1.profile_city LEFT OUTER JOIN country AS country_1 ON country_1.id = city_1.country LEFT OUTER JOIN state AS state_1 ON country_1.id = state_1.country LEFT OUTER JOIN state AS state_2 ON state_2.id = city_1.state LEFT OUTER JOIN country AS country_2 ON country_2.id = state_2.country LEFT OUTER JOIN state AS state_3 ON state_3.id = city_1.state LEFT OUTER JOIN country AS country_3 ON country_3.id = state_3.country LEFT OUTER JOIN starred AS starred_1 ON anon_1.profile_id = starred_1.star LEFT OUTER JOIN profiletext AS profiletext_1 ON anon_1.profile_id = profiletext_1.profile LEFT OUTER JOIN starred AS starred_2 ON anon_1.profile_id = starred_2.idprofile LEFT OUTER JOIN photo AS photo_1 ON anon_1.profile_id = photo_1.profile LEFT OUTER JOIN gps AS gps_1 ON anon_1.profile_id = gps_1.idprofile 
```

但我真正需要的是：

```
SELECT ...
FROM profile LEFT OUTER JOIN city AS city_1 ON city_1.id = profile.city LEFT OUTER JOIN country AS country_1 ON country_1.id = city_1.country LEFT OUTER JOIN state AS state_1 ON country_1.id = state_1.country LEFT OUTER JOIN state AS state_2 ON state_2.id = city_1.state     
LEFT OUTER JOIN country AS country_2 ON country_2.id = state_2.country LEFT OUTER JOIN state AS state_3 ON state_3.id = city_1.state LEFT OUTER JOIN country AS country_3 ON country_3.id = state_3.country LEFT OUTER JOIN starred AS starred_1 ON profile.id = starred_1.star LEFT OUTER JOIN profiletext AS profiletext_1 ON profile.id = profiletext_1.profile LEFT OUTER JOIN starred AS starred_2 ON profile.id = starred_2.idprofile LEFT OUTER JOIN photo AS photo_1 ON profile.id = photo_1.profile LEFT OUTER JOIN gps AS gps_1 
ON profile.id = gps_1.idprofile                                                                                                                                                                                                    
WHERE profile.id = 4 
limit 1; 
```

即没有子查询。

数据库：PostgreSQL 9.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T16:49:56.613

[根据The Zen of Eager Loading，](http://docs.sqlalchemy.org/en/latest/orm/loading_relationships.html#the-zen-of-eager-loading)这似乎是预期的行为

> 使用联合预加载时，如果查询包含影响从外部返回到连接的行的修饰符，例如使用 DISTINCT、LIMIT、OFFSET 或等效项时，完成的语句首先包装在子查询中，并且连接专门用于加入的急切加载应用于子查询。SQLAlchemy 的加入渴望加载更进一步，然后再进一步十英里，以绝对确保它不会影响查询的最终结果，只影响集合和相关对象的加载方式，无论查询的格式是什么。

我意识到这是一个老问题，但是生成的 SQL 不起作用是有原因的吗？

# jquery - 从使用 Javascript 创建的 svg 中删除单个对象

> ID：15553221
> 
> 赞同：0
> 
> 时间：2013-03-21T16:40:18.060
> 
> 标签：jquery, svg, visibility

我在 javacript 中使用 svg 创建了一个“iphone 风格”切换按钮。代码如下：

```
var btnsvg;
var aCircle;
var aTextOn;
var aTextOff;

function circle_click(evt) {
    var circle = evt.target;

    if ($(circle).position({ svgCx: 20 })) {
        $(circle).animate({ svgCx: 50 }, 400);
        $(aTextOn).animate({ svgFillOpacity: 1.0 }, 400);
        $(aTextOff).animate({ svgFillOpacity: 0.0 }, 400);
    }
    else {
        $(circle).animate({ svgCx: 20 }, 400);
        $(aTextOn).animate({ svgFillOpacity: 0.0 }, 400);
        $(aTextOff).animate({ svgFillOpacity: 1.0 }, 400);
   }
}

function drawToggleButton() {

    $('.toggleButton').each(function () {
        btnsvg = $(this).svg().svg('get');
        btnsvg.linearGradient('btnGrad',
            [[0, '#000000'], [1, '#000000', 0.32]], 50.168, 28, 50.168, 3,
            { gradientUnits: 'userSpaceOnUse'
            });
        btnsvg.linearGradient('offGrad',
            [[0, '#1F1F1F'], [1, '#A2A1A1']], 32.6685, 28, 32.6685, 3,
            { gradientUnits: 'userSpaceOnUse'
            });
        btnsvg.linearGradient('onGrad',
            [[0, '#1A2D49'], [1, '#304866']], 32.6685, 28, 32.6685, 3,
            { gradientUnits: 'userSpaceOnUse'
            });
        btnsvg.rect(10, 10, 50, 20, 10, 10,
            { fill: 'url(#offGrad)', stroke: 'black', strokeWidth: 1
            });
        aCircle = btnsvg.circle(20, 20, 10, { onclick: 'circle_click(evt)', fill: 'url(#btnGrad)' });

    });
} 
```

它有点工作...

问题 1 两个词首先显示，不透明度允许我更改动画但不允许我设置为初始属性。我真的很想一起删除文本（aTextOn = 可见，aTextOff = notVisible）但我现在会满足于不透明度。我也试过

```
$(aTextOff).text({fill: 'rgb(0,0,0,0.0)'}); 
```

那也没用

问题 2 仅适用于第一次点击...不知道为什么会这样！

任何帮助将不胜感激！谢谢

附言。如果您也有关于平滑过渡渐变变化的提示……那也很酷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:37:08.897

找到不透明度的解决方案...我试图将其设置为初始使用

```
$(aTextOff).text({fill: 'white', svgOpacity: 1.0}); 
```

但应该是

```
$(aTextOff).text({fill: 'white', opacity: 1.0}); 
```

'svgOpacity' 用于动画，而 'opacity' 用于属性[http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)

我还移动了圆圈，使其在文本之后创建，因此位于顶部。至于点击功能，我在渲染 svg 按钮的 div 上创建了一个属性，以告诉我状态（真/假）是什么，然后基于动画圆和文本来创建切换效果。代码如下：

```
 function circle_click(evt) {
    var circle = evt.target;      
    var currentState = $('.toggleButton').attr('value') == 'true';

    if (!currentState) {
        $(circle).animate({ svgCx: 50 }, 400);
        $(aTextOn).animate({ svgOpacity: 1.0 }, 400);
        $(aTextOff).animate({ svgOpacity: 0.0 }, 400);
    }
    else {
        $(circle).animate({ svgCx: 20 }, 400);
        $(aTextOn).animate({ svgOpacity: 0.0 }, 400);
        $(aTextOff).animate({ svgOpacity: 1.0 }, 400);
    }

    $('.toggleButton').attr('value', !currentState);

} 
```

在我尝试通过调用以下命令来使用该职位之前

```
$(circle).position({ svgCx: 20 }); 
```

但这设置了位置，而不是检查是否是位置。

梯度仍然没有解决方案......即将推出......我希望

渐变动画的解决方案......

我添加了另一个具有新灰度渐变的矩形，不透明度设置为低，并将其放在原始矩形的顶部。

```
 aRect = btnsvg.rect(10, 10, 55, 20, 10, 10,
   { fill: '#606060', stroke: 'black', strokeWidth: 1
   });
   btnsvg.rect(10, 10, 55, 20, 10, 10,
   { fill: 'url(#myGrad)', stroke: 'black', strokeWidth: 1
   }); 
```

'aRect' 是我为颜色设置动画并且顶部带有透明渐变的颜色，给人一种渐变正在变化的错觉。

```
$(aRect).animate({ svgFill: '#1A2D49' }, 400); 
```

# c# - 在c#中将DataTable列的Null值分配给int变量

> ID：15553225
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:40:25.600
> 
> 标签：c#, sql

我在数据表中有空值，并希望将此空值放入整数变量中。

```
SqlConnection con = new SqlConnection("Initial Catalog=test;Data Source=test;user id=sa;password=****;");
DataTable dt = new DataTable();
con.Open();
SqlDataAdapter da = new SqlDataAdapter("select * from table1", con);

da.Fill(dt);

for (int i = 0; i < dt.Rows.Count; i++)
{
    **int? ii = dt.Rows[i];**
    if (ii == null)
    {
        test.Text = ii.ToString() + "Test";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:53:01.560

您的代码中有几个基本错误。以下是解释的一些错误，答案的最后是如何重写代码的建议。

* * *

您正在尝试从行中获取数据，现在从单元格中获取数据。数据存储在行单元格中：

```
var row = dt.Rows[i]; // row contains several columns, you have to get from specific column
var ii = dt.Rows[i]["iiColumnName"]; 
```

* * *

您正在使用`null`对象的方法。如果 ii 是`null`并且您尝试调用它的方法，则会引发异常并且应用程序将崩溃

```
if (ii == null)
{
    test.Text = ii.ToString() + "Test"; // This will throw NullReferenceException
} 
```

* * *

您正在通过比较来检查是否存在价值`null`。单元格值从不`null`在 DataTable 中。取而代之的是`DBNull.Value`. 因此，您检查值是否以下列两种方式之一设置：

```
if (ii is DBNull) { /* do something */ }
if (ii == DBNull.Value) { /* do something */ } 
```

* * *

做你想做的事情的代码（希望）看起来像这样：

```
SqlConnection con = new SqlConnection("Initial Catalog=test;Data Source=test;user id=sa;password=****;");
DataTable dt = new DataTable();
con.Open();
SqlDataAdapter da = new SqlDataAdapter("select * from table1", con);

da.Fill(dt);

for (int i = 0; i < dt.Rows.Count; i++)
{
    DataRow row = dt.Rows[i];
    int? ii;
    if (row["iiColumnName"] is DBNull)
        ii = null;
    else
        ii = (int)row["iiColumnName"];

    if (ii != null)
        test.Text = ii.ToString() + "Test";
    else
        test.Text = "ii is not set";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T16:43:24.737

将其转换为`int?`

```
int? ii = dt.Rows[i] as int?; 
```

如果该`dt.Rows[i]`值不是`int`，则 ii 将为空，否则它将是存储在 中的整数值`dt.Rows[i]`。

# android - onAttach 活动为空

> ID：15553226
> 
> 赞同：8
> 
> 时间：2013-03-21T16:40:28.120
> 
> 标签：android

在创建片段时，我遇到 getActivity() 为空。所以为了缩小问题的范围，我在 onAttach(Activity activity) 中保留了一个本地活动副本，根据定义，它是附加到一个活动的。

但是，我在 onAttach 中记录了该活动，但它仍然为空。

我只在 2.3.6 及以下版本中遇到这个问题。

这是支持包的已知问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T16:49:59.783

将片段恢复到恢复状态的一系列方法是：

*   一旦片段与其活动相关联，就会调用 onAttach(Activity)。
*   onCreate(Bundle) 调用以进行片段的初始创建。
*   onCreateView(LayoutInflater, ViewGroup, Bundle) 创建并返回与片段关联的视图层次结构。
*   **onActivityCreated(Bundle) 告诉片段它的活动已经完成了它自己的 Activity.onCreate()。**
*   onViewStateRestored(Bundle) 告诉片段其视图层次结构的所有已保存状态都已恢复。
*   onStart() 使片段对用户可见（基于其包含的活动正在启动）。
*   onResume() 使片段与用户交互（基于其包含的活动被恢复）。

**粗体**方法应该是 getActivity 不再返回 null 的方法。

**onAttach**方法不应该用来调用活动对象的方法，它应该用来初始化回调接口。可以在[此处](http://developer.android.com/training/basics/fragments/communicating.html#DefineInterface)找到这些接口的示例。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-21T16:45:58.480

这个问题是因为支持包，这意味着片段来自 android 3.0 及更高版本，即 API 级别 11 和 UP，因此您肯定会面临 android 2.3.6 姜鸟的应用程序崩溃

```
this.getActivity(); 
```

# flash - AS3 用于 CS6 中的退出按钮

> ID：15553228
> 
> 赞同：0
> 
> 时间：2013-03-21T16:40:31.943
> 
> 标签：flash, flash-cs6

这是我在 CS6 中构建的退出按钮的 AS3 编码。但是，当我在 Flash 中测试电影时，退出游戏是行不通的。有什么问题，谁能告诉我？谢谢。

```
import flash.events.MouseEvent
import flash.system.fscommand;
quit_btn.addEventListener(MouseEvent.CLICK,clickHandler);

function clickHandler(event:MouseEvent):void {
   fscommand("quit");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T19:48:51.730

我知道这是一个老问题，但它没有任何明显的答案让我很困扰。

我相信正确的答案来自 LDMediaServices：Flash IDE 测试环境不接收 fscommands。

虽然我已经能够测试以确保我的 fscommands 是通过 UDK 提供的 Scaleform Launcher 插件发送的。然而，这并没有测试来自任何接收这些命令的响应。

[http://udn.epicgames.com/Three/SettingUpScaleformGFx.html](http://udn.epicgames.com/Three/SettingUpScaleformGFx.html)

# vb.net - 多个变量的可重用误差平方最小化函数

> ID：15553232
> 
> 赞同：1
> 
> 时间：2013-03-21T16:40:35.563
> 
> 标签：vb.net, lambda, regression, least-squares

我正在尝试解决数学公式中的三个变量。[公式](http://en.wikipedia.org/wiki/Beam_parameter_product#Measurement)如下：

```
Dim secondMomentOfBeam As Func(Of Beamμ2params, Double, Double) =
    Function(params, z)
        Return params.σ0 ^ 2 + (params.M2 ^ 2) * Math.Pow(λ / (Math.PI * params.σ0), 2) * Math.Pow(z - params.z0, 2)
    End Function 
```

使用

```
Friend Class Beamμ2params
    Public σ0 As Double
    Public z0 As Double
    Public M2 As Double

    Public Sub New(ByVal sigmaNot As Double, ByVal zNot As Double, ByVal Msquared As Double)
        Me.σ0 = sigmaNot
        Me.z0 = zNot
        Me.M2 = Msquared
    End Sub
End Class 
```

我需要创建一个循环来抖动每个变量 σ0、z0 和 M2，然后检查整体误差平方，然后根据误差平方重复或完成。

```
While errorSquared > 1
    ' minimize error with σ0 
    ' minimize error with z0 
    ' minimize error with M2 
End While 
```

我不想为每个变量硬编码这个循环（并且有很多相同的代码块），我更喜欢有一个函数可以最小化*任何*变量，这取决于选择变量的 lambda，像这样调用

```
Dim minimizeErrorSquared As Func(Of Beamμ2params, Func(Of Beamμ2params, Double), Double, UInt32, Beamμ2params) =
    Function(params, selector, dither, iterations)
        ' dither value chosen by selector
        ' check error-squared
        ' dither toward zero
        ' up to max iterations
    End Function 
```

使用`selector`第二个参数，选择将抖动的变量。这使我的循环现在看起来像

```
Dim params As New Beamμ2params(σ0initial, z0initial, M2initial)
While errorSquared > 1
    params = minimizeErrorSquared(params, Function(p As Beamμ2params) p.σ0, 0.01, 10)
    params = minimizeErrorSquared(params, Function(p As Beamμ2params) p.z0, 5, 10)
    params = minimizeErrorSquared(params, Function(p As Beamμ2params) p.M2, 0.05, 10)
    ' calculate error squared based on raw data and params
End While 
```

我无法解决的问题是如何将新变量值应用于内部的适当变量`minimizeErrorSquared`，然后返回更改了新变量的参数。我尝试了一个带`ByRef`参数的委托（这里没有什么值得粘贴的），但不能完全将新变量值传递回主循环。我正在寻找有关如何在概念上完成我的思路的建议，或者有人从不同的角度提出建议并提出不同的范式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:02:10.020

这是一个解决方案，但我不想要。理想情况下，三个 Func 应该写成一个 Func。寻找更好的解决方案

```
Dim minimizeErrorSquaredσ0 As Func(Of Beamμ2params, Double, UInt32, Beamμ2params) =
    Function(params, dither, iterations)
        ' minimize error-squared using params.σ0
    End Function

Dim minimizeErrorSquaredz0 As Func(Of Beamμ2params, Double, UInt32, Beamμ2params) =
    Function(params, dither, iterations)
        ' minimize error-squared using params.z0
    End Function

Dim minimizeErrorSquaredM2 As Func(Of Beamμ2params, Double, UInt32, Beamμ2params) =
    Function(params, dither, iterations)
        ' minimize error-squared using params.M2
    End Function

Try
    Dim errorSquared As Double = Double.MaxValue
    Dim params As New Beamμ2params(σ0initial, z0initial, M2initial)
    While errorSquared > 1
        params = minimizeErrorSquaredσ0(params, 0.01, 10)
        params = minimizeErrorSquaredz0(params, 5, 10)
        params = minimizeErrorSquaredM2(params, 0.1, 10)
        ' calculate error squared based on raw data and params
    End While
    Finally
End Try 
```

# java - 如何在Android系统上通过phonegap访问SDCARD中的图片

> ID：15553233
> 
> 赞同：1
> 
> 时间：2013-03-21T16:40:38.440
> 
> 标签：java, android, html, cordova, phonegap-plugins

我创建了一个`canvas`(html5) 元素让用户在其上绘图，绘图后，他们可以**保存**（一个按钮）它：`canvas.toDataURL("image/png");`将执行并将编码的 base64 dataURL 字符串存储到文件中。但我需要让用户查看他的画作。

这是一个问题：当用户将许多故事字符串保存在一个文本文件中并`filesystem`读取它时，内存会泄漏。
PhoneGap 抱怨：`java.lang.OutOfMemoryError`，因为用户保存了太多的 dataURL 字符串。由于所有这些都必须重新加载到数组中，因此会发生错误。

我想如果我将用户的绘图保存为`image`格式（.jpg）而不是 base64 dataURL，它会起作用吗？

1.  它会解决内存泄漏问题吗？
2.  如何检索存储在以下路径中的图像：`sdcard/story/pics/`？
    如果我只想访问录制的文件，我可以写：

    `var record= new Media(src,onSuccess, onError); where the src could just be: story/rec/something.mp3` 但是我无法以这种方式访问​​图像。

3.  该解决方案也应该适用于 iOS，因为我必须将应用程序部署到 iPad。
    `Develop Environment`：
    PhoneGap 1.8.0
    安卓 4.0.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:10:29.813

我在二进制文件中遇到了类似的问题，坏消息是您无法将二进制数据写入文件系统，因为二进制数据无法通过网桥传输到本机代码中。

我最终编写了一个插件来进行二进制操作（或者更确切地说是三个插件，一个用于 iOS，另一个用于 Android，第三个用于黑莓）。

我不确定是什么导致了内存泄漏，但我建议一次只在内存中绘制一张，除非你允许在图像之间复制和粘贴，在这种情况下，我会限制应用程序一次在内存中使用两张图像.

无论泄漏是什么，都必须严重耗尽所有可用内存，因为大多数现代 Android 设备上都有相当多的内存。

# javascript - 当我将方法设置为 Javascript 中的对象时，如何处理来自控制台的“未定义”返回？

> ID：15553234
> 
> 赞同：2
> 
> 时间：2013-03-21T16:40:43.187
> 
> 标签：javascript, undefined

我有一个名为 Message 的对象，它有一个名为 .show() 的内置方法，该方法将字符串作为输入。当我在 Message 类上调用 .show() 时，带有我的字符串输入的项目符号列表项出现在浏览器的无序列表（类名 = 聊天）中。

在控制台中， Message.show('string') 返回**undefined**。为了练习，我删除了 .show() 以便我可以学习构建它。

代码：

```
 Message.prototype.show = function (text) {           
     $('.chat').append('<li>' + text + '</li>');
 } 
```

但是，我收到一个*TypeError 说我无法设置未定义的属性“显示”。*我知道它期待一个函数作为回报，但这是否意味着我不能给 Message 类一个它曾经拥有的方法？在使用原型或附加列表项时是否有语法错误？有没有更好的方法来做到这一点？

我被卡住了..任何帮助表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:44:19.267

您需要先定义`function Message()`，然后才能向其添加`.show()`方法。

如果我没记错的话，你要找的是这个：

```
 // Define the function
 function Message() {

 }

 // Add prototype methods
 Message.prototype.show = function (text) {           
     $('.chat').append('<li>' + text + '</li>');
 }

 // Usage:
 var msg = new Message();
 msg.show("Hello there."); 
```

您甚至可以像这样添加一些额外的内容（未经测试）：

```
 function Message() {
      this.chatWindow = $(".chat");
 }

 Message.prototype.render = function (text) {
      return $('<li>' + text + '</li>');
 }

 Message.prototype.show = function (text) {           
     this.chatWindow.append(this.render(text));
 }

 // Usage:
 var msg = new Message();
 msg.show("Hello there."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:44:29.977

你必须初始化一些东西，`Message`并且不能直接访问它的方法。

例如：

```
var message = new Message();
message.show('test'); 
```

# c# - 在 WPF Tabcontrol 标题模板中显示 SelectedIndex

> ID：15553238
> 
> 赞同：5
> 
> 时间：2013-03-21T16:40:51.693
> 
> 标签：c#, wpf, xaml, binding, tabcontrol

我的应用程序中有 1...n 个选项卡控件，具有以下 XAML 设置：

```
<TabControl Name="ordersTabControl" ItemsSource="{Binding CoilItems}">
  <TabControl.ItemTemplate>
    <DataTemplate DataType="models:Coil">
      <StackPanel>
        <TextBlock Text="{Binding CoilCode, StringFormat='Coil: {0}'}" />
        <TextBlock Text="{Binding ArticleCode, StringFormat='Auftrag: {0}'}" />
        <TextBlock Text="{Binding RestWeight, StringFormat='Restgewicht: {0} kg'}" />
      </StackPanel>
    </DataTemplate>
  </TabControl.ItemTemplate>
  <TabControl.ContentTemplate>
  [...]
  </TabControl.ContentTemplate>
</TabControl> 
```

打开选项卡的数量在运行时会发生变化。现在我想在每个选项卡中显示一个索引（即第一个选项卡显示“订单 1”，第二个“订单 2”等等）除了每个标题中已经存在的信息。

AFAIK 使用 DataTemplate 时我无法通过代码隐藏访问选项卡属性，那么 XAML 中是否有任何方法可以在选项卡标题内绑定文本块以在选项卡控件中显示该特定选项卡的索引？

我认为RelativeSource和FindAncestors应该是可能的吗？唉，我真的找不到任何关于这些设置的清晰教程（而且我 2 天前才开始使用 WPF）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:15:38.280

我将使用附加属性为您提供解决方案。检查代码：

**附加属性**

```
public static class IndexAttachedProperty
{

    #region TabItemIndex

    public static int GetTabItemIndex(DependencyObject obj)
    {
        return (int) obj.GetValue(TabItemIndexProperty);
    }

    public static void SetTabItemIndex(DependencyObject obj, int value)
    {
        obj.SetValue(TabItemIndexProperty, value);
    }

    // Using a DependencyProperty as the backing store for TabItemIndex.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty TabItemIndexProperty =
        DependencyProperty.RegisterAttached("TabItemIndex", typeof (int), typeof (IndexAttachedProperty),
                                            new PropertyMetadata(-1));

    #endregion

    #region TrackTabItemIndex

    public static bool GetTrackTabItemIndex(DependencyObject obj)
    {
        return (bool) obj.GetValue(TrackTabItemIndexProperty);
    }

    public static void SetTrackTabItemIndex(DependencyObject obj, bool value)
    {
        obj.SetValue(TrackTabItemIndexProperty, value);
    }

    // Using a DependencyProperty as the backing store for TrackTabItemIndex.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty TrackTabItemIndexProperty =
        DependencyProperty.RegisterAttached("TrackTabItemIndex", typeof (bool), typeof (IndexAttachedProperty),
                                            new PropertyMetadata(false, TrackTabItemIndexOnPropertyChanged));

    private static void TrackTabItemIndexOnPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var tabControl = GetParent(d, p => p is TabControl) as TabControl;
        var tabItem = GetParent(d, p => p is TabItem) as TabItem;
        if (tabControl == null || tabItem == null)
            return;
        if (!(bool)e.NewValue)
            return;
        int index = tabControl.Items.IndexOf(tabItem.DataContext == null ? tabItem : tabItem.DataContext);
        SetTabItemIndex(d, index);
    }
    #endregion

    public static DependencyObject GetParent(DependencyObject item, Func<DependencyObject, bool> condition)
    {
        if (item == null)
            return null;
        return condition(item) ? item : GetParent(VisualTreeHelper.GetParent(item), condition);
    }
} 
```

此代码定义了两个附加属性，第一个是设置项目是否跟踪它所包含的选项卡项目索引。第二个是索引属性。

**XAML 示例代码：**

```
 <TabControl.ItemTemplate>
            <DataTemplate DataType="{x:Type WpfApplication3:A}">
                <StackPanel x:Name="tabItemRoot" WpfApplication3:IndexAttachedProperty.TrackTabItemIndex ="True">
                    <TextBlock Text="{Binding Text}"/>
                    <TextBlock Text="{Binding Path=(WpfApplication3:IndexAttachedProperty.TabItemIndex), ElementName=tabItemRoot}"/>

                </StackPanel>
            </DataTemplate>
        </TabControl.ItemTemplate> 
```

上面的代码是一个使用附加属性的例子。您可以轻松适应您的代码。

**结果：**

![在此处输入图像描述](../Images/2499b9ee7e5005332e7fa721ecdcf8b3.png)

希望此代码对您有用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:55:09.910

如果您没有将`AlternationCount`财产用于其他目的，您可以破解它以获得更简单的解决方案。

`AlternationCount`像这样绑定

```
<TabControl AlternationCount="{Binding Path=Items.Count, RelativeSource={RelativeSource Self}}"> 
```

然后在您的 ItemTemplate 中绑定您希望这样的 TextBlock 或其他控件`AlternationIndex`，

```
<TextBlock Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource  FindAncestor, AncestorType=TabItem}}" /> 
```

通过将自定义转换器插入上述绑定，您可以显示任何您想要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:01:21.893

即使您只能访问`TabItem`代码隐藏中的属性，它也无济于事，因为选项卡不知道它在`TabControl`集合中的自己的索引。这确实是真的，`ItemsControls`看起来很烦人，但它是有道理的，因为任何对象什么时候可以告诉你它自己在集合中的位置是什么？

但是，只要您可以访问控件`ItemsCollection`和选项卡的内容，就可以使用 IndexOf 来完成。我们可以在 a 中执行此操作`MultiValueConverter`，以便可以在 DataTemplate 中完成。

**转换器代码：**

```
 public class ItemsControlIndexConverter : IMultiValueConverter
   {
      public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
      {
         ItemCollection itemCollection = (ItemCollection)values[0];
         return (itemCollection.IndexOf(values[1]) + 1).ToString();
      }

      public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
      {
         throw new NotImplementedException();
      }
   } 
```

**TabControl XAML：**

```
<TabControl ItemsSource="{Binding CoilItems}">
    <TabControl.Resources>
        <local:ItemsControlIndexConverter x:Key="IndexConverter"/>
    </TabControl.Resources>
    <TabControl.ItemTemplate>
         <DataTemplate>
             <StackPanel Orientation="Horizontal">
                 <TextBlock>
                     <TextBlock.Text>
                         <MultiBinding Converter="{StaticResource IndexConverter}" StringFormat="Order {0}" Mode="OneWay">
                             <Binding RelativeSource="{RelativeSource AncestorType=TabControl}" Path="Items"/> <!-- First converter index is the ItemsCollection -->
                             <Binding /> <!-- Second index is the content of this tab -->
                         </MultiBinding>
                     </TextBlock.Text>
                 </TextBlock>
                 <!-- Fill in the rest of the header template -->
             </StackPanel>
         </DataTemplate>
     </TabControl.ItemTemplate>
 </TabControl> 
```

# asp.net - 发布配置文件不发布所需的构建配置 (.pubxml.user)

> ID：15553243
> 
> 赞同：9
> 
> 时间：2013-03-21T16:41:15.060
> 
> 标签：asp.net, deployment, version-control, visual-studio-2012, publish-profiles

考虑以下场景：

*   Alice 使用 Visual Studio 2012 创建 Web 应用程序（ASP.NET MVC 或 WebForms）。
*   Alice 创建一个名为“PRODUCTION”的发布配置文件，并在“设置”选项卡（在“发布向导”中）选择“发布”配置。
*   Alice 使用名为“PRODUCTION”的发布配置文件发布应用程序。
*   Alice 将解决方案保存到源代码控制中。

请注意，默认情况下“ `*.pubxml.user`”文件不包含在源代码管理中：http: [//msdn.microsoft.com/en-us/library/ff398069.aspx](http://msdn.microsoft.com/en-us/library/ff398069.aspx)

*   Bob 从源代码管理中检查解决方案。
*   Bob 打开解决方案并启动发布向导。
*   Bob 看到选定的发布配置文件名为“PRODUCTION”。
*   Bob 单击 Settings 选项卡（在 Publish Wizard 中）并看到显示的配置是**"Release"**。
*   Bob 发布应用程序。
*   **Bob 意识到应用程序是使用“调试”配置而不是“发布”配置发布的。**

原因是关于构建配置的信息存储在文件“ `*.pubxml.user`”中（参见节点调用`<LastUsedBuildConfiguration>`）。

这种行为是有问题的，尤其是当您使用 Web 配置转换（“Web.Release.config”）来更改连接字符串时。

=>**如果我不想将“ `*.pubxml.user`”文件保存到源代码管理**中，我该如何解决这个问题（例如，因为该文件可能包含其他不适合公共存储库的信息）？

相关文章：

*   [http://connect.microsoft.com/VisualStudio/feedback/details/776066/publish-settings-windows-azure-publish-target-profiles-not-selecting-proper-build-configuration](http://connect.microsoft.com/VisualStudio/feedback/details/776066/publish-settings-windows-azure-publish-target-profiles-not-selecting-proper-build-configuration)

*   [http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx](http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd465337.aspx](http://msdn.microsoft.com/en-us/library/dd465337.aspx)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T19:04:18.900

这有两个方面；在“发布”对话框的下拉列表中共享值并支持命令行。以下是我对两者的评论。

## 与团队成员共享个人资料

当我们在 VS2012 RTM 中发布发布位时，我们正在将 LastUseBuildConfiguraiton 写入 .pubxml.user 文件。此后，我们将其移至 .pubxml 文件本身，以便与其他团队成员共享。您可以在以下位置获取最新版本：

1.  [ASP.NET 2012.2](http://www.asp.net/vnext)
2.  [最新的 Azure SDK](http://www.windowsazure.com/en-us/downloads/)

If you have installed one of those and you are still seeing the behavior where the Config is not shared that is likely because the .pubxml was created with an older drop. The solution is to delete the .pubxml and .pubxml.user file and create it again with the latest.

## Command line scenarios

For command line scenarios the Configuration property needs to be set explicitly. The .pubxml (or .pubxml.user) file cannot override that value. For more details see my blog at [http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx](http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T20:06:15.297

If you have a backup of this Project then no need to worry about this error. Just run the backup project in VS 2012 OR 2013 and open the node of Property and then publish Profile folder and the then you will see there a single file with name of "Your project name.xml" now go to solution explorer menu press the button of "show all files" and you can see an other file with the name of **"pubxml.user"**. Now right click on the **publish Profile** and click the option "open folder in file explorer" now copy the file and replace it with crashed file.

Now rebuild project and after that publish it.

I was getting this problem today with this project [Hajj and Umrah Project](http://www.alfatimahtravels.com) now you can see that is live.

# c++ - 初始化指向数组的指针

> ID：15553246
> 
> 赞同：0
> 
> 时间：2013-03-21T16:41:28.490
> 
> 标签：c++

我正在尝试在我的类构造函数中初始化指向结构数组的指针，但它根本不起作用......

```
class Particles {

private:

    struct Particle {
        double x, y, z, vx, vy, vz;
    };

    Particle * parts[];

public:

    Particles (int count)
    {
        parts = new Particle [count]; // < here is problem
    }

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:42:28.883

`[]`从声明中删除那些。它应该是

```
Particle *parts; 
```

使用 C++，您可以使用以下优点[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)：

```
class Particles {
  // ...

 std::vector<Particle> parts;

 public:

    Particles (int count) : parts(count)
    {

    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:43:42.143

```
Particle * parts[]; 
```

这是一个指针数组。要初始化它，您需要遍历数组，初始化每个指针以指向动态分配的`Particle`对象。

你可能只想做`parts`一个指针：

```
Particle* parts; 
```

该`new[]`表达式返回一个指向数组第一个元素的指针 - a `Particle*`- 所以初始化会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:45:45.437

试试这个：

类粒子{

私人的：

```
struct Particle {
    double x, y, z, vx, vy, vz;
};

Particle * parts; 
```

上市：

```
Particles (int count)
{
    parts = new Particle [count]; // < here is problem
} 
```

};

# ios - 2个标签栏控制器，2个导航栏控制器链接到一个视图（故事板）

> ID：15553251
> 
> 赞同：0
> 
> 时间：2013-03-21T16:41:43.127
> 
> 标签：ios, tabs, controller, navigation, storyboard

我的应用程序 UI 有问题。我想将 2 个标签栏控制器链接到一个视图，但我不知道如何表示它？

为了让您了解我的应用程序的上下文，我有一系列视图控制器，它们为我的应用程序提供了一些有用的支持信息。我希望这些视图都显示在我的两个标签栏控制器菜单上（用户登录时显示一个标签栏控制器，当他没有登录时显示另一个）

我想在标签栏控制器和导航控制器之间放置一个视图控制器，这可能会触发我想要显示“两次”的视图，但由于某些原因我无法让它工作。（我也不确定这是否是最好的实现）

这是我的故事板现在的截图：http: [//img836.imageshack.us/img836/5913/41321932.png](http://img836.imageshack.us/img836/5913/41321932.png)

# c++ - QDir.setNameFilter 如何仅显示具有特定扩展名的文件？

> ID：15553258
> 
> 赞同：16
> 
> 时间：2013-03-21T16:42:05.537
> 
> 标签：c++, qt, filter, qdir

setNameFilters 没有按我的预期工作，所以如果有人能解释我是否使用不正确，或者这可能是 Qt 中的错误：

这是我的代码示例：

```
QDir export_folder("C:\path");
QStringList fileList = export_folder.setNameFilters(QStringList()<<"*.exe"); 
```

处理后fileList包含字符串“test.exe1”

我希望 fileList 只包含扩展名为 .exe 而不是 .exe* 的文件。

如果我想要比 .exe 更长的文件扩展名，我希望将其`"*.exe*"`作为我的过滤器。

有人可以帮助澄清，还是事后我必须手动处理我的文件列表？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-21T16:55:50.967

对于初学者来说，`setNameFilters`不返回`QStringList`，它什么也不返回。您的代码应如下所示：

```
QDir export_folder("C:\\path");
export_folder.setNameFilters(QStringList()<<"*.exe");
QStringList fileList = export_folder.entryList(); 
```

在使用 Qt 5.0.1 的 Linux 中，过滤按预期工作（不返回以“exe2”结尾的文件）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-01T05:23:57.913

此外，如果您想显示具有多种扩展名的文件，您可以执行以下操作。

```
export_folder.setNameFilters( QStringList() << "*.exe" << "*.pdf" << "*.docx" << "*.jpg" ); 
```

# batch-file - 我如何要求用户输入不是批处理文件，然后将其添加到命令中？

> ID：15553259
> 
> 赞同：0
> 
> 时间：2013-03-21T16:42:09.997
> 
> 标签：batch-file, active-directory, cmd

好的，所以我以前从未编写过批处理文件，但我现在已经到了需要批处理文件的地步，但据我所知，这将非常复杂。所以，基本上这就是我需要做的：

我需要一个批处理文件，它会问用户几个问题，然后使用他们的答案来完成要`cmd.exe`在 Windows 中运行的命令。

我的机器的命令如下：

```
csvde -f C:\output -d "cn=Users,dc=test,dc=local" -r "(&(objectClass=user)(objectCategory=person))" -l "givenName, sn, objectGUID" 
```

所以我需要一个批处理文件，它会询问客户在字段中的信息`"dc=test"`，`"dc=local"`然后执行完成的命令。

任何形式的帮助都会非常好，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:59:29.030

```
:testlp
(set test=)
set /p test="Please enter test value "
if not defined test goto testlp 
```

然后使用`dc=%test%`而不是`dc=test`

让您自己弄清楚如何输入`local`...

# ios - 如何动态绘制地图

> ID：15553263
> 
> 赞同：0
> 
> 时间：2013-03-21T16:42:13.550
> 
> 标签：ios, maps, drawing, shapefile

在一个 iOS 应用程序中，我想绘制一张美国地图，其中列出了州和县。我还想画出带有县轮廓的各个州。我已经研究过使用 Shapefiles 进行绘图，但我找不到一个可以翻译 shapefile 的好 API。我研究过 ArcGIS，但他们所做的大部分绘图似乎都是基于网络/服务器的，也无法绘制各个州或县的轮廓。

有谁知道我可以用来绘制以下地图的好的 iOS API？

*   美国概述了州和县
*   概述县的个别州

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:51:28.480

看看[MapBox](http://mapbox.com/)，它可以让你绘制这些类型的地图，然后你可以将它们作为瓦片拉入并用 MapKit 覆盖它们。

如果您不想使用 MapKit ，他们还有一个 iOS SDK，[http ://mapbox.com/mapbox-ios-sdk/。](http://mapbox.com/mapbox-ios-sdk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:07:27.850

我认为 ArcGIS for iOS 是您的答案。iOS API 将允许您将 MapView 添加到您的应用程序。

您可以向该 MapView 以及本地图形图层添加一个或多个地理服务。

MapServices 在服务器端呈现。FeatureServices 在客户端呈现。您还可以从 FeatureService 中获取要素（每个县或州将是一个要素），并将它们放入图形图层以实现不同的效果，例如选择、轮廓...

如果您想将所有数据存储在客户端（设备）中，那么您可以嵌入要素的 json 表示并将它们添加到 MapView 中的图形层，而无需连接到任何地理服务（尽管地理应用程序工作得更好连接到服务器时）

从这里开始：http: [//developers.arcgis.com/en/ios/sample-code/](http://developers.arcgis.com/en/ios/sample-code/) 此示例与您正在寻找的类似：[http ://www.arcgis.com/home/item.html?id= 417a0bf9dfda482c8110ebdbde3edd66](http://www.arcgis.com/home/item.html?id=417a0bf9dfda482c8110ebdbde3edd66) 这看起来也很有希望：http: [//developers.arcgis.com/en/ios/guide/cloud-storage-feature-services.htm](http://developers.arcgis.com/en/ios/guide/cloud-storage-feature-services.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T20:51:37.077

上面所有的好答案。最终为我工作的解决方案是简单地使用 SVG 图像，将其拖到[PaintCode 中](http://www.paintcodeapp.com/)，PaintCode 为我提供了绘制图像的所有代码。一个非常简单和优雅的解决方案。

# c - 如何在不使用 C 中的内置函数和循环的情况下打印字符串的反转？

> ID：15553265
> 
> 赞同：0
> 
> 时间：2013-03-21T16:42:17.390
> 
> 标签：c, input, io, reverse, output

我在编程比赛中遇到过这个问题，但是找不到答案，谁能帮我解决这个问题？？？

```
Input<<string
Output<<reverse(string) 
```

约束：不允许循环，不能使用内置函数！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T16:45:05.573

使用递归：

```
#include <stdio.h>

void print_reversed(const char* str) {
  if (*str) {
    print_reversed(str + 1);
    printf("%c", *str);
  }
}

int main() {
  print_reversed("abcdef");
  printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:54:19.160

为了根据 NPE 使用递归的提示给出一个具体的答案，我们需要对两件事使用递归：找到字符串的结尾，以及实际交换所有内容。

这是一个完整的程序来说明这种方法（[看它运行](http://ideone.com/bp5wlA)）：

```
#include <stdio.h>

char * find_end_of_string(char *str)
{
    return *str ? find_end_of_string(str + 1) : str;
}

void do_reverse_string(char *a, char *b)
{
    char tmp;

    if (a < b) {
        tmp = *a;
        *a = *b;
        *b = tmp;

        do_reverse_string(a + 1, b - 1);
    }
}

void reverse_string(char *str)
{
    do_reverse_string(str, find_end_of_string(str) - 1);
}

int main() {
    char odd[] = "abcde";
    char even[] = "abcdef";

    reverse_string(odd);
    reverse_string(even);

    printf("%s\n%s\n", odd, even);

    return 0;
} 
```

# ios - NSCoder 没有正确返回值

> ID：15553266
> 
> 赞同：0
> 
> 时间：2013-03-21T16:42:19.403
> 
> 标签：ios, nscoding

在下面的代码中，sharedInstance 方法中的属性从未正确设置，我不知道为什么。在我用存档器保存它之前，我似乎有正确的值。

```
 #import "User.h"

  static User *sharedInstance = nil;

  #define NAME @"name"
  #define USER_ID @"id"
  #define ACCOUNT_ID @"account_id"
  #define USER_NAME @"username"
  #define ADMIN @"admin"
  #define CURRENT_USER @"current_user"

  @implementation KSUser

  + (id)sharedInstance
  {
      @synchronized(self) {
          if (sharedInstance == nil) {
              NSData *userData = [[NSUserDefaults standardUserDefaults] objectForKey:CURRENT_USER];
              if (userData) {
                  sharedInstance = [NSKeyedUnarchiver unarchiveObjectWithData:userData];
              }
              else {
                  sharedInstance = [[super alloc] init];
              }
          }
      }
      return sharedInstance;
  }

  - (void)populateFromJSON:(NSDictionary *)json
  {
      sharedInstance.name = json[NAME];
      sharedInstance.accountId = json[ACCOUNT_ID];
      sharedInstance.userId = json[USER_ID];
      sharedInstance.userName = json[USER_NAME];
      sharedInstance.admin = [json[ADMIN] boolValue];
      sharedInstance.loggedIn = YES;
      NSLog(@"values are: name: %@, %@, %@, %@", sharedInstance.name, sharedInstance.accountId, sharedInstance.userId, sharedInstance.userName);
  }

  - (void)logout
  {
      sharedInstance.name = nil;
      sharedInstance.accountId = nil;
      sharedInstance.userId = nil;
      sharedInstance.userName = nil;
      sharedInstance.admin = NO;
      sharedInstance.loggedIn = NO;
      [self saveState];

  }

  - (void)saveState
  {
      NSLog(@"values are: name: %@, %@, %@, %@", sharedInstance.name, sharedInstance.accountId, sharedInstance.userId, sharedInstance.userName);
      NSData *data = [NSKeyedArchiver archivedDataWithRootObject:sharedInstance];
      [[NSUserDefaults standardUserDefaults] setObject:data forKey:CURRENT_USER];
  }

  - (void)encodeWithCoder:(NSCoder *)aCoder
  {
      [aCoder encodeObject:sharedInstance.userId forKey:USER_ID];
      [aCoder encodeObject:sharedInstance.accountId forKey:ACCOUNT_ID];
      [aCoder encodeObject:sharedInstance.name forKey:NAME];
      [aCoder encodeObject:sharedInstance.userName forKey:USER_NAME];
      [aCoder encodeBool:sharedInstance.admin forKey:ADMIN];
  }

  - (id)initWithCoder:(NSCoder *)aDecoder
  {
      if (self = [super init]) {
          sharedInstance.userId = [aDecoder decodeObjectForKey:USER_ID];
          sharedInstance.accountId = [aDecoder decodeObjectForKey:ACCOUNT_ID];
          sharedInstance.name = [aDecoder decodeObjectForKey:NAME];
          sharedInstance.userName = [aDecoder decodeObjectForKey:USER_NAME];
          sharedInstance.admin = [aDecoder decodeBoolForKey:ADMIN];
      }
      return self;
  }

  @end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:03:09.440

这是因为您在方法中的全局变量 sharedinstance - (id)initWithCoder:(NSCoder *)aDecoder 始终为 nil

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:16:20.343

In`initWithCoder:`不要指代共享实例，而是指代`self`。在它执行的时候`sharedInstance`是零。

此外，您只`saveState`在注销后调用，因此它只保存 nil 值。

# asp.net-mvc-4 - Url中的MVC用户全名，如何处理重复

> ID：15553268
> 
> 赞同：0
> 
> 时间：2013-03-21T16:42:26.500
> 
> 标签：asp.net-mvc-4, routes, custom-url

我想在我的 MVC4 网站中设置以下 url，在 url 中使用用户的全名：

```
http://www.myapp.com/profile/steve-jones 
```

我在 Global.asax 中设置了以下路线：

```
 routeCollection.MapRoute(
      "profile", "profile/{userName}", 
       new { controller = "myController", action = "profile", userName = string.Empty 
    }); 
```

我可以获取参数`'steve-jones'`并将其与具有匹配名称的用户匹配。我唯一的问题是，如果有多个`'Steve Jones'`，我该如何处理？

有谁知道解决方法/解决方案，以便我可以使用用户的全名作为 url 的一部分，并且仍然能够在控制器方法中检索正确的用户？

我是否被迫在 url 中包含用户的 ID（我不想出现的东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:48:25.737

处理此问题的常用方法是在创建配置文件时附加一个数字。因此，如果“steve-jones”已经是数据库中的名称，则将用户的显示名称设为“steve-jones2”。您基本上必须坚持所有个人资料网址都是唯一的，其中包括更新任何现有数据库和帐户创建代码。

或者（和/或另外），如果找到两个相同的名称，则让脚本重新路由到消歧页面，在该页面中，用户会看到许多现有 Steve Jonesese 的链接和个人资料信息片段，以便他们可以转到完整正确的个人资料.

另一种处理方法是在最后为所有用户配置文件提供一个额外的数字代码。在我的大学，所有登录都是基于姓名的，因此他们为每个人提供了伪随机的 3 位数扩展名，这样只要他们没有得到 1000 个具有完全相同姓名的人，他们就安全了 :)

如果您担心的话，如果没有 steve-jones 或 steve-jones1，有些人可能会更高兴成为 steve-jones-342。

# android - Android中的操作栏，如whatsapp

> ID：15553274
> 
> 赞同：0
> 
> 时间：2013-03-21T16:42:42.380
> 
> 标签：android, android-actionbar, whatsapp

whatsapp 如何实现其动作栏？最新更新版本包含动作栏，在 android 2.2 和 android 4.1 上完美运行，没有任何区别。任何想法他们如何实现向后兼容性？后退按钮适用于我无法以任何方式工作的 android 2.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T16:45:38.853

据[Androlyzer 称](https://www.androlyzer.com/app/com.whatsapp/43847/2cad0baf559b6aab1db627bc647e6e0472320131)，Whatsapp 使用[ActionBarSherlock](http://actionbarsherlock.com/)作为他们的操作栏，这允许他们在所有 Android 2.1+ 设备上拥有一致的操作栏

# emacs - Emacs：将 dired-do-compress 扩展到目录

> ID：15553277
> 
> 赞同：3
> 
> 时间：2013-03-21T16:42:47.780
> 
> 标签：emacs, dired

如果我在 emacs 中的 dired（或 x-dired）模式下按“Z”，则光标下的文件将被压缩或未压缩。

我想将此行为扩展到目录。也就是说，如果光标位于目录“stuff”上，我希望运行“Z”

```
tar -zcf stuff.tgz stuff 
```

（假设'tar'由操作系统提供）。

*旁注：* 反过来（将 stuff.tgz 扩展到完整的目录树）已经可以通过 '!' 完成，这表明对扩展的猜测。不对称（“Z”压缩和“！”解压缩）不会打扰我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:35:37.710

很酷的想法。这是一个适合我的开始：只需要在`dired-compress-file`. 我已经用`BEGIN EDIT`和`END EDIT`注释突出显示了更改（抱歉，如果有更好的方法来突出显示差异）。我敢肯定这并不可靠，但也许它可以为您指明正确的方向。

编辑：我应该说以下在 GNU Emacs 24.3.1 中对我有用。

```
(defun dired-compress-file (file)
  ;; Compress or uncompress FILE.
  ;; Return the name of the compressed or uncompressed file.
  ;; Return nil if no change in files.
  (let ((handler (find-file-name-handler file 'dired-compress-file))
        suffix newname
        (suffixes dired-compress-file-suffixes))
    ;; See if any suffix rule matches this file name.
    (while suffixes
      (let (case-fold-search)
        (if (string-match (car (car suffixes)) file)
            (setq suffix (car suffixes) suffixes nil))
        (setq suffixes (cdr suffixes))))
    ;; If so, compute desired new name.
    (if suffix
        (setq newname (concat (substring file 0 (match-beginning 0))
                              (nth 1 suffix))))
    (cond (handler
           (funcall handler 'dired-compress-file file))
          ((file-symlink-p file)
           nil)
          ((and suffix (nth 2 suffix))
           ;; We found an uncompression rule.
           (if (not (dired-check-process (concat "Uncompressing " file)
                                         (nth 2 suffix) file))
               newname))
          (t
       ;;; We don't recognize the file as compressed, so compress it.
       ;;; Try gzip; if we don't have that, use compress.
           (condition-case nil
               ;; BEGIN EDIT - choose the correct name if looking at a directory
               (let ((out-name (if (file-directory-p file) (concat file ".tar.gz") (concat file ".gz"))))
                 ;; END EDIT
                     (and (or (not (file-exists-p out-name))

                              (y-or-n-p
                               (format "File %s already exists.  Really compress? "
                                       out-name)))
                          ;; BEGIN EDIT: create a tarball if we're looking at a directory
                          (not (if (file-directory-p file)
                                   (dired-check-process (concat "Compressing " file)
                                                        "tar" "-zcf" out-name file)
                                 (dired-check-process (concat "Compressing " file)
                                                      "gzip" "-f" file)))
                          ;; END EDIT
                          (or (file-exists-p out-name)
                              (setq out-name (concat file ".z")))
                          ;; Rename the compressed file to NEWNAME
                          ;; if it hasn't got that name already.
                          (if (and newname (not (equal newname out-name)))
                              (progn
                                (rename-file out-name newname t)
                                newname)
                            out-name)))
                 (file-error
                  (if (not (dired-check-process (concat "Compressing " file)
                                                "compress" "-f" file))
                      ;; Don't use NEWNAME with `compress'.
                      (concat file ".Z")))))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T23:19:56.937

以下是该库的链接`dired-tar`——它对目录和文件进行 tar 和压缩。我已经使用 2014 年 3 月 19 日构建的最新版本的 Emacs Trunk 验证了它可以在 OSX 上运行。

[http://www.emacswiki.org/emacs/DiredTar](http://www.emacswiki.org/emacs/DiredTar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T13:59:41.357

此功能现在已安装在 master 中：

*   按`Z`目录运行`tar -czf dirname.tar.gz dirname`
*   按`Z`*.tar.gz 文件运行`tar -zxvf dirname`

`dired-compress-file-suffixes`如果您需要使用除`-zxvf`.

# javascript - 用Javascript中的HTML文本替换textNode？

> ID：15553280
> 
> 赞同：24
> 
> 时间：2013-03-21T16:43:00.833
> 
> 标签：javascript, html, textnode

我被引导到 GitHub ( [https://github.com/cowboy/javascript-linkify](https://github.com/cowboy/javascript-linkify) ) 上的 Linkify 项目，以查找和“链接”只是在文本中浮动的 URL 和域。

这很棒！它完全适用于文本！

但是，我不太确定如何使它适用于`textNode`具有我想要链接的文本的文本。

我知道`textNode`唯一`textContent`的......它都是文字。由于此 Linkify 函数将 HTML 作为文本返回，有没有办法获取一个 textNode 并使用 Linkify 输出“重写”其中的 HTML？

我一直在 JSFiddle 上玩它：http: [//jsfiddle.net/AMhRK/9/](http://jsfiddle.net/AMhRK/9/)

```
function repl(node) {
  var nodes = node.childNodes;
  for (var i = 0, m = nodes.length; i < m; i++) {
    var n = nodes[i];
    if (n.nodeType == n.TEXT_NODE) {
      // do some swappy text to html here?
      n.textContent = linkify(n.textContent);
    } else {
      repl(n);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-21T17:11:01.397

您需要将 textNode 替换为 HTML 元素，例如 span，然后将链接文本设置为该元素的 innerHTML。

```
var replacementNode = document.createElement('span');
replacementNode.innerHTML = linkify(n.textContent);
n.parentNode.insertBefore(replacementNode, n);
n.parentNode.removeChild(n); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-02T17:11:35.300

除了先前的答案，我还提出了更短的方法（基于 jQuery）：

```
$(n).replaceWith('Some text with <b>html</b> support'); 
```

其中`n`- 是文本节点。

或者[原生版本](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/replaceWith)

```
var txt = document.createElement("span");
txt.innerHTML = "Some text with <b>html</b> support";
node.replaceWith(txt); 
```

`node`文本节点在哪里

# cuda - 理解 Cublas：向量加法（asum）

> ID：15553282
> 
> 赞同：1
> 
> 时间：2013-03-21T16:43:06.270
> 
> 标签：cuda, cublas

根据[CUBLAS 参考](http://docs.nvidia.com/cuda/cublas/index.html#topic_6_3)，asum 函数（用于获取向量元素的总和）是：

```
cublasStatus_t  cublasSasum(cublasHandle_t handle, int n, const float *x, int incx, float *result) 
```

您可以在参考链接中看到参数说明，大致我们有一个元素向量`x`以及`n`元素`incx`之间的距离。

我的代码是（相当简化，但我也测试了这个，但仍然存在错误）：

```
int arraySize = 10;
float* a = (float*) malloc (sizeof(float) * arraySize);

float* d_a;
cudaMalloc((void**) &d_a, sizeof(float) * arraySize);

for (int i=0; i<arraySize; i++)
    a[i]=0.8f;

cudaMemcpy(d_a, a, sizeof(float) * arraySize, cudaMemcpyHostToDevice);

cublasStatus_t ret;  
cublasHandle_t handle;
ret = cublasCreate(&handle);

float* cb_result = (float*) malloc (sizeof(float));

ret = cublasSasum(handle, arraySize, d_a, sizeof(float), cb_result);

printf("\n\nCUBLAS: %.3f", *cb_result);

cublasDestroy(handle); 
```

为了简化代码，我删除了错误检查（没有错误，CUBLAS 函数返回`CUDA_STATUS_SUCCESS`）和`free`and `cudaFree`。

它编译，它运行，它不会抛出任何错误，但打印的结果是`0`，并且，调试，它实际上是`1.QNAN`。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:18:30.050

的论点之一`cublasSasum`是不正确的。调用应如下所示：

```
ret = cublasSasum(handle, arraySize, d_a, 1, cb_result); 
```

请注意，倒数第二个参数 ,`incx`应该是*words*，而不是*bytes*。

# objective-c - 对象不断收到通知

> ID：15553283
> 
> 赞同：1
> 
> 时间：2013-03-21T16:43:07.530
> 
> 标签：objective-c

我有一个收听通知的 Book 对象。当我试图从视图中删除这本书时，我有这段代码：

```
BookItem *book = [books objectAtIndex:bookIndex];
    [book removeFromSuperview];
    [books removeObject:book];
    book = nil; 
```

删除书籍后，我发送“重新排列”通知，并且在 BookItem 对象中收到错误，我正在访问空值...

可能是什么问题呢？删除对象后如何停止收听通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:45:10.837

你需要[停止观察](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html "删除自己")：

```
[[NSNotificationCenter defaultCenter] removeObserver:book]; 
```

# vb.net - Vb.net：调用与原型不匹配的函数通过编译器检查

> ID：15553286
> 
> 赞同：2
> 
> 时间：2013-03-21T16:43:13.877
> 
> 标签：vb.net, function, compiler-construction, syntax-error

我遇到了一些我想解释的事情。我有一个函数 InitializeValues() 设置组合框，并将数据源设置为数据表。使用不带参数的公共方法 GetFileSourceData 从 DGVMain_Functions 类的实例中检索数据表。
问题是对 GetFileSourceData(MyConnectionString) 的调用实际上会编译和运行。当返回数据表并尝试设置为 cbo 的数据源时，会发生运行时错误。正常调用 GetFileSourceData() 可以正常工作。我曾向另一位开发人员询问过这个问题，他认为我有一些过时的参考，所以我清理了项目，然后删除了调试文件夹中的所有内容，然后重新构建，但它仍然具有相同的行为。

我的问题是，为什么编译器会接受这个而不抛出语法错误，而且为什么它甚至到了你可以实际进入这个不应该存在的函数的地步，并让它在返回时失败？

**编辑**： 将 Option Strict On，确实使编译器捕捉到这一点。“Option Strict On 不允许从 'String' 到 'Integer' 的隐式转换。但这仍然不是我想看到的错误。我想知道为什么它不显示“没有这样的重载/定义该功能存在”。

错误是这样的：

> 创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：错误：错误：从字符串“用户 ID = XXXX；数据源 = XXXX”到类型“整数”的转换无效。Microsoft.VisualBasicFileProcessor。"InnerException = {"输入字符串的格式不正确。"}"

```
Private Sub InitializeValues()
  cboFileSource.DisplayMember = "filesource"
  cboFileSource.ValueMember = "filesource"
  'first call works fine since it matches
  cboFileSource.DataSource = DgvMain_functs.GetFileSourceData()
  'below is the call that gets through the complier and actually runs, fails on return
  cboFileSource.DataSource = DgvMain_functs.GetFileSourceData(MyConnectionString)         
End Sub

Public Function GetFileSourceData() As DataTable
  Try
    Dim dt As DataTable
    Dim strSQL As String = "select distinct filesource from FileUpload_FolderPath"
    dt = SqlHelper.ExecuteDataset(MyConnectionString, CommandType.Text, strSQL).Tables(0)
    Return dt
  Catch ex As Exception
    Throw New Exception("Error in DGVMain_Functions: " & ex.Message & ex.Source)
  End Try
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:07:38.860

正如您在评论中暗示的那样，Option Explicit On 肯定会解决这个问题。

# node.js - 将目录中的javascript文件与节点uglify + watch合并？

> ID：15553287
> 
> 赞同：2
> 
> 时间：2013-03-21T16:43:17.510
> 
> 标签：node.js, watch, dust.js, client-side-templating

## 目标：

*我正在尝试为客户端模板开发构建一个轻松的工作流程。*

## 文档根：

```
/views/uncompiled/
/static/js/compiled/ 
```

我们从`/views/uncompiled/`

这是我可以构建东西的地方，`/views/uncompiled/index.html`例如。

我正在构建**[dust.js](http://linkedin.github.com/dustjs/)**模板，所以我也在使用**[dusterjs](https://github.com/dmix/dusterjs)**来监听我的目录中的变化`/views/uncompiled/`，并自动在我的目录中呈现已编译`*.js`的对应项`/static/js/compiled/`。

因此，只要保存更改就会`/views/uncompiled/index.html`呈现出来。`/static/js/compiled/index.js`

## 问题：

我`layout.html`的越来越大了。`*.js`每次添加另一个模板时，我都需要包含一个新脚本：

```
<head>
    <script src='/static/js/compiled/index.js'></script>
    <script src='/static/js/compiled/header.js'></script>
    <script src='/static/js/compiled/footer.js'></script>
    <script src='/static/js/compiled/baconstrips.js'></script>
    ...
</head> 
```

## 解决方案：

在文件夹上使用另一个手表`/static/js/compiled/`也会自动连接`*.js`成一个单曲`app.js`，只要该文件夹的内容发生变化，它就会始终包含在我`<head>`的文件夹中：

```
<head>
    <script src='/static/js/app.js'></script>
</head> 
```

## 问题：

我想使用像**[Uglify.js](https://github.com/mishoo/UglifyJS)**这样也可以进行压缩的连接工具。

*   是否有任何节点包可以自动化上述解决方案？
*   是否有**[Uglify.js](https://github.com/mishoo/UglifyJS)**的本机功能已经做到了这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:50:06.613

使用[grunt.js](http://gruntjs.com/)。它能够通过各种贡献的模块监视/集中/缩小您的文件。需要一点时间来适应（我仍然是我自己），但你最终会得到一个自定义的构建过程，它可以按照**你**想要的方式工作，这是无价的。

# android - Android 应用程序未出现在最近的应用程序列表中

> ID：15553295
> 
> 赞同：5
> 
> 时间：2013-03-21T16:43:38.887
> 
> 标签：android, mobile

我正在部署一个 android 应用程序（Android 4.0.3），当我按下主屏幕时，该应用程序不会留在最近的应用程序列表中。我注意到当我重新启动应用程序时，它会在我按下主页按钮之前导航的最后一个屏幕上启动。任何人都可以帮忙吗？这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application android:icon="@drawable/logo_home"
        android:allowBackup="true">
        <activity
            android:name="com.test.activity.CommunicatorActivity"
            android:launchMode="singleTop"
            android:label="" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>

        </activity>
        <activity android:name="com.test.activity.InputActivity"
            android:windowSoftInputMode="adjustPan|stateHidden">
        </activity>
        <activity android:name="com.test.activity.SettingsActivity" 
            android:windowSoftInputMode="adjustPan|stateHidden">
        </activity>
        <activity android:name="com.test.activity.OutputActivity"
            android:windowSoftInputMode="adjustPan|stateHidden">
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-14T17:05:43.987

我会四处走动，并建议这是你的问题：

```
android:label="" 
```

在您的根活动`CommunicatorActivity`中，您已将标签设置为空字符串。此标签用于在可用应用列表中标识您的应用，由于它是空的，这可能会导致它不显示在最近的应用列表中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-19T13:22:41.537

从清单中删除**android:excludeFromRecents="true"**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T22:30:45.550

你应该使用

```
android:label="your app_name" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T17:04:07.197

# 2 件事

好的，您的清单中没有明显的东西可以阻止它出现在您的最近列表中。

## 1、识别错误

使用 GUI 来判断哪个任务包含您的活动并不总是直截了当。其中一种可能性是来自其他应用程序的活动位于您的任务之上，使您相信您的活动不存在。因为，显然它恢复到最后一个屏幕。

***我建议您暂时卸下单顶并检查相同的内容。***

## 2.启动器修改

您使用的启动器有标准启动器吗？启动器或其他应用程序是否修改了最近屏幕的显示或行为（不太可能但值得检查）

***为此，我建议使用股票启动器或在不同的手机或模拟器上尝试相同的应用程序。***

> 有什么帮助是您遵循的步骤以及最近屏幕以及您的应用程序的一些屏幕截图

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-26T11:57:13.800

我有同样的问题。

原因是我在 manifest.xml 中设置了 android:label=""。

我没有设置 android:launchMode="singleTop"。

我故意声明 android:label="" 因为我没有找到更好的方法从我的主要活动中删除操作栏的标题。

我再次打开 android:label="app_name" ，现在一切正常；按下主屏幕时，该应用程序再次出现在最近的应用程序列表中，并且在重新启动时不会在最后一个导航屏幕上启动。

# google-refine - 谷歌细化：使用方面工具来推断两列之间的映射

> ID：15553296
> 
> 赞同：1
> 
> 时间：2013-03-21T16:43:41.190
> 
> 标签：google-refine

我一直在搜索，但还没有找到如何在细化中做到这一点。

我有两列唯一IDS。对于 A 中的每个 a，我想在 B 中找到前 10 个最接近的匹配项。

我的后备计划是只使用 Levenshtein 进行迭代……但是 Refine 有一个非常好的迭代界面，并且实现了更多算法，我希望能够使用它来完成一些工作。

还是有其他工具可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:06:51.490

您是否知道可以在 Refine 的聚类界面中使用诸如指纹或 ngramFingerprint（[源代码）之类的聚类算法？](https://github.com/OpenRefine/OpenRefine/wiki/GREL-String-Functions)

使用您的 IDS 字段，使用以下表达式基于此列创建一个新列：ngramFingerprint(value)

您现在可以在此新列上与您的其他数据集交叉。这可能有助于获得更多匹配。

# javascript - 属性和属性在 JavaScript 中的含义相同吗？

> ID：15553302
> 
> 赞同：-4
> 
> 时间：2013-03-21T16:43:51.783
> 
> 标签：javascript, dom, html4

IE 8 及以下版本对属性和属性的处理方式类似。

他们的意思是一样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:03:46.760

[属性和属性有什么区别？](https://stackoverflow.com/questions/258469/what-is-the-difference-between-attribute-and-property)对语义进行了相当多的讨论......以及这些术语的不同语言用法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:21:07.003

@所有认为他们相同的人：

不。

HTML 元素的属性和属性不相同。

从 DOM 的角度来看：属性是私有变量，属性存储在 NamedNodeMap 中，存储为 HTML 元素的 childNode

从 JavaScript 的角度来看（实现）： var elem = document.getElementById("ID");

elem.prop = somevalue; //访问属性

elem.getAttribute("属性名"); //访问属性：getters elem.setAttribute("attributeName","value"); //访问属性：setter

有关实施细节，请参阅我的其他答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T13:33:20.403

DOM 中的属性和属性不相同。但是，在 IE 8 及更低版本中的处理方式类似。

我遇到了跨浏览器兼容性的问题。

问题：自定义属性作为 IE8 的 HTML4/JavaScript 中的属性进行访问。需要使 HTML 与 Chrome、Safari 和 IE9 兼容。

解决方案：可以迭代元素以检查自定义属性并将其添加为属性。

示例代码：

var propertyName = obj.attributes[index].nodeName; //（属性名不区分大小写） obj[propertyName] = value; //（检查 obj.customAttribute 的实现）

提示：与 IE 8 及更低版本不同，IE 9 及更高版本已解决该问题并以不同方式处理属性和属性。

# php - 消息表单不起作用

> ID：15553314
> 
> 赞同：1
> 
> 时间：2013-03-21T16:44:19.513
> 
> 标签：php, html, forms

我创建了非常简单的消息表单，但存在一些问题。至少发送消息并显示感谢页面，但在第 14 行有 Notice: Undefined index: name in public_www/n..../contact-form-handler.php 和另一个错误是 name is not发送。

感谢您的任何提示

```
<form class='contact_form' method="POST"  action="contact-form-handler.php" > 
<ul>
<li>
<label for="name"  >Name:</label>
<input type="text"  id="name" />
</li>
<li>
<label for="email" id="email">Email:</label>
<input type="email" name="email"  />
</li>
<li>
<label for="message" id="message">Message:</label>
<textarea name="message" cols="40" rows="6" required ></textarea>
</li>
<li>
<button class="submit" value="submit">Submit Form</button>
</li>
</ul>
</form> 
```

PHP是：

```
<?php
if ($_SERVER["REQUEST_METHOD"] == "POST")  {
$to = "test@test.com";
$subject = "Contact";
$name_field = $_POST['name'];
$email_field = $_POST['email'];
$message = $_POST['message'];
$body = "From: $name_field\n E-Mail: $email_field\n Message:\n $message";
echo   include( "contact-form-thank-you.html" );
    mail($to, $subject, $body);
} else {
echo include( "contact-form-error.html" );
}
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:48:18.233

你的 html 是错误的！这应该工作：

```
<form class='contact_form' method="POST"  action="contact-form-handler.php" > 
<ul>
<li>
<label for="name"  >Name:</label>
<input type="text"  name="name" />
</li>
<li>
<label for="email" id="email">Email:</label>
<input type="email" name="email"  />
</li>
<li>
<label for="message" id="message">Message:</label>
<textarea name="message" cols="40" rows="6" required ></textarea>
</li>
<li>
<button class="submit" value="submit">Submit Form</button>
</li>
</ul>
</form> 
```

你混淆了你`id`的`name`名字输入

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:48:56.360

当您想使用表单传递某些内容时，重要的属性是“名称”：

```
<input type="text"  id="name" name="name" /> 
```

有了这个它应该工作。

`id`用于引用来自 DOM 的元素，即在使用 Jquery 或 javascript 时。

这`name`是提交表单时使用的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T16:50:07.423

你的“名字”`input`没有`name`属性。该`id`属性本身并不意味着将`$_POST`数组条目发送到您的脚本。只有`input`s 中带有`name`属性的数据才会发送到您的 PHP 脚本，只要它们没有`disabled`属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T16:50:52.077

你忘了添加

```
name="name" 
```

里面

```
<input type="text"  id="name" /> 
```

# c# - 在 .NET 可执行文件中嵌入 OpenXML SDK 文件

> ID：15553315
> 
> 赞同：3
> 
> 时间：2013-03-21T16:44:19.870
> 
> 标签：c#, compression, embedded-resource, openxml-sdk

Microsoft OpenXML SDK 版本 2.0 附带一个 ~5111 KiB .NET 程序集 (DLL) 和一个 ~14436 KiB 未压缩的 XML 文件。~~这两者都是成功使用 SDK 所必需的。~~（**重要更新：**只需要 DLL 文件；XML 只是程序员的 API 文档！！）

我已经使用有效的 SDK 编写了一个程序，我对此感到满意。但是，我使用 LZMA2 压缩了 OpenXML SDK 数据（DLL 和 XML），结果只有 1287 KiB。节省了 18260 KiB，通过普通 WAN 链接传输可能需要至少几秒钟，最多几分钟。

[我从7-zip.org](http://www.7-zip.org/sdk.html)下载了 LZMA SDK，它在大约 45 KiB 的已编译 MSIL（由 .NET Framework 4.0 编译）中实现了 LZMA 压缩和解压缩。

我的目标是压缩资源（使用 7-Zip 之类的东西），将它们存储在构建的程序集 (.exe) 中，然后解压缩并加载它们。我知道如何使用 7-Zip SDK 进行解压缩。因此，我有两个问题：

1.  如何将 OpenXML SDK 程序集 (.dll) 加载到正在运行的 .NET 进程中而不将其写入磁盘？假设我有一个 byte[] 的 DLL 未压缩字节；我将自己负责将资源打包到可执行文件中。

2.  如何告诉程序集从内存中加载 OpenXML 架构 (DocumentFormat.OpenXml.xml) 而不将其写入磁盘？假设我有一个包含未压缩 XML 的 byte[] 或字符串。同样，我将自己负责解压缩和资源打包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:03:40.287

`Assembly.Load`解压后使用适当的重载到`byte[]`. `DocumentFormat.OpenXML.xml`执行应用程序不需要该文件。它只是面向开发人员的 API 文档。Visual Studio 使用它在 Intellisense 中显示信息。

您应该使 dll（或压缩的 dll）成为嵌入式资源，并在`AppDomain.AssemblyResolve`请求时使用事件来加载 SDK。[这里](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)有一些示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:01:31.640

假设您不能在安装过​​程中简单地解压缩可执行文件旁边的 dll（这是迄今为止最简单的选择），我建议您查看[`Assemby.Load(byte[])`](http://msdn.microsoft.com/en-us/library/h538bck7.aspx).

至于DocumentFormat.OpenXml.xml，我不是很熟悉，但到目前为止我发现它只是开发所需要的，而不是部署所需要的。

# android - Android按钮背景九个补丁多张图片

> ID：15553318
> 
> 赞同：0
> 
> 时间：2013-03-21T16:44:28.447
> 
> 标签：android, button, nine-patch, android-drawable

我有三个具有渐变的图像，基本上是按钮左、中和右的一部分。左右两边的角是圆的。

他们有什么方法可以将所有这些组合在图层列表中吗？或任何其他方法，以便我可以将其作为按钮背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:47:50.390

您可以尝试在垂直方向的线性布局中使用 3x [ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)并将宽度设置为 0。

# css - 无法在我网站的特定区域滚动

> ID：15553321
> 
> 赞同：0
> 
> 时间：2013-03-21T16:44:32.253
> 
> 标签：css

有人可以帮忙吗？我会给你一个链接，你可以在网站的任何地方滚动，但如果你的鼠标在黑色区域，它看起来就像你不能向下滚动......有什么想法吗？

[http://ge.aigginformatique.com](http://ge.aigginformatique.com)

您可以在背景、包装器上滚动，但不能在“内容”区域（黑色背景）上滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:55:06.310

我查看了您的页面，发现存在`div`如下所示：

```
<div class="scroll  pad1" style="margin-top: 20px; overflow: hidden;"> 
```

查看事件侦听器，我发现一段代码被激活`onmousewheel`，当光标在这个 div 上时，它以某种方式阻止了滚动。

我建议您查看您的代码（尤其是 JS）并修复那里的任何问题。
如果您不明白代码在做什么，请尝试删除“滚动”类。请注意，这可能会产生意想不到的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:52:12.397

看起来有用于在隐藏或关闭屏幕的 div 上滚动的按钮。您有几个链接的外部样式表也可能会影响这一点。只是略读一下，名为 fancybox 的那个包含“scrolling:no;”这一行。但可能还有其他情况。

# html - 段落间距的行高在 Yahoo Mail 中不起作用

> ID：15553325
> 
> 赞同：0
> 
> 时间：2013-03-21T16:44:38.020
> 
> 标签：html, email, yahoo-mail

出于某种原因，当使用此代码向我的 yahoo 邮件帐户或任何 yahoo 邮件帐户发送电子邮件时，行间距不适用于分隔段落。我怎样才能解决这个问题？

这是我正在使用的，但不起作用：

```
<p style="line-height:150%">
<span style="font-family:Helvetica, Arial, sans-serif; font-size:10.5pt; line-height:150%; color:#333333; margin-bottom: 1em;">Caro [Membro],</span>
</p>
<p style="line-height:150%">
<span style="font-family:Helvetica, Arial, sans-serif; font-size:10.5pt; line-height:150%; color:#333333; margin-bottom: 1em;">Estou escrevendo com uma atualização importante para os membros de N sobre o Programa de Garantia de Obrigações CDFI.</span>
</p> 
```

看起来像这样：

![邮件行距问题](../Images/e7663e7ff71958cfa750eebd866d6f18.png)

我该如何解决？见鬼，我什至在它上面加了一个margin-bottom，这似乎不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T13:40:07.837

我建议您不要`<p>`在 HTML 电子邮件中使用。一般来说，我会`<tr><td>`改用。（可选）您可能希望使用`<br>`，但我没有。

`<p>`在每个基于 Web 的电子邮件/电子邮件客户端中变化很大，并且比`<td>`.

要完美对齐段落之间的空间，我认为最一致的选择是使用透明图像来控制`<tr><td>`. 它应该看起来像这样：

```
<tr>
  <td>Lorum Ipsum</td>
</tr>
<tr>
  <td height=3px"><img src="http://www.example.com/img/3px.png" alt="" height="3px" />
  </td>
</tr>
<tr>
  <td>Lorum Ipsum</td>
</tr>
<tr>
  <td>Lorum Ipsum</td>
</tr> 
```

3px.png 将是一个 3px 的透明图像。如果您经常创建电子邮件，您最终会得到一组透明 png 的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T04:57:59.717

问题出在文字处理器中的行高设置中。要解决此问题：

1) 打开您的文字处理程序。2) 打开您的文档。3) 转到编辑。4) 转到全选。5) 转到格式。6) 转到段落。7) 转到行距 8) 选择比例 9) 设置为 150% 10) 单击确定 11) 将文本粘贴到您的电子邮件程序中。

# kendo-ui - 如何在 Kendo UI Grid 中为弹出编辑设置密码模式

> ID：15553336
> 
> 赞同：4
> 
> 时间：2013-03-21T16:45:16.430
> 
> 标签：kendo-ui, kendo-grid

如何格式化剑道网格弹出编辑对话框的密码输入字段以显示密码，例如...？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:53:51.163

在定义中添加一个[`editor`](http://docs.kendoui.com/api/web/grid#configuration-columns.editor-Function)函数，`column`如下所示：

```
editor: function (container, options) {
    $('<input data-text-field="' + options.field + '" ' +
            'class="k-input k-textbox" ' +
            'type="password" ' +
            'data-value-field="' + options.field + '" ' +
            'data-bind="value:' + options.field + '"/>')
            .appendTo(container)
} 
```

您甚至可以[`columns.hidden`](http://docs.kendoui.com/api/web/grid#configuration-columns.hidden-Boolean%28default)在不处于编辑模式时使用以下方法隐藏列：

```
{
    hidden: true,
    field : "password",
    title : "Password",
    editor: function (container, options) {
        $('<input data-text-field="' + options.field + '" ' +
                'class="k-input k-textbox" ' +
                'type="password" ' +
                'data-value-field="' + options.field + '" ' +
                'data-bind="value:' + options.field + '"/>')
                .appendTo(container)
    }
} , 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-30T20:15:59.057

我会做一些不同的事情（对于弹出编辑器）。在构建 html 之后添加属性。

编辑：我添加了如何添加工具提示的示例。

```
$(“#grid”).kendoGrid(
{
    …,
    edit: function( e )
    {
    //Add password attribute to input field.
        e.container.find( “.k-edit-field:eq(1) > input” ).attr( ‘type’, ‘password’ );

    //Add tooltip.
        e.container.find( "[data-label-for = name], [data-container-for = name]" ).attr('title', "One and two" ) );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T16:43:33.743

您可以使用属性标记您的属性，其中之一是；`[DataType(DataType.Password)]`. 应用它，您将获得一个“密码格式”的控件，类似于下图。

[![在此处输入图像描述](../Images/94331ad541ad681d36e127ccec4087e8.png)](https://i.stack.imgur.com/TPCJ5.png)

有关信息，[这个问题](https://stackoverflow.com/questions/13387316/kendo-ui-mvc-popup-editor-how-to-hide-fields/13388032#13388032)的答案给了我如何做到这一点的想法，并且可能对某些人也有用。

# javascript - 将值从 JQuery 传递到我的模型并更新数据库

> ID：15553338
> 
> 赞同：2
> 
> 时间：2013-03-21T16:45:21.720
> 
> 标签：javascript, ruby-on-rails-3, jquery, ruby-on-rails-3.2

我得到了一个模型列表`Students`和`Register`一个名为`StudentRegisters`.

A`Register`有很多学生，a`Student`可以属于很多`Registers`。

最初我希望能够在`register/1`or`register#show`等​​中标记学生在场/缺席，但是我创建了一个名为 的新页面`registration`，例如可以通过转到来访问`register/1/registration`，并且在 中看起来像这样`register controller`：

```
def registration
  @studentregister = StudentRegister.find_all_by_register_id(params[:id])
end 
```

这是页面外观的屏幕截图：

![在此处输入图像描述](../Images/3bd4973026da1142c8b6694b7e50d55e.png)

计划是，学生刷卡，在文本字段中读取，然后在`Student`表中查找值，即`Student.find_by_card_id', and if the student exists and is present in the current table, check the`当前`checkbox and display the current time in the`到达时间`field, and finally save both changed attributes in the`StudentRegister 模型，以便保存他们的出勤率。如果用户不存在，则什么也不会发生，或者如果学生存在于数据库中但不在当前表中，则可能会显示一条消息，或者只是忽略它。

![在此处输入图像描述](../Images/0b30dac120b57f32ad9688693441f1aa.png)

我已经玩了很多关于让表格显示和更新的事情，目前每一行本身就是一个表单，并且附加了一个隐藏的提交按钮，该按钮被复选框的`onClick`功能激活。

自己看看：

```
<table border="1">
  <%= text_field_tag 'Card_ID',nil,  :autofocus => true %>
      <tr><td>Present</td>
        <td>University ID</td>
        <td>First Name</td>
        <td>Last Name</td>
        <td>Time of Arrival</td>
      </tr>
  <tr>
   <% @studentregister.each do |t| %>
<%= simple_form_for t do |streg| %>
      <td><%= streg.check_box :present, :onChange => "submit()", :class => 'student_present'%>
        <%= streg.submit :style => 'display: none' %></td>
            <td><%= content_tag :span, Student.find(t.student_id).university_id, :id => "#{t.student_id}"%></td>
            <td><%= streg.label Student.find(t.student_id).first_name %></td>
            <td><%= streg.label Student.find(t.student_id).last_name %></td>
            <td><%= content_tag :span, t.time_of_arrival, :id => "toa_#{t.student.id}" %>     </td>
             </tr>
    <% end %>
    <% end %>
</table> 
```

我还尝试了显示数据，因此我没有使用 Simple_Form 的`label`方法，而是`content_tag`为每一行提供一个 ID（感谢之前回答的问题）。不确定这是否正确，但我的源代码如下所示：

```
<table border="1">
  <input autofocus="autofocus" id="Card_ID" name="Card_ID" type="text" />
      <tr><td>Present</td>
        <td>University ID</td>
        <td>First Name</td>
        <td>Last Name</td>
        <td>Time of Arrival</td>
      </tr>
  <tr>
<form accept-charset="UTF-8" action="/student_registers/14" class="simple_form edit_student_register" id="edit_student_register_14" method="post" novalidate="novalidate">    
<div style="margin:0;padding:0;display:inline">
 <input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" />
<input name="authenticity_token" type="hidden" value="c8B0JGs4ZLVILa4a4r4PJJrD/zFcLCDhTLscBKHbFeE=" /></div>
      <td><input name="student_register[present]" type="hidden" value="0" />
<input class="student_present" id="student_register_present" name="student_register[present]" onChange="submit()" type="checkbox" value="1" />
        <input name="commit" style="display: none" type="submit" value="Update Student register" /></td>
            <td><span id="3">w122341434</span></td>
            <td><label class="string optional control-label" for="student_register_Michael">Michael</label></td>
            <td><label class="string optional control-label" for="student_register_Jones">Jones</label></td>
            <td><span id="toa_3"></span> </td>
             </tr></form>
<form accept-charset="UTF-8" action="/student_registers/15" class="simple_form edit_student_register" id="edit_student_register_15" method="post" novalidate="novalidate">  
<div style="margin:0;padding:0;display:inline">
<input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" />
<input name="authenticity_token" type="hidden" value="c8B0JGs4ZLVILa4a4r4PJJrD/zFcLCDhTLscBKHbFeE=" /></div>
      <td><input name="student_register[present]" type="hidden" value="0" />
<input class="student_present" id="student_register_present" name="student_register[present]" onChange="submit()" type="checkbox" value="1" />
        <input name="commit" style="display: none" type="submit" value="Update Student register" /></td>
            <td><span id="7">w678941512</span></td>
            <td><label class="string optional control-label" for="student_register_Stewie">Stewie</label></td>
            <td><label class="string optional control-label" for="student_register_Lee">Lee</label></td>
            <td><span id="toa_7"></span> </td> 
```

我还创建了一些 JQuery 来测试它是如何工作的，但是每当我选中一个复选框时，它就不会提交表单，并且每当我有时间保存在`Time of Arrival`字段中时，然后提交表单，它不存储那个时间。这是为什么？

```
<script>
    $(function() {
        $("input[name=Card_ID]").keydown(function(e) {
            var id;
            if (e.which === 13) {
            id = this.value;
            alert("That"); //Just to see that it works
            $('#toa_'+id).text('2001-01-01 14:13:46 UTC'); 
//Sets the time for the row which as the toa_id that was entered in the checkbox 
(Remember this is just a test to see how it works, in reality the Student ID should be   checked, not the form ID)
            $('form#edit_student_register_14 input[type="checkbox"]').attr('checked', true);
            alert("This");
        $('form#edit_student_register_14').submit();
        }
    })}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:58:07.330

首先认为您应该做的是确保您的表单数据正确地登陆您的服务器页面，而不是错误的 URL，这可以通过将服务器端接收到的请求输出到网页来完成。一旦完成，您就可以在服务器端管理表单数据并继续数据库操作过程。

```
puts params[:blah]
abort 
```

取自：[从一个动作中，获取一个 post 变量，输出到页面，然后停止执行](https://stackoverflow.com/questions/3775128/from-an-action-get-a-post-variable-output-to-page-then-halt-execution)

完成此操作后，您应该能够在服务器端进行处理并使用相同的方式进行跟踪。

这是使用 Chrome 浏览器调试网络查询的一种方法，您可以查看传出查询列表，您可以通过单击来保存网络流量`Preserve Log upon Navigation` ![一旦点击此按钮变为红色](../Images/c65fb279a2048d0e45bc4c7cc62b574d.png) ：

[Chrome 网络调试](https://developers.google.com/chrome-developer-tools/docs/network)

我希望这有帮助。

# com - 缺少接口的 COM 服务器

> ID：15553339
> 
> 赞同：2
> 
> 时间：2013-03-21T16:45:22.790
> 
> 标签：com, interface

我有一个旧版本的可执行 COM 服务器，我需要创建一个文档来描述这个接口。我没有 .tlb 文件也没有 .idl 文件。我可以恢复可执行 COM 服务器的接口吗？它是用VB6编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:00:43.603

VB6 遵循将类型库作为资源嵌入到可执行文件中的常见做法。它的好地方，它确保类型库始终与 COM 服务器实现匹配。

启动 Visual Studio 命令提示符并运行 Oleview.exe。File + View TypeLib 并选择您的程序。它将类型库反编译回 IDL。

另一种方法是 Visual Studio 的 File + Open + File 命令。您将看到嵌入在程序中的资源。打开“TYPELIB”节点并右键单击资源，导出并为其命名以 .tlb 结尾。我认为这在 Express 版中不起作用。

# asp.net-mvc - ASP.Net MVC 多个下拉列表，单个列表，只允许唯一选择

> ID：15553344
> 
> 赞同：1
> 
> 时间：2013-03-21T16:45:41.210
> 
> 标签：asp.net-mvc, entity-framework

我正在创建一个 ASP.Net MVC 4 站点，其中有一个带有创建操作的控制器。

Create 操作为 View 提供了几个下拉列表，我希望将每个下拉列表绑定到数据库中的单个实体列表。

但是，我想确保每个下拉菜单中的选择都是唯一的。

我该怎么做呢？每次选择以某种方式更新其他每个下拉菜单上的可用选项时，我是否需要对服务器进行某种 AJAX 回发？或者有没有更简单的方法？

非常感谢，

马丁·琼斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:53:55.100

在您的模型中，您可以为每个下拉菜单设置单独的 ID 字段。如下所示

```
<%: Html.DropDownListFor(model => model.DropwdownId1,Model.DropdownEntities) %>
<%: Html.DropDownListFor(model => model.DropwdownId2,Model.DropdownEntities) %>
<%: Html.DropDownListFor(model => model.DropwdownId3,Model.DropdownEntities) %> 
```

其中**Dropdownentities**只会从数据库返回实体。

您应该能够在 Post Action 中看到每个下拉列表的选定值。DropwdownId1 , DropwdownId2

# python - *** 'return' 外部函数（timer.py，第 7 行）

> ID：15553350
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:45:48.183
> 
> 标签：python

```
yes = set(['yes','y', 'ye', ''])
no = set(['no','n'])

choice = raw_input().lower()

if choice in yes:
    return True
if choice in no:
    return False
else:
    sys.stdout.write("Please respond with 'yes' or 'no'") 
```

我以为这是我的缩进，但我仍然无法让它工作，它可能很简单，我稍后将它用作另一个文件的基础，所以我需要检查它是否有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:46:49.930

您只能`return`在函数中使用语句。*您的代码根本*没有定义函数。

# jquery - 伪网格编辑图标弹出jquery模态对话框

> ID：15553354
> 
> 赞同：0
> 
> 时间：2013-03-21T16:45:50.410
> 
> 标签：jquery

我有一个 jquery 模态弹出框，我需要从伪网格中的许多项目中使用它。

伪网格，编辑项图标需要弹出单模态弹出框传入参数。

这是我必须显示 jquery 模态弹出窗口的代码...

```
 $(document).ready(function () {
  $('div#unassignedWorkstationsPopup').dialog({
    height: 500,
    width: 800,
    autoOpen: false,
    modal: true,
    resizable: false
  });
  $('#unassignedWorkstationsLink').click(function () {
    $('div#unassignedWorkstationsPopup').dialog('option', 'buttons', [{ text: 'OK' }]);
    $('div#unassignedWorkstationsPopup').dialog('open');
  });
}); 
```

我有一个带有编辑图标图像的 div，它需要调用弹出窗口的显示区域。

但是我迷路了。

谢谢你

# python - 将遵循模式的文件读入数组

> ID：15553359
> 
> 赞同：1
> 
> 时间：2013-03-21T16:46:14.820
> 
> 标签：python, file-io, python-3.x

我的老板给我分配了一项任务，我不知道如何完成。他需要我构建一个脚本，以便他可以使用命令行脚本执行各种 DNS 管理任务。虽然我不是程序员，但我至少玩过一点python。

我不确定哪种方法是完成这项工作的最佳方式。该文件遵循非常（至少对人类而言）简单的 5 行模式。每个条目中唯一更改的部分是域名本身。

```
zone "bostire.com" {
        type master;
        allow-transfer {none;};
        file "/etc/bind/zones/bostire.com";
};
zone "caylorscustommolds.com" {
        type master;
        allow-transfer {none;};
        file "/etc/bind/zones/caylorscustommolds.com";
};
zone "contractorsservicesofsek.com" {
        type master;
        allow-transfer {none;};
        file "/etc/bind/zones/contractorsservicesofsek.com";
}; 
```

我需要能够拥有可以添加、删除和排序此文件的功能。为了将来对脚本的改进，我想努力做到这样：

```
add_entry(newdomain.tld)
del_entry(olddomain.tld)
sort_entries() 
```

在我的想法中，我承认这不是世界上最好的，如果我知道如何将文件读入某种数组以便对其进行排序，我应该能够使用相同的数组概念来删除。添加将是直截了当的，只需调用 sort_entries() 后记。

我不希望你们为我编写整个该死的程序，但如果你们能指出我正确的方向，或者提出一些想法让我阅读，那就太好了！

* * *

我注意到它似乎没有保存排序列表。所以，我开始调查原因。这是根据 Barnacle_Ed 的说明修改的代码：

```
import re

recordslist = open('/home/bradboy/named.conf.local', 'r+')
myregex = re.compile('^zone.*^\};\n', re.DOTALL | re.MULTILINE)
mylist = myregex.findall(recordslist.read())
mylist.sort()
print len(mylist)
numitems = 0
recordslist.seek(0)
for entry in sorted(mylist):
    recordslist.write(entry)
    numitems += 1
    print numitems
recordslist.truncate()
recordslist.close() 
```

产生以下输出：

```
bradboy@ns1:~$ python dns.py 
1
1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:47:12.730

这里有一些基本的构建块可以帮助您入门：

1）打开文件进行读写

```
myfile = open('your_filename_here', r+) 
```

2) 使用[re.findall()](http://docs.python.org/2/library/re.html#re.findall)将条目划分为一个列表，其中每个条目以 'zone' 开头并以 '};' 结尾

```
myregex = re.compile('zone.*?\};', re.DOTALL | re.MULTILINE)
mylist = myregex.findall(myfile.read()) 
```

3) 要添加、删除和排序，请使用[append()、remove() 和 sort() 函数](http://docs.python.org/2/tutorial/datastructures.html)。请注意，您需要其中一个数组条目的*确切*内容才能删除它...您可以使用类似的方法巧妙地做到这一点

```
for entry in mylist:
    if 'string_to_remove' in entry:
        mylist.remove(entry) 
```

4) 最后，当您准备好用列表的修改内容覆盖旧文件时，从文件的开头开始，写出列表中的所有条目，然后丢弃结果位置之后的所有内容。从[另一个stackoverflow问题](https://stackoverflow.com/a/2424410/2128152)，

```
myfile.seek(0)
for entry in mylist:
    myfile.write(entry)
myfile.truncate()
myfile.close() 
```

希望这可以帮助！

# python - 使用python生成随机树

> ID：15553361
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:46:23.270
> 
> 标签：python, html, xml, tree

如何在 python 中生成随机树。我有一个数组，我想从中生成一棵随机树。我有以下代码：

```
class Testcase(object):        
    def generateRandomTree(depth, p):
        '''
        depth = max length of path
        p = probability for another child on one level
        '''
        raise NotImplementedError()

def main():
    t = Testcase();
    t.generateRandomTree(3, 0.4)

main() 
```

谁能告诉我如何生成随机树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:51:02.817

1.  弄清楚如何表示树数据结构
2.  弄清楚如何生成给定深度的非随机（完整）树
3.  在第 2 步的代码中添加一个随机数测试，就在添加每个孩子之前

注意。你没有说它是否意味着*二叉树*，或者有任意数量的孩子，或者你是否*必须*达到规定的深度或不超过它。

# javascript - 选择后提交表单

> ID：15553371
> 
> 赞同：0
> 
> 时间：2013-03-21T16:46:51.710
> 
> 标签：javascript, jquery

我有一个带有此验证 javascript 的表单。Js检查是否选择了值。如果两个下拉选项都被选中，则发送表单。

但是发送不起作用。怎么了？

谢谢大家;-)

```
<script type="text/javascript">
$(document).ready(function(){
$("#submit").click(function (e) {
   if($('#species').find(":selected").val()===""){
     //alert("empty");
     $("#msg1").html("Required");

   }    
   if($('#species2').find(":selected").val()===""){
     //alert("empty2");
     $("#msg2").html("Requires");

   }
   e.preventDefault()
});
});
</script> 
```

HTML：

```
<form  method="post" action="send.php">
<label for="species" id="bobo">*Species:</label><br />

<div id="msg1"></div>
<select id="species" name="species" size="1">
<option value="">Please choose a species</option>
<option value="21">Chicken</option>
<option value="28">Turkey</option>
</select>

<br />

<div id="msg2"></div>
<select id="species2" name="species2" size="1">
<option value="">Please choose a species2</option>
<option value="21">Chicken</option>
<option value="28">Turkey</option>
</select>

<br />

<input id="submit" type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:50:33.660

首先，您应该将`submit`事件附加到`form`元素，因为可以在不单击提交按钮的情况下发送表单。

即（假设你给`form`你的表格一个id）：

```
$('#form').submit(function(e) { ... }); 
```

其次，当您调用时`e.preventDefault()`，它会取消操作，因此不会提交表单。

如果有错误则放入语句，因此*只有*`e.preventDefault()`在有错误时才会调用它。`if`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:50:19.330

`$("form").submit()`在确认选择了这两个值后，您忘记了调用。

换句话说，您从来没有打电话给您提交表单。你应该把它放在最后一次检查之后，并将它移动`e.preventDefault()`到点击处理函数主体的第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:51:19.410

您的 html 中的提交按钮将触发 httprequest 到您的操作。但在您的 javascript 中，您使用`e.preventDefault()`. 这将阻止 html 默认行为提交您的序列化表单数据。如果要先运行 javascript 验证，然后在验证后提交表单，则需要使用 ajax。否则，提交按钮将自动提交您在表单中的任何内容，并将您重定向到 html 元素中定义的操作。*

# php - 计数/选择限制/数据列限制

> ID：15553374
> 
> 赞同：0
> 
> 时间：2013-03-21T16:47:01.807
> 
> 标签：php, html, mysql

我可以要求编码限制下拉列表中的数据选择吗？

例如：在 1 个下拉列表中有 3 个选择，在每个选择中每个数据中最多可以选择 20 人。

```
<tr><td><label><font face='Verdana' size='3'><b>Kelab Persatuan</b></font><td>:   </td>
<td><select name="kelab_persatuan" id="kelab_persatuan">
    <option value="-Select-">-Select-</option>
    <option value="Bahasa Melayu">Bahasa Melayu</option>
    <option value="Bahasa Inggeris">Bahasa Inggeris</option>
    <option value="Rekacipta">Rekacipta</option>
    <option value="Agama Islam">Agama Islam</option>
    <option value="Pend.Alam Sekitar">Pend.Alam Sekitar</option>
    <option value="Seni dan Visual">Seni dan Visual</option>
    <option value="Muzik dan Budaya">Muzik dan Budaya</option>
    <option value="Komputer">Komputer</option>

</select></td></tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:48:46.293

我想我从您的问题中了解到的是，您需要限制多选中的选择。

您可以尝试使用 jquery，脚本可能看起来像这样.....

```
$("selectid").change(function () {
if($("selectid option:selected").length > 3) {
     //some thing like an alert saying no more selecting.
  }
 }); 
```

现在我使用单词 selectid 因为我在 jquery 中使用 id 作为选择器。它也可能是您的选择框的名称..干杯..

# proxy - 什么是 glassfish-jvm-option "http.proxyHost" 用于/何时使用它？

> ID：15553375
> 
> 赞同：0
> 
> 时间：2013-03-21T16:47:02.957
> 
> 标签：proxy, glassfish, jvm-arguments

我刚刚在 HAProxy 后面设置了我的 glassfish。

我找到了 glassfish-jvm-option“java.http.proxyHost”¹和“java.http.proxyPort”¹。我没有在我的 glassfish 中设置这个值，所以我问自己：我需要这个值做什么，我应该什么时候设置它们？

¹ [http://docs.oracle.com/cd/E19957-01/820-7203/gigbs/index.html](http://docs.oracle.com/cd/E19957-01/820-7203/gigbs/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:11:25.367

如果您在 glassfish 前面有一个普通的代理服务器并希望 glassfish 服务器通过代理连接，则需要这些选项。只是标准的代理东西。

在您的情况下，这些设置不是必需的，因为您仅将来自网络的请求“代理”到 glassfish 服务器，并且响应直接从 glassfish 服务器发送到客户端。

更多详细信息可以在[“Java 网络和代理”](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)中找到。

# forms - 打开弹出窗口包含表单中的 Post 值

> ID：15553382
> 
> 赞同：0
> 
> 时间：2013-03-21T16:47:34.273
> 
> 标签：forms, popup, window

我有这个 HTML 表单

```
<form action="" method="post" name="form1" id="form1">
      <select name="CARS" id="Exam">
          <option value="Toyota">Toyota</option>
          <option value="BMW">BMW</option>
          <option value="FORD">FORD</option>
     </select>
      <input name="CarID" type="hidden" id="CarID" value="<?php echo $_POST['CarID']; ?>" />
      <input type="button" name="button" id="button" value="Button" onclick="open_exam()" />
</form> 
```

当我提交此表单时，我希望在具有固定大小的弹出窗口中打开“Formpage.php”，其中包含 CARS 和 CarID 的 POST 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T08:50:48.867

下面的链接可能会对您有所帮助。它描述了在弹出窗口中提交值的两种方式：

[http://dtbaker.net/web-development/submit-a-form-into-a-popup/](http://dtbaker.net/web-development/submit-a-form-into-a-popup/)

# jquery - jQuery加载方法不起作用

> ID：15553383
> 
> 赞同：1
> 
> 时间：2013-03-21T16:47:42.097
> 
> 标签：jquery

这不是加载页面错误在哪里？，这是使用 jquery 版本 1.9.1 ，该页面 `http://localhost/ReportsSec/MapNavigation.aspx`包含谷歌地图 api 下面给出的错误：

刷新页面以查看在 F12 工具打开之前可能出现的消息。SCRIPT5009：“google”未定义 Default.aspx，第 116 行字符 1 SCRIPT257：由于错误 80020101 无法完成操作。jquery-1.9.1.js，第 602 行字符 4

```
 <!DOCTYPE html>
        <html>
    <head>
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>

    <script>
        $(document).ready(function () {
            $("button").click(function () {
                $("#div1").load("http://localhost/ReportsSec/MapNavigation.aspx");
            });
        });
    </script>
    </head>
    <body>

    <div id="div1" style="width:450px;height:450px"></div>
    <button>Get External Content</button>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:07:30.803

我认为问题可能是您需要一个 ajax mod 才能使用 jquery 加载外部页面`.load()`。试试这个：[使用 JQuery 的跨域请求](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

然后您可以执行以下操作： `$('html').load('http://google.com');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:50:22.050

我认为这是您导入的 js 文件的问题。尝试一次

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

     $(document).ready(function () {

            $("#div1").load("http://localhost/ReportsSec/MapNavigation.aspx");

    }); 
```

# php - 在 Dreamweaver CS6 中设置本地测试服务器的空白页结果

> ID：15553386
> 
> 赞同：1
> 
> 时间：2013-03-21T16:48:00.957
> 
> 标签：php

谢谢你接受我的问题。尽管它可能接缝，但我不得不说我是新手。在运行 Dreamweaver CS6 的 Windows 8 机器上，Apache 2.2.22 和 PHP 安装在根 c: 驱动器上，配置如下：文档；php。测试 Apache localhost “它有效！”

我设置了一个包含以下行的 Dreamweaver 文件“PHP_Basic-Lesson_001.php”：

```
<?php
$myAge = 30;
echo $myAge;
?> 
```

文件“PHP_Basic-Lesson_001.php”与 index.htm 一起保存在文件夹 apache > htdocs 中 c: 根文件夹 htdocs 包含文件夹 phptest

按照 Adob​​e 文章“在 Dreamweaver CS5 中设置本地测试服务器”激活 F12 键 Dreamweaver 过程在 URL 处的结果与预期一致：file///C:/apache/htdocs/PHP_Basic-Lesson_001.php .

但是页面仍然是空白的。我尝试了另一个批准的代码片段，但也无法显示。

我将不胜感激地得到一个有效的答案。

# php - SimpleDB 结果转换成 PHP 数组格式

> ID：15553397
> 
> 赞同：1
> 
> 时间：2013-03-21T16:48:24.670
> 
> 标签：php, multidimensional-array, amazon-simpledb

我知道这个问题的变体已经被问过和回答过，但我是个聪明人，经过数周的断断续续搜索，我找不到我需要的东西。必须有一些简单的方法来做到这一点，我错过了。

现有代码：

```
$response = $sdb->get_attributes('domain','itemname');
$newresponse = $response->body->GetAttributesResult->to_array();
print_r($newresponse); 
```

我得到这个结果：

```
CFArray Object
(
    [storage:ArrayObject:private] => Array
        (
            [Attribute] => Array
                (
                    [0] => Array
                        (
                            [Name] => tenants
                            [Value] => Sam Smith
                        )

                    [1] => Array
                        (
                            [Name] => tenants
                            [Value] => Janet Jones
                        )

                    [2] => Array
                        (
                            [Name] => tenants
                            [Value] => Willy Wonka
                        )

                    [3] => Array
                        (
                            [Name] => buildingName
                            [Value] => 123 Main St.
                        )

                )

        )

) 
```

我希望这些数据看起来像：

```
Array
(
   [tenants] => Array
      (
         [0] => Sam Smith
         [1] => Janet Jones
         [2] => Willy Wonka
      )

   [buildingName] => 123 Main St.
) 
```

我需要考虑`[tenants]`拥有一个或多个值。其他变量可能有也可能没有单一值。我还必须考虑到`[tenants]`可能不是按顺序排列的可能性（即`[buildingName]`是`[2]`而另一个`[tenants]`是在`[3]`。这里显然有一个我不明白的概念。我该怎么做？

**编辑以解决私有数组注释**
如果我将现有代码修改为以下内容：

```
$response = $sdb->get_attributes('domain','itemname');
$newresponse = $response->body->GetAttributesResult->to_array()->getArrayCopy();
print_r($newresponse); 
```

我得到这个结果：

```
Array
(
    [Attribute] => Array
        (
            [0] => Array
                (
                    [Name] => tenants
                    [Value] => Sam Smith
                )

            [1] => Array
                (
                    [Name] => tenants
                    [Value] => Janet Jones
                )

            [2] => Array
                (
                    [Name] => tenants
                    [Value] => Willy Wonka
                )

            [3] => Array
                (
                    [Name] => companyname
                    [Value] => 123 Main St.
                )

        )

) 
```

因此，虽然不再提及“私人”，但同样的基本问题也适用。

**基于user2057272答案的最终解决方案**

user2053727，您既是绅士（或绅士）又是学者。你的回答*几乎*完美。我遇到的一个问题是结果是：

```
Array
(
    [tenants] => Array
        (
            [0] => Sam Smith
            [1] => Janet Jones
            [2] => Willy Wonka
        )

    [buildingName] => Array
        (
            [0] => 123 Main St.
        )
) 
```

为了将其修复`[buildingName]`为字符串而不是数组（因为只有一个元素），我将最终代码修改为以下内容：

```
$response= $sdb->get_attributes('domain','itemname');
$newresponse = $response->body->GetAttributesResult->to_array();
$new = array();  
foreach($newresponse["Attribute"] as $key => $value) 
    {  
    if(!isset($new[$value['Name']])) 
        {  
        $new[$value['Name']] = array();  
        }  
    $new[$value['Name']][] = $value['Value'];  
    }
array_walk($new, $walker = function (&$value, $key) use (&$walker) 
    {
    if (is_array($value)) 
        {
        if (count($value) === 1 && is_string($value[0])) 
            {
            $value = $value[0];
            }
        else 
            {
            array_walk($value, $walker);
            }       
         }   
    }
    );
print_r($new); 
```

我感谢 janmoesen（[将只有一个值的子数组转换为字符串](https://stackoverflow.com/questions/3569734/convert-sub-arrays-with-only-one-value-to-a-string)）的`array_walk`部分。

我的结果现在正是我所需要的：

```
Array
(
    [tenants] => Array
        (
            [0] => Sam Smith
            [1] => Janet Jones
            [2] => Willy Wonka
        )

    [buildingName] => 123 Main St.
) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:16:02.923

```
$new = array();  
foreach($newresponse["Attribute"] as $key => $value) {  
    if(!isset($new[$value['Name']])) {  
        $new[$value['Name']] = array();  
    }  
    $new[$value['Name']][] = $value['Value'];  
}  
var_dump($new) 
```

根据需要进行定制。

# java - Eclipse RCP 平台迁移

> ID：15553410
> 
> 赞同：1
> 
> 时间：2013-03-21T16:49:25.297
> 
> 标签：java, eclipse, eclipse-rcp, rcp

是否有任何**实用程序/工具**可以帮助将现有`Eclipse RCP 3.6`平台迁移到`Eclipse RCP 4.2`（Juno）平台。（我的意思是在 3.6 平台到 4.2 平台上运行的 RCP 应用程序）。

请指出是否有任何现有的**指导方针/提示**来执行相同的操作。

此外，如果迁移到 4.2 平台有任何不利之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:40:46.347

AFAIK 没有这样的工具，但您也可以在Lars Vogel 的[将 Eclipse 3.x 插件和 RCP 应用程序迁移到 Eclipse 4教程中找到一些技巧和指南。](http://www.vogella.com/articles/Eclipse4MigrationGuide/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:33:49.173

我认为这可能会有所帮助： [从 Eclipse 3.x 迁移到 Eclipse 4 (e4)](http://eclipsesource.com/blogs/2016/01/08/migrating-from-eclipse-3-x-to-eclipse-4-e4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T09:31:18.657

我为工作做了一些 E3 到 E4 的迁移。

*   这是您可以使用的工具：Eclipse 4 迁移工具：[https](https://opcoach.github.io/E34MigrationTooling/) ://opcoach.github.io/E34MigrationTooling/ 。

该工具的网站和本页的网站[https://www.eclipsecon.org/france2016/session/truth-about-migrating-eclipse-4](https://www.eclipsecon.org/france2016/session/truth-about-migrating-eclipse-4)提供了一些有关使用上述工具的文档（获取 pdf）

这些是最有用的迁移文章：

*   [https://jaxenter.com/eclipse-migration-tutorial-124527.html](https://jaxenter.com/eclipse-migration-tutorial-124527.html)
*   [https://eclipsesource.com/blogs/2016/01/08/migrating-from-eclipse-3-x-to-eclipse-4-e4/](https://eclipsesource.com/blogs/2016/01/08/migrating-from-eclipse-3-x-to-eclipse-4-e4/)
*   [http://www.vogella.com/tutorials/Eclipse4MigrationGuide/article.html](http://www.vogella.com/tutorials/Eclipse4MigrationGuide/article.html)

请记住，即使您只使用兼容层，您也可能需要更改一些代码，即处理程序中的事件管理。

最重要的是，迁移到 E4 没有缺点。不再支持 E3 Standalone，E4 是一种更新的技术，可以减少样板代码。Eclipse IDE 本身在 E4 兼容层之上运行 E3 组件。

我的建议：逐步迁移：首先使用兼容层。然后，如果需要，开始使用 E4 范例移动 E4 组件。

# java - 生产者消费者终止

> ID：15553411
> 
> 赞同：3
> 
> 时间：2013-03-21T16:49:26.843
> 
> 标签：java, concurrency, producer-consumer

我目前正在研究并发编程模式。考虑使用信号量解决生产者消费者问题的有界缓冲区，见[维基百科](http://en.wikipedia.org/wiki/Producer-consumer_problem#Implementations)。

如果，在某个时候，制片人说：这是我制作的最后一件作品。我怎样才能让程序终止？（消费者仍然会等到它被告知缓冲区中有东西）。

同样，如果消费者说：我不想再消费了。如何通知生产者，让程序退出？（生产者正在等待有一个可用的位置来放置一些东西）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:54:24.107

来自[Java Concurrency in Practice Book](https://rads.stackoverflow.com/amzn/click/com/0321349601) 7.2.3

`Another way to convince a producer consumer service to shut down is with a poison pill: a recognizable object placed on the queue that means "when you get this, stop."`

翻阅本书的第 7 章`Cancellation and Shutdown`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:55:38.337

您可以通过在队列中放置有害消息来让生产者终止消费者，当消费者收到消息时，它会识别出消息是来自生产者的关闭，并相应地关闭自己。

在给定的场景中，从消费者到生产者的通信是不可能的，您必须创建另一个通信渠道，因为目前通信只是一种方式。

您可以使用 Exchanger 实例进行直接（无队列）通信，然后可以双向传递有害消息，尽管您现在有一个直接链接的进程对而不是独立的生产者/消费者对。

最后，您可以向单个管理器注册所有生产者和消费者，他们都有引用，任何生产者/消费者都可以请求关闭，设置一个标志，然后全部检查标志，或响应 InterruptedException 和manager 向他们每个人发送一个中断。

# c++ - 将 STL 映射打印为表格

> ID：15553413
> 
> 赞同：0
> 
> 时间：2013-03-21T16:49:39.583
> 
> 标签：c++, printing, stl, hashmap

我有一个定义为的地图`map<string, vector<double> >`。

如何将其打印为表格。我希望地图的键是表格的标题行，表格的每一列都是`vector`

说我的初始地图是

```
hash = {
  "a": [1, 2, 3],
  "b": [1, 2, 3]
} 
```

我希望这个打印为

```
a b
1 1
2 2
3 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:30:09.243

灵活用于任意列和变体长度

```
void print(const map<string, vector<double>> &m)
{
    size_t rows = 0;
    for (auto const &i : m)
    {
        cout << i.first << ' ';
        if (i.second.size() > rows)
            rows = i.second.size();
    }
    cout << endl;
    for (size_t r = 0; r < rows; ++r)
    {
        for (auto const &i : m)
            if (r < i.second.size())
                cout << i.second[r] << " ";
            else
                cout << "  ";
        cout << endl;
    }
}
int main()
{ 
    map<string, vector<double> > m = {
        { "a", { 1, 2, 3}},
        { "b", { 1, 2, 3, 4}},
        { "c", { 1, 2}},
        { "d", { 1}},
        { "e", { 1, 2, 3, 4, 5, 6, 7}}
    };
    print(m);
} 
```

输出

```
 a b c d e
 1 1 1 1 1
 2 2 2   2
 3 3     3
   4     4
         5
         6
         7 
```

[实时](http://liveworkspace.org/code/2UWGlz%242)源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:56:23.870

这是使用 C++11 的可能实现（这里我希望**所有向量都具有相同的大小**）：

```
#include <map>
#include <string>
#include <vector>
#include <iostream>

void print(std::map<std::string, std::vector<double>> const& m)
{
    // Do nothing for an empty table...
    if (m.begin() == m.end()) { return; }

    for (size_t i = 0; i <= m.begin()->second.size(); i++)
    {
        for (auto const& p : m)
        {
            if (i == 0) { std::cout << p.first << " "; }
            else { std::cout << p.second[i - 1] << " "; }
        }

        std::cout << std::endl;
    }
}

int main()
{
    std::map<std::string, std::vector<double>> m = {
        { "a", { 1, 2, 3, 0 } },
        { "b", { 2, 4, 6, 1 } },
        { "c", { 9, 2, 3, 2 } }
    };

    print(m);
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/yJL1f%2482)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:40:08.943

这适用于不同长度的向量：

```
#include <iostream>
#include <map>
#include <vector>
#include <string>

using namespace std;

int main()
{

    map<string,vector<double> > hashes;
    double arr[]={1,2,3};
    double arr2[]={1,2,3,4};
    hashes.insert(pair<string,vector<double> >("a",vector<double>(arr,arr+sizeof(arr)/sizeof(double))));
    hashes.insert(pair<string,vector<double> >("b",vector<double>(arr,arr+sizeof(arr)/sizeof(double))));
    hashes.insert(pair<string,vector<double> >("c",vector<double>(arr2,arr2+sizeof(arr2)/sizeof(double))));

    for(auto i: hashes)
    {
        cout<< i.first << ' ';
    }
    cout << endl;
    int max_len=0;
    for(auto i: hashes)
    {
    if(i.second.size()>max_len) max_len=i.second.size();
    }
    for(int h=0; h<max_len; h++)
    {

    for(auto i: hashes)
    {
        if(h>=i.second.size()) cout << "  ";
        else cout << i.second[h] << " ";
    }
    cout << endl;
}
return 0;
} 
```

输出：

```
a b c
1 1 1
2 2 2
3 3 3
    4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:11:59.500

```
#include <iostream>
#include <map>
#include <string>
#include <vector>
using namespace std;

int main()
{
    map<string, vector<double> > m;
    vector<double> a, b, c;
    for (int i = 0; i < 4; ++i) a.push_back(i);
    for (int i = 0; i < 6; ++i) b.push_back(i);
    for (int i = 0; i < 7; ++i) c.push_back(i);
    m["a"] = a;
    m["b"] = b;
    m["c"] = c;

    int n = max(max(a.size(), b.size()), c.size());
    for (map<string, vector<double> >::iterator i = m.begin(); i != m.end(); ++i)
        cout << i->first << ',';
    cout << endl;

    for (int i = 0; i < n; ++i) {
       for (map<string, vector<double> >::iterator it = m.begin(); it != m.end(); ++it)
           cout << (i < it->second.size() ? it->second[i] : 0) << ',';
       cout << endl;
    }
} 
```

我相信有更好的方法来进行迭代和处理尾随`,`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T17:32:16.743

此解决方案适用于任意数量的列，每列具有任意数量的行。

列名也具有任意长度。

```
#include <map>
#include <string>
#include <vector>
#include <iostream>

void print(std::map<std::string, std::vector<double>> const& m)
{
    std::vector<size_t> columnWidths;
    std::vector< std::vector<std::string>> columns;
    size_t totalRows = 0;

    // Store all table elements, and the required width of each column
    for ( auto a : m )
    {
       std::vector<std::string> column;
       size_t width = a.first.length();
       column.push_back( a.first );
       size_t rows = 1;

       for ( auto v : a.second )
       {
          ++rows;
          std::string entry = std::to_string(v);
          width = std::max( width, entry.length() );
          column.push_back( entry );
       }
       columnWidths.push_back( width );
       columns.push_back( column );
       totalRows = std::max( totalRows, rows );
    }

    // Print all table elements
    for ( size_t row = 0; row != totalRows; ++row )
    {
        for ( size_t col = 0; col != columns.size(); ++col )
        {
            std::string entry;
            if ( columns[col].size() > row )
            {
                entry = columns[col][row];
            }
            entry.resize( columnWidths[col], ' ' );
            std::cout << entry << ' ';
        }
        std::cout << '\n';
    }
}

int main()
{
    std::map<std::string, std::vector<double>> m =
    {
        { "a", { 1, 2, 3} },
        { "a really really long string", { 1, 2, 3} },
        { "b", { 1, 2, 3, 4, 5 } }
    };

    print(m);
} 
```

# microdata - 有没有办法为具有汇总评级的单个评论格式化微数据？

> ID：15553417
> 
> 赞同：0
> 
> 时间：2013-03-21T16:49:48.233
> 
> 标签：microdata

我一生都无法弄清楚如何为具有单个评论但具有多个评级的页面构建微数据，以便谷歌能够正确解释它。

这是一些示例标记，这似乎是合法的，但谷歌忽略了评级部分：

```
 <div itemscope itemtype="http://data-vocabulary.org/Product">
  <span itemprop="name">Executive
    Anvil</span>
<span itemprop="review" itemscope itemtype="http://data-vocabulary.org/Review-aggregate"><span itemprop="rating">4.4</span> stars, based on <span itemprop="count">89 </span> votes</span>
 <div itemscope itemtype="http://data-vocabulary.org/Review">
<span itemprop="itemreviewed">Executive
    Anvil</span>
    Reviewed by <span itemprop="reviewer">Ulysses Grant</span> on
    <time itemprop="dtreviewed" datetime="2009-01-06">Jan 6</time>.
    <span itemprop="summary">Delicious, tasty pizza in Eastlake!</span>
    <span itemprop="description">L'Amourita serves up traditional wood-fired Neapolitan-style pizza, 
      brought to your table promptly and without fuss. An ideal neighborhood pizza joint.</span>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:21:35.220

Never mind! It turns out I should be using schema.org.

# mysql - SQL 查询：检索具有重叠的现有日期期间

> ID：15553422
> 
> 赞同：2
> 
> 时间：2013-03-21T16:49:58.640
> 
> 标签：mysql, sql

我遇到了一个非常复杂的产品/可用性问题，我无法解决，而且我在任何地方都没有找到任何类似的问题。

表“**产品**”：

```
- id
- name 
```

表“**期**”：

```
- id
- start (Date)
- end (Date)
- price (int)
- product_id 
```

在我的情况下，一个**产品**可以与多个**时期**相关联，即使在相同的日期范围内（开始/结束）。

*示例：*对于产品“ **A** ”

期间 1)**开始**: 2013-01-01 || **结束**: 2013-01-07 || **价格**：200

期间 2)**开始**: 2013-01-07 || **结束**: 2013-01-14 || **价格**：250

期间 3)**开始**: 2013-01-07 || **结束**: 2013-01-10 || **price** : 100 ## 包含在上述期间（2）中

期间 4)**开始**: 2013-01-10 || **结束**: 2013-01-14 || **price** : 200 ## 包含在上面的期间（2）中

第 5 期）**开始**：2013-01-11 || **结束**: 2013-01-14 || **价格**: 150 ## 包含在上述期间（2）中

我需要做的是检索给定日期范围内的所有产品及其价格。

**用户会搜索什么，以及我想要获得什么：**

*   搜索 2013-01-01 和 2013-01-07 之间的产品：它应该返回产品**A**和 200 的价格（周期 1）。

*   **在2013-01-02**和 2013-01-07之间搜索：它不应该**返回**产品**A**，因为没有完全包含期间（缺少 2013-01-01 天）。

*   在 2013-01-07 和 2013-01-14 之间搜索（最复杂的情​​况）：它应该返回产品**A**，有“两个”可能的时期：（2）和（3 + 4）。但它不应该返回期间（3+5），因为 2013-01-10 天有一个“洞”。

我也希望能够检索到最低价格。在上面的第三种情况下，它应该返回 250，因为 (2) 价格低于 (3+4) 价格。

任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:54:53.780

这不是解决方案，但评论太长了。

您要求做的事情在 SQL 中几乎是不可能的，而在编程语言中则非常困难。为了解决这个问题，您需要找到两个日期之间所有可能的时间“平铺”。平铺是单独的记录，平铺是涵盖时间段的一组记录。

问题是有许多不同的可能解决方案，所有的大小都不同。

在支持递归的编程语言中，您可能会采用动态编程方法。这基本上将从任何时期开始，然后递归解决问题，然后考虑下一个时期（深度优先方法）。这在 SQL 中并不容易实现。

也许对这个问题有额外的限制，这会使这个问题更容易处理。或者，也许其他人会以不同的方式理解它并看到解决方案（这将非常有趣）。不过，我的观点是，这在 SQL 中是不值得做的，除非您可以进一步限制问题。

# bash - 一次重命名多个目录

> ID：15553425
> 
> 赞同：0
> 
> 时间：2013-03-21T16:50:03.690
> 
> 标签：bash, shell, dir

我有一堆目录，例如

```
2013_03_12_18_26_am
2013_03_12_18_26_cu
2013_03_12_18_26_ig
2013_03_12_18_26_mdf
2013_03_12_18_26_pih
2013_03_12_18_26_tn
2013_03_12_18_26_an
2013_03_12_18_26_cv
2013_03_12_18_26_ik
2013_03_12_18_26_mhr
2013_03_12_18_26_pnb    
2013_03_12_18_26_to 
```

我想要做的是将它们重命名为最后两个字符，例如：2013_03_12_18_26_am 到 am，我知道我可以一个一个地做到这一点，`mv 2013_03_12_18_26_am am`但这需要很长时间。这可以从 shell 脚本中实现吗？

我希望最后一个“_”之后的所有内容都是新目录的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:57:31.333

我注意到这些目录名称没有空格或其他特殊字符。所以你可以尝试：

```
ls|xargs -n1 |sed -r 's/(.*_)(.*)/mv & \2/' 
```

为您打印`mv`cmd。如果您认为所有命令都是正确的，那么您只需将其传递给`|sh`

请注意，`ls`您可以更改部分以仅获取那些目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:56:12.527

如果所有目录都遵循上述形式，那么在 bash 中，您可以使用以下变量替换来提取最终后的字符`_`

```
var=2013_03_12_18_26_am
echo ${var##*_} #am 
```

然后，您可以使用以下命令重命名文件夹中的所有目录：

```
for dir in *_*; do #as there may be more than 2 chars after final _
    new_dir=${dir##*_}
    mv $dir $new_dir
done 
```

当然，您需要添加检查以确保您只是在移动目录并且没有覆盖任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:56:22.153

```
 for d in *_??
 do
     newd=$(expr $d : '.*_\([a-z][a-z]*\)')
     mv $d $newd
 done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T16:58:45.283

这假设所有（并且只有所有）文件夹都在一个目录中。所以要小心...

原来的：

```
marks-mac-pro:test mstanislav$ ls
2013_03_12_18_26_am 2013_03_12_18_26_an 2013_03_12_18_26_cu 2013_03_12_18_26_cv     2013_03_12_18_26_ig 2013_03_12_18_26_ik 2013_03_12_18_26_mdf    2013_03_12_18_26_mhr    2013_03_12_18_26_pih    2013_03_12_18_26_pnb    2013_03_12_18_26_tn 2013_03_12_18_26_to 
```

外壳脚本：

```
marks-mac-pro:test mstanislav$ for i in `ls .`; do NEW=`echo $i | cut -d_ -f6`; mv $i $NEW; done 
```

结果：

```
marks-mac-pro:test mstanislav$ ls
am  an  cu  cv  ig  ik  mdf mhr pih pnb tn  to 
```

请在使用真实数据之前进行测试，以确保。同样，仅在仅包含要重命名的文件夹的目录中执行此操作，或重新编写第一部分以使**ls** 更具体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T17:21:48.013

我喜欢这个重命名命令，它允许像这样的 perl regexp：

```
rename 's/.*([a-z]{2})$/$1/' * 
```

# mercurial - 在 SmartGit/Hg 中，如何将现有的 mercurial 存储库引用为另一个的克隆？

> ID：15553430
> 
> 赞同：3
> 
> 时间：2013-03-21T16:50:22.413
> 
> 标签：mercurial, clone, smartgit

我在 MacHg 中克隆了一个 mercurial 存储库，但我更喜欢 SmartGit/SmartHg 的 UI，并且宁愿在 SmartHg 中管理这些。

我在 SmartHg 中成功打开了原始存储库和克隆存储库，但我无法在它们之间推/拉。在 MacHg 中，执行此操作的方法似乎是创建一个包含存储库的文档，然后执行 Repository > Incoming（或 Repository > Outgoing）以将另一个存储库引用为源或克隆，因此，可以在存储库之间进行推送和拉取.

在 SmartGit/Hg 中如何做到这一点？

谢谢！

# ruby-on-rails - 用 ( ) 内的 Ruby 字符串中的值替换数组，而不是 [ ]

> ID：15553432
> 
> 赞同：0
> 
> 时间：2013-03-21T16:50:30.780
> 
> 标签：ruby-on-rails, ruby, facebook, substitution, koala

如果您执行以下操作：

```
1.9.3p194 :005 > array = [ 1, 2] 
 => [1, 2] 
1.9.3p194 :007 > puts "Array when output in \"\" is #{array}" 
Array when output in "" is [1, 2] 
 => nil 
```

我可以做点什么，这样输出是：

```
Array when output in "" is (1, 2) 
```

我想这样做，因为我目前正在开发一个 Facebook 应用程序，我正在使用 Koala 执行此 FQL 查询：

```
SELECT uid,name FROM user WHERE uid IN ( 11111119, 1022222255) 
```

上述 FQL 查询在 Facebook 提供的 Graph API Explorer 中运行良好。但是，在我的应用程序源代码中，我有一个这样的 UID 数组（例如 11111119 和 1022222255 这里。）

如何打印内部数组的值`()`而不是`[]`.
如果有任何不清楚的地方，请告诉我，如果问题很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:54:14.600

一个简单的方法是：

```
array = [1, 2]
puts "Array when output in \"\" is (#{array.join(', ')})" 
```

由于您正在构建查询，因此您需要确保每个 UID 都是纯数字的，以防止 SQL 注入式攻击。

# installation - Wix 安装文件提升权限

> ID：15553433
> 
> 赞同：0
> 
> 时间：2013-03-21T16:50:31.587
> 
> 标签：installation, wix, wix3.5, vdproj

我有一个`WiX`项目，它在位于`ProgramFiles`.

运行这些可执行文件之一时会出现问题。其中一些需要执行`Administrator`以完成它应该完成的所有任务。如果我右键单击它并以管理员身份运行它，它运行良好。但我希望 WiX 自行提升对我文件的权限。

有什么办法吗？

我试过这样做：

```
<Package Id="$(var.GUID_Package)"
         InstallPrivileges="elevated"
         InstallScope="perMachine" ...> 
```

和：

```
<Property Id="MSIUSEREALADMINDETECTION" Value="1" /> 
```

但这两个选项仅适用于`.msi`软件包（不适用于已安装的文件）。

**注意：**我认为我没有正确解释自己......我的问题来自我安装的文件的权限。由于权限，我无法正确执行它们。当我以管理员身份运行它们时，显然，所有权限都可以正确执行。所以我必须做的是更改我遇到问题的每个文件的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:08:29.230

您在安装程序中执行的任何操作都无法解决此问题。

如果 exe 正在执行一次性设置，例如修改 Prog 文件目录中的文件/文件夹，请考虑将其移动到 wix 安装程序中。

如果它是每次运行时都发生的事情，那么您将需要确定它正在做什么并尝试改变，以便它以不需要提升的方式进行。如果不可能，恐怕您将不得不提升。帮助此的唯一其他方法是将本地计算机策略设置为[自动提升管理员权限](http://www.howtogeek.com/howto/windows-vista/disable-user-account-controluac-for-administrators-only/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:11:23.783

您可以选择将您的 msi 转换为 exe，当用户执行 exe 时，它​​将提示用户以管理员身份运行。

我正在使用[dontnetinstaller](http://dblock.github.com/dotnetinstaller/)并且它工作得很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T18:06:06.733

对于那些可能感兴趣的人，我找到了解决方案。

起初，我在我的`.wxs`项目中添加了对 的引用`WixUtilExtension`，您可以在 WiX 文件夹中找到它。

您还可以将其添加为外部引用，如下所示：

```
xmlns:util="http://schemas.microsoft.com/wix/UtilExtension" 
```

之后，我可以在本地使用`PermissionEx`：

```
 <File Id="$(var.productFamily)$(var.productSummary)"
      Name="$(var.productFamily)$(var.productSummary).exe"
      DiskId="1" KeyPath="yes"
      Source="$(var.release)$(var.productFamily)$(var.productSummary).exe" >
      <util:PermissionEx User="Everyone" GenericAll="yes" ChangePermission="yes" />
  </File> 
```

这样我就可以提升他们的权限。

# html - 背景重复-x 搞砸了 Tumblr 主题

> ID：15553439
> 
> 赞同：1
> 
> 时间：2013-03-21T16:50:40.663
> 
> 标签：html, css, tumblr

[http://lt-chocolate.tumblr.com/](http://lt-chocolate.tumblr.com/)

我刚刚在我的标题标签中添加了带有背景的标题文本，而顶部的背景图像非常不稳定。无论如何我可以解决这个问题吗？

这是我现在用于正文和标题的 css。

```
html, body {

font-family: Georgia, "Times New Roman", Times, serif;
font-size: 12px;
color: #351F14;
background-color: #E6D0A1;
background-image: url('http://static.tumblr.com/pvgoybd/UEfmk0nj3/background_02.png');
background-repeat: repeat-x;

}
#masthead {
    max-width: 1400px;
    min-height: auto;
    position: relative;
    bottom: 8px;
    left: 82px;
}
#masthead h1 {
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 48px;
    color: #F2EBD9;
    font-weight: bold;
    background-color: #4F3117;
    max-width: 401px;
    min-height: 62px;
    padding-left: 30px;
    margin-left: 30px;
    position: relative;
    bottom: 7px;
} 
```

有什么我应该做的让它看起来更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:59:35.943

您已将背景设置为两者`html`，`body`因此您会看到两次。

# gtk - Gtk 音频播放器。如何在歌曲结束前停止声音

> ID：15553441
> 
> 赞同：3
> 
> 时间：2013-03-21T16:50:43.587
> 
> 标签：gtk, audio-player, portaudio, libsndfile

我正在开发一个非常简单的音频播放器。它使用 Gtk 和 portaudio/libsndfile。我用浏览、播放等几个按钮创建了一个简单的测试界面。我的播放器正确选择了文件名，按下播放后开始播放。但是一切都在等待播放完成。没有什么是活跃的，我想知道如何在它自己完成之前阻止它。

我的 Gtk 代码是：

```
#include <stdio.h>
#include <gtk\gtk.h>
static GtkWidget *window;
const char *filename;

static void play_file (GtkButton *button, gpointer data)
{
    sndFile_play(filename);
}
static gboolean delete_event( GtkWidget *widget,
                              GdkEvent  *event,
                              gpointer   data )
{
    return FALSE;
}

static void destroy( GtkWidget *widget,
                     gpointer   data )
{
    gtk_main_quit ();
}

int main( int   argc,
          char *argv[] )
{

    GtkWidget *button;
    GtkWidget *box1;

    gtk_init (&argc, &argv);

    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title (GTK_WINDOW (window), "MyPlayer");

    g_signal_connect (window, "delete-event",
              G_CALLBACK (delete_event), NULL);

    g_signal_connect (window, "destroy",
              G_CALLBACK (destroy), NULL);

    gtk_container_set_border_width (GTK_CONTAINER (window), 20);

    box1 = gtk_hbox_new (FALSE, 0);
    gtk_container_add (GTK_CONTAINER (window), box1);

    button = gtk_button_new_with_label ("Browse...");
    g_signal_connect (button, "clicked",
        G_CALLBACK (browse_clicked), NULL); //not given here
    gtk_box_pack_start (GTK_BOX(box1), button, TRUE, TRUE, 0);
    gtk_widget_show (button);

    button = gtk_button_new_with_label ("Play");
    g_signal_connect (button, "clicked",
        G_CALLBACK (play_file), NULL);
    gtk_box_pack_start (GTK_BOX(box1), button, TRUE, TRUE, 0);
    gtk_widget_show (button);

    gtk_widget_show (box1);
    gtk_widget_show (window);

    gtk_main ();

    return 0;
} 
```

如果有必要，我会给出播放声音的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <portaudio.h>
#include <sndfile.h>

#define FRAMES_PER_BUFFER (1024)
#define PA_SAMPLE_TYPE  paInt16
typedef short SAMPLE;
#define BUFFER_LEN  128
#define MAX_CHANNELS 2

int sndFile_play (const char *infilename){
    PaStreamParameters outputParameters;
    PaStream *stream;
    PaError err;
    static short data[BUFFER_LEN];
    SNDFILE      *infile;
    SF_INFO     sfinfo;
    sf_count_t  readcount;
    int channels;
    int srate;

    err = Pa_Initialize();

    if ( !( infile = sf_open( infilename, SFM_READ, &sfinfo ) ) ) {
        printf ("Not able to open input file %s.\n", infilename);
        puts (sf_strerror (NULL));
        return  1;
    }

    if ( sfinfo.channels > MAX_CHANNELS ){
        printf ("Not able to process more than %d channels\n", MAX_CHANNELS);
        return  1;
    }
    /* FILE INFO */

    channels = sfinfo.channels; // убрать channels
    printf("number of channels %d\n", sfinfo.channels);

    srate = sfinfo.samplerate; //убрать 
    printf("sample rate %d\n", sfinfo.samplerate);

    outputParameters.device = Pa_GetDefaultOutputDevice();
    outputParameters.channelCount = sfinfo.channels;
    outputParameters.sampleFormat =  PA_SAMPLE_TYPE;
    outputParameters.suggestedLatency = Pa_GetDeviceInfo( outputParameters.device )->defaultLowOutputLatency;
    outputParameters.hostApiSpecificStreamInfo = NULL;

    printf("Begin playback.....\n"); fflush(stdout);
    err = Pa_OpenStream(
        &stream,
        NULL,
        &outputParameters,
        sfinfo.samplerate,
        FRAMES_PER_BUFFER,
        paClipOff,
        NULL,
        NULL );

    if( stream ) {

        err = Pa_StartStream( stream );
        printf("Waiting for playback to finish....\n"); fflush(stdout);

        while ( ( readcount = sf_read_short( infile, data,  BUFFER_LEN*sfinfo.channels ) ) ){
            err = Pa_WriteStream( stream, data, BUFFER_LEN );
        }

        err = Pa_CloseStream( stream );
        printf("Done.\n"); fflush(stdout);

    }

    sf_close( infile );

    Pa_Terminate();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:10:07.977

你的代码

```
while ((readcount = sf_read_short( infile, data,  BUFFER_LEN*sfinfo.channels ) ) ){
    err = Pa_WriteStream( stream, data, BUFFER_LEN );
} 
```

正在阻止 Gtk 主循环继续进行。对于 GUI 应用程序，您不能在回调中长时间运行 while 循环，否则 GUI 将冻结。有几个解决方案

1）使用类似的东西在while循环内驱动运行循环

```
...

while (gtk_events_pending ()) {
    gtk_main_iteration ();
}

... 
```

这意味着每次执行音频循环时，都会处理所有已建立的 gtk 事件。

2）从空闲回调驱动音频。这允许 GUI 正常工作，然后当它不忙时，将调用您的音频回调，您可以播放下一个缓冲区。

3) 在单独的线程中驱动音频循环。这将允许 GUI 在主线程上正常工作，并且音频只会播放。这承载了线程编程的所有标准危险

4) Portaudio 有一个异步回调驱动模型。使用它，当 Portaudio 需要更多数据时，将调用您的音频回调。这也很困难，因为您不应该在该回调中进行文件访问或内存分配。更多细节在这里：[Portaudio 回调文档](http://portaudio.com/docs/v19-doxydocs/writing_a_callback.html)。

老实说，这个基础级别的音频编程很复杂，我建议您使用像（例如）[GStreamer](http://gstreamer.net)这样的框架，它已经解决了所有这些复杂性。

# javascript - 如果电子邮件输入字段有效，如何仅使用 onClick？

> ID：15553443
> 
> 赞同：6
> 
> 时间：2013-03-21T16:50:51.367
> 
> 标签：javascript, html, validation

这是代码：

```
<input id="subscribe-email" type="email" placeholder="john.doe@example.com" />
            <button type="submit" id="subscribe-submit" onClick="javascript:omgemailgone();" /> 
```

仅当电子邮件有效（由用户代理验证，无需额外验证）时，如何检查和运行 JS 功能？

更新。新的浏览器可以自己验证input=email，也有伪类:valid 和:invalid。仅当浏览器“知道”该电子邮件有效时，我才需要运行功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T21:51:40.133

You can use the `.checkValidity()` method of the **input element** (in this case, the email input field). This will return a boolean indicating wether the input is valid or not. Here is a fiddle to play with:

[http://jsfiddle.net/QP4Rc/4/](http://jsfiddle.net/QP4Rc/4/)

And the code:

```
<input id="subscribe-email" type="email" required="required" placeholder="john.doe@example.com" />

<button type="submit" id="subscribe-submit" onClick="check()">
click me
</button>

function check()
{
  if(!document.getElementById("subscribe-email").checkValidity())
  {

    //do stuff here ie. show errors
    alert("input not valid!");

  }else
  {
      callMeIfValid();
  }
}

function callMeIfValid()
{
  //submit form or whatever
  alert("valid input");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:57:01.550

您可以使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)来检查您的电子邮件是否有效`omgemailgone()`：

```
function omgemailgone (){
   var mail = $('#subscribe-email').val();

   //Example of regular expression
   if(mail.match(/YourRegexp/)
   {
      //Do stuff
   }
   else alert("Invalid e-mail");

} 
```

*（在这里使用 jQuery）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T16:57:44.020

check [Validate email address in JavaScript?](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript) for validation and then implement it into an if statement in your omgemailgone method (if valid continue, else do nothing)

edit:

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

from the link

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:57:43.433

你需要一个验证电子邮件并返回真或假的函数 验证 [JavaScript 中的电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

```
<button type="submit" id="subscribe-submit" onClick="javascript:validateEmail(document.getElementById('subscribe-email').value) ? omgemailgone() : alert('email is wrong dude');" /> 
```

这是一个快速的解决方案，我建议您正确执行，不要使用内联 onclick js

# wpf - 找不到名为“X”的资源，为什么不呢？

> ID：15553446
> 
> 赞同：12
> 
> 时间：2013-03-21T16:50:52.710
> 
> 标签：wpf, xaml, mvvm

我想为库存管理创建一个向导 UI。xaml 中的相关行是：

```
<ContentPresenter Content="{Binding Current}" ContentTemplateSelector="{StaticResource inventorySelector}"/> 
```

“Current”是当前活动的视图模型，AvailableInventoriesViewModel、GroupsViewModel、NewArticlesViewModel、ResultViewModel 之一。我这样定义的 DataTemplateSelector：

```
using System.Diagnostics;
using System.Windows;
using System.Windows.Controls;
using Centron.WPF.WarehousingExtension.InventoryModule.ViewModels.WizardViewModels;

namespace Centron.WPF.WarehousingExtension.InventoryModule.UI.DataTemplateSelectors
{
    public class InventoryDatatemplateSelector : DataTemplateSelector
    {
        public DataTemplate AvailableDatatype { get; set; }
        public DataTemplate GroupsDatatype { get; set; }
        public DataTemplate NewDatatype { get; set; }
        public DataTemplate ResultDatatype { get; set; }

        public InventoryDatatemplateSelector()
        {
            Debug.WriteLine("");
        }

        public override DataTemplate SelectTemplate(object item, DependencyObject container)
        {
            if (item is AvailableInventoriesViewModel)
                return AvailableDatatype;
            else if (item is GroupsViewModel)
                return GroupsDatatype;
            else if (item is NewArticlesViewModel)
                return NewDatatype;
            else return ResultDatatype;
        }
    }
} 
```

然后我创建 DataTemplates 和 Selector 的实例，如下所示：

```
<base:InventoryViewBase.Resources>
    <DataTemplate DataType="viewModels:AvailableInventoriesViewModel" x:Key="availableInventoriesDatatype">
        <controls:AvailableInventoriesView />
    </DataTemplate>
    <DataTemplate DataType="viewModels:GroupsViewModel" x:Key="groupsDatatype">
        <controls:GroupsView />
    </DataTemplate>
    <DataTemplate DataType="viewModels:NewArticlesViewModel" x:Key="newArticlesDatatype">
        <controls:NewArticlesView />
    </DataTemplate>
    <DataTemplate DataType="viewModels:ResultViewModel" x:Key="resultDatatype">
        <controls:ResultView/>
    </DataTemplate>
    <selector:InventoryDatatemplateSelector
            x:Key="inventorySelector" 
            AvailableDatatype="{StaticResource availableInventoriesDatatype}"
            GroupsDatatype="{StaticResource groupsDatatype}"
            NewDatatype="{StaticResource newArticlesDatatype}"
            ResultDatatype="{StaticResource resultDatatype}"/>
</base:InventoryViewBase.Resources> 
```

我在我的 InventoryDatatemplateSelector 的构造函数中设置了一个断点，并且可以单步执行它，但是在下一个调试步骤中，显然当它尝试设置该选择器实例的第一个属性时，我立即得到一个带有内部异常的异常：

> 找不到名为“availableInventoriesDatatype”的资源。资源名称区分大小写。

怎么回事，为什么明确定义了资源却找不到？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T17:26:55.370

好的，我找到了解决方案。唯一的错误是必须首先设置资源的“Key”属性。所以而不是：

```
 <DataTemplate DataType="viewModels:AvailableInventoriesViewModel" x:Key="availableInventoriesDatatype" >
        <controls:AvailableInventoriesView />
    </DataTemplate> 
```

我需要：

```
 <DataTemplate x:Key="availableInventoriesDatatype" DataType="viewModels:AvailableInventoriesViewModel" >
        <controls:AvailableInventoriesView />
    </DataTemplate> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-21T17:54:53.690

我知道你发现了你的问题，但有一种更简单的方法可以解决这个问题，我认为你应该知道。由于您的每个 DataTemplate 都在处理不同的类，因此您实际上不需要构建 DataTemplateSelector 来执行此操作。如果您只是声明没有键的 DataTemplates，例如：

```
<DataTemplate DataType="{x:Type viewModels:AvailableInventoriesViewModel}">
    <controls:AvailableInventoriesView />
</DataTemplate>
<DataTemplate DataType="{x:Type viewModels:GroupsViewModel}">
    <controls:GroupsView />
</DataTemplate>
<DataTemplate DataType="{x:Type viewModels:NewArticlesViewModel}">
    <controls:NewArticlesView />
</DataTemplate>
<DataTemplate DataType="viewModels:ResultViewModel">
    <controls:ResultView/>
</DataTemplate> 
```

`ContentPresenter`并在不指定的情况下声明您的，`ContentTemplateSelector`例如：

```
<ContentPresenter Content="{Binding Current}" /> 
```

然后将为`Current`设置的任何类型选择适当的 DataTemplate。

这是一个更简洁的解决方案，并且消除了对自定义选择器的需要。

WPF 功能强大且非常灵活，但让您的头脑围绕它可能是一个挑战。但是一旦你明白了它能做什么，我想你会改变你对这件事的看法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T15:57:18.443

这是我的情况 - 我在 DataTemplate 之前声明了 ItemTemplate：

```
<ListBox Name="peopleListBox" Grid.Column="1" Grid.Row="2" 
     ItemsSource="{Binding Source={StaticResource ExpenseDataSource}, XPath=Person}"
     ItemTemplate="{StaticResource nameItemTemplate}">
    </ListBox>

<Grid.Resources>
            <!-- Name item template -->
            <DataTemplate x:Key="nameItemTemplate">
                <Label Content="{Binding XPath=@Name}"/>
            </DataTemplate>          
</Grid.Resources> 
```

然后我只是更改顺序并将 Grid.Resources 放在 Listbox 之前，如下所示，现在一切正常！！！

```
<Grid.Resources>
        <!-- Name item template -->
        <DataTemplate x:Key="nameItemTemplate">
            <Label Content="{Binding XPath=@Name}"/>
        </DataTemplate>          
    </Grid.Resources>

<ListBox Name="peopleListBox" Grid.Column="1" Grid.Row="2" 
     ItemsSource="{Binding Source={StaticResource ExpenseDataSource}, XPath=Person}"
     ItemTemplate="{StaticResource nameItemTemplate}">
    </ListBox> 
```

XAML 不是那么愚蠢吗？:) :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-16T04:58:31.610

在样式嵌套组件的情况下，我会提供更多细节。在此示例中，MainWindowGrid 包含 UserControlGrid 和 PanelGrid。

以下代码将不起作用。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:XeerSoft.UX.Themes">
    <Thickness x:Key="PanelRowMargin">0,0,0,10</Thickness>
    <Thickness x:Key="PanelPadding">10</Thickness>

    <Color x:Key="Primary">#005C9D</Color>
    <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource Primary}"></SolidColorBrush>

    <Color x:Key="Accent">#E3672B</Color>
    <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource Accent}"></SolidColorBrush>

    <Color x:Key="DarkGray">#777777</Color>
    <SolidColorBrush x:Key="DarkGrayBrush" Color="{StaticResource DarkGray}"></SolidColorBrush>

    <Color x:Key="LightGray">#E4E4E4</Color>
    <SolidColorBrush x:Key="LightGrayBrush" Color="{StaticResource LightGray}"></SolidColorBrush>

    <Style x:Key="MainWindowGrid"
           BasedOn="{StaticResource {x:Type Grid}}"
           TargetType="Grid">
        <Setter Property="Background" Value="{StaticResource LightGrayBrush}"/>
    </Style>

    <Style x:Key="GridPanel"
           BasedOn="{StaticResource {x:Type Grid}}"
           TargetType="Grid">
        <Setter Property="Background" Value="White"/>
    </Style>

    <Style x:Key="UserControlPanel"
           BasedOn="{StaticResource {x:Type UserControl}}"
           TargetType="UserControl">
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="{StaticResource DarkGrayBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
    </Style>

</ResourceDictionary> 
```

现在，如果您交换声明顺序以使 MainWindowGrid 排在最后，它将起作用。（外部范围，最后）

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:XeerSoft.UX.Themes">
    <Thickness x:Key="PanelRowMargin">0,0,0,10</Thickness>
    <Thickness x:Key="PanelPadding">10</Thickness>

    <Color x:Key="Primary">#005C9D</Color>
    <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource Primary}"></SolidColorBrush>

    <Color x:Key="Accent">#E3672B</Color>
    <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource Accent}"></SolidColorBrush>

    <Color x:Key="DarkGray">#777777</Color>
    <SolidColorBrush x:Key="DarkGrayBrush" Color="{StaticResource DarkGray}"></SolidColorBrush>

    <Color x:Key="LightGray">#E4E4E4</Color>
    <SolidColorBrush x:Key="LightGrayBrush" Color="{StaticResource LightGray}"></SolidColorBrush>

    <Style x:Key="GridPanel"
           BasedOn="{StaticResource {x:Type Grid}}"
           TargetType="Grid">
        <Setter Property="Background" Value="White"/>
    </Style>

    <Style x:Key="UserControlPanel"
           BasedOn="{StaticResource {x:Type UserControl}}"
           TargetType="UserControl">
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="{StaticResource DarkGrayBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
    </Style>

    <Style x:Key="MainWindowGrid"
           BasedOn="{StaticResource {x:Type Grid}}"
           TargetType="Grid">
        <Setter Property="Background" Value="{StaticResource LightGrayBrush}"/>
    </Style>
</ResourceDictionary> 
```

# regex - Yahoo Pipes - 匹配前删除所有单词或标签

> ID：15553447
> 
> 赞同：-2
> 
> 时间：2013-03-21T16:50:53.950
> 
> 标签：regex, url, match, matching, yahoo-pipes

例如，我有一些提要，带有这样的项目标题

**有些文本比一个文本更好[http://t.co/blablabla](http://t.co/blablabla) #hashtag**

然后我想只使用这样的正则表达式获取 URL

[http://t.co/blablabla](http://t.co/blablabla)

我怎么做 ？

（对不起，我用谷歌翻译提出这个问题）

谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:22:06.970

这是我通过简单的谷歌搜索找到的随机一个：

(http|ftp|https)://([\w-_]+(?:(?:.[\w-_]+)+))([\w-.,@?^=%&: /~+#]*[\w-\@?^=%&/~+#])?

# button - 弹出按钮如下所示

> ID：15553448
> 
> 赞同：0
> 
> 时间：2013-03-21T16:50:54.350
> 
> 标签：button, popup, javafx

我想在 JavaFX 中创建特定的组件。在 onClick 事件之后显示弹出窗口的按钮。

情景：

1.  点击按钮

2.  弹出显示下方按钮（如图所示）

![在此处输入图像描述](../Images/0dce1e7a7379a6ede6ebe3387c0704db.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T23:30:55.333

回答完这个问题后，我意识到它是[JavaFX 2 custom popup pane](https://stackoverflow.com/questions/12717969/javafx-2-custom-popup-pane)的副本，它在一些答案中有更多的上下文信息。

使用[MenuButton](http://docs.oracle.com/javafx/2/api/javafx/scene/control/MenuButton.html)并在附加到 MenuButton 的 menuItem 中，为要在弹出窗口中显示的内容设置图形。

```
final MenuItem wizPopup = new MenuItem();
wizPopup.setGraphic(wizBox);

final MenuButton popupButton = new MenuButton("frobozz");
popupButton.getItems().setAll(
  wizPopup            
); 
```

这是一个完整的[可执行示例](https://gist.github.com/jewelsea/5217750)。

![威兹普](../Images/003420dc99876de1817d7b1e32c1188a.png)

# iis - IIS 7.5 URL 重写 2.0 到 HTML 页面

> ID：15553449
> 
> 赞同：1
> 
> 时间：2013-03-21T16:50:58.743
> 
> 标签：iis, url-rewriting, iis-7.5

我有以下规则：

```
 <rewrite>
        <rules>
            <rule name="FlowURLs">
                <match url="^flows/[_0-9a-zA-Z-]+/[_0-9a-zA-Z-]+/([._0-9a-zA-Z-]+)" />
                <action type="Rewrite" url="music.html?flow={R:1}" />
            <conditions logicalGrouping="MatchAny">
                    <add input="{URL}" pattern="^.*\.(ashx|axd|css|gif|png|jpg|jpeg|js|flv|f4v|html)$" negate="true" />
            </conditions>
            </rule>
        </rules>
    </rewrite> 
```

我想要做的是，如果一个 url 传入如下内容：

```
http://localhost/flows/t/twit_nobone/twit_nobone1354334226132.mp3 
```

我想将其重写为：

```
http://localhost/music.html?id=twit_nobone1354334226132.mp3 
```

music.html 位于根目录中，它有一个样式表、javascript 和图像。我看到的问题是，当它重写时，没有显示图像、js 或样式表。当我检查资源时，看起来链接现在

```
http://localhost/flows/t/twit_nobone/twit_nobone1354334226132.mp3/demo.css
http://localhost/flows/t/twit_nobone/twit_nobone1354334226132.mp3/images/screenshot.png 
```

代替

```
http://localhost/demo.css
http://localhost/images/screenshot.png 
```

我究竟做错了什么？我还注意到浏览器中的 url 永远不会更改为重写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:09:10.260

你必须有可能如何解决这个问题。

1：如果您想保留地址，请`http://localhost/flows/t/twit_nobone/twit_nobone1354334226132.mp3` 确保其中的任何资源`music.html`都绝对链接，而不是`test.css`从`/path/to/test.css`根服务器创建。然后它将起作用。

2：如果您更喜欢 `http://localhost/music.html?id=twit_nobone1354334226132.mp3` **EDIT 之类的地址**

我刚刚发现这很简单 - 将操作更改为：

```
<action type="Redirect" redirectType="Found" url="music.html?flow={R:1}" /> 
```

# google-app-engine - 将枚举传递给 python 中的 ndb.Model 字段

> ID：15553460
> 
> 赞同：4
> 
> 时间：2013-03-21T16:51:34.893
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore

我发现[如何在 Python 中表示“枚举”？](https://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python)关于如何在 python 中创建枚举。我有一个字段`ndb.Model`，我想接受我的枚举值之一。我是否只是将字段设置为`StringProperty`？我的枚举是

```
def enum(**enums):
    return type('Enum', (), enums)

ALPHA = enum(A="A", B="B", C="C", D="D") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T17:44:30.837

[ProtoRPC Python API](https://developers.google.com/appengine/docs/python/tools/protorpc/)完全支持这一点，不值得自己动手。

一个简单的枚举如下所示：

```
from protorpc import messages 

class Alpha(messages.Enum):
    A = 0
    B = 1
    C = 2
    D = 3 
```

事实证明，`ndb`有`msgprop`用于存储`protorpc`对象的模块，这已[记录在案](https://developers.google.com/appengine/docs/python/ndb/properties#msgprop)。

因此，要存储您的`Alpha`枚举，您需要执行以下操作：

```
from google.appengine.ext import ndb
from google.appengine.ext.ndb import msgprop

class Part(ndb.Model):
    alpha = msgprop.EnumProperty(Alpha, required=True)
    ... 
```

**编辑：正如**[hadware](https://stackoverflow.com/users/1327143/hadware)所指出的， a`msgprop.EnumProperty`默认情况下不被索引。如果要对此类属性执行查询，则需要将属性定义为

```
 alpha = msgprop.EnumProperty(Alpha, required=True, indexed=True) 
```

然后执行查询

```
ndb.query(Part.alpha == Alpha.B) 
```

或使用 以外的任何值`Alpha.B`。

# excel - 如何确定Excel中的列是否匹配？

> ID：15553461
> 
> 赞同：0
> 
> 时间：2013-03-21T16:51:42.077
> 
> 标签：excel, match, excel-formula

我有 4 列我想相互匹配。姓氏数据库，名字数据库，姓氏，名字。我想使用一个公式，如果姓氏和名字匹配，它将简单地输出是或否。下面是数据和所需输出的示例。

![在此处输入图像描述](../Images/1248e92552a5d04b1ecf0573012f0df1.png)

期望的输出： ![在此处输入图像描述](../Images/2749228fb29dbbdd891a15bd936a9ec0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:54:12.890

如果您喜欢常规公式，请将其向下拖动：

```
=IF(AND(A2=D2, B2=E2), "Y", "N") 
```

如果您喜欢[数组公式](http://office.microsoft.com/en-us/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)，请为整列输入此公式：

```
=IF(A2:A12=D2:D12,IF(B2:B12=E2:E12,"Y","N"),"N") 
```

# php - 在 XML 文件中保存检查状态复选框 html

> ID：15553466
> 
> 赞同：0
> 
> 时间：2013-03-21T16:52:00.100
> 
> 标签：php, html

我想用html制作一个简单的清单。

`<input type="checkbox" name="" value=""> <br>`

它不会是一个庞大的列表。
但问题是，当然，它不会被保存，除非它被存储在持久性中。
虽然我可以添加到 MySQL 数据库的连接，但这次我根本不想使用 MySQL。
所以我打算将这些复选框状态保存在一个永久文件中。
不上`$_SESSION`。你知道我该怎么做吗？

# php - 上传大文件时出现 PHP 致命错误

> ID：15553467
> 
> 赞同：0
> 
> 时间：2013-03-21T16:52:04.310
> 
> 标签：php, codeigniter, file-upload

我目前正在使用 PHP CodeIgniter 框架并有一个图像上传表单。当我上传小文件时，脚本运行没有任何问题，但是当我选择一个文件时，假设要上传 3mb，脚本没有运行，进入一个页面并显示“页面加载失败”。我检查了 php 日志和 apache 日志。PHP 日志给出了这个错误。

```
PHP Fatal error: 
Allowed memory size of 33554432 bytes exhausted
(tried to allocate 20736 bytes) in
/Users/Desktop/localhost/system/libraries/Image_lib.php on line 1155 
```

我想我必须从 CodeIgniter 的配置文件中更改一些设置，这是一个真实的假设吗？

这是我当前用于 PHP 的 php.ini，我认为它不会触发失败。

```
; Maximum allowed size for uploaded files. 
upload_max_filesize = 32M

; Must be greater than or equal to 
upload_max_filesize post_max_size = 32M

max_execution_time = 30     ; Maximum execution time of each script, in seconds
max_input_time = 60 ; Maximum amount of time each script may spend parsing request data
memory_limit = 32M      ; Maximum amount of memory a script may consume (8MB) 
```

但是页面没有加载，然后失败。当我单击提交时，它无法正确处理。

任何提示表示赞赏，在此先感谢。

**编辑：**

现在我在将它们更改为 64M 以及 memory_limit 后收到此错误

```
PHP Fatal error:  Allowed memory size of 67108864 bytes
exhausted (tried to allocate 20736 bytes) in
/Users/Desktop/localhost/system/libraries/Image_lib.php on line 1155 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:57:06.923

这两个指令都将失败，因为文件大小 > 32MB（因为它至少是 33554432 字节）。

```
; Maximum allowed size for uploaded files. 
upload_max_filesize = 32M

; Must be greater than or equal to 
upload_max_filesize post_max_size = 32M 
```

此外，您将需要增加[memory_limit](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:55:11.337

您的内存限制为 32M，并尝试分配更多内存，因此您的脚本失败了。可能您必须使用大图像（image_gd 在内存中保留一个位图，这会消耗大量内存）。你能做的是

*   使用 image_magick 代替 gd
*   增加你的 memory_limit (ie64M 或更多)

# ruby-on-rails - 为什么我在保存前使用 if on 时会得到未定义的方法 `before_save' for false:FalseClass？

> ID：15553471
> 
> 赞同：1
> 
> 时间：2013-03-21T16:52:16.733
> 
> 标签：ruby-on-rails, if-statement, before-save

我正在尝试创建一个`before_save`以将条目的名称设置为它的创建日期，如果它留空的话。我让它与一种方法一起工作，这是我的模型：

```
class Entry < ActiveRecord::Base
  belongs_to :user
  has_many :entry_ingredients
  has_many :ingredients, :through => :entry_ingredients
  before_save :default_name

  accepts_nested_attributes_for :ingredients, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => true

  def default_name
    if self.name.blank?
      self.name = Time.new
    else
      self.name
    end
  end
end 
```

但是，我认为相同的代码似乎在`before_save`. 基本上，我试图这样做`before_save :default_name, :if => self.name.blank?`，然后我的方法会更短，如下所示：

```
def default_name
  self.name = Time.new
end 
```

为什么没有关于`before_save`工作的 if 声明？我收到错误`undefined method`before_save' for false:FalseClass`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:11:00.617

你不能这样做，因为 self.name.blank? 当类第一次被评估时被评估。所以你最终得到 ":if => false" 或 ":if => true" 或发生错误。

```
before_save :default_name, :if => self.name.blank? 
```

在同一个文件中，您有一个如何做到这一点的示例：

```
before_save :default_name, :if => lambda { |entry| entry[:name].blank? } 
```

但是，还有其他选择。[检查文档。](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-callbacks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:11:16.663

你可以这样做：

```
 before_save :default_name

  def default_name
    self.name ||= Time.new
  end 
```

或者：

```
 before_save :default_name, :unless => :name?

  def default_name
    self.name = Time.new
  end 
```

# sql - 表格中出现的身份有差距

> ID：15553472
> 
> 赞同：1
> 
> 时间：2013-03-21T16:52:29.323
> 
> 标签：sql, sql-server, identity

我们已经开始看到在我们的一些表中创建的身份不再是精确顺序的。也就是说，它们仍然会逐渐升高，但价值之间存在很大差距。

例如，序列是 {1,2,3.. .. .. 97,98,99}，然后跳转到 {1092,1093,1094.. .. 1097,1098,1099}，然后是另一个间隙，然后是 { 4231,4232,4233.. .. 4257,4258,4259}。

任何人都可以阐明这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:56:51.133

如果您对具有标识列的表执行插入操作，并且插入失败（出于任何原因），标识值仍会递增，并且下一次插入将留下间隙。此外，如果您删除行，显然会有间隙。

永远不要依赖或使用代理键的实际值或身份，而不是作为“连接值”将一个表中的行连接到另一个表中的行。当然永远不要依赖连续的值序列，甚至不要依赖它们是按时间顺序增加的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:02:51.220

每当您插入带有标识列的表时，它都会增加标识。如果您删除这些行，或者即使您将插入回滚到该表中，标识列也会保持新的增量。

这是一个显示回滚事务效果的脚本：

```
create table #temp (TheKey int identity(1,1), TheValue int)

insert into #Temp (TheValue) values (1)
select max(TheKey) from #Temp  --1 as expected

begin tran 
insert into #Temp (TheValue) values (1)
select max(TheKey) from #Temp  --2 as expected
rollback
select max(TheKey) from #Temp  --1 as expected

insert into #Temp (TheValue) values (1)
select max(TheKey) from #Temp  --3 a little bit of a surprise? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:05:01.997

似乎服务器缓存了性能值，因此如果服务器在断电后重置，那么这些值可能会丢失。见这篇文章。

[服务器重启或其他故障后的连续值](http://msdn.microsoft.com/en-us/library/ms186775.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T17:33:53.023

这是一个已知的错误。您的巨大差距是由故障转移、服务重新启动、重新启动等引起的。

[http://connect.microsoft.com/SQLServer/feedback/details/739013/failover-or-restart-results-in-reseed-of-identity](http://connect.microsoft.com/SQLServer/feedback/details/739013/failover-or-restart-results-in-reseed-of-identity)

在它被修复之前，除了可能有一个启动过程来为所有受影响的表上的标识列重新设定种子之外，您无能为力。

# php - 如何在 PHP 中删除特定的 http 响应标头

> ID：15553480
> 
> 赞同：1
> 
> 时间：2013-03-21T16:52:54.330
> 
> 标签：php

您正在多次设置一些具有相同名称的特定标题。例如

```
header("Set-Cookie: Foo=bar");
header("Set-Cookie: Bar=foo");
header("Set-Cookie: Baz=bob"); 
```

之后你想**只删除**“Set-Cookie: Bar”，而不是其他的。这个怎么做？

`header_remove`在这里不起作用，因为您可以指定名称“Set-Cookie”，但不能指定 Cookie“Set-Cookie: Foo”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:52:54.330

这不好，但它有效：

解决方案是复制所有标题，全部删除，过滤并重新创建。

```
$headers = headers_list();
header_remove(); // removes all headers
foreach($headers as $h) {
    if (!preg_match("/^Set-Cookie: Bar$/", $h)) {
        header($h);
    }
} 
```

# django - 异步芹菜任务正在阻塞主应用程序（也许）

> ID：15553485
> 
> 赞同：1
> 
> 时间：2013-03-21T16:53:10.810
> 
> 标签：django, nginx, celery, varnish

我有一个在 varnish 和 nginx 后面运行的 django 应用程序。每两分钟运行一次周期性任务，访问本地运行的 jsonrpc 守护程序并使用结果更新 django 模型。有时 django 应用程序没有响应，最终出现 nginx 网关失败消息。查看日志似乎发生这种情况时，访问 jsonrpc 守护程序的后端任务也超时。

任务本身非常简单：从 jsonrpc 守护进程请求一个值并保存在 django 模型中，更新现有条目或创建新条目。我认为这里不涉及任何数据库死锁。

我对如何追踪它有点迷失。首先，我不知道任务超时是否导致整个站点超时，或者其他问题是否导致两个超时。毕竟，异步任务中的超时应该不会对网站响应产生任何影响？

# vb.net - VB.NET OpenXML 读取 Excel 文件

> ID：15553491
> 
> 赞同：1
> 
> 时间：2013-03-21T16:53:29.420
> 
> 标签：vb.net, openxml, vb.net-2010, openxml-sdk, xmlreader

我一直在寻找一种有效读取 Excel 文件的方法，并找到了以下用于解析和读取大型电子表格的代码：

公共子 ExcelProcessing()

```
 Dim strDoc As String = "C:\Documents and Settings\Practice.xlsx"
    Dim txt As String

    Dim spreadsheetDocument As SpreadsheetDocument = spreadsheetDocument.Open(strDoc, False)

    Dim workbookPart As WorkbookPart = spreadsheetDocument.WorkbookPart
    Dim worksheetPart As WorksheetPart = workbookPart.WorksheetParts.First()

    Dim reader As OpenXmlReader = OpenXmlReader.Create(worksheetPart)
    Dim text As String
    While reader.Read()

        If reader.ElementType = GetType(CellValue) Then

            text = reader.GetText()
            MessageBox.Show(text)

        End If

    End While 
```

问题是我将 reader.GetText() 分配给我的字符串。传递的值是一个小整数，而实际的单元格值是一个字符串。消息框为每个填充的单元格触发一次，因此这告诉我代码正在查找包含值的单元格；但是，我无法提取单元格的实际“内部文本”。

想法？建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:10:05.937

我找到了答案；我需要引用 sharedstringtable 并从那里拉出内部文本：

```
 Dim strDoc As String = "C:\Documents and Settings\Practice.xlsx"
    Dim txt As String

    Dim spreadsheetDocument As SpreadsheetDocument = spreadsheetDocument.Open(strDoc, False)

    Dim workbookPart As WorkbookPart = spreadsheetDocument.WorkbookPart
    Dim shareStringPart As SharedStringTablePart = workbookPart.SharedStringTablePart

    For Each Item As SharedStringItem In shareStringPart.SharedStringTable.Elements(Of SharedStringItem)()

        MessageBox.Show(Item.InnerText)

    Next 
```

# linux - 如何仅打印 hexdump 中的十六进制值，而不打印行号或 ASCII 表？

> ID：15553493
> 
> 赞同：45
> 
> 时间：2013-03-21T16:53:40.820
> 
> 标签：linux, bash, shell, hexdump

在[UNIX shell 脚本中将十进制转换为十六进制](https://stackoverflow.com/questions/378829/convert-decimal-to-hexadecimal-in-unix-shell-script)

我试图只打印`hex values`from `hexdump`，即不打印行号和 ASCII 表。

但以下命令行不打印任何内容：

```
hexdump -n 50 -Cs 10 file.bin |  awk '{for(i=NF-17; i>2; --i) print $i}' 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-21T17:53:38.197

使用`xxd`更适合这项工作：

```
xxd -p -l 50 -seek 10 file.bin 
```

来自[`man xxd`](https://linux.die.net/man/1/xxd)：

```
xxd - make a hexdump or do the reverse.

    -p | -ps | -postscript | -plain
        output in postscript continuous hexdump style. Also known as plain hexdump style.

    -l len | -len len
        stop after writing <len> octets.

    -seek offset
        When used after -r: revert with <offset> added to file positions found in hexdump. 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-03-21T17:54:15.833

您可以指定要`hexdump`用于输出的确切格式，但这有点棘手。这是默认输出，减去文件偏移量：

```
hexdump -e '16/1 "%02x " "\n"' file.bin 
```

（对我来说，这看起来会在每行的末尾产生一个额外的尾随空格，但由于某种原因它不会。）

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-21T17:15:24.770

作为替代方案，请考虑使用`xxd -p file.bin`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T17:06:13.463

首先，删除`-C`正在发出 ascii 信息的内容。

然后你可以用

```
hexdump -n 50 -s 10 file.bin | cut -c 9- 
```

# ios - 如何在 Facebook 墙上分享文字和图像（目标 C）

> ID：15553495
> 
> 赞同：5
> 
> 时间：2013-03-21T16:53:53.110
> 
> 标签：ios, objective-c, iphone, xcode, uitableview

我正在开发一个应用程序，它让用户可以将他们的应用程序的详细信息分享到 facebook 中。我有 UITableview ，其中包含作者姓名列表，当您单击书名时，它会转到另一个`UITableView`显示该作者的不同书籍的地方`TableViewCell`。我可以在 2nd 中显示列表`UITableView`。我想知道如何分享作者姓名、书名和图片（第二个表格视图详细信息）。我正在展示执行此操作的代码.. 因此，当用户想要分享详细信息时，他将不得不点击`UIButton`author 的每个单元格中的那个`UITableView`。

```
didselectatindexpath

    NSDictionary *selectedAuthor = nil;

     NSArray *sectionArray=[mainIndexDictionary objectForKey:[allKeysArray objectAtIndex:indexPath.section]];
        selectedAuthor = [sectionArray objectAtIndex:indexPath.row];
        iPath=[[selectedAuthor objectForKey:@"SymptIndexID"] intValue];
        NSLog(@"iPath - %d",iPath);

        authortitleString=[[selectedAuthor objectForKey:@"authorIndexName"]stringByAppendingString:@" cure!"];
    }

    bookArray=[objDB customCellData:(NSInteger)iPath];
    [self.view bringSubviewToFront:authorView];
    [bookTableView scrollRectToVisible:CGRectMake(0.0, 0.0, 320.0,10.0) animated:NO];

    [bookTableView reloadData]

; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T19:09:29.670

在 ios 6.0 中您可以实现如下（您必须将[社交框架](https://developer.apple.com/library/ios/documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233)添加到您的项目中）

```
 #import <Social/Social.h>

 - (void)ShareFacebook
 {
    SLComposeViewController *fbController=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{
    SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){

        [fbController dismissViewControllerAnimated:YES completion:nil];

        switch(result){
            case SLComposeViewControllerResultCancelled:
            default:
            {
                NSLog(@"Cancelled.....");
               // [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]];

            }
                break;
            case SLComposeViewControllerResultDone:
            {
                NSLog(@"Posted....");
            }
                break;
        }};

    [fbController setInitialText:@"This is My Sample Text"];

    [fbController setCompletionHandler:completionHandler];
    [self presentViewController:fbController animated:YES completion:nil];
}
else{
    UIAlertView *alert = [[[UIAlertView alloc]initWithTitle:@"Sign in!" message:@"Please first Sign In!" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil, nil]autorelease];
    [alert show];
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:35:24.450

您的问题有点不清楚，但考虑到您已正确实现 FB ios Api 的所有其他方法，您可以使用此代码将文本和图像发布到 Fb

```
SBJSON *jsonWriter = [[SBJSON new] autorelease];

NSDictionary* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       APP_NAME,@"text", fb_app_url,@"href", nil], nil];
NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               APP_NAME, @"name",
                               fb_app_url, @"link",
                               fb_publish_image, @"picture",
                               APP_NAME, @"name",
                               @"Awesome APP", @"caption",
                               [NSString stringWithFormat:@"I am  loving it", GAME_NAME], @"description",
                               @"Get it now!",  @"message",
                               actionLinksStr, @"action_links",
                               nil];

[self.faceBook dialog:@"stream.publish" andParams:params andDelegate:self]; 
```

有关实现 fb api 的更多详细信息，您可以查看

[如何将 Facebook 集成到 iPhone 应用程序](https://stackoverflow.com/questions/11931897/how-to-integrate-facebook-into-iphone-app)[中 在此处输入链接描述](https://stackoverflow.com/questions/11931897/how-to-integrate-facebook-into-iphone-app)

此链接显示发布消息时允许的参数 [http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

# php - new mysqli()：如何拦截“无法连接”错误？

> ID：15553496
> 
> 赞同：16
> 
> 时间：2013-03-21T16:53:53.660
> 
> 标签：php, mysqli

我正在这样做*（是的，我使用了错误的连接数据，这是为了强制连接错误）*

```
try {
    $connection = new mysqli('localhost', 'my_user', 'my_password', 'my_db') ;
} catch (Exception $e ) {
    echo "Service unavailable";
    exit (3);
} 
```

但是 PHP 正在做这个 php_warning：

> mysqli::mysqli(): (28000/1045): 用户'my_user'@'localhost'的访问被拒绝（使用密码：是）

在示例中，我使用错误的连接数据来强制连接错误，但在现实世界中，数据库可能已关闭，或者网络可能已关闭......等等。

**问题：**有没有办法在*不抑制警告*的情况下拦截数据库连接问题？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-21T17:04:11.023

你需要告诉 mysqli 抛出异常：

```
mysqli_report(MYSQLI_REPORT_STRICT);

try {
     $connection = new mysqli('localhost', 'my_user', 'my_password', 'my_db') ;
} catch (Exception $e ) {
     echo "Service unavailable";
     echo "message: " . $e->message;   // not in live code obviously...
     exit;
} 
```

现在您将捕获异常，您可以从那里获取它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T16:58:44.333

对于 PHP 5.2.9+

```
if ($mysqli->connect_error) {
    die('Connect Error, '. $mysqli->connect_errno . ': ' . $mysqli->connect_error);
} 
```

正如 jeroen 建议的那样，您还需要将报告模式设置为严格级别，但上面的代码对于专门检测连接错误仍然很有用。这两种方法的组合是[PHP 手册](http://php.net/manual/en/mysqli-driver.report-mode.php#example-1925)中推荐的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T16:59:03.487

检查`$connection->connect_error`值。

请参阅此处的示例：[http ://www.php.net/manual/en/mysqli.construct.php](http://www.php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-05-30T00:30:14.027

mysqli_report(MYSQLI_REPORT_STRICT);，如其他地方所述，给我一个错误并立即停止脚本。但是下面这似乎为我提供了所需的输出......

```
error_reporting(E_ERROR);

$connection = new mysqli('localhost', 'my_user', 'my_password', 'my_db') ;

error_reporting(E_ERROR | E_WARNING | E_PARSE);

if($connection->connect_errno)
{
  // Database does not exist, you lack permissions, or some other possible error.
    if(preg_match($connection->connect_error, "Access denied for user"))
    {
        print("Access denied, or database does not exist.");
    }
    else
    {
        print("Error: " . $connection->connect_error);
    }
} 
```

尝试使用 try..catch() 捕获此错误将失败。

# powershell - 需要将文本框中的值转换为整数

> ID：15553501
> 
> 赞同：1
> 
> 时间：2013-03-21T16:54:03.033
> 
> 标签：powershell

我需要以下帮助；

这是 cmd-let

```
Set-Datastore [-Datastore] <Datastore[]> [[-Name] <String>] [-CongestionThresholdMillisecond <Int32>] 
```

我有一个文本框，将与“-CongestionThresholdMillisecond”参数一起使用。我已经厌倦了不同的方式，但是 get 无法将字符串转换为 int 或值小于 5（不允许）。

```
$textBox417.Size = New-Object Drawing.Size (80,30)
$textBox417.Location = New-Object System.Drawing.Size (100,140)
$int = $textBox417.Value.ToString() 
$button = New-Object System.Windows.Forms.Button
$button.Size = New-Object Drawing.Size (110,30)
$button.Location = New-Object System.Drawing.Size (50,180)
$button.add_click({Set-Datastore -Name $label438.Text -CongestionThresholdMillisecond $int}) 
```

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:11:11.977

看起来您指的是不存在的属性。尝试将 Value 属性更改为 Text 属性

```
$int = $textBox417.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:26:07.810

如果您可以从文本框中获得正确的数字，则很容易将字符串更改为 int。

```
$string = '123'
$string.gettype()
([int]$string).gettype() 
```

那你为什么不能

```
...
$button.add_click({Set-Datastore -Name $label438.Text -CongestionThresholdMillisecond ([int]$int)}) 
```

# python - 使用 python 浏览 avahi 服务会错过服务

> ID：15553508
> 
> 赞同：2
> 
> 时间：2013-03-21T16:54:19.730
> 
> 标签：python, multithreading, dbus, avahi

我需要一个类，它为我提供当前可用的某种类型的 avahi 服务列表。因此，我`gobject.MainLoop()`在一个单独的线程中运行一个（第 23-25 行），并为我感兴趣的每个服务添加一个浏览器（第 27,28 行）。这原则上有效。

我的问题是，我并不总是得到所有服务。有时列出所有可用的服务，有时没有列出，有时只列出几个。我的猜测是，浏览器在连接适当的信号（第 41-44 行）之前开始迭代服务（第 36 行），但我不知道如何解决这个问题。下面是一个显示失败的最小示例。

我在网上看到的大多数示例（例如：[停止 Avahi 服务并返回元素列表](https://stackoverflow.com/questions/5126413)）在设置浏览器并连接信号后运行 MainLoop。当收到“AllForNow”信号时，循环退出。这对我来说不是一个选项，因为浏览器应该继续运行并监听新的或删除的服务（顺便说一下，这很可靠，只是初始查询有问题）。

```
#!/usr/bin/python
import dbus
from dbus.mainloop.glib import DBusGMainLoop
import avahi
import gobject
import threading

gobject.threads_init()
dbus.mainloop.glib.threads_init()

class ZeroconfBrowser:
    def __init__(self):
        self.service_browsers = set()
        self.services = {}
        self.lock = threading.Lock()

        loop = DBusGMainLoop(set_as_default=True)
        self._bus = dbus.SystemBus(mainloop=loop)
        self.server = dbus.Interface(
                self._bus.get_object(avahi.DBUS_NAME, avahi.DBUS_PATH_SERVER), 
                avahi.DBUS_INTERFACE_SERVER)

        thread = threading.Thread(target=gobject.MainLoop().run)
        thread.daemon = True
        thread.start()

        self.browse("_ssh._tcp")
        self.browse("_http._tcp")

    def browse(self, service):
        if service in self.service_browsers:
            return
        self.service_browsers.add(service)

        with self.lock:
            browser = dbus.Interface(self._bus.get_object(avahi.DBUS_NAME, 
                    self.server.ServiceBrowserNew(avahi.IF_UNSPEC, 
                            avahi.PROTO_UNSPEC, service, 'local', dbus.UInt32(0))),
                    avahi.DBUS_INTERFACE_SERVICE_BROWSER)

            browser.connect_to_signal("ItemNew", self.item_new)
            browser.connect_to_signal("ItemRemove", self.item_remove)
            browser.connect_to_signal("AllForNow", self.all_for_now)
            browser.connect_to_signal("Failure", self.failure)

    def resolved(self, interface, protocol, name, service, domain, host, 
            aprotocol, address, port, txt, flags):
        print "resolved", interface, protocol, name, service, domain, flags

    def failure(self, exception):
        print "Browse error:", exception

    def item_new(self, interface, protocol, name, stype, domain, flags):
        with self.lock:
            self.server.ResolveService(interface, protocol, name, stype,
                    domain, avahi.PROTO_UNSPEC, dbus.UInt32(0),
                    reply_handler=self.resolved, error_handler=self.resolve_error)

    def item_remove(self, interface, protocol, name, service, domain, flags):
        print "removed", interface, protocol, name, service, domain, flags

    def all_for_now(self):
        print "all for now"

    def resolve_error(self, *args, **kwargs):
        with self.lock:
            print "Resolve error:", args, kwargs

import time
def main():
    browser = ZeroconfBrowser()
    while True:
        time.sleep(3)
        for key, value in browser.services.items():
            print key, str(value)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-24T21:13:51.113

我找不到可安装的 python-dbus 包。但是我确实找到了一个很好用的示例 Avahi 浏览器[——avahi.py](https://github.com/hmvp/python-tdbus/blob/master/examples/avahi.py)

```
pip install python-tdbus 
```

# 资源

```
#!/usr/bin/env python
#
# This file is part of python-tdbus. Python-tdbus is free software
# available under the terms of the MIT license. See the file "LICENSE" that
# was provided together with this source file for the licensing terms.
#
# Copyright (c) 2012 the python-tdbus authors. See the file "AUTHORS" for a
# complete list.

# This example shows how to access Avahi on the D-BUS.

from tdbus import SimpleDBusConnection, DBUS_BUS_SYSTEM, DBusHandler, signal_handler, DBusError

import logging

logging.basicConfig(level=logging.DEBUG)

CONN_AVAHI = 'org.freedesktop.Avahi'
PATH_SERVER = '/'
IFACE_SERVER = 'org.freedesktop.Avahi.Server'

conn = SimpleDBusConnection(DBUS_BUS_SYSTEM)

try:
    result = conn.call_method(PATH_SERVER, 'GetVersionString',
                        interface=IFACE_SERVER, destination=CONN_AVAHI)
except DBusError:
    print 'Avahi NOT available.'
    raise

print 'Avahi is available at %s' % CONN_AVAHI
print 'Avahi version: %s' % result.get_args()[0]
print
print 'Browsing service types on domain: local'
print 'Press CTRL-c to exit'
print

result = conn.call_method('/', 'ServiceTypeBrowserNew', interface=IFACE_SERVER,
                    destination=CONN_AVAHI, format='iisu', args=(-1, 0, 'local', 0))
browser = result.get_args()[0]
print browser
class AvahiHandler(DBusHandler):

    @signal_handler()
    def ItemNew(self, message):
    args = message.get_args()
        print 'service %s exists on domain %s' % (args[2], args[3])

conn.add_handler(AvahiHandler())
conn.dispatch() 
```

# 输出

```
Avahi is available at org.freedesktop.Avahi
Avahi version: avahi 0.6.31

Browsing service types on domain: local
Press CTRL-c to exit

/Client1/ServiceTypeBrowser1
service _udisks-ssh._tcp exists on domain local
service _workstation._tcp exists on domain local
service _workstation._tcp exists on domain local
service _udisks-ssh._tcp exists on domain local 
```

# python - 获取最新的“创建”行（跨表）

> ID：15553513
> 
> 赞同：1
> 
> 时间：2013-03-21T16:54:32.667
> 
> 标签：python, django

如果我有以下表格：

```
class Potter(models.Model):
    name = models.CharField()

class Sculpture(models.Model):
    potter = models.ForeignKey(Potter)
    created = models.DateTimeField()

class Vase(models.Model):
    potter = models.ForeignKey(Potter)
    created = models.DateTimeField() 
```

我怎样才能找到最新的`Sculpture`或具有最少数据库命中`Vase`的某个*（即这是对我的问题的过度简化，我有两个以上的表引用**）*？`Potter`*`Potter`*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:01:31.630

假设您有一个收到 potter id 的视图：

```
ordered_sculptures = Sculpture.objects.filter(potter=potter).order_by('-created') 
ordered_vases = Vase.objects.filter(potter=potter).order_by('-created') 
```

编辑：我可能误读了一些东西，所以如果你想使用最新的查询集，你可以引用每个查询集的第一个元素（如果它们存在）：

```
latest = ordered_sculptures[0] 
```

花瓶也是如此。

参考：[文档中的 django order_by](https://docs.djangoproject.com/en/dev/ref/models/querysets/#order-by)

如果您为这些查询集定义了默认排序，另一种方法是 reverse 方法：

```
latest = Sculpture.objects.filter(potter=potter).reverse()[0] 
```

# php - PHP中./和../之间的区别

> ID：15553514
> 
> 赞同：0
> 
> 时间：2013-03-21T16:54:34.780
> 
> 标签：php, linux, file, path

我想问有什么区别

```
include('./config.php') 
```

和

```
include('../config.php') 
```

第二个向上一级目录，包括更高一级的文件夹。但是一个点究竟能做什么？

编辑; 谢谢大家的回答。这让我的头脑清醒了一些。我选择了关于主题信息最丰富的答案（尤其是在 PHP 环境中）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T16:56:01.893

在 posix 文件系统中`.`，仅表示当前目录和`..`父目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:56:19.700

一个点表示当前目录。

```
include('./config.php') 
```

基本上是一样的

```
include('config.php') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T16:59:04.983

这是一个系统的事情，而不仅仅是 PHP 的事情。

表示当前`./`目录。如果您曾经列出 *nix 系统的内容，您将在顶部看到以下内容。

```
.
../ 
```

顶部的 ( `.`) 与`./`表示“此目录”相同。因此，如果包含这样的文件：

```
include('./config.php') 
```

您告诉 PHP 在当前目录中查找“config.php”。这与

```
include('config.php') 
```

表示上面的`../`目录或“父目录”

```
include('../config.php') 
```

这告诉 PHP 向上一个目录并查找“config.php”。这些命令可以像这样链接：

```
../../config.php 
```

这告诉系统上一个目录，再上一个然后寻找“config.php”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T16:56:20.930

`.`表示*当前目录*

`..`表示*父目录*

这与 PHP 无关，而是称为[**点目录名称的操作系统约定**](http://msdn.microsoft.com/en-us/library/ee381481)

> **"dirA\.\dirB"**等价于**"dirA\dirB"**。
> 
> **"dirA\dirB\..\dirC"**等价于**"dirA\dirC"**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T16:56:49.843

```
include('../config.php') :- parent directory
include('./config.php') :- current directory 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T16:56:59.547

`./`用于当前目录

`../`用于转到当前目录的父目录

为了回答你的问题，假设你不写`.`

`include('/config.php')`将在文件系统的根目录中包含“config.php”文件

# python - Python 正则表达式 - '=' 后的值不匹配

> ID：15553516
> 
> 赞同：1
> 
> 时间：2013-03-21T16:54:43.320
> 
> 标签：python, regex, expression, match

我有一个格式如下的输入文件：

[类别]=值
[类别 2]=值 2

我正在使用正则表达式来匹配输入文件中的每个“类别”和每个“值”。类别正则表达式可以正常工作，但我现在正试图获取该类别标记后面的值。我正在尝试匹配“=value”，所以我在下面制作了以下正则表达式：

```
for inputLine in configFile:
     x = re.match('=.+', inputLine) 
```

问题是每次我检查变量“x”的值时，它都是“无”类型的，所以我知道正则表达式不起作用。我已将其范围缩小到在表达式中无法正常工作的 '=' 符号。我已经打印了 inputLine 并打印了 [CATEGORY]=value 所以我知道它正在正确读取文件。

任何帮助，将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:39:11.283

尝试：

```
for inputLine in configFile:
    x = re.search('=.+', inputLine) 
```

你应该得到你正在寻找的东西。

# php - 解析亚马逊 MWS Scratchpad 响应

> ID：15553519
> 
> 赞同：2
> 
> 时间：2013-03-21T16:54:55.077
> 
> 标签：php, xml-parsing, amazon-web-services

我正在尝试从亚马逊解析 xml 文件，但发现困难。我正在使用 simplexml_load_string

> $xml = simplexml_load_string('我的xml在这里');

但是当我这样做时

> echo $xml->GetMatchingProductResult->Product->AttributeSets；

它什么也没显示

如何访问品牌价值？

我的 xml 文件：

```
<?xml version="1.0"?>
<GetMatchingProductResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductResult ASIN="B003IOSNNQ" status="Success">
  <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
    <Identifiers>
      <MarketplaceASIN>
        <MarketplaceId>A1F83G8C2ARO7P</MarketplaceId>
        <ASIN>B003IOSNNQ</ASIN>
      </MarketplaceASIN>
    </Identifiers>
    <AttributeSets>
      <ns2:ItemAttributes xml:lang="en-GB">
        <ns2:Binding>Misc.</ns2:Binding>
        <ns2:Brand>eSecure</ns2:Brand>
        <ns2:Feature>Colour: Classic Black</ns2:Feature>
        <ns2:Feature>Thickness: Approximately 40mm - More than msot sellers</ns2:Feature>
        <ns2:Feature>Dimensions [length x width at widest and narrowest]: approximately 280 x 190 x 70mm</ns2:Feature>
        <ns2:Feature>Material: Stretch Lycra, Silica Gel</ns2:Feature>
        <ns2:Feature>Ideal for Standard Bicycle / Static Exercise Bike</ns2:Feature>
        <ns2:Label>eSecure</ns2:Label>
        <ns2:Manufacturer>eSecure</ns2:Manufacturer>
        <ns2:PackageDimensions>
          <ns2:Height Units="inches">2.13</ns2:Height>
          <ns2:Length Units="inches">10.71</ns2:Length>
          <ns2:Width Units="inches">7.72</ns2:Width>
          <ns2:Weight Units="pounds">0.49</ns2:Weight>
        </ns2:PackageDimensions>
        <ns2:PackageQuantity>1</ns2:PackageQuantity>
        <ns2:ProductGroup>Sports</ns2:ProductGroup>
        <ns2:ProductTypeName>SPORTING_GOODS</ns2:ProductTypeName>
        <ns2:Publisher>eSecure</ns2:Publisher>
        <ns2:SmallImage>
          <ns2:URL>http://ecx.images-amazon.com/images/I/41OIjmpza2L._SL75_.jpg</ns2:URL>
          <ns2:Height Units="pixels">75</ns2:Height>
          <ns2:Width Units="pixels">75</ns2:Width>
        </ns2:SmallImage>
        <ns2:Studio>eSecure</ns2:Studio>
        <ns2:Title>eSecure - Extra Comfort Bike Bicycle Gel Saddle Seat Cover</ns2:Title>
      </ns2:ItemAttributes>
    </AttributeSets>
    <Relationships/>
    <SalesRankings>
      <SalesRank>
        <ProductCategoryId>sports_display_on_website</ProductCategoryId>
        <Rank>398</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>458338031</ProductCategoryId>
        <Rank>1</Rank>
      </SalesRank>
    </SalesRankings>
  </Product>
</GetMatchingProductResult>
<ResponseMetadata>
  <RequestId>9b44aba6-d1fa-486a-8114-2bc4f9311d8d</RequestId>
</ResponseMetadata>
</GetMatchingProductResponse> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-05T15:03:07.230

我知道这是一个老问题，但我在同样的事情上遇到了困难。

首先 simplexml_load_string 不会像这样处理抛出的命名空间，因此您可以递归地检查然后加载命名空间，评估 xml 并浪费大量时间......

就我而言，我并不关心使用命名空间评估 xml 的格式，所以我只是使用正则表达式将它们从字符串中删除。在这个 simplexml_load_string 之后不再省略这些部分，并且很容易使用 json_encode 和 json_decode 从中获取一个数组。

```
//convert an xml string into an array
function xml2array($xml){
    $xml = preg_replace('/(<\/?)\w+:([^>]*>)/', '$1$2', $xml); //get rid of namespaces
    $xml = simplexml_load_string($xml);
    return json_decode(json_encode($xml),true); //use built-in stuff
} 
```

唯一的问题是当 xml 充满了包含有用数据的属性时，那么您将需要其他东西而不是 simplexml_load_string。请注意，它会从这里返回一个 @attributes 元素：

```
<GetMatchingProductResult ASIN="B003IOSNNQ" status="Success"> 
```

但从这部分省略：

```
<Width Units="pixels">75</Width> 
```

我不知道它会检查嵌套标签的原因或深度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T23:46:10.747

echo $xmlobj->children('',true)->ListMatchingProductsResult->Products->Product->AttributeSets->children('ns2',true)->ItemAttributes->Brand.PHP_EOL;

# python - pool_recycle 标志的单位是什么？[SQL炼金术]

> ID：15553523
> 
> 赞同：1
> 
> 时间：2013-03-21T16:54:59.797
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

当连接到 SQLAlchemy 中的引擎时，您可以设置 pool_recycle 标志以防止 MySQL 在 8 小时后自动断开连接。有谁知道这个 pool_recycle 标志的单位是什么？是分钟、小时还是秒？[我在文档](http://docs.sqlalchemy.org/en/latest/core/pooling.html#setting-pool-recycle)中找不到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:04:48.567

```
class sqlalchemy.pool.Pool(creator, recycle=-1, echo=None, use_threadlocal=False, logging_name=None, reset_on_return=True, listeners=None, events=None, _dispatch=None) 
```

[剪辑]

recycle – 如果设置为非 -1，则连接回收之间的秒数，这意味着在结帐时，如果超过此超时，则连接将关闭并替换为新打开的连接。默认为 -1。

[http://docs.sqlalchemy.org/en/rel_0_7/core/pooling.html](http://docs.sqlalchemy.org/en/rel_0_7/core/pooling.html)

# command-line - 项目级别的 Msbuild 命令行参数而不是用于更改 AssemblyName 的解决方案级别

> ID：15553524
> 
> 赞同：6
> 
> 时间：2013-03-21T16:55:01.393
> 
> 标签：command-line, msbuild, clickonce

在构建多项目解决方案时，是否有任何方法可以为 msbuild 指定仅适用于一个项目（即项目级别而不是解决方案级别）的命令行参数？

我问的原因是因为我想启用单击一次部署的并行安装。让我举个例子：

1）这行得通

> MSBuild "C:\Dev\MyProj\MyProj.Shell\MyProj.Shell.csproj" /p:SkipInvalidConfigurations=true /target:publish /p:OutputPath="C:\Dev\Temp\" /p:ApplicationVersion=1.2。 3.4 /p:ProductName="My Proj" /p:Configuration="Release" /p:Platform="Mixed Platforms" /verbosity:diagnostic

2）这不

> MSBuild "C:\Dev\MyProj\MyProj.Shell\MyProj.Shell.csproj" /p:SkipInvalidConfigurations=true /target:publish /p:OutputPath="C:\Dev\Temp\" /p:ApplicationVersion=1.2。 3.4 /p:ProductName="My Proj Test" /p:Configuration="Release" /p:Platform="Mixed Platforms" /verbosity:diagnostic /p:AssemblyName="MyProj.Test"

只是为了澄清和重申几点：

*   1 和 2 之间的唯一区别是`/p:AssemblyName="MyProj.Text"`
*   我正在使用`/target:publish`，所以这是一次点击构建
*   这是一个多项目解决方案，即使我只是针对一个 csproj 文件，它也会这样构建。

我知道*示例 2*失败的原因是因为它使用传入的程序集名称重命名每个项目的 AssemblyName ，即*MyProj.Test*。这是有道理的，因为通过命令行传入的参数是全局的，但我再次只针对 csproj 文件。

无论如何，这就是发生的事情。那么有什么方法可以传入 msbuild 命令行参数来仅更改 MyProj.Shell.csproj 文件中的一个 AssemblyName 属性？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-23T21:47:55.920

您可以编辑有问题的项目（其*.csproj*文件）以从特殊属性中获取程序集名称（如果已指定），即：

```
<AssemblyName Condition=" '$(ThisProjectNameOverrideAssemblyName)' == '' " >UsualAssemblyName</AssemblyName>
<AssemblyName Condition=" '$(ThisProjectNameOverrideAssemblyName)' != '' " >$(ThisProjectNameOverrideAssemblyName)</AssemblyName> 
```

因此，当您构建有问题的项目时，您只需要将此项目`ThisProjectNameOverrideAssemblyName`的覆盖传递给您：`AssemblyName`

```
msbuild /p:ThisProjectNameOverrideAssemblyName=NewAssemblyName 
```

# haskell - MonadFix 严格的语言

> ID：15553526
> 
> 赞同：10
> 
> 时间：2013-03-21T16:55:04.327
> 
> 标签：haskell, f#, ocaml, monads, monadfix

我正在为 Ocaml 中类似 haskell 的 do 表示法开发 camlp4 扩展，并试图弄清楚 GHC 如何编译递归 do-bindings（使用 -XDoRec 启用）。
我想知道一元定点组合器是否可能以严格的语言存在（如 Ocaml/F#/SML/...）？
如果是，它会是什么样子？会不会很有用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T17:00:40.807

F# 计算表达式语法（与 Haskell 相关`do`）支持递归：

```
let rec ones = seq {
  yield 1
  yield! ones } 
```

`Delay`这是支持的，因为除了其他 monadic（或*MonadPlus*）操作之外，计算构建器还必须支持操作。代码被翻译成如下内容：

```
let rec ones = 
  seq.Combine
    ( seq.Yield(1),
      seq.Delay(fun () -> seq.YieldFrom(ones)) ) 
```

`Delay`一般来说，它的类型是，`(unit -> M<'T>) -> M<'T>`诀窍在于它将具有效果（或立即递归引用）的计算包装到按需评估的延迟计算中。

如果您想详细了解该机制在 F# 中的工作原理，那么以下两篇论文是相关的：

*   [语法问题：在 F# 中编写抽象计算](http://www.cl.cam.ac.uk/~tp322/drafts/notations.html)
*   [初始化相互引用的抽象对象：值递归挑战](http://research.microsoft.com/apps/pubs/default.aspx?id=79951)

第一个描述了 F# 计算表达式语法是如何脱糖的（以及如何`Delay`插入 - 通常，F# 如何将延迟和急切的计算与效果相结合），第二个描述 F# 如何处理`let rec`带有值的声明 - 就像`ones`上面的值一样。

# javascript - jQuery评论/取消评论

> ID：15553531
> 
> 赞同：9
> 
> 时间：2013-03-21T16:55:18.187
> 
> 标签：javascript, jquery, comments, element

我正在寻找一种使用 jQuery 将元素包装到评论中的方法，例如：

```
<!--
<div class="my_element"></div>
--> 
```

还有一种删除评论的方法。

这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T19:03:03.067

用注释包装元素，或者更具体地说，用具有该元素 HTML 的注释节点替换元素：

```
my_element_jq = $('.my_element');
comment = document.createComment(my_element_jq.get(0).outerHTML);
my_element_jq.replaceWith(comment); 
```

切换回来：

```
$(comment).replaceWith(comment.nodeValue); 
```

如果您没有对评论节点的引用，那么您需要遍历 DOM 树并检查`nodeType`每个节点。如果它的值为 8，那么它是一个注释。

例如：

```
<div id="foo">
    <div>bar</div>
    <!-- <div>hello world!</div> -->
    <div>bar</div>
</div> 
```

JavaScript：

```
// .contents() returns the children of each element in the set of matched elements,
// including text and comment nodes.
$("#foo").contents().each(function(index, node) {
    if (node.nodeType == 8) {
        // node is a comment
        $(node).replaceWith(node.nodeValue);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T18:02:40.000

您可以通过执行以下操作将元素注释掉：

```
function comment(element){
    element.wrap(function() {
        return '<!--' + this.outerHTML + '"-->';
    });
} 
```

演示：http: [//jsfiddle.net/dirtyd77/THBpD/27/](http://jsfiddle.net/dirtyd77/THBpD/27/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-02T14:39:45.833

我印象深刻，没有人给出以下解决方案。以下解决方案需要一个容器。这个容器里面会有注释/未注释的代码。

```
function comment(element) {
    element.html('<!--' + element.html() + '-->')
}

function uncomment(element) {
    element.html(element.html().substring(4, element.html().length - 3))
}

function isCommented(element) {
    return element.html().substring(0, 4) == '<!--';
} 
```

示例：[https ://jsfiddle.net/ConsoleTVs/r6bm5nhz/](https://jsfiddle.net/ConsoleTVs/r6bm5nhz/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T16:58:53.627

为了包装？

```
function wrap(jQueryElement){
    jQueryElement.before("<!--").after("-->");
} 
```

不确定一旦包装好你会发现评论有多成功。使用正则表达式对 body 元素进行文本搜索是一种选择。

或者这个 -[是否可以使用 jquery 从 dom 中删除 html 注释](https://stackoverflow.com/questions/2364601/is-it-possible-to-remove-an-html-comment-from-dom-using-jquery)

# sql-server - 使用 Openrowset 插入批量数据

> ID：15553536
> 
> 赞同：0
> 
> 时间：2013-03-21T16:55:31.697
> 
> 标签：sql-server, openrowset

我需要将数据库 A 表中的数据插入到属于数据库 B 的另一个表中。使用 Openrowset 概念

```
INSERT INTO TableName
    SELECT * 
    FROM OPENROWSET(BULK 'SQLNCLI', 'Server=(local);Trusted_Connection=yes;',
                         'SELECT Columns FROM ``Database.Schema.Tablename ORDER BY columns) 
```

# java - 日历类在 Java 中无法按预期工作

> ID：15553538
> 
> 赞同：-1
> 
> 时间：2013-03-21T16:55:38.337
> 
> 标签：java, date, calendar

下面是我的演示程序：

```
public class Demo {
    public static void main(String[] args){
        Demo d = new Demo();
        Calendar c = Calendar.getInstance();
        System.out.println("Initial : "+c.getTime());
        d.addDay1(c);
        System.out.println("After addDay1 call : "+c.getTime());

    }

    public void addDay1(Calendar d){
        d.add(Calendar.DATE, 1);
    }

} 
```

我得到的输出如下：

```
Initial : Thu Mar 21 05:20:53 IST 2013
After addDay1 call : Fri Mar 22 05:20:53 IST 2013 
```

但我期望输出为：

```
Initial : Thu Mar 21 05:20:53 IST 2013
After addDay1 call : Thu Mar 21 05:20:53 IST 2013 
```

为什么在我的方法调用之后`addDay1`，日历对象`c`在 main 方法中添加了日期？

在java中，参数在java中是按值传递的，那么为什么它表现得无所谓呢？

谁能帮我理解这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:57:02.933

您正在传递 Calendar 的引用，因此向其添加日期会反映在调用方法中。

# javascript - Javascript html表格未显示

> ID：15553540
> 
> 赞同：0
> 
> 时间：2013-03-21T16:55:44.550
> 
> 标签：javascript, html

我一直在尝试使用javascript在表格中汇总一个骰子列表（对总和），以避免在我的html页面中硬编码11行并稍后在js文件中单独访问每一行以添加值。因此，我使用循环和 document.writeln() 以更紧凑的方式执行此操作，但输出未显示表格或任何内容。

```
document.writeln("<table border=\"1\"><thead><tr><th>Sum of Dice</th><th>Total Times   Rolled</th></tr></thead><tbody>");
for (var i=0; i < 11; i++)
{
    document.writeln("<tr><td>2</td><td></td></tr>");
}
document.writeln("</tbody></table>"); 
```

行不应该全部以 2 开头，我只使用该数字作为测试，for 循环中的第二个标签是我在数组中已有的总数，但我的问题是显示表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:01:09.210

尝试这个：

```
<script>
        var code = "";
        function write(){
            code += "<table border=\"1\"><tr><th>Sum of Dice</th><th> Total Times Rolled</th></tr>";
            for (var i = 0; i < 11; i++){
                code += "<tr><td>2</td><td></td></tr>";
            }
            code += "</table>";
            document.body.innerHTML = code;
        }
    </script> 
```

并且不要忘记将这段代码放到 html 中：

```
<body onload="write()"> 
```

在这里你有结果：

![在此处输入图像描述](../Images/63be1eb6c34d3ee01e88c220556a0390.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:33:21.900

我认为 writeln 用一大堆 HTML 文本字符串创建表通常不是一个好主意。我建议通过 Javascript 创建 table dom 元素并将其附加到 wrapper 元素。

```
var headerContent = ['Sum of Dice', 'Total Times Rolled'];
var table = document.createElement('table'),
    header = table.createTHead(),
    row, 
    cell;

table.border = 1;

// construct header
row = header.insertRow(0);
for (var i = 0, len = headerContent.length; i < len; i++) {
    cell = row.insertCell(i);
    cell.innerHTML = headerContent[i];
}

// construct table content
for (var i = 0; i < 11; i++) {
    row = table.insertRow(i + 1);
    for (var j = 0, len = headerContent.length; j < len; j++) {
        cell = row.insertCell(j);
        cell.innerHTML = '2';
    }
}

// add table element to the dom tree
var wrapper = document.getElementById('wrapper');
wrapper.appendChild(table); 
```

见[http://jsfiddle.net/LgyuE/](http://jsfiddle.net/LgyuE/)

# android - 如何在openGl 3d立方体上设置布局？

> ID：15553544
> 
> 赞同：0
> 
> 时间：2013-03-21T16:55:52.003
> 
> 标签：android, opengl-es

我想在 3d 多维数据集的一侧膨胀布局 xml 文件，在另一侧膨胀另一个布局 xml，在另一侧膨胀等等。

我只需要在 3d 立方体的一侧放置 gridView 并在 gridview 中放置一些按钮、图像、文本。

有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:24:15.087

有两种方法可以做到这一点：

1.  为多维数据集的不同面创建[`Camera`](http://developer.android.com/reference/android/graphics/Camera.html)并创建转换。
    [这](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)是一个如何使用相机对象来实现具有视图的 3d 效果的示例。
    这种方式不明确使用 OpenGL，但它应该在较新版本的 Android 上进行硬件加速。
2.  使用[`draw()`](http://developer.android.com/reference/android/view/View.html#draw%28android.graphics.Canvas%29)您的布局的 - 方法绘制到一个 custom `Canvas`，并从画布内容中制作一个 OpenGL 纹理：

    ```
    Bitmap layoutBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
    Canvas tmpCanvas = new Canvas(layoutBitmap);
    //Load layoutBitmap to a texture and recycle it. 
    ```

    然后用新的纹理绘制你的立方体。

不幸的是，这些解决方案不允许布局上的任何事件（可能是第一个选项，但我不这么认为）所以如果您需要能够单击或执行一些其他操作，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T14:06:16.770

我用它从布局创建位图图像，也许对你有帮助。

```
private Bitmap imageXML(View view) {

        view.measure(View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED),
                View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
        view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());

        final Bitmap bp = Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(), Bitmap.Config.ARGB_8888);
        bp.eraseColor(Color.WHITE);
        Canvas canvas = new Canvas(bp);
        view.draw(canvas);

        return bp;
    } 
```

# html - 为什么标题 (h1-6) 在 HTML/CSS 中是一个单独的类别（标签）？

> ID：15553545
> 
> 赞同：1
> 
> 时间：2013-03-21T16:55:58.337
> 
> 标签：html, css

我似乎无法理解为什么标题 (h1-6) 在 HTML/CSS 中是一个独立于任何常规样式的概念。在我看来，没有充分的理由，因为它只是通过添加到可用的标签宇宙来混淆用户，而它所做的所有事情都可以通过定义为另一种常规样式来完成，例如：

```
.headStyle1
{
    font-size: 30px;
    font-weight:bold;
} 
```

然后，`<h1></h1>`您无需使用单独的 tag ，而是执行以下操作：

`<span class="headStyle1">My Heading</span>`

你活得更快乐，因为你在工作记忆中少了一个标签需要处理，标题只是另一种风格，而不是它自己的类别。对我来说，简单是一种美德。

请解释我是否错了，以及是否有合理的理由增加这种复杂性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:57:47.890

它是一个语义标签，旨在指定特定标题相对于页面上*其他*标题的重要性，并与之形成对比；例如，an`h1`是*最*重要的标题，而`h2`稍微不那么重要。

它描述但并非旨在描述内容的任何表示方面，仅描述相对于其他标题的重要性/重要性，这表示该标题后面的内容具有相似的重要性（有点）。

参考：

*   [标题元素，在 Mozilla Developer Netork](https://developer.mozilla.org/en-US/docs/HTML/Element/Heading_Elements)。
*   [标题元素，来自 W3C](http://www.w3.org/TR/html401/struct/global.html#edef-H6)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T17:00:58.233

您需要首先考虑创建 html 语义标记的原因。看看 W3C 规范...

> 标题元素简要描述了它所介绍的部分的主题。用户代理可以使用标题信息，例如，自动构建文档的目录。
> 
> HTML中的标题有六级，H1最重要，H6最不重要。视觉浏览器通常以比不太重要的字体更大的字体呈现更重要的标题。

[http://www.w3.org/TR/html401/struct/global.html#edef-H6](http://www.w3.org/TR/html401/struct/global.html#edef-H6)

HTML 不仅仅是样式表的框架，它还是一种“标记”信息的方式。span 标签对于屏幕阅读器或搜索引擎来说意义不大，然而，h1 标签的意义却相当大。

为什么停在标题标签上？我们可以将所有内容都放在一个 span 标签中，去掉`p`,和几乎所有其他标签，并使用样式来表示重要性`em`。`cite`然后每个查看该站点的人都会知道什么是重要的，什么是不重要的。当有人使用屏幕阅读器访问网站或搜索引擎时，问题就会开始。通过使用语义标记，您可以让互联网变得“更好”。您现在和将来允许搜索引擎了解您正在创建的网站上的内容。

最好使用现有的标记。这是一种定义页面上内容类型的方法。一旦你接受了“复杂性”，这真的很简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T17:02:15.387

标题标签为文档提供语义含义，为文档提供结构而无需样式。

例如，它们帮助使用屏幕阅读器的人访问网站。与 h1 相比，屏幕阅读器不会理解 headStyle1 的重要性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T17:15:04.890

我建议使用它们，因为它们对于像 Google 等搜索机器人来说意义重大。这里有一个例子：你写一篇文章并命名它`Current situation in our company`。现在，如果我偶然发现您的文章并忘记保存 URL，我可能永远无法使用 Google 搜索它，因为 Google 会将它评为您网站上的文本的一部分，而不是***重要的标题***。

# android - 我的应用程序中的Android“Touchdown”应用程序中断按钮

> ID：15553550
> 
> 赞同：0
> 
> 时间：2013-03-21T16:56:05.673
> 
> 标签：android, webview

我已经非常努力地搜索了谷歌，但找不到答案。我有一个 Android 应用程序，它使用 webview 控件来提供本地存储在我的应用程序资产文件夹中的 HTML 页面。该应用程序运行良好。但是当用户为 Android 安装 Touchdown 时，我的应用程序中的所有链接都被破坏了。如果您卸载 Touchdown，它们都会重新工作。我已经给 NitroDesk 发送了电子邮件，但几天后没有回复。

为了简化这一点，我做了一个非常基本的测试。`<a href="MyPage.html">test</a>`我在主屏幕上放置了一个链接（ ）。当**没有**安装 Touchdown 时，它工作得很好。安装 Touchdown 后，我点击链接，页面闪烁，但返回主屏幕。我卸载了 Touchdown，它又可以工作了。

我假设 Touchdown 对 webview 控件有什么作用？也许我在清单中遗漏了一些东西以防止其他应用程序更改我正在使用的 webview 控件？

一个完整的链接确实有效，例如...我测试过 ( `<a href="http://www.google.com">test</a>`) 并且无论是否安装了 Touchdown 都有效。

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:13:15.790

本地存储的页面是否加载或屏幕只是闪烁？如果没有，我会查看安装 Touchdown 前后的文件夹结构。

# objective-c - 创建 NSManagedObjectContext 以在线程中使用

> ID：15553551
> 
> 赞同：2
> 
> 时间：2013-03-21T16:56:08.887
> 
> 标签：objective-c, cocoa, core-data

我正在尝试创建一个新的 NSManagedObjectContext 实例，以便我可以在主线程以外的线程中执行获取请求。据我了解，每个线程都需要它自己的实例，尽管它们可以共享存储。

我的应用程序是基于核心数据文档的应用程序。

[在这里](https://stackoverflow.com/questions/3597071/how-do-you-create-a-nsmanagedobjectcontext)阅读了一下，我得到了这个代码：

```
NSManagedObjectContext *managedObjectContextForThread = nil;
NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.managedObjectModel];

if (coordinator != nil) {
    managedObjectContextForThread = [[NSManagedObjectContext alloc] init];
    [managedObjectContextForThread setPersistentStoreCoordinator:coordinator];
    [managedObjectContextForThread setUndoManager:nil];
} 
```

它运行但是当我执行获取时我没有得到任何结果，我怀疑是因为 NSPersistentStoreCoordinator 没有正确设置。

我应该如何设置该商店协调员以与我的主要商店合作？还是我在这里缺少其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:07:05.347

Apple 的“通常推荐的方法”是在上下文之间共享一个持久存储协调器。理想情况下，您已经拥有对应用程序的主要托管对象上下文的引用，并使用该上下文的持久存储协调器。

```
NSManagedObjectContext *managedObjectContextForThread = [[NSManagedObjectContext alloc] init];;
[managedObjectContextForThread setPersistentStoreCoordinator:myMainContext.persistentStoreCoordinator]; 
```

看看 Apple 的[Core Data Programming Guide中的“Concurrency With Core Data”](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1 "核心数据编程指南")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:04:35.060

您必须将持久存储添加到存储协调器，然后将持久存储添加到托管对象上下文。

```
if ( [coordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:0 URL:storeUrl options:options error:&error] ) {
    managedObjectContextForThread = [[NSManagedObjectContext alloc] init];
    [managedObjectContextForThread setPersistentStoreCoordinator:coordinator];
}
else {
// investigate 'error'
} 
```

# full-text-indexing - 如何将自定义分析器传递给 @Indexed 注释？

> ID：15553552
> 
> 赞同：3
> 
> 时间：2013-03-21T16:56:09.207
> 
> 标签：full-text-indexing, spring-data-neo4j

Neo4J 允许我们在创建索引时提供自定义*[分析器。](http://docs.neo4j.org/chunked/milestone/indexing-create-advanced.html)*

我们如何使用 Spring-Data-Neo4j 实现这一目标？由于**@Indexed**没有此属性，还有哪些其他选项？

# javascript - 在 html 页面中调用 externalinterface js

> ID：15553553
> 
> 赞同：1
> 
> 时间：2013-03-21T16:56:10.520
> 
> 标签：javascript, jquery, flash, actionscript, externalinterface

我想用 Flash 视频制作界面。我如何在 HTML 页面中导入/嵌入外部接口 js。拨打电话以控制 Flash 视频。如何在 HTML 页面上添加动作脚本。有了这些，我想在 flash 和外部接口 js 之间做一些接口。

我之前的问题

我有大约 100 页，并且都有他们唯一的一个 flash 视频。我想在当前播放的视频结束时制作一个脚本，然后将显示下一页链接以继续播放下一个 Flash 视频并恢复/倒带。我不知道该怎么做..我认为使用 java 脚本或动作脚本是可能的。

请提供任何帮助。

任何例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T13:50:46.433

您需要在 flash 上声明一个“观察者”：

```
ExternalInterface.addCallback("sendToActionScript", receivedFromJavaScript); 
```

在此之后，.swf 将准备好接收来自 javascript 的信息。您可以在 javascript 上使用：

```
window["NameOfYourSwf"].sendToActionScript(value); 
```

您还可以使用以下方法避免一些 Microsoft 错误`thisMovie("NameOfYourSwf")`：

```
function thisMovie(movieName) {
     if (navigator.appName.indexOf("Microsoft") != -1) {
         return window[movieName];
     } else {
         return document[movieName];
     }
 } 
```

更多信息： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

最好的...

# ios - 在 iOS 应用程序中使用 Pocket API 时，是否只能通过 JSON 处理文章检索？

> ID：15553563
> 
> 赞同：1
> 
> 时间：2013-03-21T16:56:32.410
> 
> 标签：ios, objective-c, api, ios5, ios6

对于那些已经将 Pocket 集成到应用程序中的人（不仅仅是保存文章，我需要检索）当您检索用户文章列表时，它是否仅通过 JSON 处理（[如此处讨论](http://getpocket.com/developer/docs/v3/retrieve)），还是您可以这样做以某种方式直接使用[Objective-C SDK](http://getpocket.com/developer/docs/sdk/objective-c)？

如果是这样，我是否最好使用 JSON 框架将其集成到我的应用程序中？

我只是问，因为似乎有一种保存文章的本地方式，我希望也有一种方法可以检索它们，但我似乎找不到任何关于它的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:00:22.693

如果您[在 Github 上查看 SDK 的源代码](https://github.com/Pocket/Pocket-ObjC-SDK/)，您会看到有一种[方法可以调用任何 API](https://github.com/Pocket/Pocket-ObjC-SDK/blob/master/SDK/PocketAPI.h#L88)。因此，您似乎可以使用 SDK 做更多的事情，而不仅仅是分享。

* * *

**编辑：**你可能需要做这样的事情（未经测试的代码）

```
NSDictionary* argumentDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                    @"010101", @"consumer_key",
                                    @"101010", @"access_token",
                                    @"simple", @"detailType", nil]; //etc
[[PocketAPI sharedAPI] callAPIMethod:@"get"
                      withHTTPMethod:@"POST"
                           arguments:argumentDictionary
                             handler:^(PocketAPI *api, NSString *apiMethod, NSDictionary *response, NSError *error){
    // handle response here!
}]; 
```

# c# - Merge .net configuration files

> ID：15553564
> 
> 赞同：3
> 
> 时间：2013-03-21T16:56:35.960
> 
> 标签：c#, .net, app-config

My application has 2 config files at the moment.

1.  App.config
2.  Custom.config

The App.config references the Custom.config via a custom section handler like below:

`<configuration> <configSections>
<section name="Custom" type="MyApp.CustomConfigSection, MyApp" /> </configSections> <Custom configSource="Custom.config" /> </configuration>`

The problem is the Custom.config file contains a single section with many elements. I'd like to split this out so some of the elements are in one file and some are in another.

e.g. Right now I have

```
'<Custom>
     <Group1 ../>
     <Group2 ../>
     <Group3 ../>
</Custom> 
```

I'd like to make 2 or more files like below.

```
'<Custom>
    <Group1 ../>
 </Custom>'

'<Custom>
     <Group2 ../>
     <Group3 ../>
 </Custom>' 
```

At the moment I call ConfigurationManager.GetSection("Custom") as MyCustomConfigSection. I then have a number of classes with various configuration attributes that are populated automatically by the .net configuration.

Is there a way to do this split or can you not split 1 section into multiple files?

Thanks in advance

# jquery - jQuery Mobile: refresh radio button selection periodically

> ID：15553573
> 
> 赞同：2
> 
> 时间：2013-03-21T16:56:51.460
> 
> 标签：jquery, jquery-mobile, radio-button, refresh

I'm having trouble with refreshing a group of radio buttons, I hope someone could help.. The problem is how to display the newest selection(which radio is selected), so when one user select A, how could another user see radio button '#rA' is selected on his own device.

here is the markup: the div that displays the selected radio's value, and the 3 radio buttons.

```
<div id="radiostate"><?php echo $value;?></div>
<div id="test" >     
    <input type="radio" name="r" id="rB" value="B" data-theme="c" ><label for="rB">&nbsp;</label>  
    <input type="radio" name="r" id="rA" value="A" data-theme="a" ><label for="rA">&nbsp;</label>
    <input type="radio" name="r" id="rC" value="C" data-theme="f" ><label for="rC">&nbsp;</label>
</div> 
```

the code to refresh div "#radiostate" every 10 seconds, and get radio button checked based on $value:

```
 var refresh = setInterval(function(){
   $('#radiostate').load('getstate.php');
   var dbvalue = $('#radiostate').text();
   $('input[type="radio"][value="' + dbvalue +'"]').attr('checked', true).checkboxradio("refresh");
 }, 10000); 
```

this works fine to display the selected radio value (A, B, or C) in "#radiostate", but the radio buttons won't change... Any suggestions? thanks in advance!

**EDIT1**

I've also tried to put the radio buttons in another PHP(radio.php), and then load it every 10 seconds, but this totally messed up the style. If i don't include jquery.js and jquerymobile.js in radio.php, the radio buttons lose style:

![no jquery](../Images/346126c92cd15c3458cdf4079a0bbab3.png)

if I include jquery.js and jquerymobie.js, the index.php would looks like this, and the layer increases after each loading of radio.php:

![include jquery](../Images/93aa582e2feeaf3ed57cedd2953c248a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:30:05.970

而不是使用 .attr 来检查单选按钮使用 .prop

```
var refresh = setInterval(function(){
$('#radiostate').load('getstate.php');
var dbvalue = $('#radiostate').text();
$('input[type="radio"][value="' + dbvalue +'"]').prop('checked', true).checkboxradio("refresh");
}, 10000); 
```

# jquery - jQuery 不是函数

> ID：15553574
> 
> 赞同：3
> 
> 时间：2013-03-21T16:56:51.727
> 
> 标签：jquery

我正在尝试创建一个简单的文本块，当 3 个表单字段中的 1 个更改时更新。

这是我的 jQuery，它不断收到此错误：`TypeError: $(...).updateTitlePrefix is not a function`

谁能告诉我我在这里做错了什么？

```
$ = jQuery.noConflict();

$(document).ready(function() {

    $('#dataEntryForm\:studyId').updateTitlePrefix();
    $('#dataEntryForm\:formNumberQualifier').updateTitlePrefix();
    $('#dataEntryForm\:formVersionNumber').updateTitlePrefix();
});

// updates the titlePrefix when either the study#, form# or form version are changed    
$.fn.updateTitlePrefix() = function() {
    $(this).change(function() {
        $('#dataEntryForm\:titlePrefix').text($('#dataEntryForm\:formNumberQualifier').text() + $('#dataEntryForm\:formVersionNumber').text() + $('#studyId').text())
    });
} 
```

不确定这是否相关，但我在 jquery 1.3.2 上，因为这是一个 JSF 项目，这就是 Richfaces 库中包含的内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T16:58:23.973

```
$.fn.updateTitlePrefix = function() { 
```

去掉括号即可获胜。

`$.fn.updateTitlePrefix()`是函数调用；由于您只是声明函数，因此无需调用/调用该函数。

这是期望函数作为参数的函数的常见问题。例如。

```
function requriesFn(myFunction) {}
requiresFn(doStuff()); // incorrect (passes the return value of the function doStuff)
requiresFn(doStuff); // correct (passes the function itself)

$.ajax({
    error: $.noop() // incorrect
    error: $.noop // correct
});

// and my biggest pet peeve, 
$(document).ready(function() {
    myFunction();  
});
// simplify it
$(document).ready(myFunction);
// simplify it some more
$(myFunction); 
```

从技术上讲，*可能*需要调用一个函数来返回*另一个*函数，但通常情况并非如此。

# php - htaccess 特殊字符问题：和 _ 和 -

> ID：15553585
> 
> 赞同：0
> 
> 时间：2013-03-21T16:57:42.317
> 
> 标签：php, regex

我为我的脚本制定了一个重写规则，但我有一个小问题我想在规则中添加（:,-,_）但我总是出错

我用这个代码

> 重写规则 ^([0-9a-zA-Z]{1,200})$ go.php?s=$1 [L]

该代码允许使用 az 和 AZ，我想将这些符号添加到规则中

符号是：

> : , - , _

到那个代码。

请帮助我更正该代码，我会为此感到高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:59:16.900

这是你试过的吗？下面的规则将三个字符 ( `:`, `_`, `-`) 添加到您的模式中：

`RewriteRule ^([0-9a-zA-Z:_-]{1,200})$ go.php?s=$1 [L]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:01:41.370

你只需要为它更新一点你的正则表达式。
更新的正则表达式将是：`^([0-9a-zA-Z:_-]{1,200})$`

# java - 从子类中的重写方法访问超类方法中的局部变量

> ID：15553593
> 
> 赞同：2
> 
> 时间：2013-03-21T16:58:04.817
> 
> 标签：java, spring, reflection, spring-security

Java 中是否有办法通过反射或其他方式从子类中相应的重写方法访问在超类方法中声明的局部变量？

具体来说，我正在使用 Spring Security 的`DefaultLdapAuthoritiesPopulator`. 此类有一个名为的方法`getAdditionalRoles`，文档称子类可以覆盖该方法以为用户返回额外的角色。

该类还实现了该`getGrantedAuthorities`方法，该方法实际上调用了该`getAdditionalRoles`方法。源代码如下所示：

```
public final GrantedAuthority[] getGrantedAuthorities(DirContextOperations user, String username) {
    ...
    Set roles = getGroupMembershipRoles(userDn, username);

    Set extraRoles = getAdditionalRoles(user, username);

    ...
} 
```

此方法调用`getGroupMembershipRoles`LDAP 搜索为此用户定义的组，并将其存储在名为 的本地变量中`roles`。现在在我的实现中`getAdditionalRoles`，我还需要访问 LDAP 中为该用户定义的组，因此我可以推断该用户的其他角色。出于业务原因，我无法直接在 LDAP 中定义这些附加角色。

我可以简单地继续`LdapAuthoritiesPopulator`自己实现，但我想知道是否有其他方法，因为我真正需要的是访问`roles`父类方法中的局部变量，以避免我不得不进行第二次 LDAP 搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:21:29.087

1.  您不能访问其他方法中的变量，因为方法中的变量在方法返回后被删除。因为变量在堆栈中。
2.  如果可能，您可以覆盖`getGroupMembershipRoles`并`groups`存储为属性，并以其他方法访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:03:31.227

可能您可以利用 AOP 并设置*After Retuning Advice*并`getGroupMembershipRoles(userDn, username);`修改返回的角色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:11:01.007

我接受了 Zutty 的建议并以这种方式实施：

```
@Override
public Set<GrantedAuthority> getGroupMembershipRoles(String userDn,
        String username) {
    Set<GrantedAuthority> authorities = super.getGroupMembershipRoles(userDn, username);

    // My app's logic by inspecting the authorities Set

    return authorities;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:12:46.423

我认为您不能从其他远程类中存在的任何方法（谁的值方法不返回）访问局部变量的数据。在这种情况下，即使是反射也无济于事。如果我错了或遗漏了什么，请纠正我。

# php - 交叉加入codeigniter？

> ID：15553595
> 
> 赞同：2
> 
> 时间：2013-03-21T16:58:06.763
> 
> 标签：php, codeigniter, activerecord

我正在尝试这个

```
$this->db->join('tableTwo as b','','CROSS');
$result = $this->db->get('tableOne as a')->result(); 
```

一些解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:59:25.083

codeigniter中cross join的解决方案：

```
$this->db->join('tableTwo as b','true');
$result = $this->db->get('tableOne as a')->result(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T19:22:35.463

你应该这样使用它：

```
$this->db->join('tableTwo as b','true');
$result = $this->db->get('tableOne as a')->result(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-11T17:47:41.617

## 在 codeigniter 3 中，您可以通过

```
$this->db->join('tableTwo as b','1=1');                    //true relation
$result = $this->db->get('tableOne as a')->result(); 
```

## 或者通过从方法或获取方法中传递一个数组

```
$result = $this->db->get(['tableOne as a','tableTwo as b'])->result(); 
```

## 或者

```
$result = $this->db->from(['tableOne as a','tableTwo as b'])
get()->result();     //by this method you can add as many table you want to join 
```

或通过将一个表传入 from 和另一个传入 get 方法

```
$result = $this->db->from('tableOne as a')
get('tableTwo as b')->result(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-18T18:24:38.923

对于那些来查看**Codeigniter 4**答案的人：

```
// tableOne is defined in the model
$this->model->join('tableTwo', 'column_x= column_y', 'cross'); 
```

第一个参数是表名，下一个参数是连接条件，第三个参数是连接类型。

所以如果你有这样的 SQL 语句：

```
cross join producto_resumen_color on prre_id = prco_prre_id 
```

你会这样做：

```
->join('producto_resumen_color','prre_id = prco_prre_id', 'cross') 
```

您可以在 CI 的用户指南中找到更多信息。

[https://codeigniter.com/user_guide/database/query_builder.html?highlight=join#join](https://codeigniter.com/user_guide/database/query_builder.html?highlight=join#join)

```
join($table, $cond[, $type = ''[, $escape = NULL]])

Parameters: 

    $table (string) – Table name to join
    $cond (string) – The JOIN ON condition
    $type (string) – The JOIN type
    $escape (bool) – Whether to escape values and identifiers 
```

# python - 没有 __deepcopy__ 属性的按值对象复制

> ID：15553596
> 
> 赞同：0
> 
> 时间：2013-03-21T16:58:09.353
> 
> 标签：python, copy

我正在尝试对一个类的实例进行深度复制，但我得到了：

```
object has no __deepcopy__ atrribute 
```

错误。

该类被锁定在 a 中`.pyd`，因此无法修改。

有没有办法在不使用 deepcopy 的情况下按值复制这些对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:59:55.613

您必须复制对象状态。最简单的方法是使用该`pickle`模块：

```
import pickle

copy = pickle.loads(pickle.dumps(someobject)) 
```

这*不能保证有效*。在一般情况下，pickle 模块为您所做的所有事情都是腌制实例属性，并从类引用中重新恢复实例并恢复其上的属性内容。

由于这是一个 C 扩展对象，如果实例状态没有暴露给您，并且类型不明确支持酸洗，这也不起作用。在那种情况下，恐怕你别无选择。

# spring - Tiles 2.2 put-list-attribute + Spring 3.1.4

> ID：15553597
> 
> 赞同：0
> 
> 时间：2013-03-21T16:58:12.330
> 
> 标签：spring, jstl, tiles

我正在将我们的应用程序从 struts 1.3 迁移到 spring 3.1.4 mvc。在此过程中，我还将从瓷砖 1.1 升级到瓷砖 2.2。Jstl 版本是 1.1。使用 Tiles 2.2，我遇到了关于使用 put-list-attribute 的问题。我正在尝试显示一个简单的 jsp 页面，它应该执行以下操作：a）标题：包含一堆 css（我将其注释掉，因为它不起作用。使用 firebug 我看到错误`"NetworkError: 404 Not Found - http://localhost:8080/appname/%BeachStyle%7d" --- {eachStyle}` 不知道 %BeachStyle% 来自哪里。b）标题：包含标题`Works fine` --c）正文：显示静态文本

瓷砖.xml

```
<!DOCTYPE tiles-definitions PUBLIC
"-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
"http://tiles.apache.org/dtds/tiles-config_2_1.dtd">

<tiles-definitions>
    <definition name=".login" preparer="com.tiles.LoginController"
    template="/tiles/layouts/layoutmain.jsp">
    <put-attribute name="pageTitle" value="vivi test" />
    <put-list-attribute name="baseStylesTest">
        <add-attribute value="/styles/css/grids.css"/>
        <add-attribute value="/styles/css/superfish.css"/>
        <add-attribute value="/styles/css/styles.css"/>
    </put-list-attribute>

    </definition>
</tiles-definitions> 
```

布局main.jsp

```
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%> 
<tiles:useAttribute id="stylesList" name="baseStylesTest" classname="java.util.List"/>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <%-- <c:forEach var="eachStyle" items="${baseStylesTest}">
        <link type="text/css" rel="stylesheet" href="<c:out value='${eachStyle}'/>"    /> --%>
    <title><tiles:insertAttribute name="pageTitle" /> </title>
</head>
<body>
    Login page body
</body>
</html> 
```

我尝试了以下方法：i）检查了 tiles2.2 dtd 和使用它的示例 - 发现了类似的用法 ii）检查了互联网上的示例以及它是如何使用的 - 发现了类似的用法 iii）检查了它如何与 struts 一起使用 - 发现它们使用#attr.xxx 在 pagescope 中

我在我的实施中没有发现任何问题。标题属性正确呈现，但在属于 put-list-attribute 的属性上。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:00:05.790

找到了解决方案。JSTL 没有工作，因为我宣布我的网络应用程序版本为 2.5。这与我使用的 tomcat5.5 不兼容。将网络应用程序版本更改为 2.4，一切都很好。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

---

</web-app> 
```

# ios - NSParagraphStyle iOS - 如何检测块和列表？

> ID：15553598
> 
> 赞同：4
> 
> 时间：2013-03-21T16:58:16.090
> 
> 标签：ios, list, block

我有一个 NSParagraphStyle 对象，当使用 NSLog 检查时，它包含列表和块，但是似乎绝对没有办法访问它们。使用 OS XI 创建文档并在文本视图中将它们传输到 iOS，列表和表格可以成功地重新创建并显示在 NSLog 中。但是 NSParagraphStyle 没有访问它们的方法或属性，有人可以帮忙吗？丁：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-08T09:29:55.107

> **宣言**
> 
> @property(只读，复制) NSArray *textLists @property
> (只读，复制) NSArray *textBlocks

[关联](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSParagraphStyle_Class/index.html#//apple_ref/doc/uid/20000375-SW6)

但是，看起来没有内省就无法在**iOS**中访问它们，因为它们的声明不包含在 UIKit 中。

```
if ([paragraph respondsToSelector:@selector(textLists)])
  NSArray* lists = [paragraph performSelector:@selector(textLists)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-03T11:37:51.157

```
if let textLists = paragraphStyle.value(forKey: "textLists") as? NSArray {
  if let item = textLists.firstObject as? NSObject {
    print(item.description)
  }
} 
```

# java - 没有明显原因的空指针异常

> ID：15553601
> 
> 赞同：0
> 
> 时间：2013-03-21T16:58:26.440
> 
> 标签：java

堆栈溢出。我正在尝试制作一个程序，该程序使用文本菜单来处理大量事物来操作单个字符串。其中一种方法将字符串转换为字符串数组。这工作正常。但是，所有将其作为数组操作的方法（一个将其打印出来，一个反转字序，一个使用交换排序方法对其进行排序）在调用时返回 NullPointerException。我查看了所有代码，但看不到它的来源。这是包含所有代码的 .Java 文件。我的问题只发生在我调用底部附近的 printArray()、reverse() 和 sort() 方法时。任何和所有的帮助表示赞赏。对不起，草率的代码，我还没有清理它。

代码：

```
 /*
Computer Programming Lab 11
Jim Kimble
3 Mar 2013

Work with strings and implementing a menu.

Acknowledgements:
Uses main structure of HUTPanel as designed at UMU, 2002-2012
*/

import java.io.*;
import java.awt.*;
import javax.swing.*;

public class HUTPanel extends JPanel
{
/***************************************************
 * Class-level data members should be declared here.
 ***************************************************/
int numVowels;
String[] words;
String str;
String vowels;
String menuChoice;
String oString = "A tong lime ago, a daggy shog bossed a cridge over a pillmond,\n"
                 +"When in the course of human events\n"
                 +"Mary had a little lamb.\n"
                 +"The girls' basketball team repeated as tournament champion this weekend.";

public HUTPanel(JFrame frame)
{

    // Set panel background color
    setBackground(Color.WHITE);
    setLayout(null);
    setPreferredSize(new Dimension(810, 410));

    /***************************
     * Now add your code below:
     ***************************/

    //  Create a frame around this panel.
    frame.setTitle("Computer Programming Lab/Program # 11");
    frame.getContentPane().add(this);

    str = "A tong lime ago, a daggy shog bossed a cridge over a pillmond,\n"
          +"When in the course of human events\n"
          +"Mary had a little lamb.\n"
          +"The girls' basketball team repeated as tournament champion this weekend.";

    System.out.println("Lab 11: Text Manipulation");
    //getTheText();
    System.out.println("The string is: '"+str+"'.");

    handleTheMenu();

} // end of constructor

/*************************
  * Add your methods here:
  *************************/

// Get a text sequence from the keyboard and put it in str
public void getTheText()
{
    Boolean inputDone = false;

    while (!inputDone)
    {
        System.out.print("Enter your text:  ");
        inputDone = grabText();
    }

}

private Boolean grabText()
{

    try {
            BufferedReader inputReader = new BufferedReader(new InputStreamReader(System.in));
            menuChoice = inputReader.readLine();
            return true;
    }
    catch(IOException e) 
    { 
        System.out.println("Error reading input. Please try again.");
    }

    return false;

}

public void handleTheMenu()
{   
    int choice = -1;
    Boolean OK;

    while (choice != 0)
    {
        choice = -1;

        System.out.println("Menu:");
        System.out.println();
        System.out.println("  1\. Count the vowels"); //"There are ... vowels in the text."
        System.out.println("  2\. Remove all letter e's"); //then print it.
        System.out.println("  3\. Replace all t's with '+'"); //then print it
        System.out.println("  4\. Search for a requested word (will reset the string)"); //Does 'word' exist in the text?
        System.out.println("  5\. Print the words on individual lines"); 
        System.out.println("  6\. Reset the string.");//Reset the string to the original
        System.out.println("  7\. Put the words in an array"); //then print it
        System.out.println("  8\. Reverse the text word order"); //then print it
        System.out.println("  9\. Sort the words in an array"); //Once the words are put into an array
        System.out.println();
        System.out.print("  0 to quit --> ");

        OK = grabText();

        if (OK)
        {
            try
            {
                choice = Integer.parseInt(menuChoice);
            }
            catch(NumberFormatException e)
            {
                System.out.println("Not a number; please try again.");
                System.out.println();
            }

            switch(choice)
            {
                case 0:  System.out.println();
                         System.out.println("Thank you.");
                         break;
                case 1:  countVowels();
                         break;
                case 2:  removeAllEs();                             
                         break;
                case 3:  changeTToPlus();
                         break;
                case 4:  find();
                         break;
                case 5:  listWords();
                         break;
                case 6:  reset();
                         break;
                case 7:  makeArray();
                         break;
                case 8:  reverse();
                         break;
                case 9:  sort();
                         break;
                default: System.out.println("Not a valid choice; please try again.");    
            }
        }
    }
}

private void countVowels() {
    //count the vowels in str
    vowels = "aeiouAEIOU";
    numVowels = 0;
    for( int i = 0; i < vowels.length(); i ++) {
        for(int j = 0; j < str.length(); j++) {
            if (str.charAt(j) == vowels.charAt(i)) {
                numVowels += 1;
            }
        }
    }
    System.out.println("The string has " + numVowels + " vowels in it.");
}

private void removeAllEs() {
    String str3 = str.replace('e', ' '); 
    System.out.print(str3);
    str = str3;
}

private void changeTToPlus() {
 String str2 = str.replace('t', '+');
 System.out.println(str2);
 str = str2;
}

private void find() {
    str = oString;
    getTheText();
    if(str.indexOf(menuChoice) != -1) 
    {
        System.out.println("The word " +menuChoice+  " is at index " +str.indexOf(menuChoice));
    }
    else
    {
        System.out.println("The word " +menuChoice+ " is not in the string.");
    }
}

private void listWords() {
    int pos = 0;
    int i = 0;
    while(i > -1)
    {
        i = str.indexOf(' ', pos);
        if (i > -1)
        {
        System.out.println(str.substring(pos, i));
        pos = i + 1;
        }
    }
}

private void reset() {
    str = oString;
    System.out.println();
    System.out.println("String reset.");
    System.out.println();
}

private void makeArray() {
    int n = 1;
    String[] words = new String[n];
    int pos = 0;
    int i = 0;
    int j = 0;
    while(j > -1)
    {
        for (i = 0; i < 1000; i++)
        {
            n += 1;
            j = str.indexOf(' ', pos);
            if (j > -1)
            {
              words[i] = str.substring(pos, j);
              pos = j + 1;
            }
        }
    }
    //printArray();
}
//***FIX***
private void printArray() {
      for (int k = 0; k < words.length -1; k++){
          System.out.println(words[k]);
      }
  }

//***FIX***
private void reverse() {
    int i = 0;
    int j = words.length - 1;
    String temp;
    while (i < j){
        temp = words[i];
        words[i] = words[j];
        words[j] = temp;
        i++;
        j--;
    }
}

private void sort() {
    String temp = "";
    for (int i = 1; i < words.length - 1; i++) {
        for (int j = i + 1; j < words.length; j++) {
            int x = words[i].compareTo(words[j]);
            if (x > 0) {
                temp = words[i];
                words[i] = words[j];
                words[j] = temp;
            }
        }
    }
    for (int p = 0; p < words.length -1; p++) {
        System.out.println(words[p]);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:02:38.233

你的错误在这里：

```
private void makeArray() {
    int n = 1;
    String[] words = new String[n];//At This line you are creating local array words.The instance variable words is still null. 
    int pos = 0;
    int i = 0;
    int j = 0;
    while(j > -1)
    {
        for (i = 0; i < 1000; i++)
        {
            n += 1;
            j = str.indexOf(' ', pos);
            if (j > -1)
            {
              words[i] = str.substring(pos, j);
              pos = j + 1;
            }
        }
    } 
```

利用：

`words = new String[n];`代替`String[] words = new String[n];`

正如*Luiggi Mendoza*在评论部分中提到的，在方法中`words`定义的局部变量是在类中定义的实例变量的[影子。](http://www.xyzws.com/Javafaq/what-is-variable-hiding-and-shadowing/15)***作为旁注***，我想指出每次调用方法时在方法中不必要地创建新对象。如果你在你的类中创建一个实例变量，并在using 中实例化一次它会非常有效。这样你的方法就变成了这样：`makeArray``words``HUTPanel`

*`BufferedReader``grabText()``getTheText()``inputReader``constructor``inputReader = new BufferedReader(new InputStreamReader(System.in));``grabText`*

 *```
private Boolean grabText()
{

    try {
            //No more new object creation for BufferedReader for each call of this method. 
            menuChoice = inputReader.readLine();
            return true;
    }
    catch(IOException e) 
    { 
        System.out.println("Error reading input. Please try again.");
    }

    return false;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:03:40.550

确保你总是从选项 7 开始，这样你的`words`数组就会被初始化。这实际上不是用户应该做的事情。应用程序应该处理它，这样用户要么不能选择其他选项，要么自动选择。

**更新**：*Vishal K*是正确的，但这仍然是您的应用程序中的一个弱点。*

# c - C 中的 Malloc 语法

> ID：15553602
> 
> 赞同：3
> 
> 时间：2013-03-21T16:58:34.063
> 
> 标签：c, list, struct, linked-list, malloc

在书中我读到 malloc 的语法是 malloc(sizeof(int)) 但在一个双向链表程序中我看到以下内容：

```
newnode=(struct node *)malloc(sizeof(struct node)) 
```

(struct node*) 在这里做什么？整个代码在做什么？顺便说一句，程序中结构的代码如下。

```
struct node
{
char line[80];
struct node *next,*prev;
};

struct node *start=NULL,*temp,*temp1,*temp2,*newnode; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:05:56.020

代码动态地创建`pointer`一个单一类型的`struct node`. 在大多数版本的 C 中，`(struct node *)`不需要强制转换，有些人认为不应该使用它。如果您删除演员表，它将是 a `void*`，可用于任何类型。

所以：

```
newnode = (struct node*)malloc(sizeof(struct node)); 
```

大致相当于：

```
newnode = malloc(sizeof(struct node)); 
```

请参阅：[具体来说，强制转换 malloc 的结果有什么危险？](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)

*注意 1：如果您使用 Visual Studio 编写 C 代码，如果您不强制转换`malloc`. 但是，代码仍将编译。*

*注意 2：`malloc`在 C++ 代码中使用需要您转换结果，如示例中所示。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T17:05:00.470

你遇到了一个非常糟糕的代码。C 程序员从不强制转换`malloc()`. 不仅不需要，而且[可能有害](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T17:05:45.673

您应该将要`malloc`分配的字节数作为参数传递。这就是为什么在此代码示例中，您使用`sizeof(struct node)`tell`C`来分配结构节点变量所需的字节数。顺便说一下，像这段代码中显示的那样转换结果是个坏主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T17:06:01.763

malloc 返回一个 void 指针。

(struct node*) 进行从 void 指针到目标指针类型的显式转换

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T17:05:27.953

“malloc”返回一个空指针。(struct node *) 将 malloc 的结果类型转换为“节点结构指针”，这（毫无疑问）是“newnode”。

# python - 使用python进行软件自动化

> ID：15553606
> 
> 赞同：-10
> 
> 时间：2013-03-21T16:58:47.153
> 
> 标签：python

我最大的困难是找到一个可以开发测试 python 的工具。

我能用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:04:03.787

一种常见的方法是使用带有 pydev 插件的 eclipse ide 编写代码

要运行测试，请使用标准 unittest 模块编写它们，然后使用“nose”系统运行它们

# matlab - probplot - 定义颜色

> ID：15553608
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:00.177
> 
> 标签：matlab, plot

我在matlab中有这些行：

```
pp1=probplot('normal',one_stone);           
set(pp1,'color','red') 
```

这给出了一个到处都是红色的情节。

我想改变散点的颜色而不改变趋势线的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:05:33.433

您可以像这样分别设置线条和标记的属性：

```
set(pp1(1),'Color','r') % line
set(pp2(2),'Color','b') % markers 
```

# c++ - 无法在循环 C++ 中打开文件

> ID：15553609
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:00.637
> 
> 标签：c++, file, loops

我有一个具有以下代码的 c++ 应用程序：

```
for (int i = 0; i < ALL_EPID_CERTS_LENGTH; i++)
            {
            std::ifstream file(; 
            file.open(path.append(ALL_EPID_CERTS_1_0[i]), std::ios::in | std::ios::binary); 
            if(file.is_open()) 
            {
                // get the length of the file 
                file.seekg(0, ios::end); 
                size_t fileSize = file.tellg(); 
                file.seekg(0, ios::beg);
                // create a vector to hold all the bytes in the file
                vector<byte> data(fileSize, 0);
                // read the file
                file.read(reinterpret_cast<char*>(&data[0]), fileSize);             
                byte *tempCerts = new byte[data.size()+1];
                memset(tempCerts,0,fileSize+1);
                std::copy(data.begin(), data.begin()+(data.size()), tempCerts);
                // !!!!check if NULL and place for NULL are needed
                for (int j = 0; j < data.size(); j++)
                {
                    list.push_back(tempCerts[j]);
                }
                file.close();
            }
            } 
```

在第一次迭代中，循环执行预期，但由于第二次 - file.is_open() 返回 false。所有文件都存在。你能解释一下我有什么问题吗？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T17:02:38.643

你做`path.append`的 - 是什么`path`？您期望它在第一次迭代之后是什么 -`ALL_EPID_CERTS_1_0[1]`附加到它可以`ALL_EPID_CERTS_1_0[0]`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:15:35.117

关闭流后可能需要调用`infile.clear();`清除状态位，否则无法打开具有相同流的新文件。

另外：您确定需要在每次迭代时附加到路径吗？每次追加调用后输出路径变量并检查路径是否正确。我希望在第二次迭代中，路径字符串看起来像这样：“c:/some/path/file1.txtfile2.txt”

在这种情况下，我会使用 `stringstream`or`sprintf`来生成路径，并确保不要更改路径变量。

# python - 使用 2 个文本文件在 2 个脚本之间共享数据。（Python）

> ID：15553617
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:19.337
> 
> 标签：python, multithreading, file, text, sharing

我正在尝试在同时运行的 2 个 python 脚本之间共享数据。

这是一张图片来解释我是如何做到这一点的。 [http://i859.photobucket.com/albums/ab153/coreystj/Problem_zps9acdd726.png](http://i859.photobucket.com/albums/ab153/coreystj/Problem_zps9acdd726.png)

这一切都是在python中完成的。我遇到的问题是，每当我有新信息要附加到`ClientSend.txt`文件（来自脚本 2）时，它有时不会注册脚本 1 以将其发送到服务器。我在想可能是因为当我在完全相同的时间追加和写入相同的文件时，我最终在将信息发送到服务器之前意外删除了信息！

如何避免在发送之前意外删除内容。如果没有解决方案，我怎么能在不使用套接字或任何类型的 tcp 连接的情况下在两个脚本之间共享信息。

脚本 2 实际上是 Blender 仅供参考。所以多处理和线程不是脚本二的选项。它根本不支持这些模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:06:11.620

[您可以使用http://en.wikipedia.org/wiki/Actor_model](http://en.wikipedia.org/wiki/Actor_model)中描述的演员模型

# facebook-graph-api - 在 WP 主题中显示喜欢计数的问题

> ID：15553619
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:19.960
> 
> 标签：facebook-graph-api, wordpress-theming, facebook-page

我正在为我的 Wordpress 设置主题，并希望在粉丝页面中只显示喜欢的数量。我怎样才能显示这个

> [https://api.facebook.com/method/fql.query?format=json&query=select+fan_count+from+page+where+page_id=160397290640478](https://api.facebook.com/method/fql.query?format=json&query=select+fan_count+from+page+where+page_id=160397290640478)

在我的主题中？我不能使用 fopen() 函数。也许是JavaScript？如何？

对不起这个问题，但我不是程序员。

* * *

对不起，但毕竟，我得到了自己的答案：

[http://pastebin.com/desK1b6D](http://pastebin.com/desK1b6D)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:45:35.913

作为参考，当 pastebin 不再工作时，这是问题的解决方案：

```
<script>
    function showCount(count){
        if(count)
        document.getElementById('fb_fan_count').innerHTML = count[0].fan_count;
    }
</script>
<p id="fb_fan_count"></p>
<script type="text/javascript" src="https://api.facebook.com/method/fql.query?format=json&callback=showCount&query=select+fan_count+from+page+where+page_id%3D16039729064048"></script> 
```

# asp.net - 在 MVC 4 WebAPI 中无法识别路由

> ID：15553620
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:20.150
> 
> 标签：asp.net, asp.net-web-api, asp.net-web-api-routing

尽管我在直接 MVC 中使用了路由，但我并没有过多地使用 ASP.NET WebAPI。显然我做错了什么，也许有人可以帮忙？我有一个名为 UsersController 的控制器和两个方法，Register 和 Details，它们都接受两个字符串参数并返回一个字符串，都标记为 HttpGet。最初我从 WebApiConfig.cs 中的两个路由映射开始：

```
config.Routes.MapHttpRoute(
      name: "TestApi",
      routeTemplate: "api/{controller}/{action}/{userId}/{key}"
  );
  config.Routes.MapHttpRoute(
      name: "Test2Api",
      routeTemplate: "api/{controller}/{action}/{userId}/{class}"
  ); 
```

通过此设置，只能找到 URL 的第一个路由，例如：

```
http://<domain>/api/users/register/a123/b456/ 
```

如果我打电话：

```
http://<domain>/api/users/details/a123/b456/ 
```

我得到一个 404。如果我交换两条路由，那么我可以调用 Details 方法但不能调用 Register 方法，再次得到 404。我采用的解决方法是更具体地使用路由：

```
config.Routes.MapHttpRoute(
      name: "TestApi",
      routeTemplate: "api/{controller}/register/{userId}/{key}"
  );
  config.Routes.MapHttpRoute(
      name: "Test2Api",
      routeTemplate: "api/{controller}/details/{userId}/{class}/"
  ); 
```

用户控制器看起来像：

```
namespace HelloWebAPI.Controllers
{
  using System;
  using System.Web.Http;
  using HelloWebAPI.Models;

    public class UsersController : ApiController
    {
      [HttpGet]
      public string Register(string userId, string key)
      {
        return userId + "-" + key;
      }

      [HttpGet]
      public string Enrolments(string userId, string @class)
      {
        return userId + "-" + @class
      }
    }
} 
```

所以我不明白为什么第二个注册的路由的 {action} 组件没有与正确的方法相关联。

谢谢

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:25:02.513

ASP.NET Web API 中的路由分三个步骤工作：

1.  将 URI 与路由模板匹配。
2.  选择控制器。
3.  选择一个动作。

框架在路由表中选择与 URI 匹配的第一个路由，如果第二步或第三步失败，则没有“第二次猜测” - 只有 404。在您的情况下，两个 URI 始终与第一个路由匹配，因此第二个永远不会用过的。

为了进一步分析，我们假设第一条路线是：

`api/{controller}/{action}/{userId}/{key}`

您使用以下 URI 调用它：

`http://<domain>/api/users/enrolments/a123/b456/`

为了选择动作框架，需要检查三件事：

*   请求的 HTTP 方法。
*   路由模板中的`{action}`占位符（如果存在）。
*   控制器上的动作参数。

在这种情况下，该`{action}`部分将被正确解析为`enrolments`，但框架将寻找`Enrolments`带有`userId`和`key`参数的方法。您的方法有一个`class`不匹配的参数。这将导致 404。

为了避免这个问题，您必须制定更具体的路线（就像您所做的那样）或统一参数名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:21:23.370

您只需要定义一个路由：

```
config.Routes.MapHttpRoute(
    name: "TestApi",
    routeTemplate: "api/{controller}/{action}/{userId}/{key}"
); 
```

然后将您的控制器方法更改为以下内容：

```
[HttpGet]
public string Register(string userId, string key)
{
  return userId + "-" + key;
}

[HttpGet]
public string Details(string userId, string key)
{
  return userId + "-" + key
} 
```

# mysql - 在 mysql 中使用多个关键字 Like

> ID：15553621
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:22.207
> 
> 标签：mysql, if-statement, sql-like

如果文本字段值=“全部”，我想编写mysql查询来显示所有记录，否则显示类似于关键字值的记录。我在下面编写了代码只是为了给出一个想法。

```
if (keyword = 'All' )
    select * from ItemMain
else if (keyword like %itemname%)
    select * from ItemMain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:50:24.613

如果 itemname 是您的列名，并且您的搜索字符串参数替换了`?`代码中的。如果您正在搜索包含搜索字符串的所有项目名称，那么您的语句应该如下所示：

```
SELECT   * 
FROM     ItemMain
WHERE    ? = 'All' OR itemname LIKE '%?%' 
```

或者，如果您正在寻找完全匹配的内容：

```
SELECT   * 
FROM     ItemMain
WHERE    ? = 'All' OR itemname = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:52:21.743

好的，假设 PHP 作为前端语言，您可以像这样将它们全部放在一个查询中（请原谅大括号；我不确定何时需要它们，所以我倾向于过度使用它们）：

```
$query = <<< ENDSQL
SELECT *
  FROM ItemMain
  WHERE ('{$keyword}' = 'All') OR (your_textfield like '%{$keyword}%')
ENDSQL;
... execute the query 
```

但实际上我会接受@cjg 的建议并使用两个不同的查询：

```
$query = "";
if ($keyword == 'All') {
  $query = "SELECT * FROM ItemMain";
} else {
  $query = "SELECT * FROM ItemMain WHERE your_textfield LIKE '%{$keyword}%'";
}
... execute the query 
```

# java - 如何从 CXF WebService 中排除方法 - 奇怪的行为

> ID：15553625
> 
> 赞同：11
> 
> 时间：2013-03-21T16:59:31.917
> 
> 标签：java, cxf, java-ws

有人可以向我解释 CXF 的以下行为吗？

我有简单的网络服务：

```
import javax.jws.WebMethod;

public interface MyWebService {

    @WebMethod
    String method1(String s);

    @WebMethod
    String method2(String s);

    @WebMethod(exclude = true)
    String methodToExclude(String s);

} 
```

我想要我`methodToExclude`的 in 接口（用于 Spring），但我不想在生成的 WSDL 文件中使用这个方法。上面的代码正是这样做的。

但是当我`@WebService`向界面添加注释时，出现错误：

```
import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService
public interface MyWebService {

    @WebMethod
    String method1(String s);

    @WebMethod
    String method2(String s);

    @WebMethod(exclude = true)
    String methodToExclude(String s);

} 
```

> org.apache.cxf.jaxws.JaxWsConfigurationException：@javax.jws.WebMethod(exclude=true) 不能用于服务端点接口。方法：methodToExclude

谁可以给我解释一下这个？有什么不同？另外我不确定它以后是否会正常工作，但是我没有找到如何排除`methodToExclude`使用`@WebService`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-01T10:21:14.007

@javax.jws.WebMethod(exclude=true) 用于实现：

```
public class MyWebServiceImpl implements MyWebService {
    ...
    @WebMethod(exclude = true)
    String methodToExclude(String s) {
        // your code
    }
} 
```

不要在接口中包含方法 methodToExclude ：

```
@WebService
public interface MyWebService {
    @WebMethod
    String method1(String s);

    @WebMethod
    String method2(String s);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-03T18:06:14.773

为时已晚，但我想补充一下我的答案。

1.  摆脱所有**@WebMethod**，因为它们是可选的，并且仅在必须排除方法时才需要。

    ```
    import javax.jws.WebMethod;
    import javax.jws.WebService;

    @WebService
    public interface MyWebService {

      String method1(String s);

      String method2(String s);

      String methodToExclude(String s);

    } 
    ```

2.  仅将 @WebMethod(exclude = true) 添加到接口实现

    ```
    public class MyWebServiceImpl implements MyWebService {

      String method1(String s) {
        // ...
      }

      String method2(String s) {
        // ...
      }

      @WebMethod(exclude = true)
      String methodToExclude(String s) {
        // ...
      }
    } 
    ```

# php - Codeigniter，插入 ID

> ID：15553627
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:35.750
> 
> 标签：php, mysql, database, codeigniter, insert

我正在使用 CodeIgniter，我必须在我的表中插入一个 ID，但它不起作用，我做了这个：

```
$this->db->insert('mytable', $data);
$id = $this->db->insert_id(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T19:44:14.347

它已修复，我只是忘记在我的 ID 列中使用 auto_increment。谢谢 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:37:47.547

这对我来说正常工作：

```
 function insert($data){

        $this->db->insert('users',$data);
        return $this->db->insert_id();

      } 
```

您必须将`ID`字段设置为`AUTO INCREMENT`并确保`$data is an associative array`，例如：

```
$data = array(
     'db_field'=>'value'
); 
```

# html - iframe 不显示页面

> ID：15553631
> 
> 赞同：0
> 
> 时间：2013-03-21T16:59:49.120
> 
> 标签：html, google-chrome, iframe

把这个是html网页不显示页面，是什么原因？

```
<!DOCTYPE html>
<html>
<body>

<iframe src="https://secure.mom.gov.sg/iSubmit/Pages/default.aspx">
  <p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

这是我的样子，我使用的是 chrome v25。

![在此处输入图像描述](../Images/0eddc2a513169872c1b35c5ff0fdcea4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:04:10.237

主要问题是页面在 iframe 中显示时应该有一些信息。因为它通过 https 站点，所以可能不会，因此您可以在 iframe 中显示它。

第二篇文章中的更多信息：

[http://www.dotnetnuke.com/Resources/Forums/forumid/39/threadid/240336/scope/posts.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/39/threadid/240336/scope/posts.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:29:00.423

我认为 https:// 站点中的重定向存在问题。您的 src 网站没有将 iframe 评为值得信赖的平台。一般来说，iframe 不应该用于这样的整个页面。

# asp.net-mvc - 如何返回 OPENXML Word 文档的 MVC ActionResult？

> ID：15553632
> 
> 赞同：2
> 
> 时间：2013-03-21T16:59:49.927
> 
> 标签：asp.net-mvc, ms-word, openxml

我有在控制台中创建文件的基本代码（见下文）。但我正在编写一个 MVC 应用程序，所以我需要将该 XML 文档作为 ActionResult 返回......我已经在网上搜索了 2 个小时，寻找一个简单的没有运气的例子..

我要添加什么以使其成为 ActionResult ？

```
 string filePath = @"C:\temp\OpenXMLTest.docx";
        using (WordprocessingDocument doc = WordprocessingDocument.Create(filePath, WordprocessingDocumentType.Document))
        {
            //// Creates the MainDocumentPart and add it to the document (doc)     
            MainDocumentPart mainPart = doc.AddMainDocumentPart();
            mainPart.Document = new Document(
                new Body(
                    new Paragraph(
                        new Run(
                            new Text("Hello World!!!!!")))));
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T14:45:38.587

这是一些示例代码。请注意，此代码不会从磁盘加载文件，它会即时创建文件并写入 MemoryStream。写入磁盘所需的更改很少。

```
 public ActionResult DownloadDocx()
    {
        MemoryStream ms;

        using (ms = new MemoryStream())
        {
            using (WordprocessingDocument wordDocument = WordprocessingDocument.Create(ms, WordprocessingDocumentType.Document))
            {
                MainDocumentPart mainPart = wordDocument.AddMainDocumentPart();

                mainPart.Document = new Document(
                    new Body(
                        new Paragraph(
                            new Run(
                                new Text("Hello world!")))));
            }
        }

        return File(ms.ToArray(), "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "Test.docx");
    } 
```

# ruby - 具有子块返回设计的 ruby 递归循环

> ID：15553636
> 
> 赞同：1
> 
> 时间：2013-03-21T16:59:56.860
> 
> 标签：ruby, design-patterns, recursion

我有一个我正在开发的 Ruby 应用程序，由于某种原因，当使用包含内部块的递归函数从不同类的函数调用返回值时，它不能按预期工作（在示例代码中更容易看到以下）。奇怪的是，当我创建一个最小样本来尝试找出发生了什么时，该样本按预期工作。例子：

```
require 'json'

class Simple
    attr_accessor :name, :children

    def initialize(name,children=nil)
        @name = name
        @children = children
    end
end

a = Simple.new('A')
b = Simple.new('B',[a])
c = Simple.new('C',[b])
d = Simple.new('D')
e = Simple.new('E',[d])
f = Simple.new('F')
g = Simple.new('G',[e,f])

foo = [c,e,g]

def looper(d)
    holder = nil

    d.each do |item|
        # puts item.name
        if item.name == 'D'
            holder = Simple.new('Z',[])
        elsif !item.children.nil?
            holder = looper(item.children)
        end
    end

    return holder
end

bar = looper(foo)
puts "Returned from looper: #{bar.name}" 
```

在我的实际代码中，我最终使用类实例变量来获取响应（这也适用于示例代码）。上面的函数示例片段修改为其他模式：

```
def looper(d)
    holder = nil

    d.each do |item|
        # puts item.name
        if item.name == 'D'
            @holder = Simple.new('Z',[])
        elsif !item.children.nil?
            looper(item.children)
        end
    end

    @holder
end 
```

所以我的问题是，使用实例变量是一种好习惯吗？这样做有什么缺点，因为它适用于我的实际代码，而第一个示例模式不适用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:24:39.803

在您的第一段代码中，我希望`nil`从您的输入中看到 a，在您的第二个版本中，您将获得该对象`Simple.new('Z',[])`

如果这是您的问题，那是因为 item`g`有子项，第一个将重新设置一个值，但第二个将取消设置该值，因此第二次通过循环，`holder`设置为`nil`.

编辑：实际上我对上面示例结果的分析是*错误*的，因为顶级列表中的最后一项确实包含搜索项。但是，对问题的分析以及两种解决方案之间的行为差​​异仍然普遍成立。

你可能只是想要这个：

```
def looper(d)
    holder = nil

    d.each do |item|
        # puts item.name
        if item.name == 'D'
            holder = Simple.new('Z',[])
            break
        elsif !item.children.nil?
            holder = looper(item.children)
            break if holder
        end
    end

    return holder
end 
```

break 语句阻止您再次分配给`holder`. . .

或者使用 Ruby 内部结构，如`#first`或`#any?`来表达您的搜索。

根据您的第二个示例分配给实例变量以在递归之间进行相互通信很好，它们在递归运行时在所有深度和迭代之间有效地共享状态。因此，它不会破坏递归或 Ruby 本身，尽管您必须注意其他类型的不需要的交互：例如，与当前深度或循环项相比，您不能假设在递归期间将实例变量设置在特定位置。. .

# nlp - 文本挖掘——最常见的词，标准化

> ID：15553643
> 
> 赞同：4
> 
> 时间：2013-03-21T17:00:25.687
> 
> 标签：nlp, text-mining

我是一名研究员，拥有大约 17,000 个自由文本文档，其中大约 30-40% 与我的结果相关。是否有一个开源工具可以用来确定与结果相关的最常见的单词（甚至是短语，但不是必需的），对已经出现的单词的频率进行标准化？所有文件都是由卫生保健工作者编写的，因此标准化很重要，因为两个文件中都会有技术语言，并且还希望筛选出“the”、“it”等词。

我想做的是使用正则表达式或 NLP 构建一个工具，然后使用这些词来识别基于新文档的结果。我不打算花费大量时间来定制 NLP 工具，因此具有合理准确性的东西就足够了。

我知道 SAS、SQL（我正在使用 postgreSQL）和 Python，但可能会在 R 中获得成功。我以前没有做过任何 NLP。有没有我可以使用的软件没有太陡峭的学习曲线？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:39:02.630

```
 tool I can use to determine the most common words... 
  ... so something with reasonable accuracy is good enough. 
```

我建议先尝试使用 unix 文本工具。来自 coursera[自然语言处理](https://class.coursera.org/nlp/class/index)课程 Word Tokenization Lesson，Youtube 链接在[这里](http://www.youtube.com/watch?v=XkImc447pZo&list=PL8FFE3F391203C98C&index=4)。[这里](http://www.fi.muni.cz/~pary/texttools.pdf)有一个简单的教程。

为此，我们使用[tr](http://en.wikipedia.org/wiki/Tr_%28Unix%29)、[uniq](http://en.wikipedia.org/wiki/Uniq)和[sort 。](http://en.wikipedia.org/wiki/Sort_%28Unix%29)如果您以前使用过 unix 文本工具，这里是完整的命令。

```
 tr -sc 'A-Z' 'a-z'  < *.txt | tr -sc 'A-Za-z' '\n'  | sort | uniq -c | sort -n -r 
```

否则下面是每个部分的解释。

```
tr -sc 'A-Za-z' '\n' < filename.txt 
```

此命令需要 filename.txt 更改每个单词，本质上是在每个单词后添加新行。

```
tr -sc 'A-Za-z' '\n' < *.txt 
```

与上面相同，但目录中的所有 txt 文件。

```
tr -sc 'A-Za-z' '\n' < *.txt | sort 
```

管道命令进行排序。首先会以很多“a”字开头。

```
tr -sc 'A-Za-z' '\n' < *.txt | sort | uniq -c 
```

管道排序结果到 uniq 命令并计算它。

```
tr -sc 'A-Za-z' '\n' < *.txt | sort | uniq -c | sort -n -r 
```

管道您的命令再次排序以查看最常用、最常用的单词。

这里的问题：'and' 和 'And' 计数了两次

```
tr -sc 'A-Z' 'a-z'  < *.txt | tr -sc 'A-Za-z' '\n'  | sort | uniq -c | sort -n -r 
```

或者

```
tr '[:upper:]' '[:lower:]' < *.txt | tr -sc 'A-Za-z' '\n'  | sort | uniq -c | sort -n -r 
```

再次将所有单词更改为小写和相同的管道。这将为您提供文件中最常用的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T13:21:45.627

在这种特殊情况下，自然语言处理当然并不容易，也许并不真正需要。关于标准化，也许[tf-idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)就足够了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:10:55.017

GATE（文本工程的通用架构）在这里是一个有用的工具。

通过 GUI 工具在语料库上使用 Annotations 进行注释和组成短语，然后运行 ​​Java Annotation Patterns Engine (JAPE) 对此非常有帮助。

[http://gate.ac.uk/sale/tao/splitch8.html#chap:jape](http://gate.ac.uk/sale/tao/splitch8.html#chap:jape)

和

[http://gate.ac.uk/sale/thakker-jape-tutorial/GATE%20JAPE%20manual.pdf](http://gate.ac.uk/sale/thakker-jape-tutorial/GATE%20JAPE%20manual.pdf)

或者

[http://gate.ac.uk](http://gate.ac.uk)

是您可以查看的有用链接。

我们已经在我们的一个应用程序中使用此工具的帮助从医学语料库中体验了我们的体征和症状提取系统。

谢谢。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T18:27:47.140

你可以在这里找到一些有用的 R 包的链接：

[http://cran.r-project.org/web/views/NaturalLanguageProcessing.html](http://cran.r-project.org/web/views/NaturalLanguageProcessing.html)

# jsf-2 - 如何通过服务器端重置 dataTable 过滤器

> ID：15553646
> 
> 赞同：5
> 
> 时间：2013-03-21T17:00:40.647
> 
> 标签：jsf-2, primefaces

我的主要 jsf 包括 2 个 jsf，其中每个都有一个带有过滤选项的表。

这是主要的一个简短示例：

```
 <h:panelGroup id="b1">
                <p:commandButton
                    value="exe"
                    actionListener="#{bean.handle}"
                    rendered="#{bean.render}"
                    update=":mainForm:panel1,:mainForm:panel2">
                </p:commandButton>
            </h:panelGroup>
        </h:panelGrid>
    </p:panel>

    <ui:include src="table1.xhtml" />
    <ui:include src="table2.xhtml" /> 
```

问题是我需要在更改 2 个表之间的视图时删除过滤器我不能通过 clearFilters 使用客户端，因为我有 2 个表：

```
<p:commandButton
oncomplete="table1Widget.clearFilters() ????" 
```

所以我在想最好的地方是通过handle方法在服务器端，但是过滤器列表是空的，表格也是

```
DataTable dt1 = (DataTable) FacesContext.getCurrentInstance().getViewRoot().findComponent("mainForm: .... "); 
```

如何重置过滤器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T14:08:41.987

我的会话中有 2 个数据表。我不明白原因，但是当我使用`dt1.reset()`它时，它们都会重置。

我试过了

```
dt1 = new DataTable(); 
```

它解决了我的问题。

注意：`dt1.reset()`当我尝试使用 1 个数据表时有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:13:01.663

You can use either of the following on that datatable that you have:

1.  `dt1..setFilters(null);` Will get rid of the datatable filter values

2.  `dt1.reset()` will also reset the datatable to a virgin state

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T19:14:09.233

使用**Primefaces 当前**助手（6.2 版）在服务器端执行 clearFilters，如下所示：

```
PrimeFaces current = PrimeFaces.current();
current.executeScript("PF('dataTableWidget').clearFilters()"); 
```

# oracle - TYPE v_id 是 table@dblink.column%type 的表；

> ID：15553655
> 
> 赞同：2
> 
> 时间：2013-03-21T17:01:07.980
> 
> 标签：oracle, plsql

我在模式 A 中有表“测试”，并且从模式 BI 想要运行测试查询。所以创建了 DBlink 到 A.test 和 dblink name 'dbl_test' 。

现在，我可以查询为

```
select * from test@dbl_test; 
```

但是当我尝试`TYPE v_id IS TABLE OF test@dbl_test.id%TYPE;`在带有游标的 plsql 过程块中使用时，它给出了必须声明的错误，并且 dbl_test 是另一个数据库并且无法访问。

当我查询 select 语句时它正在工作，为什么不用于 TYPE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:57:23.247

将列放在`@`：

```
TYPE v_id IS TABLE OF test.id@dbl_test%TYPE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:17:04.460

数据库链接用于链接两个**数据库**，而不是模式。

在您的情况下，不清楚您是否真的需要数据库链接。您的两个模式是否在同一个数据库中？如果是，您只需授予模式 B 的相关权限，他将能够引用模式 A 的数据类型。我认为`GRANT SELECT ON A.TEST TO B`应该足以引用它的数据类型。

**编辑：**实际上可以引用远程数据类型（我不知道！）请参阅[@jonearles 的答案](https://stackoverflow.com/a/15555894/119634)。

# namespaces - 如何获取 Jena RDF 模型中使用的所有命名空间

> ID：15553657
> 
> 赞同：2
> 
> 时间：2013-03-21T17:01:16.140
> 
> 标签：namespaces, rdf, jena, turtle-rdf

我正在使用 com.hp.hpl.jena.rdf.model.Model.listNameSpaces() 来获取 Jena RDF 模型中的命名空间。

但我注意到该模型可以包含具有 listNameSpaces 方法未列出的名称空间的语句对象。

例如，相机图（[http://www-users.cs.york.ac.uk/~jc/teaching/arin/camera.owl.turtle](http://www-users.cs.york.ac.uk/~jc/teaching/arin/camera.owl.turtle)）包含以下对象，但它们的命名空间没有出现在命名空间中列表：

[http://www.dbpedia.org/resource/](http://www.dbpedia.org/resource/)尼康 [http://www.w3.org/2001/XMLSchema#](http://www.w3.org/2001/XMLSchema#)十进制

有人知道为什么没有列出这两个 ns 吗？谢谢。

//压缩代码：

```
Model model = ModelFactory.createDefaultModel();
RDFReader reader = model.getReader("TURTLE");
InputStream in = FileManager.get().open("http://www-users.cs.york.ac.uk/~jc/teaching/arin/camera.owl.turtle");
reader.read(model, in, null);

NsIterator listNameSpaces = model.listNameSpaces();
while (listNameSpaces.hasNext())
{
  System.out.println("Namespace from iterator: " + listNameSpaces.next());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T18:36:38.723

该[方法的 API 文档](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/Model.html#listNameSpaces%28%29)说：

> 返回的命名空间是（a）在模型中用作属性的每个 URI 和（b）作为 rdf:type 语句的对象出现的每个 URI 的命名空间。

由于`dbpedia:Nikon`和`xsd:decimal`分别用作 Literal 的对象和类型，因此该方法不返回命名空间。

文档还指出：

> （您可能不需要此方法；您更可能需要 Model 支持的 PrefixMapping 方法。）

它们被记录[在这里](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/shared/PrefixMapping.html)。

# ios - 我什么时候应该调用 [NSUserDefaults standardUserDefaults] registerDefaults:] 以确保 .xib 文件可以立即访问首选项？

> ID：15553659
> 
> 赞同：4
> 
> 时间：2013-03-21T17:01:26.953
> 
> 标签：ios, objective-c, macos, cocoa-touch, cocoa

我需要注册默认首选项值，然后界面在启动时立即使用这些值来设置复选框状态等。

我在应用程序委托中注册了默认值：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{ 
    NSLog(@"Did finish launching");
    NSDictionary *defaultPrefs = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:@"isEnabled"];
    [[NSUserDefaults standardUserDefaults] registerDefaults:defaultPrefs];
} 
```

然后，在通过 MainMenu.xib 文件创建的对象中，我想使用默认值：

```
- (void)awakeFromNib
{
    NSLog(@"Awake from nib");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [self.checkbox setState:([defaults boolForKey:@"isEnabled"] ? NSOnState : NSOffState)];
} 
```

但是这些调用顺序错误！

```
> Awake from nib
> Did finish launching
// Preference == `nil` or `0`, not the default value I set. 
```

因此，当我想使用它们时，没有设置默认首选项。

我应该在哪里`registerDefaults:`使用默认首选项来设置 .xib 文件接口对象？

我是否使用了错误的委托方法？`applicationDidFinishLaunching`/ `awakeFromNib`? 有哪些替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:06:28.040

我通常在[`+initialize`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/initialize)将使用它们的控制器对象的类方法中注册默认值。`+initialize`是在对象的生命周期中调用的最早方法之一，因此它确保它们尽早注册。

```
+ (void)initialize {
     NSDictionary *defaultPrefs = [NSDictionary dictionaryWithObject:
                   [NSNumber numberWithBool:YES] forKey:@"isEnabled"];
     [[NSUserDefaults standardUserDefaults] registerDefaults:defaultPrefs];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:05:08.593

`init`在您的应用委托类的方法中注册默认值。这将确保他们首先注册。

# javascript - String.charCodeAt 最大长度

> ID：15553663
> 
> 赞同：3
> 
> 时间：2013-03-21T17:01:32.280
> 
> 标签：javascript, character-encoding, base36, fromcharcode

拿这个代码：

```
var charCode = unkownVariable.charCodeAt(0); 
```

最大长度`charCode`是多少？我所有的测试结果都是 2 个字符（2 个数字）。它会更长吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:03:44.643

从[规范](http://es5.github.com/#x15.5.4.5)：

> 返回一个数字（一个小于 2 ^(16)`pos`的非负整数），表示将该对象转换为字符串后在字符串中的位置处的字符的代码单元值。如果该位置没有字符，则结果为`NaN`。

因此，2 ^(16) - 1 是最大值，即`65535`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:03:40.030

简短的回答：是的。

```
var unkownVariable = 'test';
var charCode = unkownVariable.charCodeAt(0);
console.log(charCode); // 116 
```

有 16 位用于显示字符（需要考虑不同的语言和字符集），因此理论上响应可能介于 0 和 65536 (2^16) 之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:05:10.233

MDN 说

> 请注意，charCodeAt 将始终返回小于 65,536 的值。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)

# machine-learning - 隐马尔可夫模型工具：Jahmm

> ID：15553664
> 
> 赞同：1
> 
> 时间：2013-03-21T17:01:32.830
> 
> 标签：machine-learning, hidden-markov-models

我是机器学习的新手，我已经阅读了 HMM，但我仍然有几个问题：

1.  将 HMM 应用于机器学习时，如何获得初始概率、发射概率和转移概率？

2.  目前我有一组值（包括我想通过 HMM 分类的手的角度），我的第一步应该是什么？

    *   我知道 HMM 中存在三个问题（ForwardBackward、Baum-Welch 和 Viterbi），但我应该如何处理我的数据？
3.  在我阅读的文献中，我从未遇到过在 HMM 中使用分布函数，但 JaHMM 用于 HMM 的构造函数包括：

    *   状态数
    *   概率分布函数工厂
    *   构造函数描述：创建一个新的 HMM。每个状态具有相同的 pi 值，并且转移概率都相等。参数： nbStates HMM 的（严格正数）状态数。opdfFactory 一个 pdf 生成器，用于构建与每个状态关联的 pdf。

这是干什么用的？我该如何使用它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:12:49.593

您必须以某种方式建模和学习初始、发射和转移概率，以便它们代表您的数据。在离散分布且变量/状态不多的情况下，您可以通过最大似然拟合获得它们，或者训练一个判别分类器，该分类器可以为您提供概率估计，如随机森林或朴素贝叶斯。对于连续分布，请查看高斯过程或任何其他回归方法，如高斯混合模型或回归森林。

关于您的 2\. 和 3\. 问题：在这里回答它们是笼统的和模糊的。您应该参考以下书籍：Bishop 的“Pattern Recognition and Machine Learning”和 Koller/Friedman 的“Probabilistic Graphical Models”。

# sql - 这可以写成单个 SQL Server 存储过程吗

> ID：15553665
> 
> 赞同：0
> 
> 时间：2013-03-21T17:01:40.123
> 
> 标签：sql, sql-server-2008

我在 2 个单独的数据库中有 2 个表。

表 1 包含我需要通过存储过程检索的用户信息。

表 2 (in `db2`) 具有表 1 中用户 ID 的外键。但每个用户在该表中可以有很多行数据。

我只想从此表中检索最旧的记录。

IE

```
db1.dbo.userProfile
id int
... 

db2.dbo.userRecords
id int
fk_userProfile int
DateCreated DateTime
..... 
```

例如，如果我的数据是

```
table 1
id otherData
1  ...

table 2
id fk_userProfile oldestDate otherData
1         1       10/10/2012  ....
2         1       09/10/2012  ....
3         2       10/10/2012  ....
4         1       03/03/2013  .... 
```

我想为用户 1 出去

```
id = 1, profiledata, 10/10/2012 
```

这是我最初尝试的，但它返回前 1 个用户，我需要为所有用户获取它。此外，不能保证最早的日期是第一个返回的记录。

```
SELECT TOP 1 LastDate as RenewalDate, u.* 
FROM db2.dbo.ActionDates AS uad 
INNER JOIN Users AS u ON uad.UserId = u.Id
WHERE u.shopId = @shop 
```

我已经在 2 个存储过程上进行了这项工作，在我的代码中，我让所有用户进入商店，然后遍历所有用户并在选择和订购后执行前 1 的另一张表上进行选择，但如果我有一个商店有 50 个用户，那就是 51 个查询。

那么我可以一次选择执行此操作，还是需要分阶段执行并使用临时表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:08:29.650

试试这个

对于您的样本数据和结果，请使用此

```
;with CTE as
(
select * , row_number() over (parition by up.id order by ud.id) rn
from userprofile up
inner join userrcord ud on up.id = ud.fk_userProfile
)

select * from cte where rn = 1 
```

要获取每个用户的第一行，您的示例查询应该是：

```
;with CTE as
(

SELECT LastDate as RenewalDate, u.* , 
row_number() over (parition by userid order by lastdate) rn
-- replace order by lastdate with order by ActionDates.id if you store any id
FROM db2.dbo.ActionDates AS uad 
INNER JOIN Users AS u ON uad.UserId = u.Id
WHERE u.shopId = @shop

)

select * from cte where rn = 1 
```

# python - 使用 Tweepy 按位置对推文进行排序

> ID：15553667
> 
> 赞同：4
> 
> 时间：2013-03-21T17:01:42.073
> 
> 标签：python, python-2.7, twitter, tweepy

使用 tweepy 我们可以按位置和多个位置搜索推文，例如：

```
stream.filter(locations=[-122.75,36.8,-121.75,37.8,-74,40,-73,41], track=terms) 
```

但是，当我尝试将来自 NY 的所有推文放在一个列表中并将来自 SF 的推文放在另一个列表中时，我无法将它们分配到任一列表中。这是我的代码片段：

```
NY = 74,40,-73,41
NewYorkCNN = []
if status.coordinates == NY or status.place == 'New York':
    for term in terms:
        if term in status.text:
            NewYorkCNN.append(term) 
```

如何将它们正确放置在正确的列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T12:49:46.897

您现在可能已经找到了答案，但这也是我一直在努力解决的问题，过了一段时间发现了一个足够简单的解决方案。

以下是我检查坐标并确定是否将推文数据分配到英国或美国数据库的方法。

后跟 [1] 或 [2] 的“坐标”关键字从推文中获取纬度/经度元数据，并将其与下一行中分配的边界进行比较。

我希望这有帮助 ： ）

```
class CustomStreamListener(tweepy.StreamListener):

  def check_ukcoords(self, status):
      if status.coordinates is not None:
          lat = status.coordinates['coordinates'][1]
          lng = status.coordinates['coordinates'][0]        
          return 49.7 < lat < 58.8 and -6.1 < lng < 1.7

  def check_uscoords(self, status):
      if status.coordinates is not None:
          lat = status.coordinates['coordinates'][1]
          lng = status.coordinates['coordinates'][0]        
          return 25.1 < lat < 49.1 and -125 < lng < -60.5 
```

# cakephp - CakePHP FormHelper 不同意使用 Containable 返回的数据

> ID：15553670
> 
> 赞同：1
> 
> 时间：2013-03-21T17:01:50.673
> 
> 标签：cakephp, containable, formhelper

我被一些相当简单的东西困住了：
SN hasMany NA。我使用包含的 NA 检索数据，条件是

```
 $this->find('all',array(
        'recursive' => -1,
        'conditions' => array(
            'SN.deleted IS NULL',
            'SN.user_id' => $user_id,
            ),
        'contain' => array(
            'NA' => array('conditions'=> array('wave' => 1) ),
        )
    )); 
```

SN 和 NA 都充当 Containable。

我得到了数据，但 NA 没有嵌套在 SN 数组中：

```
array(
  (int) 0 => array(
    'SN' => array(
        'id' => '1',
        'user_id' => '1',
    ),
    'NA' => array(
        (int) 0 => array(
            'id' => '1',
            'SN_id' => '1',
            'wave' => '1',
        )
    )
), 
```

这会导致使用 FormHelper 出现很多烦人的行为（我目前通过根据需要按摩数据来解决这个问题，但我仍然想了解我做错了什么），例如从 Containable 返回的数据，我无法指定路径。

```
debug($this->data[$s]['NA'][0]['wave']); # would work
echo $this->Form->input("$s.NA.0.role"); # doesn't work
# leads to data[SN][0][NA][0][role] # SN is auto-prepended
echo $this->Form->input("$s.SA.NA.0.role"); # what I use after massaging the data so it's nested 
```

即使我尝试同时按摩数据和错误消息数组，我仍然遇到验证消息未显示在应有的位置的问题。

# php - 如何使用php自动旋转带有exif方向数据的图像

> ID：15553673
> 
> 赞同：3
> 
> 时间：2013-03-21T17:02:04.997
> 
> 标签：php, image, gallery, exif

我创建了一个上传脚本，它还创建了一个工作正常的缩略图，但我现在遇到了一个问题。当我上传一些图片时，exif 方向数据会自动旋转我网站上的图片。

我已经尝试在线搜索如何检查数据并将其转回（如果有），但我无法理解我的意思。

到目前为止，这是我的代码：

```
if(isset($_POST['submit'])) {
        $allowedExts = array("jpg", "jpeg", "gif", "png", "JPG", "GIF");
        $extension = end(explode(".", strtolower($_FILES["file"]["name"])));
        if ((($_FILES["file"]["type"] == "image/gif")
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/png")
        || ($_FILES["file"]["type"] == "image/pjpeg"))
        && in_array($extension, $allowedExts)) {
            if ($_FILES["file"]["error"] > 0) {
                echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
            } else {

                $random_numer = rand(10000000, 99999999);
                $newname1 = $random_numer . $_FILES["file"]["name"];
                $scramble = md5($newname1);
                $extension = end(explode(".", $_FILES["file"]["name"]));
                $final_name = $scramble . "." . $extension;

                move_uploaded_file($_FILES["file"]["tmp_name"], "../img/gallery/" . $final_name);
                create_thumbnail($final_name);
                $stmt = $conn->prepare('INSERT INTO gallery (image) VALUES (:image)');
                $stmt->bindParam(':image', $final_name);
                $stmt->execute();

                if ($stmt->rowCount() > 0) {
                    echo "<p class='success'>The Image has been added!
                     <a href='gallery.php'>Please click here to refresh</a></p>";
                } else {
                    echo "<p class='error'>The Image was not added, there was an error.</p>";
                }

            }
        } else {
            echo "Invalid file";
        }
    } 
```

如何使图像不旋转？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:10:01.340

您必须编写另一个自定义函数，因为无法告诉 move_uploaded_file 忽略 EXIF 数据，这有点令人失望。

# excel - 以 d 结尾的 cfspreadsheet 字母数字值

> ID：15553674
> 
> 赞同：7
> 
> 时间：2013-03-21T17:02:07.620
> 
> 标签：excel, coldfusion, cfml

```
<cfscript>
Workbook = Spreadsheetnew("Workbook");
SpreadSheetSetCellValue(WorkBook, "4D", 1, 1);
// displayed 4
SpreadSheetSetCellValue(WorkBook, "4C", 1, 2);
// displayed 4C
SpreadSheetSetCellValue(WorkBook, "4E", 1, 3);
// displayed 4E
SpreadSheetSetCellValue(WorkBook, "5C", 1, 4);
// displayed 5C
SpreadSheetSetCellValue(WorkBook, "5D", 1, 5);
// displayed 5
SpreadSheetSetCellValue(WorkBook, "4d", 1, 6);
// displayed 4
MYfile = "d:\dw\dwtest\dan\abc.xls";

</cfscript>
<cfspreadsheet action="write" filename="#MYFile#" name="Workbook"  
    sheet=1 overwrite=true> 
```

**ColdFusion 设置：** 版本 9,0,1,274733
企业
操作系统 Windows 2003
操作系统版本 5.2

**Excel 版本** Office 2010 版本 14.0.6129.5000（32 位）。

如果您在系统上运行此代码，您会得到相同的结果吗？

更重要的是，如果你得到相同的结果，你知道该怎么做吗？

**编辑**

检查其他有问题的字母：

```
RowNumber = 1;
for (i = 65; i <= 90; i++){
SpreadSheetSetCellValue(WorkBook, chr(i), RowNumber, 1);
SpreadSheetSetCellValue(WorkBook, "4#chr(i)#", RowNumber, 2);
RowNumber ++;
} 
```

字符串 4F 也只显示数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:09:55.313

这里的问题是 POI 将 F 和 D 解释为 Java 具有的单/双精度后缀。[请参阅此处](http://en.wikibooks.org/wiki/Java_Programming/Literals/Numeric_Literals/Floating_Point_Literals)的文档。

我会说这是 CF 的一个错误，因为 CFML 没有这些后缀的概念（或者实际上没有单精度或双精度浮点数的概念），所以它应该确保这些字符串在传递给 POI 时被*视为字符串。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T02:17:35.000

使用 Dan 的原始代码检查麻烦的字符，我更新了它以搜索字符（通过预先或附加到给定文本来使用）来隐藏此 ColdFusion 功能：

```
WorkBook = spreadsheetNew('Test', true);
RowNumber = 1;  
for (i = 1; i <= 255; i++){
    SpreadSheetSetCellValue(WorkBook, i, RowNumber, 1);

    // what character are we displaying
    SpreadSheetSetCellValue(WorkBook, chr(i), RowNumber, 2);

    // see if appending chr(i) allows 4F to display
    SpreadSheetSetCellValue(WorkBook, "4F#chr(i)#", RowNumber, 3);

    // see if appending chr(i) allows 4F to display
    SpreadSheetSetCellValue(WorkBook, "#chr(i)#4F", RowNumber, 4);
    RowNumber ++;
} 
```

结果是前置或附加不可打印字符 chr(127) 和 chr(160) 保持 4F 或 4D 的表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:05:22.433

如果 Miguel 回答，我会将其标记为正确。这个答案的目的是展示我尝试过的各种事情以及结果如何。

```
<cfoutput>
<cfscript>
Workbook = Spreadsheetnew("Workbook");
RowNumber = 1;
for (i = 1; i <= 26; i++){
ThisUpperCaseLetter = chr(i + 64);
ThisLowerCaseLetter = chr(i  + 96);
SpreadSheetSetCellValue(WorkBook, ThisUpperCaseLetter, RowNumber, 1);
SpreadSheetSetCellValue(WorkBook, "4#ThisUpperCaseLetter#", RowNumber, 2);
SpreadSheetSetCellValue(WorkBook, ThisLowerCaseLetter, RowNumber, 3);
SpreadSheetSetCellValue(WorkBook, "4#ThisLowerCaseLetter#", RowNumber, 4);
SpreadSheetSetCellValue(WorkBook, "'4#ThisLowerCaseLetter#'", RowNumber, 5);
 // SpreadSheetSetCellFormula(WorkBook, "'4#ThisLowerCaseLetter#'", RowNumber, 6);  
/*
The line above threw this error
org.apache.poi.ss.formula.FormulaParser$FormulaParseException: 
Parse error near char 0 ''' in specified formula ''4a''. 
Expected number, string, or defined name 
*/

SpreadSheetSetCellValue(WorkBook, """4#ThisLowerCaseLetter#""", RowNumber, 6);
SpreadSheetSetCellValue(WorkBook, "\'4#ThisLowerCaseLetter#\'", RowNumber, 7);
      // the next line is the only one that will achieve the desired result
SpreadSheetSetCellFormula(WorkBook, """4#ThisLowerCaseLetter#""", RowNumber, 8);
RowNumber ++;
}
MYfile = "d:\dw\dwtest\dan\abc.xls";

</cfscript>
</cfoutput>
<cfspreadsheet action="write" filename="#MYFile#" name="Workbook"  
    sheet=1 overwrite=true> 
```

任何带有 SpreadsheetCellValue 的东西都会显示引号，加上我用来试图转义它们的反斜杠。如上所述，带有三引号的 SpreadsheetSetCellFormula 似乎是 100% 的时间给出预期结果的唯一方法。

**更多信息** 在我的实际应用程序中，我使用 cfheader/cfcontent 来提供文件。如果我选择打开，使用 IE9，Excel 会显示危险内容警告并为我提供启用编辑的按钮。此外，使用 SpreadSheetSetCellFormula() 创建的任何单元格都显示数字 0。选择该单元格会在 excel 值框中显示实际值，或者任何所谓的值。此外，启用编辑会将显示更改为预期值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T01:52:31.667

FWIW，CF11+ 为[SpreadSheetSetCellValue](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-s/spreadsheetsetcellvalue.html)引入了一个新的数据类型属性。使用“字符串”类型保留原始值并产生预期结果，即“4D”

```
SpreadSheetSetCellValue(WorkBook, "4D", 1, 1, "string"); 
```

# oop - 原始和简洁的类名？

> ID：15553680
> 
> 赞同：4
> 
> 时间：2013-03-21T17:02:16.533
> 
> 标签：oop, terminology

我怎样才能想出避免通用风格词的原始类名，例如 BlahManager ？

另外如何避免长类名？这是Java的一个例子：

`InternalFrameInternalFrameTitlePaneInternalFrameTitlePaneMaximizeButtonWindowNotFocusedState`（来自 com.sun.java.swing.plaf.nimbus）

在给定的上下文中，我认为您可以缩短这些名称。假设在库或子库中使用了一个类，这样类的部分目的是隐含的。

我不想在这里开始讨论，而是想深入了解在提出名称时使用的逻辑或推理。

编辑：这是一个（有趣的）生成器链接：[http ://projects.haykranen.nl/java/](http://projects.haykranen.nl/java/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:10:18.140

另一个（关闭的）Stackoverflow 问题充满了很好的见解，我想不出任何可以添加的东西，除了 Sun 应该考虑“照我说的做，而不是照我做的”（他们通常显示不甚至是避免过度冗长的模糊愿望）：[命名类的最佳方法是什么？](https://stackoverflow.com/questions/38019/whats-the-best-approach-to-naming-classes)

它包含了许多来自伟大作者和编程哲学家的优秀引用

# python - 创建 epoll()able 对象

> ID：15553685
> 
> 赞同：3
> 
> 时间：2013-03-21T17:02:23.597
> 
> 标签：python, linux, select, epoll

是否可以创建一个支持的对象`epoll()`？

我假设`epoll_*`系统调用依赖于兼容的系统 fd 使得创建具有兼容的“伪 fd”的对象变得困难（如果不是不可能的话）——但我想我会看看我是否错了。（它发生了：p）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:52:28.957

让对象写入 a 的一侧`pipe(2)`，并将另一端传递给`epoll.register()`。显然该对象不能在同一个线程中同时运行`epoll.poll()`。但这仍然留下了其他有效的用例。

# sql-server - 按季度划分

> ID：15553687
> 
> 赞同：0
> 
> 时间：2013-03-21T17:02:25.470
> 
> 标签：sql-server, sql-server-2008-r2

如何添加另一列将它们按季度（1 月至 3 月、4 月至 6 月、6 月至 9 月）进行分区，然后添加另一个计数器以跟踪季度并定义 2011 年第一季度与 2012 年第一季度不同。本质上如何我会添加 Quarters 和 Tracker 列吗？我查看了 ROW_NUMBER()、NTILE 函数，但不确定如何将它们与月份结合起来。

```
--- Period --- Quarters---Tracker
2012-05-06       2          1
2012-05-20       2          1          
2012-06-03       2          1
2012-07-01       3          2
2012-08-12       3          2
2012-08-26       3          2
2012-09-09       3          2
2012-10-07       4          3
2012-10-21       4          3
2012-11-04       4          3
2012-11-18       4          3
2012-12-02       4          3
2012-12-16       4          3
2012-12-30       4          3 
2013-01-13       1          4
2013-01-27       1          4 
```

真的卡住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:31:48.480

我将季度`CASE`逻辑放在表定义中，但您也可以将其放在查询中，这样您就不必修改表。

```
Create  Table Blah 
(
        SampleDate Date Default(Convert(Date,Getdate())),
        Quarters As (   Case
                        When    Month(SampleDate) Between 1 And 3 Then 1
                        When    Month(SampleDate) Between 4 And 6 Then 2
                        When    Month(SampleDate) Between 7 And 9 Then 3
                        Else    4 End)
)

Insert  Blah (SampleDate)
Select  '2012-05-06'
Union   All
Select  '2012-05-20'
Union   All
Select  '2012-06-03'
Union   All
Select  '2012-07-01'
Union   All
Select  '2012-08-12'
Union   All
Select  '2012-09-09'
Union   All
Select  '2012-10-07'
Union   All
Select  '2012-11-04'
Union   All
Select  '2012-12-16'
Union   All
Select  '2013-01-13'
Union   All
Select  '2013-01-27'

Select  *, 
        Dense_Rank() Over (Order By Year(SampleDate),Quarters) As Tracker
From    Blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:12:45.497

所以你想要一个简单的列来代表你的实际季度？您想在 2012-Q1、2011-Q1、2010-Q1 上使用 SQL 分区？或者你想要2列？一个用于分区，另一个用于实际指示年份？

想一想，你需要一个柜台吗？您不能将另一列设置为年份吗？

所以你会有2列。一个表示季度，另一个表示年份

```
quarter year
1       2011
1       2012
1       2010 
```

# entity-framework - 更改关联时是否必须手动设置外键属性？

> ID：15553688
> 
> 赞同：9
> 
> 时间：2013-03-21T17:02:29.133
> 
> 标签：entity-framework, entity-framework-4

我正在使用带有 DbContext 的 Database First 从 Linq-to-SQL 迁移到 Entity Framework (4.4)。我想知道以下行为是否正常：

```
using (var e = new AgendaEntities()) {
    var store = e.Stores.First();
    var office = e.Offices.Create();
    office.Store = store; // Set association
    Console.WriteLine(office.StoreID); // shows Guid.Empty, expected store.ID!
} 
```

在 L2S 中，设置与`Store`实体的关联也会更新`StoreID`密钥。在 EF 中，这似乎没有发生。这与实体是新的还是从上下文加载的无关。

当 I 时`SaveChanges`，它会正确保存并`StoreID`更新为 match `office.ID`，但为什么这只会在保存后发生？

有什么我遗漏的，还是我现在应该手动保持外键同步？

* * *

**解决方案编辑：** 这称为属性修复，过去由生成的代理自动完成。但是，`DbContext`情况不再如此。根据[这个 Connect issue](http://connect.microsoft.com/VisualStudio/feedback/details/760609/poco-navigation-proxies-should-fixup-the-other-end-automatically)，这是设计使然。

> 您好，DbContext 模板实际上不会生成将用作更改跟踪代理的类 - 只是延迟加载代理（不进行修复）。我们做出这个决定是因为变更跟踪代理很复杂，并且有很多细微差别，可能会让开发人员感到非常困惑。如果您希望在 SaveChanges 之前进行修复，您可以调用 myContext.ChangeTracker.DetectChanges。~EF 团队

另一种方法是调用`DbContext.Entry(entity)`，它将同步实体。这在本文中进行了描述：“同步 FK 和导航属性之间的更改”下的[关系和导航属性](http://msdn.microsoft.com/en-us/data/jj713564.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:05:24.133

不，实体框架会为你做这件事。阅读[关系和导航属性](http://msdn.microsoft.com/en-us/data/jj713564.aspx)以获取更多信息。

> 通过将新对象分配给导航属性。以下代码在课程和**`department`**. 如果对象附加到上下文，**`course`**则也将添加到**`department.Courses`**集合中，并且课程对象上的相应外键属性设置为 的键属性值**`department`**。
> 
> *   **`course.Department = department;`**

但正如您所观察到的，这只发生在您调用`SaveChanges`或上面链接文档的“同步 FK 和导航属性之间的更改”部分中提到的其他操作之一之后。

> 如果您使用没有代理的 POCO 实体，则必须确保调用 DetectChanges 方法以同步上下文中的相关对象。请注意，以下 API 会自动触发 DetectChanges 调用。
> 
> *   数据库集.Add
> *   数据库集.查找
> *   DbSet.Remove
> *   DbSet.Local
> *   DbContext.SaveChanges
> *   DbSet.Attach
> *   DbContext.GetValidationErrors
> *   DbContext.Entry
> *   DbChangeTracker.Entries
> *   对 DbSet 执行 LINQ 查询

如果这根本没有发生*，*我的猜测是您没有正确定义`StoreID`为导航属性的外键`Store`。

# regex - htaccess 中的重复重定向匹配

> ID：15553691
> 
> 赞同：0
> 
> 时间：2013-03-21T17:02:36.953
> 
> 标签：regex, .htaccess, mod-rewrite

**免责声明：**我不太擅长 mod_rewrite 或 regex。

我的根 .htaccess 中有以下内容：

```
RedirectMatch 301 ^(.+\.pdf)$ files/$1 
```

我想要实现的是`.pdf` **根文件夹中**具有扩展名的任何文件都将被重定向到`/files`子目录。

问题是这与`.pdf`网站上的任何内容相匹配，并且在子文件夹中似乎会再次出现，例如

`mydomain.com/some.pdf`变得`mydomain.com/files/some.pdf`如预期。

然而：

`mydomain.com/sub/some.pdf``mydomain.com/files/files/files/files/files/files/sub/some.pdf`当我根本不想重写这个 url 时就变成了。我假设它遇到了一个无限循环，但在多次重定向后会自行取消。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:04:45.107

`RedirectMatch 301 ^([^/]+\.pdf)$ files/$1`

这里的关键是使用`[^/]+`而不是`.+`这样你就不会`/`成为你的模式的一部分。这会将您的模式隔离为仅匹配根目录中的 pdf 文件。

# vb.net - 计算字符串或字节数组的 CRC32

> ID：15553697
> 
> 赞同：4
> 
> 时间：2013-03-21T17:02:44.630
> 
> 标签：vb.net, hash, crc32

VB.NET 是否有任何函数或示例来计算字符串或字节数组的 CRC32？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T17:42:11.220

用这个：

```
Private Sub Main()
    Crc32.ComputeChecksum(Encoding.UTF8.GetBytes("Some string")).Dump()
End Sub

Public Class Crc32
    Shared table As UInteger()

    Shared Sub New()
        Dim poly As UInteger = &Hedb88320UI
        table = New UInteger(255) {}
        Dim temp As UInteger = 0
        For i As UInteger = 0 To table.Length - 1
            temp = i
            For j As Integer = 8 To 1 Step -1
                If (temp And 1) = 1 Then
                    temp = CUInt((temp >> 1) Xor poly)
                Else
                    temp >>= 1
                End If
            Next
            table(i) = temp
        Next
    End Sub

    Public Shared Function ComputeChecksum(bytes As Byte()) As UInteger
        Dim crc As UInteger = &HffffffffUI
        For i As Integer = 0 To bytes.Length - 1
            Dim index As Byte = CByte(((crc) And &Hff) Xor bytes(i))
            crc = CUInt((crc >> 8) Xor table(index))
        Next
        Return Not crc
    End Function
End Class 
```

# jquery - 使用按钮过滤 Jquery 数据表

> ID：15553701
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:02:51.623
> 
> 标签：jquery

我有一个数据表，其中显示了一个名为 Reference 的字段。我还有一个显示最新条目的新闻提要，它也具有相同的参考字段。

我正在寻找一种解决方案，通过单击新闻提要中的超链接，将过滤数据表以仅显示该引用。

这甚至可能吗？如果是这样，一些例子将是最受欢迎的。

问候

jQuery 代码。

```
 $.datepicker.regional[""].dateFormat = 'dd/mm/yy';
               $.datepicker.setDefaults($.datepicker.regional['']);

               oTable = $('#tblMessageDetail').dataTable({
                   "aaData": dtDetailData,
                   "aLengthMenu": [[50, 100, -1], [50, 100, "ALL"]],
                  // 'aStripClasses': null,
                   "iDisplayLength": 50,
                   //"aaSorting": [[0, "asc"]],
                   "bJQueryUI": true,
                   //"bAutoWidth": false,
                   //"bProcessing": true,
                  // "sDom": 'RC<"clear">lfrtip',
                   "sDom": 'RC<"H"lfr>t<"F"ip>',

                   "aoColumnDefs": [
                       {"bVisible": false, "aTargets": [11,12,13,14]}
                   ],

                  // "sDom": 'C<"top"lfr>t<"F"ip>',
                   //"sPaginationType": "full_numbers",
                   //"bRetrieve": true,

                   //Scrolling .......
                   "sScrollY": "250px",
                   "sScrollX": "100%",
                   "sScrollXInner": "100%",
                   "bScrollCollapse": true,

                   //Dynamic Language .......
                   "oLanguage": {
                       "sZeroRecords": "There are no messages that match your search criteria",
                       "sLengthMenu": "Display _MENU_ records per page&nbsp;&nbsp;",
                       "sInfo": "Displaying _START_ to _END_ of _TOTAL_ records",
                       "sInfoEmpty": "Showing 0 to 0 of 0 records",
                       "sInfoFiltered": "(filtered from _MAX_ total records)",
                       "sEmptyTable": 'No Rows to display.....!',
                       "sSearch": "Search all columns:"
                   },
                   "oSearch": {
                       "sSearch": "",
                       "bRegex": false,
                       "bSmart": true
                   }

               }); 
```

现在是 asp.net 中继器：

```
<div class="module_content">
<asp:Repeater runat="server" ID="rptSenderBIC" >
<ItemTemplate>
<div class="message">
<p><strong>Message Type:&nbsp;</strong><asp:Literal ID="ltMessageDetail" 
runat="server" Text='<%# Eval("MsgType") %>'></asp:Literal></p>                               
<p><strong>Message Date:&nbsp;</strong><asp:Literal ID="ltMsgDate" 
runat="server" Text='<%# Eval("MsgDate") %>'></asp:Literal></p>
<p><strong>Message Time:&nbsp;</strong><asp:Literal ID="ltMsgTime" 
runat="server" Text='<%# Eval("MsgTime") %>'></asp:Literal></p>
<p><strong>Reference:&nbsp;</strong><a href="#"><asp:Literal ID="ltMsgRef" 
runat="server" Text='<%# Eval("MsgRef") %>'></asp:Literal></a></p>
</div>
</ItemTemplate>
</asp:Repeater>                    
</div> 
```

所以，中继器的参考被选中，它的值应该在数据表中过滤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:30:26.860

我认为你可以实现你想要的`.fnFilter()`。

[http://datatables.net/ref](http://datatables.net/ref)

```
Filter the input based on data

$(document).ready(function() {
  var oTable = $('#example').dataTable();

  // Sometime later - filter...
  oTable.fnFilter( 'test string' );
} ); 
```

我不清楚您要响应的 HTML 结构（我根本不懂 ASP），但这样的事情可能是一个开始：

```
$('div.messages p:last-child a').click(function()
    {
    oTable.fnFilter("Reference");
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:35:21.150

好的 - 排序它。我不得不使用 event.preventDefault 来停止回帖，然后使用

```
 $("a").click(function(event){ oTable.fnFilter(this.innerHtml); }); 
```

现在就弄清楚如何重置桌子，然后好好工作

# javascript - 隐藏 div 的更好方法

> ID：15553703
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:02:56.797
> 
> 标签：javascript, jquery, css, html

我正在尝试关闭一个 div 将他的不透明度设置为 0。但它不起作用

这是我的代码：

HTML：

```
<div id='divinfo'  style='position:absolute; bottom:2px; right:8px; width:40px; height: 41px; '><img id='divinfo' ontouchstart='openhelp();return false;' src='img/button_settings_inactive.png'></img></div>

         <div id='janelaConfig' style="display:block; opacity:0.0; height:5px; position:absolute; width:50px; left:100px; top: 175px; background-color:white; padding:20px;">

             <div id="wrapper2">
                 <div id="scroller2">
                     <p>Escolha sua regiao </p>
                     <form id="form1" name="form1" method="post" action="">
                         <label for="txtRegiao"></label>
                         <select name="estado" id="estado" onchange="setCidade(this.SelectedIndex)">
                             <option name="BR" value="BR">Barueri</option>
                             <option name="BH" value="BH">Belo Horizonte</option>
                             <option name="BS" value="BS">Brasilia</option>
                             <option name="CP" value="CP">Campinas</option>
                             <option name="CU" value="CU">Cuiaba</option>
                             <option name="CT" value="CT">Curitiba</option>
                             <option name="DI" value="DI">Diadema</option>
                             <option  value="DQ">Duque de Caxias</option>
                             <option value="FL">Florianopolis</option>
                             <option value="FO">Fortaleza</option>
                             <option value="GO">Goiania</option>
                             <option value="GU">Guarulhos</option>
                             <option value="PA">Porto Alegre</option>
                             <option value="OS">Osasco</option>
                             <option value="RE">Recife</option>
                             <option value="RJ">Rio de Janeiro</option>
                             <option value="SS">Salvador</option>
                             <option value="SA">Santo Andre</option>
                             <option value="SB">São Bernardo do Campo</option>
                             <option value="SC">São Caetano do Sul</option>
                             <option value="SP">São Paulo</option>
                             <option value="VI">Vitória</option>
                         </select>
                         <p>Audio</p>
                         <select name="audio" id="audio" onchange="setAudio(this.SelectedIndex)">
                             <option value="on">Ligado</option>
                             <option value="off">Desligado</option>
                             <select><br><br><br>
                                 </form>
                     <p>&nbsp;</p>
                 </div>
                 <p>&nbsp;</p>
                 </div>
             </div>
                <div id="close"><img id='fechar' ontouchstart='closehelp();return false;' style='display:none; position:absolute; top:10px; right:3px;'  src='img/btn-fechar.png' /></div> 
```

jQuery：

```
function closehelp() {

    $("#janelaConfig").animate({
        width: "50px",
        height: "5px",
        top: "175px",
        left: "100px",
        opacity: 0.0

    }, 250);
    $("#lblStatus").text("");
    $("#fechar").hide();

    $("#divinfo").show();
};

function openhelp() {

    $("#janelaConfig").animate({
        width: "82%",
        height: "70%",
        top: "20px",
        left: "8px",
        opacity: 0.9

    }, 250, function () {
        $("#fechar").show();

    });

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:09:11.590

不幸的是，处理不透明度的最佳方法是通过几个 CSS 标签：

```
.myElement {
    filter:alpha(opacity=50);
    -moz-opacity:0.5;
    -khtml-opacity:0.5;
    opacity:0.5;
} 
```

但是，一旦你的不透明度达到 0，你最好只用隐藏元素

```
display:none; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:12:10.100

`opacity`只会改变`opacity`元素的，`width`不受影响。实际上，元素仍然存在，只是不可见。`height``display`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:09:00.500

从您对另一个答案的评论中：

```
function closehelp() {
    $("#janelaConfig").animate({ width: "50px", height: "5px", top : "175px", left : "100px", opacity: 0.0,display:"none" },250);
    $("#lblStatus").text("");
    $("#fechar").hide();
    $("#divinfo").show();
}; 
```

将您的功能更改为：

```
function closeHelp() {
    $('#janelaConfig').animate({
        height: 5,
        top: 175,
        left: 100,
        opacity: 0
    }, 250, function() {
        $(this).hide();
    });
    $("#lblStatus").text("");
    $("#fechar").hide();
    $("#divinfo").show();
}) 
```

这将在动画完成*后将*`display`您的元素设置为。`none`

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:51:25.180

我创建了另一个 div 并将 janelaConfig 放在里面..效果很好*

# c# - 尝试从活动目录检索数据时发生操作错误

> ID：15553708
> 
> 赞同：0
> 
> 时间：2013-03-21T17:03:03.890
> 
> 标签：c#, sharepoint-2010, active-directory

我正在尝试从活动目录中获取管理器名称，但在引发异常时收到错误“发生操作错误”。

代码如下：

```
public override void ItemAdding(SPItemEventProperties properties)
{
   base.ItemAdding(properties);

   try 
   {
      var requester = properties.Web.CurrentUser;

      properties.AfterProperties["Requester"] = requester;

      //Get the manager name from the active directory
      var domain = System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().DomainName;
   DirectoryEntry dir = new DirectoryEntry("LDAP://" + domain);
      //Exeception occurs on this line below.
      string managerName = dir.Properties["Manager"].Value.ToString();

      properties.AfterProperties["Manager"] = managerName;

   }
   catch(Exception ex)
   {

   }
} 
```

**编辑** 能够使用以下代码弄清楚这一点：

```
try
    {
        // set up domain context
        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

        // find a user
        UserPrincipal user = UserPrincipal.FindByIdentity(ctx, Environment.UserName);
        string samAccountName = "";

        if (user != null)
        {
            // do something here....     
            samAccountName = user.SamAccountName;
        }

        //Get the manager name from the active directory
        var domain = System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().DomainName;

        using(DirectoryEntry dir = new DirectoryEntry("LDAP://" + domain))
        {
            using (DirectorySearcher ds = new DirectorySearcher(dir, "samAccountName=" + samAccountName))
            {

                SearchResult result = ds.FindOne();

                string managerName = result.Properties["manager"][0].ToString();
            }
        }

    }
    catch (Exception ex)
    {
        var message = ex.Message;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:39:42.523

您正在尝试从域访问管理器，而不是从请求者。

在一个winform中，假设请求者== samAccountName，我会这样做：

```
 try
        {

            //Get the manager name from the active directory
            var domain = System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties().DomainName;
            using (DirectoryEntry dir = new DirectoryEntry("LDAP://" + domain))
            {
                using (DirectorySearcher ds = new DirectorySearcher(dir, "samAccountName=" + requster))
                {
                    SearchResult sr = ds.FindOne();
                    //Exeception occurs on this line below, if the attribute is not set.
                    string managerName = sr.Properties["Manager"][0].ToString();
                }
            }

        }
        catch (Exception ex)
        {

        } 
```

# azure - 使用 nuget 从 bitbucket 部署到 azure 失败

> ID：15553709
> 
> 赞同：0
> 
> 时间：2013-03-21T17:03:06.423
> 
> 标签：azure, nuget, bitbucket

我正在使用**NancyFX并通过****Nuget**将它添加到我的解决方案中。当我将解决方案发布到 Azure 时，解决方案被编译并且 nancy dll 毫无问题地进入 Azure。我也是**Bitbucket**用户，所以我尝试了continuos部署，但出现问题是因为`Nancy.dll`服务器上没有。

我需要将 bin dll 推送到 bitbucket 吗？

Azure 可以使用**Nuget**包信息下载外部引用吗？

# android - 在带有 GeoServer 的 Android 应用程序中使用 getTileURL

> ID：15553715
> 
> 赞同：8
> 
> 时间：2013-03-21T17:03:20.567
> 
> 标签：android, overlay, google-maps-android-api-2, geoserver, wms

我们刚刚开始在 Android 上使用 Google 地图，并设置了一个 GeoServer 来提供我们希望添加为地图上的叠加层的图块。到目前为止，我已经按照一些教程和参考资料开始学习。

*   [获取 MyLocation](http://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2-mylocation-locationsource-and-event-handling/)
*   [在 Android 上设置 WMS](http://www.azavea.com/blogs/labs/2013/01/wms-on-android/)
*   [仓库管理系统参考](http://docs.geoserver.org/latest/en/user/services/wms/reference.html#getmap)

**问题**：虽然当我设置断点并将 url 复制并粘贴到浏览器中时，我在`getTileUrl`函数中生成的 url`TileProviderFactory`确实返回了 png 图像，但它不会作为 Android 设备上的叠加层加载到地图上. 从我所看到的内容中没有抛出任何错误，在阅读完[这篇](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4995)文章后，我不确定是否会有任何错误，因为他们已经表明错误正在被忽略。

**我想知道**的是，您是否可以在我的代码中看到任何直接问题，或者对调试有任何建议，我将能够判断应用程序是否实际上正在与我的 GeoServer 通信以检索图像。我查看了 GeoServer 上的日志，似乎只有我的浏览器请求正在通过，并且没有收到来自 Android 的任何请求（这有点难以分辨，因为我们还有其他应用程序也在使用该服务器）。Android手机通过wifi和手机连接，并启用了gps。作为最后的手段，我尝试更改平铺覆盖 zIndex 并将其设置为可见，但这似乎没有任何区别。

编辑：Android 设备此时绝对没有与 GeoServer 通信。

编辑2：能够从网站（如[this](http://www.sireasgallery.com/iconset/hearts/Heart-transparent_256x256_32.png)）加载静态图像作为覆盖，并发现我在测试对形成的URL的HTTP请求时遇到以下异常：

```
W/System.err(10601): java.net.SocketException: The operation timed out
W/System.err(10601): at org.apache.harmony.luni.platform.OSNetworkSystem
     .connectStreamWithTimeoutSocketImpl(Native Method)
W/System.err(10601): at org.apache.harmony.luni.net.PlainSocketImpl
     .connect(PlainSocketImpl.java:244)
W/System.err(10601): at org.apache.harmony.luni.net.PlainSocketImpl
     .connect(PlainSocketImpl.java:533)
W/System.err(10601): at java.net.Socket
     .connect(Socket.java:1074)
W/System.err(10601): at org.apache.http.conn.scheme.PlainSocketFactory
     .connectSocket(PlainSocketFactory.java:119) 
```

谢谢。

## 地图测试活动

```
public class MapTestActivity extends FragmentActivity
    implements LocationListener, LocationSource{

    private GoogleMap mMap;
    private OnLocationChangedListener mListener;
    private LocationManager locationManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map_test);     
        setupLocationManager();     
        setupMapIfNeeded();
    }

    private void setupLocationManager() {
        this.locationManager = 
            (LocationManager) getSystemService(LOCATION_SERVICE);

        if (locationManager != null) {
            boolean gpsIsEnabled = locationManager.isProviderEnabled(
                    LocationManager.GPS_PROVIDER);
            boolean networkIsEnabled = locationManager.isProviderEnabled(
                    LocationManager.NETWORK_PROVIDER);

            if(gpsIsEnabled) {
                this.locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, 5000L, 10F, this);
            }
            else if(networkIsEnabled) {
                this.locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, 5000L, 10F, this);
            }
            else {
                //Show an error dialog that GPS is disabled...
            }
        }
        else {
            // Show some generic error dialog because 
            // something must have gone wrong with location manager.
        }
    }

    private void setupMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the
        // map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
            mMap.setLocationSource(this);
        }
    }

    private void setUpMap() {
        // TODO Auto-generated method stub
        mMap.setMyLocationEnabled(true);
        TileProvider geoServerTileProvider = TileProviderFactory
            .getGeoServerTileProvider();
        TileOverlay geoServerTileOverlay = mMap.addTileOverlay(
            new TileOverlayOptions()
                .tileProvider(geoServerTileProvider)
                .zIndex(10000)
                .visible(true));
    }
    // Non-relevant listener methods removed
} 
```

## TileProviderFactory

```
public class TileProviderFactory {

    public static GeoServerTileProvider getGeoServerTileProvider() {

        String baseURL = "mytileserver.com";
        String version = "1.3.0";
        String request = "GetMap";
        String format = "image/png";
        String srs = "EPSG:900913";
        String service = "WMS";
        String width = "256";
        String height = "256";
        String styles = "";
        String layers = "wtx:road_hazards";

        final String URL_STRING = baseURL + 
                "&LAYERS=" + layers + 
                "&VERSION=" + version + 
                "&SERVICE=" + service + 
                "&REQUEST=" + request + 
                "&TRANSPARENT=TRUE&STYLES=" + styles + 
                "&FORMAT=" + format + 
                "&SRS=" + srs + 
                "&BBOX=%f,%f,%f,%f" + 
                "&WIDTH=" + width + 
                "&HEIGHT=" + height;

        GeoServerTileProvider tileProvider = 
            new GeoServerTileProvider(256,256) {

            @Override
            public synchronized URL getTileUrl(int x, int y, int zoom) {
                try {       

                    double[] bbox = getBoundingBox(x, y, zoom);

                    String s = String.format(Locale.US, URL_STRING, bbox[MINX], 
                            bbox[MINY], bbox[MAXX], bbox[MAXY]);

                    Log.d("GeoServerTileURL", s);

                    URL url = null;

                    try {
                        url = new URL(s);
                    } 
                    catch (MalformedURLException e) {
                        throw new AssertionError(e);
                    }

                    return url;
                }
                catch (RuntimeException e) {
                    Log.d("GeoServerTileException", 
                        "getTile x=" + x + ", y=" + y + 
                        ", zoomLevel=" + zoom + 
                        " raised an exception", e);
                    throw e;
                }

            }
        };
        return tileProvider;
    }
} 
```

## GeoServerTileProvider

```
public abstract class GeoServerTileProvider extends UrlTileProvider{

    // Web Mercator n/w corner of the map.
    private static final double[] TILE_ORIGIN = 
        {-20037508.34789244, 20037508.34789244};
    //array indexes for that data
    private static final int ORIG_X = 0; 
    private static final int ORIG_Y = 1; // "

    // Size of square world map in meters, using WebMerc projection.
    private static final double MAP_SIZE = 20037508.34789244 * 2;

    // array indexes for array to hold bounding boxes.
    protected static final int MINX = 0;
    protected static final int MINY = 1;
    protected static final int MAXX = 2;
    protected static final int MAXY = 3;

    public GeoServerTileProvider(int width, int height) {
        super(width, height);
    }

    // Return a web Mercator bounding box given tile x/y indexes and a zoom
    // level.
    protected double[] getBoundingBox(int x, int y, int zoom) {
        double tileSize = MAP_SIZE / Math.pow(2, zoom);
        double minx = TILE_ORIGIN[ORIG_X] + x * tileSize;
        double maxx = TILE_ORIGIN[ORIG_X] + (x+1) * tileSize;
        double miny = TILE_ORIGIN[ORIG_Y] - (y+1) * tileSize;
        double maxy = TILE_ORIGIN[ORIG_Y] - y * tileSize;

        double[] bbox = new double[4];
        bbox[MINX] = minx;
        bbox[MINY] = miny;
        bbox[MAXX] = maxx;
        bbox[MAXY] = maxy;
        return bbox;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T14:53:27.830

结果证明这是一个网络问题，与我的“正确”实现完全无关。我想这个问题对于开始使用 Android + GeoServer 实现的其他人来说是一个很好的例子，所以我会留下它。

# objective-c - 如何根据父对象定义子对象？

> ID：15553718
> 
> 赞同：0
> 
> 时间：2013-03-21T17:03:32.773
> 
> 标签：objective-c, oop, parent-child

这是一个普遍的问题。我可以将我的问题分为两个：

我有一个继承自 ParentClass 的 Class ChildClass。

*   ParentClass 有很多属性和方法。
*   ChildClass 有一些新方法和一些新属性。

1）我想定义一个`initFromParentClass`方法，其签名将是

```
 - (id) initFromParentClass:(ParentClass)anObjectFromTheParentClass 
```

这将创建一个新的实例`ChildClass`，基于`anObjectFromTheParentClass`——也就是说，新实例的所有属性都是从“父实例”的属性“复制”的。

2）这两个父/子对象可以动态链接吗？即：如果父母改变，孩子改变？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:39:50.643

一个熟悉的习惯用法是让子类将现有方法委托给父类的实例：

```
 @implementation ChildClass
 @property (nonatomic, strong) ParentClass *obj;
 - (void) mill
 {
      [obj mill];
 }

 - (NSInteger) count
 {
       return [obj count];
 } 
```

如果 ParentClass 具有广泛且快速变化的 API，这可能会很乏味且难以维护。在这种情况下，您可能根本不想继承，而是希望从 ParentClass 和 ChildClass 中提取一个公共接口，并可能让 ChildClass 的实例观察初始化它们的对象的变化。

# matlab - matlab 只删除顶部和右侧的勾号并留下框

> ID：15553720
> 
> 赞同：18
> 
> 时间：2013-03-21T17:03:33.563
> 
> 标签：matlab, plot

在 Matlab 图中，我想只从顶部和右侧轴上删除刻度，同时保持绘图框处于打开状态。

我知道如果我关闭绘图框，顶部和右侧的刻度就会消失。但是，这不是我想要的。换句话说，我只想在底部和左侧保留刻度，同时希望保持绘图框处于打开状态。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-20T20:07:42.347

我的解决方法类似于@j_kubik 命题：

```
plot(1:10)
% get handle to current axes
a = gca;
% set box property to off and remove background color
set(a,'box','off','color','none')
% create new, empty axes with box but without ticks
b = axes('Position',get(a,'Position'),'box','on','xtick',[],'ytick',[]);
% set original axes as active
axes(a)
% link axes in case of zooming
linkaxes([a b]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:14:08.457

您可以使用`box off`删除刻度，然后使用绘图将框拉回来。例如：

```
figure
hold on
box off
plot(1:10)
plot([1,10],[10, 10],'k')
plot([10,10],[1,10],'k') 
```

# java - Hadoop 和 jgit 在 java.io.file 和 dataoutputstream 之间转换

> ID：15553722
> 
> 赞同：0
> 
> 时间：2013-03-21T17:03:35.753
> 
> 标签：java, hadoop

您好，我正在尝试在 git 存储库上运行 map reduce 作业。我想使用映射作业首先将所有存储库同时克隆到 hdfs，然后对文件执行进一步的映射缩减作业。我遇到了一个问题，我不确定如何将存储库文件写入 hdfs。我见过编写单个文件的示例，但那些在映射器之外并且只写单个文件。jgit api 仅公开一个从文件继承的文件存储库结构，但 hdfs 使用写为数据输出流的路径。有没有一种很好的方法可以在两者或任何类似的例子之间进行转换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:09:55.493

The input data to Hadoop Mapper must be on HDFS and not on your local machine or anything other than HDFS. Map-reduce jobs are not meant for migrating data from one place to another. They are used to process huge volumes of data present on HDFS. I am sure that your repository data in not HDFS, and if it is then you wont have needed to perform any operation at first place. So please keep in mind that **map-reduce jobs are used for processing large volumes of data already present on HDFS (Hadoop file system).**

# php - SQL JOIN 返回太多行

> ID：15553723
> 
> 赞同：0
> 
> 时间：2013-03-21T17:03:37.507
> 
> 标签：php, mysql, join, subquery

我有三个表：`category`、`offers`和`galleries`。在我的应用程序中，我有一个搜索框，用户可以在其中输入 a `category-id`，并且在每个报价中最多可以有 4 张图像。

我正在使用以下 SQL：

```
SELECT offers.id
      ,offers.description
      ,offers.min_bid
      ,offers.max_bid
      ,offers.status
      ,offers.ending_date
      ,galleries.image
      ,galleries.crop
FROM offers 
INNER JOIN galleries ON offers.id = galleries.offer_id 
WHERE cat_id = $id and offers.status = 1 
```

查询的问题在于，它每次返回相同的报价 4 次，使用不同的图像......不过，我需要的是报价只返回一次，行中的第一张图片 - 忽略所有其他图片与同一优惠相关的图像。

有人可以帮我弄清楚我的 SQL 需要改变什么来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:06:37.707

你可以使用一个`group by offer limit 4`子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:21:09.467

`INNER JOIN`从两个表中返回满足 ON 条件的每一行。在这种情况下，您可以使用`OUTER JOIN`which is`LEFT JOIN`而不是`INNER JOIN`.

或者你也可以使用`GROUP BY`@cjg 来聚合结果，但是聚合比使用更昂贵`LEFT JOIN`。

# vbscript - 无法在 VBScript 中捕获 8004020f 错误

> ID：15553725
> 
> 赞同：0
> 
> 时间：2013-03-21T17:03:40.023
> 
> 标签：vbscript, error-handling, asp-classic

我无法捕获由 Visual Basic（CDOSYS 组件）中的脚本生成的 8004020f 错误。我使用了“ **on error resume next** ”，它会捕获除此之外的所有错误。在这种情况下会生成此错误： - 我用于发送属于 @mydomain.abc 的主机邮箱的邮件服务器 - 我尝试将邮件发送到 nonexistant@mydomain.abc

也就是说，如果我尝试向托管在用于发送的同一邮件服务器上的域的不存在用户发送电子邮件，则此操作会导致错误。

这是（几乎）不可能抓住的！我能做些什么？我有很多数据库，而我不存在的旧地址在数百个表和数据库中都可以找到！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:57:57.337

输入以下内容以找到真正的错误代码，这是一个十进制数。例如，13 = 类型不匹配。

```
<%
response.write("err.number=" & err.number & "<br>")
%> 
```

或者...

我查看了自己的东西，发现了这个：

```
Select Case err.Number
    Case -2147220973
        strRet = " Failure to Send Report Message - Server Not Found" & vbCrLf & " Error: " & err.Number & " - " &  err.Description
    Case -2147220975
        strRet = " Failure to Send Report Message - Server Authentication Failed" & vbCrLf & " Error: " & err.Number & " - " & err.Description
    Case Else
        strRet = " Failure to Send Report Message - Error: " & err.Number & " - " & err.Description
End Select 
```

# python - 计算集合列表中所有组合的交叉点

> ID：15553728
> 
> 赞同：4
> 
> 时间：2013-03-21T17:03:40.400
> 
> 标签：python

我有一套集合。我想找到仅在每个集合组合的交集中找到的项目数。我基本上想做与在维恩图中创建数字相同的事情。

一个基本的例子可能会更清楚。

```
a = set(1,2,5,10,12)
b = set(1,2,6,9,12,15)
c = set(1,2,7,8,15) 
```

我最终应该计算出仅在以下位置找到的项目：

*   一种
*   b
*   C
*   a 和 b 的交点
*   a 和 c 的交点
*   b 和 c 的交点
*   a、b 和 c 的交集

一种不可扩展的方法是

```
num_a = len(a - b - c)  # len(set([5,10])) -> 2
num_b = len(b - a - c)  # len(set([6,9])) -> 2
num_c = len(c - a - b)  # len(set([7,8])) -> 2

num_ab = len((a & b) - c)  # 1
num_ac = len((a & c) - b)  # 0
num_bc = len((b & c) - a)  # 1

num_abc = len(a & b & c)  # 2 
```

虽然这适用于 3 套我的套集合不是静态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:44:38.800

IIUC，这样的事情应该可以工作：

```
from itertools import combinations

def venn_count(named_sets):
    names = set(named_sets)
    for i in range(1, len(named_sets)+1):
        for to_intersect in combinations(sorted(named_sets), i):
            others = names.difference(to_intersect)
            intersected = set.intersection(*(named_sets[k] for k in to_intersect))
            unioned = set.union(*(named_sets[k] for k in others)) if others else set()
            yield to_intersect, others, len(intersected - unioned)

ns = {"a": {1,2,5,10,12}, "b": {1,2,6,9,12,15}, "c": {1,2,7,8,15}}
for intersected, unioned, count in venn_count(ns):
    print 'len({}{}) = {}'.format(' & '.join(sorted(intersected)),
                                  ' - ' + ' - '.join(sorted(unioned)) if unioned else '',
                                  count) 
```

这使

```
len(a - b - c) = 2
len(b - a - c) = 2
len(c - a - b) = 2
len(a & b - c) = 1
len(a & c - b) = 0
len(b & c - a) = 1
len(a & b & c) = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:08:10.840

您可以使用`itertools.combinations`来获取所有可能的组合。 [http://docs.python.org/2/library/itertools.html](http://docs.python.org/2/library/itertools.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:50:24.457

我会尝试使用位掩码：

```
sets = [
    set([1,2,5,10,12]),
    set([1,2,6,9,12,15]),
    set([1,2,7,8,15]),
]

d = {}

for n, s in enumerate(sets):
    for i in s:
        d[i] = d.get(i, 0) | (1 << n)

for mask in range(1, 2**len(sets)):
    cnt = sum(1 for x in d.values() if x & mask == mask)
    num = ','.join(str(j) for j in range(len(sets)) if mask & (1 << j))
    print 'number of items in set(s) %s = %d' % (num, cnt) 
```

您输入的结果：

```
number of items in set(s) 0 = 5
number of items in set(s) 1 = 6
number of items in set(s) 0,1 = 3
number of items in set(s) 2 = 5
number of items in set(s) 0,2 = 2
number of items in set(s) 1,2 = 3
number of items in set(s) 0,1,2 = 2 
```

# php - php jquery分页扩展而不移动到下一页

> ID：15553743
> 
> 赞同：0
> 
> 时间：2013-03-21T17:04:13.543
> 
> 标签：php, jquery, ajax, codeigniter

我正在开发一个 codeigniter 项目，该项目获取结果并将其添加到带有分页的页面中。

我遇到的问题是，

该页面显示所有页码，但第一页似乎总是空的。当我移动到第二页时，它会显示第一页结果以及第二页结果。即使我再次移动到第一页，它也是空的。

当我进一步移动时，所有结果似乎都是堆叠而不是分页。

所以第一页 0 结果。第二页显示 30 个，第三页显示 45 个结果。

下面是我的脚本

```
 <script type="text/javascript">
            $(document).ready(function(){
                function loading_show(){
                    $('#loading').html("<img src='<?php echo $url?>images/loading.gif'/>").fadeIn('fast');
                }
                function loading_hide(){
                    $('#loading').fadeOut('fast');
                }                
                function loadData(page){
                    loading_show();                    
                    $.ajax
                    ({
                        type: "POST",
                        url: "<?php echo base_url()?>index.php/controls/ajaxload",
                        data: "page="+page,
                        success: function(msg)
                        {
                            $("#container").ajaxComplete(function(event, request, settings)
                            {
                                loading_hide();
                                $("#container").html(msg);
                            });
                        }
                    });
                }
                loadData(1); 
                $('#container .pagination li.active').live('click',function(){
                    var page = $(this).attr('p');
                    loadData(page);

                });           
                $('#go_btn').live('click',function(){
                    var page = parseInt($('.goto').val());
                    var no_of_pages = parseInt($('.total').attr('a'));
                    if(page != 0 && page <= no_of_pages){
                        loadData(page);
                    }else{
                        alert('Enter Number '+no_of_pages);
                        $('.goto').val("").focus();
                        return false;
                    }

                });
            });
        </script> 
```

php代码

```
function ajaxload()
{

if($_POST['page'])
{

    $page = $_POST['page'];
    $cur_page = $page;
    $page -= 1;
    $per_page = 15;
    $previous_btn = true;
    $next_btn = true;
    $first_btn = true;
    $last_btn = true;
    $start = $page * $per_page;
    $city ='London';

    $this->load->model('control_model');

    $query_pag_datas = $this->control_model->data_for_pagination($start, $per_page,$city);
    $msg = "";

    foreach ($query_pag_datas as $single):

    $htmlmsg = htmlentities($single['Description']);
    $msg .= "<li><b>" . $single['offID'] . "</b> " . $htmlmsg . "</li>";

    endforeach;

    $msg = "<div class='data'><ul>" . $msg . "</ul></div>"; 

    $count = $this->control_model->count_pages($city);
    $no_of_paginations = ceil($count / $per_page);

    if ($cur_page >= 7) {
        $start_loop = $cur_page - 3;
        if ($no_of_paginations > $cur_page + 3)
            $end_loop = $cur_page + 3;
        else if ($cur_page <= $no_of_paginations && $cur_page > $no_of_paginations - 6) {
            $start_loop = $no_of_paginations - 6;
            $end_loop = $no_of_paginations;
        } else {
            $end_loop = $no_of_paginations;
        }
    } else {
        $start_loop = 1;
        if ($no_of_paginations > 7)
            $end_loop = 7;
        else
            $end_loop = $no_of_paginations;
    }

    $msg .= "<div class='pagination'><ul>";

    if ($first_btn && $cur_page > 1) {
        $msg .= "<li p='1' class='active'>First</li>";
    } else if ($first_btn) {
        $msg .= "<li p='1' class='inactive'>First</li>";
    }

    if ($previous_btn && $cur_page > 1) {
        $pre = $cur_page - 1;
        $msg .= "<li p='$pre' class='active'>Previous</li>";
    } else if ($previous_btn) {
        $msg .= "<li class='inactive'>Previous</li>";
    }
    for ($i = $start_loop; $i <= $end_loop; $i++) {

        if ($cur_page == $i)
            $msg .= "<li p='$i' style='color:#fff;background-color:#006699;' class='active'>{$i}</li>";
        else
            $msg .= "<li p='$i' class='active'>{$i}</li>";
    }

    if ($next_btn && $cur_page < $no_of_paginations) {
        $nex = $cur_page + 1;
        $msg .= "<li p='$nex' class='active'>Next</li>";
    } else if ($next_btn) {
        $msg .= "<li class='inactive'>Next</li>";
    }

    if ($last_btn && $cur_page < $no_of_paginations) {
        $msg .= "<li p='$no_of_paginations' class='active'>Last</li>";
    } else if ($last_btn) {
        $msg .= "<li p='$no_of_paginations' class='inactive'>Last</li>";
    }
    $goto = "<input type='text' class='goto' size='1' style='margin-top:-1px;margin-left:60px;'/><input type='button' id='go_btn' class='go_button' value='Go'/>";
    $total_string = "<span class='total' a='$no_of_paginations'>Page <b>" . $cur_page . "</b> of <b>$no_of_paginations</b></span>";
    $msg = $msg . "</ul>" . $goto . $total_string . "</div>";  
    echo $msg;
} 
```

}

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:36:59.617

改变

```
$page -= 1; 
```

到

```
$page = ($page > 0 ) ? $page -1 : 0 ; 
```

在第一次点击页面是 0 所以

```
0-1 => -1 

-1 * 15 => -15 ; 
```

你的第一个偏移量是`-15`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:21:00.440

因此，如果您发布的页面是`1`，这就是您得到的：

## 第 1 页：

```
$page = $_POST['page'];//let's say we're posting page 1, so $page === 1
...
$page -= 1;//so now, page === 0
...
$start = $page * $per_page;//which, since math, will be 0
...
$query_pag_datas = $this->control_model->data_for_pagination($start, $per_page,$city);
// you just called data_for_pagination(0, 15, 'London') 
```

由于我们看不到该`data_for_pagination`方法，我将假设第一个参数是您请求的结果数。这是有道理的，因为随着页码的增加，结果的数量也会增加：

## 第2页：

```
$page = $_POST['page'];//let's say we're posting page 2, so $page === 2
...
$page -= 1;//so now, page === 1
...
$start = $page * $per_page;//which, since math, will be 15
...
$query_pag_datas = $this->control_model->data_for_pagination($start, $per_page,$city);
// you just called data_for_pagination(15, 15, 'London') 
```

## 第 3 页：

```
$page = $_POST['page'];//let's say we're posting page 3, so $page === 3
...
$page -= 1;//so now, page === 2
...
$start = $page * $per_page;//which, since math, will be 30
...
$query_pag_datas = $this->control_model->data_for_pagination($start, $per_page,$city);
// you just called data_for_pagination(30, 15, 'London') 
```

希望有帮助。

# html - 侧导航栏延伸到底座

> ID：15553744
> 
> 赞同：0
> 
> 时间：2013-03-21T17:04:15.207
> 
> 标签：html, css

我知道这对大多数人来说很容易，但它似乎不想为我工作。我正在尝试使用 height: 100% 让侧边栏一直延伸到页面下方，但不起作用。我不知道该怎么做，有人可以告诉我我做错了什么吗？

您可以在此处找到该页面：http: [//bcs-global.org/new/](http://bcs-global.org/new/)

请注意侧面的导航栏，我希望浅棕色与内容区域的主体一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:06:15.347

将容器高度设为 100%，一切顺利

```
html, body {
   height: 100%;
} 
```

您还使用 XHTML doctype，而不是使用 HTML5`<!DOCTYPE html>`

# php - 将图像从设备上传到服务器，如何将 img 的最终 url 作为字符串返回

> ID：15553747
> 
> 赞同：0
> 
> 时间：2013-03-21T17:04:18.787
> 
> 标签：php, javascript, jquery, html, cordova

因此，我将其设置为通过 Phonegap 本机 api 从设备图像/相机上传图像，并在图像名称上附加随机数。我试图弄清楚如何访问服务器上图像位置的最终 url，以便我可以在制作 Facebook 帖子时利用该图像的 url，因为它们需要外部上传的图像。

代码：.php

```
<?php
$dir = "upload"; 
$randomImg = rand(1, 9999)."image".rand(1, 999999).".jpg";
if ($_FILES) {
    print_r($_FILES);
    mkdir ($dir, 0777, true); 
    move_uploaded_file($_FILES["file"]["tmp_name"],$dir."/".$randomImg);
}
else if (isset($_GET['image'])) {
    $image = $dir."/".$_GET['image'];
    header('Content-type: image/jpeg');
    list($width, $height) = getimagesize($image); 
    $newWidth = 120.0; 
    $size = $newWidth / $width;
    $newHeight = $height * $size; 
    $resizedImage = imagecreatetruecolor($newWidth, $newHeight); 
    $image = imagecreatefromjpeg($image); 
    imagecopyresampled($resizedImage, $image, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height); 
    imagejpeg($resizedImage, null, 80); 
}
else {
    $images = scandir($dir);
    $ignore = Array(".", "..");
    $baseURI = "http://".$_SERVER['SERVER_NAME'].':'.$_SERVER['SERVER_PORT'].$_SERVER['REQUEST_URI'];
    if ($images) {
        foreach($images as $curimg){ 
            if (!in_array($curimg, $ignore)) {
                echo "Image: ".$curimg."<br>";
                echo "<img src='".$baseURI."?image=".$curimg."&rnd=".uniqid()."'><br>"; 
            }
        }
    }
    else {
        echo "We apologize, but there are no images found on our server at this time.";
    }
}
?> 
```

.html

```
<section>
                            <input value="Upload Photo" id="uploadBtn" type="button" onclick="uploadImg();"  />
                        </section> 
```

.js

```
function uploadImg() {
    var img = document.getElementById('camImg');
    var imageURI = img.src;
    if (!imageURI || (img.style.display === "none")) {
        $('#status').html("Snap a photo or select one from your gallery by clicking the 'Attach Photo...' button").css('color', 'red');
        return;
    }
    paramount = "http://www.param0unt.com/app/upload.php";
    if (paramount) {
        var opts = new FileUploadOptions();
        opts.fileKey = "file";
        opts.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
        opts.mimeType = "image/jpeg";
        opts.chunkedMode = false;
        var media = new FileTransfer();
        media.upload(imageURI, paramount, function(r) {
            $('#status').html("Photo successfully stored on our server! (<font color='red'>NOTE:</font> This is alpha version, you will be able to utilize these photos via facebook group ad posts in an upcoming beta release!)").css('color', 'green');
        }, function(error) {
             $('#status').html("Photo Upload Failed, please try again later.").css('color', 'red');
            //console.log(error.code);          
        }, opts);
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:35:22.697

使用 上传文件后`move_uploaded_file`，生成 URL 并将其作为 JSON 编码的响应回显：

```
$url = $baseURI . "?image=" . $randomImg; // http://example.com/app/upload.php?image=1234image5678.jpg
echo json_encode(array("url" => $url));
exit; 
```

然后在你的成功回调 JS 函数中，解析响应：

```
var data = JSON.parse(r);
console.log(data.url); // http://example.com/app/upload.php?image=1234image5678.jpg 
```

# php - 在 PHP 中迭代对象数组

> ID：15553749
> 
> 赞同：1
> 
> 时间：2013-03-21T17:04:25.037
> 
> 标签：php, loops

```
for($i = 0; $i < count($prices); $i++){
error_log($prices[$i]->anObjectVariable);
} 
```

或者

```
foreach ($prices as $price){
error_log($price->anObjectVariable);
} 
```

这些似乎都不起作用，这是我得到的错误：

```
PHP Notice:  Undefined property: price::$anObjectVariable 
```

这是我用来准备对象和数组的代码。

```
class price {

    public $anObjectVariable;

}

$prices = array();
    $p = new price();
    $p->anObjectVariable = "PRINT ME IN ERROR LOG!";
    array_push($prices, $p); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:13:56.807

我只是在本地对其进行了测试，如果您在使用之前将 $prices 定义为数组，则以下代码可以正常工作。

```
class price {

    public $anObjectVariable;

}

$prices = array();
$p = new price();
$p->anObjectVariable = "PRINT ME IN ERROR LOG!";
array_push($prices, $p);

for($i = 0; $i < count($prices); $i++){
    echo($prices[$i]->anObjectVariable);
} 
```

您实际上是在测试您在上面向我们展示的代码（即我刚刚在上面发布的代码）还是在开发衍生产品？你能确认上面的这个确切的片段是否适合你吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:12:22.720

那么如果不是错别字

```
for ($i = 0; $i < count($prices); $i++) {
    error_log($prices[$i]->anObjectVariable);
} 
```

应该管用

# javascript - 在 Chrome 中播放 Framework 2.1 websockets

> ID：15553751
> 
> 赞同：0
> 
> 时间：2013-03-21T17:04:31.237
> 
> 标签：javascript, websocket, playframework, dom-events, playframework-2.1

我似乎无法让 websocket 通信在 Play Framework 2.1 版中工作。

我创建了一个简单的测试，它只需要按一下按钮来回发送消息。它的所有代码都在下面。但是除了按钮之外什么都没有显示。

有没有人看到这个问题或者有人可以告诉我我在下面的代码中可能做错了什么？

我正在使用最新版本的 Chrome。

这是我的简单设置。

**在 Application.java 中**

```
public static Result index() {
    return ok(index.render());
}

public static WebSocket<String> sockHandler() {
    return new WebSocket<String>() {
        // called when the websocket is established
        public void onReady(WebSocket.In<String> in,
                WebSocket.Out<String> out) {
            // register a callback for processing instream events
            in.onMessage(new Callback<String>() {
                public void invoke(String event) {
                    System.out.println(event);
                }
            });

            // write out a greeting
            out.write("I'm contacting you regarding your recent websocket.");
        }
    };
} 
```

**在路由文件** GET / controllers.Application.index()

```
# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)
GET     /greeter                    controllers.Application.sockHandler() 
```

**在 Index.Scala.html**

```
@main(null) {

<div class="greeting"></div>
<button class="send">Send</button>

<script type="text/javascript" charset="utf-8">

    $(function() {
        var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket
        var sock = new WS("@routes.Application.sockHandler()")

        sock.onmessage = function(event) {
            $('.greeting').append(event.data)
        }

        $('button.send').click(function() {
            sock.send("I'm sending a message now.")
        });            
    })

</script> 
```

}

**在 Main.scala.html**

```
@(title: String)(content: Html)
<!DOCTYPE html>
<html>
<head>
    <title>@title</title>
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
    <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
    <script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
</head>
<body>
    @content
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T14:40:02.147

问题出在

```
var sock = new WS("@routes.Application.sockHandler()") 
```

您必须以以下格式指定协议和完整的 url：*ws://localhost:9000/greeter*。

检查此问题以在 javascript 中执行此操作：[如何构造相对于页面 URI 的 WebSocket URI？](https://stackoverflow.com/questions/10406930/how-to-construct-a-websocket-uri-relative-to-the-page-uri)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T00:40:50.493

您可以使用 Route 的`webSocketURL()`方法来检索可以传递给 WebSocket 构造函数的 url。这是 Play 的 websocket-chat 示例代码中的一个示例：

```
$(function() {            
  var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket
  var chatSocket = new WS("@routes.Application.chat(username).webSocketURL()")

  var sendMessage = function() {
    chatSocket.send(JSON.stringify(
      {text: $("#talk").val()}
    ))
    $("#talk").val('')
  }

  // ... 
```

所以在你的代码中你可以使用类似的东西

```
var sock = new WS("@routes.Application.sockHandler().webSocketURL()"); 
```

就我个人而言，我不喜欢将插值代码与 JS 混合，因为我认为在客户端执行的任何代码都应该只关心客户端的状态，而不是服务器（更不用说它将脚本重构为外部文件不可能），所以我倾向于做这样的事情：

```
<div class="container app-container" 
     data-ws-uri="@routes.Application.WSUri.webSocketURL()">
.......
</div> 
```

然后在我的 JS 中，我可以做类似的事情

```
var sock = new WS(document.querySelector(".app-container").dataset.wsUri);
// .... 
```

# sql - SQL：记录类的平均值

> ID：15553752
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:04:33.563
> 
> 标签：sql, ms-access

我有这样的记录：

```
name       price    class
Horse      5000     mammal
Cat        3000     mammal
penguin    2000     bird
chicken    1000     bird
turtle     4000     reptile
snake      2400     reptile 
```

我需要一个包含以下列的表：名称、价格、类、priceavg_of_class 例如：

```
name       price    class    priceavg_of_class
Horse      5000     mammal   4000
Cat        3000     mammal   4000
penguin    2000     bird     1500
chicken    1000     bird     1500
turtle     4000     reptile  3200
snake      2400     reptile  3200 
```

如何使用 SQL 解决这个问题？

我试过这段代码：

```
SELECT animal.name, animal.price, animal.class, 
(SELECT Avg(animal.price) FROM animal WHERE class = animal.class) AS Avg
FROM animal 
```

但这似乎不起作用。我为每条记录得到相同的平均值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:19:16.860

这是一种通过显式连接执行此操作的方法：

```
select name, price, class, avgprice
from animal t inner join
     (select class, avg(price) as avgprice
      from animal t
      group by class
     ) tavg
     on t.class = tavg.class 
```

您的查询（这是一种替代解决方案）的问题是变量的范围。如果您包含所有列的别名，那么它将起作用：

```
SELECT a.name, a.price, a.class, 
       (SELECT Avg(a2.price) FROM animal a2 WHERE a.class = a2.class
       ) AS Avg
FROM animal a 
```

你有`class = animal.class`。这两个都引用`animal`内部查询中的表，因为最近的范围是用于解析列引用的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:07:51.657

使用子查询和聚合函数

```
Select name, price, class, 
    (select Avg(price) From table
     where class = t.class) avgPrice
From table t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:32:30.290

```
select name,price,class,avg(price) over (partition by class)
from tab;

SELECT m.name,
  m.price,b.class,b.price
  FROM tab m,
  (SELECT class,AVG(price) price FROM tab GROUP BY class
  ) b
  where m.class=b.class 
```

# macos - 链接错误 - OSX 上架构 x86_64 的未定义符号

> ID：15553759
> 
> 赞同：1
> 
> 时间：2013-03-21T17:04:51.827
> 
> 标签：macos, gcc, x86-64

尝试在 OSX 下编译项目的一部分时返回以下内容：

```
gcc -g -pipe -L/Projects/export buf_test.o buf.o -framework CoreFoundation -o buf_test
Undefined symbols for architecture x86_64:
  "___assert_rtn", referenced from:
      _init in buf.o
      _get in buf.o
      _put in buf.o
  "___sprintf_chk", referenced from:
      _test in buf_test.o
  "___strcpy_chk", referenced from:
      _test_data_copy in buf_test.o
      ___inline_strcpy_chk in buf_test.o
  "_exit", referenced from:
      start in crt1.10.6.o
  "_printf", referenced from:
      _test in buf_test.o
  "_puts", referenced from:
      _test in buf_test.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:59:13.397

原来这是与标准库的库命名冲突——我在 /Projects/export 中有一个名为 libSystem.a 的库，它掩盖了 libSystem.dylib 被发现。

# c++ - 访问 eigen3 中的特征值

> ID：15553766
> 
> 赞同：4
> 
> 时间：2013-03-21T17:05:06.863
> 
> 标签：c++, matrix, linear-algebra, eigen

我正在尝试设置 eigen3 特征值求解器，看起来我遇到了一些复杂情况。代码编译得很好，但有时会失败。失败的代码是

```
EigenSolver<MatrixXd> eigensolver(A);
cout << "tell me something" << endl;
Matrix<complex<double>, -1, 1, 0, -1, 1> E = eigensolver.eigenvalues();
cout << "tell me something more" << endl;
cout << E; 
```

以及带有错误消息的输出：

```
tell me something
tell me something more
(3.5,1.93649)
class_out: /usr/include/eigen3/Eigen/src/Core/DenseCoeffsBase.h:407: Eigen::internal::traits<Derived>::Scalar &Eigen::DenseCoeffsBase<Derived, 1>::operator()(Eigen::internal::traits<Derived>::Index) [with Derived = Eigen::Matrix<std::complex<double>, -1, 1, 0, -1, 1>]: Assertion `index >= 0 && index < size()' failed.
(3.5,-1.93649)Aborted 
```

这看起来有点奇怪，但看起来不像是`<<`运营商的问题，就像普通的一样

```
cout << eigensolver.eigenvalues(); 
```

`cout`与普通矩阵一样工作正常。另外，我用 Mathematica 检查了 A 的特征值，我得到了 (3.5,1.93649) 和 (3.5,-1.93649)。

有谁知道为什么会这样，或者也许有人可以建议其他方式来访问特征值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:26:56.120

解决方案似乎很简单：

```
EigenSolver<MatrixXd> eigensolver(A);
cout << "tell me something" << endl;
complex<double> E;
cout << "tell me something more" << endl;
for(int i = 0; i < A.rows(); ++i){
E = eigensolver.eigenvalues().col(0)[i];
cout << E << endl;
} 
```

# ios - 意外删除的视图控制器。程序不会编译

> ID：15553770
> 
> 赞同：0
> 
> 时间：2013-03-21T17:05:10.337
> 
> 标签：ios, xcode, class, uiviewcontroller

我不小心删除了我的主视图控制器。我把它从垃圾桶里拿出来放回xcode，但现在我仍然得到3个不同的错误

```
 "_OBJC_CLASS_$_ViewController", referenced from:
  _OBJC_CLASS_$_menuViewController in menuViewController.o

 "_OBJC_METACLASS_$_ViewController", referenced from:
  _OBJC_METACLASS_$_menuViewController in menuViewController.o

 error: linker command failed with exit code 1 (use -v to see invocation) 
```

可能值得注意的是 menuViewController 是主 VC 的后续 VC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:07:53.540

确保文件的目标正确。选择 Xcode 左侧的文件。然后查看文件检查器（View、Utilities、Show File Inspector）。确保在 Target Membership 下选中了正确的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:18:32.227

您需要从 xcode 的左侧再次选择已添加回来的文件，您将在右侧看到文件 Inspector。您确保为您的特定控制器文件选择目标成员。请记住，您只能`.m`为`.h`文件选择目标成员身份

![在此处输入图像描述](../Images/de20a5a7209ad066737959951d968d16.png)

在我的情况下，目标是**AttributeString**，因此如果您检查文件的相应目标，清理并构建项目并运行，它将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:26:18.320

I your ViewController included in your project's Compile Sources build phase?

You can see a link to a blog explaining this issue here:

[https://stackoverflow.com/a/10487025/2195998](https://stackoverflow.com/a/10487025/2195998)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:11:25.537

该错误表明链接器无法解析对已编译 VC 的引用。当您将文件带回 Xcode 时，请检查您是否将文件添加到正确的目标。您可以在文件检查器 (command-option-1) 中看到这一点。

当我看到链接器错误（或任何其他奇怪的 Xcode-what-are-you-doing 行为时，我会应用“Clean”（command-shift-K）或“Clean Build Folder”（option-command-shift -K) 自由。

使用版本控制系统（Git 或 Subversion）可以让您避免此类问题。

# html - css3 旋转的 ul 在 Internet Explorer 中消失

> ID：15553777
> 
> 赞同：0
> 
> 时间：2013-03-21T17:05:53.383
> 
> 标签：html, internet-explorer, css, rotation, html-lists

**大家好！**

我在 IE 中遇到 css3 旋转问题...

我有一个旋转 -90 度的无序列表，因为我的客户的设计需要它。在 Chrome 和 Firefox 中它显示得很好，但在 IE 中，当我移动鼠标后，整个 UL 会丢失。

我为这个案子做了一个小提琴，请你看一看。我只是找不到它的问题所在。

UL 处于绝对位置（如果不是绝对位置，则不会旋转），并且有一个带顶线的 div，但没关系。我正在为我的网站和 HTML5 粘性页脚使用 css 网格（在 960.gs 上生成）和 css 主重置。

在此[示例](http://goo.gl/naAkd)中，您可以签出。如果有人有解决这个问题的想法，请告诉我......

提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:14:50.390

你试过这个吗？： [CSS3 转换为矩阵过滤器转换器](http://www.useragentman.com/IETransformsTranslator/index.html)

这将为您提供在 IE 中呈现您正在寻找的内容所需的代码。

# octave - 八度积分

> ID：15553778
> 
> 赞同：1
> 
> 时间：2013-03-21T17:05:55.100
> 
> 标签：octave, integrate

我在集成 Octave 时遇到了一些问题。我有以下代码：

> a=3；
> 
> 函数 y = f (x)
> y = x*x*a;
> 
> 结束功能
> 
> [v,ier,nfun,err]=quad("f",0,3);

函数中的“a”给我带来了麻烦。Octave 说 'a' 是未定义的。所以，如果我不是 'a' 将数字 3 放在函数 y 中，一切都会正常工作。但是，我想在函数中有“a”，这样我就可以改变它的值。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:08:47.490

有两个主要选项。

正如 voithos 所说，选项 1 将“a”作为函数的输入。

选项 2 是将“a”定义为全局变量。

```
global a=3;

function y = f (x)
 global a
 y = x*x*a;

endfunction

[v,ier,nfun,err]=quad("f",0,3); 
```

这将导致 'a' 在函数内部和外部具有相同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T23:08:48.737

您可以使用函数闭包，它将封装`a`.

```
function f = makefun (a)
    f = @(x) x * x * a;
endfunction

f = makefun(3)

[v, ier, nfun, err] = quad(f, 0, 3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T12:59:57.393

您的函数实际上取决于两个值 x 和 a，因此：

```
f=@(x,a) x*x*a
[V, IER, NFUN, ERR] = quad (@(x) f(x,3), A, B, TOL, SING) 
```

我使用了内联函数，因为我认为它更容易理解。

# android - 是否有 android 意图将数据添加到 Google Keep

> ID：15553784
> 
> 赞同：9
> 
> 时间：2013-03-21T17:06:10.667
> 
> 标签：android, android-intent

是否有将数据添加到[Google](https://play.google.com/store/apps/details?id=com.google.android.keep) Keep 的 android 意图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T17:42:39.413

可以通过 new Intent(Intent.ACTION_SEND)！有一种技术可以以编程方式选择适当的应用程序，而不是显示可能性。睾丸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:27:36.153

我得到了 Android 团队的确认。当他们在这里回答一些其他事情时，一位项目成员说没有 Google Keep API。

[https://code.google.com/p/dashclock/issues/detail?can=1&start=0&num=100&q=&colspec=ID%20Type%20Component%20Summary%20Stars%20Status%20TargetRelease&groupby=&sort=-id&id=380](https://code.google.com/p/dashclock/issues/detail?can=1&start=0&num=100&q=&colspec=ID%20Type%20Component%20Summary%20Stars%20Status%20TargetRelease&groupby=&sort=-id&id=380)

所以我假设，没有办法将信息传递给应用程序或未知的应用程序。

# jquery - jQuery 在颜色框内缩放

> ID：15553791
> 
> 赞同：3
> 
> 时间：2013-03-21T17:06:22.497
> 
> 标签：jquery, plugins, zooming, colorbox

是否可以在颜色框中使用 Jack Moore 的 jQuery Zoom 插件？

```
$(document).ready(function(){
  $('a.photo').zoom({url: 'photo-big.jpg'});
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T17:22:06.290

我很确定你可以这样做：

```
$('a.colorbox').colorbox({
    'onComplete': function(){ 
        $('#cboxLoadedContent img').wrap('<span style="display:inline-block"></span>')
            .css('display', 'block')
            .parent()
            .zoom();
    }
}); 
```

来自：[http ://www.jacklmoore.com/zoom/](http://www.jacklmoore.com/zoom/)

编辑：它似乎没有额外的包装

来自：@彼得

```
$('a.colorbox').colorbox({
    'onComplete': function(){ 
        $('#cboxLoadedContent').zoom();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T20:03:18.927

```
$mouseTrap.bind('click',this,function(event){
     $("#zoom").trigger("click");
}); 
```

添加缩放.js

```
$('#zoom').colorbox(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T10:20:54.317

这对我很有帮助：

```
.zoomImg {
    height: 150% !important;
    width: 150% !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T15:37:29.223

打开颜色框然后调用放大`onComplete`对我不起作用，因为如果您不离开图像然后重新输入图像，它不会自动开始缩放。我必须触发“鼠标悬停”事件。

当您通常缩放时，您有一个真正的大图像，并且您还需要将颜色框大小限制为窗口大小，在这种情况下，我使用了 100% x 100% 的颜色框。

颜色框的区域越大，您的鼠标在其上并且鼠标悬停未触发的可能性就越大，因为图像出现在您的鼠标指针下方，并且您的鼠标没有进入（越过）图像。

```
$('a.colorzoom').colorbox({ width:"100%", height:"100%", returnFocus: false, trapFocus:false, 
    'onComplete': function() { 
        $('#cboxLoadedContent').zoom({
            callback: function() {
                $(this).trigger('mouseover');
            }
        });

    }
});
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-02T14:26:54.650

```
 $(document).ready(function(){
    function callPreviewLightbox(urlPath) {
        $(document).ready(function () {
                $.colorbox({
                    href: urlPath,
                    width: '100%',
                    top: '0%',
                    height: '100%',
                    onClosed: function () {
                        alert('on close');
                    },
                    onOpen: function () {

                    },
                    onComplete: function () {
                        $('#cboxLoadedContent').zoom();
                    }
                });
        });
    }
    }); 
```

# gitlab - 安装 charlock_holmes 时出错：安装 GITLAB 时出错

> ID：15553792
> 
> 赞同：16
> 
> 时间：2013-03-21T17:06:26.347
> 
> 标签：gitlab

我正在尝试安装 GITLAB。执行“ `sudo gem install charlock_holmes --version '0.6.9'`”（[安装 Gems](https://github.com/gitlabhq/gitlabhq/blob/4-2-stable/doc/install/installation.md#install-gems)部分）时出现此错误

```
GEOGIT:/geogit/Administrative_Tools # sudo gem install charlock_holmes --version '0.6.9'
Building native extensions.  This could take a while...
ERROR:  Error installing charlock_holmes:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9 extconf.rb
checking for main() in -licui18n... no
which: no brew in (/usr/sbin:/bin:/usr/bin:/sbin)
checking for main() in -licui18n... no

***************************************************************************************
*********** icu required (brew install icu4c or apt-get install libicu-dev) ***********
***************************************************************************************
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/bin/ruby1.9
        --with-icu-dir
        --without-icu-dir
        --with-icu-include
        --without-icu-include=${icu-dir}/include
        --with-icu-lib
        --without-icu-lib=${icu-dir}/
        --with-icui18nlib
        --without-icui18nlib
        --with-icui18nlib
        --without-icui18nlib

Gem files will remain installed in /usr/lib64/ruby/gems/1.9.1/gems/charlock_holmes-0.6.9 for inspection.
Results logged to /usr/lib64/ruby/gems/1.9.1/gems/charlock_holmes-0.6.9/ext/charlock_holmes/gem_make.out 
```

有人可以帮我调试这些日志和错误吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-21T19:10:01.713

这看起来像[问题 1952](https://github.com/gitlabhq/gitlabhq/issues/1952)

> 我的 ubuntu VPS 的委托方式实际上很奇怪。我的显然没有 C 编译器或 libdev。
> 
> 我发现的问题修复是先安装`libdev`，然后是 GCC
> Then `apt-get install libicu-dev`。

2015 年更新：其他评论包括：

> `yum install libicu-devel`为我工作
> 
> 您只需要确保“ `patch`”已安装（`yum install patch`）然后它应该可以工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-22T17:56:46.637

对于 MacOS，安装以下依赖项：

```
brew install icu4c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T12:47:50.543

根据文档（[https://github.com/gitlabhq/gitlabhq/blob/master/doc/install/installation.md](https://github.com/gitlabhq/gitlabhq/blob/master/doc/install/installation.md)），需要软件包 libicu-dev

使用“apt-get install libicu-dev”安装它，然后可以安装 charlock_holmes

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T18:07:31.033

我使用“yum install libicu-devel”，然后我可以安装 charlock_holmes

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T23:06:58.653

我在 Centos 5.4 服务器上遇到了同样的错误，yum 存储库只有 icu 3.6 版，所以我必须手动搜索并安装库 icu 4.2 来解决问题。如果其他人需要知道如何做，我建议查看此链接[http://source.icu-project.org/repos/icu/icu/tags/release-4-2-1/readme.html#如何构建UNIX](http://source.icu-project.org/repos/icu/icu/tags/release-4-2-1/readme.html#HowToBuildUNIX)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-08T13:58:28.880

我遇到了同样的问题：当我尝试安装 charlock_holmes gem 时，我遇到了这个错误：

```
charlock_holmes-0.7.3/mkmf.log
have_library: checking for main() in -licui18n... -------------------- no 
```

我通过运行@VonC 的第一个命令来修复它：

```
 sudo apt-get install libicu-dev 
```

希望我帮助了某人！

# javascript - 未捕获的引用错误

> ID：15553794
> 
> 赞同：0
> 
> 时间：2013-03-21T17:06:27.817
> 
> 标签：javascript, getelementbyid

我脑子里有这个代码

```
<script language="JavaScript">
function alertSize() {
    // Get Browser Viewport Width
    var adjust = "<?php echo $adjust; ?>";
    // Get Browser Viewport Height
    var height = window.innerHeight ||
    document.documentElement.clientHeight ||
    document.body.clientHeight;
    // Get Browser Viewport Height
    var height = window.getSize().y;

}
window.onload = alertSize;

</script> 
```

我的身体里有这个

```
<div id="bodyheight">

                </div>
                <script language="JavaScript">
                document.getElementById("bodyheight").style.height = height;</script> 
```

但我进入正文代码：

> '未捕获的 ReferenceError：高度未定义'

在头部代码中，我知道高度有一个值，当我输出“高度”作为弹出窗口时，会显示正确的值。

我知道'document.getElementById("bodyheight").style.height = ;' 当我放置一个固定值代替“高度”变量时工作。

但由于某种原因，我无法让“高度”变量在`document.getElementById("bodyheight").style.height = height;`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:08:22.760

`height` is a function-local variable, and can only be used from within `alertSize()`. Your inline script is attempting to use it, but this variable is not in scope at that point.

Additionally, note that you use the `var` statement twice to create the `height` variable. You are redeclaring a local variable, and this is considered by many developers to be an error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:10:28.777

变量范围尝试

```
var height;
function alertSize() {
    // Get Browser Viewport Width
    var adjust = "<?php echo $adjust; ?>";
    // Get Browser Viewport Height
    height = window.innerHeight ||
    document.documentElement.clientHeight ||
    document.body.clientHeight;
    // Get Browser Viewport Height
    height = window.getSize().y;

} 
```

更多信息：[JavaScript 中变量的范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

希望这可以帮助

# java - Java 临时文件多线程应用程序

> ID：15553800
> 
> 赞同：3
> 
> 时间：2013-03-21T17:06:53.320
> 
> 标签：java

我正在寻找一种万无一失的方法来生成一个临时文件，该文件在每个 JVM 的基础上总是以唯一的名称结束。基本上，我想确保在多线程应用程序中，如果两个或多个线程试图在完全相同的时间创建一个临时文件，它们最终都会得到一个唯一的临时文件，并且不会抛出异常。

这是我目前的方法：

```
public File createTempFile(InputStream inputStream) throws FileUtilsException {
    File tempFile = null;
    OutputStream outputStream = null;
    try {
        tempFile = File.createTempFile("app", ".tmp");
        tempFile.deleteOnExit();
        outputStream = new FileOutputStream(tempFile);
        IOUtils.copy(inputStream, outputStream);
    } catch (IOException e) {
        logger.debug("Unable to create temp file", e);
        throw new FileUtilsException(e);
    } finally {
        try { if (outputStream != null) outputStream.close(); } catch (Exception e) {}
        try { if (inputStream != null) inputStream.close(); } catch (Exception e) {}
    }
    return tempFile;
} 
```

这对于我的目标是完全安全的吗？我查看了以下 URL 中的文档，但我不确定。

请参阅[java.io.File#createTempFile](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:42:40.310

以下 URL 上发布的答案回答了我的问题。我发布的方法在多线程单 JVM 进程环境中是安全的。为了使其在多线程多 JVM 进程环境（例如集群 Web 应用程序）中安全，您可以使用 Chris Cooper 的想法，该想法涉及在每个 JVM 进程中的 File.createTempFile 方法的前缀参数中传递一个唯一值。

[createTempFile 是线程安全的吗？](https://stackoverflow.com/questions/4702537/is-createtempfile-thread-safe)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:11:25.437

只需使用线程名称和当前时间（以毫秒为单位）来命名文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T17:13:30.137

出于这个确切原因，您可以为临时文件提供不同的前缀或后缀。为每个启动的进程分配一个唯一ID，并使用该唯一ID作为前缀或后缀，同一VM中的多个线程不会发生冲突，现在VM也不会发生冲突。

# ios - 视图重新出现后 UIScrollView 不再滚动

> ID：15553801
> 
> 赞同：3
> 
> 时间：2013-03-21T17:06:57.643
> 
> 标签：ios, cocoa-touch

在显示另一个视图滚动停止滚动后，我在主视图上有一个滚动视图。

在视图中出现我试图刷新滚动但没有运气

调用这个：

```
-(void)refreshScrollView{

    NSLog(@"scroll Content Height %f",answerScolledHeight );
    NSLog(@"scroll View Height %f", scrollView1.frame.size.height );
    [scrollView1 setScrollEnabled:YES];
    [scrollView1 setContentSize:CGSizeMake(320, answerScolledHeight)];
    [scrollView1 setContentOffset:CGPointMake(0, 0)];

} 
```

它在不工作的情况下读取正确的值：

```
2013-03-21 17:56:01.434 ----[38464:14003] scroll Content Height 256.000000
2013-03-21 17:56:01.434 ----[38464:14003] scroll View Height 194.000000 
```

问题出现在设置视图的显示之后：

```
 SettingsController* controller1 =  (SettingsController *)[self getSettingsViewController];
        [self presentModalViewController:controller1 animated:YES]; 
```

当设置关闭时，滚动不再起作用

```
- (IBAction)doClose:(UIBarButtonItem *)sender {
    [self dismissModalViewControllerAnimated:YES];
} 
```

viewDidAppear，我第一次尝试运行一些命令来限制问题，因为我正在使用 ECslidingViewController（擦除菜单）

```
- (void)viewDidAppear:(BOOL)animated{
      if (!isActive){
        answerUpY = self.answerView.frame.origin.y;
        answerDownY = self.questionBackground.frame.origin.y +self.questionBackground.frame.size.height - self.answerToggle.frame.size.height - PADDING_1;
        isActive = TRUE;
        [self slidingControllerAppear];

    }else{
        [self refreshScrollView];

    }
} 
```

# modelica - Modelica 半线性（）

> ID：15553802
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:07:02.817
> 
> 标签：modelica

任何了解 Modelica 语言，特别是热流体工具箱的人？通常有一个 semiLinear() 函数，用于计算焓流，因为它取决于流向。

谁知道这个函数的细节，如果我们可以用一些简单的命令来替换它？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:45:06.470

我很确定我已经在 OpenModelica 论坛上回答了这个问题……无论如何，[ModelicaReference](https://build.openmodelica.org/Documentation/ModelicaReference.Operators.%27semiLinear%28%29%27.html)包确实解释得很清楚。

# javascript - 在 Dojo 中使用 requireLocalization 和 getLocalization

> ID：15553807
> 
> 赞同：0
> 
> 时间：2013-03-21T17:07:33.020
> 
> 标签：javascript, localization, internationalization, dojo

我正在尝试创建一个自定义 Dojo 小部件，这就是我的文件结构的外观：

```
customwidget
  |
  +--nls
  |   |
  |   +--en
  |       |
  |       +--CustomWidget.js (My localization code)
  +--CustomWidget.js (My actual custom widget code) 
```

现在在我的代码中我正在写：

```
dojo.requireLocalization("customwidget", "CustomWidget", "en"); 
```

为了获得这种本地化，我写道：

```
dojo.i18n.getLocalization('timeago', "Timeago", "en") 
```

我的小部件中有很多行代码，它适用于**customwidget > nls > en**中的本地化。但问题出在我的 Google Chrome 控制台中，出现以下错误：

```
GET http://******/******/******/customwidget/nls/CustomWidget.js 404 (Not Found) 
```

为什么 Dojo 还需要“customwidget > nls”中的本地化代码文件？尽管控制台出现错误，但我的代码实际上运行没有任何问题。

我正在阅读[全球化指南](http://dojotoolkit.org/reference-guide/1.6/quickstart/internationalization/globalization-guidelines/locale-and-resource-bundle-guidelines.html)，它说`dojo.requireLocalization("my.app", "bar", "zh-cn");`我们应该使用而不是写作`dojo.requireLocalization("my.app", "bar");`。情况也是如此`dojo.i18n.getLocalization`。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:18:24.047

对于您的第一个问题，我不完全确定为什么它仍然发出请求（IMO 它不应该），但 dojo 正在尝试获取默认语言包。最好在 nls 文件夹的根目录下放置一个默认包，以便在使用不受支持的语言的用户浏览页面时显示*某些内容。*

对于第二个问题 - 您应该允许 dojo 选择正确的语言包，当然如果您自己指定它，您最终会复制大量代码来决定使用哪种语言并传递它。

# actionscript-3 - 你如何删除一个点？

> ID：15553808
> 
> 赞同：0
> 
> 时间：2013-03-21T17:07:36.033
> 
> 标签：actionscript-3, actionscript, flash-cs4, point

我如何删除一个点？我已经在网上搜索过，但是我找不到解决方案......我的代码简单来说：

创建变量：

```
 var point1:Point=new Point();
    var point2:Point=new Point();
    var bullet:MovieClip=new bullet;
    var box:MovieClip=new box; 
```

设置框和点的位置

```
 box.x=200;
    box.y=200;

    point2.x=200;
    point2.y=200; 
```

设置子弹的速度：

```
 bullet.speedX=10; 
```

向舞台添加监听器：

```
 stage.addEventListener(Event.ENTER_FRAME, inToFrame)
    function inToFrame (evt:Event)
    {
        bullet.x+=bullet.speedX;
        point1.x=bullet.x;
        point1.y=bullet.y;
        if(Point.distance(point1,point2)<10)
        {
            if(this.contains(bullet))
                {
                    removeChild(bullet);
                    //And here I want one of the two points to be removed
                }
            if(this.contains(box))
                {
                    removeChild(box);
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:11:09.533

它们甚至不在舞台上，`Point`也不是不能添加到舞台上的展示对象。

**编辑**只是设置`point1`回像 0,0 这样的初始位置，因此它不会进入下一次检查的 if 语句。或者最好在检查两点之间的距离之前检查子弹是否在舞台上

```
if(bullet.parent && Point.distance(point1,point2)<10)
{
     if(this.contains(bullet))
     {
         removeChild(bullet);
         //And here I want one of the two points to be removed
     }
     if(this.contains(box))
     {
         removeChild(box);
     }
} 
```

# iphone - 如何扩大 UIGestureRecognizer 的命中区域？

> ID：15553810
> 
> 赞同：12
> 
> 时间：2013-03-21T17:07:40.433
> 
> 标签：iphone, ios, ipad, cocoa-touch, uikit

我在某些视图上使用的手势识别器很少，但有时视图太小而且很难命中。使用识别器是必要的，那么如何扩大命中区域？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-21T17:17:14.810

如果您为自定义执行此操作`UIView`，则应该能够覆盖该`hitTest:withEvent:`方法：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    CGRect frame = CGRectInset(self.bounds, -20, -20);

    return CGRectContainsPoint(frame, point) ? self : nil;
} 
```

上面的代码将在视图周围添加一个 20 磅的边框。点击该区域中的任意位置（或视图本身）将表示命中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-12T14:07:25.033

@rmaddy 的 Swift 版本回答：

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
    let frame = self.bounds.insetBy(dx: -20, dy: -20);
    return frame.contains(point) ? self : nil;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-24T16:57:11.400

如果您使用 a`UIImageView`作为按钮，则可以使用以下扩展名（Swift 3.0）：

```
extension UIImageView {
open override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
    if self.isHidden || !self.isUserInteractionEnabled || self.alpha < 0.01 { return nil }

    let minimumHitArea = CGSize(width: 50, height: 50)
    let buttonSize = self.bounds.size
    let widthToAdd = max(minimumHitArea.width - buttonSize.width, 0)
    let heightToAdd = max(minimumHitArea.height - buttonSize.height, 0)
    let largerFrame = self.bounds.insetBy(dx: -widthToAdd / 2, dy: -heightToAdd / 2)

    // perform hit test on larger frame
    return (largerFrame.contains(point)) ? self : nil
}
} 
```

类似于[这里](https://stackoverflow.com/questions/808503/uibutton-making-the-hit-area-larger-than-the-default-hit-area)`UIButton`的扩展

# asp.net-mvc - 从视图内部处理 ActionResult

> ID：15553815
> 
> 赞同：1
> 
> 时间：2013-03-21T17:07:48.323
> 
> 标签：asp.net-mvc

描述我的场景将是描述我想要实现的目标的最佳方式。我正在寻找一个更清洁的解决方案，如果它存在的话。

我们有想要锁定的内容。我抽象了解锁模型，因为我们可以有不同的类型。它可能是重定向或渲染的局部视图或将来可能出现的其他东西，所以我决定尝试返回一个 ActionResult。

```
public abstract class AContentUnlocker
{
    public abstract ActionResult GetUnlockActionResult();
}

public class RedirectUnlocker : AContentUnlocker
{
    public override ActionResult GetUnlockActionResult()
    {
        return new RedirectResult("http://www.url1.com?returnUrl=mywebsiteagain");
    }
}

public class PartialViewUnlocker: AContentUnlocker
{

    public override ActionResult GetUnlockActionResult()
    {
        PartialViewResult view = new PartialViewResult();
        view.ViewName = "_PartialViewToUnlock";
        return view;
    }
} 
```

我的内容将在具有适当解锁机制的模型中表示

```
public class MyContent
{
    public string Description { get; set; }
    public AContentUnlocker ContentUnlocker { get; set; }
} 
```

在我的控制器中，我会简单地返回我想要的内容并设置正确的解锁机制。

```
public ActionResult Index()
{
    MyContent myContent = new MyContent() { 
        Description = "Content 1", 
        ContentUnlocker = new PartialViewUnlocker() 
    }; 

    return View(myContent);
} 
```

然后在我的索引视图中执行 ActionResult。

```
@{
   Model.ContentUnlocker.GetUnlockActionResult().ExecuteResult(this.ViewContext);
}

return View(myContent); 
```

重定向 ActionResult 工作正常。我的问题是，对于部分视图操作结果，鉴于 MVC 的执行周期，部分视图在控制器视图之前呈现。所以我得到类似的东西：

```
<!-- html of the partial view rendered -->
<div> blah blah </div>

<!-- html of the parent view -->
<html>
  <head></head>
  <body> blah   .... </body>
</html> 
```

我不确定这是否可能，但有没有办法像 Html.RenderPartial 一样执行我的 ActionResult ？

# c# - Windows multiple forms app design

> ID：15553823
> 
> 赞同：-2
> 
> 时间：2013-03-21T17:07:59.730
> 
> 标签：c#, windows, winforms, forms

I am asked to develop a windows form application. this app will have 4 sessions in sequence for users to complete their task. Should I create this 4 sessions into different forms or what other options do I have?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:14:22.590

考虑使用向导。可以使用选项卡控件来实现。

# java - ICEFaces 1.8 Rendering in different portlets (liferay)

> ID：15553825
> 
> 赞同：0
> 
> 时间：2013-03-21T17:08:05.770
> 
> 标签：java, liferay-6, icefaces-1.8

I have two Portlets: the first contains: **datatable A** and the second: **datatable B**. The two portlets are shown in the same page. I want to refresh the **datatable A** after I click on a command button in the **datatable B**.

The method called by the command button contains this code:

```
OnDemandRenderer onDemandRenderer = getRenderManager().getOnDemandRenderer("RENDER_GROUP");
onDemandRenderer.requestRender(); 
```

But it doesn't work. Can anyone help me please? Some hints? Thanks in advance for any help!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:35:06.520

我使用静态变量解决了这个问题。Datatable A 使用在托管 bean 中以这种方式填充的 dataModel 对象：

```
dataModel=new ListDataModel(globalDD.getDetailsList()); 
```

其中托管 bean 中的 globalDD：

```
private GlobalDocumentDetails globalDD;
public GlobalDocumentDetails getGlobalDD() {
  return SessionBeanUtility.getGlobalDD();
}
public void setGlobalDD(GlobalDocumentDetails globalDD) {
  this.globalDD = globalDD;
} 
```

而 SessionBeanUtility.getGlobalDD() 是

```
public static GlobalDocumentDetails getGlobalDD(){
    if (FacesUtil.getPortletSession().getAttribute(GLOBAL_DD_BEAN_KA, PortletSession.APPLICATION_SCOPE) == null)
    {
        new GlobalDocumentDetails();
        FacesUtil.getPortletSession().setAttribute(GLOBAL_DD_BEAN_KA, new GlobalDocumentDetails(), PortletSession.APPLICATION_SCOPE);
    }
    return (GlobalDocumentDetails)FacesUtil.getPortletSession().getAttribute(GLOBAL_DD_BEAN_KA, PortletSession.APPLICATION_SCOPE);
} 
```

数据表 B 包含购物车的项目，购物车是一个静态对象。我在两个数据表的 actionListeners 方法中使用我在问题中编写的代码来刷新两者。

# firefox - Measuring HTML parsing time in web browsers

> ID：15553827
> 
> 赞同：0
> 
> 时间：2013-03-21T17:08:08.000
> 
> 标签：firefox, dom, browser, html-parsing

In my project, I attend to measure the HTML parsing time, that is, **how much percent of processing time is for HTML parsing** when a web browser handling a particular webpage.

It seems instrumenting Firefox would be a good place to start. But this may take some time (I have no idea of the any complexities of instrumenting Firefox to fetch this info).

So my question is: Any idea on measuring this ratio in a relative lightweight way? Or by any chance you saw this information already available on any public papers/websites?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:31:13.617

我猜你需要对你的 HTML 进行基准测试。理想情况下，基准工具将为您提供不同的输出，因为它基本上基于许多参数。开始吧，您可以使用一些在线工具来对您的 HTML 页面进行基准标记。HTML Benchmark 有很多搜索。

然后您可以使用以下标记来标记您的浏览器。 [http://browsermark.rightware.com/](http://browsermark.rightware.com/)

好吧，我相信你可能会得到一个相对的答案和一些数字来处理......

# java - How do I authenticate on a page that requires JavaScript by using HttpClient?

> ID：15553831
> 
> 赞同：1
> 
> 时间：2013-03-21T17:08:15.117
> 
> 标签：java, authentication, apache-commons-httpclient

I am trying to programmatically authenticate a url and get the response using Apache Commons httpclient. The response code is 200 however the i am getting a response with the a sign on page. I want to deep dive in to the sign on page and get the response.

I am noticing that the cookies are blank when i try printing using the following code: Cookie[] cookies = httpclient.getState().getCookies();

The response has the following message: "Your browser does not have JavaScript enabled. This feature is needed to support XXXX's Windows Single Sign-On (WSSO). Please contact your PC support person or call"

Pls help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:58:54.233

确保设置以下 cookie 策略：

```
httpClient.getParams().setParameter("http.protocol.cookie-policy", CookiePolicy.BROWSER_COMPATIBILITY); 
```

来自链接[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html) 浏览器兼容性：此实现力求密切模仿常见 Web 浏览器应用程序（如 Microsoft Internet Explorer）的（错误）行为和 Mozilla FireFox。

# c# - 实体框架上的修剪字符串保存

> ID：15553832
> 
> 赞同：4
> 
> 时间：2013-03-21T17:08:19.373
> 
> 标签：c#, asp.net-mvc, entity-framework, reflection, code-first

我在 ASP.NET MVC Web 应用程序中首先使用实体​​框架代码，在该应用程序中，客户有在字符串末尾添加空格的坏习惯。

显然`Trim()`是解决问题的正确答案，但记住在整个项目中修剪所有内容并不是正确的做法。做了一些挖掘，发现[ASP.NET MVC：数据输入后修剪字符串的最佳方法。我应该创建自定义模型绑定器吗？](https://stackoverflow.com/questions/1718501/)他们在那里创建了一个自定义模型绑定器，但我担心绑定模型时应用程序的每个页面加载都会影响性能。看起来像`SaveChanges()`所谓的修剪将是最高效的方法，因为事情将被存储到数据库中。

所以我的问题是，是否覆盖`SaveChanges()`并获取所有添加和修改的对象，`ObjectContext`然后使用反射修剪每个字符串在这里做正确的事情？或者模型粘合剂是正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T17:21:21.507

我认为您太担心性能了。模型绑定器很好，我们在整个应用程序中都做同样的事情。

MVC 框架非常大，额外的模型绑定器并不是很多开销。

我们还发现了必须防止修剪的情况。因此模型绑定器是完美的，因为它允许我们排除某些字段。

模型绑定器是标准的 MVC 行为。如果您在数据库级别执行此操作，则它是隐藏的。

所以如果是我，我会在 ModelBinder 中进行。

# jquery - Highcharts and jQuery animate: Snaps back to original size; only works when window is resized

> ID：15553844
> 
> 赞同：0
> 
> 时间：2013-03-21T17:08:42.917
> 
> 标签：jquery, resize, jquery-animate, highcharts, highstock

Frustrating issue... I'm rendering a chart via Highstock; works fine. I'm then using jquery animate to shrink the size of the chart when clicking on a certain link; also works fine. However, once the animation is complete, the chart just snaps back to the original size. When I resize the browser window, the chart goes to the right size (i.e. what it should be after the animation completes). It's almost like the chart needs to redraw; but I've tried calling the redraw option to no avail. Thanks for any help.

Here's my code:

```
 $("#PriceChart").animate({
   width: "250px"
 }, 1500 ); 
```

And my chart:

```
var pricechart;
$(document).ready(function() {
    pricechart = new Highcharts.StockChart({
        chart : {
            renderTo : 'PriceChart',
            margin: 1
        },
 yadda yadda yadda 
```

**Update** jsfiddle: [http://jsfiddle.net/GyY9m/8/](http://jsfiddle.net/GyY9m/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:59:31.203

因为内部 div`.highcharts-container`具有固定的宽度和高度。例如，您可以设置：

```
#PriceChart {
    overflow: hidden;
} 
```

# ant - TestNG TestLink Jenkins Ant cannot find results

> ID：15553845
> 
> 赞同：0
> 
> 时间：2013-03-21T17:08:44.447
> 
> 标签：ant, jenkins, testng, testlink

I've just began to work with TestLink but I cannot see the results of the executions: on my Jenkins I have an ANT build file which runs a TestNG suite, and it began to work writting that he had found 1 result. (In spanish:

```
Ejecutado por el programador
Ejecutando remotamente en  qaie9 en el espacio de trabajo c:\jenkins\jobs\COMPLEMENTARIO
Preparando la API cliente del TestLink
Utilizando la siguiente URL del TestLink: http://XXX.XXX.XXX.XXX/testlink/lib/api/xmlrpc.php

Ha encontrado 1 resultados de pruebas.

Ordenando casos de prueba automatizados por el orden de ejecuci?n del plano de pruebas del Testlink.

Ejecutando Build Steps unitarios.

[COMPLEMENTARIO] $ cmd.exe /C '"C:\apache-ant-1.8.3\bin\ant.bat testBasicoAgenda && exit %%ERRORLEVEL%%"'
Buildfile: c:\jenkins\jobs\COMPLEMENTARIO\build.xml

testBasicoAgenda:..... 
```

But at the end of the log, it says that he found 0 results:

```
BUILD SUCCESSFUL
Total time: 1 minute 54 seconds
Ejecutando Build Steps iterativos.

Buscando por los Resultados de Pruebas de los Casos de Prueba del Testlink.

Looking for test results in TestNG methods by its name and data provider name.

Ha encontrado 0 resultados de pruebas.

TestNG Reports Processing: START
Looking for TestNG results report in workspace using pattern: **/test-output/testng-results.xml
Saving reports...
Processing 'C:\Documents and Settings\usuarioqa\.jenkins\jobs\AGENDA - PLAN BASICO\builds\2013-03-21_17-30-44\testng\testng-results.xml'
TestNG Reports Processing: FINISH
Finished: SUCCESS 
```

I mean, why doesn't it look for any TestNG results? The path for the results is `test-output/*.xml`. I've read another issue where somebody says It worked with success results and not for failed results but in my case it doesn't work with any! Can anyone help me please? I don't know what's wrong with it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:20:17.663

找到的结果是 testLink 中的测试用例（自动执行）。
请提供您对 jenkins 的整个配置和您的文件夹架构。

# objective-c - Casting Class type

> ID：15553846
> 
> 赞同：17
> 
> 时间：2013-03-21T17:08:47.230
> 
> 标签：objective-c, class, casting

I know it's possible to define Class property which responds to a given protocol, like:

```
Class <MyProtocol> class = [object class]; 
```

But is there any way in Objective-C to cast Class type to my class?

```
Class unknownClass = [object class];
[((MyClass)unknownClass) myMethod]; // How can I cast Class to MyClass? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T19:24:35.490

你问的真的没有任何意义。

`unknownClass`指向一个*类对象*。`Class`只是一种可以保存指向类对象的任何指针的类型。您通过向类对象发送消息来调用类方法。

`Class`，例如`id`，关闭静态类型检查。这意味着编译器不会抱怨对象可能不响应该方法。所以你应该给它发一条消息。“铸造”没有任何意义。如果您收到没有声明此方法的接口的错误，那么您遇到了一个与类型无关的完全不相关的问题；相反，该方法未在任何可见标头中声明。

您在对另一个答案的评论中说“我知道 'unknownClass' 实际上是 MyClass 类型。” 这使您的问题变得更没有意义-*为什么不直接使用`MyClass`呢？*而不是`unknownClass`？喜欢`[MyClass myMethod];`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T17:38:50.460

```
obj->isa = [NewClass class]; 
```

这应该改变一个对象的类。

这样做时，我相信您知道自己在做什么。

# python - Use python to parse a log file and print to LCD using GPIO on Raspberry Pi

> ID：15553847
> 
> 赞同：1
> 
> 时间：2013-03-21T17:08:56.510
> 
> 标签：python, parsing, lcd, gpio

I am new to python so please forgive me in advance ;-) I am trying parse a log file for a name that always occurs after a known word and print that name to an LCD using the GPIO library. I have the LCD working and can print a given message but not sure how to use python to grep the log file and output that information to the LCD. Any help would be great, thanks...

# macos - Different GDBs, different debugging behaviors

> ID：15553850
> 
> 赞同：0
> 
> 时间：2013-03-21T17:09:11.630
> 
> 标签：macos, gdb, homebrew

**Background**

I am trying to debug a C++ code that uses some personal dynamic libraries. I am using Mac OSX, but I am not using llvm/clang to compile my code nor the libraries. At the moment, I am using the GNU g++ compiler (4.7) provided by homebrew.

**The problem**

I have two choices of debuggers in this environment: the gdb version provided by Mac Developer Tools (GNU gdb 6.3.50-20050815 (Apple version gdb-1824)) and the gdb installed with homebrew (GNU gdb (GDB) 7.5.1). I would prefer to use the latter, but when using it, it shows many important variables as *optimized out*.

For example, this is an extract of the output of my program using gdb 7.5.1:

```
Breakpoint 1, MWE::Outputs (this=<optimized out>, time=<optimized out>)
    at /Users/ynet/temp/mwe.cpp:203
203     cout << "example" << endl;
(gdb) p this
$1 = <optimized out> 
```

While gdb 6.3.50 shows:

```
Breakpoint 1, MWE::Outputs (this=0x100601080, time=0.64300000000000046) at /Users/ynet/temp/mwe.cpp:203
203     cout << "example" << endl;
(gdb) p this
$1 = (MWE * const) 0x100601080 
```

Both programs are identical (i.e. it's the same executable); it has been compiled with the homebrew g++-4.7 and not the llvm/clang compiler provided by Apple Developer Tools. Unlike questions regarding the *optimized out* results of gdb, I have checked that I am compiling with '-O0' (my current flags are '-O0 -g -ggdb')

**Question**

Why do I get two different behaviors of gdb in this case and what should I do in order to use the most recent gdb version without the optimized values?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:21:28.757

> 为什么在这种情况下我会得到 gdb 的两种不同行为，我应该怎么做才能使用没有优化值的最新 gdb 版本？

`<optimized out>`GDB 打印未优化的代码显然是一个错误。

您应该尝试使用从主干构建的 GDB 重现此问题，创建一个显示问题的最小测试用例，并提交错误 bugzilla。

# java - 与 Scala / Akka actor 相比，Java 线程有多重？

> ID：15553857
> 
> 赞同：48
> 
> 时间：2013-03-21T17:09:58.123
> 
> 标签：java, multithreading, performance, scala, akka

我只是在比较 scala actor 与 java 线程的性能。

我很惊讶地看到差异，我观察到使用我的系统我最多只能生成约 2000 个线程（一次运行）但使用相同的系统我能够生成约 500,000 个 scala 演员。

这两个程序都使用了大约 81MB 的 JVM 堆内存。

你能解释一下 java 线程是如何比 scala / akka 演员重这么多的吗？让 scala-actor 如此轻巧的关键因素是什么？

**如果我想获得最佳的可扩展性，我应该选择基于角色的 Web 服务器，而不是像 JBoss 或 Tomcat 这样的基于 Java 的传统 Web/应用服务器吗？**

谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-21T17:27:16.707

Scala actor（包括 Akka 变种）使用 Java 线程。没有什么神奇的：同时运行几千个线程对于大多数台式机来说是个问题。

Actor 模型允许按需唤醒的 Actor 不占用线程，除非他们有工作要做。一些问题可以有效地建模为大量睡眠代理等待获得一些工作，他们会相对快速地完成它然后重新进入睡眠状态。在这种情况下，actor 是使用 Java 线程来完成工作的一种非常有效的方法，尤其是如果您有像 Akka 这样的库，其中性能是一个高优先级。

[Akka 文档](http://doc.akka.io/docs/akka/snapshot/general/actors.html)很好地解释了基础知识。

所有可合理扩展的 Web 服务器都必须以一种或另一种方式解决这类问题；您可能不应该主要根据是否在幕后使用演员来决定网络服务器，并且无论您使用什么，您都可以自己添加演员。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-21T17:26:54.223

Akka actor 不等同于线程。它更像`Callable`是在线程池上执行的。

当消息被分派给一个actor时，那个actor被放置在一个线程池中来处理这个消息。完成后，池化线程可用于执行其他参与者。

# java - netbeans 中的 java.lang.NullPointerException

> ID：15553860
> 
> 赞同：-2
> 
> 时间：2013-03-21T17:10:01.840
> 
> 标签：java, nullpointerexception

我正在写一些代码，但我一直收到这个错误，这与我调用 network.addstation 的位置有关

这是代码，网络方法中还有其他方法，但我想我只显示一个，但是当您调用任何方法时它会出现。任何帮助将不胜感激。谢谢。

```
public class MyNetworkReader implements NetworkReader {

    Network network = null;

    @Override
    public Network read(InputStream stream) {
        Scanner scan = null;
        scan = new Scanner(stream);
        while (scan.hasNext()) {
            String fromStation = scan.next();
            if (!fromStation.equalsIgnoreCase("connection:")) ;
            network.addStation(fromStation)
            System.out.println(fromStation);
        }
    }

    return network;
}

import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;

public class MyNetwork implements Network {

    HashMap<String, ArrayList> stations = new HashMap<String, ArrayList>();

    public void addStation(String station) {
        stations.put(station, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:15:24.600

您是否在任何地方构建 MyNetwork 实例？

好像你想要

```
 Network network = null; 
```

成为

```
MyNetwork network = new MyNetwork(); 
```

因为您试图在未启动的对象上调用方法。但是您的 MyNetwork 类需要一个构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-20T21:20:41.413

请注意，如果您的项目的 Properties->Run->Console Type 设置为 Internal Terminal 而不是 External Terminal，则使用默认 NetBeans 设置运行 C++ 代码时，您也可以立即收到此错误；至少在 Ubuntu 上使用 FLTK 图形时。在这种情况下，这是 NetBeans 内部握手问题，而不是源代码问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:15:52.683

您自己在代码的第二行将网络初始化为空，那么它显然会抛出 NullPointerException

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-09T14:44:10.740

正如 DragonLord 所说，这不是源代码问题。您将能够分辨出来，因为每当您运行任何 C++ 代码时都会发生这种情况。我有同样的问题。不过，我做了一些与 DragonLord 略有不同的事情。我将程序的输出设置为 Project Properties>Run>Console Type 并将其设置为 Standard Output。

# list - 检查对列表是否未排序

> ID：15553872
> 
> 赞同：0
> 
> 时间：2013-03-21T17:10:22.120
> 
> 标签：list, sml

我对以下代码有疑问：

```
fun unsorted cmp ((x, y)::[]) = false
  | unsorted cmp ((x, y)::xx::xs) =
    if cmp(y, xx) = GREATER then true else unsorted cmp (xx::xs) 
```

我只希望这个函数`true`在列表未排序时返回，`false`否则返回。这应该适用于由第二个组件比较的对列表。

这是我的简单列表的正确代码：

```
fun unsorted' cmp [] = false
  | unsorted' cmp (x::[]) = false
  | unsorted' cmp (x::xx::xs) =
    if cmp(x, xx) = GREATER then true else unsorted' cmp (xx::xs) 
```

但是我对列表的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:29:21.623

问题出在您对`cmp`. 这是您的工作版本的推断类型`unsorted`：`('a * 'a -> order) -> 'a list -> bool`

它需要一个比较函数（类型为`'a * 'a -> order`）和一个包含类型为 的元素的列表`'a`。然后，您使用以下模式对列表进行模式匹配：`(x::xx::xs)`因此`x`和`xx`都绑定到 type 的值`'a`，并且`xs`绑定到 的列表`'a`。然后你`cmp`用一个 2 元组调用，它的类型为`'a * 'a`: `cmp(x,xx)`。

在您的另一个版本中，您想要处理一对列表（即 type 的值`'a * 'a list`），因此您使用的是不同的模式：`((x,y)::xx::xs)`. 在这种情况下，`x`and`y`都绑定到 type 的值，`'a`但`xx`绑定到一对 type `'a * 'a`。因此，在您对 的调用中`cmp`，这是参数的类型：`'a * ('a * 'a)`。请记住，在 ML 中，所有函数都接受一个参数，而多个参数是通过传递元组或柯里化来实现的，您在本示例中都使用了这两种方法。（`cmp`接受一个元组，并被`unsorted`咖喱）

尝试在新版本中使用以下模式：

```
fun unsorted cmp ((x,y)::[]) = ...
  | unsorted cmp ((x,y)::(xx,yy)::xs) = ... 
```

...看看你在尝试完成该功能时能走多远。

# c# - 30 秒后连接超时

> ID：15553873
> 
> 赞同：1
> 
> 时间：2013-03-21T17:10:23.580
> 
> 标签：c#, mysql

我有一个连接到 MYSQL 数据库的 C# 程序。存储过程耗时超过 30 秒，因此连接超时。我想要做的是将执行存储过程的分配时间增加到 5 分钟。我知道默认超时是 30 秒，需要增加分配的时间。是否可以在 C# 中执行此操作，或者我需要执行更少的存储过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:13:37.487

您还可以使用在字符串连接中配置超时`Connect Timeout property`

```
Config File : "Data Source=;Initial Catalog=;Connect Timeout=...." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:12:19.583

创建 sql 查询命令的位置：

```
command.CommandTimeout = int.MaxValue; 
```

或将 int.MaxValue 设置为您选择的超时。

# javascript - UpdatePanel 更新时隐藏字段值丢失/重置

> ID：15553874
> 
> 赞同：0
> 
> 时间：2013-03-21T17:10:23.933
> 
> 标签：javascript, asp.net, asp.net-ajax, updatepanel

我在 ASP.NET 网站中使用 Javascript。我也在代码中使用更新面板。我正在使用更新面板中存在的隐藏字段。

我想使用 document.getelementbyID(hiddenfield);

但是每次我更新更新面板时，我都会得到相同的值，我怎样才能得到更新的值。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:17:11.210

我的第一个“预感”是服务器没有在回发时使用新值。*在每次回发时，更新的 UpdatePanel的**全部内容***都会被替换- 这包括前面提到的隐藏字段。

检查 Firebug（或等效）中的网络请求和/或将调试器附加到 ASP.NET 进程。第一步是准确确定值在何处/何时不符合预期/期望。

各种框架（例如 DevExpress，也许是 Telerik）提供了自定义的隐藏字段控件，这些控件足够智能，可以在回发中保留其数据。这样的控件创建或模拟相对简单。

*在异步*回发中保留隐藏字段的一种快速技巧是将其移到任何 UpdatePanel .. YMMV*之外*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:17:24.067

您必须使用`ClientID property`，因为您的控件包含 runat="server"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:18:24.493

尝试以下操作：

```
window.onload = function () {
    document.getElementById("myButton").onclick = function () {
        var hiddenField = document.getElementById('<%=HiddenField1.ClientID %>');
        alert(hiddenField.value);
    }
} 
```

由于您的代码如此之少，而且没有错误，很难判断到底发生了什么，它可能有很多问题。您必须确保`document.getElementById`在页面加载后使用，等等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:33:44.427

您能否发布您的代码..如果您已将隐藏字段放在更新面板中，那么在每次回帖时，它的值都会重新初始化。尝试将其放在更新面板之外...

希望这可以解决您的错误，如果它与它相关..

# c# - .NET Chart 控件中的多系列条形图

> ID：15553875
> 
> 赞同：5
> 
> 时间：2013-03-21T17:10:26.547
> 
> 标签：c#, asp.net, .net

我正在尝试基于“名称”的多系列条形图，但它抛出了一个错误

> 图表区域包含不兼容的图表类型。例如，条形图和柱形图不能存在于同一图表区域中。

这是我的代码：

```
 Chart1.Series["Series1"].ChartType = SeriesChartType.Bar;
            Chart1.Series["Series1"]["DrawingStyle"] = "Emboss";
            Chart1.ChartAreas["ChartArea1"].Area3DStyle.Enable3D = false;
            Chart1.Series["Series1"].IsValueShownAsLabel = true;

            DataTable dt = new DataTable();
            DataColumn dc;

            dc = new DataColumn();
            dc.ColumnName = "Name";
            dt.Columns.Add(dc);

            dc = new DataColumn();
            dc.ColumnName = "Question";
            dt.Columns.Add(dc);

            dc = new DataColumn();
            dc.ColumnName = "Marks";
            dt.Columns.Add(dc);

            DataRow dr;
            dr = dt.NewRow();
            dr["Name"] = "Fred";
            dr["Question"] = "2D";
            dr["Marks"] = "54";
            dt.Rows.Add(dr);
            dr = dt.NewRow();
            dr["Name"] = "Bill";
            dr["Question"] = "3D";
            dr["Marks"] = "66";
            dt.Rows.Add(dr);
            dr = dt.NewRow();
            dr["Name"] = "Rhona";
            dr["Question"] = "4D";
            dr["Marks"] = "32";
            dt.Rows.Add(dr);
            dr = dt.NewRow();
            dr["Name"] = "Peter";
            dr["Question"] = "5D";
            dr["Marks"] = "46";
            dt.Rows.Add(dr);

            var IEtable = (dt as System.ComponentModel.IListSource).GetList();

            Chart1.DataBindTable(IEtable, "Name"); 
```

标记是，

```
<asp:Chart ID="Chart1" runat="server" Width="850px" Height="500px" >

                            <Series>
                                    <asp:series Name="Series1" ChartArea="ChartArea1"></asp:series>
                            </Series>
                            <ChartAreas>
                                    <asp:ChartArea Name="ChartArea1">
                                    </asp:ChartArea>
                            </ChartAreas>
                    </asp:Chart> 
```

我正在寻找类似的输出，

![在此处输入图像描述](../Images/faa52e14ccec81e3b9575ffd0d629d9b.png)

其中彩条代表“名称”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:49:04.580

这绝对是可能的，您将能够生成如下所示的图表： ![在此处输入图像描述](../Images/9b8642684d374c5e9887d75fa9d8f5e6.png)

以下代码将获得您需要的内容：

**ASPX**

```
 <asp:Chart ID="Chart1" runat="server" Palette="SeaGreen" BackColor="LightGray" Width="654px">
            <Series>

            </Series>
            <ChartAreas>
                <asp:ChartArea Name="ChartArea1" AlignmentOrientation="Horizontal">
                </asp:ChartArea>
            </ChartAreas>
        </asp:Chart> 
```

**C＃**

```
 //Build Sample Data DataTable
        DataTable dt = new DataTable();
        DataColumn dc;

        dc = new DataColumn();
        dc.ColumnName = "Name";
        dt.Columns.Add(dc);

        dc = new DataColumn();
        dc.ColumnName = "Question";
        dt.Columns.Add(dc);

        dt.Columns.Add("Marks", typeof(int));

        string question = "2D";

        DataRow dr;
        dr = dt.NewRow();
        dr["Name"] = "Fred";
        dr["Question"] = question;
        dr["Marks"] = 54;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Bill";
        dr["Question"] = question;
        dr["Marks"] = 66;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Rhona";
        dr["Question"] = question;
        dr["Marks"] = 32;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Peter";
        dr["Question"] = question;
        dr["Marks"] = 46;
        dt.Rows.Add(dr);

        question = "4D";
        dr = dt.NewRow();
        dr["Name"] = "Fred";
        dr["Question"] = question;
        dr["Marks"] = 89;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Bill";
        dr["Question"] = question;
        dr["Marks"] = 99;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Rhona";
        dr["Question"] = question;
        dr["Marks"] = 28;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Peter";
        dr["Question"] = question;
        dr["Marks"] = 44;
        dt.Rows.Add(dr);

        question = "3D";
        dr = dt.NewRow();
        dr["Name"] = "Fred";
        dr["Question"] = question;
        dr["Marks"] = 26;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Bill";
        dr["Question"] = question;
        dr["Marks"] = 89;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Rhona";
        dr["Question"] = question;
        dr["Marks"] = 73;
        dt.Rows.Add(dr);
        dr = dt.NewRow();
        dr["Name"] = "Peter";
        dr["Question"] = question;
        dr["Marks"] = 14;
        dt.Rows.Add(dr);

        //Sort the datatable
        DataView dv = dt.DefaultView;
        dv.Sort = "Question ASC, Name ASC";
        dt = dv.ToTable();

        DataTable table = new DataTable();
        table.Columns.Add("Question", typeof(string));
        foreach (DataRow dr2 in dt.Rows)
        {
            //Add user Names to DataTable table
            if (!table.Columns.Contains(dr2["Name"].ToString())) {
                table.Columns.Add(dr2["Name"].ToString(), typeof(int));
            }

            //Add empty Question rows to DataTable
            if (table.AsEnumerable().Where(x => x.Field<string>("Question") == dr2["Question"].ToString()).Count() == 0)
            {
                table.Rows.Add(dr2["Question"].ToString());
            }
        }

        // Loop through all columns and questions and then calculate the mark
        for (int i = 1; i < table.Columns.Count;i++ )
        {
            for (int j = 0; j < table.Rows.Count; j++) 
            {
                string questionName = table.Rows[j][0].ToString();
                for (int k = 0; k < dt.Rows.Count; k++) 
                {
                    string userName = table.Columns[i].ColumnName;
                    table.Rows[j][i] = dt.AsEnumerable().Where(x => x.Field<string>("Name") == userName).Where(y=>y.Field<string>("Question") == questionName).Sum(r => r.Field<int>("Marks"));
                }
            }
        }

        Chart1.Series[seriesName].ChartType = SeriesChartType.Bar;

        //convert datatable to a IEnumerable form
        var IEtable = (table as System.ComponentModel.IListSource).GetList();

        Chart1.DataBindTable(IEtable, "Question"); 
```

# php - mkdir() 调用一次时会创建两个目录，为什么会出现这种奇怪的行为？

> ID：15553878
> 
> 赞同：0
> 
> 时间：2013-03-21T17:10:40.833
> 
> 标签：php, mkdir, tmp

如果我将以下代码放在一个`.php`文件中并在我的浏览器中运行它，则会在我的目录中创建*两个*`/tmp`目录，每个目录都有一个`uniqid()`基础名称：

```
<?php

$tmpfolder = uniqid("test_");
echo $tmpfolder;
mkdir("/tmp/" . $tmpfolder);
exit(); 
```

就好像我已经运行了两次代码一样。从 中显示一个名称`echo`，但也会创建另一个名称。

有没有人见过这种奇怪的行为？我不知道如何解决它，并认为这里有人会。

# ruby-on-rails - Rails 中的 RESTful API

> ID：15553887
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:11:09.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rest

我对 Rails 非常陌生，并且正在学习 RESTful API 教程，所以如果它的质量不是很好，请原谅，因为我同样也是这类术语的初学者。

我用命令创建了一个控制器小猫`rails g controller kitten index`

在 index 方法中我发布了这段代码 -

```
class KittenController < ApplicationController
  def index
    require 'open-uri'

    kittens = open('http://placekitten.com/')
    response_status = kittens.status
    response_body = kittens.read[559, 441]

    puts response_status
    puts response_body
  end
end 
```

`match ':controller(/:action(/:id))(.:format)'`并且没有评论`routes.rb`

当我浏览这个 -`http://localhost:3000/kitten`

这就是我在浏览器中得到的 -

> 小猫#index
> 
> 在 app/views/kitten/index.html.erb 中找到我

这在我的命令行中 -->

![比利](../Images/f466ffcdad8c8514504a84b424891281.png)

现在我的问题是为什么会这样，尽管我期待它出现在我的浏览器中，但猫显示在命令提示符而不是浏览器中..我是休息资源的新手，所以如果它是一个坏的，请原谅:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T17:15:19.300

我不知道你在学习什么教程，但是这样做对于 Rails 来说似乎是一件非常奇怪的事情，尤其是学习 RESTful API。

无论如何，`puts`控制器中的 in 将文本输出到 Ruby 的标准输出，这将是服务器启动的终端。这就是为什么它出现在控制台而不是浏览器中的原因：`puts`把它放在那里。

如果您希望它出现在网页中，您需要为该控制器操作创建一个视图。也许进一步按照您的教程进行操作将让您到达那里：如果没有，您可能想找到一个更好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T17:27:08.607

您应该阅读[Model-View-Controller rails 指南](http://guides.rubyonrails.org/getting_started.html#the-mvc-architecture)。

> 控制器提供模型和视图之间的“粘合剂”。在 Rails 中，控制器负责处理来自 Web 浏览器的传入请求，询问模型以获取数据，并将该数据传递给视图以进行展示。

在控制器中定义变量并将其显示在视图中：

```
class KittenController < ApplicationController
  def index
    @variable = 'Hello World'
  end
end 
```

在您看来（app/views/kitten/index.html.erb）：

```
<%= @variable %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:20:39.730

Rails 控制器使用[渲染调用](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)设置响应。当调用未执行时，它会实例化适当的视图并呈现该视图。在你的情况下是 index.html.erb

试试这个：

```
render :text => kittens.read[559, 441], :status => kittens.status 
```

# networking - tcp/udp 数据字段是否应该转换为网络字节顺序

> ID：15553890
> 
> 赞同：0
> 
> 时间：2013-03-21T17:11:17.327
> 
> 标签：networking, tcp, network-programming

如果机器 A 和机器 B 正在相互通信，但是它们具有不同的主机字节顺序，那么在网络编程中，在发送端，应该将 tcp/udp 数据字段转换为网络字节顺序，为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:48:12.673

除非您遵循预先存在的规范，否则始终使用[网络字节顺序](http://en.wikipedia.org/wiki/Endianness#Endianness_in_networking)（又名“big-endian”）是最安全的：

*   您需要指定*一些*字节顺序；您不能只发送二进制数据并希望接收者能够弄清楚。
*   因为大端数据是 Internet 的[标准](https://www.rfc-editor.org/rfc/rfc1700)，所以有很多工具可以与*主机*字节顺序进行转换。您必须编写自己的工具来在主机和小端之间进行转换。

反对的传统论点是“全世界都是 VAX”（或者今天，x86），它是 little-endian，因此网络字节顺序对数据施加了性能税。也许这在 20 或 30 年前是一个有效的论点，但今天肯定不是。处理器转换数据所花费的时间是在网络上移动数据所花费时间的极小部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:41:44.520

在许多情况下肯定会推荐它。为了解释原因，让我们看一个例子：

1.  您有一个程序，它采用 32 位无符号整数，将其放入数据包中并发送到另一台主机
2.  另一台主机从数据包中提取数据并将其存储为 32 位无符号整数。
3.  发送主机为大端，接收主机为小端。

如果上例中的发送主机发送号码 1024，则该号码将作为 0x00000400 存储在发送主机的机器上。如果接收主机在接收这些字节时没有更改字节顺序并将 0x00000400 存储在内存中，则这将被解释为与 1024 完全不同的数字。十进制数 1024 的小端表示将是 0x00040000。在 little-endian 机器上，0x00000400 是十进制数 262,144。

转换为网络字节顺序允许程序依赖数据的标准编码以避免混淆，就像我们在上面的示例中看到的那样。接收端从网络字节顺序转换为它使用的任何字节顺序的功能很容易获得且易于使用。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-22T09:49:38.640

**TCP**具有用于重新排序接收到的数据包的内置机制。**UDP**没有。我不确定“不同的主机字节顺序”是什么意思，但是如果接收到的数据包带有字节级错误，那么这就是重新传输此类数据包的第 2 层角色。

# machine-learning - 判别子空间 Fisher判别分析

> ID：15553891
> 
> 赞同：0
> 
> 时间：2013-03-21T17:11:17.900
> 
> 标签：machine-learning, computer-vision, pca

我只有2节课。Fisher 判别分析将数据投影到低维判别子空间中。根据论文，我最多可以找到 C-1 个非零特征值。这意味着如果我的初始数据的维度为 d，则投影数据的维度最多为 c-1。如果类数只有2个，我会得到一个只有一维的特征向量。

我的问题是我想将我的数据投影到一个有区别的子空间中，然后我想得到一个大小为 m (m < d, m~=1) 的特征向量。

有没有办法做这种有区别的投影？

# geometry - 可处理圆锥弧段的计算几何算法

> ID：15553894
> 
> 赞同：5
> 
> 时间：2013-03-21T17:11:29.787
> 
> 标签：geometry, computational-geometry

我刚刚读完一本名为“计算几何算法与应用”的书。本书介绍的算法对我以后的工作很有帮助。

但是本书中的算法只关注直线段。我想知道的是可以处理直线和圆锥弧的相同算法。

比如找混合线段和圆锥弧的交点；带有圆锥弧的偏移多边形；找到具有圆锥弧边的凹多边形的凸包...

第三方库，如 CGAL 可以处理这样的问题，但我想知道算法的细节。我应该参考什么书或材料？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:05:22.593

通常，具有弯曲弧的计算几何更复杂且探索较少。但并非未经探索，而且通常类似的技术就足够了。如您所知，CGAL 是一个值得一看的地方。和 LEDA，尤其是[在这里](http://www.quappa.com/tech-geom.htm#arcs)：

          ![LEDA弧形几何](../Images/4d38fe2b005717c8b26eda495c7375fb.png)

* * *

(*补充*)： 应参考文献的要求，您可以从下面的论文开始，通过其参考文献进行时间回溯，通过谷歌学术（据报道被79篇论文引用）进行时间检索：

> Eric Berberich、Arno Eigenwillig、Michael Hemmer、Susan Hert、Kurt Mehlhorn、Elmar Schömer “圆锥弧的计算基础和圆锥多边形上的布尔运算”。计算机科学讲义第 2461 卷，2002 年，第 174-186 页。（[施普林格链接](http://link.springer.com/chapter/10.1007/3-540-45749-6_19?LI=true)）

# ios - UIGraphicsGetCurrentContext 和 UIScrollView

> ID：15553895
> 
> 赞同：0
> 
> 时间：2013-03-21T17:11:30.967
> 
> 标签：ios, uiscrollview, cgcontext

我正在尝试将 UIScrollView 的所有内容保存为 .pdf。我找到了一些保存当前视图的教程，它们都依赖于使用`UIGraphicsGetCurrentContext()`. 现在，我只用

```
CGContextRef context = UIGraphicsGetCurrentContext();
[myView.layer renderInContext:context]; 
```

这适用于普通的 UIView。但是，当我尝试将 UIScrollView 作为传递时`myView`，它会很好地传递 UIScrollView 的可见部分，但屏幕外的任何内容都只是空白。 **有没有一种方法可以扩展`context`以获取 UIScrollView 中的所有内容，而不仅仅是当前可见的内容？** 我怀疑我不能`UIGraphicsGetCurrentContext()`用于 UIScrollView，但我不知道改用什么，而且[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)对此并没有太大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T17:41:54.280

如果您有一个子视图将滚动视图的整个内容大小与滚动内容一起使用，您可以这样做：

```
CGContextRef context = UIGraphicsGetCurrentContext();
UIView *contentView = [scrollView subviews][0];
[contentView.layer renderInContext:context]; 
```

如果 scrollView 中有多个视图，您可以这样做：

```
UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(
                                                          scrollView.frame.origin.x,
                                                          scrollView.frame.origin.y, 
                                                          scrollView.contentSize.width, 
                                                          scrollView.contentSize.height)];
for(UIView *view in [scrollView subviews]){
 [contentView addSubview: view];
}

CGContextRef context = UIGraphicsGetCurrentContext();
[contentView.layer renderInContext:context]; 
```

然后您需要将视图返回到滚动视图中。可能有一种方法可以复制它们，但我不确定如何。无论如何，这应该起作用：

```
for(UIView *view in [contentView subviews]){
 [view removeFromSuperView];
 [scrollView addSubview:view];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:30:04.757

您可以在调用 renderInContext 之前将 UIScrollView 的框架设置为等于它的内容大小和内容偏移量为 0。之后将帧恢复为原始帧。

```
myView.frame = CGRectMake(myView.frame.origin.x,myView.frame.origin.y,myView.contentSize.with,myView.contentSize.height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T10:34:14.113

这段代码我用来从 uiscrollview 制作 pdf，它确实有帮助，但它不会像我们在 pdf 上绘制那样好——请看——**来自 UIScrollView 的 Pdf**

```
- (void) createPDF
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *directroyPath = nil;
    directroyPath = [documentsDirectory stringByAppendingPathComponent:@"temp"];
    NSString *filePath = [directroyPath stringByAppendingPathComponent:@"test.pdf"];
    // check for the "PDF" directory
    NSError *error;
    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {

    } else {
        [[NSFileManager defaultManager] createDirectoryAtPath:directroyPath
                                  withIntermediateDirectories:NO
                                                   attributes:nil
                                                        error:&error];
    }

    CGContextRef pdfContext = [self createPDFContext:_scrollView2.bounds path:(CFStringRef)filePath];
    NSLog(@"PDF Context created");

    /*
     Here limit of i is no of pages in your uiscrollview or
     you can use hit and trial here because there is a
     length of page is going to be equal to 
     the visible size of uiscrollView in your application 
   */

    for (int i = 0 ; i< 2 ; i++)
    {

        // page 1
        CGContextBeginPage (pdfContext,nil);

        //turn PDF upsidedown
        CGAffineTransform transform = CGAffineTransformIdentity;

       //here 365 is equal to the height of myScrollView.frame.size.height

        transform = CGAffineTransformMakeTranslation(0, (i+1) * 365);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);
        CGContextConcatCTM(pdfContext, transform);

        //Draw view into PDF
        [_scrollView2.layer renderInContext:pdfContext];
        CGContextEndPage (pdfContext);
        [_scrollView2 setContentOffset:CGPointMake(0, (i+1) * 365) animated:NO];

    }
    CGContextRelease (pdfContext);
}

- (CGContextRef) createPDFContext:(CGRect)inMediaBox path:(CFStringRef) path
{
    CGContextRef myOutContext = NULL;
    CFURLRef url;
    url = CFURLCreateWithFileSystemPath (NULL, path,
                                         kCFURLPOSIXPathStyle,
                                         false);

    if (url != NULL) {
        myOutContext = CGPDFContextCreateWithURL (url,
                                                  &inMediaBox,
                                                  NULL);
        CFRelease(url);
    }
    return myOutContext;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T15:00:07.820

检查[ScrollViewToPDF](https://github.com/azu/ScrollViewToPDF/tree/master/ScrollViewToPDF)示例并理解它。

它使用相同`scrollview's` `layer` `renderInContext`，但这里的 PDF 是根据您的要求创建的，例如一页 PDF 或多页 PDF

### 注意：它捕获 scrollView 的所有可见和不可见部分

# svn - 颠覆：将 svn 关键字放入所有源文件头的利弊

> ID：15553897
> 
> 赞同：1
> 
> 时间：2013-03-21T17:11:31.037
> 
> 标签：svn, version-control

在某些项目中，版本控制系统需要在项目中的每个源文件中放置作者、创建日期、上次修改的修订版等内容。例如，文件模板可以包含在文件或类注释中：

```
Author of last commit: $Author$
Revision of last change: $Rev$
Last change: $Date$ 
```

这会在版本控制系统每次签入时更新。这样做的优点和缺点是什么？毕竟，当需要时，通过检查文件的版本日志可以很容易地发现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:56:17.050

此功能有两种用途。

1.  将源代码作为产品发布的项目。在这种情况下，有人可能已经下载了您的项目的副本，该副本已从版本控制系统中导出，您需要一种方法来找出该文件在存储库中的来源。
2.  交付二进制代码的项目，但希望在界面中提供一些关于项目版本的信息以显示给用户。我见过用解释语言的项目将这些标签放入一个字符串中，然后从每个文件中解析出该信息并生成显示给用户的最终版本信息。

在这些情况之外，您是对的，您可以使用版本控制系统查看日志。如果您不属于该类别，我会说没有理由使用这些标签。

# node.js - npm 将模块安装到当前目录，而不仅仅是 node_modules

> ID：15553898
> 
> 赞同：1
> 
> 时间：2013-03-21T17:11:39.110
> 
> 标签：node.js, express, npm

我尝试创建新项目并这样做了。

```
> 快递新项目

> cd 新项目

> ls
app.js package.json public/routes/views/

> npm 安装

// ...

> ls
app.js 指挥官/cookie-signature/formidable/methods/node_modules/public/routes/
buffer-crc32/connect/debug/fresh/mime/package.json qs/send/
bytes/cookie/express/jade/mkdirp/pause/range-parser/views/

```

为什么文件被下载到当前目录？这是一个错误吗？

## 解决

我通过修复 ~/.npmrc 解决了这个问题。

```
- cache = .
+ cache = ~/.npm 
```

有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:03:16.130

## 解决

我通过修复 ~/.npmrc 解决了这个问题。

```
- cache = .
+ cache = ~/.npm 
```

有用！

# php - 从 php codeigniter 中的变量显示图像

> ID：15553899
> 
> 赞同：0
> 
> 时间：2013-03-21T17:11:42.043
> 
> 标签：php, codeigniter, image

我正在尝试加载验证码图像传递控制器来查看。我的控制器的代码

```
 $captcha_data['image'] = $this->captcha_security_model->get_captcha($width,$height,$characters);
//        header('Content-Type: image/jpeg');
//        imagejpeg($captcha_data['image']);
//        imagedestroy($captcha_data['image']);
    $this->load->view('captcha_view',$captcha_data); 
```

取消注释以全页模式显示图像的三行。我的视图代码：

```
<?php
echo $image;
?>
<img src="" />
<form action="" method="post">
<input type="text" name="word"  />
<input type="submit" name="submit" value="submit"  />
</form> 
```

从视图加载以某种方式失败。这段代码给了我这个：

![在此处输入图像描述](../Images/88147e89bccdb8e4d88760fe0f42a8da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:32:28.173

您不需要将图像传递给视图。只需在“整页模式”中将图像放入**控制器内部**，然后在视图文件中放入类似`<img src='htttp://mysite.com/captchaimage/controller/'>`

# php - PHP 多部分文本/HTML 显示空白

> ID：15553903
> 
> 赞同：0
> 
> 时间：2013-03-21T17:11:57.463
> 
> 标签：php

希望我能得到一些帮助，因为这让我发疯。

我已经尝试了各种脚本来做到这一点，但我登陆的是这个。这张照片有什么问题？我收到一封电子邮件，但它完全空白。但是，电子邮件的来源有内容。

电子邮件代码

```
//define receiver and subject

    $to = 'email@gmail.com';
    $subject = 'Test email'; 

//create boundary

    $random_hash = md5(date('r', time())); 

//define the headers

    $headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com";
    $headers .= "\r\nContent-Type: multipart/alternative; boundary=\"$random_hash\""; 

//define the body of the message.

    $message = "--$random_hash\n" .  
    "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .  
    "Content-Transfer-Encoding: 7bit\n\r" .  

    "Hello\n\rWorld!!!\n\r" .  

    "--$random_hash\n" .  
    "Content-Type: text/html; charset=\"iso-8859-1\"\n" .  
    "Content-Transfer-Encoding: 7bit\n\r" .  

    "<h2>Hello World!</h2>\n\r" .  

    "--$random_hash--";

//send the email

    $mail_sent = mail( $to, $subject, $message, $headers ); 
```

电子邮件来源（已收到）

```
 Received: (qmail 26359 invoked by uid 48); 21 Mar 2013 10:09:01 -0700
Date: 21 Mar 2013 10:09:01 -0700
Message-ID: <20130321170901.26356.qmail@mydomain.com>
To: me@mydomain.com
Subject: Test email
X-PHP-Originating-Script: 10001:plug-send-direct.php
From: webmaster@example.com
Reply-To: webmaster@example.com
Content-Type: multipart/alternative; boundary="f41fbfe6fda45eb7f5a2724ba135d292"

--f41fbfe6fda45eb7f5a2724ba135d292
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hello

World!!!

--f41fbfe6fda45eb7f5a2724ba135d292
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2>

--f41fbfe6fda45eb7f5a2724ba135d292-- 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:14:59.767

尝试使用“html”、“head”和“body”标签确保您的 HTML 格式正确。此外，请确保它们已正确关闭。

```
<html>
<head>
</head>
  <body>
  Stuff
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:16:21.177

建议研究使用[PEAR::Mail_Mime 之](http://pear.php.net/package/Mail_Mime)类的框架来处理复杂的电子邮件。使用[Mail_mimePart::addsubpart()](http://pear.php.net/manual/en/package.mail.mail-mimepart.addsubpart.php)应该更容易和更易读以正确完成此操作。这是安装后[供参考的基本示例](http://pear.php.net/manual/en/package.mail.mail-mime.example.php)。

# backbone.js - 从路由器 Vent 触发的功能中无法访问主干、集合模型

> ID：15553907
> 
> 赞同：4
> 
> 时间：2013-03-21T17:12:11.473
> 
> 标签：backbone.js, asynchronous, requirejs, fetch, amd

所以我的问题是，从我的路由器通风口/事件聚合器触发的函数中的集合无法访问我的主集合的获取模型。

我的猜测是这是一个异步调用问题，但我怎样才能做到这一点，以便通风函数调用 WAITS，直到在执行之前获取集合/模型？或者这甚至是我的问题？

这是我的相关代码。我正在使用 require.js 和主干创建模块化 AMD 应用程序。非常感谢您：

main.js

```
require(['views/app'], function (AppView) {
window.App = {
    Vent : _.extend({}, Backbone.Events)
};
new AppView(); 
```

路由器.js

```
 define([
        'backbone',
    ], function(Backbone){

    var MainRouter = Backbone.Router.extend({
    routes: {
      'levelone/:id':'showWork'
    },

    showWork: function (index){
      App.Vent.trigger('addressChange', {
        index: index
      });
   }
});
   return MainRouter;
}); 
```

应用程序.js

```
define([
'backbone',
'views/levelone/LevelOneView',
'views/leveltwo/LevelTwoView',
'views/static/StaticView',
'router'
],
function(Backbone, LevelOneView, LevelTwoView, StaticView, MainRouter){
var AppView = Backbone.View.extend({
    el: $("body"),

    events: {
               ...
    },
    initialize: function(){                 
        new LevelOneView();
        App.router = new MainRouter();
        Backbone.history.start();
    },
   ............. 
```

LevelOneView.js

```
initialize:function() {
    this.getCollection();   
    this.domSetup();

    App.Vent.on('addressChange', this.addressChange, this);
},
getCollection : function(){
    var self = this;
    onDataHandler = function(collection) {
        self.LevelTwoCollectionGrab();
    };

    this.collection = new LevelOneCollection([]);
    this.collection.fetch({ success : onDataHandler, dataType: "jsonp" });
},
// We grab a Level Two Collection here so we can take the ids from it and add them to our Level One collection.
// This is necessary so we can create links between the two levels.
LevelTwoCollectionGrab: function(){
    var self = this;

    this.leveltwocollection = new LevelTwoCollectionBase([]);

    onDataHandler = function(collection){
        self.render();
        self.$el.animate({
            'opacity': 1
        }, 1200);
        self.renderLevelTwoIds();
        self.setLevelTwoids();
        self.attachLevelTwoLink();
    }
    this.leveltwocollection.fetch({success : onDataHandler, dataType: "jsonp"});
},
renderLevelTwoIds: function(){
    return this;
},
render: function(){
    var pathname = window.location.hash;

    this.setModelId(this.collection.models);
    this.addPositionsToIndex();
    this.determineModels();
    this.attachLevelTwoLink();
    ....... 
},      

addressChange: function(opts){

console.log(this.collection.models)
//returns a big fat empty array. WHY?!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:31:12.940

您可以使用返回的 jQuery Promises`fetch`来帮助您了解何时获取两个集合。

```
initialize:function() {
    this.getCollection();   
    this.domSetup();

    App.Vent.on('addressChange', this.addressChange, this);
},
getCollection : function(){
    var self = this;

    console.log('should be first');

    this.collection = new LevelOneCollection([]);
    this.fetchingLevelOne = this.collection.fetch({ dataType: "jsonp" });
    this.fetchingLevelTwo = this.leveltwocollection.fetch({ dataType: "jsonp"});

    // wait for both collections to be done fetching.
    // this one will always be called before the one in addressChange
    $.when(this.fetchingCollectionOne, this.fetchingCollectionTwo).done(function(){
        console.log('should be second');
        self.render();
        self.$el.animate({
            'opacity': 1
        }, 1200);
        self.renderLevelTwoIds();
        self.setLevelTwoids();
        self.attachLevelTwoLink();
    });
},

renderLevelTwoIds: function(){
    return this;
},
render: function(){
    var pathname = window.location.hash;

    this.setModelId(this.collection.models);
    this.addPositionsToIndex();
    this.determineModels();
    this.attachLevelTwoLink();
    ....... 
},      

addressChange: function(opts){
    var self = this;

    // wait for both collections to be done fetching.
    // this one will always be called AFTER the one in getCollection
    $.when(this.fetchingCollectionOne, this.fetchingCollectionTwo).done(function(){
        console.log('should be third');
        console.log(self.collection.models);
    });
} 
```

这样做的好处是，如果用户在地址栏中输入的速度非常快，并且进行了多次`addressChange`调用，它们都会等到集合被提取并以正确的顺序执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:00:00.667

我想我解决了。基本上，我现在在 $.when 函数中调用该函数——

像这样：

```
 $.when(this.collection.fetch(), this.leveltwocollection.fetch()).done(function(){
        $.when(self.render()).done(function(){
            _.each(self.collection.models, function(model){
                var wpid = model.get('id'),
                    bbid = model.id;
                if (wpid == index){
                    window.App.InfoPos.pos5 = bbid;
                    var modelinfo = model.toJSON();
                    $('.box5').empty();
                    $('.box5').html(tmplOne(modelinfo));
                    self.$el.animate({
                        'opacity': 1
                    }, 1200);
                }
            });             
        });
    }); 
```

该函数从 when 调用内部启动，然后等待直到完成，然后再执行 done 函数中的任何内容。现在工作！谢谢大家的帮助，尤其是你保罗。

# html - 尝试创建 CSS 导航并遇到子元素问题

> ID：15553913
> 
> 赞同：2
> 
> 时间：2013-03-21T17:12:24.600
> 
> 标签：html, css

我正在尝试创建一个左手导航并将它靠近我需要它的地方，除了一个问题。

看看这个[Fiddle](http://jsfiddle.net/jeljeljel/LZqud/)中的例子。

当鼠标悬停在“链接”项目上时，单元格会改变颜色。但是当它悬停在辅助项目上时，外部父 li 也会改变颜色。我意识到这是因为外部 li 也有一个“链接”类，但如果我去掉那个类，那么背景就不正确了。

基本上，我希望子元素在整个容器中将边框延伸到边框。也许 ul 列表不是我想要实现的适当控制？

感谢任何帮助。

**HTML**

```
<div class="nav">
    <ul>
        <li class="link active">Home</li>
        <li class="link">Profile</li>
        <li class="navhead">Messages</li>
        <li class="link">
            <ul>
                <li class="link">Open</li>
                <li class="link">Closed Closed Closed Closed</li>
            </ul>
        </li>
    </ul>
</div> 
```

**CSS**

```
ul {
    -webkit-padding-start: 0;
    -webkit-margin-before: 0;
    -webkit-margin-after: 0;
    -webkit-margin-start: 0px;
    -webkit-margin-end: 0px;
}
.nav {
    font-family:Verdana;
    font-size:12px;
    width:200px;
}
.nav {
    background-color: #F3E0A3;
    cursor: default;
    border: 1px solid #d2b48c;
    border-collapse:collapse;
}
.nav li.navhead {
    background-color: #F3E0A3;
    border: 1px solid #d2b48c;
    border-collapse:collapse;
}
.nav ul {
    list-style-image: none;
    list-style-position: outside;
    list-style: none;
}
.nav li {
    margin: 0;
    padding: 0;
    padding-left: 10px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.nav li .active {
}
.nav li.link {
    background-color: #ECE9D8;
}
.nav li.link:hover {
    cursor: pointer;
    background-color: #e1dfd2;
}
.nav ul li ul {
    padding-left: 10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:28:47.973

[http://jsfiddle.net/LZqud/7/](http://jsfiddle.net/LZqud/7/)

HTML：

```
<li class="link link-with-sub">
        <ul class="sub">
            <li class="sublink">Open</li>
            <li class="sublink">Closed Closed Closed Closed</li>
        </ul>
    </li> 
```

CSS：

```
 .nav li.link {
    background-color: #ECE9D8;
}
.nav ul li ul.sub {
    margin-left: -10px;
    padding-left:0;
}
.nav ul li ul.sub li {
    padding-left: 20px;
}
.nav li.link:hover, .nav ul.sub li.sublink:hover {
    cursor: pointer;
    background-color: #e1dfd2;
}
.nav li.link, .nav li.link-with-sub:hover {
    background-color: #ECE9D8;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:22:46.740

更改包装内部链接类。所以它在悬停时不会改变背景。

[http://jsfiddle.net/btevfik/LZqud/6/](http://jsfiddle.net/btevfik/LZqud/6/)

```
 <li class="innerlink">
        <ul>
            <li class="link">Open</li>
            <li class="link">Closed Closed Closed Closed</li>
        </ul>
    </li> 
```

CSS

```
.nav li.innerlink {
background-color: #ECE9D8;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:34:59.720

就这么简单，如下图替换最后一块CSS，

**从：**

```
.nav ul li ul {
    padding-left: 10px;
} 
```

**到：**

```
.nav ul li ul li{
    margin-left: -10px;
    padding-left: 20px;
} 
```

希望这是你需要的..

# ruby-on-rails - 如何重新利用 Hartl 的 Ruby on Rails 教程的应用程序？

> ID：15553916
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:12:43.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, railstutorial.org

我想编写一个简单的 webapp，它建立在 Michael Hartl 的 Ruby on Rails [Tutorial](http://ruby.railstutorial.org/)中开发的 webapp 之上。

我试图简单地将所有内容复制到另一个目录中，但我发现在代码的各个部分都引用了原始 SampleApp。

在寻找并杀死原始应用程序的所有事件之前，我想知道是否有一些干净且推荐的方法来做到这一点。有什么建议/提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:15:34.417

你可能想看看[`ack`](http://betterthangrep.com/). 这是一个很棒的小搜索工具，可以帮助您找到所有出现的`SampleApp`地方并将它们更改为您要调用的新应用程序。

您将看到更改大约 9 个文件。在我的一个 Rails 应用程序上运行`ack <app_name>`产生了以下文件：

```
config/application.rb
config/environment.rb
config/environments/development.rb
config/environments/production.rb
config/environments/test.rb
config/initializers/secret_token.rb
config/initializers/session_store.rb
config/routes.rb
Rakefile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:16:15.423

如果您从示例应用程序中复制所有功能，那么 Web 应用程序就不会那么简单了。如果有的话，你应该扩展示例应用程序（这是他在本书末尾鼓励的），然后你总是可以在你的 README 文件中解释你所做的更改。即使您删除了所有出现的“示例应用程序”一词，您也应该对他表示赞赏。

# javascript - 4x4 画布绘图中的逻辑错误

> ID：15553917
> 
> 赞同：1
> 
> 时间：2013-03-21T17:12:44.650
> 
> 标签：javascript

当我按`Ctrl`+`A`突出显示从中绘制的所有画布时，最后一行似乎是空白的或全部组合在一起。我正在尝试制作一个 4x4 的画布网格。我的逻辑错误是什么？

```
var count = 0;
while (count < 16) {
    if (count % 4 == 0)
        document.write("<br><canvas id = \"canvas_ \" + count + \" width = \"50\" height = \"     50\"></canvas>");
    else
        document.write("<canvas id = \"canvas_ \" + count + \" width = \"50\" height = \" 50\"></canvas>");
    count++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:14:43.307

我已经重写了你的代码：

```
var count = 0;
while (count < 16) {
    if (count % 4 == 0)
        document.write('<br>');
    document.write('<canvas id="canvas_' + count + '" width="50" height="50"></canvas>');
    count++;
}
document.write('<br>'); 
```

除了改进编码风格的方式（例如使用两种引号）之外，我在`<br>`最后添加了一个，因为这就是导致最后一行未被选中的原因。

添加 a`canvas { border: 1px solid #000 }`使其看起来像这样：

![一个](../Images/605cf9001398e1084538ffdadeada53e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:26:46.283

Your code is ok but it seams that canvas element is not selected when you press `CTRL`+`A` only `<br/>` elements. It will work when you add one more `<br/>` at the end. And you have also errors in your code count was inside a string.

```
var count = 0;
document.write("<br>");
while (count < 16) {
    document.write("<canvas id=\"canvas_" + count + "\" width=\"50\" height=\"50\"></canvas>");
    count++;
    if (count % 4 == 0) {
        document.write("<br>");
    }
} 
```

# android - 如何使用外部罐子

> ID：15553925
> 
> 赞同：2
> 
> 时间：2013-03-21T17:13:11.827
> 
> 标签：android, jar

我读了很多关于这个问题的书，但我仍然无法做到这一点。

我有两个项目：一个做一些事情，我想做的是将它设置为 jar 文件并在主项目中使用它，调用它并获取我不知道如何实例化该包的一个类的信息来启动随着过程。辅助项目单独运行良好，我想获取信息并在主项目中使用它。如果我将辅助设置为库并将其添加到主库，它可以正常工作，但我不想以这种方式进行。

我认为可以做到，但我不知道如何从 jar 文件中实例化一个类，我开始绝望了。

* * *

这是我在 jared 中调用活动时的 logCat

```
file 03-22 11:04:57.900: E/AndroidRuntime(11895): FATAL EXCEPTION: main
03-22 11:04:57.900: E/AndroidRuntime(11895): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.suscribir/com.example.suscribir.Suscribir}; have you declared this activity in your AndroidManifest.xml?
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.app.Activity.startActivityForResult(Activity.java:2827)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.app.Activity.startActivity(Activity.java:2933)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at com.example.principal.Principal$1.onClick(Principal.java:37)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.view.View.performClick(View.java:2485)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.view.View$PerformClick.run(View.java:9080)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.os.Handler.handleCallback(Handler.java:587)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.os.Looper.loop(Looper.java:130)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at java.lang.reflect.Method.invokeNative(Native Method)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at java.lang.reflect.Method.invoke(Method.java:507)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-22 11:04:57.900: E/AndroidRuntime(11895):    at dalvik.system.NativeStart.main(Native Method) 
```

这就是我有意调用 Activity 的方式

```
intent.setAction(Intent.ACTION_MAIN);
                intent.setClassName("com.example.suscribir", "com.example.suscribir.Suscribir");
                startActivity(intent); 
```

这是清单

```
<activity
    android:name="com.example.suscribir.Suscribir">
</activity> 
```

如果您需要更多信息，请告诉我再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:29:48.593

[http://androiddevelopement.blogspot.in/2011/01/creating-jar-file-in-eclipse.html](http://androiddevelopement.blogspot.in/2011/01/creating-jar-file-in-eclipse.html)。从eclipse创建jar

无法打包资源、清单条目。纯 Java 代码（可能使用 Android API）可以打包到 jar 中。

要使用它，只需将 jar 复制到项目下的 libs 文件夹即可。

右键单击项目。转到属性。Java 构建路径。单击添加罐子。从您的 libs 文件夹中添加 jar。

之后，您可以使用 import 语句并在您的新项目类中实例化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:27:50.443

我不完全确定我是否正确理解了您的问题。您有两个使用相同类的 Android 应用程序？是对的吗？在这种情况下，您需要将公共类提取到库项目中。我不认为你可以从另一个引用一个 Android 应用程序项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T14:26:36.693

最后，我找到了一种将项目用作库的方法。这个tuto是西班牙语字节很容易按照每个步骤中的图像 [http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse](http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse)

# java - 解决过程：保持类/实例分离或将它们链接起来？

> ID：15553927
> 
> 赞同：2
> 
> 时间：2013-03-21T17:13:17.833
> 
> 标签：java, oop, design-patterns

假设我有一个读取图像文件的过程，然后允许使用调整大小算法进行放大和缩小。这可以分解为如下类：

```
ImageFileReader
ImageFileFormatIdentifier
ImageFileValidator
ImageFileHeaderParser
ImageZoomer
ImageResizer 
```

结合这些类的最合适的方法是什么？

它们是否应该“松散”以便程序员可以按照他认为适合其代码的方式编写它们？

或者它们应该以这样一种方式设计，即一个对象具有对它所依赖的另一个类的引用或接口？

此外，对于分层架构，似乎对于`Service`层，第一种方法往往是特权，方法被用于组合。这是一种模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:22:11.393

我建议阅读器和验证器紧密耦合，因为当你阅读时，你想确认内容是有效的。（这在您的编辑之前应用！）

如果要任意使用缩放和调整大小，那么我建议您有一个总体控制器，并使用修改参数将图像传递给缩放/调整大小，并将结果传递回控制器。

这是 Facade 模式的使用，当多个服务（Reader/Identifier/Validator/etc）看起来是一个通过协调其他组件的行为来提供简化功能（Load/Zoom/Resize/Save/etc.）的服务时。

此外，通过将控制反转视为一种模式，您可以在更改时间插入进一步的行为。例如，您可以为图像加载器、验证器和保存器定义接口，然后您可以随时添加对其他图像类型的支持。

# database - Access 2010 - 查询显示多条记录的运行总计，删除旧记录并在每行添加新记录

> ID：15553928
> 
> 赞同：1
> 
> 时间：2013-03-21T17:13:18.580
> 
> 标签：database, ms-access, sum, cumulative-sum

我有一个 Access 数据库，它跟踪每个员工在每个支付期间使用的小时数。

我需要一个查询，让我能够及时回顾**过去 25 个支付期的总数，这是根据****每个员工**的前 26 个支付期的**每一个**计算得出的。这是一个滚动总计，本质上，必须逐行忽略 26 个（或更多）支付期的记录。我有 5 年的记录，很遗憾有必要保留所有记录，并且能够查看每个员工的 26 个支付期的运行总计是多少以及在特定的支付期限。

 **基本上，我们正在查看每个员工总共**51条记录——查询实际***显示*的第一个支付期是**26 个**支付期之前；它的运行总数基于该支付期内发生的情况加上前 25 次。

**表：**
*HoursID*、*EmployeeID*、*PayPeriodID*、*HoursUsed*
*PayPeriodID*、*PayPeriodEndDate*

**查询结果（已经工作）：**
*EmployeeID*，*TotalOfHoursUsedLast26PP*（此查询请求一个日期倒计时）

**我需要的查询结果：**
*EmployeeID*、*PayPeriodID*、*HoursUsed*、[*使用的总小时数，基于紧接在此 PP 之前的 25 个 PP* ]

我一直在搞乱 DSum，但我不知道如何让它*只*计算最后 26 个 PP，计算我需要的 PP，一次为一名员工，每个工资期分别计算。

明确一点：我需要能够在 2009 年或其他时间回顾并运行此查询以获取 26 个支付期；在 Excel 中，对于一位员工，我们做了如下所示的操作：

Line32_HoursUsedLast26PP = Line32_HoursUsedThisPP + Line31_HoursUsedLast26PP - Line4_HoursUsedThisPP

结果类似于：

2011-5 - 338.8
2011-6 - 398.5 2011-7
- 428.7
2011-8 - 442.5
2011-9 - 451 2011-10
- 451
2011-11 - 451
2011-12 - 451
2011-13 - 451
2011-1
2011-15 - 451
2011-16 - 452.4
2011-17 - 453.1 2011-18
- 454.3
2011-19 - 454.3 2011-20
- 455
2011-21 - 456.1
2011-22 - 460.2
848 2011-23 -
411
2011-25 - 480
2011-26 - 480 2012-01
- 453.2
2012-02 - 381.2
2012-03 - 301.2
2012-04 - 221.2
2012-05 - 141.2
2012-06 - 81.5
2012-07 - 51.3
2012-08 - 37.5
2012-09 - 29
2012-10 - 29
2012-11 - 29
2012-12 - 29
2012-13 - 29
2012-14 - 29
2012-15 - 29
2012-16 - 27\.
2012-17 - 26.9
2012-18 - 25.7
2012-19 - 25.7
2012-20 - 25
2012-21 - 23.9
2012-22 - 19.8
2012-23 - 0

如您所见，运行总数上升*和*下降。

这是我用于“查找过去 26 个支付周期的总小时数”查询的实际代码；关于认证等的东西，是因为在任何给定的支付期间，员工可能会在多个认证下记录小时数。

```
SELECT List_Employees.ID, Sum(Items_Hours_Actually_Taken.HoursActual) AS SumOfHoursActual
FROM (List_Pay_Periods INNER JOIN (List_Employees INNER JOIN (Items_Certifications INNER JOIN Items_Hours_Actually_Taken ON Items_Certifications.[CertificationID] = Items_Hours_Actually_Taken.[HoursActualCertificationID]) ON List_Employees.ID = Items_Certifications.[CertificationEmployeeID]) ON List_Pay_Periods.[PayPeriodID] = Items_Hours_Actually_Taken.[HoursActualPayPeriod]) INNER JOIN Last_26_PP_From_Today ON List_Pay_Periods.PayPeriodID = Last_26_PP_From_Today.PayPeriodID
GROUP BY List_Employees.ID; 
```

如果不清楚，此查询依赖于名为 Last_26_PP_From_Today 的单独查询：

```
SELECT List_Pay_Periods.PayPeriodID, List_Pay_Periods.PPEnd
FROM List_Pay_Periods
WHERE (((List_Pay_Periods.PPEnd)<Date() And (List_Pay_Periods.PPEnd)>(Date()-14))); 
```

我还有一个查询，可以切换到从任何特定日期查找最后 26 个支付期：

```
PARAMETERS [Date] DateTime;
SELECT List_Pay_Periods.PayPeriodID, List_Pay_Periods.PPEnd
FROM List_Pay_Periods
WHERE (((List_Pay_Periods.PPEnd)<[Date] And (List_Pay_Periods.PPEnd)>([Date]-14))); 
```

我在绝望中想到的蛮力方法涉及一系列级联的 Make Table 查询，那时我决定也许这里有人可以提供更清洁的东西。

**更新**

多亏了 Gord，我现在一切正常，除了我没有看到支付周期数字：

```
SELECT hbep1.Employee, hbep1.PP

(

SELECT Sum(hbep2.Hours) 
        FROM Hours_By_Employee_Per_PP AS hbep2
        WHERE hbep2.Employee=hbep1.Employee 
            AND (hbep2.PP Between hbep1.[PP]-25 And hbep1.[PP])

    ) AS SumLast26

FROM Hours_By_Employee_Per_PP AS hbep1; 
```

这让我：

```
Employee    SumLast26
2           12
2           12
2           12
2           18
2           91
3           4
3           8
3           88
3           168
3           180
5           15
5           15
5           15
7           43
7           61
7           75
7           97
7           106
7           121
9           19
9           0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:26:31.993

我希望这会为您指明正确的方向：

我从一个名为 [Hours_by_Empl_PP] 的表开始，其中包含每个员工在每个 Pay_Period 中的总小时数。

```
EmployeeID  PayPeriodID HoursUsed
1           1           3
1           2           7
1           3           4
1           4           4
1           5           5
1           6           8
1           7           5
2           1           1
2           2           2
2           3           1
2           4           0
2           5           0
2           6           1
2           7           2 
```

如果您的表数据对于给定的（Employee + Pay_Period）有多个记录，您可以创建一个简单的聚合查询来汇总这些值......

```
SELECT EmployeeID, PayPeriodID, SUM(HoursUsedToday) AS HoursUsed
FROM YourRawData
GROUP BY EmployeeID, PayPeriodID 
```

...将*其*保存为 [Hours_by_Empl_PP]，并使用它代替表格。

下一步是创建一个查询来总结 4 个周期窗口内的小时数。（我选择 4 而不是 26 只是为了更容易检查我的工作。）这个窗口包括当前的 Pay_Period 和前三个。

```
SELECT hbep1.EmployeeID, hbep1.PayPeriodID, 
    (
        SELECT Sum(hbep2.HoursUsed) 
        FROM Hours_by_Empl_PP hbep2
        WHERE hbep2.EmployeeID=hbep1.EmployeeID 
            AND (hbep2.PayPeriodID Between hbep1.[PayPeriodID]-3 And hbep1.[PayPeriodID])
    ) AS Sum_of_Hours_last_4_PPs
FROM Hours_by_Empl_PP hbep1; 
```

这个查询给了我

```
EmployeeID  PayPeriodID Sum_of_Hours_last_4_PPs
1           1           3
1           2           10
1           3           14
1           4           18
1           5           20
1           6           21
1           7           22
2           1           1
2           2           3
2           3           4
2           4           4
2           5           3
2           6           2
2           7           3 
```

请注意，该查询假定 PayPeriodID 值是按时间顺序排列的。您可以使用 [PayPeriodEndDate] 值获得相同的结果，但这意味着另一个 JOIN 并且我希望使示例尽可能清晰。

就是这样，真的。您可以使用 [Hours_by_Empl_4PP_window] 之类的名称保存该查询，并在查询中使用它来加入其他表（对于员工姓名等）并从那里获取。**

# java - 如何使用 FileOutputStream 的 ArrayList？

> ID：15553931
> 
> 赞同：0
> 
> 时间：2013-03-21T17:13:26.817
> 
> 标签：java, android, file, outputstream

我想使用 ArrayList FileOutputStream 在 android 平板电脑的内部存储中同时写入多个文件。

```
for(int i = 0; i< fileName.size(); i++){    
    filef.get(i).renameTo(getFilesDir());
        //= File(getFilesDir(), (fileName.get(i).toString()));
    try {
        if (filef.get(i).exists()) {    
            Log.d(TAG, "les fichiers sont deja cree");
        } else {    
            FileOutputStream fos = openFileOutput(fileName.get(i),
            Context.MODE_WORLD_WRITEABLE);  
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    File file = getFilesDir();
    Log.d("TAG", file.getAbsolutePath());
    appPath = file.getAbsolutePath();
    // internal.setFile();
    setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);
} 
```

对于我使用的一个文件

```
FileOutputStream fos = openFileOutput(fileName,
            Context.MODE_WORLD_WRITEABLE); 
```

我没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:33:24.287

如果我理解正确，你需要`fos.set(i, openFileOutput(fileName.get(i), Context.MODE_WORLD_WRITEABLE));`

# windows - 如何在每个字符 X 实例的文本文件中创建一个新行 - Windows 7？

> ID：15553939
> 
> 赞同：1
> 
> 时间：2013-03-21T17:13:46.377
> 
> 标签：windows, powershell, vbscript, batch-file

我有一个用字符填充的文本文件：

```
ABCABCABCABC 
```

...并且使用脚本（Batch、VBS、Powershell，对 Windows 来说真的很简单）我试图为某个字符的每个实例自动添加一个新行，在本例中为字母 A，因此输出将显示为这样的：

```
ABC
ABC
ABC
ABC 
```

使用我上面提到的任何脚本工具如何实现这一点？

非常感谢，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:17:46.520

电源外壳：

```
(get-content c:\somedir\inputfile.txt) -replace 'A',"`nA" | set-content c:\somedir\outputfile.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T17:24:19.303

如果你可以使用 SED `GOOGLE GNUSED`

```
sed s/A/\nA/g <yourfile >resultfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T18:48:12.320

Notepad++

This is just a find and replace if you have `notepad++` installed on your computer
([http://notepad-plus-plus.org/download/v6.3.1.html](http://notepad-plus-plus.org/download/v6.3.1.html))

Open your text file, press `Ctrl H` to get Find & Replace

Select Search Mode as `Extended` or `Regular expression`

Find `A`

Replace `\nA`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:48:37.907

Windows 批处理：

```
@echo off
setlocal enabledelayedexpansion

echo contents of oldfile.txt:
type oldfile.txt
echo;

del newfile.txt
for /f "usebackq delims=" %%I in ("oldfile.txt") do (
    set "str=%%I" && set "str=!str:A=,A!"
    for %%x in (!str!) do (>>"newfile.txt" echo %%x)
)

echo contents of newfile.txt:
type newfile.txt 
```

示例输出：

```
C:\Users\me\Desktop>test.bat
contents of oldfile.txt:
ABCABCABCABCABC

contents of newfile.txt:
ABC
ABC
ABC
ABC
ABC 
```

[这是有关批量拆分字符串](https://stackoverflow.com/a/15535761/1683264)的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T18:29:31.943

脚本：

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var read = fso.OpenTextFile("oldfile.txt", 1, 2);
var write = fso.CreateTextFile("newfile.txt", true);
var str = read.ReadAll();
write.Write(str.replace(/A/g,'\nA').replace(/^\n/m,''));
read.Close(); write.Close(); 
```

如果它作为文本的第一个字符出现，则第二个`.replace`删除第一个新行。`.js`使用扩展名保存此脚本并使用`cscript filename.js`.

# asp.net - 在 VB.Net 中对用户进行单独身份验证后进行身份验证

> ID：15553941
> 
> 赞同：0
> 
> 时间：2013-03-21T17:13:49.960
> 
> 标签：asp.net, vb.net, security

情况有点复杂，我尽量解释清楚。

我是一个与另一个程序集成的程序的一部分，我们正在将我们所有的网络应用程序转移到他们的服务器上。因此，我们将在他们的网站上有一个部分，可以通过他们的门户和身份验证（智能卡）访问。

他们决定处理身份验证的方式是，他们将要求在身份验证后访问我们所有的 URL，但是一旦用户验证，他们会将验证交给我们的页面，我们只需从 Web 服务调用用户信息。

我想知道的是：

即使我们不处理原始登录，我们是否应该根据从 Web 服务获得的信息使用完整的身份验证系统，还是在会话或 cookie 中注册用户就足够了？

我不知道他们正在设置的 Web 服务将如何工作，但我正在尝试在尝试集成之前尽可能多地准备网站。

如果不清楚，我深表歉意，这是一个复杂的场景，我无法控制。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:26:31.470

在我看来，使用 cookie 进行身份验证就足够了。双重“完全成熟”的身份验证似乎有问题且矫枉过正。但是，如果您使用 cookie，您或许应该考虑对它们进行加密。有关更多信息，请参阅[此 stackoverflow 帖子](https://stackoverflow.com/questions/4360839/encrypt-cookies-in-asp-net)。

# php - Uncaught SyntaxError: Unexpected identifier - JS 错误，当 php 在函数参数中放一个单引号或撇号时

> ID：15553942
> 
> 赞同：0
> 
> 时间：2013-03-21T17:13:55.387
> 
> 标签：php, javascript, jquery, ajax

好吧，我正在使用 AJAX 从 WebService 生成潜在客户匹配列表。除了我的 pHp 中的这一部分之外，一切都在工作......

```
$html = "<h3> Search Results: ";

        if(!is_array($searchResults))
        {
            $html .= $searchResults . "</h3>";
        }
        else{
            $html .= "</h3><ul>";
            foreach($searchResults as $result)
            {
                $html .= '<li> <a href="#" onclick="selectCustomer('. "'" . htmlentities((string)$result->entityId, ENT_QUOTES) . "'" . ')">' . $result->entityId . "</a></li>";
            }
            $html .= "</ul>";
        }

        echo $html; 
```

这是我的选择 JavaScript selectCustomer 函数：

```
 <script>
function selectCustomer(selectedCustomer){
            $.ajax({
                type: 'GET',
                url: "<?php echo JURI::base() . "index.php?option=com_sample&view=place_order&task=getCustomer&customerName=";?>" + encodeURIComponent(selectedCustomer),
                beforeSend:function(){
                    $('#CustomerInfo').html('<div class="loading"><img src="<?php echo JURI::base() . "components/com_joomsuite/assets/images/ajax-loader.gif"?>" alt="Loading..." /></div>');
                },
                success:function(data){
                    $('#CustomerInfo').html(data);
                    $('#customerEmail').val($('#customerEmailAJAX').html());
                    $('#customerName').val($('#customerNameAJAX').html());
                },
                error:function(){
                    $('#ajax-panel').html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>');
                }
            });
        }
</script> 
```

您可能已经注意到在我使用 Joomla 的 JS 中出现了一点 pHp :P... 这个函数在其他 2 种情况下成功使用。仅当从通过 AJAX 显示的 onclick 调用它时才会失败。

Chrome 不断抛出“Uncaught SyntaxError: Unexpected identifier”，但没有第 # 行。我假设它与 onclick 调用有关。

我进入了 chrome 的检查元素，发现了这个：

```
<a href="#" onclick="selectCustomer('13064 Moto's Burger Palace')">13064 Moto's Burger Palace</a> 
```

所以这是明显的问题吗？它与您小时候的“您将撇号放在我的单引号中”的说法相同。但是 htmlentities() 函数不应该阻止这种情况……不，因为撇号是由 chrome（浏览器）呈现的。

所以我的问题是（最后）我可以在我的 php 函数中改变什么，这将允许 onclick 运行我的 selectCustomer 函数并正确传递一个可能包含或不包含撇号的字符串......

我宁愿改变这条线（但愿意接受其他可能性）：

```
$html .= '<li> <a href="#" onclick="selectCustomer('. "'" . htmlentities((string)$result->entityId, ENT_QUOTES) . "'" . ')">' . $result->entityId . "</a></li>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:50:31.473

@PRPGFerret 做到了。我在搜索时也发现了另一种可能性：

**解决方案1：**

```
$html .= '<li> <a href="#" onclick="selectCustomer('. "'" . addslashes($result->entityId) . "'" . ')">' . $result->entityId . "</a></li>"; 
```

**解决方案2：**

```
$html .= '<li> <a href="#" onclick="selectCustomer(this.id)" id="' . $result->entityId . '">' . $result->entityId . "</a></li>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:19:31.993

您可以通过不使用 onclick 属性来简化它。

```
<a href="#" data-customer="<?php echo htmlspecialchars($result->entityId); ?>">13064 Moto's Burger Palace</a> 
```

这样你只需要为 html 转义，而不是为 HTML*和*Javascript 转义，这太疯狂了。

然后只需像这样简单的静态代码：

```
$(document).on("click", "[data-customer]", function(){
    selectCustomer($(this).attr("data-customer"));
}); 
```

# drupal - Drupal Commerce 优惠券仅适用于选定产品

> ID：15553944
> 
> 赞同：1
> 
> 时间：2013-03-21T17:13:59.950
> 
> 标签：drupal, drupal-commerce

我正在使用商业优惠券百分比测试模块。

我的客户只需要为选定的产品类型提供优惠券。

说衣服，配饰，而不是鞋子

我该如何实施？我可以写一条规则吗？怎么写？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:04:26.373

You'll need to create a rule that reacts on the validate a coupon event. Since a coupon is applied to an order rather than an individual line item (when you add a product to the cart it isn't really a product anymore rather it is a line item) on an order, what you'll need to do is loop through each line item on the order and load the product via the product reference field on the line item. After loading the product you can check the product type and then set the coupon as invalid as needed.

Hope that helps :)

# scala - 检查是否都是数字时，带有空字符串的Scala变量返回true

> ID：15553945
> 
> 赞同：-1
> 
> 时间：2013-03-21T17:14:02.437
> 
> 标签：scala

当我有一个字符串变量`x`时，由于某种原因是`""`：

`val x = ""`

我做到了： `x.forall(_.isDigit)`它返回`true`

我有点纳闷，为什么是真的，不应该是假的吗？当我的 if 条件不起作用时，我很难发现这一点。然后我去看了Scala源码：

```
private def prefixLengthImpl(p: A => Boolean, expectTrue: Boolean): Int = {
    var i = 0
    while (i < length && p(apply(i)) == expectTrue) i += 1
    i
  }

  override /*IterableLike*/
  def forall(p: A => Boolean): Boolean = prefixLengthImpl(p, expectTrue = true) == length 
```

所以显然它持有“虚无真相”原则，并且由于计数器变量`i`返回为`0`并且我的字符串的长度也是`0`，它最终是`0==0`因此`true`。我发现`x.isEmpty`在做`forall`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:21:47.437

I don't see the problem. The scala `forall` method follows the [basic first-order logic](http://en.wikipedia.org/wiki/Universal_quantification#The_empty_set), which minimizes surprise. For your specific example you should probably be using the regex `"".matches("\\d+")` anyway.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:37:47.013

[http://en.wikipedia.org/wiki/Vacuous_truth](http://en.wikipedia.org/wiki/Vacuous_truth)

事实上，“”中的每个字符都是一个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T17:32:18.967

你可以`forall`结合`exists`：

```
str.exists(_.isDigit) && str.forall(_.isDigit)
// returns true for "123", false for "", false for "1nodigits" 
```

# android - 无法从 ListView 获取实际的 Checked Items

> ID：15553953
> 
> 赞同：0
> 
> 时间：2013-03-21T17:14:30.573
> 
> 标签：android, android-listview

我在获取列表视图中的已检查项目时遇到问题。问题是，无论我何时调用 getCheckedItemsCount() 或 getCheckedItemPositions()，它总是返回 1。无论检查了 0 个或 2 个或更多项目。

这是我的 MainActivity，它实现了 MultiChoiceModeListener，用于在检查项目时进行监听。我这样做是因为我在 ListAdapter 上动态检查项目。

```
public class MainActivity extends ListActivity implements MultiChoiceModeListener
{
    @Override
    protected void onCreate (Bundle bundle)
    {
        super.onCreate (bundle);
        // Set our view from the "main" layout resource
        setContentView (R.layout.main);

        this.getListView().setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE_MODAL);
        this.getListView().setMultiChoiceModeListener(this);

        _dataAdapter = new ServerListAdapter (this);
        this.getListView(). setAdapter(_dataAdapter);
        registerForContextMenu (this.getListView());
    }

    // This is called when i set the item as checked using setItemChecked on my ListAdapter.
    public void onItemCheckedStateChanged(ActionMode mode, int position, long id, boolean isChecked) {

        SparseBooleanArray checke = getListView().getCheckedItemPositions();
        // This always returns 1\. No matter If I have 0 or 2 items checked.
        int checkedCount = checkedItemPositions.size();

        // I Have also tried with getCheckedItemsCount() and it returns 1 too.

        if (checkedCount > 0)
        {
            // DO SOMETHING...
        }
        else
        {
                // DO SOME OTHER STUFF...
        }
    } 
```

这是我的 ListAdapter 的代码。这里只有相关代码：

```
public class ServerListAdapter extends BaseAdapter {
    @Override
    public View getView (final int position, final View convertView, final ViewGroup parent)
    {
        final ListView listView = (ListView)parent;
        boolean isChecked = listView.isItemChecked(position);

        ((CheckBox)view.findViewById(R.id.chkItemServerSelected)).setOnCheckedChangeListener(new OnCheckedChangeListener() 
        {   

            @Override
            public void onCheckedChanged(CompoundButton pCompound, boolean arg1) 
            {

                boolean isChecked = listView.isItemChecked(position);
                // Here i set the item as checked, o unchecked. This works ok.
                listView.setItemChecked(position, !isChecked);
            }

        });

        //Finally return the view
        return view;
    }
} 
```

**编辑：**

环顾四周后，我发现问题在于我做错了。

在我的列表适配器上，在 onCheckedChanged 上，我必须使用复选框中的值，而不是使用从列表视图中获取的当前值（因为这是我想要实现的）。

以前的代码：

```
listView.setItemChecked(position, !isChecked); 
```

新代码：

```
listView.setItemChecked(position, pCompound.isChecked()); 
```

问题是这带来了一个新问题。当检查值 IsChecked 为**TRUE**时，会引发事件 onItemCheckedStateChanged，但当值为**FALSE**时，它不会......任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:10:27.147

我相信您在基本适配器中缺少一些覆盖。我认为你需要实现这样的东西：（除了getView）

```
 @Override
    public int getCount() {
            return myarray.size();
    }

    @Override
    public Object getItem(int position) {
            return myarray.get(position);
    }

    @Override
    public long getItemId(int position) {
            return myarray.get(position).getId();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:55:39.343

问题是 ListView 实例变得一团糟，所以我没有使用项目列表视图的选中值，而是使用了 CheckBox 控件的 ckeched 值。

此更改是在复选框的 onCheckedChanged 方法上的 ListAdapter 上进行的：

以前的代码：

```
listView.setItemChecked(position, !isChecked); 
```

新代码：

```
listView.setItemChecked(position, pCompound.isChecked()); 
```

# android - 使用 AudioTrack 的 Android 均衡器应用程序？

> ID：15553955
> 
> 赞同：4
> 
> 时间：2013-03-21T17:14:34.883
> 
> 标签：android, filtering, signal-processing, audiotrack

我想使用 Android 创建一个均衡器。该应用程序应从 SD 卡加载 .mp3；应用一些音频过滤并实时（尽可能接近）播放过滤后的音频，并保存过滤后的音频。

使用 IIR 低通、带通和高通滤波器过滤音频。我已经在 matlab 中计算了滤波器系数，并将它们存储在 java 中的矩阵中。该应用程序将有 3 个滑块，它们可以改变三个滤波器中每一个的增益（增益值将乘以“b”系数）。

我正在考虑尝试这种方法，但不完全确定这是否是可行的方法：

1.  使用 JLayer 加载和解码/转换 .mp3 文件到 PCM（用于示例数据）。
2.  在缓冲区中获取 PCM 样本并使用 Matlabs 的“过滤器”功能（Java 等效项）进行过滤。
3.  使用 AudioTrack 播放过滤后的音频。

这是正确的方法吗？

# c# - 尝试从代码创建 iis 应用程序时访问被拒绝

> ID：15553962
> 
> 赞同：0
> 
> 时间：2013-03-21T17:14:51.657
> 
> 标签：c#, asp.net, iis, asp-classic

我正在尝试从 IIS 网站内的目录创建应用程序。基本上我要做的是在代码中重现这个流程：右键单击 IIS 网站内的文件夹，然后单击转换为应用程序。

这是我的代码：

```
 DirectoryEntry appsRoot = new DirectoryEntry("IIS://localhost/w3svc/3/Root");

        //Create and setup new virtual directory
        DirectoryEntry virtualDirectory = appsRoot.Children.Add(tool.Id.ToString(), "IIsWebVirtualDir");

        virtualDirectory.Properties["Path"][0] = Path.Combine(AppConfig.ToolsFilePath, tool.Id.ToString());
        virtualDirectory.Properties["AppFriendlyName"][0] = tool.Name;
        virtualDirectory.CommitChanges();

        // IIS6 - it will create a virtual directory
        // IIS7 - it will create an application
        virtualDirectory.Invoke("AppCreate", 1); 
```

我得到的错误是访问被拒绝。

```
Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:18:27.163

您可以将应用程序设置为以更高权限的用户身份运行，也可以将所有必要的权限授予应用程序当前运行的任何用户。我建议后者。如果您不知道该怎么做，请告诉我，我可以添加详细信息。

# c++ - QTimeEdit 设置最大值大于 23:59:59

> ID：15553966
> 
> 赞同：0
> 
> 时间：2013-03-21T17:15:10.637
> 
> 标签：c++, qt, qt4

有什么办法可以增加`maxValue`例如`QTimeEdit`26:00:00 的时间吗？

我想在我的应用程序中使用它一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:22:40.140

根据文档：

*   设置此属性时，会根据需要调整 minimumTime 以确保范围保持有效。如果时间不是一个有效的 QTime 对象，这个函数什么也不做。（[http://qt-project.org/doc/qt-4.8/qdatetimeedit.html#maximumTime-prop](http://qt-project.org/doc/qt-4.8/qdatetimeedit.html#maximumTime-prop)）
*   如果 h 在 0 到 23 范围内，m 和 s 在 0 到 59 范围内，ms 在 0 到 999 范围内，则时间有效。（[http://qt-project.org/doc/qt- 4.8/qtime.html#isV​​alid-2](http://qt-project.org/doc/qt-4.8/qtime.html#isValid-2) )

所以这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:27:39.103

从[这个线程](http://qt-project.org/forums/viewthread/20118)来看，这似乎`QTimeEdit`不适合这个目的。因为你给出的原因。

这是针对该特定问题的一种解决方案。 [http://gitorious.org/qtimespandevel](http://gitorious.org/qtimespandevel)

# xml - 当类具有不同的名称时，如何使用 RestSharp 执行内部 XML 节点？

> ID：15553972
> 
> 赞同：6
> 
> 时间：2013-03-21T17:15:31.157
> 
> 标签：xml, restsharp

我正在使用 restsharp 并遇到了问题。由于我使用的是返回 xml 数据的 google api，因此我遇到了名称冲突。

例如，从 google 联系人 api 返回所有“组”和“所有联系人”都具有“提要”的根节点，但其中的数据不同。

所以我做了这个

```
[XmlRoot(ElementName = "feed")]
public class GroupFeed
{
    public string Id { get; set; }
    public DateTime Updated { get; set; }
    public string Title { get; set; }
    public int TotalResults { get; set; }
    public int StartIndex { get; set; }
    public int ItemsPerPage { get; set; }
    [XmlElement(ElementName="Entry")]
    public List<GroupEntry> Entries { get; set; }
} 
```

通过使用 XmlRoot 属性，它在我使用 restsharp 时起作用，但它从不填充条目，即使它们是数据。

```
[XmlRoot(ElementName = "entry")]
public class GroupEntry
{
    public string Id { get; set; }
    public DateTime Updated { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }

} 
```

如果我将 GroupEntry 重命名为 Entry，则它会被填充。似乎它没有使用我的 XMLRoot 属性作为名称。

如您所见，我也尝试过使用 XmlElement ，但这也无济于事。

```
 client.ExecuteAsync<GroupFeed>(request, response =>
            {
                var test = response.Data;
                var d = "";
            }); 
```

这是原始 XML，不确定这是否有帮助。

```
 <?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/" xmlns:gContact="http://schemas.google.com/contact/2008" xmlns:batch="http://schemas.google.com/gdata/batch" xmlns:gd="http://schemas.google.com/g/2005">
   <id>junk@gmail.com</id>
   <updated>2013-04-01T18:32:26.482Z</updated>
   <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#group" />
   <title type="text">xiao bao's Contact Groups</title>
   <link rel="alternate" type="text/html" href="http://www.google.com/" />
   <link rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full" />
   <link rel="http://schemas.google.com/g/2005#post" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full" />
   <link rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full/batch" />
   <link rel="self" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full?max-results=25" />
   <author>
      <name>xiao bao</name>
      <email>junk@gmail.com</email>
   </author>
   <generator version="1.0" uri="http://www.google.com/m8/feeds">Contacts</generator>
   <openSearch:totalResults>2</openSearch:totalResults>
   <openSearch:startIndex>1</openSearch:startIndex>
   <openSearch:itemsPerPage>25</openSearch:itemsPerPage>
   <entry>
      <id>http://www.google.com/m8/feeds/groups/junk%40gmail.com/base/5a185f89922304</id>
      <updated>2013-04-01T18:31:35.784Z</updated>
      <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#group" />
      <title type="text">My Second Group</title>
      <content type="text">My Second Group</content>
      <link rel="self" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full/5a185f89922304" />
      <link rel="edit" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full/5a185f89922304/1364841095784001" />
   </entry>
   <entry>
      <id>http://www.google.com/m8/feeds/groups/junk%40gmail.com/base/37f569c88989718f</id>
      <updated>2013-03-01T18:54:05.085Z</updated>
      <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#group" />
      <title type="text">My Test Group</title>
      <content type="text">My Test Group</content>
      <link rel="self" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full/37f569c88989718f" />
      <link rel="edit" type="application/atom+xml" href="https://www.google.com/m8/feeds/groups/junk%40gmail.com/full/37f569c88989718f/1362164045085001" />
   </entry>
</feed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:14:42.127

使用 XmlArrayItem 代替 XmlElement 来指定数组中的元素。

```
//[XmlArray("Entries")] // if you need to change property name
[XmlArrayItem("Entry")]
public List<GroupEntry> Entries { get; set; } 
```

# php - 从适用于 PHP 的 AWS 开发工具包中提取受保护的请求响应

> ID：15553974
> 
> 赞同：7
> 
> 时间：2013-03-21T17:15:34.197
> 
> 标签：php, amazon-web-services, amazon-s3, amazon

我正在使用新的 Amazon ElasticTranscoder 服务，并且不熟悉使用 AWS-SDK。我创建了一个运行`createJob`请求的成功脚本，将 Amazon S3 文件从一种格式转码为另一种格式。

问题是，我似乎无法访问`$data`发出请求时返回的响应。我可以看到它，它包含我需要的信息，但是当我尝试存储它时收到此错误：

`Fatal error: Cannot access protected property Guzzle\Service\Resource\Model::$data`

这是我的请求的样子：

```
<?php
// Include the SDK
require 'aws.phar';
use Aws\ElasticTranscoder\ElasticTranscoderClient;

// Setup the trancoding service tool(s)
$client = ElasticTranscoderClient::factory( array(
    'key' => 'XXXXXXXXX',
    'secret' => 'XXXXXXXXX',
    'region' => 'us-east-1'
) );

// Create a new transcoding job
$file_name = '1362761118382-lqg0CvC1Z1.mov';
$file_name_explode = explode( '.', $file_name );

$webm_transcode_request = $client->createJob( array(
    'PipelineId' => '1362759955061-7ad779',
    'Input' => array(
        'Key' => $file_name,
        'FrameRate' => 'auto',
        'Resolution' => 'auto',
        'AspectRatio' => 'auto',
        'Interlaced' => 'auto',
        'Container' => 'auto',
    ),
    'Output' => array(
        'Key' => $file_name_explode[0] . '.webm',
        'ThumbnailPattern' => $file_name_explode[0] . '-thumb-{resolution}-{count}',
        'Rotate' => '0',
        'PresetId' => '1363008701532-b7d529' // BenchFly MP4
    )
) );

// Print the response data
echo '<pre>';
var_dump( $webm_transcode_request->data );
echo '</pre>';
?> 
```

我一直在努力寻找一些关于使用 PHP 和 AWS SDK 处理响应请求的文档，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-23T20:13:45.020

你有两个选择：

1.  使用[文档](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Guzzle.Service.Resource.Model.html)[`toArray()`](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Guzzle.Common.Collection.html#_toArray)中“继承自的方法`Guzzle\Common\Collection`”下列出的方法。

    例如

    ```
    $webm_transcode_request->toArray(); 
    ```

2.  只需直接访问`$data`属性的索引，就好像它们是响应对象的索引一样。这是有效的，因为`Guzzle\Service\Resource\Model`该类实现了 PHP 的魔术[`ArrayAccess`](http://php.net/manual/en/class.arrayaccess.php)接口以使类似数组的访问对`$data`属性进行操作。

    例如

    ```
    $response = $ec2Client->describeInstances();

    // Gets the value of the 'Reservations' key of the protected `$data` property
    // of `$response`
    var_dump($response['Reservations']); 
    ```

# java - Java中的Json预处理

> ID：15553977
> 
> 赞同：2
> 
> 时间：2013-03-21T17:15:39.160
> 
> 标签：java, json

我有带有不同字段名称的 json，其中包含我感兴趣的值。它们来自不同的来源。我想把我感兴趣的领域变成一个通用名称。例如：

这是原始的json：

```
{"movieName":"A","Leadactor":"","leadActress":"","movieTitle":"","hero":"","heroine":"","source":"IMDB"}
{"movieName":"","Leadactor":"","leadActress":"","movieTitle":"B","hero":"B1","heroine":"B2","source":"Netflix"}
{"movieName":"C","Leadactor":"C1","leadActress":"C2","movieTitle":"","hero":"","heroine":"","source":"IMDB"}
{"movieName":"D","Leadactor":"D1","leadActress":"D2","movieTitle":"","hero":"","heroine":"","source":"IMDB"}
{"movieName":"","Leadactor":"","leadActress":"","movieTitle":"E","hero":"E1","heroine":"E2","source":"Netflix"} 
```

对于源 imdb，我感兴趣的领域与源 netflix 感兴趣的领域不同。我的最终目标是在前端的表格中显示它们。所以试图让我感兴趣的领域进入共同领域。

我想把它转换成：

```
{Name:"A",Actor"A1",Actress"A2","source":"IMDB"}
{Name:"B",Actor"B1",Actress"B2","source":"Netflix"}
{Name:"C",Actor"C1",Actress"C2","source":"IMDB"}
{Name:"D",Actor"D1",Actress"D2","source":"IMDB"}
{Name:"E",Actor"E1",Actress"E2","source":"Netflix"} 
```

我正在考虑的解决方案是使用正则表达式删除所有具有空值的字段，然后将电影名称和电影标题替换为名称。其他领域也类似。

有没有更好的方法来处理这个问题。（我得到的json非常大。所以寻找超快速的方法来预处理它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:27:05.447

您可以通过创建自己的 JSON“加法器”轻松做到这一点？`json.org`有一个很好的**JSON**库，你的代码看起来像这样。

```
 public static void addJSON(JSONObject one, JSONObject two){
    while(one.keys().hasNext()){
        String key = (String) one.keys().next();
        try{
            if(one.getString(key).equals("")){
                one.put(key, two.get(key));
            }
        }catch(JSONException e){

        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:27:07.680

我的建议是在 JSON 字符串之上使用 gson 和隐蔽到这样的 Map：

```
Type type = new TypeToken<Map<String, String>>(){}.getType();
Map<String, String> map =
                 gson.fromJson("{'key1':'foo','key2':'bar', 'key3', ''}", type); 
```

一旦你得到你的地图，然后 simlpy 迭代并删除所有具有空值的元素。之后，您可以从此地图生成您的 JSON 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T17:28:54.883

使用 JSON 流解析器，如[json-simple](https://code.google.com/p/json-simple/)或[Jackson](http://wiki.fasterxml.com/JacksonHome)。

它们非常快，内存高效，为您节省了大量的编码难题，并且易于在像您这样的简单结构上实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T17:35:29.523

JSON 具有上下文无关语法。并且 REGEX 不能可靠地解析这样的语法。

例如，这个 JSON 不可能用 regex 可靠地解析：

```
{movie : "Apocalypse Now", director : {first_name: "Francis", last_name: "Ford Coppola"}} 
```

因为它有嵌套的花括号，正则表达式将匹配最后一个括号旁边的整个表达式。换句话说，当存在嵌套表达式（JSON、XML、javascript 等）时，使用专门的解析器，因为正则表达式无法处理它。

# ruby - 使用 .next 递增字母

> ID：15553978
> 
> 赞同：13
> 
> 时间：2013-03-21T17:15:41.017
> 
> 标签：ruby, ruby-on-rails-3, gmaps4rails

```
def home
  letter = 'A'
  @markers = Location.all.to_gmaps4rails do |loc, marker|
    marker.infowindow render_to_string(partial: '/locations/info', 
                                       locals: {object: loc})
    marker.picture({picture: "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=#{letter.next!}|9966FF|000000",
                    width: 32,
                    height: 32,
                    shadow_picture: "http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
                    shadow_width: 110,
                    shadow_height: 110,
                    shadow_anchor: [17,36]})
    marker.title "Title - #{loc.name}"
    marker.sidebar render_to_string(partial: '/locations/sidebar', 
                                    locals: {object: loc})
    marker.json({id: loc.id})
  end
end 
```

酷的东西。所以这行得通。它循环遍历`do loop`并增加字母。问题是，它从 B 开始。我尝试`letter`在图片中使用，然后在最后使用`letter.next!`，甚至`letter = letter.next`，但是 gmaps 向我抛出错误。

有没有办法将除“A”之外的东西分配给`letter`?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-21T17:26:36.120

那这个呢？

```
letters = ('A'..'Z').to_a
letters.shift #=> 'A'
letters.shift #=> 'B' 
```

这行得通，但我会第二次@patrick-oscity：这是难以揭示其意图的晦涩代码。

```
letter = '@'
letter.next! #=> "A" 
```

检查`'@ABCD'.codepoints.to_a`它为什么起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T18:00:33.420

从技术上讲，`'@'`是 的前身`'A'`，因为 的 ASCII 值为`'@'`64，而 的值为`'A'`65。观察：

```
'A'.codepoints.first
#=> 65

'A'.codepoints.first - 1
#=> 64

('A'.codepoints.first - 1).chr
#=> "@"

('A'.codepoints.first - 1).chr.next
#=> "A" 
```

从这个意义上说：

```
'@'.next == 'A'
#=> true 
```

但我强烈反对使用黑魔法™。在实际代码中使用类似@nicooga 的方法。

# java - GWT：TextField 的拖放事件？

> ID：15553983
> 
> 赞同：0
> 
> 时间：2013-03-21T17:15:51.950
> 
> 标签：java, gwt, drag-and-drop, textfield

我想知道如何监听`TextField`. 我需要拦截这些事件以进行价值检查。

我写了一个扩展`TextBox`，它触发了`TextChangeEvents`。但是当我将文本放入文本字​​段时，我没有收到对该`onBrowserEvent(Event event)`方法的调用。

有什么提示吗？

```
public class ExtendedTextBox extends TextBox {

    /**
     * Creates an empty extended text box.
     */
    public ExtendedTextBox() {
        super();

        // Catch the browser events.
        sinkEvents(Event.ONKEYUP);
        sinkEvents(Event.ONPASTE);

    }

    @Override
    public void onBrowserEvent(Event event) {
        super.onBrowserEvent(event);
        System.out.println(event.getTypeInt());

        switch (event.getTypeInt()) {
            case Event.ONKEYUP:
            case Event.ONPASTE: {
            // Fire the event after the text box shows the new data.
            Scheduler.get().scheduleDeferred(new ScheduledCommand() {

                @Override
                public void execute() {
                    fireEvent(new TextChangeEvent(ExtendedTextBox.this.getText()));
                }
            });
            break;
        }
        default:
        }
    }

    /**
     * Add a given {@link TextChangeEventHandler} to the widget.
     * 
     * @param handler
     *            the handler
     * @return {@link HandlerRegistration} used to remove the handler
     */
    public HandlerRegistration addTextChangeEventHandler(TextChangeEventHandler handler) {
        return addHandler(handler, TextChangeEvent.TYPE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:01:30.097

一个 TextBox 应该触发一个`ChangeEvent`（或`ValueChangeEvent`- 目前不知道）。所以你可以很容易地在你的构造函数中做这样的事情：

```
this.addChangeHandler(new ChangeHandler ... 
```

如果这还不够，您还可以收听该`Focus`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:03:13.787

谢谢你的帮助。我今天自己弄清楚了，它很简单。我没有注意到，已经有`DropHandler`.

例如，您可以在构造函数中执行此操作：

```
addDropHandler(new DropHandler() {

    @Override
    public void onDrop(DropEvent event) {
        if(!event.getDataTransfer().getData("text/plain").isEmpty()) {
            Scheduler.get().scheduleDeferred(new ScheduledCommand() {

                @Override
                public void execute() {
                    fireEvent(new TextChangeEvent(ExtendedTextBox.this.getText()));
                }
            });
        }

    }
}); 
```

为了防止`TextField`刚刚添加的默认行为`event.preventDefault();`。现在您可以通过调用获取输入`event.getDataTransfer().getData("text/plain")`并进行输入验证等。

作为副作用，`onBrowserEvent(Event event)`现在通过将某些内容放入文本字​​段来调用该方法。但是 int 类型是`-1`，所以在这个地方它并没有真正的帮助。

# google-chrome - 如何使用 Capybara/Selenium 在 Chrome 上下载多个文件？

> ID：15553985
> 
> 赞同：6
> 
> 时间：2013-03-21T17:16:07.780
> 
> 标签：google-chrome, capybara, selenium-webdriver

我正在将[Capybara](https://github.com/jnicklas/capybara)与 Chrome 和 Selenium 一起使用。当我尝试单击导致自动下载的链接时，文件已正确下载。如果我再次尝试执行此操作，Chrome 会显示消息：“此站点正在尝试下载多个文件。您要允许吗？”

![在此处输入图像描述](../Images/44716643c7a83ba132accda74cdcfa50.png)

我正在寻找可以用来禁用此消息的[标志](http://peter.sh/experiments/chromium-command-line-switches/)，但找不到任何东西。有什么办法可以绕过此消息并允许多次下载而无需刷新页面？（例如，有什么方法可以通过编程方式单击“允许”按钮吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T15:40:38.747

请在此处查看我的解决方法：

[https://code.google.com/p/chromedriver/issues/detail?id=130#c12](https://code.google.com/p/chromedriver/issues/detail?id=130#c12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T10:20:23.037

使用 Chrome 选项

```
WebDriver driver = null;
ChromeOptions options = new ChromeOptions();
        Map<String, Object> prefs = new HashMap<String, Object>();
        prefs.put("profile.default_content_settings.popups", 0);
        prefs.put("profile.content_settings.pattern_pairs.*.multiple-automatic-downloads", 1 );
        //Turns off download prompt
        prefs.put("download.prompt_for_download", false);
        options.setExperimentalOption("prefs", prefs);

    driver = new ChromeDriver(options); 
```

# plot - 如何在gnuplot中仅绘制箭头

> ID：15553988
> 
> 赞同：9
> 
> 时间：2013-03-21T17:16:14.963
> 
> 标签：plot, gnuplot

在 gnuplot 中，我们将箭头绘制为：

```
set arrow from 0,0 to 1,1 
```

我想用箭头制作一个图，没有其他数据。我怎样才能做到这一点。现在，在设置箭头之后，我需要给出一些东西来绘制，因为没有那个箭头就不会被绘制。是否可以在没有任何数据的情况下仅绘制一个空的“绘图”？

我还看到[了有关 gnu 等的在线帮助](http://security.riit.tsinghua.edu.cn/~bhyang/ref/gnuplot/label2-e.html#4.5)，但无法得到解决的答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T17:35:12.100

如果您设置明确的轴范围，您可以绘制`NaN`以获得一组干净的轴。

此外，`notitle`或`t ''`需要隐藏`NaN`.

```
set xrange [0:5]
set yrange [0:5]
set arrow from 0,0 to 1,1
plot NaN t '' 
```

[![绘图输出](../Images/7f825c03bca3e139a5a933d4cad101b9.png)](https://i.stack.imgur.com/l5JDu.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-31T14:11:21.630

要仅绘制以常用轴为单位的坐标的箭头，可以使用`vectors`绘图样式。

```
# gnuplot 5
$data <<EOD
0 0 1 1
EOD
plot $data u 1:2:3:4 w vectors 
```

或者

```
# gnuplot 4.x
plot '-' u 1:2:3:4 w vectors
0 0 1 1
e 
```

# core-data - 核心数据批量故障是否保留顺序？

> ID：15553993
> 
> 赞同：0
> 
> 时间：2013-03-21T17:16:24.473
> 
> 标签：core-data

我有一些对象需要以我无法用排序描述符表达的方式进行排序（它涉及树中的位置）。目前我正在将它们排序为后台线程，收集它们的 objectID，然后将它们返回到主上下文，如下所示：

```
for (NSManagedObjectID *objectID in objectIDs)
{
    NSManagedObject *managedObject = [mainContext existingObjectWithID:objectID error:outError];
    if (!managedObject) return nil;
    [array addObject:managedObject];
} 
```

这涉及到很多数据库点击，所以我更愿意一次性完成。[核心数据编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW3)建议使用这样的谓词这样做：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:[MyEntity entityName]];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"SELF IN %@", objectIDs];
NSArray *array = [mainContext executeFetchRequest:fetchRequest error:&error]; 
```

但是，我担心我会丢失排序，因为在其他地方他们使用 a`@"SELF IN %@"`并提供排序描述符。核心数据批量故障是否保留顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:06:30.723

带有谓词的获取请求

```
[NSPredicate predicateWithFormat:@"SELF IN %@", objectIDs] 
```

不会*按照*对象 ID 存储在数组中的顺序返回对象。我做了一个小测试：

```
NSLog(@"%@", objectIDs);
// "0x102005370 <x-coredata://FA77144F-F37B-455C-AC6F-18563A34C4A7/Question/p5>",
// "0x102003700 <x-coredata://FA77144F-F37B-455C-AC6F-18563A34C4A7/Question/p4>",
// "0x1020036f0 <x-coredata://FA77144F-F37B-455C-AC6F-18563A34C4A7/Question/p1>"

NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Question"];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"SELF IN %@", objectIDs];
NSArray *array = [context executeFetchRequest:fetchRequest error:&error];
NSLog(@"%@", array);
// "<Question: 0x10201ae10> (entity: Question; id: 0x1020036f0 <x-coredata://FA77144F-F37B-455C-AC6F-18563A34C4A7/Question/p1> ; data: <fault>)",
// "<Question: 0x10201afe0> (entity: Question; id: 0x102003700 <x-coredata://FA77144F-F37B-455C-AC6F-18563A34C4A7/Question/p4> ; data: <fault>)",
// "<Question: 0x10201b060> (entity: Question; id: 0x102005370 <x-coredata://FA77144F-F37B-455C-AC6F-18563A34C4A7/Question/p5> ; data: <fault>)" 
```

通过设置启动参数“-com.apple.CoreData.SQLDebug 3”，可以看到获取请求被翻译成SQLite查询

```
SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZTEXT, t0.ZTITLE FROM ZQUESTION t0 WHERE  t0.Z_PK IN  (5,4,1) 
```

它将测试应用于`t0.Z_PK IN (5,4,1)`表中的所有行。所以获取请求的数组中对象的顺序对返回对象的顺序没有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:30:24.417

如果你想成为超级骗子，我会创建一个“索引”属性，并在将实体加载到该数组时将其添加到实体中。这样，您可以简单地将排序描述符设置为“索引”并保证它会起作用。

# asp.net-ajax - 模态弹出扩展器和更新面板

> ID：15553996
> 
> 赞同：0
> 
> 时间：2013-03-21T17:16:55.663
> 
> 标签：asp.net-ajax, updatepanel, ajaxcontroltoolkit, modalpopupextender

ModalPopUpExtender 引用了“hiddenTargetControlForModalPopup”——这是 UI 上的一个隐藏按钮，除了下面显示的代码外，它似乎没有在任何地方使用。

模态弹窗的目标是PANEL pnlNew，那为什么TagetControlID分配给ID="hiddenTargetControlForModalPopup"呢？只是想了解这种接线...谢谢！

CancelControlID="btHiddenOK" 不在模态弹出控件上的任何地方使用（在模态弹出控件上有一个单独的取消按钮（请参阅评论下方的更新面板中的保存和取消按钮..LOT OF CODE。 ....所以我试图删除属性 CancelControlID="btHiddenOK" - 这导致模式弹出被禁用？我想知道如果 btHiddenOK 甚至没有在模式弹出上使用 - 删除它不应该有任何效果，但似乎并非如此？

```
 <asp:Button runat="server" ID="hiddenTargetControlForModalPopup" style="display:none"/>

     <asp:Panel ID="pnlNew" 
                   runat="server"               
                   DefaultButton="hiddenTargetControlForModalPopup"
                   style="width: 575px;">                  
               <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->    
               <div class="shadowAreaBig" >  
                      <asp:UpdatePanel runat="server" ID="ModalPopupControls" UpdateMode="Conditional"> 
                            <ContentTemplate>                                   
                             <div class="shadowContainer  shadowContainerNew" >

                                <!--    LOT OF CODE       --> 

   <div class="buttonsNew">
                            <span class="buttonSave">
                                <asp:ImageButton AlternateText="Create new user" ID="ImageButton1" runat="server" ImageUrl="~/css/images/buttonSave2.png" OnClick="btOK_Click" OnClientClick="javascript:return validateControls();" TabIndex="110" style='display: none;' /> 
                                <img style="border-width:0px;cursor: default;" alt="Create new user" src="../css/images/buttonSave2_disabled.png" tabindex="110" id="ImageButton1_Disabled" >
                            </span>
                            <span class="buttonCancel"/>
                                <asp:ImageButton AlternateText="Cancel" ID="ImageButton2" runat="server" CausesValidation="False" ImageUrl="~/css/images/buttonCancel.png" OnClientClick="cancel();return false;" TabIndex="111"/>     
                            </span>
                           </div>    

                              </div>
                            </ContentTemplate>
                        </asp:UpdatePanel>                   
               </div> 
                             <!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->      
            <p class="clearFloat"></p>       
        </asp:Panel>
        </div>   

        <cc1:ModalPopupExtender          
            ID="CreateMPExtender" 
            runat="server"         
            TargetControlID="hiddenTargetControlForModalPopup"
            PopupControlID="pnlNew"
            BackgroundCssClass="modalBackground"
            DropShadow="false" 
            BehaviorID="ModalPopupBehavior"       
            OkControlID="btHiddenOK"
            OnOkScript="ok()"
            OnCancelScript="hideModalPopup()"      
            RepositionMode="RepositionOnWindowResizeAndScroll"
            PopupDragHandleControlID="pnlNewSRO"
            CancelControlID="btHiddenOK"       
            />  

          <asp:Button ID="btHiddenOK" runat="server" Style="visibility:none" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:53:50.283

据我了解和使用，模态对话框：

PopupControlID 告诉模态对话框在用户单击分配给它的按钮时显示哪个面板（或对话框）。因此，需要

TargetControlID 告诉模态对话框哪个按钮分配其“打开”事件。换句话说，当单击此按钮时，显示对话框。尽管这是必需的，但不需要使其可见。您可以隐藏此按钮并在 javascript 或后面的服务器代码中打开对话框

BackgroundCssClass 只是一个 CSS 类，它定义了背景的外观。这是可选的

BehaviorID 不是必需的（我发现通常会导致奇怪的行为）。这描述了对话框打开时要触发的 javascript。

OkControlId 是可选的。它是模态对话框将用于其 OK 按钮事件的按钮

这两个脚本都是可选的，只是用来告诉 contorl 调用什么 javascript 函数。

PopupDragHandleControlID 是可选的。您可以告诉“拖动”事件使用哪个面板。

正如我上面提到的，CancelControlID 和 OkControlID 是可选的。如果您看到这会禁用模态扩展器或导致其他问题，请尝试同时删除 BehaviorID。如果这没有帮助，请告诉我。

# oracle - Oracle - 隐式与显式语句缓存

> ID：15553997
> 
> 赞同：2
> 
> 时间：2013-03-21T17:16:59.047
> 
> 标签：oracle, prepared-statement

任何人都可以清楚地解释 Oracle 中隐式和显式语句缓存之间的区别（[如此处所述](http://docs.oracle.com/cd/B19306_01/java.102/b14355/stmtcach.htm#i1069942)）。

我基本上想重现 DBCP 连接池提供的功能，这样一条语句只发送到数据库进行准备一次（或每个连接一次）！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:39:30.910

从您提供的链接：

> 当您启用隐式语句缓存时，JDBC 会在您调用此语句对象的 close 方法时自动缓存准备好的或可调用的语句。

和

> 显式语句缓存使您能够缓存和检索选定的准备好的和可调用的语句。显式语句缓存依赖于一个键，即您提供的任意 Java 字符串。因为显式语句缓存保留语句数据和状态以及元数据，所以它比隐式语句缓存具有性能优势，隐式语句缓存只保留元数据。但是，在使用这种类型的缓存时必须小心，因为显式语句缓存会保存所有三种类型的信息以供重用，并且您可能不知道从先前使用语句中保留了哪些数据和状态。

看起来隐式缓存总是在关闭时保存准备好的和可调用的语句，而显式缓存只保存您指定的语句。看起来显式缓存可能会稍微快一些，但会带来返回陈旧数据的风险。

# css - 后代选择器

> ID：15553998
> 
> 赞同：0
> 
> 时间：2013-03-21T17:16:59.200
> 
> 标签：css

下面我对 css 的想法是：将所有 img 元素与包含值“left”和 p 元素后代的类属性匹配。那是对的吗？

```
p img.left  { float: left; margin: 0.9em 0.9em 0.9em 0; padding: 0; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:19:34.450

是的，这完全正确；您的选择器将[匹配*两个* `img`元素](http://jsfiddle.net/davidThomas/F3AEJ/3/)：

```
<p>
    <img class="left" src="http://lorempixel.com/200/200/nightlife" />
    <span><img class="left" src="http://lorempixel.com/300/300/nature" /></span>
</p> 
```

如果您只想选择标签的第一级`img.left`后代，您可以：`p`

```
p > img.left {
    /* CSS */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/F3AEJ/)。

这将*不*匹配`img`包含的`span`.

同样，您只能匹配`img`:`span`

```
p span img,
p span > img,
span img,
span > img {
    /* CSS */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/F3AEJ/1/)。

参考：

*   [CSS 选择器，来自 W3C](http://www.w3.org/TR/selectors/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:19:55.963

你是对的。

```
p img.left  {} 
```

**HTML：**

```
<p>
   <img class="left" /> * MATCHES THIS *
   <img /> * NOT THIS *
</p>
<div>
   <img class="left" /> * NOT THIS *
   <img /> * NOT THIS *
</div>

<p>
    <img class="left" /> * MATCHES THIS *
    <img /> * NOT THIS *
    <span>
        <img class="left" /> * ALSO MATCHES THIS *
        <img /> * NOT THIS *
    </span>
</p> 
```

有了`p > img.left {}`它就不会匹配`img`里面的`div`东西里面的东西`p`