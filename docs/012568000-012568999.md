# StackOverflow 问答 12568000-12568999

# c++ - 无法处理信号，导致系统调用中断

> ID：12568000
> 
> 赞同：0
> 
> 时间：2012-09-24T15:19:35.277
> 
> 标签：c++, multithreading, signals

我在尝试处理信号时遇到问题...

我有一个多线程应用程序，它接收一个中断我正在使用的库中的系统调用的信号。经过一番研究，我发现如果一个信号没有被处理，它会被发送到应用程序中的一个随机线程。我已经从我正在使用的库中确认他们没有在他们的应用程序中使用任何信号。我也不是。这是我的主要驱动程序类：

```
void sig_handler(int signum)
{
    cout << "Signal Handle: " << signum << endl;
    signal(signum, SIG_IGN);
}

class Driver
{
    public:
        Driver();
        void LaunchLog();
        void logonListen();
};

Driver::Driver()
{
    pthread_t logThread;
    pthread_create(&logThread, NULL, LaunchLogThread, (void*) this);
    pthread_detach(logThread);

    pthread_t listenThread;
    pthread_create(&listenThread, NULL, LaunchListenThread, (void*)this);
    pthread_detach(listenThread);

    bool running = true;

    while(running)
    {
        //Simple loop to resemble a menu for the console
    }
}

void Driver::logonListen()
{
    char buffer[256];

    int logonPort = BASEPORT;
    int sockfd;
    struct sockaddr_in serv_addr, cli_addr;
    socklen_t clilen;

    //initialize socket
    sockfd = socket(AF_INET, SOCK_DGRAM, 0);
    if(sockfd < 0){
        perror("Error opening socket");
        exit(1);
    }
    bzero((char*)&serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    serv_addr.sin_port = htons(logonPort);

    //bind socket to our address
    if(bind(sockfd,(struct sockaddr*) &serv_addr, sizeof(serv_addr)) < 0)
    {
        perror("Error on bind");
        exit(1);
    }

    clilen = sizeof(struct sockaddr_in);

    int n;
    int nextUser = 2;
    char reply[32];

    while(1)
    {
        //Wait for incoming connection on a socket
    }
}

void Driver::LaunchLog()
{
    Logger::Instance()->WriteToFile();
}

void* LaunchListenThread(void* ptr)
{
    Driver* driver = (Driver*) ptr;
    driver->logonListen();
}

int main()
{
    signal (SIGHUP, sig_handler);
    signal (SIGINT, sig_handler);
    signal (SIGQUIT, sig_handler);
    signal (SIGILL, sig_handler);
    signal (SIGTRAP, sig_handler);
    signal (SIGFPE, sig_handler);
    signal (SIGKILL, sig_handler);
    signal (SIGUSR1, sig_handler);
    signal (SIGSEGV, sig_handler);
    signal (SIGUSR2, sig_handler);
    signal (SIGPIPE, sig_handler);
    signal (SIGALRM, sig_handler);
    signal (SIGTERM, sig_handler);
    signal (SIGCHLD, sig_handler);
    signal (SIGCONT, sig_handler);
    signal (SIGSTOP, sig_handler);
    signal (SIGTSTP, sig_handler);
    signal (SIGTTIN, sig_handler);
    signal (SIGTTOU, sig_handler);
    signal (SIGABRT, sig_handler);
    Driver driver;
    return 0;
} 
```

我无法处理这些信号。中断的系统调用不断增加，我的信号处理程序永远不会被使用。即使我在控制台中按 CTRL+C，程序也会以中断而不是处理 SIGINT 结束。我是否错误地安装了处理程序？

有没有办法处理所有信号并在它们出现时忽略它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:31:53.260

几件事。首先，您应该检查`signal()`. 如果安装信号处理程序时出现问题，它可以返回 SIG_ERR（至少在某些情况下可能存在问题，因为其中一些信号是不可捕获的）。其次，在信号处理程序中使用`stdio`/`iostream`函数可能是有问题的，因为它们是异步的（相对于程序中可能使用相同设施的其他东西）性质。第三，在您的信号处理程序中，即使第一次调用它，您也会将该信号设置为被忽略，因此该信号的任何后续实例（假设它是可捕获的）都将被忽略。如果您想一开始就忽略它们，则无需编写处理程序，只需`signal(SIG<whatever>, SIG_IGN)`在`main()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:01:03.460

您想使用带有 SA_RESTART 标志的 sigaction(2) 来忽略信号并确保系统调用重新启动而不是中断：

```
struct sigaction sa;
sa.sa_hanlder = SIG_IGN;
sa.sa_flags = SA_RESTART;

sigaction(SIGALRM, &sa);
sigaction(SIGPIPE, &sa);
/* repeat for all the signals you want to ignore */ 
```

请注意，您可能不想忽略诸如 SIGINT 之类的内容，因为您将无法停止使用 ctrl-C 进行编程。同样，忽略 SIGSEGV 可能会导致您的程序在包含错误时挂起，而不是退出。

**编辑**

您关于您和图书馆都没有使用任何信号的描述并不完全正确 - 信号来自某个地方，并且可能只是您没有意识到您正在做的事情是在幕后使用信号. 如果您在任何地方使用任何警报或计时器，这些都涉及信号。如果您的 sig_handler 确实没有被调用，则意味着其他人（您的库？）正在安装信号处理程序来替换它。

如果您仍然无法确定信号来自何处，您可以在调试器下运行，并启用调试器的信号调试功能（如果需要）。这至少应该告诉您哪些信号正在发生，以及它们在哪里发生。

一般来说，对于任何系统调用，您应该始终检查错误，如果您意外看到错误 EINTR，您可能应该循环并重做系统调用。

# lua - 在 Corona Lua 中评估数学字符串

> ID：12568002
> 
> 赞同：1
> 
> 时间：2012-09-24T15:19:38.630
> 
> 标签：lua, coronasdk

我想在我的电晕应用程序中评估一个数学字符串。现在我专注于三角函数，所以让我们让这个例子成为我们可能面临的最困难的例子：

`local expr = "2sin(4pi+2)+7"`

我的目标是以某种方式（或者）用一个`pi --> math.pi`开关来评估它，或者甚至将它分解。然而，分手会更加困难，因为它可能像上面一样复杂，但也可能只是`sin(1)`。

所以我宁愿尽可能地接近python`eval(expr)`函数，但如果这不能发生，我很灵活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:44:20.947

最简单的方法是替换`sin`为`math.sin`( `pi`with`math.pi`等)，添加缺少的乘号，然后运行它`loadstring`，但`loadstring`在 Corona 环境中不可用。

这意味着您需要为这些表达式编写自己的解析器。我在 Corona 论坛上找到了一个可以帮助您作为起点的讨论：[这里](http://developer.coronalabs.com/forum/2011/09/14/evaluate-string)，有一些细节和演示[这里](http://howto.oz-apps.com/2011/09/wip-eval-routine-for-coronasdk.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T21:30:57.367

这应该可以解决问题，它能够使用 lua 数学函数而无需放置“math.function”，因此 sqrt(100) 可以正常工作。我把它放在一起是因为我已经看到这个问题被问了太多次了。希望这会有所帮助:)

如果您有任何问题，请随时通过 rayaman99@gmail.com 与我联系

```
function evaluate(cmd,v) -- this uses recursion to solve math equations
    --[[ We break it into pieces and solve tiny pieces at a time then put them back together
        Example of whats going on
        Lets say we have "5+5+5+5+5"
        First we get this:
        5+5+5+5 +   5
        5+5+5   +   5
        5+5 +   5
        5   +   5
        Take all the single 5's and do their opperation which is addition in this case and get 25 as our answer
        if you want to visually see this with a custom expression, uncomment the code below that says '--print(l,o,r)'
    ]]
    v=v or 0
    local count=0
    local function helper(o,v,r)-- a local helper function to speed things up and keep the code smaller
        if type(v)=="string" then
            if v:find("%D") then
                v=tonumber(math[v]) or tonumber(_G[v]) -- This section allows global variables and variables from math to be used feel free to add your own enviroments
            end
        end
        if type(r)=="string" then
            if r:find("%D") then
                r=tonumber(math[r]) or tonumber(_G[r]) -- A mirror from above but this affects the other side of the equation
                -- Think about it as '5+a' and 'a+5' This mirror allows me to tackle both sides of the expression
            end
        end
        local r=tonumber(r) or 0
        if o=="+" then -- where we handle different math opperators
            return r+v
        elseif o=="-" then
            return r-v
        elseif o=="/" then
            return r/v
        elseif o=="*" then
            return r*v
        elseif o=="^" then
            return r^v
        end
    end
    for i,v in pairs(math) do
        cmd=cmd:gsub(i.."(%b())",function(a)
            a=a:sub(2,-2)
            if a:sub(1,1)=="-" then
                a="0"..a
            end
            return v(evaluate(a))
        end)
    end
    cmd=cmd:gsub("%b()",function(a)
        return evaluate(a:sub(2,-2))
    end)
    for l,o,r in cmd:gmatch("(.*)([%+%^%-%*/])(.*)") do -- iteration this breaks the expression into managable parts, when adding pieces into
        --print(":",l,o,r) -- uncomment this to see how it does its thing
        count=count+1 -- keep track for certain conditions
        if l:find("[%+%^%-%*/]") then -- if I find that  the lefthand side of the expression contains lets keep breaking it apart
            v=helper(o,r,evaluate(l,v))-- evaluate again and do the helper function
        else
            if count==1 then
                v=helper(o,r,l) -- Case where an expression contains one mathematical opperator
            end
        end
    end
    if count==0 then return (tonumber(cmd) or tonumber(math[cmd]) or tonumber(_G[cmd])) end
    -- you can add your own enviroments as well... I use math and _G
    return v
end
a=5
print(evaluate("2+2+2*2")) -- This still has work when it comes to pemdas; however, the use parentheses can order things!
print(evaluate("2+2+(2*2)"))-- <-- As seen here
print(evaluate("sqrt(100)"))
print(evaluate("sqrt(100)+abs(-100)"))
print(evaluate("sqrt(100+44)"))
print(evaluate("sqrt(100+44)/2"))
print(evaluate("5^2"))
print(evaluate("a")) -- that we stored above
print(evaluate("pi")) -- math.pi
print(evaluate("pi*2")) -- math.pi 
```

# c# - 代码首先检测数据库中的变化

> ID：12568004
> 
> 赞同：0
> 
> 时间：2012-09-24T15:20:14.917
> 
> 标签：c#, entity-framework, ef-code-first

我想知道如果我想要一个在使用 EF Code First 时监听数据库中所做更改的事件，最好的方法是什么？

就像我有一个方法`Update()`，如果对数据库进行更改，比如向其中添加用户，就会引发该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:29:33.683

```
public MyContext() {
((IObjectContextAdapter)this).ObjectContext.SavingChanges += SavingChangesHandler;
}

private void SavingChangesHandler(object sender, EventArgs e) {

foreach (DbEntityEntry entry in ChangeTracker.Entries().Where(entry => entry.State == EntityState.Added || entry.State == EntityState.Modified || entry.State == EntityState.Deleted)) {
_log.DebugFormat("{0} Entity: {1}", entry.State.ToString(), entry.Entity.ToString().Contains("DynamicProxies") ? entry.Entity.GetType().BaseType.Name : entry.Entity.ToString());
if (entry.State != EntityState.Deleted) {
        var changedProperties = entry.CurrentValues.PropertyNames.Where(p => entry.Property(p).IsModified);
    changedProperties.ToList().ForEach(p => _log.DebugFormat("{0} changed from {1} to {2}", p, entry.Property(p).OriginalValue, entry.Property(p).CurrentValue));
    //TODO: handle complex properties
                }
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:13:58.440

您对此有何看法 [http://dotnet.dzone.com/articles/c-sqldependency-monitoring](http://dotnet.dzone.com/articles/c-sqldependency-monitoring)

# php - Yii-bootstrap 选项卡事件处理程序

> ID：12568006
> 
> 赞同：4
> 
> 时间：2012-09-24T15:20:18.193
> 
> 标签：php, javascript, jquery, twitter-bootstrap, yii

我正在使用[bootstap tabs](http://www.cniska.net/yii-bootstrap/#tbTabs)，我试图通过 ajax 加载内容，而不是在 PHP 中设置它。我的代码：

```
<script type="text/javascript">
   function test(e){
       console.log(e.target);
       //load ajax stuff here
   }
</script>

<?php
$this->widget('bootstrap.widgets.TbTabs', array(
    'type'=>'tabs',
    'placement'=>'above', // 'above', 'right', 'below' or 'left'
    'tabs'=>array(
        array('label'=>'Ogólne', 'content'=>'Czekaj...', 'active'=>true),
        array('label'=>'Książka adresów', 'content'=>'Czekaj...'),
        array('label'=>'Cośtam', 'content'=>'Czekaj...'),
    ),
    'events'=>array('shown'=>'test')
)); ?> 
```

但是我不断收到此错误： `Uncaught TypeError: Object test has no method 'apply'`. 我尝试创建一个对象，但它仍然不起作用。有任何想法吗？

稍微澄清一下，框架创建的JS代码：

```
<script type="text/javascript">
/*<![CDATA[*/
jQuery(function($) {
jQuery('a[rel="tooltip"]').tooltip();
jQuery('a[rel="popover"]').popover();
jQuery('#yw0').tab('show');
jQuery('#yw0').on('shown', 'test');
jQuery('#collapse_0').collapse({'parent':false,'toggle':false});
});
/*]]>*/
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T07:05:12.547

这应该工作

Javascript：

```
<script type="text/javascript">
    var test = function(e) {
        console.log(e.target);
        //load ajax stuff here
    }
</script> 
```

TbTabs 事件（以 'js:' 为前缀）

```
<?php
...
'events'=>array('shown'=>'js:test'),
....
?> 
```

# java - 所有非垃圾收集对象最终都是静态引用的吗？

> ID：12568009
> 
> 赞同：2
> 
> 时间：2012-09-24T15:20:30.597
> 
> 标签：java, reflection, static, garbage-collection, instance

我正在使用一些相当重的反射来检查和遍历类库。我想提取和修改字段 - 静态和实例。静态字段易于查找和修改；我可以收集课程，询问他们的字段列表，记录字段并检查/更改它们的值。

实例字段不同。我可以收集对其 Field 对象的引用，但为了更改它们的值，我需要运行实例化该类型对象的代码。假设我们不知道这段代码做了什么，但是我们有一些方法 blackBox() 实例化一些对象，运行一些代码，使用我们感兴趣的库做一些事情。在它运行之后，我想找到一个实例班级，C.

如果我收集所有静态字段的列表，并通过它们的引用进行足够远的迭代，我最终会在代码中找到所有活动的实例吗？也就是说，我提议：

> 对于在 Java 程序中实例化的所有未进行垃圾回收的对象，存在一个以静态字段开始并以该对象结束的引用链。

这是关于 Java 程序的一般规则吗？

编辑：两个额外的限定词：

1.  我只对不产生线程的顺序程序感兴趣。
2.  我假设 blackBox() 已完成处理，并且垃圾收集器已运行。稍后我们可能希望使用库 (moreBlackBox()) 执行更多代码 - 想象一个应用程序已启动，现在已暂停。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:27:55.747

不。要么你有一个从静态字段开始的引用链，要么（而且可能更常见）你有一个从线程堆栈上的局部变量开始的引用链：

```
public static void main(String[] args) {
    Foo foo = new Foo();
    doSomethingWithFoo(foo);
} 
```

在上面， foo 实际上可能会递归地引用一大堆其他对象，并且它们都不能被 GC 收集，因为主线程`foo`的堆栈中仍然有局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:34:29.193

这可能是一个很好的起点：

> 并发收集器在并发收集周期中暂停应用程序两次。第一个暂停是标记从根（例如，线程堆栈上的对象、静态对象等）和堆中的其他地方（例如，年轻代）直接可访问的对象为活动的。这个第一次暂停被称为初始标记。第二次暂停出现在标记阶段的末尾，并查找在并发标记阶段由于应用程序线程的并发执行而丢失的对象。第二次停顿称为备注。

如需更深入的阅读，请考虑：

[Oracle 垃圾收集器文档](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)

# sql-server - 如何遍历一小组记录并检索与每条记录中设置的条件匹配的记录

> ID：12568015
> 
> 赞同：0
> 
> 时间：2012-09-24T15:20:57.240
> 
> 标签：sql-server, sql-server-2008

我有一个`tblCriteria`包含一小部分（<20）记录的表。每条记录都有一个标准字段。

我希望 SQL 在请求时遍历这些记录`tblFilterRun`，过滤主表`tblRecords`（约 5000 条记录），然后将匹配记录中的一些关键字段插入到另一个表中`tblFilterResults`。

```
tblCriteria (CriteriaID, CriteriaText)
tblFilterRun (FilterRunID, FilterRunDate)
tblFilterResults (FilterResultsID, FilterRunID, RecordID, Ref, CustomerID, SupplierID
tblRecords (RecordID, CustomerID, SupplierID...) 
```

以前我会在 Access 中创建一些东西来遍历每个 tblCriteria 记录，但我想要一个纯粹的服务器解决方案。我听说过提到光标（通常与亵渎同时），我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:10:55.853

不清楚您需要对 tblCriteria 中的记录做什么，但您能否创建一个 UDF 来处理一条记录？然后您可以使用一个查询在每条记录上调用它，例如

```
SELECT *
FROM tblCriteria
CROSS APPLY dbo.udf_yourFunction(parameter1, parameter2, etc) 
```

# mysql - 包含保留字的连接列

> ID：12568016
> 
> 赞同：1
> 
> 时间：2012-09-24T15:20:58.553
> 
> 标签：mysql, concatenation, concat, reserved-words

```
select concat(Sno,Table) as STB from levels 
```

如果按原样运行，上面的查询会出错。假设我在级别上有价值

```
Sno   Table
1     Sale
2     Stock 
```

我需要将它们作为

```
STB
---
1Sale
2Stock 
```

解决方案是什么，`other than changing the column name`因为在单词周围加上引号`'Table'`会产生错误的输出，因为它只是一个字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:22:34.810

对保留字使用反引号。

```
select concat(Sno, `Table`) as STB from levels 
```

虽然一般来说，如果您以后可以避免在数据库、表或列名中使用保留字，那将是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:22:38.303

```
select concat(Sno,`Table`) as STB 
from levels 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:23:59.607

尝试使用 ` 而不是 ' 像这样：

```
SELECT CONCAT(Sno,`Table`) AS STB FROM levels 
```

# c++ - 避免由 C++ 包含头文件引起的循环引用

> ID：12568017
> 
> 赞同：0
> 
> 时间：2012-09-24T15:21:05.180
> 
> 标签：c++, include, cyclic-reference

我有 3 个类：A、B 和 C。C`#include`由 B 编辑，B`#includ`由 A 编辑。在 C 类中，我为按钮定义了一个处理程序，当按下按钮时，C 将`PostMessage`指向对象 A。如果我在C中包含A，我会有一个循环引用，那么我应该怎么做才能避免这个循环引用？

编辑：所有包含都在实现文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:23:46.167

您应该使用前向声明。由于`C`不是 的所有者`A`，我假设您有一个指针作为成员。所以你不需要包括：

```
class A; //forward declaration
class C
{
    A* a;
}; 
```

在实现文件中，您将包括`A.h`但没关系。此外，如果可以，请尽可能使用前向`A.h`声明`B.h`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:28:14.780

如果类 X 仅通过指针使用类 Y，则应在声明类 X 之前使用类 Y 的前向声明。

将前向声明保存在单独的文件中是个好主意。[iosfwd 是这种方法的标准示例](http://msdn.microsoft.com/en-us/library/1af12yty%28v=vs.80%29.aspx)

如果 X 类以其他方式使用 Y 类，例如有一个 Y 类型的成员，那么您需要对 Y 类进行完整定义，而前向声明将不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:38:24.857

如果您指的是同一个头文件的循环引用，通常的约定是将头包装在一个定义中，这样定义只包含一次，就像这个 MyHeader.h 文件：

```
#ifndef MyHeader_h
#define MyHeader_h

// my definitions here

#endif  // MyHeader_h 
```

`#pragma once`该指令也得到广泛支持。

# url - Yii 使用 Yii-bootstrap 将新路由附加到 url 中的现有路由，但使用 CMenu 可以正常工作

> ID：12568018
> 
> 赞同：0
> 
> 时间：2012-09-24T15:21:07.347
> 
> 标签：url, yii, url-routing

实际上在使用 TbMenu 小部件时 url 路由存在一些问题，我在访问模块控制器时使用 /moduleId/ControllerId/ActionId 的格式，这是一个示例

```
<?php  $this->widget('bootstrap.widgets.TbNavbar', array(
'type'=>'inverse', // null or 'inverse'
'brand'=>'mysite',
'brandUrl'=>'#',
'collapse'=>true, // requires bootstrap-responsive.css
'items'=>array(
    array(
        'class'=>'bootstrap.widgets.TbMenu',
        'items'=>array(
            array('label'=>'Home','url'=>array('/site/index'), 'active'=>true),
            array('label'=>'About', 'url'=>array('/site/page')),
            array('label'=>'Contact us','url'=>array('/site/contact')),
        ),
    ),
    '<form class="navbar-search pull-left" action=""><input type="text" class="search-query span2" placeholder="Search"></form>',
    array(
        'class'=>'bootstrap.widgets.TbMenu',
        'htmlOptions'=>array('class'=>'pull-right'),
        'items'=>array(
            array('label'=>'Sign in', 'url'=>'/user/auth','visible'=>Yii::app()->user->isGuest),
            '---',
           [b] array('label'=>'Profile', 'url'=>'/user/user','visible'=>!Yii::app()->user->isGuest, 'items'=>array([/b]
                [b]array('label'=>'Settings', 'url'=>'user/user/index'),[/b]
                [b]array('label'=>'Logout', 'url'=>'user/user/logout')[/b],

            )),
        ),
    ),
), 
```

最后三行是导致问题的原因，当我在点击主页、页面、联系我们（使用由 Yii 自动生成的站点控制器操作）后尝试访问这些链接时，路由被附加到现有的url 而不是为模块创建一个新的 url，例如，如果我在主页上（点击主页后它有这个作为 url **localhost/mysite/index.php/site/index）**它给了我这个 url localhost/mysite /index.php/site/index/user/user/index，如果我再次使用这个作为 url 的相同链接，它会给我 **localhost/mysite/index/user/user/index/user/user/index**如果我再次单击它会一次又一次地添加另一个..但最奇怪的是它与CMenu一起工作正常，这是CMenu的片段，工作正常，

```
<?php $this->widget('zii.widgets.CMenu',array(
                    'items'=>array(
                            array('label'=>'Home', 'url'=>array('/site/index')),
                            array('label'=>'About', 'url'=>array('/site/page', 'view'=>'about')),
                            array('label'=>'Contact', 'url'=>array('/site/contact')),
                            array('label'=>'Login', 'url'=>array('//user/auth'), 'visible'=>Yii::app()->user->isGuest),
                            array('label'=>'Logout ('.Yii::app()->user->name.')', 'url'=>array('//user/user/logout'), 'visible'=>!Yii::app()->user->isGuest),
                            array('label'=>'My profile ', 'url'=>array('/user/user/'), 'visible'=>!Yii::app()->user->isGuest),
                    ),
            )); ?> 
```

我假设这可能是由于这些链接是子菜单这一事实引起的，但我不确定，因为这些链接中的第一个不是子菜单并且有同样的问题！再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:48:10.700

TbMenu 组件使用 CHtml::link 来显示链接...

```
CHtml::link(label, url, options) 
```

CHtml::link 方法有一个检查

```
if url is an array ... then use controller->createUrl(...) method
if url is a string ... then just return that string. 
```

所以，我认为，@dInGd0nG 的建议会奏效。如果不是，那么你应该使用数组......类似的东西（不要忘记前缀 / ）

```
array('label'=>'Settings', 'url'=> array('/user/user/index') ),
array('label'=>'Logout', 'url'=> array('/user/user/logout') ) 
```

# php - json_encode 为非 null 值返回 null

> ID：12568019
> 
> 赞同：2
> 
> 时间：2012-09-24T15:21:17.147
> 
> 标签：php, json

这段代码有什么问题？

```
$a = Array (
    "password" => "SeRjQRVUglkeM‰‰P9L7NsjKXOY", //it's encrypted with a custom encryption system
    "id" => 0
);
echo json_encode($a); 
```

我得到了什么：

```
{"password":null,"id":0} 
```

我想要的输出是什么：

```
{"password":"SeRjQRVUglkeM‰‰P9L7NsjKXOY","id":0} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T15:23:44.023

`json_encode`需要有效的 UTF-8，并且不会对无效 UTF-8 的值进行编码。如果您的“自定义加密值”包含二进制数据，我认为，通过 JSON 传输是不安全的。您应该[`base64_encode`](http://php.net/base64_encode)使用该值，因此它仅使用可传输的 ASCII 字符。

# asp.net-mvc - 显示时将部分字符串转换为 URL

> ID：12568028
> 
> 赞同：2
> 
> 时间：2012-09-24T15:21:58.020
> 
> 标签：asp.net-mvc, razor

我四处寻找解决方案，我确信这是一个简单的问题，但仍然不确定如何做到这一点。所以，我有一个包含很多单词的字符串，有时它里面有链接。例如：

> 我喜欢这个网站[http://somesitehere.com/somepage.html](http://somesitehere.com/somepage.html)，我建议你也试试。

我想在我的视图中显示字符串并将所有链接自动转换为 URL。

```
@Model.MyText 
```

甚至 StackOverflow 也能得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:24:02.393

一种方法是对一段文本进行正则表达式匹配，然后用锚标记替换该 url 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:32:06.160

@Hunter 是对的。此外，我在 C# 中找到了完整的实现：[http ://weblogs.asp.net/farazshahkhan/archive/2008/08/09/regex-to-find-url-within-text-and-make-them-as-link .aspx](http://weblogs.asp.net/farazshahkhan/archive/2008/08/09/regex-to-find-url-within-text-and-make-them-as-link.aspx)。

**万一原始链接失效**

***VB.Net 实现***

```
Protected Function MakeLink(ByVal txt As String) As String
    Dim regx As New Regex("http://([\w+?\.\w+])+([a-zA-Z0-9\~\!\@\#\$\%\^\&amp;\*\(\)_\-\=\+\\\/\?\.\:\;\'\,]*)?", RegexOptions.IgnoreCase)

    Dim mactches As MatchCollection = regx.Matches(txt)

    For Each match As Match In mactches
        txt = txt.Replace(match.Value, "<a href='" & match.Value & "'>" & match.Value & "</a>")
    Next

    Return txt
End Function 
```

***C#.Net 实现***

```
protected string MakeLink(string txt) 
{ 
   Regex regx = new Regex("http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?", RegexOptions.IgnoreCase); 

   MatchCollection mactches = regx.Matches(txt); 

   foreach (Match match in mactches) { 
    txt = txt.Replace(match.Value, "<a href='" + match.Value + "'>" + match.Value + "</a>"); 
   }
   return txt; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-09T09:08:50.023

另一个可以与 KvanTTT 答案一起使用的正则表达式，并且具有接受 https url 的额外好处

> https?://([\w+?.\w+])+([a-zA-Z0-9\~!\@#\$\%\^\&*()_-\=+\/\ ?.:\;\'\,]*)?

.net 字符串表示：

```
"https?://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?" 
```

# sas - PC SAS 修剪/删除

> ID：12568029
> 
> 赞同：0
> 
> 时间：2012-09-24T15:22:00.313
> 
> 标签：sas, trim, substr

整个下午，

我有一个带有名为 list_name 的变量的数据集。

其中一些列表名称以“Y_”为前缀（例如：HNEWCARD 与：Y_HNEWCARD）

出于分析的目的，我想将其视为同一个变量。

所以简而言之，如果变量名的前两个字符以'Y_'开头，我想删除它们。

我玩过一些修剪和 substr 但无法获得任何有效的输出！

听起来很简单，但今天它超出了我的脑海！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:37:15.400

如果 substr(list_name,1,2)='Y_' 那么 list_name=substr(list_name,3);

# r - 更改轴标签的颜色

> ID：12568032
> 
> 赞同：24
> 
> 时间：2012-09-24T15:22:07.913
> 
> 标签：r, ggplot2, axis-labels

以下是相关代码：

```
ggplot.3plus<-ggplot(summary.3plus, aes(x=sp1, y=fract.mean, fill=ForestAge)) + 
  geom_bar(position=position_dodge())+ coord_cartesian(ylim = c(1, 1.175))+
  geom_errorbar(aes(ymin=fract.mean-se, ymax=fract.mean+se),
                width=.2,                    # Width of the error bars
                position=position_dodge(.9))

ggplot.3plus<- ggplot.3plus + theme(axis.title.x = element_text(colour = "red")) 
```

可以看到，通过最后一行代码，我可以改变坐标轴标题的颜色，但不能改变坐标轴LABELS的颜色。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-24T15:25:05.587

关于什么

```
ggplot.3plus + theme(axis.text.x=element_text(colour="red")) 
```

有关更多主题详细信息，请参阅[ggplot2 wiki 页面](https://github.com/wch/ggplot2/wiki/New-theme-system)。

# php - 如何过滤学说2实体中的吸气剂？

> ID：12568033
> 
> 赞同：9
> 
> 时间：2012-09-24T15:22:12.483
> 
> 标签：php, filter, doctrine, doctrine-orm, getter

我有一个具有一对多关联的实体（带有额外字段的多对多）：

```
class Game {
    /**
    /* @OneToMany(targetEntity="GamePlayer", mappedBy="game", cascade={"persist"})
    /* @JoinColumn(name="id", referencedColumnName="game_id", onDelete="cascade")
     */
    private $gamePlayer;
} 
```

该类为所有作者提供了自动获取器：getGamePlayers()

我想向它添加一个过滤器，因此它只会以最有效的方式查询数据库的相关详细信息：

```
public function getGamePlayersWithScoreHigherThan($score){
    //what to write here? (return array)
} 
```

从实体内部（不使用存储库）实现这种吸气剂的最佳方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:46:30.667

您可以尝试在您的实体上创建一个单独的方法，该方法使用`Doctrine\Common\Collections\Criteria`来过滤关联的集合。有关详细信息，请参阅[此链接](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/working-with-associations.html#filtering-collections)。

# windows-8 - vs2012 在 2 个选项卡中显示 xaml 设计和代码

> ID：12568037
> 
> 赞同：1
> 
> 时间：2012-09-24T15:22:28.863
> 
> 标签：windows-8, visual-studio-2012

有没有办法在两个不同的选项卡中显示 xaml 代码和 xaml 设计。我想在左侧屏幕 xaml 和右侧的 xaml 设计视图上显示？

我正在 Visual Studio 2012 中开发 Windows 8 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:56:22.760

并排显示设计视图和 xaml (xml) 视图

在 xmal 页面编辑器上找到拆分器选项（在拆分器栏的右侧将并排显示三个图标。一个标记为“|”，另一个标记为“-”，第三个显示两个 V 形指向下方。单击标记为“|”的那个，您将看到 XAML 和设计器表面的并排视图。

显示代码和 XAML

打开 XAML 和 xaml.cs 文件。
将它们拖离选项卡停靠栏（单击并拖动选项卡）。您将看到一个十字形的象形图出现在窗口中间。
将您拖动的选项卡放到此象形图的右侧“手臂”上。

您现在应该同时拥有两者。

# c# - 带有动态生成输入控件的转发器的 ASP.NET 表单

> ID：12568041
> 
> 赞同：2
> 
> 时间：2012-09-24T15:22:55.853
> 
> 标签：c#, asp.net, forms, repeater

我有一个中继器控件，它从数据库中提取一些数据并为与每一行相关的值创建一个单选按钮列表。我不知道会有多少行回来，所以我不知道会有多少单选按钮列表。此转发器位于表单内，一旦我单击表单上的“提交”，我需要从转发器生成的单选按钮中获取值。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:29:13.373

有几个选项。

一种是使用[嵌套的中继器](http://support.microsoft.com/kb/306154)来显示 RadioButtons。

另一种是在原始中继器期间创建控件。[Repeater.ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)事件。

无论哪种情况，您都需要非常了解[Page Lifecycle](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。

您将希望避免在 Page_Load 事件中进行数据绑定，除非数据绑定是使用`if(!Page.IsPostback)`块完成的。如果您未能检查回发，您将遇到 Page_Load 调用 DataBind() 调用，然后在任何事件处理程序可以使用它之前擦除转发器的值的问题。

或者，您可以在 Page_Init 中进行绑定，这发生在可以应用视图状态之前，因此您不会丢失您的值。

您还可以对 RadioButtons 使用用户控件。之前有一篇文章介绍了如何在[此处](https://stackoverflow.com/questions/7668845/dynamically-adding-a-user-control-to-a-repeater)的中继器中使用 nexsted 用户控件。

# android - 如何从android为用户创建事件

> ID：12568043
> 
> 赞同：0
> 
> 时间：2012-09-24T15:23:06.320
> 
> 标签：android, facebook-graph-api

有什么方法可以让用户使用 facebook android sdk 创建一个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:34:03.833

[您已经在评论中发布了指向文档](https://developers.facebook.com/docs/reference/api/event/)的正确链接。只需点击此链接即可找到您要搜索的电话：

> 代表用户创建事件：[此处的说明](https://developers.facebook.com/docs/reference/api/user/#events)

# jquery-ui - 仅更改一个 jquery ui 自动完成输入的字体大小

> ID：12568046
> 
> 赞同：1
> 
> 时间：2012-09-24T15:23:11.153
> 
> 标签：jquery-ui, styles, jquery-ui-autocomplete

所以我有三个带有 jquery ui 自动完成功能的输入框，我想将其中两个的字体大小更改为更小。尝试过这样的事情，但没有奏效：

```
$($('.ui-autocomplete-input')[1]).find('.ui-menu-item').find('.ui-corner-all').css('font-size','12px'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:08:31.443

我会通过更改列表的呈现方式并将类添加到`li`和/或`a`.

[jsFiddle](http://jsfiddle.net/TheJoeFletch/Q55Gj/1/)

```
$("#input1").autocomplete({
    delay: 0,
    minLength: 0,
    source: ["One", "Two", "Three"]
}).data("autocomplete")._renderItem = function(ul, item) {
    return $("<li class=\"li-class\"></li>")//added list class here
       .data("item.autocomplete", item)
       .append("<a class=\"a-class\">" + item.label + "</a>") //added the anchor class here.
       .appendTo(ul);
};​ 
```

# css - css括号 - 间距问题

> ID：12568059
> 
> 赞同：1
> 
> 时间：2012-09-24T15:23:50.427
> 
> 标签：css, styles, border, padding

我正在尝试将 css 括号包裹在我的 h2 标题周围（并且可能 90% 在那里），但我在解决一些小问题时遇到了麻烦：

**1.**右边线的间距偏大，要拿过来和支架连接。我该如何调整？

和

**2.**通过 bg.png 可以看到橙色存在一个奇怪的不透明度问题 - 为什么/如何解决？

[jsfiddle](http://jsfiddle.net/sas9F/)

理想的： ![理想形象](../Images/5a4c1352207e090b666438afe2099627.png)

目前看到： ![当前的](../Images/cc50ece2a6ecb39a70ce892c28df81a1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:57:13.387

对于您的第一个问题，我不确定您的问题是否相同：

`h2`将from的属性更改`text-align: center;`为：`text-align: left;`并根据需要设置填充/边距。

# php - 如何处理 SQL 字段中的数组？

> ID：12568067
> 
> 赞同：2
> 
> 时间：2012-09-24T15:24:00.777
> 
> 标签：php, mysql, codeigniter

我有一个来自佛罗里达州的 CSV 提要，我需要每天将其加载到 MySQL 中。这是我所在地区所有待售房屋的清单。一个字段有一个代码列表，以逗号分隔。这是一个这样的示例：

```
C02,C11,U01,U02,D02,D32,D45,D67 
```

这些代码都意味着一些东西（游泳池、区域围栏等），我在单独的表格中有含义。我的问题是，我应该如何处理加载这些？我应该像在 CSV 中一样将它们放在自己的字段中吗？我应该创建一个单独的表格来保存它们吗？

如果我确实将它们保留在字段中（称为 feature_codes），我如何从包含描述的表中获取描述？该表只是 feature_code，feature_code_description。我不知道如何在我的第一个查询中将它们分开以进行连接以引入描述。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:32:06.107

作为一般规则，csv 数据不应该存储在字段中，特别是如果您确实需要考虑 csv 数据的各个位，而不仅仅是整个 csv 字符串。

您应该规范化设计并将这些子“字段”中的每一个拆分到自己的表中。

话虽如此，MySQL 确实有[find_in_set()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)允许您对这些 csv 字符串进行排序搜索并将每个字符串视为其自己的不同数据。使用它并不是特别有效，但它确实为设计添加了创可贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:32:52.013

您应该将有关特征代码的信息保存在单独的表中，其中每一行是一对房屋标识符和特征标识符

```
HouseID    FeatureID
1          C07
1          D67
2          D02 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:33:32.300

您可以使用explode() 来分隔您的CSV 字符串： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
$string = 'C02,C11,U01,U02,D02,D32,D45,D67';
$array  = explode(',', $string); 
```

然后使用您的 feature_codes 列表，您可以轻松检索您的 feature_code_description，但您需要执行另一个查询以获取包含所有 feature_codes 和 feature_code_description 的数组。

或者拆分您的字段并将其放在另一个带有 home_id 的表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:34:35.317

您可以将它按原样保存在数据库中，当您读出它时，您可以运行 php 函数explode。去检查那个功能。它会为你构建一个数组，用一个字符串来分隔你想要的值。在您的情况下，您可以使用：

```
$array_of_codes = explode(",", $db_return_string); 
```

这将由每个代码组成一个数组，用它们之间的逗号分隔它们。祝你好运。

# java - 使用 Thrift 的非阻塞 SSL 服务器

> ID：12568069
> 
> 赞同：8
> 
> 时间：2012-09-24T15:24:04.810
> 
> 标签：java, ssl, nonblocking, thrift

Thrift 提供了几种不同的非阻塞服务器模型，例如`TNonblockingServer`、`THsHaServer`和`TThreadedSelectorServer`. 但是，我想`SSL`在服务器上启用。似乎 SSL 仅适用于 Thrift 中的阻塞服务器。

有人对 Thrift 中的非阻塞 SSL 服务器有任何线索吗？Java 示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-13T04:21:12.353

在 Java 应用程序中担心 SSL 的一种替代方法是使用 nginx ( [http://wiki.nginx.org/SSL-Offloader](http://wiki.nginx.org/SSL-Offloader) ) 之类的东西作为反向代理。

这具有您的应用程序不需要关心 SSL 的好处，但确实需要在您的堆栈中增加一层。

客户端将连接到 nginx 服务器而不是直接连接到您的客户端，并且 nginx 会将这些连接转发到您的 Thrift 服务器。

对于这种方法，您不一定需要两个不同的服务器，只需将 Thrift 服务器配置为仅侦听 localhost（对于 ipv4 为 127.0.0.1），并让 nginx 在您的外部接口上侦听并转发到 localhost。

编辑：最后一段中的客户端->服务器

# java - 捕获的网络摄像头图像不刷新且最大尺寸太大而无法显示

> ID：12568071
> 
> 赞同：1
> 
> 时间：2012-09-24T15:24:10.767
> 
> 标签：java, swing, webcam, javacv

我的程序有一些问题。我有一个 GUI，它在一侧显示来自网络摄像头的实时图像（使用 [ **jvacv** ][1]），在另一侧显示捕获的图像。为了捕捉图像，我有一个按钮。一个问题是，只有当我关闭并再次打开程序时，捕获的图像才会刷新。另一个是我想从网络摄像头捕获 1080p 图像，但实时图像为 640x480。

这是代码：

```
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException; 
import java.lang.ProcessBuilder.Redirect;

import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.SwingUtilities;

import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.FrameGrabber.Exception;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import static com.googlecode.javacv.cpp.opencv_highgui.*;

public class Final 
{
private VideoPanel videoPanel = new VideoPanel();
private ImagePanel imagePanel   = new ImagePanel();
private JButton jbtCapture = new JButton("Captura");
private JRadioButton jbtAutoCap = new JRadioButton("Captura Automatica");
private FrameGrabber vision;
private BufferedImage image;
private IplImage gimage;

public class VideoPanel extends JPanel
{

public VideoPanel()
{
    vision = new OpenCVFrameGrabber(0);
    try 
    {
        vision.start();
    } catch (Exception e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    try {
        image = vision.grab().getBufferedImage();
        if (image != null)
        {
            g.drawImage(image, 0, 0, 640, 480, null);
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    repaint();
}
}

class ImagePanel extends JPanel
{
private BufferedImage image;

public ImagePanel()
{
    try {
        image = ImageIO.read(new File("image001.bmp"));
    } catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void paintComponent(Graphics g) 
{
    super.paintComponent(g);
    if(image != null)
    {

        g.drawImage(image,5,0,640,480, null);

    }

}

}

private void displayGUI()
{
JFrame janela = new JFrame();

JPanel jpButton = new JPanel();
jpButton.setLayout(null);

jbtCapture.setBounds(145,0,110,30);
jpButton.add(jbtCapture);

jbtAutoCap.setBounds(0, 5, 140, 23);
jpButton.add(jbtAutoCap);

janela.setLayout(null);

videoPanel.setBounds(5, 5, 640, 480);
janela.add(videoPanel);

imagePanel.setBounds(705,5,640,480);
janela.add(imagePanel);

jpButton.setBounds(5, 500, 670, 40);
janela.add(jpButton);

janela.setSize(1366,730);
janela.setVisible(true);

jbtCapture.addActionListener(
           new ActionListener() 
           {
              public void actionPerformed(ActionEvent e)
              {

                 try {
                    gimage = vision.grab();
                    cvSaveImage("image001.bmp", gimage);

                } catch (Exception e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

              }
           }
       );

}

public static void main(String[] args) 
{
// TODO Auto-generated method stub
SwingUtilities.invokeLater(new Runnable() 
{

    @Override
    public void run() 
    {
        // TODO Auto-generated method stub
        new Final().displayGUI();
    }
});

}
} 
```

# flash - 隐藏 red5 的上下文路径（或 Flash Media Live Encoder 的 FMS URL）

> ID：12568073
> 
> 赞同：0
> 
> 时间：2012-09-24T15:24:18.287
> 
> 标签：flash, media, live, red5, encoder

是否可以通过 Flash Media Live Encoder 将网络摄像头图像流式传输到 red5（例如： rtmp://127.0.0.1/ **mySecretStreamInput**）并使其可用于另一个 URL 上的客户端（例如： rtmp://IP_ADDRESS/ **stream**） ?

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:51:47.033

您要查找的关键字是“代理”或“代理”。我不确定你打算用这个做什么，但请记住，唯一被隐藏的是源 URL；这无助于保护您的内容，因为新网址将提供相同的内容。

# android - MapView-禁用不断缓存地图

> ID：12568076
> 
> 赞同：1
> 
> 时间：2012-09-24T15:24:22.547
> 
> 标签：android, android-mapview, osmdroid

我在我的项目中使用了相当大的离线地图。我是如何进行压力测试的，我连续打开和关闭了几次地图，每次打开，应用程序消耗大约 2MB 内存，在 Log Cat 中我经常可以看到 OutOfMemoryError。有什么方法可以禁用缓存或如何清理缓存？

使用：osmdroid 3.0.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:04:05.987

你可以使用这个：

```
@Override
protected void onStop() {
   super.onStop();
      final MapTileProviderBase mapTileProvider = this.mMapView.getTileProvider();
      mapTileProvider.clearTileCache();
} 
```

# java - 无法打印印地语字符

> ID：12568077
> 
> 赞同：2
> 
> 时间：2012-09-24T15:24:29.317
> 
> 标签：java

![输出_屏幕](../Images/cfaef63646cde98e6505892ee9b34fdc.png)

```
public class demo {

    public static void main(String[] args) {
        for(int k = 2029; k<=2360 ; k++)
        {
            System.out.print(k+  " "+(char)k+" ");
        }
    }
} 
```

输出：

`2029 ? 2030 ? 2031 ? 2032 ? 2033 ? 2034 ? 2035 ? 2036 ? 2037 ? 2038 ? 2039 ? 2040 ? 2041 ? 2042 ? 2043 ? 2044 ? 2045 ? 2046 ? 2047 ? 2048 ? 2049 ? 2050 ? 2051 ? 2052 ? 2053 ? 2054 ? 2055 ? 2056 ? 2057 ? 2058 ? 2059 ? 2060 ? 2061 ? 2062 ? 2063 ? 2064 ? 2065 ? 2066 ? 2067 ? 2068 ? 2069 ? 2070 ? and so on..`.

此输出显示在 cmd ... 为什么它不显示印地语字符 ....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:07:16.617

**在 Eclipse 中：**

您需要将 Eclipse 控制台编码更改为 UTF-8。为此，请进入**“运行配置”**对话框并选择“**常用”**选项卡。在**编码**下，选择`UTF-8`。现在运行你的程序。您应该会在 Eclipse 控制台中看到印地语字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:41:13.410

在 Intellij 下运行您的程序时，我遇到了同样的问题。我通过更改调试命令行来修复

-Dfile.encoding=windows-1251 到 -Dfile.encoding=utf-8

Intellij 将默认文件编码设置为不适用于印地语的值。我的eclipse生锈了，但是看看你是否可以将调试器的vm选项更改为 -Dfile.encoding=utf-8

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-31T11:33:57.173

如果您创建一个文件说 .properties 文件以进行国际化，Eclipse 具有内置的 unicode 编辑器。如果在 RUN Configuration Common 选项卡下启用。在控制台编码=> 其他下选择 UTF-8。然后控制台将以您选择的语言读取它。您仍然需要为文件提供 unicode 字符，或者将字符转换为 UNICODE。

现在，如果你有你的语言字符在这里用印地语 विमल कृष्णा （某些编辑器需要这些字符）然后如果我只是粘贴到 eclipse .properties 文件中，它将自动转换为 \u0935\u093F\u092E\u0932 \u0915 \u0943\u0937\u094D\u0923\u093E。

上面的字符串现在将在控制台中被解释为 विमल कृष्णा。

示例：第 1 步在 Spring 中，您需要在名为“locale”的文件夹下的类路径中（比如在 src/main/resources 中）一个名为

**带有内容的messages_hi_IN.properties**（用于印地语）

```
user.name=\u0935\u093F\u092E\u0932 \u0915\u0943\u0937\u094D\u0923\u093E, age : {0}, URL : {1} 
```

**messages_en_US.properties**（英语）与内容

```
user.name=vimal krishna, age : {0}, URL : {1} 
```

第2步：

你的主要应用：

```
package com.vimal.common;

import java.text.SimpleDateFormat;
import java.util.Locale;

 import org.springframework.context.ApplicationContext;
 import org.springframework.context.support.ClassPathXmlApplicationContext;

 public class App {
      public static void main(String[] args) {

       ApplicationContext context 
        = new ClassPathXmlApplicationContext("com/vimal/common/beans.xml");

       String name = context.getMessage("user.name", new Object[] { 45,"http://www.vkrishna.com" }, Locale.US);

    System.out.println("User name (English) : " + name);

    String nameHindi = context.getMessage("user.name", new Object[] {45, "http://www.vkrishna.com" }, new Locale("hi", "IN"));

    System.out.println("User name (Hindi) : " + nameHindi);

  }
} 
```

第 3 步：配置文件

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans      
http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename">
        <value>locale\messages</value>
    </property>
</bean> 
```

这里的**locale**是 src/main/resources 中的文件夹，它位于messages_hi_IN.properties 文件所在的类路径上（如果一个maven 项目是由eclipse 创建的）。locale\messages 引用此**消息**_hi_IN.properties 文件，添加 hi_IN 是印地语语言环境检测的关键。现在在主应用程序中，您可以看到创建了一个新的 Locale("hi", "IN")，因为它没有像 locale.US 等在 eclipse 中定义。

结果将是：

```
Dez 31, 2014 12:19:12 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFORMATION: Pre-instantiating singletons in   org.springframework.beans.factory.support.DefaultListableBeanFactory@5594a1b5: defining beans [messageSource]; root of factory hierarchy
Customer name (English) : vimal krishna, age : 45, URL : http://www.vkrishna.com
Customer name (Hindi) : विमल कृष्णा, age : ४५, URL : http://www.vkrishna.com 
```

我已经修改了[链接...](http://www.mkyong.com/spring/spring-resource-bundle-with-resourcebundlemessagesource-example/)

# scala - Scala akka ActorFor 路径

> ID：12568088
> 
> 赞同：1
> 
> 时间：2012-09-24T15:25:18.387
> 
> 标签：scala, akka, remote-actors

这是我在远程系统上查找演员的代码：

```
Application.system.actorFor("akka://ActorApplication@172.17.100.232:2552/home/louis/scala/remoteActor") 
```

我想我指定了错误的路径。

这个对吗：

/家/路易斯/斯卡拉/

是播放的位置！远程服务器上的项目。然后“remoteActor”是演员的名字。

但它永远不会返回 ActorRef 对象，它始终为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:32:51.983

不，地址应该是：

```
"akka://ActorApplication@172.17.100.232:2552/user/remoteActor" 
```

这假定这`ActorApplication`确实是您尝试在 :2552 上访问的参与者系统的正确名称。url的`/user/`部分表示它是您在该系统中创建的参与者。（你是“用户”）

# c# - c# 代码以错误的顺序执行 - 奇怪的行为

> ID：12568094
> 
> 赞同：0
> 
> 时间：2012-09-24T15:25:43.233
> 
> 标签：c#, wpf, events, windows-runtime

我`ListView`绑定到一个视图模型，其中包含`ObservableCollection`一个简单的示例应用程序。

```
public class ViewModel : INotifyPropertyChanged
{
    public ViewModel(){}

    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<Item> _items;
    public ObservableCollection<Item> Items 
    {
        get 
        { 
            return this._items; 
        }
        set
        {
            if (value != this._items)
            {
                this._items = value;
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("Items"));
            }
        }         
    }
}
public class Item
{
    public string Name;
} 
```

以下函数绑定到 ListView 的 SelectionChanged 事件

```
private void ItemListView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    model.Items.Add(new Item { Name = "added item" });
    model.Items = new ObservableCollection<Item> { new Item { Name = "new item 1" }};
} 
```

当事件触发时，这应该发生

1.  附加到现有的新项目（“添加的项目”）`ObservableCollection`
2.  `ObservableCollection`设置为新集合 [单个项目，“新项目 1”]

实际发生的情况：

1.  `ObservableCollection`设置为新集合 [单个项目，“新项目 1”]
2.  新项目（“添加的项目”）附加到*新*集合的末尾

谁能解释为什么这些以错误的顺序发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:30:15.723

> 谁能解释为什么这些以错误的顺序发生？

我的猜测是它们没有以错误的（反向）顺序发生，但追加发生了两次。执行

```
 model.Items = ... ; 
```

在那些相同项目的 SelectionChanged 中非常大胆。它将再次触发 SelectionChanged，并且仅因为 Selection 然后保持为无（索引 -1），您不会进入无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:34:00.013

可观察的集合不需要 inotify，试试这个：

```
public class ViewModel : INotifyPropertyChanged
{
    public ViewModel(){}

    public ObservableCollection<Item> Items ;

} 
```

# php - 将数组存储在字符串中以供 eval() 稍后使用

> ID：12568095
> 
> 赞同：2
> 
> 时间：2012-09-24T15:25:55.057
> 
> 标签：php, arrays, eval

有问题`eval()`。我被迫将字符串存储在稍后执行的数组中。

现在，在字符串中存储字符串是没有问题的。但是我如何在其中存储一个数组？由于我将无法访问该变量，因此我希望将数组直接存储到该字符串中。

请参阅此代码：

```
 // ----------------------
    // -- class A
    $strId    = 'id_1234';
    $strClass = 'classname';
    $arParams = array('pluginid' => 'monitor', 'title' => 'Monitor', ...);

    $strClone = 'openForm(desktop(),"'.$strId.'","'.$strClass.'",'.$arParams.');';

    $this->menu = array( "clone" => $strClone, ... );

    // ----------------------
    // -- class B
    // loop through $this->menu, then..
    {
      eval( $this->menu[$item] );
    }

    // ----------------------
    // -- class C
    function openForm( $owner, $id, $class, $params )
    {
      ...
    } 
```

除了数组之外，一切都完美无缺`$arParams`。

`There is an error: PHP Parse error: syntax error, unexpected ')', expecting '(' in ... (441) : eval()'d code on line 1`

问题是什么？我可以不这样做`serialize()`吗？

* * *

**编辑：**

我已经建立了正在发生的事情的表示。如果你让它运行，那么它是固定的：

```
$ar = array('a' => 'value1', 'b' => 'value2');
$str = "something";

$run = " a('".$str."', \$ar); "; // this line may be changed

// this is done to represent the loss of the variables in another class
unset($ar);
unset($str);

// $run is kept
eval( $run );

function a($str, $ar) {
    echo "\$str="         . $str      . "<br>";
    echo "\$ar['a']="     . $ar['a']    . "<br>";
    echo "\$ar['b']="     . $ar['b']    . "<br>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:46:18.110

当您`a()`在`eval`'ed 字符串中运行该函数时，该变量`$ar`不再存在。这会触发错误，从而导致`eval()`失败。

由于您正在使用`eval()`，因此一种快速而肮脏的 hacky 方法来修复它似乎是合适的。;-)

而不是这样做：

```
$run = " a('".$str."', \$ar); "; 
```

你可以这样做：

```
$run = " a('$str', ". var_export($ar, true) ."); "; 
```

这将导致字符串 $run 看起来像这样`echo`：

```
a('something', array(
  'a' => 'value1',
  'b' => 'value2',
)); 
```

所以现在您将数组直接传递给函数调用，而不是传递变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:30:08.490

是的，改成`$arParams`这样：

```
$arParams = 'array("pluginid" => "monitor", "title" => "Monitor", ...)'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:44:55.120

我现在使用这个技巧：

```
$strParams = " array(";
foreach($arParams as $strKey => $strVal) {
   $strParams .= "'".$strKey."' => '".$strVal."',";
}
$strParams = substr($strParams, 0, -1) . ") ";

// later on
... => " openForm(desktop(),'".$strId."','".$strClass."',".$strParams."); " 
```

# javascript - 如何按范围替换字符串？

> ID：12568097
> 
> 赞同：16
> 
> 时间：2012-09-24T15:25:54.627
> 
> 标签：javascript, string, replace

我需要按范围替换字符串示例：

```
string = "this is a string";//I need to replace index 0 to 3 whith another string Ex.:"that"
result = "that is a string"; 
```

但这必须是动态的。不能替换固定词...需要按范围

我试过了

```
 result = string.replaceAt(0, 'that'); 
```

但这仅替换第一个字符，我想要第一个到第三个

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-24T15:35:59.903

```
function replaceRange(s, start, end, substitute) {
    return s.substring(0, start) + substitute + s.substring(end);
}

var str = "this is a string";
var newString = replaceRange(str, 0, 4, "that"); // "that is a string" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T15:28:52.350

```
var str = "this is a string";
var newString = str.substr(3,str.length);
var result = 'that'+newString 
```

substr 返回字符串的一部分，以我为例，它从字符 3 开始直到 str.length 以具有最后一个字符...

要替换字符串的中间，可以使用相同的逻辑...

```
var str = "this is a string";
var firstPart = str.substr(0,7); // "this is "
var lastPart = str.substr(8,str.length); // " string"
var result = firstPart+'another'+lastPart; // "this is another string" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:30:49.343

我在这里做简单的[子字符串调用](http://www.w3schools.com/jsref/jsref_substring.asp)

```
var str = "this is a string";
var result = "that" + str.substring(4); 
```

检查一个工作[jsfiddle](http://jsfiddle.net/97vSK/)。

# c# - 通过 C# 连接到 Oracle 数据库？

> ID：12568100
> 
> 赞同：44
> 
> 时间：2012-09-24T15:26:10.050
> 
> 标签：c#, oracle, c#-4.0

我需要通过 Visual Studio 2010 连接到 Oracle DB（外部）。但我不想在我的机器上安装 Oracle。在我的项目中，我引用了：**System.Data.OracleClient**。但它并没有满足需求。我有一个**“Oracle SQL Developer IDE”**，我在其中针对 oracle db 运行 SQL 查询。

到目前为止我有这个代码：

```
 private static string GetConnectionString()
    {
        String connString = "host= serverName;database=myDatabase;uid=userName;pwd=passWord";
        return connString;
    }

 private static void ConnectingToOracle()
    {
        string connectionString = GetConnectionString();
        using (OracleConnection connection = new OracleConnection())
        {
            connection.ConnectionString = connectionString;
            connection.Open();
            Console.WriteLine("State: {0}", connection.State);
            Console.WriteLine("ConnectionString: {0}",
                              connection.ConnectionString);

            OracleCommand command = connection.CreateCommand();
            string sql = "SELECT * FROM myTableName";
            command.CommandText = sql;

            OracleDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                string myField = (string)reader["MYFIELD"];
                Console.WriteLine(myField);
            }
        }
    } 
```

到目前为止，我阅读了这些博客：

[http://st-curriculum.oracle.com/tutorial/DBXETutorial/index.htm](http://st-curriculum.oracle.com/tutorial/DBXETutorial/index.htm)

[http://blogs.msdn.com/b/kaevans/archive/2009/07/18/connecting-to-oracle-from-visual-studio.aspx](http://blogs.msdn.com/b/kaevans/archive/2009/07/18/connecting-to-oracle-from-visual-studio.aspx)

到目前为止，我还没有从 Oracle 下载任何东西。我应该采取哪些步骤来实现这一点？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-24T15:40:58.973

首先，您需要从该站点 [http://www.oracle.com/technetwork/topics/dotnet/index-085163.html下载并安装 ODP](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)

**安装后添加程序集Oracle.DataAccess.dll**的引用。

你很高兴去追求这个。

```
using System; 
using Oracle.DataAccess.Client; 

class OraTest
{ 
    OracleConnection con; 
    void Connect() 
    { 
        con = new OracleConnection(); 
        con.ConnectionString = "User Id=<username>;Password=<password>;Data Source=<datasource>"; 
        con.Open(); 
        Console.WriteLine("Connected to Oracle" + con.ServerVersion); 
    }

    void Close() 
    {
        con.Close(); 
        con.Dispose(); 
    } 

    static void Main() 
    { 
        OraTest ot= new OraTest(); 
        ot.Connect(); 
        ot.Close(); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-03-21T09:57:22.387

您也可以使用**[Oracle.ManagedDataAccess](https://www.nuget.org/packages/Oracle.ManagedDataAccess/)** NuGet 包（.NET >= 4.0，数据库 >= 10g Release 2）。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-06-11T14:21:17.477

**使用 Nuget**

1.  右键单击项目，选择`Manage NuGet packages...`
2.  选择`Browse`选项卡，搜索`Oracle`并安装[`Oracle.ManagedDataAccess`](https://www.nuget.org/packages/Oracle.ManagedDataAccess/)

[![Oracle NuGet 包](../Images/5b12cb15c6ca9f2341525880497b5fea.png)](https://i.stack.imgur.com/4w6KQ.png)

3.  在代码中使用以下命令（`Ctrl`+`.`自动添加 using 指令）。

4.  请注意与 Java 相比不同的 DataSource 字符串。

    ```
    // create connection
    OracleConnection con = new OracleConnection();

    // create connection string using builder
    OracleConnectionStringBuilder ocsb = new OracleConnectionStringBuilder();
    ocsb.Password = "autumn117";
    ocsb.UserID = "john";
    ocsb.DataSource = "database.url:port/databasename";

    // connect
    con.ConnectionString = ocsb.ConnectionString;
    con.Open();
    Console.WriteLine("Connection established (" + con.ServerVersion + ")"); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-28T08:02:50.220

下一个方法适用于 Visual Studio 2013 Update 4 1- 从解决方案资源管理器中右键单击引用，然后选择添加引用 2- 程序集 > 框架 > System.Data.OracleClient > 确定，然后您可以使用 System.Data 自由添加。应用程序中的 OracleClient 并像处理 Sql Server 数据库一样处理数据库，除了将前缀从 Sql 更改为 Oracle，如 SqlCommand 变为 OracleCommand，例如链接到 Oracle XE

```
OracleConnection oraConnection = new OracleConnection(@"Data Source=XE; User ID=system; Password=*myPass*");
public void Open()
{
if (oraConnection.State != ConnectionState.Open)
{
oraConnection.Open();
}
}
public void Close()
{
if (oraConnection.State == ConnectionState.Open)
{
oraConnection.Close();
}} 
```

并使用存储过程执行一些命令，如 INSERT、UPDATE 或 DELETE，我们可以使用以下方法

```
public void ExecuteCMD(string storedProcedure, OracleParameter[] param)
{
OracleCommand oraCmd = new OracleCommand();
oraCmd,CommandType = CommandType.StoredProcedure;
oraCmd.CommandText = storedProcedure;
oraCmd.Connection = oraConnection;

if(param!=null)
{
oraCmd.Parameters.AddRange(param);
}
try
{
oraCmd.ExecuteNoneQuery();
}
catch (Exception)
{
MessageBox.Show("Sorry We've got Unknown Error","Connection Error",MessageBoxButtons.OK,MessageBoxIcon.Error);
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-15T13:24:45.040

基本上在这种情况下，**System.Data.OracleClient**需要访问一些不属于 .Net 的 oracle dll。解决方案：

*   安装 Oracle 客户端，并将 bin 位置添加到 Windows 的 Path 环境变量或
*   将oracle客户端可安装文件夹中的oraociicus10.dll（Basic-Lite版）或aociei10.dll（基本版）、oci.dll、orannzsbb10.dll和oraocci10.dll复制到应用程序的bin文件夹，以便应用程序能够找到所需的dll

# css - caroufredsel 在 chrome 中效果不佳

> ID：12568101
> 
> 赞同：0
> 
> 时间：2012-09-24T15:26:10.827
> 
> 标签：css, jquery-plugins

使用 jquery carousel 插件 (http://caroufredsel.frebsite.nl/) 除了在 chrome/webkit 上工作正常。我在每张幻灯片上都有一个内部 div，在 chrome 中，这个 div 在 2-3 张幻灯片滑过后消失。这是怎么回事？？

[http://goo.gl/wStU0](http://goo.gl/wStU0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:26:36.817

Didn't figure out quite what the exact issue was but by switching from position:absolute to relative on the inner div and some judicious use of negative margins, made it work-ish.

# android - Android平滑渐变

> ID：12568102
> 
> 赞同：4
> 
> 时间：2012-09-24T15:26:11.420
> 
> 标签：android, graphics, gradient, radial-gradients

我在 Android 上的 Canvas 中画了一个简单的圆圈。现在我需要用一些渐变色填充它，但它们并不是很平滑。这就是我所做的：

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    rectF.set(20, 20, this.get_Width() - this.get_Width()/10, this.get_Width() - this.get_Width()/10);
    RadialGradient gradient = new RadialGradient(200, 200, 200, 0xFFFFFFFF,
            0xFF000000, android.graphics.Shader.TileMode.CLAMP);
    Paint mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setShader(gradient);
    canvas.drawCircle(getWidth()/2, getHeight()/2, getWidth()/3, getGradient());
    invalidate();
} 
```

这是结果：

![径向梯度](../Images/37b07eaf024f9ae01304690d431845f1.png)

我的问题是：是否有某种方法可以制作 HQ 径向渐变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:33:18.857

尝试将以下内容添加到`Activity`包含`View`绘图的内容中：

```
@Override
public void onAttachedToWindow() {
   super.onAttachedToWindow();
   Window window = getWindow();
   // Eliminates color banding
   window.setFormat(PixelFormat.RGBA_8888);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:49:54.873

最后我应该将我的 Paint 对象初始化为：

```
Paint p = new Paint(Paint.ANTI_ALIAS_FLAG); 
```

这使边界更清洁。

并使用@Waqas 的答案，使颜色本身更平滑。

# sql-server - 带默认值的 ALTER TABLE：SQL Server 与 Oracle

> ID：12568105
> 
> 赞同：0
> 
> 时间：2012-09-24T15:26:23.250
> 
> 标签：sql-server, database, oracle

我们在一个有几百万行的 Oracle 数据库中有一些表。当我们更改其中一个表以添加新列时，我们指定一个默认值。这运行起来非常慢，因为 Oracle 必须使用默认值更新所有现有行。解决方案是确保该列被定义为 NOT NULL，因为这样 Oracle（仅限最近的版本）将不会使用默认值更新所有现有行 - 随后在这些列之一中出现空值会告诉 Oracle 它需要一个默认值并且它将即时提供默认值。

我的问题是关于 SQL Server：它在添加列并提供默认值时是否表现出类似的行为？如果没有，是否有任何最佳实践可以有效地添加具有默认值的新列，并且将列定义为 NOT NULL 是否有任何优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:45:05.063

在 SQL Server 2012 之前，添加不带默认值的 NULLable 列非常庞大，但添加 DEFAULT 约束会很慢，因为必须更新每一行。由于 SQL Server 2012[添加 DEFAULT 的速度也很快](http://rusanu.com/2011/07/13/online-non-null-with-values-column-add-in-sql-server-11/)，如果可能的话，只进行元数据操作。

# c# - 如何从 C#/WPF 项目调用 C++ DLL

> ID：12568106
> 
> 赞同：1
> 
> 时间：2012-09-24T15:26:23.573
> 
> 标签：c#, c++, wpf

我有以下代码：

```
namespace WPFMuskTest
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        [DllImport
            ("myDll.DLL", 
             EntryPoint = "?Func1@FUllNameCopiedFromDependancyWalker",
             CharSet = CharSet.Unicode, CallingConvention = CallingConvention.Cdecl
            )
        ]
        public static extern System.IntPtr Func1(out System.IntPtr handle, int type, out  DateTime date);

        public MainWindow()
        {
            InitializeComponent();
            //
            // 
            // 
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            System.IntPtr MainParam;
            int thetype = 1
            DateTime date;

            System.IntPtr res = GetFxIRMoveForDate(out MainParam, thetype _til, out date);
        }
    }
} 
```

该 exe 与被调用的 DLL 位于同一路径中，并且该函数肯定存在于 DLL 中（在 DependacyWalker 中验证），但我不断收到错误消息：

被调用的函数原型是：

类 __declspec(dllexport) OUR_DATE_TYPE { .... }

typedef 无符号长类型；typedef DATE_TYPE OUR_DATE_TYPE;

```
namespace1
{
namespace2
{
void func1(MyClass &myclass, const TYPE& type, const DATE_TYPE& date);
}
} 
```

“System.AccessViolationException”类型的未处理异常

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:35:15.050

By default, c++ does not use the `cdecl` calling convention, it uses `stdcall`. You would probably have more success writing a c wrapper to the c++ api and calling that instead, because C has a well-defined [ABI](http://en.wikipedia.org/wiki/Application_binary_interface).

EDIT: looking at your code again, I doubt `DateTime` is the same as the date type you're using in C++. If it's the wrong size, for example, this error could occur.

# api - Mixpanel：数据导出 API 为 Web 仪表板提供不同的结果和范围

> ID：12568109
> 
> 赞同：5
> 
> 时间：2012-09-24T15:26:43.780
> 
> 标签：api, analytics, data-integrity, mixpanel

我在 Mixpanel 的仪表板和数据导出 API 中得到不同的数字。

在细分选项卡上的仪表板中，我选择了一个事件（“登录”）、开始和结束日期（9 月 17 日和 24 日）以及周单位。它显示了本周（9 月 17 日、9 月 10 日和 9 月 3 日）的图表和包含四个值的表格。

我使用 Python 库调用 Mixpanel API：

```
api = Mixpanel(
    api_key = '----',
    api_secret = '----'
)

data = api.request(['segmentation'], {
    'event': 'login',
    'unit': 'week',
    'from_date': '2012-09-17',
    'to_date': '2012-09-24'
})

print json.dumps(data) 
```

这是它返回的数据：

```
{
    "legend_size": 1,
    "data": {
        "series": [
            "2012-09-17",
            "2012-09-24"
        ],
        "values": {
            "login": {
                "2012-09-17": XXXXX,
                "2012-09-24": YYYYY
            }
        }
    }
} 
```

值 XXXXX 与 Web 仪表板中显示的值不同，这是为什么呢？

API 返回 9 月 24 日的值，该值不在仪表板视图中。仪表板显示 API 中没有的 9 月 3 日和 10 日的值。为什么会这样？

如何确保同一日期范围内两个界面的结果一致？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T19:40:20.083

Mixpanel 解决方案团队的 Geddes 在这里。Mixpanel 网站实际上使用了我们公开记录供您使用的相同 API，因此一个技巧是使用 Firebug / Chrome Inspector 在 Mixpanel 页面上查看所有 XHR 请求。您将看到 Mixpanel 用于获取其数字的确切 API 查询，并且您可以将其与您自己的 API 查询进行比较，您将清楚区别在哪里。

当然，我们非常乐意查看您的案例。如果您可以向 support@mixpanel.com 提供帐户名称、活动名称等详细信息，我们可以为您提供更具体的答案。

最好的，格德斯

# c# - 在 WatiN 中删除浏览器的一部分

> ID：12568110
> 
> 赞同：0
> 
> 时间：2012-09-24T15:26:50.773
> 
> 标签：c#, html, internet-explorer, xpath, watin

我正在使用 WatiN 使用从第 1-10 页开始的迭代循环逐页浏览网站，然后单击右箭头继续，等等。示例： Page:1 2 3 4 5 6 7 8 9 10

我在用：

browser.Link(Find.ByText(i.ToString())).Click(); doc.LoadHtml(浏览器.Html);

我面临的问题是，有一个带有“优化搜索”的侧边栏，其中包含与“2”、“3”、“4”等相同文本的链接。所以不是点击顶部的页码，WatiN 是单击带有该文本的第一个链接，这会破坏我的结果。

WatiN 有没有办法删除浏览器的一部分，比如侧边栏、标题等，以便它只加载我想要的主表？然后将浏览器加载到文档中？

或者任何其他建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:38:02.413

看看细化你的选择。更像是`broswer.Div("theDivIDwithPageNumbers").Link(Find.ByText).....` 你也可以使用多个选择器，比如`Link(Find.ByText("blah") && Find.ByIndex(3)).Click();`

我强烈推荐第一种尝试更明确地定义它的方法，而不是通过索引或其他相关的东西。结合显式声明和使用 Page 类是非常好的。如果这些对于页面结构/路径/等都没有意义，请阅读以上所有内容并修改 IE F12 工具和/或 Firefox 中的 Firebug。

# keyboard-shortcuts - 使用 Visual Studio 2012 将键盘快捷键附加到解决方案资源管理器中的“全部折叠”项目

> ID：12568114
> 
> 赞同：22
> 
> 时间：2012-09-24T15:26:57.010
> 
> 标签：keyboard-shortcuts, visual-studio-2012, solution-explorer

就像我在这个问题的标题中所说的那样，是否可以附加键盘快捷键以使用 Visual Studio 2012 折叠解决方案资源管理器中的所有项目？

在以前的版本中；2010 年，我能够创建一个宏来启用此功能，但在 Visual Studio 2012 中，不再支持宏。

我可以右键单击解决方案资源管理器中的项目并选择“全部折叠”，但我更喜欢只输入“Ctrl+Shift+C”来完成相同的工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-09T14:30:26.907

FWIW，这是迄今为止我能想到的最好的。

**备选方案 1**

1.  按**Ctrl+¨**将焦点放在解决方案资源管理器上方的*搜索框中。*
2.  按**Shift+Tab**将焦点移至工具栏。
3.  使用**向左箭头**将焦点向左移动，直到您点击*Collapse All*按钮（四次。YMMV）。

* * *

**备选方案 2**

1.  按**Ctrl+Alt+l**（或任何您的个人快捷方式）以聚焦解决方案资源管理器。
2.  按**Shift+Alt**聚焦解决方案资源管理器工具栏。这会将焦点放在工具栏上的*主页*按钮上。
3.  使用**向右箭头**将焦点向右移动，直到您点击“*全部折叠”*按钮（三次）。
4.  按**Enter**。

* * *

**备选方案 3**

1.  按**Ctrl+Alt+l**（或任何您的个人快捷方式）以聚焦解决方案资源管理器。
2.  按住**左箭头**，直到到达顶部节点（*解决方案*节点）。
3.  按**向上箭头**将焦点放在解决方案资源管理器上方的*搜索框中。*
4.  按**Shift+Tab**将焦点移至工具栏。
5.  使用**向左箭头**将焦点向左移动，直到您点击*Collapse All*按钮（两次。YMMV）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-09T05:46:07.713

正如您在下面的屏幕截图中所见，有一个名为 Collapse All 的选项和旁边的快捷键。

![在此处输入图像描述](../Images/44cb97a38f4736fcee1bc7a8eab7a676.png)

现在这个快捷键对你不起作用！

当然，除非您使用`Tools > Options > Keyboard`. 命令名称是`CollapseInSolutionExplorerAction`. 使用此命令名称搜索并分配您选择的快捷键。

![在此处输入图像描述](../Images/2c34d0889b5bfaf8e9e048fc24b5dcd8.png)

就是这样，您可以使用快捷键了！

**[资源](http://yassershaikh.com/how-to-collapse-all-items-in-solution-explorer-in-visual-studio-with-resharper/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T11:54:04.283

Visual Studio 2012 / ReSharper 8.0.1：

命令是“ProjectAndSolutionContextMenus.Project.ReSharper_CollapseInSolutionExplorer”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-04T05:14:55.437

我建议您尝试Visual Studio 的[CodeMaid](http://www.codemaid.net/)扩展。它提供了一个命令“递归折叠所有项目”，该命令具有可自定义的快捷方式（默认情况下，它是 Ctrl+M，-）。它还有其他一些不错的功能，例如在 .cpp 和它的 .h 文件之间切换、加入行等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-27T05:22:46.853

当我第一次安装 VS2012 时，我在网上搜索了一种方法来做到这一点。

我刚刚找到了解决方案，所以我分享它:)

您可以通过将您的 Visual Studio 版本添加到现有的扩展来做到这一点......

*   [下载 VS 10 的扩展](http://visualstudiogallery.msdn.microsoft.com/2d81fec6-71f3-4fa5-87b4-c2aa18e42f92)
*   将扩展名从 vsix 更改为 zip
*   解压并打开文件 extension.vsixmanifest
*   找到这个 xml 部分：SupportedProducts 添加这个：

    ```
    <VisualStudio Version="11.0">
    <Edition>Ultimate</Edition>
    <Edition>Premium</Edition>
    <Edition>Pro</Edition>
    </VisualStudio> 
    ```

您还可以尝试 Visual Studio 2013 的版本 12 ...

*   压缩它，并将扩展名从 zip 更改为 vsix。

*   现在您可以安装它了。

*   安装后，转到工具 -> 自定义并单击键盘按钮。

*   搜索“CrossProjectMultiProject.CollapseProjects”并选择您喜欢的快捷方式。

有一个很好的编码。如果这对您有帮助，请+1

附言。对不起我的英语不好，我是法语;-)

# azure - 'RetryPolicy' 一个模棱两可的引用

> ID：12568116
> 
> 赞同：1
> 
> 时间：2012-09-24T15:27:02.817
> 
> 标签：azure

我收到此错误：

```
'RetryPolicy' is an ambiguous reference between 'Microsoft.Practices.TransientFaultHandling.RetryPolicy' and 'Microsoft.WindowsAzure.StorageClient.RetryPolicy' 
```

我想知道冗余在哪里，StorageClient 现在是否包含重试功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:16:23.883

是的，Windows Azure 存储客户端库确实包含内置的重试策略特定功能，并且可以通过适当的引用来使用。Storage Client Library 中的 RetryPolicies 用于允许用户自定义发生异常时的重试行为。

参考 Windows Azure 存储，这里详细介绍了重试策略，[并附](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/03/overview-of-retry-policies-in-the-windows-azure-storage-client-library.aspx)有源多案例场景和代码示例。

# java - ProxyServlet 中的 HTTPS URL 重定向

> ID：12568120
> 
> 赞同：1
> 
> 时间：2012-09-24T15:27:19.863
> 
> 标签：java, servlets

我们在我们的应用程序中使用 proxy-1.0.2.jar 并且需要将 xml 有效负载 POST 到重定向的 URL。当我们重定向到 HTTPS URL 时，它不起作用。但其他 HTTP 或静态 IP 地址工作正常。我们是否需要在代理过滤器中为 HTTPS URL 做任何额外的配置？

示例网址：

```
https url - https://abc.com/request/listing (not working)
http url - http://xx.xx.xx.xx:8080/request/listing (working) 
```

在 web.xml 中，我们有以下条目：

```
<servlet-mapping>
    <servlet-name>listingProxyServlet</servlet-name>
    <url-pattern>/proxy/listing</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>listingProxyServlet</servlet-name>
    <servlet-class>com.woonoz.proxy.servlet.ProxyServlet</servlet-class>
    <init-param>
        <param-name>target-url</param-name>
        <param-value>https://abc.com/request/listing</param-value>
    </init-param>
</servlet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:34:18.623

我找到了一种解决方案并在此处发布。它可能对其他人有帮助

我使用了 HTTP 代理 servlet 版本。2.6，它工作正常

[http://www.servletsuite.com/servlets/httpproxy.htm](http://www.servletsuite.com/servlets/httpproxy.htm)

```
<servlet>
                <servlet-name>accertifyListingProxyServlet</servlet-name>
                <servlet-class>com.jsos.httpproxy.HttpProxyServlet</servlet-class>
                <init-param>
                        <param-name>host</param-name>
                        <param-value>https://abc.com/order</param-value>
                </init-param>
                <init-param>
                        <param-name>headers</param-name>
                        <param-value>true</param-value>
                </init-param>
                <init-param>
                        <param-name>encoding</param-name>
                        <param-value>utf-8</param-value>
                </init-param>
        </servlet> 
```

问候， 苏拉布

# groovy - 具有独特闭包的宇宙飞船运算符的 Groovy 参数

> ID：12568122
> 
> 赞同：1
> 
> 时间：2012-09-24T15:27:20.347
> 
> 标签：groovy, parameters, arguments, closures, unique

我对闭包不是很熟悉，而且我有一个，也许，nooby 问题。在 Groovy 文档中有一个类集合的 unique() 方法的示例。

其中一个使用宇宙飞船操作员。我知道在：

```
a <=> b 
```

spaceship 运算符在 a < b 时返回 -1，如果 a==b 则返回 0，如果 a>b 则返回 1，就像 compareTo 一样。

在带有闭包的 Groovy Unique 示例中：

```
assert [2,3,4] == [2,3,3,4].unique { a, b -> a <=> b } 
```

1.- a, b 参数在集合中是什么意思？“a”是[n]位置，“b”是[n+1]？

2.- 宇宙飞船运算符将返回 -1、0 或 1，这对 unique 方法有什么作用？仅使用 unique() 有什么区别吗？我尝试了两种方法，它一直给我返回相同的结果

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:54:58.847

1.  `a`并且`b`只是集合中的两个项目。它们的顺序无关紧要。您真正要做的是将闭包传递给`unique()`，而闭包定义了如何比较项目。`unique()`当需要比较两个项目时，Groovy 将调用闭包。

2.  在集合中的项目上`unique()`使用的无参数版本。`compareTo()`spaceship 运算符是另一种调用方式`compareTo()`，表示是，`unique { a, b -> a <=> b }`等同于`unique()`。

# javascript - javascript执行函数

> ID：12568123
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:27:20.317
> 
> 标签：javascript, function

我在 javascript 代码中看到了一段这样的示例代码。

```
 exec: function(myString){
    var: link1=link2;
    editor1=editor2;
    link1.execute();
    }, 
```

我想知道为什么语法是这样的： exec: function()? 这是否意味着仅在运行时执行此功能？为什么这里没有函数名？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:32:00.550

这是对象声明的一部分。`exec`没有特殊含义，它只是对象中属性的名称。

```
var obj = {
    exec: function(myString){
        var link1=link2;  // there shouldn't be a  `:` here.
        editor1=editor2;
        link1.execute();
    },
    name: 'Joe'
}; 
```

然后你可以这样做：

```
obj.exec('abc'); 
```

# python - 如何在同一字符串python上用不同的输入替换多个字符

> ID：12568124
> 
> 赞同：2
> 
> 时间：2012-09-24T15:27:21.867
> 
> 标签：python, string, replace

我正在尝试替换字符串中的多个字母，我希望用用户输入替换元音，并且我当前的代码用相同的字母替换所有元音，但是我想用不同的用户输入替换元音。下面是我想要的一个例子，以及下面的代码。

我想要的是

```
input1 = zz
input2 = xx
input3 = yolo

output = yzzlxx 
```

是）我有的

```
input1 = zz
input2 = xx
input3 = yolo

output = yzzlzz 
```

这是我的代码。

```
def vwl():
    syl1 = input("Enter your first syllable: ")
    syl2 = input("Enter the second syllable: ")
    translate = input("Enter word to replace vowels in: ")

    for ch in ['a','e','i','o','u']:
        if ch in translate:
            translate=translate.replace(ch,syl1,)

    for ch in ['a','e','i','o','u']:
        if syl1 in translate:
            translate=translate.replace(ch,syl2,)

    print (translate) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:31:34.163

该方法[`replace`](http://docs.python.org/library/stdtypes.html#str.replace)需要一个额外的参数`count`：

```
translate=translate.replace(ch,syl1,1)
break # finish the for loop for syl1 
```

只会替换 ch 的第一个实例，而 break 将确保您不会将任何后续元音替换为`syl1`.

相似地：

```
translate=translate.replace(ch,syl2,1)
break # finish the for loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:33:28.477

您可以使用正则表达式：

```
translate = re.sub('a|e|i|o|u',input1,translate,count=1)
translate = re.sub('a|e|i|o|u',input2,translate,count=1) 
```

例子：

```
>>> input1 = 'zz'
>>> input2 = 'xx'
>>> translate = 'yolo'
>>> import re
>>> translate = re.sub('a|e|i|o|u',input1,translate,count=1)
>>> translate
'yzzlo'
>>> translate = re.sub('a|e|i|o|u',input2,translate,count=1)
>>> translate
'yzzlxx' 
```

# ios - Xcode 构建失败：没有规则来处理架构 armv6 的文件

> ID：12568125
> 
> 赞同：1
> 
> 时间：2012-09-24T15:27:25.237
> 
> 标签：ios, xcode, armv7, armv6

在 Xcode 4.5 中构建我的 iOS 应用程序会导致每个源文件的依赖分析警告：

```
warning: no rule to process file of type sourcecode.c.objc for architecture armv6 
```

这最终会导致二进制文件丢失。有什么想法吗？

构建设置：*armv6 armv7*有效架构和*iOS 4.3*部署目标。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T15:30:06.887

Xcode 4.5 不再支持构建 armv6 二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:27:25.237

将**有效架构**设置为**armv7**。

# css - webkit不会转换

> ID：12568128
> 
> 赞同：0
> 
> 时间：2012-09-24T15:27:35.560
> 
> 标签：css, visual-web-developer

当我使用转换时，它适用于除 chrome 和 safari 之外的所有浏览器。它适用于其他一切。我发布了我需要帮助的部分。谢谢！

```
#top-nav{
background: #94b3c8;
text-align: cemter;
}

#top-nav dt {
display: inline-block;
padding-left: 30px;
font: 20px Tahoma;
color: white;
padding-bottom: 3px;
}

#top-nav a:active{
color: white;
text-decoration: underline;
}

#top-nav a:link{
color: white;
text-decoration: none;
}

#top-nav a:visited{
color:white;
text-decoration:none;
}

#top-nav a:hover{
color: white;
text-decoration: underline;
-webkit-transform: scale(1.2, 1.2);
-ms-transform: scale(1.2, 1.2);
-moz-transform: scale(1.2, 1.2);
-o-transform: scale(1.2, 1.2);
transform: scale(1.2, 1.2);
} 
```

导航 Html。我不认为这是问题所在。（尽管它可能与使用 dl 而不是 ul 有关）：

```
<nav id='top-nav'>
            <dl>
                <dt> <a href='index.html'> Home </a></dt>
                <dt> <a href='FAQ.html'> FAQ </a> </dt>
                <dt> <a href='contact.html'> Contact </a></dt>
            </dl>
        </nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:37:52.300

添加`display:block;`到`#top-nav a:link{`

演示：http:
[//jsfiddle.net/QaYx7/1/](http://jsfiddle.net/QaYx7/1/)

# mysql - 好友提要的查询优化 - MySQL

> ID：12568131
> 
> 赞同：1
> 
> 时间：2012-09-24T15:27:45.060
> 
> 标签：mysql, optimization, social-networking, social

我在朋友提要查询方面遇到了奇怪的麻烦 - 这是背景：

我有 3 张桌子

```
checkin - around 13m records
users - around 250k records
friends - around 1.5m records 
```

在签入表中 - 它列出了用户执行的活动。（这里有很多索引，但是user_id，created_at和（user_id，created_at）上有一个索引。users表只是基本用户信息user_id上有一个索引。friends表有user_id，target_id和is_approved。 (user_id, is_approved) 字段上有一个索引。

在我的查询中，我试图只删除任何用户的基本朋友提要 - 所以我一直在这样做：

```
SELECT checkin_id, created_at
FROM checkin
WHERE (user_id IN (SELECT friend_id from friends where user_id = 1 and is_approved = 1) OR user_id = 1)
ORDER by created_at DESC
LIMIT 0, 15 
```

查询的目标只是为所有用户的朋友以及他们的活动提取 checkin_id 和 created_at。这是一个非常简单的查询，但是当用户的朋友最近有大量活动时，这个查询非常快，下面是解释：

```
 id     select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
 1  PRIMARY     checkin     index   user_id,user_id_2   created_at  8   NULL    15  Using where
 2  DEPENDENT SUBQUERY friends  eq_ref    user_id,friend_id,is_approved,friend_looku...     PRIMARY     8   const,func  1   Using where 
```

作为解释，user_id 是 user_id 的简单索引 - 而 user_id_2 是 user_id 和 created_at 的索引。在friends表上，friends_lookup是user_id和is_approved的索引。

这是一个非常简单的查询并在以下位置完成：显示第 0 - 14 行（总共 15 行，查询耗时 0.0073 秒）。

但是，当用户的好友活动不是最近的并且没有很多数据时，相同的查询大约需要 5-7 秒，并且它具有与前一个查询相同的 EXPLAIN - 但需要更长的时间。

它似乎对更多的朋友没有影响，它似乎随着最近的活动而加速。

是否有任何提示可以让任何人优化这些查询，以确保无论活动​​如何，它们都以相同的速度运行？

**服务器设置**

这是一个运行 16GB RAM 的专用 MySQL 服务器。它运行的是 Ubuntu 10.10，MySQL 的版本是 5.1.49

**更新**

所以大多数人建议删除 IN 块并将它们移动到 INNER JOIN 中：

```
SELECT c.checkin_id, c.created_at
FROM checkin c
INNER JOIN friends f ON c.user_id = f.friend_id
WHERE f.user_id =1
AND f.is_approved =1
ORDER BY c.created_at DESC
LIMIT 0 , 15 
```

这个查询差了 10 倍——正如 EXPLAIN 中所报告的：

```
 id     select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
 1  SIMPLE  f   ref     PRIMARY,user_id,friend_id,is_approved,friend_looku...   friend_lookup   5   const,const     938     Using temporary; Using filesort
 1  SIMPLE  c   ref     user_id,user_id_2   user_id     4   untappd_prod.f.friend_id    71  Using where 
```

此查询的目标是在同一个查询中获取所有朋友活动以及您的活动（而不必创建两个查询并将结果合并在一起并按 created_at 排序）。我也无法删除 user_id 上的索引，因为它是另一个查询的重要部分。

有趣的部分是当我在一个没有很多活动的用户帐户上运行这个查询时，我得到了这个解释：

```
 id     select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
 1  SIMPLE  f   index_merge     PRIMARY,user_id,friend_id,is_approved,friend_looku...    user_id,friend_lookup  4,5     NULL    11  Using intersect(user_id,friend_lookup); Using wher...
 1  SIMPLE  c   ref     user_id,user_id_2   user_id     4   untappd_prod.f.friend_id    71  Using where 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:52:06.907

所以..你有一些事情发生在这里..

1.  在解释计划中......通常优化器会选择“key”中的内容，而不是可能的keys中的内容。这就是为什么当数据不是最新的时需要扫描更多记录的原因。

2.  仅在签入表（ user_id, created_at ）和 created_at 是必要的..您不需要 user_id 的另一个索引..优化器将使用 (user_id, created_at )，因为 user_id 是第一顺序。

尝试这个..

1.  使用朋友之间的连接和签入并删除 in 子句，这样朋友就成为驱动表，您应该首先在解释计划的执行路径上看到它。

2.  完成 1 后，您应该确保 checkin 在执行路径中使用 (user_id, created_dt) 索引。

3.  为签入表中的 user_id 为 1 的 OR 条件编写另一个查询。我认为您的数据集对于这两个集合应该是互斥的，然后应该没问题..否则您不需要在 IN 之后有 OR 条件条款放在首位。

4.  当您拥有 user_id, created_at 索引时，删除它自己的 user_id 索引。

- 您的目标是它使用键下的索引而不仅仅是可能的键。

这应该照顾较旧的非最近签到以及最近的签到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:51:19.767

我的第一个建议是删除依赖子查询并将其转换为联接。我发现 MySQL 不擅长处理这些类型的查询。尝试这个：

```
SELECT c.checkin_id, c.created_at
FROM checkin c
INNER JOIN friends f
   ON c.user_id = f.friend_id
WHERE f.user_id = 1
   AND f.is_approved = 1
ORDER by c.created_at DESC
LIMIT 0, 15 
```

我的第二个建议是，因为你有一个专用服务器，所以你的所有表都使用 InnoDB 存储引擎。确保调整默认 InnoDB 设置，尤其是 innodb_buffer_pool_size：[http ://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/](http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/)

# jquery - 使用 JQuery 使隐藏字段中的值无效的最佳反向兼容方法

> ID：12568133
> 
> 赞同：0
> 
> 时间：2012-09-24T15:27:51.207
> 
> 标签：jquery

我想知道使用 JQuery 使隐藏字段中的 value 属性无效的最佳反向兼容方法。

谢谢！

笔记：

```
$('#MyHiddenField').val(''); 
```

还不够好。

我需要一个好的老式空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:33:53.617

你不能。该`value`属性始终包含一个字符串。如果您为它分配除字符串之外的任何内容，它将被转换为字符串。

那是因为[`HTMLInputElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)接口的`value`属性是 type `DOMString`。无论是否为`hidden`输入，输入元素接口都会强制将任何设置为`input`'`value`属性的值设为 type `string`，否则它会使最终用户无法使用输入元素 - 毕竟这是输入元素的目的。`application/x-www-form-urlencoded`如果输入值不是字符串，也无法发出常规请求。

您可能正在寻找隐藏输入以外的其他内容，但是您可以在不对代码进行重大更改的情况下执行以下操作：在使用该值并将其分配给之前检查该值是否为空字符串`null`：

```
var v = $('#MyHiddenField').val();
if (v === '') v = null;
//use v as null in your code now 
```

如果你需要它来发布到服务器端，操作是一样的。将其作为空字符串发布，然后检查发布的数据是否为空字符串并将其分配给`null`.

# entity-framework - 实体框架：我如何处理 edmgen.exe 的输出？

> ID：12568137
> 
> 赞同：4
> 
> 时间：2012-09-24T15:28:02.817
> 
> 标签：entity-framework

我被迫为我正在编写的基于 EF 的应用程序使用旧版 SQL Server 2000 数据库。表已经存在，所以我需要生成`Entities`图层。我可以在 VS2010 中使用 MySQL 和最新版本的 SQL Server，但不能在 2000 中执行此操作。

为了解决这个问题，我遵循了一些教程，这些教程解释`csl`了`msdl`如何`ssdl`使用`edmgen.exe`.

这很好用。我现在有这些文件，例如`c:\temp`.

请问有人可以告诉我如何处理这些文件吗？我想对我编写的一个简单的控制台应用程序进行实体框架化。我能否以某种方式从这些文件中创建一个“ADO.NET 实体数据模型”，这样如果我一直使用 VS2010，我最终会得到什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:30:57.127

我得到了它的工作，这就是我所做的

1）使用 edmgen.exe 生成我的问题中提到的文件

```
"C:\windows\Microsoft.NET\Framework\v4.0.30319\edmgen.exe" /mode:fullgeneration /c:"Data Source=<your_server_here>; Initial Catalog=<your_catalog_here>; UID=<username>;PWD=<password>" /project:<vs2010_project_name> /entitycontainer:<project_name>Entities /namespace:<project_name>Model /language:CSharpEntityFramework 
```

2）按照这些说明“如何：在实体设计器 CTP2 中使用现有的 CSDL/MSL/SSDL 文件”——它实际上适用于 VS2008，但它也适用于我。

[http://blogs.msdn.com/b/dsimmons/archive/2007/12/07/how-to-use-your-existing-csdl-msl-ssdl-files-in-the-entity-designer-ctp2。 aspx](http://blogs.msdn.com/b/dsimmons/archive/2007/12/07/how-to-use-your-existing-csdl-msl-ssdl-files-in-the-entity-designer-ctp2.aspx)

3）我还有一个问题，因为我的旧数据库没有主键，所以我按照这些说明进行操作，这些说明也有效

[http://pratapreddypilaka.blogspot.in/2012/04/entity-framework-adding-datatable-with.html](http://pratapreddypilaka.blogspot.in/2012/04/entity-framework-adding-datatable-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:36:25.677

这些文件在[EF 的连接字符串](http://msdn.microsoft.com/en-us/library/cc716756.aspx)中被引用，EF在运行时使用它们来构建映射，但它仍然无法工作，因为 EF 不支持 SQL Server 2000（至少 EF 4.0 和更高版本）。EF 可以生成 SQL Server 2000 不支持的 SQL，并且在运行时会出现异常。

# google-app-engine - 无法使用 mvn gae:run 版本 maven-gae-plugin:0.9.4？

> ID：12568139
> 
> 赞同：4
> 
> 时间：2012-09-24T15:28:10.397
> 
> 标签：google-app-engine, maven-gae-plugin

我正在使用 maven gae 插件版本 0.9.4，每当我使用 mvn gae:run 时，我都会收到以下错误：

```
Usage: <dev-appserver> [options] <war directory>

Options:
 --help, -h                 Show this help message and exit.
 --server=SERVER            The server to use to determine the latest
  -s SERVER                   SDK version.
 --address=ADDRESS          The address of the interface on the local machine
  -a ADDRESS                  to bind to (or 0.0.0.0 for all interfaces).
 --port=PORT                The port number to bind to on the local machine.
  -p PORT
 --sdk_root=root            Overrides where the SDK is located.
 --disable_update_check     Disable the check for newer SDK versions.
 --generated_dir=dir        Set the directory where generated files are created. 
```

谷歌搜索发现了一些旧线程，这在 0.5 版本的插件中曾经是一个问题，但已修复。不知道为什么它会发生在我身上，以及周围的工作是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:49:18.857

我在 Windows 7 上使用 maven-gae-plugin 0.9.4 和 jdk1.6.0_23 时也遇到了这个问题。我所做的只是使用 gae-archetype-jsp 原型创建一个项目，然后使用`mvn gae:run`.

但是，我支持 maven-gae-plugin 到 0.9.2，问题就消失了！

# java - 更改单个 JList 值上的光标

> ID：12568141
> 
> 赞同：1
> 
> 时间：2012-09-24T15:28:25.850
> 
> 标签：java, swing, jlist

我有一个`JList`，它连接到一个 custom `DefaultListModel`，我想在组件的某些值上更改鼠标光标（取决于项目/值的类型）。在某些项目上它应该是默认光标，在其他一些项目上是手形光标。

我以为我可以在我的自定义中做到这一点`DefaultListCellRenderer`：

```
@Override
public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
    super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);

    MyItem item = (MyItem) value;
    setText(item.getDisplay());

    if (!item.getType().equals("i"))
        setCursor(new Cursor(Cursor.HAND_CURSOR)); // <-- doesn’t work

    return this;
} 
```

我的方法不起作用。任何建议如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:57:06.350

定位某个单元格时，您必须手动更新光标。这是一个小例子：

```
public static void main ( String[] args )
{
    final JFrame frame = new JFrame ();

    final JList list = new JList (
            new Object[]{ Cursor.DEFAULT_CURSOR, Cursor.CROSSHAIR_CURSOR, Cursor.TEXT_CURSOR,
                    Cursor.WAIT_CURSOR, Cursor.SW_RESIZE_CURSOR, Cursor.SE_RESIZE_CURSOR,
                    Cursor.NW_RESIZE_CURSOR, Cursor.NE_RESIZE_CURSOR, Cursor.N_RESIZE_CURSOR,
                    Cursor.S_RESIZE_CURSOR, Cursor.W_RESIZE_CURSOR, Cursor.E_RESIZE_CURSOR,
                    Cursor.HAND_CURSOR, Cursor.MOVE_CURSOR } );

    list.setCellRenderer ( new DefaultListCellRenderer ()
    {
        public Component getListCellRendererComponent ( JList list, Object value, int index,
                                                        boolean isSelected,
                                                        boolean cellHasFocus )
        {
            JLabel label = ( JLabel ) super
                    .getListCellRendererComponent ( list, value, index, isSelected,
                            cellHasFocus );
            label.setText ( "Cursor constant: " + value );
            return label;
        }
    } );

    list.addMouseMotionListener ( new MouseMotionListener ()
    {
        public void mouseDragged ( MouseEvent e )
        {
            updateCursor ( e );
        }

        public void mouseMoved ( MouseEvent e )
        {
            updateCursor ( e );
        }

        private void updateCursor ( MouseEvent e )
        {
            int cursor = ( Integer ) list.getModel ()
                    .getElementAt ( list.locationToIndex ( e.getPoint () ) );
            list.setCursor ( Cursor.getPredefinedCursor ( cursor ) );
        }
    } );

    frame.add ( list );

    frame.pack ();
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

# html - 右对齐两个 div

> ID：12568142
> 
> 赞同：1
> 
> 时间：2012-09-24T15:28:26.873
> 
> 标签：html, css

使用 CSS，是否可以右对齐两个 DIV？

我有一个标题，我想右对齐它下面的更多链接。该站点是内部站点，因此很遗憾，IE7 是主要浏览器。（我们会在年底前升级到IE8，部分正在使用Chrome）。我想避免使用javascript，但我对此持开放态度。

标题改变了，所以绝对宽度不起作用。它应该看起来像这样：

```
| Arbitrarily long title text
|                     more... 
```

我一直在寻找解决方案的谷歌，但到目前为止我发现的所有内容都与右对齐 DIV 的内容，或右对齐 DIV 到页面，或右对齐 DIV 内一个绝对大小的 DIV。

到目前为止，我可以向您展示我的努力，但由于它们都不起作用，我认为它们没有多大用处。

```
<html>
    <body>

        <div style="float:left;">
            Arbitrarily long title
            <div style="float:right">more...</div>
        </div>

        <div style="width:0px; overflow:visible; white-space:nowrap;">
            Arbitrarily long title
            <div style="float:right">more...</div>
        </div>

        <!-- This sort of simulates what I want, but the title length is arbitrary and I don't want to have to measure the text -->
        <div style="width:120px;">
            Arbitrarily long title
            <div style="float:right">more...</div>
        </div>

    </body>
</html> 
```

如果有人知道重复的问题，我很想了解您的 Google-fu 的秘密！

**根据要求编辑**
图像。该链接带有红色边框。（我必须将 margin-left 设置为 70px 才能实现这种效果。）

![在此处输入图像描述](../Images/77cb039dd891d0f6b2cb41841d358f7e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:34:22.243

```
<div style="float:left; position: relative">
  <div>Arbitrarily long title</div>
  <div style="position:absolute; right: 0">more...</div>
</div> 
```

[http://jsbin.com/efixij/7/edit](http://jsbin.com/efixij/7/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:39:18.753

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:46:38.073

This might not be very useful but give it a look: Align main Div content to left and then the "more" div to righ as here :

```
<div style="float: left;">     
    <div>
        Arbitrarily extra extra long title here
    </div>    
    <div style="float:right;">
        more...
    </div> 
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:58:00.093

```
<div>
    <div> Business area </div>
    <div> Inernal Audit </div>
    <div style="text-align: right;"><a href="#"> More... </a></div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T16:03:31.780

```
<div class="one">
        Arbitrarily long title Arbitrarily long title
        <div class="two">more...</div>
    </div>

.one{
  width:auto; 
  float:left;
  border:thin red solid;
  margin:5px;
}
.two{
  float:right;
} 
```

​<a href="http://jsfiddle.net/afshinprofe/tNRAr/1/" rel="nofollow">DEMO

# java - 是否需要转义 Accept 标头？

> ID：12568143
> 
> 赞同：3
> 
> 时间：2012-09-24T15:28:29.407
> 
> 标签：java, jersey, security

我有一个 Jersey 应用程序，它通过我们公司的网站漏洞工具运行。它带来了一个非常奇怪的漏洞。如果您发送此标头：

```
"*/*'"!@$^*\/:;.,?{}[]`~-_<sCrIpT>alert(81363)</sCrIpT>" 
```

您实际上在响应中将其取回并且它没有被转义。有人认为这是个问题吗？

以下是实际响应：

```
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)
Accept: */*'"!@$^*\/:;.,?{}[]`~-_<sCrIpT>alert(81363)</sCrIpT>
Pragma: no-cache
... 
```

还有一件事情。我刚刚升级到球衣 1.14，它仍然这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:35:29.993

你的意思是在产生的错误信息中？就像是：

```
< HTTP/1.1 400 Bad Request
< Content-Type: text/plain
< Date: Thu, 27 Sep 2012 14:30:30 GMT
< Connection: close
< Transfer-Encoding: chunked
< 
* Closing connection #0
The HTTP header field "Accept" with value "..." could not be parsed 
```

?

如果是这样，我们绝对可以做点什么，请在[http://java.net/jira/browse/JERSEY](http://java.net/jira/browse/JERSEY)将其报告为新的 RFE 。（我无法重现与此问题相关的任何其他内容）。

谢谢！

# java - SOAP 信封响应错误：读取 XMLStreamReader 时出错

> ID：12568148
> 
> 赞同：7
> 
> 时间：2012-09-24T15:28:56.900
> 
> 标签：java, android, web-services, soap, axis

我在下面有以下 Android 应用程序代码。我正在尝试通过 HTTP 连接到 Web 服务。Web 服务使用 apache 轴。但是，我在响应中遇到了错误“读取 XMLStreamReader 时出错”。我真的被困住了，不知道我能做什么。会不会是服务器端和客户端使用了不同版本的 HTTP 客户端和 SOAP？对此的任何帮助将不胜感激。Web 服务非常简单：sayHello 方法显示 arg0=some_string 中给出的参数

```
public class MainActivity extends Activity {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    BufferedReader in = null;
    try {
        HttpClient client = new DefaultHttpClient();
        HttpPost request = new HttpPost(
                "http://10.0.0.63:8080/archibus/cxf/HelloWorld/sayHello");
        request.addHeader("Content-Type", "text/xml");
        List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("arg0", "testing"));
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
        request.setEntity(formEntity);

        HttpResponse response = client.execute(request);

        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();

        String page = sb.toString();
        // Log.i(tag, page);
        System.out.println(page);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T04:42:15.197

您的 WebService 请求构造不正确。您实际上是在创建表单请求，而不是实际的 SOAP 请求。

SOAP 请求是具有信封和正文的 XML 文档，请参见此处的示例[SOAP Message Example on Wikipedia](http://en.wikipedia.org/wiki/SOAP#Example_message)。

您在此处实际执行的是模拟提交表单而不是 SOAP 调用的标准 HTTP 调用。

你有两个解决方案：

1- 您可以通过手动创建 XML 文档并提交它来模拟 SOAP 客户端的行为。除了将正确的 XML 文档设置为请求正文之外，不要忘记设置正确的标头：**SOAPAction、Content-Type 和 Content-Length**

```
RequestEntity requestEntity = new StringRequestEntity("<?xml version=\"1.0\"?><soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"><soap:Header></soap:Header><soap:Body><m:GetStockPrice xmlns:m=\"http://www.example.org/stock\"><m:StockName>IBM</m:StockName></m:GetStockPrice></soap:Body></soap:Envelope>");
    post.setRequestEntity(requestEntity ); 
```

另外不要忘记使用您的 Web 服务正在使用的正确名称空间更改上面的名称空间 (m)。以及您尝试调用的操作的操作名称 ( **GetStockPrice )。**也不要忘记参数名称和类型。

2-您可以使用 Apache Axis 生成客户端并将该客户端与您的应用程序一起使用

有关更多信息和推荐的客户端，请参阅此线程[如何在 Android 上调用 SOAP Web 服务](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T17:46:05.253

Shoukry K 是对的。您已经完成了一个 HTTP POST 请求。这不是一个肥皂网络服务。如果您想知道如何调用网络服务，请点击链接。[http://www.youtube.com/watch?v=v9EowBVgwSo](http://www.youtube.com/watch?v=v9EowBVgwSo)。确保下载最新的 ksoap jar 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:52:30.743

使用 K-SOAP for Android 的示例代码。

```
private void sendSOAPmsg(DamageAssessmentFormPojo pojo) throws IOException, XmlPullParserException, SoapFault {
        SoapObject request = new SoapObject(WEBSERVICE.NAMESPACE, WEBSERVICE.METHOD_NAME_SUBMIT_REPORT);
        request.addProperty("xmlBytes", Util.getSoapBase64String(pojo));
        request.addProperty("fileName", IO.DefaultReportName);
        request.addProperty("deviceId", AppConstants.IMEI != null ? AppConstants.IMEI : Util.getIMEI(this));

        SoapPrimitive response = sendSOAPEnvelope(request, WEBSERVICE.SOAP_ACTION_SUBMIT_REPORT);

        if (response.toString().equalsIgnoreCase("true")) {
            Logger.logInfo("REPORT SENT SUCCESSFULLY", "WEB-SERVICE");
            pojo.setReportSent(true);
            IO.writeObject(pojo.getReportsFolderPath() + IO.DefaultReportName, pojo);
        } else {
            Logger.logInfo("REPORT SENT FAILED", "WEB-SERVICE - RESONSE " + response.toString());
        }
    }

    private SoapPrimitive sendSOAPEnvelope(SoapObject request, String soapAction) throws IOException, XmlPullParserException, SoapFault {
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WEBSERVICE.URL);

        androidHttpTransport.call(soapAction, envelope);
        SoapPrimitive response = (SoapPrimitive) envelope.getResponse();

        return response;

    }

    private boolean sendSOAPimage(String strImg, File pFile) throws IOException, XmlPullParserException {
        boolean result = false;

        if (strImg != null) {
            SoapObject request = new SoapObject(WEBSERVICE.NAMESPACE, WEBSERVICE.METHOD_NAME_SUBMIT_IMAGE);
            request.addProperty("imageBytes", strImg);
            request.addProperty("fileName", pFile.getName());
            request.addProperty("deviceId", AppConstants.IMEI != null ? AppConstants.IMEI : Util.getIMEI(this));

            SoapPrimitive response = sendSOAPEnvelope(request, WEBSERVICE.SOAP_ACTION_SUBMIT_MAGE);

            if (response.toString().equalsIgnoreCase("true")) {

                result = true;

                Logger.logInfo("IMAGE SENT SUCCESSFULLY", "WEB-SERVICE");

            } else {
                Logger.logInfo("IMAGE SENT FAILED", "WEB-SERVICE - RESONSE " + response.toString());
            }

        }

        return result;
    } 
```

//--------Util 辅助方法

```
public static String getSoapBase64String(DamageAssessmentFormPojo pojo) {

        XmlSerializer xmlSerializer = Xml.newSerializer();
        StringWriter writer = new StringWriter();

        try {
            xmlSerializer.setOutput(writer);
            xmlSerializer.startDocument("UTF-8", true);

            xmlSerializer.startTag("", XMLTags.TAG_ROD);
            xmlSerializer.startTag("", XMLTags.TAG_ORDER);

            xmlSerializer.startTag("", XMLTags.TAG_SEVERITY);
            xmlSerializer.text(pojo.getCheckedSeverity_Complexity());
            xmlSerializer.endTag("", XMLTags.TAG_SEVERITY);

            xmlSerializer.startTag("", XMLTags.TAG_DAMAGE_TYPE);
            StringBuilder builder = new StringBuilder();
            for (String str : pojo.getCheckedDamageTypes()) {

                builder.append(str + " , ");

            }
            xmlSerializer.text(builder.toString());
            xmlSerializer.endTag("", XMLTags.TAG_DAMAGE_TYPE);

            xmlSerializer.startTag("", XMLTags.TAG_ENV_IMPACT);
            xmlSerializer.text(pojo.getCheckedEnvImpact());
            xmlSerializer.endTag("", XMLTags.TAG_ENV_IMPACT);

            xmlSerializer.startTag("", XMLTags.TAG_ENV_COMMENT);
            xmlSerializer.text(pojo.getEnvImpactComments());
            xmlSerializer.endTag("", XMLTags.TAG_ENV_COMMENT);

            xmlSerializer.startTag("", XMLTags.TAG_TRAVEL_CONDITION);
            xmlSerializer.text(pojo.getCheckedTravelCond());
            xmlSerializer.endTag("", XMLTags.TAG_TRAVEL_CONDITION);

            xmlSerializer.startTag("", XMLTags.TAG_TRAVEL_COMMENT);
            xmlSerializer.text(pojo.getTravCondComments());
            xmlSerializer.endTag("", XMLTags.TAG_TRAVEL_COMMENT);

            xmlSerializer.startTag("", XMLTags.TAG_ORDER_DATE);
            xmlSerializer.text(pojo.getDateTime());
            xmlSerializer.endTag("", XMLTags.TAG_ORDER_DATE);

            xmlSerializer.endTag("", "Order");
            xmlSerializer.endTag("", "ROD");

            xmlSerializer.endDocument();

        } catch (IllegalArgumentException e) {
            Logger.logException(e);
        } catch (IllegalStateException e) {
            Logger.logException(e);
        } catch (IOException e) {
            Logger.logException(e);
        }

        return Base64.encode(writer.toString().getBytes());
    } 
```

# jsf-2 - 使用 primefaces 确认对话框组件显示来自托管 bean 的消息

> ID：12568162
> 
> 赞同：2
> 
> 时间：2012-09-24T15:29:47.877
> 
> 标签：jsf-2, xhtml, primefaces

在我的页面中，我试图在单击按钮后显示一个确认对话框。在确认对话框中，我使用属性消息来显示它，单击按钮后该消息将被取值。所以我这样做了：

```
 <p:commandButton value="Delete" update="testPlanetree" id="deleteBtn" 
   disabled="#{projectTestManagementMB.disable}" oncomplete="deleteConfirmation.show()"
    action="#{projectTestManagementMB.testFn}"/>

 <p:confirmDialog id="confirmDialog" message="# 
  {projectTestManagementMB.deleteConfirmationMsg}"  
    header="Confirming Deleting Process" severity="alert" 
   widgetVar="deleteConfirmation">  

    <p:commandButton id="confirm" value="Yes Sure" update="messages"   
     oncomplete="deleteConfirmation.hide()"    />  

      <p:commandButton id="decline" value="Not Yet" 
       onclick="deleteConfirmation.hide()" type="button" />   

     </p:confirmDialog> 
```

ProjectTestManagementMB 托管 Bean：

```
 private String deleteConfirmationMsg;//with getters and setters 
    public void testFn(){
       deleteConfirmationMsg="do you want to delete ...";
    } 
```

问题是`deleteConfirmationMsg` 从不取值“你想删除......”（总是空的）

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T15:54:41.873

`<p:confirmDialog>`已经在返回带有表单和对话框的页面的第一个 HTTP 请求上生成了它的 HTML 表示。它只是被 CSS 隐藏，应该被 JS 显示/隐藏。当您之后在 bean 操作方法中更改确认消息时，只要您不对其进行 ajax 更新，它就不会反映在生成的 HTML 输出中。

因此，为了使更改的消息得到反映，您需要先更新`<p:confirmDialog>`客户端中的 HTML 表示，然后再将其显示在`oncomplete`. 为此，您可以使用`update`应该显示对话框的命令按钮的属性。

```
<p:commandButton ... update="confirmDialog testPlanetree"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:46:37.620

试试这个我应该工作：

```
<p:commandButton value="Delete" update="testPlanetree" id="deleteBtn" actionListener="#
         {projectTestManagementMB.testFn}"
       disabled="# {projectTestManagementMB.disable}" 

       oncomplete="deleteConfirmation.show()"  /> 
```

# .htaccess - 如何将 .htaccess 重定向用于部分路径？

> ID：12568165
> 
> 赞同：10
> 
> 时间：2012-09-24T15:29:55.933
> 
> 标签：.htaccess, redirect

我必须在我的网站上调整一些路径，并且我需要使用 .htaccess 来重定向项目，以防用户访问旧网址。

例如，我的旧网址（相对）可能是：

```
/old-path/page1.php
/old-path/page2.php
/old-path/page3.php
etc... 
```

我必须将路径（对于本示例）更改为 new-path 并且我需要调整 .htaccess 以便任何使用 .../old-path/... 访问任何页面的人都将被重定向到

```
.../new-path/... 
```

另外，这会满足 301 还是我需要列出每一页？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-24T16:00:27.660

您可以使用任一 mod+别名：

```
Redirect 301 /old-path /new-path 
```

或使用 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?old-path/(.*)$ /new-path/$1 [L,R=301] 
```

这些可能位于文档根目录或服务器/虚拟主机配置中的 htaccess 文件中。如果您已经在某处有重写规则，您可能只想坚持使用 mod_rewrite，因为在使用 mod_rewrite 时使用 mod_alias 重定向有时会产生冲突的结果。

# sql-server-2008 - 防火墙不会打球

> ID：12568170
> 
> 赞同：0
> 
> 时间：2012-09-24T15:30:12.940
> 
> 标签：sql-server-2008, windows-firewall

我在 Windows 2012 上运行 SQL Server 2008 Express ......或者至少我正在尝试:)

我的问题是我已经打开了我认为需要的端口，但我仍然无法从 Visual Studio 连接到数据库。作为证据，我有我的防火墙设置的屏幕截图：

![在此处输入图像描述](../Images/893ba8a6bf925dffeceb7a380f10c7a3.png)

如果我关闭防火墙，一切正常，但谁想要在连接到互联网时这样做？

所以我想知道到底出了什么问题？那是一些被阻塞的任意端口吗？这是服务器上的一项功能（可能与 2008 年相同？）

大图：[http ://bildr.no/view/1280743](http://bildr.no/view/1280743)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:53:20.970

SQL Server Express 通常作为命名实例安装，默认情况下使用动态端口。在大多数情况下，它将使用 1433（但并非总是如此）。您可能需要逐步完成：

[http://msdn.microsoft.com/en-us/library/ms177440(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms177440(v=sql.100).aspx)

看看您是否可以将服务分配给固定端口。

# javascript - jQuery: .each .data('key') 给出“Uncaught TypeError: Object # 没有方法‘数据’”

> ID：12568174
> 
> 赞同：0
> 
> 时间：2012-09-24T15:30:16.300
> 
> 标签：javascript, jquery

```
$.each($('input[value|="Disable Login"]'), function() {
    alert(this.data('id'));
}); 
```

给

> “未捕获的类型错误：对象 # 没有方法‘数据’”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:43:43.097

您可能正在寻找：

```
$('input[value|="Disable Login"]').each(function(){
    alert($(this).attr("id"));
}); 
```

此外，您可以考虑将其应用于文档的子部分。像这样 ：

```
$('input[value|="Disable Login"]',$("#myform")).each(function(){
    alert($(this).attr("id"));
}); 
```

# c++ - 错误：“）”标记之前的预期主表达式|

> ID：12568176
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:30:28.407
> 
> 标签：c++, c, expression, calculator, operation

所以我输入了这段代码并出现了这个错误......请帮助......并提前感谢:)

```
double num1;
double num2;
double operation;
//input

   cout<<"Type The First number\n";
   cin>>num1;
   cout<<"Type Second number\n";
   cin>>num2;
   cout<<"Type The Operation..\n";
   cin>>operation;
   //Brain
   if (operation == + )
    {
      cout<<"The Answer is..."<<num1+num2; 
```

并且错误是错误：')'令牌之前的预期主表达式|

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:32:17.480

您正在将 a`double`与 a进行比较`+`。这不是 PHP。:)

你的意思

```
std::string operation;

//...
if ( operation == "+" )
    //.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:33:27.687

编译器不理解这个

```
if (operation == + ) 
```

您可能想声明`operation`为 a `char`，然后像这样测试它

```
if (operation == '+' ) 
```

# firefox - 如何生成设置对话框（并保存值）

> ID：12568181
> 
> 赞同：1
> 
> 时间：2012-09-24T15:31:12.880
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

这是我使用 Firefox AddOn SDK 的第一步。我想要创建的是一个简单的“设置对话”。我想到了一个包含值表单和提交按钮的 html 页面。在第一个 mozilla 教程之后，我创建了一个小部件：

```
var widget = require('widget').Widget({
  label: 'Settings',
  id: 'settings',
  //panel: text_entry
  contentURL: data.url('images/stgfavicon.ico'),
  contentScriptFile: data.url('scripts/submit.js'),
  onClick: function() {
    tabs.open(data.url('forms/settings.html'));
  }
}); 
```

但是由于*settings.js*不是 contentScriptFile 我在*settings.html*和*settings.js*之间没有通信。是否有可能在没有一些（看起来很复杂的）消息传递系统的情况下完成这项工作？以及如何最好地保存这些值？一个 JSON 文件？一些链接/示例/API 名称会对我有很大帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:46:59.227

那是因为您试图将脚本附加到小部件（不是 HTML 文件）。您需要在选项卡打开后将其附加到实际的 html 文件中。

```
tabs.open({
    url: data.url('forms/settings.html'),
    onOpen: function onOpen(tab) {
        tab.attach({ contentScriptFile: data.url('scripts/submit.js'); });
    }
}); 
```

我没有测试过，所以可能有错误。

如果这些设置不会经常调整，您还应该查看 simple-prefs 模块。

# c# - 使用 log4net 以 loglevel 作为参数记录

> ID：12568183
> 
> 赞同：12
> 
> 时间：2012-09-24T15:31:18.210
> 
> 标签：c#, log4net

有没有办法使用 log4net 登录并使用 LogLevel 作为参数？

也就是说，而不是写

```
Log.Debug("Something went wrong"); 
```

我想写这样的东西：

```
Log("Something went wrong", LogLevel.Debug); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T15:41:39.797

根据[此处](http://logging.apache.org/log4net/release/sdk/index.html)的 log4net 文档（查看下方`log4net.Core.ILogger`），您可以在 ILogger 界面上使用 Log 方法。

```
private static ILog logger = 
    LogManager.GetLogger(
    System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

logger.Logger.Log(logger.GetType(),LogLevel.Debug,"Something went wrong", ex); 
```

log4net 使用 Type 参数来确定调用堆栈中日志记录代码和应用程​​序代码之间的边界。如果您启用了方法名称日志记录，log4net 会向上导航调用堆栈，直到堆栈上 MethodInfo 的 DeclaringType 等于传入的类型（上述 Log 调用中的类型）。当它找到DeclaringType 时，调用堆栈中的下一个方法就是实际调用方法（应用程序代码）。

您还可以使用采用`LoggingEvent`结构的重载。

该文档还说 Log 方法旨在由包装器使用。我不知道这是否应该被视为“信息”消息或强烈建议不要直接使用它。

如果您想通过 Log 方法进行所有日志记录调用，您可以将获取记录器的代码更改为如下所示（这样您就可以消除对每个 Log 调用使用 Logger 属性）：

```
private static ILogger logger = 
    LogManager.GetLogger(
    System.Reflection.MethodBase.GetCurrentMethod().DeclaringType).Logger;

logger.Log(logger.GetType(),LogLevel.Debug,"Something went wrong", ex); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-12T05:47:04.997

扩展@wageoghe 的答案，我编写了以下扩展方法：

```
public static bool Log(this ILog log, Level level, string message, Exception exception = null)
{
    var logger = log.Logger;
    if (logger.IsEnabledFor(level))
    {
        logger.Log(logger.GetType(), level, message, exception);
        return true;
    }

    return false;
}

public static bool LogFormat(this ILog log, Level level, string messageFormat, params object[] messageArguments)
{
    var logger = log.Logger;
    if (logger.IsEnabledFor(level))
    {
        var message = string.Format(messageFormat, messageArguments);
        logger.Log(logger.GetType(), level, message, exception: null);

        return true;
    }

    return false;
} 
```

这些允许您拨打电话，例如：

```
Log.Log(Level.Debug, "Something went wrong", myException); 
```

或格式化的消息：

```
Log.Log(Level.Info, "Request took {0:0} seconds", duration.TotalSeconds); 
```

# html - 即使没有本地编译，M Project 也可以用来创建移动 Web 应用程序吗？

> ID：12568189
> 
> 赞同：0
> 
> 时间：2012-09-24T15:31:38.180
> 
> 标签：html, node.js, jquery-mobile, javascript-framework

我正在寻找一个 HTML 5 / 移动 Web 应用程序框架并遇到了 M 项目。我有兴趣深入研究框架，但在我投入时间之前，我首先想知道 M Project 是否适用于不会被原生编译的移动 Web 应用程序？它甚至打算用于非本机编译的移动网络应用程序吗？提前谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:12:24.203

该平台适用于非本地应用程序。根据网站（http://www.the-m-project.org/），框架代码只有66Kb。

# android - android 应用程序类 onLowMemory

> ID：12568197
> 
> 赞同：0
> 
> 时间：2012-09-24T15:32:03.983
> 
> 标签：android, android-applicationinfo

我有一个应用程序，它在我的应用程序类中保存一些对象以供全球使用。我不希望 Application 类被杀死（因为我需要保存在其中的信息），所以我重写了该`onLowMemory()`函数以创建一个`Thread.sleep(1000)`

如果内存仍然很低，当 Application 类唤醒时会发生什么？会再次调用 onLowMemory() 吗？

只要我的应用程序及其后台服务正在运行，确保这个 Application 类不会被系统杀死的正确架构是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:37:39.840

不要那样做！

1.  不要阻塞系统调用
2.  这不会阻止系统杀死您的应用程序
3.  内存仍然很低

没有办法确保您的应用程序不会被杀死。将您的数据保存在共享首选项、文件或 sqlite 数据库中，以适合您的需要，但不要依赖应用程序实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:41:06.927

您不应该相信该函数被调用。Android 可以随时杀死你的应用程序，只要它在后台，你不能真正阻止他甚至尝试。它可能会调用该函数，以便您的应用程序可以清除一些缓存或执行它可以做的任何事情来释放一些内存。这可以从文档中得出结论。

[http://developer.android.com/reference/android/app/Application.html#onLowMemory](http://developer.android.com/reference/android/app/Application.html#onLowMemory) ()

尽量避免依赖它。尽你所能准备你的应用程序以打开或类似的方法`OnPause`，这些方法肯定会被调用。这意味着保存变量、数据或对文件或数据库很重要的任何其他内容。`OnStop``onDestroy`

# sql - SQL Server 嵌套集与 Hierarchyid 性能

> ID：12568201
> 
> 赞同：7
> 
> 时间：2012-09-24T15:32:15.787
> 
> 标签：sql, sql-server, performance, nested-sets, hierarchyid

我有一个分层数据。最常见的查询是“获取节点的父分支”和“获取节点的子树”。更新和插入不太可能经常发生。我在嵌套集和hierarchyid之间进行选择。就我而言，在索引列上搜索嵌套集应该非常快，但是，我不知道hierarchyid的内部实现。为了达到可能的最高性能，我应该使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:48:24.443

在不同的项目中使用了 HierarchyID 和自引用表后，我想说 HierarchyId 在易于查询方面胜出。
请参阅[使用层次结构方法查询层次结构表以了解使用 HierarchyID](http://msdn.microsoft.com/en-us/library/bb677191.aspx)的内置查询方法有多容易。

# ruby - CoffeeScript（或任何字符串）上用于 Ruby/Rake 的 C/C++ 预处理器

> ID：12568203
> 
> 赞同：0
> 
> 时间：2012-09-24T15:32:20.100
> 
> 标签：ruby, coffeescript, rake, preprocessor, c-preprocessor

`#ifdef`我有一个 Coffeescript/Javascript 项目，它是一个大型 Web 应用程序，我正在使用 C++ 预处理器将文件与一些`#include`指令拼凑在一起。它极大地简化和组织了我的资源。我正在[`rake`](http://rake.rubyforge.org/)用作我的构建工具。

我可以将该`cpp -E -Xpreprocessor`指令称为来自 rake 的系统调用，但我希望能够在 Rake 脚本本身中使用它。

*例如当前使用情况*

```
pre_processed_code = `cpp -E -Xpreprocessor -DDebug app.coffee` 
```

是否可以运行字符串的 C++ 预处理器的任何 ruby​​ 实现，或者任何人都可以建议更好的预处理解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:52:28.210

[Rails 使用资产管道](http://guides.rubyonrails.org/asset_pipeline.html)解决了此类问题。它可以编排 CoffeeScript -> JavaScript 转换，并且您可以轻松地包含源文件（或目录树）以将它们连接和缩小。

Sprockets 支持链接过滤器。例如，`foo.js.coffee`将被视为生成 JavaScript 的 CoffeeScript，它本身可能包含其他依赖项并且是缩小的候选对象。为条件编译引入外部变量、从数据库中内联对象以及其他古怪的行为可以很容易地通过链接其他过滤器来适应，例如`foo.js.coffee.erb`：

```
<% if environment == 'production' %>
log = (args...) ->
  # no-op
<% else %>
log = (args...) ->
  console.log(args...)
<% end %> 
```

所有这一切通常在开发中即时执行，并通过生产中的编译步骤执行，其中单个源文件在交付到 Web 服务器之前被处理、合并和优化。这也适用于 CSS 预处理器和 JavaScript 模板语言——如果有人想要编译一个与 Web 相关的东西，那么在某个地方可能会支持它。

您可能没有使用 Rails，但这不应该阻止您利用所有这些工作：资产管道实际上是一个名为[Sprockets](https://github.com/sstephenson/sprockets)的独立 gem 。您可能会用它代替现有的构建过程。这不是 C++ 预处理器，但它是许多其他人为解决此问题所做的工作。

# mongodb - Mongodb在php中的简单查找

> ID：12568204
> 
> 赞同：0
> 
> 时间：2012-09-24T15:32:27.807
> 
> 标签：mongodb, yii

第一次使用 mongodb 并遇到一些应该很简单但我无法让它工作的东西。我有一个 Persons 集合，看起来像：

```
{
    "_id": {
        "$oid": "50607a9a9a3f5fd402000000"
    },
    "id": 1,
    "firstname": "Cool",
    "lastname": "Dude",
    "birthday": null,
    "country": null,
    "friends": [],
    "comments": [],
    "wines": [],
    "avatar": null,
    "_status": null,
    "_salt": "1d8ebb2deca53a21c4a47422ecf2ae1a",
    "_password": null,
    "update_time": 1348500122,
    "creation_time": 1348500122
}
{
    "_id": {
        "$oid": "50607aed9a3f5fd402000001"
    },
    "id": 2,
    "firstname": "Alex",
    "lastname": "Rodriguez",
    "birthday": null,
    "country": null,
    "friends": [],
    "comments": [],
    "wines": [],
    "avatar": null,
    "_status": null,
    "_salt": "5e751eec310808fca425537cdc8a8453",
    "_password": null,
    "update_time": 1348500205,
    "creation_time": 1348500205
} 
```

使用以下代码，我期望找到我正在寻找的记录：

```
$person = new Persons();

$person = $person->find(array('firstname' => 'Alex'));

var_dump($person); 
```

我认为我正在使用来自 Yii 框架的 EMongoDocument 类。刚从这里开始，对mysql很习惯。

这将返回 Cool Dude 而不是 Alex Rodriguez。

感谢您的任何帮助或指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:21:39.093

好的，我需要使用 findByAttributes();

```
$person = $person->findByAttributes(array('firstname' => 'Cool')); 
```

# iphone - 在英国的 iPhone 上查看时，从 SSRS 呈现的 Excel 丢失了货币符号

> ID：12568206
> 
> 赞同：2
> 
> 时间：2012-09-24T15:32:29.687
> 
> 标签：iphone, ios5, reporting-services

我们的报告会动态格式化货币。所以在结果集中有一个名为 CurrencyFormatString 的列。这通过 FORMAT(FieldName,CurrencyFormatString) 应用于适当的字段

在将报告呈现到 Excel 并在 iPhone 上查看文件之前，一切似乎都运行良好。对于我们的英国客户，他们看到的货币符号是 $ 而不是 £。当然，它在 Andriod 设备上运行良好。

如果我采用正确的格式掩码，并手动将其放入 Excel 单元格。保存并发送给我自己，它工作正常。覆盖格式的单元格上的货币设置似乎发生了一些事情。

这出现在列 CurrencyFormatString 中： £#,##0.00;(£#,##0.00)

导出到 Excel，打开并右键单击您看到的属性：[$-10409]£#,##0.00;-£#,##0.00

当 SSRS 呈现 Excel 时。我不知道括号中的第一部分是什么，我猜它与设置为 $ 的货币设置有关。

关于获得正确格式以传播到 iPhone 的任何想法？这是使用 SSRS 2008。我还没有尝试过更新版本的 SSRS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:45:04.827

您可以通过导出 Excel 公式来欺骗 Excel。

在 SSRS 报告中，如果您使用类似这样的公式：“=TEXT(" + FieldName + ",""£#,##;-£#,##"")"

如果您在 html 渲染器中查看报告，它将如下所示： =TEXT(55.00,"£#,##;-£#,##")

导出到 excel 时，excel 公式解析器将启动，您将获得 55.00 英镑

我知道丑陋的解决方法。-1 到 iPhone 的 Excel 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:29:08.413

这个问题的答案似乎是，你不能。

似乎 SQL Server 2012 中包含的 SSRS 现在默认以 .xslx 呈现，本机 iPhone 电子邮件应用程序无论如何都无法打开。

如果您、您的公司或客户使用 Android，您应该没问题。

# mysql - Mysql 使用 WHERE 更新

> ID：12568208
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:32:38.953
> 
> 标签：mysql

我正在尝试调整以下查询以`col`在多行中添加 1。

```
UPDATE table
SET col=col+1
WHERE id in (1,2,3) 
```

它不起作用，我认为因为我没有`col`使用相同的数据进行更新，它会将 1 添加到已经存在的数据中。

我可以使以下查询起作用，但不知道如何在不使用多个查询替换上述单个查询的情况下实现我想要的。

```
UPDATE table
SET col=col+1
WHERE id =1 
```

...成功将 1 添加到第 1 行的 col。

```
UPDATE table
SET col=9
WHERE id in (1,2,3) 
```

...成功使 col = 9 在第 1,2 和 3 行

有没有办法调整第一个查询工作？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:36:58.233

```
UPDATE table
SET col = case when id = 1 
               then col+1
               else 9
          end
WHERE id in (1,2,3) 
```

# java - 如何在 Eclipse 中为 jar 附加 javadoc？

> ID：12568210
> 
> 赞同：7
> 
> 时间：2012-09-24T15:32:43.747
> 
> 标签：java, eclipse

有什么方法可以`struts.jar`在 Eclipse 中附加 javadoc，就像我们为核心 Java 附加它一样，核心 Java 是在 JDK 下分发的 zip 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:44:24.597

要将文档添加到库中，请执行以下操作。

项目（右键）->属性->构建路径->库->JRE系统库然后展开每个api并添加API的位置。

现在选择要为其添加文档的库。

单击编辑，然后导航浏览器以选择文档目录的目录。请尝试仅使用 Directory，而不是 index.html 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:36:11.267

Right-click on the jar, click "Properties", then fill the javadoc location.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T18:09:19.700

首先，我们需要下载我们正在使用的任何 jar 文件的源文件。之后，我们可以通过双击使用的 java 类名，然后单击链接 attach java source 然后选择源文件的相应 jar 和 zip 来将该 zip 或 jar 文件附加到 eclipse。在这种情况下，有时在附加 java 源 zip 或 jar 源文件未打开后，您可以使用命令提示符下的 jar 命令通过获取要包含的包来创建 jar。创建此 jar 后，我们可以通过上一步附加。源文件肯定是打开的。

# java - jpa 验证分离的对象

> ID：12568211
> 
> 赞同：0
> 
> 时间：2012-09-24T15:32:51.783
> 
> 标签：java, hibernate, validation, bean-validation

我正在尝试使用 jpa 验证来验证新的 bean 对象。

我收到此错误：

```
2012-09-24 11:19:55,584 WARN  [AbstractModel:32] The object is not persisted yet, this operation requires the object to already be persisted.
java.lang.Exception
        at org.oscarehr.common.model.AbstractModel.hashCode(AbstractModel.java:32)
        at org.hibernate.validator.engine.ConstraintViolationImpl.hashCode(ConstraintViolationImpl.java:127)
        at java.util.HashMap.put(HashMap.java:389)
        at java.util.HashSet.add(HashSet.java:217)
        at java.util.AbstractCollection.addAll(AbstractCollection.java:322)
        at java.util.HashSet.<init>(HashSet.java:117)
        at org.hibernate.validator.engine.ValidatorImpl.validate(ValidatorImpl.java:120)
        at org.apache.jsp.billing.CA.ON.reports.billingONNewReport_jsp.saveSubmittedBills(billingONNewReport_jsp.java:383)
        at org.apache.jsp.billing.CA.ON.reports.billingONNewReport_jsp._jspService(billingONNewReport_jsp.java:796)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
        at org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:709)
        at org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:680)
        at org.apache.jsp.billing.CA.ON.billingONReport_jsp._jspService(billingONReport_jsp.java:109)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
.... 
```

我正在使用：

```
hibernate-entitymanager 3.4.0.GA
hibernate-validator 4.1.0.Final
validation-api 1.0.0.GA 
```

我这样调用我的验证代码：

```
Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
                Set<ConstraintViolation<BillingClaimHeader1>>  constraintViolations = validator.validate(newBill);
                MiscUtils.getLogger().info("num violations: " + constraintViolations.size()); 
```

`newBill`class 的新实例在哪里`BillingClaimHeader1`。

这是 的类定义`BillingClaimHeader1`：

```
public class BillingClaimHeader1 extends AbstractModel<Integer> implements Serializable 
```

我对整个 JPA/验证这件事还是很陌生，但我没有意识到在验证它之前我必须坚持一个对象......似乎有点违反直觉......

我很感激任何帮助！

干杯

贾勒特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:59:16.960

注意

1.  此消息来自`org.oscarehr.common.model.AbstractModel`，而不是 JPA
2.  这是警告，不是错误

实际上，在您的情况下，您可以放心地忽略此消息。

`org.oscarehr.common.model.AbstractModel` uses entity identifier to implement `equals()` and `hashCode()`. This approach has one disadvantage when used with generated identifiers - it breaks the contract of `equals()` and `hashCode()` when you save an object, i.e. `hashCode()` of a transient object differs from `hashCode()` of the same object after you saved it.

To inform you about possible problems authors of `org.oscarehr.common.model.AbstractModel` decided to emit a warning when you call `hashCode()` on a transient object. However, in your case you can safely ignore this warning, because `hashCode()` is called internally by validation routines that operate on transient objects only (as far as I understand).

**See also:**

*   [Equals and HashCode](https://community.jboss.org/wiki/EqualsandHashCode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:46:52.933

您的实体与`PersistenceContext`. 你必须`manage state`为那个例子做。

# android - 如何触发 Skype SMS？

> ID：12568215
> 
> 赞同：1
> 
> 时间：2012-09-24T15:32:52.013
> 
> 标签：android, skype

我学会了如何触发 Skype OUT 呼叫以编程方式[从应用程序启动 Skype 并通过号码 - Android](https://stackoverflow.com/questions/6414494/launch-skype-from-the-app-programetically-pass-number-android/8844526#8844526)

有没有办法触发 Skype OUT SMS？

# c# - 像类型一样使用的方法——单元测试中的错误

> ID：12568218
> 
> 赞同：0
> 
> 时间：2012-09-24T15:33:00.513
> 
> 标签：c#, factory

我正在尝试对一个简单的工厂进行单元测试，但它一直告诉我我正在尝试使用像类型这样的方法。这是怎么回事？

我的单元测试：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Home;

namespace HomeTest
{
    [TestClass]
    public class TestFactory
    {
        [TestMethod]
        public void DoTestFactory()
        {
            InventoryType.InventorySelect select = new InventoryType.InventorySelect();
            select.inventoryTypes.Add("cds");

            Home.Services.Factory.CreateInventory get = new Home.Services.Factory.CreateInventory();
            get.InventoryImpl();

            if (select.Validate() == true)
                Console.WriteLine("Test Passed");
            else
                if (select.Validate() == false)
                    Console.WriteLine("Test Returned False");
                else
                    Console.WriteLine("Test Failed To Run");

            Console.ReadLine();

        }
    }
} 
```

我的工厂：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Home.Services
{
    public class Factory
    {
        public InventorySvc CreateInventory()
        {
            return new InventoryImpl();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:36:35.763

您正在尝试创建您正在调用的方法的实例，*然后*调用它正在调用的方法。相反，创建您的工厂，然后调用`CreateInventory`.

```
var factory = new Home.Services.Factory();
var inventory = factory.CreateInventory(); 
```

*   我倾向于避免使用`select`和`get`作为变量名，因为它们在其他地方使用时是关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:36:49.433

`CreateInventory()`是`Factory`类上的一个方法。

你正在努力做到`new`这一点——这是不可能的。

```
var get = new Home.Services.Factory();
var inventory = get.CreateInventory(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-07T12:45:11.530

您可以像您尝试做的那样在一行中完成它。您只是在班级名称后缺少 () 。改变：

```
new InventoryType.InventorySelect(); 
```

到

```
new InventoryType().InventorySelect(); 
```

# c - asm中的不可能约束

> ID：12568225
> 
> 赞同：0
> 
> 时间：2012-09-24T15:33:27.663
> 
> 标签：c, mongodb, assembly, cross-compiling

我正在尝试将 mongodb 交叉编译为自定义 linux。它在 linux 上编译得很好，但是当使用交叉编译器工具链时，它会抱怨这个代码。

```
 static T compareAndSwap(volatile T* dest, T expected, T newValue) {
             T result = expected;
             asm volatile ("push %%eax\n\t"
                           "push %%ebx\n\t"
                           "push %%ecx\n\t"
                           "push %%edx\n\t"
                          "mov (%%edx), %%ebx\n\t"
                           "mov 4(%%edx), %%ecx\n\t"
                           "mov (%%edi), %%eax\n\t"
                           "mov 4(%%edi), %%edx\n\t"
                          "lock cmpxchg8b (%%esi)\n\t"
                           "mov %%eax, (%%edi)\n\t"
                          "mov %%edx, 4(%%edi)\n\t"
                        "pop %%edx\n\t"
                           "pop %%ecx\n\t"
                          "pop %%ebx\n\t"
                          "pop %%eax\n"
                          :
                           : "S" (dest),
                             "D" (&result),
                             "d" (&newValue)
                           : "memory", "cc");
             return result;
        } 
```

编译器错误如下。

```
_party/js-1.7 -Isrc/third_party/js-1.7 src/mongo/bson/oid.cpp
src/mongo/platform/atomic_intrinsics_gcc.h: In member function 'void mongo::OID::initSequential()':
src/mongo/platform/atomic_intrinsics_gcc.h:123:44: error: impossible constraint in 'asm'
src/mongo/platform/atomic_intrinsics_gcc.h:123:44: error: impossible constraint in 'asm'
scons: *** [build/linux2/cc_gcc/cxx_toolchain-c++/mongo/bson/oid.o] Error 1
scons: building terminated because of errors. 
```

投诉`123:44`的行是之前行的结尾`: "memory", "cc");`

还看了看其他部分的代码，编译成asm代码，看起来也差不多。不知道这个发生了什么。

请指教这有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:46:45.140

尝试在`__sync_val_compare_and_swap`此处使用 GCC 内在函数。

由于[F00F 错误](http://en.wikipedia.org/wiki/Pentium_F00F_bug)，它`lock cmpxchg8b`是无效的。我猜你正在使用类似`i586-linux-gcc`工具链的东西，因此你正在解决这个奔腾的问题。

如果您告诉我们您定制的 linux 内核的确切硬件，可能会出现更多解决方法。

# c# - WPF 为什么这个绑定不起作用？

> ID：12568232
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:33:45.787
> 
> 标签：c#, .net, wpf, data-binding

我试图绑定到的视图模型中的属性：

```
 private TextActionValue _textActionVal;
    public TextActionValue TextActionVal
    {
        get { return _textActionVal; }
        set
        {
            _textActionVal = value; 
        }
    } 
```

xml:

```
<Grid Margin="0,15,15,15" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <GroupBox Grid.Row="1" BorderThickness="0">
        <TextBox Margin="0,5,0,5" AcceptsReturn="True" AcceptsTab="True" Text="{Binding TextActionValue.Text}" HorizontalAlignment="Stretch" MinHeight="100"></TextBox>
    </GroupBox>
</Grid> 
```

最后是 TextActionValue 类：

```
public class TextActionValue : ISomeAction, INotifyPropertyChanged
{
    private String _text;
    public String Text
    {
        get { return _text; }
        set
        {
            _text = value;
            OnPropertyChanged("Text");
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion
} 
```

text 属性已填充。当我踩到它时，肯定有一个价值。

如果我只是绑定到一个基本的字符串属性，它就可以工作。它不喜欢“TextActionValue.Text”。这不是一个选择，除非我做了一些我想尽可能避免的重构。

如果我在 TextActionValue get 中放置一个断点... get 永远不会被命中。所以这告诉我绑定永远不会创建。为什么……或者我试图做的事情是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:37:37.013

尝试绑定到`TextActionVal.Text`而不是`TextActionValue.Text`

您正在尝试绑定到类而不是属性。

调试时还要检查输出窗口以查看数据绑定错误。

# django - 涉及非超级用户帐户的 django 管理员权限的问题

> ID：12568234
> 
> 赞同：1
> 
> 时间：2012-09-24T15:33:54.413
> 
> 标签：django, admin, rights, root

我目前遇到一个使用 django 1.3.1 的项目的问题，它是管理界面（只是你友好的邻居 django.contrib.admin）。该项目已经进行了一段时间，唯一具有员工身份的帐户一直是超级用户帐户。

这已经改变了。客户请求具有更精细权限设置的帐户。我尝试通过禁用指定帐户的超级用户状态并手动设置适当的权限来进行设置。当用户登录时，管理界面似乎完全忽略了手动指定的权限。即使指定了所有权限，用户也被拒绝访问任何内容（尽管他仍然可以登录到管理界面）。

这个问题似乎与 django 版本无关，因为我尝试快速临时升级到 1.3.3 甚至 1.4。没运气...

我可以分享一些项目代码来帮助追踪问题，但坦率地说，我不知道可能是什么问题。我将不胜感激一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:08:33.123

您是否使用自己的身份验证后端？如果是这样，您的后端类是否派生自 django.contrib.auth.backends.ModelBackend？

我今天在我的代码中发现了同样的问题，问题原来是我的后端是从对象派生的。特别是，我的后端没有实现管理代码使用的一些功能（例如 has_module_perms）。

要么从 django.contrib.auth.backends.ModelBackend 派生你的后端，要么确保管理代码所需的所有功能都在你的后端中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T21:07:54.190

这是根据上面 yassam 的回答解决此问题的示例。我有导致问题的代码：

```
class MyCustomModelBackend(object):

    def authenticate(self, username=None, password=None):
        try:
            user = User.objects.get(username__iexact=username)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None 
```

要解决此问题，请将其更新为派生自`django.contrib.auth.backends.ModelBackend`：

```
from django.contrib.auth.backends import ModelBackend

class MyCustomModelBackend(ModelBackend):

    def authenticate(self, username=None, password=None):
        try:
            user = User.objects.get(username__iexact=username)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None 
```

# objective-c - 使用 Apple 地图以编程方式获取路线

> ID：12568238
> 
> 赞同：2
> 
> 时间：2012-09-24T15:34:11.213
> 
> 标签：objective-c, cocoa-touch, ios6, ios6-maps

我对文档有点困惑。经过一些研究和实验，这就是我所拥有的。

```
if ([self canUseMKMapItem]) {
            [self iosTheMap];
        } else {
            [self googleTheMap];
        } 
```

使用它来检测我们是否可以使用IOS6映射功能：

```
- (BOOL) canUseMKMapItem {
    Class itemClass = [MKMapItem class];
    return (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]);
} 
```

这是IOS5，使用谷歌地图。它会自动将我们带到一个屏幕，其中包含从当前地址（如果用户允许）到目的地的路线列表。

```
- (void)googleTheMap
{
    NSNumber *userLat = [[NSNumber alloc]initWithDouble:mapView.userLocation.coordinate.latitude];
    NSNumber *userLong = [[NSNumber alloc]initWithDouble:mapView.userLocation.coordinate.longitude];

    NSMutableString *queryString = [NSMutableString stringWithFormat:@"http://maps.google.com/?saddr=%@,%@&daddr=",userLat,userLong];
    NSString *address = [partnerObject valueForKey:ATTRIBUTE_ADDRESS];
    [queryString appendString:address];
    NSString *escaped = [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:escaped]];
} 
```

这是棘手的部分——这就是我试图使用 Apple Maps 所做的事情

```
- (void)iosTheMap {
    NSNumber * latitude = [partnerObject valueForKey:ATTRIBUTE_LATITUDE];
    NSNumber * longitude = [partnerObject valueForKey:ATTRIBUTE_LONGITUDE];
    CLLocationCoordinate2D coordinate;
    coordinate.latitude = latitude.doubleValue;
    coordinate.longitude = longitude.doubleValue;
    NSMutableDictionary *addressDictionary = [[NSMutableDictionary alloc] init];
    [addressDictionary setValue:[partnerObject valueForKey:ATTRIBUTE_ADDRESS] forKey:kABPersonAddressStreetKey];
    MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:addressDictionary];
    MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
    [mapItem openInMapsWithLaunchOptions:nil];
} 
```

这有点“有效”。它将用户带到带有显示地址的图钉的地图屏幕。用户可以点击它并获取路线。但是，我对这种方法有一些保留意见：

1.  我在设置 kABPersonAddressStreetKey 的地方有一个编译器警告：“不兼容的指针类型将'const CFStringRef'（又名'const struct __CFString *const'）发送到'NSString *'类型的参数”
2.  我使用的字符串值是完整地址。我使用该值作为街道地址，尽管地址值更具有原子性——街道、城市、州。它似乎有效，但我担心这不是正确的方法。
3.  如果 Apple Maps 显示商家/目的地的名称，而不仅仅是地址，那就太好了。
4.  让 Apple Maps 自动显示方向，而不是带有目的地的地图，这将是很棒的，为用户节省了几次点击。

关于如何改进我的方法的任何建议？尽管它似乎有效，但我怀疑这不是正确的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T02:35:41.363

你很接近。您需要使用 MKLaunchOptionsDirectionsModeDriving、MKLaunchOptionsDirectionsModeKey 值和键为 openInMapsWithLaunchOptions 函数指定启动选项字典。

```
 Class itemClass = [MKMapItem class];
    if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
        // Use iOS 6 maps
        CLLocationCoordinate2D coordinate = [((LocationAnnotation*)[map.annotations objectAtIndex:0]) coordinate];
        MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
        MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
        [mapItem openInMapsWithLaunchOptions:[NSDictionary dictionaryWithObjectsAndKeys:MKLaunchOptionsDirectionsModeDriving, MKLaunchOptionsDirectionsModeKey, nil]];
    } else {
        //Fall back on google
        ...
    } 
```

# java - 在 Java 中估计 Holt-Winters 平滑系数

> ID：12568241
> 
> 赞同：6
> 
> 时间：2012-09-24T15:34:20.073
> 
> 标签：java, statistics, time-series

我正在开发一个用 Java 编写的系统，该系统能够使用历史数据执行预测。使用的算法是[这个 Holt-Winters 实现](http://adorio-research.org/wordpress/?p=1230)（乘法季节性）的 Java 端口。

我有几个要分析的时间序列，我们需要为这些时间序列设置不同的平滑系数。该算法目前似乎运行良好，唯一的问题是如何确定平滑系数（alpha、beta、gamma）的最合理值。

我知道我需要某种非线性优化，但我根本不是数学家，所以我有点迷失在所有这些理论和概念中。

**编辑**：

我有很多不同的时间序列要分析，我想知道是否有标准/足够好的技术（图书馆会更好）来计算我应该给 Holt-Winters 算法的平滑参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T23:11:09.817

你看过[JMulTi](http://www.jmulti.de/)吗？

[这个 SO question](https://stackoverflow.com/questions/950004/java-library-to-do-time-series-analysis)可能与您非常相关。

任何研究 Holt-Winters 的人都应该查看[Hyndman 教授的网站](http://robjhyndman.com/forecasting/)。他是一位领域专家，也是`forecast()`R 语言库的创建者。

你说你想更好地理解这项技术。好消息是 Hyndman 正在编写一本教科书，我们可以免费查阅。关于 Holt-winters 的具体章节位于：http: [//otexts.com/fpp/7/5/](http://otexts.com/fpp/7/5/)

我知道你想要在 Java 中使用它，但如果 R​​ 是一个选项，你应该试一试。（有些人建议从 R 编写并将其读入您的 Java 程序。）

**更新：**

如果是您关心的初始硬件参数，我只能想到`ets`实现**最大似然**搜索以得出参数的包。如果您发现没有 Java 实现，最好的选择可能是使用[JRI (rJava)](http://www.rforge.net/JRI/)并在其中调用`ets`或调用`HoltWinters`。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-15T10:57:03.547

您可以使用 Apache 实现的**Nelder Mead Optimizer** (SimplexOptimizer)

```
double[] dataPoints = {
            141, 53, 78, 137, 182, 161, 177,
            164, 70, 67, 129, 187, 161, 136,
            167, 57, 61, 159, 158, 152, 169,
            181, 65, 60, 146, 186, 180, 181,
            167, 70, 62, 170, 193, 167, 176,
            149, 69, 68, 168, 181, 200, 179,
            181, 83, 72, 157, 188, 193, 173,
            184, 61, 59, 158, 158, 143, 208,
            172, 82, 86, 158, 194, 193, 159
};

NelderMeadOptimizer.Parameters op = NelderMeadOptimizer.optimize(dataPoints, 7);
op.getAlpha(); 
op.getBeta(); 
op.getGamma(); 
```

现在您需要 NelderMeadOptimizer：

```
import org.apache.commons.math3.analysis.MultivariateFunction;
import org.apache.commons.math3.optim.InitialGuess;
import org.apache.commons.math3.optim.MaxEval;
import org.apache.commons.math3.optim.MaxIter;
import org.apache.commons.math3.optim.PointValuePair;
import org.apache.commons.math3.optim.nonlinear.scalar.GoalType;
import org.apache.commons.math3.optim.nonlinear.scalar.MultivariateFunctionMappingAdapter;
import org.apache.commons.math3.optim.nonlinear.scalar.ObjectiveFunction;
import org.apache.commons.math3.optim.nonlinear.scalar.noderiv.NelderMeadSimplex;
import org.apache.commons.math3.optim.nonlinear.scalar.noderiv.SimplexOptimizer;

import java.util.List;

public class NelderMeadOptimizer {

    // configuration
    private static final double minValueForOptimizedParameters = 0.001;
    private static final double maxValueForOptimizedParameters = 0.99;
    private static final double simplexRelativeThreshold = 0.0001;
    private static final double simplexAbsoluteThreshold = 0.0001;

    private static final double DEFAULT_LEVEL_SMOOTHING = 0.01;
    private static final double DEFAULT_TREND_SMOOTHING = 0.01;
    private static final double DEFAULT_SEASONAL_SMOOTHING = 0.01;

    private static final int MAX_ALLOWED_NUMBER_OF_ITERATION = 1000;
    private static final int MAX_ALLOWED_NUMBER_OF_EVALUATION = 1000;

    /**
     *
     * @param dataPoints the observed data points
     * @param seasonLength the amount of data points per season
     * @return the optimized parameters
     */
    public static Parameters optimize(double[] dataPoints, int seasonLength) {
        MultivariateFunctionMappingAdapter costFunc = getCostFunction(dataPoints, seasonLength);
        double[] initialGuess = getInitialGuess(dataPoints, seasonLength);
        double[] optimizedValues = optimize(initialGuess, costFunc);
        double alpha = optimizedValues[0];
        double beta = optimizedValues[1];
        double gamma = optimizedValues[2];
        return new Parameters(alpha, beta, gamma);
    }

    /**
     * Optimizes parameters using the Nelder-Mead Method
     * @param initialGuess initial guess / state required for Nelder-Mead-Method
     * @param costFunction which defines that the Mean Squared Error has to be minimized
     * @return the optimized values
     */
    private static double[] optimize(double[] initialGuess, MultivariateFunctionMappingAdapter costFunction) {
        double[] result;

        SimplexOptimizer optimizer = new SimplexOptimizer(simplexRelativeThreshold, simplexAbsoluteThreshold);

        PointValuePair unBoundedResult = optimizer.optimize(
                GoalType.MINIMIZE,
                new MaxIter(MAX_ALLOWED_NUMBER_OF_ITERATION),
                new MaxEval(MAX_ALLOWED_NUMBER_OF_EVALUATION),
                new InitialGuess(initialGuess),
                new ObjectiveFunction(costFunction),
                new NelderMeadSimplex(initialGuess.length));

        result = costFunction.unboundedToBounded(unBoundedResult.getPoint());
        return result;
    }

    /**
     * Defines that the Mean Squared Error has to be minimized
     * in order to get optimized / good parameters for alpha, betta and gamma.
     * It also defines the minimum and maximum values for the parameters to optimize.
     * @param dataPoints the data points
     * @param seasonLength the amount of data points per season
     * @return a cost function  {@link MultivariateFunctionMappingAdapter} which
     * defines that the Mean Squared Error has to be minimized
     * in order to get optimized / good parameters for alpha, betta and gamma
     */
    private static MultivariateFunctionMappingAdapter getCostFunction(final double[] dataPoints, final int seasonLength) {

        MultivariateFunction multivariateFunction = new MultivariateFunction() {
            @Override
            public double value(double[] point) {
                double alpha = point[0];
                double beta = point[1];
                double gamma = point[2];

                if (beta >= alpha) {
                    return Double.POSITIVE_INFINITY;
                }

                List<Double> predictedValues = TripleExponentialSmoothing.getSmoothedDataPointsWithPredictions(dataPoints, seasonLength, alpha, beta, gamma, 1);

                predictedValues.remove(predictedValues.size()-1);

                double meanSquaredError = getMeanSquaredError(dataPoints, predictedValues);
                return meanSquaredError;
            }
        };

        double[][] minMax = getMinMaxValues();
        return new MultivariateFunctionMappingAdapter(multivariateFunction, minMax[0], minMax[1]);
    }

    /**
     * Generates an initial guess/state required for Nelder-Mead-Method.
     * @param dataPoints the data points
     * @param seasonLength the amount of data points per season
     * @return array containing initial guess/state required for Nelder-Mead-Method
     */
    public static double[] getInitialGuess(double[] dataPoints, int seasonLength){
        double[] initialGuess = new double[3];
        initialGuess[0] = DEFAULT_LEVEL_SMOOTHING;
        initialGuess[1] = DEFAULT_TREND_SMOOTHING;
        initialGuess[2] = DEFAULT_SEASONAL_SMOOTHING;
        return initialGuess;
    }

    /**
     * Get minimum and maximum values for the parameters alpha (level coefficient),
     * beta (trend coefficient) and gamma (seasonality coefficient)
     * @return array containing all minimum and maximum values for the parameters alpha, beta and gamma
     */
    private static double[][] getMinMaxValues() {
        double[] min = new double[3];
        double[] max = new double[3];
        min[0] = minValueForOptimizedParameters;
        min[1] = minValueForOptimizedParameters;
        min[2] = minValueForOptimizedParameters;

        max[0] = maxValueForOptimizedParameters;
        max[1] = maxValueForOptimizedParameters;
        max[2] = maxValueForOptimizedParameters;
        return new double[][]{min, max};
    }

    /**
     * Compares observed data points from the past and predicted data points
     * in order to calculate the Mean Squared Error (MSE)
     * @param observedData the observed data points from the past
     * @param predictedData the predicted data points
     * @return the Mean Squared Error (MSE)
     */
    public static double getMeanSquaredError(double[] observedData, List<Double> predictedData){
        double sum = 0;

        for(int i=0; i<observedData.length; i++){
            double error = observedData[i] - predictedData.get(i);
            double sumSquaredError = error * error; // SSE
            sum += sumSquaredError;
        }

        return sum / observedData.length;
    }

    /**
     * Holds the parameters alpha (level coefficient), beta (trend coefficient)
     * and gamma (seasonality coefficient) for Triple Exponential Smoothing.
     */
    public static class Parameters {
        public final double alpha;
        public final double beta;
        public final double gamma;

        public Parameters(double alpha, double beta, double gamma) {
            this.alpha = alpha;
            this.beta = beta;
            this.gamma = gamma;
        }

        public double getAlpha() {
            return alpha;
        }

        public double getBeta() {
            return beta;
        }

        public double getGamma() {
            return gamma;
        }
    };
} 
```

# c# - 来自代码隐藏的确认框，等待答案

> ID：12568243
> 
> 赞同：0
> 
> 时间：2012-09-24T15:34:22.507
> 
> 标签：c#, asp.net

从我后面的代码中，在我的更新方法中，我必须询问用户是否要覆盖某些特定值。如果是，则覆盖，如果不是，则继续保存而不保存此值。

在我的 aspx 中，我有这个 javascript 函数：

```
function ConfirmationBox(msg) {
    var ovd = document.getElementById("hdnOveride"); //gets a HiddenField
        if (confirm(msg) == true) {
            ovd.value = "1";
            return true;
        }
        else {
            ovd.value = "0";
            return false;
        }
    } 
```

从代码隐藏中，我调用了这个函数。然后我检查了我的 HiddenField“hdnoveride”的值。如果它的 1 我保存，否则我不保存。

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "Test", "javascript:ConfirmationBox('overide?');", true);

if (hdnOveride.Value == "1"){
      //Save the value
} 
```

问题是我的代码在继续之前没有等待用户回答确认框。我尝试使用 Thread.Sleep() 而 hdnOveride 未设置如下：

```
while (hdnOveride.Value == "notset") {
    System.Threading.Thread.Sleep(500);
} 
```

但它只是停止一切，所以当我这样做时弹出框永远不会显示。

如何告诉系统在继续执行代码之前等待答案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:20:15.597

好的，我使用 Panel 来向我的用户提问，如下所示：[https ://stackoverflow.com/a/7677000/454157](https://stackoverflow.com/a/7677000/454157)

# iphone - 使用未声明的标识符 - 核心数据

> ID：12568244
> 
> 赞同：0
> 
> 时间：2012-09-24T15:34:23.867
> 
> 标签：iphone, objective-c, ios, core-data, xcode4

嗨，我对 xcode 还很陌生，我无法理解为什么我会收到此错误“使用未声明的标识符”，我基本上是在尝试将获取的结果返回到表视图。

```
//  UNBSearchBooksViewController.m

#import "UNBSearchBooksViewController.h"
#import "NBAppDelegate.h"

@interface UNBSearchBooksViewController ()

@end

@implementation UNBSearchBooksViewController 

@synthesize booksSearchBar;
@synthesize searchTableView;
@synthesize fetchedResultsController, managedObjectContext;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // NSFetchRequest needed by the fetchedResultsController
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    // NSSortDescriptor tells defines how to sort the fetched results
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    // fetchRequest needs to know what entity to fetch
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"BookInfo" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];   
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [fetchedObjects count];
}

// Customize the appearance of table view cells.

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell" ;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell "this is where my problem is" use of undeclared identifier
    BookInfo *info = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.textLabel.text = info.title;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

- (void) searchBarSearchButtonClicked:(UISearchBar *)theSearchBar
{

    if (self.booksSearchBar.text !=nil)
    {
        NSPredicate *predicate =[NSPredicate predicateWithFormat:@"bookName contains[cd] %@", self.booksSearchBar.text];
        [fetchedResultsController.fetchRequest setPredicate:predicate];
    }
    else
    {
        NSPredicate *predicate =[NSPredicate predicateWithFormat:@"All"];
        [fetchedResultsController.fetchRequest setPredicate:predicate];
    }

    NSError *error = nil;
    if (![[self fetchedResultsController] performFetch:&error])
    {
        // Handle error
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }

    fetchedObjects = fetchedResultsController.fetchedObjects;

    [booksSearchBar resignFirstResponder];

    [searchTableView reloadData];   
}

- (void) searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    searchBar.showsCancelButton = YES;
}

- (void) searchBarTextDidEndEditing:(UISearchBar *)searchBar

{
    searchBar.showsCancelButton = NO;
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
}
- (void)didReceiveMemoryWarning
{

    [super didReceiveMemoryWarning];

}
- (void)viewDidUnload
{
    [super viewDidUnload];

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:42:21.250

您的问题是您正在将键入为基类的结果分配给特定的子类。正如您所说，这是您收到警告的地方：

```
BookInfo *info = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

'NSFetchedResultsController' 返回一个类型为 'id' 的对象

```
- (id)objectAtIndexPath:(NSIndexPath *)indexPath 
```

（我想它也可以返回一个 NSManagedObject *），但是你将它分配给一个 BookInfo 对象。由于这里不匹配，您需要将返回值转换为您知道的值：

```
BookInfo *info = (BookInfo *)[self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

你的警告就会消失。

# java - 如何处理带有 MixedContent 数据的 JAXB ComplexType？

> ID：12568247
> 
> 赞同：9
> 
> 时间：2012-09-24T15:34:43.547
> 
> 标签：java, xml, xsd, jaxb, xjc

**我得到了这个 XML 结构：**

```
<Tax>
  <Money currency="USD">0.00</Money>
  <Description xml:lang="en">
     17.5% Non-Recoverable
    <ShortName>vatspecial</ShortName>
  </Description>
</Tax> 
```

**请注意，`Description`节点有`MixedContent` *（由文本和 XML 组成）*，这是`XSD`关于`Description`节点**的部分：

```
<xsd:complexType name="TaxDescriptionType">
  <xsd:sequence>
    <xsd:element name="ShortName" type="xsd:string" />
  </xsd:sequence>
  <xsd:attribute ref="xml:lang" />
</xsd:complexType> 
```

**此时一切正常，`XJC`输出生成的类，如下所示`TaxDescriptionType`：**

```
package org.com.project;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlSchemaType;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.adapters.CollapsedStringAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

/**
 * <p>Java class for TaxDescriptionType complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="TaxDescriptionType">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="ShortName" type="{http://www.w3.org/2001/XMLSchema}string"/>
 *       &lt;/sequence>
 *       &lt;attribute ref="{http://www.w3.org/XML/1998/namespace}lang"/>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "TaxDescriptionType", propOrder = {
    "shortName"
})
public class TaxDescriptionType {

    @XmlElement(name = "ShortName", required = true)
    protected String shortName;
    @XmlAttribute(name = "lang", namespace = "http://www.w3.org/XML/1998/namespace")
    @XmlJavaTypeAdapter(CollapsedStringAdapter.class)
    @XmlSchemaType(name = "NCName")
    protected String lang;

    /**
     * Gets the value of the shortName property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getShortName() {
        return shortName;
    }

    /**
     * Sets the value of the shortName property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setShortName(String value) {
        this.shortName = value;
    }

    /**
     * Gets the value of the lang property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getLang() {
        return lang;
    }

    /**
     * Sets the value of the lang property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setLang(String value) {
        this.lang = value;
    }

} 
```

**然后，通过以上内容，`class`我可以使用以下元素：**

```
taxDescriptionType.setLang("en");
taxDescriptionType.setShortName("vatspecial");
/* missing value: 17.5% Non-Recoverable */ 
```

**但问题是我找不到上述示例的方法`get`或文本。`set``17.5% Non-Recoverable``MixedContent-ComplexType``XML`**

* * *

**这是我尝试过的，但它不起作用：**

*   使用`mixed="true"`的属性如下：

`<xsd:complexType name="TaxDescriptionType" mixed="true">`

***（我认为 XJC 忽略了最后一个属性）***

* * *

**做了一些研究，我发现了这个：**

[JAXB XJC 编译器忽略 XML Schema 文档上的混合=真](https://stackoverflow.com/questions/4049067/jaxb-xjc-compiler-disregarding-mixed-true-on-xml-schema-documents)

但我不确定这是否是解决这个问题的方法。其中一个答案说这是一个错误，而在另一个答案中显示了一个将转换`MixedContent`为 a的代码，`List<Serializable>`也许下一个情况将是关于如何处理这个问题：

```
taxDescriptionType.getContent().add(Serializable element); 
```

***（而且我真的不知道如何处理一个`Serializable`元素）***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:06:01.753

正如您提到的，您需要添加`mixed`属性以指示您的类型支持混合内容。如果没有指定，您的 XML 内容无效：

```
<xsd:complexType name="TaxDescriptionType" mixed="true">
    <xsd:sequence>
        <xsd:element name="ShortName" type="xsd:string" />
    </xsd:sequence>
    <xsd:attribute ref="xml:lang" />
</xsd:complexType> 
```

生成的`TaxDescriptionType`类将具有以下属性。本质上，这意味着所有非属性内容都将存储在`List`. 这是必要的，因为您需要一种机制来指示文本节点在元素内容中的位置。

```
@XmlElementRef(name = "ShortName", namespace = "http://www.example.org/schema", type = JAXBElement.class)
@XmlMixed
protected List<Serializable> content; 
```

`String`您将使用（表示文本节点）和`JAXBElement`（表示元素内容）的实例填充此列表。

* * *

**或者**

混合内容通常会使生活变得比它需要的更复杂。如果可能的话，我会推荐一个替代的 XML 表示。

```
<Tax>
  <Money currency="USD">0.00</Money>
  <Description xml:lang="en" ShortName="vatspecial">
    17.5% Non-Recoverable
  </Description>
</Tax> 
```

或者

```
<Tax>
  <Money currency="USD">0.00</Money>
  <Description xml:lang="en">
    <LongName>17.5% Non-Recoverable</LongName>
    <ShortName>vatspecial</ShortName>
  </Description>
</Tax> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-11T10:44:37.647

使用混合=真，在 ObjectFactory 中应该有一个类似的函数`JAXBElement<ShortNameType> createTaxDescriptionTypeShortNameType(ShortNameType)`，它为您生成可序列化的元素。

```
 @XmlElementDecl(namespace = "", name = "shortnametype", scope = TaxDescriptionType.class)
    public JAXBElement<ShortNameType> createTaxDescriptionTypeShortNameType(ShortNameType value) {
        return new JAXBElement<ShortNameType>(new QName("", "shortnametype"), ShortNameType.class, TaxDescriptionType.class, value);
 } 
```

# git - 从 git 本地用户的角度来看 git-svn

> ID：12568248
> 
> 赞同：2
> 
> 时间：2012-09-24T15:34:46.977
> 
> 标签：git, git-svn

*从本机 git 用户的角度来看，*是否有任何 git-svn 教程？我的新工作场所使用 svn；我知道 git，并希望继续使用我熟悉的分支和变基工作流程，同时最终致力于 svn repos。*我能找到的所有 git-svn 教程都是从人们从 svn 切换到*git的角度来看的，这并不是很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:55:33.030

由 Scott Chacon 编写的 Pro Git 书中的第[8.1 章 Git 和其他系统 - Git 和 Subversion 。](http://git-scm.com/book/ch8-1.html)

# java - 如何修复此正则表达式？

> ID：12568249
> 
> 赞同：0
> 
> 时间：2012-09-24T15:34:47.860
> 
> 标签：java, regex

```
String input = "2012 AL REG TEXT 300535(NS)";
String regex = "^((\\d{4})\\s+)?((\\S+)\\s+(.+?)\\s+)\\s+((\\S+)(\\s+\\(.*?\\)))$"; 
```

我想在一个组中捕获 2012，在另一个组中捕获“AL REG TEXT”，在另一个组中捕获“300535（NS）”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:41:40.460

错误是您`\\s+`在预期的括号之前有一个额外的权利，正如@cmonkey 指出的那样，`\\s+`中间有一个额外的。删除这些，它的工作原理。此外，要仅获取您上面提到的组，请添加`?:`到您不想捕获的组：

```
String input = "2012 AL REG TEXT 300535(NS)";
String regex = "^(?:(\\d{4})\\s+)?((?:\\S+)\\s+(?:.+?))\\s+((?:\\S+)(?:\\(.*?\\)))$";
Matcher m = Pattern.compile(regex).matcher(input);
if (m.matches()) {
    for (int i = 1; i <= m.groupCount(); i++) {
        System.out.format("Group %d: '%s'%n", i, m.group(i));
    }
} 
```

印刷

```
Group 1: '2012'
Group 2: 'AL REG TEXT'
Group 3: '300535(NS)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:41:47.990

在您的正则表达式中间，有以下部分：

```
\\s+)\\s+ 
```

它正在寻找两个必需的连续空格。这不存在，因此正则表达式失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:48:56.587

试试这个：`^(\\d{4})?\\s+(\\D+)\\s+(\\d.*)$`

这是代码：

```
 String input = "2012 AL REG TEXT 300535(NS)";
    String regex = "^(\\d{4})?\\s+(\\D+)\\s+(\\d.*)$";

    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(input);
    if(m.matches()) {
        System.out.println("Group count: "+m.groupCount());
        for(int i=0; i<=m.groupCount(); i++) {
            System.out.println("Group "+i+": "+m.group(i));
        }
    }
    else System.out.println("No match"); 
```

# android - modify android-formatting.xml in android adt for eclipse

> ID：12568250
> 
> 赞同：0
> 
> 时间：2012-09-24T15:34:53.327
> 
> 标签：android, eclipse, ide, formatting, adt

I want to edit the reformating which comes with the official Android ADT in eclipse, is this possible?
I want, for example, remove the break after a long class decleration.

I have the official AOSP source on my computer and found a the android-formatting.xml, is it the same as in the Android ADT? If yes, How can I override the ADT formatting and can use my custom file which I can import (a modified android-formatting.xml).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:46:57.837

> 例如，我想在长时间的课后取消休息。

我不知道 Android 为 Java 类指定了任何格式。这是由 Eclipse 处理的，并且可以在 Eclipse 内部进行修改（Preferences > Java > Code Style > Formatter）。

# php - 如何在 Google 分析中测量 Greasemonkey 下载量

> ID：12568252
> 
> 赞同：1
> 
> 时间：2012-09-24T15:34:58.843
> 
> 标签：php, html, google-analytics, greasemonkey

我有一个油脂猴 (.user.js) 文件，人们可以在我的网页上下载。我想跟踪它被下载了多少次。我可以使用`onclick="pageTracker._trackPageview('/file_name.file_extension')`，但文件可能更频繁地直接下载，而不是通过“官方链接”。

我该如何设置？（不必通过谷歌分析，自定义解决方案同样好）有一些限制，解决方案必须像这样工作：

*   Firefox：询问用户是否要安装脚本。
*   Opera：点击后直接看到文件（需要启用右键保存）
*   Chrome：我不确定它如何与 Chrome 一起使用 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:56:18.800

如果您确实想使用 Google Analytics，那么我建议您研究 PHP-GA——一个基于 PHP 的 Google Analytics 库。因此，您将链接到一个 PHP 脚本，该脚本将视图记录在 Google Analytics 中，然后将文件发送到浏览器。这意味着它将记录每次下载，无论是直接下载还是点击链接。

这是 Google 代码页面上的一个基本示例。

```
use UnitedPrototype\GoogleAnalytics;

// Initilize GA Tracker
$tracker = new GoogleAnalytics\Tracker('UA-12345678-9', 'example.com');

// Assemble Visitor information
// (could also get unserialized from database)
$visitor = new GoogleAnalytics\Visitor();
$visitor->setIpAddress($_SERVER['REMOTE_ADDR']);
$visitor->setUserAgent($_SERVER['HTTP_USER_AGENT']);
$visitor->setScreenResolution('1024x768');

// Assemble Session information
// (could also get unserialized from PHP session)
$session = new GoogleAnalytics\Session();

// Assemble Page information
$page = new GoogleAnalytics\Page('/page.html');
$page->setTitle('My Page');

// Track page view
$tracker->trackPageview($page, $session, $visitor); 
```

将此与代码结合起来，通过 PHP 将文件发送到浏览器，如下所示：

```
$file = 'file.js';
header('Content-disposition: attachment; filename='.$file);
header('Content-type: text/plain');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:56:22.530

要让greasemonkey 脚本执行PHP 代码，您需要`.htaccess`在同一目录中创建或修改文件并添加以下行：

```
<Files yourUserScript.user.js>
AddType application/x-httpd-php .user.js
</Files> 
```

一旦 .htaccess 就位，您就可以使用[PHP-GA](http://code.google.com/p/php-ga/)将下载命中发送到 Google Analytics。

这使它适用于 Opera、Firefox 和使用[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)的 Chrome 用户。如果没有 Tampermonkey，用户安装脚本会变得更加困难：

> 为了安装店外扩展，用户必须将它们下载到一个目录并将它们拖到 chrome://extensions/ 上。

但是，您可以使用[内联安装](https://developers.google.com/chrome/web-store/docs/inline_installation)。您将访问者留在您的页面上，他们不必知道下载和拖入扩展程序。在您可以使用此内联之前，您必须[验证](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=34592)您的网站。

这个答案也很有帮助：[Manually added a Userscript to Google Chrome](https://stackoverflow.com/a/5259212/540352)

可悲的是，Chrome 商店会跟踪 Chrome 的下载量，而 Google Analytics 会跟踪 Firefox 和 Opera 的下载量。

# javascript - Access dynamic generated div id

> ID：12568254
> 
> 赞同：2
> 
> 时间：2012-09-24T15:35:05.957
> 
> 标签：javascript

I have some div ids that are generated dynamicly via php

```
<div id='a<?php echo $gid?>> 
```

How can I access them in JavaScript? All these divs start with "A" followed by a number.

Is there some kind of search function

```
getElementById(a*)? 
```

Thanks for any help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:39:29.440

没有通用的 JavaScript 函数（至少不是跨浏览器），但您可以使用`.getElementsByTagName`并迭代结果：

```
var arrDivs = document.getElementsByTagName("div");
for (var i = 0; i < arrDivs.length; i++) {
    var oDiv = arrDivs[i];
    if (oDiv.id && oDiv.id.substr(0, 1) == "a") {
        //found a matching div!
    }
} 
```

这是您可以获得的最低级别，因此您不必担心旧浏览器、新浏览器或未来的浏览器。

要将其包装成一个更整洁的函数，您可以：

```
function GetElementsStartingWith(tagName, subString) {
    var elements = document.getElementsByTagName(tagName);
    var result = [];
    for (var i = 0; i < elements.length; i++) {
        var element = elements[i];
        if (element.id && element.id.substr(0, subString.length) == subString) {
            result.push(element);
        }
    }
    return result;
} 
```

使用示例是：

```
window.onload = function() {
    var arrDivs = GetElementsStartingWith("div", "a");
    for (var i = 0; i < arrDivs.length; i++) {
        arrDivs[i].style.backgroundColor = "red";
    }
}; 
```

[现场测试用例](http://jsfiddle.net/vCHuL/)。

如果您在某个时候选择使用 jQuery（仅此一项不值得），所有上述代码都会变成单行：

```
$(document).ready(function() {
    $('div[id^="a"]').css("background-color", "blue");
}); 
```

[使用 jQuery 更新小提琴](http://jsfiddle.net/vCHuL/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:42:46.920

您可以使用[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)来获取所有具有以 . 开头的 ID 的 div `a`。然后检查每一个，看它是否包含一个数字。

```
var aDivs = document.querySelectorAll('div[id^="a"]');
for(var index = 0, len = aDivs.length; index < len; index++){
    var aDiv = aDivs[index];
    if(aDiv.id.match(/a\d+/)){
       // aDiv is a matching div
    }
}​ 
```

演示：http: [//jsfiddle.net/NTICompass/VaTMe/2/](http://jsfiddle.net/NTICompass/VaTMe/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:43:33.147

好吧，我质疑自己为什么需要选择/获取一个具有随机 ID 的元素。我会假设，你想对每个具有随机 ID 的 div 做一些事情（比如排列或调整它们的大小）。在这种情况下 -> 给你的元素一个类，比如带有随机 ID 的“myGeneratedDivs”（如果你需要它的话）。然后用javascript全选

```
var filteredResults=document.querySelectorAll(".myGeneratedDivs").filter(function(elem){
    ....
    return true;
}); 
```

或使用 jQuery/Zepto/YourWeaponOfChoice

```
var filteredResults=$(".myGeneratedDivs").filter(function(index){
    var elem=this;
    ....
    return true;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:43:48.547

如果您打算使用 jQuery，可以使用以下 jQuery 选择器

```
div[id^="a"] 
```

或者

```
$('div[id^="id"]').each(function(){
// your stuff here
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T15:37:54.600

不，您需要一个固定的 id 值`getElementById`才能工作。但是，还有其他方法可以在 DOM 中搜索元素（例如通过 CSS 类）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-08T04:34:16.083

您将必须定位父 div，当有人单击父 div 内的子 div 时，您可以捕获子 div。

```
 <div id="target">
  <div id="tag1" >tag1</div>
  <div id="tag1" >tag2</div>
  <div id="tag1" >tag3</div>
 </div>

$("#target").on("click", "div", function() {
var showid = $(this).attr('id');
alert(showid)
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-24T15:40:21.727

getElementById() 将返回指定的确切元素。有许多 JavaScript 框架，包括[jQuery](http://jquery.com/)，它们允许更强大的选择功能。例如：

1.  按 id 选择元素：$("#theId")
2.  按类选择一组元素：$(".class")
3.  选择子元素：$("ul a.action")

对于您的特定问题，您可以轻松构建适当的选择器。

# web-services - how to parse the web service result as arraycollection?

> ID：12568258
> 
> 赞同：0
> 
> 时间：2012-09-24T15:35:17.827
> 
> 标签：web-services, actionscript-3, apache-flex, arraycollection, flex-builder-3

I am using Flex Builder and the IDE generates all the calls to my web service. I want to build a filter in a datagrid which it's provider is the result of a web service.

I think I cannot build a filter using the web service response, or if somebody know how to do it I will really appreciate.

In another hand, I have the option to parse the web service response as an arraycollection and then build the filter, does somebody knows how to catch the response and parse it as an arraycollection, keeping in mind that the service has generated by Flex Builder.

Thanks all!

# android - HTTP Post 请求可在真实设备上运行，但不能在 Android 模拟器上运行

> ID：12568261
> 
> 赞同：1
> 
> 时间：2012-09-24T15:35:24.793
> 
> 标签：android, http-post

我正在向具有一些 php 脚本以返回一些数据的 Web 服务器发出发布请求。

当我在我的真实手机中运行代码时，代码运行良好。在模拟器上测试时，它不起作用。它抛出“空指针异常”。exception.getMessage() 告诉 NULL

我还尝试通过从浏览器应用程序直接在模拟器中请求 url 来访问该服务器，并且它工作正常。当然，我收到了没有发送任何帖子数据的错误，因为我没有发送任何帖子参数，但它是可以访问的。我一开始遇到证书错误，但单击确定后它就起作用了。

尝试连接到我的开发机器上的本地服务器（10.0.2.2）时，我遇到了同样的问题。我认为问题出在配置中，所以我将其上传到 Web 服务器，但仍然遇到同样的问题：

```
public String postData(ArrayList<String> params) {

    String responseText=null;

    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(SERVERURL);
    Log.i(TAG, "Posting HttpPost .. . ");
    //goes well till this line

    try {
    // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

        nameValuePairs.add(new BasicNameValuePair("long", params.get(0)));
        nameValuePairs.add(new BasicNameValuePair("lat", params.get(1)));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        Log.i(TAG, "Posting  httpclient.execute .. . ");

        responseText = convertStreamToString(response.getEntity().getContent());
        //responseText = EntityUtils.toString(response.getEntity());
        if (responseText !=null) {

            Log.i(TAG,"PRESPONSE TEXT:"+ responseText);
        }                       
        else
            Log.i(TAG," Entity RESPONSE is NULL");

    } catch (ClientProtocolException e) {

        Log.i(TAG, " POST ClientProtocolException " +e.getMessage());
    } catch (IOException e) {
        Log.i(TAG, " POST IOException " +e.getMessage());
    } catch (Exception el) {
        Log.i(TAG, " POST Exception " +el.getMessage());
    }

    return responseText;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:59:03.530

通过制作另一个针对另一个平台版本的模拟器解决了这个问题。我正在使用 Google API 开发 Android 4。我用 Google API 制作了另一个模拟器 2.3 API 10。

感谢人们在这里尝试另一个模拟器或重新启动它的建议。

# ruby-on-rails - What's the best way to mirror a value across two ActiveRecord rows?

> ID：12568262
> 
> 赞同：3
> 
> 时间：2012-09-24T15:35:29.083
> 
> 标签：ruby-on-rails, activerecord

I have a `user#show` view and also a `membership#show` view.

The `users#show` view has the path

```
/users/john-mcenroe 
```

The `membership#show` view will have the path

```
/org-name/memberships/john-mcenroe 
```

*in other words, the user#show and org#show view both have identical slugs*

For the sake of lookup speed I assume the best thing to do is to mirror the slug column from user on the membership model too. To that end I've created a user observer that updates the membership whenever the user's slug changes.

Is an observer the best way to echo de-normalised data across DB tables? Is there a native rails way to do this instead (an equivalent to counter_cache for isntance)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:00:07.173

如果用户和会员之间存在关联，则可以使用“委托”方法。

例如：

```
class Membership
    belongs_to :user
    delegate :slug, :to => :user
end 
```

在这种情况下，“slug”存储在用户模型中，您不需要将数据复制到成员模型中。

# java - How to check function parameters in Go

> ID：12568266
> 
> 赞同：4
> 
> 时间：2012-09-24T15:35:36.137
> 
> 标签：java, validation, go, guava, preconditions

[Guava Preconditions](http://code.google.com/p/guava-libraries/wiki/PreconditionsExplained) allow to check method parameters in Java easily.

```
public void doUsefulThings(Something s, int x, int position) {
    checkNotNull(s);
    checkArgument(x >= 0, "Argument was %s but expected nonnegative", x);
    checkElementIndex(position, someList.size());
    // ...
} 
```

These check methods raise exceptions if the conditions are not met.

Go has no exceptions but indicates errors with return values. So I wonder how an idiomatic Go version of the above code would look like.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:49:25.620

这取决于上下文。

如果`doUsefulThings`是从包中导出的公共函数，则返回`error`. 您可以导出`error`可以返回的包级变量，调用者可以检查返回的变量是否`error`等于记录在案的搞砸方式之一。

如果没有导出，调用不正确会是程序员的错误，我认为`panic(errors.New("bla bla bla"))`. 尽管无论如何，一旦取消引用该指针，该函数就会发生恐慌。

为此：`checkArgument(x >= 0, "Argument was %s but expected nonnegative", x)`您可以传入`uint`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:49:18.117

我不确定使用断言来检查参数的基本属性是否符合语言的哲学。

如果参数确实可能具有无效值而没有错误（例如，您在数据库中找不到它），您将返回错误：

```
func doUsefulThings(s *Something) error {
      // return an error if your algorithm detect an invalid value 
```

断言`s`不是`nil`只会增加冗长。验证您没有被提供是没有意义的`nil`。

添加返回参数，特别是`error`强制所有用户检查这个错误。不要在你的函数中编写代码来防御调用者代码中的琐碎错误。调用者应该在调用你的函数之前简单地测试它不是`nil`，**如果这可能取决于代码的其余部分。**

# java - 如何从 Javascript 调用 Java 代码并为 JSP 页面赋值？

> ID：12568269
> 
> 赞同：0
> 
> 时间：2012-09-24T15:35:54.200
> 
> 标签：java, javascript, jsp

我有以下“form.jsp”程序，它会生成一个下拉列表，列表下方是一个文本区域，用于显示所选项目的 display_name，现在当用户选择一个项目时，它会在文本区域中显示所选项目 ID，如何从我的代码中调用数据库并在 javascript 中获取 display_name，以便结果 display_name 将显示在 textarea 中？

```
<%@ taglib prefix="s" uri="/struts-tags"%>

<script type="text/javascript">
function callme(Display_Name)
{
  alert('callme : Display_Name = '+Display_Name);
  var v=document.getElementById('hiddenValue').value;
  alert('hiddenValue : v = '+v);
  document.getElementById('defaultDisplayName').value=Display_Name;
}
</script>

     <s:hidden id="pricelist.id" name="pricelist.id" value="%{pricelist.id}"/>
     <div class="dialog">
         <table>
             <tbody>
                 <s:if test="%{enableProductList}"> 
                 <tr class="prop">
                     <td valign="top" class="name required"><label for="description">Product:</label></td>
                     <td valign="top">
                         <s:select id="productPrice.product" 
                                   name="productPrice.product"
                                   headerKey="0" 
                                   headerValue="-- Select Product --"
                                   list="products" 
                                   listKey="id" 
                                   listValue="name"
                                   value="productPrice.product.id"
                                   theme="simple"
                                   onchange="callme(value)"
                                   />
                         <s:hidden id="hiddenValue" name="hiddenValue" value="123"/>

                     </td>
                 </tr> 
                 </s:if>
                 <tr class="prop">
                     <td valign="top" class="name"><label for="description">Default Display Name:</label></td>
                     <td valign="top"><s:textarea id="defaultDisplayName" name="defaultDisplayName" theme="simple" readonly="true"/></td>
                 </tr> 
```

详情见附图，在数据库中，产品表有产品Id和display_name，我知道Id，如何使用Java获取display_name并将其插入jsp？

![在此处输入图像描述](../Images/96fed519df0325b3ad4bb38b91f82312.png)

![在此处输入图像描述](../Images/6ab8685ad5b92ffef756c614d050b560.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:46:17.077

是的，使用 ajax 和可能的 servlet 与数据库交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:29:25.293

我找到了答案，这是 form.jsp 中的内容：

```
<script type="text/javascript">
  function getDisplayName(Id)
  {
    var xmlhttp;
    document.getElementById("defaultDisplayName").innerHTML="";
    if (Id=="") return;
    if (window.XMLHttpRequest) xmlhttp=new XMLHttpRequest();                   // code for IE7+, Firefox, Chrome, Opera, Safari
    else xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");                       // code for IE6, IE5
    xmlhttp.onreadystatechange=function() { if (xmlhttp.readyState==4 && xmlhttp.status==200) document.getElementById("defaultDisplayName").innerHTML=xmlhttp.responseText; }
    xmlhttp.open("GET","/pages/productPrice/getDisplayName.jsp?Id="+Id,true);
    xmlhttp.send();
  }
</script> 
```

这是服务器端的 getDisplayName.jsp 中用于从 DB 获取数据的内容：

```
<%@ page language="java" import="java.sql.*" errorPage="" %>

<%
String Id=request.getParameter("Id");
try
{
  Class.forName("com.mysql.jdbc.Driver");
  Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/abcxyz?autoreconnect=true","username","password");
  Statement st = con.createStatement();
  ResultSet rs=st.executeQuery("select display_name from product where id = "+Id);
  while (!rs.isLast())
  {
    if (rs.next())
    {
      String msg=rs.getString(1);
      out.println(msg);
    }
    else { out.println("No Records Found");}
  }
}
catch(Exception e)
{
  Exception ex = e;
  out.println(e.toString()+"\nDatabase Connection Not Found.");
}
%> 
```

# c# - How to set dictionary values to null

> ID：12568271
> 
> 赞同：4
> 
> 时间：2012-09-24T15:36:06.317
> 
> 标签：c#

I'm wondering if there is a way to put all dictionary values to null (or each elements) ? Because we can't iterate on it if the values has been changed to null.

(I've searched on Stackoverflow before asking this simple question but I didn't find a clear response on this issue).

Regards

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T15:38:40.033

这是你想要的吗？

```
foreach(var key in dict.Keys.ToList())
    dict[key] = null; 
```

重要提示：调用`ToList()`. 这会将密钥复制到临时列表中。否则，您将收到一条`InvalidOperationException`消息：

> 收藏已修改；枚举操作可能无法执行。

# android - ListView 项目不会将宽度扩展到 fill_parent

> ID：12568274
> 
> 赞同：4
> 
> 时间：2012-09-24T15:36:15.300
> 
> 标签：android, android-layout, android-listview, width, listviewitem

我有一个从布局`ViewGroup`中膨胀 a的自定义。列表项布局是从另一个文件扩展而来的。所有视图都设置为。填充其父级，但项目不填充。`ListView``xml``xml``fill_parent``ListView``ListView`

我试过把它放进`ListView`去`LinearLayout`并给它分配权重。也试过`RelativeLayout`了。另外，我已经以`ListView`编程方式构建了该布局，而没有使用`xml`布局。甚至`LayoutParams`在将视图添加到`ViewGroup`.

我也考虑了这些帖子：[ListView w/ onListItemClick 中可点击区域的宽度](https://stackoverflow.com/q/6497000/935627)，[在 Android 中，如何设置 ListView 项目的高度和宽度？](https://stackoverflow.com/q/3210337/935627), [Android Listview 宽度概率](https://stackoverflow.com/q/8064416/935627)。

关于为什么项目不扩展到填充宽度的任何想法？以及如何扩展它们？

**MyViewGroup 类：**

```
public class MyViewGroup extends ViewGroup {

    public MyViewGroup(Context context, AttributeSet attrs) {
        super(context, attrs);
        generateMyViewGroup();

    }

    private void generateMyViewGroup()
    {
        ListView main = (ListView) View.inflate(getContext(), R.layout.layout_main, null);

        main.setAdapter(new MyAdapter(getContext()));

        this.addView(main);     
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        this.getChildAt(0).layout(l, t, r, b);
    }
} 
```

**`ListView` `xml`布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginRight="3dp"
    android:background="#77000000"
    android:cacheColorHint="#00000000"
    android:divider="#00000000"
    android:dividerHeight="0dp"
    android:drawSelectorOnTop="false"
    android:scrollbars="vertical" >
</ListView> 
```

**`ListView`项目布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_main_category"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/mainBackground"
    android:gravity="fill_horizontal|center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/main_category"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="8dp"
        android:layout_marginRight="8dp"
        android:paddingBottom="7dp"
        android:paddingLeft="20dp"
        android:paddingRight="5dp"
        android:paddingTop="20dp"
        android:text="test"
        android:textColor="@color/mainCategory"
        android:textSize="15sp"
        android:textStyle="bold" />

</LinearLayout> 
```

**部分`MyAddapter`课程：**

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder viewHolder;

    if(null == convertView)
    {
        LayoutInflater inflater = LayoutInflater.from(context);
        convertView = inflater.inflate(R.layout.layout_main_category, null);

        viewHolder = new ViewHolder();

        viewHolder.mainItemTitle = (TextView) convertView.findViewById(R.id.main_category);

        convertView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) convertView.getTag(); 
    }

    viewHolder.mainItemTitle.setText("text");

    return convertView;
}

private static class ViewHolder {
        public TextView menuItemTitle;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:47:25.793

最终`ViewGroup`没有正常工作。我也尝试过使用`LinearLayout`. 但`RelativeLayout`最终正确地膨胀了布局。因此，我的`xml`布局和适配器保持不变，但我将主类更改为 extend `RelativeLayout`。还删除了`onLayout()`.

**我的视图类：**

```
public class MyView extends RelativeLayout {
    //Extra code unchanged ....

    private void generateMyView()
    {
        ListView menu = (ListView) View.inflate(getContext(), R.layout.layout_main, null);

        menu.setAdapter(new MyAdapter(getContext()));

        this.addView(menu);
    }

    //Removed onLayout()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:41:59.497

如果你覆盖`onLayout`，你也应该覆盖`onMeasure`.. 几乎总是......

```
@Override 
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
   int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
   int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
   this.setMeasuredDimension(parentWidth, parentHeight);
   // this.setLayoutParams(new 
          //   *ParentLayoutType*.LayoutParams(parentWidth,parentHeight));
   super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

如果它仍然不起作用，也使用注释行..

## 更新：

您的另一个选择是忘记`onLayout`and `onMeasure`，并覆盖`onFinishInflate()`并将这些行添加到其中。如果你`MyViewGroup`从 xml 膨胀。

```
protected void onFinishInflate () {
    super.onFinishInflate();
    ListView main = (ListView) View.inflate(getContext(), 
                                    R.layout.layout_main,null);
    main.setAdapter(new MyAdapter(getContext()));
    this.addView(main); 
} 
```

# java - Joda Time 不能减去一小时

> ID：12568275
> 
> 赞同：0
> 
> 时间：2012-09-24T15:36:24.427
> 
> 标签：java, android, date, jodatime

在我的 android 程序中，我有一个微调器，允许用户选择不同的时间。每个选择都使用 Joda 时间处理以减去分钟数。它适用于 0 到 59 分钟和 61 分钟及更长的时间。但是，当减去 60 分钟时，时间不会更新，而是显示原始时间。

如何让 Joda 时间减去 60 分钟？

微调器：

```
public class MyOnItemSelectedListener implements OnItemSelectedListener {

            public void onItemSelected(AdapterView<?> parent, View view, int pos,
                    long id1) {

                    String mins =     parent.getItemAtPosition(pos).toString();

                    int intmins=0;

                    // process user's selection of alert time
                    if(mins.equals("5 minutes")){intmins = 5;}
                    if(mins.equals("10 minutes")){intmins = 10;}
                    if(mins.equals("20 minutes")){intmins = 20;}
                    if(mins.equals("30 minutes")){intmins = 30;}
                    if(mins.equals("40 minutes")){intmins = 40;}
                    if(mins.equals("50 minutes")){intmins = 50;}
                      if(mins.equals("60 minutes")){intmins = 60;}
                        if(mins.equals("120 minutes")){intmins = 120;}

                    String stringMinutes=""+intmins;
                    setAlarm(intmins, stringMinutes);

                } else {

            }

            public void onNothingSelected(AdapterView parent) {
                mLocationDisplay.setText(" " + location);
            }
        }

            public void setAlarm(int intmins, String mins) {
                // based alarm time on start time of event. TODO get info from database.

                String currentDate;
                SimpleDateFormat myFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
                Date date1 = null;
                DateTime dt;
                currentDate = eventdate + " " + startTimeMilitary;// startTimeMilitary;

            try {
                    date1 = myFormat.parse(currentDate);

                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                dt = new DateTime(date1);
                long dateInMillis = dt.getMillis();
                String sDateInMillis = Long.toString(dateInMillis);

                // subtract the selected time from the event's start time

                String   newAlertTime = subtractTime(dt, intmins);

                 newAlertTime = subtractTime(dt, intmins);
//......}

public String subtractTime(DateTime dt, int minusTime) {

                DateTime greaterDate;

                     greaterDate = dt.minusMinutes(minusTime);

                // newAlertTime is in UTC format
                String newAlertTime = greaterDate.toString();

                long alertInMillis = greaterDate.getMillis();
                String sAlertInMillis = Long.toString(alertInMillis);
                // ////new alert time is a stirng

                setStringAlertInMillis(sAlertInMillis);

                return newAlertTime;

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:56:17.363

**1）删除硬代码。**
采用

```
final String mins = parent.getItemAtPosition(pos).toString();
final Pattern minutes = Pattern.compile("([0-9]+) minutes"); 
final Matcher m = minutes.matcher(mins);
String stringMinutes = "0";
if (mins.matches())
{
   stringMinutes = m.group(1);
}  
setAlarm(Integer.parseInt(stringMinutes), stringMinutes); 
```

而不是你的硬编码

```
String mins = parent.getItemAtPosition(pos).toString();  
// your hardcode is here  
setAlarm(Integer.parseInt(stringMinutes), stringMinutes); 
```

**2）使用** `DateTimeFormatter` **而不是** 您在此日期之前 使用和创建`SimpleDateFormatter`
java 。`Date``SimpleDateFormatter``DateTime`

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("MM/dd/yyyy HH:mm:ss");  
dt = formatter.parseDateTime(currentDate); 
```

**3) Joda**
在这段代码中运行良好，Joda 没有问题。

```
String subtractTime(DateTime dt, int minusTime) 
```

应该运作良好。
调试你的代码，问题出在前面

```
if(mins.equals("5 minutes")){intmins = 5;}
if(mins.equals("10 minutes")){intmins = 10;}  
//... 
```

# android - Options for organizing android app with multiple independent apps

> ID：12568277
> 
> 赞同：0
> 
> 时间：2012-09-24T15:36:26.837
> 
> 标签：android, android-intent, maven-3

**Problem Definition:** We have a fairly large app which has multiple use cases such that they are all independent of each other. For example lets say we have a1, a2, a3 & a4 modules that are independent apps or use cases for our main app 'A'. The independent a1, a2, a3, a4 are all purchasable apps such that the user goes to our website instead of play store and activate either a1 or a2 by paying some fees on our website.

So basically App 'A' is a free app in play-store and is sort of Dashboard with buttons to launch a1, a2, a3, a4\. When the user click on lets say a1 button then we will check if a1 is already installed and launch it but if it is not present then give the user a link to download it.

**Option 1:** Have a main app 'A' and a1, a2, a3, a4 as library project. But with this approach the main app A is too big in size.

**Option 2:** Have a1, a2, a3, a4 build as separate .apk and then put in the assets folder of main app 'A' and then install them as needed. Again size of main app A is bigger.

**Option 3:** Upload a1, a2, a3, a4 to a third party website or play store and download from it as needed. This way the main app remains lighter.

**Observation:** In all these approaches there will be an independent app installed with its own icon on users phone. So basically user can launch from either the Dashboard (which will eventually launch an intent from Activity in a1 app) or user can directly launch app a1.

**Follow-up Question:** Is there any other solution that anyone can suggest to tackle this kind of problem? Another things is by going this approach app a1, a2, a3, a4 can be developed & tested independently of each other.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:28:45.713

对于它的价值，我会选择 Play Store 的选项 3。这是最容易管理和最知名的。比非 Google 网站更受信任。“他们当然喜欢那 30%...

对于您的跟进，我假设是 Eclipse。如果您使用其他东西，请执行类似的操作。

当您将某些东西移至生产环境时，请创建一个发布包（文件夹）。包装内有：

1.  APK
2.  包含 .classpath、源等的导出文件结构。可以将其作为项目导入。
3.  任何支持文件，例如图标集、原始数据等。
4.  用于签名的密钥库的副本。
5.  您的最终 SD 卡图像的副本。
6.  放置在 Play 商店中的营销信息的副本。

将其多次备份到不同的驱动器。我也刻录 DVD。

当您在下一个版本上工作时，将您需要的内容复制到一个新的、待定的版本包中。不要修改当前的发布包。创建一个新的工作区。将 sdcard 复制到 sdcard 文件夹。通过重命名当前文件结构然后导出包含更改的文件结构，在开发过程中进行基准测试。

在开发过程中，每天至少一次使用导出复制工作区文件结构。只需几秒钟。

根据需要添加到此过程。这个想法是，在您发布到 Play 商店之前，您确保所有内容都保存到包含 apk 的发布包中。然后不对包进行任何更改。如果生产版本有错误，请启动新版本。

这是所有标准的编程实践。您可能已经知道这一切。问题在于执行规则。你比任何人都更了解你的环境。您所要做的就是研究可以在发布包中放置哪些组件，以便以后复制该环境。然后你必须执行规则。或者让自己跟随他们。

人们倾向于对源代码进行快速修复或更改，并在上一个生产环境的基础上进行构建。没有人愿意在凌晨 2 点遵守规则。你可能不得不诉诸肢体暴力（知道咏春拳吗？）。或者也许派 Guido 来确保遵守规则。

玩得开心。做一个研究。如果您遇到硬盘崩溃，请询问您的所有员工如何恢复到原始状态。这就是你的发布包中的内容。（这也是您应该每天备份的内容。）

好吧，我已经讲了足够长的时间来告诉你你已经知道的事情。希望我已经引发了一些想法。你会很好的，你听到了。

# asp.net - Adding ignore case in URL rewriting in ASP.Net

> ID：12568279
> 
> 赞同：-1
> 
> 时间：2012-09-24T15:36:34.100
> 
> 标签：asp.net, url-rewriting

I am using following web.config entry for url rewriting to remove .aspx extension.

```
<rewrite url="~/(.+)" to="~/$1.aspx" /> 
```

The problem I am getting here is if I have any image on page, it assigns .aspx extension to image. Also if I tried to access my site like [http://exmaple.com](http://exmaple.com), it get redirected to [http://exmaple.com/default.aspx.aspx](http://exmaple.com/default.aspx.aspx).

I want to know if there is any way to add ignore case in web.config.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:19:31.887

您的重写应该看起来像这样，以删除 .aspx

```
<rewrite>
    <rules>
        <rule name="RewriteASPX">
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            </conditions>
            <action type="Rewrite" url="{R:1}.aspx" />
        </rule>
    </rules>
</rewrite> 
```

# sql - Getting a temporary table returned from dynamic SQL in SQL Server 2005, and parsing

> ID：12568283
> 
> 赞同：2
> 
> 时间：2012-09-24T15:36:48.910
> 
> 标签：sql, sql-server-2005, stored-procedures, dynamic

So I was requested to make a few things.... (it is Monday morning and for some reason this whole thing is turning out to be really hard for me to explain so I am just going to try and post a lot of my code; sorry) Oh - the table idea has to stay. Anything else can be changed but the idea of this table and the parsed field was not my idea but it is my responsibility to execute and make work.

**Edit:** Sorry the post is long. I do suggest a few possible solutions throughout but my problem is ultimately how everything is returned in a dynamically defined table/table variable from something (sp,view,function,anything...). Please take a minute to read the whole post...

First, I needed a table:

```
CREATE TABLE TICKET_INFORMATION ( 
    TICKET_INFO_ID INT IDENTITY(1,1) NOT NULL, 
    TICKET_TYPE INT, 
    TARGET_ID INT, 
    TARGET_NAME VARCHAR(100), 
    INFORMATION VARCHAR(MAX),   
    TIME_STAMP DATETIME DEFAULT GETUTCDATE()
)

-- insert this row for testing...  
INSERT INTO TICKET_INFORMATION (TICKET_TYPE, TARGET_ID, TARGET_NAME, INFORMATION) VALUES (1,1,'RT_ID','IF_ID,int=1&IF_ID,int=2&OTHER,varchar(10)=val,ue3&OTHER,varchar(10)=val,ue4') 
```

The Information column holds data that needs to be parsed into a table. This is where I am having problems. In the resulting table, Target_Name needs to become a column that holds Target_ID as a value for each row in the resulting table.

The string that needs to be parsed is in this format: `@var_name1,@var_datatype1=@var_value1&@var_name2,@var_datatype2=@var_value2&@var_name3,@var_datatype3=@var_value3`

And what I ultimately need as a result (in a table or table variable):

```
RT_ID       IF_ID       OTHER
1           1           val,ue3
1           2           val,ue3
1           1           val,ue4
1           2           val,ue4 
```

And I need to be able to join on the result. Initially, I was just going to make this a function that returns a table variable but for some reason I can't figure out how to get it into an actual table variable. Whatever parses the string needs to be able to be used directly in queries so I don't think a stored procedure is really the right thing to be using.

This is the code that parses the Information string... it returns in a temporary table. In the end, this needs to be passed either just the information string or an ID number or something... doesn't matter what. Or somehow it can be in a view with the ticket_information table.

```
-- create/empty temp table for var_name, var_type and var_value fields 
if OBJECT_ID('tempdb..#temp') is not null drop table #temp
create table #temp (row int identity(1,1), var_name varchar(max), var_type varchar(30), var_value varchar(max)) 

-- just setting stuff up
declare @target_name varchar(max), @target_id varchar(max), @info varchar(max)
    set @target_name = (select target_name from ticket_information where ticket_info_id = 1) 
    set @target_id = (select target_id from ticket_information where ticket_info_id = 1) 
    set @info = (select information from ticket_information where ticket_info_id = 1) 
    --print @info

-- some of these variables are re-used later    
declare @col_type varchar(20), @query varchar(max), @select as varchar(max) 
set @query = 'select ' + @target_id + ' as ' + @target_name + ' into #target; '
set @select = 'select * into ##global_temp from #target'  

declare @var_name varchar(100), @var_type varchar(100), @var_value varchar(100) 
declare @comma_pos int, @equal_pos int, @amp_pos int        
    set @comma_pos = 1
    set @equal_pos = 1
    set @amp_pos   = 0 

-- while loop to parse the string into a table 
while @amp_pos < len(@info) begin  

    -- get new comma position
    set @comma_pos  = charindex(',',@info,@amp_pos+1)   

    -- get new equal position
    set @equal_pos  = charindex('=',@info,@amp_pos+1)   

    -- set stuff that is going into the table 
    set @var_name   = substring(@info,@amp_pos+1,@comma_pos-@amp_pos-1)  
    set @var_type   = substring(@info,@comma_pos+1,@equal_pos-@comma_pos-1) 

    -- get new ampersand position 
    set @amp_pos    = charindex('&',@info,@amp_pos+1) 
    if @amp_pos=0   or @amp_pos<@equal_pos set @amp_pos = len(@info)+1

    -- set last variable for insert into table 
    set @var_value  = substring(@info,@equal_pos+1,@amp_pos-@equal_pos-1)

    -- put stuff into the temp table 
    insert into #temp (var_name, var_type, var_value) values (@var_name, @var_type, @var_value) 

    -- is this a new field?
    if ((select count(*) from #temp where var_name = (@var_name)) = 1) begin 
        set @query = @query + ' create table #' + @var_name + '_temp (' + @var_name + ' ' + @var_type + '); '    
        set @select = @select + ', #' + @var_name + '_temp '
    end 

    set @query = @query + ' insert into #' + @var_name + '_temp values (''' + @var_value + '''); '   
end 

if OBJECT_ID('tempdb..##global_temp') is not null drop table ##global_temp
exec (@query + @select) 

--select @query
--select @select 

select * from ##global_temp 
```

Okay. So, the result I want and need is now in ##global_temp. How do I put all of that into something that can be returned from a function (or something)? Or can I get something more useful returned from the exec statement? In the end, the results of the parsed string need to be in a table that can be joined on and used... Ideally this would have been a view but I guess it can't with all the processing that needs to be done on that information string.

Ideas?

Thanks!

**Edit:** Still looking for answers to this. I would love to have a function that returns a table variable but I don't know how to get the results into a table variable. The result is currently in a global temporary table. Would it work if I defined my table variable in the dynamic portion of the code and then it would just magically be there to return? Or can I somehow select into a table variable from my global temp table, without first defining the columns of the table variable? Or can I create the table variable when I execute the dynamic part? The whole problem is because the columns of the end result are dynamic....... so..... I'm not sure how I could clarify the issues I'm having more. **If a function that returns a table is a good route to go - could someone please provide me with code or a link as an example for returning a table variable with a dynamic column definition from a function? Plz, thnx.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:27:17.947

您可以使用[表值函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)。这将允许您将结果作为要加入的表返回，就像您要求的那样。

```
CREATE FUNCTION dbo.GET_TICKET_INFORMATION (... some parameters... )
RETURNS @TICKET_INFORMATION TABLE 
( 
TICKET_INFO_ID INT IDENTITY(1,1) NOT NULL, 
TICKET_TYPE INT, 
TARGET_ID INT, 
TARGET_NAME VARCHAR(100), 
INFORMATION VARCHAR(MAX),   
TIME_STAMP DATETIME DEFAULT GETUTCDATE()
)
 AS 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:18:43.373

**我使用存储过程返回具有动态列定义的表**

我为全局表生成了动态名称：

```
declare @sp varchar(3)
set @sp = cast( @@spid as varchar(3) )

if object_id ( N'tempdb.dbo.#Periods' ) is not null
    drop table #Periods      
if object_id ( N'tempdb.dbo.##Result' + @sp ) is not null
    execute ( 'drop table ##Result' + @sp ) 
```

我有返回周期表的 sp：

```
create table #Periods
(
    [PERIOD_NUM]    int
    ,[START_DATE]   datetime
    ,[END_DATE]     datetime   
)

insert into #Periods
exec GET_PERIODS_TABLE_SP @pFromDate, @pToDate, @pPeriodType, 0 
```

结果表中的某些字段是动态的：

```
select @PeriodCount = ...

declare @PeriodsScript varchar(max)  

set @PeriodsScript = ''
set @i = 1

while @i <= @PeriodCount
begin
    set @PeriodsScript = @PeriodsScript + ',PERIOD' + cast (@i as varchar(3))

    set @i = @i + 1
end 
```

生成数据并将其插入##Result：

```
declare @script varchar(max)

set @script = 'create table ##Result' + @sp +
            '(ROW_NUM int'+
            ',BRANCH_ID int' +
            ',PARAM_NAME varchar(25)' +
            @PeriodsScript + ')'       

execute ( @script )

execute(
            'insert into ##Result' + @sp + '( ROW_NUM, BRANCH_ID, NOM_SIZE_ID, PARAM_NAME )' +
            'select ( row_number() over( order by BRANCH_ID, NOM_SIZE_ID ) - 1 ) * 3 + 1' +
            '        ,BRANCH_ID' +
            '        ,NOM_SIZE_ID' +
            '        ,''Min.price''' +
            '  from ( ' +
            '        select distinct BRANCH_ID' +
            '                ,NOM_SIZE_ID' +
            '          from ##ResultNomSizePrices' + @sp +
            '        ) as t'
            ) 
```

最后，从结果表中选择：

```
set @script = 
            'select distinct gb.TINY_NAME'+
            '        ,r.GROUP_NAME_1 as group1'+
            '        ,r.GROUP_NAME_2 as group2'+
            '        ,r.GROUP_NAME_3 as group3'+
            '        ,r.PARAM_NAME'+
            '        ,r.ROW_NUM'+
            @PeriodsScript +
            '  from ##Result' + @sp + ' as r'+
            ' inner join dbo.GD_BRANCHES as gb'+
            '    on r.BRANCH_ID = gb.BRANCH_ID'+
            ' order by gb.TINY_NAME'+
            '        ,r.GROUP_NAME_1'+
            '        ,r.GROUP_NAME_2'+
            '        ,r.GROUP_NAME_3'+
            '        ,r.ROW_NUM'

 execute ( @script ) 
```

*ps 对不起我的英语*

# linux - linux support 802.1ag and Y1731

> ID：12568284
> 
> 赞同：1
> 
> 时间：2012-09-24T15:36:51.213
> 
> 标签：linux, network-protocols

What I need to do is to use CFM OAM (802.1ag) open source client on OpenWRT routers running linux

Is there is any implementation in Linux networking stack for

*   802.1ag ?
*   Y1731 ?

If yes please mention the linux version.

# c++ - Cannot convert from string to hexadecimal

> ID：12568286
> 
> 赞同：-2
> 
> 时间：2012-09-24T15:36:59.983
> 
> 标签：c++, hex

> **Possible Duplicate:**
> [C++ convert hex string to signed integer](https://stackoverflow.com/questions/1070497/c-convert-hex-string-to-signed-integer)

I have the string line which is a hexadecimal number say like 12ab43c..(but I have read it as a string) and I would like to pass it to an unsigned char* linehex or directly to a hexadecimal so I can later use it in my program for further computations. Which is the most efficient way to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:42:27.857

最简单的可能是将其作为数字读取，而不是将其作为字符串读取，然后进行转换。例如：

```
some_stream >> std::hex >> your_number; 
```

快速演示代码：

```
#include <iostream>

int main() {    
    int x;

    std::cin >> std::hex >> x;

    std::cout << x << "\n";
    return 0;
} 
```

输入：`ff`
输出：`255`

# java - How to make JFrame to be modal?

> ID：12568290
> 
> 赞同：2
> 
> 时间：2012-09-24T15:37:06.577
> 
> 标签：java, swing, jframe, jdialog, modality

> **Possible Duplicate:**
> [How to make a JFrame Modal in Swing java](https://stackoverflow.com/questions/1481405/how-to-make-a-jframe-modal-in-swing-java)

How to make `JFrame` to be modal?

Please don't suggest to use `JDialog`. The question is about `JFrame`. How to make modal namely it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:43:37.687

要制作 JFrame 模态，您必须自己编写代码，将 setEnable(false) 设置为主窗口（您从那里打开新的 JFrame）。当用户退出 Jframe 时使其 setEnable(true)

br

# php - 使用 .htaccess 将 post.php?post_id=20 重写为 /post/this-is-the-title/

> ID：12568291
> 
> 赞同：0
> 
> 时间：2012-09-24T15:37:10.307
> 
> 标签：php, .htaccess, mod-rewrite, redirect, url-rewriting

我是 .htacces 的新手，多年来我一直试图从以下位置获取我的域：

```
www.domain.com/post.php?post_id=20 
```

像这样的东西：

```
www.domain.com/post/this-is-the-title/ 
```

正如我所说，我是 .htaccess 的新手，但任何事情都会有所帮助！注意：我会以某种方式从 SQL 数据库中获取我的博客文章的标题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:41:24.237

如果页面标题是数据库驱动的（或者是动态的），我看不出你怎么能摆脱 .htaccess 重写。在 PHP 脚本中使用路由会更有意义。

我在[这里](http://mingos.eu/2012/09/the-basics-of-uri-routing)写了一个非常简单的路由方法。它仅供人们进入该主题，但您应该能够基于此构建数据库驱动的路由器。

本质上，通过 index.php 路由您的所有流量，获取请求 URI 并决定要加载哪些资源。

[编辑]

让我详细说明一下，使用我博客文章中的信息。

假设您已设置并运行您的站点，首先将流量定向到 index.php。您在 .htaccess 中执行此操作，可以这样完成：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

然后，在 index.php（或从 index.php 调用的脚本）中，您可以获得请求 URI：

```
$uri = $_SERVER["REQUEST_URI"]; 
```

好的，到目前为止一切顺利。现在让我们假设您的数据库包含页面内容以及页面别名。uri 很可能是页面别名，所以你需要做的就是这样：

```
$pdo = new PDO(/* your db connection params */);
$page = $pdo
    ->query("SELECT * FROM pages WHERE alias = :alias",
    array("alias" => $uri)
    )
    ->fetch(); 
```

此时，您应该拥有与 URI 字符串中的标题（或别名）相对应的页面内容。您现在需要做的就是以您想要的任何方式显示它：

```
echo $page["content"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:43:06.753

您不能使用 .htaccess 执行此操作，因为您需要“以某种方式从 SQL 数据库中获取博客文章的标题”，使用 PHP 进行重定向。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:41:18.963

你不能。您必须将标题放在查询字符串上。.htaccess 无法安全地从数据库中获取任何内容。既然要重写 url，为什么不直接在 URI 中写文章标题呢？

# javascript - JavaScript - 意外的令牌错误

> ID：12568294
> 
> 赞同：0
> 
> 时间：2012-09-24T15:37:14.393
> 
> 标签：javascript, syntax-error

我对 JavaScript 很陌生，我正在尝试在这里重新创建这段代码：

效果： [http ://www.clicktorelease.com/code/css3dclouds/](http://www.clicktorelease.com/code/css3dclouds/)

教程： [http ://www.clicktorelease.com/tutorials/css3dclouds/#creating_a_world_and_a_camera](http://www.clicktorelease.com/tutorials/css3dclouds/#creating_a_world_and_a_camera)

*未捕获的 SyntaxError：意外的标识符*

出于某种原因，我的第 25 行出了点问题，我不确定它是什么：

```
 /*
        Clears the DOM of previous clouds bases 
        and generates a new set of cloud bases
    */
    function generate() {
        objects = [];
        layers = [];
        if ( world.hasChildNodes() ) {
            while ( world.childNodes.length >= 1 ) {
                world.removeChild( world.firstChild );       
            }
        }
        for( var j = 0; j <; 5; j++ ) {
            objects.push( createCloud() );
        }
    } 
```

完整的 JavaScript：

```
(function() {

window.onload = function() {

    /*
        objects is an array of cloud bases
        layers is an array of cloud layers
    */
    var objects = [],
        layers = [];

    /*
        Clears the DOM of previous clouds bases 
        and generates a new set of cloud bases
    */
    function generate() {
        objects = [];
        layers = [];
        if ( world.hasChildNodes() ) {
            while ( world.childNodes.length >= 1 ) {
                world.removeChild( world.firstChild );       
            }
        }
        for( var j = 0; j <; 5; j++ ) {
            objects.push( createCloud() );
        }
    }

    /*
        Creates a single cloud base and adds several cloud layers.
        Each cloud layer has random position ( x, y, z ), rotation (a)
        and rotation speed (s). layers[] keeps track of those divs.
    */
    function createCloud() {

        var div = document.createElement( 'div'  );
        div.className = 'cloudBase';
        var t = 'translateX( ' + random_x + 'px ) \
            translateY( ' + random_y + 'px ) \
            translateZ( ' + random_z + 'px )';
        div.style.transform = t;
        world.appendChild( div );

        for( var j = 0; j < 5 + Math.round( Math.random() * 10 ); j++ ) {
            var cloud = document.createElement( 'div' );
            cloud.className = 'cloudLayer';

            cloud.data = { 
                x: random_x,
                y: random_y,
                z: random_z,
                a: random_a,
                s: random_s
            };
            var t = 'translateX( ' + random_x + 'px ) \
                translateY( ' + random_y + 'px ) \
                translateZ( ' + random_z + 'px ) \
                rotateZ( ' + random_a + 'deg ) \
                scale( ' + random_s + ' )';
            cloud.style.transform = t;

            div.appendChild( cloud );
            layers.push( cloud );
        }

        return div;
    }

    /*
        Iterate layers[], update the rotation and apply the
        inverse transformation currently applied to the world.
        Notice the order in which rotations are applied.
    */
    function update (){

        for( var j = 0; j < layers.length; j++ ) {
            var layer = layers[ j ];
            layer.data.a += layer.data.speed;
            var t = 'translateX( ' + layer.data.x + 'px ) \
                translateY( ' + layer.data.y + 'px ) \
                translateZ( ' + layer.data.z + 'px ) \
                rotateY( ' + ( - worldYAngle ) + 'deg ) \
                rotateX( ' + ( - worldXAngle ) + 'deg ) \
                scale( ' + layer.data.s + ')';
            layer.style.transform = t;
        }

        requestAnimationFrame( update );

    }

}; //-window.onload

}()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:39:08.947

您在循环中缺少一个值（即您有一个额外的`;`）：

```
for (var j = 0; j < ; 5; j++) 
```

大概应该是

```
for (var j = 0; j < 5; j++) 
```

# java - JPA 2.0 CriteriaBuilder 帮助 - 如何选择与某个 where 查询匹配的最大（最大值）值？

> ID：12568296
> 
> 赞同：2
> 
> 时间：2012-09-24T15:37:21.673
> 
> 标签：java, hibernate, jpa, ejb, criteria-api

抱歉这个相当基本的问题，但我必须让某种原型非常快速地工作，这是我第一次涉足 JPA。

我有一个类 System，它有一个快照项目列表，每个项目都有一个数字 ID 和一个 SystemID。

如何查询快照以说出以下内容：

```
select top 1 ID from Snapshots
where Snapshots.SystemID = X 
order by Snapshots.ID desc; 
```

我知道如何将 where 查询放入，但不确定将我的“最大”位放在哪里。

谢谢！！

```
public Snapshot GetMostRecentSnapshotByID(int systemID) {

    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<mynamespace.Snapshot> criteria = 
            cb.createQuery(mynamespace.Snapshot.class);
    Root<mynamespace> snapshot = criteria.from(mynamespace.Snapshot.class);
    criteria.where(cb.equal(snapshot.get(Snapshot_.systemID), systemID));

    //OK -- where does this guy go?
    cb.greatest(snapshot.get(Snapshot_.id));

    return JPAResultHelper.getSingleResultOrNull(em.createQuery(criteria));
} 
```

澄清：我的快照类有以下（片段）@

```
Entity
public class Snapshot implements Serializable {

    @Id
    @GeneratedValue
    private int id;

    @ManyToOne
    @JoinColumn(name = "systemID", nullable = false)
    private System system; 
```

我可以查询数字 id 还是使用 System object 来查找特定系统的快照？

对不起，如果这令人困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:21:40.733

您对 jpa 使用实体和属性而不是表和列感到有些困惑；如果您正在学习，我建议您首先尝试使用 jpql 实现您的查询，例如：

```
String q = "from Snapshot s where s.systemID = :systemID order by s.id desc";
TypedQuery<Snapshot> query = em.createTypedQuery(q, Snapshot.class);
query.setParameter("systemID", systemID);
return query.getFirstResult();
// return a Snapshot object, get the id with the getter 
```

（最好将（@OneToMany）快照映射到系统实体而不是使用原始 ID）

那么您可以尝试使用 CriteriaBuilder（此处不使用元模型）：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Object> cq = cb.createQuery();
Root<Snapshot> r = cq.from(Snapshot.class);
cq.where(cb.equal(r.get("systemID"), systemID));
cd.orderBy(cb.desc(r.get("id")));
em.createQuery(cq).geFirsttResult(); 
```

如果你想做一个`where...and...`（但在这个问题上不是你的情况），它会是：

```
[...]
Predicate p1 = cb.equal(r.get("systemID"), systemID));
Predicate p2 = cb. /* other predicate */
cb.and(p1,p2);
[...] 
```

编辑：

> 我可以查询数字 id 还是使用 System object 来查找特定系统的快照？

当然，你可以这样做（假设 System 有一个名为 id 的 @Id 属性）：

```
String q = "from Snapshot s where s.system.id = :systemID order by s.id desc";
[...] 
```

其中 s.system.id 表示：s（快照）的属性系统（类 System）的属性 id（整数）。

或者，如果您有 System 实体，则可以直接比较对象：

```
String q = "from Snapshot s where s.system = :system order by s.id desc";
query.setParameter("system", system);
[...] 
```

使用 CriteriaBuilder（和元模型）：

```
Metamodel m = em.getMetamodel();
Root<Snapshot> snapshot = cq.from(Snapshot.class);
Join<Snapshot, System> system = snapshot.join(Snapshot_.system);
cq.where(cb.equal(System_.id, systemID));
[...] 
```

# spring - Spring JS 部分请求 - 会话过期

> ID：12568297
> 
> 赞同：2
> 
> 时间：2012-09-24T15:37:27.930
> 
> 标签：spring, spring-js, expired-sessions

我正在使用 Spring JS (Spring WebFlow) 来执行 ajax 请求。例如：

```
<input type="submit" id="searchButton" name="_eventId_search" value="Find" onClick="wait(this.id)" />
<script type="text/javascript">
    Spring.addDecoration(new Spring.AjaxEventDecoration({
        elementId: "searchButton",
        formId: "searchModel",
        event: "onclick",
        params: {fragments: "content"}
    }));
</script> 
```

当 HTTP 会话过期并且 Spring Security 将登录页面作为部分响应发送时，就会出现问题。我知道，这个问题会影响所有 AJAX 库，但我找不到有关 Spring JavaScript (Dojo) 的任何信息。你有一个（简单的）解决方案吗？

非常感谢

# c# - WinForms 动态指定和管理 SQL 连接字符串信息

> ID：12568298
> 
> 赞同：0
> 
> 时间：2012-09-24T15:37:29.380
> 
> 标签：c#, sql, vb.net, winforms, enterprise-library

我要求允许用户在第一次使用时指定连接到数据库的连接字符串，并稍后在 Windows 客户端应用程序中更改它。我目前的想法是将信息存储在一个文本文件中，每次用户打开应用程序使用时都会检查该文件，并在信息已被删除或无效时提示用户更新。但是，我不相信这是处理此问题的安全方法，并且希望有其他建议可以帮助我更好地管理此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:40:59.160

你可以

1.  对 SQL 使用 Windows 身份验证，这样您就无需管理密码。
2.  使用**[CryptProtectData](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)**对密码进行编码/解码并保存在磁盘上

来自 CryptProtectData 文档

> CryptProtectData 函数对 DATA_BLOB 结构中的数据执行加密。通常，只有与加密数据的用户具有相同登录凭据的用户才能解密数据。此外，加密和解密通常必须在同一台计算机上完成。有关异常的信息，请参阅备注。

因此，即使 SQL 和 windows 可能有不同的登录名，如果存在 1-1 映射，您保存的密码加密文本相对安全

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:41:25.527

按照惯例，我会将它们存储在 app.config 中。您可以轻松地修改代码中的设置。[就是这样](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)

它们也应该被加密，这也可以在应用程序的启动中完成。您可以像修改设置一样轻松地从代码中加密/解密。[方法如下](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:43:46.803

我会将连接字符串存储在 App.Config 或注册表中。我认为您不能在运行时修改 App.Config，因此如果您的应用程序使用数据库，那应该是您的首选。如果没有，请使用平面文件或注册表。你肯定想加密它。有关如何加密和解密字符串以及 Base64 编码的信息，请参阅[此问题。](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:09:14.900

首先，我不会编写您自己的对话框来获取初始连接字符串；相反，您可以使用 Microsoft 发布的 VS2010 数据库连接对话框（[从此处下载](http://archive.msdn.microsoft.com/Connection)）。这将完全符合您的要求，而无需您进行艰苦的工作（以及几乎任何您想要的远程连接）。

不，您对连接字符串信息的持久性不应导致任何重大安全问题；因为连接字符串本身应该为连接提供安全性；您必须确保保存的连接字符串不包含密码 - 并为每个连续连接打开对话框。如果您使用 Windows 身份验证，没有密码，那么当然可能存在安全问题，但我会说这取决于用户使用正确的安全性。

如果以上内容还不够，我会将连接字符串存储在`Properties.Settings.Default`其中，并使用其中一个 .NET 库甚至哈希来加密该字符串。有很多方法可以解决这个问题，但我会使用引用的对话框来获取初始连接字符串，然后将其保存在应用程序的 .config 中并带有属性。简单的。

我希望这有帮助。

# jqgrid - jqgrid - 页面卸载之前的任何事件

> ID：12568301
> 
> 赞同：0
> 
> 时间：2012-09-24T15:37:34.903
> 
> 标签：jqgrid

jqGrid 在当前页面卸载之前是否有任何事件？我打开了虚拟分页，当你在 2 页之间时，例如第 1 页和第 2 页，我想在第 2 页加载时触发一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:42:01.323

您可以使用该`loadComplete`事件来捕获第 2 页何时加载，这似乎应该足够好了。

# java - Android webview 中的 HTML5 音频静音

> ID：12568304
> 
> 赞同：3
> 
> 时间：2012-09-24T15:37:39.340
> 
> 标签：java, android, jquery-mobile, android-webview, html5-audio

我在 android webview 中使用 HTML5 音频播放器。我想静音音频，我正在使用这样的代码

```
 this.mute = function()
        {
            console.debug("Muted");
            if(_audioHtml.muted == undefined) {
                alert("Doesn't exist");
            }
            else {
                if(_audioHtml.muted === true) {
                    alert("Muted");
                }
                else if (_audioHtml.muted === false) {
                    alert("Non Muted");
                }
                else {
                    alert("None of them");   
                }
            }
            _audioHtml.muted = true;
        }; 
```

每次通话后，我都可以看到 muted 的值发生了变化。但它不会对设备产生任何影响。它总是以设定的音量产生声音。我怎么能在android中做到这一点。我使用的是安卓 4.0.4。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:24:08.567

假设像这样的音频标签`<audio id="player" src="something.mp3" />`，您应该`muted`使用 Javascript 切换标签本身的属性......类似

```
$('#player').muted = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:10:10.747

如果您以这种方式设置音频，它将起作用：（html5 标记将被静音）在您的 JAVA 活动中：

```
wv.loadUrl("file:///android_asset/index.html");     
 wv.addJavascriptInterface(this, "jInterface"); 
```

在您的 html 文件中：静音：

```
<script>
jInterface.mute();
</script> 
```

现在回到你的 java 活动：

```
public void mute()
        {
             audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-23T01:30:50.777

我还没有找到适用于我的 MotoX 4.2 设备的解决方案，但这在大多数情况下都可以正常工作，基本上你在视频开始播放后就暂停了

这里需要注意的是，我的三星 4.3 设备过早地触发“播放”，它应该在视频实际开始播放时触发，但在视频开始加载时触发

```
if (sdkVersion < 4.4) {
    player.addEventListener("timeupdate", pauseIfPlaying); // check player.currentTime > 0
} else {
    player.addEventListener("playing", function () {
        player.muted = true;
    });
} 
```

# java - 如何获得按键/按键的价值？

> ID：12568306
> 
> 赞同：0
> 
> 时间：2012-09-24T15:37:45.493
> 
> 标签：java

我需要创建一个在每次按键时触发事件的程序（如按键记录器）。我无法获得关键值。该程序将在每次按键触发事件后运行。我在网上没有找到任何与此相关的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:48:37.040

什么都找不到，这很奇怪。您应该用户`KeyListener`记录关键事件。如果只有一个事件（例如 keyUP、keyDown 或 keyPress）是相关的，则`KeyAdapter`改为使用。

问题是键侦听器可以附加到任何 java 屏幕元素并仅捕获分派到该元素的事件。例如，您可以创建 Frame 并向其添加关键侦听器，并使用此帧捕获所有关键事件。

您无法在 Java 应用程序之外捕获关键事件。

如果您仍想这样做，您可以使用以下解决方法。创建透明窗口并向其添加侦听器。侦听器应该捕获事件，记录它们，然后在屏幕上的同一位置使用`java.awt.Robot`.

此参考将帮助您创建透明窗口：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shape_windows.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)

其他方式是直接或间接使用 JNI/JNA。例如 xdotools 可以帮助你。

# qt - Qt：布局的潜在副作用？

> ID：12568307
> 
> 赞同：2
> 
> 时间：2012-09-24T15:37:50.387
> 
> 标签：qt, pyside

```
from PySide.QtGui import *
import sys

app = QApplication(sys.argv)
layout = QHBoxLayout()
print issubclass(type(layout), QWidget)
# Layout is not a kind of QWidget

window = QWidget()
window.resize(500, 500)
window.show()
window.setLayout(layout)

butt = QPushButton("asdf", parent = None)
butt.resize(100, 100)
butt.show()
layout.addWidget(butt)

print butt.parent() 

app.exec_() 
```

的父对象`butt`实际上`window`是。`window`但我还没有明确地将其父级设置为。我可以说布局对象有一些副作用，可能会将添加的小部件的父级设置为它应用到的容器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:42:36.800

是的。

[文档中的相关部分](http://doc.qt.digia.com/4.7-snapshot/layout.html#tips-for-using-layouts)：

> 使用布局时，在构造子小部件时不需要传递父级。布局将自动重新设置小部件的父级（使用 QWidget::setParent()），以便它们是安装了布局的小部件的子级。
> 
> 注意：布局中的小部件是安装了布局的小部件的子级，而不是布局本身的子级。小部件只能有其他小部件作为父级，而不是布局。

# regex - RegEx \D 也匹配行的开头和结尾

> ID：12568309
> 
> 赞同：0
> 
> 时间：2012-09-24T15:37:53.490
> 
> 标签：regex, pcre

我需要找到 3 个数字和 3 个其他字符的行：我想我使用以下 RegEx：

```
^\d{3}\D{3}$ 
```

但是使用以下示例文本文件并运行上面的 RegEx（文本中必须包含空行）：

```
1
12
123xxx
123y

aaabb 
```

问题是有两个匹配：123xxx（这很好），但也匹配了 123y！我怀疑原因是“y”+行尾+下一行的开头也匹配。

如何告诉正则表达式引擎忽略行开头和结尾 \D 并仅匹配字符，而不是位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:52:29.423

UltraEdit 中的行为`$`会根据您是否选中“仅匹配整个单词”而改变。要获得您想要的行为，您需要确保选中该选项。您的正则表达式不需要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:42:32.103

也许：

```
/^\d{3}\D{3}$/m 
```

`m`手段_

> 将字符串视为多行。也就是说，将“^”和“$”从匹配字符串的开头或结尾更改为匹配字符串中任何位置的任何行的开头或结尾。

[http://perldoc.perl.org/perlre.html](http://perldoc.perl.org/perlre.html)

我不完全了解 UltraEdit，但我希望它会有类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:43:51.787

尝试这个 ：

```
^\d{3}[\S]{3}$ 
```

匹配 3 位数字后跟三个非空白字符的行。

# iphone - Photoshop 中的 iPhone 设计分辨率

> ID：12568313
> 
> 赞同：2
> 
> 时间：2012-09-24T15:38:18.467
> 
> 标签：iphone, cordova, photoshop

我想知道如何在 Photoshop 中更改新 iPhone 5 的设计。

通常我在 Photoshop 中为 iPhone 创建设计/背景，视网膜分辨率为**640x960**。由于视网膜分辨率与较旧的分辨率成正比，因此我可以降低到 320x480。

但是 iPhone 5 呢？屏幕更高。我是新分辨率（**1136 x 640**）

在 iphone4s< 和 iPohne 5 上显示 Photoshop 设计的最佳解决方案是什么？

**在不创建新设计的情况下如何处理？** 如果它是 iPhone 5，我怎么能告诉应用程序只使用它？（我正在使用**PhoneGap/Cordova**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:30:02.960

您可以使用 960x640 创建原始设计。然后，您可以添加一个不同的图层来定位您的元素，以获得 1136x640 分辨率。导出时，如果要针对 iPhone < 5 的 iPhone，请隐藏高图层。针对 iPhone 5 时，只需将图层作为顶视图，您就可以动态更改画板。

此外，iOS 6 不会自动定位 iPhone 5 图像（默认除外）。因此，如果您想使用不同的图像，您必须检查自己的高度。

基本上，如果您的 screenSize.height == 568，那么您使用的是 iPhone 5。

# java - windows机器上java网络慢

> ID：12568318
> 
> 赞同：2
> 
> 时间：2012-09-24T15:38:32.253
> 
> 标签：java, sockets, networking, communication

我编写了一些简单的客户端服务器应用程序 - 服务器接受连接，客户端发送 100m 数据然后连接关闭。

我有一台双启动机器，当应用程序在 linux 上运行时，它的运行速度比在 windows 上快 10 倍（试过 7 和 xp）

这是为什么？

顺便说一句，用 perl 编写的等效代码在两个操作系统上运行相同（在 linux 上比 java 慢 6 倍，但在 windows 上比 java 快得多）

**编辑** 这是一个小代码示例

```
private static void runServer() throws Exception {
    try(ServerSocket ss = new ServerSocket(SERVER_PORT); Socket s = ss.accept()){
        InputStream in = s.getInputStream();
        byte[] chunk = new byte[CHUNK_SIZE];
        long time = System.currentTimeMillis();
        for (int i = 0; i < NUM_BYTES; i += in.read(chunk)) {
            continue; //empty for!
        }
        System.out.println("Time: " + (System.currentTimeMillis() - time));
    }
}

private static void runClient() throws Exception {
    byte[] chunk = createJunk(CHUNK_SIZE);
    try (Socket sock = new Socket(SERVER_IP, SERVER_PORT)) {
        OutputStream out = sock.getOutputStream();
        for( long toSend = CHUNK_SIZE, sent = 0;
             sent < NUM_BYTES;
             sent += toSend, toSend = Math.min(CHUNK_SIZE, NUM_BYTES - sent))
        {
            out.write(chunk, 0, (int) toSend);
        }
        out.flush();
    }
    System.out.println("Done.");
} 
```

客户端始终从不同于服务器机器但在本地网络中的 Windows 机器运行。

# android - 我如何添加自定义选项菜单图标 Android

> ID：12568321
> 
> 赞同：0
> 
> 时间：2012-09-24T15:38:43.923
> 
> 标签：android, xml, eclipse, styles, icons

我想将海关图标添加到我的选项菜单中，如下所示：

![在此处输入图像描述](../Images/493dc533892c4449b8c7f8a34522d9b0.png)

如何使用 menu.xml 中的自定义图标做到这一点？

或者，如果您知道默认图标列表，我对此很感兴趣...

这是我的实际 menu.xml 代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never" >
    </item>
    <item android:id="@+id/item1" android:title="Accueil" android:titleCondensed="Accueil" android:icon="@android:drawable/ic_menu_home"></item>
</menu> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:40:43.940

在项目标签内，使用`android:icon="@drawable/your_icon"`. 那应该行得通。

# java - 在Java（API）中合并两个音频文件（不是concat）？

> ID：12568326
> 
> 赞同：7
> 
> 时间：2012-09-24T15:39:22.287
> 
> 标签：java, audio

我需要将两个音频文件合并在一起。基本上将一个音频文件放在另一个文件之上并制作一个文件。我看过一些关于连接两个音频文件的帖子，但没有关于此的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:42:06.613

我建议你看看[JSyn](http://www.softsynth.com/jsyn/)。我不鼓励您尝试自己做，因为它可能会因多种音频格式而变得复杂。它还支持更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T22:44:05.927

这对我有用。使用 jresources.org 来帮助您。您可以使用他们的示例： http: [//www.jsresources.org/examples/MixingAudioInputStream.java.html](http://www.jsresources.org/examples/MixingAudioInputStream.java.html)。对于 org.tritonus.share.sampled.TConversionTool 包，如果您在使用他们的库时遇到问题，请下载他们的源代码（[http://sourceforge.net/projects/tritonus/files/](http://sourceforge.net/projects/tritonus/files/)）：它是开源的，并尝试使用它。我试过了，它对我有用：D。我很感谢那些家伙！

# ckeditor - CKEditor 字体和大小菜单不显示实际样式

> ID：12568329
> 
> 赞同：0
> 
> 时间：2012-09-24T15:39:32.630
> 
> 标签：ckeditor, wysiwyg, font-size

我正在尝试为以下问题找到解决方案：

如果我在编辑器中选择文本并使用“字体”下拉菜单更改字体，当我在编辑器中编辑部分文本时，此下拉菜单将显示正确的字体。但如果我还没有更改字体，那么“字体”下拉菜单不会显示实际字体。“尺寸”下拉菜单也存在同样的问题。

如果可能的话，请至少帮助我确定我必须挖掘的方向以解决这个烦人的问题。

感谢您的时间。

编辑前：http: [//farm9.staticflickr.com/8440/8019979666_cac44116c6_b.jpg](http://farm9.staticflickr.com/8440/8019979666_cac44116c6_b.jpg)

编辑后：http: [//farm9.staticflickr.com/8170/8019969770_d7e1456f86_z.jpg](http://farm9.staticflickr.com/8170/8019969770_d7e1456f86_z.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:05:07.457

这是符合预期的，因为在编辑发生之前实际上没有任何用户输入的字体或大小定义。它基本上可以是任何字体，并且可以使用正在查看内容的页面的 CSS 样式表来定义。当文本在编辑器中时，由`content.css`编辑器的 指定，默认使用字体

```
font-family: Arial, Verdana, sans-serif; 
```

然而，编辑器的实际输出通常不使用相同的样式表，因此字体可能是浏览器的默认值，也可能是托管编辑器内容的页面的样式表中定义的字体。

下拉菜单指定用户为文本选择的字体 - 如果用户没有选择任何内容并将其保留为默认值，则该框不应显示任何内容:)

# java - 引起：com.sybase.jdbc2.jdbc.SybSQLException：表中的detail_id列不允许空值

> ID：12568330
> 
> 赞同：0
> 
> 时间：2012-09-24T15:39:35.920
> 
> 标签：java, sql, spring, hibernate, sybase

我有两个表，我正在尝试使用 Hibernate 在它们之间建立一对一的映射。

**ExamDetail.java**

```
package com.hibernate.mapping;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="exam_detail")
public class ExamDetail {

    private int id;
    private String fullName;
    private int numberOfQuestions;
    private int passingPercentage;

    @Id
    @GeneratedValue
    @Column(name="id")
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getFullName() {
        return fullName;
    }
    public void setFullName(String fullName) {
        this.fullName = fullName;
    }
    public int getNumberOfQuestions() {
        return numberOfQuestions;
    }
    public void setNumberOfQuestions(int numberOfQuestions) {
        this.numberOfQuestions = numberOfQuestions;
    }
    public int getPassingPercentage() {
        return passingPercentage;
    }
    public void setPassingPercentage(int passingPercentage) {
        this.passingPercentage = passingPercentage;
    }
} 
```

**考试.java**

```
package com.hibernate.mapping;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToOne;
import javax.persistence.Table;

@Entity
@Table(name="exam")
public class Exam {

    private int id;
    private String shortName;
    private ExamDetail detail;

    @Id
    @GeneratedValue
    @Column(name="id")
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getShortName() {
        return shortName;
    }
    public void setShortName(String shortName) {
        this.shortName = shortName;
    }

    @OneToOne(cascade=CascadeType.PERSIST)
    @JoinColumn(name="detail_id")
    public ExamDetail getDetail() {
        return detail;
    }
    public void setDetail(ExamDetail detail) {
        this.detail = detail;
    }
} 
```

**测试映射.java**

```
package com.hibernate.mapping;

import org.hibernate.Session;

import com.hibernate.util.HibernateUtil;

public class TestMapping {

    public static void main(String[] args) {
        Session session = HibernateUtil.beginTransaction();

        Exam exam = new Exam();
        exam.setShortName("SCJA");

        ExamDetail detail = new ExamDetail();
        detail.setFullName("Sun Certified Associate");
        detail.setNumberOfQuestions(50);
        detail.setPassingPercentage(60);

        exam.setDetail(detail);

        session.save(exam);
        HibernateUtil.commitTransaction();
    }
} 
```

当我运行这段代码时，我遇到了以下异常：-

> **线程“主”org.hibernate.exception.ConstraintViolationException 中的异常：无法插入：[com.hibernate.mapping.Exam]** 在 org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:94) 在 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66) 在 org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java :64) 在 org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2666) 在 org.hibernate.action.EntityIdentityInsertAction 的 org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2186)。在 org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321) 在 org.hibernate.event 的 org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279) 执行(EntityIdentityInsertAction.java:71) .def.AbstractSaveEventListener。performSave(AbstractSaveEventListener.java:204) 在 org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130) 在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210) 在 org.hibernate .event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56) at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195) at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java :50) 在 org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:562) 在 org.hibernate.impl.SessionImpl.save(SessionImpl.java:550) 在 org.hibernate.impl.SessionImpl.save(SessionImpl.java:546) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun .reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext .java:342) at $Proxy14.save(Unknown Source) at com.hibernate.mapping.TestMapping.main(TestMapping.java:22) 原因：reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext. java:342) at $Proxy14.save(Unknown Source) at com.hibernate.mapping.TestMapping.main(TestMapping.java:22) 原因：reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext. java:342) at $Proxy14.save(Unknown Source) at com.hibernate.mapping.TestMapping.main(TestMapping.java:22) 原因： **com.sybase.jdbc2.jdbc.SybSQLException：表考试中的列 detail_id 不允许空值。**
> 
> 在 com.sybase.jdbc2.tds.Tds.processEed(Tds.java:2535) 在 com.sybase.jdbc2.tds.Tds.nextResult(Tds.java:1916) 在 com.sybase.jdbc2.jdbc.ResultGetter.nextResult (ResultGetter.java:69) 在 com.sybase.jdbc2.jdbc.SybStatement.nextResult(SybStatement.java:201) 在 com.sybase.jdbc2.jdbc.SybStatement.nextResult(SybStatement.java:182) 在 com.sybase。 jdbc2.jdbc.SybStatement.executeLoop(SybStatement.java:1596) 在 com.sybase.jdbc2.jdbc.SybStatement.execute(SybStatement.java:1588) 在 com.sybase.jdbc2.jdbc.SybPreparedStatement.execute(SybPreparedStatement.java: 580）在 org.hibernate.id.IdentityGenerator$InsertSelectDelegate.executeAndExtract(IdentityGenerator.java:138) 在 org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57) ... 还有 22 个

我究竟做错了什么 ？

有什么遗漏的陈述吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:43:21.820

您需要参考 JPA 中的 ID 生成。

这里：参考

[JPA 示例](http://www.objectdb.com/api/java/jpa/OneToOne)

[身份生成](http://www.objectdb.com/java/jpa/entity/id)

# php - 如何从 Zend_Auth 会话中获取会话 ID？

> ID：12568331
> 
> 赞同：2
> 
> 时间：2012-09-24T15:39:35.017
> 
> 标签：php, zend-framework, zend-auth, zend-session

使用默认的[Zend_Auth](http://framework.zend.com/manual/1.12/en/zend.auth.html)会话存储（PHP 会话），它创建一个会话 ID 并将其放入 cookie 中。如果我想获取经过身份验证的用户的用户名（身份），该`Zend_Auth::getInstance()->getIdentity()`方法会得到它。但是，我想获取用户的会话 ID。我可以通过查看`$_COOKIE`或使用来了解它，`session_id()`但这似乎很老套，如果我离开 PHP Session 存储，它可能会损坏吗？那么获取 Zend_Auth 会话的当前会话 ID 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T16:39:53.927

我不认为你会找到一个很好的方法来做到这一点。如果存在这样的方法，它将在 中定义`Zend_Auth_Storage_Interface`，但非会话类型的存储不一定具有等效的会话 ID，因此 auth 存储类对此没有任何抽象。您最接近的可能是：

```
Zend_Session::getId() 
```

但这只是调用 PHP 的`session_id()`，因为`Zend_Session`它依赖于内置的 PHP 会话功能。

# jquery - 未捕获的 SyntaxError：document.ready 中的意外标识符

> ID：12568332
> 
> 赞同：2
> 
> 时间：2012-09-24T15:39:36.980
> 
> 标签：jquery

我知道这是一个常见问题，但我已经对之前回答的问题进行了研究，但似乎找不到我的错误。

作为我正在制作的应用程序的一部分，当页面加载时，document.ready 函数应该查看无序列表中的每个列表项，检查 id 是否包含单词“video”，以及是否包含然后执行一些操作。

但是，我的代码不断收到相同的错误：

```
Uncaught SyntaxError: Unexpected identifier 
```

稍微摆弄一下代码后，当我取出 :contain 部分时，错误消失了，但在检查了 jQuery 文档后，我认为我正确使用了它。

您能给我的任何帮助将不胜感激：

代码：

```
$(document).ready(function() {
    $('ul.thumbnails li a img').each(function() {
        if($(this).attr('id'):contains('video')){
            var $parent = $(this).closest('a');
            $parent.remove();
        }
    });
}); 
```

PS 我的代码中的另一个实例使用 :contains 但也抛出此错误

```
$(".span4 img").click(function(){
    if($(this).attr('id'):contains('video')){
    var id = $(this).attr('id').replace(/video/, '');
    console.log(id);
    $(this).addClass('hideicon');
    $(this).parent('.span4').prepend('<video id="vid></video>');
    $(this).siblings("video").trigger("play");
    $("video#vid" + id).bind("ended", function() {
           $("#video" + id).removeClass('hideicon');
           $("video#vid" + id).remove();
    });

    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:43:28.623

引发的错误与您对冒号的使用有关。您不应该使用冒号。JavaScript 不像某些语言那样使用冒号来访问任何方法或字段。您可以使用一个点访问所有内容。@thatidiotguy 为您提供了一些解决方案来修复您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:45:44.127

我相信您在滥用包含选择器。如果您在这里阅读 api：

[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

您应该执行类似的操作`$("div:contains('John')")`，这将返回包含 John 的所有元素。您应该使用普通的 Javascript 字符串功能来搜索 id 中的视频：

1) 正则表达式

2)`if($(this).attr('id').indexOf('video') != -1){/*code*/}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:46:34.800

这是错误的 `:contains`

只用`.contains`

# c# - 循环和线程并行工作

> ID：12568337
> 
> 赞同：-2
> 
> 时间：2012-09-24T15:40:04.440
> 
> 标签：c#, multithreading, thread-safety, threadpool

我的情况是：循环和线程并行工作..我想停止循环的执行，直到线程完成其功能，当线程状态停止时，那时我想进一步执行循环..

```
 for (int pp = 0; pp < LstIop.Count; pp++)
            {
                oCntrlImageDisplay = new CntrlImageDisplay();
                oCntrlImageEdit = new CntrlImageEdit();
                axAcroPDF1 = new AxAcroPDFLib.AxAcroPDF();
                int pages = ConvertFileIntoBinary(LstIop[pp].Input, oCntrlImageEdit);
                oCntrlImageDisplay.ImgDisplay.Image = LstIop[pp].Output;
                oCntrlImageDisplay.ImgEditor.Image = oCntrlImageDisplay.ImgDisplay.Image;

                if (t1 == null || t1.ThreadState.ToString() == "Stopped")
                {
                    t1 = new Thread(() => convert(pages, LstIop[pp].Input, LstIop[pp].Output, stIop[pp].Temp));
                    t1.SetApartmentState(ApartmentState.STA);
                    t1.IsBackground = true;
                    CheckForIllegalCrossThreadCalls = false;
                    t1.Start();

                }
            } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T16:04:27.223

正如其他人所说，这里的线程没有意义，但如果你一心想要它，那就做异步。只需使用 .Invoke 或 .begininvoke 后跟 .endInvoke

前任：

```
 delegate void T2();

    static void Main(string[] args)
    {
        T2 Thread = new T2(Work);

        while (true)
        {
            IAsyncResult result = Thread.BeginInvoke(null, null);

            //OTHER WORK TO DO

            Thread.EndInvoke(result);
        }
    }

    static void Work()
    {
       //WORK TO DO
    } 
```

使用委托很好，因为您可以指定返回数据并发送参数

```
 delegate double T2(byte[] array,string text, int num);

    static void Main(string[] args)
    {
        T2 Thread = new T2(Work);

        while (true)
        {
            IAsyncResult result = Thread.BeginInvoke(null, null);

            //OTHER WORK TO DO

            double Returned = Thread.EndInvoke(result);
        }
    }

    static double Work(byte[] array, string text, int num)
    {
        // WORK TO DO
        return(3.4);
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-24T15:47:38.230

要等待线程完成执行，请调用：

```
t1.join(); 
```

# c++ - C ++，检查两个字符串的不区分大小写的相等性

> ID：12568338
> 
> 赞同：3
> 
> 时间：2012-09-24T15:40:04.440
> 
> 标签：c++, function, code-reuse

> **可能重复：**
> [C++ 中不区分大小写的字符串比较](https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c)

我已经为 C++ 编写了一些代码来比较两个字符串是否相等。我想要的是校对。我计划在未来将它用于更多的程序，所以这个功能做好它的工作很重要。这个功能是否看起来像一个可重复使用、便携等的功能？有没有更“最新”的方法来做到这一点？我使用了 ac 库，但这是一个 c++ 程序，这是禁忌吗？

谢谢，JH。

```
//function to compare two strings regardless of case 
//-- returns true if the two strings are equal
//-- returns false if
//  --the strings are unequal
//  --one of the strings is longer than 255 chars
bool isEqual(string str1, string str2){

  if(str1.length()!=str2.length())  //the strings are different lengths,
    return false;               //they can't be equal
  if((str1.length()>255) || (str2.length()>255))
    return false;

  char * cstr1 = new char [str1.length()+1];
  strcpy (cstr1, str1.c_str());
  char * cstr2 = new char [str2.length()+1];
  strcpy (cstr2, str2.c_str());

  for(int i=0; i<str1.length()+1; i++){
    if(toupper(cstr1[i]) != toupper(cstr2[i]))
      return false;
  }

  return true;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T15:47:11.607

您应该将函数重命名为 isEqual_CaseInsensitive 或其他名称，使其名称与函数的作用相匹配。您应该通过引用传递字符串以避免复制您不需要创建字符串的副本来比较它们

```
 bool isEqual_CaseInsensitive(const string& a, const string& b)
    {
            return a.size() == b.size() &&
                std::equal(a.begin(), a.end(), b.begin(), [](char cA, char cB) {
                        return toupper(cA) == toupper(cB);
                   });
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:49:03.527

该功能看起来相当不错，除了：

这些到 c 字符串的转换不是必需的：

```
 char * cstr1 = new char [str1.length()+1];
  strcpy (cstr1, str1.c_str());
  char * cstr2 = new char [str2.length()+1];
  strcpy (cstr2, str2.c_str()); 
```

因为您可以像在 c 字符串中一样访问 std::string 字母：

```
 for(int i=0; i<str1.length(); i++){
    if(toupper(str1[i]) != toupper(str2[i]))
      return false;
  } 
```

另请注意，我`+1`从`i<str1.length() + 1`...中删除了

对于其他方法 - 参见：[C++ 中不区分大小写的字符串比较](https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c)

# php - 在浏览器中自动保存 PDF

> ID：12568339
> 
> 赞同：0
> 
> 时间：2012-09-24T15:40:05.927
> 
> 标签：php, jquery, pdf, web, save

我有一个有趣的问题要问大家。

我的客户想要一种方法来自动保存在 Chrome 中打开的 PDF。目前，他通过单击 Acrobat 中的“保存”按钮（在浏览器中）或右键单击来实现此目的，从而调出上下文菜单并单击“另存为”-->“PDF”。他希望这个过程自动化。

我做了很多搜索，我找不到这个问题的解决方案。

所以我问大家，有没有办法自动保存嵌入在 HTML 页面中的 PDF？

我假设我必须进行一些屏幕抓取才能获取 HTML 页面，其中包含 PDF 的链接，但我不确定从那里去哪里。

任何帮助将不胜感激。

非常感谢，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:44:05.513

你可以用 htaccess 做到这一点。将以下内容添加到您的 .htaccess 文件中。

```
AddType application/octet-stream .pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:44:25.223

在将文件写入用户硬盘之前，网页需要用户交互。这是一项安全措施，可防止任何旧网页将文件放在磁盘上。

当用户单击某些东西并准备将特定文件保存到磁盘时，可以使文件另存为对话框弹出，但在某些浏览器中，用户仍然必须完成操作。在其他浏览器中，可以将下载的文件预先配置为转到特定的“下载”目录，并且用户无需在浏览器启动保存后采取其他步骤。

如果，当浏览器请求一个文件时，响应会给出一个标题：

```
Content-Disposition: attachment; filename="xxx.pdf" 
```

浏览器将尝试保存它。我不知道如果网络服务器将其作为网页中许多请求的一个请求会发生什么。我看到的这种使用方式是用户单击下载按钮，浏览器请求一个特定的 URL，该 URL 向服务器指示用户想要保存文件，然后，只有这样，Web 服务器才包含此标头。

# java - 向抛出的异常添加自定义消息，同时在 Java 中维护堆栈跟踪

> ID：12568340
> 
> 赞同：66
> 
> 时间：2012-09-24T15:40:05.687
> 
> 标签：java, exception, exception-handling

我有一小段代码贯穿一些事务进行处理。每个事务都标有事务号，该事务号由外部程序生成，不一定按顺序排列。当我在处理代码中捕获一个异常时，我会将它扔到主类并记录它以供稍后查看。我想将交易号添加到这个抛出的异常中。是否可以在保持正确堆栈跟踪的同时做到这一点？

例如：

```
public static void main(String[] args) {
    try{
        processMessage();
    }catch(Exception E){
        E.printStackTrace();
    }

}

private static void processMessage() throws Exception{
    String transNbr = "";
    try{
        transNbr = "2345";
        throw new Exception();
    }catch(Exception E){
        if(!transNbr.equals("")){
            //stack trace originates from here, not from actual exception
            throw new Exception("transction: " + transNbr); 
        }else{
            //stack trace gets passed correctly but no custom message available
            throw E;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-09-24T15:41:28.853

尝试：

```
throw new Exception("transction: " + transNbr, E); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-24T15:44:12.560

异常通常是不可变的：在它们被创建后你不能改变它们的信息。但是，您可以做的是链式异常：

```
throw new TransactionProblemException(transNbr, originalException); 
```

堆栈跟踪看起来像

```
TransactionProblemException : transNbr
at ...
at ...
caused by OriginalException ...
at ...
at ... 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-24T15:42:59.027

有一个`Exception`构造函数也接受原因参数：[Exception(String message, Throwable t)](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html#Exception%28java.lang.String,%20java.lang.Throwable%29)。

您可以使用它来传播堆栈跟踪：

```
try{
    //...
}catch(Exception E){
    if(!transNbr.equals("")){
        throw new Exception("transaction: " + transNbr, E); 
    }
    //...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-26T07:46:10.257

您可以在扩展 Exception 时使用 super

```
if (pass.length() < minPassLength)
    throw new InvalidPassException("The password provided is too short");
 } catch (NullPointerException e) {
    throw new InvalidPassException("No password provided", e);
 }

// A custom business exception
class InvalidPassException extends Exception {

InvalidPassException() {

}

InvalidPassException(String message) {
    super(message);
}
InvalidPassException(String message, Throwable cause) {
   super(message, cause);
} 
```

}

}

[资源](http://examples.javacodegeeks.com/java-basics/exceptions/create-custom-exception-example/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-27T10:36:27.137

您可以编写一个从 Exception 扩展的 Exception 类并添加属性，就像这样：` public class PaymentException extends Exception { public Object data;

```
public PaymentException(Throwable cause) {
    super(cause);
}

public void setData(Object o) {
    data = o;
}
public Object getData() {
    return data;
} 
```

}`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-01T07:14:31.800

您可以通过以下方式使用您的异常消息：-

```
 public class MyNullPointException extends NullPointerException {

        private ExceptionCodes exceptionCodesCode;

        public MyNullPointException(ExceptionCodes code) {
            this.exceptionCodesCode=code;
        }
        @Override
        public String getMessage() {
            return exceptionCodesCode.getCode();
        }

   public class enum ExceptionCodes {
    COULD_NOT_SAVE_RECORD ("cityId:001(could.not.save.record)"),
    NULL_POINT_EXCEPTION_RECORD ("cityId:002(null.point.exception.record)"),
    COULD_NOT_DELETE_RECORD ("cityId:003(could.not.delete.record)");

    private String code;

    private ExceptionCodes(String code) {
        this.code = code;
    }

    public String getCode() {
        return code;
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-06-24T16:28:00.473

以下代码是一个对我有用的简单示例。让我将该函数`main`称为父函数和子函数`divide`。
基本上，如果通过*首先捕获子函数中的异常在子函数中发生异常，我将使用****我的自定义消息***（用于父调用）*抛出一个新异常。*

 ***```
class Main {
    public static void main(String args[]) {
        try{
            long ans=divide(0);
            System.out.println("answer="+ans);
        }
        catch(Exception e){
            System.out.println("got exception:"+e.getMessage());

        }

    }
    public static long divide(int num) throws Exception{
        long x=-1;
        try {
            x=5/num;
        }
        catch (Exception e){
            throw new Exception("Error occured in divide for number:"+num+"Error:"+e.getMessage());
        }
        return x;
    }
} 
```

`return x`如果介于两者之间的某个地方发生错误，则最后一行将不会运行。***

# python - python TypeError：必须使用 YouTubeService 实例调用未绑定的方法 UpdateVideoEntry()

> ID：12568342
> 
> 赞同：1
> 
> 时间：2012-09-24T15:40:17.257
> 
> 标签：python, youtube

我正在尝试使用 youtube api 更新条目。这是我正在努力解决的错误：

> Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 updated_entry = gdata.youtube.service.YouTubeService.UpdateVideoEntry(YTVentry.id) 类型错误：必须使用 YouTubeService 实例作为第一个参数调用未绑定的方法 UpdateVideoEntry()（得到NoneType 实例代替）

这是我的代码：

```
 import gdata.youtube
    import gdata.youtube.service
    import gdata.youtube.data
client = gdata.youtube.service.YouTubeService()    
...
videos_feed = client.GetYouTubeVideoFeed(uri)
    for entry in videos_feed.entry:
    print entry.title.text
        YTentry = entry._GDataEntry__GetId
        YTVentry = gdata.youtube.YouTubeVideoEntry(YTentry)
        YTVentry.media.title = '09.11.2012 Hold me close'
        YTVentry.media.description = '09.11.2012 : Hold me close section'
        updated_entry = gdata.youtube.service.YouTubeService.UpdateVideoEntry(YTVentry.id) 
```

根据谷歌 gdata youtube 文档：

> 要更新视频元数据，只需更新 YouTubeVideoEntry 对象，然后使用 YouTubeService 对象的 UpdateVideoEntry 方法。此方法将包含更新的元数据的 YouTubeVideoEntry 作为参数。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:41:59.197

```
 updated_entry = gdata.youtube.service.YouTubeService.UpdateVideoEntry(YTVentry.id) 
```

应该

```
 updated_entry = client.UpdateVideoEntry(YTVentry.id) 
```

> gdata.youtube.service.YouTubeService.UpdateVideoEntry(YTVentry.id) TypeError: 必须使用 YouTubeService 实例作为第一个参数调用未绑定的方法 UpdateVideoEntry()（改为获取 NoneType 实例）

该错误正在抱怨，因为您试图从类而不是您创建的客户端对象中调用 UpdateVideoEntry。您已经创建了一个 YouTubeService 对象，`client`您需要使用它而不是直接调用类的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:42:19.883

您是在`YouTubeService`类上调用方法，而不是在该类的实例上。换句话说，您应该调用`client.UpdateVideoEntry(...)`而不是`YouTubeService.UpdateVideoEntry(...)`像其他对 API 的调用一样。

文档甚至说您应该在对象上调用该方法`YouTubeService`，而不是在类上。

错误信息表明*可以*直接调用类方法，但必须将类的实例作为第一个参数传递。当您在实例上调用方法时，这是隐式完成的，但在调用类上的方法时必须显式完成。否则 Python 将不知道该方法应该在哪个实例上运行（即，是什么`self`）。

# vba - RDO 会话 - 遍历整个收件箱并移动电子邮件

> ID：12568344
> 
> 赞同：0
> 
> 时间：2012-09-24T15:40:22.287
> 
> 标签：vba, outlook

感谢本网站提供的出色帮助，我找到了下面的代码 - 完美运行。我无法（非常尴尬）弄清楚如何遍历整个收件箱以移动所有电子邮件（而不是像下面的代码那样选择）。

任何帮助都非常感激。
约翰

```
Sub MoveWithRecDate()
' Moves selected emails with correct dates maintained

Dim objNS As Outlook.NameSpace
Dim Session As Redemption.RDOSession
Dim objRDOFolder As Redemption.RDOFolder
Dim objItem As Outlook.MailItem
Dim objRDOMail As Redemption.RDOMail

Set objNS = Application.GetNamespace("MAPI")
Set Session = CreateObject("Redemption.RDOSession")
Session.Logon
Set inbox = Session.GetDefaultFolder(olFolderInbox)
Set objRDOFolder = inbox.Parent.Folders("Cabinet")

For Each objItem In Application.ActiveExplorer.Selection
     Set objRDOMail = Session.GetMessageFromID(objItem.EntryID)
     objRDOMail.Move objRDOFolder
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:39:44.833

在阅读您的问题之前，我没有听说过救赎。它看起来很有趣，所以谢谢你提供的信息；下次我需要编写新的 Outlook 宏时，我会尝试一下。

我假设您的问题没有答案，也很少有人使用 Redemption。

Redemption 网站暗示 Redemption 代码的结构将与标准 Outlook 代码几乎相同。我只记得有一次编写了一个对用户选择的项目进行操作的宏，但我记得代码看起来像你的。下面的代码是标准的 Outlook，但我希望这足以让您创建等效的兑换代码。

你的宏有评论`' Moves selected emails with correct dates maintained`。这意味着您认为有一种方法可以移动电子邮件，从而不维护日期。我不知道这样的方法。

下面的代码检查收件箱中的每个项目。我不想将所有内容从收件箱中移出，因此我跳过了不是邮件项目且不是来自特定发件人的项目。

我希望这足以让你继续前进。

```
Sub MoveWithRecDate()

  Dim FolderDest As MAPIFolder
  Dim ItemToBeMoved As Boolean
  Dim ItemCrnt As Object
  Dim FolderSrc As MAPIFolder

  Set FolderSrc = CreateObject("Outlook.Application"). _
              GetNamespace("MAPI").GetDefaultFolder(olFolderInbox)
  Set FolderDest = FolderSrc.Parent.Folders("Cabinet")

  For Each ItemCrnt In FolderSrc.Items
    ItemToBeMoved = True   ' Assume item to be moved until discover otherwise
    With ItemCrnt
      If .Class = olMail Then
        If .SenderEmailAddress <> "noreply@which.co.uk" Then
          ' Mail item not from Which
          ItemToBeMoved = False
        End If
      Else
        ' Not mail item so do not move
        ItemToBeMoved = False
      End If
      If ItemToBeMoved Then
        .Move FolderDest
      End If
    End With
  Next

End Sub 
```

# php - 查找具有自定义可编辑内容和限制性管理面板的 CMS

> ID：12568345
> 
> 赞同：0
> 
> 时间：2012-09-24T15:40:23.040
> 
> 标签：php, content-management-system

我正在开发一个 PHP 网站。客户需要**更新网站的某些部分**：例如修改标题，修改介绍段落等。但他也可以通过他的管理界面**发布新闻**和**添加产品**（由文本+图片组成）。

我正在考虑从头开始开发他的管理面板，但我更愿意找到一个简单的 CMS 来完成这项工作并使开发过程更快。

我在网上找到的大多数 CMS 大多过于复杂（它们允许用户创建页面、模板等）。在我的情况下，管理面板必须非常简单和限制，只允许用户修改或添加我预定义的内容。

您对 CMS 有什么适合我的标准的建议吗？或者一个可以帮助我的 php 库（在编写尽可能少的 PHP / HTML、Js 代码方面）

我希望我的英语不是太差，这篇文章是可以理解的。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:43:18.560

学习曲线可能有点陡峭，但我建议使用 Drupal。这是一个非常强大的 CMS，您可以使用任何您想要的权限设置使用角色。让自己成为管理员，然后设置具有有限权限的客户端用户角色，然后您就离开了。

您还可以下载 Drupal 的主题或构建自己的主题。理论上你可以安装 Drupal 和一个主题，设置权限而不实际编写任何代码。

[http://drupal.org/](http://drupal.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:46:22.987

1.  德鲁巴。在我看来，Drupal 并不是理想的选择。Drupal 已完成。
2.  Joomla。管理部分中有很多信息，但您可以限制很多事情。它易于使用和设置。试试看。

# java - 从网络摄像头捕获图像的小程序

> ID：12568347
> 
> 赞同：0
> 
> 时间：2012-09-24T15:40:24.933
> 
> 标签：java, webcam

我正在尝试创建一个可以从我的网络摄像头捕获图像的小程序。

[我在这个线程](https://stackoverflow.com/questions/115835/what-is-the-best-method-to-capture-images-from-a-live-video-device-for-use-by-a)中看到了一个示例，但`import`s 在我的课堂上不起作用。他们没有被认出来。

我是Java的新手，所以，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:42:19.383

您必须在项目中包含所需的外部库 (.jar)，以便编译器找到其导入。

在您参考的答案中，JavaCV 是首选的 API，并且答案中[还有关于配置 JavaCV](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/12/opencv-javacv-eclipse-project.html)以供使用的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:18:49.107

在**[网络摄像头捕获](https://github.com/sarxos/webcam-capture)**项目源代码中，您可以**[在此处找到](http://webcam-capture.sarxos.pl/examples/applet/)****[网络摄像头小程序示例](https://github.com/sarxos/webcam-capture/tree/master/webcam-capture-examples/webcam-capture-applet)**和工作演示。此示例不需要任何额外的 JAR，因为它在构建时被*遮蔽。*着色是一个过程，它将来自所有相关 JAR 的所有类打包在一起，仅在一个文件中，称为着色 JAR。如果您共享所有 JAR，则不必构建类路径，因为所有导入都打包在一起。

 *从代码的角度来看，使用 Webcam Capture 项目中提供的网络摄像头 API`JFrame`或`JApplet`. 它包含`WebcamPanel`可以轻松用于实时显示来自相机的图像的类。有关更多详细信息，请查看其他示例。

你必须做的一个重要的想法是叹息你的小程序。如果您想访问主机硬件，这是必需的操作。如果没有签名，您将不得不指定一组适当的权限，但我从未这样做过，因为从我的角度来看，使用 Maven 进行 JAR 着色和签名更容易。*

# javascript - 简单点击强制包含点击

> ID：12568348
> 
> 赞同：0
> 
> 时间：2012-09-24T15:40:31.820
> 
> 标签：javascript, jquery

我怎样才能得到一个简单的调用点击来像这样运行：http: [//jsfiddle.net/ftwPS/6/](http://jsfiddle.net/ftwPS/6/) 我显然缺少一些基本的东西，因为当你点击“点击”时这不起作用。

```
$('tr').click(function() {
   $(this).find('a').click();
});​

<table>
<tr>
    <td>
        <a href="http://google.com" target="_blank">Google</a>
    </td>
    <td>
        CLICK
    </td>
</tr>
</table> 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:44:00.413

将您的代码更新为此；

```
$(function(){
    $('tr').click(function() {
        $(this).find('a')[0].click();
    });
});
​ 
```

看到这个[小提琴](http://jsfiddle.net/ftwPS/22/)

**编辑**

更新的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:49:07.017

在锚标签上触发点击事件不会做任何事情，因为锚标签没有`onclick`处理程序 - 该`href`属性是浏览器处理的完全不同的动物。

如果您想在`href`单击 时导航到锚标记`td`，只需执行以下操作：

```
$('tr').click(function() {
    window.location.href = $(this).find('a').attr('href');
});​ 
```

[http://jsfiddle.net/ftwPS/15/](http://jsfiddle.net/ftwPS/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:47:14.607

您可以使用`dispatchEvent`：http: [//jsfiddle.net/ftwPS/24/](http://jsfiddle.net/ftwPS/24/)。

```
// Don't fire for the <a> itself, otherwise two windows will open
if($(e.target).is("a")) return;

var evt = document.createEvent("HTMLEvents");
evt.initEvent("click");

// Assuming there is only one <a> inside
$(this).find("a").get(0).dispatchEvent(evt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:48:29.127

```
$('tr').click(function() {
   window.open($(this).find('a').attr('href');
}); 
```

# javascript - 如何使用 IndexedDB objectStore 中的值自动填充选择框？

> ID：12568357
> 
> 赞同：0
> 
> 时间：2012-09-24T15:41:15.453
> 
> 标签：javascript, html, indexeddb

我想遍历 IndexedDB objectStore，获取结果并填充此选择框。

这是我的 HTML

```
 <tr>
    <td>
       <select id="opt" name="opt"></select>
    </td>
 </tr> 
```

这是我的 JavaScript

```
function populateOptions() {
  var options = [ "1", "2", "3", "4", "5"];
  var opt = document.getElementById("opt");

  for (var i = 0; i < options.length; i++) {
    var option = document.createElement("option");
    option.value = options[i];
    var optionText = document.createTextNode(options[i]);
    option.appendChild(optionText);
    opt.appendChild(option);
  }

}

populateOptions(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:17:29.930

尝试以下操作：

```
var dbreq = indexeddb.open("db");
dbreq.onsuccess = function (conn){
    var trans = dbreq.result.transaction(["objectstore"]);
    var obj = trans.objectStore("objectstore");
    var cursor = obj.openCursor();
    cursor.onsuccess = function (e) {
            if (!cursor.result) {
               var opt = document.getElementById("opt"); 
               var option = document.createElement("option");
               option.value = cursor.result.value;                
               var optionText = document.createTextNode(cursor.result.value);                
               option.appendChild(optionText);
               opt.appendChild(option); 
               cursor["continue"]()
            } else {
               // cursor ended
            }
} 
```

或者使用我的[linq2indexeddb 库](http://linq2indexeddb.codeplex.com/)并这样做：

```
var db = linq2indexedDB("db");
db.linq.from("objectstore").select.then(null, null, function(e){
    var opt = document.getElementById("opt"); 
    var option = document.createElement("option");
    option.value = e.data;                
    var optionText = document.createTextNode(e.data);                
    option.appendChild(optionText);
    opt.appendChild(option); 

}); 
```

有关 indexeddb 的更多信息，我可以参考我的[博客](http://www.kristofdegrave.be/search/label/IndexedDB)。在这里，我经常发布有关 indexedDB API 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:45:05.753

在 html 中：

```
<body onload="load()"> 
```

在 javascript 中：

```
function load(){
    populateOptions();
} 
```

或很快：

```
<body onload="populateOptions()"> 
```

# c# - SQL Server 断开连接导致连接池问题

> ID：12568359
> 
> 赞同：3
> 
> 时间：2012-09-24T15:41:18.590
> 
> 标签：c#, sql-server, design-patterns, connection-pooling

我有一个 Windows 服务，它通过 RabbitMQ 接收消息，这会触发一个事件处理程序，它会做一些工作，然后尝试将结果保存到数据库中。它使用以下线程：

```
ThreadPool.QueueUserWorkItem(ProcessMessageOnThread, messageReceived); 
```

where`ProcessMessageOnThread`是一个执行工作的方法，`messageReceived`它是从 RabbitMQ 出列的消息的表示。

正常情况下windows服务按预期运行，即dequeue、process和persist。

我想确保我的所有消息都得到处理并给予公平的更改以进行处理，所以如果我无法打开与 SQL Server 的连接，我只需将消息重新排队以再次处理它（希望那个时候 SQL Server 会回来，否则这将继续 - 我很好）。

现在问题来了，当进程按预期运行一段时间后，SQL Server 连接池已满，**然后**SQL Server 断开连接，现在情况变得有点不稳定。

可能会发生以下两种情况之一：

*   抛出一个异常`connection.Open()`- 但是我抓住了这个，所以不担心它

*   引发异常`cmd.ExecuteNonQuery()`- 这是我正在执行存储过程的地方

这是我需要弄清楚如何处理的第二个选项。以前我认为这里的任何异常都意味着我传递给存储过程的数据存在问题，因此应该将其移出队列并让其他东西对其进行分析。

**但是**，现在我认为我需要一种新方法来处理异常与实际未建立的连接有关的情况。

我查看了[`SqlException`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.class.aspx)该类并注意到一个名为的属性`Class`，它有这个描述`Gets the severity level of the error returned from SQL Server`，现在关于这个的信息说：

> 严重级别为 10 或更低的消息是信息性的，表示由用户输入的信息错误引起的问题。从 11 到 16 的严重级别由用户生成，并且可以由用户进行更正。从 17 到 25 的严重级别表示软件或硬件错误。当发生 17、18 或 19 级错误时，您可以继续工作，尽管您可能无法执行特定语句。

这是否意味着修复我的异常处理，我可以检查`if (ex.Class > 16)`然后重新排队消息，因为问题在于连接`else`将其丢弃，因为它很可能与发送到存储过程的格式错误的数据有关？

`cmd.ExecuteNonQuery()`所以问题是，我应该如何进行异常处理，如果抛出的异常是由于断开的连接，我该如何检测调用时。

* * *

**更新：**

我以前遇到过连接没有返回到池中的问题（这是由于线程问题）并且已经解决了这些问题，所以我相信这个问题与没有返回到池中的连接无关。此外，围绕连接的用途的逻辑非常简单，我也确保它们始终关闭......所以我对与 Sql Server 断开连接然后捕获行为有关的答案更感兴趣cmd.ExecuteNonQuery()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:19:34.000

由于各种原因，连接池中的连接可能会进入奇怪的状态，所有这些都与糟糕的应用程序设计有关：

*   在关联的数据读取器之前关闭连接
*   更改池不重置的设置（如事务隔离级别）
*   启动异步查询 ( `BeginOpenReader`)，然后在异步处理程序触发之前将连接返回到池

您应该调查您的应用程序并确保连接正确返回到池中。有助于调试的一件事是在开发环境中减小应用程序池的大小。您在连接字符串中更改池的大小：

```
...;Integrated Security=SSPI;Max Pool Size=2;Pooling=True; 
```

这使得池化问题很容易重现。

如果找不到原因，但仍需要部署修复程序，则可以使用`ClearPool`或之一`ClearAllPools`。这样做的好地方是当您在`Open()`或之后检测到可疑异常之一时`ExecuteNonQuery()`。两者都是`SqlConnection`类的静态方法：

```
SqlConnection.ClearPool(yourConnection); 
```

或者更粗略的方法：

```
SqlConnection.ClearAllPools() 
```

请注意，这基本上是[Pokémon 异常处理](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)。如果它有效，您将不知道为什么。:)

# c# - 如何使用 json 和 sql 将数据导入 EXTJS 网格面板

> ID：12568363
> 
> 赞同：0
> 
> 时间：2012-09-24T15:41:26.983
> 
> 标签：c#, json, asp.net-mvc-3, gridview, extjs

我正在尝试在 extjs 中显示网格视图。该数据是从 sql db 收集的。我有一个查询要从 GridViewController() 中的 sql db 获取数据，但我不确定如何将这些数据保存在数组中，然后将其编码为 JSON 并将数据发回。

我的网格视图控制器

```
public string writeRecord()
    {

        Response.Write("Survey Completed!");
        SqlConnection conn = DBTools.GetDBConnection("ApplicationServices2");

        string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
        SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);

        DataSet myData = new DataSet();
        cmd.Fill(myData, "myTable");

        JavaScriptSerializer jss = new JavaScriptSerializer();
        string json = jss.Serialize(myData);

        conn.Open();
        conn.Close();
        return "{rows: '+ json +'}";

    } 
```

这是我的 gridviewApp.js。这是我创建 gridview 并尝试从我的 gridviewController 获取数据的地方。

```
var store = Ext.create('Ext.data.JsonStore', {

        storeId: 'myData',
        reader: new Ext.data.JsonReader({
            fields:[
            { name: 'Q1', type: 'int' },
            { name: 'Q2', type: 'int' },
            { name: 'Q3', type: 'int' },
            { name: 'Q4', type: 'int' },
            { name: 'Q5', type: 'int' },
            { name: 'Improvements', type: 'string' },
            { name: 'Comments', type: 'string'}]
            }),

            proxy: {
            type: 'json',
            url: 'GridView/writeRecord'
            }

    });  
    this.grid = Ext.create('Ext.grid.Panel', {
        title: 'GridView App',
        url: 'GridView/writeRecord',
        //store: store,
        store: Ext.data.StoreManager.lookup('myData'),
        columns: [
        {header: 'Q1', width: 100,
        sortable: true, dataIndex: 'Q1'},
        { header: 'Q2', width: 100,
            sortable: true, dataIndex: 'Q2'
        },
        { header: 'Q3', width: 100,
            sortable: true, dataIndex: 'Q3'
        },
        { header: 'Q4', width: 100,
            sortable: true, dataIndex: 'Q4'
        },
        { header: 'Improvements', width: 200,
            sortable: true, dataIndex: 'Improvements'
        },
        { header: 'Comments', width: 200,
            sortable: true, dataIndex: 'Comments'
        }
    ],
        stripeRows: true,
        //height:250,
        width: 800,
        renderTo: Ext.getBody()
    }); 
```

任何形式的建议或意见将不胜感激......谢谢

***更新小伙伴们：***

我收到此错误序列化“System.Globalization.CultureInfo”类型的对象时检测到循环引用。

当我使用

```
return Json(myData, JsonRequestBehavior.AllowGet); 
```

但是当我使用时，我可以从我的数据库中获得结果

```
myData.GetXml(); 
```

这是另一个棘手的部分。我只能使用直接路径访问我的数据库结果

```
http://localhost:55099/GridView/writeRecord 
```

但我的 gridView.js 仍然显示空白......有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:53:24.107

我会使用 MVC 的内置 Json 功能，如下所示：

```
 public ActionResult ActionName()
    {

        DataSet ds = new DataSet();

        // populate ds

        return Json(ds, JsonRequestBehavior.AllowGet);

    } 
```

这将确保您的 Json 以正确的格式输出。

**编辑**

您的函数如下所示：

```
 public ActionResult writeRecord()
    {

        Response.Write("Survey Completed!");
        SqlConnection conn = DBTools.GetDBConnection("ApplicationServices2");

        string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
        SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);

        DataSet myData = new DataSet();
        cmd.Fill(myData, "myTable");

        conn.Open();
        conn.Close();

        return Json(myData, JsonRequestBehaviour.AllowGet);

    } 
```

# android - 收到铃声时的 TTS

> ID：12568365
> 
> 赞同：1
> 
> 时间：2012-09-24T15:41:29.963
> 
> 标签：android

当我在我的 android 手机上接到电话时，我希望它播放文本转语音字符串而不是默认铃声。

这是我尝试过的代码，但它对我不起作用。

谢谢

```
private PhoneStateListener mPhoneListener = new PhoneStateListener() {
    public void onCallStateChanged(int state, String incomingNumber) {
        try {
            switch (state) {
            case TelephonyManager.CALL_STATE_RINGING:

                //----------------------------silence call-----------------------------
                AudioManager audiomanage = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
                audiomanage.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                String name="Hello world";
                Intent checkIntent = new Intent();
                checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
                startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

# java - 使用 GSON 创建 POJO 时遇到问题

> ID：12568371
> 
> 赞同：0
> 
> 时间：2012-09-24T15:41:50.477
> 
> 标签：java, android, gson

我似乎无法使用 GSON 从 JSON 创建 POJO（计划旧 Java 对象）。我按照本[教程学习](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)了 T 但我仍然得到一个空对象。这是我的代码：

JSONHandler.java

```
public class JSONHandler 
{
    private Gson gson; 
    private InputStream is; 
    private Reader reader;
    private TripList tripList; 
    public JSONHandler(InputStream is)
    {
        this.is = is;

        gson = new Gson(); 
        reader = new InputStreamReader(is);
        tripList = gson.fromJson(reader, TripList.class);
    }
    public Gson getGson() {
        return gson;
    }
    public void setGson(Gson gson) {
        this.gson = gson;
    } 
```

TripList.java

```
public class TripList 
{
    @SerializedName("Line")
    public String line;

    @SerializedName("CurrentTime")
    public int currentTime; 

    public List<Train> Trips; 

} 
```

火车.java

```
public class Train 
{
    @SerializedName("TripID")
    public String tripID; 

    @SerializedName("Destination")
    public String dest; 

    public List<Prediction> Predictions; 

} 
```

预测.java

```
public class Prediction 
{
    @SerializedName("StopID")
    public int stopID;

    @SerializedName("Stop")
    public String stop;

    @SerializedName("Seconds")
    public int seconds;
} 
```

蓝色.json

```
{
    "TripList":
   {
        "CurrentTime":1342032950,
        "Line":"Red",
        "Trips": [
             {
                  "TripID":"R982ECC1E",
                  "Destination":"Alewife",
                  "Predictions": [
                          {"StopID":"70094","Stop":"Ashmont","Seconds":370}
                   ]
             },
             {
                  "TripID":"R982ECC78",
                  "Destination":"Ashmont",
                  "Note":"Big Red",
                  "Position":
             {"Timestamp":1342032834,"Train":"1809","Lat":42.38725,"Long":-71.11894,"Heading":185},
                "Predictions": [
                        {"StopID":"70067","Stop":"Harvard Square","Seconds":36},
                        {"StopID":"70069","Stop":"Central Square","Seconds":260}
                  ]
               }
           ]
     }
} 
```

JSON 格式将遵循[此](http://www.mbta.com/uploadedfiles/Description.pdf)范例。当无法正确解析某些内容时，GSON 不会抛出错误，它只是返回一个令人讨厌的空值。格式或我处理 java 数据对象的方式有问题吗？任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:17:35.787

有一个小问题：您正在读取一个包含 TripList 的对象：

```
{
   "TripList": ...
} 
```

但是您告诉 Gson 您正在阅读 TripList 本身：

```
tripList = gson.fromJson(reader, TripList.class); 
```

由于`TripList`不包含名为 的属性`TripList`，因此它会执行以下操作：未知属性（即“TripList”）被忽略，而缺少的属性（即“TripList”的所有成员都保留为默认值。

所以 Gson 在这里表现正确。我不知道这里的泛型是否有问题。如果是这样，其他答案可能会有所帮助。

* * *

### 更新

没有其他问题，我试过了。只需删除封闭的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:12:47.700

当我遇到这个问题时，我们遇到了类型擦除——你可能想要研究实现泛型（如果你的代码中会有更多 List 元素）或者明确告诉 Gson 你想要序列化的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:48:06.027

我不认为 JSON 知道如何读取 a`public List<Train> Trips;`因为泛型仅在编译时。

有关更多详细信息，请参见[https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples)，但基本上，我认为您需要为元素指定 TypeToken

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:25:26.537

尝试在每个模型类中初始化列表。

IE

```
public class TripList 
{
    @SerializedName("Line")
    public String line;

    @SerializedName("CurrentTime")
    public int currentTime; 

    public List<Train> Trips = new ArrayList<Train>(); 

} 
```

# svn - 防止 svn 在更新时杀死整个詹金斯工作区

> ID：12568374
> 
> 赞同：1
> 
> 时间：2012-09-24T15:41:58.650
> 
> 标签：svn, grails, jenkins

我有一个 grails 1.3.8 项目，我正在尝试使用 jenkins 进行自动化测试。我也在尝试使用 jenkin 的 svn 插件，这就是问题的开始。无论出于何种原因，我的 grails 项目的插件都难以获取，通常需要运行应用程序几次才能全部获取（我知道这很糟糕，但我无法更改）。如果我让插件为每个插件手动运行以下命令，我可以让项目在 jenkins 中运行；

```
grails install-plugin $PLUGINNAME 
```

我希望我的项目自然地轮询我们的 svn 存储库。但是，即使使用该选项；

```
Use 'svn update' as much as possible 
```

svn 完全踩到了整个工作区，杀死了所有东西，包括导致构建失败的插件，因为它永远无法从一次 svn 中获取它们。我已经为此苦苦挣扎了好几天，也尝试过 jenkins 高级命令

```
 SCM checkout retry count : 5 
```

但这根本不会“似乎”改变构建的结果。

任何帮助将不胜感激。

Jenkins 配置详细（屏幕截图太小而无法阅读）

```
Advanced
Retry Count
SCM checkout retry count: 5

Source Code Management
Subversion
Repo URL : http://$IP/$MYAPP
Check out strategy: Use 'svn update' as much as possible
Repository Browser: Auto

Build
Build With Grails
Grails Installation: Grails 1.3.8*
Non Interactive: True (checked)
Targets: "test-app -unit"
server.port: 9144
grails.project.work.dir: target
Project Base Dir: ./app-api** 
```

*Grails 1.3.8 在我的 jenkins 版本中的管理 jenkins 选项卡下指定。但我已经测试并验证它设置正确。

** 指向我项目 api 的位置。这是我要测试的 grails 项目，它位于 jenkin 的工作空间内，但不是其中唯一的东西。这就是我在这里指定它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:15:43.190

我正在使用 Grails 2.x，并且在解决插件依赖项时没有此类问题。

在 Jenkins 中寻找解决方案时，我发现了[naginator](https://wiki.jenkins-ci.org/display/JENKINS/Naginator+Plugin)插件：

> 允许您在构建失败后自动重新安排构建。这在几种情况下很有用，包括：
> 
> 构建依赖于暂时不可用的外部资源（数据库停机、网络停机、网站停机等）。用户希望在构建修复之前连续发送电子邮件，以促使人们采取行动。

我没有经过测试，但我认为您将被允许自动重试构建，直到它成功。

# javascript - FileReader.js 在 IE9 中没有任何反应

> ID：12568375
> 
> 赞同：4
> 
> 时间：2012-09-24T15:41:59.550
> 
> 标签：javascript, flash, internet-explorer-9, fileapi, polyfills

我需要帮助设置[Jadriens FileReader.js](https://github.com/Jahdrien/FileReader)。我已经设置了一切，因为我认为这个 polyfill 有效。但是当一切启动时触发的回调在 IE9 中不会触发。这是我的标记：

```
<body>
<div class="main">
    <canvas id="mainCanvas" width="600" height="600"></canvas><br />
    <div id="fileReaderSWFObject"></div>
    <input type="file" id="imageLoader" name="imageLoader" /><br />
    <input id="text" type="text" placeholder="some text...">
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.1.min.js"><\/script>')</script>
<!--[if lt IE 10]>
    <script src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
    <script src="js/vendor/jquery-ui-1.8.23.custom.min.js"></script>
    <script src="js/vendor/jquery.FileReader.min.js"></script>
<![endif]-->
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
</body> 
```

这是 main.js：

```
$(function () {
// Variables
var canvas = document.getElementById('mainCanvas');
var context = canvas.getContext('2d');
var canvasCenter = canvas.width / 2;
var img = '';
var newImageHeight = 0;
var logoX = 0;
var padding = 50;

// Functions
var flushCanvas = function () {
    context.fillStyle = '#000';
    context.fillRect(0, 0, canvas.width, canvas.width + padding);
    if (img !== '') {
        context.drawImage(img, padding, padding, canvas.width - (padding * 2), newImageHeight - (padding * 2));
    }
    setText();
};
var setText = function () {
    context.textAlign = 'center';
    context.fillStyle = '#fff';
    context.font = '22px sans-serif';
    context.textBaseline = 'bottom';
    context.fillText($('#text').val(), canvasCenter, canvas.height - 40);
};

// Init
if ($.browser.msie && $.browser.version <= 9) {
    swfobject.embedSWF('filereader.swf', 'fileReaderSWFObject', '100%', '100%', '10', 'expressinstall.swf');
    $('#imageLoader').fileReader({
        id: 'fileReaderSWFObject',
        filereader: 'filereader.swf',
        expressInstall: 'expressInstall.swf',
        debugMode: true,
        callback: function () { console.log('filereader ready'); }
    });
}
$('#imageLoader').change(function (e) {
    if ($.browser.msie && $.browser.version <= 9) {
        console.log(e.target.files[0].name);
    } else {
        var reader = new FileReader();
        reader.onload = function (event) {
            img = new Image();
            img.onload = function () {
                newImageHeight = (img.height / img.width) * (canvas.width);
                canvas.height = newImageHeight + padding;
                flushCanvas(); 
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);
    }
});
$('#text').keyup(function (e) {
    flushCanvas();
});
}); 
```

很多代码，但我认为上下文可能会有所帮助。重要的行就在初始化注释的下方。.fileReader init 选项中的回调函数永远不会触发。不过，它确实会在其他现代浏览器中触发（如果您删除 if 语句）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:19:11.733

这里有一个错误的组合。

*   Jahdriens 文件阅读器负责闪存的嵌入。只需包含 swfObject 库。
*   浏览器嗅探 = 坏主意。Modernizr = 好主意。
*   确保你安装了 IE 的 flash :(

我的最终代码看起来像这样，并且运行良好。HTML：

```
<canvas id="mainCanvas" width="600" height="600"></canvas><br />
<a id="imageLoaderButton" class="button upload">load image</a>
<input type="file" id="imageLoader" class="hidden" name="imageLoader" />
<input id="text" type="text" placeholder="some text...">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.1.min.js"><\/script>')</script>
<script src="js/main.js"></script> 
```

+ 头部自定义构建的modernizr 中的链接。（创建自定义构建时单击“非核心检测”->“file-api”）

还有我的 JS：

```
$(function () {
    Modernizr.load({
        test: Modernizr.filereader,
        nope: ['js/vendor/swfobject.js', 'js/vendor/jquery-ui-1.8.23.custom.min.js', 'js/vendor/jquery.FileReader.min.js'],
        complete: function () {

            if (!Modernizr.filereader) {
                $('#imageLoaderButton').fileReader({
                    id: 'fileReaderSWFObject',
                    filereader: 'filereader.swf',
                    expressInstall: 'expressInstall.swf',
                    debugMode: true,
                    callback: function () { 
                        $('#imageLoaderButton').show().on('change', read);
                    }
                });
            } else {
                $('#imageLoaderButton').show().on('click', function () {
                    $('#imageLoader').trigger('click').on('change', read);
                });
            }

        }
    });
    // Variables
    var canvas = document.getElementById('mainCanvas');
    var context = canvas.getContext('2d');
    var canvasCenter = canvas.width / 2;
    var img = '';
    var padding = 50;

    // Functions
    var flushCanvas = function () {
        context.fillStyle = '#000';
        context.fillRect(0, 0, canvas.width, canvas.width + padding);
        if (img !== '') {
            context.drawImage(img, padding, padding, canvas.width - (padding * 2), newImageHeight - (padding * 2));
        }
        setText();
    };
    var setText = function () {
        context.textAlign = 'center';
        context.fillStyle = '#fff';
        context.font = '22px sans-serif';
        context.textBaseline = 'bottom';
        context.fillText($('#text').val(), canvasCenter, canvas.height - 40);
    };
    var read = function (e) {
        if (typeof FileReader !== 'undefined') {
            var reader = new FileReader();
            reader.onload = function (event) {
                img = new Image();
                img.onload = function () {
                    newImageHeight = (img.height / img.width) * (canvas.width);
                    canvas.height = newImageHeight + padding;
                    flushCanvas();
                }
                img.src = event.target.result;
            }
            reader.readAsDataURL(e.target.files[0]);

        }
    };

    $('#text').keyup(function (e) {
        flushCanvas();
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T06:07:10.230

IE9的问题是你需要先安装flash player 还有很多IE9不支持的功能

# ajax - HTTP Keep Alive 对 AJAX 站点的好处

> ID：12568376
> 
> 赞同：3
> 
> 时间：2012-09-24T15:41:59.447
> 
> 标签：ajax, keep-alive

我们在[http://www.beckworthemporium.com/index.php?option=com_rsappt_pro2&view=booking_screen_gad&Itemid=58上有一个相当重的 AJAX 站点](http://www.beckworthemporium.com/index.php?option=com_rsappt_pro2&view=booking_screen_gad&Itemid=58)

目前，每个页面请求使用 5/6 AJAX 请求来返回页面的各个部分，并且是相当 mySQL 密集型的。在圣诞节之前，我们的流量将缓慢增加。我们会看到使用 keep alive 的任何好处吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T22:37:22.137

你说的是多少流量？如果您打算使用 Keep-alive，那么您可能希望确保您有足够的内存并将 Keep-alive 超时降低到可能的最低值，否则如果您最终获得大量流量，它可能会伤害您。流量过多的站点通常禁用保持活动。

也看看并阅读[现代时代的http keep-alive](https://stackoverflow.com/questions/4139379/http-keep-alive-in-the-modern-age)

[我在http://www.webpagetest.org/result/121008_TX_KB9/](http://www.webpagetest.org/result/121008_TX_KB9/)上对您的页面进行了报告

至于您的 AJAX 调用，无论您是否使用 keep-alive，我都会对其进行改进。我会缓存响应。例如，在您运行 mysql 查询并生成输出后，将其缓存到磁盘几个小时（如果可能，则更长），然后在后续调用中从磁盘中提取尚未过期的数据。这将节省一堆并加快整体速度。

另外，如果您担心速度，我会为您的很多图像资源使用图像精灵。我注意到您的一些图像是占位符并且是 100% 透明的，请考虑仅对这些图像使用 css。这将大大减少您的整体要求。

我还将启用 mod_expires 并添加一些 Expires 标头。有关使用这些和更多良好实践功能的示例 htaccess 文件，请查看： [https ://github.com/h5bp/html5-boilerplate/blob/master/dist/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/dist/.htaccess)

**编辑**

Jeepstone，我建议您不要启用 keep-alive，并且可能使用 CDN 并[并行](https://developers.google.com/speed/docs/best-practices/rtt#ParallelizeDownloads)化您的资源。您可能还想查看您的数据库配置。例如 MySQL 的最大连接数较低，您可能希望优化慢查询、连接超时并确保不使用任何持久连接。

此外，如果您真的关心您的网络堆栈的状态，您可以立即对其进行测试，而不是在有更多真实客户敲门时找出问题所在。我说的是压力/负载测试。

*   查看[对网站进行压力测试的最佳方法](https://stackoverflow.com/questions/340564/best-way-to-stress-test-a-website)
*   和[http://blazemeter.com/](http://blazemeter.com/)
*   也许[http://loadimpact.com/](http://loadimpact.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:46:59.820

大型站点存在两个大问题：并发连接和延迟。看看你的圣诞节数字，我不认为你的网站很大。因此，我不会看到使用 Keep-Alive 有很大的好处。启用 Keep-Alive 可能会增加无用的空闲连接数。

我会走负载测试您的网站的路线，看看最大的瓶颈是什么并修复它。通过找到最大的瓶颈进行迭代并改进。您可能会在您的实例中发现数据库是罪魁祸首。那里有免费或半免费的负载测试工具：VS Test Suite 为 MSDN 订阅者免费提供多达 250 个虚拟真实并发用户，这超出了您的需要。

# c - KMALLOC 大小分配

> ID：12568379
> 
> 赞同：10
> 
> 时间：2012-09-24T15:42:02.163
> 
> 标签：c, linux, memory, linux-kernel

KMALLOC 只分配页面大小的内存还是可以分配更少的内存？kmalloc 可以分配的大小是多少？我在哪里可以找到它的描述，因为我到处看它并没有真正说明它分配了多少内存？我想知道 KMALLOC 分配的实际大小是多少。它是否分配 2 的幂大小？它只是从准备好的缓存中找到空闲对象吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T16:47:17.837

我的理解是：内核在处理系统的物理内存，只有page-sized chunks才有；因此，当您调用时，您`kmalloc()`只会得到某些预定义的、固定大小的字节数组。

您获得的实际内存取决于系统的体系结构，但 kmalloc 可以处理的最小分配是 32 或 64 字节。您将从通话中恢复到`kmalloc()` **至少**与您要求的一样多的内存（通常更多）。通常，您不会获得超过 128 KB（同样，取决于架构）

要获取系统的页面大小（以字节为单位），您可以执行以下命令：

```
getconf PAGESIZE 
```

或者

```
getconf PAGE_SIZE 
```

有关最大页面大小的信息位于 /usr/src/linux/include/linux/slab.h

是的，页面大小通常是 2 的幂，但同样，你不会得到你想要的东西，但会多一点。

您可以使用如下代码：

```
void * stuff;
stuff = kmalloc(1,GFP_KERNEL);
printk("I got: %zu bytes of memory\n", ksize(stuff));
kfree(stuff); 
```

要显示分配的实际内存量：

```
[90144.702588] I got: 32 bytes of memory 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-02T11:44:42.357

这完全取决于内核中使用的分配器。板坯、竹节或粗杆。请参阅以下内核配置变量：

```
CONFIG_SLAB
CONFIG_SLUB
CONFIG_SLOB 
```

以上所有分配器都使用**MAX_ORDER**和**PAGE_SHIFT**来决定 kmalloc() 的最大限制

SLAB 分配器支持的最大 kmalloc 大小为 32 MB (2^25) 或最大可分配页顺序（如果小于 32 MB）。

```
#define KMALLOC_SHIFT_HIGH      ((MAX_ORDER + PAGE_SHIFT - 1) <= 25 ? \
  (MAX_ORDER + PAGE_SHIFT - 1) : 25)
#define KMALLOC_SHIFT_MAX       KMALLOC_SHIFT_HIGH 
```

SLUB 直接将请求分配到 order-1 页面 ( `PAGE_SIZE*2`)。较大的请求被传递给页面分配器。

```
#define KMALLOC_SHIFT_HIGH      (PAGE_SHIFT + 1)
#define KMALLOC_SHIFT_MAX       (MAX_ORDER + PAGE_SHIFT) 
```

SLOB 将所有大于一页的请求传递给页分配器。不需要 kmalloc 数组，因为可以从同一页分配不同大小的对象。

```
#define KMALLOC_SHIFT_HIGH      PAGE_SHIFT
#define KMALLOC_SHIFT_MAX       30 
```

kmalloc() 可分配的最大大小为

```
#define KMALLOC_MAX_SIZE        (1UL << KMALLOC_SHIFT_MAX) 
```

kmalloc() 的最小可分配大小为

```
#define KMALLOC_MIN_SIZE (1 << KMALLOC_SHIFT_LOW) 
```

slab 的默认`KMALLOC_SHIFT_LOW`值为 5，slub 和 slob 的默认值为 3。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T18:08:33.443

`kmalloc()`您可以通过以下方式查看int 系统使用的一些常见尺寸：

```
cat /proc/slabinfo  | grep kmalloc 
```

比考虑 kmalloc 是否可以分配少于一页更重要的是它是否可以分配多于一页的问题：如果您`kmalloc()`在原子上下文中调用（带有`GFP_ATOMIC`标志），它不能也不会尝试非常在内存中很难找到连续的页面，所以如果你的内存非常碎片化，并且你的分配顺序很高`(allocation size → pagesize*2^(allocation order))`，分配可能会失败。因此，在原子上下文中，大分配可能会失败。

[在另一个关于最大 AF_UNIX 数据报大小的 SO question](https://stackoverflow.com/a/4822037/371250)中，有一个 order 7 (512 Kb) 分配失败的示例。

# php - 远程处理另一个网站上的表单和实时屏幕抓取

> ID：12568380
> 
> 赞同：0
> 
> 时间：2012-09-24T15:42:02.303
> 
> 标签：php, javascript, screen-scraping

好的，这很复杂，甚至不确定是否可能。需要知识渊博的人提供一些见解，以建议我应该如何进行。

我需要在远程站点上处理表单，屏幕抓取结果（即时），解析信息并将其显示给最终用户。

**——通过例子更清楚地解释——**

*   [1](https://i.stack.imgur.com/39giS.jpg)我的网站是 -> sitea.com

*   [2] 表格在 -> someoneelseswebsite.com（没有数据库访问权限，但表格是公开的）

这是我的逻辑：

1.  我可以从站点 [2] 复制表格并在我的站点[1](https://i.stack.imgur.com/39giS.jpg)上制作精确副本。
2.  当用户提交表单时，我需要（javascript？）中的某种对象`POST`，它将用户输入分配给......并在站点[2]上处理表单，屏幕抓取结果，并以数组形式返回数据，我可以在我的网站上显示[1](https://i.stack.imgur.com/39giS.jpg)。

关键点：

*   用户必须不知道与站点[2] 的交易。
*   这必须实时且快速地发生

那么这可以做到吗？如果是，如何？我知道`PHP cURL`我可以只使用 PHP 还是需要使用其他东西？

- 进一步澄清 -

![在此处输入图像描述](../Images/859ab5c7708a2bc0f2ccba232c9e6fc5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:47:56.333

是的，这是可以做到的。cURL 是一种方法，是的。但是，您需要一些非常繁重的错误检查和验证才能获得任何可靠性。您将使用 cURL POST（假设远程主机没有任何形式的表单键、IP 块、引用者检查等）来复制该表单字段的行为。然后你需要刮掉回报，我认为这是困难的部分。

对我来说，我会使用 DOM Parser 来获得非常具体的信息。[这](https://stackoverflow.com/questions/960841/how-to-use-dom-php-parser)是一篇关于如何做到这一点的帖子。

# jquery - Highcharts 数据标签被切断

> ID：12568384
> 
> 赞同：5
> 
> 时间：2012-09-24T15:42:19.390
> 
> 标签：jquery, jquery-plugins, highcharts

我在使用 Highcharts 时遇到了一个小问题，我已经找到了我想要的一切，但我找不到如何强制数据变量保持在父 div 的范围内。

我附上了一个基本的例子，你可以看到数据标签被切断了，在这件事上的任何帮助将不胜感激！

[http://jsfiddle.net/FCHhS/3/](http://jsfiddle.net/FCHhS/3/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:53:40.430

[**您可以通过控制 的距离**](http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.distance)来拉入或推出标签`dataLabels`。在以下[**示例**](http://jsfiddle.net/FCHhS/5/)中，我将距离设置为 -1，这会将标签拉入。

# java - 将动态参数传递给注释？

> ID：12568385
> 
> 赞同：6
> 
> 时间：2012-09-24T15:42:26.793
> 
> 标签：java, annotations

我正在使用以下注释：

```
@ActivationConfigProperty(
    propertyName = "connectionParameters", 
    propertyValue = "host=127.0.0.1;port=5445,host=127.0.0.1;port=6600"),
public class TestMDB implements MessageDrivenBean, MessageListener 
```

我想提取这些 IP 地址和端口中的每一个并将它们存储在一个文件中`jmsendpoints.properties`......然后动态加载它们。像这样的东西：

```
@ActivationConfigProperty(
    propertyName = "connectionParameters", 
    propertyValue = jmsEndpointsProperties.getConnectionParameters()),
public class TestMDB implements MessageDrivenBean, MessageListener 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T15:45:04.893

**不**，注释处理器（您正在使用的基于注释的框架）需要实现一种处理占位符的方法。

* * *

例如，类似的技术在[`Spring`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)

```
@Value("#{systemProperties.dbName}") 
```

这里[`Spring`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/expressions.html)实现了一种*解析*特定语法的方法，在这种情况下，它转换为类似于`System.getProperty("dbName");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:49:17.290

注释并非设计为在运行时可修改，但您可以利用字节码工程库（例如[ASM](http://asm.ow2.org/)）来动态编辑注释值。

相反，我建议创建一个可以修改这些值的界面。

```
public interface Configurable {
    public String getConnectionParameters();
}

public class TestMDB implements MessageDrivenBean, MessageListener, Configurable {

    public String getConnectionParameters() {
        return jmsEndpointsProperties.getConnectionParameters();
    }

    //...
} 
```

您可能希望创建一个更面向键值的接口，但这是它的一般概念。

# winforms - windows 窗体 - 发生耗时的操作时窗体冻结

> ID：12568388
> 
> 赞同：0
> 
> 时间：2012-09-24T15:42:28.530
> 
> 标签：winforms, events

我对 Windows 窗体有点陌生。我创建的 Windows 窗体应用程序是执行非常耗时的数据转换任务的组件的前端。数据转换任务发出表单订阅的事件。

当表单接收到事件时，它会更改标签中的文本并调用`Refresh()`该标签。

当我从表单运行该过程时，它会保持响应并更新标签文本可能一分钟左右。之后，它只是冻结并且 Windows 声明进程“无响应”，直到数据转换完成，此时表单解冻并且标签显示数据转换已完成（如预期的那样）。

我还没有将数据转换放到单独的线程上——这是我应该尝试的第一件事吗？事件可以跨线程吗？如果没有，我还应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:54:38.113

是的，线程是你应该工作的地方。根据您的版本，WinForms 中的多线程可能会很棘手。

如果您使用的是 .NET 4.0 或更高版本，则可以使用[Microsoft Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

否则，这里有一篇来自 C# Corner 的好文章，[它](http://visualstudiomagazine.com/articles/2010/11/18/multithreading-in-winforms.aspx)涵盖了我建议作为起点的 WinForms 应用程序中的线程。

[BackgroundWorker](http://fernandof.wordpress.com/2007/04/04/implementing-multi-threading-in-winforms-using-the-backgroundworker-class/)是在 WinForms 中简化线程的另一个选项。

# python - Django cursor.execute(QUERY) 比在 postgres 数据库中运行查询慢得多

> ID：12568390
> 
> 赞同：2
> 
> 时间：2012-09-24T15:42:31.490
> 
> 标签：python, django, performance, postgresql

我有一个 postgresql 查询，当在运行的数据库中完成时，它会`{integer, boolean, integer, varchar(255), varchar(255), bigint, text}`在大约**70 毫秒**`psql`内返回 120 行。

在同一台机器上使用 python/django`django.db.connection.cursor.execute()`需要**10 秒才能运行。**

我尝试将所有行放入一个数组和一个字符串（18k 个字符，但只返回前 500 个字符需要相同的时间），所以只返回一行但没有增益。

关于为什么在 python 和 db 中运行查询会出现如此显着的减速的任何想法？

**编辑**

我不得不增加 work_mem 以使函数在 psql 中及时运行。其他函数/查询不显示相同的模式，psql 和 python 之间的差异只有几毫秒。

**编辑**

将 work_mem 减少到 1MB 在 psql 和 django shell 中显示相似的数字。难道是django没有按照work_mem中设置的内存？

**编辑**

啊。问题是psql中设置的work_mem全局无效，如果我在函数中设置内存，调用是及时的。我想在配置文件中设置它可以全局工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:51:44.067

如果“原位”查询和 psql 查询之间的时间差异很大，那么第一个也是通常的怀疑是：如果框架使用准备好的语句，那么您也必须使用准备好的语句检查 psql 中的时间。例如：

```
prepare foo as select * from sometable where intcolumn = $1;
execute foo(42); 
```

如果时间与您的现场查询在`execute`同一个球场，那么您可以`explain`和线路。`explain analyse``execute`

如果时间不在同一个球场上，您必须寻找其他东西。

# c++ - 即使没有按键，我如何在屏幕上发生一些事情？

> ID：12568391
> 
> 赞同：1
> 
> 时间：2012-09-24T15:42:37.700
> 
> 标签：c++, game-physics, ncurses

我正在使用 Ncurses 库在 C++ 中制作 Pacman。我可以用我的代码移动 Pacman，但我想移动它，这样即使我没有按任何键，当我按下另一个方向键时，pacman 也会继续移动，它会改变方向。现在，当我按下一个键时，pacman 只需要一步。此外，在 pacman 朝那个方向移动之前，我必须按下一个键 2 或 3 次。

```
if (ch==KEY_LEFT)
{
    int b,row,column;
    getyx(stdscr,row,column);
    int h; 
    do    // do-whileloop to move the pacman left until it hits the wall
    {
        column-=1;
        mvprintw(row,column,">");  //print the ">" symbol
        refresh();
        waitf(0.1);      //this pauses the game for 0.1sec
        attron(COLOR_PAIR(1));      
        mvprintw(row,column,">");
        attroff(COLOR_PAIR(1));
        refresh();
        waitf(0.1);
        mvprintw(row,(b),"O");  //showing the open mouth of pacman
        refresh();
        waitf(0.1);
        attron(COLOR_PAIR(1));a
        mvprintw(row,column,"O");
        attroff(COLOR_PAIR(1));
        h = getch();
    }
    while(h == KEY_LEFT);
}

right = getch(); 
```

循环在 if 条件下向右移动

```
up = getch(); 
```

在 if 条件下循环向上移动

```
down = getch(); 
```

oop 在 if 条件下向下移动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:54:25.573

对此的标准解决方案是[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)。角色有六种左右的可能状态：站立、上移、右移、下移、左移、死亡。而不是按键直接移动角色，按键应该改变角色的状态。

在这样一个小型应用程序中，您可以使用一个非常简单的实现，而不是实现一个非常灵活的有限状态机：

```
enum PlayerState {
    Standing,
    MovingUp,
    MovingRight,
    MovingDown,
    MovingLeft,
    Dead
}; 
```

然后，在您的游戏循环中，您可以添加一个非常简单的状态检查，然后对帧采取适当的行动。

```
switch(state) {
case Standing:
    break;
case MovingUp:
    player.PositionY += 1;
    break;
// ...
} 
```

最后一步是挂钩输入，这取决于您检索输入的方法。使用回调，一个例子是：

```
void KeyDown(Key k) {
    switch(k) {
    case UpArrow:
        if(state != Dead)
            state = MovingUp;
        break;
    case RightArrow:
        if(state != Dead)
            state = MovingRight;
    // ...
    }
} 
```

您可以看到为什么在一个更大的项目中实现更灵活的有限状态机很重要，但希望这个示例给了您一个易于理解的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:59:09.797

你需要一个等价的[`kbhit`](http://www.cprogramming.com/fod/kbhit.html)，即。一个非阻塞的`getch`. 这确实给出了解决方案，设置[`O_NONBLOCK`](http://linux.die.net/man/2/fcntl)在输入上。[请参阅此处](http://cboard.cprogramming.com/c-programming/63166-kbhit-linux.html)的示例。一旦你有了这个，只需连续循环并检查按键，无需等待实际按键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:56:14.010

功能`getch`被阻止，直到按下某个键。如果您不想被阻止，请`_kbhit`在之前调用，`getch`确保输入缓冲区中有内容。

编辑：看看 ncurses 函数`nodelay`和`cbreak`. 它们启用异步输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:44:32.513

我建议您看一下[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模型，它将帮助您解决这些问题以及如果您继续这样的程序会遇到的所有其他问题。

编辑：快捷方式

要连续移动您的 pacman，您将需要一个单独的线程来控制它并使其移动。看看 pthreads 。

如果您只在程序的主运行循环中保留用户输入，那么您必须按几次键的问题也会消失（这里的问题是处理器必须在 getch() 行时按键，否则检测不到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T15:00:06.347

每个方向很容易
制作4个功能，在功能内部，放入由kbhit激活的其他3个方向功能。

并放置一个 else 语句，如果你不点击按钮，它会继续前进，即 (!kbhit()); 然后将所有这些放在一个循环中。

* * *

如果你对所有方向函数都这样做，你应该能够得到理想的结果。

# c++ - 如何使用winapi类？

> ID：12568392
> 
> 赞同：1
> 
> 时间：2012-09-24T15:42:36.993
> 
> 标签：c++, qt, winapi, mount, disk-partitioning

我正在尝试创建一个项目，该项目创建一个文件，格式化它，创建一个新分区并挂载它，卸载它......在 C++ 中使用 Qtcretor 我发现 winapi 提供了几个函数帮助我做到这一点`Format method of the Win32_Volume class`，`AddMountPoint method of the Win32_Volume class`但没有代码示例展示如何使用它我尝试使用[WMI C++ 应用程序示例](http://msdn.microsoft.com/en-us/library/aa394558%28v=vs.85%29.aspx)但徒劳无功

有人可以请我上路吗？

任何帮助将不胜感激，并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:31:56.247

使用 WMI 应该在 Powershell 脚本中完成，而不是 C++。

如果您一开始就迷路了，那么只需将 C++ 的使用限制为 CreateProcess() 函数调用，并引用一些 Powershell 脚本。

如果您坚持用 C++ 编写所有内容，那么 MSDN 文档应该可以帮助您使用[WMI 的 COM API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389276%28v=vs.85%29.aspx)。有[C++ 代码示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394558%28v=vs.85%29.aspx)。您所谓的“winapi 类”实际上是具有所有复杂性的 COM 接口。我认为你不会仅仅通过复制'n'粘贴一些行来逃避，因为 COM 不如 VBScript 直观。

# c - 在命令行解释器上工作，无法获取 && 和 || 正常工作

> ID：12568395
> 
> 赞同：0
> 
> 时间：2012-09-24T15:42:51.767
> 
> 标签：c, command-line-interface

在尝试创建一个非常基本的命令行解释器时，我遇到了一个我似乎无法弄清楚的部分。当我检查所需分隔符的令牌时，我似乎无法正确启用 && 和 || 功能。下面列出的是插入 args 然后创建进程的循环。

我现在只关注 && 并计划使用该实现来帮助 || 功能。你们可以看看并帮助我指出正确的方向吗？

旁注：这也是我第一次用 C 编写程序，因此代码中可能会出现一些错误。

这是一个家庭作业问题。

谢谢

更新了我到目前为止的完整程序代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <sys/types.h>
#define ARG_SIZE 1<<16
#define MAXLINE 100

char *args[ARG_SIZE];
int place = 0;
int return_status;

void insert( char *token ){
    args[ place ] = token;
    place++;
}

void create() {
    size_t nargs = place;
    pid_t pid;

    if ( nargs == 0 ) return;
    if ( !strcmp( args[0], "exit" ) ) exit(0);
    pid = fork();
    if ( pid ) {
        pid = wait( return_status );
    } else {
        if ( access( args[ 0 ], X_OK ) ){
            if( execvp( args[ 0 ], args ) ) {
                puts( strerror( errno ) );
                exit( 127 );
            }
        }else{
            puts( strerror( errno ) );
            exit( 127 );
        }
    }

    int i = 0;
    for ( i ; i < place + 1; i++)
        args[ i ] = NULL;
    place = 0;
}

int main( int argc, char *argv[] ){

    char line[MAXLINE+1];                       /* an input line */
    int c;                                      /* a single input char or EOF */
    int n;                                      /* line length */
    char *token;                                /* pointer to an input token */

    for(;;) {                                   /* repeat until end of file */ 
        write( 1, "#>", 2 );

        if (fgets(line,MAXLINE,stdin) == NULL)  /* end of file? */
            exit(0);

        n = strlen(line);                       /* get length of line */

        if (n == 0)                             /* if line is empty */
            continue;

        if (line[n-1] != '\n') {                /* does input end with '\n' ? */
            fprintf(stderr,"Line too long.\n"); /* no, so line is too long. */

            /*--------------------------------------------*/
            /* Read and ignore input through end of line. */
            /*--------------------------------------------*/
            while ((c = fgetc(stdin)) != '\n') {
                if (c == EOF) {
                    fprintf(stderr,"Unexpected end of file\n");
                    exit(1);
                }
            }
            continue;
        }

        write( 1, line, strlen( line ) );
        line[n-1] = '\0';                      /* remove the end of line */
        /*-------------------------------------------------------------*/
        /* Identify and process each token (i.e. sequence of non-blank */
        /* characters delimited by whitespace). For "ordinary" tokens  */
        /* (i.e. "words") we just display them. For the ||, &&, and ;  */
        /* items we display them with a textual explanation.           */
        /*-------------------------------------------------------------*/
        token = strtok(line," \t");
        while (token != NULL ) {
            insert( token );
            if (!strcmp(token,"&&")){
                place--;
                args[ place ] = NULL;
                create();
                if( return_status == -1)
                    write( 1, "Wait failed.\n", 12 );
                if( return_status & 0xff ){
                    int i = 0;
                    for( i; i < place; i++)
                        args[ i ] = NULL;
                    place = 0;
                    while( strcmp( token, "||" ) || strcmp( token, ";" ) ) ;
                }
            }
            else if (!strcmp(token,"||")){
                place--;
                args[ place ] = NULL;
                completed = 0;
                create();                
            }
            else if (!strcmp(token,";")){
                place--;
                args[ place ] = NULL;
                create();
            }
            else{
            }
            token = strtok(NULL," \t");
        }
        create();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:16:17.637

wait() 接受一个整数指针，而不是整数。应该有一个编译器警告。如果没有，我建议您使用警告标志。

```
#include <sys.wait.h>
wait(&return_code); 
```

此检查不正确，因为 access() 在成功时返回 0。似乎您不能使用访问权限来检查不在当前目录中的命令，除非它们提供了可执行文件的完整路径或者您可以扩展它。例如，“ls”需要扩展为“/bin/ls”。

```
if ( access( args[ 0 ], X_OK ) ){
            if( execvp( args[ 0 ], args ) ) {
                puts( strerror( errno ) );
                exit( 127 );
            } 
```

对 return_status 的检查正在查看第一个字节，但被 forked() 或 execvp() 的程序在第二个字节中返回其状态。检查它返回的内容：

```
if( return_status & 0xff ){ 
```

应该是：

```
if ( WEXITSTATUS(return_status) != 0 ){ 
```

或者

```
if ( (return_status & 0xff00) >> 8 ){ 
```

if 正文：

```
 for( int i = 0; i < place; i++)
                        args[ i ] = NULL;
       place = 0;
       while( strcmp( token, "||" ) || strcmp( token, ";" ) ) ; 
```

可以替换为：

```
 break; 
```

因为您正在执行 for 循环并在 create() 中将 place 设置为 0，而 while 循环对我来说是无限的。只是在结束命令序列时打破封闭，让您回到阅读另一个键入的命令行。

```
 //if ( return_status == -1) 
```

可以使用 wait() 状态宏：

```
 if ( ! WIFEXITED(return_status) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:04:08.997

此代码显示了我在另一个答案中提到的内容，适用于“false && ls”，并在 && 失败后更新以解决更多命令。

```
 #include <unistd.h>
    #include <string.h>
    #include <errno.h>
    #include <sys/types.h>
    #include <sys/wait.h>
    #define ARG_SIZE 1 << 16
    #define MAXLINE 100

    char *args[ARG_SIZE];
    int place = 0;
    int return_status;

    char message[200];

    void insert( char *token ){
        args[ place ] = token;
        place++;
    }

    void reset_args(void)
    {
        for (int i = 0 ; i < place + 1; i++)
            args[ i ] = NULL;
        place = 0;
    }

    #define EXECVP_FAILED 127

    char last_command[200];

    void create() {
        size_t nargs = place;
        pid_t pid;

        if ( nargs == 0 ) return;
        if ( args[0] )
            strcpy(last_command,args[0]);
        else
           last_command[0] = '\0';
        if ( !strcmp( args[0], "exit" ) ) exit(0);
        pid = fork();
        if ( pid ) {
            pid = wait( &return_status );
        } else {
            if( execvp( args[ 0 ], args ) ) 
            {
               puts( strerror( errno ) );
               exit( EXECVP_FAILED );
            }
        }
        reset_args();
    }

    int main( void ){

       char line[MAXLINE+1];                       /* an input line */
       int c;                                      /* a single input char or EOF */
       int n;                                      /* line length */
       char *token;                                /* pointer to an input token */
       enum states { NORMAL, AND_CMD_FAILED };
       enum states state  = NORMAL;
       for(;;) {                                   /* repeat until end of file */ 
          state = NORMAL;
          write( 1, "#>", 2 );

          if (fgets(line,MAXLINE,stdin) == NULL)  /* end of file? */
             exit(0);

          n = strlen(line);                       /* get length of line */

          if (n == 0)                             /* if line is empty */
             continue;

          if (line[n-1] != '\n') {                /* does input end with '\n' ? */
             fprintf(stderr,"Line too long.\n"); /* no, so line is too long. */

             /*--------------------------------------------*/
             /* Read and ignore input through end of line. */
             /*--------------------------------------------*/
             while ((c = fgetc(stdin)) != '\n') {
                if (c == EOF) {
                   fprintf(stderr,"Unexpected end of file\n");
                   exit(1);
                }
             }
             continue;
          }

          write( 1, line, strlen( line ) );
          line[n-1] = '\0';                      /* remove the end of line */
          /*-------------------------------------------------------------*/
          /* Identify and process each token (i.e. sequence of non-blank */
          /* characters delimited by whitespace). For "ordinary" tokens  */
          /* (i.e. "words") we just display them. For the ||, &&, and ;  */
          /* items we display them with a textual explanation.           */
          /*-------------------------------------------------------------*/
          token = strtok(line," \t");
          while (token != NULL ) {
             insert( token );
             if (!strcmp(token,"&&")){
                    place--;
                args[ place ] = NULL;                      
                            if ( state == NORMAL )
                               create();
                            else
                               reset_args();

                if ( ! (WIFEXITED(return_status) ) || ( WEXITSTATUS(return_status)  ) )
                {
                   // command did not execute successfully
                   if ( ! WIFEXITED(return_status) )
                   {
                      sprintf(message,"Wait failed for %s\n",last_command);
                      write( 1, message, strlen(message) );
                   }
                   else if ( WEXITSTATUS(return_status) == EXECVP_FAILED )
                   {
                      sprintf(message,"execvp failed for %s\n",last_command);
                      write( 1, message, strlen(message) );
                   }
                   else  if ( WEXITSTATUS(return_status) != 0 ) {
                      sprintf(message,"%s command failed - exit status %d\n",
                              last_command,WEXITSTATUS(return_status));
                      write( 1, message, strlen(message) );
                   }
                   // bypass next command(s) up to || or ; delimiters
                   state = AND_CMD_FAILED;
                }
             }
             else if (!strcmp(token,"||")){
                place--;
                args[ place ] = NULL;
                //completed = 0;
                if ( state == NORMAL )
                   create();
                else
                   reset_args();
                state = NORMAL;         
             }
             else if (!strcmp(token,";")){
                place--;
                args[ place ] = NULL;
                if ( state == NORMAL )
                   create();
                else
                   reset_args();
                state = NORMAL;
             }
             else{
             }
             token = strtok(NULL," \t");
          }
          if ( state == NORMAL )
             create();
          else
             reset_args();
       }
       return 0;
  } 
```

# css - DIV 水平滚动条作为主要水平滚动条

> ID：12568398
> 
> 赞同：2
> 
> 时间：2012-09-24T15:43:04.970
> 
> 标签：css, html

我有一个带有容器的布局，然后在该容器内是内容的另一个 div。我已经设置好了，如果一个表比容器大，就会有一个滚动条。

但是，许多表格都很长，所以为了到达那个水平滚动条，您必须一直向下滚动到页面底部 向右滚动然后向上滚动到页面顶部才能看到信息。

有没有办法让 div 的水平滚动条处于默认/主要水平滚动条位置？

```
body    {
    height: 100%;
    width: 100%;
    background: #e8d7b5;
    margin:0px;
    padding:0px 0px 0px 0px;
    font-family: Arial, Helvetica, Geneva, sans-serif;
    _text-align: center;
    overflow:hidden;
}
#bg {
    z-index: -999;
    min-height: 100%;
    min-width: 1024px;
    width: 100%;
    height: auto;
    position: absolute;
    top: 0;
    left: 0;
}

div {
    border:none;
}
a   {
    color:#000000;
}
a:hover {
    color: #B89626;
}
li  {
    list-style-image: url(Bullet.gif);
}
#container {
    position: relative;
    width: 97%;
    min-height: 700px;
    overflow: auto;
    *height: 700px;
    margin: 0px auto;
    _text-align: left;
    padding: 0px 7px 7px 7px;
    background: #ffffff;
    }

#content {
    width: 99%;
    overflow-x: auto;

}
.navigation {
    background: #003b5b;
    border:3px;
    padding: 10px 10px 0px;
    border-color: #011d2d;
    width:100%;
    height: 30px;
    }
.standardtab {
    background: #011D2D;
    padding-left: 3px;
    padding-right: 3px;
    height: 25px;
}
.nonstandardtab {
    background: #0D4664;
    padding-left: 3px;
    padding-right: 3px;
    height: 25px;
} 
```

有我的CSS。我有一个容器，然后是我的内容的 div，它具有水平滚动。我需要内容的滚动条作为主滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:50:50.980

在容器上设置一个高度并溢出：隐藏；在 body 上删除默认的 body 滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:39:41.820

为什么不将表格的高度固定为页面/容器的高度并包含垂直滚动条。所以你可以在屏幕上看到水平滚动条，而不是滚动到表格底部然后到达水平滚动条。

不能完全解决您的问题，但可能是另一种选择。

# cocoa - CALayer 最大尺寸

> ID：12568402
> 
> 赞同：3
> 
> 时间：2012-09-24T15:43:18.497
> 
> 标签：cocoa, core-animation, calayer

是否有最大 CALayer 大小？

我有一个很长的垂直列表，其中 rootLayer 和子层作为项目，在 ~16k rootLayer 的高度之后，我`CoreAnimation: surface WIDTH x HEIGHT is too large`在`[rootLayer addSublayer:]`.

有没有办法制作一个非常大的图层？我尝试使用`CATiledLayer`而不是`CALayer`没有成功。

**UPD**

这是我的代码

```
static const NSSize itemSize = { 600, 100 };

#import "CAView.h"

@implementation CAView

- (id)initWithFrame:(NSRect)frameRect
{
    self = [super initWithFrame:frameRect];

    CATiledLayer* layer = [CATiledLayer layer];
    layer.tileSize = itemSize;

    self.layer = layer;
    self.wantsLayer = YES;

    return self;
}

- (void)addLayer
{
    static CGFloat itemY = 0.0;

    CATextLayer* layer = [CATextLayer layer];
    layer.string = [NSString stringWithFormat:@"item %ld", [self.layer.sublayers count]];
    layer.backgroundColor = [[NSColor redColor] CGColor];
    layer.frame = NSMakeRect(0, itemY, itemSize.width, itemSize.height);

    [self.layer addSublayer:layer];

    itemY += itemSize.height;

    NSRect frame = self.frame;
    frame.size.height = itemY;

    self.frame = frame;
}

@end 
```

当视图尺寸变大时，最大 OpenGL 纹理尺寸会在我的视图中闪烁，并且控制台日志中的“CoreAnimation：表面宽度 x 高度太大”。

# javascript - Chrome 是否支持单个 javascript url 上的多个模块/sourceMappingURL

> ID：12568403
> 
> 赞同：4
> 
> 时间：2012-09-24T15:43:19.240
> 
> 标签：javascript, google-chrome-devtools, source-maps

我一直在尝试 Chrome 中的 Source Maps 功能，发现它不支持将单个 javascript 资源附加到包含多个连接在一起的模块的脚本标记以及分隔*每个*`//@sourceMappingURL`模块的注释。

 *第一个映射已连接，我看到调试器中关联的模块源，但所有其他的都被忽略了。

我希望当多个模块被缩小并连接在一起时，这将是一个注释要求

是否支持场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-17T19:33:12.510

Chrome DevTools 不支持在单个文件中定义多个 sourceMappingURL。（不幸的是，Pavel 在 2012 年的回答是不正确的。）与此相关的是，Chrome 也不支持单个文件中的多个 sourceURL。

链接的规范章节引用了一个节数组，但它是在一个解决整个文件的父映射中定义的。

因此，如果您的代码如下所示：

```
// ... code()

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3V…  

},{"./bufferClone":99}],122:[function(require,module,exports){

// ... code()

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kd…
} 
```

..那么您需要调整编译管道，以便最终捆绑文件只有一个映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:34:13.797

是的，它受支持。您可以使用“sections”字段为部分脚本提供源映射。请参阅[索引图：支持](https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?hl=en_US#heading=h.535es3xeprgt)规范的后处理部分。*

# sql - 如何在 SQL Server 2008 中将整数（时间）转换为 HH:MM:SS::00？

> ID：12568408
> 
> 赞同：20
> 
> 时间：2012-09-24T15:43:28.120
> 
> 标签：sql, sql-server-2008, date, time

这里我有一个包含一`time`列的表（数据类型是`integer`），现在我需要`HH:MM:SS:00`在 SQL Server 2008 中将整数值转换为时间格式。

上面的格式还需要说明一下`time`，00是否代表毫秒？

请帮助解决这个问题。

例如：23421155 代表 23:42:11:55；421151 代表 00:42:11:51

希望现在很清楚。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-25T05:59:34.320

```
declare @T int

set @T = 10455836
--set @T = 421151

select (@T / 1000000) % 100 as hour,
       (@T / 10000) % 100 as minute,
       (@T / 100) % 100 as second,
       (@T % 100) * 10 as millisecond

select dateadd(hour, (@T / 1000000) % 100,
       dateadd(minute, (@T / 10000) % 100,
       dateadd(second, (@T / 100) % 100,
       dateadd(millisecond, (@T % 100) * 10, cast('00:00:00' as time(2)))))) 
```

结果：

```
hour        minute      second      millisecond
----------- ----------- ----------- -----------
10          45          58          360

(1 row(s) affected)

----------------
10:45:58.36

(1 row(s) affected) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-05T05:30:43.370

将整数转换为字符串，然后您可以使用 STUFF 函数将冒号插入时间字符串。完成后，您可以将字符串转换为时间数据类型。

```
SELECT CAST(STUFF(STUFF(STUFF(cast(23421155 as varchar),3,0,':'),6,0,':'),9,0,'.') AS TIME) 
```

这应该是最简单的将它转换为时间而不做任何疯狂的方法。

在您的示例中，您还有一个 int ，其中前导零不存在。在这种情况下，您可以简单地执行以下操作：

```
SELECT CAST(STUFF(STUFF(STUFF(RIGHT('00000000' + CAST(421151 AS VARCHAR),8),3,0,':'),6,0,':'),9,0,'.') AS TIME) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-02T12:09:19.170

使用内置的 MSDB.DBO.AGENT_DATETIME(20150119,0)

[https://blog.sqlauthority.com/2015/03/13/sql-server-interesting-function-agent_datetime/](https://blog.sqlauthority.com/2015/03/13/sql-server-interesting-function-agent_datetime/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-17T08:34:36.600

这将起作用：

```
DECLARE @MS INT = 235216
select cast(dateadd(ms, @MS, '00:00:00') AS TIME(3)) 
```

（其中 ms 只是几秒钟而不是时间格式）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-04T09:06:48.193

您可以像这样在 SQL 中使用以下时间转换：

```
--Convert Time to Integer (Minutes)
DECLARE @timeNow datetime = '14:47'
SELECT DATEDIFF(mi,CONVERT(datetime,'00:00',108), CONVERT(datetime, RIGHT(CONVERT(varchar, @timeNow, 100),7),108))

--Convert Minutes to Time
DECLARE @intTime int = (SELECT DATEDIFF(mi,CONVERT(datetime,'00:00',108), CONVERT(datetime, RIGHT(CONVERT(varchar, @timeNow, 100),7),108)))
SELECT DATEADD(minute, @intTime, '') 
```

结果：887 <- 以分钟为单位的时间和 1900-01-01 14:47:00.000 <- 分钟

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-20T04:55:48.010

```
CREATE FUNCTION [dbo].[_ICAN_FN_IntToTime](@Num INT)
  RETURNS NVARCHAR(13)
AS
-------------------------------------------------------------------------------------------------------------------
--INVENTIVE:Keyvan ARYAEE-MOEEN
-------------------------------------------------------------------------------------------------------------------
  BEGIN
    DECLARE @Hour VARCHAR(10)=CAST(@Num/3600 AS  VARCHAR(2))
    DECLARE @Minute VARCHAR(10)=CAST((@Num-@Hour*3600)/60 AS  VARCHAR(2))
    DECLARE @Time VARCHAR(13)=CASE WHEN @Hour<10 THEN '0'+@Hour ELSE @Hour END+':'+CASE WHEN @Minute<10 THEN '0'+@Minute ELSE @Minute END+':00.000'
    RETURN @Time
  END
-------------------------------------------------------------------------------------------------------------------
--SELECT dbo._ICAN_FN_IntToTime(25500)
------------------------------------------------------------------------------------------------------------------- 
```

# asp.net - 如何使用 linq 搜索兄弟姐妹？

> ID：12568409
> 
> 赞同：0
> 
> 时间：2012-09-24T15:43:30.200
> 
> 标签：asp.net, vb.net, linq

给定以下 XML（这是 Excel XML 数据表中的两行），我想查找所有**Cost**值并找到关联的**AltID**

```
...
   <Row ss:AutoFitHeight="0">
    <Cell ss:StyleID="s62"><Data ss:Type="String" AltID="1" ColumnHeader="AltName">Alternative 2</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="Number" ColumnHeader="Total">0.105468638</Data></Cell>
    <Cell ss:StyleID="s64"><Data ss:Type="Number" ColumnHeader="Cost">123</Data></Cell>
    <Cell ss:StyleID="s64"><Data ss:Type="Number" ColumnHeader="Risk">456</Data></Cell>
   </Row>
   <Row ss:AutoFitHeight="0">
    <Cell ss:StyleID="s62"><Data ss:Type="String" AltID="2" ColumnHeader="AltName">Alternative 3</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="Number" ColumnHeader="Total">1.7803949999999999</Data></Cell>
    <Cell ss:StyleID="s64"><Data ss:Type="Number" ColumnHeader="Cost">123</Data></Cell>
    <Cell ss:StyleID="s64"><Data ss:Type="Number" ColumnHeader="Risk">456</Data></Cell>
   </Row>
... 
```

我可以很容易地找到 Costs ，但我需要找到一种方法来说明，使用这个给定的成本，将“上升”一个级别到**Row**，然后找到 ColumnHeader 等于 AltName 的单元格**，**然后给我**AltID**属性。

```
 Dim costs = From item In dg...<Table>...<Row>...<Cell>...<Data> Select item Where item.@ColumnHeader = "Cost"
    For Each i In costs
        dim CostValue as Integer = i.value
        dim AltID as Integer = ...
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:36:58.393

您无需通过三个点来导航每个元素。Triple dot 是 .Descendents 的简写。您可以将其简化为 dg... 只要您不关心 Data 节点在层次结构中的位置。获得所需节点后，您可以使用 Parent 向上导航图表，然后根据需要再次向下导航。这应该为您提供给定节点的 AltID 属性：

```
 Dim costs = From item In dg...<Data> 
    Where item.@ColumnHeader = "Cost"
    select item.Parent.Parent...<Data>.
               FirstOrDefault(Function(node) node.Attribute("ColumnHeader").Value = "AltName").@AltID 
```

或者，您可以使用 Ancestors 而不是 .Parent.Parent 来实现相同的目标。请参阅[http://www.dbtalks.com/uploadfile/a7e1c8/linq-to-xml-axis-methods-part-1-ancestors-and-ancestorsands/](http://www.dbtalks.com/uploadfile/a7e1c8/linq-to-xml-axis-methods-part-1-ancestors-and-ancestorsands/)。

# ember.js - 在 Ember Data 中分配给 hasMany 关系

> ID：12568410
> 
> 赞同：7
> 
> 时间：2012-09-24T15:43:32.063
> 
> 标签：ember.js, ember-data

我正在尝试了解 Ember 数据模型，并且在尝试将使用找到的对象集合分配给ember 数据模型`store.findAll()`的关系时遇到问题。`hasMany`

我定义了两个模型：

```
App.Leaf = DS.Model.extend({
    text: DS.attr('string'),
    branch: DS.belongsTo('App.Branch')
});

App.Branch = DS.Model.extend({
    lotsOfLeaves: DS.hasMany('App.Leaf')
}); 
```

如果我将关系分配为`createRecord()`

```
 App.store.loadMany(App.Leaf,[
        { id: 1, text: "Hello, I'm leaf 1", branch_id: 1 },
        { id: 2, text: "Hello, I'm leaf 2", branch_id: 1 }
    ]);
    var allLeaves = App.store.findAll(App.Leaf);
    var oneBranch = App.Branch.createRecord({ id: 1, lotsOfLeaves: allLeaves }); 
```

然后它按原样（默默地）`oneBranch.get('lotsOfLeaves.length')`失败`0`。

同样，如果我在关联之后分配关系，它会静默失败：

```
 var all = App.store.findAll(App.Leaf);
    oneBranch.set('lotsOfLeaves', all); 
```

我知道我可以使用`pushObject()`on`oneBranch.get('lotsOfLeaves')`单独添加每片叶子，但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:16:36.257

MutableArray 类还定义了一个 pushObjects() 方法，您应该能够使用该方法一次添加所有这些对象。

文档在这里：[http ://docs.emberjs.com/symbols/Ember.MutableArray.html#method=pushObjects](http://docs.emberjs.com/symbols/Ember.MutableArray.html#method=pushObjects)

# linux - 民意调查，选择和“会阻止”

> ID：12568412
> 
> 赞同：3
> 
> 时间：2012-09-24T15:43:36.687
> 
> 标签：linux, linux-kernel, kernel-module

我正在学习`poll`,`select`和类似的功能，我经常被“会阻塞”的说法所困扰（这既出现在我正在阅读的关于为 Linux 构建驱动程序的书上，也出现在 和 的手册页上`poll`）`select`。我真的不明白这一点。什么会被阻止？正在读取/写入文件描述符的进程？读/写操作本身，从某种意义上说，当当前进程正在读/写该文件时，没有其他进程能够读/写该文件？

如果这是一个愚蠢的问题，我很抱歉，但我很难在任何地方找到这个问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:49:30.457

将阻塞意味着进行系统调用的进程将阻塞（等待）直到系统调用返回。例如，如果您要求您的程序读取文件，在发出 read 命令后，您的程序将等待（阻塞），直到操作系统执行读取并将结果返回给您的程序。

对于多个程序访问同一个文件，多个进程可以读取同一个文件。但是，当一个或多个进程正在写入一个有一个或多个进程读取同一文件的文件时，您可以（并且通常会）出现竞争条件。换句话说，阻塞是关于访问文件的单个进程，并且不保证访问同一文件的两个进程之间的操作顺序（例如读取和写入）。（出于某种原因，我在考虑文件；管道和套接字的读/写特性与文件系统上的文件有很大不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:05:37.970

除了杰夫斯的正确答案：

但是，如果您以非阻塞模式 (O_NONBLOCK) 打开相应的文件描述符，则可以以非阻塞方式使用大多数系统调用。该调用将始终立即返回，但如果失败，它会在 errno 中返回 EWOULDBLOCK（并且没有有效数据），您需要在应用程序或驱动程序中自行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T16:30:16.913

让我换一种说法。

1) 正常 I/O 是“阻塞”的。您发出“读取”指令，程序“等待”直到数据到达或发生错误（或超时）。

2) 非阻塞 I/O 是“不同的”。你需要一些方法来判断你是否“完成”了。

3) 对于“读取”，EWOULDBLOCK 表示“没有任何数据”。它的意思是“如果这是'普通 I/O'，那么我会阻塞”。

4）对于“写入”，EWOULDBLOCK 表示“第一个缓冲区尚未完全发送并确认 - 您可能希望在发送其他任何内容之前推迟。”

两个链接：

*   [http://beej.us/guide/bgnet/output/html/multipage/advanced.html](http://beej.us/guide/bgnet/output/html/multipage/advanced.html)

*   [通过轮询非阻塞套接字正确处理 EWOULDBLOCK](https://stackoverflow.com/questions/3673828/proper-handling-of-ewouldblock-with-polling-on-a-non-blocking-socket)

# php - 配置后 PDOException “找不到驱动程序”

> ID：12568415
> 
> 赞同：1
> 
> 时间：2012-09-24T15:43:43.520
> 
> 标签：php, mysql, pdo

我正在尝试使用 mysql 将表单迁移到 PDO，以下代码旨在建立连接

```
try{
   $DBH = new PDO("mssql:host=".DB_SERVER.";dbname=".DB_NAME, DB_USER, DB_PASS);  
}
catch(PDOException $e) {  
    echo "Error: <br>";
    echo $e->getMessage();  
} 
```

运行php文件会打印出来

```
Error: 
could not find driver 
```

我尝试在腻子中执行以下操作

```
sudo apt-get update
sudo apt-get install php5-mysql
sudo pecl install pdo_mysql
sudo /etc/init.d/apache2 restart 
```

我在 php.ini 中添加了以下几行

```
extension=pdo.so
extension=pdo_mysql.so 
```

但我仍然收到错误，我可能会错过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:46:25.743

您在代码中使用**MsSQL**但安装**MySQL**驱动程序，还是我错过了什么？
安装 PDO [http://php.net/manual/en/pdo.drivers.php](http://php.net/manual/en/pdo.drivers.php)但根据[http://php.net/manual/en/ref.pdo-sqlsrv.php](http://php.net/manual/en/ref.pdo-sqlsrv.php)驱动程序仅适用于 Windows 安装。

# algorithm - 具有依赖关系的嵌套循环公式

> ID：12568416
> 
> 赞同：2
> 
> 时间：2012-09-24T15:43:45.317
> 
> 标签：algorithm, complexity-theory

> **可能重复：**
> [大 O：嵌套的具有依赖关系的 For 循环](https://stackoverflow.com/questions/12326708/big-o-nested-for-loop-with-dependence)

鉴于以下嵌套循环，我必须弄清楚它的大 O 复杂性：

```
for(i=0 to n)
    for(j=n-1;j>=i;j--) 
```

我知道这将是复杂的`O(n^2)`，但我不确定如何找出内部循环的公式。

为了清楚起见，我写了一张表格：

```
n=10
i | j | outer iters | inner iters
0 | 9 |     1       |     10
1 | 9 |     2       |      9 
...
9 | 9 |    10       |      1 
```

因此，外部循环运行`n`次数，而内部循环运行`sum(n to n-9)`。

有人告诉我答案是`n(n-2)/2`，我根本不知道如何从我所拥有的东西中得出这个结论。

协助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:16:42.157

观察每次外循环迭代执行内循环的次数。

```
When i=0, the inner loop has n iterations.
When i=1, the inner loop has n-1 iterations.
When i=2, the inner loop has n-2 iterations.
......
When i=k, the inner loop has n-k iterations.
.....
When i=n-2, the inner loop has 2 iterations.
When i=n-1, the inner loop has 1 iterations. 
```

所以内循环的总迭代次数为1 + 2 + ... + (n-2) + (n-1) + n，等于n(n+1)/2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:10:15.247

将整数 1 到 n 相加是众所周知的高斯技巧：

![高斯的把戏](../Images/8ee3b81b8494682868faeb3586df403c.png)
[（注意它是`+ 1`，不是`- 2`）]

## 建立直觉

这是一个直观的方法来了解为什么这个公式是正确的：

![解释](../Images/a69e24442b27b08859b11857d0a7a58a.png)

试着自己看看`1 + 2 + 3 + 4 + 5 + 6`

## 证明我们的直觉

但是，如果没有偶数个术语怎么办？它仍然有效吗？它适用于任意数量的术语吗？为了回答这个问题，我们最好证明我们的
**假设**：

![假设](../Images/8ee3b81b8494682868faeb3586df403c.png)
用一个叫做数学归纳法的概念。
为此，我们首先需要建立一个基本情况，在这种情况下对于`n = 1`，这是非常正确的。

现在，对于**归纳步​​骤**。我们假设，我们已经为某些 证明了我们的假设`n`，基于这些知识，我们想证明它也适用于`n + 1`。如果这成功了，我们已经“神奇地”证明了所有自然数。**为什么？**我们已经证明它适用于`n = 1`，这`n => n + 1`一步意味着它现在被证明了`n = 2`，这意味着它也被证明了`n = 3`等等。这是一个多米诺骨牌效应，翻倒第一个会让所有其他人倒下（证明）。

![归纳步骤](../Images/26dcf391fd37db58d1720b8262b227cc.png)

在假设中替换`n`为`n + 1`我们的归纳步骤的结果。因此，我们已经证明了该公式对所有人都是正确的`n`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:18:39.157

第 1 次迭代 - 内循环 n-1 次 第 2 次迭代 - 内循环 n-2 次，依此类推

对于 n-1 次迭代 -- 内循环 1 次

总迭代次数 = (n-1)+(n-2)+..2+1 =n(n-1)/2

这是 n^2-n/2 这当然是 O(n^2) 因为我们可以把它写成 f(n)= n^2-n/2 和 g(n)=n^2

我们可以把它写成 0<=f(n)<=cg(n) for c>0 n0>0 这里 n 大于 n0

# c# - 使用服务引用引用项目：未知端点

> ID：12568419
> 
> 赞同：1
> 
> 时间：2012-09-24T15:43:49.240
> 
> 标签：c#, wcf, visual-studio, wcf-endpoint

我有：

1.  WCF 服务 [应用程序 1]
2.  与此服务通信的逻辑 [Project1 Application2]
3.  使用此逻辑的网页 [Project2 Application2]

在*Logic项目中，我添加了对**Service*的服务引用。在*网页中，我添加了对**Logic*的项目引用。

现在在*Logic项目中定义了**Service*的端点，因此我无法从*WebPage连接到**Service*。

 ***我知道我的解决方案是将部分*逻辑*配置复制到*网页*配置，但我认为这不是一个好的解决方案。

我想把*逻辑*作为一个黑匣子。我不知道我是否不会将它更改为另一个服务，也许是不同的东西，所以我不想让*网页*“知道”*逻辑*是如何工作的。

有没有更好的解决方案？我可以在*Logic*项目中做些什么来让*WebPage*知道如何连接到*Service*？

我遇到了异常： `Could not find default endpoint element that references contract`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:54:36.757

另一种选择是通过将端点放在代码而不是配置文件中来配置逻辑。创建 Web 服务客户端时，请使用[此重载](http://msdn.microsoft.com/en-us/library/ms574927.aspx)，它将 Binding 和 EndpointAddress 作为参数。在 Logic 类的代码中，只需在代码中提供这些参数，而不是让它从配置文件中自动读取它们。***

# android - 将 acra.jar 添加到 /libs 文件夹

> ID：12568421
> 
> 赞同：0
> 
> 时间：2012-09-24T15:43:53.737
> 
> 标签：android, acra

我正在尝试在我的 helloacra android 应用程序中使用 ACRA。

我读了这篇[文章](http://acra.googlecode.com/svn-history/r829/wiki/BasicSetup.wiki)。

那里写着“`acra-4.2.3.jar`在文件夹中添加存档（acra-4.2.3/build）`libs`”

但是该文件被添加到“引用库”中（acra-4.2.3.jar）

我试图将它移动到 libs 文件夹，但不能。

请指教...

TIA

盖伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:50:59.570

当您将任何库添加到`/libs`文件夹时，较新版本的 ADT 会自动将其添加到您的构建路径中。这就是为什么您也会在`Referenced Libraries`. 这是完全正常和预期的行为。

# asp.net-mvc-3 - MVC3 Windows Authentication override User.Identity

> ID：12568426
> 
> 赞同：12
> 
> 时间：2012-09-24T15:44:11.990
> 
> 标签：asp.net-mvc-3, windows-authentication, intranet, windows-identity, windows-principal

I am building a **intranet** application using MVC3 with a MSSQL backend. I have authentication and roles (through a custom roles provider) working properly. What I am trying to do now is overriding User.Identity to allow for items like User.Identity.FirstName. But I cannot find any code that will show me how do this in WindowsIdentity

I have tried writing a custom provider:

```
public class CPrincipal : WindowsPrincipal
{
    UserDAL userDAL = new UserDAL();
    public CPrincipal(WindowsIdentity identity)
        : base(identity)
    {
        userInfo = userDAL.GetUserProfile(identity.Name.Split('\\')[1]);
        this.identity = identity;
    }
    public UserInfo userInfo { get; private set; }
    public WindowsIdentity identity { get; private set; }
} 
```

and overriding the WindowsAuthentication to populate the custom principal.

```
 void WindowsAuthentication_OnAuthenticate(object sender, WindowsAuthenticationEventArgs e)
    {
        if (e.Identity != null && e.Identity.IsAuthenticated)
        {
            CPrincipal cPrincipal = new CPrincipal(e.Identity);
            HttpContext.Current.User = cPrincipal;
        }
    } 
```

I have a breakpoint in the authentication function and the principal is being populated; however, when I put a breakpoint in the controllers, the User is just its normal RolePrincipal, instead of my custom principal. What am I doing wrong?

**EDIT:**

I commented out the code above in the global.asax. I have overridden the AuthorizeAttribute using C#:

```
public class CAuthorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        IIdentity user = httpContext.User.Identity;
        CPrincipal cPrincipal = new CPrincipal(user);
        httpContext.User = cPrincipal;

        return true;
    } 

} 
```

And adjusted my principal to the following:

```
public class CPrincipal : IPrincipal
{
    private UserDAL userDAL = new UserDAL();
    public CPrincipal(IIdentity identity)
    {
        userInfo = userDAL.GetUserProfile(identity.Name.Split('\\')[1]);
        this.Identity = identity;
    }
    public UserInfo userInfo { get; private set; }

    public IIdentity Identity { get; private set; }

    public bool IsInRole(string role)
    {
        throw new NotImplementedException();
    }
} 
```

Now I when I put a breakpoint in, the watch shows the following in user:

*   User
    *   [CSupport.Model.CPrincipal]
    *   Identity

Identity is accessable; however, it is still the WindowsIdentity CPrincipal is only accessible in the watch and not accessible directly.

**EDIT:** Thanks to everyone who contributed to this. You have greatly expanded my understanding of how the various parts work.

I got both ways to work, so I thought I would share.

Option 1: Override the Authorize Request in Global.asax

This is the one I am going with.

I did not use Application_AuthenticateRequest because (according to this: [HttpContext.Current.User is null even though Windows Authentication is on](https://stackoverflow.com/questions/1663535/httpcontext-current-user-is-null-even-though-windows-authentication-is-on)) the user has not been populated in a Windows authentication process and thus there is nothing that I can use to go get the user information.

Application_AuthorizeRequest is the next in the chain and happens after the windows identity is brought in.

```
 protected void Application_AuthorizeRequest(object sender, EventArgs e)
    {
        if (User.Identity.IsAuthenticated && Roles.Enabled)
        {
            Context.User = new FBPrincipal(HttpContext.Current.User.Identity);
        }
    } 
```

This is the override of the Principal

```
public class CPrincipal : IPrincipal
{
    private UserDAL userDAL = new UserDAL();
    public CPrincipal(IIdentity identity)
    {
        userInfo = userDAL.GetUserProfile(identity.Name.Split('\\')[1]);
        this.Identity = identity;
    }
    public UserInfo userInfo { get; private set; }

    public IIdentity Identity { get; private set; }

    public bool IsInRole(string role)
    {
        return userDAL.IsUserInRole(userInfo.UserName, role);
    }
} 
```

This is how you access the updated info in the new Principal that was created.

```
 [Authorize(Roles = "super admin")]
    public ActionResult Dashboard()
    {
        string firstname = (User as CPrincipal).userInfo.FirstName; // <--
        DashboardModel dModel = reportDAL.GetChartData();
        return View(dModel);
    } 
```

Option 2: Override the AuthorizeAttribute

This is the overridden Principal (It is the same as above)

```
public class CPrincipal : IPrincipal
{
    private UserDAL userDAL = new UserDAL();
    public CPrincipal(IIdentity identity)
    {
        userInfo = userDAL.GetUserProfile(identity.Name.Split('\\')[1]);
        this.Identity = identity;
    }
    public UserInfo userInfo { get; private set; }

    public IIdentity Identity { get; private set; }

    public bool IsInRole(string role)
    {
        return userDAL.IsUserInRole(userInfo.UserName, role);
    }
} 
```

Here is the override of the Authorize Attribute

```
public class CAuthorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        IIdentity user = httpContext.User.Identity;
        CPrincipal cPrincipal = new CPrincipal(user);
        httpContext.User = cPrincipal;

        return true;
    } 

} 
```

This is where you change which AuthorizeAttribute to use and utilizing the new information.

```
 [CAuthorize(Roles = "super admin")] // <--
    public ActionResult Dashboard()
    {
        string firstname = (User as CPrincipal).userInfo.FirstName; // <--
        DashboardModel dModel = reportDAL.GetChartData();
        return View(dModel);
    } 
```

Option 1 handles everthing globally, option 2 handles everything at an individual level.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T15:55:36.660

Instead of doing it this way, you should override the Application_AuthenticateRequest method in global.asax, then use Current.User rather than HttpContext.Current.User (not sure why, but there is a difference).

Then, an easy way to access this in your controller is to create an extension method? Something like this:

```
public static class IIdentityExtensions {
    public static IMyIdentity MyIdentity(this IIdentity identity) {
        return (IMyIdentity)identity;
    }
} 
```

then you can just say `User.Identity.IMyIdenty().FirstName`. You could probably do this as a property as well.

Here is the code I use:

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    FormsAuthenticationTicket authTicket = FormsAuthentication
       .Decrypt(authCookie.Value);
    var identity = new MyIdentity(authTicket.Name, "Forms", 
       FormsAuthenticationHelper.RetrieveAuthUserData(authTicket.UserData));
    Context.User = new GenericPrincipal(identity, 
       DependencyResolver.Current.GetService<ISecurityHandler>()
          .GetRoles(identity.Name).ToArray());
} 
```

Now, ignoring the DependencyResolver stuff and the custom auth ticket stuff, this is pretty basic and works correctly for me.

Then, in my app, when i'm need info from my custom identity, i just cast it with `((IMyIdentity)User.Identity).FirstName` or whatever I need. It's not rocket science, and it works.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:00:50.187

> What am I doing wrong?

Probably the `[Authorize]` attribute is overriding your changes. So instead of doing this in the `WindowsAuthentication_OnAuthenticate` method in your `Global.asax` write a custom `Authorize` attribute, like so:

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        var user = httpContext.User as WindowsIdentity;
        CPrincipal cPrincipal = new CPrincipal(user);
        httpContext.User = cPrincipal;

        return true;
    }
} 
```

and then use your custom attribute instead of the default one:

```
[MyAuthorize]
public ActionResult SomeAction()
{
    // User.Identity will be your custom principal here
} 
```

In ASP.NET MVC the standard way to perform authorization is through authorization action filters, not through events in Global.asax.

# c# - 如何将 C# 对象列表导出到 Excel 电子表格？

> ID：12568427
> 
> 赞同：5
> 
> 时间：2012-09-24T15:44:13.767
> 
> 标签：c#, .net, excel

我有一个从 Excel 电子表格创建的 C# 列表，我想将其导出到 Excel。我怎样才能完成这项任务？这只是一个控制台项目。我不打算在 .Net 应用程序中显示数据。我只需要电子表格。

```
var fileName = string.Format("C:\\Users\\SGurmu\\Desktop\\Data 091510.xls");
var connectionString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=Excel 8.0;", fileName);

var fileName2 = string.Format("C:\\Users\\SGurmu\\Desktop\\Copy of Prototype.xls");
var connectionString2 = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=Excel 8.0;", fileName);

var adapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", connectionString);
var ds = new DataSet();

adapter.Fill(ds, "contacts");

var data = ds.Tables["contacts"].AsEnumerable();

List<EmployeeData> query = data.Where(x => x.Field<string>("First_Name") != string.Empty).Select(x =>

new EmployeeData
    {
    empID = x.Field<double>("EMPLOYEE"),
    firstName = x.Field<string>("First_Name"),
    lastName = x.Field<string>("Last_Name"),
    JobCategory = x.Field<string>("Job Title"),
    StartDate = x.Field<Nullable<DateTime>>("Hire Dt"),
    EndDate =   x.Field<Nullable<DateTime>>("Term Dt"),
    TermReason = x.Field<string>("Term Reason"),
    PeggedUID = x.Field<Nullable<double>>("Pegged UserID"),
    UpdateDate = x.Field<Nullable<DateTime>>("Last Updated")
    }).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-22T15:30:33.797

也许您可以尝试使用托管在 Nuget 中的 Infodinamica.Framework.Expotable 包。

有了它，你可以做这样的事情

```
List<EmployeeData> query = data.Where(x => x.Field<string>("First_Name") != string.Empty).Select(x =>

    new EmployeeData
        {
        empID = x.Field<double>("EMPLOYEE"),
        firstName = x.Field<string>("First_Name"),
        lastName = x.Field<string>("Last_Name"),
        JobCategory = x.Field<string>("Job Title"),
        StartDate = x.Field<Nullable<DateTime>>("Hire Dt"),
        EndDate =   x.Field<Nullable<DateTime>>("Term Dt"),
        TermReason = x.Field<string>("Term Reason"),
        PeggedUID = x.Field<Nullable<double>>("Pegged UserID"),
        UpdateDate = x.Field<Nullable<DateTime>>("Last Updated")
        }).ToList();

    IExportEngine engine = new ExcelExportEngine();
    engine.AddData(EmployeeData);
    MemoryStream memory = engine.Export(); 
```

您可以使用 nuget 命令安装：

```
Install-Package Infodinamica.Framework.Exportable 
```

唯一的问题，文档是西班牙语。

项目页面在[这里](https://github.com/Infodinamica/exportable "这里")

导出示例（西班牙语）在[这里](http://www.infodinamica.cl/blog/exportar-ilist-a-excel-con-npoi/ "这里")

它还在[此处启用导入文件（西班牙语）](http://www.infodinamica.cl/blog/importar-excel-a-un-listado-con-c-y-exportable/ "这里")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-08T07:26:21.087

1.  右键单击项目并管理 nuget 包。
2.  添加 ClosedXML nuget 包
3.  添加`using ClosedXML.Excel;`到类文件的顶部。
4.  将“ToExcelFile”方法添加到您的课程中。
5.  将您的列表转换为 DataTable。

ToExcelFile 方法

```
public static bool ToExcelFile(this DataTable dt, string filename)
{
    bool Success = false;
    //try
    //{
        XLWorkbook wb = new XLWorkbook();

        wb.Worksheets.Add(dt, "Sheet 1");

        if (filename.Contains("."))
        {
            int IndexOfLastFullStop = filename.LastIndexOf('.');

            filename = filename.Substring(0, IndexOfLastFullStop) + ".xlsx";

        }

        filename = filename + ".xlsx";

        wb.SaveAs(filename);

        Success = true;

    //}
    //catch (Exception ex)
    //{
        //ex.HandleException();

    //}
    return Success;
} 
```

将您的列表转换为 DataTable

```
 public static DataTable ToDataTable(List<string> list)
    {
        DataTable MethodResult = null;

        DataTable dt = new DataTable();
        dt.Columns.Add("Item", );

        foreach(string s in list)
        {
            DataRow dr = dt.NewRow();
            dr[0] = s;
            dt.Rows.Add(dr);

        }

        dt.AcceptChanges();

        MethodResult = dt;

        return MethodResult;

    } 
```

# algorithm - 覆盖内存范围的算法？

> ID：12568435
> 
> 赞同：6
> 
> 时间：2012-09-24T15:44:49.630
> 
> 标签：algorithm, memory

我有一组范围，例如 {(2-8)、(13-22)、(380-7931)、(40032-63278)}。为了简单起见，我们可以假设它们不重叠（重叠范围已经合并）。

我的目标是使用一组给定的“长度”组合来“覆盖”这些范围，例如 {4、64、1024、16384}。我最多只能使用 N 个长度，例如 N=32。我不在乎我使用了多少“长度”，只要我低于我的最大值，但我想最小化总“额外”区域 - 由不在初始范围集中的长度“覆盖”的数字。

由 (2-66) 覆盖的示例 {(2-8)}（使用长度为 64）有 58 个“额外”数字。{(2-6), (6-10)} 覆盖的 {(2-8)} （两个长度为 4）只有 2 个“额外”数字并且是可取的。

我的真实世界应用程序涉及对固定的 MMU TLB 进行预编程，以确保只能访问特定范围的内存地址（TLB 未命中因此表示禁止访问并且可以相应地处理）。我想尽可能紧密地覆盖范围，以便尽早发现违规行为，但我只有 32 个插槽和 4 个固定页面大小。我可以手动将我的代码调整到足够的性能水平，但我很好奇是否有更优雅/通用的解决方案来解决这个问题。它似乎与背包问题有关，但不同的是很难搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:40:28.297

这可以表述为[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)的变体。

我们需要覆盖一组总长度为**M的***范围*，最多**N个***页面*。*页面*可能有**L**个不同的长度，它们没有对齐（可以放置在任何地址）。*总“额外”区域和页面*总长度之间的差异等于常数**M**，这允许最小化*页面*总长度。

 *********让我们构建一个与这个问题相关的图。*任何范围内*的每个内存地址在图中都有对应的顶点。每个顶点有**L**个出边，对应于**L个** *pages*，从给定地址开始。每条边的长度等于*页面*长度。每条边都到达图中的某个顶点，具体取决于相应*页面*的结束位置：

1.  *页面*以某个未占用的位置结束。边到顶点，对应这个位置之后的第一个*范围的起始地址。*
2.  *页面*在某个*范围内*结束。边到顶点，对应页面的结束地址。
3.  *页面*以未占用位置结束，地址大于任何*范围*的地址。边到达*目标*顶点。（第一个*范围*的起始地址对应*源*顶点，我们应该找到这两个顶点之间的最短路径）。

由于生成的图是[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，因此可以在线性时间内找到最短路径，方法是按照拓扑顺序（或者更简单，按照相应内存地址的顺序）处理顶点。

**对于每个顶点，保留一个包含N**对 {path-length, back-pointer}的数组。当最短路径算法访问任何顶点时，用路径中的跳数索引这个数组，如果路径短于存储的路径长度，则替换 {path-length, back-pointer}。处理完每个顶点后，在对数组中找到属于*目标*顶点的最短路径，然后使用反向指针重建路径。该路径描述了最佳覆盖。

最坏情况的时间复杂度 O(L*M*N) 由最大边数 (L*M) 和数组中属于每个顶点 (N) 的元素数决定。如果*范围*是稀疏的，则大多数边都到达某个*范围*的起始地址，对应于内部地址的大多数顶点都未使用，时间复杂度要小得多。

该算法需要 O(M*N) 空间，但对于稀疏*范围*，如果我们将所有图顶点（或者可能所有长度/指针对）放入哈希映射中，这可能会显着减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:08:55.947

考虑到您要覆盖的范围是非常低值的区间（我们称它们为“范围”），而间隙（称它们为“附加值”）是非常昂贵的区间。现在我们想用最多 N 个间隔（称为“covers”）来最小化总成本，它覆盖所有“范围”并且可能包含一些“额外”。下面的算法本质上是贪婪的。

首先获取您想要覆盖的所有间隔（“范围”）以及它们之间的“额外”。

1）用从“范围”的最小值到最大值的大间隔覆盖它们。

2) 迭代并删除其间最昂贵的“额外”（即最大跨度），并将划分计算为创建额外的“覆盖”，直到覆盖的数量变为 N 或您用完昂贵的“额外”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:15:03.947

当每个长度都是最后一个的倍数时，自下而上的贪心方法有效：

从一组最少覆盖所有范围的最小长度间隔开始。迭代合并最长的运行，直到低于最大范围计数。

在您的情况下，在 TLB 上，您可能有对齐约束，这会使问题变得更加棘手。*********

# c# - Datagridview 显示未绑定的记录

> ID：12568439
> 
> 赞同：0
> 
> 时间：2012-09-24T15:45:05.060
> 
> 标签：c#

我需要一些有关 datagridview 代码的帮助。它当前显示来自非数据绑定表的数据。当他们搜索特定项目时，它应该只显示该项目，然后用户可以更改数量单元格。

单击按钮以查看基于特定字段的整个数据集时，它应该显示所有行，包括数量单元格已更改的行。

如何实现仅显示选定行并单击“查看全部”按钮，显示尚未保存在任何地方的整组记录？

提前致谢。

```
string BarCode = null;
                SAPbobsCOM.Recordset oRec = null;
                oRec = (SAPbobsCOM.Recordset)MainModule.company.GetBusinessObject(SAPbobsCOM.BoObjectTypes.BoRecordset);
                oRec.DoQuery("SELECT " +
                    "T0.[ItemCode] FROM [dbo].[OITM]  " +
                    "T0 WHERE T0.[CodeBars] = '" + textBoxBarCode.Text + "' " +
                        "OR T0.[U_bcode2] = '" + textBoxBarCode.Text + "' " +
                        "OR T0.[U_bcode3] = '" + textBoxBarCode.Text + "' " +
                        "OR T0.[U_bcode4] = '" + textBoxBarCode.Text + "'");

                if (oRec.RecordCount > 0)
                {
                    BarCode = oRec.Fields.Item("ItemCode").Value.ToString();
                }

                foreach (DataGridViewRow r in dataGridViewDetails.Rows)
                {
                    r.Selected = false;
                    if (!r.IsNewRow)
                    {
                        int rowIndex = -1;

                        if (r.Cells["ItemCode"].Value.ToString().Equals(BarCode))
                        {
                            rowIndex = r.Index;
                            r.Selected = true;
                            break;
                        }
                    }
                } 
```

# javascript - 所有 jQuery 对象的通用标识符？

> ID：12568444
> 
> 赞同：0
> 
> 时间：2012-09-24T15:45:25.810
> 
> 标签：javascript, jquery, debugging

对于事件处理程序的一些调试，我需要真正全球化我正在查看[另一个堆栈溢出问题](https://stackoverflow.com/questions/2388030/accessing-functions-bound-to-event-handlers-with-jquery)，这很好，除了我想通用

```
// Log ALL handlers for ALL events:
jQuery.each($('#elem').data('events'), function(i, event){
    jQuery.each(event, function(i, handler){
        console.log( handler['handler'].toString() );
    });
}); 
```

是否有*所有*jQuery 对象的 jQuery 标识符？我会预料`$(obj)`到，`$('*')`但也没有这个把戏（或者我有另一个问题）。

*注意：我试图调试的绑定事件我怀疑是通过 jQuery 的`.on()`方法在`body`或处绑定的`window`。*

**附加说明：是因为我正在绑定`.on()`并且它没有向`$(document).data('events')`对象注册事件吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:10:43.617

在我的例子中，事件/绑定被另一个使用[event.stopPropagation](http://api.jquery.com/event.stopPropagation/)方法的 jQuery 插件抑制。

# jsf - ajax 调用后组件不更新

> ID：12568445
> 
> 赞同：2
> 
> 时间：2012-09-24T15:45:30.840
> 
> 标签：jsf, datatable, components

许多问题与这个问题非常相似，但我看不到解决方案。

以下代码没有给出错误，但未按预期运行。它显示三列：

*   第一列是一个复选框，用于激活第二列的可编辑字段

*   第三列是行删除方法

*   第 4 列是进入下一页的一个按钮

    ```
     <h:column>
            <h:panelGroup id="editCol">

                <f:facet name="header">
                    <h:outputText value="Edit" style="font-weight: bold">
                    </h:outputText>
                </f:facet>
                <h:selectBooleanCheckbox value="#{m.editable}" onclick="submit()">
                    <f:ajax execute="editCol :formId:dataId:authorCol" render="editCol :formId:dataId:authorCol" />
                </h:selectBooleanCheckbox>
            </h:panelGroup>

        </h:column>

        <h:column>
            <h:panelGroup id="authorCol">
                <f:facet name="header">
                    <h:outputText value="Label" style="font-weight: bold">
                    </h:outputText>
                </f:facet>
                <h:inputText value="#{m.author2displayed}" rendered="#{m.editable}" size="10"/>
                <h:outputText value="#{m.author2displayed}" rendered="#{not m.editable}"/>
                <h:commandButton value="save edits" rendered="#{m.editable}" onclick="submit()" action ="#{finalCheckBean.saveedits()}">
                    <f:ajax execute="authorCol" render="authorCol" />
                </h:commandButton>
            </h:panelGroup>
        </h:column>

        <h:column>
            <h:panelGroup id="deleteCol">
                <f:facet name="header">
                    <h:outputText value="delete row(s)" style="font-weight: bold">
                    </h:outputText>
                </f:facet>
                <h:selectBooleanCheckbox value="#{m.deleted}" onclick="submit()"/>
                <h:commandButton value="delete row(s)?" rendered="#{m.deleted}" onclick="submit()" action ="#{finalCheckBean.deleteRow()}"/>
            </h:panelGroup>
        </h:column>

        <h:column>
            <f:facet name="header">
                <h:commandButton value="save changes" action="#{finalCheckBean.moveon}"/>
            </f:facet>

        </h:column>

    </h:dataTable> 
    ```

    1.  当我`selectBooleanCheckbox`在第一列中勾选时，该框被勾选但没有任何反应，实际上应该切换第二列中组件的显示。

    2.  有趣的是，当我*然后*单击`selectBooleanCheckbox`不使用 ajax 的第三列中的

如何使我`selectBooleanCheckbox`的第一列正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:17:05.413

```
<h:selectBooleanCheckbox ... onclick="submit()">
    <f:ajax ... />
</h:selectBooleanCheckbox> 
```

您的具体问题是由`onclick="submit()"`ajax 复选框引起的。去掉它。它正在触发[`form.submit()`](https://developer.mozilla.org/en-US/docs/DOM/form.submit)，这与`<f:ajax>`.

您还在另一个无 ajax 复选框上使用它，这可能很好，但您也在“删除行？”上使用它。命令按钮，这是完全没有必要的。默认情况下，它已经触发表单提交。

# sql - 如何将多个oracle select sql合并到一个视图中？

> ID：12568446
> 
> 赞同：1
> 
> 时间：2012-09-24T15:45:34.480
> 
> 标签：sql, oracle, select, join

我想将这些选择的结果放在一个视图中。公共列是 RUNID，但是右表的结果并不总是存在。所以它应该返回空。我认为所有这些选择都可以组合成一个选择，将 RUNID 传递给不同标准的每个计数。

```
--COUNT OF S16 ELIGIBLE ACCOUNTS
SELECT    PDDETAIL.RUNID, COUNT(*) AS "S16 ELIGIBLE ACCOUNTS"
FROM      PDDETAIL
LEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)
WHERE     PDSTAGES.PDSTAGE = 'S16ELIGIBLE'
GROUP BY  PDDETAIL.RUNID
ORDER BY  PDDETAIL.RUNID ASC
;

--COUNT OF S16 MTO SUBMITTED
SELECT    PDDETAIL.RUNID,COUNT(*) AS "S16 MTO SUBMITTED"
FROM      PDDETAIL
LEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)
WHERE     PDSTAGES.PDSTAGE = 'S16MTOREFRESHSUBMITTED'
GROUP BY  PDDETAIL.RUNID
ORDER BY  PDDETAIL.RUNID ASC
;

--COUNT OF S16 MTO RETURN FAILED
SELECT    PDDETAIL.RUNID,COUNT(*) AS "S16 MTO FAILED"
FROM      PDDETAIL
LEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)
WHERE     PDSTAGES.PDSTAGE = 'S16MTORETURNFAILED'
GROUP BY  PDDETAIL.RUNID
ORDER BY  PDDETAIL.RUNID ASC
; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:49:45.897

```
SELECT    
 PDDETAIL.RUNID,
 COUNT(CASE WHEN PDSTAGES.PDSTAGE = 'S16ELIGIBLE' THEN 1 END) AS "S16 ELIGIBLE ACCOUNTS",
 COUNT(CASE WHEN PDSTAGES.PDSTAGE = 'S16MTOREFRESHSUBMITTED' THEN 1 END) AS "S16 MTO SUBMITTED",
 COUNT(CASE WHEN PDSTAGES.PDSTAGE = 'S16MTORETURNFAILED' THEN 1 END) AS "S16 MTO FAILED"
FROM      PDDETAIL
LEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)
GROUP BY  PDDETAIL.RUNID
ORDER BY  PDDETAIL.RUNID ASC; 
```

# php - 从 php 创建一个表单

> ID：12568447
> 
> 赞同：0
> 
> 时间：2012-09-24T15:45:38.453
> 
> 标签：php, javascript, ajax

我之前也发过，但没有得到明确的答案。我对此感到非常困惑：

我有以下html：

```
<body onload="showcontent()"> <!-- onload optional -->
        <div id="content"><img src="loading.gif"></div> <!-- leave img out if not onload -->
    </body> 
```

我也有以下脚本：

```
function showcontent(){

  if(window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
  } else {
    xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
  }

  xmlhttp.onreadystatechange = function() {
    if(xmlhttp.readyState == 1) {
        document.getElementById('content').innerHTML = "<img src='loading.gif' />";
    }
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      document.getElementById('content').innerHTML = xmlhttp.responseText;
    } 
  }

  xmlhttp.open('GET', 'elsevier.php', true);
  xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
  xmlhttp.send(null);

} 
```

在 elsevier.php 中，我希望当表格的行数超过 500 时显示两个按钮，告诉我是继续还是取消。如果我将此代码放在 .php 文件中，则不会发生任何事情.....（除了出现两个按钮）。

```
if(mysqli_errno($con)==1062){
      @$q55="SELECT COUNT(*) FROM testarticles";
      $result55 = mysqli_query($con, $q55);
      $row = $result55->fetch_row();
      echo '#: ', $row[0].'<br>';

      if($row[0]>=500&&$answer==false){
         echo '<form action="" method="GET">';
         echo "<label>Do you want to continue or cancel?</label>";
         echo '<input type="button" id="but1" name="but1" value="Continue">';
         echo '<input type="button" id="but2" name="but2" value="Cancel">';
         echo '</form>';

         if(isset($_GET["but1"])){
            $answer=true;
             break;
         }
          elseif(isset($_GET["but2"])){
             @$q56="DELETE * FROM journal, volume, issue, articles, testarticles WHERE import_time=$unixtimestamp";
             $result56 = mysqli_query($con, $q56);
             exit;
           }
      } 
```

我希望在这一步中停止执行 php 脚本并向我显示两个可供选择的按钮。如果我按继续，我希望脚本从它停止的地方执行。

有人知道吗？？我已经尝试了几件事，但没有任何效果......提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:51:16.747

尝试使用`input type="submit"`而不是`input type="button"`， submit 将（显然）提交表单，按钮只是按钮，当您单击它时，如果您没有将操作与 js 或其他任何内容链接，则不会发生任何事情。

# jquery - 使用 jQuery 每个函数生成表行

> ID：12568449
> 
> 赞同：1
> 
> 时间：2012-09-24T15:45:50.833
> 
> 标签：jquery, loops, html-table, each

我如何能够使用该函数生成`<tr>`s ？`jQuery` `each()`

请参阅下面的尝试：

HTML：

```
<html>
<table>
<tbody id = "table_tbody">
</tbody>
</table>
</html> 
```

JS：

```
var tr_count = 10;
var tr_var ="<tr><td><input type = 'text' name= 'name'/></td>t</tr>";
$(tr_count).each(function(){
    $(tr_var).appendTo('#table_tbody');
}) 
```

这返回一个`<tr>`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:47:39.663

尝试一个简单的 for 循环。

```
//                       removed a t which should be a typo -v
var tr_var ="<tr><td><input type = 'text' name= 'name'/></td></tr>";

for (var i = 0; i < tr_count; i++ ) {
   $(tr_var).appendTo('#table_tbody');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:55:58.440

```
tr_count 
```

不是数组。each 函数试图对数组的每个元素进行操作。

试试这个代码

```
var tr_count = 10;
var foo = new Array();
foo.push('a');
foo.push('b');
var tr_var ="<tr><td><input type = 'text' name= 'name'/></td>t</tr>";
$(foo).each(function(){
    $(tr_var).appendTo('#table_tbody');
    alert('moo');
})​ 
```

我同意 Vega - 使用显式循环

# objective-c - colorWithSRGBRed 与 colorWithDeviceRed 与 colorWithCalibratedRed 有什么区别

> ID：12568450
> 
> 赞同：9
> 
> 时间：2012-09-24T15:45:52.713
> 
> 标签：objective-c, macos, nscolor

有几种方便的类方法用于创建 NSColor。但是，我似乎无法确定何时使用以下不同的类方法：

`colorWithSRGBRed:green:blue:alpha:`对比`colorWithDeviceRed:green:blue:alpha:`对比`colorWithCalibratedRed:green:blue:alpha:`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T15:50:29.670

**tl;dr**使用校准的色彩空间。

而不是反刍文档 - 答案在[颜色编程主题中](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Concepts/AboutColorSpaces.html#//apple_ref/doc/uid/20000758-BBCHACHA)

还有[色彩空间概述](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/csintro/csintro_intro/csintro_intro.html#//apple_ref/doc/uid/TP30001148)

![在此处输入图像描述](../Images/d7e4c2f133a6ff0b649534507bde8b8c.png)

**编辑添加**

sRGB 是命名的色彩空间之一。

![在此处输入图像描述](../Images/1fd1c5924f397108ed88c0157148fc98.png)

最后 - 这是文档中的最后一张图片，我希望它能回答你的问题 - 如果你想使用色彩空间，请使用校准过的。

![在此处输入图像描述](../Images/994171af85402d3f72acd99390c1b915.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-27T11:01:24.337

一组 RGB 值并不能真正描述颜色。它只会告诉您的图形适配器您想要该颜色中的红色、绿色和蓝色光的百分比，但是像 50% 纯红色这样的颜色在所有显示器上并不是相同的颜色，原因有两个：

1.  由于伽马曲线略有不同，所有显示器的 50%*相对亮度*并不相同（由于背光亮度不同，绝对亮度也不相同，但这实际上无关紧要 - 只有相对值很重要）

2.  即使是 100% 的红色也不是相同的红色调，因为显示器具有不同的红色“阴影”，具体取决于它们的背光颜色和滤色器。

因此，相同的 RGB 组合在不同的显示器上可能看起来会有所不同。作为显示器上的漂亮橙色，它在某些显示器上可能看起来像非常亮的红色，而在其他显示器上看起来像深黄色。到处都是相同的 RGB 值，但颜色不同。

为了使 RGB 描述一种“颜色”，它还需要一个颜色空间，它定义了一个颜色空间，其中 RGB 值就像是该空间的坐标，从而描述了一种精确的颜色。

[![在此处输入图像描述](../Images/be90503b4d8e1fc979279a17ee09096c.png)](https://i.stack.imgur.com/Rk0Ci.png) （*原始上传者是英文维基百科的 Cpesacreta - 由 aboalbiss 从 en.wikipedia 转移到 Commons。*）

如果您使用`colorWithDeviceRed:green:blue:alpha:`, RGB 值不会被转换，它们会完全像这样报告给您的图形适配器。因此，颜色确实会具有这些 RGB 值，但用户在屏幕上看到的结果会因屏幕而异。

如果使用`colorWithSRGBRed:green:blue:alpha:`，则 RGB 值将被解释为 sRGB 颜色空间的 RGB 值。系统知道那个空间，因此它知道这里描述的是什么颜色。如果系统还知道您的显示器的色彩空间（例如，因为它已经在工厂校准或由用户使用校准工具校准），那么它可以将 RGB 值从 sRGB 色彩空间转换为您的本机色彩空间监视器。这种转换将改变绝对 RGB 值在它们传送到您的显示器的过程中。您可能已经使用过`#758299`并且显示器会实际显示`#7483A1`，但那是因为颜色`#7483A1`看起来与 sRGB 颜色完全一样`#758299`在此显示器上，因此用户会看到预期的正确颜色（即使它可能没有相同的 RGB 值 - 但用户看不到 RGB 值，他们看到的是颜色）。

sRGB 是一种非常流行的颜色空间，它是最兼容的颜色空间，大多数图形应用程序和系统都知道它，您可以期望每台现代显示器都能够正确显示几乎所有现有的 sRGB 颜色。但这也是一个非常有限的色彩空间。sRGB 只是目前大多数设备可以显示的所有颜色的一个子集，它也不提供 1670 万种不同的颜色（即使有很多可能的 RGB 组合）。这就是为什么存在更广泛的色彩空间的原因，就像您在所有 Adob​​e 图形应用程序中都可以找到的那种来自 Adob​​e 的色彩空间。Apple 提供了一个名为“校准色彩空间”的色彩空间——有时也称为“通用色彩空间”。你用它`colorWithCalibratedRed:green:blue:alpha:`从我在文档中可以找到的内容来看，这基本上是 HSB 颜色空间，比 sRGB 更宽（在内部它以不同的格式存储颜色，但有一个固定的设备中性公式将 RBG 转换为 HSB 和 HSB 回为 RGB）。

因此，如果颜色正确性对您很重要（用户应该在屏幕上看到与您在屏幕上看到的颜色相同的颜色，无论需要什么 RGB 值来实现），您应该始终结合颜色空间指定颜色。无论您使用 sRGB 还是 Generic/Calibrated 都没有关系，只需在整个应用程序中使用同一个即可。

如果您使用以 sRGB 报告颜色的工具，则十六进制值仅与该空间匹配。请注意，所有 Web 标准都隐式使用 sRGB 颜色。因此，当您在 HTML 或 CSS 文件中使用十六进制颜色时，它们总是被解释为 sRGB 值。此外，当您从外部来源接收颜色并且该来源没有告诉您它们属于哪个颜色空间时，假设 sRGB 总是最安全的。

*如果您使用Digital Color Meter*应用程序（MacOS 始终附带）的颜色选择器从屏幕上读取颜色，请务必选择*Display in Generic RGB*或*Display in sRGB* ，但如果您打算使用，请不要使用*Display native values*这些值在应用程序或网站上。本机值只是您的系统真正用于显示该颜色的值，但这种组合仅在您的系统上看起来如此。

当然，如果您的显示器没有正确校准，这些都不起作用。现代显示器具有计算机可以下载的嵌入式校准配置文件，并且移动设备的校准也存储在设备上。如果您的显示器较旧，或者您认为配置文件不准确（或由于显示器老化而不再准确！），您需要获得显示器校准硬件并使用[DisplayCAL](https://displaycal.net/)等工具生成更好的配置文件（免费、开源、所有主要平台，支持广泛的USB硬件）

一个常见的问题是，如果我根据错误的色彩空间解释 RGB 值，实际会发生什么？好吧，它看起来不会完全错误。如果您将较小颜色空间的图像显示为来自较大颜色空间的图像，则图像看起来会非常“充满活力”（所有颜色都有很多饱和度，对比度会增强，清晰度会增强），如果它的反之，图像看起来会相当“静音”（颜色饱和度会降低很多，对比度会降低，清晰度会降低）。看这个例子：图像具有正常的色彩空间，并在右侧以正确的色彩空间显示，在左侧显示在宽色彩空间中，将图像 RGB 值视为属于该宽色彩空间，他们实际上不是，因此夸张的活力：

[![在此处输入图像描述](../Images/5ab317fa69e029aef7d07612e7d76f16.png)](https://i.stack.imgur.com/qppcE.jpg)

# java - “不仅包含空格”的正则表达式模式

> ID：12568451
> 
> 赞同：3
> 
> 时间：2012-09-24T15:46:03.740
> 
> 标签：java, regex

如果字段不能只包含空格，请告诉我需要使用哪种模式。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T15:47:57.077

为什么需要使用正则表达式？

```
str.trim().isEmpty() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T15:49:15.180

您必须使用此模式。

```
.*[^ ].* 
```

它可以是任何东西，但不仅仅是空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T15:47:24.903

假设您的意思是任何空格，而不仅仅是空格，`\S`都可以使用。

Cfr 每个开发者必备的朋友，[正则表达式备忘单](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-13T05:33:15.327

这很简单。如果您使用的是 java，只需编写此代码。例如：-

classVariable.getname().trim().equal("")

通过这个，您可以检查该变量是否仅包含空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-30T11:41:27.683

我有一个它看起来很重，但实施起来并不难

没有空白的模式：

> ^[模式]*[没有空格的模式][模式]*$

示例：

> -模式：a-zA-ZÀ-ÿ '-

（注意它允许空格）

> [a-zA-ZÀ-ÿ '-]

没有空格=

> ^[a-zA-ZÀ-ÿ '-]*[a-zA-ZÀ-ÿ'-][a-zA-ZÀ-ÿ '-]*

当然，如果您根本不允许空间，则不需要这样做。

你可以在[https://regexr.com/上测试你的](https://regexr.com/)

# ruby-on-rails - 无法使用 Ajax 刷新 div，我做错了什么？

> ID：12568479
> 
> 赞同：0
> 
> 时间：2012-09-24T15:47:25.017
> 
> 标签：ruby-on-rails, ajax, html, refresh

我在 div 中放置了一个饼图，并希望通过按下网页上的两个链接（计数或总计）之一来重新计算提供它的数据。

这是我的观点摘录：

```
<%= link_to "Count", {action: "switch_chart_dim"}, remote:true %>
<%= link_to "Total", retailers_switch_dim_path("total"), remote:true %>
<div id="visualization" > 
    <%= render partial: '/charts/highcharts_pie', locals: {pie_data: @pie_gender} %>
</div> 
```

我的控制器：

```
def switch_chart_dim(type=:count)
    logger.debug("URRAY i am here")
    @pie_gender = Receipt.group_by_gender_pie(current_user, type,
                                              params["/retailers"][:begin_date], 
                                              params["/retailers"][:end_date])
    respond_to do |format|
        format.js { render :layout=>false }
    end
end 
```

我的 js 文件 (switch_chart_dim.js.erb)

```
$('#visualization').html('<%= escape_javascript(render(:partial: '/charts/highcharts_pie', locals: {pie_data: @pie_gender})).html_safe %>') 
```

我已经阅读了几篇关于此的帖子，并尝试将其全部应用，但由于某种原因，似乎我的控制器操作甚至没有被调用（至少我在日志上看不到我的“URRAY”调试消息）。

我究竟做错了什么 ？

**编辑**

这是我的匹配路线，如果可能相关：

```
match '/retailers', to: 'retailers#switch_chart_dim', via: :post, as: "retailers_switch_dim" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:02:17.980

我似乎发现了这个问题。

我的路线文件有两条冲突的路线，它正在调用搜索操作。我通过分析 Firebug 中的请求发现了这一点：

```
match '/retailers', to: 'retailers#search', via: :post, as: "retailers_search"
match '/retailers', to: 'retailers#switch_chart_dim', via: :post, as: "retailers_switch_dim" 
```

通过更换解决了

```
match '/retailers', to: 'retailers#switch_chart_dim', via: :post, as: "retailers_switch_dim" 
```

和

```
match '/retailers/switch_chart_dim', to: 'retailers#switch_chart_dim', via: :post, as: "retailers_switch_dim" 
```

# php - 相对路径在 Ajax 中不起作用

> ID：12568490
> 
> 赞同：2
> 
> 时间：2012-09-24T15:47:59.533
> 
> 标签：php, javascript, ajax

我遇到了一个奇怪的 AJAX 问题。我有一个在此页面上调用 AJAX 函数的 HTML 页面：

public_html/test/books.html

我试图调用的 AJAX 文件在此页面上：

public_html/lists/include/vote_up.php

我试图以唯一合乎逻辑的方式将其包含在内，即：

```
xmlhttp.open("GET","../lists/include/vote_up.php?id="+id,true); 
```

但是请求永远不会到达 PHP 文件。我究竟做错了什么？在同一个 books.html 页面上，我从“lists/includes”文件夹中有几个包含，例如：

```
include('../lists/include/functions.php'); 
```

这是使用绝对路径的更新函数：

```
function voteUp(id){

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
     else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("item_voting"+id).innerHTML=xmlhttp.responseText; 
        }
    }

    xmlhttp.open("GET","mydomain.com/lists/include/vote_up.php?id="+id,true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:58:20.837

现在我认为绝对路径`something.com/lists/include/voice_up.php`应该可以工作，因为您仍然在 public_html 文件夹中，即使您提供的相对路径也应该可以正常工作，因为我经常将它们用于图像和 .css 文件。我建议发布更多代码以使其清楚。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-24T15:51:11.783

这里的问题是您在 xmlhttp.open 函数中使用系统路径。Javascript 在客户端执行，因此系统路径毫无意义。.. 符号在这种情况下是不可用的。您应该提供一个 URL。如果你改为这样做`domainname.domain/lists/include/voice_up.php`，它会工作得很好。

# jstree - 如何创建与 jsTree 一起使用的有效 JSON 对象？

> ID：12568493
> 
> 赞同：0
> 
> 时间：2012-09-24T15:48:12.543
> 
> 标签：jstree

似乎我所做的一切都不起作用。我需要在创建 jsTree 之前创建一个 JSON 对象，但没有任何效果。我已经做到了：

var jsonObj = {}; jsonObj.data = "节点1";

$('#treeView').jstree({ "json_data" : jsonObj });

如果我只想要一个节点，这很好用，但是如何实现 jsonObj 以拥有多个带有子节点的节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:09:08.083

```
{ 
    "data" : "node_title",
    "children" : [ /* an array of child nodes objects */ ]
} 
```

[jstree 文档](http://www.jstree.com/documentation/json_data)

# javascript - keyup 事件总是返回大写字母

> ID：12568494
> 
> 赞同：19
> 
> 时间：2012-09-24T15:48:17.787
> 
> 标签：javascript, jquery

我正在尝试编写类似于“占位符”polyfill 的东西。我想在输入字段上捕获 keyup 事件并获取用户输入的字符，所以我有以下代码：

```
 $elem.on('keyup',function(e){  
    var $this = $(this),    
        val = $this.val(),
        code = (e.keyCode ? e.keyCode : e.which);
    console.log(String.fromCharCode(code));

}); 
```

问题是这总是返回按下字符的大写版本，我怎么知道按下的字符是大写还是小写？

我知道`keypress`给出了按下的字符，但它不会在所有按键事件（如退格）上激活。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T15:58:01.653

您无法从 keyup 轻松获取此信息，因为 keyup 只知道正在按下哪些键，而不知道正在键入哪些字母。您可以检查 shift 键是否按下，也可以尝试自己跟踪大写锁定，但如果有人在浏览器外按下它，您最终会得到错误的大小写字符。

您可以尝试[按键事件。](http://api.jquery.com/keypress/)，尽管 jQuery 报告它并不总是表现出相同的跨浏览器。从文档：

> 请注意，keydown 和 keyup 提供了指示按下哪个键的代码，而 keypress 指示输入了哪个字符。例如，小写的“a”将被 keydown 和 keyup 报告为 65，但被 keypress 报告为 97。所有事件都将大写“A”报告为 65。由于这种区别，当捕获特殊按键（如箭头键）时，.keydown() 或 .keyup() 是更好的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T16:00:36.633

`keyup`只知道被按下的键，而不是附加条件（在这种情况下，如果它是小写/大写）。改为尝试该`keypress`事件（我已使用文档作为示例进行演示 - 将其更改为所需的元素）

例如：

```
<script type="text/javascript">

$(document).on('keypress',function(e) {  
    var $this = $(this),    
        val = $this.val(),
        code = e.keyCode || e.which;
    console.log(String.fromCharCode(code));
});

</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T16:05:13.850

您需要通过 onkeypress 捕获您的按键事件，以便您可以访问字符代码。即使您想检测大写锁定 / shift + 击键，它仍然会注册为两个单独的击键，从而难以确定大写 vrs 小写。

一些重要的 KeyCode 注释：

“在 onkeydown 或 onkeyup 事件期间访问 keyCode 属性时要小心，因为每当按下任何键时都会设置它，包括像“Shift”这样的非字符键。这意味着如果您尝试按“Shift+a”来尝试获取“A”的keyCode，你总是会得到两个keyCode，一个用于“Shift”，一个用于“A”。不管是“a”的keyCode，你都不会得到，因为keyCode总是返回一个字符的大写版本的unicode值。要导出“a”（小写）的keyCode，您必须在IE中探测onkeypress事件期间返回的keyCode，并且由于Firefox在onkeypress期间没有设置keyCode，切换到e.charCode 或 e.which 代替该浏览器。”

一些重要的 CharCode 注释：

"返回在 onkeypress 事件期间按下的键的字符代码。并且仅针对与它关联的字符（即："a"、"b" 或 "z"）设置。没有字符关联的键像“Shift”或“Ctrl”不符合条件。其他点： - 大小写字符返回不同的值（即：“a”与“A”）。

这是两个引用的重要来源，很可能有助于您进一步混淆。

[键码和字符码](http://www.javascriptkit.com/jsref/eventkeyboardmouse.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:00:00.990

您可以在按键事件中获取字符代码，对于“退格”、“插入”等，您可以使用 keydowns keyCode 属性。

# hibernate - Hibernate 不会删除 OneToMany 上的孤儿

> ID：12568503
> 
> 赞同：5
> 
> 时间：2012-09-24T15:48:38.743
> 
> 标签：hibernate, jpa-2.0, hibernate-mapping

我有以下非常简单的一对多关系：

球队有一组球员：

```
@Entity(name = "TEAM")
@Access(AccessType.PROPERTY)
public class Team{
    private Integer id;
    private String name;
    private Set<Player> players ;

    @Id
    @Column(name = "id")
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Column(name = "team_name")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @OneToMany(cascade = {CascadeType.ALL},orphanRemoval=true)
    @JoinColumn(name = "TEAM_ID")
    public Set<Player> getPlayers() {
        return players;
    }

    public void setPlayers(Set<Player> players) {
        this.players = players;
    }       
} 
```

每个玩家都有一个唯一的 id 和 name。

```
@Entity(name = "PLAYER")
@Access(AccessType.PROPERTY)
public class Player implements Serializable{

    private int id;
    private String name;

    @Id
    @Column(name = "id")
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    @Column(name = "player_name")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    public boolean equals(Object obj) {
    return id == ((Player)obj).id;
    }
    @Override
    public int hashCode() {
        return id;
    }
} 
```

我运行一个非常简单的代码：

```
Team team = createTeam(3) // creates team with 3 players ids={1,2,3}
session.saveOrUpdate(team);
...

private Team createTeam(int players) {
    Team team = new Team();
    team.setName("Bears");
    team.setId(1);
    for(int i=1 ; i<=players; ++ i){
        Player player = new Player();
        player.setId(i);
        player.setName("Player"+i);
        team.addPlayer(player);
    }
    return team;
} 
```

我得到以下预期：

*   休眠：从 TEAM team_ 中选择 team_.id, team_.team_name 作为 team2_0_ where team_.id=?
*   休眠：从 PLAYER player_ where player_.id=? 中选择 player_.id, player_.player_name 作为 player2_1_
*   休眠：从 PLAYER player_ where player_.id=? 中选择 player_.id, player_.player_name 作为 player2_1_
*   休眠：从 PLAYER player_ where player_.id=? 中选择 player_.id, player_.player_name 作为 player2_1_
*   Hibernate：插入 TEAM (team_name, id) 值 (?, ?)
*   Hibernate：插入 PLAYER (player_name, id) 值 (?, ?)
*   Hibernate：插入 PLAYER (player_name, id) 值 (?, ?)
*   Hibernate：插入 PLAYER (player_name, id) 值 (?, ?)
*   休眠：更新 PLAYER 设置 TEAM_ID=? 哪里id=？休眠：更新 PLAYER 设置 TEAM_ID=? 哪里id=？休眠：更新 PLAYER 设置 TEAM_ID=? 哪里id=？

然后我做：

```
Team team = createTeam(2) // creates team with 2 player ids={1,2}
session.saveOrUpdate(team); 
```

并期望删除孤儿玩家，但我得到：

*   休眠：从 TEAM team_ 中选择 team_.id, team_.team_name 作为 team2_0_ where team_.id=?
*   休眠：从 PLAYER player_ where player_.id=? 中选择 player_.id, player_.player_name 作为 player2_1_
*   休眠：从 PLAYER player_ where player_.id=? 中选择 player_.id, player_.player_name 作为 player2_1_
*   休眠：更新 PLAYER 设置 TEAM_ID=null where TEAM_ID=?
*   休眠：更新 PLAYER 设置 TEAM_ID=? 哪里id=？
*   休眠：更新 PLAYER 设置 TEAM_ID=? 哪里id=？

这使孤儿播放器（id = 3）断开连接但没有被删除......有什么想法我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:09:28.847

如果您希望将球员作为删除孤儿删除，则需要球员失去对球队的引用并保存球队。

您正在做的是以下内容：

*   创建一个新的对象团队。
*   用 3 名球员养活球队
*   坚持

之后，每个玩家行将包含一个 FK 到团队 (id=1)。

然后代码创建一个具有相同 id 的新团队，并养活 2 名玩家并坚持下去。

那时，DB 中仍然会有一名球员引用球队 1。

从我的 POV 来看，每个不同的业务对象都应该有自己的业务密钥。如果你想覆盖队 1 的球员，你应该首先检索 id = 1 的球队，然后喂球员。

```
private Team createTeam(int players) {
    Team team = session.get(Team.class, 1);
    if (team == null) {
       team = new Team();
       team.setName("Bears");
       team.setId(1);
    }
    team.clearPlayers();

    for(int i=1 ; i<=players; ++ i){
        Player player = new Player();
        player.setId(i);
        player.setName("Player"+i);
        team.addPlayer(player);
    }
    return team;
}

// Team.java
private void clearPlayers() {
   players.clear();
} 
```

顺便说一句，另一个建议。不允许直接修改您的播放器，这可能会导致 HibernateErrors，例如*“Don't change the reference to a collection...”*。代替 setPlayers()，添加方法`addPlayer()`和`removePlayer()`

```
private void adddPlayer(Player player) {
   player.setTeam(this);
   players.add(player);
}

private void removePlayer(Player player) {
   player.setTeam(null);
   players.remove(player);
} 
```

此外，集合是可变的，所以让 getPlayers() 返回一个不可修改的集合：

```
private Set<Player> getPlayers() {
   return Collections.unmodifiableSet(players);
} 
```

希望这能有所启发:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:40:11.157

你可以使用这个标签：@org.hibernate.annotations.Cascade(value = org.hibernate.annotations.CascadeType.DELETE_ORPHAN)。所以你得到：

@OneToMany(cascade = {CascadeType.ALL},orphanRemoval=true) @org.hibernate.annotations.Cascade(value = org.hibernate.annotations.CascadeType.DELETE_ORPHAN) @JoinColumn(name = "TEAM_ID")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:28:40.917

在两个实体的关系中添加 mappedBy 属性。

在播放器中添加团队。

```
// in Player.java
@ManyToOne(mappedBy="players")
private Team team; 
```

和 Player 中的 MappeedBy。

```
//In Team.java
@OneToMany(cascade = {CascadeType.ALL},orphanRemoval=true,mappedBy="team")
    @JoinColumn(name = "TEAM_ID")
    public Set<Player> getPlayers() {
        return players;
    } 
```

当您有 1-TO-M 关系时，孩子应该有其父母的参考。然后休眠在内部使用父ID作为子表中的外部。

您的子表将具有以下 3 列：

```
id , player_name,team_id 
```

# objective-c - iOS6中带有QLPreviewController的自定义navigationItem按钮

> ID：12568504
> 
> 赞同：11
> 
> 时间：2012-09-24T15:48:39.410
> 
> 标签：objective-c, ios6, qlpreviewcontroller

我的目标是在 iOS6 的 iPad 应用程序中使用 QLPreviewController，使用顶部工具栏中的自定义操作项按钮。我有解决方案直到 iOS5.1。我使用了一个扩展 QLPreviewController 的类，并且在组件生命周期中我做了类似的事情

```
[[self navigationItem] setRightBarButtonItems:[NSArray arrayWithObject:[self buildCustomButton]]]; 
```

在 iOS6 中，这个技巧不再奏效，现在似乎不可能更改 navigationItem 配置。我认为可能会涉及到 UIActivity 和 Social Framework 的引入，并且在 navigationItem 上工作可能不再有效，但我可以找到任何解决方案。有什么建议吗？谢谢再见

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:54:53.683

我真的很需要一个解决方案，所以我做了这个。

是的，它很丑。是的，它可能随时中断。是的，我会去开发地狱，但我的老板确实不再用愤怒的眼睛盯着我……现在。

```
@implementation UINavigationItem (Custom)

void MethodSwizzle(Class c, SEL origSEL, SEL overrideSEL);

- (void) override_setRightBarButtonItem:(UIBarButtonItem *)item animated:(BOOL)animated{   
    if (item && [item.target isKindOfClass:[QLPreviewController class]] && item.action == @selector(actionButtonTapped:)){
        QLPreviewController* qlpc = (QLPreviewController*)item.target;
        [self override_setRightBarButtonItem:qlpc.navigationItem.rightBarButtonItem animated: animated];
    }else{
        [self override_setRightBarButtonItem:item animated: animated];
    }
}

+ (void)load {
    MethodSwizzle(self, @selector(setRightBarButtonItem:animated:), @selector(override_setRightBarButtonItem:animated:));
}

void MethodSwizzle(Class c, SEL origSEL, SEL overrideSEL) {
    Method origMethod = class_getInstanceMethod(c, origSEL);
    Method overrideMethod = class_getInstanceMethod(c, overrideSEL);

    if (class_addMethod(c, origSEL, method_getImplementation(overrideMethod), method_getTypeEncoding(overrideMethod))) {
        class_replaceMethod(c, overrideSEL, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));
    }else{
        method_exchangeImplementations(origMethod, overrideMethod);
    }
}

@end 
```

史蒂夫乔布斯会在我的梦中追捕我，直到我找到合适的解决方案......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:33:52.543

如果您要更改顶部工具栏中的操作项按钮，则它可以工作，您必须在内部进行

```
-(void)viewDidAppear:(BOOL)animated{
    //add code necessarry to change your action buttons of toptoolbar in quicklook
} 
```

视图出现后就`rightBarButtonItems`可以访问了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T02:04:33.437

好吧，我有好消息和坏消息。

好消息是我已经弄清楚为什么这不起作用。在 iOS6 中，QLPreviewController 的 navigationItem 不再有 navigationBar：

```
(lldb) po [[self navigationItem] navigationBar];
(id) $2 = 0x00000000 <nil> 
```

导航栏现在位于 QLPreviewControllersView 的视图层次结构的深处：

QLPreviewViewController.view->UIView->UIView->QLRemotePreviewContentController->navBar->navItem->rightBarButtonItems。

您可以使用以下方法找到您要查找的 navigationItem：

```
- (void)inspectSubviewsForView:(UIView *)view
{
    for (UIView *subview in view.subviews)
    {  
        if ([subview isKindOfClass:[UINavigationBar class]])
        {
            UINavigationBar *bar = (UINavigationBar *)subview;
            if ([[bar items] count] > 0)
            {
                UINavigationItem *navItem = [[bar items] objectAtIndex:0];
                [navItem setRightBarButtonItem:nil];
            }
        }

        if ([subview isKindOfClass:[UIView class]] && [[subview subviews] count] > 0)
        {
            [self inspectSubviewsForView:subview];
        }
    }
} 
```

只需将 [self view] 传递给该方法，它就会循环，直到找到有问题的标签栏。然后，您可以删除或添加您自己的。

坏消息当然是您正在访问私有 API，并且使用它可能会导致您的应用被应用商店拒绝。然而，这是我在这方面看到的唯一答案。很想看看是否有一种非私人的方式来做到这一点，但考虑到它的设置方式，这似乎不太可能。

此外，此方法仅在条形图已就位后调用时才有效。调用它的最佳位置是“viewDidAppear”，但它不能 100% 工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-16T11:45:29.303

最好的方法是实现自己的控制器并将 QLPreviewController 的视图用作子视图。在这种情况下，您可以使用自定义项目制作自己的导航栏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T16:25:20.647

我尝试了很长时间来更换这个按钮。查看子视图等。看起来此操作/共享按钮作为导航层放置。酒吧。我最终通过在 QLPreviewController 子类中添加一个按钮而不是标题来为自己解决了这个问题。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Button in center of Navigation Bar
    UISegmentedControl *button = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:LS(@"Save"), nil]];
    button.frame = CGRectMake(0, 0, 100, 30);
    button.center = self.view.center;
    button.momentary = YES;
    button.segmentedControlStyle = UISegmentedControlStyleBar;
    button.tintColor = [UIColor colorWithHue:0.6 saturation:0.33 brightness:0.69 alpha:0];
    [button addTarget:self action:@selector(saveToDocumentsClicked) forControlEvents:UIControlEventValueChanged];
    self.navigationItem.titleView = button;
} 
```

# objective-c - 标签栏中的自定义视图在 iOS6 中不再起作用

> ID：12568508
> 
> 赞同：2
> 
> 时间：2012-09-24T15:49:03.280
> 
> 标签：objective-c, ios, ios5, uinavigationbar, ios6

我有一个自定义视图 ( `UILabel`+ `UIImage`)，我将其用作我的自定义视图，`UINavigationController`如下所示：

```
self.navigationItem.titleView = self.myTitleLabel; 
```

这在 iOS 5 中运行良好，但在 iOS 6 下停止运行。虽然该值是在调试器中设置的，但它根本不显示。

**更新：**正如马克指出的那样，文档说明了以下内容：

> 如果此属性值为`nil`，则当接收者为顶部项时，导航项的标题显示在导航栏的中央。如果将此属性设置为自定义标题，则会显示它而不是标题。`leftBarButtonItem`如果不是，则忽略此属性`nil`。

现在我有 a`backButton`而不是 "explicit" `leftBarButtonItem`。 但是，如果您希望您的徽标在导航栏中，并且左侧仍然有后退按钮*或栏怎么办？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:17:11.410

我以前用过这种方式，但似乎我喜欢一些解决方法。我建议您使用自己的 UIToolBar 并隐藏导航栏。这很简单。[您唯一需要的是在此处http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/](http://www.teehanlax.com/downloads/ios-5-gui-psd-iphone-4s/)获取后退按钮的图像。

# java - jsp c：重定向自我推荐

> ID：12568516
> 
> 赞同：0
> 
> 时间：2012-09-24T15:49:24.723
> 
> 标签：java, jsp, web-applications, struts, war

如果您想使用`<c:redirect>`对同一页面（具有不同的 url 参数）进行自我引用，是否可以在不指定 url 参数中的页面名称的情况下执行此操作？（这样更容易，如果您以后想重命名页面）

在我看来，省略 url 参数或将标签留空（url=""）表示自我推荐，这似乎是合乎逻辑的。

但是将其保留会产生碧玉异常，并且将其保留为空会生成不正确的 url。

有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:00:20.980

这应该有效：

```
<c:redirect url="${pageContext.request.requestURL}"/> 
```

# ios - 使用情节提要在 iOS 6 中出现 uiscrollview 分页问题

> ID：12568520
> 
> 赞同：5
> 
> 时间：2012-09-24T15:49:42.487
> 
> 标签：ios, uiscrollview, paging

我有一个非常奇怪的问题。我正在使用本教程： http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)以进行`uiscrollview`分页。但是当我尝试在情节提要中实现它时，它似乎在 iOS 6 中不起作用。我只是复制了代码并完成了所有必要的步骤。但它仍然不起作用。`UIScrollView`只是拒绝展示任何东西。但关键是，在我将 Xcode 更新到最新版本之前它运行良好。谁能建议我做错了什么？也许我忘记了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T15:18:48.320

我不得不取消选中“文件检查器”下的使用自动布局

# jquery - .on jquery 替换文本

> ID：12568521
> 
> 赞同：0
> 
> 时间：2012-09-24T15:49:43.313
> 
> 标签：jquery, replace, load

> **可能重复：**
> [如何在 jQuery 中检测新元素的创建？](https://stackoverflow.com/questions/3384398/how-to-detect-new-element-creation-in-jquery)

我正在尝试替换按钮的文本值，但该按钮在页面加载时不存在，它是在其他几个用户选择之后出现的。

我试图在按钮出现在页面上后立即替换按钮文本 - 不是基于它被单击或悬停在上面或类似的东西。

如果按钮存在 onload，我将能够使用 javascript 替换该值而没有任何问题 - 但我无法确定这是否可以使用 jQuery 以及使用哪个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:03:01.837

我可以想到一些可以跨浏览器工作的可能解决方案：

1.  识别导致按钮添加到页面的用户事件，挂钩该事件并在该事件运行之后，找到该按钮并更新它的文本。

2.  使用间隔计时器轮询您的页面，以了解何时将按钮添加到页面。

3.  如果按钮是在 jQuery ajax 操作之后添加的，并且您无法修改执行该 ajax 工作的实际代码或添加按钮，则可以全局挂钩 jQuery 操作并在任何完成后在短 setTimeout() 中检查页面jQuery ajax 操作。

您不能使用 jQuery`.on()`找出对象何时添加到页面。 `.on()`适用于通过在父对象（未动态添加到页面）处捕获传播事件来在将来添加到页面的对象的事件处理程序，但实际上并不告诉您何时将对象添加到页面。

仅供参考，在某些浏览器中有一个`DOMSubtreeModified`and`DOMNodeInserted`事件听起来像是为此类事情准备的，但它仅在某些浏览器中可用并且已被弃用（不推荐使用）。

这种通知的未来方向是[Mutation Events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)，但这还没有得到广泛的支持。

# url - 如何获取网站 VB.NET 的基本 URL

> ID：12568530
> 
> 赞同：10
> 
> 时间：2012-09-24T15:50:03.970
> 
> 标签：url, hostname, domain-name, base-url

我可能不是第一个问这个问题的人，但我环顾四周后找不到我想要的东西。我想从 URL 获取基本 URL。我努力了

```
 HttpContext.Current.Request.Url.AbsoluteUri 
```

它会返回给我完整的 URL

```
 http://localhost:59112/Resources/VideoPlayer.aspx?ID=resources1.mp4 
```

我只需要直到这里（例如）

```
 http://localhost:59112/ 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T16:01:28.500

通过更多的研究..我从论坛中得到了我想要的..这是一个绝妙的解决方案..

```
 Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath 
```

谢谢

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-14T12:00:40.153

网址前：[http://localhost:59112/Resources/VideoPlayer.aspx?ID=resources1.mp4](http://localhost:59112/Resources/VideoPlayer.aspx?ID=resources1.mp4)

```
HttpContext.Current.Request.Url.Authority 
```

返回：“本地主机：59112”

```
HttpContext.Current.Request.Url.Scheme & "://" & HttpContext.Current.Request.Url.Authority 
```

返回：“ [http://localhost:59112](http://localhost:59112) ”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-22T02:29:21.183

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim address As Uri = New Uri("http://stackoverflow.com/questions/12568530/how-to-get-the-base-url-of-the-website-vb-net")
    MsgBox("http://" & address.Host)
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-04T19:16:41.190

在 .Net 4 及更高版本中，您可以使用 -

```
Dim Url as String = Request.Url.OriginalString
Dim Domain as String = Url.Replace(Request.PathAndQuery, "")

Output -
Url = "http://localhost:9898/content/page.aspx
Domain = "http://localhost:9898" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-07T03:00:08.427

`HttpContext.Current.Request.Url.Host`

# c# - 生成带有日文文本的 PDF RDLC 报告

> ID：12568531
> 
> 赞同：3
> 
> 时间：2012-09-24T15:50:09.413
> 
> 标签：c#, pdf, rdlc

我有一份英文报告可以正常工作，但是当它被翻译成日文并导出为 PDF 时，它会显示问号而不是文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:49:59.803

确保您已安装适用于 Windows 的语言包。可以正确生成 PDF，但 Windows 不知道如何解释它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:00:24.960

这个问题的解决方案是使用实际上有日文字符的字体，显然普通的 Ariel 没有它们，但 Arial Unicode MS、MS Mincho、MS Gothic 有。

# ruby-on-rails - 验证在浏览器中有效，但在控制台中无效。为什么？

> ID：12568533
> 
> 赞同：0
> 
> 时间：2012-09-24T15:50:16.917
> 
> 标签：ruby-on-rails, ruby, validation, console, rails-console

我有以下自定义验证：

**应用程序/验证器/clock_able_validator.rb**

```
class ClockAbleValidator < ActiveModel::Validator

  def validate(record)
    time_tracker = time_tracker(record)
    error_location = "activerecord.errors.models.activity.attributes.base"
    record.errors[:clock_in_able] = I18n.t "#{error_location}.clock_in_able" if !clock_in_able?(record,time_tracker)
    record.errors[:clock_out_able] = I18n.t "#{error_location}.clock_out_able" if !clock_out_able?(record,time_tracker)
  end

  def clock_in_able?(record,time_tracker)
    return true if time_tracker.nil?
    return true if !time_tracker.clock_out.nil?
    return true if time_tracker.id == record.id
    return false
  end

  def clock_out_able?(record,time_tracker)
    return false if record.id == time_tracker.id and !time_tracker.clock_out.nil?
    return true if !record.clock_in.nil? 
    return false
  end

  def time_tracker(record)
    TimeTracker.find_all_by_activity_id(record.activity_id).last || TimeTracker.new
  end
end 
```

time_tracker**只是**之前的记录。鉴于涉及先前记录的某些条件得到满足，新记录得到验证。

当我在浏览器中测试它时，这个验证工作得很好。我的问题是：为什么在控制台中测试时验证不起作用？我可以从控制台将任何记录保存在数据库中。

**[编辑]**

如果我添加不同的错误，例如`record.errors[:bla] = "Why only this error works?"`. 验证也不会在控制台中通过。所以它按预期工作。它通过了其他验证，但它不应该。

**[编辑 2]**

如果我从一个新的数据库开始。尝试保存一个 TimeTracker 对象，该对象仅具有`:clock_out`属性值，而不是`:clock_in`浏览器和其他任何地方的属性值，但控制台失败，因为它没有通过验证。`TimeTracker.find_all_by_activity_id(record.activity_id).last`返回 nil，因此 time_tracker 获取 TimeTracker.new 的值。所以验证失败。在控制台中虽然它被保存了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:39:55.290

您确定您在与服务器相同的环境下运行 Rails 控制台吗？例如，如果您的服务器在生产模式下运行，但控制台在开发中运行，则它们可能正在查询不同的数据库。然后`TimeTracker.find_all_by_activity_id`会返回不同的结果。

# javascript - 在 HTML/CSS 表格下方显示总计

> ID：12568536
> 
> 赞同：9
> 
> 时间：2012-09-24T15:50:33.433
> 
> 标签：javascript, html, css, table-footer

我创建了一些显示交易的表格，最后一列是金额字段。我需要在此列下方显示总计/小计。问题是我的表格列设置为 % 宽度。

如何确保显示总金额的字段低于金额列。

我想我需要某种 CSS 代码来保持总字段（div/span）与表格宽度相关联，但我不知道该怎么做。

谢谢。

例子：

```
Col1 Col2 Col3 Amount
A      B    C    100
D      E    F    100
          Total: 200 
```

编辑：我还应该说这张表是动态的。它使用 Visualforce（原生 force.com 语言）创建。然后将 UI 呈现为 HTML，我确实有 CSS 来格式化生成的 HTML 表格。由于我事先不知道我可以拥有多少行，所以我不能简单地为总数添加一行，并想看看是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T15:53:04.713

**代码**

```
<!-- Style -->
<style>
   #total {
      text-align:right;
   }

   #table {
      border:1px solid red;
      border-collapse:separate;
   }

   #table th, #table td {
      border:1px solid #000;
   }
</style>
```

```
<!-- Table -->
<table id="table">
  <thead>
   <tr>
     <th>Col1</th>
     <th>Col2</th>
     <th>Col3</th>
     <th>Amount</th>
   </tr>
  </thead>
  <tbody>
   <tr>
     <td>A</td>
     <td>B</td>
     <td>C</td>
     <td>100</td>
   </tr>
   <tr>
     <td>D</td>
     <td>E</td>
     <td>F</td>
     <td>100</td>
   </tr>
  </tbody>
  <tfoot>
    <tr>
      <th id="total" colspan="3">Total :</th>
      <td>200</td>
    </tr>
   </tfoot>
 </table>
```

“总计”标签位于`th`2 列中（检查肉桂评论）。应用于此单元格的样式会移动右侧的所有文本。总数 (200) 与其他结果一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:17:56.820

你可以试试这个

**CSS**

```
tbody tr{text-align:center; /*If you want to center align of row text*/}
.right{text-align:right;}​ 
```

**HTML**

```
<table>
    <thead>
        <tr><th>Col1</th><th>Col2</th><th>Col3</th><th>Amount</th></tr>
    </thead>
    <tbody>
        <tr>
            <td>A</td><td>B</td><td>C</td><td class="right">100</td>
        </tr>
        <tr>    
            <td>D</td><td>E</td><td>F</td><td class="right">100</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td class="right" colspan="3">Total:</td><td class="right">200</td>
        </tr>
    </tfoot>
</table> 
```

[**演示**](http://jsfiddle.net/g9SBu/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:58:50.127

用于`colspan`您的“总”标签：

```
<table border="1>"
    <tr>
        <th width="25%">Col1</th>
        <th width="25%">Col2</th>
        <th width="25%">Col3</th>
        <th width="25%">Amount</th>
    </tr>
    <tr>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>100</td>
    </tr>
    <tr>
        <td colspan="3" style="text-align:right;">total:</td>
        <td>100</td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:51:39.740

使用表格页脚，然后您可以使用整个宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T15:54:21.237

将`colspan`属性添加到最后一个`td`并将文本向右对齐。

**HTML**

```
<tr>
    <td class="total-column" colspan="4">
    Total:200
    </td>
</tr> 
```

**CSS**

```
.total-column {
    text-align:right;
} 
```

# c# - 时间：2019-01-01 标签：c#xmlserializablemultiplearrayitems

> ID：12568543
> 
> 赞同：0
> 
> 时间：2012-09-24T15:51:07.850
> 
> 标签：c#, xml, serialization, deserialization

在尝试让我的编程反序列化多个 XmlArrayItem 时，我遇到了一个相当愚蠢的问题。

XML 基本上如下所示：

```
<Root2>
   <Data2>
     <HOLD>
      ...
     </HOLD>
     <CUST_HOLD>
      ...
     </CUST_HOLD>
   </DATA2>
</ROOT2> 
```

我的可序列化代码如下：

```
[Serializable()]
[System.Xml.Serialization.XmlRoot("Root2")]
public class Root2
{
    [System.Xml.Serialization.XmlArray("Data2")]           
    [System.Xml.Serialization.XmlArrayItem("CUST_HOLD", typeof(CUST_HOLD))]
    public CUST_HOLD[] CUST_HOLD { get; set; }
    [System.Xml.Serialization.XmlArrayItem("HOLD", typeof(HOLD))]
    public HOLD[] HOLD { get; set; }    

} 
```

我尝试了不同的配置，但这是唯一不会导致错误的配置。但问题是，只有第一个 XmlArrayItem 得到处理（在本例中为 CUST_HOLD）。另一个保持为空，而相应的数组中应该至少有一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:10:39.237

如果你不能为它写一个 xsd，你就不能将它序列化/反序列化为 xml。

那将是 xsd 中任何序列的序列或极差的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:47:25.570

试试看，

**代码**

**类声明**

```
[Serializable()]
[System.Xml.Serialization.XmlInclude(typeof(CUST_HOLD))]
[System.Xml.Serialization.XmlInclude(typeof(HOLD))]
[System.Xml.Serialization.XmlType(TypeName = "Data2")]
public class Root2
{

    [System.Xml.Serialization.XmlArrayItem("CUST_HOLD")]
    public CUST_HOLD[] CUST_HOLD;

     [System.Xml.Serialization.XmlArrayItem("HOLD")]
    public HOLD[] HOLD;

}

 [Serializable()]
[System.Xml.Serialization.XmlType("CUST_HOLD")]
public class CUST_HOLD
{

    public int i;
}

[Serializable()]
[System.Xml.Serialization.XmlType("HOLD")]
public class HOLD
{

    public int i;
} 
```

**序列化**

```
List<Root2> list = new List<Root2>();
Root2 obj = new Root2();
obj.CUST_HOLD = new CUST_HOLD[] { new CUST_HOLD() { i = 1 }, new CUST_HOLD() { i = 1 }, new CUST_HOLD() { i = 1 } };
obj.HOLD = new HOLD[] { new HOLD() { i = 1 }, new HOLD() { i = 1 }, new HOLD() { i = 1 } };

  list.Add(obj);

 //Serialize List<Root2>
 System.Xml.Serialization.XmlSerializer Serializer = new     System.Xml.Serialization.XmlSerializer(typeof(List<Root2>),new System.Xml.Serialization.XmlRootAttribute("Root2"));

 System.IO.MemoryStream mo = new System.IO.MemoryStream();
 Serializer.Serialize(mo, list);
 string str = UnicodeEncoding.UTF8.GetString(mo.ToArray()); 
```

**输出：**

```
<?xml version="1.0"?>
<Root2 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Data2>
<CUST_HOLD>
  <CUST_HOLD>
    <i>1</i>
  </CUST_HOLD>
  <CUST_HOLD>
    <i>1</i>
  </CUST_HOLD>
  <CUST_HOLD>
    <i>1</i>
  </CUST_HOLD>
</CUST_HOLD>
<HOLD>
  <HOLD>
    <i>1</i>
  </HOLD>
  <HOLD>
    <i>1</i>
  </HOLD>
  <HOLD>
    <i>1</i>
  </HOLD>
</HOLD>
</Data2>
</Root2> 
```

**反序列化**

```
string str = @"<?xml version='1.0'?>
<Root2 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'  xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
<Data2>
<CUST_HOLD>
  <CUST_HOLD>
    <i>1</i>
  </CUST_HOLD>
  <CUST_HOLD>
    <i>1</i>
  </CUST_HOLD>
  <CUST_HOLD>
    <i>1</i>
  </CUST_HOLD>
</CUST_HOLD>
<HOLD>
  <HOLD>
    <i>1</i>
  </HOLD>
  <HOLD>
    <i>1</i>
  </HOLD>
  <HOLD>
    <i>1</i>
  </HOLD>
</HOLD>
</Data2>
</Root2>";

System.Xml.Serialization.XmlSerializer Serializer = new System.Xml.Serialization.XmlSerializer(typeof(List<Root2>), new System.Xml.Serialization.XmlRootAttribute("Root2"));

System.IO.MemoryStream mo = new   System.IO.MemoryStream(UnicodeEncoding.UTF8.GetBytes(str));

List<Root2> list = (List<Root2>)Serializer .Deserialize(mo); 
```

**注意** `<Data2>`标签仅在序列化类型`List<Root2>`为单`Root2`实例`<Data2>`标签时才会出现在 xml 字符串中，并且无法进行反序列化。反序列化将为`CUST_HOLD`&返回空值`HOLD`。返回类型应该是`List<Root2>`.

# java - 来自android中longblob的位图

> ID：12568545
> 
> 赞同：0
> 
> 时间：2012-09-24T15:51:12.207
> 
> 标签：java, android, mysql, database, bitmap

我有一些图像以`longblob`s 形式存储在远程 MySQL 数据库中，我需要为我的 Android 应用程序检索它们并显示为`Bitmap`. 我有一个 PHP 脚本设置来解析与 Android 应用程序之间的 SQL 查询。

**我尝试过的：** 我尝试获取`longblob`字段下方的字符串，然后`getBytes()`在其上使用。但显然，它不起作用。如果我显示字符串，则会显示大量字符（可读和不可读）。所以问题在于编码或从字符串转换为`byte[]`（我认为）。

```
StringBuilder strStream = new StringBuilder();
BufferedReader reader = new BufferedReader(new InputStreamReader(httpEntity.getContent()), 8);

String line = null;
while((line = reader.readLine()) != null) strStream.append(line);

Bitmap bitmap = BitmapFactory.decodeByteArray(strStream.toString().getBytes(), 0, strStream.length()); 
```

**我需要什么：**有什么方法可以从存储在我使用自定义 PHP 脚本从 Android 连接的数据库中`Bitmap`的远程创建一个？我完全确定脚本工作正常，并且我的代码 100% 运行到变量. 我什至可以得到它的正确值。唯一的问题是，我无法获得.`longblob``MySQL``httpEntity``String``Bitmap`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:15:27.133

越简单越好 :) PHP 可以从数据库中输出一个 blob

```
header('Content-Type: image/png');
echo $result['blob']; 
```

当您使用 Web 浏览器请求此脚本时，您将看到一个 PNG 图像。然后是安卓部分

```
InputStream in = new URL("http://img.io/read.php").openStream();
Bitmap bmp = BitmapFactory.decodeStream(in);
in.close(); 
```

这里没有必要通过Strings...Java中的Strings不仅仅是字节数组。它们带有语义，因此字节数组总是与编码方案相结合（默认为 UTF-16LE）

# javascript - IE 8 轮廓宽度未指定错误

> ID：12568549
> 
> 赞同：1
> 
> 时间：2012-09-24T15:51:27.380
> 
> 标签：javascript, jquery, css, internet-explorer-8

给定这个 html 元素：

```
<input id="test" style = "outline-width: medium;" /> 
```

而这个 jQuery 调用：

```
console.log($('#test').css("outline-width")); 
```

我在控制台（IE 8）中看到了这个：

> “未指定的错误。”

页面中包含 jQuery 1.8.2（版本似乎无关紧要），但我认为这不是 jQuery 问题。

在 IE8 中试试这个小提琴：http: [//jsfiddle.net/vAWB4/5/](http://jsfiddle.net/vAWB4/5/)

为什么通话失败？它在我尝试过的所有其他浏览器中都可以正常工作，包括设置为 IE8 浏览器模式的 IE9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:02:03.957

`"outline-width"`除非您指定 DOCTYPE，否则IE8 会在您使用时抛出错误。也可以选择使用`<meta>`标签强制它在 IE8 标准模式下运行。

# cakephp - 无法让 CakePHP 的 REST 与 Backbone 一起工作（或根本无法使用）

> ID：12568559
> 
> 赞同：0
> 
> 时间：2012-09-24T15:51:59.970
> 
> 标签：cakephp, rest, backbone.js

我正在尝试让基于主干的前端与我的 CakePHP 应用程序一起工作。

我在*routes.php*中有以下内容（以及其他一些路线）

```
Router::mapResources(array('rooms', 'comments'));
Router::parseExtensions(); 
```

现在使用类似`GET /rooms/XX.json`工作正常的东西，到目前为止一切都很好。但是，我正在尝试使用 Backbone 删除评论。在我的应用程序引导程序中，我有以下内容：

```
Backbone.emulateHTTP = true; 
```

因为我知道 PHP 不能很好地与 REST 配合使用。因此`X-HTTP-Method-Override`设置为`DELETE`应要求。尽管我随后提出请求`POST /comments/160.json`，但`X-HTTP-Method-Override DELETE`我得到了以下回复：

```
{
    "code":"404",
    "url":"\/comments\/160.json","name":"Action CommentsController::view() could not be found."
} 
```

**找不到 CommentsController::view()**

为了我的一生，我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:46:34.837

似乎使用`Router::mapResources(array(...));`不起作用。它适用于第一个控制器，但不适用于第二个控制器。因此，我更改了我的*routes.php*文件以使用：

```
...
Router::mapResources('rooms');
Router::mapResources('comments');
... 
```

它现在似乎正在工作，这很奇怪，因为查看[CakePHP 源代码](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Routing/Router.php#L476)它应该循环浏览所有这些源代码。

# php - 用于触发 PHP 的 Gearman 和 Zend Server 的任何作业服务器替代品？

> ID：12568563
> 
> 赞同：1
> 
> 时间：2012-09-24T15:52:15.840
> 
> 标签：php, message-queue, gearman, zend-server

> **可能重复：**
> [格式化消息以进行排队的最佳方式是什么？](https://stackoverflow.com/questions/2444157/what-is-the-best-way-to-format-messages-for-queueing)

我希望添加一个作业服务器来排队非关键、非实时任务（例如向注册帐户的用户发送欢迎电子邮件或触发定期报告）。我们是一家拥有丰富 PHP 经验的小商店，希望能够在 PHP 中创建我们的作业脚本。我们希望能够轻松连接和触发作业，能够监控作业的成功/失败/性能，并能够根据需要重新排队和/或重新运行失败的作业——因此需要一些关于作业的基本报告.

理想情况下，我们希望从事创造工作的业务，而不是建立一个家庭滚动的工作服务器或将许多经过准审查的软件包拼凑在一起。使用 gearman 从头开始​​构建和维护某些东西需要比我们想要的更多的投资。我们试用了 Zend Server，它看起来可以满足我们的需求，但我对这些报告并没有太大印象。

我希望有一些像持续集成/构建服务器 Jenkins/Hudson 那样精致和灵活的东西，但更适合通用作业排队。

有没有人有任何建议或在任何其他产品上取得了成功？

# python - python：python中有没有办法在运行文件之前删除旧的.pyc

> ID：12568565
> 
> 赞同：5
> 
> 时间：2012-09-24T15:52:21.500
> 
> 标签：python, python-2.7, pyc

似乎有时当我从 git 中拉出旧的`.pyc`运行而不是新拉出的`.py` 文件时，有没有办法自动清除`.pyc`文件，所以它总是运行新版本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T15:53:42.510

`.pyc`如果文件上的修改日期较新，则 Python 会自动清除旧的`.py`。

您可以手动删除`.pyc`目录结构中的所有文件：

```
find . -name \*.pyc -delete 
```

并且 Python 将在导入模块时重新创建它们。您还可以运行：

```
python -m compileall . 
```

强制编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-10T10:39:50.273

防止创建`.pyc`文件的另一个选项是将选项 -B 传递给 python

```
python -B file.py 
```

`-B`选项来自`man`：

```
-B     Don't write .py[co] files on import. See also PYTHONDONTWRITEBYTECODE. 
```

[您也可以使用sha-bang](https://en.wikipedia.org/wiki/Shebang_(Unix))`.py`在文件开头指定它：

```
#!/bin/python -B 
```

# magento - Magento：通过代码设置主题

> ID：12568569
> 
> 赞同：0
> 
> 时间：2012-09-24T15:52:33.187
> 
> 标签：magento, layout, themes

我正在使用以下代码从 Controller 显示页面

```
$html = $this->getLayout()
        ->createBlock('mymodule/myblock')
        ->setTemplate('mymodule/mypage.phtml')
        ->toHtml();
echo $html; 
```

问题是我不断收到同样的错误

```
Not valid template file:frontend/base/default/template/mymodule/mypage.phtml 
```

现在，该文件不在“base”文件夹下，而是在“defaul”下，但我不确定为什么 Magento 一直在那里搜索它。我在这个显示之前做了 setTheme 方法

```
Mage::getDesign()->setPackageName("default")->setTheme("default"); 
```

但这无济于事，“基本”文件夹仍然是搜索。

问题是 - 我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:00:19.470

所以这就是你`base`出错的原因。Magento 在搜索模板文件时实现了某种回退机制：

*   首先它在当前包和主题中搜索它，
*   然后在当前包的默认主题中，
*   比默认包和默认主题，
*   最后在“base”中，最后一个是进入错误消息的那个。

您应该仔细检查模板文件名的拼写和`setTemplate`方法中的字符串，99% 的时候这只是一些小错字造成的。

如果不是这种情况，请检查您现在使用的是什么主题，也许您将模板文件插入到错误的主题/包中。

# iphone - 使用 setAutoresizingMask 定位 UIImageView

> ID：12568570
> 
> 赞同：0
> 
> 时间：2012-09-24T15:52:36.400
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在为 iPhone 5 屏幕更新我的应用程序。听起来 setAutoresizingMask 可以很好地用于定位对象（而不是硬编码 alt 坐标），但我似乎无法让它工作。

我的应用程序不旋转，我只想将此图像加载固定到底部，用于 480 或 568 高屏幕。

这是我的简单尝试。将非常感谢您的建议。谢谢。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.autoresizesSubviews = YES;

    UIImage *getImg = [UIImage imageNamed:@"footer.jpg"];
    UIImageView *footer = [[UIImageView alloc] initWithImage:getImg];
    [footer setFrame:CGRectMake(0,0,302,50)];
    [footer setAutoresizingMask:UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin];    

    [self.view addSubview:footer];
} 
```

（我相信这个 setAutoresizingMask 应该将图像设置为左下角。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:02:32.320

自动调整掩码不会影响控件的初始位置，它们只会影响其父视图更改其边界时位置的更新方式。换句话说，设置新的自动调整掩码的行为永远不会更新控件的位置。

因此，您仍然需要注意最初将控件放在正确的位置。您可以使用界面生成器轻松做到这一点。如果您以编程方式布置界面，则应通过查询其`bounds`成员变量而不是直接硬编码测量值，将控件相对于其父视图的边界放置。从那时起，您可以保留自动调整大小掩码的更新。

# video - 视频自行下载

> ID：12568573
> 
> 赞同：0
> 
> 时间：2012-09-24T15:53:02.060
> 
> 标签：video, media-player

我在我在[这里](http://lashoppe.com/wp)工作的网站上使用自托管视频播放器但是，当我加载页面时，我遇到了以下问题：

1）在某些浏览器上，它可以按我的意愿工作，但视频会自行开始播放。我希望它只有在我推动游戏时才能工作。

2）在其他一些上，视频开始下载。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:14:00.563

视频播放本身很可能是由某些易于更改的设置引起的。然而，视频下载本身让我很难过：/

# java - 罗马 XmlReader 不阅读 https 提要

> ID：12568576
> 
> 赞同：2
> 
> 时间：2012-09-24T15:53:10.050
> 
> 标签：java, rss, feed, rss-reader, rome

我正在尝试阅读[https://d3ca01230439ce08d4aab0c61810af23:bla@mycon.mycompany.com/recordings.atom](https://d3ca01230439ce08d4aab0c61810af23:bla@mycon.mycompany.com/recordings.atom)

使用罗马，但它给了我错误

```
 INFO: Illegal access: this web application instance has been stopped already.  Could not load org.bouncycastle.jcajce.provider.symmetric.AES$ECB.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact. 
```

和

```
 Server returned HTTP response code: 401 for URL: https://d3ca01230439ce08d4aab0c61810af23:bla@mycon.mycompany.com/recordings.atom . 
```

我正在这样做

```
 URL url =  new URL("https://d3ca01230439ce08d4aab0c61810af23:bla@mycon.mycompany.com/recordings.atom ");

    try {
    SyndFeedInput input = new SyndFeedInput();

        SyndFeed feed = input.build(new XmlReader(url));

        System.out.println("Feed Author:"+feed.getAuthor());

        for(Object entries: feed.getEntries()){

            SyndEntry entry = (SyndEntry) entries;

            System.out.println("title :"+entry.getTitle());
            System.out.println("description : "+entry.getDescription());

        }

    } catch (IllegalArgumentException | FeedException | IOException e) {
        e.printStackTrace();
    } 
```

我需要将用户名密码放在某处吗？

**更新**

这是我做过的

```
 URL url =  new URL("https://d3ca01230439ce08d4aab0c61810af23:bla@mycon.mycompany.com/recordings.atom");

    HttpURLConnection httpcon = (HttpURLConnection)url.openConnection();

    String encoding = new sun.misc.BASE64Encoder().encode("username:pass".getBytes());

    httpcon.setRequestProperty  ("Authorization", "Basic " + encoding); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T19:08:25.680

当我从浏览器中点击该 URL 时，它会要求进行基本身份验证。您可以使用 ROM 执行此操作：

```
URL feedUrl = new URL(feed)
HttpURLConnection httpcon = (HttpURLConnection)feedUrl.openConnection();
String encoding = new sun.misc.BASE64Encoder().encode("username:password".getBytes());
httpcon.setRequestProperty  ("Authorization", "Basic " + encoding);
SyndFeedInput input = new SyndFeedInput();
SyndFeed feed = input.build(new XmlReader(httpcon)); 
```

您可能不应该使用 sun.misc.BASE64Encoder。而是在某个地方找到另一个。

来自：[http ://cephas.net/blog/2005/02/09/retrieving-an-rss-feed-protected-by-basic-authentication-using-rome/](http://cephas.net/blog/2005/02/09/retrieving-an-rss-feed-protected-by-basic-authentication-using-rome/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T07:49:12.070

我发现这在身份验证方面更有弹性，这段代码在有和没有身份验证的情况下都适用：

```
URL feedUrl = new URL("http://the.url.to/the/feed");
//URL feedUrl = new URL("http://user:pass@the.url.to/the/feed");

HttpURLConnection connection = (HttpURLConnection) feedUrl.openConnection();
if (feedUrl.getUserInfo() != null) {
    String encoding = new sun.misc.BASE64Encoder().encode(feedUrl.getUserInfo().getBytes());
    connection.setRequestProperty("Authorization", "Basic " + encoding);
}

SyndFeedInput input = new SyndFeedInput();
SyndFeed feed = input.build(new XmlReader(connection)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T08:52:21.647

您也可以使用以下内容代替

```
String encoding = new sun.misc.BASE64Encoder().encode("username:password".getBytes()); 
```

对此：

```
String BASIC_AUTH = "Basic " + Base64.encodeToString("username:password".getBytes(), Base64.NO_WRAP); 
```

# mysql - 在存储过程中使用动态 SQL 的解决方法是什么

> ID：12568577
> 
> 赞同：12
> 
> 时间：2012-09-24T15:53:14.863
> 
> 标签：mysql, sql, database, stored-procedures, triggers

**存储过程**

```
DELIMITER $$

CREATE PROCEDURE `lms`.`leads_to_bak` ()
BEGIN
SET @table1 = (SELECT `tabler_name` FROM `sets` WHERE `on_off`=0 LIMIT 1);
SET @table2 = CONCAT(@table1, '_bak');
SET @SQL1 = CONCAT('INSERT INTO ',@table2, '(', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @table2), ')', ' SELECT ', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @table1), ' FROM ', @table1);
PREPARE stmt FROM @sql1;
EXECUTE stmt;
END$$

DELIMITER ; 
```

**触发**

```
DELIMITER $$
USE `lms`$$

CREATE TRIGGER `lms`.`after_insert_into_leads`
AFTER INSERT ON `sets` FOR EACH ROW
BEGIN
CALL lms.leads_to_bak();
END$$

DELIMITER ; 
```

**问题**

我在制作暗示将执行触发器和存储过程时收到`Error Code: 1336\. Dynamic SQL is not allowed in stored function or trigger`错误消息。`INSERT`我假设问题是这里的动态 SQL：

```
PREPARE stmt FROM @sql1;
EXECUTE stmt; 
```

我环顾四周，stackoverflow上有一个关于问题的[线程](https://stackoverflow.com/questions/11454699/calling-stored-procedure-that-contains-dynamic-sql-from-trigger)，但没有答案。有人对可行的解决方法有任何建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-05T18:16:57.393

对于 MySQL 函数中缺少动态 SQL 没有很好的解决方法，只是笨拙的 cludges。有些事情仍然完全无法解决，例如在 SQL 查询中使用动态计算的字段名或表名。是的，偶尔需要做这种事情！

并且不要试图通过将动态 SQL 放入存储过程并包装在函数或触发器中来作弊，就像问题提出者所尝试的那样 - MySQL 太聪明了，会给你通常晦涩的错误消息。相信我，我去过所有的房子。

来自 Oracle PL/SQL 和 MS SQL Server 背景，我非常怀念 PL/SQL 和（在某种程度上）T-SQL 为编写过程 SQL 提供的丰富性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T15:56:29.673

在过程定义中，您需要存储所有`IN/OUT`变量。

改变：

```
CREATE PROCEDURE `lms`.`leads_to_bak` () 
```

至：

```
CREATE PROCEDURE `lms`.`leads_to_bak` (
    IN table1 varchar(32),
    IN table2 varchar(32),
) 
```

然后调用这样做：

```
CALL `lms`.`leads_to_bak`('table1', 'table2') 
```

用你自己的替换字符串。

使用存储过程的目的是防止使用严格类型的数据进行 SQL 注入。如果您只在参数列表中发送严格类型的输入变量，则技术上不需要在存储过程中准备它。

这样，您可以在存储过程调用之前处理字符串操作。让你的存储过程保持瘦身！

这是我的一个存储过程的示例：

```
DELIMITER ;
DROP PROCEDURE IF EXISTS `save_player`;
DELIMITER //

CREATE PROCEDURE `save_player` (
IN uid int(15) UNSIGNED,
IN email varchar(100),
IN name varchar(100),
IN passwd char(96),
IN state ENUM('active','suspended','deleted'),
IN user_role ENUM('gamemaster','moderator','player'),
IN locale ENUM('en','fr'),
IN lvl tinyint(1),
IN hp bigint(20),
IN reborn tinyint(1),
IN cross_ref varchar(12),
IN email_verified tinyint(1),
OUT new_id  int(15) UNSIGNED
)
BEGIN
   DECLARE date_deleted timestamp DEFAULT NULL;
   IF uid > 0 AND EXISTS (SELECT id FROM user WHERE `id`= uid) THEN
      IF state = 'deleted' THEN
        SET date_deleted = CURRENT_TIMESTAMP;
      END IF ;
      UPDATE `user` SET
        `email` = email,
        `name` = name,
        `passwd` = passwd,
        `state` = state,
        `user_role` = user_role,
        `locale` = locale,
        `lvl` = lvl,
        `hp` = hp,
        `reborn` = reborn,
        `cross_ref` = cross_ref,
        `email_verified` = email_verified,
        `date_deleted` = date_deleted
      WHERE `id` = uid;
      SET new_id = uid;
   ELSE
      INSERT INTO user (`email`, `name`, `passwd`, `state`, `user_role`, `locale`, `lvl`, `hp`, `reborn`, `cross_ref`, `email_verified`, `date_created`)
             VALUES (email, name, passwd, state, user_role, locale, lvl, hp, reborn, cross_ref, email_verified, NOW());
      SELECT LAST_INSERT_ID()  INTO new_id;
   END IF;
 END //
DELIMITER ; 
```

# iphone - 带有基本 SDK iOS5.1 的 iPhone 5 支持

> ID：12568580
> 
> 赞同：10
> 
> 时间：2012-09-24T15:53:17.647
> 
> 标签：iphone, ipad, ios5, ios6, iphone-5

是否可以使用基本 SDK iOS5.1 和 Default-568h@2x.png 提交应用程序，这样应用程序就不会留下额外的空白？

我们的普通应用程序在 iPhone5 上运行正常，从顶部和底部留下一个黑色空间，但如果我们只包含“Default-568h@2x.png”，它会正常运行（在 iPhone5 的完整区域中显示的视图）吗？

支持 iOS6 有很多依赖项，是否可以使用“Default-568h@2x.png”和基本 SDK iOS5.1 提交应用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T16:02:32.163

无法提交使用 Xcode 4.4.1 和 iOS 5.1 SDK 构建的 iPhone 5 全屏应用程序。我做了同样的事情来支持 armv6/iOS 3.x 和 iPhone 5 的旧设备。但是我从 itunesconnect 收到了这条拒绝消息。我认为这是 App Store 的新政策。

“无效的启动图像 - 您的应用包含带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T19:27:28.473

只需使用相同的 Default@x2.png 初始屏幕编辑 Default-568h@2x.png 的大小，不要重命名它，仅调整它的大小，这对我来说是这样工作的，似乎二进制文件确实被伪造了，我的应用正在等待审核，不知道是否会被批准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T03:13:54.070

我没有看到 Apple 有任何政策禁止开发人员提交基于 SDK 5.1 的应用程序。我的理解是，如果您在 SDK 5.1 上开发，您还应该在 iOS 6 上测试您的应用程序。

话虽如此，iOS 6 SDK 提供了很好的功能来帮助开发人员管理布局，Apple 肯定希望开发人员使用最新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:01:41.700

我已经通过以下方式解决了这个问题：我使用的是 iOS SDK 5.1 和 Xcode 4.4.1。现在我在 Xcode 中将 Default-568h@2x.png 添加到我的应用程序的上层文件夹中，但在 Xcode 4.5.1 中没有。

然后我通过 iPhone 5.1 模拟器构建了应用程序，最后我退出了模拟器。然后转到 ../users/myNameUser/Library/Application Support/iPhone Simulator/5.1/Applications/... 搜索您的应用并复制完整的文件夹（例如 F83221EA-1HB4-4947-9DH4-43D8QZ3FFEA3）。然后转到 ../users/myNameUser/Library/Application Support/iPhone Simulator/6.0/Applications/ 并粘贴到从 5.1 模拟器复制的文件夹中。

最后打开您的 Applications 文件夹，转到您的 Xcode App (4.5.1)，然后右键单击并显示包内容：转到 ../contents/applications/ 并双击“iPhone Simulator.app”。现在，您正在使用 iOS SDK 5.1 应用程序运行新的 iPhone 模拟器。做得好？现在您可以将模拟器的硬件更改为新的 iPhone Retina-4 英寸。您可以看到您的 App 在新 iPhone 5 上的外观。

我已经通过这种方式发送了我的新应用程序版本以供审核 - 看看它是否会通过。（发送：Xcode 4.4.1 和 iPhone 5 支持，如顶部所述）

顺便说一句，在真正的 iOS 6 设备上从 Xcode 4.4 运行应用程序可能会很有趣？如何做到这一点：[使用 iOS 6 设备通过 Xcode 4.4 和 iOS 5 SDK 进行测试](http://www.jonathanhogervorst.com/post/27550170932/use-ios-6-device-for-testing-with-xcode-4-4-and-ios-5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T08:29:05.850

为避免使用 XCode 4.4.1 提交带有 iPhone 5 启动图像的应用程序时出现“无效启动图像”问题，请执行以下步骤：

1.  在 XCode 4.5 下归档您的应用程序
2.  打开 Organizer，在 Finder 中显示您的 App 文件夹，输入您 App 的 Products/Applications 文件夹，将 Info.plist 和 archived-expanded-entitlements.xcent 复制到您的主文件夹。
3.  使用 XCode 打开 Info.plist (~/Info.plist)，并将 MinimumOSVersion 从 4.3 修改为 4.0
4.  关闭 XCode 4.5 并打开 XCode 4.4.1，打开您的 App 项目并打开 Target 的“Build Phrases”选项卡，添加一个运行脚本，其中包含 shell“/bin/sh”和“cp -f ~/Info.plist ~/archived -expanded-entitlements.xcent “${TARGET_BUILD_DIR}/${EXECUTABLE_NAME}.app”</li>
5.  重新归档您的应用程序，它应该很快就会通过 App Store 的规则检查器并进入“等待审核”。

我在 10 月底提交的应用程序在 11 月初上线。有人说他用XCode 4.3.2提交app也是一样的。它应该适用于 XCode 4.*

如需更多信息，请同时[阅读此博客文章](http://dev.zhourenjian.com/blog/2012/11/11/submit-to-app-store-using-xcode-4-4-1-with-iphone-5-supported.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T20:21:59.150

我在 2 月中旬提交了在 Xcode3.2.6 上编译的二进制文件，只有 Default.png，我的应用程序由于与 4" 屏幕相关的错误而被拒绝，一些愚蠢的尺寸垃圾，修复它并在 Xcode4.6 上测试/ SDK6.1 需要 568h@2x.png 文件，我将该图像添加到我的集合中，仍然在 3.2.6 上编译它并提交我的修复程序，它被自动拒绝，并使用与此处相同的消息。

然后我只是把那个 568 文件拉出来并重新提交，希望自从它在大约 2 周前通过后它会再次过去，我在 sdk6.1 上检查了我的代码三次，重新编译/重新提交并得到了同样的拒绝，所以看起来他们现在正在执行该最小 Xcode 版本。

但猜猜怎么了？我清理了所有东西两次并重建并决定最后一次尝试，重新提交并通过了！！！我现在正在等待 4 评论。

# java - 试图从 Java 中解密 attr_encrypted 存储值

> ID：12568581
> 
> 赞同：1
> 
> 时间：2012-09-24T15:53:18.170
> 
> 标签：java, ruby-on-rails, ruby, encryption, attr-encrypted

我有一个 Rails 应用程序，它在其中一个模型中加密（使用 attr_encrypted）2 个字段。

我的流程的另一部分，不是网络应用程序，需要使用这些数据（明文）执行一些任务。

我正在尝试从数据库中读取存储的值并对其进行解密，但不能..

我的模型如下所示：

```
class SecretData < ActiveRecord::Base
  mysecret = "mylittlesecret"

  attr_encrypted :data1, :key=>mysecret, :algorithm => "aes-256-cbc"
  attr_encrypted :data2, :key=>mysecret, :algorithm => "aes-256-cbc"

  ...
end 
```

DB 字段（encrypted_data1 和 encrypted_data2）充满了数据，但是当我尝试解码 base64（attr_encrypted 默认情况下会这样做）和解密（我尝试从命令行使用 openssl 并使用 Java）时，我得到“坏幻数”（openssl）或关于密钥长度的各种错误（在 Java 中）。我花了很多时间试图解密这些字符串，但就是找不到方法。

这是我拥有的所有数据：
加密 + base64 字符串（用于 data1 和 data2）是：

```
cyE3jDkKc99GVB8TiUlBxQ==
sqcbOnBTl6yy3wwjkl0qhA== 
```

我可以从它们中解码 base64 并获得一些字节数组。当我尝试：

```
echo cyE3jDkKc99GVB8TiUlBxQ== | openssl aes-256-cbc -a -d   (and type "mylittlesecret" as the password) 
```

我得到：“坏幻数”

当我尝试以下 Java 代码时：

```
Key key = generateKey();
Cipher c = Cipher.getInstance(ALGO);
c.init(Cipher.DECRYPT_MODE, key);
byte[] decordedValue = new BASE64Decoder().decodeBuffer(encryptedData);
byte[] decValue = c.doFinal(decordedValue);
String decryptedValue = new String(decValue); 
```

我得到“java.security.InvalidKeyException: Invalid AES key length: 14 bytes”
我已经为 Java 代码尝试了许多变体，所以这个特定的可能是一个完全错误..

当我尝试使用红宝石时：

```
irb(main):069:0> Encryptor.decrypt(Base64.decode64("cyE3jDkKc99GVB8TiUlBxQ=="), ,key=>'mylittlesecret')
=> "data1-value" 
```

我得到了正确的解密值（如您所见）。

我还注意到，当我尝试在 Java 中加密相同的字符串并在 Base64 中编码时，我得到一个更长的字符串（在 base64 之后）。不知道为什么，但它可能相关..

我想我也应该有一个带有加密值的 salt/iv，但我没有看到它存储在任何地方。我尝试加密相同的值两次并得到相同的输出字符串，所以它不是随机的。

有谁知道 attr_encrypted （它使用 ruby​​ 的加密器）如何加密数据以及我应该如何在外部解密它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:06:16.193

好吧，感谢owlstead，我能够解决这个问题。我在 ruby​​ 和 Java 中发布代码，以防将来有人需要它：

正如 owlstead 所提到的，问题确实出在 EVP_BytesToKey （从密码和盐生成密钥）中。由于某种原因，Ruby 不使用标准的，因此 Java（或 openssl）无法解码。

这是一个使用标准方法的 ruby​​ 实现：

```
def self.encrypt(options)

   plaintext = options[:value]
   return true if plaintext.blank?

   cipher = OpenSSL::Cipher::Cipher.new(@@cipher_type)
   cipher.encrypt

   iv = cipher.random_iv
   salt = (0 ... @@salt_length).map{65.+(rand(25)).chr}.join   # random salt
   key = OpenSSL::PKCS5.pbkdf2_hmac_sha1(@@password, salt, @@pkbdf_num_iters, cipher.key_len)

   cipher.key = key
   cipher.iv = iv

   enc_data = cipher.update(plaintext)
   enc_data << cipher.final

   final_data = salt << iv << enc_data
   Base64.strict_encode64(final_data)
end

def self.decrypt(options)

   ciphertext = options[:value]
   return true if ciphertext.blank?

   cipher = OpenSSL::Cipher::Cipher.new(@@cipher_type)
   cipher.decrypt

   cipher_data = Base64.decode64(ciphertext)

   salt = cipher_data[0 .. @@salt_length-1]
   iv = cipher_data[@@salt_length .. @@salt_length+cipher.iv_len]
   enc_data = cipher_data[@@salt_length+cipher.iv_len .. -1]  # the rest

   key = OpenSSL::PKCS5.pbkdf2_hmac_sha1(@@password, salt, @@pkbdf_num_iters, cipher.key_len)

   cipher.key = key
   cipher.iv = iv

   plaintext = cipher.update(enc_data)
   plaintext << cipher.final

   plaintext
  end 
```

我设置了以下参数： - cipher_type = aes-128-cbc（Java 仅支持 128 但开箱即用。除此之外，您需要安装一些额外的包） - salt_length = 8 - pkbdf_num_iters = 1024

这是用于解码的Java方法：

```
public String decrypt(String ciphertext) throws Exception {
    byte[] crypt = Base64.decodeBase64(ciphertext);

    // parse the encrypted data and get salt and IV
    byte[] salt = Arrays.copyOfRange(crypt, 0, saltLength);
    byte[] iv = Arrays.copyOfRange(crypt, saltLength, saltLength + ivLength);
    byte[] encryptedData = Arrays.copyOfRange(crypt, saltLength + ivLength, crypt.length);

    // generate key from salt and password  
    SecretKeyFactory f = SecretKeyFactory.getInstance(secretKeyName);
    KeySpec ks = new PBEKeySpec(password.toCharArray(), salt, pbkdfNumIters, keyLength);
    SecretKey s = f.generateSecret(ks);
    Key keySpec = new SecretKeySpec(s.getEncoded(),"AES");

    // initialize the cipher object with the key and IV
    Cipher cipher = Cipher.getInstance(cipherAlgo);
    IvParameterSpec ivSpec = new IvParameterSpec(iv);
    cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);

    // decrypt
    byte[] decBytes = cipher.doFinal(encryptedData);

    return new String(decBytes);
} 
```

为我工作。

希望它对某人有所帮助（或将对某人有所帮助..）

扎克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:53:14.993

您将需要`-nosalt`使用 OpenSSL 解密数据。对于 Java，您将需要 OpenSSL`EVP_BytesToKey`方法的实现。一种实现可以在[Ola Bini 的博客上](http://olabini.com/blog/tag/evp_bytestokey/)找到。感谢您将其置于公共领域，Ola。

```
 public static byte[][] EVP_BytesToKey(int key_len, int iv_len, MessageDigest md,
            byte[] salt, byte[] data, int count) {
        byte[][] both = new byte[2][];
        byte[] key = new byte[key_len];
        int key_ix = 0;
        byte[] iv = new byte[iv_len];
        int iv_ix = 0;
        both[0] = key;
        both[1] = iv;
        byte[] md_buf = null;
        int nkey = key_len;
        int niv = iv_len;
        int i = 0;
        if (data == null) {
            return both;
        }
        int addmd = 0;
        for (;;) {
            md.reset();
            if (addmd++ > 0) {
                md.update(md_buf);
            }
            md.update(data);
            if (null != salt) {
                md.update(salt, 0, 8);
            }
            md_buf = md.digest();
            for (i = 1; i < count; i++) {
                md.reset();
                md.update(md_buf);
                md_buf = md.digest();
            }
            i = 0;
            if (nkey > 0) {
                for (;;) {
                    if (nkey == 0)
                        break;
                    if (i == md_buf.length)
                        break;
                    key[key_ix++] = md_buf[i];
                    nkey--;
                    i++;
                }
            }
            if (niv > 0 && i != md_buf.length) {
                for (;;) {
                    if (niv == 0)
                        break;
                    if (i == md_buf.length)
                        break;
                    iv[iv_ix++] = md_buf[i];
                    niv--;
                    i++;
                }
            }
            if (nkey == 0 && niv == 0) {
                break;
            }
        }
        for (i = 0; i < md_buf.length; i++) {
            md_buf[i] = 0;
        }
        return both;
    } 
```

# javascript - 获取使用 Jquery 选择的下拉值

> ID：12568582
> 
> 赞同：0
> 
> 时间：2012-09-24T15:53:19.583
> 
> 标签：javascript, jquery

我有一个由 jQuery 自动构建的下拉菜单。它运行良好。

当用户从下拉列表中选择一个值时，我想知道该值是什么。目前我正在使用：

```
var employee= $('#emplist').find('option:selected').text(); 
```

但这似乎总是返回null。

有人可以告诉我如何将下拉选择的文本添加到变量中。

我的 jQuery 版本是 1.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:54:26.990

只需使用`.val()`. 试试下面，

```
var employee= $('#emplist').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:55:05.807

要获取**当前选定的文本**：

```
$('#emplist :selected').text(); 
```

**或价值**：

```
var value = $('#emplist').val() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T15:55:31.233

你可以做

```
var employee= $('#emplist').find('option:selected').val(); 
```

或者更好的方法

```
var employee= $('#emplist').val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T15:55:46.647

尝试这个

```
var employee= $('#emplist').val()

      OR

var employee= $('#emplist').find('option:selected').val(); 
```

# c# - Linq to sql 选择进入一个新类

> ID：12568587
> 
> 赞同：8
> 
> 时间：2012-09-24T15:53:39.157
> 
> 标签：c#, entity-framework, c#-4.0, linq-to-sql

我的问题是，当我有以下 2 个查询时，第一个不填充 CampaignID 属性，但第二个填充。这是我的代码；

**查询1**；

```
var query = from c in _context.MCTargets
                    where c.TargetDateFrom==d1 && c.TargetDateTo<=d2
                    group c by c.MarketingCampaignID into g
                    select new MSReport{
                        CampaignID = g.Key, // CampaignID is not populated here.
                               StartDate = d1,
                               EndDate = d2
                    }; 
```

**查询2**；

```
var query2 = from c in _context.MCTargets
                    where c.TargetDateFrom == d1 && c.TargetDateTo <= d2
                    group c by c.MarketingCampaignID into g
                    select new 
                    {
                        CampaignID = g.Key,
                        StartDate = d1,
                        EndDate = d2
                    }; 
```

**MSReport.cs**

```
public class MSReport
{
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int CampaignID { get; set; }

    public MSReport()
    {
        // CampaignID = 0 here  
        // doing something with CampaignID here like setting some calculated properties.    
    }  
 } 
```

在此先感谢并为我糟糕的解释感到抱歉。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T16:18:54.997

使用对象初始值设定项语法时，初始值设定项中指定的值是在执行对象的构造函数之后设置的。如果您需要尝试填充的值可用于构造函数，则必须添加一种构造函数形式，该构造函数将值作为参数并填充字段或属性本身。

在你的课堂上：

```
public MSReport(int campaignID, DateTime startDate, DateTime endDate)
{
       CampaignID = campaignID;
       StartDate = startDate;
       EndDate = endDate;

       // doing something with CampaignID here like setting some calculated properties.
} 
```

在您的查询中：

```
new MSReport(g.Key, d1, d2) 
```

这适用于 Linq to SQL 和 Linq to Objects。对于 Linq to Entity，必须采用不同的方法。

您可以使用匿名对象执行查询，然后运行第二个查询以将其转换为所需的对象：

```
var query = from c in _context.MCTargets
                  where c.TargetDateFrom==d1 && c.TargetDateTo<=d2
                  group c by c.MarketingCampaignID into g
                  select new {
                      CampaignID = g.Key,
                      StartDate = d1,
                      EndDate = d2
                  };

IEnumerable<MSReport> queryMSReports = from item in query.AsEnumerable()
                                       select new MSReport(item.CampaignID, item.StartDate, item.EndDate); 
```

这将对象从 Linq 断开连接到实体，并允许您使用具有参数的构造函数创建所需的对象。有关详细信息，请参阅 MSDN 上的[LINQ to Entites 'parameterless constructor' 错误](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/49a23b65-cdf8-4f58-b4a0-4effbe10c1ae)论坛帖子。

您的另一个选择是使用您的 MSReport 类和对象初始值设定项语法进行查询，然后在您的类上有一个计算方法，您以后必须调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T12:16:06.370

这是一个例子......

```
 public class SimpleNameValueItem
    {
        public string Name { get; set; }

        public Guid Uid { get; set; }

        public int Id { get; set; }

        public string Value { get; set; }

    }

  var shapeItems = from x in AppModel.ShapeTypes select new SimpleNameValueItem { Name = x.ShapeName, Uid = x.UID }; 
```

[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)`AppModel.ShapeTypes` 的实体在哪里 。

![在此处输入图像描述](../Images/60be2ab57efafd1ccaa4a8a22f3ed981.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:07:45.707

也许默认构造函数在参数初始化之前运行？尝试使用您的参数在 MSReport 中添加构造函数并进行调试。

```
 public class MSReport
    {
        public DateTime StartDate { get; set; }
        public DateTime EndDate { get; set; }
        public int CampaignID { get; set; }

        public MSReport(int campaginId, ....)
        {
// use and initialize camaginId here
        }  
     } 
```

并做：

```
select new MSReport(g.Key) {
                               StartDate = d1,
                               EndDate = d2
                    } 
```

# model-view-controller - 在 MVC HTML Helper 中缓存“昂贵”查询的推荐方法是什么？

> ID：12568589
> 
> 赞同：1
> 
> 时间：2012-09-24T15:53:43.607
> 
> 标签：model-view-controller, html-helper, outputcache

我正在尝试在 HTML Helper 上使用输出缓存。但是，即使设置了属性，在调用 Helper 方法时始终会输入此代码块。由于 outputcache 属性在这种情况下不起作用，在 Html Helpers 中缓存“昂贵”查询的推荐方法是什么？

```
 [OutputCache(Duration = 60)]
     public static MvcHtmlString CountryDropDownListFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, object selectedValue)
    {
        var doc = new XmlDocument();
        doc.Load(HttpContext.Current.Server.MapPath("~/App_Data/countries.xml"));

        var items = new Dictionary<string, string>();

        foreach (XmlNode node in doc.SelectNodes("//country"))
        {
            items.Add(node.InnerText, node.InnerText);
        }

        return html.DropDownListFor(expression, new SelectList(items, "key", "value", selectedValue));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:49:23.913

输出缓存允许您将操作方法​​的输出存储在 Web 服务器的内存中。例如，如果 action 方法渲染一个视图，该视图页面将被缓存。然后，此缓存页面可供应用程序用于后续请求。输出缓存为您的应用程序节省了重新创建操作方法结果所需的时间和资源。

在 ASP.NET MVC 中，您可以使用 OutputCacheAttribute 属性来标记要缓存其输出的操作方法。如果使用 OutputCacheAttribute 属性标记控制器，则控制器中所有操作方法的输出都将被缓存。

详细信息[http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute(v=vs.108).aspx)

***您将此属性用于非操作方法***

正确的例子

```
[OutputCache(Duration = 50000)]
public ActionResult CountryDropDownListFor()
{
   // Code 
} 
```

在您看来，您可以使用 Html.PartialAction 来呈现一个

# c# - jQuery 对比 C#：使用主文本框

> ID：12568596
> 
> 赞同：1
> 
> 时间：2012-09-24T15:53:55.213
> 
> 标签：c#, javascript, jquery

我的页面上有 100 多个文本框的列表。我想在顶部有一个文本框，可以将它们全部更改为其值，但仍然让其他文本框能够独立（例如，对所有人使用一个变量是行不通的）。它们应该能够单独更改，而主人则充当“全部更改”的角色。

我的问题是，通过循环并在 c# 中进行回发会更好吗？或者我可以在 jquery 中动态更改它们吗？你会推荐哪个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T15:57:03.387

我强烈建议使用 jquery 更改它们。它可以像这样简单：

```
$('#txt_Master').change(function() {
    $('.childTextBoxes').val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:59:03.087

使用 jQuery 将是最好的选择.. 因为使用服务器端控件的负载太多..

检查这个[小提琴](http://jsfiddle.net/Qvt8J/)

```
<input type="text" class="master"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>
<input type="text" class="child"/>​

$(document).ready(function() {
    $('.master').on('change', function() {

       $('.child').val(  $(this).val() );
    });
});​ 
```

# vba - 如何在VBA excel 2010脚本中根据用户选择选择数据而不丢失原始数据？

> ID：12568609
> 
> 赞同：0
> 
> 时间：2012-09-24T15:54:39.373
> 
> 标签：vba, excel

我想用`VBA`从用户那里获取输入的文件制作一个 excel `1`，`2`或者`3`：

1.  打开文件时如何运行它`xslm`？

2.  假设我的文件中有这张表：

![在此处输入图像描述](../Images/286496b6c56821a6e7432636076bde73.png)

这`common data`对于列`A` `B`和`C`独特的内容很有用。我想使用下面的代码，所以取决于用户输入，它会从`A`或`B`到唯一数据`C` 的地方选择`A's`唯一数据。**但**我希望**A 列的数据可重复使用**以供将来使用，例如，如果用户将提供`input_num=1`，那么数据将是`A's` `unique data`

```
Sub main()
MsgBox ("welcome")

Dim input_num As Integer

input_num = InputBox(Prompt:="please select device", Title:="select device", Default:=3)

If input_num = 1 Then

    ' use the first column

ElseIf input_num = 2 Then

    ' use the second column

Else

    ' use the third column

End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:21:20.037

```
1\. How can I run it while opening the xlsm file ?

2\. Using the column based on User input 
```

要在 Excel 文件启动时运行代码，您可以使用

```
Private Sub Workbook_Open()

End Sub 
```

只要您的文件中启用了宏，您将放在这里的任何代码都将运行。例如，当您打开包含以下代码的文件时，您将看到一个消息框“Hello World”。

```
Private Sub Workbook_Open()
    MsgBox "Hello World"
End Sub 
```

进入`Workbook_Open()`工作簿代码区域，如下面的屏幕截图所示

![在此处输入图像描述](../Images/5d5896ffd77a6f2d92a8b0df2a4f4905.png)

现在关于你的第二个问题

在 Excel 中，您不仅可以按名称引用列，还可以按数字引用列，例如

A列可以称为

```
Sheets("Sheet1").Columns("A:A") 
```

或者

```
Sheets("Sheet1").Columns(1) 
```

这使您的工作更轻松，因为您现在可以根据用户输入直接引用该列。例如

```
Private Sub Workbook_Open()
    MsgBox "welcome"

    Dim input_num As Variant

    input_num = InputBox(Prompt:="please select device", _
    Title:="select device", Default:=3)

    Select Case input_num
        Case 1, 2, 3
            With Sheets("Sheet1").Columns(Val(input_num))
                '
                '~~> Do what ever you want
                '
            End With
    End Select
End Sub 
```

# ios - 我应该如何从不断变化的 masterViewController 中跟踪 detailViewController？

> ID：12568611
> 
> 赞同：1
> 
> 时间：2012-09-24T15:54:45.817
> 
> 标签：ios, ipad, uistoryboard, segue

**更新**- 我想我想通了，但如果您愿意，请阅读我的问题并检查我的解决方案（在答案中）是否正确，谢谢。

我是 splitViewController 的新手，我很难理解在弹出主视图时应该如何弹出详细视图控制器。

这对我来说可能很难解释，但我会尽力而为，这里有一个截图来理解我的故事板： ![在此处输入图像描述](../Images/1c660c77c2a3b0bb93516be45451fabb.png)

MasterView 是一个具有 TableView 的 RootViewController 的 NavigationController，当用户选择一个单元格时，masterView 会推送下一个 tableview 并以编程方式更改详细信息，如下所示：

**在初始根中：**

```
 detailViewController = (CCGViewController *)[[self.splitViewController.viewControllers lastObject] topViewController]; 
```

**在根中单击单元格时**

```
 [detailViewController performSegueWithIdentifier:@"replaceSearchWithSponsor" sender:self]; 
```

这正在深入研究，但是当我弹出主视图导航控制器时，我想设置一种在导航堆栈中弹出详细视图的好方法。

任何建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:03:50.033

我只是将 UINavigationController 子类化，当我弹出 MasterNavigationController 时，我也弹出了 Detail。这似乎对我有用，如果您发现任何潜在问题，请告诉我：

在 .h 中：

```
@interface CCGPopMasterNavigationController : UINavigationController

@end 
```

米

```
@interface CCGPopMasterNavigationController ()

@end

@implementation CCGPopMasterNavigationController

- (UIViewController *)popViewControllerAnimated:(BOOL)animated {
    [[[[self.splitViewController.viewControllers lastObject] topViewController]navigationController
      ] popViewControllerAnimated:animated];
    return [super popViewControllerAnimated:animated];
}
@end 
```

# c++ - 在 QListWidget 的 QStyledItemDelegate 中，如何绘制所选项目以匹配标准列表？

> ID：12568614
> 
> 赞同：2
> 
> 时间：2012-09-24T15:55:07.050
> 
> 标签：c++, qt, delegates

我的 QList 小部件有一个 QStyledItemDelegate：

```
class MappingDisplayWidgetDelegate: public QStyledItemDelegate
{
    Q_OBJECT
public:
    MappingDisplayWidgetDelegate(QObject *parent=NULL);
    virtual void paint ( QPainter * painter, const QStyleOptionViewItem & option, const QModelIndex & index ) const;
    virtual QSize sizeHint ( const QStyleOptionViewItem & option, const QModelIndex & index ) const;
}; 
```

它的绘画方法看起来像：

```
void MappingDisplayWidgetDelegate::paint ( QPainter * painter,
                                           const QStyleOptionViewItem & option,
                                           const QModelIndex & index ) const
{
    if (option.state & QStyle::State_Selected)
        painter->fillRect(option.rect, option.palette.highlight());
    else if (option.state & QStyle::State_MouseOver)
        painter->fillRect(option.rect, option.palette.midlight());

    QFontMetrics fm(option.font);

    QString filename = index.data(Qt::DisplayRole).toString();

    QRect outline = option.rect;
    int outmid = outline.center().y();

    QRect fnBound = fm.boundingRect(filename);
    int fnBoundMid = fnBound.center().y();
    fnBound.moveLeft(outline.left());
    fnBound.translate(0, outmid - fnBoundMid);

    painter->drawText(fnBound, Qt::AlignVCenter | Qt::AlignLeft, filename);

} 
```

现在这可行，但是对 State_Selected 和 State_MouseOver 的处理不会产生与默认列表相同的结果。这是左侧上面代码的屏幕截图（我在 Win7 系统上运行），右侧是标准 QListWidget。你可以看到 QListWidget 有很好的渐变，而我的项目只有简单的颜色。

![在此处输入图像描述](../Images/62410b67c862d84b340187ed153fc1bf.png)

我想绘制我的项目以正确匹配标准小部件，但我不太清楚如何。我没有在选项中看到任何可以为我提供所需信息的内容。

编辑添加：请注意，这是一个有点玩具的例子。真正的代码除了一个字符串之外还有很多其他的东西，并且有一个适当的（和工作的）sizeHint 函数。这只是一个演示问题的玩具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:58:36.867

在用于绘制该元素的[源代码](http://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/styles/qcommonstyle.cpp)中，进行了以下调用：

```
// draw the background
proxy()->drawPrimitive(PE_PanelItemViewItem, opt, p, widget); 
```

我怀疑您可能想做类似于以下的事情：

```
style().drawPrimitive(QStyle::PE_PanelItemViewItem, option, painter, NULL); 
```

您可能必须使用`option`参数来获得正确的矩形目标。不幸的是，我现在使用的计算机没有设置来测试任何这些，所以 YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-26T00:35:27.753

我有同样的问题——我想要一个完全自定义的绘画功能，但要利用内置的漂亮选择绘画。我已经尝试了下面的代码，到目前为止，我发现它运行良好，没有负面影响：

```
void MassIndexItemDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex& index) const {
    QStyledItemDelegate::paint(painter, option, QModelIndex());
    //Above, note that rather than passing >index< to the inherited function, I pass a default, invalid index.
    //Since my model's data() function returns an empty QVariant for invalid indexes,
    //I get the default selection painting, but no other data is painted in any way.

    //Below, I can do whatever painting I want and it will show up on top of the pretty selection paint
    painter->drawEllipse(option.rect);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:20:51.870

我将其详细说明为一个可用的解决方案，尽管它不是一个很好的解决方案。

如果我没有在项目的 DisplayRole 中放置任何内容，那么我可以调用底层的 QStyledItemDelegate::paint 例程，它只会绘制正确的背景，因此：

```
void MappingDisplayWidgetDelegate::paint ( QPainter * painter,
                                           const QStyleOptionViewItem & option,
                                           const QModelIndex & index ) const
{
    QStyledItemDelegate::paint(painter, option, index);

    QFontMetrics fm(option.font);

    QString filename = index.data(Qt::UserRole).toString();

    QRect outline = option.rect;
    int outmid = outline.center().y();

    QRect fnBound = fm.boundingRect(filename);
    int fnBoundMid = fnBound.center().y();
    fnBound.moveLeft(outline.left());
    fnBound.translate(0, outmid - fnBoundMid);

    painter->drawText(fnBound, Qt::AlignVCenter | Qt::AlignLeft,
                      filename);
} 
```

我不喜欢这样，我将暂时尝试 Dave 的建议，但如果遇到困难，这似乎确实有效。不利的一面是它意味着你不能使用 DisplayRole，所以你不能在 QListWidget 中使用 findItems。

# javascript - 如何调整字符宽度？

> ID：12568615
> 
> 赞同：2
> 
> 时间：2012-09-24T15:55:10.080
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试格式化 jqueryui 自动完成下拉菜单，目前在下拉菜单中有一个州和城市列表，如下所示：

```
 Boston Massachusetts
  Seattle Washington
  Atlanta Georgia
  Waco Texas
  Walla Walla Washington 
```

我想将它们排成一行，以便各州排成一行：

```
 Boston       Massachusetts
  Seattle      Washington
  Atlanta      Georgia
  Waco         Texas
  Walla Walla  Washington 
```

我怎么做？仅计算城市中的字符数，然后向字符较少的城市添加“填充符”是行不通的，因为它没有考虑字距调整和不同的字符宽度（即“W”与“i” ）。

我已经尝试过monkeypatching，如此处所述[，](https://stackoverflow.com/questions/2435964/jqueryui-how-can-i-custom-format-the-autocomplete-plug-in-results)并尝试将下拉框格式化为表格，每个城市和州都在自己的列中。但是，表格元素不受 JQuery UI 的尊重，也不会更改格式。

有什么建议么？

```
function monkeyPatchAutocomplete() {
          $.ui.autocomplete.prototype._renderItem = function( ul, item) {
              var re = new RegExp(this.term, "i");
              var l = item.label.replace(re,"<span style='font-weight:bold;color:#000;'>" + "$&" + "</span>");
              var v = item.value.replace(re,"<span style='font-weight:bold;color:#000;'>" + "$&" + "</span>");
              return $( "<li></li>" )
                  .data( "item.autocomplete", item )
                  .append( "<a>" + v + " " + l + "</a>" )
                  .appendTo( ul );
          };
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:06:18.113

I tried the thing with styling as a table and got it to work if I changed the markup a little bit. The ul is the table, lis is table-rows and then instead of having two spans inside an a element we just have two a elements.

```
<ul> //display: table
    <li> //display: table-row
        <a>City</a> // display: table-cell
        <a>State</a> //display: table-cell
    </li>
</ul> 
```

Maybe you can have the same structure as before if you find some special display value on the original a element, but i tried all combinations of table-row and block on the original li and a elements without success.

Edit: ps Overriding the jquery ui styles can be a bit cumbersome but inspect the elements one by one in chromes developer tools and make sure to write css rules that override all the display values on the autocomplete's ul, li and a elements.

# android - 如何在 Android 上通过 WiFi 流式传输数据而不创建多个 AsyncTask？

> ID：12568623
> 
> 赞同：0
> 
> 时间：2012-09-24T15:55:43.310
> 
> 标签：android, networking

我需要将加速度计位置从我的手机传输到我的电脑，我正在为每个新的加速度计位置做这样的事情。

```
AsyncTask<String, Void, String> task = new SendUDPTask();
task.execute("192.168.0.101", x + " " + y + " " + z); 
```

在 AsyncTask 内部，我通过 UDP 发送数据。

我知道您不能多次执行 AsyncTask，而且我知道每次发送位置（大约 30 个位置/秒）时创建一个新对象可能不是正确的方法。

在不为每个新的加速度计位置创建新的 AsyncTask 对象的情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:02:42.217

这完全取决于您如何处理发送的职位。

如果您想要接近实时的东西，您别无选择，只能在收到加速度计事件后立即发送。

如果实时无关紧要（或不必那么“真实”），您可以等到收到 N 个位置（例如 30 个）并一次发送所有位置。请记住，您为侦听器设置了加速度计刷新率。

# playframework-2.0 - 播放 2.0.3 application.context / sub url in play

> ID：12568626
> 
> 赞同：0
> 
> 时间：2012-09-24T15:55:52.087
> 
> 标签：playframework-2.0

哪里有很多关于这个的话题，但我从来没有理解过哪个版本实现了 application.contex 并且它在 2.0.3 上什么也没做

首先我成功地使用 play 1.2.4 参数，如下所示：

```
 http.port=9004
    http.path=/Zenith2
    XForwardedSupport=127.0.0.1 
```

在玩 2.0.3 我试试这个：

```
 application.context="/Zenith2"
    application.address="127.0.0.1"
    application.port="9088" 
```

-> 在 9000 中绑定（默认）

我也尝试：

```
 play2 start -Dhttp.address=127.0.0.1 -Dhttp.port=9088 -Dapplication.context=/Zenith2/ 
```

-> 在 9000 中绑定（默认）

所有这些语法都是来自 google groups 和 stackoverflom 其他主题的问题

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:40:29.453

正如 James Roper 在[google groups](https://groups.google.com/d/msg/play-framework/FfM_BA7HsbM/xMnTppxOGHoJ)上所说：`Play 2.0.*`还不支持在不同的上下文中运行

# image-processing - 基于 GPU 的拉普拉斯金字塔

> ID：12568627
> 
> 赞同：5
> 
> 时间：2012-09-24T15:55:53.887
> 
> 标签：image-processing, shader, opengl-es-2.0, gaussian, laplacian

我已经实现了一种使用普通 C++ 进行无缝混合的图像混合方法。现在我想将此代码转换为 GPU（使用 OpenGL ES 2 着色器用于移动设备）。基本上，该方法为每个图像创建高斯和拉普拉斯金字塔，然后从低分辨率到顶部组合（另见 Burt 等人 1983 年的论文“拉普拉斯金字塔作为紧凑图像代码”）。

我的问题是拉普拉斯金字塔级别可以有负值，但我的设备不支持浮点或整数类型纹理（例如使用 ORB_texture_float 扩展）。

我已经在寻找处理基于 GPU 的金字塔的论文，但没有找到真正有用的东西。

1.  如何为 GPU 有效地实现这样的金字塔？
2.  是否可以在不迭代前面的级别的情况下计算高斯/拉普拉斯金字塔级别？

问候，

**编辑** 似乎没有“好”的方法可以在 GPU 上完全计算拉普拉斯金字塔，除了使用不支持有符号类型（例如 ARB_texture_float）或大于当图像的数据范围在 [0..255] 之间时的字节。我的拉普拉斯金字塔在带有 ARB_texture_float 扩展的 GPU 上完美运行，但没有扩展（以及一些压缩范围的调整），由于范围压缩，金字塔会“错误”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T16:11:06.297

1.  如果您的纹理是无符号整数，那么实现拉普拉斯金字塔最安全的方法是存储两个金字塔 - 一个金字塔包含拉普拉斯的梯度幅度，另一个金字塔存储该位置像素的符号。

2.  是的。高斯或拉普拉斯金字塔中的任何级别都具有基于您要计算的 sigma 值的封闭形式解决方案。考虑以 sigma = (2/3) 的间隔计算的 LoG 金字塔的基本情况。金字塔的第一层有 sigma 2/3，只需用 5x5 LoG 滤波器与 sigma 2/3 进行卷积即可生成。使用相同滤波器的第二个卷积生成 sigma 4/3 的 LoG 图像，最后第三个具有 sigma 6/3 或 2，因此我们对图像进行二次采样以生成金字塔的下一个整数级别。如果您想计算 sigma 2 处的图像的 LoG，则不需要 sigma 2/3 和 4/3 处的级别 - 只需对图像进行一次二次采样并使用具有 sigma 1 的 LoG 滤波器进行卷积。

If you want to compute the LoG at sigma = 20, quad-subsample the image (16 pixel blocks become 1 pixel) to give you a sigma 16 image, then convolve once with a sigma 4/3 LoG filter.

# git - 如何从 git push -force 中恢复？

> ID：12568628
> 
> 赞同：41
> 
> 时间：2012-09-24T15:55:56.320
> 
> 标签：git, github

这是发生的事情：

我有两个远程 git 分支：`master`和`feature1`. 出于某种原因我必须使用`git push --force`for`feature1`分支，但我不知道我什么时候使用`git push --force`它也会推送`master`分支。然后，当我将本地`master`分支推送到远程存储库时，一场灾难发生了。

幸运的是，我的本地分支离远程不远。基本上，我的远程`master`在我的本地之前合并了两个拉取请求`master`。

所以我的问题是：我可以重新打开拉取请求并重新合并吗？我注意到合并请求有提交版本，所以我担心如果我只是提出新的拉取请求会搞砸什么？理想情况下，我只想重做两个请求的合并。

有没有其他方法可以从这场灾难中恢复过来？我了解到这`--force`是一个非常非常糟糕的选择。:(

更新，发生的事情的例子：

我有以下分支：

```
master
feature1
origin/master
origin/feature1 
```

我使用 GitHub 的`Auto merge pull requests`. 然后，我没有`master`在本地机器上获取分支。因此，我认为我`origin/master`的远程大师落后了两个版本。

然后我不小心使用`git -f push`了，它覆盖了远程分支，现在我丢失了远程存储库上拉取请求的提交。

我怎样才能在不破坏其他贡献者历史的情况下从中恢复？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-24T17:06:35.807

使用 github 时，请参阅[GHugo 的答案](https://stackoverflow.com/a/43271529/1600898)，它提供了一个使用 github 的万无一失的过程。如果您在内部（或其他非 github）安装，请继续阅读。

您始终可以`master`通过重置为旧提交并发出另一个`push -f`. 涉及的步骤通常如下所示：

```
# work on local master
git checkout master

# reset to the previous state of origin/master, as recorded by reflog
git reset --hard origin/master@{1}

# at this point verify that this is indeed the desired commit.
# (if necessary, use git reflog to find the right one, and
# git reset --hard to that one)

# finally, push the master branch (and only the master branch) to the server
git push -f origin master 
```

但是请注意，这会将远程恢复`master`到最近检索的状态`git fetch`或等效状态。在您最后一次获取之后由其他人推送的任何提交都将丢失。但是，这些提交仍将在*其*reflog 中可用，因此他们可以使用上述步骤恢复它们。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-04-07T06:54:26.933

请注意，使用**Github**，即使您没有在本地克隆存储库（即，当您没有 reflog 时）或提交 sha，您也可以使用 API 恢复强制推送。

首先，您必须获取上一个提交 sha，即强制推送之前的那个：

```
curl -u <username> https://api.github.com/repos/:owner/:repo/events 
```

然后你可以从这个 sha 创建一个分支：

```
curl -u <github-username> -X POST -d '{"ref":"refs/heads/<new-branch-name>", "sha":"<sha-from-step-1>"}' https://api.github.com/repos/:owner/:repo/git/refs 
```

最后，您可以在本地克隆存储库，并再次强制推送到 master：

```
git clone repo@github
git checkout master
git reset --hard origin/<new-branch-name>
git push -f origin master 
```

请注意，使用双重身份验证时，您需要提供一个令牌（有关更多信息，请参见[此处](https://developer.github.com/v3/auth/)）。

学分：[桑卡拉·拉梅斯瓦兰](https://medium.com/git-tips/githubs-reflog-a9ff21ff765f)

# python - Python：在两个文件中搜索公共值

> ID：12568630
> 
> 赞同：1
> 
> 时间：2012-09-24T15:55:58.287
> 
> 标签：python

我有两个文件加载到 Python 中，我正在尝试输出一个列表，该列表将显示两者之间的共同值。

第一个文件的列表如下所示（不是完整列表，只是其中的一部分）：

```
 [datetime.datetime(2010, 7, 30, 12, 20, 19, 143000), datetime.datetime(2010, 7, 30, 12, 22, 33, 631000), datetime.datetime(2010, 7, 30, 12, 22, 41, 236000), datetime.datetime(2010, 7, 30, 12, 23, 43, 547000), datetime.datetime(2010, 7, 30, 12, 23, 57, 453000), datetime.datetime(2010, 7, 30, 12, 26, 4, 713000), datetime.datetime(2010, 7, 30, 12, 26, 9, 46000), datetime.datetime(2010, 7, 30, 12, 28, 30, 313000)] 
```

第二个列表看起来像这样（同样，不是完整列表，只是其中的一部分）：

```
 [datetime.datetime(2010, 7, 30, 13, 43, 2, 993000), datetime.datetime(2010, 7, 30, 13, 43, 10, 917000), datetime.datetime(2010, 7, 30, 13, 48, 56, 697000), datetime.datetime(2010, 7, 30, 13, 49, 14, 399000), datetime.datetime(2010, 7, 30, 13, 51, 45, 882000), datetime.datetime(2010, 7, 30, 13, 52, 6, 432000), datetime.datetime(2010, 7, 30, 13, 54, 26, 873000), datetime.datetime(2010, 7, 30, 13, 59, 2, 164000), datetime.datetime(2010, 7, 30, 13, 59, 15, 515000), datetime.datetime(2010, 7, 30, 14, 3, 43, 742000), datetime.datetime(2010, 7, 30, 14, 5, 59, 975000), datetime.datetime(2010, 7, 30, 14, 13, 36, 887000), datetime.datetime(2010, 7, 30, 14, 13, 42, 92000)] 
```

这是代码的样子：

```
 for infilelines in text:
        lspl1 = infilelines.split(',')
        cattime = lspl1[2]
        catdate.append(datetime.strptime(lspl1[1]+cattime,'%d/%m/%Y%H:%M:%S.%f'))

    #print catdate

    NNSRCfile = sf.readsrc(NNSRC)
    l1 = NNSRCfile['date']
    l2 = NNSRCfile['time']
    NNSRCfile['datetime2'] = zip(l1,l2)
    #print NNSRCfile['datetime2']

    NNSRCfile['datetimenew'] = [datetime.strptime(i+j,'%m-%d-%Y%H:%M:%S.%f') for i,j in zip(l1,l2)]

    #print NNSRCfile['datetimenew']
    ii = 0
    while ii <= len(catdate):
        try:
            #print NNSRCfile['datetimenew'].index(catdate[ii]), "WE FOUND A MATCH!!!!"
            indices = NNSRCfile['datetimenew'].index(catdate[ii])
        except:
            print "No match."
            #continue
        ii += 1 
```

我没有收到错误，但脚本没有按照我的预期工作。我想要两个单独列表之间所有共同元素的完整列表。我知道我没有在这篇文章中包含完整的列表，但是当我手动查看它时，我知道两者之间有共同点。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:59:16.443

我认为`set`这里是有序的。假设您已将文件解析到列表中，您可以执行以下操作：

```
intersection = set(list1) & set(list2) 
```

鲍勃是你的叔叔，你完了！

* * *

上面还有一种方法形式：

```
intersection = set(list1).intersection(list2) 
```

其优点是您不需要创建 2 套（只有 1 套）。这意味着您实际上不需要将两个文件都读入内存——您可以使用第二个文件懒惰地解析/更新集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:59:25.473

如果您只是在寻找共同的值，请使用集合交集：

```
a = set([1,3,5,7])
b = set([3,5,6,9])
print a.intersection(b) # prints set([3, 5]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:02:26.193

如果你想要两个列表的交集，那么你可以这样做：

```
>>> a = [1,2,3,4]
>>> b = [3,4,5,6]
>>> set(a).intersection(set(b))
set([3, 4]) 
```

# c++ - Qt - 检测 QListView 中的项目信息变化

> ID：12568633
> 
> 赞同：3
> 
> 时间：2012-09-24T15:56:12.203
> 
> 标签：c++, qt

我有一个连接到 QStandardItemModel 的 QListView。如何检测模型或 QListView 中的任何信息更改？我为模型尝试了带有 itemChanged() 的信号和插槽，但它似乎使整个程序崩溃。

```
Qbject::connect(bugModel, SIGNAL(itemChanged(QStandardItem*)), this, SLOT(bugInfoChanged())); 
```

那是我用来连接信号的代码。函数 bugInfoChanged() 只是运行一个 qDebug()，上面写着“已更改”。但是当我启动程序时，它显示了一个崩溃错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:15:20.930

我自己修好了。事实证明，如果我将连接代码放在填充列表的函数中，它就可以正常工作。它曾经崩溃，因为在应用程序启动时列表没有任何项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:56:43.713

当我评论这一行（//QObj ...）时，不会发生崩溃，但是当我删除评论时它再次崩溃。我的“私人老虎机”区域有这个：

```
 void bugInfoChanged(); 
```

在cpp中是这样的：

```
 void MainWindow::bugInfoChanged()
    {
       qDebug() << "Changed";
    } 
```

我不知道导致崩溃的原因：/

# blogspot - 如何从谷歌缓存中获取网站的所有内容？

> ID：12568635
> 
> 赞同：0
> 
> 时间：2012-09-24T15:56:14.183
> 
> 标签：blogspot

我的 gmail 帐户今天被黑了，我不能再登录或请求新密码了。我也丢失了我博客中的所有内容。我环顾四周，发现它存储在谷歌缓存中。但是我有200多篇文章，我需要通过200多个url来复制所有内容。有什么方法可以帮助我重试谷歌缓存中的所有内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:15:33.980

*   网络[爬虫](http://en.wikipedia.org/wiki/Web_crawler "网络爬虫")可以帮助您检索多页信息。

*   此外，也许您可​​以使用[Internet Archive Wayback Machine](http://archive.org/web/web.php "互联网档案回退机")来检索一些丢失的信息。

*   另一个提示：[谷歌高级搜索](http://www.google.com/advanced_search "谷歌高级搜索")也可以帮助你。特别是*站点或域*参数。

* * *

**更新：**也许这个脚本可以为您完成所有工作：**[检索整个网站的 Google 缓存](http://www.guyrutenberg.com/2008/10/02/retrieving-googles-cache-for-a-whole-website/ "检索整个网站的 Google 缓存")**

# python - 归一化 Numpy 上三角子数组

> ID：12568641
> 
> 赞同：0
> 
> 时间：2012-09-24T15:56:32.560
> 
> 标签：python, multidimensional-array, numpy, normalization

我有一个维度为 4 的上三角子数组。它被初始化为

```
N, Q = (99, 23)
bivariate = np.zeros((N,N,Q,Q)) 
```

然后由类似的东西填充

```
for i in range(N):
    for j in range(i+1,N):
        bivariate[i,j] = num 
```

我希望将上三角元素归一化（Q，Q）矩阵。我目前只是通过做一个来做到这一点

```
bivariate /= bivariate.sum(axis=3).sum(axis=2)[:,:,np.newaxis,np.newaxis] 
```

但是由于下三角部分的空数组被规范化，我收到了运行时警告。除了以下方法之外，还有更好的方法吗？

```
for i in range(N):
    for j in range(i+1,N):
        bivariate[i,j] /= bivariate[i,j].sum() 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:45:16.127

如果您担心得到`np.nan`，可以尝试将归一化因子的空条目替换为 1：

```
 norm_factor = bivariate.sum(axis=3).sum(axis=2)[:,:,None,None]
 bivariate /= np.where(norm, norm, 1) 
```

至少你会避免`for`循环......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T14:39:22.743

FWIW，我发现单独处理上三角形部分然后将其重新插入要容易得多。

```
triu = np.tri_indices(n, 1)
upper_tri = bivariate[triu].reshape(-1, Q*Q)
upper_tri /= upper_tri.sum(axis=1)
bivariate[triu] = upper_tri.reshape(-1, Q, Q) 
```

# c - strtok 和转义字符

> ID：12568643
> 
> 赞同：0
> 
> 时间：2012-09-24T15:56:47.927
> 
> 标签：c, shell, escaping, strtok

我正在使用 C 语言中的 shell，它在空格字符（''）上使用 strtok 从用户输入创建参数列表。例如，strtok 'ls foo bar' 创建一个包含三个元素的 char*：ls、foo、bar。

我的问题是，如何检测逃逸空间？

例如，strtok 'ls foo\ bar' 创建一个包含三个元素的 char**：ls、foo\、bar。但它应该创建一个包含两个元素的 char*：ls、foo bar

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:08:25.187

您将无法使用`strtok`，因为`strtok`不理解转义字符。您可以尝试解决这个问题，但最终如果您想支持引用参数之类的东西，您将需要一种更灵活的方法。

考虑改为编写解析器。只需遍历输入中的每个字符并决定如何处理该字符：空格前进到下一个参数，反斜杠逐字复制下一个字符，引号开始引用的上下文等。这是一种更灵活的处理输入的方式，并且您将不受`strtok`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:04:57.097

只需将 strtok 的第二个参数从更改`" "`为`" \"`（“分隔符”）。这些字符将确定用户输入在何处拆分为标记，因此它们都不会进入标记列表。有关 strtok 的更多信息，请参见[此处](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)。

编辑：对不起，我误解了你。上述建议只会删除`\`s. 我同意手动解析是要走的路。一次获取一个字符是最简单的，`fgetc()`例如使用 .

# asp.net - 检查 IIS 7.5 中的 IIS 虚拟路径

> ID：12568645
> 
> 赞同：2
> 
> 时间：2012-09-24T15:56:56.880
> 
> 标签：asp.net, iis-7.5, virtual-path

我正在尝试通过在**用户级别**使用**RSA 加密来加密我的一个应用程序的****web.config**文件的某些部分。

 ****因此，我按照[此处](http://msdn.microsoft.com/en-us/library/2w117ede%28v=vs.100%29.aspx)列出的所有步骤，成功创建了提供程序并授予对我的应用程序的访问权限。但是，我在为我的应用程序指定虚拟路径时遇到了一些问题。

我在**Windows Server 2008 R2中运行****IIS 7.5**。我的应用程序名为**www.testsite.com**，其 ID 为**4**。

 ********aspnet_regiis**工具位于Windows **\Microsoft.NET\Framework\[version]**文件夹中：

因此，为了加密该`connectionStrings`部分，我运行以下命令：

```
aspnet_regiis -pe connectionStrings -app "[Application Path]" -prov "myRSAProvider" 
```

我试过**[Application Path]**，如下：

*   /W3SVC/4
*   /W3SVC/4/根
*   /W3SVC/4/root/www.testsite.com
*   /www.testsite.com

我总是收到错误

> 无法打开虚拟路径“[应用程序路径]”和站点“默认网站”的配置。
> 
> 无法映射路径“[应用程序路径]”。失败的！

我尝试浏览网络上的许多资源，但没有广泛涵盖此 IIS 虚拟路径规范。在 IIS6 中，我可以通过运行**aspet_regiis -lk**来获得它，但该命令在 IIS 7.5 中不再起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:48:59.607

你可能有两个问题。

1.  在您的命令语句的末尾使用命令*-site "4"指定您的***站点** 另请注意，您可以用您的站点名称代替 #4 来代替。例如*-站点“www.testsite.com”*

     **`aspnet_regiis -pe connectionStrings -app "[Application Path]" -prov "myRSAProvider" -site "4"`** 
***   **以管理员身份运行命令提示符**也很重要。** 

 **我在 Windows Server 2008 R2 中运行 IIS 7.5 时遇到了同样的错误，这对我有帮助。************

# entity-framework - DBcontext，动态指定连接字符串

> ID：12568647
> 
> 赞同：1
> 
> 时间：2012-09-24T15:56:57.113
> 
> 标签：entity-framework, database-connection, connection-string, dbcontext

我正在处理使用 EntityFramework 和从 DbContext 派生的对象的 C# 应用程序。创建 MyDbContext 对象的新实例时，我需要以编程方式设置连接字符串。为此，我使用以下代码：

```
public MyDbContext(string myString)
{
    this.Database.Connection.ConnectionString = myString
}

myString =  "Server=MYSERVER\\SQLEXPRESS; Database=MyDB; User ID=user; Password=pass;";
or
myString =  "Data Source=|DataDirectory|\\AirecCalcDatabase.sdf"; 
```

这两个字符串的数据库提供程序不同。第一个是 SQLExpress，第二个是 SQLCompact。如果我尝试使用第一个字符串运行此代码，我会从连接字符串中得到 ArgumentException。例如“关键字无效：服务器”以及“关键字无效：数据库”。连接字符串在使用不带参数的 DbContext 时有效，即从 app.config 读取字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:07:13.273

当您想使用 CE 时，您可能需要将[DefaultConnectionFactory](http://msdn.microsoft.com/en-us/library/system.data.entity.database.defaultconnectionfactory%28v=vs.103%29.aspx)更改为指向 SQL CE：

```
Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0"); 
```

有关更多信息，请参阅[此博客文章](http://www.arrangeactassert.com/code-first-entity-framework-unit-test-examples/)

# python - 我的 Python for 循环有什么问题？

> ID：12568653
> 
> 赞同：0
> 
> 时间：2012-09-24T15:57:31.827
> 
> 标签：python

我打开了两个文件，EQE_data 和 Refl_data。我想取出 EQE_data 的每一行，这将有八个制表符分隔的列，并在 Refl_data 中找到与其对应的行，然后进行数据分析并将结果写入输出。所以对于 EQE_data 中的每一行，我都需要搜索整个 Refl_data，直到找到正确的那一行。此代码第一次成功，但它为 Refl_data 每次输出相同的结果。即，我得到了 Wav1 和 QE 的正确列，但它似乎只执行了一次嵌套的 for 循环，所以我得到了相同的 R、Abs、IQE，这对于第一行是正确的，但此后不正确。

```
for line in EQE_data:
    try:
        EQE = line.split("\t")
        Wav1, v2, v3, QE, v5, v6, v7, v8 = EQE
        for line in Refl_data:
            Refl = line.split("\t")
            Wav2, R = Refl
            if float(Wav2) == float(Wav1):
                Abs = 1 - (float(R) / 100)
                IQE = float(QE) / Abs
        output.write("%d\t%f\t%f\t%f\t%f\n" % (int(float(Wav1)), float(QE), float(R) / 100, Abs, IQE))
    except:
        pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:59:32.980

如果`Refl_data`是文件，则需要在每个循环中将读取指针放回开头（使用`Refl_data.seek(0)`），或者只是重新打开文件。

*或者，首先*将所有内容读`Refl_data`入一个列表，然后循环遍历该列表。

 *进一步的建议：将[`csv`模块](http://docs.python.org/library/csv.html)用于制表符分隔的数据，并且永远不要使用空白`try:`- `except:`；总是只捕获特定的异常。*

# iphone - 核心数据不同的提取给出空数组

> ID：12568655
> 
> 赞同：3
> 
> 时间：2012-09-24T15:57:39.347
> 
> 标签：iphone, ios, core-data, ios6, nsfetchrequest

我花了几个小时试图让一个 fetch 工作。我需要删除重复项，所以我想我可以按照本指南[core-data-how-to-do-a-select-distinct](http://felipecypriano.com/2011/09/21/core-data-how-to-do-a-select-distinct/) 但它总是给我一个空数组。

这是我的代码：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"RBTag" inManagedObjectContext:[self context]];
request.entity = entity;
request.propertiesToFetch = [NSArray arrayWithObject:[[entity propertiesByName] objectForKey:@"name"]];
request.returnsDistinctResults = YES;
request.resultType = NSDictionaryResultType;

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];

NSError *error = nil;
NSArray *distincResults = [[self context] executeFetchRequest:request error:&error];

NSLog(@"Result: %@", distincResults); 
```

我没有错误。我检查了 NSPropertyDescription，它确实找到了我的财产。如果我注释掉：

```
request.resultType = NSDictionaryResultType; 
```

然后我得到结果，但它并不明显。=(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T16:41:40.040

在任何指南或苹果文档中都没有，但经过艰苦的谷歌搜索后，我发现了这篇文章： [bbarnheart](https://stackoverflow.com/a/7020057/1356577) 必须在将 resultType 更改为 NSDictionaryResultType 之前将上下文保存到持久存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:38:54.940

`propertiesToFetch`需要一个*属性名称*数组，但您将其设置为`NSAttributeDescription`. 尝试

```
request.propertiesToFetch = [NSArray arrayWithObject:@"name"]; 
```

如果您不设置`request.resultType = NSDictionaryResultType;`then`propertiesToFetch`将被忽略。

# maven - java.lang.OutOfMemoryError: PermGen 空间错误

> ID：12568658
> 
> 赞同：7
> 
> 时间：2012-09-24T15:57:44.147
> 
> 标签：maven, out-of-memory, permgen

我已经阅读了所有类型的解决方案。评论中的[链接](http://frankkieviet.blogspot.ca/2006/10/classloader-leaks-dreaded-permgen-space.html)

[处理“java.lang.OutOfMemoryError: PermGen space”错误](https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error)

是迄今为止我发现的最好的。虽然很复杂。

关键是，我只是用 Maven 编译一个项目就得到了这个错误。

据我所知，到目前为止还没有应用服务器。发生什么了？

我能做什么？

这是我的错误：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:02.743s
[INFO] Finished at: Mon Sep 24 17:48:50 CEST 2012
[INFO] Final Memory: 77M/894M
[INFO] ------------------------------------------------------------------------
---------------------------------------------------
constituent[0]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/aether-a
pi-1.13.1.jar
constituent[1]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/aether-c
onnector-wagon-1.13.1.jar
constituent[2]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/aether-i
mpl-1.13.1.jar
constituent[3]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/aether-s
pi-1.13.1.jar
constituent[4]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/aether-u
til-1.13.1.jar
constituent[5]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/commons-
cli-1.2.jar
constituent[6]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-ae
ther-provider-3.0.4.jar
constituent[7]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-ar
tifact-3.0.4.jar
constituent[8]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-co
mpat-3.0.4.jar
constituent[9]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-co
re-3.0.4.jar
constituent[10]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-e
mbedder-3.0.4.jar
constituent[11]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-m
odel-3.0.4.jar
constituent[12]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-m
odel-builder-3.0.4.jar
constituent[13]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-p
lugin-api-3.0.4.jar
constituent[14]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-r
epository-metadata-3.0.4.jar
constituent[15]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-s
ettings-3.0.4.jar
constituent[16]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/maven-s
ettings-builder-3.0.4.jar
constituent[17]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/plexus-
cipher-1.7.jar
constituent[18]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/plexus-
component-annotations-1.5.5.jar
constituent[19]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/plexus-
interpolation-1.14.jar
constituent[20]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/plexus-
sec-dispatcher-1.3.jar
constituent[21]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/plexus-
utils-2.0.6.jar
constituent[22]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/sisu-gu
ava-0.9.9.jar
constituent[23]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/sisu-gu
ice-3.1.0-no_aop.jar
constituent[24]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/sisu-in
ject-bean-2.3.0.jar
constituent[25]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/sisu-in
ject-plexus-2.3.0.jar
constituent[26]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/wagon-f
ile-2.2.jar
constituent[27]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/wagon-h
ttp-2.2-shaded.jar
constituent[28]: file:/C:/Program%20Files%20(x86)/apache-maven-3.0.4/lib/wagon-p
rovider-api-2.2.jar
---------------------------------------------------
Exception in thread "main" java.lang.OutOfMemoryError: PermGen space 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T16:08:00.170

请 [在 Maven 构建中查看这个问题：“java.lang.OutOfMemoryError: PermGen space”](https://stackoverflow.com/questions/3101128/java-lang-outofmemoryerror-permgen-space)

（或者）

请参阅此链接：http: [//vikashazrati.wordpress.com/2007/07/26/quicktip-how-to-increase-the-java-heap-memory-for-maven-2-on-linux/](http://vikashazrati.wordpress.com/2007/07/26/quicktip-how-to-increase-the-java-heap-memory-for-maven-2-on-linux/)

> 如果您在执行 mvn 站点时收到错误 OutOfMemory 错误，因为您正在生成所有报告，只需增加 maven2 的堆大小即可。在linux上做到这一点的方法。
> 
> 在您的 mvn.sh 中，将此添加为版权和其他注释之后的第一行。
> 
> 导出 MAVEN_OPTS="-Xmx512m"</p>
> 
> 请注意，从 Maven 2.0.6 开始，一些用户报告双引号会出现问题，因此您可能想要使用
> 
> 导出 MAVEN_OPTS=-Xmx512m

# java - 动态绑定

> ID：12568660
> 
> 赞同：2
> 
> 时间：2012-09-24T15:57:44.987
> 
> 标签：java

我想知道`Dynamic Binding`java的优势。

```
public class Animal {
    public String type = "mammal";

    public void show() {
        System.out.println("The animal is a: " + type);
    }
}
public class Dog extends Animal {  
    public String type;   

    public Dog(String type){  
        this.type = type;  
    }  

    public void show() {  
        System.out.println("The dog is a: " + type);  
    }  
}  

    public static void main(String[] args) {
        Animal doggie = new Dog("daschund");
        doggie.show(); // "The dog is a: daschund"  (dynamic binding)
        System.out.println("The type is: " + doggie.type); //"The type is: mammal" (static binding)
    } 
```

我认为，这是一种继承策略。但是有些人称之为动态绑定。这就是为什么，我认为其中会有什么奇怪的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:02:09.303

它的*好处*是你的行为与你调用它的对象的类型绑定在一起，而你不知道它实际上是什么精确的类型。例如，如果你传递了一个动物，你不知道它是不是猫/狗/什么，但无论如何它都会采取适当的行为。

例如

```
public void makeNoise(List<Animal> animals) {
   for (Animal a : animals) {
      a.makeNoise();
   }
} 
```

以上将针对上述集合中的每只动物进行适当的吠叫、喵叫、叫声等。

我可以向您传递一些东西，并提供它符合所需的动物接口，如果/当我在稍后阶段引入新动物时，您的代码将继续工作。您的代码不需要知道`Dog`吠叫的机制——只需通过适当的方法指示该行为即可。

注意：我认为通过创建`Animal`一个抽象类，您上面的示例会更清楚。这样，您的行为将主要来自派生的具体类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:06:41.320

1.  Java 中的静态绑定发生在编译时，而动态绑定发生在运行时。
2.  私有、最终和静态方法和变量使用静态绑定并由编译器绑定，而虚拟方法在运行时根据运行时对象绑定。
3.  静态绑定使用类型（Java 中的类）信息进行绑定，而动态绑定使用对象来解析绑定。
4.  重载的方法使用静态绑定进行绑定，而重写的方法在编译时进行绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:08:07.080

你举了一个简单的继承和多态的例子。类`Dog`扩展`Animal`覆盖其方法`show()`。这意味着`show()`被调用的具体实现是在运行时确定的，并且取决于具体的动物类型。

这允许程序员通过接口创建不依赖于具体实现的逻辑。在您的情况下`Dog`，`Cat`可以提供不同的实现，`show()`但调用者可以`show()`在不知道具体动物类型的情况下使用它。

# django - Django：可定制的模板

> ID：12568661
> 
> 赞同：3
> 
> 时间：2012-09-24T15:57:45.883
> 
> 标签：django, templates, user-profile

我正在创建一个门户网站，我想为用户提供更改配置文件/仪表板的功能，例如更改背景。等等。有人可以指导我采用一种有效的方法来实现这一目标吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:09:51.547

这是与 css 和 javascript 相关的技巧，而不是 django 模板。

这里唯一与 django 相关的是这些首选项的实际存储。

例如实际背景图像的文件路径。

之后，您将执行类似于此答案中描述的操作：

[如何动态更改html背景](https://stackoverflow.com/questions/1194450/how-to-change-html-background-dynamically)

**编辑**

我不明白为什么每个用户都需要不同的目录。Django 模板为您提供了足够的能力来做您想做的事。

例如，假设每个用户都可以上传自己的背景图片。此外，我假设您遵循这种流行的 django 模式来存储有关您的用户的其他信息。[https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

所以我们有这个`UserProfile`模型：

```
class UserProfile(models.Model):
    CHOICES = (
        ('vertical', 'Vertical'),
        ('horizontal', 'Horizontal'),
    )
    user = models.OneToOneField(User)
    background_image = models.ImageField(upload_to='images')
    dashboard_layout  = models.CharField(max_length=10, choices=CHOICES) 
```

您可以将此额外信息传递给您的 javascript 上下文（使用或不使用 Ajax），然后更改每个用户的背景图像。

我们也可以像这样在模板级别进行特殊布局：

```
{% extends "base.html" %}
{% block main_body %}
    {% if request.user.get_profile.dashboard_layout == 'vertical' %}
        {% include "layouts/vertical.html" %}
    {% else %}
        {% include "layouts/horizontal.html" %}
    {% endif %}
{% endblock main_body %} 
```

# numpy - 准备数据以在 Matplotlib 的底图中绘制轮廓

> ID：12568673
> 
> 赞同：3
> 
> 时间：2012-09-24T15:58:51.950
> 
> 标签：numpy, plot, matplotlib, contour, matplotlib-basemap

我很难用 Matplotlib 绘制底图，而且我对它还很陌生，所以我希望能得到一些帮助。

我有以下格式的数据：

```
[ (lat1, lon1, data1), 
  (lat2, lon2, data2),
  (lat3, lon3, data3),
  ...
  (latN, lonN, dataN) ] 
```

这是一些示例数据：

```
(32.0, -128.5, 3.99)
(31.0, -128.0, 3.5027272727272734)
(31.5, -128.0, 3.7383333333333333)
(32.0, -128.0, 3.624)
(32.5, -128.0, 3.913157894736842)
(33.0, -128.0, 4.443333333333334) 
```

最后，这里有一些关于我计划绘制的数据的基本统计数据：

```
LAT MIN:  22
LAT MAX:  50
LAT LEN:  1919
LON MIN:  -128
LON MAX:  -97
LON LEN:  1919
DATA MIN: 0
DATA MAX: 12
DATA LEN:  1919 
```

我需要在美国大陆的底图上绘制等高线图。对于我的一生，我似乎无法弄清楚如何设置数据以进行绘图。

我读到 X 轴 (LATS) 需要是 np.array，Y 轴 (LONS) 需要是 np.array，并且 Z (DATA) 需要是 MxN 矩阵，其中 M = len(LATS ) 和 N = len(LONS)。所以对我来说，我将 Z 视为对角矩阵，其中对角线包含对角线上的数据，即在 DATA 中找到的值对应于 LATS 和 LONS 的索引。

这是我的代码：

```
def show_map(self, a):

    a = sorted(a, key = lambda entry: entry[0])     # sort by latitude
    a = sorted(a, key = lambda entry: entry[1])     # then sort by longitude

    lats = [ x[0] for x in a ]
    lons = [ x[1] for x in a ]
    data = [ x[2] for x in a ]

    lat_min = min(lats)
    lat_max = max(lats)
    lon_min = min(lons)
    lon_max = max(lons)
    data_min = min(data)
    data_max = max(data)

    x = np.array(lats)
    y = np.array(lons)
    z = np.diag(data)

    m = Basemap(
        projection = 'merc',
        llcrnrlat=lat_min, urcrnrlat=lat_max,
        llcrnrlon=lon_min, urcrnrlon=lon_max,
        rsphere=6371200., resolution='l', area_thresh=10000
        lat_ts = 20, resolution = 'c'
    )

    fig = plt.figure()
    plt.subplot(211)
    ax = plt.gca()

    # draw parallels
    delat = 10.0
    parallels = np.arange(0., 90, delat)
    m.drawparallels(parallels, labels=[1,0,0,0], fontsize=10)

    # draw meridians
    delon = 10.
    meridians = np.arange(180.,360.,delon)
    m.drawmeridians(meridians,labels=[0,0,0,1],fontsize=10)

    # draw map features
    m.drawcoastlines(linewidth = 0.50)
    m.drawcountries(linewidth = 0.50)
    m.drawstates(linewidth = 0.25)

    ny = z.shape[0]; nx = z.shape[1]        # make grid
    lo, la = m.makegrid(nx, ny)
    X, Y = m(lo, la)
    clevs = [0,1,2.5,5,7.5,10,15,20,30,40,50,70,100,150,200,250,300,400,500,600,750]
    cs = m.contour(X, Y, z, clevs)

    plt.show() 
```

然而，我得到的情节是：http: [//imgur.com/li1Wg](http://imgur.com/li1Wg)。我需要一些东西来达到这个效果： http: [//matplotlib.org/basemap/_images/plotprecip.png](http://matplotlib.org/basemap/_images/plotprecip.png)

有人可以指出我做错了什么并帮助我绘制这个吗？谢谢你。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:31:08.800

我想出了怎么做。这是我最终写的代码，我认为这可以帮助其他用户。如果有更好的方法，请说明，因为我是 Matplotlib 的新手。

[https://gist.github.com/3789221](https://gist.github.com/3789221)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T15:52:45.463

您的链接要点是一个解决方案，但在另一个地方仍然是错误的。

在您的问题和链接的要点中，您将 x 和 y 坐标与 lon 和 lat 进行了切换。

x 代表 lon

y 代表纬度

因此，您的链接要点仍然会得到错误的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:14:46.727

你为什么要写：

```
z = np.diag(data) 
```

从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diag.html)中，`numpy.diag(v, k=0)`提取对角线或构造对角线数组。这应该就是为什么你只得到一个“对角线区域”的价值......

# c# - 具有多种泛型类型的 C# 函数调用

> ID：12568674
> 
> 赞同：3
> 
> 时间：2012-09-24T15:58:53.823
> 
> 标签：c#, generics

我知道我可以调用通用扩展方法

```
public static object Convert<U>(this U value) 
```

像这样（`<Class1>`不需要）：

```
Class1Instance.Convert() 
```

但是有没有办法调用：

```
public static T Convert<U, T>(this U value) 
  where T : Class1, Interface1, new()
  where U : Class1, Interface2, new()
{
  /******/
} 
```

用`Class1Instance.Convert<Class2>()`“只”代替`Class1Instance.Convert<Class1, Class2>()`

谢谢，

**编辑 ：**

重新制定/简化：有没有办法：

```
Result result = Convert<Result>(input); 
```

我们知道 Input 类型的输入，而不是不得不说

```
Result result = Convert<Input, Result>(input) 
```

使用如下所示的扩展方法：

```
static TResult Convert<TResult, TInput>(this TInput Input) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:15:44.970

无法通过在调用代码中`Convert<U, T>`指定来调用。`Convert<Class2>`但是，如果您真的希望调用代码看起来像那样，则有可能。

```
public static T Convert<T>(this Class1 value) 
  where T : Class1, IClass1, new()
{ ... } 
```

而不是在输入类型上通用，只需指定输入类型的父类。这将为您提供所需的调用代码，但会使方法更加复杂。例如，如果转换过程涉及创建一个新`U`对象（利用`new()`旧方法定义中的通用约束），那么您必须在新方法中使用反射来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:11:40.983

根据[这篇文章](https://stackoverflow.com/questions/9354288/c-why-doesnt-generic-type-inference-work-when-there-are-multiple-type-argumen)，泛型参数推断仅适用于输入参数。就我而言，通用参数之一是返回类型。

由于泛型类型推断需要提供所有这些，因此我必须明确指定每个参数。

# jquery - jQuery TableTools 按钮未加载

> ID：12568682
> 
> 赞同：2
> 
> 时间：2012-09-24T15:59:16.267
> 
> 标签：jquery, datatables, tabletools

我正在尝试添加到已经使用插件`tableTools`的现有表中。按钮不加载。这是我的代码：`DataTable``tableTools`

```
var dataTableOptions = {
  "sScrollY":   "475px",
  "bAutoWidth": true,
  "bSort":      true,
  "bPaginate":  true,
  "sPaginationType": "full_numbers",
  "bFilter":    true,
  "bInfo":      true,
  "bJQueryUI":  true,
  "sDom": '<"clear">lfrtip',
  "oTableTools": {"sSwfPath": appPath + "/swf/copy_csv_xls_pdf.swf"}
};

$j("#movementsResults table").dataTable(dataTableOptions); 
```

该`dataTable`部分完全工作，但`tableTools`似乎没有工作。我确保所有文件路径都是正确的，包括`.swf`路径，我只是找不到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:59:02.667

运行开发者工具后出现错误：

SCRIPT5009：“ZeroClipboard_TableTools”未定义 TableTools.js，第 1293 行字符 3

在谷歌搜索以找出 ZeroClipboard 到底是什么之后，我发现我需要单独包含该 JS 文件，因为它试图调用在其中创建的函数。这样做之后，按钮开始起作用，现在只需对它们进行样式设置即可。

谢谢你们的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:29:22.560

尝试：

```
"sDom": 'Tlfrtip' 
```

另外，您是否验证了 appPath 变量是否正确？也许将此添加到您的代码中并检查控制台以验证您没有额外的斜杠或其他东西：

```
console.log(appPath + "/swf/copy_csv_xls_pdf.swf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T12:29:35.473

需要在 sDom 中使用 T 对其进行初始化： "sDom": '<"clear">lfrtipT',

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T00:24:46.687

您必须使用来自 DataTables/DataTools 项目的[ZeroClipboard.js](https://github.com/DataTables/TableTools/blob/master/src/ZeroClipboard.js)，而不是来自 ZeroClipboard 项目的那个。它们非常不同。

# java - 如何在一个列表中包含基类和子类的实例？

> ID：12568686
> 
> 赞同：0
> 
> 时间：2012-09-24T15:59:27.410
> 
> 标签：java, generics

我目前面临基类和子类的问题。

虽然将单个对象作为参数（方法单一），但编译器不会抱怨。

但是，如果涉及到列表，编译器会强制我将列表声明为`<? extends Base>`

之后，我不再被允许将基本类型的对象添加到该列表中。

如何在一个列表中同时使用两种类型（基类和子类）？

```
public class Generics {

    class Base {    }

    class Sub extends Base{     }

    interface I {
        public void list( List<Sub> list );
        public void single( Sub p);
    }

    class C implements I {
        public void list( List<Sub> list) {     }
        public void single( Sub p) {        }
    }

    void test() {
        C c = new C();
        c.single( new Sub() );
        c.list( new ArrayList<Base>() ); // The method list(List<Generics.Sub>) in the type Generics.C is not applicable for the arguments (ArrayList<Generics.Base>)

    }

    public static void main( String[] args) {
        Generics g = new Generics();
        g.test();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:15:24.003

改变：

```
public void list(List<Sub> list); 
```

至：

```
public void list(List<? extends Base> list); 
```

使用 just`List<Base>`会给你这样的编译器错误：

```
public static void main(String[] args) {
    List<Sub> subs = new ArrayList<Sub>();
    doSomethingWith(subs); // The method doSomethingWith(List<Base>) in the type Main is not applicable for the arguments (List<Sub>)
}

private static void doSomethingWith(List<Base> bases) {
    // Do something with bases
} 
```

如果您要传递的只是`List<Base>`to `doSomethingWith`，那么这一点没有实际意义，因为这不会给您带来编译器错误。如果要传递特定类型的列表（例如`List<Sub>`上面），则需要更改`doSomethingWith`为：

```
private static void doSomethingWith(List<? extends Base> bases) { 
```

这解决了问题。您也可以在调用者控制杆上执行此操作（但有点混乱）：

```
 List<Sub> subs = new ArrayList<Sub>();
    doSomethingWith(new ArrayList<Base>(subs)); 
```

通配符 ( ) 方法的一个问题`?`是您无法将新项目添加到列表中。为此，您需要以下内容：

```
private static <B extends Base> void doSomethingWith(List<B> bases) { 
```

然后仅将`B`实例添加到`bases`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:01:23.823

只需将所有列表声明为

```
List<Base> list; 
```

然后您可以添加`Base`任何子类的对象和对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:24:41.063

以下是2种方法来做到这一点......

```
public void inTake(List<? extends Base> list){

} 
```

**或者**

```
public T extends Base void inTake(List<T> list){

} 
```

# java - 单击提交按钮继续到java中的下一个事件或动作

> ID：12568687
> 
> 赞同：0
> 
> 时间：2012-09-24T15:59:30.250
> 
> 标签：java, jbutton

我在这里尝试做的是我正在尝试创建一个类似测验的游戏，用户可以在其中猜测图片中的人。如果每当我单击提交按钮并且用户正确猜测图片时，我会想要它。它应该进入下一个问题。我试过使用数组，但我不知道把语法放在哪里。我很困惑。另外，我尝试过使用多态性。但每次我点击提交按钮。下一张图片显示，但分数和错误会消失。-_-

这是我的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Second extends JFrame{

    private int number, score;
    private String answer;
    private String[] answers;
    private ImageIcon[] questions;

    private JLabel lblQuestion, lblMistakes, lblScore;
    private JButton btnSubmit;
    private SubmitButtonHandler sbhandler;
    private JTextField txtAnswer;

    public Second(){

        setTitle("Guess Who");

        btnSubmit = new JButton("Submit");
        sbhandler = new SubmitButtonHandler();
        btnSubmit.addActionListener(sbhandler);

        txtAnswer = new JTextField(20);
        txtAnswer.setFont(new Font("Tekton Pro Ext", Font.BOLD, 20));
        txtAnswer.setHorizontalAlignment(JTextField.CENTER);

        lblMistakes = new JLabel("", JLabel.CENTER);
        lblMistakes.setForeground(Color.blue);
        lblMistakes.setFont(new Font("Tekton Pro Ext", Font.BOLD, 30));
        lblMistakes.setOpaque(true);

        lblScore = new JLabel("", JLabel.CENTER);
        lblScore.setForeground(Color.white);
        lblScore.setBackground(Color.black);
        lblScore.setFont(new Font("Tekton Pro Ext", Font.BOLD, 30));
        lblScore.setOpaque(true);

        questions = new ImageIcon[10];

        questions[1] = new ImageIcon("C:\\Users\\ACER\\Desktop\\mario.jpeg");
        questions[2] = new ImageIcon("C:\\Users\\ACER\\Desktop\\ss.jpg");
        questions[3] = new ImageIcon("C:\\Users\\ACER\\Desktop\\dora.jpg");
        questions[4] = new ImageIcon("C:\\Users\\ACER\\Desktop\\vegeta.jpg");
        questions[5] = new ImageIcon("C:\\Users\\ACER\\Desktop\\kirby.jpg");

        lblQuestion = new JLabel(questions[1]);
        lblQuestion.setFont(new Font("Tekton Pro Ext", Font.BOLD, 18));

        Container pane = getContentPane();

        pane.setLayout(new GridLayout(5,1));

        pane.add(lblQuestion);
        pane.add(txtAnswer);
        pane.add(btnSubmit);
        pane.add(lblScore);
        pane.add(lblMistakes);

        setBounds(500,200,500,500);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

    }

private class SubmitButtonHandler implements ActionListener{

    public void actionPerformed(ActionEvent e){

        answers = new String[10];

        answers[1] = "Mario";
        answers[2] = "Spongebob Squarepants";
        answers[3] = "Dora the Explorer";
        answers[4] = "Vegeta";
        answers[5] = "Kirby";

        if(txtAnswer.getText().equalsIgnoreCase(answers[1])){
            JOptionPane.showMessageDialog(null, "You got the correct answer.");
            number = number;
            score = score + 1;
            lblScore.setText("Score: " + Integer.toString(score));
            txtAnswer.setText("");
            txtAnswer.requestFocusInWindow();

        }else{
            number = number + 1;
            lblMistakes.setText("Mistakes: " + Integer.toString(number));
            txtAnswer.setText("");

            if(number == 1){
                JOptionPane.showMessageDialog(null, "Try again.");
                lblMistakes.setBackground(Color.yellow);
                txtAnswer.requestFocusInWindow();
            }else if(number == 2){
                lblMistakes.setBackground(Color.orange);
                JOptionPane.showMessageDialog(null,"Careful. You only have one chance.");
                txtAnswer.requestFocusInWindow();
            }else if(number == 3){
                lblMistakes.setBackground(Color.red);
                JOptionPane.showMessageDialog(null,"Game Over.");
                dispose();
                Second s = new Second();
            }

        }
        }

    }

public static void main(String[]args){

    Second s = new Second();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:12:09.370

您正在`actionPerformed`方法中分配名称，但最好将它们移动到`init()`方法中。此外，an`ArrayList`将为您提供比固定大小的数组更多的灵活性。作为额外的奖励，您可以使用`Collections.shuffle()`随机选择一个用户进行下一次猜测。

`Second`一旦游戏结束，您正在创建一个新对象，分数​​和错误就会消失。最好重用您已有的实例并根据需要隐藏/显示组件。

# python - Python - 要求输入，从文件中提取数据

> ID：12568689
> 
> 赞同：0
> 
> 时间：2012-09-24T15:59:34.133
> 
> 标签：python, python-2.7

我是python（第2天）的新手，正在解决一个问题，要求我编写一个读取ASCII文件的程序（要求文件名作为输入），检查它是否有两个以上的单词并打印出前两个单词屏幕上的文件。

它有点模糊，但我会假设文件都是 str，用空格分隔。

前任。

```
text1 text2 text text text 
```

到目前为止，我有：

```
name = (raw_input("Please enter the name of the file: "))
f=open(name)
with codecs.open(name, encoding='utf-8') as f:
    for line in f:
        line = line.lstrip(BOM)
words=line.split()
print words
if len(words) > 2:
    print 'There are more than two words'
    firsttow = words[:2]
    print firstrow 
```

我在编写 else 语句时遇到问题，我想要，

```
if len(words) > 2:
    print 'There are more than two words'
    firsttow = words[:2]
print firstrow
else: 
if len(words) <2:
        print 'There are under 2 words, no words will be shown' 
```

应该如何添加它，还有其他方法可以改进我的代码来解决这个问题吗？我非常感谢您的帮助

提前致谢

*编辑：感谢所有帮助，我遇到的最后一个问题是当我运行 .py 文件时，我希望能够在 cmd 窗口关闭之前看到结果。

添加：`raw_input("Press return to close this window...")`不起作用，它会立即关闭。有任何想法吗？

Edit2* 这是我当前的代码，仍在尝试打开 cmd 窗口

```
import codecs
BOM = codecs.BOM_UTF8.decode('utf8')
name = (raw_input("Please enter the name of the file: "))

with codecs.open(name, encoding='utf-8') as f:
    words=[]            #define words here
    for line in f:
        line = line.lstrip(BOM)
        words.extend(line.split())        #append words from each line to words  

if len(words) > 2:
    print 'There are more than two words'
    firstrow = words[:2]
    print firstrow                #indentation problem here
elif len(words) <2:                    #use if
    print 'There are under 2 words, no words will be shown'

raw_input("Press return to close this window...") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:02:01.810

该代码应写为：

```
if len(words) > 2:
    print 'There are more than two words'
    firsttow = words[:2]
    print firstrow
elif len(words) <2:
    print 'There are under 2 words, no words will be shown' 
```

注意缩进和使用`elif`（意思是“else if”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:06:22.450

```
with codecs.open(name, encoding='utf-8') as f:
    words=[]            #define words here
    for line in f:
        line = line.lstrip(BOM)
        words.extend(line.split())        #append words from each line to words      

if len(words) > 2:
    print 'There are more than two words'
    firsttow = words[:2]
    print firstrow                #indentation problem here
if len(words) <2:                    #use if
    print 'There are under 2 words, no words will be shown' 
```

# javascript - 行编辑似乎不会更新底层存储

> ID：12568691
> 
> 赞同：0
> 
> 时间：2012-09-24T15:59:37.597
> 
> 标签：javascript, rally

继续我的应用程序，其目的是能够编辑聚合字段并将计算结果存储在另一个字段中该聚合的各个组件上......

我现在可以使用 UserStory 模型的扩展正确检索我的字段，但我仍然无法保存我的更改。我试图检查 Ext.grid.plugin.RowEditing 的编辑事件中做了什么，我注意到当我到达它时， e.store.data.items[rowIdx].data 包含我所有的预期值，它的脏和编辑标志是错误的，但 e.store.data.items[rowIdx].raw 没有反映这一点（它包含拉力赛的原始值，未修改） - 即使我尝试编辑原始值，它也不起作用：

```
plugins: [
    Ext.create('Ext.grid.plugin.RowEditing', {
        clicksToEdit: 1,
        listeners: {
            'edit': function (editor, e) {
                e.store.data.items[e.rowIdx].raw.BusinessValues =
                    e.store.data.items[e.rowIdx].data.BusinessValues;

                e.store.commitChanges();
            }
        }
    })
] 
```

整个代码如下，但我想知道是否应该在模型级别添加一个监听器？

```
Rally.onReady(function() {
    Ext.define('BVApp', {
        extend: 'Rally.app.App',
        componentCls: 'app',
        launch: function() {
            Rally.data.ModelFactory.getModel({
            type: 'UserStory',
            success: function(model) {
                var weights = new Array(5, 3, 1, 3, 4, 4, 2, 2);
                var BvTitles = new Array("Customers Impact", "Critical Path", "Usability", "Functionality", "Security", "Performance", "Integration", "Integrity", "Business Value");
                //var BvTitlesFrench = new Array("Parc Client", "Chemin Critique", "Ergonomie", "Fonctionnalité", "Sécurité", "Performance", "Intégration", "Intégrité", "Valeur Métier");

                // Thanks to question http://stackoverflow.com/questions/12517383/sdk2-links-in-rally-grids-and-column-width I can now remove flex from FormattedID column...
                var fixedIDwithLink = Rally.ui.grid.FieldColumnFactory.getColumnConfigFromField( model.getField( 'FormattedID' ) );
                fixedIDwithLink.flex = false;
                fixedIDwithLink.width = 70;

                function getOneBV( record, pos, newValue ) {
                    var ls_BvFieldStart, ls_BvFieldEnd, ls_BvFromBvField;
                    if ( pos < 1 ) return newValue; // ERROR in fact...
                    if ( pos > 8 ) return newValue;
                    ls_BvFieldStart = record.data.BusinessValues.substring( 0, pos-1 );
                    ls_BvFromBvField = record.data.BusinessValues.substring( pos-1, pos );
                    ls_BvFieldEnd = record.data.BusinessValues.substring( pos, 8 );
                    if ( newValue ) {
                        ls_BvFromBvField = newValue;
                        record.data.BusinessValues = ls_BvFieldStart + ls_BvFromBvField + ls_BvFieldEnd;
                    }
                    return ls_BvFromBvField;
                }
                function getbv( as_bvHolder ) {
                    var li_bv1, li_bv2, li_bv3, li_bv4, li_bv5, li_bv6, li_bv7, li_bv8, li_bvtotal;
                    li_bv1 = as_bvHolder.substring( 0,1 );
                    li_bv2 = as_bvHolder.substring( 1,2 );
                    li_bv3 = as_bvHolder.substring( 2,3 );
                    li_bv4 = as_bvHolder.substring( 3,4 );
                    li_bv5 = as_bvHolder.substring( 4,5 );
                    li_bv6 = as_bvHolder.substring( 5,6 );
                    li_bv7 = as_bvHolder.substring( 7,8 );
                    li_bv8 = as_bvHolder.substring( 8,9 );
                    li_bvtotal =
                        li_bv1*weights[0] +
                        li_bv2*weights[1] +
                        li_bv3*weights[2] +
                        li_bv4*weights[3] +
                        li_bv5*weights[4] +
                        li_bv6*weights[5] +
                        li_bv7*weights[6] +
                        li_bv8*weights[7];
                    return li_bvtotal;
                }

                this.grid = this.add({
                    xtype: 'rallygrid',
                    model: Ext.define('BVModel', {
                        extend: model,
                        alias : 'BVModel',
                        fields: [
                            {name: 'Bv1', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 1, v ); }
                            },
                            {name: 'Bv2', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 2, v ); }
                            },
                            {name: 'Bv3', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 3, v ); }
                            },
                            {name: 'Bv4', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 4, v ); }
                            },
                            {name: 'Bv5', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 5, v ); }
                            },
                            {name: 'Bv6', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 6, v ); }
                            },
                            {name: 'Bv7', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 7, v ); }
                            },
                            {name: 'Bv8', type: 'string', persist: false,
                                convert: function(v, record){ return getOneBV( record, 8, v ); }
                            },
                            {name: 'BvTotal', type: 'string', persist: false,
                                convert: function( v, record ) {
                                    var ls_scoreInfo = '';
                                    if ( record.data.BusinessValues ) {
                                        ls_scoreInfo = getbv( record.data.BusinessValues ) + ' ';
                                    }
                                    if ( record.data.Score ) {
                                        ls_scoreInfo += '(previous: ' + record.data.Score + ')';
                                    }
                                    return ls_scoreInfo;
                                }
                            }
                        ]
                    }),
                        storeConfig: {
                            pageSize: 30, autoLoad: true, filters: [
                                {
                                    property: 'ScheduleState',
                                    operator: '=',
                                    value: 'Backlog'
                                }
                                //,{ property: 'FormattedID', value: 'US85792' } // US85792, US84529, US81387, US77032
                            ],
                            context: this.getContext().getDataContext()
                        },
                    columnCfgs: [
                        fixedIDwithLink, // might want to add a select listener later to display details in a child pane ?
                        'Name',
                        'BusinessValues',
                        'AffectedCustomers',
                        {
                            text: BvTitles[0], dataIndex: 'Bv1', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[1], dataIndex: 'Bv2', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[2], dataIndex: 'Bv3', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[3], dataIndex: 'Bv4', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[4], dataIndex: 'Bv5', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[5], dataIndex: 'Bv6', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[6], dataIndex: 'Bv7', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[7], dataIndex: 'Bv8', editor: { xtype: 'textfield' }, width: 70
                        },
                        {
                            text: BvTitles[8], dataIndex: 'BvTotal', editor: { xtype: 'textfield' }
                        }
                    ],
                    selType: 'rowmodel',
                    plugins: [
                        Ext.create('Ext.grid.plugin.RowEditing', {
                            clicksToEdit: 1,
                            listeners: {
                                'edit': function (editor, e) {
                                    e.store.data.items[e.rowIdx].raw.BusinessValues = e.store.data.items[e.rowIdx].data.BusinessValues;
                                    e.store.commitChanges();
                                }
                            }
                        })
                    ]
                });

                }, // end of getModel success
                scope: this
            });
        }
    });

    Rally.launchApp('BVApp', {
        name: 'Business Values App'
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:34:40.250

我的建议是使用记录对象的 get & set 函数来检索和更改数据，而不是挖掘“数据”或“原始”字段。这样，Ext 库可以更好地管理更改以正确更新存储/记录。

因此，当您想要获取“BusinessValues”字段的值时，请使用`record.get('BusinessValues')`. 同样，尝试`record.set('BusinessValues', newValue)`在 getOneBV 函数中设置新值。在执行此操作时，您可能能够注释掉您添加的 RowEditing 插件。

# cuda - 动态检测启用了 CUDA 的 NVIDIA 卡，然后才初始化 CUDA 运行时：怎么办？

> ID：12568692
> 
> 赞同：5
> 
> 时间：2012-09-24T15:59:42.653
> 
> 标签：cuda, gpu, cpu, gpgpu

我有一个应用程序，它有一个算法，用 CUDA 加速。它还有一个标准的 CPU 实现。我们计划针对各种平台发布此应用程序，因此大多数情况下，不会有 NVIDIA 卡来运行加速的 CUDA 代码。我想要的是首先检查用户的系统是否具有启用 CUDA 的 NVIDIA 卡，如果有，则在之后初始化 CUDA 运行时。如果系统不支持CUDA，那么我要执行CPU路径。[这个](https://stackoverflow.com/questions/10043974/how-to-run-my-cuda-application-on-ati-or-intel-card-in-software-mode)问题与我的非常相似，但我不想使用普通 CUDA 运行时以外的任何其他库。OpenCL 是一种替代方案，但没有足够的时间为第一个版本实现该算法的 OpenCL 版本。如果没有任何 CUDA 存在检查，程序肯定会崩溃，因为它找不到 CUDA 运行时所需的 .dll，我们当然不希望这样。所以，我需要关于如何处理这个初始化步骤的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T17:17:10.727

使用调用`cudaGetDeviceCount`和`cudaGetDeviceProperties`查找正在运行的系统上的 CUDA 设备。首先找出有多少，然后遍历所有可用的设备，并检查属性以确定哪些符合条件。我所说的“合格”取决于您的申请。您是否需要一定的计算能力？还是需要一定的内存？如果有多个设备，您可能希望根据某些条件进行排序，然后设置设备`cudaSetDevice`。如果没有设备，或者没有足够的设备，则回退到 CPU 代码路径。

我还建议使用一些机制来强制关闭 CUDA 模式，以防某些用户的环境由于驱动程序问题、旧板或其他原因而无法正常工作。您可以使用命令行选项、环境变量或其他任何...

编辑：关于 D​​LL，您应该将 cudart[whatever].dll 与您的应用程序一起打包。这将确保程序启动，并且至少 CUDA 查询功能将运行。

# java - SOAP Web 服务概念。（来自 WSDL 的 Java 或来自 Java 的 WSDL）

> ID：12568695
> 
> 赞同：3
> 
> 时间：2012-09-24T15:59:55.210
> 
> 标签：java, soap, wsdl, cxf, axis2

我正在一个我们开发一些网络服务的项目中工作。我是这项技术的新手，所以我并没有真正质疑某些做法。但是现在过了一段时间，我的脑海里仍然有一个很大的问题。

设计 Web 服务的常用方法是什么？

*   是否应该**从 wsdl**合同生成 java 类，**并附带 xsd 模式文件**（多个第三方和我们已经讨论了 wsdl 和 xsd）。

*   如果 java 类是从**没有任何附带 xsd 模式文件**的 wsdl 契约生成的，则类型定义应该包含在 wsdl.xml 文件中。（我猜这将成为维护的噩梦）

*   wsdl 是否应该从我们设计**的 java 类中生成。**

我想知道这一点，因为目前，我们很难从 Axis2 中堆叠的 Web 服务公开的 wsdl 创建存根。这些是我们在 META-INF 中提供的 wsdl，Axis2 做了一些非常细微的修改，它基本上是由第三方建立的。

我想知道：如果 wsdl 是从我们的 Java 类中生成的，那不是更合乎逻辑吗？

例如**，我**也感到震惊的是，我们无法拥有正确的节点位置

```
<wsdl:service name="myEntry">
<wsdl:port name="myport_http" binding="ns1:myBinding">
<soap12:address location="our.development.machine.ipaddress"> 
```

由于它在我们的 .war 文件中作为 META-INF 提供，因此它不能与运行 Web 服务的生产机器同步。我们无法猜测它将运行的机器的 IP 地址。

有什么建议吗？链接到文档？最佳实践？

# regex - Perl 正则表达式修改文件名

> ID：12568699
> 
> 赞同：0
> 
> 时间：2012-09-24T16:00:01.933
> 
> 标签：regex, perl

我正在尝试删除文件名的 Ist 部分和最后一部分。我有一个文件名，比如 `/external/prop/new/test/File.Name.will.BE.this.extension.date` 我想删除目录的第一部分（`/external`）和文件扩展名的最后部分（`.date`），所以我的输出文件名是`/prop/new/test/File.Name.will.BE.this.extension`

例如：

*   旧文件名： `/external/prop/new/test/FACL.Prop.for.BBG.txt.09242012`
*   新文件名：`/prop/new/test/FACL.Prop.for.BBG.txt`

*   旧文件名：`/external/prop/old/test/set2/FACL.Prop.FITCH.csv.09242012`

*   新文件名： `/prop/old/test/set2/FACL.Prop.FITCH.csv`

我试过类似的东西

```
my($FinalName, $Finalextension) = split /\.(?!.*\.)/, substr($Fname,$Flength); 
```

但这不是很有帮助。

`/external`将始终保持不变，但日期总是会有所不同，我不能只删除数字，因为 .extension 可以是数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:12:10.110

```
$Fname =~ s|^/external||;  # Remove leading "external" from path
$Fname =~ s|\.\d{8}$||;    # Remove date from end of filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:03:55.240

```
my $qfn = '/external/prop/new/test/FACL.Prop.for.BBG.txt.09242012';
$qfn =~ s{\.[^.]*\z}{};  # Remove last "extension".
$qfn =~ s{^/[^/]+}{};    # Remove first part of path. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:15:20.273

试试这个捕获你需要的文本的正则表达式`$1`：

```
^\/[^/]+(.*?)\.\d{8}$ 
```

这假设您的日期始终是 8 个数字。您可以用`\d{8}`适当的日期正则表达式替换最后一个。

这可以在[RegExr here](http://regexr.com?328m4)中进行测试。

**正则表达式分解：**

*   `^\/`匹配行首后跟正斜杠（转义）
*   `[^/]+`匹配所有文本，直到找到下一个正斜杠（标记结束`/external`）
*   `(.*?)`匹配并非贪婪地捕获您需要的所有文本，直到找到模式的最后一个
*   `\.\d{8}$`匹配最后一个句点，后跟 8 位日期，然后是行尾

# android - Android 资产：我应该使用多少个加载线程？

> ID：12568701
> 
> 赞同：2
> 
> 时间：2012-09-24T16:00:06.990
> 
> 标签：android, multithreading, assets

我正在后台从我的`assets/`. 我在网上找到了几个解决方案，但他们为每张图片启动了一个新的后台任务。

由于我发现它更易于理解，我将其更改为只有一个具有生产者/消费者模式的加载线程。`BlockingQueue`我对来自 UI 线程的请求使用s 并`publishProgress`做出响应。

我的解决方案运行良好，但它让我想知道如果我使用多线程是否会更好。我的代码支持请求失效，但它总是会在处理新请求之前完成当前正在执行的加载。

另一方面：线程不竞争磁盘访问吗？

我的代码：

```
package org.example;

import android.content.ContextWrapper;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import android.os.AsyncTask;

import android.util.Pair;
import android.widget.ImageView;

import com.google.common.collect.ImmutableList;
import com.google.common.collect.Maps;
import com.google.common.collect.Ordering;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;

import java.util.Map;
import java.util.UUID;
import java.util.concurrent.PriorityBlockingQueue;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public final class ImageLoader extends AsyncTask<Void, Pair<ImageLoader.SetImageTask, Bitmap>, Void> {

    //~ Static fields/initializers -------------------------------------------------------------------------------------

    private static final Logger L = LoggerFactory.getLogger(ImageLoader.class);

    //~ Instance fields ------------------------------------------------------------------------------------------------

    private final Map<String, Bitmap> cache                 = Maps.newHashMap();
    private final ContextWrapper contextWrapper;
    private final PriorityBlockingQueue<LoadTask> loadTasks =
        new PriorityBlockingQueue<ImageLoader.LoadTask>(1, Ordering.arbitrary());

    /* is changed to invalidate tasks */
    private String uuid = null;

    //~ Constructors ---------------------------------------------------------------------------------------------------

    public ImageLoader(final ContextWrapper contextWrapper) {
        this.contextWrapper     = contextWrapper;
        this.uuid               = UUID.randomUUID().toString();
    }

    //~ Methods --------------------------------------------------------------------------------------------------------

    public void invalidateTasks() {
        L.debug("invalidating tasks");
        this.uuid = UUID.randomUUID().toString();
    }

    public void setImage(final ImageView view, final String asset) {
        this.loadTasks.add(new SetImageTask(this.uuid, view, asset));
    }

    public void loadIntoCache(final ImmutableList<String> assets) {
        for (final String asset : assets) {
            this.loadTasks.add(new LoadIntoCacheTask(asset));
        }
    }

    @SuppressWarnings("unchecked")
    @Override
    protected Void doInBackground(Void... param) {
        try {
            while (true) {

                LoadTask task = this.loadTasks.take();
                if (task instanceof SetImageTask) {

                    SetImageTask setImageTask = (SetImageTask) task;
                    if (setImageTask.uuid.equals(this.uuid)) {

                        Bitmap bitmap = this.loadAsset(setImageTask.asset);
                        if (bitmap != null) {
                            this.publishProgress(Pair.create(setImageTask, bitmap));
                        }
                    } else {
                        L.debug("request for asset '{}' outdated", setImageTask.asset);
                    }
                } else {

                    LoadIntoCacheTask cacheTask = (LoadIntoCacheTask) task;
                    Bitmap bitmap               = this.loadAsset(cacheTask.asset);
                    L.debug("storing in cache: '{}'", cacheTask.asset);
                    cache.put(cacheTask.asset, bitmap);
                }
            }
        } catch (final InterruptedException e) {
            L.debug("interrupted -> exiting");
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Pair<SetImageTask, Bitmap>... results) {

        Pair<SetImageTask, Bitmap> result = results[0];
        if (result.first.uuid.equals(this.uuid)) {
            result.first.view.setImageBitmap(result.second);
        } else {
            L.debug("request for asset '{}' outdated", result.first.asset);
        }
    }

    private Bitmap loadAsset(final String asset) {
        if (this.cache.containsKey(asset)) {
            L.debug("serving from cache '{}'", asset);
            return this.cache.get(asset);

        } else {
            L.debug("loading from assets: '{}'", asset);

            InputStream in = null;
            Bitmap bitmap  = null;
            try {
                in         = new BufferedInputStream(contextWrapper.getAssets().open(asset));
                bitmap     = BitmapFactory.decodeStream(in);
            } catch (final IOException e) {
                L.error(e.getMessage(), e);
            } finally {
                try {
                    in.close();
                } catch (final IOException e) {}
            }

            return bitmap;
        }
    }

    //~ Inner Interfaces -----------------------------------------------------------------------------------------------

    protected static interface LoadTask {}

    //~ Inner Classes --------------------------------------------------------------------------------------------------

    protected static final class SetImageTask implements LoadTask {

        private final String uuid;
        private final ImageView view;
        private final String asset;

        public SetImageTask(final String uuid, final ImageView view, final String asset) {
            this.uuid      = uuid;
            this.view      = view;
            this.asset     = asset;
        }
    }

    protected static final class LoadIntoCacheTask implements LoadTask {

        private final String asset;

        public LoadIntoCacheTask(final String asset) {
            this.asset = asset;
        }
    }
} 
```

# arrays - 移动数组 MIPS 程序集中的元素

> ID：12568708
> 
> 赞同：0
> 
> 时间：2012-09-24T16:00:38.597
> 
> 标签：arrays, assembly, mips

所以我一直在研究一个可以删除数组中重复值的程序。我有它，所以它打印出所有重复的值，我只是不知道如何实际删除它们（将它们向下移动）。这是我到目前为止所拥有的。注意：我的问题是在“壁球”功能

```
 .text
test:
    la  $a0,info    # put address of array in $a0
    li  $a1,8       # put length of array in $a1 (words, not bytes)
    jal squash      # call the function

    la      $s0,info    # get address of array
    move    $s1,$v0     # save size of array
loop:
    ble $s1,$0,done
    lw  $a0,0($s0)  # get the next value from the result array
    li  $v0,1       # print it
    #syscall
    la  $a0,eol     # print end of line
    li  $v0,4
    syscall
    addi    $s1,$s1,-1  # decrement count
    addi    $s0,$s0,4   # advance pointer to next value
    b   loop        # print the next value (if one)

done:
    li  $v0,10      # exit
    syscall

# squash out duplicates
#
# $a0 = address of the first element of the array
# $a1 = the number of values (not bytes) in the array
#
# $v0 set to the number of values after duplicates have been removed
squash:
    move    $s0, $a0 #move address to s0
    move    $s1, $a1 #move size to s1
read:
    ble $s1, $0, donea  # (while x > 0) keep looping
    lw  $t0,0($s0)  # get the next 2 value from the result array
    lw  $t1,4($s0)  
    beq $t0, $t1, shift #Branch if two values are equal 
    b   end_if
end_if:
    addi    $s1,$s1,-1  # decrement count (size of arary)
    addi    $s0,$s0,4   # advance pointer to next value
    b   read

shift:
    lw  $a0, 0($s0)
    li  $v0, 1
    syscall
    addi    $s1,$s1,-1  # decrement count (size of arary)
    addi    $s0,$s0,4   # advance pointer to next value
    b   read

donea:              # end of 1st loop

doneb:              #end of 2nd loop    

    jr  $ra

    .data
eol:    .asciiz "\n"
info:
    .word   1
    .word   2
    .word   2
    .word   4
    .word   7
    .word   7
    .word   7
    .word   9 
```

# c++ - 不允许您使用 :: 来解析枚举的错误的名称是什么？

> ID：12568709
> 
> 赞同：0
> 
> 时间：2012-09-24T16:00:42.650
> 
> 标签：c++, xcode4, enums, compiler-errors

在 C++ 中使用枚举时，我喜欢使用`EnumName::Value`（而不是 just `Value`）。在 C++ 中，这可能是警告或错误，具体取决于编译器设置。

在 XCode 中，让我*不会*将其作为编译器错误出现的设置的名称是什么？

![在此处输入图像描述](../Images/9678f251ffa01af6d1f928c54e54ec9a.png)

（`ErrorLevel::`带走解决了错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:06:22.543

*   如果你使用[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")，你的语法是正确的：

    ```
    enum EnumName
    {
    Value 
    }
    ...
    EnumName n = EnumName::Value; 
    ```

    另请注意，如果您使用[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")，则可以*要求*使用 of`EnumName::Value`而不是仅`Value`通过使用`enum class`instead of `enum`：

    ```
    enum class EnumName
    {
    Value 
    }
    ...
    EnumName n = EnumName::Value; //ok
    EnumName fuuu = Value; // compilation error 
    ```

*   否则，您可以使用命名空间包装您的枚举声明

    ```
    namespace EnumName {
    enum EnumName
    {
    Value 
    }
    }
    ...
    EnumName::EnumName n = EnumName::Value; 
    ```

# java - 关于 OpenLayers 的一些问题

> ID：12568713
> 
> 赞同：0
> 
> 时间：2012-09-24T16:00:50.433
> 
> 标签：java, javascript, openlayers

我正在研究 OpenLayers 以将此库应用于我的 Java Web 应用程序。我刚刚使用它 2 周，有一些问题我还没有找到解决方案？请您花点时间帮我解决以下问题：
1.如何发送一组某些位置的地理轴以同时获得返回的位置？
2\. 我可以用给定的颜色为特定国家着色吗？一组相邻的国家呢？
3\. OpenLayers 中是否有任何缓存机制允许我们在第一次加载时检索整个地图数据，然后将其存储在某个地方并在以后在用户交互时重用？如果是，如何存储和重复使用？
如果您能给我提供与上述问题相关的线索、教程或任何参考文章，将不胜感激。
太感谢了。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-24T16:12:05.767

有很多例子，看看[http://www.openlayers.org/dev/examples/](http://www.openlayers.org/dev/examples/)

# iphone - iOS6 自动旋转 - UIPageViewController

> ID：12568714
> 
> 赞同：2
> 
> 时间：2012-09-24T16:00:51.107
> 
> 标签：iphone, ios, cocoa-touch, ipad, ios6

我的用户界面结构：

```
UINavigationController
--UIViewController(first)
 |
 |Modal 
 |
 V 
UINavigationController (subclass)
--UIViewController (contains UIPageViewController) 
```

对于 iOS6 新的自动旋转，我创建了 UINavigationController 的子类并添加了：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

只想保持方向是纵向的。

我像这样初始化 UIPageViewController：

```
self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];

    PageDataViewController *startingViewController = [self viewControllerAtIndex:start storyboard:self.storyboard];

    NSArray *viewControllers = [NSArray arrayWithObject:startingViewController];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];

    self.pageViewController.dataSource = self;

    [self addChildViewController:self.pageViewController];
    [self.view addSubview:self.pageViewController.view];

    // Set the page view controller's bounds using an inset rect so that self's view is visible around the edges of the pages.
    CGRect pageViewRect = self.view.bounds;
    self.pageViewController.view.frame = pageViewRect;

    [self.pageViewController didMoveToParentViewController:self]; 
```

然后我执行 Modal segue，如果第一个 UIViewController 是纵向的，则 pageViewController 可以工作，但是如果第一个 UIViewController 是横向，我总是遇到异常：

> *** 断言失败 -[UIPageViewController willAnimateRotationToInterfaceOrientation:duration:], /SourceCache/UIKit_Sim/UIKit-2372/UIPageViewController.m:945** **Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'No view controllers' ** * First throw call stack: (0x2a5e012 0x19bae7e 0x2a5de78 0x1450f35 0xd75974 0x9f12b4 0x9f13ea 0x9e4c32 0x9f1372 0x9f13ea 0x9e4c32 0x9f1372 0x9f1751 0x93a1a6 0xbee5f9 0x9ec4f3 0x9ec777 0x9ec7b7 0xd57fe2 0xd49ad9 0xd49b54 0x9b1899 0x9b1b3d 0x13b8e83 0x2a1d376 0x2a1ce06 0x2a04a82 0x2a03f44 0x2a03e1b 0x2c967e3 0x2c96668 0x90265c 0xea7d 0x2685 0x1) libc++abi.dylib：终止调用抛出异常*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:36:23.740

其实还有另一种解决方案。

旋转只是调用了rootViewController的willAnimateRotationToInterfaceOrientation方法，你必须实现它的方法。

```
@interface UIPageViewController (Rotation)
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration;
@end 
```

//实现文件

```
#import "UIPageViewController+Rotation.h"

@implementation UIPageViewController(Rotation)
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {}
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:16:58.120

在有关“supportedInterfaceOrientations”的文档中写道：

> 当用户更改设备方向时，系统会在根视图控制器或填充窗口的最顶部呈现的视图控制器上调用此方法

您是否尝试将主窗口的 rootViewController 设置为您当前的 NavigationController 类？

就像在 AppDelegate 中一样：

```
self.window.rootViewController = nvc; 
```

当您的 navigationController 发生变化时，再次设置 rootViewController ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T10:55:39.953

我已经“修复”了这个问题，通过再次将视图控制器设置为`UIPageViewController`in `viewWillAppear:`，因为当调用此方法时，页面视图控制器的脊椎位置是正确的，并且基于此信息我设置了一个或两个页面（视图控制器）

```
- (void)viewWillAppear:(BOOL)animated
{   
    [super viewWillAppear:animated];

    if(self.pageViewController.spineLocation == UIPageViewControllerSpineLocationMid)
    {
        BookPageViewController *currentViewController = self.pageViewController.viewControllers[0];
        NSArray *viewControllers = nil;

        NSUInteger indexOfCurrentViewController = [self.modelController indexOfViewController:currentViewController];
        if (indexOfCurrentViewController == 0 || indexOfCurrentViewController % 2 == 0) {
            UIViewController *nextViewController = [self.modelController pageViewController:self.pageViewController viewControllerAfterViewController:currentViewController];
            viewControllers = @[currentViewController, nextViewController];
        } else {
            UIViewController *previousViewController = [self.modelController pageViewController:self.pageViewController viewControllerBeforeViewController:currentViewController];
            viewControllers = @[previousViewController, currentViewController];
        }
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward | UIPageViewControllerNavigationDirectionReverse animated:NO completion:nil];
    }

    if(self.pageViewController.spineLocation == UIPageViewControllerSpineLocationMin)
    {
        [self.pageViewController setViewControllers:[NSArray arrayWithObject:[self.pageViewController.viewControllers objectAtIndex:0]] direction:UIPageViewControllerNavigationDirectionForward | UIPageViewControllerNavigationDirectionReverse animated:NO completion:nil];
    }
} 
```

并设置`UIPageViewController`委托方法如下

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    BookPageViewController *currentViewController = self.pageViewController.viewControllers[0];

    if(UIInterfaceOrientationIsPortrait(orientation))
    {
        [self.pageViewController setViewControllers:[NSArray arrayWithObject:currentViewController] direction:UIPageViewControllerNavigationDirectionForward | UIPageViewControllerNavigationDirectionReverse animated:NO completion:nil];

        pageViewController.doubleSided = NO;

        return UIPageViewControllerSpineLocationMin;
    }

    if(UIInterfaceOrientationIsLandscape(orientation))
    {
        NSArray *viewControllers = nil;

        NSUInteger indexOfCurrentViewController = [self.modelController indexOfViewController:currentViewController];
        if (indexOfCurrentViewController == 0 || indexOfCurrentViewController % 2 == 0) {
            UIViewController *nextViewController = [self.modelController pageViewController:self.pageViewController viewControllerAfterViewController:currentViewController];
            viewControllers = @[currentViewController, nextViewController];
        } else {
            UIViewController *previousViewController = [self.modelController pageViewController:self.pageViewController viewControllerBeforeViewController:currentViewController];
            viewControllers = @[previousViewController, currentViewController];
        }
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward | UIPageViewControllerNavigationDirectionReverse animated:NO completion:nil];

        return UIPageViewControllerSpineLocationMid;
    }

    return UIPageViewControllerSpineLocationMin;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T19:16:48.780

我通过在 viewWillAppear 中将视图控制器设置为 UIPageViewController 来“解决”了这个问题：再次，因为当调用此方法时，页面视图控制器的脊椎位置是正确的，并且基于此信息我设置了一个或两个页面（视图控制器）*

# r - 核密度导数

> ID：12568715
> 
> 赞同：3
> 
> 时间：2012-09-24T16:00:59.533
> 
> 标签：r, derivative

我正在使用密度 {stats} 来构建变量向量的内核“高斯”密度。如果我使用以下示例数据集：

```
 x <- rlogis(1475, location=0, scale=1)  # x is a vector of values - taken from a rlogis just for the purpose of explanation
    d<- density(x=x, kernel="gaussian") 
```

`d`有没有办法在每个`n=1475`点上得到这个密度的一阶导数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:15:02.597

**编辑#2：**

继 Greg Snow 提出的使用[高斯导数](http://en.wikipedia.org/wiki/Normal_distribution#Probability_density_function)的解析表达式的极好建议，以及我们在他的帖子之后的对话，这将为您提供每个点的确切斜率：

```
s <- d$bw; 
slope2 <- sapply(x, function(X) {mean(dnorm(x - X, mean = 0, sd = s) * (x - X))})
## And then, to compare to the method below, plot the results against one another
plot(slope2 ~ slope) 
```

* * *

**编辑：**

好的，我刚刚重读了您的问题，并看到您想要输入向量中每个点的斜率`x`。这是您可能近似的一种**方法**：

```
slope <- (diff(d$y)/diff(d$x))[findInterval(x, d$x)] 
```

一个可能的进一步改进是在其区间内找到该点的位置，然后将其斜率计算为当前区间的斜率与其右侧或左侧的区间的加权平均值。

* * *

我会通过平均每个点的右侧和左侧的线段的斜率来解决这个问题。（需要特别注意第一个点和最后一个点，它们的左右分别没有段。）

```
dy <- diff(d$y)
dx <- diff(d$x)[1]  ## Works b/c density() returns points at equal x-intervals
((c(dy, tail(dy, 1)) + c(head(dy, 1), dy))/2)/dx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T17:42:27.647

密度估计器的曲线只是所有内核的总和，在您的情况下是高斯（除以点数）。和的导数是导数之和，常数乘以函数的导数是该常数乘以导数。因此，给定点的密度估计的导数将只是该给定点的 1475 条不同高斯曲线的斜率的平均值。每条高斯曲线将具有对应于每个数据点的平均值和基于带宽的标准偏差。因此，如果您可以计算高斯的斜率，那么找到密度估计的斜率只是 1475 个斜率的平均值。

# .net - 使用 NAudio 再次播放相同的 mp3 文件

> ID：12568717
> 
> 赞同：2
> 
> 时间：2012-09-24T16:01:02.667
> 
> 标签：.net, naudio

使用 NAudio 反复播放 mp3 文件的推荐方法是什么？

到目前为止我所做的：

在一个全球性的地方：

```
Mp3Reader mp3Reader = new Mp3FileReader(url); 
```

然后每次播放 mp3 时：

```
WaveStream channel = new WaveChannel32( mp3Reader) ;
IWavePlayer waveout = new WaveOut();
waveout.Init(channel);
waveout.PlaybackStopped += new EventHandler(naudio_PlaybackStopped);
waveout.Play(); 
```

但它只播放第一次。

此外，它给出了这个断言：

```
WaveOut device was not closed 
```

在第一个实例仍在播放时，可能应该再次播放 mp3 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:48:43.483

如果你想背靠背循环，我会通过创建一个 custom 来做到这一点`IWaveProvider`，它在内部创建一个`Mp3FileReader`. 然后在该`Read`方法中，它传递从`Mp3FileReader`. 当它到达末尾（`mp3FileReader.Read`返回 0）时，您将 Position 设置回 0 并继续读取（您也可以在其间插入一点静默）。

另一种方法是使用`MixingSampleProvider`最新版本的 NAudio（[在 Nuget 上可用](https://nuget.org/packages/NAudio/1.5)），然后您可以`AudioFileReader`在想要播放 MP3 文件时添加实例。然后您实际上可以同时播放相同的 MP3 文件。您可能还想放入一个虚拟的永无止境的静音流，以确保播放永无止境，您可以随时排队播放新的 MP3。

此外，“WaveOut 设备未关闭”就是这个意思。您不能第二次调用 Init。如果您不想使用自定义波提供程序或混音器方法，则必须处理您的原始文件并创建一个新文件（例如在您的 PlaybackStopped 处理程序中）。

# iphone - EKEventStore，我需要 iOS 6 的 EventKit.Framework 吗？

> ID：12568723
> 
> 赞同：2
> 
> 时间：2012-09-24T16:01:36.630
> 
> 标签：iphone, ios6, eventkit, ekeventkit

我有一个通用的 iOS 应用程序，努力使其与 iOS 6 兼容。我正在使用 Cordova / Phonegap 框架，所以我的应用程序是 HTML、CSS 和 JS。我正在使用 GitHub 上提供的用于 Cordova 的 calenderPlugin，在 iOS 6 之前运行良好。

问题从这里开始：Apple 补充说，从 iOS 6 开始，在对日历和提醒进行任何操作之前，我们需要授予用户权限。这是示例代码：

```
EKEventStore    *eventStore = [[EKEventStore alloc] init];

if( [self checkIsDeviceVersionHigherThanRequiredVersion:@"6.0"] ) {

[eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

if (granted){
//---- codes here when user allow your app to access theirs' calendar.

}else
{
//----- codes here when user NOT allow your app to access the calendar.

}

:
:
}];

}

//**********************************************************************************

//   Below is a block for checking is current ios version higher than required version.

//**********************************************************************************

- (BOOL)checkIsDeviceVersionHigherThanRequiredVersion:(NSString *)requiredVersion
{
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];

if ([currSysVer compare:requiredVersion options:NSNumericSearch] != NSOrderedAscending)
{
return YES;
}

return NO;
} 
```

当然我已经添加了 EventKit.Framework 和 EventKitUI.Framework。现在的事情是，为了开发 iOS 6，我下载并安装了 iOS6 SDK 附带的 xCode 4.5。

xCode 没有找到这个方法 requestAccessToEntityType，也没有常量 EKEntityTypeEvent 可用。

看来我缺少适用于 iOS 6 的 EventKit.Framework，但是如何呢？我有适用于 iOS 6 的 SDK 附带的 xCode 4.5。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:58:12.007

问题已解决，

我通过右键单击项目下的框架并将文件添加到项目中添加了 EventKit.framework。这些框架适用于 iOS 5。要添加适用于 iOS 6 的框架，首先我从框架文件夹中删除了这些框架，然后转到 Targets > Summary > Linked Frameworks and Libraries。在那里我按下 + 并添加了出现在 iOS 6 文件夹下的 EventKit.framework。干杯:-) 快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:32:07.313

检查您的 BaseSDK，因为我在 XCode4.5 和 iOS6 SDK 中使用它没有问题。我通过 App Store 升级我的 XCode 4.5，而不是从开发站点升级。

# vba - 带有下拉选择的vb复制行

> ID：12568724
> 
> 赞同：0
> 
> 时间：2012-09-24T16:01:38.127
> 
> 标签：vba, excel

我正在使用 Excel 2007。我有 9 列：

1.  A列是计数器（+1）
2.  B 到 E 列是手动数据输入
3.  F列是父验证
4.  G 列是 F 的子验证
5.  H 列是 F 列选择 Layout 时 G 列的 Vlookup 并且
6.  当列 F 选择 Routing 时，列 J 是列 G 的 Vlookup。

我创建了一个分配给按钮的宏，该按钮复制您所在的行（最后一行）并将其插入 1 行并清除 B 到 E 列的内容。

我正在寻找一种方法在复制到 Not_Started 期间将列 F 父级重置为 3 个选项：（Not_Started、布局、路由）。

以下是当前宏。

```
Sub Copy_1_Line()
    Application.EnableEvents = False
    Rows(ActiveCell.Row).Select
    Selection.Copy
    Rows(ActiveCell.Row + 1).Select
    Selection.Insert Shift:=xlDown
    ActiveCell.Offset(rowOffset:=0, columnOffset:=1).Activate
    ActiveCell.ClearContents
    ActiveCell.Offset(rowOffset:=0, columnOffset:=1).Activate
    ActiveCell.ClearContents
    ActiveCell.Offset(rowOffset:=0, columnOffset:=1).Activate
    ActiveCell.ClearContents
    ActiveCell.Offset(rowOffset:=0, columnOffset:=1).Activate
    ActiveCell.ClearContents
    ActiveCell.Offset(rowOffset:=0, columnOffset:=1).Activate
    Application.EnableEvents = True
    Application.CutCopyMode = False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:17:10.633

选择会减慢您的代码，删除它们会加快您的代码并使其更易于维护。

如果我理解正确，您希望活动单元格行，F 列显示未开始。如果您希望新行具有该功能，请更改行

```
Cells(ActiveCell.Row, "F") = "Not_Started" 
```

至

```
Cells(ActiveCell.Row+1, "F") = "Not_Started" 
```

这是我的建议：

```
Sub Copy_1_Line()
Application.EnableEvents = False

Rows(ActiveCell.Row).Copy Rows(ActiveCell.Row + 1)
Cells(ActiveCell.Row + 1, 2).Resize(1, 4).ClearContents
Cells(ActiveCell.Row, "F") = "Not_Started"

Application.EnableEvents = True
Application.CutCopyMode = False
End Sub 
```

# python - 就长期速度而言，大 mysql 查询与 http post 连接

> ID：12568725
> 
> 赞同：0
> 
> 时间：2012-09-24T16:01:40.390
> 
> 标签：python, mysql, django

现在，我认为我在获取用户朋友列表的两个主要选择之间陷入了困境。

第一个是与 facebook 的直接连接，将好友列表拉出并使用 json 创建好友模型列表。（每次尝试都需要很长时间，比如 2 秒？）

另一种是每当用户登录时，程序会将他或她的整个朋友列表存储在一个大朋友模型中（注意即使两个人有完全相同的朋友，仍然会存储两组，所有朋友模型都会有一个FK 回到在他们的名单上有这些朋友的人）。

每当用户需要他或她的朋友列表时，我只是使用 django 的过滤器来抓取它们。现在这很快，但那是因为它还没有经过很多人的测试。

根据你们的经验，从长远来看，这两个决定中的哪一个最有意义？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:13:03.060

这在很大程度上取决于您计划如何处理数据。但是，从长远来看，您将拥有*更大的*灵活性，将朋友分成不同的单元，而不仅仅是将它们存储在一起。

如果朋友创建过程花费的时间太长，您应该考虑将其卸载到可以在后台完成它的单独进程，使用像 Celery 这样的东西。

# sql - 保存航点并进行比较的最有效方法？

> ID：12568726
> 
> 赞同：10
> 
> 时间：2012-09-24T16:01:49.110
> 
> 标签：sql, sql-server, database, oracle, nosql

我想知道你的意见。我创建了一个应用程序，用户在其中创建路线，我们跟踪这条路线并将所有路点保存在数据库中。然后，应用程序对用户的路点进行比较。

目前，我使用`MSSQL`服务器，使用两张表，一张用于路线，另一张用于存储路点（具有空间数据类型）。比较是在存储过程中使用 SQL Server 地理函数（例如 st_distance...

我研究了其他选择。我实现的一个是使用对象的 Oracle 11g。我将所有数据仅存储在一个对象表中，并且路点存储在具有纬度和经度属性的类型的 Varray 中。这种方式非常有效地保存和检索数据，但在比较时会变得有些复杂。

我正在寻找一种`NoSQL`解决方案、某种算法或方法来有效地做到这一点。你怎么看？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T16:07:51.680

对所有 n 条记录使用诸如[STDistance 之](http://msdn.microsoft.com/en-us/library/bb933808.aspx)类的数据库函数是次优的。您的 CPU 开销将成倍增加。

您应该做的是检查您正在搜索的当前震中周围矩形内的点数。这是一个示例（在 MySQL 中）：

```
SELECT * FROM `points`
    WHERE `latitude` >= X1 AND `latitude` <= X2
    AND `longitude` >= Y1 AND `longitude` <= Y2 
```

这提供了减少的点，然后应该通过使用[Haversine公式](http://en.wikipedia.org/wiki/Haversine_formula)`superset`计算正交距离（相对于地球的曲率）来进一步减少这些点。

**不要忘记**在和上设置[复合索引](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)。`latitude``longitude`

![正向距离](../Images/246e2db0b7597133c20e1af499346930.png)

这是在PHP中：

```
<?php
function haversine($latitude1, $longitude1,
                   $latitude2, $longitude2, $unit = 'Mi') {
    $theta = $longitude1 - $longitude2;
    $distance = (sin(deg2rad($latitude1)) * sin(deg2rad($latitude2))) +
    (cos(deg2rad($latitude1)) * cos(deg2rad($latitude2)) * cos(deg2rad($theta)));
    $distance = acos($distance);
    $distance = rad2deg($distance);
    $distance = $distance * 60 * 1.1515;
    switch ($unit) {
    case 'Mi':
        break;
    case 'Km':
        $distance = $distance * 1.609344;
    }
    return (round($distance, 2));
}
?> 
```

**回顾一下**：

这是一个示例图像，说明了该怎么做：

![以加拿大国家电视塔为例](../Images/54ca2faff3968e52ed14dea0c92c2417.png)

第一次搜索将涉及边界框碰撞搜索（MySQL 示例）以确定`superset`，不包括红点。第二个验证过程将涉及使用 Haversine 公式（PHP 示例）计算点是否在适当的正交距离内，并取 a `subset`（由黑点组成）。

# asp.net-mvc - 在 MVC4 中使用 mvccontrib 测试助手测试路由条目时出现问题

> ID：12568727
> 
> 赞同：0
> 
> 时间：2012-09-24T16:01:58.783
> 
> 标签：asp.net-mvc, c#-4.0, tdd, mvccontrib

我正在尝试为 Route 条目编写测试方法，并且在我的路由配置中有很多用于不同操作的条目。我正在使用 `MvcContrib.TestHelper`测试。我是 MVC 和 TDD 的新手。请帮我解决这个问题。我的测试用例失败了，我该怎么做才能让它通过。

**路线入口**

```
 routes.MapRoute(
            name: "X1Details",
            url: "X1/{X1ID}",
            defaults: new { controller = "X1", action = "Index", X1ID = "X1ID" }
            ); 
```

**X1控制器**

```
 public ActionResult Index(int? instanceID = 0,  string  InfoMsg ="")
   {
   } 
```

**测试方法**

```
[Test Method]
     public void Should_Route_X1Index()
            {

                "~/X1/"
                    .ShouldMapTo<X1Controller>(action => action.Index(null, ""));

            } 
```

**错误**

> 测试方法 XXX.Tests.MVCContibRouteMapTest.Should_Route_X1IndexOf 抛出异常：MvcContrib.TestHelper.AssertionException：参数“InfoMsg”的值不匹配：预期为“”但为“”；在名为“InfoMsg”的路由上下文操作参数中找不到值 - 您的匹配路由是否包含名为“InfoMsg”的标记？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:39:50.990

我发现这种方法可行，它应该允许您的控制器保持不变

```
[Test Method]
public void Should_Route_X1Index()
{
     var routeData = "~/X1/".Route();
     routeData.Values["InfoMsg "] = "";
     routeData.Values["instanceID"] = "0";
     routeData.ShouldMapTo<X1Controller>(action => action.Index(0, ""));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:08:18.580

默认值不适用于 MVCContrib 助手。您可以像这样修改控制器操作：

```
public ActionResult Index(int? instanceID, string InfoMsg)
{
    ...
} 
```

接着：

```
"~/X1".ShouldMapTo<X1Controller>(action => action.Index(null, null)); 
```

# java - 如何修复“无法从静态上下文引用非静态方法”？

> ID：12568728
> 
> 赞同：-2
> 
> 时间：2012-09-24T16:02:00.330
> 
> 标签：java, static

我的 Java 编译器返回以下错误消息

> 不能从静态上下文引用非静态方法 getParameter(String)

就行了`String Cliente4 = UtilMainApp.Cliente`。

我有以下课程：`UtilMainApp.java`

```
package uk.co.mmscomputing.util;

import java.io.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.beans.*;
import javax.swing.*;

import uk.co.mmscomputing.util.log.LogBook;

abstract public class UtilMainApp extends JApplet{

  private Properties properties=new Properties();
  private File       propertiesFile;
  private JFrame     frame = null;

  public String Cliente = getParameter("id"); // I need use this variable

... etc... 
```

和`ImageTab.java`：

```
package uk.co.mmscomputing.application.imageviewer;

import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.image.*;
import java.awt.print.*;
import java.io.*;
import java.util.*;                // as of 1.5.0 java.util has class Scanner
import javax.imageio.*;
import javax.imageio.stream.*;
import java.beans.*;
import java.net.URL;
import java.net.URLConnection;

import org.w3c.dom.*;
import javax.xml.parsers.*;
import javax.imageio.metadata.*;

import uk.co.mmscomputing.util.UtilMainApp;
import uk.co.mmscomputing.util.JarImageIcon;
//import uk.co.mmscomputing.imageio.*;
import uk.co.mmscomputing.image.operators.*;

public class ImageTab extends JPanel implements PropertyChangeListener{

  static public final String fileOpenID="uk.co.mmscomputing.file.open.dir";
  static public final String fileSaveID="uk.co.mmscomputing.file.save.dir";

  protected Properties   properties;
  protected JTabbedPane  images;
  protected JFileChooser openfc;
  protected JFileChooser savefc;

 ... etc...

    //UtilMainApp mc = new UtilMainApp(); //This is the part when I compile have an error
    String Cliente4 = UtilMainApp.Cliente;
    String Usuario;
    Usuario = Cliente4;
    JOptionPane.showMessageDialog(null, Usuario);

...etc... 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:06:22.930

`String Cliente4 = UtilMainApp.Cliente;`

似乎 Cliente 是一个`Non-static Variable`，所以必须**通过创建** `UtilMainApp`Class 的对象来访问它。

**例如：**

```
UtilMainApp util = new UtilMainApp();

String Cliente4 = util.Cliente; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:10:10.983

错误在这里，您以静态方式引用非静态变量。 `UtilMainApp`是一个类，而不是一个属性。因此，当没有以这种方式定义时，您所引用`Cliente`的好像每个类（静态）只有一个。

```
String Cliente4 = UtilMainApp.Cliente; 
```

要解决此问题，您必须将 的实例传递`UtilMainApp`给您的类的构造函数`ImageTab`，这样您就可以使用引用来获取非静态属性`Cliente`。我还要注意，这个属性不能设置为静态，因为它是通过`getProperty()`超类中的非静态调用初始化的。

```
public String Cliente = getParameter("id"); // I need use this variable 
```

另一个注意事项 - 以小写字母开头命名所有属性是一种很好的做法。这是为了确保您将类名与属性名混淆。您的代码很难遵循，因为您不遵循此约定。

# c# - 无法从安装目录读取文件

> ID：12568731
> 
> 赞同：0
> 
> 时间：2012-09-24T16:02:04.930
> 
> 标签：c#, wpf, .net-4.0, project, installation

我有一个 wpf 应用程序，它从 .xaml 文件中读取以动态创建视图。但是，当安装在非开发机器上时，该程序说该程序对存储文件的路径具有未经授权的访问权限。我们正在使用相对路径来读取文件。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:27:41.410

授予对该`Program Files`文件夹访问权限的唯一方法是[创建和嵌入应用程序清单 (UAC)](http://msdn.microsoft.com/en-us/library/bb756929.aspx)。

举个例子：

```
Executable: IsUserAdmin.exe 
Manifest:IsUserAdmin.exe.manifest
Sample application manifest file:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity version="1.0.0.0"
     processorArchitecture="X86"
     name="IsUserAdmin"
     type="win32"/> 
  <description>Description of your application</description> 
  <!-- Identify the application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly> 
```

但是您绝对必须[去阅读 API](http://msdn.microsoft.com/en-us/library/bb756929.aspx)。

# wcf - 将对象注入自定义 WCF UserNamePassValidator - Autofac

> ID：12568739
> 
> 赞同：4
> 
> 时间：2012-09-24T16:02:31.823
> 
> 标签：wcf, dependency-injection, wcf-security, autofac

我有一个托管在 IIS 中的服务。它由 Web.config 配置。

我创建了一个自定义 UserNamePassValidator，如果 II 在 validate 方法中有逻辑，它就可以工作。但我想要另一个项目中的逻辑并使用 DI 注入如下。

```
public class UserNamePassValidator : System.IdentityModel.Selectors.UserNamePasswordValidator
{
    private readonly ISystemAuthentication _systemAuthentication;

    public UserNamePassValidator(ISystemAuthentication systemAuthentication)
    {
        _systemAuthentication = systemAuthentication;
    }

    public override void Validate(string userName, string password)
    {
        _systemAuthentication.Validate(userName, password))
    }
} 
```

我正在使用 Autofac WCF 集成。

```
var builder = new ContainerBuilder();
builder.RegisterType<AuthenticationService>().As<IAuthenticationService>();
builder.Register(c => new SystemAuthentication()).As<ISystemAuthentication>();
builder.Register(c => new UserNamePassValidator(c.Resolve<ISystemAuthentication>()));
AutofacHostFactory.Container = builder.Build(); 
```

当我浏览到该服务时，我收到以下错误：

```
[MissingMethodException: No parameterless constructor defined for this object.] 
```

web.config 行为；

```
 <userNameAuthentication
                 userNamePasswordValidationMode="Custom"
                 customUserNamePasswordValidatorType="MyNamespace.UserNamePassValidator, service" /> 
```

我已阅读以下相关帖子，但示例是自托管服务： [如何将对象注入 WCF 验证器类](https://stackoverflow.com/questions/1176288/how-to-inject-an-object-into-a-wcf-validator-class)

编辑

```
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="Namespace.AuthenticationServiceBehaviour" name="Namespace.AuthenticationService" >
        <endpoint address="" binding="wsHttpBinding" contract="Namespace.IAuthenticationService" bindingConfiguration="SafeServiceConf">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Namespace.AuthenticationServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceCredentials>
            <serviceCertificate findValue="AuthenticationService" 
              storeLocation="LocalMachine"
              storeName="My" 
              x509FindType="FindBySubjectName" />
            <userNameAuthentication
              userNamePasswordValidationMode="Custom"
              customUserNamePasswordValidatorType="Namespace.UserNamePassValidator, Service" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <wsHttpBinding>
        <binding name="SafeServiceConf" maxReceivedMessageSize="65536">
          <readerQuotas maxStringContentLength="65536" maxArrayLength="65536" maxBytesPerRead="65536" />
          <security mode="Message">
            <message clientCredentialType="UserName" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings> 
```

SystemAuthentication 类

```
public class SystemAuthentication : ISystemAuthentication
{
   public bool Validate(string userName, string password)
   {
       // removed code for abbreviation
       return true;
   } 
```

WCF 身份验证服务

```
public class AuthenticationService : IAuthenticationService
    { 
        public bool Authenticate(string email, string password)
        {
            // removed for abbreviation
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T09:03:16.967

在这篇文章[UserNamePasswordValidator 的帮助下：当 DI 和框架发生冲突时](https://stackoverflow.com/questions/6752340/usernamepasswordvalidator-when-di-and-framework-collide)

从我删除的 XML 配置中：

```
<userNameAuthentication
   userNamePasswordValidationMode="Custom"
   customUserNamePasswordValidatorType="MyNamespace.UserNamePassValidator, service" /> 
```

我将行为添加到 AutoFacHostFactory 服务主机

```
 IContainer container = builder.Build();
    AutofacHostFactory.Container = container;
    AutofacHostFactory.HostConfigurationAction = host =>
    {
        var auth = host.Credentials.UserNameAuthentication;
        auth.UserNamePasswordValidationMode = UserNamePasswordValidationMode.Custom;
        auth.CustomUserNamePasswordValidator = container.Resolve<UserNamePassValidator>();
    }; 
```

这完美地工作，但如果能够从 web.config 中做到这一点会更好。如果有人知道更好的方法，请发布:)

# java - 为嵌套对象的单元测试用例生成测试数据

> ID：12568742
> 
> 赞同：11
> 
> 时间：2012-09-24T16:02:41.387
> 
> 标签：java, mocking, mockito

在模拟为任何企业级 java 服务编写单元测试用例的依赖服务时，我发现为单元测试用例设置数据非常痛苦。大多数时候，这是开发人员不编写单元测试用例而是编写集成式测试用例的最令人信服的理由。如果服务依赖于其他几个服务（依赖于它们各自的 DAO）和它自己的 DAO，则生成`when-thenReturn`合理嵌套对象的子句变得相当费力，开发人员被视为采用简单的路线并加载整个弹簧上下文并从直接来源获取数据，这些来源可能并不总是提供可以遍历所有必需代码路径的数据。在此背景下，我的一位同事建议为什么不运行示例集成测试，并使用方面，捕获所有相关数据点并将其序列化为 XML 表示，该表示可用于实现单元测试的测试数据案例。令我们惊喜的是，我们[在 github 上发现了一个名为 TestDataCaptureJ](https://github.com/davidwong/TestDataCaptureJ)的框架，它与此非常相似。它使用方面来捕获数据点，并生成 java 代码来创建对象。

该网站上陈述的[动机](http://www.davidwong.com.au/TestDataCaptureJ/#d0e51)似乎非常恰当，我想知道是否有任何其他替代方案可以提供类似的功能。此外，如果专家们能够批评这种整体方法，那就太好了。

此外，该项目大约有 2 年的历史，并且有一些我们必须修复的错误，并希望将其作为 mavenized github fork 归还。只需检查以确保其中一个著名的马厩也没有其他类似的举措。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T19:31:46.747

我对这种方法有两个*批评*……请记住，我对您的上下文的了解几乎为零，这意味着我在这里的建议可能对您不起作用。

我只遇到过一次像您提到的问题，这是对象之间存在过多耦合的症状，因为职责范围很**广**。从那以后，我使用了[领域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)方法，我再也没有遇到过这个问题。

我更喜欢使用[Test-Data Builders](http://www.natpryce.com/articles/000714.html)来创建测试数据。这种方法允许我拥有我想要构建的模板，并且只需替换我对测试感兴趣的部分。如果您决定采用这种方式，我强烈建议您使用一个名为[Make-It-Easy](http://code.google.com/p/make-it-easy/)的小型库，它可以简化这些构建器的创建。

### 和两个建议

如果你有时间，我建议你

1.  观看 Michael Feathers 的名为[The Deep Synergy Between Testability and Good Design](http://vimeo.com/15007792)的预设 - 部分谈话内容与您正在经历的事情非常相似。
2.  阅读《[Growing Object-Oriented Systems, Guided by Tests》](https://rads.stackoverflow.com/amzn/click/com/0321503627)（又名 GOOS）一书，它对如何编写简单、令人惊叹、可测试的代码有各种见解。

# android - Android 应用程序从头开始

> ID：12568743
> 
> 赞同：-1
> 
> 时间：2012-09-24T16:02:43.273
> 
> 标签：android, android-activity

我在 D 中有一系列 Android 活动 A-->B-->C-->D 如果我按下主页按钮并单击应用程序图标，应用程序从活动 A 开始，我清除以前的活动并调用完成每个活动，我尝试了启动模式单任务和单实例，但徒劳无功。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:10:49.983

我解决了这个问题。问题是活动 D 具有任务关联性。机器人：任务亲和=“”。我在 Manifest 中删除了这个声明。现在，该应用程序显示了 Activity 从它所在的位置。

# xcode - 在 XCode 4.5 中构建配置文件时出现意外错误

> ID：12568748
> 
> 赞同：0
> 
> 时间：2012-09-24T16:03:06.240
> 
> 标签：xcode, ios5, profile, xcode4.5

我有一个针对 iOS 5 和 ARC 重构的项目。它构建并运行良好，Analyzer 什么也没找到，我正处于将其提交到 App Store 的边缘。在此之前，我认为检查泄漏是个好主意，以防万一我在弧化过程中遗漏了什么。但是，当我从 XCode 4.5 菜单中选择“产品 -> 配置文件”时，我会收到大量警告和错误。所有这些都表明用于分析的构建没有识别出项目正在使用 ARC。profile 的方案设置设置为使用与 run 相同的参数和环境变量，但 run 有效，而 profile 则无效。如果我选择“没有构建的配置文件”操作，一切正常。我检查了确保只安装了一个版本的 XCode，检查了路径，一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:57:03.547

通过从项目包中删除 project.xcworkspace 和 xcuserdata 文件夹解决了问题。显然他们在沿线的某个地方被破坏了。

# c# - 在达到超时之前出现 Windows 服务的错 误 1053

> ID：12568749
> 
> 赞同：1
> 
> 时间：2012-09-24T16:03:10.670
> 
> 标签：c#, windows-services

我在我的机器上用 C# 创建了一个服务，然后通过远程桌面将它安装到服务器上。当我尝试启动服务时，不到一秒钟就会出现带有*1053 错误的对话框。*我可以在自己的桌面上安装和运行该服务。我之前在同一台服务器上启动过这个服务，但现在它不起作用，而且显然没有达到超时。

# c# - 使用nfop创建PDF的xsl-fo背景图像固定大小

> ID：12568751
> 
> 赞同：0
> 
> 时间：2012-09-24T16:03:12.807
> 
> 标签：c#, xslt, xsl-fo, nfop

我已经使用以下方法在我的 pdf 中添加了背景图片：

```
<fo:simple-page-master master-name="LetterLandscapePortada" page-height="21.59cm" page-width="28.94cm" >
              <fo:region-body margin="0cm" background-repeat="no-repeat" background-image="url(file://D:/XSL/fondoPortada.jpg)" />          
</fo:simple-page-master> 
```

但是我在将图像“自动适应”到页面时遇到了问题，因为图像大于页面大小。

是否可以添加属性以使背景图像适合页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:25:24.253

xslfo 的规范没有为此指定任何内容。见：[http ://www.w3schools.com/xslfo/obj_region-body.asp](http://www.w3schools.com/xslfo/obj_region-body.asp)

但是，有很多方法可以解决这个问题。在 xslfo 中，您可以在显示任何文本之前添加图像并相应地设置其尺寸，然后它似乎是一个“背景”图像（具有最低的 z-index）。一个非 xsl 解决方案是通过在 GIMP 之类的编辑器中添加适当的空白/调整大小来修改图像本身，然后像你已经做的那样继续。您也可以使用“位置”属性，但如果您不修改图像，它们将无济于事。

# azure - 刷新 Windows Azure VPN 隧道

> ID：12568752
> 
> 赞同：4
> 
> 时间：2012-09-24T16:03:17.520
> 
> 标签：azure, vpn

有人知道如何“重置”Windows Azure 虚拟网络的 VPN 隧道吗？这里的网络人员要求我这样做。他们的意思是“刷新”连接。由于我不是 VPN 专家，我并不完全理解这个请求。他们告诉我，在硬件 VPN 集中器（例如 Cisco、Juniper 等）上配置 VPN 隧道时，这很常见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:48:30.987

除了 Avkash 的响应之外，Azure 将定期尝试与您的本地设备建立 VPN 隧道，因此无需在您的设备上执行手动步骤。

为了深入了解内部结构，Azure 网关尝试建立 IPsec 隧道。若要创建此隧道，Azure 网关和您的 VPN 设备需要协商一系列安全关联。这些被称为阶段 1 (isakmp) 和阶段 2 (ipsec) SA。这些 SA 包含双方同意的参数（安全密钥、生命周期等），两个设备都将使用这些参数来加密两个端点之间的数据包。

当您说要“重置”您的连接时，我假设您正在寻找清除和重新协商这些 SA 的步骤。您可以在设备端执行此操作，方法是在登录设备后发出以下命令。这应该通知 Azure 端并导致重新协商。

**思科 ASA 和 ISR 设备**

```
clear crypto isakmp sa
clear crypto ipsec sa 
```

**瞻博网络 SSG/ISG 设备**

```
clear ike all 
```

**瞻博网络 SRX/J 设备**

```
clear security ike security-associations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:49:13.620

使用 Windows Azure 虚拟网络，一旦您配置了 VPN 连接，连接就始终可用，如果由于某种原因连接中断，通常应该自动重新建立隧道。

此外，一旦您配置了 VPN，隧道会在几秒钟内重新建立。此外，有时门户网站上的连接状态可能不会立即更新，因为门户网站更新会在大约 5 分钟内发生，但 VPN 可能会在下面建立。用户此时无法通过门户或使用 Powershell 刷新 VPN。

# django - 两个 Django Web 应用程序之间的 Csrf 令牌验证失败

> ID：12568762
> 
> 赞同：1
> 
> 时间：2012-09-24T16:04:15.320
> 
> 标签：django, post, csrf

我正在尝试在两个 Web 应用程序之间传递 csrf 令牌，以将一个 POST 数据发送给另一个。“客户端”应用程序 (C) 通过 GET 操作向“服务器”应用程序 (S) 请求 csrf 令牌。

S 用以下形式响应 C：

```
<form id='csrfRequestForm' name='csrfForm' action='http://{{ context_path }}/ajax/getcsrf' method='post'>
  <!-- csrf token -->
  {% csrf_token %}
  <!-- datas to POST follow -->
  ...
</form> 
```

C 必须将此表单提交到操作（映射到 S 使用的 url）才能将数据 POST 到 S。当 C 尝试这样做时，csrf 验证失败。我已经检查了 GET 的结果，并且表单中收到了 csrf 令牌。我`django.middleware.csrf.CsrfViewMiddleware`在 MIDDLEWARE CLASSES 下列出了关键字，`settings.py`并且`RequestContext`在使用`render_to_response(... RequestContext(request))`

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:25:48.087

尝试定义您的上下文并像这样返回它......

```
context = RequestContext(request, {
  'request': request
})

return render_to_response(..., context_instance=context) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:44:33.893

这是设计使然，不允许跨站点 POST 执行。根据 django 文档，您拥有的一种选择是将您希望能够执行的方法标记为安全的：

[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:10:31.637

我无法以您的方式解决它，但我设法做到了：

C 通过 javascript 打开一个弹出窗口直接转到 S：

```
window.open("http://<S_address>/<path_to_request_form>"); 
```

这样，使用通过第三方身份验证服务器登录的 C 的用户（我之前忘了提，抱歉），仍然登录到 S 中的弹出窗口，并在其中接收带有正确 csrf 令牌的表单。我不知道它是否正确，但它有效。谢谢你的时间

# java - 使用和不使用特定类路径文件的 JUnit 测试

> ID：12568764
> 
> 赞同：2
> 
> 时间：2012-09-24T16:04:41.137
> 
> 标签：java, unit-testing, testing, junit, junit4

我目前正在使用的 Java 库可以使用`.properties`类路径中的文件进行配置。现在我想编写执行以下操作的 JUnit 测试：

1.  如果文件存在，则断言其中的值已加载。
2.  如果文件*没有*退出，则断言加载了默认值。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:29:02.857

是的，有可能。`.properties`在您的类路径上的文件夹中创建一个临时文件以进行测试。运行测试。

在第二次测试中将文件重命名为其他名称，运行测试，将文件重命名为原始名称。

# iphone - 双击放大 UIImageView

> ID：12568765
> 
> 赞同：3
> 
> 时间：2012-09-24T16:04:52.250
> 
> 标签：iphone

我正在查看来自 ScrollViewSuite 的 Apple 示例代码。相比之下，我一定做错了什么。在他们的 RootViewController 中，他们这样做：

```
- (void)loadView {
    [super loadView];

    // set the tag for the image view
    [imageView setTag:ZOOM_VIEW_TAG];

    // add gesture recognizers to the image view
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];

    [doubleTap setNumberOfTapsRequired:2];
    [twoFingerTap setNumberOfTouchesRequired:2];

    [imageView addGestureRecognizer:singleTap];
    [imageView addGestureRecognizer:doubleTap];
    [imageView addGestureRecognizer:twoFingerTap];

    [singleTap release];
    [doubleTap release];
    [twoFingerTap release];

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = [imageScrollView frame].size.width  / [imageView frame].size.width;
    [imageScrollView setMinimumZoomScale:minimumScale];
    [imageScrollView setZoomScale:minimumScale];
} 
```

在 IB 中，他们将 imageView 作为 imageScrollView 的子视图。我的 .xib 的设置方式相同。我把这段代码放在我的 viewDidLoad 而不是 loadView 中。当我双击我的 imageView 时，我没有接到任何电话。我想知道为什么。这是他们所做的我的版本：

```
- (void)viewDidLoad {
    [self updateOnScreenImages];  // this is where my imageView.image property gets set

    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    doubleTap.numberOfTapsRequired = 2;

    UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];
    [doubleTap setNumberOfTouchesRequired:2];

    [self.imageView addGestureRecognizer:doubleTap];
    [self.imageView addGestureRecognizer:twoFingerTap];

    [doubleTap release];
    [twoFingerTap release];

} 
```

与 Apple 所做的相比，我做错了什么吗？逻辑似乎和我很相似。但是当我双击时我没有收到我的回调。我也尝试将手势添加到 self.scrollView，但这也不起作用。想法？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T16:09:42.247

尝试添加：

```
 self.imageView.userInteractionEnabled = YES; 
```

默认情况下`UIImageView`s 将该属性设置为`NO`
（苹果可能在 XIB 文件中更改了它，您可能已经丢失了它......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-28T11:02:53.560

```
#import "RootViewController.h"

#define ZOOM_VIEW_TAG 100
#define ZOOM_STEP 1.5

@interface RootViewController (UtilityMethods)
- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center;
@end

@implementation RootViewController

@synthesize imageScrollView, imageView, mySlider;

- (IBAction) sliderValueChanged:(UISlider *)sender {
    mySlider.value = [NSString stringWithFormat:imageScrollView.[sender value]];

     //mySlider.value = [NSString stringWithFormat:@" %.1f", [sender value]];

    //myTextField.text = [NSString stringWithFormat:@" %.1f", [sender value]];
}

- (void)loadView {
    [super loadView];

    // set the tag for the image view
    [imageView setTag:ZOOM_VIEW_TAG];

    // add gesture recognizers to the image view
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];

    [doubleTap setNumberOfTapsRequired:2];
    [twoFingerTap setNumberOfTouchesRequired:2];

    [imageView addGestureRecognizer:singleTap];
    [imageView addGestureRecognizer:doubleTap];
    [imageView addGestureRecognizer:twoFingerTap];

    [singleTap release];
    [doubleTap release];
    [twoFingerTap release];

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = [imageScrollView frame].size.width  / [imageView frame].size.width;
    [imageScrollView setMinimumZoomScale:minimumScale];
    [imageScrollView setZoomScale:minimumScale];
}

- (void)viewDidUnload {
    self.imageScrollView = nil;
    self.imageView = nil;
}

- (void)dealloc {
    [imageScrollView release];
    [imageView release];
    [super dealloc];
}

#pragma mark UIScrollViewDelegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [imageScrollView viewWithTag:ZOOM_VIEW_TAG];
}

/************************************** NOTE **************************************/
/* The following delegate method works around a known bug in zoomToRect:animated: */
/* In the next release after 3.0 this workaround will no longer be necessary      */
/**********************************************************************************/
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {
    [scrollView setZoomScale:scale+0.01 animated:NO];
    [scrollView setZoomScale:scale animated:NO];
}

#pragma mark TapDetectingImageViewDelegate methods

- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
    // single tap does nothing for now
}

- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {
    // double tap zooms in
    float newScale = [imageScrollView zoomScale] * ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];
}

- (void)handleTwoFingerTap:(UIGestureRecognizer *)gestureRecognizer {
    // two-finger tap zooms out
    float newScale = [imageScrollView zoomScale] / ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [imageScrollView zoomToRect:zoomRect animated:YES];
}

#pragma mark Utility methods

- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center {

    CGRect zoomRect;

    // the zoom rect is in the content view's coordinates. 
    //    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
    //    As the zoom scale decreases, so more content is visible, the size of the rect grows.
    zoomRect.size.height = [imageScrollView frame].size.height / scale;
    zoomRect.size.width  = [imageScrollView frame].size.width  / scale;

    // choose an origin so as to get the right center.
    zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);

    return zoomRect;
}

@end 
```

# deployment - 使用不相关的默认符号链接的 Chef 部署

> ID：12568767
> 
> 赞同：10
> 
> 时间：2012-09-24T16:04:55.667
> 
> 标签：deployment, chef-infra

我正在尝试使用 Chef 部署我的应用程序代码，该代码适用于一个节点而在另一个节点上失败。当它们具有完全相同的配置时，我无法确定为什么它适用于一个节点而不适用于另一个节点，但我至少可以尝试在失败的节点上调试问题。

```
 deploy_revision app_config['deploy_dir'] do
    scm_provider Chef::Provider::Git 
    repo app_config['deploy_repo']
    revision app_config['deploy_branch']
    if secrets["deploy_key"]
      git_ssh_wrapper "#{app_config['deploy_dir']}/git-ssh-wrapper" # For private Git repos 
    end
    enable_submodules true
    shallow_clone false
    symlink_before_migrate({}) # Symlinks to add before running db migrations
    purge_before_symlink [] # Directories to delete before adding symlinks
    create_dirs_before_symlink [] # Directories to create before adding symlinks
    # symlinks()
    action :deploy
    restart_command do
      service "apache2" do action :restart; end
    end
  end 
```

这是我部署代码的秘诀。请注意，我已尝试完全禁用符号链接，因为 Chef 总是将其自己的默认值插入其中。即使这样，我也会收到错误消息：

```
================================================================================
Error executing action `deploy` on resource 'deploy_revision[/var/www]'
================================================================================

Chef::Exceptions::FileNotFound
------------------------------
Cannot symlink /var/www/shared/config/database.yml to /var/www/releases/7404041cf8859a35de90ae72091bea1628391075/config/database.yml before migrate: No such file or directory - /var/www/shared/config/database.yml or /var/www/releases/7404041cf8859a35de90ae72091bea1628391075/config/database.yml

Resource Declaration:
---------------------
# In /var/chef/cache/cookbooks/kapture/recipes/api.rb

 68: 
 69:   deploy_revision app_config['deploy_dir'] do
 70:     scm_provider Chef::Provider::Git 
 71:     repo app_config['deploy_repo']
 72:     revision app_config['deploy_branch']
 73:     if secrets["deploy_key"]
 74:       git_ssh_wrapper "#{app_config['deploy_dir']}/git-ssh-wrapper" # For private Git repos 
 75:     end
 76:     enable_submodules true

Compiled Resource:
------------------
# Declared in /var/chef/cache/cookbooks/kapture/recipes/api.rb:69:in `from_file'

deploy_revision("/var/www") do
  destination "/var/www/shared/cached-copy"
  symlink_before_migrate {"config/database.yml"=>"config/database.yml"}
  updated_by_last_action true
  restart_command #<Proc:0x00007f40f366e5a0@/var/chef/cache/cookbooks/kapture/recipes/api.rb:82>
  repository_cache "cached-copy"
  retries 0
  keep_releases 5
  create_dirs_before_symlink ["tmp", "public", "config"]
  updated true
  provider Chef::Provider::Deploy::Revision
  enable_submodules true
  deploy_to "/var/www"
  current_path "/var/www/current"
  recipe_name "api"
  revision "HEAD"
  scm_provider Chef::Provider::Git
  purge_before_symlink ["log", "tmp/pids", "public/system"]
  git_ssh_wrapper "/var/www/git-ssh-wrapper"
  remote "origin"
  shared_path "/var/www/shared"
  cookbook_name "kapture"
  symlinks {"log"=>"log", "system"=>"public/system", "pids"=>"tmp/pids"}
  action [:deploy]
  repo "git@github.com:kapture/api.git"
  retry_delay 2
end

[2012-09-24T15:42:07+00:00] ERROR: Running exception handlers
[2012-09-24T15:42:07+00:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
[2012-09-24T15:42:07+00:00] ERROR: Exception handlers complete
[2012-09-24T15:42:07+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2012-09-24T15:42:07+00:00] FATAL: Chef::Exceptions::FileNotFound: deploy_revision[/var/www] (kapture::api line 69) had an error: Chef::Exceptions::FileNotFound: Cannot symlink /var/www/shared/config/database.yml to /var/www/releases/7404041cf8859a35de90ae72091bea1628391075/config/database.yml before migrate: No such file or directory - /var/www/shared/config/database.yml or /var/www/releases/7404041cf8859a35de90ae72091bea1628391075/config/database.yml 
```

在这里你可以看到它提到`database.yml`、、`tmp/`和文件夹`system/`，`pids`所有这些都是 Chef 喜欢设置的默认值（参见[相关错误](http://tickets.opscode.com/browse/CHEF-1626)）

**问题 1**

这些符号链接有什么用，我怎么知道我是否需要任何符号链接。我在符号链接什么样的东西？我将使用迁移，所以如果它们对迁移有用，那么我需要它们工作。

我已多次阅读文档，但它并没有解释这是简单的英语 - 至少不是我发现的。

**问题2**

如果我不需要它们，如何完全禁用符号链接？遵循该错误报告中的示例没有帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T16:25:29.930

清除所有符号链接属性。

```
deploy_revision("/var/www") do
  # ...
  symlink_before_migrate.clear
  create_dirs_before_symlink.clear
  purge_before_symlink.clear
  symlinks.clear
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:33:04.663

确保 shared 中的部署目录具有正确的目录结构（/var/www/shared/[log,pids,system,config]），并且应用程序所需的所有配置文件都在 config 目录中。

您的应用程序说明书的配方应该有一个要创建的目录名称数组（递归），这样您就不会再次遇到此错误。

符号链接在那里，因此当您的应用程序代码将继续发展时，您可以通过将 shared/log 符号链接到 current/log 等等来共享日志、pid 和系统文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:29:24.257

Chef 碰巧缓存了目录结构 - 不知何故，我还没有深入研究过 - 使用这个巨魔应用程序说明书。我相信这是部署资源中的一些东西-我从不使用它-但是您可以通过删除它在其中创建的目录结构`/var/derp`或其他方式来修复它。还要确保您的 tmp 目录已设置。

这可能是一个问题的几个原因：

*   文件权限不正确
*   当前运行的 chef 用户无法访问该文件
*   您`application`在 Rails 部署的配置中使用说明书，并且您的应用程序没有相同的目录结构。

这肯定是由于 Chef 在某处缓存了部署的状态，然后从缓存中读取该状态——无论它在哪里——然后重用它。我会查看应用程序说明书以查看任何持久性，如果您无法在那里找到它，请查看厨师本身的部署资源。

# php - “使用 Twitter 注册”按钮 - 如何

> ID：12568769
> 
> 赞同：0
> 
> 时间：2012-09-24T16:05:11.153
> 
> 标签：php, codeigniter, twitter, twitter-oauth

我最近刚刚为我们的网站创建了一个“使用 Facebook 注册”按钮，我正在尝试使用 Twitter 实现同样的目标。

但是，我很难找到使用 Twitter 完成任务的精确分步说明。

我对 Facebook 所做的是：

```
// (1) - Create new Facebook object:
$facebook = new Facebook(array( 
    'appId'  => $this->config->item('facebook_app_id'),  
    'secret' => $this->config->item('facebook_app_secret')
));

// (2) - Get all fields relating to logged-in user:
$facebook_user = $facebook->getUser();

// (3) - Retrieve all fields which we need to register a user on OUR website:
if ($facebook_user){//if logged in to Facebook:
    $facebook_user_profile = $facebook->api('/me');
    $fb_email        = $facebook_user_profile["email"];
    $fb_first_name   = $facebook_user_profile["first_name"];
    $fb_last_name    = $facebook_user_profile["last_name"];
    // ...
} 
```

问题 1：

如何使用 Twitter 实现相同的目标？

问题2：

我创建了一个应用程序（https://dev.twitter.com/apps/new），现在有 4 个代码（消费者密钥、消费者密钥、访问令牌、访问令牌密钥），我不知道这些代码是什么，但是我需要这 4 个代码来完成手头的任务吗？

任何建议或在线资源都会很棒...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:13:20.240

下载 tmhOauth 类[https://github.com/themattharris/tmhOAuth](https://github.com/themattharris/tmhOAuth)

```
$settings['consumer_key']   = 'your_key';
$settings['consumer_secret']= 'your_secret';

parse_str( $_SERVER['QUERY_STRING'], $_REQUEST );

require 'twitter/tmhoauth.php';
require 'twitter/tmhUtilities.php';

$this->_twitter = new Tmhoauth($settings);

if ( isset($_SESSION['access_token']) ) { //if already logged
    $this->_twitter->config['user_token']  = $_SESSION['access_token']['oauth_token'];
    $this->_twitter->config['user_secret'] = $_SESSION['access_token']['oauth_token_secret'];

    $code = $this->_twitter->request('GET', $this->_twitter->url('1/account/verify_credentials'));
    if ($code == 200) {
        // save user data
    }
} elseif (isset($_REQUEST['oauth_verifier'])) { // we're being called back by Twitter
    $code = $this->_twitter->request('POST', $this->_twitter->url('oauth/access_token', ''), array(
        'oauth_verifier' => $_REQUEST['oauth_verifier'],
        'oauth_token' => $_REQUEST['oauth_token']
    ));

    if ($code == 200) {
        $_SESSION['access_token'] = $this->_twitter->extract_params($this->_twitter->response['response']);
        // save user data
    }
} else{ // login url for your "connect with twitter" button
    $here = tmhUtilities::php_self();
    $callback = isset($_REQUEST['oob']) ? 'oob' : $here;
    $params = array( 'oauth_callback' => $callback );

    $code = $this->_twitter->request('POST', $this->_twitter->url('oauth/request_token', ''), $params);

    if ($code == 200) {
        $test_this = $this->_twitter->extract_params($this->_twitter->response['response']);
        $_SESSION['oauth'] = $test_this;
        $method = isset($_REQUEST['authenticate']) ? 'authenticate' : 'authorize';
        $force  = isset($_REQUEST['force']) ? '&force_login=1' : '';
        $authurl = $this->_twitter->url("oauth/{$method}", '') .  "?oauth_token={$test_this['oauth_token']}{$force}";
        $this->_loginUrl = $authurl;
    }
} 
```

无法使用 twitter api 检索用户的电子邮件地址。

# mysql - 在 Oracle 和 MySQL 之间添加日期的便携式方法？

> ID：12568771
> 
> 赞同：0
> 
> 时间：2012-09-24T16:05:21.530
> 
> 标签：mysql, oracle, portability, date-math

有没有办法添加可以在 Oracle 和 MySQL 之间移植的日期/时间？

例如，在 Oracle 中，添加`col + 1`到日期列将添加一天。

在 MySQL 中，添加`col + 1`到`datetime`列将添加 SECOND。

是否有一个函数可以在两者中给出相同的结果？

`order by`（例如，我正在尝试`order by col1 + col2/(60*24)`在 SELECT 或 WHERE 中使用它 - 如果它是 SELECT 或 WHERE 的一部分，可能会有更好的选择。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:38:47.127

```
select datecolumn + interval '1' day 
from your_table 
```

适用于[Oracle](http://www.sqlfiddle.com/#!4/d41d8/2795)和[MySQL](http://www.sqlfiddle.com/#!2/d41d8/2288)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T13:11:41.447

如果您正在寻找使用相同查询集在 oracle 和 MySQL 上运行的应用程序，您是否考虑过附带一个脚本，该脚本将创建存储过程来完成您需要的次要工作，例如创建您需要的 DATE_ADD_DAYS 过程然后打电话。sproc 包含 db 特定的东西，您的应用程序仅包含对您知道将存在的这些 sprocs 的调用（因为它们在您的安装脚本中）

# c# - c#错误捕获wmi

> ID：12568774
> 
> 赞同：0
> 
> 时间：2012-09-24T16:05:32.170
> 
> 标签：c#, c#-4.0, wmi

我有以下代码通过物理磁盘并显示 WMI 设置。

我注意到，如果 WMI 参数不存在，它不会显示任何内容（这很好），但这会干扰服务器上存在的后续 WMI 参数，并且它们现在不显示任何内容......即使它们应该......下面的例子。

所以，我的意思是代码通过这部分：

```
 lblcapability_desc.Text = "Capability Description: " + moDisk["CapabilityDescription"].ToString();
                    lblAvailability.Text = "Availability: " + moDisk["Availability"].ToString();
                    lblbytepersector.Text = "Bytes per Sector: " + moDisk["BytesPerSector"].ToString();
                    lbl_deviceid.Text = "Device ID: " + moDisk["systemname"].ToString(); 
```

它首先获取 SystemName，然后获取 Type，依此类推。

现在，如果在计算机上说“可用性”的 WMI 参数不存在，那么它将不会显示。那也行。但是，紧接在“可用性”之后有“每个扇区的字节数”参数和其他参数。这些参数也不显示任何内容（尽管我知道它们应该显示一些东西，因为它们确实存在于服务器上 - 通过 powershell 测试）。

好像“可用性”中缺少信息会干扰之后的参数并且不显示任何内容。

在解决这个问题时我能想到的唯一方法（这样即使可用性只显示后续参数显示他们需要的数据）是可能在每个 WMI 参数中添加一个 IF THEN - 不是很好的编码，但想不出解决此问题的一种方法。

所以一个例子是 IF [Availbility] 然后消息“Avialbility = 不管” ELSE “WMI 参数未找到”。这样，每个 WMI 参数都有自己的错误检查。我想不是很好的编码..

如果 WMI 参数不存在，则已捕获错误，然后向最终用户显示注释。

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Management;
using Microsoft.Win32;

namespace diskdrive_info
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            //Get all the disk drives
            ManagementObjectSearcher mosDisk = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
            // Loop through each object (disk) retrieved by WMI
            foreach (ManagementObject moDisk in mosDisk.Get())
            {
                cmbHdd.Items.Add(moDisk["Model"].ToString());
            }
        }

        private void cmbHdd_SelectedIndexChanged(object sender, EventArgs e)
        {
            try
            {
                ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");
                foreach (ManagementObject moDisk in mosDisks.Get())
                {

                    lblSystemName.Text = "SystemName: " + moDisk["systemname"];
                    lblType.Text = "Type: " + moDisk["MediaType"].ToString();
                    lblModel.Text = "Model: " + moDisk["Model"].ToString();
                    lblCapacity.Text = "Capacity: " + moDisk["Size"].ToString() + " bytes (" + Math.Round(((((double)Convert.ToDouble(moDisk["Size"]) / 1024) / 1024) / 1024), 2) + " GB)";
                    lblPartitions.Text = "Partitions: " + moDisk["Partitions"].ToString();
                    lblSectors.Text = "Sectors: " + moDisk["SectorsPerTrack"].ToString();
                    lblSignature.Text = "Signature: " + moDisk["Signature"].ToString();
                    lblFirmware.Text = "Firmware: " +moDisk["FirmwareRevision"].ToString();
                    lblFirmware.Text = "Firmware: " + moDisk["FirmwareRevision"] == null ? "Not Available" : moDisk["FirmwareRevision"].ToString();
                    lblcapability_desc.Text = "Capability Description: " + moDisk["CapabilityDescription"].ToString();
                    lblAvailability.Text = "Availability: " + moDisk["Availability"].ToString();
                    lblbytepersector.Text = "Bytes per Sector: " + moDisk["BytesPerSector"].ToString();
                    lbl_deviceid.Text = "Device ID: " + moDisk["systemname"].ToString();
                }
            }
            catch (Exception exp)
            {
                lblError.Text = "Some properties were not shown due to WMI errors or member not available on this system";
            }

        }

        private void btn_clear_Click(object sender, EventArgs e)
        {
            //lblSystemName.Text = string.Empty;
            lblSystemName.Text = "SystemName: " + "";
            lblType.Text = "Type: " + "";
            lblModel.Text = "Model: " + "";
            lblCapacity.Text = "Capacity: " + "";
            lblPartitions.Text = "Partitions: " + "";
            lblSectors.Text = "Sectors: " + "";
            lblSignature.Text = "Signature: " + "";
            lblFirmware.Text = "Firmware: " + "";
            lblError.Text = String.Empty;
            cmbHdd.Items.Clear();
            cmbHdd.Text = "";
            ManagementObjectSearcher mosDisk = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
            foreach (ManagementObject moDisk in mosDisk.Get())
            {
                cmbHdd.Items.Add(moDisk["Model"].ToString());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:06:09.930

## 您遇到的问题

> 好像“可用性”中缺少信息会干扰之后的参数并且不显示任何内容。

部分情况是这样：“可用性”不存在并且抛出 NullReferenceException。在分配标签之前检查它是否为空（代码似乎正在使用 FirmwareRevision 执行此操作）。

```
lblAvailability.Text = "Availability: " + moDisk["Availability"] != null ? moDisk["Availability"].ToString() : string.Empty; 
```

问题的第二部分是你包装了整个方法体，包括 try-catch 中的迭代语句。如果块中发生未处理的异常`try`，则执行切换到`catch`块。

## 额外的功劳：使用泛型和反射简化 WMI 报告

我已经看到很多实例，其中 WMI 信息直接从 WMI 查询对象显示在 UI 中，您在 UI 中看到类似这样的内容几千次：

```
lblName.Text = mgmtObjQuery["Name"] 
```

虽然这确实给了你想要的结果，但有更有效的方法可以做到这一点，不会导致过早脱发。等到您的 PM 扩展要求以包括来自 root\cimv2 的另外 20 个类。

我想出了一个解决方案来使用泛型、强类型类和反射来获取 WMI 信息来完成繁重的工作，现在我的代码看起来更像这样：

```
lblName.Text = disk.Name; 
```

首先，为 WMI 类创建一个模型。类名及其字段名都应对应于相同的 WMI 类名和字段。类和字段应该是公共的，并且数据类型也应该匹配 C# 数据类型。

转到[Win32_DiskDrive 的 MSDN 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)，并生成一个如下所示的类：

```
/// <summary>
/// A Win32_DiskDrive class based on 
/// http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132(v=vs.85).aspx
/// </summary>
public class Win32_DiskDrive 
{
    public UInt16 Availability;
    public UInt32 BytesPerSector;
    public UInt16[] Capabilities ;
    public string[] CapabilityDescriptions ;
    public string Caption;
    public string CompressionMethod;
    public UInt32 ConfigManagerErrorCode;
    public bool ConfigManagerUserConfig;
    public string CreationClassName;
    public UInt64 DefaultBlockSize;
    public string Description;
    public string DeviceID;
    public bool ErrorCleared;
    public string ErrorDescription;
    public string ErrorMethodology;
    public string FirmwareRevision;
    public UInt32 Index;
    public DateTime InstallDate;
    public string InterfaceType;
    public UInt32 LastErrorCode;
    public string Manufacturer;
    public UInt64 MaxBlockSize;
    public UInt64 MaxMediaSize;
    public bool MediaLoaded;
    public string MediaType;
    public UInt64 MinBlockSize;
    public string Model;
    public string Name;
    public bool NeedsCleaning;
    public UInt32 NumberOfMediaSupported;
    public UInt32 Partitions;
    public string PNPDeviceID;
    public UInt16[] PowerManagementCapabilities ;
    public bool PowerManagementSupported;
    public UInt32 SCSIBus;
    public UInt16 SCSILogicalUnit;
    public UInt16 SCSIPort;
    public UInt16 SCSITargetId;
    public UInt32 SectorsPerTrack;
    public string SerialNumber;
    public UInt32 Signature;
    public UInt64 Size;
    public string Status;
    public UInt16 StatusInfo;
    public string SystemCreationClassName;
    public string SystemName;
    public UInt64 TotalCylinders;
    public UInt32 TotalHeads;
    public UInt64 TotalSectors;
    public UInt64 TotalTracks;
    public UInt32 TracksPerCylinder;

    public Win32_DiskDrive()
    {

    }
} 
```

这种通用方法将完成繁重的工作。此方法使用反射将字段名称映射到 WMI 查询结果。空值检查和日期时间转换都在一个地方处理：

```
/// <summary>
/// Generic method that uses reflection for wiring up a local class to the corresponding win32_class and properties.
/// </summary>
/// <typeparam name="T">A class who's name and fields correspond to those of a WMI class.</typeparam>
/// <returns>A collection of WMI data.</returns>
public static IEnumerable<T> WmiSnapshot<T>()
{
    // The name of T must match that of the WMI class
    var searcher = new ManagementObjectSearcher(new SelectQuery(Activator.CreateInstance<T>().GetType().Name));

    foreach (ManagementObject managementObject in searcher.Get())
    {
        // Creates an instance of T
        var listItem = Activator.CreateInstance<T>();
        // an array of PUBLIC FIELDS of T
        var fields = listItem.GetType().GetFields();
        // matches a value from the WMI query to a field name
        foreach (FieldInfo field in fields)
        {
            if (managementObject[field.Name] != null)
            {
                field.SetValue(listItem,
                    field.FieldType == typeof(DateTime)
                        ? ManagementDateTimeConverter.ToDateTime(managementObject[field.Name].ToString())
                        : Convert.ChangeType(managementObject[field.Name], field.FieldType));
            }
        }
        yield return listItem;
    }
} 
```

我将 WMI 类和 WMI 辅助方法保存在它们自己的类中，以便从 UI 调用。UI 代码更易于阅读且更易于调试。

这是一个将快照的结果输出到控制台的快速示例：

```
var disks = WmiHelper.WmiSnapshot<Win32_DiskDrive>().ToList(); 

StringBuilder sb = new StringBuilder(); 

foreach (Win32_DiskDrive disk in disks)
{
    sb.AppendFormat("SystemName: {0}\r\n", disk.SystemName);
    sb.AppendFormat("Type: {0}\r\n",  disk.MediaType);
    sb.AppendFormat("Model: {0}\r\n",  disk.Model);
    sb.AppendFormat("Capacity: {0}\r\n", disk.Size );
    sb.AppendFormat("Partitions: {0}\r\n", disk.Partitions);
    sb.AppendFormat("Sectors: {0}\r\n",  disk.SectorsPerTrack);
    sb.AppendFormat("Signature: {0}\r\n", disk.Signature);
    sb.AppendFormat("Firmware: {0}\r\n",  string.IsNullOrEmpty(disk.FirmwareRevision) ? "Not Available" : disk.FirmwareRevision);
    sb.AppendFormat("Capability Description: {0}\r\n", string.Join("\r\n", disk.CapabilityDescriptions));
    sb.AppendFormat("Availability: {0}\r\n", disk.Availability);
    sb.AppendFormat("Bytes per Sector: {0}\r\n", disk.BytesPerSector);
    sb.AppendFormat("Device ID: {0}\r\n", disk.DeviceID);
    sb.AppendLine();
}

Console.WriteLine(sb.ToString()); 
```

输出看起来像这样：

```
系统名称：UVVXWVXXWV
类型：固定硬盘介质
型号：ST9500420AS
容量：500105249280
分区：4
部门：63
签名：2210653369
固件：0006
能力描述：随机访问
支持写作
智能通知
可用性：0
每个扇区的字节数：512
设备 ID：\\.\PHYSICALDRIVE0

```

[现在对Win32_ComputerSystem](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394102%28v=vs.85%29.aspx)然后[Win32_Product](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394378%28v=vs.85%29.aspx)重复相同的操作！

让我知道这是否能让你朝着正确的方向前进。

# c++ - 将模板方法移动到导数中断编译

> ID：12568776
> 
> 赞同：5
> 
> 时间：2012-09-24T16:05:45.243
> 
> 标签：c++, inheritance, overloading

给定以下代码：

```
template<typename T>
class A
{
public:
   T t;
};

class B
{
public:
   void foo(int i) {}

   template<typename T>
   void foo(A<T>& a) {}
};

int main()
{
   A<int> a;
   B      b;

   b.foo(a  );
   b.foo(a.t);
} 
```

这可以编译并正常工作；`B::foo()`选择并要求`a`和的正确重载版本`a.t`。

现在我介绍一个新类`C`，它派生自`B`并将模板版本`::foo()`移出`B`和移入`C`：

```
template<typename T>
class A
{
public:
   T t;
};

class B
{
public:
   void foo(int i) {}
};

class C: public B
{
public:
   template<typename T>
   void foo(A<T>& a) {}
};

int main()
{
   A<int> a;
   C      c;

   c.foo(a  ); // Fine
   c.foo(a.t); // Error
} 
```

现在代码将不再编译。Visual Studio 2005 声明：

```
error C2784: 'void C::foo(A<T> &)' : could not deduce template argument for 'A<T> &' from 'int' 
```

事实上，`C::foo()`使用任何`int`值调用都会导致此错误。似乎方法重载`int`被模板重载隐藏了。

为什么会这样？Visual Studio 2005 的编译器有问题吗？不幸的是，我现在无法在任何其他编译器上测试它。

任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:10:05.877

> 似乎 int 的方法重载被模板重载隐藏了。

确切地！您需要向 C 类添加 using 声明：

```
class C: public B
{
 public:
  using B::foo;
  template<typename T>
  void foo(A<T>& a) {}
}; 
```

在派生类中声明成员函数时，基类中的所有同名成员函数都将被隐藏。参见 ISO/IEC 14882:2011 的 §3.3.10/3：

> 派生类中成员的声明（第 10 条）隐藏了同名基类成员的声明；见 10.2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:10:01.117

它是隐藏的，没有超载。采用

```
class C: public B
{
public:
   using B::foo;
   template<typename T>
   void foo(A<T>& a) {}
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:11:15.570

正确，基本功能是*隐藏*的。这实际上是它的适当术语。添加`using B::foo;`到类定义`C`以取消隐藏它。

# sql-server - 使用 UNPIVOT 将列转置为行

> ID：12568779
> 
> 赞同：1
> 
> 时间：2012-09-24T16:05:48.017
> 
> 标签：sql-server, sql-server-2008, tsql

我有一张表，由于某种原因，它具有如下硬编码值：

```
Row ID    QtyC1   QtyC2  QtyC3   QtyC4  QtyN1   QtyN2  QtyN3   QtyN4  
100       10      5      8       9      11      12     5       6
101       9       11     12      5      6       10     4       9 
```

该表有 35 列和大约 12k 条记录（意味着大约 500k 值），并且正在不断添加和修改。

我试图将其转换为：

```
Row ID  Year  Period  Val
100     C     1       10
100     C     2       5
100     C     3       8
100     C     4       9
100     N     1       11
100     N     2       12
100     N     3       5
100     N     4       6 
```

到目前为止，我已经设法使用此查询将其拆分为单个值：

```
SELECT Row ID, YP, Val

FROM (SELECT Row ID
    , QtyC1 AS C1
    , QtyC2 AS C2
    , QtyC3 AS C3
    , QtyC4 AS C4
    , QtyN1 AS N1
    , QtyN2 AS N2
    , QtyN3 AS N3
    , QtyN4 AS N4

FROM MyTable
) SUB
UNPIVOT (Val FOR YP IN (C1,C2,C3,C4,N1,N2,N3,N4)) AS PVT 
```

这给了我一个单一的识别值（例如`C1`），但是我怎样才能分割它，所以我有一个数字句点和一个年份的单个字符（`1`和`C`）？

我可以看到将字符串分成两部分可能是可能的，但如果可能的话，我希望有一种更清洁的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:28:36.777

您可以使用, ,等轻松拆分`YP`字符串。我的建议是您如何处理. 看起来你有很多列，所以我的建议可能是实现动态 SQL 来执行这个查询。你会这样做：`LEFT()``RIGHT()``SUBSTRING()``UNPIVOT``UNPIVOT`

```
declare @colsUnpivot varchar(max),
  @query  AS NVARCHAR(MAX),
  @cols  varchar(max)

select @colsUnpivot = stuff((select ','
                             +quotename(replace(C.name, 'Qty', ''))
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name like 'Qty%'
         for xml path('')), 1, 1, '')

select @cols = stuff((select ','
                      +quotename(C.name) + ' as ' + replace(C.name, 'Qty', '')
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name like 'Qty%'
         for xml path('')), 1, 1, '')

set @query 
  = 'select rowid, 
          left(YP, 1) YP,
          cast(right(YP, len(YP) - 1) as int) period,
          Val
     from
     (
        select rowid, ' + @cols + '
        from yourtable
     ) x1
     unpivot
     (
        val for YP IN (' + @colsUnpivot + ')
     ) u'

exec(@query) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/28365/23)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:30:32.017

为什么这看起来不干净？

```
SELECT Row ID, left(YP, 1) as year, cast(right(yp, 1) as int) as period, Val
FROM (SELECT Row ID
    , QtyC1 AS C1
    , QtyC2 AS C2
    , QtyC3 AS C3
    , QtyC4 AS C4
    , QtyN1 AS N1
    , QtyN2 AS N2
    , QtyN3 AS N3
    , QtyN4 AS N4
FROM MyTable
) SUB
UNPIVOT (Val FOR YP IN (C1,C2,C3,C4,N1,N2,N3,N4)) AS PVT 
```

# javascript - 可以输入限制为html?

> **Possible Duplicate:**
> [this](https://stackoverflow.com/questions/451491/what-is-the-best-way-to-emulate-an-html-input-maxlengt</h1>
> <blockquote>
>         <p>ID：12568780</p>
>         <p>赞同：2</p>
>         <p>时间：2012-09-24T16:05:53.523</p>
>         <p>标签：javascript, html</p>
>         </blockquote>
>                
> 
>     
>     
>             <hr/>
>             <h2>回答 #1</h2>
>             <blockquote>
>             <p>赞同：3</p>
>             <p>时间：2012-09-24T16:09:02.260</p>
>             </blockquote>
>             
> 
> <p>这是 HTML5 的解决方案，IE9 或更早版本不支持（根据<a href=)）：
> 
> ```
> <textarea maxlength="255"></textarea> 
> ```
> 
> 由于您可能无法放弃对 IE9（甚至可能是 IE8）的支持，因此建议您将其与 JavaScript 结合使用，以防止 textarea 上的`keydown`和`paste`事件的默认行为，正如 standup75 所建议的那样。
> 
> 以下是使用纯 JavaScript 的方法：
> 
> ```
> <textarea id="txtarea" maxlength="255"></textarea>
> <script>
> var field = document.getElementById('txtarea');
> if(field.addEventListener) {
>     field.addEventListener('keydown', enforceMaxlength);
>     field.addEventListener('paste', enforceMaxlength);
> } else {
>     // IE6-8
>     field.attachEvent('onkeydown', enforceMaxlength);
>     field.attachEvent('onpaste', enforceMaxlength);
> }
> 
> function enforceMaxlength(evt) {
>    var maxLength = 255;
>     if(this.value.length >= maxLength) {
>         evt.preventDefault()
>     }
> }
> </script> 
> ```
> 
> [http://jsfiddle.net/snJwn/](http://jsfiddle.net/snJwn/)
> 
> * * *
> 
> ## 回答 #2
> 
> > 赞同：2
> > 
> > 时间：2012-09-24T16:10:17.857
> 
> HTML5 提供了 maxLength 属性。否则，你需要一些 javascript，在 jQuery 中，你会做类似的事情
> 
> ```
> maxLength = 50;
> $("textarea").on("keydown paste", function(e){
>   if ($(this).val().length>=maxLength) e.preventDefault();
> }); 
> ```
> 
> * * *
> 
> ## 回答 #3
> 
> > 赞同：2
> > 
> > 时间：2012-09-24T16:14:39.993
> 
> 您可以使用`maxlength="255"`（它指定元素中允许的最大字符数。）
> 
> 或者你也可以通过 jquery来完成[这里](http://www.yelotofu.com/2009/12/jquery-textarea-max-length/)我找到了教程
> 
> html
> 
> ```
> <textarea cols="30" rows="5" maxlength="10"></textarea> 
> ```
> 
> jQuery
> 
> ```
> jQuery(function($) {
> 
>   // ignore these keys
>   var ignore = [8,9,13,33,34,35,36,37,38,39,40,46];
> 
>   // use keypress instead of keydown as that's the only
>   // place keystrokes could be canceled in Opera
>   var eventName = 'keypress';
> 
>   // handle textareas with maxlength attribute
>   $('textarea[maxlength]')
> 
>     // this is where the magic happens
>     .live(eventName, function(event) {
>       var self = $(this),
>           maxlength = self.attr('maxlength'),
>           code = $.data(this, 'keycode');
> 
>       // check if maxlength has a value.
>       // The value must be greater than 0
>       if (maxlength && maxlength > 0) {
> 
>         // continue with this keystroke if maxlength
>         // not reached or one of the ignored keys were pressed.
>         return ( self.val().length < maxlength
>                  || $.inArray(code, ignore) !== -1 );
> 
>       }
>     })
> 
>     // store keyCode from keydown event for later use
>     .live('keydown', function(event) {
>       $.data(this, 'keycode', event.keyCode || event.which);
>     });
> 
> }); 
> ```
> 
> [活生生的例子](http://yelotofu.com/labs/jquery/snippets/textarea/)

# ruby-on-rails - 如何管理动态关系？

> ID：12568782
> 
> 赞同：0
> 
> 时间：2012-09-24T16:06:01.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord

我需要帮助创建一个合适的数据库结构，让我能够动态地创建“字段”和“值”。我计划使用以下 5 个表。

1.  特质类别
2.  团体
3.  特征分组
4.  人们
5.  特质价值观

`TraitCategories`表*仅*包含特征的类别（即“字段”）——即头发颜色、身高等——并且可以根据需要添加/删除类别。

`Groups`表包含临时/动态组标签——即亚洲、南美等。

`TraitGroupings`是和的连接`TraitCategories`表`Groups`

该`People`表将`Groups`通过外键链接到该表，因此将通过利用`Groups`和`TraitCategories`表之间的关系为特征分配各种类别（字段）。

但问题是，如何将**每个人**的值分配给特征类别/字段？

我正在考虑让表中的每一行都`TraitValues`包含`person_id`，以便表与表和表`trait_category_id`之间存在关系。这种方法有意义吗？这种方法是否允许我通过表格获取特征类别和值？`TraitValues``People``TraitCategories``People`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:08:42.333

您正在描述一种[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)形式。

我不确定这在 Ruby 中表示有多实用，但在你的情况下，数据库模型看起来类似于：

![在此处输入图像描述](../Images/39f5eaec350ddc413a574157b80017ff.png)

*（为简洁起见，省略了大多数非关键字段。）*

请注意我们如何大量使用识别关系。这就是让我们`GroupId`在“菱形”依赖项的两侧传播的原因，并将其合并到底部的单个字段中，在`TraitValue`.

这是确保一个人不能具有特征的原因，除非它也被列在该人的组中。例如，**只有**当该人的组也具有“头发颜色”时，该人才能具有“头发颜色”。

* * *

顺便提一句...

> People 表将通过外键链接到 TraitGroupings——因此将被分配各种类别（字段）的特征。

如果`People`有一个直接引用的 FK `TraitGroupings`，那么一个人最多可以有一个特征分组，因此最多可以有一个特征类别。从你的问题的措辞来看，这似乎不是你想要的。

# java - 在使用 System.currentTimeMillis() 的方法中返回 long

> ID：12568784
> 
> 赞同：0
> 
> 时间：2012-09-24T16:06:10.577
> 
> 标签：java, time, casting, long-integer

我正在编写一种方法来计算算法的运行时间。该算法运行指定次数的试验，然后我使用 System.currentTimeMillis() 计算运行时间。但是，每当我调用该方法时，值总是最终为零。任何解决此问题的方向都值得赞赏。

```
public long runTime(algorithm alg, int[] array, int trials)
{

    long initialTime = System.currentTimeMillis();

    for(int i = 0; i < trials; i++)
    {
        alg.runAlgorithm(array); 
    }

    return ((System.currentTimeMillis() - initialTime) / (long) trials);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:12:16.047

`((System.currentTimeMillis() - initialTime) / (long) trials);`

似乎该算法完成其循环所需的时间少于 a `1 ms`，因此您需要将其分解为更小的单元...使用`nanoTime()`可能会为您完成工作...

**例如：**

```
public long runTime(algorithm alg, int[] array, int trials)
{

    long initialTime = System.nanoTime();

    for(int i = 0; i < trials; i++)
    {
        alg.runAlgorithm(array); 
    }

    return ((System.nanoTime() - initialTime) / (long) trials);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:14:35.543

如果您的返回值小于 1。使用返回类型`double`。`double`在您的示例中，您应该使用`long`.

# mysql - 同时从 2 个表中删除数据

> ID：12568786
> 
> 赞同：0
> 
> 时间：2012-09-24T16:06:19.700
> 
> 标签：mysql, sql, phpmyadmin, sql-delete

我有桌子`products`和桌子`product_comments`（与桌子的关系`products`：）`product_id`。现在我需要从表中删除一些产品`products`，如果这个产品在表中有一些记录`product_comments`，也删除那些。

在 PhpMyAdmin 中可能有类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:12:11.397

尝试

```
delete p, c 
from products p
left outer join product_comments c on c.product_id = p.product_id
where p.product_id = 1 
```

## [SQL 小提琴示例](http://sqlfiddle.com/#!2/69d8b/1)

# java - Java 服务器和客户端套接字需要修复

> ID：12568790
> 
> 赞同：0
> 
> 时间：2012-09-24T16:06:25.070
> 
> 标签：java, sockets

您好，我是 Java 套接字编程的新手，我只是想看看是否有人可以给我一些帮助。

我将发布客户端和服务器的代码，然后我将解释我的问题......

```
 reader = new BufferedReader(new InputStreamReader(socket.getInputStream));

        while(running)
        {
            String line = reader.readLine();

            if(line != null)
            {
                System.out.println(line);
                stream = new PrintStream(socket.getOutputStream());
                stream.println("return: " + line);
            }

        }

    }catch(IOException e)
    {
        System.out.println("Socket in use or not available: " + port);
    }
}

public static void main()
{
    run();
}

//Client

public static String ip;
public static int port;

public static Socket socket;
public static PrintStream stream;
public static BufferedReader reader;

public static void main(String args[])
{

    try
    {
        socket = new socket(ip, port);
        stream = new PrintStream(socket.getOutputStream());
        stream.println("test0");
        reader = new BufferedReader(new  InputStreamReader(socket.getInputStream));
        String line = reader.readLine();

        if(line != null)
        {
            System.out.println(line);
        }   

        stream.println("test1");
        line = reader.readLine();

        if(line != null)
        {
            System.out.println(line);   
        }   
    }catch(IOException e)
    {
            System.out.println("could not connect to server!");
    }
} 
```

所以我的问题是，即使我摆脱了循环并尝试让它发送两次字符串，它也不会发送它。除非我关闭并在客户端创建一个新套接字，否则它只会执行一次。因此，如果有人能给我解释我做错了什么，那就太好了，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:18:23.623

为什么要在循环内打开外流？ `stream = new PrintStream(socket.getOutputStream());`

将此语句放在循环之外并写入您`stream`的循环内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:45:00.107

非常感谢所有回答的人，但我知道它一直都是什么。我通读了一些 Oracle 套接字的东西，发现服务器应该是第一个发送消息的人，而不是客户端接收和发送和接收......等等，所以我将在这里发布我的新代码希望其他试图弄清楚同样事情的人可以轻松找到它

```
 //Client    
public static String ip;
public static int port;

public static Socket socket;
public static PrintWriter print;
public static BufferedReader reader;

public Client(String ip, int port)
{
    this.ip = ip;
    this.port = port;

            //initiate all of objects
    try 
    {
        socket = new Socket();
        socket.connect(new InetSocketAddress(ip, port), 5000);
        print = new PrintWriter(socket.getOutputStream());
        reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            //start connection with server
        String line = reader.readLine();
        System.out.println(line);
    } catch (IOException e) 
    {
        e.printStackTrace();
    }
}

    //quick method to send message
public void sendMessage(String text)
{
    print.println(text);
    print.flush();
    try 
    {
        String line = reader.readLine();
        System.out.println(line);
    } catch (IOException e) 
    {
        e.printStackTrace();
    }
}
}

public static void main(String args[])
{
    client.sendMessage("test");
    client.sendMessage("test2");
    client.sendMessage("test3")
}

    //Server

public static int port = 9884;
public static boolean running = true;

public static ServerSocket serverSocket;
public static Socket socket;
public static PrintWriter writer;
public static BufferedReader reader;

public static void run()
{
    try 
    {
        serverSocket = new ServerSocket(port);
        socket = serverSocket.accept();
        writer = new PrintWriter(socket.getOutputStream(), true);
        writer.println("connection");

        while(running)
        {
            reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            String line = reader.readLine();

            if(line != null)
            {
                System.out.println(line);
                writer.println(line);
                writer.flush();
            }
        }
    } catch (IOException e) 
    {
        e.printStackTrace();
    }
}

public static void main(String args[])
{
    run();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:15:08.743

请保持简单，

尝试使用`InputStream, InputStreamReader, BufferedReader, OutputStream, PrintWriter.`

**客户端：**

```
Socket s = new Socket();
s.connect(new InetSocketAddress("Server_IP",Port_no),TimeOut); 
// Let Timeout be 5000 
```

**服务器端：**

```
ServerSocket ss = new ServerSocket(Port_no);
Socket incoming = ss.accept(); 
```

**从套接字读取：**

```
InputStream is = s.getInputStream();
InputStreamReader isr = new InputStreamReader(is);

BufferedReader br = new BufferedReader(isr);
boolean isDone = false;

String s = new String();

while(!isDone && ((s=br.readLine())!=null)){

     System.out.println(s);   // Printing on Console

 } 
```

**对于写入套接字：**

```
OutputStream os = s.getOuptStream();
PrintWriter pw = new PrintWriter(os)

pw.println("Hello"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:17:54.027

确保刷新服务器的输出：

```
stream.flush(); 
```

# java - 如何为绘制方法准备可访问数据

> ID：12568793
> 
> 赞同：0
> 
> 时间：2012-09-24T16:06:50.943
> 
> 标签：java

我对下面的脚本有问题 - 我不知道如何移动到下一点。这部分脚本将显示我的 XML (input.xml) 文件中的坐标。但是我想画线（坐标x0，y0，x1，y1）-从我的输入中获得，如果我返回xList和yList，我可以看到它们，但我真的不知道如何继续，如何准备它们以供访问一种绘画方法（图形g）。

谢谢

公共无效字符（char ch[]，int start，int 长度）抛出 SAXException {

```
 if (xele)
    {
        System.out.println("X value : " + new String(ch, start, length));
        xele = false;
        xList.add(Integer.parseInt(new String(ch, start, length)));
    }

    if (yele)
    {
        System.out.println("Y value : " + new String(ch, start, length));
        yele = false;
        yList.add(Integer.parseInt(new String(ch, start, length)));
    }
}

public List<Integer> getXList()
{
    return xList;

}

public List<Integer> getYList()
{
    return yList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:14:13.347

`xList`并且`yList`应该是静态的 - 然后它们将可以通过 `ClassName.xList.get`and访问`ClassName.yList.get`

# javascript - 验证文本框检查它是否首先不是只读的

> ID：12568794
> 
> 赞同：1
> 
> 时间：2012-09-24T16:06:53.387
> 
> 标签：javascript, asp.net, validation

我有一个具有两种模式的表单，一种允许编辑（文本框的值）

以及（非经理）用户的另一种模式 - 将“READONLY”添加到 TextBox 标记后面的代码。

因此，对于只读“模式”，文本框中根本不接受任何输入

我的问题是如何根据文本框的“READONLY”属性执行验证方法？

strRo = "READONLY" 在一个条件下

```
<asp:TextBox ID="txtNumbers" runat="server" <%=strRo %> onkeypress="return allowonlynumbers();" /> 
```

javascript函数

```
 function allowonlynumbers() {
        if (event.keyCode >= 48 && event.keyCode <= 57) {
            return true;
            }

        else {
            alert('Only numbers can be entered');
             return false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:09:51.680

您需要在函数调用中传递对元素的引用，因此将其更改`onkeypress`为：

```
onkeypress="return allowonlynumbers(this);" 
```

然后，您的功能需要是这样的：

```
function allowonlynumbers(obj) {

} 
```

您可以使用的逻辑是：

```
if (obj.readOnly) {
    // The element is readonly
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:20:52.930

您应该在 javascript 中绑定您的事件处理程序（[为什么？](http://en.wikipedia.org/wiki/Separation_of_concerns)）。然后您将能够使用`this`处理程序内部的运算符来引用文本框，您可以检查以下`readOnly`属性：

```
document.getElementById('test').onkeypress = function () {
    if (!this.readOnly) {
        if (event.keyCode >= 48 && event.keyCode <= 57) {
            return true;
        } else {
            alert('Only numbers can be entered');
            return false;
        }
    }
};​ 
```

[http://jsfiddle.net/FedsQ/](http://jsfiddle.net/FedsQ/)

# c - 将数据按 X 位移入和移出文件的最佳方法是什么？

> ID：12568798
> 
> 赞同：0
> 
> 时间：2012-09-24T16:06:57.473
> 
> 标签：c, bit-manipulation

我有一个数据集，由一个掩码文件和一个数据文件组成。掩码文件告诉解码器对于数据文件的当前偏移量，每个字段是否存在 8 位或 4 位。我需要根据掩码将数据移出，并编写解码文件，每个字段全部 8 位。我正在尝试在 C 中完成此操作。

```
void shift_4bits_left(unsigned char* array, unsigned short size)
{
int i;
unsigned char shifted = 0x00;    
unsigned char overflow = (0xF0 & array[0]) >> 4;

    for (i = (size - 1); i >= 0; i--)
    {
    shifted = (array[i] << 4) | overflow;
    overflow = (0xF0 & array[i]) >> 4;
    array[i] = shifted;
    }
} 
```

在功能上：

```
while(len>count){
        //count=0;
        if(bit==0)yy=fread(blockchar,1,len,fp1);
        if(bit==0)memcpy(blockchar2,blockchar,len);
        count+=yy;
        memset(outputbuf,0,64);
        for(x=0;x<len;x++){
        count2=0;
        //count2=1;

        if(sometests(blockchar[x])==1)
        {
          shift_4bits_left(&blockchar[x],(yy-(bittest/2))+1);
          count2=1;
          total++;
          if(total%2==0)len--;
        }

//set bit for current position in mask file's buffer
        if((x)%8 == 0)outputbuf[x]+=(count2<<7);
        if((x)%8 == 1)outputbuf[x]+=(count2<<6);
        if((x)%8 == 2)outputbuf[x]+=(count2<<5);
        if((x)%8 == 3)outputbuf[x]+=(count2<<4);
        if((x)%8 == 4)outputbuf[x]+=(count2<<3);
        if((x)%8 == 5)outputbuf[x]+=(count2<<2);
        if((x)%8 == 6)outputbuf[x]+=(count2<<1);
        if((x)%8 == 7)outputbuf[x]+=count2;
        } 
```

问题是在处理大型数据集时这非常慢，我宁愿对文件进行迭代，而不将文件存储在数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:07:19.357

我通过一次查看 256 个字节来解决它，当不移动时，使用 memcpy。谢谢你们的帮助。

# android - 如何在不使用 java 类中的 findviewbyId 方法的情况下从 android xml 获取 id

> ID：12568799
> 
> 赞同：2
> 
> 时间：2012-09-24T16:07:10.840
> 
> 标签：android

我在我的android项目中使用了2个java类，一个类从android xml获取id，另一个类用于执行活动。我不知道如何访问二等舱以从一等舱获取 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:20:14.637

你无法访问。

当您的第一个 java 类在前台时，您可以访问屏幕上显示的视图

但是当另一个活动是前台时，你为什么要访问不可见的后台活动视图。？？？

**但**

您可以在第一个活动中添加一个方法，输入 id 并返回对象

像这样：

```
View getView(int id) {
   return getViewById(id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:23:53.723

听起来您有一个用于活动的帮助程序类，并且您希望帮助程序类能够访问视图层次结构。当您创建它的实例时，只需将活动实例传递给助手类。然后它可以`findViewById`用来查找感兴趣的视图。

# storyboard - 简单的 3.5 英寸 + 4 英寸 iPhone 屏幕布局需要自动布局？

> ID：12568810
> 
> 赞同：0
> 
> 时间：2012-09-24T16:08:05.940
> 
> 标签：storyboard, xcode4.5, iphone-5, autolayout

我正在将旧应用程序更新为新的 iPhone 尺寸，但遇到了问题。自动布局打破了旧故事板的几块。

没问题，只需进入并取消选中自动布局。再次运行（3.5 英寸屏幕）并再次完美运行，然后在 4 英寸屏幕中运行，没有任何重新调整大小。花接下来的几分钟检查和取消选中自动布局框并在各种屏幕上运行它。这显然是问题所在。

关闭自动布局，在视图控制器中选择顶视图，打开尺寸检查器检查器并查看 Autosizing 框。让视图重新调整大小的内部箭头显示为灰色。你不能选择它们。从示例视图看，很明显视图不会重新调整大小。由于它不会重新调整大小，因此无法在 3.5 英寸和 4 英寸屏幕上正常工作。

有人看到绕过这个限制的（相当简单的）方法吗？

我真的不想更新不需要 UI 更新才能与自动布局一起正常工作的故事板，但另一个选择似乎是编写测试代码并将其放入我所有的视图控制器中，这可能与修复我所有的故事板以使用自动布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:27:14.490

默认情况下，自动布局会生成对需要生成的约束的最佳猜测。这通常并不理想。有时您可以通过简单地调整 Content Hugging 和 Compression Resistance 优先级来绕过此限制。其他时候，您可能需要进入并添加或删除无法提供所需结果的约束。WWDC 视频很好地解释了如何为您的应用程序添加自动布局，包括需要注意的事项（例如设置静态帧大小）。如果您想要有关自动布局的基本教程，可以在此处尝试此博客文章：http: [//bit.ly/RE6VuW](http://bit.ly/RE6VuW)。

# r - R Organize data in a list

> ID：12568813
> 
> 赞同：2
> 
> 时间：2012-09-24T16:08:11.587
> 
> 标签：r

I have a data set that I'd like to organize into a list but am unsure of the most efficient way to do so. It's a list of sales people and products sold:

```
 rowId       repNum       prodNum
   001         12006        335506883
   002         12008        152348345
   003         12055        993047386
   004         12006        294726636
   005         12069        110847537
   006         12006        335506883
   007         12006        152348345
   ...           ...           ... 
```

I'd like to create a list where each element contains a vector of items that rep has sold, my initial idea was to use `tapply` but that needs a function to net by. Any other suggestions?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T16:14:40.680

If your `data.frame` is called `dataset`,

```
split(dataset, dataset$repNum) 
```

will create a list with a component for each `repNum`

* * *

```
> split(dataset, dataset$repNum)
$`12006`
  rowId repNum   prodNum
1     1  12006 335506883
4     4  12006 294726636
6     6  12006 335506883
7     7  12006 152348345

$`12008`
  rowId repNum   prodNum
2     2  12008 152348345

$`12055`
  rowId repNum   prodNum
3     3  12055 993047386

$`12069`
  rowId repNum   prodNum
5     5  12069 110847537 
```

* * *

As [pointed out](https://stackoverflow.com/questions/12568813/r-organize-data-in-a-list/12568923#comment16932251_12568923) by [mrdwab](https://stackoverflow.com/users/1270695/mrdwab), you can get "vector[s] of items that rep has sold" by splitting the `prodNum` like this:

```
> split(dataset$prodNum, dataset$repNum)
$`12006`
[1] 335506883 294726636 335506883 152348345

$`12008`
[1] 152348345

$`12055`
[1] 993047386

$`12069`
[1] 110847537 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T16:23:18.943

Using `tapply()`, you can do it like this:

```
with(dataset, tapply(prodNum, repNum, FUN=function(X) X))
# $`12006`
# [1] 335506883 294726636 335506883 152348345
# 
# $`12008`
# [1] 152348345
# 
# $`12055`
# [1] 993047386
# 
# $`12069`
# [1] 110847537 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:34:27.677

You could also use dlply from plyr:

```
require(plyr) ## install.packages("plyr") if you haven't already
dlply(dataset,"repNum",function(x) return(x$prodNum))
#$`12006`
#[1] 335506883 294726636 335506883 152348345
#
#$`12008`
#[1] 152348345
#
#$`12055`
#[1] 993047386
#
#$`12069`
#[1] 110847537 
```

# mysql - 如何使用内部查询优化 mysql 查询

> ID：12568815
> 
> 赞同：0
> 
> 时间：2012-09-24T16:08:15.070
> 
> 标签：mysql, sql

我总是在以下查询中超时：

```
select * FROM `products` 
where 
    `active`=1 
and `group`=6 
and `id` not in (select `id` from `purcheased` where `userId`=14 and `price`>100 
and `reversed`=0)  
order by `price` asc limit 0,500 
```

这需要 0.01 秒来执行，在这种特殊情况下返回 0 个结果：

```
select `id` from `purcheased` where `userId`=14 and `price`>100 and `reversed`=0 
```

这在 0.02 秒内执行：

```
select * FROM `products` 
where 
    `active`=1 
and `group`= 6 
order by `price` asc limit 0,500 
```

完整的查询

```
select * FROM `products` 
where 
    `active` = 1 
and `group` = 6 
and `id` not in (
                select `id` from `purcheased` 
                where 
                    `userId`=14 
                and `price` > 100 
                and `reversed`=0
                )
order by `price` asc limit 0,500 
```

执行 60 秒！

我认为这是因为 select `id`from `purcheased`... 正在为`products`.

我正在mysql中运行查询。

如何告诉 mysql`id`从`purcheased`一次执行选择而不是重新使用结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:12:08.013

MySQL 使用子查询错误优化 IN 和 NOT IN。您可以将查询重写为相关子查询：

```
select *
FROM `products`
where `active`=1 and `group`=6 and 
      not exists (select `id`
                  from `purchased`
                  where `userId`=14 and `price`>100 and `reversed`=0 and
                         purchased.id = products.id
                 )  
 order by `price` asc
 limit 0,500 
```

如果您在购买的.id 上有一个索引，这也会更好。实际上，如果这是您的表格的形式，那么购买的索引（用户 ID、反向、ID、价格）应该会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:10:50.150

A[`LEFT OUTER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)可能是你最好的选择：

```
select p.*
from `products` p
left outer join (
    select `id`
    from `purcheased`
    where `userId` = 14 
        and `price` > 100 
        and `reversed` = 0
) pu on p.id = pu.id
where p.`active` = 1 
    and p.`group` = 6 
    and pu.id is null
order by p.`price` 
limit 0, 500 
```

# emacs - 如何抑制模式键映射中的某些键序列？

> ID：12568819
> 
> 赞同：1
> 
> 时间：2012-09-24T16:08:24.133
> 
> 标签：emacs, elisp

我目前正在尝试使用 mediawiki-mode 和 yasnippet。它们都在各自的模式映射中绑定了 TAB 键。如何以编程方式调整 mediawiki-mode-map 使其不会重新映射 TAB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:54:31.247

在地图中取消设置键绑定的规范方法是将其设置为 nil。所以：

```
(define-key mediawiki-mode-map (kbd "TAB") nil) 
```

# c++ - 用于随机访问列表的 STL 容器？

> ID：12568821
> 
> 赞同：0
> 
> 时间：2012-09-24T16:08:37.250
> 
> 标签：c++, stl

是否有一个类似于列表的 STL 容器，其中列表的元素不是连续存储的？这个容器的大小可以达到 1000x1000 个元素，每个元素都是一个包含 36 个双精度数的向量。这将是一个大块存储在一起（如约 200 兆字节）。是否有一种变体将指向其内容的指针存储为单独的向量，以便允许随机访问。是否有一个已经存在的 STL 容器类，或者我应该手动存储指针？

我需要的容器实际上是一个恒定大小，所以我认为自己实现它不会太困难，但我想知道是否已经存在一个 STL 容器。我想避免使用向量，因为列表很大并且内容将是中等大小。如果容器中的向量不需要彼此相邻，那么将它们分隔在一个列表中以防止内存不足会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:54:11.110

两者都`deque<array<double, 36>>`将`vector<vector<double>>`避免需要任何真正巨大的连续分配。

在这些`vector<vector<double>>`方面更糟。对于您指定的数字，它需要连续分配`1000*1000*sizeof(vector<double>)`，这是低 10 秒的 MB（很可能 a`vector`是 3 个指针的大小）。这在“适当的计算机”（台式机或服务器）上很少出现问题。由于碎片原因（小虚拟地址空间或根本没有虚拟地址），您可能还会遇到更根本的问题，即您没有 300MB 左右的 RAM。但是你可以通过避免它来玩得更安全，因为显然存在可以分配总共 300MB 但不能连续分配 12MB 的环境。

C++03中没有`std::array`，但是有`boost::array`或者你可以很容易地编写一个类来表示 36 个双精度数。

`vector<array<double, 36>>`碎片最严重，它需要连续的 250 MB 分配。就个人而言，我发现在测试“我们将面临的最糟糕的内存碎片”时模拟并不容易，但我不是最好的测试人员。块的大小大约是我在 32 位进程中开始感到有点不安的地方，但在良好的条件下它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:16:34.763

我强烈建议您使用该`std::array`课程。它是恒定大小的，它支持对所有元素的随机访问，并具有`iterator, const_iterator, reverse_iterator, const_reverse_iterator`. 有关它的更多信息：[http ://www.cplusplus.com/reference/stl/array/](http://www.cplusplus.com/reference/stl/array/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:03:16.063

目前尚不清楚`std::list<T>`您究竟追求什么特征。如果您想要一个容器，其元素在添加或删除元素时保持不变，您可能需要查看`std::deque<T>`：在前面或后面添加/删除元素时，所有其他元素都保持在同一位置。也就是说，指向元素的指针和引用保持有效，除非在中间添加或删除元素。迭代器在任何插入或删除时都无效。`std::deque<T>`提供随机访问。

没有容器直接给予随机访问并支持在任何位置添加/删除元素保持不变。但是，正如其他人指出的那样，使用指针容器提供了这样的接口。可能需要包装它以隐藏指针的使用。

# c# - 使用 emgucv 去除背景

> ID：12568827
> 
> 赞同：1
> 
> 时间：2012-09-24T16:09:24.583
> 
> 标签：c#, emgucv

如何使用 emgucv 从实时视频源中删除背景。我需要像这个[视频](http://www.youtube.com/watch?v=WOEuE3D88b0)这样的东西。我唯一想要的是一个移动的物体或一个人。我尝试了运动检测，但没有达到性能水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-02T11:40:23.420

如果只有背景和光线条件稳定，您就可以这样做。首先获取背景图像。然后获取背景图像和视频帧之间的差异。最后，屏蔽零值像素。换句话说：

（bg：背景图像，cf：当前帧，ri：结果图像）

1.  ri = bg - cf
2.  阈值：将零值像素设为黑色，其他像素设为白色。其他像素属于运动物体（视频中的男人）
3.  找到白色斑点
4.  掩盖cf上的那些白色斑点
5.  在你想要的任何其他背景上过去那些面具

对每一帧视频执行这些步骤

# sql - SQL Server 2008 R2：验证文本列中的 MAC 地址

> ID：12568828
> 
> 赞同：2
> 
> 时间：2012-09-24T16:09:26.250
> 
> 标签：sql, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我有一个表，`EQUIPMENT`其中有一列`MACADDRESS`类型为`nvarchar(50)`。

我需要构建一个仅包含有效 MAC 地址的报告。该字段有时包含过去需要的“假”mac 地址。

所有伪造的 MAC 地址都包含 MAC 地址的无效字符。有效字符是数字 0-9 和字母 af 或 AF。所有有效的 MAC 地址长度均为 12 个字符。我不想尝试使用正则表达式来解决一个简单的问题。

我知道必须有一种方法可以用“LIKE”来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:09:26.250

我的英语老师让我误入歧途。双重否定很有用！

```
SELECT * FROM EQUIPMENT
   WHERE LTRIM(RTRIM(EQUIPMENT.MACADDRESS)) NOT LIKE '%[^0-9a-fA-F]%'
   AND LEN(LTRIM(RTRIM(EQUIPMENT.MACADDRESS)))=12 
```

# google-apps-script - Google Apps 脚本电子表格数据过多 - 但没有

> ID：12568834
> 
> 赞同：1
> 
> 时间：2012-09-24T16:09:34.120
> 
> 标签：google-apps-script, google-sheets, limits

自 2012 年 8 月结束以来，用于 GAS 的脚本已停止工作。

我正在使用 JDBC 检索 MySQl 数据库中的记录并显示在工作表中。

> 正在工作，然后我开始收到“很抱歉，我们无法处理该操作，因为它包含太多数据。”

但是问题中的数据集是 2400 行 * 35 列，远低于 400 000 个单元格的限制，也远低于每张纸 256 列的限制。

有任何想法吗？最近有什么变化吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:31:29.657

我认为这里的结论是

> “很抱歉，我们无法处理该操作，因为它包含太多数据。”

错误不仅可能是数据集中的数量或行和列（单元格）引起的，还可能是由于应用于区域的对象的内存使用的内部问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T13:25:48.543

尝试一次添加一部分值，`Spreadsheet.flush();`在每个`setValues()`. 这解决了我的问题。

# c++ - 在c++中查找所有目录中的所有文件

> ID：12568835
> 
> 赞同：0
> 
> 时间：2012-09-24T16:09:34.300
> 
> 标签：c++, file, search, find

我正在尝试查找所有目录中的所有文件，但我不知道如何处理子目录。在这段代码中，代码看起来穿过所有子目录，但我不知道如何跳回去。有谁知道如何做到这一点？

```
__declspec(dllexport) void GetFiles(char* filedir, char* path)
{
    string s[1000];
    string path2 = path;
    UINT index = 0;

    WIN32_FIND_DATA ffd;
    TCHAR szDir[MAX_PATH];
    HANDLE hFind = INVALID_HANDLE_VALUE;
    DWORD dwError=0;

    StringCchCopy(szDir, MAX_PATH, filedir);

    if (INVALID_HANDLE_VALUE == hFind) 
        return;

    do
    {

        DWORD attributes = ffd.dwFileAttributes;

        if (attributes & FILE_ATTRIBUTE_HIDDEN)
            continue;
        else if (attributes & FILE_ATTRIBUTE_DIRECTORY)
        {
            TCHAR dir2[MAX_PATH];
            path2 = path;
            path2 += ffd.cFileName;
            path2 += "\\*";
            StringCchCopy(dir2, MAX_PATH, path2.c_str());
            SetCurrentDirectory(dir2);
        }
        else
        {
            s[index] = path;
            s[index] += ffd.cFileName;
            index++;
        }
    }
    while (FindNextFile(hFind, &ffd) >= 0); // needs to jump back if zero

    FindClose(hFind);
} 
```

编辑：函数具有相同的名称，这混淆了编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:25:00.680

我认为最简单的方法是执行递归函数。

这在“c”伪代码中大致看起来像这样

```
void GetFiles( char*** file_path_table, char* dir )
{
   char **file_paths;
   file_paths = getAllFiles( dir );
   foreach( path in file_paths )
   {
       if ( is_directory( path ) )
       {
           GetFiles( file_path_table, path );
       }
       else
       {
           add_file_to_table( file_path_table, path );
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:03:24.357

为什么不使用 boost [recursive_directory_iterator](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#Class-recursive_directory_iterator)。

注意：未经测试（但应该看起来像这样）。

```
namespace bfs = boost::filesystem;

std::vector<std::string>    filenames;

std::copy(bfs::recursive_directory_iterator("<path>"),
          bfs::recursive_directory_iterator(),
          std::back_inserter(filenames)
         ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:16:12.207

我会看看 boost 的目录迭代器。

[http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm)

有一些例子涵盖了你正在尝试做的事情，它几乎适用于你能想到的任何操作系统。

看一下示例 3。它显示了如何遍历目录的所有内容。如果你找到了一个你以前没有见过的新目录，你只需在上面做同样的事情。有测试告诉您文件是否是常规文件、目录等，因此请尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:18:02.823

而不是通过`SetCurrentDirectory()`使用递归调用来更改目录`GetFiles()`。这将要求调用者传入对数组（或`std::vector<std::string>`）的引用，以便存储文件列表，而不是使用本地数组`s`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:31:10.957

通过旧帖子进行一些搜索，我想我已经多次*提到进行广度优先搜索，但从未真正发布代码来展示如何做到这一点。*我想我也可以这样做。

```
#include <windows.h>
#include <queue>
#include <string>
#include <iostream>

// I think MS's names for some things are obnoxious.
const HANDLE HNULL = INVALID_HANDLE_VALUE;
const int A_DIR = FILE_ATTRIBUTE_DIRECTORY;

// We'll process a file by printing its path/name
void process(std::string const &path, WIN32_FIND_DATA const &file) { 
    std::cout << path << file.cFileName << "\n";
}

void find_file(std::string const &folder_name, std::string const &fmask) {
    HANDLE finder;          // for FindFirstFile
    WIN32_FIND_DATA file;   // data about current file.
    std::priority_queue<std::string, std::vector<std::string>,
                       std::greater<std::string> > dirs;
    dirs.push(folder_name); // start with passed directory 

    do {
        std::string path = dirs.top();// retrieve directory to search
        dirs.pop();

        if (path[path.size()-1] != '\\')  // normalize the name.
            path += "\\";

        std::string mask = path + fmask;    // create mask for searching

        // traverse a directory. Search for sub-dirs separately, because we 
        // don't want a mask to apply to directory names. "*.cpp" should find
        // "a\b.cpp", even though "a" doesn't match "*.cpp".
        //
        // First search for files:
        if (HNULL==(finder=FindFirstFile(mask.c_str(), &file))) 
            continue;

        do { 
            if (!(file.dwFileAttributes & A_DIR))
                process(path, file);
        } while (FindNextFile(finder, &file));
        FindClose(finder);

        // Then search for subdirectories:
        if (HNULL==(finder=FindFirstFile((path + "*").c_str(), &file)))
            continue;
        do { 
            if ((file.dwFileAttributes & A_DIR) && (file.cFileName[0] != '.'))
                dirs.push(path + file.cFileName);
        } while (FindNextFile(finder, &file));
        FindClose(finder);
    } while (!dirs.empty());
}

int main(int argc, char **argv) { 
    if (argc > 2)
        find_file(argv[1], argv[2]);
    else
        find_file("C:\\", "*");
    return 0;
} 
```

# iphone - iPhone - 设计我自己的 viewController 过渡

> ID：12568837
> 
> 赞同：2
> 
> 时间：2012-09-24T16:09:35.660
> 
> 标签：iphone, ios, ipad, viewcontroller

我的应用程序有一堆 viewController，我正在尝试设计自己的动画过渡，从一个 viewController 到另一个。

我找到了这个

```
- (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion 
```

但这似乎不允许设计我自己的过渡曲线。

我想要的是在新的 viewControllers 到达最终位置时创建像弹性反弹之类的效果。我喜欢将自己的关键帧添加到动画曲线中。

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T16:21:34.483

如果您想设计自己的过渡，您可以为 UIViewController 创建一个类别并自己编写动画。只有基本的动画已经可用。

这是你可以做的界面：

*.h 文件：

```
#import <UIKit/UIKit.h>

@interface UIViewController(Transitions)

- (void) presentViewController:(UIViewController *)viewController withPushDirection: (NSString *) direction;
- (void) dismissViewControllerWithPushDirection:(NSString *) direction;

@end 
```

*.m 文件

```
#import "UIViewControllerWithTransitions.h"
#import <QuartzCore/QuartzCore.h>

@implementation UIViewController(Transitions)

- (void) presentViewController:(UIViewController *)viewController withPushDirection: (NSString *) direction {

    [CATransaction begin];

    CATransition *transition = [CATransition animation];
    transition.type = kCATransitionPush;
    transition.subtype = direction;
    transition.duration = 0.25f;
    transition.fillMode = kCAFillModeForwards;
    transition.removedOnCompletion = YES;

    [[UIApplication sharedApplication].keyWindow.layer addAnimation:transition forKey:@"transition"];        
    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    [CATransaction setCompletionBlock: ^ {
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(transition.duration * NSEC_PER_SEC)), dispatch_get_main_queue(), ^ {
            [[UIApplication sharedApplication] endIgnoringInteractionEvents];        
        });
    }];

    [self presentViewController:viewController animated:NO completion:NULL];

    [CATransaction commit];

}

- (void) dismissViewControllerWithPushDirection:(NSString *) direction {

    [CATransaction begin];

    CATransition *transition = [CATransition animation];
    transition.type = kCATransitionPush;
    transition.subtype = direction;
    transition.duration = 0.25f;
    transition.fillMode = kCAFillModeForwards;
    transition.removedOnCompletion = YES;

    [[UIApplication sharedApplication].keyWindow.layer addAnimation:transition forKey:@"transition"];        
    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    [CATransaction setCompletionBlock: ^ {
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(transition.duration * NSEC_PER_SEC)), dispatch_get_main_queue(), ^ {
            [[UIApplication sharedApplication] endIgnoringInteractionEvents];        
        });
    }];

    [self dismissViewControllerAnimated:NO completion:NULL];

    [CATransaction commit];

}

@end 
```

这是一个示例调用：

```
[self presentViewController: myVC withPushDirection:@"fromRight"]; 
```

# asynchronous - 异步 CUDA 传输调用不异步

> ID：12568840
> 
> 赞同：1
> 
> 时间：2012-09-24T16:09:46.547
> 
> 标签：asynchronous, cuda

我正在使用我的 GPU 和我的 CPU。当我分析内存传输时，我发现 cuBLAS 中的异步调用不会异步运行。

我有类似下面的代码

```
cudaEvent_t event;
cudaEventCreate(&event);
// time-point A
cublasSetVectorAsync(n, elemSize, x, incx, y, incy, 0);
cudaEventRecord(event);
// time-point B
cudaEventSynchronize(event);
// time-point C 
```

我正在使用`sys/time.h`配置文件（为清楚起见，省略了代码）。我发现`cublasSetVectorAsync`调用在时间上占主导地位，就好像它的行为是同步的。即持续时间 AB 比持续时间 BC 长得多，并且随着我增加转移的大小而增加。

这可能是什么原因？是否需要在某处设置一些环境变量或需要使用更新的驱动程序？

我正在使用带有 Cuda 编译工具的 GeForce GTX 285，版本 4.1，V0.2.1221

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T23:56:10.837

`cublasSetVectorAsync`是一个薄薄的包装`cudaMemcpyAsync`。不幸的是，在某些情况下，这个函数的名称用词不当，正如[CUDA 参考手册的这一页](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/sync_async.html#MemcpyAsynchronousBehavior)所解释的那样。

尤其：

> 对于从可分页主机内存到设备内存的传输，在启动复制之前执行流同步。一旦可分页缓冲区被复制到暂存内存以便 DMA 传输到设备内存，该函数将返回，但到最终目的地的 DMA 可能尚未完成。

和

> 对于从可分页主机内存到设备内存的传输，主机内存会立即复制到暂存缓冲区（不执行设备同步）。一旦可分页缓冲区被复制到暂存内存，该函数将返回。到最终目的地的 DMA 传输可能尚未完成。

因此，您的问题的解决方案可能只是分配`x`您的主机数据数组，使用[`cudaHostAlloc`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY_g15a3871f15f8c38f5b7190946845758c.html#g15a3871f15f8c38f5b7190946845758c)，而不是标准`malloc`（或 C++ `new`）。

或者，如果您的 GPU 和 CUDA 版本支持它，您可以使用`malloc`然后调用[`cudaHostRegister`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY_g36b9fe28f547f28d23742e8c7cd18141.html#g36b9fe28f547f28d23742e8c7cd18141)-ed`malloc`指针。请注意文档中的条件，即您必须使用`cudaDeviceMapHost`标志创建 CUDA 上下文`cudaHostRegister`才能产生任何效果（请参阅[`cudaSetDeviceFlags`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__DEVICE_g18074e885b4d89f5a0fe1beab589e0c8.html#g18074e885b4d89f5a0fe1beab589e0c8).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T20:42:37.657

在 cuBLAS/cuSPARSE 中，如果您不指定不同的流，则事情发生在流 0 中。要指定流，您必须使用 cublasSetStream（请参阅 cuBLAS 文档）。

# c# - 使用 C# 从 ColdFusion QueryBean 获取值的最佳方法是什么

> ID：12568841
> 
> 赞同：0
> 
> 时间：2012-09-24T16:09:46.407
> 
> 标签：c#, coldfusion

我不得不调用一个返回 QueryBean 的 ColdFusion Web 服务。它返回一组具有我正在寻找的值的复杂数组。当我拨打电话时，我得到了我期望的数组中的所有数据，但现在我试图获取数据，它一直告诉我我遗漏了一些东西，或者我不能对对象使用索引。

我在 VS2010 中创建了一个名为 DAM_Search 的 Web 引用，并使用此命令调用它；

```
DAM_Folder.folderService obj_Folder = new DAM_Folder.folderService();
DAM_Folder.QueryBean qBean = bj_Folder.getfolder("1-Key", str_Folder_ID); 
```

我得到的是 qBean，其中包含 4 个数组，前两个数组是

```
qBean.columnList[10]
qBean.columnListField[10] 
```

并包含在数据行中使用的字段的名称。接下来它有

```
qBean.data[4]
qBean.dataField[4] 
```

这是返回数据的地方。在上面的示例中，qBean 中返回了 4 行数据。数据位于一个数组中，其中包含在 中命名的列的值`columnList[10]`。

我认为由于一张图片值 1000 字，这可能会有所帮助。

[![qBean 捕获](../Images/814214221e05ff375ea2b0497678b8bc.png)](https://i.stack.imgur.com/pYmlu.jpg)
[（来源：[sapp-family.com](http://sapp-family.com/forums/qBean_Capture.jpg)）]

我现在要做的是从`qBean.data[0][0]`. 在我尝试的即时窗口中，`? qBean.data[0]`它返回正确的值数组。

我试过以下

```
? qBean.data[0][0] 
"Cannot apply indexing with [] to an expression of type 'object'"

? qBean.data[0].[0]
Identifier expected

? qBean.data[0,0]
Wrong number of indices inside []; expected 1 
```

那么，我的 Stackoverflow 用户，我需要做什么来获取这个对象的值？我认为这很简单，我只是想多了，但它现在只是把我逼到了墙角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:04:41.903

我会尝试 qBean.data[0][0].toSting()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:46:26.420

好的，所以我被跟踪了，没有回去更新原始问题。对于那个很抱歉...

我对这个问题的解决方案是将 转换`qBean.Data[0]`为`IEnumerable`对象。然后我通过一个`foreach`循环运行它，该循环将数据输入一个数组，我可以将它传回调用函数。例如;

```
string[] FileData = new string[0];            
foreach (var var_Value in (IEnumerable)qBean.data[0])
        {
            Array.Resize<string>(ref FileData, FileData.Length + 1);
            FileData[FileData.Length-1] = var_Value.ToString();
        } 
```

既然我知道这是可行的，我将从 QueryBean 中的另一个数组中提取一个计数并`FileData[]`在开始之前设置大小，`foreach`这样我就不必使用`Array.Resize<>`. 虽然目前我使用的数据很小，但我永远不知道未来会是什么。

蒂姆

# android - 每个最常见的 android 设备

> ID：12568850
> 
> 赞同：1
> 
> 时间：2012-09-24T16:10:11.757
> 
> 标签：android, mobile, android-testing

有大量关于 Android 操作系统版本采用以及哪些版本最常见的可用信息（例如，[此处](http://developer.android.com/about/dashboards/index.html)）

是否存在包含基于流行度的有关物理设备特性的类似信息的资源？也就是说，例如，哪些屏幕尺寸最常见等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:26:13.783

从您引用的链接[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)：

```
Size        ldpi    mdpi    hdpi    xhdpi
small       1.1%    N/A     1.7%    N/A
normal      0.4%    11.4%   51.9%   22.3%
large       0.1%    2.5%    N/A     3.9%
xlarge      N/A     4.7%    N/A     N/A 
```

从[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

我不知道有任何资源会告诉您其他指标，例如有多少设备有前置摄像头或只有前置摄像头等。

# asp.net - ASP.NET 服务器端控件未在 CodeBehind 中声明

> ID：12568857
> 
> 赞同：1
> 
> 时间：2012-09-24T16:10:43.240
> 
> 标签：asp.net, .net, visual-studio-2010, declaration, server-side-controls

我知道在 Visual Studio 中直接在 HTML 中声明服务器端控件总是存在问题。通常，您必须在设计模式下打开页面，以便在后面的代码中生成它们，以便您可以通过代码进行访问。但我确实有一个奇怪的问题。我在继承母版页的页面上添加了一个 asp:Label 控件。

```
<asp:Label ID="uxEnteteresultat" runat="server" Text="Test"></asp:Label> 
```

这些页面使用名为`Ext.Net`生成`Ext.js`代码的框架。我的设计器根本不起作用，所以我无法在代码隐藏文件中生成此控件。

这些控件在哪里声明？？？在旧版本的 .Net 中（我在 VS 2010 中使用 4.0 框架），我们可以在部分类中看到它。他们现在在哪里 ？是否有一种解决方法可以在 VS 2010 中自己声明您的控件？

谢谢 ！

* * *

根本没有designer.cs 文件。这是一个网站，而不是一个项目。这可能是问题的一部分...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:32:25.057

在**VS 2010**中，每个表单应该包含三个部分：

*   `MyForm.aspx`
*   `MyForm.aspx.cs`
*   `MyForm.aspx.designer.cs`

您应该能够像这样添加标签：

将此添加到`MyForm.aspx`：

```
<asp:Label ID="lblOrganizer" runat="server" /> 
```

将此添加到`MyForm.aspx.designer.cs`（内`public partial class`）：

```
protected global::System.Web.UI.WebControls.Label lblOrganizer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:42:09.043

**在mypage.aspx**页面内声明的控件是在**mypage.aspx.designer.cs**内的部分类中创建的

 **```
/// <summary>
/// uxEnteteresultat control.
/// </summary>
/// <remarks>
/// Auto-generated field.
/// To modify move field declaration from designer file to code-behind file.
/// </remarks>
protected global::System.Web.UI.WebControls.Label uxEnteteresultat; 
```

如果您的控件未在此文件中声明，则不会出现在代码隐藏**mypage.aspx.cs**中。请记住，所有控件都应在其 HTML 声明中具有属性 runat = "server"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:39:14.427

检查这个类似的问题：

[在后面的代码中无法访问 Asp.net 控件](https://stackoverflow.com/questions/6180509/asp-net-controls-are-not-accessible-in-code-behind)

如果您正在获得智能感知，那么您很好，因为您不必在 ASP.NET 2.0（部分类）之后的代码隐藏中显式声明您的控件。如果您无法访问它，请检查您的设计器文件并根据 user1694951 手动添加它。**

# jquery - jquery.validate 的 CDN 上可用的翻译

> ID：12568860
> 
> 赞同：3
> 
> 时间：2012-09-24T16:10:57.843
> 
> 标签：jquery, jquery-validate, locale, cdn

我在多语言项目中使用 Jquery.validate。

一切正常，但我有 2 个问题（好吧，我真正的问题是 2 号）：

1）我从 Microsoft CDN 加载它：[http](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js) ://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js与谷歌 CDN 相比，它“似乎”相当慢？

2) 要显示本地化错误消息，我包括： [http](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_xx.js) ://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_xx.js （其中 xx 是使用的区域设置），如此处和中所示我在网上找到的所有其他文档：[http ://www.asp.net/ajaxlibrary/CDNjQueryValidate19.ashx](http://www.asp.net/ajaxlibrary/CDNjQueryValidate19.ashx)

这适用于 de、fr、es、ja，但不适用于常见的其他语言环境，如 nl、pt 等。有谁知道如何获取所有可用“消息文件”的列表？如果它们可用，我只想加载它们，因为“尝试没有成功”需要很多时间......

并且：如果您知道另一个 CDN 从哪里获取 jquery.validate 以及翻译文件：我很乐意从那里下载 :-)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:40:55.307

我不知道托管 jquery validate 的本地化文件的另一个 CDN。我向 Microsoft CDN运行了对[每个本地化文件的请求：](https://github.com/jzaefferer/jquery-validation/tree/master/localization)

成立

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ar.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ar.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_bg.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_bg.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ca.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ca.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_cs.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_cs.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_da.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_da.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_de.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_de.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_el.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_el.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_es.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_es.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_eu.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_eu.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_fa.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_fa.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_fi.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_fi.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_fr.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_fr.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_he.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_he.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_hu.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_hu.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_it.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_it.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ja.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ja.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_kk.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_kk.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_lt.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_lt.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_lv.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_lv.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_nl.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_nl.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_no.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_no.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_pl.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_pl.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ro.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ro.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ru.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ru.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_si.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_si.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sk.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sk.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sl.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sl.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_th.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_th.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_tr.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_tr.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_vi.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_vi.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/methods_de.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/methods_de.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/methods_nl.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/methods_nl.js)

未找到 (404)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_hr.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_hr.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ka.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ka.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_pt_BR.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_pt_BR.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_pt_PT.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_pt_PT.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sr.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sr.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sv.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_sv.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_uk.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_uk.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_zh.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_zh.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_zh_TW.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_zh_TW.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/methods_pt.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/methods_pt.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T09:31:11.497

我喜欢葡萄牙语，巴西人。

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ptpt.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ptpt.js)

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ptbr.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/localization/messages_ptbr.js)

# android - Android磁力计采样率提高/抖动降低

> ID：12568861
> 
> 赞同：4
> 
> 时间：2012-09-24T16:11:02.563
> 
> 标签：android, android-ndk

我想就磁力计上的采样率和抖动寻求一些帮助。我正在与一些人一起开展一个涉及高速磁场采样应用的项目。尽管我们已经开发了一种算法来解决我们遇到的抖动和其他问题，但我们希望以某种方式提高采样率，同时，如果可能的话，尝试减少采样抖动。提高采样率将使我们能够为我们的应用程序获得更好的结果。我们使用的是三星 Nexus S，根据我们进行的测试，我们观察到采样率在 15 毫秒到 20 毫秒之间，有时在 50 毫秒左右达到峰值（这是在连续事件之间）。

我们采用了不同的方法来尝试开发这些问题的解决方案，但迄今为止没有任何成功。首先，我们考虑修改当前的磁力计（AK8973）设备驱动程序，但我们很快意识到瓶颈不存在，因为设备驱动程序直接实现了正确的传感器操作模式、数据读取并尊重传感器硬件时序约束。作为第二种选择，我们使用 Android NDK 开发了一个小代码来获取样本，以将在连续事件之间（即样本之间）获得的时间与在 Java 级别开发的代码进行比较。可悲的是，结果几乎相同。作为最后的选择，我们目前正试图了解 API 如何处理事件并将其传递给 Java。也就是说，如果瓶颈在那里，我们' d 尝试更改代码以解决问题。但是，我们不确定瓶颈是在底层硬件还是软件 API 中。

我们用于 NDK 的代码基于 Android 文档 (NativeActivity) 提供的示例以及我们通过谷歌搜索 (google 群组和其他文章) 遇到的一些其他示例。我们发现的文章非常有趣（[Native Sampling](http://www.sensorplatforms.com/native-sampling) , [Sensor Sampling Performance](http://www.sensorplatforms.com/smartphone-performance-fundamentals-sensor-sampling)）。尽管据报道原生采样可以提供更好的性能，但在我们的例子中似乎没有发生。

我们想知道是否真的有可能获得更高的采样率，或者是否有人已经开发了解决方案。瓶颈是在软件层面还是硬件层面？在上面引用的文章中，提到自定义库 (FreeMotion) 能够提供更好的性能结果，作为原始传感器库的替代，因为它直接与驱动程序一起使用。有没有人使用过这个库，如果是，你能提供给我们你的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:26:09.240

使用另一款智能手机三星 Galaxy Nexus，我们决定收集更多的磁力计数据样本并进行一些统计分析，并比较与三星 Nexus S 获得的结果。这次我们使用的是 Android v4.1.2。同样，我们观察到，在将 NDK 与 SDK API 与两款智能手机进行比较时，我们能够收集数据的速率并没有显着提高，分别使用来自`ASensor_getMinDelay()`和的值`SENSOR_DELAY_FASTEST`，它们提供了最大的性能。然而，无论使用哪种方法：轮询或基于回调，时间戳抖动的减少对于具有 NDK API 的两款智能手机都非常重要。一般来说，轮询提供的结果很少或没有更好的结果，并且应该更占用 CPU。

三星 Galaxy Nexus 传感器硬件要优越得多，因此自然而然地，可以对所需事件率进行细粒度调整`ASensor_getMinDelay()`。然而，对于三星 Nexus S，这是不可能的。对于较低的速率，不满足目标速率，并且以更慢的速率获取样本。激活多个传感器，总体抖动减少大于仅使用单个传感器。

# ruby-on-rails - 我如何查看 Rails 启动时创建的关系？

> ID：12568863
> 
> 赞同：0
> 
> 时间：2012-09-24T16:11:09.627
> 
> 标签：ruby-on-rails, activerecord

我想看看幕后的接线，并仔细检查我是否正确定义了我的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:06:48.270

目前还不清楚您要对这些关系做什么，但每个 ActiveRecord 子类都定义了一个称为“反射”的方法，您可以使用它来检查所有这些关系。每个反射都会告诉你它是一种什么样的关系，有什么选择，以及大量的其他信息。

```
MyClass.reflections 
```

# python - 在预提交挂钩中 - 如何访问/比较当前和以前版本的文件

> ID：12568865
> 
> 赞同：2
> 
> 时间：2012-09-24T16:11:27.583
> 
> 标签：python, svn, pre-commit-hook

我正在尝试添加到我们现有的预提交 SVN 挂钩，以便它检查并阻止特定目录中文件的文件大小增加。

我编写了一个 python 脚本来比较两个文件大小，它以两个文件作为参数并使用 sys.exit(0) 或 (1) 返回结果，这部分似乎工作正常。

我的问题是从批处理文件中调用 python 脚本，如何引用每个文件的新提交和以前的版本？现有代码对我来说是新的，还有一堆 %REPOS%、%TXN%s 等，我不知道如何使用它们。有没有一种简单、标准的方法来做到这一点？

它还已经包含使用 svnlook changed 循环通过已更改文件的代码，因此该部分不应该成为问题。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:03:32.557

如果您只需要比较文件大小，只需查看`svnlook filesize`命令即可。默认调用 - `svnlook filesize repo path`- 将为您提供 HEAD 修订版的大小`path`。要获取传入提交中路径的大小，请使用`svnlook filesize repo path -t argv[2]`.

尽管如此，这里还是列出了版本化路径的所有修订的示例（传入的路径除外，因为这是*预提交*挂钩）。

```
#!/usr/bin/env python

from sys import argv, stderr, exit
from subprocess import check_output

repo = argv[1]
transaction = argv[2]

def path_history(path, limit=5):
    path = '/%s' % path
    cmd = ('svnlook', 'history', '-l', str(limit), repo, path)
    out = check_output(cmd).splitlines()[2:]

    for rev, _path in (i.split() for i in out):
        if _path == path:
            yield rev

def commit_changes():
    cmd = ('svnlook', 'changed', repo, '-t', transaction)
    out = check_output(cmd).splitlines()

    for line in out:
        yield line.split()

def filesize(path, rev=None, trans=None):
    cmd = ['svnlook', 'filesize', repo, path]
    if rev:     cmd.extend(('-r', str(rev)))
    elif trans: cmd.extend(('-t', str(trans)))

    out = check_output(cmd)
    return out.rstrip()

def filesize_catwc(path, rev=None, trans=None):
    '''A `svnlook filesize` substitute for older versions of svn. 
    Uses `svnlook cat ... | wc -c` and should be very inefficient
    for large files.'''

    arg = '-r %s' % rev if rev else '-t %s' % trans
    cmd = 'svnlook cat %s %s %s | wc -c' % (arg, repo, path)

    out = check_output(cmd, shell=True)
    return out.rstrip()

for status, path in commit_changes():
    if status in ('A', 'M', 'U'):
        # get the last 5 revisions of the added/modified path
        revisions = list(path_history(path))
        headrev = revisions[0]

        oldsize = filesize(path, rev=headrev)
        newsize = filesize(path, trans=transaction) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:04:46.800

`pre-commit`用python编写整个脚本可能更容易。根据[颠覆手册，](http://svnbook.red-bean.com/en/1.7/index.html)[预提交](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.pre-commit.html)有三个输入；

*   两个命令行参数
    *   存储库路径
    *   提交事务名称
*   标准输入上的锁定令牌信息

如果你想知道哪些文件发生了变化，我建议你使用`subprocess.check_output()`函数来调用[`svnlook changed`](http://svnbook.red-bean.com/en/1.7/svn.ref.svnlook.c.changed.html). 对于内容已更改的文件，您应该调用[`svnlook filesize`](http://svnbook.red-bean.com/en/1.7/svn.ref.svnlook.c.filesize.html), 以获取文件在存储库中的最后一个修订版中的大小。您必须使用 查询的工作目录中等效文件的大小[`os.stat()`](http://docs.python.org/library/os.html#os.stat)，如函数所示`getsizes()`。

```
import subprocess
import sys
import os

repo = sys.argv[1]
commit_name = sys.argv[2]

def getsizes(rname, rfile):
   '''Get the size of the file in rfile from the repository rname. 
   Derive the filename in the working directory from rfile, and use 
   os.stat to get the filesize. Return the two sizes.
   '''
   localname = rfile[10:].strip() # 'U   trunk/foo/bar.txt' -> 'foo/bar.txt'
   reposize = subprocess.check_output(['svnlook', 'filesize', rname, rfile])
   reposize = int(reposize)
   statinfo = os.stat(localname)
   return (reposize, statinfo.st_size)

lines = subprocess.check_output(['svnlook', 'changed', repo]).splitlines()
for line in lines:
    if line.startswith('U ') or line.startswith('UU'):
       # file contents have changed
       reposize, wdsize = getsizes(repo, line)
       # do something with the sizes here...
    elif line.startswith('_U'):
       # properties have changed
       pass 
```

# java - 使用 Hadoop Map Reduce 加入来自 NoSQL 数据库的数据

> ID：12568868
> 
> 赞同：1
> 
> 时间：2012-09-24T16:11:32.733
> 
> 标签：java, join, solr, hadoop, mapreduce

我目前使用 Solr 作为 NoSQL 数据库。我索引了各种类型的文档，有时它们之间存在关系。

对于新的用例，我必须执行 Solr 不支持的等价连接。

我想知道是否有一种方法可以向 hadoop 提交 map-reduce 作业，然后 hadoop 可以从 Solr 中提取数据并执行连接。

我在寻找：

1.  讨论
2.  执行此操作的现有开源项目
3.  示例代码
4.  或批评告诉我这既不容易做到，也不能在一般情况下做到。

提前致谢。

注意：我在这里看到了一些关于相关或类似主题的问题：[here](https://stackoverflow.com/questions/4053857/similarity-join-using-hadoop)、[here](https://stackoverflow.com/questions/10201500/hadoop-reduce-side-join-using-datajoin)和[here](https://stackoverflow.com/questions/7776774/multi-map-reduce-index-vs-relational-join) ，但我没有得到我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:29:11.447

你有两个基本的选择。

**1) 使用 SOLR REST API 通过同时发出大量请求来手动加入记录。**

此策略将要求您使用 SOLR 记录 ID 或查询术语定义映射器，然后针对 SOLR 集群运行所有映射器。如果您发送带有超时的同步请求，并且有一个性能合理的 solr 集群，那么可以根据需要将记录写入您的减速器。

**2）直接在您的映射器中读取 SOLR 核心索引，并进行减少侧连接。**

这可能会稍微困难一些。因为每个核心都被索引并写入分层文件夹结构，所以您必须在映射器 setup() 方法中包含一些可能从给定核心读取元数据的逻辑。此外，当然，您可能必须将所有内核放入 HDFS。但是，一旦您使用现有的 SOLR Java 索引阅读器 API 解析了 SOLR 输入，就很容易将这些输入正确地发送到您的 reducer 以进行标准的 reduce 侧连接。

**3) 如果一个小数据集 (< 1G) 正在连接到另一个大数据集，您可以通过发出 REST 查询将其读入，并将其作为一个大的、丑陋的、静态可用的对象缓存在内存中，或者将其数据存储在分布式缓存作为文件。您甚至可以简单地在映射器的 setup() 部分发出查询，并在每个实例本地缓存它们。**

无论如何：在 SOLR 中加入数据并不是特别容易。您寻求的任何解决方案都会有缺点。正确的解决方案是重做 SOLR 索引，使它们充分非规范化，并使用标准 map/reduce、HIVE 或 PIG 等工具进行连接。

# c# - Silverlight折线图中的缩放和平移？

> ID：12568871
> 
> 赞同：0
> 
> 时间：2012-09-24T16:11:51.617
> 
> 标签：c#, .net, silverlight, charts, linechart

我有这个silverlight折线图，我想实现缩放和平移，因为很难分析这个视图中的数据（数据点被隐藏，因为它们使图表看起来很乱，但我想再次启用它一定程度的缩放）。

**有什么想法/例子吗？**

我的 chartwindow.xaml：

```
 <controls:ChildWindow x:Class="HuginOdinSilverlight.Views.UserStats.chartwindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:DV="clr-namespace:System.Windows.Controls.DataVisualization;assembly=System.Windows.Controls.DataVisualization.Toolkit"
xmlns:DVC="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
       xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls" Title="Advanced LineChart" xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="422" d:DesignWidth="1029">
<controls:ChildWindow.Resources>
    <Style x:Key="LegendItemStyle" TargetType="DVC:LegendItem">
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DVC:LegendItem">
                    <CheckBox Click="CheckBox_Click" Cursor="Hand" IsChecked="true" Content="{TemplateBinding Content}" Tag="{TemplateBinding Content}">
                        <CheckBox.Template>
                            <ControlTemplate TargetType="CheckBox">
                                <StackPanel Orientation="Horizontal">
                                    <Rectangle Width="8" Height="8" Fill="{Binding Background}" Stroke="{Binding BorderBrush}"
                                               StrokeThickness="1" Margin="0,0,3,0" />
                                    <DV:Title Content="{TemplateBinding Content}"/>
                                </StackPanel>
                            </ControlTemplate>
                        </CheckBox.Template>
                    </CheckBox>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</controls:ChildWindow.Resources>
<Grid x:Name="LayoutRoot" Margin="2" Height="385" Width="1007">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto" />

    </Grid.RowDefinitions>
    <DVC:Chart x:Name="userChart2" BorderBrush="{x:Null}" Visibility="Visible" Padding="20,10,20,20" Margin="0,0,0,0">
        <DVC:AreaSeries Name="lseries" IndependentValueBinding="{Binding Path=label}" DependentValueBinding="{Binding Path=number}" />

    </DVC:Chart>

        <CheckBox Content="affectedDocs" Height="21" HorizontalAlignment="Left" Margin="900,352,0,0" Name="checkBox1" VerticalAlignment="Top" Width="95" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked" />
</Grid> 
```

我的 chartwindow.xaml.cs：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Net;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Animation;
    using System.Windows.Shapes;
    using HuginOdinSilverlight.ServiceReference1;
    using System.Windows.Data;
    using System.Windows.Controls.DataVisualization;
    using System.Windows.Controls.DataVisualization.Charting;

    namespace HuginOdinSilverlight.Views.UserStats
    {
        public partial class chartwindow : ChildWindow
        {
            List<List<Service2ef_chart>> thelist;
    List<object> names = new List<object>();
    public chartwindow(List<List<Service2ef_chart>> list, List<object> comboitems)
    {
        InitializeComponent();
        thelist = list;
        names = comboitems;
        refreshChart();

    }

    private void checkBox1_Checked(object sender, RoutedEventArgs e)
    {
        refreshChart();
    }

    void refreshChart()
    {
        int i = 0;
        int palindex = 0;
        userChart2.Series.Clear();

        foreach (List<Service2ef_chart> each in thelist)
        {
            Style newStyle = new Style(typeof(LineDataPoint));
            newStyle.Setters.Add(new Setter(LineDataPoint.BackgroundProperty, userChart2.Palette[palindex]["Background"]));
            newStyle.Setters.Add(new Setter(LineDataPoint.HeightProperty, 0));
            newStyle.Setters.Add(new Setter(LineDataPoint.WidthProperty, 0));

            userChart2.Series.Add(new LineSeries
            {
                ItemsSource = each,
                IndependentValueBinding = new Binding("label"),
                DependentValueBinding = (bool)checkBox1.IsChecked ? new Binding("number2") : new Binding("number"),
                Title = names[i].ToString(),
                LegendItemStyle = (Style)Resources["LegendItemStyle"],
                DataPointStyle = newStyle
            });

            i++;
            ++palindex;

            if (palindex >= userChart2.Palette.Count)
            {
                palindex = 0;
            }
        }
    }

    private void checkBox1_Unchecked(object sender, RoutedEventArgs e)
    {
        refreshChart();
    }

     //adds or removes series from the linechart when clicking on the legend:
    private void CheckBox_Click(object sender, RoutedEventArgs e)
    {
        CheckBox chk = (sender as CheckBox);
        Series ser = userChart2.Series.Cast<Series>().Where(s => s.Title.ToString() == chk.Tag.ToString()).ElementAtOrDefault(0);
        if (chk.IsChecked.Value)
        {
            chk.Opacity = 1;
            ser.Visibility = Visibility.Visible;
            try { ((LineSeries)ser).ItemsSource = thelist[names.IndexOf(chk.Tag.ToString())]; }
            catch (Exception yy) { MessageBox.Show(yy.Message); }
        }
        else
        {
            chk.Opacity = 0.25;
            ser.Visibility = Visibility.Collapsed;
            ((LineSeries)ser).ItemsSource = null;
        }
    }

} 
```

}

顺便说一句，非常感谢使代码更好的想法；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:03:38.393

请通过以下链接在银色光图中实现缩放和平移。

[银色光图的缩放和平移](http://geoffwebbercross.blogspot.com/2011/02/silverlight-4-toolkit-zoom-and-pan.html)

[银光的缩放和平移](http://www.wintellect.com/CS/blogs/jprosise/archive/2008/03/18/mousewheel-zooms-in-silverlight-2-0.aspx)

# php - 同一台服务器上的多个齿轮工 (PHP)

> ID：12568872
> 
> 赞同：1
> 
> 时间：2012-09-24T16:11:52.863
> 
> 标签：php, mysql, rabbitmq, gearman

我正在考虑使用 Gearman 处理 MySQL 表中的作业`jobs_queue`并将它们的状态标记为`locked`一种作业不会被占用两次的方式（现在正在发生）。

**问题：**在上述场景中，一个作业可能需要 10 秒才能完成，我希望每 2 秒开始处理一个新作业（以实现某种形式的速率限制）。目前，从表中检索作业的服务器也是处理作业的同一台机器。

Gearman 是否适合按照所述进行工作排队？客户端将创建自己完成的作业（同一台机器上的多个工人）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:43:09.833

是的，但您可以直接将作业发送到 Gearman 作业服务器，而不是拥有 MySQL 作业列表。这意味着您不必“锁定”工作。

您可以让多个工作人员运行相同的工作。

如果您按照我所说的方式进行操作，那么创建更多工作的工作人员将需要使用 gearmam do 背景，否则它将陷入死循环。 [http://www.php.net/manual/en/gearmanclient.dobackground.php](http://www.php.net/manual/en/gearmanclient.dobackground.php)

# objective-c - 标签在 Objective-C 中的实现

> ID：12568875
> 
> 赞同：4
> 
> 时间：2012-09-24T16:12:06.120
> 
> 标签：objective-c, core-data, tags, entity-relationship

我的应用程序有一个“Note”实体，它的属性是“Title”、“Body”和“Tags”。

我在使用“标签”属性时遇到问题；我希望能够在创建便笺时输入多个标签，然后程序将能够给我其他具有相同标签的便笺（就像 Stackoverflow 如何使用标签来提问一样）。我不太确定实体之间的关系应该是什么。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:15:38.383

`Tag`不应该是属性，而是多对多的关系。A`Note`可以有多个`Tags`（我假设）并且 a`Tag`可以添加到多个不同的`Notes`.

通过这种方式，您将能够设置获取请求以返回所有`Notes`具有特定`Tag`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:15:22.657

创建标签实体并添加从注释到标签的多对多关系以及从标签到注释的多对多关系（并将它们设置为彼此相反）。

# c++ - 为什么 std::lock 不支持超时？

> ID：12568877
> 
> 赞同：13
> 
> 时间：2012-09-24T16:12:08.613
> 
> 标签：c++, c++11, locking

如果我想在不冒死锁风险的情况下获取多个锁，我可以使用以下`std::lock`功能：

```
int data1, data2;
std::mutex m1, m2;
std::unique_lock<std::mutex> lock1(m1, std::defer_lock);
std::unique_lock<std::mutex> lock2(m2, std::defer_lock);

std::lock(lock1, lock2);           // guaranteed deadlock-free

// work with data1 and data2 
```

但是如果我想在指定的时间段内获取锁并且超时呢？有没有理由没有`try_until`类似于`wait_until`期货和条件变量的锁？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T17:05:29.510

> 为什么 std::lock 不支持超时？

1.  因为没有人提议。

2.  因为这个领域争议很大，建议越少，被接受的可能性就越大。

3.  因为我们害怕如果我们把所有东西都标准化，你会觉得无聊。

4.  它留给读者作为练习。

嗯...我的想法不多了... :-)

哦！

如果您需要，您可以轻松地自己做：

**更新**

这是我更喜欢的重写：

```
#include <mutex>
#include <chrono>

template <class Clock, class  Duration, class L0, class L1>
int
try_lock_until(std::chrono::time_point<Clock, Duration> t, L0& l0, L1& l1)
{
    std::unique_lock<L0> u0(l0, t);
    if (u0.owns_lock())
    {
        if (l1.try_lock_until(t))
        {
            u0.release();
            return -1;
        }
        else
            return 1;
    }
    return 0;
}

template <class Rep, class  Period, class L0, class L1>
int
try_lock_for(std::chrono::duration<Rep, Period> d, L0& l0, L1& l1)
{
    return try_lock_until(std::chrono::steady_clock::now() + d, l0, l1);
}

int main()
{
    std::timed_mutex  m1, m2;
    try_lock_for(std::chrono::milliseconds(50), m1, m2);
} 
```

正如安东尼建议的那样，请随意提出这个建议。也可以随意使用它，让我们知道它是否真的有用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T16:58:47.017

`std::timed_mutex`具有`try_lock_until`和`try_lock_for`成员功能。但是，您是对的，没有等效于`std::lock`超时。

使用超时锁定互斥锁仅在特定领域中使用。使用超时锁定多个互斥锁并不是任何人都强烈建议提出的，所以它不在 C++11 中。

标准委员会目前正在积极寻求下一个标准的提案。如果你觉得超时感知等价物`std::lock`很有价值，为什么不写一个提案呢？

# iphone - 相当于 UIBarButtonSystemItemAction 的 Mac

> ID：12568884
> 
> 赞同：0
> 
> 时间：2012-09-24T16:12:25.860
> 
> 标签：iphone, macos, cocoa, icons

`UIBarButtonSystemItemAction`OS X Mountain Lion 上是否有等价物？我确实浏览了`NSSharingService`文档，但找不到任何东西。它应该存在，因为 Preview.app 和 Safari.app 显示了不在其资源文件中的那种图标（我确实浏览了这些文件）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:03:22.143

这是一个与此类似的[问题](https://stackoverflow.com/questions/11815077/how-to-show-the-share-button-in-mountain-lion)。很高兴它可以提供一些帮助。我觉得有趣的是 Mac sdk 和 ios sdk 在这样的领域仍然不同。

# jquery - :remote => 与 form_for 真正混淆

> ID：12568887
> 
> 赞同：1
> 
> 时间：2012-09-24T16:12:31.133
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, ruby-on-rails-3

我只是在学习 Rails，如果有任何帮助，我将不胜感激。我已经看了大概 10 个教程`:remote => true`，`form_for`它们似乎都互相复制（同样令人困惑）。

本教程就是其中之一：[http ://tech.thereq.com/post/18910961502/rails-3-using-form-remote-true-with-jquery-ujs](http://tech.thereq.com/post/18910961502/rails-3-using-form-remote-true-with-jquery-ujs)

我的网络应用程序几乎都在一个页面上，我的“提交表单”在一个弹出式灯箱内。这意味着 form_for 代码实际上在我的 index.html.erb 中。这也意味着创建了一个新的@playlist 实例变量`index`（而不是让它在`new`）

**我的最终目标是**：

`if @playlist.save`返回`true`，我想将用户重定向到`root_path`WITH a :notice。无需使用成功消息或类似内容更新表单。我想在保存成功时进行硬重定向。

`if @playlist.save`返回`false`，我想渲染 create.js.erb 中的代码，这会将错误附加到灯箱表单中而不刷新页面。**note**很多教程似乎都想将整个表单重新渲染为 html，然后将内容替换到位。我宁愿（如果可以的话），只需将错误发送到表单并插入它们，我认为重新渲染和替换整个表单似乎比它必须的更复杂。

**截至目前**，我的代码有点混乱，尤其是：

*   `respond_to`块。这是关于这里实际发生的最大混淆点，我尝试了很多不同的代码，但没有任何效果
*   我不知道 create.js.erb 是否正确
*   我没有 create.html.erb - 我认为这是正确的，因为我只想重定向

**我的表格的第一行**：

```
<%= form_for @playlist, :remote => true do |f| %> 
```

**我的整个播放列表控制器**

```
class PlaylistsController < ApplicationController

  before_filter :load_genres, :only =>[:index, :user]
  before_filter :new_playlist, :only => [:index, :new, :create]

  def index
    @playlists = Playlist.order('created_at DESC').page(params[:page]).per(30)
  end

  def new
  end

  def create
    respond_to do |format|
      if @playlist.save
        # ???
        format.html { redirect_to root_path, :notice => "Playlist submitted" }
      else
        # ???
        format.js { render :js => @playlist.errors, :status => :unprocessable_entity }
      end
    end
  end

  def user
    @playlists = Playlist.order('created_at DESC').where(:username => params[:username]).page(params[:page]).per(30)
  end

  def listen
    playlist = Playlist.find(params[:playlist_id])
    playlist.update_attribute(:listens, playlist.listens + 1)
    render :nothing => true
  end

  private

  def load_genres
    @genres = Genre.order(:name)
  end

  def new_playlist
    @playlist = Playlist.new(:title => params[:title], :url => params[:url], :description => params[:description])
  end

end 
```

**创建.js.erb**

```
jQuery(function($) {
    alert('createjs called');
    $('#submit-form form').on('ajax:error', function(event, xhr, status, error){

        var responseObject = $.parseJSON(xhr.responseText), 
            errors = $('<ul />');

        $.each(responseObject, function(index, value){
            errors.append('<li>' + value + '</li>');
        })

        $(this).find('.submit-playlist-errors').html(errors);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:16:03.787

`flash`如果我对您的理解正确，您有一个表格，如果表格已保存，您想要重定向并发出通知。如果表单无效，您希望显示错误。

您可以将表单（或任何请求）以不同的格式（通常是 html、json 和 js）发送到 rails 应用程序。这是在您提供的网址中指定的。

```
playlist_path(@playlist)
# => /playlists/1

playlist_path(@playlist, :format => "json")
# => /playlists/1.json

playlist_path(@playlist, :format => "html")
# => /playlists/1.html
# ... etc 
```

`respond_to`该格式告诉 Rails要使用您的块中指定的响应类型。

现在，如果这很清楚，您必须决定使用哪种格式。

如果您指定`js`格式，响应将被视为`script`已执行。如果表单有效，您可以发送用户 javascript，将他们重定向到您想要的页面。如果表单无效，您可以通过修改 HTML 的方式来显示错误消息。不需要客户端代码。

```
respond_to do |format|
  if valid
    format.js { render "valid" }
  else
    format.js { render "invalid", :status => :unprocessable_entity }
  end
end

# valid.js.erb
window.location = <%= your_path %>

# invalid.js.erb
// whatever to display errors 
```

当您使用时`json`，如果表单无效，您可以返回重定向 url 以重定向用户或错误。请注意，此解决方案需要在客户端使用 Javascript 来处理它。

```
# controller
respond_to do |format|
  if valid
    format.json { render :json => your_path }
  else
    format.json { render :json => @object.errors, :status => :unprocessable_entity }
  end
end

# client side javascript
$("form")
  .on("ajax:success", function(event, data, status, response) {
    window.location = data
  })
  .on("ajax:error", function(event, response, error) {
    // logic to handle errors
  }) 
```

您还可以使用`html`格式（通过将格式设置为`html`或根本不指定格式）。但是，如果您使用，则必须以与（具有客户端 javascript）`:remote => true`相同的方式对待它。`json`如果您`redirect_to`用作响应，它将重定向请求，而不是您的用户。

我不确定在用户被重定向后是否显示 Flash 消息，但您可以通过以下方式尝试：

```
respond_to do |format|
  if valid
    format.html { 
      flash[:notice] = "Playlist submitted"
      render :json => your_path }
  else
    format.html { render :json => @object.errors, :status => :unprocessable_entity }
  end
end

# client side javascript
//... 
```

希望这会让你的`respond_to`街区变干。

# php - 包含带有自定义样式表的受限外部页面

> ID：12568891
> 
> 赞同：0
> 
> 时间：2012-09-24T16:12:45.057
> 
> 标签：php, css, mobile, include, external

我正在做一个移动优化汽车经销商网站的项目。问题是，我们无法直接访问他们的 MySQL 数据库（他们没有 API）来动态生成页面。

我想要做的是 PHP 包含他们的页面，即使我得到这个错误：

```
Warning: include() [function.include]: URL file-access is disabled in the server configuration in /home/content/88/8653188/html/campaigns/summumauto/index.php on line 10

Warning: include(http://www.summumauto.com/en/usedcars/listing/details.spy?id=4745209) [function.include]: failed to open stream: no suitable wrapper could be found in /home/content/88/8653188/html/campaigns/summumauto/index.php on line 10

Warning: include() [function.include]: Failed opening 'http://www.summumauto.com/en/usedcars/listing/details.spy?id=4745209' for inclusion (include_path='.:/usr/local/php5/lib/php') in /home/content/88/8653188/html/campaigns/summumauto/index.php on line 10 
```

然后我想使用我自己的样式表来积极地处理页面的 CSS 以正确地将页面变形为对移动设备友好。

有什么解决方法可以使这成为可能，还是我完全卡住了？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:17:10.087

您需要将[allow-url-include](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-include)配置选项设置为 true，这样您的上述代码才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:17:39.647

您应该能够使用[curl 函数](http://php.net/curl)来解决该错误。

另一方面，如果您可以配置您的服务器，则可以允许包含（可能是 file_get_contents 而不是包含）URL，尽管这可能会带来安全漏洞

# iphone - 让 applicationWillTerminate 和 applicationDidEnterBackground 工作

> ID：12568897
> 
> 赞同：0
> 
> 时间：2012-09-24T16:13:01.310
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试构建一个应用程序，其中一部分处理需要区分进入后台的应用程序和当用户按下从多任务窗格中关闭它时退出的应用程序。但是，从我的所有在线研究中，我发现只能执行以下操作之一：

a) 将 info.plist 中的“应用程序不在后台运行”属性设置为“是”，因此将“进入后台”视为终止

b）默认情况下，进入后台的应用程序会发送通知，但从多任务栏终止它不会。

是否可以获得两者的通知并确保应用程序在进入后台时不会终止？非常感谢您的帮助。我正在运行新的 ios 6。

维韦克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:36:30.430

使用 nsnotification 来检测应用程序何时终止。这将让您知道用户何时从多任务栏终止

```
 UIApplication *app = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(applicationWillTerminate:)
                                             name:UIApplicationWillTerminateNotification
                                           object:app]; 
```

它将在您的文件中调用此选择器：

```
 - (void)applicationWillTerminate:(NSNotification *)notification {
     // Do stuff before termination
 } 
```

否则它将进入后台模式，具体取决于您的 plist 的配置方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:37:38.780

每当用户从任务管理器窗格中停止应用程序时，都会向应用程序发送一个 SIGKILL 信号，因此它不会正常终止，因此不会调用任何选择器。

如果您想确保应用程序不会（由操作系统终止），应用程序应注册为需要 GPS 或音频背景模式（但请记住，应用程序需要以正确的方式真正使用这些功能，否则它将在审查过程中被拒绝）。

下面是关于委托回调的简单解释：

*   applicationWillResignActive - 无论何时最小化应用程序或收到呼叫
*   applicationDidEnterBackground - 每当用户最小化应用程序时
*   applicationWillTerminate - 每当操作系统决定终止应用程序以节省内存时（但不是在被用户杀死时）

# haskell - 使用管道的顺序二进制数据解码

> ID：12568900
> 
> 赞同：6
> 
> 时间：2012-09-24T16:13:21.223
> 
> 标签：haskell, protocol-buffers, conduit

目标是拥有一个具有以下类型签名的管道

```
protobufConduit :: MonadResource m => (ByteString -> a) -> Conduit ByteString m a 
```

管道应重复解析通过 TCP/IP（使用包）`ByteString -> a`接收的协议缓冲区（使用函数）。`network-conduit`

有线消息格式为

```
{length (32 bits big endian)}{protobuf 1}{length}{protobuf 2}... 
```

（花括号不是协议的一部分，仅在此处用于分隔实体）。

第一个想法是用来`sequenceSink`重复应用一个`Sink`能够解析一个 ProtoBuf 的：

```
[...]
import qualified Data.Binary         as B
import qualified Data.Conduit.Binary as CB
import qualified Data.Conduit.Util   as CU

protobufConduit :: MonadResource m => (ByteString -> a) -> Conduit ByteString m a
protobufConduit protobufDecode =
    CU.sequenceSink () $ \() ->
        do lenBytes <- CB.take 4                                -- read protobuf length
           let len :: Word32
               len = B.decode lengthBytes                       -- decode ProtoBuf length
               intLen = fromIntegral len
           protobufBytes <- CB.take intLen                      -- read the ProtoBuf bytes
           return $ CU.Emit () [ protobufDecode protobufBytes ] -- emit decoded ProtoBuf 
```

它不起作用（仅适用于第一个协议缓冲区），因为似乎已经从源读取了许多“剩余”字节，但没有被`CB.take`丢弃。

而且我发现没有办法将“其余部分推回源头”。

我完全错误地理解了这个概念吗？

PS：即使我在这里使用协议缓冲区，问题也与协议缓冲区无关。为了调试问题，我总是使用`{length}{UTF8 encoded string}{length}{UTF8 encoded string}...`与上述类似的管道 ( `utf8StringConduit :: MonadResource m => Conduit ByteString m Text`)。

### 更新：

我只是试图用`()`剩余的字节替换状态（上面示例中没有状态），并`CB.take`通过调用一个函数替换调用，该函数首先消耗已经读取的字节（从状态）并`await`仅在需要时调用（当状态为不够大）。不幸的是，这也不起作用，因为只要 Source 没有剩余字节，`sequenceSink`就不会执行代码，但状态仍然包含剩余的字节 :-(。

如果您应该对代码感兴趣（没有优化或非常好，但应该足以测试）：

```
utf8StringConduit :: forall m. MonadResource m => Conduit ByteString m Text
utf8StringConduit =
    CU.sequenceSink [] $ \st ->
        do (lengthBytes, st') <- takeWithState BS.empty st 4
           let len :: Word32
               len = B.decode $ BSL.fromChunks [lengthBytes]
               intLength = fromIntegral len
           (textBytes, st'') <- takeWithState BS.empty st' intLength
           return $ CU.Emit st'' [ TE.decodeUtf8 $ textBytes ]

takeWithState :: Monad m
              => ByteString
              -> [ByteString]
              -> Int
              -> Pipe l ByteString o u m (ByteString, [ByteString])
takeWithState acc state 0 = return (acc, state)
takeWithState acc state neededLen =
    let stateLenSum = foldl' (+) 0 $ map BS.length state
     in if stateLenSum >= neededLen
           then do let (firstChunk:state') = state
                       (neededChunk, pushBack) = BS.splitAt neededLen firstChunk
                       acc' = acc `BS.append` neededChunk
                       neededLen' = neededLen - BS.length neededChunk
                       state'' = if BS.null pushBack
                                    then state'
                                    else pushBack:state'
                   takeWithState acc' state'' neededLen'
           else do aM <- await
                   case aM of
                     Just a -> takeWithState acc (state ++ [a]) neededLen
                     Nothing -> error "to be fixed later" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:48:54.473

对于协议缓冲区解析和序列化，我们使用`messageWithLengthPutM`and `messageWithLengthGetM`（见下文），但我假设它对长度使用 varint 编码，这不是您需要的。我可能会尝试通过将`messageWithLength`Get/Put替换为以下内容来调整我们的实现

```
myMessageWithLengthGetM = 
   do size <- getWord32be 
      getMessageWithSize size 
```

但我不知道如何`getMessageWithSize`使用协议缓冲区包中的可用功能来实现。另一方面，您可以`getByteString`然后“重新解析”字节串。

关于管道：您是否尝试过不使用管道来实施管道`Data.Conduit.Util`？就像是

```
protobufConduit protobufDecode = loop
   where
      loop = 
         do len <- liftM convertLen (CB.take 4)
            bs <- CB.take len
            yield (protobufDecode bs)
            loop 
```

这是我们使用的代码：

```
pbufSerialize :: (ReflectDescriptor w, Wire w) => Conduit w IO ByteString
pbufSerialize = awaitForever f
    where f pb = M.mapM_ yield $ BSL.toChunks $ runPut (messageWithLengthPutM pb)

pbufParse :: (ReflectDescriptor w, Wire w, Show w) => Conduit ByteString IO w
pbufParse = new
    where
      new = read (runGet messageWithLengthGetM . BSL.fromChunks . (:[]))
      read parse =
          do mbs <- await
             case mbs of
               Just bs -> checkResult (parse bs)
               Nothing -> return ()
      checkResult result =
          case result of
            Failed _ errmsg -> fail errmsg
            Partial cont -> read (cont . Just . BSL.fromChunks . (:[]))
            Finished rest _ msg ->
                do yield msg
                   checkResult (runGet messageWithLengthGetM rest) 
```

# matlab - 任何人都可以建议用于面部认证的良好照明标准化算法。我尝试过基本的算法，如 DoG、LBP、..？

> ID：12568901
> 
> 赞同：3
> 
> 时间：2012-09-24T16:13:26.117
> 
> 标签：matlab, image-processing, opencv, machine-learning, computer-vision

作为我项目的一部分，我想构建一个光照不变的人脸认证系统。约束是我只有 1 个注册图像，但我可以选择自适应地将身份验证图像添加到注册文件夹。面部图像几乎是正面的。任何人都可以建议一种算法或 2-3 种算法的组合，以使我的面部验证系统对照明具有鲁棒性。

我已经用 DoG 尝试了 LBP 和它的变体，还有一个来自 MATLAB INface 工具箱的工具箱，它有大约 20 种不同的照明归一化算法。

-柴坦亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T13:49:51.887

可以校正光照（有诸如 Gray-World、Retinex 等算法）=> 尝试用它们预处理图像。

通过使用不同的色彩空间，例如 Lab 和 HSV，您将获得照明不变分量（HSV 中的 H 和 S，Lab 中的 a、b）但仅适用于白光（它也适用于太阳光）。如果您有蓝灯（例如），那么这些颜色空间将不合适。

我的建议是使用不变特征，例如梯度方向、LBP 特征、SIFT 和 SURF 特征，然后用它们训练分类器。

人脸识别最常见的方法是使用带有 SVM 分类器的 PCA（或内核 PCA）。您可能不得不使用多个图像，因为人不会处于相同头部方向的相同环境中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T19:12:32.367

您是否尝试过转换为 Lab 颜色空间？[http://en.wikipedia.org/wiki/Lab_color_space](http://en.wikipedia.org/wiki/Lab_color_space)

代码： [http ://robotics.stanford.edu/~ruzon/software/rgblab.html](http://robotics.stanford.edu/~ruzon/software/rgblab.html)

# html - IE 不理解 CSS 继承

> ID：12568902
> 
> 赞同：0
> 
> 时间：2012-09-24T16:13:27.233
> 
> 标签：html, css, internet-explorer

我在使用 Internet Explorer 时遇到了问题，当然它在其他浏览器中也能正常工作。所以我有一个 CSS 类。我正在制作一个类似框架的东西，它有左、中和右部分，但有三种不同的配色方案。所以我不想制作 9 个不同的类，我像这个例子一样使用 CSS 功能：

```
.container-header .left { /* Some styles here... */ }
.container-header .left.style1 { /* Some styles here... */ }
.container-header .left.style2 { /* Some styles here... */ }
.container-header .left.style3 { /* Some styles here... */ }

.container-header .middle { /* Some styles here... */ }
.container-header .middle.style1 { /* Some styles here... */ }
.container-header .middle.style2 { /* Some styles here... */ }
.container-header .middle.style3 { /* Some styles here... */ }

.container-header .right { /* Some styles here... */ }
.container-header .right.style1 { /* Some styles here... */ }
.container-header .right.style2 { /* Some styles here... */ }
.container-header .right.style3 { /* Some styles here... */ } 
```

一切都很完美，然后我打开了 Internet Explorer。在我的 HTML 中，我有一个简单的结构，如下所示：

```
<div class="container-header">
    <div class="left style1"></div>
    <div class="middle style1"></div>
    <div class="right style1"></div>
</div> 
```

问题是 IE 有自己的意见，并在代码中的最后一个元素之前跳过了所有 CSS 样式。我的意思是**左 style1**和**中间 style1正在使用****正确的 style1**样式进行渲染。我不知道如何让 IE 在此之前阅读样式而不是跳过它们。如果有人写他的意见，我会很高兴。谢谢 ：）

PP：对不起我的英语不好。:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T16:15:24.923

您的页面可能处于 quirks 模式，因此您需要向页面添加 doctype 声明，以便它以标准模式呈现。

IE 中的 Quirks 模式有一个错误，导致它只能读取类选择器链中的最后一个类，因此它会像这样对待您的规则：

```
.container-header .left { /* Some styles here... */ }
.container-header .style1 { /* Some styles here... */ }
.container-header .style2 { /* Some styles here... */ }
.container-header .style3 { /* Some styles here... */ }

.container-header .middle { /* Some styles here... */ }
.container-header .style1 { /* Some styles here... */ }
.container-header .style2 { /* Some styles here... */ }
.container-header .style3 { /* Some styles here... */ }

.container-header .right { /* Some styles here... */ }
.container-header .style1 { /* Some styles here... */ }
.container-header .style2 { /* Some styles here... */ }
.container-header .style3 { /* Some styles here... */ } 
```

这也会影响标准模式下的 IE6，唯一的解决方法是为您的 HTML 元素分配唯一的类。另请参阅[此答案](https://stackoverflow.com/questions/3772290/css-selector-that-applies-to-elements-with-two-classes/3772305#3772305)以获取说明。

作为旁注，这不是继承错误，而是级联错误（或者更确切地说，选择器解析错误导致级联错误）。

# iphone - 如何在应用程序委托中访问我的类的 var？

> ID：12568907
> 
> 赞同：1
> 
> 时间：2012-09-24T16:13:29.190
> 
> 标签：iphone, objective-c

我目前正在为开发人员创建一个新组件，因为我希望它非常易于集成，我希望能够查看它是否已在应用程序委托中创建，如果是，我想访问它并能够调用它的方法。

我希望答案应该是这样的：

```
Class clazz = [[[UIApplication sharedApplication] delegate] class];

unsigned int varCount;

Ivar *ivars = class_copyIvarList(clazz, &varCount);

for (int i = 0; i < varCount; i++) {
    Ivar var = ivars[i];

    NSString *typeEncoding = [NSString stringWithCString:ivar_getTypeEncoding(var) encoding:NSUTF8StringEncoding];
    NSString *name         = [NSString stringWithCString:ivar_getName(var) encoding:NSUTF8StringEncoding];

} 
```

但我的问题是，使用该代码，我能够找到我的初始化组件......但我怎样才能访问它？

我试过这个：

```
if ([typeEncoding isEqualToString:@"@\"MyClassName\""]) {
        MyClassName *myclass = (MyClassName *)object_getIvar(self, var);
    } 
```

没有成功（它没有指向好的组件）......

有人对此有解决方案吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:11:00.137

好的，

最后我自己找到了。

从应用程序委托访问创建的 var 的方法如下：

```
if ([typeEncoding isEqualToString:@"@\"MyClassName\""]) {
    MyClassName *myclass = (MyClassName *)object_getIvar([[UIApplication sharedApplication] delegate], var);
} 
```

通过这一行，myclass 现在指向来自应用程序委托的好的 var，并且能够从中调用方法（尝试使用为此创建的内部方法）...

希望这会帮助某人...

# android - Android - 服务创建错误

> ID：12568908
> 
> 赞同：0
> 
> 时间：2012-09-24T16:13:37.560
> 
> 标签：android, android-service

你好我正在android中创建一个服务。在服务中，我希望我的代码每 5 分钟定期运行一次。我使用相同的线程。

下面是我的代码

```
@Override
public void onCreate() {
    super.onCreate();
    Toast.makeText(this, "Service created ...", Toast.LENGTH_LONG).show();

    Thread thr = new Thread() {
    public void run() {
        try {
            sleep(20000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally{}
        }
   };
    while (true) {

        // Some code1

        thr.start();
        while(thr.isAlive()){}

        //some code 2
    }

} 
```

我收到以下错误

> 09-24 21:34:40.869：E/AndroidRuntime(12393)：致命异常：主要 09-24 21:34:40.869：E/AndroidRuntime(12393)：java.lang.RuntimeException：无法创建服务 com.example。 find.your.friend.iith.updateService: java.lang.IllegalThreadStateException: 线程已经启动。

你能告诉我我哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:16:02.713

您无法启动已经存在的线程。作为`while(true)`永远执行，`thr.start()`被一次又一次地调用。尝试：

```
while (true) {

    // Some code1

    if(!thr.isAlive()) {
        thr.start();
    }
    while(thr.isAlive()){}

    //some code 2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:22:02.710

为什么不使用报警服务？它是您问题的最佳解决方案。

# google-drive-api - Google Drive API 是否支持直接提供指向 Dropbox API 中可用文件的链接

> ID：12568909
> 
> 赞同：1
> 
> 时间：2012-09-24T16:13:39.117
> 
> 标签：google-drive-api, dropbox-api

如果我想让一些第三方用户直接从某个 Dropbox 帐户下载文件，我可以要求 Dropbox 提供直接链接，通过这个[/media](https://www.dropbox.com/developers/reference/api#media)方法**在 4 小时后过期。**

在 Google Drive 中有[downloadUrl](https://developers.google.com/drive/v2/reference/files#downloadUrl)属性，但它需要传递 accessToken。有没有其他方法可以让 Google Drive 的行为更像 Dropbox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:36:54.440

是的`webContentLink`，您可以将文件中的字段传递给用户以在其浏览器中下载文件。

# c4 - 与 Xcode 4.5 不兼容？

> ID：12568910
> 
> 赞同：1
> 
> 时间：2012-09-24T16:13:47.147
> 
> 标签：c4

可用的[C4 安装程序](http://www.c4ios.com/tutorials/getstarted.php)在尝试安装后会引发一般的“安装失败”错误。是和4.5不兼容，还是只是安装包不兼容？

编辑：它在“验证包”上失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:30:04.420

它安装和工作正常，只是没有验证。诡异的

# iphone - 没有规则来处理架构 armv6 的文件

> ID：12568911
> 
> 赞同：16
> 
> 时间：2012-09-24T16:13:57.227
> 
> 标签：iphone, xcode, project, armv6

我最近使用 iOS SDK 6.0 迁移到 XCode 4.5。现在，当我尝试归档我的应用程序时，我得到一长串编译器警告，所有内容都相同。

> 警告：没有规则为架构 armv6 处理 sourcecode.c.objc 类型的文件 '$(PROJECT_DIR)/Classes/Utils.m'
> 
> 警告：不支持架构 armv6（当前 ARCHS = "armv7 armv6"）。

我无法理解最后一行，它说不支持 armv6，但如您所见，armv6 存在。

1）我该如何解决这个问题？

![项目文件截图](../Images/c5de4a6bc9bfdbc3b02ebadba561883b.png)

2）这可能意味着什么？因为这只是一个警告？我的应用程序更新不会运行 iphone 3gs 吗？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-24T16:23:00.633

正如警告所说，Xcode 4.5 已放弃对 armv6 的支持。该设置正在显示，因为您在项目的早期版本中拥有它。只需更改您的设置以编译 armv7 和 armv7s (iPhone5)。

Apple 已决定放弃对旧设备的支持，因此不推荐使用 armv6。因此，我决定放弃对 armv6 设备的支持。所有 armv7 设备都可以升级到 iOS 5，所以我也将其设置为支持的最低版本。

# android - Android - 万无一失的相机活动

> ID：12568913
> 
> 赞同：2
> 
> 时间：2012-09-24T16:13:59.430
> 
> 标签：android, android-activity, camera, android-camera

我想要做的是能够用我的应用程序拍照并将该照片返回到活动......要么修改它，要么只是查看它。我可能的问题或疑问是：我怎么知道这适用于所有版本的 Android 手机？我知道有些手机运行不同版本/风格的 Android。有些还会在其上覆盖制造商软件。是否可以编写一种方法来处理所有手机及其相机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:37:21.120

使用[ACTION_IMAGE_CAPTURE](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)意图。有关更多信息，请参阅[此](http://developer.android.com/guide/topics/media/camera.html#intent-image)内容。

# ruby-on-rails - 可以单独用回形针宝石做励志海报吗？

> ID：12568915
> 
> 赞同：1
> 
> 时间：2012-09-24T16:14:12.707
> 
> 标签：ruby-on-rails, image, rubygems

是否可以单独使用回形针宝石在轨道上制作励志海报，还是我需要某种图像处理器，如 RMAGICK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:37:27.393

Paperclip[遵循 ImageMagick](https://github.com/thoughtbot/paperclip#image-processor)来处理图像，所以无论如何你都需要它。

# spring - 如何从 JSF 1.2 中的 URL 获取请求参数？

> ID：12568916
> 
> 赞同：3
> 
> 时间：2012-09-24T16:14:15.290
> 
> 标签：spring, jsf

我有一个 Spring + JSF 1.2 应用程序，它在订阅后向用户发送一封带有链接的电子邮件。该链接包含一个请求参数，例如：

> www.myapp.com/register.jsf?var=1

如何在我的 JSF 支持 bean 中获取此请求参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:27:39.140

目前尚不清楚您是使用 Spring 还是 JSF 来管理您的 bean，但在标准 JSF 1.2 中，您需要将其注册为准确`<managed-property>`的请求参数名称`<managed-bean>`在`#{param.var}`哪里：`var`

```
<managed-bean>
    ...
    <managed-property>
        <property-name>var</property-name>
        <value>#{param.var}</value>
    </managed-property>
</managed-bean> 
```

所以如果你的 bean 有一个属性

```
private String var; // +setter (getter is not mandatory) 
```

然后您可以通过一种`@PostConstruct`方法访问和处理它：

```
@PostConstruct
public void init() {
    System.out.println("var is: " + var);
} 
```

* * *

作为完全不同的替代方案，您也可以直接从请求参数中获取它：

```
String var = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("var");
// ... 
```

# javascript - jqm单选按钮不切换

> ID：12568917
> 
> 赞同：0
> 
> 时间：2012-09-24T16:14:22.190
> 
> 标签：javascript, jquery-mobile, radio-button

我正在尝试将单选按钮注入到我的 jQuery-Mobile 页面中，它似乎很顺利，减去了一个细节。我只能选择一次单选按钮。一旦它们被选中，任何点击都不会取消选中它们。注入代码如下，关于我做错了什么有什么想法吗？

```
function load_states() {
    for(var i in level1_states) {
       var str = " ";
       str += "<label for=\" "+i+" \">"+i+"</label>";
       str += "<input type=\"radio\" name=\" "+i+" \" id=\" "+i+" \" value=\""+i+" \" />";

       $(str).appendTo("#level1");
    }
    $("input[type='radio']").prop("type", "radio").checkboxradio();
    $("#level1").controlgroup("create");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:22:29.810

这里的问题是我将每个单选按钮的名称属性设置为具有唯一值。我不知道为了使标准 html 单选按钮正确运行，它们需要有一个通用名称属性，如下所述：

[http://forum.jquery.com/topic/radio-buttons-not-working-as-expected](http://forum.jquery.com/topic/radio-buttons-not-working-as-expected)

# c++ - 使用制表符空格字符标记 CString 问题

> ID：12568920
> 
> 赞同：0
> 
> 时间：2012-09-24T16:14:38.060
> 
> 标签：c++, windows, string

`CString`每当有`"\t"`（制表符空格）字符时，我都会尝试将其一分为二。这是我正在使用的代码：

```
CString val = data->str;
CString valTok;
CString accTok;

int indx = 0;
valTok = val.Tokenize(_T("\t"), indx);
++indx;
accTok = val.Tokenize(_T("\t"), indx); 
```

它很棒，但`accTok`缺少第一个字符。例如，when `val = "String1\tString2"`, `valTok = "String1"`but `accTok ="tring2"`... 怎么会？

**编辑：**

所以按照 hvd 的建议，我删除了`indx`增量，我有以下代码：

```
CString val = ((CItemData*)lpDrawItemStruct->itemData)->str; // Was this value causing the problem in the end
CString valTok;
CString accTok;

int indx = 0;
valTok = val.Tokenize(_T("\t"), indx);
accTok = val.Tokenize(_T("\t"), indx); // ASSERT(iStart >= 0) fails 
```

但是现在由于某种原因第一个`Tokenize`返回..！`-1`有任何想法吗？

**解决了：**

问题在于传递给的值`val`：

```
((CItemData*)lpDrawItemStruct->itemData)->str 
```

有时，在某些情况下第二次`NULL`调用时会导致断言。`Tokenize`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:20:43.967

失去`++indx`.

从[CStringT::Tokenize](http://msdn.microsoft.com/en-us/library/k4ftfkd2.aspx)的文档中：

> *iStart*的值更新为结束分隔符之后的位置，如果到达字符串的结尾，则为 -1。

在第一次调用 之后`Tokenize`，`indx`已经指向了`'\t'`，它已经指向了`'S'`“String2”。通过递增`indx`，它将指向`t`.

这是一个简单的健全性检查`Tokenize`：

```
CString val;
CString str1, str2, str3;
int indx;

val  = _T("");
indx = 0;
str1 = val.Tokenize(_T("\t"), indx);
assert(str1 == _T("") && indx == -1);

val  = _T("String1");
indx = 0;
str1 = val.Tokenize(_T("\t"), indx);
assert(str1 == _T("String1") && indx >= 0);
str2 = val.Tokenize(_T("\t"), indx);
assert(str2 == _T("") && indx == -1);

val  = _T("String1\tString2");
indx = 0;
str1 = val.Tokenize(_T("\t"), indx);
assert(str1 == _T("String1") && indx >= 0);
str2 = val.Tokenize(_T("\t"), indx);
assert(str2 == _T("String2") && indx >= 0);
str3 = val.Tokenize(_T("\t"), indx);
assert(str3 == _T("") && indx == -1); 
```

你得到不同的结果吗？

# ruby-on-rails-3 - Heroku、H12 和直通上传超时

> ID：12568926
> 
> 赞同：4
> 
> 时间：2012-09-24T16:14:47.197
> 
> 标签：ruby-on-rails-3, file-upload, heroku, nginx, timeout

**概述：**

我有一个照相亭，可以拍照并将它们发送到我的网络应用程序。然后我的网络应用程序存储用户数据并将图片发送到用户 facebook 个人资料/粉丝页面。

我的网络应用程序运行**Ruby on Rails @ Heroku** Cedar 堆栈。

**流动：**

1.  我的 web 应用程序通过 POST（如 web 表单）从 photobooth 接收照片。
2.  展位等待服务器响应。如果上传失败，它会再次发送图片。
3.  只有在 Facebook 上传完成后才会触发来自 webapp 的响应。

**问题：**

Webapp 仅在所有处理完成后才将数据发送到 photobooth。很多时候这将在 30 秒后发生。这会导致 Heroku 触发 H12 - Timeout。

**解决方案？**

**在上传文件时保持请求处于活动**状态（返回一些响应数据以防止 heroku 触发 H12 - [https://devcenter.heroku.com/articles/http-routing#timeouts](https://devcenter.heroku.com/articles/http-routing#timeouts)）。- 可能吗？如何在 Ruby 中实现这一点？

**更改为 Unicorn + Nginx**并激活 Upload Module（这样 dyno 仅在上传完成后接收请求 - [Unicorn + Rails + Large Uploads](https://stackoverflow.com/questions/9592664/unicorn-rails-large-uploads)）。真的有可能吗？

**使用 rack-timeout gem**。这会使我的很多直通上传失败，所以这些照片永远不会发布在 Facebook 上，对吧？

**改变架构。**直接上传到 S3，旋转一个工作人员来检查上传到 S3 存储桶的新图片，下载它们并将它们发送到 Facebook。-*这个可能是最好的，但需要很多时间和精力。从长远来看，我可能会这样做，但我现在正在寻找一个快速的解决方案。*

**其他...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:11:12.090

有关此问题的更多信息。

来自 Rapgenius： [http: //rapgenius.com/Lemon-money-trees-rap-genius-response-to-heroku-lyrics](http://rapgenius.com/Lemon-money-trees-rap-genius-response-to-heroku-lyrics)

> 十天前，由于为我们编译的 javascript 服务的一个小问题，我们开始运行大量的 ab 基准测试。我们注意到，我们得到的数字一直比 Heroku 及其分析合作伙伴 New Relic 向我们报告的数字要差。例如，对于静态版权页面，Heroku 报告的平均响应时间为 40 毫秒；我们的工具说 6330ms。什么可以解释这么大的差异？
> 
> “请求在 dyno 级别的队列中等待，”一位 Heroku 工程师告诉我们，“然后很快得到服务（因此 Rails 日志看起来很快），但由于队列中的等待，整体时间变慢了。”</ p>
> 
> 在测功机级别排队等候？什么？

来自 Heroku： [https ://blog.heroku.com/archives/2013/2/16/routing_performance_update](https://blog.heroku.com/archives/2013/2/16/routing_performance_update)

> 在过去的几年中，Heroku 客户偶尔会报告 Heroku 出现无法解释的延迟。延迟的原因有很多——其中一些与 Heroku 无关——但直到本周，我们还没有在这些报告中看到一个共同点。我们现在知道，我们在 Bamboo 和 Cedar 堆栈上的路由和负载平衡机制为我们的 Rails 客户带来了延迟问题，这体现在几个方面，包括：
> 
> *   某些请求的无法解释的高延迟
> *   报告的排队和服务时间指标与观察到的现实不匹配
> *   记录和观察到的行为之间的差异
> 
> 对于在 Bamboo 堆栈上运行的应用程序，这些问题的根本原因是 Bamboo 堆栈上路由的性质以及路由集群的逐渐、水平扩展。在 Cedar 堆栈上，根本原因是 Cedar 针对并发请求路由进行了优化，而某些框架（如 Rails）在其默认配置中不是并发的。
> 
> 我们希望 Heroku 成为构建、部署和扩展 Web 和移动应用程序的最佳场所。在这种情况下，我们没有兑现承诺。我们未能：
> 
> *   正确记录路由在 Bamboo 堆栈上的工作方式
> *   了解我们的客户所经历的服务降级并采取纠正措施
> *   识别并纠正从路由层报告并由第三方工具显示的混淆指标
> *   清楚地传达我们路由服务的产品策略
> *   为客户提供从 Bamboo 上的非并发应用程序到 Cedar 上的并发 Rails 应用程序的升级路径
> *   兑现 Heroku 的承诺，让您专注于开发应用程序，而我们担心基础架构
> 
> 我们将立即采取以下措施：
> 
> *   改进我们的文档，使其准确反映我们的服务在 Bamboo 和 Cedar 堆栈中的工作方式
> *   删除 Heroku 或 New Relic 等合作伙伴服务报告的不正确和令人困惑的指标
> *   添加让客户确定排队对应用程序响应时间的影响的指标
> *   提供其他工具，开发人员可以使用这些工具来增加我们的延迟和排队指标
> *   努力在 Cedar 上更好地支持并发请求 Rails 应用程序
> *   这篇博文的其余部分解释了我们路由基础设施的技术细节和历史、我们在此过程中做出的决策背后的意图、我们所犯的错误以及我们认为的前进道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:21:46.860

1）您可以使用**Unicorn**作为您的应用服务器，并将 unicorn master 杀死工作人员之前的超时设置为大于您的请求所需的秒数。这是一些[示例设置](http://blog.railsonfire.com/2012/05/06/Unicorn-on-Heroku.html)，您可以在其中看到 30 秒的超时。

Nginx 不适用于 heroku，所以这是没有选择的。

2) 更改架构也可以很好地工作，尽管我会选择一个选项，而不是上传流量不会阻塞我自己的服务器，例如[**TransloadIt**](https://transloadit.com/)。它们将帮助您将图片获取到 S3 以作为示例并进行自定义转换、裁剪等，而无需添加额外的测功机，因为您的进程被文件上传阻塞。

*补充*：3）架构的另一个变化是只在一个动作中处理接收部分，并将上传到facebook的任务交给**后台工作人员**（例如使用[Sidekiq](https://github.com/mperham/sidekiq)）。

# java - Java 环境相关编译

> ID：12568931
> 
> 赞同：1
> 
> 时间：2012-09-24T16:15:05.983
> 
> 标签：java, compiler-construction, configuration, options

我在这里看到了答案，您可以在 Java 中使用 final static const 变量来防止代码部分被编译。我对这种方法的担心是我健忘。:-( 在签入代码之前，我可能会忘记将变量设置回 false，这可能会对项目产生负面影响。

在 C/C++ 中，您可以指定可用于控制代码编译的环境宏。例如：

```
#if defined(_PROFILE)
Time startTime;
#endif

... run some code ...

#if defined(_PROFILE)
Time endTime;
std::cout << "Code took " << endTime - startTime << " seconds\n";
#endif 
```

因此，只有在有人专门定义了 _PROFILE 宏时，分析测试代码才会被编译，该宏可以作为编译器命令行上的一个选项传递，并且没有意外签入的风险。

有没有办法在Java中模仿这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:18:18.883

您可以使用运行时属性。由于 Java 是动态编译的，因此它具有大致相同的效果。

```
 static final boolean PROFILE = Boolean.getBoolean("VictimZero.PROFILE");

 long startTime;
 if (PROFILE)
    startTime = System.nanoTime();

 ... run some code ...

 if (PROFILE) {
    long enTime = System.nanoTime();
    System.out.printf("Code took %.3f seconds%n", (endTime - startTime)/1e9);
 } 
```

你可以使用稍微hacky

```
 static final boolean VICTIM_ZERO = 
                         System.getProperty("user.name").equals("VictimZero"); 
```

# ruby-on-rails - 如何改进 Rails 中类似 wiki 的链接？

> ID：12568940
> 
> 赞同：1
> 
> 时间：2012-09-24T16:15:25.703
> 
> 标签：ruby-on-rails, regex

我有一个 Rails 应用程序，我正在编辑文本并允许类似 wiki 的链接。我已经让它工作了，所以你可以在描述中写 [[:slug]] ，它会生成相关页面的链接，链接文本是保存在数据库中的名称。我想做这样我就可以写 [[:slug | Some Text]] 并且链接会显示“Some Text”而不是名称。此外，我想让它可选地包含自定义链接文本。

这是我正在使用的代码。

```
def replace_slugs(text)
  slugs = text.scan(/\[{2}:([^\]]*)\]{2}/).map{|s|s[0]}
  Character.where(:slug => slugs).each{|ch| text.gsub!("[[:#{ch.slug}]]",
    link_to(ch.name, adventure_character_path(ch.adventure, ch)))}
  return text
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:42:33.717

在对 Rails 的正则表达式和字符串扫描进行了一些研究之后，我想出了我的问题的答案。这是我现在使用的方法的代码：

```
def replace_slugs(text, characters)
  # Regexp that will recognize wiki urls with pipes and return 2 items
  # It also ignores wiki urls that don't have a pipe
  # /\[\[:([^|\]]*)?\|([^\]]+)\]\]/
  links = text.scan(/\[\[:([^|\]]*)?\|([^\]]+)\]\]/)
  for link in links do
    slug = link[0]
    title = link[1]

    # I'm stripping out the whitespace when I do my find and for my link
    # This makes it so you can have whitespace before and after the pipe
    # e.g. [[:slug|Title]] [[:slug | Title]] [[:slug   |   Title]]
    ch = characters.find_by_slug(slug.strip)
    text.gsub!("[[:#{slug}|#{title}]]", link_to(title.strip,
      adventure_character_path(ch.adventure, ch))) if ch
  end

  slugs = text.scan(/\[{2}:([^\]]*)\]{2}/).map{|s|s[0]}
  characters.where(:slug => slugs).each{|ch| text.gsub!("[[:#{ch.slug}]]",
    link_to(ch.name, adventure_character_path(ch.adventure, ch)))}
  return text
end 
```

Because of the way I formulated the regexp, I had to make two separate calls for when there are both links of form [[:slug]] and [[:slug|Title]]. Because of that, I've added an extra variable in the method called characters. This is so I can pass in an array of characters from where I call the method instead of having to search the entire database as that could get expensive and I already know the list of characters I want to use.

# mfc - 拖放目标如何在源自外部的拖放中覆盖光标形状？

> ID：12568947
> 
> 赞同：0
> 
> 时间：2012-09-24T16:15:36.403
> 
> 标签：mfc, drag-and-drop, cursor

我有一个用作放置目标的 MFC 窗口。根据用户放置某些类型数据的位置，我想更改光标形状以指示将发生什么动作，只有动作不是移动/复制/链接，而是我有自定义光标的更复杂的动作。

这是一个例子，如果它有帮助的话。想象一下，我有一个带有 2 个方块的窗口，用户可以在其中放置文件：在第一个方块中，通过电子邮件发送文件，在第二个方块中，文件存储在 Dropbox 中。我有一个电子邮件光标和一个保管箱光标，当用户将鼠标悬停在方块上时，我希望光标相应地改变。

在 MFC 中，您可以创建一个*COleDropSource*对象并重写它的*GiveFeedback()*方法来执行此操作。但是，这仅在您可以将该对象传递给*COleDataSource::DoDragDrop()*时才有效，即如果您自己开始拖动操作。如果拖动源自我的应用程序内部，则此方法有效，我可以获得所需的光标类型。如果拖动来自 Windows 资源管理器，我没有机会提供自己的*COleDropSource*对象，因此我无法覆盖光标形状。

直接在 OnDragOver() 中设置光标不起作用，因为 Windows 使用该方法的结果值来更改光标，因此在 Windows 将其更改回标准形状之一之前，我只看到所需光标的几分之一秒.

有没有其他方法可以解决这个问题？

（这个问题类似于这个问题[，](https://stackoverflow.com/questions/5234150/how-to-change-the-drag-and-drop-cursor-when-mouseover-a-drop-target)只是我使用的是 MFC，所以那里提出的解决方案不起作用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:34:12.507

恐怕源应用程序对用户反馈负责。您可以通过 IDropTarget 向源应用程序提供提示，但使用该反馈是源的责任。

这真的很有意义，源应用程序是真正知道数据是什么以及可以用它做什么（想想从 zip 文件中拖动文件等）的应用程序。

# eclipse - maven - 工作区间依赖关系

> ID：12568950
> 
> 赞同：1
> 
> 时间：2012-09-24T16:15:42.090
> 
> 标签：eclipse, maven, dependencies

我正在使用 Eclipse 和 Maven 集成。

maven install 将资源放到本地存储库中。本地存储库分为“本地存储库”和“工作区项目”，如 eclipse 视图“Maven 存储库”所示。

该资源无法被不同工作空间的其他项目链接。有没有办法让“maven install”将shnapshots放到可用于任何项目的“顶级”本地存储库中？还是我误解了这个概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:26:16.123

工作区项目只是 m2e 插件提供的一项便利功能，如果工件规范（组 ID、工件 ID 和版本）与工作区中的项目匹配，它会解析当前工作区中项目的依赖关系。如果没有匹配项，m2e 只是使用`.m2/repo`文件夹中的 jar 作为依赖项。

此功能的好处是您不必不断地进行 maven`build`和`install`依赖项目，您的代码更改会立即反映在依赖项目中。

但是，这只是一个便利功能，您始终可以在依赖项目中进行 maven 安装并刷新依赖项目以使更改反映在那里。

TL;DR 只需在您的依赖项项目上执行通常的 maven 安装并刷新任何工作区。它应该工作。

# c - SIMDify 一个函数

> ID：12568952
> 
> 赞同：0
> 
> 时间：2012-09-24T16:15:47.773
> 
> 标签：c, x86, sse, simd

我需要有关 SIMD-ifing 这些特定功能的帮助。

我只是在学习 SIMD 和 SSE 以及随之而来的所有好处，因此您的帮助将是

伟大的。谢谢

```
void block_8x8(uint8_t *block1, 
               uint8_t *block2, 
               int stride, 
               int *result)

{   

*result = 0;

    int u,v;

    for (v=0; v<8; ++v)
        for (u=0; u<8; ++u)
            *result += abs(block2[v*stride+u] - block1[v*stride+u]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:20:28.073

这是 SSE (Intel)/MMX+ (AMD) 版本。

```
void block_8x8(uint8_t *block1, 
               uint8_t *block2, 
               int stride, 
               int *result)

{   
    const __m64 sad0 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad1 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad2 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad3 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad4 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad5 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad6 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));
    block1 += stride; block2 += stride;
    const __m64 sad7 = _mm_sad_pu8(*((const __m64*)(block1)), *((const __m64*)(block2)));

    *result = _mm_cvtsi64_si32(_mm_add_pi32(
        _mm_add_pi32(
            _mm_add_pi32(sad0, sad1),
            _mm_add_pi32(sad2, sad3)
        ),
        _mm_add_pi32(
            _mm_add_pi32(sad4, sad5),
            _mm_add_pi32(sad6, sad7)
        )
    ));
    _mm_empty();
} 
```

# android - 使用 GSON 从 Web 服务检索数据时遇到问题

> ID：12568954
> 
> 赞同：1
> 
> 时间：2012-09-24T16:15:54.813
> 
> 标签：android, json, gson, webservice-client, arrays

我已经尝试了很多关于 GSON 的示例和教程以及使用它的工作原理，例如：

*   [http://www.softwarepassion.com/android-series-parsing-json-data-with-gson/](http://www.softwarepassion.com/android-series-parsing-json-data-with-gson/)

*   [http://androidsmith.com/2011/07/using-gson-to-parse-json-on-android/](http://androidsmith.com/2011/07/using-gson-to-parse-json-on-android/)

等等。

我的问题是我的 json 返回了这个 json 值`http://localhost:3000/users/1.json`，即：

```
{
  "created_at": "2012-09-20T01:43:15Z",
  "id": 1,
  "name": "kevin",
  "updated_at": "2012-09-20T01:43:15Z"
} 
```

另一个在这个 url`http://localhost:3000/users.json`中有一个 json 值

```
[ {
    "created_at": "2012-09-20T01:43:15Z",
    "id": 1,
    "name": "kevin",
    "updated_at": "2012-09-20T01:43:15Z"
  }, {
    "created_at": "2012-09-20T01:43:33Z",
    "id": 2,
    "name": "pineda",
    "updated_at": "2012-09-20T01:43:33Z"
  }, {
    "created_at": "2012-09-20T01:46:08Z",
    "id": 3,
    "name": "raphael",
    "updated_at": "2012-09-20T01:46:08Z"
  }, {
    "created_at": "2012-09-20T16:13:42Z",
    "id": 4,
    "name": null,
    "updated_at": "2012-09-20T16:13:42Z"
  }, {
    "created_at": "2012-09-20T16:18:03Z",
    "id": 5,
    "name": null,
    "updated_at": "2012-09-20T16:18:03Z"
  }, {
    "created_at": "2012-09-20T16:19:23Z",
    "id": 6,
    "name": null,
    "updated_at": "2012-09-20T16:19:23Z"
  }, {
    "created_at": "2012-09-20T16:20:41Z",
    "id": 7,
    "name": null,
    "updated_at": "2012-09-20T16:20:41Z"
  } 
] 
```

我很难解析这些数据并将其用于存储目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:44:20.333

为了解析您的 JSON，您首先需要创建一个类来*包装*您的数据。在你的情况下：

```
public class Item {
  @SerializedName("created_at")
  private String createdAt;
  @SerializedName("id")
  private int id;
  @SerializedName("name")
  private String name;
  @SerializedName("updated_at")
  private String updatedAt;
  //getters and setters
} 
```

然后，为了解析您的**第一个**JSON 响应，您只需执行以下操作：

```
Gson gson = new Gson();
Item item = gson.fromJson(your1stJsonString, Item.class); 
```

您的**第二个**JSON 响应有点棘手，因为它是一个数组。问题是你不能简单地做：

```
List<Item> item = gson.fromJson(your1stJsonString, List<Item>.class); //wrong! 
```

`List<Item>`前面的代码失败是因为 Java由于[**类型擦除**](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)而无法知道 的类。

所以你必须这样做：

```
Type itemListType = new TypeToken<List<Item>>() {}.getType();
List<User> itemList = gson.fromJson(your2stJsonString, itemListType); 
```

就是这样，一旦您在对象（或对象列表）中解析了 JSON 响应，您就可以照常访问所有检索到的数据：

```
String name = itemList.get(i).getName(); 
```

* * *

*注意 1*：请注意，我已将 created_at 和 updated_at 属性的类型设置为 just `String`，因为它使事情变得更容易。我通常这样做，然后我解析`Date`或任何其他*conictive*类型。无论如何，如果您想直接解析日期，我认为您可以按照[**Gson's User Guide**](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-a-Deserializer)**使用自定义反序列化器**。[](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-a-Deserializer)

 *** * *

*注意2*：注释的使用`@SerializedName`很有趣，可以将 JSON 响应和应用程序中的字段名称分开，以遵循 Java 命名约定......**

# xml - JAXB 将 inXml 标志解组为完整对象

> ID：12568956
> 
> 赞同：1
> 
> 时间：2012-09-24T16:16:02.473
> 
> 标签：xml, jakarta-ee, xml-parsing, jaxb, xsd

我有以下问题。我的架构如下。

```
 <xs:element name="subject">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="subjectId" type="xs:integer"/>
            <xs:choice>
              <xs:sequence>
                <xs:element name="inXml" type="xs:boolean"/>
              </xs:sequence>
              <xs:sequence>
                <xs:element name="subjectId" type="xs:integer" minOccurs="0"/>
            <xs:element name="names" type="Name" maxOccurs="unbounded"/> 
```

..... 等等。

这导致 XML 具有 2 种类型的对象：

1.  具有我需要的所有数据（主题 ID、名称等）的精美节点
2.  subjectId + inXml 标志设置为 true。

在解组 ofc 时，我得到其中任何一个。

在解组过程中，如何让应用程序查找完整数据并在需要时替换它？

# php - 具有嵌入式表单处理的单页 Facebook 应用程序 - 签名请求问题

> ID：12568959
> 
> 赞同：0
> 
> 时间：2012-09-24T16:16:11.440
> 
> 标签：php, mysql, html, facebook, forms

我正在开发我的第一个 facebook fanpage 应用程序，并在同一页面上处理注册表单。

该应用程序的工作原理如下：

1.  检查 facebook 用户是否登录 -> 如果没有，要求登录，如果是，将基本用户数据记录到我的数据库 table1 (mysql)，
2.  检查用户是否喜欢我的 facebook 页面 -> 如果不喜欢，要求点击喜欢按钮，如果是则继续下一步，
3.  检查我的数据库 table2 中是否已经存在用户数据-> 如果没有，则打印出注册表并将其发送到同一页面以在 mysql 中进行处理
4.  当用户注册后，实际的独家内容应该显示给用户。

我的问题是，在发送注册表单后，用户返回“非粉丝”区域（尽管他已经喜欢该页面，因此应该看到仅限粉丝的内容）并且“错误”一词被打印到顶部这页纸。-> 这意味着页面开头的“isset($_REQUEST['signed_request'])”返回false。

这是我的代码：

```
<?php
require '../facebook-php-sdk/src/facebook.php';
$facebook = new Facebook(array(
'appId'  => 'fb-app-id',
'secret' => 'fb-app-secret',
'cookie' => true,
));
$user = $facebook->getUser();

function saveuser(&$id, &$name, &$email, &$ip, $hostname, $browser, &$like) {
mysql_connect('host', 'user', 'password');mysql_set_charset('utf8');mysql_select_db('mydatabase');
mysql_query("INSERT INTO mytable1 (id,name,email,ip,hostname,browser,fblike) VALUES ($id, '$name', '$email', '$ip', '$hostname', '$browser', $like)");
mysql_close();
}

function checkuser(&$id) {
mysql_connect('host', 'user', 'password');mysql_set_charset('utf8');mysql_select_db('mydatabase');
$query="SELECT phone, round, points FROM mytable2 WHERE fbuserid = " .$id. " ORDER BY timecreated DESC LIMIT 1";
$result=mysql_query($query);
mysql_close();
return $result;
}
?>
<html><head><title>page title</title></head>
<body>
<?php
if (isset($_REQUEST['signed_request'])) {
$encoded_sig = null;
$payload = null;
list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
$sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
$signed_request = json_decode(base64_decode(strtr($payload, '-_', '+/'), true),true);
} else { echo "ERROR"; }
if ($signed_request['page']['liked']) { $like = 1; } else { $like = 0; }
if ($user) { try {
$user_profile = $facebook->api('/me','GET');
$name = $user_profile['name'];
$email = $user_profile['email'];
$id = $user_profile['id'];
$ip = $_SERVER['REMOTE_ADDR'];
$hostname = gethostbyaddr($ip);
$browser = $_SERVER['HTTP_USER_AGENT'];
saveuser($id, $name, $email, $ip, $hostname, $browser, $like);
} catch(FacebookApiException $e) {
?>
<script type="text/javascript">
//<![CDATA[
var oauth_url = 'https://www.facebook.com/dialog/oauth/';
oauth_url += '?client_id=fb-app-id';
oauth_url += '&redirect_uri=' + encodeURIComponent('https://www.facebook.com/fb-page-name?sk=app_fb-app-id');
oauth_url += '&scope=email'
window.top.location = oauth_url;
//]]>
</script>
<?php } } else { // User not logged in or we need user permission ?>
<script type="text/javascript">
//<![CDATA[
var oauth_url = 'https://www.facebook.com/dialog/oauth/';
oauth_url += '?client_id=fb-app-id';
oauth_url += '&redirect_uri=' + encodeURIComponent('https://www.facebook.com/fb-page-name?sk=app_fb-app-id');
oauth_url += '&scope=email'
window.top.location = oauth_url;
//]]>
</script>
<?php } 
if ($like == 1) { // user is fan of my facebook page
$userdata = checkuser($id);
if (mysql_num_rows($userdata) > 0) { // user is registered
$userphone=mysql_result($userdata,0,telefon);
$roundscompleted=mysql_result($userdata,0,round);
$currentpoints=mysql_result($userdata,0,points);
?>

Here comes extended html content visible only for users who have liked my page and completed the registration form.

<?php } else { // user is not registered
if ($_POST['emailaddress'] != "") { // process user registration
mysql_connect('host', 'user', 'password');mysql_set_charset('utf8');mysql_select_db('mydatabase');
$id = $_POST['fbuserid'];
$name = mysql_real_escape_string($_POST['fullname']);
$email = mysql_real_escape_string($_POST['emailaddress']);
$mobile = mysql_real_escape_string($_POST['phonenumber']);
mysql_query("INSERT INTO mytable2 (fbuserid,regname,regemail,telefon) VALUES ('$id', '$name', '$email', '$mobile')");
mysql_close();

/*
On this point, the page should be reloaded and checkuser() function should return user data.
What happens is "ERROR" gets printed on top of page and user gets back to the "non-fan area".
*/

} else { // user not registered - print registration form ?>
<form id="regisztracio" name="regisztracio" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<fieldset><legend>Registration form</legend>
<label>Your name</label>
<input type="text" name="fullname" id="fullname" value="<?php echo $name; ?>" />
<br style="clear:both;" />
<label>Your e-mail</label>
<input type="text" name="emailaddress" id="emailaddress" value="<?php echo $email; ?>" />
<br style="clear:both;" />
<label>Your phone number</label>
<input type="text" name="phonenumber" id="phonenumber" />
<br style="clear:both;" />
<input name="fbuserid" type="hidden" value="<?php echo $id; ?>" />
<input name="submitreg" type="submit" class="submit" value="Register" />
</fieldset></form>
<?php } } } else { // non-fan area ?>

Here comes basic html content asking the user to click on the like button and become a fan of my facebook page.

<?php } ?>
</body>
</html> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:43:57.343

> 这意味着页面开头的 "isset($_REQUEST['signed_request'])" 返回 false。

当然可以——因为 signed_request 参数仅在*初始*页面加载时发布到您的页面。在用户开始在 iframe 中的应用内导航后，它**不再存在。**

因此，在每个请求上，检查是否有*signed_request*参数 - 如果有，请将其（最好是解码版本）保存到会话中。

每当您需要查找一个值时——在会话中查找它。

# c++ - 使用内联 ASM 获取字符串

> ID：12568960
> 
> 赞同：0
> 
> 时间：2012-09-24T16:16:12.660
> 
> 标签：c++, windows, assembly, hook, inline-assembly

我正在做的是将 DLL 注入正在运行的进程中。然后我继续检查有关该过程的一些信息，例如版本等。我的问题是我似乎无法访问程序集文件中的字符串，其中包含我要仔细检查的修订号。这是我到目前为止所拥有的：

```
__declspec(naked) void CheckBuild()
{
    char* revision;
    __asm {
        sub esp, __LOCAL_SIZE
        pushad
        pushfd

        mov revision, dword ptr 0x5F5200
    }

    printf("Detected revision ID: %u\n", revision);

    __asm {
        popfd
        popad
        add esp, __LOCAL_SIZE
        retn
    }
} 
```

对于这个培训内容，我通过 IDA 获得并使用 CheatEngine 和 OllyDbg 检查的字符串地址是不变的。

但是，无论我尝试什么，我总是得到十进制的 0x5F5200，这绝对不是我所期望的。我几乎尝试了一切，包括 lea 和其他人，但我仍然没有得到有效的字符串。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:28:13.593

1.  您缺少“取消引用”：

    `mov revision, dword ptr [0x5F5200]`

这不是一个有效的指令，因为它有两个间接指令，所以

```
mov eax, dword ptr [0x5F5200]
mov revision, eax 
```

1.  如果该值确实是一个字符串，那么还有其他问题：

    *   如果字符串存储在 0x5F5200，您只需使用

    `printf("Detected revision ID: %s\n", 0x5F5200)`

    *   如果字符串的地址存储在 0x5F5200，您将使用

    `printf("Detected revision ID: %s\n", revision)`

2.  字符串格式

如果字符串是 unicode，您将使用

```
printf("Detected revision ID: %S\n", revision); 
```

（请注意，对于 wprintf，它是另一种方式'round： %s 用于宽字符串， %s 用于 char 字符串）。

最后，如果字符串不能保证以零结尾但具有固定长度，则需要从地址复制到本地缓冲区，并确保在打印前零结尾。

# xml - 使用 XSLT 有什么区别 并从字面上声明元素？

> ID：12568962
> 
> 赞同：6
> 
> 时间：2012-09-24T16:16:33.033
> 
> 标签：xml, xslt

我最近才开始使用 XSLT，我想知道使用`<xsl:element>`定义元素与仅在 XSLT 中将它们声明为文字之间的有效区别是什么。例如，让我们举一个简化的例子，我将一个很小的 ​​XML 文档的内容转换为 (x)HTML。

**1.我可以顺其自然`<xsl:element>`：**

```
<xsl:element name="h1">
    <xsl:value-of select="heading"/>
</xsl:element> 
```

**2.或者手动定义元素：**

```
<h1>
    <xsl:value-of select="heading"/>
</h1> 
```

这两者之间的实际区别是什么？如果存在差异，它们中的哪一个被认为是*“好风格”*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T16:30:05.040

它们几乎相同，唯一的例外是文字元素会将*样式表*`<h1>`中该点范围内的命名空间节点添加到结果树中，而不会。这对您的输出有什么影响取决于您的样式表包含的名称空间声明以及您在结果树中的哪个位置使用它们（如果有的话）。例如，针对任何输入 XML 文档运行以下转换：*`<xsl:element name="h1">`*

 *```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:foo="http://example.com">

  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">
    <root>
      <foo:element1 />
      <foo:element2 />
    </root>
  </xsl:template>
</xsl:stylesheet> 
```

产生以下输出（使用 xsltproc）：

```
<?xml version="1.0"?>
<root xmlns:foo="http://example.com">
  <foo:element1/>
  <foo:element2/>
</root> 
```

`<root>`但是将样式表中的文字`<xsl:element name="root">`改为产生

```
<?xml version="1.0"?>
<root>
  <foo:element1 xmlns:foo="http://example.com"/>
  <foo:element2 xmlns:foo="http://example.com"/>
</root> 
```

因为`<xsl:element>`表单没有将“foo”命名空间节点附加到生成的元素。如果这很重要，并且您实际上想要将样式表命名空间声明复制到您创建的元素上，`<xsl:element>`您可以通过嵌套类似的东西来做到这一点

```
<xsl:copy-of select="document('')/*/namespace::foo" /> 
```

直接在它里面（使用`document('')`它提供对样式表 XML 文档本身的访问的习语）。

但一般来说，主要用途`<xsl:element>`是计算元素名称而不是“编译时”文字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T16:29:54.367

xsl:element 允许定义在编写样式表时不知道其名称的元素，以及动态创建名称的元素。如果可能，我将始终使用内联定义（即手动）。它更短，我认为它更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:58:20.060

答案中尚未指出的另一个技术差异：如果您将自己限制在`xsl:element`构造函数中，则您的样式表可以针对 XSLT 的 DTD 有效。在某些环境中（例如，您有一个支持 DTD 的编辑器），这可能是有利的。就是说，我多次被告知没有人真正使用 DTD 来指导他们的 XSLT 构建（也就是说，除了我）。

还有一个形而上学的区别（字面结果元素可以被视为标签滥用的一种形式，因为您使用`h1`的意思*不是*“这是一级标题”而是“在此处放置一级标题” ")，但这主要是标记理论家和语言设计者感兴趣的；我只是为了完整起见才提到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T02:48:05.197

**我强烈建议在任何可能的地方使用文字结果元素**。

因此，如果元素的名称是预先知道的（不是动态确定的）并且不需要命名空间操作，则使用文字结果元素。

**使用文字结果元素的主要优点是它的可读性和与相比更少的移动部件`xsl:element`- 这意味着更不容易出错**。*

# javascript - 多个特殊字符替换优化

> ID：12568966
> 
> 赞同：0
> 
> 时间：2012-09-24T16:16:42.597
> 
> 标签：javascript, jquery, string, special-characters

我需要用**javascript**或 jQuery 替换字符串中的所有特殊字符。
我确信有更好的方法来做到这一点。
但我目前没有任何线索。
有人有想法吗？

```
function Unaccent(str) {
    var norm = new Array('À','Á','Â','Ã','Ä','Å','Æ','Ç','È','É','Ê','Ë','Ì','Í','Î','Ï', 'Ð','Ñ','Ò','Ó','Ô','Õ','Ö','Ø','Ù','Ú','Û','Ü','Ý','Þ','ß', 'à','á','â','ã','ä','å','æ','ç','è','é','ê','ë','ì','í','î','ï','ð','ñ', 'ò','ó','ô','õ','ö','ø','ù','ú','û','ü','ý','ý','þ','ÿ');
    var spec = new Array('A','A','A','A','A','A','A','C','E','E','E','E','I','I','I','I', 'D','N','O','O','O','0','O','O','U','U','U','U','Y','b','s', 'a','a','a','a','a','a','a','c','e','e','e','e','i','i','i','i','d','n', 'o','o','o','o','o','o','u','u','u','u','y','y','b','y');
    for (var i = 0; i < spec.length; i++) {
        str = replaceAll(str, norm[i], spec[i]);
    }
    return str;
}

function replaceAll(str, search, repl) {
    while (str.indexOf(search) != -1) {
        str = str.replace(search, repl);
    }
    return str;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:25:41.973

这是一个使用查找图的版本，它比嵌套循环更有效：

```
function Unaccent(str) {
    var map = Unaccent.map;       // shortcut
    var result = "", srcChar, replaceChar;
    for (var i = 0, len = str.length; i < len; i++) {
        srcChar = str.charAt(i);
        // use hasOwnProperty so we never conflict with any 
        // methods/properties added to the Object prototype
        if (map.hasOwnProperty(srcChar)) {
            replaceChar = map[srcChar]
        } else {
            replaceChar = srcChar;
        }
        result += replaceChar;
    }
    return(result);
}

// assign this here so it is only created once
Unaccent.map = {'À':'A','Á':'A','Â':'A'};   // you fill in the rest of the map 
```

工作演示：http: [//jsfiddle.net/jfriend00/rRpcy/](http://jsfiddle.net/jfriend00/rRpcy/)

仅供参考，谷歌搜索“重音折叠”返回许多其他实现（许多类似，但也有一些使用正则表达式）。

* * *

这是一个性能更高的版本（快 2.5 倍），它可以对重音字符进行直接索引查找，而不必进行对象查找：

```
function Unaccent(str) {
    var result = "", code, lookup, replaceChar;
    for (var i = 0, len = str.length; i < len; i++) {
        replaceChar = str.charAt(i);
        code = str.charCodeAt(i);
        // see if code is in our map
        if (code >= 192 && code <= 255) {
            lookup = Unaccent.map.charAt(code - 192);
            if (lookup !== ' ') {
                replaceChar = lookup;
            }
        }
        result += replaceChar;
    }
    return(result);
}

// covers chars from 192-255
// blank means no mapping for that char
Unaccent.map = "AAAAAAACEEEEIIIIDNOOOOO OUUUUY  aaaaaaaceeeeiiiionooooo  uuuuy y"; 
```

工作演示：http: [//jsfiddle.net/jfriend00/Jxr9u/](http://jsfiddle.net/jfriend00/Jxr9u/)

在[这个 jsperf](http://jsperf.com/accent-replacement)中，字符串查找版本（第二个示例）大约快 2.5 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:37:14.207

您可以准备数组的键值对类型，并通过 jquery 遍历该数组。

例子 ：

```
function Unaccent(str) {
   var replaceString = {'À':'A','Á':'A','Â':'A'}; // add more 

   $.each(replaceString, function(k, v) {
      var regX = new RegExp(k, 'g');    
      str = str.replace(regX,v);
   });
} 
```

[工作演示](http://jsfiddle.net/rRpcy/3/)

祝你好运 ！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:38:07.097

使用对象作为映射是个好主意，但考虑到要替换的字符数，预初始化对象可能是个好主意，这样每次函数获取时都不必重新初始化运行（假设您不止一次运行该函数）：

```
var Unaccent = (function () {
    var charMap = {'À':'A','Á':'A','Â':'A','Ã':'A','Ä':'A' /** etc. **/};
    return function (str) {
        var i, modified = "", cur;
        for(i = 0; i < str.length; i++) {
            cur = str.charAt(i);
            modified += (charMap[cur] || cur);
        }
        return modified;
    };
}()); 
```

这会将函数的繁重工作提前加载到页面加载时间（如果您愿意，您可以进行一些修改以将其延迟到第一次调用该函数）。但这会占用实际函数调用的一些处理时间。

无论如何，某些浏览器实际上可能会优化这部分，因此您可能看不到任何好处。但在较旧的浏览器上（性能更受关注），您可能会看到预处理字符映射的一些好处。

# css - 响应式布局问题

> ID：12568969
> 
> 赞同：1
> 
> 时间：2012-09-24T16:17:06.147
> 
> 标签：css, responsive-design

我正在努力为我们正在构建的网络应用程序进行响应式设计。

下图显示了我正在处理的原型，取自它下面的 jsfiddle。

而不是灰色块相互折叠，我希望它们继续水平滚动，如果它不在视线范围内，则会导致滚动。

我使用 Erskine 的 gridpak 为我生成响应式网格。有没有办法使用当前网格来实现效果？我对它有点犹豫。

[![](../Images/61c87d7beadaa0a2813ad8c021871361.png)](https://i.stack.imgur.com/FJzBa.png)

[http://jsfiddle.net/brendan_rice/wT8MG/](http://jsfiddle.net/brendan_rice/wT8MG/)

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:06:33.647

`white-space:nowrap`您可以使用和来实现它`display:inline-block`。

[http://jsfiddle.net/wT8MG/7/](http://jsfiddle.net/wT8MG/7/)

我删除了块之间的空白以消除由渲染空间引起的额外边距，这是内联块的少数缺点之一。

如果您只想滚动行而不是整个页面，请添加`overflow-x:scroll`到`main`or`row`类。

**编辑：**

~~对于 IE7 支持`<!--[if lt IE 8]> <style>.col{display:inline}</style> <![endif]-->`，请在 CSS 下方添加。~~

好的，当我将浏览器模式切换到 IE7 时，IE 通过将文档模式保持在 IE8 标准中来欺骗我。

到目前为止，可以在 IE8+ 中使用的 CSS。为简洁起见进行了编辑。

```
.side-panel {height: 300px}
.side-panel .container{background-color: blue;}
.main {
    width: 100%;
    white-space:nowrap
}
.container {background-color: #ddd;height: 30px;margin-top: 10px;}
.col {
    display:inline-block;
    vertical-align:top;
    white-space:normal;
    border:0;
    box-sizing:border-box;
    background-clip:padding-box !important;
}

@media screen{
    .col {
        margin-left:1%;
        padding:0 0%;
    }
    .row .col:first-child {margin-left:0;}
    .span_1 {width:19.2%;}
    .span_2 {width:39.4%;}
    .span_3 {width:59.6%;}
    .span_4 {width:79.8%;}
    .span_5 {margin-left:0;width:100%;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:51:15.143

响应式网格的重点是您永远不必水平滚动。

百分比是相对于他们的父母。所以无论你设置什么宽度`<div class="main row">`，你的每一列总是占总数的百分比。

因此，如果我们将所有列相加，我们会得到`(8 cols x (19.2% width + 1% margin)) - 1% remove first margin = 160.6%`. 当浮动元素比父元素大时，它们总是折叠到下一行，因为它总是比它的父元素大，所以它不得不折叠。将它们全部放在一行上的唯一方法是将列的总宽度加起来为其父容器的 100% 或更少。

# iphone - 自定义地图的布局

> ID：12568973
> 
> 赞同：0
> 
> 时间：2012-09-24T16:17:28.213
> 
> 标签：iphone, ios, mapkit, route-me

我正在开发一个不使用 MapKit IOS 来显示地图的应用程序。

因此我正在使用**[Route-Me](https://github.com/route-me/route-me)**。但是需要根据我的应用程序的设计创建一些带有颜色的地图。

有没有办法在不使用**MapBox**平台的情况下做到这一点，这需要在某个时候付款。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:07:42.817

我不确定我是否完全得到你的要求。您可以在生成图块时从 OpenStreetMap 数据生成地图图块并配置其外观。您可以将这些地图图块放在服务器上并使用 route-me 显示它们。您也可以从磁贴生成一个 sqlite 数据库，并将该数据库与您的应用程序一起放在手机上。

# php - 触发/延迟 PHP 脚本处理

> ID：12568975
> 
> 赞同：3
> 
> 时间：2012-09-24T16:17:29.453
> 
> 标签：php, triggers, delay

目前，我有一个脚本，可以在有人被定向到支付处理器后处理订单。

支付处理器偶尔会向我的网站发送两个（或更多）响应（通常在第一个响应后的一分钟内）。
我已就该问题联系了支付处理商；他们不认为这是他们系统的问题，并说我的脚本应该考虑任何额外的响应，并且只听最后一个发送的响应。

在多个响应订单上，第一个响应是成功的，所以当这个响应进来时订单被处理。
如果第二个响应来了，通常大约 30 秒后有一个错误响应，我取消了订单。
问题是我已经从第一次回复中向客户发送了一封“感谢您的订单”电子邮件，这显然并不理想。

有没有办法在订单处理后触发单独的脚本运行几分钟？即在原始订单后几分钟检查订单是否仍然有效并发送电子邮件

我在想一个每分钟运行的 cron 作业，但这肯定会有点过头了，因为脚本只需要在下订单后运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:22:31.923

`shell_exec("/usr/bin/php /path/to/test.php ".($orderId)." &");`您可以在开始时使用 3 分钟延迟启动后台作业`(sleep(180));`，然后执行代码以检查订单状态。`$argv[2]`应包含您的 orderId 编号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:25:11.210

这是你可以做的

收到第一个响应后，让您的脚本等待一段时间，例如使用 sleep() 函数等待 1 分钟

[http://php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T16:26:35.337

为什么您不能更改您的消息并在您的付款处理器发出第二次请求后通过电子邮件通知某人？

据我了解 - 您的处理器在发送第二个响应时已经在您的网站上调用了某个 URL。所以这是你需要的触发器。如果他们没有这样的回调功能 - 您可以安装一些 cron 来处理未完全处理的订单并检查此类订单的付款状态并通过另一封电子邮件通知客户。

# c# - 我怎样才能使 .msi 产品代码（GUID）稳定

> ID：12568979
> 
> 赞同：1
> 
> 时间：2012-09-24T16:17:35.047
> 
> 标签：c#, .net, windows-installer

我有一项工作可以自动安装/卸载 msi 包。我构建包并需要手动将它们部署在应用程序服务器上。作为自动化这些事情的一部分，我试图将包从构建服务器部署到应用程序服务器。

让我用简单的话解释我的问题：假设我有一个部署在 Application Server 上的包 (app-12.1)。我构建了一个新软件包（app-12.2），我需要卸载 app-12.1 并需要从构建服务器远程在应用服务器上安装 app-12.2。

为了完成上述任务，我正在尝试提取 app-12.2 包的产品代码（GUID），我正在尝试卸载 app-12.1

**问题：** app-12.1和app-12.2的产品代码不同。一旦我构建新软件包，产品代码默认会更改。由于应用服务器上的卸载过程失败。

在构建 app-12.2 包时，我如何确保产品代码（GUID）是稳定的。这样我就可以使用该产品代码来卸载 app-12.1

请向我提供提示，以便我可以保持所有版本的产品代码（GUID）相同。

谢谢基兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:13:07.340

您需要不同的产品代码但相同的*升级代码*。如果您在不同版本之间保持升级代码相同但更改产品代码，则在安装新版本的过程中会自动卸载之前的版本。

以下链接可能有用：[升级、产品和包代码用于什么？](http://blogs.msdn.com/b/pusu/archive/2009/06/10/understanding-msi.aspx)

# ios - iOS6 中的 MapView 在纬度 > 75 北时不会显示某些缩放级别

> ID：12568980
> 
> 赞同：23
> 
> 时间：2012-09-24T16:17:36.837
> 
> 标签：ios, mkmapview, mapkit, ios6, ios6-maps

此代码设置默认缩放级别，以`viewDidLoad`. 该代码在早期版本的 iOS 中运行良好：

```
CLLocationDistance visibleDistance = 100000; // 100 kilometers
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(location, visibleDistance, visibleDistance);
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:region];
.
.
.
[mapView setRegion:adjustedRegion animated:NO]; 
```

但是，在 iOS6 中，对于纬度高于 ~ 75 (>75.1) 的位置，应用程序崩溃并显示以下消息：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:
'Invalid Region <center:nan, nan span:nan, nan>' 
```

我发现对于给定的缩放级别`mapView`无法在`MKCoordinateRegion`内部设置适当的。`[mapView regionThatFits:region]`将所有值返回为`nan`. 如果我`region`直接使用该变量，它只会显示默认地图（整个世界）。

经过一些测试，我发现通过调整`visibleDistance`我可以让代码正常工作。神奇距离似乎略高于 20 公里（对于一系列纬度和 latitudeDelta 值，介于 22 和 23 公里之间）。这只发生在北纬地区（-80 工作得很好）。

地图在初始定位后的任何位置都有效。看起来 Apple 改变了可见地图区域的初始化方式。我正在为受影响的区域使用更高的缩放级别作为解决方法。有没有其他方法可以让它正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:43:44.283

```
CLLocationDistance visibleDistance = 100000; // 100 kilometers
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(location, visibleDistance, visibleDistance);
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:region];
.
.
.
[mapView setRegion:adjustedRegion animated:NO]; 
```

它会工作..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T09:37:27.750

```
CLLocationCoordinate2D southwest, northeast;
southwest.latitude = 34.172684;
southwest.longitude = -118.604794;
northeast.latitude = 34.236144;
northeast.longitude = -118.500938;
BSForwardGeocoderCoordinateBounds *bounds = [BSForwardGeocoderCoordinateBounds boundsWithSouthWest:southwest northEast:northeast]; 
```

尝试这个....

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T03:54:19.423

我的 iPhone4S 崩溃了，控制台显示了区域的 nan 值。在尝试了来自 SO 的大约 7 种不同的解决方案以及来自 Apple DTS 的各种建议后，我通过消除 regionThatFits 调用来解决它。我只是使用：

```
CLLocationDistance visibleDistance = 100000; // 100 kilometers
MKCoordinateRegion adjustedRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, visibleDistance, visibleDistance);

[_mapView setRegion:adjustedRegion animated:YES]; 
```

显然，该 regionThatFits 方法存在问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-03T22:30:06.553

我在一个中文网站上找到了这个代码的一个版本，它似乎对我有用。他只是在返回 NAN 时绕过 sizeThatFits，因此只在必要时进行调整，如果 Apple 修复了这个错误（假设它是一个错误），那么它根本就不是问题。

```
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(coordinate, mapSizeMeters, mapSizeMeters);

MKCoordinateRegion adjustedRegion = [mapView regionThatFits:viewRegion];

if (isnan(adjustedRegion.center.latitude)) {
    // iOS 6 will result in nan. 2012-10-15
    adjustedRegion.center.latitude = viewRegion.center.latitude;
    adjustedRegion.center.longitude = viewRegion.center.longitude;
    adjustedRegion.span.latitudeDelta = 0;
    adjustedRegion.span.longitudeDelta = 0;
}

[mapView setRegion:adjustedRegion animated:YES]; 
```

# css - 浏览器调整大小时的css图像覆盖问题

> ID：12568982
> 
> 赞同：0
> 
> 时间：2012-09-24T16:17:43.220
> 
> 标签：css, image, layout, resize, overlay

我的 CSS 布局有问题。我用我的分辨率（1920x1080px）设计了它，它看起来不错。但是如果我调整浏览器的大小以模拟更小的屏幕分辨率，我的背景图像就会出现问题，我无法修复。你可以在这里看到我的布局：

[http://www.lolers.de/design/](http://www.lolers.de/design/)

如您所见，角落图像覆盖了内容。

我尝试了另一种带有 z-indexes 的布局技术，您可以在此处看到：

[http://www.lolers.de/design/alternative/](http://www.lolers.de/design/alternative/)

但它覆盖了看起来不太好的顶角图像。

我已经尝试过我们的，但无法找到解决方案。或者是否可以使用像画布这样的 css 3 功能来做这样的背景？

打招呼

# javascript - 如何在 jquery mobile 中替换 li？

> ID：12568988
> 
> 赞同：0
> 
> 时间：2012-09-24T16:18:03.050
> 
> 标签：javascript, jquery, jquery-mobile

```
 var $areas = $('#ulArs'); //To take the control of ulArs
    $areas.empty();
    $areas.append('<li id="li1" data-role="list-divider"></li>');
    for (var i = 0; i < result.rows.length; i++) 
    {
     li = "<li id='home_nav' style='white-space:normal'></li>";
    }
     $areas.append(li).trigger('create');
     $areas.listview('refresh'); 
```

我正在创建具有多个 li 的动态 UL。我想在更改复选框时替换一个特定的 li 而无需刷新。在 jquery mobile 中可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:29:24.650

```
var $areas = $('#ulArs'); //To take the control of ulArs
$areas.empty();
$areas.append('<li id="li1" data-role="list-divider"></li>');
var li = '';
for (var i = 0; i < result.rows.length; i++) {
  li += '<li class="home_nav" id="home_nav-' + i + '" style="white-space:normal"></li>';
}
$areas.append(li).trigger('create');
$areas.listview('refresh'); 
```

您可以参考 a `li`with `id`，例如：

```
$('#home_nav-0') 
```

或添加元素的任何其他信息`li`，例如`data`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:26:00.190

据我所知，您绝对应该调用 refresh 方法。但是有什么问题吗？根据[此信息（“更新列表”部分）](http://jquerymobile.com/test/docs/lists/docs-lists.html)：“请注意，refresh() 方法仅影响附加到列表的新节点。这样做是出于性能原因。任何已增强的列表项都将被刷新过程忽略。”

# cuda - 如何找到 CUDA 中的最大可用线程数？

> ID：12568991
> 
> 赞同：2
> 
> 时间：2012-09-24T16:18:20.950
> 
> 标签：cuda

不确定找到我的 GPU 的最大可用线程数的最佳方法是什么。我有以下代码：

```
int deviceCount, device;
int gpuDeviceCount = 0;
struct cudaDeviceProp properties;
cudaError_t cudaResultCode = cudaGetDeviceCount(&deviceCount);
if (cudaResultCode != cudaSuccess)
    deviceCount = 0;
/* machines with no GPUs can still report one emulation device */
for (device = 0; device < deviceCount; ++device) {
    cudaGetDeviceProperties(&properties, device);
    if (properties.major != 9999) /* 9999 means emulation only */
    if (device==0)
    {
            printf("multiProcessorCount %d\n",properties.multiProcessorCount);
            printf("maxThreadsPerMultiProcessor %d\n",properties.maxThreadsPerMultiProcessor);
    }
} 
```

返回：

```
multiProcessorCount 14
maxThreadsPerMultiProcessor 1536 
```

原来总数是 14*1536=21504。我觉得它太小了（我有一个 Tesla M2070）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:48:21.923

你的检查方式是正确的。您可以查看 NVIDIA cuda SDK 示例，SDK 中的“设备查询”示例很好地定义了它

# objective-c - Controller、View、Delegation——如何正确设计

> ID：12568992
> 
> 赞同：1
> 
> 时间：2012-09-24T16:18:22.510
> 
> 标签：objective-c, model-view-controller

搜索了其他问题，但仍然没有答案......需要一些建议。我正在将我的代码从另一个平台移植到 iOS。我在 C++ 中有一个 MVC 主干：模型的 CData。CController 为控制器。

*   CController 创建一个 CData 实例
*   CController 创建 CView 的实例
*   CController 继承自 CNotifications 抽象
*   CController 将“this”传递给 CView 的构造函数
*   CView 期望 CNotifications* 在构造函数中，这就是 CView 如何在一些重要事件上调用控制器而不实际知道 CController 本身

在 Windows 上，CView 将简单地访问 GDI 以绘制所需的任何内容。

现在我将所有这些移植到 iOS 上。CData 和 CController 完全独立于平台，所以一切都很清楚。我打算通过 iOS 重新实现 CView。这就是问题所在。

一开始，我希望我的 ios ViewController（xib 的所有者）只是从 CView 继承并实现所有 CController 需求。但后来我注意到 Obj-C 中没有多重继承，并且 ViewController 已经从 UIViewController 继承。

所以看来我需要以这样一种方式实现 CView，它有一个指向 ViewController（xib 的所有者）的指针。

问题是：如何很好地将指向 ViewController 的指针传递给 CView？

我计划 ApplicationDelegate 创建 CController，它将创建 CData 和 CView。我不希望 CController 接收指向 ViewController 的指针，然后将此指针进一步传递给 CView - 我希望 CController 保持可移植性......

有各种各样的事情浮现在脑海，但我希望能找到一种被广泛接受的方法

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:29:20.603

好的，我通过简单地让 ViewController 创建我的业务逻辑的 Controller 和 View 并将 View 传递给 Controller 来解决这个问题

# php - 带有多个分隔符的php字符串到表格

> ID：12568994
> 
> 赞同：-2
> 
> 时间：2012-09-24T16:18:24.633
> 
> 标签：php, string, delimiter

你好你能帮我得到这个字符串吗

```
$string ="High School#Church Divinity School of the Pacific#1989 | University of California#1992  | University#California State University, Long Beach#1999"; 
```

到表（回声）：

太平洋 高中 教会神学院
1989

* * *

加州大学
1992

* * *

加州州立大学
长滩分校
1999

* * *

我已经使用过数组、explode 和 preg_split，但我需要帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:24:56.603

尝试：

```
<?php
$string ="High School#Church Divinity School of the Pacific#1989 | University of California#1992  | University#California State University, Long Beach#1999";
$string = str_replace(array('#', '|'), array('<br />', '<hr />'), $string);

echo $string;
?> 
```

**密码板：[http :](http://codepad.org/Rrrue2aj) **//codepad.org/Rrrue2aj****

# javascript - a.nativeSelection 为空 TinyMCE 编辑器

> ID：12568995
> 
> 赞同：1
> 
> 时间：2012-09-24T16:18:29.810
> 
> 标签：javascript, tinymce

我的页面中嵌入了一个 tinyMCE 编辑器。有时它会被加载查找。其他时候它会抛出“a.nativeSelection 为空”。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:20:55.113

我在同一页面中使用了多个具有相同 id 的 tinyMCE 编辑器，用于应用 tinyMCE 的 textarea 控件。这会导致编辑器无法完美加载的问题。我现在已经修改了我的代码以清除文本区域中的现有编辑器并加载新的。这解决了它。

# playframework - 使用平衡器（VIP https）重定向播放（tomcat HTTP）

> ID：12568996
> 
> 赞同：1
> 
> 时间：2012-09-24T16:18:32.067
> 
> 标签：playframework

我有以下架构：

> 负载均衡器（VIP https）<-> 播放（通过 TOMCAT http）

[当我在 VIP https （例如： https://www.foo.com](https://www.foo.com) ）上调用一个 url 时，它被重定向到 TOMCAT http （例如：[http://www.bar.com](http://www.bar.com)）但是当播放时处理响应并进行重定向，它重定向到 HTTP 而不是 HTTPS。

有没有办法使用来自 VIP 的入口基础 url 而不是本地基础 url？

我通过在播放控制器中执行以下脏方法找到了一个技巧，但它会导致无限循环：

```
 @Before
   public static void dirtySecureTrick() {
      if (Play.mode.isProd() && !request.secure) {
         redirect("https://" + request.domain +request.url);
      }      
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:17:40.977

试试这个[http://www.playframework.org/modules/reverseproxy-0.1/home](http://www.playframework.org/modules/reverseproxy-0.1/home)

“当在前端反向代理后面使用时，允许开发人员配置 Web 应用程序以在每页的 HTTP 和 HTTPS 协议之间自动切换”

# mongodb - 更改 dbpath 后，MongoDB 未使用 /etc/mongodb.conf

> ID：12568997
> 
> 赞同：15
> 
> 时间：2012-09-24T16:18:38.160
> 
> 标签：mongodb

自从我更改了`dbpath`in 后`/etc/mongodb.conf`，MongoDB 就没有自动启动，也没有使用新的`dbpath`. 在更改之前，MongoDB 将在计算机启动时运行，我能够简单地运行命令`mongo`进入控制台或启动我的 Ruby on Rails 服务器，没有任何问题。

在我进行修改后（为了切换到具有更多空间的新驱动器），我可以让一切正常工作的唯一方法是手动运行 command `mongod --config /etc/mongodb.conf`。如果我不运行它，那么在没有该选项的情况下，该服务似乎没有运行和运行`--config`给我以下错误：`ERROR: dbpath (/data/db/) does not exist.`即使配置文件没有说明`data/db`.

其他一些注意事项：

*   除了更改之外`/etc/mongodb.conf`，我还将所有文件移出`/var/lib/mongodb`和移入`/home/nick/appdev/mongodb`.
*   我将所有者和组从 更改`root`为`nick`。尝试将其更改回来，但它似乎没有解决任何问题。
*   我正在使用 Ruby on Rails 3.2.8 运行 Ubuntu 12.10 Beta 1 和 Mongo 2.2.0

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-09T15:29:32.620

*对上述问题的后期跟进......*

将 db 移动到 ec2 上的 ebs 后，我遇到了类似的问题。

事实证明，仅运行 mongod 仍然会将 dbpath 定向到 /data/db/ （存在）。

除非特别指出，否则将`/etc/mongodb.conf`完全忽略。

我设法通过使用指令`--config`或仅使用`--dbpath`（两者都工作）来解决这个问题，但是我想知道 mongod 从哪里获取它的默认值......？！

我无法在任何地方找到并覆盖这些默认值。任何人 ？

注意：我真的对 mongod 的这种行为感到恼火……这只是糟糕的设计和糟糕的文档。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T14:34:21.813

事实证明，我需要将所有者和组设置为`mongodb`. 当我将文件转移到新目录时，我已将所有者和组设置为我的用户帐户`nick`并尝试`root`了，但两者都不起作用。

为此，请使用以下命令：

```
sudo chown mongodb /home/nick/appdev/mongodb -R
sudo chgrp mongodb /home/nick/appdev/mongodb -R 
```

要确认它是否有效，您可以使用以下命令检查文件权限：

```
ls -l /home/nick/appdev/mongodb 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-13T17:18:31.923

按照建议检查数据、日志和日志文件夹中的所有权限后，通过授予 /tmp 文件夹中的锁定文件权限解决了我的问题

```
sudo chown mongod:mongod mongodb-27017.sock 
```

我将它作为 AWS Amazon Linux 实例运行。我通过以下方式以 mongod 用户身份执行，然后研究错误代码来解决这个问题。它可能对其他故障排除有用。

```
sudo -S -u mongod mongod -f /etc/mongod.conf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:00:39.317

[MongoDB 1.6](http://www.mongodb.org/display/DOCS/1.6+Release+Notes)已经很老了，最新的生产版本是[2.2](http://docs.mongodb.org/manual/release-notes/2.2/)，其中包含自 1.6 以来的大量错误修复和增强。

我是否正确，您没有通过 yum 或 aptitude 等包管理器安装 1.6？我不相信目前 afaik 有 1.6 的软件包。因此，`mongod`由于您没有使用控制脚本启动 MongoDB，因此行为正确。

请参阅有关配置文件选项的此[链接。](http://docs.mongodb.org/manual/reference/configuration-options/)