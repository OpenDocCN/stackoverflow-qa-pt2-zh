# StackOverflow 问答 12526000-12526999

# javascript - 在 javascript 中声明和定义函数

> ID：12526000
> 
> 赞同：3
> 
> 时间：2012-09-21T07:27:10.080
> 
> 标签：javascript, function, object

我对javascript中的函数（对象）有疑问。

我有两段代码，例如，

```
 var a= function(){
    console.log('abc')
     } 
```

和

```
 var a= (function(){
     console.log('abc')
     }) 
```

这两者有什么区别>>
thanx :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:34:11.123

没有区别。您有一个函数表达式，您可以在表达式周围放置任意数量的括号。

就像这样：

```
a = 42; 
```

与此相同：

```
a = (42); 
```

和这个：

```
a = (((((42))))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:35:14.587

没有实际区别。它们都会导致将匿名函数分配给`a`.

第一个是“[简单的分配](http://es5.github.com/#x11.13.1)”。在第二个中，括号充当“[分组运算符](http://es5.github.com/#x11.1.6)”，它做一件事：

> 产生*式 PrimaryExpression : ( Expression )*的评估如下：
> 
> *   返回计算表达式的结果。这可能是参考类型。

因此，分组运算符将返回其中包含的函数，并将其分配给`a`，就像第一个示例一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:33:07.950

现在没有区别，但是如果您在第二个函数之后添加另一个括号 ()，它将在不调用的情况下运行函数。

```
 var a= (function(){
     console.log('abc')
     })() 
```

它会立即打印'abc'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T07:45:06.303

它们是有区别的。

( 和 ) 构成一个分组。分组只能包含一个表达式，因此其中的任何函数都是表达式而不是声明。

由于 ECMA 规定函数声明必须始终具有函数名，并且函数表达式可以省略它，因此您将能够执行以下操作

```
(function() {}); 
```

而以下声明无效

```
function() {}; 
```

这并不重要，但仍然......阅读这篇深入的文章了解更多信息：http: [//kangax.github.com/nfe/](http://kangax.github.com/nfe/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:36:18.193

如前所述，您给出的两个示例基本相同。

这个问题在有关括号用法的答案中包含更多信息，可能值得您花时间阅读！

[为什么用括号来包装 javascript 函数调用？](https://stackoverflow.com/questions/6645766/why-are-parenthesis-used-to-wrap-a-javascript-function-call)

# php - 提交后替换输入值

> ID：12526011
> 
> 赞同：1
> 
> 时间：2012-09-21T07:27:43.990
> 
> 标签：php, html

我有一个 php 文件，允许用户选择搜索页面的条件。提交数据（使用`post`方法）后，页面会将用户定向到搜索结果页面。我认为用户很可能希望返回“选择条件页面”以选择不同的搜索条件。用户可以通过两种方式返回“条件”页面。他们可以单击带有“condition.php”的锚标记，也可以单击浏览器的最后一页按钮（我现在正在使用 chrome）。

因此，当我单击浏览器的最后一页按钮时，问题或错误就出现了。多个条件选择的隐藏类型输入的值已更改。似乎后者的输入值向上移动并取代了原始值。

所以，我主要有两个问题。

1.  我遇到了什么问题？
2.  如何解决？

以下是 html 示例的一部分：

```
<form method="post" action"search-result.php">
<div id="category">
  <ul id="002001000">
    <li><input type="hidden" value="002001001">freestyle</li>                       
    <li><input type="hidden" value="002001002">frogstyle</li>
  </ul>
  <ul id="002003000">
    <li><input type="hidden" value="002003001">math</li>
    <li><input type="hidden" value="002003002">English</li>
    <li><input type="hidden" value="002003003">Biology</li>
  </ul>
</div>

<div id="location_list">
  <div id="region">
    <ul>
      <li rel="asia"><input type="hidden" value="Asia(Taiwan,Japan)">Asia</li>
      <li rel="america"><input type="hidden" value="America(USA,Canada)">America</li>
    </ul>
  </div>
  <div id="nation">
    <ul id="asia">
      <li><input type="hidden" value="Taiwan">Taiwan</li>
      <li><input type="hidden" value="Japan">Japan</li>
    </ul>
    <ul id="america">
      <li><input type="hidden" value="USA">USA</li>
      <li><input type="hidden" value="Canada">Canada</li>
    </ul>
  </div>
</div>
<input type="submit">
</form> 
```

如果我点击“English”，例如，提交，直接到搜索结果页面，然后我点击“最后一页”按钮回到这个条件页面，“English”的值和下面的其他值将被替换为这个：

```
<div id="category">
  <ul id="002001000">
    <li><input type="hidden" value="002001001">freestyle</li>                       
    <li><input type="hidden" value="002001002">frogstyle</li>
  </ul>
  <ul id="002003000">
    <li><input type="hidden" value="002003001">math</li>
    <li><input type="hidden" value="002003002">English</li>
    <li><input type="hidden" value="Asia(Taiwan,Japan)">Biology</li>
  </ul>
</div>

<div id="location_list">
  <div id="region">
    <ul>
      <li rel="asia"><input type="hidden" value="America(USA,Canada)">Asia</li>
      <li rel="america"><input type="hidden" value="Taiwan">America</li>
    </ul>
  </div>
  <div id="nation">
    <ul id="asia">
      <li><input type="hidden" value="Japan">Taiwan</li>
      <li><input type="hidden" value="USA">Japan</li>
    </ul>
    <ul id="america">
      <li><input type="hidden" value="Canada">USA</li>
      <li><input type="hidden" value="Canada">Canada</li>
    </ul>
  </div>
</div>
<input type="submit"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:33:35.560

单击浏览器的返回按钮时，浏览器可能会返回一个缓存版本。如果你在你的 php 页面中使用它，它不会被缓存。

```
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

从某种意义上说，这应该可以解决它，因为它将从服务器获得一个新页面。当然，您仍然应该填写服务器上的字段......否则，它可能与输入字段的自动完成有关。利用

```
<input autocomplete="off"/> 
```

在您的输入字段上，看看是否可以解决它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:33:25.510

您可以使用 GET 表单将条款放在 URL 中。

如果您不希望它们在 URL 中可见，您可以将它们存储在服务器端的会话变量中。

# c# - Efficient way to move list items at the end of the list according to specific criteria

> ID：12526013
> 
> 赞同：3
> 
> 时间：2012-09-21T07:27:56.337
> 
> 标签：c#, visual-studio-2010, performance, list, sorting

Having a `List<Office>` where Office is a class, I have to sort its entries by country (where country is a property of class Office).

Some offices have no country set and therefore will be displayed at the top of the list. In this case I have to put them at the bottom of the list since considered "less relevant".

```
switch (sortOptions.SortField)

...  

case OfficeSortField.Country:

var noCountryList = officesList.Where(a => string.IsNullOrEmpty(a.CountryText)).ToList();
officesList.RemoveAll(a => string.IsNullOrEmpty(a.CountryText));

officesList= sortOptions.SortOrder == SortOrder.Ascending
                                      ? officesList.OrderBy(o => o.CountryText).ToList()
                                      : officesList.OrderByDescending(o => o.CountryText).ToList();

officesList.AddRange(noCountryAssoList);
break; 
```

Under perfomance perspective, is there a better way to proceed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:42:58.637

The performance differences you would notice for these sort of things will be so minor its not worth worrying about. If you are not already doing so I would use Linq to carry out the logic to just sort by whatever you want, so you don't have to do any removing/inserting.

Then if you want to improve performance further look at using Plinq to spread the logic over multiple cores.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:43:13.473

The best way is to sort using a custom function.

You can do it as a delegate:

```
list.Sort((first, second) =>
      {
         // Your code to compare first and second items
         // return 0 if equal, -1 or +1 for other cases
      }); 
```

You could do all your process in one pass, you don't need to extract offices without countries.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:43:35.207

Sure there is. Try this one:

```
List<Office> list = new List<Office>(...);

list.Sort((x, y) => x.Country == null ? (y.Country == null ? 0 : -1) :
    (y.Country == null ? 1 : Comparer<Office>.Default.Compare(x, y)) 
```

Or, you should better implement the comparer (if you are going to reuse the sorting thing).

```
class OfficeComparer : IComparer<Office>
{
    public int Compare(Office a, Office b)
    {
        return a.Country == null ? (b.Country == null ? 0 : -1) :
            (b.Country == null ? 1 : Comparer<Office>.Default.Compare(a, b))
    }
} 
```

Then you can use it:

```
List<Office> list = new List<Office>(...);
list.Sort(new OfficeComparer()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T07:44:24.347

The best way for this is to implement a [comparer](http://www.google.tn/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CCMQFjAB&url=http://msdn.microsoft.com/en-us/library/system.collections.icomparer.aspx&ei=zBtcUJ2aAojCswae84CADA&usg=AFQjCNEwmi_81-El8gB-IfLsrU4dIJBFIA&sig2=39RNsnqIw4aR1iLMEG7f-Q):

```
class OfficeComparer:IComparer<Office>
{
        int IComparer.Compare(Office a, Office b)
        {
               if ( a.Office.Country != null && b.Office.Country != null) 
                       return a.Office.Country.CompareTo(b.Office.Country);
               if ( a.Office.Country == null && b.Office.Country != null) return -1;
               if ( a.Office.Country != null && b.Office.Country == null) return 1;  
               return 0; // if both have no country, return equal or whatever other criteria comparaison

        }
} 
```

in your comparer, you just give a low priority to office without a country, and then just call the sort method:

```
List<Office> lst = FillList();

lst.sort(new OfficeComparer()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:43:42.023

You can use IComparable or ICompare interface and define which object of two object is "greater" than second.

You can find more in this knowledge base article on [How to use the IComparable and IComparer interfaces in Visual C#](http://support.microsoft.com/kb/320727)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-06T08:07:07.677

This is most easiest and performance effective, I retrieve all physics book, in that I want to push the category "other" to be listed in end of the list.

```
List<Books> controlGroupDetails = controlDetails.Where(s => s.Title == "Physics").ToList();
var otherPhysics = controlDetails.Where(s => s.Title == "Physics" && s.Name == "Other").SingleOrDefault();
controlGroupDetails.Remove(otherPhysics);
controlGroupDetails.Insert(controlGroupDetails.Count(), otherPhysics); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-21T07:40:45.723

In Java, you can implement `Comparable<T>` interface and then sort the list by invoking `java.util.Collections.sort(List<T> list)`.

See details:

```
public class Office implements Comparable<Office> {
  private String country;
  public int compareTo(Office off) {
    if (this.country == null)
      return -1;
    else if (off.country == null)
      return 1;
    else
      return this.country.compareTo(off.country);
  }
} 
```

Sort the list:

```
java.util.Collections.sort(yourOfficeList); 
```

# php - SELECT 多行 WHERE 匹配两个条件

> ID：12526017
> 
> 赞同：6
> 
> 时间：2012-09-21T07:28:08.200
> 
> 标签：php, mysql, sql

这会更好地显示在我的示例中：

我有一张桌子，其中存储了一张大表格的用户答案。每个表格有 139 个问题。这些问题存储在不同的表中，在需要时与 questionID 连接。每个用户都有一个 ID。我现在需要制作过滤器，以仅显示与特定问题的一个或**多个**答案匹配的用户。

例如，我想要用户，其中问题 14 的答案是“是”，问题 54 不为空，问题 100 大于 10。这是表格的外观：

```
**userID** | **questionID** | **answer**

1            14               "yes"
1            54               "something"
1            100              "9"
2            14               "no"
2            54               "north
2            100              "50"
3            14               "yes"
3            54               "test"
3            100              "12" 
```

结果我只希望返回**用户 ID** 3，因为它满足所有条件。

使用 ColdFusion 很容易实现这一点，因为它允许在查询结果中进行查询，但在 PHP 中我还没有找到任何方法。有机会添加随机数量的问题很重要，而不仅仅是本例中的三个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T07:33:26.997

尝试，

```
SELECT userID
FROM tableName
WHERE   (questionID = 14 AND
        answer = 'yes' ) OR
        (questionID = 54 AND
        answer <> 'empty') OR
        (questionid = 100 AND
        answer > 10)
GROUP BY userID
HAVING COUNT(*) = 3 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d385d/2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T07:35:51.207

```
SELECT q.userID
  FROM questions q
  JOIN questions qq ON qq.userID=q.userID
       AND qq.questionID='54' AND qq.answer IS NOT NULL
  JOIN questions qqq ON qqq.userID=q.userID
       AND qqq.questionID='100' AND qqq.answer > 10
 WHERE q.questionID=14
   AND q.answer = 'yes' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:35:11.543

你可以试试 ：

```
SELECT questionID, answer
FROM table
WHERE ( questionID = 14 AND answer = 'yes' ) 
OR ( questionID = 54 AND answer != '' )
OR ( questionID = 100 AND answer > 10 ); 
```

# objective-c - 将故事板更新到具有向后兼容性的 iOS 6

> ID：12526019
> 
> 赞同：7
> 
> 时间：2012-09-21T07:28:22.840
> 
> 标签：objective-c, ios5, uistoryboard, backwards-compatibility, iphone-5

> **可能重复：**
> [在 iOS 6 中启用自动布局，同时保持向后兼容 iOS 5](https://stackoverflow.com/questions/12411980/enabling-auto-layout-in-ios-6-while-remaining-backwards-compatible-with-ios-5)

我打算将我的应用程序更新为新的 4 英寸显示屏，我发现我应该检查检查器中的 Use Autolayout 复选框。这样做我失去了与 iOs 5 的兼容性。我怎样才能在不失去这种向后兼容性的情况下支持 4" 显示器？非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T21:29:39.717

您可以使用 springs 和 struts 来支持这两种形式，而无需 iOS 6.0。

弹簧和支柱很容易在 Interface Builder 的尺寸检查器中配置。只需选择任何视图并使用下图中检查器的突出显示区域来配置每个视图应如何与其父级一起调整大小。

![Interface Builder Size 检查器的突出显示弹簧和支柱区域的图片](../Images/3d8b4c8f7c80de8d2769ed0e49e765f6.png)

打开支柱（外边缘对象）表示子视图的该边缘与父视图的同一边缘之间的距离应保持固定。打开一个弹簧（内部箭头）表示控件应该随着父级增长和收缩。在上图中，所选视图被配置为固定在其父视图的底部、左侧和右侧边缘，并随宽度增长。示例区域显示了视图如何随着父级移动和调整大小的动画。

检查器的弹簧和支柱区域在使用自动布局的文档中不可用。

# java - Class如何找到资源？

> ID：12526020
> 
> 赞同：0
> 
> 时间：2012-09-21T07:28:23.473
> 
> 标签：java, classloader

JavaDoc 的`Class#getResourceAsStream(String)`内容如下：

> 查找具有给定名称的资源。搜索与给定类关联的资源的规则由该类的定义类加载器实现。这个方法委托给这个对象的类加载器。

那么以下如何工作：

```
class AppTest {
private static final Properties p = new Properties();    
    static {        
        try {
            p.load(AppTest.class.getResourceAsStream(("config.properties")));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
...
} 
```

如果 config.properties 与 AppTest.class 位于同一目录中：

```
pro/wulfgar/net/on/users/app/{AppTest.class,config.properties} 
```

`.`AppTest.class 的类加载器不应该在应用程序类路径（在这种情况下）上寻找它吗？因此 config.properties 应该与*pro*目录处于同一级别。

也就是说，除非我将资源定义为 ，否则我`pro/wulfgar/net/on/users/app/config.properties`无法理解为什么类加载器可以找到资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:42:03.300

JavaDoc 上的措辞可能会让您有些困惑。Class.getResourceAsStream(String) 将解析类引用包中的资源（pro/wulfgar/net/on/users/app/config.properties）。如果您不希望它以这种方式解析，请在资源名称的开头添加一个“/”以指示它处于基本级别（pro/wulfgar/config.properties，如果您遵循标准包约定）。

JavaDoc 的后半部分概述了这种行为。JavaDoc 的引用部分解释说它委托给该类的 ClassLoader。由于每个 ClassLoader 都有一个单独的文件源（jar 或文件系统），因此它会区分该特定 ClassLoader 的资源集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:35:25.377

检查一下[InputStream is = App.class.getResourceAsStream("test.properties");](https://stackoverflow.com/questions/5139032/inputstream-is-app-class-getresourceasstreamtest-properties)

Class.getResourceAsStream 和 ClassLoader.getResourceAsStream 之间有区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:31:51.243

由于包名称`ClassLoader`，已经知道所在的目录。`AppTest.class`它没有属性文件的此类信息。

# c# - 使用反射和 Html.EditorForModel() 创建的对象

> ID：12526031
> 
> 赞同：0
> 
> 时间：2012-09-21T07:29:24.300
> 
> 标签：c#, asp.net-mvc, reflection, razor, asp.net-mvc-4

我有一组复杂的对象，它们完全是使用反射机制生成的，它们都实现了一个空接口。我想用来`Html.EditorForModel()`显示对象字段的编辑器，但现在我只能看到一个空页面。

如果我序列化其中一个对象，我在 json 中有这样的结构

```
{
   "ContractingAuthority":
   {
     "FirstName":null,
     "LastName":null
   },
   "ContractInformation":
   {
     "Title":null,
     "Description":null
   }
} 
```

所以json序列化器可以正确找到所有字段。有什么建议我做错了吗？

编辑：

到目前为止，我有这样的草图代码：

> ```
>  var sequence = GetSequenceMetadata(); 
> ```

```
 var assemblyName = new AssemblyName("Particles") { Version = new Version(1, 0, 0, 0) };

        var assemblyBuilder = AppDomain.CurrentDomain
            .DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.RunAndSave);

        var moduleBuilder = assemblyBuilder.DefineDynamicModule("ParticlesModule");

        var typeBuilder = moduleBuilder.DefineType(string.Format("Particles.ParticlesModule.{0}", type.Name), TypeAttributes.Public | TypeAttributes.Class, null);
        typeBuilder.AddInterfaceImplementation(typeof(IParticle));

        foreach (var property in sequence.Items)
        {
            if (property is XmlSchemaElement)
            {
                var element = property as XmlSchemaElement;

                var elementType = GetFieldType(element.ElementSchemaType.TypeCode);

                var fieldBuilder = typeBuilder.DefineField(string.Format("_{0}", element.Name),
                    elementType, FieldAttributes.Private);

                var propertyBuilder = typeBuilder.DefineProperty(element.Name, PropertyAttributes.None, elementType, null);

                var propertyGetter = typeBuilder.DefineMethod("get_value", MethodAttributes.Public | MethodAttributes.HideBySig, elementType, Type.EmptyTypes);
                var ilGetGenerator = propertyGetter.GetILGenerator();
                ilGetGenerator.Emit(OpCodes.Ldarg_0);
                ilGetGenerator.Emit(OpCodes.Ldfld, fieldBuilder);
                ilGetGenerator.Emit(OpCodes.Ret);

                var propertySetter = typeBuilder.DefineMethod("set_value", MethodAttributes.Public | MethodAttributes.HideBySig, null, new[] { elementType });
                var ilSetGenerator = propertySetter.GetILGenerator();
                ilSetGenerator.Emit(OpCodes.Ldarg_0);
                ilSetGenerator.Emit(OpCodes.Ldarg_1);
                ilSetGenerator.Emit(OpCodes.Stfld, fieldBuilder);
                ilSetGenerator.Emit(OpCodes.Ret);

                propertyBuilder.SetGetMethod(propertyGetter);
                propertyBuilder.SetSetMethod(propertySetter);
            }
        }

        var returnType = typeBuilder.CreateType();

        return returnType; 
```

在我拥有类型之后，我简单地获取 ctor 并在实例上创建

> ```
>  var ctor = entityType.GetConstructor(new Type[] { }); 
> ```

```
 var instance = ctor.Invoke(new object[] { });

                    return instance; 
```

在控制器类中，我简单地将模型传递给视图返回视图（实例）。在视图中，我调用 Html.EditorForModel()。

# python - 无论参数类型如何，调用函数的正确方法

> ID：12526039
> 
> 赞同：0
> 
> 时间：2012-09-21T07:30:05.217
> 
> 标签：python

我有一个打印乘法表的程序。

```
def print_tables(input):
    for i in xrange(1,11):
        print "%s x %s = %s" %(input, i, input*i)

user_input = raw_input("What do you want multiplied ten fold? ")

if(user_input.isdigit()):
    print_tables(int(user_input))

else:
    print_tables(user_input) 
```

如果用户输入一个字符串`"a"`，我希望输出是：

```
a x 1 = a
a x 2 = aa
a x 3 = aaa
a x 4 = aaaa
a x 5 = aaaaa
a x 6 = aaaaaa
a x 7 = aaaaaaa
a x 8 = aaaaaaaa
a x 9 = aaaaaaaaa
a x 10 = aaaaaaaaaa 
```

在和块中调用`print_tables`函数对我来说确实有点多余。`if``else`

`print_tables`无论参数类型如何，Python 中有没有更好的方法来调用函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:34:45.300

```
print_tables(int(user_input) if user_input.isdigit() else user_input) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:42:22.460

一种好方法是：

```
if user_input.isdigit():
    user_input = int(user_input)

print_tables(user_input) 
```

也就是说，有一个电话，但将不同的案例集中到一个变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:16:35.737

```
def mul(x, y):
    try:
        return int(x) * y
    except ValueError:
        return x * y

def print_tables(input):
    for i in xrange(1,11):
        print "%s x %s = %s" %(input, i, mul(input, i))

user_input = raw_input("What do you want multiplied ten fold? ")
print_tables(user_input) 
```

解释：`print_tables`它本身不是类型感知的，也就是说，它在不同参数的类型上没有不同的行为。应该是多态的乘法。因此，pythonic 的方法是明确这一点。

再想一想，如果你有一个函数让你对如何调用它摸不着头脑，不要试图以任何一种方式解决问题。只需消除该功能！

```
def _print_table(s):
    for i in xrange(1,11):
        print "%s x %s = %s" %(s, i, i * s)

def print_str_table(s):
    return _print_table(str(s))

def print_int_table(s):
    return _print_table(int(s))

user_input = raw_input("What do you want multiplied ten fold? ")
if user_input.isdigit():
    print_int_table(user_input)
else:
    print_str_table(user_input) 
```

正如他们所说，

> 放弃任何让你怀疑的东西，而放弃任何让你怀疑的东西

# php - 写在中心

> ID：12526042
> 
> 赞同：0
> 
> 时间：2012-09-21T07:30:22.260
> 
> 标签：php, css

我用这段代码在中心写：

```
echo "<div class='pagination' align ='center'>"; 
```

但它仍然显示在左侧。我怎么能写在中心。

这些也是 css 中的分页代码：

```
 <div class='pagination' text-align:center>
 <span class='current'>1</span>
</div>
.pagination {
clear:both;
padding:20px 0;
position: relative;
font-size:11px;
line-height:13px;
}

.pagination span, .pagination a {
display:block;
float: left;
margin: 2px 2px 2px 0;
padding:6px 9px 5px 9px;
text-decoration:none;
width:auto;
color:#fff;
background: #555;
}

.pagination a:hover{
color:#fff;
background: #3279BB;
}

.pagination .current{
padding:6px 9px 5px 9px;
background: #3279BB;
color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:34:19.343

你需要的是去除清除和定位，并给它一些宽度和`margin: 0 auto;`

```
.pagination {
padding:20px 0;
font-size:11px;
line-height:13px;

    width: 50%;
    margin: 0 auto;
    text-align: center;
}​ 
```

这告诉分页器容器每一侧的边距在两侧相等，因此它将在其父元素内居中。请注意，父级也需要定义宽度，不能

html的`align`属性[自 HTML 4.01 起已被弃用](http://www.w3schools.com/tags/att_div_align.asp)，因此请`text-align: left/right/center;`在 CSS 中使用。

[http://jsfiddle.net/Kyle_Sevenoaks/S8QYy/](http://jsfiddle.net/Kyle_Sevenoaks/S8QYy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:35:19.087

删除此行

`float: left;`从`.pagination span, .pagination a {}`

并添加

`margin:0 auto`在`.pagination {}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:00:14.597

尝试这样的事情

```
.pagination span, .pagination a {
    background: none repeat scroll 0 0 #555555;
    color: #FFFFFF;
    display: inline-block;
    margin: 2px 2px 2px 0;
    padding: 6px 9px 5px;
    text-decoration: none;
    width: auto;
}

.pagination {
    clear:both;
    padding:20px 0;
    position: relative;
    font-size:11px;
    line-height:13px;
    text-align:center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:32:51.943

如果你以前内联 CSS 而不是写成

`style="text-align:center"` **不是这个** `align="center"`

替换此代码

```
<div class='pagination' align ='center'> 
```

**进入这个**

```
<div class='pagination' style="text-align:center;"> 
```

或者 **曾经可能是这个**

```
.pagination{
text-align:center;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:34:30.787

您必须将 div 设置为

```
<div class="pagination" style="text-align: center"> 
```

但更好的方法是

```
<div class="pagination"> 
```

并放置“文本对齐：居中；” 到css文件中。也使用 " 而不是 '

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T07:34:48.220

试试这个......也许是你所期望的:)

[http://jsfiddle.net/CDcXB/2/](http://jsfiddle.net/CDcXB/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T07:34:54.157

尝试 .pagination { ...现有规则.... text-align: center; }

还可以查看 Operas 网络标准课程：[http ://www.opera.com/company/education/curriculum/](http://www.opera.com/company/education/curriculum/)

# ruby - ruby 使用 send 将值传递给数组

> ID：12526045
> 
> 赞同：4
> 
> 时间：2012-09-21T07:30:29.277
> 
> 标签：ruby

我是 ruby​​ 新手，有人可以解释第二行和第三行的作用吗？

```
a = [6,7,8]
a.send :[]=,0,2
a[0] + a.[](1) + a.send(:[],2) 
```

第一行是将数组分配给变量 a。

我完全迷失在第二和第三线。希望有人能给出一些详细的解释。

谢谢！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T07:36:57.873

`.send` 调用由符号标识的方法，将任何指定的参数传递给它。

```
a.send :[]=,0,2 
```

和

```
a.send(:[]=, 0, 2) 
```

表示在数组对象上调用[[]=](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D-3D)`0`方法，第一个参数为 as ，第二个参数为`2`.

因此`a[0] = 2`，将数组的第一个元素设置为`2`。

执行后`a.send :[]=,0,2`，`a`成为`[2, 7, 8]`。

`a.[](1)`和`a[1]`

`a.send(:[], 2)``a.[](2)`与which is相同`a[2]`。

所以`a[0] + a.[](1) + a.send(:[],2)`等于`a[0] + a[1] + a[2]`等于`2 +7 + 8`等于`17`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:37:26.097

```
a.send :[]=,0,2 ###same as a[0] = 2

a.[](1) ### same as a[1]

a.send(:[],2) ## same as  a[1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:42:25.423

您可以尝试 irb 中的代码，看看会发生什么。`send`表示向对象发送以下消息。此功能继承自 Smalltalk。

所以`a.send :[]=,0,2`意味着将参数发送`:[]=,0,2`到a。括号被省略。第一个参数`:[]=`是要调用的方法`a`。从`:`手段开始，它是一个符号。`[]=`是方法名称。send 的其他参数被视为 的参数`[]=`。

正如您在第 3 行中看到的， `a.[](1)`等效`a[1]`于任何类 C 语言。并且`a.[]= 0,2`是`a[0]=2`。

# jquery - 为什么我不能在回发一次节目后隐藏消息？

> ID：12526048
> 
> 赞同：0
> 
> 时间：2012-09-21T07:30:48.333
> 
> 标签：jquery, asp.net

我有母版页及其继承页面。在 masterpage 我有一个文字，我按条件显示消息。在继承页面中，我正在使用 stringbuilder 创建这些消息。

```
literal.Text = "<div id=\"alertWarning\" style=\"display:none; color:#fff; text-align:center; padding: 8px 10px 9px; width:auto; position:relative; background:#C79810;\"><h3>" + title + "</h3><p>" + error + "</p></div>";

            StringBuilder sb = new StringBuilder();
            sb.Append("$(function() { ");
            sb.Append(" $('#alertWarning').toggle({");
            sb.Append("    width: 400");
            sb.Append(" });");
            sb.Append("});");
            sb.Append("$('html, body').animate({ scrollTop : 0 }, '500');");

            if (HttpContext.Current.CurrentHandler is Page)
            {
                Page pa = (Page)HttpContext.Current.CurrentHandler;

                if (ScriptManager.GetCurrent(pa) != null)
                {
                    ScriptManager.RegisterStartupScript(pa, typeof(Page), "alert", sb.ToString(), true);
                }
                else
                {
                    pa.ClientScript.RegisterClientScriptBlock(typeof(Page), "alert", sb.ToString(), true);
                }
            } 
```

在 masterpage 我有这个脚本来自动隐藏显示消息。

```
<script type="text/javascript">
        function pageLoad(sender, args) {
            setTimeout(function () { $("#alertError").toggle("close"); }, 5000);
            setTimeout(function () { $("#alertSuccess").toggle("close"); }, 2000);
            setTimeout(function () { $("#alertWarning").toggle("close"); }, 3000);
        };
    </script> 
```

但是如果页面回发显示消息再次显示。是否可以只显示一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:39:12.687

一个简单的解决方案是仅在不是 PostBack 时添加该脚本。

```
 if (HttpContext.Current.CurrentHandler is Page)
    {
        Page pa = (Page)HttpContext.Current.CurrentHandler;
        if(!pa.IsPostBack)
        {
            if (ScriptManager.GetCurrent(pa) != null)
            {
                ScriptManager.RegisterStartupScript(pa, typeof(Page), "alert", sb.ToString(), true);
            }
            else
            {
                pa.ClientScript.RegisterClientScriptBlock(typeof(Page), "alert", sb.ToString(), true);
            }
        }
    } 
```

# c# - C# 使用 params 关键字的结果不一致

> ID：12526049
> 
> 赞同：16
> 
> 时间：2012-09-21T07:30:48.970
> 
> 标签：c#, pass-by-reference, params, pass-by-value

给定以下方法：

```
static void ChangeArray(params string[] array) {

    for (int i = 0; i < array.Length; i++) 
        array[i] = array[i] + "s";
} 
```

如果我将其称为传递字符串数组，则此方法有效：

```
string[] array = {"Michael", "Jordan"} // will become {"Michaels", "Jordans"}
ChangeArray(array); 
```

但是如果我使用字符串参数调用它就行不通了：

```
string Michael = "Michael";
string Jordan = "Jordan";
ChangeArray(Michael, Jordan); // This will NOT change the values of the variables 
```

我知道编译器会将 Michael 和 Jordan 包装在一个数组中，所以两种情况下的结果不应该相同吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-21T07:33:52.783

你的第二个例子本质上是：

```
string Michael = "Michael";
string Jordan = "Jordan";
{
    var tmp = new string[] {Michael, Jordan};
    ChangeArray(tmp);
} 
```

所以; 实际上，里面的值`tmp` *被*改变了......但`tmp`后来被丢弃了，所以你什么都看不到。`params`不模拟- 它*不会*`ref`按位置更新回原始变量。或者在代码中，它**不是**以下内容：

```
string Michael = "Michael";
string Jordan = "Jordan";
{
    var tmp = new string[] {Michael, Jordan};
    ChangeArray(tmp);
    Michael = tmp[0];
    Jordan = tmp[1];
} 
```

如果您需要它表现得像那样，然后像那样*编码*- 或者使用带`ref`参数的重载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T07:34:41.400

原因是它`string`是一个不可变的类型——你传入的`string`实例被包裹在一个数组中。该数组现在包含两个新字符串（具有与原始字符串相同的值但不同的实例）。当您更改数组时，这些副本将被丢弃，并且数组插槽将保存一个新字符串。当您的函数返回时，临时数组将被丢弃。因此，您的原始输入字符串永远不会被修改（它们无论如何都不会被修改，因为`string`它 - 再次 - 不可变）。

**编辑**根据李在评论中的论点，我对此答案进行了编辑（我将保留答案，只是为了保持以下讨论的完整）。不可变部分确实与问题无关。主要的潜在问题是对丢弃的临时数组进行了更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:35:06.293

这很奇怪（我不知道），但[正如指定的那样](http://msdn.microsoft.com/en-us/library/aa645765.aspx)。

> 参数数组允许在方法调用中以两种方式之一指定参数：
> 
> 为参数数组提供的参数可以是可隐式转换（第 6.1 节）到参数数组类型的类型的单个表达式。在这种情况下，参数数组的作用就像值参数一样。
> 
> 或者，调用可以为参数数组指定零个或多个参数，其中每个参数都是可隐式转换（第 6.1 节）到参数数组的元素类型的类型的表达式。在这种情况下，调用会创建一个参数数组类型的实例，其长度对应于参数的数量，用给定的参数值初始化数组实例的元素，并使用新创建的数组实例作为实际参数。

# javascript - 脚本不会加载 - Firebug 中没有错误

> ID：12526052
> 
> 赞同：-1
> 
> 时间：2012-09-21T07:31:02.623
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery Booklet 插件创建一本翻书。我正在关注可以在[此处](http://tympanus.net/codrops/2010/12/14/moleskine-notebook/)找到的教程。该页面只是说正在加载，之后没有任何反应。

[这是我创建的一个 jsFiddle。](http://jsfiddle.net/Lynda333/eMdVA/1/)

这是我的代码：

***HTML***

```
<div class="book_wrapper">
  <a id="next_page_button"></a>
  <a id="prev_page_button"></a>
  <div id="loading" class="loading">Loading...</div>
  <div id="mybook" style="display:none;">
    <div class="b-load">

      <div>
        <h2>Pen N Hand's Artwork </h2>
      </div>
      <div>
        <img src="images/artwork/img.jpg" alt="" />
      </div>

    </div>
  </div>
</div> 
```

***JS***

```
$(function() {
  var $mybook       = $('#mybook');
  var $bttn_next        = $('#next_page_button');
  var $bttn_prev        = $('#prev_page_button');
  var $loading      = $('#loading');
  var $mybook_images    = $mybook.find('img');
  var cnt_images        = $mybook_images.length;
  var loaded            = 0;
  //preload all the images in the book,
  //and then call the booklet plugin

  $mybook_images.each(function(){
    var $img    = $(this);
    var source  = $img.attr('src');
    $('<img/>').load(function(){
      ++loaded;
      if(loaded == cnt_images){
        $loading.hide();
        $bttn_next.show();
        $bttn_prev.show();
        $mybook.show().booklet({
         //Booklet Options
        });
      }
    }).attr('src',source);
  });

}); 
```

我在 Firebug 中看不到任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:57:45.130

> 我在 Firebug 中看不到任何错误。

我愿意：

![在此处输入图像描述](../Images/d3466f2bc476583208fadf44d557597a.png)

因此，请确保您已为实际存在的图像指定了 url。

# iphone - iOS 6 中的自动旋转有奇怪的行为

> ID：12526054
> 
> 赞同：28
> 
> 时间：2012-09-21T07:31:14.627
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, ios6

我有`UITabBarController`播放视频并在其他选项卡中显示其他信息的应用程序`UITabBar`。在 iOS 6`UIView`中旋转方法已被弃用，现在我需要使用`shouldAutoRotate`和`supportedInterfaceOrientations`方法。对于视频播放，我使用`MPMoviePlayerViewController`.

如何仅旋转此播放器视图？我只能旋转整个应用程序，但不想这样做。我提出了，`MPMoviePlayerViewController`但它不像在 iOS 5 和更早版本中那样旋转。

在`plist`设置中，我只设置了 1 个纵向界面方向。如果我设置其他 - 整个应用程序将被旋转。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-21T21:49:12.850

来自 Apple 的 iOS 6 SDK 发行说明：

> iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，不推荐使用 UIViewController 的 shouldAutorotateToInterfaceOrientation: 方法。取而代之的是，您应该使用 supportedInterfaceOrientationsForWindow: 和 shouldAutorotate 方法。
> 
> 更多的责任正在转移到应用程序和应用程序委托身上。现在，iOS 容器（例如 UINavigationController）不会咨询它们的子容器来确定它们是否应该自动旋转。**默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。**
> 
> 视图控制器支持的界面方向会随着时间而改变——甚至应用程序支持的界面方向也会随着时间而改变。**每当设备旋转或视图控制器以全屏模式呈现样式呈现时，系统都会向最顶层的全屏视图控制器（通常是根视图控制器）询问其支持的界面方向。**此外，仅当此视图控制器从其 shouldAutorotate 方法返回 YES 时，才会检索支持的方向。**系统将视图控制器支持的方向与应用支持的方向（由 Info.plist 文件或应用委托的 application:supportedInterfaceOrientationsForWindow: 方法确定）相交以确定是否旋转。**
> 
> 系统通过将应用程序的supportedInterfaceOrientationsForWindow: 方法返回的值与最顶部全屏控制器的supportedInterfaceOrientations 方法返回的值相交来确定是否支持方向。setStatusBarOrientation:animated: 方法并未完全弃用。它现在仅在最顶层全屏视图控制器的 supportedInterfaceOrientations 方法返回 0 时才有效。这使得调用者负责确保状态栏方向一致。
> 
> 为了兼容性，仍然实现 shouldAutorotateToInterfaceOrientation: 方法的视图控制器不会获得新的自动旋转行为。（换句话说，它们不会回退到使用应用程序、应用程序委托或 Info.plist 文件来确定支持的方向。）相反，shouldAutorotateToInterfaceOrientation: 方法用于合成将由 supportedInterfaceOrientations 方法返回的信息.

如果您希望整个应用程序旋转，那么您应该将 Info.plist 设置为支持所有方向。现在，如果您希望特定视图仅是纵向的，则必须执行某种子类并覆盖自动旋转方法以仅返回纵向。我这里有一个例子：

[https://stackoverflow.com/a/12522119/1575017](https://stackoverflow.com/a/12522119/1575017)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-07T23:01:52.710

哎呀！用了半天，问题解决了！呵呵。

正如上面的文档所说，这是真的！核心点是：

> 更多**的责任正在转移到 app 和 app delegate 身上**。现在，iOS 容器（例如 UINavigationController）不会咨询它们的子容器来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。

所以，每当根控制器发生变化时，系统都会询问应用程序委托“那么，我们是什么？旋转与否？”

如果“旋转”：

> 仅当此视图控制器从其 shouldAutorotate 方法返回 YES 时才检索支持的方向

然后系统要求我们的应用委托

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {    

    return ...;
} 
```

这真的很简单。

如何确定我们何时应该允许纵向或横向等 - 取决于您。由于某些原因，对根控制器的测试对我不起作用，但这有效：

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {    

    return self.fullScreenVideoIsPlaying ?
        UIInterfaceOrientationMaskAllButUpsideDown :
        UIInterfaceOrientationMaskPortrait;
} 
```

每当我需要时，我都会手动设置属性“fullScreenVideoIsPlaying”。

唯一需要注意的重要事项是枚举。正如它在文档中所说的那样......（仔细阅读 iPad/iPhone 上面的内容）。因此，您可以根据需要与这些人一起玩。

另一个小问题是关闭播放器控制器后的一些错误行为。有一次它没有改变方向，但那发生了一次，而且以某种奇怪的方式发生，而且只在模拟器中（当然仅限 iOS 6）。所以我什至无法做出反应，因为它出乎意料地发生了，在我的应用程序的其他一些元素上快速单击后，它旋转到正常方向。所以，不确定 - 可能是模拟器工作或某些东西的延迟（或者，真的是一个错误:)）。

祝你好运！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T13:01:08.130

我的应用程序遇到了同样的问题。

iOS 6 中的旋转是如何工作的。

=> 当你使用 UINavigationCOntroller 时，AppDelegate 中的方法

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window    
{
   return 
} 
```

决定是否旋转。

=> 当视图以 Modal 呈现方式呈现时，方法

```
- (BOOL)shouldAutorotate 
```

它位于该视图的 viewController 内，触发了 appDelegate 中的方法。作为第一种情况，appDelegate 决定是否轮换。

**我的解决方案::**

我为模态演示所做的就是这样。在应用程序委托中创建了一个标志。

当标志为“是”时，它会旋转为横向，否则它会旋转为唯一的纵向。

```
- (NSUInteger)application:(UIApplication*)application
supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    if(self.shouldRotate ) //shouldRotate is my flag
    {
        self.shouldRotate = NO;
        return (UIInterfaceOrientationMaskAll);
    }
    return (UIInterfaceOrientationMaskPortrait);
} 
```

并在旋转之间切换

```
- (BOOL)shouldAutorotate
{
    YourAppDelegate *mainDelegate = (YourAppDelegate*)[[UIApplication sharedApplication]delegate];
    mainDelegate.shouldRotate = YES;

    return YES;
} 
```

**注意**：这仅适用于模型呈现的视图。使用标志，不是一个好的编码习惯。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T15:48:55.837

您还可以继承 UITabBarController 以使其向其子级询问 shouldAutorotate 和 supportedInterfaceOrientation ，如下所示：

```
@implementation MyTabBarController

-(BOOL)shouldAutorotate
{
    return [self.selectedViewController shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [self.selectedViewController supportedInterfaceOrientations];
}

@end 
```

然后，您只需使用自定义容器代替标准容器即可！刚刚测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-22T00:56:35.897

不幸的是，您需要打开 plist 中的所有方向，并在您不想旋转的所有视图控制器上使用 supportedInterfaceOrientations。（在您的情况下，除了视频播放器之外的所有内容。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-28T11:00:02.660

Try this,

If TabBarController is RootViewController for window, Then Create Custom Class which inherits TabBarController say CustomTabBarController.h

Add Below method in CustomTabBarController.h

```
-(NSUInteger)supportedInterfaceOrientations // Must return Orientation Mask 
```

Finally Call Below in AppDelegate.m

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window  {
   if( [self.window.rootViewController supportedInterfaceOrientations]!=0) 
     {
        return [self.window.rootViewController supportedInterfaceOrientations];
    }
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T13:30:32.453

我发现设置它的最简单方法是使用“支持的界面方向”按钮，如果您查看 Targets....Summary 选项卡（在 iPhone/iPad 部署信息下），您可以看到这些按钮。

它基本上是一个用于设置 plist 文件的 GUI

# c# - Windows Phone（wp7）中的http连接

> ID：12526056
> 
> 赞同：0
> 
> 时间：2012-09-21T07:31:30.423
> 
> 标签：c#, windows-phone-7

嗨，我想知道在 Wp 7 中实现基本的 Http 连接机制。例如，我想解析 rss 提要并在应用程序中显示它，我该怎么做？

在 Wp7 中引用 Httpconnection 的一些代码部分时，我遇到了

3行

第 1 行：

```
request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request); 
```

第 2 行：

```
void GetRequestStreamCallback(IAsyncResult asynchronousResult)  
    { webRequest.BeginGetResponse(blahh...   } 
```

第 3 行：

```
void GetResponseCallback(IAsyncResult asynchronousResult){ } 
```

在这 3 行中，所以我的问题是我们是否每次都需要 GetRequestStreamCallback，然后再使用 GetResponseCallback。这是基于 C# 的默认机制吗？或者我们可以调用 GetResponseCallback。如果问题看起来很荒谬，请纠正我。

关于 Rakesh Shankar.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:46:43.937

BeginGetRequestStream方法启动[对](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx)用于发送 HttpWebRequest 数据的流的异步请求。异步回调方法使用 EndGetRequestStream 方法返回实际流。

BeginGetResponse方法启动对来自 Internet 资源的[响应](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx)的异步请求。异步回调方法使用 EndGetResponse 方法返回实际的 WebResponse。

MSDN 文档还说，“如果调用 BeginGetRequestStream 方法，则必须使用 BeginGetResponse 方法来检索响应。”

如果您有任何数据要在请求中发送，那么您应该使用 BeginGetRequestStream 和 BeginGetResponse。否则，您可以直接调用 BeginGetResponse。

如需进一步说明，请查看上述链接。

# javascript - 如何在 javascript 中使用肥皂网络服务？

> ID：12526057
> 
> 赞同：0
> 
> 时间：2012-09-21T07:31:30.790
> 
> 标签：javascript, cordova

谁能告诉我如何在javascript中使用soap web服务。我想在phonegap中使用这个web服务（或）如何在phonegap中使用web服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:14:29.403

对服务 URL 进行 AJAX 调用并管理回调的响应。

为简单起见使用 jQuery：

```
$.ajax({
    url: yourSoapServiceUrl,
    success: function (soapResponse) {
        //Do whatever you need with soapResponse
    }
}); 
```

**编辑：**添加了示例代码。

# java - 在 Java/Android 中读取 XML 中的 unicode 字符

> ID：12526061
> 
> 赞同：0
> 
> 时间：2012-09-21T07:31:51.603
> 
> 标签：java, android, xml-parsing, xml-serialization

我试图用一些 Unicode 字符获取 XML 输出。我无法读取标签内的完整字符串，只能读取一个。

这是我的 XML 输出

```
 <item>
    <id>1</id>    
    <name>&#x0DBD;&#x0DDC;&#x0DBD;&#x0DCA;</name>
    <cost>155</cost>
    <description>&#x0DBD;&#x0DDC;</description>
</item> 
```

这是我用来解析 XML 字符串的 java 代码。

```
 public Document getDomElement(String xml) {
Document doc = null;
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
try {

    DocumentBuilder db = dbf.newDocumentBuilder();

    InputSource is = new InputSource();
    is.setEncoding("UTF-16");
    is.setCharacterStream(new StringReader(xml));
    doc = db.parse(is);

} catch (ParserConfigurationException e) {
    Log.e("Error: ", e.getMessage());
    return null;
} catch (SAXException e) {
    Log.e("Error: ", e.getMessage());
    return null;
} catch (IOException e) {
    Log.e("Error: ", e.getMessage());
    return null;
}
// return DOM
return doc;
} 
```

当我使用普通英文字符时，它会给出完整的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:53:44.633

我试过你的代码，没有问题。如果我使用非英语字符评估节点，则存在并且具有正确数量的字符。它们不可打印，因为我没有使用字体中的字形，但`value.codePointAt(i)`返回正确的代码点。

```
 NodeList list = doc.getDocumentElement().getChildNodes();
    for (int i=0; i<list.getLength(); i++)
    {
        String value = list.item(i).getTextContent();
        for (int j=0; j<value.length(); j++)
            System.out.print(" " + value.codePointAt(j));
        System.out.println();
    } 
```

输出：

```
 49
 3517 3548 3517 3530
 49 53 53
 3517 3548 
```

这对应于您的代码点的十进制表示。

我已经手动创建了 xml 字符串。你已经在记忆中了吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:41:31.970

*   通过 Unicode，人们通常指的是 UTF-8，但您使用的是 UTF-16，这很[糟糕](http://benlynn.blogspot.jp/2011/02/utf-8-good-utf-16-bad_07.html)

*   [XML 在其标头](https://stackoverflow.com/questions/7007427/is-a-valid-xml-file-required-xml-header-declaration-xml-version-1-0-encodin)中定义了自己的编码，因此您不需要覆盖它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:20:49.077

这是我用来解决问题的代码。

```
 NodeList idlist = doc.getElementsByTagName(KEY_ID);
    NodeList namelist = doc.getElementsByTagName(KEY_NAME);
    NodeList costlist = doc.getElementsByTagName(KEY_COST);
    NodeList desclist = doc.getElementsByTagName(KEY_DESC);
    for (int i=0; i<idlist.getLength(); i++)
    {
        Item item = new Item();
        item.setCost(costlist.item(i).getTextContent());
        item.setDescription(desclist.item(i).getTextContent());
        item.setName(namelist.item(i).getTextContent());
        itemarray.add(item);

    } 
```

# cuda - 使用共享内存和全局内存测试cuda矩阵乘法的结果

> ID：12526062
> 
> 赞同：0
> 
> 时间：2012-09-21T07:32:08.480
> 
> 标签：cuda

我一直在研究cuda。

在 CUDA 编程指南中，共享内存访问时间比全局内存时间快。

所以，我编写了执行矩阵乘法的代码。

这是我的代码。version1 使用全局内存，version2 使用共享内存

我的gpu是tesla c2070 cuda sdk 4.2版

* * *

主要代码

```
#define Matrix_Width   9216
#define Matrix_Divide  4
#define Tile_Width     32
#define Ce_Size 4096

#if Matrix_Width == 9216
    #define Matrix_Size 9216*9216
#elif Matrix_Width == 12800
    #define Matrix_Size 12800*12800
#elif Matrix_Width == 15872
    #define Matrix_Size 15872*15872
#elif Matrix_Width == 18432
    #define Matrix_Size 18432*18432
#endif

float* H_Input1 = (float*)malloc( sizeof(float) * Matrix_Size );
float* H_Input2 = (float*)malloc( sizeof(float) * Matrix_Size );
float* H_Output = (float*)malloc( sizeof(float) * Matrix_Size );

for( int i=0 ; i < Matrix_Size ; i++ ){
    H_Input1[i] = 1.0f;
H_Input2[i] = 1.0f;
}
memset( H_Output, 0 , sizeof(float) * Matrix_Size );

float* D_Input1;
float* D_Input2;
float* D_Output;

cudaMalloc( (void**)&D_Input1, sizeof(float) * Matrix_Size );
cudaMalloc( (void**)&D_Input2, sizeof(float) * Matrix_Size );
cudaMalloc( (void**)&D_Output, sizeof(float) * Matrix_Size );
cudaMemcpy( D_Input1, H_Input1, sizeof(float) * Matrix_Size, cudaMemcpyHostToDevice );
cudaMemcpy( D_Input2, H_Input2, sizeof(float) * Matrix_Size, cudaMemcpyHostToDevice );
cudaMemcpy( D_Output, H_Output, sizeof(float) * Matrix_Size, cudaMemcpyHostToDevice );

event_pair Event;
start_timer( &Event );
dim3  dimGrid( Matrix_Width/Matrix_Divide/Tile_Width, Matrix_Width/Matrix_Divide/Tile_Width, 1 );
dim3 dimBlock( Tile_Width, Tile_Width, 1 );

kernel_global<< dimGrid, dimBlock>>>( D_Input1, D_Input2, D_Output );
stop_timer( &Event, "1GB mMemory Test\n" );
cudaMemcpy( H_Output, D_Output, sizeof(float) * Matrix_Size, cudaMemcpyDeviceToHost ); 
```

* * *

## 内核版本1

```
__global__ void kernel_global( float* Input1, float* Input2, float* Output ){

for( int i = 0 ; i < Matrix_Divide ; i++ ){
for( int j = 0 ; j < Matrix_Divide ; j++ ){

float Sum = 0;
int Row = (i * (Matrix_Width/Matrix_Divide)) + (blockIdx.y * Tile_Width) + threadIdx.y; 
int Col = (j * (Matrix_Width/Matrix_Divide)) + (blockIdx.x * Tile_Width) + threadIdx.x;

    for( int k = 0 ; k < Matrix_Width ; k++ ){
        Sum += Input1[ Row * Matrix_Width + k ] * Input2[ k * Matrix_Width + Col ];
    }
    Output[ Row*Matrix_Width+Col] = Sum;
    }
    }
} 
```

* * *

## 内核版本2

```
 __global__ void kernel_shared( float* Input1, float* Input2, float* Output ){

    __shared__ float Input1_s[Tile_Width][Tile_Width];
    __shared__ float Input2_s[Tile_Width][Tile_Width];

    int Bx = blockIdx.x;
    int By = blockIdx.y;
    int Tx = threadIdx.x;
    int Ty = threadIdx.y;

    for( int i = 0 ; i < Matrix_Divide ; i++ ){
        for( int j = 0 ; j < Matrix_Divide ; j++ ){

            float Sum = 0;
            int Row = (i * (Matrix_Width/Matrix_Divide)) + (By * Tile_Width) + Ty;
            int Col = (j * (Matrix_Width/Matrix_Divide)) + (Bx * Tile_Width) + Tx;

            for( int m = 0 ; m < Matrix_Width/Tile_Width ; m++ ){

                Input1_s[Ty][Tx] = Input1[ Row * Matrix_Width + ( m * Tile_Width + Tx ) ];
                Input2_s[Ty][Tx] = Input2[ ( m * Tile_Width + Ty ) * Matrix_Width + Col ];
                __syncthreads();

                for( int k = 0 ; k < Tile_Width; k++ ){
                    Sum += Input1_s[Ty][k] * Input2_s[k][Tx];
                }
                __syncthreads();
            }
            Output[ Row*Matrix_Width+Col] = Sum;
        }
    }
} 
```

* * *

此代码制作了 Width = 9216 的矩阵

它不能一次计算。因为块的最大计数是 65535 和线程 1024

所以我使用 4 划分矩阵宽度，所以矩阵划分 16 个块。

一次可以计算 1 个块。

所以我使用loopcount为16的循环（i * j = 16）

并且一个块被划分块和线程..（ tile_width = 32 ）

测试结果好奇怪。

版本 1 耗时 90 秒

版本 2 耗时 130 秒

我无法理解这个结果

我认为共享内存元素在瓷砖中被重新使用......

为什么版本 1 比版本 2 快？

此致！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:42:42.640

Tesla C2070 是一款计算能力 2.0 设备，可缓存全局内存访问。因此，在这两种情况下，内部循环都在片上存储器中运行（除了第一次迭代）。

唯一的区别是第二个版本中将数据加载到共享内存中的额外代码需要额外的时间，而在第一个版本中，这项工作是由缓存逻辑在硬件中完成的。

只有在计算能力为 1.x 的设备上，或者如果您比硬件缓存的 LRU（最近最少使用）逻辑更清楚哪些数据正在被重用，手动缓存数据到共享内存中才值得。

# javascript - jquery 或 javascript div 背景图像更改

> ID：12526064
> 
> 赞同：0
> 
> 时间：2012-09-21T07:32:13.127
> 
> 标签：javascript, jquery, image, html, background

我在我构建的网站中遇到问题。我搜索 google 和 stackoverflow 但我找不到任何可以帮助我的东西。我有一个带有内容搜索引擎、文本等的 div ......我有背景图片。你也可以告诉我如何每隔 2-3 秒或任何我设置的渐变效果更改 div 背景图像，请我是 jquery 或 javascript 的菜鸟，所以请耐心等待。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:42:01.267

html代码

```
 <div id="banner">

  <img class="img1" height="251" width="650" alt="img1" src="images/banner1.jpg"/>

  <img class="img2" height="251" width="650" alt="img2" src="images/banner2.jpg"/>

</div> 
```

jQuery代码

```
 jQuery.timer = function (interval, callback)
 {

 var interval = interval || 100;

if (!callback)
    return false;

_timer = function (interval, callback) {
    this.stop = function () {
        clearInterval(self.id);
    };

    this.internalCallback = function () {
        callback(self);
    };

    this.reset = function (val) {
        if (self.id)
            clearInterval(self.id);

        var val = val || 100;
        this.id = setInterval(this.internalCallback, val);
    };

    this.interval = interval;
    this.id = setInterval(this.internalCallback, this.interval);

    var self = this;
};

return new _timer(interval, callback);
};

var current_panel = 2;
var animation_duration = 2500;  
$.timer(6000, function (timer) {  
    switch(current_panel){  
        case 1:  
           $("#banner .img1").fadeIn(800);

           $("#banner .img2").fadeOut(800);
            current_panel = 2; 
        break; 
        case 2: 
            $("#banner .img2").fadeIn(800);

             $("#banner .img1").fadeOut(800);
            current_panel = 1; 
        break; 

        timer.reset(12000);  
     }  
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:48:18.387

据我所知，没有额外的标记是无法改变具有淡入淡出效果的背景图像的。您没有提供任何代码，所以我做了一个综合示例。

标记：

```
<div class="container">
    <div class="bg">
    </div>
    <div class="content">
        ... 
    </div>
</div>
... 
```

CSS：

```
/*
    this is your main container 
*/
.container {
    width:300px;
    height:300px;
}

/*
    this one is needed to provide 
    independent background, when it fades
    your content will still be available for seeing
*/
.bg {
    width:300px;
    height:300px;
    background-color:yellow;
    z-index:0;
}

/*
    your content, obviously :)
*/
.content {
    position:relative;
    top:-300px;
    z-index:1;
    padding:5px; /*just for better looking*/
} 
```

还有一些jQuery：

```
//in your case, here must be URLs for images
var arr = ["yellow", "blue", "green", "red"]; 
var i = 0;

var intervalID = setInterval(function() {
    //when bg fades, we don't want to see  
    //transparent background                             
    $('.container').css('background-color', arr[i]); 

    //make transparent, change background, make visible again
    $('.bg').animate({opacity: 0}, 'slow', function() {
        $(this).css({'background-color': arr[i]}).animate({opacity: 1});
    });

    //this can be random
    i++;
    if (i >= arr.length)
        i = 0;
}, 2000); //change 2000 if you want different time between changes

//this one is illustating, how to stop background loop
//with "clearInterval". You might want to use it on :hover or smth like that
setTimeout(function(){
    clearInterval(intervalID);
    }, 20000); 
```

这不是非常灵活的解决方案，因为您需要知道元素的确切大小，但我认为您不会使用不同大小的图像作为背景。

ps 工作示例 - [http://jsfiddle.net/7xVAu/115/](http://jsfiddle.net/7xVAu/115/)

希望这有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T07:38:17.597

您可以从[JQuery 文档](http://api.jquery.com/fadeIn/)开始。如果您不了解这些内容，请尝试寻找一些好的[javascript 或 JQuery 书籍](http://oreilly.com/javascript/)。此外， [codecademy](http://www.codecademy.com/)对初学者程序员也很有帮助。

# python - Django：create_new_user_and_profile

> ID：12526065
> 
> 赞同：0
> 
> 时间：2012-09-21T07:32:15.017
> 
> 标签：python, django

在这里是 Django 新手，在某人传递给我的代码的用户配置文件模型中找到了此功能，但我终生无法在文档中找到它，也无法在他的代码中的其他任何地方找到它。但是包括用户身份验证在内的一切似乎都有效，所以不确定这`create_new_user_and_profile`是从哪里来的？另外，不确定这是否是对用户的最佳方式，任何人都可以提供一些提示吗？

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User)

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    office_number = models.IntegerField(null=True)

    def initialize_static_fields(self, office_number):
        user = models.OneToOneField(User)
        self.office_number = office_number

    def create_new_user_and_profile(username, email, password, office_number):
        u = User.objects.create_user(username, email, password)
        u.get_profile().initialize_static_fields(office_number) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:20:11.053

用户模型有一个 create_user 方法，但是默认情况下它不会创建配置文件，您可以在每次创建新用户时使用信号来创建配置文件，例如

```
def create_profile(sender, instance, created, **kwargs):
    profile = None
    if created:
        profile, created = Profile.objects.get_or_create(user=instance)

post_save.connect(create_profile, sender=User) 
```

添加到模型中的方法是创建用户并触发 create_user_profile 的自定义方法，然后会补充额外的信息。IMO，此方法不应该是 CalscopeUserProfile 的一部分，并且可能属于（表单）视图（私有）或服务功能。

# r - RScript：如何将绘图保存到多个文件（比如 png）中，而不是保存到 Rplots.pdf 中？

> ID：12526067
> 
> 赞同：-2
> 
> 时间：2012-09-21T07:32:23.993
> 
> 标签：r, plot, rscript

我在 Windows 中使用 RScript，默认情况下它将图保存到 pdf 文件`Rplots.pdf`中，每页一个图。

我想将每个图保存到像 a 这样的图像文件`.png`中，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:57:31.633

To save your plots as a `png` file, the general idea is:

```
png("spam.png")
plot(...)
dev.off() 
```

similar functions are `jpeg` and `tiff`. Wrap all your plots in such calls to `png` to save the plots to specific names. Adding `png()` at the top of the script will save all plots in different png files: `Rplot001.png`, `Rplot002.png`. I would however try and give meaningful names to the plots.

Using Cairo devices, you can use `savePlot`. When you plot with `ggplot2`, the best way imo to save a plot is using `ggsave`.

# database - OrientDB：不能将“update ... put ...”与“where”子句一起使用

> ID：12526069
> 
> 赞同：0
> 
> 时间：2012-09-21T07:32:28.887
> 
> 标签：database, nosql, orientdb

我的更新查询是：

```
update test put phone = 'office','+123456' where name = 'luca' 
```

错误信息是：

```
Found unexpected keyword 'NAME' while it was expected '[=]' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:04:26.003

这已通过 1.2.0-SNAPSHOT 修复。尝试一下 ;-）

# django - 如何在 Openshift 上使用 Django 标记

> ID：12526072
> 
> 赞同：0
> 
> 时间：2012-09-21T07:32:47.687
> 
> 标签：django, tagging, openshift

我在我的应用程序中添加了标记：

```
from setuptools import setup

setup(
    name='YourAppName',
    version='1.0',
    description='OpenShift App',
    author='Your Name',
    author_email='example@example.com',
    url='http://www.python.org/sigs/distutils-sig/',
    install_requires=['Django>=1.3','MySQL-python','tagging',],
) 
```

之后`git push`，错误显示：

```
ImportError: cannot import name parse_lookup 
```

我该如何解决这个错误？首先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:44:18.797

我有同样的问题。问题是 parse_lookup 已被删除。“parse_lookup 由于 queryset-refactor 而消失了，这是有充分理由的。作为记录，这里*不*应该报告 django 标记问题，它已在其主干版本中修复。” -https://code.djangoproject.com/ticket/7680

尝试去这里：[http](http://code.google.com/p/django-tagging/) ://code.google.com/p/django-tagging/ 并安装关闭 svn 主干：

```
svn checkout http://django-tagging.googlecode.com/svn/trunk/ tagging-trunk 
```

将其中的标记文件夹添加到您的 libs 文件夹中。然后将它添加到您的 PYTHONPATH - 在 openshift 上，您需要这样的东西：

```
sys.path.append(os.path.join(os.environ['OPENSHIFT_REPO_DIR'], 'libs', 'tagging')) 
```

到您的 wsgi/应用程序

# url - 在 url 中使用 hashbang (#!)

> ID：12526074
> 
> 赞同：2
> 
> 时间：2012-09-21T07:32:56.660
> 
> 标签：url, hashbang

> **可能重复：**
> [Facebook 和新 Twitter URL 中的 shebang/hashbang (#!) 是什么？](https://stackoverflow.com/questions/3009380/whats-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for)

什么是 hashbang，hashbang 在超链接中的用途是什么？

# mysql - Mysql Workbench 和 Xampp - 更新：Mysql 坏了 :(((

> ID：12526075
> 
> 赞同：0
> 
> 时间：2012-09-21T07:32:57.717
> 
> 标签：mysql, xampp

这次我使用的是 Fedora17。我已经安装了 Mysql Workbench，因为我在我大学的一些项目中使用 Eclipse。

据我所知，我不能混合 xampp 和以前的 mysql 安装。那么在这种情况下如何使用 xampp 呢？也许我错了。

编辑：我安装了 Xampp。它没有用，所以我卸载了它。然后当我在 mysql 工作台中时，我所有的数据库都消失了:(

我试图重新安装 mysql 工作台但没有结果。

它在终端中说的最后一件事：`sudo systemctl status mysqld.service` ---> 结果-->

```
 Loaded: loaded (/usr/lib/systemd/system/mysqld.service; disabled)
  Active: failed (Result: exit-code) since Fri, 21 Sep 2012 03:20:43 -0500; 4min 17s ago
 Process: 10397 ExecStartPost=/usr/libexec/mysqld-wait-ready $MAINPID (code=exited, status=1/FAILURE)
 Process: 10396 ExecStart=/usr/bin/mysqld_safe --basedir=/usr (code=exited, status=0/SUCCESS)
 Process: 10379 ExecStartPre=/usr/libexec/mysqld-prepare-db-dir (code=exited, status=0/SUCCESS)
  CGroup: name=systemd:/system/mysqld.service 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:39:48.943

不要尝试同时运行两个 mysql 实例。这是不可能的。请在运行mysql的xampp实例之前运行xampp/xampp-portcheck.exe，看看你现有的版本是否占用了端口值3306。如果是这种情况，mysql的xampp实例将无法启动。

检查下面的链接，它将给出完整的描述和截图，以使用 xampp [http://interconnectit.com/764/using-mysql-workbench-with-xampp/](http://interconnectit.com/764/using-mysql-workbench-with-xampp/)

# facebook - 在图片帖子中标记用户

> ID：12526077
> 
> 赞同：1
> 
> 时间：2012-09-21T07:33:13.810
> 
> 标签：facebook, facebook-graph-api, tags

我有一个画布应用程序，可以让用户将图片上传到朋友的时间轴。进行照片上传工作正常，但我试图在图片名称中标记用户的姓名。我不知道我的代码的哪一部分是不正确的。图片正在上传，标签不存在。我究竟做错了什么？

```
 FB.api(
            '100003980685577/photos',
            'post',
            {
                url: 'url to photo',
                name: 'Tiberiu Maxim sent you a kiss via kissapp',
                name_tags: {
                    "0": [
                        {
                            "id": 1033568851,
                            "name": "Tiberiu Maxim",
                            "type": "user",
                            "offset": 0,
                            "length": 13
                        }
                    ]
                }
            },
            function(result) {
                console.log(result);
            }
        ); 
```

我的代码解释：用户 1033568851(Tiberiu Maxim) 已登录并授予权限。他正在向 id 为 100003980685577 的用户发送亲吻照片，并且应该以照片的名称标记 Tiberiu Maxim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:41:04.103

看起来我找不到我的问题的答案。我没有将照片发布到朋友的时间线，而是创建了一个开放图形操作，其中包括一个提及标签。我所要做的就是发布包含带有一些文本值的“消息”参数的操作，您可以在其中标记这样的人：

```
This is a message for @[user_id]! 
```

其中 user_id 显然是一个用户 ID。

！提交操作以供批准时，不要忘记检查标签选项

FB 文档在[这里](https://developers.facebook.com/docs/opengraph/mention_tagging/)

# java - 数据库唯一密钥、JPA 存储库和 getByUniqueKey 签名：它是如何工作的？

> ID：12526081
> 
> 赞同：1
> 
> 时间：2012-09-21T07:33:24.780
> 
> 标签：java, spring, jpa, repository, unique-index

**背景**

数据表`item`：

```
+---------+---------+--------+
|  field  |  type   | index  |
+---------+---------+--------+
| id_item | INT     | PK     |
| name    | VARCHAR | UNIQUE |
+---------+---------+--------+ 
```

`ItemRepository.java`：

```
public interface ItemRepository extends CustomRepository<Item, Integer> {
    public Item getByName(String name); // because of the unique index
} 
```

`CustomRepository.java`：

```
@NoRepositoryBean
public interface CustomRepository<E, PK extends Serializable> extends PagingAndSortingRepository<E, PK>, JpaSpecificationExecutor<E> {
    // common methods
} 
```

`CustomRepositoryImpl.java`：

```
public class CustomRepositoryImpl<E, PK extends Serializable> extends SimpleJpaRepository<E, PK> implements CustomRepository<E, PK> {
    // common methods implementations
} 
```

**问题**

如您所见，没有实现 interface `ItemRepository`。这意味着，该`getByName`方法只有一个签名，永远不会在任何地方实现。但它有效。如何？

**附言**

对于持怀疑态度的人来说，使用 Eclipse，当`Ctrl`按住鼠标并将鼠标悬停在`getByName`签名上时，单击`Open Implementation`根本不会打开任何 JAVA 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:43:18.277

Spring 将 AOP 用于存储库，并将拦截与 bean 属性匹配的任何`getByX`方法。`X`在您的示例中，`Item`bean 声明了`name`属性，因此 Spring 会为您拦截它。

请参阅[Spring Data JPA](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/)手册中的[定义查询方法。](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.query-methods)

# android - 当弹出窗口在android中覆盖它时如何刷新ListView内容？

> ID：12526086
> 
> 赞同：2
> 
> 时间：2012-09-21T07:33:44.827
> 
> 标签：android, android-listview, android-ui

我有一个列表视图，它由一个 ArrayAdapter 支持，而后者又由一个 LinkedList 支持（比如 var **list**）......现在这个列表由一个后台线程（非 UI 线程）修改，只要它们有任何变化我调用适配器`notifyDatasetChanged()`的 Runnable（传递给`runOnUIThread()`），并且更改会反映在 UI 中。到目前为止没问题。

现在我最近在应用程序中添加了一个弹出窗口，每次用户单击 ListView 的一行时都会打开它（更不用说它是根据所选项目自定义的）......现在我的问题是弹出窗口是否打开（显示）并且比他们的`list` *变化*是一个问题（如下所述）......

即使显示 PopupWindow ，我如何刷新适配器？？？有时它工作得很好，有时我得到......

**“后台线程更改了适配器的内容，但列表视图没有收到任何通知”**

# c# - 在 Metro 中使用 C# 在 HTML 中设置 Iframe Src？

> ID：12526090
> 
> 赞同：1
> 
> 时间：2012-09-21T07:34:04.643
> 
> 标签：c#, html, xaml, iframe, microsoft-metro

我正在使用一个 C# 项目，我有一个包含一堆网页的列表框，我想要它，所以当用户单击列表框项目时，项目 URL 会发送到我的 HTML 页面 IFrame 源。

当前的 HTML 文件

```
<iframe id="Iframe1" type="text/html" src="{C#-Address}" style='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 999' > </iframe>' 
```

如您所见，我试图让 src 成为 C# 的值，我该怎么做？

我应该打开本地 HTML 文件（如何？）并搜索“{C#-Address}”并替换为选定的 SRC 页面吗？我遇到的问题是......如果页面已经加载但现在需要重新加载，如何或怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:12:47.830

使用 javascript 获取列表框项上的单击值并通过它更新 iframe src 值。您不需要对此进行任何服务器交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T02:43:27.177

我已经做了：

```
var goHTML = await Windows.Storage.PathIO.ReadTextAsync("ms-appx:///test.html"); 
string getit = goHTML.ToString();
string News = getit.Replace("ItemFind", "ItemReplace");
MyWebView.NavigateToString(News); 
```

# java - 如何淡入 JPanel 和儿童？

> ID：12526094
> 
> 赞同：4
> 
> 时间：2012-09-21T07:34:13.107
> 
> 标签：java, swing, awt, jpanel, fadein

我知道我可以通过将 alpha 值添加到背景颜色和计时器来淡入面板。但是如何在带有子组件（如 a `JLabel`）的面板中淡入淡出？

**编辑**

```
_fadeTimer = new Timer(40, new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            if (_alpha == 255) {
                _fadeTimer.stop();
            } else {
                pnl_hint.setBackground(new Color(
                        bgColor.getRed(),
                        bgColor.getGreen(),
                        bgColor.getBlue(),
                        (_alpha += 1)));

                pnl_hint.updateUI();
            }
        }
    });
    _fadeTimer.start(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T09:35:56.407

另一种选择是捕获面板的屏幕截图，然后让它使用增加的 alpha 合成来绘制自己。

这是一个小演示（尽管我不确定这是否真的干净）：

```
import java.awt.AlphaComposite;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestFading {

    private static class FadingPanel extends JPanel {
        private BufferedImage buffer;
        private boolean isFading = false;
        private long start;
        private float alpha = 1.0f;

        @Override
        public void paint(Graphics g) {
            if (isFading) {// During fading, we prevent child components from being painted
                g.clearRect(0, 0, getWidth(), getHeight());
                ((Graphics2D) g).setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha));
                g.drawImage(buffer, 0, 0, this);// We only draw an image of them with an alpha
            } else {
                super.paint(g);
            }
        }

        public void fade(int time) {
            start = System.currentTimeMillis();
            buffer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB);
            this.print(buffer.getGraphics());// Draw the current components on the buffer
            isFading = true;
            final int timeInMillis = time * 1000;
            final Timer t = new Timer(50, null);
            t.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    long elapsed = System.currentTimeMillis() - start;
                    if (elapsed > timeInMillis) {
                        start = 0;
                        isFading = false;
                        buffer = null;
                        repaint();
                        t.stop();
                    } else {
                        alpha = 1.0f - (float) elapsed / timeInMillis;
                        repaint();
                    }
                }
            });
            t.start();
        }
    }

    protected void initUI() throws MalformedURLException {
        JFrame frame = new JFrame(TestFading.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final FadingPanel panel = new FadingPanel();
        JTextField textfield = new JTextField(60);
        JLabel image = new JLabel(new ImageIcon(new URL("http://helios.gsfc.nasa.gov/image_mag_stamp.jpg")));
        JButton button = new JButton("Fade");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // I use an invoke later to allow the button to release itself
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        panel.fade(5);// Fade the panel in 5s.
                    }
                });
            }
        });
        panel.add(textfield);
        panel.add(image);
        panel.add(button);
        frame.add(panel);
        frame.setSize(400, 300);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestFading().initUI();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:35:54.600

未经测试的伪代码。

```
public void fade(Container c) {
    Component[] children = c.getComponents();
    for (Component component : components)  {
        // do fade thing with component
        if (component instanceOf Container) {
            fade( (Container)component );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T09:25:51.803

而不是设置后台覆盖`paintChildren`方法。调用`super.paintChildren()`然后用半透明颜色填充组件的矩形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T17:16:59.270

我添加了一个带有图像的 JLabel 并将 JPanel opaque 设置为 false！

在覆盖的 paintComponent 方法中，我在 super.paintComponent() 调用之前使用我的 alpha 设置了 AlphaComposite。

[如何在摇摆中淡化图像？](https://stackoverflow.com/questions/2228735/how-do-i-fade-an-image-in-swing/2234020#2234020)

# php - Cakephp 路由（也在 PHP 中）

> ID：12526099
> 
> 赞同：-2
> 
> 时间：2012-09-21T07:34:21.317
> 
> 标签：php, cakephp, routing, cakephp-2.1

我正在使用 Cake，但是如何使路由如下：

```
Router::connect('/', array('controller' => 'homes', 'action' => 'index')); 
```

不区分大小写？

例如：

```
Router::connect
(
    '/:user', 
    array('controller' => 'teachers', 'action' => 'contentProfile', 1),
    array('user' => 'hellouser')
); 
```

MY_URL.com/hellouser 工作正常，但 MY_URL.com/HelloUser 没有正确路由。

我已经尝试过 /heelouser/i ，但仍然没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:21:40.507

如[文档](http://book.cakephp.org/2.0/en/development/routing.html#route-elements)中所示，您可以使用正则表达式来限制匹配的路由元素。您正在寻找的正则表达式片段是：

```
'(?i:hellouser)' 
```

## 路线定义

将文档和您的特定正则表达式放在一起，这是一条`/hellouser`以不区分大小写的方式匹配 url 的路由：

```
Router::connect(
    '/:user', 
    array('controller' => 'teachers', 'action' => 'contentProfile', 1),
    array('user' => '(?i:hellouser)')
); 
```

第三个参数用于限制路由元素的可能值——在这种情况下以不区分大小写的方式为“hellouser”。

# java - 搜索操作期间速率时间限制错误

> ID：12526100
> 
> 赞同：-1
> 
> 时间：2012-09-21T07:34:23.260
> 
> 标签：java, twitter4j

当我尝试使用 twitter4j 通过搜索 (sports +exclude:retweets) 之类的关键字来获取公共推文时，我收到以下错误：

```
420:Returned by the Search and Trends API when you are being rate limited (https:
    //dev.twitter.com/docs/rate-limiting).
    Returned by the Streaming API:
     Too many login attempts in a short period of time.
     Running too many copies of the same application authenticating with the same acc
    ount name.
    {"error":"You have been rate limited. Enhance your calm."}
    Relevant discussions can be found on the Internet at:
            http://www.google.co.jp/search?q=d35baff5 or
            http://www.google.co.jp/search?q=0877c84f
    TwitterException{exceptionCode=[d35baff5-0877c84f], statusCode=420, retryAfter=51
    1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.6}
            at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:185

    - Unable to search keyword = Query{query='sports OR +exclude:retweets', lang='n
    ull', locale='null', maxId=-1, rpp=-1, page=15, since='null', sinceId=-1, geocode
    ='null', until='null', resultType='null'} You have been rate limited. Enhance your calm 
```

谁能告诉我为什么即使我只进行搜索操作也会得到这个？API有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:38:36.473

正如错误所说，您似乎受到了速率限制。你连续运行太多次了吗？您的连接频率是否超出了需要？

# android - 无法在位置更改的 android 4.0 中更改 wifi 信号强度？

> ID：12526101
> 
> 赞同：3
> 
> 时间：2012-09-21T07:34:26.157
> 
> 标签：android, android-wifi

我正在获取 wifi 信号强度。它在 Android 3.0 中运行良好，但是当我在 Android 4.0 中运行相同的代码并尝试获取信号强度并获得信号强度时，但当我移动到其他位置并尝试获得信号强度时，我得到的强度相同。它没有改变。

这是我获取wifi信号强度的代码：

1）`BroadcastReceiver`：

```
public class WiFiScanReceiver extends BroadcastReceiver {
    private static final String TAG = "WiFiScanReceiver";
    WiFiDemo wifiDemo;
    Context context;

    public WiFiScanReceiver(WiFiDemo wifiDemo) {
        super();
        this.wifiDemo = wifiDemo;
        context = wifiDemo;             

        if(results != null){
            receiver.clearAbortBroadcast();
            receiver = null;
        }

        List<ScanResult> results = wifiDemo.wifiManager.getScanResults();

    }

    @Override
    public void onReceive(Context c, Intent intent) {

            ScanResult bestSignal = null;

            for (ScanResult result : results) {
                if (bestSignal == null || WifiManager.compareSignalLevel(bestSignal.level,result.level) < 0)
                    bestSignal = result;
            }

            String message = String.format(
                    "%s networks found. %s is the strongest.", results.size(),
                    bestSignal.SSID);
            Log.i("System out","Results : "+results);
    }
} 
```

`onCreate()`获得力量的方法

```
BroadcastReceiver receiver = new WiFiScanReceiver(this);    

        registerReceiver(receiver, new IntentFilter(
                WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));

    for (int i = 0; i < results.size(); i++) {

        wifiStrength = wifiNameMap.get(results.get(i).SSID);
        if(wifiStrength==null){
            wifiStrength = new ArrayList<Integer>();
        }           

        wifiStrength.add(results.get(i).level);
        wifiNameMap.put(results.get(i).SSID, wifiStrength);                     
    } 
```

# php - Magento：如何更改类别页面的标记？

> ID：12526105
> 
> 赞同：3
> 
> 时间：2012-09-21T07:34:38.167
> 
> 标签：php, magento, markup

我是 magento 的新手。

我想自定义分类部分的标记（添加一些部门/链接），但是当我检查目录/分类/view.phtml时，我只能看到一个负责在分类页面中显​​示产品的功能：

```
 <?php echo $this->getProductListHtml() ?> 
```

请告诉我我可以在哪里进行更改？

非常感谢，伙计们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:40:36.090

该方法`getProductListHtml()`在 中定义`Mage_Catalog_Block_Category_View`。

模板`app/design/frontend/base/default/template/catalog/product/list.phtml`通常通过调用这个来加载。您的里程可能会有所不同，因为您正在使用的主题可以覆盖模板。

我建议学习[Magento 设计指南](http://info.magento.com/rs/magentocommerce/images/MagentoDesignGuide.pdf)和一些教程来掌握。

# java - JBoss 服务器连接在 localhost:1099 上被拒绝

> ID：12526110
> 
> 赞同：2
> 
> 时间：2012-09-21T07:34:49.960
> 
> 标签：java, jboss, jboss5.x

我有一个在远程服务器上运行的 JBoss 5.0.1 GA 实例。服务器尝试启动位于同一实例上的批处理服务，但它报告连接被拒绝。我发现一些网页说要将 localhost 地址添加到 jndi.properties，但随后服务器无法完全启动。错误代码：

```
10:27:23,831 DEBUG [TimedSocketFactory] ​​createSocket, hostAddr: localhost/127.0.0.1, port: 1099, localAddr: null, localPort: 0, timeout: 0
10:27:23,831 调试 [NamingContext] 无法连接到 localhost:1099
javax.naming.CommunicationException：无法连接到服务器 localhost/127.0.0.1:1099 [根异常是 javax.naming.ServiceUnavailableException：
无法连接到服务器 localhost/127.0.0.1:1099 [根异常是 java.net.ConnectException：连接被拒绝]]

```

我运行命令

```
网络统计-anpt
```

该列表包含此服务器的 IP 和端口 1099。

我跑

```
telnet [服务器IP] 8080
```

并且连接成功。

我跑

```
telnet [服务器IP] 1099
```

它返回连接被拒绝和一些奇怪的字符。

关于如何处理的任何想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:27:37.593

1.  通过 ssh 登录到服务器，然后从该服务器上的终端执行下一步操作。
2.  跑`netstat -anpt | grep 1099`
3.  检查 1099 端口的状态为 LISTEN。记住程序名称和 pid（netstat 的最后一列输出，应该类似于`5812/java`）
4.  尝试调查，什么程序使用它。从第 3 步运行`ps aux | grep xxxx`where xxxx - pid
5.  检查程序参数并确保它是 Jboss 实例。
6.  检查`iptables`设置，确保允许从 localhost 传入到 1099 的连接（默认情况下应该是）
7.  尝试连接到端口 1099
8.  如果可能，暂时禁用 iptables。
9.  尝试连接到端口 1099
10.  检查代理设置，也许你通过代理访问本地主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T07:42:41.697

[https://issues.jboss.org/browse/SOA-1534](https://issues.jboss.org/browse/SOA-1534)似乎是根本原因。如果您不希望配置命名提供程序 url，则只需传递以下 VM arg 即可覆盖该值。`-Djava.naming.provider.url=`对于你的 jboss 的 run.sh。

# asp.net - 错误显示填充：SelectCommand.Connection 属性尚未初始化

> ID：12526117
> 
> 赞同：3
> 
> 时间：2012-09-21T07:35:15.880
> 
> 标签：asp.net, sql, sql-server-2008, c#-4.0

```
 DataSet ds = new DataSet();

    SqlDataAdapter cmd = new SqlDataAdapter("Select * FROM event", con);
    cmd.Fill(ds, "Table"); 
```

一次又一次地得到同样的错误尝试了一切

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:38:20.710

**编辑**

像这样尝试，其中缺少的元素可能是在下面的代码中添加的命令类型，并且还为数据库打开连接

```
 SqlConnection sqlcon;
   using(sqlcon = new SqlConnection("Data Source=Servername;Initial 
       Catalog=Marketing;Integrated Security=SSPI"))
   {

        SqlCommand cmd = new SqlCommand("Select * FROM event", sqlcon);
        cmd.CommandType = CommandType.Text;
        sqlcon.Open();
        da = new SqlDataAdapter(sqlcmd);
        da.Fill(dt);
   } 
```

**注意：在 using 语句中使用然后处理所有内容。这也是在上面添加的**

* * *

在调用填充方法之前执行此操作

```
SqlConnection conn= new 
         SqlConnection("Data Source=Servername;Initial Catalog=Marketing;Integrated Security=SSPI");

SqlDataAdapter cmd = new SqlDataAdapter("Select * FROM event", con);
   cmd.Fill(ds, "Table"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:10:06.577

```
SqlConnection myconn = new SqlConnection(YourConnString);
SqlCommand mycmd = new SqlCommand();

try{ myconn.Open(); }
catch (Exception ex) { MessageBox("Error");}
mycmd.Connection = myconn;

DataSet ds = new DataSet();
DataTable dt = new DataTable();

String sqlStr = "Select * FROM event";
SqlDataAdapter da = new SqlDataAdapter(sqlStr, myconn);
da.Fill(ds);
dt = ds.Tables[0]; 
```

# wpf - 在 xamDockManager 中以编程方式切换选项卡

> ID：12526123
> 
> 赞同：0
> 
> 时间：2012-09-21T07:35:41.200
> 
> 标签：wpf, infragistics

我在 XamDockManager 中有几个选项卡，例如照片，故事，图形。我需要根据快捷键选择一个选项卡（例如，ALT+CTRl+S 用于故事）。我可以使用 RoutedUICommand 捕获这些快捷键按下事件但我有点坚持以编程方式选择特定选项卡。请帮助我如何实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:25:45.917

通过调用 ContentPane 的 Activate 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:30:29.167

为 TabControl 命名

```
<igWindows:XamTabControl x:Name="myTabControl"> 
```

并通过代码中的 SelectedItem 设置选项卡：

```
private void Window_KeyUp(object sender, KeyEventArgs e)
{
  //if ALT+CTRL+S...
  myTabControl.SelectedItem = myTabControl.Items[0];
} 
```

# android - 我可以使用 selenium webdriver 执行使用互联网的 android 应用程序测试吗？

> ID：12526124
> 
> 赞同：0
> 
> 时间：2012-09-21T07:35:40.810
> 
> 标签：android, selenium, webdriver, selenium-webdriver

我想测试一个在其操作中使用互联网的安卓应用程序。如果有人知道这一点，请告诉我方法。我不是在说任何可以在安卓网络浏览器中打开的网站的移动版本，而是可以在安卓平台上运行的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:37:33.347

Selenium Android WebDriver 用于驱动 Android 网络浏览器，因此您不能使用它来测试*原生*Android 应用程序。

您正在寻找类似 Robotium [http://code.google.com/p/robotium/的东西](http://code.google.com/p/robotium/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:17:59.220

您可以使用 Android Native Driver 来测试基于 android 的应用程序

# python - 使用 Python 下载完整的 feedburner 提要

> ID：12526132
> 
> 赞同：-5
> 
> 时间：2012-09-21T07:36:26.200
> 
> 标签：python, rss, feedburner

如何使用 Python从[http://feeds2.feedburner.com/meinscheissleben等提要下载所有帖子？](http://feeds2.feedburner.com/meinscheissleben)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:42:30.947

尝试[feedparser](http://pypi.python.org/pypi/feedparser/)并阅读[文档](http://packages.python.org/feedparser/)。

```
 import feedparser
>>> url = 'http://feeds2.feedburner.com/meinscheissleben '
>>> d = feedparser.parse(url)

len(d['entries']) # nr of entries
d['entries'][0] # pick one 
```

# ios5 - 更改根视图导航控制器

> ID：12526136
> 
> 赞同：1
> 
> 时间：2012-09-21T07:36:48.617
> 
> 标签：ios5, uinavigationcontroller

我正在用这样的代码更改导航控制器的根视图：

```
NSMutableArray *viewControllers = [NSMutableArray arrayWithArray:    
[self.navigationController viewControllers]];
NewViewController *nvc = [[NewViewController alloc] init];
[viewControllers replaceObjectAtIndex:0 withObject:nvc];
[self.navigationController setViewControllers:viewControllers]; 
```

我需要在用 newviewcontroller 替换当前视图控制器后手动释放它还是自动完成？

# jquery - Jquery显示一个div onclick提交

> ID：12526137
> 
> 赞同：0
> 
> 时间：2012-09-21T07:36:55.767
> 
> 标签：jquery

当我单击一个按钮时，我必须显示一个包含内容的 div

**HTML**

```
<input type="submit" id="but">​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**JS**

```
$("#but").click(function () {
    alert("h");
    $(this).html('<div>test</div>');​
}); 
```

但这行不通​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:38:49.160

如果您要添加`<div>`到 DOM，请使用以下命令：

```
$("#but").click(function() {
    $("<div>test</div>").appendTo("body");
}); 
```

`body`注意：您可以使用任何其他容器代替。

如果您需要用`<div>`块替换按钮，请使用`replaceWith`：

```
$("#but").click(function() {
    $(this).replaceWith("<div>test</div>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:19:52.877

您采用了提交类型的输入按钮，这会导致回发。因此，当您尝试尝试任何 jquery 时，它可以工作，但页面会被回发，因此它似乎无法正常工作。使用 input type='button' 然后它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:40:05.877

输入不`container`使用`after`或`before`。

```
$("#but").click(function () {
    $(this).after('<div>test</div>');
}); 
```

演示：[jsfiddle.net/5pt5r/](http://jsfiddle.net/5pt5r/)

# objective-c - 在 OS X Mountain Lion 上访问 Facebook 帐户

> ID：12526142
> 
> 赞同：5
> 
> 时间：2012-09-21T07:37:15.507
> 
> 标签：objective-c, facebook, cocoa

`Accounts.framework`由于 Mountain Lion 现在正式集成了 Facebook ，我想在`Social.framework`OS X上玩一点。

我在 Facebook 开发者应用程序中设置了一个应用程序，并使用以下代码请求访问已登录用户的 Facebook 帐户：

```
ACAccountStore *acStore = [[ACAccountStore alloc] init];
ACAccountType *accType = [acStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:FB_APP_ID, ACFacebookAppIdKey, @"read_stream, publish_stream", ACFacebookPermissionsKey, ACFacebookAudienceFriends, ACFacebookAudienceKey, nil];

[acStore requestAccessToAccountsWithType:accType options:options completion:^(BOOL granted, NSError *error) {
    if (granted) {
        NSLog(@"Accounts: %@", acStore.accounts);
        NSLog(@"Access granted");
    } else {
        NSLog(@"Access denied");
    }
}]; 
```

现在我总是得到错误`Error Domain=XPCObjectsErrorDomain Code=2 "The operation couldn’t be completed. (XPCObjectsErrorDomain error 2.)"`

当我第一次从 Xcode 启动应用程序 2-3 次时，OS X 显示确认对话框“XYZ 想要访问您的 Facebook 帐户”，我点击确定，我收到一条错误消息，提示“应用程序尚未安装”。这个错误现在“消失了”，我收到了上面提到的错误。

我的问题是：我是否必须在我的 Xcode 项目 (Info.plist) 或 Facebook 开发者应用程序中配置一些特殊的东西才能使其与 OS X 一起使用？还是我在代码中遗漏了什么？关于此的示例和教程似乎非常罕见：-/

我已经观看了关于 Twitter/Facebook 集成的 WWDC 2012 视频，但它几乎完全使用了我使用的代码。

任何帮助表示赞赏:-)

干杯，比约恩

**更新**
我解决了这个问题，我只是没有仔细阅读文档;-) 我必须将权限作为 NSArray 而不是作为字符串传递。我已将选项字典修改为如下所示：

`NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: FB_APP_ID, ACFacebookAppIdKey, [NSArray arrayWithObjects:@"read_stream", @"publish_stream", @"email", @"user_likes", nil], ACFacebookPermissionsKey, ACFacebookAudienceFriends, ACFacebookAudienceKey, nil];`

现在 OS X 显示一条警告，询问我是否要允许该应用代表我发布到 Facebook，我单击确定并出现一个新错误，导致无法访问 Facebook 帐户：

`Error Domain=com.apple.accounts Code=7 "The Facebook server could not fulfill this access request: The app must ask for a basic read permission at install time."`

我已经将权限修改为 just`email`或 just `user_likes`，但都导致了相同的错误。如果我只请求访问`read_stream`权限被授予但导致 OAuth 错误 190 并显示消息`Error validating access token: User XXXXXX has not authorized application XXXXXX.`

**更新 2：**
我现在解决了所有问题，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T16:00:10.107

好吧，我终于解决了:-)

当您首次请求访问用户 Facebook 帐户时，您只能向Facebook 权限参考中[“用户和朋友权限”下列出的用户请求权限。](https://developers.facebook.com/docs/authentication/permissions/)

一旦用户授予访问权限并同时在 Facebook 上安装了应用程序，您可以请求您的应用程序所需的任何其他权限。重要的是，您**不能**一个接一个地同时请求读取**和写入权限！**`read_stream`因此，在同一个请求中请求许可`publish_stream`将不起作用。

这基本上是我使用的代码：

```
self.store = [[ACAccountStore alloc] init];

ACAccountType *accType = [self.store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSMutableDictionary *options = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                    FB_APP_ID, ACFacebookAppIdKey,
                                    [NSArray arrayWithObjects:@"email", @"user_about_me", @"user_likes", nil], ACFacebookPermissionsKey, ACFacebookAudienceFriends, ACFacebookAudienceKey, nil];    

[self.store requestAccessToAccountsWithType:accType options:options completion:^(BOOL granted, NSError *error) {
    if (granted && error == nil) {
        self.accounts = self.store.accounts;    
        [options setObject:[NSArray arrayWithObjects:@"read_stream, read_mailbox, read_requests", nil] forKey:ACFacebookPermissionsKey];
        [self.store requestAccessToAccountsWithType:accType options:options completion:^(BOOL granted, NSError *error) {
            if (granted && error == nil) {
                completionHandler(granted, error);
            } else {
                NSLog(@"Access denied 2");
                NSLog(@"%@", [error description]);
            }
        }];
    } else {
        NSLog(@"Error: %@", [error description]);
        NSLog(@"Access denied");
    }
}]; 
```

希望这会对某人有所帮助:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T23:22:24.590

我想补充一点，Facebook 文档中有一个额外的警告：

```
// if a user has *never* logged into your app, you MUST include one of
// "email", "user_location", or "user_birthday".  Other read 
// permissions can also be included here. 
```

不这样做会导致同样的错误。

# jquery - 最后在 for 循环中添加 undefined

> ID：12526146
> 
> 赞同：1
> 
> 时间：2012-09-21T07:37:33.113
> 
> 标签：jquery, javascript

当我使用 for 循环和 json 对象填充下拉列表时，它会在最后的下拉列表中添加未定义的选项。

```
 for (var i in PriceRanges[purpose]) {
        var r = PriceRanges[purpose][i];
        html += '<option value="' + r.id + '">' + r.text + '</option>';
} 
```

PriceRanges 是我的 json 对象。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:40:35.093

只需检查像这样的未定义，然后添加

```
for (var i in PriceRanges[purpose])
 {
         var r = PriceRanges[purpose][i];
         if (typeof r != "undefined") 
         {
            if (typeof r.id != "undefined"
                  && typeof r.text != "undefined")
            html += '<option value="' + r.id + '">' + r.text + '</option>';
         }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:06:56.413

那是因为你还没有定义**var html** ，它将**等于 undefined** .. 所以当你将它附加到字符串时， undefined 仍然在连接的字符串中 ..

所以试试这个

```
var html = '';
for (var i in PriceRanges[purpose]) {
        var r = PriceRanges[purpose][i];
        html += '<option value="' + r.id + '">' + r.text + '</option>';
} 
```

这应该可以解决您的问题....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:22:28.057

为了安全起见，您应该*始终*`for in`检查循环中任何密钥的财产所有者：

```
for (var i in PriceRanges[purpose])
{
    if (PriceRanges[purpose].hasOwnProperty(i))
    {
        html += '<option value="' + PriceRanges[purpose][i].id + '">'
                + PriceRanges[purpose][i].text + '</option>';
    }
} 
```

但这在我看来确实像您正在迭代一个数组，在这种情况下： use `for`， not `for in`，因为数组的最后`i`一个`for in`将是 length 属性......

```
for (var i=0;i<PriceRanges[purpose].length;i++)
{
    html += '<option value="' + PriceRanges[purpose][i].id + '">'
            + PriceRanges[purpose][i].text + '</option>';
} 
```

当然，为了更加安全，你应该在两个循环中添加一个 if ：

```
if (PriceRanges[purpose][i].id && PriceRanges[purpose][i].text) 
```

避免使用不存在的属性（因此将返回未定义）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:20:40.370

我认为使用 jQuery 的 each 函数可以控制集合

```
var html = "";

$.each(PriceRanges.sale, function() {

        html += '<option value="' + this.id + '">' + this.text + '</option>';
}); 
```

# android - 如何动态获取我的 /res 文件夹中的图像

> ID：12526150
> 
> 赞同：0
> 
> 时间：2012-09-21T07:37:47.323
> 
> 标签：android, image, view

我正在尝试动态地从我的 /res 文件夹中获取图像，但我对下一部分感到困惑。我环顾 StackOverflow，看到了这个例子，这是我需要开始的：

```
String fName = "android.resource://j.l.library11/drawable/" + itemName; 
```

我想虽然它在我的 /res 文件夹中，但它会是：

```
String fName = "android.resource://j.l.library11/drawable/res/" + itemName; 
```

这2个中哪一个是正确的？

此外，我只是对接下来的几个步骤感到困惑，以达到可以使用 /res 文件夹（itemName）中的图像设置 ImageView（iView）的程度。我唯一能想到的就是：

```
File file = new File(fName); 
```

然后得到哈希码

```
int itemHashCode = file.HashCode() 
```

然后将其用作

```
iView.setImageResource(itemHashCode). 
```

那会起作用吗？或者有人知道正确的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:41:55.037

放置在 res/drawable 中的图像由 AAPT 自动编译为 R.java 类中的整数映射。您可以使用以下方法在 ImageView 上设置图像：

```
myImageView.setImageResource(R.drawable.nameOfYourImage); 
```

**编辑：**我不清楚你为什么要做你正在做的事情，但是使用图像的哈希码设置 ImageView 的资源会导致 ResourceNotFoundException。

**编辑：**如果您尝试能够根据与数据库中的某些数据的关联来动态设置图像，那么通过将 R.drawable.imagename 的 int 保存在数据库中的一个新整数列。然后，您可以简单地将图像设置为`setImageResource(intFromDB)`. 如果您没有在代码中设置数据库，因此无法访问已编译的 R.drawable，则另一种方法是：

```
Resources res = getResources();
String mDrawableName = "image_name";
int resourceId = res.getIdentifier(mDrawableName , "drawable", getPackageName());
Drawable drawable = res.getDrawable(resourceId);
icon.setImageDrawable(drawable ); 
```

甚至更短，这可能有效：

```
int id = getResources().getIdentifier("mypackagename:drawable/imageName", null, null);
imageView.setImageResource(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:48:29.930

我会反思：

```
Field[] fields = R.drawable.class.getFields();
for(Field field:fields){
    try {
            imageView.setImageResource(field.getInt(null));
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

# c++ - SSL - 多线程

> ID：12526151
> 
> 赞同：1
> 
> 时间：2012-09-21T07:37:52.103
> 
> 标签：c++, multithreading, ssl, https, openssl

要制作多线程 SSL Web 服务器（HTTPS），我们应该使用 SSL 上下文数组为每个客户端分配唯一的 SSL 上下文，还是可以为所有客户端使用相同的 SSL 上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:56:46.827

Use the same `SSLContext` for all clients. You use the `SSLContext` to create a `SSLServerSocketFactory`. That's all you need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T11:32:21.293

SSLContext 创建 SSLServerSocketFactory， SSLServerSocketFactory 创建 SSLServerSocket， SSLServerSocket 监听并接受 1 个特定端口，所以 1 个 tcp 端口只需要 1 个 SSLContext

# c++ - 将flex生成的代码放到一个普通的C++程序中

> ID：12526153
> 
> 赞同：1
> 
> 时间：2012-09-21T07:38:04.403
> 
> 标签：c++, c, bison, yacc, lex

我创建了一个简单的文件，使用 flex，它生成一个文件 lex.yy.c，现在，我想把它放到 C++ 程序中。

```
%{

 #include < stdio.h>

%}

%%

stop    printf("Stop command received\n");

start   printf("Start command received\n");

%% 
```

当我在命令行中输入 start 或 stop 时，会有一个输出。我想要做的是通过我的 C++ 程序提供输入，它的输出应该发送到我的程序中的一个变量，这可能吗？非常感谢！

我知道我发布的代码很简单，但我想象的结果是：

通过flex和bison创建c文件，我用它作为头文件，所以在c++程序中，我只需要调用一个函数`lex_yacc()`就可以使用它。前任。`lex_yacc()`是一个计算器，所以我向这个函数发送了一个带有变量的表达式，它会返回结果。我想在 C++ 程序中使用这个函数，我很困惑......非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:44:57.483

请参阅手册中有关[多个输入缓冲区](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html)的部分。尤其是关于`yy_scan_string`和的部分`yy_scan_bytes`。

对于“输出”，当您将“停止”或“开始”作为输入时，当然是“输出”，您明确地这样做（即`printf`调用）。您可以将任何您想要的代码放在那里。

# string - sed 替换第一行中的字符串

> ID：12526154
> 
> 赞同：17
> 
> 时间：2012-09-21T07:38:13.833
> 
> 标签：string, replace, sed

如何使用程序“sed”替换字符串，但只能在文件的第一行？

命令`s/test/blah/1`和`1s/test/blah/`似乎不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-21T12:24:43.093

这可能对您有用（GNU sed）：

```
sed -i '1!b;s/test/blah/' file 
```

只会在第一行替换第`test`一个`blah`。

或者，如果您只想*更改*第一行：

```
sed -i '1c\replacement' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:43:53.223

这将做到：

```
sed -i '1s/^.*$/Newline/' textfile.txt 
```

如果无法确保匹配仅对第一行是唯一的：

```
sed -i 's/this is line one and its unique/Changed line one to this string/' filename.txt 
```

该`-i`选项将更改写入文件，而不是仅将输出显示到标准输出。

编辑：

通过匹配公共字符串来替换整行将是：

```
sed -i 's/^.*COMMONSTRING$/Newline/' 
```

where`^`匹配行首，`$`匹配行尾，`.*`匹配所有内容`COMMONSTRING`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-24T11:32:01.030

这将替换所有匹配项，而不仅仅是第一个匹配项，当然仅在第一行中：

```
 sed -i '1s/test/blah/g' file 
```

**/g 完成了替换多个匹配项（如果存在**）的技巧。****

# bash - 重命名大量文件 Bash 的扩展名

> ID：12526157
> 
> 赞同：2
> 
> 时间：2012-09-21T07:38:22.690
> 
> 标签：bash, sed, awk

我想更改大量文件的扩展名，

示例：**“ABC.dat.length.doc.fasta”**

所需：**ABC.mat**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:43:41.240

您可以在循环中使用`bash`参数扩展：`for`

```
for file in *.length.doc.fasta
do
  mv "$file" "${file%dat.length.doc.fasta}"mat
done 
```

另一种方法：

```
for file in *.length.doc.fasta
do
  mv "$file" "${file%%.*}".mat
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:32:26.760

或者可以`bash`使用`awk`很少使用的命令行工具`rename`：

```
rename .dat.length.doc.fasta .mat *.dat.length.doc.fasta 
```

这会将第一个参数替换为所提供文件的第二个参数，即后续参数（此处由 的 shell 扩展表示`*.dat.length.doc.fasta`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:52:54.000

**prename**将为您轻松完成此操作。使用正则表达式来定位和重命名文件。

```
prename 's/(.*)\.dat\.length\.doc\.fasta/$1.mat/' *.dat.length.doc.fasta 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:05:05.867

您可以使用 AWK 在一行中完成：

```
ls -1 *.dat.length.doc.fasta | awk -F"." '{system("mv "$0" "$1".mat")}' - 
```

输入：

```
$ ls
ABC.dat.length.doc.fasta
ABCD.dat.length.doc.fasta
ABCDE.dat.length.doc.fasta
do_not_touch.txt 
```

输出：

```
$ ls
ABCDE.mat
ABCD.mat
ABC.mat
do_not_touch.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T10:54:39.753

```
ls -1 *.dat.length.doc.fasta | nawk '{p=$0;gsub("dat.length.doc.fasta","mat");system("mv "p" "$0); }' 
```

# python - numpy.array() 抛出异常（对不起最初可怕的标题）

> ID：12526159
> 
> 赞同：4
> 
> 时间：2012-09-21T07:38:23.740
> 
> 标签：python, numpy, duck-typing

我正在学习 Python 和 numpy，并且对鸭子类型的想法很陌生。我正在编写函数，某些东西/某人应该将一个 numpy 数组传递给这些函数。试图接受鸭子类型，我正在编写代码以使用`numpy.array`and`copy=`选项`ndmin=`将 array_likes 或 1d/0d 数组转换为我需要的形状。具体来说，我`ndmin=`在可以接受`(p,p)`数组或标量的情况下使用该选项；标量可以编码为`int`、`(1,)`数组、`(1,1)`数组、`[1]`列表等...

因此，为了解决这个问题，我使用了类似`S = numpy.array(S,copy=False,ndmin=2)`的方法来获取一个带有 right 的数组（如果可能的话）`ndim`，然后根据需要测试形状。我知道我应该将它嵌入到 Try-Except 块中，但找不到任何关于`numpy.array()`可能引发哪种异常的文档。因此，我目前只有这个：

```
# duck covariance matrix into a 2d matrix
try:
    S = numpy.array(S, ndmin = 2, copy=False)
except Exception as e:
    raise e 
```

我应该尝试在此处捕获哪些特定异常？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:51:05.093

将您的函数记录为接受 array_like 对象并将异常处理留给调用者。

`numpy.array()`是一个非常宽松的函数，它几乎可以转换为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:47:25.730

尝试使用[`np.asarray`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.asarray.html)将输入转换为数组。如果输入已经是 Numpy 数组，则保证不会复制任何内容。如果您希望接收`array`子类，请使用`np.asanyarray`.

请注意，许多 Numpy 接口并不关心输入是 1 维还是 2 维——例如，`np.dot`适用于 1 维和 2 维输入。最好保持这种状态——这样，标量乘法之类的东西*就可以工作了*。

# node.js - 在 node.js 中模拟数据库？

> ID：12526160
> 
> 赞同：84
> 
> 时间：2012-09-21T07:38:23.707
> 
> 标签：node.js, mongodb, unit-testing, mocking, database

我将如何模拟我的 node.js 应用程序中的数据库，在这种情况下，它`mongodb`用作博客 REST API 的后端？

当然，我可以将数据库设置为特定的`testing`数据库，但我仍然会保存数据并且不仅测试我的代码，还测试数据库，所以我实际上不是在进行单元测试而是进行集成测试。
那么一个人应该怎么做呢？创建数据库包装器作为应用程序和数据库之间的中间层并在测试时替换 DAL？

```
// app.js  
var express = require('express');
    app = express(),
    mongo = require('mongoskin'),
    db = mongo.db('localhost:27017/test?auto_reconnect');

app.get('/posts/:slug', function(req, res){
    db.collection('posts').findOne({slug: req.params.slug}, function (err, post) {
        res.send(JSON.stringify(post), 200);
    });
});

app.listen(3000); 
```

* * *

```
// test.js
r = require('requestah')(3000);
describe("Does some testing", function() {

  it("Fetches a blogpost by slug", function(done) {
    r.get("/posts/aslug", function(res) {
      expect(res.statusCode).to.equal(200);
      expect(JSON.parse(res.body)["title"]).to.not.equal(null);
      return done();
    });

  });
)); 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-21T08:17:44.317

我认为如果不使用数据库软件对其进行测试，就无法正确测试与数据库相关的代码。那是因为您要测试的代码不仅是 javascript，而且是数据库查询字符串。即使在您的情况下，查询看起来很简单，您也不能永远依赖它。

所以任何数据库模拟层都必须实现整个数据库（也许减去磁盘存储）。到那时，您最终会使用数据库模拟器进行集成测试，即使您将其称为单元测试。另一个缺点是，与数据库相比，数据库模拟器最终可能会出现一组不同的错误，并且您可能最终不得不为数据库模拟器和数据库编写代码（有点像 IE、Firefox 和 Chrome 等的情况。 ）。

因此，在我看来，正确测试代码的唯一方法是将其与真实数据库连接。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-09-25T09:39:56.113

关于模拟，有一个一般的经验法则是

不要嘲笑任何你不拥有的东西。

如果要模拟数据库，请将其隐藏在抽象服务层后面并模拟该层。然后确保您集成测试实际的服务层。

就我个人而言，我已经不再使用模拟进行测试，而是将它们用于自上而下的设计，帮助我从上到下推动开发，同时模拟服务层，然后最终实现这些层并编写集成测试。用作测试工具时，它们往往会使您的测试变得非常脆弱，并且在最坏的情况下会导致实际行为和模拟行为之间出现分歧。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-05-26T23:56:59.840

到目前为止，我不同意所选答案或其他答复。

如果您能够在进入 QA 之前捕获由对 DB 模式和您的代码所做的混乱且多次混乱的更改所产生的错误，那不是很棒吗？我敢打赌，大多数人会大喊是的！

您当然可以而且应该隔离和测试您的数据库模式。而且您不会基于模拟器或重图像或数据库和机器的重新创建来执行此操作。这就是像 SQLite 这样的东西的一个例子。您基于内存中轻量级实例运行并使用在内存实例中不会更改的静态数据来模拟它，这意味着您真正在隔离测试您的数据库，并且您也可以信任您的测试。显然它很快，因为它在内存中，是一个骨架，并且在测试运行结束时被废弃。

所以是的，您应该并且您应该测试导出到您正在使用的任何数据库引擎/运行时的非常轻量级的内存实例中的 SCHEMA，并且随着添加非常少量的静态数据成为您隔离的模拟数据库。

您可以定期（以自动方式）从真实数据库中导出真实模式，并在每次推送到 QA 之前将它们导入/更新到内存数据库实例中，您将立即知道数据库管理员或其他人是否完成了任何最新的数据库更改最近更改架构的开发人员破坏了所有测试。

虽然我为尽力回答的努力鼓掌，但如果可以的话，我会否决当前的答案，但我是新手，还没有建立足够的声誉来使我有能力这样做。

至于回答“不要嘲笑你不拥有的东西”的人。我认为他的意思是“不要测试你不拥有的任何东西”。但是你会嘲笑你不拥有的东西！因为那些不是需要隔离的东西！

我计划与您分享如何使用真实示例 JS 代码在未来的某个时间点更新这篇文章！

这是许多测试驱动团队一直在做的事情。你只需要了解如何。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-30T09:39:29.410

我对任何语言的 DB 代码进行单元测试的首选方法是通过 Repository 抽象访问 Mongo（这里有一个示例[http://iainjmitchell.com/blog/?p=884](http://iainjmitchell.com/blog/?p=884)）。实现会因暴露的 DB 特定功能而异，但通过从您自己的逻辑中删除所有 Mongo 代码，您就可以进行单元测试。只需将 Mongo Repository 实现替换为非常简单的存根版本即可。例如，只需将对象存储在一个简单的内存字典集合中。

您将获得以这种方式对自己的代码进行单元测试而不依赖于数据库的好处，但您仍然需要对主数据库进行集成测试，因为您可能永远无法像其他人那样模拟真实数据库的特质说到这里。我发现的事情就像在安全模式下索引与在没有安全模式下索引一样简单。具体来说，如果您有一个唯一索引，那么您的虚拟内存实现可能会在所有情况下都尊重这一点，但 Mongo 不会没有安全模式。

因此，虽然您仍然需要针对 DB 进行某些操作的测试，但您当然可以使用已存根的 Repository 实现正确地对您自己的逻辑进行单元测试。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-13T04:07:18.683

模拟的目的是跳过复杂性和单元测试自己的代码。如果您想编写 e2e 测试，请使用 db.

编写代码来设置/拆除用于单元测试的测试数据库是技术债务并且令人难以置信的不满意。

npm 中有模拟库：

蒙哥 - [https://www.npmjs.com/package/mongomock](https://www.npmjs.com/package/mongomock)

猫鼬 - [https://www.npmjs.com/package/mockgoose](https://www.npmjs.com/package/mockgoose)

如果那些不支持您需要的功能，那么是的，您可能需要使用真实的东西。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-04T07:58:23.830

我遇到了这个困境，并选择使用测试数据库并在每次测试开始时清理它。（如何删除所有内容：[https](https://stackoverflow.com/a/25639377/378594) ://stackoverflow.com/a/25639377/378594 ）

使用 NPM，您甚至可以创建一个测试脚本来创建 db 文件并在之后清理它。

# mysql - 在 Rails 中按月和年对记录进行分组

> ID：12526161
> 
> 赞同：19
> 
> 时间：2012-09-21T07:38:25.907
> 
> 标签：mysql, ruby, ruby-on-rails-3, group-by

我在 Ruby 1.9.2、Rails 3.0.x 上，我使用 MySQL DB。我有一个消息模型，每天都可以发布新消息。

我有一个索引操作，我想在其中显示按月和年分组的这些消息。这基本上用于过滤消息。

我的查询如下所示：-

```
@active_msgs = Messages.where('expiry > ?', Time.now).order('created_at DESC') 
```

在参考了[这篇文章后，我在 Rails 中使用了 group_by 函数](https://stackoverflow.com/questions/902974/grouping-by-week-month-etc-activerecord)

我的查询分组是：-

```
@msgs_by_month = @active_msgs.all.group_by {|u| u.created_at.month } 
```

我收到了一个名为@msgs_by_month 的哈希。这有助于我按月对消息进行分组，但我需要考虑年份，**以形成一个唯一的 key**，因为它可以帮助我区分例如 2011 年 9 月和 2012 年 9 月。

我当前的键只有 Hash[Month] 类型（例如 Hash[9] => 九月份，我可以显示所有适当的值）。我如何获得类型为月、年的唯一键，我可以轻松地循环显示按创建月和年分组的所有记录。

谢谢

**编辑**：-

我猜一种方法是使用[此处](http://api.rubyonrails.org/classes/Time.html)`created_at.to_date`提供的 api 。我只是想知道，我怎样才能去掉**一天**来获得一个可以**与 group_by 函数一起使用的****独特的**月份和年份**组合键**。**`created_at.to_date`**

 ******* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-21T07:54:27.407

在 SQL 中：

```
select * from messages group by year(created_at), month(created_at); 
```

在 Rails 中：

```
Message.all.group_by { |m| m.created_at.beginning_of_month } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T19:56:57.050

使用组日期。

它支持时区，因此如果您需要 - 代码将很容易演变。

[https://github.com/ankane/groupdate](https://github.com/ankane/groupdate)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-23T08:16:55.297

```
Message.select("date_trunc('month', created_at) as month").group("month") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-18T15:42:26.670

按年和月分组（例如，没有 2020 年 12 月和 2021 年 12 月）：

```
Message.group("date_trunc('year', created_at), date_trunc('month', created_at)") 
```

在 PostgreSQL 上测试

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-12T23:45:17.617

```
ModelName.all.group_by { |m| m.created_at.month } 
```

这将起作用，但是月份将作为索引返回。前任。11 月将指 11******

# c++ - OpenGL 无法正确渲染 .obj 文件

> ID：12526165
> 
> 赞同：3
> 
> 时间：2012-09-21T07:38:47.640
> 
> 标签：c++, opengl, glut, wavefront

我的任务是导入一个 obj 文件并在 C++ 中加载它。

它正确加载文件但不正确地显示它。任何人都可以看到我的 opengl 设置有什么问题吗？:)

这是渲染看起来像 atm 的图片

[![](../Images/479a678e9bbe50da358d9be23bbe5f42.png)](https://i.stack.imgur.com/A4r8r.png)

```
#define _USE_MATH_DEFINES
#include<stdio.h>
#include <GL/glew.h>
#include <GL/glut.h>
#include "InitShader.h"
#include <math.h>
#include "MatrixStack.h"
#include "Object.h"
#include <time.h>

#define BUFFER_OFFSET( offset )   ((GLvoid*) (offset))
float x = 1.0;
const int NumVertices = 144;
const int NumIndicies = 104;
GLfloat  vertices[NumVertices];

// RGBA olors
GLfloat vertexColours[NumVertices];

// each entry is an index into the vertices matrix
GLint vertexIndicies[NumIndicies];

//GLfloat vertices2[NumVertices];

// RGBA olors
//GLfloat vertexColours2[NumVertices];

// each entry is an index into the vertices matrix
//GLint vertexIndicies2[NumIndicies];

GLuint vao;
GLuint program;
GLuint buffers[2];
GLfloat radius = 1.0;

GLfloat theta = 0.0;
GLfloat phi = 0.0;

const GLfloat  dr = 5.0 * M_PI/180.0;

// Projection transformation parameters

GLfloat  left2 = -1.0, right2 = 1.0;
GLfloat  bottom = -1.0, top = 1.0;
GLfloat  zNear = 0.5, zFar = 3.0;

GLuint  modelView;  // model-view matrix uniform shader variable location
GLuint  projection; // projection matrix uniform shader variable location

MatrixStack modelViewStack(5);
MatrixStack projectionStack(5);
// OpenGL initialization
void
init()
{
        srand ( time(NULL) );
        Object myst("assignment1.obj");
        float *tempFloat = myst.verts();
        float *tempFloat2 = myst.indis();
        for (unsigned int i=0; i<NumVertices; vertices[i]=tempFloat[i],i++);
        for (unsigned int i=0; i<NumIndicies; vertexIndicies[i]=tempFloat2[i],i++);
        for (unsigned int i=0; i<NumVertices;i++){
            float a = (float)(rand()%10);
            a = a/10;
            cout << a;
            vertexColours[i]=a;
        }
        for (unsigned int i=0; i<NumVertices; cout << vertices[i] << endl ,i++);
        for (unsigned int i=0; i<NumIndicies; cout << vertexIndicies[i] << endl ,i++);
        glEnable( GL_DEPTH_TEST );
        //make background yerpul in colour
        glClearColor( 0.235,  0.194,  0.314, 1.0 );

        // Load shaders and use the resulting shader program
        program = InitShader( "vshader41.glsl", "fshader41.glsl" );
        glUseProgram( program );

        // Create a vertex array object
        glGenVertexArrays( 1, &vao );
        glBindVertexArray( vao );

        // Create and initialize two buffer objects
        glGenBuffers( 2, buffers);

        //one buffer for the vertices and colours
        glBindBuffer( GL_ARRAY_BUFFER, buffers[0]);
        glBufferData( GL_ARRAY_BUFFER, sizeof(vertices) + sizeof(vertexColours),NULL, GL_STATIC_DRAW );
        glBufferSubData( GL_ARRAY_BUFFER, 0, sizeof(vertices), vertices );
        glBufferSubData( GL_ARRAY_BUFFER, sizeof(vertices), sizeof(vertexColours), vertexColours);

        //one buffer for the indices
        glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, buffers[1]);
        glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof(vertexIndicies),vertexIndicies, GL_STATIC_DRAW );

        // set up vertex arrays
        GLuint vPosition = glGetAttribLocation( program, "vPosition" );
        glEnableVertexAttribArray( vPosition );
        glVertexAttribPointer( vPosition, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0) );

        GLuint vColor = glGetAttribLocation( program, "vColor" );
        glEnableVertexAttribArray( vColor );
        glVertexAttribPointer( vColor, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(sizeof(vertices)) );

        modelView = glGetUniformLocation( program, "model_view" );
        projection = glGetUniformLocation( program, "projection" );

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
        glBindVertexArray(0);
        }

//----------------------------------------------------------------------------

void
display( void )
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    modelViewStack.loadIdentity();
    modelViewStack.lookAt(radius*sin(theta)*cos(phi),
            radius*sin(theta)*sin(phi),
            radius*cos(theta),
            0.0,0.0,0.0,
            0.0,1.0,0.0);

    glUniformMatrix4fv(modelView, 1, GL_FALSE, modelViewStack.getMatrixf());

    projectionStack.loadIdentity();
    projectionStack.ortho(left2,right2,bottom,top,zNear,zFar);

    glUniformMatrix4fv(projection, 1, GL_FALSE, projectionStack.getMatrixf());

    glBindVertexArray(vao);
    glBindBuffer(GL_ARRAY_BUFFER, buffers[0]);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, buffers[1]);
    //Indexing into vertices we need to use glDrawElements
    glDrawElements (GL_TRIANGLES, NumIndicies, GL_UNSIGNED_INT, 0);
    glutSwapBuffers();
}

//----------------------------------------------------------------------------

void keyboard( unsigned char key, int x, int y )
{
    switch( key ) {
        case 033: // Escape Key
        case 'q': case 'Q':
        exit( EXIT_SUCCESS );
        break;

        case 'x': left2 *= 1.1; right2 *= 1.1; break;
        case 'X': left2 *= 0.9; right2 *= 0.9; break;
        case 'y': bottom *= 1.1; top *= 1.1; break;
        case 'Y': bottom *= 0.9; top *= 0.9; break;
        case 'z': zNear  *= 0.9; zFar *= 1.1; break;
        case 'Z': if (zNear<zFar){zNear *= 1.1; zFar *= 0.9;} break;
        case 'r': radius *= 2.0; break;
        case 'R': radius *= 0.5; break;
        case 'o': theta += dr; break;
        case 'O': theta -= dr; break;
        case 'p': phi += dr; break;
        case 'P': phi -= dr; break;

        case ' ':  // reset values to their defaults
        left2 = -1.0;
        right2 = 1.0;
        bottom = -1.0;
        top = 1.0;
        zNear = -1.0;
        zFar = 1.0;

        radius = 1.0;
        theta  = 0.0;
        phi    = 0.0;
        break;
  }

  glutPostRedisplay();
}
//----------------------------------------------------------------------------
void idle(){
    theta += .001;

    left2 += .0001;

    glutPostRedisplay();
}
//----------------------------------------------------------------------------
void
reshape( int width, int height )
{
    glViewport( 0, 0, width, height );
}

//----------------------------------------------------------------------------

int
main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH );
    glutInitWindowSize( 512, 512 );
    glutCreateWindow( "Orbit the Color Cube - Orthographic" );

    glewInit();

    init();
    glutIdleFunc(idle);
    glutDisplayFunc( display );
    glutKeyboardFunc( keyboard );
    glutReshapeFunc( reshape );

    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:16:03.817

.obj 文件中面的顶点索引从 1 开始，而不是预期的 0。加载文件时尝试将每个索引减少 1。如果我正确阅读了您的代码，则此行：

`for (unsigned int i=0; i<NumIndicies; vertexIndicies[i]=tempFloat2[i],i++);`

应该

`for (unsigned int i=0; i<NumIndicies; vertexIndicies[i]=tempFloat2[i] - 1,i++);`

# php - 奇怪的锚标签行为

> ID：12526168
> 
> 赞同：1
> 
> 时间：2012-09-21T07:38:50.787
> 
> 标签：php, jquery, html, codeigniter, anchor

在我看来，我正在这样做：

```
<?php if($user_can_write) {?>
<a href=<?php echo base_url('backend_controllers/users/foo')?> style="text-decoration:none">
Add</a>
<?php } ?> 
```

我从我的控制器传递变量 $user_can_write ，这是我的访问控制实现，**奇怪的部分**是每当我刷新这个页面，即这个视图，锚标记被执行，即，用户控制器中的 foo 函数被调用并执行，每次！基本上 foo 函数将 db 增加一行（将行添加到 db），所以这对我来说真的不切实际，每次刷新时锚标记都会执行

现在，如果我在视图中执行此实现（替代方法）：

```
<?php if($user_can_write) {?>
<a href='javascript:void(0);' onclick="on_click_method_for_anchor()" style="text-decoration:none">
Add</a>
<?php } ?> 
```

在我的 javascript 中，我进一步这样做：

```
function on_click_method_for_anchor(){
$.ajax({
            url: '<?php echo base_url('backend_controllers/user/foo'); ?>',            
            type: 'POST',
            success: function(result){                
                $('.my_span_tag_class').html(result)
            }
        }); 
```

这似乎很完美，即使我重新加载页面，也不会调用 foo，有人可以告诉我为什么**锚标签会这样**吗？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:13:04.967

我认为您错过了锚标记的 href 属性之后的“”部分。

```
<?php if($user_can_write) {?>
<a href="<?php echo base_url('backend_controllers/users/foo')?>" style="text-decoration:none">
Add</a>
<?php } ?> 
```

试试这个。我想会好的

# foursquare - 无效的广告系列缺少 pageid 0

> ID：12526171
> 
> 赞同：0
> 
> 时间：2012-09-21T07:38:57.717
> 
> 标签：foursquare

我正在尝试检索广告系列，但我收到“**无效的广告系列**505a03ede4b022fe1d3c3c6e **missing pageid 0** ”。此 API 调用之前有效。该运动也存在。用于检索活动详细信息的 API 文档也没有更改[https://developer.foursquare.com/docs/campaigns/campaigns](https://developer.foursquare.com/docs/campaigns/campaigns)。我可以知道要提供的正确参数吗？

请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:35:04.293

访问此 URL (https://developer.foursquare.com/docs/explore#req=simulate/campaigns/4e0deba2922e6f94b1410b79) 查看有效活动响应的示例。确保该活动存在于foursquare.com 上。除了有效的广告系列 ID，您不需要任何参数。确保您使用的是活动的 ID，而不是场地。

# javascript - 在 BoilerplateJS 中传递 KnockoutJS 视图模型

> ID：12526176
> 
> 赞同：2
> 
> 时间：2012-09-21T07:39:15.907
> 
> 标签：javascript, boilerplatejs

嵌套组件也预设了嵌套视图模型。

但是，在示例组件中，我没有看到这种依赖关系出现（除了 BackboneJS TODO 应用程序，它对于 KO 用户来说不是很清楚）。

您能否详细说明如何进行这样的设计，例如对于收藏：

*   `ItemViewModel`具有属性`Name`和`IsSelected`
*   `CollectionViewModel`with 有一个`Items`属性，它包含一个集合，`ItemViewModel`它`SelectedCount`是通过计算选择了多少项目来计算的。（我知道这可以用 KO 以更简单的方式完成，但为了说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:39:57.727

Viewmodels（VM）*只是对象*（使用 绑定`ko.applyBindings()`） - 这意味着您可以任意将 VM 嵌套到父对象中（@Hasith 所说的）。您只需将*一个*父对象传递回样板。忍受一些超注释代码：

```
// Let's assume you have your items nicely formatted in an array 
// data source (and technically the objects in this array can be 
// considered 'dumb' viewmodels)
var items = [
  {Name:'a',isSelected:false}, 
  {Name:'b',isSelected:true}
  ]

// We can apply some bindings to make 'smarter' viewmodels
// One approach is just to map using rocking KO mapping plugin
var koMapItems = ko.mapping.fromJS( items )

// You could skip the mapping plugin and go for broke
// creating your own VM mappings manually
// (you could do this using the mapping plugin with less work)
var goforbrokeVM = function( item )
{
  var _name = ko.observable( item.Name )
  var _dance = function() { return _name+' is space monkey' }

  return {
    Name: _name,
    isSelected: ko.observable( item.isSelected ),
    spaceMonkey: _dance
  }
}
// Don't forget to assign and create your goforbrokeVMs
var epicItemVMs = []
for (var i=0;i<items.length;i++) 
  epicItemVMs.push( new goforbrokeVM( items[i]) )

// Now the interesting part, lets create a 'child' VM that
// we can embed in another VM. Notice this VM has as a
// property an array of VMs itself.
var childVM = {
  elements: epicItemVMs,
  // A sub method, because we can
  otherMethod: function() { return 'wat' }
}

// And ultimately our 'master' VM with its own properties
// including the nested child VM we setup above (which you'll
// remember contains its own sub VMs)
var ParentVM = {
  // And its own property
  parentPropA: ko.observable('whatever'),

  // Oooow look, a list of alternative ko.mapping VMs
  simpleMappedItems: koMapItems,

  // And a nested VM with its own nested goforbrokeVMs
  nested: childVM
}

// Apply your master viewmodel to the appropriate DOM el.
ko.applyBindings( ParentVM, document.getElementById('items')) 
```

还有你的 HTML：

```
<div id="items">
  <span data-bind="text: parentPropA"></span>

  <!-- Step through one set of items in ParentVM -->
  <div data-bind="foreach: simpleMappedItems">
    <input type="checkbox" data-bind="checked: isSelected">
    <span data-bind="text: Name"></span>
  </div>

  <!-- Or jump into the nested models and go crazy -->
  <!-- ko with: nested -->
    <div data-bind="foreach:elements">
      <div data-bind="text: spaceMonkey"></div>
    </div>
    <div data-bind="text: otherMethod"></div>
  <!-- /ko -->
</div> 
```

通过这种方式，您可以将单个对象（在本例中`ParentVM`）传递给带有尽可能多的嵌套视图模型的样板。

用于淘汰赛的映射插件信息在这里：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T08:58:38.630

'todo' 示例是通过采用 Addy Osmani 的实现来完成的。[这里](https://github.com/addyosmani/todomvc/tree/gh-pages/architecture-examples/knockoutjs)也有一个 knockoutjs 的实现。

# c# - 我们如何使用两个不同的数据库在 linq 中进行子查询

> ID：12526177
> 
> 赞同：-1
> 
> 时间：2012-09-21T07:39:19.870
> 
> 标签：c#, linq-to-sql

我是 Linq 的新手。我面临一种情况，我必须使用同一服务器的两个不同的数据库表在 LINQ 中进行子查询。

这是我的 sql 查询：

```
SELECT * FROM DB1.dbo.tbl_inv_emoheader where bln_export = 1 and 
str_destbranch in (SELECT systemcode from DB2.dbo.system_contact where    isnull(rovctrlvan_email,'')!='') 
```

这对我来说可以。

**问题 ：**

我想在 Linq 中进行上述查询。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:05:03.750

在花了一些时间之后，我得到了答案

```
 List<tbl_inv_emoheader> CheckMsgid = (from EMOheader in InvData.tbl_inv_emoheaders
                                                  where (EMOheader.bln_export == true && (from i in GetEmail() select i).Contains(EMOheader.str_destbranch))
                                                  select EMOheader).ToList();

private static IEnumerable<string> GetEmail()
    {
        List<string> strEmails;
        using (SharedSynchDataContext dc = new SharedSynchDataContext(Connections.Getencompass3()))
        {
            strEmails= (from l in dc.system_contacts
                    where (l.rovctrlvan_email != string.Empty)
                    select l.systemcode).ToList();
        }
        return strEmails;
    } 
```

# c++ - 在opencv中找到凸性缺陷？[根据给定的输入图像崩溃..]

> ID：12526179
> 
> 赞同：5
> 
> 时间：2012-09-21T07:39:33.187
> 
> 标签：c++, c, image-processing, opencv, convex-hull

我有一个计算图像凸包的程序。我正在尝试使用此信息来计算输入图像中存在的*手指数量。*从一些冲浪中我发现这样做（数手指）的方法是

1.  寻找轮廓
2.  凸包
3.  凸缺陷

但是我在使用凸度缺陷函数时遇到了麻烦。它编译得很好，但在运行时程序会因某些输入图像而崩溃，但不会因其他输入图像而崩溃，我似乎无法弄清楚原因。

这些是输入图像

1.  [此](http://i50.tinypic.com/28mps1k.jpg)图像导致崩溃
2.  但[事实](http://i46.tinypic.com/x1dlvq.jpg)并非如此。
3.  即使它与上述类似，[这也会导致崩溃](http://i50.tinypic.com/15q6sdi.jpg)

代码..

```
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <opencv/cxcore.h>
#include <stdio.h>

#define CVX_RED     CV_RGB(0xff,0x00,0x00)
#define CVX_GREEN   CV_RGB(0x00,0xff,0x00)
#define CVX_BLUE    CV_RGB(0x00,0x00,0xff)

int main(int argc, char* argv[]) {

  cvNamedWindow( "original", 1 );
  cvNamedWindow( "contours", 1 );
  cvNamedWindow( "hull", 1 );
  IplImage* original_img = NULL;

  original_img = cvLoadImage("img.jpg", CV_LOAD_IMAGE_GRAYSCALE );

  IplImage* img_edge = cvCreateImage( cvGetSize(original_img), 8, 1 );
  IplImage* contour_img = cvCreateImage( cvGetSize(original_img), 8, 3 );
  IplImage* hull_img = cvCreateImage( cvGetSize(original_img), 8, 3 );

  cvThreshold( original_img, img_edge, 128, 255, CV_THRESH_BINARY );

  CvMemStorage* storage = cvCreateMemStorage();
  CvSeq* first_contour = NULL;

  int Nc = cvFindContours(
     img_edge,
     storage,
     &first_contour,
     sizeof(CvContour),
     CV_RETR_LIST // Try all four values and see what happens
  );

  for( CvSeq* c=first_contour; c!=NULL; c=c->h_next ) {
     cvCvtColor( original_img, contour_img, CV_GRAY2BGR );
     cvDrawContours(
        contour_img,
        c,
        CVX_RED,  
        CVX_BLUE,
        0,     
        2,
        8
     );
  }

  //----------------------------------------------------------------------Convex Hull

  CvMemStorage* hull_storage = cvCreateMemStorage();
  CvSeq* retHulls = NULL;

  for(CvSeq* i = first_contour; i != NULL; i = i->h_next){
    retHulls = cvConvexHull2(i,hull_storage,CV_CLOCKWISE,0); 
    // with 1 it draws the Hull image but not with 0..?
    // however it needs to be 0 for convexitydefects to work?
  }

  printf(" %d elements:\n", retHulls->total );

  // drawing hull

  for( CvSeq* j=retHulls; j!=NULL; j=j->h_next ) {
    cvCvtColor( original_img, hull_img, CV_GRAY2BGR );
    cvDrawContours(
        hull_img,
        j,
        CVX_RED,  
        CVX_BLUE,
        0,        
        2,
        8
     );  

  }

  //----------------------------------------------------------------------Convexity Defects??

  CvMemStorage* convexStorage = cvCreateMemStorage();
  CvSeq* defect = NULL;
  defect = cvConvexityDefects(first_contour,retHulls, convexStorage);
  printf(" %d defect:\n", defect->total );

  cvShowImage( "contours", contour_img );
  cvShowImage( "original", original_img );
  cvShowImage( "hull", hull_img );
  cvWaitKey(0);
  cvDestroyWindow( "contours" );
  cvDestroyWindow( "original" );
  cvDestroyWindow( "hull" );
  cvReleaseImage( &original_img );
  cvReleaseImage( &contour_img );
  cvReleaseImage( &hull_img );
  cvReleaseImage( &img_edge );
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:29:40.037

使用有问题的图像运行您的应用程序会冻结它，但我发现 OpenCV 2.4.2 没有崩溃，问题确实发生在`cvConvexityDefects()`，根据`gdb`：

```
(gdb) bt
#0  0x00000001002b1491 in cvConvexityDefects ()
#1  0x0000000100001a8d in main () 
```

不过不能告诉你为什么。由于参数似乎没问题，您可能想在[此处注册一个新问题](http://code.opencv.org/projects/opencv/issues)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T08:49:41.280

`cvConvexityDefects`期望`convexHull`序列（第二个参数）包含序列（第一个参数）的索引`contour`：

> 使用 ConvexHull2 获得的凸包应该包含指向轮廓点的指针或索引，而不是包点本身

1.  在最简单的情况下， where`cvFindContours`返回一个简单的轮廓（您的第二张图像），您很幸运，您的代码将提供正确的序列作为第一个参数。

2.  如果`cvFindContours`在轮廓中发现孔（您的第三张图像），或者如果有几个简单的轮廓或带有孔的轮廓（您的第一张图像）您的代码：

    1.  依次找到每个轮廓的凸包，但只记住最后一个（因为循环的每次迭代都会覆盖`retHulls`变量）

    2.  将与 中的索引不对应的轮廓的整个层次结构传递`retHulls`给`cvConvexityDefects`作为第一个参数。

相反，您应该拥有：

1.  传递`CV_RETR_EXTERNAL`给`cvFindContour`只得到外部轮廓（你不关心孔的缺陷）

2.  移动了`cvConvexityDefects`最后一个循环的内部。

就像是：

```
 /* ... */

  if (argc < 2) {
      std::cerr << "Usage: convexity IMAGE\n";
      exit(1);
  }

  cvNamedWindow( "original", 1 );
  cvNamedWindow( "contours", 1 );
  cvNamedWindow( "hull", 1 );
  IplImage* original_img = NULL;

  original_img = cvLoadImage(argv[1], CV_LOAD_IMAGE_GRAYSCALE );

  IplImage* img_edge = cvCreateImage( cvGetSize(original_img), 8, 1 );
  IplImage* contour_img = cvCreateImage( cvGetSize(original_img), 8, 3 );
  IplImage* hull_img = cvCreateImage( cvGetSize(original_img), 8, 3 );

  cvThreshold( original_img, img_edge, 128, 255, CV_THRESH_BINARY );

  CvMemStorage* storage = cvCreateMemStorage();
  CvSeq* first_contour = NULL;

  int Nc = cvFindContours(
     img_edge,
     storage,
     &first_contour,
     sizeof(CvContour),
     CV_RETR_EXTERNAL // Try all four values and see what happens
  );

  cvCvtColor( original_img, contour_img, CV_GRAY2BGR );
  for( CvSeq* c=first_contour; c!=NULL; c=c->h_next ) {
     cvDrawContours(
        contour_img,
        c,
        CVX_RED,
        CVX_BLUE,
        0,
        2,
        8
     );
  }
  cvShowImage( "contours", contour_img );

  //----------------------------------------------------------------------Convex Hull
  //-------------------------------------------------------------------Convex Defects

  CvMemStorage* hull_storage = cvCreateMemStorage();
  CvSeq* retHulls = NULL;

  cvCvtColor( original_img, hull_img, CV_GRAY2BGR );
  for(CvSeq* i = first_contour; i != NULL; i = i->h_next){
    retHulls = cvConvexHull2(i,hull_storage,CV_CLOCKWISE,0);
    printf(" %d elements:\n", retHulls->total );

    CvSeq* defect = NULL;
    defect = cvConvexityDefects(i,retHulls, NULL); // reuse storage of the contour
    printf(" %d defect:\n", defect->total );

    // drawing hull.... you can't use the one returned above since it only
    // contains indices
    retHulls = cvConvexHull2(i,hull_storage,CV_CLOCKWISE,1);
    cvDrawContours(
        hull_img,
        retHulls,
        CVX_RED,
        CVX_BLUE,
        0,
        2,
        8
     );
  }

  cvShowImage( "hull", hull_img );
  /* ... */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-25T13:05:00.843

使用 Python 3 和 opencv 4.5.1，我遇到了一个类似的问题，即来自 convexHull() 的索引“不单调”。我发现由于某种原因，从这个函数返回的索引是乱序的。

为了解决这个问题，我只是在将索引传递给convexityDefects() 之前按降序对numpy 数组进行了排序。

```
hull = cv2.convexHull(contours, returnPoints=False)
hull[::-1].sort(axis=0)
defects = cv2.convexityDefects(contours, hull) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-09T00:18:09.963

我以前见过这个问题，那是我将 MAT 与 OpenCV 4.4.0 一起使用时，我猜崩溃是因为这个错误而发生的。

“凸包指数不是单调的，这可能是在输入轮廓包含函数‘convexityDefects’中的自相交的情况下。

当您详细阅读崩溃报告时，解决方案很简单，即索引未按顺序排序，可能是因为轮廓中有一些自相交，（或者它可能是自 2.1 版修复以来的故障在 3.2 版上，然后再次返回 4.4.0 检查：
[https ://github.com/opencv/opencv/issues/4539](https://github.com/opencv/opencv/issues/4539)

因此，为了避免对这个问题产生太多怀疑，我通过在从轮廓中提取缺陷之前利用自身的船体索引来解决它。

如您所见，船体索引是倒置排序的，就好像船体单元大小为 6 一样，这意味着该单元中的索引将是：

```
[0] = 5
[1] = 4
[2] = 3
[3] = 2
[4] = 1
[5] = 0 
```

但是由于交叉点或其他一些原因，它可能不会按预期排序，例如：

```
[0] = 6
[1] = 5
[2] = 4
[3] = 2
[4] = 1
[5] = 0 
```

所以我们需要做的就是使用它检查这段代码

```
vector <vector <Vec4i> > defects(contour.size());  // Defects Vectors
vector <vector <cv::Point> > hullsP(contour.size()); // Hulls contour points
vector <vector <int> > hullsI(contour.size()); // Indices to hulls contour points

for(int i = 0; i < contour.size(); i++)
{
    convexHull(contour[i], hullsP[i], CV_CLOCKWISE, false);
    convexHull(contour[i], hullsI[i], CV_CLOCKWISE, false);

    for(size_t k =0; k < hullsI[i].size(); k++) //Here we resort the indices
    {
        if (hullsI[i].size() > 0)
        {
            hullsI[i][k] = (int)((hullsI[i].size() - k)-1);
        }
    }

    if(hullsI[i].size() > 3 ) // You need more than 3 indices
    {
        convexityDefects(contour[i], hullsI[i], defects[i]);
    }
} 
```

# android - 似乎 ApplicationInfo.FLAG_UPDATED_SYSTEM_APP 无法正常工作

> ID：12526184
> 
> 赞同：3
> 
> 时间：2012-09-21T07:40:09.387
> 
> 标签：android

我尝试在更新之前跟踪系统应用程序并使用：

```
public static boolean isSystemApplication(Context ctx, IContent content) {
    android.content.pm.PackageManager pm = ctx.getPackageManager();
    List<android.content.pm.ApplicationInfo> apps = pm.getInstalledApplications(0);
    for (android.content.pm.ApplicationInfo app : apps) {
        if (app.packageName.equals(content.getContentPackage())) {
            return (app.sourceDir.startsWith("/system/app/") && ((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP ) != 1));
        }
    }
    return false;
} 
```

但似乎 (app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP ) != 1) 总是返回 true，即使系统应用程序已更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:47:48.663

如果系统应用程序有更新，两者都`(app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP ) != 0)`将`(app.flags & ApplicationInfo.FLAG_SYSTEM ) != 0)`返回 true。

# .net - 在多行文本框上拦截返回键，防止关闭对话框

> ID：12526185
> 
> 赞同：1
> 
> 时间：2012-09-21T07:40:10.650
> 
> 标签：.net, winforms, events

我有一个 .net WinForm 对话框，它显示一些 TextBoxes（其中一些是*Multiline*）、一个标记为*AcceptButton*的按钮和一个标记为*CancelButton*的按钮。

当您按下返回键时，*AcceptButton*的 onClick 事件被触发并且对话框关闭。

问题是即使用户尝试在多行文本框中插入新段落，也会触发 onClick 事件。防止表单关闭的唯一方法是按 CTRL + Return。

这显然是 WinForm TextBox 控件的一个错误。例如，DataGridView 正确地捕获了 Return 键并且不会将其传递给 WinForm 对话框。

Treid *Select()*，*Focus()*，覆盖*PreProcessMessage*，*ProcessKeyMessage*（奇怪的是甚至不触发）。没运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:58:56.707

我笨！

TextBox 有一个名为*AcceptReturn*的布尔属性。

我认为它应该在检查*Multiline*时由 VS 自动检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:50:23.077

*我解决了在接受按钮*的 onClick 事件处理程序中检查焦点状态 + ReturnKey 状态

 *```
If (UdaNoteTextBox.Focused) Then
    Dim returnKey As NullFX.Win32.KeyStateInfo = NullFX.Win32.KeyboardInfo.GetKeyState(Keys.Enter)
    If (returnKey.IsPressed) Then
        Dim caretFinalPos As Int32 = UdaNoteTextBox.SelectionStart + 2
        UdaNoteTextBox.Text = UdaNoteTextBox.Text.Substring(0, UdaNoteTextBox.SelectionStart) + vbCrLf + UdaNoteTextBox.Text.Substring(UdaNoteTextBox.SelectionStart + UdaNoteTextBox.SelectionLength)
        UdaNoteTextBox.SelectionStart = caretFinalPos
        UdaNoteTextBox.SelectionLength = 0
        UdaNoteTextBox.ScrollToCaret()
        Return
    End If
End If 
```

为了检查 ReturnKey 状态，我使用了这个类，它导入了旧的 User32.dll，因为这个函数在 .net 框架中似乎不存在。

[http://sanity-free.com/17/obtaining_key_state_info_in_dotnet_csharp_getkeystate_implementation.html](http://sanity-free.com/17/obtaining_key_state_info_in_dotnet_csharp_getkeystate_implementation.html)*

# java - 如何根据用户提供的字段创建字段？

> ID：12526188
> 
> 赞同：2
> 
> 时间：2012-09-21T07:40:23.343
> 
> 标签：java, oop, design-patterns, optimization

在我的程序中；我有一个对象，它存储姓名、描述、他/她说的语言、创建时、地址、声誉。但是必须有的字段是名称、描述、语言，其他的不是强制性的。我不想写两个方法，让用户选择一个，根据使用情况使其他字段为空，例如；

```
inside of constructor(name, description, languages) {
    this.name = name;
    this.description = description;
    this.languages = languages;
    this.address = " ";
    this.reputation = " ";
}

inside of constructor(name, description, languages, address, reputation) {
    this.name = name;
    this.description = description;
    this.languages = languages;
    this.address = address;
    this.reputation = reputation;
} 
```

那么我该如何解决这个问题呢？有没有办法可以根据用户提供的字段创建字段？

我正在使用java。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:51:14.493

更好的选择是为变量提供 getter setter 方法，以便用户只能调用那些为必填字段设置值的方法。所以尝试创建一个 Bean 类映射到表单，字段映射到变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:39:04.887

请查看以下解释 Builder 模式的 URL。

[https://stackoverflow.com/a/1953567/705315](https://stackoverflow.com/a/1953567/705315)

~HTH

PS：无法评论您的问题。因此发布作为答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:55:36.417

You can make a constructor with a variable number of arguments:

```
public class VarArg {
    public VarArg(String ... args)
    {
        String a = args[0];
        String b = args[1];
    }

    public static void main(String[] args)
    {
        VarArg arg1 = new VarArg("hello");
        VarArg arg2 = new VarArg("hello","goodbye");
    }
} 
```

But I would probably use a Map with named keys as the parameter to your constructor (as suggested by mauhiz above).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:56:57.227

The [java compiler API](http://www.javabeat.net/articles/73-the-java-60-compiler-api-1.html) allows you to invoke the Java compiler with source code that you can specify at runtime in another java program. Probably not what you are looking for, but it is possible to create a class with fields the user specifies at runtime to answer your question. I can provide an example if you want.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:46:14.230

Java 中的参数没有“默认值”，因此您必须提供 2 个构造函数（一个可以调用另一个）。

如果您的字段非常动态，那么使用 Map<String, String> 作为单个参数怎么样？这通常不是一个漂亮的模式，但它可能适合您的用例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T07:45:03.560

要拥有一组不同的字段，您需要一个不同的类。如果您希望使用工厂或构建器来执行此操作，您可以为每个组合生成一个类（我以前做过，但并不简单；）但我会创建一个包含所有可能字段的类并使用它。

# c# - 在 System.Security.Cryptography 中找不到“DataProtectionScope”和“ProtectedData”类

> ID：12526189
> 
> 赞同：18
> 
> 时间：2012-09-21T07:40:28.117
> 
> 标签：c#, visual-studio-2010, cryptography

我已经按照[本文](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dataprotectionscope%28v=vs.100%29.aspx)`System.Security.dll`中的描述引用了该文件，但根据我的 IDE，可以安全地删除该行，因为它没有被使用。`using System.Security.Cryptography;`

同一个 IDE 告诉我，我在使用`DataProtectionScope`and时遇到了错误`ProtectedData`。那些应该在**那个**命名空间中。但是，当我点开包裹时，我看不到它们。

文章错了吗？如何访问这两个类？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-08-16T21:07:17.327

正如@Coral Doe 在@Dave Lucre 下的评论中提到的那样：

> “有一个类似的问题，这很有效。使用 System.Security.Cryptography；在我为特定框架引用 System.Security.dll 之前，我没有 [显示] [ProtectedData] 和 ProtectedMemory。”

这为我解决了这个问题。具体来说，我执行了以下步骤：

1.  在 Visual Studio 中打开项目。
2.  在解决方案资源管理器中右键单击项目名称，然后选择属性。
3.  单击左侧的“参考”选项卡。
4.  单击添加按钮。
5.  单击 .NET 选项卡。
6.  选择 System.Security 并单击 OK 添加引用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-30T22:38:21.043

我在这里引用了 System.Security.dll：`C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Security.dll`

已添加 `using System.Security.Cryptography;`，我可以同时看到`DataProtectionScope`和`ProtectedData`。

我的目标是 .net 4.0 完整框架（不是客户端配置文件）。

你的目标是什么框架？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-05T14:56:28.080

除了`System.Security.Cryptography`.

它是[https://www.nuget.org/packages/System.Security.Cryptography.ProtectedData/](https://www.nuget.org/packages/System.Security.Cryptography.ProtectedData/)。

之后，`System.Security.Cryptography`就被“使用”了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T14:24:44.877

正如@Dave Lucre 所问，您的应用程序的目标是什么框架？默认情况下，Visual Studio 创建所有新应用程序以使用客户端配置文件（我认为这很糟糕），如果您不专门将其更改回来，它会导致各种麻烦。看一看，然后看看我们从那里去哪里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-13T12:07:39.323

删除引用`System.Security.Cryptography`并重新添加。

它适用于我的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-15T17:01:35.670

对不起，我知道这是一篇很老的帖子，但我现在遇到了这个问题，我发现的唯一解决方法是：

1.  按照[乔治布赖恩的回答中提到的步骤](https://stackoverflow.com/a/18282140/1678667)
2.  使用`System.Security.Cryptography.DataProtectionScope scope = System.Security.Cryptography.DataProtectionScope.LocalMachine;`代替`DataProtectionScope scope = DataProtectionScope.LocalMachine;`

* * *

## 回答 #7

> 赞同：-10
> 
> 时间：2012-11-03T00:47:23.810

这可能是你脸上的一记耳光，因为你可能已经尝试过了（而你没有尝试过，你**可能应该得到**一个）。如果重新安装整个 IDE 会发生什么？我的意思是**整个**事情。删除框架，VS，删除文件，去偏执并清理垃圾桶，切换到不同的安装目录等。问题仍然存在吗？

我知道它不能解释**为什么**会发生，但在这个阶段我猜你最感兴趣的是如何解决这个问题。

如果您可以使用备用计算机 - 为什么不在**该**计算机上安装 VS 并查看是否可以重现错误。如果没有，那么您的主机就有问题，您可能永远不会知道发生了什么。

我在这里强调的是，这只是一个一般性建议的列表，当没有任何理智或逻辑似乎不起作用时，**每个**程序员都应该依赖这些建议。是的，我**确实**讨厌电脑。我喜欢编程，但我讨厌电脑。他们就像拿着键盘的小恶魔……

# mysql - MySQL INNER JOIN 从第二个表中只选择一行

> ID：12526194
> 
> 赞同：141
> 
> 时间：2012-09-21T07:40:37.717
> 
> 标签：mysql, sql, select, inner-join

我有一个`users`表和一个`payments`表，对于每个有付款的用户，表中可能有多个关联的付款`payments`。我想选择所有有付款的用户，但只选择他们最近一次付款。我正在尝试这个 SQL，但我以前从未尝试过嵌套的 SQL 语句，所以我想知道我做错了什么。感谢帮助

```
SELECT u.* 
FROM users AS u
    INNER JOIN (
        SELECT p.*
        FROM payments AS p
        ORDER BY date DESC
        LIMIT 1
    )
    ON p.user_id = u.id
WHERE u.package = 1 
```

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-09-21T07:45:11.803

您需要有一个子查询来获取他们的最新日期`user ID`。

```
SELECT  a.*, c.*
FROM users a 
    INNER JOIN payments c
        ON a.id = c.user_ID
    INNER JOIN
    (
        SELECT user_ID, MAX(date) maxDate
        FROM payments
        GROUP BY user_ID
    ) b ON c.user_ID = b.user_ID AND
            c.date = b.maxDate
WHERE a.package = 1 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2018-07-05T11:23:36.090

```
SELECT u.*, p.*
FROM users AS u
INNER JOIN payments AS p ON p.id = (
    SELECT id
    FROM payments AS p2
    WHERE p2.user_id = u.id
    ORDER BY date DESC
    LIMIT 1
) 
```

或者

```
SELECT u.*, p.*
FROM users AS u
INNER JOIN payments AS p ON p.user_id = u.id
WHERE NOT EXISTS (
    SELECT 1
    FROM payments AS p2
    WHERE
        p2.user_id = p.user_id AND
        (p2.date > p.date OR (p2.date = p.date AND p2.id > p.id))
) 
```

这些解决方案比[公认的答案](https://stackoverflow.com/a/12526264/1118709)更好，因为当有多个付款具有相同的用户和日期时，它们可以正常工作。您可以[尝试使用 SQL Fiddle](http://sqlfiddle.com/#!9/956d3c/4)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-21T07:44:57.443

```
SELECT u.*, p.*, max(p.date)
FROM payments p
JOIN users u ON u.id=p.user_id AND u.package = 1
GROUP BY u.id
ORDER BY p.date DESC 
```

看看这个[sqlfiddle](http://sqlfiddle.com/#!2/9fd4c/1/0)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T07:55:26.700

```
 SELECT u.* 
        FROM users AS u
        INNER JOIN (
            SELECT p.*,
             @num := if(@id = user_id, @num + 1, 1) as row_number,
             @id := user_id as tmp
            FROM payments AS p,
                 (SELECT @num := 0) x,
                 (SELECT @id := 0) y
            ORDER BY p.user_id ASC, date DESC)
        ON (p.user_id = u.id) and (p.row_number=1)
        WHERE u.package = 1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T07:47:08.730

您的查询有两个问题：

1.  每个表和子查询都需要一个名称，因此您必须命名子查询`INNER JOIN (SELECT ...) AS p ON ...`。
2.  您拥有的子查询仅返回一个行期间，但您实际上希望*每个用户都有*一行。为此，您需要一个查询来获取最大日期，然后自行加入以获取整行。

假设 没有关系`payments.date`，请尝试：

```
 SELECT u.*, p.* 
    FROM (
        SELECT MAX(p.date) AS date, p.user_id 
        FROM payments AS p
        GROUP BY p.user_id
    ) AS latestP
    INNER JOIN users AS u ON latestP.user_id = u.id
    INNER JOIN payments AS p ON p.user_id = u.id AND p.date = latestP.date
    WHERE u.package = 1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-12T13:14:13.733

@John Woo 的回答帮助我解决了类似的问题。我还通过设置正确的顺序改进了他的答案。这对我有用：

```
SELECT  a.*, c.*
FROM users a 
    INNER JOIN payments c
        ON a.id = c.user_ID
    INNER JOIN (
        SELECT user_ID, MAX(date) as maxDate FROM
        (
            SELECT user_ID, date
            FROM payments
            ORDER BY date DESC
        ) d
        GROUP BY user_ID
    ) b ON c.user_ID = b.user_ID AND
           c.date = b.maxDate
WHERE a.package = 1 
```

不过，我不确定这有多有效。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-10T12:09:20.713

你可以试试这个：

```
SELECT u.*, p.*
FROM users AS u LEFT JOIN (
    SELECT *, ROW_NUMBER() OVER(PARTITION BY userid ORDER BY [Date] DESC) AS RowNo
    FROM payments  
) AS p ON u.userid = p.userid AND p.RowNo=1 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-03-30T09:29:46.293

```
SELECT U.*, V.* FROM users AS U 
INNER JOIN (SELECT *
FROM payments
WHERE id IN (
SELECT MAX(id)
FROM payments
GROUP BY user_id
)) AS V ON U.id = V.user_id 
```

这将使它工作

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-08-25T13:27:52.637

`MAX(date)`Matei Mihai 给出了一个简单而有效的解决方案，但只有在 SELECT 部分放入一个才会起作用，所以这个查询将变为：

```
SELECT u.*, p.*, max(date)
FROM payments p
JOIN users u ON u.id=p.user_id AND u.package = 1
GROUP BY u.id 
```

并且 order by 不会对分组产生任何影响，但它可以对 group by 提供的最终结果进行排序。我试过了，它对我有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-30T08:24:04.290

如果您在 ORDER BY 子句中需要几个列，我的回答直接来自 @valex 非常有用。

```
 SELECT u.* 
    FROM users AS u
    INNER JOIN (
        SELECT p.*,
         @num := if(@id = user_id, @num + 1, 1) as row_number,
         @id := user_id as tmp
        FROM (SELECT * FROM payments ORDER BY p.user_id ASC, date DESC) AS p,
             (SELECT @num := 0) x,
             (SELECT @id := 0) y
        )
    ON (p.user_id = u.id) and (p.row_number=1)
    WHERE u.package = 1 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-09T04:37:05.423

这是非常简单的内部联接，然后按 user_id 分组，并在 payment_id 中使用 max 聚合函数，假设您的表是用户并且付款查询可以是

```
SELECT user.id, max(payment.id)
FROM user INNER JOIN payment ON (user.id = payment.user_id)
GROUP BY user.id 
```

# sql - 将 Oracle 样式连接转换为 ANSI SQL 连接

> ID：12526196
> 
> 赞同：1
> 
> 时间：2012-09-21T07:40:40.327
> 
> 标签：sql, oracle, ms-access

我有一个 Oracle 数据库的查询，我通过 ODBC 使用 MS Access 访问它。

此查询不适用于访问我需要将其转换为标准 SQL，我尝试了几次都没有成功。我想知道是否可以帮助我谢谢！

```
 select t2.s_studentreference "Ad No"
        , t1.p_surname "Surname"
        , t1.p_forenames "Forenames"
        , t3.e_reference "Reference"
        , t3.e_name "Name" 
    from capd_a t2
       , capd_b t1
       , capd_c t3 
   where t2.s_id(+)=t1.p_id 
     and (t3.e_student=t1.p_id) 
     and (t3.e_reference='D /YR2A2/12') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:46:36.823

如果`standard SQL`你的意思是`ANSI SQL`你的查询可能看起来像这样

```
 select t2.s_studentreference "Ad No"
        , t1.p_surname "Surname"
        , t1.p_forenames "Forenames"
        , t3.e_reference "Reference"
        , t3.e_name "Name" 
    from capd_b t1
   right outer join capd_a t2
      on (t2.s_id = t1.p_id)
    join capd_c t3 
      on ((t3.e_student=t1.p_id) and (t3.e_reference='D /YR2A2/12')) 
```

# backbone.js - 集合和模型之间的骨干通信

> ID：12526197
> 
> 赞同：0
> 
> 时间：2012-09-21T07:40:44.350
> 
> 标签：backbone.js

假设我有一个（音频/视频）轨道模型和一个集合这些轨道

**模型：**

```
Backbone.Model.extend({
   defaults:{...},
   play: function() {
      //plays the track
   }
}); 
```

然后该集合代表类似于播放列表的东西

**收藏：**

```
Backbone.Collections.extend({
   currentTrackInList: 0,
   model: track,
   playAll: function() {
      self = this;
      this.models.each(function(item){
         item[self.currentTrackInList].play();
      });
   }
}); 
```

我现在需要做的是访问模型中集合的属性以确定播放逻辑（即当前播放的曲目是否是集合中的最后一个）。

当然，我可以只通过集合中的 play() 函数传递参数，但必须有一种更简单的方法让模型和基于集合的模型相互通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:00:02.727

模型知道它的集合。您可以通过 访问它`this.collection`。

# c# - Expander 内的 GridSplitter 扩展超出高度

> ID：12526199
> 
> 赞同：1
> 
> 时间：2012-09-21T07:40:53.110
> 
> 标签：c#, wpf

我有一个扩展器，其中包含一个网格，其中我有一个网格拆分器。

文档大纲和 UI 是这样的

![在此处输入图像描述](../Images/270e8cb491015c764151e9a00b77f539.png)

这是代码。

```
<Grid x:Name="TopGrid" ShowGridLines="True" >
 <Grid.RowDefinitions>
  <RowDefinition Height="Auto" MaxHeight="150"/>
  <RowDefinition Height="200" />
 </Grid.RowDefinitions>
 <Expander x:Name="CompanyDescriptionExpander" Grid.ColumnSpan="2" 
           VerticalAlignment="Top" IsExpanded="True" Background="Black" >
  <Expander.Header>
   <Grid Width="{Binding ElementName=CompanyDescriptionExpander, 
                         Path=ActualWidth}" Background="Aquamarine">
    <TextBlock Grid.Column="0" Text="Expander Header" Foreground="Black" />
   </Grid>
  </Expander.Header>
   <Expander.Content>
    <Grid x:Name="DescriptionGrid" MaxHeight="130" ShowGridLines="True">
     <Grid.RowDefinitions>
      <RowDefinition Height="*" MinHeight="25" MaxHeight="25"/>
      <RowDefinition Height="Auto" MinHeight="25" MaxHeight="120"/>
      <RowDefinition Height="4" MinHeight="10" MaxHeight="10"/>
     </Grid.RowDefinitions>
     <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*" />
      <ColumnDefinition Width="Auto" />
     </Grid.ColumnDefinitions>
     <TextBox Grid.Column="0" Background="Orange" Grid.Row="0" Grid.RowSpan="2"
              MinHeight="40" MaxHeight="120" x:Name="DescriptionText"
              Text="TextBlock Content" HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch" 
              VerticalContentAlignment="Top" 
              HorizontalScrollBarVisibility="Hidden" 
              VerticalScrollBarVisibility="Auto" />
     <Button x:Name="SaveIconButton" Grid.Column="1" Grid.Row="0" Width="20" 
             Height="20" VerticalAlignment="Top" />
     <Button x:Name="CancelIconButton" Grid.Column="1" Grid.Row="1" Width="20" 
             Height="20" VerticalAlignment="Top" />
     <GridSplitter ResizeBehavior="PreviousAndCurrent" ResizeDirection="Rows" 
                   Grid.Row="2" Grid.ColumnSpan="2" 
                   Height="10" MaxHeight="10" HorizontalAlignment="Stretch" 
                   VerticalAlignment="Top" Background="Red" />
    </Grid>
   </Expander.Content>
 </Expander>
 <Button Grid.Row="1" Grid.Column="0" Margin="0,5,0,0" Height="20" 
         VerticalAlignment="Top" Background="Green" />
</Grid> 
```

当我们使用网格拆分器时，它会扩展

![在此处输入图像描述](../Images/93117d4d789c0118bfdd07e05d0d835e.png)

但即使在文本框达到其最大高度并且 gridsplitter 落后于按钮（绿色）之后，它也会继续。

我的问题场景可以在项目中复制我的代码

![在此处输入图像描述](../Images/b40876119abf0e2f111553373c0aa1d3.png)

我希望它在文本框达到最大高度时停止。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:43:31.980

在您的 DescriptionGrid 中，将第二行 MaxHeight 从 120 更改为 95。

该网格中三行的组合最大高度超过了网格本身的最大高度。

# iphone - 在 iOS 中关闭 Bonjour 时使用主机名查找 IP 地址

> ID：12526205
> 
> 赞同：0
> 
> 时间：2012-09-21T07:41:38.467
> 
> 标签：iphone, ip-address, bonjour, hostname

我只是想问一下，即使关闭 Bonjour 设置，是否可以使用其主机名识别设备（例如打印机）的 IP 地址？你也能给我一个例子来说明如何做到这一点吗？我正在 iOS 中开发一个应该处理这种情况的应用程序。

我看过以下内容：

1.  获取地址信息
2.  CFHostStartInfoResolution

但它们仅在设备的 bonjour 开启时才起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:17:01.683

假设主机名（比方说`nameOfTheDevice`）在区域的权威 DNS 服务器上注册，您可以使用[CFHost](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFHostRef/Reference/reference.html)查找地址或主机名。例如：

```
NSString* hostname = @"nameOfTheDevice";
CFHostRef hostRef = CFHostCreateWithName(kCFAllocatorDefault, (CFStringRef)hostname);

Boolean lookup = CFHostStartInfoResolution(hostRef, kCFHostAddresses, NULL);
NSArray* addresses = (NSArray*)CFHostGetAddressing(hostRef, &lookup);

[addresses enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSString *strDNS = [NSString stringWithUTF8String:inet_ntoa(*((struct in_addr *)obj))];
       NSLog(@"Resolved %d->%@", idx, strDNS);
  }]; 
```

（请记住在您的生产代码中进行错误检查）。请记住，如果 DNS 服务器不知道该主机名，则您无能为力。假设您将能够执行成功的查找是不安全的，尤其是在内置 DHCP/DNS 服务器具有广泛不同功能的家庭网络上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T09:44:02.280

从上一个答案中获取回调函数并将 obj 作为参数传递给此函数

```
void printAddr(CFDataRef address)
{
    NSString *addressString;
    struct sockaddr *addressGeneric;

NSData *myData = (__bridge NSData*)address;
addressGeneric = (struct sockaddr*)[myData bytes];

switch(addressGeneric->sa_family) {
    case AF_INET: {
      struct sockaddr_in *ip4;
      char dest[INET_ADDRSTRLEN];
      ip4 = (struct sockaddr_in *) [myData bytes];
      addressString = [NSString stringWithFormat: @"IP4: %s", inet_ntop(AF_INET, &ip4->sin_addr, dest, sizeof dest)];
     }
     break;

    case AF_INET6: {
        struct sockaddr_in6 *ip6;
        char dest[INET6_ADDRSTRLEN];
        ip6 = (struct sockaddr_in6 *) [myData bytes];
        addressString = [NSString stringWithFormat: @"IP6: %s",  inet_ntop(AF_INET6, &ip6->sin6_addr, dest, sizeof dest)];
     }
     break;
 }

NSLog(@"%@", addressString);
} 
```

# php - 使用 Zend_Form 生成动态输入

> ID：12526206
> 
> 赞同：3
> 
> 时间：2012-09-21T07:41:44.863
> 
> 标签：php, zend-framework, doctrine-orm, zend-form

早上好，

我有一个必须支持`n`语言的多语言后端应用程序。语言存储在数据库中，可以随时添加。现在对于我的后端功能，我需要`<input>`根据存储在我的数据库中的语言动态生成字段，例如：

> 1.  德语：`<input type="text" id="title_de">`
> 2.  英语`<input type="text" id="title_en">`
> 3.  意大利语`<input type="text" id="title_it">`
> 4.  ...

我目前使用以下方法添加它们`Zend_Form`：

```
 foreach($languages as $language){
    $title = new Zend_Form_Element_Text("title_" . $language->getPrefix());
    $title->setLabel("Title " . $language->getPrefix())
      ->setRequired(true)
    $this->addElements(array($title));
  } 
```

这就是我使用 Doctrine 将字段保存到我的数据库的方式：

```
//get language-dependent title and write to DB
  foreach($languages as $language){
    $title->setLanguage($language);
    $title->setContent($form->getValue("title_" . $language->getPrefix()));
    $touristArea->addTitle($title);

    //persist and flush
    $em->persist($touristArea);
    $em->flush();            
  } 
```

无论如何，由于我有许多与语言相关的字段（标题、标题等），处理表单的代码会变得非常讨厌，我总是必须查询数据库中的语言表才能知道生成了哪些输入。有一个更好的方法吗？就像输入数组或类似的东西？感谢您的任何意见:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:28:46.830

我建议你使用`Zend_Translate`组件首先创建带有翻译的源文件-> **创建数组源文件**

数组源文件是普通数组。但是您必须手动定义它们，因为没有工具可以帮助您。但是因为它们非常简单，所以如果您的代码按预期工作，这是查找消息的最快方法。它通常是开始翻译业务的最佳适配器。

```
$english = array(
    'message1' => 'message1',
    'message2' => 'message2',
    'message3' => 'message3');

$german = array(
    'message1' => 'Nachricht1',
    'message2' => 'Nachricht2',
    'message3' => 'Nachricht3');

$translate = new Zend_Translate(
    array(
        'adapter' => 'array',
        'content' => $english,
        'locale'  => 'en'
    )
);

$translate->addTranslation(array('content' => $german, 'locale' => 'de')); 
```

从 1.5 版开始，还支持将数组包含在外部文件中。您只需提供文件名，Zend_Translate 将自动包含它并查找数组。有关源文件的更多信息，请参见以下[页面](http://framework.zend.com/manual/1.12/en/zend.translate.sourcecreation.html)

然后看看**Zend_Form 的国际化**

为了在表单中初始化 I18n，您将需要 Zend_Translate 对象或 Zend_Translate_Adapter 对象，如 Zend_Translate 文档中所述。一旦你有了一个翻译对象，你就可以使用它们的 setTranslator() 方法将一个翻译器附加到一个特定的表单实例或特定的元素上：

```
// Tell *this* form instance to use a specific translate adapter; it
// will also be used to translate validation error messages for all
// elements:
$form->setTranslator($translate);

// Tell *this* element to use a specific translate adapter; it will
// also be used to translate validation error messages for this
// particular element:
$element->setTranslator($translate); 
```

详细指南在[这里](http://framework.zend.com/manual/1.12/en/zend.form.i18n.html)

# c# - c#线程不会将行添加到DataGridView CrossThreadError

> ID：12526207
> 
> 赞同：2
> 
> 时间：2012-09-21T07:41:45.017
> 
> 标签：c#, multithreading

我正在学习 c#，我想知道为什么我的代码不会在 ReceivePacket 区域的 DataGridView 中添加一行。它在 SendPacket 中有效，但在另一个中无效。目的是简单地向机器发送一个 UDP 数据包，在此先感谢。这是我的代码：

```
private void btnSend_Click(object sender, EventArgs e)
        {
            SendPacket();
        }
        private void btnReceiving_Click(object sender, EventArgs e)
        {
            Thread thread = new Thread(new ThreadStart(reciev));
            thread.Start();
        }    

UdpClient client = new UdpClient();

        public void SendPacket()
        {
            byte[] packet = Encoding.ASCII.GetBytes(DateTime.Now.ToString("HH:mm:ss:ff"));
            client.Send(packet, packet.Length, tbIP.Text, 444);
            dgvSend.Rows.Add(DateTime.Now.ToString("HH:mm:ss:ff"));
        }

        public void ReceivePacket(byte[] packet)
        {// it goes wrong here, because it gives a crossthread error
            dgvReceiv.Rows.Add(Encoding.ASCII.GetString(packet), DateTime.Now.ToString("HH:mm:ss:ff"));
        }

        public void reciev()
        {
            UdpClient client = new UdpClient(444);
            while (true)
            {
                IPEndPoint server = new IPEndPoint(IPAddress.Any, 0);
                byte[] packet = client.Receive(ref server);
                ReceivePacket(packet);
            }
        } 
```

我使用这行代码而不是正常的（使用调用:)）修复了它：

```
dgvReceiv.Invoke(new MethodInvoker(delegate { dgvReceiv.Rows.Add(Encoding.ASCII.GetString(packet), DateTime.Now.ToString("HH:mm:ss:ff")); })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:46:19.040

在这里，您将看到使用委托从其他线程调用在主线程上创建的控件上的操作的示例。

[http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:43:51.507

问题是您试图在主 GUI 线程之外的另一个线程上创建 GUI 元素（表单）。您只能在 GUI 线程上创建 GUI 元素。别的什么都行不通。

您应该在辅助线程中接收数据，然后将其复制到您的 GUI 线程，以将其放入 GUI 元素中。我认为有一个函数`Control.Invoke`是一个委托，它将在创建控件的线程上调用一个函数，您可以使用该函数从辅助线程调用以实际填充您的表单或任何控件。

# jsf-2 - 如何使用自定义渲染器渲染复合组件？

> ID：12526211
> 
> 赞同：4
> 
> 时间：2012-09-21T07:41:59.770
> 
> 标签：jsf-2, composite-component, renderer

我想知道如何通过 Java 呈现复合组件，我的意思是我有：

```
<myowntags:selectOneRadio>
  <f:selectItem itemValue="value0" itemLabel="This is the value 0" />
  <f:selectItem itemValue="value1" itemLabel="This is the value 1" />
  <f:selectItem itemValue="value2" itemLabel="This is the value 2" />
</myowntags:selectOneRadio> 
```

或者

```
<myowntags:selectOneRadio>
  <f:selectItems  value="#{controller.items}"  />
</myowntags:selectOneRadio> 
```

我想创建一个 Java 类来呈现它。

我知道如何在不使用复合材料的情况下呈现自定义组件，但是因为要呈现组件，我必须在块上指定一些值：

```
<renderer>
    <component-family>javax.faces.SelectBoolean</component-family>
    <renderer-type>javax.faces.Checkbox</renderer-type>
    <renderer-class>com.myapp.CustomCheckboxRenderer</renderer-class>
</renderer> 
```

然后我迷路了，因为我不知道复合组件的渲染标记内这些参数的值。

提前感谢，天使。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T13:10:49.560

首先，您需要有一个支持组件，它作为组件系列实现[`NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)和返回。`"javax.faces.NamingContainer"`这是复合组件所必需的，您不能更改该部分。实现已经这样[`UINamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UINamingContainer.html)做了，所以如果你可以从它扩展。

```
@FacesComponent("mySelectOneRadio")
public class MySelectOneRadio extends UINamingContainer {
    // ...
} 
```

或者，如果您想从 扩展`UISelectOne`，则必须实现`NamingContainer`接口并确保[`UINamingContainer.COMPONENT_FAMILY`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UINamingContainer.html#COMPONENT_FAMILY)在`getFamily()`覆盖中返回。

然后，您需要在`<cc:interface componentType>`.

```
<cc:interface componentType="mySelectOneRadio"> 
```

* * *

请注意，在此步骤中，您已经可以通过 Java 执行渲染（编码）。只需覆盖该`encodeChildren()`方法。

```
@FacesComponent("mySelectOneRadio")
public class MySelectOneRadio extends UINamingContainer {

    @Override
    public void encodeChildren(FacesContext context) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("div", this);
        writer.writeText("hello world", null);
        writer.endElement("div");
    }

} 
```

* * *

回到您的具体问题，因此您希望为此开设一个独立的`Renderer`课程。没关系。为此，您需要扩展`Renderer`：

```
@FacesRenderer(componentFamily=UINamingContainer.COMPONENT_FAMILY, rendererType=MySelectOneRadioRenderer.RENDERER_TYPE)
public class MySelectOneRadioRenderer extends Renderer {

    public static final String RENDERER_TYPE = "com.example.MySelectOneRadio";

    @Override
    public void encodeChildren(FacesContext context, UIComponent component) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("div", component);
        writer.writeText("hello world", null);
        writer.endElement("div");
    }

} 
```

支持组件应进行如下更改，以便将此渲染器正确注册为默认渲染器（不要覆盖`getRendererType()`方法！否则您或其他任何人将无法通过`<renderer>`in更改它`faces-config.xml`）：

```
@FacesComponent("myComposite")
public class MyComposite extends UINamingContainer {

    public MyComposite() {
        // Set default renderer.
        setRendererType(MySelectOneRadioRenderer.RENDERER_TYPE);
    }

} 
```

请注意，多亏了`@FacesRenderer`，您无需为`faces-config.xml`.

* * *

无论您选择以何种方式对子项进行编码，您都可以通过`UIComponent#getChildren()`. 当您在`MySelectOneRadio`组件内部时：

```
if (getChildCount() > 0) {
    for (UICompnent child : getChildren()) {
        // ...
    }
} 
```

或者当您在`MySelectOneRadioRenderer`渲染器中时：

```
if (component.getChildCount() > 0) {
    for (UICompnent child : component.getChildren()) {
        // ...
    }
} 
```

要委托给组件自己的默认渲染，请调用`super.encodeChildren()`或`component.encodeChildren()`. 要委托给孩子自己的默认渲染，请调用`child.encodeAll()`.

### 也可以看看：

*   [组件族、组件类型和渲染器类型之间的关系是什么？](https://stackoverflow.com/questions/8076625/jsf-what-is-the-relationship-between-component-family-component-type-and-rend)

# c# - 创建一个由左、中、右图像组成的画笔，其中中间图像平铺

> ID：12526217
> 
> 赞同：2
> 
> 时间：2012-09-21T07:42:05.260
> 
> 标签：c#, wpf, visualbrush

我需要在 WPF 中创建一个画笔，用作面板的背景。画笔具有固定高度但可变宽度。中间图像需要平铺以填充空间，而左右图像是固定的。我尝试使用 VisualBrush 和带有图像的网格，但它不能正确对齐/缩放。这是一个适用于固定宽度的画笔。我如何使它工作，以便它为可变宽度的面板平铺中间图像？

```
<DrawingBrush x:Key="Background">
    <DrawingBrush.Drawing>
        <DrawingGroup>
                <ImageDrawing Rect="0 0 16 16" ImageSource="Resources/Left.png"/>
                <ImageDrawing Rect="16 0 16 16" ImageSource="Resources/Middle.png"/>
                <ImageDrawing Rect="48 0 16 16" ImageSource="Resources/Right.png"/>
            </DrawingGroup>
        </DrawingGroup>
    </DrawingBrush.Drawing>
</DrawingBrush> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:04:02.793

我不确定你是否真的能做到这一点，因此作为替代方案，使用绑定和转换器生成一个新的画笔以适合适当的大小。

```
<Grid VerticalAlignment="Center" Height="16" Margin="16,0" HorizontalAlignment="Stretch"
    Background="{Binding Path=ActualWidth, RelativeSource={RelativeSource Self},Converter={StaticResource widthToBrushConverter}}"/> 
```

和宽度到刷子转换器

```
public class WidthToBrushConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var width = (double)value;

        var result = new DrawingBrush();
        var group = new DrawingGroup();
        result.Drawing = group;

        group.Children.Add(new ImageDrawing(new BitmapImage(new Uri(@"Resources\Left.png", UriKind.Relative)), new Rect(0, 0, 16, 16)));
        group.Children.Add(new ImageDrawing(new BitmapImage(new Uri(@"Resources\Centre.png", UriKind.Relative)), new Rect(16, 0, width, 16)));
        group.Children.Add(new ImageDrawing(new BitmapImage(new Uri(@"Resources\Right.png", UriKind.Relative)), new Rect(16 + width, 0, 16, 16)));
        return result;
    } 
```

**更新** 唯一的问题是这似乎不起作用。我只是黑屏

# asp.net - 在 .NET Request 对象中查找 Json 字符串

> ID：12526218
> 
> 赞同：0
> 
> 时间：2012-09-21T07:42:05.870
> 
> 标签：asp.net, json

> **可能重复：**
> [如何通过 ASP.Net context.Request 检索 JSON](https://stackoverflow.com/questions/3398926/how-to-retrieve-json-via-asp-net-context-request)

我试图解析一个 Json 对象，但我不明白 context.Request 对象在哪里可以找到实际数据（我猜是字符串格式）。

这就是我将 Json 数据传递给服务器的方式

```
$(function () {
    // Do your stuff here

    alert("wööööö");

    urlToHandler = 'JSonTestHandler.ashx';
    jsonData = '{ "FavoriteFood":"Pasta with butter and cheese", "FavoriteSport": "Submission Wrestling", "FavoriteGame": "Starcraft 2", "FavoriteMusic": "Hip Hop" }';
    $.ajax({
        url: urlToHandler,
        data: jsonData,
        dataType: 'json',
        type: 'POST',
        contentType: 'application/json',
        success: function (data) {
            setAutocompleteData(data.responseDateTime);
        },
        error: function (data, status, jqXHR) {
            alert('There was an error.');
        }
    }); // end $.ajax

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:56:27.243

Try this

```
string jsonInput=  new System.IO.StreamReader(context.Request.InputStream, System.Text.Encoding.UTF8).ReadToEnd(); 
```

# javascript - 从 JS 更改规则选择器文本？

> ID：12526220
> 
> 赞同：3
> 
> 时间：2012-09-21T07:42:11.600
> 
> 标签：javascript, css, dom

是否可以从 javascript更改 a `CSSRule`？`.selectorText`MDN 说它是一个 getter/setter 但设置它似乎没有效果......

参考 ：

[https://developer.mozilla.org/en-US/docs/DOM/CSSStyleRule/selectorText?redirectlocale=en-US&redirectslug=DOM%2FcssRule.selectorText](https://developer.mozilla.org/en-US/docs/DOM/CSSStyleRule/selectorText?redirectlocale=en-US&redirectslug=DOM%2FcssRule.selectorText)

> selectorText() 获取/设置规则集选择器的文本表示。

编辑：所有的“文档”都是错误的和误导的。

[http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSRule](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSRule)

```
attribute DOMString        selectorText;
                                      // raises(DOMException) on setting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:12:07.260

不，似乎浏览器实现（至少在 Firefox 中）确实选择将它们选择为只读（因为`selectorText`（并且`cssText`也）可以抛出“NO_MODIFICATION_ALLOWED_ERR：如果规则是只读的，则引发。 ”）。

但是，您可以修改样式属性：

```
<style>
body { background-color: darkblue; }
</style>
<p>abc</p>
<script>
  var stylesheet = document.styleSheets[0]
  stylesheet.cssRules[0].style.color = 'red'; // Will make body red
</script> 
```

但是，您可以通过创建和插入您设置`<style>`的标签来解决问题，而无需解析 CSS。`innerHTML`

# sql - 如何获得零值的结果

> ID：12526222
> 
> 赞同：1
> 
> 时间：2012-09-21T07:42:20.477
> 
> 标签：sql, sql-server-2008, tsql

我的查询是

```
select m.year_id,Count(*) as Distinctions from NewTestDB.dbo.[Master_MARKS2005] as m
join NewTestDB.dbo.Master_Student as s
on s.Student_id=m.Student_Id
join NewTestDB.dbo.Master_School as sc
on sc.school_id=s.school_code
where sc.SCHOOL_CODE= 'an0001' and m.YEAR_ID between 1 and 8 and m.[NRC_CLASS]='D'
group by m.year_id, 
```

我想要 1 到 8 之间的所有 year_id 但现在我只在 m.[NRC_CLASS]='D'包含“D”值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:45:18.793

您应该使用 Left Join 来实现这一点

就像你可以试试这个

```
SELECT m.year_id,COUNT(*) AS Distinctions 
       FROM NewTestDB.dbo.[Master_MARKS2005] AS m
LEFT JOIN 
       NewTestDB.dbo.Master_Student AS s
ON 
       s.Student_id=m.Student_Id
JOIN 
       NewTestDB.dbo.Master_School AS sc
ON 
       sc.school_id=s.school_code
WHERE 
       sc.SCHOOL_CODE= 'an0001' 
       AND 
       m.YEAR_ID BETWEEN 1 AND 8 
       AND 
       m.[NRC_CLASS]='D' 
GROUP BY m.year_id, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:47:29.310

尝试这个：

```
select  m.year_id,
        Count(CASE WHEN m.[NRC_CLASS]='D' THEN 1 ELSE 0 END) as Distinctions
from    NewTestDB.dbo.[Master_MARKS2005] as m
join    NewTestDB.dbo.Master_Student as s
on      s.Student_id=m.Student_Id
join    NewTestDB.dbo.Master_School as sc
on      sc.school_id=s.school_code
where   sc.SCHOOL_CODE= 'an0001' and m.YEAR_ID between 1 and 8
group   by m.year_id, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:49:18.037

```
select isnull(m.year_id,''),Count(*) as Distinctions from NewTestDB.dbo.[Master_MARKS2005] as m
left join NewTestDB.dbo.Master_Student as s
on s.Student_id=m.Student_Id
left join NewTestDB.dbo.Master_School as sc
on sc.school_id=s.school_code
where sc.SCHOOL_CODE= 'an0001' and m.YEAR_ID between 1 and 8 and m.[NRC_CLASS]='D'
group by m.year_id 
```

# sql - 如何使用 rowcount 获取第一行详细信息？

> ID：12526225
> 
> 赞同：1
> 
> 时间：2012-09-21T07:42:27.673
> 
> 标签：sql, rowcount

我有一个名为 @rows 的临时变量，在这样的存储过程中有近 10000 条记录

```
Create Procedure input
as
begin
declare @input_data table(......)
insert into (.....) from ....
@rows= select @@rowcount
while(@rows > o)
begin
--- I need to process each row like
select ... where @row=1 --like this repeatedly upto @rows = 10000
end 
```

我应该如何实现这一点。请帮助我提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:47:16.933

您可以根据一些条件直接更新表，并使用 CASE 语句 insted 使用 while 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:53:27.067

您可以使用 CURSOR 实现您的目标

```
DECLARE @ID AS INT

DECLARE TestCursor CURSOR
FOR (SELECT ID FROM Test)

OPEN TestCursor
    FETCH NEXT FROM TestCursor INTO @ID

    WHILE @@Fetch_Status = 0
    BEGIN
        --Your Code Here
        PRINT  @ID --Print For Testing
        FETCH NEXT FROM TestCursor INTO @ID
    END

CLOSE TestCursor
DEALLOCATE TestCursor 
```

请记住：使用游标会导致性能损失而是在查询中使用 CASE 语句进行条件选择/更新，如另一个答案中所述

# android - 如何将媒体控制器按钮放在通知栏上？

> ID：12526228
> 
> 赞同：27
> 
> 时间：2012-09-21T07:42:30.793
> 
> 标签：android, mediacontroller, android-music-player

我正在创建一个音乐播放器应用程序。当我的应用程序在后台运行时，我想在通知栏上显示媒体控制器。它看起来像谷歌播放器。

![在此处输入图像描述](../Images/5a977696606126b3f3957e0ef0e2c526.png)

这该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-15T09:27:55.183

这是上面对新 API 正确完成的示例

在您的主体中，当您想要启动通知时实例化该类：

```
NotificationPanel nPanel = new NotificationPanel(MyActivity); 
```

当你想取消通知时：（因为它是一个正在进行的通知）

```
nPanel.notificationCancel(); 
```

然后为通知调用者创建类：

```
public class NotificationPanel {

private Context parent;
private NotificationManager nManager;
private NotificationCompat.Builder nBuilder;
private RemoteViews remoteView;

public NotificationPanel(Context parent) {
    // TODO Auto-generated constructor stub
    this.parent = parent;
    nBuilder = new NotificationCompat.Builder(parent)
    .setContentTitle("Parking Meter")
    .setSmallIcon(R.drawable.ic_launcher)
    .setOngoing(true);

    remoteView = new RemoteViews(parent.getPackageName(), R.layout.notificationview);

    //set the button listeners
    setListeners(remoteView);
    nBuilder.setContent(remoteView);

    nManager = (NotificationManager) parent.getSystemService(Context.NOTIFICATION_SERVICE);
    nManager.notify(2, nBuilder.build());
}

public void setListeners(RemoteViews view){
    //listener 1
    Intent volume = new Intent(parent,NotificationReturnSlot.class);
    volume.putExtra("DO", "volume");
    PendingIntent btn1 = PendingIntent.getActivity(parent, 0, volume, 0);
    view.setOnClickPendingIntent(R.id.btn1, btn1);

    //listener 2
    Intent stop = new Intent(parent, NotificationReturnSlot.class);
    stop.putExtra("DO", "stop");
    PendingIntent btn2 = PendingIntent.getActivity(parent, 1, stop, 0);
    view.setOnClickPendingIntent(R.id.btn2, btn2);
}

public void notificationCancel() {
    nManager.cancel(2);
}
} 
```

然后添加接受待处理意图的返回类：

```
public class NotificationReturnSlot extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    String action = (String) getIntent().getExtras().get("DO");
    if (action.equals("volume")) {
        Log.i("NotificationReturnSlot", "volume");
        //Your code
     } else if (action.equals("stopNotification")) {
         //Your code
        Log.i("NotificationReturnSlot", "stopNotification");
     }
     finish();
    }
} 
```

然后您需要为该按钮制作一个 XML 文件。这是一个简单的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<Button
    android:id="@+id/btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:text="volume" />

<Button
    android:id="@+id/btn2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:text="Stop" />

<TextView
    android:id="@+id/message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/msglbl" /> 
```

最后也是最重要的，Manifest 文件：

```
 <activity android:name=".NotificationReturnSlot"
        android:launchMode="singleTask"
        android:taskAffinity=""
        android:excludeFromRecents="true"/> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-19T09:00:59.607

要在您的应用程序中获取媒体播放器控制器，只需按照以下步骤操作：

**在您的 MainActivity 中调用此方法**

```
public void showNotification(View view){
        new MyNotification(this);
        finish();
    } 
```

**创建一个新的 MynotificationClass**

```
public class MyNotification extends Notification {

private Context ctx;
private NotificationManager mNotificationManager;

@SuppressLint("NewApi")
public MyNotification(Context ctx){
    super();
    this.ctx=ctx;
    String ns = Context.NOTIFICATION_SERVICE;
    mNotificationManager = (NotificationManager) ctx.getSystemService(ns);
    CharSequence tickerText = "Shortcuts";
    long when = System.currentTimeMillis();
    Notification.Builder builder = new Notification.Builder(ctx);
    @SuppressWarnings("deprecation")
    Notification notification=builder.getNotification();
    notification.when=when;
    notification.tickerText=tickerText;
    notification.icon=R.drawable.ic_launcher;

    RemoteViews contentView=new RemoteViews(ctx.getPackageName(), R.layout.messageview);

    //set the button listeners
    setListeners(contentView);

    notification.contentView = contentView;
    notification.flags |= Notification.FLAG_ONGOING_EVENT;
    CharSequence contentTitle = "From Shortcuts";
    mNotificationManager.notify(548853, notification);
}

public void setListeners(RemoteViews view){
    //radio listener
    Intent radio=new Intent(ctx,HelperActivity.class);
    radio.putExtra("DO", "radio");
    PendingIntent pRadio = PendingIntent.getActivity(ctx, 0, radio, 0);
    view.setOnClickPendingIntent(R.id.radio, pRadio);

    //volume listener
    Intent volume=new Intent(ctx, HelperActivity.class);
    volume.putExtra("DO", "volume");
    PendingIntent pVolume = PendingIntent.getActivity(ctx, 1, volume, 0);
    view.setOnClickPendingIntent(R.id.volume, pVolume);

    //reboot listener
    Intent reboot=new Intent(ctx, HelperActivity.class);
    reboot.putExtra("DO", "reboot");
    PendingIntent pReboot = PendingIntent.getActivity(ctx, 5, reboot, 0);
    view.setOnClickPendingIntent(R.id.reboot, pReboot);

    //top listener
    Intent top=new Intent(ctx, HelperActivity.class);
    top.putExtra("DO", "top");
    PendingIntent pTop = PendingIntent.getActivity(ctx, 3, top, 0);
    view.setOnClickPendingIntent(R.id.top, pTop);*/

    //app listener
    Intent app=new Intent(ctx, com.example.demo.HelperActivity.class);
    app.putExtra("DO", "app");
    PendingIntent pApp = PendingIntent.getActivity(ctx, 4, app, 0);
    view.setOnClickPendingIntent(R.id.btn1, pApp);
}

} 
```

**创建一个 HelperActivity 类**

```
public class HelperActivity extends Activity {

private HelperActivity ctx;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    ctx = this;
    String action = (String) getIntent().getExtras().get("DO");
    if (action.equals("radio")) {
        //Your code
    } else if (action.equals("volume")) {
        //Your code
    } else if (action.equals("reboot")) {
        //Your code
    } else if (action.equals("top")) {
        //Your code
    } else if (action.equals("app")) {
        //Your code
    }

    if (!action.equals("reboot"))
        finish();
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}
} 
```

**Notificationlayout.xml 的 XML 布局**

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/msglbl"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="test" />

<TextView
    android:id="@+id/message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/msglbl" />

<Button
    android:id="@+id/btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="play" android:layout_margin="10dp"/>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:49:39.900

您需要创建一个 RemoteView 并将其显示为通知。

请参考以下文档

[状态通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)（创建自定义通知布局）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T04:00:27.187

从通知返回/发送数据到您的原始活动；上述示例所需的更改：

```
NotificationPanel nPanel = new NotificationPanel(MyActivity) 
```

如何使用通知按钮恢复创建通知的相同堆栈和活动：

1）确保Activity没有被销毁（可选），改变Back按钮将任务放在后面而不是销毁它：

```
@Override    
void onBackPressed() {
   Log.d("onBackPressed", "onBackPressed Called");
   moveTaskToBack(true);
} 
```

2）在Menifest中将其添加到活动中：

```
android:launchMode="singleTop" 
```

3）为您的 Intent 实例添加这些标志：（volume 是 Intent 实例）

```
Intent volume = new Intent(....);
....
volume.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
volume.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

您还可以添加以下内容（可选）：

```
volume.setAction(Intent.ACTION_MAIN);
volume.addCategory(Intent.CATEGORY_LAUNCHER) 
```

4) 在 PendingIntent 实例中不要使用任何标志：

```
PendingIntent btn1 = PendingIntent.getActivity(parent, 0, volume, 0); 
```

5) 并使用 onNewIntent(Intent intent) 回调在您的 Activity 中捕获意图：

```
@Override
protected void onNewIntent(Intent intent) {
    // TODO Auto-generated method stub
    super.onNewIntent(intent);
    setIntent(intent);
    Log.i("onNewIntent", intent.toString());    // DEBUG - very useful
    if (intent.getExtras() != null) {   // As the Intent we send back has extras, if it don't, it is a different Intent. it is possible to use TRY {} CATCH{} for this as well to find if Extras is NULL.
        String tmp;
        tmp = intent.getExtras().getString("DO");
        if (tmp != null) {  
            if (tmp.equals("volume"))
                Log.i("onNewIntent", "Volume");
            else if (tmp.equals("stop"))
                Log.i("onNewIntent", "Stop");
            else
                Log.i("onNewIntent", "Didnt capture the extras of the Intent - " + tmp);
        } else {
            Log.i("onNewIntent", "No new Intent");
        }
    }
} 
```

# c# - 如何用单字节字符编码编写？

> ID：12526230
> 
> 赞同：6
> 
> 时间：2012-09-21T07:42:38.607
> 
> 标签：c#, unicode, encoding, character-encoding, ansi

我有一个将配置文件返回到低级硬件设备的网络服务。这个设备的制造商告诉我他只支持这个配置文件的单字节字符集。

在[这个 wiki 页面上](http://en.wikipedia.org/wiki/SBCS)，我发现以下应该是单字节字符集：

*   ISO 8859
*   [ISO/IEC 646（我在这里](http://msdn.microsoft.com/en-us/library/86hf4sb8)找不到这个）
*   各种 Microsoft/IBM 代码页

但是当我在这些字符集上调用 Encoding.GetMaxByteCount(1) 时，它总是返回 2。

我还尝试了各种其他编码（例如 IBM437），但 GetMaxByteCount 也为其他字符集返回 2。

[根据](http://msdn.microsoft.com/en-us/library/system.text.encoding.issinglebyte)这个，方法 Endoding.IsSingleByte 似乎不可靠

> 您应该小心您的应用程序对 IsSingleByte 的值所做的事情。关于编码将如何进行的假设可能仍然是错误的。例如，Windows-1252 的 Encoding.IsSingleByte 值为 true，但 Encoding.GetMaxByteCount(1) 返回 2。这是因为该方法考虑了先前解码器操作的潜在剩余代理。

[根据这个](http://msdn.microsoft.com/en-us/library/system.text.encoding.getmaxbytecount#Y1128)，方法 Encoding.GetMaxByteCount 也有一些相同的问题

> 请注意，GetMaxByteCount 考虑了先前解码器操作的潜在剩余代理。由于解码器的原因，将值 1 传递给该方法会检索 2 用于单字节编码，例如 ASCII。如果需要此信息，您的应用程序应使用 IsSingleByte 属性。

因此，我不确定要使用什么。

[进一步阅读](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T08:46:10.980

基本上，考虑在*常规*`GetMaxByteCount`代码中可能永远不需要的边缘情况，特别是它对解码器和代理的说明。这里的要点是，一些代码点被编码为代理对，*在不幸的情况下*，这可能意味着它跨越了对/的两个调用（在编码器/解码器上）。因此，*理论上*，实现可能有一个字节/字符仍被缓冲并等待处理，因此需要对此发出警告。**`GetBytes()``GetChars`*`GetMaxByteCount`***

 ***然而！只有当您直接使用编码器/解码器时，所有这些才有意义。如果您在 上使用操作`Encoding`，例如`Encoding.GetBytes`，那么所有这些都对您来说是抽象的*，您将永远不需要知道*。在这种情况下，只需使用就`IsSingleByte`可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:45:30.737

也许您应该使用[MSDN 上 Encoding.Convert Method 页面中的示例](http://msdn.microsoft.com/en-us/library/kdcak6ye.aspx#Y240)

该`Encoding.Convert`方法应提供一个 ASCII 编码的字符串。希望单字节..***

# css - ul 元素中的文本和图标之间没有空格

> ID：12526231
> 
> 赞同：0
> 
> 时间：2012-09-21T07:42:55.003
> 
> 标签：css, internet-explorer-7

我对 ie7 和 ul 列表元素有一点问题。

在 ie8/9 和 firefox 中，图标和文本之间有一个额外的空白：

![在此处输入图像描述](../Images/fa5037f4f411ce6ca1121b7b550772ce.png)

不幸的是，在 ie7 中，它看起来：

![在此处输入图像描述](../Images/e9c728507f2c53b4cbeaa0e7981cbfe4.png)

ul 列表的样式：

```
margin-top: 5px;
    list-style-image: url('../Images/listItem10.png');
    list-style-position: inside;
    padding-left: 5px; 
    font-weight: bold; 
    float: left; 
```

不幸的是，任何为它创建黑客的尝试都行不通。请提供任何建议，我该如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:53:01.073

…………………………………………………………………………………………………………………………

嗨，现在不习惯`background` **图像**`list-style-image`

```
margin-top: 5px;
    list-style:none;
background:url('../Images/listItem10.png') no-repeat 0 0;
    padding-left: 5px; 
    font-weight: bold; 
    float: left; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:53:50.000

嗯..尝试将图像作为“背景图像”包含在

*   并添加一个填充*   本身。现在填充将使*   向右移动，因为它设置在 :

    ```
    |
    |...|#'Text'
    |...|#'Text2'
    | 
    ```

    将填充添加到

    *   会使文本向右移动，而不是背景图像

    ```
    |
    ||#...'Text'
    ||#...'Text'
    | 
    ```

    也许这行得通:)（我希望“插图”能让您更好地了解我想说的话……：D）

# java - 在 AChartEngine 中为堆积图设置 Android Toast

> ID：12526234
> 
> 赞同：1
> 
> 时间：2012-09-21T07:43:07.740
> 
> 标签：java, android, bar-chart, achartengine

如何在 AChartEngine 中为堆积柱形图设置祝酒词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:59:10.737

看看 AChartEngine 演示。XYChartBuilder类完全[可以满足](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)您对折线图的需求。

只需将第 167 行更改为下面的行，您就会让它在堆积条形图上工作：

```
mChartView = ChartFactory.getBarChartView(this, mDataset, mRenderer, Type.STACKED); 
```

# matlab - 在 for 循环中迭代第 i 步并在返回下一个第 i 步之前使用该值插入另一个方程的问题

> ID：12526235
> 
> 赞同：0
> 
> 时间：2012-09-21T07:43:09.277
> 
> 标签：matlab, for-loop

我正在编写涉及 Matlab 中的中子星的长代码，但遇到了障碍。我要做的就是创建一个 for 循环，在其中我求解 r 的方程。在进行下一次第 i 次迭代之前，我需要将 r 的单个求解值代入另一个方程以求解 b。然后它可以回到开始并在下一个第 i 步再次执行这两个方程。我似乎很难对此进行编程，我认为这与我定义变量的方式有关。这是代码的那一部分：

```
clear all;

p=input('TauesNtm1 Value?');
n=input('Nt Value?');
t=input('Taues1 Value?');

for i=(2:1:((n/2)-2)/1);
    r(i)=.5*Log10((2*p)^((1 - 2*(i - 2))/(n - 4))*(t/2)^((2*(i - 2))/(n - 4)))+(i - 2)*(((n - 4)*p-2*p-.5*t)/(n - 4));
    b(r(i))=.434294*(.190352 + 2.20509566529930*r+1.379117301391070*r^2-0.481593138241581*r^3- 0.2311271889879584*r^4+0.500820485853822*r^5-0.269537234996903*r^6-0.20063340749777*r^7+0.475894136618535*r^8-0.2831206627297433*r^9-0.2328164535174437*r^10+0.585886001688777*r^11-0.3690986055298708*r^12-0.310009361710399*r^13+0.817684785462915*r^14-0.537360306829214*r^15-0.447280339896678*r^16+1.229551315307617*r^17-0.836592197418212*r^18-0.679642677307128*r^19+1.942584991455078*r^20);
end 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:11:05.127

你有两个错误。首先，您不能使用 r 引用 b，因为 r 是实数，并且数组只能由整数值引用。你需要这样做：

```
b(i) = ... 
```

不是那样的

```
b(r(i)) = ... 
```

另一件事是，在计算 b 时，您使用 r，它是一个向量。如果我理解正确，您只希望 b 的公式取决于 r(i)。您需要将 r 更改为 r(i)。这是生成的代码：

```
for i=(2:1:((n/2)-2)/1);
    r(i)=.5*log10((2*p)^((1 - 2*(i - 2))/(n - 4))*(t/2)^((2*(i - 2))/(n - 4)))+(i - 2)*(((n - 4)*p-2*p-.5*t)/(n - 4));
    b(i)=.434294*(.190352 + 2.20509566529930*r(i)+1.379117301391070*r(i)^2-0.481593138241581*r(i)^3- 0.2311271889879584*r(i)^4+0.500820485853822*r(i)^5-0.269537234996903*r(i)^6-0.20063340749777*r(i)^7+0.475894136618535*r(i)^8-0.2831206627297433*r(i)^9-0.2328164535174437*r(i)^10+0.585886001688777*r(i)^11-0.3690986055298708*r(i)^12-0.310009361710399*r(i)^13+0.817684785462915*r(i)^14-0.537360306829214*r(i)^15-0.447280339896678*r(i)^16+1.229551315307617*r(i)^17-0.836592197418212*r(i)^18-0.679642677307128*r(i)^19+1.942584991455078*r(i)^20);
end 
```

# apache-flex - Flex 应用程序作为 PROD 上的调试模式 - 缺点？

> ID：12526239
> 
> 赞同：0
> 
> 时间：2012-09-21T07:43:13.200
> 
> 标签：apache-flex, debugging, production-environment

我们有一个内部 flex 应用程序，其中性能很重要。

由于它是内部的，所以在 go life 之前几乎没有进行测试（嗯，就是这样），然后我们习惯于在 PROD 上进行调试。当您不必一次又一次地部署应用程序时，调试非常方便。

我知道出于安全原因在 PROD 上禁止调试，但在我们的上下文中它很好。还有其他原因我们应该在 PROD 上禁用它吗？

注意：我用谷歌搜索但只找到“如何”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:58:23.603

如果性能是“重要的”，那么使用启用调试器的编译是一个坏主意，除非（可能）您的应用程序非常小。我在性能和初始下载时间方面看到了非常明显的差异。

# php - 如何使用 javascript 检测 php 文件下载？

> ID：12526241
> 
> 赞同：0
> 
> 时间：2012-09-21T07:43:22.507
> 
> 标签：php, javascript, jquery, http-headers

我必须使用 php 标头进行文件下载

```
header("Cache-Control: no-cache, must-revalidate");
header("Content-Type: text/plain");
header('Content-Disposition: attachment; filename="'.$equip[1].'-config.txt"');
$downloadable=str_replace("\n", "\r\n", $res['result']);
echo $downloadable; 
```

当用户点击下载按钮时，表单会得到一个带有旋转 gif 的 jQuery 块 ui，因为文件生成时间很长。然后用户得到一个文件，我需要取消阻止我的表单......

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:47:18.477

只是一个想法：你不能发出 AJAX 请求来获取文件吗？收到 AJAX 响应后立即取消阻止表单。如果出现问题（404、500 等...），您还将获得状态

编辑：似乎它不会那样工作......但是你不能请求通过 AJAX 创建文档并且服务器以实际 URL 响应以下载文件......？您可以在开始下载后直接取消阻止您的表单，因为文件已经准备好，不再需要太多时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:40:59.040

好的，谢谢大家！

我的解决方案是：

*   制作隐藏表格
*   通过 Ajax 询问数据然后解除对其他表单的阻塞
*   使用 jQuery 将结果放入隐藏表单
*   用 jQuery 发布表单，返回 txt

我希望它可以帮助其他需要它的人！但是如果您知道其他更好的解决方案，请为大家发布！

# compilation - 编译是在 Titanium 的服务器上完成的吗？

> ID：12526254
> 
> 赞同：0
> 
> 时间：2012-09-21T07:44:09.590
> 
> 标签：compilation, titanium

我刚开始使用 Titanium，想知道我开发的应用程序是否会发送到 Titanium 服务器进行编译？有人可以澄清吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:31:11.720

您无需在任何 Titanium 服务器上编译应用程序。您可以在 Titanium Studio 中编译应用程序。在设备上测试应用程序时，Titanium Studio 会自动为各个平台生成 ipa 文件和 apk 文件

**编辑：**

使用 Titanium，开发人员可以创建一个编写 Javascript 并调用 Titanium 的 API 的应用程序。然后在运行时解释 Javascript。然后应用程序的 UI 变得完全原生。由于原生 Titanium API 接管了所有 UI 需求，因此您的应用程序中没有 Web UI。Titanium 使用两个 JavaScript 解释器之一运行应用程序的 JavaScript：iOS 上的 JavaScriptCore（Webkit 使用的解释器）和 Android 上的 Mozilla Rhino。

对 Titanium API 的 Javascript 调用映射到 Titanium 框架中的本机代码并生成本机组件。这些组件中的事件被发送回 Javascript 中的代码，我们可以在其中处理它们

# c - 为什么执行第二个 fgets 时我在 C 中的文件指针变为空？

> ID：12526257
> 
> 赞同：1
> 
> 时间：2012-09-21T07:44:49.837
> 
> 标签：c, file-io, fgets

我想读取一个文件，前两行。程序是：

```
 int main(void)
    {
      FILE *fp;
      char buf[1024];
      char value[128];
      long mem[2];
      char *pos;

      if (!(fp = fopen("example.txt", "r"))) {
        printf("CANNOT open example.txt\n");  
        return -2;
      }

      for(int i = 0; i < 2; ++i) {
        fgets(buf, 1024, fp);
        pos = strstr(buf, ":");
        if (!pos) {
            printf("MEMINFO wrong format\n");
            return -1;
        }

        strncpy(value, pos + 1, 128);
        mem[i] = atol(value);

        memset(buf, 0, sizeof(buf));
        memset(value, 0, sizeof(buf));
      }

} 
```

和 example.txt 就像：

```
MemTotal:        3541412 kB
MemFree:          123500 kB
Buffers:           11372 kB
Cached:          2582072 kB
SwapCached:         1520 kB
Active:          1832328 kB
Inactive:        1493348 kB
Active(anon):    1608692 kB
Inactive(anon):  1269620 kB
Active(file):     223636 kB 
```

当达到第二个 fgets 时，它会生成一个段错误。使用 gdb，我发现文件指针 fp 在第二个 fgets 中变为 0。问题是什么？fgets可以这样使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:47:41.120

`fgets()`在依赖结果之前，您需要检查是否成功。

另外，你为什么要`memset()`打电话，不管怎样`buf`，`value`当一切顺利时都应该被覆盖。它会导致一个错误：

```
 memset(value, 0, sizeof(buf)); 
```

缓冲区大小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:55:27.937

At the end of main, you need to call fclose() to close fp. The memset() calls are not needed. fgets() set '\0' at the end of buf.

# c# - NUnit 和不同线程中的测试

> ID：12526263
> 
> 赞同：0
> 
> 时间：2012-09-21T07:45:11.023
> 
> 标签：c#, .net, multithreading, nunit, semaphore

我正在测试一个应用程序。一个`[TearDown]`方法包含另一个向服务器发送请求的方法。这个很慢。同时，服务器无法同时处理超过 3 个请求。

所以我决定使用信号量。

```
 [TestFixture]
    public class TestBase
    {
        private const int MaxThreadsCount = 3;
        private readonly Semaphore _semaphore = new Semaphore(MaxThreadsCount, MaxThreadsCount);

        [SetUp]
        public virtual void Setup()
        {
        }

        [TearDown]
        public void CleanUp()
        {
            //...some code
            new Thread(_ => SendRequestAsync("url/of/a/server", parameters)).Start();
        }

        private void SendRequestAsync(string url, NameValueCollection parameters)
        {
            _semaphore.WaitOne();
            string result = MyServerHelper.SendRequest(url, parameters); 
            Assert.That(string.IsNullOrEmpty(result), Is.False, "SendRequest returned false");
        }

        [Test]
        public void Test01()
        {
            Assert.AreEqual(1, 1);
        }

        [Test]
        public void Test02()
        {
            Assert.AreEqual(1, 1);
        }

        [Test]
        public void Test03()
        {
            Assert.AreEqual(1, 1);
        }
        //...........................
        [Test]
        public void TestN()
        {
            Assert.AreEqual(1, 1);
        }
    } 
```

但是，它似乎无法正常工作。现在在服务器上的日志文件中没有记录，这意味着服务器没有收到任何请求。

1）我做错了什么？

2）如何初始化信号量：

```
private readonly Semaphore _semaphore = new Semaphore(MaxThreadsCount, MaxThreadsCount); 
```

或者

```
private readonly Semaphore _semaphore = new Semaphore(0, MaxThreadsCount); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:06:58.977

> 1）我做错了什么？

测试运行程序可能在线程完成（甚至开始）之前结束测试过程。[您可以使用Fiddler](http://www.fiddler2.com/)之类的东西来验证它，以验证测试和服务器之间没有通信。

是否有理由需要在单独的线程中运行它？除非您专门测试线程代码，否则请避免使用它，因为它只会产生复杂性。像往常一样调用它。这也意味着任何抛出的异常或错误都将被测试运行程序捕获并在测试结果中报告。

如果测试花费的时间太长（并且您无法修复服务器速度等根本原因），请考虑使用 AutoFac 之类的 IoC 容器或引用计数来在需要它的测试之间共享它。还可以考虑[并行](http://nunit.org/index.php?p=pnunit&r=2.5)运行测试。

> 2）如何初始化信号量：

[Semaphore 类构造函数](http://msdn.microsoft.com/en-us/library/e1hct27h.aspx)的第一个参数是请求的初始数量。在这种情况下，您可能希望将其初始化为 0，因为您最初没有运行任何请求。

请注意，信号量可能有助于测试发送的请求不超过三个，但如果测试同时运行，它不会帮助服务器，但您可能已经意识到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:15:43.013

我的理解是单元测试应该测试小单元的功能。您不需要创建多个线程来让您的测试正常工作。如果你的外部依赖很慢（比如网络连接或数据库）；您可以定义接口以将其抽象出来。

您应该能够在没有线程的情况下测试您想要的行为。我们可以假设线程工作 - 我们担心您拥有的代码。据推测，在您的代码中的某处，您有一个计数器，指示活动连接或请求的数量；或其他确定您是否可以接受另一个连接的方法。

您想测试当请求进入时会发生什么，当您已经达到最大值时。

所以写一个测试来做到这一点。将该计数器设置为最大值，调用打开的连接代码，并验证它是否失败并出现您预期的错误。

# websocket - 负载平衡网络套接字

> ID：12526265
> 
> 赞同：123
> 
> 时间：2012-09-21T07:45:11.460
> 
> 标签：websocket, load-balancing, server-push

我有一个关于如何负载平衡网络套接字的问题。

我有一个支持 Web 套接字的服务器。浏览器连接到我的站点，每个浏览器都打开一个 Web 套接字到`www.mydomain.com`. 这样，我的社交网络应用程序就可以向客户推送消息。

传统上，只使用 HTTP 请求，我会通过在两个 Web 服务器前面添加第二个服务器和一个负载平衡器来扩展。

使用 Web 套接字，连接必须直接与 Web 服务器，而不是负载均衡器，因为如果机器的物理限制为 64k 开放端口，并且客户端正在连接到负载均衡器，那么我无法支持超过 64k 并发用户。

那我怎么——

1.  让客户端在页面加载时直接连接到 Web 服务器（而不是负载均衡器）？每次最初请求页面时，我是否只是从节点加载 JavaScript，负载均衡器（或其他）随机修改脚本的 URL？

2.  处理波纹启动？当 Web 服务器关闭时，浏览器会注意到连接已关闭。我可以编写 JavaScript 代码来尝试重新打开连接，但节点会消失一段时间。所以我想我必须回到负载均衡器来查询下一个要使用的节点的地址？

3.  我确实想知道负载平衡器在初始请求上发送重定向，以便浏览器最初请求`www.mydomain.com`并被重定向到`www34.mydomain.com`. 这工作得很好，直到节点出现故障——而像 Facebook 这样的网站不会这样做。他们是怎么做到的呢？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-21T08:27:36.553

将基于源 IP 端口哈希分配 IP 数据包的 L3 负载平衡器放置到您的 WebSocket 服务器场。由于 L3 平衡器不维护任何状态（使用散列源 IP 端口），它将扩展到低端硬件（例如 10GbE）上的线速。由于分布是确定性的（使用散列的源 IP 端口），它将与 TCP（以及 WebSocket）一起使用。

另请注意，64k 硬限制仅适用于给定（源）IP 地址的*传出TCP/IP。*它不适用于传入的 TCP/IP。我们已经在 2 核、4GB RAM 的 VM 上测试了[Autobahn](http://autobahn.ws)（一种高性能 WebSocket 服务器）和 200k 活动连接。

另请注意，您可以在初始 WebSocket 握手期间宣布的 HTTP 路径上进行 L7 负载平衡。在这种情况下，负载均衡器必须维护状态（哪个源 IP 端口对将连接到哪个后端节点）。尽管如此，在体面的设置下，它可能会扩展到数百万个连接。

免责声明：我是 Autobahn 的原作者，为 Tavendo 工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-31T13:14:39.787

请注意，如果您的 websocket 服务器逻辑在带有 socket.io 的 nodejs 上运行，您可以告诉 socket.io 使用共享的 redis 键/值存储进行同步。这样您甚至不必关心负载均衡器，事件将在服务器实例之间传播。

```
var io = require('socket.io')(3000);
var redis = require('socket.io-redis'); 
io.adapter(redis({ host: 'localhost', port: 6379 })); 
```

请参阅：[Socket IO - 使用多个节点](https://socket.io/docs/v4/using-multiple-nodes/)

但在某些时候我猜redis可能会成为瓶颈......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-21T16:44:29.767

您还可以通过检查和“路由功能”实现第 7 层负载平衡

请参阅“如何使用 Stingray 流量管理器检查和负载平衡 WebSocket 流量，以及在必要时如何管理在同一 IP 地址和端口上接收的 WebSocket 和 HTTP 流量。” [https://splash.riverbed.com/docs/DOC-1451](https://splash.riverbed.com/docs/DOC-1451)

# c# - 字段初始值设定项不能引用非静态字段、方法或属性

> ID：12526266
> 
> 赞同：0
> 
> 时间：2012-09-21T07:45:11.493
> 
> 标签：c#, winforms, delegates, static-methods

我的应用程序旨在从 XLSX 电子表格中获取大量数据（40 万多条记录），在表单上的 DataGridView 中显示每个工作表中的数据，还允许您将所选工作表的数据导出到 mySQL。

导出将在它自己的线程上进行（请注意，这里有很多不完整的内容）：

```
 private AddItemCallBack AddItemDelegate = new AddItemCallBack(AddItemMethod);
    private delegate void AddItemCallBack(int Total);

    private void lnkExport_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        sName = ddlTables.SelectedValue.ToString();
        pb = progressBar1;

        var t = new Thread(() => ExportData(sName));
        t.Start();
    }

    private void ExportData(string SheetName = "")
    {
        string sql = "select * from " + String.Format(tablename, SheetName);
        OleDbCommand cmd = new OleDbCommand(sql, conn);

        DataSet ds = new DataSet();
        OleDbDataAdapter da = new OleDbDataAdapter();

        da.SelectCommand = cmd;
        da.Fill(ds);

        connStr = "Data Source=localhost; Initial Catalog=test; User ID=root; Password=Ly@12157114";
        MySqlConnection con = new MySqlConnection(connStr);
        totalRecords = ds.Tables[0].Rows.Count;
        currentRecords = 0;

        foreach (DataRow row in ds.Tables[0].Rows)
        {
            sql = "insert into planet(clubid, clubname, acctno, title, firstname, lastname, cell, email, derp, accttype) " +
            "values(@id, @name, @acct, @title, @fname, @lname, @cell, @email, @derp, @type)";

            MySqlCommand command = new MySqlCommand(sql, con);

            command.Parameters.AddWithValue("@id", row[0]);
            command.Parameters.AddWithValue("@name", row[1]);
            command.Parameters.AddWithValue("@acct", row[2]);
            command.Parameters.AddWithValue("@title", row[3]);
            command.Parameters.AddWithValue("@fname", row[4]);
            command.Parameters.AddWithValue("@lname", row[5]);
            command.Parameters.AddWithValue("@cell", row[6]);
            command.Parameters.AddWithValue("@email", row[7]);
            command.Parameters.AddWithValue("@derp", row[8]);
            command.Parameters.AddWithValue("@type", row[9]);

            try
            {
                con.Open();
                command.ExecuteNonQuery();
                con.Close();
                currentRecords = currentRecords + 1;

                this.Invoke(this.AddItemDelegate, new object[] { totalRecords });
            }
            catch (MySqlException ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }

    }

    private static void AddItemMethod(int Total)
    {
        progressBar1.Maximum = Total;

        if (progressBar1.Value < progressBar1.Maximum)
        {
            progressBar1.Value = progressBar1.Value + 1;
        }
        else
        {
            progressBar1.Value = 0;
        }            
    } 
```

VS抱怨说

> 错误 1 ​​非静态字段、方法或属性 'ImportExcel.Form1.progressBar1' 需要对象引用 G:\ImportExcel\ImportExcel\Form1.cs 139 13 ImportExcel

对于 AddItemMethod void 中的progressBar1 控件引用的每个实例。

我可以从 void 中删除静态类型定义，但随后在定义 CallBack 的行上出现相同的错误，说 AddItemMethod 不是静态的。

真的不知道在这里做什么。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T07:53:25.247

使您的 AddItemMethod 非静态并使用构造函数来初始化您的回调。

```
private AddItemCallBack AddItemDelegate;
private delegate void AddItemCallBack(int Total); 

private void AddItemMethod(int Total)
{
    progressBar1.Maximum = Total; 
    if (progressBar1.Value < progressBar1.Maximum)
    {
        progressBar1.Value = progressBar1.Value + 1;
    } 
    else 
    { 
        progressBar1.Value = 0; 
    }
}

public Form1()
{
    InitializeComponent();
    AddItemDelegate = new AddItemCallBack(AddItemMethod);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:52:33.143

`progressBar1`是一个*实例*字段，因此您无法在`static`方法中访问它。您需要将其设为`static`字段或更改`AddItemMethod`为实例方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:53:48.720

1.  静态方法不能引用实例字段（与静态字段相反），我想 progressBar1 不是静态的。解决方案是使`AddItemMethod`非静态的。
2.  您不能将`AddItemCallback`字段初始化程序设置为实例方法，因为字段初始化程序在构造函数之前执行，因此可能不依赖于非静态成员。这就是为什么当您简单地更改`AddItemMethod`为实例方法时编译器会抱怨。在构造函数中初始化该字段以规避它。

```
private AddItemCallBack AddItemDelegate;

public Form1() 
{
    AddItemDelegate = AddItemMethod;
    // ... other stuff
    InitializeComponents(); // totally guessed, but seems like Form1 is auto generated
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T07:50:14.657

没有看到更多代码的最简单方法是将progressBar1 作为参数传递给静态方法AddItemMethod

# mercurial - Mercurial 错误地显示新文件（真的已经推送）

> ID：12526267
> 
> 赞同：0
> 
> 时间：2012-09-21T07:45:11.883
> 
> 标签：mercurial, tortoisehg

我的公司安装了一个 mercurial 版本控制。我们有中央存储库并定期从那里提取更改。
我电脑上的几个文件被标记为较新的文件。但实际上它们已经存在在那里。
如果我物理删除它们，它们就会被标记为已删除。如果我恢复它们，它们就会变成新的。我已经尝试将此存储库重新加载到更新的位置，但情况又重复了。
谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:16:58.747

听起来很像您正在拉动但没有更新。

拉取获取其他人所做的更改集，但在您更新到它们之前，它们不会在您的代码目录中变为活动状态。

如果我误解了，您能否发布一系列命令以及您获得的输出来证明问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:14:39.027

如果您错过了*某些文件*的图标覆盖，您可以尝试 TortoiseHG - 更新图标（或者只是`cd`前进和后退一段时间，重新启动覆盖图标服务器......）

*如果您错过了某种类型*的所有文件的图标覆盖，您的操作系统可能会达到覆盖限制（不同 Tortoise* 的捆绑可以产生这种效果）

# vim - Vim 在文件夹中搜索文本

> ID：12526274
> 
> 赞同：11
> 
> 时间：2012-09-21T07:46:06.977
> 
> 标签：vim, vim-plugin

有没有办法在文件夹中搜索一些文本并在 Vim 中的单独缓冲区中显示搜索结果？（如 Sublime Text`Ctrl + Shift + F`结果）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-21T08:15:49.300

不，您*不需要*任何插件。默认`:vimgrep`（或`:vim`）就是您所*需要*的。

`foo`在当前目录的每个文件中搜索：

```
:vim foo * | cw 
```

`foo`在当前目录的每个 JavaScript 文件中搜索：

```
:vim foo *.js | cw 
```

`foo`在当前目录中的每个 JavaScript 文件中递归搜索：

```
:vim foo **/*.js | cw 
```

在当前目录的每个文件中搜索当前单词：

```
:vim <C-r><C-w> * | cw
:vim <cword> * | cw 
```

（编辑：使用`:cw[indow]`代替`:copen`）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T07:51:15.333

听起来你需要[`ack.vim`](https://github.com/mileszs/ack.vim)：

> 这个插件是 Perl 模块 App::Ack 的前端。Ack 可以替代 99% 的 grep 使用。这个插件将允许您从 vim 运行 ack，并在拆分窗口中显示结果。

用法：

```
:Ack [options] {pattern} [{directory}]
Search recursively in {directory} (which defaults to the current directory) for the {pattern}. 
```

> 包含搜索词的文件将与出现的行号一起在拆分窗口中列出，每次出现一次。在此窗口中的一行上按 [Enter] 将打开文件，并将光标放在匹配的行上。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T08:15:19.020

Vim 命令将`:grep`搜索委托给外部`grep`工具（或兼容的替代工具，例如`ack`，通过设置`'grepprg'`）。或者，您可以使用`:vimgrep`，它在 Vim 中执行搜索。这允许使用相同的 Vim 风格的正则表达式和 glob 模式（如`**/`），但它通常较慢，因为每个文件都被读入 Vim 缓冲区。

这两个命令都在快速修复窗口中显示结果，您可以从中导航到匹配项。

您不需要任何插件，尽管有几个可用的插件试图使处理更简单或支持不同的搜索命令（例如已经提到的*ack.vim*）。

# asp.net - asp.net mvc 4 razor 自定义 html 助手通过 IEnumerable

> ID：12526275
> 
> 赞同：0
> 
> 时间：2012-09-21T07:46:08.683
> 
> 标签：asp.net, asp.net-mvc, razor, html-helper

我有强类型列表视图

我有必须得到的自定义 html 助手`IEnumerable<object>`

是否可以将我的模型（`@model IEnumerable<MvcApplication2.Models.UserViewModel>`）传递给我的 html 助手？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:52:07.080

如果你的助手是这样定义的：

```
public static IHtmlString SomeHelper(this HtmlHelper<IEnumerable<object>> html) 
```

那么**不可能**这样称呼它：

```
@model IEnumerable<MvcApplication2.Models.UserViewModel>
@Html.SomeHelper() 
```

另一方面，如果它是这样定义的：

```
public static IHtmlString SomeHelper(this HtmlHelper html, IEnumerable<object> model) 
```

您可以从您的视图中调用它并传递模型：

```
@model IEnumerable<MvcApplication2.Models.UserViewModel>
@Html.SomeHelper(Model) 
```

# linux-kernel - Arm Cortex A-9 内核中的“零除法”在哪里

> ID：12526276
> 
> 赞同：1
> 
> 时间：2012-09-21T07:46:10.423
> 
> 标签：linux-kernel, linux-device-driver, kernel, divide-by-zero

我正在研究零除法的内核源代码（2.6.35）。

我在用户空间程序中插入了零除法，所有线程都停止了。

所以我想知道 Arm Cortex A-9 内核中的“零除法”在哪里？

我无法为此找到任何陷阱....

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T08:38:24.167

这取决于架构。**给定x86 系统**上的以下用户空间代码：

```
main() {                                                                                                                                                                             
   int x = 42 / 0;                                                                                                                                                                   
} 
```

编译器将`idivl`命令插入到目标代码中。当除数为 0 执行此命令时，CPU 会生成除零陷阱（类似于中断）。这会调用`divide_error`内核内部的陷阱处理程序，如果是 x86，它位于`arch/x86/kernel/entry_32.S`：

```
ENTRY(divide_error)
        RING0_INT_FRAME
        pushl_cfi $0                    # no error code
        pushl_cfi $do_divide_error
        jmp error_code
        CFI_ENDPROC
END(divide_error) 
```

然后`error_code`目标会处理所有必要的操作来处理错误并最终从陷阱中返回。

* * *

在**ARM**上，情况有所不同：除了少数例外，[ARM CPU 没有硬件除法指令](http://wanderingcoder.net/2010/07/19/ought-arm)（例如 Arm Cortex A-9 没有）。除法需要作为库函数来实现。对于内核，这是在`arch/arm/lib/lib1funcs.S`您还可以找到除以零处理的地方实现的。对于用户空间应用程序，我想这是作为 libgcc 库中的库函数实现的。

# php - 在日历中突出显示当前日期

> ID：12526282
> 
> 赞同：0
> 
> 时间：2012-09-21T07:46:25.623
> 
> 标签：php, javascript, calendar

我有一个生成日历的 PHP 代码。我试图在以下代码中突出显示当前日期：

```
<?php
require("aacfs.php");

define("ADAY", (60*60*24));

if ((!isset($_POST['month'])) || (!isset($_POST['year']))) {
    $nowArray = getdate();
    $month = $nowArray['mon'];
    $year = $nowArray['year'];
} else {
    $month = $_POST['month'];
    $year = $_POST['year'];
}
$start = mktime(12,0,0,$month,1,$year);
$firstDayArray = getdate($start);
?>
<html>
<head>
<title><?php echo "Calendar: ".$firstDayArray['month']." " . $firstDayArray['year']; ?></title>
</head>
<script type="text/javascript">
function eventWindow(url) {
    var width = 500;
    var height = 500;
    var left = parseInt((screen.availWidth/2) - (width/2));
    var top = parseInt((screen.availHeight/2) - (height/2));
    var windowFeatures = "width=" + width + ",height=" + height + ",status,resizable,left=" + left + ",top=" + top + "screenX=" + left + ",screenY=" + top;
    event_popupWin = window.open(url, "subWind", windowFeatures, "POS", 'event', 'resizable=yes,scrollbars=yes,toolbar=no,width=400,height=400');
    event_popupWin.opener = self;
}
</script>
<script type="text/javascript">

    function hiliteToday(){
        var nDate = new Date();
        nDate = nDate.getDate();
        var nTable = document.getElementById('currMonth');
        nRows = nTable.rows.length;
        nCells = nTable.rows[0].cells.length;
        for (i=0; i<nRows; i++)
            {
             for (n=0; n<nCells; n++)
                {
                 var tmp = nTable.rows[i].cells[n].innerHTML;
                 tmp = tmp.split("<");
                 if (tmp[0] == nDate){nTable.rows[i].cells[n].style.backgroundColor = 'cyan'}
                }

            }
    }

    window.onload=hiliteToday;

</script>
<body>
<h1><center>Select a Month/Year</center></h1>
<center><form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<select name="month">
<?php
$months = Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

for ($x=1; $x<=count($months); $x++){
    echo "<option value=\"$x\"";
    if ($x == $month){
        echo " selected";
    }
    echo ">".$months[$x-1]."</option>";
}
?>
</select>
<select name="year">
<?php
for ($x=2012; $x<=2027; $x++){
    echo "<option";
    if ($x == $year){
        echo " selected";
    }
    echo ">$x</option>";
}
?>
</select>
<input type="submit" name="submit" value="Go">
</form></center>
<br />
<?php
$days = Array("Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat");
echo "<center><table border=\"1\" cellpadding=\"5\" id=\"currMonth\"><tr>\n";
foreach ($days as $day) {
    echo "<td style=\"background-color: #CCCCCC; text-align: center; width: 14%\">
          <strong>$day</strong></td>\n";
}

for ($count=0; $count < (6*7); $count++) {
    $dayArray = getdate($start);
    if (($count % 7) == 0) {
        if ($dayArray["mon"] != $month) {
            break;
        } else {
            echo "</tr><tr>\n";
        }
    }
    if ($count < $firstDayArray["wday"] || $dayArray["mon"] != $month) {
        echo "<td>&nbsp;</td>\n";
    } else {
        $chkEvent_sql = "SELECT acode FROM reservation WHERE month(etd) = '".$month."' AND dayofmonth(etd) = '".$dayArray["mday"]."' AND year(etd) = '".$year."' ORDER BY etd";
        $chkEvent_res = mysql_query($chkEvent_sql) or die(mysql_error());

        if (mysql_num_rows($chkEvent_res) > 0) {
            $event_title = "<br/>";
            while ($ev = mysql_fetch_array($chkEvent_res)) {
                $event_title .= stripslashes($ev["acode"])."<br/>";
            }
            mysql_free_result($chkEvent_res);
        } else {
            $event_title = "";
        }

        echo "<td valign=\"top\"><a href=\"javascript:eventWindow('event.php?m=".$month."&d=".$dayArray["mday"]."&y=$year');\">".$dayArray["mday"]."</a><br/>".$event_title."</td>\n";

        unset($event_title);

        $start += ADAY;
    }
}
echo "</tr></table></center>";
mysql_close();
?>
</br><center><a href="javascript:self.close()"><font face="consolas"><b>Close</b></font></a></center>
</body>
</html> 
```

但它似乎不起作用。javasript 函数`hiliteToday()`应该可以工作，因为我将它绑定在其中，`<table id='currMonth'>`但我没有得到任何结果。我究竟做错了什么？请帮我。提前致谢！

编辑：这是日历的样子：

![在此处输入图像描述](../Images/c75bdfa02552a86a8591bff24ef1a1e0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:07:28.807

您正在检查 if (tmp[0] == nDate)，如果表格单元格有当前日期。在今天的示例“21”中。但是您永远不会只为表格单元格设置天数。

将您的第二个 for 循环更改为：

```
 for (n=0; n<nCells; n++)
            {
             var tmp = nTable.rows[i].cells[n].innerHTML;
             if (tmp.search(nDate)!=-1){nTable.rows[i].cells[n].style.backgroundColor = 'cyan'}
            } 
```

您每个单元格的内容类似于

```
<a href="">DAYOFMONTH</a>Title 
```

您现在正在拆分“>”，因此您在 tmp[1] 中获得了您的月份日期。使用“搜索”，您可以在字符串中搜索正则表达式。

编辑：

```
<script type="text/javascript">

    function hiliteToday(){
        var nDate = new Date();
        var sDate = nDate.getMonth()+1 + "_" + nDate.getDate();
        document.getElementById(sDate).style.backgroundColor = 'cyan';
    }

window.onload=hiliteToday;

</script> 
```

将您的 PHP 回显更改为：

```
echo "<td id=\"".$month."_".$dayArray["mday"]."\" valign=\"top\"><a href=\"javascript:eventWindow('event.php?m=".$month."&d=".$dayArray["mday"]."&y=$year');\">".$dayArray["mday"]."</a><br/>asdas</td>\n"; 
```

# magento - Magento 性别客户集合

> ID：12526283
> 
> 赞同：2
> 
> 时间：2012-09-21T07:46:31.867
> 
> 标签：magento

我尝试使用我的自定义模块创建新客户帐户。我需要将性别与客户帐户创建一起存储。这是我尝试存储性别的集合。

```
 $customer = Mage::getModel('customer/customer')->setId(null);
        $customer->setData('firstname', $data['first_name']);
        $customer->setData('lastname', $data['last_name']);
        $customer->setData('email', $data['email']);
        $customer->setData('gender', $data['gender']);
        $customer->setData('is_active', 1);
        $customer->setData('confirmation', null);
        $customer->setConfirmation(null);
        $customer->getGroupId();
        $customer->save(); 
```

在此集合中，名字、姓氏和电子邮件正确保存在客户表中。但是性别信息没有保存在客户表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:46:24.730

除了两个小错误（双重设置`confirmation`, obsolete `getGroupId`）之外，这应该可以工作。

我的猜测是您在`$data['gender']`.

尝试使用固定的性别值来检查：

```
$customer = Mage::getModel('customer/customer')
    ->setFirstname('John')
    ->setLastname('Doe')
    ->setEmail('51zv52zg@example.com')
    ->setGender(
        Mage::getResourceModel('customer/customer')
            ->getAttribute('gender')
            ->getSource()
            ->getOptionId('Female')
    )
    ->setIsActive(1)
    ->setConfirmation(null)
    ->save(); 
```

# intellij-idea - 如何在Idea中复制当前行号？

> ID：12526287
> 
> 赞同：12
> 
> 时间：2012-09-21T07:46:58.800
> 
> 标签：intellij-idea

有人知道如何在 Intellij Idea 11 中复制当前行号吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-12-10T22:43:11.930

您可以使用`Ctrl+Shift+Alt+C`复制对线或符号的引用。在类中使用时，它会将格式为 的字符串复制到剪贴板`<fully qualified path>:<line number>`。

[我在IDEA 14](https://www.jetbrains.com/idea/help/cutting-copying-and-pasting.html)的文档中遇到了此功能，但如果我正确解释了文档，则此功能自 IDEA 10.5 起就可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:45:41.627

此功能目前在 IntelliJ IDEA 中不可用。可以编写一个插件，添加一个将当前行号复制到剪贴板的操作，应该不会很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:56:28.683

在 IntelliJ IDEA v12 及更高版本中，我们可以使用`Ctrl`+ `G`，然后使用`Ctrl`+ `C`。

# windows - 需要一个函数将字符转换为其名称

> ID：12526289
> 
> 赞同：0
> 
> 时间：2012-09-21T07:47:05.190
> 
> 标签：windows, function, methods

我想知道 Windows 中是否有一些函数可以将给定的字符转换为其名称。

cout << SomeFun('\t'); cout << SomeFun(' '); cout << SomeFun(',');

输出为：TAB SPA COMMA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:11:40.720

在 Win32 API、C++ 标准库或 C 标准库中都没有这样的函数——但您可以轻松地[自己制作一个](http://ideone.com/9VoCH)使用查找表返回结果的函数。

# iphone - Xtify 框架和 ASI-HTTP-Request 重复符号

> ID：12526290
> 
> 赞同：1
> 
> 时间：2012-09-21T07:47:06.670
> 
> 标签：iphone, ios, asihttprequest, xtify

最近我创建了一个应用程序，其中使用了 ASI-HTTP-Request 和 Urban Airship，它已成功提交到 Apple App Store，现在我们的客户想要迁移到 xtify，但是当我按照[步骤](http://developer.xtify.com/display/sdk/iOS+Integration+Guide+for+APNS)将 Xtify 集成到我们的应用程序中时，我面临重复符号问题，在 ASI-HTTP-Request 和 Xtify 的 xASIHTTPRequest 中存在重复符号，我认为它包含在 Xtify 框架中。这是错误屏幕截图。请帮我解决这个问题。

![在此处输入图像描述](../Images/f35e1a0dfbfd9e48e59e217af8a75e89.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:52:25.067

Xtify 有一个替代的构建包，它将 Xtify 使用的库从编译的框架中移到 ExternalLib 文件夹中。检查此页面上有关 Xtify 正在使用的库的 SDK 注释以及 iOS 专用 SDK 包的链接：http: [//developer.xtify.com/display/sdk/Download+the+Xtify+SDKs](http://developer.xtify.com/display/sdk/Download+the+Xtify+SDKs)

# javascript - 选择选项 onchange 时在锚标记中显示值

> ID：12526291
> 
> 赞同：0
> 
> 时间：2012-09-21T07:47:06.580
> 
> 标签：javascript, jquery

Below is script when select option onchange input box will echo the value for select option :

```
<select id="theSelect">
 <option value="888">Foo</option>
 <option value="999">Bar</option>
</select>
<br />
<input id="someInput"/>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
  $("#theSelect").change(function() {
  $("#someInput").val($(this).val());
  }).change(); // trigger once if needed
</script> 
```

我的问题是如何在锚标签内回显值（参考 id 值）：

例子 ：`<a href="index.php?id=999" id="link">Click here</a>`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:48:46.713

您可以使用[`prop()`](http://api.jquery.com/prop/)方法`href`为链接设置值：

```
$("#theSelect").on("change", function() {
    $("#link").prop("href", "index.php?id=" + this.value);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:04:02.980

尝试这个

​</p>

```
$(function() {
    $('#theSelect').on('change' , function() {
        var $anchor = $('#link')
        var currVal = $(this).find('option:selected').val();
        alert('Old href is : ' + $anchor.attr('href'));
        $anchor.attr('href' , 'index.php?id=' + currVal);
        alert('New href is : ' + $anchor.attr('href'));

    })
});​ 
```

检查[演示](http://jsfiddle.net/wwypP/)

# groovy - 在地图 grails 中排序

> ID：12526293
> 
> 赞同：2
> 
> 时间：2012-09-21T07:47:11.110
> 
> 标签：groovy, map

我有这样的地图-

```
def a=["Ak":[data1,col,'ak'],"BH":[data2,col,'bh']] 
```

在另一张地图

```
def b=[:] 
```

使用插入数据

```
a.each{key,val->
  def available = val.get(0)
  if (available){
    b[key] = val
  }
} 
```

现在根据这张地图bi需要在视图中分配表中的数据。

我的问题是我想检查两者的数据大小，`data1`并`data2`在每次用户深入查看视图时显示大尺寸的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:24:40.147

假设您的意思是您首先想要拥有最多数据的那个，您可以这样做（假设 Groovy 晚于 1.7.9）：

```
// dummy data
def data1 = [ 1, 2, 3 ]
def data2 = [ 5, 6, 7, 8 ]
def col = 'something'

// original map
def a=["Ak":[data1,col,'ak'],"BH":[data2,col,'bh']]

def b = a.findAll { k, v -> v[ 0 ] }               // Keep those with data
         .collectEntries { k, v -> [ k, v[ 0 ] ] } // Make a new map of key:data
         .sort { -it.value.size() }                // Sort it by data size descending 
```

# c++ - OGG Vorbis：已定义，但未使用 - 如何抑制？

> ID：12526298
> 
> 赞同：0
> 
> 时间：2012-09-21T07:47:18.997
> 
> 标签：c++, c, openal, ogg, vorbis

我在学校有一个小组项目（3D FPS 游戏），我使用 C++ 中的 OpenAL 和 OGG Vorbis 编写音频。我们的编译器设置为警告我们已定义但未使用的变量，这被证明是 Vorbis 的一个问题。当我编译我们的应用程序时，我得到了这个：

```
[  8%] Building CXX object CMakeFiles/fps.dir/src/audio/Sound.cpp.o
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:82:21: warning: ‘OV_CALLBACKS_NOCLOSE’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:89:21: warning: ‘OV_CALLBACKS_STREAMONLY’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:96:21: warning: ‘OV_CALLBACKS_STREAMONLY_NOCLOSE’ defined but not used [-Wunused-variable]
[  9%] Building CXX object CMakeFiles/fps.dir/src/audio/MenuAudioController.cpp.o
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:75:21: warning: ‘OV_CALLBACKS_DEFAULT’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:82:21: warning: ‘OV_CALLBACKS_NOCLOSE’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:89:21: warning: ‘OV_CALLBACKS_STREAMONLY’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:96:21: warning: ‘OV_CALLBACKS_STREAMONLY_NOCLOSE’ defined but not used [-Wunused-variable]
[ 10%] Building CXX object CMakeFiles/fps.dir/src/audio/GameAudioController.cpp.o
In file included from /home/berzeger/FPS/FPS/trunk/game/src/audio/GameAudioController.cpp:1:0:
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:75:21: warning: ‘OV_CALLBACKS_DEFAULT’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:82:21: warning: ‘OV_CALLBACKS_NOCLOSE’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:89:21: warning: ‘OV_CALLBACKS_STREAMONLY’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:96:21: warning: ‘OV_CALLBACKS_STREAMONLY_NOCLOSE’ defined but not used [-Wunused-variable]
[ 11%] Building CXX object CMakeFiles/fps.dir/src/audio/AudioController.cpp.o
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:75:21: warning: ‘OV_CALLBACKS_DEFAULT’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:82:21: warning: ‘OV_CALLBACKS_NOCLOSE’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:89:21: warning: ‘OV_CALLBACKS_STREAMONLY’ defined but not used [-Wunused-variable]
/home/berzeger/FPS/FPS/trunk/game/src/audio/../../include/vorbis/vorbisfile.h:96:21: warning: ‘OV_CALLBACKS_STREAMONLY_NOCLOSE’ defined but not used [-Wunused-variable] 
```

等等。您可以看到这是一团糟，重要的东西很容易丢失。

我似乎无法找到一种方法来抑制 vorbis 未使用的变量。我试过

```
#define OV_EXCLUDE_STATIC_CALLBACKS 
```

但这会禁用所有 vorbis 定义，这不是我想要的。

有人可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:57:15.267

就我个人而言，我会修改我的构建脚本以过滤掉那些特定的警告，但如果你不喜欢这样做......

您可以创建一个包装器头文件，包括包装器文件而不是 vorbis 标头，并在包装​​器标头中使用问题变量，以便警告消失。假设它们是整数常量，这样的东西就足够了。

```
//File: myvorbisfile.h
#include "vorbisfile.h"

// Dummy function in the anonymous namespace 
// to suppress the unused variables
namespace
{
   int hide_unused_variables()
   {
     return 0
      + OV_CALLBACKS_NOCLOSE
      + OV_CALLBACKS_DEFAULT
      ... Fill in the rest ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:13:25.370

好的，我想我现在得到了解决方案。我们将头文件复制到我们的应用程序目录中，所以我以这种方式包含 vorbisfile.h：

```
#include "../../include/vorbis/vorbisfile.h" 
```

当我将这一行更改为：

```
#include <vorbis/vorbisfile.h> 
```

警告消失了。不知道为什么。

# actionscript-3 - actionscript 3 Camera.getCamera 问题

> ID：12526302
> 
> 赞同：0
> 
> 时间：2012-09-21T07:47:39.053
> 
> 标签：actionscript-3

我的行动：

1.  我打开了网络摄像头

2.  执行代码：`Camera.getCamera()`并得到一个普通的相机对象和相机事件：`Camera.Unmuted`

3.  关闭网络摄像头

4.  在同一个应用程序中执行代码：`Camera.getCamera()`并得到一个正常的相机对象和相机事件：“ `Camera.Unmuted`”

5.  为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:02:41.140

该[状态](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#event:status)事件中使用的名称`Camera`选择不当。当事件`code`为“Camera.Unmuted”时，仅表示用户已允许访问相机（通过 Flash Player 的隐私对话框）。它并不意味着其他任何事情，例如相机是否正常工作。

[Camera.muted](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#muted)属性的文档也提供了这一点。

`Microphone`当您考虑到该类使用相同的约定时，使用静音/非静音来传达是否允许访问这些设备似乎是一个更糟糕的选择。

**[编辑]**

[您可以使用相机的activityLevel](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#activityLevel)（与 motionLevel 结合）和[currentFPS](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#currentFPS)属性来推断相机是否可以确定地工作。一旦您拿到相机并正在捕捉视频，这些将具有非零值。

[在这个问题](https://stackoverflow.com/questions/3042288/detect-if-camera-is-capturing-in-flash)中可以找到一些其他信息。

# android - 如何在android中实现voip

> ID：12526305
> 
> 赞同：4
> 
> 时间：2012-09-21T07:47:52.387
> 
> 标签：android, call, voip

我想在 android 中使用 voip 功能。我可以使用什么来在 android 中实现 voip 功能？

需要在接收端手机上安装相同的应用程序。请发布链接或来源，以便我可以实现此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:07:25.760

你试过[sipDroid 吗](http://android.appstorm.net/reviews/communication/sipdroid-a-robust-open-source-voip-client/)？其用于 Voip 通话的开源客户端。按照我分享的链接，您将获得所需的所有详细信息。

谷歌还有一个名为[SipDemo](http://docs.huihoo.com/android/2.3/resources/samples/SipDemo/index.html)的演示应用程序。它与android本身捆绑在一起

# android - 进度条未关闭

> ID：12526308
> 
> 赞同：1
> 
> 时间：2012-09-21T07:48:09.497
> 
> 标签：android, android-asynctask, progress-bar

我没有完成关闭我的 Android 应用程序中的进度条。我声明了一个对象 bar 对象并获取一个调用 doInProgress 函数的字符串，并将一个名为 v1 的对象传递给它。当异步任务完成他的任务时，为什么进度条（出现 wichs）没有像 onPostExecute 方法中声明的那样被解除？

在我的活动中，我调用：

```
ProgressDialog pDialog;
response = new GetString(SecondActivity.this).execute(v1).get(); 
```

这是 myAsync 任务：

```
package com.gms;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;

public class GetString extends AsyncTask<VariablesTable, Void, String> {

        private Context context;

        public ProgressDialog pDialog;

        public GetString(Context c){
            context = c;
        }           

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(context);
            pDialog.setMessage("Loading..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        protected void onPostExecute() {
            // dismiss the dialog once got all details
            if (pDialog.isShowing()){
                pDialog.dismiss();
            }
        }

        @Override
        protected String doInBackground(VariablesTable... obj) {
            // Making HTTP request
            InputStream is = null;

            try {
                    DefaultHttpClient httpClient = new DefaultHttpClient();
                    String paramString = URLEncodedUtils.format(obj[0].cat, "utf-8");
                    obj[0].url += "?" + paramString;
                    HttpGet httpGet = new HttpGet(obj[0].url);

                    HttpResponse httpResponse = httpClient.execute(httpGet);
                    HttpEntity httpEntity = httpResponse.getEntity();
                    is = httpEntity.getContent();          

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

                BufferedReader reader = null;
                try {
                    reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
                } catch (UnsupportedEncodingException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                StringBuilder sb = new StringBuilder();
                String line = null;
                try {
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                try {
                    is.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return sb.toString();
        }
    } 
```

建议？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:01:43.410

我认为问题在于您启动 ASyncTask 的方式。

```
response = new GetString(SecondActivity.this).execute(v1).get(); 
```

如果您从 UI 线程调用它，它将使其阻塞在那里。删除该`.get()`部分，以便线程可以继续运行并正常执行您的`onPreExecute`和`onPostExecute`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:54:52.200

chck post execute，我怀疑它是否有效

尝试将 onPostExecute() 更改为 onPostExecute(String resp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T05:42:18.907

在 onPostExecute() 方法中执行 System.out 以检查控件是否在此方法中到达。如果 onPost 被执行并且对话框没有关闭，那么在 UI 线程中关闭对话框 --- context.runOnUiThread 如果它仍然不起作用，则将 ProgressDialog 设为静态（不是一个解决方案，只是尝试一下），希望它现在会关闭。

# java - 返回十进制而不是字符串（POI jar）

> ID：12526310
> 
> 赞同：1
> 
> 时间：2012-09-21T07:48:11.300
> 
> 标签：java, apache-poi, xls, xlsx

我需要阅读 xls 或 xlsx 表。我成功地阅读了工作表，但它返回十进制值而不是字符串（例如：对于 3 - 它返回 3.0）。我需要按原样读取单元格值。所以我需要作为字符串返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:09:49.143

POI 为您提供 Excel 存储在文件中的确切值。通常，如果您在 Excel 单元格中写入数字，Excel 会将其存储为带格式的数字。如果您需要，POI 支持为您进行格式化（大多数人不这样做 - 他们希望将数字作为数字，以便他们可以使用它们）

您正在寻找的课程是[DataFormatter](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)。您的代码将类似于

```
 DataFormatter fmt = new DataFormatter();
 for (Row r : sheet) {
    for (Cell c : r) {
       CellReference cr = new CellRefence(c);
       System.out.println("Cell " + cr.formatAsString() + " is " + 
                          fmt.formatCellValue(c) );
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:42:25.563

```
//use this method for getting values from excel.It might help u.
private String getCellValue(Cell cell) {
    if (cell == null) {
        return null;
    }
    if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
        return cell.getStringCellValue();
    } else if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
        return cell.getNumericCellValue() + "";
    } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
        return cell.getBooleanCellValue() + "";
    }else if(cell.getCellType() == Cell.CELL_TYPE_BLANK){
        return cell.getStringCellValue();
    }else if(cell.getCellType() == Cell.CELL_TYPE_ERROR){
        return cell.getErrorCellValue() + "";
    } 
    else {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-30T14:57:16.483

使用如下代码的开关和案例：

```
switch (cell.getCellType()) { 
                    case STRING: 
                        String c = cell.getStringCellValue();

                        break; 
                    case NUMERIC: 
                        int n = (int) cell.getNumericCellValue();

                        break; 
                    case BOOLEAN:
                        boolean b = cell.getBooleanCellValue();

                    break; 
                    default : 
                        } 
```

# jquery - 初始化 FancyBox 后

> ID：12526315
> 
> 赞同：0
> 
> 时间：2012-09-21T07:48:24.077
> 
> 标签：jquery, fancybox

我已经调用了 Fancy-Box **($('.modalBox').fancybox();)**以在叠加层上显示一个表格，但在它加载后我想添加类。我如何检测到 Fancy-box 已完成加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:53:24.720

使用事件`onComplete`：

```
$(".modalBox").fancybox({
    onStart : function() {
    },
    onCancel : function() {
    },
    onComplete : function() {
    },
    onCleanup : function() {
    },
    onClosed : function() {
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:59:16.937

使用以下逻辑

$('.modalBox').fancybox({
onComplete: addClassFunction
});

//回调函数
function addClassFunction{
/* 在这里写你的代码 */
}

# tomcat - 如何启动外部tomcat？

> ID：12526323
> 
> 赞同：1
> 
> 时间：2012-09-21T07:48:49.370
> 
> 标签：tomcat, maven

我有项目，我使用 maven 来构建项目：

```
mvn clean install 
```

我也有一个设置了外部网络模块的 tomcat 6。所以在maven之后我只是统计tomcat并且一切都很好。

但是我想一键完成这两件事（mvn-clean-install，start-tomcat）。如何通过 maven 启动 tomcat？但是我不需要在 tomcat 上部署项目......因为 tomcat 已经“知道”我的项目存在的位置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:57:03.913

看看这个插件：[Maven-Tomcat-Plugin](http://mojo.codehaus.org/tomcat-maven-plugin/plugin-info.html)

# c - Makefile 中缺少 src 代码文件

> ID：12526325
> 
> 赞同：1
> 
> 时间：2012-09-21T07:48:54.307
> 
> 标签：c, makefile

我的 Makefile 有一个非常令人困惑的问题

我正在使用它来为 linux 和 windows 构建一个带有条件编译的单元测试可执行文件

对于从 src 代码构建目标文件的规则，它丢失了某些文件。它似乎没有一种模式，例如所有丢失的文件都来自特定目录 - 它似乎只是随机发出我的一些 src 文件。

我的 Makefile 看起来像这样：

```
TARGET := test_glamdring2
program_NAME := $(TARGET)

#WIN32 - need to install hg on WIN32 platform for this line to work
#HGVERSION:= $(shell hg parents --template 'hgid: {node|short}')

# Platform specific conditional compilation
UNAME := $(shell uname)

# specify dirs other then current dir to search for src files
VPATH = ../src ../../RESTRICTED/core/src ../../RESTRICTED/pulse_IO/src

# src code file locations realtive to test/ dir
# SRCS =  main.c \
#   test_utility.c \
#   ../src/utility.c \
#   test_tha.c \
#   ../src/tha.c \
#   ../src/minIni.c \
#   test_load_config.c \
#   ../src/load_config.c \
#   test_ddi.c \
#   ../src/ddi.c \
#   ../src/caa.c \
#   ../../RESTRICTED/core/src/mem.c \
#     ../../RESTRICTED/pulse_IO/src/pulse_IO.c \
#     test_caa.c \
#     test_save_library.c \
#   ../src/save_library.c \
#   ../../RESTRICTED/core/src/load_gnf.c \
#   ../../RESTRICTED/core/src/loadLibrary.c \
#   test_lib.c \
#   ../src/lib.c \
#   ../../RESTRICTED/core/src/init_tdd.c \
#   ../../RESTRICTED/core/src/tdd.c \
#   ../../RESTRICTED/core/src/bsd_offset.c \
#   test_utarray.c \
#   test_load_glf.c \
#   ../src/load_glf.c

# flattened src code file locations for use with VPATH
SRCS =  main.c \
    test_utility.c \
    utility.c \
    test_tha.c \
    tha.c \
    minIni.c \
    test_load_config.c \
    load_config.c \
    test_ddi.c \
    ddi.c \
    caa.c \
    mem.c \
    pulse_IO.c \
    test_caa.c \
    test_save_library.c \
    save_library.c \
    load_gnf.c \
    loadLibrary.c \
    test_lib.c \
    lib.c \
    init_tdd.c \
    tdd.c \
    bsd_offset.c \
    test_utarray.c \
    test_load_glf.c \
    load_glf.c

program_C_SRCS := $(SRCS)
program_C_OBJS := ${program_C_SRCS:.c=.o}
#program_OBJS := $(program_C_OBJS)

ifeq ($(UNAME), Linux)
# LINUX version
program_INCLUDE_DIRS := \
    /home/ben/projects/glamdring/RESTRICTED/core/src \
    /home/ben/projects/glamdring/RESTRICTED/pulse_IO/src \
    /home/ben/projects/glamdring/g2/src
BUILD_DIR = ../build/linux
endif

ifeq ($(UNAME), MINGW32_NT-6.1)
# WINDOWS ESROE-5 VirtualBox version
program_INCLUDE_DIRS := \
    E:/projects/glamdring/g2/src \
    E:/projects/glamdring/RESTRICTED/pulse_IO/src \
    E:/projects/glamdring/RESTRICTED/core/src
program_LIBRARY_DIRS :=C:/CUnit-2.1-2/lib
BUILD_DIR = ../build/windows
endif

# ensure object files are preceded by the correct build dir
program_OBJS := $(addprefix $(BUILD_DIR)/,${program_C_OBJS})

program_LIBRARIES := cunit m

CPPFLAGS += $(foreach includedir,$(program_INCLUDE_DIRS),-I$(includedir))
LDFLAGS += $(foreach librarydir,$(program_LIBRARY_DIRS),-L$(librarydir))
LDFLAGS += $(foreach library,$(program_LIBRARIES),-l$(library))

# Non debug version
#CFLAGS += -O2 -Wallx

# Debug version (with -g)
# NB do not use optimisation (-O2) for debugging with gdb
#CFLAGS += -g -Wall -DHGVERSION="\"${HGVERSION}\"" -DDEBUG=0
CFLAGS += -g -Wall -DDEBUG=0

# NB $(LDFLAGS) moved from LINK.c to after $(programOBJS) below
# does not work if -lcunit appears before *.o files
LINK.c := $(CC) $(CFLAGS) $(CPPFLAGS) $(TARGET_ARCH)

.PHONY: all clean distclean
all: $(program_NAME)

# $(program_NAME): $(program_OBJS)
#   $(LINK.c) $(program_OBJS) $(LDFLAGS) -o $(program_NAME)

$(program_NAME): $(program_OBJS)
    $(LINK.c) $(program_OBJS) $(LDFLAGS) -o $(BUILD_DIR)/$@

# rule to build object files (replaces implicit rule)
# ensures object files go to the platform conditional dir
# ../build/linux ro ../build/linux
$(BUILD_DIR)/%.o: %.c
    echo $@
    $(LINK.c) $< -c -o $@

clean:
    @- $(RM) $(program_NAME)
    @- $(RM) $(program_OBJS)

distclean: clean

valgrind:   $(program_NAME)
    valgrind --tool=memcheck --leak-check=yes ./$(program_NAME) 
```

当我进行空运行（make -n）时，我得到以下输出：

```
echo ../build/linux/main.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/main.o
echo ../build/linux/test_utility.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_utility.c -c -o ../build/linux/test_utility.o
echo ../build/linux/utility.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../src/utility.c -c -o ../build/linux/utility.o
echo ../build/linux/test_tha.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_tha.c -c -o ../build/linux/test_tha.o
echo ../build/linux/tha.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../src/tha.c -c -o ../build/linux/tha.o
echo ../build/linux/test_load_config.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_load_config.c -c -o ../build/linux/test_load_config.o
echo ../build/linux/load_config.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../src/load_config.c -c -o ../build/linux/load_config.o
echo ../build/linux/test_ddi.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_ddi.c -c -o ../build/linux/test_ddi.o
echo ../build/linux/caa.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../src/caa.c -c -o ../build/linux/caa.o
echo ../build/linux/test_caa.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_caa.c -c -o ../build/linux/test_caa.o
echo ../build/linux/test_save_library.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_save_library.c -c -o ../build/linux/test_save_library.o
echo ../build/linux/save_library.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../src/save_library.c -c -o ../build/linux/save_library.o
echo ../build/linux/load_gnf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../../RESTRICTED/core/src/load_gnf.c -c -o ../build/linux/load_gnf.o
echo ../build/linux/loadLibrary.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../../RESTRICTED/core/src/loadLibrary.c -c -o ../build/linux/loadLibrary.o
echo ../build/linux/test_lib.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_lib.c -c -o ../build/linux/test_lib.o
echo ../build/linux/init_tdd.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../../RESTRICTED/core/src/init_tdd.c -c -o ../build/linux/init_tdd.o
echo ../build/linux/tdd.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../../RESTRICTED/core/src/tdd.c -c -o ../build/linux/tdd.o
echo ../build/linux/test_utarray.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_utarray.c -c -o ../build/linux/test_utarray.o
echo ../build/linux/test_load_glf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  test_load_glf.c -c -o ../build/linux/test_load_glf.o
echo ../build/linux/load_glf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../src/load_glf.c -c -o ../build/linux/load_glf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../build/linux/main.o ../build/linux/test_utility.o ../build/linux/utility.o ../build/linux/test_tha.o ../build/linux/tha.o ../build/linux/minIni.o ../build/linux/test_load_config.o ../build/linux/load_config.o ../build/linux/test_ddi.o ../build/linux/ddi.o ../build/linux/caa.o ../build/linux/mem.o ../build/linux/pulse_IO.o ../build/linux/test_caa.o ../build/linux/test_save_library.o ../build/linux/save_library.o ../build/linux/load_gnf.o ../build/linux/loadLibrary.o ../build/linux/test_lib.o ../build/linux/lib.o ../build/linux/init_tdd.o ../build/linux/tdd.o ../build/linux/bsd_offset.o ../build/linux/test_utarray.o ../build/linux/test_load_glf.o ../build/linux/load_glf.o  -lcunit -lm -o ../build/linux/test_glamdring2 
```

请注意，`minIni.c, ddi.c, mem.c, pulseIO.c, lib.c and bsd_offset.c`没有编译到它们各自的目标文件中

我已经三重检查了 src 代码文件是否确实存在于相关目录中，所以我一定在 Makefile 中做错了，但我无法发现它是什么......

*更新*

已更改行：

```
$(BUILD_DIR)/%.o: %.c 
```

为了：

```
$(program_OBJS): $(program_C_SRCS) 
```

这会引入所有 *.o 文件，但在每个实例中都使用 main.c，即输出看起来像这样：

```
echo ../build/linux/main.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/main.o
echo ../build/linux/test_utility.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_utility.o
echo ../build/linux/utility.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/utility.o
echo ../build/linux/test_tha.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_tha.o
echo ../build/linux/tha.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/tha.o
echo ../build/linux/minIni.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/minIni.o
echo ../build/linux/test_load_config.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_load_config.o
echo ../build/linux/load_config.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/load_config.o
echo ../build/linux/test_ddi.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_ddi.o
echo ../build/linux/ddi.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/ddi.o
echo ../build/linux/caa.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/caa.o
echo ../build/linux/mem.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/mem.o
echo ../build/linux/pulse_IO.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/pulse_IO.o
echo ../build/linux/test_caa.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_caa.o
echo ../build/linux/test_save_library.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_save_library.o
echo ../build/linux/save_library.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/save_library.o
echo ../build/linux/load_gnf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/load_gnf.o
echo ../build/linux/loadLibrary.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/loadLibrary.o
echo ../build/linux/test_lib.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_lib.o
echo ../build/linux/lib.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/lib.o
echo ../build/linux/init_tdd.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/init_tdd.o
echo ../build/linux/tdd.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/tdd.o
echo ../build/linux/bsd_offset.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/bsd_offset.o
echo ../build/linux/test_utarray.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_utarray.o
echo ../build/linux/test_load_glf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/test_load_glf.o
echo ../build/linux/load_glf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  main.c -c -o ../build/linux/load_glf.o
cc -g -Wall -DDEBUG=0 -I/home/ben/projects/glamdring/RESTRICTED/core/src -I/home/ben/projects/glamdring/RESTRICTED/pulse_IO/src -I/home/ben/projects/glamdring/g2/src  ../build/linux/main.o ../build/linux/test_utility.o ../build/linux/utility.o ../build/linux/test_tha.o ../build/linux/tha.o ../build/linux/minIni.o ../build/linux/test_load_config.o ../build/linux/load_config.o ../build/linux/test_ddi.o ../build/linux/ddi.o ../build/linux/caa.o ../build/linux/mem.o ../build/linux/pulse_IO.o ../build/linux/test_caa.o ../build/linux/test_save_library.o ../build/linux/save_library.o ../build/linux/load_gnf.o ../build/linux/loadLibrary.o ../build/linux/test_lib.o ../build/linux/lib.o ../build/linux/init_tdd.o ../build/linux/tdd.o ../build/linux/bsd_offset.o ../build/linux/test_utarray.o ../build/linux/test_load_glf.o ../build/linux/load_glf.o  -lcunit -lm -o ../build/linux/test_glamdring2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:03:59.197

如果输入文件比输出文件旧，则 make 不会构建它。所以 make 不会在构建之间编译未转换的 C 文件。这加快了编译速度。

尝试以下操作：

```
make clean all 
```

# windows - 使用cmd或双击执行exe

> ID：12526327
> 
> 赞同：2
> 
> 时间：2012-09-21T07:49:02.313
> 
> 标签：windows, exe, cmd

我有一个 .exe，它在双击时运行良好，但在尝试使用 cmd 运行时出错。我正在使用 Windows XP。

任何建议为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T04:15:33.847

有些程序设计为不能从命令提示符启动。

您可能可以通过使用以下方法来解决此问题`START.EXE`：

```
start program.exe 
```

如果失败，请尝试使用 Windows 资源管理器启动它，如下所示：

```
explorer program.exe 
```

# magento - 用于电子邮件的 Magento 自定义项和 default.phtml

> ID：12526328
> 
> 赞同：0
> 
> 时间：2012-09-21T07:49:05.343
> 
> 标签：magento

我正在尝试制作自定义电子邮件模板，但我不想更改这些文件，因为它们在向客户发送订单确认时使用。当订单通过时，我需要一个单独的模板，该模板应作为通知发送给我们（通过扩展执行此操作）。但我不确定如何处理这个问题？我很难找到有关该主题的任何可用指南。

* * *

> **加载我需要的 SKU/QTY 的代码**
> {{layout handle="sales_email_order_items" order=$order}}
> **我认为此代码使用的文件：**
> ../default /store/template/email/order/items /order/default.phtml ../default/store/template/email/order/items.phtml

或者会有一种更直接、更简单的方法来获得我需要的 sku/qty。（pr. orderline）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:40:19.653

您应该能够为主题的布局添加新的布局句柄。我建议`sales_email_order_items`从`sales.xml`.

```
<sales_email_order_items>
    <block type="sales/order_email_items" name="items" template="email/order/items.phtml">
        <action method="addItemRender"><type>default</type><block>sales/order_email_items_order_default</block><template>email/order/items/order/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>sales/order_email_items_order_grouped</block><template>email/order/items/order/default.phtml</template></action>
        <block type="sales/order_totals" name="order_totals" template="sales/order/totals.phtml">
            <action method="setLabelProperties"><value>colspan="3" align="right" style="padding:3px 9px"</value></action>
            <action method="setValueProperties"><value>align="right" style="padding:3px 9px"</value></action>
            <block type="tax/sales_order_tax" name="tax" template="tax/order/tax.phtml">
                <action method="setIsPlaneMode"><value>1</value></action>
            </block>
        </block>
    </block>
    <block type="core/text_list" name="additional.product.info" />
</sales_email_order_items> 
```

在此复制并粘贴以下内容：

```
<admin_sales_email_order_items>
    <block type="sales/order_email_items" name="items" template="email/admin/order/items.phtml">
        <action method="addItemRender"><type>default</type><block>sales/order_email_items_order_default</block><template>email/admin/order/items/order/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>sales/order_email_items_order_grouped</block><template>email/admin/order/items/order/default.phtml</template></action>
        <block type="sales/order_totals" name="order_totals" template="sales/order/totals.phtml">
            <action method="setLabelProperties"><value>colspan="3" align="right" style="padding:3px 9px"</value></action>
            <action method="setValueProperties"><value>align="right" style="padding:3px 9px"</value></action>
            <block type="tax/sales_order_tax" name="tax" template="tax/order/tax.phtml">
                <action method="setIsPlaneMode"><value>1</value></action>
            </block>
        </block>
    </block>
    <block type="core/text_list" name="additional.product.info" />
</admin_sales_email_order_items> 
```

在发送给管理员的交易电子邮件中，您需要更改`{{layout handle="sales_email_order_items" order=$order}}`为`{{layout handle="admin_email_order_items" order=$order}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T08:51:41.053

**在“亚当帕特森”的上述解决方案中更改代码行**

```
<admin_sales_email_order_items> and </admin_sales_email_order_items> 
```

至

```
<sales_email_admin_order_items> and </sales_email_admin_order_items> 
```

**在发送给管理员的跨国电子邮件中，您需要更改**

***app/locale/en_US/template/youradminnotificationemailtemplatename.html***

```
 {{layout handle="sales_email_order_items" order=$order}} 
```

至

```
 {{layout handle="sales_email_admin_order_items" order=$order}} 
```

在您的主题中的电子邮件文件夹下创建一个文件夹“admin”，并在 admin 文件夹中复制粘贴订单文件夹。

现在您可以根据需要编辑***sales/admin/order/items/order/default.phtml***文件。

# php - 如何实现像 Facebook 这样的通知系统？

> ID：12526329
> 
> 赞同：2
> 
> 时间：2012-09-21T07:49:09.060
> 
> 标签：php, mysql, facebook

我想做一个类似于 Facebook 的通知系统，但我就是想不出方法，如何实现。

我在这里读到了各种意见，比如有一张桌子，其他人说有两张。

但是，我正在尝试最有效的方式，只使用必要的数据条目。`notfication`到目前为止，这是我的表：id、uid、类型、读取（布尔值）、日期。

于是我想到了一个例子：

插入评论，调用插入我的uid（user_id）的通知函数，类型（评论，点赞等），read='1'，NOW()。

我将 read 设置为 1，因为我不想在发布内容时收到通知。然后我想我会`notification`通过将所有其他用户的 read 设置为 0 来更新，因为他们还没有阅读这篇新帖子。

但现在我正在考虑另一篇将在 5 秒后发布的帖子或其他内容。然后所有其他`read`条目再次设置为 0，这是正确的，但在这种情况下，我想不出为每个用户显示 (SELECT) 正确的结果。因为没有指定哪个用户错过了哪个新通知。

我希望你能关注我并有任何建议。如果我通常以错误的方式做这件事，我也会很感激建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:02:57.740

首先，您必须知道您的通知是否广泛应用于您的所有用途，或者可以是特定于用户的。如果是 Facebook，我会说这是第二种选择。

我的第一个建议是找到一个实现此功能的开源项目（甚至可能是 2 个）并查看他们的代码。

我的第二个建议是写下此功能的所有要求，通常，一个小的限制可能会导致对表结构的修改甚至添加新表（例如，可以向多个用户发送通知一次？用户可以向另一个用户发送通知吗？...）。

这是我要走的路，使用 2 个表，一个用于消息，一个用于与用户的 NtoN 关系： **表通知**

```
ID // auto increment ID
sender_id // Can be a subsystem or another user. To be defined / optional. Does not have to be a foreign key.
title // Title of the notification
body // The text message
type // warning, message, error or any notification class you can think of
... // you can add other options, like priority, attachment... 
```

**表通知_用户**

```
notification_id // Foreign Key for the notification
receiver_id // Foreign Key for the user
is_read // is the notification read
is_deleted // is the notification deleted, this implements a Trash bin like feature
created_at // time at which the notification was sent
read_at // time at which the notification was read
deleted_at // Time at which the notification was deleted 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-07T15:10:28.873

我建议有一个通知表，其中包含存储所有通知的列（notification_id 和 notification_msg 和 create_date）。然后有另一个表 notification_user 与列 (userid, notificationid, read) 存储所有带有通知 ID 的用户 ID。因此，如果您说有 1000 个用户的通知，则将消息存储在第一个表中，然后将 1000 个用户的 ID 和通知 ID 存储在第二个表中。这样，您可以轻松跟踪用户何时阅读特定通知并将 read 设置为 1。

# c# - 单击后退按钮时如何通过清除浏览器历史记录或缓存来注销我的雅虎帐户

> ID：12526333
> 
> 赞同：1
> 
> 时间：2012-09-21T07:49:24.007
> 
> 标签：c#, javascript, visual-studio-2010, yahoo, browser-cache

我在我的应用程序中使用了 Yahoo API 来获取 yahoo 邮件联系人，当用户从我的浏览器单击返回按钮时，我需要注销 yahoo 帐户。如何通过 JavaScript 或 C# 实现这一点？

# javascript - jQuery组合框，如何触发选择事件

> ID：12526337
> 
> 赞同：0
> 
> 时间：2012-09-21T07:49:42.843
> 
> 标签：javascript, jquery, jquery-ui, codeigniter

嗨，我正在使用`jquery combo-box`我的`codeigniter`应用程序，

有 3 个组合框。当国家/地区值更改时，州组合框再次使用新值创建，当州组合框值更改时，城市组合框使用新值创建。

它第一次工作正常，但在表单提交后，城市和州下拉更改事件不起作用。

国家组合框更改事件起作用，在我更改国家组合框值后，状态组合更改事件再次起作用。

这里的问题是，我想

1.国家组合框事件不绑定，直到国家组合框改变。2.城市组合框事件在状态组合框改变之前不绑定。

** 那么有没有办法在文档就绪时触发国家组合框选择事件。

提前致谢...........

![在此处输入图像描述](../Images/06010291129cca6c6d19e0040e9104d2.png)

这是我的jQuery

```
jQuery('#combolist_country').combobox({
        selected: function(event, ui) {

            jQuery('#combolist_state').combobox().empty();
            jQuery('#combolist_city').combobox().empty();

            dataVal = jQuery(this).val();

            jQuery.ajax({
                type :  'POST',
                url  :  baseurl + "/search_by_country",
                data: {country_id:dataVal},
                dataType:'json',
                success: function(data)
                {
                    if(data)
                    {
                        var data_arr=data;
                        if(jQuery.isArray(data_arr['state_list']) && data_arr['state_list'].length > 0){
                            var aList = data_arr['state_list'];
                            var sKey;
                            jQuery("#combolist_state").combobox('destroy').empty();
                            jQuery('#combolist_state').removeAttr('disabled');
                            jQuery("#combolist_state").append('<option value="0">Select State</option>');           
                            for (sKey in aList) {
                                jQuery("#combolist_state").append('<option value="' + aList[sKey].StateID + '">' + aList[sKey].StateName + '</option>');
                            }
                            jQuery("#combolist_state").combobox({
                                selected:function(){

                                    jQuery('#combolist_city').combobox().empty();
                                    jQuery('#combolist_neighborhood').combobox().empty();

                                    dataVal = jQuery(this).val();

                                    jQuery.ajax({
                                        type :  'POST',
                                        url  :  baseurl + "search_by_state",
                                        data: {state_id:dataVal},
                                        dataType:"json",
                                        success: function(data)
                                        {
                                            if(data)
                                            {
                                                var data_arr=data;                                  
                                                if(jQuery.isArray(data_arr['city_list']) && data_arr['city'] == 1 && data_arr['city_list'].length > 0){

                                                    var aList = data_arr['city_list'];
                                                    var sKey;
                                                    jQuery("#combolist_city").combobox('destroy').empty();
                                                    jQuery('#combolist_city').removeAttr('disabled');
                                                    jQuery("#combolist_city").append('<option value="0">Select City</option>');         
                                                    for (sKey in aList) {
                                                        jQuery("#combolist_city").append('<option value="' + aList[sKey].CityID + '">' + aList[sKey].CityName + '</option>');
                                                    }  

                                                    jQuery('#combowrap_combolist_city').fadeTo('slow',1);

                                                }                                                   
                                            }                                                                                       
                                        }  
                                    });
                                }
                            });  

                            jQuery('#combowrap_combolist_state').fadeTo('slow',1);                          

                        } 
                    } 
                }                   
            });
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:17:54.017

只需用于`jQuery("#combolist_state").html(list_of_options)`重新填充您的组合框并保留事件，而不是销毁和重新创建组合框和事件。

```
var list_of_options = '';
for (sKey in aList)
    list_of_options +='<option value="' + aList[sKey].StateID + '">' + aList[sKey].StateName + '</option>';
jQuery("#combolist_state").html(list_of_options) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:31:57.070

尝试这个

```
$('#combolist_country').combobox({
        selected: function (event, ui) {
            var id = ui.item.value;
            if (id > 0) {
                //Fill Drop Down for State and Add Similar logic for City and Pincode
            }
        }
    }); 
```

希望这会奏效！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T08:00:02.687

我不确定这是否能解决您的问题，但我最近在组合框和自动回发等方面遇到了同样的问题......

我将以下内容添加到我的 jQuery 中：

```
 function pageLoad() {
        // Your functionality here
    }

    Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoad); 
```

# android - 用于网络服务 android 的 GPS 导航

> ID：12526338
> 
> 赞同：2
> 
> 时间：2012-09-21T07:49:59.183
> 
> 标签：android

如何在应用导航中显示以查找方向和搜索任何地方？当我们在浏览器中打开谷歌地图时会发生这种情况。但我希望在应用程序中也一样。

# hql - HQL 异常 (org.hibernate.dialect.Dialect$3)

> ID：12526340
> 
> 赞同：0
> 
> 时间：2012-09-21T07:50:16.910
> 
> 标签：hql

我正在尝试从 java 执行以下 HQL 查询。

"SELECT ac.accountNumberInt, ag.ext, sum (ext) as exta from CustomerCapital ag, Account ac where customerExt =:customerExt and observationPeriod in (:observationPeriod) group by ac.accountNumberInt, ag.ext";

它抛出以下异常。

java.lang.NullPointerException：在 org.hibernate.dialect.Dialect$3.getReturnType(Dialect.java:125) ~[hibernate-core.jar!/:3.3.1.GA] 在 org.hibernate.hql.ast。 util.SessionFactoryHelper.findFunctionReturnType(SessionFactoryHelper.java:405) ~[hibernate-core.jar!/:3.3.1.GA]

任何人都可以请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T12:48:47.193

ag.ext 不能在 group by 中，也不能在聚合函数中。如果需要的话，请预先说明 sum(ac.ext) 并用 Class 别名指出它

```
you can't have ambiguous fields :     sum (ext) ==> sum (ac/ag.ext)
                                      observationPeriod  ==> ac/ag.observationPeriod
                                      customerExt ==> ac/ag.customerExt 
```

# php - 已经集成 MailChimp 后如何添加列表 ID？

> ID：12526342
> 
> 赞同：0
> 
> 时间：2012-09-21T07:50:18.723
> 
> 标签：php, mailchimp

因此，我的网站上有两个单独的自定义表单集成到 MailChimp 中。目前他们都指向同一个列表，我决定改变它。我已经在 MailChimp 中创建了新列表并拥有新的列表 ID，但我不知道我现在需要在 php 中进行哪些更改？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:16:31.453

大卫，

我假设您在隐藏输入中有 list_id 。`$myListId = $this->getRequest()->getPost('product_id');`使用类似于当您进行 API 调用时的方式获取 list_id ，请使用`$myListId`.

# iphone - 我如何知道一个应用程序有多少更新？

> ID：12526344
> 
> 赞同：0
> 
> 时间：2012-09-21T07:50:33.603
> 
> 标签：iphone, app-store

我在应用商店更新了一个应用程序，我想知道它更新到上一个版本的次数。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:05:13.590

iTunesConnect 上的销售报告还包括应用程序更新的下载次数。

# ruby - 字符串中的双条空格（红宝石）

> ID：12526345
> 
> 赞同：0
> 
> 时间：2012-09-21T07:50:51.567
> 
> 标签：ruby, regex, string

我有这个字符串：

```
"item one :value1 , item2: value2,item3 : value3" 
```

我怎样才能得到这个？：

```
"item one:value1,item2:value2,item3:value3" 
```

（我需要删除“，”分隔的项目之间和“：”分隔的项目之间的空格）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:00:18.870

```
irb(main):008:0> "item one :value1 , item2: value2,item3 : value3".gsub(/\s*([,:])\s*/,'\1')
=> "item one:value1,item2:value2,item3:value3" 
```

# sql - oracle sql中的“不存在”与“左外连接”

> ID：12526349
> 
> 赞同：1
> 
> 时间：2012-09-21T07:51:08.423
> 
> 标签：sql, oracle

我有一个简单的 SQL 查询：

```
SELECT  
       columnA, columnB, columnC...  
 FROM  
       (SELECT    
             columnA, columnB, columnC...  
        FROM   
              SomeTable) Table1  
  WHERE NOT EXISTS  
        (SELECT   
               columnA  
          FROM  
               SomeOtherTable st  
          WHERE  
               st.columnB = Table1.columnB) 
```

谁能给我一个建议如何重写这个查询以获得更好的性能？我的意思是`WHERE NOT EXISTS`在表 1 中包含该子句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:54:17.160

你可以使用这个：

```
select Table1.*
from (select * from SomeTable) Table1
left outer join SomeOtherTable sot
    on Table1.columnB = sot.columnB
where sot.columnB is null; 
```

`columnB`为了提高性能，在两个表上都有索引很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:55:15.893

How about this:

```
SELECT columnA, columnB, columnC... 
FROM SomeTable
WHERE (SELECT COUNT(*) FROM  SomeOtherTable st  WHERE  st.columnB = SomeTable.columnB)=0; 
```

# javascript - 带有 javascript 的 HTML 字符串

> ID：12526350
> 
> 赞同：0
> 
> 时间：2012-09-21T07:51:11.700
> 
> 标签：javascript, html, function

我有一个 js 文件，我需要在其中构造一些 HTML，问题是它需要在要解析的字符串中。就像是;

```
var myHTML="<a href='"#"' onclick='"alert("hello"); event.returnValue = false; return false;"'>"+childOrders+"</a>" 
```

我已经尝试了很多引号组合，但无法让它发挥作用。

谢谢你的帮助，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:55:36.577

try following code:

```
var myHTML="<a href='#' onclick='alert(\"hello\"); event.returnValue = false; return false;'>childOrders</a>" 
```

[jsfiddle](http://jsfiddle.net/XGN5R/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:02:31.360

像这样

```
var myHTML="<a href='#' onclick='alert('hello'); event.returnValue = false; return false;'>"+1+"</a>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:55:42.703

```
 var myHTML='<a href="#" onclick=alert("hello"); event.returnValue = false; return false;>'+childOrders+'</a>' 
```

This works I think. Use the single quotes on the outside so you can still use the double quotes on the inside.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:54:00.123

您可以通过在字符串前面放置反斜杠来转义字符串中的引号，如下所示：

```
myString = "A string with \"quotes\" in it."; 
```

以上将导致字符串`A string with "quotes" in it.`

**编辑：**至于 onclick 属性中的引号，我建议使用单引号，因此您的代码如下所示：

```
var myHTML="<a href=\"#\" onclick=\"alert('hello'); event.returnValue = false; return false;\">"+childOrders+"</a>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:54:25.703

我认为您正在寻找强大的`\`（反斜杠）。转义引号，它将起作用。

```
var myHTML="<a href=\"#\" onclick=\"alert(\"hello\"); event.returnValue = false; return false;\">"+childOrders+"</a>" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T07:54:33.300

```
var myHTML = "<a href='#' onclick='alert(\"hello\"); event.returnValue = false; return false;'>" + childOrders + "</a>"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T07:54:44.937

您需要像这样**转义**字符串内的引号

```
var myHTML="<a href=\"#\" onclick=\"alert(\'hello\'); event.returnValue = false; return false;\">childOrders</a>" 
```

# object - 如何通过我的主键检查 coredata 中是否已经存在 NSManagedObject？

> ID：12526351
> 
> 赞同：1
> 
> 时间：2012-09-21T07:51:12.390
> 
> 标签：object, core-data, exists

我使用这种方法，但不正确。

```
- (BOOL)checkExistByEntityName:(NSString *)entityName primaryKeyName:(NSString *)keyName primaryKey:(NSNumber *)primaryKey
{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:managedObjectContext];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@==%@", keyName, primaryKey];

    [request setEntity:entity];
    [request setPredicate:predicate];

    NSError *error = nil;
    NSInteger count = [managedObjectContext countForFetchRequest:request error:&error];

    [request release];

     if (count > 0) {
          return YES;
    } else {
          return NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:56:43.760

[谓词编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795)是您的朋友。

> 格式字符串支持 printf 样式的格式参数，例如 %x（请参阅“格式化字符串对象”）。两个重要的参数是 %@ 和 %K。
> 
> *   `%@`是一个对象值的 var arg 替换——通常是字符串、数字或日期。
> *   %K 是键路径的 var arg 替换。当使用 将字符串变量替换为格式字符串`%@`时，它们被引号括起来。如果要指定动态属性名称，`%K`请在格式字符串中使用，如下例所示。

```
NSString *attributeName = @"firstName";
NSString *attributeValue = @"Adam";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K like %@",
        attributeName, attributeValue]; 
```

所以，只需使用

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K == %@", keyName, primaryKey]; 
```

希望有帮助。

# c# - 确定 Windows 窗体是否已作为模态打开

> ID：12526354
> 
> 赞同：0
> 
> 时间：2012-09-21T07:51:42.020
> 
> 标签：c#, winforms, modal-dialog

> **可能重复：**
> [如何知道表单是否显示为对话框](https://stackoverflow.com/questions/11105262/how-to-know-if-a-form-is-shown-as-dialog)

我有一个可以作为对话框或常规窗口打开的 winform。当它作为常规窗口打开时，我想隐藏 OK 取消按钮，有没有办法检查 winform 是否作为对话框打开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:58:45.453

您可以使用`Modal`属性：

```
public bool Modal { get; } 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.modal.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.modal.aspx)

# android - Android 更改名称而不更改自动生成的类路径

> ID：12526359
> 
> 赞同：1
> 
> 时间：2012-09-21T07:51:55.763
> 
> 标签：android, eclipse, classpath

我正在使用 ant 生成一个 android 项目的两个不同的构建版本，开发和生产。为了让我们在手机上同时安装两者，我尝试使用两个不同的名称：com.xyz.android 和 com.xyzdev.android

不幸的是，Eclipse 使用这个名称作为生成 R.java 的类路径，因此所有 com.xyz.android.R 的导入都在 dev 版本中中断，因为它们实际上应该在寻找 com.xyzdev.android.R

有没有办法告诉 Eclipse 为 R.java 使用特定的类路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:28:09.857

我尝试以下步骤：

通过处理 AndroidManifest.xml 并使用绝对类名修改 package="..." 、活动等来创建 AndroidManifest_dev.xml。

写了一个ant xml文件build.xml：

```
<project basedir="." default="copy" name="aa">
    <target name="copy">
        <copy file="./AndroidManifest.xml" overwrite="true" tofile="./AndroidManifest_pro.xml"></copy>
        <copy file="./AndroidManifest_dev.xml" overwrite="true" tofile="./AndroidManifest.xml"></copy>
    </target>
</project> 
```

在“Java Builder”和“Android Package Builder”之间添加了一个构建器

Eclipse->project->Properties->Builder->New...->Ant Builder->Buildfile , Browse Workspace...->your project->build.xml->Apply->OK 选择 New_Builder(1) 点击向上

然后运行应用程序。有效。

希望这可以帮助你。

# android - GCM 演示示例适用于模拟器，但不适用于设备

> ID：12526360
> 
> 赞同：0
> 
> 时间：2012-09-21T07:51:58.033
> 
> 标签：android, android-c2dm, google-cloud-messaging

我正在尝试运行 GCM 演示示例。它适用于模拟器，我可以从服务器接收消息。但在设备上，它尝试在服务器上注册，5 次尝试后注册失败。有什么想法吗？

# php - 如何将mysql表数据导出到excel 2007

> ID：12526363
> 
> 赞同：0
> 
> 时间：2012-09-21T07:52:07.357
> 
> 标签：php, mysql, excel

我想将数据从 mysql 表导出到 excel 表。我正在使用 excel 2007。一旦这段代码正常工作，但今天我遇到了问题。请指导我哪里做错了。我有大约 60,000 行的大量数据。

```
<?php
/* 
Export MySQL to Excel using PHP & HTML tables
Author: Vlatko Zdrale, http://blog.zemoon.com

Look but don't touch :)
*/
    include "mysql_connection.php";
    //$dbTable = 'info';            // table name
    $con=open_db_connection();

    $sql = "select info_id, name, category_list.category, company_name, company_address, company_phone, date from info, city_list, category_list where city=cid and info.category=id";
    $result = @mysql_query($sql)    or die("Couldn't execute query:<br>".mysql_error().'<br>'.mysql_errno());

    header('Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');   //define header info for browser
    header('Content-Disposition:attachment; filename=information-'.date('Ymd').'.xlsx');
    header('Pragma: no-cache');
    header('Expires: 0');

    echo '<table><tr>';
    for ($i = 0; $i < mysql_num_fields($result); $i++)   // show column names as names of MySQL fields
        echo '<th>'.mysql_field_name($result, $i).'</th>';
    print('</tr>');

    while($row = mysql_fetch_row($result))
    {
        //set_time_limit(60); // you can enable this if you have lot of data
        $output = '<tr >';
        for($j=0; $j<mysql_num_fields($result); $j++)
        {
            if(!isset($row[$j]))
                $output .= '<td>&nbsp;</td>';
            else
                $output .= "<td>$row[$j]</td>";
        }
        print(trim($output))."</tr>\t\n";
    }
    echo('</table>');
?> 
```

它非常重要，请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:39:41.733

您将收到该消息，因为该文件不是 OfficeOpenXML xlsx 文件，而是包含扩展名为 .xlsx 的 HTML 标记的文件。您告诉 Excel 文件是扩展名的一种格式，而实际上它是另一种格式，它让您知道内容与扩展名不匹配。只要它可以干净地读取 HTML 标记，它应该仍然可以成功加载，但总是会发出此消息。

较新版本的 Excel 比早期版本对此更加挑剔。

如果您想删除该消息，则要么将 .xlsx 重命名为 .html 文件，以便扩展名与内容匹配（然后您需要导入 Excel，或者调整文件关联以便打开 html 文件使用 Excel）；或者给它一个带有 csv 扩展名的制表符分隔值文件（可以通过双击打开），尽管您不能使用此选项添加任何格式；或者给它一个真正的 OfficeOpenXML .xlsx 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:02:02.457

首先：告诉我们一些关于错误的事情！

我建议您执行以下两个步骤之一（或两者）。

```
set_time_limit(60); 
// increase this value to 300 (means the server doesn't timeout for 5 minutes)

ini_set('memory_limit','512M');
// increases the memory limit to 512 MB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:03:09.457

尝试在列而不是行之间使用**“\t”**，它会在 Excel 中生成本机偏移/边距。还可以更好地使用***带有花括号的 for 循环***作为不混淆自己的更好标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:01:14.237

首先，您应该将输出放在缓冲区变量中，而不是一直回显或打印。

之后你应该阅读你自己的评论 -> //set_time_limit(60); // 如果你有很多数据，你可以启用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T09:33:01.153

从您的评论中，我猜想有些东西弄乱了标记。

在 和 之间的所有内容中`<th></th>`，`<tr></tr>`尝试使用`htmlentities`：

```
for ($i = 0; $i < mysql_num_fields($result); $i++)   // show column names as names of MySQL fields
    echo '<th>'.htmlentities(mysql_field_name($result, $i),ENT_COMPAT,"UTF-8").'</th>'; 
```

和

```
if(is_null($row[$j]))
     $output .= '<td>&nbsp;</td>';
else
     $output .= "<td>".htmlentities($row[$j],ENT_COMPAT,"UTF-8")."</td>"; 
```

请注意，我假设您的编码为 UTF-8。

# bash - 在 bash here-string 中扩展具有特殊含义的字符

> ID：12526364
> 
> 赞同：1
> 
> 时间：2012-09-21T07:52:10.657
> 
> 标签：bash

代码如下：

```
#!/bin/bash

wd1="hello"
wd2="world"

cat >> log.txt <<<"$wd1\t$wd2\n\n" 
```

当我运行上面的脚本时，`'\t','\n'`根本没有展开。所以我把它改成这样：

```
cat >> log.txt <<<$(echo -e "$wd1\t$wd2\n\n") 
```

但`'\t','\n'`仍然没有展开。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:07:32.093

来自`info bash`：

```
3.6.7 Here Strings
------------------

A variant of here documents, the format is:
     <<< WORD

   The WORD is expanded and supplied to the command on its standard
input. 
```

1.  `<<<"$wd1\t$wd2\n\n"``\t`受到 bash 扩展的影响，但or没有标准扩展`\n`。这就是为什么它不会发生。
2.  `<<<$(echo -e "$wd1\t$wd2\n\n")`不起作用，因为它没有被引用。`echo`输出特殊字符，然后 bash 进行字段拆分，它们被空格替换。

你只需要引用它：

```
cat >> log.txt <<<"$(echo -e "$wd1\t$wd2\n\n")" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:30:40.173

Bash 支持另一种扩展某些转义字符的引用：

```
word=$'foo\nbar'
echo "$word" 
```

不幸的是，这种带引号的字符串不会进行参数扩展：

```
word=$'$w1'
echo "$word" 
```

如果您使用的是 bash 4 或更高版本，则可以使用`printf`来设置变量的值：

```
printf -v word "$wd1\t$wd2\n\n"
cat >> log.txt <<<"$word" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:28:50.777

正如@chepner 指出的那样，这种特殊字符类型在内部扩展`$' ... '`，并且由于您可以在单个外壳“单词”中切换引用样式，因此您可以执行以下操作：

```
cat >>log.txt <<<"$wd1"$'\t'"$wd2"$'\n\n' 
```

相当丑陋，但它的工作原理。另一种可能性是将特殊字符放入变量中，然后对所有内容使用变量扩展：

```
tab=$'\t'
nl=$'\n'

cat >>log.txt <<<"$wd1$tab$wd2$nl$nl" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:59:28.777

我宁愿使用（这里没有字符串）：

```
echo -e "$wd1\t$wd2\n\n" >> log.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T09:16:23.240

关于什么：

```
cat >> log.txt <(echo -e "$wd1\t$wd2\n\n") 
```

# sql - 简单的 SQL JOIN 查询

> ID：12526372
> 
> 赞同：1
> 
> 时间：2012-09-21T07:53:11.927
> 
> 标签：sql, join

`JOIN`即使是简单的查询，我仍然遇到困难。从上一个问题[Simple but nested SELECT query](https://stackoverflow.com/questions/12517961/simple-but-nested-select-query)中，我学到了很多东西，但仍然无法完成我的`JOIN`查询。:(

我从[最后一个问题](https://stackoverflow.com/questions/12517961/simple-but-nested-select-query)中得到了这个查询，它正在工作：

```
SELECT c.value, d.value 
FROM a
LEFT JOIN b
    ON a.id = b.idy
LEFT JOIN c
    ON b.idx = c.id
LEFT JOIN d
    ON b.idx = d.id
WHERE a.name = "test" 
```

现在，我想在查询中添加另一个条件以查看表`e,f,g`，如果表上`a.id, b.idx, c.id, d.id` **不**存在任何条件`e,f,g`，则返回结果。例如，如果`c.id`存在 on`e.id`那么它应该消除 table 中的行`c`。如果`a.id`存在 on `g.id`，则不应继续，因为如果您`a.id`从查询中删除 ，则其他部分不应返回任何内容。

我制作了一个示例数据库结构，您可以在此处查看 sql 代码：[Sample.sql](http://freetexthost.com/m2wc4okaq1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:57:46.670

你的意思是这样的？

```
SELECT c.value, d.value 
FROM a
LEFT JOIN b
    ON a.id = b.idy
    AND b.id NOT IN (SELECT e.id FROM e UNION ALL SELECT f.id FROM f UNION ALL SELECT g.id FROM g)
LEFT JOIN c
    ON b.idx = c.id
    AND c.id NOT IN (SELECT e.id FROM e UNION ALL SELECT f.id FROM f UNION ALL SELECT g.id FROM g)
LEFT JOIN d
    ON b.idx = d.id
    AND d.id NOT IN (SELECT e.id FROM e UNION ALL SELECT f.id FROM f UNION ALL SELECT g.id FROM g)
WHERE a.name = "test" 
AND a.id NOT IN (SELECT e.id FROM e UNION ALL SELECT f.id FROM f UNION ALL SELECT g.id FROM g) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:58:07.733

不确定您的 SQL 方言，但使用 MySQL，您可以使用：

```
AND NOT EXISTS(SELECT 1 FROM e WHERE e.idx = b.idx) 
```

# xpages - 将所有条目显示为 Notes 客户端

> ID：12526373
> 
> 赞同：0
> 
> 时间：2012-09-21T07:53:17.563
> 
> 标签：xpages, xpages-extlib

我会扩展 Xpages 的 ViewPanel 经典控件...这样当您滚动最后一个条目时，Notesview..in 背景中会使用 ajax xhrGet 浏览器加载其他条目（（效果与 facebook 的活动流相同...... ..当您在页面末尾滚动时加载流的其他条目）

在我的场景中，我有多种类型的不同视图（一种分类，两种分类，用响应分类..等等），所以 ViewPanel 对用户来说很好，但我会用这个扩展经典 ViewPanel 控件的功能.

任何人都有实现此功能的想法/建议？

我已经测试了扩展库的“pagerSizes”控件..但是当您有很多视图条目时，如果渲染条目非常慢（这是正常的，因为浏览器需要渲染一次多 MB 的数据）

Tnx 给大家任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:04:01.000

1.  从 extlib 添加寻呼机并设置您的重复/查看源

xe:pagerAddRows id="pagerAddRows1">

1.  将 jquery 添加到您的 xpage

2.  将以下代码添加到客户端脚本库并将该脚本库添加到您的 xpage

    $(function(){ $(window).scroll(function(){ if($(window).scrollTop() == $(document).height() - $(window).height()){ $( "[id$='pagerAddRows1_ar']").click(); } }); })

当您滚动到屏幕底部时，您可以在[http://demo.intrapages.com](http://demo.intrapages.com)的新闻流中看到它的运行情况，自动单击寻呼机并动态获取新行

# ruby-on-rails-3 - 谷歌地图 API 错误信息

> ID：12526378
> 
> 赞同：1
> 
> 时间：2012-09-21T07:53:40.793
> 
> 标签：ruby-on-rails-3, heroku

我在我的应用程序中使用 Google 地图 API JavaScript v3。当我在本地运行应用程序时，我收到的图像很清晰，并且地图上没有网格线，但是我已将其部署到我的 heroku 应用程序 (http://vast-mesa-7271.herokuapp.com/contactus) 和地图上有黑色的网格线，第二张地图上没有跳转到街景的图标。我确实有这个错误信息

```
 Resource interpreted as Image but transferred with MIME type application/octet-stream: 
```

我很想知道这是否与我为什么会出现不一致或它是否是 heroku 的事情有关？我在别处找到了这个解释

```
 This warning is telling you that your web server isn't configured to send the correct   MIME type meta data for PNG images. You should probably consult the administrator for your web server and ask them to set the correct MIME mapping 
```

这个对吗？

# c# - 获取安全组列表

> ID：12526383
> 
> 赞同：1
> 
> 时间：2012-09-21T07:53:50.847
> 
> 标签：c#, active-directory

我使用下面的代码从 Active Directory 获取用户的安全组列表，但是我从 Active Directory 获取用户的所有组，你能帮我从 Active Directory 获取用户的安全组列表吗?

```
public List<string> getSecurityGroup(string userName,SearchInfo searchInfo, Error errorInfo)
        {
            List<string> groups =new List<string>() ;
            try
            {
                string ldapPath = @"LDAP://" + searchInfo.HostName + @"/" + searchInfo.SearchDN;
                DirectoryEntry obEntry = new DirectoryEntry(ldapPath);

                DirectorySearcher srch = new DirectorySearcher(obEntry,
                    "(sAMAccountName=" + userName + ")");
                SearchResult res = srch.FindOne();
                if (null != res)
                {
                    DirectoryEntry obUser = new DirectoryEntry(res.Path);
                    // Invoke Groups method.
                    object obGroups = obUser.Invoke("Groups");
                    foreach (object ob in (IEnumerable)obGroups)
                    {
                        // Create object for each group.
                        DirectoryEntry obGpEntry = new DirectoryEntry(ob);
                        groups.Add(obGpEntry.Name);
                    }
                 }
            }
            catch (System.Runtime.InteropServices.ExternalException comException)
            {
                errorInfo.ErrorCode = comException.ErrorCode;
                errorInfo.ErrorMessage = comException.Message;
            }
            catch (Exception exception)
            {
                errorInfo.ErrorCode = -1;
                errorInfo.ErrorMessage = exception.Message;
            }
            return groups;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:22:33.627

一种方法是查看 groupType 属性，例如，您可以使用以下命令搜索安全组：

```
(&(objectCategory=group)(groupType:1.2.840.113556.1.4.803:=2147483648)) 
```

顺便说一句，获取给定用户所属的所有组（直接或间接）的另一种方法是使用搜索过滤器：

```
(member:1.2.840.113556.1.4.1941:=<user-distinguished-name>) 
```

您可以将其与 groupType 过滤器结合使用。有关详细信息，请参阅[有关搜索过滤器语法的 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475(v=vs.85).aspx)。

**更新**

> 你能告诉我我必须修改代码的哪一部分吗？

上面是一个过滤器，作为参数传递给`DirectorySearcher`方法。例如，以下内容应直接或间接创建`sAMAccountName`每个安全组成员的列表：`userrName`

```
List<string> groups = new List<string>();
using (var root = new DirectoryEntry(ldapPath))
{
    using(var srch = new DirectorySearcher(root, 
                   "(sAMAccountName=" + userName + ")"))
    {
        SearchResult res = srch.FindOne();
        if (res != null)
        {
            string dn = (string) res.Properties["distinguishedName"][0];
            string filter = String.Format(CultureInfo.InvariantCulture,
                "(&(objectCategory=group)(groupType:1.2.840.113556.1.4.803:=2147483648)(member:1.2.840.113556.1.4.1941:={0}))",
                dn);
            using (var groupSearch = new DirectorySearcher(root, filter, new[] { "sAMAccountName" }))
            {
                groupSearch.PageSize = 1000;
                using (var resultCollection = groupSearch.FindAll())
                {
                    foreach (SearchResult result in resultCollection)
                    {
                        groups.Add((string) result.Properties["sAMAccountName"][0]);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:40:19.990

首先：这看起来很像 C#，而不是 java。你为什么发布标签Java？

其次：在AD中，安全组应该属于OU“安全组”。因此，请检查每个组的可分辨名称。如果它包含“ `OU=Security Groups`”，它应该是一个安全组。

或者，您可以获取组记录并检查`sAMAccountType`属性。安全组的值应为 0x10000000（十进制为 268435456）。

编辑：在 C# 中不完全流利我不能保证完全正确，但也许可以尝试这样的事情：

```
foreach (object ob in (IEnumerable)obGroups)
{
    // Create object for each group.
    DirectoryEntry obGpEntry = new DirectoryEntry(ob);
    if (obGpEntry.Path.ToLower().contains("ou=security groups")) {
        groups.Add(obGpEntry.Name);
    }
} 
```

# android - 在任务管理器中运行的应用程序

> ID：12526384
> 
> 赞同：2
> 
> 时间：2012-09-21T07:53:54.647
> 
> 标签：android

我已经完成了一个应用程序的运行并退出了它。但该应用程序仍然在任务管理器中。这是什么意思 ？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T18:13:41.543

根据活动生命周期（[Android 文档](http://developer.android.com/training/basics/activity-lifecycle/index.html)），当您关闭活动时，它会进入“暂停”状态（调用 OnPause）。它会一直保持这种状态，直到强制关闭，或者设备内存不足并杀死它。此时会调用 OnStop 和 OnDestroy，不会出现在任务管理器中。

在此暂停状态下，如果从任务管理器恢复，则只会调用 OnResume（而不是 OnCreate），因此将处理此事件所需的代码放入 OnResume。注意，从头开始启动应用程序时将调用 OnCreate 和 OnResume（以及 OnStart）。

# django - 重写 URL 以包含用户名作为查询参数的 Django 视图？

> ID：12526385
> 
> 赞同：0
> 
> 时间：2012-09-21T07:53:55.527
> 
> 标签：django, url, django-views, rewrite, analytics

我想对哪个用户在我的 Django 网站上做什么进行简单的分析。

我认为最简单的方法是重写所有 URL，使它们包含“？username=foo”。

这只会发生在没有任何 URL 查询参数的 GET url 上。

我该怎么做呢？我可以重写 URL 以包含来自视图的新查询参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:17:22.367

当请求已经包含用户时，为什么要向每个视图添加一个 get 参数？此外，您可能应该使用[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)层来记录用户操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:55:18.213

我认为除了模板之外，您无需更改任何内容。

如果您现有的 url 像`http://server/myapp/view1`那么访问这样的 url`http://server/myapp/view1?username=foo`也可以。

因此，您现有的视图将按原样工作。

但是，您必须更改根据新方案呈现链接的模板。例如，对于上面的视图，如果您`{% url 'view1' %}`要获取链接，则必须将其更改为`{% url 'view1'%}?username={{user}}`.

# flex4 - Flex - mxml- 更改已识别对象的可见性

> ID：12526391
> 
> 赞同：1
> 
> 时间：2012-09-21T07:54:05.570
> 
> 标签：flex4, mxml

让我们考虑一个例子

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:local="*">

<s:Button id="button""/>    
</s:WindowedApplication> 
```

通过 detault mxml 编译器使“按钮”成为生成类的公共字段。强迫它成为私有领域是不是很糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:02:56.910

**您不能使用纯 MXML 将其设为私有。**

然而，有一个 hacky 方法 - 删除“id”属性将有效地使其私有。如果您仍然需要对该对象的引用，您应该添加一个“creationComplete”处理程序并保留来自事件目标的引用。

```
<fx:Script>
<![CDATA[
    [Bindable] private var button:Button;

    private function onMyButtonCreationComplete(event:Event):void {
        button = Button(event.target);
    }
]]> 
</fx:Script>

...

<s:Button creationComplete="onMyButtonCreationComplete(event)"/> 
```

这实际上与您示例中的私有“按钮”相同。

# javascript - document.URL 的安全性如何？

> ID：12526394
> 
> 赞同：0
> 
> 时间：2012-09-21T07:54:19.103
> 
> 标签：javascript, html, web

假设您在浏览器 URL 中存储了一些信息。然后，您将 URL 发送回服务器以进行一些验证。browser.URL 对象的可破解性如何。某些用户可以轻松更改内存中 URL 的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:04:59.563

我假设您是专门引用的`browser.URL`，因为 JavaScript 只能获取它，而不能设置它。但是没有人真的需要破解`browser.URL`内存或任何东西，他们只需要在地址栏中输入他们想要的任何 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:04:41.653

`document.URL`是[不可](https://developer.mozilla.org/en-US/docs/DOM/document.URL)设置的，但当然可以通过在导航栏中立即更改或通过其他方式手动更改 URL 中的任何值。

但是，这一切都不是重点，因为无论您“将 URL 发送回服务器”，用户都可以轻松地操纵传递给服务器的内容，而无需更改`document.URL`.

# php - Zend 插件没有在我的本地主机中正确安装？

> ID：12526403
> 
> 赞同：2
> 
> 时间：2012-09-21T07:54:41.787
> 
> 标签：php, joomla

Zend 插件未安装在我的本地主机中。此问题与 php.ini 或 apache 有关。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:43:38.213

嗨，我已经解决了这个问题，这个问题与 php.ini 中的 max_execution_time 有关，我只是增加了执行时间，它工作正常。

例如：max_execution_time = 300

# uiviewcontroller - iOS 6 ViewController 正在旋转但不应该

> ID：12526410
> 
> 赞同：8
> 
> 时间：2012-09-21T07:55:19.100
> 
> 标签：uiviewcontroller, ios6, xcode4.5

我希望我的几个应用程序视图控制器在 iOS 6.0 中不旋转。这就是我为使 iOS 6 中的旋转成为可能所做的事情：

1.) 在 application:didFinishLaunchingWithOptions 中设置 windows rootviewController:

```
self.window.rootViewController = self.tabBarController; 
```

2.）在我的目标中（在 XCode 中）设置“支持的界面方向”，这样我就可以使用所有方向

3.) 实现了新的 iOS 6.0 旋转功能

```
- (BOOL) shouldAutorotate {

    return YES;
}

-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskAll;
} 
```

4.) 由于某些原因，我将 UINavigationController 子类化并实现了这些新功能，并使用这个新的 NavigationController 代替了原来的。

到目前为止一切顺利，一切正常，所有视图控制器现在都能够旋转到每个方向。现在我想要几个 viewController 不旋转，只保持纵向。但是当我像这样在那些特定的视图控制器中设置新的旋转方法时，它仍然会旋转到每个方向：

```
- (BOOL) shouldAutorotate {

    return NO;
}

-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskPortrait;
} 
```

像上面那样设置导航控制器的旋转功能也不会改变任何东西。（所有视图控制器都可以旋转到每个方向）

我究竟做错了什么？

编辑：

同样设置首选的 Interfaceorientation 不会改变任何东西：

```
- (UIInterfaceOrientation) preferredInterfaceOrientationForPresentation {

    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T17:24:59.090

如果您希望我们所有的导航控制器都尊重顶视图控制器，您可以使用一个类别。我发现它比子类化更容易。

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:10:57.040

这对我有用：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T05:37:02.383

您需要创建 UITabBarController 的类别以支持自动旋转

.h 文件的代码如下

```
@interface UITabBarController (autoRotate)<UITabBarControllerDelegate>

    -(BOOL)shouldAutorotate;
    - (NSUInteger)supportedInterfaceOrientations;

@end 
```

.m 文件的代码如下

```
-(BOOL)shouldAutorotate {

    AppDelegate *delegate= (AppDelegate*)[[UIApplication sharedApplication]delegate];
    return [delegate.tabBarController.selectedViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

注意：AppDelegate 的名称将更改为您项目的 AppDelegate 文件名。

# iphone - Xcode 4.5 - iOS 开发

> ID：12526424
> 
> 赞同：4
> 
> 时间：2012-09-21T07:56:18.743
> 
> 标签：iphone, xcode, ios6, iphone-5

在 Xcode 4.5 的发行说明中是这样写的

“Interface Builder 画布包含一个用于在 iPhone 屏幕布局之间切换的新按钮。当您单击该按钮时，Xcode 会调整全屏视图的大小以匹配选定的 iPhone 屏幕大小。当顶层视图调整大小时，Xcode 使用由指定的调整大小规则尺寸检查器中的布局约束或弹簧和支柱以重排包含的视图。12290237。

使用此按钮可在布局之间切换，并确保您定义的调整大小规则在新的 Retina 4 屏幕和以前的屏幕尺寸上都能按预期工作。”

所以这可能解决了iPhone5新的更长屏幕调整屏幕布局的问题。但是，我找不到这个按钮。有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:01:15.527

它在右下角

![xCode中的调整大小按钮](../Images/287b60a155e9ef0636d5a6b4a8ae2f24.png)

# java - RESTful URL 设计

> ID：12526427
> 
> 赞同：2
> 
> 时间：2012-09-21T07:56:30.560
> 
> 标签：java, rest, spring-mvc, restful-architecture

我们有一个功能来检查地址是否有效。

起初，网址就像

> /address/validate/{city}/{state}/{zipCode}

但后来我认为地址的所有参数只是一个资源。所以我把它改成了

> /address/validate/{city}.{state}.{zipCode}

我不确定哪个更好，你的建议是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:00:32.567

在这种情况下，我会去`/address/validate?city={city}&state={state}&zipcode={zipCode}`

为什么？好吧，这只是我的意见。但是将路径（uris）视为表示的唯一标识符。这通常是您的模型域的一部分。由于您没有存储（大概）验证结果，因此只需创建一个验证资源。

将其视为一种方法。参数是查询参数。

因此，这样做，验证（是否有效）的表示由参数修改。

将休息视为一种表示，在您的示例中，我猜它`/address/`作为一种资源存在，并且它在您的数据模型上有一个表示。因此，您可以`POST`, `PUT`and or`GET`来创建、修改和检索。

但如果你想要一个，`/address/validate`这可能是验证的结果。所以我会用我的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:00:07.667

第一。当然，它是有效的 android 可解析 uri

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:02:30.563

我认为后者是更好的选择。如果用户稍后要验证任何参数，并且如果您添加支持，那么省略参数似乎更合乎逻辑，而不是担心子路径的顺序。这最终取决于设计您的应用程序也是如此，因为 API 设计对于某些域比其他域更有意义。我也会在参数之间添加 & 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:23:44.233

我认为两者都不是有效的宁静 URL。

您的描述可以被认为是“我们需要创建地址资源并对其进行验证”。为什么不只是 POST 来`/address`创建一个地址资源，其中包含给定的城市、州和邮政编码作为通过 POST 传递的数据。现在在该逻辑中，您将验证是否可以创建资源。如果可以，那么您将创建它并返回该资源的唯一引用，该引用将在后续请求中使用`/address/:id/...`。否则，如果发生验证错误，您将返回 HTTP 错误代码`400 Bad Request`。

在我看来，这可能更“宁静”。

# c# - 如何使用 C# 在 Web 窗体中获取文本框的 GotFocus、LostFocus 事件

> ID：12526429
> 
> 赞同：3
> 
> 时间：2012-09-21T07:56:47.560
> 
> 标签：c#, asp.net

在创建网站时，我无法获得文本框的事件 GotFocus、LostFocus。我只是想。正如我之前在问题中所问的，当焦点是 winforms 中另一个文本框的文本时，如何将一个文本框的值放入另一个文本框。我能够以 Windows 形式完成它。但是，当我在网站上尝试相同的操作时，我无法获取这些事件......是否应该使用 Java 脚本来获取这些事件？请帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T08:02:07.877

GotFocus，TextBox 的 LostFocus 事件在 Windows 控件中，但对于 WebControls，您不会得到这些，而应该尝试客户端脚本 (Javascript)。

在 javascript 中，您将获得文本框的事件焦点和模糊（实际上是网页上的输入 type="text"），您可以将它们用于您的目的。

要设置事件处理程序，请`on + event`用作事件处理程序并提供要执行的 js 代码。

像模糊事件你应该添加属性`onblur`和焦点添加属性`onfocus`

在 Javascript 中，如果您的 aspx 有 TextBox，您可以尝试

```
<asp:TextBox runat="server" id="textbox1" onblur="SetTextInTextBox2()" />
<asp:TextBox runat="server" id="textbox2" onfocus="SetTextInTextBox2()" /> 
```

在javascript中

```
function SetTextInTextBox2()
{
    document.getElementById('textbox2').value = document.getElementById('textbox1').value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:07:31.770

尝试 TextBox1.Focus() 将焦点放在文本框上，如果失去焦点，请将焦点从这个 textbox1 转移到另一个或某个隐藏控件。

# xml - 缩进 XML 文件的重要性

> ID：12526438
> 
> 赞同：26
> 
> 时间：2012-09-21T07:57:19.387
> 
> 标签：xml

是否需要缩进 XML 文件中的 XML 标记才能成功解析文件？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-21T07:58:49.307

不，[XML 规范](http://www.w3.org/TR/REC-xml/#sec-white-space)定义空格是这样的：

> 在编辑 XML 文档时，使用“空白”（空格、制表符和空行）来分隔标记以提高可读性通常很方便。这种空白通常不打算包含在文档的交付版本中。另一方面，应该在交付版本中保留的“重要”空白很常见，例如在诗歌和源代码中。

所以在解析文档方面，没有。您可以根据需要或多或少地使用它，它会正确*解析*。然而，这可能会也可能不会改变 XML 文档的含义。

*解析*时从不需要缩进 XML 标记。然而，XML 的重点是人类和机器可读，因此缩进通常是值得的，因为它使人类读者更容易使用并一目了然地了解结构。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T07:58:47.753

简短，简短，简短的回答：不。

更长的答案：空格是否重要取决于您的应用程序。如果缩进 XML 文件，则会添加空格，这*有时*对处理所包含数据的应用程序有意义。

但是对于解析 XML 文件呢？空格不影响解析能力，不。请参阅 XML 规范的[空白处理部分](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-white-space)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-21T07:58:57.220

不，缩进在 XML 文档中无关紧要。

# objective-c - New orientation methods not getting called in ios6

> ID：12526439
> 
> 赞同：0
> 
> 时间：2012-09-21T07:57:20.443
> 
> 标签：objective-c

Orientation methods are not getting called in the latest version of xcode 4.5

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.    

    self.sampleController =[[SampleViewController alloc]init];

    UINavigationController * nvC =[[UINavigationController alloc]initWithRootViewController:self.sampleController];

    self.window.rootViewController =nvC;

    [self.window makeKeyAndVisible];

    return YES;

}

(BOOL)shouldAutorotate{
    return YES;
}
(NSUInteger)supportedInterfaceOrientations{
       return UIInterfaceOrientationMaskAll;
} 
```

when i take UIViewController object as windows rootviewcontroller,Its getting called properly.But,when i take UINavigationController object as windows rootviewcontroller,Its not getting called.

Would any one please help me on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:51:42.703

您可以将新控制器作为 UINavigationController 的子视图并在其中实现回调方法。然后将控制器用作窗口的rootviewcontroller。或者，如果您不喜欢创建新类，也可以使用类别来实现方法。

# android - 使用正则表达式查询安卓联系人

> ID：12526445
> 
> 赞同：1
> 
> 时间：2012-09-21T07:57:50.447
> 
> 标签：android, android-contacts, contactscontract

我想制作像 android keypad 一样的搜索模块，它提供**以数字开头**的联系人列表以及以**键盘用户类型的文本开头**。基本上我想搜索带有显示名称和号码的联系人，因为 android 本机应用程序正在给出结果。

我已经动态地制作了正则表达式，但我唯一的问题是如何使用正则表达式查询联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:07:08.923

Android 不支持这种查询联系人列表的方式，但在我看来，以标准方式读取所有联系人信息并丢弃与您的正则表达式不匹配的结果是实用且容易的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T18:15:30.307

你有没有尝试过：

```
String search = "%" + search_term + "%";
getContentResolver().query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                    new String[] { 
                            Phone._ID,
                            Phone.CONTACT_ID ,
                            Phone.NUMBER,
                            Phone.TYPE,
                            Phone.DISPLAY_NAME},
                            Phone.DISPLAY_NAME + " LIKE ? OR " + Phone.NUMBER + " LIKE ?",
                            new String[] { search, search },
                            Phone.DISPLAY_NAME);
        } 
```

# joomla - PHP 代码中的 CURL

> ID：12526447
> 
> 赞同：0
> 
> 时间：2012-09-21T07:58:08.720
> 
> 标签：joomla

我开发了一个组件，我需要确保它的安全，因为它不应再用于购买该组件的多个 URL。可以通过 PHP Curl 代码或任何其他方式来限制用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:01:49.977

是的，你可以使用

> $_SERVER['HTTP_REFERER'] ，要检查引用者还使用 CURL 传递唯一键，因此您将通过 curl 获得 $_SERVER['HTTP_REFERER'] + 唯一键，如果允许处理它...

```
<?php
echo $_SERVER['HTTP_REFERER'];
// you will get the referrer and please check using an IF clasuse
?> 
```

# algorithm - 该算法的名称是什么，与其他图像重采样算法相比如何？

> ID：12526449
> 
> 赞同：11
> 
> 时间：2012-09-21T07:58:10.323
> 
> 标签：algorithm, image-processing, resampling

这个算法在我脑海中已经存在很长时间了，但我在任何地方都找不到它的描述。虽然它是如此简单，但我不能成为唯一一个想到它的人。以下是它的工作原理：

你从一个图像开始。比如说，7x7px：

![算法 1](../Images/79a562d0d303ead64d3e932e5b2a4d66.png)

您需要将其重新采样为 5x5px：

![算法 2](../Images/cd2f72cd38c3eda927d7c675b6b2ddde.png)

所以你所做的就是取每个新方块的平均颜色：

![算法 3](../Images/254fbe6bec317fd5ba0bd3af0477457e.png)

这不是最近邻，因为它只采用一个像素的颜色，而不是恰好覆盖源像素的小数像素。它也不是双线性、双三次、lanczos 或任何其他插值。

那么 - 它是什么？在我看来，直觉上这应该是“数学上完美”的重采样算法，尽管由于我没有“数学上完美”的定义，我无法证明或反驳这一点。

最后但同样重要的是，“数学上完美”并不总是“最好看”，所以我想知道它在“质量”方面与其他主流图像重采样算法（双三次、lanczos）相比如何？当然，这是一个主观术语，所以我真的很感兴趣这个算法和其他算法之间是否存在显着差异，大多数人都会同意这一点。

PS 我已经可以讲述一些事情了——它不会是像素艺术的“最佳外观”，如此处所示；有专门的算法（2xSAI 等）；而且它也不是放大图片的最佳选择 - 插值会在那里获胜。但是对于缩小图片...？

**更新 1：**嗯，刚刚发现了[supersampling](http://en.wikipedia.org/wiki/Supersampling)。这似乎是它的一个变体，具有网格类型的样本排列，其中样本的数量针对源图像和目标图像的分辨率进行了优化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:32:52.473

您所说的算法称为**区域平均算法**，它是一种很少用于缩小图像的算法。

它的一个更简单的变体被用作一种**抗锯齿技术，用于平滑计算机游戏中的渲染图像。**

这种技术的算法称为[超级采样](http://en.wikipedia.org/wiki/Supersampling)

![在此处输入图像描述](../Images/becd2e05b0c134cf460b962a5bfece08.png)

感谢@Guffa 指出，这是对上述算法的简化，因为它需要采样点并且可能会错过某些颜色，或者选择一种颜色的次数比另一种颜色多，即使它不是最主要的。
上述算法相当于超采样算法的无限点采样。

**更新：** 刚刚注意到，即使是 Java 也很欣赏你的算法 :)
[AreaAveragingScaleFilter](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/AreaAveragingScaleFilter.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T02:54:55.560

我将首先说我不知道​​您的算法的正式名称。我知道 Paint Shop Pro 早期将其称为“双线性”，但在第 8 版中被指出该算法与双线性的经典定义不匹配时，被迫将其重命名为“加权平均”。

大多数调整大小算法可以在两个独立的通道中应用，一个在 X 方向，一个在 Y 方向。这不仅更有效，而且更容易描述和推理不同的算法。从现在开始，我将在一个维度上工作，并假设您可以推断为 2D。

您的输入由 7 个像素组成，我们将给出 0、1、2、3、4、5、6 的坐标。认识到在这种情况下[像素不是一个小正方形](http://www.cs.cmu.edu/afs/cs.cmu.edu/academic/class/15869-f11/www/readings/smith95_pixelsquare.pdf) ，而只是一个点，这很有用。要创建输出，您将需要点 0.2、1.6、3.0、4.4、5.8 的插值。为什么不是 0.0、1.5、3.0、4.5、6.0？假设您将输入和输出的大小加倍为 14x14 和 10x10：坐标现在为 0.0、1.44、2.89、4.33、5.78、7.22、8.67、10.11、11.56、13.0。从第二个像素开始，结果会有所不同，这是不可接受的。所有点应相距 7/5，坐标为 0.2、1.6、3.0、4.4、5.8、7.2、8.6、10.0、11.4、12.8。

让我们比较以过滤器表示的常见调整大小算法，看看它们与您的比较。

![最近邻过滤器](../Images/6475b1dc43f45ee819631a7dade79157.png)

通用形式的第一个示例称为 Box 或 Averaging 过滤器。但是当盒子过滤器的宽度正好是 1.0 时会发生一件神奇的事情：输入中的一个像素将落在盒子内并被赋予 1.0 的权重，而输入中的所有其他像素将被赋予 0.0 的权重. 这使得它相当于最近邻算法。

![双线性滤波器](../Images/b24c4dc72dbfa47f3c94accd1c0044f2.png)

我们的第二个示例通常称为 Tent 过滤器。当宽度恰好为 2.0 时，它再次变得特别，它变成了线性插值；应用于 2D 它称为双线性。

![双三次过滤器](../Images/14f1d5f7d2e1cdc402fa445cab061040.png)

第三个例子是立方过滤器，当应用于 2D 时，它被称为 Bicubic。这个公式有不同的变体，这个例子使用了 Mitchell 和 Netravali 建议的那个。

![高斯滤波器](../Images/9b5fc9e1291c11ff4a1a7c4f8eb55bc5.png)

虽然高斯滤波器不常用于调整大小的应用程序，但我在此处添加了它以进行比较。

![加权平均过滤器](../Images/bf263c26acdd9d7d17e4fa56252bdd1c.png)

最后我们达到了你的算法。它是平均和双线性的组合，是一个平顶帐篷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-21T17:04:46.440

与我在其他答案中读到的相反，该算法实际上对于超级采样非常流行，至少在图像处理社区中是这样。

它在 Intel 的 Performance Primitives 库中以[Super Sampling](https://software.intel.com/en-us/node/505189)的名称实现；（相当不具信息性的）名称是一种说明库中没有用于超级采样的替代算法的方式。在 OpenCV 中，它的名称为[`INTER_AREA`](http://docs.opencv.org/3.2.0/da/d54/group__imgproc__transform.html#gga5bb5a1fea74ea38e1a5445ca803ff121ac97d8e4880d8b5d509e96825c7522deb); 它被列在其他插值类型中，这可能表明它们是可以互换的，但提到“*它可能是图像抽取的首选方法*”——对我来说这是一个相当保守的说法。

当您通过整数因子对图像进行超采样时，例如通过因子 2，获取结果图像的基础像素的平均值（例如通过`scikit-image`'s所做的[`downscale_local_mean`](https://scikit-image.org/docs/dev/api/skimage.transform.html#skimage.transform.downscale_local_mean)）在特定意义上确实是最佳的。

假设您的图像是通过受体网格对信号进行一些定量测量而获得的。例如，照片或 X 射线，计算光子的数量。像素值与给定受体接收到的信号量成正比。

如果您假设您的相机是完美的——没有信号扩散，接收区域 100% 覆盖——那么意味着超级采样是最佳的，因为它可以提供完美相机接收到的精确图像，分辨率只有一半。

面积平均是这种最优平均超级采样到非整数比率的直接推广，这解释了它的流行，尽管它不能对除整数以外的任何超级采样比率拥有相同的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:05:13.420

您的描述并没有让我想起最有可能是数据结构和数据类型的算法。它让我想起了 kd-tree 或四叉树。kd-tree 或四叉树可以帮助您解决最近邻的问题。但是，如果想要网格的数学函数，您还可以查看空间填充曲线，尤其是 z 阶莫顿曲线。这适用于 2 的幂并降低 2d 复杂性。函数是 f(x,y) = (f(x), f(y))。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-21T08:29:25.667

> 它也不是双线性的

是的，实际上是这样。双线性重采样只是二维的线性插值。

您将其描述为获取像素表面的平均颜色，但从周围像素进行插值只是计算相同值的一种更简单的方法。

插值一次完成一维，因此您只需计算重叠边而不是重叠区域，这要简单得多。

# mybatis - Does mybatis support hot deploy?

> ID：12526451
> 
> 赞同：0
> 
> 时间：2012-09-21T07:58:24.237
> 
> 标签：mybatis

When a web application based spring has been launched, could the modifications to sql map file be reflected immediately? I'm using mybatis 3 and jrebel plugin, modifications to classes can be reflected instantly. I guess modifications to the sql map file can be hot deployed somehow, because I did similar things to ibatis before, but for now I've not researched into mybatis source code. Does anyone know that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:56:02.583

MyBatis 的 JRebel 集成需要更新。[请在论坛](http://zeroturnaround.com/forums)提交功能请求。

# java - Difference between PKCS1-padding/RSA encryption ios objc and java

> ID：12526452
> 
> 赞同：30
> 
> 时间：2012-09-21T07:58:28.280
> 
> 标签：java, android, ios, encryption, rsa

I’m developing a application for ios and Android. I’m relatively new to crypto tasks and for the last 3 Days I keep banging my head against the wall because I’m not able to get RSA encryption running.

Both clients receive a public key from a java server. In android i have (obviously, because it is almost the same code as on server side) no troubles, but the ios part seems to be not compatible at all. I want to encrypt a little piece of data (aes key) with the public key and this is how I do this in Java:

```
try {
    String publickey  = "MCwwDQYJKoZIhvcNAQEBBQADGwAwGAIRAK+dBpbOKw+1VKMWoFxjU6UCAwEAAQ==";
    byte[] bArr = Crypto.base64Decode(publicKey, false);
    KeyFactory keyFactory = KeyFactory.getInstance("RSA", "BC");
    EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(publicKey);
    PublicKey publicKey = keyFactory.generatePublic(publicKeySpec);

    Cipher cipher = Cipher.getInstance("RSA/NONE/PKCS1Padding", "BC");
    cipher.init(1,publicKey);
    int cipherBlockSize = cipher.getBlockSize();
    ByteArrayOutputStream bArrOut = new ByteArrayOutputStream();
    bArrOut.flush();
    int pos = 0;
    Log.i("ContentBufferLength", contentBuffer.length+"");

    while (true) {
        if (cipherBlockSize > contentBuffer.length - pos) {
            cipherBlockSize = contentBuffer.length - pos;
        }
        Log.i("CipherBlockSize", cipherBlockSize+"");
        byte[] tmp = cipher.doFinal(contentBuffer, pos, cipherBlockSize);
        bArrOut.write(tmp);
        pos += cipherBlockSize;
        if (contentBuffer.length <= pos) {
            break;
        }
    }
    bArrOut.flush();
    encryptedBuffer = bArrOut.toByteArray();
    bArrOut.close();
} catch (Exception ex) {
    throw ex;
}

//  Log.i("Encrypted Buffer Length", encryptedBuffer.length+"");
return encryptedBuffer; 
```

And this is my (not properly working) ios code, borrowed from here:

[http://blog.wingsofhermes.org/?p=75](http://blog.wingsofhermes.org/?p=75) and the apple crypto exercises.

```
-(NSString* )encryptWithPublicKey:(NSString*)key input:(NSString*) input {
    const size_t BUFFER_SIZE =      16;
    const size_t CIPHER_BUFFER_SIZE = 16;
   //const uint32_t PADDING = kSecPaddingNone;
    const uint32_t PADDING = kSecPaddingPKCS1;

    static const UInt8 publicKeyIdentifier[] = "de.irgendwas.app";

    NSData *publicTag;

    publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier length:sizeof(publicKeyIdentifier)];

    NSMutableDictionary *publicKey2 = [[NSMutableDictionary alloc] init];
    [publicKey2 setObject:kSecClassKey forKey:kSecClass];
    [publicKey2 setObject:kSecAttrKeyTypeRSA forKey:kSecAttrKeyType];
    [publicKey2 setObject:publicTag forKey:kSecAttrApplicationTag];
    SecItemDelete((CFDictionaryRef)publicKey2);

    NSData *strippedPublicKeyData = [NSData dataFromBase64String:key];

    unsigned char * bytes = (unsigned char *)[strippedPublicKeyData bytes];
    size_t bytesLen = [strippedPublicKeyData length];

    size_t i = 0;
    if (bytes[i++] != 0x30)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    /* Skip size bytes */
    if (bytes[i] > 0x80)
        i += bytes[i] - 0x80 + 1;
    else
        i++;

    if (i >= bytesLen)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    if (bytes[i] != 0x30)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    /* Skip OID */
    i += 15;

    if (i >= bytesLen - 2)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    if (bytes[i++] != 0x03)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    /* Skip length and null */
    if (bytes[i] > 0x80)
        i += bytes[i] - 0x80 + 1;
    else
        i++;

    if (i >= bytesLen)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    if (bytes[i++] != 0x00)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    if (i >= bytesLen)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    strippedPublicKeyData = [NSData dataWithBytes:&bytes[i] length:bytesLen - i];

    DLog(@"X.509 Formatted Public Key bytes:\n%@",[strippedPublicKeyData description]);

    if (strippedPublicKeyData == nil)
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    CFTypeRef persistKey = nil;
    [publicKey2 setObject:strippedPublicKeyData forKey:kSecValueData];
    [publicKey2 setObject: (kSecAttrKeyClassPublic) forKey:kSecAttrKeyClass];
    [publicKey2 setObject:[NSNumber numberWithBool:YES] forKey:kSecReturnPersistentRef];

    OSStatus secStatus = SecItemAdd((CFDictionaryRef)publicKey2, &persistKey);

    if (persistKey != nil) CFRelease(persistKey);

    if ((secStatus != noErr) && (secStatus != errSecDuplicateItem))
        [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

    SecKeyRef keyRef = nil;
    [publicKey2 removeObjectForKey:kSecValueData];
    [publicKey2 removeObjectForKey:kSecReturnPersistentRef];
    [publicKey2 setObject:[NSNumber numberWithBool:YES] forKey:kSecReturnRef];
    [publicKey2 setObject: kSecAttrKeyTypeRSA forKey:kSecAttrKeyType];

    SecItemCopyMatching((CFDictionaryRef)publicKey2,(CFTypeRef *)&keyRef);
    if (!keyRef)
    [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];  

    uint8_t *plainBuffer;
    uint8_t *cipherBuffer;
    uint8_t *decryptedBuffer;

    const char inputString[] = "1234";
    int len = strlen(inputString);
    // TODO: this is a hack since i know inputString length will be less than BUFFER_SIZE
    if (len > BUFFER_SIZE) len = BUFFER_SIZE-1;
    plainBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));
    cipherBuffer = (uint8_t *)calloc(CIPHER_BUFFER_SIZE, sizeof(uint8_t));
    decryptedBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));

    strncpy( (char *)plainBuffer, inputString, len);

    size_t plainBufferSize = strlen((char *)plainBuffer);
    size_t cipherBufferSize = CIPHER_BUFFER_SIZE;

    NSLog(@"SecKeyGetBlockSize() public = %lu", SecKeyGetBlockSize(keyRef));
    //  Error handling
    // Encrypt using the public.
    OSStatus status = noErr;

    status = SecKeyEncrypt(keyRef,
                           PADDING,
                           plainBuffer,
                           plainBufferSize,
                           &cipherBuffer[0],
                           &cipherBufferSize
                           );
    NSLog(@"encryption result code: %ld (size: %lu)", status, cipherBufferSize);

    return [[[NSString stringWithFormat:@"%s",cipherBuffer] dataUsingEncoding:NSUTF8StringEncoding] base64EncodedString];
} 
```

For testing purposes and simplicity for the moment I am trying to encrypt only a input with a length of 4 bytes. This should be small enough to fit one block. The public key import and the encrypting process seems to work, however I always receive a much longer output compared to the android method.

The only difference I encountered so far is the fact, that `SecKeyGetBlockSize returns 16` and in java cipher.blocksize returns 5\. I think the other 11 bytes are reserved for the pkcs1 padding, but how can force the same behaviour in `ios/objc`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T12:41:03.527

尝试将密文分成多个部分，使每个部分包含 16 个字符长并分别解码它们。我也遇到了同样的问题，但这在 PHP 中已经存在很长时间了，而且上面的技巧对我有用。

这可能会帮助您摆脱问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T07:24:55.573

解码 Base64 密钥给出：

```
MCwwDQYJKoZIhvcNAQEBBQADGwAwGAIRAK+dBpbOKw+1VKMWoFxjU6UCAwEAAQ==
-> 302c300d06092a864886f70d0101010500031b003018021100af9d0696ce2b0fb554a316a05c6353a50203010001 
```

将其解释为 DER 编码的 ASN.1，我们发现：

```
30(2c) //SEQUENCE
  30(0d)  //SEQUENCE
    06(09): 2a 86 48 86 f7 0d 01 01 01  //OID 1.2.840.113548.1.1.1 (RSA Encryption)
    05(00): //NULL                           
    03(1b): [00] 30 18 02 11 00 af 9d 06 96 ce 2b 0f b5 54 a3 16 a0 5c 63 53 a5 02 03 01 00 01 //BITSTRING 
```

BITSTRING 似乎也包含 DER 编码的 ASN.1：

```
30(18) //SEQUENCE
  02(11): 00 af 9d 06 96 ce 2b 0f b5 54 a3 16 a0 5c 63 53 a5 02 03 01 00 01 //INTEGER

 = 0xaf9d0696ce2b0fb554a316a05c6353a50203010001 
```

遍历 IOS 代码，可以看到它正在解析 DER 编码的 ASN.1。它正确识别了前两个 SEQUENCE 标记，并跳过了 OID 字段，甚至没有验证它是否是 OID。然后问题就出现了：IOS 代码期望下一个标签是 BITSTRING(0x03)——但是在我们的数据中，我们有一个额外的 NULL(0x05) 字段来表示公共指数是隐式的。IOS 代码在遇到 0x05 标记时引发异常。如果 NULL 不存在，我们看到 IOS 代码将成功提取 BITSTRING 的内容。

所以：要么 NULL 是一个可选字段，并且 IOS 代码不允许它，要么 IOS 代码需要不同的 ASN.1 结构。例如，BITSTRING 似乎也是一个 DER 编码的 ASN.1 INTEGER（可能是 RSA 模数）。然而 IOS 代码并没有尝试解析它。可能是 IOS`SecKeyEncrypt`例程需要这种格式的模数，或者可能是调用者应该提取模数的原始字节。

因此，仍然需要进行一些实验。但是，如果此代码要解析提供的数据对象，则肯定需要以下附加条件：

```
/* Skip OID */
i += 15;

if (i >= bytesLen - 2)
    [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not set public key."];

if (bytes[i] == 0x05)    /* This should handle the spurious ASN.1 NULL field */
    i += 2;

if (bytes[i++] != 0x03) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-19T13:01:21.363

在 Android 或 Java 中，生成的密钥采用标准 ASN.1 格式，在外部世界（客户端、服务器端）中运行良好，但在 iOS 中，生成的密钥（公共、私有）采用原始格式，您必须将其转换为正确的 ASN.1 格式以使它们可行。

# apache - How to block external http header 302 redirect apache

> ID：12526453
> 
> 赞同：3
> 
> 时间：2012-09-21T07:58:31.147
> 
> 标签：apache, .htaccess, redirect, external

I cannot block an external http header 302 redirect from pointing to my website.

I have tried all the .htaccess redirect rules. I don't have access to the http conf file, my web host assures me this cannot be done, but cannot help me block this external http header.

This is the code from the external http header:

```
`HTTP/1.1 302 Moved Temporarily =>`
`Date => Fri, 21 Sep 2012 07:35:15 GMT`
`Server => Apache`
`X-Powered-By => PHP/5.3.16`
`Expires => Thu, 19 Nov 1981 08:52:00 GMT`
`Cache-Control => no-store, no-cache, must-revalidate, post-check=0, pre-check=0`
`Pragma => no-cache`
`Set-Cookie => osCsid=eidbr9o47qqcjap8el0ck5la67; path=/; domain=http://nastydomain.co.uk`
`Location => http://www.mydomain.co.uk/`
`Connection => close`
`Content-Type => text/html` 
```

Google has now spidered the website and it now looks like there are two sites with duplicate content. Google.co.uk has also said they won't do anything about this site unless I get a court order.

Any ideas how I can block 302 redirects to my site?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:01:44.257

[http://www.webmasterworld.com/forum30/28329-24-30.htm](http://www.webmasterworld.com/forum30/28329-24-30.htm)在最后 2 个帖子中显示了您可以采取的唯一防御措施，但它仍然无效。

最好的方法是合法的（如果你有生意，你也应该有法律保险）或通过垃圾邮件报告或网站删除工具联系谷歌。

**- 编辑 -**

我能想到的最佳解决方案：由于垃圾邮件发送者使用 302 重定向：

转到谷歌的网站管理员工具，将垃圾邮件发送者网站放入您的网站管理员工具中。获取验证码，将其放在他链接到的页面的 HTML 代码中（在这种情况下是您的主索引），运行站点验证，它应该接受它。

当它被验证时，从谷歌的索引中“阻止”该网站。

额外的好处是，您现在可以控制该域的所有索引，以备将来使用。带来伤害！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:02:52.457

尝试阻止引用：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} nastydomain\.com [NC,OR]
RewriteCond %{HTTP_REFERER} www.nastydomain\.com
RewriteRule .* - [F] 
```

更新：如果上述方法对您不起作用，您可以使用拒绝、允许指令和使用 env 来阻止。请参阅 [http://httpd.apache.org/docs/2.2/howto/access.html#env]：

```
SetEnvIfNoCase Referer "^http://(www.)?nastydomain.com" bad_domain=1
SetEnvIfNoCase Referer "^http://casino-poker.com" bad_domain=1

<FilesMatch "(.*)"> 
Order Allow,Deny 
Allow from all 
Deny from env=bad_domain
</FilesMatch> 
```

由于必须查找域名，因此使用它可能会降低性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:46:05.130

因为他在 cookie 中发送他的域名，所以在你的 htaccess 开头试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_COOKIE} nastydomain\.co\.uk
RewriteRule .* - [F] 
```

# android - 在android中禁用webview缩放

> ID：12526462
> 
> 赞同：0
> 
> 时间：2012-09-21T07:59:00.943
> 
> 标签：android

如何在 webview 中禁用缩放效果....我正在尝试下面的代码，但它对我不起作用

```
mWeb = (WebView) findViewById(R.id.web);
mWeb.setBackgroundColor(Color.parseColor("#1d1d1d"));
WebSettings mWebSetting=mWeb.getSettings();
mWebSetting.setBuiltInZoomControls(false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:05:02.363

```
wv.getSettings().setSupportZoom(false); 
```

setBuiltInZoomControls 它不会禁用多点触控缩放，但会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:03:30.070

设置是否使用屏幕缩放按钮。启用内置缩放控件和禁用屏幕缩放控件的组合允许捏缩放以在没有屏幕控件的情况下工作

它仅适用于 Api 级别 11.. 参见：http: [//developer.android.com/reference/android/webkit/WebSettings.html#setDisplayZoomControls%28boolean%29](http://developer.android.com/reference/android/webkit/WebSettings.html#setDisplayZoomControls%28boolean%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:05:48.893

在 Api 11 或更高版本上，您可以使用

```
mWeb getSettings().setBuiltInZoomControls(false);
mWeb.getSettings().setDisplayZoomControls(false); 
```

# mysql - 从固定数量的类别中限制固定数量的行

> ID：12526467
> 
> 赞同：-2
> 
> 时间：2012-09-21T07:59:31.323
> 
> 标签：mysql

为简单起见，我将留下与问题无关的字段。

我的表结构是，

**消息**

`news_id | parent_category | child_category`

**类别**

`category_id | maincategory_name`

**子类别**

`subcategory_id | subcategory_name`

正如已经很明显的，`category_id`被链接到`parent_id`和`subcategory_id`被链接到`child_category`表`news`。

* * *

**我现在拥有的**

```
SELECT * 
 FROM (

       SELECT news . * , @rn := 
       CASE WHEN @child_category = child_category
       THEN @rn +1
       ELSE 1 
       END AS rn, @child_category := child_category
       FROM news, (

                   SELECT @rn :=0, @child_category := NULL
                   ) AS vars
                       ORDER BY child_category
                   ) AS T1

                        LEFT JOIN category ON parent_category = category.category_id
                        LEFT JOIN subcategory ON child_category =  
                        subcategory.subcategory_id
                        WHERE rn <=12 AND parent_category = (SELECT category_id FROM 
                        category WHERE maincategory_name='ukraine') AND 
                        child_category!= (SELECT `subcategory_id` FROM subcategory 
                        WHERE `subcategory_name` = 'kiev')
                        ORDER BY category.category_id DESC 
```

上面的 sql 工作并从每个类别中获取 12 行。

**问题** 我现在面临的问题是，查询从每个类别中获取数据。我想将此类别数限制为 2 或 3。例如，如果`subcategory`表中有 8 个子类别，它将从所有子类别中获取数据。我想将获取限制在一个限制，比如 3（任何 3 个类别）。

我尝试使用如下`IN`语句，

```
SELECT * 
     FROM (

       SELECT news . * , @rn := 
       CASE WHEN @child_category = child_category
       THEN @rn +1
       ELSE 1 
       END AS rn, @child_category := child_category
       FROM news, (

                   SELECT @rn :=0, @child_category := NULL
                   ) AS vars
                       ORDER BY child_category
                   ) AS T1

                        LEFT JOIN category ON parent_category = category.category_id
                        LEFT JOIN subcategory ON child_category =  
                        subcategory.subcategory_id
                        WHERE rn <=12 AND parent_category = (SELECT category_id FROM 
                        category WHERE maincategory_name='ukraine') AND 
                        child_category IN (2,4)
                        ORDER BY category.category_id DESC 
```

`IN range`将由子查询检索的位置。在逻辑上，如果我将该子查询限制为 3 个结果，我的工作就完成了。但事实证明，`IN`语句不支持`LIMIT`子查询中的子句。

**所以问题是，从有限数量的类别**中检索数据（已修复但我已经弄清楚）的解决方法是什么。

* * *

**相同的数据**

新闻表

```
| news_id | parent_category | child_category
|   1     |       1         |     1
|   2     |       1         |     2 
```

类别表

```
| category_id | maincategory_name
|      1      |      Ukraine
|      2      |      Russia
|      3      |      Belarus 
```

子类别表

```
| subcategory_id | subcategory_name
|        1       |     Kiev
|        2       |     Odessa
|        3       |     Moscow
|        4       |     Simferopol
|        5       |     Dnipropetrovsk 
```

结果应该是这样的......

假设 Kiev、Odessa、simferopol 和 Dnipropetrovsk 进入主类别 1 即乌克兰，我想要 2 个类别**不包括 Kiev**（即结果应包含*simferopol*和*Dnipro*或*Odessa*和*Dnipro*或*Odessa*和*simferopol*）

问题是，查询将获取所有 3 个类别（或更多，如果可用），而我只需要 2 个（或有时 3 个）。

**更多信息**

* * *

*sql小提琴*

```
create table News(news_id int, parent_category int, child_category int);
insert into News values (1,1,1), (2,1,2), (3,1,2), (4,1,4),(5,1,4), (6,1,5), (7,2,3), (8,1,5), (9,1,2);
create table Category(category_id int, maincategory_name varchar(100));
insert into Category values (1, 'Ukraine'), (2, 'Russia'), (3, 'Belarus');
create table Subcategory (subcategory_id int, subcategory_name varchar(100));
insert into Subcategory values (1, 'Kiev'), (2, 'Odessa'), (3, 'Moscow'), (4, 'Simferopol'), (5, 'Dinipro'); 
```

*样本数据*

![在此处输入图像描述](../Images/2ae30a9e8f730abdcc9a22cb79122d77.png)

**目标**

从上面的结果我想实现以下目标：

*   仅从一个主要类别（即此处的乌克兰并删除俄罗斯）中获取结果，但可以轻松完成，因此无需担心。

*   仅获取 2 个子类别（上面的集合包含 3 个子类别。敖德萨、辛菲罗波尔和第聂伯罗。我只想要其中的任何两个）。我可以对其进行硬编码以检索它，但我也会在其他地方使用相同的查询，因此硬编码会破坏该目的。

*   从上面提取的上述 2 个子类别中的每个子类别中，应从每个子类别中获得最多 5 行。（我在我的问题的第一个查询中实现了这一点）。

从以上2个要求，我没有达到。1和没有。3\. 我被卡住的地方是 2 号。从结果集中，我无法获取仅包含 2 个子类别的结果。结果集输出包含所有可用类别的数据。（这里只有 3 个子类别，因此结果包含所有 3 个。如果有 10 个子类别，它将检索所有 10 个子类别数据）。我希望现在更清楚一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:56:13.537

恐怕我还没有得到你想要的。你为什么不简单地使用 a `GROUP BY`？

```
/* SELECT * FROM ( */
SELECT 
n.news_id,
c.maincategory_name,
sc.subcategory_name
FROM
News n
INNER JOIN Category c ON n.parent_category = c.category_id
INNER JOIN Subcategory sc ON n.child_category = sc.subcategory_id
WHERE maincategory_name = 'Ukraine'
GROUP BY maincategory_name, subcategory_name
ORDER BY RAND()
LIMIT 2
/* )q1 INNER JOIN with_whatever ON q1.news_id = with_whatever.Id */ 
```

该表`with_whatever`包含您要从中获取“每个子类别最多应获取 5 行”的数据。您的示例数据仍然没有反映这一点。这就是为什么我不确定，如果这是你要求的。

# iphone - IOS UItableview reloadRowsAtIndexPaths 刷新问题

> ID：12526468
> 
> 赞同：4
> 
> 时间：2012-09-21T07:59:36.577
> 
> 标签：iphone, ios, uitableview

我想更新到 tableview 自定义单元格。我想在搜索时刷新表格单元格。我使用 reloadRowsAtIndexPaths 方法。此方法有效，但没有更新单元格。你能帮我吗

下面的方法运行当我搜索

```
-(void)doSearchHotelName:(id)sender{

    NSIndexPath *tmpIndexpath=[NSIndexPath indexPathForRow:1 inSection:0];

    [self.tableV beginUpdates];
    [self.tableV reloadRowsAtIndexPaths:[NSArray arrayWithObjects:tmpIndexpath, nil] withRowAnimation:UITableViewRowAnimationFade];
    [self.tableV endUpdates];

} 
```

下面方法表方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"Hotel_FilterSearchCell";

    Hotel_FilterSearchCell_iPad *cell = (Hotel_FilterSearchCell_iPad *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) 
    {
        NSArray *nib ;

        nib = [[NSBundle mainBundle] loadNibNamed:@"Hotel_FilterSearchCell_iPad" owner:self options:nil];

        cell = [nib objectAtIndex:0];
    }

    else if ([indexPath row]==1) {

        if([SharedAppDelegate.filter_selected_hotels_list count]==[SharedAppDelegate.filter_hotels_list count])

            [cell.cellExtraInfo setText:@"All(H)"];

        else if ([SharedAppDelegate.filter_selected_hotels_list count]!=[SharedAppDelegate.filter_hotels_list count])  

            [cell.cellExtraInfo setText:[NSString stringWithFormat:@"%i %@",[SharedAppDelegate.filter_selected_hotels_list count],@"Selected(H)"]];

    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T08:33:32.503

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T23:14:26.940

尝试更改`UITableViewRowAnimationFade`为`UITableViewRowAnimationNone`并让我知道这是否有帮助。

我只需要这样做，因为我在情节提要中使用了静态 UITableView，并且似乎任何动画都会将旧单元格移出视图并替换为新单元格。这基本上从表格中删除了单元格，因为旧单元格和新单元格是同一个对象（我的假设）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:25:15.950

来自 UITableView[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html)：

> **beginUpdates**
> 开始一系列插入、删除或选择接收器的行和部分的方法调用。

除非您要插入、删除或选择行或节，否则不应使用此方法。

# apache-flex - 闪耀，如何知道客户端已“断开连接”？

> ID：12526469
> 
> 赞同：0
> 
> 时间：2012-09-21T07:59:52.073
> 
> 标签：apache-flex, blazeds

blazeds 服务器端不知道客户端已断开连接。但它似乎知道客户端的网络已关闭。

在我的例子中，我使用轮询通道，我下载了 blazeds 的源代码，并在`FlexClientOutboundQueueProcessor.flush(MessageClient messageClient, List<Message> outboundQueue)`方法中添加了一些日志输出。

然后我看到了，当客户端订阅时，服务器端`FlexClientOutboundQueueProcessor.flush`每3秒调用一次该方法，并打印我在flush方法中添加的内容，然后我只关闭客户端的网络，不关闭浏览器（客户端和服务器不同的网络)，我发现服务器端不打印任何东西，这意味着服务器端不调用flush方法。

30多分钟后，我恢复了客户端的网络，服务器端继续调用flush方法（客户端的会话没有被破坏，如果我关闭客户端的浏览器，30分钟后服务器端会破坏会话） .

现在，我有两个问题：

1.  服务器端如何知道客户端的网络已关闭？是否有监听器来监控客户端的网络？如果是这样，它在哪里？如果没有，代码如何以及在哪里？

2.  好像服务端会`FlexClientOutboundQueueProcessor.flush`每3秒调用一次方法，这个间隔可以配置吗？以及在哪里启动或停止这个计时任务的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:03:19.130

这里回答您的第一个问题：[Detecting (on the server side) when a Flex client disconnects from BlazeDS destination](https://stackoverflow.com/questions/2326927/detecting-on-the-server-side-when-a-flex-client-disconnects-from-blazeds-desti)

关于配置。您可以在 services-config.xml 中进行配置。

[示例 BlazeDS 应用程序](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=lcoverview_4.html)

[使用基于 servlet 的端点配置通道](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/lcconfig_3.html#1089380)

# java - 在 DefaultSharedPreferences 中启用和选择首选项

> ID：12526470
> 
> 赞同：1
> 
> 时间：2012-09-21T07:59:57.747
> 
> 标签：java, android

我正在尝试启用 DefaultSharedPreferences 中的项目。

在preferences.xml 我将值更改为`android:enabled="false"`

现在，我尝试创建一个代码，该代码将在选中DefaultSharedPreferences中其他位置的复选框时启用此偏好。

我的 XML 文件：

```
 <CheckBoxPreference
        android:key="checkboxinternet"
        android:title="Checkbox Preference"
        android:summary="Check it on, check it off"
    /> 
```

所以当这个复选框被选中时

```
SharedPreferences ingevuldesysteeminstellingen = PreferenceManager.getDefaultSharedPreferences(this);   

    if (true == ingevuldesysteeminstellingen.getBoolean( "checkboxinternet", false )) {
        Editor editor = PreferenceManager.getDefaultSharedPreferences(this).edit();
        editor.putBoolean( "checkboxinternet", false);
        editor.commit();
    } else { } 
```

这是否可能，尝试更改值 Enabled 和 selectable，现在已经研究了几天，并开始相信这甚至是不可能的。

**更新**

到目前为止，我得到了以下部分的工作，当一个复选框被按下时，我可以让它执行一些东西。但我仍然无法让它工作以使列表或其他复选框启用或可选择。

到目前为止我的一段代码

```
ingevuldesysteeminstellingen = PreferenceManager.getDefaultSharedPreferences(this);

    listener = new SharedPreferences.OnSharedPreferenceChangeListener() 
    {
        public void onSharedPreferenceChanged(SharedPreferences ingevuldesysteeminstellingen,String key) 
        {

            if (key.equals( "checkboxautomaticrefresh")) 
            {
                System.out.println("Checkbox automatic refresh werd uitgelezen");
                //refreshtijdenable();
            }
            else
            {
            }

        }
    };      
    ingevuldesysteeminstellingen.registerOnSharedPreferenceChangeListener(listener); 
```

那么接下来我要获得一个列表或一个复选框是否启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:07:08.957

您可以在您的 中使用以下代码`PreferenceActivity`：

```
 //Retrieve the other checkbox
    CheckBoxPreference otherCheckboxPref = 
    (CheckBoxPreference) getPreferenceManager().findPreference("othercheckboxpreff");

    //Set a listener to the checkbox
    otherCheckboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {  

       public boolean onPreferenceChange(Preference preference, Object newValue) {
           //Retrieve the 'checkboxinternet'
           CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("checkboxinternet");   
           //If it's checked, set the 'checkboxinternet' Enabled property to true
           if (newValue.toString().equals("true"))
           {  
                checkboxPref.Enabled = true;
           } 
           //Else , set it to false
           else 
           {  
                checkboxPref.Enabled = false;
           }
           return true;
        }
     }); 
```

# php - 比较没有停用词 PHP 的字符串

> ID：12526474
> 
> 赞同：0
> 
> 时间：2012-09-21T08:00:04.090
> 
> 标签：php, keyword, string-comparison, stop-words

我想比较没有停用词的 2 个字符串，例如

LIKE 术语，可以或包含：例如：“它是两个”或“两个”将被视为相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:04:57.817

```
$stopwords = array("it's", 'foo', '')
if (trim(str_replace($stopwords, "", $string1)) == $string2) print 'True' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:03:29.877

你需要一个“停用词”列表。您可能可以在网上找到一个，否则您必须自己设置一个。

然后相当容易，使用[str_replace](http://php.net/manual/en/function.str-replace.php)替换所有出现的停用词，然后进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:07:07.310

这对我来说听起来像是家庭作业，所以我会用伪代码解释它以帮助你开始。

定义一个包含所有“停用词”的数组。

在空格（“”）上拆分要比较的字符串

现在遍历您获得的数组，跳过“停用词”数组中存在的所有标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:02:42.920

您可以使用[`strpos`](http://php.net/strpos)：

```
if ( strpos("it's two", "two") !== false ) {
  // string "two" found in "it's two"
} 
```

# ember.js - 如何索引路由到“默认”关联记录？

> ID：12526475
> 
> 赞同：0
> 
> 时间：2012-09-21T08:00:04.163
> 
> 标签：ember.js, ember-data

我正在玩一个由 Ember 数据支持的 Ember 应用程序。领域语言有点具体，所以我将使用术语库和图像来表示模型。这两者是相关联的：Gallery 有很多图像。

当我路由到画廊时，插座中填充了galleryView，它将所有图像呈现为缩略图。它还有一个出口，“选定”图像显示为全尺寸。这在使用嵌套路由时效果很好。

对我来说，关键是我希望画廊的索引路由默认显示画廊中的第一张图片。我发现这实施起来有点棘手。

在路由时，画廊可能尚未从后端获取。这对画廊本身没有任何问题，但我没有设法引用尚未加载的画廊的尚未加载的关联图像。

```
 connectOutlets: function(router) {
      var controller = router.get('galleryController');
      var context = controller.get('defaultImage');
      controller.connectOutlet('image', context);
    } 
```

defaultImage 是我一直在尝试引用我还不知道其 ID 或真正引用的图像的地方。到目前为止，我还不能从该方法返回一些东西，该方法在加载数据时会实际更新视图。

我会让自己难堪并展示这种方法......即使它现在根本不起作用。

```
defaultImage: Ember.computed(function() {
  var image = Ember.Object.create({
    isLoaded: false
  });
  if (this.get('content.isLoaded')) {
    var images = this.get('content.images');
    image = images.objectAt(0);
  }
  return image;
}).property('content.isLoaded') 
```

因此，它正在侦听 GalleryController 的内容并尝试返回一个空对象或结果中的“第一个”图像。

我是否应该甚至不尝试任何类似的操作，而是在加载画廊后触发转换？如果是这样，我喜欢关于在哪里“安全地”触发该转换的提示。它应该仅在达到画廊索引状态时触发，而不是在每次加载画廊时触发。

我现在不再胡说八道了。请让我澄清我的问题的任何部分，我会更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:20:17.453

假设您有一个 GalleryController 和一个 SelectedImageController，您可以使用 connectControllers 将两者连接起来。就像是：

```
App.GalleryController = Ember.ArrayController.extend({
    content: [],
    selectedImage: null
    // other stuff
});

App.ImageController = Ember.Controller.extend({
    contentBinding: 'galleryController.selectedImage',
    galleryController: null,
    // other stuff
}); 
```

然后在你的connectOutlets中：

```
connectOutlets: function(router) {
    //your other outlets, data fetching etc
    router.get('imageController').connectControllers('gallery');
} 
```

现在，由于绑定了两个控制器，您只需要将 App.GalleryController.selectedImage 属性设置为列表中的第一项。这可以在 App.GalleryController.content 更新时完成。

# iphone - pushviewcontroller 后如何释放 ViewController

> ID：12526480
> 
> 赞同：0
> 
> 时间：2012-09-21T08:00:16.860
> 
> 标签：iphone, memory-management, uiimageview

我有 2 个视图，名为 viewcontroller1，viewcontroller2。每个视图控制器都加载了大约 3 张图片（在 XIB 中加载），当我尝试使用 [self.navigationcontroller pushviewcontroller] 将 view1 推送到 view2 时，内存无法释放。（我想知道它无法释放 viewcontrler1 或无法释放 uiimageview ）我的代码有任何错误吗？

viewcontroller1 代码就像这样：

视图控制器1.h

```
@interface ViewController : UIViewController
@property(strong,nonatomic)IBOutlet UIImageView *mainImageView;
@property(strong,nonatomic)IBOutlet UIImageView *topwallImageView;
@property(strong,nonatomic)IBOutlet UIImageView *buttonImageView; 
```

视图控制器1.m

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
self.mainImageView = nil;
self.topwallImageView = nil;
self.buttonImageView = nil;
[super viewDidUnload];
// Release any retained subviews of the main view.
}

-(void)dealloc
{
[mainImageView release];
[topwallImageView   release];
[buttonImageView release];
[super dealloc];
}

-(IBAction)main2ViewController:(id)sender
{
Main2ViewController *main2ViewController =[[Main2ViewController alloc]initWithNibName:@"Main2ViewController" bundle:nil];
[self.navigationController pushViewController:main2ViewController animated:NO];
[main2ViewController release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:13:10.630

你必须更详细地学习iOS 中的**对象通信和内存管理**。

也请尝试使用ARC。**iOS 5 sdk 中引入了自动引用计数**(ARC)，通过让内存管理成为编译器的工作，使 Objective-C 程序员不必处理内存管理。

您可以使用[此链接](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)**将您的项目转换为启用 ARC**

**当 viewcontroller2 可见或在推送viewcontroller2**之后，您不能释放**viewcontroller1**及其 IBOutlet 属性。因为您从 viewcontroller1 推送了**viewcontroller2**。**viewcontroller1**是 viewcontroller2 的容器/父级。**没有 viewcontroller1，viewcontroller2 将不存在**

 ******关于 IBOutlet imageview 图片，可以设置为 nil 。例如：**yourImageview.image = nil;** 但是它不会释放 IBOoutlet Imageview 内存。

当调用 viewcontroller1 的 release 方法时，IBOutlet imageview 将被释放，因为您在 viewcontroller1 dealloc 方法中正确释放了它:)

关于您的**Main2ViewController**方法：您在代码中正确处理了内存

当您调用 pushViewController 时，它将保留默认推送的控制器。请注意，您不是所有者。当控制器弹出时它会自动释放。但是你必须释放分配的 Main2ViewController。所以你的代码很好:)******

# android - 带有 ksoap2 的 SOAP

> ID：12526481
> 
> 赞同：2
> 
> 时间：2012-09-21T08:00:18.327
> 
> 标签：android, soap, ksoap2

尝试从 android 调用 SOAP 服务时遇到问题。我谷歌，我发现我应该使用 ksoap2。所以我安装了那个库并得到了一些代码......

```
 String METHOD_NAME = "name";
      String SOAP_ACTION = "url/name";
     String NAMESPACE = "url";
      String URL = "url";
    //you can get these values from the wsdl file^

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); //set up request
        request.addProperty("user", "user");
        request.addProperty("pass", "pass");
        //variable name, value. I got the variable name, from the wsdl file!
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); //put all required data into a soap envelope
        envelope.setOutputSoapObject(request);  //prepare request

        List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();

        headerList.add(new HeaderProperty("Content-Type", "text/xml; charset=utf-8"));
        headerList.add(new HeaderProperty("SoapAction", "url/name"));                   
        HttpTransportSE httpTransport = new HttpTransportSE(URL);  
        httpTransport.debug = true; 
        try {
            httpTransport.call(SOAP_ACTION, envelope, headerList);
            SoapObject result=(SoapObject)envelope.getResponse();
        } catch (IOException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        } catch (XmlPullParserException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        } 
```

它在 XmlPullParserException e2 中引发异常，称为：

```
 org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@2:7 in java.io.InputStreamReader@406da6b8) 
```

所以现在我不知道如何让它工作。我认为 android 的管理非常糟糕，因为在 iphone 上我可以在几分钟内让它工作。

顺便说一句，如果它可能有帮助，那就是应该使用的信封：

```
 <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>" +
            "<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tns=\"url\" " +
            "xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" " +
            "xmlns:soap-enc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" >" +
            "<SOAP-ENV:Body><mns:name xmlns:mns=\"url\" SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\">" +
            "<user xsi:type=\"xsd:string\">user</user>" +
            "<pass xsi:type=\"xsd:string\">pass</pass>" +
            "</mns:name></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

任何帮助都会受到重视，因为我现在正试图让它工作很长一段时间......

也许这有助于预期结果如下：

```
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:MPListResponse><return xsi:type="xsd:string">[{"tip":"123456","stevilka":"123456789","key":"some value","zacetek":"01.05.2007","potek":"01.01.2018","axa":0},]</return></ns1:MPListResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

那是我的 httptransport 请求：

```
 Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://www.w3.org/2003/05/soap-encoding" xmlns:v="http://www.w3.org/2003/05/soap-envelope"><v:Header /><v:Body><n0:name id="o0" c:root="1" xmlns:n0="url"><user i:type="d:string">user</user><pass i:type="d:string">pass</pass></n0:MPList></v:Body></v:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T19:34:48.410

也许您的 SOAP Envelop 版本是错误的。尝试改变它。它对我有用。

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:38:44.100

[wsdl2ksoap](http://code.google.com/p/wsdl2ksoap/)可能会在这里为您提供帮助，如果您的 xml 响应不太长，则可以使用 java SAXparser。至少这是我成功采用的方法。

# c - 在循环中读取停止信号

> ID：12526483
> 
> 赞同：0
> 
> 时间：2012-09-21T08:00:24.157
> 
> 标签：c, unix

我正在使用一个不会终止的 while 循环，用于使用 C 代码复制 unix 的 Tail 命令。除了 Ctrl + C 之外，我需要一种方法来停止循环，这会退出我相信的过程。在代码中使用时有什么方法可以读取键盘命令？使用 getchar() 的问题在于它会停止循环运行，直到输入一个字符。这个问题有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:54:37.590

You need to turn off blocking and line buffering. Turn off blocking so `getc()` returns right away. It will return -1 until it has a real character. Turn off line buffering so the OS sends the char right away instead of buffering it up until it has a full line which occurs when you press return.

```
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <termios.h> /* POSIX terminal control definitions */

int main(void) {

    // Turn off blocking
    fcntl(STDIN_FILENO, F_SETFL, O_NONBLOCK);

    struct termios options, oldoptions;
    tcgetattr(STDIN_FILENO, &options);
    // Disable line buffering
    options.c_lflag &= ~( ICANON);

    // Set the new options for the port...
    tcsetattr(STDIN_FILENO, TCSANOW, &options);

    while(1) {
        char c = getc(stdin);
        if(c != -1) break;
    }

    // Make sure you restore the options otherwise you terminal will be messed up when you exit
    tcsetattr(STDIN_FILENO, TCSANOW, &oldoptions);

    return 0;
} 
```

I agree with the other posters that you should use `signals`, but this is the answer to what you asked.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:55:29.173

这听起来很像[comp.lang.c FAQ 中的这个问题](http://c-faq.com/osdep/cbreak.html)。

问：如何在不等待 RETURN 键的情况下从键盘读取单个字符？如何阻止字符在键入时在屏幕上回显？

# excel - 从 Excel 表格中动态设置单元格值

> ID：12526484
> 
> 赞同：0
> 
> 时间：2012-09-21T08:00:29.890
> 
> 标签：excel, excel-2007, excel-formula, vba

我有一个基本上看起来像这样的 excel 文档（想象它有大约 15 000 行）：

```
A    B    C    D    E    F
---------------------------
Art  Price    Art  Price
---------------------------
A    1         A    5
A    3         B    10
A    4         C    8
B    7         
B    2
C    3
C    15 
```

如您所见，B 列中的价格不一致。

我想做的是根据文章名称（在 A 和 D 列中找到）将价格（在 B 列中）设置为正确的价格（在 E 列中找到）。

不幸的是，当谈到 Excel 中的 VBA 和 Excel 中的公式时，我不知所措，什么是解决（或解决）这个问题的聪明方法？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:19:24.840

尝试`VLOOKUP`excel 帮助中的 excel 公式，无需编码。

输入`=VLOOKUP(A2;$D$2:$E$4;2)`单元格`B2`并填写。

# mongodb - 如何将一些数据从一个 MongoDB 复制到另一个

> ID：12526487
> 
> 赞同：1
> 
> 时间：2012-09-21T08:00:47.880
> 
> 标签：mongodb, mongodump, mongorestore

我有一个现有的 MongoDB 转储，我想挑选一些数据到一个干净的数据库。

转储单个集合并恢复它们（mongodump 和 mongorestore）是这样做的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:08:40.767

您可以使用 上的`--filter '<JSON>'`选项来实现这一点`mongorestore`。

这就像 的第一个参数`db.find()`。

如果您只想按集合过滤`--collection <collection>`

在[文档中查看更多信息](http://docs.mongodb.org/manual/reference/mongorestore/)

# android - 克隆一个包含所有用户数据的安卓模拟器，包括谷歌账户

> ID：12526488
> 
> 赞同：2
> 
> 时间：2012-09-21T08:00:57.560
> 
> 标签：android, android-emulator

我打算从现有的模拟器中创建一个新的模拟器，模拟器/设备 ID 需要不同，但包括安装的应用程序和注册的谷歌帐户在内的剩余数据应该保留在新的模拟器中。

谁能指出我正确的方向

尝试使用 -data 选项加载要克隆到新模拟器的模拟器的 userdata.img 文件。不工作。可能是我没有以正确的方式做吗？

./emulator -avd**新的现有模拟器名称**-data **path/to/emulator/tobe/cloned/userdata.img**

谢谢

-- JR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:33:15.217

弄清楚了。要使用的图像是 userdata-qemu.img 而不是 userdata.img。所有用户数据都被持久化。需要在旧模拟器中禁用快照选项才能使其正常工作。

./emulator -avd**新的现有模拟器名称**-data **path/to/emulator/tobe/cloned/userdata-qemu.img**

谢谢。

-- JR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:22:07.223

1.  打开 AVD 管理器。

2.  选择一个 AVD。

3.  点击`Edit...`

4.  更改*名称*

您将看到一条消息：*AVD 'avd-name' 将被复制到 'another-avd-name' 中。*

`Edit AVD`会变成`Create AVD`. 点击它。

# java - 没有使用 smtp 从 Java 应用程序获取邮件

> ID：12526491
> 
> 赞同：0
> 
> 时间：2012-09-21T08:01:12.117
> 
> 标签：java, smtp

我有一个使用 SMTP 发送邮件的 java 应用程序，但最近修改了它的属性文件并重新启动了我的 tomcat 服务器 [虽然属性更改是密码更改并且与 smtp 无关]。现在它不发送邮件:(

我检查了我的 smtp 服务器并尝试从它发送邮件。它正在发送。知道出了什么问题吗？

任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:30:35.947

您的 SMTP 服务器日志应该告诉您是否有东西发送给它，以及为什么它没有中继电子邮件。如果您的更改与密码相关，则可能是身份验证错误。

我将首先查看以下内容：您的 Java 应用程序使用哪个凭据向 SMTP 服务器发送请求？

那么，这些凭据是否仍然在服务器上被接受？

最后，大多数 SMTP 服务器将有一个单独的包含或排除源 IP 的列表，从哪里接受消息请求，看看你的 Java 应用程序的源机器是否允许在那里。

# c# - 使用 LINQ 从其他两个列表中填充单个列表而不重复

> ID：12526497
> 
> 赞同：2
> 
> 时间：2012-09-21T08:01:41.730
> 
> 标签：c#, linq, c#-4.0, linq-to-sql

我有 2 个列表：-

```
OrigFruitList.Add(new Fruit { Category = "Apple", SubCategory = "" });
        OrigFruitList.Add(new Fruit { Category = "Apple", SubCategory = "Red Apple" });
        OrigFruitList.Add(new Fruit { Category = "Apple", SubCategory = "Green Apple" });
        OrigFruitList.Add(new Fruit { Category = "Orange", SubCategory = "" });
        OrigFruitList.Add(new Fruit { Category = "Peach", SubCategory = "" });
        OrigFruitList.Add(new Fruit { Category = "Grapes", SubCategory = "Green Grapes" });
        OrigFruitList.Add(new Fruit { Category = "Grapes", SubCategory = "Black Grapes" });
        OrigFruitList.Add(new Fruit { Category = "Bananas", SubCategory = "" });

        NormalFruitList.Add(new Fruit { Category = "Apple", SubCategory = "" });
        NormalFruitList.Add(new Fruit { Category = "Apple", SubCategory = "Red Apple" });
        NormalFruitList.Add(new Fruit { Category = "Apple", SubCategory = "Green Apple" });
        NormalFruitList.Add(new Fruit { Category = "Orange", SubCategory = "Blood Orange" });
        NormalFruitList.Add(new Fruit { Category = "Orange", SubCategory = "Sweet Orange" });
        NormalFruitList.Add(new Fruit { Category = "Peach", SubCategory = "" });
        NormalFruitList.Add(new Fruit { Category = "Bananas", SubCategory = "" });
        NormalFruitList.Add(new Fruit { Category = "Bananas", SubCategory = "Yellow Bananas" });
        NormalFruitList.Add(new Fruit { Category = "Bananas", SubCategory = "Green Bananas" }); 
```

现在我希望根据第一个列表合并第二个列表，如果可能的话与 LINQ 合并。

例如，原始列表中只有 1 个橙色条目，我希望将正常列表中的 2 个条目附加到原始列表中。香蕉也是如此。

如何使用 LINQ 实现这一目标？

感谢您的帮助和时间

------------RESULT 我希望实现

```
//FinalResult
        //Apple
        //Red Apple
        //Green Apple
        //Orange
        //Blood Orange
        //Sweet Orange
        //Peach
        //Green Grapes
        //Black Grapes
        //Bananas
        //Yellow Banans
        //Green Bananas 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:12:48.223

试试这个：

```
 var difference = NormalFruitList.Where(normFruit =>
            !OrigFruitList.Exists(
                origFruit => origFruit.Category == normFruit.Category 
                    && origFruit.SubCategory == normFruit.SubCategory));

        // If new Category is found in NormalFruitList it will be added to the end
        int index = 0;
        var result = new List<Fruit>(OrigFruitList);
        foreach (var item in difference.Reverse())
        {
            index = result.IndexOf(OrigFruitList.FirstOrDefault(fruit => fruit.Category == item.Category));
            result.Insert(index == -1 ? OrigFruitList.Count : index + 1, item);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:03:52.997

```
var mrgList = OrigFruitList
    .Union(NormalFruitList)
    .GroupBy(n => new {n.Category, n.SubCategory}, (fruit, fruits) => fruits.First()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:11:45.857

如果 Fruit 是这样的结构：

```
var result = OrigFruitList.Union(NormalFruitList); 
```

如果 Fruit 是类，那么：

```
var resul=new List<Fruit>();
foreach(var fruit in NormalFruitList)
{
    var item = OrigFruitList.firstOrDefault(p=>p.Category == fruit.Category 
                             && p.SubCategory == fruit.SubCategory));
   if(item!=null)
       resul.Add(item);
}
NormalFruitList.AddRange(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:15:55.187

假设当另一个水果具有相同的`Category` **和** `SubCategory`时，一个水果是重复的，您可以使用[`Enumerable.Union`](http://msdn.microsoft.com/en-us/library/bb358407.aspx)自定义[`IEqualityComparer<Fruit>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)：

```
class Fruit
{
    public String Category { get; set; }
    public String SubCategory { get; set; }

    public class Comparer : IEqualityComparer<Fruit>
    {
        public bool Equals(Fruit x, Fruit y)
        {
            return y.Category == y.Category && x.SubCategory == y.SubCategory;
        }

        public int GetHashCode(Fruit obj)
        {
            return (obj.Category + obj.SubCategory).GetHashCode();
        }
    }
} 
```

现在您可以在以下位置使用比较器`Union`：

```
OrigFruitList = OrigFruitList
                .Union(NormalFruitList, new Fruit.Comparer())
                .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T08:17:33.047

```
var result = OrigFruitList.Union(NormalFruitList,new FruitComparer())

public class FruitComparer : IEqualityComparer<Fruit>
{       

  public bool Equals(Fruit x, Fruit y)
  {
      return y.Category == y.Category && x.SubCategory == y.SubCategory;
  }

  public int GetHashCode(Fruit f)
  {
    return (f.Category + f.SubCategory).GetHashCode();
  }

} 
```

# php - 如何在 PHP 中将 MySQL 数据库转换为 SQLite？

> ID：12526501
> 
> 赞同：5
> 
> 时间：2012-09-21T08:01:46.750
> 
> 标签：php, mysql, sqlite

我需要 PHP 代码来转换数据库。我尝试[了如何使用 PHP 将 mysql 转换为 SQLite，](https://stackoverflow.com/questions/10226067/how-to-convert-mysql-to-sqlite-using-php)但它有答案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T10:26:24.390

我终于找到了它的解决方案。将 sh 文件保存在 [https://gist.github.com/943776](https://gist.github.com/943776) 并在 php 文件中执行“ `./mysql2sqlite.sh DBNAME --databases DBNAME -u DB_USERNAME -pDB_PASSWORD | sqlite3 database.sqlite`”（不带 qoutes 和带“`”）。将两个文件保存在一个文件夹中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:03:09.873

转到 phpmyadmin 单击导出数据库下载为 sql 文件。

下载它....

转到您的 sql lite 管理软件导入 .sql 文件

完毕...

# asp.net-mvc-3 - 是否可以在 MVC3 中使用 php 文件？

> ID：12526503
> 
> 赞同：-3
> 
> 时间：2012-09-21T08:01:53.183
> 
> 标签：asp.net-mvc-3

大家好，我正在寻找验证码安全代码，但大多数都使用 php，所以可以在 MVC3 中使用 php 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:03:54.743

不可以。可以将 PHP*与*MVC 一起使用（保持它们完全独立并让它们仅通过 HTTP 进行通信），但这会给除了最微不足道的情况之外的所有情况带来巨大的实际问题。

# maven - 在哪里观察 Jenkins 部署的应用程序？

> ID：12526508
> 
> 赞同：0
> 
> 时间：2012-09-21T08:02:04.313
> 
> 标签：maven, maven-2, jenkins

来自第一次使用 Jenkins 的用户的问题。所以我希望你不会介意这个问题是否太愚蠢。

我在 Ubuntu 机器上安装了 jenkins，可以在 localhost:8080 访问。我已经成功地将它配置为与 Maven2 和 Git 一起使用。接下来，我创建了一个作业/项目（一个 Java/Spring 应用程序），并让它在 Jenkins 上也没有错误地构建。

现在我的问题是，我在哪里看到这个应用程序在运行？:)

最好的问候
詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:06:02.730

如果单击正在运行的作业并在左侧查找链接，则可以在正在运行的作业中看到控制台输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:34:43.457

构建和部署是两件不同的事情。Jenkins 也可以为你做后者，但你需要在你的 maven 项目中配置它。通常这是使用[tomcat maven 插件完成的（对于 tomcat）](http://tomcat.apache.org/maven-plugin-2.0/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:35:05.540

部署： http: [//mojo.codehaus.org/tomcat-maven-plugin/plugin-info.html](http://mojo.codehaus.org/tomcat-maven-plugin/plugin-info.html)使用 maven 或[https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)来完成和詹金斯一起做

# android - 在我的 android 应用程序中支持 540x960 分辨率

> ID：12526539
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:04:08.987
> 
> 标签：android, android-layout, android-screen, android-screen-support

我想在我的 android 应用程序中支持 540x960 的屏幕分辨率。我如何支持这个屏幕？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:10:04.740

您不会在 Android 上开发到特定的分辨率。您编写的布局会自动缩放到不同的大小和纵横比。利用类`RelativeLayout`来定义元素应该如何相对于彼此放置，并允许它们适应可用空间。您还可以使用 Fragments 来设计不同的方向和物理尺寸（例如平板电脑与手机）。

看看这个文档：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:17:56.243

放入 AndroidManifest.xml

```
<supports-screens android:anyDensity="true"></supports-screens> 
```

或者看看下面的链接。

[android 中的 Android 多屏支持：540x960 问题](https://stackoverflow.com/questions/10481073/android-multiscreen-support-in-android-540x960-issue)

或者

[如何支持安卓产品的所有不同分辨率](https://stackoverflow.com/questions/6403619/how-to-support-all-the-different-resolutions-of-android-products)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T09:14:31.210

res/layout-long-port-hdpi-960x540/layout.xml

身高第一

# java - java确保线程不中断地完成

> ID：12526540
> 
> 赞同：0
> 
> 时间：2012-09-21T08:04:26.700
> 
> 标签：java, concurrency

我有许多线程正在运行，但我想执行一个特定的线程（TimerTask 的 run() 方法）以运行到它的完成，并且我不希望任何其他线程的任何中断。

我认为 synchronized(this) { } 不会确保它的完成。

请建议我一个正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:12:43.967

一般来说，您不能阻止线程被“中断”，但这并不意味着计算将被取消；只是任何睡眠/等待操作都会引发异常。请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)。

如果您不想退出，您可以[捕获 InterruptedException 并吞下它](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:17:11.967

工作完成后，您可以捕获`InterruptedException`并设置`interrupt`状态。

[**不可取消的任务**](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)

> 有些任务只是拒绝被打断，使它们不可取消。然而，即使是不可取消的任务也应该尝试保持中断状态，以防调用堆栈上的代码在不可取消的任务完成后对中断采取行动。清单 6 显示了一个方法，该方法在阻塞队列上等待直到项目可用，而不管它是否被中断。为了做一个好公民，它完成后在 finally 块中恢复中断状态，以免剥夺调用者的中断请求。（它不能更早地恢复中断状态，因为它会导致无限循环——BlockingQueue.take() 可以在进入时立即轮询中断状态，如果发现中断状态集则抛出 InterruptedException。）

```
public Task getNextTask(BlockingQueue<Task> queue) {
boolean interrupted = false;
try {
    while (true) {
        try {
            return queue.take();
        } catch (InterruptedException e) {
            interrupted = true;
            // fall through and retry
        }
    }
} finally {
    if (interrupted)
        Thread.currentThread().interrupt();
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:41:09.963

> “实际上，我想要运行完成的一个关键线程并没有这样做，日志表明其他线程正在获取它们的时间片，并且之后关键不会继续。”

这听起来根本不像是操作系统调度问题。听起来更像是“关键线程”由于某些异常而被阻塞或退出。

> 重复运行表明关键线程在不同的执行点停止

*   听起来比块状更异常。

如果我错了，并且您的关键线程被抢占，因为准备好的线程多于核心，您应该提高关键线程的优先级，使其不会被抢占，（或者只是减少盒子上的负载：） .

唯一的另一种可能性是您的线程正在使用大量数据并且您遇到很多页面错误。在这种情况下，获得更多 RAM、SSD 或两者兼而有之！

# php - php imagejpeg()

> ID：12526541
> 
> 赞同：1
> 
> 时间：2012-09-21T08:04:27.183
> 
> 标签：php

我正在尝试在我的网站上放置一个旋转 img 功能。我正在使用 imagejpeg() 但它返回一个充满胡言乱语的 sloo。你能解释一下为什么吗？

```
 if ($_GET["rotate"] == "clockwise")
                {

                    $degrees = 90;

                    // Content type
                    //header('Content-type: image/jpeg');

                    // Load
                    $source = imagecreatefromjpeg($path);

                    // Rotate
                    $rotate = imagerotate($source, $degrees, 0);

                    // Output

                    if (imagejpeg($rotate))
                    echo "Your image has been rotated clockwise";
                } 
                if ($_GET["rotate"] == "counterclockwise")
                {
                    $degrees = 270;

                    // Content type
                    //header('Content-type: image/jpeg');

                    // Load
                    $source = imagecreatefromjpeg($path);

                    // Rotate
                    $rotate = imagerotate($source, $degrees, 0);

                    // Output
                    if (imagejpeg($rotate))
                    echo "Your image has been rotated Counterclockwise";
                }
                ?> 
```

它将其粘贴到页面上：

ÿØÿàJFIFÿþ>创建者：gd-jpeg v1.0（使用 IJG JPEG v62），默认质量 ÿÛC $。”，＃（7），01444'9 = 82 <.342ÿÛC2 !!22222222222222222222222222222222222222222222222222ÿÀûÛ “雅ÿÄμ} 1AQa” q2'¡＃乙±ARND $ 3房，％＆'（）* 456789：CDEFGHIJSTUVWXYZcdefghijstuvwxyzƒ“！...†‡ Š'“”•–∼™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãääåæçèéêñòóôõö÷øùúÿÄ ÿÄµw!1AQaq"2B'¡±Á #3RðbrÑ $4á (AND ON AND ON FOR A很长的路要走）

如果我将其更改为顺时针，乱码也会发生变化，所以我认为它在某种程度上起作用，但它并没有从中创建 jpg。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T08:08:16.607

那*是*图像。您只是没有告诉浏览器它是，您的浏览器将数据解释为文本。设置标题以告诉您的浏览器将数据解释为图像：

```
header('Content-Type: image/jpeg'); 
```

图像数据必须是页面上唯一输出的内容，之前或之后没有其他 HTML 或文本。

# java - Felix - 如何在捆绑更新时正确重新注册服务？

> ID：12526545
> 
> 赞同：0
> 
> 时间：2012-09-21T08:04:48.620
> 
> 标签：java, osgi, bundle, apache-felix

我有一些应用程序，调用了一些 jar 库，调用了 Felix 框架并从 bundles 目录添加了一些包。

![项目方案](../Images/f508ce1aa48b1f8baa8d52a8ba70e6ff.png)

“显示帮助”按钮的代码：

```
private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {                                           

        for (Bundle qqq : context.getBundles()) {
            if ("ihtika2.I_AboutForm".equals(qqq.getSymbolicName())) {
                System.out.println("I_AboutForm state: "+qqq.getState());
            }
        }

        try {
            ServiceReference[] refs = context.getServiceReferences(
                    AboutFormInterface.class.getName(), "(Funct=*)");
            if (refs == null) {
                System.out.println("Not Found AboutForm on show");
            } else {
                AboutFormInterface AboutForm = (AboutFormInterface) context.getService(refs[0]);
                AboutForm.showWindow(context);
            }
        } catch (Exception ex) {
            Ini.logger.fatal("Error on showing AboutForm", ex);
        }

    }  

In first click (before update) service founded correctly.

The code of the "Update" button:

  try {
            ServiceReference[] refs = context.getServiceReferences(
                    UpdaterInt.class.getName(), "(Funct=*)");
            if (refs == null) {
                System.out.println("Not Found UpdaterInt on demand");
            } else {
                UpdaterInt UpdaterLocal = (UpdaterInt) context.getService(refs[0]);
                UpdaterLocal.update();
            }
        } catch (Exception ex) {
            Ini.logger.fatal("Error on showing AboutForm", ex);
        } 
```

更新程序包的代码：

```
public void update() {

        System.out.println("Stage 1");

        int x = 0;

        Map<String, Bundle> bundlesList = new HashMap<String, Bundle>();

        for (Bundle singleBundle : context.getBundles()) {
            bundlesList.put(singleBundle.getLocation(), singleBundle);
            System.out.println(singleBundle.getLocation());
        }

        System.out.println("+++++++++++++++++++++++++++++");

        Map<String, Bundle> treeMap = new TreeMap<String, Bundle>(bundlesList);
        for (String str : treeMap.keySet()) {
            Bundle singleBundle = treeMap.get(str);
            System.out.println(str + " " + singleBundle.getSymbolicName());
            if (!"khartn.Updater".equals(singleBundle.getSymbolicName())
                    && !"org.apache.felix.framework".equals(singleBundle.getSymbolicName())) {
                try {
                    System.out.println("state0 " + singleBundle.getState());
                    singleBundle.stop();
                    System.out.println("state1 " + singleBundle.getState());
                    singleBundle.update();
                    System.out.println("state1.1 " + singleBundle.getState());
                    singleBundle.start();

                    synchronized (this) {
                        try {
                            this.wait(250);
                        } catch (InterruptedException ex) {
                            ex.printStackTrace();
                        }
                    }
                    System.out.println("state2 " + singleBundle.getState());
                } catch (BundleException ex) {
                    ex.printStackTrace();
                }
                System.out.println("***");
            }
        }

    } 
```

在更新主 JFrame 时正确更新 - 它隐藏和显示。但是在第二次点击“显示帮助”时，Felix 找不到“显示帮助”的服务。“显示帮助”服务注册码：

```
package ihtika2.i_aboutform;

import ihtika2.i_aboutform.service.AboutForm;
import ihtika2.i_aboutform.service.AboutFormInterface;
import java.util.Hashtable;
import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;
import org.osgi.framework.ServiceRegistration;

public class Activator implements BundleActivator {

    @Override
    public void start(BundleContext context) throws Exception {
        Hashtable<String, String> props = new Hashtable<String, String>();
        props.put("Funct", "AboutForm");
        System.out.println("Registering I_AboutForm");
         context.registerService(AboutFormInterface.class.getName(), new AboutForm(), props);

    }

    @Override
    public void stop(BundleContext context) throws Exception {
    }
} 
```

更新时显示字符串“Registering I_AboutForm”。

为什么Felix找不到重新注册的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:59:34.973

解决方案是将更新程序的捆绑代码调用添加到

```
context.getBundle(0).adapt(FrameworkWiring.class).refreshBundles(bundles, null); 
```

如[OSGi API 文档](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#update%28java.io.InputStream%29)中所述：

> 如果此包导出了由另一个包导入的任何包，则这些包必须保持导出状态，直到 `FrameworkWiring.refreshBundles`调用该方法或重新启动框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T02:24:26.660

未找到服务的原因是接口`AboutFormInterface`仍然连接到更新捆绑包的先前版本。

解决方案之一是在第三个 Bundle 中定义接口，以便在更新期间保持稳定。

# .net - PSD和现场网站的字体大小不同

> ID：12526549
> 
> 赞同：0
> 
> 时间：2012-09-21T08:04:58.337
> 
> 标签：.net, psd

我做了一个 .aspx 网站。我提供了相同的字体大小和相同的字体系列，但它与 psd 图像不匹配。是否有任何问题或导致问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:06:44.360

该网站和您的 Photoshop 模型使用不同的分辨率。我认为浏览器通常使用 96 dpi，而 Photoshop 可能默认使用 72 dpi。

另一点是 Photoshop 和浏览器可能在文本的确切渲染上存在分歧。Photoshop 用于为各种目的制作光栅图像，而浏览器只需要关注屏幕显示。这意味着抗锯齿和像素网格拟合可能不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:06:56.810

也许您的浏览器不支持您使用的字体？

# excel - excel数组公式：不必'ctrl-shift-enter'？

> ID：12526573
> 
> 赞同：1
> 
> 时间：2012-09-21T08:06:53.620
> 
> 标签：excel, excel-2010

按 f2 编辑数组公式后，例如 {=MATCH(TRUE,(B2:B100)>0,0)}，大括号当然会消失。编辑后，您必须按 ctrl + shift + enter 才能使大括号重新出现。

即使您按正常的“输入”，是否有一些设置可以保留 {}？

同样在复制上面的单元格（即包含数组公式）之后，您不能将其粘贴到 10 x 其他单元格上。您一次只能将其粘贴到一个新单元格上。有没有办法一次粘贴到多个单元格上？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:11:03.213

只要您复制单元格而不是复制公式栏中的公式，数组公式应该可以很好地复制和粘贴并保留它的数组。如果您向下或向下拖动/填充单元格，它也可以很好地复制。可能是如果您想在拖动时保持范围 B2:B100 然后使用 $B$2:$B$100 来阻止它增加。

F4 是一个不错的捷径，可以在这里提供帮助。将光标放在 B2:B100 上，然后按 F4。

如果您想强制某些单元格始终保留公式数组，我可以想到一个肮脏的解决方法，但我认为它可能有更多的负面因素而不是正面因素。

负面：

-它涉及VBA

- 它将清除撤消堆栈/剪贴板

- 这可能更令人困惑

解决方法

标记公式必须是数组公式，其术语对结果没有影响。例如`(0*0)+`。然后可以通过代码检查并使其始终为数组公式。

所以你上面的公式变成了`{=(0*0)+MATCH(TRUE,(B2:B100}>0,0)}`

然后在 THISWORKBOOK ![在此处输入图像描述](../Images/8f90edf3308de13bbea275b05ecb4670.png)

输入此代码

```
Option Explicit

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
Dim cell As Range

For Each cell In Target
    If Target.Cells.Count = 1 Then
        If InStr(1, Target.Formula, "(0*0)+", vbTextCompare) And _
            Target.HasArray = False Then
            Target.FormulaArray = Target.Formula
        End If
    End If
Next cell

End Sub 
```

每当更改单元格时，代码将检查术语 (0*0)+ 并将其分配为数组公式，如果它还不是一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:16:54.923

有几种方法可以将数组公式转换为“常规”公式 - 这可能会对您有所帮助。例如，在这种情况下，添加了 INDEX 函数意味着可以以正常方式输入公式

`=MATCH(TRUE,INDEX(B2:B100>0,0),0)`

# zend-framework2 - zf2 无法渲染部分导航

> ID：12526575
> 
> 赞同：0
> 
> 时间：2012-09-21T08:06:55.827
> 
> 标签：zend-framework2, partials, zend-view, zend-navigation

我正在尝试做` $partial = array( **DIR** .'/menu.phtml', 'default');

```
 echo $this->navigation()->menu()->setPartial($partial);` 
```

我得到错误`Fatal error: Zend\View\Exception\RuntimeException: Zend\View\Renderer\PhpRenderer::render: Unable to render template "/home/cawa/www/zf2/module/Nav/view/layout/menu.phtml"; resolver could not resolve to a file in /home/cawa/www/zf2/vendor/zendframework/zendframework/library/Zend/View/Helper/Navigation/AbstractHelper.php on line 471`

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:54:09.677

还要注意菜单的命名——如果“导航”关键字不存在，那么部分中的容器对我来说是空的。

```
<?= $this->navigation()->menu('navigation')->setPartial(array('partials/menu.phtml', 'default'))->render() ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T12:40:34.203

[http://www.zfforum.de/einsteigerfragen/4749-zend_navigation-aktiver-eintrag-im-partial.html](http://www.zfforum.de/einsteigerfragen/4749-zend_navigation-aktiver-eintrag-im-partial.html)

# iphone - UIScrollView ContentSize 使我的代码崩溃

> ID：12526580
> 
> 赞同：0
> 
> 时间：2012-09-21T08:07:01.397
> 
> 标签：iphone, xcode

我的应用程序中有这行代码：

```
NSLog(@"%f , %f",safeZoneTutorialView.frame.size.height,safeZoneListView.frame.size.height);
[safeZonesScrollView setContentSize:CGSizeMake(320, safeZoneTutorialView.frame.size.height + 30 + safeZoneListView.frame.size.height)]; 
```

输出日志为：

```
2012-09-21 09:44:52.148 Locator[22143:11603] 100.000000 , 231.250000
2012-09-21 09:44:54.176 Locator[22143:11603] -[userProfileSafeZones setContentSize:]:               unrecognized selector sent to instance 0x7bc1290
2012-09-21 09:44:54.176 Locator[22143:11603] *** Terminating app due to uncaught exception    'NSInvalidArgumentException', reason: '-[userProfileSafeZones setContentSize:]: unrecognized     selector sent to instance 0x7bc1290'
*** First throw call stack:
(0x15d2022 0x1056cd6 0x15d3cbd 0x1538ed0 0x1538cb2 0x1bdf7 0x1a8f6 0x15d3e99 0x1bc14e   0x1bc0e6 0x262ade 0x262fa7 0x262266 0x47da1a 0x15a699e 0x153d640 0x15094c6 0x1508d84 0x1508c9b 0x14bb7d8 0x14bb88a 0x1b9626 0x2252 0x21c5)
terminate called throwing an exception 
```

我是否输入了错误的命令？

这是此 ScrollView 数据的其余部分：

```
NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"userProfileSafeZones" owner:self options:nil];
safeZonesScrollView = [nibObjects objectAtIndex:0];
safeZonesScrollView.frame = CGRectMake(0,145,320,335);
safeZonesScrollView.alpha = 0; 
```

而且我不确定我是否应该“分配初始化”这个滚动视图（如果我这样做它会崩溃，如果我不这样做它会崩溃）。

谢谢。

# html - iFrame 覆盖 Silverlight 5

> ID：12526583
> 
> 赞同：0
> 
> 时间：2012-09-21T08:07:13.790
> 
> 标签：html, silverlight

我的 Silverlight 应用程序有问题。我的 XAML 视图中显示了一个 iFrame。当我现在打开一个子窗口控件（示例消息框）时，iFrame 仍然覆盖消息框。我需要将子窗口放在 iFrame 上。谁能帮我？

最好的问候，帕特里克

![覆盖](../Images/95628bfd45f66ec2a6b88b0b85b4d369.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:41:53.717

您的问题不是很清楚，但我假设您拥有的是一个 Silverlight 应用程序，顶部有一个 iFrame（在托管 HTML 文件中定义），其中包含一些其他内容。如果这是您的情况，那么您就不走运了。您所要求的基本上是让 Silverlight 应用程序占据其自身的一小部分（子窗口），将该部分移到其自身范围之外，然后将该小部分呈现在浏览器中的其他内容之上。

# linq - 在 LINQ 中写这个有困难

> ID：12526591
> 
> 赞同：0
> 
> 时间：2012-09-21T08:07:58.223
> 
> 标签：linq

该应用程序是一个基本的股票分析应用程序。

数据集如下所示：

`ABC, True, 21/09/2012, 101.34

ABC，错误，2012 年 9 月 21 日，202.45

CDE，真实，2012 年 9 月 21 日，345.67

美国广播公司，真实，2012 年 9 月 22 日。456.78

` SQL 在这里：

```
SELECT TickerCode, Australian from Stk_ClosingPrices group by TickerCode,
 Australian having count(*) >= @daysToAverageOver order by TickerCode 
```

结果，我想要的是按前两个字段进行分组，并计算每组中有多少。对于上述情况，这将是：

ABC，真，2 ABC，假，1 CDE，真，1

然后我想只返回传入的 Count > 参数。

该算法将计算 20 天移动平均线，因此在英语中查询是“给我具有 20 多条数据记录的股票的键”

这就是我已经走了多远，但我无法让伯爵正确，每个小组总是一样的。

```
 var query = (from cp in this.ObjectContext.stk_ClosingPrices group cp by new {
       cp.TickerCode, cp.Australian
   }
   into grp
    select new {
       grp.Key.TickerCode, grp.Key.Australian,
       Count = grp.Distinct()
   }).ToList(); 
```

我见过一个与**grp.Sum(Quantity)**类似的示例，但似乎无法将其重新转换为 .Count() 谓词。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:38:13.457

尝试

```
var query1 = (from cp in this.ObjectContext.stk_ClosingPrices group cp by new {
   cp.TickerCode, cp.Australian
}
into grp
select new {
   grp.Key.TickerCode, grp.Key.Australian,
   Count = grp.Count()
});

var results = (from r in query where r.Count > 20 orderby r.TickerCode select r).ToList(); 
```

实际上会产生类似的 SQL

```
SELECT TickerCode, Australian, Count
FROM (
    SELECT COUNT(*) AS Count, TickerCode, Australian
    FROM  Stk_ClosingPrices
    GROUP BY TickerCode, Australian
    ) AS t1
WHERE t1.Count > 20
Order By t1.TickerCode 
```

# c++ - 指针向量中的内存泄漏，如何防止？

> ID：12526597
> 
> 赞同：1
> 
> 时间：2012-09-21T08:08:38.267
> 
> 标签：c++, memory, pointers, vector, memory-leaks

我的程序中出现了一点内存泄漏，这是我认为唯一可能发生的事情。

```
if (inputType == 'S')
{
    SavingAccount* savingAccount = new SavingAccount();
    inFile >> *savingAccount;

    accounts.push_back(savingAccount);
} 
```

虽然在程序结束时删除了指针向量，但我有 3 个错误泄漏，这似乎与我拥有的 3 种帐户类型相对应。话虽如此，如果我在将指针放入向量后删除指针，它也会删除向量中的条目（这是我所期望的）

有谁知道如何解决这个问题？

编辑：

```
void Transaction::cleanUp()
{
    for (int i = 0; i < accounts.size(); i++)
    {
        delete accounts[i];
    }

    accounts.clear();
} 
```

添加了清理代码。

编辑：已解决

我的问题与向量的关系不如类的析构函数那么大。由于我没有定义虚拟析构函数，因此只删除了基类，留下了派生类的片段。添加后没有内存泄漏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T08:13:25.743

为什么你的向量中需要指针？我没有看到太多你的代码，但如果你的`SavingAccount`类是可复制构造的，下面的 AFAIK 也可以工作：

```
if (inputType == 'S')
    {
        SavingAccount savingAccount;
        inFile >> savingAccount;

        accounts.push_back(savingAccount); //puts a copy in the vector, so your class needs a copy ctor + Rule of Three applied.
    } 
```

**编辑**

看到 OP 说他有一个多态类结构，那么 OP 应该使用 a`std::unique_ptr`并将其存储在`std::vector`或考虑使用`boost::ptr_vector`为存储指针而设计的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:12:17.343

在向量上使用`std::vector`of`std::unique_ptr<SavingAccount>`或循环，在向量超出范围或被删除之前删除所有元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:11:19.210

您可以在销毁向量之前删除或将智能指针存储在向量中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T08:11:51.827

在销毁向量之前删除`SavingAccount*`存储在向量中的 。

如果可以的话，或者使用智能指针。

# php - 鉴于以下情况，如何使用 jquery ajax 定向到另一个页面？

> ID：12526598
> 
> 赞同：1
> 
> 时间：2012-09-21T08:08:41.720
> 
> 标签：php, jquery

我有一个通过电子邮件和密码验证用户的 php 脚本，如果它无效，我的脚本会回显“无法登录”之类的内容，如果成功，它将指向另一个页面，我该怎么做？

这是我的php代码：

```
if(isset($_POST['email'])&&isset($_POST['password'])){
    $email = $_POST['email'];
    $password = $_POST['password'];

    $result = userAuthentication($email,$password);

    if($result == false){
        echo 'Unable to login';
    }
    else if($result == true){
        header("location: success.php");
    }
} 
```

这是我的js代码：

```
$(function() {
    $("button").button();
    $("#clickme").click(function(){
        $.post("check.php", {
            "email": $("#txtEmail").val(),
            "password": $("#txtPassword").val()
        },
        function(msg){
            $(".message").html(msg);
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:10:58.353

你不能像那样从 PHP 重定向。您可以返回成功消息并从 javascript 重定向：

php:

```
if(isset($_POST['email'])&&isset($_POST['password'])){
    $email = $_POST['email'];
    $password = $_POST['password'];

    $result = userAuthentication($email,$password);

    if($result == false){
        echo 'Unable to login';
    }
    else if($result == true){
        echo 'success';
    }
} 
```

javascript:

```
$(function() {
    $("button").button();
    $("#clickme").click(function(){
        $.post("check.php", {
            "email": $("#txtEmail").val(),
            "password": $("#txtPassword").val()
        },
        function(msg){
            $(".message").html(msg);
            if(msg == 'success'){
                window.location = 'success.php';
            }
        });
        return false;
    });
}); 
```

# java - 将 Maven Akka 项目导入 Eclipse

> ID：12526599
> 
> 赞同：0
> 
> 时间：2012-09-21T08:08:48.097
> 
> 标签：java, maven, akka

我正在尝试有关计算 pi 的 maven java Akka 教程。

请我都是新手：maven和Akka，但想知道是否可能

创建一个 Maven akka 项目，然后将项目导入

Eclipse IDE 并能够在 Eclipse IDE 中运行项目。

如果可能的话，我会很高兴获得一些指导或教程

欢迎您提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:16:29.703

[在这里](http://doc.akka.io/docs/akka/current/intro/getting-started-first-java.html)你有一些关于如何启动 Akka 的信息，但首先你必须了解一些关于[maven](http://maven.apache.org/guides/getting-started/index.html)的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T12:48:07.320

由于 tostao 帖子中的确切链接不再起作用，因此这里是最新版本 akka 的链接： [Akka Getting Started](http://doc.akka.io/docs/akka/current/intro/getting-started.html)。考虑将url 中的*current*替换为编写时的实际版本 2.9.10。

如果你使用 eclipse，你可能想看看 scala-ide。

Typesafe 是 Akka 背后的公司，也是 scala 世界的重要组成部分，也提供了他们自己的构建工具，即 sbt。特别是他们的类型安全激活器模板是建立在 sbt 之上的，这可能表明他们偏爱 sbt 而不是 maven。

# knockout.js - 与删除功能有关的淘汰赛错误混淆

> ID：12526604
> 
> 赞同：0
> 
> 时间：2012-09-21T08:09:31.123
> 
> 标签：knockout.js

我有一个带有可观察数组的淘汰模型，试图调用删除函数但说“删除”是未定义的。这是一个有效的方法：

```
this.reportGroups.remove(function (item) { return item.fieldId == data.fieldId }); 
```

这是给出错误的那个：

```
this.reportFields.remove(function (item) { return item.FieldId == data.FieldId }); 
```

它们都是 observableArrays，它确实包含项目，我检查了传递的值是否有效并且包含 FieldId 等，所以我不确定如何进一步调试？

编辑：

进入数组的模型：

```
function FieldItem(FieldId, TableId, GroupId, PositionInGroup, FieldName, FieldType, FriendlyName, Description, QueryNumber) {
        return {
            FieldId: FieldId,
            TableId: TableId,
            GroupId: GroupId,
            PositionInGroup: PositionInGroup,
            FieldName: FieldName,
            FieldType: FieldType,
            FriendlyName: FriendlyName,
            Description: Description,
            QueryNumber: QueryNumber
        };
    } 
```

它们是通过推送到 reportFields observableArray 来添加的，并删除调用的函数，如下所示：

```
<!-- ko foreach: reportFields -->
<tr>
   <td><span data-bind="text: FriendlyName"></span></td>
   <td><img src="SystemImages/cross.png" data-bind="click: $parent.removeField" /></td>
</tr>
<!-- /ko --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:19:38.870

我怀疑在您的代码中的某些地方，reportFields 的类型已更改为 observableArray 以外的其他内容。尝试更改这样的代码

```
this.reportFields().remove( ..... ) 
```

如果可行，则可以肯定 reportFields 不是 observableArray

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:59:28.520

通过将 remove 函数移出模型本身来解决此问题，即在淘汰模型的函数中没有 this.reportFields.remove(etc) 我调用了一个外部函数并将其更改为 model.reportFields.remove(etc)

我认为是因为对象是使用模型推送的。在外部，我必须为它的其他相关功能做同样的事情。

# python - 芹菜 apply_async 的回调

> ID：12526606
> 
> 赞同：13
> 
> 时间：2012-09-21T08:09:48.240
> 
> 标签：python, celery

我`celery`在我的应用程序中使用来运行定期任务。让我们看下面的简单示例

```
from myqueue import Queue
@perodic_task(run_every=timedelta(minutes=1))
def process_queue():
    queue = Queue()
    uid, questions = queue.pop()
    if uid is None:
        return

    job = group(do_stuff(q) for q in questions)
    job.apply_async()

def do_stuff(question):
    try:
        ...
    except:
        ...
        raise 
```

正如您在上面的示例中看到的那样，我`celery`曾经运行异步任务，但是（因为它是一个队列）我需要`queue.fail(uid)`在出现异常`do_stuff`或`queue.ack(uid)`其他情况时执行此操作。在这种情况下，在这两种情况下从我的任务中获得一些回调将是非常清晰和有用的 -`on_failure`和`on_success`.

我看过一些[文档](http://docs.celeryproject.org/en/latest/reference/celery.app.task.html?highlight=success#celery.app.task.Task.on_success)，但从未见过将回调与`apply_async`. 有可能这样做吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-21T13:27:27.073

继承 Task 类并重载 on_success 和 on_failure 函数：

```
class CallbackTask(Task):
    def on_success(self, retval, task_id, args, kwargs):
        pass

    def on_failure(self, exc, task_id, args, kwargs, einfo):
        pass

@celery.task(base=CallbackTask)  # this does the trick
def add(x, y):
    return x + y 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T16:41:17.213

您可以在调用 apply_async 时通过 link 和 link_err kwargs 指定成功和错误回调。芹菜文档包括一个明确的例子：[http ://docs.celeryproject.org/en/latest/userguide/calling.html#linking-callbacks-errbacks](http://docs.celeryproject.org/en/latest/userguide/calling.html#linking-callbacks-errbacks)

# .net - 使用 WatiN 向 TextField 添加报价

> ID：12526609
> 
> 赞同：1
> 
> 时间：2012-09-21T08:10:14.073
> 
> 标签：.net, watin

我有一个 WatiN 正在测试的网页。其中一项测试使用以下方法将三个字符写入文本字段

```
textfield.SetAttributeValue("value", "\"BI"); 
```

这很好用。这三个字符触发一些搜索建议出现在文本字段下方（实现为列表 <ul><li> 中的 <a> 链接）。

测试选择忽略搜索建议并继续输入，例如

```
textfield.AppendText("G BEN\""); 
```

使整个文本输入“BIG BEN”（包括引号）。

问题是，当最后一个 " 被附加时，会发生奇怪的事情。首先，字段中的前一个字符 N 被删除。然后焦点移动到搜索建议之一并单击它（所有可能执行此操作的代码都是绝对禁用），然后最后将最后的引号添加到字段中。如果我将最后一个字符更改为 # 则一切正常。& 也与引号相同的行为不端。

我正在使用 IE8 和最新的 WatiN。我需要输入引号，因为它会改变搜索行为。

任何想法可能会发生什么以及解决方法的建议？

# android - 关闭android中的假粗体和斜体位

> ID：12526611
> 
> 赞同：1
> 
> 时间：2012-09-21T08:10:30.933
> 
> 标签：android, fonts

我已经完成了一个通过视图运行并更改字体的功能。问题是，为了避免虚假的粗体和斜体位，我以这种方式设置粗体字体（斜体也是一样的）：`e.setTypeface(Constants.fontBold, Typeface.NORMAL);`在测试之后`e.getTypeface().getStyle()`

所以如果我这样做两次（出于一个模糊的原因），字体将是正常的而不是粗体。在我的应用程序中出现这种可能性我很糟糕。因此，如果有人知道如何禁用假粗体和斜体，我将不胜感激！

```
public static boolean recursiveFontSetting(View v) {

        if (v instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) v).getChildCount(); i++)
                recursiveFontSetting(((ViewGroup) v).getChildAt(i));
            return true;
        } else if (v instanceof TextView) {
            TextView e = (TextView) v;
            if (e.getTypeface() != null
                    && e.getTypeface().getStyle() == Typeface.BOLD) {
                e.setTypeface(Constants.fontBold, Typeface.NORMAL);
            } else {
                e.setTypeface(Constants.font);
            }
            return true;
        } else if (v instanceof Button) {
            Button e = (Button) v;
            if (e.getTypeface() != null
                    && e.getTypeface().getStyle() == Typeface.BOLD)
                e.setTypeface(Constants.fontBold, Typeface.NORMAL);
            else
                e.setTypeface(Constants.font);
            return true;
        }
        return false;
    } 
```

谢谢 ！

# invoke - 从 methodInfo.invoke 获取返回值

> ID：12526614
> 
> 赞同：23
> 
> 时间：2012-09-21T08:10:43.463
> 
> 标签：invoke, methodinfo

如何`(int)`从 a获取返回值`methodInfo.invoke`？

让我感到困难的是我使用字符串变量来调用该方法。

检查以下示例：

```
if (Convert.ToBoolean(getParameterFromXML("issue", k, 1)) == true)
{
    m = k + 1;

    MethodInfo methodInfo = typeof(frmDetails).GetMethod("Issue" + m);
    methodInfo.Invoke(this, Parameters);

} 
```

我能做些什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-21T08:13:59.067

当我读到[这篇](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)文章时，你会从 Invoke 调用中得到方法的结果。它作为对象返回，因此您需要将其转换为特定类型。

```
var returnValue = (int) methodInfo.Invoke(this, Parameters); 
```

# c# - DevExpress XtraGrid - 如何禁用单元格合并

> ID：12526617
> 
> 赞同：0
> 
> 时间：2012-09-21T08:10:49.783
> 
> 标签：c#, winforms, devexpress, xtragrid

我正在使用 DevExpress XtraGrid 并遇到问题。当同一列下的单元格具有相同的值时，它们合并为一个。但我不需要它。这是表格的打印屏幕： ![桌子的打印屏幕](../Images/47ce030d21397a37dcf288fcfa0d796d.png)

有两排。最后两列已合并。我怎样才能分开这些行？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:38:59.473

GridView 中默认禁用单元格合并功能。[您可以使用GridView.OptionsView.AllowCellMerge](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridOptionsView_AllowCellMergetopic)直接禁用它。启用 View 的单元格合并机制后，如果需要，您仍然可以阻止合并各个列的单元格。为此，将所需列的[OptionsColumn.AllowMerge选项设置为 false。](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsOptionsColumn_AllowMergetopic)

相关链接：[单元格合并概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument1461)

# iphone - 用于 web 服务 ios 的 GPS 导航

> ID：12526618
> 
> 赞同：0
> 
> 时间：2012-09-21T08:10:52.083
> 
> 标签：iphone, ios

> **可能重复：**
> [用于网络服务 android 的 GPS 导航](https://stackoverflow.com/questions/12526338/gps-navigation-for-webservice-android)

如何在应用导航中显示以查找方向和搜索任何地方？当我们在 safari 中打开谷歌地图时会发生这种情况。但我希望在应用程序中也一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:26:03.030

看看这个教程..它可能对你有帮助！！

[http://www.vellios.com/2010/08/16/core-location-gps-tutorial/](http://www.vellios.com/2010/08/16/core-location-gps-tutorial/)

# scala - 如何 println(something) 但不向控制台打印任何内容

> ID：12526622
> 
> 赞同：1
> 
> 时间：2012-09-21T08:11:04.327
> 
> 标签：scala, comments, lexer, println

我有 println(something) 的要求，但没有 println 任何东西，也没有打印新行，我怎么能在 Scala 中做到这一点？println 上面的“东西”应该是什么才能满足我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:31:07.883

I'm just relating *Florian Hars* reply from the google [scala-user mailing list](https://groups.google.com/forum/#!topic/scala-user/lfCsQh49O0k), which seems to better frame the point.

Let me restate your problem: you have an assignment where you need to ignore comments while parsing some code source file.

Actually you have a main definition to test the assignment which prints out the result of parsing the source file, and you want the `println` statement to ignore the parsed comments, so the teacher's condition will be met.

If this is the case, then the "correct" solution would not be to find a way to prevent `println` to print, but to modify the parser/lexer to avoid producing a parsed token when it encounters a comment.

The other way would just be a "trick" to get the assignment right by exploiting a particular "code configuration"...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:07:36.823

```
scala> Console.setOut(new java.io.PrintStream(new java.io.OutputStream() { def write(b: Int) {} }))

scala> println("test")

scala> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:20:18.723

`println(...)`无论您传递什么参数，都将始终打印一个换行符。没有办法阻止它打印换行符。

嗯...当然有下面的技巧，但它不是很实用。

```
class Magic {
  override def toString = throw new RuntimeException
}

// Will not print a newline, but will throw an exception
println(new Magic)

// So you'll need to catch it
try {
  println(new Magic)
} catch {
  case e: RuntimeException => // Ignore the exception
}

// Hey, we're here and no newline was printed! 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-21T08:15:56.637

如果你还在运行 scala 解释器，你可以通过输入 :quit 命令退出它。将其放入名为 hello.scala 的文件中：

```
println("Hello, world, from a script!") 
```

然后运行：

> 斯卡拉你好.scala

你应该得到另一个问候：

**你好，世界，来自脚本！**

# excel - 通过匹配列名将数据从一个工作表复制到另一个工作表

> ID：12526624
> 
> 赞同：0
> 
> 时间：2012-09-21T08:11:08.050
> 
> 标签：excel, excel-2010

我的工作簿中有两张纸。两者都有相同的列，但顺序不同。我需要将所有行从一张纸复制到另一张纸。

有什么方法可以在匹配的列名下精确复制数据？两张纸的列最高为 CZ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:05:44.577

您需要执行 VB Editor Menu/Tools/References 并选中 Microsoft Scripting Runtime 旁边的框。这使您可以访问 Scripting.Dictionary，它是一个键控散列对象（键/值对）

```
Sub CopyByCol()

Dim lCol As Long, lCols As Long, sCol As String, lRows As Long
Dim dictCol As New Scripting.Dictionary
Dim rFrom As Range, rTo As Range

    Set rFrom = Sheet1.Range("A1")
    Set rTo = Sheet2.Range("A1")

' Store hash of where column names occur in target sheet, keyed by Col name
    lCols = rFrom.Offset(0, 255).End(xlToLeft).Column - rFrom.Column
    For lCol = 0 To lCols
        sCol = rTo.Offset(0, lCol).Value
        dictCol.Add sCol, lCol
    Next

' Get key column name from From sheet, and write to correct col in To sheet
    For lCol = 0 To lCols
        sCol = rFrom.Offset(0, lCol).Value
        lRows = rFrom.Offset(65000, lCol).End(xlUp).Row - rFrom.Row
        Range(rFrom.Offset(1, lCol), rFrom.Offset(lRows, lCol)).Copy Destination:=rTo.Offset(1, dictCol(sCol))
    Next

End Sub 
```

# html - 如何让这个下拉列表位于其他元素之上

> ID：12526631
> 
> 赞同：0
> 
> 时间：2012-09-21T08:11:43.690
> 
> 标签：html, css

我有一个下拉菜单，如下所示：

```
<ul id="secondary-nav" class="menu">
    <li><a href="#">boeketten</a>
        <ul>
            <li>7 rododendrons</li>
            <li>7 rozen</li>
        </ul>
    </li>
    <span>∼&lt;/span>
    <li><a href="#">bloemstukken</a></li>
    <span>∼&lt;/span>
    <li><a href="#">planten</a></li>
    <span>∼&lt;/span>
    <li><a href="#">bruidsruikers</a></li>
    <span>∼&lt;/span>
    <li><a href="#">kerkdecoratie</a></li>
    <span>∼&lt;/span>
    <li><a href="#">evenementen</a></li>
    <span>∼&lt;/span>
    <li><a href="#">rouwwerk</a></li>
    <span>∼&lt;/span>
    <li><a href="#">rocabo potten</a></li>
</ul> 
```

这是我用来设置样式的 css：

```
ul#secondary-nav {
    z-index: 9999;
}

ul#secondary-nav li, ul#secondary-nav > span {
    display:block;
    position:relative;
    float: left;
}

ul#secondary-nav li ul {
    display: none;
    text-align:left;
    padding-left: 0px;
    background-color: red;
}

ul#secondary-nav li ul li {
    float: none;
    display: block;
}

ul#secondary-nav li:hover ul {
    display: block;
    position: absolute;
} 
```

但它属于其余内容，如下所示：

```
![enter image description here][1] 
```

我怎样才能让它在它之上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:13:49.497

`z-index`您为您的 main定义了 a ，`ul`但它似乎处于静态位置（因此`z-index`没有效果）：尝试使用

```
ul#secondary-nav {
    z-index: 9999;
    position: relative;
} 
```

# excel - 如何控制在 Excel 中双击数据透视表条目时发生的情况

> ID：12526638
> 
> 赞同：3
> 
> 时间：2012-09-21T08:11:59.023
> 
> 标签：excel, vba

是否可以拦截对数据透视表的双击，阻止其显示基础数据，以便您可以提供希望查看者看到的结构化屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T00:35:34.140

根据 Siddharth Rout 的回答，这完全是~~从偷来~~的，但会更灵活，因为它会查看工作表上的所有数据透视表，如果你双击其中任何一个，它就会取消：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
    Dim rng As Range
    Dim wks As Worksheet
    Dim pt As PivotTable

    Set wks = Target.Worksheet
    For Each pt In wks.PivotTables()
        Set rng = Range(pt.TableRange1.Address)
        If Not Intersect(Target, rng) Is Nothing Then
            Cancel = True
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:48:59.467

尝试这个。

**逻辑**：

1.  确定您的支点范围
2.  在`Worksheet_BeforeDoubleClick`事件中检查用户是否点击了 Pivot
3.  取消双击

**代码**：此代码进入具有枢轴的工作表代码区域（见截图）

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
    Dim rng As Range

    '~~> This is your pivot table range. Change as applicable
    Set rng = Range("A1:D10")

    '~~> Check if the double click happend in the Pivot
    If Not Intersect(Target, rng) Is Nothing Then
        '~~> Cancel Double click
        Cancel = True
    End If
End Sub 
```

**屏幕截图**：

![在此处输入图像描述](../Images/c61a102bad6ec7628380ea3bbbbdd6e3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-09T11:44:07.373

您可以尝试执行类似于以下代码的操作。这将创建一个范围、工作表和数据透视表：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
    Dim rng As Range
    Dim wks As Worksheet
    Dim pt As PivotTable

    Set wks = Target.Worksheet
    For Each pt In wks.PivotTables()
        Set rng = Range(pt.TableRange1.Address)
        If Not Intersect(Target, rng) Is Nothing Then

            Cancel = True
        End If
    Next
End Sub 
```

# jersey - 如何在 Jersey Junit 中拦截 http 302 响应，然后再转发到 302 位置 URL

> ID：12526646
> 
> 赞同：1
> 
> 时间：2012-09-21T08:12:48.133
> 
> 标签：jersey, junit4

我正在努力寻找一种在 Jersey 中使用 Junit 框架断言 HTTP 响应代码 302 的方法。

```
@Test
public void testResponseCodeWithNoIMEI() throws Exception {
    WebResource webResource = resource();
     ClientResponse clientResponse = webResource.path("/catalog").
                                        queryParam(RequestParams.PRODUCTCODE,"1234").
                                        queryParam(RequestParams.ID,"1234").                            
                                        header(HttpHeaders.USER_AGENT,"Mozilla").
                                        header(HttpHeaders.IF_MODIFIED_SINCE,"Aug 2011").get(ClientResponse.class);
     LOG.debug("Server response :"+clientResponse); 
```

这个特定的请求应该返回给我 HTTP 302 +location。它正在返回，但 ClientReqest 正在尝试导航到该 URL。我不确定默认行为，但我想停下来检查一下 HTTP 302 是否足以使测试通过。基本上它是Junit测试之一。

任何想法如何做到这一点。

/莫汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:26:22.650

你应该做

```
 com.sun.jersey.api.client.Client client = Client.create();
  client .setFollowRedirects(false); 
```

它将被添加到您的`resource()`方法中。

# database - BackupBuddy 插件错误

> ID：12526654
> 
> 赞同：0
> 
> 时间：2012-09-21T08:13:27.387
> 
> 标签：database, wordpress, plugins, backup

备份整个站点时。这是错误

-- 使用 BackupBuddy v2.2.33 备份... 15:10:14：错误 #5445589。无效的备份序列号 (9au6kfm0rj)。验证备份目录写入权限。致命错误。遇到致命错误。备份已停止。--

支持解决方案 -> 调整权限以允许对您的上传文件夹进行写入和目录创建访问。即：/www/wp-content/uploads/

如何调整权限？请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:26:21.483

您是否可以通过 FTP 访问您的站点？如果您使用 Filezilla 或 SmartFTP 等 FTP 程序访问它，您应该能够浏览到上传文件夹并右键单击以显示选项并更改权限。

如果您没有 FTP 详细信息或访问时遇到问题，那么最好的办法可能是通过电子邮件向您的虚拟主机发送上述信息，并询问他们是否可以为您更改该文件夹的权限。

# android - 以编程方式创建微调器时出错

> ID：12526660
> 
> 赞同：0
> 
> 时间：2012-09-21T08:14:13.470
> 
> 标签：android

我的 xml 中有一个按钮。我想以编程方式弹出微调器，而不是从 xml 之后

点击按钮。但是当我点击按钮时，它给了我一个错误。

日志输出-：

```
android.view.WindoManager

$BadTokenException: Unable to add window--token null is not for an application 
```

这是我的代码：

```
b1.setOnclickListener(new View.OnClickListener(){
public void onClick(View v) {
List<String> list = new ArrayLIst<String>(Arrays.asList("a","s","d"));
Spinner t = new Spinner(getApplicationContext());
ArrayAdapter<String> adp = new ArrayAdapter<String>   

(getApplicationContext(),android.R.layout.simple_spinner_item,list);
adp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
t.setAdapter(adp);
t.performClick(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:51:53.567

试一试：改变`getApplicationContext()`with`ActivityName.this`

我相信这会给出正确的标记来显示微调器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:26:36.970

```
 List<String> list = new ArrayList<String>(Arrays.asList("a","b","c"));
       t = new Spinner(ActivityName.this);
       ArrayAdapter<String> adp = new ArrayAdapter<String>   

      (ActivityName.this,android.R.layout.simple_spinner_item,list);
      adp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
      t.setAdapter(adp);
          t.performClick(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:33:54.920

我认为您已将此代码放入 onCreate() 中。布局尚未附加到窗口，您正在尝试显示窗口。所以窗口管理器抛出异常。我没有找到任何代码来将此微调器添加到显示布局中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:35:12.397

您需要将 Spinner 添加到您的活动/视图中。

试试这个：

```
ViewGroup v = (ViewGroup) findViewById(R.id.your_id_for_a_linear_layout); // or relatvie etc
v.addChild(t);
t.performClick(); 
```

# php - 不能用 TCPDF 显示 ￥，但其他汉字都可以

> ID：12526662
> 
> 赞同：4
> 
> 时间：2012-09-21T08:14:24.563
> 
> 标签：php, tcpdf, truetype

我正在使用[TCPDF](http://www.tcpdf.org/ "tcpdf")创建包含日文字符的 PDF。使用[TrueType 字体 ArialUni](http://www.filecrop.com/arialuni.ttf.html)时，大多数字符都可以正确显示，除了日元符号显示为方框而不是 ￥。

这是使用 ArialUni 生成的 PDF 的片段：

![使用 ArialUni](../Images/cf516c7aa9662c74ea25e998f4d5c026.png)

所以我尝试了另一种字体。[这是使用GT200001](http://www.l.u-tokyo.ac.jp/GT/downloads.html)生成的 PDF 的同一部分：

![使用 GT200001](../Images/f8d4dd14d59ba0fcc891df7bc0802895.png)

这是使用 Helvetica 的同一部分：

![使用 Helvetica](../Images/0208f3a642ecc4d3e333922709275ed0.png)

这是使用[GNU 的 FreeSans](http://ftp.gnu.org/gnu/freefont/)的同一部分：

![使用 FreeSans](../Images/8905a1391fb5d407ccbd43391618070c.png)

我希望第二行显示为“（渋谷猿，¥8,000）”

Helvetica 和 Freesans 无法正确渲染汉字我并不感到惊讶，但我无法理解为什么其他两种字体可以渲染汉字，而不是更常见的日元符号。

创建 PDF 的 Web 服务器是运行 Ubuntu 的 LAMP。我正在使用 Chrome（使用其浏览器内视图）在 OS X 上查看 PDF。我还尝试使用 Firefox 下载 PDF 并在预览中显示。我得到基本相同的结果：ArialUni 和 GT200001 不显示日元符号，而 Helvetica 和 Freesans 不显示汉字（但*显示*日元符号）。

我知道我可以为 PDF 的不同行/单元格使用不同的字体，但汉字和日元符号在同一行。

**如何使用 TCPDF 将汉字和日元符号显示在一行中？**

在我的 PDF 代码顶部附近，我使用 TCPDF 的 addTTFfont() 加载字体；

```
 $this->font = $this->addTTFfont(K_PATH_FONTS.'arialuni.ttf', 'TrueTypeUnicode', '', 32); 
```

这是我用来编写 PDF 部分的代码。

```
 $pdf->SetFont('arialuni','',10);
        $pdf->MultiCell(105, $remarks_height, $remarks, 'B', 'L', false, 0, '', '', true, 1, false, true,  $remarks_height, 'T'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T23:14:42.203

在[这篇维基百科文章中](http://en.wikipedia.org/wiki/%C2%A5)，您可以阅读更多关于这个角色的信息。

基本上，这个日文汉字有两种不同的书写方式，就像其他一些符号一样。从接受的答案“我使用的是 ¥，而不是 ￥”中，我们可以看到他使用的是“西方”或 Unicode ¥ 符号，而他实际上想使用双角字符 ￥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T05:21:14.217

哦，亲爱的，我想通了。

我用的是￥，不是￥。很抱歉混淆了！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T22:55:30.833

我注意到 TCPDF 是关于字体的。我也尝试将它用于 15 种具有不同书写风格的完全不同的语言，我使用的唯一字体是 Arial UNICODE MS。

TCPDF 具有将该字体转换为 TCPDF 友好文件的功能，即 arialuni.ctg.z(70k)、arialuni.php(447k) 和 arialuni.z (14M)。

功能是， [http://www.tcpdf.org/fonts.php](http://www.tcpdf.org/fonts.php)

```
$fontname = $pdf->addTTFfont('/path-to-font/ARIALUNICODE.TTF', 'TrueTypeUnicode', '', 32); 
```

# windows - 禁用从 cmd 运行的程序的消息框

> ID：12526664
> 
> 赞同：2
> 
> 时间：2012-09-21T08:14:37.870
> 
> 标签：windows, command-line, cmd

我有实用程序，它在工作结束时显示带有通知和确定按钮的消息框。我在命令行下运行它，并希望禁用所有可能破坏我的进程并需要用户反应的消息框。有什么办法可以完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:28:44.437

我建议只添加一个`--quiet`命令行开关，这样用户就可以更好地控制这种事情。

如果您想尝试自动执行此操作，您可以在应用启动时检查父 PID，并查看它是否为`cmd.exe`. 当然这不是 100% 准确的，因为还有更多的场景是用户不希望用户交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:16:58.997

嗯...您可以使用 VBScript 自动单击或按下`ENTER`消息框。但是您需要知道消息框的窗口名称或编号。

此代码将焦点放在名为 MESSAGEBOXNAME 的窗口上，然后按`ENTER`。

```
Set oShell = CreateObject("WScript.Shell") 
oShell.AppActivate("MESSAGEBOXNAME")
WScript.Sleep 500
oShell.SendKeys "~" 
```

消息框的窗口名称在哪里`MESSAGEBOXNAME`，应该在消息框的右上角。

# java - 如何创建多个 PendingIntent？

> ID：12526665
> 
> 赞同：1
> 
> 时间：2012-09-21T08:14:39.927
> 
> 标签：java, android, notifications, android-pendingintent

如何创建多个 PendingIntent？我有几个通知，当用户按下最后一个时，一切正常，但点击通知没有响应。我的代码是：

```
Intent notificationIntent = new Intent(context, MainActivity.class);
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK).setAction("ShowDialog");
notificationIntent.putExtra("args", Tools.getInstance().generateBundle(progressId, lastId));
notificationBuilder.setContentIntent(PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT)); 
```

我想原因是 FLAG_CANCEL_CURRENT，但是 PendingIntent 的所有标志都不能解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:48:35.687

根据我的猜测，

您只需要为每个待处理的意图提供不同的唯一 ID，您的应用程序不会有任何问题。

像，
`PendingIntent.getActivity(context, uniqID, nIntent, PendingIntent.FLAG_ONE_SHOT);`

* * *

如果您不打算删除或更新意图，则可以将`calendar.getTimeInMillis()`其用作您的唯一 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:23:52.347

查看 CANCEL_CURRENT 标志，它执行您所描述的操作。您必须为不同的通知创建不同的待处理意图，否则它们被认为是相同的。查看[IntentSender 文档](http://developer.android.com/reference/android/content/IntentSender.html)以了解您需要做什么来创建单独的待处理意图。我的建议是在数据中编码一个 id。如果您愿意，它可以非常简单，或者它可以具有识别意图的含义。这是特别感兴趣的片段：

> 如果创建应用程序稍后重新检索相同类型的 IntentSender（相同的操作、相同的 Intent 操作、数据、类别和组件以及相同的标志），它将接收表示相同令牌的 IntentSender（如果仍然有效）。

您看到的问题是由于您重用了相同的待处理意图，并且在“创建”新意图时取消了前一个意图。

另请注意，根据设计指南，您应该只拥有每种类型的通知（例如，只有一个通知用于新电子邮件、新短信……）如果有多个相同类型的通知，则应将它们合并到一个通知中。但是，这只是一个指导方针。

[您可以在此处](http://androidxref.com/4.1.1/xref/frameworks/base/services/java/com/android/server/am/ActivityManagerService.java#getIntentSenderLocked)找到有关“requestCode/uniqueId 解决方案”为何在当前版本的 Android 中有效的信息

# grails - 如何再次安排quartzScheduler grails过期作业？

> ID：12526670
> 
> 赞同：0
> 
> 时间：2012-09-21T08:15:09.363
> 
> 标签：grails, cron, quartz-scheduler

您能否告诉我在 grails 应用程序中重新安排已经过期的石英作业的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:03:36.783

您可以使用 QuartzScheduler 的以下方法进行重新调度。

```
 java.util.Date rescheduleJob(java.lang.String s, java.lang.String s1, org.quartz.Trigger trigger) 
```

来自 Quartz 源代码：它删除具有给定名称的触发器，并存储新的给定触发器 - 它必须与同一个作业相关联（新触发器必须具有指定的作业名称和组） - 但是，新触发器需要与旧触发器的名称不同。

# node.js - node应用流文件直接上传到amazon s3

> ID：12526673
> 
> 赞同：2
> 
> 时间：2012-09-21T08:15:21.223
> 
> 标签：node.js, amazon-s3, stream, formidable, knox-amazon-s3-client

您好 :) 我正在研究让我的节点应用程序流 HTTP POST 文件直接上传到 Amazon S3 存储桶的可行性。

我正在考虑为此使用 Formidable 和 Knox。

我不确定的部分是 S3 要求您在传输之前知道文件中的总字节数。

我认为实现这一点的唯一方法是使用 HTML5 文件 API（可能还有 Internet Explorer 上的 ActiveX 控件）来检查客户端上的文件大小并将其作为 HTTP POST 请求的一部分发送，这是对的吗？ ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T21:06:27.180

借助最近的 CORS 支持，您可以轻松地将文件直接发送到 s3，而无需您的服务器处理任何事情。

我最近用 rails 写了一个简短的教程，但是服务器只是用来计算一些键，所以让它适应表达应该一点也不难。

但是有了这样的解决方案，您需要使用[jQuery File Upload 插件](http://blueimp.github.com/jQuery-File-Upload/)，而且您可能不需要 knox

[https://pjambet.github.io/blog/direct-upload-to-s3](https://pjambet.github.io/blog/direct-upload-to-s3)

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:20:32.800

也许这会有所帮助 - 我这样做是为了使用 JQuery File Upload 插件直接上传到 S3。我不需要检查文件的大小。

[https://gist.github.com/3995819](https://gist.github.com/3995819)

# java - 在 JasperReports 中使用 ArrayList 作为主要数据源 - 仅打印第一个元素

> ID：12526675
> 
> 赞同：3
> 
> 时间：2012-09-21T08:15:28.650
> 
> 标签：java, arraylist, jasper-reports

我在*JasperReports*中使用***ArrayList***作为我的主要*数据源*时遇到问题。

 *我的程序是一个简单的 Java 程序，我有一个非常简单的报告。我的***ArrayList***中有两个数据对象，我用***JRBeanCollectionDataSource***将它们包装起来，然后通过***JasperFillManager***将其传递给***JRPrint***。我的报告生成了，但只生成了第一个数组项。

 *我基本上是在遵循[本教程](http://www.ramkitech.com/2012/09/integrate-charts-in-jasper-reports-jsf.html)，然后将另一个项目添加到***ArrayList***。但只有一个打印出来。

代码片段：

```
ArrayList<ProtoReport> listOfReports = new ArrayList<ProtoReport>();

ProtoReport protoReport1 = new ProtoReport();
ProtoReport protoReport2 = new ProtoReport();

//Simple Fields and text
protoReport1.setTitle("Example Fact Sheet");
protoReport2.setTitle("2nd Fact Sheet");

//add all reports to the list
listOfReports.add(protoReport1);
listOfReports.add(protoReport2);

//and wrap the ArrayList in a JRBeanCollectionDataSource
JRBeanCollectionDataSource beanBurritoWrap = new JRBeanCollectionDataSource(listOfReports);

//build the jasper report
JasperReport jasperReport;
JasperPrint jasperPrint;
HashMap<String, Object> hashMap = new HashMap<>();
boolean reportCreated;

try {
    jasperReport = JasperCompileManager.compileReport(jrxmlLocation);
    jasperPrint = JasperFillManager.fillReport(jasperReport, hashMap, beanBurritoWrap);
    JasperExportManager.exportReportToPdfFile(jasperPrint, outputFileName);
    reportCreated = true;
} catch (JRException e) {
    e.printStackTrace();
    reportCreated = false;
}

//Report on build status
System.out.println("Jasper Report built: " + reportCreated); 
```

ProtoReport 类基本上只是报表字段、表格和图表数据的容器
例如：

```
package org.reportprotojava.protosheet;

import java.util.ArrayList;

public class ProtoReport {

private String outputFileName;
private String title;
private String logoLocation;
private String paragraphText;
private ArrayList<String> tableData;
private String picLocation;
private int[][] graphData;  //TODO decide how to store chart data
private ChartData chartData;
private String path;

//default constructor
public ProtoReport() {

    // Initialize object fields
    outputFileName = "PrototypeReport";
    title = "Prototype Report";
    paragraphText = "Default text";

    tableData = new ArrayList<String>();
    chartData = new ChartData();

    //set path to working directory
    path = System.getProperty("user.dir");

    //default to assumed report location 
    //(ie same folder as .jrxml and .jasper files)
    logoLocation = path + "\\reports";
    picLocation = path + "\\reports";
} 
```

加上一个参数化的构造函数，然后是 getter 和 setter 等

编译没有问题，第一个报告导出为pdf没有问题。我得到的唯一警告是：

```
log4j:WARN No appenders could be found for logger (net.sf.jasperreports.engine.xml.JRXmlDigesterFactory).
log4j:WARN Please initialize the log4j system properly. 
```

但我不认为这与这个问题有任何关系（如果这不是真的，请纠正我）。

这是我的 .jrxml 文件（忽略图表的东西，我现在正在处理它，但它正在逐渐成为另一个问题的材料；-)）

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportPrototype.jrxml" pageWidth="595" pageHeight="842" columnWidth="495" leftMargin="57" rightMargin="43" topMargin="43" bottomMargin="43" uuid="10825c57-f953-4166-bf03-8ecabe8a8f47">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="128"/>
<subDataset name="ChartData" uuid="ebdb66fc-82b2-489c-8187-731eed51dd7a">
    <field name="xAxis" class="java.util.List"/>
    <field name="yAxis" class="java.util.List"/>
</subDataset>
<queryString language="SQL">
    <![CDATA[]]>
</queryString>
<field name="title" class="java.lang.String"/>
<field name="logoLocation" class="java.lang.String"/>
<field name="picLocation" class="java.lang.String"/>
<field name="chartData" class="java.lang.Object"/>
<field name="xAxis" class="java.util.List"/>
<field name="yAxis" class="java.util.List"/>
<title>
    <band height="115" splitType="Stretch">
        <textField isStretchWithOverflow="true" pattern="">
            <reportElement uuid="519c6bb5-72f9-4c25-8e91-47865ae0c9df" mode="Opaque" x="0" y="70" width="495" height="45" forecolor="#000099"/>
            <textElement>
                <font size="26"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>
        </textField>
        <image>
            <reportElement uuid="f989f871-32ea-4f13-ae3f-3f487cde76dd" x="295" y="0" width="200" height="42"/>
            <imageExpression><![CDATA[$F{logoLocation}]]></imageExpression>
        </image>
    </band>
</title>
<pageHeader>
    <band height="45" splitType="Stretch">
        <staticText>
            <reportElement uuid="34054fe4-f5c8-4154-b11e-558ad49c9bed" x="195" y="14" width="100" height="20"/>
            <textElement/>
            <text><![CDATA[Static text]]></text>
        </staticText>
    </band>
</pageHeader>
<columnHeader>
    <band height="105" splitType="Stretch">
        <image>
            <reportElement uuid="3759a707-32a4-49ef-a9c6-b0ad7136f738" x="242" y="0" width="253" height="105"/>
            <imageExpression><![CDATA[$F{picLocation}]]></imageExpression>
        </image>
    </band>
</columnHeader>
<detail>
    <band height="184" splitType="Stretch">
        <xyLineChart>
            <chart>
                <reportElement uuid="3b739a73-6612-42b0-bdf9-46f5d9a9899d" x="0" y="0" width="495" height="184"/>
                <chartTitle/>
                <chartSubtitle/>
                <chartLegend/>
            </chart>
            <xyDataset>
                <dataset>
                    <datasetRun subDataset="ChartData" uuid="d84314f7-4580-4b2b-a190-b0bbe4ea63df">
                        <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.JRBeanCollectionDataSource($F{chartData})]]></dataSourceExpression>
                    </datasetRun>
                </dataset>
            </xyDataset>
            <linePlot>
                <plot/>
            </linePlot>
        </xyLineChart>
    </band>
</detail>
<columnFooter>
    <band height="45" splitType="Stretch"/>
</columnFooter>
<pageFooter>
    <band height="45" splitType="Stretch"/>
</pageFooter>
<lastPageFooter>
    <band height="45" splitType="Stretch"/>
</lastPageFooter>
<summary>
    <band height="45" splitType="Stretch"/>
</summary> 
```

有谁知道我做错了什么？

**编辑**

好的，我根据 AlexK 的建议进行了一些更改，将我的所有字段、图表和表格移动到 Detail 1 带中，但是现在当我去编译时，我收到以下错误：

```
net.sf.jasperreports.engine.JRException: Byte data not found at : C:\Users\eljaydub\workspace\ReportProtoJava\reports
at net.sf.jasperreports.repo.RepositoryUtil.getBytesFromLocation(RepositoryUtil.java:324)
at net.sf.jasperreports.engine.RenderableUtil.getRenderable(RenderableUtil.java:121)
at net.sf.jasperreports.engine.fill.JRFillImage.evaluateImage(JRFillImage.java:505)
at net.sf.jasperreports.engine.fill.JRFillImage.evaluate(JRFillImage.java:442)
at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:257)
at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:457)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2037)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:771)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportContent(JRVerticalFiller.java:301)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:148)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:841)
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:88)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:653)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:969)
at org.reportprotojava.protosheet.Program.main(Program.java:130) 
```

我做了一些谷歌搜索，发现大多数时候这是由与图像文件位置相关的问题引起的，所以我用这个修改了我的代码：

```
//Locations

    //Absolute
    protoReport1.setLogoLocation("C:\\Users\\eljaydub\\workspace\\ReportProtoJava\\reports\\logo.gif");
    protoReport1.setPicLocation("C:\\Users\\eljaydub\\workspace\\ReportProtoJava\\reports\\portfolio.jpg");

    //Relative
//      protoReport1.setLogoLocation(protoReport1.getPath() + "\\reports\\logo.gif");
//      protoReport1.setPicLocation(protoReport1.getPath() + "\\reports\\portfolio.jpg"); 
```

并尝试了相对路径和绝对路径，但得到相同的错误。这些是相关的还是我应该为此错误创建一个新帖子？

**编辑**

解决了！AlexK 的建议确实解决了第一个问题，然后揭示了第二个问题：当报告转到下一个数组元素**protoReport2**时，它发现该对象的图像链接是我的默认构造函数提供的那些，这只是猜测可能图像文件的名称和位置。然后抛出异常，因为两个图像的图像属性**onErrorType**都设置为**错误**。我只需将 iReports 中的属性更改为**Icon**并且生成的报告没有进一步的问题，我得到了我的预期：两个数组元素打印在不同的页面上，第二个使用默认构造函数值。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:04:08.477

您应该使用*Detail*带来显示来自*数据源*的数据。*Title*带不是遍历*数据源*的正确选择。

您应该将***textField*** (with `<textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>`) 和***image*** (with `<imageExpression><![CDATA[$F{logoLocation}]]></imageExpression>`) 放到*Detail*带中。

* * *

[JasperReports Ultimate Guide](http://jasperreports.sourceforge.net/JasperReports-Ultimate-Guide-3.pdf)中有关频段的其他信息：

*   **标题栏**- 这是报告的第一部分。它在报告填写过程中仅生成一次，代表生成文档的开始。
*   **详细信息带**- 对于数据源中的每条记录，引擎会尝试生成此部分。细节部分可以由多个波段组成。

* * *

这篇[关于使用 JavaBean 数据源](http://jasperreports.sourceforge.net/sample.reference/datasource/index.html#javabeandatasources)的文章有助于理解如何使用*JavaBean*数据源。

* * *

*jasperreports.sourceforge.net*站点上的另一篇有用的文章- 这是[关于图像](http://jasperreports.sourceforge.net/sample.reference/images/index.html#images)的。**

# c# - 如何将字符串数组作为 JSON 参数传递

> ID：12526676
> 
> 赞同：0
> 
> 时间：2012-09-21T08:15:31.073
> 
> 标签：c#, jquery, json

我正在尝试将几个参数传递给我的 JSON 回调，但是 string[] 参数仍然为空。我如何需要从 javascript 传递字符串数组才能使其正常工作？

Javascript函数：

```
function jsonCallback(jsonCallbackID, argumentsArray) {
var argumentValues = [];
for (var i = 0; i < argumentsArray.length; i++) {
    argumentValues.push('' + $("#" + argumentsArray[i]).val());
}

// build request
var url = encodeURI("/DataEntry/JsonCallback/");
var data = ({ jsonCallbackID: jsonCallbackID, jsonCallbackValues: argumentValues, rndvalue: Math.floor(Math.random() * 10000000001) });

// fire request
$.getJSON(url, data, function (data) {}); 
```

实际的回调 C# 函数：

```
 public JsonResult JsonCallback(int jsonCallbackID, string[] jsonCallbackValues)
    { } 
```

但是，此函数确实被调用，参数“jsonCallbackValues”为空。

**编辑**

为了使它工作，我做了以下工作：

```
var data = ({ jsonCallbackID: jsonCallbackID, jsonCallbackValues: argumentValues.toString(), rndvalue: Math.floor(Math.random() * 10000000001) }); 
```

并在 "," 处拆分 jsonCallbackValues 字符串以获取结果数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:28:01.863

您可以尝试 JSON API ...

```
var data = {
   jsonCallbackID:jsonCallbackID,
   jsonCallbackValues: JSON.stringify(argumentValues),
   rndvalue: Math.floor(Math.random() * 10000000001)
};
// your 
$.getJSON(url, data, function (data) {}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:23:38.773

JSON 是一种序列化语言，因此不能将对象放入其中。

您应该以 JSON 格式构建您的数组：

jsonCallbackValues : ["value1", "value2"...]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:36:50.767

像这样试试

```
var data = ({ jsonCallbackID: jsonCallbackID, jsonCallbackValues: $.toJSON(argumentValues), rndvalue: Math.floor(Math.random() * 10000000001) }); 
```

我使用了来自[http://code.google.com/p/jquery-json/的 JSON jQuery 插件](http://code.google.com/p/jquery-json/)

在控制器方法中将其更改为字符串 jsonCallbackValuesArray

然后使用 JavaScriptSerializer 或 JSON.Net 将 JSON 字符串转换为 String []

# java - 从 HTML 中获取数据并将其转换为 JSON

> ID：12526677
> 
> 赞同：3
> 
> 时间：2012-09-21T08:15:35.247
> 
> 标签：java, html, json

我有这样的 HTML 输出：

```
<input type='text' id='status' name='status' value='0'>
<input type='text' id='description' name='description' value='Success'>
<input type='text' id='COMPANY' name='COMPANY' value='201'> 
```

等等。

我想从中提取 id、name 和 value 并将它们转换为 java 中的 JSON。

**编辑：**我的 JSPN 输出看起来像

```
{"id": "status","name": "status", "value": "0"} 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T12:45:23.567

只需三步

1.创建一个html输入元素模型，它有3个属性：id、name、value。

2.从 html 文件中提取值，您可以使用 htmlparser 并使用这些值创建模型实例

3.将模型实例转换为json字符串。

# android - 无法完全关闭警报对话框

> ID：12526683
> 
> 赞同：1
> 
> 时间：2012-09-21T08:16:04.563
> 
> 标签：android, android-alertdialog

我有一个带有删除和取消功能的自定义警报对话框。删除按钮是删除当前选中的列表项。取消按钮应关闭警报对话框并返回列表。当我单击删除时，它将删除它，当我单击取消时，它将关闭警报对话框并转到列表。但是，当我单击后退按钮时，它会再次显示警报对话框。这是我的警报对话框的代码片段：

```
LayoutInflater inflater = LayoutInflater.from(context);
            View v = inflater.inflate(R.layout.grocerylistdelete, null);

            AlertDialog.Builder abuilder = new AlertDialog.Builder(
                    context);
            abuilder.setView(v);
            TextView tvStatement = (TextView)   v.findViewById(R.id.textViewStatementDelete);
            tvStatement.setTypeface(bold);
            tvStatement.setText("Are you sure you want to delete"+" "+mCursor.getString(mCursor.getColumnIndex(DBAdapter.KEY_ITEM))+"?");

            Button delete = (Button) v.findViewById(R.id.buttonDelete);
            delete.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    Cursor c = db.getAllGroceries();
                    c.moveToPosition(info.position);
                    String id = c.getString(c.getColumnIndex(DBAdapter.ROW_ID));
                    db.open();
                    db.deletegrocery(Long.parseLong(id)); 
                    c.close();

                    Toast toast = Toast.makeText(GroceryList.this, "Item Deleted Successfully", 5000);
                    toast.show();
                    Intent i = new Intent(getApplicationContext(), GroceryList.class);
                    fillData();
                    startActivity(i);

                }
            });
                Button canceldelete = (Button) v.findViewById(R.id.buttonCancelDelete);
                canceldelete.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        Intent i = new Intent(getApplicationContext(), GroceryList.class);
                        startActivity(i);

                    }
                });

                abuilder.setCancelable(false);
                AlertDialog alert2 = abuilder.create();
                alert2.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:32:52.627

啊啊啊，我现在看到了。当你点击按钮时，你开始了一个新的活动，看起来它实际上和你现在的活动是一样的。

所以本质上，发生的事情是你开始一个新的活动，而旧的活动仍然存在，警报对话框仍然打开。

相反，您可以刷新当前列表中的数据，而无需开始新的活动。为此，您可以在`dismiss()`有人单击后使用该方法隐藏 AlertDialog（而不是启动新活动）。

如果您确实更喜欢开始一项新活动，那么最好的办法就是开始`finish()`当前的活动。

# nginx - 在有nginx和gunicorn的生产环境中，是使用unix socket好还是tcp绑定好呢？

> ID：12526684
> 
> 赞同：3
> 
> 时间：2012-09-21T08:16:08.977
> 
> 标签：nginx, gunicorn

我似乎无法在网上找到有关该主题的任何内容。我发现一个实例声称使用 unix 套接字更好，因为它不会产生额外的 TCP 开销（假设我们在这里谈论的是 Web 服务器）。

任何想法，任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T15:03:13.847

如果您需要，建议使用 Unix-socket：

*   本地主机上的高吞吐量

如果您需要，建议使用 TCP/IP-socket：

*   联网计算机之间的中等+吞吐量。

TCP 增加了 30% 的开销。

# perl - '$?' 是什么意思？这意味着在 perl

> ID：12526686
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:16:12.140
> 
> 标签：perl

如果条件在 perl 中意味着什么：

```
 if($? != 0 ){
  } 
```

请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:19:06.823

这些变量记录在`perlvar`页面中：http: [//perldoc.perl.org/perlvar.html](http://perldoc.perl.org/perlvar.html)

```
$? 
```

> 最后一个管道关闭、反引号 (`` ) 命令、成功调用 wait() 或 waitpid() 或来自 system() 运算符返回的状态。这只是传统的 Unix wait() 系统调用返回的 16 位状态字（或者被编造出来的样子）。因此，子进程的退出值实际上是 ($?>> 8 )，而 $? & 127 给出了进程死于哪个信号（如果有的话），以及 $? & 128 报告是否存在核心转储。

# jquery - 了解 iMask 设置和符号

> ID：12526688
> 
> 赞同：2
> 
> 时间：2012-09-21T08:16:23.200
> 
> 标签：jquery, regex, jquery-plugins, mask

我打算在我的表单中使用[这个](http://zendold.lojcomm.com.br/imask/#selflink_usage)插件。但我只是想要一个比他们给你的选项更好的解释。

类型：这是什么？固定或数字选项有什么作用？
面具：有人有什么好的资源可以让我学习面具符号吗？
stripmask：这是什么意思？如果这意味着删除掩码，那么为什么不从标签中删除 class="iMask" 呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:33:59.923

从[iMask 文档](http://zendold.lojcomm.com.br/imask/#selflink_usage)和一些修补中收集：

**类型**- 限制可以输入到输入字段中的字符

*   数字：默认为十进制值（任意长度）。有效字符：0123456789
*   固定：仅限于**掩码**选项中指定的字符。不多也不少。

[**掩码**](http://zendold.lojcomm.com.br/imask/#selflink_features)- 规定输入字段值必须遵循的格式

*   9：代表任何数字符号。默认有效字符：0123456789
*   A：代表任何字母字符。默认有效字符：abcdefghijklmnopqrstuvwxyz
*   X：代表任何数字或字母字符

**StripMask** - 删除或保留输入字段上的掩码语法提示

*   True：当用户完成编辑时，从输入字段中删除掩码。示例：`09/24/12`将`092412`在输入字段失去焦点时变为。
*   False：掩码保留在输入字段中。

# iphone - 如何以正确的顺序在 UITextView 中包含图像/文本

> ID：12526691
> 
> 赞同：0
> 
> 时间：2012-09-21T08:16:30.957
> 
> 标签：iphone, ios, xcode

我计划开发一个像 Facebook Messenger/iMessage 这样的信使应用程序。但我不知道如何在 UITextView 中包含图像/文本作为订单中的输入。有人可以建议我一个解决方案或示例代码吗？我是 iPhone 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:45:28.437

您可以使用 UiTableView 或 ScrollView

# javascript - jQuery 可拖动区域（圆形）

> ID：12526695
> 
> 赞同：1
> 
> 时间：2012-09-21T08:17:03.433
> 
> 标签：javascript, jquery, html, jquery-ui

我想构建一种操纵杆，所以内部图片（我的可拖动对象）应该有一个特定的范围。目前它只是一个广场，我不喜欢那样！

我发现可以通过在我的拖动方法中返回 true 或 false 来控制移动，但是如果我返回 false，对象会跳回到它的起点而不是静止不动:(

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:20:28.457

在您的拖动处理程序中，您已经更改了位置。如果您的可拖动对象试图超出您想要保留它的容器，那么只需将位置截断回容器内并且不要返回 false。

[可拖动的 API 文档](http://jqueryui.com/demos/draggable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:21:14.097

我认为当您想将对象限制在特定区域时，会出现**包含选项。**请参阅下面的链接以供参考。

[http://docs.jquery.com/UI/Draggable#option-containment](http://docs.jquery.com/UI/Draggable#option-containment)

# jquery-easyui - 将 EasyUI 数据网格行插入数据库

> ID：12526697
> 
> 赞同：0
> 
> 时间：2012-09-21T08:17:09.173
> 
> 标签：jquery-easyui

我有一个带有几行的 easyUI 数据网格，我想将这些行插入到数据库表中。我该怎么做。

注意：我正在使用数据网格不可编辑的数据网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:05:59.317

嗨，我有一个您需要的解决方案，首先您必须将数据存储到字符串或数组中，然后将其发送到将其保存到数据库中的脚本，检查此代码。

```
 /* Array to store datagrid records /*
var facturas = { 
     lineas:[]
 };

 linea_facturas="";
 //Armado del arreglo JSON a enviar
 rows = $('#dg').datagrid('getRows');  // get all rows of Datagrid
 for(var i=0; i<rows.length; i++){
     var renglon = rows[i];                    
     facturas.lineas.push({
         "id_header"      : $("#idheader").val() , 
         "fecha_cr"      : $('#dd').datebox('getValue') ,
         "contrato"      : renglon.id_contrato ,  
         "factura"       : renglon.id_factura  , 
         "importe"       : renglon.importe     ,
         "iva"           : renglon.iva         , 
         "total"         : renglon.total        
     });
     linea_facturas =
         linea_facturas                   +
         $("#idheader").val() + ","       +
         $('#dd').datebox('getValue')+ ","+
         renglon.id_contrato +  ","       +
         renglon.id_factura  + ","        +
         renglon.importe     + ","        +
         renglon.iva         + ","        +
         renglon.total       + "&"        ;          
 }     

 //var jsonText = JSON.stringify(facturas); //Convierte un valor de JavaScript en una cadena de la notación de objetos JavaScript (JSON).
 //$.messager.alert('Info',linea_facturas);   
 //window.console.log(linea_facturas);
 $.ajax({
     type: "POST",
     url: "Lector?action=SAVEDETAILS",                                       
     data:  {registros :linea_facturas}, 
     dataType: "json",                       
     success: function(jsondata){                                 
         //$.messager.alert("Almacenado de detalles exitoso y se insertaron  " + jsondata.detalle + " registros");
     },
     error: function (xhr, ajaxOptions, thrownError) { 
         alert(xhr.status); 
         alert(thrownError); 
     },
     complete: function() { EnviaDatos(2); } 
                                        }); 
```

POST 中的 URL 必须是你保存数据的程序，你必须在服务器端解析数据

# windows-phone-7 - Windows Phone 7 上的 AccountManager

> ID：12526699
> 
> 赞同：1
> 
> 时间：2012-09-21T08:17:12.427
> 
> 标签：windows-phone-7, openid, accountmanager

`AccountManager`Wp7 上是否有类似于[Android](http://developer.android.com/reference/android/accounts/AccountManager.html)中的那个？所以我可以使用手机已经通过身份验证的谷歌帐户作为 openID 或其他东西（登录到我的服务而不询问他的密码）。

编辑添加：我有一个用户活动目录，我知道他们的电子邮件地址。（如果需要，包括他们的实时 ID，虽然会更喜欢 Gmail）我希望能够根据用户手机上可用的经过身份验证的帐户登录用户而无需询问任何密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:35:29.320

您可以使用[Live ID](https://stackoverflow.com/questions/10473742/how-to-programmatically-extract-windows-phones-liveid)。

在清单中：

```
<Capabilities>
      ...
      <Capability Name="ID_CAP_IDENTITY_DEVICE"/>
      <Capability Name="ID_CAP_IDENTITY_USER"/>
   < /Capabilities>

using Microsoft.Phone.Info;

string anid = UserExtendedProperties.GetValue("ANID") as string;
string anonymousUserId = anid.Substring(2, 32); 
```

详情[在这里](http://msdn.microsoft.com/en-us/library/microsoft.phone.info.userextendedproperties.trygetvalue%28v=vs.92%29.aspx)。

因此，您可以获得[Live Id 和 Device](http://www.nickharris.net/2010/09/windows-phone-7-how-to-find-the-device-unique-id-windows-live-anonymous-id-and-manufacturer/) id 的组合来识别用户+设备。

# cakephp - CakePHP - 通过其他列而不是 ID 选择记录

> ID：12526706
> 
> 赞同：1
> 
> 时间：2012-09-21T08:17:44.570
> 
> 标签：cakephp, cakephp-2.1

我正在使用 CakePHP v2.2，我需要使用另一列而不是 id 来查询表。

这是我的控制器代码：

```
public function view($id = null){
    $this->layout = 'clean';
    $sku = array('Image.sku' => $id);
    $this->Image->find('first', array('conditions' => $sku));
    $this->set('image', $this->Image->read());
} 
```

看法

```
header('Content-type: ' . $image['Image']['type']);
header('Content-length: ' . $image['Image']['size']);
header('Content-Disposition: inline; filename="' . $image['Image']['name'].'"');
echo $image['Image']['content']; 
```

我想使用 sku 作为查询的参数，而不是 id。我可以在不修改表格的情况下做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:35:41.100

如果你的表中有**sku**列，你可以这样做：

```
$this->Image->findBySku('first'... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:58:56.507

尝试这样的事情：

```
$image = $this->Image->find('first', array('conditions' => $sku));
$this->set('image', $image); 
```

# iphone - scrollToRowAtIndexPath 不调用 cellForRowAtIndexPath 并且不滚动 UITable 视图

> ID：12526709
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:17:49.743
> 
> 标签：iphone, objective-c, uitableview, ios5

实际上，我需要为我的项目中的所有交易制作 pdf 文件。所以我用 .xib 创建了 PDFViewController 类，其中包含 uiView、uitableView 等。

我没有向用户展示这个课程，我正在拍摄这个课程视图的屏幕截图，以便为所有交易制作 pdf。

我的问题是我可以拍摄屏幕截图视图和表格，但表格中有很多行，所以我需要滚动它以仅为表格视图拍摄屏幕截图，但它不能滚动。

请参阅下面的代码任何帮助将不胜感激。谢谢

```
@implementation PDFViewController

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier=@"PDFCustomCell";
    PDFViewCustomCell *cell=(PDFViewCustomCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell==nil) 
    {
        NSArray *nib=[[NSBundle mainBundle]loadNibNamed:@"PDFViewCustomCell" owner:self options:nil];

        cell=[nib objectAtIndex:0];
        nib=nil;
    }

    //@autoreleasepool {

    PDFPrint *pdfObj=[self.arrProducts objectAtIndex:indexPath.row];

    cell.unitPrice.text=[currencyFormator stringFromNumber:[NSNumber numberWithDouble:[pdfObj.unitPrice doubleValue]]];
    UIImage* img =  [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@/downloads/%@/files/%@.jpg",del.LocalPath,del.CompFolder,del.RepId,pdfObj.code]];
    if(img!=nil)
        [cell.imageView setImage:img];
    else
        [cell.imageView setImage:[UIImage imageNamed:@"no_privew95x77.jpg"]];
        pdfObj=nil;
            return cell;
    //}
} 
```

*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { NSLog(@"Array Count is = %i",[self.arrProducts count]); 返回 [self.arrProducts 计数]；}

    *   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView { return 1; }
    *   (void)viewDidLoad { [超级 viewDidLoad];

        NSString* strlogopath = [NSString stringWithFormat:@"%@/%@/%@",del.LocalPath,del.CompFolder,del.CompInfo.ImageName]; [self.imgLogo setImage:[UIImage imageWithContentsOfFile:strlogopath]]; strlogopath = nil; [自填数据];

    } -(void)filldata { //这里我正在从 arrProduct NSMutableArray 中的许多表中填充数据我已经删除了 StackOverflow 的行数以提高代码复杂性。我正在准确地获取 arrProduct 中的数据。

    ```
     [self.arrProducts addObject:pdfData];

        [SQLHelper finalizeStatement:stmt];
    }
    @catch (NSException *exception)
    {
        NSLog(@"%@",exception.description);
    }
    @finally 
    {
        [SQLHelper disconnectDB:database];
    } 
    ```

    }

    @结尾

    // CurrentTransaction.m // 在 currentTransaction.m 我没有添加 self.pdfViewController 视图，因为我不需要显示它。我只需要截屏然后需要制作pdf文件问题是我不能滚动表格来截取下一行的屏幕截图。

    *   (UIView *)loadTemplate:(PrintChoice_t)type { if (type==Small_Photo) { self.pdfViewController=[[PDFViewController alloc]initWithNibName:@"PDFViewController" bundle:[NSBundle mainBundle] ReferenceController:& self]; } 返回 self.pdfViewController.view; }

    //someWhere 在这个类中我正在调用

    [self.pdfViewController.tblProd scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:14 inSection:0] atScrollPosition:UITableViewScrollPositionNone 动画：NO];

    //但是 scrollToRowAtIndexPath 没有在 PDFViewController 中调用 CellForRowAtIndexPath。我只能看到调试信息 14 行可见 0 位置 14 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:03:58.273

您正在另一个视图控制器中访问表（来自 CurrentTransaction 视图控制器的 pdfViewController），但是您将 CurrentTransaction 视图 indexPath 作为 indexpath 传递，如果您的 CurrentTransaction 视图没有 tableView 或者 TableView 有不是 14 行，否则它将具有无效的 NSIndexPath。

我建议在您的 pdfViewController 中添加一个自定义公共方法，该方法将滚动到该行。像这样的东西：

```
- (void)scrollToRow:(int)row atSection:(int)section {
     [self.tblProd scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:14 inSection:0] atScrollPosition:UITableViewScrollPositionNone animated:NO]
} 
```

然后在 CurrentTransaction.m 中替换

```
[self.pdfViewController.tblProd scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:14 inSection:0] atScrollPosition:UITableViewScrollPositionNone animated:NO]; 
```

和：

```
[self.pdfViewController scrollToRow:14 atSection:0]; 
```

那么应该可以正常工作！

# php - 上传数据到服务器内存

> ID：12526710
> 
> 赞同：0
> 
> 时间：2012-09-21T08:17:52.860
> 
> 标签：php

我正在使用 PHP

我了解可以将值上传到服务器内存

让我们说每个用户都有网站的权限表

每次用户加载某些页面时，我都不想查询权限。是否可以预先将所有权限加载到服务器内存并在每次滑动到新页面时拉出它们？

提前谢谢你，罗伊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:19:11.847

您正在寻找的是 $_SESSION 范围。记录在[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

# ruby - Ruby：为每个用户打印用户模型的一个属性

> ID：12526716
> 
> 赞同：2
> 
> 时间：2012-09-21T08:18:11.767
> 
> 标签：ruby

我的数据库中有一堆具有这些属性的用户，但是，我只想要每个用户的电子邮件地址

```
#<User id: 1, email: "email@yahoo.com", encrypted_password: "", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2012-09-03 09:14:01", updated_at: "2012-09-03 09:14:01", name: nil, confirmation_token: nil, confirmed_at: nil, confirmation_sent_at: nil, unconfirmed_email: nil, opt_in: nil, invitation_token: nil, invitation_sent_at: nil, invitation_accepted_at: nil, invitation_limit: nil, invited_by_id: nil, invited_by_type: nil>, 
```

在控制台中，我做了

```
 u = User.all 
```

它打印了所有用户及其属性。

现在，要获取我尝试过的每个电子邮件地址

```
 u.each do |f|
     f.email
   end 
```

但它只是再次打印了整个用户列表，以及他们的所有属性。

谁能告诉我如何打印所有用户的电子邮件地址列表，而忽略其他属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:26:46.200

您的控制台将在最后打印您键入的结果。

因此，如果您编写 u.each { any }，控制台将打印每个循环的结果。要显式打印内容，您需要使用输出函数（puts、p、pp、print 等）

```
users = User.all
puts users.map(&:email).join("\n") 
```

# javascript - Google Maps V3 - 删除所有标记

> ID：12526717
> 
> 赞同：2
> 
> 时间：2012-09-21T08:18:22.813
> 
> 标签：javascript, google-maps, google-maps-api-3

我想使用谷歌地图 v3，如果你放大到 15 以上，地图会显示标记位置，但是当你缩小时我想隐藏标记。我找不到任何功能来做到这一点。到目前为止，没有什么对我有用。

所以这是我的脚本：

```
<script type="text/javascript">
        function initialize() {
            var mapOptions = {
              zoom: 15,
              center: new google.maps.LatLng(52.429236, 6.281255),
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            setMarkers(map, points);

            google.maps.event.addListener(map, 'zoom_changed', function()
{
                        if (map.getZoom() > 15) {
                                setMarkers(map, points);
                        } else {
                                hideMarkers(map, points);

                        }
                           }); 

        }

        var points = [
            ['Location 1', 52.420891, 6.280204],
            ['Location 2', 52.420125, 6.279131],
            ['Location 3', 52.420125, 6.240125]
        ];

        function setMarkers(map, locations) {
            var image = new google.maps.MarkerImage('../images/map/beachflag.png',
            new google.maps.Size(20, 32),
            new google.maps.Point(0,0),
            new google.maps.Point(0, 32));
            var shadow = new google.maps.MarkerImage('../images/map/beachflag_shadow.png',
            new google.maps.Size(37, 32),
            new google.maps.Point(0,0),
            new google.maps.Point(0, 32));
            var shape = {
                coord: [1, 1, 1, 20, 18, 20, 18 , 1],
                type: 'poly'
            };

            for (var i = 0; i < locations.length; i++) {
                var point = locations[i];
                var myLatLng = new google.maps.LatLng(point[1], point[2]);
                var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                shadow: shadow,
                icon: image,
                shape: shape,
                title: point[0]
                });
            }
        }

        function hideMarkers(map, locations) {
            /* Remove All Markers */

            console.log("Remove All Markers");
        }
            </script> 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T08:25:01.923

我修改了你的代码。我将所有标记的引用保存在一个数组中。在 hideMarkers 中，我将他们的地图设置为 null 以将它们从地图中删除。

```
 function initialize() {
        var mapOptions = {
            zoom : 15,
            center : new google.maps.LatLng(52.429236, 6.281255),
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        var markers = setMarkers(map, access_points);

        google.maps.event.addListener(map, 'zoom_changed', function() {
            if (map.getZoom() > 15) {
                setMarkers(map, access_points);
            }
            else {
                hideMarkers(map, access_points, markers);

            }
        });

    }

    var access_points = [ [ 'Location 1', 52.420891, 6.280204 ], [ 'Location 2', 52.420125, 6.279131 ], [ 'Location 3', 52.420125, 6.240125 ] ];

    function setMarkers(map, locations) {
        var markers= [];
        var image = new google.maps.MarkerImage('../images/map/beachflag.png', new google.maps.Size(20, 32), new google.maps.Point(0, 0), new google.maps.Point(0,
                32));
        var shadow = new google.maps.MarkerImage('../images/map/beachflag_shadow.png', new google.maps.Size(37, 32), new google.maps.Point(0, 0),
                new google.maps.Point(0, 32));
        var shape = {
            coord : [ 1, 1, 1, 20, 18, 20, 18, 1 ],
            type : 'poly'
        };

        for ( var i = 0; i < locations.length; i++) {
            var access_point = locations[i];
            var myLatLng = new google.maps.LatLng(access_point[1], access_point[2]);
            var marker = new google.maps.Marker({
                position : myLatLng,
                map : map,
                shadow : shadow,
                icon : image,
                shape : shape,
                title : access_point[0],
                zIndex : access_point[3]
            }); 
            markers.push(marker);
        }
        return markers;
    }

    function hideMarkers(map, locations, markers) {
        /* Remove All Markers */
        while(markers.length){
            markers.pop().setMap(null);
        }

        console.log("Remove All Markers");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:24:22.627

最简单的方法可能是稍微修改您的代码，以便您的标记包含在一个数组中，`setMarkers`并且 和`hideMarkers`函数都可以访问该数组。然后，您可以使用[该类](https://developers.google.com/maps/documentation/javascript/reference#Marker)`setMap`的方法从地图中添加/删除标记（传递给以从地图中删除标记）：[`Marker`](https://developers.google.com/maps/documentation/javascript/reference#Marker)`null``setMap`

```
var markers = [];

function createMarkers(/* some args */) {
    // Create your markers, and add each one to the `markers` array
}

function setMarkers() {
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(yourMap); //Add the marker to the map
    }
}

function hideMarkers() {
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null); //Remove the marker from the map
    }
} 
```

这种方法还意味着您不必在`Marker`每次想要显示它们时都重新创建所有实例。

# visual-studio-2010 - 如何在 Visual Studio 2010（用于 C++）中设置滑块范围？

> ID：12526720
> 
> 赞同：0
> 
> 时间：2012-09-21T08:18:36.163
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

我是 Visual Studio 的新手，所以这个问题可能很简单，但我就是不知道如何设置滑块属性。我在我的程序中添加了一个滑块，以便用户可以设置用于某些计算的阈值。

不幸的是，滑块被固定为返回 0 到 100 之间的值。肯定有办法改变这个默认范围，对吧？

**编辑**如果项目在 C# 中，我可以轻松设置滑块范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:31:09.783

```
 SendDlgItemMessage(m_Dlg, IDC_SLIDER1, TBM_SETRANGE, 0, MAKELONG(0, 100)); 
```

其中 IDC_SLIDER1 是标识符。

# cross-domain - Camel JAX-RS 和跨域请求

> ID：12526724
> 
> 赞同：3
> 
> 时间：2012-09-21T08:18:50.853
> 
> 标签：cross-domain, cxf, jax-rs, apache-camel, cxfrs

我希望能够在我的本地 Camel 实例上执行 HTTP 请求（仅出于开发目的，我知道这是不好的做法）。现在，我坚持：

```
 Origin http://localhost:8000 is not allowed by Access-Control-Allow-Origin. 
```

我已经搜索了如何告诉 Camel 允许此类请求，但没有找到答案。我正在使用 camel-cxf 和 rsServer 创建我的端点。

我有一个看起来像这样的端点：

```
public class LoginEndpoint {
    @GET
    @Path(LOGIN)
    @Produces(MediaType.APPLICATION_JSON)
    public Customer login(@QueryParam("email") String email, @QueryParam("password") String password) {
        return null;
    }
} 
```

比标准路线更有效。

如何告诉 Camel（或 JAX-RS，或 CXFRS 组件，我不知道......）允许跨域请求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T08:29:06.090

您需要在端点上添加注释

```
@CrossOriginResourceSharing(allowAllOrigins = true, allowAnyHeaders = true)
public class LoginEndpoint {
    @GET
    @Path(LOGIN)
    @Produces(MediaType.APPLICATION_JSON)
    public Customer login(@QueryParam("email") String email, @QueryParam("password") String password) {
        return null;
    }
} 
```

我认为您不需要新的依赖项，因为注释位于 camel-cxf 中。但是您需要使用 providers 标签告诉 Camel 查找此注释。

```
<cxf:rsServer id="login" address="your adress"
        serviceClass="LoginEndpoint">
    <cxf:providers>
        <bean class="org.apache.cxf.jaxrs.cors.CrossOriginResourceSharingFilter" />
    </cxf:providers>
</cxf:rsServer> 
```

那么你应该没问题（但请记住，这仅用于本地测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T14:08:04.393

如果您使用的是 CXF 3.1.9，它位于 cxf-rt-rs-security-cors jar 中。

```
<jaxrs:server id="apiRS" address="/api">
    <jaxrs:serviceBeans>
            <bean class="com.ak.util.APIRSController"></bean>
    </jaxrs:serviceBeans>
    <jaxrs:providers>
        <bean class="org.apache.cxf.rs.security.cors.CrossOriginResourceSharingFilter" />
    </jaxrs:providers>
</jaxrs:server> 
```

和休息

```
@CrossOriginResourceSharing(allowAllOrigins = true)
public class APIController {

    @GET
    @Path("/status")
    public String status() {
        return "{\"Result\":\"OK\"}";
    }
} 
```

如需更多安全性，请参阅上述注释中的 allowOrigins 和其他参数。

# android - 将 android 音乐应用程序导入 Eclipse 工作区

> ID：12526732
> 
> 赞同：1
> 
> 时间：2012-09-21T08:19:13.853
> 
> 标签：android, eclipse, eclipse-adt

我下载了安卓[音乐资源](https://github.com/android/platform_packages_apps_music)来学习。本质上，我想在 Eclipse 中探索它。我尝试过导入 android 项目 - 它似乎没有在显然包含一个的文件夹中找到任何项目。当我尝试使用现有源创建新项目时，它会`The application name is shown in the PlayStore, as well in the Manage Application`在设置中显示列表。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:21:52.843

该项目存在，但它不是 Eclipse 项目。你不应该导入它，你应该这样做：

`New project > Android > Android project from from existing code`并指向您的文件夹

# mysql - MySQL 评分系统 - 从评分云中获取单个用户排名

> ID：12526734
> 
> 赞同：0
> 
> 时间：2012-09-21T08:19:27.060
> 
> 标签：mysql

我有一个游戏和用户的分数表，用户可以为每个游戏有很多分数：

```
USER    GAME    SCORE   TIMESTAMP
1       1       125     123456
2       1       120     123457
1       2       10293   123458
2       2       10253   123459
1       1       130     123460 
```

显然有更多的用户和游戏，但你明白了，我正在记录他们获得的每个分数并将其与时间戳一起存储，以获得特定时间范围内的分数。

我需要做的是让用户在游戏中获得个人排名，例如：

```
user 1 - game 1 - rank 1
user 2 - game 1 - rank 2 
```

但做一个查询

```
SELECT COUNT(DISTINCT user) 
FROM scores 
WHERE game = 1 
AND score > $user_2_score 
AND timestamp < $time_limit 
ORDER BY score DESC 
```

将用户排在第三位，因为用户 1 的分数比它高两个。我以为`COUNT(DISTINCT user)`可以解决问题，但由于某种原因它没有！

（显然我从另一个查询中获得了用户最高分并将其传递给这个查询）

有没有办法在 MySQL 中做到这一点，或者我可以使用更好的查询来获得更好的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:24:10.910

也许使用 GROUP BY 会更好：

```
SELECT user,game, SUM(score) AS scorer
FROM scores 
GROUP BY user, game
ORDER BY scorer DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:50:09.483

如果您想获得精确游戏的结果，那么您可以使用此查询 -

```
SELECT
  user,
  SUM(score) sum_score,
  @r:=@r + 1 rank
FROM
  scores, (SELECT @r:=0) t
WHERE
  game = 1
GROUP BY
  user
ORDER BY
  sum_score DESC; 
```

# internet-explorer - Internet Explorer 停止响应

> ID：12526736
> 
> 赞同：0
> 
> 时间：2012-09-21T08:19:39.377
> 
> 标签：internet-explorer

我正在运行一小段 javascript，它显示/隐藏大约 170 个表行。在 IE9 中，这会间歇性地导致浏览器“停止响应”并死机。我收到对话框说“Internet Explorer 已停止工作......”。

在 Chrome 中，它很好。该操作大约需要 1 秒才能完成（当它在 IE 中工作时需要 1-2 秒）。

我所做的就是在递归函数中调用这一行 170 次（id 是唯一标识每个表 tr 行的 guid）：

```
$("#" + id).css("display", "block"); 
```

如果我在显示行之间的代码中引入 1 毫秒的超时，那么它每次都有效！

```
setTimeout(function () { $("#" + id).css("display", "block"); }, 1); 
```

也尝试过 jquery show 方法。

我还在事件日志中收到如下错误：

错误应用程序名称：IEXPLORE.EXE，版本：9.0.8112.16448，时间戳：0x4fecf1b7 错误模块名称：MSHTML.dll，版本：9.0.8112.16448，时间戳：0x4fecfb0e 异常代码：0xc0000005 错误偏移：0x002cd4e6 错误进程 id：0x1764 错误应用程序启动时间：0x01cd9725ec072ed0 错误应用程序路径：C:\Program Files (x86)\Internet Explorer\IEXPLORE.EXE 错误模块路径：C:\Windows\system32\MSHTML.dll 报告 ID：721d0e53-03c5-11e2-98c9-005056c00008

有没有其他人在执行重复性任务时经历过这种行为？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T08:23:10.520

请不要使用递归函数，因为这是不好的做法，使用 setTimeout() 的代码中肯定存在一些内存泄漏，所以这可能是使用 IE 的原因。

# email - 将驻留在 Domino 服务器上的对象附加到电子邮件（首选 Lotusscript）

> ID：12526742
> 
> 赞同：0
> 
> 时间：2012-09-20T08:19:01.793
> 
> 标签：email, lotus-domino, attachment

*不确定这个问题是否更适合 ServerFault 或 StackOverflow，对不起，如果它应该属于其他地方！*

我正在开发一个应用程序，其中一个功能是自动发送带有附件的电子邮件。当对象驻留在本地或映射驱动器上时，我可以对应用程序进行编码以附加对象。

新手问题：有没有办法让对象驻留在 Domino 服务器上，并且仍然能够指向它并让应用程序自动附加和发送？有什么方法可以让我这样做吗？

用户无法直接访问服务器/文件系统，因此 Domino 服务器的映射驱动器是不可能的。

希望有人可以对这个问题有所了解。谢谢！

**编辑：**
为了更清楚，我将包含一些代码。

`'Attach reports here`
`Set EmbObj = Rtitem.EmbedObject(EMBED_ATTACHMENT,"", "T:\IS\Foo\Report_1.doc")`
`Set EmbObj = Rtitem.EmbedObject(EMBED_ATTACHMENT,"", "T:\IS\Foo\Graph.pdf")`

上面的代码将 2 个对象附加到电子邮件中，然后将其发送出去。它之所以有效，是因为我有一个映射驱动器（文件服务器映射到 T:)。但是，如果我想在 Domino 服务器上拥有 2 个对象（并且不允许映射驱动器），它将失败。

到目前为止，我尝试`Set EmbObj = Rtitem.EmbedObject(EMBED_ATTACHMENT,"", "\Report\Graph.pdf")`了哪个不起作用（我猜它仍在根据用户的环境解释 obj 的路径）。

我该如何让它在服务器上找到对象？我应该使用其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:59:44.760

当您的应用程序（我假设您是用 LotusScript 作为代理编写它？）在服务器上运行时，服务器的文件系统作为本地文件系统可见。所以附上文件就行了。如果您在 Notes 客户端上本地运行代理，则可以使用 agent.runOnServer 调用在服务器上运行部分代码。agent.runOnServer 也可以从 COM 调用（如果您不使用 LotusScript 或 Java）。

# algorithm - 估计具有大量参数的算法的良好参数（如 OpenCV 中的 MSER）

> ID：12526746
> 
> 赞同：0
> 
> 时间：2012-09-21T08:20:35.543
> 
> 标签：algorithm, opencv, parameters, mser

我想知道是否有更好的方法来估计具有大量参数的算法的一组好的参数，而不是随机选择它们。详细地说，我正在尝试为 MSER 特征检测器找到一些好的参数，它消耗 9 个数字参数，因此有很大的搜索空间。我正在考虑在默认参数值周围交替选择更小和更大的数字，距离呈指数增长。有什么好的想法可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T08:44:21.327

首先，您必须定义一个要最小化的目标函数——什么定义了“更好”的参数？在您的情况下，我建议使用找到的正确匹配项或类似项的数量。

其次，你必须有一种有效的方法来遍历几乎不可数的可能性。在这里，有一个最小的步长可能会有所帮助，超过该步长，结果不会发生有意义的变化。由于目标函数不一定是可导出的，我会分别在每个维度中使用类似于[黄金搜索](http://en.wikipedia.org/wiki/Golden_section_search)的方法，然后重复，直到希望达到全局“足够好”的最大值。

# grails - 将独立的 Solr 搜索服务器与 grails 域对象集成

> ID：12526747
> 
> 赞同：1
> 
> 时间：2012-09-21T08:20:45.170
> 
> 标签：grails, solr

我需要将独立的 Apache Solr 服务器集成到我的 grails 应用程序中。我知道有一个用于 grails 的 solr 插件，但它嵌入了 solr 服务器，并且该插件似乎没有得到积极维护。

我的主要问题是如何索引我的域对象中的字段。我想在创建/更新/删除我的域对象时更新索引。我想这可以通过 afterInsert/afterUpdate/afterDelete 事件来完成。但是必须有一些更聪明（=域对象中的代码更少）的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T14:39:58.953

您可以注册一个休眠事件侦听器，或使用像这样的事件发布/侦听机制 -> [http://grailsrocks.github.io/grails-platform-core/guide/events.html](http://grailsrocks.github.io/grails-platform-core/guide/events.html)

然后，当您的域对象发生更改时，只需使用 solr 插件在 solr 中更新它们

# php - 动态表和值

> ID：12526750
> 
> 赞同：0
> 
> 时间：2012-09-21T08:20:51.847
> 
> 标签：php

查询

```
 <script type="text/javascript" src="jquery-1.5.1.min.js"></script>
    <script type="text/javascript">
            $('#aggiungi').live('click', function(){
            var thisRow = $(this).parent().parent();

            // clone and add data
            thisRow.clone(true).insertAfter(thisRow).data('is_clone',true);
            $(this).val("-");
            $(this).attr("id","remove");

            var nextRow = thisRow.next();
            nextRow.find('input:not(#aggiungi)').val("");

            if (thisRow.data('is_clone')){
                while(thisRow.data('is_clone')){
                    thisRow = thisRow.prev();
                }
            }else{
                nextRow.children(":first").remove();
            }

            currRowSpan = thisRow.children(":first").attr("rowspan");
            thisRow.children(":first").attr("rowspan", currRowSpan+1);
        });

        $('#remove').live('click', function(){
            var thisRow = $(this).parent().parent(),
                prevRow = thisRow.prev();

            if (thisRow.data('is_clone')){
                while(prevRow.data('is_clone')){
                    prevRow = prevRow.prev();
                }
            }else{
                prevRow = thisRow.next()
                                 .removeData('is_clone')
                                 .children(":first")
                                 .before(thisRow.children(":first"))
                                 .end();
            }

            currRowSpan = prevRow.children(":first").attr("rowspan");
            prevRow.children(":first").attr("rowspan", currRowSpan-1);
            thisRow.remove();
        });

    </script> 
```

PHP

```
 <form action="grading.php" method="post">              
                              <table width-"100%" id="tableRealizzazione">
                                <tr>
                                    <th></th>
                                    <th style="padding:12px;text-align:center;">Personale</th>
                                    <th style="padding:12px;text-align:center;">Percentage</th>
                                    <th style="padding:12px;text-align:center;">Marketing point</th>
                                    <th style="padding:12px;text-align:center;">Add/Remove</th>
                                </tr>'; 

    echo '<tr class="even">
                                          <td></td>
                                          <td style="padding:12px;"><input type="text" value="" id="Personale" name="Personale"></td>
                                          <td style="padding:12px;">
                                            <input type="text" id="from" name="from" size="5%"> -
                                            <input type="text" id="to" name="to" size="5%"> %
                                          </td>
                                          <td style="padding:12px;"><input type="text" class="totaliCostiGestione" id="marketpt" name="marketpt"></td>
                                          <td style="padding:12px;"><input type="text" name="programid" value ="34" size="10%"></td>
                                          <td style="padding:12px;"><input type="button" value="+" id="aggiungi"/></td>';         
                                   echo '</tr>';
 echo '<tr><td><input type="submit" name="submit" value="submit"></td></tr>';                      
                 echo '</table>
               </form> 
```

当我填写所有文本框的值并单击提交时，它只打印最后一行和最后一行，值为 34，其余行不重复。

这是我在小提琴 [http://jsfiddle.net/gansai/PA9JF/中的代码](http://jsfiddle.net/gansai/PA9JF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:23:03.410

那是因为您必须从表单中创建数组：

例如：

```
<input type="text" id="from" name="from[]" size="5%"> - 
```

要克隆值，您必须添加：

```
newRow = thisRow.clone(true).insertAfter(thisRow).data('is_clone',true);
$(newRow+"[name^=programid]").val($(thisRow+"[name^=programid]").val()); 
```

喜欢这个[JSFiddle](http://jsfiddle.net/DjddU/)

然后在 PHP 中：

```
foreach($_POST['marketpt'] as $num => $val){
    $Personale = $_POST[$num]['Personale'];
    $from = $_POST[$num]['from'];
    $to = $_POST[$num]['to'];
    $marketpt = $_POST[$num]['marketpt'];
    $programid = $_POST[$num]['programid'];
    // process variables, eg: insert in database
} 
```

# android - 在水平和垂直方向上在图像上绘制矩形

> ID：12526751
> 
> 赞同：1
> 
> 时间：2012-09-21T08:20:55.477
> 
> 标签：android, imageview

我想在水平和垂直方向的图像上绘制一个矩形，就像一个网格一样。我可以使用网格，但是当我平移（拖动）图像时，这将不起作用。矩形还应随图像平移或随图像移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:26:55.933

最简单的方法应该是在一个框架布局中拥有一个将您想要的形状和图像一起绘制的视图。

然后你应该移动两个视图的布局而不是单独的视图。

# objective-c - 目标 c - 将 mpmediaitem 转换为 ogg vorbis

> ID：12526754
> 
> 赞同：2
> 
> 时间：2012-09-21T08:21:02.507
> 
> 标签：objective-c, ios, xcode, ogg, mpmediaitem

我找到了（自定义我找到的方法）一种转换 MpMediaItem 并获取 mp3 文件的方法。可能这不是最好的方法，但它正在工作。

有没有办法获得 *.ogg 文件而不是 *.mp3 ？什么是正确的方法？

这是我用来获取 *.mp3 文件的方法：

```
 -(void)exportMP3:(NSURL*)url toFileUrl:(NSString*)fileURL
{
    AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:url options:nil];
    AVAssetReader *reader=[[AVAssetReader alloc] initWithAsset:asset error:nil];
    NSMutableArray *myOutputs =[[NSMutableArray alloc] init];
    for(id track in [asset tracks])
    {
        AVAssetReaderTrackOutput *output=[AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:track outputSettings:nil];
        [myOutputs addObject:output];   
        [reader addOutput:output];
    }
    [reader startReading];
    NSFileHandle *fileHandle ;
    NSFileManager *fm=[NSFileManager defaultManager];
    if(![fm fileExistsAtPath:fileURL])
    {
        [fm createFileAtPath:fileURL contents:[[NSData alloc] init] attributes:nil];
    }else{
        NSURL *url = [NSURL URLWithString:fileURL];
        [fm removeItemAtURL:url error:nil];
        [fm createFileAtPath:fileURL contents:[[NSData alloc] init] attributes:nil];

    }
    fileHandle=[NSFileHandle fileHandleForWritingAtPath:fileURL];    
    [fileHandle seekToEndOfFile];

    AVAssetReaderOutput *output=[myOutputs objectAtIndex:0];
    int totalBuff=0;
    int test = 1;
    while(test == 1)
    {
        CMSampleBufferRef ref=[output copyNextSampleBuffer];

        if(ref==NULL)
            test = 0;

        if(ref==NULL)
            break;
        //copy data to file
        //read next one
        AudioBufferList audioBufferList;
        NSMutableData *data;
        CMBlockBufferRef blockBuffer;
        CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(ref, NULL, &audioBufferList, sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);

        for( int y=0; y<audioBufferList.mNumberBuffers; y++ )
        {
            AudioBuffer audioBuffer = audioBufferList.mBuffers[y];
            void *frame = audioBuffer.mData;

            data = [[NSMutableData alloc] initWithBytes:frame length:audioBuffer.mDataByteSize];
        }
        totalBuff++;
        NSLog(@"\n%d\n",totalBuff);

        int time = [self.mediaPlayer durationOfCurrentItem];

        if (totalBuff * 2 <= time + 1)        
            [fileHandle writeData:data];

    }
    [fileHandle closeFile];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:26:44.933

您可以使用[libvorbis](http://xiph.org/vorbis/)将 PCM 数据编码为 Vorbis。

# css - CSS 规则在 IE7 和 IE8 中的行为不同

> ID：12526756
> 
> 赞同：0
> 
> 时间：2012-09-21T08:21:07.807
> 
> 标签：css, internet-explorer

我在 IE7 和 IE8 上遇到了一个奇怪的问题，下拉菜单项在悬停时会跳来跳去——悬停在级联到子菜单项的顶级菜单项上会应用一些负边距规则。基本上，下拉菜单覆盖了 Twitter 引导程序中的一些样式，这些样式在*app.css*应用自定义样式之前包含。

这段代码是罪魁祸首，我似乎无法在不丢失我需要的顶级项目的样式的情况下覆盖它：

```
.navbar .nav > li > a:focus,
.navbar .nav > li > a:hover,
.navbar .nav > li.active > a,
.navbar .nav li.dropdown.open > .dropdown-toggle {
    height: 12px;
    margin-top: -10px;
    padding-top: 10px;
} 
```

这是一个[演示链接][1]（目前只有退出菜单样式是问题，我意识到顶级项目不是很清晰！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:50:27.117

只需将规则更改为此（基本上在 下添加后代选择器`.nav`）：

```
.navbar .nav > li > a:focus,
.navbar .nav > li > a:hover,
.navbar .nav > li.active > a,
.navbar .nav > li.dropdown.open > .dropdown-toggle {
    height: 12px;
    margin-top: -10px;
    padding-top: 10px;
} 
```

IE

```
.navbar .nav li.dropdown.open > .dropdown-toggle { 
```

变成：

```
.navbar .nav > li.dropdown.open > .dropdown-toggle { 
```

# c++ - VS2010 的解决方法：模板和重载函数

> ID：12526760
> 
> 赞同：3
> 
> 时间：2012-09-21T08:21:29.663
> 
> 标签：c++, templates, visual-c++, overloading

我的代码是用 mingw/g++ 编译器完美构建的，但 MSVC (2010) 遇到错误。问题是重载的函数和模板。可能有人知道 MSVC 的解决方法吗？如果不存在解决方法（证明链接不可用），它也会回答。

代码示例：

```
#include <iostream>

struct Function 
{
    virtual ~Function() {}
    virtual void operator()() = 0;
};

template <typename Class, typename ARG1>
struct MemberFunction1 : public Function
{
    typedef void (Class::*MEM_FUNC)(ARG1);
    explicit MemberFunction1(Class * obj, MEM_FUNC func, ARG1 arg1) :  m_object(obj), m_func(func), m_arg1(arg1) {}

    virtual void operator()()
    {
        (m_object->*m_func)(m_arg1);
    }

    Class *  m_object;
    MEM_FUNC m_func;    
    ARG1     m_arg1;
};

struct FunctionStorage
{
    explicit FunctionStorage(Function * func) : m_func(func) {}

    virtual ~FunctionStorage()
    {
        if (m_func)
        {
            delete m_func;
            m_func = 0;
        }
    }

    void call() { (*m_func)(); }
    Function * m_func;
};

struct MemberFunction : public FunctionStorage
{
    template <typename Class, typename ARG1>
    MemberFunction(Class * obj, void (Class::*func)(ARG1), ARG1 arg1) : FunctionStorage(new MemberFunction1<Class, ARG1>(obj, func, arg1)) {}
};

class Foo 
{
public:
    void funcWithParam(int value)
    {
        std::cout << "foo::funcWithParam(" << value << ")\n";
    }
    void funcWithParam(const char * msg)
    {
        std::cout << "foo::funcWithParam(" << msg << ")\n";
    }
};

int main()
{
    Foo f;    
    MemberFunction(&f, &Foo::funcWithParam, 5).call(); // problem here, if remove one of funcWithParam (stay only 1 function, no overload) all will be ok
    MemberFunction(&f, &Foo::funcWithParam, "hello").call(); 
    return 0;
} 
```

我的输出：

```
main.cpp(65): error C2660: 'MemberFunction::MemberFunction' : function does not take 3 arguments
main.cpp(65): error C2228: left of '.call' must have class/struct/union
main.cpp(66): error C2660: 'MemberFunction::MemberFunction' : function does not take 3 arguments
main.cpp(66): error C2228: left of '.call' must have class/struct/union 
```

[这是ideone](http://ideone.com/ECi7e)构建结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:56:47.647

`Foo::funcWithParam`match `void (Class::*func)(ARG1)`in的两个重载`MemberFunction(Class * obj, void (Class::*func)(ARG1), ARG1 arg1)`，因此第二个参数类型不明确：编译器无法确定 ARG1 是`int`还是`const char *`。

有趣的是，如果您在模板化构造函数中反转参数的顺序，即使其如下所示： `MemberFunction(Class * obj, ARG1 arg1, void (Class::*func)(ARG1) )`并将您的调用站点更改为： `MemberFunction(&f, 5, &Foo::funcWithParam)` 它将起作用。编译器首先遇到第二个参数，从中推断出类型 ARG1 is `int`。然后它继续到第三个参数，因为它现在知道 ARG1 是`int`，它知道要选择 &Foo::funcWithParam 的哪个重载。

我不确定在这种情况下标准规定的行为应该是什么，但其中一个编译器肯定有一个错误，很可能是 VS2010。

# jquery - 如何更改一行而不是所有行的背景颜色？

> ID：12526762
> 
> 赞同：2
> 
> 时间：2012-09-21T08:21:35.607
> 
> 标签：jquery

我有一个带类的表格行`trhlite`

```
"<tr class='trhlite'; bgcolor='".$color."'; onMouseOver=\"this.bgColor='pink';\"   
onMouseOut=\"this.bgColor='".$color."';\" id=\"row"."\">"; 
```

Onclick 每行中的一个按钮，它必须改变整行的颜色。

但我的 jQuery 更改了表中的所有行：

```
var id = id;

$.ajax({
    url: "<?php echo $this->address .'feedback/postflag'?>",
    type: 'POST',
    data: "id=" + id,
    success: function (data) {
        var index = parseFloat(id);
        // alert(index);            
        $(".trhlite").css("background-color", "yellow");
    }
}) 
```

我应该如何更改它以使其仅更改特定行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:26:59.317

```
$(".trhlite .buttonSelector").click(function() {
    $(this).parent(".trhlite").css("background-color","yellow");
}); 
```

没有测试，但应该可以。（替换`.buttonSelector`为按钮的类，或使用语义术语（如：）`input`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:25:24.217

在 jQuery 中，`$(".trhlite")`用作选择器时，将匹配所有具有 trhlite 类的元素。要使其仅适用于一行，您需要一种方法来唯一地识别受影响的行，然后访问该行以更改其背景！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:25:35.823

$(".trhlite").css("背景色","黄色"); 表示任何具有类 trhlite 的对象都将具有黄色的 bgcolor。

尝试为类的每一行添加唯一值，例如 trhlite1 trhlite2 或其他内容，以便您可以单独更改 bgcolors。

我很乐意提供更多帮助，但我无法使用您提供的信息。

也许添加所有的 js 代码会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:26:41.190

试试下面的代码，它可能是你想要实现的。

```
$(document).ready(function() {
   $("someTableSelector").find("tr:gt(0)").each(function(){
        $(this).css('background-color','#000000');
  })
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T08:26:46.757

您不应该在 HTML 中的属性之间添加分号。但是您的问题可能是因为所有行共享相同的 ID，应该是不同的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T08:30:08.477

看我的例子：[jsfiddle.net/ntvYq/](http://jsfiddle.net/ntvYq/)

```
$('#mytable').on('click', 'tr', function(){
    $(this).css("background-color","yellow");
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T08:30:37.273

您在函数中传递选择器并使用类似

```
function change_bg(this)
{
  $(this +".trhlite").css("background-color","yellow");
} 
```

# php - 这个 PHPUnit 测试是否有意义（或者我正在测试框架/PHP）？

> ID：12526763
> 
> 赞同：4
> 
> 时间：2012-09-21T08:21:37.103
> 
> 标签：php, unit-testing, testing, phpunit

我只是从 PHPUnit 和 TDD 开始。

其中，我无法真正回答这个问题：*这是一个很好的测试吗？我实际上是在测试我的代码还是已经测试过的东西（即框架或 PHP 本身）？*

小例子，这是测试对象：

```
class DateMax extends Constraint
{
    /**
     * @var string
     */
    public $limit;

    /**
     * @var string
     */
    private $invalidLimit = 'Option "limit" should be a valid date/time string.';

    public function __construct($options = null)
    {
        parent::__construct($options);

        if(false === strtotime($this->limit)) {
            throw new InvalidOptionsException($this->invalidLimit, ['limit']);
        }
    }
} 
```

我想测试`InvalidOptionsException`通过无效“限制”选项时的预期，否则`$constraint->limit`保持正确的值：

```
/**
 * @dataProvider getInvalidLimits
 * @expectedException InvalidOptionsException
 */
public function testInvalidLimits($testLimit)
{
    new DateMax($testLimit);
}

/**
 * @dataProvider getValidLimits
 */
public function testValidLimits($testLimit)
{
    $constraint = new DateMax($testLimit);
    $this->assertEquals($testLimit, $constraint->limit);
}

/**
 * @return array[]
 */
public function getInvalidLimits()
{
    return array(array('invalid specification'), array('tomorr'));
}

/**
 * @return array[]
 */
public function getValidLimits()
{
    return array(array('now'), array('+1 day'),array('last Monday'));
} 
```

所以**问题是**这是否有意义或者我正在测试框架/ PHP 本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:56:38.913

当然它是有道理的，因为你重写了 Constraint 类的构造函数，并且你可能会破坏它里面的东西。因此，基于您的构造函数逻辑，您基本上想测试两件事：

1.  检查您是否使用相同的选项调用父级的构造函数，恰好一次（您可以为此目的使用模拟，您不关心设置适当的限制值，因为这应该在约束类中进行测试）
2.  检查当限制具有错误值时是否引发了适当的异常（例如空）

**编辑：**第一次测试有用的一些用例可能是这个：

假设您想以这种方式扩展 DateMax 构造函数：

```
public function __construct($options = null)
{
    $this->optionsWithDecrementedValues = $this->doWeirdThings($options);

    parent::__construct($options);

    if(false === strtotime($this->limit)) {
        throw new InvalidOptionsException($this->invalidLimit, ['limit']);
    }
} 
```

但是例如，您没有注意到方法“doWeirdThings”将引用作为参数。所以实际上它改变了 $options 的值，这是你没想到的，但是第一次测试失败了，所以你不会错过它。

# android - 谷歌云消息

> ID：12526767
> 
> 赞同：0
> 
> 时间：2012-09-21T08:21:53.213
> 
> 标签：android

请告诉我 - 我应该在哪里写这段代码？

```
import com.google.android.gcm.server.*;

Sender sender = new Sender(myApiKey);
Message message = new Message.Builder(regId).build();
Result result = sender.send(message, 5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:28:26.837

您是否检查过 Developer Android 中的 GCM 演示应用程序？[这](http://developer.android.com/guide/google/gcm/demo.html)是链接。你会找到一个演示应用程序并检查他们是如何做到的，然后你就可以看到你错在哪里了。希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:36:57.433

您甚至可以从简单的 Java 控制台应用程序中使用此代码。

```
public static void main(String[] args){
   Sender sender = new Sender(myApiKey);
   Message message = new Message.Builder(regId).build();
   Result result = sender.send(message, 5);
} 
```

必要的库：`gcm-server.jar`, `json_simple-1.1.jar`, `junit.jar`, `mockito-all-1.8.5.jar`.

# matlab - matlab绘制图形。特别是像 <=10 这样的条件图

> ID：12526769
> 
> 赞同：-3
> 
> 时间：2012-09-21T08:21:58.230
> 
> 标签：matlab, matlab-figure

我想在 matlab 中绘制图形，但我不知道如何在 matlab 中对其进行编程。我正面临问题。

```
gone = -xone-xtwo+10<=0; 
gtwo = -2*xone+3*xtwo-10<=0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:34:06.110

您听起来像是 matlab 的新手，所以与其尝试“编程”图形，不如尝试使用提供的用户界面？

请执行下列操作：

1.  在您的工作区中，右键单击要绘制图表的变量。

2.  点击地块目录。

3.  选择所需的图表类型，然后单击绘图。

更好的是，如果您想了解如何实际使用代码来构建您现在拥有的绘图，只需转到生成绘图的窗口，然后单击文件 - 生成代码。

# servlets - java.lang.NoClassDefFoundError: java/util/Objects

> ID：12526772
> 
> 赞同：0
> 
> 时间：2012-09-21T08:22:13.973
> 
> 标签：servlets, primefaces, classnotfoundexception

我不断收到来自 glassfish 的错误消息。我正在netbeans上聊天。我试过谷歌，大多数解决方案都是设置类路径。但这并没有解决我的问题:(虽然我的朋友设法在他的系统上运行

我正在使用 Log4J 和 primefaces。

```
WARNING: java.lang.NoClassDefFoundError: java/util/Objects
javax.el.ELException: java.lang.NoClassDefFoundError: java/util/Objects
    at com.sun.el.parser.AstValue.invoke(AstValue.java:258)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:47)
    at org.primefaces.event.SelectEvent.processListener(SelectEvent.java:40)
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:760)
    at org.primefaces.component.autocomplete.AutoComplete.broadcast(AutoComplete.java:334)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: java/util/Objects
    at entity.pojo.SimpleUser.hashCode(SimpleUser.java:132)
    at java.lang.Object.toString(Object.java:219)
    at java.lang.String.valueOf(String.java:2826)
    at java.lang.StringBuilder.append(StringBuilder.java:115)
    at managedbean.chat.ChatBean.changeUser(ChatBean.java:319)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    ... 36 more
Caused by: java.lang.ClassNotFoundException: java.util.Objects
    at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)
    at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:696)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    ... 46 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:35:41.657

您可能使用 Java 7 的方法`hashCode()`在该类中实现，并在不包含该类的 Java 6 VM 上运行该类。`SimpleUser`[`Objects.hash()`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html)

# java - jar运行时如何防止InvocationTargetException？

> ID：12526773
> 
> 赞同：2
> 
> 时间：2012-09-21T08:22:14.530
> 
> 标签：java, eclipse, docx4j, invocationtargetexception

我遇到了一个奇怪的（至少对我来说）案例。当我从 Eclipse 运行我的项目时，一切都很好。但是，当我将项目导出到 jar 文件时，它会因*InvocationTargetException*而失败。我正在使用其他外部库，一切运行良好（程序运行时间约为 5 分钟），最后会创建一个 docx。

```
try {
  WordprocessingMLPackage wordMLPackage;
  wordMLPackage = WordprocessingMLPackage.createPackage(); // this is Line 1320
  // more lines here
} catch (Exception e) {
  e.printStackTrace();
} 
```

我在 cmd 中运行，它打印：

> 线程“主”java.lang.reflect.InvocationTargetException 中的异常
> 
> 引起：java.lang.ExceptionInInitializerError
> 
> 在 com.lesswire.wita.Wita.CreateReport(Wita.java:1320)

**我怎样才能让它在我的罐子里工作？**

谢谢，龙萨克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:26:45.090

我认为这是您的应用程序的类路径问题。检查 Eclipse 类路径（在您的项目属性中）并将它与您在 Eclipse 之外运行应用程序时设置的类路径进行比较。`com.lesswire.wita`最可能的罪魁祸首是包含该包或其依赖项之一的第三方库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:41:54.650

毕竟，这个 bug 的主要原因与 @alexei-kaigorodov 猜测的 Log4jConfigurator 相关。但！log4j 已配置，但不适用于 docx4j！我在网上搜索了 logj.xml 文件，并尝试了一些。

这是它的完成方式：

在 Eclipse 中，确保 log4j.xml 位于类文件夹中（通常将其称为 CLASS PATH）。如果你不想放在那里，你可以创建并设置一个。在 Eclipse 中打开*Java Build Path*并导航到*Libraries*选项卡。然后选择“添加类文件夹”并选择新创建的文件夹。

由于某种原因，当我进行*Clean Build*时，log4j.xml 被覆盖。确保您的 logj4.xml 在*Clean*之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T13:52:03.710

另一种可能性是应用程序正在使用依赖于较新 JRE 版本的库，但您安装的 JRE（操作系统路径环境中的 java.exe）是旧版本。

# c# - 使用函数传递的自定义类型创建字典 C#

> ID：12526774
> 
> 赞同：0
> 
> 时间：2012-09-21T08:22:23.300
> 
> 标签：c#, dictionary

我想创建一个字典，其中 TKey 作为字符串，TValue 来自编译时不知道的类型。

比如说我有一个函数

```
 createDict(Type type)
 {
     Dictionary<string, {here's the type from the func. argument}> dict = new Dictionary..

 } 
```

这种情况是否可能，或者我错过了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:29:18.483

如果您将类型作为参数传递，则可以完成：

```
var dictionaryType = typeof(Dictionary<,>).MakeGenericType(typeof(string),type);
var dictionary = (IDictionary)Activator.CreateInstance(dictionaryType); 
```

由于您对插入该词典的内容的正确性负全部责任，因此使用此类词典将更加困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:27:20.223

使方法通用：

```
public void CreateDict<T>()
{
    Dictionary<string,T> dict = new Dictionary<string,T>();

} 
```

尽管您可能希望返回类型也是`Dictionary<string,T>`，并将约束添加到泛型类型参数。

你可以这样称呼它：

```
CreateDict<MyCustomType>(); 
```

以上假设可以在编译期间传入类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T08:27:36.497

你可以做一些反思：

```
Type dict = typeof (Dictionary<,>);
Type[] parameters = {typeof (string), type};
Type parametrizedDict = dict.MakeGenericType(parameters);
object result = Activator.CreateInstance(parametrizedDict); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T08:29:13.500

所有实例和类都是对象，所以为什么不进行`Dictionary<string,object>`转换，并且您确实像在 MVC、Session 或 Cache 中使用 ViewData 一样进行转换，所有这些都需要转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T08:29:33.053

如果类型在编译时已知，则使用泛型：

```
void Main()
{
    var dict = CreateDict<int>();
    dict["key"] = 10;
}

Dictionary<string, T> CreateDict<T>()
{
    return new Dictionary<string, T>();
} 
```

如果没有，请重构以使用基本类型或接口，例如：

```
var dic = new Dictionary<string, IMyType>(); 
```

其中 IMyType 公开了您希望保留在字典中的类型的共同特征。

只有作为最后的手段，我才会考虑反思。

# android - 在 Android 上的 Google 日历中添加多个事件

> ID：12526776
> 
> 赞同：2
> 
> 时间：2012-09-21T08:22:45.230
> 
> 标签：android, android-intent, calendar, notifications

我正在编写处理呼叫结束的 ab android 应用程序：

*   当您挂断时，它会发送通知

*   如果您单击该通知，它会将您带到 Google 日历的新活动用户界面，

*   字段标题填写联系人的电话号码或姓名。

我的问题是：

如果您被号码 +442070313000 呼叫 -> 弹出通知，并且当您单击时，它会创建一个标题为 +442070313000 的事件

但是如果然后号码 666 呼叫 - > 通知弹出，但日历事件填充号码 +442070313000！

我调试了应用程序，传递给谷歌日历的意图是好的。但它似乎只保留第一个意图而忽略其他意图

这是处理事件的代码：

```
package com.amos.addincalendar.facade;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;

public class CallReceiverIncoming extends BroadcastReceiver {

    String LOG_TAG = "CallReceiver";
    String EVENT_TYPE_PHONE_STATE_CHANGED = "phone state changed";
    private static int MIN_TOTAL_TIME = 0;
    static String LOG_TAG = "CallReceiver";

    TelephonyManager tm;
    private String sPhoneNumber = "";
    private boolean bAgenda = false;
    private long lStartTime;
    private long lEndTime;

    private void onReceivePhoneStateChanged(final Context context,
              final Intent intent) {

        final String phoneState = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

        final StringBuilder sb = new StringBuilder();

        if (TelephonyManager.EXTRA_STATE_IDLE.equals(phoneState)) {
            Log.d(LOG_TAG, "event : idle");
            bAgenda = true;
            lEndTime = System.currentTimeMillis();
        } else if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(phoneState)) {
            Log.d(LOG_TAG, "event : offhook");
            bAgenda = true;
            lEndTime = System.currentTimeMillis();
        } else if (TelephonyManager.EXTRA_STATE_RINGING.equals(phoneState)) {
            Log.d(LOG_TAG, "event : ringing");
            lStartTime = System.currentTimeMillis();
        }

    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        if(null == bundle){
            return;         
        }

        final String action = intent.getAction();
        sPhoneNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);

        if (TelephonyManager.ACTION_PHONE_STATE_CHANGED.equals(action)) {
            onReceivePhoneStateChanged(context, intent);
        } else {
            final String data = intent.getDataString();

            Log.v(LOG_TAG, "broadcast : action=" + action + ", data=" + data);
        }

        if(!bAgenda){
            CallReceiver.agendaFishAndChips(context, sPhoneNumber, lStartTime, lEndTime);
        }

    }

    public static void agendaFishAndChips(Context context, String sPhoneNumber, long lStartTime, long lEndTime){

        StringBuilder sbTitleEvent  = new StringBuilder();
        StringBuilder sbDescription = new StringBuilder();
        StringBuilder sbAddress     = new StringBuilder();
        StringBuilder sbName        = new StringBuilder();

        if(sPhoneNumber != null && !sPhoneNumber.equals("")){
            sbTitleEvent.append(sPhoneNumber);

            CallReceiver.sendNotificationAgenda(context, sbTitleEvent.toString(), sbAddress.toString(), sbDescription.toString(), sPhoneNumber, sbName.toString());

        }
    }

    public static String getCaracteresNumeriques (String chaine){
        String sChaineNumerique = "";

        Matcher matcher = Pattern.compile("[0-9]*").matcher(chaine);
        while ( matcher.find() ) {
            sChaineNumerique += matcher.group();
        }
        return sChaineNumerique;
    }

    /*
     * Send a notification and add event in agenda
     */
    public static void sendNotificationAgenda(Context context, String sTitleEvent, String sAddress, String sDescription, String sPhoneNumber, String sName){
        NotificationManager notificationManager;
        notificationManager = (NotificationManager) context.getSystemService(context.NOTIFICATION_SERVICE);

        sName = (sName != null && !sName.equals("") ? sName : sPhoneNumber);
        String sNotificationTitle = "Rendezvous with "+ sName;
        Notification notification = new Notification(R.drawable.ic_launcher, sNotificationTitle, System.currentTimeMillis());

        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.defaults |= Notification.DEFAULT_LIGHTS;

        Log.d(LOG_TAG, sName + " : " + getCaracteresNumeriques(sPhoneNumber));

        Log.d(LOG_TAG, sTitleEvent);

    //Create the google event intent
    Intent intentNotification = new Intent(Intent.ACTION_EDIT);
        intentNotification.setType("vnd.android.cursor.item/event");

        intentNotification.putExtra("title", sTitleEvent);
        intentNotification.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    Bundle objetbunble = new Bundle();
    objetbunble.putString("TitleEvent"  , sTitleEvent);
    objetbunble.putString("Address"     , sAddress);
    objetbunble.putString("Description", sDescription);
    intentNotification.putExtras(objetbunble);

        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intentNotification, 0);
        notification.setLatestEventInfo(context,
                    sNotificationTitle,
                    context.getText(R.string.notification_new_rdv) + " " + sName,   pendingIntent);
        notificationManager.notify( Integer.parseInt(getCaracteresNumeriques(sPhoneNumber)), notification);

    }

    @Override
    protected void finalize() throws Throwable {
        super.finalize();
        sPhoneNumber = "";
    }
} 
```

这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.amos.addincalendar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR"/>
    <uses-permission android:name="android.permission.READ_CALENDAR"/>
    <uses-permission android:name="android.permission.WRITE_SMS"/>
    <uses-permission android:name="android.permission.SET_DEBUG_APP"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.DeviceDefault" >

          <activity
            android:name=".action.CalendarMain"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".facade.CallReceiverIncoming">
            <intent-filter> 
                <category android:name="android.intent.category.DEFAULT" />
                <action android:name="android.intent.action.PHONE_STATE"/>
            </intent-filter> 
        </receiver>

        <activity android:name=".dao.CalendarDAO"></activity>
        <activity android:name=".facade.CallReceiver"></activity>
        <activity android:name=".facade.CallActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen"></activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:01:40.363

我认为在这种情况下，您必须为每个 PendingIntent 提供一个唯一的 ID。尝试将 0 替换为

```
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intentNotification, 0); 
```

具有唯一 ID（可能是电话号码？）。如果您为每个 PendingIntent 提供相同的编号，则将读取相同的意图（发送的第一个）。

# ruby - Eclipse 中的 Rails 1.9.3 语法高亮

> ID：12526777
> 
> 赞同：3
> 
> 时间：2012-09-21T08:22:45.793
> 
> 标签：ruby, eclipse, dltk

我是 Rails 新手，需要让我的 Eclipse DLTK 突出显示工作。

它偶尔会给出`syntax error, unexpected ':'`哈希冒号表示法。虽然应用程序运行良好。

我正在使用 Eclipse Indigo 和 Ruby 开发工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T04:10:26.933

所以，不幸的是，这仍然是 Eclipse 中的一个问题，它让我发疯。

Eclipse DLTK 项目（适用于 Indigo 和 Juno）和适用于 Eclipse 的 Aptana Studio 插件都有这个问题。这是相关的错误，仍然开放且未解决：

1) [https://bugs.eclipse.org/bugs/show_bug.cgi?id=386350](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386350)

2) [http://jira.appcelerator.org/browse/APSTUD-4405](http://jira.appcelerator.org/browse/APSTUD-4405)

这足以让我克服通常的切换 IDE 惯性，所以我目前正在评估 RubyMine（它没有语法错误问题，因为我刚刚测试过，并且从我能够阅读的所有内容来看，它是一个出色的 Ruby IDE） .

**[编辑]**对于它的价值，我还刚刚在 dltk.ruby github repo 上提交了一个针对这个问题的补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T23:30:36.543

截至今天，我最喜欢 Idodds 的回答：使用 DLTK 5.0，这似乎是（适度）维护和（适度）功能的唯一选择。我不得不爬过一些令人讨厌的互联网来找到“如何实际安装 DLTK 5.0”的答案，因为所有搜索结果都会将您发送到最多为您提供 DLTK 2.0 的更新站点。我终于找到了这个，这是我在较新的 eclipse luna 上获得 5.0 时遇到的最好的（比 Idodds 详细介绍的 Kepler 更新）：

[http://download.eclipse.org/technology/dltk/updates-dev/5.0/](http://download.eclipse.org/technology/dltk/updates-dev/5.0/)

当我使用该更新站点时（并取消选择“分组显示”，因为他们错误配置了此插件）。然后我只选择了我想要的两个选项：“Ruby 开发工具”和“Ruby 开发工具 SDK”（这又需要核心插件）。请注意：我还非常确定地确认“版本”看起来像“5.*”，它在这个网站上做了（而且在其他网站上肯定没有）。

![在此处输入图像描述](../Images/135d95ae537bf7a11bcaaaf3273bbd3c.png)

PostScript：另外两个：

RDT：我已经使用 RDT 将近一年了，成功率约为 0。它在语法高亮方面做了一个适度的工作，但它在 ruby​​ 1.9 语法上做了一个全面的崩溃和刻录工作。我希望互联网/谷歌将 RDT 标记为已弃用：支持 ruby​​ 1.8 及更早版本的插件确实不应该列在当前的“ruby”搜索结果中。

Aptana 得到了一些非常好的新闻，也有一些非常糟糕的新闻。我应该尝试一下，因为我需要 Rails 不仅仅是 ruby​​，而且坏消息似乎很全面，所以我避免了它。我尝试了几次都失败了，但是当然任何非 java 的 eclipse 插件都可能需要几天才能工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T09:55:28.647

这似乎现在已经基本解决了。我遇到的主要问题是新的哈希键语法。

使用 Eclipse Kepler 和 DLTK 5.0，错误更少。语法检查器似乎很严格，但现在可以使用。

使用 Kepler 版本，请确保在“安装新软件”中添加以下内容作为存储库：

[http://download.eclipse.org/releases/kepler](http://download.eclipse.org/releases/kepler)

然后安装 DLTK 5.0。与 Kepler 捆绑在一起的存储库似乎没有引用最新的 DLTK 版本，这就是为什么这个问题看起来没有修复的原因。

# mysql - 想在 Mysql 中为两个不同的数据库编写触发器

> ID：12526780
> 
> 赞同：3
> 
> 时间：2012-09-21T08:23:00.660
> 
> 标签：mysql

有什么方法可以在 Mysql 中的两个不同数据库上创建触发器？我的要求是：-

```
database: test1 -> table: tmp1
database: test2 -> table: tmp2 
```

现在我必须在 test1 上使用触发器插入操作发生在 tmp1 上，一个值必须插入到 test2 数据库的 tmp2 中。还有一句反话。即在 test2 数据库的 tmp2 表上再触发一个，如果插入到 tmp2 然后插入到 test1 数据库的 tmp1 表中。

我曾尝试在两者上编写触发器，但我认为它将进入循环以插入其他表。

```
DELIMITER $$
CREATE TRIGGER trigger_ad_t1 AFTER insert ON `test1`.tmp1 
FOR EACH ROW
Begin
  INSERT INTO `test2`.tmp2 VALUES (NEW.employeeNumber,New.fname,New.lname)
END$$
DELIMITER ; 
```

插入到 tmp2 表后，为插入到 tmp1 写入的相同类型的触发器。

还有一件事我在我的本地电脑上测试了这个触发器，它有 mysql 5.1.63，但是当我在我的测试服务器上尝试这个触发器时，它有 mysql 5.0.45，然后它给了我语法错误（1064）。不知道是什么问题？

更新：

![带分隔符](../Images/7c0c86d5e71ec902d258cff467e30c6b.png) ![没有分隔符](../Images/c198d86211c0033575504d7751edbb4d.png)

谁能帮我摆脱它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:26:49.430

在触发器中使用完全限定的表名。
即
`db1.test1.*`和`d2.test2.*`

PS 在再次查看您的 SQL 之后，我意识到您**已经**在执行上述操作。

编辑：评论字段是对邮政编码的限制，所以这是防止无限插入循环的方法（假设员工编号是唯一键）：

编辑代码：

```
IF NOT EXISTS(SELECT employeeNumber FROM otherDB.otherTable WHERE employeeNumber = NEW.employeeNumber) THEN
INSERT INTO otherDB.otherTable VALUES (NEW.employeeNumber,New.fname,New.lname)
END IF; 
```

最初提供的代码中需要更正： `... EXISTS(SELECT * FROM otherDB.otherTable ...)`替换为
`... EXISTS(SELECT employeeNumber FROM otherDB.otherTable ...)`
原因是第一个查询将始终返回`true`，因为内部查询`SELECT * FROM ...`始终返回一条包含结果数的记录 =>
`EXISTS(SELECT * FROM ...)`始终`true`

# delphi - Delphi如何解决带有整数参数的重载函数？

> ID：12526786
> 
> 赞同：21
> 
> 时间：2012-09-21T08:23:28.353
> 
> 标签：delphi

考虑以下程序：

```
program IntegerOverloads;
{$APPTYPE CONSOLE}

procedure WordOrCardinal(Value: Word); overload;
begin
  Writeln('Word');
end;

procedure WordOrCardinal(Value: Cardinal); overload;
begin
  Writeln('Cardinal');
end;

procedure SmallintOrInteger(Value: Smallint); overload;
begin
  Writeln('Smallint');
end;

procedure SmallintOrInteger(Value: Integer); overload;
begin
  Writeln('Integer');
end;

procedure ShortintOrSmallint(Value: Shortint); overload;
begin
  Writeln('Shortint');
end;

procedure ShortintOrSmallint(Value: Smallint); overload;
begin
  Writeln('Smallint');
end;

procedure Main;
var
  _integer: Integer;
  _cardinal: Cardinal;
  _word: Word;
begin
  WordOrCardinal(_Integer);
  SmallintOrInteger(_cardinal);
  ShortintOrSmallint(_word);
end;

begin
  Main;
  Readln;
end. 
```

XE2编译时的输出为：

```
Cardinal
Integer
Smallint 
```

Delphi 6编译时的输出为：

```
Word
Smallint
Shortint 
```

[文档](http://docwiki.embarcadero.com/RADStudio/en/Procedures_and_Functions#Overloading_Procedures_and_Functions)状态（强调我的）：

> 您可以将类型与任何例程声明中的参数不同但与多个声明中的参数赋值兼容的参数传递给重载例程。当例程使用不同的整数类型或不同的实数类型重载时，这种情况最常发生 - 例如：
> 
> ```
> procedure Store(X: Longint); overload;
> procedure Store(X: Shortint); overload; 
> ```
> 
> 在这些情况下，如果可以毫无歧义地这样做，编译器会调用例程，其参数的**类型具有容纳调用中的实际参数的最小范围**。

但这似乎适用于此。示例代码中的所有过程调用都不接受容纳调用中实际参数的类型。

我找不到任何描述编译器遵循什么规则的文档。谁能指出我这样的文件？

这个问题是由以下文章提出的：

*   [反向字节（）](http://www.deltics.co.nz/blog/?p=1233)
*   [在 Delphi 7 中有效的 ZeroConf/Bonjour 代码在 2009 年无效](https://stackoverflow.com/questions/1482699/zeroconf-bonjour-code-that-works-in-delphi-7-not-working-in-2009)
*   [一句话……？](http://www.deltics.co.nz/blog/?p=1240)

* * *

### 更新

在 Ken White 评论的提示下，我编写了另一个程序来说明更多的奇怪之处：

```
program IntegerOverloadsPart2;
{$APPTYPE CONSOLE}

procedure Test(Value: Byte); overload;
begin
  Writeln('Byte');
end;

procedure Test(Value: Word); overload;
begin
  Writeln('Word');
end;

procedure Test(Value: Cardinal); overload;
begin
  Writeln('Cardinal');
end;

procedure Test(Value: Uint64); overload;
begin
  Writeln('Uint64');
end;

procedure Main;
var
  _byte: Byte;
  _shortint: Shortint;
  _word: Word;
  _smallint: Smallint;
  _cardinal: Cardinal;
  _integer: Integer;
  _uint64: UInt64;
  _int64: Int64;
begin
  Writeln('Unsigned variables passed as parameters:');
  Test(_byte);
  Test(_word);
  Test(_cardinal);
  Test(_uint64);
  Writeln;
  Writeln('Signed variables passed as parameters:');
  Test(_shortint);
  Test(_smallint);
  Test(_integer);
  Test(_int64);
end;

begin
  Main;
  Readln;
end. 
```

当由 XE2 编译时，输出为：

```
Unsigned variables passed as parameters:
Byte
Word
Cardinal
Uint64

Signed variables passed as parameters:
Uint64
Uint64
Uint64
Uint64 
```

在 Delphi 6 上，我必须删除`UInt64`重载，因为 Delphi 6 上不存在该类型，输出为：

```
Unsigned variables passed as parameters:
Byte
Word
Cardinal

Signed variables passed as parameters:
Byte
Byte
Byte 
```

同样，这两种行为看起来都与以下陈述一致：

> 在这些情况下，如果可以毫无歧义地这样做，编译器会调用例程，其参数的**类型具有容纳调用中的实际参数的最小范围**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:24:38.517

无符号类型都不能容纳有符号类型；引用的文档与您的示例一致 - 它只是没有说明编译器将如何处理它们。另一方面，有符号类型可以容纳无符号类型（SmallInt 容纳 Byte，LongInt 容纳 Word，Int64 容纳 Cardinal）：

```
program IntegerOverloadsPart3;
{$APPTYPE CONSOLE}

procedure Test(Value: ShortInt); overload;
begin
  Writeln('Short');
end;

procedure Test(Value: SmallInt); overload;
begin
  Writeln('Small');
end;

procedure Test(Value: LongInt); overload;
begin
  Writeln('Long');
end;

procedure Test(Value: Int64); overload;
begin
  Writeln('64');
end;

procedure Main;
var
  _byte: Byte;
  _word: Word;
  _cardinal: Cardinal;
  _uint64: UInt64;
begin
  Writeln('Unsigned variables passed as parameters:');
  Test(_byte);
  Test(_word);
  Test(_cardinal);
  Test(_uint64);
  Writeln;
end;

begin
  Main;
  Readln;
end. 
```

德尔福 XE 输出：

```
Small
Long
64
64 
```

# javascript - 这个函数在语义上是否正确？

> ID：12526787
> 
> 赞同：1
> 
> 时间：2012-09-21T08:23:33.530
> 
> 标签：javascript

我正在尝试根据两个条件启动一个类，如果该类尚未启动，并且标记中存在一个应用了所有方法的类：

```
if (!window.Recipes && !$('#page').find('#recipesSearchResults').length) {
    return window.Recipes = new Recipes;
} else {
    return true;
} 
```

上述说法正确吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:27:26.027

`!$('#page').find('#recipesSearchResults').length``true`如果长度`$('#page').find('#recipesSearchResults')` **不是** ，将返回`0`。

但是，`#recipesSearchResults`是一个 ID 选择器，而不是一个类选择器。

> ...并且如果标记中存在应用所有方法的类

您应该将其更改为`.recipesSearchResults`：

```
!$('#page').find('.recipesSearchResults').length 
```

# ruby-on-rails - 如何验证数组的大小

> ID：12526790
> 
> 赞同：0
> 
> 时间：2012-09-21T08:23:39.477
> 
> 标签：ruby-on-rails, forms

我有一个`Client`包含数组字段的模型。在`client.rb`模型中，我尝试了这样的事情：

```
field :menu_top
...
validates_length_of :menu_top, :maximum => 4 
```

它似乎有效，但如果我在表单中的这个数组中放入超过 4 个项目，它会向我发送这个 =>

```
undefined method `admin_client_path' for #<#<Class:0x007fbc80a63cb0>:0x007fbc80b566b8>
Extracted source (around line #1):

1: <%= form_for [:admin, @client], :url => @post_form_path, :html => { :multipart => true } do |f| %>
2: <% if @client.errors.any? %>
3: <div class="alert-message block-message error">
4: <h2 class="dark-red"><%= pluralize(@client.errors.count, t(:error)) %> <%= t(:client_error) %>:</h2> 
```

我不明白为什么它不会呈现表单错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:22:21.260

您将菜单条目存储在数组中，并且正在从该数组中动态呈现菜单条目，对吗？

现在您已经在数组中指定了一个菜单项，该菜单项在`routes.rb`. 尝试运行`rake routes`并检查是否`admin_client_path`真的存在。

该错误与您的验证无关。

# java - 曼哈顿距离 A*

> ID：12526792
> 
> 赞同：7
> 
> 时间：2012-09-21T08:23:45.513
> 
> 标签：java, artificial-intelligence, a-star, sliding-tile-puzzle

我正在使用 A* 搜索算法并使用曼哈顿距离作为启发式来实现 NxN 难题求解器，但我遇到了一个奇怪的*错误*（？），我无法理解。

考虑这些谜题（0 元素是空格）：（
初始）

`1 0 2`
`7 5 4`
`8 6 3`

（目标）

`1 2 3`
`4 5 6`
`7 8 0`

从初始状态达到解决方案的最小移动次数是 11。但是，我的求解器在 17 次移动中达到目标。

这就是问题所在 - 我的谜题求解器主要以正确（最少）的移动数解决可解决的谜题，但对于这个特定的谜题，我的求解器超出了最小移动数，我认为我已经将问题确定为计算错误在这种特殊情况下的曼哈顿距离。

在此[链接](http://www.freeimagehosting.net/xn5b8)中，您可以看到我的求解器在做什么（在右侧）以及一个久经考验的求解器在做什么（Brian Borowski 的优秀求解器，可[在此处](http://www.brian-borowski.com/Software/Puzzle/)获得）。

在第一步中，Brian 的求解器立即选择将元素 5 向上推的解决方案，但我的求解器有其他想法，并且在堆栈跟踪（在[链接](http://www.freeimagehosting.net/xn5b8)上给出）上，我的求解器选择将 2 推到左侧的解决方案（因为该板的曼哈顿距离越小，板子在优先队列的前面）。我看不出问题出在哪里，也不能怪我的曼哈顿距离计算，因为它正确地解决了许多其他 3x3 难题。

以下是我计算给定 Board 的曼哈顿距离的方法：

```
/**
 * Calculates sum of Manhattan distances for this board and stores it in private field to promote immutability.
 */
private void calculateManhattanDistance() {
    int manhattanDistanceSum = 0;
    for (int x = 0; x < N; x++) // x-dimension, traversing rows (i)
        for (int y = 0; y < N; y++) { // y-dimension, traversing cols (j)
            int value = tiles[x][y]; // tiles array contains board elements
            if (value != 0) { // we don't compute MD for element 0
                int targetX = (value - 1) / N; // expected x-coordinate (row)
                int targetY = (value - 1) % N; // expected y-coordinate (col)
                int dx = x - targetX; // x-distance to expected coordinate
                int dy = y - targetY; // y-distance to expected coordinate
                manhattanDistanceSum += Math.abs(dx) + Math.abs(dy); 
            } 
        }
    manhattanDistance = manhattanDistanceSum;
} 
```

如果您有任何见解或想法，我将不胜感激。

如果需要任何其他代码，我会立即发布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-04T16:13:24.327

有时我被困在同一个地方，我在 17 步中解决了这个问题。问题是我只对 A* 算法使用启发式 h(n)，而选择下一个节点 A* 使用曼哈顿距离（启发式) + pathcost（从根到达节点的成本称为 g(n)）来做出选择。一旦你把它插入算法，它就像一个魅力。

希望这可以帮助被困在同一个地方的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:25:42.650

如果您的启发式方法是可以接受的（并且确实如此，请检查[此](http://en.wikipedia.org/wiki/Admissible_heuristic)），那么 A* 总是返回最佳解决方案。可以更慢或更快（扩展更多或更少的节点），但它会返回最佳解决方案。

因此，由于您的启发式是可以接受的，因此问题*必须*在 A* 算法实现中。

此外，它的第一步不同于最优的这一事实是没有意义的：该算法可以正确地执行回溯以获得未来正确的解决方案路径。所有打开的节点都是下一步的候选者，而不仅仅是当前节点的子节点。

# asp.net - 多次打印报告，（SSRS 报告服务）

> ID：12526795
> 
> 赞同：0
> 
> 时间：2012-09-21T08:24:09.663
> 
> 标签：asp.net, sql-server, ssrs-2008, reporting-services

我目前正在研究 SSRS 报告 2008，在 VS 2010 中创建的网站中显示它们，即 ASP.NET 4.0 C#。

我当前的问题是我有一份报告，上面只有一个信头。并且这个报表**页** 需要根据*TextBox****页数***的值多次打印，如图**![在此处输入图像描述](../Images/062ea0a608fa9a76f7cb5cb6c04dd4fb.png)**

 **稍微描述一下：

当用户在***Number of Pages*** *TextBox*中输入值 并单击此**打印按钮**图标时，他/她会进入带有***ReportViewer 控件***的页面，显示报告。此报告在报表的页眉和此处的报表将通过单击ReportViewer 控件的*默认打印按钮进行打印。*

但是，我无法弄清楚，如何打印此报表页面**的次数与*****No of Pages*** *TextBox*中的值一样多（如图所示）
（报告中显示的公司信头是通过存储过程从数据库中检索到的）

我尝试了很多谷歌搜索但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:41:12.730

创建一个新报告。此报告应有 1 个参数，称为“副本数”（或等效项）。它还应该有一个带有 1 列且没有边框的 Tablix，在单元格内插入一个子报告，指向带有信头的报告。

您的数据集查询应该是这样的：

```
WITH dataset AS (
   SELECT 1 AS ID UNION ALL 
   SELECT ID + 1 FROM dataset WHERE ID < @Param
)
SELECT ID 
FROM dataset --edit: obviously I was missing the table
OPTION (MAXRECURSION 0) 
```

然后在您的 tablix 上，使用此数据集，按 ID 分组并在组属性上选择“分页符”->“在组的每个实例之间”。

如果我正确理解了您的问题，这应该可以解决问题。**

# jquery - JQuery Date-Picker 不适用于动态表单

> ID：12526800
> 
> 赞同：0
> 
> 时间：2012-09-21T08:24:24.733
> 
> 标签：jquery, dynamic, datepicker

<< 展开本帖的**[问题](https://stackoverflow.com/questions/12524799/add-checkbox-dynamically)**>>

我想要做的还将日期选择器的 jQuery 函数动态添加到表中。我有这张桌子：

```
<table id="tblDetail">
  <tr>
    <td><input type="text" class="datepicker" name="a[]"></td>
  </tr>
</table>
<button id="addinput">Add row</button>
<input type="button" id="removeRow" value="Delete row" onclick="removeRowFromTable();"/> 
```

为了在 javascript 上选择日期，我使用了：

```
$(function() {
  $('#addinput').click(function() {
    $('#tblDetail tbody>tr:last').clone(true).insertAfter('#tblDetail tbody>tr:last');
  });

  $('.datepicker').live("click", function() {
    $(this).datepicker({
        changeMonth: true,
        changeYear: true,
        gotoCurrent: true,
        dateFormat: 'yy-mm-dd',
        yearRange: '1980:c',
        defaultDate: '-10y'
    }).datepicker('show');
  });
});

function removeRowFromTable() {
  var tbl = document.getElementById('tblDetail');
  var lastRow = tbl.rows.length;
  if (lastRow > 2) tbl.deleteRow(lastRow - 1);
} 
```

它可以工作，但是当我添加行时，日期选择器仍然显示但总是将值返回到第一行文本框。怎么做？

* * *

**更新**

请检查这个**[小提琴](http://jsfiddle.net/JkSgy/)**。

我发现代码解决了问题（您将不得不省略日期选择器文本框中的**ID 元素**），但它仅在您首先添加行而不选择任何日期选择器时才有效。但是当您停止添加行并开始使用日期选择器（使用日期选择器填充先前添加的整个文本框）时，当您再次添加行时，日期选择器将不适用于新添加的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:57:34.370

我认为这是一个旧帖子..我以前遇到过同样的问题..但我使用添加另一行解决了它。也许这可以帮助...

例子：

# 代码

```
<table width="100%" border="1" cellpadding="1" id="listtahunan" class="dataTable">
  <thead>
  <tr>
    <th scope="col">Start Date</th>
    <th scope="col">End Date</th>
  </tr>
  </thead>
  <tbody id="listyear">
  <tr class="row">
    <td><input type="text" name="startDate[]" id="from1"/></td>
    <td><input type="text" name="endDate[]" id="to1" /></td>
  </tr>
  </tbody>
</table> 
```

# jQuery 代码

```
$(document).ready(function() {
var counter = 2;
 $('#add').click(function(){

     var newTxtBoxTR = $(document.createElement('tr')).attr('id','row'+counter);

     newTxtBoxTR.html('<td><input type="text" name="startDate[]" id="from'+counter+'" /></td>' + '<td><input type="text" name="endDate[]" id="to'+counter+'" /></td>');

     newTxtBoxTR.appendTo("#listyear");

 $( "#from"+counter ).datepicker({
  //defaultDate: "+1w",
  changeMonth: true,
  changeYear: true,
  numberOfMonths: 1,
});
$( "#to"+counter ).datepicker({
  //defaultDate: "+1w",
  changeMonth: true,
  changeYear: true,
  numberOfMonths: 1,
});
 counter++;
});
}); 
```

希望这有帮助....问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:34:39.043

您已将 id 用于 datepicker。id 必须是唯一的。所以你会尝试使用这样的类名

```
<table id="detail">
  <tr>
    <td><input type="text" id="date" name="date[]" class="datepicker"></td>
  </tr>
</table>

<script language="Javascript">
var dates = $('.datepicker').datepicker({
    showAnim: 'slide',
    dateFormat: 'yy-mm-dd'
});
</script> 
```

如果你想在单个函数中添加多个函数意味着也试试这个

```
$('.datepicker').each(function(){
    $(this).datepicker();
}); 
```

否则您必须将 id 动态添加到文本框并使用动态 id 创建一个日期选择器

这是解决您问题的代码。您已经克隆了该行，因此当您选择 datepicker 时它会添加相同的 id。现在我变成了这样

```
$(function () {

    $('#addinput').click(function () {

        var textbox_add = $('<tr><td><input type="text" class="datepicker"  name="a[]" ></td></tr>');
        textbox_add.appendTo('#tblDetail tbody');

    });

    $('.datepicker').live("click", function () {
        $(this).datepicker({
            changeMonth: true,
            changeYear: true,
            gotoCurrent: true,
            dateFormat: 'yy-mm-dd',
            yearRange: '1980:c',
            defaultDate: '-10y'
        }).datepicker('show');
    });
});

function removeRowFromTable() {
    var tbl = document.getElementById('tblDetail');
    var lastRow = tbl.rows.length;
    if (lastRow > 2) tbl.deleteRow(lastRow - 1);
} 
```

# php - 为什么不应该使用 is_null() ？

> ID：12526801
> 
> 赞同：5
> 
> 时间：2012-09-21T08:24:34.343
> 
> 标签：php, isnull, codesniffer

运行 CodeSniffer PHP 样式测试给了我以下错误：

```
The use of function is_null() is forbidden    
Squiz.PHP.ForbiddenFunctions.Found 
```

为什么禁止使用 is_null() ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T00:30:27.500

为了保持一致性，我们在 Squiz 标准中实施了这条规则。

标准的另一部分禁止隐含表达，例如`if ($var) {...`. 所以你需要写`if ($var === TRUE) {...`.

因此，NULL 值的比较如下所示：

```
if (is_null($var) === TRUE) {
} 
```

鉴于您已经必须编写比较的后半部分，因此更容易编写：

```
if ($var === NULL) {
} 
```

这样代码更简单，但也（更重要的是）更符合我们做事的方式。

这是唯一的原因。`is_null()`我们不关心性能，并且函数本身没有任何问题。据我所知，它工作正常。

# bash - sed：通过 bash 脚本正确替换包含路径的行

> ID：12526805
> 
> 赞同：1
> 
> 时间：2012-09-21T08:24:41.863
> 
> 标签：bash, sed, awk

我正在尝试编写一个 bash 脚本，它将执行从生产主机到开发主机的基于备份的 DUPLICATE 数据库 (Oracle)。其中一个步骤是获取生产数据库 pfile 的副本，对其进行正确编辑，然后在另一台主机上启动新实例。我在我的 bash 脚本上执行以下操作时遇到了困难：

生产pfile：（以单行为例，其他都一样）

```
*.audit_file_dest='/u01/app/grid/admin/orcl11/adump' 
```

假设上面的行应该完全更改为：

```
*.audit_file_dest='/u02/another/path' 
```

我看过 StackOverflow 上的示例，但我真的无法理解它们。有人可以帮我吗？

提前谢谢了！

## 编辑：非常感谢大家。这就像一个魅力。话题回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:30:23.670

如果它与您在问题中粘贴的完全一样，您可以使用`sed`来替换：

```
sed -i "s@audit_file_dest='/u01/app/grid/admin/orcl11/adump'@audit_file_dest='/u02/another/path'@" your_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:56:04.227

如果您只需要更改问题中的单行，@leafei 的行适合您。

如果您想自定义“pfile”，例如：更改

```
nameA='oldA'
nameB='oldB'
nameC='oldC' 
```

至

```
nameA='newA'
nameB='oldB' #here perhaps you want to keep the old value
nameC='newC' 
```

你可以试试这个：

```
awk  'BEGIN{s="\x27";FS=OFS="="}{if($1=="nameA"){print $1,s"newA"s;next;} if($1=="nameC"){print $1,s"newC"s;next;}}1' pfile 
```

**测试**：

```
kent$  echo "nameA='oldA'
nameB='oldB'
nameC='oldC'"|awk  'BEGIN{s="\x27";FS=OFS="="}{if($1=="nameA"){print $1,s"newA"s;next;} if($1=="nameC"){print $1,s"newC"s;next;}}1'
nameA='newA'
nameB='oldB'
nameC='newC' 
```

# node.js - 从流中读取大量数据：是否有类似“stream.hasBytesAvailable”的内容

> ID：12526806
> 
> 赞同：0
> 
> 时间：2012-09-21T08:24:44.263
> 
> 标签：node.js, networking, socket.io

我需要从流中读取大量数据。发送前不知道数据的长度。流中没有特殊的“结束字符”。问题：我得到了流的多个数据事件，我不知道什么时候开始处理数据。

我知道其他编程语言中的一种模式，我可以在其中找出 TCP 流中是否有数据（例如 iOS 和 Objective-C，我有类似 NSInputStream 对象的“hasBytesAvailable”之类的东西）。

node.js 中是否存在类似的东西？或者我如何解决 node.js 的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:47:46.640

你所指的方法并不像你说的那样做。*它们只告诉您可以在不阻塞*的情况下读取多少数据。根本不是一回事。

读取到流末尾的唯一方法是读取到流的末尾。完成后您将获得一个 EOS。

当它来自网络流时，实际上并没有“数据长度”这样的东西：考虑到对等方可以永远保持写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:43:04.137

在事先不知道数据长度、没有 EOF 字符和保持打开的套接字的情况下，您将不得不利用数据的结构属性，即动态解析它。这当然假定数据*具有*已知的结构属性（例如定义的视频格式）；如果没有，要么你的问题根本无法解决，要么你有一个“XY问题”（你过早地定义了一个解决方案而没有完全定义真正的问题）。

# perl - 如何在 perl 中搜索和获取特定文本

> ID：12526807
> 
> 赞同：0
> 
> 时间：2012-09-21T08:24:50.850
> 
> 标签：perl

我有一个文件夹，其中包含“n”个 html 文件。我将阅读文件并采取一行。（即）我将`<img />`标签放在一个数组中并打印该数组。现在不打印数组。你能帮助我吗。我的代码在这里。

```
use strict;
use File::Basename;
use File::Path;
use File::Copy;
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Excel';

print "Welcome to PERL program\n";

#print "\n\tProcessing...\n";
my $foldername = $ARGV[0];
opendir(DIR,$foldername) or die("Cannot open the input folder for reading\n");
my (@htmlfiles) = grep/\.html?$/i, readdir(DIR);
closedir(DIR);

@htmlfiles = grep!/(?:index|chapdesc|listdesc|listreview|addform|addform_all|pattern)\.html?$/i,@htmlfiles;
# print "HTML file is @htmlfiles";

my %fileimages;
my $search_for = 'img';
my $htmlstr;
for my $files (@htmlfiles)
{
    if(-e "$foldername\\$files")
    {
        open(HTML, "$foldername\\$files") or die("Cannot open the html files '$files' for reading");
        local undef $/;my $htmlstr=<HTML>;
        close(HTML);
        $fileimages{uc($2)}=[$1,$files] while($htmlstr =~/<img id="([^"]*)" src="\.\/images\/[^t][^\/<>]*\/([^\.]+\.jpg)"/gi);

    }
} 
```

在命令提示符下。

> perl findtext.pl "C:\viji\htmlfiles"

问候，维吉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:08:30.070

我想指出用正则表达式解析 HTML 是徒劳的。请参阅史诗[https://stackoverflow.com/a/1732454/1521179](https://stackoverflow.com/a/1732454/1521179)以*获得*答案。

您用于提取图像标签的正则表达式非常糟糕。您无需使用 HTML 解析器并遍历树，而是搜索一个字符串……</p>

```
/<img id="([^"]*)" src="\.\/images\/[^t][^\/<>]*\/([^\.]+\.jpg)"/gi 
```

*   开始于`<img`
*   在恰好一个空格之后，`id="`找到序列。如果找到，则捕获该属性的内容，否则匹配失败。关闭`"`被消耗。
*   在恰好一个空格之后，`src="./images/`找到序列，
*   后跟一个不是 的字符`t`。（这当然允许`"`）。
*   这后面是*任意*数量的非斜杠或字符的任何`<>`字符（这再次允许`"`, ），
*   后跟一个斜线。
*   现在捕捉这个：
    *   一个或多个不是点的字符
    *   后跟`.jpg`
*   之后`"`必须立即跟进。

### 误报

这是您的正则表达式将匹配的一些数据，它不应该匹配：

```
<ImG id="" src="./ImAgEs/s" alt="foo/bar.jpg" 
```

那么你得到的图像路径是什么？`./ImAgEs/s" alt="foo/bar.jpg`可能不是你想要的。

```
<!-- <iMg id="" src="./images/./foobar.jpg" --> 
```

糟糕，我匹配了评论的内容。并且该路径不包含`./images`. 该`.`文件夹在您的正则表达式中完全有效，但表示同一文件夹。我什至可以使用`..`，您的 HTML 文件的文件夹是什么。或者我可以使用`./images/./t-rex/image.jpg`与禁止文件夹匹配的`t`内容。

### 假阴性

以下是一些您想要但不会得到的数据：

```
<img
  id="you-cant-catch-me"
  src='./images/x/awesome.jpg' /> 
```

为什么？换行符——但您只允许在参数之间使用单个空格。此外，您不允许使用单引号`'`

```
<img src="./images/x/awesome.jpg" id="you-cant-catch-me" /> 
```

为什么？我现在有单个空格，但交换了参数。但是这两个片段都表示完全相同的 DOM，因此应该被认为是等效的。

### 结论

访问[http://www.cpan.org/](http://www.cpan.org/)并搜索`HTML`and `Tree`。使用一个模块来解析您的 HTML 并遍历树并提取所有匹配的节点。

另外，在`print`某处添加一个语句。我发现了一个

```
 use Data::Dumper;
 print Dumper \%fileimages; 
```

对于调试目的非常有启发性。

# ssl-certificate - 机器到机器 https 连接的自签名证书

> ID：12526808
> 
> 赞同：3
> 
> 时间：2012-09-21T08:24:51.753
> 
> 标签：ssl-certificate

我需要在 Tomcat 应用服务器和后端系统之间建立 https 通信。Web 服务器托管一个公共网站，因此位于 DMZ 中。

我的问题是，在这种情况下（机器对机器通信）使用官方 CA 证书是否比使用自签名证书有任何优势？

我一直听说不应在生产系统上使用自签名证书，但我不确定我理解为什么（用于机器对机器通信）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:54:01.847

风险在于保护相关主机的防御措施的有效性，包括它们之间的网络连接。鉴于一直在发现弱点和漏洞，有理由说生产环境中使用的自签名证书可能存在问题 - 其中包括 DMZ 中的主机。

原因如下：中间人。简而言之，如果任一主机（或它们之间的网络）受到威胁，那么它们之间的流量仍将被加密，但由于证书是自签名的，中间人（又名“MITM”）将能够使用自签名证书引入透明代理，双方都信任该证书。

如果您的主机改为使用公共 CA，则 MITM 方法无法工作。

如果每台主机每年 15 到 50 美元的投资比它们之间和它们之间的信息成本更高——包括它们*可能*存在的信息（例如，被入侵、提供恶意软件），那么选择很简单：不要担心购买证书。否则，调查它们很重要。

Adam Hupp 在此网页上的评论提供了一个很好的简单场景：

[http://www.vedetta.com/self-signed-ssl-certificates-vs-commercial-ssl-certificates-how-mozilla-is-killing-self-signed-certificates](http://www.vedetta.com/self-signed-ssl-certificates-vs-commercial-ssl-certificates-how-mozilla-is-killing-self-signed-certificates)

以下是对风险的更详细描述：http: [//blog.ivanristic.com/2008/07/vast-numbers-of.html](http://blog.ivanristic.com/2008/07/vast-numbers-of.html)

最后对这两种情况进行平衡观察，尽管本文仅在安装了功能齐全、受到适当保护和实施的证书颁发机构服务器时才考虑自签名：http: [//www.networkworld.com/news/tech/ 2012/021512-ssl-certificates-256189.html](http://www.networkworld.com/news/tech/2012/021512-ssl-certificates-256189.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:52:43.663

我认为在这项任务中使用官方证书没有任何优势——除了你的营销部门。可以声称您的基础设施是“100% 由 $CA 认证的”。加密算法/强度和证书持续时间可以相同，具体取决于您的配置方式。

您听到的建议可能集中在更常见的 HTTPS 与浏览器通信的用法上，现在浏览器抱怨自签名证书。对于服务器之间的数据传输，我认为按照您计划的方式加密流量是一种很好的做法！

# android - 将字符串的每个字符转换为整数

> ID：12526810
> 
> 赞同：1
> 
> 时间：2012-09-21T08:24:57.930
> 
> 标签：android, string

我已经用它们各自的整数/数值硬编码了“a 到 z”整数。像

```
 int a=0, b=1, c=2, d=3, e=4, f=5, g=6; 
```

现在我有一个编辑文本，可以像 abcdefg 一样接受输入。我想将字符串的每个字符转换为 int 以便我可以得到 0123456 作为 abcdefg 的回报这可能吗？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:46:55.480

为此，最好使用 hashmap

哈希图中的 delecare 值如下

```
HashMap<String,Integer> map = new HashMap<String,Integer>();
    map.put("a", 0);
    map.put("b", 1);
    map.put("c", 2);
    map.put("d", 3);
            //....
    map.put("z",25);

    String s1 ="abcdefg";//String from edit text
    char[] sa = s1.toCharArray();//converting to character array.
    String str ="";
    for(int i=0;i<sa.length;i++)
    {
        str = str+(map.get(Character.toString(sa[i])));
    }
    System.out.println(str);//Here str show the exact result what you required. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:29:53.640

它非常简单。首先，您必须从 edittext 获取字符串，然后将其转换为字符串数组并在 for 循环中进行比较。

```
String convertedText;
String str = editText.getText().toString();;
char[] ch = str.toCharArray();
for (char c : ch)
{
      System.out.println(c);
      if(c == 'a')
          convertedText = convertedText + "1"; 
      // Coding to compare each character
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:29:02.623

如果您打算修改编辑文本中的输入，即当用户输入“a”时，他会看到“1”。尝试覆盖`addTextChangedListener`使用`onTextChanged`（如果您想在用户写作时修改它）或`afterTextChanged`（如果您想用户完成后修改它）：

```
editText.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s) {

    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after){
    }
    public void onTextChanged(CharSequence s, int start, int before, int count){
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:37:12.283

这可以这样完成
，a 的 ASCI 值为 97 得到值 0 减去 97 所以..

在 C

```
.......
char *insert = "abcdefg";
for (int i = 0; i < 7; ++i)
int value = ((digit_to_int(insert[i]))-97)+1
printf("%d", value );
.........

int digit_to_int(char d)
{
 char str[2];

 str[0] = tolower(d);
 str[1] = '\0';
 return (int) strtol(str, NULL, 10);
} 
```

你可以达到这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T08:49:07.600

尝试使用这个

```
String text = "hitesh";
    char[] ch = text.toCharArray();
    StringBuilder sb = new StringBuilder();
    for(char cd :ch)
    {
        int n = cd-'a'; 
        sb.append(n);
    }
    System.out.println(sb.toString()); 
```

# c# - 导航到下一页时水晶报告错误？

> ID：12526812
> 
> 赞同：0
> 
> 时间：2012-09-21T08:25:15.043
> 
> 标签：c#, parameters, crystal-reports

我正在使用水晶报告制作报告网站，使用按钮查看报告。报告的第一页显示没有问题，但是当我单击导航按钮移动到报告的下一页时，我得到一个错误

“登录失败。详细信息：ADO 错误代码：0x 源：Microsoft SQL Native Client 描述：用户“sa”登录失败。SQL 状态：28000 本机错误：文件 C:\DOCUME~1\SOFTLITE\ASPNET\LOCALS~ 中的错误1\Temp\ClientReport {02A69EDD-9B03-4490-B3A2-5E5E5F5592D9}.rpt：无法连接：登录参数不正确。”

或水晶报表显示一个输入框登录数据库。我的代码是：

```
 protected void Button1_Click(object sender, EventArgs e)
{
            ReportDocument Summaryrpt = new ReportDocument();
            Summaryrpt.Load(Server.MapPath("BookSummary.rpt"));
            Summaryrpt.SetDatabaseLogon("sa", "nirvana", "Compro4", "lottery");
            CrystalReportViewer1.ReportSource = Summaryrpt;
} 
```

请帮我........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:56:20.727

我找到了解决方案

```
 protected void Button1_Click(object sender, EventArgs e)
 {
        ReportDocument Summaryrpt = new ReportDocument();
        Summaryrpt.Load(Server.MapPath("BookSummary.rpt"));
        CrystalReportViewer1.ReportSource = Summaryrpt;
        var connectionInfo = new ConnectionInfo();
        connectionInfo.ServerName = "ComproLottery.db.6456862.hostedresource.com";
        connectionInfo.DatabaseName = "ComproLottery";
        connectionInfo.Password = "Br0@dW@ys68";
        connectionInfo.UserID = "ComproLottery";
        connectionInfo.Type = ConnectionInfoType.SQL;
        for (int i = 0; i < CrystalReportViewer1.LogOnInfo.Count; i++)
        {
            CrystalReportViewer1.LogOnInfo[i].ConnectionInfo = connectionInfo;
        }
  } 
```

# facebook - facebook-actionscript-api 删除请求问题

> ID：12526815
> 
> 赞同：1
> 
> 时间：2012-09-21T08:25:18.617
> 
> 标签：facebook, actionscript-3

我正在尝试使用 facebook-actionscript-api 删除用户对用户的请求。到目前为止没有成功..我尝试了以下代码：

```
//try #1
var data:Object = new Object();
data.method = 'delete';
var userid:String = "idOfTheRequestSender"; //id of the request sender
var fullrequestID:String = requestId + '_'+ userid;//requestId - id of the sent request
Facebook.api(fullrequestID, onRequestDeleteCallBack, data, "POST");
//try #2
var userid:String = "idOfTheRequestSender"; //id of the request sender
var fullrequestID:String = requestId + '_'+ userid; //requestId - id of the sent request
Facebook.deleteObject(fullrequestID, onRequestDeleteCallBack); 
```

我正在用我的应用程序中的用户 ID 替换它。两者都不起作用，因为回调函数参数始终为 null 并且请求不会被删除。任何帮助将不胜感激。谢谢。

问题只是删除请求，我可以发送它们。

编辑：问题是我试图从发送请求的 Facebook 帐户中删除请求，而不是从收到请求的帐户中删除。现在它起作用了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:51:36.080

你试过了吗 ：

```
Facebook.api(fullrequestID, onRequestDeleteCallBack, {}, "DELETE"); 
```

您还收到任何错误消息吗？

# java - 需要编写 JUnit 测试用例

> ID：12526819
> 
> 赞同：6
> 
> 时间：2012-09-21T08:25:26.103
> 
> 标签：java, junit

我是一个较新的Java开发人员。但是我对编写Junit测试用例知之甚少。我很快就要参加工作考试了。他们希望我为此编写一个程序

1.  要从任何网站读取 HTML，请说“http://www.google.com”（您可以使用 Java 中内置 API 的任何 API，例如 URLConnection）
2.  在控制台上从上面的 url 打印 HTML，并将其保存到本地计算机中的文件 (web-content.txt) 中。
3.  上述程序的 JUnit 测试用例。

我已经完成了前两个步骤，如下所示：

```
import java.io.*;
import java.net.*;

public class JavaSourceViewer{
  public static void main (String[] args) throws IOException{
    System.out.print("Enter url of local for viewing html source code: ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String url = br.readLine();
    try {
      URL u = new URL(url);
      HttpURLConnection uc = (HttpURLConnection) u.openConnection();
      int code = uc.getResponseCode();
      String response = uc.getResponseMessage();
      System.out.println("HTTP/1.x " + code + " " + response);

      InputStream in = new BufferedInputStream(uc.getInputStream());
      Reader r = new InputStreamReader(in);
      int c;
      FileOutputStream fout=new FileOutputStream("D://web-content.txt");
      while((c = r.read()) != -1){
        System.out.print((char)c);
        fout.write(c);
      }
      fout.close();
    } catch(MalformedURLException ex) {
      System.err.println(url + " is not a valid URL.");
    } catch (IOException ie) {
      System.out.println("Input/Output Error: " + ie.getMessage());
    }
  }
} 
```

现在我需要第三步的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:48:43.617

您需要像这样提取一个方法

```
package abc.def;

import java.io.*;
import java.net.*;

public class JavaSourceViewer {
    public static void main(String[] args) throws IOException {
        System.out.print("Enter url of local for viewing html source code: ");
        BufferedReader br =
                new BufferedReader(new InputStreamReader(System.in));
        String url = br.readLine();
        try {
            FileOutputStream fout = new FileOutputStream("D://web-content.txt");
            writeURL2Stream(url, fout);
            fout.close();
        } catch (MalformedURLException ex) {
            System.err.println(url + " is not a valid URL.");
        } catch (IOException ie) {
            System.out.println("Input/Output Error: " + ie.getMessage());
        }
    }

    private static void writeURL2Stream(String url, OutputStream fout)
            throws MalformedURLException, IOException {
        URL u = new URL(url);
        HttpURLConnection uc = (HttpURLConnection) u.openConnection();
        int code = uc.getResponseCode();
        String response = uc.getResponseMessage();
        System.out.println("HTTP/1.x " + code + " " + response);

        InputStream in = new BufferedInputStream(uc.getInputStream());
        Reader r = new InputStreamReader(in);
        int c;

        while ((c = r.read()) != -1) {
            System.out.print((char) c);
            fout.write(c);
        }
    }
} 
```

好的，现在您可以编写 JUnit-Test 了。

```
 package abc.def;

  import java.io.ByteArrayOutputStream;
  import java.io.IOException;
  import java.net.MalformedURLException;

  import org.junit.Test;

  import junit.framework.TestCase;

  public class MainTestCase extends TestCase {
    @Test
    public static void test() throws MalformedURLException, IOException{
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        JavaSourceViewer.writeURL2Stream("http://www.google.de", baos);
        assertTrue(baos.toString().contains("google"));

    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:43:04.647

*   首先将代码从 main 方法移动到 JavaSourceViewer 中的其他方法。
*   其次，使这些方法返回您可以测试的内容。例如输出文件或阅读器的文件名。

然后为单元测试创​​建一个类

```
import org.junit.* ;
import static org.junit.Assert.* ;

public class JavaSourceViewerTest {

   @Test
   public void testJavaSourceViewer() {
      String url = "...";
      JavaSourceViewer jsv = new JavaSourceViewer();
      // call you methods here to parse the site
      jsv.xxxMethod(...)
      ....
      // call you checks here like: 
      // <file name to save to output data from your code, actual filename>  - e.g.
      assertEquals(jsv.getOutputFile(), "D://web-content.txt");
      ....
   }

} 
```

要执行 Junit，请使用 IDE（如 eclipse）或将 junit.jar 文件放在类路径和控制台中：

java org.junit.runner.JUnitCore JavaSourceViewerTest

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:47:54.420

你的步骤不对。这样做肯定会有所帮助，3，然后是 1，然后是 2。这样做会迫使您从功能和单元的角度进行思考。结果代码将是可测试的，无需做任何特别的事情。除了为您提供安全网之外，先测试还指导您的系统设计。

**PS** *千万不要在测试前尝试编写代码。*如您所见，*这根本不自然，也没有太大价值。*

现在，要测试第一个单元，您可以将`string`from`html`与`google.com`一些现有的`string`. 但是，如果 Google 更改它的页面，该测试用例将会中断。另一种方法是只检查标头中的 HTTP 代码，如果是 200，那就没问题了。只是一个想法。

对于第二个，您可以`string`通过读取文件来比较从网页读取的 , 与写入文件的字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-19T19:26:09.203

```
 String str = "";
        URL oracle = new URL("http://www.google.com/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));
        File file = new File("C:/Users/rohit/Desktop/rr1.txt");
        String inputLine;
        FileWriter fw = new FileWriter(file.getAbsoluteFile()); 
        BufferedWriter bw = new BufferedWriter(fw); 
        while ((inputLine = in.readLine()) != null) { 
        System.out.println(inputLine); 
        bw.write(inputLine); 
        } 

        bw.close(); 
        in.close(); 
```

# python - Geektools 和 Python

> ID：12526820
> 
> 赞同：1
> 
> 时间：2012-09-21T08:25:28.547
> 
> 标签：python, macos

我一直在玩 Python 和 geektools，在我整理代码和使用循环之前，我已经让脚本工作了。

现在它不会显示超出该`lalala`方法的任何内容。

我正在使用 geektools 3.0.2 在 mac 10.8.1 上工作。

```
#!/usr/bin/python

#Simple script that downloads runescape adventures log
#and outputs it to console
# Ashley Hughes 16/SEP/2012

import sys
import urllib2 #For HTTP access
from time import localtime, strftime #Time data functions
from xml.dom.minidom import parseString #XML parser

def lalala(n):
    i = 0
    while(i <= n):
        xmlTag = dom.getElementsByTagName('description')[i].toxml()
        xmlData = xmlTag.replace('<description>','').replace('</description>','').replace('\t','').replace('\n','')
        #print (str(i) + ": " + xmlData)
        print(xmlData)
        i = i + 1

try:
    f = urllib2.urlopen("http://services.runescape.com/m=adventurers-log/rssfeed?searchName=SIG%A0ZerO")
    #f = urllib.urlopen("http://www.runescape.com/")
except Exception, e:
    print "Could not connect"
    sys.exit(1)
s = f.read()
f.close()

dom = parseString(s)

print strftime("%a, %d %b %Y %H:%M:%S", localtime())
print "Working"
lalala(6)
print "Still working"
sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:43:55.850

当您的代码“打印”到 GeekTool 时，您会遇到 unicode-ascii 问题。改变：

```
xmlTag = dom.getElementsByTagName('description')[i].toxml() 
```

对此：

```
xmlTag = dom.getElementsByTagName('description')[i].toxml().encode('ascii', 'ignore') 
```

在带有 GeekTool 3.0.3 的 mac 10.8.1 中这对我来说很好

看看[http://docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:11:44.787

该`lalala`方法可以进一步整理：

```
def lalala(n):
    i = 0
    while(i <= n):
        xmlTag = dom.getElementsByTagName('description')[i].toxml()
        xmlData = xmlTag.replace('<description>','').replace('</description>','').replace('\t','').replace('\n','')
        #print (str(i) + ": " + xmlData)
        print(xmlData)
        i = i + 1 
```

可以变成

```
def lalala(dom):
    for tag in dom.getElementsByTagName('description'):
        xmlTag = tag.toxml()
        xmlData = xmlTag.replace('<description>','').replace('</description>','').replace('\t','').replace('\n','')
        print(xmlData) 
```

然后你可以用

```
lalala(dom) 
```

而不是`lalala(6)`.

不过，老实说，在 XML 上进行文本标记替换可能是一个糟糕的计划。

# cocos2d-iphone - cocos2d + GKMatchmakerViewController 导致竖屏模式

> ID：12526823
> 
> 赞同：0
> 
> 时间：2012-09-21T08:25:41.240
> 
> 标签：cocos2d-iphone, orientation, gamekit

我正在 cocos2d 游戏项目中实现 Game Kit。

游戏只有横向。gamekit 也应该如此。

当我展示用于匹配的 gamekit 模态视图控制器时，它以横向显示。但是底层的 cocos2d CCLayer 变成了纵向。

rootViewContollers 方向代码如下所示：

```
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

//
// There are 2 ways to support auto-rotation:
//  - The OpenGL / cocos2d way
//   - Faster, but doesn't rotate the UIKit objects
//  - The ViewController way
//  - A bit slower, but the UiKit objects are placed in the right place
//

#if GAME_AUTOROTATION==kGameAutorotationNone
//
// EAGLView won't be autorotated.
// Since this method should return YES in at least 1 orientation,
// we return YES only in the Portrait orientation
//
return ( interfaceOrientation == UIInterfaceOrientationPortrait );

#elif GAME_AUTOROTATION==kGameAutorotationCCDirector
//
// EAGLView will be rotated by cocos2d
//
// Sample: Autorotate only in landscape mode
//
if( interfaceOrientation == UIInterfaceOrientationLandscapeLeft ) {
    [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeRight];
} else if( interfaceOrientation == UIInterfaceOrientationLandscapeRight) {
    [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeLeft];
}

// Since this method should return YES in at least 1 orientation,
// we return YES only in the Portrait orientation
return ( UIInterfaceOrientationIsLandscape(interfaceOrientation) );

#elif GAME_AUTOROTATION == kGameAutorotationUIViewController
//
// EAGLView will be rotated by the UIViewController
//
// Sample: Autorotate only in landscpe mode
//
// return YES for the supported orientations

return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );

#else
#error Unknown value in GAME_AUTOROTATION

#endif // GAME_AUTOROTATION

// Shold not happen
return NO;
} 
```

如果我将 GAME_AUTOROTATION 定义为 kGameAutorotationUIViewController 或 kGameAutorotationCCDirector 或 kGameAutorotationNone 没有区别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:23:38.220

所以我相信我已经找到了解决办法。

在我的 AppDelegate 中，我做了以下更改：

```
//[window addSubview: viewController.view];
[window setRootViewController:viewController]; 
```

然后方向在 iOS6 上完美运行，但在 iOS6 之前的 iOS 版本上，窗口大小的宽度和高度被颠倒了，并导致游戏出现问题。我通过在运行我的正常场景之前添加一个空白场景来解决这个问题，因为在推送新场景时反向大小是自行固定的。从空白场景我跑了 [[CCDirector sharedDirector] replaceWithScene:[Game scene]]; 延迟后，它现在可以工作了。

# javascript - 是否可以在 iframe 内容中加载混淆的 html？

> ID：12526827
> 
> 赞同：1
> 
> 时间：2012-09-21T08:26:06.707
> 
> 标签：javascript, html

我有个疑问。我有一个混淆的 html，我想将它加载到 iframe 组件中。我想在将其加载到 iframe 组件中之前对其进行模糊处理。可能吗？有没有这样的javascript工具？有任何想法吗？

添加了一个链接。

[http://colddata.com/developers/online_tools/obfuscator.shtml#obfuscator_view](http://colddata.com/developers/online_tools/obfuscator.shtml#obfuscator_view)

原始代码：

混淆代码：

```
<script type='text/javascript'>
<!--
var s="=iunm?=cpez?=ejw!dmbtt>#b#?=0ejw?=0cpez?=0iunm?";
m=""; for (i=0; i<s.length; i++) {  if(s.charCodeAt(i) == 28){    m+= '&';} else if (s.charCodeAt(i) == 23) {     m+= '!';} else {    m+=String.fromCharCode(s.charCodeAt(i)-1);    }}document.write(m);//-->
</script> 
```

所以最后我会有一个像这样的文件，但是当我要加载 iframe 组件时，我想看到真正的代码。我想要使​​用混淆代码的原因是因为我将在 android 设备中保留一些静态 html 并加载这些 html，因为我将它保留在我想要混淆的设备中。最初我虽然加密。但这会导致性能影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:37:49.650

使用 jQuery 在 iframe 中加载 HTML：

```
var html = '<div>Your HTML</div>';
$("iframe").contents().find("body").html(html); 
```

iframe 的域和它的父域必须匹配。

至于混淆的事情，不要那样做，如果你可以取消混淆，每个人都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:52:16.160

如果您只是为了防止人们在操作系统中快速搜索内容而进行混淆，例如在简单游戏中隐藏解决方案，这在现代设备上是可以接受的：

```
var htmlString = 'this is a test', base64EncodedString = '';

base64EncodedString = window.bToA( htmlString ); 
```

然后，您只需要使用以下内容来反转：

```
htmlString = window.aToB( base64EncodedString ); 
```

然后，您可以使用 Pioul 的方法将其放置在 iframe 中。

然而，正如人们所说，出于其他原因的混淆 - 即适当的安全保护 - 是相当没有意义的，因为对您的应用程序编码人员有一点了解可以轻松地逆转您所做的任何事情*（特别是因为混淆中涉及的所有内容都在客户端工作）* .

# c# - 读取动态添加的标头的 Gridview 标头值

> ID：12526847
> 
> 赞同：2
> 
> 时间：2012-09-21T08:26:57.133
> 
> 标签：c#, asp.net, .net

我正在动态添加表格标题行，如下所示。它被正确渲染。现在我需要在按钮单击事件中读取新添加的标题行的第一个单元格值。我们如何读取标头值？

我不能使用**gvCustomers.Rows**因为它不会占用标题行。

我不能使用**gvCustomers.HeaderRow.Cells[0].Text**；也因为有两个标题行

代码

```
protected void gvCustomers_RowCreated(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.Header)
    {
        GridViewRow newHeaderRow = new GridViewRow(-1, -1, DataControlRowType.Header, DataControlRowState.Normal);

        TableCell cell1 = new TableHeaderCell();
        cell1.ColumnSpan = 1; //e.Row.Cells.Count;
        cell1.Text = "Expected";

        TableCell cell2 = new TableCell();
        cell2.ColumnSpan = 2;
        cell2.Text = "One";

        TableCell cell3 = new TableCell();
        cell3.ColumnSpan = 2;
        cell3.Text = "Two";

        TableCell cell4 = new TableCell();
        cell4.ColumnSpan = 2;
        cell4.Text = "Three";

        newHeaderRow.Cells.Add(cell1);
        newHeaderRow.Cells.Add(cell2);
        newHeaderRow.Cells.Add(cell3);
        newHeaderRow.Cells.Add(cell4);

        ((GridView)sender).Controls[0].Controls.AddAt(0, newHeaderRow);
    }

}

protected void Btn_Click(object sender, EventArgs args)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:30:18.830

我正在使用以下方法。有什么改进建议吗？

```
 int current = 0;
        int headerCount = grdTransactions.HeaderRow.Cells.Count;

        for (current = 0; current < headerCount; current++)
        {
            TableHeaderCell cell = new TableHeaderCell();
            cell.Text = grdTransactions.HeaderRow.Cells[current].Text;
            originalHeaderRow.Cells.Add(cell);
        } 
```

# c# - RegularExpressionValidator - 验证字符串与表达式不匹配

> ID：12526849
> 
> 赞同：3
> 
> 时间：2012-09-21T08:27:00.663
> 
> 标签：c#, asp.net, regex

我正在尝试编写一个正则表达式（用于 ASP.NET RegularExpressionValidator），以便：

如果要验证的字符串包含字母 A 后跟字母 B，则验证应该失败。

如果要验证的字符串包含字母 F 后跟 W、X、Y、Z 或任何数字，则验证应该失败。

我想出了这个

```
(AB)|(F(W|X|Y|Z|[0-9])) 
```

但据我所知，如果输入与该表达式匹配，验证将成功。

如果输入与该表达式不匹配，我需要做什么才能使验证失败？

非常感谢，

大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:43:54.213

这就是[负前瞻](http://www.regular-expressions.info/lookaround.html)的用途

```
(?!.*AB)(?!.*F[WXYZ\d]) 
```

在这些字符串上失败。它还没有匹配任何文本（如果您只想检查是否有匹配项就足够了），因此匹配结果将始终为空字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:31:16.517

这会起作用：

```
A[^B]|F[^WXYZ0-9]|[^AF]. 
```

*   A 后跟除 B 之外的任何内容，或
*   F 后跟除 W、X、Y、Z 或数字以外的任何内容，或
*   A 或 F 后跟任何单个字符的其他内容

请注意，这也将匹配“A$”或“@@”。如果你只想匹配“一个字母后跟一个字母或数字”，那么使用这个：

```
A[AC-Z0-9]|F[A-V]|[B-EG-Z][A-Z0-9] 
```

正则表达式更擅长正匹配。

请注意，对于正则表达式验证器，整个字符串必须匹配（如果只有一个子字符串匹配，验证器会报告验证失败）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:32:34.380

您可以使用您的编程语言提供的逻辑非运算符来否定匹配操作返回的结果，无需修改您的正则表达式。

编辑：如果以上不是一个选项，请查看这些问题[1](https://stackoverflow.com/questions/164414/how-to-inverse-match-with-regex)、[2](https://stackoverflow.com/questions/957379/invert-match-with-regexp)和[3](https://stackoverflow.com/questions/850907/regular-expression-opposite/850918#850918)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T09:14:19.957

您可以对此正则表达式进行匹配

```
^(?!^.*?AB)(?!^.*?F[WXYZ\d]).*$ 
```

[这](http://rubular.com/r/ug0Hp0njmX)是一个工作示例。基本上它的意思是“找到所有字符串，除了包含 AB 的字符串之前和之后具有任意数量的字符，以及包含 F 后跟 W、X、Y、Z 或数字的字符串”。Tim Pietzcker 的回答中提供了[此](http://www.regular-expressions.info/lookaround.html)链接上的信息

# android - 如何从 android 喜欢 Facebook 页面

> ID：12526850
> 
> 赞同：0
> 
> 时间：2012-09-21T08:27:15.577
> 
> 标签：android, facebook, facebook-graph-api

我想喜欢来自 android 应用程序的 facebook 页面..这在 android 中可能吗？如果是，那么如何？任何线索来实现这一目标？答案将不胜感激

# ruby - 在 rspec 中覆盖 --fail-fast

> ID：12526851
> 
> 赞同：2
> 
> 时间：2012-09-21T08:27:19.710
> 
> 标签：ruby, testing, rspec, continuous-integration

我在本地机器和 CI 服务器中运行规范。在第一种情况下，我希望规范快速失败，而在另一种情况下，我希望运行所有规范。我已经`--fail-fast`在我的`.rspec`文件中设置了。如何在 CI 服务器上覆盖它？我在那里运行 RSpec`rake spec`并设置了`SPEC_OPTS`env 变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:02:46.990

最简单的答案是`.rspec`从您的回购中删除。它仅供您使用，任何其他贡献者不需要看到您正在使用[NyanCat](https://github.com/mattsears/nyan-cat-formatter)来查看您的测试如何进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T23:34:31.057

您可以在主目录中添加一个`.rspec`文件，以便设置仅适用于您的本地计算机，然后`.rspec`项目目录中的 将覆盖那里的任何设置。

# java - 尝试在 java Web 服务中返回对象时发生错误

> ID：12526853
> 
> 赞同：0
> 
> 时间：2012-09-21T08:27:22.093
> 
> 标签：java, web-services, glassfish, netbeans-7

有人请帮助我克服我遇到的这个错误。我是 Java Web 服务的新手。我收到如下所述的错误。我正在使用 GlassFish 服务器和 NetBeans IDE。

```
CalculatorWSApplication a = port.setinfo(name, age);
required: CalculatorWSApplication
found:    CalculatorWSApplication_Type
1 error 
```

这是服务器程序

```
package org.me.calculator;

import com.sun.tools.xjc.api.S2JJAXBModel;
import javax.annotation.*;
import javax.annotation.PreDestroy;
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.ejb.Stateless;

@WebService(serviceName = "CalculatorWSApplication")
@Stateless()
public class CalculatorWSApplication {
public String firstName;
public String secondName;

    /**
     * Web service operation
     */
    @WebMethod(operationName = "add")
    public int add(@WebParam(name = "i") int i, @WebParam(name = "j") int j) {
        //TODO write your implementation code here:
        int k = i + j;
        return k;
    }

    @WebMethod(operationName = "setinfo")
    public CalculatorWSApplication setinfo(@WebParam(name = "firstName") String firstName, @WebParam(name = "secondName") String secondName) {
        CalculatorWSApplication a = new CalculatorWSApplication();
        //TODO write your implementation code here:
        System.out.println("Called");
        a.firstName = firstName;
        a.secondName = secondName;
        System.out.println(a.firstName);
        System.out.println(a.secondName);
        return a;
    }

    @PostConstruct
    public void sayHello(){
        System.out.println("Hello");
    }

    @PreDestroy
    public void sayBye(){
        System.out.println("Bye");
    }
} 
```

这里是 Client 程序包含两个 web 方法。第一个是 add，它返回 am Integer 第二个是 setFirstNameandLastName，它返回 CalculatorWSApplication 对象。

```
package calculatorws_client_application;

import org.me.calculator.CalculatorWSApplication;

public class CalculatorWS_Client_Application {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        try{
    int i = 3;
    int j = 4;
    int result = add(i, j);
    setFirstNameandLastName("Rajesh","Gubbianna");
    System.out.println("Result = " + result);

        } catch(Exception ex){
            System.out.println("Exception: " + ex);
            ex.printStackTrace();
        }
    }

    private static int add(int i, int j) {
        org.me.calculator.CalculatorWSApplication_Service service = new org.me.calculator.CalculatorWSApplication_Service();
        org.me.calculator.CalculatorWSApplication port = service.getCalculatorWSApplicationPort();
        return port.add(i, j);
    }

    private static void setFirstNameandLastName(String name, String age){
        org.me.calculator.CalculatorWSApplication_Service service = new org.me.calculator.CalculatorWSApplication_Service();
        org.me.calculator.CalculatorWSApplication port = service.getCalculatorWSApplicationPort();
        System.out.println(name + " " + age);
        CalculatorWSApplication a = port.setinfo(name, age);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T13:12:28.810

## 一个有效的端点实现类必须满足以下要求：

*   它必须带有 javax.jws.WebService 注释。
*   它的任何方法都可以带有 javax.jws.WebMethod 注释。
*   除了任何特定于服务的异常之外，它的所有方法都可能抛出 java.rmi.RemoteException。
*   所有方法参数和返回类型都必须与 JAXB 2.0 Java 到 XML 模式映射定义兼容。
*   方法参数或返回值类型不得直接或间接实现 java.rmi.Remote 接口。

## Java 数据类型

* * *

boolean、byte、double、float、long、int、javax.activation.DataHandler、java.awt.Image、java.lang.Object、java.lang.String 等

有关更多信息和数据类型的完整列表，您可以查看此链接

[点击这里](http://docs.oracle.com/cd/E21764_01/web.1111/e13758/data_types.htm#i231438)

# asp.net-mvc-3 - Scorm 模块启动窗口能够调整大小

> ID：12526855
> 
> 赞同：1
> 
> 时间：2012-09-21T08:27:35.073
> 
> 标签：asp.net-mvc-3, scorm

我从人们那里获取元数据和清单文件，然后当我启动它时，窗口太小或太大。在我的 Scrom 控制器中，我为其调整大小和保存新值做好了准备。

```
[HttpGet]
[NoCache]
public JsonResult ToggleLaunchResize(int scormModuleId)
{
    var module = ZincService.ScormService.GetScormModule(scormModuleId);
    if (module != null)
    {
        try
        {
            module.LaunchResize = !module.LaunchResize;
            ZincService.ScormService.UpdateScormModuleSettings(module);
            ZincService.SaveChanges();
            return Json(new { hasLaunchResize = module.LaunchResize ? "Yes" : "No" }, JsonRequestBehavior.AllowGet);
        }
        catch (Exception ex)
        {
            Logger.Error(ex, "Error toggling HasLaunchResize property for scorm module with Id " + scormModuleId);
            return Json(new { hasLaunchResize = "unkown" }, JsonRequestBehavior.AllowGet);
        }
    }
    else
        return Json(new { success = false }, JsonRequestBehavior.AllowGet);
} 
```

如果我选择是，为什么我不能调整窗口大小？我是一个菜鸟，所以还不知道这一切是如何运作的。请帮忙？

谢谢

# ios - 使用 Cocos2d-x 打开 Game Center UI

> ID：12526858
> 
> 赞同：3
> 
> 时间：2012-09-21T08:27:53.777
> 
> 标签：ios, cocoa, cocos2d-iphone, game-center, cocos2d-x

我已经进行了设置，以便我的应用可以连接到 Game Center。我遵循[本](http://ganbarugames.com/2011/07/cocos2d-game-center/)指南并有一个 C++ 类包装器可以在我的其他类中调用它们。我正在使用 iPad (iOS 5.1)、iPod Touch 4th Gen (iOS 5.1) 和 iPhone 4s 和 3GS 进行测试。它可以在 iPad 设备上正常工作，但由于某些未知原因，它不能在 iPhone 和 iPod 上运行。它正确连接到沙盒，但未显示 UI，或者更确切地说，UI 位于屏幕外的某个位置。

iPhone上发生的事情是：

1.  如果我没有登录并访问 Game Center，则会出现一个登录窗口。当我登录时，什么也没有发生。但是，控制台说添加了一个视图。
2.  如果我已登录并访问 Game Center，则不会发生任何事情。但是，控制台说添加了一个视图。
3.  如果我在通过身份验证之前访问 Game Center，则会出现 Game Center UI。然而...
    *   Game Center 处于横向模式（那里没有问题，因为我的应用程序是横向的），但顶部栏（带有 DONE 按钮的栏）被放置为好像方向是纵向的。
    *   没有显示整个 UI，只显示了大约 30% 的屏幕。

这就是我启动 Game Center UI 的方式：

```
- (void)showLeaderboardForCategory:(NSString *)category
{
    // Only execute if OS supports Game Center & player is logged in
    if ( hasGameCenter )
    {
        // Create leaderboard view w/ default Game Center style
        GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];

        // If view controller was successfully created...
        if (leaderboardController != nil)
        {
            // Leaderboard config
            leaderboardController.leaderboardDelegate = self;   // The leaderboard view controller will send messages to this object
            leaderboardController.category = category;  // Set category here
            leaderboardController.timeScope = GKLeaderboardTimeScopeToday;  // GKLeaderboardTimeScopeToday, GKLeaderboardTimeScopeWeek, GKLeaderboardTimeScopeAllTime

            // Create an additional UIViewController to attach the GKLeaderboardViewController to
            myViewController = [[UIViewController alloc] initWithNibName:nil bundle:nil ];

            // Add the temporary UIViewController to the main OpenGL view
            // NOTE: This is the part that I think is the suspect. I am not sure if iPhones and iPods support EAGLView.
            [ [ EAGLView sharedEGLView ] addSubview:myViewController.view ];

            // Tell UIViewController to present the leaderboard
            [ myViewController presentModalViewController:leaderboardController animated:NO ];
            NSLog( @"Leaderboard opened." );
        }
    }
} 
```

任何帮助表示赞赏并提前感谢。

**编辑**：使用 OpenFeint 不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:11:57.273

试试这个。不要使用“EAGLView”

```
- (void) showLeaderboard
{
    if (!gameCenterAvailable) return;

    GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
    if (leaderboardController != nil) {
        leaderboardController.leaderboardDelegate = self;

        UIWindow *window = [[UIApplication sharedApplication] keyWindow];
        currentModalViewController = [[UIViewController alloc] init];
        [window addSubview:currentModalViewController.view];
        [currentModalViewController presentModalViewController:leaderboardController animated:YES];
    }

} 
```

# android - 在android中突出显示图像上的文本

> ID：12526861
> 
> 赞同：2
> 
> 时间：2012-09-21T08:28:08.350
> 
> 标签：android, image-processing

我正在开发一个应用程序，其中包含包含文本的 pdf 图像，我需要突出显示用户用手指长按的文本，就像在 repligo 等 pdf 阅读器中一样。我搜索了很多但没有找到任何相关的方法来做到这一点。有人可以分享这样做的想法吗，或者如果有人可以通过一些代码或示例进行解释，它可能会更有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:55:24.360

我的朋友。甚至我也在思考同样的情况。据我说，只有知道文本的像素值才能做到这一点。我的意思是从哪里开始，在哪个像素结束。然后你必须为整个 pdf 创建一个数据库，比如市场上的古兰经 Android 应用程序。他们只是在将数据从服务器发送到客户端之前识别设备。' 假设您使用的是平板电脑，那么如果您使用的是移动设备，那么平板电脑特定的像素就会出现，那么设备特定的坐标将以数据库的形式出现，可以通过触摸轻松匹配。然后你可以很容易地找到要选择的单词或段落。然后您可以使用 Canvas 中的 Path 对象进行选择部分。谢谢你

# php - 如何使用 Codeigniter 将 JQuery datepicker 中的值插入 MySQL 日期数据类型？

> ID：12526863
> 
> 赞同：6
> 
> 时间：2012-09-21T08:28:08.550
> 
> 标签：php, jquery, mysql, codeigniter

我无法将 JQuery Datepicker 中的值插入到具有 Date 数据类型的 MySQL 数据库中。我将如何将字符串转换为日期数据类型？我将 Codeigniter 与 MVC 一起使用。这是我的代码：

javascript

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({
        showOn: "button",
        buttonImage: "images/icons/calendar_24.png",
        buttonImageOnly: true,
        onSelect: function(dateText, inst){
            $("input[name='dob']").val(dateText);
        }
    });

});
</script> 
```

控制器

```
function create()
{
    $data = array(
        'FirstName' => $this->input->post('fname'),
        'DateofBirth' => $this->input->post('dob')
    );

    $this->site_model->add_record($data);
    $this->index();
} 
```

看法

```
<?php echo form_open('site/create');?>
<p>
    <label for="fname">First Name:</label>
    <input type="text" name="fname" />
</p>

<p>
    <input type="text" name='dob' id="datepicker" />
</p> 
```

多谢你们！我在谷歌阅读了一些解决方案，我这样做了：

控制器：

```
function create()
{
    $date = $this->input->post('dob');

    $data = array(
        'FirstName' => $this->input->post('fname'),
        'DateofBirth' => date('Y-m-d', strtotime($date))
    );

    $this->site_model->add_record($data);
    $this->index();
} 
```

这解决了我的问题！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:33:58.903

我假设您的 MySQL 表的 dob 列是`DATE`类型。 type 以eg`Date`的格式取值`yyyy-mm-dd``2012-09-21`

因此，要回答您的问题 - 您需要将日期选择器中的日期格式化为上述有效格式。例如，如果您的 datepicker 日期的`dd-mm-yy`格式是您需要使用`date()`控制器中的 php 函数将其转换为 mysql 日期格式....（还有其他方法可以处理日期，例如 datetime 类）

```
function create()
{
    $data = array(
        'FirstName' => $this->input->post('fname'),
        'DateofBirth' => date('Y-m-d', strtotime(str_replace('-', '/', $this->input->post('dob')))); 
    );

    $this->site_model->add_record($data);
    $this->index();
} 
```

**使用 strtotime() 时的注意事项**

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:34:46.810

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({
        showOn: "button",
        buttonImage: "images/icons/calendar_24.png",
        buttonImageOnly: true,
        dateFormat: 'Y-m-d'       // No need to add onselect , value selected will automatically be added to input field #datepicker       
    });

});
</script> 
```

你的代码很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:28:56.747

```
$(document).ready(function() {

    var year=new Date().getFullYear();
    var yearTo=year-18;
    var yearFrom=year-100;

    //display the years from hundred years in the past till 18 years in the past

    $( "#datePickerDOB" ).live("click",function(){      

        $( "#datePickerDOB" ).datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: yearFrom+":"+yearTo,
            dateFormat: "dd-mm-yy"
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T19:20:56.780

使用以下内容格式化日期选择器：

$('#datepicker').datepicker({dateFormat : 'yy-mm-dd'});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-14T10:46:07.460

您的控制器应如下所示：

```
{
    $date = $this->input->post('dob');

    $data = array(
        'FirstName' => $this->input->post('fname'),
        'DateofBirth' => date('Y-m-d', strtotime($date))
    );

    $this->site_model->add_record($data);
    $this->index();
} 
```

我觉得这个更适合你

# java - Eclipse RCP：如何导出启动配置插件？

> ID：12526865
> 
> 赞同：4
> 
> 时间：2012-09-21T08:28:19.863
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-indigo, eclipse-fragment

***注意：**这不是关于产品导出问题的任何问题的重复：我已经可以在 gui 和无头 pde 构建中成功导出。*

我正在 Eclipse Indigo (3.7) 上开发 RCP 应用程序，该应用程序处于发布前的最后阶段。品牌产品在其自己的插件中是基于功能的，包括：

> *   myapp 主要（和独特的）功能
> *   org.eclipse.rcp
> *   org.eclipse.equinox.p2.feature
> *   org.eclipse.help

主要功能收集（包括）构成应用程序的所有插件以及来自 org.eclipse.rcp 和 org.eclipse.equinox.p2 功能的最低要求的插件集；它取决于 p2 自配置所需的插件以及我的应用程序运行所需的最少平台插件集。

然后我必须添加翻译，并将 eclipse-babel 的快照添加到目标。

这是这种情况：

*   我同步产品
*   我启动产品，生成新的启动配置
    *   --> 只翻译 GUI 的某些部分
*   我打开启动配置-插件选项卡-然后单击“添加所需插件”
*   包含的插件数量增加（从大约 130 个增加到大约 180 个）
    *   --> 现在当我启动应用程序时，所有内容都已翻译

所以我不得不在点击“选择需要”后手动复制启动中包含的片段，到功能包括（实际上只有包含翻译的片段）。那解决了它。

问题：有没有一种方法可以导出*当前*在启动配置中选择的插件列表？或任何其他将启动配置中包含的内容与功能中包含的内容同步的方法（*不是*相反）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:09:34.537

`File->Export->Launch`配置不适合你？

# datagridview - Datagridview 行数据到字符串 []

> ID：12526871
> 
> 赞同：0
> 
> 时间：2012-09-21T08:28:50.130
> 
> 标签：datagridview, rows, tostring

我已经尝试找到解决方案！- 但我没有成功 -.-

我想将 datagridview 行添加到字符串数组中！

我试过这个：

```
string[] Name = new string[10]
for (int i = 0; i < dataGridView1.Rows.Count; i++)
{
    Name[i] = dataGridView1.Rows[i];
} 
```

我知道这个问题，但我不知道如何解决它，我怎么能说我需要行中所有条目的字符串值的数据网格，不需要单元格或列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:38:32.167

试试这个来获取字符串：

```
string[] Name = new string[10]
for (int i = 0; i < dataGridView1.Rows.Count; i++)
{
    Name[i] = dataGridView1.Rows[i].Cells[0].Text;
} 
```

您的旧方法是从您返回`GridViewRow`的对象 `dataGridView1.Rows[i]` 而不是您想要的内容字符串

来自的`Rows`属性`GridView`是一个`GridViewRowCollection`包含“很多”`GridViewRow`对象的属性，每个`GridViewRow`包含`TableCellCollection`包含“很多”`TableCell`对象的`Text`属性，该对象包含您在网格上绑定的内容的属性

我希望你的解释很清楚

# google-maps-api-3 - 如何根据运输类型计算距离

> ID：12526872
> 
> 赞同：0
> 
> 时间：2012-09-21T08:28:50.153
> 
> 标签：google-maps-api-3, google-maps-markers

如何使用 google map API 根据交通方式计算两地之间的距离？

我需要设计类似谷歌地图本身的东西，设置起点和目的地，然后设置交通类型（汽车、步行、公共交通），然后根据它们计算距离。

我的应用程序是 Web 应用程序而不是移动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:52:10.800

如果要计算两个地理坐标之间的距离，则可以使用**hypersion 公式**。它给出了两个点之间的相同距离。如果你想根据交通计算距离，我认为你必须自己手动完成。

```
rad = function(x) {return x*Math.PI/180;}

distHaversine = function(p1, p2) {
  var R = 6371; // earth's mean radius in km
  var dLat  = rad(p2.lat() - p1.lat());
  var dLong = rad(p2.lng() - p1.lng());

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) * Math.sin(dLong/2) * Math.sin(dLong/2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var d = R * c;

  return d.toFixed(3);
} 
```

已编辑：要根据不同的交通工具显示路径，您可以调用如下所示的 url。我不知道正确的做法在哪里。

```
"http://maps.google.com/maps?saddr=" + currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:25:11.010

我想你的意思是“方向”

看看这部分文档：

[https://developers.google.com/maps/documentation/directions/#TravelModes](https://developers.google.com/maps/documentation/directions/#TravelModes)

小心，你有[使用限制](https://developers.google.com/maps/documentation/directions/#Limits)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:48:07.457

我用距离矩阵解决了这个问题，谢谢大家。

# java - AChartEngine 中 X 轴标题和 X 轴标签之间的边距

> ID：12526873
> 
> 赞同：8
> 
> 时间：2012-09-21T08:28:55.910
> 
> 标签：java, android, achartengine

我正在使用 AChartEngine 堆积条形图。我可以在 X 轴标题和 X 轴标签之间添加间距吗？他们彼此太封闭了。

设置底部边距只会在 X 轴标题和图例之间添加间距。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T09:50:37.400

解决了我的问题的快速补丁，修改您的 X 轴标题并在其前面加上新行，例如

```
 renderer.setXTitle("\n\n\n Months"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-21T08:40:42.073

使用`setMargins()`方法。您可以设置图表和屏幕边距之间的边距。

```
renderer.setMargins(new int[] {30, 100, 10, 0); 
```

参数数组中值的顺序为：上、左、下、右。因此，您将需要增加左值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T21:14:59.453

使用这个方法：setXLabelsPadding

# android - 如何在android中更改默认下载位置

> ID：12526874
> 
> 赞同：2
> 
> 时间：2012-09-21T08:28:55.253
> 
> 标签：android

我有一个 webview，当用户单击 webview 的下载链接时，我想将文件下载到 sdcard 自定义文件夹。

我正在使用以下代码从 webview 下载文件：

```
webView.setDownloadListener(new DownloadListener() {
  public void onDownloadStart(String url, String userAgent,
    String contentDisposition, String mimetype,
    long contentLength) {
    strurl = url;

    Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));

startActivity(i);
} 
```

它工作正常。但它直接下载到该`/sdcard/download/`文件夹​​。但我希望它下载到 sdcard 上的其他文件夹。我怎样才能做到这一点？

# jquery - jquery显示不可见的div

> ID：12526878
> 
> 赞同：0
> 
> 时间：2012-09-21T08:29:15.667
> 
> 标签：jquery, asp.net, updatepanel

我有几个问题，因为我是 ASP.Net 的新手

1.  我有一个 aspx 页面设置如下；

    无序列表区域隐藏div隐藏div

无序列表代码：

```
<div class="literaltext">
        <p> We utilize two types of systems for mixing EnerBurn&reg; with your fuel supply to deliver it to your diesel engine,<br /> On-Board systems and Bulk Fueling systems. Click on an item below for more information.</p>
        <ul class="ulGreen">
            <li><b>On-Board systems - Road Vehicle</b><span style="color:black;"> (See an installation picture<a href="#" onclick="picDisplay('onBoardVehiclepicdisplay')">here</a>)</span> </li>
            <li><b>On-Board systems - Marine Vessel</b><span style="color:black;"> (See an installation picture<a href="#" onclick="picDisplay('onBoardVesselpicdisplay')">here</a>)</span> </li>
            <li><b>On-Board systems - Fueling Barge</b><span style="color:black;"> (See an installation picture<a href="#" onclick="picDisplay('onBoardBargepicdisplay')">here</a>)</span> </li>

        </ul>
    </div> 
```

隐藏的 div 是这样设置的；（为简洁起见，仅显示 3 个中的 2 个）

```
<div id="onBoardVehiclepicdisplay" class="invisible">
        <fieldset class="dynamicinjectionpics">
            <legend>"Schlumberger On-Board Injection Unit"</legend>
             <img Height="300px" Width="400px" alt=""
             src="Images/InjectionUnitPictures/SchlumbergerInjectionUnit_FrackTruck.jpg"/>&nbsp;&nbsp;&nbsp;
             <img Height="300px" Width="400px" alt=""
             src="Images/InjectionUnitPictures/SchlumbergerInjectionUnit_FrackTruck_withEnclosure.jpg"/>
             <br /><span id="Image1Text" runat="server">Typical injection unit installation (shown here on a Fracking Unit)</span>

        </fieldset>
    </div>
    <div id="onBoardVesselpicdisplay" class="invisible">
        <fieldset class="dynamicinjectionpics">
            <legend>"Vessel Fuel Intake Line Mounted Injection System"</legend>
             <img Height="300px" Width="400px" alt=""
             src="Images/InjectionUnitPictures/SP-600 Injector.jpg"/>&nbsp;&nbsp;&nbsp;
             <img Height="300px" Width="400px" alt=""
             src="Images/InjectionUnitPictures/MarionInjector Installation.JPG"/>
             <br /><span id="Span1" runat="server">Typical injection unit installation for single vessel</span>

        </fieldset>
    </div> 
```

我想使用 JQuery 将隐藏 div 的类更改为在使用指定的 onclick 函数单击锚标记时可见。这是最好的方法吗？我应该在隐藏的 div 周围有一个更新面板吗？我使用的第一种方法是调用页面重新加载，在其中我为所选标签的图片注入了 innerHTML，它有效，但我假设这是一种业余且不太有效的方法来完成此操作。

此查询不起作用；（无法让 picDisplay 函数识别参数，因此我对其中一个 div id 进行了硬编码以尝试使其工作）

```
<script>
    $(function () {
        function picDisplay(divId) {
            $("[id='onBoardVehiclepicdisplay']").toggleClass('visible');

        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:36:52.537

这是我要做的：

给每个链接添加一个data-rel标签，指的是相关的隐藏div：

```
<a href="#" data-rel="onBoardVehiclepicdisplay">here</a> 
```

使用以下 jQuery：

```
$('.ulGreen').delegate('li a', 'click', function(e){
    e.preventDefault();
    var target = $(this).attr('data-rel');
    $('#' + target).toggleClass('invisible'); // or show()/hide()
}); 
```

编辑 - 错过了 toggleclass 目标中的“#”。这里的工作示例：http: [//jsfiddle.net/aF5Pg/](http://jsfiddle.net/aF5Pg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:31:58.377

试试这个：

```
$('#onBoardVehiclepicdisplay').toggleClass('visible'); 
```

您应该阅读以下内容：[id 选择器](http://api.jquery.com/id-selector/)。

您还应该将 onclick 属性（已弃用）替换为：

```
<li><a href="#onBoardVehiclepicdisplay">...</a> 
```

```
$('li > a').click(function (event) {
    event.preventDefault(); //to block the link

    var id = $(this).attr('href');
    $(id).toggleClass('visible');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:32:23.100

实际上有两种简单的方法可以做到这一点：

1.  使用 .css()
2.  使用 .toggleClass() 或 .hasClass()、.removeClass() 和 .addClass()

我认为最简单的方法是使用 .css()

你将会拥有 ：

```
function toggleVisible() {
    if($(this).css("display") == "none")
        $(this).css("display", "block");
    else
        $(this).css("display", "none");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:35:57.257

1.  不，您不需要更新面板来实现您想要做的事情。

2.  其次，我们需要更多关于您的方案的信息，以便为您获得最佳结果。按钮在哪里，是否会为每个要显示的按钮分配一个按钮？

IE

```
<div id="onBoardVesselpicdisplay">
</div>

<input id="onBoardButton" /> 
```

将会：

```
$('#onBoardButton').on('click', function() {
    $('#onBoardVesselpicdisplay').toggleClass('visible');
}); 
```

如果您的情况比这更复杂，那么请解释您要做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T08:42:10.267

据我所知，asp.net 将根据组件 ID 生成随机客户端 ID。所以你可以在 Jquery 上使用[包含选择器。](http://api.jquery.com/attribute-contains-selector/)

对于您的代码，只需修改为：

```
<script>
    $(function () {
        function picDisplay(divId) {
            $("[id*='onBoardVehiclepicdisplay']").toggleClass('visible');

        }
    });

</script> 
```

您还可以使用[带有选择器的结束](http://api.jquery.com/attribute-ends-with-selector/)或[从选择器开始操作](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T08:45:12.837

[这是另一种方法](http://jsfiddle.net/5arx/FUaZR/15/)。它利用了您可以向 HTML 元素添加多个类的事实。首先隐藏所有“可隐藏”的 div，然后单击找到您需要显示的 div 并显示它。我认为一种更现代的方法是使用该`data-rel`属性（但我在工作并且太忙而无法查看它 - 我还没有完全采用它）

div 在加载时全部隐藏：

```
$(document).ready(function() {
    //Hide all of them initially
    $('.toHide').hide();
}); 
```

*单击 LI内*的锚点时，将组装要显示的 div 的类名，并使用 JQuery.show() 取消隐藏它。

```
$('LI A').click(function() {
    $('.toHide').hide(); //hide all the divs first 
    $('.div-' +    ($(this).attr('class'))).show(); //reveal the one you want.
}); 
```

# r - R中的树模型可以在节点处处理n路拆分，对于n> = 4

> ID：12526882
> 
> 赞同：2
> 
> 时间：2012-09-21T08:29:48.283
> 
> 标签：r, decision-tree, n-way

关于 R 树模型的快速问题。我想在很多变量（主要是数字或因子变量）上生成一个树模型。其中一个变量是*Gender*，其中类别为*male、female*和*unknown*。当我使用and库中的`tree`or`rpart`函数时，我只从*Gender*根中得到两个分支。未知性别已与女性归为一个类别。所以我得到的分支是*Female+Unknown*和*Male*。我检查了树包pdf [http://cran.r-project.org/web/packages/tree/tree.pdf](http://cran.r-project.org/web/packages/tree/tree.pdf)它说`tree``rpart`****无序因子的水平分为两个非空组*。rpart 函数在处理超过 2 个级别的因素方面似乎与树函数非常相似。***

 **因此，我的问题是**R 中是否还有其他功能或包可以让我从单个节点生成 3 个以上的分支，**或者是否有人对其他开源工具有任何建议可以做同样的事情。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:40:55.833

`rpart()`完全能够处理超过 2 个类别的响应。尝试：

```
require(rpart)
mod <- rpart(Species ~ ., data = iris)
mod
plot(mod)
text(mod) 
```

当使用默认设置运行时，它会生成一个具有 3 个终端节点的树：

```
R> mod
n= 150 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

    1) root 150 100 setosa (0.33333333 0.33333333 0.33333333)  
      2) Petal.Length< 2.45 50   0 setosa (1.00000000 0.00000000 0.00000000) *
      3) Petal.Length>=2.45 100  50 versicolor (0.00000000 0.50000000 0.50000000)  
        6) Petal.Width< 1.75 54   5 versicolor (0.00000000 0.90740741 0.09259259) *
        7) Petal.Width>=1.75 46   1 virginica (0.00000000 0.02173913 0.97826087) * 
```

The recursive partitioning algorithm will stop building a tree when certain stopping rules are met (there is no point splitting if a node is already pure [of a single class], and by default a node has to have 20+ observations for it to be split, and will also stop splitting a given node if it has less than 7 observations, or if no further splits will improve the lack of fit by a factor of 0.01, and so on). Some of these can be controlled from the `rpart.control()` function.

From what limited information you have given us, I can only conclude that these defaults are inappropriate for your data set and you should adjust them accordingly, e.g.:

```
ctrl <- rpart.control(minsplit = 2, minbucket = 1, cp = 0.00001)
mod2 <- rpart(Species ~ ., data = iris, control = ctrl)
mod2
plot(mod2)
text(mod2) 
```

Which for this exmaple data set produces a much larger tree:

```
R>     mod2
n= 150 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 150 100 setosa (0.33333333 0.33333333 0.33333333)  
   2) Petal.Length< 2.45 50   0 setosa (1.00000000 0.00000000 0.00000000) *
   3) Petal.Length>=2.45 100  50 versicolor (0.00000000 0.50000000 0.50000000)  
     6) Petal.Width< 1.75 54   5 versicolor (0.00000000 0.90740741 0.09259259)  
      12) Petal.Length< 4.95 48   1 versicolor (0.00000000 0.97916667 0.02083333)  
        24) Petal.Width< 1.65 47   0 versicolor (0.00000000 1.00000000 0.00000000) *
        25) Petal.Width>=1.65 1   0 virginica (0.00000000 0.00000000 1.00000000) *
      13) Petal.Length>=4.95 6   2 virginica (0.00000000 0.33333333 0.66666667)  
        26) Petal.Width>=1.55 3   1 versicolor (0.00000000 0.66666667 0.33333333)  
          52) Sepal.Length< 6.95 2   0 versicolor (0.00000000 1.00000000 0.00000000) *
          53) Sepal.Length>=6.95 1   0 virginica (0.00000000 0.00000000 1.00000000) *
        27) Petal.Width< 1.55 3   0 virginica (0.00000000 0.00000000 1.00000000) *
     7) Petal.Width>=1.75 46   1 virginica (0.00000000 0.02173913 0.97826087)  
      14) Petal.Length< 4.85 3   1 virginica (0.00000000 0.33333333 0.66666667)  
        28) Sepal.Length< 5.95 1   0 versicolor (0.00000000 1.00000000 0.00000000) *
        29) Sepal.Length>=5.95 2   0 virginica (0.00000000 0.00000000 1.00000000) *
      15) Petal.Length>=4.85 43   0 virginica (0.00000000 0.00000000 1.00000000) * 
```

but is most likely highly over-fitted to the data.

That said, there are, of course, other packages that can fit trees to data sets that like `rpart()` can handle response with more than two levels. The main ones are listed on the [Machine Learning & Statistical Learning](http://cran.r-project.org/web/views/MachineLearning.html) Task View on CRAN, which you should consult. One such package is **party**.**

# ruby-on-rails - 用户在 Rails 中更新键/值集合的视图和表单

> ID：12526886
> 
> 赞同：4
> 
> 时间：2012-09-21T08:30:03.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, erb

我正在使用 Rails 3.2.8，并且每个级别都有一组名称/答案对，用户可以在其中更新：

```
class UserAnswer < ActiveRecord::Base
  attr_accessible :name, :answer, :level_id, :user_id
end 
```

创建许多视图是如此痛苦：

```
<li<%if @error_fields.include?('example_name') or @error_fields.include?('example_other_name')%> class="error_section"<%end%>>
  <%= label_tag 'answer[example_name]', 'Example question:' %> <%= text_field_tag 'answer[example_name]', @user_answers['example_name'], placeholder: 'Enter answer', class: @error_fields.include?('example_name') ? 'error_field' : '' %>
  <%= label_tag 'answer[example_other_name]', 'Other example question:' %> <%= text_field_tag 'answer[example_other_name]', @user_answers['example_other_name'], placeholder: 'Enter other answer', class: @error_fields.include?('example_other_name') ? 'error_field' : '' %>
</li> 
```

`@user_answers`显然是保存用户上次更新答案的哈希值。上面重复的太多了。在 Rails 中处理这个问题的最佳方法是什么？我很想使用类似的东西`form_for`，但我认为我做不到，因为这不是单个模型对象，而是`UserAnswer`ActiveRecord 实例的集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:57:33.857

在助手中添加：

```
def field_for(what, errors = {})
  what = what.to_s
  text_field_tag("answer[#{what}]",
    @user_answers[what], placeholder: l(what),
    class: @error_fields.include?(what) ? 'error_field' : '')
end 
```

然后将适当的键添加到您的`en.yml`in `config/locales`。你唯一需要写的是：

```
<%= label_tag 'answer[example_name]', 'Example question:' %> <%= field_for :example_name, @error_fields %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:26:17.710

你熟悉 Rails 3.2 [ActiveRecord Store](http://edgeguides.rubyonrails.org/3_2_release_notes.html#active-record)吗？

这似乎是一种更简单的存储键/值的方法，并且允许您只说`@user_answer.example_name`而不是`answer[example_name]`. 然后你可以在你的表单中有一个 example_name 字段。

```
class UserAnswer < ActiveRecord::Base
  store :answers, accessors: [:example_name, :example_other_way]
end

answer = UserAnswer.new(example_name: "Example Name")
answer.example_name returns "Example Name" 
```

# java - 将csv文件上传到ftp而不在本地创建物理文件

> ID：12526888
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:30:09.290
> 
> 标签：java, ftp, stream

我想创建一个 csv 文件并将其发送到远程 ftp 服务器，我正在使用`CSVWriter`from `Apache Commons`。

目前，我正在创建一个本地临时文件，将此文件包装在一个 . 周围`Inputstream`，然后使用`client.store(<InputStream>,<Filename>)`方法将此流上传到远程 ftp 服务器。这里的问题是每次执行时都会创建一个本地临时文件。
我想摆脱这个并能够直接创建一个流，尤其是 csv 流。我的主要想法是避免创建本地临时文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:42:08.867

您可以将 ByteArrayOutputStream 包装在任何类型的 Writer 中，并将该 Writer 作为 CSVWriter 的参数。这样您就可以提取一个字节数组，它可以用作 ByteArrayInputStream 的参数。

如果是大量数据，可以使用 PipedInputStream 和 PipedOutputStream 的组合，而不是 ByteArray*Streams。

# javascript - 使用 Zombie.js 验证 Qunit 的结果

> ID：12526889
> 
> 赞同：2
> 
> 时间：2012-09-21T08:30:11.853
> 
> 标签：javascript, jquery, unit-testing, qunit, zombie.js

我正在做测试驱动开发[`Qunit`](http://qunitjs.com/)：当创建一个新函数时，我为它编写测试，创建函数，重新加载页面，如果所有测试都通过了，我继续......虽然这在一开始很好用，但它一段时间后开始成为一个耗时的过程，因为所有测试都需要几秒钟才能运行，这就是我每次刷新浏览器时都必须等待的时间。

为了解决这个问题，我考虑引入[`Zombie.js`](http://zombie.labnotes.org/)执行无头测试：这个想法是`Zombie.js`不断检查网页（例如`$ watch -n1 "node queryTheWebpage.js"`）并在编码时向我报告`Qunits`结果（偶尔，因为`Zombie.js`不是一个“真正的”浏览器，我会打开一个浏览器并手动检查页面以进行验证）。

到目前为止，这是我的节点/僵尸代码段：

```
browser.visit("http://localhost/mywebpage.html", function () {
        var qunit_tests = browser.query('body');
        console.log(qunit_tests.innerHTML);
}); 
```

在控制台输出中，我确实看到了`Qunit`测试容器`<ol id="qunit-tests"></ol>`，但它是空的，这意味着当`visit`调用回调函数时，测试还没有运行。

我尝试使用该`wait`功能等待测试运行，但未成功：

```
function waitForQunitToEnd(window) {
    var last = window.document.querySelector('selectorOfMyLastTest');
    var first_failed = window.document.querySelector('li.failed');
    return (last || first_failed);
}

browser.visit("http://localhost/mywebpage.html", function () {
    browser.wait(waitForQunitToEnd, function() {
        var qunit_tests = browser.query('body');
        console.log(qunit_tests.innerHTML); // still gives me empty <ol id="qunit-tests"></ol>
    });    
}); 
```

我尝试使用该`waitFor`选项（例如设置为`5000`ms），但这也无济于事。

**Q1：我正在尝试做的事情是否有意义，或者是否有更简单的方法来做类似的事情？**

**Q2：你知道我怎样才能让 Zombie.js 等待 Qunit 测试运行吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:38:07.870

我不知道它是否会帮助你，但看看这个：[http ://api.qunitjs.com/QUnit.done/](http://api.qunitjs.com/QUnit.done/)

# c++ - 如何创建一堆多维数组

> ID：12526893
> 
> 赞同：1
> 
> 时间：2012-09-21T08:30:26.110
> 
> 标签：c++, visual-studio-2010, multidimensional-array, stack

我知道如何创建一堆向量或 int 等。但我不知道如何创建一个多维数组 t[n][n] 的堆栈。实现它的方法是什么？这是我的实际实现，它不起作用。

```
char map[20][20];
stack<map> soluciones; 
```

编辑：

我想由于我的英语，你们中的大多数人都没有理解我的问题。想象一下，我得到了某种游戏地图。我将每个多维数组保存在堆栈上。这就是我将地图保存在堆栈上的目标

编辑 2：我使用 Visual Studio 2010 Windows 窗体应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:36:26.617

在您的代码示例中，您使用`map`（变量的名称）代替类型名称必须代表的位置（在`stack<map>`模板实例化中）。但是，即使您使用正确的类型名称，它也不起作用（在这种情况下，您必须使用 typedef，例如`typedef char TwoDimCharArray[20][20]`然后尝试`std::stack<TwoDimCharArray>`：

仍然存在数组没有默认构造函数（`std::stack`预期）的问题；因此，`std::stack`不能直接包含数组；您必须将数组包装在一个类或结构中（可以有一个默认构造函数），例如：

```
class TwoDimCharArray
{
public:
    // omit if there's nothing to initialize in map, then the
    // compiler-generated constructor will be used
    TwoDimCharArray()
    {
        // ... initalize map values
    }
    // ... provide access methods to map
private:
    char map[20][20];
};

std::stack<TwoDimCharArray> soluciones; 
```

或者使用[`Boost.Array`](http://www.boost.org/doc/libs/1_51_0/doc/html/array.html)C++11`std::array`的东西！如果这些可用，它们绝对是更好、更容易的选择！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:42:09.253

我想你应该为游戏地图定义一个适当的类。那么游戏地图的堆叠就不是问题了。

```
class GameMap {
public:
...
private:
  char map_[1000][1000];
}; 
```

然后，堆栈如何分配和管理地图数据就无关紧要了。例如

```
typedef std::stack<GameMap> GameMapStack; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:44:45.637

为多维数组定义一个包装类，如下所示：

```
template <class T, int X, int Y>
class Wrapper
{
public:
    T array[X][Y];
} 
```

然后使用`stack<Wrapper<char, 20, 20> >`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T08:46:33.507

首先创建结构，然后定义一个空的多维字符数组。然后关闭结构并在编写推送和弹出操作之后。

# c# - 一个DELETE查询，怎么知道没有什么要删除的？

> ID：12526896
> 
> 赞同：4
> 
> 时间：2012-09-21T08:30:45.330
> 
> 标签：c#, .net, sql, select

我目前正在完善与 SQL-Server 基础相关的 C# 应用程序。

这很简单，您可以通过应用程序中的某些字段在 SQL 表中添加或删除条目。

问题是：在删除操作中，我进行了这种查询：

```
DELETE FROM table 
 WHERE ID = @ID 
```

它删除了我要求它删除的内容，但是如果查询在数据库中找不到任何内容怎么办？我怎样才能检测到呢？因为在这种情况下，应用程序不会删除任何内容，也不会引发异常。简而言之，我只想告诉用户在这种情况下没有什么可删除的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T08:32:42.837

如果您使用`SqlCommand`对象，则有一个方法称为**[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)**. 该方法返回受影响的行数。所以，零意味着没有。

```
private static void CreateCommand(string queryString,
    string connectionString)
{
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        SqlCommand command = new SqlCommand(queryString, connection);
        command.Connection.Open();
        int rowsAffected = command.ExecuteNonQuery(); // <== this
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:32:03.293

```
delete from table where ID=@id
select @@rowcount 
```

这将返回实际删除了多少行。你不需要存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:33:49.550

看看`@@ROWCOUNT`变量

[http://technet.microsoft.com/en-us/library/ms187316.aspx](http://technet.microsoft.com/en-us/library/ms187316.aspx)

# php - 排序方式——; 但也由另一个订购？

> ID：12526898
> 
> 赞同：2
> 
> 时间：2012-09-21T08:31:01.643
> 
> 标签：php, html, sql-order-by, row

K，我有一个关于 PHP 的问题。我正在尝试为具有关卡和 XP 的游戏创造高分。

我的问题很简单，我想按总等级排序，让总等级最高的人排在第一，第二，第三等。但我也希望它按xp排序，这样如果他们具有相同的总等级，比具有最高 xp 的人将首先显示，而不是随机显示。

到目前为止，这是我按级别排序的内容，但我不知道如何让它检查 xp。

```
$count = mysql_result(mysql_query("SELECT COUNT(*) FROM skillsoverall"),0) or     die(mysql_error());

        $from = (isset($_GET["from"]) && is_numeric($_GET["from"]) && $_GET["from"] < $count) ? $_GET["from"] : 0;

        $query = mysql_query ("SELECT * FROM skillsoverall ORDER BY lvl DESC limit $from, $ppls_page") or die(mysql_error());

        $i = $from;
        while($row = mysql_fetch_array($query)){
        $i++;
        if($i < $top_hiscore) {
if($i & 1) {
        echo '<tr class="row row1">
<td class="rankCol"><span>'.$i.'</span></td>
<td class="nameCol"><span><a href="'.$website.'/'.$pers.'?name='.$row["playerName"].'"     target="_self">'.BBCode($row["playerName"]).'</a></span></td>
<td class="lvlCol">'.dots($row["lvl"]).'</td>
<td class="xpCol">'.dots($row["xp"]).'</td>
</tr>   
';
} else {
        echo '<tr class="row row2">
<td class="rankCol"><span>'.$i.'</span></td>
<td class="nameCol"><span><a href="'.$website.'/'.$pers.'?name='.$row["playerName"].'"     target="_self">'.BBCode($row["playerName"]).'</a></span></td>
<td class="lvlCol">'.dots($row["lvl"]).'</td>
<td class="xpCol">'.dots($row["xp"]).'</td>
</tr>   
'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:32:41.970

立即在您的查询中执行此操作：

```
SELECT * FROM skillsoverall ORDER BY lvl DESC, xp desc 
```

SQL 将允许 order by 子句中有多个列。在这种情况下，它现在将返回按最高到最低级别排序的数据，并且如果有多个具有相同级别的行，它会将数据从最高到最低 XP 排序。它也将使用该`limit`子句始终如一地工作。

# mysql - 不同结果的 SQL 查询

> ID：12526902
> 
> 赞同：0
> 
> 时间：2012-09-21T08:31:31.720
> 
> 标签：mysql

```
SELECT postID, threadID, COUNT(DISTINCT postID) as count
FROM wbb1_1_post post
LEFT JOIN wcf1_user_to_groups groups
ON post.userID = groups.userID
WHERE threadID IN (468)
AND groupID IN (4,10)
AND isDisabled != 1
AND isDeleted != 1
ORDER BY postID ASC 
```

克里斯 = groupID 4

塞巴斯蒂安 S. = groupID 10

结果：

```
 postID  threadID  count 
  2811     468      2 
```

一切都是正确的。

![在此处输入图像描述](../Images/9676e65aadc357af1882da10cccbc627.png)

```
SELECT postID, threadID, COUNT(DISTINCT postID) as count
FROM wbb1_1_post post
LEFT JOIN wcf1_user_to_groups groups
ON post.userID = groups.userID
WHERE threadID IN (68)
AND groupID IN (7)
AND isDisabled != 1
AND isDeleted != 1
ORDER BY postID ASC 
```

talishh 和 Bender = groupID 7

结果：

```
postID  threadID    count
349 (wrong!) 68        3 
```

结果应该是 308，因为我想要最旧的帖子（这就是我按 postID ASC 排序的原因）。 ![在此处输入图像描述](../Images/db3b8da7ed6610cdc93727f6186da9fe.png) 有没有办法优化这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:29:00.610

这是因为 mysql 对聚合函数（COUNT，MIN ...）和分组非常慷慨。不好的部分：你无法控制它的分组方式......而且 ORDER BY 似乎并不能解决你的问题。

其他 DBMS（和 ANSI SQL）强制您在使用聚合函数时对不在聚合函数中的字段进行分组。看起来很无聊，但“你知道你得到了什么”。

在您的情况下，只需在 PostID 和 GROUP BY threadID 上使用 MIN 就可以了。

```
SELECT MIN(postID), threadID, COUNT(*) as count
FROM wbb1_1_post post
LEFT JOIN wcf1_user_to_groups groups
ON post.userID = groups.userID
WHERE threadID IN (68)
AND groupID IN (7)
AND isDisabled != 1
AND isDeleted != 1
group by threadID 
```

顺便说一句，当您在 where 语句中使用连接实体时，您的 LEFT JOIN 没有意义（如果我没记错的话）。

如果您只输入一个值，则无需使用 IN，但我想这只是示例代码。

并且无需使用`COUNT(distinct postID)`正确的分组。只需使用`COUNT(*)`

# ios - 如果您不是开发人员计划的一部分，请下载 Xcode / ios

> ID：12526905
> 
> 赞同：0
> 
> 时间：2012-09-21T08:31:47.650
> 
> 标签：ios, xcode

如果您不是开发人员计划的一部分，是否可以免费下载 Xcode / ios sdk？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:32:46.703

您可以免费下载 Xcode 和 iOS sdk，但您必须在 developer.apple.com 上注册一个免费帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:40:00.213

您甚至可以从 App Store 下载 Xcode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:35:51.620

是的！你可以下载 Xcode 用于 iOS/Mac 开发，但首先你必须在[这里注册](https://connect.apple.com/cgi-bin/WebObjects/register.woa/wa/default?userAction=createAccount&mode=register&successURL=https%3A%2F%2Fdeveloper.apple.com%2Fmembercenter%2Flogin.action&cancelURL=https%3A%2F%2Fdeveloper.apple.com%2Fprograms)

然后你就可以下载了。

# javascript - jQuery获取某些子元素的索引并忽略其他

> ID：12526906
> 
> 赞同：2
> 
> 时间：2012-09-21T08:31:53.430
> 
> 标签：javascript, jquery

我正在尝试获取子元素的索引`ol`，但其中也有一些`h2`我不需要的，因此在使用 jQuery`index()`函数时会污染我的结果。

所以我需要 的索引`ol`，就好像根本没有`h2`' 一样。因此，如果您单击第 3 个`ol`索引，则索引将是`2`而不是`4`。

HTML 如下所示：

```
<div>
    <h2>Title</h2>
    <ol><li>Item</li><li>Item</li><li>Item</li></ol>
    <h2>Title</h2>
    <ol><li>Item</li><li>Item</li><li>Item</li></ol>
    <h2>Title</h2>
    <ol><li>Item</li><li>Item</li><li>Item</li></ol>
    <h2>Title</h2>
    <ol><li>Item</li><li>Item</li><li>Item</li></ol>
</div> 
```

和 jQuery：

```
$('ol li').click(function () {
    // get current index position of the ol
    var itemIndex   = $(this).parent('ol').index();

    alert(itemIndex);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:34:31.360

如果我很好理解，请尝试此代码

```
var ol = $('ol');
ol.find('li').click(function () {
    var parentOl  = $(this).parent('ol');
    // get current index position of the ol
    var itemIndex = ol.index(parentOl);
    alert(itemIndex);
}); 
```

示例 jsbin：http: [//jsbin.com/enugex/1/edit](http://jsbin.com/enugex/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:42:22.197

[在jsfiddle](http://jsfiddle.net/Dzk8B/1/)上修改你的代码

```
$('ol li').click(function (item,index) {
    // get current index position of the ol
      var itemIndex   = $(this).parents('div').children('ol').index($(this).parent('ol'));

    alert(itemIndex);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:35:13.480

试试这个

```
$(this).parent('ol').parent().children('ol').indexOf($(this).parent('ol')); 
```

# bash - bash if 逻辑布尔字符串

> ID：12526909
> 
> 赞同：1
> 
> 时间：2012-09-21T08:32:01.590
> 
> 标签：bash, if-statement, boolean

我*不是*在寻找一种不同的方式来实现明显的意图。我希望*了解*为什么这种*确切的*语法不起作用。

```
[root@lvs ~]# while true;do
> echo "Would you like the script to check the second box ([y]n)?"
> read ans
>         if [ "$ans" == "n" ];then
>                 echo
>                 echo "bye"
>                 exit
>         elif [ "$ans" != "" -o "$ans" != "y" ];then
>                 echo "Invalid entry..."
>         else
>                 break
>         fi
> done
Would you like the script to check the second box ([y]n)? **"Should have continued"**

Invalid entry...
Would you like the script to check the second box ([y]n)? **"Should have continued"**
y
Invalid entry...
Would you like the script to check the second box ([y]n)? **"Correct behavior"**
alskjfasldasdjf
Invalid entry...
Would you like the script to check the second box ([y]n)? **"Correct behavior"**
n

bye 
```

这是一个与我发现的许多其他参考相同的参考。我*理解*它在做什么，当我读到的所有内容都说它应该使用逻辑布尔时，它使用非逻辑的 AND 和 OR。

[http://www.groupsrv.com/linux/about140851.html](http://www.groupsrv.com/linux/about140851.html)

好的，就是这样，Nahuel 的建议表现出我最初的预期：

```
[root@lvs ~]# while true;do
> echo "Would you like the script to check the second box ([y]n)?"
> read ans
>         if [ "$ans" = "n" ];then
>                 echo
>                 echo "bye!"
>                 exit
>         elif [ "$ans" != "" -a "$ans" != "y" ];then
>                 echo "Invalid entry..."
>         else
>                 break
>         fi
> done
Would you like the script to check the second box ([y]n)?
asdfad
Invalid entry...
Would you like the script to check the second box ([y]n)?

[root@lvs ~]# while true;do
> echo "Would you like the script to check the second box ([y]n)?"
> read ans
>         if [ "$ans" = "n" ];then
>                 echo
>                 echo "bye!"
>                 exit
>         elif [ "$ans" != "" -a "$ans" != "y" ];then
>                 echo "Invalid entry..."
>         else
>                 break
>         fi
> done
Would you like the script to check the second box ([y]n)?
y
[root@lvs ~]# while true;do
> echo "Would you like the script to check the second box ([y]n)?"
> read ans
>         if [ "$ans" = "n" ];then
>                 echo
>                 echo "bye!"
>                 exit
>         elif [ "$ans" != "" -a "$ans" != "y" ];then
>                 echo "Invalid entry..."
>         else
>                 break
>         fi
> done
Would you like the script to check the second box ([y]n)?
n

logout 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:55:15.633

问题是： [ "$ans" != "" -o "$ans" != "y" ] 因为 or 和否定，所以总是正确的。$ans 不能等于 "" 和 "y"。

尝试替换这些行

```
if [ "$ans" == "n" ];then 
elif [ "$ans" != "" -o "$ans" != "y" ];then 
```

通过这些

```
if [ "$ans" = "n" ];then 
elif [ "$ans" != "" -a "$ans" != "y" ];then 
```

或者这些

```
if [[ $ans == n ]];then 
elif [[ $ans != "" && $ans != y ]];then 
```

比较容易做的是一个案例：

```
case $ans in
  y) echo "yes"
  ;;
  n) echo "no"
  ;;
  *)
  ;;
 esac 
```

也`break`只能在 a `for`or`while`循环中使用，或者在 a 中使用，`select`但您的 post 中缺少它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:54:30.867

我真的不明白，你为什么在 elif 中使用 -o。我会使用“||” 或“或”运算符。当你在 if 中使用两个条件时，你应该使用 double [[ 和 ]]。因此，如果您使用：

```
 elif [[ "$ans" != "" ||  "$ans" != "y" ]];then 
```

它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:13:26.777

从逻辑上讲，它也是一种有缺陷的做事方式。在这种情况下，首先使用 case 最好，其次您正在寻找 == n 然后说明它是否为空白或不等于 yes - 所以尽管 no 在理论上第一个 if 语句中被捕获，但它仍然符合第二个标准

当然，确保输入 100% 的最合乎逻辑的方法是

```
 if [ "$ans" == "n" ];then
                 echo
                 echo "bye"
                 exit
         elif [ "$ans" == "y" ];then
                 echo Yes
                        break;

        else

                 echo "Invalid entry... >$ans<"
         fi 
```

# iphone - 本地通知显示为警报类型

> ID：12526910
> 
> 赞同：0
> 
> 时间：2012-09-21T08:32:03.037
> 
> 标签：iphone, notifications, alert, uilocalnotification

我在我的应用程序中使用本地通知。我想在 iphone 设备上将本地通知显示为警报类型，而它显示为横幅类型。我还设置了不包含空值的本地通知的警报类型。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:38:43.190

您无法更改通知通过代码呈现的方式，iOS 会处理通知的显示。

只有用户可以从设置应用程序中设置通知的呈现方式。

# jquery - Jquery移动触发器可折叠不起作用？

> ID：12526915
> 
> 赞同：1
> 
> 时间：2012-09-21T08:32:23.130
> 
> 标签：jquery, jquery-mobile, collapse

我正在尝试以编程方式折叠一个简单的可折叠

```
Javascript:
$( ".nuovoPaziente" ).trigger( "collapse" );

Html:
<div data-role="collapsible" data-collapsed="false" data-theme="b" id="nuovoPaziente">
</div> 
```

但它不起作用。我有最新的 jquery 移动库 1.1.1。我确定执行到达触发代码，因为在检查它是否到达执行代码之前我有一个警报。任何的想法？^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:38:59.147

您`ID`在可折叠的定义中使用了一个：

```
<div data-role="collapsible" data-collapsed="false" data-theme="b" id="nuovoPaziente"> 
```

所以，它应该是`#nuovoPaziente`：

```
$( "#nuovoPaziente" ).trigger( "collapse" ); 
```

* * *

`.nuovoPaziente`与 a 相关`class`；所以如果你想保持这个约定，你将不得不将你的可折叠修改为这样的：

```
$( ".nuovoPaziente" ).trigger( "collapse" );

<div data-role="collapsible" data-collapsed="false" data-theme="b" class="nuovoPaziente"> 
```

* * *

以下示例对我有用：

**JS / jQuery：**

```
$(function() {
    $("#collapse").click(function() {
        console.log("ok");
        $( "#nuovoPaziente" ).trigger( "collapse" );
    });
}); 
```

**HTML：**

```
<body>
    <div data-role="page">
        <div data-role="content">

            <div data-role="collapsible" data-collapsed="false" data-theme="b" id="nuovoPaziente">
                <h3>I'm a header</h3>
                <p>I'm the collapsible content. By default I'm closed, but you can click the header to open me.</p>
            </div>

            <button id="collapse">collapse!</button>
        </div>
    </div>  
</body> 
```

我按如下方式调用库：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>   
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

你可以试试上面的例子。

希望这可以帮助。让我知道你的结果。

# c# - lucene 搜索日期范围失败

> ID：12526927
> 
> 赞同：0
> 
> 时间：2012-09-21T08:33:03.467
> 
> 标签：c#, lucene.net, lucene

我正在使用 Lucene .net 来索引具有 eml 内容、id 和 localdate 字段的 eml 文件，然后在 localdate 上触发 daterange 查询以获取满足 localdate 往返查询的 eml id 列表。我已经扫描了大约 8000 个 eml 文件并进行了搜索，这对于有限的查询集非常有效。如果通过保持起始日期小于 2010 年 4 月 30 日来触发查询，那么如果起始日期在 2010 年 4 月 30 日之后，则查询将失败，则查询会返回结果。看到这种行为我真的很惊讶，查询应该适用于所有日期范围。以下是使用的一段代码。

```
DateTime from = DateTime.Parse("3/30/2010 11:00:00 AM");// DateTime.Now.AddMonths(-12);

DateTime to = DateTime.Now;

String sFrom = DateTools.DateToString(from, DateTools.Resolution.SECOND);  

String sTo = DateTools.DateToString(to, DateTools.Resolution.SECOND);

Lucene.Net.Index.Term date1 = new Lucene.Net.Index.Term("LOCALDATE", sFrom + "*");

Lucene.Net.Index.Term date2 = new Lucene.Net.Index.Term("LOCALDATE", sTo + "*");

Lucene.Net.Search.Query dateRangeQuery = new Lucene.Net.Search.RangeQuery(date1, date2, true);

Hits hits = searcher.Search(dateRangeQuery); 
```

它在搜索中引发以下异常：

```
System error.

at Lucene.Net.Search.BooleanQuery.Add(BooleanClause clause)
   at Lucene.Net.Search.BooleanQuery.Add(Query query, Occur occur)
   at Lucene.Net.Search.RangeQuery.Rewrite(IndexReader reader)
   at Lucene.Net.Search.IndexSearcher.Rewrite(Query original)
   at Lucene.Net.Search.Query.Weight(Searcher searcher)
   at Lucene.Net.Search.Hits..ctor(Searcher s, Query q, Filter f)
   at Lucene.Net.Search.Searcher.Search(Query query, Filter filter)
   at Lucene.Net.Search.Searcher.Search(Query query)
   at LuceneIndexTestApp.Form1.Search(String text, IndexSearcher searcher, QueryParser parser) 
```

任何帮助将不胜感激！！

谢谢，哈西娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:47:27.060

使用 BooleanQuery.SetMaxClauseCount(Int32.MaxValue); 解决了问题。

# html - iOS6 上的 Safari 对 display:table 的处理方式不同

> ID：12526931
> 
> 赞同：4
> 
> 时间：2012-09-21T08:33:25.230
> 
> 标签：html, css, safari, ios6

iOS6 上的 Safari 似乎对 display:table 的处理方式不同（与 iOS5 上的 Safari 和我的 PC 上的 Safari 相比）。

在 iOS5 上，`display:table`强制 div 进入`box-sizing: border-box mode`，并忽略任何覆盖 box-sizing 的尝试。

在 iOS6 上， display:table 强制一个 div 进入`box-sizing: content-box mode`，并且也忽略了任何覆盖的尝试。

结果是在 iOS5 上`DIV DISPLAY:TABLE WIDTH 250px PADDING-LEFT: 50PX`是`250px`宽的，在 iOS6 上是 300px 宽。

我的问题：我对此的理解正确吗？有没有一种简单的方法可以让 DISPLAY:TABLE 的 div 和左填充在 iOS5 和 iOS6 上具有相同的宽度。

仅供参考，我使用 DISPLAY:TABLE 的原因是因为它允许我的内容进行简单的垂直居中，它具有可变的高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:56:48.780

以防万一将来对某人有所帮助，[这个答案](https://stackoverflow.com/questions/6960083/safari-5-1-breaks-css-table-cell-spacing/11371929#11371929)为我解决了这个问题。我将填充从带有样式的元素移动到带有样式的`display: table;`元素`display: table-cell;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T20:19:10.050

我遇到了同样的问题，除了这个帖子之外找不到任何文档。对我来说幸运的是，原来有问题的容器不需要 table: display 属性。

但是，我确实测试了 display: table-cell 是否以与 display: table 相同的方式应用填充，但事实证明它没有。因此，也许可以尝试将 display:table 属性应用于父容器（当然没有填充）并尝试 display: table-cell 在有问题的 div 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:10:08.590

您是否尝试添加

```
box-sizing: border-box 
```

这不会对 iOS5 产生任何影响，但如果您所说的是正确的，则可能会修复 iOS6 上的显示。抱歉没有机会在iOS6上测试

# java - 无法分配线程优先级

> ID：12526933
> 
> 赞同：0
> 
> 时间：2012-09-21T08:33:31.953
> 
> 标签：java, multithreading

其实我是java线程领域的新手。我想实现实时系统的最早截止日期优先调度算法。我为以下任务生成了代码： 1\. 每 1 秒生成一次任务。// Main.java

```
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.Random;

public class Main 
{
     public static void main(String args[])throws Exception
     {    
          Node node;
          Random rand = new Random();
          int Threshold = 10;
          long Period,Deadline,Duration;

          System.out.println("Task Generation Starts....\n");
          System.out.println(Thread.currentThread().getName()+ "  START\n");
          for(int i =1;i<=Threshold;i++)
          {  
              Calendar c = new GregorianCalendar();
              long m = c.get(GregorianCalendar.SECOND);
              Duration = rand.nextInt(4)+1;
              Period =   rand.nextInt(10)+1;
              Deadline = Period + m;
              node = new Node("Task"+i, m, Duration, Period, Deadline);
              new Tasks("Task"+i,node);
              Thread.sleep(1000);
          } 
          System.out.println(Thread.currentThread().getName()+ "  STOP\n");
    }
} 
```

1.  此任务传递给一个实现 Runnable 的任务类。

// 任务.java

```
 import java.util.logging.Level;
import java.util.logging.Logger;
import java.lang.Thread;

    class Tasks implements Runnable
    { 
      Thread T;
      String taskname;

      Node task;
      TaskPriority taskpriority = new TaskPriority();

      public Tasks(String S,Node newtask)
       {
          this.taskname=S;
          this.task = newtask;
          T = Thread.currentThread();
          T.setName(taskname);
          T = new Thread(this, T.getName());
          System.out.println(T.getName()+ "Starts Running");
          T.start();
       }

      public void run()
      { 
        try
        {
           taskpriority.insert(task);
           taskpriority.pop();

        }
        catch(InterruptedException ie)
        {
            Logger.getLogger(Tasks.class.getName()).log(Level.SEVERE,"error is"+ie.getMessage(),ie);
        }
    } 
} 
```

1.  从 Tasks.java 中，taskpriority.java 的插入函数已被调用，并且紧接在调用 Earliest Deadline 函数类的 pop() 函数之后。
2.  我想要的是

最高优先级的第一个线程到达执行。给定线程具有以下详细信息：Task ArrivalTime WCET Period(Cycle) Deadline Task1 38 4Sec。6 44 秒。

任务执行从 38 秒开始。最坏情况执行时间 (WCET) 为 4 秒。Task1 从 38 秒开始，运行 1 秒并计算其剩余时间（4-1=3 秒）。在这 1 秒运行调度程序后，检查是否有其他任务到达。如果第二个任务在 39 秒到达。Task ArrivalTime WCET Period(Cycle) Deadline Task2 39 4Sec. 5 44 秒。

现在 EDF 将检查剩余时间以达到两个任务的截止日期：Task1（在 Task1 中实际到达时间为 38，但执行 1 秒后变为 39）（44-39 =5 秒）和 Task2（44-39=5 秒） .) 旧任务将继续并在另一秒后再次执行，即在 40 秒。EDF 调度程序将在 1 秒后再次检查。Task3 到了。Task ArrivalTime WCET Period(Cycle) Deadline Task3 40 2Sec. 5 45 秒。

现在再次检查剩余时间以达到所有任务 Task1 正在运行的截止日期，并从 4 完成其 2 单位时间，因此 Task1(44-40 = 2Sec.)、Task2(44-39=5sec) 和 Task3 (45-40 =5 秒）。根据所有三个任务的剩余时间，调度程序将最大优先级分配给 Task1，并抢占 Task4 和 Task2。通过这种方式，这个给定的算法将适用于即将到来的任务（这里的阈值为 10）。

在这里，我无法每 1 秒更改/分配线程的优先级。我怎么能知道哪个线程即将到来。

//EDF代码

```
 public void EarliestDF() throws InterruptedException, SecurityException
    {        
        Calendar calendar = new GregorianCalendar();
         long a = calendar.get(GregorianCalendar.SECOND);
         System.out.println("Task\t\tArrivalTime\tWCET\t\tPeriod(Cycle)\t  Deadline");
         System.out.println( Thread.currentThread().getName()+"\t\t"+a+"\t\t"+task.duration+"Sec.\t\t"+task.period +"\t\t"+task.deadline+" Sec.");
         System.out.println("\n");

         Execution(task);

         Calendar calendar2 = new GregorianCalendar();
         long start = calendar2.get(GregorianCalendar.SECOND);

         long newP = task.period-task.duration;

         System.out.println(Thread.currentThread().getName() +" is waiting for next phase from :\t"+start + " Sec.");

         Thread.sleep(newP * 1000);

         Calendar calendar3 = new GregorianCalendar();
         long stop = calendar3.get(GregorianCalendar.SECOND);
         System.out.println(task.taskname +" execution arrive again at:\t"+stop + "Sec.");
         System.out.println("\n");

         System.out.println(Thread.currentThread().getName()+"is in Process again\t");
         newQ();
        }

   public void Execution(Node task) throws InterruptedException
   {

       if(task.Arrival+task.duration<=task.deadline)
     {
         System.out.print("Execution of"+Thread.currentThread().getName()+"has started at ");
         Calendar calendar2 = new GregorianCalendar();
         long start = calendar2.get(GregorianCalendar.SECOND);
         System.out.print(start+" Sec.\n");  

         while (time<=task.duration)
         {      
                Thread.sleep(1000);
                System.out.println(time+" Sec...");
                task.duration=task.duration-time;
                System.out.println("Time Left"+ task.duration);
                task.Arrival = start + time;
                System.out.println("Task   "  + Thread.currentThread().getName());
                System.out.println("\n");
                time++;
         }

                Calendar calendar1 = new GregorianCalendar();
                long stop = calendar1.get(GregorianCalendar.SECOND);
                System.out.println("Total Completion Time of"+Thread.currentThread().getName() + "is:\t"+stop+" Sec.");
         }
   } 
```

从这段代码中，我没有一一得到结果....如果任何线程具有最高优先级，它应该抢占最低优先级线程。我无法将优先级分配给线程。这是我的主要问题。

# c# - 如何在 MS CRM 中实现安全模型？

> ID：12526943
> 
> 赞同：0
> 
> 时间：2012-09-21T08:34:05.667
> 
> 标签：c#, .net, security, dynamics-crm, dynamics-crm-2011

我正在尝试保护 MS-CRM 中的某些信息。限制用户阅读每个人的电子邮件或阅读某些联系人的最佳方法是什么？

这是在 UI 上还是通过 .NET 代码完成的。我研究了安全模型[MS-CRM](http://msdn.microsoft.com/en-us/library/gg309524.aspx "客户关系管理系统")，但找不到一个像样的示例或小型演练开始。

任何帮助表示赞赏。谢谢。

编辑：

我一直在与 MSCRM 进行非常小的交互，主要是通过代码，使用 SDK。总的来说，这可能是我对 UI 和系统的缺乏经验。

我们需要保护来自用户帐户和一些联系人的数千封电子邮件。似乎有很多方法可以实现安全性，例如下面的 2 个链接。

[http://dynamics2011.blogspot.com/2012/04/crm-2011-utilizing-role-based-security.html](http://dynamics2011.blogspot.com/2012/04/crm-2011-utilizing-role-based-security.html) -CRM 2011 使用角色、团队和业务单位似乎比以下 [http://www 更“容易”。 powerobjects.com/blog/2012/07/27/making-crm-records-private/](http://www.powerobjects.com/blog/2012/07/27/making-crm-records-private/) -CRM 2011 使用角色、团队和业务单位（这有 2 个选项）

有什么想法会更好吗？或者也许有人有另一个想法。我正在寻找简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:12:36.590

关于 hagensoft，（并且不要像听起来那样严厉）我不确定如果您研究过链接到的章节，您会如何混淆安全性是通过 UI 还是 .Net 代码实现的（它是通过用户界面）。我这样说，因为我不确定可以告诉你什么，那不是已经在那个链接后面（或直接从它链接）。

用户具有角色。角色的总和决定了用户的权限和访问权限。角色可以批量限制对记录的访问，也可以根据要保护的记录的所有权（因此取决于您对该记录类型拥有的最高权限、您拥有的记录、同一业务部门的同事、您可以访问上级业务部门或组织中的任何地方）。

也许您可以描述您尝试做的事情以及具体导致问题的原因......

# javascript - VBA 转换为 Google 脚本

> ID：12526944
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:34:07.437
> 
> 标签：javascript, google-apps-script, spreadsheet, google-sheets

如何引用 Google 脚本中的特定单元格进行循环，并将值返回到特定单元格，如下面的 VBA 示例所示。

**这将如何用 Google 脚本编写？**

```
For j = 1 To 20 Step 2

For i = 1 To 20

g = Worksheets("Notes").Cells(i + 15, j + 2).Value

h = Worksheets("Notes").Cells(4, j + 2).Value

l = Worksheets("Notes").Cells(5, j + 2).Value

If Worksheets("Notes").Cells(i + 15, j + 2).Value <> "" Then 
```

等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:15:41.340

您可以在 javascript 中使用简单的 for 循环来遍历单元格

```
//get the sheet object
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Notes');

for(j=0; j<=20; j++){
for(i=0; i<=20; i++){
g = sheet.getRange(i + 15, j + 2).getValue();
//...
//...
//and so on
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-27T23:52:13.663

这是一个例子：

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Notes');
var lastrow=sheet.getLastRow();
var lastcolumn=sheet.getLastColumn();

//In Google Script you should specify the range you want I/O from
var range=sheet.getRange(1,1,lastcolumn,lastrow);

//Return 2D Array for all range Values
var all = range.getValues();

for(var j=0; j<=20; j++){
for(var i=0; i<=20; i++){

//Return each value
var all = range.getCell(i + 15, j + 2).getValue();

}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-15T06:59:09.967

更好的方法是不要每次都调用 getCell，因为您已经获得了数据。

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Notes');
var lastrow=sheet.getLastRow();
var lastcolumn=sheet.getLastColumn();

//In Google Script you should specify the range you want I/O from
var range=sheet.getRange(1,1,lastcolumn,lastrow);

//Return 2D Array for all range Values
var values = range.getValues(); //2D array of row and column values

for(var r=0; r < values.length; r++){
  for(var c=0; c < values[r].length; c++) { 

  //Return each value
  var value = value[r][c]; //row, column

  }
} 
```

# database-design - 为“表单引擎”设计数据库

> ID：12526947
> 
> 赞同：1
> 
> 时间：2012-09-21T08:34:20.040
> 
> 标签：database-design

我正在尝试创建一个基本的表单生成器。因此，用户可以在某种 CMS 系统中一起单击 HTML 表单。我仍在为此研究数据库设计，并且在涉及复选框时我有一个问题。

我的数据库设计如下所示：

**字段**

```
pk_field_id | field_type | field_name   | default_value
1           | textfield  | text1        | Some default value
2           | textfield  | text2        | NULL
3           | radio      | radio1       | NULL
4           | checkbox   | check1       | NULL 
```

所以这基本上就是我保存所选字段的方式。当我读到这个表时，我可以通过一个`switch`语句并读取`field_type`值，所以我知道要呈现什么样的字段。

但这还不是全部。我还有一个表，其中包含像单选按钮这样的分组元素可以具有的“值”。

**字段值：**

```
fk_field_id | label    | value
3           | Radio 1  | radio1
3           | Radio 2  | radio2
4           | Check 1  | check1
4           | Check 2  | check2 
```

所以现在，当我阅读表格时，`fields`我可以`JOIN`看到表格`fieldvalues`，这样我就知道哪些选项属于 ，哪些`radio`属于`checkbox`. 这一切似乎工作正常。

现在是棘手的部分。生成表单后，我还需要一个地方来保存输入的值。所以我`Form Engine`会自动为此创建一个额外的表。`field_name`它为表中的每个创建一个列`fields`。所以在这种情况下，动态创建的表如下所示：

**我的表格**

```
pk_form_id | text1 | text2 | radio1 | check1 | language_id 
```

现在，当用户在生成的 HTML 表单中输入数据时，我可以轻松保存所有输入的数据。因为文本字段只需要一列。分组的单选按钮最终只提交一个值。但是，当检查两个或多个复选框时，一组复选框当然可以提交多个值。

现在我的问题是，我怎样才能将它保存到数据库中？我认为将多个值存储在一个列中并由某个字符分隔不是一个好主意。因为这也使得执行搜索变得困难。

`myform`我最初认为这是一个好方法，因为我可以通过简单的`SELECT ... WHERE`查询轻松地从表中提取一行。

所以无论如何，我不确定这是否是一个好的设置......我如何处理复选框可以提交的多个值？

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:58:31.590

将值存储为 XML/JSON 将是可行的方法。根据您的 RDBMS，数据库可以本地处理 XML 和/或您可以使用 XPath 查询文档。Drupal 大量使用了这种类型的存储，它对他们来说工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:33:53.093

我认为您的问题是您没有以正确的方式考虑检查控件。您需要将每个单选按钮或复选框视为自己的控件。

单选按钮组合在一起这一事实是单选按钮影响其*行为*的一个方面。每个单选按钮实际上都有一个值（checked=true,false）。您的控件值表应包含每个单选按钮（和复选框）的条目，就像它为每个文本框所做的一样。

与其为选项按钮及其值保留一个子表，不如将此信息放在您的主控件表中，该表应该被扩展以提供一些对这些控件进行分组的机制。您可以有一个`control_group`带有可选外键的表，`fields`或者您可能只是非规范化并`group-name`在您的表上有一个可选列`fields`。

# datetime - 如何在两台Win7机器之间同步小时以具有相同的时间戳

> ID：12526954
> 
> 赞同：0
> 
> 时间：2012-09-21T08:34:53.567
> 
> 标签：datetime, boost, time, mfc, ntp

我用 C++ 开发了一个 MFC 应用程序，我用它来从一些 USB 传感器捕获数据，以便将信息保存在 TXT 文件中。对于每个数据，我还使用 boost 函数保存时间戳。

我还需要将我的应用程序与另一台电脑一起使用，因为我必须两次获取数据，我想知道在这两台电脑之间同步数据的最佳方法是什么。

我正在使用第一台电脑创建 Wifi 网络，我可以将第二台电脑连接到第一台电脑，然后我尝试使用“网络时间”设置 NTP 服务但没有成功。

请问有没有教程或有人可以解释我如何在两台Win7 pc之间同步日期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:48:34.333

也许这个命令？从 cmd 提示符运行。

```
net time \\MasterPC /set /yes 
```

其中 MasterPC 是您要从中花费时间的计算机的网络名称。

# android - 需要有关 Android 应用程序的帮助

> ID：12526955
> 
> 赞同：0
> 
> 时间：2012-09-21T08:35:01.517
> 
> 标签：android, matlab

我正在为安卓系统手机开发一个使用光学字符识别 (OCR) 的应用程序。

1.  我们可以将 Matlab 程序转换为 Android Application 吗？

2.  如果有任何工具可以将 matlab 代码转换为 Android 应用程序。工具名是什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:05:45.620

据我所知，没有任何工具可以让您*直接*将 MATLAB 代码转换为 Android 应用程序；但是，MATLAB 确实通过其 MATLAB Coder 产品提供了自动代码生成功能。此工具允许您将 MATLAB 函数转换为 C 或 C++ 代码。同样，您可以使用 Simulink Coder 将 Simulink 模型转换为 C/C++。

此[链接](http://www.mathworks.com/products/matlab-coder/)包含有关 MATLAB 和 Simulink Coder 的更多信息。

因此，也许您可​​以在 MATLAB 或 Simulink 中开发算法的核心，生成 C/C++ 代码，然后将此代码集成到您的 Android 应用程序中。

另外，我应该指出，有一个名为[MATLAB Mobile](http://www.mathworks.com/mobile/)的产品，但我相信这只允许您从移动设备访问在桌面上运行的 MATLAB。此外，我相信目前仅支持 iOS。所以我仍然认为 MATLAB/Simulink Coder 是你最好的选择。

# xaml - XAML 样式仅应用于第一个矩形。如何使其适用于所有人？

> ID：12526956
> 
> 赞同：2
> 
> 时间：2012-09-21T08:35:04.827
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

在 Windows 8 (WinRT) 应用程序中，我正在创建自己的 XAML 样式以获得虚线矩形。在样式的设置器中，我使用`Property="StrokeDashArray" Value="1,4"`. 然后我创建了一堆矩形，然后将这些矩形的样式显式设置为我创建的这种样式。第一个矩形显示有虚线边框 - 但其他两个没有。但是，如果除了`Style={StaticResource myDottedStyle}`我还为`StrokeDashArray`每个矩形指定 ，那么它们都正确显示为虚线边框。

为什么虚线边框只显示第一个矩形？如何创建一个`Style`应用于所有矩形而不为每个矩形指定 StrokeDashArray？

这是一个完整的代码示例。在 Windows 8 RTM 中，创建一个空白 XAML 应用项目，并将 MainPage.xaml 中的 Grid 替换为以下内容：

```
<Page.Resources>
    <Style x:Key="myDottedStyle" TargetType="Rectangle">
        <Setter Property="Stroke" 
            Value="{StaticResource ApplicationForegroundThemeBrush}"/>
        <Setter Property="StrokeThickness" Value="2"/>
        <Setter Property="StrokeDashArray" Value="1,4"/>
    </Style>
</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Rectangle Style="{StaticResource myDottedStyle}" Width="40" 
        HorizontalAlignment="Left"/>
    <Rectangle Style="{StaticResource myDottedStyle}" Width="40" 
        HorizontalAlignment="Center"/>
    <Rectangle Style="{StaticResource myDottedStyle}" Width="40" 
        HorizontalAlignment="Right"/>
</Grid> 
```

[这是此输出的屏幕截图](https://imgur.com/U7LtG)

[我在这里](https://stackoverflow.com/questions/5170367/style-within-datatemplate-is-only-being-applied-to-the-last-item-in-itemscontrol)找到了一个有关 DataTemplates 的相关问题，但我不知道如何将其转化为我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:49:38.057

您可以通过不要求它为每个实例重新绘制矩形并替换 ContentControl 来稍微优化一些东西，因为它们看起来相同但略有不同。例如，像这样的东西；

```
<Style x:Key="MyDottedStyle" TargetType="ContentControl">
    <!-- Add additional Setters Here -->
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ContentControl">
                <Rectangle Stroke="{StaticResource ApplicationForegroundThemeBrush}"
                       StrokeThickness="2"
                       StrokeDashArray="1,4"
                       Width="40" Height="40"
                       HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                       Margin="{TemplateBinding Margin}"/>                                          
            </ControlTemplate>
        </Setter.Value>
    </Setter>                      
</Style>

    <!-- And now actually place it on your view -->
<ContentControl Style="{StaticResource MyDottedStyle}" HorizontalAlignment="Center"/> 
```

这不仅可以让您清理事物，因为您可以将样式模板放入资源字典中以减少混乱，而且还可以提高效率，因为您不必每次都重新绘制形状这是必需的。希望这可以帮助！干杯!

# php - 是否可以在 mysql 5.6 上运行 drupal 6

> ID：12526958
> 
> 赞同：0
> 
> 时间：2012-09-21T08:35:10.150
> 
> 标签：php, mysql, apache, drupal, drupal-6

目前我的网站在 MySQL 5.2 版和 drupal 6 上运行，现在我想升级 apache 服务器和 MYSQL 数据库。

新的 Apache 服务器版本 = 2.2.3 MySql 版本 = 5.6

我的网站可以在 MySQL 5.6 上运行吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T10:16:47.183

通常你不会有任何问题，但这取决于你安装的模块。因为 MySQL 5.6 有很多新的保留字，所以模块可能会失败。

测试它的最佳方法是创建站点的备份并在您的计算机中创建本地版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:34:27.633

是的，当然。Drupal 要求：

**网络服务器**

*   Apache、Nginx 或 Microsoft IIS

**数据库服务器**

*   Drupal 5：MySQL 3.23.17 或更高版本
*   Drupal 6：MySQL 4.1 或更高版本，PostgreSQL 7.1，
*   Drupal 7：带有 PDO 的 MySQL 5.0.15 或更高版本，带有 PDO 的 PostgreSQL 8.3 或更高版本，SQLite 3.3.7 或更高版本
*   注意：Microsoft SQL Server 和 Oracle 由附加模块支持

**PHP**

*   Drupal 5：PHP 4.4.0 - 5.2.x（推荐 5.2，不支持 5.3）
*   Drupal 6：PHP 4.4.0 或更高版本（推荐 5.2）
*   Drupal 7：PHP 5.2.5 或更高版本（推荐 5.3）
*   Drupal 8：PHP 5.5.9（已提出 - 参见[https://www.drupal.org/docs/7/system-requirements/php#8](https://www.drupal.org/docs/7/system-requirements/php#8)）

# sql - SQL 中的映射 - 两种可能性

> ID：12526972
> 
> 赞同：0
> 
> 时间：2012-09-21T08:35:43.047
> 
> 标签：sql, mapping

我有一个 SQL 表值：

```
id (int) | group (int) | value (int) 
```

我想将 a 映射`value`到字符串。对于 one `group`， one`value`只能映射到一个字符串。从两个不同的组中，一个值可以映射到两个不同的字符串。

像这样创建表更好吗

```
map_id (int) | group (int) | value (int) | mapped (string) 
```

或者像这样

```
map_id (int) | group (int) | mapping (text) 
```

其中映射是一个文本字段，例如

```
5=something
6=another string
7=next string 
```

最后在程序中映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:41:15.823

前者通常更好。后者违反了第一范式（1NF）。非规范化是一种有效的现实方法，但可能不适用于这种情况。

# hyperlink - Jsoup 获取页面中的所有链接

> ID：12526979
> 
> 赞同：7
> 
> 时间：2012-09-21T08:36:14.887
> 
> 标签：hyperlink, jsoup

我正在实现一个网络机器人，它必须从页面中获取所有链接并选择所需的链接。除了遇到链接位于“表”或“跨度”标签内的问题外，我一切正常。这是我的代码片段：

```
Document doc = Jsoup.connect(url)
    .timeout(TIMEOUT * 1000)
    .get();
Elements elts = doc.getElementsByTag("a"); 
```

这是示例 HTML：

```
<table>
  <tr><td><a href="www.example.com"></a></td></tr>
</table> 
```

我的代码不会获取此类链接。使用 doc.select 也无济于事。我的问题是，如何从页面中获取所有链接？

编辑：我想我知道问题出在哪里。我遇到问题的页面写得很糟糕，HTML 验证器会抛出大量错误。这会导致问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T10:16:00.583

一般来说，Jsoup 可以处理大多数糟糕的 HTML。在 JSoup 使用它时转储 HTML（您可以简单的输出`doc.toString()`）。

**提示**：使用`select()`代替`getElementsByX()`，它更快更灵活。

`Elements elts = doc.select("a");` *（编辑）*

以下是关于 Selector-API 的概述：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-26T15:18:25.717

**试试这个代码**

```
 String url =  "http://test.com";
 Document doc = null;
        try {
            doc = Jsoup.connect(url).get();
            Elements links = doc.select(<i>"a[href]"<i>);
            Element link;

                for(int j=0;j<150;j++){
                    link=links.get(j);
                    System.out.println("a= " link.attr("abs:href").toString() ); 
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# jquery - jquery并行动画

> ID：12526980
> 
> 赞同：0
> 
> 时间：2012-09-21T08:36:17.433
> 
> 标签：jquery, css, jquery-animate

我想显示弹出窗口。当用户单击链接时，弹出窗口将显示动画。它会稍微向左侧进行动画处理，并同时淡入。我当前的代码将其稍微向左设置动画，但fadeIn 不起作用。这是我的jQuery代码

```
showpopup : function (e) {
        e.preventDefault();
        var continent = $(this).attr('rel'),
            pop       = $('<div></div>').addClass('popup').html(continent);

            pop.insertAfter('#continents').stop().animate({'left': '550px'},100);
            pop.fadeIn();
    } 
```

这是我的流行css

```
.popup {
width: 300px; height: 200px;
position: absolute;
left: 580px;
top: 40px;
padding: 5px; background: #ccc;
border-radius: 5px;
z-index: 100;
border: 1px solid #ccc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:45:39.060

[我使用一个工作示例根据您的代码创建了一个 Fiddle。](http://jsfiddle.net/nqMSH/)

重要的事情：

```
pop.animate({'left': '550px', 'opacity': 1}, 500); 
```

这将确保“left”属性的淡入淡出和动画将同时完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:42:54.477

我认为您的弹出窗口需要隐藏才能`fadeIn`正常工作。`hide()`在将其添加到 DOM 之前尝试添加调用。

```
showpopup : function (e) {
        e.preventDefault();
        var continent = $(this).attr('rel'),
            pop       = $('<div></div>').addClass('popup').html(continent);

            pop.hide().insertAfter('#continents').stop().animate({'left': '550px'},100);
            pop.fadeIn();
    } 
```

或添加`display: none;`到您的 CSS：

```
.popup {
display: none;
width: 300px; height: 200px;
position: absolute;
left: 580px;
top: 40px;
padding: 5px; background: #ccc;
border-radius: 5px;
z-index: 100;
border: 1px solid #ccc;
} 
```

# javascript - 无法从闭包中输出正确的变量值

> ID：12526981
> 
> 赞同：0
> 
> 时间：2012-09-21T08:36:19.173
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试使用[https://github.com/stepanvr/js-shortcuts](https://github.com/stepanvr/js-shortcuts) jquery 插件作为键盘快捷键。但是我被这个问题困住了。我在 json 数据结构中定义了我的快捷方式数据。然后我遍历这些快捷方式，当输出按下的快捷方式时，会报告错误的快捷方式。不管我按哪一个快捷键Ctrl+Shift+P组合都会报。我相信这与 JavaScript 如何处理这个处理函数有关。

```
变量数据 = {
    '名称' : 'Eclipse (Java)',
    “版本”：“1.0”，
    “热键”：{
        '导航' ： {
            'Ctrl+Shift+R' : '打开/搜索资源，例如文件',
            'Ctrl+Shift+T' : '打开/搜索类型',
            'Ctrl+E' : '允许选择编辑器',
            'Ctrl+F8' : '切换视角的快捷方式',
            'Alt+Left' : '转到历史上的上一个/下一个编辑位置',
            'Ctrl+PageUp' : '切换到上一个/下一个编辑器',
            'F3' : '转到这个变量的声明',
            'Ctrl+Shift+P' : '转到匹配的括号'
        }
    }
};

var验证=功能（味精）{
    var node = document.getElementById('debug');
    node.innerHTML += 味精 + ' ';
};

$(文档).ready(函数() {
    for (var x in data.hotkeys.Navigation) {
        $.Shortcuts.add({
            类型：'下'，
            掩码：x，
            处理程序：函数（）{
                验证（x）；
            }
        });
    }
    $.Shortcuts.start();
});

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:42:28.997

您的问题在于设置回调的范围，x 变量随着循环的进行而变化，您必须将其包装在一个闭包中，如下所示：

```
 for (var x in data.hotkeys.Navigation) {
    (function(x){
      $.Shortcuts.add({
          type:'down',
          mask:x,
          handler:function () {
              verify(x);
          }
      });
    })(x);
  } 
```

# clojure - Noir 渲染函数导致 NullPointerException

> ID：12526985
> 
> 赞同：2
> 
> 时间：2012-09-21T08:36:28.597
> 
> 标签：clojure, render, noir

在我的 Clojure 应用程序中，我使用 Noir 作为 Web 框架。我定义了一个帖子页面，它将一些数据保存到 mongodb 数据库中，然后我尝试渲染另一个页面：

```
(defpage "/delivery/save" [delivery]
 (let [id (save-delivery delivery)]
    (render "/delivery/list" id)) 
```

然后我有另一个页面：

```
(defpage "/delivery/list/:id" {:id id}
   (this should render the page)) 
```

但是，在调用渲染函数时我得到了 NullPointerException。知道为什么会这样吗？如果您需要更多详细信息，请告诉我。

谢谢，尼科

这是堆栈跟踪：

```
java.lang.NullPointerException
    at noir.core$render.doInvoke(core.clj:161)
    at clojure.lang.RestFn.invoke(RestFn.java:423)
    at mailjure.views.delivery$POST__delivery__save.invoke(delivery.clj:115)
    at mailjure.views.delivery$eval477$fn__478.invoke(delivery.clj:109)
    at compojure.core$if_route$fn__271.invoke(core.clj:39)
    at compojure.core$if_method$fn__264.invoke(core.clj:24)
    at compojure.core$routing$fn__286.invoke(core.clj:98)
    at clojure.core$some.invoke(core.clj:2390)
    at compojure.core$routing.doInvoke(core.clj:98)
    at clojure.lang.RestFn.applyTo(RestFn.java:139)
    at clojure.core$apply.invoke(core.clj:603)
    at compojure.core$routes$fn__290.invoke(core.clj:103)
    at noir.server.handler$init_routes$fn__1422.invoke(handler.clj:92)
    at noir.request$wrap_request_map$fn__1324.invoke(request.clj:14)
    at hiccup.middleware$wrap_base_url$fn__860.invoke(middleware.clj:12)
    at noir.session$noir_flash$fn__1347.invoke(session.clj:92)
    at ring.middleware.flash$wrap_flash$fn__642.invoke(flash.clj:14)
    at noir.session$noir_session$fn__1337.invoke(session.clj:56)
    at ring.middleware.session$wrap_session$fn__635.invoke(session.clj:40)
    at ring.middleware.cookies$wrap_cookies$fn__572.invoke(cookies.clj:150)
    at noir.cookies$noir_cookies$fn__1188.invoke(cookies.clj:66)
    at ring.middleware.cookies$wrap_cookies$fn__572.invoke(cookies.clj:150)
    at noir.validation$wrap_noir_validation$fn__1375.invoke(validation.clj:90)
    at noir.statuses$wrap_status_pages$fn__1286.invoke(statuses.clj:34)
    at ring.middleware.reload$wrap_reload$fn__712.invoke(reload.clj:18)
    at noir.exception$wrap_exceptions$fn__1317.invoke(exception.clj:57)
    at noir.options$wrap_options$fn__1277.invoke(options.clj:34)
    at compojure.core$routing$fn__286.invoke(core.clj:98)
    at clojure.core$some.invoke(core.clj:2390)
    at compojure.core$routing.doInvoke(core.clj:98)
    at clojure.lang.RestFn.applyTo(RestFn.java:139)
    at clojure.core$apply.invoke(core.clj:603)
    at compojure.core$routes$fn__290.invoke(core.clj:103)
    at ring.middleware.keyword_params$wrap_keyword_params$fn__445.invoke(keyword_params.clj:27)
    at ring.middleware.nested_params$wrap_nested_params$fn__482.invoke(nested_params.clj:65)
    at ring.middleware.params$wrap_params$fn__390.invoke(params.clj:76)
    at ring.middleware.multipart_params$wrap_multipart_params$fn__417.invoke(multipart_params.clj:103)
    at ring.adapter.jetty$proxy_handler$fn__377.invoke(jetty.clj:16)
    at ring.adapter.jetty.proxy$org.mortbay.jetty.handler.AbstractHandler$0.handle(Unknown Source)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:943)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:19:17.447

您需要指定完全相同的网址：

```
 (defpage "/delivery/list/:id" {id :id}
   "whoot!")

 (defpage "/delivery/save" []
   (let [id 100]
     (render "/delivery/list/:id" id))) 
```

但这很难看，最好为您的页面命名：

```
 (defpage delivery-page "/delivery/list/:id" {id :id}
   "whoot!")

 (defpage "/delivery/save" []
   (let [id 100]
     (render delivery-page id))) 
```

这很整洁。它还具有您可以轻松测试交付页面的优点：

```
 (delivery-page 123) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:04:55.197

试试`(render "/delivery/list/" id)`你的代码。

# php - 带有 preg_match 的有效电子邮件

> ID：12526998
> 
> 赞同：3
> 
> 时间：2012-09-21T08:37:31.733
> 
> 标签：php, preg-match

我在使用 preg_match() 验证电子邮件地址时遇到问题。

这是我拥有的代码块。

```
if (VerifierAdresseMail($email))
  echo '<p>valide.</p>';
else
  echo '<p>not valid</p>';

  function VerifierAdresseMail($adresse) {
    $Syntaxe = '#^[\w.-]+@[\w.-]+\.[a-zA-Z]{2,6}$#';
    if (preg_match($Syntaxe, $adresse))
      return true;
    else
      return false;
  } 
```

这似乎不起作用。它只是返回一个白页。尽管我的 application.ini 中有此错误，但我看不到错误

```
[developpement : production]

phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
phpSettings.track_errors = 1
phpSettings.error_reporting = E_ALL

resources.frontController.params.displayExceptions = 1

phpSettings.date.timezone = "Europe/Paris" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T08:42:04.787

不要`preg_match()`用于验证电子邮件地址。改用[`filter_var()`](http://php.net/filter-var)：

```
if (filter_var($adresse, FILTER_VALIDATE_EMAIL)) {
     // valid
} else {
     // not valid
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:43:23.820

我认为你应该使用这个：

```
filter_var('e-mail@provider.com', FILTER_VALIDATE_EMAIL); 
```

返回过滤后的数据，如果过滤器失败，则返回 FALSE。

文档： http: [//php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

# python - 如何每天运行一次创建网络目录备份副本的python脚本？

> ID：12526999
> 
> 赞同：1
> 
> 时间：2012-09-21T08:37:38.713
> 
> 标签：python, copy, save, backup

我想在指定时间每天备份一次我的网络目录，下面是我当前工作的代码，我通过它手动运行它。

所以我想将这项手动工作作为 Windows 服务来完成，它会在特定时间创建指定网络目录的备份副本。

```
import tarfile
import datetime

def backup_htmls():
    tar = tarfile.open('./InputHTML_bc/'+datetime.datetime.now().strftime('%b_%d_%Y_%H_%M_%S')+".tar.gz", "w:gz")
    tar.add('\\\\192.168.211.65\\shared\\InputHTML\\', arcname="Backup_Tar")
    tar.close() 
```

我有如何将其作为 Windows 服务运行的参考；

我只是想如何在特定时间每天运行一次这项工作（例如，如果我将时间作为参数传递给 python 函数，它将在那天执行一次......或者你可以做的任何其他方式......以pythonic方式）？？？我知道这会很容易，但我不知道从哪里开始做这件事？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:49:38.553

这是一个向您展示如何使用 Python 创建 Windows 服务的秘诀：

[http://code.activestate.com/recipes/576451-how-to-create-a-windows-service-in-python/](http://code.activestate.com/recipes/576451-how-to-create-a-windows-service-in-python/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:51:08.113

有这个：[http ://runasservice.sourceforge.net/](http://runasservice.sourceforge.net/)

在这个类似的问题中引用了它：

[将批处理文件作为 Windows 服务运行](https://stackoverflow.com/questions/415409/run-batch-file-as-a-windows-service)

并且作为批处理文件可以启动你的python....