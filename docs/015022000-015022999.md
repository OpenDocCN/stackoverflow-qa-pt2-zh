# StackOverflow 问答 15022000-15022999

# c# - 在图表中动态创建系列

> ID：15022000
> 
> 赞同：2
> 
> 时间：2013-02-22T10:28:48.807
> 
> 标签：c#, charts, reportviewer

我需要在图表中创建很多系列`ReportViewer`，但我只能创建固定数量的系列。
如何创建不固定的系列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-16T06:29:40.237

定义 customdata 类

```
public class classData
{
    public String name { get; set; }

    public classData()
    {

    }
} 
```

并从 VS 添加数据源。

准备清单

```
List<classData> lst = new List<classData>(); 
```

从数据表填写列表...

```
DataRow[] result = datatable.Select();
foreach (DataRow row in result)
{
   classDatat = new classData();
   t.name = row["name"].ToString();
   last.Add(t);
} 
```

将数据传递给报告

```
ReportDataSource rds = new ReportDataSource("DataSet1_Customers_DataTable1", lst);
reportViewer1.LocalReport.DataSources.Clear();
reportViewer1.LocalReport.DataSources.Add(rds);
reportViewer1.RefreshReport(); 
```

关于报告 rdl

```
 <DataSets>
    <DataSet Name="DataSet1_Customers_DataTable1">
      <Fields>
        <Field Name="NameFromReport">
          <DataField>name</DataField>
          <rd:TypeName>System.String</rd:TypeName>
        </Field>
    </DataSet>
 </DataSets> 
```

并使用 NameFromReport 显示数据

```
<Textbox Name="textboxName">
    <rd:DefaultName>textbox1</rd:DefaultName>
    <Top>0.25cm</Top>
    <Width>8.75cm</Width>
    <Style>
      <FontFamily>Century Gothic</FontFamily>
      <FontSize>18pt</FontSize>
      <FontWeight>700</FontWeight>
      <PaddingLeft>2pt</PaddingLeft>
      <PaddingRight>2pt</PaddingRight>
      <PaddingTop>2pt</PaddingTop>
      <PaddingBottom>2pt</PaddingBottom>
    </Style>
    <ZIndex>1</ZIndex>
    <CanGrow>true</CanGrow>
    <Height>1.5cm</Height>
    <Value>=NameFromReport</Value>
</Textbox> 
```

结束好工作！

# ios - 删除以编程方式创建的 UIImageView

> ID：15022010
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:29:38.403
> 
> 标签：ios, button

我是 iOS 开发的新手，我需要帮助：

我想删除通过单击按钮自动创建的图像...如果单击按钮两次将创建 2 个图像..所以我只想删除一个...我想要的那个...

我怎么做？？

我已经有代码可以使用平移手势识别器在两个图像中移动。我就是想不通。如何删除我想要的图像？

我有一个想法，但是，我不知道如何实现它。

这就是我要的：

我想选择图像，然后会有一个名为删除的按钮，当我单击删除按钮时，选定的图像会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T18:50:02.860

为您的图像分配标签，并在您想删除时在相关的 imageView 上调用 removeFromSuperView。

# php - Mysql 工作台显示错误的数据库实例

> ID：15022017
> 
> 赞同：0
> 
> 时间：2013-02-22T10:30:09.297
> 
> 标签：php, mysql, database, mysql-workbench, plesk

为了创建一个新数据库，我使用 Plesk Panel。我还使用 mysql 工作台来管理我的数据库实例。

问题是，当我使用其唯一凭据（数据库用户和密码）连接到服务器中的数据库（通过工作台）时，我能够看到另一个数据库实例，以及我通过 plesk 为服务器中的另一个域创建的控制板。

第二个数据库实例的凭据与我用来登录初始数据库的凭据不同，因此根本不可见。

有谁知道这是怎么发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:59:44.957

两者都可能与您的帐户相关联。我之前使用过共享托管环境 (Plesk)，我可以在其中看到整个服务器上的所有数据库名称，但没有正确的凭据，我无法访问它们中的任何一个或查看它们的表结构（我发现是因为我不希望其他人访问我的数据库）。

我会向您的网络主机查询更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:02:00.783

您不连接到数据库，而是连接到服务器。您正在连接的用户已被授予根据其所属域访问 db 对象的权限。但是，如果允许您连接的用户枚举模式，那么您将能够看到此服务器上所有已定义的模式（= 数据库）。这并不意味着您可以访问它。除非您不希望用户看到他们无权访问的模式，否则没有理由担心。

使用服务器管理部分，您可以在其中列出所有用户并查看他们对哪个 db 对象拥有哪些权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:14:33.907

首先非常感谢您的时间和回答。我的问题背后的原因是我创建的数据库实例的实际名称，其中包含单词“test_”。

使用 mysql 工作台时，每个数据库用户都可以看到在其名称中使用此文本创建的每个数据库实例。

我知道这看起来有点奇怪，但我通过更改数据库实例的名称解决了这个问题。

# javascript - 得到像“不是函数”这样的jquery错误？

> ID：15022018
> 
> 赞同：-2
> 
> 时间：2013-02-22T10:30:09.507
> 
> 标签：javascript, jquery

我`$tabAcc.removeClass is not a function`在执行下面的代码时收到一个 JavaScript 错误。可能是什么问题？

```
var $tabAcc = '',
    $tabtoShow = '',
    $tabSelectAcc = '',
    $tabtoShowSelected = '',
    $tabSelectAcc = '',
    $tabBilling = '',
    $tabtoShowBilling = '',
    $tabSelectBilling = '',
    $tabtoShowBillingSelected = '';
$(".tabAcc").mouseover(function () {
    $tabAcc = $(".tabAcc");
    $tabtoShow = $tabAcc.children('.tabListMenu');
    $tabAcc.removeClass('tabAcc').addClass('tabHoverAcc');
    $tabtoShow.show();
}).mouseout(function () {
    $tabAcc.removeClass('tabHoverAcc').addClass('tabAcc');
    $tabtoShow.hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:32:37.617

你有很多乱码。

1.  确保你有 jquery 库。
2.  将元素包装在 jquery 对象中以使用 jquery 库

    ```
    $($tabAcc).removeClass("classname"); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:43:18.027

如果一个`mouseout`事件总是跟随一个`mouseover`事件，那么你会没事的，因为它`$tabAcc`实际上会引用一个 jQuery 对象。如果你在一个`mouseout`事件之前得到一个事件，问题就会出现`mouseover`，因为那时你的`$tabAcc`变量将只是一个空字符串。

JavaScript 对象中的 String 类没有`removeClass`函数，所以你会得到一个错误。假设您没有向`.tabAcc`页面动态添加元素，您可以将代码修改为如下所示：

```
var $tabAcc = $('.tabAcc'),
    $tabtoShow,
    $tabSelectAcc,
    $tabtoShowSelected,
    $tabSelectAcc,
    $tabBilling,
    $tabtoShowBilling,
    $tabSelectBilling,
    $tabtoShowBillingSelected;
$tabAcc.mouseover(function () {
    $tabtoShow = $tabAcc.children('.tabListMenu');
    $tabAcc.removeClass('tabAcc').addClass('tabHoverAcc');
    $tabtoShow.show();
}).mouseout(function () {
    $tabAcc.removeClass('tabHoverAcc').addClass('tabAcc');
    $tabtoShow.hide();
}); 
```

这样，您将缓存结果`$('.tabAcc')`（性能略有提高，因为您只调用一次），并且您可以确定该`$tabAcc`变量将引用一个 jQuery 对象，因此`removeClass`在您的事件处理函数中具有该函数。

# css - 第三级菜单弹出被切短。CSS 查询

> ID：15022019
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:30:17.713
> 
> 标签：css

我正在修改一个 joomla 菜单，以便水平弹出 3 级菜单项，但我正在努力让它正确显示。我在这里和任何地方都试过，但无法追踪问题。

有问题的菜单位于[http://bit.ly/13ruR7B](http://bit.ly/13ruR7B)

特别是在 Support>Downloads 下（菜单的其余部分很好）生成的第 3 级菜单项“宣传册/目录”和“价格表正在被砍掉，我在 Firebug 中四处寻找，但找不到原因。

任何建议都感激地接受:-)

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:37:39.207

有一些溢出：您应该删除隐藏的声明，然后按照您的意愿安排第三级。

overflow:hidden 由 div.dropdown.columns1 及其下方的 div 上的 javascript 添加。

# android - 意图 ACTION_PACKAGE_REPLACED 是在新包上还是在旧包上调用？

> ID：15022029
> 
> 赞同：3
> 
> 时间：2013-02-22T10:30:40.700
> 
> 标签：android, android-intent, automatic-updates

我正在试验 ACTION_PACKAGE_REPLACED。

从我的研究来看，它似乎是在前一个包停止后在新安装的包上调用的，但是这方面的文档不清楚（对我来说），我读到 PACKAGE_REPLACED 是在被替换的包上调用的（旧的）。

我试过的：

*   ACTION_PACKAGE_REPLACED 的旧包没有接收器，ACTION_PACKAGE_REPLACED 的新包有接收器：一旦替换终止，操作 PACKAGE_REPLACED 就会广播到新包
*   带有 ACTION_PACKAGE_REPLACED 接收器的旧包，没有 ACTION_PACKAGE_REPLACED 接收器的新包：操作 PACKAGE_REPLACED 不会广播到任何包

我正在通过在 Android 4.1 上使用不同版本的应用程序手动启动 APK 包进行测试

我的问题是：这是特定于 Android 4.1 还是预期的行为？我应该期待与 Google Play 中的自动更新不同的行为吗？

# jsf - 调用ice的backing bean onclick:pannelTab

> ID：15022030
> 
> 赞同：0
> 
> 时间：2013-02-22T10:30:53.177
> 
> 标签：jsf, icefaces

我们可以调用支持 bean，onclick 的 ice:pannelTab 吗？我尝试过这样的事情。它调用支持 bean，但不更改选项卡。

```
onclick="#{backing.onClick}; return false;"

public String getOnClick(){
     //...
     return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:17:54.283

onclick 是客户端回调，它用于执行 javascript 方法，对于服务器端操作，您应该考虑使用 ajax 侦听器组件，例如`f:ajax`

# eclipse - 编码 - Pydev 自动更改字符

> ID：15022033
> 
> 赞同：0
> 
> 时间：2013-02-22T10:31:01.520
> 
> 标签：eclipse, encoding, utf-8, pydev, jython

我将项目中的每个 py 脚本编码为 utf-8，因为我们肯定会将我们的应用程序从 Jython 2.2.1 迁移到 Jython 2.5.2。`#encoding=utf-8`出于这个原因，我在每个 py 文件（

问题出现在包含字符串的脚本中`straße`，因为它会自动转换为`straÃŸe`.

我怀疑这种变化是由 Pydev 引起的，还是因为 utf-8 不涵盖这种字符而发生的。对于我尚未检测到的其他“奇怪”字符串，我能做些什么来自动避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:35:03.057

您确定您的 .py 文件使用 UTF-8 编码吗？尝试使用 WebBrowser（作为文本）打开它并检查各种编码。虽然您看到`straÃŸe`它似乎`ß`是由两个字节编码的（很可能是 UTF-8），但请确保它确实是 UTF-8。

还要检查项目/属性上的 Eclipse 设置。有“文本文件编码”设置的资源面板（我仅将 Eclipse 用于 Java 项目，不知道 Pydev 是否​​使用此设置）。

使用 PyDev 尝试这样的代码并检查结果文件是否包含 UTF-8 文本：

```
# -*- coding: utf8 -*-

import codecs

f = codecs.open('strasse.txt', 'wb', 'UTF-8')
f.write('straße'.decode('UTF-8'))
f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T17:14:06.827

我的猜测是，您在该文件中使用了不同的编码（例如**cp1252**，这是默认的 windows 编码），当您输入**utf-8**时，它变成了乱码（所以，实际上并不是 PyDev 造成了乱码，而是事实上它以前是另一种编码）。

当您使用它时，还要确保您还将 Eclipse 的默认编码设置为**utf-8**（这通常是默认的平台编码）——您可以在**首选项 > 常规 > 工作区**中执行此操作。

作为说明，我认为最常见的发表评论的方式是`#coding: utf-8`, 其次是`#-*- coding: utf-8 -*-`（即：not `#encoding:utf-8`）——尽管所有这些格式都有效（参见 pep：[https ://www.python.org/dev/peps/pep- 0263/](https://www.python.org/dev/peps/pep-0263/) )

# java - 如何创建 Wicket MarkupContainer 以在 JUnit 测试实用程序类中使用？

> ID：15022034
> 
> 赞同：1
> 
> 时间：2013-02-22T10:31:02.863
> 
> 标签：java, junit, wicket

我编写了一个实用程序类，它从带注释的模型生成 Wicket 组件并将它们添加到作为方法参数传入的 MarkupContainer 中。

对于此生成器的单元测试，需要一个 MarkupContainer。我试过这样：

```
final MarkupContainer container =
    new MarkupContainer("container") {
        private static final long serialVersionUID = 1L;
    }; 
```

这会编译，但运行测试会引发此异常：

```
org.apache.wicket.WicketRuntimeException:
    There is no application attached to current thread main 
```

因此，MarkupContainer 容器需要环境中未定义为构造函数参数的其他对象。从文档中我无法弄清楚它们是什么。

我查看了 WicketTester，但没有找到让它生成 MarkupContainer 的方法。

您能否建议一种生成 MarkupContainer 实现以在 JUnit 测试中使用的方法，最好不必创建完整的 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:14:33.667

Wicket 组件通常需要绑定到当前线程的应用程序。看看 (Base)WicketTester 在内部做了什么。能够创建 WebMarkupContainer 的最简单的解决方案是实例化 WicketTester - 它负责后台初始化：

```
@Test
public void testWmc() throws Exception {
    WicketTester tester = new WicketTester();
    new WebMarkupContainer("id");
} 
```

# iphone - 将双精度数组存储为 NSNumber

> ID：15022035
> 
> 赞同：1
> 
> 时间：2013-02-22T10:31:03.187
> 
> 标签：iphone, ios, objective-c, ios5, ios6

我`double * data = malloc(sizeof(double))`在objectiveC中有一个变量；

我将此变量用作像 data[] 这样的双数组来存储一些数据。现在我想将此数据变量（它是一个双 * 数组）添加为对象`NSNumber in iOS. Any idea how I can turn it into iOS object like`NSNumber`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:05:59.700

您可以使用`NSData`将任意字节缓冲区包装到 Objective-C 对象中。

用于从双精度数组`dataWithBytes:length:`创建`NSData`对象，`bytes:`或`getBytes:length:`从`NSData`对象检索数据字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:36:00.780

根据 Mundi 的回答，试试这个：

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:0];
for (int i = 0; i < lengthOfDoublearray; i++) { // as premitive DataType array needs predefined length
    [array  addObject:[NSNumber numberWithDouble:data[i]]];
} 
```

这`data`是`double`（您使用的）数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:36:41.787

您不能将一组原语变成一个`NSNumber`. 这没有任何意义。

但是，您可以将一个双精度数组转换为一个`NSNumbers`. 遍历您的 double* 数组，并使用其类方法将每个数字添加到 an`NSMutableArray`中。`NSNumber``numberWithDouble:`

# c++ - 如何将文件与 Boost.Test 进行比较？

> ID：15022036
> 
> 赞同：11
> 
> 时间：2013-02-22T10:31:05.560
> 
> 标签：c++, unit-testing, boost

我有两个文件需要比较。我会用这样的东西

```
BOOST_REQUIRE_EQUAL(filename1, filename2); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T12:28:13.377

您可以使用[BOOST_CHECK_EQUAL_COLLECTIONS](http://www.boost.org/doc/libs/1_53_0/libs/test/doc/html/utf/testing-tools/reference.html)来比较文件内容。

代码示例：

```
#define BOOST_TEST_MAIN
#include <boost/test/unit_test.hpp>

#include <fstream>
#include <iterator>

BOOST_AUTO_TEST_CASE( test )
{
    std::ifstream ifs1("data1.txt");
    std::ifstream ifs2("data2.txt");

    std::istream_iterator<char> b1(ifs1), e1;
    std::istream_iterator<char> b2(ifs2), e2;

    BOOST_CHECK_EQUAL_COLLECTIONS(b1, e1, b2, e2);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T10:54:59.273

文件？阅读两者并比较内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T02:12:32.537

我会比较这两个文件的哈希值。使用 openssl 库计算哈希的例子很多。

# jquery - jQuery在悬停时显示div不起作用

> ID：15022037
> 
> 赞同：0
> 
> 时间：2013-02-22T10:31:15.060
> 
> 标签：jquery, html, hover

我在一个标签结构中有一组 div，它们有 3 个单独的类。“office”、“office+#”以及后端选择的内容（“available”、“availableFrom”、“occupied”。我需要在悬停时显示这些 div。目前，我正在尝试要做的是让 div 在悬停时实际显示，但我尝试过似乎没有任何工作。目前我有这个，但尝试了多种不同的东西。我仍在学习 jQuery，所以任何帮助将不胜感激。

这是HTML代码：

```
<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
      <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
        <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-1" aria-labelledby="ui-id-1" aria-selected="false"><a href="#tabs-1" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-1">Ground Floor /</a></li>
        <li class="ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="tabs-2" aria-labelledby="ui-id-2" aria-selected="true"><a href="#tabs-2" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">First Floor /</a></li>
        <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-3" aria-labelledby="ui-id-3" aria-selected="false"><a href="#tabs-3" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-3">Second Floor</a></li>
      </ul>
      <div id="tabs-1" class="groundFloor tab ui-tabs-panel ui-widget-content ui-corner-bottom" aria-labelledby="ui-id-1" role="tabpanel" style="display: none;" aria-expanded="false" aria-hidden="true">
        <img src="http://concepts/10highstreet/wp-content/themes/10highstreet/img/groundFloor.jpg">
        <div class="office office1 availableFrom">
            <div class="date">14 March 2013</div>
        </div>
        <div class="office office2 availableFrom">
            <div class="date">19 April 2013</div>
        </div>
      </div>
      <div id="tabs-2" class="firstFloor tab ui-tabs-panel ui-widget-content ui-corner-bottom" aria-labelledby="ui-id-2" role="tabpanel" style="" aria-expanded="true" aria-hidden="false">
         <img src="http://concepts/10highstreet/wp-content/themes/10highstreet/img/firstFloor.jpg">
         <div class="office office3 availableFrom">
            <div class="date">10 May 2013</div>
         </div>
         <div class="office office3-1 availableFrom">
            <div class="date">10 May 2013</div>
         </div>
         <div class="office office4 available">
            <div class="date"></div>
         </div>
         <div class="office office5 available">
            <div class="date"></div>
         </div>
         <div class="office office6 available">
            <div class="date"></div>
         </div>
         <div class="office office7 available">
            <div class="date"></div>
         </div>
         <div class="office office8 available">
            <div class="date"></div>
         </div>
         <div class="office office9 availableFrom">
            <div class="date">06 June 2013</div>
         </div>
         <div class="office office10 availableFrom">
            <div class="date">28 February 2013</div>
         </div>
         <div class="office office10-1 availableFrom">
            <div class="date">28 February 2013</div>
         </div>
         <a class="office office11 occupied">
            <div class="date"></div>
         </a>
      </div>
      <div id="tabs-3" class="secondFloor tab ui-tabs-panel ui-widget-content ui-corner-bottom" aria-labelledby="ui-id-3" role="tabpanel" style="display: none;" aria-expanded="false" aria-hidden="true">
         <img src="http://concepts/10highstreet/wp-content/themes/10highstreet/img/secondFloor.jpg">
         <div class="office office12 occupied">
            <div class="date"></div>
         </div>
         <div class="office office13 occupied">
            <div class="date"></div>
         </div>
         <div class="office office14 occupied">

         </div>
         <div class="office office15 occupied">

         </div>
      </div>
   </div> 
```

这是 jQuery

```
$('a.office').mouseover(function(){
            div = $('div.office');
            div.stop().animate({visibility: visible}, 150);
}).mouseout(function(){
            div.stop().animate({visibility: hidden}, 150);
}); 
```

和 CSS

```
.ui-tabs ul {
display:block; 
clear:both; 
height:40px; 
list-style-type:none; 
margin:0; 
padding:0;
}

.ui-tabs ul li {
display:block; 
float:left; 
list-style-type:none; 
padding-right:5px; 
font-family:Georgia, "Times New Roman", Times, serif; 
font-size:1.4em; 
font-weight:100;
}

.ui-tabs ul li a:link, .ui-tabs ul li a:visited {
color:#7a7989;
}

.ui-tabs ul li.ui-state-active a:link, .ui-tabs ul li.ui-state-active a:visited {
color:#03c2f9;
}

.ui-tabs .tab {
clear:both; 
height:700px; 
width:998px; 
margin:0 auto;
}

.office {
visibility:hidden;
}

.office .date {
display:none;
}

.office1 {
position: relative;
top: -256px;
left: 282px;
opacity: 0.6;
height: 185px;
width: 192px;
}

.office2 {
position: relative;
top: -435px;
left: 529px;
opacity: 0.6;
height: 178px;
width: 184px;
}

.office3 {
position: relative;
top: -244px;
left: 177px;
opacity: 0.6;
height: 193px;
width: 89px;
}

.office3-1 {
position: relative;
top: -553px;
left: 282px;
opacity: 0.6;
height: 95px;
width: 130px;
}

.office4 {
position: relative;
top: -498px;
left: 301px;
opacity: 0.6;
height: 139px;
width: 142px;
}

.ui-tabs .tab .office5 {
position: relative;
top: -617px;
left: 450px;
opacity: 0.6;
height: 120px;
width: 79px;
}

.office6 {
position: relative;
top: -754px;
left: 533px;
opacity: 0.6;
height: 137px;
width: 89px;
}

.office7 {
position: relative;
top: -890px;
left: 627px;
opacity: 0.6;
height: 137px;
width: 89px;
 }

 .office8 {
position: relative;
top: -1360px;
left: 365px;
opacity: 0.6;
height: 127px;
width: 139px;
 }

.office9 {
position: relative;
top: -1487px;
left: 282px;
opacity: 0.6;
height: 169px;
width: 76px;
}

.office10 {
position: relative;
top: -1657px;
left: 550px;
opacity: 0.6;
height: 78px;
width: 133px;
}

.office10-1 {
position: relative;
top: -1870px;
left: 695px;
opacity: 0.6;
height: 208px;
width: 162px;
}

.office11 {
position: relative;
top: -1861px;
left: 549px;
opacity: 0.6;
height: 89px;
width: 138px;
}

.office12 {
position: relative;
top: -266px;
left: 576px;
opacity: 0.6;
height: 166px;
width: 131px;
}

.office13 {
position: relative;
top: -386px;
left: 376px;
opacity: 0.6;
height: 136px;
width: 89px;
}

.office14 {
position: relative;
top: -522px;
left: 273px;
opacity: 0.6;
height: 136px;
width: 100px;
}

.office15 {
position: relative;
top: -643px;
left: 176px;
opacity: 0.6;
height: 106px;
width: 92px;
}

.available {
background: #0C9;
}

.occupied {
background: #ea6969;
}

.availableFrom {
background: #c8c8c8;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:37:24.960

查看您的 jQuery 选择器`a.office`，您可能想要使用，`div.office`因为您希望 div 在悬停时显示自己。

# android - TabHost setIndicator - 使用布局，而不是图标？

> ID：15022045
> 
> 赞同：0
> 
> 时间：2013-02-22T10:31:35.063
> 
> 标签：android, android-tabhost, android-selector

我正在以这种方式创建标签：

```
TabSpec tab = tabHost.newTabSpec("Tab1").setIndicator("Tab1",res.getDrawable(R.drawable.tab1_selector)); 
```

这是我的选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/tab3Selector">

    <item android:drawable="@drawable/icon_pressed" android:state_selected="true"/>
    <item android:drawable="@drawable/icon_unpressed"/>

</selector> 
```

其中**icon_pressed**和**icon_unpressed**只是**图标**(png)。这工作正常。但是，我想使用而不是设置图标和标题来设置布局（我可以在其中设置我的标题+我想要的图标）。所以我尝试了这个：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/tab3Selector">    
    <item android:drawable="@drawable/layout_pressed" android:state_selected="true"/>
    <item android:drawable="@drawable/layout_unpressed"/>    
</selector> 
```

其中**layout_pressed**和**layout_unpressed**是这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/icon_pressed" 
        android:layout_alignParentLeft="true"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="35dp"
        android:textColor="@color/red"
        android:textSize="@dimen/fontSmall"/>

</RelativeLayout> 
```

奇怪的是我在运行时我的应用程序抛出错误：

```
 89): FATAL EXCEPTION: main
02-22 11:22:40.422: E/AndroidRuntime(9089): java.lang.RuntimeException: Unable to start activity ComponentInfo {com.test.myapp/com.test.myapp.activities.TabsActivity}: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/tab3_selector.xml from drawable resource ID #0x7f020010
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.ActivityThread.access$600(ActivityThread.java:142)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.os.Looper.loop(Looper.java:137)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.ActivityThread.main(ActivityThread.java:4931)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at java.lang.reflect.Method.invokeNative(Native Method)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at java.lang.reflect.Method.invoke(Method.java:511)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at dalvik.system.NativeStart.main(Native Method)
02-22 11:22:40.422: E/AndroidRuntime(9089): Caused by: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/tab1_selector.xml from drawable resource ID #0x7f020010
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.content.res.Resources.loadDrawable(Resources.java:1947)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.content.res.Resources.getDrawable(Resources.java:659)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at com.test.myapp.activities.TabsActivity.onCreate(TabsActivity.java:39)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.Activity.performCreate(Activity.java:5008)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
02-22 11:22:40.422: E/AndroidRuntime(9089):     ... 11 more
02-22 11:22:40.422: E/AndroidRuntime(9089): Caused by: android.content.res.Resources$NotFoundException: File res/drawable-
hdpi/layout_pressed.xml from drawable resource ID #0x7f020016
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.content.res.Resources.loadDrawable(Resources.java:1947)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.content.res.Resources.getDrawable(Resources.java:659)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:818)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.content.res.Resources.loadDrawable(Resources.java:1944)
02-22 11:22:40.422: E/AndroidRuntime(9089):     ... 16 more
02-22 11:22:40.422: E/AndroidRuntime(9089): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #2: invalid drawable tag RelativeLayout
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:877)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:818)
02-22 11:22:40.422: E/AndroidRuntime(9089):     at android.content.res.Resources.loadDrawable(Resources.java:1944)
02-22 11:22:40.422: E/AndroidRuntime(9089):     ... 21 more 
```

这是什么意思，我不能在 TabHost 选项卡中使用 setIndicator（带布局的选择器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:45:15.237

1.  首先将所有 selector.xml 文件放在 res/drawable 文件夹中

代替

```
TabSpec tab = tabHost.newTabSpec("Tab1").setIndicator("Tab1",res.getDrawable(R.drawable.tab1_selector)); 
```

和

```
TabSpec tab = tabHost.newTabSpec("Tab1").setIndicator("Tab1",getResources().getDrawable(R.drawable.tab1_selector)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:57:03.053

`Caused by: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/tab1_selector.xml from drawable resource ID #0x7f020010`

`Caused by: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/layout_pressed.xml from drawable resource ID #0x7f020010`

Stacktrace 显示 Android 系统在其指定文件夹中找不到某些资源。您是否在适当的文件夹中提供了资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:49:11.953

好吧，这可能不是我的错，而是android问题。看看我的选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/tab3Selector">

    <!-- Layouts (in drawable folder) - don't work !!!  -->

    <item android:drawable="@drawable/pressed_layout" android:state_selected="true"/>
    <item android:drawable="@drawable/unpressed_layout" android:state_selected="false"/>

    <!-- Icons (in drawable folder) - work !!!  -->

<!--<item android:drawable="@drawable/pressed_icon" android:state_selected="true"/> -->
<!--<item android:drawable="@drawable/unpressed_icon"/> -->

</selector> 
```

看起来在 TabHost 的 setIndicator 方法中很简单；不能是带有布局的选择器，但可以是带有图标的选择器......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-25T21:19:50.933

我知道这很旧，但根据[此处](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html)`TabHost`快速链接的 API 页面，如果您想对布局做任何事情，请使用版本而不是版本。`setIndicator(View view)``setIndicator(CharSequence label, Drawable icon)`

基于[Drawable API](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)，a`layout`不能是`Drawable`. 这就像试图让一个橙子变成一个苹果。两者都是水果，就像 a`layout`和 an`icon`都是你认为可能不仅仅是文本的东西。但是，它们仍然不同，处理方式也不同。

# excel - 如何从连接日期连接、递增和创建新行？

> ID：15022046
> 
> 赞同：2
> 
> 时间：2013-02-22T10:31:38.727
> 
> 标签：excel, vba

我目前从事广告工作，并使用“批量工具”生成复杂的广告系列，我们需要手动编写日期，这让我们失去了很多宝贵的时间。

这是我在 Excel 中尝试做的事情：

包含此数据的表单：

```
PO Number: B2
Format: B3
Campaign Name: B4
Target Names:
Amount of Copys: B10 (Where B10 is a value between 1 and 10 for example)
Amount of Visuals: B11 (Where B11 is a value between 1 and 10 for example) 
```

我相信自动化此过程的第一步是从连接数据开始，这是通过以下方式完成的：

```
=concatenate(B1,"_",B2,"_",B3,"_","T"B10,B11) 
```

这应该产生这样的东西：

```
165_ILF_TEST_T4_5 
```

我真正的问题是我实际上有 4 个副本和 5 个视觉效果，这意味着我希望能够自动创建的是：

```
165_ILF_TEST_T1_1
165_ILF_TEST_T1_2
165_ILF_TEST_T1_3
165_ILF_TEST_T1_4
165_ILF_TEST_T1_5
165_ILF_TEST_T2_1
165_ILF_TEST_T2_2
165_ILF_TEST_T2_3
165_ILF_TEST_T2_4
165_ILF_TEST_T2_5 
```

知道这是否需要在 excel 中使用循环吗？我完全不知道如何执行它，尽管对此进行了一些深入的思考。

非常感谢您的帮助，

卡洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:24:47.680

将此公式放入单元格 A1（或第 1 行中的任何其他单元格）并将其复制到第 100 行：

```
=IF(行()>$B$4*$B$5,
   "",
   $B$1&"_"&
   $B$2&"_"&
   $B$3&"_T"&
   INT((ROW()-1)/$B$5)+1&
   "_"&MOD(行()-1,$B$5)+1
)

```

# java - jsp ArrayList for 循环只转一次

> ID：15022047
> 
> 赞同：0
> 
> 时间：2013-02-22T10:31:39.240
> 
> 标签：java, jsp, loops, arraylist

我的代码在这里

```
<% 
@SuppressWarnings("unchecked")

ArrayList<kisi> arr=(ArrayList<kisi>)request.getSession().getAttribute("arr");
%>

<%for(int i=arr.size()-1;i>=0;i--) { %>
Isim:<strong><%= arr.get(i).name %></strong> <br>
Soyisim:<strong><%=arr.get(i).surname  %></strong><br>
Cinsiyet:<strong><%= arr.get(i).gender%></strong><br>
Sehir:<strong><%= arr.get(i).sehir %></strong><br>
-----------------------------------<br>
<% }%> 
```

它怎么只循环一次并且只显示一个真实的但它有很多为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:35:25.443

如果顺序不重要，您可以使用：

for(kisi k : arr) { // 打印数据 }

另外，请在循环开始之前打印 arraylist 的大小，以确保它有超过 1 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:40:18.027

问题出在您声明`arr`.

var `arr` 仅对该块是本地的。使用声明标签`<%! declaration %>`来声明 arr。声明适用于整个班级，而 scriptlet 声明仅适用于其本地声明。

# vba - 在excel（vba）中将图表添加到工作表失败

> ID：15022048
> 
> 赞同：0
> 
> 时间：2013-02-22T10:31:40.327
> 
> 标签：vba, excel

我有以下非常简单的代码，但是失败了

```
Dim ws As Worksheet 
Dim ShapeRef As Shape
Set ws = Sheets("DatenFilledChart") 
ShapeRef = ws.Shapes.AddChart() 
```

出现错误 91：未定义变量。

我不明白为什么这会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:19:49.013

A `Shape` is an object so you need to use `Set` like you have done for the `Sheets` object. Although this is a Run-time error '91' the error description should be 'Object variable or With block variable not set'.

Anyway, try setting the object like so: `Set ShapeRef = ws.Shapes.AddChart()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:37:44.507

您是否需要将此图表添加为形状集合的成员？

如果没有，如果您需要使用 ChartObject，请执行以下操作：

```
''Create a chart object (size/dimensions may be overridden or changed later in your code)
Set ShapeRef = ws.ChartObjects.Add(Left:=chtLeft, Top:=chtTop, Width:=740, Height:=300) 
```

如果您需要使用图表，请添加另一个变量：

```
Dim cht as Chart
Set cht = ShapeRef.Chart 
```

# javascript - 在数据表中查找特定单元格的值

> ID：15022049
> 
> 赞同：2
> 
> 时间：2013-02-22T10:31:40.703
> 
> 标签：javascript, jquery, datatable

有什么方法可以找到数据表单元格的值。我知道 rowId 和 coloumnID，我需要获取该单元格的值。我如何使用 jquery。我正在尝试以下代码。但它不工作。任何人都可以帮忙。

```
 var maint_id;
            maint_id = $('#edit_table tr').find("td:eq(0)").html; 
```

所以基本上我正在寻找的是单元格 rowID-0 和 ColoumnID 0 的值。我只知道单元格的位置。该值可能会在每次迭代时发生变化。任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:38:45.760

```
var celvalue = $('#edit_table tr:eq(rowindex) td:eq(cellindex)').html() 
```

看到这个类似的问题：

[如何使用 jQuery 获取表格单元格值？](https://stackoverflow.com/questions/376081/how-to-get-a-table-cell-value-using-jquery)

# android - 图像不自动调整

> ID：15022053
> 
> 赞同：5
> 
> 时间：2013-02-22T10:32:01.800
> 
> 标签：android, android-imageview

在 android 中，当我们从图库中打开屏幕截图时。它模糊了 2 秒，然后自动调整。

但是，当我使用此屏幕截图图像设置图像视图时，使用图像路径为:,

图片路径为：/mnt/sdcard/ScreenCapture/SC20130219-124221.png

```
private void showImage(String imgPath) {
        // TODO Auto-generated method stub

        System.out.println("Image Path is:  "+imgPath);

        ImageView openImage=(ImageView)findViewById(R.id.img_fullScreen);
        ExifInterface exifMedia = null;
        try {
            exifMedia = new ExifInterface(imgPath);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String exifOrint = exifMedia.getAttribute(ExifInterface.TAG_ORIENTATION);
        int exifOrientation = Integer.parseInt(exifOrint);
        System.out.println("Orientation Tag is:"+exifOrientation);
        BitmapFactory.Options mOptions=new BitmapFactory.Options();
        mOptions.inSampleSize=2;
        Bitmap imgBitmap = BitmapFactory.decodeFile(imgPath,mOptions);
        //Runtime.getRuntime().gc();

        imgBitmap = getResizedBitmapImage(imgBitmap, 200, 200, exifOrientation);
        openImage.setImageBitmap(imgBitmap);
    } 
```

另一种情况：从 URL 获取位图时：

```
URL url = new URL(urlTarget);
            BitmapFactory.Options mOptions = new BitmapFactory.Options();
            mOptions.inSampleSize=1;
            Bitmap bmp = BitmapFactory.decodeStream(url
                    .openConnection().getInputStream(),null,mOptions); 
```

然后图像本身不会自动调整。它变得模糊。这是我的问题。

仅在屏幕截图的情况下。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:11:55.807

`mOptions.inSampleSize=2;`这将跳过备用像素数据并加载原始大小的 1/2 的图像。*当然，*它看起来会很模糊且高度混叠，因为这远不是一个好的[图像缩放](http://en.wikipedia.org/wiki/Image_scaling)算法。

就 Gallery 应用程序而言，它会逐步加载，显示缩略图或快速渲染，同时将全分辨率图像加载到内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:09:51.423

将您的代码从 更改`mOptions.inSampleSize = 2`为`mOptions.inSampleSize =1` 您的问题肯定会得到解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:30:45.890

这只是 Android Gallery 应用程序的一个棘手行为（也是一个很好的例子，展示了如何在必须加载大图像时获得更好的用户体验）。
首先，当您单击图库中的图像缩略图时，它将完全使用该缩略图显示在 ImageView 中。因为缩略图很小并且需要放大以修复 ImageView，所以您会看到它模糊。
在向用户显示缩略图的同时，它还对原始图像进行解码。一切完成后，将显示原始图像而不是缩略图。
Gallery 在缩略图和原始图像之间切换时也使用动画（默认布局动画，您可以在 API Demos 中找到它）

# xml - XSL 删除特定节点并添加新节点

> ID：15022055
> 
> 赞同：1
> 
> 时间：2013-02-22T10:32:02.433
> 
> 标签：xml, xslt

我希望删除 xml 中的几个节点并添加新节点。让我用下面的 xml 来说明：

```
<resprocessing>
  <respcondition title="Correct" continue="No">
    <conditionvar>
      <varequal respident="Response_0">
        <nhm_blank_name>Answer:</nhm_blank_name>
        <nhm_numerator>14</nhm_numerator>
        <nhm_denominator>25</nhm_denominator>
        <nhm_allow_multiples>No</nhm_allow_multiples>
      </varequal>
    </conditionvar>
  </respcondition>
</resprocessing> 
```

我想删除节点`<nhm_numerator>`并在下面`<nhm_denominator>`插入一个新节点（`<nhm_blank_value>`），`<varequal>`同时保留其他两个节点 `<nhm_blank_name>` `<nhm_allow_multiples>`

新节点的值如下：

```
<nhm_blank_value>
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mfrac>
    <mn>14</mn>
    <mn>25</mn>
  </mfrac>
</math>
</nhm_blank_value> 
```

我使用以下 XSLT 成功删除了上述节点。但我无法添加新节点。请告诉我哪里出错了

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:param name="mathml">
  <nhm_blank_value>
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mfrac>
        <mn>14</mn>
        <mn>25</mn>
      </mfrac>
    </math>
  </nhm_blank_value>
 </xsl:param>
<!-- copy the xml as it is -->   
   <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
   <!-- deleting nodes numerator and denominator -->
   <xsl:template  match="questestinterop/item/resprocessing/respcondition/conditionvar/varequal/nhm_denominator" />
   <xsl:template    match="questestinterop/item/resprocessing/respcondition/conditionvar/varequal/nhm_numerator" />   
   <!-- adding mathml node -->
   <xsl:template match="questestinterop/item/resprocessing/respcondition/conditionvar">
     <xsl:value-of select="varequal">
       <xsl:with-param name="mathml"/>
     </xsl:value-of>
   </xsl:template>   
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:41:01.303

我会做这样的事情

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*" />

  <!-- copy the xml as it is -->   
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- delete denominator -->
  <xsl:template  match="nhm_denominator" />

  <!-- replace numerator with mathml fragment -->
  <xsl:template match="nhm_numerator">
    <nhm_blank_value>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
        <mfrac>
          <mn><xsl:value-of select="." /></mn>
          <mn><xsl:value-of select="../nhm_denominator"/></mn>
        </mfrac>
      </math>
    </nhm_blank_value>
  </xsl:template>   

</xsl:stylesheet> 
```

这将从原始 XML 中提取正确的分子和分母值，而不是硬编码 14 和 25。在示例 XML 上运行时，它会产生正确的输出：

```
<resprocessing>
  <respcondition title="Correct" continue="No">
    <conditionvar>
      <varequal respident="Response_0">
        <nhm_blank_name>Answer:</nhm_blank_name>
        <nhm_blank_value>
          <math xmlns="http://www.w3.org/1998/Math/MathML">
            <mfrac>
              <mn>14</mn>
              <mn>25</mn>
            </mfrac>
          </math>
        </nhm_blank_value>
        <nhm_allow_multiples>No</nhm_allow_multiples>
      </varequal>
    </conditionvar>
  </respcondition>
</resprocessing> 
```

# c++ - C++ 编译器或链接器优化

> ID：15022056
> 
> 赞同：0
> 
> 时间：2013-02-22T10:32:02.957
> 
> 标签：c++, optimization, compiler-construction, linker, autoload

我正在尝试使用本文最佳答案中指定的类映射创建一个自动加载类系统：

[有没有办法从保存类名的字符串中实例化对象？](https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name)

所以我根据我的需要创建了这个代码：

```
// ScriptLoader.h
template<class TScript> void createScript() { 
    new TScript; 
}

struct ScriptFactory {
public:
    typedef void(*ScriptCreatorFunc)();
    typedef std::map<std::string,ScriptCreatorFunc> ScriptCreatorStorage;

    static ScriptCreatorStorage ScriptCreators;

    static bool RegisterCreator(std::string const& s,ScriptCreatorFunc creator)
    {
        ASSERT(ScriptCreators.find(s) == ScriptCreators.end());   // prevent registering the same script twice
        ScriptCreators.insert(std::make_pair(s,creator));
        return true;
    }
};

template<class TScript>
struct ScriptReg : ScriptFactory { 
    ScriptReg(std::string const& s) { 
        ScriptFactory::RegisterCreator(s,&createScript<TScript>);
    }
};

class ScriptLoader {
public:
    static void AddScripts()
    {
        for (ScriptFactory::ScriptCreatorStorage::iterator itr = ScriptFactory::ScriptCreators.begin(); itr != ScriptFactory::ScriptCreators.end(); ++itr)
            itr->second();
    }    
};

#define REGISTER_DEC_TYPE(NAME) \
    static ScriptReg<NAME> reg

#define REGISTER_DEF_TYPE(NAME) \
    ScriptReg<NAME> NAME::reg(#NAME)

// ScriptLoader.cpp
ScriptFactory::ScriptCreatorStorage ScriptFactory::ScriptCreators;

// foo.cpp
class foo:
{
    public:

        foo()
        {
                /* code */
        }

    private:
        REGISTER_DEC_TYPE(foo);
};

REGISTER_DEF_TYPE(foo); 
```

当然，我已经在 foo 类中定义了 REGISTER_DEC_TYPE，并且在 foo.cpp 文件的底部我放了： REGISTER_DEF_TYPE(foo) ...（ AddScripts 函数改为由主程序调用，因此它通常在二进制文件中链接）

它编译得很好，但是当我尝试调试时，我无法在显示此提示的 Visual Studio 中设置断点：“没有可执行代码与此行关联。可能的原因包括：预处理器指令或编译器/链接器优化”

并在 foo.cpp 中显示：“已为此文档加载任何符号”

所以我猜编译器没有找到对这些函数/类的任何“正常”调用，将它们从二进制代码中删除。

有什么办法可以避免这种优化？我正在寻找解决此问题的跨平台解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:52:52.097

死区剥离是工厂代码的常见问题。您通常需要做的是在某处有一个使用您所有类型的函数。这很丑，但不幸的是没有特别优雅的便携式解决方案。

# wordpress - Wordpress 的链式选择表单

> ID：15022059
> 
> 赞同：0
> 
> 时间：2013-02-22T10:32:22.653
> 
> 标签：wordpress, contact-form

我使用 Contact Form 7 插件来创建有用的网络联系表格。

现在我需要创建更具体的表单。相信你看了标题就明白我想说什么了。

不久，当我写下“你需要什么？” 对于第一个框（问题），它必须根据第一个问题的答案打开不同的第二个框（问题）。

我有没有机会轻松开发联系表格 7 来做到这一点？任何不同的插件也适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:03:25.450

请参阅这篇文章 [我可以在 Wordpress 中使用 Contact Form 7 插件设置条件字段吗？](https://stackoverflow.com/questions/7412261/can-i-have-conditional-fields-using-contact-form-7-plugin-in-wordpress)

妮可的回答是 [http://wordpress.org/support/topic/plugin-contact-form-7-this-is-how-to-showhide-fields-with-jquery?replies=8](http://wordpress.org/support/topic/plugin-contact-form-7-this-is-how-to-showhide-fields-with-jquery?replies=8)

# c++ - 关于类中 C++ 引用的混淆

> ID：15022060
> 
> 赞同：0
> 
> 时间：2013-02-22T10:32:31.377
> 
> 标签：c++

以下代码是正确的

```
 string s1="abc";
    string s2="bcd";
    string &rs1=s1;
    string &rs2=s2;
    rs1=rs2;
    cout<<rs1<<"----"<<rs2<<endl; 
```

以下代码将编译错误：

```
class A
{
public:
    A(string& a):ma(a) { }

    string& ma;
};

string s1="abc";
string s2="bcd";
A oa(s1);
A ob(s2);
oa=ob;
cout<<oa.ma<<"----"<<ob.ma<<endl; 
```

以上都是`string&`类型赋值，为什么放到class里面会导致编译错误呢？(gcc 版本 4.7.1 )

错误信息是

```
non-static reference member 'std::string& A::ma', can't use default assignment operator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:34:48.017

您正在设置对本地临时变量的成员引用。构造函数中的参数是临时的）。这导致了“悬空引用”，这是不好的。

将参数更改为引用，或将您的成员更改为非引用。出于您的目的，您可能需要：

```
class A
{
public:
    A(string& a):ma(a) { }

    A& operator =(const A& other) 
    { 
        ma = other.ma; 
        return *this; 
    }

    string& ma;
}; 
```

但是你应该知道，你的类的默认复制构造函数可能不会像你想象的那样做。

**更新**

处理当类具有引用成员时删除默认复制赋值运算符的标准的特定区域：

> C++11 § 12.8,p23
> 
> 如果 X 具有以下条件，则类 X 的默认复制/移动赋值运算符定义为已删除： - 具有非平凡对应赋值运算符的变体成员，并且 X 是类联合类，或
> 
> *   const 非类类型（或其数组）的非静态数据成员，或
> *   **引用类型的非静态数据成员**，或
> *   无法复制/移动的类类型 M（或其数组）的非静态数据成员，因为重载决议 (13.3) 应用于 M 的相应赋值运算符会导致歧义或函数从默认赋值运算符，或
> *   无法复制/移动的直接或虚拟基类 B，因为应用于 B 的相应赋值运算符的重载解析 (13.3) 会导致歧义或从默认赋值运算符中删除或无法访问的函数，或
> *   对于移动赋值运算符，非静态数据成员或直接基类，其类型不具有移动赋值运算符且不可平凡复制，或任何直接或间接虚拟基类。

# c# - 使用 linq 从列表中的 2 个可能字段中选择不同的 int

> ID：15022062
> 
> 赞同：1
> 
> 时间：2013-02-22T10:32:36.383
> 
> 标签：c#, vb.net, linq, visual-studio

我一直在寻找解决方案，但我不太明白。令我震惊的是 linq 应该能够巧妙地处理这个问题，但我并不是最擅长制定 linq 查询。基本上我有课；

```
public class Message
{
    public int CreatedByPersonID { get; set; }
    public int? PostedToPersonID { get; set; }
} 
```

我正在寻找的是 linq 等价物；

```
List<int> personIDs = new List<int>();
foreach (Message message in messages)
{
    if (!personIDs.Contains(message.CreatedByPersonID))
    {
        personIDs.Add(message.CreatedByPersonID);
    }
    if (message.PostedToPersonID != null && !personIDs.Contains(message.PostedToPersonID.Value))
    {
        personIDs.Add(message.PostedToPersonID.Value);
    }
} 
```

*有*这个的linq版本吗？还是我对技术的期望太高了……？我知道我正在寻找某个版本，`Select()`但我不知道如何`distinct`用多个字段来制定

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:36:30.717

```
List<int> personIDs = 
     messages.SelectMany(m => m.PostedToPersonID.HasValue ?
                  new int[] { m.PostedToPersonID.Value, m.CreatedByPersonID } :
                  new int[] { m.CreatedByPersonID })
             .Distinct()
             .ToList(); 
```

另一种选择是枚举两次：

```
List<int> personIDs =
    messages.Where(m => m.PostedToPersonID.HasValue)
            .Select(m => m.PostedToPersonID.Value)
            .Concat(messages.Select(m => m.CreatedByPersonID))
            .Distinct()
            .ToList(); 
```

但可能没有 Linq，您的代码可读性更高、速度更快

```
public IEnumerable<int> GetAllPersonIdsFrom(IEnumerable<Message> messages)
{
     foreach(var message in messages)
     {
         yield return message.CreatedByPersonID;

         if (message.PostedToPersonID.HasValue)
             yield return message.PostedToPersonID.Value;
     }
} 
```

* * *

另一种解决方案 - 具有不同值的单个枚举

```
public static List<int> GetDistinctPersonIdsFrom(IEnumerable<Message> messages)
{
    HashSet<int> ids = new HashSet<int>();

    foreach (var message in messages)
    {
        ids.Add(message.CreatedByPersonID);
        if (message.PostedToPersonID.HasValue)
            ids.Add(message.PostedToPersonID.Value);
    }

    return ids.ToList();
} 
```

# c++ - 好友内存分配 - 主要功能

> ID：15022066
> 
> 赞同：3
> 
> 时间：2013-02-22T10:32:38.710
> 
> 标签：c++

我是 C++ 新手，我发现了这个好友系统内存分配的代码，但是没有主函数，所有成员函数都是正确的，我希望你们帮助我完成主函数，我想分配一些内存然后显示状态分配前后的内存，然后释放内存以验证好友是否正在合并，并显示空闲块列表

--BuddyPool.h--

```
#ifndef  BUDDYPOOL_INC
#define  BUDDYPOOL_INC

class BuddyPool{
public:
    enum Status { free, reserved };
    struct Header
    {
        Status status: 1;
        //unsigned int k : bitsizeof(unsigned int) - 1U;
        unsigned int k : 31;
    };
    struct Block : public Header
    {
        //enum { size = 16 };

        enum { size = 64 };
        struct Links
        {
            Block *next;
            Block *prev;
        };
        union
        {
            Links link;
            char userPart [size - sizeof(Header)];
        };
    };

private:
    unsigned int m;
    unsigned int numberOfBlocks;
    Block *pool;
    Block *sentinel;

    static void Unlink(Block &);
    static void InsertAfter(Block &, Block &);
    Block &Buddy(Block &) const;

public:
    BuddyPool(size_t);
    ~BuddyPool();

    void *Acquire(size_t);
    void Release(void *);
};

#endif   /* ----- #ifndef BUDDYPOOL_INC  ----- */ 
```

--BuddyPool.cpp--

```
#include <WinDef.h>
#include "BuddyPool.h"

unsigned int Log2Ceil(unsigned int val){
    unsigned int L;
    for (L = 0; (1ul<<L) < val; L++);
    return L;
}

BuddyPool::BuddyPool(size_t bytes) 
    : m(Log2Ceil(bytes))
    , numberOfBlocks( (1 << m) / sizeof(Block))
    , pool (new Block[numberOfBlocks + m +1])
    , sentinel(pool + numberOfBlocks)
{
    for (unsigned int i = 0; i <= m; ++i) {
        sentinel[i].link.next = &sentinel[i];
        sentinel[i].link.prev = &sentinel[i];
    }

    Block &head = pool[0];
    head.status = free;
    head.k = m;
    InsertAfter(sentinel[m], head);
}

BuddyPool::~BuddyPool(){
    delete [] pool;
}

void *BuddyPool::Acquire(size_t bytes){
    unsigned int kPrime = Log2Ceil(bytes + sizeof(Header));

    unsigned int i = kPrime;
    while (i <= m && sentinel[i].link.next == &sentinel[i]) {
        ++i;
    }
    if (i > m) {
        return NULL;    // throw bad_alloc("out of memory");
    }

    Block &block = *sentinel[i].link.next;
    Unlink(block);
    while (block.k > kPrime) {
        block.k -= 1;
        Block &buddy = Buddy(block);
        buddy.status = free;
        buddy.k = block.k;
        InsertAfter(sentinel[buddy.k], buddy);
    }
    block.status = reserved;
    return block.userPart;
}

void BuddyPool::Release(void *arg){
    Block &block = *reinterpret_cast<Block *>(
                                              reinterpret_cast<Header *>(arg) - 1U);

    if (&block < pool || &block >= pool + numberOfBlocks) {
        return; // throw invalid_argument("invalid pointer");
    }

    block.status = free;
    Block *ptr;
    for (ptr = &block; ptr->k < m; ptr->k += 1) {
        Block &buddy = Buddy(*ptr);
        if (buddy.status == reserved || buddy.k != ptr->k) {
            break;
        }
        Unlink(buddy);
        if (&buddy < ptr) {
            ptr = &buddy;
        }
    }

    InsertAfter(sentinel[ptr->k], *ptr);
}

BuddyPool::Block &BuddyPool::Buddy(Block &block) const{
    unsigned int addr = reinterpret_cast<unsigned int>(&block) + (1 << block.k);
    return *(reinterpret_cast<Block *>(addr));
}

void BuddyPool::Unlink(Block &block){
    if (block.link.next) {
        block.link.next->link.prev = block.link.prev;
    }
    if (block.link.prev) {
        block.link.prev->link.next = block.link.next;
    }
    block.link.next = block.link.prev = &block;
}

void BuddyPool::InsertAfter(Block &src, Block &block){
    block.link.next = src.link.next;
    block.link.prev = &src;

    if (src.link.next) {
        src.link.next->link.prev = &block;
    }
    src.link.next = &block; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:48:09.263

您可以从调用公共函数开始。

可视化内部活动要困难得多。对此没有简短的回答。对于某些语言，例如 python，有可视化工具，甚至是在线可视化工具，但是对于 c++ 要求它就像要求 SO 读者为您开发您的应用程序一样...l

更高级的用法：将调用包装在标准分配器类中（请参阅 参考资料`std::allocator`），然后您可以使用它来为例如 a 进行分配和解除分配`std::vector`。

和/或您可以为某些类定义`operator new`and `operator delete`（分别是单个对象分配和释放函数）

# c#-4.0 - 在新的应用程序域中启动第三方 DLL 中存在的方法

> ID：15022068
> 
> 赞同：0
> 
> 时间：2013-02-22T10:32:42.017
> 
> 标签：c#-4.0, appdomain

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace DoCallBack
{
    class Program
    {
        static void Main(string[] args)
        {
            AppDomain newDomain = AppDomain.CreateDomain("New Domain");
            Console.WriteLine(newDomain.BaseDirectory);
            newDomain.DoCallBack(new CrossAppDomainDelegate(SayHello));
            AppDomain.Unload(newDomain);
        }
    }
} 
```

我想在新的应用程序域中调用 SayHello() 方法。让我们假设，HelloMethod DLL 是第三方，我没有代码。我只有组装。但我知道它有 SayHello() 方法。我能做些什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace HelloMethod
{
    class Program
    {
        static void Main(string[] args)
        {
        }

        static void SayHello()
        {
            Console.WriteLine("Hi from " + AppDomain.CurrentDomain.FriendlyName);
        }
    }
} 
```

在此当前代码中，其给出错误“当前上下文中不存在名称'SayHello'”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:07:52.447

如果尚未加载程序集，则必须加载它。有两种方法可以做到这一点：

1.  从您的项目中引用程序集并简单地执行以下操作：

    ```
    newDomain.DoCallBack(new CrossAppDomainDelegate(HelloMethod.Program.SayHello)); 
    ```

    如果您不介意在自己的项目中引用第三方程序集，这没关系。这也意味着您在编译时就知道要调用的程序集、类型和方法。

2.  自己加载第三方程序集，执行具体方法：

    ```
    /// <summary>
    /// To be executed in the new AppDomain using the AppDomain.DoCallBack method.
    /// </summary>
    static void GenericCallBack()
    {                       
        //These can be loaded from somewhere else like a configuration file.
        var thirdPartyAssemblyFileName = "ThirdParty.dll";
        var targetTypeFullName = "HelloMethod.Program";
        var targetMethodName = "SayHello";

        try
        {
            var thirdPartyAssembly = Assembly.Load(AssemblyName.GetAssemblyName(thirdPartyAssemblyFileName));

            var targetType = thirdPartyAssembly.GetType(targetTypeFullName);

            var targetMethod = targetType.GetMethod(targetMethodName);

            //This will only work with a static method!           
            targetMethod.Invoke(null, null);             
        }
        catch (Exception e)
        {
            Console.WriteLine("Callback failed. Error info:");
            Console.WriteLine(e);
        }
    } 
    ```

    如果您正在寻找一种更灵活的方式来从第三方程序集中调用公共静态方法，则可以使用此方法。请注意，几乎所有内容都在 try-catch 中，因为这里很多东西都可能出错。这是因为这些“反射”调用中的每一个都可能引发异常。最后**请注意**，要使这种方法起作用，第三方程序集及其所有依赖项都位于应用程序的基本目录或私有 bin 路径之一中。

# javascript - ItemTemplate 中文本框的 onkeypress 事件未在 chrome 和 firefox 上触发

> ID：15022070
> 
> 赞同：1
> 
> 时间：2013-02-22T10:32:48.583
> 
> 标签：javascript, asp.net

我试图用文本框的 onKeypress 事件验证小数点后 2 个小数点。它在 IE 上运行良好。但不是 chrome 和 firefox。但我的页面设计和 javascipt 函数如下所示。有人可以帮我解决这个问题。

```
<asp:UpdatePanel ID="UpdatePanel3" UpdateMode="Conditional" runat="server">
                <ContentTemplate>
                    <div class="grid-container-style">
                        <ig:WebDataGrid ID="grdname" runat="server" Width="100%" AutoGenerateColumns="False"
                            TabIndex="5" ViewStateMode="Enabled"
                            ClientIDMode="Static" DataKeyFields="Id" EnableDataViewState="True"
                            DefaultColumnWidth="100%">
                            <AjaxIndicator Enabled="False" />
                            <Columns>
                                <ig:TemplateDataField Key="field" Width="8%">
                                    <ItemTemplate>
                                        <asp:TextBox ID="txtJanuary" Width="100%" runat="server" TabIndex="5" ondblclick="this.focus();this.select()"
                                            MaxLength="12" onchange="ValueChange(event,this,'field')" onkeypress="javascript:return InputDecimalCheck(event,this);"
                                            SkinID="numeric-textbox" Text='<%# DataBinder.Eval(((Infragistics.Web.UI.TemplateContainer)Container).DataItem, "field") %>'></asp:TextBox>
                                    </ItemTemplate>
                                    <Header Text="field" />
                                    <Footer />
                                </ig:TemplateDataField>
                            </Columns>
                            <Behaviors>
                                <ig:Selection RowSelectType="None" CellClickAction="Cell" CellSelectType="None">
                                </ig:Selection>
                                <ig:Activation Enabled="true">
                                </ig:Activation>
                                <ig:RowSelectors Enabled="false" RowNumbering="true" />
                                <ig:ColumnMoving Enabled="false" />
                            </Behaviors>
                        </ig:WebDataGrid>
                    </div>
                </ContentTemplate>
            </asp:UpdatePanel> 
```

下面给出的Javascript代码

```
function InputDecimalCheck(e, txtControl) {
    if ((e.shiftKey && e.keyCode == 45) || e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57) && e.which != 46) {
        return false;
    }
    // . = 46
    var text = txtControl.value;

    // Only one decimal point
    if (e.which == 46 && text.indexOf('.') != -1) {
        return false;
    }
    var decimalIndex = text.length - text.indexOf('.');
    // Only 2 numbers after decimal
    if (text.indexOf('.') != -1 && (text.length - text.indexOf('.')) > 2 && !(txtControl.selectionStart <= text.indexOf('.'))) {
        return false;
    }
    return true;
} 
```

chrome 和 firefox 没有检测到它的函数调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:09:41.100

我已经修改了您的代码以满足您的要求。我希望你能理解其中的逻辑。

您复制粘贴以下代码并从您身边尝试。

在你的代码后面写下以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    TextBox1.Attributes.Add("OnKeyPress", "return InputDecimalCheck(event,'"+ TextBox1.ClientID +"');");
} 
```

Javascript代码：

```
function InputDecimalCheck(key, txtControl) {
    var unicode = (key.which) ? key.which : key.keyCode;

    if ((unicode == 45) || unicode != 8 && unicode != 0 && (unicode < 48 || unicode > 57) && unicode != 46) {
        return false;
    }
    // . = 46
    var text = document.getElementById(txtControl).value;

    // Only one decimal point
    if (unicode == 46 && text.indexOf('.') != -1) {
        return false;
    }
    var decimalIndex = text.length - text.indexOf('.');
    // Only 2 numbers after decimal
    if (text.indexOf('.') != -1 && (text.length - text.indexOf('.')) > 2 && !(txtControl.selectionStart <= text.indexOf('.'))) {
        return false;
    }
    return true;
} 
```

# ios - 如何检测设备上的 iCloud 帐户是否更改？

> ID：15022073
> 
> 赞同：11
> 
> 时间：2013-02-22T10:32:55.013
> 
> 标签：ios, objective-c, macos, icloud, user-accounts

如何检测设备上使用的 iCloud 帐户是否更改？

用户从**“设置”>“iCloud”**中退出，而另一个用户则登录他/她的帐户。

打开应用程序时如何检测此更改？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-22T10:43:40.767

只需为带有名称的通知添加观察者`NSUbiquityIdentityDidChangeNotification`

```
[[NSNotificationCenter defaultCenter]
    addObserver: self
       selector: @selector (iCloudAccountAvailabilityChanged:)
           name: NSUbiquityIdentityDidChangeNotification
         object: nil]; 
```

> 如果用户退出 iCloud，例如通过在设置中关闭文档和数据，ubiquityIdentityToken 方法将返回 nil。要使您的应用能够检测用户何时退出并重新登录，请注册以了解 iCloud 帐户可用性的更改。-***苹果文档***

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html)

# c# - 如何在 ASP.NET MVC 中将字段显示为链接

> ID：15022075
> 
> 赞同：0
> 
> 时间：2013-02-22T10:32:56.780
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在使用 ASP.NET MVC 并按照 ASP.NET 网站“getting-started-with-ef-using-mvc”上的教程说明进行操作。我有一个设备类

```
public class Equipment
    {
       [Key] public int EquipID { get; set; }
        public string EquipName { get; set; }
        public string EquipDescription { get; set; }
        public string EquipSerialNumber { get; set; }
        public string EquipImage { get; set; }
        public string EquipManufacturor { get; set; }
        public string EquipLocation { get; set; }
        public string EquipCalibrationFreq { get; set; }
        public virtual ICollection<Calibration> Calibrations { get; set; }
    } 
```

每个设备类都有一个或多个**校准**记录。下面是我的校准课。

```
 public class Calibration
    {
      [Key]  public int RecID { get; set; }
       public int EquipID { get; set; }
        public DateTime CalibrationDate { get; set; }
        public decimal? CalibrationCost { get; set; }
        public String CalibratedBy { get; set; }
        public String CalibrationCert { get; set; }
        public DateTime NextCalibrationDue { get; set; }
        public String ResponsibleSection { get; set; }
        public virtual Equipment Equipment { get; set; }
    } 
```

现在在我的设备索引页面上，我正在显示相关的校准记录（主-详细信息）。看看下面： ![在此处输入图像描述](../Images/b07534196874be32dd2f3838f8798331.png) 所以在[校准证书]列而不是文档路径中，我想显示一个文档链接，它将在浏览器或相关程序中打开文档。

这是该子校准记录的标记

```
 @foreach (var item in Model.Calibrations)
    {
        <tr>
            <td>@Html.DisplayFor(modelItem => item.CalibrationDate)</td>
            <td>@Html.DisplayFor(modelItem => item.CalibratedBy)   </td>
            <td>@Html.DisplayFor(modelItem => item.CalibrationCost)</td>
            <td>@Html.DisplayFor(modelItem => item.NextCalibrationDue)</td>
            <td>@Html.DisplayFor(modelItem => item.CalibrationCert)   </td> 
```

请帮助我如何将其设为文档链接，并且 LinkTitle 应显示文档名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:39:10.080

您可以在 td 内部使用：

```
<a href=@(Model.CalibrationCertLink)>Certificate</a> 
```

Yust 将 CalibrationCertLink 属性添加到 Calibration 类以返回文件的相对链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:41:23.497

在查询字符串中添加带有参数的操作链接。否则我们可能会像这里建议的那样 [使用报告服务 Web 服务：使用 WCF 来自 ASP.NET MVC 的报告服务 Web 服务](http://geekswithblogs.net/stun/archive/2010/02/26/executing-reporting-services-web-service-from-asp-net-mvc-using-wcf-add-service-reference.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:42:11.010

您应该在 Shared Views 文件夹中创建 DisplayTemplates，然后在其中为该示例 CalibrationCert.cshtml 创建模板，并在那里创建显示代码：

```
@model List<CalibrationCert>
        @foreach (var a in Model)
            {
//Create hear the display HTML
            } 
```

和@线

```
public virtual ICollection<Calibration> Calibrations { get; set; } 
```

您应该更改为：

```
[UIHint("CalibrationCert")]
public virtual ICollection<Calibration> Calibrations { get; set; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:49:50.153

首先，您应该使用如下所示的 Action 方法

```
@if (item.Certificate != null)
    {
        <a href = @Url.Action("ViewCertificate", new { fileName = item.Certificate }) > <img src = "@Url.Content("~/Images/attachment.png")"  alt = "attachment" /> </a>  
    } 
```

代替附件图像，您也可以放置一些文字，说“查看证书”。

支持文件查看的动作方法

```
public ActionResult ViewCertificate(string fileName)
    {
        try
        {
            var fileStream = System.IO.File.OpenRead(Server.MapPath("~/Certificates/" + fileName));
            return File(fileStream , "application/pdf", fileName);
        }
        catch
        {
            throw new HttpException(404, "Certificate does not found " + fileName);
        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T11:18:57.720

您可以为此添加一个锚标记：

```
<a href="@(Model.CalibrationCertLink)" target="_blank">View Certificate</a> 
```

当你说它`target=_blank`在一个新窗口中打开。

# javascript - 编辑javascript文件时eclipse停止工作

> ID：15022076
> 
> 赞同：7
> 
> 时间：2013-02-22T10:32:58.167
> 
> 标签：javascript, eclipse

当我在 Eclipse 中打开 javascript 文件进行编辑时，我的 Eclipse 停止工作并给我错误（“Eclipse 从选择中请求 javascript AST 遇到问题”）。这个问题发生在 eclipse indigo 中，但现在我有最新版本的 eclipse（eclipse kepler），eclipse 也一样（停止工作并给我错误）。尤其是在eclipse中插入点后几分钟内无法编辑文件。而且通常没有点编辑文件也很烦人，因为我必须在写完东西后等待几分钟。而且我的 CPU 工作在 90%-95%。如果有人知道这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:52:40.427

您可能会在 Eclipse 中遇到此类问题 :-)

我从 2005 年开始使用 Eclipse，见过很多东西。这里有一些提示可以帮助你。

不知道你用的是哪个版本。哪个 Eclipse 包？开普勒，靛蓝 - 这是一回事。但是有很多包。对于 Java，对于 PHP（带有 PDT），C++ 等

。不同之处在于：安装的插件。一般来说，如果您在 Eclipse 下安装了越来越多的插件，我们可以说您有更多机会遇到此类问题。

一开始我安装了一个 Eclipse 并尝试将所有插件添加到该 Eclipse 中。尝试对 Java、PHP、ActionScript 项目使用相同的 Eclipse。它没有用！
所以我的第一个建议是：部署更多 Eclipse 版本并将每个版本用于不同类型的项目！
现在我有一个用于 Java 的 Eclipse，一个用于 PHP，另一个用于 ActionScript 开发。

另一件事：Eclipse 语言插件正在使用动态语言工具包 (DLTK) 来解析您输入的差异/结构。如果速度很慢，您就会陷入困境。
您可以尝试用谷歌搜索您的 Eclipse 版本的 DLTK 问题。您也可以更改动态语言的设置，大多数情况下您应该尝试关闭/打开并更改 DLTK 缓存的参数。
您的 DLTK 索引也有可能搞砸了。您可以强制 Eclipse DLTK 刷新其索引。它存储在 Eclipse 下的一个类似 SQL 的东西中，你可以谷歌如何清理那个索引。

还有另一种可能：版本跟踪，主要是 Git 可能会导致“吃掉我的 CPU”的问题。
每次你在文件中输入一个新字符时，都会触发 Git 来检查差异。它发生在我身上一次，效果与您正在经历的相似。我不得不更改 Git 缓存配置，我提高了缓存的数量以获得巨大的价值。

还有一件事：自动项目/构建
您也可以尝试将其关闭。

所以我建议如下：

1\. 下载并部署一个全新的 Eclipse（PDT（PHP 开发）的一体机内部有很好的 Javascript 语言插件）——这样你肯定会有一个空的、干净的 DLTK 索引
2\. 不要安装任何插件 - 如果您正在使用任何插件，只安装您的版本跟踪器
3\. 导入您的项目，如果出现问题，请立即尝试
4\. 如果是，请尝试较旧的 Eclipse 版本（这是我的一般经验，新版本在使用语言的前 6 个月内不稳定），重复相同的步骤
5\. 如果不是，那是个好消息。那么您可以开始添加您使用/需要的插件

也许这会有所帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-07T03:21:29.847

发生这种情况是因为 eclipse 针对您在项目中安装的任何插件扫描并验证您的 javascript。您可以通过以下方式跳过此操作：项目 > 属性 > Javascript > 包含路径 > 源 > 编辑排除路径并添加您的 JS 文件或文件夹。

# scripting - 如何知道 sqlldr 加载的行数？

> ID：15022077
> 
> 赞同：0
> 
> 时间：2013-02-22T10:32:59.003
> 
> 标签：scripting, oracle11g, sql-loader

我有一个表 X，我正在使用 SQLLDR 将许多文件中的数据加载到表 X。我需要知道有多少行被加载到表中

CTL文件包含很多条件，再次编写过滤和计数脚本会影响可维护性

另外我不想从表中选择计数（*），因为这将是昂贵的操作。

我们需要根据数据进行单独的报告，例如加载了多少行。而且，我们在每一行都有一个时间戳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:53:16.493

SQLLDR 将其插入表中的行数捕获到日志文件中。

日志文件中的片段示例如下：

> SQL*Loader：发布 11.2.0.1.0 - 2013 年 2 月 7 日星期四 02:36:18 生产
> 
> 版权所有 (c) 1982、2009，Oracle 和/或其附属公司。版权所有。
> 
> ...
> 
> ...
> 
> ...
> 
> 表 TBL_TEST：
> 
> 0 行成功加载。
> 
> 0 由于数据错误而未加载行。
> 
> 0 行未加载，因为所有 WHEN 子句均失败。
> 
> 0 行未加载，因为所有字段均为空。

# c++ - while 循环中的智能指针测试：使用逗号运算符？

> ID：15022085
> 
> 赞同：0
> 
> 时间：2013-02-22T10:33:32.977
> 
> 标签：c++, loops, smart-pointers, comma-operator

我最近看到这样的代码：

```
// 3rd Party API: (paraphrased)
void APIResetIterator(int ID); // reset iterator for call to next()
Mogrifier* APINext(int ID); // User must delete pointer returned

...

typedef std::unique_ptr<Mogrifier> MogPtr;

...

const it listID = 42;
APIResetIterator(listID);
MogPtr elem;
while (elem.reset(APINext(listID)), elem) {
  // use elem
} 
```

这是一个好主意吗？它有效吗？

* * *

我将添加相应的 for 循环以方便参考：

```
for (MogPtr elem(APINext(listID)); elem; elem.reset(APINext(listID));) {
  // use elem
} 
```

...也没有让我觉得真正的最佳...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:53:09.860

正如其他答案中所说：这在技术上是可以的，并且可以按预期工作。但是你质疑它实际上表明这不是一个好主意，因为它缺乏可读性。

这是一种伪装的 for 循环，类似于这个：

```
int i = -1;
while (++i, i<10) { something(i); } 
```

换句话说，您可以通过实际使用 for 循环使其更清晰：

```
for (MogPtr elem{APINext(listID)}; elem != nullptr; elem.reset(APINext(listID)))
{
  // use elem
} 
```

唯一的问题是您必须输入`APINext`两次（震惊！），这可能是有人以现在的方式编写它的原因。

经验教训：可读性胜过懒惰。

**编辑：** imo 输入两次实际上是一件好事`APINext(listID)`，因为它清楚地表明第一次实际上是初始化，其他时候是重新分配。

**Edit2：**这种`Iterator/Next()`组合在 C++ 中可能看起来有点不寻常，因为 C++ 标准库迭代器使用运算符重载。在没有运算符重载的 Java 和其他语言中，这是做事的正常方式。如果你愿意，你可以编写一个简单的 C++ 风格的前向迭代器来包装 API 调用：

```
class MogrifierIterator {
  MogPtr ptr_;
  int listID_
public:
  MogrifierIterator() : ptr_(nullptr) {} //end-Iterator
  explicit MogrifierIterator(int listID) : ptr(nullptr), listID_(listID)  { 
    APIResetIterator(listID_); 
    ptr_.reset(APINext(listID_));
  }

  Mogrifier& operator*() { return *ptr_; }
  Mogrifier* operator->() { return ptr_.get(); }
  MogrifierIterator& operator++() { ptr_.reset(APINext(listID_)); return *this; }

  bool operator==(MogrifierIterator const& other)
  { return (ptr_==other.ptr_) && (ptr_ == nullptr || listID_ == other.listID_); }
};

//...
for (MogrifierIterator it(listID); it != Mogrifieriterator(); ++it)
{
  it->mogrify();
} 
```

它不完整，我没有测试它，它可能包含错误，但你明白了要点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:38:16.717

它应该工作。有点棘手，不太明显，但除此之外就可以了。也许使用 for 循环会使代码更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:39:27.350

它有效吗？好吧，它应该，语法是有效的：指针被重置为返回的值`APINext()`，然后`NULL`在`while`条件中对其进行测试。

这是一个好主意吗？这是一个品味问题，但很多人（包括我）不喜欢那种代码。它可能是合法且有效的，但不是那么清楚，需要一段时间才能理解。对我来说，代码的**可读性**非常重要，而这个特定的代码并不是可读性的好例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:39:57.090

它确实有效，但它是否比 for 循环更好是另一个争论。在这种情况下，它避免了重复代码，因为获取第一个元素与获取下一个元素相同（除了`APIResetIterator(listID);`）。所以这将是关于惯用编码（for循环）或避免双重代码（获取第一个元素并获取下一个元素）。

我的建议是在 for 循环中使用迭代器，但在这种情况下这可能不是那么好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T10:51:42.690

也许我们应该把它写成：

```
template<class SPT, typename P>
SPT& reset(SPT& smartPtr, P ptr) {
  smartPtr.reset(ptr);
  return smartPtr;
}

for (MogPtr elem; reset(elem, APINext(listID));) {
  // use elem
} 
```

# android - 支持的音频效果

> ID：15022086
> 
> 赞同：1
> 
> 时间：2013-02-22T10:33:33.810
> 
> 标签：android, audio, opensl, audioeffect

我正在尝试确定正在运行的设备支持哪些 OpenSL ES 效果。

Andorid SDK 的 AudioEffect 类提供了这样做的[方法。](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html#queryEffects%28%29)

> `public static Descriptor[] queryEffects ()`

我的问题是，鉴于该方法返回的所有[AudioEffect.Descriptor](http://developer.android.com/reference/android/media/audiofx/AudioEffect.Descriptor.html)，我不知道如何确定其中一个是否真的是我需要的。

> **公共 UUID 类型**
> 
> 在 API 级别 9 中添加 表示效果的通用类型（均衡器、低音增强...）。UUID 对应于此类效果的 OpenSL ES 接口 ID。

*[type](http://developer.android.com/reference/android/media/audiofx/AudioEffect.Descriptor.html#type)*属性似乎是我应该使用的属性，但我找不到指定所有效果类型 UUID 的 OpenSL ES 参考。

你知道我在哪里可以找到吗？

我可以找到在设备上测试[方法](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html#queryEffects%28%29)结果的 UUID，但是，

我可以假设 UUID 在每个设备上对于特定类型的效果总是相同的吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:59:36.563

有关效果名称定义的列表，请参见[libOpenSLES.so.variables.txt](https://github.com/android/platform_development/blob/master/ndk/platforms/android-14/arch-arm/symbols/libOpenSLES.so.variables.txt)。
如果您想查找 ID 的实际定义位置，您应该查看[相应的头文件](https://android.googlesource.com/platform/system/media/+/android-4.1.1_r6.1/audio_effects/include/audio_effects)。因为`SL_IID_PRESETREVERB`你应该看看`effect_presetreverb.h`，等等。

# java - 编辑 JTable 行

> ID：15022088
> 
> 赞同：1
> 
> 时间：2013-02-22T10:33:40.443
> 
> 标签：java, swing, file-io, jtable, abstracttablemodel

我`JTable`用来显示用户信息。我添加了一个编辑按钮，当用户选择一行并单击该按钮时，所选行必须编辑并重写到文件。

应该怎么做？

```
public class AllUser extends AbstractTableModel {

UserInformation uiS = new UserInformation();
String[] col = {"ID", "Fname", "Lname", "Gender", "Date"};
List<UserInformation> Udata = new ArrayList<UserInformation>();

public AllUser() {
    BufferedReader br = null;
    try {
        FileReader fr = new FileReader("AllUserRecords.txt");
        br = new BufferedReader(fr);
        String line;
        while ((line = br.readLine()) != null) {
            if (line.trim().length() == 0) {
                continue;
            }
            Udata.add(initializeUserInfos(line));
        }
    } catch (IOException e) {
    } finally {
        if (br != null) {
            try {
                br.close();
            } catch (IOException ioe) {
            }
        }
    }
}

private UserInformation initializeUserInfos(String str) {
    UserInformation Uinit = new UserInformation();
    String[] CellArray = str.split("     ");
    Uinit.setID(CellArray[0]);
    Uinit.setFname(CellArray[1]);
    Uinit.setLname(CellArray[2]);
    Uinit.setGender(CellArray[3]);
    Uinit.setDate(CellArray[4]);
    return Uinit;
}

public void RemoveRow(int rowIndex) {
    if (RemoveUserFromFile(rowIndex)) {
        Udata.remove(rowIndex);
        fireTableRowsDeleted(rowIndex, rowIndex);
    } else {
        JOptionPane.showMessageDialog(null, "Unable to delete");
    }
}

public boolean RemoveUserFromFile(int index) {
    File Mf = new File("AllUserRecords.txt");
    File Tf = new File("Uoutput.txt");
    try {
        BufferedReader Ubr = new BufferedReader(new FileReader(Mf));
        PrintWriter Upw = new PrintWriter(new FileWriter(Tf));
        String line;
        while ((line = Ubr.readLine()) != null) {
            if (line.trim().length() == 0) {
                continue;
            }
            if (!line.startsWith(String.valueOf(getValueAt(index, 0)))) {
                Upw.println(line);
            }
        }
        Upw.close();
        Ubr.close();
        Mf.delete();
        Tf.renameTo(Mf);
        return true;
    } catch (FileNotFoundException e1) {
        return false;
    } catch (IOException ioe) {
        return false;
    }
}

public void addRow(UserInformation userinf) {
    if (addUserToFile(userinf.toString())) {
        Udata.add(userinf);
        fireTableRowsInserted(Udata.size() - 1, Udata.size() - 1);
    }
}

public boolean addUserToFile(String useri) {
    try {
        File f = new File("AllUserRecords.txt");
        if (!f.exists()) {
            return false;
        } else {
            FileWriter fw = new FileWriter(f.getAbsoluteFile(), true);
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write(useri);
            bw.close();
            return true;
        }
    } catch (Exception e) {
        return false;
    }
}

@Override
public String getColumnName(int colu) {
    return col[colu];
}

@Override
public int getRowCount() {
    return Udata.size();
}

@Override
public int getColumnCount() {
    return col.length;
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    UserInformation uinfoS = Udata.get(rowIndex);
    Object value = null;
    switch (columnIndex) {
        case 0:
            value = uinfoS.getID();
            break;
        case 1:
            value = uinfoS.getFname();
            break;
        case 2:
            value = uinfoS.getLname();
            break;
        case 3:
            value = uinfoS.getGender();
            break;
        case 4:
            value = uinfoS.getDate();
            break;
        default:
            value = "...";
    }
    return value;
}
} 
```

二等：

```
public class UserPage extends JFrame implements ActionListener {

private AllUser userModel;
private JTable uTable;
JButton addUser;
JButton deleteUser;
JButton mainButton;
JButton exitButton;
JTextField tf1;
JButton searchButton;
JButton editButton;
JLabel resultLbl;
JMenuItem mainpageItem;
JMenuItem exitItem;
JMenuItem bookMenuItem;

public UserPage() {
    setTitle("All User Information");
    userModel = new AllUser();
    uTable = new JTable(userModel);
    createMenus(this);
    add(new JScrollPane(uTable), BorderLayout.CENTER);
    add(buttonPanels(), BorderLayout.PAGE_START);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setSize(800, 600);
    this.setLocation(300, 60);
    this.setResizable(false);
}

public final JPanel buttonPanels() {
    JPanel buttonsPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
    addUser = new JButton("Add New User");
    deleteUser = new JButton("delete User");
    mainButton = new JButton("Main Page");
    editButton=new JButton("Edit");
    tf1 = new JTextField("              ");
    searchButton = new JButton("Search");
    resultLbl = new JLabel();
    exitButton = new JButton("Exit");

    addUser.addActionListener(this);
    deleteUser.addActionListener(this);
    mainButton.addActionListener(this);
    searchButton.addActionListener(this);
    exitButton.addActionListener(this);
    editButton.addActionListener(this);

    buttonsPanel.add(exitButton);
    buttonsPanel.add(mainButton);
    buttonsPanel.add(editButton);
    buttonsPanel.add(addUser);
    buttonsPanel.add(deleteUser);
    buttonsPanel.add(tf1);
    buttonsPanel.add(searchButton);
    buttonsPanel.add(resultLbl);

    return buttonsPanel;
}

public final void createMenus(JFrame jframe) {
    JMenuBar menuBar = new JMenuBar();
    JMenu Fmenu = new JMenu("File");
    JMenu Bmenu = new JMenu("Book");
    mainpageItem = new JMenuItem("Main Page");
    exitItem = new JMenuItem("Exit");
    bookMenuItem = new JMenuItem("Book Page");

    mainpageItem.addActionListener(this);
    exitItem.addActionListener(this);
    bookMenuItem.addActionListener(this);

    Fmenu.add(mainpageItem);
    Fmenu.add(exitItem);
    Bmenu.add(bookMenuItem);

    menuBar.add(Fmenu);
    menuBar.add(Bmenu);
    jframe.setJMenuBar(menuBar);
}

@Override
public void actionPerformed(ActionEvent e) {

    if(e.getSource()== editButton){
        int selectedRow=uTable.getSelectedRow();
        if(selectedRow>0){
            editUser(selectedRow);

        }
        else{
            JOptionPane.showMessageDialog(null, "Select a user");
        }

    }
}

public boolean searchCondition(String userid) {
    if (userid.trim().isEmpty()) {
        resultLbl.setText("Please Enter User ID");
        return false;
    }
    return true;
}

public void SearchUser(String userEntered) {
    boolean find = false;
    File f = new File("AllUserRecords.txt");
    try {
        FileReader Bfr = new FileReader(f);
        BufferedReader Bbr = new BufferedReader(Bfr);
        String Us;
        while ((Us = Bbr.readLine()) != null) {
            String[] Ust = Us.split("     ");
            String uID = Ust[0];
            String Ufname = Ust[1];
            String Ulname = Ust[2];
            String UGender = Ust[3];
            String Udate = Ust[4];
            if (uID.equals(userEntered.trim())) {
                resultLbl.setText("User Found,"
                        + "    " + Ufname + "  " + Ulname + "  " + UGender + "  " + Udate);
                tf1.setText("              ");
                find = true;
            }
        }
    } catch (FileNotFoundException e) {
        resultLbl.setText("File Not Found");
    } catch (IOException ioe) {
        resultLbl.setText("IO Error");
    } finally {
        tf1.setText("              ");
        if (!find) {
            resultLbl.setText("User Not Found");
            tf1.setText("              ");
        }
    }
}

public static void main(String[] args) {
    new UserPage().setVisible(true);
}

public void editUser(int row){
    new NewUserFrame(UserPage.this).setVisible(true);      

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:30:51.253

1.  删除所有关于`FileIO`from的代码`AbstractTableModel`，将其移至单独的类 void（clean_up 逻辑），

2.  （您的 AbstractTableModel 缺失）需要覆盖[AbstractTableModel.setValueAt()](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#setValueAt%28java.lang.Object,%20int,%20int%29)

3.  （您的 AbstractTableModel 缺失）需要覆盖[AbstractTableModel.isCellEditable()](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#isCellEditable%28int,%20int%29)

4.  我将`DefaultTableModel`用于这项工作，不需要覆盖`AbstractTableModel`（也许`isCellEditable`和`getColumnClass`）所需的大多数方法，这些方法也可以从`JTable`和`DefaultTableModel`侧面访问

5.  （您的 AbstractTableModel）`JTable`仅可访问被覆盖的方法`AbstractTableModel`

# ios - 轮播非重复视图

> ID：15022094
> 
> 赞同：1
> 
> 时间：2013-02-22T10:34:00.583
> 
> 标签：ios, xcode, scroll, icarousel

我正在使用旋转木马。我将类型设置为 iCarouselTypeRotary。我的问题是图像不断重复，即我只有 4 张图像。在最后一张图像之后，第一张图像重复并继续。我希望它像 iCarouselTypeCoverFlow2 类型一样停止。请帮忙。我不能使用任何其他类型。我只希望这种风格用于轮播。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T10:39:26.970

我想你会在 Array.Check 数组中添加图像，也许下面的代码可以帮助你

此代码是根据新的 iCarousel 库文件

```
 - (CGFloat)carousel:(iCarousel *)carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value
{
if (option == iCarouselOptionSpacing)
{
    return value * 1.1f;
}

if (option == iCarouselOptionWrap)
{
    return NO;
}
return value;
} 
```

此代码是根据旧 iCarousel 库文件

```
-(BOOL)carouselShouldWrap:(iCarousel *)carousel
{
return NO;
} 
```

# jquery - 在 statuschange 禁用 -> 启用后 Internet Explorer 输入字段将不起作用

> ID：15022099
> 
> 赞同：0
> 
> 时间：2013-02-22T10:34:21.230
> 
> 标签：jquery, html, internet-explorer, input

我实际上是在尝试修复某种令人讨厌的 IE BUG。

我创建了一个带有策略复选框和提交按钮的 html 表单。只要策略复选框未被“选中”，提交按钮就会被禁用。这一切都是我用 jquery 完成的。

奇怪的是，它在 chrome、ff 和 safari 中都运行良好，但在 IE 中，按钮失去“禁用”状态后，它停止工作。它仍然显示为链接，但是当我单击它时，什么也没有发生。

这是我用来禁用和启用按钮的脚本：

```
/* Webform/Newsletter Checkbox + Mailfield validation */

var mailCheckbox = $('#webform-component-e-mail #edit-submitted-e-mail-newsletter-selection div').size();
var copyCheckbox = $('.webform-client-form input#edit-submitted-email-abmeldung-1, .webform-client-form #webform-component-datenschutzbestimmungen input#edit-submitted-datenschutzbestimmungen-1').size();

if(mailCheckbox > 1) {
        var submitButton = $('.webform-client-form #edit-actions').html();
            $('.webform-client-form #edit-actions').html('<input disabled type="submit" class="form-submit-disabled" value="Bestellen" name="op" id="edit-submit">')
            $('body').mousemove(function() {
        if ($('#edit-submitted-e-mail-newsletter-selection .form-checkbox').is(':checked') && $('#webform-component-email-abmeldung .form-checkbox').is(':checked') && $('#webform-component-e-mail #edit-submitted-e-mail-newsletter-email-address').val() != "" ) {
            $('.node-webform .webform-client-form #edit-actions').html('<input type="submit" class="form-submit" name="op" value="Absenden" id="edit-submit">')
            $('.node-newsletter-anmeldung .webform-client-form #edit-actions').html('<input type="submit" class="form-submit" name="op" value="Bestellen" id="edit-submit">')
        }
        else {
            $('.node-webform .webform-client-form #edit-actions').html('<input disabled type="submit" class="form-submit-disabled" value="Absenden" name="op" id="edit-submit">')
            $('.node-newsletter-anmeldung .webform-client-form #edit-actions').html('<input disabled type="submit" class="form-submit-disabled" value="Bestellen" name="op" id="edit-submit">')             
        }
        });
}
else {
        var submitButton = $('.webform-client-form #edit-actions').html();
            $('.webform-client-form #edit-actions').html('<input disabled type="submit" class="form-submit-disabled" value="Bestellen" name="op" id="edit-submit">')
            $('body').mousemove(function() {
        if ($('#webform-component-email-abmeldung .form-checkbox, #webform-component-datenschutzbestimmungen .form-checkbox').is(':checked') && $('#webform-component-e-mail #edit-submitted-e-mail-newsletter-email-address, #webform-component-webform-kontakt-email #edit-submitted-webform-kontakt-email').val() != "") {
            $('.node-webform .webform-client-form #edit-actions').html('<input type="submit" class="form-submit" name="op" value="Absenden" id="edit-submit">')
            $('.node-newsletter-anmeldung .webform-client-form #edit-actions').html('<input type="submit" class="form-submit" name="op" value="Bestellen" id="edit-submit">')
        }
        else {
            $('.node-webform .webform-client-form #edit-actions').html('<input disabled type="submit" class="form-submit-disabled" value="Absenden" name="op" id="edit-submit">')
            $('.node-newsletter-anmeldung .webform-client-form #edit-actions').html('<input disabled type="submit" class="form-submit-disabled" value="Bestellen" name="op" id="edit-submit">')
        }
        });
}

$('body.node-type-newsletter-anmeldung #edit-submit').attr('value', 'Bestellen');
$('body.node-webform #edit-submit').attr('value', 'Absenden'); 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:07:39.717

我自己让它工作，对于其他遇到这个问题的人，我是这样解决的：

```
/* Webform/Newsletter Checkbox + Mailfield validation */

    var mailCheckbox = $('#webform-component-e-mail #edit-submitted-e-mail-newsletter-selection div').size();
    var copyCheckbox = $('.webform-client-form input#edit-submitted-email-abmeldung-1, .webform-client-form #webform-component-datenschutzbestimmungen input#edit-submitted-datenschutzbestimmungen-1').size();

    $('.webform-client-form #edit-actions input').addClass('button_active');
    $('.webform-client-form #edit-actions').append('<div class="button_inactive"><input disabled type="submit" class="form-submit-disabled" value="Bestellen" name="op" id="edit-submit"></div>')

    if(mailCheckbox > 1) {
            var submitButton = $('.webform-client-form #edit-actions').html();
                $('.webform-client-form #edit-actions .button_active').css('display','none');
                $('body').mousemove(function() {
            if ($('#edit-submitted-e-mail-newsletter-selection .form-checkbox').is(':checked') && $('#webform-component-email-abmeldung .form-checkbox').is(':checked') && $('#webform-component-e-mail #edit-submitted-e-mail-newsletter-email-address').val() != "" ) {
                $('.node-webform .webform-client-form #edit-actions .button_active').css('display', 'block')
                $('.node-webform .webform-client-form #edit-actions .button_inactive').css('display', 'none')
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_active').css('display', 'block')
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_inactive').css('display', 'none')
            }
            else {
                $('.node-webform .webform-client-form #edit-actions .button_active').css('display','none');
                $('.node-webform .webform-client-form #edit-actions .button_inactive').css('display','block');
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_active').css('display','none');
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_inactive').css('display','block');
            }
            });
    }
    else {
            var submitButton = $('.webform-client-form #edit-actions').html();
                $('.webform-client-form #edit-actions .button_active').css('display','none');
                $('body').mousemove(function() {
            if ($('#webform-component-email-abmeldung .form-checkbox, #webform-component-datenschutzbestimmungen .form-checkbox').is(':checked') && $('#webform-component-e-mail #edit-submitted-e-mail-newsletter-email-address, #webform-component-webform-kontakt-email #edit-submitted-webform-kontakt-email').val() != "") {
                $('.node-webform .webform-client-form #edit-actions .button_active').css('display', 'block')
                $('.node-webform .webform-client-form #edit-actions .button_inactive').css('display', 'none')
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_active').css('display', 'block')
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_inactive').css('display', 'none')
            }
            else {
                $('.node-webform .webform-client-form #edit-actions .button_active').css('display','none');
                $('.node-webform .webform-client-form #edit-actions .button_inactive').css('display','block');
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_active').css('display','none');
                $('.node-newsletter-anmeldung .webform-client-form #edit-actions .button_inactive').css('display','block');
            }
            });
    } 
```

# c# - BackgroundWorker：将通用列表传递给 BackgroundWorker

> ID：15022101
> 
> 赞同：0
> 
> 时间：2013-02-22T10:34:23.427
> 
> 标签：c#, generics

问题：使用通用列表的方法需要很长时间来处理。因此，该方法应该放在后台工作人员中。

问题如下：如何从Backgroundworker访问通用列表？

```
[Call]
backgroundWorker.RunWorkerAsync(new Tuple<string, int, List<T>>(aInfo, aCount, aGenericList));

...
[DoWork]
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
            BackgroundWorker worker = sender as BackgroundWorker;

            Tuple<string, int, List<T>> aTuple = (Tuple<string, int, List<T>>)e.Argument; // won't work as <T> is not known
...
} 
```

我想做类似的事情

```
private void backgroundWorker_DoWork<T>(object sender, DoWorkEventArgs e, List<T> theList) where T : Interface 
```

但不知道如何使用它。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:05:42.350

解决此类问题的一种常见方法是创建一个非泛型接口，该接口公开泛型类型所需的属性/方法

在这种情况下，您可以使用接口来公开后台工作人员预期使用的泛型元素，例如`IListItem`：

然后，您将通用列表作为这些列表传递，并在输入的过程中将其投射（请注意，我也使用过`IEnumerable`- 见下文）：

```
backgroundWorker.RunWorkerAsync(new Tuple<string, int, 
        IEnumerable<IListItem>>(aInfo, aCount, aGenericList.Cast<IListItem>())); 
```

请注意，您需要将列表重新转换为接口类型才能通过。

最后，在您的`DoWork`方法中，您现在可以转换为您知道的内容：

```
Tuple<string, int, IEnumerable<IListItem>> aTuple = 
            (Tuple<string, int, IEnumerable<IListItem>>)e.Argument; 
```

我使用该方法是`IEnumerable`因为该`Cast`方法返回这种类型，如果您确实需要工作人员中的可变列表，那么解决方案将略有不同（并且更混乱，因为这意味着您需要在列表更改时开始锁定列表）。

# jsp - 从 servlet/s 获取多个属性到同一个 JSP

> ID：15022103
> 
> 赞同：0
> 
> 时间：2013-02-22T10:34:28.537
> 
> 标签：jsp, jakarta-ee, servlets, refresh, dispatcher

我在从两个不同的 servlet 获取 JSP 页面（一个 jsp 页面）中的多个属性时遇到问题。我遇到了一个异常，因为当 JSP 加载时，两个 request.getAttribute() 都被执行了，其中一个还没有从 servlet“发送”。

我首先从第一个 servlet 发送这个：

```
request.setAttribute("user", user);
RequestDispatcher dispatcher = request.getRequestDispatcher("success.jsp");
dispatcher.forward(request, response); 
```

这就是我从 JSP 文件中获取它的方式：

```
user = (User) request.getAttribute("user");
You are logged in as <%= user.getUsername() %>. 
```

现在从另一个 servlet 我发送这个：

```
request.setAttribute("convertedValue", convertedValue);
RequestDispatcher dispatcher = request.getRequestDispatcher("success.jsp");
dispatcher.include(request, response); 
```

并在 JSP 中得到这个：

```
double value = (Double) request.getAttribute("convertedValue"); 
```

问题是我不能像这样拥有它，因为我无法得到“还没有”的东西。我尝试过使用 if(getAttribute!=null) 之类的 if 语句，但效果不是很好。

也许更新 JSP 页面的一部分会起作用，但我不知道怎么做。我对AJAX不太熟悉..

我真的希望你们能帮助我解决这个问题！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:47:05.260

`request`您可以将用户对象设置为会话，而不是设置为

喜欢

```
req.getSession().setAttribute("user",user); 
```

否则将无法在请求之间共享。

谢谢 。

*我希望我以正确的方式理解你的问题。*

# c# - 在运行 javascript 的网络服务器上，在何处以及如何使用新的范围/上下文

> ID：15022104
> 
> 赞同：0
> 
> 时间：2013-02-22T10:34:33.120
> 
> 标签：c#, javascript, webserver

我目前正在用 C# 开发网络服务器，它使用 javascript 作为服务器端语言（使用 hte javascript.net 库，.NET 的 v8 引擎端口[https://github.com/JavascriptNet/Javascript.Net](https://github.com/JavascriptNet/Javascript.Net)）。目前我有一个问题：当我解析而不是从文件运行脚本时，在进程中创建的变量会永远存在，因为我在同一个 javascript 上下文中运行所有脚本。我应该怎么做才能防止这种情况发生？为网络服务器中的每个请求创建不同的上下文？我想这不是答案，因为它会非常无效。而且由于我不能像在类 C 语言中那样简单地通过左括号和右括号在 javascript 中创建范围，所以我不知道该怎么做。提前致谢！

# android - 在收到收件箱之前或之后访问邮件正文

> ID：15022106
> 
> 赞同：1
> 
> 时间：2013-02-22T10:34:39.207
> 
> 标签：android

` 包 com.example.smsTest;

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        { 
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
           for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + m sgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";        
        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    }                       
}
}` 
```

这是接收我发送的短信的代码..但我可以将它显示到收件箱..我正在尝试解密它并将其发送到收件箱..或者至少利用收件箱消息并解密它......所以是在收到收件箱的消息之前或之后有任何方法可以访问文本正文。

# php - 保存会话以传递到其他页面

> ID：15022108
> 
> 赞同：0
> 
> 时间：2013-02-22T10:34:49.800
> 
> 标签：php, session, session-variables

我有一个用户管理系统，其中用户的类型是“管理员”和“用户”。如果登录用户是管理员，他可以访问几个页面。如果角色是用户，他只能访问一页。我需要保存管理员/用户的会话，并每次检查他是否是“管理员”，这样用户就不会通过传递 URL 来非法访问信息。现在我可以只保存用户的名字，但不能保存他的角色。我该怎么做才能将角色传递给下一组页面。

主页.php

```
 session_start();
   if( $_SESSION["logging"] && $_SESSION["logged"] )
  {
  echo $_SESSION[user];
  //Can be accessed only by admin 
  dashboard();
  }
  if(!$_SESSION["logging"])
   { 
  $number_of_rows=checkpass();
     if($number_of_rows==1)
        {   
         $_SESSION[user]=$_GET[userlogin];
         $_SESSION[logged]=true;
         print"<h1>you have loged in successfully</h1>";
         if($res['ROLE']=='user')
         {
                      //Accessible only by user.
         print "<h3><a href='user.php'>View Users</a></h3>";
                 logout();
         }
        }
        else
        {
            print "Please enter your log in information!";  
            loginform();
        }
    } 
    function checkpass()
    {
     //Database query
     if($res['ROLE']=='admin')
     { 
       //Redirected 
       dashboard();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:37:11.140

用这个

```
if($res['ROLE']=='user')
{
     $_SESSION['ROLE'] = "user";
                  //Accessible only by user.
     print "<h3><a href='user.php'>View Users</a></h3>";
     logout();
}

if($res['ROLE']=='admin')
 { 
   $_SESSION['ROLE'] = "admin";
   //Redirected 
   dashboard();
 } 
```

用于`ROLE`在其他页面中使用

```
echo $_SESSION['ROLE']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:37:14.583

添加这是曾经需要的

```
$_SESSION['role']= role of the user; 
```

在其他页面中获取 $_SESSION['role']。

# javascript - 如何使用 KnockoutJS、SammyJS 和 pagerJS 组织 SPA

> ID：15022113
> 
> 赞同：2
> 
> 时间：2013-02-22T10:34:59.083
> 
> 标签：javascript, knockout.js, single-page-application, sammy.js, pagerjs

我刚刚开始使用 KnockoutJS，我将它与 PagerJS、SammyJS 和 BootStrap 结合使用来构建单页应用程序，我现在有点迷茫。

令我吃惊的是我应该如何组织视图模型并以简单且可重用的方式组合路由和页面？现在感觉就像一堆松散的碎片，几乎不适合。我已经检查了一些关于 SO 的答案，但我仍然没有掌握如何组织应用程序。

目前，我在页面上有一个视图模型，作为概念证明，它只为用户处理个人信息和即将发生的事件的显示。但是，现在我必须合并其他类型的信息，并且拥有一个视图模型，而不是多个视图模型似乎是不对的，因为期望用户能够管理他/她的事件、联系人和任务并列出其他用户、事件和任务等。还有更多即将到来。

用户选择/选择的几乎所有选项都在数据库中定义。例如，用户任务和解决这些任务的相应动作是在数据库中预定义的。

大多数示例倾向于将 SammyJS 路由放在 viewmodel 中，但是当页面上有多个 viewmodel 时，我想将 SammyJS 从单个 viewmodel 移动到自己的位置，即有一个地方可以编辑路由。

我的想法是使用 PagerJS 在不同的视图之间轻松切换，但它需要在 SammyJS 中设置的路径和用于 PagerJS 的数据绑定路径之间进行同步。例如，选择＃！/用户时，Sammy中的路由会处理请求并获取要显示的数据，并显示Pagerjs显示用户页面。对我来说感觉有点脆弱，但这也许是它应该如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:11:28.707

Some caveats beforehand:

I'm using [RequireJS](http://requirejs.org/) to divide my app up into modules - this isn't necessarily required (no pun intended) - you could just dump everything in one Javascript file and have it work, I just find it easier to organize and work with. [This question](https://stackoverflow.com/questions/14324123/module-granularity-strategies) shows how my project is laid out.

I'm also not using SammyJS for routing, but [Crossroads](http://millermedeiros.github.com/crossroads.js/) and Hasher. The concepts should be somewhat the same though.

The examples below probably aren't a 100% match for what you're doing, but hopefully it gives you an idea of the approach I'm using.

My `main.js` contains all the routing info, and inside each route handler, I use `require()` from RequireJS to pull in the module(s) I'm using for that route. Each module contains the Knockout ViewModel and several methods to do things like load data for the ViewModel, bind it in certain contexts, etc.

`main.js` here's how I handle the route to show the `#/person/id` route:

```
crossroads.addRoute("person/{id}", function(id){
    require(["person"], function(person) {
        var model = person.load(id);
        person.view($('#content'), model);
    });
}); 
```

Significant parts of `person.js`:

```
define(['jquery', 'knockout', ...], function($, ko, ...) {
    var person = {};
    person.Model = function Model(id) {
        this.id = ko.observable(id);
        this.name = ko.observable();
        // more properties and methods removed...
    };

    person.load = function(id) {
        var model = new person.Model(id);
        var request = $.ajax({
            // ajax config properties removed...
            'success' : function(resp) {
                model.name (resp.name);
                // more property setting removed...
            }
        });
        return model;
    };

    person.view = function(element, model) {
        // Using require text plugin to load templates...
        require(['text!templates/person/view.tmpl.html'], function(ViewTemplate) {
            element.empty();
            element.html(ViewTemplate).ready(function() {
                ko.applyBindings(model, element.get(0));
                // any further setup needed below...
            });
        });
    };
    return person;
}); 
```

# javascript - 处理弹出窗口的 Javascript 框架

> ID：15022114
> 
> 赞同：0
> 
> 时间：2013-02-22T10:35:03.097
> 
> 标签：javascript, frameworks, popup

在我们的 (web) 项目中，我们有一些弹出窗口 (window.open(...)) 来显示不同的对象详细信息。主窗口和这个弹出窗口之间也有一些基本的通信。现在我们要重构和清理所有这些代码，使其更加稳定和可扩展。我们在主页上考虑了一个处理框架之类的东西，它负责在需要时打开/重新加载详细信息，在窗口之间发送消息等。

有谁知道此类事情的现有框架，更重要的是，是否有人对此类框架有任何经验？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:24:36.567

我能帮助你的最接近的必须是[http://enyojs.com/](http://enyojs.com/)，我实际上已经在寻找 window.open 的解决方案，但似乎找不到，所以总是最终创建自定义windows，就像在 enyo 中一样。

# wordpress - Wordpress 脚本本地化 in_category

> ID：15022117
> 
> 赞同：0
> 
> 时间：2013-02-22T10:35:17.613
> 
> 标签：wordpress

我在我的 functions.php 中本地化了一个脚本，如下所示：

```
wp_enqueue_script('script', get_template_directory_uri() . '/js/script.js', 'jquery', false);
$scriptParams = array( 'catWork' => in_category('9'), 'catNews' => in_category('10'), 'test' => 'localized'  );
wp_localize_script('script', 'scriptLocalize', $scriptParams); 
```

然后，我查询 2 个单独的类别并在同一页面上的 2 个单独部分中输出缩略图。当我单击缩略图时，我正在通过 ajax 加载内容，但我需要使用我的 javascript 检测帖子所在的类别。例子：

```
$('.thumbnail').click(function() {
    if (scriptLocalize.catWork) {
      // Do something
    } else if (scriptLocalize.catNews) {
      // Do something else
    }
} 
```

但是，它似乎不起作用。我在我的搜索结果页面上运行同样的东西，它正在运行一个一般的帖子循环，它工作正常。它不工作是因为我在这种情况下查询特定类别吗？我知道脚本是本地化的，因为如果我在“测试”变量上运行警报，它会按预期发出“本地化”警报。

有任何想法吗？

# android - Android：如何通过点击视图弹出一个窗口？

> ID：15022118
> 
> 赞同：0
> 
> 时间：2013-02-22T10:35:19.940
> 
> 标签：android, android-ui, android-menu

如果单击该图像，则会在此处打开一个新窗口。如何做到这一点？它不是菜单对吗？？

![在此处输入图像描述](../Images/0b5f89504157a706205e2764ec16aa91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:37:42.243

您可以在 ImageView 上设置一个 onClickListener，例如

```
mImageView.setOnClickListener(new View.OnClickListener() {
                            public void onClick(View v) {

                             // start a dialog

                            }
                        }); 
```

单击时，您会打开一个对话框[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:37:52.417

`View`如果您在它们上设置 ，则可以触发`onClick(View v)`回调。`OnClickListener`当回调被调用时，您可以简单地通过 View.getId() 切换槽，以便了解哪些`View`已被点击。如果`view`单击的是正确的，则实例化并显示您的对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:52:19.870

1.  `OnCreate`你需要`this.registerForContextMenu(mImageView);`
2.  用于： `onClickListener`_`mImageView`

    ```
    `mImageView.setOnClickListener(new View.OnClickListener() {
     public void onClick(View v) {
      v.performLongClick();
     }
    });`
    ```

`*   实现上下文菜单[http://developer.android.com/guide/topics/ui/menus.html#context-menu](http://developer.android.com/guide/topics/ui/menus.html#context-menu)` 

 `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:47:53.210

试试这样。

```
mImageView.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                AlertDialog.Builder builder = new AlertDialog.Builder(
                        ctContext);
                builder.setItems(listdatatopopulate,
                        new DialogInterface.OnClickListener() {
                            public void onClick(
                                    DialogInterface dialogInterface,
                                    int item) {
                                // do some thing on item click
                            }
                        });
                builder.create().show();

            }
        }); 
````

# c# - 当我使用“监视器”时，你能给我一个简单的例子，因为它不能用“锁”来完成吗？

> ID：15022120
> 
> 赞同：0
> 
> 时间：2013-02-22T10:35:31.187
> 
> 标签：c#, multithreading, synchronization, locking

MSDN 告诉我，使用 lock 等同于使用监视器[，但更简洁且不易出错](https://stackoverflow.com/questions/15020064/why-does-the-lock-insure-that-the-underlying-monitor-is-released-and-direct-usag)。

你能给我一个简单的（单一进程）示例，为什么我会`Monitor`因为无法完成而被迫使用`lock`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T10:38:49.590

> 你能给我一个简单的（单进程）示例，为什么当锁不够时我会被迫使用监视器？

当然。假设您想在可以获得锁的情况下采取行动*，*但如果其他对象已经拥有它，您不想阻塞超过一定时间：

```
bool gotMonitor = false;

try
{
    Monitor.TryEnter(monitor, 500, ref gotMonitor);
    if (gotMonitor)
    {
        // Okay, we're in the lock. We can do something useful now.
    }
    else
    {
        // Timed out - do something else
    }
}
finally
{
    if (gotMonitor)
    {
        Monitor.Exit(monitor);
    }
} 
```

（请注意，我故意*不* [使用`TryEnter`仅返回成功/失败](http://msdn.microsoft.com/en-us/library/42h9d380.aspx)的重载- 我使用的版本更可靠，因为`ref`参数的设置对于锁定获取而言是原子的。）

# c++ - C++中模板类与模板方法的使用

> ID：15022124
> 
> 赞同：1
> 
> 时间：2013-02-22T10:35:51.000
> 
> 标签：c++, templates, metaprogramming, template-classes

我有一个类，它有一个公共的模板方法。这个类有两种行为策略，我想通过类模板传递。

```
template<class Strategy>
class SomeClass {
public:
    template<class B>
    void ProcessType(){}
};

// And do something like this:
SomeClass<Strategy1> sc();
sc.ProcessType<SomeClassType>();
sc.ProcessType<SomeClassType2>();

SomeClass<Strategy2> sc2();
sc2.ProcessType<SomeClassType>();
sc2.ProcessType<SomeClassType2>(); 
```

但是这段代码无法编译。我需要保持这样的用法（仅通过策略进行操作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T10:36:48.300

这就是问题：

```
SomeClass<Strategy1> sc(); 
```

这是一个被调用函数的声明`sc`，它不带参数并返回一个`SomeClass<Strategy1>`. 这通常被称为令人烦恼的解析（但不是[*最*令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)）。你想要的是：

```
SomeClass<Strategy1> sc; 
```

# php - 无法在用户朋友的墙上发帖，我收到“用户尚未授权应用程序执行此操作”

> ID：15022126
> 
> 赞同：0
> 
> 时间：2013-02-22T10:35:57.457
> 
> 标签：php, facebook, facebook-graph-api, feed

我不能在用户朋友的墙上发帖，但我可以在用户的​​墙上发帖。我可以访问用户的 publish_steam！userId是朋友的ID，

```
 try {
        $publishStream = $this->api("/$userId/feed", 'post', array(
            'message' => $message,
            'access_token' => $facebook->getAccessToken()
                ));
    } catch (FacebookApiException $e) {
        var_dump($e);
    } 
```

我收到“用户尚未授权应用程序执行此操作”，OAuthException

但是，我可以在用户的​​墙上写字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:13:14.027

经过[最近的更改](https://developers.facebook.com/roadmap/completed-changes/)，在用户朋友的墙上发帖的唯一方法是使用[提要对话框](http://developers.facebook.com/docs/reference/dialogs/feed/)

# hibernate - 将 NETbeans hibernate 和 mysql 转为嵌入式 derby

> ID：15022128
> 
> 赞同：0
> 
> 时间：2013-02-22T10:36:02.277
> 
> 标签：hibernate, netbeans, driver, derby

我正在使用 Netbeans hibernate 和 MySQL 开发一个应用程序，这很好用。将后端切换到 Derby Embedded 数据库，hibernate 无法进行逆向工程。

**随着消息：** `cannot access database with the configuration in "hibernate.cfg"`

**我的配置：**

```
<hibernate-configuration>
  <session-factory>
   <property name="hibernate.default_schema">servlandDERBY</property>
   <property name="hibernate.connection.driver_class">org.apache.derby.jdbc.EmbeddedDriver</property>
   <property name="hibernate.connection.url">jdbc:derby:servlandDERBY</property>
   <property name="hibernate.dialect">org.hibernate.dialect.DerbyDialect</property>
   <property name="hibernate.show_sql">true</property>
   <property name="hibernate.query.factory_class">org.hibernate.hql.ast.ASTQueryTranslatorFactory</property>
 </session-factory> 
```

我在我的项目中包含了 jar 文件 javaDB，其中包含 derby.jar 我是否必须在 Netbeans 中进行任何其他设置或额外配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:34:49.610

**网络和嵌入式**

**Java DB（网络）**

属性字符串：

```
<property
name="hibernate.connection.driver_class">org.apache.derby.jdbc.ClientDriver
</property> 
```

创建一个新连接以在 Netbeans 中测试您的数据库。

*   A）转到服务 - 数据库（右键单击） - 新连接
*   B）尝试创建一个新的连接
*   C) 车手德比好吗？
*   D) 开放连接

![在此处输入图像描述](../Images/fdb6a8cc77aad99ea1a890e089859ddd.png)

设置正确的设置

*   A) 数据库 URL
*   B) 驱动程序 - **org.apache.derby.jdbc.ClientDriver**

![在此处输入图像描述](../Images/15b4704f02951dbff1658de156e2435d.png)

**Java 数据库（嵌入式）**

右键单击 - Java DB (Embedded) - 连接使用

![在此处输入图像描述](../Images/0a0ab8feb3820d2c0bb83a358b0de0e8.png)

*   如下所述填写表格
*   单击测试连接

![在此处输入图像描述](../Images/3769a4d7492b02ab57207bd464b9998c.png)

现在您可以看到新的连接

![在此处输入图像描述](../Images/36521476782f0615b9648e7d3c55e8c0.png)

新连接的属性！！注意数据库 URL

![在此处输入图像描述](../Images/154e7a202caf1581eeddbe9e5765d3b0.png)

属性字符串：

```
<property
 name="hibernate.connection.driver_class">org.apache.derby.jdbc.EmbeddedDriver
</property>
<property
 name="hibernate.connection.url">jdbc:derby:C:/Dokumente und Einstellungen/Administrator/.netbeans-derby/sample
</property>
<property name="hibernate.connection.username">app</property>
<property name="hibernate.connection.password">app</property> 
```

如果你得到一个错误

这意味着
数据库是通过嵌入式连接打开的

![在此处输入图像描述](../Images/ee80abb2067b8f4b9040f768c357b2c8.png)

这意味着
数据库是通过网络连接打开的

![在此处输入图像描述](../Images/303df2cda0ba6d9c4ed6a49f315e2207.png)

希望有帮助。

# prolog - 使用 Prolog 将后缀转换为前缀

> ID：15022133
> 
> 赞同：1
> 
> 时间：2013-02-22T10:36:13.697
> 
> 标签：prolog

谁能帮我在**PROLOG**中使用堆栈概念编写一个程序，将算术表达式从后缀（反向波兰表示法）转换为前缀形式。算术表达式可能包含 4 个算术运算符**+ 、 - 、 / 、 ***和一元函数：`sin, cos, tan, exp, log and sqrt.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:03:12.103

[append](http://www.swi-prolog.org/pldoc/doc_for?object=append/2) /2 它是一个有用的列表组合器。它以相当一般的方式允许任意数量的列表之间的连接*关系。*我在这里只展示基本的，你需要完成你的任务，添加一些细节作为一元函数，定义 isop/1

```
pos2pre(Pos, Pre) :-
    append([A, B, [O]], Pos), isop(O), A \= [], B \= [],
    pos2pre(A, APre),
    pos2pre(B, BPre),
    !, append([[O], APre, BPre], Pre).
pos2pre([P], [P]). 
```

一个小测试：

```
?- pos2pre([1,5,*,2,+],X).
X = [+, *, 1, 5, 2]. 
```

我认为您应该尝试编写相同的逻辑，但使用[append](http://www.swi-prolog.org/pldoc/doc_for?object=append/3) /3，这将帮助您了解该过程的工作原理。

# r - R - 获取大数据框中的向量名称并排除索引列

> ID：15022134
> 
> 赞同：1
> 
> 时间：2013-02-22T10:36:14.993
> 
> 标签：r

我有一个包含许多向量的数据框，我需要编写一个公式：

y ~ a,b,c,..

其中 a,b,c.. 是所有向量的名称，除了 y 和包含帧索引的第一个向量。我做了类似的事情：

```
 xnam <- paste(colnames(data)[], sep="")
    fmla <- as.formula(paste("y ~ ", paste(xnam, collapse= "+"))) 
```

（我之前已经从数据副本中删除了向量 y ）。问题是这样我也得到了索引向量。我怎样才能删除它？有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:42:03.157

公式接口解释`.`为指定所有其他变量。要删除特定变量，只需`subset`：

```
summary(lm(hp~.,data=subset(mtcars,select=-qsec)))

Call:
lm(formula = hp ~ ., data = subset(mtcars, select = -qsec))

Residuals:
    Min      1Q  Median      3Q     Max 
-39.100 -15.833   1.593  17.677  33.582 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)   
(Intercept)  47.4615   127.7481   0.372  0.71380   
mpg          -2.1924     1.9776  -1.109  0.27957   
cyl           8.8756     9.4878   0.935  0.35970   
disp          0.4537     0.1335   3.399  0.00258 **
drat         -4.3969    15.7096  -0.280  0.78218   
wt          -30.4149    15.2230  -1.998  0.05823 . 
vs           24.1493    18.2235   1.325  0.19871   
am           11.1254    19.2025   0.579  0.56823   
gear          7.5968    14.2172   0.534  0.59847   
carb         19.2907     6.5193   2.959  0.00725 **
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 25.41 on 22 degrees of freedom
Multiple R-squared: 0.9025,     Adjusted R-squared: 0.8627 
F-statistic: 22.63 on 9 and 22 DF,  p-value: 3.923e-09 
```

如果您正在使用不解释“。”的函数，那么您可以修改您的函数以用于`setdiff`删除不需要的变量：

```
as.formula(paste("hp ~",paste(setdiff(names(mtcars),c("hp","qsec")),collapse="+")))
hp ~ mpg + cyl + disp + drat + wt + vs + am + gear + carb 
```

# shell - 文件名和文件夹名不匹配

> ID：15022140
> 
> 赞同：0
> 
> 时间：2013-02-22T10:36:32.187
> 
> 标签：shell, unix

我使用以下字符串在小文件列表（284 个文件 .txt）中拆分了一个大文件（2.8G）：

```
split -a 3 -C 10m -d 2 file.txt output_       
find . -type f -exec mv '{}' '{}'.txt \; 
```

然后，我创建了一个包含 284 个文件夹的列表，因为我想将 284 个文件中的每一个都放在相应的文件夹中。我使用的字符串如下：

```
for num in {1..284}; do
  mkdir output$num
done 
```

要复制文件夹中的每个文件，字符串是这样的：

```
for i in *.txt do
  dir=${i%.txt}
  cp "$i" "$dir"
done 
```

现在的问题是将每个文件放在相应的文件夹中，因为第一个文件被命名为例如：output_000.txt，而文件夹被命名为 output_0。这发生在从 0 到 100 的文件中。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:49:50.753

例如，如果您有一个填充数字字符串`s=001`，您可以使用 将其转换为数字`$((s))`。

尝试将脚本更改为：

```
for i in *.txt
do 
    prefix=${i%.txt} 
    num=$((${prefix#*_}))
    cp "$i" "output_${num}"
done 
```

所以`output_000.txt`会被复制到`output_0`.

# nosql - cassandra CQL3-Hex Bytes 转换错误的插入错误

> ID：15022143
> 
> 赞同：4
> 
> 时间：2013-02-22T10:36:35.663
> 
> 标签：nosql, cassandra, cql3

当我使用 cassandra -jdbc 将数据惰性化到表中时，出现错误 java.sql.SQLSyntaxErrorException: cannot parse 'ani' as hex bytes

在 localhost:9160 连接到测试集群。[cqlsh 2.3.0 | 卡桑德拉 1.2.0 | CQL 规范 3.0.0 | Thrift 协议 19.35.0] 使用 CQL3 创建表

```
cqlsh:testkeyspace> create columnfamily login(
                ... key varchar primary key,
                ... name varchar,
                ... password varchar);

package com.bsmart;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class InsertCass {

        public static void main(String[] args) {
            try
            {
                Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
                Connection con =DriverManager.getConnection("jdbc:cassandra://localhost:9160/testkeyspace");

                String qry = "INSERT INTO login (KEY, name, password) VALUES ( 't', 'ani','agrawal');";
                PreparedStatement smt = con.prepareStatement(qry);
                smt.execute();
                // int i=smt.executeUpdate();

                System.out.println("records inserted>>>>");

            }
            catch(Exception e)
            {
                System.out.println(" error: "+e.getMessage());
                e.printStackTrace();
            }

    } 
```

但是错误-

```
log4j:WARN No appenders could be found for logger (org.apache.cassandra.cql.jdbc.CassandraDriver).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
java.sql.SQLSyntaxErrorException: cannot parse 'ani' as hex bytes
    at org.apache.cassandra.cql.jdbc.CassandraPreparedStatement.doExecute(CassandraPreparedStatement.java:155)
    at org.apache.cassandra.cql.jdbc.CassandraPreparedStatement.execute(CassandraPreparedStatement.java:191)
    at com.bsmart.InsertCass.main(InsertCass.java:18)
 error: cannot parse 'ani' as hex bytes 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:55:00.663

您需要将`name`列创建为`text`或`varchar`。您收到的错误表明它是创建为`blob`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T01:18:14.460

我自己也有这个问题，但就我而言，它来自一种`double`.

在 python 的情况下，请确保指定适当的 cql 版本

`cql.connect(cluster_address, port, keyspace, cql_version='3.1.1')`

# dynamics-crm-4 - 我们可以减去两个日期并比较 CRM Dynamics 上的 WorkFlow 中的一个字段吗

> ID：15022146
> 
> 赞同：1
> 
> 时间：2013-02-22T10:36:45.507
> 
> 标签：dynamics-crm-4

我想减去两个日期字段，如果值超过 15 天，那么只有我应该更新 CRM 记录中的一些字段。我们可以使用 Workflow 来实现它吗？

```
If (Submission date - Created on) >= 15 
```

更新 CRM 实体

我想在 CRM 动态 4.0 下使用 Workflow 来实现这一点，有什么办法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:35:30.783

您可以向实体添加一个新属性 (xxx_daysdifference) 以存储日期差异，然后在“onsave”事件上使用 javascript 计算不同的日期并填充属性。

然后，您可以使用工作流对该属性进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:19:28.870

唯一的解决方案是您进行自定义活动来检查它。检查这篇文章：

*   [http://msdn.microsoft.com/en-us/library/gg328515.aspx](http://msdn.microsoft.com/en-us/library/gg328515.aspx)

我不知道你想做什么，但我可以使用 Javascript 来做到这一点：

```
var firstDate = crmForm.all.somedate1.DataValue;
var secondDate = crmForm.all.somedate2.DataValue;
if((firstDate.getDate() - secondDate.getDate()) >= 15)
      //Do Something 
```

我不测试代码用作指南。

# android - 如何在android中使用wampp保存数据？

> ID：15022148
> 
> 赞同：0
> 
> 时间：2013-02-22T10:36:50.077
> 
> 标签：android, database, wordpress, web-services, wamp

在我的应用程序中，有一个“已保存项目”选项，例如 Gmail。如果用户希望保存他们可以从 Android 应用程序保存的当前页面数据，请尝试这样做，正如我的一些朋友所说，我安装了 wamp 和 wordpress 并创建了一个数据库。

现在的问题是我不知道如何进行下一步，有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:46:11.080

为此，您不需要 Wordpress。

您需要用 PHP 之类的东西编写 API。这个 PHP API 将允许您从您的 Android 应用程序发出请求/发送数据。PHP API 接收到的数据将存储在您的 MySQL 数据库中。此 API 还应该具有能够在请求时将数据返回到 Android 应用程序的功能。

[这](http://brenelz.com/blog/how-to-create-a-simple-api-with-php-and-mysql/)是一个关于创建简单 API 的非常简单的指南。您应该使用 JSON，忽略 XML 部分。

# java - 在java中检索hashmap值

> ID：15022149
> 
> 赞同：1
> 
> 时间：2013-02-22T10:36:50.410
> 
> 标签：java, hashmap

我写了下面的代码来检索哈希图中的值。但它没有用。

```
HashMap<String, String> facilities = new HashMap<String, String>();

Iterator i = facilities.entrySet().iterator();

while(i.hasNext())
{
    String key = i.next().toString();  
    String value = i.next().toString();
    System.out.println(key + " " + value);
} 
```

我修改了代码以包含 SET 类，它工作正常。

```
Set s= facilities.entrySet();
Iterator it = facilities.entrySet().iterator();
while(it.hasNext())
{
    System.out.println(it.next());
} 
```

谁能指导我在没有 SET 类的情况下上面的代码出了什么问题？

PS - 我没有太多的编程经验，最近开始使用java

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T10:39:06.313

你打`next()`了两次电话。

试试这个：

```
while(i.hasNext())
{
    Entry e = i.next();
    String key = e.getKey();  
    String value = e.getValue();
    System.out.println(key + " " + value);
} 
```

简而言之，您还可以使用以下代码（也保留类型信息）。不知何故，使用`Iterator`的是 Java-1.5 之前的风格。

```
for(Entry<String, String> entry : facilities.entrySet()) {
    String key = entry.getKey();
    String value = entry.getValue();
    System.out.println(key + " " + value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T10:39:47.097

问题是您调用`i.next()`以获取密钥，然后再次调用它以获取值（下一个条目的值）。

另一个问题是您`toString`在`Entry`'s 上使用它，它与`getKey`or不同`getValue`。

您需要执行以下操作：

```
Iterator<Entry<String, String>> i = facilities.entrySet().iterator();
...
while (...)
{
   Entry<String, String> entry = i.next();
   String key = entry.getKey();  
   String value = entry.getValue();
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:40:24.673

您`i.next()`在循环中不止一次调用。我认为这是造成麻烦的原因。

你可以试试这个：

```
HashMap<String, String> facilities = new HashMap<String, String>();
Iterator<Map.Entry<String, String>> i = facilities.entrySet().iterator();
Map.Entry<String, String> entry = null;
while (i.hasNext()) {
    entry = i.next();
    String key = entry.getKey();
    String value = entry.getValue();
    System.out.println(key + " " + value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:42:33.397

```
String key;
for(final Iterator iterator = facilities.keySet().iterator(); iterator.hasNext(); ) {<BR>
   key = iterator.next();<BR>
   System.out.println(key + " : " + facilities.get(key));<BR>

for (Entry<String, String> entry : facilities.entrySet()) {<BR>
System.out.println(entry.getKey() + " : " + entry.getValue();<BR>
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T10:39:48.627

```
Iterator i = facilities.keySet().iterator();

while(i.hasNext())
{
    String key = i.next().toString();  
    String value = facilities.get(key);
    System.out.println(key + " " + value);
} 
```

# android - 如何在 android 中为 .gif 图像设置动画？

> ID：15022152
> 
> 赞同：18
> 
> 时间：2013-02-22T10:36:55.290
> 
> 标签：android, jquery-animate, gif, animationdrawable

**这是xml的代码：**

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/minepic" /> 
```

这里的 minepic 是一个 gif 动画图像，但在运行应用程序后它只显示一个静态图像。

> 有没有关于如何在 android 应用程序中为 .gif 图像设置动画的解决方案？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-11-15T00:36:31.993

要在此处给出准确而完整的答案，您需要逐步执行以下操作：

1.  您需要有不同的`.png`图像作为动画的框架。将它们保存在`res/drawable`文件夹中。

2.  `anim.xml`在文件夹中创建`res/drawable`具有以下内容的文件：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
        android:oneshot="false">

        <item android:drawable="@drawable/image_3" android:duration="250" />
        <item android:drawable="@drawable/image_2" android:duration="250" />
        <item android:drawable="@drawable/image_1" android:duration="250" />
        <item android:drawable="@drawable/image" android:duration="250" />

    </animation-list> 
    ```

3.  `xml`在要显示动画的布局文件中：

    ```
    //...
    <ImageView
         android:id="@+id/iv_animation"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:contentDescription="Animation" />
    //... 
    ```

4.  在加载布局 xml 文件并调用的 Java 文件中 `setContentView`：

    ```
    //...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ImageView animImageView = (ImageView) findViewById(R.id.iv_animation);
        animImageView.setBackgroundResource(R.drawable.anim);
        animImageView.post(new Runnable() {
            @Override
            public void run() {
                AnimationDrawable frameAnimation =
                    (AnimationDrawable) animImageView.getBackground();
                frameAnimation.start();
            }
        });
        // ... other code ... 
    }
    // ... 
    ```

为了停止动画，您可以调用`.stop()`. `AnimationDrawable`有关可用方法的更多详细信息，您可以查看[AnimationDrawable](https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)文档。希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-22T10:46:16.717

我不建议使用`Movie`or`WebView`类，`ImageView`而是将源可绘制设置为`animation-list`. 看例子（`mydrawable.xml`）：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:oneshot="false">
<item android:drawable="@drawable/image_1" android:duration="100" />
<item android:drawable="@drawable/image_2" android:duration="100" />
<item android:drawable="@drawable/image_3" android:duration="100" />
</animation-list> 

// in your layout : <ImageView
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:src="@drawable/my_drawable" /> 
```

显然，在使用此解决方案之前，您必须将 .gif 切片成单独的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-13T23:19:54.047

据我了解，您的 GIF 图像不会移动，因此如果您将 GIF 视为静态图片，这就是 Android 的原生行为。对我来说，最好的解决方案（不要重新发明轮子！）是开源库[gitDrawable](https://github.com/koral--/android-gif-drawable)。检查他们的 README，一切都非常简单：将依赖项添加到 gradle 并使用（在 XML 或代码中）。Java中的使用示例：

```
GifDrawable gifFromResource = new GifDrawable( getResources(), R.drawable.anim ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:05:29.883

```
And i think this is the one way of solution by writing the anim-space.xml 
In which the slices of the image are added to the items one by one and setting that xml to the imageview of our layout xml. 
```

[http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)

> 在此开发人员链接中，它已明确定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T06:15:09.637

好吧，我能够使用这个简单的代码为 android 图像设置动画：

```
canvas.drawColor(Color.WHITE);
super.onDraw(canvas);

long now=android.os.SystemClock.uptimeMillis();
System.out.println("now="+now);
if (moviestart == 0) { // first time
moviestart = now;

}

System.out.println("\tmoviestart="+moviestart);
int relTime = (int)((now - moviestart) % movie.duration()) ;
 System.out.println("time="+relTime+"\treltime="+movie.duration());
movie.setTime(relTime);
movie.draw(canvas,this.getWidth()/2-20,this.getHeight()/2-40);
this.invalidate();
 } 
```

它很容易使用movieview实现

或者我可以给你一个关于这些东西的[教程](http://programondaspot.blogspot.com/2015/06/gif-animation-on-android.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-23T17:58:10.733

使用线程（即 View.post(new Runnable)）不是一个好习惯，因为在绘制可绘制对象期间视图可能已更改（一种情况是使用 ListView 上的动画图像和包含不同背景图像的项目） ，如果 ImageView 在线程运行时具有不是动画资源的背景，则可能会导致 ClassCastException。

```
ImageView loadingImg = (ImageView)v.findViewById(R.id.image);
loadingImg.setBackgroundResource(R.drawable.progressdialog);
loadingImg.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() {
  @Override
  public void onViewAttachedToWindow(View v) {
    AnimationDrawable loadingAnimation = (AnimationDrawable) v.getBackground();
    loadingAnimation.start();
  }

  @Override
  public void onViewDetachedFromWindow(View v) {
  }
}); 
```

[此处](https://stackoverflow.com/a/22155576/1161198)显示的示例

# android - 如何使用数据库表中的数据填充 ExpandableListView ..？

> ID：15022157
> 
> 赞同：2
> 
> 时间：2013-02-22T10:37:10.923
> 
> 标签：android, sqlite, expandablelistview

我用谷歌搜索了很多，但没有找到关于这个主题的任何有用的内容。我想要这样的东西：

```
+++++++++++
+ parent1 +
+++++++++++
      c1
-----------
      c2
+++++++++++
+ parent2 +
+++++++++++
      c3
-----------
      c4
----------- 
```

parent & child 必须来自 db....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:08:06.310

我认为[本教程](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)可以帮助您使用 Expandable ListView。

我以前用过它，它工作！

**编辑**：

要从 sqlite DB 中读取，请查看[此链接](http://android-er.blogspot.co.uk/2011/06/simple-example-using-androids-sqlite.html)。获得数据后，使用第一个链接填充可展开的列表视图。

这方面有很多教程。我刚给你一个。你可以在互联网上找到更多。

# javascript - 在 C#.net 中单击时应隐藏文本框中的占位符文本

> ID：15022177
> 
> 赞同：0
> 
> 时间：2013-02-22T10:37:57.310
> 
> 标签：javascript, .net, c#-4.0

我想知道如何在文本框中使用占位符。我想使用一些必须说“在此处输入您的姓名”的文本框。当用户单击文本框时，我想清除文本。如果他没有再次在文本框中输入任何内容，它应该说“在此处输入您的姓名”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:39:50.423

你需要使用下面的html

```
<input type="text" placeholder="Receiver name" maxlength="40" id="fname" name="fname" class="ci-heading ci-shadow-inset ui-input-text ui-body-c ui-corner-all ui-shadow-inset"> 
```

在 Asp.net 中，您可以将其编写为：

```
<ASP:TextBox id="txt1" placeholder="Receiver name"></ASP:TextBox> 
```

简单的html代码：

```
<html>
<body>  
<form action="#" method="POST">  
    <input type="text" placeholder="Receiver name" maxlength="40" id="fname" name="fname" class="ci-heading ci-shadow-inset ui-input-text ui-body-c ui-corner-all ui-shadow-inset">
        </form>        
    </div>
</body>
</html> 
```

# xml - 从变量分配 xml 元素名称

> ID：15022178
> 
> 赞同：0
> 
> 时间：2013-02-22T10:37:58.213
> 
> 标签：xml, xslt

我想创建一个带有参数的模板，并使用这个参数创建一个具有该名称的元素。

如何才能做到这一点？

这是一个无效的示例，但给出了我想要做什么的想法。

```
<xsl:call-template name="parseOneValue">
   <xsl:with-param name="name" select="'addr'" />
</xsl:call-template>

<xsl:template name="parseOneValue">
   <xsl:param name="name"/>
   <xsl:element name="$name">
     <xsl:attribute name="at">local
     </xsl:attribute>
   </xsl:element>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:40:26.377

将 XPath 表达式分配给 XML 元素内的属性时，您必须用大括号将 XPath 表达式括起来，以向 XSLT 处理器指示该值必须是动态计算的。

所以正确的模板应该是：

```
<xsl:template name="parseOneValue">
   <xsl:param name="name"/>
   <xsl:element name="{$name}">
     <xsl:attribute name="at">local
     </xsl:attribute>
   </xsl:element>
</xsl:template> 
```

# angularjs - 如何简化表单验证？

> ID：15022180
> 
> 赞同：29
> 
> 时间：2013-02-22T10:38:09.880
> 
> 标签：angularjs

下面的代码似乎非常适合进行基本的必需表单验证。

当字段脏+ 无效且*Great* *！*如果该字段是脏的+有效的消息。

但是对于表单中的每个字段都重复此代码是一团糟：

```
<form name="myForm">
    <div class="control-group" 
     ng-class="{error: myForm.name.$invalid && myForm.name.$dirty}">
        <label>Name:</label>
        <input type="text" name="name" ng-model="user.name" required/>
        <span ng-show="myForm.name.$invalid && myForm.name.$dirty" 
            class="help-inline">Name is required</span>
        <span ng-show="myForm.names.$valid && myForm.names.$dirty">Great!</span>
    </div>
</form> 
```

我希望能够以更简单的方式指定`ng-show`and`ng-class`属性。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-22T11:44:05.920

您可以这样做的一种方法是将您的验证表达式抽象为范围方法：

`[**PLUNKER**](http://plnkr.co/edit/DHwOl881L6AhFue9EjGA?p=preview)`

# HTML

```
<div class="control-group" ng-class="{error: isInvalid('name')}">
  <label>Name:</label>
  <input type="text" name="name" placeholder="Name" ng-model="user.name" required/>
  <span ng-show="isInvalid('name')" class="help-inline">Name is required</span>
  <span ng-show="isValid('name')">Great!</span>
</div> 
```

## 控制器

```
function Ctrl($scope) {
  $scope.isInvalid = function(field){
    return $scope.myForm[field].$invalid && $scope.myForm[field].$dirty;
  };

  $scope.isValid = function(field){
    return $scope.myForm[field].$valid && $scope.myForm[field].$dirty;
  };

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-04T06:20:35.400

我知道这个问题很老，但我想与世界分享我很棒的新角度指令，我在 Github 上做了一个项目，我认为它与可用/可用的任何东西相比简直是摇滚......我以优秀的 Laravel 为基础PHP 框架并使其在 Angular 下可用......说得够多了，让我们举一些例子：

```
<!-- example 1 -->
<label for="input1">Simple Integer</label>
<input type="text" validation="integer|required" ng-model="form1.input1" name="input1" />

<!-- example 2 -->
<label for="input2">Alphanumeric + Exact(3) + required</label>
<input type="text" validation="alpha|exact_len:3|required" ng-model="form1.input2" name="input2" /> 
```

所以我可以在一个简单的指令中定义我想要的任何数量的验证规则，`validation="min_len:2|max_len:10|required|integer"`并且错误消息将始终显示在下一个`<span>`你们不喜欢它了吗？1 行代码用于输入，~~1 行代码用于错误显示，~~你不能比这更简单......哦，如果你想添加，我什至支持你的自定义 Regex :)

不再有 10 行的集群表单当您唯一需要的是 2 行时，1 个输入的代码，仅此而已，即使对于带有 5 个验证器的输入也是如此。不用担心表格不会失效，我也处理好了，这一切都处理得很好。

看看我的 Github 项目[Angular-Validation](https://github.com/ghiscoding/angular-validation)并传播这个词 =)

**编辑**
为了使用户体验更加流畅，我添加了计时器验证。这个概念很简单，不要在用户忙于打字时打扰他，但要验证他是否暂停或更改输入（onBlur）......喜欢它！
您甚至可以根据自己的喜好自定义计时器，我决定在指令中将其默认为 1 秒，但如果您想自定义，您可以调用例如`typing-limit="5000"`5 秒。超时。完整示例：

```
<input type="text" validation="integer|required" typing-limit="5000" ng-model="form1.input1" name="input1" /> 
```

**编辑 #2**
还添加了输入匹配确认验证（例如：密码确认），这是一个示例代码

```
<!-- input match confirmation, as for example: password confirmation -->
<label for="input4">Password</label>
<input type="password" name="input4" ng-model="form1.input4" validation="alpha|min_len:4|required"  />
<label for="input4c">Password Confirmation</label>
<input type="password" name="input4c" ng-model="form1.input4c" validation="match:form1.input4,Password|required"  /> 
```

**编辑#3**
重构了指令，因此`<span>`不需要显示错误的要求，指令现在自行处理它，请参阅顶部反映的代码更改。

**DEMO**
添加了现场演示`[Plunker](http://plnkr.co/jADq7H)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-09T21:01:39.057

请使用这个 CSS

```
.myForm input.ng-invalid.ng-dirty {
    background-color: #FA787E;
}

.myForm input.ng-valid.ng-dirty {
    background-color: #78FA89;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-08T03:32:06.347

您可以使用[Angular-Validator](https://github.com/turinggroup/angular-validator)。

## 它会

1.  以红色显示所需的错误消息（可选择使用引导类）
2.  如果该字段未通过验证器，则将该字段标记为无效
3.  防止表单在无效时提交
4.  仅在字段脏时显示消息
5.  清理你的代码！

## 它不会

1.  显示成功消息（即将支持成功消息）。

## 例子

```
<form name="myForm" angular-validator>
    <div class="control-group">
        <label>Name:</label>
        <input type="text" 
               name="name"
               ng-model="user.name"
               required-message="'Name is required'"
               required/>
    </div>
</form> 
```

**显示成功消息的解决方法：**

```
<form name="myForm" angular-validator>
    <div class="control-group">
        <label>Name:</label>
        <input type="text" 
               name="name"
               ng-model="user.name"
               required-message="'Name is required'"
               required/>
        <span ng-show="myForm.names.$valid && myForm.names.$dirty">Great!</span>
    </div>
</form> 
```

查看更多[Angular-validator 用例和示例](https://github.com/turinggroup/angular-validator)。

*免责声明：我是 Angular-Validator 的作者*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-31T02:47:04.553

github上有一个名为[xtForm](https://github.com/refactorthis/xtform)的角度指令/项目。看起来它是一个简单的角度字段验证的良好开端。XtForm 减少了输入标签之后的验证消息标记量。

链接到[演示站点](http://www.brentmckendrick.com/code/xtform/) [https://github.com/refactorthis/xtform](https://github.com/refactorthis/xtform)

小用法示例。不需要额外的标记（ng-show on spans）来获取此字段是必需的错误消息/工具提示。

```
<form xt-form novalidate>
  <input name="email" ng-model="modelVal" xt-validate required>
  <button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-06T15:07:35.080

考虑使用我一直在研究的这个**[ngValidate模块。](https://github.com/RijulB/ngValidate)**

```
<input name="demo-field-1" ng-model="user.name" ng-validate="customStrategy"> 
```

该指令将添加一个跨度来保存您的错误消息。您可以定义自定义验证策略和单独的错误消息。

```
ngValidateFactory.strategies.customStrategy = [
{
    value:ngValidate.required;
    message:"This field is required"
},
{
    value:[ngValidate.minLength,8];
    message:"Minimum 8 characters are required"
},
{
    value:[myFunction,arg1,arg2];
    message:"This field fails my custom function test"
}] 
```

[演示 plnkr](http://plnkr.co/edit/T2imkFf1yYKPB2ljkYtR)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-14T19:02:13.503

试试这个 HTML：

```
<form name="myForm" ng-submit="submitForm()" novalidate>

            <!-- NAME -->
            <div class="form-group" ng-class="{'has-error' : myForm.name.$invalid && !myForm.name.$pristine }">
                <label>Client Name</label>
                <input type="email" name="email" class="form-control" ng-model="formValues.userName" required placeholder="User Name">
                <p ng-show="myForm.email.$invalid && !myForm.email.$pristine" class="error">Your email is required.</p>
            </div>

            <div class="form-group">
                <label >Password</label>
                <input type="password" name="formValues.password" class="form-control" placeholder="Password" ng-model="formValues.password" ng-maxlength="6" required>
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" name="formValues.confirmPassword"  class="form-control"  placeholder="Confirm Password" ng-model="formValues.confirmPassword" required>
                <span class="error" ng-if="formValues.confirmPassword" ng-show="formValues.password!=formValues.confirmPassword">password should not match</span>
            </div>

            <div class="form-group">
                <label>First Name</label>
                <input type="text" name="formValues.firstName"  class="form-control" placeholder="First Name" ng-model="formValues.firstName" ng-keyup="acceptAlphabets(formValues.firstName,$event)" required>
                <span class="error"  ng-show="myString">Accept only letters</span>
                <span class="error" ng-show="myStringLength">Accept only 50 characters</span>
            </div>

            <div class="form-group">
                <label>Last Name</label>
                <input type="text" name="formValues.larstName" class="form-control"  placeholder="Last Name" ng-model="formValues.larstName" required>

            </div>
            <div class="form-group">
                <label>Date Of Birth</label>
                <input type="text" name="formValues.dateOfBirth" class="form-control" id="exampleInputPassword1" placeholder="Date Of Birth" ng-model="formValues.dateOfBirth" ng-keyup="dateFun(formValues.dateOfBirth,$event)" required>
                <span class="error" ng-show="dateVal">Incorrect Format, should be MM/DD/YYYY</span>

            </div>

            <button type="submit" class="btn btn-primary" ng-disabled="myForm.$invalid" ng-model="formValues.submit">Submit</button>

        </form> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-21T13:46:55.097

```
<form ng-app="demoApp" ng-controller="validationCtrl" 
name="myForm" novalidate>

<p>Username:<br>
<input type="text" name="user" ng-model="user" required>
<span style="color:red" ng-show="myForm.user.$dirty && myForm.user.$invalid">
<span ng-show="myForm.user.$error.required">Your Username is required.</span>
</span>
</p>

<p>Email:<br>
<input type="email" name="email" ng-model="email" required>
<span style="color:red" ng-show="myForm.email.$dirty && myForm.email.$invalid">
<span ng-show="myForm.email.$error.required">Your Email is required.</span>
<span ng-show="myForm.email.$error.email">Invalid email address.</span>
</span>
</p>

<p>Mobile:<br>
<input type="number" name="number" ng-model="number" required>
<span style="color:red" ng-show="myForm.number.$dirty && myForm.number.$invalid">
<span ng-show="myForm.number.$error.required">Your Phone is required.</span>
<span ng-show="myForm.number.$error.number">Invalid number.</span>
</span>
</p>

<p>
<input type="submit"
ng-disabled="myForm.user.$dirty && myForm.user.$invalid ||  
myForm.email.$dirty && myForm.email.$invalid || myForm.number.$dirty && myForm.number.$invalid">
</p>
</form>

<script>
//This is controller
var app = angular.module('demoApp', []);
app.controller('validationCtrl', function($scope) {
    $scope.user = 'angular';
    $scope.email = 'angular.js@gmail.com';
});
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-13T00:34:38.367

我可能为时已晚，但您可以使用外部库为您处理验证。[Angular 表单验证器](http://adipa-g.github.io/ngFormValidator.html)（由我编写）通过使用很少的标准验证器使其变得更容易，例如

1.  必需的
2.  字符串（最小/最大长度）
3.  数量（最小值/最大值）
4.  图案
5.  电子邮件
6.  网址
7.  等于（用于验证电子邮件/密码）
8.  自定义（您可以在其中插入自己的验证）

它允许将多个验证器组合到一个字段。

```
<form name="introform" ng-controller="intro">
    <div class="form-group" validator="required['Field is required'],string[5,20,'Should between 5 and 20 characters']">
        <label for="requiredField">Required Field</label>
        <input type="text" class="form-control" id="requiredField" name="requiredField"
               placeholder="Required Field" ng-model="model.requiredField">
    </div>
    <button type="submit" class="btn btn-default" ng-disabled="!introform.$valid">Submit</button>
</form> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-18T04:48:18.090

[在codpen 链接](https://codepen.io/abhilashn/pen/XzzyMY)上查看我的 angularJS 表单验证

我已经展示了一个示例，如何在我的演示中验证所需的、最小长度、最大长度、电子邮件、密码大小写、确认密码匹配。

这是代码：

```
var myApp = angular.module('myApp',[]);
myApp.controller('mainController',['$scope', function($scope) {

}]);
myApp.directive('validConfirmPassword', function() {
	return {
		require:'ngModel',
		link: function(scope, elem, attrs, ctrl) {
			ctrl.$parsers.unshift(function(viewValue, $scope) {
				var noMatch = viewValue != scope.myForm.password.$viewValue;
				ctrl.$setValidity('noMatch', !noMatch)
			})
		}
	}
}) 
```

```
.content{ margin-top:50px;  }
.danger-text { color: red; }
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div ng-app="myApp">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="#">AngularJS Form Validation</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample07" aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
    </nav>

	<div class="container content" ng-controller="mainController">
		<div class="row">
			<div class="col-sm-12">
				<form name="myForm" novalidate>
					<div class="row">
		    			<div class="col-md-6 mb-3">

								<label for="first_name">First Name</label>
								<input type="text" name="firstname" ng-model="firstname" id="firstname"  class="form-control" required>
								<p ng-show="myForm.firstname.$touched && myForm.firstname.$invalid" class="danger-text">Please enter your first name</p>	

						</div>
						<div class="col-md-6 mb-3">

								<label for="last_name">Last Name</label>
								<input type="text" name="last_name" ng-model="last_name" id="last_name"  class="form-control"  required>
								<p ng-show="myForm.last_name.$invalid && myForm.last_name.$touched" class="danger-text">Please enter your last name</p>

						</div>
					</div> <!-- End of row -->
					<div class="row">
						<div class="col-md-6 mb-3">
							<label for="username">Username</label>
							<input type="text" name="username" id="username" ng-model="username" class="form-control" ng-required="true" ng-minlength="4" ng-maxlength="10" >
							<p ng-show="myForm.username.$error.required && myForm.username.$touched" class="danger-text">Please enter username</p>
							<p ng-show="myForm.username.$error.minlength" class="danger-text">Username is too short</p>
							<p ng-show="myForm.username.$error.maxlength" class="danger-text">Username is too long</p>
						</div>
						<div class="col-md-6 mb-3">
							<label for="email">Email</label>
							<input type="email" name="email" id="email" class="form-control" ng-model="email">
							<p ng-show="myForm.email.$invalid && !myForm.email.$pristine" class="danger-text">Enter a valid email address</p>
						</div>
					</div> <!-- ENd of row -->
					<div class="row">
						<div class="col-md-6 mb-3">
							<label for="password">Password</label>
							<input type="password" class="form-control" id="password" name="password" ng-model="password" ng-minlength="8" ng-maxlength="20" ng-pattern="/(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z])/" required  />
   <p class="danger-text" ng-show="myForm.password.$error.required && myForm.password.$touched">Password is required</p>
   <p class="danger-text" ng-show="!myForm.password.$error.required && (myForm.password.$error.minlength || myForm.password.$error.maxlength) && myForm.password.$dirty">Passwords must be between 8 and 20 characters.</p>
   <p class="danger-text" ng-show="!myForm.password.$error.required && !myForm.password.$error.minlength && !myForm.password.$error.maxlength && myForm.password.$error.pattern && myForm.password.$dirty">Must contain one lower &amp; uppercase letter, and one non-alpha character (a number or a symbol.)</p>
						</div> <!-- End of col md 6 -->
						<div class="col-md-6 mb-3">
							<label>Confirm Password</label>
							<input type="password" id="confirm_password" name="confirm_password" class="form-control" ng-model="confirm_password" valid-confirm-password required  />
   <p class="danger-text" ng-show="myForm.confirm_password.$error.required && myForm.confirm_password.$dirty">Please confirm your password.</p>
   <p class="danger-text" ng-show="!myForm.confirm_password.$error.required && myForm.confirm_password.$error.noMatch && myForm.password.$dirty">Passwords do not match.</p>
						</div>
					</div> <!-- ENd of row -->
					<div class="row">
						<div class="col-md-12">
							<button type="submit"  class="btn btn-primary">Submit</button>
						</div>
					</div>
				</form> <!-- End of form -->
			</div> <!-- End of col sm 12 -->
		</div> <!-- End of row -->
	</div> <!-- End of container -->
  </div>
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-09-14T13:04:08.530

**索引.php**

```
<form class="add-task" id="myForm" name="myForm" method="post" ng-submit="submitForm(myForm.$valid)" novalidate>
   <div class="form-actions">
      <!-- ng-patten for validation -->
      <span class="error" ng-show="myForm.username.$error.required">
      Required!</span> 
      <div class="input-group">
         <input type="text"  ng-model="user2.username"  name="username" ng-pattern="example.word" placeholder="User Name" required>
         <input  type="password"  ng-model="user2.password"   name="password" placeholder="user password" ng-minlength="4"
            ng-maxlength="10" required>
         <button class="btn btn-success" ng-show="displayadd" type="submit"  ng-click="addUser(user2)" ng-disabled="myForm.$invalid"><i class="glyphicon glyphicon-plus"></i> Add New user</button>
         <button class="btn btn-default" ng-show="displayupdate"  ng-click="updateUser(user2)" value="Update"ng-disabled="myForm.$invalid"><span class="glyphicon glyphicon-save"></span>Save Change</button>
         <p style="color:red" ng-show="myForm.password.$error.minlength" class="help-block">Password Is Very Short.</p>
         <p style="color:red"  ng-show="myForm.password.$error.maxlength" class="help-block">Password Is Very Long.</p>
      </div>
   </div>
</form> 
```

在**app.js**中包含这个函数：

```
 $scope.submitForm = function() {
     if ($scope.myForm.$valid) {
         alert('Our Form Is Submited....');
     }
 }; 
```

# c# - 在运行时传递 Type 参数

> ID：15022186
> 
> 赞同：3
> 
> 时间：2013-02-22T10:38:20.997
> 
> 标签：c#, type-parameter

**代码**

```
public class Test
{
    public int id{get;set;}
    public Type test{get;set;}
}    

public object Convert<T1, T2>()
{ 
    //do stuff        
}

public void DoConvert()
{
    var a = Convert<Test, Test>(); // This Works

    var t = new Test() { test = typeof(Test); }
    var b = Convert<t.test, t.test>(); // This does not work!
} 
```

**问题**

如上面代码中所述。如何使 Convert 方法在运行时定义 T1 和 T2 的情况下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:48:19.107

您*必须进行*用户反射才能使用[Type.MakeGenericType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)获得结果。假设`Convert`方法是*静态*的并且在`Temp`类中：

```
class Temp
{
    public static object Convert<T1, T2>()
    { 
        //do stuff        
    }
} 
```

然后你可以调用：

```
// assume code to get type1 and type2 dynamically
var type1 = GetGetType1();
var type2 = GetGetType2();

var method =  typeof(Temp).GetMethod("Convert")
                             .MakeGenericMethod(type1, type2);

method.Invoke(null, null);  //assume Convert is static method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:41:05.713

[Type.MakeGenericType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)是你的朋友。你不能像那样在运行时创建泛型类型，你必须使用反射。但是你会失去静态类型，这是你应该注意的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:42:48.560

> 如何使 Convert 方法在运行时定义 T1 和 T2 的情况下工作？

反射或运行代码生成是您唯一的选择。

编译代码中的模板必须由编译器解析。因此，您可以像 ASP.NET 那样在运行时创建和编译代码（编译器是运行时的一部分）；或者您通过使用反射避免编译（如[其他答案](https://stackoverflow.com/a/15022247/67392)所述：[Type.MakeGenericType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)允许您 take`MyType<>`和 a `T`to get `MyType<T>`）。

对于通用方法使用[`MethodInfo.MakeGenericMethod`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)

# android - 安卓服务启动

> ID：15022191
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:38:30.357
> 
> 标签：android, service

我创建`Service`了下载电影并通知进度，当我开始下载然后从应用程序退出时我发现了一个问题，我的服务创建新而不破坏前一个。

**日志 ：**

```
 CREATE  // I press Download button Service Created
 START  
 RUN
 CREATE  // I exit from app and it creates new, without DESTROY
 START
 RUN    
 START   // I press to stop downloading
 DESTROY 
```

**下载管理器.java**

```
public class DownloadManager extends Service{

private ExecutorService exec;

private int mb = 1024*1024;
private int Notifid;
private int progressPercent;

private String title;
private String url;

private boolean serviceWork = true;

private NotificationManager manager;
private NotificationCompat.Builder builder;

@Override
public void onCreate() {
    super.onCreate();   
    exec = Executors.newFixedThreadPool(1);
    builder = new NotificationCompat.Builder(getApplicationContext());
    manager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    url = intent.getStringExtra(C.SERVICE_URL);
    title = intent.getStringExtra(C.SERVICE_TITLE);

    if(url.equals("cancel")){
     stopSelf();
    }       
    else {          
        Run run = new Run(url, title);
        serviceWork = true;
        exec.execute(run);
    }

    Notifid = 0x45;

    return START_REDELIVER_INTENT;
}

@Override
public void onDestroy() {
    if(url.equals("cancel")){
        cancel();
    }           
    serviceWork = false;
    super.onDestroy();
}

void generateNotify(String msg1, String msg2){              
    builder.setAutoCancel(false);
    builder.setOngoing(true);
    builder.setContentTitle(msg1);
    builder.setContentText(msg2);
    builder.setSmallIcon(R.drawable.ic_launcher, 0);
    builder.setTicker(msg1);
    builder.setProgress(0, 0, true);

    Intent intent = new Intent(this, DownloadManager.class);
    intent.putExtra(C.SERVICE_URL, "cancel");
    PendingIntent pending = PendingIntent.getService(this, 0, intent, 0);
    builder.setContentIntent(pending);
    manager.notify(Notifid, builder.build());   

}

void progress(final int progress, final String msg){
    new Thread(
            new Runnable() {
                @Override
                public void run() {
                    builder.setProgress(100, progress, false);
                    builder.setContentText(msg);
                    manager.notify(Notifid, builder.build());   
                }
         }
    ).start();
}

void ticker(String msg1){
    builder.setTicker(msg1);
    builder.setContentText(msg1);
    manager.notify(Notifid, builder.build());   
}

void cancel(){
    manager.cancel(Notifid);
}

void cancable(){
    builder.setOngoing(false);

    Intent intent  = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.parse("sdcard/Mover/"+title+".mp4"), "video/*");

    PendingIntent pending = PendingIntent.getActivity(this, 0, intent, 0);
    builder.setContentIntent(pending);
    builder.setAutoCancel(true);

    manager.notify(Notifid, builder.build());
}

class Run implements Runnable{

    private String url;
    private String title;

    private int count;
    private int fileLength;

    public Run(String url, String title) {
        this.url = url;
        this.title = title;
    }

    @Override
    public void run() {

        try{

            // Создаем подключение к ссылке.

            URL openUrl = new URL(url);
            URLConnection connection = openUrl.openConnection();
            connection.connect();

            // Проверяем наличие папки если отсуствует создаем.

            File file = new File("sdcard/Mover/");
            file.mkdirs();

            // Размер файла

            fileLength = connection.getContentLength();

            // Загружаем конетнт

            InputStream ips = new BufferedInputStream(openUrl.openStream());
            OutputStream ops = new FileOutputStream("sdcard/Mover/"+title+".mp4");

            // Показываем уведомление
            DownloadManager.this.generateNotify(title, "Всего: " +format(fileLength));

            byte[] data = new byte[1024];
            int total = 0;
            int last = 0;
            int progress = 1;
            int lasttotal = 0;

            int speed = 0;

            long current = System.currentTimeMillis();
            // Читаем
            while ((count = ips.read(data)) != -1) {
                if(serviceWork){
                    ops.write(data, 0, count);                  
                    total += count;    

                    long now = System.currentTimeMillis();

                    // Определяем скорость загрзки. 
                    // Для этого делаем  проверку на каждую секунду
                    if(now > current + 1000){
                        current = now;

                        speed = (total - lasttotal)/1024;                       
                        lasttotal = total;
                    }

                    progressPercent = (total*100)/fileLength;
                    if(last != progressPercent){
                        last = progressPercent;
                        progress++;
                        DownloadManager.this.progress(progress, "Всего: " +format(fileLength) + " / " + format(total) + " / " + speed + "KB/s");                            
                    }
                }
            }

            ops.flush();
            // Закрываем 

            ops.close();
            ips.close();

        }
        catch(Exception e){
            e.printStackTrace();
        }

        finish();           
    }

    void finish(){
        DownloadManager.this.ticker("Загрузка успешно завершена.");
        DownloadManager.this.stopSelf();
        DownloadManager.this.cancable();
    }

    void stop(){
        DownloadManager.this.stopSelf();
        DownloadManager.this.cancel();
    }

}

public String format(int m){

    String size = m%mb+"";
    size = size.substring(0, Math.min(size.length(), 2));

    return m/mb + "." + size + "мб";
}

@Override
public IBinder onBind(Intent intent) {
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:05:51.600

我可以建议你使用 IntentService。android 负责处理您的工作线程逻辑。只需很少的移植工作需要。您可以在下面找到代码

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:59:03.290

通过检查您指定的返回标志，`onStartCommand`我可以看到您已指定`START_REDELIVER_INTENT`. 此类返回标志状态的 Javadoc；

> 如果该服务的进程在启动时被杀死（在从 onStartCommand(Intent, int, int) 返回之后），那么它将被安排重新启动，并通过 onStartCommand(Intent, int,诠释）

从这个解释很明显你的服务被杀死了。其原因尚不清楚，但确保服务（及其子线程）保持“活跃”是我之前努力解决的问题。在我们的应用程序中，我们发现手机休眠尤其具有破坏性。我们通过为服务提供唤醒锁定和 WiFi 锁定来“破解”（？）这些细微差别，以确保 (a) 服务在睡眠时不会被封存，并且 (b) 系统保持 wifi 锁定（即没有断开活动的 wifi 连接），而我们在子线程中有工作要做。请在我们对此进行排序后查看您的服务在睡眠环境下的行为。尽管如此，这个标志似乎解释了您的服务明显重新启动和重新尝试下载。

通过简要查看您的代码，我看到您正在从您的线程与您的服务进行通信。`IntentService`正如 Ranjith 指出的那样，可能适用于这种情况。但是，子线程无法与分离出工作线程的服务通信。原因是托管服务在关闭工作线程后几乎立即被终止，因为服务的工作已经完成，所有剩余的工作都是异步完成的。这可以解释为什么这对您不起作用。

为此，我将尝试以下方法之一；

1.  使用`IntentService`并将所有通知代码向下移动到线程中并切断所有 AsyncTask-Service 通信。另请注意我对网络通信的 WakeLocks 和 WiFiLocks 所做的评论。如果不小心使用，这些工​​具对电池来说似乎是相当危险的。
2.  如果您希望您的服务与您的子线程一样存在，那么我建议`START_STICKY`从您的服务中返回标志并允许您的应用程序绑定到它（参考：[绑定服务](http://developer.android.com/guide/components/bound-services.html)以查看它是如何进行的。

# entity-framework - EF Code First 在多对多中

> ID：15022193
> 
> 赞同：0
> 
> 时间：2013-02-22T10:38:37.500
> 
> 标签：entity-framework, ef-code-first, mapping, many-to-many

我有这个课程：

```
public class User
{
 public int Id {get; set;}
 public string Name {get; set;}
} 
```

数据库表 -**用户**

```
public class Pet
{
 public int Id {get; set;}
 public string Name {get; set;}
} 
```

DB 表 -**宠物**

```
public class UsersPets
{
 public int UserId {get; set;}
 public int PetId {get; set;}
} 
```

数据库表 - **users_pets**

到现在我可以用 linq 获取用户的宠物。`User.Pets`但是在 EF Code First 中如何在没有额外 Linq 查询的情况下进行自动映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:18:09.350

你不能把你的课程改成：

```
public class User
{
    public User(){
        Pets = new HashSet<Pet>();
    }

    public int Id {get; set;}
    public string Name {get; set;}

    public ICollection<Pet> Pets;
}

public class Pet
{
    public Pet(){
        Users = new HashSet<User>();
    }

    public int Id {get; set;}
    public string Name {get; set;}

    public ICollection<User> Users;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:22:28.763

EF 为您创建此表，您不应该在模型中执行此操作。所以 ：

```
public class User
{
 public int Id {get; set;}
 public string Name  {get; set;}
public ICollection<Pet> Pets  {get; set;}
} 

public class Pet
{
 public int Id {get; set;}
 public string Name {get; set;}
} 
```

附加表将在数据库中创建，您可以在代码中访问用户实体的 Pets 集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T14:32:24.423

对于普通的多对多关系，您不需要额外的类，您可以简单地向您的`User`和`Pet`类添加两个属性：

```
public class User
{
    public int Id {get; set;}
    public string Name {get; set;}

    public virtual ICollection<Pet> Pets { get; set; }

    public User
    {
        Pets = new List<Pet>();
    }
}

public class Pet
{
    public int Id {get; set;}
    public string Name {get; set;}

    public virtual ICollection<User> Users { get; set; }

    public Pet
    {
        Users = new List<User>();
    }
} 
```

注意`Pets`和`Users`集合是`virtual`。这启用了延迟加载，以防止在您不需要用户的宠物时加载它们。

```
// Pets not loaded
var user = db.Users.Find(1);

// This loads the pets for the user (lazy loading)
foreach (var pet in user.Pets)
{
    ...
}

// This immediately loads the pets for the user (eager loading)
var user2 = db.Users.Include(u => u.Pets).SingleOrDefault(u => u.Id == 2); 
```

# knockout.js - 淘汰赛样式属性浮动

> ID：15022196
> 
> 赞同：1
> 
> 时间：2013-02-22T10:38:44.693
> 
> 标签：knockout.js, knockout-2.0

我正在尝试使用 Knockout 使用计算值对齐 div，但是这种接缝对属性“Float”没有影响。我可以使用相同的方法更改颜色。UI 应该根据用户组向左/向右浮动 div 元素。

JFiddle 示例在这里：http: [//jsfiddle.net/TMVAT/1/](http://jsfiddle.net/TMVAT/1/)

```
 this.floatAlign = ko.computed(function() {
        if(this.employee() == undefined || this.employee()=="") {
            return "right";
        } else {
            return "left";
        }
    }, this); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:03:20.040

我用 css binding**解决了这个问题。**它工作完美。

**Html 更改：-**

```
<div data-bind="style: { color: colour },css:{FloatLeft : floatAlign() ==  left',FloatRight : floatAlign() == 'right'}" style="width:65%; margin-bottom: 10px;"> 
```

**CSS更改：-**

```
.FloatLeft{
  float:left;
 }
.FloatRight{
  float:right;
 } 
```

**将其标记为答案**

# charts - 如何在图表中隐藏空值

> ID：15022201
> 
> 赞同：1
> 
> 时间：2013-02-22T10:38:58.643
> 
> 标签：charts, jasper-reports

我有一个图表，它是根据一些数据构建的。

有些数据是空的，null，但它仍然显示在图表中。我只想显示那些数据，它有一些东西。

我会更好地告诉你： ![图表](../Images/67d0b541ae28907d9b43fd3148f89c10.png)

因此，如您所见，有很多标签显示 0%。我想，他们不会表现出来。

我该如何管理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:43:08.110

JasperReport 服务器图表显示您通过 SQL 查询从数据库中获取的任何数据。

所以你需要在 SQL 查询中添加 where 条件来获取你想在饼图中看到的数据。

情况将是这样的：-

```
Select * from Table_name       
Where value_column > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T10:20:10.883

如果您使用 ireport，则应在图表中使用过滤器表达式。

# java - SQL CODE -104（错误）代表什么？

> ID：15022206
> 
> 赞同：14
> 
> 时间：2013-02-22T10:39:15.457
> 
> 标签：java, sql, db2, sqlcode, jcc

我正在通过 jcc 执行 SQL 查询以运行报告。当我打开程序的错误日志文件并检查 SQL 查询时，一切似乎都很好（没有多余或缺少的括号、逗号等，语法很好）但是当我执行时，我收到了这个错误：

[Report.execute()] DB2 SQL 错误：SQLCODE=-104, SQLSTATE=42601, SQLERRMC=,;ATE IN (1,2,3,10,1) ;, DRIVER=4.12.55

当我研究 SQLCODE 时，我发现这意味着查询中存在非法符号。我可以寻找什么来找到这个非法符号？

这是查询

![在此处输入图像描述](../Images/6ccf549e87c5ec4566631a1035aa947a.png)

很抱歉字体很小，但如果你放大 200% 左右，你可以更好地看到查询。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T10:55:51.467

您在此行的末尾有一个逗号（不应该出现的地方）：

```
AND Tick.STATE IN (1,2,3,10,1), 
```

以下行也有同样的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-24T12:03:03.117

通常，此 SQL 错误代码表示您插入了一些额外的字符，例如**','**或**'('**或**')' 之**类的。检查跟踪中的完整查询将有助于在 Java 程序等中编写 Sql 查询的人，因为我花了大约 2 个小时才弄清楚我的查询中有一个额外的 ')'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T09:58:29.710

在我的情况下问题略有不同我想加入两个表，然后将数据从 Table2 复制到 Table1 相应的列 My Query (DB2) update Table1 T1, Table2 T2 set T1.DEST_COLMN= T2.SRC_COLMN where T1.ID= T2.ID

正确 Query update Table1 T1 set T1.DEST_COLMN = (select SRC_COLMN from Table2 T2 where T1.ID= T2.ID)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-19T11:16:57.040

我崩溃了这个错误，因为我的查询生成器参数之一为空并且查询类似于“.. OrderType = 'CM' and null”。

# mysql - 计算 MySQL 方向附近最近的 GPS 点

> ID：15022215
> 
> 赞同：0
> 
> 时间：2013-02-22T10:39:43.300
> 
> 标签：mysql, gps, point, markers, directions

我在数据库中有一组 GPS 点。我最近尝试只选择那些靠近我的位置。我可以用 MySQL select 做到这一点。我使用谷歌地图来显示它们。

但是现在，我需要计算半径中最近的点，比如说**方向周围 20 公里 -**两个 gps 点之间的线段。

我把它画在一张照片上。我有两个点 A、B，我只需要显示它们之间路径附近的那些点。

*   黄线是A和B之间的线
*   我只想选择红色区域中的标记

[http://i.stack.imgur.com/9ZbUd.jpg](http://i.stack.imgur.com/9ZbUd.jpg)

感谢您的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:29:43.080

您可以使用下一页中的函数之一计算距离：

[点到线段的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

（如果没有mysql功能可以在mysql中翻译一些）

然后只需将您的搜索限制在您需要的距离不超过此距离的点上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:59:46.790

您需要球面三角学来正确计算地球表面上的距离。最好的方法是使用 hasrsines - 请参阅[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)。

# php - 使用 jquery 收集 tr id

> ID：15022216
> 
> 赞同：1
> 
> 时间：2013-02-22T10:39:46.047
> 
> 标签：php, jquery

这里我有一个表结构

```
<table>
       <tr>
          <th>F name<th>
          <th>L name<th>
          <th>Add<th>
       </tr>
       <tr id="test3">
          <td>ssss</td>
          <td>sss</td>
          <td>sss</td>
        </tr>
        <tr id="test2">
           <td>ssss</td>
           <td>sss</td>
           <td>sss</td>
        </tr>
        <tr id="test1">
            <td>ssss</td>
            <td>sss</td>
            <td>sss</td>
        </tr>
 </table> 
```

我想收集身份证，例如

```
test1     test2     test3 
```

使用 jQuery 或者也使用 JavaScript

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T10:43:15.877

你可以试试

```
$("tr[id]").each(function(){
  console.log(this.id);
}); 
```

输出：test3 test2 test1

它将选择`tr`哪些具有`id`属性。
还要为您的表分配一些`id`or`class`并在选择器中使用它，以便它只选择特定的表。

* * *

**编辑：**
只要意识到你想要以相反的顺序输出，这样你就可以使用

```
$($("tr[id]").get().reverse()).each(function(){
      console.log(this.id);
 }); 
```

输出：test1 test2 test3

[**现场演示**](http://jsfiddle.net/Ajinkya_Parakh/EWTGB/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T10:43:28.107

不是所有的 trs 都有 ID，但你可以看看使用`$.each`jQuery 中的函数

```
var ids = new Array();

$('tr').each(function() {

    if ($(this).attr('id') != "undefined") {

        ids.push($(this).attr('id'));

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:46:07.303

以下将遍历表中包含 ID 的所有元素，然后将其附加到名为 idString 的字符串中：

```
$(document).ready(function() {
  var idElems = $('tr[id]'),
      idString = '';
  idElems.each(function() {
    idString += $(this).prop('id') + ' ';
  });

  console.log(idString);
}); 
```

演示：[http ://codepen.io/vobpler/pen/vjwAd](http://codepen.io/vobpler/pen/vjwAd)

*编辑：*不太确定为什么要将它连接在一个字符串中，但`$.each`在`$(this).prop('id')`. 查看 Karma 的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:45:37.700

```
$(function () {

    $("tr").each(function () {
        alert($(this).attr('id'));
    })
}) 
```

# java - JVM正常退出后Files.createTempDirectory会删除目录吗？

> ID：15022219
> 
> 赞同：38
> 
> 时间：2013-02-22T10:39:49.627
> 
> 标签：java

`Files.createTempDirectory`JVM正常退出后是否删除目录？还是我需要手动递归删除临时目录内容？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-11-29T08:06:22.167

系统退出时不会删除由创建的临时目录[`Files.createTempDirectory()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory%28java.lang.String,%20java.nio.file.attribute.FileAttribute...%29)，除非您将它们配置为这样做：

> [shutdown-hook](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)或该机制[`File.deleteOnExit()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#deleteOnExit%28%29)可用于自动删除目录。

这意味着您可以致电：

```
Path tmp = Files.createTempDirectory(null);
tmp.toFile().deleteOnExit(); 
```

但是，除非目录为空，否则您不能删除目录，如文档[`File.delete()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete%28%29)：

> 删除此抽象路径名表示的文件或目录。如果此路径名表示一个目录，则该目录必须为空才能被删除。

因此，如果您希望删除目录及其内容，我们需要更花哨一些。您可以递归地注册一个目录及其子目录以进行删除，如下所示：

```
public static void recursiveDeleteOnExit(Path path) throws IOException {
  Files.walkFileTree(path, new SimpleFileVisitor<Path>() {
    @Override
    public FileVisitResult visitFile(Path file,
        @SuppressWarnings("unused") BasicFileAttributes attrs) {
      file.toFile().deleteOnExit();
      return FileVisitResult.CONTINUE;
    }
    @Override
    public FileVisitResult preVisitDirectory(Path dir,
        @SuppressWarnings("unused") BasicFileAttributes attrs) {
      dir.toFile().deleteOnExit();
      return FileVisitResult.CONTINUE;
    }
  });
} 
```

但是请注意，这会注册所有*当前存在的文件*以供删除 - 如果在调用此方法后创建新文件，它们及其父目录将不会根据`File.delete()`.

如果要在退出时删除目录，无论所述目录的内容如何，​​都可以以几乎相同的方式使用关闭挂钩：

```
public static void recursiveDeleteOnShutdownHook(final Path path) {
  Runtime.getRuntime().addShutdownHook(new Thread(
    new Runnable() {
      @Override
      public void run() {
        try {
          Files.walkFileTree(path, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult visitFile(Path file,
                @SuppressWarnings("unused") BasicFileAttributes attrs)
                throws IOException {
              Files.delete(file);
              return FileVisitResult.CONTINUE;
        }
        @Override
        public FileVisitResult postVisitDirectory(Path dir, IOException e)
            throws IOException {
          if (e == null) {
            Files.delete(dir);
            return FileVisitResult.CONTINUE;
          }
          // directory iteration failed
          throw e;
        }
        });
      } catch (IOException e) {
        throw new RuntimeException("Failed to delete "+path, e);
      }
    }}));
} 
```

但是请注意，每次重复调用它都会注册一个新的关闭线程，这可能会导致大规模问题。 `File.deleteOnExit()`存储一组注册文件，并在一个关闭挂钩中删除所有文件。如果您需要以这种方式删除许多目录，则需要实现类似的东西。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-22T10:44:52.410

根据[API](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory%28java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...%29)，不，不是，您需要使用[`file.deleteOnExit()`](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#deleteOnExit())方法手动删除目录。

> 与 createTempFile 方法一样，此方法只是临时文件工具的一部分。关闭挂钩或 File.deleteOnExit() 机制可用于自动删除目录。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-05-21T22:56:55.843

您可以将 apache commons io 依赖项添加到您的项目中，然后使用 FileUtils.deleteDirectory() 执行以下操作：

```
Runtime.getRuntime().addShutdownHook(new Thread() {
    @Override
    public void run() {
        try {
            FileUtils.deleteDirectory(tmp_dir_path.toFile());
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}); 
```

有关 apache 公共检查的更多信息： [https ://commons.apache.org/proper/commons-io/](https://commons.apache.org/proper/commons-io/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T10:47:58.950

不，它没有——[`createTempDirectory`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempDirectory%28java.nio.file.Path,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...%29)

> 与`createTempFile`方法一样，此方法只是临时文件工具的一部分。[shutdown-hook](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)或该机制[`File.deleteOnExit()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#deleteOnExit%28%29) 可用于自动删除目录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T10:42:00.057

不，它没有。你必须自己做。或者使用`java.io.File.deleteOnExit()`，但我猜它不适用于非空目录

# backbone.js - 主干中的嵌套模型充满了数据

> ID：15022221
> 
> 赞同：0
> 
> 时间：2013-02-22T10:39:51.647
> 
> 标签：backbone.js, backbone-views, backbone-events, backbone-relational, backbone-model

**我创建了一个模型（RuleModel），它的属性是 other model(RuleInformationModel) 。但是在传递 json(SampleRule) 数据时，内部模型没有被填充。**

当我做控制台时，我变得不确定。所以我在 cosole 中检查了 RuleInformationModel，它只有来自示例 json 的默认值值没有被添加到这个内部模型中。

```
var  SampleRule = {
    RuleId: 1,
    Information: [{ 
        RuleId:1,
        RuleName: 'Diwali Offer', 
        MerhantId: '565cfa73-8f12-4876-b2cf-2e61a28eddca', 
        StartDate: '1/1/0001 12:00:00 AM', 
        EndDate: '1/1/0001 12:00:00 AM', 
        IsActive: 'True', 
        Description: 'Diwali Offer for Samsung products',
        RuleSetId: 1 ,
        Status:'False'
}],
    Conditions: {},
    Actions: {}
};

var RuleInformationModel = Backbone.Model.extend({

    defaults: {
        RuleId: '',
        RuleName: '', 
        MerchantId: '', 
        StartDate: '', 
        EndDate: '', 
        IsActive: '', 
        Description: '',
        RuleSetId: '',
        Status: 'False' 
    },
    idAttribute: "RuleId"
});

var RuleModel = Backbone.Model.extend({

    initialize: function (options) {
        this.RuleId = options.RuleId;
    },
    defaults: {
        RuleId: '',
        Information: new RuleInformationModel(),
        Conditions: {},
        Actions: {}
    },
    idAttribute: "RuleId",
    urlRoot: function () {
        return "../BackBoneApi/RuleEngine/" + this.RuleId
    },
    parse: function (response) {
        response = SampleRule;
        return response;
    }
});

var NewOrEditRuleView = Backbone.View.extend({

    tagName: 'div',
    template: ItemTemplate,
    initialize: function (options) {
        var self = this;
        self.model = new RuleModel({RuleId:options.RuleId});
        this.model.fetch();
        console.log(self.model.get('Information').get('RuleName'));
    },
    render: function (Purpose) {
        var self = this;
        var tmpl = _.template(self.template);
        console.log(self.model);
        self.$el.html(tmpl({ Purpose: Purpose, RuleName: self.model.get('Information').get('RuleName') }));
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:40:29.550

不，它不会。您尚未发布实例化或解析 SampleRule 对象的代码，但我想我明白了您的意思。我建议您在您的方法中创建一个方法，该方法`RuleModel`可以执行以下操作：

```
var RuleModel = Backbone.Model.extend({
   // As you were..
   // ...
    updateInformationModel: function(object) {
        // SampleRule.Information is an array, I assume this is by design? If so:
        this.get("Information").set(object.Information[0]);
    }
   // ...
}); 
```

# python - 如果 ManyToManyField 包含指定的用户，我该如何过滤它？

> ID：15022223
> 
> 赞同：0
> 
> 时间：2013-02-22T10:39:55.457
> 
> 标签：python, django, filter, manytomanyfield

我有一个这样的模型：

```
from django.contrib.auth.models import User

class Post(models.Model):
    title = models.CharField(max_length=255)
    content = models.TextField()
    followers = models.ManyToManyField(User, null=True, blank=True) 
```

现在在我看来，我想过滤，以便登录用户可以查看该人关注的所有帖子。问题是更多的人可以关注同一个帖子。

```
def get_followed_posts(request):  
    user = request.user  
    posts = Post.objects.filter(followers__contains=user) # If the user is in the list of followers return the Post.
    return render_to_response('post_list.html', {'posts': posts}, context_instance=request_context(request)) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:47:58.670

看看[文档](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)。

你应该能够做到 -

```
Post.objects.filter(followers__in=[user]) 
```

# java - 反序列化期间的奇怪异常

> ID：15022230
> 
> 赞同：3
> 
> 时间：2013-02-22T10:40:10.373
> 
> 标签：java, android, exception, serialization

我需要反序列化对象但是当我使用 readObject 读取对象时出现这样的异常：

```
Exception raised: java.lang.Enum; Incompatible class (SUID): 
java.lang.Enum: static final long serialVersionUID =0L; 
but expected java.lang.Enum: static final long serialVersionUID =0L; 
```

这是代码：

```
public static void restore3x(PersistentHistory h, DictManager dictManager) throws Exception{
        SharedPreferences prefs = tryToGuess(h.mContext);
        if (prefs == null) return;
        Log.e("shdd","Found history!");
        String history = prefs.getString("History", null);
        ObjectInputStream objIn = null;
        try {
            //prepare
            objIn = new ObjectInputStream(new ByteArrayInputStream(Base64.decode(history))) {
                @Override
                protected ObjectStreamClass readClassDescriptor() throws IOException, ClassNotFoundException {
                    ObjectStreamClass osc = super.readClassDescriptor();
                    if (osc.getName().contains("slovoed")) {
                        try {
                            Field f;
                            f = osc.getClass().getDeclaredField("svUID");
                            f.setAccessible(true);
                            Log.e("shdd","Setting serialVersionUID");
                            f.setLong(osc, serialVersionUID);
                            Log.e("shdd","Set ok");
                            f = osc.getClass().getDeclaredField("className");
                            f.setAccessible(true);
                            Log.e("shdd","Setting class name");
                            f.set(osc, WordItem.class.getName());
                            Log.e("shdd","Set ok");
                        } catch (Exception e) {
                        }
                    }
                    return osc;
                }
            };
            //add to DB
            Log.e("shdd","Getting items");
            Collection<WordItem3x> items = (Collection<WordItem3x>) objIn.readObject();
            Log.e("shdd","Got ok");
            if (items.isEmpty()) return;
            Log.e("shdd","List's not empty");
            long timeSeconds = System.currentTimeMillis()/1000;
            for (WordItem3x w : items) {
                if (w.getWord() == null || w.getWord().length() == 0 || w.getIndexList() == 0) continue;
                Log.e("shdd","Adding word");
                h.add(w.getWord(), w.getIndexList(), timeSeconds--);
            }
        } catch (Exception e) {
            Log.e("shdd","Exception raised: " + e.getMessage());
            throw e;
        } finally {
            try { if (objIn != null) objIn.close(); } catch (Exception e) {}
            //prefs.edit().remove("History").commit();
        }
    } 
```

我不知道出了什么问题。也许有人见过这样的例外？

这是 WordItem3x readObject 方法：

```
private void readObject(java.io.ObjectInputStream in) throws IOException,
                ClassNotFoundException {
            Log.e("shdd", "Reading object");
            in.defaultReadObject();

            int val1 = in.readInt();
            int val2 = in.readInt();
            if (val1 != -1 && val2 != -1) {
                direction = new Direction(val1, val2);
            } else
                direction = null;

            val1 = in.readInt();
            if (val1 != -1)
                typeList = eWordListType.values()[val1];
            else
                typeList = null;
        } 
```

但正如我所见，它从未被调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:11:57.480

（注：没有显示序列化代码，WordItem3x的实现也大都省略了）

根据代码，我能做出的最好猜测是，`readClassDescriptor`在您使用反射修改serialVersionUID 的地方，最终会导致修改枚举的serialVersionUID。从 java 规范中，所有枚举条目 serialVersionUID 应该是 0L。我敢打赌，您将某个枚举更改为无 0L。这是 AOSP 中抛出的代码块：

```
// Check SUIDs, note all SUID for Enum is 0L
if (0L != classDesc.getSerialVersionUID() || 0L != superClass.getSerialVersionUID()) {
        throw new InvalidClassException(superClass.getName(),
                "Incompatible class (SUID): " + superClass + " but expected " + superClass);
} 
```

在修改 serialVersionUID 之前尝试打印出对象的名称

```
ObjectStreamClass osc = super.readClassDescriptor();
osc.getName(); // is this an enum???? 
```

# php - 更改 PHP 脚本中的变量并再次运行函数，无需重新加载页面

> ID：15022232
> 
> 赞同：0
> 
> 时间：2013-02-22T10:40:12.947
> 
> 标签：php, javascript, jquery, ajax, calendar

有人可以告诉我是否需要 AJAX 来做我需要的事情吗？我有这个创建日历的功能。我将插入一些“前进”和“后退”箭头键，以便用户可以滚动浏览月份。

所以点击前进按钮；我想得到下个月 - 并显示那个月而不是现在的那个月。这意味着重新加载函数，对吗？但是一个月有一个不同的变量。此外，如果不使用某种 JavaScript，我就无法再次显示 PHP 本身，对吗？

我知道我可以用 JavaScript 制作相同的日历，但我想看看它是如何使用 PHP 工作的。我以前也从未使用过 AJAX 功能，我不确定如何以这种方式更改脚本的变量。

```
function create_Calendar($month,$year){
$i = "";

$days_array = array("Mon","Tue","Wed","Thur","Fri","Sat","Sun");

$days_in_month = cal_days_in_month(CAL_GREGORIAN,$month,$year);

$jd = cal_to_jd(CAL_GREGORIAN,$month,date("d"),$year);
$first_day = jddayofweek($jd,0);
$month_name = jdmonthname($jd,3) . " " . date("Y");

echo("<div id='calendar'>");
echo("<div id='month_name'>" . $month_name . "</div>");
    for($i=0;$i<7;$i++){
        echo("<div class='day_titles'>" . $days_array[$i] . "</div>");
    }
        for($i=0;$i<$first_day;$i++){
            echo("<div class='blank_days'></div>");
        }
            for($i=1;$i<=$days_in_month;$i++){
                echo("<div class='day'>" . $i . "</div>");
            }
echo("<div class='day_tooltip'></div>");
echo("</div");
}; 
```

我正在调用该函数：

```
create_Calendar(date("m"),2013); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:45:43.450

PHP 是一种服务器端语言。如果不刷新页面，您将无法执行 PHP 相关任务（不使用 AJAX）。Javascript、JQuery、AJAX 都是客户端。您可以在不刷新页面的情况下执行这些操作，因为它们不需要去服务器执行操作。

因此，如果您不想刷新页面，请使用 javascript 或 jQuery 等客户端脚本。如果你谷歌，你可以找到好的日历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:05:21.607

来自网页的数据进入服务器，然后服务器生成输出，这意味着如果您保持打开页面，PHP 将不会在服务器上运行。因此，当您请求 URL 时，完整的 PHP 应用程序会从包含的最开始执行，直到请求的页面结束。对于每个请求，这将继续进行。

这是更好地理解流程的图表。

![在此处输入图像描述](../Images/d227b42ab938ad0524e80003e88e3f80.png)

所以每次你必须执行你的页面。它是通过 AJAX 还是页面刷新由您决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:07:03.570

两个简单的 ajax 调用将为您完成这项工作。当用户单击下一个或上一个按钮时，使用 $.ajax 进行调用并将月份名称作为参数发送。预加载所有月份也可以完成您的工作，但在这种情况下，您的脚本将变得更加资源密集。

**更新：** 例如，您可以这样调用：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#next').click(function(){
            var month = 'July';
            var year = '2011'; // or get them from the user's choice. I am hardcoding them here
            var url  = "http://domain/path/to/your/calander_function.php";
            $.ajax({'url' : url ,
                'type' : 'post',
                'data' : {'month' : month , 'year' : year} ,
                'success' : function(data){
                    // do something with your data
                }
            }); 

            $('#previous').click(function(){
                var month = 'June';
                var year = '2013'; // or get them from the user's choice. I am hardcoding them here
                var url  = "http://domain/path/to/your/calander_function.php";
                $.ajax({'url' : url ,
                    'type' : 'post',
                    'data' : {'month' : month , 'year' : year} ,
                    'success' : function(data){
                        // do something with your data
                    }
                }); 

            });
</script> 
```

calander_function.php 将包含回显结果的函数，您将获得成功（在数据中）。希望能帮助到你 ：-）

# javascript - JSON 使用 JQUERY 拆分数据

> ID：15022233
> 
> 赞同：0
> 
> 时间：2013-02-22T10:40:14.683
> 
> 标签：javascript, jquery, json

我是第一次使用 json，所以这可能是一个愚蠢的问题。

我返回 json 的 PHP 代码如下：

```
$query="SELECT * FROM user_db WHERE rest_id='$rest_id'";
$result=mysqli_query($dbc, $query);
$row=array();
while($r = mysqli_fetch_assoc($result)) {
    $rows{'Users'][] = $r;
}
echo json_encode($rows); 
```

这将返回以下内容：

```
{"Users":
[{"user_id":"1361453832p3y","name":"","username":"sideshow","password":"sideshow","user_type":"1","rest_id":"1361453832fxL","email":""},
{"user_id":"1361523362ANq","name":"Sharon","username":"Sharon45","password":"Sharon45","user_type":"3","rest_id":"1361453832fxL","email":""},
{"user_id":"1361523653SXp","name":"Heather F","username":"fishface","password":"golliwog","user_type":"3","rest_id":"1361453832fxL","email":""}]} 
```

我要做的就是循环出结果并将它们附加到页面上。

我当前的 JQuery 是：

```
var name="";
        var username="";
        var password="";
        var user_type="";
        var output="";
        var obj=$.parseJSON(html);

        $.each(obj, function(){
            output+="<p><strong>"+this['name']+"</strong></p>";
            output+="<p>Username: "+this['username']+" Password: "+this['password']+"</p>";
            output+="<hr />";
        });

        $('.user_holder').html(output); 
```

这只是在每个字段中回显 3 次。我还没有找到循环遍历每个 json 字段的方法.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:47:15.740

你可以试试这个：

```
var name="";
var username="";
var password="";
var user_type="";
var output="";

$.each($.parseJSON(html).Users, function(){
    output+="<p><strong>"+this['name']+"</strong></p>";
    output+="<p>Username: "+this['username']+" Password: "+this['password']+"</p>";
    output+="<hr />";
}); 
```

如您所见，唯一的区别在于`$.each`我们传递`Users`属性而不是整个对象的方法。

这里是`output`

```
<p><strong></strong></p><p>Username: sideshow Password: sideshow</p><hr /><p><strong>Sharon</strong></p><p>Username: Sharon45 Password: Sharon45</p><hr /><p><strong>Heather F</strong></p><p>Username: fishface Password: golliwog</p><hr /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:48:16.667

改变这个

```
$.each(obj, function(){ 
```

对此：

```
$.each(obj.Users, function(){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:45:08.643

您需要遍历每个 JSON 对象并引用包含数据的索引和引用键。

例如

```
 obj['Users'][0]['Username'] 
```

将返回用户名的第一个实例。

所以你需要使用嵌套的 for 循环来循环数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:48:55.583

如果我对你的理解正确，那么你就非常接近了。我认为您只是没有引用 obj 中的 Users 字段。

```
$.each(obj.Users, function(){
    output+="<p><strong>"+this['name']+"</strong></p>";
    output+="<p>Username: "+this['username']+" Password: "+this['password']+"</p>";
    output+="<hr />";
}); 
```

console.log 是你的朋友 :) 如果你这样做了

> 控制台日志（obj）

你可以检查 obj 是什么，看到它有一个 Users 字段，你会笑:)

要了解 console.log，请参阅以下问题：[什么是 console.log？](https://stackoverflow.com/questions/4539253/what-is-console-log)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T10:49:46.433

尝试

```
$.each(json,function(i,j){
    $(j).each(function(k,v){    
     console.log(v.user_id);
     console.log(v.username);        
    });
}); 
```

[演示](http://jsfiddle.net/TvzAX/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T10:53:04.033

尝试：

```
$.each(obj.Users, function(){
        output+="<p><strong>"+this['name']+"</strong></p>";
        output+="<p>Username: "+this['username']+" Password: "+this['password']+"</p>";
        output+="<hr />";
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T10:53:36.850

试过这样吗？

```
 for(var i=0; i < obj.Users.length; i++){
            var username  =obj.Users[i].username;
                //TODO get remaining value of  obj.Users[i];

        } 
```

# .net - @font-face 在服务器（.net 应用程序）中不起作用

> ID：15022234
> 
> 赞同：0
> 
> 时间：2013-02-22T10:40:17.580
> 
> 标签：.net, css, font-face

当我在 safari 5.1+ 中浏览时，@font-face 无法从服务器 url 工作

当我浏览 html 文件时，它在 safari 中看起来很棒。但是，当我转换成 aspx (.net) 文件时，它看起来一点也不好看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:45:41.030

请发布您正在使用的CSS。

一个问题可能是您没有在您的 IIS 配置中定义 mime 类型 [http://www.hosting.com/support/dedicated/IIS/newmime](http://www.hosting.com/support/dedicated/IIS/newmime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:47:24.410

不过不确定。

尝试这个。可能是你错过了这个。

[@font-face 不适用于 Mac OS 或 Ipad 中的 Safari](https://stackoverflow.com/questions/9389644/font-face-not-working-with-safari-in-mac-os-or-in-ipad)

# mysql - 使用子选择和 IF 条件的慢 MySQL 查询

> ID：15022240
> 
> 赞同：1
> 
> 时间：2013-02-22T10:40:27.480
> 
> 标签：mysql, sql, subquery

我有一个小问题，想要一些建议。
我想要做的是从 tableA 中选择所有内容，其中 tableB 中有一个条目，其中 tableB 中的条目是表中的第一个条目，并且该条目在特定日期范围内。

因此，开始日期为 2013-01-01 00:00:00 和结束日期为 2013-01-31 23:59:59 我需要做这样的事情

```
SELECT * FROM tblsites WHERE ID IN(SELECT 
IF(DateRequired >= '2013-01-01 00:00:00' AND DateRequired <= '2013-01-31 23:59:59', SiteID, '' ) AS SiteID FROM `tblmovements` WHERE TicketStatus IN ( 0, 1 ) GROUP BY SiteID) AND LENGTH(SiteName)>0 ORDER BY SiteName ASC 
```

基本上，它应该返回一个站点数据列表，其中该站点在所选日期范围内首次移动。DateRequired 列是我在 tblmovements 中的移动日期，并且 tblmovements 将 SiteID 存储为列。您可以忽略工单状态，它只是一个标志，表示工单处于活动状态，它不应该有查询结果。

所以我的理论是，如果我在 tblmovements 中选择它们处于活动状态的所有票证并将它们分组到 siteid 上，那么如果 DateRequired 在我的输入日期之间，我可以让子查询仅返回站点 ID，这将允许我这样做在站点表上进行简单的 SELECT WHERE IN()。LENGTH 子句仅仅是因为 if 在 else 子句中返回零长度，所以我不想在脚本中将其过滤掉，而是在查询时过滤掉它们。

查询运行没有错误，但绝对慢得要命（30 分钟 + 并且仍在运行）我一辈子都想不出更好的写法，它可能只是周五早上的忧郁，但有任何建议可以唤醒我起来将不胜感激。
如果你能理解我上面的漫无边际的话，一个更好的完全写它的方法也很好。

**编辑：** 虚拟表。

```
--
-- Table structure for table `tblmovements`
--

CREATE TABLE IF NOT EXISTS `tblmovements` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `SiteID` bigint(20) unsigned NOT NULL,
  `TicketStatus` smallint(3) NOT NULL DEFAULT '1',
  `DateRequired` datetime DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `SiteID` (`SiteID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

--
-- Dumping data for table `tblmovements`
--

INSERT INTO `tblmovements` (`ID`, `SiteID`, `TicketStatus`, `DateRequired`) VALUES
(1, 1, 1, '2013-01-02 00:00:00'),
(2, 1, 1, '2013-01-02 00:00:00'),
(3, 1, 1, '2013-02-02 00:00:00'),
(4, 1, 1, '2013-02-02 00:00:00'),
(5, 1, 1, '2013-02-02 00:00:00'),
(6, 2, 1, '2012-02-02 00:00:00'),
(7, 2, 1, '2012-02-02 00:00:00'),
(8, 2, 1, '2012-01-20 00:00:00'),
(9, 2, 1, '2013-01-02 00:00:00'),
(10, 2, 1, '2013-01-02 00:00:00');

-- --------------------------------------------------------

--
-- Table structure for table `tblsites`
--

CREATE TABLE IF NOT EXISTS `tblsites` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `SiteName` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `tblsites`
--

INSERT INTO `tblsites` (`ID`, `SiteName`) VALUES
(1, 'Site 1'),
(2, 'Site 2'); 
```

**编辑2：**

好的，史蒂夫的建议我已经把查询改成了这个

```
SELECT tblmovements.SiteID, tblsites.SiteName FROM tblmovements
INNER JOIN tblsites
 ON tblmovements.SiteID = tblsites.ID
WHERE (tblmovements.TicketStatus = 0 OR tblmovements.TicketStatus = 1)
AND tblmovements.DateRequired>='2013-01-01 00:00:00' AND tblmovements.DateRequired<='2013-01-31 23:59:59'
GROUP BY tblmovements.SiteID 
```

现在是半工作状态。我现在遇到的问题是，这只是选择该日期范围之间是否有票。我现在需要做的只是如果 tblmovements 中的条目是该表中该站点 ID 的第一次出现，则返回结果集。如果您返回主查询，您会注意到子选择上有一个 IF。

**编辑 3**

是的，我想我已经根据史蒂夫的输入和非星期五早上的白痴突然闪现了它。

```
SELECT tblmovements.SiteID, tblsites.SiteName FROM tblmovements
INNER JOIN tblsites
 ON tblmovements.SiteID = tblsites.ID
WHERE (tblmovements.TicketStatus = 0 OR tblmovements.TicketStatus = 1)
AND tblmovements.DateRequired>='2013-01-01 00:00:00' AND tblmovements.DateRequired<='2013-01-31 23:59:59'
AND (SELECT COUNT(*) FROM tblmovements t3 WHERE t3.DateRequired<'2013-01-01 00:00:00' AND t3.SiteID=tblmovements.SiteID)<=0
GROUP BY tblmovements.SiteID 
```

添加了一个额外的条件，只在开始日期之前给我一个票数，所以理论上如果它返回一个结果集，其中在我要求的日期之间有票并且在开始日期之前没有票，那么所有返回的 siteid 应该是我的要求。

到目前为止的测试正在返回我期望的数据集，这很好，而且它的**查询执行时间明显更快 0.5711 秒**奖金。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:05:01.977

加入而不是子查询和 IN 列表怎么样？

```
SELECT t1.SiteID, t2.* FROM tblmovements t1
WHERE (TicketStatus = 0 OR TicketStatus = 1)
AND t1.DateRequired BETWEEN '2013-01-01 00:00:00' AND '2013-01-31 23:59:59'
GROUP BY t1.SiteID)
INNER JOIN tblsites t2
 ON t1.SiteID = t2.ID 
```

**编辑 1 - 回复评论：**

我在这里所做的是将您的 IF 评估转移到 WHERE 条件语句中。

原始查询将选择大量行，然后评估它们以写入其 SiteID 或“”。当您可以使用 where 条件缩小范围时，为什么要选择大范围？

# php - 准备好的语句查杀脚本

> ID：15022243
> 
> 赞同：0
> 
> 时间：2013-02-22T10:40:42.277
> 
> 标签：php, pdo, prepared-statement

我有一个函数应该从数据库中获取一些 API 令牌。测试了脚本后，我发现准备 SQL 语句的行正在**杀死脚本**：

```
static function get_tokens($platform, $is_breaking_news = 0, $in_test_mode=0) // 1-android, 2-ios
{

    global $dbh;
    $paid =2;
    $status = 1;
    $result = array();
    $query = '
        SELECT
            mobile_install_device_token, mobile_install_id
        FROM
            ' . TABLE_PREFIX . 'mobile_installs
        WHERE
            mobile_install_platform = :platform
        AND
            mobile_install_app_type = :paid
        AND ';
    if ($is_breaking_news)
    {
        $query .= '
            mobile_install_pn_status > :status
        ';
        $status = 0;
    }
    else 
    {
        $query .= '
            mobile_install_pn_status = :status
        ';
    }

    $stmt = $dbh->prepare($query); // **THIS IS THE KILLER!**

    try
    {
        $stmt->bindParam(':platform', $platform);
        $stmt->bindParam(':paid', $paid);
        $stmt->bindParam(':status', $status);

        $stmt->execute();
    }
    catch(PDOException $e)
    {

       Utils::sql_fail($query, $e->getMessage());
    }

    while($row = $stmt->fetch())
    {
    if ($in_test_mode)
    {

        if (!in_array($row['mobile_install_id'], array(4, 5, 13, 8)))
        {

            continue;
        }
    }
    echo 'send to ' . $row['mobile_install_id'] . PHP_EOL;
        $result[] = $row['mobile_install_device_token'];
    }

    return $result;
}//end function get_tokens 
```

我发现这是一个[已知的错误](https://bugs.php.net/bug.php?id=36652)，但那里提供的解决方案似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:58:17.167

您链接到的错误已经有将近*十年*的历史了。在开始考虑错误之前，
必须执行一**组特定的操作。**

*   转到`PDO::ATTR_ERRMODE`并**验证**它是否已设置并正常`ERRMODE_EXCEPTION`工作
***   回显您的最终查询。*   用实际样本数据替换命名占位符并在控制台中运行*   用问号替换命名占位符并尝试在控制台中准备**

 **像这样：

```
 PREPARE stmt1 FROM 'put your query here'; 
```

根据您的问题，不清楚您是否完成了上述任何一项。
如果您完成了所有这些并且一切正常 - 那么，就有一个错误。在 PHP.NET bugtracker 上发布可重现的代码。
但是，如果您从中得到任何错误 - 只需解决错误。

**更新**
刚刚发现：
出于某种原因，您`prepare`远离了`try`障碍。
难怪它会默默地杀死你的代码。

所以，移动`prepare`到`try`块内。
此外，设置错误报告也很重要。

在开发服务器上，您必须设置`display_errors`为**on**，以便收到错误通知而不是静默死亡。
在生产服务器`display_errors`上**关闭**而`log_errors`打开- 并**在**这种情况下查找日志中的错误。**

# sql-server - 在类设计中实现权限管理

> ID：15022245
> 
> 赞同：0
> 
> 时间：2013-02-22T10:41:01.647
> 
> 标签：sql-server, database, class-design, rights-management

我必须做一个项目，其中会有许多用户将使用该应用程序。用户可以属于用户、执行人员或管理员。每个用户组都有自己的权利。所有数据都将存储在数据库中。

现在我正在做类设计，我不知道我是否必须自己设计一个类的权限，或者我是否应该只关注用户组，然后拒绝或允许访问数据库中的 CRUD 操作。

什么是实现涉及用户或组的权利的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:25:25.200

设计满足您业务需求的课程。我想象一些允许配置用户屏幕的“面向 UI”的类。在数据库端我不知道“权限有用户”还是“用户有权限”；根据您的商业模式进行设计。当然，您需要 grunt-code 来映射到数据库中的信息。

> 将权利设计为一个阶级本身或...

取决于该类的复杂程度。...我会说`UserGroup`该类将拥有一系列`List`权利，无论是复杂对象的集合还是仅仅是枚举。如果你的商业模式只需要问“Bob 有什么权利？” 那么枚举列表对我来说听起来不错。枚举的替代方案是一个`Right`基类，为每项权利子类化。恕我直言，对于这种微不足道的用途来说工作量太大了。

如果您不确定要走哪条路，请创建一个单独的类来封装权限列表。如果/当您从枚举转到类时，它向应用程序的其余部分公开的“API”将不会改变，然后再`Right`返回和第四。

# c# - 使文本光标消失 - C#

> ID：15022248
> 
> 赞同：0
> 
> 时间：2013-02-22T10:41:17.687
> 
> 标签：c#, visual-studio, text, input, cursor

我正在制作一个应该投射到墙上的应用程序，我需要放入一个非常小的输入框，这样观众就无法看到它。我使字体和框本身非常小，但唯一的问题是文本光标（这个东西 -> | ）一直在闪烁并且很明显。我怎样才能摆脱它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:44:35.037

在这种情况下，您需要将文本框设为只读：

```
yourTextBox.ReadOnly = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:00:48.060

看一下这个。css 允许您在 textarea 中隐藏闪烁的光标。

在您的情况下，只需将输入替换为`textarea`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title >Text Area with no Carat</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <style type="text/css">
            .textarea-wrapper {
                position:relative;
            }
            .textarea-wrapper textarea {
                background-color:white;
            }
            .textarea-wrapper, .textarea-wrapper textarea {
                width:100px;
                height:20px;
            }
            .textarea-wrapper textarea.hidden {
                color:white;
                opacity:0.00;
                filter:alpha(opacity=00);
                position:absolute;
                top:0px;
                left:0px;
            }
        </style>
        <script type="text/javascript">
            $(document).ready(
                function() {
                    $("textarea").addClass("-real-textarea");
                    $(".textarea-wrapper").append("<textarea class=\"hidden\"></textarea>");
                    $(".textarea-wrapper textarea.hidden").keyup(
                        function() {
                            $(".textarea-wrapper textarea.-real-textarea").val($(this).val());
                        }
                    );
                    $(".textarea-wrapper textarea.-real-textarea").focus(
                        function() {
                            $(this).parent().find("textarea.hidden").focus();
                        }
                    );
                }
            );
        </script>
    </head>
    <body>

        <div class="textarea-wrapper">
            <textarea></textarea>
        </div>

    </body>
    </html> 
```

**让我知道这是否对您有帮助...**

# mongodb - MongoDB GridFS 说明

> ID：15022249
> 
> 赞同：0
> 
> 时间：2013-02-22T10:41:18.183
> 
> 标签：mongodb, image-processing, mongoose, database

我部署了 mongodb gridfs 以减少图像渲染时间并减少 apache 请求。我需要一些关于大尺寸图像的说明，我们如何在浏览器中显示它？

实际上，我拍摄了单个图像并且大小超过 40MB 以将其存储在 mongodb gridfs 中。它使用以下命令存储。但***我无法在浏览器中显示它 40MB 图像在浏览器中，我们如何在浏览器中流式传输图像？***. 请帮助我们。

命令：

***步骤1：***

```
./mongofiles -d myfiles put /home/bharat/bin/cron/"CT0072 Madagascar Cartoon Characters .jpg"
connected to: 127.0.0.1
added file: { _id: ObjectId('512606b93f15f684e8271aee'), filename: "/home/bharat/bin/cron/CT0072 Madagascar Cartoon Characters .jpg", chunkSize: 262144, uploadDate: new Date(1361446588575), md5: "ab3e9d6a6f01f87e28f76148824a6d4b", length: 20020718 }
done! 
```

***第2步：***

```
./mongofiles -d myfiles list
connected to: 127.0.0.1
/home/bharat/bin/cron/CT0072 Madagascar Cartoon Characters .jpg 20020718 
```

***第 3 步：***

```
./mongo
MongoDB shell version: 1.8.2
> show tables;
fs.chunks
fs.files
system.indexes
> db.fs.chunks.count();
77 
```

***第 4 步：*** 编写 PHP 文件

```
**Program 1** - Its showing image below 10MB file. But 40MB file is not showing in Chrome Browse but Firefox showing and taking more time to display.

$mongo = new Mongo("128.181.10.28:27017");
$db = $mongo->myfiles;
$gridFS = $db->getGridFS();
$image = $gridFS->findOne("/home/bharat/bin/cron/tomas-hurricane.jpg");
$filedata = $image->getBytes();
header("Content-Length: " . strlen($filedata));
header("Content-Type: image/jpeg");
ob_clean();
echo($filedata);

**Program 2** : Tried second program but not working.

Tried 2nd Program
$mongo = new Mongo("128.181.10.28:27017");
$db = $mongo->myfiles;
$gridFS = $db->getGridFS();
$image = $gridFS->findOne("/home/bharat/bin/cron/tomas-hurricane.jpg");
header("Content-Type: image/jpeg");
$stream = $image->getResource();
while (!feof($stream)) {
    echo fread($stream, 8192);
} 
```

*   库马兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:00:26.753

首先，40 MB 对于浏览器来说确实很大，尤其是在您使用 IE 时。尝试较小的图像。

[其次，正如我在这里](https://stackoverflow.com/questions/14396398/gridfs-file-retrieval-strategy/14805845#14805845)指出的，您可以使用 MongoDB REST API，这是获取图像的好方法。

# php - Linux/Apache 使用 PHP 与基于 Microsoft Dynamics 构建的 CRM 集成

> ID：15022253
> 
> 赞同：3
> 
> 时间：2013-02-22T10:41:28.090
> 
> 标签：php, .net, apache

是否可以从 linux/Apache (PHP) Web 服务器集成/通信到围绕 Microsoft Dynamics 构建的 CRM？

我的示例代码是 C/C#，并假设 Web 服务器在 Microsoft 上运行 - 但我使用的是 Linux/Apache 和 PHP。我还可以交流吗？如果可以，我该如何将 C# 代码“解释”为 PHP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:48:23.080

您可以使用 Web 服务执行此操作。Web 服务是让不同技术相互通信的最佳方式。

有两种最流行的格式，xml 和 json。

更多信息在这里：

[http://www.w3schools.com/webservices/default.asp](http://www.w3schools.com/webservices/default.asp)

[http://msdn.microsoft.com/en-us/library/ms950421.aspx](http://msdn.microsoft.com/en-us/library/ms950421.aspx)

一些问题的具体资源：

[http://social.msdn.microsoft.com/Forums/pl-PL/netfxnetcom/thread/c18dae07-5f7e-4338-9202-2e7690a0cc3a](http://social.msdn.microsoft.com/Forums/pl-PL/netfxnetcom/thread/c18dae07-5f7e-4338-9202-2e7690a0cc3a)

[C# + PHP 在同一个应用程序中？](https://stackoverflow.com/questions/3618559/c-sharp-php-in-the-same-application)

还有一个可用于 c# 的 php 编译器。

[http://www.php-compiler.net/blog/2011/php-code-c-sharp](http://www.php-compiler.net/blog/2011/php-code-c-sharp)

希望这可以帮助。让我知道是否需要更多信息。

# scala - 在 Scala 中合并两个 MultiMap

> ID：15022264
> 
> 赞同：3
> 
> 时间：2013-02-22T10:41:48.340
> 
> 标签：scala

如何以一种很好的方式将 Scala 中的两个 MultiMap 与值集上的联合结合起来？

我目前这样做（假设 mm1 和 mm2 是具有相同类型的 MultiMaps）：

```
val tempmm = (mm1.keySet union mm2.keySet).
               map{k=>(k,(mm1.getOrElse(k,Set()) union mm2.getOrElse(k,Set())))}
tempmm.foreach{case (k,v) => mm1(k)=v} 
```

现在我在 mm1 中得到了正确的结果。但我相信一定有更好的方法。甚至可能是 MultiMap 中的一个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:50:37.583

要合并`mm2`到`mm1`，您可以这样做：

```
for ( (k, vs) <- mm2; v <- vs ) mm1.addBinding(k, v) 
```

# ios - Cordova 2.2.0 和 ios 从终端错误生成 ipa 文件

> ID：15022271
> 
> 赞同：0
> 
> 时间：2013-02-22T10:42:06.570
> 
> 标签：ios, cordova, ipa

我正在使用 cordova 2.2.0 库从终端创建 ipa 文件。当我使用以下命令时： **xcrun -sdk iphoneos6.0 PackageApplication -v /Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone/hello_app_test/build/hello_app_test.app -o /Applications/XAMPP /xamppfiles/htdocs/AppHome/app/webroot/files/out_ipa/hello_app_test.ipa --sign "iPhone 开发者：AKIO ITO (N5YRDPREK9)" --embed /private/var/root/Downloads/Dev_Test.mobileprovision**

我收到此错误：

打包应用程序：'/Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone/hello_app_test/build/hello_app_test.app' 参数：embed=/private/var/root/Downloads/Dev_Test.mobileprovision 详细=1 输出=/Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/out_ipa/hello_app_test.ipa 标志=iPhone 开发人员：AKIO ITO (N5YRDPREK9) 环境变量：HOME = /var/root SUDO_GID = 4294967294 VERSIONER_PERL_PREFER_32_BIT =没有 MAIL = /var/mail/root SSH_AUTH_SOCK = /tmp/launch-UvWSWr/Listeners USER = root LOGNAME = root __CF_USER_TEXT_ENCODING = 0x0:0:0 USERNAME = root PATH = /sbin:/bin:/usr/sbin:/usr /local/bin:/usr/bin:/Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home:/usr/local/ant/apache-ant-1.8.4:/usr/local/src/ android-sdk-macosx/工具：/usr/local/src/android-sdk-macosx/platform-tools SUDO_USER = 没人 SHELL = /usr/bin/false TERM = 未知 SUDO_COMMAND = /usr/bin/xcrun -sdk iphoneos6.0 PackageApplication -v /Applications/XAMPP /xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone/hello_app_test/build/hello_app_test.app -o /Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/out_ipa/hello_app_test.ipa --签署 iPhone 开发人员：AKIO ITO (N5YRDPREK9) --embed /private/var/root/Downloads/Dev_Test.mobileprovision SUDO_UID = 4294967294 VERSIONER_PERL_VERSION = 5.12 输出目录：'/Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files /out_ipa/hello_app_test.ipa' 临时目录：'/tmp/oERgpr0ih1'（设置详细时不会在退出时删除）+ /bin/cp -Rp /Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone/hello_app_test/build/hello_app_test.app /tmp/oERgpr0ih1 /Payload Program /bin/cp returned 0 : [] ### Checking original app + /usr/bin/codesign --verify -vvvv /Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone /hello_app_test/build/hello_app_test.app 程序 /usr/bin/codesign 返回 1：[/Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone/hello_app_test/build/hello_app_test.app：代码对象根本没有签名在架构中：i386] 代码设计检查失败：/Applications/XAMPP/xamppfiles/htdocs/AppHome/app/webroot/files/apps/iphone/hello_app_test/build/hello_app_test.app：代码对象根本没有签名在建筑中：i386 完成对原始应用程序的检查### Embedding '/private/var/root/Downloads/Dev_Test.mobileprovision' + /bin/rm -rf /tmp/oERgpr0ih1/Payload/hello_app_test.app/embedded.mobileprovision Program /bin/rm返回 0 : [] + /bin/cp -rp /private/var/root/Downloads/Dev_Test.mobileprovision /tmp/oERgpr0ih1/Payload/hello_app_test.app/embedded.mobileprovision 程序 /bin/cp 返回 0 : [] ## # 与 'iPhone Developer: AKIO ITO (N5YRDPREK9)' 共同设计 '/private/var/root/Downloads/Dev_Test.mobileprovision' + /usr/bin/codesign --force --preserve-metadata=identifier,entitlements,resource-rules --sign iPhone 开发人员：AKIO ITO (N5YRDPREK9) --resource-rules=/tmp/oERgpr0ih1/Payload/hello_app_test.app/ResourceRules.plist /tmp/oERgpr0ih1/Payload/hello_app_test.app 程序 /usr/bin/codesign 返回 1 ：[/tmp/oERgpr0ih1/Payload/hello_app_test.app/ResourceRules.plist：无法读取资源]

请帮助某人从终端（MAC）创建 ipa 文件。任何帮助和建议都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T08:21:41.930

我只注意到这些：

1-代码对象根本没有签名在架构中：i386

2- ResourceRules.plist：无法读取资源

检查您的 plist 是否有效（可能是一些额外或缺失的字符）

# c# - 如何让 GridView 适应 Windows Store 应用中的不同分辨率？

> ID：15022273
> 
> 赞同：0
> 
> 时间：2013-02-22T10:42:11.760
> 
> 标签：c#, xaml, gridview, microsoft-metro, windows-runtime

我知道当决议改变时，`GridView`增长。但我不想那样。我有`GridView`，它已经修复`GridViewItem`了 9。所以当分辨率改变时`GridViewItem`应该更大。我想使用`GridView`它，因为它具有选择行为。请为此指导我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:21:33.777

您可以将所有内容放入 a 中`Viewbox`，它会随屏幕像素分辨率缩放。

# c# - 关于 C# 文本文件读取中的 65533 的问题

> ID：15022274
> 
> 赞同：12
> 
> 时间：2013-02-22T10:42:21.383
> 
> 标签：c#, unicode

我创建了一个示例应用程序来加载所有特殊字符，同时从 Openoffice 编写器复制粘贴到记事本。双码不同，当我尝试加载它时。

```
var lines = File.ReadAllLines("..\\ter34.txt"); 
```

这会产生 65533 问题，文本文件包含：

```
 “ 
```

这已更改为符号：

```
 � 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-22T10:48:18.670

[U+FFFD](http://www.unicode.org/charts/PDF/UFFF0.pdf)是“Unicode 替换字符”，如果您尝试读取的数据对于用于将二进制数据转换为文本的编码无效，则使用该字符。

例如，如果您使用 ISO-8859-1 写出一个文件，然后尝试使用 UTF-8*读取*它，那么您很容易得到一些根本不是有效 UTF-8 的字节序列。每个无效字节都会（默认）翻译成 U+FFFD。

基本上，您需要为`File.ReadAllLines`, 作为第二个参数提供正确的编码。当然，这意味着您首先需要知道文件的编码。

# java - Primefaces 日历内联模式大小错误

> ID：15022275
> 
> 赞同：2
> 
> 时间：2013-02-22T10:42:32.920
> 
> 标签：java, web-services, jakarta-ee, primefaces

具有内联模式的 Primefaces 日历以错误的方式显示：

![素面日历](../Images/e310a14fcbf2dc8e329a97bd76f9a944.png)

代码：
xHTML

```
<p:tab title="Logs">
<p:panelGrid columns="2" cellpadding="2" styleClass="logsGrid">
<p:accordionPanel id="accordionLogs" styleClass="logsAccordion">
<p:tab title="Log1"></p:tab>
<p:tab title="Log2"></p:tab>
</p:accordionPanel>
<p:calendar value="#{dateBean.date}" mode="inline" styleClass="logsCalendar">
<p:ajax event="dateSelect" listener="#{dateBean.handleDateSelect}" update=":growlMain" />
</p:calendar>
</p:panelGrid>
</p:tab> 
```

班级：

```
package com.swql.sprint;

import java.text.SimpleDateFormat;
import java.util.Date;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;

import org.primefaces.event.SelectEvent;

@ManagedBean
public class DateBean {

    private Date date;

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public void handleDateSelect(SelectEvent event) {
        Date date = (Date) event.getObject();
        FacesMessage msg = null;
        SimpleDateFormat format = new SimpleDateFormat("d/M/yyyy");
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Date Picked", format.format(date));
        FacesContext.getCurrentInstance().addMessage(null, msg);
        }

} 
```

如何解决这个问题？

欧元：

**已经找出原因： p:panelGrid 以某种方式调整了日历内容的大小。也许解决方法是将日历放入其他容器中。将尝试并报告。**

欧元 2：

**将日历放入面板并不能解决问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:08:04.803

我在这里不明白您要创建什么设计 bur 我使用了此代码...

```
<p:tab title="Logs">

<p:accordionPanel id="accordionLogs" styleClass="logsAccordion">
<p:tab title="Log1"></p:tab>
<p:tab title="Log2"></p:tab>
</p:accordionPanel>
<p:calendar   mode="inline" styleClass="logsCalendar">
<p:ajax event="dateSelect"    />
</p:calendar>

</p:tab> 
```

对我来说很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:59:54.827

现在的解决方法是使用 html gridPanels：

```
<h:panelGrid columns="2" cellpadding="2" styleClass="logsGrid">
<p:calendar value="#{dateBean.date}" mode="inline" styleClass="logsCalendar">
<p:ajax event="dateSelect" listener="#{dateBean.handleDateSelect}" update=":growlMain" />
</p:calendar>
</h:panelGrid> 
```

# awk - 使用 awk 脚本有条件地替换字符

> ID：15022282
> 
> 赞同：1
> 
> 时间：2013-02-22T10:42:54.793
> 
> 标签：awk

我有以下文件1

```
22392003|28|ABC
22392004|28|ABC
22392006|28|XYZ
22392002|28|XYZ 
```

这是另一个文件2

```
MR30011596|user||IM1450029|22392099|28|AAA|28
MR30011596|user||IM1450029|22392099|28|BBB|28
MR30011596|user||IM1450029|22392006|28|CCC|28
MR30011596|user||IM1450029|22392099|28|DDD|28 
```

我想将 file1 的 $1 搜索到位置 $5 的 file2 中，如果找到匹配项，则将 file1 的 $3 替换到位置 $7 的 file2 中，所以这里应该是最终输出

```
MR30011596|user||IM1450029|22392099|28|AAA|28
MR30011596|user||IM1450029|22392099|28|BBB|28
*MR30011596|user||IM1450029|22392006|28|XYZ|28*
MR30011596|user||IM1450029|22392099|28|DDD|28 
```

我尝试使用搜索字符，`awk -F "|" 'FNR==NR { a[$1]; next } $5 in a'`但不知道如何将 $3 替换为位置 $7 的 file2 我们可以使用`awk script`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:02:43.133

```
 awk 'BEGIN{FS=OFS="|"}NR==FNR{a[$1]=$3;next}$5 in a{$7=a[$5]}1' file1 file2 
```

上面的行给你输出。（没有`*`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:56:34.973

您还可以通过两次调用来完成此操作`join`：

```
# The input needs to be sorted on the join fields
sort             file1 > file1.sorted
sort -t'|' -k5,5 file2 > file2.sorted

(
  join -t'|' -2 5     -o '2.1 2.2 2.3 2.4 2.5 2.6 1.3 2.8' file1.sorted file2.sorted
  join -t'|' -2 5 -v2 -o '2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8' file1.sorted file2.sorted
) 
```

输出：

```
MR30011596|user||IM1450029|22392006|28|XYZ|28
MR30011596|user||IM1450029|22392099|28|AAA|28
MR30011596|user||IM1450029|22392099|28|BBB|28
MR30011596|user||IM1450029|22392099|28|DDD|28 
```

# leaflet - Leafet.js：添加带有缩放框功能链接的按钮

> ID：15022292
> 
> 赞同：4
> 
> 时间：2013-02-22T10:43:23.553
> 
> 标签：leaflet

我需要在传单中添加一个带有“矩形”缩放或所谓的 boxZoom 功能的控制按钮。我知道当按下 shift 并绘制一个矩形时可以使用该函数，但我需要一个被点击的按钮，然后用户可以绘制一个矩形，该矩形用于 boxZoom 函数的边界。我认为这并不难，但我就是想不通。

如果您能告诉我如何将其他功能（例如leaflet.draw）链接到我自己的按钮，则可以加分。我需要创建自己的按钮工具栏，所以我需要能够将不同的功能附加到按钮上，并希望使用已经存在的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T19:34:15.637

没有一个适合所有解决方案的解决方案（因此 L.Control.BoxZoom 是它自己的插件的原因）。您需要添加带有点击处理程序的按钮，然后阅读 Leaflet 的 API 或您正在集成的插件（例如绘图）以了解如何切换行为。

Leaflet.EasyButton插件很好[地](http://cliffcloud.github.io/Leaflet.EasyButton/v1/)封装了单按钮控件的创建和单击处理程序，如果您正在努力入门，它可能是一个很好的起点。

# functional-programming - Erlang：涉及用户定义函数的条件，对象上不匹配模式

> ID：15022296
> 
> 赞同：2
> 
> 时间：2013-02-22T10:43:38.863
> 
> 标签：functional-programming, erlang, user-defined-functions

在 Erlang 代码中，我使用了一个类似字典的数据结构，它有一个 {tag, value} 列表。例如：{robot, **[{x-pos, 50}, {y-pos, 100}, {speed, 10}]**。列表中的元素数量或其顺序无法预测。我编写了将遍历列表以查找每个参数的值的函数，例如 get_xpos、get_ypos 等。

我想写一个应该像这样的函数

```
function(MyTuple) when get_xpos (MyTuple) > 50 -> stop;
function(MyTuple) when get_ypos (MyTuple) < 50 -> forward. 
```

由于守卫或 Erlang 中不允许**用户定义的函数，因此这是不可能的。**由于有很多这样的条件，为每个条件编写 case 语句并不优雅。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:44:23.537

你可以这样做：

```
aux_fun(TupleList) -> fun(get_xpos(TupleList), get_ypos(TupleList)).

fun(XPos, YPos) when XPos > 50 -> stop;
fun(XPos, YPos) when YPos < 50 -> forward. 
```

# playframework-2.0 - 播放框架 2 多对多关系

> ID：15022298
> 
> 赞同：1
> 
> 时间：2013-02-22T10:43:41.703
> 
> 标签：playframework-2.0, ebean

我有两节课：

```
public class Tag {
@Id
public int id;

@ManyToMany(cascade=CascadeType.ALL)
public static List<Article> articles;

public static Finder<Long, Tag> find = new Finder<Long, Tag>(Long.class, Tag.class);
}

public class Article {  
@Id
public int id;

@Constraints.Required
public String title;

@ManyToMany(cascade=CascadeType.ALL)
public static List<Tag> tags;

public static Finder<Long, Article> find = new Finder<Long, Article>(Long.class,     Article.class); 
```

我需要获取文章作为参数并返回与本文相关的标签列表的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:34:25.813

试试这个：

```
public List<Tag> findTagsByArticle(Article article) {
    return find.fetch("articles").where().eq("articles.id", article.id).findList();     
} 
```

[用答案](https://stackoverflow.com/questions/11703629/filtermany-for-play-2-returns-all-results/11704403#11704403)检查类似的问题

filterMany()[在它的 API 中有描述](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Query.html#filterMany%28java.lang.String%29)

# ios - 打破中央调度运行

> ID：15022301
> 
> 赞同：0
> 
> 时间：2013-02-22T10:43:58.060
> 
> 标签：ios, grand-central-dispatch

我用

```
 dispatch_async(getDataQueue,^{
    //do many work task A
    dispatch_aysnc (mainQueue, ^{
    //do
};
}
) 
```

如果我按返回键，而 gcd 没有完成它的任务 A，我想打破 dispatch_async.how to do

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:03:05.057

你可以使用一个*标志*来继续工作，它是假的：

```
// Somewhere accessible from the task's block and from the view controller
__block BOOL quit = NO;

dispatch_async(getDataQueue,^{
    dispatch_aysnc (mainQueue, ^{

        if (!quit)
        {
            // do first thing
        }

        if (!quit)
        {
             // do second thing
        }

        while (!quit)
        {
            // do lots of things
        }

    });
}); 
```

然后你可以简单地停止后台任务：

```
quit = YES; 
```

无论如何，这是停止任何后台任务的首选方法，因为它允许任务在不强制终止之前执行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:56:26.457

你不可以做这个。关于 GCD 的一个基本事实是，一旦你调度了一个块，只要队列没有挂起，它就会**无论如何运行。**如果您需要可取消的异步操作，则需要使用`NSOperation`

# android - 安卓慢帧率

> ID：15022302
> 
> 赞同：1
> 
> 时间：2013-02-22T10:44:00.530
> 
> 标签：android, graphics, frame-rate

显然，这是一个热门话题。我是初学者，所以我的问题可能是相当微不足道的。这是一个非常简单的游戏，类似于 Pong。我正在使用此代码来绘制我的游戏：

```
@Override
public void paint(float deltaTime) {
    Graphics g = game.getGraphics();

    // draw the game elements
    if (state == GameState.Running){
        g.drawImage(Assets.back, 0, 0);
        //g.drawRect(0, 0, g.getWidth(), g.getHeight(), Color.BLACK);           
        g.saveCanvas();
        g.drawTransRect(0, 0, scene.getLine(), g.getHeight());
        g.drawImage(Assets.fore, 0, 0);
        //g.drawRect(0, 0, g.getWidth(), g.getHeight(), Color.WHITE);
        g.restoreCanvas();  

        for (Pieces p : pieces){

            if (p.getType() == true)
                g.drawImage(Assets.pos, p.getX(), p.getY());
            if (p.getType() == false){
                g.drawImage(Assets.neg, p.getX(), p.getY());

            }
        }
    } 
```

如果我按原样运行代码，帧速率看起来约为 15FPS？但是，使用drawRect（上面注释掉）而不是drawImage（背景和前景bmps作为资产），我的FPS至少为60。我假设这意味着显示bmps vs Rects涉及更多的CPU能力。如何使用我的图像并保持良好的帧率？

谢谢。

编辑：

如果有帮助，我的 drawImage 方法如下所示：

```
 public void drawImage(Image Image, int x, int y) {
    canvas.drawBitmap(((AndroidImage)Image).bitmap, x, y, null);
} 
```

# ksoap - 在android上使用kso ap2调用包含字节数组（如参数）参数的Webmethod

> ID：15022303
> 
> 赞同：1
> 
> 时间：2013-02-22T10:44:00.160
> 
> 标签：ksoap

有用 C# 编写的 WEB 服务，使用下一个方法：

```
[WebMethod]
public string ByteArrTest(byte[] Buffer)
{
if (Buffer == null) return "buffer is null";
else return Buffer.Length.ToString() + " is buffer length";
} 
```

我喜欢使用 Ksoap2 库从 android 设备调用此方法，类似于 belove（简化）：

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;

new MarshalBase64().register(envelope);
        envelope.encodingStyle = SoapEnvelope.ENC;

SoapObject request = new SoapObject(this.getNameSpace(), this.getMethodName());

PropertyInfo pi4 = new PropertyInfo();
        pi4.setName("Buffer");
        byte [] b="this text".getBytes();
        pi4.setValue(b);
    pi4.setType(byte[].class);
// request.addProperty("buffer", "bytes".getBytes);
request.addProperty(pi4);
 envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = 
new    HttpTransportSE(this.getURL());//

androidHttpTransport.call(this.getSoapAction(), envelope);
Object response = envelope.getResponse();
//next implementation 
```

响应总是“缓冲区为空”什么是不正确或错误的？感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T14:16:35.133

在调用 Web 服务的 Android 中发布整个方法会更有帮助。

我在我目前正在处理的 Android 项目中使用 KSoap，我正在检索字符串。这是我修改的方法之一以匹配您的需要：

```
 private static String NAMESPACE = "http://tempuri.org/";
private static String SOAP_ACTION = "http://tempuri.org/";
private static final String URL = "Your url link to your web services asmx file";

        public static String ByteArrTestCall(byte[] t) {

    String resTxt = null;
    SoapObject request = new SoapObject(NAMESPACE, "ByteArrTest");
    // Add the property to request object
    request.addProperty("Buffer", t);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true;
    try
    {
    androidHttpTransport.call(SOAP_ACTION+"ByteArrTest", envelope);
    SoapPrimitive receivedString = (SoapPrimitive) envelope.getResponse();
    resTxt = receivedString.toString();
    }
    catch(Exception e)
    {
        resTxt = androidHttpTransport.requestDump;
        return e.toString() + resTxt;
    }

    return resTxt;
} 
```

# c# - .net3.5 System.Timers.Timer.Elapsed Twice

> ID：15022308
> 
> 赞同：0
> 
> 时间：2013-02-22T10:44:17.380
> 
> 标签：c#, .net, timer, windows-services

我正在为 Windows 服务项目编码，我使用 System.Timers.Timer 进行一些工作。

我将间隔设置为 2000 毫秒。

但我发现计时器将在前 2000 毫秒内引发 Elapsed 事件 1 次，然后每隔 2000 毫秒引发两次 Elasped 事件。

我认为我的程序有问题，我尝试通过锁定来解决它：

```
var timer_lock = new object();
DateTime last_elapse_time = DateTime.MinValue;
var _tm = new System.Timers.Timer(2000);
_tm.Elapsed += (object sender, System.Timers.ElapsedEventArgs e) =>
{
    lock (timer_lock)
    {
        var cur_time = DateTime.Now;
        var interval = (cur_time - last_elapse_time).TotalMilliseconds;
        if (interval < 2000)
            return;
        last_elapse_time = cur_time;
        System.Diagnostics.Trace.WriteLine(cur_time.Second);
    };
}
_tm.Start(); 
```

但我发现它不起作用，Trace.WriteLine 运行了两次，然后我尝试了另一个测试：

```
static void Main()
{
    new System.Threading.Thread(new System.Threading.ThreadStart(() => {
        while (true)
        {
            System.Threading.ThreadPool.QueueUserWorkItem((object context) =>
            {
                var cur_time = DateTime.Now;
                System.Diagnostics.Trace.WriteLine(cur_time.Second);
            });
            System.Threading.Thread.Sleep(2000);
        }
    })).Start();
} 
```

但是什么都没有改变。。

我做了一个新的控制台项目来测试问题，然后问题消失了，计时器工作正常。

然后我做了一个新的windows服务项目，然后问题又出现了。

`OnStart()`我通过run方法调试windows服务项目`Main()`，是这个原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:01:21.663

最后通过使用锁定和检查间隔解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:01:20.670

只需`var _tm = new System.Timers.Timer(2000);`在 onstart 方法之外设置...例如，在构造函数中。这应该可以解决您的问题

# css - 如何向左扩展div？

> ID：15022310
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:44:19.457
> 
> 标签：css, html, expand

如何**扩展**左这个div？它唯一扩展的权利，我尝试一切，但它仍然无法正常工作请帮助

```
<div id="menu"></div>

#menu
{
float:right;    
width:33px;
height:33px;
overflow:hidden;
background:#0F0;
position:absolute;
z-index:3;  
left:49%;
-moz-transition-property: width; /* Firefox 4 */
-moz-transition-duration: 1s; /* Firefox 4 */
-webkit-transition-property: width; /* Safari and Chrome */
-webkit-transition-duration: 1s; /* Safari and Chrome */
-o-transition-property: width; /* Opera */
-o-transition-duration: 1s; /* Opera */
}       

#menu:hover
{
width:180px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:23:30.967

尝试这个：

```
<style>
    #menu {
        width:33px;
        height:33px;
        position:absolute;
        background:#0F0;
        overflow:hidden;
        z-index:3;
        transition: width 1s;
        -moz-transition: width 1s;
        -webkit-transition: width 1s;
        -o-transition: width 1s;
        right:49%;
    }
    #menu:hover {
        width:180px;
    }
</style>
<div id="menu"></div> 
```

# php - 如何使用链接的php onclick打开保存和打开对话框

> ID：15022313
> 
> 赞同：-2
> 
> 时间：2013-02-22T10:44:27.413
> 
> 标签：php, web-services

我正在做一个 php 项目。我得到一个文件名作为我的网络服务的响应。我在 web 服务调用成功的页面上显示了一个链接。单击该链接我需要打开一个对话框，它将要求用户保存或打开文件。选择另存为时，它将文件保存在特定位置，如果我们选择打开，它将打开文件。我完全不知道如何做到这一点。任何机构都可以通过一些例子或任何指示帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:46:19.163

最好的方法是只从 PHP 流式传输文件，并让浏览器显示默认的保存/打开对话框。

如果您需要更高级的行为，则需要大量的 javascript。

# iphone - 从提要中填充 UIPickerView

> ID：15022314
> 
> 赞同：0
> 
> 时间：2013-02-22T10:44:32.060
> 
> 标签：iphone, ios, rss, uipickerview

我正在将位置信息解析为`NSMutableArray`被调用的项目。我填写`UIPickerView`如下：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {
return [items count];
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row     forComponent:(NSInteger)component {
return [items objectAtIndex:row];
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
id item = [items objectAtIndex:row];
NSString *occasion = [item objectForKey:@"name"];
location.text = occasion;
} 
```

当我这样做时，UIPickerView 中没有出现任何值，有人可以帮我解决这个问题吗？一切都正确连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:30:29.190

像这样试试

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:    (NSInteger)component {
return [items count];
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row     forComponent:(NSInteger)component {
id item = [items objectAtIndex:row];
NSString *occasion = [item objectForKey:@"name"];
return occasion;
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
id item = [items objectAtIndex:row];
NSString *occasion = [item objectForKey:@"name"];
location.text = occasion;
} 
```

这将在选择器中显示字符串

还设置了pickerview的代表

我认为您正在传递整个字典而不是字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:53:50.740

做这些事情：

#1 确保正确设置委托。例如。：

```
self.pickerView.delegate = self; 
```

#2 检查你的场合字符串是否不为零也不为空。

```
NSLog(@"%@", occasion); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:39:13.850

我猜项目数组可以是字典数组。因此，您应该在 NSDictionary 中获取 NSString。

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row     forComponent:(NSInteger)component {
return [[items objectForKey:@"name"] objectAtIndex:row];
} 
```

# performance - 是否可以为 RTL 创建基于硬件的合成器？

> ID：15022316
> 
> 赞同：5
> 
> 时间：2013-02-22T10:44:33.990
> 
> 标签：performance, algorithm, optimization, vhdl, verilog

我想构建一个基于专用硬件的[综合](http://en.wikipedia.org/wiki/Logic_synthesis)工具，以加速 RTL 的开发。

1.  是否有任何基于硬件的平台可以合成 RTL？
2.  [与Synopsis](http://www.synopsys.com/tools/implementation/fpgaimplementation/fpgasynthesis/pages/synplifypro.aspx)工具相比，可以大致估计它的速度吗

* * *

这个想法是对 vhdl/verilog/netlist 合成器进行引导，这是一个在硬件中实现大型状态机的平台，可以使所有 RTL 敏感（[用自己的语言编写编译器](https://stackoverflow.com/questions/193560/implementing-a-compiler-in-itself)显示了 SW 世界的密切想法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:21:07.830

与往常一样，当问题以“*在硬件中*进行”为前提时，答案总是必须是“*显示硬件将解决哪些瓶颈**以及如何***解决”。除非您对问题有足够的了解，能够以比挥手更甚的方式回答该问题，否则这一切都是猜测。

正如另一个人所指出的那样——如果它是明智的（在财务上），那么有足够大的受挫工程师市场等待合成完成，它已经存在了。

如果它只是为了一个有趣的项目，那么当然可以：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:40:24.670

这是关于该主题的最新[论文](http://repository.tamu.edu/handle/1969.1/ETD-TAMU-2009-12-7471)，作者也写了一[本书](http://www.springer.com/engineering/circuits+%26+systems/book/978-1-4419-0943-5)。考虑到硬件开发的成本，这在今天可能是不切实际的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T14:56:22.853

这是一个非常有趣的想法，要回答您的第一个问题，我相当肯定没有像这样的现有产品在市场上销售。

但是，您应该知道综合工具非常复杂。创造你想要的东西将是很多工作，我想说即使是可行性研究（除其他问题外，应该回答你的第二个问题）对于硕士论文来说就足够了。

就像马丁说的那样，有很多沮丧的工程师，他们的设计需要几个小时才能合成（我就是其中之一！）。Altera 和 Xilinx 的综合工具仍然非常糟糕地利用了我计算机中的六核处理器，尤其是在我不进行任何设计分区的情况下。这让我相信并行化合成过程并不容易，尽管我倾向于高估大公司的工程师。

# ios - 在 ContainerController 中访问 UIViewController

> ID：15022319
> 
> 赞同：4
> 
> 时间：2013-02-22T10:44:35.737
> 
> 标签：ios, objective-c, ipad, interface-builder, container-view

我有以下设置：

`SplitViewController`作为根控制器。

细节部分是第一

`ViewController`与`View`> `ContainerView`（稍后，`View`将有`ImageView`，但这不是这里的问题）。

已经 segue （`ContainerView`嵌入）到另一个视图控制器（`NavigationController`）。

这在 IB 中以图形方式表示为：

![IB中的布局](../Images/df60a7ef70092c719d433f9ff64f8bc8.png)

现在问题是我想`NavigationController`从 rootController 访问（例如`SplitViewController`）。我无法向下导航“子视图”的层次结构等等。

有什么方便的方法可以获取`NavigationController`吗？

没有`ViewController`（连同 ContainerView），我可以像这样访问它：

```
UISplitViewController *splitViewController = (UISplitViewController *) self.window.rootViewController;
UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
// now i have the controller, i can delegate to it or use it in any other way:
splitViewController.delegate = (id) navigationController.topViewController; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:30:02.157

添加 NavigationController 时，可以将其向上传递（委托方法）到 UISplitViewController 的子类并在那里存储引用。

您可以添加一个`@property (MySplitViewController *) delegate;`MyContentView 并将其设置为 splitviewcontroller。当 segue 被触发时，您可以执行以下操作：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"ShowNavigationController"])
    {
        UINavigationController *controller = segue.destinationViewController;
        [self.delegate setNavigationController:controller];
    }
} 
```

编辑：如果你想坚持你的代码，你可以这样做：

```
UISplitViewController *splitViewController = (UISplitViewController *) self.window.rootViewController;
UIViewController *container = [splitViewController.viewControllers lastObject];
UINavigationController *navigationController = [container.childViewControllers lastObject];
splitViewController.delegate = (id) navigationController.topViewController; 
```

在这种情况下，你真的应该包括一些错误处理。

# actionscript-3 - 我可以阻止 Stage3D 写入 Z 缓冲区吗？

> ID：15022320
> 
> 赞同：2
> 
> 时间：2013-02-22T10:44:43.807
> 
> 标签：actionscript-3, flash, stage3d

我想渲染隐藏的对象并达到与 Stage3D 中的链接中显示的效果类似的效果。

[Torchlight 2 中的剪影效果](http://www.max-did-it.com/wp-content/uploads/2013/02/torchlight_silhouette.png)

我已经知道如何在理论上做到这一点。我必须绘制对象两次：

*   一旦正常设置和
*   一次使用不同的深度排序模式，其中仅显示渲染几何图形*后面的像素。**此外*，为了防止以后出现奇怪的效果，这些像素不能渲染到深度缓冲区中。

我可以在 Stage3D 中使用`Context3DCompareMode.GREATER`. 是否也可以让 Stage3D 将像素渲染到后台缓冲区，而不是 z 缓冲区？

如果我不能阻止 Stage3D 渲染到深度缓冲区，效果将如下所示：

[毛刺剪影效果](http://www.max-did-it.com/wp-content/uploads/2013/02/glitchy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:54:26.493

是的，您可以关闭深度和模板缓冲区。检查 context3d.configureBackBuffer 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T17:04:52.197

如果有人遇到这种情况，您应该注意两件事：

1）作为 Volgogradetzzz 确保你有一个模板/深度缓冲区作为你的后台缓冲区的一部分，使用`Context3D.configureBackBuffer(...)`

2）如果您需要在不同的时刻打开或关闭深度像素写入，您可以在此函数中使用设置 depthMask 参数：

```
public function setDepthTest(depthMask:Boolean, passCompareMode:String):void 
```

在这个名字的函数中找到这个特性有点奇怪，因为深度写入掩码会影响结果，而不是测试本身。

# ruby - Ruby 哈希 - 无法循环数据

> ID：15022321
> 
> 赞同：0
> 
> 时间：2013-02-22T10:44:45.637
> 
> 标签：ruby, loops, hash, each

我在哈希中有这种数据结构：

```
[{"name"=>"Peter", "surname"=>"Green"}, {"name"=>"Jane", "surname"=>"Miller"}] 
```

但是当我尝试使用这个哈希时，例如：

```
puts hash.count # returns nothing
hash.each do |data|
  puts data.name # => undefined method `name' for #<Hash:0x00000104bcf9f8>
end 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:46:25.673

`Array#count``length`没有参数应该返回元素的数量，但使用or更自然`size`。而且`Hash`没有方法`name`。

```
puts hash.length
hash.each do |data|
  puts data["name"]
end 
```

顺便说一句，您所说`hash`的实际上是一个数组，并且令人困惑。

# html - 在html表中划分colspan

> ID：15022323
> 
> 赞同：1
> 
> 时间：2013-02-22T10:44:52.350
> 
> 标签：html, xhtml, html-table

其实我是新来的设计。我有一个 html 表，它有三行描述如下

1.  第 1 行 - 2 列

2.  第 2 行 -- 1 列

3.  第 3 行 -- 3 列

现在我想将第三行列分成相等的分区但无法调整 colspan 有人可以帮我这里是代码

```
<table width="100%" cellpadding="5" cellspacing="0" border="1">

    <tr>
        <td align="left">Infodeep Technologies</td>
        <td align="right">3 Minutes ago</td>
    </tr>

    <tr>
        <td colspan="3" align="justify">Samsung pioneered the trend of
            a new breed of devices, now more commonly known as
            'phablets',smartphones that are (almost) nearing tablets in size.
        </td>
    </tr>

    <tr>
        <td align="left">By panel.</td>
        <td align="center">21.12%</td>
        <td align="right">21 / 30</td>
    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:51:55.027

希望这是你想要的。

```
<table width="100%" cellpadding="5" cellspacing="0" border="1" >

    <tr>
        <td align="left" width = "50%">Infodeep Technologies</td>
        <td align="right" colspan = "2">3 Minutes ago</td>
    </tr>

    <tr>
        <td colspan="3" align="justify">Samsung pioneered the trend of
             a new breed of devices, now more commonly known as
             'phablets',smartphones that are (almost) nearing tablets in size.
        </td>
    </tr>

    <tr>

        <table border = "1" width = "100%" >

          <tr>
            <td  align="left" width = "33%"  >By panel.</td>          
            <td  align="centre"  width = "33%" >21.12%</td>
            <td align="right"  width = "33%" >21 / 30</td>
          </tr>

        </table>

    </tr>

</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:04:41.127

尝试添加`fixed`表格布局，这应该会覆盖浏览器默认调整单元格的大小。

```
<table width="100%" cellpadding="5" cellspacing="0" border="1" style="table-layout:fixed">

    <tr>
        <td align="left" width = "50%">Infodeep Technologies</td>
        <td align="right" colspan = "2">3 Minutes ago</td>
    </tr>

    <tr>
        <td colspan="3" align="justify">Samsung pioneered the trend of
            a new breed of devices, now more commonly known as
            'phablets',smartphones that are (almost) nearing tablets in size.
        </td>
    </tr>

    <tr>
        <td align="left" col>By panel.</td>
        <td align="center">21.12%</td>
        <td align="right">21 / 30</td>
    </tr>

</table> 
```

# python - 如何使用 python 更改 mime 类型？

> ID：15022331
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:20.720
> 
> 标签：python

我有 doc file.its 元数据如下所示![在此处输入图像描述](../Images/b969f8a0156192bde565ef69c86e2eb5.png)

我想在 python 中将它的 mime 类型更改为 image/png（我是一个脚本小子黑客。我想通过更改 mime 类型将 php 文件上传到服务器）如​​何更改 this.我需要 python 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:49:00.290

您通常不会以这种方式更改该 mimetype。您在上传时引用的 mimetype 由浏览器提交（并由浏览器确定）。

如果您想以浏览器歪曲 MIME 类型的方式上传此内容，您可以安装插件或编写脚本自行上传到表单。

# asp.net-mvc - 控制器操作的多用户授权

> ID：15022334
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:25.717
> 
> 标签：asp.net-mvc, authorization

我正在构建一个小型应用程序，它将有多个使用 ASP.NET MVC 的用户，但我不确定如何在下面的场景中处理用户授权。由于我仍在学习，我可能会遗漏一些明显的东西，所以任何建议都值得赞赏。

基本上，为了说明我的问题，请考虑我正在构建一个非常小的电子邮件，例如消息传递系统。这是阅读消息的操作：

```
/Message/ReadMessage/1 
```

其中**Message**是控制器，**ReadMessage**是操作，**1**是 MessageId。

现在这条消息是给“Bob”的，他的 UserId 与消息一起存储在数据库中。另一个名为“Fred”的用户也收到了一条消息，消息 ID 为 2。

在我的应用程序中，Bob 无法直接或通过链接在页面上看到 Fred 的消息（消息应该对每个用户都是私有的），所以对我来说保护 Bob 的最佳方法是简单地更改 MessageId URL 手动从 1 到 2 并查看 Fred 的消息？

作为对此的当前解决方案，我在控制器操作开始时进行了一个非常简单的检查，它将与消息一起存储的 UserId 与当前 UserId 进行比较，如果它们不匹配，则重定向用户（也就是说，他们的收件箱）。

对于这种情况，这是一个合适的解决方案吗？我觉得虽然这现在有效，但它不是解决这个问题的最佳方法。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:48:43.470

您的控制器需要检查当前用户是否被允许访问资源（在这种情况下为消息）

# python - 透明效果python图片库

> ID：15022335
> 
> 赞同：1
> 
> 时间：2013-02-22T10:45:26.087
> 
> 标签：python, python-imaging-library

几天来我一直在搜索相关字符串，但找不到适合我的答案。我的问题是如何在蓝色矩形上绘制一个透明的红色矩形。这就是我现在的情况。

```
im=Image.new('RGBA',(400,400),'white')
draw=ImageDraw.Draw(im)
draw.rectangle((100,100,200,200),fill=(0,255,0,0)) #big 100*100 green rectangle
draw.rectangle((80,80,130,130),fill=(255,0,0,0)) #small 50*50 red rectangle
im.show() 
```

我现在得到的是读取的矩形完全覆盖了绿色的重叠部分，但我希望重叠部分是透明的，这样我可以在红色矩形下看到它是绿色的部分，重叠部分将是另一种颜色。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-25T20:14:34.493

[另一个线程](https://stackoverflow.com/questions/359706/how-do-you-draw-transparent-polygons-with-python)中有几个很好的答案。包括解释如果您要使用第四个参数，那么绘图对象需要是“RGBA”，并且基础图像必须是“RGB”模式才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:52:18.490

如果你只是做一个矩形，第四个参数`fill`是一个不透明度，其中 0 是完全不透明的。

# java - Ebean 在运行时更改 Postgres 模式

> ID：15022336
> 
> 赞同：3
> 
> 时间：2013-02-22T10:45:28.667
> 
> 标签：java, playframework-2.0, database-schema, ebean

前段时间我发现了带有play framework 2的ebean。我真的很喜欢使用查询访问数据库的方式。但现在我有一些问题。我想编写一个多租户 saas 应用程序。每个客户都应该在 PostgreSQL 数据库中拥有自己的模式。

我找不到在运行时更改架构的方法。当然，您可以使用命名模式的自定义配置创建一个新的 ebean 服务器。但我认为这对于每个请求来说都是沉重的。我还看到他们有没有办法在运行时以更优雅的方式更改架构，如果没有，我必须扩展哪个类来构建这样的函数？运行时构建的表名在哪里？

# java - Image.IO 无法读取输入文件 - Java

> ID：15022339
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:33.890
> 
> 标签：java, nullpointerexception, bufferedimage, javax.imageio

嘿，我目前正在尝试将图像的字节内容读入 java 中的字节数组，但似乎无法从文件中打开图像。控制台抛出此异常：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException 
```

这是有问题的行：

```
BufferedImage im =
   ImageIO.read(
      new File(
         getClass().getResource( "/Images/default_pic.png" ).toURI())); 
```

我的包裹看起来像这样：

```
-UI
  -Class //code getting image here
-UI.Images
  -default_pic.png 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:52:40.370

`UI`您的路径中缺少该目录，我建议：

```
BufferedImage im =
   ImageIO.read(
      getClass().getClassLoader().getResourceAsStream(
         "/UI/Images/default_pic.png" )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:48:46.527

你可以试试这个：

```
BufferedImage im = ImageIO.read(getClass().getClassLoader().getResourceAsStream("/Images/default_pic.png")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:47:42.600

检查文件是否使用 CMYK 着色（不知道这是否仅适用于 jpeg）。如果是这种情况，那么 ImageIO 无法在没有扩展名的情况下读取它。

检查[http://www.randelshofer.ch/blog/2011/08/reading-cmyk-jpeg-images-with-java-imageio/](http://www.randelshofer.ch/blog/2011/08/reading-cmyk-jpeg-images-with-java-imageio/)

# asp.net - GridView 中的链接按钮事件未在第二次触发其事件

> ID：15022340
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:36.063
> 
> 标签：asp.net, gridview, hyperlink

似乎是一个奇怪的问题，但我的`Linkbutton`which没有**在详细信息**`GridView`上触发它的事件：我有一个which正在触发一个事件。**此事件在第一次**完全触发，但在我**第二次**单击它时不起作用（不回发）。`2nd Time.`
 **`GridView``linkButton`**

 ******```
<asp:GridView ID="dg1" runat="server" OnSorting="dg1_Sorting" OnRowCreated="GridViewSortImages"
   SkinID="grid" Width="100%" Font-Underline="false" HeaderStyle-Font-Underline="false"
   OnRowCommand="dg1_RowCommand" AllowPaging="True" HeaderStyle-HorizontalAlign="Left"
   OnRowDataBound="dg1_RowDataBound" ShowFooter="true">
            <Columns>
              <asp:TemplateField ItemStyle-Width="15px">
                <ItemTemplate>
                    <asp:ImageButton ID="imgbtndel" runat="server" OnClick="imgbtndel_Click" ImageUrl="~/css/Images/delete.gif"
                            OnClientClick="return confirm('Do you want to Delete')"></asp:ImageButton>
                    </ItemTemplate>
                    <ItemStyle Width="15px" />
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Account Type ID" SortExpression="ID" ItemStyle-Width="60px"
                    HeaderStyle-Font-Underline="false">
                    <ItemTemplate>
                        <asp:LinkButton ID="lnkbtnno" runat="server" ForeColor="#123B61" Text='<%#Eval("ID") %>'
                            OnClick="lnkbtnno_Click"></asp:LinkButton>
                    </ItemTemplate>
                    <HeaderStyle Font-Underline="False" />
                    <ItemStyle Width="60px" />
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Description" SortExpression="Description" ItemStyle-Width="200px">
                    <ItemTemplate>
                        <asp:Label ID="lblDesc" runat="server" Text='<%#Eval("Description") %>'></asp:Label>
                    </ItemTemplate>
                    <ItemStyle Width="200px" />
                    <HeaderStyle HorizontalAlign="Left" />
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

**C＃**

```
protected void lnkbtnno_Click(object sender, EventArgs e)
{

    LinkButton lnkbtn = sender as LinkButton;
    txtaccid.Text = lnkbtn.Text;

    Label lblDesc = lnkbtn.FindControl("lblDesc") as Label;
    txtdesc.Text = lblDesc.Text;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:31:13.457

您的链接按钮第二次没有触发事件。因为第二次触发了其他一些事件而不是您的链接按钮。所以在事件堆栈链接按钮事件被禁用。检查您添加的动态控制是否正在触发。使用诸如 firebug(F12) 之类的开发人员工具******

# node.js - 如何在 CompoundJS 中使用 development.js、production.js 和 test.js

> ID：15022342
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:37.770
> 
> 标签：node.js

我正在尝试在我的一个应用程序中使用 CompoundJS。我对 Rails 有丰富的经验，并且使用过诸如此类的配置文件`config/environments/development.rb`，

但现在我试图将每个环境的配置数据放在 CompoundJS 中，并在控制器中使用它。我如何实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:39:29.773

使用`config/environments/*.js`文件。像往常一样在此处配置您的快速应用程序：`app.set('key', 'val');`. 在控制器中，您可以将配置访问为`compound.app.get('key');`.

# python - 在子实例内部调用父实例的方法

> ID：15022343
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:38.437
> 
> 标签：python

让子类 (B) 实例调用其父类 (A) 实例的方法之一的最佳方法是什么？传递`self`给子类 (B) 的实例似乎可行，但不知何故，这似乎不是有效的或良好的做法。有什么更好的方法来解决这个问题吗？

```
class A():
    def __init__(self,name):
        self.instanceOfB = self.B(self)
        self.name = name

    def hello(self):
        print 'Hello '+self.name

    class B():
        def __init__(self,parent):
            self.parent = parent

        def hi(self):
            self.parent.hello() ##Call parent instance's method 'hello()' here

instanceOfA = A('Bob')
instanceOfA.instanceOfB.hi() 
```

应该导致：

```
Hello Bob 
```

`@classmethod`并且`@staticmethod`仅在`A.hello()`不依赖于使用 A 类实例化的任何信息时才有效

# eclipse-rcp - Eclipse RCP 中“关于”对话框中的字体

> ID：15022347
> 
> 赞同：0
> 
> 时间：2013-02-22T10:45:54.607
> 
> 标签：eclipse-rcp

我目前正在使用 Ecpise RCP 开发一个小型应用程序。

我的问题是，如何单独更改“关于”对话框中的字体。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:01:41.220

如果您通过命令/菜单贡献或通过“ActionFactory.ABOUT.create(window);”添加了“关于”菜单项 函数然后您可以通过提供自己的处理程序来覆盖默认的“关于”命令处理程序。

将此添加到您的 plugin.xml：

```
<extension
     point="org.eclipse.ui.handlers">
  <handler
        class="my.AboutActionHandler"
        commandId="org.eclipse.ui.help.aboutAction">
  </handler> 
```

然后创建 my.AboutActionHandler 类：

```
package my;
import org.eclipse.core.commands.AbstractHandler;
import org.eclipse.core.commands.ExecutionEvent;
import org.eclipse.core.commands.ExecutionException;
import org.eclipse.ui.handlers.HandlerUtil;

public class AboutActionHandler extends AbstractHandler {
  @Override
  public Object execute(ExecutionEvent event) throws ExecutionException {
    new MyAboutDialog(HandlerUtil.getActiveShellChecked(event)).open();
    return null;
  }
} 
```

此时，您确实想将 MyAboutDialog 类创建为内置 AboutDialog 类的子类并简单地覆盖该`configureText`方法，但不幸的是 AboutDialog 类是“内部的”，因此您无法扩展它 --- 哦！

我的建议是简单地在 Eclipse 中打开 AboutDialog 类（shift-ctl-t AboutDialog）并将源代码复制粘贴到您自己的 MyAboutDialog 类中；然后只需编辑`configureText`方法来设置你想要的字体。我承认这不是最优雅的选择，但我看不到任何其他方式。

# xcode - UIBezierPath 不同颜色

> ID：15022348
> 
> 赞同：1
> 
> 时间：2013-02-22T10:46:07.023
> 
> 标签：xcode, uibezierpath

我能够在我的应用程序中使用 UIBezierPath 进行绘制。现在我添加了一个 UIColor 变量，以便用户按下按钮可以选择不同的颜色。当用户更改颜色并开始使用新颜色绘制时，所有已绘制的路径都具有新颜色。

如何告诉对象不要更改已绘制路径的颜色？

这是我的代码。非常感谢任何代码示例！:)

（我的 UIColor 变量存储在 appDelegate 中，我正在从另一个 viewControlle 调用刷新方法。

```
 - (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    self.backgroundColor = [UIColor whiteColor];
    myPath = [[UIBezierPath alloc] init];
    myPath.lineCapStyle = kCGLineCapRound;
    myPath.miterLimit = 0;
    myPath.lineWidth = 5;

    brushPattern = app.currentColor;

}
   return self;
}
-(void)refresh {
    AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    brushPattern = app.currentColor;
}

- (void)drawRect:(CGRect)rect {
     [brushPattern setStroke];
     for (UIBezierPath *_path in pathArray)
     [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   myPath = [[UIBezierPath alloc] init];
   myPath.lineWidth = 5;

    UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
    [myPath moveToPoint:[mytouch locationInView:self]];
    [pathArray addObject:myPath];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
     UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
     [myPath addLineToPoint:[mytouch locationInView:self]];
     [self setNeedsDisplay];
 }

 -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T05:12:41.540

我找到了一个演示代码..

如果它对你有帮助，请检查这个..

[平滑线](https://github.com/yusenhan/Smooth-Line-View)链接

# regex - 匹配“THIS”并替换为“THAT”RegEx Vb.Net

> ID：15022352
> 
> 赞同：0
> 
> 时间：2013-02-22T10:46:15.610
> 
> 标签：regex, vb.net

试图找出如何用相应的值查找和替换文本。

例如

1) fedex 到 FedEx 2) nasa 到 NASA 3) po box 到 PO BOX

```
Public Function FindReplace(ByVal s As String) As String

    Dim MatchEval As New MatchEvaluator(AddressOf RegexReplace)

    Dim Pattern As String = "(?<f1>fedex|nasa|po box)"

    Return Regex.Replace(s, Pattern, MatchEval, RegexOptions.IgnoreCase)

End Function

Public Function RegexReplace(ByVal m As Match) As String
    Select Case LCase(m.Groups("f1").Value)
        Case "fedex"
            Return "FedEx"
        Case "nasa"
            Return "NASA"
        Case "po box"
            Return "PO BOX"
    End Select
End Function 
```

上面的代码适用于固定值，但不知道如何使用上面的代码来匹配运行时添加的值，如 db 到 Db。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:46:40.953

我猜，这里唯一需要 Regex 的就是 IgnoreCase 选项。如果是这样，那么我建议根本不要使用正则表达式。请改用字符串功能：

```
Dim input As String = "fEDeX"
Dim pattern As String = "fedex"
Dim replacement As String = "FedEx"

Dim result As String

result = input.ToLowerInvariant().Replace(pattern, replacement) 
```

但是，如果您仍然需要正则表达式，那么这应该可以工作：

```
result = Regex.Replace(input, pattern, replacement, RegexOptions.IgnoreCase) 
```

例子：

```
Sub Main()
  Dim replacements As New Dictionary(Of String, String)()
  replacements.Add("fedex", "FedEx")
  replacements.Add("nasa", "NASA")
  replacements.Add("po box", "PO BOX")

  Dim result As String = Replace("fedex, nAsA, po box, etc", replacements)
End Sub

Private Function Replace(ByVal input As String, ByVal replacements As Dictionary(Of String, String)) As String
  For Each item In replacements
    input = Regex.Replace(input, item.Key, item.Value, RegexOptions.IgnoreCase)
  Next

  Return input
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:42:54.497

通过使用 List 找到了解决方案，并对 Anton Kedrov 建议的字典对象进行了性能测试，这两种方法都需要几乎相同的时间才能完成，但我不知道字典方法对于更长的替换列表是否好，因为它循环遍历所有列表以查找要替换的匹配条目。

我感谢大家的建议和建议。

```
Sub Main()
    Dim lst As New List(Of String)

    lst.Add("NASA")
    lst.Add("FedEx")
    lst.Add("PO BOX")

    MsgBox(FindReplace("this is testing fedex naSa PO box"))
End Sub

Public Function FindReplace(ByVal s As String) As String
    Dim Pattern As String = "(?<f1>fedex|nasa|po box)"
    Dim MatchEval As New MatchEvaluator(AddressOf RegexReplace)
    Return Regex.Replace(s, Pattern, MatchEval, RegexOptions.IgnoreCase)

End Function

Public Function RegexReplace(ByVal m As Match) As String
    Dim Found As String
    Found = lst.Find(Function(value As String) LCase(value) = LCase(m.Groups("f1").Value))
    Return Found
End Function 
```

# ios - “AnyDo”滑动删除动画

> ID：15022356
> 
> 赞同：1
> 
> 时间：2013-02-22T10:46:21.410
> 
> 标签：ios, xcode, animation

![任何滑动以删除动画](../Images/ad804672f508ecf80284f5a080356b9a.png)

我正在尝试在滑动时实现表格视图单元格删除，就像在 AnyDo 应用程序中一样。有什么帮助？？？

我的代码：

我正在使用手势识别器

```
 - (UISwipeGestureRecognizer *)swipeRightRecognizer 
      { 
        if (!_swipeRightRecognizer)  
           {
            _swipeRightRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFrom:)];
            _swipeRightRecognizer.direction = UISwipeGestureRecognizerDirectionRight; 
       }  

        return _swipeRightRecognizer; 
       } 
```

向单元格添加手势：

```
 [cell.contentView addGestureRecognizer:self.leftGestureRecognizer]; 
```

处理滑动。

```
 - (void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer indexPath: (NSIndexPath *)index
       { 
       if (recognizer.direction == UISwipeGestureRecognizerDirectionLeft)
       { 
        //Table View deletion code.  + Line to be drawn on cell, move that cell to the bottom of the table with animaiton.
       } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:50:06.923

您可以使用[UISwipeGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)。

```
UISwipeGestureRecognizer *gRec = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(yourSelector:)];
[gRec setDirection:(UISwipeGestureRecognizerDirectionRight | UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionUp)];

[yourCell addGestureRecognizer:gRec]; 
```

在 yourSelector 方法中，您可以处理滑动：

```
- (void)yourSelector:(id)sender {
    NSLog(@"Handle swipe");
    UISwipeGestureRecognizer *gRec = sender;
    UITableViewCell *cell = [gRec view];

    UIImageView *line = [[UIImageView alloc] initWithFrame:CGRectMake(x,y,0,0)];
    [line setImage:[UIImage imageNamed:@"line.png"]];
    [UIView animateWithDuration:0.3 animation:^ (void) {
        [cell addSubview:line];
        [line setFrame:CGRectMake(x,y,320,5];
    } completion:nil];
} 
```

编辑：我添加了该行的代码，但我现在无法尝试。但是，它应该工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T10:58:48.313

Colin Eberhardt 写了一篇很棒的教程，介绍[如何制作像 Clear 一样的手势驱动的待办事项列表应用程序](http://www.raywenderlich.com/21842/how-to-make-a-gesture-driven-to-do-list-app-part-13)。还实现了滑动删除功能。

# objective-c - 用于objective-c的Gmail API？

> ID：15022357
> 
> 赞同：1
> 
> 时间：2013-02-22T10:46:24.770
> 
> 标签：objective-c, cocoa, api, gmail

据我了解，从 iphone 应用程序读取电子邮件我可以使用 IMAP 和 OAuth 发送 SMTP。但是，如果我想让我的应用程序访问 Gmail 标签或 gmail 必须提供的其他功能怎么办。那可能吗？MailBox 等其他应用程序正在使用哪些其他应用程序？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:07:16.613

谷歌提供 IMAP 扩展来做你想做的事。不过，您必须创建自己的 Objective-C 包装器/解析器才能使用这些扩展。

参考：[https ://developers.google.com/google-apps/gmail/imap_extensions](https://developers.google.com/google-apps/gmail/imap_extensions)

# vba - 7zip cmd 行版本：如何将每个文件从批处理文件压缩到单独的存档中

> ID：15022359
> 
> 赞同：0
> 
> 时间：2013-02-22T10:46:27.827
> 
> 标签：vba, cmd, 7zip

我有以下命令：

```
for %f in (*.txt) do "C:\WINDOWS\7za.exe" a -t7z "%f.7z" "%f" 
```

我从 vba 脚本发送到 cmdprompt。这可行，但现在我必须包含要在其上执行压缩的文件夹的路径。我这样做：

```
for %f in (usebackq "C:\Bob\WithBlank\NeuerOrdner3\" *.txt) do "C:\WINDOWS\7za.exe" a -t7z "%f.7z" "%f" 
```

为什么我得到一个包含所有 *.txt 文件的单个 zip 文件，而不是每个 txt 文件一个 zip？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:18:00.957

我不知道为什么您的第二个命令行将所有文件放入一个存档中，但`usebackq`不属于括号内。这应该有效：

```
for %f in ("C:\Bob\WithBlank\NeuerOrdner3\*.txt") do (
  "C:\WINDOWS\7za.exe" a -t7z "%~dpnf.7z" "%~ff"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-29T14:34:00.967

从 .BAT 文件运行它：

```
for %%a in (*.xml) do "\Program Files\7-Zip\7z.exe" a "%%~na.7z" "%%a" 
```

7z 文件将与原始文件同名

# c# - 构建 DataGridViewRow 并添加到 DataTable

> ID：15022362
> 
> 赞同：0
> 
> 时间：2013-02-22T10:46:47.763
> 
> 标签：c#, .net, winforms, datagridview, datagridviewrow

我正在尝试从 2 个不同的数据源以编程方式构建 DataGrid。我有一个列表和一个数据网格。问题不在于我的数据处理，而在于 DataGridViewRow 对象的值。这是我的代码：

```
 protected void buildGrid()
    {
        dgResults.Columns.Add( "sku", "SKU" );
        dgResults.Columns.Add( "itemID", "Item ID" );
        dgResults.Columns.Add( "productName", "Product Name" );
        dgResults.Columns.Add( "eBayQty", "eBay Qty" );
        dgResults.Columns.Add( "stockQty", "Stock Qty" );
        dgResults.Columns.Add( "difference", "Difference" );

        //Add the eBayItem data to the table
        foreach ( string[] eBayItem in ebayItems )
        {
            string SKU = eBayItem[1].ToString();
            int eBayQty = Convert.ToInt32(eBayItem[2]);
            string ProductName = "";
            int stockQty = 0;
            int qtyDifference = 0;

            DataRow[] rows = dbData.Select( "sku ='" + SKU + "'" );
            if (rows.Length == 1) {
                stockQty = Convert.ToInt32( rows[0]["quantity"] );
                ProductName = rows[0]["ProductName"].ToString();
            }
            qtyDifference = stockQty - eBayQty;

            DataGridViewRow dgvr = new DataGridViewRow();
            dgvr.SetValues( SKU, eBayItem[0].ToString(), ProductName, eBayQty, stockQty, qtyDifference );

            if ( qtyDifference != 0 || eBayQty > stockQty )
            {
                dgvr.DefaultCellStyle.BackColor = System.Drawing.Color.Red;
                dgvr.DefaultCellStyle.ForeColor = System.Drawing.Color.White;
            }
            else if ( stockQty > eBayQty )
                dgvr.DefaultCellStyle.BackColor = System.Drawing.Color.LightGoldenrodYellow;
            else
                dgvr.DefaultCellStyle.BackColor = System.Drawing.Color.GreenYellow;

            dgResults.Rows.Add(dgvr);
        }
    } 
```

这些行正在添加到 DataGrid 并且它们被适当地着色，但是行中的每个单元格都不包含数据？我最终得到的只是几个设置了背景属性的空白行。

有人有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:54:48.300

尝试在 DataGridViewRow 上使用 BeginEdit 和 EndEdit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:00:37.943

这是我对执行此类操作的解决方案的看法。

出于演示目的，我构建了一个 EbayItem 类：-

```
public class EbayItem
    {

        public EbayItem()
        {

        }

        public EbayItem(string sku, int id, string product, int ebayqty, int stockqty)
        {
            SKU = sku;
            ID = id;
            ProductName = product;
            ebayQty = ebayqty;
            stockQty = stockqty;

        }
        public string SKU { get; set; }
        public int ID { get; set; }
        public string ProductName { get; set; }
        public int ebayQty { get; set; }
        public int stockQty { get; set; }
        public int difference
        {

            get { return stockQty - ebayQty; }
            set { difference =  value; }
        }

    } 
```

在 Windows Form(Form1_Load) 中，我创建了一些测试条目并将它们添加到 List 对象中。最后一个条目看起来要购买 2 个手榴弹，但库存为零：-

```
List<EbayItem> Inventory = new List<EbayItem>();

Inventory.Add(new EbayItem("SKU1", 1, "Ski-Mask", 1, 10));
Inventory.Add(new EbayItem("SKU2", 2, "Shotgun", 1, 10));
Inventory.Add(new EbayItem("SKU3", 3, "Rounds", 5, 10));
Inventory.Add(new EbayItem("SKU4", 4, "Grenade", 2, 0)); 
```

我将创建一个 BindingSource 并用我的 Inventory 填充它，而不是手动向我的 DataGridView 添加行：-

```
BindingSource bs = new BindingSource(Inventory, null); 
```

接下来，为我的 DGV 分配数据源，将其设置为 Binding 对象。这意味着对列表对象所做的任何更改都会自动波及 DGV：-

```
dataGridView1.DataSource = bs; 
```

现在剩下的就是利用 DGV 的 CellFormatting 事件句柄。我用它来突出显示库存差异为零或更少的任何行：-

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {
            int colIndex = e.ColumnIndex;
            int rowIndex = e.RowIndex;

            if (rowIndex >= 0 && colIndex >= 0)
            {
                DataGridViewRow theRow = dataGridView1.Rows[rowIndex];

                int difference = (int)theRow.Cells[5].Value;

                if (difference <= 0)
                {
                    theRow.DefaultCellStyle.BackColor = System.Drawing.Color.Red;
                    theRow.DefaultCellStyle.ForeColor = System.Drawing.Color.White;
                }
            }

        } 
```

希望这可以帮助。

# mod-rewrite - 重定向不适用于匹配我的网址中的模式

> ID：15022363
> 
> 赞同：0
> 
> 时间：2013-02-22T10:46:54.220
> 
> 标签：mod-rewrite

我正在尝试重定向网址模式

```
http://style.com/style-blog/entry/what-im-looking-for-in-my-next-15-inch-laptop 
```

至

```
http://style.com/blog/entry/what-im-looking-for-in-my-next-15-inch-laptop 
```

我试图在这里匹配“风格博客”

```
^style-blog/([A-Za-z0-9-]+)$ or ^style-blog/$ 
```

我需要第一个版本来获取 url 的任何剩余部分以附加到新的 url here

```
 RewriteRule    ^style-blog/([A-Za-z0-9-]+)$    http://style.com/you-blog/$1    [NC,L] 
```

感谢您指出我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:32:08.367

```
RewriteRule ^style-blog/(.*)/(.*)$ http://%{HTTP_HOST}/you-blog/$1/$2 [R=301,L] 
```

这似乎有效，但多亏了你们，你们让我走上了正确的道路，可能你们没有足够的信息来解决它。它尚未经过全面测试，可能无法处理任何额外的“文件夹”（斜线之间的位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:00:09.857

我想你可能只是错过了一个`/`：

```
RewriteRule  ^/style-(blog/[A-Za-z0-9-]+)$  http://style-review.com/$2 
```

使用通配符：

```
RewriteRule  ^/style-(blog/.*)$  http://style-review.com/$2 
```

你甚至需要完整的网址吗？

```
RewriteRule  ^/style-(blog/.*)$  /$2 
```

`^`和是`$`必需的吗？难道只有这行不通吗？

```
RewriteRule   style-blog/   blog/ 
```

# symfony - 可以逐字逐句地用于包含的内容吗？

> ID：15022364
> 
> 赞同：2
> 
> 时间：2013-02-22T10:46:55.410
> 
> 标签：symfony, twig

我在客户端和服务器之间共享模板，并希望在脚本标记内输出原始模板，这可以逐字记录。

[http://twig.sensiolabs.org/doc/tags/verbatim.html](http://twig.sensiolabs.org/doc/tags/verbatim.html)

但是，如果这可以作为过滤器应用到包含中会更好，但它似乎不可能？

我是 Twig 的新手，如果我错过了明显的功能，请原谅。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-29T16:49:04.580

我遇到了同样的问题，这个页面出现在我的搜索结果中。自从回答了这个问题后，Twig 开发人员将这个功能添加到了库中。我想我应该为未来的搜索者添加一些细节。

包含原始文本（也就是使用与 Twig 相同语法的客户端模板）的功能是通过该`source`函数完成的。

IE：`{{ source('path/to/template.html.twig') }}`

[http://twig.sensiolabs.org/doc/functions/source.html](http://twig.sensiolabs.org/doc/functions/source.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T14:17:48.877

我也在寻找类似的东西，因为我正在使用 Twig.js 和 Symfony 进行一些客户端模板。我试图在服务器端和客户端代码之间共享模板，所以我需要在某些情况下解析内容并在其他情况下逐字处理，这被证明有点棘手。

我找不到 Twig 内置的任何东西来帮助解决这个问题，但幸运的是，扩展 Twig 很容易得到你想要的东西。我将它实现为一个函数，但你也可以将它作为一个过滤器来实现。

服务.yml

```
statsidekick.twig.include_as_template_extension:
        class: StatSidekick\AnalysisBundle\Twig\IncludeAsTemplateExtension
        tags:
            - { name: twig.extension } 
```

IncludeAsTemplateExtension.php

```
<?php
namespace StatSidekick\AnalysisBundle\Twig;

use Twig_Environment;
use Twig_Extension;

class IncludeAsTemplateExtension extends Twig_Extension {

    /**
     * Returns a list of global functions to add to the existing list.
     *
     * @return array An array of global functions
     */
    public function getFunctions() {
        return array(
            new \Twig_SimpleFunction( 'include_as_template', array( $this, 'includeAsTemplate' ), array( 'needs_environment' => true, 'is_safe' => array( 'html' ) ) )
        );
    }

    function includeAsTemplate( Twig_Environment $env, $location, $id ) {
        $contents = $env->getLoader()->getSource( $location );
        return "<script data-template-id=\"{$id}\" type=\"text/x-twig-template\">{$contents}</script>";
    }

    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName() {
        return 'include_as_template_extension';
    }
} 
```

Twig 文件中的用法

```
{{ include_as_template( 'Your:Template:here.html.twig', 'template-id' ) }} 
```

如果你有这样的 Twig 文件：

```
<ul class="message-list">
{% for message in messages %}
    <li>{{ message }}</li>
{% endfor %}
</ul> 
```

输出将是这样的：

```
<script data-template-id="template-id" type="text/x-twig-template">
    <ul class="message-list">
    {% for message in messages %}
        <li>{{ message }}</li>
    {% endfor %}
    </ul>
</script> 
```

这项工作源自 Kari Söderholm 的回答[here](https://stackoverflow.com/a/12180568/2065822)。希望有帮助！

# perl - 将 XML 文件拆分为多个 XML 文件

> ID：15022371
> 
> 赞同：0
> 
> 时间：2013-02-22T10:47:26.730
> 
> 标签：perl, wsman

我想将 WSMAN 给出的 XML 输出分解为多个 XML 文件，以便解析输出。

WSMAN 给我的输出如下，基本上有两个不同的 XML 文件，每个文件都有自己的根节点：

```
<?xml version="1.0" encoding="UTF-8"?>
  <s:Body>
    <wsen:PullResponse>
      <wsen:Items>
        <n1:DCIM_SoftwareIdentity>
          <n1:ComponentType>BIOS</n1:ComponentType>
          <n1:InstanceID>DCIM:CURRENT#741__BIOS.Setup.1-1</n1:InstanceID>
          <n1:VersionString>1.3.6</n1:VersionString>
        </n1:DCIM_SoftwareIdentity>
      </wsen:Items>
    </wsen:PullResponse>
  </s:Body>
<?xml version="1.0" encoding="UTF-8"?>
  <s:Body>
    <wsen:PullResponse>
      <wsen:Items>
        <n1:DCIM_SoftwareIdentity>
          <n1:ComponentType>BIOS</n1:ComponentType>
          <n1:InstanceID>DCIM:INSTALLED#741__BIOS.Setup.1-1</n1:InstanceID>
          <n1:VersionString>1.3.6</n1:VersionString>
        </n1:DCIM_SoftwareIdentity>
      </wsen:Items>
    </wsen:PullResponse>
  </s:Body> 
```

我无法解析上面的输出，因为上面的输出包含 2 个根元素，这些元素在[XML](http://perl-xml.sourceforge.net/faq/#multiple_roots)`XML::Simple`方面是“垃圾”

**问题/陈述：**

我想将以上输出分成两个不同的 XML 文件，每个文件都包含自己的根元素，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
  <s:Body>
    <wsen:PullResponse>
      <wsen:Items>
        <n1:DCIM_SoftwareIdentity>
          <n1:ComponentType>BIOS</n1:ComponentType>
          <n1:InstanceID>DCIM:CURRENT#741__BIOS.Setup.1-1</n1:InstanceID>
          <n1:VersionString>1.3.6</n1:VersionString>
        </n1:DCIM_SoftwareIdentity>
      </wsen:Items>
    </wsen:PullResponse>
  </s:Body> 
```

……

```
<?xml version="1.0" encoding="UTF-8"?>
  <s:Body>
    <wsen:PullResponse>
      <wsen:Items>
        <n1:DCIM_SoftwareIdentity>
          <n1:ComponentType>BIOS</n1:ComponentType>
          <n1:InstanceID>DCIM:INSTALLED#741__BIOS.Setup.1-1</n1:InstanceID>
          <n1:VersionString>1.3.6</n1:VersionString>
        </n1:DCIM_SoftwareIdentity>
      </wsen:Items>
    </wsen:PullResponse>
  </s:Body> 
```

**我的逻辑：**

1）逐行解析输出

2）如果遇到`?xml version`模式，则创建一个新的 XML 文件并将`?xml version`行和更多行写入这个新文件，直到再次遇到`?xml version`模式。

3）每次遇到`?xml version`模式时都按照步骤2

这是我的代码：

```
#!/usr/bin/perl -w
use strict;
use XML::Simple;
use Data::Dumper;

my $counter = 0;
my $fileName;

while (my $line = <DATA>)
{
    if ( $line =~ /\?xml version/ )
    {   
        $counter++;
        print "Creating the BIOS file \n";
        $fileName = "BIOS"."_".$counter;
    }   
    open (my $sub_xml_file, ">" , $fileName) or die "Canot create $fileName: $!\n";
    print $sub_xml_file $line;
}

__DATA__
## omitting this part as this contains the XML info listed above. 
```

现在，我的脚本确实创建了文件`BIOS_1`，`BIOS_2`但它只将上述 XML 输出的最后一行写入它：

```
# cat BIOS_1
  </s:Body>
# cat BIOS_2
  </s:Body> 
```

你能帮我修复我的脚本以创建两个不同的 XML 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:58:41.417

您永远不会`$line`为将来的循环传递保留。

将所有内容加载到内存方法中：

```
my $count;
my $file; { local $/; $file = <>; }
for my $xml (split /^(?=<\?xml)/m, $file) {
   my $fn = sprintf("BIOS_%d.xml", ++$count);
   open(my $fh, '>', $fn) or die $!;
   print $fh $xml;
} 
```

一次一行的方法：

```
my $fh;
my $count;
while (<>) {
   if (/^<\?xml/) {
      my $fn = sprintf("BIOS_%d.xml", ++$count);
      open($fh, '>', $fn) or die $!;
   }

   print $fh $_;
} 
```

# compilation - 使用动态库

> ID：15022372
> 
> 赞同：1
> 
> 时间：2013-02-22T10:47:26.797
> 
> 标签：compilation, linker, dynamic-library

当我想编译一个使用动态库的程序时，我是否必须安装（即复制到特定位置，例如 /usr/share/lib）这个库？或者是否可以，如果我将这个库放在某个地方的任何地方，然后在链接期间我将链接器指向它，例如'-L ./thelibfolder'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:12:25.287

> 我是否必须安装（即复制到特定位置，例如 /usr/share/lib）这个库？

不。

对于 UNIX 共享库，您需要安排两件事：

*   在链接主要可执行文件时，您必须使静态链接器知道该库。通常这是通过将`-L/path/to/directory -lfoo`链接标志添加到链接行来实现的。
*   您还必须进行运行时加载程序搜索`/path/to/directory`。这是特定于系统的。在许多系统上，设置`LD_LIBRARY_PATH`环境变量可以达到预期的效果，尽管这通常不是首选方法。另一种方法是将此路径编码到应用程序本身，例如在 Linux 上将添加`-Wl,-rpath=/path/to/directory`到应用程序链接行。

# visual-studio-2010 - Visual Studio 2010 中配置管理器的用途是什么？

> ID：15022378
> 
> 赞同：1
> 
> 时间：2013-02-22T10:47:49.043
> 
> 标签：visual-studio-2010

我有点不确定配置管理器的目的是什么。为了避免混淆，这就是我的意思

![在此处输入图像描述](../Images/0a4305f81168b6f1e3b56d57eb5be775.png)

特别是我很想知道配置列的重点是什么。为什么我可以针对 DataAccess 将调试配置设置为在顶部时为我设置了 UAT 的活动解决方案配置进行调试？这一切到底意味着什么？什么是活动解决方案配置，什么是配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T17:56:44.100

“解决方案配置”是一组用于编译项目的整体设置。基本上，您可以为不同的配置设置不同的项目设置，最常见的组合是 Release 和 Debug，例如，Release 开启了优化，Debug 没有优化并导出了调试符号。

您可以为不同的平台设置不同的配置的原因是有时您希望更细化地分解事物。假设您正在测试一个发布版本，并且除了 [已编辑]Domain 项目之外一切正常。您可以将该项目设置为调试，使用关联的符号和缺乏优化，然后设置断点，而其余的运行优化的代码。

更清晰？

# php - 如何将我的 html5 页面更改为 php？

> ID：15022379
> 
> 赞同：-2
> 
> 时间：2013-02-22T10:47:53.207
> 
> 标签：php, html

```
<!doctype html>
<html lang="en">
<head>

<meta charset="utf-8" />
<title>Title</title>

</head>
<body>

</body>

</html> 
```

如果这是我的网站，index.html。如何将其更改为 php 文件，我只是从 index.html 更改为 index.php 还是需要在 html 标记之前更改某些内容。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:49:34.337

只需将 index.html 更改为 index.php。只有在需要执行 PHP 代码时才需要添加 PHP 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:53:52.093

是的，只需将其更改为 .php，如果您运行并配置了标准 php 服务器，它将起作用。

任何现代网站都将具有以下组件：

1.  面向对象机制。
2.  模板系统。
3.  对象缓存。
4.  浏览器缓存。

您应该阅读以下资源以提高您的 php 技能：

[http://www.net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/](http://www.net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/)

[https://stackoverflow.com/questions/3012315/php-security-best-practices](https://stackoverflow.com/questions/3012315/php-security-best-practices)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:50:06.373

如果您的服务器以默认方式配置，则将扩展名更改为`.php`将使 PHP 解释器解析文件。

# tsql - SSRS 参数分组

> ID：15022387
> 
> 赞同：1
> 
> 时间：2013-02-22T10:48:03.820
> 
> 标签：tsql, parameters, ssrs-2008

我在 SSRS 2008 中创建了 2 个报告。我现在计划将这些报告合并为一个，并允许用户通过下拉选项选择报告类型。

这些报告带回相同的数据，但分组方式不同。

这就是问题所在，我不知道如何根据报告类型更改分组。

基本上我想这样做

> ```
> when Parameters!Report_Type.Value = "D" group by Fields!txiii_commodity.Value else no group 
> ```

我已经尝试过 iif 和 switch，但从未得到想要的结果。

有人可以帮忙吗。

提前致谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:25:10.463

我用一个非常简单的例子做到了这一点。样本数据集：

![在此处输入图像描述](../Images/ccc93d43cc2052e238fe81b19f3f30a3.png)

使用一组创建报告：

![在此处输入图像描述](../Images/c31541de6b3330c7918ceed7e9bb3d91.png)

按表达式分组：

```
=IIf(Parameters!Report_Type.Value = "D", Fields!txiii_commodity.Value, "Ungrouped") 
```

还使用它来显示报告中的*组*列。

结果：

![在此处输入图像描述](../Images/8a55a2fca9d7d580cff63ba830865364.png)

![在此处输入图像描述](../Images/246625b8432fd118e2a0a3b61926fd23.png)

# apache-flex - Flex 移动应用程序中的 Spark 列表：下拉刷新 - 带有测试代码和屏幕截图

> ID：15022388
> 
> 赞同：0
> 
> 时间：2013-02-22T10:48:05.293
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6, flex-mobile

尝试实现“下拉​​刷新”我创建了以下简单的测试代码（请添加到一个新的 Flash Builder 项目，使用“空白”模板，即没有导航栏）：

**截屏：**

![在此处输入图像描述](../Images/a7d99fc022087aa054288401a3b346a8.png)

**测试拉动.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    applicationComplete="init()">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.PropertyChangeEvent;

            private static const PADDING:uint = 20;

            [Bindable]
            private var _ac:ArrayCollection = new ArrayCollection();

            private function init():void {
                updateList();
                _list.scroller.viewport.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, handleScroll);
            }

            private function updateList():void {
                _ac.source = new Array();
                for (var i:int = 0; i < 42; i++) {
                    _ac.source.push(Math.random());
                }
                _ac.refresh();
            }

            private function handleScroll(e:PropertyChangeEvent):void {
                if (e.source == e.target && e.property == "verticalScrollPosition") {
                    trace(e.property, ': ', e.oldValue, ' -> ', e.newValue);
                    if (e.newValue < -2 * PADDING && 
                        e.oldValue >= -2 * PADDING) {
                        _hint.visible = true;
                        setTimeout(hideHint, 2000);
                        //updateList();
                    }
                }
            }

            private function hideHint():void {
                _hint.visible = false;
            }
        ]]>
    </fx:Script>

    <s:List id="_list"
            dataProvider="{_ac}"
            width="100%" 
            height="100%" />

    <s:Label id="_hint"
             text="Pull down to refresh..."
             width="100%"
             textAlign="center"
             fontStyle="italic"
             backgroundColor="#FFFFCC"
             paddingTop="{PADDING}"
             paddingBottom="{PADDING}"
             visible="false" />
</s:Application> 
```

这似乎运作良好，并且`_hint`每次拉动只切换一次可见性（我已经通过跟踪验证了这一点）。

但是，当我取消注释`updateList()`上面的调用（模拟从 Web 服务器获取数据）时 - 一切都中断了，`hint.visible=true`正在一次又一次地设置并且`_list`闪烁。

有没有人有一个建议，如何解决我*可怜的人的刷新*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:22:25.943

我最终得到了这个基于[Michaël CHAIZE 博客](http://www.riagora.com/2011/05/pull-down-to-refresh)条目的解决方案：

![在此处输入图像描述](../Images/5814ce675dd228964887319b305c8fe4.png)

**TestPull.mxml**（添加到新的 Flex Mobile 项目）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    applicationComplete="init()">

    <fx:Declarations>
        <s:ArrayCollection id="_ac"/>
        <s:Fade id="_fadeIn" duration="500" alphaFrom="0" alphaTo="1" />
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.events.PropertyChangeEvent;

            private static const PADDING:uint = 20;

            private function init():void {
                updateList();
                _list.dataGroup.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, handleScroll);
            }

            private function handleScroll(event:PropertyChangeEvent):void {
                if (_busy.visible || 
                    event.source != event.target || 
                    event.property != 'verticalScrollPosition') {
                    return;
                }

                if (event.newValue < -3 * PADDING && 
                    event.oldValue >= -3 * PADDING) {
                    _hintDown.visible = true;
                    _hintUp.visible = false;
                    _fadeIn.play([_hintDown]);
                } else if (event.newValue < -6 * PADDING && 
                           event.oldValue >= -6 * PADDING) {
                    _hintDown.visible = false;
                    _hintUp.visible = true;
                    _fadeIn.play([_hintUp]);
                } else if (event.newValue >= -6 * PADDING && 
                           event.oldValue < -6 * PADDING) {
                    _hintDown.visible = true;
                    _hintUp.visible = false;
                    _fadeIn.play([_hintDown]);
                } else if (event.newValue >= -3 * PADDING && 
                           event.oldValue < -3 * PADDING) {
                    _hintDown.visible = false;
                    _hintUp.visible = false;
                }
            }

            private function startLoading(event:MouseEvent):void {
                if (_hintUp.visible) {
                    _busy.includeInLayout = _busy.visible = true;
                    setTimeout(updateList, 5000);
                }
                _hintDown.visible = false;
                _hintUp.visible = false;
            }

            private function updateList():void {
                _ac.source = new Array();
                for (var i:int = 0; i < 42; i++) {
                    _ac.source.push(Math.random());
                }
                _ac.refresh();
                _busy.includeInLayout = _busy.visible = false;
            }

        ]]>
    </fx:Script>

    <s:VGroup width="100%">
        <s:HGroup id="_busy"
                  verticalAlign="baseline"
                  includeInLayout="false" 
                  visible="false">
            <s:BusyIndicator />
            <s:Label text="Loading data..." />
        </s:HGroup>

        <s:List id="_list"
                width="100%"
                contentBackgroundColor="#FFFFFF"
                dataProvider="{_ac}"
                mouseUp="startLoading(event)" />
    </s:VGroup>

    <s:Label id="_hintDown"
             text="↓ Pull down to refresh... ↓"
             width="100%"
             textAlign="center"
             paddingTop="{PADDING}"
             visible="false" />

    <s:Label id="_hintUp"
             text="↑ Release to refresh... ↑"
             width="100%"
             textAlign="center"
             paddingTop="{PADDING}"
             visible="false" />

</s:Application> 
```

# sql - oracle SQL中的if-elseif-else“条件”

> ID：15022392
> 
> 赞同：7
> 
> 时间：2013-02-22T10:48:12.973
> 
> 标签：sql, oracle

我想知道是否有可能实现类似的目标

'if-elseif-else' 条件，我知道有一个 'case-when-then-else' 但它一次只检查一个条件（如果我理解正确的话）。如何在 Oracle sql 中实现 if-elseif-else 场景

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-22T10:52:25.857

您可以使用 if/else 这样的 case 语句。

```
SELECT ename, CASE WHEN sal = 1000 THEN 'Minimum wage'
                   WHEN sal > 1000 THEN 'Over paid'
                   ELSE 'Under paid'
              END AS "Salary Status"
FROM   emp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:53:56.433

> 我知道有一个“case-when-then-else”，但它一次只检查一个条件

您所描述的是一个简单的案例。Oracle 有两种案例类型：简单和搜索（有关更多信息，请参见此处[http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)）

简单的

```
case A
  when 1 then 'foo'
  when 2 then 'bar'
  else ..
end 
```

已搜索

```
case
  when A=1 and B='A' then 'foo'
  when D + C =1 and B !='A' then 'Bar'
  else ..
end 
```

您可能想使用搜索过的案例。您可以在 PL/SQL 或 SQL 中使用它们。例如在 SQL 中

```
select ..
  from table
 where case
         when A=1 and B='A' then 'foo'
         when D + C =1 and B !='A' then 'Bar'
         else ..
       end = 'foo' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:51:46.653

留意“在 Oracle 中解码”

```
decode( expression , search , result [, search , result]... [, default] ) 
```

它类似于“if-elseif-else”

参考：[http ://www.techonthenet.com/oracle/functions/decode.php](http://www.techonthenet.com/oracle/functions/decode.php)

**注意：**它只做相等检查..

# c# - Int.Parse 和排序

> ID：15022393
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:48:14.707
> 
> 标签：c#

我有以下代码..

```
var strings = new[] { 
"FD1","FD5","FD10","FD102","FD105","FD10","FD32","FD80", "FD31", "FD21", "FDnon"
};
        strings = strings.Select(str => new
        {
            str,
            num = int.Parse(String.Concat(str.Trim('F', 'D'))),
        })
        .OrderBy(x => x.num)
        .Select(x => x.str)
        .ToArray(); 
```

但是，当它到达“FDnon”时会失败，因为其中没有数字，

如何让它与顶部排序的“FDnon”一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:11:33.720

```
var result = strings.OrderBy(x =>
                         {
                             int y = int.MinValue;
                             int.TryParse(x.Substring(2), out y);

                             return y;
                         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:52:25.537

如果您想要自定义排序，请提供您的自定义 SortMethod

```
var sorted = strings
.OrderBy(SpecialSort)
.ToList();

public static int SpecialSort(string value)
{
    int sortOrder = 0;
    string numberPart = value.Trim('F', 'D');
    int.TryParse(numberPart, out sortOrder);
    return sortOrder;
} 
```

编辑：更改解决方案以考虑字符串中数字的排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:54:03.823

您需要一个更复杂的解析来转换`FDnon`为最后排序的整数值（在这种情况下`Int32.MaxValue`会这样做）。

就像是：

```
var res = strings.Select(s => {
            var numPart = s.Trim('F', 'D');
            var i;
            if (!Int32.TryParse(numPart, out i)) {
               i = Int32.MaxValue;
            }
            return new {
              str = s,
              num = i
            };
          }.OrderBy … 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:51:35.447

如果您希望 FDnon 显示在顶部，您可以使用以下内容：

```
strings = strings.Select(str => new
    {
        str,
        num = str=="FDnon" ? Int32.MaxValue : Int32.Parse(String.Concat(str.Trim('F', 'D')))
    })
    .OrderBy(x => x.num)
    .Select(x => x.str)
    .ToArray(); 
```

此代码只是跳过`FDnon`转换。如果您想允许其他值，您应该更具体地说明您将接受什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T10:56:50.997

如果字符串总是以两个字母开头，您也可以使用`Substring(2)`. 要检查是否有数字部分，您可以使用`Enumerable.All(Char.IsDigit)`（假设所有字符都是前两个字母之后的数字）：

```
strings = strings.Select(str => new
{
    str,
    num = str.Substring(2).All(Char.IsDigit) ? int.Parse(str.Substring(2)) : int.MinValue
})
.OrderBy(x => x.num)
.Select(x => x.str)
.ToArray(); 
```

[**演示**](http://ideone.com/zs5wov)

# akka - 如何使用 Akka 在 SIGTERM 上进行自定义关闭？

> ID：15022398
> 
> 赞同：7
> 
> 时间：2013-02-22T10:48:20.697
> 
> 标签：akka

默认情况下，Akka 在收到`SIGTERM`. 如何在关闭 akka 系统之前覆盖此行为以执行我的自定义关闭逻辑？我已经在演员中实现了这个逻辑，使用特殊的优雅停止消息 - 我只需要在`SIGTERM`收到时调用该逻辑。

还是我必须使用其他方式关闭应用程序？这也是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:18:10.660

你可以`sys.shutdownHookThread`像这样使用：

```
def main(args: Array[String]) {
  ... initialization code ...
  sys.shutdownHookThread {
    println "Shutting down ..."
    shutdownHandler ! DoSomething
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:49:57.277

这适合吗： http: [//doc.akka.io/api/akka/2.1.0/#akka.actor.ActorSystem](http://doc.akka.io/api/akka/2.1.0/#akka.actor.ActorSystem)

```
抽象定义
registerOnTermination（代码：Runnable）：单位
注册一个代码块（回调）以在 ActorSystem.shutdown 发出并且该actor系统中的所有actor都停止后运行。多次调用该方法可以注册多个代码块。回调将按注册的相反顺序依次运行，即最后一次注册首先运行。
抛出的异常
一个
如果系统已关闭或已启动关闭，则出现 RejectedExecutionException。

抽象定义
registerOnTermination[T]（代码：⇒ T）：单位
注册一个代码块（回调）以在 ActorSystem.shutdown 发出并且该actor系统中的所有actor都停止后运行。多次调用该方法可以注册多个代码块。回调将按注册的相反顺序依次运行，即最后一次注册首先运行。
抛出的异常
一个
如果系统已关闭或已启动关闭，则出现 RejectedExecutionException。

```

# java - 春天。将 pdf 保存到磁盘位置

> ID：15022402
> 
> 赞同：1
> 
> 时间：2013-02-22T10:48:23.830
> 
> 标签：java, spring, jasper-reports

为了在磁盘上下载 PDF

```
<bean id="pdfReport"
       class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView"
        p:url="classpath:tree-template.jrxml"
        p:reportDataKey="datasource" 
        p:subReportUrls-ref="customSubReportUrls"
        p:subReportDataKeys-ref="customSubReportDatasource"
        p:exporterParameters-ref="exporterParameters"/>

    <util:map id="exporterParameters">
      <entry key="net.sf.jasperreports.engine.JRExporterParameter.OUTPUT_FILE_NAME" value="c://tmp//asd.pdf"/>      
</util:map> 
```

*我在jasper-views.xml*文件中指定了上述内容，但我的 pdf 正在生成但没有保存到类路径或我指定的路径中。

我在指定*jasper-views.xml*文件时错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:52:15.123

-ref`exporterParameters`设置错误，

从改变

```
p:exporterParameters-ref="exporterParam`enter code here`eters" 
```

至

```
p:exporterParameters-ref="exporterParameters" 
```

# http - Angular js 和 Laravel http 获取参数

> ID：15022403
> 
> 赞同：0
> 
> 时间：2013-02-22T10:48:24.170
> 
> 标签：http, routing, angularjs, laravel

我对 angularjs 完全陌生，我正在练习。

我有点坚持以下内容，我有一个加载用户详细信息的个人资料页面，我真的不知道如何显示它，问题是我卡在逻辑上。

我为它创建了 2 条路线

```
Route::get('/(:any)', array('as' => 'profile', 'uses' => 'user@profile'));
Route::get('/details/(:any)', array('as' => 'profile', 'uses' => 'user@details')); 
```

所以网址实际上看起来像这样：`http://mysite.com/username`

所以我的逻辑是这样的，这条路线

```
 Route::get('/(:any)', array('as' => 'profile', 'uses' => 'user@profile')); 
```

返回配置文件视图

这条路线将在 json 中获取用户数据

```
Route::get('/details/(:any)', array('as' => 'profile', 'uses' => 'user@details')); 
```

我坚持的是这个

我加载视图，`http://mysite.com/username`我得到个人资料页面，

Laravel 视图加载

```
public function get_profile($username = '')
    {
       return View::make('user.profile');
    } 
```

加载 json

```
 public function get_details($username = '')
    {
        $users = User::where_username($username)->get();

        return  Response::eloquent($users);
    } 
```

angularjs控制器

```
function profileCtrl($scope, $http) {
    //here get the url first segment somehow
    // and pass it to the get
    // example
    // urlSegment = username
    $http('details/' + username ).success(function(data){
        $scope.users = data;
        console.debug(data);
    });

} 
```

所以我的问题是，我这样做好吗，或者我完全没有走上正轨。有人可以给我看一个例子吗？

谢谢

**编辑**

更具体地说，我正在尝试使用 angularjs 和 laravel 创建一个宁静的 api，但我有点坚持。我不明白的是路由逻辑。

例子。

`mysite.com/username`，我需要建立什么类型的路由逻辑来获取数据？因为我在上面解释过，我为它创建了 2 条路线，我认为那不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:22:27.983

> 我正在尝试使用 angularjs 和 laravel 创建一个宁静的 api，但我有点坚持。我不明白的是路由逻辑。

Laravel 提供了许多方便的方法来创建一个 Restful API。需要注意的是，Laravel 是“restful api”，而 AngularJS 是客户端，它将使用 API 来显示结果（即作为用户前端）。

[Laravel 4 引用了“资源控制器”来帮助你构建一个 restful API](http://four.laravel.com/docs/controllers#restful-controllers)。使用这张图片，你可以看到控制器应该如何布局，以及每个命令具体需要做什么：

![在此处输入图像描述](../Images/fcb14622cc45c955ccfa87bfa90e3d7c.png)

只需将“照片”替换为“用户”，这就是控制器的布局方式。如果你使用 Laravel 4，你可以使用 Artisan 生成一个资源丰富的控制器：

```
php artisan controller:make UserController 
```

它将添加上面准备好的每个功能。

[Laravel 3 指的是“Restful Controllers”](http://laravel.com/docs/controllers#restful-controllers) ——但原理是一样的。

如果您有兴趣 - [Nettuts 有一个很棒的免费教程，介绍如何使用 Laravel 4 从头开始​​创建一个 Restful API](http://net.tutsplus.com/tutorials/php/laravel-4-a-start-at-a-restful-api/)。如果您遵循本教程 - 您将为您的用户类提供完整的 restful API。它比这个答案更详细。

对于 Laravel 4，您的路线将只是一行代码：

```
Route::resource('user', UserController); 
```

然后您将运行以下工匠命令

```
php artisan controller:make UserController
php composer.phar dump-autoload 
```

然后你的用户控制器就准备好了，所有的功能都搭建好了，你需要做的就是把一些基本的逻辑放进去。

编辑：[我刚刚找到了另一个进一步解释 Laravel 4 资源控制器的教程](https://tutsplus.com/lesson/resourceful-controllers/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:20:24.643

Angular 是一个仅在浏览器中运行的客户端框架。所以你根本无法用它创建一个宁静的 API。一个安静的 API 总是只在服务器上运行，所以[Laravel 应该为它工作](http://maxoffsky.com/code-blog/building-restful-api-in-laravel-start-here/)。

Angular 的使用方式是客户端从运行在服务器上的 restful API（使用[$http 模块](http://docs.angularjs.org/api/ng.$http)）请求 JSON 格式的内容，然后在客户端构建 HTML。看看[什么是 angularjs-routes 的点是什么？](https://stackoverflow.com/questions/13909003/what-is-the-point-of-angularjs-routes?rq=1)我也强烈推荐[官方教程](http://docs.angularjs.org/tutorial)。

# django - Django 命名空间错误

> ID：15022404
> 
> 赞同：0
> 
> 时间：2013-02-22T10:48:28.870
> 
> 标签：django

我设计了这个投票应用程序，我正在尝试将硬代码 url 转换为命名空间 url，但路径上有错误。

这是我的 index.html，你可以看到他们的硬编码 url 指向我的 URLconf。

```
{% if latest_poll_list %}
    <ul>
    {% for poll in latest_poll_list %}
        <li><a href="/polls/{{ poll.id }}/">{{ poll.question }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No polls are available.</p>
{% endif %} 
```

我的 myapp URLconf。

```
 from django.conf.urls import patterns, include, url
 from django.contrib import admin
 from django.conf import settings

 from django.conf.urls import patterns, include, url

 urlpatterns = patterns('myapp.views',
     url(r'^$', 'index', name="index"),
     url(r'^(?P<poll_id>\d+)/$', 'detail',name="detail"),
     url(r'^(?P<poll_id>\d+)/results/$', 'results', name="results"),
     url(r'^(?P<poll_id>\d+)/vote/$', 'vote', name="vote"),
 ) 
```

这是我的主要 URLconf。

```
 from django.conf.urls import patterns, include, url
 from django.contrib import admin
 from django.conf import settings

 admin.autodiscover()
 urlpatterns = patterns('',
     url(r'^polls/', include('myapp.urls', namespace='myapp')),                   
 ,
 ) 
```

我的观点是：

```
def detail(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('myapp/detail.html', {'poll': p},
context_instance=RequestContext(request)) 
```

我试图用 {% url detail poll.id %} 或 {% url myapp:detail poll.id %} 替换硬编码错误

但我收到了这个错误

```
 NoReverseMatch at /polls/

 Reverse for 'detail' with arguments '(5,)' and keyword arguments '{}' not found.

 Request Method:    GET
 Request URL:   http://127.0.0.1:8000/polls/
 Django Version:    1.4.3

 Exception Type:    NoReverseMatch
  Exception Value:  

 Reverse for 'detail' with arguments '(5,)' and keyword arguments '{}' not found.

  Error during template rendering

  In template C:\djcode\mysite\myapp\templates\myapp\index.html, error at line 4
  Reverse for 'detail' with arguments '(5,)' and keyword arguments '{}' not found.
  1     {% if latest_poll_list %}
  2     <ul>
  3     {% for poll in latest_poll_list %}
  4     <li><a href="{% url detail poll.id %}">{{ poll.question }}</a></li>
  5     {% endfor %}
  6     </ul>
  7     {% else %}
  8     <p>No polls are available.</p>
  9     {% endif %} 
```

如何将此硬编码的 URL 转换为命名空间，以便它可以指向 myapp URLconf 而不会出现任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:56:31.717

这样做的方式因用例而异。

您可以这样做，这可能是您的用例。

```
{% url detail poll.id %} 
```

url-tag 在名称`detail`和以下内容上匹配的位置`poll.id`

我们想在这里讨论的另一种方式是，如果您要拥有同一个应用程序的多个实例，那么您将不得不使用 url 命名空间。[在这里讨论](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)

主要的`urls.py`

```
url(r'^polls/', include('core.urls')), 
```

包括`urls.py`

```
urlpatterns = patterns('',
    url(r'^/(?P<polls_id>\d+)/$', 'core.views.polls_detail_view',name="poll_detail")
) 
```

模板

```
 <a href="{% url poll_detail 1 %}">To Poll Detail</a> 
```

`views.py`

```
def polls_detail_view(request, poll_detail):
     print "Hello Poll detail: %s" % (poll_detail) 
```

** 编辑 ** 在谷歌搜索这两个 SO 帖子后，解释了为什么 OP 的配置不可行。

[第一个 SO 帖子](https://stackoverflow.com/questions/13521172/django-url-when-urls-with-parameters-like-urlrfoo-parameter-incl)

[第二个 SO 帖子](https://stackoverflow.com/questions/13788062/django-url-parameters-before-include-url-with-namespace)

这些是 19 个月前的票。

** 编辑 **

# c# - Linq UNION 查询选择两个元素

> ID：15022405
> 
> 赞同：26
> 
> 时间：2013-02-22T10:48:35.163
> 
> 标签：c#, visual-studio-2010, linq

我想使用`LINQ`查询从我的数据库表中选择 2 个元素，我看到了一个使用`UNION`我没有太多经验的示例，但我认为这可能是我需要的，但我得到一个我无法修复的错误，我是不确定它是否可以修复。所以这是我的查询：

```
 IList<String> materialTypes = ((from tom in context.MaterialTypes
                                   where tom.IsActive == true
                                   select tom.Name)
                                   .Union(from tom in context.MaterialTypes
                                   where tom.IsActive == true
                                   select (tom.ID))).ToList(); 
```

这似乎是在抱怨试图在 with`UNION`上`IQueryable`使用`IEnumarebale`。我试图通过`ToString()`像这样添加来解决这个问题 -`(tom.ID).ToString`这导致清除错误下划线`Visual-Studio-2010`但在运行时我得到：

```
{"LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression."} 
```

泰，莱伦。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-22T10:55:02.497

编辑：

好的，我找到了 LINQtoEF 中的 int.ToString() 失败的原因，请阅读这篇文章： [Problem with conversion int to string in Linq to entity](https://stackoverflow.com/questions/1066760/problem-with-converting-int-to-string-in-linq-to-entities/3292773#3292773)

这对我有用：

```
 List<string> materialTypes = (from u in result.Users
                                      select u.LastName)
                       .Union(from u in result.Users
                               select SqlFunctions.StringConvert((double) u.UserId)).ToList(); 
```

在你的应该是这样的：

```
 IList<String> materialTypes = ((from tom in context.MaterialTypes
                                       where tom.IsActive == true
                                       select tom.Name)
                                       .Union(from tom in context.MaterialTypes
                                       where tom.IsActive == true
                                       select SqlFunctions.StringConvert((double)tom.ID))).ToList(); 
```

谢谢，我今天学到了一些东西：）

# css - 如何在图像上应用这种 3d 透视和反射效果？

> ID：15022415
> 
> 赞同：2
> 
> 时间：2013-02-22T10:49:05.433
> 
> 标签：css, transform

我正在尝试对元素（包含图像的 div）应用跨浏览器透视和反射效果，但没有办法。

我已经尝试了一些技巧。有些不兼容跨浏览器，有些则不起作用。

这是我正在寻找的效果：

![](../Images/aa4d3b817c0165fadb570f629083abe9.png)

# javascript - 匹配单个字母或数字

> ID：15022420
> 
> 赞同：1
> 
> 时间：2013-02-22T10:49:20.887
> 
> 标签：javascript, regex

这可能是一个简单的问题。
如果变量包含字母或数字，我需要匹配。以下不提供任何结果。

```
var onechar = 1;
if (onechar.match(/[0-9]/)) {
    alert ("A digit");
} else if (onechar.match(/[a-z]/)){
    alert ("A letter");
} else {
    alert ("Not a digit or a letter");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:05:10.143

`test`使用这种检查效率更高，它会自动调用`toString`它的参数

```
var onechar = 1;
if ( /\d/.test(onechar) ) {
    alert ("A digit");
} else if ( /[a-z]/.test(onechar) ) {
    alert ("A letter");
} else {
    alert ("Not a digit or a letter");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:56:05.757

使用 toString() 方法转换为字符串并使用正则表达式。

```
var onechar = 1;
onechar  = onechar.toString();
if (onechar.match(/[0-9]/)) {
 alert ("A digit");
} else if (onechar.match(/[a-z]/)){ 
  alert ("A letter"); 
} else {
  alert ("Not a digit or a letter"); 
} 
```

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:02:33.513

你做得对，只需尝试添加 toString() 函数。所以代码看起来像：

```
var onechar = 1;
onechar = onechar.toString();
if (onechar.match(/[0-9]/)) {
    alert ("A digit");
} else if (onechar.match(/[a-z]/)){
    alert ("A letter");
} else {
    alert ("Not a digit or a letter");
} 
```

除此之外，您还可以使用`\d`代替`0-9`.
而且由于不使用忽略大小写，您应该使用`[a-zA-Z]`匹配字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:14:42.980

由于没有其他答案解决“单个”字母或数字的条件......

```
var onechar = "1"; // 1 is an integer, it wouldn't have a "match" function
if (onechar.match(/^[0-9]$/)) { // add ^ and $ to mark the beginning and end of the string
    alert ("A digit");
} else if (onechar.match(/^[a-z]$/i)){ // add /i for case insensitive match
    alert ("A letter");
} else {
    alert ("Not a digit or a letter");
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-22T11:07:51.863

这就是你想要的：

```
var onechar = 1;
console.log( !!( '' + onechar ).match( /\d|\w/g ) );
>> true

var onechar = 'foo';
console.log( !!( '' + onechar ).match( /\d|\w/g ) );
>> true

var onechar = '+-)(';
console.log( !!( '' + onechar ).match( /\d|\w/g ) );
>> false 
```

# c# - 使用时间跨度比较两个时间间隔

> ID：15022421
> 
> 赞同：2
> 
> 时间：2013-02-22T10:49:25.287
> 
> 标签：c#, datetime, time

我想在某个时间和当前时间之间进行比较，以检查它是否超过了给定的时间段。

我想我应该使用 TimeSpan 但我不确定如何。我比较的两个日期是 DateTime 对象。

```
 TimeSpan ts = TimeSpan.FromSeconds(_timeInterval);

 if(DateTime.UtcNow.Ticks - rex.LastFired.Ticks > ts.Ticks)
    // bla bla 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:01:22.500

只需将日期之间的差异与时间跨度进行比较即可。

```
var start = new DateTime(2013, 02, 15);
var now = DateTime.Now;

var oneWeek = new TimeSpan(7, 0, 0, 0);

if (now - start > oneWeek) {
    Console.Write("One week is passed since start date.");
} else {
    Console.Write("One week not yet passed since start date.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T10:54:39.377

```
if(DateTime.UtcNow - rex.LastFired > ts)
     ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:56:47.823

为什么不使用 DateTime.Compare ？

[http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)

编辑：您首先必须使用 TimeSpan.Substract 或 DateTime.Substract，然后您可以使用适当的 .Compare 方法。

# jquery - 在主干中缓存视图的子元素

> ID：15022422
> 
> 赞同：1
> 
> 时间：2013-02-22T10:49:26.697
> 
> 标签：jquery, backbone.js

我正在尝试缓存（使用 jQuery 选择器）视图中的一些子元素。

```
var theView = Backbone.View.extend({
    initialize:function(){
        this.$subEl = this.$el.find('.sub-el-class');
    },
    template: Handlebars.compile($('#view-template').html()),
    render: function(){
        this.$el.html(this.template(this.model.toJSON()));
        this.$subEl.hide();
        return this;
    }
}); 
```

当我渲染视图时，$subEl (.sub-el-class) 没有隐藏。每次我必须在 .sub-el-class 元素上做某事时，我宁愿不必使用 jQuery 选择器。

有什么想法不适用于我的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:48:28.847

每次`render`调用时，您的代码都会重新创建视图的全部内容。`$el`表示视图的根节点。所以你的缓存引用丢失了（如果有的话）。调用后，您需要更改代码以获取缓存的引用`render`。`initialize`不会调用`render`，它会在连接到视图的根元素之后立即执行。

```
var theView = Backbone.View.extend({
    initialize:function(){

    },
    template: Handlebars.compile($('#view-template').html()),
    render: function(){
        this.$el.html(this.template(this.model.toJSON()));
        this.$subEl = this.$el.find('.sub-el-class');
        this.$subEl.hide();
        return this;
    }
}); 
```

我还建议您添加代码以在视图关闭时销毁对缓存元素的任何引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T10:54:02.347

```
this.$subEl = this.$el.find('.sub-el-class'); 
```

这是一个指向 .sub-el-class 的指针，您在初始化视图时设置它。

每次调用 this.$subEl 时，它都已经是一个 jQuery 对象，因此它不会再次搜索 DOM。

# axis2 - Apache Rampart Axis2 Symmetric policy

> ID：15022433
> 
> 赞同：0
> 
> 时间：2013-02-22T10:49:57.830
> 
> 标签：axis2, rampart

How to generate client for WSDL which has Symmetric Binding policy using axis2 and Apache Rampart?I am able to generate client using axis2 and eclipse, after that how can i add Apache Rampart configuration(Symmetric binding) for generated Client? Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:03:29.193

You can start with [this](http://wso2.org/library/3190 "Apache Axis2 Rampart tutorial") tutorial. After that, I recommend looking at the Rampart samples provided in the bundle, a symmetric scenario is included there, runnable example.

# linux - 将包含路径值添加到 .htaccess 会导致内部服务器错误

> ID：15022437
> 
> 赞同：0
> 
> 时间：2013-02-22T10:50:08.323
> 
> 标签：linux, apache, .htaccess, include-path

在 Linux 上运行 & 当我将这一行放入我的 .htaccess 文件时，我得到一个内部服务器错误；它有什么问题？

```
php_value include_path ".:/usr/local/php5/lib/php/PEAR:/usr/share/pear:/home/username/public_html/includes:.." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:27:53.530

服务器使用 suPHP 作为处理程序，并且该处理程序不支持通过 .htaccess 文件设置 php 值；它们必须通过 php.ini 文件进行设置。

# java - Hibernate 配置问题

> ID：15022438
> 
> 赞同：1
> 
> 时间：2013-02-22T10:50:12.593
> 
> 标签：java, hibernate, weblogic

尝试休眠并按照手册中的说明进行操作。但它不起作用。

```
package util;

//imports

public class HibernateUtil {
    private static SessionFactory sessionFactory = null;

    static {
        try {
            System.out.println("HU 01");
            Configuration configuration = new Configuration();
            System.out.println("HU 02");
            configuration.configure();
            System.out.println("HU 03");
                //creates the session factory from hibernate.cfg.xml
            ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();   
            System.out.println("HU 04");     
            sessionFactory = configuration.buildSessionFactory(serviceRegistry);
            System.out.println("HU 05");
        } catch (Exception e) {
            System.out.println("HU 06");
              e.printStackTrace();
        }
    }

    public static SessionFactory getSessionFactory() {

        System.out.println("HU 00");
        return sessionFactory;
    }
} 
```

我有下一个日志（放置 System.out... 无处不在）：

```
Main class starts.
Factory initialised.
Factory.Entity initialised.
ImplDAO 1
HU 01
ImplDAO 8
Exception in thread "main" java.lang.NoClassDefFoundError: org/jboss/logging/BasicLogger
    at org.hibernate.cfg.Configuration.<clinit>(Configuration.java:176)
    at util.HibernateUtil.<clinit>(HibernateUtil.java:14)
    at dao.impl.ImplDAO.setData(ImplDAO.java:27)
    at service.MainClass.main(MainClass.java:17) 
```

“HU 01”出现在控制台中，“HU 02”没有。所以，我想，我遇到了一些 hibernate.cfg.xml 问题，但它也是手动制作的：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC 
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>

    <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1251:XE</property>
    <property name="hibernate.connection.username">SYSTEM</property>
    <property name="hibernate.connection.password">12345</property>

    <property name="hibernate.connection.pool_size">10</property>
    <property name="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</property>
    <property name="show_sql">true</property>
    <property name="hbm2ddl.auto">update</property>
    <property name="hibernate.connection.autocommit">false</property>
    <property name="current_session_context_class">thread</property>

    <mapping class="logic.EntityClass" />

  </session-factory>
</hibernate-configuration> 
```

我的环境：

```
Hibernate 4.1
WebLogic Server 11gR1
Oracle DataBase 11g Express Edition
Eclipse Juno
JRE: jdk1.7.0_09
    (same thing with Oracle WebLogic Server 11gR1 (10.3.2) JRE) 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:59:07.050

您错过了一个或多个依赖项。这是我的一个项目的依赖层次结构的样子：

![在此处输入图像描述](../Images/b9dcd4a9c26108505b17876b690dc819.png)

确保在应用程序的类路径中有所需的 jar。如果可能的话，使用[maven](http://maven.apache.org/)。它为你做依赖管理，除此之外还有很多其他的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:56:39.983

这不是 Hibernate 配置问题。您缺少一个依赖项：jboss-logging.jar。这就是为什么你的程序找不到类 org.jboss.logging.BasicLogger

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T08:44:25.013

你需要 jboss-logging-3.1.0.GA，它带有 hibernate 发行版，或者可以单独下载。

# email - Magento 新订单电子邮件正文为空白

> ID：15022439
> 
> 赞同：1
> 
> 时间：2013-02-22T10:50:12.870
> 
> 标签：email, magento

将订单保存在数据库表中后，我正在向客户发送新订单电子邮件。订单在管理员的销售部分完成，但订单电子邮件正文为空白，因为我收到了电子邮件但电子邮件主题正常。任何人都可以帮助我出了什么问题。我正在使用 Magento 1.7.0.2 版本。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:17:12.527

尝试

去`Admin -> System -> Transactional Emails`

为“订单电子邮件”和“订单电子邮件客人”编辑或添加新的交易电子邮件

然后

转到`Admin -> System -> Config -> Sales Emails`并分配正确的模板

# if-statement - 如何在android中获取已检查项目列表对话框的索引值

> ID：15022440
> 
> 赞同：1
> 
> 时间：2013-02-22T10:50:13.313
> 
> 标签：if-statement, dialog, android-listview, boolean

我正在使用对话框复选框列表。现在我想获取选中项的索引值，以便我可以将特定的布尔值设置为 true。实际上我是android新手，所以如果我问一些愚蠢的问题，我很抱歉

```
 private void repeat(){
    AlertDialog.Builder ab=new AlertDialog.Builder(this);
    ab.setTitle("Repeat Alarm");
    ab.setMultiChoiceItems(days, null, new OnMultiChoiceClickListener(){

        @Override
        public void onClick(DialogInterface arg0, int arg1, boolean arg2) {
            // TODO Auto-generated method stub

            if(arg2){
                //chk_monday=true;
                Toast.makeText(getApplicationContext(), "ss", Toast.LENGTH_LONG).show();

            } 
```

# c# - 什么是全局::？

> ID：15022441
> 
> 赞同：148
> 
> 时间：2013-02-22T10:50:25.920
> 
> 标签：c#

在 C# 中，我`global::`经常看到在自动生成的代码中使用。这不是我自己用过的东西，所以我不知道目的是什么。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-22T10:55:27.637

global 指的是全局命名空间，它可以用来解决可以重新定义类型的问题。例如：

```
class foo
{
    class System
    {

    }

} 
```

如果您要使用 System ，它将在 foo 类中的本地范围内，您可以使用：

```
global::System.Console.WriteLine("foobar"); 
```

访问全局命名空间。

**例子**

```
using System;

class Foo
{
    public void baz()
    {
        Console.WriteLine("Foo 1");
    }
}

namespace Demo
{
    class Foo
    {
        public void baz()
        {
            Console.WriteLine("Foo 2");
        }
    }

    class Program
    {
        protected static global::Foo bar = new global::Foo();

        static void Main(string[] args)
        {
            bar.baz(); // would write Foo 1 to console as it refers to global scope
            Foo qux = new Foo();
            qux.baz(); // would write Foo 2 to the console as it refers to the Demo namespace
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-22T10:52:03.377

这是一个有时需要的前缀，指示根命名空间。

它通常被添加到生成的代码中，以避免名称与用户代码冲突。

例如，假设您有一个名为 的类`System`，但您想使用`System.String`. 你可以`global::System.String`用来区分。

我相信`::`它来自 C++，它被用作命名空间分隔符。

在实践中，除了生成代码之外，我从未使用过它。请注意，您还可以通过使用别名来解决一些冲突。例如`using String = System.String;`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-22T10:59:54.317

上下文关键字，当`global`它出现在 :: 运算符之前时，指的是全局命名空间，它是任何 C# 程序的默认命名空间，否则未命名。

说明`global::`符告诉编译器从根开始寻找命名空间或类。您将在系统生成的代码中看到它，以便代码始终有效。这样，如果您在当前命名空间下有一个与代码尝试访问的顶级命名空间相同的命名空间，则不会发生冲突。

例如，假设您有命名空间 A、命名空间 B 和命名空间 BA，如果我在命名空间 BA 中编写需要引用命名空间 A 中的类的代码，而没有 global:: 我无法访问它。如果我引用 A.classname，编译器将在 BA 中查找类名 使用 global:: 我可以告诉它在 global::A.classname 中查找类名，它会在正确的位置找到类名。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-20T21:06:54.977

`global::`命名空间及其标识符并不是大多数人所想的。它不是应用程序中创建的所有内容的通用标识符，该标识符位于应用程序定义的命名空间之一之外，并且附加到某个全局根。

如果您在顶级命名空间之外创建一个类或类型，您将假定它自动成为 GLOBAL 命名空间的一部分，并且可以通过`global::`应用程序或程序集中的所有文件中的标识符访问。实际上，这些名称通常仅在该文件的已编译 LOCAL 范围内，但可以通过`global::`标识符访问。

如果您在 aspx.cs 文件中创建顶级类或命名空间，则可以通过`global::`该文件中的全局命名空间访问它。但是，如果您键入`global::`另一个文件，则该类和命名空间不存在于全局命名空间中。但是，如果您在 class.cs 文件中创建相同的类或命名空间，则这些项目可通过`global::`全局命名空间以及该文件的本地范围用于所有其他文件。为什么？

事实证明，`global::`它实际上是对文件范围内的顶级 LOCAL 名称以及程序集共享的 GLOBAL 名称的引用（就像在典型 ASP.NET 项目中的 App_Code 类文件中编译的内容一样）。

我发现这非常令人困惑且不一致，因为`global::`这意味着访问在应用程序中创建的与全局名称空间相关的顶级名称空间和类型。默认情况下，像“系统”这样的一些文件在所有文件中都与全局命名空间相关联，但自定义文件可能取决于该文件的范围，也可能不取决于该文件的范围。这就是为什么全局标识符在解析对本地根范围名称的引用方面也具有次要作用。

您可以通过在应用程序的某些部分中创建顶级命名空间和类来测试这一点，然后使用`global::`它来查看它可以从应用程序的不同部分访问全局命名空间中的哪些以及不能访问哪些。它无法访问的仅在该文件中明确分配给“本地全局范围”，这`global::`有助于您访问命名冲突。

# qt - 无法在 qt 中使用 fromStdString

> ID：15022442
> 
> 赞同：1
> 
> 时间：2013-02-22T10:50:45.170
> 
> 标签：qt

我无法使用来自StdString 的函数。在 qt 助手中说，“只有在 Qt 配置了启用 STL 兼容性的情况下，此运算符才可用。”。但我不知道如何启用它。请提供解决方案。

```
 int main(int argc, char *argv[])
    {
        std::string read;
        QString monthsArr[12];
        QStringList monthlist;
        std::ifstream readfile;
        readfile.open("/home/pcamdin/practice/qtcpp/qtprogs/qtcpp/months.txt");
        for(int i=0; i<6; i++)
        {
            readfile >> read;
            monthsArr[i] = fromStdString(read);
            monthlist << monthsArr[i];
            qDebug() << i+1 << ": " << monthsArr[i];
        }

        qDebug() << "the first " << monthlist.size() << " months of the year are " << monthlist;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:21:47.843

即使 Qt 配置了 -no-stl 您也可以与 std::string 和容器交互，它只会禁用一些语法糖。例如，您可以使用 QString::fromLatin1(some_std_string.c_str(), some_std_string.size()) 或 QString::fromUtf8(...) 或 fromLocal8bit(...)，具体取决于 std::细绳。这在任何情况下都可以说是有利的，因为它使编码转换明确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:01:58.837

默认情况下会编译 STL 支持（至少在您自己构建时）。

除非我不知道在 4.8 中发生了什么变化，否则 fromStdString 是 QString 的静态成员，所以你应该这样称呼它

```
monthsArr[i] = QString::fromStdString(read); 
```

仅在全局命名空间中调用 fromStdString 不会在 4.7.3 下编译。

# jquery - Struts2-Jquery 网格 CSS 编辑

> ID：15022445
> 
> 赞同：1
> 
> 时间：2013-02-22T10:50:53.343
> 
> 标签：jquery, struts2, struts2-jquery, struts2-json-plugin, struts2-jquery-grid

我的网页上有一个[Struts2-jquery Grid 组件。](http://code.google.com/p/struts2-jquery/wiki/GridTag)

它工作得很好，但是如何编辑 Struts2-jQuery-Grid 插件的 CSS 规则？

我可以将我的自定义 CSS 规则应用于此网格视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:14:54.523

您可以通过使用其他主题之一来更改默认主题`jQuery`，只需更改`jQuery CSS`.

您可以在[`jQuery ThemeRoller`](http://jqueryui.com/themeroller/)（图库选项卡）中看到它们，也可以在[`Struts2-jQuery Showcase`](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)（使用右上角的主题滚轮组合框）中看到它们。

如果它们都不能满足您的需求，

只需选择更接近您想要的主题，并定义`CSS`您的，

在 jQuery导入**之后**声明它`CSS`（因为 s 的导入顺序`CSS`很重要，**最后一个 win**），

并手动覆盖`style declaration`您需要更改的所有内容；

要轻松快速地查看（和实验）它们，您可以使用`FireBug`on`FireFox`或其他浏览器上的类似工具。

* * *

例如，如果您使用

```
.ui-jqgrid tr.ui-row-ltr td{
    border-right-style: dashed;
} 
```

在您的 中，无论您使用哪个主题，`CSS`您的 s 都会有虚线边框。`TD`

* * *

你甚至可以`jQuery CSS Theme`从无到有创建你的个人，但我怀疑这就是你正在寻找的东西，这不会是一个快速的工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:51:38.987

`To answer your question: how to create a new jquery theme?`

1.  就像@Andrea 提到的，你应该使用[jQuery ThemeRoller](http://jqueryui.com/themeroller/)
2.  `sj:head`像这样定义你

    ```
    <%@ taglib prefix="s" uri="/struts-tags"%>
    <%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
    <html>
      <head>
        <sj:head jqueryui="true" jquerytheme="mytheme" 
                 customBasepath="template/themes"/>
      </head>
      <body>
      </body>
    </html> 
    ```

3.  您应该关注以下样式类。

    *   ui-widget-header
    *   ui-state-default
    *   ui-widget 内容

如果要调整单个样式，可以使用 CSS 选择器或 jQuery 选择器来执行此操作。

该插件将完成其余的工作。试试看。

# c++ - 'Kinecter::getCloud' : 这个函数不能被编译为托管的，考虑使用#pragma unmanaged

> ID：15022447
> 
> 赞同：0
> 
> 时间：2013-02-22T10:50:55.137
> 
> 标签：c++, unmanaged, managed, point-cloud-library

*（“功能”是编译器错字不是我的：P）*

**我的问题，**

我需要做的是从 pcl 非托管 C++ 到 C# 获取点云（XYZRGBA）数据。我使用以下代码执行此操作：

**非托管.cpp (C++)**

```
float* getCloud(int clr_width, int clr_height, int dpth_width, 
int dpth_height, int frameId, int clr_focal_x, int clr_focal_y, 
int dpth_focal_x, int dpth_focal_y, unsigned char *image, 
unsigned char *depth_image) const
{
    (some implementation);
} 
```

**结束非托管.cpp**

.

**托管.cpp (C++)**

```
property float[]^ Receiver
{
    float[]^ get()
    {
        return gcnew float[]( Unmanaged->getCloud((int)clr_width, 
        (int)clr_height, (int)dpth_width, (int)dpth_height, (int)frameId, 
        (int)clr_focal_x, (int)clr_focal_y, (int)dpth_focal_x, 
        (int)dpth_focal_y, (unsigned char*)image, 
        (unsigned char*)depth_image) );
    }
} 
```

**Managed.cpp 结束**

我得到的是标题中的错误：'Kinecter::getCloud'：这个函数不能被编译为托管，考虑使用#pragma unmanaged

有人知道如何解决这个问题吗？

顺便说一句：建议：#pragma unmanaged 也不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:54:58.903

我修复了它，事实证明它与这段代码无关 -.-

云的创建遇到了麻烦。（适用于 PCL 用户）

```
cloud->sensor_origin_.setZero (); // BUGGY
cloud->sensor_orientation_.w () = 0.0;
cloud->sensor_orientation_.x () = 1.0;
cloud->sensor_orientation_.y () = 0.0;
cloud->sensor_orientation_.z () = 0.0;
return (cloud); 
```

我想除非我在 C# 上创建镜像版本，否则我无法发送点云。

# amazon-web-services - 从外部 Telnet 到云实例

> ID：15022448
> 
> 赞同：1
> 
> 时间：2013-02-22T10:50:57.313
> 
> 标签：amazon-web-services, terminal, amazon, echo, telnet

我在 EC2 上有一个云 MS 窗口实例。我想从我自己的机器（外部）远程登录这个实例。

我做了什么：1-关闭MS防火墙2-打开实例中的telnet客户端和telnet服务..

现在在我的机器上，如果云实例的公共 IP 地址是 80.8.8.9。然后，在外部的 cmd 终端上。我写了 telnet 80.8.8.9 其中说连接失败。

我错过了什么，我做错了什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:39:34.440

确保您转到`AWS management console/EC2/Security Groups/[Your Security Group]/Inbound`并打开连接到您自己机器网络的 telnet 端口 (23)。

# ios - UIImageview 动画开始使用 for-in 循环和动画延迟

> ID：15022449
> 
> 赞同：0
> 
> 时间：2013-02-22T10:51:00.410
> 
> 标签：ios, objective-c, xcode, uiimageview, uianimation

我需要为 UIimageview 设置动画，当我开始动画时，它会在很长一段时间后发生，我发现在各种图像视图的连续动画时内存在某处泄漏。我需要做的就是在滚动视图中有 n 个 UIview，每个视图都有一个自定义按钮。when that button is selected an animation happens and if animation is in process if the user taps on button that animation will continue and it dont need to start again

这是我的代码

```
 for (int i=0; i<AlphabetArray.count; i++) {

    UIView *view=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 300, 200)];
    view.backgroundColor=[UIColor grayColor];
    view.tag=i+1;
    [self.scrollView addSubview:view];
     UIImageView *image=[[UIImageView alloc]initWithFrame:CGRectMake(200, 50, 400, 400)];

    [image setImage:[[animationArray objectAtIndex:i]objectAtIndex:0]];
    image.tag=i+1;
    [view addSubview:image];

    UIButton *animatebutton=[[UIButton alloc]initWithFrame:CGRectMake(200, 50, 336, 310)];
    animatebutton.tag=i+1;
    [animatebutton addTarget:self action:@selector(makeAnimation:) forControlEvents:UIControlEventTouchUpInside];
    //[animatebutton setImage:[UIImage imageNamed:@"NewtDance_mov_0.png"] forState:UIControlStateNormal];
    [view addSubview:animatebutton];
}

-(void)makeAnimation:(UIImageView *)sender {

UIView *tagView=(UIView *)[self.view viewWithTag:sender.tag];

for (UIImageView * imageview in [tagView subviews]) {

    NSLog(@"Yes %d",imageview.tag);

    if ([imageview isKindOfClass:[UIImageView class]]) {

        if ([imageview isAnimating]) {
            NSLog(@"Animation Happens");

        }

        else{
            imageview.animationDuration=3.0;

            imageview.animationImages=[animationArray objectAtIndex:sender.tag-1];
            imageview.animationRepeatCount=2;
            imageview.tag=sender.tag;
            [imageview startAnimating];
        }
    }

}

NSLog(@"OK");

} 
```

使用此代码，我可以实现我的要求。但是由于使用了 for-in 循环，动画开始得很晚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:02:25.490

处理这个问题的最好方法。使用`UIImageView`的`animationImages`属性。

1.  `NSMutableArray`使用您的图像对象创建`UIImage`对象。
2.  将图像数组设置为`UIImageView` `animationImages`属性
    `[imageView setAnimationImages:imagesArray]`

3.  `[imageView startAnimating]`开始动画。

4.  `[imageView stopAnimating]`停止动画。
    检查文档以获取更多详细信息。

有关更多详细信息，[请检查此。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html).

# scala - 电梯实例化异常

> ID：15022450
> 
> 赞同：0
> 
> 时间：2013-02-22T10:51:02.190
> 
> 标签：scala, lift

这是我的代码 -

```
def sendAcceptInvitationMail(invitation: Invitation) {
  val signupLink = Props.get("base.url").openOr("http://localhost:8080") + "/accounts/signup?code="+invitation.code.is
  S.eval(<lift:embed what="/templates-hidden/emails/accept_invitation">
            <lift:bind-at name="name">{invitation.name.is}</lift:bind-at>
            <lift:bind-at name="link"><a href={signupLink}>{signupLink}</a></lift:bind-at>
        </lift:embed>) match {
    case Full(msg) =>
      MailHelper.sendMail((invitation.email.is, invitation.name.is), S.?("subject.invitation.sent"), msg, MimeType.MIME_HTML)
      debug("Accept invitation mail sent for: "+invitation.email.is)

    case _ => warn("Invitation Accept Email not sent to: "+invitation.email.is+". Problem preparing message")
  }
} 
```

我得到了这个例外。

```
Message: java.lang.InstantiationException: com.lgigs.admin.view.Admin
java.lang.Class.newInstance0(Class.java:357)
java.lang.Class.newInstance(Class.java:325)
net.liftweb.http.Templates$$anonfun$lookForClasses$1$$anonfun$apply$9.apply(Templates.scala:264)
net.liftweb.http.Templates$$anonfun$lookForClasses$1$$anonfun$apply$9.apply(Templates.scala:263)
net.liftweb.common.Full.flatMap(Box.scala:493)
net.liftweb.http.Templates$$anonfun$lookForClasses$1.apply(Templates.scala:262)
net.liftweb.http.Templates$$anonfun$lookForClasses$1.apply(Templates.scala:260)
scala.Function1$$anonfun$andThen$1.apply(Function1.scala:49)
scala.collection.immutable.Stream.flatMap(Stream.scala:217)
net.liftweb.util.ListHelpers$class.first(ListHelpers.scala:137)
net.liftweb.util.Helpers$.first(Helpers.scala:34)
net.liftweb.http.Templates$.lookForClasses(Templates.scala:259)
net.liftweb.http.Templates$.findRawTemplate(Templates.scala:245)
net.liftweb.http.Templates$.apply(Templates.scala:85)
net.liftweb.http.DefaultRoutines$.rawResBundle(DefaultRoutines.scala:43)
net.liftweb.http.DefaultRoutines$.net$liftweb$http$DefaultRoutines$$resBundleFor(DefaultRoutines.scala:59)
net.liftweb.http.DefaultRoutines$$anonfun$3.apply(DefaultRoutines.scala:104)
net.liftweb.http.DefaultRoutines$$anonfun$3.apply(DefaultRoutines.scala:101)
net.liftweb.common.Full.flatMap(Box.scala:493)
net.liftweb.http.DefaultRoutines$.resourceForCurrentReq(DefaultRoutines.scala:101)
net.liftweb.http.LiftRules$$anon$13$$anonfun$$init$$14$$anonfun$apply$14.apply(LiftRules.scala:785)
net.liftweb.http.LiftRules$$anon$13$$anonfun$$init$$14$$anonfun$apply$14.apply(LiftRules.scala:785)
net.liftweb.http.S$class.resourceBundles(S.scala:884)
net.liftweb.http.S$.resourceBundles(S.scala:48)
net.liftweb.http.S$class.resourceBundles(S.scala:878)
net.liftweb.http.S$.resourceBundles(S.scala:48)
net.liftweb.http.S$class.$qmark(S.scala:928)
net.liftweb.http.S$.$qmark(S.scala:48)
com.lgigs.admin.snippet.Admin.sendAcceptInvitationMail$1(Admin.scala:129)
com.lgigs.admin.snippet.Admin$$anonfun$save$1$2.apply(Admin.scala:148)
com.lgigs.admin.snippet.Admin$$anonfun$save$1$2.apply(Admin.scala:141)
scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike. 
```

我调试并发现从资源中读取属性时`S.?('subject.invitation.sent')`会抛出此异常。但是我在许多其他片段中使用相同的函数调用并且没有任何异常。需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:18:57.033

包中的大多数项目`S`都要求它可以使用有效的会话，并且通常要求访问发生在与 Http 请求相同的线程中。是`MailHelper`你写的吗？我知道提升是`Mailer.sendMail`通过演员异步发生的，所以这可能与它有关。

如果您还没有尝试过，您可能会尝试的一件事是更早地检索翻译。就像是：

```
case Full(msg) =>
      val i18nConfirmation = S.?("subject.invitation.sent")
      MailHelper.sendMail((invitation.email.is, invitation.name.is), i18nConfirmation, msg, MimeType.MIME_HTML)
      debug("Accept invitation mail sent for: "+invitation.email.is) 
```

# java - 使用码头服务器、远程服务器调试

> ID：15022451
> 
> 赞同：0
> 
> 时间：2013-02-22T10:51:09.247
> 
> 标签：java, eclipse, web-applications, spring-mvc, jetty

我使用 maven 开发了一个 web 应用程序（spring）并使用了码头服务器。我想使用 Eclipse 调试该应用程序。pom.xml 中 jetty 插件的条目是

```
 `<plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.5.v20120716</version>
            <configuration>
              <scanIntervalSeconds>0</scanIntervalSeconds>
                <webAppSourceDirectory>${webappDirectory}</webAppSourceDirectory>
                <contextPath>/admin</contextPath>
                <stopPort>9967</stopPort>
                <stopKey>foo</stopKey>

                <connectors>
                    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>${httpPort}</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                    <connector implementation="org.eclipse.jetty.server.ssl.SslSelectChannelConnector">
                        <port>${httpsPort}</port>
                        <keystore>${webappDirectory}/WEB-INF/blc-example.keystore</keystore>
                        <keyPassword>broadleaf</keyPassword>
                        <password>broadleaf</password>
                    </connector>
                </connectors>
            </configuration>
        </plugin>` 
```

我从蚂蚁任务开始这个服务器

```
<target name="jetty-demo" depends="start-db">
    <delete dir="war/WEB-INF/lib"/>
    <artifact:mvn mavenHome="${maven.home}" fork="true">
        <jvmarg value="-XX:MaxPermSize=256M" />
        <jvmarg value="-Xmx512M" />
        <jvmarg value="-Xdebug" />
        <jvmarg value="-Xrunjdwp:transport=dt_socket,address=8009,server=y,suspend=n" />
        <jvmarg value="-Xdebug"/>
        <arg value="compile"/>
        <arg value="war:exploded"/>
        <arg value="jetty:run"/>
    </artifact:mvn>
</target> 
```

现在要放置调试点，我使用本教程 [步骤中给出的步骤在 eclipse 中设置调试器，以启用带有码头服务器的调试器](http://www.clickonchris.com/2010/05/configuring-jetty-maven-and-eclipse-together-with-hot-deploy/)

但我收到以下错误

**侦听远程 VM 连接失败地址已在使用中：JVM_Bind**

这个问题怎么解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:57:02.577

看起来有些东西已经在使用 JVM 试图用来启用远程调试的端口。看起来您正在尝试使用 8009。尝试将其更改为其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T07:01:14.487

您可以从命令提示符发出以下命令。mvnDebug jetty:run-exploded antrun:run 然后你会知道你的码头正在监听哪个端口，然后从那里运行->调试配置，你可以调试你的服务器。在调试配置中，您可以在此处找到远程 Java 应用程序选项为新的远程 Java 应用程序创建一个新的调试配置，您还可以在这里再次定义您的新服务器**mvnDebug jetty:run-exploded** 现在您应该看到您的新端口。

# config - gruntjs 棘手的配置

> ID：15022455
> 
> 赞同：1
> 
> 时间：2013-02-22T10:51:32.790
> 
> 标签：config, handlebars.js, gruntjs

我想知道如何在这里观看文件：

```
module.exports = function(grunt) {

  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-contrib-handlebars');

  // Project configuration.
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    handlebars: {
      compile: {
        files: {
          "app/handlebars/handlebars-templates.js" : [
            "app/handlebars/*.handlebars"
          ]
        }
      }
    },
    watch: {
      handlebars: {
        files: [
          '<%= handlebars.compile.files %>' <== what to put here ?
        ],
        tasks: 'default'
      }
    }
  });

  grunt.registerTask('default', 'handlebars');
}; 
```

我可以放“app/handlebars/*.handlebars”，但我想写一些动态走正确路径的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:24:47.447

`<%= handlebars.compile.files %>`在您的配置中指向一个对象。所以手表不知道你真正想要哪些文件。尝试像这样添加/读取配置变量：

```
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),
  handlebars_path: "app/handlebars/*.handlebars",
  handlebars: {
    compile: {
      files: {
        "app/handlebars/handlebars-templates.js" : [
          "<%= handlebars_path %>"
        ]
      }
    }
  },
  watch: {
    handlebars: {
      files: [
        "<%= handlebars_path %>"
      ],
      tasks: 'default'
    }
  }
}); 
```

或者使用更明确的配置：

```
handlebars: {
  compile: {
    src: ['app/handlebars/*.handlebars'],
    dest: 'app/handlebars/handlebars-templates.js'
  }
} 
```

和得到`<%= handlebars.compile.src %>`。

# sql - 使用 generate_series() 修改 PL/pgSQL 函数

> ID：15022456
> 
> 赞同：1
> 
> 时间：2013-02-22T10:51:33.140
> 
> 标签：sql, plpgsql, dynamic-sql, generate-series, postgresql-8.3

我正在开发一个不支持`generate_series()`日期/时间序列函数变体的 PostgreSQL 8.3 版本。目前我有这个丑陋的解决方法，它使用第三个参数调用函数，例如：

```
select table_union('2012-12-01', '2013-02-20', 79) 
```

我必须手动计算最后一个参数以确定`generate_series()`.

修改此脚本以使函数调用中只需要两个参数的最佳方法是什么？

有没有办法修改下面的代码以同样的方式工作，只给这样的函数的两个参数？

```
select table_union('2012-12-01', '2013-02-20') 
```

```
create or replace function table_union(date_from date, date_to date, numday int)
returns void language plpgsql as $$
declare
    day_1 date;
    _stop_ bigint := (date_from::date - date_to::date)::int; 
begin
    for day_1 in 
        select date_from + s.a as dates from generate_series(0, $3 ) as s(a)
    loop
        execute 'insert into dhcp.dhcp_map select * from dhcp.final_map_'|| trim( leading ' ' from to_char(extract(month from day_1), '09')) ||'_'|| 
        trim( leading ' ' from to_char(extract(day from day_1), '09'));  --to_char introduces a leadin space use trim to remove
    end loop;
end; $$; 
```

更新：我尝试在下面的答案中提出很好的建议后修改我的代码，但仍然有一些错误：

```
 create or replace function 
table_union(date_from date, date_to date) 
returns void language plpgsql 
as $func$ 
declare day_1 date; 
begin 
for day_1 in select date_from
 + s.a as dates from generate_series(0, (date_to - date_from)) 
as s(a) 
loop 
execute 
'insert into dhcp.dhcp_map select * from dhcp.final_map_'||
 array_to_string(ARRAY(SELECT to_char(date_from + generate_series(0, (date_to - date_from)), 'MM_DD')) ) ; 
end loop;
 end; 
$func$; 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:55:06.180

```
CREATE OR REPLACE FUNCTION table_union(date_from date, date_to date)
  RETURNS void LANGUAGE plpgsql AS
$func$
BEGIN
   EXECUTE '
INSERT INTO dhcp.dhcp_map
SELECT * FROM dhcp.final_map_'
   || array_to_string(ARRAY(SELECT to_char(date_from
                      + generate_series(0, (date_to - date_from)), 'MM_DD')), '
UNION ALL
SELECT * FROM dhcp.final_map_'
   );
END
$func$; 
```

称呼：

```
SELECT table_union('2012-12-01', '2013-01-10'); 
```

### 要点

*   对性能最重要的是：我不是*每天*`INSERT`一个语句，而是为所有事情生成并执行一个*语句*。使用并代替您可以看到生成的语句： **`INSERT``RETURNS text``RETURN``EXECUTE`**

     **```
    INSERT INTO dhcp.dhcp_map
    SELECT * FROM dhcp.final_map_12_01
    UNION ALL
    SELECT * FROM dhcp.final_map_12_02
    UNION ALL
    SELECT * FROM dhcp.final_map_12_03
    ... 
    ```

    [-> 用于 Postgres 8.3 的 sqlfiddle。](http://www.sqlfiddle.com/#!10/f7764/1)
    只要将要插入的数据量 f9its 到 RAM 中，这将大大加快。** 
***   如果您`INSERT`应该**很大，您可能希望****每天**坚持**一个`INSERT`**。** 

 **```
CREATE OR REPLACE FUNCTION table_union_huge(date_from date, date_to date)
  RETURNS void LANGUAGE plpgsql AS
$func$
BEGIN
FOR i IN 0 .. (date_to - date_from)
LOOP
   EXECUTE 'INSERT INTO dhcp.dhcp_map
SELECT * FROM dhcp.final_map_'|| (date_from + i)::text;
END LOOP;
END
$func$; 
```

*   `$3`从函数调用中删除冗余参数。用简单的减法代替`$2 - $1`。在 Postgres 中返回一个整数（以天为单位的差异）。

*   简化`generate_series()`调用。

*   将 LOOP 替换为[ARRAY 构造函数](http://www.postgresql.org/docs/8.3/interactive/sql-expressions.html#SQL-SYNTAX-ARRAY-CONSTRUCTORS)并[`array_to_string()`](http://www.postgresql.org/docs/8.3/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)创建单个语句。

*   大大简化了字符串处理。只需使用[模式`MM_DD`with`to_char()`](http://www.postgresql.org/docs/8.3/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)从日期中提取字符串。

Postgres 8.3 手册的所有链接。**

# selenium - 机器人框架如何知道是否选中了复选框

> ID：15022461
> 
> 赞同：1
> 
> 时间：2013-02-22T10:51:46.497
> 
> 标签：selenium, robotframework

我正在使用机器人框架。如何测试是否选中了复选框？如果选择了一个复选框，我想运行一个关键字，例如：

```
 ${checked} =   Checkbox Should Not Be Selected  xpath=.//*[@id='0,1,1,6']/td[11]/input
    Run Keyword if  '${checked}'  Click Element  xpath=.//*[@id='0,1,1,6']/td[11]/input  and wait 
```

即点击那里如果尚未点击。

（上面的代码是错误的，我知道）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:28:33.547

虽然有点 hack，但您可以创建一个关键字“Is Checked”，它首先将测试用例级别的变量设置为 False，然后在将该变量设置为 True 之前运行“Checkbox should be checked”。然后，您可以运行此关键字忽略失败，然后检查变量的值。第二种，不那么 hacky 的方法是在 python 中创建这个关键字，使用这样的东西：

```
def is_checked(locator):
     try:
         selenium.should_be_checked(locator)
     except AssertionError:
         return False
     else:
         return True 
```

尽管您需要验证“应该检查”引发了什么异常，并且您还需要查看 robotframework.libraries.Built In 以了解如何访问当前正在运行的 selenium 库实例

# asp.net - ASP.NET MVC 数据实体设计

> ID：15022463
> 
> 赞同：0
> 
> 时间：2013-02-22T10:51:47.600
> 
> 标签：asp.net, sql, asp.net-mvc, database, entity

我正在构建一个 ASP.NET MVC 4 应用程序，并希望使其尽可能灵活。

我创建了抽象的数据库访问类并分离了它们的具体实现（SQL Server 访问）。

这适用于 ninject，它会自动将正确的实现绑定到构造的控制器。

我现在要解决的问题是我的一个实体（用户实体）有多个相关实体（任务实体）（1xn 关系），所以我想在这个实体类上创建一个属性，该属性将返回所有相关的集合用户的任务。

问题是，在实体中我无法找到正确的数据库访问实现。

这里的正确方法是什么？

我知道可以创建一个返回任务的方法，但是这个方法还必须有一个代表具体数据库实现的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:56:58.370

我认为你在这里遗漏了一些东西。域对象（用户、任务等）以及持久保存它们的方式和位置（在本例中为访问数据库）是两件不同的事情。

因为，正如您所说，您正在开发一个基于 N 层的“灵活”架构，我建议您专注于设计您的领域对象，而不关心它们将如何在您的 DB 上表示（可能是一对多关系）。

在这种情况下，您的`User`类将具有一个属性，该属性将表示`Tasks`.

# cakephp - 使用不同的模型将记录从元素传递到视图

> ID：15022468
> 
> 赞同：0
> 
> 时间：2013-02-22T10:52:08.190
> 
> 标签：cakephp

我有一个应用程序，用户可以添加他们的查询（ItQueries/add）。当 IT 部门查看查询 (ItQueries/view/1) 时，他们应该能够对其进行评论/响应。到目前为止我所做的是。

在 IT 查询的视图中，我调用了 IT 部门添加响应的元素。下面是我如何调用元素

```
<?php echo $this->Element('/ItQueryResponses/add'); ?> 
```

在提交 ItQueryResponses 时，我希望该操作重定向到 ItQueris 的查看页面，并在其下方添加评论。

这是我的元素代码

```
<?php echo $this->Form->create('ItQueryResponse', array('action' => 'add')); ?>
<?php echo __('Add It Query Response'); ?>
<?php
echo $this->Form->input('it_query_id');
echo $this->Form->input('response');
?>
<?php echo $this->Form->end(__('Submit')); ?> 
```

这是我对 ItQueryResponseController 的添加函数

```
public function add() {
if ($this->request->is('post')) {
$this->ItQueryResponse->create();
if ($this->ItQueryResponse->save($this->request->data)) {
$this->Session->setFlash(__('The it query response has been saved'));
$this->redirect(array('Controller' => 'ItQueryResponses', 'action' => 'view'));
} else {
$this->Session->setFlash(__('The it query response could not be saved. Please, try again.'));
}
}
} 
```

这是我的 ItQueryResponses 视图的代码

```
<h2><?php  echo __('It Query Response'); ?></h2>
<dl>
<dt><?php echo __('Response'); ?></dt>
<dd>
<?php echo h($itQueryResponse['ItQueryResponse']['response']); ?>
        &nbsp;
</dd>
<dt><?php echo __('Created'); ?></dt>
<dd>
<?php echo h($itQueryResponse['ItQueryResponse']['created']); ?>
        &nbsp;
</dd>
</dl> 
```

下面是我的 ItQueriesController

```
<?php
App::uses('AppController', 'Controller');

class ItQueriesController extends AppController {

/** index method

public function index() {
$this->ItQuery->recursive = 0;
$this->set('itQueries', $this->paginate());
}

/** view method

public function view($id = null) {
$this->ItQuery->id = $id;
if (!$this->ItQuery->exists()) {
throw new NotFoundException(__('Invalid it query'));
}

$this->set('itQuery', $this->ItQuery->read(null, $id));   
} 
```

/** 添加方法

```
public function add() {
if ($this->request->is('post')) {
$this->ItQuery->create();
if ($this->ItQuery->save($this->request->data)) {
$this->Session->setFlash(__('The it query has been saved'));
$this->redirect(array('action' => 'index'));
} else {
$this->Session->setFlash(__('The it query could not be saved. Please, try again.'));
}                       
}
$hrEmployees = $this->ItQuery->HrEmployee->find('list');
$this->set(compact('hrEmployees'));
}

/**OTHER CODE*/
} 
```

如果有人可以向我展示我如何重定向到 ItQueryResponses 视图并将 ItQueryResponse 放在视图下方，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:31:26.670

```
/** view method **/

public function view($id = null) {
$this->ItQuery->id = $id;
if (!$this->ItQuery->exists()) {
throw new NotFoundException(__('Invalid it query'));
}

// debugging
$this->ItQuery->recursive = '1';
pr($this->ItQuery->find('all'));
//end debugging

$this->set('itQuery', $this->ItQuery->read(null, $id));   
} 
```

然后导航到视图并显示输出：

会是这样的：

```
Array(
   ItQuery => array(
      id => 1
      ...
   )
   ItQueryResponse => array(
      0 => array(
          id =>3
          response => 'some response'
          ...
      )
      1 => array(
          id =>4
          response => 'some other response'
          ...
      )
   )
) 
```

# jquery - jQuery：在窗口调整大小时更新砌体列宽，两次

> ID：15022471
> 
> 赞同：0
> 
> 时间：2013-02-22T10:52:11.153
> 
> 标签：jquery, css, responsive-design, jquery-masonry

我正在尝试使用 jQuery masonry 插件在列宽之间切换，具体取决于浏览器窗口的大小。因此，如果浏览器窗口小于 1700 像素，您将从 4 列切换到 3，然后当浏览器窗口小于 1200 像素时，您将从 3 切换到 2。

```
jQuery(document).ready(function() {

    jQuery('#thumb-wrap').masonry({
      itemSelector: '#thumb-container',
      // set columnWidth a fraction of the container width
      columnWidth: function(containerWidth) {
            var num = (containerWidth > 1700) ? 4 : 3;
            var num = (containerWidth > 1200) ? 3 : 2;
            return containerWidth / num;
        }

      });
}); 
```

但是我在实现这一点时遇到了问题，我可以让一个函数工作，但是两次切换列宽被证明是困难的。这是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:53:45.150

这将是因为您使用`var num`了两次。一旦它被声明，你不需要再次声明它。

```
var num = (containerWidth > 1200) ? 3 : 2;
num = (containerWidth > 1700) ? 4 : num; 
```

# jakarta-ee - java中j_security_check完成身份验证后如何触发Bean

> ID：15022473
> 
> 赞同：2
> 
> 时间：2013-02-22T10:52:12.397
> 
> 标签：jakarta-ee, jsf-2, primefaces, j-security-check

我对java网页环境很陌生。最近我尝试用Java开发一个电子商务平台。

因此，我使用 j_security_check Form-Based 作为我的身份验证工具。认证完成后成功重定向到期望页面。

但是，由于我必须从数据库（MS SQL 2005）加载最终用户设置和信息，所以我必须在身份验证完成后和页面重定向之前加载所有信息。

我曾尝试过使用 primefaces 的一些方法，但它无法触发加载用户信息的 bean 方法。

我尝试过的一种方法是使用 oncomplete 来触发 bean 方法

```
<h:form id="login" prependId="false"
                    onsubmit="document.getElementById('login').action='j_security_check';">
                    <h:panelGrid columns="2" cellpadding="5">  
                        <h:outputLabel for="j_username" value="Username:" />
                        <p:inputText value="#{loginBean.username}"   
                                     id="j_username" required="true" label="j_username" />
                        <h:outputLabel for="j_password" value="Password:" />  
                        <h:inputSecret value="#{loginBean.password}"   
                                       id="j_password" required="true" label="j_password" />
                        <f:facet name="footer">  
                            <p:commandButton id="loginButton" value="Login" type="submit" ajax="false"                                                 
                                              oncomplete="#{loginBean.login()}"/>
                        </f:facet>  
                    </h:panelGrid>
                </h:form> 
```

我也尝试过类似的方法，只是将 oncomplete 更改为 onclick 和其他。最终没有任何方法是可行的。

因此，我希望你们中的任何人都可以给我建议我应该如何克服这个问题。

百万谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:49:58.110

有几种解决方案。

1.  创建一个 servlet 过滤器，用于检查远程用户和会话中是否存在`User`实体。如果远程用户不是`null`，但`User`实体是，则从数据库加载它并在会话中设置它。在这里具体回答：[Accessing user details after login with Java EE Form authentication](https://stackoverflow.com/questions/14758429/accessing-user-details-after-logging-in-with-java-ee-form-authentication/14758549#14758549)

2.  `User`在应该返回实体的会话范围 bean 的 getter 中执行延迟加载。这个答案的第一部分具体回答了这个问题：[Performing user authentication in Java EE / JSF using j_security_check](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)

3.  使用真正的 JSF bean 操作方法执行编程登录并`User`直接获取实体。这个答案的第二部分具体回答了这个问题：[Performing user authentication in Java EE / JSF using j_security_check](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)

* * *

**与具体问题无关**，您应该使用`<form action="j_security_check" method="post">`而不是`<h:form prependId="false">`. 然后你也不需要那个讨厌的 JS hack 来改变表单的动作。

# c# - 如何使用 URL 参数中的 Id 为 jqGrid 加载数据

> ID：15022480
> 
> 赞同：1
> 
> 时间：2013-02-22T10:52:27.477
> 
> 标签：c#, jquery, asp.net-mvc, jqgrid

我似乎无法弄清楚如何根据 URL 中的参数中的 Id 加载 jqGrid。基本上我有地址 \Locations\Departmetn?LocationId=1 现在我想根据位置 ID 加载网格。网格只是使用地址 \Locations\GetDepartments 让控制器将数据作为 jSonResult 返回，这一切正常，我只是不知道如何/是否可以将位置 ID 发送到该 URL \Locations\GetDepartments

```
$(function () {

    $.widget('qs.department_page', {

    _create: function () {

        var self = this;
        this.scroll_to_end = false;

        var LocId = 1; //hardcoded for the test

        // get my child dom elements
        this.department_pager = $("#department_pager");

        // set up the grid and pager
        this.department_grid = $("#department_grid").jqGrid(
        {
            url: "/Location/GetDepartments/",
            datatype: "json",
            mtype: "POST",
            height: 300,
            hidegrid: false,
            colNames: ['Name', 'Site Num', 'Description', 'ABN'],
            colModel: [
                { name: 'Name', index: 'Name', width: 200, align: "left", sortable: false },
                { name: 'SiteNum', index: 'SiteNum', width: 100, align: "left", sortable: false },
                { name: 'Company', index: 'Company', width: 200, align: "left", sortable: false },
                { name: 'ABN', index: 'ABN', width: 200, align: "left", sortable: false }
            ],
            caption: "Departments",
            pager: this.department_pager
        })
        .navGrid('#department_pager', {
            addfunc: function () { self.onNewDepartment(); },
            editfunc: function (val) { self.onEditDepartment(val); },
            search: false,
            refresh: false
        },
            {/*add*/
            },
            {/*edit*/
            },
            { url: "/Location/DeleteDepartment" }
        ); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:57:21.990

下面有很多方法，一种方法，

调用 beforerequest 并扩展 postadata。在控制器中，您将获得 LocationID 值。

```
 beforeRequest: function () {

                var postData = $('#department_grid').jqGrid('getGridParam', "postData");
                $.extend(postData, { LocationID: "give your location id" });
            }, 
```

希望这会解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:57:23.747

如果您考虑使用休息服务来使用 /Location/Departments/{Id} 之类的链接怎么办？

# ios - 自定义 TableView iOS

> ID：15022481
> 
> 赞同：-3
> 
> 时间：2013-02-22T10:52:34.417
> 
> 标签：ios, storyboard, customization, tableview

我在 Storyboard 中使用自定义单元格制作了一个表格视图：

![桌子](../Images/6cd9989d61fd7162aef38c6190388398.png)

我如何使用情节提要在代码中的图片上填写并制作此表格？对此表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:04:38.190

在 Storyboard 中包含 UITableView 的 ViewController 中，将 UITableViewCell 拖入 UITableView 并对其进行自定义。使新类继承自 UITableViewCell 以处理与此 Cell 有关的所有功能。同样在 StoryBoard 中，使用您创建的新类更改自定义单元格的类

# mysql - 从多个左连接按日期排序

> ID：15022486
> 
> 赞同：0
> 
> 时间：2013-02-22T10:52:41.877
> 
> 标签：mysql

我有以下问题。我有 3 个表，1 个带发票，1 个带发票发送记录，1 个带发票付款记录。

只有在发送发票时才能支付发票。每次付款或发送都具有基于列 invoice_id 的关系。

所以我想要的是一个列表，限制在 5 张发票上，按最新操作（发送或付款）排序。因此，如果发票的最后一次发送（基于 date_time）较新，那么发票的最后一次付款（基于 date_time）必须在列表顶部，反之亦然。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:57:33.400

尝试这样的事情：

```
SELECT (SELECT MAX(DATE) 
             FROM (SELECT DATE
                     FROM PAYMENTS P
                    WHERE P.INVOICE_ID = IN.INVOICE_ID
                    UNION 
                   SELECT DATE
                     FROM SENDS S
                    WHERE S.INVOICE_ID = IN.INVOICE_ID) SUB) MAX_DATE,
       IN.* 
  FROM INVOICE IN
 ORDER BY 1 DESC
 LIMIT 5 
```

**更新：**

上面的 SQL 不起作用，因为无法在第二级子选择中访问表发票。

试试这个选择：

```
SELECT V.* 
  FROM verkoopfacturen AS V 
   LEFT JOIN (SELECT invoice_id, 
                     MAX(datum) as max_date
               FROM (SELECT P.invoice_id,
                            P.date AS datum 
                        FROM invoice_payments AS P 
                       UNION 
                      SELECT S.file_id,
                             S.datum AS datum 
                        FROM email AS S) SUB
               GROUP BY SUB.invoice_id) SUB2 on V.Verkoopfact_InfId = SUB2.invoice_id
  ORDER BY SUB2.MAX_DATE DESC 
  LIMIT 5 
```

# c++ - 提升基于职业输入的精神业力生成

> ID：15022491
> 
> 赞同：2
> 
> 时间：2013-02-22T10:52:56.757
> 
> 标签：c++, boost, lazy-evaluation, boost-spirit, boost-spirit-karma

嗨，我想要的是根据我传递给生成器的内容生成一些文本，例如

```
struct C1
{
    int Getter()
    {
        return 3;
    }
};

struct C2
{
    int Getter()
    {
        return 5;
    }
};

template<typename Iterator>
struct Temp:
    public karma::grammar<Iterator,boost::variant<C1*,C2*>()>
{
    Temp():
        Temp::base_type(start1)
    {
        using karma::int_;
        using karma::float_;
        using karma::lit;

        start1 = c1 | c2;
        c1 = karma::lazy(boost::phoenix::bind(&C1::Getter,karma::_1));
        c2 = karma::lazy(boost::phoenix::bind(&C2::Getter,karma::_1));

    }

    karma::rule<Iterator,boost::variant<C1*,C2*>()> start1;
    karma::rule<Iterator,C1*() > c1;
    karma::rule<Iterator,C2*() > c2; 
```

...然后调用类似的东西

```
std::string str;
std::back_insert_iterator<std::string> out(str);
Temp<std::back_insert_iterator<std::string> > bla;
C1 c1;
karma::generate(out, bla,&c1); 
```

我什至不确定我是否使用了正确的生成器，但它说惰性能够从属性中的内容转换为返回内部函子的内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:03:58.847

最简单的解决方法是

```
c1 = int_ [ karma::_1 = boost::phoenix::bind(&C1::Getter,karma::_val) ];
c2 = int_ [ karma::_1 = boost::phoenix::bind(&C2::Getter,karma::_val) ]; 
```

* * *

### `BOOST_FUSION_ADAPT_ADT`

我想你也想了解[BOOST_FUSION_ADAPT_ADT()](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/adapted/adapt_adt.html)：

```
struct C1 { int Getter() const { return 3; } void Setter(int){} }; 
struct C2 { int Getter() const { return 5; } void Setter(int){} }; 

BOOST_FUSION_ADAPT_ADT(C1, (int,int,obj.Getter(),obj.Setter(val)));
BOOST_FUSION_ADAPT_ADT(C2, (int,int,obj.Getter(),obj.Setter(val))); 
```

* * *

## 备选方案 1：`attr_cast`

使用`attr_cast`和传递价值。为简洁起见，这是一个没有语法的示例：

```
using namespace karma;
std::cout << karma::format("C1:" << attr_cast<C1>(int_) | "C2:" << attr_cast<C2>(int_), c1) << "\n";
std::cout << karma::format("C1:" << attr_cast<C1>(int_) | "C2:" << attr_cast<C2>(int_), c2) << "\n"; 
```

哪个打印

```
C1:3
C2:5 
```

* * *

## 备选方案 2：使用语法/规则

```
typedef boost::variant<C1,C2> Var;

template<typename Iterator>
struct Generator: public karma::grammar<Iterator,Var()>
{
    Generator(): Generator::base_type(start)
    {
        using namespace karma;

        start = "grammar: " << (c1 | c2);
        c1 = "C1:" << attr_cast<int>(int_);
        c2 = "C2:" << attr_cast<int>(int_);
    }

  private:
    karma::rule<Iterator,Var()> start;
    karma::rule<Iterator,C1()> c1;
    karma::rule<Iterator,C2()> c2;
}; 
```

这里有一个完整的示例，显示了这两种替代方案： http: **[//liveworkspace.org/code/JWB9B$0](http://liveworkspace.org/code/JWB9B%240)**：

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

struct C1 { int Getter() const { return 3; } void Setter(int){} }; 
struct C2 { int Getter() const { return 5; } void Setter(int){} }; 

BOOST_FUSION_ADAPT_ADT(C1, (int,int,obj.Getter(),obj.Setter(val)));
BOOST_FUSION_ADAPT_ADT(C2, (int,int,obj.Getter(),obj.Setter(val)));

typedef boost::variant<C1,C2> Var;

template<typename Iterator>
struct Generator: public karma::grammar<Iterator,Var()>
{
    Generator(): Generator::base_type(start)
    {
        using namespace karma;

        start = "grammar: " << (c1 | c2);
        c1 = "C1:" << attr_cast<int>(int_);
        c2 = "C2:" << attr_cast<int>(int_);
    }

  private:
    karma::rule<Iterator,Var()> start;
    karma::rule<Iterator,C1()> c1;
    karma::rule<Iterator,C2()> c2;
};

typedef boost::spirit::ostream_iterator It;

int main()
{
    C1 c1;
    C2 c2;

    using namespace karma;
    std::cout << karma::format("C1:" << attr_cast<C1>(int_) | "C2:" << attr_cast<C2>(int_), c1) << "\n";
    std::cout << karma::format("C1:" << attr_cast<C1>(int_) | "C2:" << attr_cast<C2>(int_), c2) << "\n";

    // or using a grammar:
    Generator<It> bla;
    std::cout << karma::format(bla, Var(c1)) << "\n";
    std::cout << karma::format(bla, Var(c2)) << "\n";
} 
```

# php - 更改 form_error 上的输入元素类？

> ID：15022492
> 
> 赞同：0
> 
> 时间：2013-02-22T10:53:01.420
> 
> 标签：php, codeigniter, validation

因此，当我在该元素上收到 form_error 时，我想更改该输入元素的样式。

在我的控制器中，我拥有所有 form_validation 规则和每个 inputelement 属性

```
 if ($this->form_validation->run() == FALSE)
    {
        $data['username'] = array(
            'name' => 'username',
            'id' => 'username'
            );

        $data['password'] = array(
            'type' => 'password',
            'name' => 'password',
            'id' => 'password'
            );
    } 
```

在我看来，我正在打印它们。

```
 <li>
                <label for="username" class="bold">Username</label>
                <span class="input-prepend">$</span>
                <?php echo form_input($username); ?>
            </li> 
```

所以，我需要一种简单的方法来更改出现表单错误的对应元素上的类。有什么简单的方法可以做到这一点吗？

请让我知道如果我解释不好:) 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:00:05.630

你可以做这样的事情......

```
<li<?php echo (form_error('username') == '') ? '' : ' class="yes_error"'; ?>>
    <label for="username" class="bold">Username</label>
    <span class="input-prepend">$</span>
    <?php echo form_input($username); ?>
</li> 
```

如果用户名有错误则输出

```
<li class="yes_error">
    <label for="username" class="bold">Username</label>
    <span class="input-prepend">$</span>
    ....
</li> 
```

并设计它...

```
.yes_error {
    color: #FF0000;
    background: ...
    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:56:34.260

```
<?php echo form_input($username, '', 'HERE your Css styles like style="" and javascript'); ?> 
```

为什么不看说明书？[http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)

# ruby-on-rails - Cookie 与 CookieStore 的会话

> ID：15022497
> 
> 赞同：70
> 
> 时间：2013-02-22T10:53:34.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, cookies

在 Rails 3 中，将数据存储在 cookie 中和将数据存储在会话中，会话存储设置为默认的 CookieStore 有什么区别？

例如

```
cookie[:foo] = 'bar'

# MyApp::Application.config.session_store :cookie_store, key: '_myapp_session'
session[:foo] = 'bar' 
```

据我所知，两者最终都存储在客户端 cookie 中。

您什么时候会选择使用其中一种？

谢谢。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-01T09:01:16.577

在 Rails 3 中的主要区别在于，当您使用时`cookie[:foo] = 'bar'`，用户能够看到 cookie 的值，即`'bar'`. 当您使用`session[:foo] = 'bar'`该值时，该值将由 rails 加密并存储在`_myapp_session`cookie 中。

`cookie[]`当您要存储的信息未绑定到会话时，例如当用户选择首选语言时，您将使用该格式。

`session[]`当您想要存储与当前会话相关的信息（例如用户的信息）时，您将使用该格式`id`。

[默认情况下，Rails 4 中的 cookie 已加密。](https://api.rubyonrails.org/classes/ActionDispatch/Session/CookieStore.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-25T12:39:19.247

Rails 为会话哈希提供了多种存储机制。最重要的是`ActiveRecord::SessionStore`和`ActionDispatch::Session::CookieStore`。

有许多会话存储，即 Rails 保存会话哈希和会话 ID 的地方。由于性能和维护原因，大多数实际应用程序选择`ActiveRecord::SessionStore`（或其衍生产品之一）而不是文件存储。`ActiveRecord::SessionStore`将会话 ID 和哈希保存在数据库表中，并保存和检索每个请求的哈希。

Rails 2 引入了一个新的默认会话存储，`CookieStore`. `CookieStore`将会话哈希直接保存在客户端的 cookie 中。服务器从 cookie 中检索会话哈希并消除对会话 ID 的需要。这将大大提高应用程序的速度，但这是一个有争议的存储选项，您必须考虑它的安全隐患：

Cookie 意味着 4kB 的严格大小限制。这很好，因为您不应该在会话中存储大量数据，如前所述。在会话中存储当前用户的数据库 ID 通常是可以的。客户端可以看到您在会话中存储的所有内容，因为它以明文形式存储（实际上是 Base64 编码的，因此未加密）。所以，当然，你不想在这里存储任何秘密。为了防止会话哈希篡改，从会话中计算出一个摘要，其中包含服务器端的秘密，并插入到 cookie 的末尾。这意味着此存储的安全性取决于此机密（以及摘要算法，该算法默认为 SHA512，尚未受到损害）。所以不要使用微不足道的秘密，即字典中的单词，或者少于 30 个字符的单词

# android - androidplot中的蓝屏

> ID：15022508
> 
> 赞同：2
> 
> 时间：2013-02-22T10:54:04.560
> 
> 标签：android, plot, androidplot

我正在尝试图书馆 androidplot 来创建一些情节。我从源代码复制代码，但只有我看到的是带有黄线的蓝屏。谁能告诉我出了什么问题？这是代码：

```
package com.example.actionbartest;

import java.util.Arrays;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.graphics.DashPathEffect;
import android.graphics.Paint;
import android.os.Bundle;
import android.widget.CheckBox;
import android.widget.CompoundButton;

import com.androidplot.series.XYSeries;
import com.androidplot.ui.AnchorPosition;
import com.androidplot.ui.DynamicTableModel;
import com.androidplot.ui.SizeLayoutType;
import com.androidplot.ui.SizeMetrics;
import com.androidplot.util.PaintUtils;
import com.androidplot.xy.AxisValueLabelFormatter;
import com.androidplot.xy.FillDirection;
import com.androidplot.xy.LineAndPointFormatter;
import com.androidplot.xy.RectRegion;
import com.androidplot.xy.SimpleXYSeries;
import com.androidplot.xy.XLayoutStyle;
import com.androidplot.xy.XPositionMetric;
import com.androidplot.xy.XYPlot;
import com.androidplot.xy.XYRegionFormatter;
import com.androidplot.xy.XYStepMode;
import com.androidplot.xy.YLayoutStyle;
import com.androidplot.xy.YValueMarker;

public class XYRegionExampleActivity extends Activity {
    private static final int FONT_LABEL_SIZE = 13;
    private XYPlot plot;
    private final Number[] series1Numbers = {1, 4, 9, 9, 5, 2, 12};
    private final Number[] series2Numbers = {5, 2, 3, 2, 17, 9, 1};
    private final Number[] series3Numbers = {8, 9, 2, 1, 2, 1, 2};
    private final Number[] series4Numbers = {2, 1, 1, 11, 6, 5, 7};
    private LineAndPointFormatter lpFormatter1;
    private LineAndPointFormatter lpFormatter2;
    private LineAndPointFormatter lpFormatter3;
    private LineAndPointFormatter lpFormatter4;
    static final float PLOT_TITLE_FONT_SIZE_DP = 15;
    static final float PLOT_DOMAIN_LABEL_FONT_SIZE_DP = 10;
    static final float PLOT_RANGE_LABEL_FONT_SIZE_DP = 10;
    static final float PLOT_TICK_LABEL_FONT_SIZE_DP = 10;
    private XYSeries s1;
    private XYSeries s2;
    private XYSeries s3;
    private XYSeries s4;

    private RectRegion rr1;
    private RectRegion rr2;
    private RectRegion rr3;
    private RectRegion rr4;
    private RectRegion rr5;

    private XYRegionFormatter rf1;
    private XYRegionFormatter rf2;
    private XYRegionFormatter rf3;
    private XYRegionFormatter rf4;
    private XYRegionFormatter rf5;

    private CheckBox s1CheckBox;
    private CheckBox s2CheckBox;
    private CheckBox s3CheckBox;
    private CheckBox s4CheckBox;

    private CheckBox r1CheckBox;
    private CheckBox r2CheckBox;
    private CheckBox r3CheckBox;
    private CheckBox r4CheckBox;
    private CheckBox r5CheckBox;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.xyregion_example);
        plot = (XYPlot) findViewById(R.id.xyRegionExamplePlot);
        s1CheckBox = (CheckBox) findViewById(R.id.s1CheckBox);
        s1CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onS1CheckBoxClicked();
            }
        });

        s2CheckBox = (CheckBox) findViewById(R.id.s2CheckBox);
        s2CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onS2CheckBoxClicked();
            }
        });

        s3CheckBox = (CheckBox) findViewById(R.id.s3CheckBox);
        s3CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onS3CheckBoxClicked();
            }
        });

        s4CheckBox = (CheckBox) findViewById(R.id.s4CheckBox);
        s4CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onS4CheckBoxClicked();
            }
        });

        r1CheckBox = (CheckBox) findViewById(R.id.r1CheckBox);
        r1CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onCheckBoxClicked(r1CheckBox, lpFormatter1, rf1, rr1);
            }
        });

        r2CheckBox = (CheckBox) findViewById(R.id.r2CheckBox);
        r2CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onCheckBoxClicked(r2CheckBox, lpFormatter1, rf2, rr2);
            }
        });

        r3CheckBox = (CheckBox) findViewById(R.id.r3CheckBox);
        r3CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onCheckBoxClicked(r3CheckBox, lpFormatter2, rf3, rr3);
            }
        });

        r4CheckBox = (CheckBox) findViewById(R.id.r4CheckBox);
        r4CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onCheckBoxClicked(r4CheckBox, lpFormatter2, rf4, rr4);
            }
        });

        r5CheckBox = (CheckBox) findViewById(R.id.r5CheckBox);
        r5CheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                onCheckBoxClicked(r5CheckBox, lpFormatter2, rf5, rr5);
            }
        });

        seriesSetup();
        markerSetup();
        axisLabelSetup();
        regionSetup();
        makePlotPretty();
        //plot.disableAllMarkup();
    }

    private void onS1CheckBoxClicked() {
        if(s1CheckBox.isChecked()) {
            plot.addSeries(s1, lpFormatter1);
            r1CheckBox.setEnabled(true);
            r2CheckBox.setEnabled(true);
        } else {
            plot.removeSeries(s1);
            r1CheckBox.setEnabled(false);
            r2CheckBox.setEnabled(false);
        }
        plot.redraw();
    }

    private void onS2CheckBoxClicked() {
        if(s2CheckBox.isChecked()) {
            plot.addSeries(s2, lpFormatter2);
            r3CheckBox.setEnabled(true);
            r4CheckBox.setEnabled(true);
            r5CheckBox.setEnabled(true);
        } else {
            plot.removeSeries(s2);
            r3CheckBox.setEnabled(false);
            r4CheckBox.setEnabled(false);
            r5CheckBox.setEnabled(false);
        }
        plot.redraw();
    }

    private void onS3CheckBoxClicked() {
        if(s3CheckBox.isChecked()) {
            plot.addSeries(s3, lpFormatter3);
        } else {
            plot.removeSeries(s3);
        }
        plot.redraw();
    }

    private void onS4CheckBoxClicked() {
        if(s4CheckBox.isChecked()) {
            plot.addSeries(s4, lpFormatter4);
        } else {
            plot.removeSeries(s4);
        }
        plot.redraw();
    }

    /**
     * Processes a check box event
     * @param cb The checkbox event origin
     * @param lpf LineAndPointFormatter with which rr and rf are to be added/removed
     * @param rf The XYRegionFormatter with which rr should be rendered
     * @param rr The RectRegion to add/remove
     */
    private void onCheckBoxClicked(CheckBox cb, LineAndPointFormatter lpf,
                                   XYRegionFormatter rf, RectRegion rr) {
        if(cb.isChecked()) {
            lpf.removeRegion(rr1);
        } else {
            lpf.addRegion(rr, rf);
        }

    }

    /**
     * Cleans up the plot's general layout and color scheme
     */
    private void makePlotPretty() {
        // use a 2x5 grid with room for 10 items:
        plot.getLegendWidget().setTableModel(new DynamicTableModel(2, 5));

        // add a semi-transparent black background to the legend
        // so it's easier to see overlaid on top of our plot:
        Paint bgPaint = new Paint();
        bgPaint.setColor(Color.BLACK);
        bgPaint.setStyle(Paint.Style.FILL);
        bgPaint.setAlpha(140);

        plot.getLegendWidget().setBackgroundPaint(bgPaint);

        // adjust the padding of the legend widget to look a little nicer:
        plot.getLegendWidget().setPadding(10, 1, 1, 1);

        // adjust the legend size so there is enough room
        // to draw the new legend grid:
        plot.getLegendWidget().setSize(
            new SizeMetrics(70, SizeLayoutType.ABSOLUTE, 80, SizeLayoutType.ABSOLUTE));

        // reposition the grid so that it rests above the bottom-left
        // edge of the graph widget:
        plot.position(
                plot.getLegendWidget(),
                20,
                XLayoutStyle.ABSOLUTE_FROM_RIGHT,
                35,
                YLayoutStyle.ABSOLUTE_FROM_BOTTOM,
                AnchorPosition.RIGHT_BOTTOM);

        // make our domain and range labels invisible:
        plot.getDomainLabelWidget().setVisible(false);
        plot.getRangeLabelWidget().setVisible(false);

        plot.getGraphWidget().setRangeLabelHorizontalOffset(-1);

        // add enough space to ensure range value labels arent cut off on the left/right:
        plot.getGraphWidget().setRangeLabelWidth(25);

        // add enough space to make sure domain value labels arent cut off on the bottom:
        plot.getGraphWidget().setDomainLabelWidth(15);

        plot.getGraphWidget().setDomainLabelVerticalOffset(-6);
        plot.setBackgroundPaint(null);
        plot.getGraphWidget().setBackgroundPaint(null);
        plot.setBorderPaint(null);
        plot.getGraphWidget().getGridBackgroundPaint().setColor(Color.WHITE);

        Context ctx = getApplicationContext();
        PaintUtils.setFontSizeDp(ctx,
            plot.getDomainLabelWidget().getLabelPaint(), PLOT_DOMAIN_LABEL_FONT_SIZE_DP);
        PaintUtils.setFontSizeDp(ctx,
            plot.getRangeLabelWidget().getLabelPaint(), PLOT_RANGE_LABEL_FONT_SIZE_DP);
        PaintUtils.setFontSizeDp(ctx,
            plot.getGraphWidget().getRangeOriginLabelPaint(), PLOT_TICK_LABEL_FONT_SIZE_DP);
        PaintUtils.setFontSizeDp(ctx,
            plot.getGraphWidget().getRangeLabelPaint(), PLOT_TICK_LABEL_FONT_SIZE_DP);
        PaintUtils.setFontSizeDp(ctx,
            plot.getGraphWidget().getDomainOriginLabelPaint(), PLOT_TICK_LABEL_FONT_SIZE_DP);
        PaintUtils.setFontSizeDp(ctx,
            plot.getGraphWidget().getDomainLabelPaint(), PLOT_TICK_LABEL_FONT_SIZE_DP);
        PaintUtils.setFontSizeDp(ctx,
            plot.getTitleWidget().getLabelPaint(), PLOT_TITLE_FONT_SIZE_DP);
        plot.getGraphWidget().getGridLinePaint().setPathEffect(new DashPathEffect(new float[]{1, 2, 1, 2}, 0));
        plot.getTitleWidget().pack();
    }

    /*private void showS1() {
        plot.addSeries(s1, lpFormatter1);
    }*/

    /*private void showS2() {
        plot.addSeries(s2, lpFormatter2);
    }*/

    /*private void showS3() {
        plot.addSeries(s3, lpFormatter3);
    }*/

    /*private void showS4() {
        plot.addSeries(s4, lpFormatter4);
    }*/

    /**
     * Create 4 XYSeries from the values defined above add add them to the plot.
     * Also add some arbitrary regions.
     */
    private void seriesSetup() {

        // SERIES #1:
        lpFormatter1 = new LineAndPointFormatter(
                Color.rgb(100, 25, 20),
                Color.rgb(4, 100, 88),
                Color.rgb(66, 100, 3));
        lpFormatter1.setFillPaint(null);
        lpFormatter1.setVertexPaint(null);
        lpFormatter1.getLinePaint().setShadowLayer(0, 0, 0, 0);

        s1 = new SimpleXYSeries(Arrays.asList(series1Numbers),
            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "S1");

        plot.addSeries(s1, lpFormatter1);

        // SERIES #2:
        lpFormatter2 = new LineAndPointFormatter(
                Color.rgb(100, 25, 200),
                Color.rgb(114, 100, 88),
                Color.rgb(66, 100, 200));

        lpFormatter2.setFillPaint(null);
        lpFormatter2.setVertexPaint(null);
        lpFormatter2.getLinePaint().setShadowLayer(0, 0, 0, 0);

        s2 = new SimpleXYSeries(Arrays.asList(series2Numbers),
            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "S2");

        plot.addSeries(s2, lpFormatter2);

        // SERIES #3:
        lpFormatter3 = new LineAndPointFormatter(
                Color.rgb(200, 25, 200),
                Color.rgb(200, 100, 88),
                Color.rgb(66, 100, 100));
        lpFormatter3.setFillPaint(null);
        lpFormatter3.setVertexPaint(null);
        lpFormatter3.getLinePaint().setShadowLayer(0, 0, 0, 0);

        s3 = new SimpleXYSeries(Arrays.asList(series3Numbers),
            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "S3");

        plot.addSeries(s3, lpFormatter3);

        // SERIES #4:
        lpFormatter4 = new LineAndPointFormatter(
                Color.rgb(220, 25, 20),
                Color.rgb(4, 220, 88),
                Color.rgb(1, 100, 225));
        lpFormatter4.setFillPaint(null);
        lpFormatter4.setVertexPaint(null);
        lpFormatter4.getLinePaint().setShadowLayer(0, 0, 0, 0);
        s4 = new SimpleXYSeries(Arrays.asList(series4Numbers),
            SimpleXYSeries.ArrayFormat.Y_VALS_ONLY,"S4");
        plot.addSeries(s4, lpFormatter4);

        plot.setTicksPerRangeLabel(3);
        plot.setDomainStep(XYStepMode.INCREMENT_BY_VAL, 1);
    }

    /**
     * Add some color coded regions to our axis labels.
     */
    private void axisLabelSetup() {
        plot.getGraphWidget().addRangeAxisValueLabelRegion(Double.NEGATIVE_INFINITY, 3, new AxisValueLabelFormatter(Color.RED));
        plot.getGraphWidget().addRangeAxisValueLabelRegion(3, 7, new AxisValueLabelFormatter(Color.BLUE));
    }

    /**
     * Add some markers to our plot.
     */
    private void markerSetup() {

        // the easy way to add a marker (uses default font color and positioning):
        plot.addMarker(new YValueMarker(3, "Marker #1"));

        // the comprehensive way:
        plot.addMarker(new YValueMarker(
                7,                                          // y-val to mark
                "Marker #2",                                // marker label
                new XPositionMetric(                        // object instance to set text positioning on the marker
                        3,                                  // 3 pixel positioning offset
                        XLayoutStyle.ABSOLUTE_FROM_LEFT    // how/where the positioning offset is applied
                ),
                Color.BLUE,                                 // line paint color
                Color.BLUE                                  // text paint color
        ));
    }

    /**
     * Add some fill regions to our series data
     */
    private void regionSetup() {

        // create a new region:
        rf1 = new XYRegionFormatter(Color.RED);

        // we want to create a vertical region so we set the minX/maxX values to
        // negative and positive infinity repectively:
        rr1 = new RectRegion(Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, 0, 3, "R1");

        // add the new region to the formatter for this series:
        lpFormatter1.addRegion(rr1, rf1);

        // and another region:
        rf2 = new XYRegionFormatter(Color.BLUE);
        rr2 = new RectRegion(Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, 3, 7, "R2");
        lpFormatter1.addRegion(rr2, rf2);
        lpFormatter1.setFillDirection(FillDirection.RANGE_ORIGIN);
        plot.setUserRangeOrigin(3);

        // the next three regions are horizontal regions with minY/maxY
        // set to negative and positive infinity respectively.
        rf3 = new XYRegionFormatter(Color.GREEN);
        rf4 = new XYRegionFormatter(Color.YELLOW);
        rf5 = new XYRegionFormatter(Color.argb(130,255,0,0));

        rr3 = new RectRegion(0, 2, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, "R3");
        lpFormatter2.addRegion(rr3, rf3);

        rr4 = new RectRegion(2, 4, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, "R4");
        lpFormatter2.addRegion(rr4, rf4);

        rr5 =new RectRegion(4, Double.POSITIVE_INFINITY, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, "R5");
        lpFormatter2.addRegion(rr5, rf5);

        lpFormatter2.setFillDirection(FillDirection.RANGE_ORIGIN);
        plot.setUserRangeOrigin(3);
    }
} 
```

和 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >

    <com.androidplot.xy.XYPlot
            android:id="@+id/xyRegionExamplePlot"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            title="XYRegion Example"
            android:layout_weight="1"
            />

    <LinearLayout
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:orientation="horizontal">
        <CheckBox android:id="@+id/s1CheckBox"
                  android:text="S1"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/s2CheckBox"
                  android:text="S2"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/s3CheckBox"
                  android:text="S3"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/s4CheckBox"
                  android:text="S4"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
    </LinearLayout>

    <LinearLayout
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:orientation="horizontal">
        <CheckBox android:id="@+id/r1CheckBox"
                  android:text="R1"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/r2CheckBox"
                  android:text="R2"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/r3CheckBox"
                  android:text="R3"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/r4CheckBox"
                  android:text="R4"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
        <CheckBox android:id="@+id/r5CheckBox"
                  android:text="R5"
                  android:checked="true"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"/>
    </LinearLayout>

</LinearLayout> 
```

# xslt - 使用 XSLT 1.0 拆分属性字符并输出它们

> ID：15022510
> 
> 赞同：1
> 
> 时间：2013-02-22T10:54:05.260
> 
> 标签：xslt

我需要根据给定的分隔符属性使用 XSLT 1.0 转换以下编码。文本应根据给定的分隔符进行分隔：

**输入：**

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
<math display="inline"><mfenced separators=", : . ;"><mn>1</mn><mtext>b</mtext><mo>%</mo><mi>d</mi><mi>e</mi></mfenced></math>
<math display="inline"><mfenced separators=", ;"><mi>a</mi><mi>b</mi><mi>c</mi><mi>d</mi><mi>e</mi></mfenced></math>
<math display="inline"><mfenced separators=", : . ; ; : . ;"><mi>a</mi><mi>b</mi><mi>c</mi><mi>d</mi><mi>e</mi></mfenced></math>
</chapter> 
```

**需要输出：**

```
1,b:%.d;e
a,b;c;d;e
a,b:c.d;e 
```

另请注意，如果分隔符太多，多余的将被忽略。如果给出了分隔符，但太少，则根据需要重复最后一个

**仅当分隔符小于子元素时，我才能获得输出。**

**XSLT 1.0 试过：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML">

<xsl:template match="m:mfenced">
<xsl:variable name="text" select="@separators"/>
<xsl:for-each select="child::*">
<xsl:apply-templates/>
<xsl:choose>
<xsl:when test="contains($text,' ')">
<xsl:variable name="attr" select="string-length(translate($text, ' ', ''))"/>
<xsl:variable name="ch" select="count(parent::*/child::*)-1"/>
<xsl:if test="$ch=$attr"><xsl:value-of select="substring($text,count(preceding-sibling::*)+position(),1)"/></xsl:if>

<xsl:if test="$ch gt $attr">
<xsl:if test="not(substring($text,count(preceding-sibling::*)+position(),1)='')"><xsl:value-of select="substring($text,count(preceding-sibling::*)+position(),1)"/></xsl:if>
<xsl:if test="(substring($text,count(preceding-sibling::*)+position(),1)='')"><xsl:value-of select="substring($text,count(preceding-sibling::*)+1,1)"/></xsl:if>
</xsl:if>

<xsl:if test="$ch lt $attr and count(following-sibling::*)>0"><xsl:value-of select="substring($text,count(preceding-sibling::*)+position(),1)"/></xsl:if>
</xsl:when>
<xsl:otherwise><xsl:if test="count(following-sibling::*)>0"><xsl:value-of select="$text"/></xsl:if></xsl:otherwise></xsl:choose>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:14:21.153

下面的解决方案是基于获取每个<m:mi>在<m:fenced>元素中的位置来获取下一个要输出的算子。

笔记。我假设用于表示每个运算符的字符串长度为 1。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML">

    <xsl:output method="text" />

    <!-- Ignore all text nodes (just for demo) -->
    <xsl:template match="text()" />

    <xsl:template match="m:mfenced">
        <!-- Print children values and operators -->
        <xsl:apply-templates select="*" mode="list-op">
            <xsl:with-param name="separator-str" select="@separators" />
            <xsl:with-param name="separator-len" select="string-length(@separators)" />
        </xsl:apply-templates>
        <!-- Print new line -->
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

    <!-- Last m:mi elements for each m:mfenced are just printed -->
    <xsl:template match="*[last()]" mode="list-op">
        <xsl:value-of select="."/>
    </xsl:template>

    <!-- In this template we use the position() function to calculate the next
         operator that is going to be outputted -->
    <xsl:template match="*" mode="list-op">
        <xsl:param name="separator-str" />
        <!-- This parameter is not required, but allows us to cache
             the length of the separators string instead of calculating it
             for each m:mi element -->
        <xsl:param name="separator-len" />

        <!-- Print current value -->
        <xsl:value-of select="." />

        <!-- Calculate the separator position within the string -->
        <xsl:variable name="string-position" select="2*position() - 1" />

        <!-- Check if the position oveflows the position in the array, and
             if it does, print the last separator in the string. -->
        <xsl:choose>
            <xsl:when test="$separator-len >= $string-position">
                <xsl:value-of select="substring($separator-str, $string-position, 1)" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring($separator-str, $separator-len)" />
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>
</xsl:stylesheet> 
```

# testing - 如何自动化定制设计的基于浏览器的应用程序？

> ID：15022511
> 
> 赞同：1
> 
> 时间：2013-02-22T10:54:08.833
> 
> 标签：testing, selenium-webdriver, automated-tests, ui-automation

我们有一个 JavaScript 应用程序，它在我们自己定制设计的浏览器上运行。现在，我遇到了在该浏览器上自动化我们的应用程序的情况。

我在使用 Java 的 Selenium Webdriver 方面拥有丰富的经验。但它不会自动化它。

请让我知道我们可以使用 selenium 自动化定制设计的浏览器吗？如果是，请解释。

或者

是否有任何开源工具可以使用 Java 作为脚本语言来自动化它。

我试过Sikuli，但速度很慢。请提出其他建议。

我还听说过 Google Window Tester Pro。对我有用吗。如果是，请让我知道如何在 Eclipse 中设置它。

提前致谢..

# java - 通过 Clojure 打印机和阅读器往返 Java 类

> ID：15022512
> 
> 赞同：5
> 
> 时间：2013-02-22T10:54:09.110
> 
> 标签：java, serialization, printing, clojure, barcode-scanner

我有一个 Java 类`Vector2`，我想说服它与 Clojure 阅读器“玩得很好”。

```
(def a (vec2 1 2))
(print-str a)
=> "#<Vector2 [1 2]>" 
```

理想情况下，我希望课程以 Clojure 阅读器可以阅读的形式打印出来。即我希望以下内容返回true：

```
(= a (read-string (print-str a))) 
```

实现这种往返能力的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:15:53.787

您需要为您的类/类型提供`print-dup`多种`print-method`方法。

查看[core.clj](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L3311)

前任：

```
(import 'java.util.Hashtable)
(defmethod print-method Hashtable [x writer] 
      (binding [*out* writer] 
         (print (let [h  (gensym)] 
                 `(let [~h (Hashtable.)] 
                     ~@(map (fn [i] 
                               `(.put ~h ~(str "\"" (.getKey i) "\"") ~(.getValue i)  ) ) x) ~h)))  ))
(def a (Hashtable.))
(.put a "a" 1)
(.put a "b" 2)
(= a (eval (read-string (print-str a)))) 
```

# iphone - 自定义词典实施：我可以创建自定义词缀文件吗？

> ID：15022514
> 
> 赞同：2
> 
> 时间：2013-02-22T10:54:19.943
> 
> 标签：iphone, ios, objective-c, dictionary, hunspell

我正在使用这个[Hunsplell iOS 实现](https://github.com/aaronSig/Hunspell-iOS)。

我想用我选择的单词创建我的自定义词典和词缀文件。

我知道如何创建 .dic 文件，但我不知道如何为相应的 .dic 文件生成扩展名为 .aff 的附加文件。有没有我通过谷歌搜索没有得到的工具或技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:06:26.910

我不确定这是否满足您的需求，但在我的情况下，由于我正在构建的自定义词典是英文的，我只是使用标准 en_US.aff 并将其重命名以匹配我的自定义词典名称。

我在我构建并运行良好的应用程序中使用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:06:07.070

我见过的最好的解释是在 Chromium：[https ://sites.google.com/a/chromium.org/dev/developers/how-tos/editing-the-spell-checking-dictionaries](https://sites.google.com/a/chromium.org/dev/developers/how-tos/editing-the-spell-checking-dictionaries)

查看来自 OpenOffice 的其他流行词典会让您了解一些编写 .aff 规则的更复杂的方法： [http](http://extensions.services.openoffice.org/dictionary)
://extensions.services.openoffice.org/dictionary 大多数词典都遵循 GNU GPL。

AFAIK，.aff 文件是编写的，不一定会生成，所以我不知道有任何工具。真正的困难在于给定语言中的单词量、可能的转换以及手头语言的形态复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T06:43:07.903

好的，对我有用的解决方案分为两部分：

1.  自己编写 .aff 文件是一项相当漫长而艰巨的任务。因此，如果您想创建自己的自定义词典（前提是它不是很复杂且词汇量不是很深），只需在记事本中创建一个空文件并以 .aff 扩展名保存它，它就可以正常工作。

2.  我遇到了这个问题，因为我想将两个不同的 Hunspell 词典与其 .aff 和 .dic 文件合并。我发现了一个出色的免费[Hunspell 合并](https://code.google.com/p/hunspell-merge/downloads/list)工具，它可以合并 Hunspell 词典（.aff 和 .dic 文件），生成组合的 .aff 和 .dic 文件。

# java - 是否有不混淆职责的 GWT Maven 项目结构？

> ID：15022516
> 
> 赞同：5
> 
> 时间：2013-02-22T10:54:24.230
> 
> 标签：java, gwt, maven

我刚刚开始使用 Maven 作为构建系统进行 GWT 开发。

我来自 Java + Flex 世界，所以很自然地，我拥有完全分离的客户端模块和服务器端模块。

在深入挖掘 GWT 的最佳实践并越来越深入地挖掘的同时，对我而言，GWT 项目的默认配置越来越像是一团糟的责任。特别是在涉及多模块项目时。

我确实明白，约定规定服务器端逻辑属于“服务器”包，共享代码属于“共享”，以及由 GWT 编译器在“客户端”包中编译为 HTML+JavaScript 的东西。所有代码都转到 src/main/java。到目前为止，一切都很好。

无论我如何尝试查看它......对我来说，“客户端”包中的东西只是死代码。即使 java 编译器将其编译为类，这些类也不会在运行时使用，并且只需要在编译阶段向 GWT 编译器提供输入。因此，即使它看起来像 Java，它实际上也不是而且只是看起来像 Java。将这些放在与“实时”代码相同的 jar 中感觉有点脏。

像这样的maven结构不会更有意义：

```
/src/
/src/main/
/src/main/java
/src/main/shared
/src/main/gwt 
```

并让 java-compiler-plugin 使用 src/main/java 和 src/main/shared 并让 GWT 编译器使用 src/main/gwt 和 src/main/shared？

此外，如果构建会产生两种类型的工件，感觉会好很多……普通的“jars”包含来自 src/main/java 和 src/main/shared 的类和第二个“gwt”，它包含类和源src/main/gwt 和 src/main/shared。

我不会向一些混合的 jar 添加依赖项，但可以决定是否要导入一些 GWT 组件或是否要导入一些服务器端功能。

接下来是 GWT 默认将 xml、资源和其他东西放在 src/main/java ... XML && Resources != Java ;-)

或者这一切有什么真正的原因，我根本还没有意识到……或者我只是不得不开始变得肮脏而不是担心这样的事情吗？

克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:08:40.370

不久前我得出了同样的结论，并创建了几个原型来帮助入门：[https](https://github.com/tbroyer/gwt-maven-archetypes) ://github.com/tbroyer/gwt-maven-archetypes （[公告](https://groups.google.com/d/topic/codehaus-mojo-gwt-maven-plugin-users/vrLAcqp5oAg/discussion)）。

那些原型仍然有`*.gwt.xml`等。into `src/main/java`，因为 Eclipse 的 Google 插件不支持将它们放在其他任何地方（我听说它已在最近的版本中修复但尚未检查）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T11:40:18.123

我还尝试将 GWT 客户端代码与服务器端代码分开。我使用的方法是拥有一个包含 2 个子项目的顶级项目，一个用于服务器端，一个用于客户端。顶级项目有一个 pom.xml，其中包含每个子项目的元素。

客户端项目在 src/main/java 中包含 GWT java 源代码，在 src/main/webapp 中包含其余的 webapp 文件。服务器端项目仅包含服务器端代码。

可能不是最整洁的解决方案，但至少有一个更清晰的分离。

# windows-8 - 如何在代码中应用 DragFlickBehavior？

> ID：15022519
> 
> 赞同：0
> 
> 时间：2013-02-22T10:54:42.423
> 
> 标签：windows-8, windows-runtime

如何在后面的代码中为网格应用 win8nl DragFlickBehavior？

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:52:53.600

我得到了解决方案

```
 Win8nl.Behaviors.DragFlickBehavior behaviour = new DragFlickBehavior();
        WinRtBehaviors.Interaction.GetBehaviors(grdNew).Add(behaviour); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:14:40.537

Win8Dev 目前不支持行为。看看 [http://winrtbehaviors.codeplex.com/](http://winrtbehaviors.codeplex.com/)

作者的这篇文章展示了如何使用实现它 [http://dotnetbyexample.blogspot.co.uk/2012/03/attached-behaviors-for-windows-8-metro.html](http://dotnetbyexample.blogspot.co.uk/2012/03/attached-behaviors-for-windows-8-metro.html)

# c# - 从包含在静态对象中的 C# 字典中释放内存

> ID：15022528
> 
> 赞同：17
> 
> 时间：2013-02-22T10:55:26.303
> 
> 标签：c#, memory-leaks, garbage-collection, memory-management

我在使用 WCF Web 服务时遇到了一些问题（一些转储、内存泄漏等），我运行了一个 profillng 工具（ANTS 内存配置文件）。

只是为了发现即使处理结束（我运行特定测试然后停止），第 2 代也是 Web 服务内存的 25%。我追踪了这段内存，发现我有一个字典对象，里面满是 (null, null) 项，哈希码为 -1。

Web 服务的工作流意味着在特定的处理过程中添加项目，然后从字典中删除（只是简单的`Add`and `Remove`）。没有大碍。但似乎在删除所有项目后，字典中充满了 (null, null) `KeyValuePair`。实际上有数千个，这样它们占用了很大一部分内存并最终发生溢出，相应的强制应用程序池回收和 DW20.exe 获得了它可以获得的所有 CPU 周期。

字典实际上是`Dictionary<SomeKeyType, IEnumerable<KeyValuePair<SomeOtherKeyType, SomeCustomType>>>`（[System.OutOfMemoryException 因为大字典](https://stackoverflow.com/questions/5336011/system-outofmemoryexception-because-of-large-dictionary)）所以我已经检查了是否有某种引用保存的东西。

字典包含在一个静态对象中（以使其可以通过处理访问不同的处理线程），所以从这个问题以及更多（[静态成员是否得到垃圾收集？](https://stackoverflow.com/questions/6600093/do-static-members-ever-get-garbage-collected)）我理解为什么该字典在第 2 代。但这是还有那些（null，null）的原因？即使我从字典中删除项目，内存中总是会占用一些东西？

这不是一个速度问题，就像这个问题[Deallocate memory from large data structures in C#](https://stackoverflow.com/questions/3751871/deallocate-memory-from-large-data-structures-in-c-sharp)。似乎记忆永远不会被回收。

我可以做些什么来实际从字典中删除项目，而不仅仅是继续用 (null, null) 对填充它？还有什么我需要检查的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T12:26:12.393

字典将项目存储在哈希表中。为此在内部使用了一个数组。由于哈希表的工作方式，该数组必须始终大于实际存储的项目数（至少大 30% 左右）。Microsoft 使用 72% 的负载因子，即至少 28% 的数组将为空（请参阅[使用 C# 2.0 对数据结构进行广泛检查，](http://msdn.microsoft.com/en-us/library/ms379571%28v=vs.80%29.aspx#top)尤其是[System.Collections.Hashtable 类](http://msdn.microsoft.com/en-us/library/ms379571%28v=vs.80%29.aspx#datastructures20_2_topic5) 和[System.Collections.Generic.Dictionary 类](http://msdn.microsoft.com/en-us/library/ms379571%28v=vs.80%29.aspx#datastructures20_2_topic6)) 因此，null/null 条目可能只代表这个可用空间。

如果数组太小，会自动增长；但是，当删除项目时，数组不会缩小，但是在插入新项目时应该重新使用将被释放的空间。

如果您可以控制此字典，则可以尝试重新创建它以缩小它：

```
theDict = new Dictionary<TKey, IEnumerable<KeyValuePair<TKey2, TVal>>>(theDict); 
```

但问题可能来自实际（非空）条目。您的字典是静态的，因此垃圾收集器永远不会自动回收，除非您为其分配另一个字典或`null`(`theDict = new ...`或`theDict = null`)。这仅适用于静态的字典本身，而不适用于其条目。只要对已删除条目的引用存在于其他地方，它们就会持续存在。GC 将回收任何无法通过某些引用再访问的对象（较早或较晚）。不管这个对象是否被声明为静态的，都没有区别。对象本身不是静态的，只有它们的引用。

* * *

正如@RobertTausig 好心指出的那样，**由于 .NET Core 2.1**有了 new `Dictionary.TrimExcess()`，这是您真正想要的，但当时并不存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T12:08:23.397

看起来您需要定期回收该字典中的空间。您可以通过创建一个新的来做到这一点：`new Dictionary<a,b>(oldDict)`. 请务必以线程安全的方式执行此操作。

什么时候做这个？无论是在计时器的滴答声（60 秒？）还是发生特定数量的写入（100k？）时（您需要保留一个修改计数器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T10:23:25.670

一个解决方案可能是在静态字典上调用[Clear () 方法。](http://msdn.microsoft.com/en-us/library/b5txwy7s%28v=vs.100%29.aspx)这样，对字典的引用将保持可用，但包含的对象将被释放。

# jenkins - 由于无法解决的依赖关系导致的声纳警告

> ID：15022529
> 
> 赞同：4
> 
> 时间：2013-02-22T10:55:27.757
> 
> 标签：jenkins, sonarqube

我们的项目是一个使用 maven 构建的多模块插件项目。声纳分析运行良好，但在此过程中会产生大量警告，并且可能会产生不正确的结果。下面是项目的设置和分析过程中产生的警告。非常感谢修复这些警告的任何帮助。

项目设置：

1.  通过 jenkins 构建的声纳分析。
2.  Jenkins Sonar 插件用于运行分析。
3.  Jenkins 和 Sonar 以及 MySQL 在不同的机器上运行。

在声纳分析期间，为 Jenkins 中的声纳插件提供以下属性。

```
    -Dsonar.profile="我的项目资料"
    -Dsonar.dynamicAnalysis=reuseReports
    -Dsonar.core.codeCoveragePlugin=jacoco
    -Dsonar.jacoco.reportPath=../../releng/com.mycompany.myproject.releng.builds/coverage_data/jacoco.exec

```

以下是分析过程中产生的警告：

**注意：如果 Sonar 和 Jenkins 在同一台机器上运行，则不会生成以下警告**

1.  在对单个模块进行声纳分析之前，会引发以下错误。

```
    [警告] 在构建的此时无法解决以下依赖项，但似乎是反应器的一部分：
    15:04:52 [警告] o com.mycompany.myproject.plugins:com.mycompany.myproject.external.libraries:jar:1.0.0-SNAPSHOT（提供）
    15:04:52 [警告]尝试将构建运行到生命周期阶段“包”
    15:04:52 [警告] 在构建的此时无法解决以下依赖项，但似乎是反应器的一部分：
    15:04:52 [警告] o com.mycompany.myproject.plugins:com.mycompany.myproject.somefunctionality.framework:jar:1.0.0-SNAPSHOT（提供）

```

1.  在分析模块期间，它会抛出以下警告

```
    类 'com/mycompany/myproject/core/common/datatransfers/MyClass' 不能通过 ClassLoader 访问。
    [警告] [15:05:25.731] 类 'com/mycompany/myproject/core/common/datatransfers/MyClass' 无法通过 ClassLoader 访问。

```

1.  几乎所有模块在构建完成后分析后都标记为已跳过，但分析结果在 Sonar 中可用。

```
    [信息] com.mycompany.myproject.platform.feature ...... 跳过
    [信息] com.mycompany.myproject.somefeature.feature ...跳过
    [信息] 我的产品 ................... 已跳过
    [信息] --------------------------------------------- -------------------------
    [信息] 构建成功

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T14:31:07.203

我知道这是一个迟到的回复，但我遇到了同样的问题，结果证明我运行`mvn clean package`的是`mvn clean install`. 我在 SonarQube 邮件列表上找到[了这个帖子，希望对您有所帮助。](http://sonarqube.15.x6.nabble.com/Dependency-error-on-a-multi-module-project-with-Sonar-tp4999375p4999384.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-23T17:11:16.320

此警告可能仅仅是由于插件中的竞争条件，例如`maven-jar-plugin`（我在另一个与 Maven 3.6.3 无关的 Sonar 案例中也有相同的警告）。

让我们考虑以下项目布局：

*   `acme-parent`所有项目的父级
*   `acme-aggregator`
*   `acme-common`
*   `acme-p1`取决于`acme-common`
*   `acme-p2`取决于`acme-common`
*   `acme-p3`取决于`acme-common`
*   `acme-p4`取决于`acme-p2`和`acme-p3`

Maven 将按以下顺序构建：

*   `acme-parent`
*   `acme-common`
*   `acme-p1`, `acme-p2`,`acme-p3`和`acme-p4`

然而，对于内部机制，则是另外一回事了：

*   `acme-p2`并且`acme-p3`不在本地存储库中
*   都在反应堆里
*   在调用 中的插件期间`acme-p1`，maven 将验证在反应器中找到的工件，并尝试解析本地工件的路径但失败（因此发出警告）。

如果你移动`acme-p4`before `acme-p1`，这会改变构建顺序：警告消失（注意：依赖项需要从本地存储库中删除）因为 now ，`acme-p2`并且`acme-p3`有效地构建 before `acme-p1`。

Maven 将按以下顺序构建：

*   `acme-parent`
*   `acme-common`
*   `acme-p2`, `acme-p3`,`acme-p4`和`acme-p1`

有一些修复：

*   添加从 acme-p4 到 acme-p1 的依赖项：这将以额外小心为代价强制构建顺序（在我的实际用例中，`acme-p4`包`acme-p2`和`acme-p3`using `maven-assembly-plugin`）。
*   Reorder project in reactor：我没有使用`-T`选项进行测试，允许并发构建，但我认为它也可能失败。
*   进行`package`构建：警告中提到了它，但我怀疑 Maven 在某些情况下会引用本地存储库或远程存储库中的工件（如果您`SNAPSHOT`在它们上部署）。这可能很棘手：如果有人更改方法的签名，那么 Maven 可能会下载 SNAPSHOT（它较新，并且不在反应堆中，因此它比本地 repo 更好）并且构建可能会失败（这是纯粹是我的假设）。

这也可能是 Maven 中如何在反应器中排序模块的错误。

# android - 如何在 android 中将字符串作为 Soap 请求发送

> ID：15022531
> 
> 赞同：0
> 
> 时间：2013-02-22T10:55:32.280
> 
> 标签：android, web-services

字符串 id = array1[位置];

如何在android中将此ID作为soap请求发送

我在下面提到了Web服务端编码......请帮助我......

```
public string GetOutletID(string outlet)

 {
            xDoc.LoadXml("<PMS></PMS>");
            XmlNode Root = xDoc.DocumentElement;

            XmlElement head = xDoc.CreateElement("EMENU");
            Root.AppendChild(head);

            XmlElement dt = xDoc.CreateElement("DATETIME");
            dt.InnerText = Date;
            head.AppendChild(dt);

            elem = null;
            elem = xDoc.CreateElement("ID");
            elem.InnerText = "1";
            head.AppendChild(elem);

            elem = null;
            elem = xDoc.CreateElement("REQTYPE");
            elem.InnerText = "OUTLETID";
            head.AppendChild(elem);

            elem = null;
            elem = xDoc.CreateElement("OUTLETID");
            elem.InnerText = outlet;
            head.AppendChild(elem);
            return xDoc.InnerXml.ToString();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:10:25.267

请参考这个例子，这可能会有所帮助............

```
public static final String SOAP_URL = "http://scrwash.com/WebService/MiWebService.asmx"; public static final String SOAP_NAMESPACE = "http://tempuri.org/";

public static final String SOAP_METHOD_RegisterUser = "RegisterWithPhone";
public static final String SOAP_ACTION_RegisterUser = SOAP_NAMESPACE+SOAP_METHOD_RegisterUser;

public String getmUserName() {
    return mUserName;
}

public void setmUserName(String mUserName) {
    this.mUserName = mUserName;
}

public String getmPassword() {
    return mPassword;
}

public void setmPassword(String mPassword) {
    this.mPassword = mPassword;
}

public String doRegisteration() throws Exception {

String doRegisterationReply = RegisterUser(this.getmUserName(),this.getmPassword());
System.out.println(doRegisterationReply);
return doRegisterationReply;

    }

public static String RegisterUser(String userName, String userPassword) {

        String responce = null;
        SoapObject request = new SoapObject(SOAP_NAMESPACE,
                SOAP_METHOD_RegisterUser);

        PropertyInfo mUserName = new PropertyInfo();
        PropertyInfo mUserPass = new PropertyInfo();

        String xChg = userName.replaceAll("-", "");
        System.out.println(xChg);
        mUserName.setName("phone"); // Element at SOAP
        mUserName.setValue(xChg);

        mUserPass.setName("password"); // Element at SOAP
        mUserPass.setValue(userPassword);

        request.addProperty(mUserName);
        request.addProperty(mUserPass);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE aht = new HttpTransportSE(SOAP_URL);
        try {
            aht.call(SOAP_ACTION_RegisterUser, envelope);
            SoapPrimitive LoginResult;
            LoginResult = (SoapPrimitive) envelope.getResponse();
            System.out.println("=================Register User Results: "
                    + LoginResult.toString());
            responce = LoginResult.toString();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }

        return responce;
    } 
```

# php - 后端的magento中缺少图像上传按钮

> ID：15022532
> 
> 赞同：5
> 
> 时间：2013-02-22T10:55:34.557
> 
> 标签：php, magento, e-commerce, shopping-cart

我是 Magento 的新手...安装了 1.7 社区版。

我听说过很多关于它的事，到目前为止我并没有留下深刻的印象..无论如何我正在尝试将**图像**添加到**产品**中，但后端**缺少“****浏览文件**”和“**上传**”按钮。 我已经尝试了几种在线解决方案，例如： -将“媒体”文件夹从“adminhtml”文件夹复制到“前端”， -清除缓存， -改革索引， -升级到最新的 Flash 播放器。 似乎没有任何效果。如果有人找到解决此问题的方法，请告诉我。

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-28T06:09:41.387

这些按钮来自闪存。因此请在以下位置检查您的媒体文件夹

```
design/adminhtml/default/default/template/media 
```

如果没有媒体文件夹，则从新鲜的 magento 复制

这将解决您的问题:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-28T19:11:32.257

转到 chrome://settings/content/flash 在允许标签中添加您的网站网址

然后刷新您的管理面板

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-15T16:13:27.520

Magento 图片上传问题与 flash 有关。您需要更改浏览器的设置。如果您使用的是铬，

1.  转到 chrome 设置，或输入 chrome://settings/content
2.  转到内容设置 => 闪存
3.  开启允许站点运行 Flash
4.  先关闭询问

而在 Firefox 中，你不需要做任何事情，如果你的 flash 播放器已经过时，你需要更新它

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-29T23:49:00.947

如果使用 git 也可以检查一下 .gitignore。很容易忽略“media/”而不是“/media/”。更深的媒体目录包含 swf 上传按钮。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-21T18:20:26.867

*如果 JavaScript 变量maxUploadFileSizeInBytes*和*maxUploadFileSize*在以下文件中未正确配置，则不会显示上传按钮 ：

*   /app/design/adminhtml/default/default/template/media/uploader.phtml
*   /app/design/adminhtml/default/default/template/media/cms/browser/content/uploader.phtml

变量声明如下：

```
maxUploadFileSizeInBytes = <?php echo $this->getDataMaxSizeInBytes() ?>;
maxUploadFileSize = '<?php echo $this->getDataMaxSize() ?>'; 
```

您可以直接编辑：

```
maxUploadFileSizeInBytes = 10485760; /* 10.48576 MB */
maxUploadFileSize = '104857600'; 
```

getDataMaxSizeInBytes *()*和*getDataMaxSize()*在文件中定义：

*   /app/code/core/Mage/Adminhtml/Block/Media/Uploader.php

如果您的服务器使用**HHVM**运行，则参数 PHP *post_max_size*和*upload_max_filesize*在名称*hhvm.server.max_post_size*和*hhvm.server.upload.upload_max_file_size*下可用。

为此，他将不得不在 php 文件*Uploader.php*中修改这些参数的吸引力，方法如下：

复制 Local Uploader.php 架构中的文件：

*   /app/code/local/Mage/Adminhtml/Block/Media/Uploader.php

替换以下行：

```
public function getPostMaxSize()
{
    return ini_get('post_max_size');
}

public function getUploadMaxSize()
{
    return ini_get('upload_max_filesize');
} 
```

通过以下方式：

```
public function getPostMaxSize()
{
    $post_max_size = ini_get('post_max_size');
    return $post_max_size ? $post_max_size : ini_get('hhvm.server.max_post_size');
}

public function getUploadMaxSize()
{
    $upload_max_filesize = ini_get('upload_max_filesize');
    return $upload_max_filesize ? $upload_max_filesize : ini_get('hhvm.server.upload.upload_max_file_size');
} 
```

亲切地。G

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-08T22:14:17.090

我在更新到 magento 1.9.1 时遇到问题，通过复制文件夹 /app/design/adminhtml/default/default/template/dull 解决了问题

进入新的magento实例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-15T05:07:58.277

图片上传按钮是一个Flash按钮，所以你必须下载Flash Player。您可以从以下链接下载 Flash 播放器：http: [//get.adobe.com/flashplayer/otherversions/](http://get.adobe.com/flashplayer/otherversions/)

安装完flash player后只需要重启浏览器，就可以看到图片上传按钮了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-11T20:18:26.770

清空 Opera 中的所有缓存后，我遇到了这个问题。我刚刚将我的网站的例外添加到 Flash 设置中。只需确保它是以 http(s) 开头的完整 url。在一个案例中，我打开了 Flash 播放器属性，并首先使用高级选项卡上的全部删除按钮删除了所有内容。

如果它在一个浏览器中运行，则通常不是另一个浏览器中的 magento 代码错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-27T15:27:10.073

我有同样的问题，并通过在谷歌浏览器中进行以下设置进行排序：

转到右上角的菜单 > 设置 > 高级 > 隐私和安全 > 内容设置 > Flash > 在允许部分中单击“添加”按钮并输入您的网站 URL。

如果有任何问题，您可以查看以下 URL： [http ://www.alvipixels.co.uk/blog/magento-product-image-upload-button-not-showing.php](http://www.alvipixels.co.uk/blog/magento-product-image-upload-button-not-showing.php)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-01T08:02:46.020

我在管理区域发现了这个问题。首先启用浏览器的 Flash 然后重新检查。

这些按钮使用 FLASH。

因此，如果您的浏览器不支持 flash - 那么它们将不会出现。

确保该`app/design/adminhtml/default/default/template/media`文件夹存在并且其中有 2 个文件。

*   编辑器.phtml
*   上传者.phtml

确保该`skin/adminhtml/default/default/media`文件夹存在并且其中有 3 个文件。

*   弹性文件
*   上传者.swf
*   上传者Single.swf

如果您创建了自己的主题（即主题：“mytheme”和包“mypackage”），请确保上述适用于：

*   `app/design/adminhtml/mytheme/mypackage/template/media`
*   `skin/adminhtml/mytheme/mypackage/media`

我希望这有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-28T13:54:54.410

谷歌浏览器正在阻止这些按钮，因为它们是闪存。按着这些次序：

打开谷歌浏览器 点击浏览器右上角的三个点 点击设置 向下滚动到高级并点击展开 向下滚动到隐私和安全并点击内容设置 点击 flash 在允许下点击添加 复制主页链接到网站

[这是有关修复 Magento 上传按钮](https://jonnyjordan.com/blog/how-to-fix-missing-magento-image-upload-button/)的更多详细信息的教程**

# jquery - 显示带有延时的滚动按钮

> ID：15022534
> 
> 赞同：0
> 
> 时间：2013-02-22T10:55:39.813
> 
> 标签：jquery, scroll, timeout, hide, show

我有一个 div 滚动时会显示一个按钮。我希望此按钮在最后一次滚动后仅显示 2 秒。我的脚本中有一个小故障，我无法弄清楚。有时它会显示 2 秒，有时会更少，有时它会立即隐藏。

我认为的问题是它只从第一个滚动开始计数，之后的每个滚动都不会重置这个计时器，直到它过期。如果计时器到期，则滚动再次显示。

```
$("#layout-main").live('scroll',function(){
 $("#main-totop").show();
});
$("#main-totop").live('click',function(){
 mainapi.scrollTo(0,0);
 setTimeout(function(){
  $('#main-totop').hide();
 }, 2000); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:02:17.943

这应该有效。

```
$("#layout-main").live('scroll',function(){
    $("#main-totop").stop().show(0).delay(2000).hide(0);
});
$("#main-totop").live('click',function(){
    mainapi.scrollTo(0,0);
    $('#main-totop').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:07:47.127

您应该尝试使用`.promise().done()`，我建议您使用`.on()`，因为`.live()`是`been removed in jQuery version 1.9.0+`

```
$("#layout-main").on('click', '#main-totop', function(){
   mainapi.scrollTo(0,0).promise().done(function(){
       setTimeout(function(){
           $(this).hide();
       }, 2000);
   });
}); 
```

或者你可以这样尝试：

```
$("#layout-main").on('click', '#main-totop', function(){
   mainapi.scrollTo(0,0).promise().done(function(){
      $(this).delay(2000).hide();
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:09:00.540

您的代码不代表您所描述的。

它说：当你在**#layout-main**上滚动时， **#main-totop**元素会显示。如果单击则滚动到顶部并在 2 秒后隐藏。

根据您的描述，您希望按钮（可能是**#main-totop**）在最后一次滚动后仅显示 2 秒，然后隐藏。

如果我是对的，那么你需要这样的东西：

```
var mytimer;
$("#layout-main").live('scroll',function(){
    clearTimeout(mytimer);
    $('#main-totop').show();
    mytimer = setTimeout(function(){
      $('#main-totop').hide();
    }, 2000); 
});
$("#main-totop").live('click',function(){
 mainapi.scrollTo(0,0);
}); 
```

# url - 如何在 Joomla 中更改网址

> ID：15022537
> 
> 赞同：0
> 
> 时间：2013-02-22T10:55:51.717
> 
> 标签：url, joomla2.5

我在 Joomla2.5 站点工作。我想更改网址

```
http://idaycom.com/index.php/component/quates/ 
```

到

```
http://idaycom.com/index.php/component/quotes/
                                         ^ 
```

如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:32:55.867

此 URL 由 Joomla 根据组件名称自动创建。

如果这是自定义编写的组件，您只需将文件夹 components/com_quates/ 重命名为 components/com_quotes 即可正确拼写 URL。

请注意，您还需要更新 PHP 代码中对 com_quates 的所有引用，否则会破坏您的组件。

# python - Python连接问题

> ID：15022538
> 
> 赞同：0
> 
> 时间：2013-02-22T10:55:52.200
> 
> 标签：python, concatenation

我对脚本中的串联有疑问。我有两个变量：

```
fileName = 'www.blah.com/var/www/vhosts/www.blah.com/web/images/stories/?{-jYi?'
signature = '{HEX}php.nested.base64.503' 
```

当我试图连接这两个变量时。结果很奇怪：

```
files = files + '%s -> %s' % (fileName,signature) + '\n'
## Result:
 -> {HEX}php.nested.base64.503 ts/www.blah.com/web/images/stories/?{-jYi? 
```

## 编辑：

我做错了什么？我试过加入，我有完全相同的问题。

提前致谢。

由于未知原因，我不知道为什么当我在终端上打印结果时我得到了这个结果，但在我发送的电子邮件中一切正常。

这是一个愚蠢的问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:07:01.570

您的代码不应给出该结果。但是，这里有另一种方法：

```
files = '%s %s -> %s\n' %(files, fileName, signature) 
```

# .htaccess - 通过 .htaccess 进行 301 复杂重定向

> ID：15022540
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:55:55.327
> 
> 标签：.htaccess, redirect, http-status-code-301

嗨，伙计们，我目前正在迁移，需要将客户端流量作为失败发送，保存新的 url。

旧域将具有类似 olddomain.com/abcd/1234 的内容，我需要将其重定向到 newdomain.com/?paramenter1=1234¶meter2=ABCD。

这可能很容易做到，我猜这可以通过 .htaccess 请求来完成，因此我们可以确保没有剩余的流量。我不是开发人员，但我是技术人员，需要建议客户的技术人员放置这个，因为这实际上是我帮助他们的想法。

任何帮助将非常感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:08:16.717

以下`.htaccess`规则会将[http://olddomain.com/abcd/1234](http://olddomain.com/abcd/1234)重定向到[http://newdomain.com/?paramenter1=abcd¶meter2=1234](http://newdomain.com/?paramenter1=abcd&parameter2=1234)。

请注意，正则表达式中捕获的两个组（由括号定义）从 1 开始编号。因此，第一个捕获的组可以在重定向 url 中作为**$1**访问，而第二个组可以作为**$2**访问。请根据您的要求进行相应调整。

```
RewriteRule ^(.+)/(.+)$ http://newdomain.com/?parameter1=$1&parameter2=$2 [R=301,L] 
```

# tdd - 持续集成和验收测试驱动开发

> ID：15022543
> 
> 赞同：4
> 
> 时间：2013-02-22T10:56:07.147
> 
> 标签：tdd, continuous-integration, bdd, acceptance-testing, continuous-delivery

我有一个与验收测试驱动开发 (ATDD) 相关的问题。根据流程，我从验收测试（端到端测试）开始每个功能。我提交了这些测试，但它们按预期失败了。问题是我应该以某种方式区分由于功能不完整而失败的验收测试和由于某些回归而失败的验收测试。使用 ATDD 组织 CI 流程的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:06:42.850

尚未实现的测试不应在 CI 中运行。CI 测试的重点是捕捉回归。捕捉“尚未完成”的问题会导致红色构建是“正常”并被忽略的情况。这是可能的最坏结果。

有很多方法可以做到这一点，最好的方法取决于您的上下文。最简单的方法是先编写验收测试，但在通过之前不要签入（即，您实现了该功能）。

# node.js - 如何创建模拟 http.ServerRequest 和 http.ServerResponse？

> ID：15022544
> 
> 赞同：0
> 
> 时间：2013-02-22T10:56:08.517
> 
> 标签：node.js, testing

我已经为`http.Server`的[请求事件](http://nodejs.org/api/http.html#http_event_request)（即带有签名的函数`function (request, response) { ... }`）编写了一个处理程序，我想对其进行测试。我想通过模拟`http.ServerRequest`和`http.ServerResponse`对象来做到这一点。我怎样才能创建这些？

显而易见的方法似乎不起作用：

```
$ node
> var http = require('http');
> new http.ServerRequest();
TypeError: undefined is not a function
    at repl:1:9
... 
```

我是否需要通过“真实”的 HTTP 服务器和客户端对此进行测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:50:51.137

至少有两个项目允许模拟`http.ServerRequest`and `http.ServerResponse`：[https://github.com/howardabrams/node-mocks-http](https://github.com/howardabrams/node-mocks-http)和[https://github.com/vojtajina/node-mocks](https://github.com/vojtajina/node-mocks)。

由于某种原因，通过真实的 HTTP 请求进行测试似乎更常见；[https://github.com/flatiron/nock](https://github.com/flatiron/nock)似乎是这里使用的工具。

另请参阅[node.js：模拟 http 请求和响应](https://stackoverflow.com/questions/8021956/node-js-mock-http-request-and-response)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:03:45.020

是的，您可以使用[http.request](http://nodejs.org/docs/v0.6.12/api/http.html#http_http_request_options_callback)来完成。它允许您从服务器发出请求，因此您可以使用代码对其进行测试。如果你想发送简单的 GET 请求，你可以使用[http.get](http://nodejs.org/docs/v0.6.12/api/http.html#http_http_get_options_callback)，这更容易。否则，您将不得不自己构建您的请求。来自文档的示例：

```
var options = {
  host: 'www.google.com',
  port: 80,
  path: '/upload',
  method: 'POST'
};

var req = http.request(options, function(res) {
  res.setEncoding('utf8');
  console.log('STATUS: ' + res.statusCode);
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

req.write('data\n');
req.end(); 
```

如果您使用[请求](https://npmjs.org/package/request)，您也可以这样做。

```
var request = require('request');
request.post( url, json_obj_to_pass,
    function (error, response, body) {
        if (!error && response.statusCode == 200)
            console.log(body)
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T19:20:22.443

我创建了一个简单和基本的模拟`http.ServerResponse`，要点就[在这里](https://gist.github.com/daithi-coombes/8039142)，`http.ServerRequest`我使用[rewire](https://npmjs.org/package/rewire)。

首先加载依赖：

```
var require = require('rewire'),
    events = require('events'),
    util = require('util'); 
```

这是`http.ServerResponse`模拟。它基本上创建了一个与 http.ServerResponse 方法相同的对象，然后`events`使用该模块继承该`util`模块。

```
/**
 * Mock https.serverResponse
 * @type {Object}
 */
var mockResponse;
Eventer = function(){
    events.EventEmitter.call(this);

    this.data = '';

    this.onData = function(){
        this.emit('data', this.data);
    }

    this.setEncoding = function(){

    }

    this.onEnd = function(){
        this.emit('end', this.data);
    }

    this.run = function(){
        this.onData();
        this.onEnd();
    }
};
util.inherits(Eventer, events.EventEmitter); 
```

然后我使用这个带有 rewire 的模拟来覆盖 http 模块的 get()、request() 或任何其他库。

```
/**
 * Mocks literal object for rewire mocking.
 * @see https://github.com/jhnns/rewire
 * @type {Object}
 */
var mocks = {
    "https" : {
        "get" : function(url, fn){
            fn(mockResponse.data);
            mockResponse.run();
        }
    }
};

//instead of: var myModule = require('myModule');
//do:
var myModule = rewire('myModule');
myModule.__set__(mocks); 
```

现在`http`你模块中的库被模拟了

# html - 带有css的元素的位置

> ID：15022546
> 
> 赞同：0
> 
> 时间：2013-02-22T10:56:15.557
> 
> 标签：html, css

我们平时看到的hgroup的结构大概是这样的

```
h1
h2
h3
... 
```

但在我的情况下，h3 先于 h2，我们有这样的东西：

```
h3
h2 
```

但是我必须再次遵循设计，我必须首先为 h2 设计风格：

```
h2
h3 
```

为了便于成像，请在此处查看：http: [//cdpn.io/dfnjo](http://cdpn.io/dfnjo)

我选择使用位置，它有效但我不满意，因为我无法控制编辑器将输入多少文本，所以如果 h2 有很多文本，它可能会与 h3 的文本重叠。（请尝试为 h2 添加更多文本）。

请建议我不要使用 Javascript，只使用 CSS！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:43:29.023

你不能用 CSS 做这种情况，因为 CSS 没有 if-else 语句。

但是有一种方法可以将 if-else 语句与 SASS(SCSS) 一起应用。关于它的研究，它提供了使用函数，while 语句的变量等。但它不能改变 html 元素的嵌套列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T11:01:40.700

```
$("h2").insertBefore($("h2").prev()); 
```

或者如果他们没有按顺序排列，

```
$("h2").insertBefore($("h3")); 
```

# php - str_replace 错误的小数

> ID：15022554
> 
> 赞同：0
> 
> 时间：2013-02-22T10:56:40.090
> 
> 标签：php

这是我在 Stackoverflow 的第一个问题，所以请多多包涵:)

过去几个小时我一直在尝试做的是替换从数据库上传和下载的符号。

```
How it should be:
Input: 100.000,25
Stored in database: 100000.25
Output: 100.200,25 
```

原因是我需要逗号作为小数分隔符，点作为千位分隔符。我仍然需要能够添加/乘以存储在数据库中的数字等等。

到目前为止，我尝试过的最好的方法是：

```
// Value from form input:
$value = 100.200,25;

// Removing all but numbers and comma

$remove_symbols = array("+"," ",".","-","'","\"","&","!","?",":",";","#","~","=","/","$","£","^","(",")","_","<",">");
$db_value = str_replace($remove_symbols, '', $value);

      // $db_value  insert into db

        // Pulling out the data
        $db_pulled = number_format($row['liter'],2,',','.');  
        echo $db_pulled;

   :( returns: 100.200,00 (should return 100.200,25) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:50:31.130

你的问题有点混乱，你没有很好地标记它们。例如，一个**php**标签会更合适和充分。（我现在已经为你修改了）

好的。您遇到的问题是因为您需要用点替换逗号，因为这就是浮点值的表示方式。在您的示例中，当您将其插入数据库时​​，它可能会被截断。

这是你可以做的：

```
<?php
        $numString = "100.200,25";
        $numString = str_replace(array('.', ','), array('','.'), $numString);
        $num = floatval($numString);
        echo $num;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:21:00.167

看到你的代码返回：100.200,00（应该返回100.200,25）

您的数据库表字段似乎是 Int 格式而不是 Decimal 格式。

有关数字字段类型的更多信息，请访问[http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)

# php - Htaccess 重写问题

> ID：15022556
> 
> 赞同：0
> 
> 时间：2013-02-22T10:56:50.280
> 
> 标签：php, apache, .htaccess

我尝试为我的网站使用 seo 友好的 url，我的目标是重写`product/131/ABCDEFGH`为`productpage.php?id=131`

我现在实现了它重写路径并打开正确的页面

.ht 访问代码

```
RewriteEngine on
RewriteBase /
RewriteRule ^product/(([^/]*))/([^/]*)$ /cprrpc/productpage.php?id=$1 [L] 
```

现在我遇到了另一个与内部链接有关的问题，目前此页面上的所有图像等都与相对路径绑定。

现在这行不通了，因为他们都在不同的路径中搜索，

我以另一种方法打开或更改 htaccess 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:00:34.943

您需要允许 apache 从其真实位置提供现有文件：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^product/(([^/]*))/([^/]*)$ /cprrpc/productpage.php?id=$1 [L] 
```

这意味着如果请求图像，apache 将忽略重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:01:26.807

您的 URL 在重写的 URL 结构上会出现偏差，因为现在还有两个目录级别。*不要使用当前目录*的相对 URL ，而是为您的资源使用**前导斜杠**，或者您可以使用 PHP 在所有资源前面打印应用程序的“根路径”。

例如，不使用相对 URL（到当前目录）：

`<img src="images/plus.png" />`（扩展为*localhost/cprrpc/product/131/images/gplus.png*）

您可以使用前导斜杠，使 URL 相对于 Web 根目录：

`<img src="/cprrpc/images/plus.png" />`（扩展为*localhost/cprrpc/images/gplus.png*）

或者您可以使用 PHP 打印 Web 根目录：

`<img src="<?php echo $WEB_ROOT ?>/images/plus.png" />`（扩展为*localhost/cprrpc/images/gplus.png*）

# .net - 以编程方式更改组合框选择而不导致 SelectedIndexChanged 触发

> ID：15022559
> 
> 赞同：0
> 
> 时间：2013-02-22T10:57:00.903
> 
> 标签：.net, vb.net, visual-studio-2005

所以我有一个带有 SelectedIndexChanged 事件处理程序的组合框：

```
 Private Sub cmbStatus_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbStatus.SelectedIndexChanged
        DoAnnoyingStuff()
        '....
    End sub 
```

在我的表单的其他地方，我有一个执行此操作的函数（在一些用户交互之后）：

```
Sub RefreshStatus()
    Dim sel As Int32 = GetNewStatus()
    cmbStatus.SelectedIndex = sel   '<-- fires a SelectedIndexChanged event that I don't need
End Sub 
```

我想要在 RefreshStatus() 中做的是更改组合框中显示的选择，但不执行 DoAnnoyingStuff()。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:01:43.243

添加一个标志。因此，您将有一个名为 _inChange As Boolean 的私有类字段，然后在 RefreshStatus 开始时将该字段设置为 true，最后设置为 false。在 cmbStatus_SelectedIndexChanged 中，您检查 _inChange 是否为真。如果是你就退出。如果为假，你继续做 AnnoyingStuff。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:14:17.667

您可以手动管理事件，启用和禁用处理程序：

```
AddHandler cmbStatus.SelectedIndexChanged, AddressOf cmbStatus_SelIndexChg
RemoveHandler cmbStatus.SelectedIndexChanged, AddressOf cmbStatus_SelIndexChg 
```

如前所述，您可以使用标志：

```
Dim bRefreshStatus As Boolean = False

Private Sub cmbStatus_SelIndexChg(sender As Object, e As EventArgs) Handles cmbStatus.SelectedIndexChanged
    If Not bRefreshStatus Then DoAnnoyingStuff()
End Sub

Sub RefreshStatus()
    Dim sel As Int32 = GetNewStatus()
    bRefreshStatus = True
    cmbStatus.SelectedIndex = sel
    bRefreshStatus = False
End Sub 
```

# c# - 如何通过点击 Next 按钮获取下一个数据行

> ID：15022560
> 
> 赞同：0
> 
> 时间：2013-02-22T10:57:03.690
> 
> 标签：c#, asp.net, sql-server

我想从表中获取下一条记录以显示为`Question`. 使用下面的代码，我无法`Question`从表中获取下一个。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Page.IsPostBack == false)
    {
        Quiz_Load();

    }
}
private void Quiz_Load()
{
    try
    {
        if (Session["UserQuizID"] != null)
        {
            string mayank = "mm.bhagat";
            string UserQuiz_ID = Session["UserQuizID"].ToString();
            SqlConnection con = new SqlConnection(c);
            SqlCommand cmd = new SqlCommand("select top 0.1 percent QuestionID, Title, Answer1,Answer2,Answer3,Answer4,UserAnswer from [Table_UserAnswer] WHERE UserQuizID = '" + UserQuiz_ID.ToString() + "' AND UserName = '" + mayank.ToString() + "' order by newid()", con);
            con.Open();
            SqlDataReader dr = cmd.ExecuteReader();
            if (dr.Read())
            {
                Session["QuestionID"] = dr[0].ToString();
                Lbl_QuestionTitle.Text = dr[1].ToString();
                RadBut_Answer.Items.Add(dr[2].ToString());
                RadBut_Answer.Items.Add(dr[3].ToString());
                RadBut_Answer.Items.Add(dr[4].ToString());
                RadBut_Answer.Items.Add(dr[5].ToString());
                Session["UserAnswer"] = dr[6].ToString();                   
            }
            else
            {

            }

            con.Close();
        }
        else
        {
            Response.Redirect("Start.aspx");
        }

    }
    catch
    {

    }        
}
protected void RadBut_Answer_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {
        int getvalue;
        getvalue = Convert.ToInt32(RadBut_Answer.SelectedIndex + 1);
        Lbl_SelectedAnsMsg.Text = MessageFormatter.GetFormattedAlertsMessage("Your Selected Answer is : " + getvalue.ToString());
        Session["UserAnswer"] = getvalue.ToString();
    }
    catch
    { 
    }
}

protected void But_Next_Click(object sender, EventArgs e)
{
    UpdateUserAns();
    if (Session["UserAnswer"] == null)
    {
        Response.Redirect("Result.aspx");
    }
    else
    {

    }
}

private void UpdateUserAns()
{
    try
    {
        string mayank = "mm.bhagat";
        string UserQuiz_ID = Session["UserQuizID"].ToString();
        string Question_ID = Session["QuestionID"].ToString();
        string User_Answer = Session["UserAnswer"].ToString();
        SqlConnection con = new SqlConnection(c);
        SqlCommand cmd = new SqlCommand("UPDATE Table_UserAnswer SET UserAnswer='" + User_Answer.ToString() + "' WHERE UserQuizID = '"+ UserQuiz_ID.ToString() +"' AND QuestionID = '"+Question_ID.ToString()+"' AND UserName = '"+mayank.ToString()+"'", con); 
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
        cmd.Cancel();
    }
    catch
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:06:52.577

嗨，请在此处查看此帖子[客户端](http://forums.asp.net/t/1251724.aspx/1)

在这里你可以找到你的问题的解决方案

# redirect - 在 windows server / .NET 上实现三百个 301 重定向的最佳方法

> ID：15022565
> 
> 赞同：0
> 
> 时间：2013-02-22T10:57:18.407
> 
> 标签：redirect, iis-7, url-rewriting, http-status-code-301, isapi-rewrite

我将使用一个重建的网站（在新的 Windows Server 2008 R2 标准服务器上）。我有一个电子表格，其中包含来自旧站点的 300 个 URL，这些 URL 映射到新站点的 URL。每个 URL 都是“干净的”，因为它们没有文件扩展名（没有 .php、.aspx、.htm 等）。

我在这里阅读了有关 IIS 的 URL 重写扩展：[http ://weblogs.asp.net/scottgu/archive/2010/04/20/tip-trick-fix-common-seo-problems-using-the-url -rewrite-extension.aspx](http://weblogs.asp.net/scottgu/archive/2010/04/20/tip-trick-fix-common-seo-problems-using-the-url-rewrite-extension.aspx)但在我看来这只是一个用于将规则写入 web.config 文件的 GUI 工具。

如果我在 web.config 中有 300 条规则，这不会影响性能吗？

它也可以用 ISAPI_Rewrite 解决，但我不确定处理这个问题的最佳方法是什么。

任何人都可以就在这种情况下实施我的 301 重定向的最佳方式提供任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:40:35.253

如果您有大量确切的 URL 想要重定向到其他确切的 URL，请查看 URL Rewrite 模块的[Rewrite Map](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)功能。它是专门为此目的而设计的，性能应该还可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:50:56.007

ISAPI_Rewrite 3 或 Helicon Ape 可以帮助您轻松处理您的情况。它们都支持纯文本地图文件和类似 Apache 的配置。请参阅[此处](http://www.helicontech.com/articles/url-rewriting-basics-and-map-files-application/)使用地图文件的示例。

# android - 在 button.setOnClickListener 中添加 Toast？

> ID：15022570
> 
> 赞同：1
> 
> 时间：2013-02-22T10:57:26.583
> 
> 标签：android, button, imagebutton

**更改图片时如何添加 Toast ？**

```
 button = (ImageButton)findViewById(R.id.imageButton1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v)  {
            if (bIcon) 
                button.setImageResource(R.drawable.add1);
             else 
                         button.setImageResource(R.drawable.add2);
                bIcon = !bIcon;                                             
        }   }); 
```

**当我喜欢这样**

```
 button = (ImageButton)findViewById(R.id.imageButton1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v)  {
            if (bIcon) 
                button.setImageResource(R.drawable.add1);
               Toast.makeText(MainActivity.this, "drawable.add1", Toast.LENGTH_SHORT).show();
             else 
                        button.setImageResource(R.drawable.add2);
                 Toast.makeText(MainActivity.this, "drawable.add2", Toast.LENGTH_SHORT).show();
                bIcon = !bIcon;                                             
        }
    }); 
```

**改变形象不是**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:04:24.380

**-**这里的问题在于你的`if`and`else`循环。

**-**当我们有一个`if or else condition`包含**单个语句**时，**不必在起点和终点有大括号**，但是当**条件中包含多个语句时，您必须使用大括号。**

**例如：**

```
boolean bIcon = false;
button = (ImageButton) findViewById(R.id.imageButton1);
button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v)  {
        if (bIcon == false) {
            button.setImageResource(R.drawable.add1);
            Toast.makeText(MainActivity.this, "drawable.add1", Toast.LENGTH_SHORT).show();

                        bIcon = true;
        }
        else {
            button.setImageResource(R.drawable.add2);
            Toast.makeText(MainActivity.this, "drawable.add2", Toast.LENGTH_SHORT).show();
            bIcon = false;                
        }                             
    }
}); 
```

# mysql - 在 XAMPP 上启用 MySQL event_scheduler

> ID：15022574
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:57:36.693
> 
> 标签：mysql, events, phpmyadmin, xampp

当我输入 phpmyadmin sql 命令时：**SET GLOBAL event_scheduler = 1;**

event_scheduler 进程正在运行，但是当我重新启动服务器时 - 它停止了。

我尝试将 my.ini 文件编辑为：

```
[mysql]
no-auto-rehash
# Remove the next comment character if you are not familiar with SQL
#safe-updates
event_scheduler=ON 
```

但它没有用。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:39:58.607

如果有人感兴趣，问题是标题：[mysqld] 而不是 [mysql]

# javascript - 附加子节点的顺序重要吗？

> ID：15022575
> 
> 赞同：0
> 
> 时间：2013-02-22T10:57:40.270
> 
> 标签：javascript, dom, appendchild, clonenode

我有以下代码：

```
span.appendChild(link);
span.appendChild(closeButton);
closeButton.appendChild(closeIcon); 
```

如果我在将 closeButton 附加到 span 之前将 closeIcon 附加到 closeButton 会怎样？有什么区别吗？使用 js 插入 DOM 的克隆节点和在 html 中硬编码的节点之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:03:26.087

节点将按照您定义的顺序添加到 DOM，但是，由于元素的 CSS 属性，它们的视觉外观可能表示不同的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:06:09.297

通常净效果应该是相同的（除非我看错了）。如果 span 已经在 DOM 中，而 closeButton 不是，则通过先附加到 closeButton （虽然它不在 DOM 中），您将获得轻微的性能改进 - 这将避免重排。

# php - 电子邮件客户端看不到 HTML 电子邮件的纯文本替代品

> ID：15022577
> 
> 赞同：2
> 
> 时间：2013-02-22T10:57:55.223
> 
> 标签：php, html-email, mime, email-client, plaintext

我相信我正在发送格式正确的多部分/替代 MIME 电子邮件，其中包含不同的纯文本和 HTML 版本的内容。但是，一旦被电子邮件客户端（我尝试了 3 种不同的）收到，电子邮件的来源似乎已更改；使用了不同的边界文本，并且纯文本内容已更改为 HTML 内容（去除了 HTML 标记）。

这是我的 PHP 脚本：

```
<?php
$boundary = md5(date('r', time())); 
$to = '$to_email_address';
$subject = 'Test HTML email'; 
$headers =  "From: $from_email_address\r\n" .
            "Content-Type: multipart/alternative; boundary=\"" . $boundary . "\""; 
$message = "--" . $boundary . "\r\n" .
            "Content-Type: text/plain; charset=\"iso-8859-1\"\r\n" . 
            "Content-Transfer-Encoding: 7bit\r\n" .
            "\r\n" .
            "Hello World!!!\r\n" .
            "This is simple text email message.\r\n" .
            "\r\n" .
            "--" . $boundary . "\r\n" . 
            "Content-Type: text/html; charset=\"iso-8859-1\"\r\n" . 
            "Content-Transfer-Encoding: 7bit\r\n" .
            "\r\n" .
            "<h2>Hello World!</h2>\r\n" .
            "<p>This is something with <b>HTML</b> formatting.</p>\r\n" .
            "\r\n" .
            "--" . $boundary . "--\r\n";

$result = mail($to, $subject, $message, $headers);
echo $result ? "Mail sent" : "Mail failed";
?> 
```

这是电子邮件客户端看到的电子邮件原始来源：

```
Return-Path: <from_email_address>
From: <from_email_address>
To: <to_email_address>
Subject: Test HTML email
Date: Fri, 22 Feb 2013 10:22:30 -0000
Message-ID: <01d001ce10e6$8c41d450$a4c57cf0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
    boundary="----=_NextPart_000_01CC_01CE10E6.8C41D450"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac4Q5obGqVqbDjA7SDSMnVZDykxxhA==
X-OlkEid: EE843820EF8935D69CB57C40B3E9F64C8874FA01

This is a multi-part message in MIME format.

------=_NextPart_000_01CC_01CE10E6.8C41D450
Content-Type: text/plain;
    charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hello World!

This is something with HTML formatting.

------=_NextPart_000_01CC_01CE10E6.8C41D450
Content-Type: text/html;
    boundary="b04d8008be2af4ce2409beb4e26761bd";
    charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<h2>Hello World!</h2>
<p>This is something with <b>HTML</b> formatting.</p>

------=_NextPart_000_01CC_01CE10E6.8C41D450-- 
```

如何确保接收客户端收到预期的纯文本内容？

预先感谢您的帮助，斯图尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:28:09.417

我想我找到了问题所在。我发送的很好。但是，我随后使用 Microsoft Outlook 在电子邮件帐户之间移动收到的电子邮件，以便使用不同的电子邮件客户端查看电子邮件源（因为您无法在 Outlook 中查看电子邮件的原始源），而 Outlook 在此过程中更改了我的电子邮件。嗬！小学生错误！

斯图尔特

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T11:07:46.703

用于支持邮件中的 html 内容。您必须在标题中添加以下内容，

```
$header .="Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

在您的代码中，

```
"Content-Type: multipart/alternative" 
```

# java - 如何在android中使用json数组限制问题的显示

> ID：15022578
> 
> 赞同：0
> 
> 时间：2013-02-22T10:58:00.043
> 
> 标签：java, android, json, limit

嘿，伙计们，我正在开发一个测验，其中我使用 json 数组随机存储了 50 个问题，现在我的问题是每次用户玩游戏时都会显示所有这 50 个问题。如果我只想显示 10 个问题，是否可以限制它们？...我存储了 50 个问题，因为它是随机选择的，但我只想显示 10 个。请帮帮我。非常感谢！

```
public class Question1<JsonObject> extends Activity {

Intent menu = null;
BufferedReader bReader = null;
static JSONArray quesList = null;
static int index = 50;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.question10);

    Thread thread = new Thread() {
        public void run() {
            try {
                Thread.sleep(1 * 1000);
                finish();
                loadQuestions();
                Intent intent = new Intent(Question1.this,
                        Question2.class);
                Question1.this.startActivity(intent);
            } catch (Exception e) {
            }
        }
    };
    thread.start();

}

private void loadQuestions() throws Exception {
    try {

        List<JSONObject> question = new ArrayList<JSONObject>();
         int n = Math.min(10, quesList.length());
         for(int i = 0; i < n; i++) {
             JSONObject questions1 = quesList.getJSONObject(i);
             question.add(questions1);

        InputStream questions = this.getBaseContext().getResources()
                .openRawResource(R.raw.questions);
        bReader = new BufferedReader(new InputStreamReader(questions));
        StringBuilder quesString = new StringBuilder();
        String aJsonLine = null;
        while ((aJsonLine = bReader.readLine()) != null) {
            quesString.append(aJsonLine);
        }

        Log.d(this.getClass().toString(), quesString.toString());
        JSONObject quesObj = new JSONObject(quesString.toString());
        quesList = quesObj.getJSONArray("Questions");
        Log.d(this.getClass().getName(),
                "Num Questions " + quesList.length());
         }

    } catch (Exception e) {

    } finally {
        try {
            bReader.close();
        } catch (Exception e) {
            Log.e("", e.getMessage().toString(), e.getCause());
        }

    }

}

public static JSONArray getQuesList()throws JSONException{

      Random rnd = new Random();

        for (int i = quesList.length() - 1; i >= 0; i--)
        {
          int j = rnd.nextInt(i + 1);
          // Simple swap
          Object object = quesList.get(j);
          quesList.put(j, quesList.get(i));
          quesList.put(i, object);
        }
        return quesList;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:07:58.533

试着这样说：

```
List<JSONObject> question = null;

private void loadQuestions() throws Exception {
try {

    InputStream questions = this.getBaseContext().getResources()
            .openRawResource(R.raw.questions);
    bReader = new BufferedReader(new InputStreamReader(questions));
    StringBuilder quesString = new StringBuilder();
    String aJsonLine = null;
    while ((aJsonLine = bReader.readLine()) != null) {
        quesString.append(aJsonLine);
    }

    Log.d(this.getClass().toString(), quesString.toString());
    JSONObject quesObj = new JSONObject(quesString.toString());
    quesList = quesObj.getJSONArray("Questions");
    Log.d(this.getClass().getName(),
            "Num Questions " + quesList.length());
     }

    question = new ArrayList<JSONObject>();
     int n = Math.min(10, quesList.length());
     for(int i = 0; i < n; i++) {
         JSONObject questions1 = quesList.getJSONObject(i);
         question.add(questions1);

} catch (Exception e) {

} finally {
    try {
        bReader.close();
    } catch (Exception e) {
        Log.e("", e.getMessage().toString(), e.getCause());
    }

}

} 
```

看起来你的程序中的命名搞砸了。没有具体的代码，但我假设您需要使用`List<JSONObject> question`而不是`quesList`.

# java - Java MouseListener 没有在点击时触发事件

> ID：15022579
> 
> 赞同：1
> 
> 时间：2013-02-22T10:58:07.357
> 
> 标签：java, swing, listener

我创建了一个扩展 Component 类的类。设置绘画方法等。现在我刚刚在类中添加了一个鼠标侦听器，但它不起作用。这是鼠标侦听器类：

```
public class RobotDetailsMouseListener implements MouseListener {

private Robot robot;
private boolean showDetails;

public RobotDetailsMouseListener(Robot robot) {
    this.robot = robot;
    showDetails = true;
}

@Override
public void mouseClicked(MouseEvent arg0) {
    System.out.println("This is being ran!");
    robot.setShowDetails(showDetails);
    showDetails = !showDetails;
}

@Override
public void mouseEntered(MouseEvent arg0) {
    System.out.println("Mouse is over a robot");

}

@Override
public void mouseExited(MouseEvent arg0) {
    System.out.println("Mouse is over a robot");

}

@Override
public void mousePressed(MouseEvent arg0) {
    System.out.println("Mouse is over a robot");

}

@Override
public void mouseReleased(MouseEvent arg0) {
    System.out.println("Mouse is over a robot");

}
} 
```

这是通过该`this.addMouseListener()`方法添加到组件中的，我正在向它传递一个类型的新对象`RobotDetailsMouseListener()`：

```
this.addMouseListener(new RobotDetailsMouseListener(this)); 
```

组件本身在屏幕上移动很多（它在 2d 平面上模拟自主机器人）。这和它有什么关系吗？

提前致谢！

# android - Facebook 登录错误 SDK 3.0

> ID：15022580
> 
> 赞同：0
> 
> 时间：2013-02-22T10:58:09.563
> 
> 标签：android, ios, facebook

任何人都面临过这样的问题。我想，这是特定于设备的。我正在使用 Facebook sdk-3.0 android。当我按下返回主页按钮时，它会将我带到浏览器并输入我的凭据，但它仍然向我显示这个 Android 错误。虽然在 ios 中我仍然面临这个错误窗口，但按回家并登录 facebook 到浏览器，我的 ios 应用程序工作正常。

![在此处输入图像描述](../Images/e87952cc7cd3020aa4cf08703e7da614.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:03:45.543

> 返回主页按钮

返回和主页是 Android 上的两个独立按钮，您能提供一些代码吗？

您使用的是什么型号的平板电脑？

还尝试将*targetSdkVersion*（在 AndroidManifest.xml 中）更改/设置为 Android 4.x API 级别 15-17

# python - 如何让 Python 在运行时注意到系统时区的变化？

> ID：15022582
> 
> 赞同：0
> 
> 时间：2013-02-22T10:58:19.483
> 
> 标签：python

如果我在 Python 程序运行时更改计算机的时区，该程序将继续使用旧时区进行计算和转换，除非我重新启动程序。

这在诸如解析使用本地时间的命令的输出（例如`net stats svr`在 Windows 中）的情况下会导致麻烦。`time.mktime(local_naive_datetime.timetuple())`除非重新启动程序，否则将这种解析的本地时间转换为 Unix 时间戳会返回不正确的时间戳，因为它假定本地时间在旧时区。

演示此问题的简单示例：调用`datetime.datetime.now()`，更改系统时区，然后再次调用该函数。第二次调用返回旧时区的本地时间。

是否可以使用函数或其他方法告诉 Python 重新检查系统时区而无需重新启动长时间运行的脚本？

我在 Windows 7 上运行 Python 2.7.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:07:28.187

是的，有一个功能。你可以打电话 `time.tzset()` ，你可以用它`time.tzname` 来获取时区信息。

请看一下[http://docs.python.org/2/library/time.html#time.tzset](http://docs.python.org/2/library/time.html#time.tzset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:17:54.970

此代码用于检测更改。虽然不完全是生产质量。

```
import os
import time
print(time.ctime(time.time()))
inp = input('change time and press enter')
f = open('newtimezone','w')
f.close()
print(time.ctime(os.stat('newtimezone').st_mtime)) 
```

# asp.net - 从一页的gridview列到C#中自动生成gridview的另一页的标签的数据传输

> ID：15022588
> 
> 赞同：0
> 
> 时间：2013-02-22T10:58:45.363
> 
> 标签：asp.net, gridview

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            var firstCell = e.Row.Cells[0];
            firstCell.Controls.Clear();
            firstCell.Controls.Add(new HyperLink { NavigateUrl = "ser_job_status1.aspx?Complaint_No = " + firstCell.Text, Text = firstCell.Text, Target = "_blank" });
        }
    }
} 
```

我已经使用它在我的 gridview 中包含超链接。如果单击该链接，它可能会将我带到 ser_job_status1.aspx，其中 Complaint_No 是我的表字段名称。是否正确...如果正确，我如何在第二页的标签字段中获得 Complaint_No 值。请帮我弄清楚...我在后面的代码中使用 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:22:47.097

在 ser_job_status1.aspx 页面中：

字符串 strComplaintNo=Request.Querystring["Complaint_No"]; label1.text=strComplaintNo

或者

使用 Session 行数据绑定页面

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) { if (e.Row.RowType == DataControlRowType.DataRow) { var firstCell = e.Row.Cells[0]; 会话["ComplaintNo"]=firstCell.text; firstCell.Controls.Clear(); firstCell.Controls.Add(new HyperLink { NavigateUrl = "ser_job_status1.aspx?Complaint_No = " + firstCell.Text, Text = firstCell.Text, Target = "_blank" }); } } }

在 ser_job_status1.aspx 页面中： label1.text=convert.tostring(Session["ComplaintNo"]);

# python - 如果它在另一个列表中，则从列表中删除项目，同时保留重复项 - Python

> ID：15022596
> 
> 赞同：1
> 
> 时间：2013-02-22T10:59:08.890
> 
> 标签：python, list, set, list-comprehension, list-comparison

如果它在另一个列表中，如何从列表中删除项目，同时保留重复项？

我已经成功了，但是有没有更快的方法？

```
x = [1,2,3,4,7,7,5,6,7,8,8]
y = [1,4,5,6,8,9]
z = []
for i in x:
  if i not in y:
   z.append(i)
print z 
```

正确的输出：

```
[2, 3, 7, 7, 7] 
```

或者，列表推导也有效，但这些是唯一的方法吗？

```
x = [1,2,3,4,7,7,5,6,7,8,8]
y = [1,4,5,6,8,9]
z = [i for i in x if not in y] 
```

虽然使用 set 要快得多，但它不会保留重复项：

```
x = [1,2,3,4,7,7,5,6,7,8,8]
y = [1,4,5,6,8,9]
print list(set(x) - set(y)) 
```

集合减法给出了丢失重复项的输出：

```
[2, 3, 7] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:02:19.400

如果顺序不重要

```
>>> x = [1,2,3,4,7,7,5,6,7,8,8]
>>> y = [1,4,5,6,8,9]
>>> from collections import Counter
>>> count=Counter(x)
>>> for i in y:
...     del count[i]
... 
>>> list(count.elements())
[2, 3, 7, 7, 7] 
```

# android - 发送方手机发射功率

> ID：15022598
> 
> 赞同：0
> 
> 时间：2013-02-22T10:59:11.193
> 
> 标签：android, android-wifi, android-wireless

在我的应用程序中，当我从手机接收数据（信标、文件、..）时，我想知道手机**的发射功率。**我需要知道发射功率，以便使用**接收信号强度指示器 (RSSI)**进行距离计算。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:22:43.557

好的，使用信号衰减测量距离：

有不同的方法可以做到这一点。最基本的方法是使用开放空间阻尼，您可以在某个空间（例如房间）内获得参考值。任何新家具或表面材料的变化都会影响这些值。这份文件是一些人的论文或关于这个主题的东西，你可能想看看这个：[http](http://www.s2is.org/Issues/v1/n2/papers/paper14.pdf) ://www.s2is.org/Issues/v1/n2/papers/paper14.pdf 。良好的定位尤其困难，因为阻尼不是线性的。

此函数用于开放空间中的理论阻尼：

```
L = 20 log(d) + 20 log(f) + 36.6, 
```

其中 L 是以 Db 为单位的阻尼 f 是以 MHz 为单位的频率，d 是以英里为单位的距离。

这就是无线电理论

# git - 如何使用 Git 管理项目变化和开发流程？

> ID：15022599
> 
> 赞同：1
> 
> 时间：2013-02-22T10:59:12.627
> 
> 标签：git, git-branch, git-tag, variations

我有一个 Rails 网站，即将出售给不同的客户，每个客户的差异很小。同时，我肯定会开发修复和/或修改项目的“常见”部分。那么如何使用 Git 管理这个开发过程的首选方式呢？最初我虽然“分支”将是要走的路......但1分钟后我意识到在一个分支上提交的任何东西都不会在其他分支上可用，这种修复“公共代码”中的东西的方法会导致在对每个分支的多次提交中。最后，我认为“标签”可能会解决问题，因为它是一种跟踪单个分支变化的方法。我想不出任何其他选择。也许有人可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:59:54.130

您的目标应该是模块化您的代码，以便最终获得一个共同的核心和一系列专业化。理想情况下，核心将包含大部分代码，而专业化将是最少的。

我建议你有：

*   一个通用代码存储库
*   每个客户一个单独的存储库

或者：

*   一个通用代码存储库
*   为您的专业提供一个存储库，每个客户都有单独的分支

然后，您的部署将需要包含您的公共代码（可能这些是您的二进制文件）和特定于客户的专业化（可能是您的配置）。

# mockito - Mockito 和这个电话

> ID：15022600
> 
> 赞同：0
> 
> 时间：2013-02-22T10:59:18.933
> 
> 标签：mockito

我有一个非常简单的例子，如下所示：

```
public class Foo {
    public int foo() {
        return foo1();
    }
    public int foo1() {
        return 1;
    }
}

public class FooTest {
    @Test public void testFoo() {
        Foo f = mock(Foo.class);
        doReturn(1000).when(f).foo1();
        assertThat(f.foo(), equalTo(1000));
    }
} 
```

我得到一个 java.lang.AssertionError: Expected: is(1000) got: <0>，我不明白为什么。显然我一定做错了什么，因为这是非常基本的嘲笑，所以我无法想象这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:55:37.577

请注意，您在 上记录了期望`foo1()`，但后来又调用`foo()`了...所以当然，它返回`0`，而不是`1000`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:04:29.317

您需要的是间谍而不是模拟。

[http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#13](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#13)

试试这个

```
Foo foo = new Foo();
Foo f = spy(foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:37:07.547

当 CGLIB 掌握了你的`Foo`课程时，它并不关心你有什么聪明的实现。您的退货声明不予考虑。Mockito 看到 (1) 一个名为 Foo 的模拟类，(2) 调用 foo1() 时的指令和 (3) 调用 foo() 时没有指令。

在风格上不是现在比*doReturn*更受欢迎吗？所以;

```
when(f.foo1()).thenReturn(1000); 
```

# javafx-2 - 如何克隆 X 和 Y 轴？

> ID：15022601
> 
> 赞同：3
> 
> 时间：2013-02-22T10:59:19.820
> 
> 标签：javafx-2, bar-chart, scatter-plot, linechart

我有一个条形图，上面有一个线图，两个不同的系列

```
barChart.getData().addAll(series1); 
lineChart.getData().addAll(series2); 
```

我的问题：是否有可能以及如何克隆 barChart 轴以便为 lineChart 获得相同的设置？

我想要的是一个完美的轴设置重叠。

谢谢

**编辑：**在这个链接

[轴克隆法](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/Axis.html)

我看到有一个克隆方法方法继承自类 java.lang.Object

我怎样才能使用这种方法？

谢谢大家

**Edit2：**下面是一个显示我的问题的示例类：它绘制了一个折线图，并通过单击 Add serie 按钮添加了一个散点图。

当它绘制黄点时，两个轴重叠，但只需通过鼠标左键单击并拖动图表上的任意位置并左/右或上/下移动图表，轴就会不同步。

通过鼠标左键单击并在 X 或 Y 轴上拖动来扩展/压缩轴的相同问题

```
import java.util.Set;
import javafx.application.Application; 
import javafx.beans.property.SimpleDoubleProperty; 
import javafx.event.ActionEvent;
import javafx.event.EventHandler; 
import javafx.geometry.Side;
import javafx.scene.Group;
import javafx.scene.chart.NumberAxis; 
import javafx.scene.chart.XYChart; 
import javafx.stage.Stage; 
import javafx.scene.Scene; 
import javafx.scene.Node; 
import javafx.scene.chart.*; 
import javafx.scene.control.Button;
import javafx.scene.input.MouseEvent; 
import javafx.scene.layout.BorderPane; 
import javafx.scene.layout.StackPane;

public class RescalingSeries extends Application {

StackPane               mainGraphStackPane = null;
Button btnAdd;
BorderPane pane; 

XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty(); 

protected static Axis _duplicateAxis(Axis axis, Axis result) {

    result.setAnimated(axis.animatedProperty().get());
    result.setAutoRanging(axis.isAutoRanging());
    result.setLabel(axis.getLabel());
    result.setSide(axis.getSide());
    result.setTickLabelFill(axis.getTickLabelFill());
    result.setTickLabelFont(axis.getTickLabelFont());
    result.setTickLabelGap(axis.getTickLabelGap());
    result.setTickLength(axis.getTickLength());
    return result;
}

protected static ValueAxis _duplicateValueAxis(ValueAxis axis, ValueAxis result) {
    _duplicateAxis(axis, result);
    result.setLowerBound(axis.getLowerBound());
    result.setUpperBound(axis.getUpperBound());
    result.setMinorTickCount(axis.getMinorTickCount());
    result.setMinorTickLength(axis.getMinorTickLength());
    result.setTickLabelFormatter(axis.getTickLabelFormatter());
    return result;
}

/**
 * Duplicate a number axis.
 * @param axis The source axis.
 * @return A {@code NumberAxis}, never {@code null}.
 */
public static NumberAxis duplicateNumberAxis(NumberAxis axis) {
    NumberAxis result = new NumberAxis();
    _duplicateValueAxis(axis, result);
    result.setTickUnit(axis.getTickUnit());
    result.setForceZeroInRange(axis.isForceZeroInRange());
    return result;
}

/**
 * Duplicate a category axis.
 * @param axis The source axis.
 * @return A {@code CategoryAxis}, never {@code null}.
 */
public static CategoryAxis duplicateCategoryAxis(CategoryAxis axis) {
    CategoryAxis result = new CategoryAxis(axis.getCategories());
    _duplicateAxis(axis, result);
    result.setStartMargin(axis.getStartMargin());
    result.setEndMargin(axis.getEndMargin());
    result.setGapStartAndEnd(axis.gapStartAndEndProperty().get());
    return result;
}

@Override 
public void start(Stage stage) { 

final NumberAxis xAxisLC = new NumberAxis(1, 12, 1); 
final NumberAxis yAxisLC = new NumberAxis(0.53000, 0.53910, 0.0005);
yAxisLC.setSide(Side.RIGHT);

yAxisLC.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxisLC) { 

    @Override 
    public String toString(Number object) { 
        return String.format("%7.5f", object); 
    } 
}); 

final LineChart<Number, Number> lineChart = new LineChart<>(xAxisLC, yAxisLC); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(true); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 
series1.getData().add(new XYChart.Data(11, 0.530123)); 
series1.getData().add(new XYChart.Data(12, 0.531035)); 

pane = new BorderPane(); 
pane.setCenter(lineChart);
mainGraphStackPane = new StackPane();
mainGraphStackPane.getChildren().add(pane);
Scene scene = new Scene(mainGraphStackPane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 

Group root = new Group();
btnAdd = new Button();
btnAdd.setText("Add serie");
root.getChildren().add(btnAdd);
pane.getChildren().add(root);              

btnAdd.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {        
        NumberAxis xAxisBC = duplicateNumberAxis(xAxisLC);
        NumberAxis yAxisBC = duplicateNumberAxis(yAxisLC);
        ScatterChart<Number, Number> scatterChart = new ScatterChart<>(xAxisBC, yAxisBC); 

        scatterChart.setAlternativeRowFillVisible(false); 
        scatterChart.setAnimated(true); 
        scatterChart.setLegendVisible(false);

        XYChart.Series series2 = new XYChart.Series();

        series2.getData().add(new XYChart.Data(1, 0.53185)); 
        series2.getData().add(new XYChart.Data(2, 0.532235)); 
        series2.getData().add(new XYChart.Data(3, 0.53234)); 
        series2.getData().add(new XYChart.Data(4, 0.538765)); 
        series2.getData().add(new XYChart.Data(5, 0.53442)); 
        series2.getData().add(new XYChart.Data(6, 0.534658)); 
        series2.getData().add(new XYChart.Data(7, 0.53023)); 
        series2.getData().add(new XYChart.Data(8, 0.53001)); 
        series2.getData().add(new XYChart.Data(9, 0.53589)); 
        series2.getData().add(new XYChart.Data(10, 0.53476)); 
        series2.getData().add(new XYChart.Data(11, 0.530123)); 
        series2.getData().add(new XYChart.Data(12, 0.531035));

        scatterChart.getData().addAll(series2);

        Set<Node> chartNode = scatterChart.lookupAll(".chart-plot-background");
        for(final Node chr : chartNode){
            chr.setStyle("-fx-background-color: transparent;");                           
        }                                                
        chartNode = lineChart.lookupAll(".chart-plot-background");
        for(final Node chr : chartNode){
            chr.setStyle("-fx-background-color: transparent");                            
        }
        mainGraphStackPane.getChildren().add(scatterChart);

        xAxisBC.lowerBoundProperty().bind(xAxisLC.lowerBoundProperty());
        yAxisBC.lowerBoundProperty().bind(yAxisLC.lowerBoundProperty());      
    }
});

stage.show(); 
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 
    boolean XScaling=false;
    boolean YScaling=false;

   if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED ){ 
        LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
        NumberAxis yAxis = (NumberAxis) lineChart.getYAxis(); 
        NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

        double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
        double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound(); 
        double newYlower=yAxis.getLowerBound(), newYupper=yAxis.getUpperBound(); 

        double xAxisShift = xAxis.localToScene(0, 0).getX();
        double yAxisShift = yAxis.localToScene(0, 0).getY();

        double yAxisStep=yAxis.getHeight()/(yAxis.getUpperBound()-yAxis.getLowerBound());
        double CurrentPrice=yAxis.getUpperBound()-((mouseEvent.getY()-yAxisShift)/yAxisStep);

        double Delta=0.3;
        if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED && mouseEvent.getX()<xAxisShift+yAxis.getHeight() && mouseEvent.getY()<yAxisShift+yAxis.getHeight() && (XScaling==false || YScaling==false)){

  //==================================================== X-Axis Moving     ==================================

            if(rectinitX.get() < mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()-Delta;
                newXupper=xAxis.getUpperBound()-Delta;
            }
            else if(rectinitX.get() > mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()+Delta;
                newXupper=xAxis.getUpperBound()+Delta;
            }    
            xAxis.setLowerBound( newXlower ); 
            xAxis.setUpperBound( newXupper ); 

//===================================================== Y-Axis Moving ====================================

            if(rectinitY.get() < mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()+Delta/1000;
                newYupper=yAxis.getUpperBound()+Delta/1000;
            }
            else if(rectinitY.get() > mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()-Delta/1000;
                newYupper=yAxis.getUpperBound()-Delta/1000;
            }
            yAxis.setLowerBound(newYlower);
            yAxis.setUpperBound(newYupper);
        }

//----------------------------- Re-Scale the X-Axis when dragging below it ---------------------------------

        else if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED && mouseEvent.getY()>yAxisShift+yAxis.getHeight() ){
            if(rectinitX.get() < mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()+Delta;
                newXupper=xAxis.getUpperBound()-Delta;
            }
            else if(rectinitX.get() > mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()-Delta;
                newXupper=xAxis.getUpperBound()+Delta;
            }    
            xAxis.setLowerBound( newXlower ); 
            xAxis.setUpperBound( newXupper );           
        }

//--------------------------------- Re-Scale the Y-Axis when dragging to the left of it --------------------------

        else if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED && mouseEvent.getX()> (xAxisShift + xAxis.getWidth())){
            if(rectinitY.get() < mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()-Delta/1000;
                newYupper=yAxis.getUpperBound()+Delta/1000;
            }
            else if(rectinitY.get() > mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()+Delta/1000;
                newYupper=yAxis.getUpperBound()-Delta/1000;
            }
            yAxis.setLowerBound(newYlower);
            yAxis.setUpperBound(newYupper);                
        }             
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 

        if(mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED && mouseEvent.getY()>yAxisShift && mouseEvent.getY()<yAxisShift+yAxis.getHeight() && mouseEvent.getX()>xAxisShift && mouseEvent.getX()<xAxisShift+xAxis.getWidth()){

        double XX=((mouseEvent.getX() - xAxisShift) / Tgap) + xAxis.getLowerBound();
        double YY=CurrentPrice;
        series1.setName(String.format("%.2g%n",XX) + ", " + String.format("%.4g%n",YY));
        }          
     } 
} 
}; 

public static void main(String[] args) { 
launch(args);  
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-09T01:43:00.877

这

> ```
> Chart, Axis, and Series 
> ```

对象不可克隆。例如，我需要在两个场景中包含图表。这样做的唯一方法是从原始数据开始，然后将这些元素中的每一个创建两次。

# c# - 发送电子邮件并回复系统

> ID：15022602
> 
> 赞同：0
> 
> 时间：2013-02-22T10:59:21.760
> 
> 标签：c#

我的客户正在使用网络表单向他的客户发送邮件。它是 C# 代码并且工作正常。他希望保留所有已发送邮件的历史记录并针对该邮件进行回复。我正在使用一个数据库，其中保存了从 Web 表单发送的每封邮件。所以我们可以得到电子邮件发送历史。但是我怎样才能得到回复历史。他想要特征，就像它在 elance 中一样。用户通过他的电子邮件地址回复但该电子邮件也出现在 Elance 收件箱中。请帮助我我需要/学习什么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:19:23.850

1.  您是否通过用户输入的 ID 以外的 ID 存储电子邮件？如果没有，请开始这样做。我假设您使用的是数字，但您可以使用任何其他形式的标识。
2.  对于每封电子邮件，您都会存储一个回复号码，默认为 null，因为大多数电子邮件都不是回复。
3.  此回复编号是对另一封电子邮件的内部引用。
4.  访问电子邮件时，您检查是否存储了回复号码。
5.  如果是这样，也检索该电子邮件并显示它，继续检查直到检索到的电子邮件的回复号码为空。

编辑：我假设您已经存储了所有电子邮件，只需要将它们链接在一起。但是您似乎必须在他的电子邮件客户端中添加一个存储已发送电子邮件的功能。或者在网络上放置一个监听器来存储任何传递的电子邮件。或者，您可以向系统添加一项功能，以阅读从 Web 表单发送的电子邮件并允许回复。此自定义电子邮件客户端还将存储所有回复。

# java - java Runtime.exec python和python中的线程不运行

> ID：15022604
> 
> 赞同：0
> 
> 时间：2013-02-22T10:59:29.247
> 
> 标签：java, python, multithreading, runtime.exec, pid

蟒蛇脚本：

```
import os
import subprocess
import threading
import sys
command= sys.argv[1:]
command=" ".join(command)

def readValue():
    print 'start receive command'
    while True:
        msg=raw_input()
        print 'msg received: %s' % msg
        if 'kill'==msg:
            os.killpg(os.getpgid(p.pid),9)

newThread = threading.Thread(target = readValue, name = "readingThread" )
newThread.setDaemon(1)
newThread.start()

p=subprocess.Popen(command,shell=True,preexec_fn=os.setpgrp)
p.wait()

exitCode=p.poll()
sys.exit(exitCode) 
```

在 bash 中运行脚本

*python script.py 睡眠 100*

并输入一个*kill*字符串，进程成功kill

但是当在java中运行脚本时

```
Runtime runtime = Runtime.getRuntime();
Process process=runtime.exec("python script.py sleep 100");
Thread.sleep(1000);
process.getOutputStream().write("kill\n".getBytes());
process.waitFor(); 
```

python中的newThread似乎没有运行并且线程没有收到*kill字符串*

谁能告诉我为什么这不起作用？或者有没有像 os.setpgrp 和 os.killpg 这样的其他方式来杀死所有的子进程

操作系统：ubuntu 12.04
内核：3.2.0-37-generic
java：1.6.0_34
python：2.7.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:34:35.980

尝试添加：

```
process.getOutputStream().flush(); 
```

或者，另一种方法：

```
PrintWriter outputWriter = new PrintWriter(process.getOutputStream(),true);
outputWriter.println("kill"); 
```

# ruby-on-rails - Rails 模型加入 has_many

> ID：15022605
> 
> 赞同：1
> 
> 时间：2013-02-22T10:59:29.400
> 
> 标签：ruby-on-rails, model, model-associations

这是我正在尝试做的事情：

```
class Cashflow < ActiveRecord::Base
    belongs_to from_account, :class_name => 'Account'
    belongs_to to_account, :class_name => 'Account'
end

class Account < ActiveRecord::Base
    has_many :cashflows
end 
```

where`Account::cashflows`显然是所有`cashflows`存储`account_id`in`from_account`或 in的列表`to_account`。

我很困惑。处理这种情况的正确方法是什么？这是多么糟糕的设计？设计这种关系的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:13:55.963

在我脑海中的建议

1）你的班级（表）`cashflows`应该有两列from_account和to_account。

2）`from_account`并且`to_account`应该有相关帐户的ID

3)`cashflows`应该`belongs_to :account`

4)`account`应该`has_many :cashflows`。理想情况下应该是`cash_flows`

这些应该是很好的起点。他们不符合你的要求吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:36:15.037

我认为您的结构正确，因为特定交易/现金流只能涉及两个账户。如果您使用多对多关联，则需要处理不涉及多于或少于 2 个帐户的验证。对于您当前的结构，您可以将您的模型关联更改为：

```
class Cashflow < ActiveRecord::Base
  belongs_to from_account, :class_name => 'Account', :foreign_key => :from_account
  belongs_to to_account, :class_name => 'Account', :foreign_key => :to_account
end

class Account < ActiveRecord::Base
  has_many :debits, :class_name => 'Cashflow', :foreign_key => :from_account
  has_many :credits, :class_name => 'Cashflow', :foreign_key => :to_account

  def cashflows
    transactions = []
    transactions << self.debits
    transactions << self.credits
    transactions.flatten!

    ## or may be the following commented way
    # Cashflow.where('from_account = ? OR to_account = ?', self.id, self.id)
  end
end 
```

通过这种方式，您可以跟踪特定账户中借记/贷记的金额，并获取参与特定交易/现金流的账户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:13:44.600

我认为您应该在这里使用 has 并且属于许多关联：

```
class Account < ActiveRecord::Base
  has_and_belongs_to_many :incoming_cashflows, :class_name => 'Cashflow', :join_table => :incoming_cashflows_accounts
  has_and_belongs_to_many :outcoming_cashflows, :class_name => 'Cashflow', :join_table => :outcoming_cashflows_accounts
end

class Cashflow < ActiveRecord::Base
  has_and_belongs_to_many :from_accounts, :class_name => 'Account', :join_table => :incoming_cashflows_accounts
  has_and_belongs_to_many :to_accounts, :class_name => 'Account', :join_table => :outcoming_cashflows_accounts
end 
```

此外，您将需要一些验证码，以便仅将一个帐户添加到 Cashflow。

# java - SmartGwt 使用 Netbeans

> ID：15022606
> 
> 赞同：0
> 
> 时间：2013-02-22T10:59:36.487
> 
> 标签：java, jsp, gwt, smartgwt

我有一个问题。我开始使用 SmartGWT。我想将“SmartGWT 小部件”添加到“Netbeans”的调色板并使用拖放来构建我的 GUI（如在 Swing (Java) 中）。我可以做吗？如果是，如何？.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:31:19.653

如果您想要小部件的拖放功能，则无需将它们添加到 Netbeans（甚至不知道该怎么做）。

因为 [GWT Designer](https://developers.google.com/web-toolkit/tools/gwtdesigner/)已经存在，您可以将 Gwt 设计器与 SmartGwt 一起使用。

这是一个关于那个的[视频](http://www.youtube.com/watch?v=Cq0UNdBwbYY)

[GWT Designer + Smart GWt 3.0](http://idarkcell.wordpress.com/2012/08/26/gwt-designer-smartgwt-3-0/)的另一个链接

# php - Quickbook在线服务赠送500台内部服务器

> ID：15022608
> 
> 赞同：0
> 
> 时间：2013-02-22T10:59:36.953
> 
> 标签：php, curl, quickbooks, quickbooks-online

我正在尝试通过 curl 调用服务，这是我的代码，每次我收到附加错误时

```
error_reporting(-1); 
$qbsite = "https://qbo.sbfinance.intuit.com/resource/account/v2/960432556";
$headers = array(
        'Content-Type'=>'application/xml',
        'oauth_version' => "1.0",
        'oauth_signature_method'=>"HMAC-SHA1",
        'oauth_nonce'=>"xxx",
        'oauth_timestamp'=>"xxx",
        'oauth_consumer_key'=>"qyprdvZraQrBVbrPIptwd6gl6C6knP",
        'oauth_token'=>"qyprdyLcCq9KMGVzqxtObeOkTvSWhhi7sNSW62u9gwqDXsc7",
        'oauth_signature'=>"LnVYSgE9YZ77KgKZ1kLT3ouIu1M=",

);

$xmlData = '<?xml version="1.0" encoding="utf-16"?> 
            <Account xmlns:ns2="http://www.intuit.com/sb/cdm/qbo" xmlns="http://www.intuit.com/sb/cdm/v2"> 
                <Name>Loan Account </Name> 
                <Desc>Loan Account</Desc> 
                <Subtype>Savings</Subtype> 
                <AcctNum>5001</AcctNum> 
                <OpeningBalanceDate>2010-05-14</OpeningBalanceDate> 
            </Account>';

$ch = curl_init($qbsite);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, "\n{$xmlData}");
$response = curl_exec($ch);
print($response);die; ! 
```

![在此处输入图像描述](../Images/7e89ca4224aca6ab3329db3997379528.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:54:44.497

这：

```
$headers = array(
        'Content-Type'=>'application/xml',
        'oauth_version' => "1.0",
        'oauth_signature_method'=>"HMAC-SHA1",
        'oauth_nonce'=>"xxx",
        'oauth_timestamp'=>"xxx",
        'oauth_consumer_key'=>"qyprdvZraQrBVbrPIptwd6gl6C6knP",
        'oauth_token'=>"qyprdyLcCq9KMGVzqxtObeOkTvSWhhi7sNSW62u9gwqDXsc7",
        'oauth_signature'=>"LnVYSgE9YZ77KgKZ1kLT3ouIu1M=",

); 
```

甚至不接近正确的 OAuth 签名。OAuth 签名将所有这些信息放在一个单独的`Authorization: ...`HTTP 标头中，而您将每条 OAuth 数据放在单独的 HTTP 标头中。

例如，正确的 OAuth 标头如下所示：

```
Authorization: OAuth realm="",
    oauth_consumer_key="dpf43f3p2l4k3l03",
    oauth_nonce="kllo9940pd9333jh",
    oauth_timestamp="1191242096",
    oauth_signature_method="HMAC-SHA1",
    oauth_version="1.0",
    oauth_signature="tR3%2BTy81lMeYAr%2FFid0kMTYa%2FWM%3D" 
```

此外，OAuth 签名不是静态值——它们必须被计算并且随着每个请求而改变。

您应该下载[QuickBooks PHP DevKit](http://consolibyte.com/downloads/quickbooks-php-devkit/)的每晚版本（免责声明：我是作者）——它是一个专门设计用于完成您正在做的事情的库（与 QuickBooks 集成），它负责构建正确的为您提出的 OAuth 请求。

具体来说，下载它并查看以下示例：

*   文档/example_ipp_oauth.php
*   文档/example_ipp_ids_5.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:03:19.363

您是否尝试过删除此行末尾的 ,

```
'oauth_signature'=>"LnVYSgE9YZ77KgKZ1kLT3ouIu1M=", 
```

# python - Json响应错误：响应为空？

> ID：15022609
> 
> 赞同：-1
> 
> 时间：2013-02-22T10:59:41.973
> 
> 标签：python, json, error-handling, tornado, uncaught-exception

我有个问题。

我有一个向传感器网络发送命令的页面。

当我点击这部分代码时

```
<a href='javascript:void(send_command_to_sensor("{{net.id}}", "{{sens.id}}", "identify"));'></a> 
```

我调用一个js函数，这个：

```
function send_command_to_sensor(net, sens, command) {
  $.ajax({url: "/networks/" + net + "/sensors/" + sens + "/send?command=" + command,
  type: "GET",
  async: true,
  dataType: "json",
  success: function(json_response) { 
             var err = json_response['error'];
         if (err) {
           show_alert('error', err);
           return;
         }
         var success = json_response['success'];
         if (success) {
           show_alert('success', success);
           return;
         }
         show_alert('alert', "This should not happen!");
           }
  }); 
} 
```

此函数构建一个 url，用于调用用 python 编写的 Tornado Web 服务器中的处理程序。处理程序是这样的：

```
################################################################################
# SensorSend handler. 
# Sends a packet to the sensor by writing in a file (Should work through
# MySQL database) read by Quantaserv Daemon
################################################################################
class SensorSendHandler(BaseHandler):
    # Requires authentication 
    @tornado.web.authenticated
    def get(self, nid, sid):
        command = self.get_argument('command').upper(); 

        print command

        # Retrieve the current user 
        usr = self.get_current_user()
        usr_id = usr['id']

        self.lock_tables("read", ['nets_permissions as n'])
        perm = self.db.get("SELECT n.perm FROM nets_permissions as n \
                              WHERE n.network_id=%s AND n.user_id=%s", nid, int(usr_id))
        self.unlock_tables()

        # Check whether the user has access to the network
        perms = self.check_network_access(nid, perm['perm'])

        #Check wether the sensor exists in this network
        self.check_sensor_in_network(sid, nid)

        # The dictionary to return
        ret = {}

        ############################################################################
        # The following Code is valid for ZTC networks only
        # Must be generalized
        # TODO: - get the network type:
        #       - check wether the command is allowed
        ############################################################################
        if command not in ['ON', 'OFF', 'TOGGLE', 'IDENTIFY']:
            raise tornado.web.HTTPError(404, "Unknown command: " + str(command))

        #Command OnOffCmd_SetState
        if command in ['ON', 'OFF', 'TOGGLE']:
            op_group = "70"
            op_code = "50"
            packet_meta = "%s%s%s%s02%s%s600080000%s"
            pkt_len = hextransform(16, 2)
            netid = hextransform(int(nid), 16)
            sens_id = hextransform(int(sid) >> 16, 4)
            sens_id_little = invert2bytes(sens_id,0)
            cluster_id = hextransform(int(sid) & 0x00FFFF, 4)
            end_point = "08"

            if command == 'ON':
                cmd_data = "01"
            elif command == 'OFF':
                cmd_data = "00"
            elif command == 'TOGGLE':
                cmd_data = "02"

            packet = packet_meta % (netid, op_group, op_code, pkt_len, sens_id, end_point, cmd_data)
            packet = packet.upper()

            op_group_hex=0x70
            op_code_hex=0x50

            print command

        #Command ZDP-IEEE_addr.Request            
        elif command == 'IDENTIFY':
            op_group = "A2"
            op_code = "01"
            packet_meta = "%s%s%s%s"
            pkt_len = hextransform(2, 2)

            sens_id = hextransform(int(sid) >> 16, 4)
            sens_id_little = invert2bytes(sens_id,0)

            packet = packet_meta % (op_group, op_code, pkt_len, sens_id)
            packet = packet.upper()

            op_group_hex=0xA2
            op_code_hex=0x01

        #Command ZDP-Active_EP_req.Request            
        elif command == 'HOWMANY':
            op_group = "A2"
            op_code = "05"
            packet_meta = "%s%s%s%s%s"
            pkt_len = hextransform(4, 2)
            netid = hextransform(int(nid), 16)
            sens_id = hextransform(int(sid) >> 16, 4)
            sens_id_little = invert2bytes(sens_id,0)

            packet = packet_meta % (op_group, op_code, pkt_len, sens_id, netid)
            packet = packet.upper()

            op_group_hex=0xA2
            op_code_hex=0x05

        mynet_type ="ztc"

        cmdjson = packet2json(op_group_hex,op_code_hex, packet)

        print("\t\t " + packet + "\n")

        #
        #
        #TODO : -write command into db  
        ts = datetime.datetime.now().isoformat()
        self.lock_tables("write", ['confcommands'])
        self.db.execute("INSERT INTO confcommands (network_id, ntype, timestamp, command) \
                                  VALUES (%s,%s,%s,%s)", nid, mynet_type, ts, cmdjson)
        self.unlock_tables();
        ############### ELISA ##########################################
        # TODO: - open the /tmp/iztc file in append mode
        cmdfile = open('/tmp/iztc', 'a')
        #       - acquire a lock  "only for the DB case, it's easier"
        #       - write the packet 
        cmdfile.write(nid + "\t"+ mynet_type + "\t"+ ts + "\t"+  cmdjson +"\n");
        #       - release the lock "only for the DB case, it's easier"
        #       - close the file
        cmdfile.close()

        if command == 'HOWMANY':
            opcodegroupr = "A0"
            opcoder = "85"
        elif command == 'IDENTIFY':
            opcodegroupr = "A0"
            opcoder = "81"

        print command

        #Code for retrieving the MAC address of the node
        como_url = "".join(['http://', options.como_address, ':', options.como_port,
                            '/', ztc_config, '?netid=', netid,
                            '&opcode_group=', opcodegroupr, 
                            '&opcode=', opcoder, '&start=-5m&end=-1s'])
        http_client = AsyncHTTPClient()
        response = yield tornado.gen.Task(http_client.fetch, como_url)

        ret = {}
        if response.error:
            ret['error'] = 'Error while retrieving unregistered sensors'
        else:
            for line in response.body.split("\n"):
                if line != "": 
                    value = int(line.split(" ")[6])

        ret['response'] = value
        self.write(tornado.escape.json_encode(ret))

        if command == 'HOWMANY':
            status = value[0]
            NwkAddress = value[1:2]
            ActiveEPCount = value[3]
            ActiveEPList = value[len(ActiveEPCount)]
            if status == "0":
                ret['success'] = "The %s command has been succesfully sent!" % (command.upper())
                self.write(tornado.escape.json_encode(ret))
            elif status == "80":
                ret['error'] = "Invalid Request Type"
                self.write(tornado.escape.json_encode(ret))
            elif status == "89":
                ret['error'] = "No Descriptor"
                self.write(tornado.escape.json_encode(ret))
            else:
                ret['error'] = "Device not found!"
                self.write(tornado.escape.json_encode(ret))

        if command == 'IDENTIFY':
            status = value[0]
            IEEEAddrRemoteDev = value[1:8]
            NWKAddrRemoteDev = value[9:2]
            NumOfAssociatedDevice = value[11:1]
            StartIndex = value[12:1]
            ListOfShortAddress = value[13:2*NumOfAssociatedDevice]
            if status == "0":
                ret['success'] = "Command succesfully sent! The IEEE address is: %s" % (IEEEAddrRemoteDev)
                self.write(tornado.escape.json_encode(ret))
            elif status == "80":
                ret['success'] = "Invalid Request Type"
                self.write(tornado.escape.json_encode(ret))
            else:
                ret['error'] = "Device Not Found"
                self.write(tornado.escape.json_encode(ret)) 
```

我在开发者控制台中收到的错误是这样的：

> 未捕获的类型错误：无法读取 null $.ajax.successwsn.js:26 jQuery.Callbacks.firejquery-1.7.2.js:1075 jQuery.Callbacks.self.fireWithjquery-1.7.2.js:1193 donejquery-的属性“错误” 1.7.2.js:7538 jQuery.ajaxTransport.send.callback

在js函数中。为什么函数不知道“错误”或“成功”？哪里有问题？？？？我认为程序永远不会进入处理程序，而是在之后被阻止，只是在 js 函数中。

非常感谢你的帮助！这篇文章很长，但读起来很简单！请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:22:29.867

快速阅读是该功能未正确装饰。

线

```
 response = yield tornado.gen.Task(http_client.fetch, como_url) 
```

意味着您应该这样声明该函数：

```
@tornado.web.asynchronous
@tornado.gen.engine
@tornado.web.authenticated
def get(self):
    .... 
```

注意添加了两个额外的装饰器。

# php - 从 CKEditor pastefromword 中删除不必要的标签

> ID：15022612
> 
> 赞同：1
> 
> 时间：2013-02-22T10:59:51.603
> 
> 标签：php, tags, ckeditor

我想分享我是如何设法从 CKEditor 中的 pastefromword 中清理数据的。

只需包含我自己的答案中的代码并使用

保存或查看 textarea content.up 时 php 中的 clean_tags()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:59:51.603

```
<?php

/**
 * Created by JetBrains PhpStorm.
 * User: jpietal
 * Date: 22.02.13
 * Time: 11:35
 * To change this template use File | Settings | File Templates.
 */

/* @return string
 * @author Milian <mail@mili.de>
 */

function closetags($html) {

//#put all opened tags into an array
preg_match_all('#<([a-z]+)(?: .*)?(?<![/|/ ])>#iU', $html, $result);
$openedtags = $result[1];   //#put all closed tags into an array
preg_match_all('#</([a-z]+)>#iU', $html, $result);
$closedtags = $result[1];
$len_opened = count($openedtags);

//#all tags are closed
if (count($closedtags) == $len_opened) {
    return $html;
}

$openedtags = array_reverse($openedtags);

//#close tags
for ($i=0; $i < $len_opened; $i++) {
    if (!in_array($openedtags[$i], $closedtags)){
        $html .= '</'.$openedtags[$i].'>';
    } else {
        unset($closedtags[array_search($openedtags[$i], $closedtags)]);    
    }
}

return $html;
}

/* @return string
 * @author Jacek Pietal
 */

function cleanup_tags($string) {
$replaceSpaces = str_replace('&nbsp;', ' ', $string);
$removeEvilTags = strip_tags($replaceSpaces, '<a><div><br><ul><li><b><i><u><em><strong>');
$closeEvilTags = closetags($removeEvilTags);
$replaceSlashes = str_replace('\\\\', '\\', $closeEvilTags);
$stripSlashes = stripslashes($replaceSlashes);
return $stripSlashes;
}

?> 
```

# java - (De-)在运行时以自定义方式序列化 Bean

> ID：15022617
> 
> 赞同：13
> 
> 时间：2013-02-22T11:00:08.087
> 
> 标签：java, json, jackson

假设我有以下 POJO：

```
class Pojo {
    String s;
    Object o;
    Map<String, String> m;
} 
```

在运行时，我想要除一个之外的所有属性的默认序列化/反序列化。通常，我想在序列化时用数据库中的 ID 替换字段，类似于[this other question](https://stackoverflow.com/questions/5325096/deserializing-entities-with-relationships)。

例如，我想替换`o`为从外部映射获得的字符串（例如：`object1`<=> "123" 和`object2`<=> "456"）：

*   序列化：读取`o`和替换（所以如果`o`是`object1`，序列化为字符串“123”）
*   反序列化：读取“123”，查询某个表以获取返回的原始值`o`（即`object1`），重新创建一个`Pojo`对象`o = object1`。

我知道模块将是一种方法，但我不确定如何使用它们，同时为不需要更改的属性保留自动 BeanSerializer/Deserializer。

有人可以举一个例子（甚至是人为的）或替代方法吗？

* * *

笔记：

*   我不能使用注释或 Mixins，因为在编译时更改是未知的（即任何属性都可能以无法确定的方式更改）。
*   [另一个问题](https://stackoverflow.com/questions/2981359/jackson-suppressing-serializationwrite-of-properties-dynamically)指向使用 CustomSerializerFactory，这似乎可以完成这项工作。不幸的是，官方网站表明[它不再是推荐的方法](http://wiki.fasterxml.com/CustomSerializerFactory)，而是应该使用模块。

* * *

**编辑**

为了更清楚一点，我可以使用 Mixins 执行以下操作：

```
ObjectMapper mapper = new ObjectMapper(MongoBsonFactory.createFactory());
mapper.addMixInAnnotations(Pojo.class, PojoMixIn.class);

ObjectReader reader = mapper.reader(Pojo.class);
DBEncoder dbEncoder = DefaultDBEncoder.FACTORY.create();
OutputBuffer buffer = new BasicOutputBuffer();
dbEncoder.writeObject(buffer, o); 
```

使用以下 Mixin：

```
abstract class PojoMixIn {
    @JsonIgnore Object o;
} 
```

然后将所需的字符串添加到 JSON 内容中。但是我需要在编译时知道它是`o`需要替换的字段，而我不需要。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-24T12:51:23.910

我认为`@JsonSerialize`并且`@JsonDeserialize`是您需要的。这些注释使您可以控制特定字段的序列化/反序列化。[这个问题](https://stackoverflow.com/questions/12921812/create-a-custom-jackson-annotation)展示了将它们组合成一个注释的优雅方式。

**UPD。**对于这种复杂的场景，您可以查看`BeanSerializerModifier/BeanDeserializerModifier`类。这个想法是用您的特定字段的自定义逻辑修改一般性`BeanSerializer/BeanDeserializer`，并让基本实现来做其他事情。稍后将发布一个示例。

**UPD2。**如我所见，其中一种方法可能是使用`changeProperties`方法并分配您自己的序列化程序。

**UPD3。**更新了自定义序列化程序的工作示例。反序列化可以以类似的方式完成。

**UPD4。**更新了具有完全自定义序列化/反序列化的示例。（我用过**jakson-mapper-asl-1.9.8**）

```
 public class TestBeanSerializationModifiers {

    static final String PropertyName = "customProperty";
    static final String CustomValue = "customValue";
    static final String BaseValue = "baseValue";

    // Custom serialization

    static class CustomSerializer extends JsonSerializer<Object> {
        @Override
        public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {
            String customValue = CustomValue; // someService.getCustomValue(value);
            jgen.writeString(customValue);
        }
    }

    static class MyBeanSerializerModifier extends BeanSerializerModifier {
        @Override
        public List<BeanPropertyWriter> changeProperties(SerializationConfig config, BasicBeanDescription beanDesc, List<BeanPropertyWriter> beanProperties) {
            for (int i = 0; i < beanProperties.size(); i++) {
                BeanPropertyWriter beanPropertyWriter = beanProperties.get(i);
                if (PropertyName.equals(beanPropertyWriter.getName())) {
                    beanProperties.set(i, beanPropertyWriter.withSerializer(new CustomSerializer()));
                }
            }
            return beanProperties;
        }
    }

    // Custom deserialization

    static class CustomDeserializer extends JsonDeserializer<Object> {
        @Override
        public Object deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            // serialized value, 'customValue'
            String serializedValue = jp.getText();
            String baseValue = BaseValue; // someService.restoreOldValue(serializedValue);
            return baseValue;
        }
    }

    static class MyBeanDeserializerModifier extends BeanDeserializerModifier {
        @Override
        public BeanDeserializerBuilder updateBuilder(DeserializationConfig config, BasicBeanDescription beanDesc, BeanDeserializerBuilder builder) {
            Iterator<SettableBeanProperty> beanPropertyIterator = builder.getProperties();
            while (beanPropertyIterator.hasNext()) {
                SettableBeanProperty settableBeanProperty = beanPropertyIterator.next();
                if (PropertyName.equals(settableBeanProperty.getName())) {
                    SettableBeanProperty newSettableBeanProperty = settableBeanProperty.withValueDeserializer(new CustomDeserializer());
                    builder.addOrReplaceProperty(newSettableBeanProperty, true);
                    break;
                }
            }
            return builder;
        }
    }

    static class Model {

        private String customProperty = BaseValue;
        private String[] someArray = new String[]{"one", "two"};

        public String getCustomProperty() {
            return customProperty;
        }

        public void setCustomProperty(String customProperty) {
            this.customProperty = customProperty;
        }

        public String[] getSomeArray() {
            return someArray;
        }

        public void setSomeArray(String[] someArray) {
            this.someArray = someArray;
        }
    }

    public static void main(String[] args) {
        SerializerFactory serializerFactory = BeanSerializerFactory
                .instance
                .withSerializerModifier(new MyBeanSerializerModifier());

        DeserializerFactory deserializerFactory = BeanDeserializerFactory
                .instance
                .withDeserializerModifier(new MyBeanDeserializerModifier());

        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setSerializerFactory(serializerFactory);
        objectMapper.setDeserializerProvider(new StdDeserializerProvider(deserializerFactory));

        try {
            final String fileName = "test-serialization.json";
            // Store, "customValue" -> json
            objectMapper.writeValue(new File(fileName), new Model());
            // Restore, "baseValue" -> model
            Model model = objectMapper.readValue(new File(fileName), Model.class);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# objective-c - 有没有办法让 FSNConnection 保持同步？

> ID：15022619
> 
> 赞同：0
> 
> 时间：2013-02-22T11:00:10.793
> 
> 标签：objective-c, xcode4.5

```
NSString *mediaType = info [UIImagePickerControllerMediaType];
if ([mediaType isEqualToString:(NSString *)kUTTypeImage])
{
    NSURL * URL = [NSURL URLWithString:[BGMakeURL URLForUploadImage]];
    UIImage * image = info[UIImagePickerControllerEditedImage];
    if(!image)
    {
        image= info[UIImagePickerControllerOriginalImage];
    }
    NSMutableDictionary *parameters = [NSMutableDictionary dictionary];

    parameters [@"__VIEWSTATE"]=@"/wEPDwUKMTQxNzIxMTc0MQ9kFgICAw8WAh4HZW5jdHlwZQUTbXVsdGlwYXJ0L2Zvcm0tZGF0YWRkpPnRKFYg9pwczRd4Lr3SFyeNR3bJtDpNqNyMm9qs/4g=";
    parameters [@"__EVENTVALIDATION"]=@"/wEWBgLE38oCAofc/4YFAuv/gd4CApahmrIJAuKeq6sMAu3ehcwDnwyRwRhgxmSADdcUMCfAUEl1cW8dliatCxOiAEYU8Jc=";
    parameters [@"Image"]=[FSNData withImage:image jpegQuality:.9 fileName:@"fileName"];

  FSNConnection *connection =
    [FSNConnection withUrl:URL
                    method:FSNRequestMethodPOST
                   headers:nil
                parameters:parameters
                parseBlock:nil
           completionBlock:^(FSNConnection * connection){
               id whatistheresult=connection.parseResult;
               PO(whatistheresult);
               [BGLoadingView toast:@"Image Uploaded"];
           }
             progressBlock:nil];
    [connection start]; 
```

就我现在而言，这不是同步的。如果我想要它同步呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:18:01.540

当然，但正确的方法取决于是否编译了 FSNetworking `FSN_QUEUED_CONNECTIONS`（从 GitHub 上的当前源代码判断）。假设它是，那么你会做这样的事情：

```
dispatch_semaphore_t sem = dispatch_semaphore_create(0);
FSNConnection *connection =
    [FSNConnection withUrl:URL
                    method:FSNRequestMethodPOST
                   headers:nil
                parameters:parameters
                parseBlock:nil
           completionBlock:^(FSNConnection * connection){
               dispatch_semaphore_signal(sem);
           }
             progressBlock:nil];
[connection start];
dispatch_semaphore_wait(sem, DISPATCH_TIME_FOREVER); // This will block until completion block is called
dispatch_release(sem); 
```

如果它不是用你编译的，`FSN_QUEUED_CONNECTIONS`你需要旋转运行循环，像这样：

```
FSNConnection *connection =
    [FSNConnection withUrl:URL
                    method:FSNRequestMethodPOST
                   headers:nil
                parameters:parameters
                parseBlock:nil
           completionBlock:nil
             progressBlock:nil];
[connection start];

while (!connection.didComplete)
{
    CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0, YES);
}

// Execution won't get here until the connection is complete. 
```

# ruby - 为什么使用 Rails public_method？

> ID：15022621
> 
> 赞同：3
> 
> 时间：2013-02-22T11:00:17.283
> 
> 标签：ruby, ruby-on-rails-3

我正在阅读 Avdi Grimm 的书“Rails 中的对象”，他使用了 public_method 方法，但我不明白为什么。这是代码示例：

```
class Blog
  # ...
  attr_writer :post_source
  # ...
  private
  def post_source
    @post_source ||= Post.public_method(:new)
  end
end 
```

为什么要调用 Post.public_method(:new) 而不是 Post.new？这些方法有什么不同还是完全相同？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:05:19.497

```
Post.new 
```

不等于**_**

```
Post.public_method(:new) 
```

前者是对方法的调用`new`，默认情况下，它会创建一个新`Post`对象。然而，后者*不会*立即调用`new`。它只是准备稍后调用它。我还没有读过那本书，但是如果您查看相关的源代码，您会看到这一行

```
@post_source.call # maybe some params are passed here 
```

这是`Post#new`最终被调用的地方。

文档：[Object#public_method](http://ruby-doc.org/core-1.9.3/Object.html#method-i-public_method)，[Object#method](http://ruby-doc.org/core-1.9.3/Object.html#method-i-method)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:04:54.730

`Post.public_method(:new)`并且`Post.new`是不同的东西。后者创建一个`Post`. 前者创建 的实例`Method`，它不是应用这种方法的结果，而是方法本身的抽象。`call`您可以稍后通过对其进行操作来取出它的结果。

`Post.public_method(:new)`可以替换为`Post.method(:new)`，除非存在名为 的私有或受保护方法`new`。如果有的话，只是确保不要参考这些方法。

# android - Eclipse ADT 更新不起作用

> ID：15022622
> 
> 赞同：20
> 
> 时间：2013-02-22T11:00:17.127
> 
> 标签：android, eclipse-plugin, adt, updates

我将我的 android sdk 更新为并尝试通过 ecplise 更新我的 adt

> 帮助-> 检查更新

此操作会导致对话框显示：

> 未找到更新

但我的 SDK 说：

> 这个android是SDK 需要Android Development Kit 21.1.0 或以上 当前版本是21.1.0.v201212060256-543035
> 
> 请将 ADT 更新到最新版本。

帮帮我吧，你有我无限的感激之情。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-22T11:10:58.557

*Edit. 26/03/2016*

*Please note that **Google Announced: Support for the Android Developer Tools (ADT) in Eclipse has ended**, so consider migration to Android Studio.*

* * *

Solution:

The **fastest installation way** I found to solve that **without deleting eclipse, or losing any data/settings**:

1.  Go ~~[**here**](http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting)~~ download **latest version** of ADT, current [ADT-23.0.7.zip](https://dl.google.com/android/ADT-23.0.7.zip) (*)
2.  At `Eclipse` > `Help` > `Install new software...` > Uncheck `Contact all update sites during install to find required software` (bottom, last preference) in order to avoid any unwanted delays during install.
3.  Same screen (top) Click `Add` > `Archive` > select downloaded `ADT-X.X.X.zip` > follow on screen installation steps

As a user mentioned in a comment if you still face problems on updating like that you may try removing the previous version of ADT before installation.

* * *

(*) Previous versions:

*   [ADT-23.0.0.zip](http://dl.google.com/android/ADT-23.0.0.zip) | [ADT-23.0.2.zip](http://dl.google.com/android/ADT-23.0.2.zip) | [ADT-23.0.3.zip](https://dl.google.com/android/ADT-23.0.3.zip) | [ADT-23.0.4.zip](https://dl.google.com/android/ADT-23.0.4.zip) | [ADT-23.0.6.zip](https://dl.google.com/android/ADT-23.0.6.zip)
*   [ADT-22.6.0.zip](http://dl.google.com/android/ADT-22.6.0.zip) | [ADT-22.6.1.zip](http://dl.google.com/android/ADT-22.6.1.zip) | [ADT-22.6.2.zip](http://dl.google.com/android/ADT-22.6.2.zip) | [ADT-22.6.3.zip](http://dl.google.com/android/ADT-22.6.3.zip)
*   [ADT-22.3.0.zip](http://dl.google.com/android/ADT-22.3.0.zip)
*   [ADT-22.2.1.zip](http://dl.google.com/android/ADT-22.2.1.zip)
*   [ADT-22.0.0.zip](https://dl.google.com/android/ADT-22.0.0.zip) | [ADT-22.0.1.zip](http://dl.google.com/android/ADT-22.0.1.zip) | [ADT-22.0.5.zip](http://dl.google.com/android/ADT-22.0.5.zip)
*   [ADT-21.1.0.zip](http://dl.google.com/android/ADT-21.1.0.zip)

***Edit** to fit the updates of ADT, this solution seems to work in any version* :D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T08:23:28.750

I had similar issue when upgrading to 22.6.1 and I got support from Android team. The solution was super simple.

You need to go *Help - Install new software* and choose there **httpS**:// (**s** is important) update site, and then execute installation.

Check out this [solution](https://code.google.com/p/android/issues/detail?id=67325) on Android issue tracker.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-20T21:31:55.270

I had another issue with ADT 23+.

My ADT plugin was out-of-date, but Eclipse was still saying that the latest version was already installed. Installing manually the latest ADT version with the archive was not working either.

Eclipse was wrong so I made a clean install of ADT Plugins.

1.  Uninstall ADT in Eclipse: **Help > About Eclipse > Installation Details**

2.  Select the plugins then click on **Uninstall...**

3.  Relaunch Eclipse

4.  Install ADT again: **Help > Install New Software...**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:09:31.087

我有同样的问题。由于某种原因，命令行更新对我不起作用。这是我在此之前的任何更新中都没有遇到过的某种错误。这是我为修复它所做的：

*   我删除了我的eclipse安装

*   Downloaded a fresh copy of the sdk from [the developer website](https://developer.android.com/sdk/index.html)

*   unzipped the sdk and copied only the eclipse folder

*   replaced my old eclipse folder with this one (deleted the rest of the download since I already had the sdk)

*   started up eclipse and pointed the workspace location to the old workspace I already had. All my projects were back as I had left them.

There might be other methods as well. This one seemed simplest to me. Others have suggested updating every eclipse component one by one and things like that but it seemed too tedious to me. If your eclipse installation is heavily customized and you have a lot of plugins installed then it might make sense to find an alternative. My install is always pretty minimalistic so I didn't mind throwing it away and starting from scratch.

Hope this helps!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T11:20:02.740

And at the page Google for Android Development at link [http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting](http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting)

They say:

If Eclipse can not find the remote update site containing the ADT plugin, try changing the remote site URL to use http, rather than https. That is, set the Location for the remote site to:

```
http://dl-ssl.google.com/android/eclipse/ 
```

For me - it's help.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-15T15:20:40.220

If the solution of madlymad is not working, you could also try this [solution](https://stackoverflow.com/questions/24445367/error-in-adt-23-update) which has worked for me.

In short: completely uninstall adt and then use the archive to install it again (as suggested above).

Without the uninstall i ran into conflicting jars.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-11T00:58:11.087

Download Updated bundles here:

win32: [Here](http://dl.google.com/android/adt/adt-bundle-windows-x86-20140702.zip "Here")

Unfortunately, you will NOT be able to update an existing installation. Just use a new copy of Eclipse and install the plugins using the update site, or use the bundle.

OR You can fix this issue by removing all old Android plugins. Once you have removed all of the old Android plugins you can then install the new ones.

1.  Open Eclipse
2.  Select Help
3.  Select About Eclipse SDK
4.  Select Installation details
5.  High light all Android plugins
6.  Select Uninstall
7.  Restart Eclipse
8.  Then install the plugins again as normal
9.  Restart Eclipse

At this point everything should be working again.

Solution via: [https://code.google.com/p/android/issues/detail?id=73102](https://code.google.com/p/android/issues/detail?id=73102)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-22T11:07:16.157

您始终可以尝试在 Eclipse 之外更新 SDK 工具和平台工具。

在 CMD 或 Terminale 类型中：

```
 $ android 
```

SDK 管理器将启动。

# ruby-on-rails - 遇到错误语法错误，意外$end，期望keyword_end

> ID：15022623
> 
> 赞同：0
> 
> 时间：2013-02-22T11:00:19.123
> 
> 标签：ruby-on-rails

我一直在这个错误上停留了一段时间，我环顾四周，显然这是由于太多`end`的 's，但我似乎不明白为什么，任何帮助家伙？谢谢。

这是我的代码

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      redirect_to root_url, :notice => "Signed up!"
    else
      render "new"
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:04:59.470

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])

    if @user.save
      redirect_to root_url, :notice => "Signed up!"
    else
      render "new"
    end # your missed end here
  end
end # another end missed for the class 
```

# c# - Url.Link 在 WebAPI 中不起作用

> ID：15022627
> 
> 赞同：4
> 
> 时间：2013-02-22T11:00:39.247
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, url-helper

使用下面的单元测试..我正在尝试测试我的 webapi。

```
[Test]
public void CheckControllerForCreate()
{
    var config = new HttpConfiguration();
    config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
    var request = new HttpRequestMessage(HttpMethod.Post, "http://localhost/api/product");
    var route = config.Routes.MapHttpRoute("Foo", "api/{controller}/{id}");
    var routeData = new HttpRouteData(route, new HttpRouteValueDictionary { { "controller", "products" } });
    var controller = new ProductController
    {
        ControllerContext = new HttpControllerContext(config, routeData, request),
        Request = request,
        Url = new UrlHelper(request)
    };

    controller.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;

    var result = controller.Create(new Product {Id = 4, Name = "Tomato Soup", Category = "Groceries", Price = 1});
}

[HttpPost]
public HttpResponseMessage Create(Product product)
{
    var url = Url;
    if (product == null)
        throw new HttpResponseException(new HttpResponseMessage{StatusCode = HttpStatusCode.BadRequest,ReasonPhrase = "Product is not specified"});
    products.Add(product);
    var response = Request.CreateResponse(HttpStatusCode.Created, product);
    string uri = Url.Link("Foo", product.Id);
    response.Headers.Location = new Uri(uri);
    return response;
} 
```

Create Action 引发异常，因为`uri`is `null`。现在，Url 助手正在正确获取 RouteName ，否则将出现 RouteName not found 异常。我假设我的配置有问题。

我参考了[http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api](http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api)和其他几篇文章来对控制器进行单元测试。

WebAPI 方法在 codeplex 上

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1acb241299a8#src/System.Web.Http/Routing/UrlHelper.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1acb241299a8#src/System.Web.Http/Routing/UrlHelper.cs)

编辑

我已将其范围缩小到 vpd 在（UrlHelper）中为空

```
IHttpVirtualPathData vpd = configuration.Routes.GetVirtualPath(
                request: request,
                name: routeName,
                values: routeValues); 
```

似乎无法弄清楚为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T11:51:55.537

您需要将 routeData 设置到请求中，与配置相同：

```
controller.Request.Properties[HttpPropertyKeys.HttpRouteDataKey] = routeData; 
```

此外，您错误地使用了`Url.Link`帮助程序。您尚未指定控制器，也未指定 ID。

控制器中的代码应如下所示：

```
string uri = Url.Link("Foo", new { id = product.Id, controller = "product" }); 
```

* * *

更新：

这是一个完整的例子。

控制器：

```
public class ProductController : ApiController
{
    public HttpResponseMessage Create(int id)
    {
        var uri = Url.Link("Foo", new { id = id, controller = "product" });
        return Request.CreateResponse(HttpStatusCode.OK, uri);
    }
} 
```

测试：

```
// arrange
var config = new HttpConfiguration();
config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
var request = new HttpRequestMessage(HttpMethod.Post, "http://localhost/api/product");
var route = config.Routes.MapHttpRoute("Foo", "api/{controller}/{id}");
var routeData = new HttpRouteData(route, new HttpRouteValueDictionary(new { controller = "product" }));
var controller = new ProductController
{
    ControllerContext = new HttpControllerContext(config, routeData, request),
    Request = request,
    Url = new UrlHelper(request)
};
controller.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;
controller.Request.Properties[HttpPropertyKeys.HttpRouteDataKey] = routeData;

// act
var result = controller.Create(4);

// assert
... 
```

# ftp - 使用无法识别 PORT 命令的服务器的 LFTP 活动模式

> ID：15022629
> 
> 赞同：13
> 
> 时间：2013-02-22T11:00:39.983
> 
> 标签：ftp, ftp-client, lftp

我正在使用 LFTP 从服务器传输文件，遗憾的是它无法识别 PORT 命令。我无法控制服务器（不知道详细的服务器是什么），我必须使用主动模式。

这是命令行：

```
lftp -e 'debug 10;set ftp:passive-mode off; set ftp:auto-passive-mode no; ls; bye;' -u user,password ftp://ftp.site.com 
```

这是调试输出：

```
<--- 200 Using default language en_US
---> OPTS UTF8 ON
<--- 200 UTF8 set to on           
---> OPTS MLST modify;perm;size;type;UNIX.group;UNIX.mode;UNIX.owner;
<--- 200 OPTS MLST modify;perm;size;type;UNIX.group;UNIX.mode;UNIX.owner;
---> USER xxxxx
<--- 331 Password required for xxxxx
---> PASS xxxxxx
<--- 230 User xxxxx logged in     
---> PBSZ 0
<--- 200 PBSZ 0 successful               
---> PROT P
<--- 200 Protection set to Private       
---> PORT 172,16,133,11,146,168
<--- 500 Illegal PORT command                    
---> LIST
---> ABOR
---- Closing aborted data socket
---- Chiusura del socket di controllo 
```

LFTP 似乎放弃连接到数据套接字，因为远程服务器不支持 PORT 命令。有没有办法说服 LFTP 仍然可以连接到端口 20？通过FTP手动显然没有问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-06T00:24:51.900

我认为，问题不在于 FTP 服务器不支持该`PORT`命令（它支持），而是它不喜欢您的 FTP 客户端在`PORT`命令中发送的 IP 地址/端口。

```
PORT 172,16,133,11,146,168 
```

...告诉服务器连接到地址 172.16.133.11，端口 37544*。这里有趣的部分是 IP 地址：它是一个 RFC 1918 地址（*即*，它是一个[私有网络地址](https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces)）。反过来，这表明您的 FTP 客户端位于某个 LAN 中，并且正在使用*公共*IP 地址连接到 FTP 服务器。

该远程 FTP 服务器*无法*连接到专用网络地址；根据定义，RFC 1918 地址不可公开路由。

因此，很可能是 FTP 服务器尝试与您的`PORT`命令中给出的地址/端口建立连接，但失败了，这就是 FTP 服务器失败命令的原因，说：

```
500 Illegal PORT command 
```

要使`PORT`命令与该 FTP 服务器一起工作，您需要发现该服务器可以连接到的*公共IP 地址，以访问您的客户端计算机。*假设这个地址是`1.2.3.4`。然后，您需要使用选项告诉`lftp`在其`PORT`命令中使用该地址`ftp:port-ipv4`。

但是，公共 IP 地址有可能是 NAT/路由器/防火墙的地址，*并且*该 NAT/路由器/防火墙不允许从外部世界到高编号端口（*例如*37544）的连接被路由到局域网内的一台机器。这是*主动*FTP 数据传输的问题之一，*即*使用`PORT`（或`EPRT`）命令的 FTP 数据传输：它们不被认为是“防火墙友好的”。

希望这可以帮助！

* * *

* - 为什么`146,168`转换为端口 37544？

根据 FTP 的[RFC959](https://www.rfc-editor.org/rfc/rfc959) ，这些参数是：

> (...) 16 位 TCP 端口地址。该地址信息被分成 8 位字段，每个字段的值以十进制数（以字符串表示）形式传输。

```
146 dec = 10010010 bin = A
168 dec = 10101000 bin = B

    A        B
10010010 10101000 bin = 37544 dec 
```

# c++ - 如何从旋转矩阵计算角度

> ID：15022630
> 
> 赞同：35
> 
> 时间：2013-02-22T11:00:40.540
> 
> 标签：c++, opencv, computer-vision, euler-angles

我正在使用单个对象的两个图像，该对象从其第一个图像旋转了一定程度。

我已经计算了每个图像的 POSE，并使用 Rodergues() 将旋转矢量转换为矩阵。现在我如何计算并查看它从第一个位置旋转了多少？

我尝试了很多方法，但答案不是很接近

编辑：我的相机是固定的，只有物体在移动。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-22T17:01:31.470

我们可以使用以下公式从旋转矩阵中得到欧拉角。

给定一个 3×3 的旋转矩阵

![在此处输入图像描述](../Images/5dff1e75f5f440070f6adc14ededdf11.png)

3 个欧拉角是

![在此处输入图像描述](../Images/688499581c92a7f6080c630ec4f53d78.png)

![在此处输入图像描述](../Images/1a0c8f2ccc78f2706273020a37f01f91.png)

![在此处输入图像描述](../Images/c7da66a58d96d40f6224269b3d8622f9.png)

这里 atan2 是相同的反正切函数，带有象限检查，您通常在 C 或 Matlab 中找到。

注意：如果绕 y 轴的角度正好是 +/-90°，则必须小心。在这种情况下，第一列和最后一行中的所有元素，除了下角的元素，即 1 或 -1，都将为 0 (cos(1)=0)。一种解决方案是将绕 x 轴的旋转固定为 180°，并从以下位置计算绕 z 轴的角度：atan2(r_12, -r_22)。

另请参阅[https://www.geometrictools.com/Documentation/EulerAngles.pdf](https://www.geometrictools.com/Documentation/EulerAngles.pdf)，其中包括六个不同阶欧拉角的实现。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-22T15:50:05.370

如果**R**是 (3x3) 旋转矩阵，则旋转角度将为 acos((tr( **R** )-1)/2)，其中 tr( **R** ) 是矩阵的轨迹（即对角线元素之和） ）。

这就是你所要求的；我估计有 90% 的可能性不是你想要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-10-13T13:28:36.080

想在这里做出贡献，因为我正在解决同样的问题。我通过发布用于将 3-D 旋转矩阵 (3x3) 转换为相应的滚动 (Rx) 、俯仰 (Ry) 、偏航 (Rz) 角度的纯 python 实现来增加上述答案的价值。

**参考伪代码：** [https](https://www.gregslabaugh.net/publications/euler.pdf) ://www.gregslabaugh.net/publications/euler.pdf （链接在某种程度上不再有效/在 2021 年被破坏......但我仍然将其包含在此处以保持完整性）

**参考问题设置：**假设我们有一个 3x3 旋转矩阵，我们想要提取欧拉角的度数。我将使 Python 实现尽可能“明显”，以便于理解脚本中发生的事情。相应的编码人员可以对其进行优化以供自己使用。

**假设**：我们首先围绕 x 轴旋转，然后是 y 轴，最后是 z 轴。当您调整此代码片段时，必须遵守此排序定义。

```
"""
Illustration of the rotation matrix / sometimes called 'orientation' matrix
R = [ 
       R11 , R12 , R13, 
       R21 , R22 , R23,
       R31 , R32 , R33  
    ]

REMARKS: 
1\. this implementation is meant to make the mathematics easy to be deciphered
from the script, not so much on 'optimized' code. 
You can then optimize it to your own style. 

2\. I have utilized naval rigid body terminology here whereby; 
2.1 roll -> rotation about x-axis 
2.2 pitch -> rotation about the y-axis 
2.3 yaw -> rotation about the z-axis (this is pointing 'upwards') 
"""
from math import (
    asin, pi, atan2, cos 
)

if R31 != 1 and R31 != -1: 
     pitch_1 = -1*asin(R31)
     pitch_2 = pi - pitch_1 
     roll_1 = atan2( R32 / cos(pitch_1) , R33 /cos(pitch_1) ) 
     roll_2 = atan2( R32 / cos(pitch_2) , R33 /cos(pitch_2) ) 
     yaw_1 = atan2( R21 / cos(pitch_1) , R11 / cos(pitch_1) )
     yaw_2 = atan2( R21 / cos(pitch_2) , R11 / cos(pitch_2) ) 

     # IMPORTANT NOTE here, there is more than one solution but we choose the first for this case for simplicity !
     # You can insert your own domain logic here on how to handle both solutions appropriately (see the reference publication link for more info). 
     pitch = pitch_1 
     roll = roll_1
     yaw = yaw_1 
else: 
     yaw = 0 # anything (we default this to zero)
     if R31 == -1: 
        pitch = pi/2 
        roll = yaw + atan2(R12,R13) 
     else: 
        pitch = -pi/2 
        roll = -1*yaw + atan2(-1*R12,-1*R13) 

# convert from radians to degrees
roll = roll*180/pi 
pitch = pitch*180/pi
yaw = yaw*180/pi 

rxyz_deg = [roll , pitch , yaw] 
```

希望这可以帮助其他编码人员！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-28T03:33:43.653

供您参考，此代码在 MATLAB 中计算欧拉角：

```
function Eul = RotMat2Euler(R)

if R(1,3) == 1 | R(1,3) == -1
  %special case
  E3 = 0; %set arbitrarily
  dlta = atan2(R(1,2),R(1,3));
  if R(1,3) == -1
    E2 = pi/2;
    E1 = E3 + dlta;
  else
    E2 = -pi/2;
    E1 = -E3 + dlta;
  end
else
  E2 = - asin(R(1,3));
  E1 = atan2(R(2,3)/cos(E2), R(3,3)/cos(E2));
  E3 = atan2(R(1,2)/cos(E2), R(1,1)/cos(E2));
end

Eul = [E1 E2 E3]; 
```

代码由 Graham Taylor、Geoff Hinton 和 Sam Roweis 提供。有关更多信息，请参见[此处](http://www.cs.toronto.edu/~gwtaylor/publications/nips2006mhmublv)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T18:44:59.710

让 R1c 和 R2c 成为您计算的 2 个旋转矩阵。它们分别表示从姿势 1 和 2 中的对象到相机帧的旋转（因此是第二个 c 后缀）。你想要的旋转矩阵是从pose 1到pose 2，即R12。要计算它，您必须在脑海中将物体从pose_1 旋转到camera，然后从camera-to-pose_2 旋转。后一个旋转是 R2c 表达的pose_2-to-camera的倒数，因此：

`R12 = R1c * inv(R2c)`

然后，您可以从矩阵 R12 使用 Rodiguez 的公式计算角度和旋转轴。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-24T17:35:27.240

对于 2D 的情况，python 代码。

```
 import numpy as np
    import matplotlib.pyplot as plt

    def get_random_a(r = 3, centre_x = 5, centre_y = 5):
        angle = np.random.uniform(low=0.0, high=2 * np.pi)
        x = np.cos(angle) * r 
        y = np.sin(angle) * r 

        x += centre_x
        y += centre_y 

        return x, y 

    def norm(x):
        return np.sqrt(x[0] ** 2 + x[1] ** 2) 

    def normalize_vector(x):
        return x / norm(x)

    def rotate_A_onto_B(vector_a, vector_b ):

        A = normalize_vector(vector_a)
        B = normalize_vector(vector_b)

        cos_theta = np.dot(A, B)
        sin_theta = np.cross(A, B)

        theta = np.arctan2(sin_theta, cos_theta)

        M = np.array ( [[np.cos(theta ), -np.sin(theta)],
                        [np.sin(theta), np.cos(theta) ]
                       ])

        M_dash = np.array( [ [cos_theta, -sin_theta], 
                        [sin_theta, cos_theta]
                      ])

        print( f" np all close of M and M_dash : {np.allclose(M, M_dash)}" )

        vector_a = vector_a[:, np.newaxis]
        rotated_vector_a = np.dot(M, vector_a)
        return rotated_vector_a.squeeze()

    #--------------
    #----------------
    centre_x, centre_y = 5, 5
    r = 3 
    b = (centre_x, centre_y - r) 

    vector_b = np.array ( ( b[0] - centre_x, b[1] - centre_y ) )
    x, y = get_random_a(r, centre_x, centre_y)
    vector_a = np.array ( ( x - centre_x, y - centre_y ) )

    rotated_vector_a = rotate_A_onto_B(vector_a, vector_b)
    print("is the answer corrent ? ", np.allclose(rotated_vector_a, vector_b))

    print(rotated_vector_a)

    # plot 
    plt.plot( [centre_x, x], [ centre_y, y ]  )
    plt.plot( [centre_x, b[0]], [centre_y, b[1]] )

    plt.scatter( [centre_x, x, b[0] ], [ centre_y, y, b[1] ], c = "r")

    plt.text(centre_x, centre_y, f"centre : {centre_x, centre_y}")
    plt.text(x, y, f"a : {x, y}")
    plt.text(b[0], b[1], f"b : {b[0], b[1]}")

    plt.xlim(left = centre_x - r - 1, right = centre_x + r + 1 )
    plt.ylim(bottom= centre_y -r - 1 , top = centre_y + r +1 )

    plt.show() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-20T00:55:46.360

我想你想知道如何从旋转矩阵计算精确的角度。首先，您应该根据旋转乘积的结果决定订购（XYZ、ZYZ、ZXZ 等），您可以通过反正弦函数获取角度。（使用您已经采用的旋转矩阵！）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-13T03:32:53.603

Suppose it mainly rotates around a certain coordinate axis(A person stands in front of the camera and rotates around to get the rotation matrix), try the following code:

```
float calc_angle(Eigen::Matrix3f &R_, int axis_)
{
    //! the coordinate system is consistent with "vedo"
    //! suppose it mainly rotates around a certain coordinate axis(X/Y/Z)

    Eigen::Vector3f aX_(1.0f, 0.0f, 0.0f);
    Eigen::Vector3f aY_(0.0f, 1.0f, 0.0f);
    Eigen::Vector3f aZ_(0.0f, 0.0f, 1.0f);

    Eigen::Vector3f v0_, v1_;
    int axis_contrary_[2];
    switch (axis_)
    {
    case 0 /* x */:
        axis_contrary_[0] = 1;
        axis_contrary_[1] = 2;
        v0_ = aY_;
        v1_ = aZ_;
        break;
    case 1 /* y */:
        axis_contrary_[0] = 0;
        axis_contrary_[1] = 2;
        v0_ = aX_;
        v1_ = aZ_;
        break;
    case 2 /* z */:
        axis_contrary_[0] = 0;
        axis_contrary_[1] = 1;
        v0_ = aX_;
        v1_ = aY_;
        break;
    }

    Eigen::Vector3f v0_new_ = R_ * v0_; //R_.col(axis_contrary_[0]);
    v0_new_(axis_) = 0.0f;
    v0_new_.normalize();

    Eigen::Vector3f v1_new_ = R_ * v1_; //R_.col(axis_contrary_[1]);
    v1_new_(axis_) = 0.0f;
    v1_new_.normalize();

    Eigen::Vector3f v2_new_0_ = v0_.cross(v0_new_);
    Eigen::Vector3f v2_new_1_ = v1_.cross(v1_new_);
    bool is_reverse = ((v2_new_0_[axis_] + v2_new_1_[axis_]) / 2.0f < 0.0f);

    float cos_theta_0_ = v0_new_(axis_contrary_[0]);
    float cos_theta_1_ = v1_new_(axis_contrary_[1]);
    float theta_0_ = std::acos(cos_theta_0_) / 3.14f * 180.0f;
    float theta_1_ = std::acos(cos_theta_1_) / 3.14f * 180.0f;
    // std::cout << "theta_0_: " << theta_0_ << std::endl;
    // std::cout << "theta_1_: " << theta_1_ << std::endl;
    float theta_ = (theta_0_ + theta_1_) / 2.0f;

    float deg_;
    if (!is_reverse)
    {
        deg_ = theta_;
    }
    else
    {
        deg_ = 360.0f - theta_;
    }

    return deg_;
} 
```

and you can visualize with the following code:

```
import numpy as np
from glob import glob
from vedo import *

path_folder = ".../data/20210203_175550/res_R"
path_R_ALL = sorted(glob(path_folder + "/*_R.txt"))
path_t_ALL = sorted(glob(path_folder + "/*_t.txt"))

o = np.array([0, 0, 0])
x = np.mat([1, 0, 0]).T
y = np.mat([0, 1, 0]).T
z = np.mat([0, 0, 1]).T

vp = Plotter(axes=4)
vp += Box((0, 0, 0), 3, 3, 3, alpha=0.1)
for i, (path_R, path_t) in enumerate(zip(path_R_ALL, path_t_ALL)):
    R = np.loadtxt(path_R)
    R = np.mat(R.reshape(3, 3)).T
    # t = np.loadtxt(path_t)
    # t = np.mat(t).T

    Ax = Line(o, R*x, c="r")
    Ay = Line(o, R*y, c="g")
    Az = Line(o, R*z, c="b")
    vp += Ax
    vp += Ay
    vp += Az
    vp.show(interactive=1)
    vp -= Ax
    vp -= Ay
    vp -= Az

    x_new = R*x
    x_new[1] = 0
    x_new = x_new / np.linalg.norm(x_new)
    # print("x_new:", x_new)

    z_new = R*z
    z_new[1] = 0
    z_new = z_new / np.linalg.norm(z_new)
    # print("z_new:", z_new)

    cos_thetaX = x.T * x_new
    thetaX = np.arccos(cos_thetaX) / 3.14 * 180

    cos_thetaZ = z.T * z_new
    thetaZ = np.arccos(cos_thetaZ) / 3.14 * 180

    # print(x, x_new)
    tmpX = np.cross(x.T, x_new.T)
    # print("tmpX:", tmpX)
    if tmpX[0][1] < 0:
        thetaX = 360 - thetaX

    tmpZ = np.cross(z.T, z_new.T)
    # print("tmpZ:", tmpZ)
    if tmpZ[0][1] < 0:
        thetaZ = 360 - thetaZ
    # print(i, tmpX, tmpZ)
    print(i, thetaX, thetaZ) 
```

# android - Google Analytics 的应用内价格格式

> ID：15022631
> 
> 赞同：8
> 
> 时间：2013-02-22T11:00:42.527
> 
> 标签：android, google-analytics, in-app-purchase, billing

我的应用包含可以购买的应用内产品。我使用[计费 API](http://developer.android.com/google/play/billing/billing_reference.html)来检索可以购买的产品列表及其价格。检索到的价格是一个包含货币和价格的格式化**字符串**，例如“$2.50”。

现在我也使用[Google Analytics API](https://developers.google.com/analytics/devguides/collection/android/v2/ecommerce)来跟踪购买情况。为了发送价格，这个 API 需要一个以微为单位的**长**参数。所以我应该发送（2.50 * 1000000）。

**是否有 API 可以将第一个价格（从 Billing API 检索）转换为第二个价格（发送到 Analytics API）？**

当然我可以自己做一个简单的字符串解析转换，但我怕我这样做会出现意外情况。例如，在某些语言环境中，价格会包含“，”而不是“.”。

**编辑**

一个自然的解决方案是使用 NumberFormat 将“$2.50”转换为 2.50。

```
Double price = NumberFormat.getCurrencyInstance().parse(priceStr).doubleValue(); 
```

但是，从 Google Play 检索到的价格字符串格式显然是手机所在国家/地区的语言环境，但 NumberFormat 会使用手机的语言环境，这不一定相同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T15:12:40.563

虽然没有正式记录，但 Billing API 已经在`getSkuDetails()`响应中提供了必要的数据。

除了该`price`字段，您还可以检索以下内容：

`price_currency_code` ISO 货币代码

`price_amount_micros` 产品价格以微计（注：净价）

# cygwin - 在 Cygwin 上使用 physiotoolkit xview 进行 XAllocID 断言

> ID：15022632
> 
> 赞同：1
> 
> 时间：2013-02-22T11:00:47.613
> 
> 标签：cygwin

我已经黔驴技穷了。我离运行 physionet.org 的 WAVE 很近，但还很远。我遇到了可怕的错误：断言“ret！= inval_id”失败：文件“/usr/src/ports/libX11/libX11-1.5.0-1/src/libX11-1.5.0/src/xcb_io.c”，第 528 行，函数：_XAllocID

[成功安装 CYGWIN 后，我按照http://www.physionet.org/physiotools/wfdb-windows-quick-start.shtml](http://www.physionet.org/physiotools/wfdb-windows-quick-start.shtml)中指定的程序安装了 XVIEW，然后安装了 WFDB

xview 二进制文件是 xview-3.2p1.4-18c-cygwin.tar.bz2

[我认为这个问题与http://cygwin.com/ml/cygwin-xfree/2010-02/msg00110.html](http://cygwin.com/ml/cygwin-xfree/2010-02/msg00110.html)中的问题相同

提议的决议是

1.  从 xview-3.2p1.4-21.1.fc8.src.rpm 重新编译 xview 库并应用最新补丁或

2.  获取更新的 cygwin 二进制文件。

是否有更新的 tar.bz2 格式的 cygwin 二进制文件？如果有，我应该可以使用它。这对我来说是最简单的解决方案。谁能告诉我从哪里下载。

遗憾的是，第一个解决方案将超出我的能力范围。我已经看过如何处理rpm，然后编译然后安装，但一直在兜圈子。如果有必要，那么当然必须这样做。

我不是专业程序员，我所做的只是帮助一名医学研究学生在她的研究工作中使用 Wave。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T12:57:49.803

我是 WAVE 的作者，但我不经常使用 Windows。另一位 WAVE 用户 Ben McClelland 几天前写信给我报告说 Cygwin 1.7 现在包括工作 xview 包。我在 Windows 7（以及 Windows XP）上验证了这一点，并相应地更新了 PhysioNet 上的 Cygwin、XView 和 WFDB 安装指南。

如果您已经安装了无法使用的 xview，请将其卸载。

启动 Cygwin 的安装工具并在包列表中选择 xview-devel（这足以触发安装它所依赖的所有其他包），然后完成安装或更新 Cygwin。

如果您已经安装了 WAVE，它可能就可以工作；如果没有，请重新安装它。有关详细信息，请参见[http://physionet.org/physiotools/wfdb-windows-quick-start.shtml](http://physionet.org/physiotools/wfdb-windows-quick-start.shtml)。

我目前正在编写 WAVE 的替代品：一个名为 LightWAVE ( [http://physionet.org/lightwave/](http://physionet.org/lightwave/) ) 的浏览器应用程序。它已经可以用作 PhysioBank 数据的查看器，无需安装任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:53:17.850

另一种可能的解决方案可能是下载[xview-3.2p1.4-18 源代码](http://www.physionet.org/physiotools/xview/src/)，其中包含为 cygwin 构建所需的更改，并且可以作为常规 tar 存档，然后应用补丁修复 xview 中 XAllocID 的使用（对于例如，如[https://bugs.launchpad.net/ubuntu/+source/xview/+bug/89166](https://bugs.launchpad.net/ubuntu/+source/xview/+bug/89166)中所述）

# javascript - 我想在 javascript 正则表达式中模仿条件

> ID：15022635
> 
> 赞同：5
> 
> 时间：2013-02-22T11:01:05.833
> 
> 标签：javascript, regex

这是我目前所拥有的......

```
var regex_string = "s(at)?u(?(1)r|n)day"
console.log("Before: "+regex_string)
var regex_string = regex_string.replace(/\(\?\((\d)\)(.+?\|)(.+?)\)/g,'((?!\\$1)$2\\$1$3)')
console.log("After: "+regex_string)
var rex = new RegExp(regex_string)

var arr = "thursday tuesday thuesday tursday saturday sunday surday satunday monday".split(" ")
for(i in arr){
  var m
  if(m = arr[i].match(rex)){
    console.log(m[0])
  }
} 
```

我正在交换`(?(n)a|b)`where`((?!\n)a|\nb)`是`n`一个数字，`a`and`b`是字符串。这似乎工作正常 - 但是，我知道这是一个很大的黑客。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T14:14:43.907

在您的正则表达式的特定情况下，使用交替更简单且更具可读性：

```
(?:sunday|saturday) 
```

或者，您可以仅在涉及条件正则表达式的 2 个位置之间创建交替（这在有许多此类条件表达式的情况下更有用，但仅指附近的捕获组）。以您的案例为例，我们将只为`un`和`atur`因为只有那些与条件有关：

```
s(?:un|atur)day 
```

* * *

有两种常见的条件正则表达式。（Perl 正则表达式支持更多奇特的东西，但这些需要支持 JavaScript 正则表达式或其他常见正则表达式引擎不具备的特性）。

1.  第一种类型是提供显式模式作为条件。这种类型可以在 JavaScript 正则表达式中模仿。在支持条件正则表达式的语言中，模式将是：

    ```
    (?(conditional-pattern)yes-pattern|no-pattern) 
    ```

    在 JavaScript 中，您可以通过前瞻来模仿它，并且（明显）假设原始文件`conditional-pattern`是前瞻：

    ```
    ((?=conditional-pattern)yes-pattern|(?!conditional-pattern)no-pattern) 
    ```

    负前瞻是必要的，以防止输入字符串在 中通过`conditional-pattern`和失败的情况`yes-pattern`，但它可以匹配`no-pattern`. 这样做是安全的，因为正向环视和负向环视在逻辑上是完全相反的。

2.  第二种类型是提供对捕获组的引用（名称或编号），当捕获组匹配时，条件将被评估为真。在这种情况下，没有简单的解决方案。

    我能想到的唯一方法是重复，就像我以您的案例为例所做的那样。这当然会降低可维护性。可以通过将它们分成部分（在文字 RegExp 中）来组成您的正则表达式，检索带有`source`属性的字符串，然后将它们连接在一起；这将允许更改传播到其他重复的部分，但会使理解正则表达式和/或对其进行重大修改变得更加困难。

**参考**

*   [正则表达式中的交替构造 - .NET - Microsoft](http://msdn.microsoft.com/en-us/library/36xybswe.aspx)
*   [在 Python 中重新打包](http://docs.python.org/2/library/re.html)：`Ctrl`+ `F`for`(?(`
*   [perlre - Perl 正则表达式](http://perldoc.perl.org/perlre.html): `Ctrl`+ `F`for`(?(`

# c# - WPF ObservableList 调度程序线程

> ID：15022636
> 
> 赞同：3
> 
> 时间：2013-02-22T11:01:16.223
> 
> 标签：c#, .net, wpf, multithreading, dispatcher

我正在将项目从 Windows 窗体转换为 WPF 格式。目前，我已将所有数据绑定到元素。我现在提出一个问题`ObservableCollection`，说：

> 这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。

如何使我的代码线程安全？或者我如何引导对 Dispatcher 线程的更改？我看过一些关于它的帖子，但我对如何在我自己的项目中应用它感到困惑。也许有人可以为我阐明这一点？

这是我的代码`ObservableList.cs`：

```
public class ObservableList<T> : ObservableCollection<T>
{
    #region Private members

    bool isInAddRange = false;

    #endregion Private members

    #region Public methods

    /// <summary>
    /// Creates a new empty ObservableList of the provided type. 
    /// </summary>
    public ObservableList()
    {

    }

    /// <summary>
    /// Handles the event when a collection has changed.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        // intercept this when it gets called inside the AddRange method.
        if (!isInAddRange)
            base.OnCollectionChanged(e);
    }

    /// <summary>
    /// Adds a collection of items to the ObservableList.
    /// </summary>
    /// <param name="items"></param>
    public void AddRange(IEnumerable<T> items)
    {
        isInAddRange = true;
        foreach (T item in items)
        {
            Add(item);
        }

        isInAddRange = false;

        var e = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add,items.ToList());
        base.OnCollectionChanged(e);

    }

    #endregion Public methods
} 
```

}

编辑：在 ywm 给出答案后，我将`AddRange`班级更改为：

```
public void AddRange(IEnumerable<T> items)
{
    isInAddRange = true;
    foreach (T item in items)
    {
        if (item != null)
        {
            Dispatcher.CurrentDispatcher.Invoke((Action)(() =>
                {
                    Add(item);
                }));
        }
    }

    isInAddRange = false;

    var e = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add,items.ToList());
    base.OnCollectionChanged(e);

} 
```

现在，我所有的 ObservableList 都是`null`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:55:11.160

当您向 an 添加项目时，`ObservableCollection`您需要调用 UI 调度程序线程来执行此操作。

这样做是这样的：

```
 Dispatcher.CurrentDispatcher.Invoke(() =>
  {
        foreach (var myModel in itemsToAdd)
        {
                    Images.Add(mymodel);                   
        } 
  }); 
```

然后在课堂上使用它，

```
 public ObservableList<String> Strings { get; set; }

    public MyViewModel()
    {
        this.Strings = new ObservableList<string>();

        this.Strings.AddRange(new[] { "1", "2", "3", "4" });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:43:30.183

当您现在在 UI 线程中调用 Add 方法时，您仍在调用线程中的 AddRange 方法中引发事件。因此，您最终会遇到与进行更改之前相同的问题。

尝试这个：

```
public void AddRange(IEnumerable<T> items)
{
    isInAddRange = true;
    foreach (T item in items)
    {
        if (item != null)
        {
            Dispatcher.CurrentDispatcher.Invoke((Action)(() =>
                {
                    Add(item);
                }));
        }
    }

    isInAddRange = false;

    var e = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add,items.ToList());
    Dispatcher.CurrentDispatcher.Invoke((Action)(() =>
    {
        base.OnCollectionChanged(e);
    });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:07:32.633

我在[这里](http://michlg.wordpress.com/2009/08/14/dispatchingobservablecollection-thread-save-observablecollection/)找到了一个干净的解决方案。

这里可能出现的问题不是应该在更改时调用 UI 线程，而是创建 Collection 的线程！这不一定是 UI 线程！

因此，我将代码更改为以下内容：

```
public class ObservableList<T> : ObservableCollection<T>
{
    #region Private members

    bool isInAddRange = false;
    private readonly Dispatcher _currentDispatcher;

    #endregion Private members

    #region Public methods

    /// <summary>
    /// Creates a new empty ObservableList of the provided type. 
    /// </summary>
    public ObservableList()
    {
        //Assign the current Dispatcher (owner of the collection) 
        _currentDispatcher = Dispatcher.CurrentDispatcher;
    }

    /// <summary>
    /// Executes this action in the right thread
    /// </summary>
    ///<param name="action">The action which should be executed</param>
    private void DoDispatchedAction(Action action)
    {
        if (_currentDispatcher.CheckAccess())
            action.Invoke();
        else
            _currentDispatcher.Invoke(DispatcherPriority.DataBind, action);
    }

    /// <summary>
    /// Handles the event when a collection has changed.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        // intercept this when it gets called inside the AddRange method.
        if (!isInAddRange)
        {
            DoDispatchedAction(() => base.OnCollectionChanged(e));
        }
    }

    /// <summary>
    /// Adds a collection of items to the ObservableList.
    /// </summary>
    /// <param name="items"></param>
    public void AddRange(IEnumerable<T> items)
    {
        isInAddRange = true;
        foreach (T item in items)
        {
            if (item != null)
                {
                    Add(item);
            }
        }       

        isInAddRange = false;

        var e = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add,items.ToList());
        DoDispatchedAction(() => base.OnCollectionChanged(e));

    }

    #endregion Public methods
} 
```

我承认我还没有测试过这个`AddRange()`方法本身。链接网站上给出的示例是：

```
/// <summary>
/// Inserts a item at the specified index
/// </summary>
///<param name="index">The index where the item should be inserted</param>
///<param name="item">The item which should be inserted</param>
protected override void InsertItem(int index, T item)
{
    DoDispatchedAction(() => base.InsertItem(index, item));
} 
```

感谢大家尝试帮助我！

# c# - 为什么 IntPtr 不需要 unsafe 关键字？

> ID：15022637
> 
> 赞同：8
> 
> 时间：2013-02-22T11:01:15.893
> 
> 标签：c#, pointers, garbage-collection, unmanaged, intptr

当你`int*`在 C# 中使用指针时，你需要使用`unsafe`关键字，但是当你使用 时`IntPtr`，你不需要。这些有什么区别？它们都可以指向一个地址。

垃圾收集器如何处理这两种类型？他们的处理方式不同吗？如果是这样，有什么区别？如果不是，为什么需要`unsafe`关键字？

**编辑：**非常感谢到目前为止大家的回答，但我想知道的是框架和垃圾收集器如何以不同方式处理它们，而不是 MSDN 定义的`IntPtr`. 只需一次谷歌搜索即可到达那里。我想知道为什么 IntPtr 不需要`unsafe`关键字？我想了解我们可以在没有关键字的情况下使用它的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:06:36.330

根据 MSDN：

[http://msdn.microsoft.com/en-gb/library/system.intptr(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/system.intptr(v=vs.100).aspx)

它只是“指针或句柄”的*表示。*

我一直在阅读`IntPtr`GC 处理 GC 与其他托管类型的不同方式，但我没有找到任何文档或文章说明`IntPtr`收集的方式有什么不同，即一旦`IntPtr`超出范围，它就可以是 GC 'd。

关于为什么不使用`unsafe`关键字阅读已接受的答案，尤其是更新：

[不安全代码对安全代码有影响吗？](https://stackoverflow.com/questions/5677346/does-unsafe-code-have-any-effect-on-safe-code)

`unsafe`已经在的实现中指定`IntPtr`（参见`IntPtr`下面实现中的字段声明），因此使用 的类`IntPtr`不必将它的任何使用标记`IntPtr`为`unsafe`也使用，否则它将一直级联到其他类可能会在其实现中使用具有不安全代码的类型。

**除了`unsafe`code is not之外`IntPtr`，它是字段`private unsafe void* m_value;`并且`unsafe`您没有直接使用它。**

```
// Type: System.IntPtr
// Assembly: mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
// Assembly location: C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll

using System.Globalization;
using System.Runtime;
using System.Runtime.ConstrainedExecution;
using System.Runtime.InteropServices;
using System.Runtime.Serialization;
using System.Security;

namespace System
{
  [ComVisible(true)]
  [__DynamicallyInvokable]
  [Serializable]
  public struct IntPtr : ISerializable
  {
    [SecurityCritical]
    private unsafe void* m_value;
    public static readonly IntPtr Zero;

    [__DynamicallyInvokable]
    public static int Size
    {
      [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success), TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries"), __DynamicallyInvokable] get
      {
        return 4;
      }
    }

    [SecuritySafeCritical]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    [__DynamicallyInvokable]
    public IntPtr(int value)
    {
      this.m_value = (void*) value;
    }

    [SecuritySafeCritical]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    [__DynamicallyInvokable]
    public IntPtr(long value)
    {
      this.m_value = (void*) checked ((int) value);
    }

    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    [SecurityCritical]
    [CLSCompliant(false)]
    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    public IntPtr(void* value)
    {
      this.m_value = value;
    }

    [SecurityCritical]
    private IntPtr(SerializationInfo info, StreamingContext context)
    {
      long int64 = info.GetInt64("value");
      if (IntPtr.Size == 4 && (int64 > (long) int.MaxValue || int64 < (long) int.MinValue))
        throw new ArgumentException(Environment.GetResourceString("Serialization_InvalidPtrValue"));
      this.m_value = (void*) int64;
    }

    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    public static explicit operator IntPtr(int value)
    {
      return new IntPtr(value);
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    public static explicit operator IntPtr(long value)
    {
      return new IntPtr(value);
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    [SecurityCritical]
    [CLSCompliant(false)]
    public static explicit operator IntPtr(void* value)
    {
      return new IntPtr(value);
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    [CLSCompliant(false)]
    public static explicit operator void*(IntPtr value)
    {
      return value.ToPointer();
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    public static explicit operator int(IntPtr value)
    {
      return (int) value.m_value;
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    public static explicit operator long(IntPtr value)
    {
      return (long) (int) value.m_value;
    }

    [SecuritySafeCritical]
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    public static bool operator ==(IntPtr value1, IntPtr value2)
    {
      return value1.m_value == value2.m_value;
    }

    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    public static bool operator !=(IntPtr value1, IntPtr value2)
    {
      return value1.m_value != value2.m_value;
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    public static IntPtr operator +(IntPtr pointer, int offset)
    {
      return new IntPtr(pointer.ToInt32() + offset);
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    public static IntPtr operator -(IntPtr pointer, int offset)
    {
      return new IntPtr(pointer.ToInt32() - offset);
    }

    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [SecuritySafeCritical]
    internal unsafe bool IsNull()
    {
      return (IntPtr) this.m_value == IntPtr.Zero;
    }

    [SecurityCritical]
    unsafe void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
      if (info == null)
        throw new ArgumentNullException("info");
      info.AddValue("value", (long) (int) this.m_value);
    }

    [SecuritySafeCritical]
    [__DynamicallyInvokable]
    public override unsafe bool Equals(object obj)
    {
      if (obj is IntPtr)
        return this.m_value == ((IntPtr) obj).m_value;
      else
        return false;
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    [__DynamicallyInvokable]
    public override unsafe int GetHashCode()
    {
      return (int) this.m_value;
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [__DynamicallyInvokable]
    public unsafe int ToInt32()
    {
      return (int) this.m_value;
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [SecuritySafeCritical]
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [__DynamicallyInvokable]
    public unsafe long ToInt64()
    {
      return (long) (int) this.m_value;
    }

    [SecuritySafeCritical]
    [__DynamicallyInvokable]
    public override unsafe string ToString()
    {
      return ((int) this.m_value).ToString((IFormatProvider) CultureInfo.InvariantCulture);
    }

    [SecuritySafeCritical]
    [__DynamicallyInvokable]
    public unsafe string ToString(string format)
    {
      return ((int) this.m_value).ToString(format, (IFormatProvider) CultureInfo.InvariantCulture);
    }

    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    public static IntPtr Add(IntPtr pointer, int offset)
    {
      return pointer + offset;
    }

    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    [ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail)]
    public static IntPtr Subtract(IntPtr pointer, int offset)
    {
      return pointer - offset;
    }

    [SecuritySafeCritical]
    [CLSCompliant(false)]
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
    [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    public unsafe void* ToPointer()
    {
      return this.m_value;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:06:29.893

IntPtr 是一种托管类型，用于获取 Windows 操作系统的本机句柄。您不应该将它与像`int*`.

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.intptr%28v=vs.100%29.aspx)以获取更多参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T07:08:12.863

一个相关的问题......为什么 dllimport 不需要不安全的上下文？

我怀疑 IntPtr 和 dllimport 不需要不安全上下文的原因是使 VB.NET（它没有不安全）能够轻松访问本机 API。

但是，关于 dllimport、IntPtr 及其交互，肯定存在一些“不安全”的地方。

将无效参数传递给 dllimport 入口点可能会导致崩溃，或者更糟糕的是，会默默地损坏内存。这意味着任何执行 dllimport 的代码在我看来都是“不安全的”。此外，如果该代码将安全代码中的 IntPtr 泄漏到 dllimport 入口点，则本质上是将其“不安全”泄漏到该安全代码中，因为安全代码可以修改 IntPtr 以使其无效。

当我使用 dllimport 时，我更喜欢将指针类型作为不安全结构指针，而不是 IntPtr。这有两大好处。首先，它让我对不同类型的本机指针进行类型检查。其次，它可以防止危险的非托管本机指针泄漏到“安全”代码中。

[http://www.codeproject.com/script/Articles/ArticleVersion.aspx?aid=339290&av=638710](http://www.codeproject.com/script/Articles/ArticleVersion.aspx?aid=339290&av=638710)

[http://software.1713.n2.nabble.com/using-unsafe-struct-instead-of-IntPtr-with-PInvoke-td5861023.html](http://software.1713.n2.nabble.com/using-unsafe-struct-instead-of-IntPtr-with-PInvoke-td5861023.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:10:36.217

An`IntPtr`本质上只是指针类型的托管表示。`IntPtr`您可以在不安全的上下文中自由地将任何指针类型转换为 an 。本质上， an`IntPtr`只是围绕 a 的一个薄包装器`void*`（IIRC 它包含一个私有`void*`字段）。

它通常在与非托管代码（通过`PInvoke`或`Marshal`类）互操作期间作为非托管指针类型的就地替换，因为像指针一样，`IntPtr`的大小随架构而变化（x86 系统上为 4 个字节，x64 上为 8 个字节）。

# button - 如何判断一个按钮是否可点击？

> ID：15022639
> 
> 赞同：0
> 
> 时间：2013-02-22T11:01:16.450
> 
> 标签：button, click, watin

我有一个表格，我尝试为其编写一些测试。但是，我有一个问题：有什么方法可以检查按钮是否可单击或是否“变灰”？我尝试寻找“Elements.IsActive”或“Clickable”之类的东西，但什么都没有。

我知道如果 WatiN 尝试单击未激活的按钮，它可能会引发异常，因此必须有一种方法在单击它之前对其进行检查...

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:46:37.043

```
if( browser.Button("id").Enabled)

    Console.Write("Enabled");

else

    Console.Write("Disabled"); 
```

你可以试试这个。

# android - 安卓滚动时间选择器？

> ID：15022644
> 
> 赞同：0
> 
> 时间：2013-02-22T11:01:27.630
> 
> 标签：android, android-layout, timepicker

我希望在我的主视图中有两个用于选择时间的滚轮，一个包含 01-24 的数字，另一个包含 00-60，跳跃为 5 (0,5,10..55)事物？类似于[http://code.google.com/p/mobiscroll/](http://code.google.com/p/mobiscroll/)，只是 android 内置。时间选择器很烦人..我需要按 +- 直到我选择我想要的。我更喜欢更直观的东西。对于这样的事情，我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:31:39.540

在这里，您将找到带有源代码的完整项目。 [测试轮.zip](http://www.filefactory.com/file/b3ge7hb/n/TestWheel.zip)

1.  `TestWheel.zip`从链接下载。
2.  将其导入您的 Eclipse
3.  将此项目转换为库项目（右键单击 testWheel 项目 ==> 属性 ==> android ==>`is library`选中复选框）。
4.  将此库项目添加到您的项目中。
5.  将以下代码复制并粘贴到您的 XML 文件中。

![在此处输入图像描述](../Images/5df2fa67c9a24e2fe0d7de0024a2e81e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:28:28.500

这是您的 hour_listView。只需为其设置一个字符串适配器。假设您可以使用 ArrayAdapter 填充 listView。

```
 hr_list.setOnScrollListener(new OnScrollListener() {

            int currentcount,topitem,firstitem,lastitem;
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                if (scrollState == SCROLL_STATE_IDLE && currentcount == 4) {
                    while (scrollState == SCROLL_STATE_TOUCH_SCROLL) {
                    }

                    LinearLayout item = (LinearLayout) view.getChildAt(0);
                    int height = item.getHeight();
                    int top = Math.abs(item.getTop()); // top is a negative value

                    if (top <= height/2){
                        view.smoothScrollToPositionFromTop(topitem, 0, 3000);
                        Log.d("Switch", "up");
                    }
                    if(top> height/2){
                        view.smoothScrollToPositionFromTop(topitem+1, 0,3000);
                        Log.d("Switch", "down");
                    }
                }
            } 
```

然后在 button.clickListener 上设置，您将获得可见 listView 的中心行号。

```
int list_hr = hr_list.getFirstVisiblePosition() - hr_list.getHeaderViewsCount(); 
```

几个关键点。* 为 listView 1dp 设置分隔线高度。*使用Linear layout infalte in a listView 行高应该是listview总高度的1/3（以dp为单位）。

列表视图和按钮的 XML

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Snap List"
    android:textSize="25sp" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="100dp"
    android:layout_height="120dp"
    android:fadingEdgeLength="33dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="73dp"
    android:background="@drawable/lisbg"
    android:scrollbars="none" >
</ListView>

<StackView
    android:id="@+id/stackView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/listView1"
    android:layout_marginLeft="103dp"
    android:layout_marginTop="57dp"
    android:layout_toRightOf="@+id/textView1" >
</StackView>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1"
    android:layout_marginRight="58dp"
    android:text="OK" />

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:text="Scroll 5" /> 
```

行的 XML。

```
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:textSize="25sp"
    android:gravity="center_vertical|center_horizontal"
    android:layout_gravity="center_vertical|center_horizontal"
    android:text="TextView" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:16:49.500

没有内置任何东西，但你可以试试这个： [http ://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)

# postgresql - PostgreSQL 中的大小写不敏感

> ID：15022648
> 
> 赞同：0
> 
> 时间：2013-02-22T11:01:36.863
> 
> 标签：postgresql

如何为整个 PostgreSQL 数据库甚至整个服务器/集群设置不区分大小写？

UPD：用于列值。我刚刚从 MS SQL 迁移了数据库，现在正在研究如何以最轻松的方式获得类似于我们之前用于排序、过滤和其他内容的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:11:30.833

默认情况下，不带引号的[*标识符*](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)不区分大小写（并且根据 SQL 标准）。

除此之外，您*不能*在标准 Postgres 中设置“不区分大小写”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-16T14:53:27.807

**CITEXT 绝对是最不痛苦的路线**（根据@Matthew Wood 的建议）

使用以下命令将扩展安装到当前数据库：

```
CREATE EXTENSION IF NOT EXISTS citext; 
```

这在运行这样的查询时非常有用：

```
SELECT * FROM product WHERE serial_number = 'aB' 
```

这将成功匹配`ab`,`Ab`或`aB`.`AB`

如果您使用参数化 SQL 并让提供程序为您构建命令，您*可能会遇到麻烦。*例如，通过以下命令使用 Npgsql（.NET 的 ADO.NET 提供程序）：

```
SELECT * FROM product WHERE serial_number = @serial_number; 
```

实际上将其发送到服务器：

```
SELECT * FROM product WHERE serial_number = ((E'aB')::text); 
```

这会将值转换为“文本”，这意味着它将进行区分大小写的查找。我设法解决这个问题的方法是修改 Npgsql 源代码以添加“citext”类型。使用此参数类型，将发出正确的命令：

```
SELECT * FROM product WHERE serial_number = ((E'aB')::citext); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:26:29.450

您可以使用 CITEXT 数据类型而不是 VARCHAR/TEXT：

[CITEXT 数据类型文档](http://www.postgresql.org/docs/current/static/citext.html)

# android - Android 搜索栏制作流畅的动作

> ID：15022649
> 
> 赞同：0
> 
> 时间：2013-02-22T11:01:37.193
> 
> 标签：android

我有一个`SeekBar`最大进度值为 20。现在，当我将最大进度值减小到 3 时，SeekBar 的运动并不顺畅。当我拖动 SeekBar 时，它会在 0 到 3 之间的每个级别停止。当最大值为 20 时，它也会停止，但随着级别数更多（20），它并不明显。

`SeekBar`因此，当我拖动最大进度值较小时，如何避免运动中的混蛋。我应该在我的 SeekBAr 子类中覆盖与 SeekBar 相关的框架代码中的哪个方法，以减少运动中的混蛋不明显。

# python - 如何在以某些子字符串开头的列表中查找字符串的索引？

> ID：15022673
> 
> 赞同：12
> 
> 时间：2013-02-22T11:02:43.710
> 
> 标签：python

我有一些这样的清单：

```
lines = [
    "line",
    "subline2",
    "subline4",
    "line",
] 
```

我想获取以某些子字符串开头的行索引列表。

我使用这种方法：

```
starts = [n for n, l in enumerate(lines) if l.startswith('sub')] 
```

但也许有人知道更漂亮的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-02-15T21:21:36.213

我知道这个问题已经有一段时间了，但无论如何，如果有人感兴趣，这里还有另一个解决方案。

你的方式看起来不错，但这里有一个类似的策略，使用`list.index()`方法：

```
starts = [lines.index(l) for l in lines if l.startswith('sub')] 
```

就时间而言，这两个函数的时钟大致相同（`1.7145156860351563e-06`您的`enumerate`解决方案平均秒数`1.7133951187133788e-06`，我的`.index()`解决方案平均秒数）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-05-04T23:21:39.870

虽然我喜欢您的方法，但这是另一种`lines`正确处理相同条目的方法（即类似于您的示例代码的方式），并且具有可比的性能，对于长度`lines`增长的情况也是如此：

```
starts = [i for i in range(len(lines)) if lines[i].startswith('sub')] 
```

# upgrade - EZ Publish：从 4.6 升级到 4.7 后自定义数据类型不起作用

> ID：15022674
> 
> 赞同：0
> 
> 时间：2013-02-22T11:02:49.753
> 
> 标签：upgrade, ezpublish

我有几个在 eZ Publish 4.5 上运行的网站。升级到 4.6 后一切正常，但升级到 4.7 后，我的自定义数据类型停止工作。

错误：eZDataType::loadAndRegisterType 未找到数据类型：'xxx'，在以下目录中搜索：kernel/classes/datatypes

这是一个已知问题还是我错过了 4.6 和 4.7 之间的任何变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:24:13.043

不知道刚刚发生了什么，但是在寻找答案后我重新加载了页面，现在它可以工作了，一定是我做错了什么被缓存了。

# sparql - 有人可以解释一下这些 Sparql 之间的区别吗

> ID：15022675
> 
> 赞同：1
> 
> 时间：2013-02-22T11:02:50.630
> 
> 标签：sparql

我有 rdf 数据：

```
@prefix  foaf:  <http://xmlns.com/foaf/0.1/> .

_:a    foaf:name   "Alice" .
_:a    foaf:knows  _:b .
_:a    foaf:knows  _:c .

_:b    foaf:name   "Bob" .

_:c    foaf:name   "Clare" .
_:c    foaf:nick   "CT" .

PREFIX foaf:    <http://xmlns.com/foaf/0.1/>
SELECT ?nameX 
WHERE
 { ?x foaf:knows ?y.
 ?x  foaf:name ?nameX .
 } 
```

我得到一个结果 Alice 但是如果我正在运行这个查询

```
PREFIX foaf:    <http://xmlns.com/foaf/0.1/>
SELECT ?nameX 
WHERE
{ ?x foaf:knows ?y.
{?x  foaf:name ?nameX .}
} 
```

我得到了同样的结果。由于我是 Sparql 的新手，请解释在 {} 内写入 ?x foaf:name ?nameX 有什么好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:38:00.940

没有区别，并且包含通过添加花括号获得的额外块没有任何好处。通常最好选择最简单的方式来表达给定的查询。

# c++ - 代码说明

> ID：15022676
> 
> 赞同：0
> 
> 时间：2013-02-22T11:02:51.063
> 
> 标签：c++, eclipse, optimization, arduino

我写了这段代码：

```
void NTP::setTime() {
    connWithNTP();
    if(!timeNTPReadyToSet) {
        Serial.println("Getting time from RTC");
        timeFromRTC();
        if (year == 2000) {
            while(dhcpTest == false && timeNTPReadyToSet == false) {
                Serial.print("Kolaei apo to DHCP");
                startEthernetAndUdp();
                connWithNTP();
                timeFromNTP();
            }
        }
    }
    else {
        Serial.print("Getting time from NTP");
        timeFromNTP();
    }
    serialPrinting();
} 
```

根据我在一切正常时所做的事情（互联网连接正常且[NTP](https://en.wikipedia.org/wiki/Network_Time_Protocol)服务器正常工作）。代码将用于`else print`从 NTP 服务器获取时间（发生这种情况），我的问题是它不执行 serialPrinting。

此功能仅在串行监视器中打印时间。函数 timeFromNTP 和 timeFromRTC 只是设置包含日历和时间的变量。

我的串行监视器打印从 NTP 服务器获取时间，然后它不打印任何内容。它只是从头开始，因为我已经在循环中设置了这个 setTime 函数。

是否可以让 serialPrinting() 运行？如果我调用 setTime() 时此函数会以任何一种方式执行，我会担心 serialPrinting。

我明白了：

> 0
> 
> 0
> 
> 0
> 
> 第 4 个 NTPServer 工作
> 
> 从 NTP 获取时间
> 
> 0
> 
> 0
> 
> 0
> 
> 0
> 
> 第 4 个 NTPServer 工作
> 
> 从 NTP 获取时间

零和“4th NTPServer working”来自 connWithNTP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:44:13.153

好吧，除非任何其他函数进入循环或通过再次调用 setTime 卡住，否则无法不执行 serialPrinting。我有一些从这里看不到的子功能，它们出于安全原因调用 setTime（现在不需要）。所以有一个循环。如果没有可以跳过serialPrinting 的循环或内部错误，这段代码是不可能的。

# php - PHP：gzdeflate 在多台机器上是否安全？

> ID：15022677
> 
> 赞同：9
> 
> 时间：2013-02-22T11:02:53.257
> 
> 标签：php, compression, gzip

在 PHP 手册中有一条关于 gzdeflate 的评论说：

> gzcompress 生成更长的数据，因为它将有关编码的信息嵌入到字符串中。如果您正在压缩只能在一台机器上处理的数据，那么您无需担心您使用这些功能中的哪一个。但是，如果您将使用这些函数压缩的数据传递到另一台机器，您应该使用 gzcompress。

进而

> 在各种内容上运行 50000 次重复，我发现 gzdeflate() 和 gzcompress() 无论内容和压缩级别都执行同样快，但 gzinflate() 总是大约是 gzuncompress() 的两倍。

出于我的目的，我将数据存档在机器上以备将来使用。数据经常被读取，但只写入一次。理论上，如果我在某个时候更换服务器，它总有一天会被转移到另一台机器上，但那是几年后的事了。

使用 gzdeflate 和 gzinflate 而不是 gzcompress 和 gzuncompress 对我来说安全吗？

我的想法如下：gzinflate 更快，这将对服务器有很大帮助，因为会有很多读取请求。如果将来某个时候我无法读取文件，那么我应该能够弄清楚如何解压缩文件并重新压缩它，对吗？并不是说 gzinflate 有一天会神奇地不起作用，就像第一条评论似乎在说的那样。即使缺少一个 6 字节的标头，我也确信它会以某种方式扩展。

想法？

**更新——基准**

每次 10,000 次迭代：

```
gzdeflate took 19.158888816833 seconds and size 18521
gzinflate took 1.4803981781006 seconds
gzcompress took 19.376484870911 seconds and size 18527
gzuncompress took 1.6339199542999 seconds
gzencode took 20.015944004059 seconds and size 18539
gzdecodetook 1.8822891712189 seconds 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T16:07:39.983

评论是胡说八道。您可以使用 、 或 中的任何一个`gzcompress`来`gzdeflate`生成`gzencode`可以在任何地方便携式解压缩的压缩数据。这些函数仅在 deflate 数据 (RFC 1951) 的包装器中有所不同。 `gzcompress`有一个 zlib 包装器 (RFC 1950)，`gzdeflate`没有包装器，并且`gzencode`有一个 gzip 包装器 (RFC 1952)。

我建议*不要*使用`gzdeflate`，因为没有包装意味着没有完整性检查。 `gzdeflate`仅应在生成其他包装器时使用，例如，对于也使用 deflate 格式的 zip 文件。关于速度的评论几乎肯定是错误的。与解压相比，完整性检查`gzuncompress()`只需要很少的时间。你应该做你自己的测试。

从这个示例中，我可能过于笼统，但我想说您应该完全忽略 PHP 文档中的注释。他们是慷慨的，不知情的。

顺便说一句，这些函数的命名方式非常混乱。名称中只`gzencode`应包含“ `gz`”，因为这是唯一实际以该`.gz`格式进行交易的名称。 `gzcompress`听起来像是压缩成 gzip 格式，但实际上它压缩成 zlib 格式。

# vb.net - Microsoft.Office.Interop 错误 0x800401E3

> ID：15022678
> 
> 赞同：1
> 
> 时间：2013-02-22T11:02:54.823
> 
> 标签：vb.net, office-interop

我正在尝试通过我的*服务*（Windows 服务）访问 Microsoft Word 实例，但出现此错误：

> 操作不可用（HRESULT 异常：0x800401E3 (MK_E_UNAVAILABLE)）

我打开了一个word文档（*我也可以在任务管理器中看到WINWORD.EXE*）。我正在使用 VS 2010 和 MS Office 2003。这是我的代码：

```
Dim fs As New FileStream("D:\log.txt", FileMode.OpenOrCreate, FileAccess.Write)
Dim sw As New StreamWriter(fs)
sw.BaseStream.Seek(0, SeekOrigin.End)
Dim wordapp As Word.Application
wordapp = Marshal.GetActiveObject("Microsoft.Office.Interop.Word.Application")
For Each doc As Word.Document In wordapp.Documents
    sw.WriteLine(doc.FullName.ToString() + "\n" +
    doc.ActiveWindow.WindowState.ToString())
Next
sw.Flush()
sw.Close() 
```

*如果我在 Windows 窗体应用程序中使用此代码，它可以完美运行，但在Windows Service*中不起作用。这是为什么？Windows 服务不支持`Microsoft.Office.Interop`？如果它确实有效，请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:19:45.737

Maybe this is the reason your code works in a Windows Forms:

> Although the Office application is running, it might not be registered in the Running Object Table (ROT). A running instance of an Office application must be registered in the ROT before it can be attached to using GetObject (Visual Basic) or GetActiveObject (Visual C++).
> 
> When an Office application starts, it does not immediately register its running objects. This optimizes the application's startup process. Instead of registering at startup, an Office application registers its running objects in the ROT once it loses focus. Therefore, if you attempt to use GetObject or GetActiveObject to attach to a running instance of an Office application before the application has lost focus, you might receive one of the errors above.

Your form has the focus so the Office app lost focus and register in ROT. With windows service Office doesn't loose the focus.

Just use some interop winapi code to change focus or minimeze office (or all) windows in the desktop. But remember, register in ROT (even when office lost focus) is not determinist, so you must do a loop trying GetObject until you recibe the right response.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:16:34.380

查看此线程，它可能会对您有所帮助：

[http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/e6b94d33-fee9-4696-8618-3e798d329d80](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/e6b94d33-fee9-4696-8618-3e798d329d80)

# php - .htaccess 500 错误

> ID：15022679
> 
> 赞同：0
> 
> 时间：2013-02-22T11:02:58.897
> 
> 标签：php, .htaccess

每当我应用 .htaccess 文件时，它都会显示“500 内部服务器错误”。当我放入空代码 .htaccess 文件时，它运行良好。如果我写下面的代码，它会显示错误。我的 .htaccess 代码是

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^user/(.*)/(.*)/$ user/searchUsrResult.php?selFindUsrCity=$1&txtFindUSrAreaRzip=$2 [L,NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:28:56.583

正如 Carlos 提到的，您的 RewriteRule 没有问题，您禁用了 mod_wrewrite。如果您使用的是 WAMP，则可以通过取消注释该行来编辑 httpd.conf 来启用它

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

就像安德鲁说的那样，请检查您是否有 AllowOverride ALL。通过在 httpd.conf 中搜索 DocumentRoot 找到它并检查它是否是

```
AllowOverride All 
```

内`<Directory /> </Directory>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:08:01.180

我看不出有任何问题`RewriteRule`，所以更可能的问题是您没有`mod_rewrite`启用。

如果您正在运行 Ubuntu 或 Debian（或我想的任何其他 Debian 衍生产品）执行（作为 root 或 with `sudo`）：

```
a2enmod rewrite
service apache2 restart 
```

另外，`AllowOverride`按照 Andrew 的建议检查值，但这只会忽略您的 RewriteRule 而不是抛出错误 500。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:06:41.197

您可能在 apache 配置中禁用了覆盖：

```
AllowOverride None 
```

尝试更改它并查看问题是否已解决：

```
AllowOverride All 
```

有关此设置的完整选项，请参见此处：[http ://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

如果您使用的是 VHOSTS，则可以在 VHOST 块内的块内更改此设置

# mongodb - 使用 Mongo 聚合框架的组项目的平均值

> ID：15022683
> 
> 赞同：3
> 
> 时间：2013-02-22T11:03:11.040
> 
> 标签：mongodb, aggregation-framework

我想对一个集合进行分组，然后计算组的一个字段的平均值。

我像这样设置我的数据库和内容：

```
use testdb
db.bla.insert({"service": "A", "tet": "1"})
db.bla.insert({"service": "A", "tet": "100"})
db.bla.insert({"service": "A", "tet": "150"})
db.bla.insert({"service": "B", "tet": "10"})
db.bla.insert({"service": "B", "tet": "20"})
db.bla.insert({"service": "B", "tet": "25"}) 
```

现在我想要所有服务“A”和“B”的数量以及所有服务“A”和“B”的平均 tet。我试过这个：

```
db.bla.aggregate( { "$group": { _id: "$service", requests: { $sum:1}, averagetet: { $avg: "$tet"}}}) 
```

但这总是给我平均值“0”。我在这里想念什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T11:16:52.553

您在`tet`字段上使用字符串值

```
db.bla.insert({"service": "B", "tet": "25"}) //this quotes creates a String value. 
```

您必须使用数字插入，如下所示：

```
db.bla.insert({"service": "B", "tet": 25}) 
```

插入正确的值，MongoDB 会给出正确的`tet`字段平均值。

```
db.bla.insert({"service": "A", "tet": 1})
db.bla.insert({"service": "A", "tet": 100})
db.bla.insert({"service": "A", "tet": 150})
db.bla.insert({"service": "B", "tet": 10})
db.bla.insert({"service": "B", "tet": 20})
db.bla.insert({"service": "B", "tet": 25})

db.bla.aggregate( { "$group": { _id: "$service", requests: { $sum:1}, averagetet: { $avg: "$tet"}}})
{
  "result": [
    {
      "_id": "B",
      "requests": 3,
      "averagetet": 18.333333333333332
    },
    {
      "_id": "A",
      "requests": 3,
      "averagetet": 83.66666666666667
    }
  ],
  "ok": 1
} 
```

# permissions - “警告：opendir”错误

> ID：15022691
> 
> 赞同：0
> 
> 时间：2013-02-22T11:03:39.587
> 
> 标签：permissions

安装和卸载所见即所得后，我得到了错误：

```
Warning:
opendir(sites/all/modules/wysiwyg/editors,sites/all/modules/wysiwyg/editors):
The specified network name is no longer available. (code: 64) in
file_scan_directory() (line 2038 of
C:\DWASFiles\Sites\grupa2calendar\VirtualDirectory0\site\wwwroot\includes\file.inc).
Warning: opendir(sites/all/modules/wysiwyg/editors): failed to open
dir: Permission denied in file_scan_directory() (line 2038 of
C:\DWASFiles\Sites\grupa2calendar\VirtualDirectory0\site\wwwroot\includes\file.inc). 
```

我尝试重建权限但没有运气，我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:57:07.467

没关系，好​​像天蓝色的服务器真的很慢，所以需要一些时间来清除缓存和重建权限。做了那些事情，一个小时后问题就消失了..

# java - Akka 批处理/单项处理

> ID：15022693
> 
> 赞同：1
> 
> 时间：2013-02-22T11:03:54.130
> 
> 标签：java, scala, akka

我目前正在实现一个系统，该系统为在 Akka 中收到的消息调用 API 方法。这非常简单，不涉及任何对 Akka 有深入了解的内容。

实际的 API 虽然也允许我们发出批处理请求（类似于此处描述的 JSON-RPC 批处理调用：http: [//www.jsonrpc.org/specification](http://www.jsonrpc.org/specification)）。方法的返回值不会改变，但队列会改变。

我的想法是检查队列中是否有多个消息，并在一个 API 调用中一次处理它们，而不是制作数百个单独的消息（当然是分别回复所有消息的想法）。

Akka有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:56:27.927

没有这样的内置构造。你可以做的是在你的处理actor前面有一个批处理actor。当批处理参与者收到新的回复时，它开始构建批处理。

处理器参与者可以在准备好处理下一批时询问批处理参与者。此时，批处理参与者将其迄今为止收集的所有消息发送到一条消息中。

当然，实际模式会有所不同，具体取决于调用 API 的方式和时间。

但在开始构建这样的模式之前，您应该实际测量性能。我个人更喜欢演员做细粒度的工作，而不是大块的工作。如果您在一个接收操作中做太多工作，您可能会降低公平性。

如果您可以降低公平性以获得潜在（尽管不一定）更高的吞吐量，您应该查看默认调度程序的“吞吐量”设置：

```
# Throughput defines the maximum number of messages to be
# processed per actor before the thread jumps to the next actor.
# Set to 1 for as fair as possible. 
```

# emacs - 为什么 bzr 分支不断被杀死？

> ID：15022695
> 
> 赞同：0
> 
> 时间：2013-02-22T11:03:54.870
> 
> 标签：emacs, bazaar

我正在尝试分支 emacs 主干：

```
$ mkdir emacs
$ bzr init-repo emacs
Shared repository with trees (format: 2a)
Location:
  shared repository: emacs
$ bzr branch bzr://bzr.savannah.gnu.org/emacs/trunk trunk
Killed39KB  2666KB/s | Fetching revisions:Inserting stream 
```

启动`bzr branch`命令后，下载开始，一段时间后它被杀死并且主干目录为空。重新启动相同的命令没有帮助，它似乎无法恢复中间状态。因此，我必须删除目录并从头开始，这无助于使分支更进一步。

可能的问题：我的互联网连接不是很好，但这似乎是原因。我从不同的位置以及远程托管的 VPS 尝试过：同样的行为！

我可能会连续尝试多次（删除文件夹），它不可能完成。

人们如何分支 emacs 主干存储库？这是工具（`bzr`）还是存储库服务器问题？您认为这与我的设置有关吗？命令不好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:15:44.150

也许该进程试图分配和使用过多的 RAM，并在内存池耗尽后被内核杀死（您可以检查`dmesg`此类消息）。谷歌搜索«bzrkilled out of memory»会产生许多错误报告：

*   [https://bugs.launchpad.net/bzr/+bug/488141](https://bugs.launchpad.net/bzr/+bug/488141)
*   [https://bugs.launchpad.net/bzr/+bug/456077](https://bugs.launchpad.net/bzr/+bug/456077)

我想您可以尝试使用具有更多 RAM 的机器作为解决方法，或者，如果它是存储库格式问题（例如上面的错误报告中提到的），请执行这些报告的注释中建议的步骤。

# python - 在熊猫数据框中的多列上应用函数时出错

> ID：15022696
> 
> 赞同：0
> 
> 时间：2013-02-22T11:03:55.923
> 
> 标签：python, pandas

我对 python 和 pandas 都很陌生，所以也许我遗漏了一些东西，但我在网上找不到解决我的问题的方法。我尝试运行一个函数，该函数应该应用于在 pandas 数据框的三列上逐行汇总值。任务与[此处](https://stackoverflow.com/questions/13331698/how-to-apply-a-function-to-two-columns-of-pandas-dataframe)描述的完全相同。但是，使用建议的解决方案，我总是会收到错误消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in vecSd
TypeError: only length-1 arrays can be converted to Python scalars 
```

这是我的功能示例以及我正在尝试做的事情：

```
import pandas as pd
from math import sqrt, pow

# my function
def vector(x, y, z):
    vec=sqrt(pow(x,2)+pow(y,2)+pow(z,2))
    return vec  
# my data frame looks something like this
df=pd.DataFrame({'x':[12,53,-3,-41], 'y':[74,-45,25,-21], 'z':[-2,-64,-12,65]})

# this is the call
vector(df['x'],df['y'],df['z'])

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in vecSd
TypeError: only length-1 arrays can be converted to Python scalars 
```

我也尝试这样定义函数：

```
def vector2(df):
    x=df['x']
    y=df['y']
    z=df['z']
    vec=sqrt(pow(x,2)+pow(y, 2)+pow(z, 2))
    return vec

vector2(df) 
```

但我总是收到相同的错误消息： Traceback (last most recent call last): File "", line 1, in File "", line 5, in vector2 TypeError: only length-1 arrays can be convert to Python scalars

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:07:22.663

`math`只接受标量，不接受数组。`numpy`改为使用

```
import numpy as np

# my function
def vector(x, y, z):
    vec=np.sqrt(np.power(x,2)+np.power(y,2)+np.power(z,2))
    return vec 
```

**编辑**

这也适用于 numpy 数组

```
def vector(x, y, z):
    vec=np.sqrt(x**2+y**2+z**2)
    return vec 
```

# regex - JIRA jql 查询 - * 是什么意思？

> ID：15022697
> 
> 赞同：6
> 
> 时间：2013-02-22T11:03:57.540
> 
> 标签：regex, jira, jql

JQL 中没有正则表达式： [https ://answers.atlassian.com/questions/138055/how-can-i-use-regex-in-a-jql-query-i-cannot-match-strings-that-have -a-specific-ending-in-jql-ex-ing-should-match-running-jogging-etc](https://answers.atlassian.com/questions/138055/how-can-i-use-regex-in-a-jql-query-i-cannot-match-strings-that-have-a-specific-ending-in-jql-ex-ing-should-match-running-jogging-etc)

jql Query中的*是什么意思，我用和不用的时候结果不一样。但我没有在结果中发现任何后果。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-23T12:22:51.777

`~`表示包含，所以

```
summary ~ win 
```

表示*WHERE summary 包含确切的单词 win*。 `*`是通配符。这个例子：

```
summary ~ "win*" 
```

表示*WHERE summary CONTAINS win 和它之后的任何多个字符组合*。

`?`JQL中有两种类型的通配符`*`：

1.  要执行单个字符通配符搜索，请使用“？” 象征。
2.  要执行多字符通配符搜索，请使用“*”符号。

在此处查看[JIRA 高级搜索指南](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)和[通配符说明](https://confluence.atlassian.com/display/JIRA/Performing+Text+Searches)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T13:25:53.010

Atlassian 将 '~' 运算符称为“包含”，但它实际上并不意味着“包含”。例如，在客户字段（自定义文本字段）中搜索“ABCD”将返回匹配“ABCD, EFGH”，但不会返回匹配“EFGH, ABCD”。并且您不能在搜索字符串的开头使用通配符 *。有关更多信息，请参阅[通配符搜索](https://confluence.atlassian.com/jira064/performing-text-searches-720416596.html)和[JRASERVER-6218](https://jira.atlassian.com/browse/JRASERVER-6218)。我们正在调查[Adaptavist ScriptRunner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner/server/overview)以解决这个存在 12 年之久的错误。

# sql-server - 删除文件流数据后如何加快垃圾收集

> ID：15022699
> 
> 赞同：2
> 
> 时间：2013-02-22T11:04:15.753
> 
> 标签：sql-server, sql-server-2008, filestream

我的问题是关于加速文件流垃圾收集器的速度，[这个问题的细节不成功](https://stackoverflow.com/questions/2158702/sql-server-filestream-delete-speed)

让我解释一下我的场景

1.  出于调试/测试原因，我经常需要在我的开发机器上复制客户数据库
2.  由于 DB 有时包含太多文件流 blob 数据，因此我更喜欢将其删除，因此备份大小从 10GB 变为 2 MB
3.  我愿意`Update TABLE set BLOB = NULL`
4.  等待数小时或数天

因为我只需要彻底快速地删除 blob，还有什么可以工作的？我需要`checkpoint`定期打电话或手动删除 Filestream 文件吗？

谢谢。

**更新** 只是为了更好地表达自己。这就是我所做的：

```
UPDATE TABLE_WITH_BLOBS SET BLOBFIELD = NULL 
```

然后我理想情况下希望备份大小为 2 MB ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:55:24.877

对于“4\. 并等待数小时或数天”，您是在等待 UPDATE 完成还是等待垃圾收集发生？

CHECKPOINT 可以使用 sp_filestream_force_garbage_collection 强制垃圾收集器正常运行。

[http://msdn.microsoft.com/en-us/library/gg492195.aspx](http://msdn.microsoft.com/en-us/library/gg492195.aspx)

# sql-server - SSIS 包模板位置

> ID：15022700
> 
> 赞同：4
> 
> 时间：2013-02-22T11:04:15.790
> 
> 标签：sql-server, ssis, sql-server-2012, ssis-2012

我们可以更改包模板的默认位置吗？或者至少添加更多位置？

我想创建一些模板并将它们添加到源代码管理中，但我不太热衷于将文件`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\ProjectItems\DataTransformationProject\DataTransformationItems`夹上的文件添加到源代码管理中。

你怎么处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:28:43.170

我从未尝试过移动它，但是当我们构建模板时，我们有一个 Common 项目，其中包含常见的材料（我们很有创意），例如数据库的配置设置以及模板包。该解决方案还有一个启动项目，其中除了一个构建后脚本之外什么都没有，我们将在其中将模板复制到上述路径中。这样人们就不必担心这种“复杂的复制东西”来开始。

`copy /y "$(SolutionDir)\SQL\SSIS\PackageTemplate.dtsx" "$(DevEnvDir)\PrivateAssemblies\ProjectItems\DataTransformationProject\DataTransformationItems"`

正如 rvphx 提醒我的那样，您将希望有人使用您的模板来重置包 ID。否则，您对 sysdtslog90/sysssislog 表的报告会变得非常复杂。免费的 Visual Studio 插件[BIDSHelper](http://bidshelper.codeplex.com/)具有从项目窗口重置 GUID 的功能。我在使用我们自己的模板时遇到的另一个问题是它们会使用我们提供的物理文件名，但与 SSIS 中的 Package Name 属性不匹配。我们要么分配一个垃圾物理文件名，然后将其重命名为正确的名称，要么只记得在包属性中修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:10:46.550

我们一直使用的模板非常简单（主要是一堆标准变量、连接管理器和 SSIS 2008 的事件处理程序），几年前我编写了一个[NAnt](http://nant.sourceforge.net/)脚本来构建一个简单的单包解决方案。由于 .dtsx 格式只是 XML，因此从极简包中制作文本模板文件并使用 NAnt 的`<replacetokens>`任务来替换包名称和 GUID 等内容并不太难。甚至可以轻松创建唯一的 GUID，因为 NAnt 允许您在脚本中嵌入 C# 代码：

```
<script language="C#" prefix="script" >
    <references>
        <include name="System.dll" />
        <include name="System.DirectoryServices.dll" />
    </references>
    <imports>
        <import namespace="System.DirectoryServices"/>
    </imports>
    <code>
        <![CDATA[
        [Function("create-guid")]
        public static string CreateGuid() 
        {
            return Guid.NewGuid().ToString().Trim();
        }
        ]]>
    </code>
</script>

<property name="PACKAGE_DTSID_GUID" value="${script::create-guid()}"/>
<property name="PACKAGE_VERSION_GUID" value="${script::create-guid()}"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T15:14:28.033

明确回答您的问题：

不，你不能改变它。不，您不能添加更多位置。

如前所述，您可以将脚本从一个位置复制到此文件夹。这是我们大多数人所做的。

# php - 在 2 列中获取结果

> ID：15022701
> 
> 赞同：0
> 
> 时间：2013-02-22T11:04:19.507
> 
> 标签：php, mysql

我想将 mysql 获取结果显示为 2 个列。我在数据库中有记录`Name`,`Description`和`Price`. 它返回为

```
Name
Des
Price

Name
Des
Price 
```

但我想要的布局是这样的：

```
Name     Name
Des      Des
Price    Price

Name     Name
Des      Des
Price    Price 
```

我的代码如下：

```
<?php
while($row=mysql_fetch_array($result))
{
?>
    <tr>
        <td><img src="<?php echo $row['picture']?>" /><br />
        <b><?php echo $row['name']?></b><br />
               <?php echo $row['description']?><br/>
                   Price:<big style="color:green">
                    Rs.<?php echo$row['price']?></big><br /><br />
                <input type="button" value="Add />
        </td>
    </tr>
    <tr><td colspan="2"><hr size="1" /></td>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:12:10.163

你可以使用这个功能

```
/**
 *@param array your array data
 *@param integer if 1 will wertical if > 1 will horizontal
 *@param integer count columns
 *@param integer amount of indentation
function drawTable($data, $type=1, $columns=10, $tabs=0)
{
    $tbl = null;

    if($tabs === false)
    {
        $tr = $td = null;
    }
    else
    {
        $tr = "\n".str_repeat("\t", $tabs);
        $td = $tr."\t";
    }

    if($type == 1)
    {
        $all_columns = array_chunk($data, ceil(count($data) / $columns));
        for($i = 0, $c = count($all_columns[0]); $i < $c; $i++)
        {
            $tbl .= $tr.'<tr>';

            for($si = 0; $si < $columns; $si++)
            {
                $tbl .= $td.'<td>'.(isset($all_columns[$si][$i]) ? $all_columns[$si][$i] : '&nbsp;').'</td>';
            }

            $tbl .= $tr.'</tr>';
        }
    }
    else
    {
        for($i = 0, $n = 1, $d = ceil(count($data) / $columns) * $columns; $i < $d; $i++, $n++)
        {
            if($n == 1)
                $tbl .= $tr.'<tr>';

            $tbl .= $td.'<td>'.(isset($data[$i]) ? $data[$i] : '&nbsp;').'</td>';

            if($n == $columns)
            {
                $n = 0;
                $tbl .= $tr.'</tr>';
            }
        }
    }

    if($tabs !== false)
        $tbl .= "\n";

    return $tbl;
} 
```

如何使用

```
$data = array();
$query = mysql_query('Your sql query');
while($row = mysql_fetch_row($query))
{
    $data = array_merge($data, $row);
}

echo '<table>'.drawTable($data, 1, 2, 0).'</table>'; // Vertical output 
```

# html - Twitter Bootstrap 响应式 CSS 选择器

> ID：15022706
> 
> 赞同：1
> 
> 时间：2013-02-22T11:04:38.643
> 
> 标签：html, css, twitter-bootstrap

我正在为我的响应式网站创建一个功能。它由一个包含标题的图像轮播组成。在桌面上，我绝对显示标题。包含标题和段落的`div`位于图像顶部并占据 40% 的宽度。

当用户使用平板电脑或手机时，我想以 100% 的宽度相对显示标题。这使得文本出现在更适合较小屏幕尺寸的图像下方。

这样做的两种方法是使用不同的 css 类复制代码 - 一种与`visible-desktop`类相对，另一种与类绝对 div `hidden-desktop`。另一种方法是使用 javascript 来切换一个类。

我在想，如果我能使用纯 css 实现上述目标，那就太好了。像`.desktop .carousel-caption {`这样的事情有可能吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:20:22.120

您可能只使用媒体查询并在相关媒体查询中输入您的不同代码。Bootstrap 的媒体查询在此处详细介绍

[http://getbootstrap.com/2.3.2/scaffolding.html#responsive](http://getbootstrap.com/2.3.2/scaffolding.html#responsive)

# iphone - 如何使用 AWS iOS SDK 删除侧存储桶中的文件夹及其所有对象？

> ID：15022707
> 
> 赞同：2
> 
> 时间：2013-02-22T11:04:40.637
> 
> 标签：iphone, ios, ios5, amazon-s3

我正在使用 Iphone 中的 AWS iOS SDK 将对象上传到 amazon s3，有时会发生错误并且上传了一些对象，其余的没有上传。我创建了存储桶，在存储桶内我创建了存储对象的文件夹。我想删除文件夹及其所有对象。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:57:30.130

首先，S3 中没有“文件夹”之类的东西。大多数 S3 客户端（包括 AWS Web 控制台）将它们显示为文件夹只是为了方便（对内容进行分组），但实际上，您所看到的“文件夹名称”只是一个前缀。

话虽如此，我对您的建议是使用`listObjectsInBucket`API 调用，将您的“文件夹名称”作为前缀传递给 S3ListObjectsRequest 参数。
当您获得与该前缀匹配的所有密钥（包括前缀的文件名）后，使用`deleteObjects`API 调用，在 S3ListObjectsRequest 参数中传递密钥。

有关文件夹/前缀和删除内容的更多详细信息，请参阅以下相关链接：
[删除 amazon s3 java 中的文件、目录和存储桶](https://stackoverflow.com/questions/7763239/delete-files-directories-and-buckets-in-amazon-s3-java)
[AWS 论坛上有关此主题的线程](https://forums.aws.amazon.com/message.jspa?messageID=396810)

# osgi - Equinox 框架配置的变化

> ID：15022711
> 
> 赞同：1
> 
> 时间：2013-02-22T11:04:42.643
> 
> 标签：osgi, equinox

使用 Equinox 3.7 版，我可以设置：Constants.FRAMEWORK_STORAGE_CLEAN、“true”和“osgi.console”、consolePortasString()

在 Equinox 3.9 版中，将 FRAMEWORK_STORAGE_CLEAN 设置为“true”不起作用，但设置为“onFirstInit”可以。

“真实”设置是否被有意从 Equinox 中删除？

控制台端口设置在 3.9 中也不起作用。

在 3.9 中设置这些值的建议/预期方法是什么？

# yii - 未定义变量：模型

> ID：15022712
> 
> 赞同：1
> 
> 时间：2013-02-22T11:04:43.457
> 
> 标签：yii

我是 Yii 的新手，现在正在学习它。在这里，我试图从数据库的用户表中获取用户列表。

以下是我用于查看的用户控制器功能：

```
class UsersController extends Controller
{
    public function actionIndex()
    {
        $this->render('index');
    }

    public function actionView()
    {
        $model = new Users;

        $this->render('view',array(
        'model'=>$model,
        ));
    }
} 
```

以下是我的用户模型：

```
class Users extends CActiveRecord
{

public static function model($className=__CLASS__)
{
    return parent::model($className);
}

/**
 * @return string the associated database table name
 */
public function tableName()
{
    return '{{users}}';
}

/**
 * @return array validation rules for model attributes.
 */
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('fname, lname, email', 'required'),
        array('fname, lname', 'length', 'max'=>50),
        array('email', 'length', 'max'=>100),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, fname, lname, email', 'safe', 'on'=>'search'),
    );
}

/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
    );
}

/**
 * @return array customized attribute labels (name=>label)
 */
public function attributeLabels()
{
    return array(
        'id' => 'ID',
        'fname' => 'First Name',
        'lname' => 'Last Name',
        'email' => 'Email',
    );
}

/**
 * Retrieves a list of models based on the current search/filter conditions.
 * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
 */
public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('id',$this->id);
    $criteria->compare('fname',$this->fname,true);
    $criteria->compare('lname',$this->lname,true);
    $criteria->compare('email',$this->email,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
}
} 
```

以下是我的看法：

```
<h1>Users</h1>

<p>
Below is the list of users, here you may add user.
</p>

<?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    'id',
    'fname',
    'lname',
    'email',
),
)); ?>

<div class="view">

<b><?php echo CHtml::encode($data->getAttributeLabel('id')); ?>:</b>
<?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id)); ?     >
<br />

<b><?php echo CHtml::encode($data->getAttributeLabel('fname')); ?>:</b>
<?php echo CHtml::encode($data->fname); ?>
<br />

<b><?php echo CHtml::encode($data->getAttributeLabel('lname')); ?>:</b>
<?php echo CHtml::encode($data->lname); ?>
<br />

<b><?php echo CHtml::encode($data->getAttributeLabel('email')); ?>:</b>
<?php echo CHtml::encode($data->email); ?>
<br />

</div> 
```

我收到一个 PHP 通知，说未定义变量：模型，请提前帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:10:05.263

看起来您正在粘贴 _view.php。确保你把你的`$model`变量从`view.php`to `_view.php`，因为`actionView()`你只是把它交给'view'。

# jakarta-mail - Javamail：为 IMAPFolder 发出 idle() 的正确方法

> ID：15022715
> 
> 赞同：0
> 
> 时间：2013-02-22T11:04:53.947
> 
> 标签：jakarta-mail

我为 IMAPFolder 设置了 MessageCountListener。为了不断获得更新，我必须执行以下操作，这对我的应用程序性能来说是一个杀手。它冻结了 GUI，因为它正在为每个文件夹运行。

```
while (true) {
     try {
          if (folder != null && folder.isOpen()) {
              folder.idle();
          } else {
              getSyncListenersAttachedFolders().remove(syncFolder.getFolderID());
          }
     } catch (Exception ex) {
          errorLOG.error("IDLE command issue exception.");
          getSyncListenersAttachedFolders().remove(syncFolder.getFolderID());
     }
} 
```

有没有更好的方法来发出不会在一段时间（真）条件下运行的空闲命令。期待快速响应。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:22:23.840

您需要在自己的线程中运行它。

# json - 如何使用自定义 Serilizer 创建类型 ID？

> ID：15022719
> 
> 赞同：2
> 
> 时间：2013-02-22T11:05:03.550
> 
> 标签：json, jackson

我正在制作数据库复制机制。我只想通过网络发送一个对象。我已经实现了一个自定义序列化程序，它使用 UUID 引用对象，而不是序列化对象本身。另一方面，我打算只在 DB 中查找 UUID 以创建非序列化对象。

我遇到的问题是杰克逊希望我的自定义序列化程序有一个类型 ID。如何创建类型 ID？

我得到了以下课程：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY,    property="objectType")
public class Brand implements Serializable {
    private String uuid;

    @JsonSerialize(using = EntitySerializer.class)
    private Producer producer = null;

    // Omitting getters and setters
} 
```

和

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property="objectType")
public class Producer extends Entity implements Serializable {
    private String uuid;
    private String name;

    //Omitting getters and setters.
} 
```

要序列化 ​​Producer，我得到了以下序列化程序：

```
public class EntitySerializer extends JsonSerializer<Entity> {
    @Override
    public void serialize(Entity value, JsonGenerator jgen,
        SerializerProvider provider) throws IOException,
        JsonProcessingException {
    jgen.writeString(value.getUUID());  
} 
```

}

当我序列化时，我收到以下错误，因为我没有生成任何 @JsonTypeInfo 类型 ID。

```
com.fasterxml.jackson.databind.JsonMappingException: Type id handling not implemented for type com.fodolist.model.Producer (through reference chain: com.fodolist.server.callprocessor.SyncContainter["one"]->com.fodolist.model.Brand["producer"]) 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:33:50.283

如果 uuid 字段已设置，您可以使用 PropertyGenerator，如下所示：

```
@JsonIdentityInfo(generator =  ObjectIdGenerators.PropertyGenerator.class, property = "uuid")
public class Producer extends Entity {
....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:28:33.227

也许看看`@JsonIdentityInfo`；id 生成器之一创建 UUID 以用作 id。默认情况下，第一个实例将被完整序列化（否则无法反序列化数据），但您可以通过使用`@JsonIdentityReference`指示所有实例将仅使用 id 序列化（生成或通过属性访问）来更改它）。

# actionscript-3 - 如何在 AS3 中使用绝对位置读取歌曲

> ID：15022720
> 
> 赞同：1
> 
> 时间：2013-02-22T11:05:05.970
> 
> 标签：actionscript-3, flash, audio, audio-player

我正在使用 AS3 制作音乐播放器，但我遇到了一个问题；当我尝试使用 AS3 脚本在项目文件夹之外查找歌曲时，它根本不起作用。

我在互联网上搜索过，我发现的所有示例都使用了这样的相对位置：

```
loadedSong = new Sound(new URLRequest("music.mp3")); 
```

它对我有用，但我需要始终将歌曲放在项目的根文件夹中。而且我想在任何地方阅读它们，而不必将它们复制到根文件夹。

我试图更改代码以使用这样的绝对位置：

```
loadedSong = new Sound(new URLRequest("c:\Users\pc\My Music\Artist\Album\music.mp3")); 
```

但它失败并出现以下错误：“SecurityError: Error #2000: No active security context。”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:27:24.317

这是 Flash Player 的安全限制。如果需要桌面播放器，最好使用 Adob​​e AIR。否则，您可以使用 Web 服务器并在那里存储文件。[或者您可以通过在此处](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)添加受信任的位置来添加允许 Flash Player 从硬盘读取。

# android - ArrayAdapter.NotifyDataSetChanged() 不起作用？

> ID：15022727
> 
> 赞同：21
> 
> 时间：2013-02-22T11:05:43.300
> 
> 标签：android, listview, android-arrayadapter

我有一个可由用户更新的列表，但`notifyDataSetChanged()`不适用于与`listView`. 我在片段中使用它。数据库得到更新，但 adpater 没有。以下是我的实现：

**我的主要片段：**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    myArrayList = new ArrayList<myList>();
    myArrayList = Database.getSharedObject(getActivity()).getMyList();
    if (myArrayList != null && myArrayList.size() > 0) {
        adapter = new myListAdapter(getActivity(), 0, myArrayList);
    }

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.mainfragment, container, false);
    myListView = (ListView) v.findViewById(R.id.my_list_view);
    myListView.setOnItemClickListener(this);
    if (adapter != null) {
        myListView.setAdapter(adapter);
    }

    return v;
} 
```

在一些导航过程列表被更新并且在我的`onResume()`方法中我从数据库中获取更新的列表并调用`notifyDatasetChanged()`不更新我的视图的方法之后，但是来自数据库的相应数组被更新了一个。

```
@Override
public void onResume() {
    super.onResume();
    myArrayList = Database.getSharedObject(getActivity()).getMyList();
    adapter.setItems (myArrayList);
    adapter.notifyDataSetChanged();

} 
```

**我的列表适配器**

```
public class MyListAdapter extends ArrayAdapter<Message> {

    private ArrayList<Message> myList;

    /* Context */
    private Context context;

    public void setItems (ArrayList<Message> myList) {
        this.myList = myList;
    }

    public MyListAdapter (Context context, int textViewResourceId, ArrayList<Message> myList) {
        super(context, textViewResourceId, myList);
        this.context = context;
        this.myList = myList;
    }

    @Override
    public View getView (int position, View v, ViewGroup parent) {
        // Keeps reference to avoid future findViewById()
        MyViewHolder viewHolder;

        if (v == null) {
            LayoutInflater li = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = li.inflate(R.layout.list_row, parent, false);

            viewHolder = new MyViewHolder();
            viewHolder.txtImage = (ImageView) v.findViewById(R.id.message_icon);
            viewHolder.txtMessage = (TextView) v.findViewById(R.id.message);
            viewHolder.txtDate = (TextView) v.findViewById(R.id.date);

            v.setTag(viewHolder);
        } else {
            viewHolder = (MyViewHolder) v.getTag();
        }

        Message myMessage = new Message();
        myMessage = myList.get(position);
        if (myMessage != null) {
            viewHolder.txtMessage.setText(myMessage.getText());
            viewHolder.txtDate.setText(myMessage.getDate());
        }
        return v;
    }

    static class MyViewHolder {
        ImageView txtImage;
        TextView txtMessage;
        TextView txtDate;
    }
} 
```

对出了什么问题有任何想法吗？为什么列表视图没有更新？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-22T19:01:56.000

`notifyDataSetChanged()`不会为你工作。原因

1.  您的适配器丢失了对您列表的引用。
2.  始终创建新列表并将其添加到适配器。这样做：在全局声明时初始化 ArrayList。

`ArrayList<MyItemType> myArrayList=new ArrayList<>();`// 作为全局变量

直接将 List 添加到适配器，无需检查 null 和空条件。直接将适配器设置为列表（不检查任何条件）

`myListView.setAdapter(adapter);`

3.  每次将数据添加到 myArrayList （如果您的数据是全新的，那么您可以在实际将数据添加到列表之前调用 adapter.clear() 和 myArrayList.clear()）但不要设置适配器，即如果新数据填充在 myArrayList 中，然后只需`adapter.notifyDataSetChanged()`

    ```
     adapter = new myListAdapter(getActivity(), 0, myArrayList); 
    ```

4.  删除此行

    `adapter.setItems (myArrayList);`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-17T15:35:42.177

只是覆盖 getCount 方法

```
 @Override
    public int getCount() {
        return myArrayList.count();
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-25T12:37:07.300

在您的 setItems 方法中，尝试清除旧的 ArrayList。

而不是这个：

```
public void setItems(ArrayList<Message> myList) {
this.myList = myList;
} 
```

尝试这个：

```
public void setItems(ArrayList<Message> myList) {
this.myList.clear();
this.myList.addAll(myList);
notifyDataSetChanged();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:55:19.803

问题出在 MyListAdapter 的构造函数中

代替

```
public MyListAdapter(Context context, int textViewResourceId, ArrayList<Message> myList) {
    super(context, textViewResourceId, scheduledMessageList);
    this.context = context;
    this.myList = myList;
} 
```

尝试

```
public MyListAdapter(Context context, int textViewResourceId, ArrayList<Message> myList) {
    super(context, textViewResourceId, myList);
    this.context = context;
    this.myList = myList;
} 
```

也不是你自己的方法 setItems 你应该调用`adapter.clear();`后跟`adapter.addAll(myArrayList);`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-22T11:11:30.007

如果您可以使用`notifyDataSetChanged()`但在适配器中！在里面创建一个小方法

# css - 以下css选择器有什么区别

> ID：15022728
> 
> 赞同：-1
> 
> 时间：2013-02-22T11:05:45.960
> 
> 标签：css

```
a[attribute~=val]{
}

a[attribute|=val]{
}

a[attribute*=val]{
} 
```

通常我使用最后一个..但是它们之间的区别是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:09:01.137

```
a[attribute~=val] 
```

匹配具有属性的`a`元素，该`attribute`属性的值包含单词“val”，由空格分隔。

```
a[attribute|=val] 
```

匹配一个属性值恰好为“val”或以“val-”开头的`a`元素。`attribute`

```
a[attribute*=val] 
```

匹配具有值包含字符串“val”`a`的属性的元素。`attribute`

* * *

[通过阅读 CSS 选择器规范](http://www.w3.org/TR/selectors/#attribute-selectors)，您可以很容易地发现自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:12:26.300

属性包含单词选择器`~=`将找到一个由空格分隔的单词。例如，它将找到`"Jon"`in`"Jon Peters"`但不在`"Jonathan Peters"`.

属性包含前缀选择器`|=`将找到一个用破折号分隔的前缀。例如，它将找到`"en"`in`"en-GB"`但不在`"english"`or中`"kal-en"`。

属性包含选择器`*=`将在属性值内的任何位置查找文本。

# java - 动态应用 JAXB 注解

> ID：15022734
> 
> 赞同：1
> 
> 时间：2013-02-22T11:05:53.177
> 
> 标签：java, jaxb

假设我有一个`BOOK.java`包含字段（`id`、、 ）的文件`name`，`author`现在在将其编组为 XML 文件时，我只想`id`写入 XML 文件，但这必须由某些条件决定。所以我想`@XmlTransient`在运行时在该条件下向其他两个字段注入注释。是否可以在运行时注入 JAXB 注释？我可以这样做吗？如果可以，我该怎么做？

除了使用 javassist 之外还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:29:50.223

听起来您只是想要一些不是 JAXB 的东西。JAXB 在适合的情况下非常棒，但它在允许您做的事情上非常有限制。像[XStream](http://xstream.codehaus.org/tutorial.html)这样的东西可能会更好地满足您的需求。您可以编写一个[自定义`Converter`](http://xstream.codehaus.org/converter-tutorial.html)来处理是否编写特定字段的所有逻辑。

# android - AsyncTask 调用原生方法

> ID：15022735
> 
> 赞同：0
> 
> 时间：2013-02-22T11:05:57.923
> 
> 标签：android, android-asynctask, java-native-interface

我有一个 AsyncTask 并试图从中调用 native(jni) 方法。是否可以？我收到一个运行时异常，说不满意的链接错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:19:20.720

是的，您可以从任何线程调用 JNI 方法，包括用于 AsyncTask 的方法。问题可能是：

1.  本机库没有及时加载。现在您正在使用多个线程，也许您在这里有一个竞争条件？您是否在主线程上加载库，在后台线程中与 JNI 调用竞争？
2.  您在 Java 端的本机方法存根与本机端的方法实现之间存在签名不匹配。

# javascript - 从右向左滑动

> ID：15022741
> 
> 赞同：2
> 
> 时间：2013-02-22T11:06:18.463
> 
> 标签：javascript, jquery, slider

我正在为特色滑块使用这个流行的插件：http: [//slidesjs.com/](http://slidesjs.com/)

但是对于阿拉伯语站点，我们需要滑块以相反的方向（从右到左）移动，但不支持它。

```
function animate(direction, effect, clicked) { ... } 
```

...虽然 animate 函数具有方向参数，但它仅适用于下一个/上一个而不是所有滑块。

完整的脚本在这里： http: [//pastebin.com/rRKR32nb](http://pastebin.com/rRKR32nb)

我会很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:35:27.523

你在这里[http://pastebin.com/0Ta3Qh5R](http://pastebin.com/0Ta3Qh5R)

我还强调了这些变化。

祝你好运。

# node.js - 在 Windows CE 上安装 node.js

> ID：15022752
> 
> 赞同：2
> 
> 时间：2013-02-22T11:06:57.110
> 
> 标签：node.js

node.js 可以安装在 Windows CE 操作系统中吗？我有一个项目要求，出于安全目的，我需要在 Baracudda Server 和我的 HTML 页面之间提供抽象。我是 node.js 的新手，所以请原谅我的无知。任何帮助表示赞赏。

# php - 在加入的mysql查询结果中获取表名

> ID：15022761
> 
> 赞同：1
> 
> 时间：2013-02-22T11:07:24.967
> 
> 标签：php, mysql, pdo

```
SELECT
*
FROM table1
LEFT JOIN table2
ON table1.id=table2.ref 
```

如何区分来自 table1 或 table2 的列。无论如何，是否可以在别名中获取表名，可用于按表名识别列？如果重要的话，我正在使用 PHP 从数据库中获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:23:13.910

好吧，你的理由是公平的，但实施是不寻常的。

当每个表在 php 中代表一个类时，它被称为**ORM** - 对象关系映射。
并且当它被使用时，一个对象已经知道它的字段，因为每个表只是类属性的反映。坦率地说，使用 ORM 没有人会手动创建表 - 它们是根据对象属性创建（或更改）的。
所以，一个对象总是可以从其他人那里分辨出它的字段。

至于你的字面问题 - 不，据我所知，没有办法获得这样的信息

# javascript - 淘汰赛 removeAll() 无法识别

> ID：15022764
> 
> 赞同：0
> 
> 时间：2013-02-22T11:07:42.943
> 
> 标签：javascript, jquery-ui, data-binding, knockout.js

我有一个页面，我将视图模型绑定到 jQuery UI 对话框中的 HTML 表。

当用户关闭对话框时，我想删除视图模型中`observableArray`绑定到 HTML 表的所有元素。我正在使用该`removeAll()`方法，但我的萤火虫告诉我这不是一个函数。

你能帮助我吗？

这是一个简化的场景。

HTML

```
<input type="button" id="open" value="GO!"><br />
<div id='hidden'>
    <table>
        <tbody data-bind="foreach: i">
            <tr>
                <td><span data-bind="text: code" /></td>
                <td><span data-bind="text: descr" /></td>
            </tr>
        </tbody>
    </table>
</div> 
```

JS

```
$(function () {

    function vm() {
        this.items = [
            {code: "2011",descr: "descr 2011"},
            {code: "2012",descr: "descr 2012"}, 
            {code: "2013",descr: "descr 2013"}
        ];

        this.i = ko.observableArray(this.items);

        this.clearFoundEvals = function()
        {
            this.i.removeAll();
        };

        return this;
    }

    ko.applyBindings(new vm());

    $dialog = $('#hidden').dialog({
        autoOpen: false,
        height: 200,
        width: 300,
        buttons: {
            cancel: function () {
                vm.clearFoundEvals();
                $(this).dialog('close');
            }
           }
        });

        $('#open').click(function(){
            $dialog.dialog('open');
        });    
    }); 
```

[工作示例](http://jsfiddle.net/angelobadellino/UXKt9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:15:18.233

您尚未将视图模型分配给变量，因此它在取消方法中不存在：

```
var vm = new vm();
ko.applyBindings(vm); 
```

[jsFiddle](http://jsfiddle.net/wBR6h/)

# svn - SVN - 创建新的存储库

> ID：15022766
> 
> 赞同：-3
> 
> 时间：2013-02-22T11:07:45.520
> 
> 标签：svn, tortoisesvn

我想从 svn 导入文件，但出现错误。

WAMP 2.0（用于测试 svn）

```
Eroor Redirect cycle detected for URL 'localhost:8080/SystemKontroliWersji' 
```

图片 1 - 我在这里创建了新的存储库“SystemKontroliWersji”

![在此处输入图像描述](../Images/9d60729048fd0485045ecb226688963e.png)

图 2 - 在这里我添加 C# 文件“TreningToWork”

![在此处输入图像描述](../Images/31e4e0d3d7537220bb87256ad6c0aeef.png)

图片 3 - 现在我想从 svn 中删除这个“TreningToWork”，但我得到了错误

![在此处输入图像描述](../Images/e3252b818655876d0db3a8297d627dbe.png)

图 4 - 我不能去“TreningToWork”

![在此处输入图像描述](../Images/bee3849f000e5c2297ba9043ee361552.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:32:42.903

如果要在不使用服务器的情况下创建和访问存储库，则必须使用本地地址：

> 要访问您的本地存储库，您需要该文件夹的路径。请记住，Subversion 需要格式为 file:///C:/SVNRepository/ 的所有存储库路径。请注意始终使用正斜杠。

取自[乌龟手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-repository.html#tsvn-repository-local-access)。

如果你想要 http 访问，VisualSVN 是一个不错的 Windows 免费版。

* * *

无论如何，您在这里使事情变得非常复杂并且做一些本质上错误的事情。我建议您首先阅读我链接的手册，然后可能使用 VisualSVN 来了解这一切是如何工作的。

# javascript - 修改无效的javascript

> ID：15022772
> 
> 赞同：1
> 
> 时间：2013-02-22T11:07:59.090
> 
> 标签：javascript, regex

我想修改无效的正则表达式而不是抛出错误，但是在抛出错误之前我无法获取无效的正则表达式的字符串...

```
var rex = /t(h)?u(?(1)r|e)sday/.replace(/\(\?\((\d)\)(.+?\|)(.+?)\)/g,'((?!\\$1)$2\\$1$3)').replace(/^\/|\/$/g,'') 
```

这有效，但显然不是我正在寻找的解决方案......

```
try{
  var rex = /t(h)?u(?(1)r|e)sday/
} catch(e){
  var rex = new RegExp(e.toString().split(/: /)[2].replace(/\(\?\((\d)\)(.+?\|)(.+?)\)/g,'((?!\\$1)$2\\$1$3)').replace(/^\/|\/$/g,''))
}
console.log(rex) 
```

我希望能够将正则表达式定义为正则表达式，而不是字符串。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:11:49.377

```
var rex, str = 't(h)?u(?(1)r|e)sday';
try{
  rex = new RegExp( str );
} catch (e) {
  rex = new RegExp( str.replace( /\(\?\((\d)\)(.+?\|)(.+?)\)/g, '((?!\\$1)$2\\$1$3)'; ).replace( /^\/|\/$/g,'' ) )
}
console.log( rex ) 
```

# jquery - jQuery 在 Firefox 中工作，在 Internet Explorer 中失败

> ID：15022774
> 
> 赞同：0
> 
> 时间：2013-02-22T11:08:06.753
> 
> 标签：jquery, html, internet-explorer, firefox

我返回了一个 jQuery，它返回在更改事件中输入元素中输入的文本。**此 jQuery 在 FireFox 中运行良好，但在 Internet Explorer (IE9)**中失败。

我意识到的一件事是，当我从 IE 中看到 SOURCE 时，它只显示主页的来源；而 FireFox 正在显示当前页面源。当我在 IE 的“F12 开发人员工具”中看到源代码时，我得到了所有页面 HTML 源代码**，但根本没有呈现以下脚本**。我在 ASP.Net MVC 应用程序中使用上述脚本。

请帮忙...

```
 <script>
      $(document).ready(function () {
          $("#UserName").change(function () {
              alert("Text Entered Is :"+$("#UserName").val());
          });
      });
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:34:32.530

试试这段代码，用小写写输入的id：用户名，它可能会工作并在body标签之后加载脚本。

```
<script type="text/javascript">
  $(document).ready(function () {
      $("#UserName").bind("change",function () {
          alert("Text Entered Is :"+$("#UserName").val());
      });
  }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T11:28:08.777

使用 keyup 事件，IE 不会触发 change 事件，直到元素失去焦点。

```
 $("#UserName").keyup(function () {
          alert("Text Entered Is :"+$("#UserName").val());
      }); 
```

阅读更多

[在 Internet Explorer (IE) 中未触发 jquery 更改事件](https://stackoverflow.com/questions/4823015/jquery-change-event-not-firing-in-internet-explorer-ie)

[在多选之外释放鼠标时，jQuery 更改事件不会在 IE 中触发](https://stackoverflow.com/questions/4347839/jquery-change-event-not-firing-in-ie-when-releasing-mouse-outside-of-multiple-se)

[http://bugs.jquery.com/ticket/7698](http://bugs.jquery.com/ticket/7698)

# php - 在 SQL 中求和并使用 PHP 将其保存到 SQL 中的另一个表中？

> ID：15022775
> 
> 赞同：1
> 
> 时间：2013-02-22T11:08:08.920
> 
> 标签：php, mysql, sum, insert-into

嗨，我在这个网站上搜索了很多以寻求帮助，但我搜索的越多，我就越困惑。

我有一个表比赛，其中有字段**ID**（主键）**Player** * *TeamName* *（一个团队中的 3 名球员）和**Score**（球员）

```
 competition                     TeamCompetition 
```

* * *

```
Player : TeamName : Score       :  TeamName  :  TeamScore
------ : -------- : -----       :  ----------------------
 Tom   :   team1  :   50        :   team1    :  50+66+35=151
Brian  :   team1  :   66        :   team2    :  54+85+...etc
 Tim   :   team1  :   35        :   
Calvin :   team2  :   54        :
Jerry  :   team2  :   85        : 
```

等等

我已经设法在 SQL 中进行 SUM 如下所示：

```
$result1 = mysql_query("SELECT SUM(Score) AS team1 FROM competition WHERE TeamName='team1' "); 
```

我试图将该变量 $team1 保存到名为 TeamCompetition 的新表中，其中一个团队的总和被保存为一个带有团队名称的数字

```
$row1= mysql_fetch_array($result1);

$team1= $row1['team1'];

$sql1=("INSERT INTO TeamCompetition (TeamScore)
        VALUES '$_POST[team1]' 
        WHERE TeamName='team1' "); 
```

但这不起作用，任何人都可以建议我如何处理这段代码，或者是否有另一种更优雅的方法来解决它？如果我在没有 $sql1 的情况下回显它，它会显示结果为什么我不能保存它...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:10:31.257

SQL 语法问题的基本解决方案是：

```
$sql1=("INSERT INTO TeamCompetition (TeamScore, TeamName)
    VALUES ('".$_POST[team1]."','team1'"); 
```

由于数据库中当前没有包含团队名称的行，因此您应该创建它。另外，请注意 $_POST 是一个数组，在评估脚本中处理得不好。

但是，我假设您想在获得分数时对其进行更新：

```
$sql1=("UPDATE TeamCompetition set TeamScore = '".$_POST[team1]."'
    WHERE TeamName = 'team1'"); 
```

但是 MySQL 中有一个巧妙的技巧，即[INSERT.... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)功能：

```
$sql1=("INSERT INTO TeamCompetition (TeamScore, TeamName)
    VALUES ('$_POST[team1]','team1'
    ON DUPLICATE KEY UPDATE TeamScore = '".$_POST[team1]."'" ); 
```

然而，有一件事我不能接受：**这段代码散发着 SQL 注入的味道**

*   要么使用[PDO](http://php.net/manual/en/ref.pdo-mysql.php)（通常是最佳解决方案）
*   和/或不要使用任何来自不受信任的数据，或者在没有验证和正确处理的情况下容易操纵来源的任何数据（更糟糕的解决方案，但总比没有好）

[可以使用mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)对这段代码进行最省力的保护（只要这些函数仍然受支持，令人敬畏的 NullPointer 指出），但是，这**整件事将被弃用**，所以它不应该用于新的开发：

```
$sql1=("INSERT INTO TeamCompetition (TeamScore, TeamName)
    VALUES ('".mysql_real_escape_string($_POST[team1])."','team1'
    ON DUPLICATE KEY UPDATE TeamScore = '".$_POST[team1]."'" ); 
```

因此，如果您必须修补旧代码，并且将保持这种状态，您可以决定使用它，*但只有在评估使用 PDO 的可能性之后*！如果使用 PDO 的可能性很小，那么这就是要走的路（由 PHP PDO 文档提供）：

```
<?php
try {
    //open connection, this is different than in the old functions
    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);

    //***running query
    //**step1: create statement
    $stmt = $dbh->prepare("INSERT INTO TeamCompetition (TeamScore, TeamName)
    VALUES (:teamScore,:teamName)
    ON DUPLICATE KEY UPDATE TeamScore = :teamScore "); //notice parameters prefixed with ':'

    //**step2: bind values
    $stmt->bindValue(':teamScore', $_POST[team1]);
    $stmt->bindValue(':teamName', 'team1');

    //**step3: exexcute statement
    $stmt->execute();

    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T11:11:24.767

您可以一口气完成所有操作。根本不需要通过 PHP 传递信息。

```
INSERT INTO TeamCompetition (TeamName, TeamScore) VALUES (SELECT TeamName, SUM(Score) FROM competition GROUP BY TeamName) 
```

您需要验证输入，并且您的代码可用于[**sql 注入**](http://en.wikipedia.org/wiki/SQL_injection)检查[**如何防止 PHP 中的 SQL 注入？**](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)

# node.js - 在 NodeJS 中读取并执行文件作为变量

> ID：15022776
> 
> 赞同：0
> 
> 时间：2013-02-22T11:08:14.207
> 
> 标签：node.js

我有一个文件，它的结构是这样的：

```
({
    foo: 'bar',
    bar: 'foo'
}) 
```

我正在尝试加载和读取文件，`NodeJS`以便我可以将其`object`作为变量；最好的方法是什么？**请注意**，我无法更改文件的结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:27:56.653

您可以将文件读入一个字符串和`eval`该字符串：

```
var fs = require('fs');
var s = fs.readFileSync('myfile.js', 'utf8');
var x = eval(s); 
```

`s`如有必要，您可以在调用之前修改字符串`eval`。

我必须同意[mtsr](https://stackoverflow.com/questions/15022776/read-and-execute-a-file-as-a-variable-in-nodejs/15027179#15027179)的观点，即使用的解决方案`JSON.parse`更好（无论是在安全性方面还是在性能方面）。但是，由于对象文字周围有额外的括号，当前数据文件不代表 JSON 结构。

**如果**您确定对象文字`{..}`总是被一`(..)`对包围，您可以删除它们，然后尝试解析字符串：

```
m = s.match(/\(([\s\S]+)\)/);
x = JSON.parse(m[1]); 
```

正则表达式的`[\s\S]+`部分匹配任何内容，包括换行符。`\(`and`\)`部分匹配周围的括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:10:54.963

我会避免评估。尝试

```
JSON.parse() 
```

反而。

# android - 我无法在我的应用程序中从捆绑包中获取数据

> ID：15022777
> 
> 赞同：1
> 
> 时间：2013-02-22T11:08:13.687
> 
> 标签：android, android-layout, android-intent

在我的应用程序中，我需要借助 Intent 方法将 Activity 上的二维数组和另外两个整数值形式发送到另一个。这是作为..

```
 Intent i = new Intent(getApplicationContext(), ViewActivity.class);
            Bundle postbundle = new Bundle();
            String[][] X={{"abc"},{"def"}};
            postbundle.putSerializable("data", X);
            i.putExtra("A", postbundle);

            i.putExtra("albumid", position);
            i.putExtra("Bigcard",bigcard); 
```

这里使用 .putSerializable 方法将数组放入包中。

因此，要在接收器 Activity 中访问这些数据，我正在使用

```
 Bundle bundle = getIntent().getBundleExtra("A");       
    String[][] ABC=(String[][]) bundle.getSerializable("data");
    Log.e("Array is",""+ABC); 
```

但我收到 `java.lang.NullPointerException`错误消息..

在不使用“ **静态**”声明的情况下，我如何从捆绑包中获取这些值（在接收器活动中..）

让我从这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:16:02.193

step-1：编写一个单独的bean类并保存到另一个文件中

```
public class MyBean implements Serializable{
String[][] data = null;
public void set2DArray(String[][] data){
    this.data = data;
}
public String[][] get2DArray(){
    return data;
 }
} 
```

step-2：在调用活动中

```
 Intent intent = new Intent(this, Second.class);

   String data[][] = new String[][] {{"1","kumar"},{"2","sona"},{"3","kora"},{"1","pavan"},{"2","kumar"},{"3","kora333"}};
    MyBean bean = new MyBean();
    bean.set2DArray(data);
    Bundle b = new Bundle();
    b.putSerializable("mybean", bean);
    intent.putExtra("obj", b);
    startActivity(intent); 
```

step-3：在调用者活动中

```
 Bundle b = getIntent().getBundleExtra("obj");
       MyBean dData = (MyBean) b.getSerializable("mybean");
       String[][] str =dData.get2DArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:18:36.447

不是一个真正的答案，而是一个尝试：

如果您尝试：

```
 Intent intent = getIntent();
    int a = intent.getIntExtra("albumid"); //if Your value is an int, otherwise use String
                                           //getStringExtra or whatever Your value is 
```

# php - 如何在 Mage_Adminhtml_Block_Sales_Order_Create_Shipping_Method_Form 类中获取订单 ID？

> ID：15022781
> 
> 赞同：0
> 
> 时间：2013-02-22T11:08:47.247
> 
> 标签：php, magento

如何在课堂上获取订单 ID `Mage_Adminhtml_Block_Sales_Order_Create_Shipping_Method_Form`？

我尝试了很多方法，例如`$this->getQuote->getId();`，`$this->getOrder->getId();`等等……但没有用。我是 magento 的新手，对它的基于 zend 的模块结构非常陌生。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:01:47.257

您可以通过以下方式获取订单 ID：

```
$this->getQuote()->getOrder()->getId(); 
```

# android - 如何在android中存储数据？

> ID：15022782
> 
> 赞同：0
> 
> 时间：2013-02-22T11:08:50.633
> 
> 标签：android

我正在尝试将从服务器收到的一些数据存储到我的 android 项目中的文件中。但我无法做到这一点..我使用了下面显示的以下代码..请帮帮我。谢谢。

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

它给出的错误是“内容无法解析为变量”。我导入了android.content ..然后它给所有3行称为“未处理的异常类型FileNotFoundException”的错误但我已经创建了那个文件..问题是我不知道我保留项目的哪个文件夹那个文件？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:13:33.117

在 Android 中允许使用 SharedPreference 或 Sqlite DB 文件写入两种方式来保存数据，这是不可取的。

对于你的问题 1\. Manifest 应该有写权限。

如果不是，请发送代码.. 它非常基本

我的建议是 SharedPreference 给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:13:53.940

**-**这里最常见的错误是您**没有**提供`permission to wite external storage`in`AndroidManifest.xml`文件。

**-**请将此包含在您的清单文件中

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:15:14.333

采用

```
File root = context.getFilesDir();

File file = new File(root, fileName);
fos = new FileOutputStream(file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:17:09.513

如果仍未解决您的问题，请首先检查 Kumar 建议的清单权限，然后查看以下[链接](http://chrisrisner.com/31-Days-of-Android--Day-23%E2%80%93Writing-and-Reading-Files)以获取帮助

# database - WinRT SQLite 加密

> ID：15022783
> 
> 赞同：5
> 
> 时间：2013-02-22T11:08:53.053
> 
> 标签：database, sqlite, windows-runtime, windows-store

我正在构建一个使用 SQLite 进行数据存储的 Windows Store 应用程序。我发现，可以通过用户的本地文件夹轻松访问数据库（实际上所有应用程序都公开了所有数据）。有没有办法至少弱保护数据库不被访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:11:25.220

你需要看看 ProtectedData 类

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.dataprotection.dataprotectionprovider.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.dataprotection.dataprotectionprovider.aspx)

它公开了易于使用的保护/取消保护方法，可用于在应用程序级别加密/解密。在写入数据库之前加密数据并在使用之前取消加密

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T18:17:00.230

我也在寻找相同的解决方案，并在[http://sqlite-crypt.com/download.htm找到了 sqlite-crypt](http://sqlite-crypt.com/download.htm)

我不知道这一个是否足够好。有一个试用版将密码短语限制为 6 个字符并将其作为纯文本存储在标题中。如果您想要完整的数据保护，它将不适合。但是为了测试，也许值得一试。由于我仍在项目的服务器端工作，因此我还没有机会对其进行测试。我会在将来测试时更新它。

编辑：好的。我已经测试了试用版，它与 codeplex 上的 SqliteWinRT 包装器的修改版本配合得很好。请注意，试用版的密码短语限制为 5-6 个字符，并且此阶段短语以纯文本形式存储，而且它是 x86 编译的二进制文件，这意味着它不适用于需要 ARM 支持的实际产品。您必须购买二进制文件才能获得生产就绪的二进制文件。

# c++ - 如何确定浮动应该在哪个 bin 中？C++

> ID：15022791
> 
> 赞同：-3
> 
> 时间：2013-02-22T11:09:18.793
> 
> 标签：c++, arrays, conditional

我有一个浮点数组`Float_t xbins[41]`，它定义了 40 个容器，即浮点数范围。例如，如果 .`y`在 bin 7 中`y > xbins[7] && !(y > xbins[8])`。

在没有 40 个 if 语句的情况下，如何确定给定浮点数应该属于哪个 bin？

请用 C++ 回答，因为我不会说其他语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:11:04.687

如果数组已排序，则执行二进制搜索以找到正确的 bin。您需要组合`std::sort`（如果未排序），然后是`std::lower_bound`, 来定位。您需要确保`operator<`正确实施`Float_t`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:35:23.437

事实证明，这些箱不是均匀间隔的，而是具有整数范围，可能最快的方法是有一个（反向）查找表，该表显然有大约 100 个条目。基本上需要对下限和上限进行两次比较。

如果使用公式导出数组边界，则可以编写一个优于 LUT 方法的逆公式。

对于一般情况，二进制搜索是一种方式——甚至可以通过进行线性插值而不是将范围精确地细分为一半来改进一点。与二进制搜索的 O(logn) 相比，速度（如果数据不是病态的）将是 O(loglogn)。

# c++ - 为什么重置返回无效？

> ID：15022795
> 
> 赞同：0
> 
> 时间：2013-02-22T11:09:44.523
> 
> 标签：c++, reset, smart-pointers

所有的return[`reset`函数](http://en.cppreference.com/w/cpp/memory/unique_ptr/reset)实际上也可以返回对对象本身的引用，因为如果我将智能指针重置为某个东西，我很有可能会使用它。（[也许是可疑的例子。](https://stackoverflow.com/q/15022085/321013)）`shared_ptr, auto_ptr, unique_ptr, boost::scoped_ptr``void`

也就是说，不能重置定义为

```
unique_ptr& reset( pointer ptr = pointer() ); 
```

代替

```
void reset( pointer ptr = pointer() ); 
```

?

注意：本质上`reset`，这实际上是一个“作业”，应该`*this*`在最后返回，就像`operator=`已经做的那样。（这不是关于返回旧值或类似的东西。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:03:13.913

`Boost`图书馆经过审查过程。API 之所以如此，是因为那次审查。您的选择是编写适配器类模板或您自己的共享指针类模板。由于`boost`代码通常很重，后一种选择可能不是一个坏主意。然后，您将完全控制 API。

# android - jQuery移动网页走出手机屏幕

> ID：15022796
> 
> 赞同：0
> 
> 时间：2013-02-22T11:09:46.530
> 
> 标签：android, cordova, jquery-mobile, mobile, phonegap-build

实际上，我正在使用 jQuery mobile 开发一个 phonegap android 应用程序，其中我设计了一个页面，该页面将退出模拟器和设备屏幕。请帮助我搜索但不了解如何将其保留在手机的范围内。

```
<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>

<body>

    <div data-role="page" id="device1">
        <div data-role="header" style="text-align: center;">Message one</div>
        <div data-role="content">
            <table width="100%" cellpadding="5" cellspacing="0" border="0">
                <tr>
                    <td align="left">InfodeepIndians</td>

                    <td align="right" colspan="2">3 Minutes ago</td>
                </tr>

                <tr>
                    <td colspan="3" align="justify">Samsung pioneered the trend of
                        a new breed of devices, now more commonly known as
                        'phablets',smartphones that are (almost) nearing tablets in size.</td>
                </tr>
                <tr>
                    <td align="left">By panel.</td>
                    <td align="center">21.12%</td>
                    <td align="right">21 / 30</td>
                </tr>
                <tr>
                    <td align="left" col><input type=text></td>
                    <td align="center"><input type=text></td>
                    <td align="right"><input type=text></td>
                </tr>
                <tr>
                    <td align="left" col><input type=button value="Nos Limit"></td>
                    <td align="center"><input type=button value="% delivery"></td>
                    <td align="right"><input type="button" value="% match"></td>
                </tr>
            </table>

        </div>
        <div data-role="footer" style="text-align: center;">@Copyrights</div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:47:07.540

我还没有编译代码，但你能把 jquery 版本改成 jquery-1.7.1.min.js，Jquery 9 有很多变化。如果正确请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:07:49.700

用 jQuery 灵活网格替换您的表格。

您可以使用当前的网格实现，它看起来像这样：http: [//jsfiddle.net/Gajotres/xftPB/](http://jsfiddle.net/Gajotres/xftPB/)

```
<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>

<body>

    <div data-role="page" id="device1">
        <div data-role="header" style="text-align: center;">Message one</div>
        <div data-role="content">
            <div class="ui-grid-b">
                <div class="ui-block-a">InfodeepIndians</div>
                <div class="ui-block-b"></div>
                <div class="ui-block-c" style="text-align: right;">3 Minutes ago</div>
            </div><!-- /grid-b -->
            <p style="text-align:justify;">Samsung pioneered the trend of
                        a new breed of devices, now more commonly known as
                        'phablets',smartphones that are (almost) nearing tablets in size.</p>
            <div class="ui-grid-b">
                <div class="ui-block-a">By panel.</div>
                <div class="ui-block-b">21.12%</div>
                <div class="ui-block-c">21 / 30</div>
            </div><!-- /grid-b -->            
            <div class="ui-grid-b">
                <div class="ui-block-a"><input type="text"></div>
                <div class="ui-block-b"><input type="text"></div>
                <div class="ui-block-c"><input type="text"></div>
            </div><!-- /grid-b -->
            <div class="ui-grid-b">
                <div class="ui-block-a"><input type=button value="Nos Limit"></div>
                <div class="ui-block-b"><input type=button value="% delivery"></div>
                <div class="ui-block-c"><input type="button" value="% match"></div>
            </div><!-- /grid-b -->            
        </div>
        <div data-role="footer" style="text-align: center;">@Copyrights</div>
    </div>
</body>
</html> 
```

如果您需要更好的网格灵活性，请使用 jQuery Mobile 的第 3 方网格实现：http: [//jeromeetienne.github.com/jquery-mobile-960/](http://jeromeetienne.github.com/jquery-mobile-960/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:10:20.150

使用[Grids](http://view.jquerymobile.com/1.3.0/docs/widgets/grids/)比`tables`在 Jquery Mobile 中使用更可靠。

`ui-grid-b`由 3 列组成。

这是一个例子

```
<div class="ui-grid-b">
<!-- First row-->
      <div class="ui-block-a"><input type=text></div>
      <div class="ui-block-b"><input type=text></div>
      <div class="ui-block-c"><input type=text></div>
<!-- Second row-->
      <div class="ui-block-a"><input type=button value="Nos Limit"></div>
      <div class="ui-block-b"><input type=button value="% delivery"></div>
      <div class="ui-block-c"><input type="button" value="% match"></div>
</div> 
```

JSfiddle：[网格](http://jsfiddle.net/tJtbT/1/)

# android - sendMultipartTextMessage 并监控发送和接收

> ID：15022797
> 
> 赞同：5
> 
> 时间：2013-02-22T11:09:46.497
> 
> 标签：android, android-intent, android-broadcast, smsmanager

我已经阅读了有关如何发送和接收多部分消息的多个主题。我已经实现了以下代码并且**它有效！**

```
 PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0);
      PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), 0);
        //---when the SMS has been sent---
        registerReceiver(SMSBroadcastReceiver1, new IntentFilter(SENT));
        //---when the SMS has been delivered---
        registerReceiver(SMSBroadcastReceiver2, new IntentFilter(DELIVERED));    

    SmsManager smsManager = SmsManager.getDefault();
    ArrayList<String> parts = smsManager.divideMessage(smsToSend);

    ArrayList<PendingIntent> sentList = new ArrayList<PendingIntent>();
    ArrayList<PendingIntent> deliveredList = new ArrayList<PendingIntent>();
    for (int i = 0; i < parts.size(); i++) {
        sentList.add(sentPI);
        deliveredList.add(deliveredPI);
    }

    //smsManager.sendTextMessage(phoneNumber, null, smsToSend, sentPI, deliveredPI);
    smsManager.sendMultipartTextMessage(phoneNumber, null, parts, sentList, deliveredList); 
```

我有一个注册的 SMSBroadcastReceiver2 和 SMSBroadcastReceiver1。

让我担心的是：

我有一个`PendingIntent`sentPi 和`deliveredPi`，它是用`SMSBroadcastReceiver1`and注册的`SMSBroadcastReceiver2`。

然后我将它们多次放入 ArrayList 中，具体取决于消息的长度。

> 这是一件好事吗？或者我应该对消息的每个部分有不同的意图和接收者。

接收器什么时候在我的代码中触发？我注意到它只在发送消息和接收消息时触发一次（我将它们编码为在那些时刻显示 Toast 消息），无论消息有多长。是在第一部分交付时还是最后...？

# mysql - Hibernate JPA 是否支持 mysql InnoDB 和 MyISAM 引擎

> ID：15022799
> 
> 赞同：1
> 
> 时间：2013-02-22T11:09:47.327
> 
> 标签：mysql, hibernate, jpa

我是否需要以不同的方式注释 java 域类。我有两张表，一张是用 InnoDB 创建的，另一张是用 MyISAM 创建的。要求就像我无法使用 InnoDB 创建两者。我已经使用 JPA 创建了他们的域 java 类。现在我不确定，我的 java 代码是否能正常工作，因为它在 InnoDB 表的情况下工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:14:42.093

> 我是否需要以不同的方式注释 java 域类。

不，您无需更改 java 类。据我所知，如果数据库被更改，对 java 类没有影响，它们保持不变，只有配置文件被更改，如 url、方言、用户名和密码。在您的情况下，如果您将数据库引擎从 InnoDb 更改为 MyISAM，则不需要从 java 端进行任何更改。虽然 MyIsam 不支持交易，但您必须注意您的交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:53:51.720

通常它应该在没有任何变化的情况下工作。更重要的是，正确完成 JPA 映射，您甚至可以切换到完全不同的 DBMS，它也应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:23:30.097

相同的实体将适用于 InnoDB 和 MyISAM，这意味着您不需要更改任何注释。底层数据库细节对你的持久层代码是透明的，这就是 JPA 提供者所做的。

顺便说一句，题“Does JPA XXX implementation support...”更有意义。

# r - 使用 stargazer 和 coxph 时出错 - 生存数据

> ID：15022800
> 
> 赞同：2
> 
> 时间：2013-02-22T11:09:48.377
> 
> 标签：r, latex, survival-analysis

尝试`stargazer::stargazer`与 coxph (Survival) 一起使用时出现以下错误：

```
> summary(firm.survcox)
> stargazer(firm.survcox) 
> firm.survcox #only partial results are included for brevity 
Call: coxph(formula = Surv(Duration, Event, type = "right") ~ Innovation + Avg_Wage) 
coef exp(coef) se(coef) z p 
Innovation -0.87680 0.4161 0.008040 -109.051 0.0e+00 
Prior_Experience:Age -0.01297 0.9871 0.004174 -3.107 1.9e-03 
Likelihood ratio test=131885 on 23 df, p=0 n= 535416, 
number of events= 203037 (1060020 observations deleted due to missingness) 

Error in .get.standard.errors.1(object.name, user.given) : 
  subscript out of bounds 
```

模型中的变量是企业级、行业级和区域级的，并且存在一个交互项。我尝试仅在一个变量（例如创新）上运行模型，我得到相同的错误消息。行名为 NULL。

## 更新的问题和响应：

很抱歉造成混乱。我没有意识到我可以编辑原始问题。下面是在一个变量上运行的模型 - 创新，产生了相同的错误）。

```
Call: coxph(formula = Surv(Duration, Event, type = "right") ~ Innovation) 
coef exp(coef) se(coef) z p 
Innovation -0.87680 0.4161 0.008040 -109.051 0.0e+00 
Likelihood ratio test=131885 on 23 df, p=0 n= 535416, 
number of events= 203037 (1060020 observations deleted due to missingness) 

stargazer(firm.survcox)
Error in .get.standard.errors.1(object.name, user.given) : 
  subscript out of bounds 
```

## Cox 模型的结构

```
str(firm.survcox)

    List of 18
    $ coefficients     : Named num -0.772
    ..- attr(*, "names")= chr "Innovation"
    $ var              : num [1, 1] 3.91e-05
    $ loglik           : num [1:2] -5583174 -5573640
    $ score            : num 16015
    $ iter             : int 4
    $ linear.predictors: num [1:1595436] 0.0807 0.0807 0.0807 -0.6915 0.0807 ...
    $ residuals        : Named num [1:1595436] 0.925 0.976 -0.516 0.888 0.976 ...
     ..- attr(*, "names")= chr [1:1595436] "1" "2" "3" "4" ...
    $ means            : Named num 0.104
      ..- attr(*, "names")= chr "Innovation"
    $ concordance      : Named num [1:5] 5.20e+10 1.97e+10 3.67e+11 1.14e+10 2.49e+08
    ..- attr(*, "names")= chr [1:5] "concordant" "discordant" "tied.risk" "tied.time"..
   $ method           : chr "efron"
   $ n                : int 1595436
   $ nevent           : num 404033
   $ terms            :Classes 'terms', 'formula' length 3 Surv(Duration, Event, type =  
       "right") ~ Innovation
    .. ..- attr(*, "variables")= language list(Surv(Duration, Event, type = "right"),      
       Innovation)
     .. ..- attr(*, "factors")= int [1:2, 1] 0 1
     .. .. ..- attr(*, "dimnames")=List of 2
     .. .. .. ..$ : chr [1:2] "Surv(Duration, Event, type = \"right\")" "Innovation"
     .. .. .. ..$ : chr "Innovation"
     .. ..- attr(*, "term.labels")= chr "Innovation"
    .. ..- attr(*, "specials")=Dotted pair list of 3

    .. .. ..$ strata : NULL   .. .. ..$ cluster: NULL   .. .. ..$ tt     : NULL   ..-    
    attr(*, "order")= int 1   .. ..- attr(*, "intercept")= int 1   .. ..- attr(*, 
    "response")= int 1   .. ..- attr(*, ".Environment")=<environment: R_GlobalEnv>    .. ..- 

    attr(*, "predvars")= language list(Surv(Duration, Event, type = "right"), 
   Innovation)   .. ..- attr(*, "dataClasses")= Named chr [1:2] "nmatrix.2" "numeric"    
   .. .. ..- attr(*, "names")= chr [1:2] "Surv(Duration, Event, type = \"right\")" 
  "Innovation"  
   $ assign     :List of 1   ..$ Innovation: num 1  
   $ wald.test        : Named num 15249   ..- attr(*, "names")= chr "Innovation"  
   $ y                : Surv [1:1595436, 1:2]  2   1  10+  5   1  10+ 10+  6   8+  8+  
    ...   ..- attr(*, "dimnames")=List of 2   .. ..$ : chr [1:1595436] "1" "2" "3" "4"     
   $ : chr [1:2] "time" "status"   ..- attr(*, "type")= chr "right"  $ formula          
     :Class 'formula' length 3 Surv(Duration, Event, type = "right") ~ Innovation   ..    
   attr(*, ".Environment")=<environment: R_GlobalEnv>   $ call             : language 
   coxph(formula = Surv(Duration, Event, type = "right") ~ Innovation)

    - attr(*, "class")= chr "coxph" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:27:26.343

在您的评论中发布的材料（我将其添加到问题中并按照您应该做的那样应用了代码块格式化功能）并没有真正的意义。列出的“Innovation”和“Prior_Experience:Age”系数与调用中的公式不匹配：“formula = Surv(Duration, Event, type = "right") ~ Innovation + Avg_Wage)”。沿途似乎对物体进行了一些破坏。

# python - Pycharm：代码完成没有给出建议

> ID：15022804
> 
> 赞同：15
> 
> 时间：2013-02-22T11:10:02.397
> 
> 标签：python, pycharm

假设我正在使用“请求”python 库。

```
req = requests.get("http://google.com") 
```

在此之后，如果我输入`req.`，我应该得到一个我可以访问的所有方法的列表。但由于某种原因我没有，即使我手动按 ctrl-space。

如果我在 ipython 中尝试这个，我会得到自动完成的建议。即使我通过 pycharm 中的内置 python 控制台尝试它，我也会得到建议。

为什么会这样？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-22T11:16:56.597

由于 Python 是一种动态类型语言，因此您需要确保它可以确定事物的类型，并正确检查系统上的库。尝试确保在您的代码中对象的类型很明显。

从 PyCharm 2.7 开始（当版本是数字时）的一种好方法是启用运行时类型检测 - PyCharm 在程序运行时（在调试时）挂钩到您的程序，并在使用变量时检查它们的类型。

您可以通过转到设置、转到“构建、执行、部署”部分，然后转到“Python 调试器”子部分并启用“收集运行时类型信息以获取代码洞察力”来启用此功能。

![PyCharm 的设置屏幕打开以显示相关设置。](../Images/7d51343d835090c544d50097a7eb0d74.png)

显然值得注意的是，这并不完美 - 如果您进行更改，在执行代码之前不会更新它，它只能告诉您它已经看到的值 - 您没有尝试过的其他代码路径可以设置其他类型。

您还可以使用包含有关参数和返回值类型的信息的 Epydoc 或 Sphinx 样式的文档字符串来“告诉”PyCharm。PyCharm 将使用这些来改进它的检查。

[从 Python 3 开始，Python 还获得了对函数注释的支持。根据PEP 484](https://www.python.org/dev/peps/pep-0484/)，这些可用于类型提示。有关更多信息，请参阅[`typing`](https://docs.python.org/3/library/typing.html)模块。这更正式，因此它也可以用于诸如[`mypy`](http://mypy-lang.org/)类型检查器之类的工具，该工具可以以编程方式检查这些类型的一致性，从而为 Python 提供 TypeScript 样式的可选静态类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T11:18:08.897

Python 是一种动态类型语言，这意味着“get”函数不声明其返回类型。当您在 IPython 或 PyCharm 控制台中输入代码时，代码实际上正在执行，并且可以在正在运行的解释器中检查对象实例并获取其方法列表。当您在 PyCharm 或任何其他 Python IDE 中输入代码时，它不会被执行，只能使用静态分析来推断方法的返回类型。这并非在所有情况下都是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-14T18:14:09.727

`dict`如果您动态填充它，PyCharm 不知道它包含什么。所以你必须`dict`事先提示 PyCharm 的键。[Prodict](https://github.com/ramazanpolat/prodict)正是这样做来提示 PyCharm，因此您可以完成代码。

首先，如果您希望能够访问响应对象，那么您必须获取一个 json 响应并将其转换为`dict`. 这是通过以下`.json()`方法实现的`requests`：

```
response = requests.get("https://some.restservice.com/user/1").json() 
```

好的，我们将它加载到一个`dict`对象中，现在您可以使用括号语法访问键：

```
print(response['name']) 
```

由于您要求自动完成代码，因此您当然需要向 PyCharm 提示`dict`. 如果您已经知道响应模式，则可以使用 Prodict 来提示 PyCharm：

```
class Response(Prodict):
    name: str
    price: float

response_dict = requests.get("https://some.restservice.com/user/1").json()

response = Response.from_dict(response_dict)
print(response.name)
print(response.price) 
```

在上面的代码中，`name`和`price`属性都是自动编译的。

如果您不知道响应的架构，那么您仍然可以使用点符号来访问`dict`如下属性：

```
response_dict = requests.get("https://some.restservice.com/user/1").json()
response = Prodict.from_dict(response_dict)
print(response.name) 
```

但由于 PyCharm 无法知道架构是什么，因此无法完成代码。

更重要的是，Prodict 类直接派生自`dict`，所以你也可以使用它`dict`。

这是 Prodict 存储库的屏幕截图，说明了代码完成：

[![产品代码完成](../Images/dd1d2a120a8da4a4d7abd11c7b70b82f.png)](https://raw.githubusercontent.com/ramazanpolat/prodict/master/auto-complete1.png)

**免责声明**：我是 Prodict 的作者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-26T19:34:44.647

这是一个老问题，但可能所有提供的答案都与 Sun 到参宿四的距离一样大（没有一个答案被接受，@user1265125 是一个在这里工作了 8 年并且比我更有信誉的人）。

碰巧的是，我刚刚遇到了与 OP 完全相同的问题，解决方案是：

**项目文件夹路径中某处的非 ASCII 字符**

说真的，PyCharm 开发人员...[doubleFacepalm]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-30T11:28:57.567

就我而言，解决方案是重置设置，其他一切都不适合我。“从主菜单中，选择文件 | 管理 IDE 设置 | 恢复默认设置。或者，按两次 Shift 并键入恢复默认设置。”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-18T04:49:34.150

如果只会检测方法或变量，并且...写下它的一部分：文件->设置->编辑器->常规->代码完成在打开的窗口顶部，取消选中[马赫案例]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-26T11:22:54.163

我有一个类似的问题。仅建议了我已经使用过的函数，并且仅作为纯文本而不被识别为方法。

对我来说解决这个问题的是删除项目目录中的**/.idea文件夹。**（之后您将不得不再次设置您的运行配置）

# javascript - 添加并选择“假” 价值 I need to add a "fake" <option>to a <select>, that will be shown as the selected one, but that can't be selected in the dropdownmenu if the user want to change item. For example: I have a page that displays 10 frui ID：15022807 赞同：2 时间：2013-02-22T11:10:07.053 标签：javascript, html, html-select 回答 #1 赞同：2 时间：2013-02-22T11:17:31.323 我认为你需要在这里做的实际上是有一个包含所有这些值的可见选择，1kg、2kg 等，然后你有一个隐藏的选择，它将包含这些范围，比如 1-2kg 等（如果范围是固定的）。每次您从可见下拉列表中选择某些内容时，您都会将隐藏下拉列表的选定项目更改为所需范围。 回答 #2 赞同：1 时间：2013-02-22T11:25:38.220 听起来您想包含一系列权重。您可能需要考虑不同类型的输入，例如范围滑块。这是来自 jQuery UI 项目的示例。我并不是建议您使用 jQuery UI 本身，只是向您展示它的一种实现方式。 回答 #3 赞同：0 时间：2013-02-22T11:41:36.847 您可以使用<select multiple>并且每当有人选择多个选项时，您都会获得最大值和最小值并显示该间隔。 回答 #4 赞同：0 时间：2013-02-22T12:06:54.137 尝试这个： http://jsfiddle.net/4suwY/4/ 我看到的唯一问题是在选择单击此功能时丢失了值： $("#asd").mousedown(function () { $("#asd option[value='1-2kg']").remove().change(); });</select></option>

# vb.net - 用返回值做一些事情

> ID：15022809
> 
> 赞同：0
> 
> 时间：2013-02-22T11:10:19.667
> 
> 标签：vb.net

我写了一个函数，当你阅读它时，它会告诉你它的函数本身：

```
Public Function TestConnect()
    Dim verbinding As MySqlConnection
    Dim errStatus As String

    verbinding = New MySqlConnection()
    verbinding.ConnectionString = "server=" & vardbHost & "; port=" & vardbPort & "; uid=" & vardbUser & "; pwd=" & vardbPass & "; database=" & vardbName & ";"

    Try
        verbinding.Open()
        verbinding.Close()
        errStatus = 0
    Catch myerror As MySqlException
        verbinding.Dispose()
        verbinding.Close()
        errStatus = 1
    End Try

    Return errStatus
End Function 
```

现在我以我的主要形式调用这个函数，我想如果我使用 Try 然后捕获 1 或 0，那么我可以用它做点什么。（例如，显示带有错误消息的表单）但这似乎不起作用，我在 Google 上找不到任何适用于我的问题的内容。

任何人都可以向我解释为什么我如此愚蠢以及如何更好地理解如何处理返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:21:37.327

该函数将返回您的值，但您需要将该返回值分配给一个变量，然后在您的调用方法中使用它，例如：

```
Dim errStatus As Integer
errStatus = SQLHook.TestConnect()
If errStatus = 1 Then
    'Show the error form
End If 
```

或者更简单地说，直接测试返回值：

```
If SQLHook.TestConnect()= 1 Then
    'Show the error form
End If 
```

您还应该真正理清函数中键入的变量：

```
Public Function TestConnect() as Boolean
    Dim errStatus As Boolean
    Try
        errStatus = True
    Catch myerror As MySqlException
        errStatus = False
    End Try

    Return errStatus  
End Function 
```

或者更简单地说，不要打扰变量：

```
Public Function TestConnect() as Boolean

    Try
        ...
        Return True
    Catch myerror As MySqlException
        ...
        Return False
    End Try
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:15:39.153

不完全确定我理解这个问题，但你的意思是这样的吗？

```
Public Function TestConnect() As Int32
  ...
  Dim errStatus As Int32
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:26:31.713

```
Dim returnCode as Int32 = SQLHook.TestConnect()

MessageBox.show(
         If(returnCode = 1, "OK", "Error"), "AppName", MessageBoxButtons.OK,
         If(returnCode = 1, MessageBoxIcon.Information, MessageBoxIcon.Error)
       ) 
```

# ios - 使用 Telprompt:// 拨打电话（编辑消息）

> ID：15022815
> 
> 赞同：2
> 
> 时间：2013-02-22T11:10:32.207
> 
> 标签：ios, objective-c, call

我有一个非常简单的问题，也许很难回答。是否可以编辑使用“telprompt”时抛出的消息。

我的首要任务是我想打个电话，然后在那个电话之后我想返回应用程序本身而不是苹果手机应用程序。

但是当我使用 webView 或 telprompt 方法时，它会抛出一条消息。我想这是出于安全原因，这很好。但消息只显示一个电话号码和两个按钮。我想在此处添加名称或其他内容。

这可能吗？如何？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:17:57.210

你不能。时期。

（闲聊闲聊达到字符限制）

# java - 使类泛型有什么意义？

> ID：15022819
> 
> 赞同：5
> 
> 时间：2013-02-22T11:10:40.287
> 
> 标签：java, class, generics

当你有一个方法时，我明白声明它是通用的是有意义的，这样我就可以采用通用参数。像这样：

```
public <T> void function(T element) {
    // Some code...
} 
```

但是，如果我可以简单地将每个方法都声明为泛型，那么让整个类泛型的想法到底是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T11:14:30.253

好吧，不同之处在于，如果您尝试使类中的每个方法都成为泛型，那么您在说 firstGenericMethod 中使用的泛型类型可能是也可能不是相同的类型。我的意思是。

```
public <T> void firstGenMethod(...){

}

public <T> void secondGenMethod(...){

} 
```

**测试：**

```
 SomeClass ref = new SomeClass();
  ref.firstGenMethod("string");
  ref.secondGenMethod(123);//legal as this generic type is not related to the generic type which is used by firstGenMethod 
```

在上述情况下，这两种方法都没有相同的泛型类型。这取决于您如何调用它们。但是，如果您将类设为泛型，则该类型将应用于该类中的所有方法。

```
class Test<T>{

    public void firstGenMethod(T t){

    }

    public  void secondGenMethod(T t){

    }
} 
```

**测试：**

```
 Test<String> testingString = new Test<>();
   testingString.firstGenMethod("abc");
   testingString.firstGenMethod(123);// invalid as your Test class only expects String in this case 
```

您通常会在您希望该类的整个行为（方法）在同一类型上处理的地方使您的类成为通用类。最好的例子是**Java Collection Framework中的类**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T11:13:19.763

看看 Collection 类。举`List<T>`个例子。如果该类没有被声明为泛型，你将如何确保只有正确类的元素可以插入到列表中？你怎么知道你打电话时得到了什么`ArrayList.get(i)`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T11:15:03.383

准确地说，要确保这个类中的所有方法都适用于某种类型。

这通常用于“容器”类。如果您正在构建一个列表，并且将其设为通用，您希望确保添加元素​​、获取元素、迭代等......始终使用相同的类型。

正如您所提到的，这还允许您使用某种类型的实例变量，并有几种方法以连贯的方式使用该实例（可能返回它，影响它......）。

如果您有一个具有多种不同类型的“泛型”类，则可能表明您确实在一个中编写了两个泛型类......（尽管这可能是合法的事情。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:12:47.090

主要思想是为一个类型绑定类/方法。最好的例子是`Generics`编程语言中的概念。它是多态性的实际应用。
泛型类封装了不特定于特定数据类型的操作。泛型类最常见的用途是与链表、哈希表、堆栈、队列、树等集合一起使用，其中从集合中添加和删除项目等操作的执行方式几乎相同，无论数据类型如何存储。

对于大多数需要集合类的场景，推荐的方法是使用编程语言中提供的那些。
参考 oracle[文档](http://docs.oracle.com/javase/tutorial/java/generics/types.html)
**泛型类型是泛型类或接口，它在类型上进行参数化**

```
public class Box {
    private Object object;

    public void set(Object object) { this.object = object; }
    public Object get() { return object; }
} 
```

通常，您可以将其严格限制为

```
public class Box<T> {
    // T stands for "Type"
    private T t;

    public void set(T t) { this.t = t; }
    public T get() { return t; }
} 
```

我也建议你看看这个[教程](http://www.tutorialspoint.com/java/java_generics.htm)

# c - 如何在openGL中加载png图像并使用鼠标移动它？

> ID：15022830
> 
> 赞同：1
> 
> 时间：2013-02-22T11:11:27.913
> 
> 标签：c, opengl, glut

如何在 openGL 中加载图像？如何将图像数据转换为openGL可以理解的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:19:08.900

我将它分解为几个步骤：

1.  将文件内容读入内存
2.  将文件解码为所需的原始格式（RGB 或 RGBA）
3.  创建 OpenGL 纹理对象并将原始图像数据提供给 OpenGL
4.  构造具有适当纹理坐标和顶点位置的 OpenGL 图元。
5.  将纹理绑定到适当的纹理单元并使用采样器对象来使用纹理数据来生成最终颜色。

[6.利润！]

`SOIL_load_texture`如果要使用 SOIL 图像库，步骤 1、2 和 3 可以轻松更改为简单调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:16:22.713

首先，您必须将图像解码为 RGBA 数组。看这里：

[https://en.wikipedia.org/wiki/libpng](https://en.wikipedia.org/wiki/libpng)

然后您必须将其映射到 OpenGL 纹理并显示：

[http://nehe.gamedev.net/tutorial/texture_mapping/12038/](http://nehe.gamedev.net/tutorial/texture_mapping/12038/)

# wpf - 如何绑定到 Infragistics WPF TabItemEx 的关闭事件？

> ID：15022832
> 
> 赞同：0
> 
> 时间：2013-02-22T11:11:30.067
> 
> 标签：wpf, mvvm, tabs, command, infragistics

我正在从 MVVM 方式开发一个 WPF 项目。

我将 Observable Collection 绑定到 XamTabControl。如果我向 Observable Collection 添加一个新项目，则会生成一个新选项卡。但是如果我关闭选项卡，选项卡项目不会从 Observable 集合中删除。

如果我可以触发选项卡的关闭事件（或关闭事件），我可以手动执行此操作。但是这两个事件没有被触发。但是某些事件会被触发，例如 MouseUp。

```
<igWindows:XamTabControl 
 Height="198" 
 HorizontalAlignment="Left" 
 Margin="0,54,0,0" 
 ItemsSource="{Binding Tabs}"
 SelectedItem="{Binding SelectedTab}"
 Name="xamTabControl1" 
 VerticalAlignment="Top" 
 Width="651">

     <i:Interaction.Triggers>
           <i:EventTrigger EventName="Closing">
                <i:InvokeCommandAction Command="{Binding TabCloseCommand}" />
           </i:EventTrigger>
      </i:Interaction.Triggers>

     <igWindows:XamTabControl.ItemContainerStyle>
           <Style TargetType="igWindows:TabItemEx">
                <Setter Property="Header" Value="{Binding Header}"/>
                <Setter Property="CloseButtonVisibility" Value="{Binding CloseButtonVisibility}"/>
           </Style>
      </igWindows:XamTabControl.ItemContainerStyle>

     <igWindows:XamTabControl.ContentTemplate>
          <!-- this is the body of the TabItem template-->
          <DataTemplate>
                <TextBlock Text="{Binding Content}" />
          </DataTemplate>
      </igWindows:XamTabControl.ContentTemplate>

 </igWindows:XamTabControl> 
```

这是我的视图模型

```
private ObservableCollection<TabItem> tabs;
private TabItem selectedTab;
private ICommand tabCloseCommand;

public ObservableCollection<TabItem> Tabs
{
     get
     {
         return tabs;
     }
     set
     {
          tabs = value;
          NotifyPropertyChanged("Tabs");
     }
}

public TabItem SelectedTab
{
     get
     {
          return selectedTab;
     }
     set
     {
          selectedTab = value;
          NotifyPropertyChanged("SelectedTab");
     }
}

public ICommand TabCloseCommand
{
     get
     {
          if (tabCloseCommand == null)
          {
          tabCloseCommand = new RelayCommand(param => this.CloseTab(), null);
          }
          return tabCloseCommand;
      }
}

private void CloseTab()
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:12:11.810

这可能是因为`DataContext`运行 Closing 事件的对象是您的`TabItem`类，而不是包含`TabCloseCommand`

使用`ElementName`or`RelativeSource`将`Source`您的命令绑定设置为`TabControl.DataContext`第一个，它应该可以工作

```
<i:InvokeCommandAction Command="{Binding ElementName=xamTabControl1, 
                                         Path=DataContext.TabCloseCommand}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:55:32.500

您必须连接关闭事件的代码不起作用，因为 XamTabControl 上没有 Closing 或 Closed 事件，这是关联的对象。我不确定是否可以使用 EventTrigger 从 xamTabControl 附加到 TabItemEx 的事件。如果要在没有 EventTrigger 的情况下将处理程序添加到 XamTabControl，则应执行以下操作：

```
<igWindows:XamTabControl 
    Name="xamTabControl1" 
    AllowTabClosing="True" 
    igWindows:TabItemEx.Closed="OnTabClosed">

</igWindows:XamTabControl> 
```

您还可以在帮助中的“[删除关闭的选项卡](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=xamTabControl_Removing_a_Closed_Tab.html)”主题中查看详细示例。

# php - 获取类似 Tree mysql 的结果

> ID：15022839
> 
> 赞同：0
> 
> 时间：2013-02-22T11:11:59.180
> 
> 标签：php, mysql, left-join

你好我这里有一些代码

```
$query = mysql_query("SELECT   `categories`.`category_name` ,  `categories`.`id`, `subcategories`.`subcategory_name`, `subcategories`.`sub_id` 
FROM  `categories`  
LEFT JOIN  `subcategories` ON  `categories`.`id` =  `subcategories`.`category_id` ORDER BY category_name ");

while($row = mysql_fetch_assoc($query)){
$id = $row['id'];
$name = $row['category_name'];
$sub_name = $row['subcategory_name'];
echo "id--->",$id, " - ", $name, " ---> ", $sub_name, "<br />" ;
} 
```

我的结果是这个
id--->1 - Αθλητισμός ---> Οργανα Γυμναστικής
id--->1 - Αθλητισμός ---> Water Sports
id--->1 - Αθλητισμός ---> Πολεμικές Τέχνες
id-- ->1 - Αθλητισμός ---> Ιππασία - Ιππικοί Όμιλοι
id--->1 - Αθλητισμός ---> 网球俱乐部
--->1 - Αθλητισμός ---> Αθλητικά Έπαθτλα
id--->1 - Αθλητισμός --> Γήπεδα 5χ5 - Mundialito
id--->1 - Αθλητισμός ---> Χιονοδρομικά Κέντρα
id--->1 - Αθλητισμός ---> PaintBall - Χρωματοσφαίριση
id--->1 - Αθλητισμός ---> 健身俱乐部- Γυμναστήρια
id--->1 - Αθλητισμός ---> Αναρρριχητικά Πεδία
id--->1 - Αθλητισμός ---> Ποδήλατα
id--->1 - Αθλητισμός ---> Αθλητικά Είδη
id--->1 - Αθλητισμός ---> 高尔夫俱乐部 - Γήπεδα Γκολφ

我怎样才能让我的结果显示这样

*   Οργανα Γυμναστικής*   水上运动*   Πολεμικές Τέχνες

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:39:28.050

试试这个..

```
echo '<ul>';

$categoryName = FALSE;

while($row = mysql_fetch_assoc($query)){

  $id = $row['id'];
  $name = $row['category_name'];
  $sub_name = $row['subcategory_name'];

  if ( $categoryName != $name) {
     echo "$name";
  }

  echo "<li>$sub_name</li>";

  $categoryName = $name;
}
echo '</ul>'; 
```

# android - Google Maps Android API v2 和当前位置

> ID：15022843
> 
> 赞同：1
> 
> 时间：2013-02-22T11:12:13.560
> 
> 标签：android, maps, google-maps-android-api-2

我正在使用 JellyBean 4.2 并在我的设备上进行测试。

如何在单击 myLocationButton 时获取当前位置。

getMYLocation 在使用网络提供商时返回 null。

我正在使用 LocationManager 获取当前位置并参考 Google 文档 [https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)。

在单击 MyLocatiionButton 之后不会带来任何变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:50:33.163

您需要将 LocationSource 添加到地图片段。请参阅[此答案](https://stackoverflow.com/a/13753518/1103584)以获取离散示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:50:27.373

Use this code Id it does work.

```
private LocationManager locationManager;
private Location location;
private boolean hasGpsProvider, hasNetwrokProvider;

    public Location getLocation(Context mContext) {

        if (locationManager == null) {
            locationManager = (LocationManager) mContext
                    .getSystemService(Context.LOCATION_SERVICE);
        }

        hasGpsProvider = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
        hasNetwrokProvider = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        if (hasGpsProvider) {
            locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, 0, 100, locationListenerGps);
            location = locationManager
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            return location;
        }

        if (hasNetwrokProvider) {
            locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, 0, 100,
                    locationListenerNetwork);
            location = locationManager
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            return location;
        }

        return location;
    } 
```

And call

```
if (location != null) {
    lat = location.getLatitude();
    lng = location.getLongitude();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:14:54.493

您是否在清单中设置了所有权限？此外，您必须启用定位服务（状态栏中的 gps 图标是否显示？）。设备获取位置需要一些时间，因此请查看是否调用了 onLocationChanged。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T08:37:41.543

基本上你应该做的是调用 Google Directions API 接收道路方向坐标（许多 Latlng 点），然后在每个坐标点之间绘制一条折线。

您可以使用overview_polyline 或腿和步骤。

# geometry - 用delphi检查位置和合并多边形

> ID：15022844
> 
> 赞同：2
> 
> 时间：2013-02-22T11:12:20.493
> 
> 标签：geometry, polygons

在我的应用程序中，我有 2 个或更多多边形，一个多边形可以在其他的内部或外部（全部在内部或全部在外部）。我必须这样做：

1.  检查一个多边形是否在其他多边形的内部（所有内部没有交叉点）；
2.  如果点 1 为真“合并多边形”；

要了解我的“合并多边形”，请看图片：

![在此处输入图像描述](../Images/2fea14411b91c5914ace2fe3a3ec7f4b.png)

如您所见，有 2 个多边形：ABCDA 和 1-2-3-1，我需要找到 2 个点（ABCDA 一个点，1-2-3-1 一个点）然后连接 2 条线，新线不得与多边形线相交。

是否有关于此类问题的理论可以更快地找到最佳解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:54:44.100

**其他多边形中的多边形**

由于您的多边形要么全部在内部，要么全部在外部，因此可以简单地将其简化为测试多边形是在另一个多边形内部还是外部。这是一个众所周知的问题，有多种解决方案：[多边形中的点](http://en.wikipedia.org/wiki/Point_in_polygon)

**合并多边形**

您的问题没有唯一的解决方案。对我来说最明显的方法是找到两个角，每个多边形的一个角比任何其他对角更靠近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:36:26.560

To approach best performance you should compare different algorithms on your own data. I've compared some of Point-In-Polygon algorithms and I found that Ray-Casting provides best performance, [here's](http://erich.realtimerendering.com/ptinpoly/) a comparsion. You can find a well-written implementation of Ray-Casting algorithm [here](http://alienryderflex.com/polygon/).

That was fast and simple part, on next step you want to merge two polygons. If polygons were convex you could connect two vertices which were closer, but since you say that they may be concave (or even convex polygons with extra vertices on their edges) the closer corners won’t work. For example: ![enter image description here](../Images/ba2c52014ccd77357b998b32dde46f22.png)

You should select one vertex from each polygon that their connecting line doesn't intersect none of polygons' edges. To find two lines intersection you can do this:

```
function Zero(const Value: Double): Boolean;
const
  Epsilon = 1E-10;
begin
  Result := Abs(Value) < Epsilon;
end;

function IntersectLines(const X11, Y11, X12, Y12, X21, Y21, X22, Y22: Double;
  out X, Y: Double): Boolean;
var
  A1, B1, C1, A2, B2, C2, D: Double;
begin
  A1 := Y12 - Y11;
  B1 := X11 - X12;
  C1 := A1 * X11 + B1 * Y11;

  A2 := Y22 - Y21;
  B2 := X21 - X22;
  C2 := A2 * X21 + B2 * Y21;

  D := A1 * B2 - A2 * B1;
  if Zero(D) then
    Result := False // Lines are parallel
  else
  begin
    X = (B2 * C1 - B1 * C2) / D;
    Y = (A1 * C2 - A2 * C1) / D;
  end;
end; 
```

But notice that just finding an intersection doesn't mean that selected vertices are not proper, because we're working with a line segment, so the intersection should be inside the segment. To find that out you can check if the point is inside the bounding box of segment. For example in this illustration 1 and 2 are selected vertices and 3 is the intersection point of their crossing line with an edge, but 3 is not inside the covering bounding box of 1 and 2.

![enter image description here](../Images/9868794e5a32de87204442cb4d5a19d2.png)

You should notice that crossing line of each selected couple of vertices will cross at least two edges of each polygon inside the bounding box (edges that meet on selected vertices), so bounding-box shouldn't embrace it's boundaries.

After that you should divide the outer polygon from it's selected vertex and insert redirected vertices of inner polygon between them.

As a final word I should say: Yes! There're lots of theories about all of these, but you should find your own ones. As you said that one polygon is ALL inside the other, it means that they are generated systematically or even predefined like character boundaries. Then you may be able to change all discussed algorithms to reach a better performance for your own case.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T02:06:24.977

我们使用一种简单的蛮力方法来查找其中的任何点是否是多边形。

创建一个画布，用白色填充它并用蓝色绘制多边形。现在查看您感兴趣的任何点的像素颜色，以确定它是否在多边形内。

如果你想知道一个是否完全包含在另一个画布中，而不是创建第二个画布并在另一个画布上绘制一个，两者都是蓝色的，然后比较它们是否相同。

在计算上这不是最有效的，但它是完全准确的。

# hibernate - hibernate.cfg.xml 未找到错误

> ID：15022845
> 
> 赞同：-2
> 
> 时间：2013-02-22T11:12:20.533
> 
> 标签：hibernate

我正在使用 Eclipse 创建一个 Web 应用程序，并且正在使用休眠。

我一直收到这个错误： `org.hibernate.HibernateException: /hibernate.cfg.xml not found`。

我知道通常它与休眠文件的位置有关，但我将位置从`src`to`build/classes`和 to更改`webcontent/web-inf`为它们似乎都不起作用。

我查看了类路径文件，看起来类路径是 src 文件夹，也是用于工作的休眠模式，我没有更改文件位置或路径类文件内容的任何内容。

我只是尝试从休眠状态向数据库添加另一个表，现在即使在我删除了更改后它也不起作用。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:16:53.540

您应该使该`hibernate.cfg.xml`文件在应用程序将在其中运行的 VM 的类路径中可用。例如，在`WEB-INF/classes`.

你应该检查你的构建过程是如何输出你的类的。例如，如果`src`文件夹被编译成`WEB-INF/classes`，您可以将文件放在`src`. 或者，正如 Nim 已经指出的那样，`src/main/resources`例如，如果您使用的是 Maven。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:18:24.020

我更喜欢把它放进去`src/main/resources`，它会被复制到`/WEB-INF/classes`构建中。

# android - 调用 setImageResource 不在 res/drawable 中显示图像

> ID：15022847
> 
> 赞同：0
> 
> 时间：2013-02-22T11:12:29.010
> 
> 标签：android, android-listview, android-imageview

我有许多 jpeg 图像，`res/drawable`我正在尝试根据数据库行 ID 动态查找图像，并`ImageView`在“ListView”内部显示相应的图像。

下面是 ListView 每一行的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="5dip" >

   <!--  ListRow Left side Thumbnail image -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:background="@drawable/image_bg"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
           android:layout_height="50dip"/>

    </LinearLayout>

<!-- Title -->
<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/thumbnail"
    android:layout_toRightOf="@+id/thumbnail"
    android:textColor="#040404"
    android:typeface="sans"
    android:textSize="15dip"
    android:textStyle="bold"/>

<!-- Author -->
<TextView
    android:id="@+id/author"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/title"
    android:textColor="#343434"
    android:textSize="10dip"
    android:layout_marginTop="1dip"
    android:layout_toRightOf="@+id/thumbnail" />

 <!-- Rightend Arrow -->
 <ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/arrow"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"/> 
```

这是`ArrayAdapter`我试图将图像动态加载到`ImageView`由`R.id.list_image`.

```
public class TitleListingArrayAdapter extends ArrayAdapter<Title> {

    private List<Title> items;
    private Context context;

    public TitleListingArrayAdapter(Context context, int textViewResourceId, List<Title> items)  {
        super(context, textViewResourceId, items);
        this.items = items;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater)  context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.titlelisting_single_row, null);
        }
        Title item = items.get(position);
        if (item!= null) {
            TextView titleView = (TextView) view.findViewById(R.id.title);            
            if (titleView != null) {
                titleView.setText(item.getName());
            }
            TextView authorView = (TextView) view.findViewById(R.id.author);
            if (authorView != null) {
                authorView.setText(item.getAuthor());
            }
            ImageView iconView = (ImageView) view.findViewById(R.id.list_image);
            iconView.setImageResource(lookupResourceId(context, item.getID()));            
        }
        return view;
    }

    private int lookupResourceId(Context context, String id) {
        String resourceName =  "thumb_"+id+".jpeg";
        return context.getResources().getIdentifier(resourceName, "drawable", context.getPackageName());
    }
} 
```

谁能告诉我为什么图像没有正确加载以及如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:30:30.100

```
private int lookupResourceId(Context context, String id) {
        String resourceName =  "thumb_"+id;
        return context.getResources().getIdentifier(resourceName, "drawable", context.getPackageName());
    } 
```

尝试省略扩展名。

# android - Python telnet 在命令行中有效，但在脚本中无效

> ID：15022848
> 
> 赞同：0
> 
> 时间：2013-02-22T11:12:31.250
> 
> 标签：android, python, telnet

我正在编写一个 python 脚本来自动关闭一个 Android 模拟器。我曾经在 Linux 环境中工作，但我现在正在将代码迁移到 Windows。问题是，

```
$ adb emu kill 
```

在 Windows 上不起作用，所以我求助于制作一个远程登录到模拟器并杀死模拟器的 python 脚本。这是代码：

```
import telnetlib
host = "localhost"
port = "5554"

tn = telnetlib.Telnet(host,port)
tn.write("kill\n")
tn.close() 
```

我遇到的问题是当我输入时尝试运行此代码时它不起作用

> python killEmulator.py

“killEmulator.py”是代码的文件名。

但是当我在命令行上一一输入这个文件的行时，它可以工作并设法杀死模拟器。

```
import telnetlib
host = "localhost"
port = "5554"
tn = telnetlib.Telnet(host,port)
tn.write("kill\n")
tn.close() 
```

当我这样做时，它完美无缺。谁能告诉发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:24:29.460

我不知道这里的细节，但是当你打开一个 Telnet 会话时，服务器需要启动一个新的 shell 进程，并且在 shell 启动之前可能无法接受任何数据，这取决于服务器的实现。

解决您的问题的一个简单方法是添加`time.sleep(0.5)`before `tn.write("kill\n")`，让服务器有半秒钟的时间准备好。更优雅的方法是在编写任何内容之前等待提示，如下所示：

```
r = tn.read_until("$ ", 5)
assert "$ " in r, "Timeout waiting for prompt!"
tn.write("kill\n") 
```

# django - Django 身份验证问题 - user.save() 更改密码哈希

> ID：15022849
> 
> 赞同：1
> 
> 时间：2013-02-22T11:12:35.580
> 
> 标签：django, django-models, django-authentication

我在 Django 1.4.5 中遇到了一个奇怪的身份验证问题：

一旦我调用 user.save() 密码哈希更改并且没有成功检查指定的原始密码：

```
In [17]: user.check_password('test')
Out[17]: False

In [18]: user.set_password('test')

In [19]: user.check_password('test')
Out[19]: True

In [20]: user.save()

In [21]: user.check_password('test')
Out[21]: False 
```

密码使用 pbkdf2_sha256 散列器进行散列：

```
In [22]: user.password
Out[22]: 'pbkdf2_sha256$10000$Aj5RbYndelmz$j35cic6UBh/HWnD//7TMfGWEtt7j4+T6970lOezpc1U=' 
```

因此，即使在创建了超级用户之后：

```
python manage.py createsuperuser 
```

我无法使用指定的凭据登录。

**为什么 user.save() 会更改密码哈希，我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:49:24.563

好的，我找到了一些开发人员通过 pre_save 信号调用的代码。我修复了此代码中的一个错误，现在问题已解决。

# java - 无法将字符串参数传递给 HttpGet 构造函数，需要 URI

> ID：15022850
> 
> 赞同：0
> 
> 时间：2013-02-22T11:12:45.497
> 
> 标签：java, apache, constructor, http-get

我正在一个没有 java.net 包（因此没有 java.net.URI）的嵌入式平台上工作。我尝试使用 Apache 库创建一个 HttpClient，但是当我创建一个 HttpGet 对象并像这样传递一个 String 参数时

```
String request = "www.example.com";
HttpGet response = new HttpGet(request); 
```

我仍然得到

```
The type java.net.URI cannot be resolved. 
```

为什么我不能只使用`new HttpGet(String)`构造函数？

当我尝试从 String 创建 JSONObject 并且构造函数需要我也没有的 java.util.Map 时，也会发生同样的冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:19:19.310

```
String request = "www.example.com";
HttpGet response = new HttpGet();
resporse.setURI(new URI(request)); 
```

# python - 获取Python中绝对文件路径的目录路径

> ID：15022854
> 
> 赞同：45
> 
> 时间：2013-02-22T11:13:02.987
> 
> 标签：python, path

我想获取文件所在的目录。例如完整路径是：

```
fullpath = "/absolute/path/to/file"
# something like:
os.getdir(fullpath) # if this existed and behaved like I wanted, it would return "/absolute/path/to" 
```

我可以这样做：

```
dir = '/'.join(fullpath.split('/')[:-1]) 
```

但是上面的例子依赖于特定的目录分隔符，并不是很漂亮。有没有更好的办法？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-22T11:15:09.417

你正在寻找这个：

```
>>> import os.path
>>> fullpath = '/absolute/path/to/file'
>>> os.path.dirname(fullpath)
'/absolute/path/to' 
```

相关功能：

```
>>> os.path.basename(fullpath)
'file'
>>> os.path.split(fullpath)
('/absolute/path/to','file') 
```

# android - 从 IntentService 调用时，HttpURLConnection 返回 404

> ID：15022855
> 
> 赞同：1
> 
> 时间：2013-02-22T11:13:08.120
> 
> 标签：android

我正在尝试构建一个使用 REST Api 上传文件的 IntentService。

我能够从我的主 Activity 启动 IntentService，并且 IntentService 可以将消息传递回 Activity，因此我知道 IntentService 正在工作。

我的问题是当我运行此代码时：

```
@Override
protected void onHandleIntent(Intent intent) {      
    // do the uploading stuff       
    try {           
        URL url = new URL(this.url + fileName);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("PUT");
        conn.setDoOutput(true);

        BufferedInputStream buffInputStream = new BufferedInputStream(new FileInputStream(filePath));
        BufferedOutputStream buffOutputStream = new BufferedOutputStream(conn.getOutputStream());
        HttpUtils.copyBufferStream(buffInputStream, buffOutputStream);

        if(conn.getResponseCode() == HttpURLConnection.HTTP_OK){
            BufferedInputStream responseBufferedInput = new BufferedInputStream(conn.getInputStream());
            byte[] body = HttpUtils.readStream(responseBufferedInput);                          
            result = HttpUtils.convertBytesToString(body);              
            Log.e("Result:", result);
        }else{
            Log.e("conn.getResponseCode()", Integer.toString(conn.getResponseCode()));
        }       
    } catch (IOException e) {
        e.printStackTrace();
    }                                       
} 
```

在 IntentService 的 onHandleIntent 方法中，我总是得到 404（或在不检查 conn.getResponseCode() 时出现 FileNotFoundException）。

在我的主活动中调用完全相同的代码，上传文件并成功完成。

我不知道为什么会这样？有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:17:21.533

尝试打印您尝试打开的 URL，您可能会发现它有问题……也许只是缺少斜线；-)

404 是未找到的 HTTP 错误。表示该 URL 在该服务器上无效。

# c# - Telerik Tabstrip 中的动态内容加载

> ID：15022858
> 
> 赞同：0
> 
> 时间：2013-02-22T11:13:22.097
> 
> 标签：c#, asp.net-mvc-3, telerik

在我的应用程序中，我有一个名为“Collections”的实体，每个集合都有一个类型。我想将这些集合加载到标签条中。每个选项卡都是根据类型的数量动态生成的：

```
@{
  Html.Telerik().TabStrip()
      .Name("CollectionTabStrip")
      .HtmlAttributes(new {@class = "mainTabStrip"})
      .Items(tabstrip =>
      {
       foreach (var type in Model.MediaCollectionTypes)
         {
          tabstrip.Add()
          .Text(type.Name)
          .HtmlAttributes(new {@class = "TabStripLi-1"})
          .ContentHtmlAttributes(new {style = "width: 589px; min-height: 400px;"})
          .LoadContentFrom("Collections", "MediaManager", new {typeId = type.ID, mediaId = Model.MediaID});
          }
       })
       .SelectedIndex(0)
       .ClientEvents(c => c.OnContentLoad("onTabStripContentLoad"))
       .Render();

   } 
```

现在的问题是内容是在单击选项卡时加载的，但我需要在加载时全部`page/tabstrip`加载。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:41:00.853

您可以使用 tabstrip 的 .OnLoad("onLoad") 事件并调用 javascript 函数来加载您的内容。

参考：[http ://demos.telerik.com/aspnet-mvc/razor/tabstrip/clientsideevents](http://demos.telerik.com/aspnet-mvc/razor/tabstrip/clientsideevents)

# php - 在页面的 onload 事件上从另一个 php 页面调用 php 函数？

> ID：15022863
> 
> 赞同：0
> 
> 时间：2013-02-22T11:13:40.207
> 
> 标签：php, onload-event

例如，我在名为 phpFunctions 的 php 页面中描述的类中定义了一些函数。现在我想在另一个名为 phpCalling 的页面的 onload 事件上调用 phpFunctions 页面的任何函数。

一种方法是 body 标签的 onload 属性。

有没有其他方法可以做到这一点？

# javascript - Sencha 2.0 标题栏与选择所有范围区域重叠

> ID：15022864
> 
> 赞同：0
> 
> 时间：2013-02-22T11:13:43.513
> 
> 标签：javascript, css, ios6, webkit, sencha-touch-2

如果带有输入文本的编辑区域向上滚动，则 Sencha 2.0 标题栏与选择所有范围区域重叠，它在 IOS 6.1 safari (webkit) 上运行 ![这里](../Images/ac2e33e388a281b28fb50e0389325c51.png)

这是我们为新消息创建对话框定义视图的方式

```
{
xtype: 'panel',
name: 'createMsgPanel',
id:'createMsgPanel',
cls:'newMsg-panel',
width: 840,
top:0,
left: 100,
modal: true,
hideAnimation: 'fadeOut',  // slideOut
hideOnMaskTap: false,
hidden: true,
items: [
{
xtype:'panel',
id:'createMsgPanelDiv',
cls:'nativeScrollingCls',
layout: 'vbox',
items:[
{
    xtype: 'formpanel',
    scrollable: false,
    height: 170,
    name: 'headerForm',
    items:[{
 xtype : 'emailfield',
 name : 'SenderEmail',
 id : 'senderEmail',
 label : 'To:',
 labelWidth : 38,
 height:35
    }, {
 xtype : 'emailfield',
 name : 'Cc',
 id : 'cc',
 label : 'Cc:',
 labelWidth : 38,
 height: 35
    }, {
 xtype: 'emailfield',
 name: 'Bcc',
 id: 'bcc',
 label: 'Bcc:',
 labelWidth: 42,
 height: 35
    }, {
 xtype : 'textfield',
 name : 'Subject',
 id : 'subject',
 label : 'Subject:',
 labelWidth : 74,
 height: 35
    },
 {
     xtype: 'container',
     layout: 'hbox',
     name: 'AttachmentsOuter',
     items: [
  {
      xtype: 'label',
      html: 'Attachments:',
      name : 'AttachmentsLabel',
      style: 'font-weight: bold; font-size: .8em; margin: 3px 0px 0px 10px;',
      width : 110
  },
  {
      xtype : 'panel',
      cls: 'att',
      name : 'Attachments',
      label : 'Attachments:',
      labelWidth : 130,
      width: 700,
      style: 'font-size: .8em; margin-top:7px'
  },
  {
      xtype: 'container',
      style: 'display: none',
      name: 'AttachmentsValue'
  }
     ]
 }

    ]
},{
    xtype: 'container',
    name: 'emailEditAreaCt',
    id: 'emailEditAreaCt',
    flex: 1,
    html: '<textarea id="inputEdit" style="width:825px;height:180px"></textarea>'

}
]
},{
    xtype: 'titlebar',   // Here we are defining titlebar
    name: 'newMsgTBar',
    title: 'New Message',
    docked: 'top',
    items: [{
 text: 'Cancel',
 name: 'cancel',
 align: 'left',
 margin: '0 10 0 0'
    },{
 text: 'Send',
 name: 'send',
 align: 'right',
 disabled: 'true'
    },{
 html:'<input type="text" id="dummyEmailTextBox" style="width:20px;background-color:transparent;border:none;"/>',
 ui:"plain",
 style:'-webkit-box-shadow: none;height:0px;left:-230px'
    }]

},{
    xtype: 'toolbar',
    name: 'editorToolBar',
    docked: 'bottom',
    height:35,
    html: '<div class="newMsg-important" id="emailImpDiv" ><div class="newMsg-important-image"></div></div>' +
  '<div class="newMsg-important-low" id="emailLowImpDiv" ><div class="newMsg-important-low-image"></div></div>' +
  '<div id="inputEditPanel" style="width:769px;display:inline;float:left;"></div>'
}
]
} 
```

你会建议什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:42:14.153

`<input type='text'.../>`使用而不是 Sencha 的正确[textarea](http://docs.sencha.com/touch/2-1/#!/api/Ext.field.TextArea)有什么特别的原因吗？如果您使用普通表单字段，您可以使用这些字段定义一个字段集并将其添加到`vbox`带有停靠工具栏的布局中，这应该可以

# mysql - 如果查询返回 null mysql，count =0

> ID：15022866
> 
> 赞同：0
> 
> 时间：2013-02-22T11:13:44.803
> 
> 标签：mysql

我有 mysql 数据库。

我正在运行以下查询。

```
SELECT cluster,
       infra_properties.property_name property,
       count(*)
FROM   raw_alerts,
       infra_properties
WHERE  infra_properties.parent_group = raw_alerts.cluster
       AND cluster = 'abuse-content'
       AND infra_properties.property_name = 'BigBro'
       AND timestamp BETWEEN '2012-12-24 00:00:00' AND '2012-12-24 23:59:59'
GROUP  BY cluster; 
```

我的输出为空，但我的要求是计数=0。如下所述。

```
+---------------+----------+----------+
| cluster       | property | count(*) |
+---------------+----------+----------+
| abuse-content | BigBro   |    0     |
+---------------+----------+----------+
1 row in set (0.30 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:46:21.840

如果 2 个表上没有匹配的记录，则不会返回任何行。

您可能需要做的是有一个带有集群和属性列的额外表，然后执行以下操作：-

```
SELECT a.cluster, a.property, count(c.id)
    FROM SomeExtraTable a
    LEFT OUTER JOIN raw_alerts b ON a.cluster = b.cluster AND AND b.cluster = 'abuse-content'
    LEFT OUTER JOIN infra_properties c 
ON a.property = c.property 
AND c.parent_group = b.cluster
AND c.property_name = 'BigBro' 
AND c.timestamp BETWEEN '2012-12-24 00:00:00' AND '2012-12-24 23:59:59'
    GROUP  BY  a.cluster, a.property 
```

（我只是猜测时间戳列在哪个表上）

# animation - 沿着带有图像的弯曲路径

> ID：15022867
> 
> 赞同：2
> 
> 时间：2013-02-22T11:13:46.430
> 
> 标签：animation, windows-8, microsoft-metro, expression-blend

我正在尝试使用 Windows 应用商店应用程序中的图像跟随路径。我希望图像跟随该路径并在跟随它的同时旋转。想想在飞机上做曲线或类似的[事情](http://www.charlespetzold.com/silverlight/UnicycleMan/UnicycleMan.html)。

在 silverlight/wpf 的教程中，我发现了一些我在 windows 商店应用程序中没有的东西，例如：[DoubleAnimationUsingPath](http://msdn.microsoft.com/en-us/library/ms746981.aspx)或[MatrixAnimationUsingPath](http://www.charlespetzold.com/blog/2008/11/250534.html)甚至[PathListBox](http://www.microsoft.com/design/toolbox/tutorials/pathlistbox/motionpath.aspx)。

我也尝试在 Blend 中做那个动画（虽然我在 windows 世界的经验很小，但 blend 的经验更糟）但我什至不能做[Path -> Make Layout Path](http://www.microsoft.com/design/toolbox/tutorials/pathlistbox/motionpath.aspx)。

如何在 Windows Metro 应用程序中执行类似[独轮车动画的操作？](http://www.charlespetzold.com/silverlight/UnicycleMan/UnicycleMan.html)

**编辑**

我想使用路径，因为我想随机生成这些路径。手动混合关键帧适用于特定的受控路径。然而，随机生成这些关键帧似乎需要更多的工作，只需生成一个可以遵循的随机弧路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:21:27.360

我最终移植了 Petzold 解决方案（Hermit Dave 给出的解决方案，我试图避免）。

但是，我不得不做一些改变。

我将“xFormUnicycleMan”`MatrixTransform`作为以下属性的依赖属性传递`MatrixAnimationUsingPath`：

```
TargetElement="{Binding ElementName=xformUnicycleMan}" 
```

然后，在`OnCompositionTargetRendering`我得到它并修改了我需要使用以下内容的值：

```
MatrixTransform matrixTransform = this.TargetElement as MatrixTransform;
PropertyPath targetProperty = new PropertyPath("MatrixProperty");
PropertyInfo fieldInfo = 
    matrixTransform.GetType().GetRuntimeProperty(targetProperty.Path);  
DependencyProperty dependencyProp = 
    fieldInfo.GetValue(matrixTransform) as DependencyProperty; 
```

感谢@Miek 提供的帮助。

如果有人有更好的解决方案，我会很感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:28:47.593

Charles Petzold 在这里发布了他被黑的 MatrixAnimationUsingPath

[http://www.charlespetzold.com/blog/2008/11/250534.html](http://www.charlespetzold.com/blog/2008/11/250534.html)

下载源代码（zip 文件）并移植它

# ios - UITableview 部分删除时应用程序崩溃

> ID：15022868
> 
> 赞同：0
> 
> 时间：2013-02-22T11:13:48.237
> 
> 标签：ios, ipad, uitableview

我在我的 iPad 应用程序中实现了一个可扩展和可折叠的 UITableView。用户可以添加或删除一个部分。我正在删除位于部分标题上的按钮标签基础上的部分。如果我从最后一个到第一个删除部分，那么这很好，否则应用程序在第二次或第三次删除时崩溃。因为当我删除任何部分时，它不会刷新 UIButton 的标签。这是我的代码

```
-(UIView*)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section {

    /*
     Create the section header views lazily.
     */
    // delete button.
    delButton = [UIButton buttonWithType:UIButtonTypeCustom];
    delButton.frame = CGRectMake(600.0, 5.0, 35.0, 35.0);
    [delButton setImage:[UIImage imageNamed:@"trash.png"] forState:UIControlStateNormal];
    delButton.tag = section;
    [delButton addTarget:self action:@selector(deleteSectionHeader:) forControlEvents:UIControlEventTouchUpInside];
    Section *aSection=[sectionArray objectAtIndex:section];
    if (!aSection.sectionHeaderView) {
        aSection.sectionHeaderView = [[SectionHeaderView alloc] initWithFrame:CGRectMake(0.0, 0.0, subActivityTableView.bounds.size.width, HEADER_HEIGHT) title:aSection.sectionHeader section:section delegate:self];
        [aSection.sectionHeaderView addSubview:delButton];
    }

    return aSection.sectionHeaderView;
}
-(void)deleteSectionHeader:(UIButton*)sender{
    NSInteger section = sender.tag;
    [sectionArray removeObjectAtIndex:section];
    [subActivityTableView deleteSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationAutomatic];

    // reload sections to get the new titles and tags
    NSInteger sectionCount = [sectionArray count];
    NSIndexSet *indexes = [NSMutableIndexSet indexSetWithIndexesInRange:NSMakeRange(0, sectionCount)];
    [subActivityTableView reloadSections:indexes withRowAnimation:UITableViewRowAnimationNone];
[subActivityTableView reloadData];
} 
```

# php - 如何在主页上显示菜单而不是 Joomla 3 中的主页内容

> ID：15022874
> 
> 赞同：0
> 
> 时间：2013-02-22T11:14:12.430
> 
> 标签：php, joomla

我想在主页上显示菜单而不是 Joomla 3 中的内容。怎么做？

我的主页只是一种介绍页面，它有页眉（仅限徽标和标语行）、页脚和一个带有链接到内页的大按钮的菜单。所以我想显示菜单而不是主页内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:55:05.017

完成，使用 {loadposition position-name} 并添加而不是链接到主页的文章上的内容。创建了菜单类型的自定义模块，并在上述位置加载了该自定义模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:30:21.300

如果您的意思是将菜单作为页面上的主要项目，请参见此处： [http ://docs.joomla.org/How_do_you_put_a_module_inside_an_article%3F](http://docs.joomla.org/How_do_you_put_a_module_inside_an_article%3F)

其他考虑自定义主页模板？

您的问题不是特别清楚 - 但希望这会有所帮助！

# java - 报表模板动态选择解决方案

> ID：15022876
> 
> 赞同：0
> 
> 时间：2013-02-22T11:14:17.527
> 
> 标签：java, jsf-2

我的要求是这样的，

当我选择诸如**考试**之类的模板时，考试页面将生成具有考试字段（已尊重POJO的），并且选择**游戏**页面时，一个页面将与其字段生成，

我怎样才能实现这种类型的要求。主要目标是，bean 无需担心选择哪个模板。它是完全独立的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:18:23.537

我没有得到整个问题，但我会尽力提供帮助。
您可以`Template Method`为您的 bean 类使用设计模式，并且在您的 JSF 页面中，您可以调用抽象类方法。像这样的东西：

```
public abstract class AbstractBean {

    public void templateMethod(){
         //Same code for all children;
         foo();
         //Same code for all children;
    }

    protected abstract void foo();
}

public class Bean extends AbstractBean {

    protected void foo(){
        //Your specific code here;
    }
} 
```

然后，在您的 JSF 页面中，您可以调用`#{abstractBean.templateMethod()}`. 但我不确定如何将子类注入`#{abstractBean}`变量。

虽然，有一个 Facelet 标签可以通过另一种方式帮助您：`ui:param`. 看看这个：[http](http://www.oracle.com/technetwork/articles/java/facelets-454361.html) ://www.oracle.com/technetwork/articles/java/facelets-454361.html 。与前面的代码无关，这是另一种解决方案。我自己已经用过了。`ui:define`您可以`ui:param`在模板页面（然后你打电话`#{definedVariable.someMethod()}`我认为这些是标签，我不确定。

希望我能帮上忙。

# solr - Solr 分组空字段

> ID：15022878
> 
> 赞同：3
> 
> 时间：2013-02-22T11:14:19.690
> 
> 标签：solr, field, grouping

**编辑**

如果我没有很好地解释我的需求，我很抱歉。我会尽力给出更好的解释。

我所拥有的：数以百万计的文档有一个字段 X ，另一个字段 Y 和另一个不需要的字段 Z （因此它在某些文档中可以是空的，而在其他文档中则不是）。

我想要做的：搜索字段 X 等于某些内容的文档，并按字段 Z 对它们进行分组（以便每个字段 Z 值仅返回 1 个文档），但我希望包含字段 Z 为空的文档在结果中（全部），并按字段 Y 对结果进行排序（所以我不能将请求分成两个请求）。

我希望这更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:03:37.863

这是我能为我的问题找到的最佳答案（来自 solr 邮件列表用户）：

思路是使用字段Z的一个拷贝字段，在索引数据时，如果字段Z为空，则在拷贝字段中生成一个唯一值。并且在分组时，使用复制字段而不是字段Z。（如果只需要字段Z进行分组，则可以单独使用他没有复制字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:28:17.640

您可以使用`group.query`with`group.main`来实现这一点。

例如，下面的查询获取价格从 0 到 10 的所有文档，并按受欢迎程度对结果进行分组。设置`group.query=popularity:[* TO *]`确保流行存在。制作`group.main=true`确保 group.query 结果是主要结果。

`select?q=price:[0%20TO%20 10]&wt=json&group=true&group.field=popularity&group.query=popularity:[*%20TO%20*]&group.main=true`

参考[https://wiki.apache.org/solr/FieldCollapsing](https://wiki.apache.org/solr/FieldCollapsing)

**更新**：我看到以上不起作用。SO建议我编辑答案，而不是删除上面的答案并给出新答案:-)。

你不能做2个这样的查询吗？

“搜索字段 X 等于某些内容的文档，并按字段 Z 对它们进行分组（这样每个字段 Z 值仅返回 1 个文档）”

```
q=X:1&group=true&group.field=Z 
```

“我希望将字段 Z 为空的文档（全部）包含在结果中，并按字段 Y 对结果进行排序”

```
q=(X:1 AND -Z:[* TO *])&rows=SOME_LARGE_NUMBER&sort=Y asc 
```

# java - 如何编辑路径结构（jbehave，maven）

> ID：15022882
> 
> 赞同：1
> 
> 时间：2013-02-22T11:14:27.207
> 
> 标签：java, eclipse, maven, jbehave

求助，我改了项目文件夹结构然后不运行测试了。如何让 Maven 运行我的文件夹结构，而不是按标准？我使用 IDE eclipse、Thucydides-JBehave 原型、maven。这是我的登录 ide：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Sample Thucydides project 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ Test_framework 
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Test_framework\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ Test_framework ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @     
Test_framework ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Test_framework\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @  
Test_framework ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.11:test (default-test) @ Test_framework ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ Test_framework ---
[INFO] Building jar: C:\Test_framework\target\Test_framework-1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-failsafe-plugin:2.11:integration-test (default) @ Test_framework ---
[INFO] No tests to run.
[INFO] Failsafe report directory: C:\Test_framework\target\failsafe-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[WARNING] File encoding has not been set, using platform encoding Cp1251, i.e. build   
is platform dependent!
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.382s
[INFO] Finished at: Fri Feb 22 12:56:14 EET 2013
[INFO] Final Memory: 13M/175M
[INFO] ------------------------------------------------------------------------ 
```

这是项目的结构：

```
Progect|
       |Pages|
       |     |HomePage.java
       |     |CategoryPage.java
       |Steps|
       |     |UserSteps.java
       |Story|
       |     |SomeTest.story
       |Tests|
       |     |SomeTest.java
       |JRE System Library [J2SE-1.5]
       |Maven Dependencies
       |pom.xml 
```

# android - 带有标题和内容的 android-menudrawer

> ID：15022883
> 
> 赞同：1
> 
> 时间：2013-02-22T11:14:28.603
> 
> 标签：android, layout, slidingmenu

我正在使用simonvt 的[Android-](https://github.com/SimonVT/android-menudrawer) menudrawer ...

在我的项目中，我们需要一个直接在标题下方开始的顶部菜单....

现在我能够获得这个结构：

*   ->（操作栏）
*   ->（菜单抽屉）
*   ->（内容）

除了我不会使用 ActionBar ......因为我需要使用带有背景的标题布局和热点映射的动作......例如这样......：

[http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/](http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/)

有没有办法在这样组成的活动中使用 menudrawer：

*   ->（标题）
*   ->（菜单抽屉）
*   ->（内容）

?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:48:44.023

是的，使用这个库：[https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

有了这个，您可以在没有 SherlockactionBar 的情况下使用滑动菜单。

要创建标头，您可以使用[https://github.com/commonsguy/cwac-merge](https://github.com/commonsguy/cwac-merge)

有了这个，您可以创建一个自定义标题并与内容合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:00:31.973

您可以通过 xml 使用 menudrawer，甚至还有一个[示例](https://github.com/SimonVT/android-menudrawer/blob/master/samples/res/layout/activity_layoutsample.xml)。然后，您只需创建一个在抽屉上方有一个标题的布局。

# css - 不懂@font-face 覆盖效果

> ID：15022887
> 
> 赞同：1
> 
> 时间：2013-02-22T11:14:36.217
> 
> 标签：css, font-face, unicode-range

[http://24ways.org/2011/creating-custom-font-stacks-with-unicode-range/](http://24ways.org/2011/creating-custom-font-stacks-with-unicode-range/)

我找到了一篇关于`unicode-range`for`@font-face`规则的文章，并且 firefox 不支持该`unicode-range`属性。但是作者找到了一个解决方法，我不明白。

我不明白它应该如何工作。第二个（后备）规则`unicode-range`也使用 . 那么为什么要解决将 arial 字体应用于所有字体字符的问题呢？

以及为什么在第一个版本中（`unicode-range`没有后备规则）它应该起作用。我希望第二条规则每次都适用于所有浏览器？

> 我们可以利用 CSS 级联的规则来确保如果 `unicode-range`不支持我们得到一个合理的后备字体。`@font-face`理想的情况是，如果我们能够在没有实现 Unicode 范围的情况下使用第二条规则来覆盖它，那么我们能够跟进该规则。

```
@font-face {
    font-family: 'Ampersand';
    src: local('Baskerville'), local('Palatino'), local('Book Antiqua');
    unicode-range: U+26;
}
@font-face {
    /* Ampersand fallback font */
    font-family: 'Ampersand';
    src: local('Arial');
    unicode-range: U+270C;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:21:16.273

今天也看到了这篇文章。它“工作”如下：

Firefox 的错误行为是：当一个 unicode-range IS GIVEN 时，它被忽略并且字体被应用到所有字符。

因此，当使用 unicode-range 设置 2 倍 @font-face 时，使用第二个 @font-face，覆盖第一个 @font-face 'Ampersand'（CSS 这样做），并且 firefox 错误“需要care of" 将 Arial 应用于所有字符（因为给出了 unicode 范围）。对于整个 unicode 范围（在 Firefox 中），我们有 2 倍的 @font-face 用于 'Ampersand'。所以第二个是由 CSS 应用的。这就是它起作用的原因。

正确支持 unicode-range 的浏览器，对给定的 unicode-range 使用第一个 @font-face 声明，对给定的 unicode-range 使用第二个 @font-face - 而第二个 @font- 的 unicode-range face 指定了一个字符，几乎没有人使用过。这里的级联不会覆盖任何内容。

希望有帮助！（而且是对的。^^）

编辑¹：也许我应该补充一点：这会导致 Firefox 不显示“最好的可能与符号”，而是显示 Arial-与符号。所描述的整个解决方案是一个后备解决方案，包括对 Firefox 的特殊处理——不为 Firefox 启用 Unicode-Range-Ampersand-Trick。

EDIT²：也许我还应该补充一点，我刚刚发现，Opera 也不支持 unicode-range（还）。所以它不仅仅是火狐。

# javascript - 使用媒体查询添加类或其他属性

> ID：15022888
> 
> 赞同：13
> 
> 时间：2013-02-22T11:14:40.397
> 
> 标签：javascript, iphone, css, media-queries

我目前正在使用 CSS 媒体查询来定位一些中小型屏幕设备，如下所示：

```
@media screen and (min-device-width: 480px) {
  ...
}
@media screen and (min-device-width: 720px) {
  ...
} 
```

这可以按预期工作，我可以将样式应用于某些特定的选择器，但是.. 我想知道是否有一种方法可以根据媒体查询向选择器添加类或其他属性。

我的想法的例子：

```
@media screen and (min-device-width: 480px) {
  body { addClass('body-iphone') }
} 
```

有没有办法用 CSS 或者 JavaScript 来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T07:29:51.653

查看[Enquire.js](http://wicky.nillia.ms/enquire.js/)。用于处理媒体查询的轻量级纯 JavaScript 库。看起来很酷。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T07:32:53.567

它不能用纯 CSS 来完成。

看看 LESS 或 SASS。它们旨在使**使用**CSS 更加动态和灵活。

*   [http://lesscss.org](http://lesscss.org)
*   [http://sass-lang.com](http://sass-lang.com)

一旦你使用它们。你不能没有他们。

* * *

如果您想在某些分辨率上将现有的类选择器添加到正文。

### SASS

```
.some-style { background-color:red; }

@media screen and (min-device-width: 480px) {
    body {
        @extend .some-style;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-22T05:39:41.703

JavaScript 解决方案

```
if (window.matchMedia("(min-device-width: 480px)").matches {
    // modify dom
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T12:56:49.303

看看 conditionizr 这可能是你要找的[http://conditionizr.com/](http://conditionizr.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-09T09:17:42.680

这也可以帮助[Modernizr](http://modernizr.com/) - 即使启用了 svg 或启用了其他功能，也可以检测到。

[http://modernizr.com/](http://modernizr.com/)

# c# - emxArray_real_T 到 C# 结构加上初始化

> ID：15022890
> 
> 赞同：0
> 
> 时间：2013-02-22T11:14:41.650
> 
> 标签：c#, matlab, pinvoke, matlab-coder

我正在尝试为此 C# 结构创建一个“构造函数”（包括初始尝试）：

```
[StructLayout(LayoutKind.Sequential)]
public struct emxArray_real_T
{
public IntPtr data;
public IntPtr size;
public int allocatedSize;
public int numDimensions;
[MarshalAs(UnmanagedType.U1)]
public bool canFreeData;

public emxArray_real_T(double[] cSharpData)
{
    var arraySize = Marshal.SizeOf(cSharpData[0]) * cSharpData.Length;
    this.data = Marshal.AllocHGlobal(arraySize);
    // ????
    numDimensions = 1;
    canFreeData = false;
}
} 
```

C 对应的 C 结构体如下所示：

```
typedef struct emxArray_real_T
{
   real_T *data;
   int32_T *size;
   int32_T allocated;
   int32_T numDimensions;
   boolean_T canFreeData;
} emxArray_real_T; 
```

并在[这里](http://www.mathworks.co.uk/help/fixedpoint/ug/c-code-interface-for-unbounded-arrays-and-structure-fields.html)解释。

期待任何评论/答案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:04:29.033

对于如何执行此操作，您有几个选择。您可以分配非托管内存。然后复制托管内存的内容。然后大概在您对本机代码的调用返回时将其复制回来。

由于您的示例设置`canFreeData`为`false`then 我猜您想以另一种方式进行。那就是将托管内存传递给本机代码。为此，您需要固定它以保护它免受 GC 移动。

为了使这些方法中的任何一种起作用，我认为您需要一个包装类来管理本机内存或固定。以下是我处理固定方法的方法：

```
[StructLayout(LayoutKind.Sequential)]
public struct emxArray_real_T
{
    public IntPtr data;
    public IntPtr size;
    public int allocatedSize;
    public int numDimensions;
    [MarshalAs(UnmanagedType.U1)]
    public bool canFreeData;
}

public class emxArray_real_T_Wrapper : IDisposable
{
    private emxArray_real_T value;
    private GCHandle dataHandle;
    private GCHandle sizeHandle;

    public emxArray_real_T Value {
        get { return value; } 
    }

    public emxArray_real_T_Wrapper(double[] data)
    {
        dataHandle = GCHandle.Alloc(data, GCHandleType.Pinned);
        value.data = dataHandle.AddrOfPinnedObject();
        sizeHandle = GCHandle.Alloc(new int[] { data.Length }, GCHandleType.Pinned);
        value.size = sizeHandle.AddrOfPinnedObject();
        value.allocatedSize = data.Length;
        value.numDimensions = 1;
        value.canFreeData = false;
    }

    public void Dispose()
    {
        dataHandle.Free();
        sizeHandle.Free();
        GC.SuppressFinalize(this);
    }

    ~emxArray_real_T_Wrapper()
    {
        Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-18T12:38:14.917

代码：

```
[StructLayout(LayoutKind.Sequential)]
public struct emxArray_real_T
{
    public IntPtr data;
    public IntPtr size;
    public int allocatedSize;
    public int numDimensions;
    [MarshalAs(UnmanagedType.U1)]
    public bool canFreeData;
}

public class emxArray_real_T_Wrapper : IDisposable
{
    private emxArray_real_T value;
    private GCHandle dataHandle;
    private GCHandle sizeHandle;

    public ref emxArray_real_T Value
    {
        get { return ref value; }
    }

    public double[] Data
    {
        get
        {
            double[] data = new double[value.allocatedSize];
            Marshal.Copy(value.data, data, 0, value.allocatedSize);
            return data;
        }
    }

    public emxArray_real_T_Wrapper(double[] data)
    {
        dataHandle = GCHandle.Alloc(data, GCHandleType.Pinned);
        value.data = dataHandle.AddrOfPinnedObject();
        sizeHandle = GCHandle.Alloc(new int[] { 1, data.Length }, GCHandleType.Pinned);
        value.size = sizeHandle.AddrOfPinnedObject();
        value.allocatedSize = data.Length;
        value.numDimensions = 1;
        value.canFreeData = false;
    }

    public void Dispose()
    {
        dataHandle.Free();
        sizeHandle.Free();
        GC.SuppressFinalize(this);
    }

    ~emxArray_real_T_Wrapper()
    {
        Dispose();
    } 
```

宣言：

```
[DllImport("TestFunc.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern void TestFunc(int n, double WnLow, double WnHigh, ref emxArray_real_T kernel); 
```

使用它：

```
public double[] CalculateBandPassCoefficients(int order, double FreqCutoffNormLow, double FreqCutoffNormHigh)
{
    double[] kernel = new double[order];
    using (emxArray_real_T_Wrapper wb = new emxArray_real_T_Wrapper(kernel))
    {
        TestFunc(order, FreqCutoffNormLow, FreqCutoffNormHigh, ref kernelWrapper.Value);

        kernel = kernelWrapper.Data;
    }
    return kernel;
} 
```

# android - 布局正常 ldpi 中的错误

> ID：15022894
> 
> 赞同：0
> 
> 时间：2013-02-22T11:14:46.480
> 
> 标签：android, layout, screen

我决定根据屏幕的尺寸和密度来分开布局。normal-ldpi 中的文件不起作用 small-ldpi 其他文件夹中的其他文件都很好。

**这是我的文件中的错误：**

```
Exception raised during rendering: Index: 1, Size: 1
Exception details are logged in Window > Show View > Error Log 
```

**在 ErrorLog 我有：**

```
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    at java.util.ArrayList.rangeCheck(Unknown Source)
    at java.util.ArrayList.get(Unknown Source)
    at com.android.ninepatch.NinePatchChunk.draw(NinePatchChunk.java:174)
    at com.android.ninepatch.NinePatchChunk.draw(NinePatchChunk.java:101)
    at android.graphics.NinePatch_Delegate$1.draw(NinePatch_Delegate.java:219)
    at com.android.layoutlib.bridge.impl.GcSnapshot.drawInLayer(GcSnapshot.java:608)
    at com.android.layoutlib.bridge.impl.GcSnapshot.draw(GcSnapshot.java:577)
    at android.graphics.NinePatch_Delegate.draw(NinePatch_Delegate.java:217)
    at android.graphics.NinePatch_Delegate.nativeDraw(NinePatch_Delegate.java:170)
    at android.graphics.NinePatch.nativeDraw(NinePatch.java)
    at android.graphics.NinePatch.draw(NinePatch.java:104)
    at android.graphics.drawable.NinePatchDrawable.draw(NinePatchDrawable.java:188)
    at android.view.View.draw(View.java:6725)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    at android.view.View.draw(View.java:6743)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    at android.view.View.draw(View.java:6743)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:466)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:320)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:440)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1545)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1302) 
```

我使用 API Level 8，它应该可以工作，不是吗？

**这里是上面报错对应的xml文件**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="10"
    android:orientation="vertical"
    android:background="@drawable/fond">

    <ImageView
         android:id="@+id/imageView9"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_weight="2"
         android:scaleType="fitXY"
         android:src="@drawable/bandeau" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="6"
        android:background="@drawable/fondshare"
        android:gravity="center"
        android:orientation="vertical"
        android:weightSum="3" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:weightSum="2"
            android:layout_gravity="center" 
            android:layout_marginTop="10dp"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/imageView5"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:adjustViewBounds="true"
                android:src="@drawable/cadre" />

            <ImageView
                android:id="@+id/imageView8"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:adjustViewBounds="true"
                android:src="@drawable/niceshot" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:weightSum="5"
            android:layout_gravity="center" 
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginBottom="10dp"
            android:orientation="vertical">

            <ImageView
                android:id="@+id/imageView7"
                android:layout_weight="1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:adjustViewBounds="true"
                android:src="@drawable/enterthename" />

            <EditText
                android:id="@+id/editText1"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginTop="4dp" />

            <ImageView
                android:id="@+id/imageView2"
                android:layout_weight="1"             
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginTop="4dp"
                android:adjustViewBounds="true"
                android:src="@drawable/sharefacebook" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_weight="1"             
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginTop="4dp"
                android:adjustViewBounds="true"
                android:src="@drawable/sharetwitter" />

            <ImageView
                android:id="@+id/imageView6"
                android:layout_weight="1"            
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginTop="4dp"
                android:adjustViewBounds="true"
                android:src="@drawable/sharefacebook" />

        </LinearLayout>
     </LinearLayout>

     <ImageView
         android:id="@+id/imageView10"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_weight="2"
         android:scaleType="fitEnd"
         android:src="@drawable/dim" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T11:24:53.350

我遇到了同样的问题，我通过更新我的 SDK 管理器解决了这个问题，即以前我在我的 Eclipse 中安装了最高 4.0.3（API 15）的 SDK ......我安装了最新版本 4.1.2（API 16）并且错误消失了. 实际上，这是以前库中的一个错误，已在 API 16 版本中解决。

# html - 我可以将div作为背景吗？

> ID：15022898
> 
> 赞同：1
> 
> 时间：2013-02-22T11:14:58.533
> 
> 标签：html, css

> 美好的一天，我可以将我的**div**作为背景吗？

或者如何将我的 div 设置在另一个 div 的后面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:23:31.193

我认为您可以使用两个 div 标签并将位置指定为绝对位置，然后将背景赋予其中一个 div，如下所示：

```
<div class="abc">

</div>
<div class="xyz">
    dgffsgf
</div> 
```

和 css 之类的：

```
.abc{
    position:absolute;
    background-color:red;
    height:100%;
    width:100%;
}

.xyz{
    position:absolute;
} 
```

这将完成您的工作！

工作代码：[Div](http://jsfiddle.net/CHZaT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:20:53.880

正确的做法是这四件事：

*   宽度：100%
*   高度：100%
*   位置：固定
*   z-索引：-1

    .background_div { 背景颜色：红色；宽度：100%；高度：100%；位置：固定；z-索引：-1；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:24:37.433

HTML

```
 <div class="test"></div> 
```

CSS

```
 .test{width:100%;height:100%;background:red;display:block;position:absolute;} 
```

现场示例[http://jsfiddle.net/YC6wD/](http://jsfiddle.net/YC6wD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:29:51.117

如果你想变得更**时髦**，你可以使用[CSS element() 函数](https://developer.mozilla.org/en-US/docs/CSS/element)（仅适用于 Firefox）。根据规范：

*从 Gecko 2.0 开始，您可以使用 element() CSS 函数将任意 HTML 元素用作 background 和 background-image 的背景图像*

这仅仅意味着您可以使用一个*实际* `div`的（或任何其他 HTML 元素）作为该`background-image`元素或另一个元素。[我之前尝试过这个功能，给出了一些非常有趣的结果](http://www.marcofolio.net/css/experimenting_with_the_element_css_function.html)。

（但它并没有那么有用......）

# python - 如何识别字符串中的python语句？

> ID：15022900
> 
> 赞同：1
> 
> 时间：2013-02-22T11:15:01.003
> 
> 标签：python

我在 python 中做一个项目，具有以下要求：我有一个变量，如：

```
some_variable = "os.getcwd()/local/bin" 
```

现在变量中有一个python语句“os.getcwd()”。我必须识别它，执行它并替换变量中的值。

注意：任何 python 语句都可以出现在字符串中。我必须识别它，分离它并执行并用它的值替换原始变量。

如果当前工作目录是，则在执行后的变量中

```
/home/xyz 
```

那么变量应该包含

```
/home/xyz/local/bin 
```

就像`os.getcwd()`，任何 python 语句都可以发生。如何识别字符串中的python语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:22:35.843

正如评论中提到的，这通常非常困难（例如，因为您无法确定标识符是文本的一部分还是 python 名称的一部分）。

因此，我建议稍微更改您的输入（假设这在您的设置中是可能的）：Python 模板引擎通常使用某种转义序列来确定 python 语句的开始和结束。例如，对于[mako](http://www.makotemplates.org/)，您将使用 string `some_variable = "${os.getcwd()}/local/bin"`，这使得替换变得容易。此外，采用这种语法意味着您可以立即使用 mako，而不必自己实现任何东西。

当然，mako 有很多替代品，它只是我想到的第一个。

# javascript - 单击并使用 CTRL 专注于输入

> ID：15022901
> 
> 赞同：0
> 
> 时间：2013-02-22T11:15:01.677
> 
> 标签：javascript, javascript-events

我有一个输入网格。用户可以浏览它们并单击它们。

当用户在输入中切换时 - 下一个输入是焦点（由浏览器触发的事件）。焦点事件处理程序应将“选定”类添加到输入。

当用户点击输入时 - 浏览器首先触发“焦点”事件，然后触发“点击”事件。单击事件处理程序应将“选定”类添加到输入。

**目标：** 我需要允许用户使用 ctrl+click 选择（添加“选定”类到）多个输入，并且仍然允许通过输入进行选项卡。

**问题：** 焦点事件在单击事件之前触发，因此它会从所有输入中删除选择。

简化版代码：http: [//jsbin.com/emuboq/1/edit](http://jsbin.com/emuboq/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:36:31.813

查看我的编辑：http: [//jsbin.com/emuboq/7/edit](http://jsbin.com/emuboq/7/edit)

不确定这是您需要的，所以如果不是，请告诉我。

# java - 如何避免 com.lowagie.text.BadElementException

> ID：15022904
> 
> 赞同：2
> 
> 时间：2013-02-22T11:15:02.997
> 
> 标签：java, itext

在参考[这个](http://itextpdf.com/examples/iia.php?id=104)例子时，我已经为页眉页脚和页码创建了一个程序。但是在运行该程序时，它会抛出 BadElementException:The Template cannot be null。

以下是我的完整代码

```
 import java.awt.Desktop;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;

import wt.query.QueryException;
import wt.util.WTException;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Element;
import com.itextpdf.text.Image;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.Phrase;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.ColumnText;
import com.itextpdf.text.pdf.PdfContentByte;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfPageEventHelper;
import com.itextpdf.text.pdf.PdfTemplate;
import com.itextpdf.text.pdf.PdfWriter;
import com.itextpdf.text.pdf.draw.LineSeparator;

public class TestHF2 {

    public static final String RESULT="Pagenumber.pdf";

    public class HeaderFooter extends PdfPageEventHelper
    {
        String header;
        PdfTemplate total;

        public void setHeader(String header)
        {
            this.header=header;
        }
        public void openDocument(PdfWriter writer,Document document)
        {
            total=writer.getDirectContent().createTemplate(30, 16);
        }
        public void onEndPage(PdfWriter writer,Document document)
        {
            PdfPTable table=new PdfPTable(3);
            try {
                table.setWidths(new int[]{24,24,2});
                table.setTotalWidth(527);
                table.setLockedWidth(true);
                table.getDefaultCell().setFixedHeight(20);
                table.getDefaultCell().setBorder(Rectangle.BOTTOM);
                table.addCell(header);
                table.getDefaultCell().setHorizontalAlignment(Element.ALIGN_LEFT);
                table.addCell(String.format("Page %d of", writer.getPageNumber()));
                PdfPCell cell=new PdfPCell(Image.getInstance(total));
                cell.setBorder(Rectangle.BOTTOM);
                table.addCell(cell);
                table.writeSelectedRows(0, -1, 34, 803, writer.getDirectContent());
            } catch (DocumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        public void onCloseDocument(PdfWriter writer,Document document)
        {
            ColumnText.showTextAligned(total, Element.ALIGN_LEFT, new Phrase(String.valueOf(writer.getPageNumber()-1)), 2, 2, 0);
        }
        @SuppressWarnings("unchecked")
        public void createPDF() throws QueryException, WTException, DocumentException, IOException
        {
            String PartNO="GT024";
            List L=winpar.start(PartNO);
            List M=child.start1(PartNO);
            Iterator it = L.iterator();
              Iterator its = M.iterator();
             Document document=new Document(PageSize.A4,36,36,54,36);
             PdfWriter writer=PdfWriter.getInstance(document, new FileOutputStream(RESULT));
             HeaderFooter event=new HeaderFooter();
             writer.setPageEvent(event);
             document.open();
             @SuppressWarnings("unused")
            PdfContentByte contentByte=writer.getDirectContent();
             PdfPTable table=new PdfPTable(4);
             table.setWidthPercentage(100);
             table.getDefaultCell().setBorder(Rectangle.NO_BORDER);
             table.getDefaultCell().setBorder(Rectangle.BOTTOM);
             table.getDefaultCell().setHorizontalAlignment(Element.ALIGN_LEFT);
             table.getDefaultCell().setFixedHeight(20);
             LineSeparator ls=new LineSeparator();
             document.add(ls);

             table.addCell("Name");
             table.addCell("Number");
             table.addCell("State");
             table.addCell("Container");
             LineSeparator ls1=new LineSeparator();
             document.add(ls1);
             while (it.hasNext()) {
                    insertCell(table, it.next().toString(), Element.ALIGN_LEFT, 1);
                     insertCell(table, it.next().toString(), Element.ALIGN_LEFT, 1);
                     insertCell(table, it.next().toString(), Element.ALIGN_LEFT, 1);
                     insertCell(table, it.next().toString(), Element.ALIGN_LEFT, 1);
                 }
                 while (its.hasNext()) {
                     insertCell(table, its.next().toString() , Element.ALIGN_LEFT, 1);
                    insertCell(table, its.next().toString(), Element.ALIGN_LEFT, 1);
                    insertCell(table, its.next().toString(), Element.ALIGN_LEFT, 1);
                     insertCell(table, its.next().toString(), Element.ALIGN_LEFT, 1);
                 }
                 document.add(table);
                 document.close();
                 File file = new File("PageAndheader.pdf");
                 if (file.toString().endsWith(".pdf")) {
                     Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + file);
                 } else {
                     Desktop desktop = Desktop.getDesktop();
                     desktop.open(file);
                 }

                }

        }
    private static void insertCell(PdfPTable table, String text, int align, int colspan) {

        //create a new cell with the specified Text and Font
        PdfPCell cell = new PdfPCell(new Phrase(text.trim()));
        cell.setBorder(Rectangle.NO_BORDER);
        //set the cell alignment
        cell.setHorizontalAlignment(align);
        //set the cell column span in case you want to merge two or more cells
        cell.setColspan(colspan);
        //in case there is no text and you wan to create an empty row
        if (text.trim().equalsIgnoreCase("")) {
            cell.setMinimumHeight(10f);
        }
        //add the call to the table
        table.addCell(cell);

    }

public static void main(String args[]) throws QueryException, DocumentException, WTException, IOException,ClassCastException, com.lowagie.text.DocumentException
{
    TestHF2 ot=new TestHF2();
    TestHF2.HeaderFooter obj=ot.new HeaderFooter();
    obj.createPDF();

}   

} 
```

我得到这样的输出

```
 `Query size ===8
child size is: 4
com.itextpdf.text.BadElementException: The template can not be null.
    at com.itextpdf.text.ImgTemplate.<init>(ImgTemplate.java:74)
    at com.itextpdf.text.Image.getInstance(Image.java:589)
    at ext.gt.checkOut.TestHF2$HeaderFooter.onEndPage(TestHF2.java:61)
    at com.itextpdf.text.pdf.PdfDocument.newPage(PdfDocument.java:858)
    at com.itextpdf.text.pdf.PdfDocument.close(PdfDocument.java:793)
    at com.itextpdf.text.Document.close(Document.java:416)
    at ext.gt.checkOut.TestHF2$HeaderFooter.createPDF(TestHF2.java:118)
    at ext.gt.checkOut.TestHF2.main(TestHF2.java:154)
Exception in thread "main" java.lang.NullPointerException
    at com.itextpdf.text.pdf.ColumnText.showTextAligned(ColumnText.java:1189)
    at com.itextpdf.text.pdf.ColumnText.showTextAligned(ColumnText.java:1251)
    at ext.gt.checkOut.TestHF2$HeaderFooter.onCloseDocument(TestHF2.java:73)
    at com.itextpdf.text.pdf.PdfDocument.close(PdfDocument.java:799)
    at com.itextpdf.text.Document.close(Document.java:416)
    at ext.gt.checkOut.TestHF2$HeaderFooter.createPDF(TestHF2.java:118)
    at ext.gt.checkOut.TestHF2.main(TestHF2.java:154)

    ` 
```

从这个类中，我将其他两个称为我的自定义类。但我不知道为什么我会收到 BadElementException：模板不能为空。我还参考了 Page X of Y 问题的文档。所以我在这里创建了一个模板。但我不明白为什么会这样。

抱歉添加了我的程序的整个部分。我别无选择。提前感谢您阅读我的所有问题。我需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:21:31.260

执行 onEndPage() 时，“total”变量为空。

# c# - 如何在 SignalR 持久连接中发送已连接的组名称？

> ID：15022907
> 
> 赞同：1
> 
> 时间：2013-02-22T11:15:11.757
> 
> 标签：c#, asp.net, signalr, signalr-hub, signalr.client

我需要向不同的用户组发送数据。我可以在这里使用集线器概念，但唯一的 SignalR Android 客户端库“SignalA” [https://github.com/erizet/SignalA](https://github.com/erizet/SignalA) 没有集线器实现，所以我不得不使用持久连接及其组概念。现在我在 SignalR 文档站点上看到了这个 OnConnected 方法

```
protected override Task OnConnected(IRequest request, string connectionId)
{
    return Groups.Add(connectionId, "foo");
} 
```

我希望用户能够加入不同的组，所以当他连接时，他将传递一个他想要添加到的组名。如何在客户端传递组名并在上述方法中接收它，而不是使用硬编码的“foo”？

如果有人可以将我指向具有集线器实现的 SignalR Java 客户端库，我也会非常高兴，因为我找不到任何集线器。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:40:37.730

您有 2 个选项：

1.  将查询字符串参数（如果 java 客户端支持）作为连接信息的一部分传递。这样，您可以通过查询字符串传递组列表以加入。如果您这样做，那么您可以使用 request.QueryString 访问查询字符串并执行您需要的任何处理。
2.  连接后，您可以向服务器发送消息并处理 OnReceived 并传递组列表。

任何一个都有效。

 ```* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T06:20:22.580

我知道这是一个老问题，但我认为值得一提的是[SignalA](https://github.com/erizet/SignalA "信号A")现在支持集线器。```

# c# - C# 构造函数链接：正确使用？

> ID：15022919
> 
> 赞同：2
> 
> 时间：2013-02-22T11:15:56.237
> 
> 标签：c#, oop, design-patterns, constructor

C# 新手，正在研究构造函数链接。

我有以下课程：

```
class ConstructorChaining
{
    public string a;
    public string b;
    public int c;

    public ConstructorChaining(string astring, string anotherstring, int anint)
    {
        a = astring;
        b = anotherstring;
        c = anint;
    }

    public ConstructorChaining(string astring) : this("fff", astring, 2)
    {
        a = astring;
    }
} 
```

如果我这样实例化它，并输出字段的值：

```
ConstructorChaining cc2 = new ConstructorChaining("xyz");
Console.WriteLine(cc2.a);
Console.WriteLine(cc2.b);
Console.WriteLine(cc2.c); 
```

为什么 cc2.a 的值是“xyz”，而不是“fff”？我本来以为只有cc2。**b**会得到这个值。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:17:39.687

“链式”构造函数在构造函数主体之前执行。

因此，首先它在构造函数中分配`"fff"`三个`a`参数。
在该构造函数完成执行后，带有一个参数的构造函数的主体将被执行并分配`"xyz"`给`a`.

以下将是链式构造函数的合理实现：

```
class ConstructorChaining
{
    public string a;
    public string b;
    public int c;

    public ConstructorChaining(string astring, string anotherstring, int anint)
    {
        a = astring;
        b = anotherstring;
        c = anint;
    }

    public ConstructorChaining(string astring) : this(astring, astring, 2)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:18:11.913

```
this("fff", astring, 2) 
```

在您的 xyz 构造函数之前运行。所以 cc2.a 有 valye fff 然后你用 xyz 覆盖它

```
class ConstructorChaining
{
    public string a;
    public string b;
    public int c;

    public ConstructorChaining(string astring, string anotherstring, int anint)
    {
        a = astring;
        b = anotherstring;
        c = anint;
    }

    public ConstructorChaining(string astring) : this("fff", astring, 2)
    {
        //This code will be executed After your 3 param constructor. 
        a = astring;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:18:31.267

因为 3 参数构造函数是在 1 参数构造函数的主体执行之前执行的。

在伪代码中它看起来像这样：

```
public ConstructorChaining(string astring) 
{
    this("fff", astring, 2)
    a = astring;
} 
```

**不像**这样：

```
public ConstructorChaining(string astring) 
{
    a = astring;
    this("fff", astring, 2)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:18:39.077

因为你`a = astring` *在*调用其他构造函数之后设置，所以值被覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T11:18:52.680

您在调用超类构造函数之后在构造函数中运行实现，因此您将 cc2.a 覆盖为“xyz”。最后完成的步骤如下：

```
a = astring;        // = fff
b = anotherstring;  // = xyz
c = anint;          // = 2
a = astring;        // = xyz 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T11:20:57.187

因为具有一个参数的构造函数（您调用）设置 a = "fff" b = "xyz" c = 2 这是由具有 3 个参数的构造函数完成的。之后，单参数构造器设置 a = "xyz"

# c - 读/写 bmp 文件

> ID：15022924
> 
> 赞同：1
> 
> 时间：2013-02-22T11:16:17.250
> 
> 标签：c, file, fwrite, fread, bmp

我编写了一个代码来简单地读/写（复制）一个 *.bmp 文件。但是有问题我的程序一遍又一遍地运行......我的意思是看起来里面有一个while（true）循环或其他东西。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

#pragma pack(push, 1)
typedef struct Pix
{
  unsigned char R;
  unsigned char G;
  unsigned char B;
  unsigned char L;
  int BW;
}Pix;
#pragma pack(pop)

#pragma pack(push, 1)
typedef struct BitMap
{
    short Signature;
    long Reserved1;
    long Reserved2;
    long DataOffSet;

    long Size;
    long Width;
    long Height;
    short Planes;
    short BitsPerPixel;
    long Compression;
    long SizeImage;
    long XPixelsPreMeter;
    long YPixelsPreMeter;
    long ColorsUsed;
    long ColorsImportant;
    struct Pix *pixels
}BitMap;
#pragma pack(pop)

int main(int argc, char **argv)
{

unsigned long int i=0;//to count pixels readed
unsigned long int S=0;//number of pixcels to read

struct BitMap source_info;//to store bitmap info header
struct Pix source_pix;// to store pixcels

FILE *fp;//file pointer for source file
FILE *Dfp;//file ponter for distenation file

if(!(fp=fopen("in.bmp","rb")))//open in binery read mode
{
printf(" can not open file");//prind and exit if file open error
exit(-1);
}

Dfp=fopen("out.bmp","wb");//opne in binery write mode
//read the headers to souirce file
fread(&source_info, (sizeof(long)*3 + sizeof(short)),1,fp);

//calucate the number of pix to read
S=source_info.Width*source_info.Height;
source_info.pixels =  (struct Pix *) malloc(sizeof(struct Pix)*S);

//read pixcels
for(i=1;i<=S;i++)
{
//read pixcel form source file
fread(&source_pix,sizeof(struct Pix),1,fp);
source_info.pixels[i-1] = source_pix;
}

// write header to dest file
fwrite(&source_info,  (sizeof(long)*3 + sizeof(short)),1,Dfp);
// write pixels to dest file
for(i=1;i<=S;i++)
{
    fwrite(&source_info.pixels[i-1],sizeof(struct Pix),1,Dfp);
}

//close all fiels
fclose(fp);
fclose(Dfp);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:25:21.293

对于我尝试的示例图像，您读取的像素数 (S) 为 3762821376。这显然太大了。

查看 BMP-spec`struct BitMap`您使用的是否正确。

**编辑 1**：

更改这些：

```
fread(&source_info, (sizeof(long)*3 + sizeof(short)),1,fp);
...
fwrite(&source_info,  (sizeof(long)*3 + sizeof(short)),1,Dfp); 
```

至

```
fread(&source_info, sizeof(source_info),1,fp);
...
fwrite(&source_info, sizeof(source_info),1,Dfp); 
```

它现在可以很好地复制我的测试 .bmp。

**编辑2：**

我认为您机器上的颜色切换问题是因为您这样做了`source_info.pixels = ...`。您应该使用自己的指针`Pix* pixels = malloc...`并在循环中更改`source_info.pixels`为`pixels`. 只是不要将你的 malloc 分配到 source_info 结构中，它应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:38:05.757

您正在访问未初始化的`source_info.Width`and`source_info.Height`数据，因为当您`fread`获取文件的标头数据时，您只需在第一个`4 fields`.

因此 source_info 的其他字段可能包含垃圾数据。（特别`width`是`height`因为它们会影响下一个循环）

确保阅读完整的标题更改

```
fread(&source_info, (sizeof(long)*3 + sizeof(short)),1,fp); 
```

和

```
fread(&source_info, sizeof(BitMap),1,fp); 
```

然后确保出于同样的原因正确转储它，链接

```
fwrite(&source_info,  (sizeof(long)*3 + sizeof(short)),1,Dfp); 
```

和

```
fwrite(&source_info, sizeof(BitMap),1,Dfp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T10:21:45.677

您需要跳过复制 Pix 指针，它可以在您想要的单个结构中为我工作。

```
fread(&source_info, (sizeof(BitMap) - sizeof(struct Pix*)),1,fp); 
```

顺便说一句，如果您将 Pix 定义为

```
typedef struct Pix
{
  unsigned char R;
  unsigned char G;
  unsigned char B;
}Pix; 
```

# coldfusion - 获取coldfusion中存储过程结果的行数

> ID：15022927
> 
> 赞同：3
> 
> 时间：2013-02-22T11:16:32.370
> 
> 标签：coldfusion, coldfusion-9

我是冷融合的新手。我正在执行“SP_REPORT”存储过程并处理“结果”中的结果集。如果结果包含行，我将在表中显示数据。我想处理存储过程返回零行的情况。如果有零行，我想显示其他表。我怎样才能得到结果的计数。提前致谢

```
<cfstoredproc procedure="SP_REPORT" datasource="#DataBse#" >        
   <cfprocparam type = "In"     CFSQLType = "CF_SQL_INTEGER"  value ='#Id#'   dbVarName = "@Id">
   <cfprocresult name="result">
</cfstoredproc>         
<table>
<cfloop query="result">
    <tr class="row#result.CurrentRow MOD 2#">
    <td align="left">#result.COMPANY_NAME#</td>
    <td align="left">#trim(result.FName)#</td>
    </tr>
</cfloop>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:01:24.680

```
<cfstoredproc procedure="SP_REPORT" datasource="#DataBse#" >        
   <cfprocparam type = "In"     CFSQLType = "CF_SQL_INTEGER"  value ='#Id#'   dbVarName = "@Id">
   <cfprocresult name="result">
</cfstoredproc>         

<table>
<cfif result.RecordCount>
 <cfloop query="result">
  <tr class="row#result.CurrentRow MOD 2#">
   <td align="left">#result.COMPANY_NAME#</td>
   <td align="left">#trim(result.FName)#</td>
  </tr>
 </cfloop>
<cfelse>
 run another query
</cfif>
</table> 
```

# c# - 控制事件丢失动态控制值的解决方案

> ID：15022944
> 
> 赞同：1
> 
> 时间：2013-02-22T11:17:26.200
> 
> 标签：c#, asp.net, dynamic-controls

我有一个gridview，我在其中动态填充下拉列表。这些下拉列表中填充了来自数据库的数据，因此 gridview 的列数和行数以及下拉控件的数量是事先不知道的。（我正在使用继承 ITemplate 的 ItemTemplate 类来创建动态下拉列）。

我能够正确显示数据，但是当我尝试将更改的 gridview 值保存到数据库时出现问题。

我在gridview 外面有一个按钮，这样当用户点击它时，任何保存的数据都应该在数据库中更新。但是在按钮单击事件中，我无法访问下拉列表的值，因为动态内容在回发和任何其他控制事件中丢失。

有人可以指导我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:28:39.977

研究[ASP .NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)，您会发现您需要创建动态控件，**`OnInit`**其中的事件是 for **`PreInit`**，否则它们将不可用**`Page_Load`**等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:29:25.013

您必须在 OnInit 事件中创建动态控件，因为当 OnLoad 命中时，视图状态已全部填充，并且您新创建的控件不会使用来自视图状态的数据进行更新。

这是一篇关于 viewstate 的好文章：

[http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)

# android - Android 如何从另一个类做 setProgressBarIndeterminateVisibility(false)？

> ID：15022945
> 
> 赞同：0
> 
> 时间：2013-02-22T11:17:26.953
> 
> 标签：android, android-asynctask, android-progressbar

我有两个课程，一个显示图像，下一个仅在背景中加载图像，但问题是*第二个课程*需要`setProgressBarIndeterminateVisibility(false)`从第*一个课程开始*，我不知道该怎么做。

**我的第一堂课：**

```
public class Galeria extends Activity {

requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

    setContentView(R.layout.activity_galeria);

    setProgressBarIndeterminateVisibility(true); 
    ...
} 
```

**我的第二课：**

```
public class CargarImagenes extends AsyncTask<Object, Bitmap, Object> {

protected Object doInBackground(Object... params) {

other operations...
}

protected void onPostExecute(Object result) {
    Galeria galeria = new Galeria();

    // This is the problem!!
    galeria.setProgressBarIndeterminateVisibility(false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:43:13.893

来自画廊

```
new CargarImagenes().execute(this); 
```

在 CargarImagenes

```
public class CargarImagenes extends AsyncTask<Object, Bitmap, Object> {

    Context context;

    protected Object doInBackground(Object... params) {
        context = (Context) params[0];
    other operations...
    }

    protected void onPostExecute(Object result) {
        Galeria galeria = new Galeria();

        ((Activity)context).setProgressBarIndeterminateVisibility(false)
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:38:36.470

当你把 Galeria galeria = new Galeria(); 在您的第二堂课中，您正在制作一个新的 Galeria 实例。您需要获取您在第一堂课中创建的 Galeria。

尝试这样做：（将公共更改为私有）并将代码插入您的第一堂课。

```
private class CargarImagenes extends AsyncTask<Object, Bitmap, Object> {

protected Object doInBackground(Object... params) {

other operations...
}

protected void onPostExecute(Object result) {
    //Galeria galeria = new Galeria();

// This is the problem!!
pb.setProgressBarIndeterminateVisibility(false); 
```

}

其中 pb 是您的 ProgressBar。

像 public ProgressBar pb 一样放在第一类；

并做类似
pb= new ProgressBar(this); ……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T16:20:05.590

您可以使用总线类或库，例如[Otto](http://square.github.io/otto/) form Square 或来自 Guava 的[Bus 。](https://code.google.com/p/guava-libraries/wiki/EventBusExplained)他们可以在每个注册的课程中相互交流。在他们的网页上阅读更多关于它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T21:01:01.417

如果您可以使用 Wea​​kReference 从 AsyncTask 中引用对象会更好，因为这是防止您访问空对象的可靠方法。

```
public class CargarImagenes extends AsyncTask<Void, Bitmap, Object> {

    WeakReference<Activity> mActivity;

    public CargarImagenes(Activity activity){

         mActivity = new WeakReference<Activity>(activity);
    }

    protected Object doInBackground(Void... params) {

        other operations...
    }

    protected void onPostExecute(Object result) {

        Activity activity = mActivity.get();
        if(activity != null){    
            activity.setProgressBarIndeterminateVisibility(false);
        }
    }    
} 
```

然后你可以像这样创建 CargarImagenes

```
CargarImagenes task = new CargarImagenes(this); 
```

并执行它。

# python - 在 Python 3 中提交表单

> ID：15022951
> 
> 赞同：0
> 
> 时间：2013-02-22T11:17:39.530
> 
> 标签：python, mechanize, urllib

我正在尝试使用 Python 3 提交表单。在 Python 2 中，我执行了以下操作：

```
br=mechanize.Browser()
br.set_handler_robots(False)  
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]  
br.open(url)  
br.select_form(nr=0)  
br.form['form_name']=entry  
br.submit() 
```

有用。在 Python 3 中，我尝试使用以下代码来实现：

```
data={'form_name':entry}  
data=urllib.parse.urlencode(data)  
data=data.encode('utf-8')
headers={'User-Agent': 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1'}  
req=urllib.request.Request(url,data,headers)  
response=urllib.request.urlopen(req) 
```

但它显示 HTTP 错误 405。谁能解释一下如何在 Python 3 中解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:22:26.677

HTTP 错误 405 是[Method Not Allowed](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)，因此您可能不允许 POST 到该 URL。

当您向其传递数据时，它会自动`urllib.request.Request`将其 HTTP 方法更改为 POST，但也可以通过将表单参数添加到 URL 来通过 GET 提交表单，这可能是网站所期望的。查看`<form>`标记是否`method`在 HTML 中将其属性设置为“get”（或者如果它完全丢失，在这种情况下它默认为“get”）。

您可以像这样手动将表单参数添加到 URL：

```
data = urllib.parse.urlencode(data)
req = urllib.request.Request("%s?%s" % (url, data), headers=headers) 
```

（这很hacky，但[在文档中用作示例](http://docs.python.org/3.0/library/urllib.request.html#examples)，所以我想这是首选方式。）

由于您没有将数据传递给构造函数，因此它将使用的方法是 GET。

这可能会奏效。但是，由于 Web 服务器可以自由地返回他们喜欢的任何状态代码，问题可能完全是另外一回事。

# objective-c - plist XML 字符串到 NSMutableDictionary

> ID：15022954
> 
> 赞同：3
> 
> 时间：2013-02-22T11:17:54.587
> 
> 标签：objective-c, plist, nsdictionary, foundation

我将一些字典存储在 plist 文件（iOS）中，这些文件随后被加密。读取文件内容并解密后，我以字符串形式返回文件的 xml 内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>password</key>
    <string>apassword</string>
    <key>username</key>
    <string>ausername</string>
</dict>
</plist> 
```

我知道这些方法：`dictionaryWithContentsOfFile:(NSString *)`并`dictionaryWithContentsOfFile:(NSURL *)`从这种类型的数据创建字典，但很惊讶没有这样的数据`dictionaryWithXML:(NSString *)`

没有将这些数据写入文件然后读取它，这是我试图避免的事情，因为它只是过度，有没有我遗漏的明显解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T11:38:30.223

`NSPropertyListSerialization`有一个方便的方法可以为你做这件事，从一个`NSData`实例中读取：

```
NSString *source = ... // The XML string

NSData* plistData = [source dataUsingEncoding:NSUTF8StringEncoding];

NSError *error;

NSMutableDictionary* plist = [NSPropertyListSerialization propertyListWithData:plistData
                                                                       options: NSPropertyListImmutable
                                                                        format:NULL
                                                                         error:&error]; 
```

正如@Adam 在评论中指出的那样，此方法返回的字典始终是可变的。该`options`参数用于确定 plist 中保存的容器（数组、字典）是否也是可变的或（默认）不可变的。

如果您希望属性列表中的容器也是可变的，您可以使用`NSPropertyListMutableContainers`- 或`NSPropertyListMutableContainersAndLeaves`，如果您甚至需要叶子是可变的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:15:53.430

正如@Monolo 在他的回答中所说，`NSPropertyListSerialization`这是要走的路。但是，您可以在`NSMutableDictionary`不将数据复制到新实例的情况下获得 a。这是代码：

```
NSString *str = @"<?xml version=\"1.0\" encoding=\"UTF-8\"?><!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd\"><plist version=\"1.0\"><dict><key>password</key><string>apassword</string><key>username</key><string>ausername</string></dict></plist>";
NSData *data = [str dataUsingEncoding:NSUTF8StringEncoding];
NSError *err;
NSPropertyListFormat format;
NSMutableDictionary *dict = [NSPropertyListSerialization propertyListWithData:data options:NSPropertyListImmutable format:&format error:&err];
if (err) {
    NSLog(@"err: %@", err);
}
NSLog(@"original dictionary: %@", dict);
[dict setValue:@"newPass" forKey:@"password"];
NSLog(@"modified dictionary: %@", dict); 
```

# c++ - C++ Basic Constructor 不打印文本

> ID：15022958
> 
> 赞同：0
> 
> 时间：2013-02-22T11:17:57.233
> 
> 标签：c++, class, constructor

我只是在编写一些基本的 C++ 代码，并在一个类中创建了一个构造函数。构造函数旨在打印出`main()`函数中定义的名称，但由于某种原因，当我运行它时，什么也没有发生。这并不是一个真正的大问题，但我想找出它为什么不起作用，所以我知道以后该怎么办！

代码：

```
#include <iostream>
#include <string>

using namespace std;

class ClassOne{
public:
    ClassOne(string z){
        setName(z);
    }
    void setName(string x){
        name = x;
    }
    string getName(){
        return name;
    }

private:
    string name;

};

int main()
{
ClassOne classOneObject("Hello World");
cout << classOneObject.getName();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:20:31.757

What compiler/version do you use? Try changing your code to:

```
cout << classOneObject.getName() << endl; 
```

What happens now? (If it works now, the reason is that you didn't flush cout.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-06T18:28:46.457

```
ClassOne classOneObject fo("Hello World");
cout << fo.getName(); 
```

# qt - 在运行时将弹出窗口定位在 QWidget 上

> ID：15022960
> 
> 赞同：0
> 
> 时间：2013-02-22T11:18:04.643
> 
> 标签：qt, inheritance, popup, position, qwidget

我知道有答案，但它们不能满足我的问题。它不适合我。

我有一个名为 PopUp 的简单自定义小部件。它继承了 SmartPanel，它是一个样式面板，只包含：

```
setWindowFlags( Qt::Window | Qt::FramelessWindowHint );
setAttribute(Qt::WA_QuitOnClose, true);
setAttribute( Qt::WA_TranslucentBackground ); 
```

它显示了一个窗口，该窗口应该出现在您按下的按钮上，该按钮将弹出或关闭。如果您进出它，它会自行关闭。

我试过了：

**A）使其成为按钮的子元素**，因此按钮移动到哪里，它就会移动。显然应该工作。出色地。根本不起作用...它始终停留在窗口左上角的 0,0 上。我什至移动窗口，按钮移动，弹出窗口保持不变......即使是它的孩子！

```
SmartPopUp::SmartPopUp( QWidget *parent): SmartPanel(parent)
{
   setContentsMargins(30,10,20,20);
   hide();
   QVBoxLayout* lyt = new QVBoxLayout();
   setLayout(lyt);
 } 
```

**B) 保存在指向关联的链接中。小部件**，以获取其位置。获取小部件的位置无法正常工作。不知道为什么...

```
SmartPopUp::SmartPopUp( QWidget* associatedWidget, QWidget *parent): SmartPanel(parent)
{
  associatedWidget_ = associatedWidget;
  setContentsMargins(30,10,20,20);
  hide();

  QVBoxLayout* lyt = new QVBoxLayout();
  setLayout(lyt);
} 
```

如何让它随着按钮位置的变化一起移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:25:59.357

1.  制作一个 topWidget。

2.  将 SmartPoUp 和 SmartPanel 作为该父级的子级。

3.  为 SmartPoUp 调用 raise()

4.  重新实现SmartPanel 的[moveEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#moveEvent)并根据 SmartPanel 的新位置移动 SmartPopup。

# sharepoint - ECMA 脚本错误：集合尚未初始化

> ID：15022963
> 
> 赞同：3
> 
> 时间：2013-02-22T11:18:11.060
> 
> 标签：sharepoint, sharepoint-2010

使用通过 JQuery 查询 SharePoint 列表 (2010) 时出现此错误 **集合尚未初始化。它尚未被请求或请求尚未执行。可能需要明确请求。**

我正在遍历 html 选择元素中的所有选项并查询 SharePoint 列表。

```
 $("#IdeasStatus option").each(function()
    {
        statusCount = statusCount + 1;
        lstStatus.push($(this).val());            
    });

    for (var i = 0; i < lstStatus.length; i++) {
         *****Some Code*********
       retItems = spList.getItems(caml);                       
       spContext.load(retItems);
      spContext.executeQueryAsync(onCategorySuccess, onCategoryFail);} 
```

我在下面的函数中遇到错误

```
 function onCategorySuccess(sender, args) {
    executionCount++;
    $('input[id$=hidChartParam1]').val($('input[id$=hidChartParam1]').attr('value') + ',' + status);
    $('input[id$=hidChartParam2]').val($('input[id$=hidChartParam2]').attr('value') + ',' + retItems.get_count());
    if (executionCount == statusCount) {
        FillPieChart();
    }
} 
```

**获取计数retItems.get_count()**时引发错误，我认为这是因为在循环和进行多个异步调用时使用了相同的变量名 (retItems)？

请建议我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T07:19:46.830

你打电话`onCategorySuccess`到别处了吗？看起来您`onCategorySuccess`在实际填写`retItems`值之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T11:58:10.317

我相信在调用 spList.getItems 之前的某个时候，您应该将 spList 加载到上下文中

# c - 如何在c中声明单链表？

> ID：15022966
> 
> 赞同：0
> 
> 时间：2013-02-22T11:18:17.830
> 
> 标签：c, singly-linked-list

谁能解释一下c中单个链表的以下声明之间的区别是什么？更具体地说，为什么第一个不正确？

```
typedef struct
{
    char *data;
    struct linkedlist *next;
} linkedlist; 
```

对比

```
typedef struct linkedlist
{
    char *data;
    struct linkedlist *next;
} linkedlist; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:20:41.400

在第一种情况下，编译器达到

```
struct linkedlist *next; 
```

它不知道 a`struct linkedlist`是什么。

在第二种情况下，您在 struct 声明的开头告诉它它是一个`struct linkedlist`. 这使编译器在以后遇到该`next`字段时感到高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:21:52.817

```
typedef struct
{
  ...
} linkedlist; 
```

以上允许您能够如下声明变量：

```
linkedlist thisIsALinkedList; 
```

但问题是这仅由编译器在结构末尾解析。所以当它到达时 `struct linkedlist *next`它不知道是什么`linkedlist`（即使它知道了，声明仍然是不正确的，因为它应该是 just `linkedlist *next`）。

# jquery - Jquery循环遍历表trs并将div标签附加到当前tr

> ID：15022967
> 
> 赞同：0
> 
> 时间：2013-02-22T11:18:17.950
> 
> 标签：jquery, html, append

我有以下html代码。

```
 <table class="table">
<thead>
    <th>Size</th>
    <th>Quantity</th>
</thead>

<tbody>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
        </td>
    </tr>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
        </td>
    </tr>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
        </td>
    </tr>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
        </td>
    </tr>
</tbody>
</table> 
```

我正在遍历 tbody 中的每个 tr 并获取每个输入值。但我想追加`<div class="error-message">Error Message Here..</div>`. 所以我想要如下输出。

```
<table class="table">
<thead>
    <th>Size</th>
    <th>Quantity</th>
</thead>

<tbody>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
            <div class="error-message">Error Message Here..</div>
        </td>
    </tr>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
            <div class="error-message">Error Message Here..</div>
        </td>
    </tr>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
            <div class="error-message">Error Message Here..</div>
        </td>
    </tr>
    <tr>
        <td class="name">
            <input type="hidden" value="2" name="size"/>
        </td>
        <td class="description">
            <input type="text" name="quantity" class="input-xlarge" placeholder="Enter quantity here.."/>
            <div class="error-message">Error Message Here..</div>
        </td>
    </tr>
</tbody>
</table> 
```

javascript如下。

```
$('.table > tbody tr').each(function() {
        var size_id = $(this).children('.name').find('input').val();
        var quantity = $(this).children('.description').find('input').val();
        $(this).find('.description').append('<div class="error-message">Error Message Here..</div>');
} 
```

但我没有得到那个输出。请建议我锄头这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:20:54.457

你错过了**）；**在末尾。看这个[演示](http://jsfiddle.net/zyXQC/2/)

```
$('.table > tbody tr').each(function () {
    var size_id = $(this).children('.name').find('input').val();
    var description = $(this).children('.description');
    var quantity = description.find('input').val();
    description.append('<div class="error-message">Error Message Here..</div>');
}); 
```

# r - 获取每组 survfit 对象的事件总数

> ID：15022968
> 
> 赞同：0
> 
> 时间：2013-02-22T11:18:19.913
> 
> 标签：r, extract, output, survival-analysis

我使用 R 的[生存](http://cran.r-project.org/web/packages/survival/index.html)包并生成了具有不同组的 survfit 对象。

我知道想要访问`records - right censored`每个组的事件数（即 ）。

当我使用时`print(survobject)`，有一列`events`显示每个组的事件数。但是，我没有成功将此列提取为向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:40:41.033

作为示例使用来自库`survival`帮助页面的数据。`print()`在对象上使用函数`survfit`会打印所有`summary.survfit()`对象的一部分。

```
library(survival)
print(survfit( Surv(futime, fustat)~rx, data=ovarian))
Call: survfit(formula = Surv(futime, fustat) ~ rx, data = ovarian)

     records n.max n.start events median 0.95LCL 0.95UCL
rx=1      13    13      13      7    638     268      NA
rx=2      13    13      13      5     NA     475      NA 
```

如果我们保存`summary()`对象并查看它的结构，就会发现有一个元素`table`。

```
gg<-summary(survfit( Surv(futime, fustat)~rx, data=ovarian))
 str(gg)
List of 15
 $ n        : int [1:2] 13 13
 $ time     : num [1:12] 59 115 156 268 329 431 638 353 365 464 ...
 $ n.risk   : num [1:12] 13 12 11 10 9 8 5 13 12 9 ...
 $ n.event  : num [1:12] 1 1 1 1 1 1 1 1 1 1 ...
 $ n.censor : num [1:12] 0 0 0 0 0 0 0 0 0 0 ...
 $ surv     : num [1:12] 0.923 0.846 0.769 0.692 0.615 ...
 $ type     : chr "right"
 $ strata   : Factor w/ 2 levels "rx=1","rx=2": 1 1 1 1 1 1 1 2 2 2 ...
 $ std.err  : num [1:12] 0.0739 0.1001 0.1169 0.128 0.1349 ...
 $ upper    : num [1:12] 1 1 1 0.995 0.946 ...
 $ lower    : num [1:12] 0.789 0.671 0.571 0.482 0.4 ...
 $ conf.type: chr "log"
 $ conf.int : num 0.95
 $ call     : language survfit(formula = Surv(futime, fustat) ~ rx, data = ovarian)
 $ table    : num [1:2, 1:7] 13 13 13 13 13 13 7 5 638 NA ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:2] "rx=1" "rx=2"
  .. ..$ : chr [1:7] "records" "n.max" "n.start" "events" ...
 - attr(*, "class")= chr "summary.survfit" 
```

元素表包含与您获得的相同信息`print()`。因此`event`，只需选择您感兴趣的列即可访问值。

```
gg$table
     records n.max n.start events median 0.95LCL 0.95UCL
rx=1      13    13      13      7    638     268      NA
rx=2      13    13      13      5     NA     475      NA

gg$table[,4]
rx=1 rx=2 
   7    5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:40:21.037

```
str( Surv(heart$start, heart$stop, heart$event)[1:10, 1:3] )
#-----------------------------
 labelled [1:10, 1:3] 0 0 0 1 0 36 0 0 0 51 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:3] "start" "stop" "status"
 - attr(*, "units")= chr "Day" 
```

这些是时代：

```
 Surv(heart$start, heart$stop, heart$event)[1:10, "stop"]
# [Day] 
# [1]  50   6   1  16  36  39  18   3  51 675
 Surv(heart$start, heart$stop, heart$event)[1:10, "start"]
# [Day] 
# [1]  0  0  0  1  0 36  0  0  0 51 
```

因此，如果您想要与事件相关联的时间，您只需：

```
> Surv(heart$start, heart$stop, heart$event)[ , "stop"][ Surv(heart$start, heart$stop, heart$event)[ , "status"] == 1]
 [Day] 
 [1]   50    6   16   39   18    3  675   40   85   58  153    8   81 1387    1  308   36
[18]   43   37   28 1032   51  733  219  263   72   35  852   16   77   12  100   66    5
[35]   53    3    2   40   45  996   72    9  980  285  102  188    3   61  149  343   68
[52]    2   69  584   78   32  285   68   30   90   17    2   21   96   80  334    5  110
[69]  207  186  340  165   16   21    6 
```

或者要获得数字，只需将事件标记相加：

```
 sum( Surv(heart$start, heart$stop, heart$event)[ , "status"] == 1)
[1] 75 
```

并按潜在协变量制表：

```
> with(lung, table(Surv(time, status)[, "status"], ph.ecog ))
   ph.ecog
     0  1  2  3
  0 26 31  6  0
  1 37 82 44  1 
```

# c++ - “或”与“||”的区别

> ID：15022971
> 
> 赞同：5
> 
> 时间：2013-02-22T11:18:24.473
> 
> 标签：c++

有没有区别

```
if ( a or b or c ) { 
```

...和...

```
if ( a || b || c ) { 
```

...以及更一般地在两个运算符之间，即使在优先级方面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T11:21:22.663

除了让许多经验丰富的程序员认为“咦，有人突然开始写 Pascal 吗？”的风格意义之外，没有功能上的区别。

这些替代名称的目的是允许居住在瑞典或德国的人们使用标准的 ASCII 本地变体，其中`|`is `ö`。

自从引入 Unicode 和扩展 ASCII 以来，这种需求几乎消失了，因为国有化字符集不必“窃取”不常用的字符来生成它们的国家“特殊”字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:21:15.913

*编辑*你可以超载`operator or`。

他们是一样的。

请参阅[C 和 C++ 中的运算符](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Logical_operators)。

如果你重载`operator or`一个类型，你就不能重载`operator||`相同的类型，因为编译器会认为它们是同一个函数。

此错误来自以下代码：

```
> prog.cpp: In function ‘bool operator||(Type, Type)’:
> prog.cpp:8:6: error: redefinition of ‘bool operator||(Type, Type)’
> prog.cpp:4:6: error: ‘bool operator||(Type, Type)’ previously defined here 
```

关于[ideaone](http://ideone.com/ZdMvR1)：

```
class Type {}
};

bool operator or(Type lhs, Type rhs) {
    return true;
}

bool operator ||(Type lhs, Type rhs) {
    return false;
}

int main() {
    Type a;
    Type b;
    a or b;
    a || b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:21:21.507

根据 ISO14882:2011(e) 2.6-2（表 2）`or`是 的替代标记`||`，因此具有完全相同的含义：

> 在语言的所有方面，除了拼写之外，每个替代标记的行为分别与其主要标记相同。

通常编译器将它们实现为`#define or ||`内部等效项。

`and`, `bitor`, `xor`, `compl`, `bitand`, `and_eq`, `or_eq`, `xor_eq`,`not`和 也一样`not_eq`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T12:42:30.977

正如在其他答案中所说，两者是相同的，因此可以互换。但是有一个很大的区别：MSVC、C++ Builder 以及其他编译器可能不支持`or`不包含特殊头文件的情况。这使得使用`or`便携性障碍。

# c# - 在某些 XP 机器上第一次读取后流关闭

> ID：15022976
> 
> 赞同：4
> 
> 时间：2013-02-22T11:18:35.780
> 
> 标签：c#, caching, stream

我有一个桌面应用程序，它从 Web 服务器下载一些 dll，然后用`Assembly.Load`. 在一台 XP 机器上，我第二次运行应用程序时抛出了 BadImageFormatExceptions。在其他 Win 7 和 XP 机器上，它运行良好。

似乎只返回了 dll 的前 65536 个字节，并且这只发生在下载的 dll 被缓存时。

什么可能导致截断？

这是我重现问题的方式。首先，下载文件，将其添加到缓存中：

```
client = new WebClient();
client.CachePolicy = new RequestCachePolicy(RequestCacheLevel.Reload);
data = client.DownloadData(url);
Console.WriteLine("Got " + data.Length); 
```

这有效，在这种情况下打印“Got 159744”。

通常我会使用`RequestCacheLevel.Deafult`，但为了可靠地重现问题，我只从缓存中读取第二个请求：

```
client = new WebClient();
client.CachePolicy = new RequestCachePolicy(RequestCacheLevel.CacheOnly);
data = client.DownloadData(url);
Console.WriteLine("Got " + data.Length); 
```

在大多数机器上，这会输出“Got 159744”，但是在破旧的 XP 机器上，它会输出“Got 65536”。查看 的源代码`WebClient`，它使用 65536 字节的缓冲区大小。怀疑有问题`WebClient`，我直接使用`WebRequest`：

```
request = WebRequest.Create(url);
request.CachePolicy = new RequestCachePolicy(RequestCacheLevel.CacheOnly);
responseStream = request.GetResponse().GetResponseStream();
var buffer = new byte[16384];
using (var memoryStream = new MemoryStream())
{
    int read;
    while ((read = responseStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        Console.WriteLine("Read... " + read + " bytes");
        memoryStream.Write(buffer, 0, read);
    }
    data = memoryStream.ToArray();
}
Console.WriteLine("Got " + data.Length); 
```

在这种情况下，只输出一个“Read...”行，并且只读取了 16384 个字节。没有抛出流异常结束，并且我得到的字节看起来不错。

响应流结束过早似乎是一个问题，但可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:14:34.870

您的程序集之间存在平台目标不一致。

很可能是“AnyCPU”和“x86”程序集的混合体，可以在 32 位 CLR 上正常工作，而不是在 64 位 CLR 上（因为 AnyCPU 加载为 64 位，这会破坏对 x86 程序集的依赖）。

确保所有程序集都具有一致的目标 - 所有 AnyCPU 或所有 x86。

你也可以试试这个

```
 corflags myassembly.exe /32bit+ 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx)

# jquery - jQuery替换字符

> ID：15022979
> 
> 赞同：0
> 
> 时间：2013-02-22T11:18:41.920
> 
> 标签：jquery, replace

在接下来的例子中：

```
 <b id="TITLE">The%20Vampire%20Diaries</b>

 <b id="TITLE"> How%20I%20met%20your%20moom</b> 
```

如何在 a 包含的所有名称中将 all 替换为 (space `%20`) ？`" "``id="TITle"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:20:59.803

Use [`unescape()`](http://msdn.microsoft.com/en-us/library/ie/dz4x90hk%28v=vs.94%29.aspx):

```
$("#TITLE").text(function(i,v){
    return unescape(v);
}); 
```

***Live Demo:** [http://jsfiddle.net/rm8GU/1](http://jsfiddle.net/rm8GU/1)*

* * *

FYI: In case both elements in your example exist in the same document, ID should be unique, and you should use class references instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:21:53.510

You shouldn't have 2 items with the same ID. Try using a class instead, then iterating the classes.

```
$('.TITLE').each(function(){

    $(this).text(unescape($(this).text()));

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:21:54.737

```
$("#TITLE").text($("#TITLE").text().replace("%20", " ")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:05:47.633

```
$('b').each(function (i) {
if ($(this).id=='Title');
{ $(this).text($(this).text().replace("%20", " "));

}
}); 
```

# bash - 在bash中的其他引号内使用“$@”

> ID：15022982
> 
> 赞同：3
> 
> 时间：2013-02-22T11:18:56.950
> 
> 标签：bash, command-line-arguments, quotes

这是我要执行的 bash 脚本的代码：打开一个新控制台并在其中执行 clamscan 并带有文件列表

```
gnome-terminal -x sh -c "clamscan $@" 
```

在这里展开之后，如果给脚本的 2 个参数是真正执行的内容
`file1.txt file2.txt`

```
gnome-terminal -x sh -c 'clamscan file1.txt' file2.txt 
```

如您所见，仅`clamscan file1.txt`执行。

如果我尝试另一种方式来编写代码

```
gnome-terminal -x sh -c "clamscan \"$@\"" 
```

这是扩展结果

```
gnome-terminal -x sh -c 'clamscan "file1.txt' 'file2.txt"' 
```

它没有更好的工作。
有谁知道如何正确整合`"$@"`其他报价？

**编辑** 我的目标是在扩展后拥有类似的东西

```
gnome-terminal -x sh -c 'clamscan "file1.txt" "file2.txt"' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:40:11.133

从[`man bash`](http://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters)

> 3.4.2 特殊参数
> @
> 扩展为位置参数，从一开始。当扩展出现在双引号内时，每个参数都扩展为一个单独的单词。也就是说，“$@”*等价*于“$1”“$2”……。

重要的部分是*等价*的，它不会*扩展*为`"$1" "$2"`，即双引号。如果你需要，你有两个选择，自己准备参数

```
for i in "$@"; do
    args="$args \"$i\""
done

gnome-terminal -x clamscan $args 
```

或将部分命令行放入脚本中

脚本.sh：

```
clamscan "$@" 
```

并称之为

```
gnome-terminal -x script.sh file1.txt file2.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:35:57.143

试试这个

```
#!/bin/bash

params=("$@")

for i in "${params[@]}"
do
    string="${string} \'$i\'"
done;

// subst with your full command, this is only for test purposes
sh -c "echo ${string}" 
```

测试：

```
[root@myhost test]# sh ./script.sh aaaa "bbbb cccc"
'aaaa' 'bbbb cccc' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:04:11.080

您可以使用变量替换：`${@/ /\\ }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:00:43.913

尝试：

```
gnome-terminal -x sh -c `echo "$@"` 
```

虽然我不确定我是否理解脚本最终试图做什么（看起来你想要执行一个或多个文件名中可能包含空格的文件）。

# xpath - XPath 提取 Span 的第一部分，其中嵌套了 Strong

> ID：15022984
> 
> 赞同：1
> 
> 时间：2013-02-22T11:19:03.497
> 
> 标签：xpath

xml文件如下：

```
<span>foo
  <strong>bar</strong>
</span> 
```

我希望能够创建一个返回“foo”**而不是**“bar”的 XPath。`//span[1]`返回“富吧”。

如何更改我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:41:57.223

```
//span/text() 
```

`//span`返回所有文本节点，它们是（这里：“foo”）的直接子节点。

* * *

`//span[1]`您尝试返回的第一个`<span/>`元素及其所有内容，因此它实际上应该返回`foo<strong>bar</strong>`. 如果您只想返回第一个文本节点，请像这样扩展上面的查询：

```
//span/text()[1] 
```

对于像这样的输入

```
<span>
  foo
  <strong>bar</strong>
  batz
</span> 
```

这将导致“foobatz”，否则，它仍会将结果集限制为“foo”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:54:06.530

试试这个，

```
xpath string(//span/strong) 
```

这就是我在 xmllint shell 中使用它的方式。您可以直接使用该功能`string`。

# c# - Assync TCP Server 代码示例分析

> ID：15022985
> 
> 赞同：2
> 
> 时间：2013-02-22T11:19:06.720
> 
> 标签：c#, .net, sockets, tcp, asyncsocket

我正在使用以下代码创建一个异步 TCP 服务器：

```
private void SetupServerSocket()
{
    var myEndpoint = new IPEndPoint(IPAddress.Any, _port);

    _serverSocket = new Socket(myEndpoint.Address.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
    _serverSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, true);
    _serverSocket.Bind(myEndpoint);
    _serverSocket.Listen((int)SocketOptionName.MaxConnections);
}

protected void Open()
{
    SetupServerSocket();
    Opened = true;
    _serverSocket.BeginAccept(AcceptCallback, _serverSocket);
}

private void AcceptCallback(IAsyncResult result)
{
    var connection = new ConnectionInfo();
    try
    {
        // Finish Accept
        var s = (Socket)result.AsyncState;
        connection.Socket = s.EndAccept(result);
        connection.Buffer = new byte[8192];

        lock (_connections)
        {
            _connections.Add(connection);
        }

        // Start Receive and a new Accept
        connection.Socket.BeginReceive(connection.Buffer, 0, connection.Buffer.Length, SocketFlags.None, ReceiveCallback, connection); 
        _serverSocket.BeginAccept(AcceptCallback, result.AsyncState);
    }
    catch (SocketException ex)
    {
        CloseConnection(connection);
    }
    catch (Exception ex)
    {
        CloseConnection(connection);
    }
}

private void CloseConnection(ConnectionInfo ci)
    {
        if (ci.Socket != null)
        {
            if (OnDisconnect != null)
                OnDisconnect.Invoke((IPEndPoint)ci.Socket.RemoteEndPoint);

            ci.Socket.Shutdown(SocketShutdown.Both);
            ci.Socket.Close();
        }

        lock (_connections)
        {
            _connections.Remove(ci);
        }
    } 
```

有些事情很难理解：

1 - 使用`_serverSocket.SetSocketOption`我启用了在 TCP 中使用 KeepAlive。我发现默认情况下 Windows 的默认 KeepAlive Timer 为 2 小时！并且使用 Wireshark 确认了此行为。

经过一番谷歌搜索后，我在[http://support.microsoft.com/kb/120642/EN-US](http://support.microsoft.com/kb/120642/EN-US)中发现您可以通过在注册表中创建一个键来更改 Windows KeepAliveTime。我确实喜欢这个支持页面的说明，但是没有应用 KeepAlive 计时器（即使在重新启动后），它仍然是 2 小时。有谁知道如何在 Windows 中更改 KeepAlive 计时器？

2 - 代码`connection.Socket = s.EndAccept(result)`可以抛出异常（通常是 SocketException）。为什么`Socket.EndResult`扔`SocketException`？

3 -如果它已经处于该状态，为什么我们必须`_serverSocket`再次设置为接受状态？`AcceptCallback()`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:32:13.503

1.  我在使用 .net Keep Alive 计时器时遇到了类似的问题。我从来没有找到改变它的方法，所以我们使用的解决方案是让后台工作线程发送少量数据，通常`byte[1]`，如果没有发送其他真实数据，则在给定时间段之后。

2.  Socket.EndAccept() 可以根据[MSDN](http://msdn.microsoft.com/en-us/library/chfa7866.aspx)抛出预期的异常。如果其他地方的套接字发生了某些事情，例如套接字被关闭等，这些通常会发生。您需要正确捕获这些异常并决定您希望程序如何继续。在您的情况下，您似乎只是在关闭连接。

3.  对于首先接受的连接，调用`_serverSocket.BeginAccept(AcceptCallback, result.AsyncState);`只会触发一次回调。在此之后，您必须决定是否要接受更多的未来连接，如果是，请在回调中再次调用 BeginAccept。

# .htaccess - Htaccess 301 在查询结束时重定向附加变量

> ID：15022987
> 
> 赞同：1
> 
> 时间：2013-02-22T11:19:11.967
> 
> 标签：.htaccess, redirect

我正在尝试将一些现有的 mod_rewrite 查询重定向到更好的对应查询，但遇到了一个问题，它将页面的变量附加到 URL 的末尾。

例如，

```
/garden/garden-benches/cat_199.html 
```

正变成：

```
/garden-furniture/patio-furniture/garden-benches-garden-seats/cat_199.html?_a=viewCat&catId=199 
```

我只是不希望最后这些变量。

代码是：

```
RewriteEngine On
Redirect 301 /garden/garden-benches/cat_199.html http://www.sustainable-furniture.co.uk   /garden-furniture/patio-furniture/garden-benches-garden-seats/cat_199.html 
```

.htaccess 文件的其余部分 - 首先是创建 url。

```
RewriteBase /
RewriteCond %{QUERY_STRING} (.*)$
RewriteRule cat_([0-9]+)(\.[a-z]{3,4})?(.*)$    index.php?_a=viewCat&catId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule prod_([0-9]+)(\.[a-z]{3,4})?$   index.php?_a=viewProd&productId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule info_([0-9]+)(\.[a-z]{3,4})?$   index.php?_a=viewDoc&docId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule tell_([0-9]+)(\.[a-z]{3,4})?$   index.php?_a=tellafriend&productId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule _saleItems(\.[a-z]+)?(\?.*)?$   index.php?_a=viewCat&catId=saleItems&%1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:33:11.557

重写和重定向是两个不同的东西。但是，您仍然可以通过标记规则来使用重写进行重定向：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^garden/garden-benches/cat_199\.html$ garden-furniture/patio-furniture/garden-benches-garden-seats/cat_199.html [R=301,L] 
```

**编辑 1** - 我已经删除了`RewriteCond %{REQUEST_FILENAME} !-f`条件。也许它跳过了它，因为`.html`文件是文件，并且不会被规则过滤。

# android - 如何取消 Notification.FLAG_FOREGROUND_SERVICE

> ID：15022990
> 
> 赞同：1
> 
> 时间：2013-02-22T11:19:19.387
> 
> 标签：android

假设您希望显示带有前台服务标志的通知，并使用`nm`它来显示它：

```
Notification notification = new Notification(...);
notification.flags |= Notification.FLAG_FOREGROUND_SERVICE
nm.notify(SOME_ID, notification); 
```

将出现通知。但是，删除它很困难，因为这似乎没有做任何事情：

```
nm.cancel(SOME_ID); 
```

如何取消此通知？stopForeground 不是解决方案，因为我不在服务中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:05:57.867

> 有什么解决办法吗？

如果[这个问题](https://code.google.com/p/android/issues/detail?id=24581)是可信的，那么除了拨打服务电话外，没有`stopForeground()`。您可以通过向您的服务发送命令，`startService()`以便它可以调用`stopForeground()`. 或者，您可以创建一个小型专用`Service`，只需调用`stopForeground()`和`stopSelf()`from `onStartCommand()`，只是为了摆脱此通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T18:40:23.700

解决方案在删除 FLAG_FOREGROUND_SERVICE 并仅使用 0 或 FLAG_ONGOING_EVENT 后，可以分别使通知可取消或不可取消。对我有用，我发现这 [很有帮助将 Android 通知从 FLAG_ONGOING_EVENT 切换为可取消](https://stackoverflow.com/questions/14924240/switching-android-notification-from-flag-ongoing-event-to-cancelable/14933931#14933931)

# iphone - iPhone 证明 Provision Profile 过时没有更新按钮

> ID：15022993
> 
> 赞同：0
> 
> 时间：2013-02-22T11:19:24.740
> 
> 标签：iphone

您是否必须在条款过时之前对其进行更新？我在 Provision Profile 门户中看不到更新按钮。Allso 如果我创建一个新的配置文件，我可以用它来更新我的应用程序而不是新的吗？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:25:49.863

我相信您可以从 XCode Organizer 续订。打开 xcode 管理器到“设备”选项卡。从源列表中，如果您选择“Provisioning Profile”，您应该会看到所有配置文件。每个配置文件旁边都有一个“更新”按钮。也许这就是你要找的。

谢谢，尼鲁马尔。 ![在此处输入图像描述](../Images/7072528d46229aa14887202819b8fe88.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:24:16.933

只需在 developer.apple.com 的 iOS Provisioning Portal 中编辑配置文件即可更新配置文件。它被更新并再次工作一年。

这不适用于分发配置文件，当您再购买一年的程序时，它们会被更新。

当然，您也可以创建新配置文件，但您可能需要使用新配置文件更新所有开发者 iPhone。一种简单的方法是使用 Xcode 来管理您的 Profiles，尤其是 iOS Team Provisioning Profile。

# json - jsonbuilder：如何创建对象映射

> ID：15022995
> 
> 赞同：0
> 
> 时间：2013-02-22T11:19:31.807
> 
> 标签：json, groovy, jsonbuilder

几个小时以来，我一直在尝试使用 jsonBuilder 创建对象映射，但没有成功。我想做的是创建这样的json，这样我就可以像这样处理我的对象：someJsonObject.elements.2。所需的 JSON 看起来像这样（这是完全正确的语法）：

```
{
    "elements": {
        "1": {
            "id": 1,
            "x": 111
        },
        "2": {
            "id": 2,
            "x": 222
        },
        "3": {
            "id": 3,
            "x": 333
        }
    }
} 
```

到目前为止，我用这段代码得到了最好的结果：

```
builder.elements() {
    elementList.each { Element e ->
        element( id : e.id, x : e.x )
        println "dodano"
    }
} 
```

但我得到的只是在我的 json 中打印的一个元素：

```
{
    "elements": {
        "element": {
            "id": 3,
            "x": 333
        }
    }
} 
```

如果我只能动态命名我的对象，例如这样：

```
builder.elements() {
        elementList.each { Element e ->
            e.id( id : e.id, x : e.x )
            println "dodano"
        }
    } 
```

但它给了我一个错误：没有方法签名：com.webwaver.website.Element.id() 适用于参数类型：(java.util.LinkedHashMap) 值：[[id:3, x:748]]

有谁知道如何获得所需的json？

编辑：谢谢你的回答。这很有帮助，但是由于我不能使用方法调用 builder.elements() 我仍然在创建 json 时遇到问题，看起来像这样：

```
{
    "data": {
        "lastPageNr": 1,
        "lastLanguageId": 1,
        "lastElementNr": 0,
        "websiteId": "nrpntf"
    },
    "elements": {
        "1": {
            "id": 1,
            "x": 111
        },
        "2": {
            "id": 2,
            "x": 222
        },
        "3": {
            "id": 3,
            "x": 333
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:41:39.480

这为您提供了所需的输出：

```
import groovy.json.*

def builder = new JsonBuilder()
builder.elements {
  "1" {
    id 1
    x  111
  }
  "2" {
    id 2
    x  222
  }
  "3" {
    id 2
    x  222
  }
}
println builder.toPrettyString() 
```

所以你想要的基于列表的构建器是这样的：

```
def elementList = [ [ id: 3, x:748 ], [ id: 4, x:222 ] ]
def builder = new JsonBuilder()
builder.elements {
  elementList.each { e ->
    "$e.id" {
      id e.id
      x  e.x
    }
  }
}
println builder.toPrettyString() 
```

### 编辑 - 在您更改问题后：

```
def builder = new JsonBuilder()
builder {
  data {
    lastPageNr 1
    lastLanguageId 1
    lastElementNr 0
    websiteId 'nrpntf'
  }
  elements {
    elementList.each { e ->
      "$e.id" {
        id e.id
        x  e.x
      }
    }
  }
}
println builder.toPrettyString() 
```