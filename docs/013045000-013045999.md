# StackOverflow 问答 13045000-13045999

# actionscript-3 - as3 创建和删除子级

> ID：13045004
> 
> 赞同：0
> 
> 时间：2012-10-24T07:58:41.147
> 
> 标签：actionscript-3

我想在点击按钮时创建一个孩子，然后当点击孩子时，它会删除孩子......这可行，但是当我再次点击按钮时，孩子不会再次被创建。

我怎样才能做到这一点？这是我的代码：

```
var bikeride:MovieClip = new ridingbike();
ridinb.addEventListener(MouseEvent.CLICK, openbike); 
function openbike(evt:MouseEvent):void { 

addChild(bikeride);
} 

bikeride.addEventListener(MouseEvent.CLICK, closebike); 
function closebike(evt:MouseEvent):void { 
    bikeride.removeChildAt(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:01:16.073

您可以使用以下方法删除孩子：

```
removeChild(bikeride);; 
```

如果你不存储`bikeride`实例，你可以这样做：

```
function closebike(evt:MouseEvent):void { 
    var bike:DisplayObject = DisplayObject(evt.target);
    bike.parent.removeChild(bike);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:04:33.623

添加到 Florent 的答案中，您可能还希望删除事件侦听器并`bikeride`在尝试使用它之前检查是否有父级。这避免了空对象引用错误并确保`bikeride`收集垃圾（从内存中删除，释放资源）。

```
bikeride.addEventListener(MouseEvent.CLICK, closebike); 

function closebike(evt:MouseEvent):void
{
    if(bikeride.parent)
    {
        bikeride.parent.removeChild(bikeride);
    }

    bikeride.removeEventListener(MouseEvent.CLICK, closebike);
} 
```

如果您希望您的对象被正确“删除”，那么删除事件侦听器非常重要。

# linux - Get topmost CPU usage PID and output it to a file

> ID：13045008
> 
> 赞同：2
> 
> 时间：2012-10-24T07:58:56.313
> 
> 标签：linux, process, cpu-usage

I want to count the CPU usage approximately but I don't want to use accton or any other software. Just only script. Can I use top to get the topmost CPU usage or memory usage's process name? When I use top -b I get a lot of unuseful information.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:06:38.933

For cpu usage:

```
ps -eo comm,%cpu --no-headers | sort -k2 -nr | head -1 
```

For memory:

```
 ps -eo comm,%mem --no-headers | sort -k2 -nr | head -1 
```

# java - 大数的 java.lang.NumberFormatException

> ID：13045009
> 
> 赞同：1
> 
> 时间：2012-10-24T07:58:58.153
> 
> 标签：java

在下面的代码中，我在输入 ~1000000000 的大数字时收到 java.lang.NumberFormatException。错误发生在倒数第二行 -\

```
int integer = Integer.parseInt(split[0]); 
```

它应该在理论上工作，因为整数类型支持直到 2^32-1 但它不

```
Scanner user_input = new Scanner(System.in);
//accept user input and convert into double
String s = user_input.next();
double number = Double.parseDouble(s);
System.out.println(number);

String answer = "";

//Split the entered number into Integer and Decimal parts
String split[] = Double.toString(number).split("\\.");
int integer = Integer.parseInt(split[0]);
int decimal = Integer.parseInt(split[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:03:12.513

问题可能是因为大双精度数的表示将采用科学记数法：

```
1.0E9 
```

这将意味着拆分失败，请尝试打印出您正在解析的字符串的值。

当您在 double 上调用 toString 时，使用的格式可能会有所不同，请尝试改用[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)：

```
new java.text.DecimalFormat("0.00000000").format(number) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:02:52.170

根据[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)，当“无法将字符串解析为整数”时会发生这种情况。除其他原因外，如果该值超过`Integer.MAX_VALUE`或，就会出现这种情况`Integer.MIN_VALUE`。

所以大于约 20 亿或小于负 20 亿的事物（准确地说是 2^31-1 和 -2^31）。您的示例 -1,000,000,000（添加逗号）应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:03:22.677

问题是巨大的数字被表示为相似`1.E9`或相似。因此，当您进行拆分以获得您将获得的`integer`价值`1`以及`decimal`您将获得`E9`的不是数字的部分时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:40:59.117

当然，数字 1000000000 是有效的，但我怀疑字符 ~ 会导致 NumberFormatException。无论如何你应该小心这段代码，因为像这样的数字 1.34184E24 在java中是一个有效的 Double 但是使用 Integer.parseInt 解析十进制拆分也会导致 NumberFormatException 因为有一个 E。

# android - R.java 是手动修改的。恢复到生成的版本

> ID：13045012
> 
> 赞同：-1
> 
> 时间：2012-10-24T07:59:02.270
> 
> 标签：android

出现错误如何修复？R.java 是手动修改的！恢复到生成的版本！排空 setContentView(R.layout.main);

```
enter code here

package com.sposib.urav;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class UravActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
private EditText A;
private EditText B;
private EditText C;
private Button Clean;
private Button Solve;
private static final double ACCURACY=1000;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    A=(EditText) findViewById(R.id.a);
    B=(EditText) findViewById(R.id.b);
    C=(EditText) findViewById(R.id.c);
    Clean=(Button) findViewById(R.id.cl);
    Solve=(Button) findViewById(R.id.sl);
    Clean.setOnClickListener(this);
    Solve.setOnClickListener(this); 
```

谢谢阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:06:09.013

AFAME，请执行以下操作

1.查看manifest中的包名。

2.在顶部菜单上，按项目>>清理。

你会发现生成的 R.java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:03:07.920

正如 developer.android.com 所建议的，只需通过创建一个新的 android 项目在 eclipse 中重新运行完整的代码。它将生成新的 R.java。为什么要编辑 R.java？你不应该在那里做任何改变！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:01:51.483

r.java 文件是自动生成的，因此您无法自行修改它。您可以做的是提供其余代码，以便可以找到错误。

# ruby - Ruby：通过自定义 dns 服务器强制 dns 解析

> ID：13045013
> 
> 赞同：3
> 
> 时间：2012-10-24T07:59:03.080
> 
> 标签：ruby, dns

我想通过 DNS 服务器解析从 Ruby 脚本中发出的 DNS 请求，这与 resolv.conf 中的请求不同。虽然我可以通过使用 Resolv::DNS 或类似的东西手动执行此操作，但我想对所有请求（例如，由 RestClient 发出的请求）执行此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-02T14:09:31.477

RestClient 使用`net/http`并使用提供的 URL 的主机名部分来打开 TCP 套接字：

[https://github.com/ruby/ruby/blob/trunk/lib/net/http.rb?source=cc#L879](https://github.com/ruby/ruby/blob/trunk/lib/net/http.rb?source=cc#L879)

更改访问哪个主机的最简单方法是通过自己执行查找手动更改 URL 以使用 IP 地址。

或者，您可以替换各种`*Socket`类的解析器，实际上这里有一个如何执行此操作的示例：[https ://github.com/ruby/ruby/blob/4c2304f0004e9f1784540f3d36976aad9eab1f68/lib/resolv-replace.rb](https://github.com/ruby/ruby/blob/4c2304f0004e9f1784540f3d36976aad9eab1f68/lib/resolv-replace.rb)

# osgi - Eclipse bundle 项目能否引用部署在 Web 应用程序中的 Apache felix 来导入包？

> ID：13045016
> 
> 赞同：1
> 
> 时间：2012-10-24T07:59:10.377
> 
> 标签：osgi, apache-felix

我对 OSGi 真的很陌生。我能够运行 struts2 OSGi 示例项目，它从 Web 应用程序启动 Apache felix。我正在使用 Jetty 从 Eclipse 部署 Web 应用程序，我认为这是一个单独的 jvm 进程。

现在我正在尝试创建一个捆绑项目，该项目应该从已部署的“struts2 OSGi 示例项目”应用程序中导入包。但我不知道如何设置 eclipse 以指向已部署的 felix 包。

我的项目看起来像这样[http://classreloadingwebapp.blogspot.sg/2012/04/class-reloading-4-using-struts2-osgi.html](http://classreloadingwebapp.blogspot.sg/2012/04/class-reloading-4-using-struts2-osgi.html)

但是我现在不知道如何开始创建捆绑包，因为我无法导入包。

# mysql - Mysql InnoDB 从读取中锁定行

> ID：13045021
> 
> 赞同：4
> 
> 时间：2012-10-24T07:59:40.930
> 
> 标签：mysql, transactions, locking, isolation, mvcc

我已经阅读了 mysql 文档，也许我只是不明白这一切。我正在寻找的是读取其他会话**的****行锁定。**当该行被锁定时，我希望其他会话**等到**锁定被释放。我不希望其他会话从快照中读取！他们必须等到发布！

 ****我想得到的与以下示例完全相同，但对于**单行**而不是整个表锁：

```
START TRANSACTION
LOCK TABLES table1 WRITE
SELECT * FROM table1 WHERE id = 40912
UPDATE table1 SET column1 = 'value1' WHERE id = 40912
UNLOCK TABLES
COMMIT 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:06:25.580

Elena Sharovar 的回答是一种方法，但可能没有完全解释需要什么。**每个**要执行 SELECT 的进程都需要使用具有相同字符串的 GET_LOCK。如果他们这样做了，MySQL 将自动等待（最多指定的秒数）返回结果，直到另一个线程释放锁。

这是发生的事情，时间从上到下进行：

```
 THREAD 1                                 THREAD 2
DO GET_LOCK("table1.40912", 30)
SELECT * FROM table1 WHERE id=40912     DO GET_LOCK("table1.40912", 30)
[UPDATE query]                          [automatically waits]
[UPDATE query]                          [automatically waits]
DO RELEASE_LOCK("table1.40912")         [lock finally obtained, query terminates]
                                        SELECT * FROM table1 WHERE id=40912 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:24:01.207

我对这个有趣的问题（如何强制 MySQL 不读取快照，即使快照是一致的）的最佳想法是使用“FOR UPDATE”读取所有内容，如“SELECT FOR UPDATE #select-clause#” .

但是，这些选择使用非常窄的索引来查找记录非常重要，这意味着它们会锁定所读取的内容。通过全表扫描甚至 USING WHERE（在 EXPLAIN 语句中）运行 SELECT 会很糟糕，表大区域的长时间锁定可能会导致潜在的较长反应时间。

我建议您在数据库抽象层中对其进行测试。

[您可以在隔离文档](https://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)中阅读有关此机制的所有信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:11:12.903

我还没有尝试这样做，但是可以使用 MySQL 函数 GET_LOCK(str,timeout) 和 RELEASE_LOCK(str)。这里的“str”是标识你的锁的任何字符串。

```
mysql_query('DO GET_LOCK("table1.40912", 60)')
mysql_query('SELECT * FROM table1 WHERE id = 40912')
mysql_query('UPDATE table1 SET column1 = 'value1' WHERE id = 40912')
mysql_query('DO RELEASE_LOCK("table1.40912")') 
```****

# xcode - libCordova.a 保持红色，未找到文件

> ID：13045025
> 
> 赞同：1
> 
> 时间：2012-10-24T07:59:50.410
> 
> 标签：xcode, cordova, cordova-2.0.0

我需要一些帮助。我已经为 phonegap/xcode 构建挣扎了好几天，但无法弄清楚。libCordova.a 保持红色（找不到文件），我不明白为什么。所以我放弃并在 xcode 中设置了一个全新的项目，使用 cordova 2.1.0 命令行工具。但是当我查看 Projects 文件夹时，我发现 libCordova.a 再次找不到。

[截图 http://imageshack.us/a/img443/6529/bildschirmfoto20121024u.png](http://imageshack.us/a/img443/6529/bildschirmfoto20121024u.png)

这里有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T13:49:45.560

您可以在设备/模拟器上进行测试和构建，但存档和提交可能会出现一些错误。请检查：

[PhoneGap 2.9 中缺少 libCordova.a 文件](https://stackoverflow.com/questions/17401478/libcordova-a-file-missing-in-phonegap-2-9)

或者

[Xcode 4.5 没有这样的文件或目录 - libCordova.a](https://stackoverflow.com/questions/12716830/xcode-4-5-no-such-file-or-directory-libcordova-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:46:57.003

您没有报告实际出现的错误消息，所以我假设您没有尝试构建/运行您的应用程序。

我也建立了一个全新的 Cordova 项目。即使运行应用程序的 libCordova.a 显示为红色，也可以正常工作。所以我的回答是你没有遇到实际问题。只需点击运行按钮，一切都会好起来的。

如果这不能解决您的问题，请报告。

# iphone - PopToViewController 显示正确的 ViewController，但导航栏错误

> ID：13045026
> 
> 赞同：2
> 
> 时间：2012-10-24T07:59:53.810
> 
> 标签：iphone, ios

我有一个应用程序，其中第一个视图是登录屏幕，用户名和密码用于整个应用程序的身份验证。如果身份验证过程中出现问题，用户将被抛回登录屏幕，但如果用户在导航栏中按下返回按钮时出现问题，则应用程序显示登录屏幕正确，但导航栏将从它应该显示的视图中显示按钮。

示例：如果用户在视图 B 上按下后退按钮，应用程序应该显示视图 A，但出现问题，应用程序将显示登录屏幕，但导航栏是来自视图 A 的导航栏。

我尝试了几件事，但最接近的是：在视图 B 的 ViewWillDisappear 中：

```
 NSArray * nc = [self.navigationController viewControllers];
    [self.navigationController popToViewController:[nc objectAtIndex:0] animated:YES]; 
```

它给出了上述结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:06:32.940

在您的 LoginController 中覆盖 viewWillAppear: 方法并根据需要设置导航栏按钮：

```
-(void) viewWillAppear:(BOOL) animated
{
  [super viewWillAppear:animated];

  //Example :
  self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"AText" style:UIBarButtonItemStyleBordered target:self action:@selector(anAction)];
} 
```

如果您不使用 ARC，请记住将 autorelease 添加到 leftBarButton Item ：

```
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"AText" style:UIBarButtonItemStyleBordered target:self action:@selector(anAction)] autorelease]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T08:13:01.580

成功登录后删除登录屏幕 [self.window removeFromsuperview] 然后它将从导航中删除登录屏幕。接受我的ans，如果它发生谢谢你

# android - android中的音频音高变化

> ID：13045030
> 
> 赞同：1
> 
> 时间：2012-10-24T07:59:59.807
> 
> 标签：android

我正在开发一个与声音相关的应用程序。我正在尝试将音频声音更改为完全不同的声音，例如机器人声音或使音频回声。我试过 soundpool ，但不知道，有人知道如何实现吗？我只需要一个基本的想法来实现这一点，请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:16:06.797

音高和回声是两个不同的东西。

**沥青：**

您可以通过修改播放速率来改变音高。您可以通过 2 种方式进行操作，使用**audioTrack**和[setPlayBackRate](http://developer.android.com/reference/android/media/AudioTrack.html#setPlaybackRate%28int%29)或使用**SoundPool**和[setRate](http://developer.android.com/reference/android/media/SoundPool.html#setRate%28int,%20float%29)。取决于您的需要，AudioTrack 允许在大文件上进行更大范围的音高（从 1hz 到 x2），而 SoundPool 用于音效和 picth 可以在 x0.5 和 x2 之间变化。

**回声/混响：**

从 API lvl 9 起，您可以通过将它附加到 AudioTrack 或 MediaPlayer 实例来使用 AudioEffect[归档它。](http://developer.android.com/reference/android/media/audiofx/AudioEffect.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:32:42.107

对于机器人效果，您需要为音频设置一个恒定的音高。即进行 FFT，将所有内容移入单个频率仓，然后进行逆 FFT 以返回时域。

对于回声效果，您可以保留一个单独的缓冲区，该缓冲区与您想要的回声延迟一样长。对于每个示例，请执行以下操作（伪代码）：

```
output = mix(currentSample, echoBuffer[echoPos]*echoVolume)
echoBuffer[echoPos] = mix(currentSample, echoBuffer[echoPos]*echofeedback)
echoPos += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:05:52.137

我正在做一个类似的项目，我可以说你需要研究 DSP（数字信号处理）、PCM 16 格式，最好是傅立叶变换。

可以使用 AudioRecord 类回送音频（运行一个线程不断填充 AudioTrack 上的缓冲区）

但是对于您要完成的工作，延迟可能太大了。

祝你一切顺利！

一些非常好的建议： [Android AudioRecord 类 - 快速处理现场麦克风音频，设置回调函数](https://stackoverflow.com/questions/4525206/android-audiorecord-class-process-live-mic-audio-quickly-set-up-callback-func)

# r - 从逻辑回归列表中提取系数的所有标准误差

> ID：13045032
> 
> 赞同：4
> 
> 时间：2012-10-24T08:00:15.323
> 
> 标签：r, logistic-regression, coefficients, standard-error

我想从逻辑回归模型列表中提取标准误差。

### 这是逻辑回归函数，以这种方式设计，因此我可以一次运行多个分析：

```
glmfunk <- function(x) glm(  ldata$DFREE ~  x , family=binomial) 
```

### 我在数据框 ldata 中的变量子集上运行它：

```
glmkort <- lapply(ldata[,c(2,3,5,6,7,8)],glmfunk) 
```

### 我可以像这样提取系数：

```
sapply(glmkørt, "[[", "coefficients") 
```

**但是我如何提取系数的标准误差？我似乎在 str(glmkort) 中找不到它？**

这是我正在寻找标准错误的 AGE 的 str(glmkort)：

```
str(glmkort)
List of 6
 $ AGE    :List of 30
  ..$ coefficients     : Named num [1:2] -1.17201 -0.00199
  .. ..- attr(*, "names")= chr [1:2] "(Intercept)" "x"
  ..$ residuals        : Named num [1:40] -1.29 -1.29 -1.29 -1.29 4.39 ...
  .. ..- attr(*, "names")= chr [1:40] "1" "2" "3" "4" ...
  ..$ fitted.values    : Named num [1:40] 0.223 0.225 0.225 0.225 0.228 ...
  .. ..- attr(*, "names")= chr [1:40] "1" "2" "3" "4" ...
  ..$ effects          : Named num [1:40] 3.2662 -0.0282 -0.4595 -0.4464 2.042 ...
  .. ..- attr(*, "names")= chr [1:40] "(Intercept)" "x" "" "" ...
  ..$ R                : num [1:2, 1:2] -2.64 0 -86.01 14.18
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:2] "(Intercept)" "x"
  .. .. ..$ : chr [1:2] "(Intercept)" "x"
  ..$ rank             : int 2
  ..$ qr               :List of 5
  .. ..$ qr   : num [1:40, 1:2] -2.641 0.158 0.158 0.158 0.159 ...
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:40] "1" "2" "3" "4" ...
  .. .. .. ..$ : chr [1:2] "(Intercept)" "x"
  .. ..$ rank : int 2
  .. ..$ qraux: num [1:2] 1.16 1.01
  .. ..$ pivot: int [1:2] 1 2
  .. ..$ tol  : num 1e-11
  .. ..- attr(*, "class")= chr "qr"
  ..$ family           :List of 12
  .. ..$ family    : chr "binomial"
  .. ..$ link      : chr "logit"
  .. ..$ linkfun   :function (mu)  
  .. ..$ linkinv   :function (eta)  
  .. ..$ variance  :function (mu)  
  .. ..$ dev.resids:function (y, mu, wt)  
  .. ..$ aic       :function (y, n, mu, wt, dev)  
  .. ..$ mu.eta    :function (eta)  
  .. ..$ initialize:  expression({     if (NCOL(y) == 1) {         if (is.factor(y))              y <- y != levels(y)[1L]         n <- rep.int(1, nobs)         y[weights == 0] <- 0         if (any(y < 0 | y > 1))              stop("y values must be 0 <= y <= 1")         mustart <- (weights * y + 0.5)/(weights + 1)         m <- weights * y         if (any(abs(m - round(m)) > 0.001))              warning("non-integer #successes in a binomial glm!")     }     else if (NCOL(y) == 2) {         if (any(abs(y - round(y)) > 0.001))              warning("non-integer counts in a binomial glm!")         n <- y[, 1] + y[, 2]         y <- ifelse(n == 0, 0, y[, 1]/n)         weights <- weights * n         mustart <- (n * y + 0.5)/(n + 1)     }     else stop("for the binomial family, y must be a vector of 0 and 1's\n", "or a 2 column matrix where col 1 is no. successes and col 2 is no. failures") })
  .. ..$ validmu   :function (mu)  
  .. ..$ valideta  :function (eta)  
  .. ..$ simulate  :function (object, nsim)  
  .. ..- attr(*, "class")= chr "family"
  ..$ linear.predictors: Named num [1:40] -1.25 -1.24 -1.24 -1.24 -1.22 ...
  .. ..- attr(*, "names")= chr [1:40] "1" "2" "3" "4" ...
  ..$ deviance         : num 42.7
  ..$ aic              : num 46.7
  ..$ null.deviance    : num 42.7
  ..$ iter             : int 4
  ..$ weights          : Named num [1:40] 0.173 0.174 0.174 0.174 0.176 ...
  .. ..- attr(*, "names")= chr [1:40] "1" "2" "3" "4" ...
  ..$ prior.weights    : Named num [1:40] 1 1 1 1 1 1 1 1 1 1 ...
  .. ..- attr(*, "names")= chr [1:40] "1" "2" "3" "4" ...
  ..$ df.residual      : int 38
  ..$ df.null          : int 39
  ..$ y                : Named num [1:40] 0 0 0 0 1 0 1 0 0 0 ...
  .. ..- attr(*, "names")= chr [1:40] "1" "2" "3" "4" ...
  ..$ converged        : logi TRUE
  ..$ boundary         : logi FALSE
  ..$ model            :'data.frame':   40 obs. of  2 variables:
  .. ..$ ldata$DFREE: int [1:40] 0 0 0 0 1 0 1 0 0 0 ...
  .. ..$ x          : int [1:40] 39 33 33 32 24 30 39 27 40 36 ...
  .. ..- attr(*, "terms")=Classes 'terms', 'formula' length 3 ldata$DFREE ~ x
  .. .. .. ..- attr(*, "variables")= language list(ldata$DFREE, x)
  .. .. .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. .. ..$ : chr [1:2] "ldata$DFREE" "x"
  .. .. .. .. .. ..$ : chr "x"
  .. .. .. ..- attr(*, "term.labels")= chr "x"
  .. .. .. ..- attr(*, "order")= int 1
  .. .. .. ..- attr(*, "intercept")= int 1
  .. .. .. ..- attr(*, "response")= int 1
  .. .. .. ..- attr(*, ".Environment")=<environment: 0x017a5674> 
  .. .. .. ..- attr(*, "predvars")= language list(ldata$DFREE, x)
  .. .. .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
  .. .. .. .. ..- attr(*, "names")= chr [1:2] "ldata$DFREE" "x"
  ..$ call             : language glm(formula = ldata$DFREE ~ x, family = binomial)
  ..$ formula          :Class 'formula' length 3 ldata$DFREE ~ x
  .. .. ..- attr(*, ".Environment")=<environment: 0x017a5674> 
  ..$ terms            :Classes 'terms', 'formula' length 3 ldata$DFREE ~ x
  .. .. ..- attr(*, "variables")= language list(ldata$DFREE, x)
  .. .. ..- attr(*, "factors")= int [1:2, 1] 0 1
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. ..$ : chr [1:2] "ldata$DFREE" "x"
  .. .. .. .. ..$ : chr "x"
  .. .. ..- attr(*, "term.labels")= chr "x"
  .. .. ..- attr(*, "order")= int 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=<environment: 0x017a5674> 
  .. .. ..- attr(*, "predvars")= language list(ldata$DFREE, x)
  .. .. ..- attr(*, "dataClasses")= Named chr [1:2] "numeric" "numeric"
  .. .. .. ..- attr(*, "names")= chr [1:2] "ldata$DFREE" "x"
  ..$ data             :<environment: 0x017a5674> 
  ..$ offset           : NULL
  ..$ control          :List of 3
  .. ..$ epsilon: num 1e-08
  .. ..$ maxit  : num 25
  .. ..$ trace  : logi FALSE
  ..$ method           : chr "glm.fit"
  ..$ contrasts        : NULL
  ..$ xlevels          : Named list()
  ..- attr(*, "class")= chr [1:2] "glm" "lm"
 $ BECK   :List of 30 
```

### 这是我用于示例的数据。为了这个问题，我缩短了它：

```
> ldata
   ID AGE   BECK IVHX NDRUGTX RACE TREAT SITE DFREE
1   1  39  9.000    3       1    0     1    0     0
2   2  33 34.000    2       8    0     1    0     0
3   3  33 10.000    3       3    0     1    0     0
4   4  32 20.000    3       1    0     0    0     0
5   5  24  5.000    1       5    1     1    0     1
6   6  30 32.550    3       1    0     1    0     0
7   7  39 19.000    3      34    0     1    0     1
8   8  27 10.000    3       2    0     1    0     0
9   9  40 29.000    3       3    0     1    0     0
10 10  36 25.000    3       7    0     1    0     0
11 11  38 18.900    3       8    0     1    0     0
12 12  29 16.000    1       1    0     1    0     0
13 13  32 36.000    3       2    1     1    0     1
14 14  41 19.000    3       8    0     1    0     0
15 15  31 18.000    3       1    0     1    0     0
16 16  27 12.000    3       3    0     1    0     0
17 17  28 34.000    3       6    0     1    0     0
18 18  28 23.000    2       1    0     1    0     0
19 19  36 26.000    1      15    1     1    0     1
20 20  32 18.900    3       5    0     1    0     1
21 21  33 15.000    1       1    0     0    0     1
22 22  28 25.200    3       8    0     0    0     0
23 23  29  6.632    2       0    0     0    0     0
24 24  35  2.100    3       9    0     0    0     0
25 25  45 26.000    3       6    0     0    0     0
26 26  35 39.789    3       5    0     0    0     0
27 27  24 20.000    1       3    0     0    0     0
28 28  36 16.000    3       7    0     0    0     0
29 29  39 22.000    3       9    0     0    0     1
30 30  36  9.947    2      10    0     0    0     0
31 31  37  9.450    3       1    0     0    0     0
32 32  30 39.000    3       1    0     0    0     0
33 33  44 41.000    3       5    0     0    0     0
34 34  28 31.000    1       6    1     0    0     1
35 35  25 20.000    1       3    1     0    0     0
36 36  30  8.000    3       7    0     1    0     0
37 37  24  9.000    1       1    0     0    0     0
38 38  27 20.000    1       1    0     0    0     0
39 39  30  8.000    1       2    1     0    0     1
40 40  34  8.000    3       0    0     1    0     0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T08:30:46.920

使用来自的示例`?glm`

```
## Dobson (1990) Page 93: Randomized Controlled Trial :
counts <- c(18,17,15,20,10,20,25,13,12)
outcome <- gl(3,1,9)
treatment <- gl(3,3)
glm.D93 <- glm(counts ~ outcome + treatment, family=poisson())

## copy twice to a list to illustrate
lmod <- list(mod1 = glm.D93, mod2 = glm.D93) 
```

然后我们可以随意计算它们`summary()`，或者在调用之后提取它们`summary()`。前者效率更高，因为你只计算你想要的。后者不依赖于了解标准误差是如何得出的。

## 直接计算标准误

标准误差可以从模型的方差-协方差矩阵中计算出来。该矩阵的对角线包含系数的方差，标准误差只是这些方差的平方根。提取器`vcov()`函数为我们获取方差 - 协方差矩阵，我们将对角线平方根`sqrt(diag())`：

```
> lapply(lmod, function(x) sqrt(diag(vcov(x))))
$mod1
(Intercept)    outcome2    outcome3  treatment2  treatment3 
  0.1708987   0.2021708   0.1927423   0.2000000   0.2000000 

$mod2
(Intercept)    outcome2    outcome3  treatment2  treatment3 
  0.1708987   0.2021708   0.1927423   0.2000000   0.2000000 
```

## 从调用中提取它们`summary()`

或者我们可以让`summary()`计算标准错误（以及*更多*），然后使用`lapply()`或`sapply()`应用一个匿名函数，该函数提取`coef(summary(x))`并获取第二列（存储标准错误）。

```
lapply(lmod, function(x) coef(summary(x))[,2]) 
```

这使

```
> lapply(lmod, function(x) coef(summary(x))[,2])
$mod1
(Intercept)    outcome2    outcome3  treatment2  treatment3 
  0.1708987   0.2021708   0.1927423   0.2000000   0.2000000 

$mod2
(Intercept)    outcome2    outcome3  treatment2  treatment3 
  0.1708987   0.2021708   0.1927423   0.2000000   0.2000000 
```

而`sapply()`会给：

```
> sapply(lmod, function(x) coef(summary(x))[,2])
                 mod1      mod2
(Intercept) 0.1708987 0.1708987
outcome2    0.2021708 0.2021708
outcome3    0.1927423 0.1927423
treatment2  0.2000000 0.2000000
treatment3  0.2000000 0.2000000 
```

根据您想要做的事情，您可以通过一次调用提取系数和标准误差：

```
> lapply(lmod, function(x) coef(summary(x))[,1:2])
$mod1
                 Estimate Std. Error
(Intercept)  3.044522e+00  0.1708987
outcome2    -4.542553e-01  0.2021708
outcome3    -2.929871e-01  0.1927423
treatment2   1.337909e-15  0.2000000
treatment3   1.421085e-15  0.2000000

$mod2
                 Estimate Std. Error
(Intercept)  3.044522e+00  0.1708987
outcome2    -4.542553e-01  0.2021708
outcome3    -2.929871e-01  0.1927423
treatment2   1.337909e-15  0.2000000
treatment3   1.421085e-15  0.2000000 
```

但是您可能更喜欢单独使用它们？

# php - 在 Silex 中获取所有已安装的控制器集合/提供程序

> ID：13045035
> 
> 赞同：3
> 
> 时间：2012-10-24T08:00:31.843
> 
> 标签：php, silex

有没有办法在 Silex 中获取所有已安装的控制器集合/提供程序？

所以当我有类似的东西时：

```
$app->mount("/faq", new FaqControllerProvider());
$app->mount("/", new HomepageControllerProvider()); 
```

我可以轻松地`mount`在最后安装的控制器 (HomepageControllerProvider) 中获取所有 -ed 控制器集合/提供程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:33:57.587

Silex 不包含对控制器提供程序的引用。您可以`RouteCollection`通过`routes`服务访问。

如果您确实需要访问该信息，您可以为`Application`实际应用程序创建一个装饰器，捕获对这些信息的调用`mount`并让您访问该信息。

# iphone - 删除 BCTabBar 中的 NavigaionBar

> ID：13045036
> 
> 赞同：0
> 
> 时间：2012-10-24T08:00:35.760
> 
> 标签：iphone, ios, uitabbarcontroller

我试图用 BCTabBar 之类的动画制作 CustomTabBar

我在 AppDelegate 中编写了这段代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.   tabBarController.delegate = self;
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.tabBarController = [[BCTabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:[[UINavigationController alloc]
                                                                       initWithRootViewController:[[ProfileViewController alloc] init]],  [[ChargeViewController alloc] init],
                                             [[OffersViewController alloc] init],
                                             [[ContactUsViewController alloc] init],
                                             nil,nil];

    [self.window addSubview:self.tabBarController.view];
    [self.window makeKeyAndVisible];
    return YES;

} 
```

它工作正常但我想删除 RootViewController 中的 NavigationBar 我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:35:31.710

在`ProfileViewController`课堂上写`[[self navigationController] setNavigationBarHidden:YES animated:NO];`。那应该隐藏导航栏。如果您需要在其他任何地方显示它，您可以再次将其设置为`[[self navigationController] setNavigationBarHidden:NO animated:NO];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:11:26.510

你不能隐藏标签栏吗？

```
- (void)hideTabBar:(BCTabBarController *) tabbarcontroller
{
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[BCTabBarController class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }
    }
} 
```

# asp.net - 贝宝API端点

> ID：13045038
> 
> 赞同：2
> 
> 时间：2012-10-24T08:00:43.300
> 
> 标签：asp.net, paypal

我正在使用 PayPal Express Checkout。添加沙盒服务参考后

```
(https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl) 
```

我得到了以下端点地址：

```
https://api.sandbox.paypal.com/2.0/ 
```

但是，此链接未运行并出现以下错误：

```
An error occurred during a connection to api.sandbox.paypal.com.

SSL peer was unable to negotiate an acceptable set of security parameters.

(Error code: ssl_error_handshake_failure_alert) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:27:18.750

您使用了错误的端点。对于 SOAP，您将使用以下...

带签名的实时服务器：[https ://api-3t.paypal.com/2.0/](https://api-3t.paypal.com/2.0/)

带证书的实时服务器：[https ://api.paypal.com/2.0/](https://api.paypal.com/2.0/)

带签名的沙盒服务器： [https ://api-3t.sandbox.paypal.com/2.0/](https://api-3t.sandbox.paypal.com/2.0/)

带证书的沙盒服务器：[https ://api.sandbox.com/2.0/](https://api.sandbox.com/2.0/)

有关更多详细信息，请参阅[PayPal SOAP 文档](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_API_Reference.pdf)的第 18 页。

# css - 区域设置更改后网页字体更改 IE8

> ID：13045039
> 
> 赞同：1
> 
> 时间：2012-10-24T08:00:45.540
> 
> 标签：css, internet-explorer-8

在我的网页中，可以使用美国英语进行演示。但是我们的 Web 应用程序支持 Locale。

当我使用美国英语浏览器语言时，即使我更改了默认浏览器字体，也可以根据我的 css 查看网页。

但是当我更改为浏览器语言日语（JP）时，网页使用默认浏览器字体，而不是在 css 中使用我的字体。

为什么会发生？？我想知道怎么修改。

**PS：** 我使用IE8出现问题，但是在firefox 15.0.1和chrome 22.0版本中没有出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:53:06.437

据我了解， [CSS字体属性](http://www.w3schools.com/cssref/pr_font_font.asp)说

> font-size 和 font-family 值是必需的。如果缺少其他值之一，则将插入默认值（如果有）。

当我使用**英语语言环境**（将浏览器语言更改为英语）时，其中一种字体 [arial,helvetica,clean,sans-serif] 可用。所以我的网页工作正常。

但是当我更改为**日语语言环境**（将浏览器语言更改为日语）时，我的 css 中使用的这些字体都不可用。因此使用浏览器默认浏览器字体。每当我更改浏览器默认字体时，我的网页显示也会更改。

**更正**`MS PGothic`是在我的 css中添加一个日文字体。喜欢

```
font-family: MS PGothic, Arial, sans-serif; 
```

或者

```
html *
{
    font-family: MS PGothic !important;
} 
```

因此，当浏览器语言为日语时，`MS PGothic`使用。[您可以在http://www.electrictoolbox.com/using-important-css/](http://www.electrictoolbox.com/using-important-css/)中阅读 CSS !important

这是我对我的问题的理解和纠正。让我知道是否存在更好的方法。

# java - Java HttpURLConnection 获取所有内容包括css、img等

> ID：13045047
> 
> 赞同：0
> 
> 时间：2012-10-24T08:01:18.350
> 
> 标签：java, servlets, header, request, httpurlconnection

我的要求是做 Web 应用程序以获取目标内容，并且必须使用 HttpURLConnection 添加请求标头。

我使用此代码

```
 try{
        String urlStr = "http://test/STAM/Login";

        url = new URL(urlStr);
        urlconn = (HttpURLConnection)url.openConnection();
        urlconn.setRequestProperty("Accept-Language","en-us,en;q=0.5");
        urlconn.setRequestProperty("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.7");
        urlconn.setRequestProperty("User-Agent","Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.16) Gecko/20110319 Firefox/3.6.16");

        urlconn.connect();
        //read the result from the server
        rd  = new BufferedReader(new InputStreamReader(urlconn.getInputStream()));
        sb = new StringBuilder();  
        while ((line = rd.readLine()) != null)
        {
            sb.append(line + '\n');
        }

        out.println(sb.toString());

   } catch(Exception e) {
        e.printStackTrace();
   } finally {
   //close the connection, set all objects to null
        urlconn.disconnect();
        rd = null;
        sb = null;
        wr = null;
        urlconn = null;
   } 
```

结果是：我的代码将只获取源内容，但无法获取 css、图像文件、javascript 等，因为它将从本地主机加载，例如“http://localhost:8080/test/img/test.gif”而不是“http://test/STAM/img/test.gif”。如果我错了或者你有什么办法可以解决这个问题，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:33:59.760

据我了解，您希望在获取 html 页面时获取页面中使用的所有资源（css/js/images/...）。

您可能知道，[HTML](http://en.wikipedia.org/wiki/HTML)是一种引用外部资源的标记语言。获取所有这些资源并呈现页面是 Web 浏览器的工作。如果您想拥有所有资源，那么您应该解析源内容以提取资源链接并单独获取它们。

如果您想从原始位置重用资源，您必须注意资源 URL 仍然可以从页面打开的位置访问。（[URL 可以是绝对的或相对的](https://stackoverflow.com/questions/2005079/absolute-vs-relative-urls)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:01:19.630

不要使用 HttpUrlConnection 来执行此操作。你最终会解析 html 文件来解决一个已经解决的问题。

使用：[HttpClient](http://hc.apache.org/httpclient-3.x/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T08:33:21.390

我已经在网络中使用 URLConnection 从任何网站获取 Html css 和 javascript 代码的来源，我在这里尝试使用 URL 和 URLConnection 和 InputStream 获取微软网站的代码。

```
import java.io.BufferedInputStream;
import java.io.IOExecption;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.MalformedURLExeption;
import java.net.URL;
import java.net.URLConnection;

public class Main2{
    public static void main(String[] args) throws IOException{
        URL u = new URL("http://www.microsoft.com/");
        URLConnection uc = u.openConnection();
        InputStream is = uc.getInputStresm();
        InputStream buf = new BuffredInputStream(is);
        Reader r = new InputStreamReader(buf);
        int i;
        while((i = r.read()) != -1){
            System.out.println((char)i);
        }
    }
} 
```

或者试试下面的代码。

```
 URLConnection uc = new URL("http://www.google.com").openConnection();
    BufferedInputStream bis = new BufferedInputStream(uc.getInputStream());
    int i;
    while(( i == bis.read()) != -1){
        System.out.println((char)i);
    }
    bis.close();
    }
} 
```

# android - ANDROID - 从本地主机读取文件（错误）

> ID：13045053
> 
> 赞同：1
> 
> 时间：2012-10-24T08:01:33.823
> 
> 标签：android

我有一个从本地主机加载文本文件的代码，我正在使用 xampp，我将文件放在 htdocs 下的 xampp 文件夹中。这是我的代码：

```
public class MainActivity extends Activity {

TextView httpStuff;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    httpStuff = (TextView)findViewById(R.id.tvHttp);        
    try {
        URL url = new URL("http://10.0.2.2/name.txt");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));           
        String str = in.readLine();
        in.close();
        httpStuff.setText(str);
        } catch (MalformedURLException e) {  
        e.printStackTrace();
    }catch (IOException e) {
        // TODO: handle exception
    }

}} 
```

我得到了这个错误。我不知道怎么了。我还在我的 androidmanifest.xml 文件中添加了权限 internet。

```
 10-24 17:17:45.024: E/AndroidRuntime(7544): FATAL EXCEPTION: main
10-24 17:17:45.024: E/AndroidRuntime(7544): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.name.in.a.textfile/com.example.name.in.a.textfile.MainActivity}: android.os.NetworkOnMainThreadException
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.os.Looper.loop(Looper.java:137)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at java.lang.reflect.Method.invokeNative(Native Method)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at java.lang.reflect.Method.invoke(Method.java:511)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at dalvik.system.NativeStart.main(Native Method)
10-24 17:17:45.024: E/AndroidRuntime(7544): Caused by: android.os.NetworkOnMainThreadException
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.io.IoBridge.connect(IoBridge.java:112)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at java.net.Socket.connect(Socket.java:842)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at java.net.URL.openStream(URL.java:462)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at com.example.name.in.a.textfile.MainActivity.onCreate(MainActivity.java:27)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.Activity.performCreate(Activity.java:5008)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-24 17:17:45.024: E/AndroidRuntime(7544):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-24 17:17:45.024: E/AndroidRuntime(7544):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:14:22.120

您的问题显示在这一行 `android.os.NetworkOnMainThreadException 10-24 17:07:44.745: E/AndroidRuntime(7143)`

在 android 中，您不能在主线程中执行网络操作，因为它可能会阻止 UI 更新超过 5 秒，导致应用程序无响应。

你应该做这样的事情（未经测试）该`try`块应该是：

```
Thread t = new Thread(new Runnable() {
    @Override
    public void run() {
        URL url = new URL("http://10.0.2.2/name.txt");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));           
        String str = in.readLine();
        in.close();
        runOnUIThread(new Runnable() {
           @Override
           public void run() { 
               httpStuff.setText(str);
           }
        });

    });
t.start(); 
```

这种方式你在不同的线程上执行网络，但是由于一旦网络完成你需要更新 UI，你需要使用`runOnUIThread`，因为在 UI 线程可以更新 UI 组件。

另一个可能更好的选择是`AsyncTask` 你把你的网络任务放在它的`doInBackground`方法中，并在方法中更新 UI `onPostExecute`，这样你就不需要搞乱线程了。基本上`AsyncTask`做我上面描述的。您应该对此进行研究，因为所有网络都应该在与 UI 不同的线程中完成，这`AsyncTask`是一个很好且简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T07:03:11.707

七点，我在这里有一个改进的答案，因为我也经历过这个问题

```
private class myStreamReader extends AsyncTask<String, Void, String> {
    String str = "";
    @Override
    protected String doInBackground(String... params) {
        try {
            URL url = new URL(""http://10.0.2.2/name.txt"");
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            str = in.readLine();
            in.close();
        } catch (MalformedURLException e) {
        } catch (IOException e) {
        }

        return "Executed";
    }

    @Override
    protected void onPostExecute(String result) {
        //do something here
         httpStuff.setText(str);
    }

    @Override
    protected void onPreExecute() {}

    @Override
    protected void onProgressUpdate(Void... values) {}
} 
```

在使用时只需调用这个

```
new.myStreamReader().execute(); 
```

# php - 在 PHP 中将数据从 SQL 转换为字符串

> ID：13045060
> 
> 赞同：1
> 
> 时间：2012-10-24T08:01:54.640
> 
> 标签：php, mysql, function, google-maps

**问题：**

我正在使用链接使用 Google Map API：[http](http://www.phpinsider.com/php/code/GoogleMapAPI/) ://www.phpinsider.com/php/code/GoogleMapAPI/ - 当我尝试手动打印地图上的地址时，它会显示，但从数据库。

**PHP代码（这有效）：**

```
$map->addMarkerByAddress('114 53 Grevgatan 31','The Tudor Arms','<b>The Tudor Arms</b>'); 
```

**PHP代码（这不起作用）：**

```
$location = $row['postalnumber'] . ' ' . $row['address'] . ' ' . $row['city'];
$map->addMarkerByAddress($location , $row['name'],'<b>'. $row['name'] .'</b>'); 
```

**所需的解决方案：**

能够从 SQL 数据库中的表中提取数据并将其发送到 Google Map API 函数。

附加说明：当我回显地址上方的变量时，所有信息都会打印出来，但不会在发送到 Google Map API 函数时打印出来。我需要将数据转换为字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:09:42.207

是的，你应该说谷歌格式如下：

```
$location = $row['postalnumber'] . ' ' . $row['address'] . ' ' . $row['city'];
$map->addMarkerByAddress("'".$location."'", "'".$row['name']."'","'<b>". $row['name'] ."</b>'"); 
```

# intellij-idea - IDEA 运行/调试配置中系统属性的空值

> ID：13045062
> 
> 赞同：3
> 
> 时间：2012-10-24T08:01:59.317
> 
> 标签：intellij-idea

我想在 IntellJ IDEA 中进行“运行”配置，并预定义一些 java 系统属性（普通且简单的任务）。但是由于某些原因，我需要将一些属性设置为空字符串——这在 IDEA 中并不容易：

```
-Dmy-property=abd
-Dmy-property2=
-Dmy-property3=afd 
```

如果我在“系统属性”输入中输入它，它将被转换为

```
-Dmy-property=abd
-Dmy-property2=-Dmy-property3=afd 
```

IDEA 删除了“未使用”的空格。这是不可取的。目前我只能通过将空属性移动到列表末尾来解决这个问题。有没有其他方法可以输入 emtpy 属性值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:29:48.610

我不认为这有什么问题。

我创建了一个小测试程序，即使*转换*了属性，它也能正常工作。

```
package com.stackoverflow;

/**
 * @author maba, 2012-10-24
 */
public class Main {
    public static void main(String[] args) {
        String property = System.getProperty("my-property");
        System.out.println("property = " + property);
        String property2 = System.getProperty("my-property2");
        System.out.println("property2 = " + property2);
        String property3 = System.getProperty("my-property3");
        System.out.println("property3 = " + property3);
    }
} 
```

在 IntelliJ 中使用以下内容：

![在此处输入图像描述](../Images/07805b97c636e7617890a9e34b862551.png)

运行时我会得到这个输出：

```
property = abc
property2 = 
property3 = afd 
```

运行时格式化的系统属性将是正确的，因为命令行将如下所示：

```
"C:\Program Files\Java\jdk1.6.0_33\bin\java" -Dmy-property=abc -Dmy-property2= -Dmy-property3=afd <lots of jars> com.stackoverflow.Main 
```

即将`-Dmy-property2=`是空字符串。

# sql-server - 首先会发生什么：计算的持久字段或 ON INSERT TRIGGER 更新

> ID：13045069
> 
> 赞同：1
> 
> 时间：2012-10-24T08:02:25.150
> 
> 标签：sql-server, sql-server-2008

我有一个包含持久计算字段的表。它有一个触发器，可以根据包括持久字段在内的许多字段更新某些字段。

哪个先更新，持久化字段还是触发更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:24:06.767

大概用了 5 分钟才搞定这个。它回答了你的问题吗？

```
create table T (
    ID int not null,
    Val1 varchar(10) not null,
    Val2 as SUBSTRING(Val1,1,5) persisted
)
go
create table T2 (
    Action char(1) not null,
    Val1 varchar(10) not null,
    Val2 varchar(5) not null
)
go
create trigger T_T_I
on T
instead of insert
as
    insert into T (ID,Val1) select ID,Val1 from inserted
    insert into T2 (Action,Val1,Val2) select 'I',Val1,Val2 from inserted
go
create trigger T_T_A
on T
after insert
as
    insert into T2 (Action,Val1,Val2) select 'A',Val1,Val2 from inserted
go
insert into T(ID,Val1) values (1,'abcdefghi')
go
select * from T2 
```

结果：

```
Action Val1       Val2
------ ---------- -----
A      abcdefghi  abcde
I      abcdefghi  abcde 
```

也就是说，计算列始终可以从`inserted`伪表中获得，这是您真正应该关心的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:46:36.603

持久化的计算值是在实际插入之前计算的。触发发生在插入之后。因此，持久化的计算值将始终在触发器中可用。

非持久化计算值也是如此，但机制不同：对非持久化计算值的任何访问都将即时计算该值，包括来自触发器本身的访问。因此，再次，该值将在触发器中可用。

# git - 如何为我的c盘中的git设置一个遥控器（win vista）？

> ID：13045072
> 
> 赞同：2
> 
> 时间：2012-10-24T08:02:29.457
> 
> 标签：git, git-remote

我想知道如何在 windows 文件夹中创建遥控器，因为所有 tuts 都向我展示了如何将遥控器放入远程服务器而不是文件夹。[http://elegantcode.com/2011/06/18/git-on-windows-creating-a-network-shared-central-repository/](http://elegantcode.com/2011/06/18/git-on-windows-creating-a-network-shared-central-repository/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:27:24.270

[此示例](http://blog.mrdustpan.com/2011/09/git-dropbox-crazy-delicious.html)显示了 C 驱动器上的远程示例：

```
git remote add origin c:/dropbox/repos/theAwesome 
```

尽管以下语法也应该起作用：

```
git remote add origin /C/dropbox/repos/theAwesome 
```

# jsp - 在 JSTL 中超时后发送重定向

> ID：13045073
> 
> 赞同：1
> 
> 时间：2012-10-24T08:02:32.520
> 
> 标签：jsp, redirect, jstl, jsp-tags

我在我的 JSP 中使用此脚本在 5 秒后通过超时执行重定向。

```
<script type="text/javascript">
    function redirect() {
        location.href = "registrazione.jsp";
    }
    window.setTimeout("redirect()", 5000);
</script> 
```

我正在尝试消除我的 Web 应用程序中的任何脚本。有没有办法使用 JSTL 来做到这一点，或者有没有可以下载和使用的特定标签库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:03:34.760

您需要了解 JSP/JSTL 在 webserver 中运行，而 JavaScript 在 webbrowser 中运行。

为了能够从网络服务器发送重定向，您需要有一个 HTTP 响应。为了获得 HTTP 响应，您必须检索 HTTP 请求。为了有一个 HTTP 请求，客户端必须以某种方式发送它；通过单击链接、提交表单、更改浏览器地址栏中的 URL、执行 JavaScript `window.location`、执行 JavaScript`XMLHttpRequest`等。

换句话说，如果客户端没有以某种方式发送 HTTP 请求，就不能使用 JSP/JSTL 发送重定向。所以，故事到此结束。

您的 JavaScript 方法确实是实现具体功能要求的最佳方法。因此，我不理解您对它的反感，并且您需要用 JSP/JSTL 替换它。您确定没有将“JSP *scriptlets* ”与“JavaScript”混淆吗？前者确实是一种[糟糕](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)的 JSP 编写方式，但这*绝对*与 JavaScript 不同。

# javascript - 如果使用 HTML5 和 JS 的用户位置发生变化，则需要帮助获取用户位置

> ID：13045077
> 
> 赞同：0
> 
> 时间：2012-10-24T08:02:45.353
> 
> 标签：javascript, html, geolocation

我需要一些帮助来持续跟踪用户。根据我所做的研究，如果用户位置发生变化，watchPosition 函数将返回新位置。那是对的吗？还有这个片段应该放在哪里，就在 getCurrentPosition 函数之后？如果不是这样，您对我如何实现持续跟踪有什么解决方案或建议。

```
navigator.geolocation.watchPosition(
function(position) {
    calculateDistance(position.coords.latitude, position.coords.longitude);
}, function(err){ 
    console.log(err);
}, {enableHighAccuracy:true, maximumAge:30000, timeout:27000}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:10:33.183

是的，你是对的，你根本不需要`getCurrentPosition()`像`watchPosition()`同样的事情那样打电话，只是不断地打电话。

所以调用它而不是你当前调用的地方`getCurrentPosition()`。

# linq - 如何将此 sql 查询更改为 linq to sql？

> ID：13045078
> 
> 赞同：2
> 
> 时间：2012-10-24T08:02:49.080
> 
> 标签：linq

我写了查询，我想将其转换为 linq 查询

```
SELECT     dbo.tblSaman.fldSamanId, dbo.tblFaaliatSaman.FldFaaliatId
FROM         dbo.tblSaman LEFT OUTER JOIN
                  dbo.tblFaaliatSaman ON dbo.tblSaman.fldSamanId = dbo.tblFaaliatSaman.fldSamanId
WHERE     (dbo.tblFaaliatSaman.FldFaaliatId IN (3, 4)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:41:08.943

尝试使用类似的东西：

```
int[] ids = { 3, 4 };
            var items = context.tblSaman.Join(context.tblFaaliatSaman.DefaultIfEmpty().Where(x => ids.Contains(x.FldFaaliatId)), x => x.fldSamanId,
                                  y => y.fldSamanId, (x, y) => new { fldSamanId = x.fldSamanId, FldFaaliatId = y.FldFaaliatId }); 
```

# objective-c - 我收到一条错误消息，内容为“使用未声明的标识符‘事件’”

> ID：13045085
> 
> 赞同：1
> 
> 时间：2012-10-24T08:03:19.243
> 
> 标签：objective-c, ios, xcode, uiview, error-handling

我收到一条错误消息，显示在此行上显示“使用未声明的标识符‘事件’”。有人可以帮忙吗？

```
UIView *senderView = [[event.allTouches anyObject] view]; 
```

这是代码。

```
 }
  -  (void)didTap_tabBarItem1 {
      CurrentItemsViewController *controller = [[CurrentItemsViewController alloc] init];
      UINavigationController *navigationController = [[UINavigationController alloc]
         initWithRootViewController:controller];
      [navigationController setNavigationBarHidden:YES animated:NO];
      UIView *senderView = [[event.allTouches anyObject] view];
      CGRect senderFrame = [senderView convertRect:senderView.frame toView:self.view];
      self.tabBarItem1Popover = [[[UIPopoverController alloc] initWithContentViewController:navigationController
         ] autorelease];
      [self.tabBarItem1Popover presentPopoverFromRect:senderFrame inView:self.view permittedArrowDirections:
         UIPopoverArrowDirectionAny animated:YES];
      [navigationController release];
      [controller release];
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:04:28.840

这都是因为在您使用未声明的变量事件。您没有将其传递给您的方法`- (void)didTap_tabBarItem1`。你可以做这样的事情，`- (void)didTap_tabBarItem1:(UIEvent *)event`但你应该把这个`event`变量传递给这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:10:28.960

您没有任何名为 event 的变量

您是否复制并粘贴了此代码？

# objective-c - 使用 NSExpression 计算值的平方？

> ID：13045089
> 
> 赞同：2
> 
> 时间：2012-10-24T08:03:28.920
> 
> 标签：objective-c, expression

```
NSString *formul=@"3^2";
NSExpression *e = [NSExpression expressionWithFormat:formul];
int result = [[e expressionValueWithObject:nil context:nil] intValue];
NSLog(@"formule:%d", result); 
```

我正在尝试计算 (a+b)^2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:35:25.797

使用 ** 代替 ^

```
NSString *formul=@"3 ** 2";
NSExpression *e = [NSExpression expressionWithFormat:formul];
int result = [[e expressionValueWithObject:nil context:nil] intValue];
NSLog(@"formule:%d", result); 
```

但要注意 Foundation 的幂函数是关联的（这是错误的）。见戴夫德隆的帖子。

[http://funwithobjc.tumblr.com/post/6196535272/parsing-mathematical-expressions](http://funwithobjc.tumblr.com/post/6196535272/parsing-mathematical-expressions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:17:59.160

将上面的代码替换为：

```
NSString *formul=[NSString stringWithFormat:@"%.f",pow(2,4)];
NSExpression *e = [NSExpression expressionWithFormat:formul];
int result = [[e expressionValueWithObject:nil context:nil] intValue];
NSLog(@"formule:%d", result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T12:50:55.833

```
NSNumber *number1 = [NSNumber numberWithInteger:2];        
NSNumber *number2 = [NSNumber numberWithInteger:4];

NSString *strSqr=[NSString stringWithFormat:@"%@%@%@",number1,@"+",number2];

NSExpression *arrayExpression = [NSExpression expressionForConstantValue: number1];

NSArray *arrNum=[NSArray arrayWithObjects:[NSExpression expressionWithFormat:strSqr],arrayExpression,nil];

NSExpression* expression =[NSExpression expressionForFunction:@"raise:toPower:" arguments:arrNum];

 NSLog(@"powerExp:%@",expression);

 int  resultSum = [[expression expressionValueWithObject:nil context: nil] intValue];
 NSLog(@"resultnum:%d",resultSum);` 
```

我有输出：

```
 powerExp:(2 + 4) ** 2

 resultnum:36 
```

# objective-c - 添加 childViewController 到底有什么意义？

> ID：13045090
> 
> 赞同：2
> 
> 时间：2012-10-24T08:03:30.777
> 
> 标签：objective-c, xcode, uiviewcontroller

我有一个父视图控制器。

parentViewController 有 3 个孩子。

AnnController、BobController、CharlieController

（不是真实姓名）

任何时候都可能只存在一个这样的控制器的视图。过渡通过以下方式完成：

```
[self transitionFromViewController:fromController toViewController:toViewController duration:duration options:options animations:animations completion:^(BOOL finished) 
```

一切正常。

但是，将 Ann、Bob 和 Charlie 添加为 Parent 的孩子有什么意义呢？

起初我以为是在 transitionFromViewController 期间自动调用 viewWillAppear 和 viewWillDisappear

但不管 viewController 是否是孩子，它都会被调用。

当父母接到电话时，可能会调用 viewWillAppear 和 viewWillDisappear。但这很容易做到。

当然，只有实际在 ParentController.view 的视图层次结构中的视图才会调用它们的 viewWillAppear 和 viewWillDisappear 对吗？或者是吗？

那么 Ann、Bob 和 Charlie 是 Parent Controller 的孩子这一事实到底是做什么的呢？

在 Parent 的 viewWillAppear 中，当且仅当 childController 的视图是层次结构的一部分时，它是否会遍历它的所有子视图并调用它们的 viewWillAppear？或者是什么？

实际上，事实是什么

**注意：**我很清楚视图遏制是什么意思。我问具体是做什么的？例如，其中一个答案说它通过旋转传递。是的。但它是否适用于所有孩子或唯一的孩子，其视图位于 parentViewController.view 层次结构中？或者是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:18:16.300

**简短的回答：** 添加`childViewController`允许您将视图控制器中的事件重定向到其他已定义的具有其子级的控制器。

**长答案：** `addChildViewController`是`iOS 5`和以后的一部分。这是一个称为“ `view controller containment`”的功能。这背后的基本思想是您可以将您的视图控制器嵌入到您自己的其他视图控制器中。它很强大，因为它允许您编写自己的`tabViewController`或`customNavigationController`例如

最主要的`View controller containment`是它试图确保所有包含的视图控制器都将获得适当的消息。一个简单的例子是当您旋转设备时，如果您没有添加`addChildViewController`旋转更改事件，则不会向下传递到您的视图层次结构。

像您提到的调用（`viewWillAppear, viewWillDisappear`）这样的视图周期是由视图控制器管理的，所以它是一个不同的故事。

查看官方[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)以更好地了解自定义容器控制器的强大功能。

# php - 用分隔符在php中拆分字符串

> ID：13045095
> 
> 赞同：2
> 
> 时间：2012-10-24T08:03:38.403
> 
> 标签：php

所以这是场景，我有以下字符串：

```
 Detroit 7 Chicago 13 (FINAL) 
```

我希望它返回一个数组，如下所示：

```
 array() { 
     ["T1_Name"]=>"Detroit" 
     ["T1_Score"]=>"7"
     ["T2_Name"]=>"Chicago" 
     ["T2_Score"]=>"13"
     ["Quarter"]=>"FINAL"
    } 
```

诀窍是它不能用空格分隔，因为城市名称中有空格，分数也可能是一位或两位数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:09:03.997

```
$subject = 'Detroit 7 Chicago 13 (FINAL)';
$matches = array();
if (preg_match('~^(.+) ([0-9]{1,2}) (.+) ([0-9]{1,2}) \((.+)\)$~i', $subject, $matches)) {
    var_dump($matches);
    $result = array(
        'T1_Name'  => $matches[1],
        'T1_Score' => $matches[2],
        'T2_Name'  => $matches[3],
        'T2_Score' => $matches[4],
        'Quarter'  => $matches[5],
    );
}
var_dump($result); 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:06:01.770

**[PHP 预匹配](http://php.net/manual/en/function.preg-match.php)**

大概是这样的？

```
preg_match('/([a-zA-Z\s]+?)[\s]+([\d]+)([a-zA-Z\s]+?)[\s]+([\d]+)[\s]+\(([\w]+)\)/', "Detroit 7 Chicago 13 (FINAL)", $matches);
print_r($matches); 
```

# java - SAP JCo：JCoDestination 与 JCoClient

> ID：13045096
> 
> 赞同：7
> 
> 时间：2012-10-24T08:04:11.480
> 
> 标签：java, sap, bapi, jco

我正在使用 JCo 库从 Java 调用 SAP 中的函数。到目前为止，我的电话有效，但是当我在 Internet 上寻求帮助时，总是有一个`JCoClient`用于获取功能、进行提交等。

但是 JCO 3 中不存在 JCoClient 类。

相反，我使用我使用`JCoDestination`配置文件创建的实例。

JCoClient 和 JCoDestination 有什么区别？为什么没有人谈论 JCoDestination，而总是谈论 JCoClient？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T12:19:55.560

SAP Java 连接器已从 2 版完全改写为 3 版。旧的 JCO.Client 类已被 JCoDestination 取代，但这不仅仅是名称更改，库体系结构完全改变，因此将代码从 JCo 2 移植到 JCo 3 不仅仅是更改类名的问题。例如，要使用 Jco 2 连接到 SAP 服务，必须编写如下内容：

> JCO.Client 客户端 = JCO.createClient(...);
> 
> 客户端.connect();

而使用 JCo 3 你有：

```
JCoDestination destination = JCoDestinationManager.getDestination(serviceName); 
```

[您可以在此 URL](http://help.sap.com/saphelp_nwpi711/helpdata/en/48/707c54872c1b5ae10000000a42189c/frameset.htm)找到有关这两个库的信息。此外，在[此链接](http://help.sap.com/saphelp_nwpi711/helpdata/en/48/88c6682a763ff6e10000000a42189c/content.htm)上还有从 2 迁移到 3 的详细指南。后一个链接也可以从前一个链接的左侧索引访问，您可以从中访问有关两个版本的客户端编程的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T08:39:53.973

您会发现的大多数“东西”都会隐含地引用 Java 连接器的旧版本 (2.x)。您仍然可以从[SAP](http://service.sap.com/connectors)获取该版本，我鼓励您这样做 - 不要使用它，而是比较 javadoc。您会看到 2.x 和 3.x 版本之间的类结构发生了根本性的变化（我会说更好）。但是，这意味着您必须重新处理许多示例，因为类名已更改。

# c# - c# 本机 c++ 应用程序中的访问控制

> ID：13045102
> 
> 赞同：1
> 
> 时间：2012-10-24T08:04:37.847
> 
> 标签：c#

我必须访问本机 c++-mfc 应用程序中的自定义控件。我需要阅读控件的内容。该控件由两个按钮和按钮之间的标签组成。该标签包含一个月和一年，通过按钮我可以在一个月前或将来导航。有没有办法读取这个控件中的文本并访问这两个按钮？

我已经能够访问控件所在的窗口。因此，我使用的是我公司提供的框架。但是使用这个框架是不可能获得上述控件中的文本和按钮的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:09:27.527

您必须通过它们的窗口句柄访问控件。因此，您必须获取本机应用程序窗口的窗口句柄，然后尝试找到标签和按钮的窗口句柄（`FindWindow`WinAPI 函数）。然后您可以将相应的窗口消息发送到窗口以获取文本或“按下”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:14:58.220

您需要使用[`FindWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499.aspx)和[`GetWindowText`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520.aspx)来自 win32 API（来自*pinvoke*）：

[***`FindWindow`***](http://www.pinvoke.net/default.aspx/user32.FindWindow)：

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindow(string lpClassName, string lpWindowName); 
```

仅按标题查找窗口。请注意，您必须`IntPtr.Zero`作为第一个参数传递：

```
[DllImport("user32.dll", EntryPoint="FindWindow", SetLastError = true)]
static extern IntPtr FindWindowByCaption(IntPtr ZeroOnly, string lpWindowName); 
```

您也可以致电`FindWindow(default(string), lpWindowName)`或`FindWindow((string)null, lpWindowName)`

和[***`GetWindowText`***](http://www.pinvoke.net/default.aspx/user32.getwindowtext)：

> *（来自 msdn）*将指定窗口的标题栏（如果有）的文本复制到缓冲区中。如果指定的窗口是控件，则复制控件的文本

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount); 
```

# javascript - 具有特定地址的多个标记

> ID：13045106
> 
> 赞同：1
> 
> 时间：2012-10-24T08:04:47.153
> 
> 标签：javascript, wpf, google-maps-api-3, browser, google-maps-markers

如何显示具有特定地址的多个标记？

我在 WPF 应用程序中使用谷歌地图 api 3

# java - Android 从链接下载文件

> ID：13045107
> 
> 赞同：0
> 
> 时间：2012-10-24T08:04:55.230
> 
> 标签：java, android

我正在尝试通过 Ip+port 将文件从一部 Android 手机下载到另一部。如果我在手机的网络浏览器中写入网址，我可以成功地从其他手机下载文件。网址是这样的

```
 http://172.20.99.238:9999/file/3/001_01.mp3 
```

但我无法通过代码下载此文件

```
 String downLoadLink = "http:/"+url+":9999/file/"+fileID+"/"+fileName;
            //downLoadLink = downLoadLink.replace(" ", "");
            Intent downloadIntent = new Intent(Intent.ACTION_VIEW);
            downloadIntent.setData(Uri.parse(downLoadLink));
            startActivity(downloadIntent); 
```

此问题的任何解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:06:23.480

如果您的目标至少是 API 级别 9，您应该使用 DownloadManager。我一直在玩它并且工作得非常好，避免启动浏览器并处理你需要的一切。我将提供以下链接，而不是复制粘贴代码：

[http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)

尝试仅使用 onClick 方法进行测试。其余代码仅用于获取文件的 URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T16:57:20.213

只需在清单中使用此代码并获得 Internet 权限

```
 String servicestring = Context.DOWNLOAD_SERVICE;
        DownloadManager downloadmanager;
        downloadmanager = (DownloadManager) getSystemService(servicestring);
        Uri uri = Uri
                .parse("your link to file");
        DownloadManager.Request request = new DownloadManager.Request(uri);
        Long reference = downloadmanager.enqueue(request); 
```

# perl - 如何在 perl 中解析制表符分隔的文件？

> ID：13045108
> 
> 赞同：1
> 
> 时间：2012-10-24T08:04:58.730
> 
> 标签：perl, parsing

我是 Perl 的新手，我遇到了心理障碍。我需要从制表符分隔的文件中提取信息，如下所示。

```
#name  years risk total
 adam  5     100  200
 adam  5     50   100
 adam  10    20   300
 bill  20    5    100
 bill  30    10   800 
```

在此示例中，制表符分隔的文件显示投资长度、风险金额和投资结束时的总额。

我想解析这个文件，并为每个名称（例如**adam**）计算投资年数总和**5+5**，并计算收入总和**(200-100) + (100-50) + (300-20)**。我还想保存每个名称的总数（200、100、300）。

这是我到目前为止所尝试的：

```
my $filename;
my $seq_fh;

open $seq_fh, $frhitoutput 
    or die "failed to read input file: $!";

while (my $line = <$seq_fh>) {

    chomp $line;
    ## skip comments and blank lines and optional repeat of title line

    next if $line =~ /^\#/ || $line =~ /^\s*$/ || $line =~ /^\+/;

    #split each line into array
    my @line = split(/\s+/, $line);
    my $yeartotal = 0;
    my $earning   = 0;

    #$line[0] = name
    #$line[1] = years
    #$line[2] = start
    #$line[3] = end

    while (@line[0]){

        $yeartotal += $line[1];
        $earning   += ($line[3]-$line[2]);
    }
} 
```

关于我哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T09:55:12.700

该[`Text::CSV`](http://metacpan.org/module/Text%3a%3aCSV)模块可用于读取制表符分隔的数据。`split`在引用、转义等方面，通常比尝试手动破解某些东西要好得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T08:15:16.950

你错了：`while(@line[0]){`

我会做：

```
my $seq_fh;
my %result;
open($seq_fh, $frhitoutput) || die "failed to read input file: $!";
while (my $line = <$seq_fh>) {
    chomp $line;
    ## skip comments and blank lines and optional repeat of title line
    next if $line =~ /^\#/ || $line =~ /^\s*$/ || $line =~ /^\+/;
    #split each line into array
    my @line = split(/\s+/, $line);
    $result{$line[0]}{yeartotal} += $line[1];
    $result{$line[0]}{earning} += $line[3] - $line[2];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T08:17:56.637

您应该使用哈希，如下所示：

```
my %hash;
while (my $line = <>) {

    next if $line =~ /^#/;

    my ($name, $years, $risk, $total) = split /\s+/, $line;

    next unless defined $name and defined $years
            and defined $risk and defined $total;

    $hash{$name}{years}    += $years;
    $hash{$name}{risk}     += $risk;
    $hash{$name}{total}    += $total;
    $hash{$name}{earnings} += $total - $risk;
}

foreach my $name (sort keys %hash) {

    print "$name earned $hash{$name}{earnings} in $hash{$name}{years}\n";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T09:00:52.743

探索 Perl 强大的命令行选项的好机会！:)

# 代码

**注意**：这段代码应该是一个命令行单行代码，但是这样读起来更容易一些。在将其写入适当的脚本文件时，您确实应该启用**严格和警告**并使用更好的名称。此版本不会在严格下编译，您必须声明`our $d`.

```
#!/usr/bin/perl -nal

# collect data
$d{$F[0]}{y} += $F[1];
$d{$F[0]}{e} += $F[3] - $F[2];

# print summary
END { print "$_:\tyears: $d{$_}{y},\tearnings: $d{$_}{e}" for sort keys %d } 
```

# 输出

```
adam:   years: 20,  earnings: 430
bill:   years: 50,  earnings: 885 
```

# 解释

我在这里使用了`-n`开关，它基本上可以让您的代码遍历输入记录（`-l`告诉它使用行）。该`-a`开关让 perl 将行拆分为数组`@F`。简化版：

```
while (defined($_ = <STDIN>)) {
    chomp $_;
    our(@F) = split(' ', $_, 0);

    # collect data
    $d{$F[0]}{y} += $F[1];
    $d{$F[0]}{e} += $F[3] - $F[2];
} 
```

`%d`是一个以名称为键、hashrefs 为值的散列，其中包含年份 ( `y`) 和收益 ( `e`)。

该`END`块在完成输入行处理和输出后执行`%d`。

使用**[O](http://p3rl.org/O)**`Deparse`查看实际执行的代码：

```
book:/tmp memowe$ perl -MO=Deparse tsv.pl
BEGIN { $/ = "\n"; $\ = "\n"; }
LINE: while (defined($_ = <ARGV>)) {
    chomp $_;
    our(@F) = split(' ', $_, 0);
    $d{$F[0]}{'y'} += $F[1];
    $d{$F[0]}{'e'} += $F[3] - $F[2];
    sub END {
        print "${_}:\tyears: $d{$_}{'y'},\tearnings: $d{$_}{'e'}" foreach (sort keys %d);
    }
    ;
}
tsv.pl syntax OK 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:46:03.547

它似乎是一个固定宽度的文件，我会用`unpack`它

# awk - awk 1 意外字符 '.' 突然出现

> ID：13045110
> 
> 赞同：4
> 
> 时间：2012-10-24T08:05:13.627
> 
> 标签：awk

脚本正在运行。我添加了一些评论并将其重命名然后提交。今天我的导师告诉我它不起作用，并告诉我`awk 1 unexpected character '.'` 脚本的错误应该是在命令行中读取一个名字并返回学生的名字信息。现在我检查了它，令人惊讶的是它给了我错误。我应该通过这样的命令运行它：

```
scriptName -v name="aname" -f filename 
```

这是什么问题以及我的代码的哪一部分造成的？

```
#!/usr/bin/awk
BEGIN{
tmp=name;
nameIsValid;
if (name && tolower(name) eq ~/^[a-z]+$/ )
{

    inputName=tolower(name)
    nameIsValid++;
}
else
{
    print "you have not entered the student name"
    printf "Enter the student's name: "
    getline inputName < "-"
    tmp=inputName;
    if (tolower(inputName) eq ~/^[a-z]+$/)
    {
        tmpName=inputName
        nameIsValid++
    }
    else
    {
    print "Enter a valid name!"
    exit
    }
}
inputName=tolower(inputName)
FS=":"
   }
   {
if($1=="Student Number")
{
    split ($0,header,FS)    
}
if ($1 ~/^[0-9]+$/ && length($1)==8)
{
    split($2,names," ")
    if (tolower(names[1]) == inputName || tolower(names[2])==inputName )
    {
        counter++
            for (i=1;i<=NF;i++)
            {
                printf"%s:%s ",header[i], $i

            }

            printf "\n"

    }
}
   }
   END{
   if (counter == 0 && nameIsValid)
   {
 printf "There is no record for the %-10s\n" , tmp 
   }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:45:33.363

以下是修复脚本的步骤：

1.  摆脱所有那些虚假的`NULL`陈述（行尾的分号）。
2.  从所有比较中删除未设置的变量`eq`（它不是等式运算符！）。
3.  清理缩进。
4.  摆脱第一个非功能性`nameIsValid;`声明。
5.  换成`printf "\n"`更简单的`print ""`。
6.  摆脱无用的`,FS`arg 到`split()`.
7.  仅更改`name && tolower(name) ~ /^[a-z]+$/`该条件的第二部分，因为如果匹配，那么当然会填充名称。
8.  摆脱所有这些`tolower()`s 并使用字符类而不是显式`a-z`范围。
9.  摆脱`tmp`变量。
10.  简化你的`BEGIN`逻辑。
11.  完全摆脱不必要的`nameIsValid`变量。
12.  让 awk 主体更像 awk

这是结果（未经测试，因为没有发布示例输入/输出）：

```
BEGIN {
    if (name !~ /^[[:alpha:]]+$/ ) {
        print "you have not entered the student name"
        printf "Enter the student's name: "
        getline name < "-"
    }

    if (name ~ /^[[:alpha:]]+$/) {
        inputName=tolower(name)
        FS=":"
    }
    else {
        print "Enter a valid name!"
        exit
    }
}

$1=="Student Number" { split ($0,header) }

$1 ~ /^[[:digit:]]+$/ && length($1)==8 {

        split(tolower($2),names," ")

        if (names[1]==inputName || names[2]==inputName ) {
            counter++
            for (i=1;i<=NF;i++) {
                printf "%s:%s ",header[i], $i
            }
            print ""
        }
    }
}

END {
    if (counter == 0 && inputName) {
        printf "There is no record for the %-10s\n" , name
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:18:40.233

我将shebang线更改为：

```
#!/usr/bin/awk -f 
```

然后在命令行中没有使用-f。它现在正在工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-17T11:05:07.520

在我的情况下，问题是将 IFS 变量重置为`IFS=","`按照[此答案](https://stackoverflow.com/a/10586169/2675672)中的建议将字符串拆分为数组。所以我重置了 IFS 变量并让我的代码工作。

```
IFS=', '
read -r -a array <<< "$string"
IFS=' ' # reset IFS 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T12:20:51.717

按以下方式运行脚本：

```
awk -f script_name.awk input_file.txt 
```

这似乎抑制了警告和错误。

# javascript - 调用 onsuggestionsrequested 时出现 0x8000000e 错误（win8）

> ID：13045112
> 
> 赞同：0
> 
> 时间：2012-10-24T08:05:26.247
> 
> 标签：javascript, search, windows-8, microsoft-metro

我想在我的 Windows 8 应用程序中编写搜索合同。除了建议列表之外，基本上一切都可以正常工作。总是当我输入函数时，我应该在其中添加我的建议，我得到运行时错误 0x8000000e

我只是从示例中复制粘贴代码，唯一的区别是我从数据库中加载数据。

```
appModel.Search.SearchPane.getForCurrentView().onsuggestionsrequested = function (eventObject) {
    var queryText = eventObject.queryText, suggestionRequest = eventObject.request;
    var query = queryText.toLowerCase();
    var maxNumberOfSuggestions = 5;
    mkData.getWords(eventObject.queryText, maxNumberOfSuggestions, function (suggestionList) {
        for (var i = 0, len = suggestionList.length; i < len; i++) {
            if (suggestionList[i].substr(0, query.length).toLowerCase() === query) {
                suggestionRequest.searchSuggestionCollection.appendQuerySuggestion(suggestionList[i]);
                if (suggestionRequest.searchSuggestionCollection.size === maxNumberOfSuggestions) {
                    break;
                }
            }
        }
    });
    if (suggestionRequest.searchSuggestionCollection.size > 0) {
        WinJS.log && WinJS.log("Suggestions provided for query: " + queryText, "sample", "status");
    } else {
        WinJS.log && WinJS.log("No suggestions provided for query: " + queryText, "sample", "status");
    }
}; 
```

如果我用一个静态的建议数组交换 Ajax-Call，它就可以工作:( 在建议列表中是好词。

我已经找到了解决方案，但仅限于 C#。开发人员必须在那里添加 await 关键字，但在 javascript 中我没有这个。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:21:23.570

好吧，我现在自己解决了。这里是解决方案。你必须使用延期。它几乎没有记录:(

```
appModel.Search.SearchPane.getForCurrentView().onsuggestionsrequested = function (eventObject) {
    var queryText = eventObject.queryText, suggestionRequest = eventObject.request;
    var maxNumberOfSuggestions = 5;
    var deferral = eventObject.request.getDeferral();
    mkData.getWords(queryText, maxNumberOfSuggestions, function (suggestionList) {
        suggestionRequest.searchSuggestionCollection.appendQuerySuggestions(suggestionList);
        deferral.complete();
    });
    if (suggestionRequest.searchSuggestionCollection.size > 0) {
        WinJS.log && WinJS.log("Suggestions provided for query: " + queryText, "sample", "status");
    } else {
        WinJS.log && WinJS.log("No suggestions provided for query: " + queryText, "sample", "status");
    }
}; 
```

# javascript - 编辑 primefaces 调度组件的 javascript 关联文件

> ID：13045115
> 
> 赞同：0
> 
> 时间：2012-10-24T08:05:43.733
> 
> 标签：javascript, jsf, primefaces

我正在使用 Primefaces 2.2.1 的计划组件。如果您在*/lib中解压缩项目中包含的**primefaces-2.2.1.jar*，您会看到 primefaces 的每个组件都有一个*.js*文件和一个*.css*文件。就我而言，我有*schedule.js*和*schedule.css*（放在*primefaces-2.2.1\META-INF\resources\primefaces\schedule*）。关键是我必须修改*schedule.js*以添加一些功能。所以，我解压*primefaces-2.2.1.jar*，修改*schedule.js*，将所有内容再次压缩到*primefaces-2.2.1.jar*并再次放入*/lib************. 然后我运行应用程序，这条消息显示给我：***********

 ****javax.servlet.ServletException：加载主题时出错，找不到“primefaces”库的“themes/sam/theme.css”资源*

我可以看到文件*theme.css*存在于*primefaces-2.2.1\META-INF\resources\primefaces\themes\sam*

而且我知道可以更改*schedule.js*并使其工作，因为其他一些用户这样做了。你可以在这里看到它[http://forum.primefaces.org/viewtopic.php?f=3&t=15163&p=80971#p80971](http://forum.primefaces.org/viewtopic.php?f=3&t=15163&p=80971#p80971)

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:28:03.583

您所要做的就是：

1) 安装[7-zip](http://www.7-zip.org/)

2）浏览*primefaces-2.2.1.jar*，将相关js文件复制到jar外

3）根据需要修改它

4）从jar中删除相关的js文件

5）将修改后的js文件拖放回jar中

* * *

另外，看看一个类似的问题：

[自定义事件外观 primefaces 时间表](https://stackoverflow.com/questions/12728215/customizing-event-appearance-primefaces-schedule/12735969#12735969)***

# php - 加入 2 个不同的列，然后在 mysql 中搜索和匹配

> ID：13045120
> 
> 赞同：0
> 
> 时间：2012-10-24T08:06:09.380
> 
> 标签：php, html, mysql

**“我已经修改了问题..” 抱歉误导信息。**

我有 2 张桌子，硬币 1 和硬币 2。他们都有这一列，表中的“coin_code”，表中的“coin1”和“coin_code”。'硬币2'"

如何将来自 2 个不同表的这两列加入一列，然后，我想搜索并检查它是否匹配？

我的 sql 查询是：

> SELECT coin_code from coin1 UNION Select coin_code from coin2 where coin_code="12345" ;

但

**我得到的错误是，我将获得 coin_code 的所有记录，而不仅仅是“12345”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:09:16.157

```
SELECT coin1.*, coin_code2.* FROM coin1,coin_code2 
WHERE coin_code="12345" AND coin_code=coin_code2; 
```

您也可以使用加入

```
SELECT c1.*, c2.* 
  FROM coin_code c1 LEFT JOIN coin_code2 c2 ON c1.coin_code=c2.coin_code2
  WHERE c1.coin_code="12345" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:27:35.920

您上面的陈述是检查表`coins2`中的列`coin_code`，但该列是否仅在`coin1`？

```
SELECT coin_code
FROM coin1
WHERE coin_code="12345"
UNION
SELECT coin_code2
FROM coins2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:35:31.200

假设这两个表确实命名不一致，`coin1`没有`s`and`coins2`和`s`，并且你想获取`coin_code2`数据，你可以使用这个 select。

```
SELECT 
    coin_code2
FROM
    coin1 
        LEFT JOIN
    coins2 ON coin_code = coins2.coin_code
WHERE
    coin_code="12345"; 
```

关于哪个表包含哪些列的问题不是很清楚，我的假设是两个表都包含两个列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:38:16.950

我也不清楚，但我认为你想在联合之前过滤*两个*表。如果是这样，试试这个...

```
SELECT coin_code
FROM   coin1
WHERE  coin_code="12345"

UNION

SELECT coin_code
FROM   coins2
WHERE  coin_code="12345" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T08:14:12.577

使用它来获取数据

```
select *,(select coin_code from coins2 where coin_code="12345") as result from coin1 
```

# single-sign-on - 如何从 OpenAM（使用 Java）获取 SAML 断言？

> ID：13045127
> 
> 赞同：0
> 
> 时间：2012-10-24T08:06:33.503
> 
> 标签：single-sign-on, saml, assertion, openam, vcloud-director-rest-api

我正在寻找一些方法（最好是通过 Java 代码），使我能够通过 SSO 登录从服务提供商 (SP) 的 IDP（即 ForgeRock 的 OpenAM）获取 SAML 断言。

SP 已被配置为通过 Web 浏览器与 IDP 交互（例如 vCloud Director --> OpenAM，反之亦然）（即，在调用 vCloud Director 登录页面时，用户将自动重定向到 OpenAM 登录页面）。但是，此过程仅适用于浏览器（提供重定向），而不适用于浏览器之外。

我似乎找不到任何方法来执行 SSO 登录（通过使用来自 IDP 的 SAML 断言进行身份验证）。到目前为止，我遇到了十几个引用，包括来自 OpenAM SSO 的 AssertionIDRequestUtil.sendAssertionIDRequestURI 函数，但我仍然不确定在哪里可以检索 AssertionId 和 SAML EntityId 参数。

还有其他获取 SAML 断言的方法吗？或者也许其他方式来执行 SSO 登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:06:25.557

我认为实现这一目标的最简单方法是：

1.  通过 REST 或 ClientSDK 执行身份验证
2.  使用 Java HTTP 客户端启动 IdP 发起的 SAML 身份验证流程 (/openam/idpssoinit?metaAlias=/idp&spEntityID=entityID)。当您发送此请求时，您需要确保：
    *   会话 ID 作为 iPlanetDirectoryPro cookie 是请求的一部分，
    *   不会执行会话升级（您在 IdP 的 authcontext 设置将具有低于或等于第一步创建会话的级别的 authLevel）

# php - 如何使链接到动态内容工作

> ID：13045137
> 
> 赞同：1
> 
> 时间：2012-10-24T08:06:54.363
> 
> 标签：php, javascript, jquery, dynamic

我有一个用 php/js 编写的应用程序。并且应用程序有一些需要直接工作的动态链接。

例如：我希望 example.com/#/link1 可以从我的网站外部访问。例如。我想在 facebook.com 中发布 example.com/#/link1 链接，以便我的朋友可以看到它。但是，当有人点击链接时，它会将他带到 example.com/#link1，而不是 example.com/。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:58:06.547

[https://github.com/balupton/jquery-history](https://github.com/balupton/jquery-history)这可能会解决您的问题

# mysql - mysql 不同的行或不同的字段

> ID：13045140
> 
> 赞同：5
> 
> 时间：2012-10-24T08:07:04.720
> 
> 标签：mysql, distinct

这之间是否有性能或其他差异：

```
SELECT distinct(users.id),2 as someFieldName ,0 as someOtherFieldName
From users join ... 
```

还有这个：

```
SELECT distinct users.id ,2 as someFieldName ,0 as someOtherFieldName
From users join ... 
```

结果集用作插入语句的一部分，并且由于连接，选择可能会多次返回相同的用户 ID（此处未显示）

我正在使用mysql。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T08:15:26.393

没有所谓的“不同领域”。您的第一个语法与第二个语法相同：括号仅围绕字段表达式。你也可以写：

```
SELECT DISTINCT (users.id), (2) AS someFieldName, (0) AS someOtherFieldName 
```

它们都是等价的。

如果您想避免在常量列上进行比较，您可以改用`GROUP BY`：

```
SELECT   users.id, 2 AS someFieldName, 0 AS someOtherFieldName
FROM     users JOIN ...
GROUP BY users.id 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T08:15:41.980

没有区别，因为`DISTINCT`在这种情况下只对行进行操作。

[来自 SELECT 文档](http://dev.mysql.com/doc/refman/5.1/en/select.html)

> ALL 和 DISTINCT 选项指定是否应返回重复行。ALL（默认值）指定应返回所有匹配行，包括重复行。DISTINCT 指定从结果集中删除重复行。指定这两个选项是错误的。DISTINCTROW 是 DISTINCT 的同义词。

# javascript - 长 html 页面滚动捕捉

> ID：13045144
> 
> 赞同：0
> 
> 时间：2012-10-24T08:07:11.723
> 
> 标签：javascript, jquery, html

我正在开发一个很长的 html 页面，并且该设计在垂直的内容上像页面一样有块。我想要做的是当用户向下滚动页面以“捕捉”到一个点时，如果用户的位置在正确位置的一小段距离内，则每个页面都正确放置在屏幕中心。

我们将 jquery 用于页面上的其他内容，如果它有相关内容，我们很乐意使用它。

任何建议当然都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:32:59.043

没有对此进行测试，但它应该可以工作。有关其工作原理的说明，请参阅注释。

我在它被捕捉后禁用该点，以便在尝试滚动远离它时不会重复捕捉它。该`leniancy`变量既是距用户在再次激活之前必须滚动的点的距离，也是捕捉点之前的距离。

```
var points = [250, 675, 1225, $("#someDiv")]; // y coordinates or jQuery objects you want to centre against.
var disabledPoints = []; // Points that you won't snap to (leave empty) this allows user to scroll from a point
var wMid = ($(window).height() / 2); // Pixels to centre of window
var leniancy = 100; // Number of pixels ether side of a point before it is snapped

$.each(points, function(key, value) { // Loop through points
   if (value instanceof jQuery) { // If value is a jQuery object
      function setObjectPos(){
         var offset = value.offset();
         var centerPoint = offset.top + (value.height() /2); // Calculate object centre relative to document
         value.data('centerPoint', centerPoint); // Store it for later
      });
      value.bind('DOMSubtreeModified', setObjectPos); // If div changes update  center position.
   }
}

$(window).resize(function () {  // If user resizes window update window mid-point variable
   wMid = ($(window).height() / 2);
});

$(window).scroll(function () { 
   var centerPos = $(window).scrollTop() + wMid; // Position of screen center relative to document
   $.each(points, function(key, value) { // Loop through points
      if (value instanceof jQuery) {
         value = value.data('centerPoint');
      }
      var offset = value - centerPos;
      if(checkDistance(offset, leniancy)) {
         snapToPoint(key); // Success! snap that point
         return false; // Kill the loop
      }
   });
   $.each(disabledPoints, function(key, value) { // Loop through disabled points
      if (value instanceof jQuery) {
         value = value.data('centerPoint');
      }
      var offset = value - centerPos;
      if(!checkDistance(offset, leniancy)) {
         enablePoint(key); // Success! enable that point
      }
   });
});

function checkDistance(offset, margin) {
   if (offset > 0) { 
      if (offset <= margin) { 
         return true;
      }
   } else {
      if (offset >= (margin * -1)) {
         return true;
      }
   }
   return false;
}

function snapToPoint(index) {
   var offset = (points[index] instanceof jQuery) ? points[index].data('centerPoint') - wMid : points[index] - wMid;
   $(window).scrollTop(offset); 
   var point = points.splice(index, 1); 
   disabledPoints.push(point[0]); 
}

function enablePoint(index) {
   var point = disabledPoints.splice(index, 1);
   points.push(point[0]); 
}​ 
```

# .net - ObjectDataSource 和 CacheKeyDependency 可能的错误

> ID：13045148
> 
> 赞同：2
> 
> 时间：2012-10-24T08:07:23.583
> 
> 标签：.net, caching, objectdatasource

我注意到`ObjectDataSource`使用**CacheKeyDependency的行为很奇怪**

当我`CacheKeyDependency`在声明性 .aspx 语法中设置时，`ObjectDataSource.Selecting`事件（和 Selected）被调用**两次**！！！（当然，相关的数据库也会`SelectMethod`被调用两次）

但是，如果我删除Selecting Event 发生，正确，只有一次`CacheKeyDependency`！`ObjectDataSource`

速度方面，如果我假设 Selecting/Selected 只被调用一次，这可能会破坏我的代码隐藏逻辑......

你们有人注意到了吗？

这种行为可能归因于 ASP.NET 中的错误，或者我的代码中可能存在一些错误？

*PS：事件的时间线是这样的，加粗的是重复的：*

```
PageLoad

ODS_Selecting

DataLayer Select

ODS_Selected

ODS_Filtering

GridView_DataBound

**ODS_Selecting**

**DataLayer Select**

**ODS_Selected**

ODS_Filtering

GridView_DataBound

GridView_PreRender 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:15:57.520

必须设置的`Cache`值。`CacheKeyDependency`如果没有，`ObjectDataSource`缓存基本上被禁用，这可能导致 select 方法被调用两次。

[请参阅Microsoft 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency%28v=vs.100%29.aspx)中的示例。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        Cache[ObjectDataSource2.CacheKeyDependency] = "CacheExample";
    }
} 
```

发现以下方法效果最好。当页面加载不是回发时，MS 示例使缓存过期。

```
if (null == Cache[ObjectDataSource2.CacheKeyDependency])
{
    Cache[ObjectDataSource2.CacheKeyDependency] = new Object();
} 
```

# gwt - GXT 3 网格高度和滚动

> ID：13045151
> 
> 赞同：2
> 
> 时间：2012-10-24T08:07:32.537
> 
> 标签：gwt, gxt

我的环境是：GWTP 0.7、GWT 2.4.0、GXT 3.0.1。这个问题在某种程度上与[GXT 3 网格滚动问题](https://stackoverflow.com/questions/12050354/gxt-3-grid-scrolling-issue)有关，但除了那里的解决方案对我不起作用。

我的情况：

```
public abstract class AbstractGridView extends ViewImpl implements AbstractGridPresenter.MyView {

    protected final VerticalLayoutContainer cont = new VerticalLayoutContainer();

    protected final VerticalLayoutData toolBarData = new VerticalLayoutData(1, -1);
    protected final VerticalLayoutData contentData = new VerticalLayoutData(1, -1); //grid's layout config

    protected final ToolBar toolBar = new ToolBar();
    protected final TextButton addItemButton = new TextButton(ADDBUTTON_TEXT);

    @Inject
    protected AbstractGridView() {
        toolBar.add(addItemButton);
        cont.add(toolBar, toolBarData);
    }

    public Widget asWidget() {
        return cont;
    }
}    
public class DepartmentsView extends AbstractGridView implements DepartmentsPresenter.MyView {
    private final Grid<Department> grid;
    private final ColumnModel<Department> model;
    private final List<ColumnConfig<Department, ?>> config = new ArrayList<ColumnConfig<Department,?>>();
    private final ListStore<Department> store = new ListStore<Department>(PROPS.key());
    @Inject
    public DepartmentsView() {
        super();
        config.add(new ColumnConfig<Department, Long>(PROPS.id()));
        config.get(config.size() - 1).setHeader(IDCOLUMN_HEADER);
        config.add(new ColumnConfig<Department, String>(PROPS.name()));
        config.get(config.size() - 1).setHeader(NAMECOLUMN_HEADER);
        config.add(new ColumnConfig<Department, String>(companyNameProvider));
        config.get(config.size() - 1).setHeader(COMPANYCOLUMN_HEADER);

        model = new ColumnModel<Department>(config);

        grid = new Grid<Department>(store, model);
        grid.getView().setAutoFill(true);

        filters.initPlugin(grid);
        filters.setLocal(true);
        filters.addFilter(idFilter);
        filters.addFilter(nameFilter);
        filters.addFilter(companyFilter);

        cont.add(grid);
    }
} 
```

所有这些都注入到BaseView中的BorderLayoutContainer中：

```
public class BaseView extends ViewImpl implements BasePresenter.MyView {
    private final Viewport viewPort = new Viewport();

    private final BorderLayoutContainer borderContainer = new BorderLayoutContainer();

    private final ContentPanel west = new ContentPanel();
    private final ContentPanel north = new ContentPanel();
    private final ContentPanel center = new ContentPanel();
    private final BorderLayoutData westData = new BorderLayoutData(200);
    private final BorderLayoutData northData = new BorderLayoutData();
    private final BorderLayoutData centerData = new BorderLayoutData();
    @Inject
    public BaseView() {
        borderContainer.setBorders(true);
        west.setResize(true);
        center.setResize(false);
        center.setHeight("auto");
        north.setResize(false);
        westData.setCollapsible(false);
        westData.setCollapseMini(false);
        westData.setMargins(new Margins(5, 5, 5, 5));
        northData.setCollapsible(false);
        northData.setMargins(new Margins(5));
        northData.setSize(57);
        centerData.setCollapsible(false);
        centerData.setMargins(new Margins(5));
        borderContainer.setWestWidget(west, westData);
        borderContainer.setCenterWidget(center, centerData);
        borderContainer.setNorthWidget(north, northData);
        viewPort.add(borderContainer);
    }

    public Widget asWidget() {
        return viewPort;
    }

    @Override
    public void setInSlot(Object slot, Widget content) {
        setMainContent(content);
    }

    private void setMainContent(Widget content) {
        center.clear();
        if (content != null) {
            center.setWidget(content);
        }
    }
} 
```

因此，如果我在将网格添加到 VerticalLayoutContainer（续）时不附加 contentData，它会呈现为 VerticalLayoutData(1, -1)，即：根本不计算网格的高度，它的内容在页面底部流动没有滚动条可以到达底部页面边框下方的任何行。如果我在问题开头的链接中设置 VerticalLayoutData (1, 1)，我只能看到网格的标题和网格的内容高度计算为 0px（尽管它存在于页面的 DOM 中）。并且仅当我手动设置高度时，例如 setHeight(300) 网格的高度设置像素的数量，并且垂直滚动条显示为到达网格存储中的任何行，尽管人们可以很容易地理解手动设置网格'

我在小部件配置中错过了什么，或者这是一个有任何合理解决方法的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T06:09:26.813

我发现布局问题：

```
center.setResize(false); // BaseView's constructor 
```

这使得 BorderLayoutContainer 的 ContentPanel 不会调整子小部件 (VerticalLayoutContainer) 的大小以适应。

# java - 漫反射着色和环境着色

> ID：13045152
> 
> 赞同：0
> 
> 时间：2012-10-24T08:07:34.200
> 
> 标签：java, graphics

我有一些关于计算机图形的问题：

*   如何在 java 中计算具有多个光的漫反射着色？

*   java - 如何在java中计算具有多光的环境阴影？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:37:58.483

与有多少灯无关，光照计算如下：

```
ambient = material.ambient * light.ambient
diffuse = material.diffuse * light.diffuse * dot(normal, direction_to_light) 
```

方向和法线向量必须归一化。此外，如果`dot()`小于零，则生成的漫反射颜色只是黑色。

如果您有多个灯光，则每个灯光都会添加到结果中。所以例如

```
result = ambient_light1 + diffuse_light1 + ambient_light2 + diffuse_light2 ... 
```

# php - 直接用php打印

> ID：13045153
> 
> 赞同：2
> 
> 时间：2012-10-24T08:07:44.970
> 
> 标签：php

我尝试使用 php 库 php_printer.dll 直接打印，我的问题是我的打印机打印奇怪的单词而不是 PDF 文件。

这是我的代码：

```
 <?php

    $printer = ("Epson Printer");
    if($ph = printer_open($printer))
    {
       $file = file_get_contents('receipt.pdf', FILE_USE_INCLUDE_PATH);
       printer_write($ph, $file);
       printer_close($ph);
    }
    else "Couldn't connect...";
    ?> 
```

**更新**
现在我在 Windows 7 上尝试使用此代码，但打印不开始：

```
shell_exec( 'print /d:EPSON MFC-J265W c:\file.txt'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:11:22.770

好吧...您的内容包含所有标签，并且您正在向`text`打印机提供类型输出。

当然它会像那样打印。

如果您只想直接打印 text `Write a test 20012-10-24`，那么您可能需要在另一个 PHP 文件中创建它，使用 ie 读取输出，`file_get_contents`然后使用收到的结果进行打印。

* * *

现在打印 PDF 文件是一个完全不同的问题。您可以通过 shell 执行打印它：

```
shell_exec( 'lpr /path/to/file/filename.pdf' ); 
```

[或者在这里](http://www.nongnu.org/phpprintipp/)找到一个 PHP 类：

```
require_once( 'PrintIPP.php' );

$ipp = new PrintIPP();
$ipp->setHost( 'localhost' );
$ipp->setPrinterURI( '/printers/epson' );
$ipp->setData( '/path/to/file/filename.pdf' );

$ipp->printJob(); 
```

# couchdb - 如何从 CouchDB 中提取 CouchApp

> ID：13045154
> 
> 赞同：2
> 
> 时间：2012-10-24T08:07:54.260
> 
> 标签：couchdb, couchapp

我在 CouchDB 中的 CouchApp 中创建并保存了一个视图文档。

有没有办法以与推送应用程序相同的方式提取数据？

**推**

```
couchapp push http://domain.tld:5984/databasename 
```

**拉**

```
couchapp pull http://domain.tld:5984/databasename 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:18:10.017

[在入门](http://couchapp.org/page/getting-started)和[使用](http://couchapp.org/page/couchapp-usage)页面使用`couchapp clone http://domain.tld:5984/databasename/_design/ddoc_name myapp` 更多关于。

# android - android tcp 按名称连接

> ID：13045158
> 
> 赞同：3
> 
> 时间：2012-10-24T08:08:15.470
> 
> 标签：android, networking, tcp, connection, hostname

我正在尝试打开从我的 android 应用程序到在 Roving Networks WiFly 上运行的服务器的 TCP 连接。WiFly 在我的路由器上显示为主机名 WiFly，IP 地址为 192.168.1.4

当我使用 IP 地址连接时，连接会正确打开，但如果我使用主机名连接，则会出现错误：

无法打开主机“wifly”：没有与主机名关联的地址

这是使用的代码片段：

```
 try 
    {
        InetAddress serverAddr = InetAddress.getByName("wifly");

        Log.d("TCP Client", "C: Connecting...");

        //create a socket to make the connection with the server
        Socket socket = new Socket(serverAddr, SERVERPORT);

        .......
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:24:50.980

您应该检查名称是否正确您可以使用列出所有主机

```
import java.io.*;
import java.net.*;
import java.util.*;
import static java.lang.System.out;

public class ListNets {

    public static void main(String args[]) throws SocketException {
        Enumeration<NetworkInterface> nets = NetworkInterface.getNetworkInterfaces();
        for (NetworkInterface netint : Collections.list(nets))
            displayInterfaceInformation(netint);
    }

    static void displayInterfaceInformation(NetworkInterface netint) throws SocketException {
        out.printf("Display name: %s\n", netint.getDisplayName());
        out.printf("Name: %s\n", netint.getName());
        Enumeration<InetAddress> inetAddresses = netint.getInetAddresses();
        for (InetAddress inetAddress : Collections.list(inetAddresses)) {
            out.printf("InetAddress: %s\n", inetAddress);
        }
        out.printf("\n");
     }
} 
```

取自[Oracle 文档的代码](http://docs.oracle.com/javase/tutorial/networking/nifs/listing.html)

并查看它标识的实际名称，并使用它。

# javascript - Google API：标记成型时的通知

> ID：13045159
> 
> 赞同：0
> 
> 时间：2012-10-24T08:08:17.327
> 
> 标签：javascript, google-maps, geolocation, google-maps-api-2

我正在使用谷歌地图 API V2，我有像形状这样的地理区域。现在想要在单位（简单标记）将成为形状坐标时得到警报。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:07:28.220

```
<script type ="text/javascript">
    $(document).ready(function () {
        function changeMarker(marker) {
            marker.setIcon("images/bluemarker.png");
        }
        var map;
        var infowindow;
        var info1;
        var triangleCoords = [];
        function InitializeMap() {
            var myOptions =
            {
                zoom: 5,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map"), myOptions);

            triangleCoords = [
                                    new google.maps.LatLng(20.874252, -80.190262),
                                    new google.maps.LatLng(18.466465, -66.118292),
                                    new google.maps.LatLng(32.321384, -64.75737),
                                    new google.maps.LatLng(20.874252, -80.190262)
                             ];

            // Construct the polygon
            // Note that we don't specify an array or arrays, but instead just
            // a simple array of LatLngs in the paths property
            Triangle = new google.maps.Polygon({
                paths: triangleCoords,
                strokeColor: "#FF0000",
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: "#FF0000",
                fillOpacity: 0.35
            });

            Triangle.setMap(map);

        }
        function markicons() {
            InitializeMap();
            var ltlng = [];
            var markers = [];
            ltlng.push(new google.maps.LatLng(22.76, -79.28));
            ltlng.push(new google.maps.LatLng(18.76, 83.30));
            map.setCenter(triangleCoords[0]);
            for (var i = 0; i < ltlng.length; i++) {
                marker = new google.maps.Marker({
                    map: map,
                    position: ltlng[i],
                    draggable: true,
                    //icon: "images/greymarker.png",
                    animation: google.maps.Animation.DROP,
                    title: "this is " + i + "marker"

                });

            }
        }
        window.onload = markicons;
    });

</script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server" >
        <h2>Multiple Markers :</h2>
            <div id="map-container"><div id="map"></div></div> 
</asp:Content> 
```

你的问题有两个部分

1.  构建一个多边形并在地图中引入一些标记
2.  当它在该区域找到一个标记时，您必须发出警报，因此对于 1，您可以参考上面的 js 作为 2 的示例，您可以参考下面已经包含在本论坛中的讨论......

希望这会有所帮助：D

[谷歌地图 v3：检查点是否存在于多边形中](https://stackoverflow.com/questions/6522484/google-maps-v3-check-if-point-exists-in-polygon)

# c# - 根据名字填充下拉列表

> ID：13045162
> 
> 赞同：-1
> 
> 时间：2012-10-24T08:08:33.060
> 
> 标签：c#, asp.net

> **可能重复：**
> [在网格视图中填充下拉列表](https://stackoverflow.com/questions/13043557/populate-dropdownlist-inside-a-gridview)

我有一个下拉列表，我在 gridview 中填充它。在第一列中我有 Firstname，在第二列中我有一个 DDL，我想加载与 firstname 关联的 lastname 我该如何实现？

```
Protected void GridView1_RowDataBound1(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            con.Open();
            var ddl = (DropDownList)e.Row.FindControl("DropDownList1");
            //int CountryId = Convert.ToInt32(e.Row.Cells[0].Text);
            SqlCommand cmd = new SqlCommand("select FirstName,LastName from Profile_Master" , con);
            SqlDataAdapter da = new SqlDataAdapter(cmd); 
            DataSet ds = new DataSet();
            da.Fill(ds);
            con.Close();
            ddl.DataSource = ds;
            ddl.DataTextField = "LastName";
            ddl.DataValueField = "FirstName";
            ddl.DataBind();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:46:13.540

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {

            if (e.Row.RowType == DataControlRowType.DataRow)
            {

 SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=dbname;Integrated Security=True");

                SqlCommand cmd = new SqlCommand("select lastname from Profile_Master where firstname='" + e.Row.Cells[0].Text + "'", con);
                SqlDataAdapter adp = new SqlDataAdapter(cmd);
                System.Data.DataSet DS=new System.Data.DataSet();
                adp.Fill(DS);

                Control Ctr = e.Row.FindControl("ddl");

                DropDownList dd =  (DropDownList)  Ctr;
                dd.DataSource = DS;
                dd.DataTextField = "LastName";
                dd.DataValueField = "LastName";
                dd.DataBind();

}

} 
```

# ruby-on-rails - 如何使用机械师获取嵌套属性哈希？

> ID：13045163
> 
> 赞同：1
> 
> 时间：2012-10-24T08:08:35.233
> 
> 标签：ruby-on-rails, testing, machinist

所以我正在尝试为相当复杂的嵌套形式编写一些控制器测试。我有适合模型测试的机械师，但我无法从中获得嵌套哈希以用于控制器测试中的发布请求。

处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:23:38.043

[Machineist](https://github.com/notahat/machinist)致力于创建模型实例并填充它们的属性和关联，而不仅仅是任何对象。尽管它的自述文件称它们为“对象”，但代码示例仅涵盖模型实例化。因此，您必须在测试代码中创建控制器参数，如果太麻烦而无法直接放入测试文件，可能会将其移至测试助手。

# c++ - 在 C++ 中从外部程序中捕获标准错误和标准输出

> ID：13045164
> 
> 赞同：5
> 
> 时间：2012-10-24T08:08:47.450
> 
> 标签：c++, linux

我正在尝试编写一个运行外部程序的程序。

我知道我可以抓住`stdout`，我可以抓住`stdout`and `stderr`together 但问题是我能抓住`stderr`and`stdout`分开吗？

我的意思是，例如，`stderr`在变量`STDERR`和`stdout`变量中`STDOUT`。我的意思是我想让他们分开。

我还需要变量中的外部程序的退出代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:22:05.577

在 Windows 上，您必须填写`STARTUPINFO`以`CreateProcess`捕获标准流，并且您可以使用`GetExitCodeProcess`函数来获取终止状态。有一个示例如何将标准流重定向到父进程[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499.aspx)

在类似 Linux 的操作系统上，您可能想要使用`fork`而不是`execve`，而使用分叉进程则是另一回事。

在 Windows 和 Linux 中，重定向流具有通用方法 - 您必须创建多个管道（每个流一个）并将子进程流重定向到该管道，并且父进程可以从该管道读取数据。

Linux 的示例代码：

```
int fd[2];

if (pipe(fd) == -1) {
    perror("pipe");
    exit(EXIT_FAILURE);
}

pid_t cpid = fork();
if (cpid == -1) {
    perror("fork");
    exit(EXIT_FAILURE);
}

if (cpid == 0) { // child
    dup2(fd[1], STDERR_FILENO);
    fprintf(stderr, "Hello, World!\n");
    exit(EXIT_SUCCESS);
} else { // parent
    char ch;
    while (read(fd[0], &ch, 1) > 0)
        printf("%c", ch);
    exit(EXIT_SUCCESS);
} 
```

*编辑：*如果您需要从另一个程序中捕获流，请使用与上面相同的策略，首先`fork`，第二次使用管道（如上面的代码），然后`execve`在子进程中使用另一个程序并在父进程中使用此代码等待执行结束并捕获返回码：

```
int status;
if (waitpid(cpid, &status, 0) < 0) {
    perror("waitpid");
    exit(EXIT_FAILURE);
} 
```

您可以在手册页[pipe](http://linux.die.net/man/2/pipe)、[dup2](http://linux.die.net/man/2/dup2)和[waitpid](http://linux.die.net/man/2/waitpid)中找到更多详细信息。

# c# - 一对多关系的 lambda 表达式

> ID：13045165
> 
> 赞同：2
> 
> 时间：2012-10-24T08:08:55.263
> 
> 标签：c#, linq, lambda, one-to-many

我确信这是一个愚蠢的问题，但我寻找答案却找不到。

我有桌子

1.  客户包含三列：userId、name 和 orderId。
2.  订单包含三列：orderId、userId、price。

表之间的关系是一个客户对多个订单。

我想总结某些用户的订单价格。它应该看起来像这样：

```
double totalPrice = currentUser.Orders.Sum(x=>x.price); 
```

这行不通。这样做的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:22:17.330

```
decimal totalPrice = users.SelectMany(user => user.Orders)
                         .Sum(order => (decimal?)order.Price) ?? 0; 
```

或者

```
decimal totalPrice = (from user in users
                     from order in user.Orders
                     select (decimal?)order.Price).Sum() ?? 0; 
```

**更新**：

*由于它是二进制浮点*类型，因此不适合`double`用于表示财务价值。转换to表示它是一个可以为空的小数，因此需要使用该属性来获取实际值（如果存在，通过 确定）*`product.Price``decimal?``Value``HasValue`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:35:38.970

我认为你应该从你的实体对象中选择用户（在这种情况下，userId=1）

```
 int i= users.Single(x => x.UserID== 1).Orders.Sum(x => x.Price); 
```*

# python - 在matplotlib的子图上放置一个图例，我做错了什么？

> ID：13045168
> 
> 赞同：0
> 
> 时间：2012-10-24T08:09:03.113
> 
> 标签：python, matplotlib, legend

我试图在子图中放置一个图例，但我无法做到。这是我正在尝试做的一个例子：

```
def test():
    fig = plt.figure()
    ax1 = fig.add_subplot(111)
    V = 10
    X = range (V)
    char = 'a'
    leg = []
    legp = []
    for i in range (0,5):
        Y = np.random.randn(V)
        ap = ax1.plot(X,Y)
        legp.append(ap)
        char = chr(ord(char)+1)
        leg.append(char)
    fig.legend(legp,leg)
    fig.show() 
```

这产生了空图例。我还收到一堆警告消息：

> warnings.warn("Legend 不支持 %s\n改用代理艺术家。\n\nhttp://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist\n" % (str(orig_handle) ,)) /usr/lib/pymodules/python2.7/matplotlib/legend.py:610: UserWarning: Legend does not support [] 使用代理艺术家。
> 
> [http://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist](http://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist)
> 
> warnings.warn("Legend 不支持 %s\n改用代理艺术家。\n\nhttp://matplotlib.sourceforge.net/users/legend_guide.html#using-proxy-artist\n" % (str(orig_handle) ,))

我想这与这个“代理艺术家”有关，但它指向的链接指向学习这个开始的链接。

对于那些想知道的人，我只想在图例中包含部分绘制的图。

那我该如何实现呢？

*编辑*：
我在带有 gnome 的 Ubuntu 12.10 上使用 python 2.7.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:35:25.953

奇怪......它似乎对我很好。

**编辑：** 问题来自解包情节返回对象： `ap, = ax1.plot(X,Y)`

有关使用逗号的更多信息：

> [Matplotlib 图例不起作用](https://stackoverflow.com/questions/11983024/matplotlib-legends-not-working)
> 
> [line, = plot(x,sin(x)) 逗号代表什么？](https://stackoverflow.com/questions/10422504/line-plotx-sinx-what-does-comma-stand-for)
> 
> [控制线属性](http://matplotlib.org/users/pyplot_tutorial.html#controlling-line-properties)

**编辑结束**

看 ：

```
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(111)
V = 10
X = range (V)
char = 'a'
leg = []
legp = []
for i in range (0,5):
    Y = np.random.randn(V)
    ap = ax1.plot(X,Y)
    legp.append(ap)
    char = chr(ord(char)+1)
    leg.append(char)
fig.legend(legp,leg)
plt.show() 
```

结果： ![在此处输入图像描述](../Images/828b84386dbf54d935438c4f2cd11bbe.png)

# jsf - rich:popupPanel 从弹出窗口中移除边框

> ID：13045173
> 
> 赞同：0
> 
> 时间：2012-10-24T08:09:22.147
> 
> 标签：jsf, richfaces

我的 JSF 页面中有以下 popupPanel。

```
<rich:popupPanel id="popup" modal="true" autosized="true"
            resizeable="false" domElementAttachment="form">
            <f:facet name="header">
                <h:outputText value="Process Teller Transaction" />
            </f:facet>
            <f:facet name="controls">
                <h:outputLink value="#"
                    onclick="#{rich:component('popup')}.hide(); return false;">
                x
             </h:outputLink>
            </f:facet>

            <h:panelGroup id="container" layout="block">
                <div id="container">

                    <!--Popup Content -->

                </div>
            </h:panelGroup>
        </rich:popupPanel> 
```

现在，如果我删除标题方面，则标题从弹出窗口中消失。我想要的是有一个自定义标题面板，这与我的应用程序更加协调。我怎样才能做到这一点。其次，弹出窗口应该是拖动山墙。无论如何我可以做到这一点吗？

亲切的问候，

# iphone - [TFSTDERRLogOperation 类]：发送到已释放实例的消息

> ID：13045174
> 
> 赞同：-1
> 
> 时间：2012-10-24T08:09:22.723
> 
> 标签：iphone, xcode, zombie-process

我刚刚在 Xcode 中收到这条消息：[TFSTDERRLogOperation class]: message sent to deallocated instance

我不知道在哪里搜索，因为搜索引擎对 TFSTDERRLogOperation 类没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:46:03.843

`TFSTDERRLogOperation`是 TestFlight SDK 的私有类。也许这是 SDK 中的一个错误。您可以将此[报告](http://help.testflightapp.com/customer/portal/emails/new)给 TestFlight 支持。

# ios - 'NSInvalidArgumentException'，原因：'无法解析约束格式'

> ID：13045178
> 
> 赞同：50
> 
> 时间：2012-10-24T08:09:45.593
> 
> 标签：ios, layout, compiler-errors, constraints, autolayout

我有一个子视图，我想在旋转屏幕期间保持停止，所以我决定将 NSLayoutConstraint 类型：

拖尾空间到 Superview
顶部空间到 Superview
按钮空间到 Superview
我在 UITableViewCell 的子类中。我编写了代码，但出现以下错误：

```
'NSInvalidArgumentException', reason: 'Unable to parse constraint format: 
 self is not a key in the views dictionary. 
 H:[self.arrows]-5-| 
```

我在 CustomCell.m 中的代码是：

```
 self.arrows = [[Arrows alloc]initWithFrame:CGRectMake(self.contentView.bounds.size.width-30, self.bounds.origin.y+4, 30, self.contentView.bounds.size.height-4)];

 NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(self.arrows, self.contentView);
 NSMutableArray * constraint=[[NSMutableArray alloc]init];
 [constraint addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:  [self.arrows]-5-|" options:0 metrics:nil views:viewsDictionary]];
 [constraint addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-1-[self.arrows]" options:0 metrics:nil views:viewsDictionary]];
 [constraint addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"[V: [self.arrows]-1-|" options:0 metrics:nil views:viewsDictionary]];
 [self.arrows addConstraints:constraint]; 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-10-24T17:35:18.903

看起来自动布局视觉格式解析引擎正在将`.`VFL 约束中的 "" 解释为 keyPath 而不是它使用的键`valueForKeyPath:`。

`NSDictionaryOfVariableBindings(...)`将采用括号中的任何参数并将其转换为以对象为值的文字键（在您的情况下为：）`@{"self.arrow" : self.arrow}`。在 VFL 的情况下，自动布局认为您有一个`self`在视图字典中命名的键，其子字典（或子对象）的键为`arrow`,

```
@{
   @"self" : @{ @"arrow" : self.arrow }
} 
```

当您真正希望系统将您的密钥解释为“ `self.arrow`”时。

通常，当我使用这样的实例变量 getter 时，我通常最终会创建自己的字典，而不是`NSDictionaryOfVariableBindings(...)`像这样使用：

```
NSDictionary *views = @{ @"arrowView" : self.arrow } 
```

或者

```
NSDictionary *views = NSDictionaryOfVariableBindings(_arrow); 
```

这将允许您在没有自我的情况下使用 VFL 中的视图，并且您仍然知道您在说什么：

```
NSArray *arrowHorizConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:[arrowView]-5-|" options:0 metrics:nil views]; 
```

或者

```
NSArray *arrowHorizConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"H:[_arrow]-5-|" options:0 metrics:nil views]; 
```

作为一般规则，我已经学会了不要`.`在其中使用带有点 ( ) 的字典键，以避免任何系统混乱或调试噩梦。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-07T12:31:38.103

我的诀窍是简单地声明一个局部变量，它只是指向该属性的另一个指针，并将其放在`NSDictionaryOfVariableBindings`.

```
@interface ViewController ()
@property (strong) UIButton *myButton;
@property (strong) UILabel *myLabel;
@end

...

UIButton *myButtonP = self.myButton;
UILabel *theLabelP = self.myLabel;
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(myButtonP, myLabelP); 
```

`P`后缀是“指针” 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T08:48:32.637

最简单的解决方案是避免从您自己的类中获取变量，并将超类中的变量重新定义为局部变量。您的示例的解决方案是

```
UIView *contentView = self.contentView;
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(_arrows, contentView); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-16T12:03:40.370

确保在将所需的子视图添加到主视图后添加约束。需要一段时间才能获得与此问题相关的知识。

# delphi - 如何获取控制面板项目列表然后执行一个？

> ID：13045179
> 
> 赞同：1
> 
> 时间：2012-10-24T08:09:48.647
> 
> 标签：delphi, popupmenu, control-panel

1\. 如何获取控制面板列表，包括它们的名称和图标，以便创建类似于“开始”菜单显示的菜单？

[![控制面板从“开始”菜单弹出](../Images/6e1cd6e9d4a6e993021478dc905e921a.png)](https://i.stack.imgur.com/qVikF.png)

2.当我点击一个条目时，如何执行对应的控制面板？

顺便问一下，这种PopupMenu是用什么控件来做的？但它有右键单击事件。

更新 ：

我使用 PItemIDList 来获取一个文件夹：

```
var:
PIDL, TempPIDL: PItemIDList;
Path: array[0..MAX_PATH] of Char;
FI: SHFILEINFOW;
begin
SHGetSpecialFolderLocation(0, CSIDL_FAVORITES, PIDL);
SHGetPathFromIDList(PIDL , Path);
Memo1.Lines.Add(Path);
SHGetFileInfo(LPCTSTR(PIDL), 0, FI, SizeOf(FI), SHGFI_PIDL or SHGFI_DISPLAYNAME or SHGFI_ICON);
Memo1.Lines.Add(FI.szDisplayName);
Image1.Picture.Icon.Handle := FI.hIcon; 
```

它显示正常，但是当我将 CSIDL_FAVORITE 更改为 CSIDL_CONTROLS 时，我总是会出错。这是获取控制面板项目的错误方法吗？我也使用另一种方法从[这里](http://delphi.about.com/library/weekly/aa062403b.htm)
使用 CPL 副本 但它无法显示完整的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:18:26.617

您可以检查所有已注册小程序的注册表。
这描述了如何注册它们： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb757044.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb757044.aspx)
同样，您可以扫描注册表以检查已注册的小程序及其运行方法。

然而，在 64 位 Windows 上会有 32 位应用程序无法加载的 64 位小程序，因此提取图标可能会很痛苦。我不知道您是否可以[`LoadLibraryEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179.aspx)通过 64 位 DLL 调用 AsResourceLibrary 标志来仅提取图标。

* * *

另一种方法是使用 Windows 资源管理器命名空间。获取一些`Shell`提供开放虚拟路径的组件套件，例如`My Computer`and`My Documents`而不是`c:\`等。控制面板有一个特殊的 GUID（我不记得了。但`Microsoft TweakUI`工具可以使用该 GUID 在任何文件夹中创建控制面板）。您可能可以使用一些 Shell UI 将`Control Panel`特殊的虚拟文件夹打开到 kind 中`ListView`，然后获取然后枚举项目并提取对应的图片并将它们重新排列为菜单。然后执行可能会通过双击该 shell 列表视图中的项目来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:28:31.997

控制面板小程序是位于系统文件夹中的 CPL 文件

例如：C:\Windows\system32

我的建议是列出这些文件，然后提取图标并获取它们的文件名

如果您对代码有问题，请在此处发布，以便我们提供帮助

**CPL 文件只是 DLL 文件，它们可以包含多个小程序**

谷歌搜索后，我找到了这个教程：

[http://delphi.about.com/od/kbwinshell/l/aa062403a.htm](http://delphi.about.com/od/kbwinshell/l/aa062403a.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T10:25:54.567

在您的帮助下，我解决了问题！特别感谢大卫赫弗南

**1.获取控制面板项**我使用Windows Shell获取控制面板项，使用CPL文件获取不到完整项。

代码 ：

```
var
  psfDeskTop: IShellFolder;
  psfControl: IShellFolder;

  pidControl: PITEMIDLIST;
  pidChild: PITEMIDLIST;
  pidAbsolute: PItemIdList;

  pEnumList: IEnumIDList;
  celtFetched: ULONG;

  FileInfo: SHFILEINFOW;

begin

  OleCheck(SHGetDesktopFolder(psfDeskTop));
  OleCheck(SHGetSpecialFolderLocation(0, CSIDL_CONTROLS, pidControl));
  OleCheck(psfDeskTop.BindToObject(pidControl, nil, IID_IShellFolder, psfControl));
  OleCheck(psfControl.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_INCLUDEHIDDEN or SHCONTF_FOLDERS, pEnumList));

  while pEnumList.Next(1, pidChild, celtFetched) = 0 do
  begin

    pidAbsolute := ILCombine(pidControl, pidChild);
    SHGetFileInfo(LPCTSTR(pidAbsolute), 0, FileInfo, SizeOf(FileInfo), SHGFI_PIDL
      or SHGFI_DISPLAYNAME);
   // SHGetFileInfo can get name and icon 
   //Do something to save item name and icon

  end; 
```

**2\. Execute** 必须`ShellExecuteEx`用来执行一个PIDL 项。

```
var 
ShExeInfo : SHELLEXECUTEINFO;

begin

ZeroMemory(@ShExeInfo, SizeOf(ShExeInfo));
    ShExeInfo.cbSize := SizeOf(ShExeInfo);
    ShExeInfo.lpVerb := 'Open';
    // control panel item's PIDL
    ShExeInfo.lpIDList := pidAbsolute;
    ShExeInfo.nShow := SW_SHOWNORMAL;
    ShExeInfo.fMask := SEE_MASK_IDLIST;
end 
```

并使用

```
 ShellExecuteEx(@ShExeInfo); 
```

最后再次感谢大卫赫弗南。帮了我很多忙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T22:30:25.357

遵循 Arioch 的建议

参考：[http ://www.geoffchappell.com/studies/windows/shell/shell32/classes/controlpanel.htm](http://www.geoffchappell.com/studies/windows/shell/shell32/classes/controlpanel.htm)

我想到的其他“两种或三种方法”在此处详述：

> CONTROL.INI 文件的 [MMCPL] 部分，现在映射到注册表项 HKEY_CURRENT_USER\Control Panel\MMCPL；
> 
> 注册表项 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Control Panel\CPLs；

此外，还有详细的不加载列表：

> 如果候选 CPL 模块的文件名显示为以下任一注册表项中的值，则该候选 CPL 模块将被拒绝：
> 
> ```
> HKEY_CURRENT_USER\Control Panel\don't load
> HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Control Panel\don't load 
> ```

如前所述，该项目的挑战是扫描所有适当的位置并以正确的方式获取数据以便能够对其采取行动。这是因为如何呈现一些“较新”的设计控制面板项目（以及出现在那里的 shell 文件夹，我不确定我是否发现了如何访问它们）。我手头没有数据，但如果可以进一步讨论，我可以复制一两个示例。

# android-emulator - 在 Android 控制台上运行应用程序错误 - Jdeveloper

> ID：13045183
> 
> 赞同：0
> 
> 时间：2012-10-24T08:10:06.607
> 
> 标签：android-emulator, oracle-adf

我正在使用`JDeveloper 11g Release 2`. 我正在尝试`helloworld`在`Android simulator`. 但我最终在控制台中出现以下错误。这是由于我未能设置的一些设置。有人可以帮我添加设置，以便我可以在 Android 控制台上运行该应用程序。

```
The following Android preference configuration is missing or invalid. Set these options in JDeveloper Preferences on the ADF Mobile panel:
Key and Keystore Password
Android SDK Location
Android Platform Location
 (oracle.adfmf.framework.dt.deploy.android.deployers.ValidatePreferencesDeployer) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:40:08.787

如果您现在还没有用于签署 android 应用程序的密钥库以用于测试目的。您应该选择构建模式`Debug`而不是`Release`模式。

应用程序>应用程序属性>部署>选择您的android构建配置文件或创建一个新配置文件>单击`Edit`按钮> Android选项>更改`Build Mode`为`Debug`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:29:23.163

您需要安装用于 Android 开发的 Android SDK 和用于 iOS 开发的 Xcode。ADF Mobile 常见问题解答：[http ://www.oracle.com/technetwork/developer-tools/adf/learnmore/adfmobilefaq-1866697.pdf](http://www.oracle.com/technetwork/developer-tools/adf/learnmore/adfmobilefaq-1866697.pdf)

在这里您可以找到适用于 Android 的设置指南：http: [//docs.oracle.com/cd/E18941_01/tutorials/MobileTutorial/jdtut_11r2_54_2.html](http://docs.oracle.com/cd/E18941_01/tutorials/MobileTutorial/jdtut_11r2_54_2.html)

iOS 版： http: [//docs.oracle.com/cd/E18941_01/tutorials/MobileTutorial/jdtut_11r2_54_1.html](http://docs.oracle.com/cd/E18941_01/tutorials/MobileTutorial/jdtut_11r2_54_1.html)

对于 Android，请确保您的模拟器模拟 4.0 或更高版本以避免：

```
The Android emulator emulates ARMv5, which is not supported. The emulator must support ARMv6 or newer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T14:38:11.910

如果上面还有一个错误，说明它无法编写 cwallet.sso，请尝试关闭 Jdeveloper 并以管理员身份运行。

# wicket-1.5 - Wicket RadioGroup，AjaxFormChoiceComponentUpdatingBehavior，表单提交？

> ID：13045185
> 
> 赞同：0
> 
> 时间：2012-10-24T08:10:10.663
> 
> 标签：wicket-1.5

我在 Wicket 中获得了一个 RadioGroup，并添加了 AjaxFormChoiceComponentUpdatingBehavior。

触发更改后，行为会发送 POST，但不会汇总父表单上的其他更改。

我的问题是：实现完整提交的正确方法是什么？（我需要提交完整的表格，因为表格还有其他内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:40:05.317

我认为没有标准的检票口方式可以做到这一点。使用 JavaScript “按下” AjaxSubmitButton 对你有用吗？

也许是这样的？

```
onchange="$('button.mysubmit').click();" 
```

（假设您有一个带有 CSS 类的 AjaxSubmitButton `mysubmit`）

# c# - 如何从另一个页面后面的代码访问变量？

> ID：13045188
> 
> 赞同：1
> 
> 时间：2012-10-24T08:10:16.763
> 
> 标签：c#, asp.net

我有一个 index.aspx (index.aspx.cs) 将包括 body.aspx (body.aspx.cs) 使用`Server.execute("body.aspx");`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Collections;

public partial class index : System.Web.UI.Page
{
    public string text1 = "abc";

    protected void Page_Load(object sender, EventArgs e)
    {

    }

} 
```

在 index.aspx.cs 中，有一个`text1`我想在 body.aspx.cs 中使用的变量，该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:37:17.330

我认为您以错误的方式思考 ASP.NET。我猜你是从一名 Windows 开发人员开始的。

ASP.NET 窗体与 Windows 窗体不同。

您必须了解 ASP.NET 页面只存在于请求被提供之前。然后它“死”了。

您不能像使用 Windows 窗体那样从/向页面传递变量。

如果您想从另一个页面访问内容。然后这个页面必须将那条信息存储在一个 SESSION 对象中，然后你从另一个页面访问那个会话对象并获得你想要的值。

让我给你举个例子：

第 1 页：

```
public string text1 = "abc";

    protected void Page_Load(object sender, EventArgs e)
    {
          Session["FirstName"] = text1;
    } 
```

第2页：

```
protected void Page_Load(object sender, EventArgs e)
{
    string text1;          
    text1 = Session["FirstName"].ToString();
} 
```

这就是您在未链接在一起的页面之间传递值的方式。

此外，您可以通过修改查询字符串（将变量添加到 URL）来传递值。

例子：

第1页：（按钮点击事件）

```
private void btnSubmit_Click(object sender, System.EventArgs e)
{
    Response.Redirect("Webform2.aspx?Name=" +
    this.txtName.Text + "&LastName=" +
    this.txtLastName.Text);
} 
```

第2页：

```
private void Page_Load(object sender, System.EventArgs e)
{
   this.txtBox1.Text = Request.QueryString["Name"];
   this.txtBox2.Text = Request.QueryString["LastName"];
} 
```

这就是你应该如何在页面之间传递变量

此外，如果您希望在您网站的所有访问者之间共享一个值。那么你应该考虑使用Application而不是Session。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:19:35.900

如果将变量标记为[`static`](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)，则它不再成为页面特定*实例的属性，而是成为页面**类型*的属性。

然后，您可以`index.text1`从可以看到`index`课程的任何地方访问它。

但是，这意味着该值会在该页面的每个实例之间共享：如果它被页面的实例（或现在可以看到它的任何其他类）更改，则后续页面加载将反映更改的值。

如果你不想要这个——如果这个变量在页面的每个实例之间应该是不同的——那么你想要的就是不可能的。*ASP.NET 页面只在服务器生成时*不*存在*，因此没有可供您从中获取此值的页面。

 *如果此值永远不会更改，请将其标记为[`const`](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)，您不必担心会更改它。*

# sql - PostgreSQL 8.1 中的 SQL 函数“RETURNS TABLE”语法错误

> ID：13045190
> 
> 赞同：2
> 
> 时间：2012-10-24T08:10:18.200
> 
> 标签：sql, postgresql, user-defined-functions

在用户定义的函数中，如何返回由连接其他表的投影形成的表？

这是一个简单的例子

```
CREATE FUNCTION something123(character varying(100)) RETURNS TABLE (a integer, b character varying(300)) AS
$$
  SELECT b.year, p.materialUsed FROM bestBefore b join packaged p on b.id=p.id WHERE id=$1;
$$
LANGUAGE SQL
; 
```

它总是在 TABLE 处出错。您将如何让该 select 语句的内容返回？

我正在使用 Postgres 8.1.21

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:17:39.983

您的代码很好，但您的 PostgreSQL 版本不是。`RETURNS TABLE`根据[PostgreSQL 8.1 文档，`CREATE FUNCTION`](http://www.postgresql.org/docs/8.1/static/sql-createfunction.html)它不支持.

在非常旧的 PostgreSQL 版本（如 8.1）上，您必须`RETURNS SETOF RECORD`在不使用 using的情况下声明`RETURNS TABLE`，因为旧版本不支持它。`RETURNS SETOF RECORD`使函数返回一个匿名记录集。然后，您必须在调用站点指定记录结构，如下所示：

```
regress=# CREATE FUNCTION something123_legacy(character varying(100))
RETURNS SETOF RECORD AS
$$
  SELECT 1, 'fred'::varchar(300);
$$
LANGUAGE SQL;

regress=# SELECT * FROM something123_legacy('blah') somethingresult(col1name integer, col2name character varying(300));
 col1name | col2name 
----------+----------
        1 | fred
(1 row) 
```

或者，您可以`CREATE TYPE`创建定义的行类型，或使用现有的表类型，因为每个表都有一个同名的行类型。然后，您的函数可以返回该行类型。

```
regress=# CREATE TYPE something123type AS (col1name integer, col2name character varying(300));
CREATE TYPE
regress=# CREATE FUNCTION something123_legacy2(character varying(100))
    RETURNS SETOF something123type AS
    $$
      SELECT 1, 'fred'::varchar(300);
    $$
    LANGUAGE SQL;
CREATE FUNCTION
regress=# SELECT * FROM something123_legacy2('blah');
 col1name | col2name 
----------+----------
        1 | fred
(1 row) 
```

您也可以尝试使用`OUT`参数，但我似乎隐约记得它们仅支持 PL/PgSQL（而不是 SQL 函数）在某一时刻，我不确定它们在 8.1 中是否有效。试试看：

```
CREATE FUNCTION something123( IN character varying(100), OUT integer, OUT character varying(300) ) RETURNS setof record AS
$$
  SELECT b.year, p.materialUsed FROM bestBefore b join packaged p on b.id=p.id WHERE id=$1;
$$
LANGUAGE SQL; 
```

* * *

**警告**：[您的 PostgreSQL 版本*不受支持*，并且已经使用了两年](http://www.postgresql.org/support/versioning/)。它*没有得到安全或错误修复*。最终你将不得不升级，你等待的时间越长，它就会变得越难。立即开始计划您的升级。阅读您和当前版本之间的每个 .0 版本（8.2.0、8.3.0 等）的发行说明，特别注意升级说明和兼容性说明。注意删除对文本的隐式强制转换、bytea_output 更改和standard_conforming 字符串更改。阅读新版本手册的升级部分，并注意使用新版本的`pg_dump`.

# jquery - JS 延迟和 jQuery 就绪事件

> ID：13045194
> 
> 赞同：3
> 
> 时间：2012-10-24T08:10:35.047
> 
> 标签：jquery

我已将属性添加`defer`到我的 jquery 脚本以提高网页性能，但现在出现错误`$ is not defined`。我需要在页面加载时执行 JS 代码，所以我使用 jQuery.ready 事件，但在使用 defer 时它不起作用。

```
<head>    
    <script defer="defer" src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {
          //MyLoadCode
        });
    </script>

</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:16:11.017

defer 属性（如果存在）指定在页面完成解析时执行脚本。但是您`$`在页面完成解析之前使用 jquery 变量，当时 jquery 脚本未加载且未初始化`$`。

不要使用 defer 属性，而是将脚本标签从页​​眉移动到页面底部，就在`</body>`标签之前。

```
<html>
    <head></head>
    <body>

        ... 

        <script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>

        <script type="text/javascript">
            $(document).ready(function () {
              //MyLoadCode
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:14:30.127

如果您不希望脚本加载到很晚，请将 jquery 脚本移动到 html 页面的底部。然后它将最后加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:16:11.340

你需要确保在使用之前加载了`$`jQuery，所以你不应该推迟加载 jQuery。

如果要延迟加载 jQuery，则需要将使用 jQuery 的 javascript 添加到脚本 onload 成功事件处理程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:17:20.387

您不能使用 `$(document).ready(function () {`和等待 DOM 已加载的单元，因为该语句是一个 jQuery 符号，它已被延迟且尚不可用。因此，该`$`变量只能在 jQuery 立即加载时使用。

# php - js 确认 vs php 代码

> ID：13045203
> 
> 赞同：0
> 
> 时间：2012-10-24T08:11:12.607
> 
> 标签：php, server-side, confirm

我目前正在编写一个 php 脚本来检查数组中是否没有图像。如果没有图像，我需要一个消息框（我使用 jquery msgbox），询问您是否要创建没有图像的产品。

如果用户单击是，那么我如何返回 true 以便执行 php 代码？我知道 php 是服务器端，所以我“只是”需要你的建议，这里最好的解决方案是什么。

目前我的代码是这样的：

```
<?php if(!isset($_POST['img'] //imagearray)){?>

        <script>
            $.msgBox({
                title: "Sure?",
                content: "Add product without images?",
                type: "confirm",
                buttons: [{ value: "Yes" }, { value: "No" }, { value: "Cancel"}],
                success: function (result) {

                if (result == "Yes") {
                    return true;
                }else{
                    return false;
                }
            }
        });
        </script>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:27:31.577

好的，这是一个例子，

```
<script>
$("#my-super-form").submit(function(event) {
  if($("#id-of-your-image-input").val()=="")
    if(confirm("Add product without image?")) {
      return true;
    } else {
      return false
    }
  }
  return true;
});
</script> 
```

它没有经过测试，但我认为你可以弄清楚它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:17:36.887

如果您使用 jQuery，您想检查是否在帖子之后设置了图像。

当用户点击发送按钮时，您可以使用您的确认消息框，如果找不到图像^^

它对用户来说更直观。

# django - 如何在 django modelform 中的必填字段后添加 *？

> ID：13045208
> 
> 赞同：0
> 
> 时间：2012-10-24T08:11:31.333
> 
> 标签：django, django-forms

我有一个 django modelform，其中一些字段是必需的。我正在使用`{{ form.as_p }}`并且我没有单独访问这些字段。

那么如何为表单中的必填字段添加星号（*）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:12:15.137

如果您不会单独访问这些字段（例如使用 {{ form.as_p }}），那么您可以向您的 ModelForm 添加一个属性：

```
class FooForm(forms.ModelForm):
    required_css_class = 'required' 
```

这会将所有需要的字段定义为具有“必需”类

然后您可以使用 CSS 添加星号：

```
<style type="text/css">
    .required:after { content: '*'; }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-02T07:33:35.263

最简单的方法是更改​​标签

```
class Form(ModelForm):
    model = <model>
    labels = {
        "<field_name>": "<label>*",
    } 
```

或者您可以使用小部件为字段设置 id 并为该 id 设置标签：

```
class Form(ModelForm):
    model = <model>
    widgets = {
        "<field_name>": "<widget_obj>(attrs={"id": "<id>"})*",
    } 
```

# c++ - 在 C++ 中快速添加随机变量

> ID：13045214
> 
> 赞同：10
> 
> 时间：2012-10-24T08:12:15.450
> 
> 标签：c++, performance, random

**简短版本**：如何最有效地表示和添加由它们的实现列表给出的两个随机变量？

**稍微长一点的版本：** 对于一个工作项目，我需要添加几个随机变量，每个变量都由一个值列表给出。例如，rand 的实现。变种。A 是 {1,2,3}，B 的实现是 {5,6,7}。因此，我需要的是A+B的分布，即{1+5,1+6,1+7,2+5,2+6,2+7,3+5,3+6,3+7 }。而且我需要对不同的随机变量（C，D，...）进行多次这种添加（让我们将此添加次数表示为 COUNT，其中 COUNT 可能达到 720）。

**问题：**如果我使用这种将 A 的每个实现与 B 的每个实现相加的愚蠢算法，复杂性在 COUNT 中是指数级的。因此，对于每个 rv 由三个值给出的情况，COUNT=720 的计算量是 3^720 ~ 3.36xe^343，这将持续到我们的日子结束来计算:) 更不用说实际了生活，每辆房车的长度将是 5000+。

**解决方案：** 1/ 第一个解决方案是使用我可以进行舍入的事实，即具有整数值的实现。像这样，我可以将每个 rv 表示为一个向量，并且在对应于实现的索引处，我的值为 1（当 rv 具有此实现一次时）。因此，对于 rv A 和索引从 0 到 10 的实现向量，表示 A 的向量将是 [0,1,1,1,0,0,0...]，而 B 的表示将是 [0, 0,0,0,0,1,1,1,0,0,10]。现在我通过这些向量创建 A+B 并执行与上述相同的操作（将 A 的每个实现与 B 的每个实现相加，并将其编码为相同的向量结构，向量长度的二次复杂度）。这种方法的好处是复杂性是有限的。这种方法的问题是，在实际应用中，A 的实现将在区间 [-50000,

2/ 要拥有更短的数组，可以使用哈希图，这很可能会减少 A+B 中涉及的操作（数组访问）的数量，因为假设理论跨度的一些重要部分 [-50K, 50K] 永远不会成为现实。然而，随着越来越多的随机变量的不断求和，实现的数量呈指数增长，而跨度仅线性增加，因此跨度中的数字密度随着时间的推移而增加。这会扼杀哈希图的好处。

所以问题是：我怎样才能有效地解决这个问题？计算电力交易中的 VaR 需要解决方案，其中所有分布都是凭经验给出的，不像普通分布，因此公式没有用，我们只能模拟。

* * *

作为我们部门的一半，使用数学被认为是第一选择。是数学家。但是，我们要添加的分布表现不佳，并且 COUNT=720 是一个极端值。更有可能的是，我们将使用 COUNT=24 作为每日 VaR。考虑到要添加的分布的不良行为，对于 COUNT=24，中心极限定理不会太紧密（SUM(A1, A2, ..., A24) 的发行版不会接近正常值）。在计算可能的风险时，我们希望得到一个尽可能精确的数字。

预期用途是这样的：您从某些操作中获得每小时的现金流量。一小时的现金流分布是 rv A。下一小时，是 rv B，等等。你的问题是：在 99% 的情况下，最大的损失是什么？因此，您对这 24 小时中的每个小时的现金流进行建模，并将这些现金流作为随机变量添加，以便获得全天总现金流的分布。然后你取 0.01 分位数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:36:08.923

尝试减少整个添加所需的通过次数，可能将每个列表（包括最后一个列表）减少到一次通过。

我认为您不能减少添加的总数。

此外，如果适用，您应该研究并行算法和多线程。

在这一点上，大多数处理器能够并行执行加法，给定适当的指令（[SSE](http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions)），这将使加法速度快很多倍（仍然不能解决复杂性问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:39:08.017

正如您在问题中所说，您将需要大量的计算才能获得确切的答案。所以这不会发生。

但是，当您处理随机值时，可以将一些数学应用于该问题。所有这些添加的结果不会导致接近正态分布的东西吗？例如，考虑掷一个骰子。每个数字都有相等的概率，因此实现不遵循正态分布（实际上，他们可能这样做，上周 BBC4 上有一个关于它的节目，它表明彩票球的外观呈正态分布）。但是，如果您掷两个骰子并将它们相加，那么实现确实遵循正态分布。因此，我认为您的计算结果将近似于正态分布，因此找到给定输入集的平均值和 sigma 值就成了问题。

我想有一个必然的问题，这就是结果的用途？了解如何使用结果将有助于决定如何创建结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:04:33.943

忽略编程解决方案，随着数据集的增长，您可以显着减少添加的总数。

如果我们定义四个组`W`、和`X`，每个组都有三个元素，根据您自己的数学计算，这会导致大量操作：`Y``Z`

*   W + X => 9 次操作
*   (W + X) + Y => 27 次操作
*   (W + X + Y) + Z => 81 次操作
*   **总计：117 次操作**

但是，如果我们假设您的“添加”操作的严格排序定义使得两个集合`{a,b}`并且`{c,d}`总是导致`{a+c,a+d,b+c,b+d}`那么您的操作是*[关联](http://en.wikipedia.org/wiki/Associativity)*的。这意味着您可以这样做：

*   W + X => 9 次操作
*   Y + Z => 9 次操作
*   (W + X) + (Y + Z) => 81 次操作
*   **总计：99 次操作**

对于一个简单的情况，这节省了 18 次操作。如果将上述扩展至 6 组，每组 3 名成员，则操作总数可以从 1089 减少到 837 - 几​​乎节省 20%。您拥有的数据越多，这种改进就越明显（更多集合或更多元素将节省更多）。

此外，这为更好的并行化打开了问题：如果您有 200 个组要处理，您可以首先并行组合 100 对，然后是 50 对或结果，然后是 25 对，等等。这将允许很大程度的并行性，应该给你更好的表现。（例如，在大约 10 个并行操作中将添加 720 个集合，因为每个并行添加将允许增加`COUNT`2 倍。）

我绝对不是这方面的专家，但对于使用典型 GPU 的并行处理能力来说，这似乎是一个理想的问题——我的理解是，像 CUDA 这样的东西可以让并行处理所有这些计算变得很短。

**编辑：**如果你真正的问题是“你最大的损失是什么”，那么这是一个更容易的问题。鉴于最终集合中的每个值都是每个“组件”集合中的一个值的总和，通常通过组合每个组件集中的*最低值来找到最大的损失。*找到这些较低的值（每组一个值）是一项更简单的工作，然后您只需将有限的一组值相加即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T09:13:14.053

基本上有两种方法。一个近似值和一个精确值...

**近似方法**通过大量抽样对随机变量的总和进行建模。基本上，有了随机变量`A`，`B`我们从每个 rv 中随机采样 50K 次，添加采样值（这里 SSE 可以提供很大帮助），我们的分布为`A+B`. 这就是数学家在 Mathematica 中的做法。

**精确方法**利用了 Dan Puzey 提出的方法，即仅将每个 rv 密度的一小部分相加。假设我们有具有以下“密度”的随机变量（为简单起见，每个值的可能性相同）

```
A = {-5,-3,-2}
B = {+0,+1,+2}
C = {+7,+8,+9} 
```

的总和`A+B+C`将是

```
{2,3,3,4,4,4,4,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,8,8,8,9} 
```

如果我想准确地知道整个分布，我别无选择，只能将 A 的每个元素与 B 的每个元素相加，然后将这个和的每个元素与 C 的每个元素相加。但是，如果我只想要 99% VaR在这个总和中，即这个总和的 1% 百分位数，我只需要对 的最小元素求和`A,B,C`。

更准确地说，我`nA,nB,nC`将从每个分布中提取最小的元素。为了确定`nA,nB,nC`，让我们先将它们设置为 1。然后，`nA`如果`A[nA] = min( A[nA], B[nB], C[nC])`（计数`A,B,C`已排序）则加一。这样，我可以得到`nA, nB, nC`最小的元素`A,B,C`，我必须将它们相加（彼此相加）并取第 X 个最小的和（其中 X 是 1% 乘以总和的总组合数，即 3*3* 3 为`A,B,C`）。这也告诉何时停止增加`nA,nB,nC`- 当`nA*nB*nC`> X时停止。

然而，像这样我再次做同样的冗余，即我正在计算`A+B+C`1% 百分位数左侧的整个分布。然而，即使这也比计算整个发行版要短得多`A+B+C`。但我相信应该有一个简单的迭代算法来准确地告诉给定的 VaR 数，`O(a*b)`其中`a`是添加的 rv 的数量，并且`b`是每个 rv 密度中的最大元素数

对于我是否正确的任何评论，我都会很高兴。

# mysql - Azure：无法加载文件或程序集 MySql.Data

> ID：13045218
> 
> 赞同：0
> 
> 时间：2012-10-24T08:12:54.667
> 
> 标签：mysql, azure

我正在尝试从 Azure 调用位于另一台服务器上的 MySQL 数据库。我引用.Net MySql.Data，它在测试应用程序中运行时有效。但是，当我将代码部署到 Azure 服务器时，出现以下异常：

```
Could not load file or assembly 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' or one of its dependencies. The system cannot find the file specified. 
```

由于它是 .Net 的一部分，我希望它可以在 Azure 上运行，所以我怀疑我可能做错了什么。我还尝试将 MySql.Data.dll 添加到项目中并将其安装到 CAG 中，但没有成功。（但我不确定它是否安装成功）

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:05:38.913

你为什么假设 MySql.Data 是 .NET 的一部分？[连接器](http://dev.mysql.com/downloads/connector/net/)是用 .NET 编写的，它不是 .NET 的一部分。您需要确保程序集在您的实例中可用。由于本地复制不起作用（它应该起作用......），请尝试以下操作：

1.  在项目的文件夹（例如 mysql）中添加**gacutil.exe**和**MySql.Data.dll**，并将复制到输出目录设置为始终。
2.  然后创建一个调用 gacutil.exe 并安装程序集的启动任务，例如：`mysql\gacutil.exe /i mysql\MySql.Data.dll`

注意：我假设您使用的是 Web 角色。

# c# - 使 Resharper 在类/命名空间标识符和大括号之间放置一个空格

> ID：13045219
> 
> 赞同：3
> 
> 时间：2012-10-24T08:12:55.993
> 
> 标签：c#, formatting, resharper

我刚刚在我的机器上安装了 Resharper，默认情况下，他向我展示了以下 C# 代码格式：

```
namespace machineLearning{
    public class Class1{
    }
} 
```

我试过摆弄不同的选项，`Options -> C# -> Formatting Style`但我似乎找不到纠正这种行为的选项。关于在标识符和后面的大括号之间添加空格似乎没有明确或不明确的选项。

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:18:11.870

在 Resharper 7 它位于 Resharper -> Manage Options -> Code Editing -> C# -> Formatting Style -> Braces Layout -> Method declaration -> （将值设置为 ）在行尾（K & R Style）

# php - 控制器 HMVC 中的 CodeIgniter 负载控制器

> ID：13045226
> 
> 赞同：0
> 
> 时间：2012-10-24T08:13:49.023
> 
> 标签：php, codeigniter, partial-views, codeigniter-2, hmvc

我正在使用[http://github.com/philsturgeon/codeigniter-template/](http://github.com/philsturgeon/codeigniter-template/)作为模板，并尝试将其他控制器视图作为部分加载到实际视图中。我的主要问题是我无法将元数据（javascripts、css）从其他控制器附加到主控制器。

**应用程序/核心/MY_Loader.php**

```
class MY_Loader extends CI_Loader
{
    function __construct()
    {
        parent::__construct();
    }

    function controller( $sController ) {
        global $RTR;

        // Parse the sController string ex: demo/index
        $aControllerData = explode( '/', $sController );

        $sMethod = !empty( $aControllerData[1] )
            ? $aControllerData[1]
            : 'index'
        ;
        $sController = !empty( $aControllerData[0] )
            ? $aControllerData[0]
            : $RTR->default_controller
        ;

        $sClass = ucfirst( $sController );

        $sPath = APPPATH . 'controllers/';

        if ( !file_exists( $sPath . $sController . '.php' ) || class_exists( $sClass, FALSE ) ) {

            set_status_header( 503 );
            exit( 'Unable to locate the specified class: '. ucfirst( $sController ).'.php' );
        }
        $this->file( $sPath . $sController . '.php' );
        $sClass = new $sClass;

        if ( !method_exists( $sClass, $sMethod ) ) {
            set_status_header( 503 );
            exit( 'There is no Method: ' . $sMethod . ' in Class: '. ucfirst( $sController ).'.php' );
        }
        $aArguments = func_get_args();
        return call_user_func_array( array( $sClass, $sMethod ), array_slice( $aArguments, 1));
    }

}

/* End of file MY_Loader.php */
/* Location: ./controllers/MY_Loader.php */ 
```

**应用程序/控制器/demo.php**

```
<?php if ( !defined( 'BASEPATH' ) ) {
    exit( 'No direct script access allowed' );
}

class Demo extends CI_Controller
{

    function index() {

        $this->load->controller('welcome');
        $this->template->set_partial('footer', 'partials/footer')->build('demo');
    }
}

/* End of file welcome.php */
/* Location: ./controllers/demo.php */ 
```

**应用程序/控制器/welcome.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Welcome extends CI_Controller {

    public function index()
    {
        echo 'Loaded welcome controller';
        $this->template->title('Welcome');
        $this->template->append_metadata('<script src="/js/jquery.js"></script>');
        $this->template->set_partial('footer', 'partials/footer')->build('welcome_message');
    }
} 
```

转到 url localhost/demo 后，我得到了部分接口，一切看起来都很好，但我看到在我的日志中加载了一些库太多次。

```
DEBUG - 2012-10-24 08:02:16 --> Database Driver Class Initialized
DEBUG - 2012-10-24 08:02:16 --> User Agent Class Initialized
DEBUG - 2012-10-24 08:02:16 --> Template Class Initialized
DEBUG - 2012-10-24 08:02:16 --> Controller Class Initialized
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/controllers/welcome.php
DEBUG - 2012-10-24 08:02:16 --> Database Driver Class Initialized
DEBUG - 2012-10-24 08:02:16 --> User Agent Class Initialized
DEBUG - 2012-10-24 08:02:16 --> Template Class Initialized
DEBUG - 2012-10-24 08:02:16 --> Controller Class Initialized
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/themes/default/views/partials/footer.php
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/views/welcome_message.php
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/themes/default/views/layouts/main.php
DEBUG - 2012-10-24 08:02:16 --> Helper loaded: inflector_helper
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/themes/default/views/partials/footer.php
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/views/demo.php
DEBUG - 2012-10-24 08:02:16 --> File loaded: /home/www/application/themes/default/views/layouts/main.php
DEBUG - 2012-10-24 08:02:16 --> Final output sent to browser 
```

我试图使用 HMVC，但结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:04:28.847

我在[https://github.com/EllisLab/CodeIgniter/pull/1818](https://github.com/EllisLab/CodeIgniter/pull/1818)找到了一个解决方案。 有一个真正的 HMVC，它可以工作。我希望这将包含在即将发布的 CodeIgniter 版本中。

我的测试结果显示在图像中。控制器/demo.php

```
class Demo extends CI_Controller {

    public function index()
    {
        $this->load->controller('welcome');
        $this->load->view('demo');
    }
} 
```

[![结果](../Images/4ca73dc6ef5a4d313dae620960cb2273.png)](https://i.stack.imgur.com/tNeSL.png)
[（来源：[github.com/EllisLab/CodeIgniter](https://github.com/EllisLab/CodeIgniter/pull/1818)）]

# javascript - Phonegap/Android 错误：未捕获的 ReferenceError：url 未在文件中定义：///android_asset/www/js/login.js:17

> ID：13045227
> 
> 赞同：0
> 
> 时间：2012-10-24T08:13:49.233
> 
> 标签：javascript, android, cordova

我为 Android 创建了一个 phonegap 应用程序，并将登录“逻辑”放入一个 javascript 文件中。有时登录功能有效，有时无效。如果没有，我会收到以下错误：

> 10-24 10:01:13.211：Web 控制台（25080）：未捕获的 ReferenceError：url 未在文件中定义：///android_asset/www/js/login.js:17

一切都在那里，当我使用cordova2.0.0时它工作正常，但我不得不切换到cordova 2.1.0。由于开关它并不总是工作正常。这是我在 html 文件中包含资源的方式：

```
<html>

    <head>
        <title>Hello World</title>

        <script type="text/javascript" charset="utf-8" src="js/cordova-2.1.0.js"></script>

        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="js/jquery-1.8.1.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/login.js"></script>    

    </head>
... 
```

这是我的 login.js

```
$('#page_login_submit').live('click',function(){

  var name = $('#page_login_name').val();
  if (!name) { alert('Please enter your user name.'); return false; }
  var pass = $('#page_login_pass').val();
  if (!pass) { alert('Please enter your password.'); return false; }

  $.ajax({
      url: "http://scoreboard.pronovix.net/?q=scoreboard/user/login.json",
      type: "POST",
      data: 'username=' + encodeURIComponent(name) + '&password=' + encodeURIComponent(pass),
      dataType: "json",
      error: function(jqXHR, textStatus, errorThrown) {
        alert('Login fail: ' + url + '+' + data); //that's line 17
        console.log(JSON.stringify(jqXHR));
        console.log(JSON.stringify(textStatus));
        console.log(JSON.stringify(errorThrown));
      },
      success: function (data) {
        window.location.href = 'index.html';
      }
  });

  return false;
}); 
```

谁能说出原因？

很感谢任何形式的帮助！

真挚地，

佐利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:17:03.680

您正在尝试引用 url 变量以在错误中打印出来，但您尚未在任何地方定义它。

请记住，错误函数无法访问 ajax 函数的参数。

**可能的解决方案**

如果您实现了 beforeSend 功能，您可以保存 url，然后再使用它

```
beforeSend: function (jqXHR, settings) {
    url = settings.url + "?" + settings.data;
} 
```

此解决方案取自[Access the URL of an jQuery Ajax Request in the Callback Function](https://stackoverflow.com/questions/5468312/access-the-url-of-an-jquery-ajax-request-in-the-callback-function)

# android - 如何使用 Tabs and Pager 示例替换 ActionBarSherlock 中的选项卡使用的片段？

> ID：13045238
> 
> 赞同：1
> 
> 时间：2012-10-24T08:14:35.710
> 
> 标签：android, tabs, actionbarsherlock

[我的问题与此](https://stackoverflow.com/questions/11259869/how-do-i-replace-the-fragment-from-one-of-the-tabs-in-a-tabadapter)类似。但是，它更笼统一些：让我尝试解释一下：我正在使用带有 Tabsadapter 和 Viewpager 的 ActionBarSherlock。我已经用我自己的片段替换了所有片段，现在我在其中一个片段中有一个按钮，单击该按钮时，将启动以下 onclick 处理程序：

```
public void onAcceptSelected() {

    SherlockFragment addFirstChildFragment = AddChildFragment.newInstance();
    getSupportActionBar().setTitle("The new title of the fragment here");
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
     ft.replace(R.id.pager, addFirstChildFragment);
     ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
     ft.addToBackStack(null);
     ft.commit();

} 
```

那么问题是新片段中的以下方法：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     View v = inflater.inflate(R.layout.fragment_childeditor, container, false);
    return v;
 } 
```

不会导致实际提供新的可见布局：其内容为空的选项卡（例如，我看到一个全息白色主题的空选项卡）。

现在我有以下问题：

我的主要问题是：“我应该如何替换选项卡中的片段？” 带有子问题：

1.  我是否应该调整 Tabs 和 Pager 示例的 XML 并将其与片段容器相匹配？
2.  使用选项卡和具有许多片段的查看器的最佳实践是什么？因为我想使用标签作为我的主要导航，但我会有很多不同的片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T16:18:47.170

它相当简单。只需像替换其他片段一样更改与选项卡关联的片段。

```
 Fragment donorpage = new DonorRegistrationPage(); // new fragment for the tab

            FragmentTransaction transaction = getFragmentManager().beginTransaction();

            transaction.replace(R.id.fragment_container, donorpage, "frag");

            transaction.addToBackStack(null);

            // Commit the transaction
            transaction.commit(); 
```

这应该替换选项卡的片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:23:26.197

答案就在这个问题的答案 [Actionbarsherlock + tabs + multi fragment?](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments/10082727)

我的问题的答案是： 1\. 不，这不是必需的：我可以通过编程方式添加它们。2\. 我可以使用片段堆栈，如上面链接中的示例所示。

# opengl - 如何也为文本实施颜色选择策略？

> ID：13045239
> 
> 赞同：3
> 
> 时间：2012-10-24T08:14:41.757
> 
> 标签：opengl, text, colors, selection, picking

因此，我成功地实现了拾取/选择，方法是使用独特的颜色渲染每个我希望可选择的部分。

这适用于几何，但文本呢？我在网上搜索了很多，但没有找到任何与颜色选择和文本相关的内容。

我认为的解决方案是在后台缓冲区中呈现一些自定义几何图形而不是文本。问题是我的场景可以有不同的旋转（全局 X + 局部 Z），所以我需要每次计算这个几何体的正确位置和旋转，因为我需要匹配自动渲染的文本的位置/旋转使用 glut.glutStrokeString(font, string) 调用水平和垂直于用户。

我想知道是否还有关于文本选择的技巧。

Ps：sry，我错了，我用的不是笔划而是glutBitmapString..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T10:09:09.873

您可以为文本计算屏幕空间中的边界矩形，并在单击事件中检查光标位置是否位于任何活动边界矩形中。像这样的东西：

```
struct brect_t { float x, y, w, h; };
struct string_t {
    void *fontID;
    const unsigned char *data;
    brect_t rect;
};

static string_t strings[MAX_STRINGS];
int stringsCount = 0;

// add new string to render queue
int stringsAdd(float x, float y, void *fontID, const unsigned char *str) {
    if (stringsCount >= MAX_STRINGS)
        return 0;

    string_t *string = strings + stringsCount++;
    string->rect.x  = x;
    string->rect.y  = y;
    string->rect.w  = glutStrokeLength(fontID, str);
    string->rect.h  = glutStrokeHeight(fontID);
    strings->fontID = fontID;
    string->data    = str;

    return 1;
}

// render all strings
void stringsRender(float r, float g, float b) {
    glColor3f(r, g, b);

    for (int i = 0; i < stringsCount; ++i) {
        const string_t *string = strings + i;

        glPushMatrix();
        glLoadIdentity();
        glTranslatef(string->rect.x, string->rect.y, 0.0f);
        glutStrokeString(string->fontID, string->data);
        glPopMatrix();
    }
}

// x,y - in model space coordinates
const string_t* stringsPick(float x, float y) {
    for (int i = 0; i < stringsCount; ++i) {
        const string_t *string = strings + i;
        const rect_t   *rect   = &string->rect;

        if (x >= rect->x &&
            y >= rect->y &&
            x <= (rect->x + rect->w) &&
            y <= (rect->y + rect->h)) {
            return string;
        }
    }

    return NULL;
} 
```

# c++ - 在 C++ 中执行异步 http 请求的 cpp-netlib 的替代品

> ID：13045241
> 
> 赞同：4
> 
> 时间：2012-10-24T08:14:47.320
> 
> 标签：c++, boost, asynchronous, asihttprequest, cpp-netlib

我今天花了半天时间尝试在 Mac OS X 上安装[cpp-netlib](https://github.com/cpp-netlib/cpp-netlib)未成功（目标是在 C++ 中实现异步 http 请求）。当我“制作”来构建和运行测试时，我有很多来自 Boost 的“没有匹配的构造函数”错误。读完[这篇](https://github.com/cpp-netlib/cpp-netlib/issues/123)文章后，我尝试安装不同版本的 Boost（1.49、1.50、1.51），但这并没有帮助。所以我正在考虑cpp-netlib的替代品。一种可能性是直接使用 Boost.Asio，但使用 cpp-netlib 之类的东西会很棒，因为一旦安装它就更容易使用。想到 cpp-netlib 的任何替代品吗？或者我应该尝试让 cpp-netlib 通过测试的任何其他方式？提前致谢！

# vim - snipMate 只在空缓冲区上工作？

> ID：13045245
> 
> 赞同：1
> 
> 时间：2012-10-24T08:14:52.200
> 
> 标签：vim, snipmate

我正在尝试将 snipMate 与 sql 文件一起使用，但是在编辑现有文件时它似乎不起作用。

如果我创建一个新的空缓冲区（没有文件；例如从开始菜单启动 gvim），并将文件类型设置为`sql`( `:set ft=sql`)，它可以工作。但是，如果我随后尝试打开一个 sql 文件（例如`:e c:\blah.sql`）并对其进行编辑，则 snipMate 不再起作用。是什么赋予了！？

**设置：**

*   gvim
*   7.3
*   Windows 7的
*   snipMate 0.84
*   `filetype plugin on`另外，我的文件中确实有`.vimrc`。

**编辑**

显然，如果我打开一个空缓冲区，将文件类型设置为 sql，然后使用 保存到文件`w c:\blah.sql`，我现在打开了一个 sql 文件，并且 snipMate 继续工作。

**编辑**

这是我当前 .vimrc 的要点，以防万一：[https ://gist.github.com/3946877](https://gist.github.com/3946877)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:57:57.643

我`.vimrc`在我的电脑上试过你的，它工作正常。有一个`filetype.vim`文件`$VIMRUNTIME`可以在启动时检测文件类型，并且很可能您在该文件中遇到了一些问题。这些是我的相关行：

```
" SQL
au BufNewFile,BufRead *.sql         call s:SQL()

func! s:SQL()
  if exists("g:filetype_sql")
    exe "setf " . g:filetype_sql
  else
    setf sql
  endif
endfunc 
```

您可以将这些复制到`$VIMRUNTIME/filetype.vim`或仅复制到您的`.vimrc`，这应该可以解决问题，但是您一开始就不应该遇到这个问题。

让我知道你进展如何..

**注意** `$VIMRUNTIME`在`/usr/share/vim/vim73`我的机器上，你可以通过`:echo $VIMRUNTIME`在 vim 会话中运行找到你的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:40:00.213

看起来 vim 无法识别扩展名中的 sql 文件类型。试着把它放到你的 .vimrc 中：

```
augroup filetypedetect
  au! BufRead,Bufnewfile *.sql setfiletype sql
augroup END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:34:03.770

呜呜呜，我是个白痴！

我决定删除除了 snipMate 之外的所有插件，然后慢慢将我的插件重新添加回来。我在连接 snipMate 时并没有意识到，但我之前已经添加了一个用于完成代码完成的插件，称为[code complete](http://www.vim.org/scripts/script.php?script_id=1764)。显然这个书呆子和 snipMate 正在交战，所以一旦我删除了完整的代码，snipMate 就奇迹般地开始工作了！

希望这可能对将来的某人有所帮助。

# c - ACM 10038 快乐跳线

> ID：13045246
> 
> 赞同：0
> 
> 时间：2012-10-24T08:14:55.123
> 
> 标签：c

我已经编写了[Jolly Jump 问题](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=979)的解决方案代码（ACM 10038 uva）。我的代码如下：

```
#include<stdio.h>
#include<stdlib.h>

int main(){
  int count=0;
  int Number[3000]={0};
  int Absolute[3000]={0};
  bool flag=true;
  while(scanf("%d",&count)){
   for(int i=0;i<count;++i){
     scanf("%d",&Number[i]);
     Absolute[i]=0;
   }
   for(int j=0;j<count-1;++j){
     int diff=Number[j]-Number[j+1];
     if(diff<0)diff*=-1;
     Absolute[diff]=1;
   }
   flag=true;
   for(int x=1;x<count;++x){
     if(Absolute[x]!=1){
       flag=false;
       break;
     }
   }
   if(flag)printf("Jolly\n");
   else printf("Not Jolly\n");
 }
 return 0;
} 
```

但提交的结果是超出时间限制。为什么？如何修改我的代码以降低运行时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:22:15.733

您的程序可能超过了时间限制，因为它永远不会完成。如果/何时`scanf()`返回`EOF`，以下内容将永远不会停止循环：

```
while(scanf("%d",&count)){
    // whatever...
} 
```

在这些在线编程问题中，至少针对问题中提供的示例数据运行您提出的解决方案并查看是否获得预期输出通常是一个好主意。如果你的程序没有产生预期的输出，那么你就知道你有问题要解决（并且你有一些具体的东西要调试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:24:22.280

无限循环！只需替换`while(scanf("%d",&count))`为`while(scanf("%d",&count) != EOF)`就完成了。

来自`man scanf`：

> 返回值
> 
> ```
>  These  functions  return  the  number  of  input items successfully
>    matched and assigned, which can be fewer than provided for, or even
>    zero in the event of an early matching failure.
> 
>    The  value  EOF  is  returned if the end of input is reached before
>    either the  first  successful  conversion  or  a  matching  failure
>    occurs.  EOF is also returned if a read error occurs, in which case
>    the error indicator for the stream  (see  ferror(3))  is  set,  and
>    errno is set indicate the error. 
> ```

我也是竞争对手。我可以给您的一个提示是始终创建一个输入文件（in.txt）和一个输出文件（out.txt），将输入重定向到程序并使用以下方法比较输出`diff`：

```
$ cat in.txt
4 1 4 2 3
5 1 4 2 -1 6

$ cat out.txt
Jolly
Not jolly

$ ./jolly_jumpers < in.txt > my_out.txt

$ diff -s out.txt my_out.txt
Files out.txt and my_out.txt are identical 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:08:26.960

我之前已经回答过了。

我所做的是将每两个相应元素的差异添加到向量中，最后对其进行排序。

现在你需要做的只是检查这个向量的每个元素是否比前一个元素正好多 1。此外，检查此排序向量的第一个元素为 1，最后一个元素为 n-1。

# c# - 如何使 ServiceStack MiniProfiler 与 EF 一起使用？

> ID：13045247
> 
> 赞同：3
> 
> 时间：2012-10-24T08:14:54.517
> 
> 标签：c#, entity-framework, entity-framework-4, servicestack

ServiceStack 包含内置的很棒的[MiniProfiler 。但是，它是一个不同的版本，编译到 ServiceStack 中，在它自己的命名空间中。](http://miniprofiler.com/)

我已经让探查器与普通的 ADO.NET 连接一起工作，但我正在努力让它与我的 Entity Framework 4.2 数据上下文一起工作。

通常，人们会使用 MiniProfiler.EF NuGet 包，但由于它是针对官方 MiniProfiler 版本构建的，因此它不起作用。

什么是最简单的方法：

*   将 ServiceStack 中的 MiniProfiler 换成正式版（我对此进行了研究，这似乎并不容易，因为 SS 在某些处理程序的深处为分析器生成 JavaScript）？
*   或者，使内置分析器与 ServiceStack 和实体框架一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:59:29.260

所以，我没有得到任何好的答案，所以我决定要移植 MiniProfiler.EF 以针对 ServiceStack 运行。幸运的是，这并没有太大的努力。

结果在这里：[https ://github.com/driis/ServiceStack.MiniProfiler.EntityFramework](https://github.com/driis/ServiceStack.MiniProfiler.EntityFramework)

它与 MiniProfiler.EF 中的代码完全相同，只是调整了命名空间并修复了一些错误以使其能够编译。要使用，只需将程序集放入您的项目中（而不是 MiniProfiler.EF 包），然后调用`MiniProfilerEF.Initialize_EF42()`您的启动代码 - 全部完成。

当我有时间时，我可能会尝试向 ServiceStack.Contrib 发出拉取请求，因此它可以包含在其中，可能与它自己的 NuGet 包一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T08:28:16.363

按照您的示例，我已经移植了 MiniProfiler.EF6。结果在[GitHub 上](https://github.com/lightel/ServiceStack.MiniProfiler.EF6)共享，并且[NuGet 包](https://www.nuget.org/packages/ServiceStack.MiniProfiler.EF6/)已上传。

# java - 更改源时构建的 Apache ANT 不更改类文件

> ID：13045250
> 
> 赞同：0
> 
> 时间：2012-10-24T08:15:09.117
> 
> 标签：java, ant, compilation

构建的 Apache ANT 未显示错误，并且在修改源时未生成修改后的类文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:21:30.607

```
1\. Do a clean first.(make sure its deleting ) the class files.
2\. Make sure that ant complile task include the src directory you are modifying. 
```

# google-chrome - 当我打开网络检查器时，Chrome 正在缩小视口

> ID：13045251
> 
> 赞同：5
> 
> 时间：2012-10-24T08:15:09.813
> 
> 标签：google-chrome, viewport, web-inspector

出于某种原因，每当我在 Chrome 中打开网络检查器时，浏览器的视口都会缩小。解决它的唯一方法是关闭检查器。有谁知道如何解决这个问题，所以它不会改变视口大小？

![铬故障](../Images/9d8093fecf9a38aa0741d31c64f0e31f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:56:38.813

单击右下角的小齿轮，在 Overrides 选项卡上关闭“Device Metrics”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-21T15:31:43.330

添加

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

给你找麻烦的网站负责人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T14:06:06.310

在最近的 chrome 版本中，尝试单击“设备工具栏”

[![在此处输入图像描述](../Images/e8fde3057da1dbf8f42988990e609589.png)](https://i.stack.imgur.com/rHng0.png)

# android - 从服务开始服务

> ID：13045252
> 
> 赞同：0
> 
> 时间：2012-10-24T08:15:13.313
> 
> 标签：android

我的应用程序中有一项服务，但该服务在一段时间后停止工作，我想保持服务继续工作而不停止，为​​此我尝试在 onDestroy 方法死亡时启动相同的服务，但即使书面日志也不起作用出现，所以可以从自身调用服务，如果不是，我可以创建另一个做同样工作的服务，当其中一个停止时他们互相调用，所以在 onDestory 中我不能调用它，所以如何调用它？，希望有人可以提前帮助我解决这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:58:33.083

您不应该尝试自己再次启动该服务。最好从 onStartCommand() 返回 START_STICKY 或 START_REDELIVER_INTENT ，系统会在有足够资源时为您执行此操作。

请参阅以下链接，其中还有一个示例。 [http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# python - Freebase：使用游标是否有配额限制？

> ID：13045258
> 
> 赞同：2
> 
> 时间：2012-10-24T08:15:26.647
> 
> 标签：python, paging, freebase, mql

我将“新”freebase API 与 google-api-python-client (1.0) 结合使用来选择与特定模式匹配的电影。我通过使用游标和限制语句来做到这一点。

问题是，在大约 8000 部选定的电影之后，我得到一个 HTTP 错误 503“后端错误”。

我尝试了不同的限制值（500、250、100），它总是发生在相同数量的选定实体上。我实现了一个简单的指数增长重试间隔，但即使在 20 分钟后，请求也会导致该错误，而新请求（带有空光标）再次开始选择。

我希望你们中的一个人可以向我解释这一点，或者给我提示我做错了什么。我找不到任何信息表明除了 100k/天的请求限制（我没有达到）之外还有另一个配额限制。

非常感谢。

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:41:52.497

这个问题在 Freebase 邮件列表上得到了回答，结果证明问题是图表中的错误数据导致查询引擎阻塞。具体来说，是键值附加了换行符。稍微更改查询以便返回不同的数据可以解决问题，但它与查询、配额或客户端库没有任何关系。

[此错误报告](http://bugs.freebase.com/browse/FREEBASE-2827)中描述了该问题。

# spring - Spring + Hibernate + Tomcat 依赖问题

> ID：13045262
> 
> 赞同：3
> 
> 时间：2012-10-24T08:15:42.093
> 
> 标签：spring, hibernate, tomcat, tomcat6, noclassdeffounderror

当我运行tomcat并部署战争时，我得到： **NoClassDefFoundError：org/apache/commons/collections/map/LRUMap**

```
 Invocation of init method failed; nested exception is
 java.lang.NoClassDefFoundError:
 org/apache/commons/collections/map/LRUMap
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
 ~[spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE] 
```

奇怪的是我`commons-collections-2.1.jar`在我的 WEB-INF lib 文件夹中得到了（我什至尝试过 3.1）。

编辑：我确实将`commons-collections`from复制`WEB-INF/lib`到了`Tomcat lib`，它似乎有效。但是我无法在生产服务器上执行此操作，为什么不采用我的`WEB-INF/lib`版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:37:48.590

好的，所以我确实放了 3.2.1 版的 commons-collections 并且错误消失了。不幸的是，我仍然不知道哪个库取决于这个版本。甚至`mvn dependency:tree`没有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T22:04:09.490

当我使用`xdoclet`依赖项时，我遇到了这个例外。

如果您有这种依赖关系，只需排除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T10:26:15.257

我有同样的问题，也许现在批准答案为时已晚，但对于将来会遇到这个问题的人来说仍然是有益的。所以我从net.sf.jasperreports 中排除了commons-collections，之后tomcat 运行完美，没有任何问题。

```
<dependency>
    <groupId>net.sf.jasperreports</groupId>
    <artifactId>jasperreports</artifactId>
    <version>4.1.1</version>
    <type>jar</type>
    <scope>compile</scope>
    <exclusions>
        <exclusion>
            <artifactId>commons-collections</artifactId>
            <groupId>commons-collections</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

# objective-c - CorePlot 的 ARC 问题

> ID：13045265
> 
> 赞同：1
> 
> 时间：2012-10-24T08:16:00.007
> 
> 标签：objective-c, ios, ios6, core-plot, xcode4.5

我根据自述文件安装了所有东西并导入了所有必要的库。不过，在实现此方法时：

```
- (CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index {
    CPTMutableTextStyle *labelText = nil;
    labelText= [[CPTMutableTextStyle alloc] init];
    labelText.color = [CPTColor grayColor];

    return [[CPTTextLayer alloc] initWithText:@"Test" style:labelText];
} 
```

我收到错误：

`ARC Semantic issue - Receiver 'CPTTextLayer' for class message is a forward declaration` 和 `ARC Semantic issue - Receiver 'CPTTextLayer' for instance message is a forward declaration`

我在许多帖子中读到，这是缺少 Quartz 库的错误，尽管我已将它导入项目并包含在类中：`#import <QuartzCore/QuartzCore.h>`.

当我返回`nil`而不是这个时，一切正常，但是，嘿，我需要这些数据标签才能工作！

有人知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:28:38.670

通常`forward class error`在当前类中未导入该特定类并且`@class`在 .h 文件中声明时出现。如果`@class`也不存在，它通常会给出一个`unknown type error`. 因此，在评论中提到的这种情况下，很明显`CPTTextLayer`缺少 import 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:29:33.177

我认为您忘记在代码中导入 CPTTextLayer.h

# jsp - 传递多个值

> ID：13045273
> 
> 赞同：0
> 
> 时间：2012-10-24T08:16:22.840
> 
> 标签：jsp, servlets

我想通过单击此按钮将这两个值传递给 servlet（删除）。但这不起作用。我怎样才能做到这一点？

```
<input id="delete" type="button" name="delete" value="Delete"
     onclick="var val=confirm('Do You want to delete ? '); location.href='${pageContext.request.contextPath}/Delete?value='+val +'?id='+<%=rs.getInt("id")%>"> 
```

在 servlet 中它只取一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:53:13.150

我认为`location.href`应该如下：

```
location.href='${pageContext.request.contextPath}/Delete?value=' + val + '&id=' +<%=rs.getInt("id")%>" 
```

请注意，`&id=`而不是`?id=`.

在一个特定的 URL`?`中，只使用一次来分隔 the`path`和`parameters`用于`&`发送多个值。

例如，尝试在其中搜索字符串“mySearch” `google.com`，您将看到生成的 url：

> [http://www.google.co.in/search?q=mysearch&rlz=1C1GGGE_enIN485IN485&oq=mysearch&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8](http://www.google.co.in/search?q=mysearch&rlz=1C1GGGE_enIN485IN485&oq=mysearch&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)
> 
> 这里`q`, `rlz`, ... etc 是不同的请求参数，用符号`sugexp`分隔。`&`

另外，我希望您在 servlet 中将其获取为`request.getParameter("value")`和`request.getParameter("id")`.

# c++ - 编译器允许'char * k= false'？为什么？

> ID：13045276
> 
> 赞同：4
> 
> 时间：2012-10-24T08:16:40.637
> 
> 标签：c++

从我的编译器行为的角度来看，我发现很奇怪，它允许将布尔值分配给`* char`.

```
char * k= false; 
```

为什么？但是赋值后 * char 仍然没有初始化。为什么编译器不允许赋值`int`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:19:32.413

它将隐式地将布尔值转换为`false`值为 0 的整数，并因此声明一个 NULL 指针。它实际上与

```
char* k = 0; 
```

这是有效的语法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:53:13.093

C++03 标准，#4.10：

> 空指针常量是整数类型的整数常量表达式 (5.19) 右值，其计算结果为零。

5.19：

> 一个整型常量表达式只能包含字面量 (2.13)、枚举数、常量变量或整型或枚举类型的静态数据成员，这些类型使用常量表达式 (8.5)、整型或枚举类型的非类型模板参数，以及 sizeof 表达式.

`false`是一个布尔字面量，因此它属于常量表达式的范畴，所以它可以作为一个空指针常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:23:19.163

`false`和是和`true`的快捷方式。对于指针，您使用which 。所以它正确的语法。`0``1``NULL``define NULL 0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:33:29.850

编译器允许这样做，因为在 C++中与和`false`相同。`0``NULL`

就个人而言，至少对于分配，我发现使用它`NULL`来指示空指针更容易理解和更正确。

顺便说一句，在 C++ 之前，在某些系统`NULL`上实际上是一个宏定义为`(void*)0xffff`; [在这个答案](https://stackoverflow.com/a/459805/1338292)中可以找到一些背景。

# r - R 或 PostgreSQL 中的最小可变性检查

> ID：13045278
> 
> 赞同：3
> 
> 时间：2012-10-24T08:16:49.757
> 
> 标签：r, postgresql

我的数据集包含温度值。我想进行最小可变性检查。我想检查 3 个连续的温度值是否相对于每个定义的阈值 (.05) 没有变化，然后用最后三个观察值的平均值替换它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:36:51.807

```
 WITH A as (
   SELECT ambtemp,
          date_trunc('hour', dt)+
          CASE WHEN date_part('minute', dt) >= 6
          THEN interval '6 minutes'
          ELSE interval '0 minutes'
            END as t
          FROM temm),

              B as(
                  SELECT ambtemp,t,

   max(ambtemp::float(23)) OVER (PARTITION BY t) as max_temp,
   min(ambtemp::float(23)) OVER (PARTITION BY t) as min_temp
        FROM A)

          SELECT *

              FROM B
              WHERE (max_temp - min_temp) <= 0.5 
```

# php - 如果 isset $_POST

> ID：13045279
> 
> 赞同：109
> 
> 时间：2012-10-24T08:16:57.100
> 
> 标签：php, isset

我在一个页面上有一个提交到另一个页面的表单。在那里，它检查输入`mail`是否已填充。如果是这样，那么做一些事情，如果没有填满，做其他事情。我不明白为什么它总是说它已设置，即使我发送了一个空表单。有什么遗漏或错误？

`step2.php`：

```
<form name="new user" method="post" action="step2_check.php"> 
    <input type="text" name="mail"/> <br />
    <input type="password" name="password"/><br />
    <input type="submit"  value="continue"/>
</form> 
```

`step2_check.php`：

```
if (isset($_POST["mail"])) {
    echo "Yes, mail is set";    
} else {    
    echo "N0, mail is not set";
} 
```

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-10-24T08:19:23.060

大多数表单输入总是被设置，即使没有填满，所以你也必须检查是否为空。

由于`!empty()`is 已经检查了两者，您可以使用它：

```
if (!empty($_POST["mail"])) {
    echo "Yes, mail is set";    
} else {  
    echo "No, mail is not set";
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-24T08:18:43.240

使用`!empty`而不是`isset`. isset 返回 true`$_POST`因为`$_POST`数组是超全局的并且总是存在（设置）。

或者更好的使用`$_SERVER['REQUEST_METHOD'] == 'POST'`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T08:20:25.710

[来自 php.net](http://us2.php.net/isset)， isset

> 如果 var 存在并且值不是 NULL，则返回 TRUE，否则返回 FALSE。

空白空间被认为是集合。您需要使用 empty() 检查所有空选项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-24T08:19:20.927

如果您发送的表单为空，`$_POST['mail']`仍会发送，但值为空。要检查该字段是否为空，您需要检查

```
if(isset($_POST["mail"]) && trim($_POST["mail"]) != "") { .. } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-30T14:26:30.017

您可以简单地使用：

```
if($_POST['username'] and $_POST['password']){
  $username = $_POST['username'];
  $password = $_POST['password'];
} 
```

或者，使用[empty()](http://php.net/manual/en/function.empty.php)

```
if(!empty($_POST['username']) and !empty($_POST['password'])){
  $username = $_POST['username'];
  $password = $_POST['password'];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-09T17:08:38.760

将以下属性添加到输入文本表单：`required="required"`. 如果表单未填写，则不允许用户提交表单。

您的新代码将是：

```
<form name="new user" method="post" action="step2_check.php"> 
<input type="text" name="mail" required="required"/> <br />
<input type="password" name="password" required="required"/><br />
<input type="submit"  value="continue"/> 
```

```
if (isset($_POST["mail"])) {
    echo "Yes, mail is set";    
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-01T03:34:12.413

也许你可以试试这个：

```
if (isset($_POST['mail']) && ($_POST['mail'] !=0)) { echo "Yes, mail is set"; } else { echo "No, mail is not set"; } 
```

* * *

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-10T07:23:43.850

```
<?php
    if(isset($_POST['mail']) && $_POST['mail']!='') {
        echo "Yes, mail is set";
    }else{
        echo "N0, mail is not set";
    }
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-04T19:09:40.383

让我们认为这是您在 step2.php 中的 HTML 表单

> step2.php

```
<form name="new user" method="post" action="step2_check.php"> 
    <input type="text" name="mail"/> <br />
    <input type="password" name="password"/><br />
    <input type="submit"  value="continue"/>
</form> 
```

我认为您的数据库需要它，因此您可以将 HTML 表单值分配给 php 变量，现在您可以使用 Real Escape String 并且下面必须是您的

> step2_check.php

```
if(isset($_POST['mail']) && !empty($_POST['mail']))
{
$mail = mysqli_real_escape_string($db, $_POST['mail']);
} 
```

其中 $db 是您的数据库连接。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-25T21:26:09.687

先检查是否已经提交了 FORM，然后是字段。您还应该对该字段进行消毒以防止黑客入侵。

```
form name="new user" method="post" action="step2_check.php"> 
    <input type="text" name="mail"/> <br />
    <input type="password" name="password"/><br />
    <input type="submit"  id="SubmitForm" name= "SubmitForm" value="continue"/>
</form> 
```

step2_check：

```
 if (isset($_POST["SubmitForm"]))
   {
   $Email =  sanitize_text_field(stripslashes($_POST["SubmitForm"]));
   if(!empty($Email))
     echo "Yes, mail is set"; 
   else
     echo "N0, mail is not set";
   } 
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-04-05T15:49:13.427

要回答发布的问题：isset 和 empty 一起给出了三个条件。Javascript 也可以通过 ajax 命令使用它。

```
$errMess="Didn't test";   // This message should not show
if(isset($_POST["foo"])){ // does it exist or not
    $foo = $_POST["foo"]; // save $foo from POST made by HTTP request
    if(empty($foo)){      // exist but it's null
        $errMess="Empty"; // #1 Nothing in $foo it's emtpy

    } else {              // exist and has data
        $errMess="None";  // #2 Something in $foo use it now
      }
} else {                  // couldn't find ?foo=dataHere
     $errMess="Missing";  // #3 There's no foo in request data
  }

echo "Was there a problem: ".$errMess."!"; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-09-26T20:21:36.500

你可以试试这个：

```
if (isset($_POST["mail"]) !== false) {
    echo "Yes, mail is set";    
}else{  
    echo "N0, mail is not set";
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-07-11T07:31:18.167

```
<form name="new user" method="post" action="step2_check.php"> 
  <input type="text" name="mail" required="required"/> <br />
  <input type="password" name="password" required="required"/><br />
  <input type="submit"  value="continue"/>
</form>

<?php
if (!empty($_POST["mail"])) {
    echo "Yes, mail is set";    
}else{  
    echo "N0, mail is not set";
}
?> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-05-10T13:36:25.033

你可以试试，

```
 <?php

     if (isset($_POST["mail"])) {
            echo "Yes, mail is set";    
        }else{  
            echo "N0, mail is not set";
        }
  ?> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-01-16T17:22:17.990

$-POST METHOD：如果我们在表单标签中使用 POST 方法来传递数据，我们可以使用 $_POST 数组在服务器中查找数据。使用这个数组名我们从服务器获取数据。($_POST['name'])信息使用 POST 方法从表单发送的内容对其他人是不可见的（所有名称/值都嵌入在 HTTP 请求的正文中），并且对要发送的信息量没有限制。示例代码：

```
<html>
<head>
</head>
<body>
<?php
if(isset($_POST['submit']))
{if(isset($_POST['name']) && isset($_POST['roll']))
{echo"<h1>form submitted</h1>";echo"your name is". $_POST['name']."<br>";
echo "your roll number is". $_POST['roll']."<br>";}}
else{?>
<form action="" method="POST">
Name:<input type="text" name="name"><br><br>
Roll:<input type="text" name="roll"><br>
<br><input type="submit" value="submit" name="submit">
</form>
<?php}?>
</body>
</html> 
```

# c++ - 在 VB.NET 中调用 C++ DLL 文件

> ID：13045282
> 
> 赞同：0
> 
> 时间：2012-10-24T08:17:08.423
> 
> 标签：c++, vb.net, dll, dllimport

我需要在[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中使用 C++ DLL 文件。下面是DLL 文件的转储文件[。](http://en.wikipedia.org/wiki/Objdump)

```
D:\Program Files\Microsoft Visual Studio 10.0\VC>dumpbin /exports d:\dll\myssort.dll
Microsoft (R) COFF/PE Dumper Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.
Dump of file d:\dll\ myssort.dll
File Type: DLL
  Section contains the following exports for MySort.dll
    00000000 characteristics
    3D3F006E time date stamp Thu Jul 25 01:00:54 2002
        0.00 version
           1 ordinal base
           1 number of functions
           1 number of names
    ordinal hint RVA      name
          1    0 00001000 MySortA7
  Summary
        1000 .data
        1000 .rdata
        1000 .reloc
        1000 .rsrc
        3000 .text 
```

下面是 Visual Basic 6.0 对象浏览器中显示的函数定义。

```
Function SortA7(udtArray As udtA7Rec, nTotalItems As Long) As Long
    Member of MySort. MySort
    Sort the elements of A7-type array 
```

如何在 VB.NET 中调用此方法？

我尝试进行 DLL 导入：

```
<DllImport("MySort.dll", _
SetLastError:=True, CharSet:=CharSet.Auto)>
Public Function SortA7(ByVal udtArray As MySort.udtA7Rec(), ByVal nTotalItems As Long) As Long
End Function 
```

但这给了我一个错误：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:40:46.560

如果它出现在 Visual Basic 6.0 对象浏览器中，则它是一个[COM](http://en.wikipedia.org/wiki/Component_Object_Model) DLL。使用 COM 互操作。在[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中，转到*Project References*，转到*COM*选项卡，然后添加 DLL 文件。

# android - 即使在清单中添加 WRITE_SECURE_SETTINGS 权限错误

> ID：13045283
> 
> 赞同：14
> 
> 时间：2012-10-24T08:17:13.277
> 
> 标签：android, android-manifest, application-settings

我在清单中添加了“android.permission.WRITE_SECURE_SETTINGS”。但我仍然收到一条错误消息 - 需要“WRITE_SECURE_SETTINGS”。

我已经看到很多关于此的讨论，并且第三方软件禁止使用此设置。

我可以添加我的应用程序的任何其他方式可以获得此权限吗？

我已经看到了这个 adb 命令，但我不太熟悉如何使用它来将我的应用程序添加到我的设备中，下面的命令是否需要 root 我的设备才能使用，因为它无法通过只读文件系统复制？

```
adb remount
adb push app.apk /system/app/ 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T08:53:42.353

首先，正如您之前所读到的，WRITE_SECURE_SETTINGS对应用程序**不可**用！因此，无论您是使用 root 版本还是生产版本，都不能使用此权限。

因此，如果您希望启用此设置，请创建您自己的固件来满足您的需求，并将该固件加载到您希望的任何设备上。或者，将您的更改贡献给现有的固件模块（例如，Cyanogen）。

其他一些应用程序使用诸如`Reflection`使用 Java 之类的技术来访问未通过 API 公开的函数，您可能可以尝试相同的方法。

其次，`adb remount`除非手机已root或固件默认启用它，否则不能像生产版本一样工作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-01-21T00:49:14.977

我想补充一点，可以通过 adb 授予 WRITE_SECURE_SETTINGS 权限，并且这种方法不需要 root。这是一个命令：

```
adb shell pm grant your.package.name android.permission.WRITE_SECURE_SETTINGS 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-08T03:58:03.577

我最近在这件事上苦苦挣扎。我的客户想要一个应用程序，它可以在设备充电（无线充电器）时关闭 NFC，然后在从充电器中取出时打开。我在我的 Nexus 7 上运行 KitKat，即使我`WRITE_SECURE_SETTINGS`在 Manifest 中有应用程序`/system/app/`，它也无法工作。

事实证明，在 4.4 中他们增加了额外的安全性。但是，在 4.3 中，如果满足以下三点，它就会起作用：

1.  清单有`WRITE_SECURE_SETTINGS`
2.  应用程序在`/system/app/`
3.  包由密钥（任何密钥）签名

[我使用来自http://www.wugfresh.com/nrt/](http://www.wugfresh.com/nrt/)的很棒的 Nexus Root Toolkit (NRT) 对设备进行了植根，然后从以下位置安装了 BusyBox 和系统应用程序移动器：

[https://play.google.com/store/apps/details?id=stericson.busybox](https://play.google.com/store/apps/details?id=stericson.busybox) [https://play.google.com/store/apps/details?id=de.j4velin.systemappmover](https://play.google.com/store/apps/details?id=de.j4velin.systemappmover)

我安装了我的自定义签名 APK 并使用系统应用程序移动器将其移动到位，然后重新启动设备。它工作得很好。希望这可以帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-23T08:23:30.610

对于我使用的需要 WRITE_SECURE_SETTINGS 权限的 api，我必须将其包含在清单中：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
...
coreApp="true"
android:sharedUserId="android.uid.system">

<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>
... 
```

参考：[https ://github.com/android/platform_packages_apps_settings/blob/master/AndroidManifest.xml](https://github.com/android/platform_packages_apps_settings/blob/master/AndroidManifest.xml)

我还必须将应用程序作为系统应用程序运行（在：/system/app 下）。这是一个如何： http: [//www.addictivetips.com/mobile/how-to-install-any-app-as-system-app-on-android/](http://www.addictivetips.com/mobile/how-to-install-any-app-as-system-app-on-android/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-26T08:02:35.050

我也遇到了这种情况，然后我遵循以下规则： 1.在清单中添加 WRITE_SECURE_SETTINGS 2.制作我自己的固件 3.添加 LOCAL_CERTIRICATE := 平台

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-23T15:42:29.943

试试这个，

```
adb shell pm grant your.package.name android.permission.WRITE_SECURE_SETTINGS 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2016-03-13T09:45:31.807

我能够通过启用通知访问来解决这个问题。

```
go to settings
click on sound and notification
scroll down
click on notification access 
```

# scipy - 具有半正定的scipy广义特征问题

> ID：13045287
> 
> 赞同：1
> 
> 时间：2012-10-24T08:17:24.687
> 
> 标签：scipy, eigenvector, eigenvalue, arpack

**嗨，大家好！！！**

我想计算形式的广义特征分解：

> Lf = λ Af

通过使用 scipy.sparse.linalg.eigs 函数，但得到这个错误：

> /usr/local/lib/python2.7/dist-packages/scipy/linalg/decomp_lu.py:61：RuntimeWarning：对角线数 65 正好为零。奇异矩阵。RuntimeWarning) ** 进入 DLASCL 参数编号 4 时具有非法值

我正在传递三个参数，一个对角矩阵、一个正半定 (PSD) 矩阵和数值 K（前 K 个特征值）。Matlab 的 eigs 函数使用相同的输入参数表现良好，但在我理解的 SciPy 中，为了使用 PSD 进行计算，我还需要指定 sigma 参数。

所以，我的问题是：有没有办法避免设置 sigma 参数，就像在 MatLab 中一样，或者如果没有，如何获取 sigma 值？

期待得到建议或提示......提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:59:03.050

该错误似乎意味着在您的广义特征问题中

```
L x = lambda A x 
```

矩阵 A 不是正定的（检查 eigs 文档字符串——在你的情况下，矩阵可能是奇异的）。这是 ARPACK 模式 2 的要求。但是，您可以尝试指定`sigma=0`切换到 ARPACK 模式 3（但请注意，`which`在这种情况下参数的含义是相反的！）。

现在，我不确定 Matlab 做了什么，但可能是它计算的是伪逆而不是`A`. 要模拟这一点，请执行

```
from scipy.sparse.linalg import LinearOperator
from scipy.linalg import lstsq

Ainv = LinearOperator(matvec=lambda x: lstsq(A, x)[0], shape=A.shape)
w, v = eigs(L, M=A, Minv=Ainv) 
```

检查结果——我不知道在这种情况下会发生什么。

或者，您可以尝试指定一个非零值`sigma`。您应该选择什么取决于所涉及的矩阵。它会影响所选择的特征值——例如`which='LM'`那些`lambda' = 1/(lambda - sigma)`较大的特征值。否则，它可能可以任意选择，当然如果`lambda'`您感兴趣的转换后的特征值与其他特征值很好地分离，对 Krylov 进展可能会更好。

# ios - 通过 NSStream 判断成功建立连接和断开连接

> ID：13045292
> 
> 赞同：3
> 
> 时间：2012-10-24T08:17:49.453
> 
> 标签：ios, macos, sockets, foundation, cfnetwork

我正在尝试编写类似包装器的东西，`NSStream`以使我的生活更轻松。我只想知道什么时候建立连接，什么时候关闭，写一些数据来获取接收到的数据。所以我在想这样的事情：

标题：

```
@interface StreamWrapper : NSObject

- (id)initWithDelegate:(id <StreamWrapperDelegate>)delegate;
- (void)writeData:(NSData *)data;

@end

@protocol StreamWrapperDelegate <NSObject>

@required
- (void)streamWrapper:(StreamWrapper *)streamWrapper didReceiveData:(NSData *)data;
- (void)streamWrapperDidConnect:(StreamWrapper *)streamWrapper;
- (void)streamWrapperDidCloseConnection:(StreamWrapper *)streamWrapper;

@end 
```

班级：

```
@interface StreamWrapper () <NSStreamDelegate>

...
@property (nonatomic, weak) id <StreamWrapperDelegate> delegate;
@property (nonatomic, strong) NSInputStream *inputStream;
@property (nonatomic, strong) NSOutputStream *outputStream;

- (void)closeStreams;
- (void)setAndOpenStreams;

@end

@implementation StreamWrapper

#pragma mark - NSStreamDelegate

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    switch (eventCode) {

        case NSStreamEventEndEncountered:
            // Should I here close both streams (even if this is called only for one (in or out)) and delegate closed connection?
            break;

        case NSStreamEventErrorOccurred:
            // Should I here close both streams (even if this is called only for one (in or out)) and delegate closed connection?
            break;

        case NSStreamEventHasBytesAvailable:
            // My reading algorithm... 
            [self.delegate streamWrapper:self didReceiveData:data];
            break;

        case NSStreamEventHasSpaceAvailable:
            // Is this useful for me?
            break;

        case NSStreamEventNone:
            // Is this useful for me?
            break;

        case NSStreamEventOpenCompleted:
            // Should I here delegate successful connection? Should I wait to receive this for both streams? How?
            break;

        default:
            break;
    }
}

...

@end 
```

那么......如何实现我将始终知道何时建立连接并且我能够发送和接收数据以及何时断开连接（即使只有一种方式）并且我应该关闭它并尝试全新的建立？或者什么是做这样的事情的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:38:26.750

根据[苹果的开发者网站](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSStreamEventOpenCompleted)

```
 NSStreamEventNone
 No event has occurred.

 Available in OS X v10.3 and later.

 Declared in NSStream.h.

 NSStreamEventOpenCompleted
 The open has completed successfully.

 Available in OS X v10.3 and later.

 Declared in NSStream.h.

 NSStreamEventHasBytesAvailable
 The stream has bytes to be read.

  Available in OS X v10.3 and later.

 Declared in NSStream.h.

 NSStreamEventHasSpaceAvailable
 The stream can accept bytes for writing.

 Available in OS X v10.3 and later.

 Declared in NSStream.h.

 NSStreamEventErrorOccurred
 An error has occurred on the stream.

 Available in OS X v10.3 and later.

 Declared in NSStream.h.

 NSStreamEventEndEncountered
 The end of the stream has been reached.

 Available in OS X v10.3 and later.

 Declared in NSStream.h. 
```

*   另请参阅本文以获取更多信息：

[文章 : 字节可用事件](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html#//apple_ref/doc/uid/20002273-1001882)

[文章 : 空间可用的事件](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/WritingOutputStreams.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:02:16.867

我之前使用 NSStream 的经验是捕获第一个 NSStreamEventHasSpaceAvailable 事件作为建立连接的信号。

当出现错误或已完成消息时，我还将输入和输出流清零 - 所以我只需要检查这些流在 writeData: 方法中是否为零。

# ios6 - 如何使用 uiimageview rect 屏蔽图像？

> ID：13045293
> 
> 赞同：1
> 
> 时间：2012-10-24T08:17:52.047
> 
> 标签：ios6

我想用以下代码屏蔽图像：

```
CGFloat plx = inputImage.size.width/_imageView.frame.size.width;
CGFloat ply = inputImage.size.height/_imageView.frame.size.height;

CGFloat radius = MIN(_postionView.frame.size.width * plx, _postionView.frame.size.height * ply)/1.5;

CIVector *cen = [CIVector vectorWithX:_postionView.center.x * plx Y:_postionView.center.y * ply];

CIFilter *radialGradient = [CIFilter filterWithName:@"CIRadialGradient" keysAndValues:
                            @"inputRadius0", [NSNumber numberWithFloat:radius],
                            @"inputRadius1", [NSNumber numberWithFloat:radius + 1.0f],
                            @"inputColor0", [CIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:1.0],
                            @"inputColor1", [CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0],
                            @"inputCenter", cen,
                            nil];

CIImage *circleImage = [radialGradient valueForKey:kCIOutputImageKey]; 
```

_postionView 是我的 uiimageview。它没有得到正确的位置。我猜这是因为uikit坐标系和quartz坐标系不同。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T07:22:50.147

已解决，以下是解决代码：</p>

```
CGPoint touchPoint = [touch locationInView:self.view];
ScaleX = _imageView.image.size.width/self.view.frame.size.width;
ScaleY = _imageView.image.size.height/self.view.frame.size.height;

CGFloat imgX;
CGFloat imgY;

imgX = touchPoint.x * ScaleX;
imgY = _imageView.image.size.height - touchPoint.y * ScaleY;

VICPoint = CGPointMake(imgX, imgY);

CIImage *maskImage = nil;
CIVector *cen;

cen = [CIVector vectorWithX:VICPoint.x Y:VICPoint.y];
CGFloat radius = MIN(80 * ScaleX, 80 * ScaleY)/1.5;

CIFilter *radialGradient = [CIFilter filterWithName:@"CIRadialGradient" keysAndValues:
                            @"inputRadius0", [NSNumber numberWithFloat:radius],
                            @"inputRadius1", [NSNumber numberWithFloat:radius + 1.0f],
                            @"inputColor0", [CIColor colorWithRed:0.0 green:1.0 blue:0.0 alpha:1.0],
                            @"inputColor1", [CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0],
                            @"inputCenter", cen,
                            nil];

CIImage *circleImage = [radialGradient valueForKey:kCIOutputImageKey]; 
```

# javascript - 在 jquery 中访问兄弟姐妹

> ID：13045295
> 
> 赞同：0
> 
> 时间：2012-10-24T08:17:56.233
> 
> 标签：javascript, jquery

这是我的代码：

```
<table><tr><td>hello</td>
       <td><input type="text" value="0" onkeypress="GetValue();" /></td>
       <td><input type="text" value="15"  /></td>
       </tr>
 </table>
   <script type="text/javascript">
   function GetValue(){
      //  ???

       }
   </script> 
```

我如何在不使用简单方法的情况下访问第三个 td 的值（值为 15 的 td）并给 td 一个 id 并使用 .parent() 或 .siblings() 调用它，这是一个简单的方法简化我的工作的示例，但在我的实际项目中，输入的值与数据库绑定，任何帮助都更加复杂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:21:46.443

您可以通过**:nth-child()**选择器来完成。

**JS代码：**

```
$('table td:nth-child(3) input').val(); 
```

[演示](http://jsfiddle.net/xzzUB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:20:09.447

您应该将 DOM 元素传递给`GetValue`函数：

```
<input type="text" value="0" onkeypress="GetValue(this);" /> 
```

并使用 jQuery 方法从下一个文本字段中获取值：

```
function GetValue(that) {
    var val = $(that).parent().next().find("input").val();
} 
```

**演示：http:** [//jsfiddle.net/xzzUB/1/](http://jsfiddle.net/xzzUB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:20:09.480

像这样更改输入：

`<input type="text" value="0" onkeypress="GetValue(this);" />`

并发挥作用：

```
function GetValue(el){
  var sib = $(el).parent().siblings('td').last();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:23:33.803

`$("td:eq(2) input").val()`将返回 15

请参阅：[http ://docs.jquery.com/Selectors/eq](http://docs.jquery.com/Selectors/eq)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-24T08:26:21.423

HTML

```
<table id='theTable'><tr><td>hello</td>
       <td><input type="text" value="0" onkeypress="GetValue();" /></td>
       <td><input type="text" value="15"  /></td>
       </tr>
 </table>​​​ 
```

使用 nth-child() jQuery 函数

```
console.log($('#theTable td:nth-child(3)').children().val());​​​​​ 
```

# c# - 在特定时间执行功能

> ID：13045297
> 
> 赞同：4
> 
> 时间：2012-10-24T08:18:08.800
> 
> 标签：c#, winforms, timer

我的应用程序中有一个计时器正在运行，我想根据当地时间停止和启动。所以我需要这样的东西：

```
if ( time = 08:00) {StartTimer();}
If ( time = 18:00) {StopTimer();} //This can be done from the timer event itself 
```

有没有办法在**不**使用另一个计时器的情况下做到这一点？我可以从计时器事件本身中停止计时器，但我将如何重新启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:22:48.957

您可以将计时器的间隔设置为 14 小时，而不是停止它，或者让它以短间隔运行并在内部检查其他条件（一天中的时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:20:37.560

你可以试试这个： -

1) 创建一个控制台应用程序，它可以满足您的需求。

2) 使用 Windows“计划任务”功能在您需要运行该控制台应用程序时执行它

或者

你也可以看看这个例子：-

```
 using System;
   using System.Threading;

    public class TimerExample {

// The method that is executed when the timer expires. Displays
// a message to the console.
private static void TimerHandler(object state) {

    Console.WriteLine("{0} : {1}",
        DateTime.Now.ToString("HH:mm:ss.ffff"), state);
}

public static void Main() {

    // Create a new TimerCallback delegate instance that 
    // references the static TimerHandler method. TimerHandler 
    // will be called when the timer expires.
    TimerCallback handler = new TimerCallback(TimerHandler);

    // Create the state object that is passed to the TimerHandler
    // method when it is triggered. In this case a message to display.
    string state = "Timer expired.";

    Console.WriteLine("{0} : Creating Timer.",
        DateTime.Now.ToString("HH:mm:ss.ffff"));

    // Create a Timer that fires first after 2 seconds and then every
    // second.
    using (Timer timer = new Timer(handler, state, 2000, 1000)) {

        int period;

        // Read the new timer interval from the console until the
        // user enters 0 (zero). Invalid values use a default value
        // of 0, which will stop the example.
        do {

            try {
                period = Int32.Parse(Console.ReadLine());
            } catch {
                period = 0;
            }

            // Change the timer to fire using the new interval starting
            // immediately.
            if (period > 0) timer.Change(0, period);

        } while (period > 0);
    }

    // Wait to continue.
    Console.WriteLine("Main method complete. Press Enter.");
    Console.ReadLine();
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:21:39.263

您可以创建一个每秒滴答的线程。

在那里您可以检查是否要启动或停止计时器。

阅读以下内容：[线程](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)。

在您的线程中添加如下内容：

```
if (CurrentTime == "08:00")
   StartTimer();
else if  if (CurrentTime == "18:00")
   StopTimer();
Thread.Sleep(1000); // Makes the Thread Sleep 1 Second 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T08:23:12.313

由于您至少需要一个始终运行的计时器（以检测早上 8 点的时间），因此您可以只使用一个全天运行的计时器。

每当计时器滴答作响时，请检查时间。如果它不在 0800 和 1800 之间，则无需执行任何操作就返回并等待下一个滴答声。

您可以尝试将计时器间隔增加到使您达到例如 17:55 的值，然后再次减小它，但不会有任何可测量的性能差异，因此恕我直言，这是无益的工作。

# php - PHP Mysql Logic 循环遍历表并优化输出

> ID：13045300
> 
> 赞同：1
> 
> 时间：2012-10-24T08:18:12.307
> 
> 标签：php, mysql, loops, logic

不是 100% 确定标题，请随意编辑以更通用且对所有用户都有帮助

我有一个订单捕获“门户”，可以捕获订单。部分订单是数量或订单。

我现在需要处理订单，以便可以构建一个托盘以优化使用托盘。

例如，一个包装好的托盘尺寸可以是 1.62 立方米 (1x1.2x1.35)

然后我在订单上有以下物品

**产品编号、数量、总量**

1、10、0.5立方米
2、3、0.2
立方米
3、5、1.2立方米 4、1、0.15立方米
5、15、0.6立方米

我想处理这个，我假设使用 mysql 事务，以便获得以下输出：

托盘 1：产品 1、2、5。总体积=1.3 立方米
托盘 2：产品 3,4。总体积=1.35立方米

因此，为了澄清，脚本将采用第一个 0.5 立方的托盘，然后在列表中查找最接近 0.85 的下一个订单以实现 1.35 立方米的目标。在这种情况下，它将是 0.6。现在总共 1.1 个立方体。剩余空间现在为 0.25 个立方体。列表中最接近的项目现在是产品 2 @ 0.2 立方体。现在总共 1.3 个立方体，并且不存在 0.05 个或更少的产品，因此托盘是完整的。下一个可用产品现在是产品 3 @ 1.2 立方体。因此需要 0.15 或更小的产品。产品 4 是准确的体积，因此添加到托盘并关闭。

我希望这有助于澄清我的要求。

是否有一个 mysql 事务可以帮助解决这个问题，或者这需要用 php.ini 处理吗？

对此的任何帮助将不胜感激，只是不确定如何构建此逻辑。

一如既往地感谢您的时间，

![在此处输入图像描述](../Images/eecd016f660799906ff260eb7964c02d.png)

mysql表如下：

![在此处输入图像描述](../Images/625ccb1abb8f62b4932dc8bf7d817371.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:22:45.947

这是经典的[装箱问题](http://en.wikipedia.org/wiki/Bin_packing_problem)，它是 NP 难的（也就是说，我们还没有弄清楚这个问题是否可以在多项式时间内解决）。找到*最佳*包装无异于尝试每一种可能的组合。

如果您不关心找到最佳解决方案，那么您在问题中描述的贪婪启发式（称为[首次拟合递减](http://en.wikipedia.org/wiki/Bin_packing_problem#First-fit_algorithm)）是一个合理的近似值；还有其他启发式方法可以保证总体上更优化的结果，但它们变得相当复杂。

您可以按如下方式在 PHP 中实现 FFD（使用 PDO 进行数据库访问）：

```
define('PALLET_SIZE', 1 * 1.2 * 1.35);

$dbh = new PDO("mysql:dbname=$dbname", $username, $password);

$qry = $dbh->prepare('
  SELECT   code, qty, volume
  FROM     orders
  WHERE    order_id = :order
  ORDER BY volume DESC
');

$qry->execute(array(':order' => 123));

$pallets = array();
while ($order = $qry->fetch()) {
  if ($order['volume'] > PALLET_SIZE) die('item too big');

  for ($i = 1; $i <= $order['qty']; $i++) { // remove this loop if not needed
    $placed = false;
    foreach ($pallets as &$pallet) {
      if ($pallet['remaining'] >= $order['volume']) {
        $pallet['remaining'] -= $order['volume'];
        $pallet['items'][] = $order['code'];
        $placed = true;
        break;
      }
    }
    if (!$placed) $pallets[] = array(
      'remaining' => PALLET_SIZE - $order['volume'],
      'items' => array($order['code'])
    );
  }
}

print_r($pallets); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:42:50.310

> 有没有mysql事务

我假设你的意思是一个 mysql 函数。

不，mysql中没有任何东西可以帮助您解决这个问题。这是一个NP难题。解决它的最有效方法可能是[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)，但是您的数据中没有足够的信息来准确地实现这一点 - 包装取决于形状（即所有维度）与体积一样多。

如果您确实有尺寸，那么让人类设置包装而不是尝试在代码中进行包装仍然容易得多。

作为一个快速的解决方案，我会比较一组列表的 N 个副本，随机排序，遍历每个副本创建完整的托盘，然后选择具有最少托盘（或其他需要的特征）的列表。为 N 选择正确的值将取决于大小的分布，以及您希望花费多少时间处理数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:25:56.267

这类似于背包问题；这是一个只有尝试所有可能的组合才能完美解决的问题。随着可能组合数量的增加，这很快成为一个问题。在您的示例中，将有 33 个！组合 - 相当大的数量。所以那条路线可能不是我们想要走的……

没有“开箱即用”的解决方案，尽管这里有背包问题的示例[代码](http://rosettacode.org/wiki/Knapsack_problem/0-1#PHP)。这可能会有所帮助。

几年前我写了一个程序，它对类似的问题做了合理的工作；伪代码类似于：

```
for each order
  while (unallocated items on order)
    create new pallet 
    while not (pallet = full)
      allocate largest remaining item smaller than remaining capacity to pallet 
    loop
  loop
next order 
```

这个算法做得不错——船厂里的人喜欢它，因为最大的物品总是在装箱单的顶部（因此最终在堆栈的底部）。企业承认算法不能保证是最优的；在实践中，这只会对大订单产生影响，因为算法的轻微改进可能会为我们节省一个托盘；在大多数情况下，使算法更有效意味着货物中的最后一个托盘几乎是空的。

# c# - 要处理的 linq 函数：两个字段都相等或都为 null 或为空

> ID：13045303
> 
> 赞同：4
> 
> 时间：2012-10-24T08:18:24.790
> 
> 标签：c#, linq, entity-framework

您好我有一个 linq 查询，我将一个对象与存储在我的数据库中的所有其他实体进行比较。名字和姓氏是必填字段，因此我不必检查是否为空。但就街道而言，我必须进行这些检查。

如果两个字段都是空字符串或空字符串或者它们相同，我想匹配。下面的 linq 查询工作正常。

但我在徘徊是不是有任何办法让它更具可读性。例如，使用**Bool FieldsAreEqualOrBothNullOrEmpty(r.street, request.street)等自定义函数**

无法弄清楚如何做到这一点以及是否可能。

```
var same = 
   from r in db.Requests
   where r.firstName.ToLower() == request.firstName.ToLower()
      && r.lastName.ToLower() == request.lastName.ToLower()

      //Seems long to just compare two fields
      && ( string.IsNullOrEmpty(r.street) && string.IsNullOrEmpty(request.street) ) 
         || r.street.ToLower() == request.street.ToLower()

      select r;
return same; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:23:55.403

我会简化：

```
var same = 
   from r in db.Requests
   where r.firstName.ToLower() == request.firstName.ToLower()
      && r.lastName.ToLower() == request.lastName.ToLower()
   select r;

if(string.IsNullOrEmpty(request.street)) {
    same = same.Where(r => string.IsNullOrEmpty(r.street));
} else {
    string street = request.street.ToLower();
    same = same.Where(r => r.street.ToLower() == street);
} 
```

这样做的好处是它在每种情况下都使查询保持简单。如果您愿意，可以对前两个使用类似的逻辑，也*可以*将其移至基于表达式的实用程序方法。未经测试：

```
public static IQueryable<T> FieldsAreEqualOrBothNullOrEmpty<T>(
    this IQueryable<T> source,
    Expression<Func<T, string>> member, string value)
{
    Expression body;
    if (string.IsNullOrEmpty(value))
    {
        body = Expression.Call(
            typeof(string), "IsNullOrEmpty", null, member.Body);
    }
    else
    {
        body = Expression.Equal(
            Expression.Call(member.Body, "ToLower", null),
            Expression.Constant(value.ToLower(), typeof(string)));
    }

    return source.Where(Expression.Lambda<Func<T,bool>>(
        body, member.Parameters));
} 
```

然后：

```
var same = db.Requests
           .FieldsAreEqualOrBothNullOrEmpty(x => x.firstName, request.firstName)
           .FieldsAreEqualOrBothNullOrEmpty(x => x.lastName, request.lastName)
           .FieldsAreEqualOrBothNullOrEmpty(x => x.street, request.street); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:24:02.410

您可以使用适当的[StringComparison调用](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)[String.Equals](http://msdn.microsoft.com/en-us/library/t4411bks.aspx)但忽略大小写。

```
string.equals(r.street, request.street, StringComparison.OrdinalIgnoreCase); 
```

将字符串转换为小写进行比较是不好的做法，因为它不能在所有语言中可靠地工作，并且比使用忽略大小写的比较要慢。参见，例如，[这个答案](https://stackoverflow.com/a/2433217/15393)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:29:52.300

如何在字符串上创建扩展方法`IsEqualOrBothNullOrEmpty`-

```
public static class Extensions
{
   public static bool IsEqualOrBothNullOrEmpty(this string firstValue,
                           string secondValue)
   {
      return string.IsNullOrEmpty(firstValue) &&
               string.IsNullOrEmpty(secondValue)
                  || firstValue.ToLower() == secondValue.ToLower();
    }
} 
```

并像这样在您的查询中使用 -

```
var same = 
   from r in db.Requests
   where r.firstName.ToLower() == request.firstName.ToLower()
      && r.lastName.ToLower() == request.lastName.ToLower()
      && r.street.IsEqualOrBothNullOrEmpty(request.Street)

      select r;
return same; 
```

# php - 如何过滤数据表的mongodb结果？

> ID：13045306
> 
> 赞同：1
> 
> 时间：2012-10-24T08:18:34.973
> 
> 标签：php, mongodb, datatables

我使用这个脚本来获取我的 mongo 数据库的集合：http: [//datatables.net/development/server-side/php_mongodb](http://datatables.net/development/server-side/php_mongodb)

我的问题是：如何`foo == 'mystring'`仅检索行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:22:51.083

如下使用

```
$cursor = $collection->find(array("foo" => "mystring")); 
```

这里有更多细节：[http ://www.php.net/manual/en/mongo.queries.php](http://www.php.net/manual/en/mongo.queries.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:24:17.993

正如您将在文件中的源代码中注意到的（在第 29 行），mongo 集合已被命名`$m_collection`为：因此：

```
$m_collection->find(array('foo' => 'mystring')) 
```

应该管用。

如果这不是您正在寻找的，也许您可​​以更具体并准确地解释您要做什么。

### 更新

我注意到您可能想要编辑`$searchTermsAll`变量以在文档中按此字段进行搜索。从外观上看，这个 PHP 类的链接与通常用于 SQL 的链接相同，因此您应该需要做一些特殊的事情，并且可以只启用对数据表的过滤并将值添加`mystring`到`foo`字段中。

但是，要知道这是否是正确的答案，您需要澄清。

### 更新 2

一种更具破坏性的方式应该继续过滤，将第 99 行替换为：

```
$cursor = $m_collection->find(array_merge($searchTerms, 
    array('foo' => 'mystring')), $fields); 
```

这将始终确保将您的条件添加到搜索词中，但保留用户自己的搜索词。

# data-structures - 表的最佳数据结构

> ID：13045309
> 
> 赞同：3
> 
> 时间：2012-10-24T08:18:43.537
> 
> 标签：data-structures, sparse-matrix, tabular

我们的团队正在致力于实现移动平台的表格小部件（其中一个应用程序是移动办公，如 MS Excel）。

我们需要优化存储表数据的数据结构（使用简单的二维数组）。

您能否建议存储表数据的最佳数据结构。以下是对数据结构的一些要求：

*   表格的大小可以最大为 2^32 x 2^32；
*   大多数表格单元格是空的（即表格是稀疏的），因此最好不要为空单元格存储数据；
*   数据结构的接口应该支持插入/删除行和列；
*   数据结构应该允许向前和向后遍历非空单元格；
*   可以合并表格的单元格（即一个单元格可以跨越多于一行和/或一列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:14:58.570

在更多地考虑了行/列插入/删除的问题之后，我想出了一些看起来很有希望的东西。

首先，创建并维护 2 个已排序的数据结构（例如搜索树），其中包含所有水平和所有具有至少一个非空单元格的垂直索引。

对于此表：

```
 ABCDE
1
2*
3 %  #
4
5   $ 
```

你会有：

1.  A,B,D,E - 使用的水平索引
2.  2,3,5 - 使用的垂直索引

将这些 A、B、D、E、2、3、5 索引值存储在上述 2 个结构中的某种节点内，这样您就可以知道节点在内存中的地址将某些东西链接到它（同样，树节点非常适合）。

在每个单元格（非空）中，都有一对指向索引节点的链接描述其位置（我使用 & 来表示对节点的链接/引用）：

*   *: &2,&A
*   %: &3,&B
*   #: &3,&E
*   $: &5,&D

这足以定义一个表。

现在，我们如何处理行/列插入？我们将新的行/列索引插入到相应的（水平或垂直）索引数据结构中，并在其之后更新索引值（=向右或向下）。然后我们为这个新的行/列（如果有的话）添加新的单元格，并将它们链接到适当的索引节点。

例如，让我们在第 3 行和第 4 行之间插入一行，并在 4C 处添加一个带有 @ 的单元格（在新行中）：

```
 ABCDE
1
2*
3 %  #
4  @   <- new row 4
5      <- used to be row 4
6   $  <- used to be row 5 
```

您的索引结构现在是：

1.  A,B,C(new),D,E - 使用的水平索引
2.  2,3,4（新），6（以前是 5） - 使用的垂直索引

单元格现在链接到索引节点，如下所示：

*   *: &2,&A - 和之前一样
*   %: &3,&B - 和之前一样
*   #: &3,&E - 和以前一样
*   @: &4,&C - 链接到新索引节点 4 和 C 的新单元格
*   $: &6,&D - 曾经是 &5,&D

但是看看 $ 单元格。它仍然指向与以前相同的两个物理节点，只是垂直/行节点现在包含索引 6 而不是索引 5。

如果 $ 单元格下方有 100 个单元格节点，例如只占用 5 个非空行，则您只需要更新行/垂直索引数据结构中的 5 个索引，而不是 100 个。

您可以以类似的方式删除行和列。

现在，为了使这一切变得有用，您还需要能够通过其坐标定位每个单元格。

为此，您可以创建另一个排序的数据结构（同样，可能是搜索树），其中每个键是索引节点地址的组合，值是单元格数据的位置（或单元格数据本身）。

这样，如果您想到达单元格 3B，您可以在索引数据结构中找到 3 和 B 的节点，获取它们的地址 &3 和 &B，将它们组合成 &3*2 ^(32) +&B 并将其用作定位的键我刚刚定义的第三个数据结构中的 % 单元格。（注意：2 ^(32)实际上是 2^(位指针大小，)可能因系统而异。）

无论其他单元格发生什么情况，% 单元格链接中的地址 &3 和 &B 将保持不变，即使 % 单元格的索引从 3B 更改为其他值。

您可以轻松地在此基础上开发迭代。

合并应该也是可行的，但我没有关注它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:25:58.130

我建议像在 excel 中一样存储键值对。例如，想想您的 excel 文档有列 A - AA 等...和第 1 - 256000 行...等所以只需将具有日期的值存储在某种类型的键值对中。

例如：

```
someKeyValueStore = new KeyValueStore();

someData = new Cell(A1,"SomeValue");

someOtherData = new Cell(C2,"SomeOtherValue");

someKeyValueStore.AddKeyValuePair(someData);
someKeyValueStore.AddKeyValuePair(someOtherData); 
```

在这种情况下，您根本不必关心空单元格。您只能访问那些不为空的。当然，您可能希望跟踪集合中的键，以便您可以轻松查看是否具有特定键的值。但这本质上是处理它的最简单方法。

# sqlite - 在 Windows 应用商店应用程序中使用 dblinq 到 SQLite 会通过商店验证吗？

> ID：13045310
> 
> 赞同：4
> 
> 时间：2012-10-24T08:18:44.993
> 
> 标签：sqlite, windows-8, microsoft-metro, dblinq, sqlite-net

我一直在试图弄清楚如何在 Windows Store 应用程序中获得一个体面的 LINQ 来访问 ORM 数据库*。*我发现的只是 SQLite 和 sqlite-net NuGet 包。后者有点糟糕，因为我没有任何类似 .dbml 的结构来解析关系并提供导航属性以便于查询（那时不需要手动连接）。

我想知道：

1.  dblinq 与 SQLite 结合是否提供此功能？
2.  使用它会通过 Windows 应用商店验证吗？

谢谢 ！

更新：我在研究中使用的一些链接：

*   关于 SQLite 和 Windows 8 的著名 Tim Heuer 帖子：http: [//timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)
*   DBlinq：[http ://code.google.com/p/dblinq2007/](http://code.google.com/p/dblinq2007/)
*   sqlite-net：[http ://code.google.com/p/sqlite-net/](http://code.google.com/p/sqlite-net/)
*   说明 ADO.NET 的有趣讨论是不可能的：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e9cdd75d-03e4-4577-988e-4c02a52e3f50](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e9cdd75d-03e4-4577-988e-4c02a52e3f50)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:47:40.887

我不熟悉 dblinq，但通过查看项目中的 sqlite 测试，似乎该库提供了您正在寻找的内容，即不同表之间关系的导航属性。

由于 dblinq 是一个 .NET 库，因此使用它不应导致存储验证失败。但是还有另一个问题：您不能在 Windows Store 应用程序中使用这样的 .NET 库，只允许使用 Windows Store 类库和可移植类库。由于该库的源代码可用，您可以尝试将其编译为 Windows Store 类库，但恐怕会缺少一些类，dblinq 取决于哪个可能难以移植。

# jam - Jam Object 规则和目录

> ID：13045315
> 
> 赞同：2
> 
> 时间：2012-10-24T08:19:26.080
> 
> 标签：jam

我怀疑手册实际上是在说我做错了什么，但我真的看不到解决方案；当 .c 文件和要构建的 .o 文件不在同一个目录中时，就会出现问题，并且 .c 文件对必须动态生成的 .h 文件具有自动依赖关系。该问题可能可以通过手动设置 .c 和 .h 文件之间的依赖关系来解决，但我想避免这种情况。

我有以下目录结构：

```
weird/
    Jamfile
    b.c
    src/
        a.c
        c.c 
```

src/ac 文件是这样的：

```
#include "src/a.h"

int main(int argc, char *argv[])
{
    return 0;
} 
```

bc 文件是这样的：

```
#include "src/b.h"

int main(int argc, char *argv[])
{
    return 0;
} 
```

src/cc 文件是这样的：

```
#include "c.h"

int main(int argc, char *argv[])
{
    return 0;
} 
```

Jamfile 是：

```
rule CreateHeader
{
    Clean clean : $(1) ;
}

actions CreateHeader
{
    echo "int x = 10;" > $(1)
}

Object a.o : src/a.c ;
Object b.o : b.c ;
Object c.o : src/c.c ;

CreateHeader src/a.h ;
CreateHeader src/b.h ;
CreateHeader src/c.h ; 
```

以下命令正确创建 bo 和 src/bh：

```
jam b.o 
```

下面的命令创建了src/ah，但是后来gcc创建ao失败了；原因很明显，ac 中的#include 提到了 src/ah，而实际上应该只是指 ah：

```
jam a.o 
```

以下命令完全失败，甚至没有创建 ch；原因可能是 Jam 在分析 cc 时会生成对 ch 而不是 src/ch 的依赖，并且在 Jamfile 中没有生成 ch 的规则：

```
jam c.o 
```

如果我在请求 co 之前明确要求生成 src/ch，则此命令可以正确编译：

```
jam src/c.h
jam c.o 
```

在我看来，果酱 src/ch 不应该是必要的。这里有什么问题？查看[Jam 手册](http://public.perforce.com/public/jam/src/Jam.html)以获取更多信息，特别是在标题文件扫描部分下。

**在我接受答案后添加**

我一直在对已接受答案的作者建议的结构进行一些试验，我将在此处发布结果。在此设置中，您可以键入：

```
jam app 
```

并且应用程序将链接到 bin/app 下。不幸的是，我在设置 LOCATE_TARGET 时必须使用 UNIX 路径，我的理解是这并不是一个好的做法。

目录结构：

```
project/
    Jamfile
    src/
        main.c
    gen/
    bin/
        obj/ 
```

文件 Jamfile：

```
SubDir TOP ;

rule CreateHeader
{
    MakeLocate $(1) : $(LOCATE_SOURCE) ;
    Clean clean : $(1) ;
}

actions CreateHeader
{
    BUILD_DATE=`date`
    echo "char build_date[] = \"$BUILD_DATE\";" > $(1)
}

SEARCH_SOURCE = src ;
LOCATE_TARGET = bin/obj ;
SubDirHdrs gen ;
Object main.o : main.c ;

LOCATE_TARGET = bin ;
MainFromObjects app : main.o ;

LOCATE_SOURCE = gen ;
CreateHeader info.h ; 
```

文件 src/main.c

```
src/main.c
#include <stdio.h>
#include "info.h"

int main(int argc, char *argv[])
{
    printf("Program built with Jam on %s.\n", build_date);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:28:02.347

更改所有 #include 指令以省略路径（即 '#include "ah' 等）并将 Jamfile 更改为以下内容将解决您的问题：

```
SubDir TOP ;

SEARCH_SOURCE += [ FDirName $(SUBDIR) src ] ;
LOCATE_SOURCE = [ FDirName $(SUBDIR) src ] ;

rule CreateHeader
{
    MakeLocate $(1) : $(LOCATE_SOURCE) ;
    Clean clean : $(1) ;
}

actions CreateHeader
{
    echo "int x = 10;" > $(1)
}

Object a.o : a.c ;
Object b.o : b.c ;
Object c.o : c.c ;

CreateHeader a.h ;
CreateHeader b.h ;
CreateHeader c.h ; 
```

以下是详细信息：

*   SubDir 应始终在 Jamfile 中调用。它设置了几个有用的（在某些情况下是必要的）变量，包括此处使用的 SUBDIR、SEARCH_SOURCE 和 LOCATE_SOURCE。
*   将“src”子目录添加到 SEARCH_SOURCE 允许您在对象规则调用中省略源文件的“src/”部分。SEARCH_SOURCE 也会自动添加到包含目录中，这就是#include 目录可以缩短的原因。
*   LOCATE_SOURCE 是放置生成的源文件（例如生成的 yacc 源和头文件）的目录。为保持一致性，CreateHeader 使用此变量。请注意，这允许（并要求）您在 CreateHeader 调用中省略“src/”部分。

因此，这些更改的主要目的是从 Jamfile 中使用的目标名称中省略“src/”部分。通常建议在 Jamfiles 中省略目录组件（并使用 grist 来消除歧义）。重要的是要注意 Jam 的工作方式 名称为“src/ah”和“ah”的目标是不同的目标，即使前者被认为位于“.”中。后者在“./src”中（例如，通过目标搜索或定位变量）。使用您在以下包含依赖项中提供 Jam 标头扫描结果的文件（这些是目标名称）：

```
src/a.c : src/a.h
b.c     : src/b.h
src/c.c : c.h 
```

这使得干扰“co”失败的原因很明显：目标“ch”是未知的，因为您声明要生成的标头的目标名称是“src/ch”。因此 jam 忽略了 include 依赖。“jam ao”失败的原因是您怀疑的原因。

我建议的更改需要调整源文件中的#include 指令，这在您的实际用例中可能是不可取的/不可能的。这种情况还是可以挽救的。例如，您可以按照建议更改 Jamfile，但扩展 CreateHeader 规则：

```
rule CreateHeader
{
    MakeLocate $(1) : $(LOCATE_SOURCE) ;
    Clean clean : $(1) ;
    Depends src/$(1) : $(1) ;
    NotFile src/$(1) ;
} 
```

这显然是一个黑客攻击。它将目标“src/ah”和朋友定义为伪目标，每个都取决于相应的实际目标（“ah”等）。这样，Jam 的标头扫描将产生一个已知目标，无论它是否具有“src/”前缀。

不过，不太棘手的解决方案是显式声明包含关系：

```
Includes a.c : a.h ;
Includes b.c : b.h ; 
```

# android - 在 AVD 或真实设备上安装后 Eclipse 不启动应用程序

> ID：13045319
> 
> 赞同：2
> 
> 时间：2012-10-24T08:19:43.377
> 
> 标签：android, eclipse

我最近开始面临这个问题，当我通过 Eclipse 在 AVD 或 Real Android Device 上运行我的应用程序时，它显示应用程序已安装但未启动。当我去检查手机/AVD 时，它不会在应用程序区域中显示该应用程序，但是当我转到此处的“管理应用程序”时，我可以看到我的应用程序已安装。它的发生有什么原因吗？

非常感谢所有帮助。

提前致谢。

阿里

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.game.bond.of.jungle"
android:versionCode="1"
android:versionName="1.0" >

<application 
    android:icon="@drawable/ic_launcher" 
    android:label="@string/app_name" 
    android:theme="@style/AppTheme" 
    >

    <activity 
        android:name=".MainActivity" 
        android:label="@string/title_activity_main"
        android:theme="@android:style/Theme.Black.NoTitleBar" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN"/>
            <category android:name="androidintent.category.LAUNCHER"/>

        </intent-filter>

    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:01:16.340

可能您的主要活动缺少正确的意图过滤器。确保它是这样声明的：

```
<activity android:name="com.your.package.YourLauncherActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
     </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:30:54.390

你确定你设置对了`Run Configuration`吗？

1.  右键单击您的项目
2.  选择`Run As`
3.  选择`Run Configuration`
4.  查看`Launch Default Activity`
5.  击中`Apply`和`Ok`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T14:38:02.833

我遇到了同样的问题，但由于某种原因，**启动默认活动**不起作用。**在项目中添加搜索意图过滤器后，我以为我在AndroidManifest.xml**中搞砸了，但这不是问题。它也不会让我调试，尽管从设备启动应用程序时会正常启动。

这对我有用：

1.  右键单击项目
2.  选择**运行方式**
3.  选择**运行配置...**
4.  从左侧列表中选择您的应用程序
5.  手动选择**Launch: MainActivity**（或您命名的任何名称）作为 Launch Action 而不是默认值
6.  选择**应用**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-05T19:22:41.270

在这种情况下要检查的第一件事是，查看 AndroidManifest.xml 文件。大多数时候，

*   如果您从 SVN、Git 或现有源代码导入了一个项目，您的 AndroidManifest.xml 文件可能已替换为一个新文件，该文件未指定存在哪些 Activit(y)ies.java 文件以及要显示的文件启动器活动。

# java - Java：如何读取目录文件夹，计算和显示文件数量并复制到另一个文件夹？

> ID：13045326
> 
> 赞同：0
> 
> 时间：2012-10-24T08:20:43.727
> 
> 标签：java, copy, directory

我必须读取一个文件夹，计算文件夹中的文件数（可以是任何类型），显示文件数，然后将所有文件复制到另一个文件夹（指定）。

我将如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:24:35.093

> 我必须读取一个文件夹，计算文件夹中的文件数（可以是任何类型）显示文件数

您可以在 javadocs 中找到所有这些功能[`java.io.File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

> 然后将所有文件复制到另一个文件夹（指定）

这有点棘手。阅读：[Java 教程 > 文件的读取、写入和创建](http://docs.oracle.com/javase/tutorial/essential/io/file.html) （请注意，其中描述的机制仅在 Java 7 或更高版本中可用。如果 Java 7 不是一个选项，请参阅之前的许多类似问题之一，例如：[Fastest写入文件的方式？](https://stackoverflow.com/q/4576222/342852)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:30:28.730

你有所有的示例代码：

[http://www.exampledepot.com](http://www.exampledepot.com)

[http://www.exampledepot.com/egs/java.io/GetFiles.html](http://www.exampledepot.com/egs/java.io/GetFiles.html)

```
File dir = new File("directoryName");

String[] children = dir.list();
if (children == null) {
    // Either dir does not exist or is not a directory
} else {
    for (int i=0; i<children.length; i++) {
        // Get filename of file or directory
        String filename = children[i];
    }
}

// It is also possible to filter the list of returned files.
// This example does not return any files that start with `.'.
FilenameFilter filter = new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return !name.startsWith(".");
    }
};
children = dir.list(filter);

// The list of files can also be retrieved as File objects
File[] files = dir.listFiles();

// This filter only returns directories
FileFilter fileFilter = new FileFilter() {
    public boolean accept(File file) {
        return file.isDirectory();
    }
};
files = dir.listFiles(fileFilter); 
```

复制[http://www.exampledepot.com/egs/java.io/CopyDir.html](http://www.exampledepot.com/egs/java.io/CopyDir.html)：

```
// Copies all files under srcDir to dstDir.
// If dstDir does not exist, it will be created.
public void copyDirectory(File srcDir, File dstDir) throws IOException {
    if (srcDir.isDirectory()) {
        if (!dstDir.exists()) {
            dstDir.mkdir();
        }

        String[] children = srcDir.list();
        for (int i=0; i<children.length; i++) {
            copyDirectory(new File(srcDir, children[i]),
                                 new File(dstDir, children[i]));
        }
    } else {
        // This method is implemented in Copying a File
        copyFile(srcDir, dstDir);
    }
} 
```

然而，这些东西很容易被骗:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T11:57:20.227

我知道这为时已晚，但下面的代码对我有用。它基本上遍历目录中的每个文件，如果找到的文件是一个目录，那么它会进行递归调用。**它只提供目录中的文件计数**。

```
public static int noOfFilesInDirectory(File directory) {
    int noOfFiles = 0;
    for (File file : directory.listFiles()) {
        if (file.isFile()) {
            noOfFiles++;
        }
        if (file.isDirectory()) {
            noOfFiles += noOfFilesInDirectory(file);
        }
    }
    return noOfFiles;
} 
```

# jquery - 日期选择器未在动态输入中显示

> ID：13045336
> 
> 赞同：0
> 
> 时间：2012-10-24T08:21:37.860
> 
> 标签：jquery, jquery-ui-datepicker

我有一个以 name="date" 作为标识符的输入。这是在一个while循环内生成动态数据。正在发生的事情是，当循环运行时，日期选择器仅适用于第一个输入。它会在每个输入具有焦点时显示，但是当我单击日期时，它总是将其插入到第一个输入字段中。我该如何纠正这个？谢谢

我已将代码放在以下小提琴链接中。

jsfiddle.net/mNFrb/

更新：我在上面的链接中放置了代码。我不能做超链接，因为它告诉我在我编辑时链接不相关，不管这意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:26:55.177

您是否将名称日期放在每个输入上？您不应有多个具有相同名称的输入。为每个输入使用唯一的名称，但您可以为所有输入使用相同的类，并设置 jquery datepicker 以使它们基于类的数​​据选择器。

为了提供更详细的信息，我需要看到你现在的代码，但这应该会给你一个想法。

# c# - SqlBulkCopyColumnMapping 出错

> ID：13045338
> 
> 赞同：0
> 
> 时间：2012-10-24T08:21:39.530
> 
> 标签：c#, asp.net, sql-server

我能够将 excel 工作表数据导入 sql server 表，但我无法实现列映射。请帮忙。

```
protected void Button1_Click(object sender, EventArgs e)
{
    string strFileType = System.IO.Path.GetExtension(FileUpload1.FileName).ToString().ToLower();
    string strFileName = FileUpload1.PostedFile.FileName.ToString();

    FileUpload1.SaveAs(Server.MapPath("~/Import/" + strFileName + strFileType));
    string strNewPath = Server.MapPath("~/Import/" + strFileName + strFileType);

        string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source="+strNewPath +"; Extended Properties=Excel 8.0;");

    //string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=C:\\myFolder\\Book1.xls;" + "Extended Properties=Excel 8.0;"); 

        // Create Connection to Excel Workbook
        using (OleDbConnection connection = new OleDbConnection(excelConnectionString))
        {
            OleDbCommand command = new OleDbCommand("Select ID,Data FROM [Sheet1$]", connection);

            connection.Open();

            // Create DbDataReader to Data Worksheet
            using (DbDataReader dr = command.ExecuteReader())
            {
                // SQL Server Connection String
                string sqlConnectionString = "Data Source=DITSEC3;Initial Catalog=test;Integrated Security=True";

                con.Open();
                DataTable dt1 = new DataTable();
                string s = "select count(*) from ExcelTable"; 
                string r = ""; 
                SqlCommand cmd1 = new SqlCommand(s, con);
                try 
                { 
                    SqlDataAdapter da1 = new SqlDataAdapter(cmd1); 
                    da1.Fill(dt1);
                }
                catch { } 
                int RecordCount; 
                RecordCount = Convert.ToInt32(cmd1.ExecuteScalar());
                r = RecordCount.ToString(); 
                Label1.Text = r;
                con.Close();
                int prv = Convert.ToInt32(r);

                // Bulk Copy to SQL Server
                using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
                {

                    bulkCopy.DestinationTableName = "ExcelTable";
                    bulkCopy.WriteToServer(dr);

                    con.Open();
                    SqlBulkCopyColumnMapping mapping1 = new SqlBulkCopyColumnMapping("id", "ida");
                    SqlBulkCopyColumnMapping mapping2 = new SqlBulkCopyColumnMapping("data", "dataa");
                    con.Close();

                }
                con.Open();

                DataTable dt = new DataTable(); 
                s = "select count(*) from ExcelTable";  r = ""; 
                SqlCommand cmd = new SqlCommand(s, con); 
                try { SqlDataAdapter da = new SqlDataAdapter(cmd);
                    da.Fill(dt); 
                }
                catch { } 
                RecordCount = Convert.ToInt32(cmd.ExecuteScalar()); 
                r = RecordCount.ToString(); Label1.Text = r;
                con.Close();
                int ltr = Convert.ToInt32(r);
                if (prv == ltr)
                {
                    Label1.Text = "No records Added";
                }
                else
                {
                    Label1.Text = "Records Added Successfully !";
                }

            }
        } 
```

错误：没有为一个或多个必需参数指定值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:59:16.800

您创建但未将映射添加到`SqlBulkCopy`.

添加以下代码：

```
bulkCopy.ColumnMappings.Add(mapping1);
bulkCopy.ColumnMappings.Add(mapping2); 
```

# c# - C#中类成员的双重检查锁定

> ID：13045341
> 
> 赞同：3
> 
> 时间：2012-10-24T08:22:01.560
> 
> 标签：c#, multithreading

使用非静态字段的双重检查锁定是否正确？

```
class Foo
{ 
   private SomeType member;
   private readonly object memeberSync = new object();
   public SomeType Memeber
   { 
      get
      {
         if(member == null)
         { 
            lock(memeberSync)
            {
               if(member == null)
               {
                  member = new SomeType();
               } 
            }
         }
         return object;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T08:34:17.467

> 使用非静态字段的双重检查锁定是否正确？

是的，您的代码使用双重检查`lock`来获得*线程安全*和*延迟加载*没有任何问题。如果您从 .NET 4 开始使用，建议使用[Lazy](http://msdn.microsoft.com/en-us/library/dd642331.aspx)类，这种方法与*线程安全*和*延迟加载*的结果相同，但它也使您的代码更简单、更具可读性。

```
class Foo
{
    private readonly Lazy<SomeType> _member = 
                                   new Lazy<SomeType>(() => new SomeType());

    public SomeType Member
    {
        get { return _member.Value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:32:57.620

外部检查可以提高性能，因为一旦`member`初始化，您不必每次访问属性时都获取锁。如果您经常从多个线程访问该属性，则锁的性能影响可能非常明显。

内部检查对于防止竞争条件是必要的：没有它，两个线程可能会处理外部`if`语句，然后两个线程都会初始化`member`。

严格来说，外部`if`不是*必需*的，但它被认为是一种很好的做法，并且（在重线程应用程序中）性能优势会很明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:30:31.450

这是一些人推荐的做法，因为在释放另一个锁之前，您的锁可能不会应用。

在这种情况下，两个线程同时访问 getter，第一个获得锁，第二个等待。

一旦第一个线程完成，第二个线程现在就有了锁。

在可能的情况下，您应该检查变量是否在当前线程获得锁之前已由另一个线程创建。

# objective-c - 无法设置在目标 c 中倒计时的循环

> ID：13045346
> 
> 赞同：0
> 
> 时间：2012-10-24T08:22:22.387
> 
> 标签：objective-c

我注意到在目标 c 中使用 for 循环时，我无法将循环设置为如下所示：

```
for(int i=16; i<=1; i-- )
    {
        NSLog(@"%d",i);
    } 
```

他不会打印`i`。无论如何我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:23:59.243

您的 for 语句不正确，请检查（for 的第二部分）`i<=1`。这定义了 while`i`小于或等于 1，这应该是`i>=1`：while`i`大于或等于 1。

```
for(int i=16; i>=1; i-- )
{
    NSLog(@"%d",i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:24:08.993

你混淆`<=`了`>=`

```
for(int i = 16; i >= 1; i-- )
{
    NSLog(@"%d",i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:24:37.480

```
for(int i=16; i>=1; i-- )
    {
        NSLog(@"%d",i);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:25:16.460

将代码更改为以下代码：

```
for(int i=16; i>=1; i-- )
{
    NSLog(@"%d",i);
} 
```

# php - 当mysql WHERE 子句为空时，返回所有行

> ID：13045351
> 
> 赞同：5
> 
> 时间：2012-10-24T08:22:59.703
> 
> 标签：php, mysql, where

```
$randomvariable=$_GET['randomvariable'];
$search="SELECT * from objects
          WHERE transactiontype='$randomvariable'
          order by id DESC"; 
```

现在如果`$randomvariable`为空（什么都没有），我希望它返回所有行。目前，如果它为空，则不会返回任何内容，因为它基本上不会从所有行中搜索任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:26:04.280

```
$randomvariable = ESACPE_MYSQL_STRING($_GET['randomvariable']);
$search =
    "SELECT * FROM objects " .
    (empty($randomvariable) ? "" : "WHERE transactiontype='$randomvariable' ") .
    "ORDER BY id DESC"; 
```

`ESCAPE_MYSQL_STRING`对于您正在使用的任何 MySQL 驱动程序，用于转义字符串的相关函数在哪里。

另一种更模块化的方式：

```
$search = array(
    "select" => "SELECT * FROM objects",
    "where" => "WHERE transactiontype='$randomvariable'",
    "order" => "ORDER BY id DESC"
);

if (empty($randomvariable)) {
    unset($search["where"]);
}

$search = implode(' ', $search); 
```

这样做的好处是您可以轻松地添加、删除或更改任何情况下的查询，轻松访问查询的任何部分。

* * *

您也可以[`CASE()`](http://dev.mysql.com/doc/refman/5.0/en/case.html)在 SQL 中执行此操作，但它有点麻烦，您也不应该期望良好的性能：

```
SELECT * FROM objects
WHERE transactiontype LIKE
    CASE WHEN '$randomvariable' = '' THEN
        '%'
    ELSE
        '$randomvariable'
    END CASE
ORDER BY id DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:25:20.583

另一种方法：

```
if ($_GET['randomvariable'] != "") {
   $where = "transactiontype = " . $randomvariable;
} else {
   $where = "1";
}

$search = "SELECT * from objects WHERE " . $where . " ORDER BY id DESC"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:25:27.757

尝试如下

```
$randomvariable=mysql_real_escape_string($_GET['randomvariable']);

$where = '';
if($randomvariable){
 $where .= "WHERE transactiontype='{$randomvariable}'";
}

$search="SELECT * from objects ".$where." order by id DESC"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-25T19:02:36.797

这里有一些很好的答案。我要添加一个简单的解决方案。

当我不需要 WHERE 子句时，有时我会遇到这个问题，因为我构建 WHERE 子句的条件都没有得到满足。我喜欢使用的一个简单技巧是这样的：

```
$sql_statement = "SELECT * FROM ".$table_names." WHERE 1 = 1 ";
if ($array) {
   foreach ($array as $key => $value){  
       $sql_statement .= " AND ".$key." = '".$value."' ";
   }
} 
```

这样，您不需要任何棘手的逻辑或字符串操作，因为在 WHERE 子句中 1 始终等于 1，并且您可以保持循环字符串连接的格式相同。您显然可以扩展这个概念来做更多事情，但就这个问题而言，这个伪代码只是实现目标的一种简单方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-03T22:41:33.513

您可以使用 IN 运算符来指示 WHERE 子句的许多值，并将 transactiontype 的所有可能值包括为默认参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T08:25:31.610

将其拆分为 2 个查询：

```
$randomvariable = $_GET['randomvariable'];
if($randomvariable)
  $search="SELECT * from objects WHERE transactiontype='$randomvariable' order by id DESC";
else
  $search="SELECT * from objects order by id DESC"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T08:26:05.357

如果你真的需要用 SQL 而不是你的语言，你可以这样做：

```
$search="SELECT * from objects WHERE ("" = '$randomvariable' or transactiontype='$randomvariable') order by id DESC"; 
```

但是，这不会很好地执行，并且应该首选您的语言中的 IF/ELSE。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-24T08:27:03.200

添加一个简单的 if 语句检查 $randomvariable 是否为空。如果是，则更改查询以返回所有行。

# android - 如果值为 null 等待 android 中的运行函数

> ID：13045353
> 
> 赞同：1
> 
> 时间：2012-10-24T08:23:06.507
> 
> 标签：android, null

我运行一个类 LokasyonBurucu()

```
LokasyonBulucu lokasyonBulucu= new LokasyonBulucu();
lokasyonBulucu.LokasyonBul(context); 
```

我从这个类 lat 和 lon 中取两个变量

```
lat=lokasyonBulucu.location.getLatitude();
lon= lokasyonBulucu.location.getLongitude(); 
```

但我想等待班级找到坐标......因为这需要大量时间。如果它找到纬度和经度我想运行这个功能

```
new arkaPlanIsleri(kategori_id, lat , lon).execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:55:41.220

使用`for`循环检查每秒等待的最大秒数。`lat`如果和`lon`已经找到，请每秒检查一次。如果是这样，请执行该方法并跳出等待循环：

```
for(int i = 0; i < 10; i++) { //maximum 10 seconds to wait
    if(lat != null && lon != null) { //check if the lat and lon are already found
        new arkaPlanIsleri(kategori_id, lat , lon).execute();
        break; //stop the waiting loop
    }
    SystemClock.sleep(1000); //wait one second
} 
```

# python - 如何在 django 中从 self 中获取模型名称

> ID：13045356
> 
> 赞同：4
> 
> 时间：2012-10-24T08:23:20.070
> 
> 标签：python, django

在我的 views.py 中，我想从中获取模型名称`self`

我试过这个`self.__class__.__name__`

但它给了我视图的类名而不是模型

编辑：

```
class ObjectCreate(CreateView):

    def get_template_names(self):
        m = self.__class__.__name__ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T08:36:18.460

您可以这样做，在模型视图中，self 不是对象模型实例。

你应该写：

```
self.model.__name__ 
```

***[由于ihhcarus](https://stackoverflow.com/users/1245235/ihhcarus)**评论**，6 年后***编辑**：**

 **> 对于 Django 1.11，您可以使用`self.__class__.__name__`来获取模型类名称。**

# backbone.js - 骨干网：如何在做一个列表 GET 时发送约束

> ID：13045358
> 
> 赞同：0
> 
> 时间：2012-10-24T08:23:35.023
> 
> 标签：backbone.js

我正在尝试在前端使用backbone.js 和backbone-relational.js 构建应用程序，并在后端使用由Pyramid/Cornice/SQLAlchmeny 运行的RESTful api。

在这个阶段，我有两个模型，Client（基本上是企业）和 Asset（企业拥有的资产）......最终会有许多其他模型，用于用户、站点等。两种型号：

```
Client:
  id
  name

Asset:
  id
  make
  model
  purchase_cost
  client_id 
```

现在，我的backbone.js 代码在从服务器从这些模型中获取数据时工作正常；我有两个列表视图，一个显示所有客户端的列表，另一个显示所有资产的列表。

我现在的问题是，当我在客户端列表中单击其中一个客户端时，我希望它只显示属于该特定客户端的资产的列表。服务器端部分没有问题，它只是一个过滤器（），我的问题是，我如何让backbone.js在请求资产列表时发送这样的约束？

（虽然我在下面的代码中使用了 RelationalModel，但我仍在学习它，还没有真正弄清楚如何使用它）

```
window.Asset = Backbone.RelationalModel.extend({
    urlRoot:"/api/assets",
    defaults:{
        "id":null,
        "make":null,
        "model":null,
        "purchase_cost":null,
    },
    relations: [{
        type: Backbone.HasOne,
        type: Backbone.HasOne,
        key: 'client_id',
        relatedModel: Client
    }]
});

window.AssetCollection = Backbone.Collection.extend({
    model: Asset,
    url: "/api/assets"
});

window.Client = Backbone.RelationalModel.extend({
    urlRoot:"/api/clients",
    defaults:{
        "id":null,
        "name":null
    }
});

window.ClientCollection = Backbone.Collection.extend({
    model: Client,
    url: "/api/clients"
}); 
```

我认为我不需要在这里显示任何视图。

在我的路由器中，我目前有一个 listClients 函数和一个 listAssets（见下文）函数，我想我需要添加一个 listAssetsforClient(clientid) 函数，但我不确定我的意思是用clientid 以便backbone.js 在获取资产列表时将其作为约束发送到服务器。我认为需要做的一切都在 AssetCollection 模型中，但我在 Collection API 中看不到任何看起来合适的东西。有些方法可以对已经获取的列表进行过滤，但是当我只需要其中的一个子集并且可以让服务器获取时，获取整个资产列表（最终可能有数千个）似乎效率低下而是过滤。

```
listAssets: function() {
    $('#header').html(new AssetHeaderView().render().el);
    this.assetList = new AssetCollection();
    var self = this;
    this.assetList.fetch({
        success:function () {
            self.assetListView = new AssetListView({model:self.assetList});
            $('#sidebar').html(self.assetListView.render().el);
            if (self.requestedId) self.assetDetails(self.requestedId);
        }
    });
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:41:42.330

好的，我已经想通了。fetch() 方法有一个可选的“数据”参数，可以传递约束。所以，我的新功能是：

```
listAssetsforClient: function(id) {
    $('#header').html(new AssetHeaderView().render().el);
    this.assetList = new AssetCollection();
    var self = this;
    this.assetList.fetch({
        data: { clientid: id },
        success:function () {
            self.assetListView = new AssetListView({model:self.assetList});
            $('#sidebar').html(self.assetListView.render().el);
            if (self.requestedId) self.assetDetails(self.requestedId);
        }
    });
}, 
```

# linux - 使用 inotify 处理预先存在的文件

> ID：13045359
> 
> 赞同：2
> 
> 时间：2012-10-24T08:23:37.810
> 
> 标签：linux, events, loops, inotify

我正在监视目录中新文件的创建/移动。我目前正在使用一个简单的**ls 循环**，我想转到**inotify**。

我有一个主要问题：如何使用预先存在的文件处理初始化（以防崩溃、重启、停止……）？

最初，我只想监视 IN_CREATE 和 IN_MOVED_TO 但这不会处理预先存在的文件。

它可以通过inotify本地处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:47:11.310

我建议您使用[iwatch](http://iwatch.sourceforge.net/index.html)哪个 perl 程序在内部使用 inotify。（可以将其作为守护程序运行）当您将其设置为使用文件监视文件夹时，您可以简单地`touch *`在监视文件夹中运行。这将更新文件的时间戳，并触发 inotify 事件。

如果您需要对创建或移动的文件执行某些操作，请注意 IN_CREATE 事件，因为该事件将在文件创建后立即触发。在这种情况下，您可以使用事件 CLOSE_WRITE，该事件将在文件关闭后触发。

希望这可以帮助！

# php - 关联数组的数组，将新元素添加到关联数组

> ID：13045360
> 
> 赞同：4
> 
> 时间：2012-10-24T08:23:45.113
> 
> 标签：php, arrays, associative-array

如果我有这样的数组：

```
array(2) {
  [0]=>
  array(2) {
    ["id"]=>
    string(2) "34"
    ["total"]=>
    string(6) "122337"
  },
[1]=>
  array(2) {
    ["id"]=>
    string(2) "43"
    ["total"]=>
    string(6) "232337"
  }
} 
```

我想为每个子数组添加一个新的键值，例如，它会像这样结束：

```
array(2) {
      [0]=>
      array(2) {
        ["id"]=>
        string(2) "34"
        ["total"]=>
        string(6) "122337"
        ["newkey"]=>
        string(6) "hihihi"
      },
    [1]=>
      array(2) {
        ["id"]=>
        string(2) "43"
        ["total"]=>
        string(6) "232337"
       ["newkey"]=>
        string(6) "hihihi"
      }
    } 
```

我该怎么做？

我试过这样的foreach：

```
foreach($exterior_array as $inside_array) {
 $inside_array['newkey'] = "hihihi";
} 
```

但是一旦我进入 foreach，这些值就不会被保存。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T08:32:04.313

```
foreach($exterior_array as $inside_array) {
    $inside_array['newkey'] = "hihihi";
} 
```

> 但是一旦我进入 foreach，这些值就不会被保存。

那是因为您正在通过`$inside_array`. `$inside_array`您可以通过创建原始值的别名来访问要更改的“原始”值；使用参考：

```
foreach($exterior_array as &$inside_array) {
                           ^- set the reference
    $inside_array['newkey'] = "hihihi";
}
unset($inside_array);
^^^^^^^^^^^^^^^^^^^^^- remove the reference 
```

与[http://php.net/foreach比较](http://php.net/foreach)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:26:36.163

```
foreach($exterior_array as $k=>$inside_array) {
 $exterior_array[$k]['newkey'] = "hihihi";
} 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:26:41.940

因为您将它用作临时数组，所以这样做：

```
foreach($exterior_array as $key => $inside_array)
{
    $exterior_array[$key]['newkey'] = "hihihi";
} 
```

或者您可以使用**[jpo](https://stackoverflow.com/users/1244910/jpo)**建议的引用来执行此操作，这将创建一个新数组，但将其链接到原始数组（注意**&**）：

```
foreach($exterior_array as &$inside_array)
{ 
    $inside_array['newkey'] = "hihihi";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:27:28.457

```
foreach($exterior_array as $key => $inside_array) {
        $inside_array[$key]['newkey'] = "hihihi";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T08:27:58.807

使用引用的另一种解决方案：

```
foreach($exterior_array as &$inside_array) { 
    $inside_array['newkey'] = "hihihi";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T08:34:43.260

试试这个。经过测试和验证。

```
<?php
    $parentArray = array(
        array("id"=>1),
        array("id"=>2),
        array("id"=>3),
    );

    foreach($parentArray as $key=>$childArray)
    {
        $parentArray[$key]['newkey'] = "hello";
    }

    //output

    Array
    (
        [0] => Array
            (
                [id] => 1
                [newkey] => hello
            )
        [1] => Array
            (
                [id] => 2
                [newkey] => hello
            )
        [2] => Array
            (
                [id] => 3
                [newkey] => hello
            )
    )
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T09:03:55.730

它不适合这个主题，但我在自己的项目中经常使用它。

[http://pastebin.com/TyWzLWuK](http://pastebin.com/TyWzLWuK)

它的性能不是很好，但很容易处理。

例子：

```
Fw_Recursive_Array_Helper::set($array, '0.someKey.someSubKey', 'value');
if(Fw_Recursive_Array_Helper::has($array, '0.someKey.someSubKey')) {
   echo Fw_Recursive_Array_Helper::get($array, '0.someKey.someSubKey'); 
}
echo Fw_Recursive_Array_Helper::get($array, '1.someKey.someSubKey', 'If the key does not exist, use this'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-24T09:15:49.397

```
class helper
{

public function arrayInsert($key=NULL,$value=NULL,& $array=array())
{

if(!empty($key)&&!empty($value)&&is_array($array))
{
 $array[$key]=$value;
}
}
}

$obj=new helper();

$array=array('1'=>1,'a'=>'a');
$obj->arrayInsert('b','b',$array);
print_r($array) 
```

o/p=>数组 ( [1] => 1 [a] => a [b] => b )

# javascript - javascript 正则表达式，拆分用户的全名

> ID：13045366
> 
> 赞同：8
> 
> 时间：2012-10-24T08:23:56.667
> 
> 标签：javascript, regex

我在一个字符串中有用户的名字和姓氏，例如
`John Doe`
`Peter Smithon`

现在我想将此字符串转换为两个字符串 - 名字和姓氏
`John Doe`-> first = `John`, last = `Doe`
`John`-> first = `John`, last = ""
`[space]Doe`-> first = "", last = `Doe`。

我正在使用下一个代码

```
var fullname = "john Doe"
var last = fullname.replace(/^.*\s/, "").toUpperCase().trim(); // john
var first = fullname.replace(/\s.*$/, "").toUpperCase().trim(); // Doe 
```

这适用于两个词的全名。但是如果全名只有一个字，那我就有问题了

```
var fullname = "john"  
var last = fullname.replace(/^.*\s/, "").toUpperCase().trim(); // john
var first = fullname.replace(/\s.*$/, "").toUpperCase().trim(); // john 
```

[http://jsfiddle.net/YyCKx/](http://jsfiddle.net/YyCKx/)
有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T08:26:25.273

使用 split + shift 方法。

```
var parts = "Thomas Mann".split(" "),
    first = parts.shift(),
    last = parts.shift() || ""; 
```

因此，如果是单个单词名称，它将为您提供预期的结果：

```
last = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-22T16:27:31.927

使用此代码：

您需要更改行： splitFullName("firstName","lastName","fullName"); 并确保它包含表单中正确的字段 ID。

* * *

```
function splitFullName(a,b,c){
   String.prototype.capitalize = function(){
   return this.replace( /(^|\s)([a-z])/g , function(m,p1,p2){ return p1+p2.toUpperCase(); } );
  };
document.getElementById(c).oninput=function(){
    fullName = document.getElementById(c).value;
    if((fullName.match(/ /g) || []).length ===0 || fullName.substring(fullName.indexOf(" ")+1,fullName.length) === ""){
        first = fullName.capitalize();;
        last = "null";
    }else if(fullName.substring(0,fullName.indexOf(" ")).indexOf(".")>-1){
        first = fullName.substring(0,fullName.indexOf(" ")).capitalize() + " " + fullName.substring(fullName.indexOf(" ")+1,fullName.length).substring(0,fullName.substring(fullName.indexOf(" ")+1,fullName.length).indexOf(" ")).capitalize();
        last = fullName.substring(first.length +1,fullName.length).capitalize();
    }else{
        first = fullName.substring(0,fullName.indexOf(" ")).capitalize();
        last = fullName.substring(fullName.indexOf(" ")+1,fullName.length).capitalize();
    }
    document.getElementById(a).value = first;
    document.getElementById(b).value = last;
};
//Initial Values
if(document.getElementById(c).value.length === 0){
    first = document.getElementById(a).value.capitalize();
    last = document.getElementById(b).value.capitalize();
    fullName =  first + " " + last ;
    console.log(fullName);
    document.getElementById(c).value = fullName;}}

     //Replace the ID's below with your form's field ID's
     splitFullName("firstName","lastName","fullName"); 
```

* * *

来源：http: [//developers.marketo.com/blog/add-a-full-name-field-to-a-marketo-form/](http://developers.marketo.com/blog/add-a-full-name-field-to-a-marketo-form/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:28:02.117

你可以使用`split`方法

```
 var string = "ad";
var arr = string.split(" ");
var last = arr[0];
var first = arr[1];
if(first == null){
    first = "";
}
alert(last + "\n" + first)​;​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:31:08.467

如果在每种情况下您都只有“第一个”，您可以使用：

```
 var string = "john "
       var i = string.split(" ");
       alert("first: "+i[0]+ "\n"+ "last: " + i[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T10:18:45.440

var str='约翰';

var str2='彼得史密森';

var str3='彼得';

var words=str.split( **/\s+/g** ,2);

var first=words[0];

var last=words[1]||'';

警报（第一个+''+最后一个）；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T11:07:01.737

我知道这已经被回复并标记为已回答，但我只想指出，如果您仍然想使用正则表达式，您可以更改“最后一个”表达式：

```
var last = string.replace(/^[a-zA-Z]*/, "").toUpperCase().trim(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-03T10:54:38.257

```
jQuery( window ).load(function() {
            jQuery("#FullNametest").change(function(){
                var temp = jQuery(this).val();
                var fullname = temp.split(" ");
                var firsname='';
                var middlename='';
                var lastname = '';
                firstname=fullname[0];
                lastname=fullname[fullname.length-1];

                for(var i=1; i < fullname.length-1; i++) 
                {
                   middlename =  middlename +" "+ fullname[i];
                }
                jQuery('#FirstName').val(firstname);
                jQuery('#LastName').val(lastname);
            });
        }); 
```

# visio - Visio 2007 的相对链接问题

> ID：13045373
> 
> 赞同：0
> 
> 时间：2012-10-24T08:24:07.313
> 
> 标签：visio

使用“使用超链接的相对路径”功能时，它似乎只适用于网络路径，除非目标文件恰好位于同一目录中。

如果您的相对路径包含任何正斜杠，例如 path/to/file.htm Microsoft 将它们全部转换为反斜杠并且无法在浏览器中查看相对路径...

我希望能够做到这一点，这样我就可以将文件夹移动到任何地方，而无需更新所有链接。

有没有办法解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:28:52.823

```
Why would a relative path contain forward slashes? 
```

所以目录上的`.\someSubDirectory` 东西是目录，目录后面的东西是

```
..\MyParentDirectory 
```

你可以结合这些

```
..\..\MyParentsParent and .\SubDir\SubSubDir. 
```

你有我可以帮忙的具体例子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T08:13:36.243

解决方案是将 Hyperlink Base 设置为网站中所有页面共享的基本 URL。

# magento - 如何输出 Magento 的交付指令？

> ID：13045375
> 
> 赞同：0
> 
> 时间：2012-10-24T08:24:16.230
> 
> 标签：magento

我正在尝试创建一个可以通过 URL 访问的脚本，以便它输出交货详细信息，特别是我需要显示的字段是：orderID、status、gift_message 和一个名为“delivery_instructions”的自定义客户地址属性。到目前为止，我有以下内容，但我一直在努力获取交货说明，任何帮助将不胜感激。

```
<?php
require_once 'app/Mage.php';
Mage::app('default');
$myOrder=Mage::getModel('sales/order'); 

$orders=Mage::getModel('sales/mysql4_order_collection');
$message = Mage::getModel('giftmessage/message'); 
$customer = Mage::getModel('customer/customer');

$orders->addFieldToFilter('total_paid',Array('gt'=>0)); //Amount paid larger than 0
//$orders->addFieldToFilter('gift_message_id',Array('gt'=>0));

$allIds=$orders->getAllIds();
foreach($allIds as $thisId) {
    $myOrder->reset()->load($thisId);
    $shippingAddress = $myOrder->getShippingAddress();
    $customerDetails = $myOrder->getCustomer();
    //echo $myOrder->shippingaddress->getData('delivery_instructions');
    $customer_id = $myOrder->getCustomerId() . "',";
    echo $customer_id . "',";
        echo "'" . $myOrder->getStatus() . "',";
    echo "'" . $myOrder->getIncrementID() . "',";
    $gift_message_id = $myOrder->getGiftMessageId();
        if(!is_null($gift_message_id)) {
           $message->load($gift_message_id);
           echo $gift_message = $message->getData('message') . "',";
        };
$customer = Mage::getModel('customer/customer')->load( $customer_id); 
echo $customer = $customer->getData('incrementId'); 
echo "\r\n";
echo "<br/ >";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:31:46.343

你很接近这个：

```
//echo $myOrder->shippingaddress->getData('delivery_instructions'); 
```

为了获取您需要使用的送货地址对象：

```
$myOrder->getShippingAddress() 
```

并从送货地址对象中获取 delivery_instruction：

```
$myOrder->getShippingAddress()->getDeliveryInstructions() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:11:14.620

您可以创建自定义地址属性和自定义客户属性。

可以像这样访问客户属性：

```
// A customer is not mandatory for an order.
if($myOrder->getCustomerId()){
    $customer = Mage::getModel(’customer/customer’)->load($myOrder->getCustomerId());
    $customer->getDeliveryInstructions();
} 
```

地址属性可以这样访问：

```
$myOrder->getShippingAddress()->getDeliveryInstructions(); 
```

# locking - 我将如何实施一个锁系统来模拟一个改变性别的浴室？

> ID：13045378
> 
> 赞同：0
> 
> 时间：2012-10-24T08:24:25.570
> 
> 标签：locking, pthreads, mutex, semaphore

我正在模拟男女皆宜的浴室问题，但我在实施这个概念时遇到了麻烦。我已经看到了一些解决该问题的示例代码，但它们都太复杂且过于复杂，我无法理解。

使用互斥体，我想实现一个模拟，其中 main() 在循环中创建一系列线程，每个线程调用两个函数：enterBathroom() 和 leaveBathroom()。通过使用由互斥锁锁定和解锁的全局变量来跟踪所有内容，我将如何实现这两个函数？

以下是我的代码结构/框架：

```
//Global Variables
int maleCount, femaleCount, totalCount;
pthread_mutex_t bathroomLock;

EnterBathroom(int ID, bool isMale){
    //if(isMale)
        //lock, increment maleCount or totalCount?, unlock
    //else
        //lock, increment femaleCount or totalCount?, unlock
}

LeaveBathroom(int ID, bool isMale){
    //Lock, decrement one of the variables?, unlock
} 
```

我不确定是否需要再使用一个互斥锁或变量来跟踪浴室的当前性别，或者是否需要另一个整数来跟踪浴室中的总人数。我知道每个函数中只是一系列“if”语句，但我喜欢一个白痴，我删除了我之前的实现尝试，当它没有备份就无法工作时......

任何帮助都将不胜感激，无论是代码还是朝着正确的方向推动。谢谢！

（为澄清起见，浴室在任何时候都可以是男性或女性，但不能同时是男性或女性，并且任何一种性别都可以无限数量地同时使用浴室）

（另外，全局变量在调用 enterBathroom() 和 leaveBathroom 之前被初始化）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:27:01.653

我建议使用通用结构而不是保留更多的全局变量。而且在pthread中你不能像这样传递参数

```
int EnterBathroom(int ID, bool isMale); 
```

所以 pthread 函数应该像

```
void* EnterBathroom(void*); 
```

通过将线程形成为结构，可以将多个参数传递给线程。这同样适用于 LeaveBathroom()。有关 pthread 的更多信息，请参阅[此处](https://computing.llnl.gov/tutorials/pthreads/)。

所以你的结构可能包含

```
/* Global Structure */
typedef struct
{
     int maleCount;
     int femaleCount;
     int totalCount;
}gData;

/* Struct which is passed to thread */
typedef struct
{
   int iUid;
   unsigned char ucIsMale; 
}Input; 
```

示例代码....

```
 void *EnterBathroom(void* arg)
  {
     Input * inp = (Input*)arg;

     /* Lock using Mutex **********/    

     if((inp->ucIsMale != 1) && (gData.maleCount == 0))
          gData.femaleCount++;
     else if((inp->ucIsMale == 1) && (gData.femaleCount == 0))
          gData.maleCount++;
     else
          printf("\n Already occupied by Opposite Sex\n");              
     /* UnLock using Mutex *********/    

  } 
```

# php - 使用 file_get_contents() 检索的 Web 内容和 curl 包含不正确的拉丁字符

> ID：13045381
> 
> 赞同：-1
> 
> 时间：2012-10-24T08:24:37.680
> 
> 标签：php, curl, encoding, character-encoding

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

通过使用 file_get_contents() 或 curl 函数，输出是错误的，具体来说，东欧**č**和**ć**拉丁字符总是被讨厌的字符替换，**šđž**有时，取决于我是否正在尝试改变 PHP 的内部编码 -它只会变得更糟。

是的，我读过类似的主题，但是按照这些说明，事情会变得更糟。

有没有人有解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:32:48.520

您可能尝试显示编码错误的数据，如果您使用 file_get_contents/curl 访问的数据是远程 html 页面，请从标题或标签中读取 Content-Type 并使用[iconv转换编码](http://lt1.php.net/manual/en/function.iconv.php)

# android - 带有图像的自定义 ListView，来自安装的应用程序

> ID：13045383
> 
> 赞同：0
> 
> 时间：2012-10-24T08:24:42.250
> 
> 标签：android, image, listview

好吧，我正在尝试`ListView`用图像和文字制作一个。我一直在关注这个例子：[Android: Custom ListView with Image and Text using ArrayAdapter](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/#ixzz2ACbmrnvf)但我希望列表是关于已安装的应用程序及其图标的。我一直在关注另一个示例来获取图标：[Get installed Applications with Name, Package Name, Version and Icon](http://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon)

我已经能够制作带有图标的列表，但无法从已安装的应用程序中获取它们。如果我使用我的可绘制对象中的任何图片，则代码可以完美运行。所以问题是如何获取图标并将它们添加到我的`ListView`?

代码有点大，我会尽量把它变小，稍后再贴出来。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:36:16.850

好吧，在尝试使其易于阅读并在此处发布时，我找到了解决方案。这是神奇的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.apps_list_view);

    rowItems = new ArrayList<AppListRowItem>();

    List<PackageInfo> packs = getPackageManager().getInstalledPackages(PackageManager.GET_META_DATA);
    for(int i=0;i<packs.size();i++) {
        PackageInfo p = packs.get(i);

        Pinfo newInfo = new Pinfo();
        newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
        newInfo.pname = p.packageName;
        newInfo.versionName = p.versionName;
        newInfo.versionCode = p.versionCode;
        newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());

            PackageNames = p.packageName;

            AppNames = p.applicationInfo.loadLabel(getPackageManager()).toString();

        test = p.applicationInfo.loadIcon(getPackageManager());

        AppListRowItem item = new AppListRowItem(test, AppNames, PackageNames);
        rowItems.add(item);

    } 
```

其他一切就像上面发布的链接一样。

# synchronization - 在 Thunderbird 14 中同步文件夹

> ID：13045390
> 
> 赞同：-1
> 
> 时间：2012-10-24T08:25:08.430
> 
> 标签：synchronization, imap, pop3, thunderbird

我使用的是 Thunderbird 14.0，并在我的本地 Thunderbird 客户端中创建了很多特定于主题的文件夹。我希望它们在邮件服务器中可用，但我不知道如何在我的雷鸟中设置此选项。

我阅读了[https://support.mozillamessaging.com/en-US/kb/imap-synchronization](https://support.mozillamessaging.com/en-US/kb/imap-synchronization)并根据它，应该有一个`Synchronisation & Storage`设置部分，这在我的客户端不可用。当我进入时`Server Settings`，服务器类型被硬编码为`POP`. 不可能`IMAP`，不知道为什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:28:28.763

您的邮件提供商应支持 IMAP 服务。POP 不支持从客户端到服务器的邮件同步。

IMAP 通常是一项付费服务​​，除了 gmail（我知道）请向您的邮件提供商索取更多信息。

> 服务器类型被硬编码为 POP。我不能是 IMAP，不知道为什么...

这就是您配置的配置文件，如果您知道 imap 设置，请尝试使用 imap 设置创建一个新配置文件。

# android - 激活其他标签页时如何更改标签页标题

> ID：13045392
> 
> 赞同：0
> 
> 时间：2012-10-24T08:25:18.763
> 
> 标签：android, tabpage

第 1 页： ![](../Images/f64c61b11a71fa7bd0f839c89a95ecb9.png)

第 2 页： ![](../Images/2bb70e9bce946166b88295d52cca8072.png)

嗨，我正在使用 Android ActionBarSherlock：我遇到了麻烦：如何在更改标签页时更改标题栏文本，很抱歉这个简单的问题，但这花了我很多时间（不成功）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:37:03.797

我认为动态创建 TextView。

```
 TextView tv=new TextView(this);
  tv.setText("Your Title"); 
```

或者如果使用相同的 XML TextView 然后：-

```
 TextView tv=(TextView)findViewById(R.id.xmlname);
   tv.setText("title"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:44:27.727

你不能设置标题：

```
ActionBar ab = getSupportActionBar();
    ab.setTitle("yourTitle"); 
```

每次更改选项卡时。

# c++ - 如何在 C++ 中为多态类实现 operator==

> ID：13045399
> 
> 赞同：6
> 
> 时间：2012-10-24T08:25:33.890
> 
> 标签：c++

> **可能重复：**
> [为类层次结构重载 operator== 的正确方法是什么？](https://stackoverflow.com/questions/1691007/whats-the-right-way-to-overload-operator-for-a-class-hierarchy)

我有一个基类和几个派生类，如下面的代码：

```
class Base
{
public:
    friend bool operator==(const Base&, const Base&);
    virtual ~Base(){}

private:
    virtual bool equals(const Base& other) const = 0;
};

bool operator==(const Base& lhs, const Base& rhs)
{
    return lhs.equals(rhs);
}

class A : public Base
{
public:
    A(int x) : x_(x){}

private:
    virtual bool equals(const Base& other) const;
    int x_;
};

bool A::equals(const Base& other) const
{
    const A* pA = dynamic_cast<const A*>(&other);
    if(!pA) return false;
    return x_ == pA->x_;
}

class B : public Base
{
public:
    B(double y) : y_(y){}

private:
    virtual bool equals(const Base& other) const;
    double y_;
};

bool B::equals(const Base& other) const
{
    const B* pB = dynamic_cast<const B*>(&other);
    if(!pB) return false;
    return y_ == pB->y_;
} 
```

为了能够比较两个派生类，我想要 operator==。问题是如何以面向对象的方式实现这一点（例如，尊重封装、可维护性和可扩展性）。是否有一些推荐的模式来做到这一点？有没有替代上述方法避免dynamic_cast？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:31:24.130

你的方法并不完美。考虑下一个派生自 的类`A`：

```
class AA : public A
{
public:
    AA(int x, int y) : A(x), y_(y) {}

private:
    virtual bool equals(const Base& other) const;
    int y_;
};

bool AA::equals(const Base& other) const
{
    const AA* pAA = dynamic_cast<const AA*>(&other);
    if(!pAA) return false;
    return A::equals(other) && y_ == pAA->y_;
} 
```

那么你`operatator ==`打破了基本规则，它不是对称关系：

```
 A a(1); 
   AA aa(1,1); 
   assert(a == aa);
   assert(!(aa == a)); 
```

简短的解决方法是使用`typeid`：

```
bool operator==(const Base& lhs, const Base& rhs)
{
    return typeid(lhs) == typeid(rhs) && lhs.equals(rhs);
} 
```

# git - golang 可以从私有 subversion 存储库导入包吗？

> ID：13045410
> 
> 赞同：5
> 
> 时间：2012-10-24T08:26:15.847
> 
> 标签：git, svn, go

我们知道 golang 支持从著名的代码托管站点导入包，例如 github、google code 等，但我想弄清楚 golang 是否支持从我的私有 subversion/git 存储库导入包？如果 golang 支持的话，在项目之间共享一些通用包会变得更容易。

一个理想的例子：

```
package main

import "192.168.12.13/trunk/share/foolib"

func main() {
   ....
   foolib.xxxx...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:09:21.457

是的，您可以从私人存储库中导入代码，运行`go help importpath`以获取说明。

然而，这是一个两阶段的方法：首先获取代码，然后将其编译到您的项目中。

您的示例表明您要导入远程代码（因此，本质上是一个阶段过程），我怀疑这是可能的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T08:01:22.440

如果它是一个私有存储库，您几乎肯定最好手动管理它。

对于颠覆，使用外部颠覆；对于 git 使用子模块等。

```
go get ... 
```

是一个有用的工具，但是一旦您开始使用封闭签名的内部存储库，您可能会遇到困难；因为大多数非愚蠢的源代码控制已经支持这种类型的“子模块”功能，你可能最好使用你使用的任何源代码控制的设施并将你的自定义子模块导入你的“src”目录，然后，如上所述，导入使用：

```
import mylib "modules/xxx/trunk/src/blah" 
```

...而不是试图强迫去做所有的事情。

# javascript - javascript，是否有像 isArray 这样的 isObject 函数？

> ID：13045419
> 
> 赞同：105
> 
> 时间：2012-10-24T08:26:41.647
> 
> 标签：javascript, jquery, arrays, object

> **可能重复：**
> [检查值是否为对象文字？](https://stackoverflow.com/questions/4320767/check-that-value-is-object-literal)

我正在处理一个可以为 null、0 或 json 对象的输出。有了这个，我需要想出一种方法来确定该输出是否确实是一个真实的对象。但是我找不到任何能给我一个明确的答案的东西，比如 javascript 功能中是否有类似的东西。如果没有其他方法，我可以检测这是否是一个对象？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-10-24T08:29:22.813

您可以使用[typeof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)运算符。

```
if( (typeof A === "object" || typeof A === 'function') && (A !== null) )
{
    alert("A is object");
} 
```

请注意，因为`typeof new Number(1) === 'object'`应该`typeof Number(1) === 'number';`避免使用第一种语法。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-10-24T08:31:00.357

使用以下

它将返回一个真或假

```
theObject instanceof Object 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-24T08:27:44.203

在 jQuery 中有这样的[`$.isPlainObject()`](http://api.jquery.com/jQuery.isPlainObject/)方法：

> 说明：检查对象是否为普通对象（使用“{}”或“new Object”创建）。

# iphone - iOS6 UIPickerView 内存泄漏问题。

> ID：13045423
> 
> 赞同：6
> 
> 时间：2012-10-24T08:27:00.900
> 
> 标签：iphone, objective-c, memory-leaks, xcode4.5, uipickerview

我得到了这个内存泄漏：

```
[UIPickerTableViewTitleCell initWithStyle:resuableIdentifier]; 
```

和

```
NSConcentrateMutableAttributedString. 
```

问题是我没有实现这个委托。在实现这个之后，内存泄漏就消失了。这些信息可能对其他人有帮助，因为我花了 16 个小时才弄清楚这个问题。

```
// Do something with the selected row.
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

// Get the text of the row.
NSString *rowItem = [NSString stringWithFormat:@"     %@",[machineData objectAtIndex:row]];

// Create and init a new UILabel.
// We must set our label's width equal to our picker's width.
// We'll give the default height in each row.
UILabel *lblRow = [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView bounds].size.width, 44.0f)];

// Make the text color red.
[lblRow setTextColor: [UIColor blackColor]];
[lblRow setFont:[UIFont boldSystemFontOfSize:20]];

// Center the text.
[lblRow setTextAlignment:UITextAlignmentLeft];

// Add the text.
[lblRow setText:rowItem];

// Clear the background color to avoid problems with the display.
[lblRow setBackgroundColor:[UIColor clearColor]];

// Return the label.
return lblRow;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:19:26.417

我在弹出窗口中使用了 IUIPicker，每次我关闭弹出窗口时都会出现内存泄漏。我也在使用 ARC，所以我解决这个问题的最简单方法是在卸载时设置 UIPickerView = nil。以下似乎已经成功了。

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.pickerView = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:02:08.013

感谢您的信息。被这个泄漏弄糊涂了。只有少数评论：

*   可能 lblRow 应该自动释放：`return [lblRow autorelease];`

*   `[pickerView rowSizeForComponent:component]`可用于获取新标签的大小。

# java - if else 语句

> ID：13045428
> 
> 赞同：3
> 
> 时间：2012-10-24T08:27:13.950
> 
> 标签：java, if-statement

我对这个问题有疑问，有人可以帮忙吗？一个解释会很好，而不是回答它自己的答案。

编写一个语句，比较 score1 和 score2 的值并执行以下操作。当 score1 超过 score2 时，将“player1 wins”消息打印到标准输出。当 score2 超过 score1 时，将“player2 wins”消息打印到标准输出。在每种情况下，变量 player1Wins, , player1Losses , player2Wins 和 player2Losses, 都会在适当时递增。最后，如果出现平局，则打印消息“tie”并且变量 tieCount 递增。

```
 if(score1>score2)
     {
         System.out.println("player1 wins");
         player1Wins++;player2Losses++;
     }
    else if(score2>score1)
     {
         System.out.println("player2 wins");
         player2Wins++;player1Losses++;
     }
    else if(score1=score2)
     {
        System.out.println("tie");
        tieCount++;
     } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T08:29:15.457

一切都很好，**除了**最后一个**else if**。你不小心做了一个任务而不是比较。

```
else if(score1=score2) 
```

上面的*else-if*语句应该是：-

```
else if(score1 == score2) 
```

* * *

***PS*** : - 事实上，你可以简单*地删除最后一个* ，这将相当于这个 else if。因为您已经在前两种情况下考虑了其他可能性。`else if``else`

所以，这也将做到这一点： -

```
else {
    System.out.println("tie");
    tieCount++;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T08:29:06.357

在最后一个条件下执行分配*，*`else if`而不是*比较*。改成：

```
else if (score1 == score2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:29:51.540

你有一个平等的问题，这可能会导致问题

```
else if(score1=score2) {
    System.out.println("tie");
    tieCount++;
} 
```

应该

```
else if(score1==score2) {
    System.out.println("tie");
    tieCount++;
} 
```

您的第一个将 score2 的值分配给 score1。它是最后一个 else ，即使有这个 bug 也可能会被调用，因为其他两个检查大于和小于。

除此之外，您的代码似乎做了它应该做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T08:30:11.180

`else if(score1 == score2)`需要被完成。`=`运算符表示赋值，而表示`==`检查是否相等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T08:31:18.700

除了最后一个条件在语法上是错误的之外，它也是多余的。`else if ...`用just替换final ，`else`一切都会完美。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T08:31:14.457

```
else if(score1=score2) 
```

这种说法应该是

```
else if(score1 == score2) 
```

但这实际上比较了参考文献

```
else if(score1.equals(score2)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T08:31:14.903

我认为最后一条语句有你正在使用 = 符号而不是 == 符号使用的问题

```
 if(score1==score2) 

```

# c++ - 默认模板参数中的 MPL 占位符替换

> ID：13045431
> 
> 赞同：3
> 
> 时间：2012-10-24T08:27:27.000
> 
> 标签：c++, template-meta-programming, boost-mpl

我在理解 MPL 占位符时遇到了一些麻烦。
有人可以解释一下为什么这段代码无法编译吗？

我希望打印数字 0、1 和 2，但是当编译器尝试确定 Wrapper 的默认模板参数的类型时，占位符似乎没有被实际类型替换。

```
#include <iostream>
#include <boost/mpl/inherit.hpp>
#include <boost/mpl/inherit_linearly.hpp>
#include <boost/mpl/int.hpp>
#include <boost/mpl/vector.hpp>

template <typename T> struct Traits;

template<> struct Traits<int>  { typedef boost::mpl::int_<0> type; };
template<> struct Traits<char> { typedef boost::mpl::int_<1> type; };
template<> struct Traits<bool> { typedef boost::mpl::int_<2> type; };

template <typename T, typename Type=typename Traits<T>::type > struct Wrapper
{
    Wrapper() { std::cout << "Value: " << Type::value << std::endl; }

    T value;
};

int main()
{
    typedef boost::mpl::inherit_linearly<
                boost::mpl::vector<int, char, bool>,
                boost::mpl::inherit<boost::mpl::_1, Wrapper<boost::mpl::_2> > >::type Object;

    Object obj;

    return 0;
} 
```

这是来自 gcc-4.1.2 的错误（我知道......旧的编译器在工作）

```
# g++4 -I ../boost test.cpp -o test
test.cpp: In function 'int main()':
test.cpp:24: error: invalid use of undefined type 'struct Traits<mpl_::arg<2> >'
test.cpp:7: error: declaration of 'struct Traits<mpl_::arg<2> >'
test.cpp:24: error: template argument 2 is invalid
test.cpp:24: error: template argument 2 is invalid
test.cpp:24: error: template argument 2 is invalid
test.cpp:24: error: expected initializer before 'Object'
test.cpp:26: error: 'Object' was not declared in this scope
test.cpp:26: error: expected `;' before 'obj' 
```

**编辑：** 在下面 Acorbe 的[回答](https://stackoverflow.com/questions/13045431/mpl-placeholder-replacement-in-default-template-parameter?#answer-13055739)之后，我制作了我的示例程序的变体，以说明为什么他提出的解决方案不符合我的需求。这澄清了我所追求的。在这种情况下，我希望打印文本 TYPE_A、TYPE_B、TYPE_A。g++ 错误是一样的。

```
#include <iostream>
#include <boost/mpl/inherit.hpp>
#include <boost/mpl/inherit_linearly.hpp>
#include <boost/mpl/int.hpp>
#include <boost/mpl/vector.hpp>

enum WrapperType { TYPE_A, TYPE_B };

template <typename T> struct Traits;

template<> struct Traits<int>  { typedef boost::mpl::int_<TYPE_A> type; };
template<> struct Traits<char> { typedef boost::mpl::int_<TYPE_B> type; };
template<> struct Traits<bool> { typedef boost::mpl::int_<TYPE_A> type; };

template <typename T, typename Type=typename Traits<T>::type > struct Wrapper;

template <typename T>
struct Wrapper<T, boost::mpl::int_<TYPE_A> >
{
    Wrapper() : value (0) { std::cout << "TYPE_A" << std::endl; }

    T value;
};

template <typename T>
struct Wrapper<T, boost::mpl::int_<TYPE_B> >
{
    Wrapper() { std::cout << "TYPE_B" << std::endl; }

    T value;
};

int main()
{
    typedef boost::mpl::inherit_linearly<
                boost::mpl::vector<int, char, bool>,
                boost::mpl::inherit<boost::mpl::_1, Wrapper<boost::mpl::_2> > >::type Object;

    Object obj;

    return 0;
} 
```

这是来自 gcc-4.5.4 的错误

```
# g++ -I ../boost test.cpp -o test
test.cpp: In functie ‘int main()’:
test.cpp:37:79: fout: invalid use of incomplete type ‘struct Traits<mpl_::arg<2> >’
test.cpp:9:34: fout: declaration of ‘struct Traits<mpl_::arg<2> >’
test.cpp:37:79: fout: template argument 2 is invalid
test.cpp:37:81: fout: template argument 2 is invalid
test.cpp:37:83: fout: template argument 2 is invalid
test.cpp:37:91: fout: expected initializer before ‘Object’
test.cpp:39:9: fout: ‘Object’ was not declared in this scope
test.cpp:39:16: fout: expected ‘;’ before ‘obj’ 
```

这是（部分）来自 clang++-3.1 的错误：

```
test.cpp:15:50: error: implicit instantiation of undefined template 'Traits<mpl_::arg<2> >'
    template <typename T, typename Type=typename Traits<T>::type > struct Wrapper;
                                                 ^
test.cpp:37:57: note: in instantiation of default argument for 'Wrapper<mpl_::arg<2> >' required here
                    boost::mpl::inherit<boost::mpl::_1, Wrapper<boost::mpl::_2> > >::type Object;
                                                        ^~~~~~~~~~~~~~~~~~~~~~~
test.cpp:9:34: note: template is declared here
    template <typename T> struct Traits; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:48:25.233

我对您的代码进行了一些更改，`typedef`将默认模板参数的诱导拆分为两个更简单`typedef`的 s。

考虑一下：

```
template < typename T , typename Super_Type = Traits<T> > struct Wrapper
{ 
     typedef typename Super_Type::type Type;
     Wrapper() { std::cout << "Value: " << Type::value << std::endl; }

     T value;
}; 
```

这样它就可以编译了。我怀疑您的原始表达式（尽管正确）在*某种程度上*太复杂而无法被编译器正确扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:54:57.267

好吧...我似乎已经破解了它...
通常，额外的抽象级别可以解决问题。

我创建了一个元函数类（genWrapper），它与占位符一起传递给 mpl::apply1。然后，那里的元函数将返回预期的包装器类型。

这是生成的程序（第二版）。
感谢大家的帮助和指点。

```
#include <iostream>
#include <boost/mpl/apply.hpp>
#include <boost/mpl/inherit.hpp>
#include <boost/mpl/inherit_linearly.hpp>
#include <boost/mpl/int.hpp>
#include <boost/mpl/vector.hpp>

enum WrapperType { TYPE_A, TYPE_B };

template <typename T> struct Traits;

template<> struct Traits<int>  { typedef boost::mpl::int_<TYPE_A> type; };
template<> struct Traits<char> { typedef boost::mpl::int_<TYPE_B> type; };
template<> struct Traits<bool> { typedef boost::mpl::int_<TYPE_A> type; };

template <typename T, typename Type = typename Traits<T>::type> struct Wrapper;

template <typename T>
struct Wrapper<T, boost::mpl::int_<TYPE_A> >
{
    Wrapper() : value (0) { std::cout << "TYPE_A" << std::endl; }

    T value;
};

template <typename T>
struct Wrapper<T, boost::mpl::int_<TYPE_B> >
{
    Wrapper() { std::cout << "TYPE_B" << std::endl; }

    T value;
};

struct genWrapper
{
    template <typename T>
    struct apply
    {
        typedef Wrapper<T> type;
    };
};

int main()
{
    typedef boost::mpl::inherit_linearly<
                boost::mpl::vector<int, char, bool>,
                boost::mpl::inherit<boost::mpl::_1, boost::mpl::apply1<genWrapper, boost::mpl::_2> > >::type Object;

    Object obj;

    return 0;
} 
```

这是结果输出：

```
# g++4 -I ../boost test.cpp -o test
# ./test
TYPE_A
TYPE_B
TYPE_A 
```

# php - Paypal 移动图书馆 IPN 验证

> ID：13045439
> 
> 赞同：0
> 
> 时间：2012-10-24T08:27:52.117
> 
> 标签：php, paypal, paypal-ipn

我是一名 PHP 开发人员。我已经实现了 Paypal 移动图书馆 IPN。这是我在测试模式下收到的。

```
$_POST = array(
'payment_request_date' => 'Wed Jun 15 07:21:26 PDT 2011',
'return_url' => 'https://www.paypal.com',
'fees_payer' => 'EACHRECEIVER',
'ipn_notification_url' => 'http://mysite.com/myscript.php',
'verify_sign' => 'AsPVXqWsrQkFWs.gl9jI5iQU2b53AiFm-2O-GeHSy9tAKrrPm327E81P',
'test_ipn' => 1,
'transaction' => array('USD 9.99'),
'cancel_url' => 'https://www.paypal.com',
'pay_key' => 'AP-725112792Y356822X',
'action_type' => 'CREATE',
'memo' => '55547098#1 month platinum membership',
'transaction_type' => 'Adaptive Payment PAY',
'status' => 'COMPLETED',
'log_default_shipping_address_in_transaction' => false,
'charset' => 'windows-1252',
'sender_useCredentials' => true,
'notify_version' => 'UNVERSIONED',
'reverse_all_parallel_payments_on_error' => false,
); 
```

我看到有一个字段 verify_sign，所以我想应该通过在 POST 请求之后发送到[https://www.sandbox.paypal.com/cgi-bin/webscr来验证它：](https://www.sandbox.paypal.com/cgi-bin/webscr)

$req = 'cmd=_notify-validate&'.http_build_query($_POST); 但它总是返回无效。我还尝试使用对 GetTransactionDetails 的 SOAP 请求来验证此交易，asTransactionID 我指定了 $_POST['pay_key'] (AP-725112792Y356822X) 并且此服务返回错误 10004 The transaction id is not valid

那么如何验证 Paypal Mobile Library 响应呢？我可以在沙盒模式下或仅在现场检查它的验证吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:28:46.450

我建议在此处尝试在 PayPal 开发人员网络上使用 PHP 中的 IPN 代码示例：[https ://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

# ruby-on-rails - 迁移数据——不仅仅是模式，Rails

> ID：13045440
> 
> 赞同：14
> 
> 时间：2012-10-24T08:27:54.767
> 
> 标签：ruby-on-rails, ruby, data-migration, rails-migrations

有时，需要进行**数据**迁移。随着时间的推移，使用您的域模型的代码更改和迁移不再有效并且迁移失败。迁移数据的最佳做法是什么？

我试着举一个例子来澄清这个问题：

考虑一下。你有一个迁移

```
class ChangeFromPartnerAppliedToAppliedAt < ActiveRecord::Migration
  def up
    User.all.each do |user|
      user.applied_at = user.partner_application_at
      user.save
   end
 end 
```

当然，这运行得很好。稍后，您需要更改架构

```
class AddAcceptanceConfirmedAt < ActiveRecord::Migration
  def change
    add_column :users, :acceptance_confirmed_at, :datetime
  end
end

class User < ActiveRecord::Base
  before_save :do_something_with_acceptance_confirmed_at
end 
```

对你来说，没问题。它运行完美。但是，如果您的同事今天拉了这两个，**还没有运行第一次迁移**，他将在运行第一次迁移时收到此错误：

```
rake aborted!
An error has occurred, this and all later migrations canceled:
undefined method `acceptance_confirmed_at=' for #<User:0x007f85902346d8> 
```

那不是团队合作者，他将修复您引入的错误。你应该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T08:33:21.110

这是一个完美的例子[`Using Models in Your Migrations`](https://guides.rubyonrails.org/v4.1/migrations.html#using-models-in-your-migrations)

```
class ChangeFromPartnerAppliedToAppliedAt < ActiveRecord::Migration
  class User < ActiveRecord::Base
  end

  def up
    User.all.each do |user|
      user.applied_at = user.partner_application_at
      user.save
   end
 end 
```

在米莎的评论后编辑

```
class ChangeFromPartnerAppliedToAppliedAt < ActiveRecord::Migration
  class User < ActiveRecord::Base
  end

  def up
    User.update_all('applied_at = partner_application_at')
  end
 end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T08:33:27.633

最佳实践是：不要在迁移中使用模型。迁移会改变 AR 映射的方式，所以根本不要使用它们。使用 SQL 完成所有操作。这样，它将始终有效。

这：

```
User.all.each do |user|
  user.applied_at = user.partner_application_at
  user.save
end 
```

我会这样做

```
update "UPDATE users SET applied_at=partner_application_at" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T12:20:53.253

有时“迁移数据”不能作为模式迁移的一部分执行，就像上面讨论的那样。有时“迁移数据”意味着“修复历史数据不稳定”或“更新 Solr/Elasticsearch”索引，因此这是一项复杂的任务。对于这类任务，请查看此 gem [https://github.com/OffgridElectric/rails-data-migrations](https://github.com/OffgridElectric/rails-data-migrations)

该 gem 旨在将 Rails 模式迁移与数据迁移分离，因此在部署时不会导致停机，并且整体上易于管理

# c - 如何将数据（结构）作为消息传递给线程。

> ID：13045442
> 
> 赞同：1
> 
> 时间：2012-10-24T08:28:00.890
> 
> 标签：c, winapi, message-queue

如何将数据从主应用程序传递到线程？

在主应用程序中，我创建了一个线程来处理错误消息。在主应用程序中处理数据时，如果出现错误，它会生成错误消息并将其填充到结构中。此错误消息（结构）需要传递给线程，然后线程将进一步处理它，主应用程序应继续其工作。我正在尝试在 Windows 平台上的 C 中执行此操作。

我的应用程序中只会运行一个线程。目前我已经定义了一个全局变量结构（myData），我正在使用 **PostThreadMessage 传递它。**

```
struct myData errorData; 
```

从主应用程序发布消息使用

```
PostThreadMessage(ErrorLogId, THRD_MESSAGE_EXIT , 0 , (LPARAM)&errorData); 
```

在我有的线程中

```
MsgReturn = GetMessage(&msg, NULL, THRD_MESSAGE_SOMEWORK, THRD_MESSAGE_EXIT); 
```

目前它工作正常。但是如果处理错误消息需要更多时间，到那时主应用程序可能会得到新的错误并更新全局结构 errorData 中的数据。

我可以使用锁定机制，但在线程完成处理之前我无法停止主应用程序。如何在不将数据作为全局变量的情况下传递数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:34:33.020

您可能希望在`struct myData`每次要调用时创建一个新实例`PostThreadMessage()`。

线程在完成时需要`free()`这个实例。`struct myData`

在您当前的方法中添加同步将违反在主要任务继续时生成工作人员的异步概念。

无论如何，线程仍然需要在他们身边使用同步，以防将某些内容写入共享日志文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:34:03.047

一种解决方案是每次动态分配一个`struct myData`（使用），填充它并将其传递给线程进行处理。`malloc()`线程完成处理后负责`free()`处理它。

这种方法消除了全局对象上线程之间的任何同步`errorData`（因为它不再需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:34:38.010

如何动态分配错误消息（使用`malloc()`），填充它并将指向它的指针传递给消息中的线程？然后线程将处理该消息并释放它（使用`free()`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:34:19.877

**编辑：**

没有意识到已经有一个消息队列，抱歉，那么动态分配的消息当然可以。

**旧答案供参考：**

如果您不希望等到线程完成处理错误消息，那么您应该使用*同步队列*来进行主线程和工作线程之间的通信。这是一些伪代码来解释我的意思：

**工作线程：**

```
while (queue_is_empty())
  wait;
lock(queue);
process_error(read(queue));
unlock(queue); 
```

**主线：**

```
if (error)
  lock(queue)
  write(queue, error)
  unlock(queue)
  //possibly signal thread 
```

您不必从头开始实现它，您可以使用[RabbitMQ之类的东西](http://www.rabbitmq.com/)

# c# - 如何使用 ITestCase 在测试管理器的测试套件下直接添加测试用例

> ID：13045446
> 
> 赞同：1
> 
> 时间：2012-10-24T08:28:04.080
> 
> 标签：c#

由于 Itest 案例是接口，我们无法创建它的对象。

我知道通过在项目下创建测试用例然后将其添加到测试管理器来解决问题。

是否有任何选项可以直接在测试经理测试计划测试套件下创建测试用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:34:35.407

这有效：

```
private static void CopyTestCaseIntoTestSuite(ITestCase sourceTestCase, IStaticTestSuite targetTestSuite)
{
    targetTestSuite.Entries.Add(sourceTestCase);
} 
```

如果您需要其他帮助，请告诉我。:)

# extjs - 从网格拖放到树和向后

> ID：13045451
> 
> 赞同：0
> 
> 时间：2012-10-24T08:28:56.323
> 
> 标签：extjs, drag-and-drop

几天以来，我尝试将 ExtJs ['Grid to Tree Drag and Drop' Example][1] 更改为双向工作。但我得到的只是一个“几乎”工作的应用程序。

现在它可以工作，只要我可以将一个项目从网格拖到树，树内，网格内，但是如果我将它从树拖到网格，它不会掉落。它只显示绿色钩子。

我还尝试将 ddGroup 与树和网格区分开来，但是再也没有任何效果了。这对于 ExtJs 初学者来说太过分了。

```
// Stücklisten Grid
stuecklistengrid = Ext.extend(Ext.grid.GridPanel, {
initComponent:function() {
var config = {
store:itemPartStore
,columns:[{
id:'PART_ITE_ID'
,header:"PART_ITE_ID"
,width:200, sortable:true
,dataIndex:'PART_ITE_ID'
},{
header:"IS_EDITABLE"
,width:100
,sortable:true
,dataIndex:'IS_EDITABLE'
},{
header:"IS_VISIBLE"
,width:100
,sortable:true
,dataIndex:'IS_VISIBLE'
}]
,viewConfig:{forceFit:true}
}; // eo config object

// apply config
Ext.apply(this, Ext.apply(this.initialConfig, config));

this.bbar = new Ext.PagingToolbar({
store:this.store
,displayInfo:true
,pageSize:10
});
// call parent
stuecklistengrid.superclass.initComponent.apply(this, arguments);
} // eo function initComponent

,onRender:function() {
// call parent
stuecklistengrid.superclass.onRender.apply(this, arguments);

// load the store
this.store.load({params:{start:0, limit:10}});

} // eo function onRender

});
Ext.reg('examplegrid', stuecklistengrid);

// Stücklisten Tree
var CheckTree = new Ext.tree.TreePanel({
    root:{    text:'root', id:'root', expanded:true, children:[{
            text:'Folder 1'
            ,qtip:'Rows dropped here will be appended to the folder'
            ,children:[{
            text:'Subleaf 1'
            ,qtip:'Subleaf 1 Quick Tip'
            ,leaf:true
            }]
            },{
            text:'Folder 2'
            ,qtip:'Rows dropped here will be appended to the folder'
            ,children:[{
            text:'Subleaf 2'
            ,qtip:'Subleaf 2 Quick Tip'
            ,leaf:true
            }]
            },{
            text:'Leaf 1'
            ,qtip:'Leaf 1 Quick Tip'
            ,leaf:true
            }]},
    loader:new Ext.tree.TreeLoader({preloadChildren:true}),
    enableDD:true,
    ddGroup:'grid2tree',
    id:'tree',
    region:'east',
    title:'Tree',
    layout:'fit',
    width:300,
    split:true,
    collapsible:true,
    autoScroll:true,
    listeners:{
    // create nodes based on data from grid
    beforenodedrop:{fn:function(e) {
    // e.data.selections is the array of selected records
    if(Ext.isArray(e.data.selections)) {

    // reset cancel flag
    e.cancel = false;

    // setup dropNode (it can be array of nodes)
    e.dropNode = [];
    var r;
    for(var i = 0; i < e.data.selections.length; i++) {

    // get record from selectons
    r = e.data.selections[i];

    // create node from record data
    e.dropNode.push(this.loader.createNode({
    text:r.get('PART_ITE_ID')
    ,leaf:true
    ,IS_EDITABLE:r.get('IS_EDITABLE')
    ,IS_VISIBLE:r.get('IS_VISIBLE')
    }));
    }

    // we want Ext to complete the drop, thus return true
    return true;
    }

    // if we get here the drop is automatically cancelled by Ext
    }}
    }
});

// Stücklisten Container
var itemPartList = new Ext.Container({
    id: 'itemPartList',
    title: 'Stücklisten',
    border:false,
    layout:'border',
    items:[CheckTree, {
    xtype:'examplegrid'
    ,id:'SLgrid'
    ,title:'Grid'
    ,region:'center'
    ,layout:'fit'
    ,enableDragDrop:true
    ,ddGroup:'grid2tree'
    ,listeners: {
        afterrender: {
            fn: function() {
                // This will make sure we only drop to the view scroller element
                SLGridDropTargetEl2 = Ext.getCmp('SLgrid').getView().scroller.dom;
                SLGridDropTarget2 = new Ext.dd.DropTarget(SLGridDropTargetEl2, {
                        ddGroup    : 'grid2tree',
                        notifyDrop : function(ddSource, e, data){
                                var records =  ddSource.dragData.selections;
                                Ext.each(records, ddSource.grid.store.remove,  
ddSource.grid.store);
                                Ext.getCmp('SLgrid').store.add(records);
                                return true
                        }
                });
            }
        }
    }
    }]
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:05:45.690

您需要实现网格的 onNodeDrop 事件。请参阅[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.header.DropZone-method-onNodeDrop](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.header.DropZone-method-onNodeDrop)

# c# - xls-xml 文件到 CSV

> ID：13045453
> 
> 赞同：0
> 
> 时间：2012-10-24T08:29:11.363
> 
> 标签：c#, xml, excel

我有一个从黑盒系统收到的文件，该文件以某种方式在 xml 和 excel 之间混合，当我用 excel 打开文件时，我首先收到一条警告消息，如果我用文本编辑器打开它，则以下 xml 头是：

```
<?xml version="1.0" encoding="UTF-8"?>
    <?mso-application progid="Excel.Sheet"?>
    <Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
        xmlns:o="urn:schemas-microsoft-com:office:office"
        xmlns:x="urn:schemas-microsoft-com:office:excel"
        xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
        xmlns:html="http://www.w3.org/TR/REC-html40">

        <Styles>

                <Style ss:ID="Default">
                    <Alignment ss:Horizontal="Left" ss:Vertical="Bottom" />
                    <Borders/>
                    <Font/>
                    <Interior/>
                    <NumberFormat/>
                    <Protection/>
                </Style>
                <Style ss:ID="sHeader">
                    <Alignment ss:Horizontal="Left" ss:Vertical="Bottom" />
                    <Font ss:Bold="1"/>
                    <NumberFormat ss:Format="@"/>
                </Style> 
```

我尝试了许多解决方案，包括（首先尝试将文件导入 DataGridView 然后将其导出到 csv 但是我总是得到无法识别的数据库格式

首先，这是什么xls和xml文件混合的？我怎样才能删除所有这些头部信息并只拥有一个简单的 csv 文件？

更新：我找到了一种从这个 excel-XML 文件加载数据的方法，但是我在一列中收到所有数据

这是我使用的代码：

```
 XmlDocument xml = new XmlDocument();
            string filePath = @"C:\temp\test.xml";
            xml.Load(filePath);
            XmlNamespaceManager nsmgr = new XmlNamespaceManager(xml.NameTable);
            nsmgr.AddNamespace("ss", "urn:schemas-microsoft-com:office:spreadsheet");
            XmlElement root = xml.DocumentElement;
            XmlNodeList nodeList = root.SelectNodes("//ss:Data", nsmgr);
            dataGridView1.DataSource= ConvertXmlNodeListToDataTable(nodeList);

public static DataTable ConvertXmlNodeListToDataTable(XmlNodeList xnl)
        {

            DataTable dt = new DataTable();

            int TempColumn = 0;

            foreach (XmlNode node in xnl.Item(0).ChildNodes)
            {

                TempColumn++;

                DataColumn dc = new DataColumn(node.Name, System.Type.GetType("System.String"));

                if (dt.Columns.Contains(node.Name))
                {

                    dt.Columns.Add(dc.ColumnName = dc.ColumnName + TempColumn.ToString());

                }

                else
                {

                    dt.Columns.Add(dc);

                }

            }

            int ColumnsCount = dt.Columns.Count;
            for (int i = 0; i < xnl.Count; i++)
            {

                DataRow dr = dt.NewRow();

                for (int j = 0; j < ColumnsCount; j++)
                {

                    dr[j] = xnl.Item(i).ChildNodes[j].InnerText;

                }

                dt.Rows.Add(dr);

            }

            return dt;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:10:44.937

我找到了一个解决方案：

使用microsoft名称空间加载xls-xml文件获取xmlNodeList

**请注意，在我所在的地区，我们使用分号作为分隔符**

```
public static XmlNodeList ParseExcelEXMLFormat(string filePath)
   {
       try
       {

            XmlDocument xml = new XmlDocument();
            xml.Load(filePath);
            XmlNamespaceManager nsSchema = new XmlNamespaceManager(xml.NameTable);
            nsSchema.AddNamespace("ss", "urn:schemas-microsoft-com:office:spreadsheet");
            XmlElement root = xml.DocumentElement;
            XmlNodeList nodeList = root.SelectNodes("//ss:Data", nsSchema);
            return nodeList;
       }
       catch (Exception)
       {

           throw;
       }
   } 
```

然后将 XmlNodeList 转换为 StringBuilder

```
 public static StringBuilder XMLNodeListToStringBuilderConverter(XmlNodeList xmlNodeList, string separator)
   {
       try
       {
           StringBuilder sb = new StringBuilder();
           DataTable dt = new DataTable();
           foreach (XmlNode node in xmlNodeList.Item(0).ChildNodes) 
           {
               DataColumn dc = new DataColumn(node.FirstChild.InnerText, System.Type.GetType("System.String"));
               dt.Columns.Add(dc);
           }

           int ColumnsCount = dt.Columns.Count;

           string[] columnNames = dt.Columns.Cast<DataColumn>().
                                             Select(column => column.ColumnName).
                                             ToArray();
           sb.AppendLine(string.Join(separator, columnNames));

           string[] rows = new string[ColumnsCount];

           for (int i = 1; i < xmlNodeList.Count; i++) // loop through rows
           {
               for (int j = 0; j < ColumnsCount; j++) // loop through columns
               {

                   rows[j] = xmlNodeList.Item(i).ChildNodes[j].InnerText.Replace(separator, ",").Replace("\r\n", " ").Replace("\n", " ").Replace("\r", " "); // remove seperator from original text, it will casue problem 

               }
               sb.AppendLine(string.Join(separator, rows));
               Array.Clear(rows, 0, ColumnsCount);
           }

           return sb;
       }
       catch (Exception)
       {

           throw;
       }
   } 
```

# c++ - 如何将所有目标文件放入目录

> ID：13045457
> 
> 赞同：0
> 
> 时间：2012-10-24T08:29:22.543
> 
> 标签：c++, makefile

我有一个生成这么多目标文件的 Makefile - .o - 。如何将它们重定向到一个目录，然后从该目录创建可执行文件？

```
 Makefile format :

 x.o = x.hpp x.cpp
      g++ -c x.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:37:26.980

好吧，这似乎很容易：

```
app: bin/x.o
    g++ bin/x.o -obin/x

bin/x.o: x.cpp
    g++ -c x.cpp -obin/x.o 
```

您需要创建 bin 目录，但您也可以轻松地将其添加到 Makefile。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:37:04.330

检查`-o`g++ 的选项，它也应该在只创建目标文件时工作，例如：

```
g++ -c x.cpp -o objdir/x.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:37:28.123

使用这样的规则：

```
%.o: %.cpp $(HPP_FILES) Makefile
        $(CC) $(CC_FLAGS) -c -o directory/$@ $< 
```

然后使用以下内容链接那里的所有文件：

```
my_binary: $(OBJ_FILES)
        $(CC) $(LD_FLAGS) -o $@ directory/$(OBJ_FILES) 
```

您可以使用简单的赋值来定义 OBJ_FILES、HPP_FILES，例如：HPP_FILES := x.hpp y.hpp 等。

# iphone - 如何在 UIView 的子类中调用 UIView 变量中的 drawrect？

> ID：13045458
> 
> 赞同：2
> 
> 时间：2012-10-24T08:29:24.233
> 
> 标签：iphone, uiview, drawrect

我创建了一个 UIView 的子类，在这个类中我声明了一个 UIView 变量。我想调用我的 UIView 变量的 DrawRect，因为现在当我调用 DrawRect 时，它会绘制我的 UIView 类，而不是 UIView 变量，我该怎么做？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:37:02.813

你不打电话`drawRect`，你打电话`setNeedsDisplay`给你的子视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T08:39:22.360

您有一个 UIViewCustomClass ，其中还有一个 UIView ？像这样的东西：

```
@interface MyView : UIView
{
  AnotherView *aView;
} 
```

这是正确的 ？

因此，如果要重绘“aView”变量，则必须覆盖 MyView 类中的 setNeedsDisplay 方法：

。H

```
@interface MyView : UIView
{
      AnotherView *aView;
}

- (void)setNeedsDisplay;
-(void) drawRect:(CGRect) r;

@end 
```

.m

```
@implementation MyView

- (void)setNeedsDisplay
{
  [super setNeedsDisplay];
  [aView setNeedsDisplay];
}

-(void) drawRect:(CGRect) rect
{
  //Do your own custom drawing for the current view
}

@end 
```

**编辑：** 在这里，aView 也是一个自定义类（AnotherView 的类型），因此您可以像我们之前对 MyViewClass 所做的那样覆盖 draw rect 方法：

在另一个视图.m 中：

```
@implemetation AnotherView

-(void) drawRect:(CGRect) rect
{
  //Do drawing for your aView variable ;)
}

@end 
```

根据苹果指南，您永远不要直接调用 drawRect （参见[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/drawRect%3a)）

# google-maps - 仅自动完成位置，没有单选按钮

> ID：13045459
> 
> 赞同：1
> 
> 时间：2012-10-24T08:29:26.857
> 
> 标签：google-maps, google-maps-api-3, autocomplete

我从我的一位同事那里找到了一个脚本。

我想要的只是从谷歌地图中自动完成美国和加拿大的位置。我看到我无法在其中添加多个国家/地区，`componentRestrictions`但是，如果您知道一种解决方法，那也会有很大帮助。

我在这里的脚本是：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Places Autocomplete</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <style>
      body {
        font-family: sans-serif;
        font-size: 14px;
      }
      #map_canvas {
        height: 400px;
        width: 600px;
        margin-top: 0.6em;
      }
      input {
        border: 1px solid  rgba(0, 0, 0, 0.5);
      }
      input.notfound {
        border: 2px solid  rgba(255, 0, 0, 0.4);
      }
    </style>
    <script>
      function initialize() {
        var input = document.getElementById('searchTextField');
        var options = {
            types: ['(cities)'],
            componentRestrictions: {country: 'us'}
        };

        var autocomplete = new google.maps.places.Autocomplete(input, options);

        // Sets a listener on a radio button to change the filter type on Places
        // Autocomplete.
        function setupClickListener(id, types) {
          var radioButton = document.getElementById(id);
          google.maps.event.addDomListener(radioButton, 'click', function() {
            autocomplete.setTypes(types);
          });
        }

        setupClickListener('changetype-all', []);
        setupClickListener('changetype-establishment', ['establishment']);
        setupClickListener('changetype-geocode', ['geocode']);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div>
      <input id="searchTextField" type="text" size="50">
      <input type="radio" name="type" id="changetype-all" checked="checked">
      <label for="changetype-all">All</label>

      <input type="radio" name="type" id="changetype-establishment">
      <label for="changetype-establishment">Establishments</label>

      <input type="radio" name="type" id="changetype-geocode">
      <label for="changetype-geocode">Geocodes</lable>
    </div>
  </body>
</html> 
```

这个脚本有效！但是，问题是，我不想要单选按钮，当我删除它们和相关脚本时，它完全停止工作！

我只想自动完成，周围没有其他任何东西。同样，这个脚本不是我写的。

编辑：

我的问题与[https://gis.stackexchange.com/questions/31916/i-am-trying-to-put-autocomplete-of-google-api-v3-for-places-but-giving-some-err](https://gis.stackexchange.com/questions/31916/i-am-trying-to-put-autocomplete-of-google-api-v3-for-places-but-giving-some-err)有关 谷歌给了我……虽然那个小伙子也在苦苦挣扎:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-08T17:49:50.637

2017 年 1 月，Maps JavaScript API 3.27 版中引入了多个国家/地区过滤器：

> 您现在可以将自动完成预测限制为仅来自多个国家/地区的显示。您可以通过在 AutocompleteOptions 的 componentRestrictions 字段中指定最多 5 个国家来做到这一点。

[https://developers.google.com/maps/documentation/javascript/releases](https://developers.google.com/maps/documentation/javascript/releases)

[https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions](https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions)

看看这个例子： http: [//jsbin.com/ramgi/edit ?html,output](http://jsbin.com/ramagi/edit?html,output)

```
 var G = google.maps;
    var chicago = new G.LatLng(41.850033, -87.6500523);
    var infowindow = new G.InfoWindow();
    var marker;

      function initialize() {
      var mapOptions = {
          center: chicago,
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);
        marker = new G.Marker({map:map});

        var input = document.getElementById('searchTextField');
        var options = {
            types: ['(cities)'],
            componentRestrictions: {country: ['us', 'ca']}
        };

        var autocomplete = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
          infowindow.close();
          var place = autocomplete.getPlace();
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
          }

          var image = new google.maps.MarkerImage(
              place.icon,
              new google.maps.Size(71, 71),
              new google.maps.Point(0, 0),
              new google.maps.Point(17, 34),
              new google.maps.Size(35, 35));
          marker.setIcon(image);
          marker.setPosition(place.geometry.location);

          var address = '';
          if (place.address_components) {
            address = [(place.address_components[0] &&
                        place.address_components[0].short_name || ''),
                       (place.address_components[1] &&
                        place.address_components[1].short_name || ''),
                       (place.address_components[2] &&
                        place.address_components[2].short_name || '')
                      ].join(' ');
          }

          infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
          infowindow.open(map, marker);
        });
        }

      google.maps.event.addDomListener(window, 'load', initialize);
```

```
body {
        font-family: sans-serif;
        font-size: 14px;
      }
      #map_canvas {
        height: 400px;
        width: 600px;
        margin-top: 0.6em;
      }
      input {
        border: 1px solid  rgba(0, 0, 0, 0.5);
      }
      input.notfound {
        border: 2px solid  rgba(255, 0, 0, 0.4);
      }
```

```
<div>
      <input id="searchTextField" type="text" size="50">
      <div id="map_canvas"></div>
</div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDztlrk_3CnzGHo7CFvLFqE_2bUKEq1JEU&libraries=places"></script>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:46:01.597

我所要做的就是一一删除行...我注意到，我删除了多余的 } 直到 Chrome 控制台告诉我！简单的解决方案。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Places Autocomplete</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <style>
      body {
        font-family: sans-serif;
        font-size: 14px;
      }
      #map_canvas {
        height: 400px;
        width: 600px;
        margin-top: 0.6em;
      }
      input {
        border: 1px solid  rgba(0, 0, 0, 0.5);
      }
      input.notfound {
        border: 2px solid  rgba(255, 0, 0, 0.4);
      }
    </style>
    <script>
      function initialize() {
        var input = document.getElementById('searchTextField');
        var options = {
            componentRestrictions: {country: 'us'}
        };
        var autocomplete = new google.maps.places.Autocomplete(input, options);
}

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
<form method = "POST">
    <div>
      <input id="searchTextField" type="text" size="50" name="location">
    </div>
<input type = "submit" />
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:39:03.720

如果您不想要任何单选按钮，只需将它们替换为 ，如下所示：

```
<div name="type" id="changetype-all" checked="checked"></div>
<label for="changetype-all">All</label>

<div name="type" id="changetype-establishment"></div>
<label for="changetype-establishment">Establishments</label>

<div name="type" id="changetype-geocode"></div>
<label for="changetype-geocode">Geocodes</lable> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:55:29.597

复制+粘贴服务（[**此处为现场演示**](http://maps.forum.nu/v3/ac.html)。）：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Places Autocomplete</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <style>
      body {
        font-family: sans-serif;
        font-size: 14px;
      }
      #map_canvas {
        height: 400px;
        width: 600px;
        margin-top: 0.6em;
      }
      input {
        border: 1px solid  rgba(0, 0, 0, 0.5);
      }
      input.notfound {
        border: 2px solid  rgba(255, 0, 0, 0.4);
      }
    </style>
    <script>
    var G = google.maps;
    var chicago = new G.LatLng(41.850033, -87.6500523);
    var infowindow = new G.InfoWindow();
    var marker;

      function initialize() {
      var mapOptions = {
          center: chicago,
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);
        marker = new G.Marker({map:map});

        var input = document.getElementById('searchTextField');
        var options = {
            types: ['(cities)'],
            componentRestrictions: {country: 'us'}
        };

        var autocomplete = new google.maps.places.Autocomplete(input, options);

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
          infowindow.close();
          var place = autocomplete.getPlace();
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
          }

          var image = new google.maps.MarkerImage(
              place.icon,
              new google.maps.Size(71, 71),
              new google.maps.Point(0, 0),
              new google.maps.Point(17, 34),
              new google.maps.Size(35, 35));
          marker.setIcon(image);
          marker.setPosition(place.geometry.location);

          var address = '';
          if (place.address_components) {
            address = [(place.address_components[0] &&
                        place.address_components[0].short_name || ''),
                       (place.address_components[1] &&
                        place.address_components[1].short_name || ''),
                       (place.address_components[2] &&
                        place.address_components[2].short_name || '')
                      ].join(' ');
          }

          infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
          infowindow.open(map, marker);
        });
        }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div>
      <input id="searchTextField" type="text" size="50">
      <div id="map_canvas"></div>
    </div>
  </body>
</html> 
```

# payment-gateway - 2checkout 的 Opencart 货币

> ID：13045460
> 
> 赞同：0
> 
> 时间：2012-10-24T08:29:36.220
> 
> 标签：payment-gateway, currency, opencart, 2checkout

该网站是在 opencart 中开发的，该网站包含 2checkout 支付网关不支持的本地货币 (LKR) 产品。我想将支付网关的产品价格转换为美元，并且我想以当地货币 (LKR) 维持网站上显示的价格

是否可以使用不同的货币进行显示和支付网关？请建议我解决此问题的扩展程序/方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:24:32.363

最后，我想出了一种使用开放式购物车货币类进行转换的方法。我在下面提到了我为解决这个问题所做的工作。

1.  我在 opencart 的管理面板中创建了美元货币并将其作为子货币。（它会自动更新转换率）
2.  在 opencart 支付控制器（catalog\controller\payment\twocheckout.php）中，我做了以下更改

后`$order_info = $this->model_checkout_order->getOrder($this->session->data['order_id']);`

行添加以下代码

```
$order_info['currency_code'] = 'USD'; 
```

还更改了以下行

```
$this->data['total'] = $this->currency->format($order_info['total'], $order_info['currency_code'], $order_info['currency_value'], false); 
```

到

```
$this->data['total'] = $this->currency->format($order_info['total'], $order_info['currency_code'],'', false); 
```

并且还更改了以下行

```
'price'       => $this->currency->format($product['price'], $order_info['currency_code'], $order_info['currency_value'], false); 
```

到

```
'price'       => $this->currency->format($product['price'], $order_info['currency_code'], '', false); 
```

更改这两条线后，它运行良好，货币值更改为美元，转换值也正确。

我希望这对任何使用 opencart 货币有问题的人有用。

# php - 如果使用来自 $_POST 的数据，SQLite UPDATE 提交空数据

> ID：13045468
> 
> 赞同：2
> 
> 时间：2012-10-24T08:30:17.063
> 
> 标签：php, sqlite, post, null

我正在尝试使用 SQLite 更新 PHP 中的表。我的代码如下：

```
//Get params like this
$title = $_POST['title'];
...
$params = array($visible, $link, $title, $post, $month, $day, $year, $sub3);
$query = "UPDATE posts SET visible = ?, link = ?, title = ?, entries = ?, month = ?, day = ?, year = ? WHERE id = ?; COMMIT;";
$stmt = $db->prepare($query);
$result = $stmt->execute($params); 
```

如果我从 $_POST 获取值，那么当它在语句上执行时，99% 的时间会在字段中更新空值而不是 $_POST 数据（$sub3 不是来自 $_POST）。

如果我对这些值进行硬编码，它可以正常工作。我在同一代码路径中也有一个插入语句（首先检查它是否是新数据，如果不是则执行 INSERT）。每次插入都可以正常工作（来自 $_POST 的数据）。

此外，我为其他三个表提供了这样的代码，所有这些表都有效。这是唯一没有的表。与其他人相比，桌子的设置没有什么不同。

这个适用于另一张桌子：

```
$params = array($name, $username, $email, $level, $sub3);
$query = "UPDATE users SET name = ?, username = ?, email = ?, level = ? WHERE id = ?; COMMIT;";
$stmt = $db->prepare($query);
$result = $stmt->execute($params); 
```

我已经尝试过 bindParam、bindValue 并在没有准备的情况下手动创建语句字符串，但只要它来自 $_POST，它就行不通。

我错过了什么？还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:37:22.323

打印 POST 变量并检查它是否有正确的数据。

```
print_r($_POST); 
```

编辑：更改查询。

```
//$params = array($visible, $link, $title, $post, $month, $day, $year, $sub3);
$query = "UPDATE posts SET visible = '$visible', link = '$link', title = '$title', entries = '$entries', month = '$month', day = '$day', year = '$year' WHERE id = $id;  COMMIT;"; 
```

确保你有正确的 $id

# c# - 在 IEnumerable 上找不到查询模式的实现

> ID：13045470
> 
> 赞同：1
> 
> 时间：2012-10-24T08:30:24.063
> 
> 标签：c#, linq, compiler-errors, ienumerable

我有一个`IEnumerable<T>`方法的参数，其中`T`是结构类型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using ...

public static class Foo
{
    internal struct CellDiff
    {
        public int RefX;
        public int RefY;
        public object OldValue;
        public object NewValue;
    }

    private static void ItemChanged(IEnumerable<CellDiff> diffs, int cellX, int cellY)
    {
        var change = from CellDiff diff in diffs
                     where diff.RefX == cellX && diff.RefY == cellY
                     select diff;

        ...
    }
} 
```

这会导致以下错误：

> （范围）`IEnumerable<CellDiff> diffs`
> 
> 错误：
> 找不到源类型“ `CellDiff`”的查询模式的实现。' `Where`' 未找到。

我也试过做`diffs.AsQueryable()`，无济于事。

我通常在`IEnumerable<T>`. 我对这里发生的事情有点迷茫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:44:05.037

在 LINQ 查询语法中指定类型会`Cast`使用该类型参数创建对扩展方法的调用。

你有自己`Cast`定义的地方吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:34:49.977

您需要更改查询，更新的查询是这样的

```
 var change = from diff in diffs //changed like removed "CellDiff" from this
                     where diff.RefX == cellX && diff.RefY == cellY
                     select diff; 
```

在你的查询中不需要`CellDiff` after from

# f# - 如何在 Mac 上的 Mono 3.0 上构建 WebSharper？

> ID：13045475
> 
> 赞同：3
> 
> 时间：2012-10-24T08:30:37.490
> 
> 标签：f#, mono, xbuild, websharper

WebSharper 看起来很有趣，而 Mono 3.0 刚刚推出了 F# 3.0。显然 xbuild 可以构建一些 MSBuild 项目。由于 FSharpHome 不清楚，直接尝试在单声道上构建 WebSharper 克隆失败。有什么好的方法来定义它和其他可以进一步尝试的东西？

# jquery - 让 JQuery 在页面加载时加载元素

> ID：13045480
> 
> 赞同：0
> 
> 时间：2012-10-24T08:30:48.477
> 
> 标签：jquery, modal-dialog

我需要在页面加载后显示我的模式弹出窗口，目前它没有显示（仅当我单击“查看”链接时）。有人可以告诉我如何做到这一点吗？

这是我的 jQuery ：

```
$(function() {
     $('#dialog').jqm();
}); 
```

执行此操作的链接是：

```
 <a href="#" class="jqModal">view</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:34:22.410

使用 jqueryUI 对话框。

然后从那里您只能执行以下操作：

```
$(function() {
    $( "#dialog" ).dialog();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:36:30.993

尝试[jqueryUI 对话框](http://docs.jquery.com/UI/Dialog)：

```
<html>
<head>
<script type="text/javascript" language="javascript"
        src="jquery/jquery.js"></script>
<script type="text/javascript" language="javascript"
        src="jquery/jquery.ui.js"></script>
<script type="text/javascript" language="javascript">
    $(document).ready(function(){
        $("#dialog").dialog({modal: true});
    });
</script>
</head>
<body>
    <div id="dialog" class="jqModal" title="This is my title">
        I'm in a dialog!
    </div>
</body>
</html> 
```

**更新：** 这个[jsfiddle](http://jsfiddle.net/chridam/bdsCt/)包含一个覆盖的例子

# c# - 从 SQL Server 中的表“流式”读取超过 1000 万行

> ID：13045481
> 
> 赞同：4
> 
> 时间：2012-10-24T08:30:48.843
> 
> 标签：c#, sql-server, sql-server-2012

以流方式（如 SQL Server Management Studio 所做的）从表（在 SQL Server 2012，BI 实例中）读取数百万条记录的最佳策略是什么？

我需要在本地缓存这些记录（C# 控制台应用程序）以进行进一步处理。

**更新**- 与 SqlDataReader 一起使用的示例代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;
using System.Data.SqlClient;
using System.Threading;

namespace ReadMillionsOfRows
{
    class Program
    {
        static ManualResetEvent done = new ManualResetEvent(false);

        static void Main(string[] args)
        {

          Process();
          done.WaitOne();
        }

        public static async Task Process()
        {
            string connString = @"Server=;Database=;User Id=;Password=;Asynchronous Processing=True";
            string sql = "Select * from tab_abc";

            using (SqlConnection conn = new SqlConnection(connString))
            {
                await conn.OpenAsync();
                using (SqlCommand comm = new SqlCommand(sql))
                {
                    comm.Connection = conn;
                    comm.CommandType = CommandType.Text;

                    using (SqlDataReader reader = await comm.ExecuteReaderAsync())
                    {
                        while (await reader.ReadAsync())
                        {
                            //process it here
                        }
                    }
                }
            }

            done.Set();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:32:30.480

使用 SqlDataReader 它只向前且快速。它只会在读取范围内保存对记录的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:36:41.560

这取决于您的缓存是什么样的。如果您要将所有内容存储在内存中，并且 DataSet 适合用作缓存，则只需将所有内容都读取到 DataSet 中。

如果没有，请`SqlDataReader`按照上面的建议使用，将记录一一读取，将它们存储在您的大缓存中。

但是请注意，对于大型数据库表 - 您的数据库，已经有一种非常流行的缓存机制。使用正确的索引配置，数据库可能会胜过您的缓存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T08:41:07.383

您可以使用 Entity Framework 并使用`Take`和对选择进行分页，`Skip`以通过缓冲区获取行。如果您需要对如此大的数据集进行内存缓存，我建议您使用`GC.GetTotalMemory`它来测试是否还有可用内存。

# c++ - 用浮点数除法

> ID：13045485
> 
> 赞同：1
> 
> 时间：2012-10-24T08:31:01.300
> 
> 标签：c++, visual-studio-2008, division

我对双精度和浮点除法的精度和速度有疑问。

例如：

```
double a;
a=myfun(); //returns a number with lots of decimals
float b=5.0;
double result=a/b; 
```

如果 b 是双倍的，结果会改变吗？如果它们不是双精度数，是否需要更多时间来计算（因为更改了浮点数的大小以适应双精度数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:36:19.367

从 float 到 double 或 double 到 float 的转换时间差真的可以忽略不计

查看此[链接](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，它肯定会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:34:44.503

> 如果 b 是双倍的，结果会改变吗？

由于该值为 0.5，因此结果不应改变。如果它是一个不同的值，它可能会改变，因为双精度比浮点精度更高。

> 如果它们不是双打，是否需要更多时间来计算？

是的，它确实。但是从 float 转换为 double 的时间真的可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:33:45.423

你试过这样做吗？`double`b无论如何都会在除法期间转换为。浮点除法很昂贵，浮点除法所需的时间稍快。

# trigger.io - trigger.io 是否支持黑莓？

> ID：13045494
> 
> 赞同：2
> 
> 时间：2012-10-24T08:31:24.950
> 
> 标签：trigger.io

trigger.io 是否支持黑莓？如果没有，是否有任何计划支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:57:53.147

在移动方面，他们目前支持：

*   **iOS 4+**（iPhone 和 iPad）
*   **安卓2.0+**
*   **视窗电话***

我不知道他们是否计划支持黑莓，因为没有公开路线图之类的东西。

*不确定最低版本

来源：[https](https://trigger.io/pricing/) ://trigger.io/pricing/ （参见“Go Pro”计划中的“所有平台”）

# ios - 订阅产品不可恢复，为什么 Apple 要求我设置恢复按钮？

> ID：13045497
> 
> 赞同：0
> 
> 时间：2012-10-24T08:31:45.923
> 
> 标签：ios, app-store, in-app-purchase, appstore-approval

我不明白苹果指南。我创建了一个具有免费和高级功能的应用程序。

默认情况下，该应用程序安装了免费功能，我提供了购买按钮，以便用户可以使用应用程序内购买功能购买该应用程序的高级功能。

订阅期限为 3 个月，不可续订。

我将应用程序提交到 App Store，但苹果要求我在应用程序中放置一个恢复按钮，以便用户可以恢复他们之前的购买。

另一方面，苹果文档中写道，您无法恢复基于订阅的应用程序。

对我来说似乎很困惑，请您指导在这件事上该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:35:09.493

有两种可能：

1) 您不知道您的某些购买是可恢复的。

2) Apple 不知道您的所有购买都是不可恢复的。

跟进苹果。

**编辑**以上是错误的。您需要在没有他们支持的情况下*自行*恢复购买，因为您选择不使用自动续订。来自[IAP 指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html)

> 您需要为用户拥有的所有设备提供非续订订阅。Store Kit 不会自动将非续订订阅同步到所有设备；你必须自己实现这个基础设施。例如，大多数订阅是由外部服务器提供的；您的服务器将需要实施一种机制来识别用户并将订阅购买与购买它们的用户相关联。

# javascript - HTML/JS 分页？

> ID：13045498
> 
> 赞同：1
> 
> 时间：2012-10-24T08:31:49.637
> 
> 标签：javascript, jquery, html, css, pagination

> **可能重复：**
> [jQuery 分页插件](https://stackoverflow.com/questions/1523163/jquery-pagination-plugin)

我正在尝试在我的网站上添加某种分页：[www.metallica-gr.net](http://metallica-gr.net)，尽管我尝试了一些 jquery，但我很难理解如何在我的网站上实现它。

这是我的网站的构建方式以及文章的显示方式。是否可以为此进行分页？

[http://imageshack.us/a/img268/249/paginationq.jpg](http://imageshack.us/a/img268/249/paginationq.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:36:06.370

如果您只有一堆静态文件，那么您最好自己创建链接。我认为这些类型的东西对动态网站更有用。有这种效果。

```
<html>
<head>
<script type="text/javascript">

var baseUrl="www.mysite.com?page=";

var forwardLinkId ="fwdLink";

var backwardLinkId = "bwdLink";

function SetForwardUrl(forwardLink)
{
  var page = gup(pageNumber)

  var fwd = document.getElementById(forwardLink);
  var fwd.href = baseUrl + (page.ToNumber() + 1);
}

function SetBackworddUrl(backwordLink)
{
   var page = gup(pageNumber)

  var bwd = document.getElementById(backwordLink);
  var bwd .href = baseUrl + (page.ToNumber() - 1);
}

function gup(name)
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
}

document.onload = function() { 
SetForwardUrl(fwdLink); 
SetBackwardUrl(bwdLink);
}

</script>
</head>
<body>
<a id="fwdLink" /> <a id="bwdLink" /> 
</body>
</html> 
```

# entity-framework - 使用 DbContext 测试存储库 - 关于 IDbSet 的模拟问题

> ID：13045499
> 
> 赞同：1
> 
> 时间：2012-10-24T08:31:52.300
> 
> 标签：entity-framework, unit-testing, mocking, tdd

我正在尝试测试使用 DbContext 的存储库

我遇到的问题是 DbCONtext 想要为某些类型返回 DbSet

我什至不能模拟 IDbSet 因为它有一个 PRIVATE CTOR?!?!?!

每个人都如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:21:00.930

您需要使用适配器或包装器。DbContext 是第三方代码。你的代码应该把它隐藏在一个抽象后面，记住这只是一个关于你的系统内部如何工作的实现细节。您应该可以随时更改此设置。

```
public class ThatsHardToTest
{
    // Private constructors, slow start up time etc...

    public int AlwaysReturnOneExceptInSuperRareScnearios()
    {
        // Complex logic.
        return 1;
    }
} 
```

现在如果我们想在上述方法出错时测试我们的代码，例如数据库系统离线。我不希望测试命中数据库，所以我们需要一个围绕这个第三方代码的适配器。我要么做一个接口，要么做一个基类。

```
public class MyTestAdapter : IExampleAdapter
{
    public int ReturnWhateverIWant()
    {
        return -1;
    }
} 
```

我将用于`MyTestAdapter`对我的代码进行单元测试，因为我可以控制它的作用。对于生产代码，您只需将其替换为委托给实际生产系统的适配器即可。例如：

```
public class MyRealAdapter : IExampleAdapter
{
    public int ReturnWhateverIWant()
    {
        return new ThatsHardToTest().AlwaysReturnOneExceptInSuperRareScnearios();
    }
} 
```

# ios - 基于应用内购买的专业帐户升级

> ID：13045500
> 
> 赞同：0
> 
> 时间：2012-10-24T08:31:54.877
> 
> 标签：ios, iphone, mobile

我想将我的 iOS 应用从付费应用更改为应用内购买。

我希望能够做到以下几点：

o 从应用程序内购买 X 个月的 Pro 帐户状态 o 在我们的网站上购买 Pro 帐户状态 o 从我们的系统将用户升级为 Pro 帐户状态用户

您认为哪种应用内购买类型最好 - 非续订或“非消耗性”？

在指南中它说“ 11.1 使用 App Store 以外的机制解锁或启用附加特性或功能的应用程序将被拒绝。11.2 使用应用程序内购买 API (IAP) 以外的系统来购买内容、功能或应用程序中的服务将被拒绝。”

在我们的网站上启用购买专业帐户状态或系统升级是否与 11.1+11.2 中提到的相矛盾？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:42:42.867

苹果在他们的指导方针中所说的是“你不能通过应用商店购买以外的方式获得应用功能的付款”。

如果您打算使用任何支付网关方法来获得付款，那么您将解锁您的应用程序的高级功能。Apple 将立即拒绝您的应用程序。

但是，您有 3 个选择：

非消耗品：只需支付一次（如果您想要免费升级产品，请使用此选项） 消耗品：为每次下载付费订阅：定期付款

希望能帮助到你 ：）

# asp-classic - 经典asp中的PDF保护和SEO

> ID：13045503
> 
> 赞同：0
> 
> 时间：2012-10-24T08:32:28.887
> 
> 标签：asp-classic, seo

我有一个经典的 asp 网站，我在那里销售 pdf。Ocne 用户付费，我给他们一个下载 pdf 的链接，如下所示：

[https://mysite.com/products/ebook/mypdf.pdf](https://mysite.com/products/ebook/mypdf.pdf)

我想保护它免受（1）搜索引擎索引（2）人们直接访问它而不购买它。

我该怎么做？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:47:32.197

您必须提供额外的 ASP 页面，例如 getpdf.asp 来下载内容。

请参阅此答案，这涵盖了您需要的大部分内容： [https ://stackoverflow.com/a/12946733/911635](https://stackoverflow.com/a/12946733/911635)

您必须添加一些访问控制来检查当前用户是否有权访问该文件。

# c# - 从磁盘加载 XML 时出现 System.UnauthorizedAccessException

> ID：13045504
> 
> 赞同：0
> 
> 时间：2012-10-24T08:32:28.517
> 
> 标签：c#, windows-8, microsoft-metro, linq-to-xml

我正在开发 Windows 8 XAML/C# 商店应用程序。我试图在应用程序的生命周期内多次加载`Windows.Storage.ApplicationData.Current.LocalFolder`XML `XDocument`。`System.UnauthorizedAccessException`但是，当我尝试加载文件时收到。这是我的方法：

要添加到 XML：

```
private async void AddCategoryButton_Click(object sender, RoutedEventArgs e)
{
    XDocument CategoryListXDoc = await LoadXmlFromLocalFolderAsync("Categories.xml");
    CategoryListXDoc.Element("CategoryList").Add(
        new XElement("Category", new XAttribute("Id", Guid.NewGuid()), AddCategoryTextBox.Text));
    SaveXDocToLocalFolderAsync("Categories.xml", CategoryListXDoc);
} 
```

仅用于调试目的：

```
private async void Button_Click_2(object sender, RoutedEventArgs e)
{
    XDocument TempXDoc = await LoadXmlFromLocalFolderAsync("Categories.xml");
    Debug.WriteLine(TempXDoc);
} 
```

加载和保存方法：

```
private async Task<XDocument> LoadXmlFromLocalFolderAsync(string FileName)
{
    var LocalFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
    StorageFile CategoryListFile = await LocalFolder.GetFileAsync(FileName);
    var stream = await CategoryListFile.OpenStreamForReadAsync() as Stream;
    XDocument TempXDoc = XDocument.Load(stream);
    stream.Flush();
    return TempXDoc;            
}
private async void SaveXDocToLocalFolderAsync(string Filename, XDocument XDocToSave)
{
    var LocalFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
    StorageFile CategoryListFile = await LocalFolder.CreateFileAsync(Filename, CreationCollisionOption.ReplaceExisting);
    var stream = await CategoryListFile.OpenStreamForWriteAsync() as Stream;
    XDocToSave.Save(stream);
    stream.Flush();
} 
```

如果我`Click`反复触发事件，则会引发异常。没有具体的场景。有时会发生错误，有时不会。我哪里错了？我对这些东西很`async`陌生`await`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:50:59.717

您可以检查是否真的有两个线程正在尝试访问该文件。查看异常的`Message`和应该会有所帮助。`StackTrace`像

```
 Message=Invalid cross-thread access.
 StackTrace:
   at MS.Internal.XcpImports.CheckThread() 
```

应该出现在那里。

解决这个问题的方法是对该`LoadXmlFromLocalFolderAsync`方法使用锁，这样两个线程就不能同时打开文件。 [http://msdn.microsoft.com/en-us/library/a8544e2s(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/a8544e2s(v=vs.100).aspx) 还有一个好建议是始终以`try-catch-finally`块的形式管理文件。

但这有点脏。交互式应用程序的问题是不允许用户像疯了一样快速点击按钮。您应该禁用按钮功能，直到当前功能完成。想象一下，点击按钮时会发生更复杂的操作；这使得不需要使用系统资源。不行。您应该尝试使用防止双击的方法，如下所示： [http ://tgynther.blogspot.ro/2011/07/aspnet-prevent-button-double-click.html](http://tgynther.blogspot.ro/2011/07/aspnet-prevent-button-double-click.html)

# java - 可以动态绑定流中动作的工作流引擎

> ID：13045508
> 
> 赞同：1
> 
> 时间：2012-10-24T08:32:43.170
> 
> 标签：java, workflow, business-process-management

我正在尝试构建一个分布式系统。

该系统由复合服务组成。

为了平衡系统的负载，我将组合服务进行分解，并将每个服务发送到不同的服务器并并行运行。

所以我想找到一个工作流引擎，它可以为运行时的每个操作绑定 web 服务地址。

有没有可用的工作流引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T11:42:22.610

工作流引擎（或 api）与对服务的调用进行负载平衡无关（如果这样做，它会增加耦合，不是吗？），工作流应该只执行服务或外观服务，外观service 将调用各个服务，这些服务由服务器进行负载平衡。我希望它有意义。

底线是，您的基础架构团队将为负载平衡创建基础架构以及哪个服务转到哪个节点，调用这些服务是您的工作，如果需要复合服务，那么您可以选择外观将调用委托给各个服务的服务。您的工作流系统不应尝试负载平衡。

# android - 在android中关闭对话框

> ID：13045512
> 
> 赞同：1
> 
> 时间：2012-10-24T08:32:57.023
> 
> 标签：android

我在使用方法 showList 的 onCreate 方法中有一个 imageView。这是代码：

```
action_bar_log_in_icon.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) {

                                allResults.clear();
                                allResults.add(action_bar_log_in_icon);
                                allResults.add(action_bar_data_privacy_icon);
                                allResults.add(action_bar_vCard_icon);
                                allResults.add(action_bar_email_icon);
                                showList();
                            }
                        }); 
```

和代码方法showList：

```
private void showList() {
            final ListDialog listDialog = new ListDialog(this);
            listDialog.setCanceledOnTouchOutside(true);

            final ListView lv = (ListView) listDialog
                    .findViewById(R.id.spinnerlist);

            if(lAdapter == null){
                lAdapter = new ListAdapter(getBaseContext(),
                    R.layout.spinner_item,
                    (ArrayList<ImageView>) allResults);
            }

            lv.setAdapter(lAdapter);
            lv.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    switch(position){
                    case 0:
                        intent = new Intent(ActionBarMain2.this, LoginActivity.class);
                        startActivity(intent);
                        break;
                    case 1:
                        intent = new Intent(ActionBarMain2.this, LoginActivity.class);
                        startActivity(intent);
                        break;
                    case 2:
                        intent = new Intent(ActionBarMain2.this, vCard_view.class);
                        startActivity(intent);
                        break;
                    case 3:
                        intent = new Intent(ActionBarMain2.this, EmailView.class);
                        startActivity(intent);
                        break;
                    }
                    listDialog.dismiss();
                }

            });
            WindowManager.LayoutParams WMLP = listDialog.getWindow()
                    .getAttributes();
            WMLP.gravity = Gravity.TOP | Gravity.RIGHT;
            WMLP.y = 50;
            WMLP.width = 100;
            listDialog.getWindow().setAttributes(WMLP);

                listDialog.show();

        } 
```

此解决方案有效，如果我单击 imageview 我的列表将显示，但问题是当我再次单击同一个 imageview 时。列表仍然可见。当我第一次单击我的列表显示时以及当我再次单击我的列表关闭等时，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:45:15.230

如果您`ListDialog`只在 Activity 中创建一次`onCreate`但尚未显示它怎么办。然后单击您的 ImageView 即可`if(dialog.isVisible()) { dialog.show(); } else { dialog.dismiss(); }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:57:44.133

设置一些标志来捕获对话框的状态。然后在该标志上设置条件..如果它可见则设置`dismissDialog(dialogName);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:52:04.803

我找到解决我的问题。这个对话框覆盖了我的 imageView，所以我把对话框放低了一点。谢谢你的建议。

# c - C; 如果我在 while 循环内的 for 循环中放置一个 break

> ID：13045518
> 
> 赞同：5
> 
> 时间：2012-10-24T08:33:09.230
> 
> 标签：c, for-loop, while-loop, boolean, break

我在 C 中执行此操作，而不是 C++。无论如何，如果我在 for 循环中放置一个 break 语句，它会仅停止 for 循环还是同时停止 for 和 while 循环？例如，这是我的代码中带有 while 和 for 的部分。我正在做的是让用户输入一个 24 小时的时间，我正在检查这个循环中的分钟数（希望是正确的）。我担心的是break语句是否只结束for循环，或者它是否会同时结束for和while，因为我只希望for循环结束。

```
boolean check = false;
while (!check){
    int i;
            for (i = 1; i < 24; i++)
            {
                    int hour = i*100;
                    /* if the time has less hours than the hour counter*/
                    if ((hour - timeOfDay) < 100)
                    {
                    /*declare an illegal time when the number of minutes remaining*/
                    /*is greater than 59*/
                            if ((hour - timeOfDay) > 59)
                            {  
                                    check = false;
                                    break;
                            }
                    }
            }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T08:33:52.200

它只会破坏内`for`循环而不是外`while`循环。
在发布问题之前，您实际上可以使用简约的代码示例进行测试。我想这将花费与构建 Q 相同的时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T08:35:29.117

来自 C 标准：（第 6.8.6.3 节）

**约束**

break 语句应仅出现在或作为 switch 主体或循环主体出现。

**语义**

break 语句终止执行最小的封闭 switch 或迭代语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:34:12.520

如果你把它放在`for`循环中，它只会停止/中断`for`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:50:56.127

在`break`执行时，程序停止执行它下面的其他语句，`loop`并从出现的循环体之后的语句开始`break`。在这种情况下，它只会从内部`for`循环中出来。如果你想做一些演示，只需在循环`(eg printf("outside inner loop");)`的右花括号 } 之后放置一条语句。`for`然后您将看到该语句的执行。

# android - RelativeLayout 和 ViewStub 膨胀

> ID：13045531
> 
> 赞同：12
> 
> 时间：2012-10-24T08:34:00.820
> 
> 标签：android, android-relativelayout, inflate, viewstub

我有以下布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            style="@style/list_item_bottom">

    <TextView android:id="@+id/list_item_name"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"/>

    <ViewStub android:id="@+id/stub_for_alt_name"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:layout_below="@+id/list_item_name"
              android:layout="@layout/text_view_alt_name"/>

    <ImageView android:id="@+id/list_item_dopinfo1_image"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_below="@+id/stub_for_alt_name"
               android:src="@drawable/ic_released"/>

</RelativeLayout> 
```

我希望 ViewStub 低于 TextView 和 ImageView 低于 ViewStub。

ViewStub 膨胀的元素按我的预期显示。但是没有 ViewStub 的元素的 TextView 与 ImageView 重叠。

我的布局有什么问题？

**更新：**

我发现的唯一解决方案是给 ViewStub 和相关的 TextView 相同的`android:id`值。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-20T13:43:25.380

我知道这是一个老问题，但其中的技巧是将`inflatedId`参数设置为与实际 viewStub 本身相同，如下所示：

```
<ViewStub android:id="@+id/stub_for_alt_name"
          android:inflatedId="@id/stub_for_alt_name"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_below="@+id/list_item_name"
          android:layout="@layout/text_view_alt_name"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T09:13:54.147

我发现的唯一解决方案是给 ViewStub 和相关的 TextView 相同的`android:id`值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-24T20:38:07.407

这是一个老问题，但我有一个有用的补充

**1）**是的，就像其他人发布的一样 - 使用相同`id`的和`inflatedId`：

```
<ViewStub 
   android:id="@+id/view_stub_id"
   android:inflatedId="@id/view_stub_id"
   ... 
/> 
```

**2)** When you need to **inflate** view *or* **refresh** its content it's convenient to act like this:

```
 View v = parentView.findViewById(R.id.view_stub_id);
    if (v instanceof ViewStub)
        v = ((ViewStub) v).inflate();

    // here v is always the inflated view
    // ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T09:09:03.950

```
Hi you can try this one.

<RelativeLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        style="@style/list_item_bottom">

//you can add another relative layout containing your textview and imageview
  <RelativeLayout
        android:id="@+id/layout_content" 
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView android:id="@+id/list_item_name"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

         <ImageView android:id="@+id/list_item_dopinfo1_image"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/stub_for_alt_name"
             android:src="@drawable/ic_released"
             android:layout_below="@+id/list_item_name" />

</RelativeLayout>

<ViewStub android:id="@+id/stub_for_alt_name"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_below="@+id/list_item_name"
          android:layout="@layout/text_view_alt_name"
          android:layout_below="@+id/layout_content" />

</RelativeLayout> 
```

# python - 如何遍历 Django 中的所有设置？

> ID：13045533
> 
> 赞同：4
> 
> 时间：2012-10-24T08:34:03.060
> 
> 标签：python, django, django-settings

如何遍历所有 Django 设置？我需要阅读所有以`MYAPP_`.

我试过这样做：

```
from django.conf import settings

for setting in settings:
    print setting 
```

...但我得到以下异常：

```
TypeError: 'LazySettings' object is not iterable 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:48:31.577

```
for s in dir(settings):
    print s, ':', getattr(settings, s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T08:48:22.487

你应该可以调用[dir](http://docs.python.org/library/functions.html#dir)。

```
from django.conf import settings
print dir(settings) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T08:59:58.780

```
for name in filter(lambda x: x.startswith('MYAPP_'), dir(settings)):
    # ... 
```

# asp.net - 如何以编程方式设置控件的默认属性而不会使视图状态膨胀

> ID：13045536
> 
> 赞同：1
> 
> 时间：2012-10-24T08:34:15.797
> 
> 标签：asp.net, .net, webforms, viewstate

我有一个带有许多控件的页面。一些控件属性/值是从数据库加载的。其他是例如。日期组合框，数字为 1-31，年份 1900-2012 等。我想在 for 循环中填充组合框，但我注意到，如果我早在 Page_Init 就这样做，所有的值都会被输入视图状态。我不想禁用这些控件的视图状态，因为我需要它在隐藏回发时保持它们的值。

实际上，我在问 ASP.NET 如何确定控件的默认值是什么 - 如果我在标记中输入值，它不会将值放入视图状态，我想知道是否有人知道以编程方式重现该值的方法?

* * *

测试2.aspx

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="test2.aspx.vb" Inherits="test2" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="ddlTest" runat="server"></asp:DropDownList>
    </div>
    </form>
</body>
</html> 
```

* * *

test2.aspx.vb

部分类 test2 继承页面

```
Protected Sub Page_Init(sender As Object, e As EventArgs) Handles Me.Init
    If Request("addvals") IsNot Nothing Then
        For i As Integer = 0 To 1000
            ddlTest.Items.Add(i)
        Next
    End If
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:08:42.460

刚刚找到了一个副本 - 似乎不可能...... [是否可以在代码中设置 asp.net 控件属性值而不将其添加到视图状态？](https://stackoverflow.com/questions/11578713/is-it-possible-to-set-asp-net-control-property-values-in-code-behind-without-add)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:20:28.143

根据[这篇文章](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)（在重复问题中链接）您可以动态创建控件并在将其添加到控件集合之前对其进行数据绑定。如果您的数据绑定控件不使用过多的项模板（即，如果它是 DropDownList 而不是 GridView），这将是很好的。另一种选择是禁用控件上的 ViewState，并确保在 ViewState 字典中手动保存隐藏控件的状态。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T09:00:36.533

在 Init 阶段添加的值不会持久化到 ViewState（它们会添加到 ViewState StateBag，但不会标记为脏）。

如果您想在 ViewState 被跟踪时设置默认属性（例如在加载阶段或之后），如果您不希望它们被持久化到 ViewState，则在将控件添加到页面的控件树之前设置它们。例如

```
Label label1 = new Label();
label1.Text = "Some text" // Not persisted to ViewState
Page.Controls.Add(label1);

Label label2 = new Label();
Page.Controls.Add(label2);
label2.Text = "Some text" // Persisted to ViewState 
```

# qt - 使用 Qt 移动目录

> ID：13045541
> 
> 赞同：9
> 
> 时间：2012-10-24T08:34:22.987
> 
> 标签：qt, directory, move

我想移动一个目录。我选择的目录包含许多子目录和文件。

如何使用 Qt 实现相同的功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T09:01:20.873

[QDir::rename](https://doc.qt.io/qt-5/qdir.html#rename)在大多数情况下都会这样做。以下示例将 theDir incl 内容从源移动到目标：

```
QString original = "/home/test/source/theDir";
QString dest = "/home/test/temp";
QDir dir;
if( !dir.rename( original, dest ) ){
  throw Exception( "move failed" );
} 
```

# android - 通过 Internet 播放流时 MediaPlayer 错误 (1, -1004)

> ID：13045542
> 
> 赞同：3
> 
> 时间：2012-10-24T08:34:23.437
> 
> 标签：android, media-player

在我的应用程序中有一个音频播放器通过 http 协议播放一些音频文件。

问题是当程序通过局域网与服务器连接时mp3播放正常，但无法通过互联网工作并抛出异常：

```
java.io.IOException: Prepare failed.: status=0x1 
```

1.  chrome浏览器可以打开链接播放。
2.  其他服务正常。

Logcat 显示：

```
error (1, -1004) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T09:02:15.620

我遇到了同样的错误，因为我在使用 droidwall 的根设备中启用了 iptables，即 linux 防火墙。我发现如果我的应用程序被允许访问互联网但“媒体服务器”进程没有，我在“准备”期间收到 1004 错误。

如果这是您的情况，禁用 iptables 或为媒体服务器添加规则将起作用。

# validation - Struts 2 在第一页加载时跳过验证

> ID：13045546
> 
> 赞同：4
> 
> 时间：2012-10-24T08:34:28.663
> 
> 标签：validation, struts2

我有一个表单需要在提交时进行验证。我已经添加`public void validate()`到我的行动课上。但是，即使在尚未提交表单的初始页面加载中也会显示错误。

我已经阅读[了这个](https://stackoverflow.com/questions/4069601/how-can-i-tell-struts2-not-to-validate-a-form-the-first-time-it-displays)和[这个](https://stackoverflow.com/questions/12765997/struts2-disable-validation-on-page-load)，但没有解决我的问题。实现像在第一次加载表单时跳过验证这样简单的事情真的那么难吗？:(

我在动作类中使用手动验证。

**struts.xml**

```
<action name="login" class="community.action.LoginAction">
    <result name="success" type="redirect">/forums/list</result>
    <result name="login">/WEB-INF/login.jsp</result>
    <result name="input">/WEB-INF/login.jsp</result>
</action> 
```

**登录操作.java**

```
public void validate() {
    //validation rule
    addActionError("Error message");
}

public String execute() {
    if (//username and password correct) {
        return SUCCESS; //redirect to forums page
    } else {
        return LOGIN;
    }
} 
```

目前，即使未提交表单，也会显示错误。

我尝试使用`@SkipValidation`注释 over `execute()`，但这可以防止显示错误，即使在表单提交之后也是如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T09:57:52.177

您可以在 LoginAction 类中使用另一种方法来返回带有*@SkipValidation的 Input 的 login.jsp*

**登录操作.java**

```
 public String execute()
        {       
             if (//username and password correct) {
               return SUCCESS; //redirect to forums page
             } else {
             return LOGIN;
              }     
        }

    public void validate()
     {
             //validation rule
              addActionError("Error message");
     }

    @SkipValidation
    public String loginForm()
     {
            return INPUT;
     } 
```

现在验证将只发生在执行方法上。首先请求应该来到 loginForm 方法。为此，在配置中稍作修改

**struts.xml**

```
<action name="login_*" class="community.action.LoginAction"  method="{1}">
    <result name="success" type="redirect">/forums/list</result>
    <result name="login">/WEB-INF/login.jsp</result>
    <result name="input">/WEB-INF/login.jsp</result> </action> 
```

Here method="{1}" entry in the action element will be used to check which method got requested for, if nothing is specified in the request then the execute() method will be invoked otherwise mentioned method will be invoked.Note the action name has changed to login_*

**To mention the method name in the JSP:**

* * *

```
 -------
  <s:submit name="SubmitButton" value="Click To Login" action="login_loginForm"/> 
```

* * *

* * *

In the submit UI element above action have got mentioned as login_loginForm. Here login_ refers the action name and loginForm refers the method to be invoked. Hope this will help

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:06:13.293

您需要使用不同的操作名称。一个用于查看表单，另一个用于提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:01:33.337

这意味着，我已经在第一页加载期间调用了该操作。解决此问题的最简单方法是将您的操作从`login`to`loginAction`或其他名称重命名。

# java - 检查密码/密钥代码是否匹配的方法

> ID：13045549
> 
> 赞同：0
> 
> 时间：2012-10-24T08:34:42.193
> 
> 标签：java, passwords, keycode

我想编写一个简单的 java 程序来检查 keycode 是否匹配一组条件。

这是我到目前为止所拥有的：

```
Scanner keycode = new Scanner(System.in);
System.out.println("Input keycode");
String key1 = keycode.nextLine();

do {

    if (key1.length() < 6 || key1.length() > 8) {

        System.out.println("must be at least 6 letter and max 8 letter");
        return;
    }

    else {

        boolean upper = false;
        boolean lower = false;
        boolean number = false;

        for (char c : key1.toCharArray()) {
            if (Character.isUpperCase(c)) {
                upper = true;
            } else if (Character.isLowerCase(c)) {
                lower = true;
            } else if (Character.isDigit(c)) {
                number = true;
            }
        }
        if (!upper) {
            System.out.println("must contain at least one uppercase character");
            return;
        } else if (!lower) {
            System.out.println("must contain at least one lowercase character");
            return;
        } else if (!number) {
            System.out.println("must contain at least one number");
            return;
        } else {
            return;
        }
    }

} while (true);

System.out.println("Input keycode again");
String key2 = keycode.nextLine();

if (key1.equals(key2)) {

    System.out.println("keycode matched");
} else {
    System.out.println("keycode dont match");

} 
```

提示用户输入键码。

程序首先检查是否超过 6 个字符和少于 8 个字符。

然后它检查它是否包含小写、大写和数字。

我希望它允许用户在犯任何错误时再次输入密码，而不是重新输入密码。

如果成功，它将要求用户再次输入键码。如果两个键码不匹配，则允许用户重试。3 次尝试失败后，系统将回复“keycode mismatch”。

我需要帮助的部分是如果密码不符合要求并且密码不匹配，则允许用户输入密码。当我输入少于 6 个字符的密码时，我得到以下输出：

```
must be at least 6 letter and max 8 letter
must be at least 6 letter and max 8 letter
must be at least 6 letter and max 8 letter
must be at least 6 letter and max 8 letter
must be at least 6 letter and max 8 letter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:40:59.117

使用循环

```
boolean flag=false;
while(flag!=true)
{
    Scanner keycode =  new Scanner(System.in);
    System.out.println("Input keycode");
    String key1 = keycode.nextLine();
    if (key1.length() < 6 || key1.length() > 8) {

    System.out.println("must be at least 6 letter and max 8 letter");

    } 
    else
    {
         flag=true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:41:12.587

您应该将该行`String key1 = keycode.nextLine();`放在 do 循环中，以便每次需要时都向用户查询一次。否则，您只是陷入了一个循环，该循环总是会一次又一次地检查相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:44:01.547

使用`boolean`变量 say `redo`。并且在您使用 return 的每个地方，将其替换为`redo = true`. 并且您的 while 条件应该是`while(redo)`，它将一直运行，直到`redo is true`用户没有输入正确的数字。

另外，移动你的`input`阅读线： -

```
String key1 = keycode.nextLine(); 
```

在你的 do-while 循环中。而且，将你的`redo`变量重置`false`为循环中，这样它就不会`true`永远存在。

```
String[] keys = new String[2];  // Since you are reading 2 keys, so size = 2
boolean redo = false;
int count = 0;    // To maintain the number of keys read. should stop at count = 2

do {

    redo = false;
    Scanner keycode =  new Scanner(System.in);

    System.out.println("Input keycode No: + " + (count + 1));
    String key1 = keycode.nextLine();

    if (key1.length() < 6 || key1.length() > 8) {
        redo = true;

    } else {
        /** Your remaining code **/

        if (!upper) {
            System.out.println("must contain at least one uppercase character");
            redo = true;

        } else if (!lower) {
            System.out.println("must contain at least one lowercase character");
            redo = true;

        } else if (!number) {
            System.out.println("must contain at least one number");
            redo = true;

        } else {
            keys[count++] = key1;  // Enter a new key in array
        }
    }

} while (redo || count < 2);  

if (keys[0].equals(keys[1])) {
    System.out.println("Keys are equal");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:45:14.220

```
boolean redo = false;

do {
    redo = false;
    Scanner keycode =  new Scanner(System.in);
    System.out.println("Input keycode");
    String key1 = keycode.nextLine();

    if (key1.length() < 6 || key1.length() > 8) {
        redo = true;

    } else {
        /** Your remaining code **/

        if (!upper) {
            System.out.println("must contain at least one uppercase character");
            redo = true;

        } else if (!lower) {
            System.out.println("must contain at least one lowercase character");
            redo = true;

        } else if (!number) {
            System.out.println("must contain at least one number");
            redo = true;
        }

          else{
          System.out.println("Input keycode again");
          String key2 = keycode.nextLine();

          if (key1.equals(key2)) {

           System.out.println("keycode matched");
            } else {
             System.out.println("keycode dont match");

             }

       }

    }

} while (redo); 
```

我设法将代码放入此处，不确定其是否正确？

# html - 保持标题 div 始终高于其他

> ID：13045554
> 
> 赞同：0
> 
> 时间：2012-10-24T08:35:08.867
> 
> 标签：html, css

在 HTML 定位方面有点挣扎。我确定这是一个非常简单的问题，但无法破解它。

请看小提琴：http: [//jsfiddle.net/HMyXW/2/](http://jsfiddle.net/HMyXW/2/)

基本上，我试图将黄色 div ( `#logo`) 置于其他所有内容之上，因此即使屏幕垂直调整大小，它也会将页面上的任何其他内容向下推。

我尝试过弄乱 z 位置等，但运气不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:48:41.043

`fixed positions`如果没有必要，我建议删除所有内容，并添加一个外部 div 来包装所有子 div。

检查此**[演示](http://jsfiddle.net/HMyXW/4/)**

* * *

如果有必要使用 ，`position:fixed`那么`#logo`您需要检查 的高度并为内容 div`#logo`赋予相同的值。`margin-top`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:40:34.653

您的#logo 具有`position: fixed;`这意味着该元素已从正常页面流中删除。

# python - Django将模型方法的输出添加到序列化对象

> ID：13045566
> 
> 赞同：1
> 
> 时间：2012-10-24T08:35:54.707
> 
> 标签：python, django, json, django-models, django-serializer

我有一个模型，它有一种方法来计算其包含值与其他相关子对象相比所包含的百分比：

```
class childModel(models.Model):
    count = models.IntegerField()
    parent = models.ForeignKey(ParentModel)

    def percentage(self):
        return 100*float(self.count)/float(self.parent.total_count()) 
```

当我将此对象序列化为 JSON 输出时，我想在 JSON 输出中包含该百分比方法的值。

我尝试了各种 hacky 方法，使用`model_to_dict`然后将值添加到 dict。这适用于转储数据，但在重新加载它时会导致问题，因为它不存储 Django 内置`serializers_serialize`函数在转储数据时所做的模型键。

我也热衷于使用 的`use_natural_keys`选项`serializers_serialize`，自然`model_to_dict`不包括这个 - 我想我也可以随意添加它，但似乎我非常反对系统。有任何想法吗？

# javascript - JavaScript：将日/周转换为年

> ID：13045572
> 
> 赞同：3
> 
> 时间：2012-10-24T08:36:16.487
> 
> 标签：javascript, function, date, dayofweek, week-number

我已经使用 Stack Overflow 几个月了，但这是我的第一篇文章。

我需要一个函数来将星期数和星期几转换为 dd/mm/yyyy 格式。

我必须使用的日期值格式为`day/weekNumber`. 例如：`3/43`转换为 20XX 年 10 月 24 日星期三。年份值将是当前年份。

日期值从 1（星期一）开始。

我在互联网上找到了很多功能（例如[this](http://jsfiddle.net/sRxTs/1/ "这")、[this](https://stackoverflow.com/questions/4555324/get-friday-from-week-number-and-year-in-javascript "这")和[this](http://snipplr.com/view/7540/ "还有这个")）。有些适用于 ISO 8601 日期，我认为这对我不起作用。而且我还没有找到适合我的。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:42:59.740

`3`因此，假设您分别拥有和的值`43`，您可以在当年的第一天做一些简单的数学运算：

*   获取当年 1 月 1 日
*   加 (43 * 7 + 3)

可能是这样的：

```
var currentDate = new Date();
var startOfYear = new Date(currentDate.getFullYear(), 0, 1);//note: months start at 0
var daysToAdd = (43 * 7) + 3;
//add days
startOfYear.setDate(startOfYear.getDate() + daysToAdd); 
```

[这是一个例子](http://jsfiddle.net/AjhDr/)

* * *

**编辑**

再想一想，我认为我对您的要求有误。看来您需要一周中的特定日期。[检查这个](http://jsfiddle.net/AjhDr/1/)以获得更好的解决方案。

问题是这一切都取决于你对一周的定义。今年从星期日开始，那么这是否意味着 02/01/2012（今年的第一个星期一）是第二周的开始？

我最新的例子会先查找指定周的开始，然后查找指定日的下一次出现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:19:20.603

这个解决方案确实需要添加一个额外的库，但我认为这真的很值得。它是一个用于操作日期和时间的[momentjs](http://momentjs.com/docs/)库。它得到积极维护，并且有很好的[文档](http://momentjs.com/docs/)。一旦获得 day 和 weekNumber 的值（在我们的例子中为 3 和 43），您应该执行以下操作：

```
function formatInput(day, weekNumber){

    var currentDate = moment(new Date());     // initialize moment to a current date
    currentDate.startOf('year');              // set to Jan 1 12:00:00.000 pm this year
    currentDate.add('w',weekNumber - 1);      // add number of weeks to the beginning of the year (-1 because we are now at the 1st week)
    currentDate.day(day);                     // set the day to the specified day, Monday being 1, Sunday 7

    alert(currentDate.format("dddd, MMMM Do YYYY"));  // return the formatted date string 
    return currentDate.format("dddd, MMMM Do YYYY");
} 
```

我认为这个库以后可能对您有用，并且在日期和时间操作以及格式选项方面有很多可能性。还有一个为 momentjs 编写的很棒的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:43:49.957

根据 ISO 在处理星期日期时，星期从星期一开始，一年中的第一周包含一年中的第一个星期四。因此，对于 2012 年，第一周从 1 月 2 日星期一开始，2013 年的第一周将从 2012 年 12 月 31 日星期一开始。

因此，如果 3/43 是第 43 周的第三天（即 ISO 日期 2012-W43-3），则可以使用以下方法将其转换为日期对象：

```
function customWeekDateToDate(s) {
  var d, n;
  var bits = s.split('/');

  // Calculate Monday of first week of year this year
  d = new Date();   
  d = new Date(d.getFullYear(),0,1); // 1 jan this year
  n = d.getDay();
  d.setDate(d.getDate() + (-1 * n +( n<5? 1 : 8)));

  // Add days
  d.setDate(d.getDate() + --bits[0] + --bits[1] * 7);

  return d;
}

console.log(customWeekDateToDate('3/43')); // 01 2012-10-24 
```

请注意，这使用日期，否则夏令时转换可能会导致错误的日期。

# web-services - saaj 异常 - 无法解析内容类型：null

> ID：13045576
> 
> 赞同：1
> 
> 时间：2012-10-24T08:36:24.280
> 
> 标签：web-services, saaj

我对 web 服务还很陌生，并且正在研究发送和接收附件（二进制文件）的 SAAJ 示例。我可以在客户端发送文件时让它工作，但在它请求它时不能。我在客户端遇到异常：
错误：“序言中不允许内容。” 2012 年 10 月 24 日 13:59:28 com.sun.xml.internal.messaging.saaj.soap.EnvelopeFactory createEnvelope 严重：SAAJ0511：无法从给定源 com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl 创建信封: 无法从给定来源创建信封

任何人有任何想法???我的客户端代码如下：

```
SOAPConnectionFactory scf = SOAPConnectionFactory.newInstance();
SOAPConnection con = scf.createConnection();
SOAPFactory soapFactory = SOAPFactory.newInstance();
MessageFactory mf = MessageFactory.newInstance();

SOAPMessage msg = mf.createMessage();
SOAPHeader header = msg.getSOAPHeader();
header.detachNode();

SOAPBody body = msg.getSOAPBody();
Name bodyName = soapFactory.createName(
"remoteOpen", "remoteOpen", 
"http://schemas.remoteOpen.com/remoteOpen");
SOAPBodyElement bodyElement = body.addBodyElement(bodyName);
SOAPElement projectName = bodyElement.addChildElement("projectName");
projectName.addTextNode("filename");

msg.saveChanges();

// create the endpoint and send the message
URL endpoint = new URL("http://localhost:8080/RemoteSaveProject/OpenServlet");
SOAPMessage response = con.call(msg, endpoint);
con.close();

SOAPBody responseBody = response.getSOAPBody();
SOAPElement ackElem = (SOAPElement)responseBody.getFirstChild();
String acknowledgement = ackElem.getValue(); 
```

服务器代码如下所示：

```
MimeHeaders mimeHeaders = new MimeHeaders();
Enumeration en = request.getHeaderNames();
while (en.hasMoreElements()) 
{
     String headerName = (String)en.nextElement();
     String headerVal = request.getHeader(headerName);
     StringTokenizer tk = new StringTokenizer(headerVal, ",");
     while (tk.hasMoreTokens()){
          mimeHeaders.addHeader(headerName, tk.nextToken().trim());
     }
}
SOAPMessage message = mf.createMessage(mimeHeaders, request.getInputStream());
SOAPBody body = message.getSOAPBody();

Name bodyName = soapFactory.createName(
                "remoteOpen", "remoteOpen", 
                "http://schemas.remoteOpen.com/remoteOpen");

        Iterator projects = body.getChildElements(bodyName);
        SOAPElement project = (SOAPElement)projects.next();
        Iterator projectNameIter = project.getChildElements(soapFactory.createName("projectName"));
        SOAPElement projectNameEle = (SOAPElement)projectNameIter.next();
        String projectName = projectNameEle.getValue();
        File file = new File(projectName);

        SOAPMessage reply = mf.createMessage();
        SOAPHeader header = reply.getSOAPHeader();
        header.detachNode();
        SOAPBody replyBody = reply.getSOAPBody();
        SOAPBodyElement bodyElement = replyBody.addBodyElement(soapFactory.createName("ack"));
        bodyElement.addTextNode("OK");

        DataHandler dh = new DataHandler(new FileDataSource(file));
        AttachmentPart attachment = reply.createAttachmentPart(dh);
        attachment.setContentId("123");
        reply.addAttachmentPart(attachment);
        reply.saveChanges();

        response.setStatus(HttpServletResponse.SC_OK);
        putHeaders(reply.getMimeHeaders(), response);

        response.setContentType("text/xml");
        ServletOutputStream replyOS = response.getOutputStream();
        reply.writeTo(replyOS);
        replyOS.flush();
        replyOS.close(); 
```

putHeaders 看起来像：

```
Iterator it = headers.getAllHeaders();

    while (it.hasNext()) 
    {
        MimeHeader header = (MimeHeader) it.next();
        String[] values = headers.getHeader(header.getName());

        if (values.length == 1) 
        {
            res.setHeader( header.getName(), header.getValue());
        } 
        else 
        {
            StringBuffer concat = new StringBuffer();
            int i = 0;

            while (i < values.length) 
            {
                if (i != 0)
                {
                    concat.append(',');
                }
                concat.append(values[i++]);
            }
            res.setHeader(header.getName(), concat.toString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:53:28.410

如果您像我一样使用 Google 应用引擎，问题是 GAE 不支持`com.sun.xml.internal.messaging.saaj.packaging.mime.internet.ParameterList`在`javax.xml.soap.SOAPConnection.call()`. 因此，您必须使用解决方法。

我个人通过使用`java.net.HttpURLConnection`而不是`javax.xml.soap.SOAPConnection`手动发送和解析 SOAP 消息来做到这一点。

# wpf - WPF Dispatcher.BeginInvoke 抛出异常

> ID：13045577
> 
> 赞同：0
> 
> 时间：2012-10-24T08:36:30.407
> 
> 标签：wpf, multithreading

我正在使用 Threadpool.QueueUserWorkItem 如下

```
public void TestMain()
    {
        try
        {
            ThreadPool.QueueUserWorkItem(x =>
                {
                    this.Dispatcher.BeginInvoke(new Action(() => this.BackGroundMethod()));
                }
            );
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    }

    private void BackGroundMethod()
    {
        try
        {
            int a = 0;
            int b = 100;
            var error = b / a;
        }
        catch(Exception)
        {
            throw;
        }
    } 
```

通过这种方式，TestMain() 无法捕获异常。程序将关闭...

我怎样才能捕捉到这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:53:41.193

使用`Dispatcher.UnhandledException`事件来捕获`TestMain()`方法中的异常，如下所示：

```
Dispatcher.UnhandledException += (sender, args) => MessageBox.Show(args.Exception.Message);
ThreadPool.QueueUserWorkItem(ignore => Dispatcher.Invoke(new Action(BackGroundMethod))); 
```

编辑：请记住设置`Handled`属性以防止调用内部异常处理程序：

```
Dispatcher.UnhandledException += (sender, args) => 
{
    MessageBox.Show(args.Exception.Message);
    args.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:46:52.687

原因是`this.Dispatcher.BeginInvoke(new Action(() => this.BackGroundMethod));`异步执行，所以它会在执行`TestMain`之前完成执行里面的所有代码`BackGroundMethod`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:48:02.423

[您可以通过处理AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)来捕获应用程序内所有线程中的所有异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:49:55.427

为防止崩溃，请在可能抛出的操作周围添加`try`/ ：`catch`

```
ThreadPool.QueueUserWorkItem(x =>
{
    try {
        this.Dispatcher.BeginInvoke(new Action(() => this.BackGroundMethod()));
    }
    catch (DivideByZeroException ex) {
        // handle the error somehow
    }
}); 
```

但是，请考虑一下您在这里所做的事情：您正在将一些操作推送到线程池，然后它会将相同的操作推送到调度程序线程。为什么不直接不`QueueUserWorkItem`打电话自己做呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T08:40:28.367

当您使用 Dispatcher 创建一个新线程时，该线程有它自己的堆栈，因此异常不会冒泡到 try...catch in `TestMain`，而是源自`BackgroundMethod`方法。由于您在`BackgroundMethod`try catch 中抛出异常是无用的，因此如果您不在`BackgroundMethod`程序中抛出异常，则不会关闭。

```
private void BackGroundMethod()
{
    try
    {
        int a = 0;
        int b = 100;
        var error = b / a;
    }
    catch(Exception)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-25T16:21:41.953

您可以通过在 BeginInvoke 函数中捕获异常并将其保存在临时变量中来做到这一点。在等待之后，您可以在正确的线程上重新抛出它。

```
 Exception thrown = null;

        await Application.Current.Dispatcher.BeginInvoke(new Action<Action>(x =>
        {
            try
            {
                BackGroundMethod();
            }
            catch (Exception ex)
            {
                //exceptions on this thread MUST be caught or the program will exit
                //we will save it, and then when we are back on the main thread we will rethrow it
                thrown = ex;
            }
        }));

        if (thrown != null)
            throw thrown; //<--- I'm rethrowing it right here on the correct thread 
```

# java - Hibernate 3：乐观锁定单元测试

> ID：13045579
> 
> 赞同：1
> 
> 时间：2012-10-24T08:36:37.583
> 
> 标签：java, hibernate, spring-mvc, junit

我正在尝试测试我的应用程序的乐观锁定实现。然而结果不是我所期望的。我测试的步骤如下

*   从数据库中加载实体
*   将版本属性设置为比数据库中存在的值小一
*   将另一个只是字符串的属性更改为其他属性
*   保存实体

我现在预计会出现 staleException，但是实体刚刚被保存并且版本增加到下一个。

这是我保存代码的一小部分

```
 public <T extends DomainObject> T save(T objectToSave) {
        Session currentSession = null;
        try {
            currentSession = sessionFactory.getCurrentSession();
            currentSession.save(objectToSave);
            return objectToSave;
        } catch (Exception ex) {
            logger.error("save error",ex);
        }
        return null;
    } 
```

我使用以下代码通过我的整个应用程序通过命名查询按 id 加载对象

```
@SuppressWarnings("unchecked")
public <T extends Object> List<T> query(Class<T> returnClass, String query, List<String> namedParams, List<? extends Object> params, Integer limit) {
    Session currentSession = null;
    try {
        currentSession = sessionFactory.getCurrentSession();
        Query namedQuery = currentSession.getNamedQuery(query);
        if(limit != null){
            namedQuery.setMaxResults(limit);
        }
        namedQuery.setCacheable(true);
        if (namedParams != null && namedParams.size() > 0) {
            addParams(namedQuery, namedParams, (List<Object>) params);
        }
        return namedQuery.list();
    } catch (Exception ex) {
        logger.error("query error",ex);
    }
    return null;
} 
```

这是我的 sessionfactory 的配置

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="entityInterceptor" ref="auditInterceptor" />
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <value>
            hibernate.dialect=${hibernate.dialect}
            hibernate.show_sql=${hibernate.show_sql}
            hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider
            hibernate.cache.region.factory_class=net.sf.ehcache.hibernate.EhCacheRegionFactory
            hibernate.cache.use_query_cache=true
            hibernate.cache.use_second_level_cache=true
            hibernate.cache.provider_configuration_file_resource_path=ehcache.xml
            hibernate.generate_statistics=true
            hbm2ddl.auto=${hbm2ddl.auto}
            hibernate.c3p0.min_size=${hibernate.c3p0.min_size}
            hibernate.c3p0.max_size=${hibernate.c3p0.max_size}
            hibernate.c3p0.timeout=${hibernate.c3p0.timeout}
            hibernate.c3p0.max_statements=${hibernate.c3p0.max_statements}
            hibernate.c3p0.idle_test_period=${hibernate.c3p0.idle_test_period}
        </value>
    </property>
    <property name="schemaUpdate">
        <value>true</value>
    </property>
    <property name="annotatedClasses">
        <list>
            <value>com.mbalogos.mba.domain.site.Site</value>
        </list>
    </property>
</bean> 
```

我在 sessionFactory 的配置上遗漏了什么，还是我测试它完全错误，我应该以不同的方式测试它吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:40:34.123

Regressing the version field is dangerous as it is Hibernate controlled (if you're using the JPA versioning functionality). Load in an entity, detach it (maybe use session.evict(obj)), alter an attribute. Load in the same entity, keep it attached, alter it, save it. Reattach the first entity and attempt to save it (I think Merge will do this). You should then see the StaleObjectStateException exception.

# c++ - 有没有办法在 c++ 中连接两个数组并返回它们？

> ID：13045580
> 
> 赞同：0
> 
> 时间：2012-10-24T08:36:41.753
> 
> 标签：c++, python, arrays, return, concatenation

我在python中有一个像这样的递归函数

```
def recon(i,j):
    if i == 0 or j == 0:
        return []
    elif x[i-1] == y[j-1]:
        return recon(i-1,j-1) + [x[i-1]]
    elif table[i-1,j] > table[i,j-1]:
        return recon(i-1,j)
    else:
        return recon(i,j-1) 
```

我正在尝试用 C++ 重写它，但问题是这条线

```
 return recon(i-1,j-1) + [x[i-1]] 
```

我尝试这样做是c ++，但它没有编译，有没有办法连接像python这样的数组并返回它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:40:19.787

不是数组。但是你可以用向量来做到这一点。

```
vector<int> x = ...;
vector<int> y = ...;
x.insert(x.end(), y.begin(), y.end()); // append y to x 
```

您可以使用与动态分配的内存类似的东西，但使用向量更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:53:41.017

也许你可以试试这个

```
for(int j=0;j<10; j++)
    mer[j]=a[j];
for(int i=0; i<10; i++, j++)
    mer[j]=b[i]; 
```

其中 mer,a 和 b 已经是初始化的数组变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:42:17.003

您需要创建一个大小正确的新数组以包含两个现有数组，然后循环遍历它们以将它们复制进去（在复制第二个数组时不要忘记在目标数组上保留偏移量）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:44:47.360

似乎这里不需要递归：

```
vector<int> recon(int i, int j) {
    vector<int> ret;
    while(i > 0 && j > 0)
        if(x[i-1] == y[j-1])
            ret.push_back(x[--i]), --j;
        else if(table[i-1][j] > table[i][j-1])
            --i;
        else
            --j;
    std::reverse(ret.begin(), ret.end());
    return ret;
} 
```

（免责声明：未经测试）

# android - Android 从 DialogFragment 类返回并显示 DatePicker

> ID：13045581
> 
> 赞同：1
> 
> 时间：2012-10-24T08:36:54.753
> 
> 标签：android, datepicker, android-dialogfragment

我对Android编程有点陌生，所以请耐心等待......

我正在学习来自[Google Android - Pickers](http://developer.android.com/guide/topics/ui/controls/pickers.html)的教程，但是在完成之后，我不知道如何在原始活动中返回和显示选定的日期。

如果现在听起来很混乱，我目前有 2 个类 - *ClassA.java*和*ClassB.java*，其中*ClassA*是我的主要活动，*ClassB*是我的对话片段。

我知道下面的这个函数（这是在*ClassB*中）接受**视图、年、月和文本**并返回一些东西，但我不知道如何将它存储回*ClassA*的主函数中并将其显示为当前选择的值在*微调器*（*TextView*）中。

```
public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user
    return [something];
} 
```

*一旦用户在Spinner* ( *TextView ) 上点击 (* *onClick* )，我在*ClassA*中的函数将使用以下代码：

 ***```
public void DatePicker(View v) {
    DialogFragment DateFragment = new NotifyDatePicker();
    DateFragment.show(getSupportFragmentManager(), "DatePicker");
} 
```

所以问题是，**我从哪里开始存储数据？**我是获取从*ClassB*到*ClassA*的返回值（甚至还有返回值吗？）并将其存储到一个*Bundle*中（同时还更新 R.id.TextViewSpinner），还是在用户在里面时保存它DialogFragment *（**ClassB*）？

**编辑**

我才意识到我的错误。*ClassB*本身是一个单独的活动，因此*Spinner* ( *TextView* ) 的更改和 Bundle 的存储应该在*ClassB*中完成......

不过有一个小问题。

我正在使用*(TextView)findViewById(R.id.TextViewSpinner).setText(daymonthyear)*但不断出现错误：

```
The method findViewById(int) is undefined for the type ClassB 
```

有什么我忘记**导入/包含的**吗？

**完整代码**

```
public class ClassB extends DialogFragment implements DatePickerDialog.OnDateSetListener {

@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {

        // Change TextViewSpinner here (setText)

        // Tried (TextView)findViewById(R.id.TextViewSpinner).setText(daymonthyear) - The method findViewById(int) is undefined for the type ClassB error returned

        // Tried (TextView)context.findViewById(R.id.TextViewSpinner) - context cannot be resolved error returned

        return;
    }
} 
```

这是通过[谷歌教程](http://developer.android.com/guide/topics/ui/controls/pickers.html)。我一直在这里和那里进行调整，但它总是让我回到原点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:44:54.600

也许不是最好的解决方案，但您可以使用`DefaultSharedPreferences`来保存值：

```
public void onDateSet(DatePicker view, int year, int month, int day) {

    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    preferences.putInt("year", year);
    preferences.putInt("month", month);
    preferences.putInt("day", day;
    preferences.commit();

    return;
} 
```

并在活动 A 中对他们做一些事情：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
int year = preferences.getInt("year", 0);
int month = preferences.getInt("month", 0);
int day = preferences.getInt("day", 0);

(TextView)findViewById(R.id.TextViewSpinner).setText(day + "/" + month + "/" + year); 
```

我希望这有帮助。

建议`TextViewSpinner`使用非大写字母开头的引用：`textViewSpinner`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T23:30:48.537

实际上没有必要通过共享偏好绕道而行。您所要做的就是告诉您`ClassB`在哪里寻找视图：

```
public void onDateSet(DatePicker view, int year, int month, int day) {

    // Change TextViewSpinner here (setText)

    // Tried (TextView)findViewById(R.id.TextViewSpinner).setText(daymonthyear)
    // - The method findViewById(int) is undefined for the type ClassB error returned

    // Instead try:
    (TextView) getActivity().findViewById(R.id.TextViewSpinner)
        .setText(day + "/" + month + "/" + year)

    // Tried (TextView)context.findViewById(R.id.TextViewSpinner)
    // - context cannot be resolved error returned

    return;
} 
```

有关扩展类的完整代码`DialogFragment`（在您的情况下`ClassB`），请参阅[我](https://stackoverflow.com/a/16502599/461544)对类似问题的回答。***

# facebook - 如何以自动化的方式为网站创建 Facebook 粉丝页面？

> ID：13045584
> 
> 赞同：5
> 
> 时间：2012-10-24T08:36:56.030
> 
> 标签：facebook, facebook-graph-api, automation, facebook-page

我们正在开发 CMS 应用程序。在这种情况下，我们需要集成一个功能，使用户能够以自动方式为其产品/服务创建 Facebook 粉丝页面。但我们意识到，任何 facebook 开发人员 API 都不允许这样做。

因此，我们只需要以编程方式自动化粉丝页面创建部分。这有可能吗？？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:49:21.703

您无法通过 API 创建新的 Facebook 页面 - 例如，如果您的客户有一家名为 SomeCompany 的公司，他们无法使用您的应用在 www.facebook.com/SomeCompany 生成产品/服务页面供用户点赞。您的替代方案是：

1) 使用您的应用程序为公司网站（Facebook 外部）生成 Open Graph 标签和 Like 按钮。2) 指导客户如何在登录 Facebook 帐户时访问 Facebook.com 手动创建页面。3) 在您的应用中向您的客户端请求 manage_pages 权限，并在客户端创建页面后使用营销 API 编辑页面。页面存在后，您可以编辑页面上的大多数字段（甚至是个人资料图片等内容）。有关更多信息，请参见此处：[https ://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

# xml - xml过滤属性

> ID：13045592
> 
> 赞同：1
> 
> 时间：2012-10-24T08:37:18.783
> 
> 标签：xml

我试图编写一个 xslt 模板匹配，它将选择所有不是 item="toy" 的产品。下面是我的代码，但它不起作用我能知道可能是什么错误吗？

```
 <color>
     <xsl:apply-templates select="//product/@item[not(.='toy')]">
  </color> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:41:07.013

尝试使用单引号：

```
<xsl:apply-templates select="//product/@xsi:item[not(.='toy')]"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:07:21.583

您的 XML 和 XSLT 存在许多问题，尽管有些问题可能是您创建问题时的拼写错误。**您的 XML 缺少xsi**的命名空间声明，并且您的应用模板使用双引号而不是单引号。它也是未封闭的。

但是，真正的问题是您说您观看以选择**产品**节点，但您的应用模板实际上是在尝试选择实际的**项目**属性。

试试这个

```
<xsl:apply-templates select="//product[not(@xsi:item='toy')]" /> 
```

或者也许这个

```
<xsl:apply-templates select="//product[@xsi:item!='toy']" /> 
```

# python - 在 Python 脚本中使用 sudo

> ID：13045593
> 
> 赞同：51
> 
> 时间：2012-10-24T08:37:20.937
> 
> 标签：python, shell, subprocess

每次执行脚本时，我都在尝试编写一个小脚本来挂载 VirtualBox 共享文件夹。我想用 Python 来做，因为我正在尝试学习它来编写脚本。

问题是我需要权限才能启动 mount 命令。我可以将脚本作为 sudo 运行，但我更喜欢它自己制作 sudo。

我已经知道将密码写入 .py 文件是不安全的，但我们谈论的是一个根本不重要的虚拟机：我只想单击 .py 脚本并让它工作。

这是我的尝试：

```
#!/usr/bin/env python
import subprocess

sudoPassword = 'mypass'
command = 'mount -t vboxsf myfolder /home/myuser/myfolder'

subprocess.Popen('sudo -S' , shell=True,stdout=subprocess.PIPE)
subprocess.Popen(sudoPassword , shell=True,stdout=subprocess.PIPE)
subprocess.Popen(command , shell=True,stdout=subprocess.PIPE) 
```

我的python版本是2.6

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-06-17T07:23:03.970

许多答案都集中在如何使您的解决方案发挥作用，而很少有人认为*您的解决方案是一种**非常糟糕的**方法*。如果你真的想“练习来学习”，为什么不练习使用好的解决方案呢？硬编码您的密码正在学习*错误*的方法！

如果您真正想要的是`mount`该卷的无密码，则可能*根本*`sudo`不需要！那么我可以建议其他方法吗？

 **   `/etc/fstab`按照[mensi 的](https://stackoverflow.com/users/871665/mensi)建议使用。使用选项`user`并`noauto`让普通用户安装该卷。

*   用于`Polkit`无密码操作：`.policy`为您的脚本配置一个文件，`<allow_any>yes</allow_any>`并放置在`/usr/share/polkit-1/actions`

*   编辑`/etc/sudoers`以允许您的用户在`sudo`不输入密码的情况下使用。正如@Anders 所建议的那样，您可以将此类使用限制为特定命令，从而避免您的帐户中无限制的无密码根权限。有关更多详细信息，请参阅[此答案](https://askubuntu.com/a/155827/42796)`/etc/sudoers`。

以上所有都允许无密码的 root 权限，没有一个需要你硬编码你的密码。选择任何方法，我可以更详细地解释它。

至于*为什么*硬编码密码是一个非常糟糕的主意，这里有一些很好的链接供进一步阅读：

*   [为什么在编程时不应该对密码进行硬编码](http://www.security-faqs.com/why-you-shouldnt-hard-code-your-passwords-when-programming.html)
*   [如何保密（硬编码密码的替代方案）](https://security.web.cern.ch/security/recommendations/en/password_alternatives.shtml)
*   [什么更安全？硬编码凭证或将它们存储在数据库中？](https://security.stackexchange.com/questions/92465)
*   [使用硬编码凭证，一个危险的编程错误：CWE](https://blogs.manageengine.com/it-security/passwordmanagerpro/2010/02/17/use-of-hard-coded-credentials-a-dangerous-programming-error-cwe.html)
*   [硬编码密码仍然是一个关键的安全漏洞](https://www.csoonline.com/article/3038302/application-development/hard-coded-passwords-remain-a-key-security-flaw.html)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-24T08:45:14.340

```
sudoPassword = 'mypass'
command = 'mount -t vboxsf myfolder /home/myuser/myfolder'
p = os.system('echo %s|sudo -S %s' % (sudoPassword, command)) 
```

试试这个，让我知道它是否有效。:-)

和这个：

`os.popen("sudo -S %s"%(command), 'w').write('mypass')`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-05-16T04:13:37.823

要将密码传递给`sudo`的标准输入：

```
#!/usr/bin/env python
from subprocess import Popen, PIPE

sudo_password = 'mypass'
command = 'mount -t vboxsf myfolder /home/myuser/myfolder'.split()

p = Popen(['sudo', '-S'] + command, stdin=PIPE, stderr=PIPE,
          universal_newlines=True)
sudo_prompt = p.communicate(sudo_password + '\n')[1] 
```

注意：您可能可以配置无密码 sudo 或`SUDO_ASKPASS`命令，而不是在源代码中硬编码您的密码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-19T20:03:48.413

*   在 sudo 命令中使用 -S 选项，该选项告诉从“stdin”而不是终端设备读取密码。

*   告诉 Popen 从 PIPE 读取标准输入。

*   通过将密码用作通信方法的参数，将密码发送到进程的标准输入管道。不要忘记在密码末尾添加一个换行符“\n”。

```
sp = Popen(cmd , shell=True, stdin=PIPE)
out, err = sp.communicate(_user_pass+'\n') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-24T08:45:13.570

`subprocess.Popen`创建一个进程并打开管道和东西。你正在做的是：

*   启动一个进程`sudo -S`
*   启动一个进程`mypass`
*   启动一个进程`mount -t vboxsf myfolder /home/myuser/myfolder`

这显然行不通。您需要将参数传递给 Popen。如果您查看[它的文档](http://docs.python.org/library/subprocess.html#popen-constructor)，您会注意到第一个参数实际上是参数列表。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-05T10:28:15.120

我将它用于 python 3.5。我是使用**[子](https://docs.python.org/3/library/subprocess.html)**进程模块完成的。使用这样的密码是非常**不安全**的。

subprocess模块将命令作为字符串列表，因此可以使用 split() 预先创建一个列表，[或者](https://docs.python.org/3/library/subprocess.html)**稍后**传递整个列表。阅读文档以获取更多信息。

```
#!/usr/bin/env python
import subprocess

sudoPassword = 'mypass'
command = 'mount -t vboxsf myfolder /home/myuser/myfolder'.split()

cmd1 = subprocess.Popen(['echo',sudoPassword], stdout=subprocess.PIPE)
cmd2 = subprocess.Popen(['sudo','-S'] + command, stdin=cmd1.stdout, stdout=subprocess.PIPE)

output = cmd2.stdout.read.decode() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-27T13:55:22.160

有时需要回车：

```
os.popen("sudo -S %s"%(command), 'w').write('mypass\n') 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-07T07:24:34.300

请尝试模块 pexpect。这是我的代码：

```
import pexpect
remove = pexpect.spawn('sudo dpkg --purge mytool.deb')
remove.logfile = open('log/expect-uninstall-deb.log', 'w')
remove.logfile.write('try to dpkg --purge mytool\n')
if remove.expect(['(?i)password.*']) == 0:
    # print "successfull"
    remove.sendline('mypassword')
    time.sleep(2)
    remove.expect(pexpect.EOF,5)
else:
    raise AssertionError("Fail to Uninstall deb package !") 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-12-07T21:21:02.973

要限制您作为 sudo 运行的内容，您可以运行

```
python non_sudo_stuff.py
sudo -E python -c "import os; os.system('sudo echo 1')" 
```

无需存储密码。该`-E`参数将您当前用户的环境传递给进程。请注意，您的 shell 在第二个命令之后将具有 sudo 权限，因此请谨慎使用！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-29T09:38:35.047

我知道最好不要在脚本中硬编码 sudo 密码。但是，由于某种原因，如果您无权修改`/etc/sudoers`或更改文件所有者，Pexpect 是一个可行的替代方案。

这是一个 Python 函数`sudo_exec`供您参考：

```
import platform, os, logging
import subprocess, pexpect

log = logging.getLogger(__name__)

def sudo_exec(cmdline, passwd):
    osname = platform.system()
    if osname == 'Linux':
        prompt = r'\[sudo\] password for %s: ' % os.environ['USER']
    elif osname == 'Darwin':
        prompt = 'Password:'
    else:
        assert False, osname

    child = pexpect.spawn(cmdline)
    idx = child.expect([prompt, pexpect.EOF], 3)
    if idx == 0: # if prompted for the sudo password
        log.debug('sudo password was asked.')
        child.sendline(passwd)
        child.expect(pexpect.EOF)
return child.before 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-30T19:53:07.530

它适用于 python 2.7 和 3.8：

```
from subprocess import Popen, PIPE
from shlex import split

proc = Popen(split('sudo -S %s' % command), bufsize=0, stdout=PIPE, stdin=PIPE, stderr=PIPE)
proc.stdin.write((password +'\n').encode()) # write as bytes
proc.stdin.flush() # need if not bufsize=0 (unbuffered stdin) 
```

如果标准输入缓冲，则没有`.flush()`密码将无法到达。`sudo`在 python 2.7`Popen`中默认使用`bufsize=0`并且`stdin.flush()`不需要。

为了安全使用，请在受保护的目录中创建密码文件：

```
mkdir --mode=700 ~/.prot_dir
nano ~/.prot_dir/passwd.txt
chmod 600 ~/.prot_dir/passwd.txt 
```

在启动您的 py 脚本时，从 ~/.prot_dir/passwd.txt 读取密码

```
with open(os.environ['HOME'] +'/.prot_dir/passwd.txt') as f:
    password = f.readline().rstrip() 
```*

# html - 使元素占用的空间不超过分配的空间

> ID：13045599
> 
> 赞同：0
> 
> 时间：2012-10-24T08:37:34.520
> 
> 标签：html, css

我有一个设置宽度和高度的侧边栏。问题是，它应该在右边，但它像块一样占用左边的空间。但是，我已将显示设置为内联，但这似乎并不能解决问题。如何让 div 不占用左边的空间？

CSS的一部分：

```
div#sidebar {
    float: right;
    width: 256px;
    height: 500px;
    display: inline;
    clear: none;
} 
```

整个页面的 JSFiddle：http: [//www.jsfiddle.net/9tW2U](http://www.jsfiddle.net/9tW2U)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:58:16.690

`#sidebar`或的宽度`#mainbox`为 3px，以适应彼此相邻的`#page`. `#sidebar`取or的 3px 宽度，`#mainbox`它将适合。

顺便说一句，`display: inline`与它没有任何关系，因为您已经在使用浮点数了。

# asp.net - How can change my direction when culture change?

> ID：13045603
> 
> 赞同：1
> 
> 时间：2012-10-24T08:37:50.007
> 
> 标签：asp.net, css

```
<style type="text/css">
    .sf-menu { line-height: 1.0; margin:0px}
    .sf-menu ul { position: absolute; top: -10px; width: 10em;list-style-type: none; }
        .sf-menu ul li { width: 100%; }
    .sf-menu li:hover { visibility: inherit; }
    .sf-menu li { float:; position: relative; }
</style> 
```

In float: how can change to left or right when culture change from rtl to ltr ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:51:50.137

The semantically correct way is to set the correct `dir`ection attribute and then test it in CSS.

If you already set the direction in the `html` tag (as [this example on W3.org](http://www.w3.org/TR/html401/struct/dirlang.html#blocklevel-bidi) does), then the CSS would look like:

```
.sf-menu { line-height: 1.0; margin:0px}
.sf-menu ul { position: absolute; top: -10px; width: 10em;list-style-type: none; }
.sf-menu ul li { width: 100%; }
.sf-menu li:hover { visibility: inherit; }
.sf-menu li { float:left; position: relative; }
html[dir="rtl"] .sf-menu li { float: right; } /* <<< here */ 
```

# sql-server-2008-r2 - 特定用户登录失败

> ID：13045605
> 
> 赞同：2
> 
> 时间：2012-10-24T08:38:11.190
> 
> 标签：sql-server-2008-r2

我在映射到数据库的 localhost\sql2008 R2 服务器（用户=测试，密码=测试）上创建了登录帐户，我的服务器 ip 是 192.168.3.2。SQL Server 上的身份验证模式设置为（Windows 和 SQL）当我以服务器名称登录时 = . 和user = test,password = test or servername = 192.168.3.2 和windows Authentication mode，一切正常。但是当我以服务器名称 = 192.168.3.2 和用户 = 测试和密码 = 测试登录时，它不起作用并显示此错误：用户“测试”登录失败。（.Net SqlClient 数据提供程序）错误号：18456 严重性：14 状态：1 请对此提供任何帮助。谢谢

# c++ - 提升条件 timed_wait 导致内存泄漏

> ID：13045608
> 
> 赞同：1
> 
> 时间：2012-10-24T08:38:37.120
> 
> 标签：c++, multithreading, boost, memory-leaks, boost-thread

我遇到了一个奇怪的内存泄漏问题。在下面的代码中，`blockCondition`是`boost::condition`锁定义为`boost::mutex::scoped_lock lock(blockingMutex)`的地方，`blockingMutex`是一个`boost::mutex`。

```
boost::xtime xt;
boost::xtime_get(&xt, 1);
xt.sec += 10;
if(!blockCondition.timed_wait(lock, xt))
{
    xt.sec += 5;
} 
```

具体来说，该行`if(!blockCondition.timed_wait(lock, xt))`占用了一些额外的内存，我不知道为什么！

这段代码的使用方式是否存在任何可能导致内存泄漏的问题。我正在使用版本 1.47.0 的 Boost。请帮忙！

# objective-c - 为什么我有这个奇怪的间距

> ID：13045614
> 
> 赞同：0
> 
> 时间：2012-10-24T08:39:14.053
> 
> 标签：objective-c, ios, xcode, uitableview

我无法摆脱第 0 行和第 1 行之间的这种奇怪间距。我希望第 0 行和第 1 行之间的间距与第 1 行和第 2 行之间的间距相同。

![在此处输入图像描述](../Images/ddef076bd98ec77519a290a9f9a63130.png)

```
[self.tableView setBackgroundColor:TABLE_VIEW_BACKGROUND_COLOR];

UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 250)];

UIImageView *headerBackgroundImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"addres_box"]];
[headerBackgroundImageView setFrame:CGRectMake(headerView.frame.origin.x + 10, headerView.frame.origin.y + 10, headerView.frame.size.width - 20, 160)];
[headerView addSubview:headerBackgroundImageView];

UILabel *headerTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(headerBackgroundImageView.frame.origin.x + 10, headerBackgroundImageView.frame.origin.y + 10, headerBackgroundImageView.frame.size.width - 20, 20)];
[headerTextLabel setBackgroundColor:[UIColor clearColor]];
[headerTextLabel setFont:[UIFont boldSystemFontOfSize:headerTextLabel.font.pointSize]];
[headerTextLabel setTextColor:[UIColor whiteColor]];
[headerTextLabel setLineBreakMode:UILineBreakModeTailTruncation];
[headerTextLabel setNumberOfLines:0];

NSString *headerTextString = @"0";
NSString *detailTextString = @"1\n2";

[headerTextLabel setText:headerTextString];
[headerView addSubview:headerTextLabel];
_headerTextLabel = headerTextLabel;

UILabel *headerDetailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(headerTextLabel.frame.origin.x, headerTextLabel.frame.origin.y+20, headerTextLabel.frame.size.width, 140)];
[headerDetailTextLabel setBackgroundColor:[UIColor clearColor]];
[headerDetailTextLabel setTextColor:[UIColor whiteColor]];
[headerDetailTextLabel setLineBreakMode:UILineBreakModeTailTruncation];
[headerDetailTextLabel setNumberOfLines:0];

[headerDetailTextLabel setText:detailTextString];
[headerView addSubview:headerDetailTextLabel];
_headerDetailTextLabel = headerDetailTextLabel;

[self.tableView setTableHeaderView:headerView];
[self.tableView setSeparatorColor:TABLE_VIEW_SEPARATOR_COLOR];
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine]; 
```

我希望有一个人可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:00:18.490

也许您`headerDetailTextLabel`的垂直居中，尝试添加更多行，如“1\n2\n3\n4”并查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:55:42.407

感谢您的提示，我通过添加“sizeToFit”解决了它，现在一切看起来都很好

```
[headerDetailTextLabel setText:detailTextString];
[headerDetailTextLabel sizeToFit]; //this line fixed the spacing problem
[headerView addSubview:headerDetailTextLabel]; 
```

# xml - 无法在 XSLT 中使用 exsl:document 拆分文档

> ID：13045615
> 
> 赞同：0
> 
> 时间：2012-10-24T08:39:17.390
> 
> 标签：xml, xslt, xslt-1.0, exslt

我想使用 XSLT 将一个 XML 文件拆分为多个小文件。我读到这可以使用`exsl:document`. 我已经设法让它工作了，除了一个小问题——我似乎只能输出一个文件。这是我的 XML：

```
<People>
    <Person>
        <FirstName>John</FirstName>
        <LastName>Doe</LastName>
    </Person>
    <Person>
        <FirstName>Jack</FirstName>
        <LastName>White</LastName>
    </Person>
    <Person>
        <FirstName>Mark</FirstName>
        <LastName>Wall</LastName>
    </Person>
    <Person>
        <FirstName>John</FirstName>
        <LastName>Ding</LastName>
    </Person>
    <Person>
        <FirstName>Cyrus</FirstName>
        <LastName>Ding</LastName>
    </Person>
    <Person>
        <FirstName>Megan</FirstName>
        <LastName>Boing</LastName>
    </Person>
</People> 
```

这是我的 XSLT：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  extension-element-prefixes="exsl"
  exclude-result-prefixes="exsl"
  version="1.0">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <xsl:for-each select="People/Person">
      <exsl:document href="{//FirstName}_{//LastName}.xml">
        <People>
          <xsl:copy-of select="."/>
        </People>
      </exsl:document>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

执行此使用`xsltproc data.xsl data.xml`仅生成一个名为`John_Doe.xml`. 我找不到任何其他文件。

如何将所有内容拆分`Person`为单独的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:51:17.993

改变

```
 <xsl:template match="/">
    <xsl:for-each select="People/Person">
      <exsl:document href="{//FirstName}_{//LastName}.xml">
        <People>
          <xsl:copy-of select="."/>
        </People>
      </exsl:document>
    </xsl:for-each>
  </xsl:template> 
```

到

```
 <xsl:template match="/">
    <xsl:for-each select="People/Person">
      <exsl:document href="{FirstName}_{LastName}.xml">
        <People>
          <xsl:copy-of select="."/>
        </People>
      </exsl:document>
    </xsl:for-each>
  </xsl:template> 
```

# php - 从多个 SQL 数据库创建函数

> ID：13045620
> 
> 赞同：0
> 
> 时间：2012-10-24T08:39:28.660
> 
> 标签：php

我正在尝试让一个函数正常工作（顺便说一句，这对函数来说是非常新的）这就是我所拥有的，但是当我将它实现到我的页面中时它不会产生任何结果。有人能看出这有什么问题吗？

```
public function get_character() {
        $con=mysql_connect("****","****","****");
        mysql_select_db("accounts", $con);
        $id = mysql_query("SELECT id FROM account WHERE username = '" . $username . "'");
        global $characterdb;
        $info = $characterdb->get_row("SELECT `name` FROM `characters` WHERE `account` = '" . $characterdb->escape($id) . "' AND `active`=1");
        if(is_object($info))
            return $info->character;
        else
            return '';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:41:37.883

你`$id`是一个 Mysql Result，而不是你可以在另一个查询中使用的整数。首先，您需要从该行获取行和 id。

另外：考虑将 $characterdb 作为参数传递给函数或将其作为类变量。

通过 global 导入它是最不吸引人的选择。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:41:27.363

您在查询中遗漏了一个字段。见下文。而不是名称，它应该是您的选择查询中的字符。

```
$info = $characterdb->get_row("SELECT `character` FROM `characters` WHERE `account` = '" .   $characterdb->escape($id) . "' AND `active`=1");
    if(is_object($info))
        return $info->character;
    else
        return ''; 
```

# python - /opt/local/lib/node_modules/less/bin/lessc：未找到 - Django 错误

> ID：13045625
> 
> 赞同：0
> 
> 时间：2012-10-24T08:39:57.587
> 
> 标签：python, django, linux, less

我在 Linux 上运行 Django，使用 django twitter 引导模板。我安装的 css 较少，甚至可以从命令行访问它。但是，当我运行项目时，此时在模板渲染过程中出现错误：

```
{% compress css %} 
```

出现未找到 lessc 模块的错误。

路径会不会错？设置。py 似乎是对的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:56:08.500

也许您应该使用以下命令`less`全局安装：

```
npm install -g less 
```

另外，我建议您考虑类似的 django-app: [django-pipeline](http://django-pipeline.readthedocs.org/en/latest/)，因为：[django-compress 不再维护](http://code.google.com/p/django-compress/)。

使用 django-pipeline，您可以通过设置设置较少编译器的路径`PIPELINE_LESS_BINARY`。

# mysql - 如何从数据库记录中删除不需要的多重符号（例如 &、%、@）符号

> ID：13045629
> 
> 赞同：4
> 
> 时间：2012-10-24T08:40:01.903
> 
> 标签：mysql, sign

我无法删除 MySql 数据库中的多个不需要的登录，因为它太大了。是否有任何可用的脚本来删除该标志？

带有多个符号的示例记录：-

```
[]No. 11, Persiaran Bukit [] Satu&[]Taman @Sri %Nibong 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:53:17.380

我在这里建议的是准备一个包含所有可能不需要的字符的表，然后使用替换功能在一个选择查询中处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:42:11.963

使用`REPLACE`功能。

```
UPDATE tablename
SET ColName = REPLACE(REPLACE(REPLACE(Colname, '&', ''), '@', ''), '%', '') 
```

# php - 如何呼应动态表格的元素？

> ID：13045630
> 
> 赞同：0
> 
> 时间：2012-10-24T08:40:15.983
> 
> 标签：php, html, forms

我有一个动态表格。

用户可以根据需要创建 n 个字段。他可以在表单中创建 1,2,3,4... 数量的元素

此处编码id

```
<form method="post" action="">
<label>Service</label>
<select name="service">
<option value="1">Purchase</option>
<option value="2">Sale</option>
<option value="3">Rent</option>
</select>
<label>Number of fields</label><input type="text" name="no_fields"><br>
<input type="submit" name="submit">
</form>
<?php
if($_POST['no_fields']>0)
{
    ?>
    <form method="post" action="">
    <?php
    $j=$_POST['no_fields'];
    $s=$_POST['service'];
    for($i=1;$i<=$j;$i++)
    {
        ?>
        <?php echo $i.". "; ?>
        <label>Name of the field : </label><input type="text" name="name_field[]">
        <label>Type : </label>
        <select name="type[]">
        <option>text</option>
        <option>textarea</option>
        <option>button</option>
        <option>radio buton</option>
        <option>checkbox</option>
        </select>
        <br><br>
        <?php
    }
    ?>
    <input type="hidden" name="serv_id" value="<?php echo $s; ?>">
    <input type="hidden" name="loop" value="<?php echo $j; ?>">
    <input type="submit" name="save" value="save">
    </form>
    <?php
}
if(isset($_POST['save']))
{
foreach($name_field as $v)
{
echo $v;
}
}
    ?> 
```

我想呼应表单的元素，但我无法做到这一点。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:21:11.883

```
if(isset($_POST['save'])) {
$values = array_values($_POST);
    foreach($_POST as $v) {
        print_r($v);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:56:34.710

相同的字段名称应该不是问题，因为它是数组格式。可能的解决方案是：

```
foreach($_POST['name_field'] as $nf) //this is for name field
echo $nf;
foreach($_POST['type'] as $te)
echo $te; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:41:49.787

使用同名字段可能会产生问题。

```
 <label>Name of the field : </label><input type="text" name="name_field[]">
        <label>Type : </label>
        <select name="type[]"> 
```

应该

```
<label>Name of the field : </label><input type="text" name="name_field<?php echo $i;?>[]">
        <label>Type : </label>
        <select name="type<?php echo $i;?>[]"> 
```

使用这样的东西

```
foreach($_POST as $p){
echo $p;
} 
```

# git - GIT (DVCS) - 锁定或签出文件（如 svn）并冲突合并文件

> ID：13045634
> 
> 赞同：1
> 
> 时间：2012-10-24T08:40:22.703
> 
> 标签：git, git-svn

我只是从 SVN 转移到 GIT。我浏览了帖子和评论，但没有找到有效的解决方案。

我有以下问题：

1.  如何签出或锁定文件，以便其他开发人员知道文件不可用并由该用户签出？

2.  如果一个用户更新了其他用户正在处理的同一文件，并且两者都将更改推送到主存储库。现在，它如何解决冲突或合并。
    冲突或合并如何工作。
    我们是否可以选择管理 tortoiseGIT 中的冲突或通过 GIT 存储库推送命令进行内部管理。?

请让我知道上述问题的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:48:42.837

git 是一个分布式 vcs，因此您所做的任何事情都将在您的本地存储库中完成，而本地存储库本身并不知道其他开发人员的本地存储库。所以回答问题 1：
由于 git 没有中央服务器存储库（您可以创建一个，但它只是您定义的中央存储库，而不是 git 的设计），因此没有实例可以像 svn 那样锁定文件。

[这里](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)有一篇关于团队工作流程的详细文章。

合并冲突尽可能由 git 管理。如果无法解决，则会显示存在手动解决的合并冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:42:23.690

关于 2.，首先将您的本地提交重新设置在获取的远程分支之上（另一个开发人员已经推送的分支）。
如果需要，rebase 将触发合并。
您在本地解决它们，*然后*推送您的提交。

# iphone - signpass 错误：找不到 pass.com.xxx.xxxx 的身份

> ID：13045639
> 
> 赞同：10
> 
> 时间：2012-10-24T08:40:38.180
> 
> 标签：iphone, ios6, passbook

我使用 Apple passbook 演示 passbook_materials 中的 signpass 来创建一个 .pkpass 文件我已经创建了我的 pass 类型 ID 并更改了 pass.json 中的 passTypeIdentity。当我执行：`./signapss -p ./myPass`在终端中，它显示：

> 找不到 pass.com.xxx.xxx 的身份。

有人知道吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-26T23:39:51.163

您需要将您的证书安装到您的钥匙串中（双击从 Apple 下载的文件就足够了）。您还需要在钥匙串中安装 Apple WWDR 证书。您还必须确保将 pass.json 中的 teamIdentifier 字段设置为正确的值，而不仅仅是 passTypeIdentifier 字段。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-11T12:47:54.067

就我而言，存折证书是在另一台计算机上生成的，所以我必须将私钥导出到“xx.p12”文件中，在我的新 Mac 中安装 p12 文件和存折证书，问题就消失了。

您也可以按照本文档中的第 1 步操作：[tutorial](https://github.com/drallgood/jpasskit/blob/master/jpasskit/tutorial/mini-tutorial.txt)
这是非常细致的钱包证书指南。

# c# - c# 中用于数据注释的嵌入式资源中的名称常量

> ID：13045640
> 
> 赞同：2
> 
> 时间：2012-10-24T08:40:38.040
> 
> 标签：c#, c#-4.0, data-annotations, embedded-resource

当我创建一个嵌入式资源文件时，例如`MyResources.resx`，我可以使用生成的属性从代码（或在 asp.net 视图等中）轻松访问这些值`MyResources.MyLabel1`。如果我想将它用作数据注释，我会写如下内容：

```
[Display(Name = "MyLabel1", ResourceType = typeof(MyResources))]
public string SomeInput { get; set; } 
```

显然，“MyLabel1”现在是一个硬编码字符串，当资源被修改、名称被更改或删除等时可能会导致问题。

我见过人们使用这样的常量：

```
public const string MyLabel1 = "MyLabel1"; 
```

并将数据注释更改为如下所示：

```
[Display(Name = MyConstants.MyLabel1, ResourceType = typeof(MyResources))]
public string SomeInput { get; set; } 
```

不过，您仍然必须维护这个硬编码的字符串。

所以我的问题是：我能以某种方式生成这些名称常量吗？使用自定义 T4 模板或自定义资源管理器或任何已经存在的东西？因此更改或删除标签会导致编译错误......

# https - Https 是否真的使用传输层安全性

> ID：13045643
> 
> 赞同：1
> 
> 时间：2012-10-24T08:40:56.293
> 
> 标签：https, ssl

我对 HTTPS 有疑问。我的一位前辈告诉我，Https 实际上并没有使用 SSL/TLS，而只是使用了它们的加密算法。他说，证书的握手过程是在传输层完成的，但实际有效载荷的安全密钥加密是在应用层完成的。而且他还说Https其实可以看成是一种表示层协议。

他是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:39:51.693

HTTPS 在[RFC 2818](https://www.rfc-editor.org/rfc/rfc2818)中指定：“ *HTTP Over TLS* ”。

尽管该规范是关于 TLS 的（因为它是 IETF 规范，而 IETF 只使用“TLS”），但它实际上是关于 SSL 或 TLS，这取决于所使用的 SSL/TLS 的版本（请参阅[SSL 和 TLS 之间的区别](https://serverfault.com/a/368574/47187)）。

所以是的，HTTPS 确实使用 SSL/TLS。正如 RFC 所说：

> 从概念上讲，HTTP/TLS 非常简单。只需使用 HTTP over TLS，就像使用 HTTP over TCP 一样。

本质上，加密密钥是在 SSL/TLS 握手期间协商的，HTTP 交换不知道这些密钥。

如果您不相信，请使用 Wireshark 查看一些浏览器流量。您将看到的只是一些 SSL/TLS 流量（交换的 HTTP 被它加密）。

如果您想分析一些流量，您可以设置自己的服务器并使用其私钥查看使用 Wireshark 在 SSL/TLS 之上的正常 HTTP 交换，如[Wireshark SSL](http://wiki.wireshark.org/SSL)页面中所述。（您需要禁用 EDH 密码套件，因为它们提供完美的前向保密性，即使您拥有服务器私钥，也可以防止您破译嗅探到的流量。）此页面还有一些示例 HTTPS 数据，您可以下载并查看Wireshark，无需安装自己的服务器。

从浏览器的角度来看，您还可以在使用 HTTPS 时查看开发人员工具（Firebug 等）报告的流量，您只会看到普通的 HTTP 流量，因为 SSL/TLS 层由下面的 SSL/TLS 库。

一般来说，我不会对 OSI 层过分强调。它们在理论上的网络类中看起来不错，但实际上很难应用于 TCP/IP 堆栈（参见[比较](http://en.wikipedia.org/wiki/OSI_model#Comparison_with_TCP.2FIP_model)和[“*被认为有害的分层*”](https://www.rfc-editor.org/rfc/rfc3439#section-3)），尤其是当您将 SSL/TLS 投入其中时，它被精确设计为不可见就应用层而言（SSL/TLS 通常位于 TCP 之上，就像 TCP 之上的任何其他应用程序协议一样，但它位于它所保护的任何应用程序协议之下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:55:37.247

你的上级应该是你的下级。他不知道他在说什么。以后远离他。HTTPS 只是基于 SSL 的 HTTP，只添加了少量主机名检查以确保证书中的主机名与您连接的站点一致。

具体来说：

> 我的一位前辈告诉我，Https 实际上并没有使用 SSL/TLS，而只是他们的加密算法

错误的。

> 他说证书的握手过程是在传输层完成的

SSL 和 HTTPS 都是错误的。它由应用程序完成，通常在 OpenSSL 或 JSSE 等库中。传输层只做 TCP 部分，不做 SSL 部分。

> 但实际有效载荷的安全密钥加密是在应用层完成的。

又错了：有效载荷加密是在 SSL 和 HTTPS 的应用层中完成的。

> 而且他还说Https其实可以看成是一种表示层协议。

它是一个应用层协议。表示层协议的示例很少（想到 XDR 和 TN3270）。这不是其中之一。但我同意布鲁诺的观点。OSI 层不适用于 TCP/IP，它有自己的层模型，而且，由于 OSI 协议工作的彻底消亡，它们也不适用于其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:47:10.280

来自维基百科：

> HTTP 运行在 OSI 模型的最高层，即应用层；但是安全协议在较低的子层运行，在传输之前加密 HTTP 消息并在到达时解密消息。

[https://en.wikipedia.org/wiki/Https#Network_layers](https://en.wikipedia.org/wiki/Https#Network_layers)

# php - 使用 PHP GD 从 url 创建图像

> ID：13045653
> 
> 赞同：-1
> 
> 时间：2012-10-24T08:41:25.247
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 将网页保存为图像文件？](https://stackoverflow.com/questions/3175392/how-to-save-webpage-as-a-image-file-using-php)

我想使用给定的 url 字符串在服务器上创建一个图像。我想要创建一个网站的屏幕截图。是否可以使用 PHP GD，如果可以，如何？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:00:01.337

你需要像[PhantomJS](http://pielmeier.blogspot.se/2011/02/headless-html-page-rendering-with.html)这样的东西来做到这一点。这可以[从 PHP 调用](https://stackoverflow.com/questions/10651320/starting-phantomjs-server-from-php-and-waiting-for-its-response)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:47:11.720

据我所知，没有现有的 PHP-Lib 可以做到这一点。PHP-GD 与图形有关，但你不能用它来做这件事。即使：如果网站使用 Javascript 来启用网站的某些重要部分，会发生什么？甚至是需要长时间运行请求的图像或其他资源？或者考虑使用 flash 的站点... linux 有一些工具可以批量截取屏幕截图 - 可通过计时器等进行配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:43:22.043

很确定 GD 不能自己处理这个问题。您还需要一个 HTML 渲染器。

# memory - 没有mmap的pthread互斥锁可能吗？

> ID：13045657
> 
> 赞同：1
> 
> 时间：2012-10-24T08:41:54.747
> 
> 标签：memory, pthreads, fork, parent, mmap

在具有写时复制分叉的 Linux 上。在父级中创建 pthread 进程间互斥体时，它会在子级中有效还是只有在我将其映射到共享内存时才会起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:19:38.510

当调用`fork()`整个内存空间时，包括互斥锁，所以要回答你的问题，新的互斥锁将是父级互斥锁的副本，所以你必须这样`mmap`做。

注意：您需要`PTHREAD_PROCESS_SHARED`在 mutex 属性上使用`pthread_mutexattr_getpshared()`.

# wix - 删除许可证对话框

> ID：13045658
> 
> 赞同：38
> 
> 时间：2012-10-24T08:42:07.527
> 
> 标签：wix, wix3.6

我正在使用**Wix 3.6**制作一个内部使用的简单 MSI。我想知道是否有一种简单的方法可以删除许可协议对话框。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-08-25T23:31:54.613

我跳过它使用：

```
<UI>
  <UIRef Id="WixUI_InstallDir" />
  <Publish Dialog="WelcomeDlg"
        Control="Next"
        Event="NewDialog"
        Value="InstallDirDlg"
        Order="2">1</Publish>
  <Publish Dialog="InstallDirDlg"
        Control="Back"
        Event="NewDialog"
        Value="WelcomeDlg"
        Order="2">1</Publish>
</UI> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-12T11:55:03.620

上面提到的 XML 的这种简化（[http://www.howdoicode.net/2011/09/wix-how-to-hide-license-agreement.html](http://www.howdoicode.net/2011/09/wix-how-to-hide-license-agreement.html)）对我有用；这有效地跳过了许可证，而不是挂在自定义页面中

```
<UI Id='Mondo'>
  <UIRef Id="WixUI_Mondo" />
  <UIRef Id="WixUI_ErrorProgressText" />
  <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="SetupTypeDlg"  Order="3">1</Publish>
   <!-- skip the page on the way back too -->
   <Publish Dialog="SetupTypeDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg"  Order="3">1</Publish>
</UI> 
```

我不得不说复制 wix 代码并对其进行修改的一般方法（“更改内置对话框集的 UI 序列”（[http://wixtoolset.org/documentation/manual/v3/wixui/wixui_customizations. html](http://wixtoolset.org/documentation/manual/v3/wixui/wixui_customizations.html) )) 真的有点注定要失败......但是，嘿

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-12T01:40:56.330

我最近遇到了一个模仿 Wix XML 文件的项目 Wix#，但可以让您在 C# 中编写设置。[你可以在https://wixsharp.codeplex.com](https://wixsharp.codeplex.com)上找到这个项目。我最初对带有“条款和条件”的许可证文件有同样的问题，在用户安装软件之前需要接受这些文件。由于该解决方案的性质不要求接受“条款和条件”，因此我必须找到一种方法来删除此对话框。

经过一番搜索（在 Wix# 中），我想出了以下内容：

```
WixSharp.CommonTasks.Tasks.RemoveDialogsBetween(project, 
                              WixSharp.Controls.NativeDialogs.WelcomeDlg,
                              NativeDialogs.InstallDirDlg); 
```

好的，我知道这并不能彻底解决问题，因为这意味着您必须重新编写解决方案，因此下一个调用端口是查看在此过程中发出的 WiX 源文件.

因此，我看到有一个`<UI>`元素具有以下内容：

```
<UI>
  <Publish Dialog="WelcomeDlg" 
           Control="Next" 
           Event="NewDialog" 
           Value="InstallDirDlg" 
           Order="5">1</Publish>

  <Publish Dialog="InstallDirDlg" 
           Control="Back" 
           Event="NewDialog" 
           Value="WelcomeDlg" 
           Order="5">1</Publish>
</UI> 
```

**它将欢迎对话框上的****Next**按钮绑定到**安装目录对话框**（或许可证对话框之后的对话框），并将**安装对话框的****Back**按钮绑定到**欢迎对话框**- 有效地删除了许可证对话框。

 ******* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-24T08:48:38.707

关键是制作自定义 UI 并连接不同的页面。请参阅 WixWiki 上的页面

您想要获取您正在使用的对话框集的 WixUI 代码（例如 Minimal 等），调用它`<UI Id='MyAppWix_UIMinimal'>`并稍微修改它并在您的主 wxs 中引用它。您想使用 WelcomeDlg，而不是 WelcomeEulaDlg 欢迎对话框。调整引用，并将 WelcomeDlg 上的 Next 按钮连接到堆栈中的下一个对话框。

这是一个很好的代码链接：http: [//www.howdoicode.net/2011/09/wix-how-to-hide-license-agreement.html](http://www.howdoicode.net/2011/09/wix-how-to-hide-license-agreement.html)******

# c# - 在 ASP.NET 的内存中存储一 个简单的表？

> ID：13045662
> 
> 赞同：6
> 
> 时间：2012-10-24T08:42:26.823
> 
> 标签：c#, asp.net, .net, memory

有没有一种简单的方法可以在 ASP.NET 中的服务器上的内存中存储一​​个所有用户都共享的简单表？假设我有一个简单的聊天程序，我只想在内存中保存最后 100 条记录（这不是一个真正的应用程序，只是一个示例）。假设我不想让 SQL 中的整个表专门用作这个只有 100 条记录的聊天缓冲区。有什么方法可以创建内存数据表并在连接的用户之间共享？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T08:44:52.557

使用[缓存 (MSDN)](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

> 每个应用程序域创建一个此类的实例，只要应用程序域保持活动状态，它就保持有效。有关此类实例的信息可通过 HttpContext 对象的 Cache 属性或 Page 对象的 Cache 属性获得。

```
DataTable yourDataTable = new DataTable();
Cache["yourTable"] = yourDataTable;

//to access it
DataTable dt = Cache["yourTable"] as DataTable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:44:32.887

您可以使用该`HttpApplicationState`对象将内容存储在内存中并可供所有用户访问：

```
HttpContext.Current.Application["MyTable"] = myTable; 
```

或`Cache`对象（更线程安全）：

```
HttpContext.Current.Cache["MyTable"] = myTable; 
```

[这是一篇关于Application and Cache](http://wiki.asp.net/page.aspx/59/application-and-cache/)的好文章。

> Cache 和 Application 对象提供比 Session 对象更广泛的范围，并且数据可用于 ASP.NET 应用程序中的所有类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:46:24.360

是的，那将是一个全局缓存。最糟糕的做法是存储值是应用程序状态。它本质上是一个键值存储，只要 IIS 运行，它就一直存在。
`Application["someKey"} = SomeObject;`

你可以用同样的方式访问它`

```
var myObject = Application["someKey"];` 
```

有很多更优雅的解决方案，但是当您需要存储少量数据时，这将帮助您解决简单的全局问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:46:39.920

您有很多选择，应用程序缓存在同一个 ASP.NET 应用程序池中的所有用户和所有会话之间共享，请在此处查看：

[http://msdn.microsoft.com/en-us/library/6hbbsfk6(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6hbbsfk6(v=vs.100).aspx)

另一种选择可能是使用内存/嵌入式数据库，例如 SQL Server compact 或 SQL Lite，具体取决于您是否真的想使用类似 db 的方法。

# opengl - 通过打包纹理对大数据进行体渲染

> ID：13045663
> 
> 赞同：1
> 
> 时间：2012-10-24T08:42:31.917
> 
> 标签：opengl, graphics, 3d, visualization, volume-rendering

我想对大于 GPU 内存的大型数据集实现基于 GPU 的光线投射体积渲染。我尝试这样做：

(1)首先我将体积分成大小相等的砖块。

(2)然后我根据传递函数决定每块砖是否透明。

(3)然后我将不透明的砖块存储到“Packed-Texture”中。为了在光线投射渲染期间进行采样，我创建了另一个名为“Index-Texture”的纹理，它将砖块索引存储在 Packed-Texture 中。

当我在着色器中渲染期间进行采样时，首先我计算采样点在哪个砖块中。然后我访问索引纹理以获取采样点的值。但默认值是插值后的值，而不是正确地在 Packed-Texture 中的砖的索引。

所以，我的问题是：在光线投射渲染期间进行采样时，如何从索引纹理中正确获取 Packed-Texture 中的砖索引（采样点所在的位置）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:31:10.587

这不是一个真正的问题，假设您的体积立方体从 [0, 1]³ 开始，然后您将其拆分为每个方向 8 个块。然后将小数坐标乘以 8（或其他）并向下舍入到最接近的整数，从而为您提供索引。向下舍入后，您从缩放的分数坐标中减去索引，这会为您提供子块中的分数位置，即

```
volcube_pos = volcube_frac_pos * volcube_blocks;
volcube_index = (int)floor(volcube_pos);
subblock_pos = volcube_pos - volcube_index; 
```

现在所有这些块都必须存储在某个地方。将它们放入常规的、打包的 3D 纹理中需要禁用过滤、注意栅栏问题 ( [https://stackoverflow.com/a/5879551/524368](https://stackoverflow.com/a/5879551/524368) ) 并自己进行所有过滤插值。

另一种方法是使用 NVidia 的无绑定纹理，而不是打包纹理。

# android - 在windows中下载android模拟器所有版本

> ID：13045664
> 
> 赞同：4
> 
> 时间：2012-10-24T08:42:34.513
> 
> 标签：android, windows, android-emulator

有没有办法在 Windows 上安装 Android Emulator 本身。我需要它来进行测试吗？任何想法？

我不想安装整个 sdk。我只想安装模拟器本身。该模拟器就像用于测试目的的电话一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:49:04.903

如果您想单独下载 SDK 组件（我不知道为什么有人想要做什么，但无论如何..）这里是工具、文档、示例和 API 的链接。

[http://dl-ssl.google.com/android/repository/android-1.1_r1-windows.zip](http://dl-ssl.google.com/android/repository/android-1.1_r1-windows.zip)
[http://dl-ssl.google.com/android/repository/android-1.1_r1-macosx.zip](http://dl-ssl.google.com/android/repository/android-1.1_r1-macosx.zip)
[http: //dl-ssl.google.com/android/repository/android-1.1_r1-linux.zip](http://dl-ssl.google.com/android/repository/android-1.1_r1-linux.zip)
[http://dl-ssl.google.com/android/repository/android-1.5_r04-windows.zip](http://dl-ssl.google.com/android/repository/android-1.5_r04-windows.zip)
[http:// dl-ssl.google.com/android/repository/android-1.5_r04-macosx.zip](http://dl-ssl.google.com/android/repository/android-1.5_r04-macosx.zip)
[http://dl-ssl.google.com/android/repository/android-1.5_r04-linux.zip](http://dl-ssl.google.com/android/repository/android-1.5_r04-linux.zip)
[http://dl- ssl.google.com/android/repository/android-1.6_r03-linux.zip](http://dl-ssl.google.com/android/repository/android-1.6_r03-linux.zip)
[http://dl-ssl.google.com/android/repository/android-1.6_r03-macosx.zip](http://dl-ssl.google.com/android/repository/android-1.6_r03-macosx.zip)
[http://dl-ssl。 google.com/android/repository/android-1.6_r03-windows.zip](http://dl-ssl.google.com/android/repository/android-1.6_r03-windows.zip)
[http://dl-ssl.google.com/android/repository/android-2.0_r01-linux.zip](http://dl-ssl.google.com/android/repository/android-2.0_r01-linux.zip)
[http://dl-ssl.google.com/android/repository/android-2.0_r01-macosx.zip](http://dl-ssl.google.com/android/repository/android-2.0_r01-macosx.zip)
[http://dl-ssl.google.com/android/repository/android-2.0_r01-windows.zip](http://dl-ssl.google.com/android/repository/android-2.0_r01-windows.zip)
[http: //dl-ssl.google.com/android/repository/android-2.0.1_r01-linux.zip](http://dl-ssl.google.com/android/repository/android-2.0.1_r01-linux.zip)
[http://dl-ssl.google.com/android/repository/android-2.0.1_r01-macosx.zip](http://dl-ssl.google.com/android/repository/android-2.0.1_r01-macosx.zip)
[http: //dl-ssl.google.com/android/repository/android-2.0.1_r01-windows.zip](http://dl-ssl.google.com/android/repository/android-2.0.1_r01-windows.zip)
[http://dl-ssl.google.com/android/repository/android-2.1_r03-linux.zip](http://dl-ssl.google.com/android/repository/android-2.1_r03-linux.zip)
[http:// /dl-ssl.google.com/android/repository/android-2.2_r03-linux.zip](http://dl-ssl.google.com/android/repository/android-2.2_r03-linux.zip)
[http://dl-ssl.google.com/android/repository/android-2.3.1_r02-linux.zip](http://dl-ssl.google.com/android/repository/android-2.3.1_r02-linux.zip)
[http:// dl-ssl.google.com/android/repository/android-2.3.3_r02-linux.zip](http://dl-ssl.google.com/android/repository/android-2.3.3_r02-linux.zip)
[http://dl-ssl.google.com/android/repository/android-3.0_r02-linux.zip](http://dl-ssl.google.com/android/repository/android-3.0_r02-linux.zip)
[http://dl-ssl.google.com/android/repository/android-3.1_r03-linux.zip](http://dl-ssl.google.com/android/repository/android-3.1_r03-linux.zip)
[http://dl-ssl.google.com/android/repository/android-3.2_r01-linux.zip](http://dl-ssl.google.com/android/repository/android-3.2_r01-linux.zip)
[http: //dl-ssl.google.com/android/repository/android-14_r03.zip](http://dl-ssl.google.com/android/repository/android-14_r03.zip)
[http://dl-ssl.google.com/android/repository/android-15_r03.zip](http://dl-ssl.google.com/android/repository/android-15_r03.zip)
[http://dl-ssl.google。 com/android/repository/android-16_r03.zip](http://dl-ssl.google.com/android/repository/android-16_r03.zip)
[http://dl-ssl.google.com/android/repository/sysimg_armv7a-14_r02.zip](http://dl-ssl.google.com/android/repository/sysimg_armv7a-14_r02.zip)
[http://dl-ssl.google.com/android/repository/sysimg_armv7a- 15_r02.zip](http://dl-ssl.google.com/android/repository/sysimg_armv7a-15_r02.zip)
[http://dl-ssl.google.com/android/repository/sysimg_armv7a-16_r03.zip](http://dl-ssl.google.com/android/repository/sysimg_armv7a-16_r03.zip)
[http://dl-ssl.google.com/android/repository/samples-2.1_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-2.1_r01-linux.zip)
[http: //dl-ssl.google.com/android/repository/samples-2.2_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-2.2_r01-linux.zip)
[http://dl-ssl.google.com/android/repository/samples-2.3_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-2.3_r01-linux.zip)
[http://dl-ssl.google.com/android/repository/samples-2.3.3_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-2.3.3_r01-linux.zip)
[http ://dl-ssl.google.com/android/repository/samples-3.0_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-3.0_r01-linux.zip)
[http://dl-ssl.google.com/android/repository/samples-3.1_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-3.1_r01-linux.zip)
[http:// /dl-ssl.google.com/android/repository/samples-3.2_r01-linux.zip](http://dl-ssl.google.com/android/repository/samples-3.2_r01-linux.zip)
[http://dl-ssl.google.com/android/repository/samples-14_r02.zip](http://dl-ssl.google.com/android/repository/samples-14_r02.zip)
[http://dl-ssl。 google.com/android/repository/samples-15_r02.zip](http://dl-ssl.google.com/android/repository/samples-15_r02.zip)
[http://dl-ssl.google.com/android/repository/samples-16_r01.zip](http://dl-ssl.google.com/android/repository/samples-16_r01.zip)
[http://dl-ssl.google.com/android/repository/平台工具](http://dl-ssl.google.com/android/repository/platform-tools_r14-windows.zip)
[_r14-windows.zip http://dl-ssl.google.com/android/repository/platform-tools_r14-linux.zip](http://dl-ssl.google.com/android/repository/platform-tools_r14-linux.zip)
[http://dl-ssl.google.com/android/repository/platform-tools_r14-macosx.zip](http://dl-ssl.google.com/android/repository/platform-tools_r14-macosx.zip)
[http://dl-ssl.google.com/android/repository/platform-tools_r15_rc9-windows.zip](http://dl-ssl.google.com/android/repository/platform-tools_r15_rc9-windows.zip)
[http:// dl-ssl.google.com/android/repository/platform-tools_r15_rc9-linux.zip](http://dl-ssl.google.com/android/repository/platform-tools_r15_rc9-linux.zip)
[http://dl-ssl.google.com/android/repository/platform-tools_r15_rc9-macosx.zip](http://dl-ssl.google.com/android/repository/platform-tools_r15_rc9-macosx.zip)
[http://dl-ssl。 google.com/android/repository/tools_r20.0.3-windows.zip](http://dl-ssl.google.com/android/repository/tools_r20.0.3-windows.zip)
[http://dl-ssl.google.com/android/repository/tools_r20.0.3-linux.zip](http://dl-ssl.google.com/android/repository/tools_r20.0.3-linux.zip)
[http://dl-ssl.google.com/ android/repository/tools_r20.0.3-macosx.zip](http://dl-ssl.google.com/android/repository/tools_r20.0.3-macosx.zip)
[http://dl-ssl.google.com/android/repository/tools_r21_rc10-windows.zip](http://dl-ssl.google.com/android/repository/tools_r21_rc10-windows.zip)
[http://dl-ssl.google.com/android/repository/tools_r21_rc10- linux.zip](http://dl-ssl.google.com/android/repository/tools_r21_rc10-linux.zip)
[http://dl-ssl.google.com/android/repository/tools_r21_rc10-macosx.zip](http://dl-ssl.google.com/android/repository/tools_r21_rc10-macosx.zip)
[http://dl-ssl.google.com/android/repository/docs-16_r03.zip](http://dl-ssl.google.com/android/repository/docs-16_r03.zip)
[http://dl-ssl.google.com/android/repository/sources-14_r01.zip](http://dl-ssl.google.com/android/repository/sources-14_r01.zip)
[http://dl-ssl。 google.com/android/repository/sources-15_r02.zip](http://dl-ssl.google.com/android/repository/sources-15_r02.zip)
[http://dl-ssl.google.com/android/repository/sources-16_r02.zip](http://dl-ssl.google.com/android/repository/sources-16_r02.zip)

**谷歌 API**：

[http://dl-ssl.google.com/android/repository/google_apis-3-r03.zip](http://dl-ssl.google.com/android/repository/google_apis-3-r03.zip)
[http://dl-ssl.google.com/android/repository/google_apis-4_r02.zip](http://dl-ssl.google.com/android/repository/google_apis-4_r02.zip)
[http://dl- ssl.google.com/android/repository/google_apis-5_r01.zip](http://dl-ssl.google.com/android/repository/google_apis-5_r01.zip)
[http://dl-ssl.google.com/android/repository/google_apis-6_r01.zip](http://dl-ssl.google.com/android/repository/google_apis-6_r01.zip)
[http://dl-ssl.google.com/android/存储库/google_apis-7_r01.zip](http://dl-ssl.google.com/android/repository/google_apis-7_r01.zip)
[http://dl-ssl.google.com/android/repository/google_apis-8_r02.zip](http://dl-ssl.google.com/android/repository/google_apis-8_r02.zip)
[http://dl-ssl.google.com/android/repository/google_apis-9_r02.zip](http://dl-ssl.google.com/android/repository/google_apis-9_r02.zip)
[http ://dl-ssl.google.com/android/repository/google_apis-10_r02.zip](http://dl-ssl.google.com/android/repository/google_apis-10_r02.zip)
[http://dl-ssl.google.com/android/repository/google_apis-11_r01.zip](http://dl-ssl.google.com/android/repository/google_apis-11_r01.zip)
[http://dl-ssl.google .com/android/repository/google_apis-12_r01.zip](http://dl-ssl.google.com/android/repository/google_apis-12_r01.zip)
[http://dl-ssl.google.com/android/repository/google_apis-13_r01.zip](http://dl-ssl.google.com/android/repository/google_apis-13_r01.zip)
[http://dl-ssl.google.com/android/repository/google_apis-14_r02.zip](http://dl-ssl.google.com/android/repository/google_apis-14_r02.zip)
[http://dl-ssl。 google.com/android/repository/google_apis-15_r02.zip](http://dl-ssl.google.com/android/repository/google_apis-15_r02.zip)
[http://dl-ssl.google.com/android/repository/google_apis-16_r03.zip](http://dl-ssl.google.com/android/repository/google_apis-16_r03.zip)
[http://dl-ssl.google.com/android/repository/ google_tv-12_r02.zip](http://dl-ssl.google.com/android/repository/google_tv-12_r02.zip)

**附加功能**

[http://dl-ssl.google.com/android/repository/support_r10.zip](http://dl-ssl.google.com/android/repository/support_r10.zip)
[http://dl-ssl.google.com/android/repository/market_licensing-r02.zip](http://dl-ssl.google.com/android/repository/market_licensing-r02.zip)
[http://dl-ssl.google。 com/android/repository/market_apk_expansion-r02.zip](http://dl-ssl.google.com/android/repository/market_apk_expansion-r02.zip)
[http://dl-ssl.google.com/android/repository/google_play_services_1013.zip](http://dl-ssl.google.com/android/repository/google_play_services_1013.zip)
[http://dl-ssl.google.com/android/repository/usb_driver_r07-windows。压缩](http://dl-ssl.google.com/android/repository/usb_driver_r07-windows.zip)
[http://dl-ssl.google.com/android/repository/market_billing_r02.zip](http://dl-ssl.google.com/android/repository/market_billing_r02.zip)
[https://dl-ssl.google.com/googleadmobadssdk/googleadmobadssdkandroid-6.2.1.zip](https://dl-ssl.google.com/googleadmobadssdk/googleadmobadssdkandroid-6.2.1.zip)
[https://dl.google.com /gaformobileapps/GoogleAnalyticsAndroid_1.4.2.zip](https://dl.google.com/gaformobileapps/GoogleAnalyticsAndroid_1.4.2.zip)
[http://dl-ssl.google.com/android/repository/webdriver_r02.zip](http://dl-ssl.google.com/android/repository/webdriver_r02.zip)
[http://dl-ssl.google.com/android/repository/gcm_r03.zip](http://dl-ssl.google.com/android/repository/gcm_r03.zip)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-02T08:22:11.397

我认为你只需要在PC中使用Android来体验一些东西，而不是开发应用程序。

以下是执行此操作的步骤

要安装 Android 4.1(16) 模拟器，请从[https://dl-ssl.google.com/android/repository/tools_r19-linux.zip](https://dl-ssl.google.com/android/repository/tools_r19-linux.zip)
下载 SDK Tools Revision 19，它可能支持 Android Jelly Bean。 解压它。[从http://dl-ssl.google.com/android/repository/android-16_r03.zip](http://dl-ssl.google.com/android/repository/android-16_r03.zip) 下载模拟器 不包含系统、数据等图片，从[http://dl-ssl](http://dl-ssl.google.com/android/repository/sysimg_armv7a-16_r03.zip) 下载armv7 system.img [.google.com/android/repository/sysimg_armv7a-16_r03.zip](http://dl-ssl.google.com/android/repository/sysimg_armv7a-16_r03.zip) 解压到system-images/android-16/default文件夹。它应该看起来像 system-images/android-16/default/armeabi-v7a。- 如果使用 64 位 PC，请安装 ia32-libs。（参考：-[这个](https://askubuntu.com/a/504492/964180)，[这个](https://stackoverflow.com/a/10473415/11620356)

```
sudo dpkg --add-architecture i386
sudo apt update
sudo apt install libc6:i386
sudo apt install ia32-libs #or sudo apt install lib32z1 
```

-执行工具/android
-`Android SDK Manager`窗口将打开
- 在此向导中选择`Tools`菜单并选择`Manage AVDs...`
-`Android Virtual Device Manager`窗口将打开- 选择 - 提供名称并选择- 给
sdcard 。 -创建 AVD -在列表中选择 AVD 并单击 -Enjoy ！`New...`
`Android 4.1.2 - API Level 16``Target`
`Size`

`Start...`

如果您想添加更多模拟器，如 Android [2.2、1.6](http://dl-ssl.google.com/android/repository/android-2.2_r03-linux.zip)等，请将[platform-images.zip](http://dl-ssl.google.com/android/repository/android-1.6_r03-linux.zip)放在 platform/ 文件夹中，并在现有 sdk（此处为 4.1.2）中添加新模拟器。

有关系统映像和其他内容的更多链接，请参见[如何在不下载 Android Studio 的情况下下载 Android SDK？](https://stackoverflow.com/q/37505709/11620356)

[https://developer.android.com/studio/releases/sdk-tools](https://developer.android.com/studio/releases/sdk-tools)

[https://androidsdkoffline.blogspot.com/p/android-sdk-tools.html?m=1](https://androidsdkoffline.blogspot.com/p/android-sdk-tools.html?m=1)

[https://android-development-tools-offline.blogspot.com/?m=1](https://android-development-tools-offline.blogspot.com/?m=1)

[https://androidsdkmanager.azurewebsites.net](https://androidsdkmanager.azurewebsites.net)

# javascript - 如何将连接的 jQuery 形成的 html 分配给变量？

> ID：13045669
> 
> 赞同：0
> 
> 时间：2012-10-24T08:43:09.093
> 
> 标签：javascript, jquery, concatenation

我有`$("div").attr("id", "test")`和`$("<span>")`。我想连接它们并将其分配给一个变量。

```
var test = $("<div>").attr("style", "color:red").addClass("test")+$("<span>");
$("body").append(test);​ //gives [object Object][object Object]

test += $("div"); //also want to do like this 
```

JSFiddle[链接](http://jsfiddle.net/zkSEw/1/)显示了我尝试过的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:46:07.320

您不能使用加号运算符连接 jQuery 对象*。*但是 jQuery 提供了`.add()`允许您将更多*元素*添加到现有包装集的方法。

```
var test = $("<div>").attr("style", "color:red").addClass("test");

test.add( $("<span>") );
test.add( $("<div>") ); 
```

现在您可以对所有这些元素进行操作，例如

```
test.appendTo( document.body ); 
```

* * *

见：[http ://api.jquery.com/add/](http://api.jquery.com/add/)

# iphone - 如何为一系列浮点数定义 typedef？

> ID：13045671
> 
> 赞同：0
> 
> 时间：2012-10-24T08:43:22.970
> 
> 标签：iphone, objective-c, ios

我想要一个只接受 0 到 1 之间的浮点值的属性。我可以通过为属性定义 float_t 或 double_t 类型以标准方式做到这一点，但怀疑是否有更优雅的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:55:11.580

以标准方式执行 - 定义`double`/`float`属性并在 setter 中检查有效性 - 示例：

```
@property (nonatomic, assign, readwrite) float property;

@synthesize property = _property;

- (void)setProperty:(float)property {
   NSAssert(property >= 0.0f && property <= 1.0f, @"Invalid value passed to property setter.").   

   _property = property;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:53:22.180

(Objective-)C 不支持子范围类型。为此，您需要 Ada（或其他一些人）。你能做的最好的就是在你的设置器中实施检查。

# java - 在Java中将base64转换为PDF

> ID：13045673
> 
> 赞同：9
> 
> 时间：2012-10-24T08:43:33.483
> 
> 标签：java, pdf, base64

> **可能重复：**
> [在 Java 中解码 Base64 数据](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)

我有一个方法，它接受`String`一个 PDF 文档的 Base64 编码。如何将二进制文件解码回 PDF 文件，然后保存 PDF 文件（或将文件作为`File`对象传回，以便下一个程序可以使用它）。

我需要使用 Java 来做到这一点。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T09:43:07.580

试试这个代码：

```
//Required imports
import java.io.*;
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

// Code
BASE64Decoder decoder = new BASE64Decoder();
byte[] decodedBytes = decoder.decodeBuffer(encodedBytes);

File file = new File("c:/newfile.pdf");;
FileOutputStream fop = new FileOutputStream(file);

fop.write(decodedBytes);
fop.flush();
fop.close(); 
```

# c# - 在 Linq 中连接可枚举和数字

> ID：13045675
> 
> 赞同：0
> 
> 时间：2012-10-24T08:43:41.107
> 
> 标签：c#, .net, linq, ienumerable

> **可能重复：**
> [将单个元素添加到 IEnumerable 集合的最佳方法是什么？](https://stackoverflow.com/questions/4189563/what-is-the-best-wayto-add-single-element-to-an-ienumerable-collection)

假设我想连接 Enumerable.Repeat(100, 100) 和数字 3，最好的方法是什么？

我当然可以 `Enumerable.Repeat(100, 100).Concat(Enumerable.Repeat(3,1))`，但它看起来不是很有表现力......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:49:45.910

如果你真的想让它整洁，那么最好的办法是为类似的东西创建一个扩展方法`ConcatSingle`，然后调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:47:56.307

您可以使用仅包含该元素的中间数组：

```
Enumerable.Range(100, 100).Concat(new []{ 3 }); 
```

您还可以创建一个扩展方法来允许这样做，而无需创建额外的数组：

```
public static IEnumerable<T> ToEnumerable<T>(this T obj)
{
    yield return obj;
} 
```

现在这是可能的：

```
Enumerable.Range(100, 100).Concat(3.ToEnumerable()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:53:37.610

```
public static IEnumerable<T> Concat(this IEnumerable<T> source, T item)
{
    //the code here is not very expressive to you :)
} 
```

**编辑**建议不要使用方法 name `Concat`，使用`ConcatSingle`or`ConcatOne`代替，请参阅下面评论中的讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:50:52.483

您可以创建将单个值转换为 IEnumerable 的扩展方法

```
public static class LinqEx
{
    public static IEnumerable<T> ToIEnumerable<T>(this T singleItem)
    {
        yield return singleItem;
    }
} 
```

然后使用

```
Enumerable.Repeat(100, 100).Concat(3.ToIEnumerable()) 
```

# javafx-2 - 初始化中的 NPE

> ID：13045676
> 
> 赞同：0
> 
> 时间：2012-10-24T08:43:47.743
> 
> 标签：javafx-2, fxml

在阅读[了introduction_to_fxml](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html)之后，我的印象是初始化方法可以用作spring 的afterPropertiesSet 或EJB 的@PostConstruct 方法——在调用它时应该设置所有成员变量。但是当我尝试时，我得到了 NPE。我尝试的代码如下所示。

主应用：

```
public class MyApp extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("/myapp.fxml"));///MAIN LOAD

        Scene scene = new Scene(root, 320, 240);
        scene.getStylesheets().add("/myapp.css");
        stage.setScene(scene);
        stage.setTitle("my app");
        stage.show();
    }

    public static void main(String[] args) { launch(); }
} 
```

myapp.fxml：

```
...
<VBox fx:id="root" xmlns:fx="http://javafx.com/fxml" >
       <ControlA>
           <SomeClass>       
           </SomeClass>
       </ControlA>
</VBox> 
```

控制A.java：

```
@DefaultProperty("aproperty")
public class ControlA extends StackPane {
   private SomeClass aproperty;

     public ContentPane(){
        try {
            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("/controls/ControlA.fxml"));
            fxmlLoader.setRoot(this);
            fxmlLoader.setController(this);

            fxmlLoader.load();//ControlA LOAD

        } catch (IOException exception) {
            throw new RuntimeException(exception);
        }
    }

    public void initialize() {
         //aproperty is null here, called from ControlA LOAD
    }

   //aproperty get/set
   public void setAproperty(SomeClass p){//it is called from MAIN LOAD
   ....
} 
```

组件的 initialize 方法是从它的 load 方法调用的，并且它的属性是从 parent 的 load 方法设置的，该方法稍后调用。而且看起来可以理解，只有读取父 fxml 才能构造组件的属性值。但如果是这样，在使用组件之前以及在初始化所有道具之后初始化组件的最佳实践是什么？

最好的问候，尤金。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:59:28.030

您需要在控制器中实现[Initializable](http://docs.oracle.com/javafx/2/api/javafx/fxml/Initializable.html)接口。我的印象是这仅适用于控制器。

# c++ - 使用 qsql（c++ 和 qt）将数组（二进制数据）插入到 postgres 数据库中

> ID：13045677
> 
> 赞同：0
> 
> 时间：2012-10-24T08:43:51.403
> 
> 标签：c++, qt, postgresql, insert

考虑以下与 postgres 数据库的交互：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");
db.setHostName("acidalia");
db.setDatabaseName("customdb");
db.setUserName("mojito");
db.setPassword("J0a1m8");
bool ok = db.open();
QSqlQuery query(db);

QSqlQuery query(db);

QVector<int> byteArray(2); 
byteArray[0] = 0;
byteArray[1] = 7;

QVariant v = QVariant::fromValue(byteArray); 

cout << "dropping a table: " << query.exec("drop table aaa;") << endl; //gives 1
cout << "creating a table: " << query.exec("create table aaa (gid integer, pos integer[])") << endl; // gives 0
query.prepare("INSERT INTO aaa (gid) VALUES (:gid, :pos)");
query.bindValue(0, 1);
query.bindValue(1, v);
cout << "inserting: " << query.exec() << endl; // gives 0 :-( 
```

当然，这样做的一种方法是使用手动构建的 sql 语句发送数据，并将查询作为服务器上的普通查询执行（字节数组将作为字符串插入），但我正在寻找一个更好的解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:25:48.807

INSERT 声明了 3 个目标列，但有 4 个绑定值。

> query.prepare("INSERT INTO geo (gid, bboxx, bboxy) " "VALUES (:gid, :bboxx, :bboxy, :pos)");

一旦在 bboxy 之后添加了 bytea 列，这应该可以工作。

# c++ - c32rtomb 转换成什么编码？

> ID：13045682
> 
> 赞同：21
> 
> 时间：2012-10-24T08:44:09.157
> 
> 标签：c++, unicode, c++11

函数`c32rtomb`和`mbrtoc32`from `<cuchar>`/`<uchar.h>`在 C Unicode TR ( [draft](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1040.pdf) ) 中描述为执行 UTF-32 ¹和“多字节字符”之间的转换。

> (...) 如果`s`不是空指针，则该`c32rtomb`函数确定表示与给出的宽字符相对应的多字节字符所需的字节数`c32` （包括任何移位序列），并将多字节字符表示存储在其数组中第一个元素由 指向`s`。(...)

这是什么“多字节字符表示”？我实际上对以下程序的行为感兴趣：

```
#include <cassert>
#include <cuchar>
#include <string>

int main() {
    std::u32string u32 = U"this is a wide string";
    std::string narrow  = "this is a wide string";
    std::string converted(1000, '\0');
    char* ptr = &converted[0];
    std::mbstate_t state {};
    for(auto u : u32) {
        ptr += std::c32rtomb(ptr, u, &state);
    }
    converted.resize(ptr - &converted[0]);
    assert(converted == narrow);
} 
```

它中的断言是否保证保持¹？

* * *

¹在定义的假设下工作`__STDC_UTF_32__`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T00:08:35.807

为了保证断言成立，有必要使用的多字节编码`c32rtomb()`与用于字符串文字的编码相同，至少就字符串中实际使用的字符而言。

C99 7.11.1.1/2 指定`setlocale()`使用类别`LC_CTYPE`影响字符处理函数以及多字节和宽字符函数的行为。我没有看到任何明确承认效果是设置使用的多字节和宽字符编码，但这就是目的。

所以使用的多`c32rtomb()`字节编码是来自默认“C”语言环境的多字节编码。

C++11 2.14.3/2 指定执行编码、宽执行编码、UTF-16 和 UTF-32 用于对应的字符和字符串字面量。因此`std::string narrow`使用执行编码来表示该字符串。

那么这个字符串的“C”语言环境编码和这个字符串的执行编码一样吗？

C99 7.11.1.1/3 指定“C”语言环境为 C 翻译提供“最小环境”。这样的环境不仅包括字符集，还包括所使用的特定字符代码。所以我相信这不仅意味着“C”语言环境必须支持翻译所需的字符（即基本字符集），而且“C”语言环境中的那些字符必须使用相同的字符代码。

字符串文字中的所有字符都是基本字符集的成员，因此将`char32_t`表示转换为“C”语言环境表示必须产生与编译器为字符串文字`char`产生的相同的值序列；`char`断言必须成立。

我没有看到任何建议在执行编码和“C”语言环境之间以兼容的方式支持基本字符集之外的任何内容，因此如果您的字符串文字使用了基本字符集之外的任何字符，那么就不会有任何保证断言成立。即使规定了执行字符集和“C”语言环境中都存在的扩展字符，我看不到表示形式相互匹配的任何要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T12:32:18.090

问题中链接的 TR 说

> 最多`MB_CUR_MAX`存储字节。

（在 C99 中）定义为

> 一个正整数表达式，其类型`size_t`是当前语言环境指定的扩展字符集的多字节字符中的最大字节数

我相信这足以证明 TR 的意图是生成由当前安装的 C 语言环境定义的多字节字符：UTF-8 表示`en_US.utf8`，GB18030 表示`zh_CN.gb18030`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T08:45:35.690

正如我所测试的，在 Linux/MacOSX 中，c32rtomb 将字符串从 UTF-32 转换为特定于语言环境的编码。您可以使用 nl_langinfo(CODESET) 来获取当前使用的编码。

但是，libc 默认使用“C”语言环境，它使用 ISO-8859-1 作为编码。要将编码更改为系统环境指定的编码，通常是 UTF-8，但也可能是其他编码，请使用 setlocale(LC_CTYPE, "")。

但是，在 Windows VS2015+ 中，c32rtomb 始终转换为 UTF-8。由于 vcruntime 不支持 UTF-8 语言环境（仅支持传统的 ANSI/OEM 语言环境），如果它遵循标准，c32rtomb/c16rtomb 将与 wcrtomb 完全相同，根本没有用处。

# java - 在构建战争期间替换文件内容（maven2）

> ID：13045684
> 
> 赞同：4
> 
> 时间：2012-10-24T08:44:14.917
> 
> 标签：java, maven, build

如何在 maven-war-plugin 使用它来构建战争之前替换文件的内容？

重点是：

*   在 eclipse 中启动的 tomcat 和 mvn tomcat:run 我想使用开发配置。它应该在类路径中（例如在资源文件夹中）。所以文件应该在所有阶段都在那里进行测试，但不是在打包阶段
*   在竹、uat、prod 服务器上，我希望删除此配置。它将从类路径中提供
*   但我不想删除该文件。我们使用共享服务器，因此任何人都可以将具有相同名称的文件放在类路径上（例如application.properties）。所以我希望这个文件在战争中（所以春天不会在战争之外寻找它）但它应该是空的。
*   我不想使用配置文件，因为我想让相同的包在所有环境中工作

所以问题是：我如何在构建战争期间（或之前）替换文件的内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:18:09.297

我将在这里给你一个完全不同的答案，这将使两个不同的文件具有自己的配置成为可能，然后过滤到一个文件中。

```
.
├── pom.xml
└── 源
    └── 主要
        ├── java
        ├── 网页应用
        | └── WEB-INF
        | └── web.xml
        ├── 过滤器
        | ├── dev.properties
        | └── 产品属性
        └── 资源
            ├── application.properties
            └── other.properties

```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q13045684</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.4.3</version>
                <executions>
                    <execution>
                        <id>dev-resources</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>src/main/resources</directory>
                                    <includes>
                                        <include>application.properties</include>
                                    </includes>
                                    <filtering>true</filtering>
                                </resource>
                            </resources>
                            <filters>
                                <filter>src/main/filters/dev.properties</filter>
                            </filters>
                        </configuration>
                    </execution>
                    <execution>
                        <id>prod-resources</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                            <overwrite>true</overwrite>
                            <resources>
                                <resource>
                                    <directory>src/main/resources</directory>
                                    <includes>
                                        <include>application.properties</include>
                                    </includes>
                                    <filtering>true</filtering>
                                </resource>
                            </resources>
                            <filters>
                                <filter>src/main/filters/prod.properties</filter>
                            </filters>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

`src/main/filters/dev.properties`

```
someProperty = foo
someOtherProperty = bar 
```

* * *

`src/main/filters/prod.properties`

```
someProperty =
someOtherProperty = 
```

* * *

`src/main/resources/application.properties`

```
someProperty = ${someProperty}
someOtherProperty = ${someOtherProperty} 
```

* * *

这将为您提供三个可以使用的文件。输出将只有`application.properties`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:35:11.470

你可以用 来详细说明一下[`maven-resources-plugin`](http://maven.apache.org/plugins/maven-resources-plugin/copy-resources-mojo.html)来完成这个。

首先，您必须将您的特殊文件放在文件`src/main/resources`夹中的一个目录中。

然后在文件夹中的另一个文件夹下放置一个空文件`src/main/resources`。

这只是一个例子：

```
.
├── pom.xml
└── 源
    └── 主要
        ├── java
        ├── 网页应用
        | └── WEB-INF
        | └── web.xml
        └── 资源
            ├── 产品
            | └── application.properties
            └── 开发
                └── application.properties

```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q13045684</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.4.3</version>
                <executions>
                    <execution>
                        <id>dev-resources</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>src/main/resources/dev</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>prod-resources</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                            <overwrite>true</overwrite>
                            <resources>
                                <resource>
                                    <directory>src/main/resources/prod</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <excludes>
                    <exclude>dev/**</exclude>
                    <exclude>prod/**</exclude>
                </excludes>
            </resource>
        </resources>
    </build>
</project> 
```

使用此配置，您将在文件夹中获得不同的文件，`target/classes`具体取决于您使用的目标。

```
mvn test 
```

将`src/main/resources/dev/application.properties`文件放在`target/classes`.

```
mvn package 
```

将`src/main/resources/prod/application.properties`文件放在`target/classes`.

`src/main/resources`将照常复制和/或过滤下面的任何其他资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:49:10.857

试试

```
https://maven.apache.org/plugins/maven-assembly-plugin/ 
```

但它是一种反模式。最好使用 AppServer 中的 context-params 和 jndi-resources。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:20:57.800

我发现[maven replacer plugin](http://code.google.com/p/maven-replacer-plugin/)它很容易允许更改文件内容

# latex - iBooks 对齐示例因“无效方程式”而失败

> ID：13045685
> 
> 赞同：1
> 
> 时间：2012-10-24T08:44:15.387
> 
> 标签：latex, ibook-author

复制/粘贴 Apple 的[iBooks Author 中的所有三个对齐示例：关于 LaTex](http://support.apple.com/kb/HT5321)失败并显示“无效方程式”。例如

![在此处输入图像描述](../Images/e9dafb108e6037f5d993afa30a701737.png)

对齐的正确格式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:44:41.720

请替换`ALIGNED.EN_US`为`aligned`，并替换`RED.EN_US`为`red`。祝你好运！

# android - Phonegap Android：如何在新的浏览器窗口中打开列入白名单的域网址？

> ID：13045692
> 
> 赞同：5
> 
> 时间：2012-10-24T08:44:38.320
> 
> 标签：android, cordova, whitelist

我正在使用 Cordova 1.9 + JQM 开发 iOs 和 Android 应用程序。

该应用程序从“www.example.com”中的 JSON 服务读取数据，因此我在 cordova.xml 中将此域列入白名单

问题是我需要在应用程序外部的新浏览器窗口中打开一些指向 www.example.com 的 URL。

我试过这些：

```
<a href="#" onclick="navigator.app.loadUrl('http://www.example.com/external')"
   class="ui-link" rel="external" target="_blank">external</a>

<a href="#" onclick="window.open('http://www.example.com/externa')"
   class="ui-link" rel="external" target="_blank">external</a>

<a href="http://www.example.com/external"
   class="ui-link" rel="external" target="_blank">external</a> 
```

...但他们都在 webView 内打开新窗口，而不是在本机浏览器新窗口中打开。我在 iOS 中完成了这项工作，但看不到适用于 Android 的解决方案。

任何帮助，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T13:45:01.210

有两种方法可以做到这一点：

1.  采用`navigator.app.loadUrl("http://www.example.com/index.html", {openExternal: true});`
2.  使用[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)插件和它的 openExternal 命令。

# c++ - 负数字字符串（例如“-10”）到无符号短

> ID：13045693
> 
> 赞同：10
> 
> 时间：2012-10-24T08:44:45.263
> 
> 标签：c++

代码：

```
#include <iostream>
#include <string>
#include <sstream>
#include <algorithm>
using std::cerr;
using std::cout;
using std::stringstream;
using std::string;
using std::for_each;

void convert(const string& a_value)
{
    unsigned short i;
    if (stringstream(a_value) >> i)
        cout << a_value << " converted to " << i << ".\n";
    else
        cerr << a_value << " failed to convert.\n";
}

int main()
{
    string inputs[] = { "abc", "10", "999999999999999999999", "-10", "0" };
    for_each(inputs, inputs + (sizeof(inputs)/sizeof(inputs[0])), convert);
    return 0;
} 
```

Visual Studio 编译器（v7、v8、v9、v10）的输出：

```
abc 转换失败。
10 转换为 10。
999999999999999999999 转换失败。
-10 转换为 65526。
0 转换为 0。

```

g++ 的输出（v4.1.2、[v4.3.4](http://ideone.com/T2sMF3)）：

```
abc 转换失败。
10 转换为 10。
999999999999999999999 转换失败。
-10 转换失败。
0 转换为 0。

```

我预计`"-10"`无法将其转换为，`unsigned short`但它在 VC 编译器中成功。这是一个：

*   VC 编译器中的错误？
*   GNU 编译器中的错误，我的期望不正确？
*   实现定义的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:13:27.493

答案取决于您使用的 C++ 版本。C++03 及更早版本要求输入符合 what `sscanf`does（这里使用`"%hi"`输入说明符），并将`sscanf`整数值读入（有符号）短整型，不检测溢出；然后将结果（通过隐式转换）分配给您的`unsigned short`. C++11 需要调用的等价物`strtoull`，它不允许 `-`符号，并且在溢出的情况下需要一个错误（这是未定义的行为`sscanf`，因此是 C++03）。

在实践中，C++03 的所有合理实现都检查过低，并且在这种情况下的“未定义行为”对应于现在需要的。另一方面，他们被*要求*接受现在（逻辑上）禁止的减号。

编辑（更正）：在重新阅读要求时`strtoull`，我发现它确实需要接受减号。因此，尽管看起来很愚蠢，但该标准确实需要输入无符号整数类型才能接受减号。（还要注意， 的行为`strtoull`取决于全局 C 语言环境，这可能会接受额外的可能性。）

编辑（进一步澄清）：正如 ectamur 指出的那样，这应该是一个错误（在 C++11 中），因为`(unsigned long long)( -10 )`太大而无法在`unsigned short`. 另一方面，在 C++03 之前它仍然是未定义的行为（这可能是 VC++ 所遵循的——所以无论他们做什么都是“正确的”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:12:54.537

g++ 是正确的。无符号整数类型的算术提取器在 27.7.2.2.2p1 中定义为取决于`num_get<>`; 22.4.2.1.2p3 规定：

> 第 3 阶段：在第 2 阶段（字段）中累积的 s 序列`char`通过 [...] 的规则转换为数值 - 对于无符号整数值，函数`strtoull`.

并且存储的数字应该是

> — 最正的可表示值，如果该字段表示的值太大而无法在 中表示`val`。`ios_base::failbit`分配给`err`。

在 的操作上，C++ 遵循 C，这对于尝试将负号字段转换为;`strtoull`的结果有点不清楚。`strtoull`它声明“*转换产生的值被否定（在返回类型中）* ”，这`unsigned long long`将导致符号换行（到`ULONGLONG_MAX - 10 + 1`）。

因此`strtoull`返回一个太大而无法在 中表示的值`unsigned short`，并且`num_get`需要存储`USHORT_MAX`和设置失败位。

另一方面， 22.4.2.1.2p3 还指出存储的数字应该是（我的重点）：

> — 可表示的最大负值**或无符号整数类型为零**，如果该字段表示的值太大而不能用负表示`val`。`ios_base::failbit`分配给`err`。

该子句的存在表明`strtoull`对于带负号的字段不严格遵循 的规则；在这种解释下`num_get`，需要存储`0`和设置失败位。

在任何一种情况下，转换都需要失败。

# locking - 强制互斥锁解锁（可能来自不同的线程）？

> ID：13045695
> 
> 赞同：1
> 
> 时间：2012-10-24T08:44:49.287
> 
> 标签：locking, pthreads, mutex, unlock

我知道这有点“违反规则”，但我正在寻找一种**强制解锁**互斥锁的选项，可能来自不同的线程。

它可能被认为是某种黑客行为，因为传统 API 可能并不真正支持它，但是有这样的选择吗？

例如，对我来说可能很有趣的一种情况是，如果需要清理，一个线程执行一般清理，但另一个线程正在处理它锁定的互斥锁，这不是等待的真正选择那个线程来释放它。

我正在使用 pthread 互斥锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:53:37.157

如果您只对“清理”感兴趣，请使用信号量进行锁定 - 您始终可以在一个额外的单元中填充以唤醒等待线程以使其终止。

如果该过程将要关闭，我无论如何都不会为清理工作而烦恼，除非有一些重要的、压倒一切的理由（“干净的”valgrind 转储不是其中之一：）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:06:25.720

[您可以使用pthread_mutex_destroy(pthread_mutex_t *mutex)](https://computing.llnl.gov/tutorials/pthreads/man/pthread_mutex_destroy.txt)销毁互斥锁​​。等待（锁或trylock）将返回`EINVAL`，您可以将其解释为“清理”的分支。注意：此操作后互斥对象不再有效。但是有一些危险，因为：*尝试破坏锁定的互斥体会导致未定义的行为。*未定义的行为在这种意义上意味着您必须注意这种特殊情况。但这是你的意图，所以只要你的清理分支正确，只有在确定没有其他线程这样做时才触摸受互斥锁保护的东西。之后*可以重新初始化被破坏的互斥对象*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:51:50.093

这里的问题与等待获取特定互斥锁的多个线程有关吗？

如果情况是线程保持了很长时间。以下应该会有所帮助并且会更清洁。如果您可以在持有互斥锁的函数中间退出，最好使代码模块化并检查条件。

通过检查多个地方的情况，您应该能够最大限度地减少等待时间并处理所有相关情况。

# c# - 代码中的 WPF DataGrid 样式

> ID：13045707
> 
> 赞同：3
> 
> 时间：2012-10-24T08:45:51.440
> 
> 标签：c#, wpf, xaml

我在我的 WPF 应用程序中有一个用于数据网格的 xaml 样式，我现在正在编写一个从 DataGrid 继承的自定义控件，并希望在后面的代码中应用以下样式：

```
<Style TargetType="DataGrid">

    <!-- Make the border and grid lines a little less imposing -->
    <Setter Property="BorderBrush" Value="#DDDDDD" />
    <Setter Property="HorizontalGridLinesBrush" Value="#DDDDDD" />
    <Setter Property="VerticalGridLinesBrush" Value="#DDDDDD" />

    <Setter Property="RowStyle">
        <Setter.Value>
            <Style TargetType="DataGridRow">
                <Style.Triggers>
                    <!-- Highlight a grid row as the mouse passes over -->
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="Lavender" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Setter.Value>
    </Setter>
    <Setter Property="CellStyle">
        <Setter.Value>
            <Style TargetType="DataGridCell">
                <Style.Triggers>
                    <!-- Highlight selected rows -->
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Background" Value="Lavender" />
                        <Setter Property="BorderBrush" Value="Lavender" />
                        <Setter Property="Foreground" Value="Black" />
                    </Trigger>
                    <!--StartsEditingOnMouseOver-->
                    <!--<Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="IsEditing" Value="True" />
                    </Trigger>-->
                </Style.Triggers>

                <EventSetter Event="PreviewMouseLeftButtonDown" Handler="DataGridCell_PreviewMouseLeftButtonDown" />
                <EventSetter Event="PreviewTextInput" Handler="DataGridCell_PreviewTextInput" />

                <!-- Add some padding around the contents of a cell -->
                <Setter Property="Padding" Value="4,3,4,3" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="DataGridCell">
                            <Border Padding="{TemplateBinding Padding}" 
                            Background="{TemplateBinding Background}">
                                <ContentPresenter />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

到目前为止，我有以下代码：

```
static DionysusDataGrid()
{

  BorderBrushProperty.OverrideMetadata(typeof(DionysusDataGrid), new FrameworkPropertyMetadata(ColorConverter.ConvertFromString("#FFDDDDDD") as Color?));
  HorizontalGridLinesBrushProperty.OverrideMetadata(typeof(DionysusDataGrid), new FrameworkPropertyMetadata(ColorConverter.ConvertFromString("#FFDDDDDD") as Color?));
  VerticalGridLinesBrushProperty.OverrideMetadata(typeof(DionysusDataGrid), new FrameworkPropertyMetadata(ColorConverter.ConvertFromString("#FFDDDDDD") as Color?));

} 
```

但我不知道如何对本身也有样式的“RowStyle”属性做同样的事情。设置 BorderBrushProperty 时，我也收到以下错误：

```
Default value type does not match type of property 'BorderBrush'." 
```

谁能帮我吗？

谢谢

更新：

我通过将代码更新为以下内容解决了该错误：

```
 static DionysusDataGrid()
{

  BrushConverter converter = new BrushConverter();

  BorderBrushProperty.OverrideMetadata(typeof(DionysusDataGrid), new FrameworkPropertyMetadata((System.Windows.Media.Brush)converter.ConvertFromString("#FFDDDDDD")));
  HorizontalGridLinesBrushProperty.OverrideMetadata(typeof(DionysusDataGrid), new FrameworkPropertyMetadata((System.Windows.Media.Brush)converter.ConvertFromString("#FFDDDDDD")));
  VerticalGridLinesBrushProperty.OverrideMetadata(typeof(DionysusDataGrid), new FrameworkPropertyMetadata((System.Windows.Media.Brush)converter.ConvertFromString("#FFDDDDDD")));

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:24:28.783

为了在代码中创建样式，需要遵循一些通用规则：

您在 XAML 中键入的任何内容在古老的 C# 中都有等效项：

`<Style ...>`只是[System.Windows.Style](http://msdn.microsoft.com/en-us/library/system.windows.style.aspx)。[Setter](http://msdn.microsoft.com/en-us/library/system.windows.setter.aspx)，[Trigger](http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx)也是如此，你可以命名它。

唯一的问题来自`ContentProperty`分配的默认属性的属性，例如当你这样做时：

```
<TextBlock>My text here!</TextBlock> 
```

它将`TextBlock.Text`属性设置为`"My text here!"`，因为`TextBlock`该类标有该属性`[ContentProperty("Text")]`

最后，当您从 C# 构建时，您需要从最嵌套的元素开始：

```
<Style TargetType="DataGrid">
    <Setter Property="BorderBrush" Value="#DDDDDD" />
</Style> 
```

变成：

```
var brushConverter = new BrushConverter();

var bbSetter = new Setter(
    DataGrid.BorderBrushProperty, 
    brushConverter.ConvertFromString("#FFDDDDDD"));

var style = new Style(typeof(DataGrid));    
style.Setters.Add(bbSetter); 
```

从这里您应该能够将任何 XAML 转换为 C#，
但请注意，您不能将任何 C# 映射到 XAML，例如，您不能在 XAML 中制作动态故事板，但您可以在 C# 中.

# iphone - ImagePicker IOS 错误我不明白也不知道如何修复

> ID：13045708
> 
> 赞同：0
> 
> 时间：2012-10-24T08:45:56.830
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiimagepickercontroller

我希望用户在按下按钮时从 iphone 中选择图像（通过操作：buttonClicked），并且我希望在我拥有的图像视图上查看该图像（imageAddPicture 是图像视图的名称）

我找到了很多信息，但是当我使用此代码时，出现以下错误：

self, release, picker.sourceType = (sender == buttonClicked),...

有人能帮助我吗？（我是 stackoverflow.com 的新手，但我真的需要帮助，我会尽力帮助其他人）这是我使用的代码：

```
-(IBAction)buttonClicked:(id)sender
{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.allowsImageEditing = YES;
    picker.sourceType = (sender == buttonClicked) ?    UIImagePickerControllerSourceTypeCamera :
    UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentModalViewController: picker animated:YES];
    [picker release];
}
-(IBAction)selectExitingPicture
{
    if([UIImagePickerController isSourceTypeAvailable:
        UIImagePickerControllerSourceTypePhotoLibrary])
    {
        UIImagePickerController *picker= [[UIImagePickerController alloc]init];
        picker.delegate = self;
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        [self presentModalViewController:picker animated:YES];
        [picker release];
    }
}

-(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo
{
    imageAddPicture.image = image;
    [picker dismissModalViewControllerAnimated:YES];
}
-(void)imagePickerControllerDidCancel:(UIImagePickerController *)  picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:05:42.660

您正在使用自动引用计数来处理您的项目。所以你不需要释放对象。只需删除此行。孩子:)

```
picker.sourceType = (sender == buttonClicked) ?    UIImagePickerControllerSourceTypeCamera :
    UIImagePickerControllerSourceTypeSavedPhotosAlbum; 
```

这条线应该是

```
picker.sourceType = (sender == buttonClicked:) ?    UIImagePickerControllerSourceTypeCamera :
    UIImagePickerControllerSourceTypeSavedPhotosAlbum; 
```

# delphi - 设置为自动隐藏我的窗口设置为最大化时任务栏消失

> ID：13045709
> 
> 赞同：0
> 
> 时间：2012-10-24T08:46:03.020
> 
> 标签：delphi, windows-7

当我将我的应用程序设置为最大化时，我将 Windows 任务栏设置为自动隐藏，底部任务栏的小 2 像素线消失了，如果我最小化我的应用程序，任务栏重新出现后，我无法访问任务栏。

你知道为什么吗 ？

我在 Windows 7 下我的应用程序是在 Delphi XE 中编程的

它是在顶部制作一个带有标签的 chrome/firefox 之类的应用程序。我给你一个关于消失任务栏问题的示例：

DFM

```
object Form3: TForm3
  Left = 0
  Top = 0
  Caption = 'Form3'
  ClientHeight = 320
  ClientWidth = 635
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Arial'
  Font.Style = []
  OldCreateOrder = False
  WindowState = wsMaximized
  OnCreate = FormCreate
  PixelsPerInch = 96
  TextHeight = 14
  object PageControl1: TPageControl
    AlignWithMargins = True
    Left = 0
    Top = 15
    Width = 635
    Height = 305
    Margins.Left = 0
    Margins.Top = 15
    Margins.Right = 0
    Margins.Bottom = 0
    ActivePage = TabSheet3
    Align = alClient
    TabOrder = 0
    object TabSheet1: TTabSheet
      Caption = 'TabSheet1'
    end
    object TabSheet2: TTabSheet
      Caption = 'TabSheet2'
    end
    object TabSheet3: TTabSheet
      Caption = 'TabSheet3'
    end
  end
end 
```

编码

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Dwmapi, ComCtrls, StdCtrls;

type
  TForm3 = class(TForm)
    PageControl1: TPageControl;
    TabSheet1: TTabSheet;
    TabSheet2: TTabSheet;
    TabSheet3: TTabSheet;
    procedure FormCreate(Sender: TObject);
  private
    FWndTopFrameSize : Integer;
    FWndBorderFrameSize : Integer;
    procedure WMNCCalcSize(var Message: TWMNCCalcSize); message WM_NCCALCSIZE;
  end;

var
  Form3: TForm3;

implementation

{$R *.dfm}

procedure TForm3.FormCreate(Sender: TObject);
var
   r : TRect;
begin
   if DwmCompositionEnabled then begin
      SetRectEmpty(r);
      AdjustWindowRectEx(r, GetWindowLong(Handle, GWL_STYLE), False,
                         GetWindowLong(Handle, GWL_EXSTYLE));
      FWndTopFrameSize:=-r.Top;
      FWndBorderFrameSize:=r.Right;
      GlassFrame.Top:=FWndTopFrameSize+PageControl1.Margins.Top;
      GlassFrame.Enabled:=True;
      SetWindowPos(Handle, 0, Left, Top, Width, Height, SWP_FRAMECHANGED);
   end;
end;

procedure TForm3.WMNCCalcSize(var Message: TWMNCCalcSize);
begin
   inherited;
   if DwmCompositionEnabled then
      Inc(Message.CalcSize_Params.rgrc[0].Top, -FWndTopFrameSize);
end;

end. 
```

# python - 用多行 rpython2 绘制图形 - 不会显示其他行

> ID：13045714
> 
> 赞同：0
> 
> 时间：2012-10-24T08:46:17.257
> 
> 标签：python, r, rpy2

我有以下简单的代码，它试图在同一个图中显示三个图表。我用“线条”功能要求的最后两个图表不会显示，我束手无策。这是一个错误还是我在做一些愚蠢的事情？

不使用“行”的解决方法或方法也值得赞赏。

没有错误消息，但不会显示我要求的行（请参阅`r.lines()`下面的调用）。

```
from rpy2.robjects import r
from rpy2.robjects.packages import importr
grdevices = importr('grDevices')

d = {0: {0: 5669, 800: 1001, 100: 2240, 200: 1606, 300: 1366, 400: 1236, 500: 1146, 600: 1083, 900: 964, 700: 1037}, 10: {0: 0, 800: 155, 100: 229, 200: 218, 300: 194, 400: 178, 500: 171, 600: 165, 900: 150, 700: 160}, 5: {0: 0, 800: 195, 100: 415, 200: 330, 300: 279, 400: 258, 500: 241, 600: 219, 900: 185, 700: 201}}
x = range(0,1000,100)
y = [d[0][i] for i in x]
z = [d[5][i] for i in x]
ae  = [d[10][i] for i in x]

#grdevices.pdf(file = 'reads_per_slackvalue_and_cluster_size.pdf')

r.plot(x,y, main='Reads per slack value', xlab='slack value',ylab='number of reads', type='l', col='blue')
r.lines(x, z, col='red')
r.lines(x, ae, col='green')

#r.legend("topleft", ['0','5','10'], ['blue','red','green'])

#grdevices.dev_off()

show_image = raw_input() 
```

这是结果：

![在此处输入图像描述](../Images/30afb9fb5532aee89fb7d9f83e21ed50.png)

这就是我在 R 中交互地做同样的事情（更正确）：

![在此处输入图像描述](../Images/69f3aa4576871f00f93bf709576f2cb4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:34:33.913

你确定你的 rpy2 代码吗？两个提示：

1.  rpy2 生成的图和 R 图显示出截然不同的曲线形状。可能有什么需要调查的？

2.  下面添加到您的代码中的两行确实构成了第二行。绝对值得检查您的 x 和 y 坐标是否*在*绘图区域内。

代码：

```
from rpy2.robjects.vectors import IntVector
r.lines(x, IntVector(y) - 500, col = "green") 
```

# javascript - jquery mobile 圆形导航返回按钮

> ID：13045715
> 
> 赞同：2
> 
> 时间：2012-10-24T08:46:22.373
> 
> 标签：javascript, jquery, jquery-mobile

我在使用 jQuery 移动应用程序后退按钮时遇到问题。这个论点已经讨论了很多，但我仍然必须找到正确的答案。

我有 2 个 html 文件：我们称它们为 list.html 和 description.html

它们中的每一个都包含一个 data-role="page"。

现在，从列表中我将使用

```
$.mobile.changePage('description.html')
```

在描述中，我有几个链接用于填充列表。因此，当单击我使用的链接时

```
$.mobile.changePage('list.html')
```

然后从列表中我可以再次进入描述，依此类推。

现在的问题是，如果我只打开 1 个时间列表和描述，那么一切都是完美的。后退按钮正常工作。但是当我打开另一个列表时，它不会将它添加到正文内的 div 中，而是替换旧的。这样，当我在第一个列表中单击返回时，我会看到第二个调用的结果。

我试过了

```
window.location = 'list.html'
```

但它带来了更多的问题。而且速度较慢。

我希望我已经足够清楚地解释了我的问题。我不知道这听起来是否令人困惑。

希望有人能够提供帮助。谢谢。

**编辑：**

我忘了提到我已经尝试使用类来识别页面（带有它们的页眉、内容和页脚），但它并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:27:51.047

您将使用以下方法解决您的问题：

```
 <script>
        $('#pageDescription').click(function(){
            $('yourdiv').html(content);
            $.mobile.changePage('#pageList','slide');
        });
        $('#pageList').click(function(){
            $('yourdiv').html(content);
            $.mobile.changePage('#pageDescription','slide');
        });
    </script>
    <body>
        <div data-role="page" id="pageDescription">
            //Your html from description.html
        </div>
        <div data-role="page" id="pageList">
            //Your html from list.html
        </div>
    </body> 
```

查看更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)

注意：您不会忘记准备后退按钮！

新代码：

```
<script>
    var oldHtml;
    $('div li a').click(function(){
        oldHtml = $('yourdiv').html();
        $('yourdiv').html(content);
        $.mobile.changePage('#pageDescription','slide');
    });
    $('a[data-icon=back]').click(function(){
        $('yourdiv').html(oldHtml);
    });
</script>
<body>
    <div data-role="page" id="pageDescription">
        //Your html from description.html
    </div>
    <div data-role="page" id="pageList">
        <div data-role="header">
            <a data-role="button" data-icon="back" data-iconpos="notext"></a>
        </div>
        //Your html from list.html like this
        <ul>
            <li><a>link1</a></li>
            <li><a>link2</a></li>
        </ul>
    </div>
</body> 
```

# sql - 如何使用条件进行内部连接......？

> ID：13045717
> 
> 赞同：0
> 
> 时间：2012-10-24T08:46:23.480
> 
> 标签：sql, sql-server, sql-server-2000

SQL Server 2000

使用超过 20 个视图，所有视图都与 table1 内连接（id 和 value1 和 value2）

表格1

```
ID Value1 Value2

001 100 null
001 200 null
001 300 null
001 400 null
001 200 null 
```

或者

```
ID Value1 Value2

001 null 100 
001 null 200 
001 null 300 
001 null 400 
001 null 200 
```

表2

```
ID value1 value2

....
....

some data's 
```

从 table1 中，value1 或 value2 应始终为空。现在的问题是如果 value1 或 value2 列为空，那么输出显示为空，因为所有视图都是带有 id、value1、value2 的内连接

我想使用条件进行内部连接，如果 value1 不为 null，则使用 value1 进行内部连接，或者如果 value2 不为 null，则使用 value2 进行内部连接

像这样查询

```
Select * from table2 inner join with table1 on tabel2.id = table1.id and if table1.value1 is null then table2.value2 = table1.value2 or
else table2.value1 = table1= value1 end if 
```

如何查询上述条件

需要 SQL 查询帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:52:16.960

会像以下工作吗？

```
SELECT * FROM table2
INNER JOIN WITH table1 ON table2.id = table1.id
    AND (table1.value1 = table2.value1 OR table1.value1 IS NULL)
    AND (table1.value2 = table2.value2 OR table1.value2 IS NULL) 
```

我认为如果你有一个大数据集，这可能会很慢......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:20:23.743

试试这个解决方案：

```
Select * 
from table2 
inner join table1 on (tabel2.id = table1.id 
                      and table1.value1 is null 
                      and table2.value2 = table1.value2) 
                  or ( table2.value1 = table1.value1 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:49:29.223

你试过`coalesce(value1, value2)`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:21:59.730

```
SELECT * FROM table2 t2
INNER JOIN WITH table1 t1 ON table2.id = table1.id
On (CASE WHEN t1.value1 is null then t1.value2=t2.value2 else t1.value1=t2.value1)
and
(CASE WHEN t2.value1 is null then t2.value2=t1.value2 else t2.value1=t1.value1) 
```

# java - 如何使用特定的 JRE 交付我的 Java 应用程序？

> ID：13045719
> 
> 赞同：39
> 
> 时间：2012-10-24T08:46:28.037
> 
> 标签：java

有人知道如何将特定的 JRE 与已编译的 Java 应用程序打包在一起吗？我目前有一个可执行的 jar 文件，并希望将 JRE 6 Update 31 放入其中。这样无论客户端安装了哪个 JRE 版本，应用程序都可以使用随附的 JRE。该解决方案应该独立于平台工作。

有任何想法吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-16T20:15:00.607

如果您在目标平台上安装了 jre，比如 Windows 64 位，只需将`jre`Java 安装文件夹下的所有内容复制到您的发行版中即可。然后创建一个批处理文件以指向您的本地 jre 而不是系统文件。

这是我所做的：

*   我的 jar 文件在一个`dist`文件夹中
*   将系统`jre`文件夹复制到`dist\jre-win-1.7.0_04`
*   创建一个 .bat 文件，其中包含以下行 `jre-win-1.7.0_04\bin\java.exe -jar MyProgram.jar`

..繁荣，完成！双击批处理文件，它会使用本地 jre 运行您的 jar 文件。为了证明给自己看，卸载系统 jre 并双击批处理文件。仍然有效。

您可以以类似的方式在 Linux 或 OS X 上执行此操作。

我还想指出，这是一种相当普遍的做法，许多 Java 发行版都是这样完成的。所以，不要说你不能或不应该。

但是，有一些警告。这确实使您的发行版更大并且依赖于平台，在我的示例中为 Windows x64。但是，它是可行和可管理的。jre 支持的平台数量有限，猜猜是什么……它们也依赖于平台。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-14T10:04:54.103

在 OSX 上，他们正在从提供 Java 的 Apple 转向提供 Java 的 Oracle，这也意味着 Java 不会安装在全新安装的 OSX 上。Oracle 提供了一个打包 Java 安装的工具，他们**强烈**建议您在安装过程中提供 jre。这样做的好处是客户不必安装额外的包来运行您的应用程序，并且您可以针对您的正确 Java 运行时测试您的应用程序，并确保在发货前没有不兼容的情况。缺点是构建安装程序稍微复杂一些，并且您的下载大小更大。

当然，如果您想为 Windows、Linux 等提供应用程序，构建安装程序会变得更加复杂，并且仅提供可执行 jar 会简单得多，但这不是客户想要的体验。客户不希望能够下载一个应用程序并在 windows、osx 和 linux 上运行相同的 exe。他们很高兴
每个平台都有不同的安装程序，并希望安装程序以不同的方式工作。

我就是这样做的：

OSX：将 AppBundler 与捆绑的 jre 一起使用，使用 DMGCanvas 放到 Dmg 上。用户只需将应用程序拖到他们的 /Application 文件夹即可。

Windows：将 Izpack 与用 launch4j 打包的捆绑 jre 一起使用，以便安装程序可以作为 exe 运行。

Linux：使用没有捆绑 jre 的 Izpack，因为用户 linux 用户喜欢控制他们机器上的确切内容，但指定允许的最低 Java 版本。理想情况下，我应该为主要的 Linux 包管理器（如 rpm）创建包，但我认为目前这不值得付出努力，因为 Linux 用户只占我客户群的一小部分。

大多数安装都是使用 Maven 和 Ant 自动完成的，因此构建这些不同的安装程序并不费力。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-24T09:06:47.497

对于生产中的商业产品，我们也有同样的情况。我们已经下载了特定版本的 windows 和 linux JRE，并使用[IzPack](http://izpack.org/)将其与应用程序打包在一起。

如果想要安装应用程序，则必须安装“我们的”JRE，并且无论系统安装了 JRE 还是 JDK，应用程序都由该 JRE 运行。

缺点是：安装程序是为 Windows 或 Linux 制作的，大小约为 50 MB。解压后的模块大小为：

*   应用程序本身 ~ 5MB
*   库 ~10 MB
*   JRE ~90 MB

如果我想让它更“独立于平台”，我必须打包两个 JRE，这对于安装程序来说约为 100 MB。它仍然只对两种类型的平台有效（参见 Cthulhu 的回答）。

请注意，我们主要通过 SSH 进行远程安装，并且使用压缩选项将打包时间至少增加了约 10 倍（从几分钟到几十分钟）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-28T13:47:43.793

Oracle 提供了一个相当新的解决方案：

[独立包装](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html)

上面写着：

> 独立的应用程序包提供以下好处：
> 
> *   用户使用他们熟悉的安装程序安装应用程序并以通常的方式启动它。
>     
>     
> *   您可以控制应用程序使用的 JRE 的版本。
>     
>     
> *   应用程序可以部署在新系统上，无需安装 JRE。

但是这种方法的一个缺点是：

> 只能使用 JDK 7 Update 6 或更高版本构建自包含应用程序包。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-24T08:54:26.043

看看你是否打算分发这个捆绑包（你的应用程序 + JRE），那么有一个实用程序[install4J](http://www.ej-technologies.com/products/install4j/overview.html)，它是一个强大的多平台 Java 安装程序构建器，可为 Java 应用程序生成本机安装程序和应用程序启动器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-24T08:53:49.397

您可以使用 java webstart 部署它，这使您能够下载某个版本的 jre（如果不存在）。不过不知道能不能降级。Java 也必须已经安装。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-24T08:53:00.543

您需要使用放置在 JAR 文件旁边的 JRE 的特定于平台的启动器。当然，您可以使用批处理文件和 shell 脚本来执行此操作，但还有更专业的解决方案可以创建本机启动器，例如[install4j](http://www.ej-technologies.com/products/install4j/overview.html)。（免责声明：我公司开发 install4j）。免费的解决方案是[izpack](http://izpack.org/)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-29T21:08:59.797

如果是 NetBeans 平台应用程序，NetBeans 本身可以选择捆绑额外的资源和 JRE。

来源：[https ://platform.netbeans.org/tutorials/nbm-nbi.html#bundling-jre](https://platform.netbeans.org/tutorials/nbm-nbi.html#bundling-jre)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-24T09:03:36.720

这是直接不可能的。为此，您必须为每个平台下载 VM。对于 Windows，将 JRE 复制到目录和 jar 并通过 shell 脚本调用分布式 JVM。但这太难了，Cthulhu 描述的解决方案是最好的，即检查版本并指向网页。

但是，您可能会检查一些。

JSmooth - [http://jsmooth.sourceforge.net/](http://jsmooth.sourceforge.net/)

Jar2Exe - [http://transfer2pc.weebly.com/1/post/2011/10/jar2exe-converter-11-gui.html](http://transfer2pc.weebly.com/1/post/2011/10/jar2exe-converter-11-gui.html)

# http - 如何通知 REST API 客户端进行可选/必需更新？

> ID：13045720
> 
> 赞同：4
> 
> 时间：2012-10-24T08:46:29.520
> 
> 标签：http, rest, version, deprecated

我目前正在开发一个 Restful API，我想知道最优雅、最长寿的解决方案是什么。

一些数据：

*   Rest API：服务器后端
*   应用：移动应用（ios、android等）

两者都由我们管理和消费。

这是我的要求：

1.  更新是可选的，但推荐，我们只是想通知客户端更新他的应用程序。

2.  需要更新并且 API 不再可用（由于 api 版本控制，这永远不会发生，但谁知道）

我可以想到几个解决方案：

*   包括一个新的 HTTP 标头，例如：

`X-Client-Update: text="Some informative and meaningful message"; button="Do upgrade now!"; uri="itms-apps://itunes.com/apps/DevelopmentCompanyLLC"`

应用程序将负责处理它并将其显示给用户。

*   提供端点：

要求：

```
POST /api/versions/
Content-Type: application/json
{"client_version": "4.3", "os_version": "6.0", "os_vendor": "ios"} 
```

响应（可用更新）：

```
{
    "current_version": "4.4", 
    "latest_compatible_version": "4.0",
    "update_required": false,
    "update_available": true,
    "message": "A new awesome update is available, download it now",
    "uri": "itms-apps://itunes.com/apps/DevelopmentCompanyLLC",
    "button_text": "I want it, and I want it now!"
} 
```

响应（无可用更新）：

```
{
    "current_version": "4.3", 
    "latest_compatible_version": "4.0",
    "update_required": false,
    "update_available": false,
} 
```

**如果需要**更新应用程序，我还希望始终返回将由应用程序处理的错误。

我想知道我应该使用哪种 HTTP 状态，现在我想到了，`400 Bad parameters`因为我找不到更好的代码。

相应的消息将与端点解决方案提供的消息非常相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:01:16.073

由于服务器和客户端都是由您开发的，因此使用哪个状态码（恕我直言）并不重要。除了`400`您的选择之外，您还可以查看以下状态代码：

*   `403`Forbidden - 如果*服务器理解请求但拒绝执行它，则适用；服务器应在实体中描述拒绝的原因。*
*   `501`未实现 - 如果*服务器不支持 [不再] 满足请求所需的功能，则*适用。

正如您所写的，必需的更新永远不会正常发生，因此可选更新是主要用例，后者的条件响应似乎适合任何成功的请求。在这种情况下，您可能应该`200`像往常一样使用状态代码，并依赖响应中的附加标头。

# r - R中的归一化

> ID：13045726
> 
> 赞同：0
> 
> 时间：2012-10-24T08:47:02.370
> 
> 标签：r

```
ID_REF           GSM133971          GSM133972               GSM13397
244901_at   5.95461158752441E+001   1.88836498260498E+001   1.9821
244902_at   7.25400314331055E+001   2.65250205993652E+001   1.9532
244903_at   2.23291015625000E+002   1.78133636474609E+002   5.3816
244904_at   3.65505447387695E+001   3.04016351699829E+000   6.8046
244905_at   4.07523269653320E+001   2.58869285583496E+001   1.1808
244906_at   1.50184860229492E+002   5.39840278625488E+001   4.1491
244907_at   2.65190029144287E+001   1.39808797836304E+000   2.0866
244908_at   3.50156021118164E+000   1.05003893375397E+000   4.5765 
```

在上述数据集中，前两列经过 MAS5.0 标准化，最后一列经过 RMA 标准化。是否可以对数据集进行非规范化，以便我可以在整个过程中执行 RMA 规范化？最后一列来自我需要附加的另一个实验。所以规范化是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:52:21.077

最简洁的答案是不。采取一个简单的归一化过程，我们的均值为零：

```
#Two data sets 
 c(1, 2, 3)
 c(4, 5, 6) 
```

两个数据集的标准化数据为：

```
 c(-1, 0, 1) 
```

我意识到 MAS5.0 要复杂得多，但同样的概念也适用。

# css - Safari 6 中的 CSS 边框半径问题

> ID：13045735
> 
> 赞同：4
> 
> 时间：2012-10-24T08:47:28.380
> 
> 标签：css, safari6

我想创建一个左上角和右上角圆角的盒子。我的 CSS：

```
border-radius: 4px 4px 0 0; 
```

在 Safari 6 中，border-radius 会产生一些失真/伪影。角落“粗糙”，出现神秘的垂直白线（框 bg 为蓝色）。

我已经尝试了所有方法（-webkit-border-radius、border-top-left-radius、border-top-right-radius、border-style:none、border-width:0、border-color:transparent 等）但是这似乎是唯一不会破坏的东西：

```
border-radius: 4px; 
```

1.  这是一个 webkit 错误吗？（Chrome 有角落工件，但没有其他）
2.  如果没有，我怎样才能在不遇到这些问题的情况下只舍入左上角和右上角？
3.  我正在使用 2012 MacBook Air、OSX Mountain Lion (10.8)、Safari 6.0.1、Chrome 22.0.1229.94

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:12:14.913

这是一个可能的答案，但您可能会处理很多事情，因此@ndm 对分享示例的方式提出了很好的建议。

为了帮助调试正在发生的事情，我喜欢增加边框半径并添加彩色背景。

**溢出**

您可能只是在盒子里有内容溢出并覆盖角落。试试`.box { overflow: hidden; }`。这是一个[JSFiddle](http://jsfiddle.net/B7zMW/)，它验证了在 Safari 6.0.2 中工作的三个常见场景。

**抗锯齿**

如果“神秘的白线”非常微妙，那可能只是 Safari 的抗锯齿，它试图让边框看起来更平滑。通过使边框变粗并比较外观来检查这个理论。

# ios - 一维条码扫描仪IOS（Xcode）

> ID：13045737
> 
> 赞同：1
> 
> 时间：2012-10-24T08:47:37.870
> 
> 标签：ios, xcode, barcode, scanning

我想知道是否有一个 Xcode 项目可以扫描一维条码，因为我需要在我正在制作的应用程序中使用一维条码扫描仪但不知道该怎么做

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:20:51.660

你可以看看：[ZBar](http://zbar.sourceforge.net/index.html "ZBar")

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:53:09.220

有条码/二维码阅读器库[ZXing](http://code.google.com/p/zxing/)，我相信它来自谷歌。他们还有一个[示例项目](http://code.google.com/p/zxing/source/browse/trunk#trunk/iphone/ScanTest)来展示如何将 ZXing 集成到您的 iphone 项目中。

编辑：对不起，zxing 目前只支持 iphone 的二维码，如此[处所示](http://code.google.com/p/zxing/)。

> iphone：iPhone 客户端 + 到 Objective C / C++ 的端口（仅限二维码）

但它似乎可以移植到 iphone，正如它的开发者所说的[那样](https://stackoverflow.com/questions/838724/is-there-a-barcode-recognition-framework-for-ios)。你也可能对[这个](https://stackoverflow.com/questions/5659380/free-barcode-scanner-sdk-for-ios-iphone)线程感兴趣。特别是最高投票答案下的评论。

# python - 记录传入的电话号码并终止呼叫服务器端

> ID：13045738
> 
> 赞同：1
> 
> 时间：2012-10-24T08:47:49.827
> 
> 标签：python, sip

对于这种情况，您有什么建议：

我在 phone.ipkall.com 上有连接到 SIP 的电话号码。
我想注册传入的电话号码（在数据库中）
并终止 Linux 服务器上的呼叫，这样用户就不会被收费。

在类似的问题中，人们提到了[http://sip2sip.info](http://sip2sip.info)和 [http://www.b2bua.org/](http://www.b2bua.org/)。

做这种情况的最短路径是什么？（最好在python中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:36:18.590

任何 SIP 应用程序平台都可以轻松地为您做到这一点，尽管您很可能只能在提交 HTTP 请求时获得它们，因此您需要为数据库设置 Web 前端。

一些可用的 SIP 应用平台是 anveo.com、tropo.com、twilio.com 和我自己的 sipsorcery.com。在后者（我自己的服务）的情况下，可以将键/值对记录到数据库中，因此取决于您需要对记录的呼叫者 ID 做什么，这可能就足够了，而无需您自己的数据库。

# javascript - 根据内容拉伸 div

> ID：13045742
> 
> 赞同：-2
> 
> 时间：2012-10-24T08:47:58.460
> 
> 标签：javascript, css, html, stretch

我在页面中有一个选择列表和一个 div。div 的内容取决于列表中的选定项目，并使用 javascript 填充。我想让 div 将手风琴拉伸到它的内容我不是指滚动条，我是指改变 div 的宽度和高度。

我应该使用 javascript 还是可以使用 CSS ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:01:02.120

正如谢尔盖所​​说，您可以在 div 上设置 display: inline 来实现这一点。

```
div{
  display: inline;
}​ 
```

[http://jsfiddle.net/Qf9a8/](http://jsfiddle.net/Qf9a8/)

# xml - 在循环中创建对象并使用 XML 信息加载它们

> ID：13045746
> 
> 赞同：1
> 
> 时间：2012-10-24T08:48:32.327
> 
> 标签：xml, loops, runtime

我花了很多时间寻找解决问题的方法，但没有发现任何有用的东西。我想加载一个包含未知数量对象的 ArrayList 对象。对象很简单，包含字符串名称、双数和布尔检查（例如 myClass temp = new myClass(j, -7, false);）。

问题是必须使用我的 XML 文件中的信息加载这些对象。

我在从我的 XML 文件中复制代码时遇到了一些问题，所以我在没有 <> 的情况下编写了它以向您展示它的外观。

XML 片段：

```
root
  Information Name="test1" Time="7" Check="true"
  Information Name="test2" Time="-6" Check="false"
/root 
```

C# 代码片段：

```
public void readXmlFile()
        {
            XmlDocument newXML = new XmlDocument();
            newXML.Load(pathXML);
            XmlElement root = doc.DocumentElement;

            int j = 0;
        ArrayList myArrList;
            foreach (XmlNode @daten in root.ChildNodes)
            {
                myClass temp = new TimeZone();
                myArrList[j].name = @daten.Attributes["Name"].InnerText;
                myArrList[j].number = @daten.Attributes["Number"].InnerText);
                myArrList[j].check = @daten.Attributes["Check"].InnerText);
            }
} 
```

我希望有一个人可以帮助我 ：）

我自己有解决方案:)

```
public void readXmlFile()
{
    XmlDocument newXML = new XmlDocument();
    newXML.Load(pathXML);
    XmlElement root = newXML.DocumentElement;

    foreach (XmlNode @daten in root.LastChild.ChildNodes)
    {
        myClass temp = new TimeZone();
        temp.name = @daten.Attributes["Name"].InnerText;
        temp.number = Convert.ToDouble(@daten.Attributes["Number"].InnerText);
        temp.check = Convert.ToBoolean(@daten.Attributes["Check"].InnerText);
        myClassArrayList.Add(temp);
    }
} 
```

# javascript - 在消息中将 X 位置作为变量发送

> ID：13045748
> 
> 赞同：0
> 
> 时间：2012-10-24T08:48:39.140
> 
> 标签：javascript, string, variables, socket.io

目前我唯一的选择是在客户端使用字符串。

我想每秒更新播放器的 X 位置。但是是否可以将变量作为字符串发送？

```
var x = 50;
function sendPos() 
{
io.sockets.emit("message", 'x');
}
setInterval(sendPos, 1000); 
```

* * *

***客户端只是一个哑终端，位置将在服务器端更新***

现在我收到**X**而不是变量**X**。

有没有办法解决这个问题？还是我必须更改客户端接收数据的方式？

* * *

客户端执行 .split

目前这是在客户端执行此操作的唯一方法；因为我在客户端使用了一种游戏制作器，并且该插件适用于字符串。

[构造 2 Socket.IO 插件 http://imageshack.us/a/img211/1664/clientside.png](http://imageshack.us/a/img211/1664/clientside.png)

那么有什么方法可以将 X 变量的数据以字符串的形式发送给客户端？否则我将不得不更改插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:09:14.723

我现在已经修好了。我不得不稍微更改代码，以便客户端插件能够读取变量。

新代码：

```
io.sockets.emit("message", 'Pos,' + x); 
```

# ls - 需要 "ls -s" 在 MINIX 中显示正确的块数

> ID：13045752
> 
> 赞同：2
> 
> 时间：2012-10-24T08:48:53.883
> 
> 标签：ls, minix

我正在学习涉及 minix 的操作系统课程，我想要一些建议。

我试图弄清楚如何修改 minix 以便它`ls -s`可以做与 linux 中相同的事情。

我知道虽然 minix 和 linux`ls -s`很相似，但是当一个文件是故意使用 :`dd of=XXXX bs=4096 count=1 seek=5`时，linux 会显示文件大小为 4 个块，而 minix 将显示 24 个块。

我理解为什么会发生这种情况，因为与 minix 不同，linux 识别有 20 个空块，所以它报告它的逻辑大小，忽略空块。
我一直在想从哪里开始，我的讲师指给`servers/fs/stadir.c`我看，所以我查了一下课程。

我认为相关的唯一部分（涉及 st_size）是：

```
statbuf.st_size = rip->i_size;

      if (rip->i_pipe == I_PIPE) {
            statbuf.st_mode &= ~I_REGULAR;  /* wipe out I_REGULAR bit for pipes */
            if (fil_ptr != NIL_FILP && fil_ptr->filp_mode & R_BIT) 
                    statbuf.st_size -= fil_ptr->filp_pos;
      } 
```

这是 minix 源代码的第 27700-27706 行。

有人可以给我提示在哪里看，或者如果我在看正确的地方，提示或其他东西。

# windows - .bat 文件比较两个文本文件并输出差异

> ID：13045754
> 
> 赞同：7
> 
> 时间：2012-10-24T08:49:03.203
> 
> 标签：windows

我正在尝试一些我在 UNIX 上成功完成但不知道如何在 Windows 上完成的新东西。

所以我保存了一个文本文件，假设 test1.txt 和 12 小时后将 test2.txt（这是 test1.txt，在 12 小时内添加了更改，几乎可以保证在文件末尾）与 test1.txt然后仅将文本差异输出到第三个文件 diff.txt

```
1 action
2 action
3 action
4 action 
5 action 
```

和 test2.txt 看起来像

```
1 action
2 action
3 action
4 action 
5 action
6 action
7 action
8 action 
```

那么第三个文件 diff.txt 的输出将如下所示：

```
6 action
7 action
8 action 
```

仅添加了文本，没有关于行或比较的信息，只是差异的基本输出。

我对此完全陌生，环顾四周，似乎我可以编写一个批处理文件（.bat），基本上就像一个 UNIX 脚本一样。

很抱歉我的基本问题，但我已经用谷歌搜索了这个问题，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-06T11:29:44.103

最简单和最快的方法是使用 findstr 命令，它将比较结果并将结果返回到脚本这里的新文件

```
findstr /vixg:Z:\misc\test1.txt Z:\misc\misc\test2.txt > Z:\misc\misc\test3.txt

findstr /vixg:<source file> <target file> > outputfile 
```

这里

```
/v   : Prints only lines that do not contain a match.
/i   : Specifies that the search is not to be case-sensitive.
/x   : Prints lines that match exactly.
/g: file   : Gets search strings from the specified file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:51:23.090

你可以尝试这样的事情： -

```
 @echo off
   :main
   fc c:\filename r:\filemame > nul
   if errorlevel 1 goto error

   :next
   echo insert next CD
    pause
  goto main

  :error
  echo failed check 
```

从[源头](http://www.computing.net/answers/dos/batch-file-command/15753.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:14:23.017

您可能想检查一下：

[http://gnuwin32.sourceforge.net/packages.html](http://gnuwin32.sourceforge.net/packages.html)

有 *nix 实用程序的端口，包括一个用于 diff 的端口，因此您不必重新发明轮子。

# xml - 使用 xsl 选择子节点组

> ID：13045765
> 
> 赞同：0
> 
> 时间：2012-10-24T08:50:05.540
> 
> 标签：xml, xslt, foreach

我正在尝试使用 for-each 来选择和显示一组子节点，但我被卡住了！

XML

```
<cta>
    <text>Call to action text</text>
    <link>call to action link location</link>
    <alt>call to action alt text</alt>
    <target>_blank</target>
    <style>button blueBut</style>
</cta>
<cta>
    <text>Call to action 2</text>
    <link>call to action 2 link</link>
    <alt>call to action 2 alt text</alt>
    <target>_blank</target>
    <style>button blueBut</style>
</cta> 
```

XSL

```
<div class="buttonPostLeft">    
    <xsl:for-each select="/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta/*">
        <a>
            <xsl:attribute name='class'>
                <xsl:value-of select="/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta/style" />
            </xsl:attribute>
            <xsl:attribute name='href'>
                <xsl:value-of select="/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta/link" />
            </xsl:attribute>
            <xsl:attribute name='title'>
                <xsl:value-of select="/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta/alt" />
            </xsl:attribute>
            <xsl:value-of select="/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta/text"/>
        </a>
    </xsl:for-each>
</div> 
```

我基本上希望锚标记为 XML 树中具有该组属性的每个 cta 组重复。所以在这个例子中，DIV 中有 2 个链接。希望这有一点意义！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:06:51.257

在您的 for-each 中，您现在正在循环`<cta>`使用任何匹配的所有子节点`/cta/*`

你需要改变

```
/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta/* 
```

进入

```
/Properties/Data/Datum[@ID='ID1']/DCR[@Type='Overview']/overview/cta 
```

此外，一旦您进入 for-each 循环，您可以通过使用点来匹配内部的元素，如下所示：

```
<xsl:attribute name='class'>
    <xsl:value-of select="./style" />
</xsl:attribute> 
```

甚至更整洁的是这样的：

```
<a class="{./style}" href="{./link}" title="{./alt}">
    <xsl:value-of select="./text"/>
</a> 
```

# google-analytics - Prestashop 谷歌分析目标跟踪

> ID：13045766
> 
> 赞同：2
> 
> 时间：2012-10-24T08:50:08.330
> 
> 标签：google-analytics, prestashop

我在我的 prestashop 安装中的分析设置有问题。第一个 ga 只显示一般文件“category.php”和“product.php”，而不是具体的类别和产品。我通过[这篇文章](http://www.prestashop.com/forums/topic/172576-google-analytics-tracking/page__p__859789#entry859789)解决了这个问题。

然而，目标似乎并没有按顺序触发。我已经在“/order-confirmation.php”上设置了一个匹配类型**头部匹配的目标，但它没有触发。**即使我收到了几个订单，order-confirmation.php 也不会显示在统计数据中的任何位置。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:15:23.197

在您的 Google Analytics（分析）中找到目标页面，然后将头部匹配更新为它显示的任何内容。

要查找触发的页面，请提交测试订单并使用[Google Analytics Debugger for Chrome](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T22:05:04.357

将设置更改为“开始于”并重新验证。它对我有用。

# javascript - JavaScript 的页面加载时间

> ID：13045767
> 
> 赞同：26
> 
> 时间：2012-10-24T08:50:16.097
> 
> 标签：javascript, page-load-time

我正在寻找一种正确的方法来测试页面完全加载其所有资源所需的时间。到目前为止我所做的是添加：

```
window.startTime = (new Date).getTime(); // after the title in my page 
```

和

```
window.onload = function () {
    console.log((new Date).getTime() - window.startTime);
}
window.addEventListener('load',function () {
    console.log((new Date).getTime() - window.startTime);   
},false); 
```

在页脚中向下。这是衡量的好方法吗？加载时间和感知加载时间之间是否存在差异？从我所看到的事件触发后，所有资源都已加载，包括图像。这两个事件有什么区别吗？我也可以使用 PageSpeed 来测试这个吗？（我知道我可以在 chrome 开发工具中做到这一点，但我也想要一个脚本，以便我可以跟踪数据。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-24T08:52:57.043

这几乎是旧版浏览器中测量时间的*唯一*方法。但是为了救援，大多数浏览器确实实现了`window.performance`提供非常非常准确的获取时间方式的对象。

典型`window.performance.timing`输出：

> connectEnd 1351036536696
> connectStart 1351036536696
> domComplete 1351036538277
> domContentLoadedEventEnd 1351036538146
> domContentLoadedEventStart 1351036538119 domInteractive 1351036538042 domLoading
> 1351036537552 domainLookupEnd
> 1351036536694 domainLookupStart
> 1351036536694
> fetchStart
> 1351036536696 loadEventEnd
> 1351036538295
> loadEventStart 1351036538277
> navigationStart 1351036536696

..这甚至不是完整的列表。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-14T16:12:59.980

**如果您只是在本地机器上调试页面加载时间**，Firefox 的 Firebug、Chrome 开发者工具和 IE 的 F12 开发者工具会公开最新的页面加载时间。

**为了在现实世界中获取您网站访问者的页面加载时间**，您需要使用真实用户监控（又名*RUM*）页面加载指标。我建议查看[NavigationTiming 规范](http://www.w3.org/TR/navigation-timing/)。该规范在 IE9+、FF7+ 和 Chrome6+ 中[得到支持](http://caniuse.com/#feat=nav-timing)，通过浏览器的 DOM 公开页面加载时间（例如 DNS、TCP 连接、请求、响应和 DOM 时间）。这可以让您在现代浏览器中为每个访问您网站的访问者获得毫秒级的页面加载时间。

它在时间线上公开了所有这些指标： ![在此处输入图像描述](../Images/7e4d7e7322d8b1365f0b4b6f73a6bc9c.png)

现在这些指标已公开，您可以通过多种方式使用它们。

对于 DIY 解决方案，[Boomerang](https://github.com/lognormal/boomerang/)是一个第三方库，它使用现代浏览器中的 NavigationTiming 将这些数据 ping 回您的数据中心。对于较旧的浏览器，它有一些很酷的技巧可以监控站点内的页面到页面导航，以确定页面加载需要多长时间。

如果您对找出所有 Boomerang 内容不感兴趣，还有其他几个使用 NavigationTiming（和类似）数据来报告页面加载性能数据的服务提供商，例如[web.dev](https://web.dev/)、[Google Analytics](http://www.google.com/analytics/)、[New Relic](https://newrelic.com)、[Pingdom](http://pingdom.com)，[速度曲线](http://speedcurve.com/)和[速度等级](https://speedrank.app/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T09:01:59.107

我考虑使用 Firefox 的 Firebug：

![在此处输入图像描述](../Images/309976e0d902b1da3139b9ad44349bb0.png)

..或 Chrome 的开发者工具（按 F12） ![在此处输入图像描述](../Images/9e92d82115006849925526c3f72989aa.png)

也可以看看：

*   [https://getfirebug.com/network](https://getfirebug.com/network)
*   [https://developers.google.com/chrome-developer-tools/docs/network](https://developers.google.com/chrome-developer-tools/docs/network)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-22T10:49:41.750

在浏览器控制台上输入：

```
var loadTime = window.performance.timing.domContentLoadedEventEnd- window.performance.timing.navigationStart;
loadTime; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T08:55:56.580

我一般在 Firebug 中结合使用 YSlow、PageSpeed 和 Net 选项卡来测量页面加载时间并诊断潜在问题。Firebug 有很多信息，如果您还没有检查过，这些信息可能会很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T08:54:09.327

JavaScript 方法很大程度上依赖于 Web 浏览器。为什么不试试 FireBug for firefox、DevTools for Chrome 和 Firebug lite for IE。

如果您仍想编写一些代码，请使用 window.performance 对象。

您很可能会为每个浏览器获得不同的加载时间。

# javascript - angularjs 中的 $resource 无法正常工作

> ID：13045771
> 
> 赞同：1
> 
> 时间：2012-10-24T08:50:32.183
> 
> 标签：javascript, rest, angularjs

我正在尝试将 Angular 与 django 一起使用，我已经使用 django sweetpie 实现了一个 REST api，这是 Angular 资源的代码：

```
angular.module('CourseServices', ['ngResource']).
    factory('Course', function($resource){
  return $resource('api/v1/course/:courseId/?format=json', {}, {
    query: {method:'GET', params:{courseId:'1'}, isArray:true}
  });
}); 
```

这是我想要得到它的地方：

```
var course = Course.get({courseId:$routeParams.courseId});
console.log(course); 
```

此代码将其记录在浏览器中：

```
Resource
course_pic: "http://localhost:8000/media/course_pics/2012/10/24/Apple-Launches-Genius-Recommendations-for-Apple-TV-2.png"
creation_time: "2012-10-24T06:28:11+00:00"
description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed faucibus cursus mi, in laoreet dolor placerat vitae. ."
id: "1"
instructor: "/api/v1/user/1/"
name: "Computation Theory"
resource_uri: "/api/v1/course/1/"
subscribers: 0
update_time: "2012-10-24T06:28:11+00:00"
__proto__: Resource 
```

所以我有我想要的数据，但是当我尝试在我的控制器中访问例如“course.id”时，我得到了未定义！我不知道为什么！REST 服务器响应是 json。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T17:05:10.497

为了解决您遇到的问题，我们`$resource`首先需要了解内部工作原理。[这里](https://stackoverflow.com/a/11966512/14187)有一个问题和一个更长的答案，但简而言之，我们需要意识到它`$resource`会执行*异步*调用，即使它的语法表明我们正在处理同步调用。

在您的情况下发生的情况是，**当您尝试访问控制器中的查询数据时，这些数据还没有准备好**。在调用 $resource 时，AngularJS 只会返回一个空对象（一种占位符），并且只有在服务器返回响应时才会填充数据（属性）。

本质上，您在这里面临的是时间问题。要解决此问题，您可以在调用该`query`方法时使用回调，类似于以下内容：

```
var course; Course.get({courseId:$routeParams.courseId}, function(data){
    console.log(data);
    course = data;
    //course.id should be defined here 
}); 
```

所以，再一次：`$resource`即使语法可能暗示其他方法，方法仍然是异步的。如果要确保数据准备就绪，则需要在成功回调中处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:36:44.680

确实 $ 资源是异步的，但是你可以绕过它变成一个延迟的值对象，看[这里](https://stackoverflow.com/questions/12356185/angular-js-delaying-controller-initialization)，它可能对你有帮助。

# c++ - 用 CGAL 剪裁线

> ID：13045772
> 
> 赞同：4
> 
> 时间：2012-10-24T08:50:39.897
> 
> 标签：c++, computational-geometry, cgal

我想要实现的是获得线和一组带孔的多边形之间的交集->通过掩码（多边形集）剪辑线->结果将是另一条线。CGAL的问题[：线段和多边形的交集？](https://stackoverflow.com/questions/6551254/cgal-intersection-between-a-segment-and-a-polygon)建议使用带有两个点的多边形来表示线。在 CGAL 示例的帮助下，我想出了以下片段。我的意图是使用交集来计算位于矩形内的线的一部分。但是，结果有 4 个点，它似乎是在计算多边形和由线定义的半平面之间的交集。

任何人都可以对此有所了解吗？

```
typedef CGAL::Exact_predicates_exact_constructions_kernel Kernel;
typedef Kernel::Point_2                                   Point_2;
typedef CGAL::Polygon_2<Kernel>                           Polygon_2;
typedef CGAL::Polygon_with_holes_2<Kernel>                Polygon_with_holes_2;
typedef std::list<Polygon_with_holes_2>                   Pwh_list_2;

int main()
{
  Polygon_2 P; // rectangle
  P.push_back (Point_2 (10, 10));  
  P.push_back (Point_2 (20, 10));
  P.push_back (Point_2 (20, 20));    
  P.push_back (Point_2 (10, 20));

  Polygon_2 Q; // line
  Q.push_back (Point_2 (0, 15));
  Q.push_back (Point_2 (25, 15)); 

  Pwh_list_2 symmR;
  Pwh_list_2::const_iterator it;

  CGAL::intersection (Q, P, std::back_inserter(symmR));

  for (it = symmR.begin(); it != symmR.end(); ++it) {
    std::cout << "--> ";
    print_polygon_with_holes( *it);
  }

  getchar();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-20T15:55:45.833

这段代码定义了一个交集的多边形，而不是一条线：

```
 Polygon_2 Q; // line
  Q.push_back (Point_2 (0, 15));
  Q.push_back (Point_2 (25, 15)); 
```

只有两个点，这是一个退化的多边形，从一个点到第二个点再返回。

[此图像](https://i.stack.imgur.com/gpafa.png)显示了两条重叠边缘弯曲并稍微分开的配置，因此更清楚发生了什么。从该图像中，您可以看到为什么结果是具有四个顶点（来自四个交点）的退化多边形。

注意：当我运行此代码时，我收到以下错误消息，解释发生了什么。

```
CGAL warning: check violation!
Expression : false
File       : /usr/local/include/CGAL/Boolean_set_operations_2/Gps_polygon_validation.h
Line       : 263
Explanation: The polygon boundary self overlaps. 
```

搜索文档（[此处](https://doc.cgal.org/latest/Boolean_set_operations_2/group__boolean__intersection.html)和[此处](https://doc.cgal.org/latest/Kernel_23/group__intersection__linear__grp.html#gab77f3cd98c4c4ff7acff59c98ab88ff0)），我找不到 Polygon_2-Line_2 相交函数。

# c++ - Ubuntu 编译器 (C++)

> ID：13045773
> 
> 赞同：2
> 
> 时间：2012-10-24T08:50:44.287
> 
> 标签：c++, linux, ubuntu, g++

我是 Linux 编程（Ubuntu 服务器）的新手。

指令之间有什么区别：

```
c++ -c  main.cpp -o main.o -lstdc++
c++ -c  Console.cpp -o Console.o -lstdc++
c++ main.o Console.o -o App1 
```

和这个：

```
g++ -c  main.cpp -o main.o -lstdc++
g++ -c  Console.cpp -o Console.o -lstdc++
g++ main.o Console.o -o App1 
```

这些说明是否相同？c++ 指令是否为 g++ 提供了另一个名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:54:30.590

`update-alternatives --display c++`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T08:56:23.810

是的，默认是 g++。您可以使用`update-alternatives --display c++`; 通过改变它`sudo update-alternatives c++`

```
update-alternatives --config c++
There are 2 choices for the alternative c++ (providing /usr/bin/c++).

  Selection    Path              Priority   Status
------------------------------------------------------------
* 0            /usr/bin/g++       20        auto mode
  1            /usr/bin/clang++   10        manual mode
  2            /usr/bin/g++       20        manual mode 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T08:52:53.160

他们都使用我相信的 GNU C++ 编译器。所以是的，它们是一样的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T08:56:39.530

他们可能是一样的。您可以明确检查：

> 哪个 c++
> 
> /usr/bin/c++
> 
> ls -l /usr/bin/c++
> 
> /etc/alternatives/c++
> 
> ls -l etc/alternatives/c++
> 
> /usr/bin/g++

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T08:55:13.960

是的，它们是一样的，输入

```
which c++ 
```

给你`c++`的其实是`/usr/bin/c++`。然后输入

```
ll /usr/bin/c++ 
```

会给你

```
lrwxrwxrwx 1 root root 21 Sep  4 17:00 /usr/bin/c++ -> /etc/alternatives/c++* 
```

然后

```
ll /etc/alternatives/c++ 
```

会给你

```
lrwxrwxrwx 1 root root 12 Sep  4 17:00 /etc/alternatives/c++ -> /usr/bin/g++* 
```

所以是的，它们是相同的（从 c++ 到 g++ 有一个符号链接）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T08:56:17.523

只为自己寻找：

```
$ ls -l /usr/bin/c++ /usr/bin/g++ /etc/alternatives/c++ 
```

> lrwxrwxrwx 1 root root 12 Jun 2 19:41 /etc/alternatives/c++ -> /usr/bin/g++*
> lrwxrwxrwx 1 root root 21 Jun 2 19:41 /usr/bin/c++ -> /etc/alternatives/c++*
> lrwxrwxrwx 1 根 7 月 13 日 2012 /usr/bin/g++ -> g++-4.6*

或者做：

```
$ c++ -v 
```

对比

```
$ g++ -v 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-24T09:40:55.137

`g++`表示 GNU C++ 编译器。

`c++`表示非特定的 C++ 编译器，但它必须链接到特定的编译器。如果在您的情况下，这只是指向 GNU C++ 编译器的符号链接，那么没有区别。但是，您可以使符号链接指向不同的 C++ 编译器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-24T09:44:57.877

是的。

**以下是如何弄清楚这些类型的事情**

要查找可执行文件的路径：

```
which c++ 
```

要检查它是文件还是符号链接：

```
ls -ald `which c++` 
```

要检查它是什么类型的文件：

```
file `which c++` 
```

要获得可用于将其与其他文件进行比较的校验和：

```
md5sum `which c++` 
```

这是检查 c++ 和 g++ 是否相等的一种方法：

```
[ `md5sum $(which c++) | cut -d' ' -f1` == `md5sum $(which g++) | cut -d' ' -f1` ] && echo Yes, equal content || echo No, unequal content 
```

# ruby - 从 Ruby 脚本运行的 AppleScript 中止陷阱

> ID：13045780
> 
> 赞同：1
> 
> 时间：2012-10-24T08:51:32.103
> 
> 标签：ruby, multithreading, applescript, daemon, daemons

我有一个 Ruby 程序，除其他外，它执行用户定义的代码块（代码在 Github 上，[here](http://github.com/joonty/chain-reactor)）。其中许多块包含系统命令，我正在尝试调试一个非常具体的案例，即在我正在调用的 bash 脚本中执行一段 AppleScript。有问题的脚本用于通过命令行控制 Spotify，[这就是代码](http://harishnarayanan.org/projects/shpotify/)。

我遇到的问题是每次运行脚本时都会发生中止陷阱错误：

```
spotify: line 57: 94108 Abort trap    osascript -e 'tell application "Spotify" to pause' 
```

这必须与进行调用的 Ruby 脚本的环境有关，但我无法理解原因。这是调用它的代码块：

```
# Ruby code
reaction :hello do |event|
  system "spotify pause"
  system "say 'Hello world'"
  system "spotify play"
end 
```

`yield`当通过套接字连接触发特定事件时，此块通过语句定期运行。该脚本也被守护，使用 ruby​​ gem“daemons”，允许它在后台运行（但仍然作为当前用户，根据`ps`和 ruby​​ 环境变量）。不仅如此，每个套接字连接都会启动一个新线程，因此代码在与主线程不同的线程中运行。

在我的调试中，我尝试`system "spotify pause"`在守护进程启动脚本后运行该行，没有问题。它在以下脚本中也运行良好：

```
Thread.new do
  system("spotify pause")
end 
```

因此，导致问题的不是启动新线程或本身的守护进程，但它似乎是这些事情的组合，并且可能正在产生块这一事实意味着 AppleScript 正在引发中止陷阱在 bash 脚本中。

如果您可以将自己的许多层复杂化带回现实，我将不胜感激您为解决甚至调试这个奇怪的案例提供的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:41:42.427

正如@regulus6633 提到的，这是由于苹果的 NSApplescript 不是线程安全的。这与守护进程相结合会导致不可预测的行为。

# javascript - html canvas+ Javascript 在客户端和 python 在服务器端

> ID：13045787
> 
> 赞同：1
> 
> 时间：2012-10-24T08:52:08.317
> 
> 标签：javascript, python, client, diagramming

我正在尝试创建一个非常类似于[https://www.circuitlab.com/](https://www.circuitlab.com/)的小工具 我正在考虑使用 HTML5 画布创建图表（可能使用 kinetic.js）并使用 Javascript 来创建图形。我希望每个图表都映射到一个模型，该模型在调用时将在服务器端运行。为此，我想从 java 脚本调用 python 函数并将 python 函数的输出返回到相同的 javascript 代码。

我在这个论坛上看过类似的问题。我发现了很多，但答案与我想要的无关。

如果我使用基于 python 的 web 包，比如 cherrypy 或 mod_python，大多数文档都会处理创建 HTML/javascript 页面作为带有新 url 的输出。

我不想穿睡衣或 skulpt。

是否可以使用 Javascript/Jquery/Ajax 做我想做的事？

我已经学习 Javascript 一个星期了，尽管我对自己的编码能力很有信心，但我对网络术语并不熟悉。

# android - ArrayList 是一种原始类型。对泛型类型 ArrayList 的引用 应该参数化

> ID：13045788
> 
> 赞同：4
> 
> 时间：2012-10-24T08:52:12.307
> 
> 标签：android, arraylist

我有这个方法（）：

```
 private List<? extends Map<String, String>> creaListaDeGrupos() {

      ArrayList resultado_padre = new ArrayList();
      for (int i = 0; i < listadoPartidas.getPartidas().size(); i++) {
          HashMap<String, String> padre = new HashMap<String, String>();
          padre.put("posicionLista", posicionlista.get(i));
          padre.put("codigo", codigoBaremo.get(i));
          padre.put("descripcionBaremo", descripcionBaremoPadre.get(i));
          padre.put("cantidad", cantidad.get(i));
          padre.put("importe", importe.get(i));
          padre.put("estado", estado.get(i));
          padre.put("observaciones", observaciones.get(i));
                    resultado_padre.add(padre);
      }
return resultado_padre
} 
```

并且 Lint 将错误返回给我：

> ArrayList 是一种原始类型。应该参数化对泛型类型 ArrayList 的引用

但我做不到

```
ArrayList<String> resultado_padre = new ArrayList(); 
```

因为这不是一个字符串数组列表，所以 bust 是什么类型的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:59:01.463

您可以尝试创建您要返回的相同类型：

```
List<HashMap<String, String>> = new ArrayList<HashMap<String, String>>(); 
```

无需声明实现类型，即`ArrayList`. 接口更通用，所以在将`List`变量声明为具体类型时，问问自己这是否必要。请参阅 [针对接口编程](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:57:32.983

```
 private List<Map<String, String>> creaListaDeGrupos() { 

            List<Map<String, String>> resultado_padre = new ArrayList<Map<String, String>>() ; 
            for (int i = 0; i < listadoPartidas.getPartidas().size(); i++) { 
                Map<String, String> padre = new HashMap<String, String>(); 
                padre.put("posicionLista", posicionlista.get(i)); 
                padre.put("codigo", codigoBaremo.get(i)); 
                padre.put("descripcionBaremo", descripcionBaremoPadre.get(i)); 
                padre.put("cantidad", cantidad.get(i)); 
                padre.put("importe", importe.get(i)); 
                padre.put("estado", estado.get(i)); 
                padre.put("observaciones", observaciones.get(i)); 
                resultado_padre.add(padre); 
            } 
return resultado_padre 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:59:14.263

这将是`ArrayList<HashMap<String, String>>`

# c# - 现有但加密的查询字符串的空引用异常

> ID：13045789
> 
> 赞同：1
> 
> 时间：2012-10-24T08:52:13.940
> 
> 标签：c#, asp.net, encryption, query-string, nullreferenceexception

我面临以下问题：

我加密我的查询字符串然后编码结果所以我得到`url`这样的：

* * *

```
PageDetail.aspx?enc=LFgzoz6LxQ54RaOMuZCJlluim9oH%2fRW2bpGJEo3rZ7E1Y8ixg9vbHRRc2koFdqbK%2f5PS%2fIv1v%2b3N%2beLwXJMtpdTOEwqwZLoTkh%2bIPW1S4f4764i3MY%2f9AECdSNmIgeaSovpJouXp3bQi4ntOyJOzW4eXawpAvS3gGvPWQLsr0My9NcAd5PT5Qwr2vVOfzjAYc%2f%2f1AdseguQUyWX7sIPK%2fPGYxLmjU204I2bGS%2f8%2fSPCXp4fZfbfJIaafBmSFbRhXAb%2fneWQFb83PzcP7Ljk9o90qMAeVuRvwhAcy6IsPmW76OpwT8JRK8Vw%2fTrmoSDmNCMYN1VuCm%2fT6fvg1mbiruqmPnDoKXr8zR2ChY1zev8leWHWPDmn572Hi02w6nu4vamOSlgIvH2LNEHUYYtIITX1DH%2bSagIl%2fuiNtWsQsdrqd%2b31ksO8GVYuJcAnn7%2fcST4w5Fzs3JPO2cPwiMeXDQw%3d%3d 
```

* * *

然后我尝试解密结果：但是当我尝试通过以下方式获取查询字符串时：

```
Request.QueryString["enc"] 
```

我得到空引用异常，我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:07:53.700

您在查询字符串中的参数有 514 个字符，认为这可能是问题的原因。
查询字符串有长度限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:58:56.400

那行代码不会抛出空引用异常，因为它找不到查询字符串部分，而是因为它找不到请求对象。如果您要查找的部分不存在，则 QueryString 部分将仅返回 null。

这可能是因为这段代码被写在请求对象尚未设置的地方（例如应用程序启动事件）。您很可能需要将代码移动到更合适的地方。如果您认为您应该能够从您所在的位置访问 Request 对象，那么您需要向我们提供有关该代码行上下文的更多详细信息。

# java - 仅对实现特定接口的类有效的Java注释？

> ID：13045793
> 
> 赞同：6
> 
> 时间：2012-10-24T08:52:21.827
> 
> 标签：java, annotations

我不确定是否有办法做到这一点，但我想为类添加一个注释，该注释仅对实现特定接口的类有效。

注释的目的是让管理者知道它需要将该类的一个实例添加到它的托管对象集中。因此，如果无法在编译时添加该限制，那么在运行时处理此限制的最佳模式是什么？

**背景：** 目前我有一个应用程序，它允许用户在 Strings[] 上执行一组预定义的操作，从而产生单个字符串输出，这些操作按场景分组，我每个场景都有一个枚举，其中定义了这些操作，以及一个在这些枚举上具有开关以调用各个方法（都在该类中）的单个类，这意味着添加单个操作涉及对代码中的多个区域进行更改，我想通过允许新手开发人员来提高它的可维护性只需要知道他们需要编写的一个类，该类会将操作添加到正确的列表中并自动可用。

我决定的解决方案是拥有一个开发人员将实现的动作接口，然后添加一个注释以将该动作注册到所需的场景/场景中，从而隔离对创建单个类的任何新更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:05:49.780

您可以使用[标记接口](http://en.wikipedia.org/wiki/Marker_interface_pattern)，它或多或少是注释的前身，当涉及到类时。如果你定义它来扩展你提到的接口，你可以确定任何用它标记的类也实现了你的接口。

另一方面; 如果您的接口仅出于这个原因而存在，您可以创建规则“所有实现此接口的类”。

当然，这一切都假设您可以控制创建实例的*Manager 。*

# android - 当我更改活动并返回地图时，带有地图的片段崩溃

> ID：13045794
> 
> 赞同：3
> 
> 时间：2012-10-24T08:52:22.260
> 
> 标签：android, android-fragments, android-activity, android-mapview

我有一个包含一些活动的应用程序，但在每个活动中我都有一些片段。Activity的布局有一个RelativeLayout作为一个片段容器。我使用 ActionBarSherlock 添加了选项卡导航，并且选项卡用于观看地图。

我使用了 MapViewBalloons 库。当我单击选项卡时，我将片段替换为相应的片段。

在地图片段中，我使用了一个静态变量来保存我的 mapView 对象，而不是每次访问该片段时都创建一个新对象。

我可以进入地图片段，将其移动到那里，触摸并移动地图。然后使用选项卡更改为另一个片段，而不更改活动，我仍然有相同的地图，相同的情况，我可以在那里导航。

问题：如果我按下后退按钮，如果我改变方向（我猜，如果活动被破坏并重新创建）我可以再次进入地图，但是如果我尝试移动到那里它会崩溃并且我得到了这个错误：

无法添加窗口，令牌 android.view.ViewRootImpl$... 无效，您的活动是否正在运行？

```
static TapControlledMapView mapView;
onCreateView...
if (mapView == null) {
//do things
else 
parentViewGroup.removeView(mapView);
        Button botonFiltro = (Button) parentViewGroup
                .findViewById(R.id.botonFiltro);
        parentViewGroup.removeView(botonFiltro);
        inf.addView(mapView);
return inf; 
```

我就是这样处理“你只能拥有一张地图”的东西的。

那么...如果我更改活动，为什么会崩溃？我检查了 parentViewGroup 不为空，所以 MapView 有一个父级（我不知道这是否有任何意义）。

我的 TabListener 就是这样；

公共类 MyTabListener 实现 TabListener {

```
public Fragment fragment;

public MyTabListener(Fragment fragment) {
    super();
    this.fragment = fragment;
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    //TODO: onTabReselected
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {        
    ft.replace(R.id.fragmentContainer, fragment);
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    ft.remove(fragment);
} 
```

最奇怪的是，如果我第一次进去不碰地图，或者第二次，它并没有崩溃。

我是 Android 新手，所以也许我做的不对。有谁能够帮我？

编辑：我使用另一个库来制作兼容的 ABS、片段和地图。我关注了这个博客：http: [//xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/](http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/)

固定的！问题是我在评论中谈到的问题。听众依附于旧活动。添加新的侦听器并完成！

# asp.net - 如何检查 Google Cloud Messaging 推送通知的新数据

> ID：13045795
> 
> 赞同：0
> 
> 时间：2012-10-24T08:52:33.473
> 
> 标签：asp.net, wcf, http, google-cloud-messaging, updates

我想要实现的是

服务器端（带有 JSON 或 ASP.NET 页面的 WCF 服务（我还不知道我需要什么））

1.  通过来自现有页面的 HTTP 请求定期检查最新数据。（这是一个动态页面，不知道我在那里，所以它不能发送更新。）
2.  如果该页面上有任何更改，请向 Google Cloud Messaging 系统发送发布请求，表明有新数据
3.  已注册的客户端会收到通知并获得小于 4 KB 的有效负载数据。

问题是 #1 我如何在服务器端定期检查新数据？如果那是桌面应用程序，我肯定会使用计时器。

我卡在这一点上。你能告诉我你认为它应该是什么样子吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:14:19.743

“通过来自现有页面的 HTTP 请求检查最新数据”是什么意思？是**你的**页面，还是别人的？另外，为什么您认为您的代码需要位于 WCF 服务或 ASP.NET 页面中？从您目前所了解的情况来看，这听起来像是一个常规的可执行文件。让我们回顾一下它会做什么：

*   通过 HTTP 拉取页面，检查自上次以来它是否更改
*   如果是这样，请提取注册客户列表，将 GCM 发送给他们

这两项任务都不涉及提供网页。如果这段代码需要以某种方式与网站交互，那没关系；但它不一定是上述网站的一部分。它可以，但不是必须的。

也就是说，纯粹在 Web 服务器环境中运行计划任务是很棘手的，几乎是不可能的。那里有多种调度工具（首先想到的是 Windows 任务调度程序）——但它们大多是面向执行程序的——即独立程序、EXE。如果您绝对必须在 Web 服务器中运行此代码，您可以编写一些可执行的独立程序（例如，在 JavaScript 中使用 XMLHTTPRequest 或 cURL 调用），这将导致对本地 Web 服务器的 HTTP 请求，并安排对所述脚本的调用在任务计划程序中。

编辑：调度本身不能也不应该是基于网络的。调度引擎在 Web 服务之外——大多数托管服务提供商会在 Windows 任务调度器之上提供这样的服务。检查您的服务器的管理界面（CPanel、RDP 或您有什么）。

无论如何，要从调度程序调用网页，请调度以下命令：

```
cscript.exe c:\SomePath\CallWeb.js 
```

CallWeb.js 是这样的：

```
var xh = new ActiveXObject("Msxml2.XMLHTTP");
xh.open("GET", "http://localhost/mypage.aspx", false);
xh.send(); 
```

其中 mypage.aspx 是拉取 SonDepremler.aspx、解析、检测更改并发送 GCM 的页面。

这是您的问题 #1 的答案 - 您如何在托管的 Web 服务器环境中进行一些预定的处理。如果您对解决方案的其他部分感到困惑，请提出单独的问题。

# c# - 将 Web 服务器上的文件的下载功能写入客户端 PC。

> ID：13045800
> 
> 赞同：0
> 
> 时间：2012-10-24T08:52:55.147
> 
> 标签：c#, jquery

您好，我需要编写一个下载功能，这样当我网站的用户单击一个按钮时，文件就会下载到那里的 PC。

如果我将此用作链接，则将下载该文件：

```
http://formvalue.co.za/download/" + fileName + ".xlsx" 
```

但是在那之后我不能做任何事情，所以我需要在一个函数中使用它，这样我就可以在下载文件后从我的服务器上删除它。

我正在使用 MVC，所以该函数可以在 Jquery 或 C# 中。

谁能帮忙，如果需要任何信息，请提前询问，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:20:56.267

你能简单地使用一个返回服务器并调用以下方法的 LinkBut​​ton 吗？

```
internal static void ContentToBrowser(string contentType, string filename, string content)
        // Send to browser
        var response = HttpContext.Current.Response;
        response.Clear();
        response.ContentType = contentType;
        response.AddHeader("Content-Disposition", 
                    String.Format("attachment; filename=\"{0}\"", filename));
        var contentLength = response.ContentEncoding.GetByteCount(content);
        response.AddHeader("Content-Length", contentLength.ToString());
        response.Write(content);
        response.End();
} 
```

这允许您将所需的内容直接写回客户端，而无需担心存储在服务器上。例如

```
protected void LinkButtonClick(object sender, EventArgs e)
{
     string filename = @"c:\filepath\blah.xlsx";
     string content = File.ReadAllText(filename);
     ContentToBrowser("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "downloaded-blah.xlsx", content);
     File.Delete(filename);
} 
```

但是，我不得不质疑您之后删除文件的动机。你怎么知道它已经被客户端成功下载和存储了？

# java - Primefaces 3.4 单元内可编辑表格在验证失败后将 inputtext-cell 标记为红色

> ID：13045803
> 
> 赞同：0
> 
> 时间：2012-10-24T08:52:58.407
> 
> 标签：java, jsf, primefaces

我在 PF 3.4 中使用 Mojarra/Tomcat 7.0.29 中的单元内可编辑数据表。

我的问题是我正在对输入文本应用验证，效果很好。我唯一的问题是验证失败后，单元格被标记为红色。即使我关闭（即单击取消按钮）可编辑模式，下次我尝试进入编辑模式时它仍然是红色的。关闭可编辑模式***后，***我需要删除红色突出显示。

它主要是一个外观问题，因为一切正常。

有任何想法吗？

到目前为止，我已经`setValid(true)`在我的验证器中尝试了该组件，但它似乎没有多大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:01:36.717

您需要的组件是[ResetInput](http://www.primefaces.org/showcase/ui/resetInput.jsf)。

> 当验证失败时，输入组件将其本地值保持在状态。ResetInput 用于从状态中清除缓存的值，以便组件从支持 bean 模型中检索它们的值。

将重置输入组件附加到一个操作以重置另一个组件状态

```
<p:commandButton ....>
    <p:resetInput target="input1" />
</p:commandButton> 
```

另一种解决方案是使用PrimeFaces Extensions 中的[ResetInput](http://fractalsoft.net/primeext-showcase-mojarra/views/resetInput.jsf)，它也支持该`event`属性。通过这种方式，您可以像这样直接连接您`rowEditCancel`的`resetInput`：

```
<p:ajax event="rowEditCancel"/>
<pe:resetInput event="rowEditCancel" for="input1"/> 
```

# java - 如何将数据从 Oracle 中的 (PL/)SQL 复制到另一个 DBMS？

> ID：13045806
> 
> 赞同：0
> 
> 时间：2012-10-24T08:53:07.457
> 
> 标签：java, python, sql, oracle, postgresql

**任务**：将数据库中的所有数据（没有模式）复制到另一个数据库（可能是不同类型的）。我无法修改源数据库，所以它是只读备份

**上下文**：将 Oracle 与许多数据库集成。现在我正在集成 Oracle 和 Postgres。

**资源**：仅连接字符串，能够以最高可用权限连接数据库。（我无法通过 ssh 访问它 - 无法通过 ssh 创建有序备份和下载文件，或者编译和启动 web/ftp 服务器等）

**问题**：是否有任何经过验证且*快速*的方法来提取这些数据？也许有人有一个干净代码的开源解决方案？

此处出现“快速”一词是因为仅一次选择 N 行（使用 rownum 或 row_number()）并传输到目标数据库或中间文件太慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:10:39.033

我建议你看看[Liquibase](http://www.liquibase.org/)。我已经成功地使用它来使架构和数据在多个环境中保持一致（尽管只有 SQLServers，但我确信它也适用于不同的 RDBMS）。

至于性能，我有点担心，正如您提到的“TB 级数据”......不过，它可能值得一试。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:25:14.560

像 spring-batch 这样的轻量级 ETL 工具可能是完成这项任务的完美工具。

数据块的微观管理就是它所写的。

看一下 jdbc 游标示例：您只需配置 SELECT 和 INSERT 语句以及映射，Spring-Batch 将负责分页。

您可以在 github 中找到它： [https ://github.com/SpringSource/spring-batch/blob/master/spring-batch-samples/src/main/resources/jobs/iosample/jdbcCursor.xml](https://github.com/SpringSource/spring-batch/blob/master/spring-batch-samples/src/main/resources/jobs/iosample/jdbcCursor.xml)

可以在以下位置找到参考： [http ://static.springsource.org/spring-batch/reference/html/readersAndWriters.html#database](http://static.springsource.org/spring-batch/reference/html/readersAndWriters.html#database)

Spring批处理保持已经处理了多少记录的状态，并允许继续先前崩溃的过程。它通过将计数器保存在“jobRepository”中来做到这一点，例如，它可以在第三个数据库中。

当然，这是纯java方案，native方案可能会更快，但如果你只获取JDBC连接字符串，你可能会试一试。这还假设您知道要传输的所有表的表结构。如果没有，简单的 JDBC 工具（例如 SquirrelSQL）可以帮助您。

问候，吉尔特。

# javascript - 放大 iOS/iphone/ipad 时 jqueryui 对话框的位置问题

> ID：13045814
> 
> 赞同：4
> 
> 时间：2012-10-24T08:53:28.463
> 
> 标签：javascript, iphone, ios, jquery-ui, dialog

我有一个 jqueryui 对话框，除了在 iOS 设备上放大时效果很好。当用户触发打开对话框时，它会离开屏幕。如果用户未缩放，则不会发生这种情况。可以做些什么来解决这个问题？

```
$('#white_box_content_'+id).dialog({ 
        autoOpen: false,
        modal:true,
        position:"center",
        closeText:'',
        resizable:false,
        title:null,
        draggable:false,
        //dialogClass:'jquery_dialog_position',
        zIndex:800 
    });
    $('#white_box_content_'+id).dialog('open');
    $('.ui-widget-overlay').css( "position" , 'fixed' );
    $(".ui-dialog-titlebar").remove();
    $('#white_box_content_'+id).dialog( "option" , 'position' , 'center' ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:47:27.510

你不能。`Position: fixed`根据视口进行布局。问题是在 iOS 中，放大页面不会改变视口。您无法判断用户何时放大页面。不过，您可以使用 CSS 和元标记在 iOS 设备上“禁用”缩放。

# gwt - TabLayoutPanel 选择处理程序触发多次

> ID：13045815
> 
> 赞同：1
> 
> 时间：2012-10-24T08:53:34.950
> 
> 标签：gwt, uibinder, gwt-tablayoutpanel

目前我正在使用 GWT TabLayoutPanel 并遇到了一些问题。我的应用程序使用活动和地点来管理浏览器历史记录。使用 TabLayoutPanel，我试图通过在 onSelectionHandler() 事件中执行 placeController.goTo() 将选项卡存储在历史记录中（以便我可以返回浏览器）。我正在刷新选项卡列表执行 tabLayoutPanel.clear()。问题是 tabPanel.clear() 多次触发 selectionHandler ，因此我的 Places 多次触发。为了解决这个问题，我必须添加对 SelectionHandler 的本地启用和禁用，但这看起来不适合我。

下面是代码示例。我正在使用 addEvents 方法来刷新某些事件的选项卡列表。

```
@UiField
TabLayoutPanel tabPanel;
private Boolean enabledSelectionHandler = true;
...
    public EventsPageImpl(EventBus bus, final PlaceController placeController) {
        initWidget(uiBinder.createAndBindUi(this));
        tabPanel.addSelectionHandler(new SelectionHandler<Integer>() {
            @Override
            public void onSelection(SelectionEvent<Integer> event) {
                if (enabledSelectionHandler) {
                    if (eventsList.size() > 0 && event.getSelectedItem() != 0) {
                        placeController.goTo(new EventsPlace(eventsList.get(event.getSelectedItem() - 1).getId().toString()));
                    } else {
                        placeController.goTo(new EventsPlace(null));
                    }
                }

}
    });
...
}

@Override
public void addEvents(List<ClientEvent> events) {
    enabledSelectionHandler = false;
    tabPanel.clear();
    tabPanel.add(new EventsTab(presenter), CommonMessages.INSTANCE.createNewEvent());
    if (eventsList.size() == 0 && events.size() > 0) {
        for (ClientEvent event : events) {
            eventsList.add(event);
        }
    }
    for (ClientEvent event : eventsList) {
        tabPanel.add(new EventsTab(event, presenter), event.getTitle());
    }
    enabledSelectionHandler = true;
} 
```

如果没有本地 enabledSelectionHandler 使用，是否有任何其他适当的方法来防止 SelectionHandler 被多次触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:04:21.717

TabLayoutPanel 面板的行为是正确的。当您调用 clear 时，TabLayoutPanel 会一个一个地删除每个选项卡。删除选项卡时，会选择最后一个选项卡 -> 发送选择事件。因此，当您清除具有 n 个元素的 TabLayoutPanel 时，您应该引发 n-1 个选择事件。

我认为您的解决方案很好，但也许您可以使用处理程序注册来启用/禁用监听事件

```
final HandlerRegistration registration = tabPanel.addSelectionHandler(this);
registration.removeHandler(); 
```

还可以考虑使用 BeforeSelectionEvent 启用/禁用事件

# haskell - Haskell 延迟卸载

> ID：13045820
> 
> 赞同：3
> 
> 时间：2012-10-24T08:53:45.020
> 
> 标签：haskell, lazy-loading, lazy-evaluation

我需要有一个大的数据列表，当在特定位置引用时计算（从文件加载，和/或如果尚未生成，则生成它）并将其保留以备将来使用。这由绑定到函数的惰性列表提供支持。这些“块”有时会被加载，但在那之后从未真正使用过，同时仍然在代码中有效地引用，因此 GC 不会接收到它们。

由于 RAM 很快就会被填满，我想在一段时间后懒惰地卸载这些块，因为它们没有被任何东西使用。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:04:08.837

您可以通过使用`unsafeInterleaveIO`读取块并定期浏览列表并删除对长时间未使用的块的引用来实现这一点（或者：使用**@nponeccop**在评论中建议的弱指针），但我会去使用不依赖 GC 来管理块内存的东西（因为可预测的内存使用对您很重要）。

例如：

```
import Data.HashTable.IO

type ChunkMap = BasicHashTable ChunkId (Maybe Chunk)

newChunkMap :: IO ChunkMap
getChunk :: ChunkMap -> IO Chunk
freeUnusedChunks :: ChunkMap -> IO () 
```

where`getChunk`为丢失的块分配内存，`malloc`并`freeUnusedChunks`遍历表和`free`未使用的块。

您甚至可以`freeUnusedChunks`在单独的线程中运行：

```
freeThread = forever $ do
                 withChunkMapLock $ do
                     freeUnusedChunks map
                     threadDelay 5000000 
```

# facebook - facebook opengraph中的推断属性是什么意思

> ID：13045824
> 
> 赞同：13
> 
> 时间：2012-10-24T08:53:54.143
> 
> 标签：facebook, facebook-opengraph

> **可能重复：**
> [在对象调试器中获取错误的 ogtype](https://stackoverflow.com/questions/9953779/get-wrong-ogtype-in-object-debugger)

我有一个与 FB 开放图集成的网站。我已经定义了我的对象和操作，现在如果我在 facebook 调试器中调试我的页面，我会收到警告：

> 推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:image”属性，即使可以从其他标签推断出值。

我发现了大量关于这个问题的帖子，但我仍然不知道如何解决它。在该页面上，我在标题中有以下元标记：

```
<meta content='' name='fb:appid'>
<meta content="test" name='og:description'>
<meta content="test" name='og:title'>
<meta content='...' name='og:url'>
<meta content='...' name='og:image'> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-24T23:50:55.470

将“名称”标签更改为“属性”，例如 -

```
<meta content="..." property="og:description"/>
<meta content="..." property="og:title"/> 
```

它应该可以正常工作。有关示例，请参阅 - [http://ogp.me/](http://ogp.me/)。

# wpf - 绑定到 ListView 的 ViewportWidth

> ID：13045827
> 
> 赞同：3
> 
> 时间：2012-10-24T08:53:59.093
> 
> 标签：wpf, listview, binding, width, viewport

我正在使用 an`IMultiValueConverter`来绑定列`Width`的`ListView`，以便它填满所有剩余空间。

我绑定到`ListView`'s `ActualWidth`，因此这还包括垂直滚动条占用的宽度（`Visibility`设置为`Auto`）。

我想得到`ListView`'s`ViewPort`的宽度（即`ListView`减去垂直滚动条宽度的宽度）。

我已经尝试按照[其他 SO question](https://stackoverflow.com/questions/5526217/how-to-get-or-compute-actual-width-of-listbox-without-vertical-scrollbar-if-visi)中的建议进行绑定，但我总是得到一个`{DependencyProperty.UnsetValue}`.

```
</GridViewColumn.Width>
     <MultiBinding Converter="{StaticResource widthConverter}">
          <Binding ElementName="lstResults" Path="ActualWidth" NotifyOnSourceUpdated="True" />
          <Binding ElementName="colPartNo" Path="ActualWidth" NotifyOnSourceUpdated="True" />
          <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ScrollViewer}" Path="ViewportWidth" NotifyOnSourceUpdated="True"/>
     </MultiBinding>
</GridViewColumn.Width> 
```

需要调整大小的列位于 ListView.View 中包含的 GridView 中。

在此先感谢您的帮助。

# asp.net-mvc - 将 IVR 和 PBX 功能添加到 Web 应用程序

> ID：13045833
> 
> 赞同：3
> 
> 时间：2012-10-24T08:54:14.490
> 
> 标签：asp.net-mvc, ivr

我有一个使用 ASP.NET C#、MVC3 和 Sql Server 后端创建的现有 Web 应用程序。现在我被要求为其添加 IVR 功能。

```
1) Is this possible? 
2) What is the best Library API to use? 
3) I found Asterisk but not very sure if this works within a Windows environment.  Also there appears to be a few .NET based Asterisk API. Which is the best one to use? 
3) How about MS Lync Server?  Though a bit concerned about additional licenses. 
4) Is there any sample applications around that I could have a look at? 
```

（PS：[通过电话.Net找到这个链接IVR应用程序](https://stackoverflow.com/questions/11541043/ivr-application-over-telephone-net)。有人使用过VoiceModel吗？它与上面的比较如何？）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:58:45.360

是的，可以将 IVR 功能添加到您现有的 Web 应用程序中，而[VoiceXML](http://www.w3.org/TR/voicexml20/)是最好的选择，因为它也是基于 Web 的技术和开放标准。这将允许您在 IVR 应用程序中重用现有 Web 应用程序中的大量业务逻辑和 SQL Server 集成。它不是一个直接的端口，因为语音用户界面 (VUI) 与图形用户界面 (GUI) 有很多不同的要求和限制，但您可以利用很多重用。

[VoiceModel](http://voicemodel.codeplex.com/)非常适合，因为它适用于 MVC。需要注意的一件事是它最近升级到 MVC 4，因此您需要将项目升级到 MVC 4，这非常简单。无论如何，我建议升级到 MVC 4。VoiceModel 在运行时生成 VoiceXML（很快也将与[Tropo](https://www.tropo.com/home.jsp)一起使用），因此它可以与任何支持 VoiceXML 的 IVR 平台一起使用。几乎所有现代 IVR 平台都支持 VoiceXML。[MS Lync Server 还支持 VoiceXML](https://stackoverflow.com/questions/5439770/does-ms-lync-server-2010-come-with-a-built-in-vxml-browser)。VoiceModel 项目中有示例应用程序。

人们已经将 Asterisk 变成了 IVR，但是那里有一个巨大的学习曲线，它在 IVR 功能方面有些限制，很难维护您的语音应用程序，并且它不支持 IVR 的开放标准，如 VoiceXML。

要了解要推荐的 IVR 平台，我需要了解有关您的 IVR 要求的更多细节。它需要坐在 PBX 后面吗？会有呼叫转移到呼叫中心吗？通话量是多少？最大通话量是多少，需要多少条线路？它可以托管还是需要在内部部署。什么类型的电话集成（例如：SIP、T1、E1、模拟等）？您需要语音识别还是直接电话键盘输入有效？

这就是使用 VoiceXML 的美妙之处；因为它是一个开放标准，它应该在大多数支持 VoiceXML 的 IVR 平台上运行。像所有标准一样，供应商之间并不是 100% 的兼容性，但其中大部分应该直接转移。我建议从[Voxeo Prophecy](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)开始。它已经过 VoiceXML 论坛的测试，非常接近标准，您可以在工作站上免费运行两个端口以进行开发或从其托管环境中免费运行。在您的工作站上运行它的好处是在开发期间进行调试，[本博客](http://kevin-junghans.blogspot.com/2011/11/testing-your-voicexml-app-with-voxeo.html)对此进行了介绍。从 Voxeo Prophecy 开始会让您更快地开始，即使您决定不在生产中使用它，应用程序也应该转移到大多数其他供应商平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T22:17:04.273

`dialogs`VoiceXML 是在您的 IVR中指定的标准方式。

主要思想是对与用户的对话进行建模，就像您为 Web 表单建模一样

```
<form id="my_form">
  <field name="location">
    <prompt>What's the location?</prompt>
  </field>
   ...
 </form> 
```

它通常与 CCXML 混合以指定呼叫控制流，例如当呼叫被挂断时您想要完成的操作。

将您的网络表单中使用的验证和业务代码与您的语音 XML 表单中使用的代码共享这一点。

尽管如此，如果您的解决方案足够简单，那么 VXML 平台就太过分了，因为您可以使用 get-digits 提示和对您的应用程序的 REST 调用来摆脱困境。

如果您想在决定之前探索可能的解决方案，请查看[twilio REST api](http://www.twilio.com/docs/api/rest)。

也许如果你分享一个小的 ivr 交易，你需​​要得到解决，最好是为了提出更好的解决方案。

# php - 值未通过选择下拉列表插入数据库

> ID：13045839
> 
> 赞同：-1
> 
> 时间：2012-10-24T08:54:36.217
> 
> 标签：php, mysql

我正在尝试将我从下拉菜单中获得的值插入到我的数据库中。我想使用我从下面的下拉菜单代码中选择的 cat_id 将它插入到 info_page 中。但由于某种原因，该值没有插入。它应该插入为**0 1 2 3 4**取决于我在下拉列表中有多少选择，但它没有这样做。我在这里做错了什么？下面是我用来插入 cat_id 值的插入函数。

```
dbConnect("INSERT INTO info_page(source, displayfrontpage, cat_id)
                    values(1,0, '".$cat[$row['pk_id']]."' )"); 
```

下面是我如何拉我的下拉菜单。

```
<select name="cat[<?=$row['pk_id']?>]">
          <?php $cat = dbConnect("SELECT * FROM category");
                if(empty($row['cat_id'])){
                ?>
                <option value="">Select Category</option>
                <?php
                }

          ?>

          <?php while($cat_r = mysql_fetch_array($cat)){ 

          if($row['cat_id'] == $cat_r['cat_id']){
          ?>
          <option value="<?=$cat_r[cat_id]?>" selected="selected">
                                  <?=stripslashes($cat_r[cat_name])?></option>
          <?php
          continue;
          }

          ?>
         <option value="<?=$cat_r[cat_id]?>">
              <?=stripslashes($cat_r[cat_name])?></option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:02:58.723

```
<select name="cat[<?=$row['pk_id']?>]"> 
```

应该

```
<select name="cat[<?echo $row['pk_id'];?>]"> 
```

等等..

您的代码有很多错误。使用此代码

```
<select name="cat[<?php echo $row['pk_id']?>]">
          <?php $cat = dbConnect("SELECT * FROM category");
                if(empty($row['cat_id'])){
                ?>
                <option value="">Select Category</option>
                <?php
                 while($cat_r = mysql_fetch_array($cat)){ 

          if($row['cat_id'] == $cat_r['cat_id']){
          ?>
          <option value="<?php echo $cat_r[cat_id]?>" selected="selected">
                                  <?php echo stripslashes($cat_r['cat_name'])?></option>
          <?php
          continue;
          }

          ?>
         <option value="<?php echo $cat_r['cat_id'];?>">
              <?php echo stripslashes($cat_r['cat_name']);?></option> 
```

# c# - 显示透明背景的图片框

> ID：13045840
> 
> 赞同：0
> 
> 时间：2012-10-24T08:54:44.117
> 
> 标签：c#, winforms, picturebox, image

> **可能重复：**
> [Winforms semi-transparent PNG over semi-transparent PNG](https://stackoverflow.com/questions/10455484/winforms-semi-transparent-png-over-semi-transparent-png)

我正准备在学校做一个游戏Risk的项目，我的老师说可以，但是我们只使用Windows Form而不是XNA或其他工具。

在《风险》中，如果你了解这款游戏，你可能知道，这张地图是建立在许多国家上的，每个国家都应该是它自己的画面，因为它有它自己的效果，可以这么说。

那么是否有可能，使用 PictureBox，将其更改为具有“透明”效果并仅覆盖图片而不是像图片周围的框？

对不起，如果这是一个糟糕的书面描述！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:39:45.773

Afaik，不可能让图片框处理透明背景。一般来说，winforms 对透明度的支持不好。

最好的解决方案是编写自己的`UserControl`绘制国家图像的方法。

看一下：

*   [开发自定义 Windows 窗体控件](http://msdn.microsoft.com/en-us/library/6hws6h2t.aspx)关于如何实现自己的控件
*   关于如何处理图像（尤其是[`Image.FromFile`](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)加载图像）的[图像类](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)
*   [Graphics.DrawImage](http://msdn.microsoft.com/en-us/library/42807xh1.aspx)关于如何在绘图表面上绘制图像（在您的`UserControl.OnPaint`方法内......）

# javascript - 错误“试图对不允许突变的数据库进行突变操作。” 尝试从 indexedDB 中的对象存储中删除对象时

> ID：13045842
> 
> 赞同：3
> 
> 时间：2012-10-24T08:54:54.060
> 
> 标签：javascript, indexeddb

所以基本上我已经阅读了很多教程、演示和 API 规范本身，并没有走得太远，非常感谢你们在这方面的帮助。

我最近一直在尝试更好地掌握 IndexedDB，但遇到了一些问题，希望对此代码进行一些批评/反馈。

这段代码中有两个我似乎无法修复的错误。

首先在加载时调用方法 init() 打开数据库并用已存储的数据填充我的列表。尽管 getAllDetails 函数在 open 函数之后，但控制台中的错误显示“db is null”。

第二个问题是 deleteDetails 函数，当尝试删除任何索引时，控制台中的错误显示“在不允许突变的数据库上尝试了突变操作”。

任何帮助将不胜感激，我为大量代码道歉！

附言。这一切都使用 FF 17 和 Chrome 22 的 localhost 服务器进行了测试。

```
var indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB;
var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
var IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;

var Main = {};
Main.indexedDB = {};
Main.indexedDB.db = null;

Main.indexedDB.onerror = function(e) {
console.log(e);
};

function init() {
Main.indexedDB.open();
Main.indexedDB.getAllDetails();
}

Main.indexedDB.open = function () {
var request = indexedDB.open("DBV1",2);

//If no db exists or if the database is behind on versions then it will update.
//Though FF is the only browser atm that supports this method.
request.onupgradeneeded = function (e) {
console.log("Running UpgradeNeeded");
Main.indexedDB.db = e.target.result;
var thisDb = Main.indexedDB.db;

thisDb.onerror = function (e) {
alert("Sorry, an unforseen error was thrown.");
console.log("***ERROR***");
console.dir(e.target);
};

if (!thisDb.objectStoreNames.contains("Profile")) {
console.log("I need to make the Profile object store.");
thisDb.createObjectStore("Profile", { keyPath: "UserId", autoIncrement: true });
}
if (!thisDb.objectStoreNames.contains("Appointments")) {
console.log("I need to make the Appointments object store.");
thisDb.createObjectStore("Appointments", { keyPath: "AppointmentId", autoIncrement: true });

}
if (!thisDb.objectStoreNames.contains("Assignment")) {
console.log("I need to make the Assignment object store.");
var objectStore = thisDb.createObjectStore("Assignment", { keyPath: "AssignementId", autoIncrement: true });

}
}; //End-UpgradeNeeded

//To make this compatible with Chrome, the onsuccess method must be used.
request.onsuccess = function (e) {
console.log("This was successful.");

Main.indexedDB.db = e.target.result;
var thisDb = Main.indexedDB.db;

thisDb.onerror = function (e) {
alert("Sorry, an unforseen error was thrown.");
console.log("***ERROR***");
console.dir(e.target);
};

if (!thisDb.objectStoreNames.contains("Profile")) {
console.log("I need to make the Profile object store.");
thisDb.createObjectStore("Profile", { keyPath: "UserId", autoIncrement: true });
}
else{

}
if (!thisDb.objectStoreNames.contains("Appointments")) {
console.log("I need to make the Appointments object store.");
thisDb.createObjectStore("Appointments", { keyPath: "AppointmentId", autoIncrement: true });

}
else{

}
if (!thisDb.objectStoreNames.contains("Assignment")) {
console.log("I need to make the Assignment object store.");
thisDb.createObjectStore("Assignment", { keyPath: "AssignementId", autoIncrement: true });

}
else{

}

}; //End-onsuccess

request.onerror = function (e) {

alert("Sorry, an unforseen error was thrown.");
console.log("***ERROR***");
console.dir(e.target);

};

}; //End-OpenFunction

Main.indexedDB.addDetails = function (ProfName, AppointName) {
var db = Main.indexedDB.db;

console.log("Before Prof");
var transProf = db.transaction(["Profile"], "readwrite");
var storeProf = transProf.objectStore("Profile");

console.log("Before Appo");
var transAppo = db.transaction(["Appointments"], "readwrite");
var storeAppo = transAppo.objectStore("Appointments");

var dataProf = {
"text": ProfName
};

var dataAppo = {
"text": AppointName
};

var requestProf = storeProf.put(dataProf);
requestProf.onsuccess = function (e) {
console.log("Prof data successfully entered.");
};
requestProf.onerror = function (e) {
console.log(e);
};
var requestAppo = storeAppo.put(dataAppo);
requestAppo.onsuccess = function (e) {
console.log("Appo data successfully entered.");
};
requestAppo.onerror = function (e) {
console.log(e);
};
}; //End-AddDetails

function addDetails() {
var Prof = document.getElementById("ProfileName");
var Appo = document.getElementById("AppointmentName");
Main.indexedDB.addDetails(Prof.value, Appo.value);
Main.indexedDB.getAllDetails();
};

Main.indexedDB.getAllDetails = function () {
console.log("Get all called.");
var Prof = document.getElementById("Profile");
Prof.innerHTML = "";
var Appo = document.getElementById("Appointments");
Appo.innerHTML = "";

var db = Main.indexedDB.db;

var transProf = db.transaction(["Profile"], "readwrite");
var storeProf = transProf.objectStore("Profile");

var transAppo = db.transaction(["Appointments"], "readwrite");
var storeAppo = transAppo.objectStore("Appointments");

console.log("Stores and transactions created.");
//////////////////////////////////////////////////////////////////
var cursorRequestProf = storeProf.openCursor();
cursorRequestProf.onsuccess = function(e) {
var result = e.target.result;
if(!!result == false)
return;

renderUser(result.value, 1);
result.continue();
};
cursorRequestProf.onerror = Main.indexedDB.onerror;
/////////////////////////////////////////////////////////////////
var cursorRequestAppo = storeAppo.openCursor();
cursorRequestAppo.onsuccess = function(e) {
var result = e.target.result;
if(!!result == false)
return;

renderUser(result.value, 2);
result.continue();
};
cursorRequestAppo.onerror = Main.indexedDB.onerror;
/////////////////////////////////////////////////////////////////
console.log("Cursors complete.");

}; //End-GetAllDetails

function renderUser(row, column) {
if(column == 1){
var Users = document.getElementById("Profile");
}
else{
var Users = document.getElementById("Appointments");
}
var li = document.createElement("li");

var t = document.createTextNode(row.text);

li.appendChild(t);

Users.appendChild(li);
};

function deleteDetails(){
var deleteIndex =  document.getElementById("DeleteNo");
Main.indexedDB.deleteIndex(deleteIndex.value);
Main.indexedDB.getAllDetails();
};

Main.indexedDB.deleteIndex = function(index){
var db = Main.indexedDB.db;

var transProf = db.transaction(["Profile"], "readwrite");
var storeProf = transProf.objectStore("Profile");

var transAppo = db.transaction(["Appointments"], "readwrite");
var storeAppo = transAppo.objectStore("Appointments");

var requestProf = storeProf.deleteIndex(index);
requestProf.onsuccess = function(e) {
console.log("Successful Prof delete");
};

requestProf.onerror = function(e) {
console.log("Error Prof Deleting: ", e);
};

var requestAppo = storeAppo.deleteIndex(index);
requestAppo.onsuccess = function(e) {
console.log("Successful Appo delete");
};

requestAppo.onerror = function(e) {
console.log("Error Appo Deleting: ", e);
};

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:21:34.043

第一个问题：您在 open 方法之后直接调用 getAllDetails() 。由于 indexeddb API 的异步特性，您无法执行此操作。必须先打开数据库，然后才能调用 getAllDetails 方法。这意味着您将不得不使用回调函数。

```
function init() { 
    Main.indexedDB.open(function (){Main.indexedDB.getAllDetails()});
} 

Main.indexedDB.open = function (callback) {  
   var request = indexedDB.open("DBV1",2); 
   request.onupgradeneeded = function (e) {   }
   request.onsuccess = function (e) {    
       Main.indexedDB.db = e.target.result;  
       callback(); 
   }
} 
```

只有当 onsuccess 被调用时，您才能开始使用 indexedDB。

第二个问题：索引只能在版本更改事务中删除。获得此类交易的唯一方法是打开具有更高版本号的数据库。在这种情况下，可以在 indexeddb.open 请求的 onupgradeneeded 回调中访问版本更改事务。

有关 indexeddb 的更多信息，请查看[我的博客](http://www.kristofdegrave.be)。

# qt - QBuffer::open 返回值是否为假？

> ID：13045843
> 
> 赞同：0
> 
> 时间：2012-10-24T08:54:56.900
> 
> 标签：qt, buffer

我有可能 QBuffer::open(OpenMode mode) 返回 false 吗？这是实现：

```
bool QBuffer::open(OpenMode flags)
{
    Q_D(QBuffer);

    if ((flags & Append) == Append)
        flags |= WriteOnly;
    setOpenMode(flags);
    if (!(isReadable() || isWritable())) {
        qWarning("QFile::open: File access not specified");
        return false;
    }

    if ((flags & QIODevice::Truncate) == QIODevice::Truncate) {
        d->buf->resize(o);
    }
    if ((flags & QIODevice::Append) == QIODevice::Append) // append to end of buffer
        seek(d->buf->size());
    else
        seek(o);

    return true;
}

bool QIODevice::isReadable() const
{
    return (openMode() & ReadOnly) != 0;
}

bool QIODevice::isWritable() const
{
    return (openMode() & WriteOnly) != 0;
} 
```

我会说不。我正在进行这项研究，因此我的 flexLint 代码分析不会产生新的警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:09:37.220

如果你不给它正确的标志，它可能会返回 false。例如，调用`QBuffer::open(QIODevice::Text)`会失败，因为它没有指定读取或写入模式。除此之外，它将始终返回 true。

# linux - Git检索分支中修改的所有文件的列表

> ID：13045844
> 
> 赞同：8
> 
> 时间：2012-10-24T08:54:59.773
> 
> 标签：linux, git, branch

如何获取分支中已更改的所有文件的列表？我不能做 git-diff 因为分支已经合并到 master 中。

我需要一种方法来列出分支中的所有提交并提取文件的路径，而不会重复。

如果有人在此之前做过这样的事情，将不胜感激，

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:01:02.127

如果我们将您的分支视为从**master分支的****BranchA**，您可以执行以下操作：

 **```
git diff --name-status `git merge-base BranchA master`..BranchA 
```

这将为您提供以状态为前缀的分支中已更改文件的列表（M 表示已修改，A 表示已添加，D 表示已删除）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:24:23.623

做一个`git log`并找出您想从哪个提交中了解差异。假设您确定您想要的提交的哈希是`aaaaaa`. 然后运行：

```
git diff aaaaaa --stat 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T08:59:11.783

如果分支指向合并提交，则此方法有效：

```
git diff branch_name^..master --name-only 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-04T06:27:02.227

我遇到了同样的问题，@Michael Burtin 的解决方案大部分都有效。但是，我想将此添加到适用于任何分支的脚本中，因此它不能包含分支名称。这就是我想出的：

```
git diff --name-only $(git merge-base master HEAD) 
```

它找到主分支和当前分支的壁橱祖先，然后将提交与当前分支进行比较。**

# opencv - 在 Win7 32 位上使用代码块 10.05 构建 opencv2.4.2（使用 cmake 2.8.9）时出错。

> ID：13045846
> 
> 赞同：1
> 
> 时间：2012-10-24T08:55:01.527
> 
> 标签：opencv, cmake, codeblocks

```
-------------- Clean: all in OpenCV ---------------

Cleaned "OpenCV - all"

-------------- Build: all in OpenCV ---------------

Using makefile: Makefile
Execution of 'make.exe -s -f Makefile all' in 'C:\opencv\build' failed.
Nothing to be done. 
```

我在堆栈溢出中发现了该问题[的威胁。](https://stackoverflow.com/questions/4809980/codeblocks-cmake-generated-makefile-says-nothing-to-be-done)

但是，我不知道如何以及在何处从“make.exe”更改为“mingw32-mage.exe”！？我按照所有说明使用 cmake 生成 opencv2.4.2 项目，但我认为由于代码块的工作区中只有 CmakeLists.txt 文件，因此无法正确生成 makefile

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:42:08.163

在 CMake GUI 程序中找到调用的变量`CMAKE_BUILD_TOOL`或`CMAKE_MAKE_PROGRAM`在旧 CMake 的情况下。将其更改为您想要的任何内容并重新配置/重新生成缓存。

# ios - 如何将字符串拆分为两行标签

> ID：13045853
> 
> 赞同：1
> 
> 时间：2012-10-24T08:55:26.977
> 
> 标签：ios, string

我在标签的文本中有一个带有符号的两个单词的字符串，类型为“&”或“/”，如何将第一个带有符号的字符串放在第一行，第二个字符串放在第二行？

这是代码

```
if(self.labelTitle.text.length> self.labelTitle.bounds.size.width){
     self.labelTitle.numberOfLines =2;

       if([self.labelTitle.text rangeOfString:@"&"].location != NSNotFound){
            NSArray * separateString = [self.labelTitle.text componentsSeparatedByString:@"&"];
            NSString * firstString =[separateString objectAtIndex:0];
            NSString *secondString =[separateString objectAtIndex:1];
            self.labelTitle.text = firstString;
            self.labelTitle.text = secondString;

        }else if ([self.labelTitle.text rangeOfString:@"/"].location != NSNotFound){
            //.....
        }
  } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:58:14.170

在代码示例中，您`firstString`使用`secondString`. 您要做的是添加`text`一次设置属性并`\n`在字符串之间添加一个：

```
if(self.labelTitle.text.length> self.labelTitle.bounds.size.width){
     self.labelTitle.numberOfLines =2;

       if([self.labelTitle.text rangeOfString:@"&"].location != NSNotFound){
            NSArray * separateString = [self.labelTitle.text componentsSeparatedByString:@"&"];
            NSString * firstString =[separateString objectAtIndex:0];
            NSString *secondString =[separateString objectAtIndex:1];
            self.labelTitle.text = [NSString stringWithFormat:@"%@\n%@", firstString, secondString];

        }else if ([self.labelTitle.text rangeOfString:@"/"].location != NSNotFound){
            //.....
        }
  } 
```

# broadcastreceiver - 如何在 GCMBroadcast 接收器中实现 wakelock.acquire

> ID：13045855
> 
> 赞同：0
> 
> 时间：2012-10-24T08:55:37.913
> 
> 标签：broadcastreceiver, google-cloud-messaging

如果我的手机处于屏幕锁定状态，GCMBroadcast 接收器不会将消息发送到 GCMIntentService。我读过解决方案是在我的广播接收器的 onReceive 方法中实现wakelock.acquire() 和wakelock.release() 的技巧。但是 GCMBroadcastReceiver 最后有 onReceive，所以我不能添加这个功能。

有解决办法吗？

[编辑]

**错误的问题，经过 5 小时的调查，我已经解决了所有问题。**

澄清：

*   GCMBroadcast 有唤醒锁获取和释放，不需要任何实现。
*   我的问题是由于在 SERVER CODE 中将 DELAY WHEN IDLE 属性设置为 true。

    ```
    builder = builder.delayWhileIdle(true); 
    ```

来自官方文档：

> 如果设备已连接但空闲，消息仍将立即传递，除非 delay_while_idle 标志设置为 true。否则，它将存储在 GCM 服务器中，直到设备唤醒。

[/编辑]

这是我的代码： **GCMIntentService**

```
public class GCMIntentService extends GCMBaseIntentService{

public GCMIntentService() {
    super(CommonStuff.SENDERID);
    // TODO Auto-generated constructor stub
}

@Override
protected void onError(Context arg0, String arg1) {
    // TODO Auto-generated method stub
    System.out.println("onError:"+arg1);
}

@Override
protected void onMessage(Context context, Intent intent) {

    Log.i("GCMIntentService", "Message Received");

    Bundle extras = intent.getExtras();

    // Extract the payload from the message

    if (extras != null) {

        String type=(String)extras.get("type");
        String msg=(String)extras.get("message");
        //do something........

    }

}

@Override
protected void onRegistered(Context ctx, String regId) {
    Log.d("GCMIntentService","REGID_ARRIVED:"+regId);
    try {
        //do something
    } catch (Exception e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

}

@Override
protected void onUnregistered(Context arg0, String arg1) {
    // TODO Auto-generated method stub
    System.out.println("onUnregistered:"+arg1);

}

} 
```

**唤醒锁**

```
public abstract class WakeLocker {
private static PowerManager.WakeLock wakeLock;

public static void acquire(Context ctx) {
    if (wakeLock != null) wakeLock.release();

    PowerManager pm = (PowerManager) ctx.getSystemService(Context.POWER_SERVICE);
    wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
            PowerManager.ACQUIRE_CAUSES_WAKEUP |
            PowerManager.ON_AFTER_RELEASE, MainActivity.APP_TAG);
    wakeLock.acquire();
}

public static void release() {
    if (wakeLock != null) wakeLock.release(); wakeLock = null;
}
} 
```

**我在清单中的 GCMreceiver**

```
<receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="my.app.package" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:33:00.687

只需将问题的编辑部分中的解决方案设置为已解决。

# java - 如何在java中读取带有属性的xml文件？

> ID：13045859
> 
> 赞同：0
> 
> 时间：2012-10-24T08:55:56.800
> 
> 标签：java, xml

我知道 SO question [Failing to get element values using Element.getAttribute()](https://stackoverflow.com/questions/9008864/java-read-xml-attributes)但是因为我是 java 初学者，所以我还有其他问题。我正在尝试构建的是简单的应用程序，它将读取 XML 文件，然后将其与“黄金大师”进行比较。我的问题是：

*   我有很多不同的 XML 文件，它们的属性不同
*   XML 文件比较大。（810 行归档 - 很难用肉眼检查）

文件示例：

```
 <DocumentIdentification v="Unique_ID"/>
  <DocumentVersion v="1"/>
  <DocumentType v="P81"/>
  <SenderIdentification v="TEST-001--123456" codingScheme="A01"/>
  <CreationDateTime v="2012-10-15T13:00:00Z"/>
  <InArea v="10STS-TST------W" codingScheme="A01"/>
  <OutArea v="10YWT-AYXOP01--8" codingScheme="A01"/>
  <TimeSeries>
<Period>
 <TimeInterval v="2012-10-14T22:00Z/2012-10-15T22:00Z"/>
   <Resolution v="PT15M"/>
        <Interval>
            <Pos v="1"/>
            <Qty v="500"/>
        </Interval>
        <Interval>
            <Pos v="2"/>
            <Qty v="500"/>
        </Interval>
        <Interval>
            <Pos v="3"/>
                            <Qty v="452"/>
                    </Interval>
                     ...
                     ...
                    <Interval>
            <Pos v="96"/>
                            <Qty v="891"/>
                    </Interval>
               </Period>   
        </TimeSeries> 
```

应用上述问题的解决方案并没有让我更进一步......我意识到我可以将属性转换为`NamedNodeMap`但我不知道如何以编程方式迭代它

是的，我知道这听起来很像“做我的功课”，但我真正需要的是至少小踢屁股，让我朝着正确的方向前进。感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:07:42.540

该方法`item(int index)`应该有助于遍历属性：

```
NamedNodeMap map = getItFromSomeWhere();
int i = 0;
while ((Node node = map.item(i++)) != null) {
   // node is ith node in the named map
} 
```

# python - Python - 如何获取进程的起始/基地址？

> ID：13045864
> 
> 赞同：11
> 
> 时间：2012-10-24T08:56:09.257
> 
> 标签：python, windows, process, ctypes, pywin32

如何获取进程的起始地址/基地址？例如 Solitaire.exe (solitaire.exe+BAFA8)

```
#-*- coding: utf-8 -*-
import ctypes, win32ui, win32process

PROCESS_ALL_ACCESS = 0x1F0FFF
HWND = win32ui.FindWindow(None,u"Solitär").GetSafeHwnd()
PID = win32process.GetWindowThreadProcessId(HWND)[1]
PROCESS = ctypes.windll.kernel32.OpenProcess(PROCESS_ALL_ACCESS,False,PID)

print PID, HWND,PROCESS 
```

我想计算一个内存地址，为此我需要 solitaire.exe 的基地址。

这是我的意思的图片：

![内存地址](../Images/f8f62d5cbc1d4780cb3dcb3d6b2a1b40.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:01:20.347

我认为[GetModuleHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199%28v=vs.85%29.aspx)返回的句柄实际上是给定模块的基地址。您可以通过传递 NULL 来获取 exe 的句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:05:06.107

**安装 pydbg**

来源：[https ://github.com/OpenRCE/pydbg](https://github.com/OpenRCE/pydbg)

这里的非官方二进制文件：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pydbg](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pydbg)

```
from pydbg import *
from pydbg.defines import *

import struct

dbg = pydbg()

path_exe = "C:\\windows\\system32\\calc.exe"

dbg.load(path_exe, "-u amir")
dbg.debug_event_loop()

parameter_addr = dbg.context.Esp #(+ 0x8)

print 'ESP (address) ',parameter_addr

#attach not working under Win7 for me

#pid = raw_input("Enter PID:")
#print 'PID entered %i'%int(pid)
#dbg.attach(int(pid)) #attaching to running process not working 
```

你可能想看看 PaiMei，虽然它现在不是很活跃[https://github.com/OpenRCE/paimei](https://github.com/OpenRCE/paimei)

我无法让 attach() 工作并使用负载代替。Pydbg 有很多功能，例如 read_proccess_memory、write_process_memory 等。

请注意，您不能随意更改内存，因为操作系统会保护其他进程的内存不受您进程的影响（保护模式）。在 x86 处理器之前，有一些允许所有处理器在实模式下运行，即每个程序都可以完全访问内存。非恶意软件通常（总是？）不会读/写其他进程的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T02:07:15.033

[GetModuleHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199%28v=vs.85%29.aspx)的 HMDOULE 值是加载模块的基地址，可能是您计算偏移量所需的地址。

如果不是，则该地址是模块标头 (DLL/EXE) 的开头，可以`dumpbin`使用 Visual Studio 附带的实用程序显示，或者您可以使用[Microsoft PE 和 COFF 规范](http://msdn.microsoft.com/library/windows/hardware/gg463125)自己解释它以确定`AddressOfEntryPoint`and`BaseOfCode`为基地址的偏移量。如果模块的基地址不是您需要的，那么这两个中的一个是另一种选择。

例子：

```
>>> BaseAddress = win32api.GetModuleHandle(None) + 0xBAFA8
>>> print '{:08X}'.format(BaseAddress)
1D0BAFA8 
```

如果需要`AddressOfEntryPoint`or `BaseOfCode`，则必须使用遵循 PE 规范的`ctypes`调用来定位偏移量，或者只使用来学习偏移量。`ReadProcessMemory``dumpbin /headers solitaire.exe`

# iphone - 在 iphone 中使用 UIScrollView 滚动图像（第 2 部分）

> ID：13045868
> 
> 赞同：2
> 
> 时间：2012-10-24T08:56:21.853
> 
> 标签：iphone, ios, uiscrollview, scrollview

我是 iphone 开发的新手，我正在做一个简单的应用程序来练习。在该应用程序中，只有一个视图上有图像。我希望能够向左或向右滑动，让第一个图像离开视图，第二个图像进入。图像是不同的，我希望它看起来像它们是连接的。我需要它能够在一系列滑动后更改图像或重新启动。我只使用 ScrollView 来执行此操作。

这是代码：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate>
{
    UIImageView *imgView;
    UIScrollView *scrollView;
}

@property (nonatomic,retain)IBOutlet UIImageView *imgView;
@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;

//- (id)initWithPageNumber:(int)page;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize imgView,scrollView;

- (void)viewDidLoad
{
    NSArray *images = [[NSArray alloc] initWithObjects:@"1.jpeg",@"2.jpeg",@"3.jpeg", nil];
    for (int i = 0; i < images.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        imgView = [images objectAtIndex:i];
        imgView.frame = frame;
        [scrollView addSubview:imgView];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height);

    [super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.scrollView = nil;
}

@end 
```

我仍然无法滚动图像。不确定我的错误在哪里？此外，它现在给了我这个例外：

例外：

```
[__NSCFConstantString setFrame:]: unrecognized selector sent to instance 0x49b8
2012-10-24 16:49:42.411 SwipeImages[3330:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString setFrame:]: unrecognized selector sent to instance 0x49b8'
*** First throw call stack:
(0x1c8d012 0x10cae7e 0x1d184bd 0x1c7cbbc 0x1c7c94e 0x2718 0xf3817 0xf3882 0x42a25 0x42dbf 0x42f55 0x4bf67 0x213b 0xf7b7 0xfda7 0x10fab 0x22315 0x2324b 0x14cf8 0x1be8df9 0x1be8ad0 0x1c02bf5 0x1c02962 0x1c33bb6 0x1c32f44 0x1c32e1b 0x107da 0x1265c 0x1d7d 0x1ca5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:00:06.163

您正在将字符串放入数组中，将图像对象放入其中。IE

```
NSArray *images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.jpeg"],[UIImage imageNamed:@"2.jpeg"],[UIImage imageNamed:@"3.jpeg"], nil]; 
```

这里还有一个建议。使用 ping 图像而不是 jpeg。完成后通知我。

编辑：

另一件事在这里

```
imgView = [images objectAtIndex:i]; 
```

您正在将图像传递给实际上现在成为图像对象的 imageview 对象。并且图像没有框架属性。做这个

```
 imgView.image = [images objectAtIndex:i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T12:11:34.693

对于 Swift 2.2...我使用下面的代码使图像（imageView）在 scrollView 内滚动...

scrollView 是 scrollView 的 IBOutlet

```
 override func viewDidLoad() {
    super.viewDidLoad()

    scrollLeftOrRight()
    // Do any additional setup after loading the view.
}

func scrollLeftOrRight(){
    var i: CGFloat = 0

    for (i = 0 ;i < CGFloat(arrayOfImages.count) ;i++){

        //make frame for the image of imageView
        var frame = CGRect()
        frame.origin.x = self.scrollView.frame.size.width * i
        frame.origin.y = 0
        frame.size = self.scrollView.frame.size

        //make imageView then add imageView as the subView of scrollView
        let imageView = UIImageView(frame: frame)
        imageView.image = UIImage(named: arrayOfImages[Int(i)])
        imageView.contentMode = .ScaleAspectFit
        scrollView.addSubview(imageView)

        scrollView.pagingEnabled = true

}

    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * CGFloat(arrayOfImages.count), self.scrollView.frame.size.height)

 } 
```

scrollView.contentSize 行更重要......如果你不正确，那么滚动视图的内容宽度将是只有“一个”图像的宽度......为了让我们所有的图像滚动......

我们必须将scrollView的宽度乘以arrayImage的计数......并且高度将是图像的高度，因为我们不需要垂直滚动图像，对吗？

# javascript - 未捕获的 SyntaxError：将 html 放入 var 时出现意外令牌非法

> ID：13045871
> 
> 赞同：2
> 
> 时间：2012-10-24T08:56:30.137
> 
> 标签：javascript

我只是将一些 html 放入 var 中，然后出现此错误： Uncaught SyntaxError: Unexpected token ILLEGAL

```
typeForm = "Type de RDV : <br />                                                                                                                                                                                   
            <input type='radio' name='rdv-type' value='0' class='rdv-type' />Client seul<br />                                                                                                                     
            <input type='radio' name='rdv-type' value='1' class='rdv-type' />Client + con<br />                                                                                                           
            <input type='radio' name='rdv-type' value='2' class='rdv-type' />Visite agence<br />                                                                                                                   
            <input type='radio' name='rdv-type' value='4' class='rdv-type' />Signature PV<br />                                                                                                                    
            <input type='radio' name='rdv-type' value='5' class='rdv-type' />Con step<br />                                                                                                           
            <input type='radio' name='rdv-type' value='3' class='rdv-type' />Land analysis<br />"; 
```

我不明白我做错了什么。我先得到一个警告`<br />`。

我检查了其他帖子，但我真的不明白为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:58:58.567

发生这种情况是因为在 JavaScript 中，您不能简单地以字符串值开始新行，您应该*“转义新行”*：

```
var smth = "Some text \
            continues here \
            and here"; 
```

或使用字符串连接：

```
var smth = "Some text " +
           "continues here " +
           "and here"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:58:21.737

```
typeForm = "Type de RDV : <br/>" +                                                                                                                                                                                   
        "<input type='radio' name='rdv-type' value='0' class='rdv-type' />Client seul<br />" +                   
.... 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:58:27.430

换行时在每个新行之前附加一个“+”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T08:58:36.970

您的 html 字符串格式不正确，请连接所有行以生成包含多行的字符串。

**[现场演示](http://jsfiddle.net/bec4H/)**

```
typeForm = "Type de RDV : <br /> " +                                                                                                                                                                                  
           " <input type='radio' name='rdv-type' value='0' class='rdv-type' />Client seul<br />      " +                                                                                                               
           " <input type='radio' name='rdv-type' value='1' class='rdv-type' />Client + con<br />      " +                                                                                                     
          "  <input type='radio' name='rdv-type' value='2' class='rdv-type' />Visite agence<br />       " +                                                                                                            
           " <input type='radio' name='rdv-type' value='4' class='rdv-type' />Signature PV<br />         " +                                                                                                           
            "<input type='radio' name='rdv-type' value='5' class='rdv-type' />Con step<br />           " +                                                                                                
    " <input type='radio' name='rdv-type' value='3' class='rdv-type' />Land analysis<br />";

    alert(typeForm ); 
```

# objective-c - 在 Objective C 中拆分整数的最佳方法

> ID：13045872
> 
> 赞同：1
> 
> 时间：2012-10-24T08:56:33.570
> 
> 标签：objective-c, integer

如果我有这个：

```
int toSplit = 208; 
```

拆分它的最佳方法是什么，所以我得到：

```
2
0
8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:02:53.257

方法是这样的

```
- (NSMutableArray *) toCharArray : (NSString *) str
{

    NSMutableArray *characters = [[NSMutableArray alloc] initWithCapacity:[str length]];
    for (int i=0; i < [str length]; i++)
    {
        NSString *ichar  = [NSString stringWithFormat:@"%c", [str characterAtIndex:i]];
        [characters addObject:ichar];
    }

    return characters;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:00:34.653

```
do {
  int digit = toSplit % 10;
  toSplit /= 10;

  printf(@"%i", digit);

} while (toSplit > 0); 
```

我希望这不是家庭作业。

编辑：它是倒退的，所以它不是一个有效的答案......但是，把它留在这里，因为它仍然对其他人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:03:11.040

把它整理成一个字符串，然后把它拉开。所以像这样：

```
int toSplit = 208;

NSString *string = [NSString stringWithFormat: @"%i", toSplit];

NSMutableString *splitApartString = [[NSMutableString alloc] init];

for (int i = 0; i < [string length]; i++) {

    NSString *substring = [string substringFromIndex: i];  

    [splitApartString appendFormat: @"%@\n", substring];  
}

NSLog(@"%@", splitApartString); //YAY! 
```

所以它的作用是将这个 int 放入一个字符串中，将其拆分，然后遍历每个字符并从该字符中获取一个字符串。然后它将该子字符串附加到一个新字符串。

另一种选择是获取字符并使用运算符而不是获取子字符串`%c`。此外，如果您查看此代码，您将看到以下输出：

```
> 2

> 0

> 8

> // extra space here 
```

您可以只添加一个条件来检查`i`字符串长度是否为 - 1 而不添加空格，或者您可以只删除最后一个字符！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:24:59.777

我不熟悉 Objective-C 语法，但类似：

```
void split(int toSplit)
{ 
    if (!toSplit)
    {
        return;
    }
    split(toSplit / 10);
    int digit = toSplit % 10;
    printf(@"%i", digit);
} 
```

# eclipse - 更改颠覆性存储库标签

> ID：13045878
> 
> 赞同：4
> 
> 时间：2012-10-24T08:56:47.737
> 
> 标签：eclipse, subversive

当您将项目链接到存储库时，会出现如下向导：

![在此处输入图像描述](../Images/5ff2fabb6cbfc7109998e461d3861bb9.png)

您可以在那里编辑存储库标签。我的问题是关闭该窗口后如何更改该标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:14:24.520

在`SVN Repositories`视图中，打开存储库的上下文菜单并选择`Location Properties...`.

这将打开一个`Edit Repository Location`对话框，您可以在其中更改存储库标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:14:58.833

您必须通过位置属性再次重新打开此对话框。

通过以下方式切换到 SVN Exploring 透视图：

```
Window -> Open Perspective -> SVN Exploring Perspective 
```

之后：

```
Rightclick on the repository -> Location properties -> Use a custom label 
```

[位置属性...](http://i.stack.imgur.com/aKtIa.jpg)

# android - Android 不同的菜单资源

> ID：13045879
> 
> 赞同：7
> 
> 时间：2012-10-24T08:56:47.877
> 
> 标签：android, android-resources, android-menu

Doe 的 Android 是否支持多个菜单文件夹（例如 /drawable-hdpi 和 /drawable-mdpi）？如果支持什么类型（土地、xhdpi、swXXXdp）？

PS对不起这么愚蠢的问题...

编辑1：例如我有不同的布局。根据这一点，我可以有不同的菜单资源，不是吗？作为开始，最好有 sooch 文件夹：

*   资源/菜单
*   资源/菜单土地
*   资源/菜单-xhdpi
*   资源/菜单-xhdpi-land
*   res/menu-sw600dp

前两个工作正常......但是当我尝试添加其他应用程序时，应用程序在不同的设备上工作不稳定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:06:43.710

是的。即使在纵向和横向模式下：

菜单-土地-mdpi 菜单-端口-mdpi

菜单-土地-hdpi 菜单-端口-hdpi

菜单-土地-xhdpi 菜单-端口-xhdpi

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:04:25.863

**是**的。看不出不支持它的任何意义，[此处](http://developer.android.com/guide/topics/resources/providing-resources.html)的文档对此没有任何限制（我自己至少使用过 -land 限定符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:05:29.373

菜单可以像布局文件夹一样使用，您可以添加 menu-land、menu-port ... 此外，您可以使用多语言的特定菜单，如 menu-fr、menu-en 根据手机语言重新排列项目。 .

# c# - 层和实体？

> ID：13045880
> 
> 赞同：2
> 
> 时间：2012-10-24T08:56:52.733
> 
> 标签：c#, .net, entity-framework, 3-tier

*（我要问2个问题）。*

我们使用 3 层：Bl、Dal、UI。

![在此处输入图像描述](../Images/60b6c2be4d92f0d72943fa12225d3ac4.png)

我们不想为所有对象构建一个大`BL`的。`DAL`

所以我们为`Agents`和都创建了这个结构`Leads`。

现在假设我应该写一个方法：

```
public Agent GetAgentByLead(Lead leadObj)
 {
 } 
```

`Question #1`

这个函数应该驻留在哪里：`AgentsBL`或`LeadsBL`？

`Question #2`

假设我想使用实体框架。

查询可以是：

```
var activeAgents= context.Agents.Where(c => c.ACTIVE).ToList(); 
```

此行可以在`myPage.aspx.cs`文件中执行。

那么*这里*的图层在哪里？上下文将驻留在哪里？

我只是不明白 EF 如何处理层（就像我的第一个问题）

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:05:02.177

这类事情的一个常用模式是*[Repository Pattern](http://www.remondo.net/repository-pattern-example-csharp/)*，如果你用谷歌搜索它，你会发现大量信息，这个想法是你基本上创建一个封装上下文的存储库，所以你永远不会直接使用它......

我更喜欢具有通用 CRUD 方法的通用存储库，但也有类似的东西：

```
IEnumerable<T> FindAll(IQuery<T> query); 
```

因此，不必为每个对象类型创建一个唯一的存储库来执行特定查询，例如您`GetAgentByLead`将该逻辑包装到一个查询中并传递该上下文，因此您的查询、存储库和控制器（假设 MVC）都是独立的并且不互相依赖。

一个示例查询对象将类似于：

```
public interface IQuery<T>
{
    IEnumerable<T> Execute(IContext context);
}

public class FindAllUsersInGroupQuery : IQuery<User>
{
    public int GroupId {get; set;}

    IEnumerable<User> Execute(IContext context)
    {
        return context.DoSomeQueryForGettingUsers(GroupId);
    }
} 
```

通过这种方式，您可以模拟您的查询、存储库并测试您的控制器，如果您愿意，您也不会得到难以维护的庞大数据访问器类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:04:03.933

1）这是一个自创的问题，为每个实体设置一个 DAL 不是一个习惯或好主意。但是假设它们太大了，您想拆分它们，我会说`GetAgentForSomething()`属于 AgentsDAL。然后，这将依赖于潜在客户。您必须注意此处的循环依赖关系，您可能必须定义单独的 DAO 和 Domain 类。

2）`context.Agents.Where(...)`是规避分层。考虑`AgentsDAL.GetActiveAgents()`

# java-me - j2me波兰PIM列表

> ID：13045886
> 
> 赞同：1
> 
> 时间：2012-10-24T08:57:20.893
> 
> 标签：java-me, j2mepolish, jsr75

我已经为 j2me Mobile 制作了一个应用程序，现在我想为其复制 Build.xml 和资源文件夹并解决问题，但我的项目使用`javax.microedition.pim.Contact;`并且我已经使用该 API 编写了我的整个代码。

当我清理和调试这个项目时，它会给出如下错误

```
error: package javax.microedition.pim does not exist
import javax.microedition.pim.Contact;  //if it asks to import then there should be a way, but what? 
```

我知道波兰语提供自己的 PIM API 作为`de.enough.polish.pim.PimContact`，但我不能为此更改我的代码。我想要做的是应用波兰 css 效果并将其作为波兰项目运行，但使用`javax.microedition.pim.Contact`for PIM 操作。

应该有某种使用它的方法，我想有，我确实尝试在那里找到有用的东西，但找不到。我是波兰人和 J2me 的新手，所以可能缺乏知识。但我很想为这个问题找到一个满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:20:49.617

奇怪的是，作为 J2me 和诺基亚的这么多用户和开发人员，我很久没有得到一个愚蠢错误的答案。在创建对象时，我只需要从目标 API 和设备的选择中选择 PIM api，因为我们知道在所有 J2me 或 Nokia 使用 Generic `javax.microedition.PIM api`。很抱歉回答我自己的问题，但我认为它可能对像我这样的其他笨蛋有所帮助。谢谢你的承受

# php - 如何为 NULL 的列设置值？

> ID：13045896
> 
> 赞同：0
> 
> 时间：2012-10-24T08:57:53.317
> 
> 标签：php, mysql

我对使用此查询感到困惑。

```
INSERT INTO `book`(`book_id`, `book_title`, `isbn`, `ean`, `book_image_url`,
    `book_author`, `book_description`, `category_id`, `book_type`, `addedBy`, 
    `addedWhen`, `modifyBy`, `modifyWhen`) 
    VALUES (NULL,'abc',123,,'http://www.example.com','xyz',,'1',,'admin',
    2008-06-08,NULL,NULL) 
```

我已经允许`NULL`,`description`和`ean`列`book_type`并且也设置`NULL`为默认值，但是这个查询不起作用。但是，如果我填写它们，我会惊讶于查询被执行。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:03:17.890

```
INSERT INTO `book`(`book_id`, `book_title`, `isbn`, `ean`, `book_image_url`,
    `book_author`, `book_description`, `category_id`, `book_type`, `addedBy`, 
    `addedWhen`, `modifyBy`, `modifyWhen`) 
    VALUES (NULL,'abc',123,'','http://www.example.com','xyz','','1','','admin',
    2008-06-08,NULL,NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:03:33.427

您不应在示例中为“ean”列输入空值：

```
NULL,'abc',123,,'http://www.example.com' 
```

123 和 URL 之间的部分不应为空，而是替换为 NULL 或空字符串，具体取决于您想要的内容。否则，这是一个 SQL 语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:03:34.320

对于某些字段，您没有传递任何值

```
INSERT INTO `book`(`book_id`, `book_title`, `isbn`, `ean`, `book_image_url`,
    `book_author`, `book_description`, `category_id`, `book_type`, `addedBy`, 
    `addedWhen`, `modifyBy`, `modifyWhen`) 
    VALUES (NULL,'abc',123,'','http://www.example.com','xyz','','1','','admin',
    2008-06-08,NULL,NULL) 
```

# objective-c - 将选定的单元格保持在大量 reloadRowsAtIndexPaths UITableView

> ID：13045897
> 
> 赞同：6
> 
> 时间：2012-10-24T08:57:54.910
> 
> 标签：objective-c, ios, uitableview, cell

在其中一个视图中，有一个 UITableView 会经常更新。使用“reloadRowsAtIndexPaths”以经典方式跟踪更改

```
-(void)refreshCells:(NSArray *)changedCells
{
    NSLog(@"refreshCells %i",[changedCells count]);
    [TableView beginUpdates];
    [TableView reloadRowsAtIndexPaths:changedCells withRowAnimation:UITableViewRowAnimationBottom];
    [TableView endUpdates];
} 
```

问题：如何保留用户最后选择的单元格。每次更新refreshCells后单元格位置可能会改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T09:04:51.530

您可以使用保存当前选择

```
NSIndexPath *selectedRow = [self.tableView indexPathForSelectedRow]; 
```

在重新加载之前并再次选择它

```
if (selectedRow) {
    [self.tableView selectRowAtIndexPath:selectedRow animated:NO scrollPosition:UITableViewScrollPositionNone];
} 
```

重新加载后。`insertRowsAtIndexPaths:`除非您调用或，否则单元格位置不会改变`deleteRowsAtIndexPaths:`。

# windows-8 - Windows 8 商店应用程序 - 依赖问题 - 认证失败

> ID：13045898
> 
> 赞同：4
> 
> 时间：2012-10-24T08:57:57.547
> 
> 标签：windows-8

我们刚刚在 windows 8 商店（metro 风格的应用程序）中提交了应用程序并得到了错误：

`XXX takes a dependency on Microsoft Visual C++ Runtime Package framework but is missing the framework dependency declaration in the manifest.`

我们的应用程序在发布版本中运行良好，但它没有作为包被接受，因此我们需要将我们的应用程序迁移为 Windows RTM。在此期间，我们在清单中有以下条目：

```
 <Dependencies>
        <PackageDependency Name="Microsoft.VCLibs.110"       MinVersion="11.0.0.0" />
    </Dependencies> 
```

如果我们保留它，我们会在构建应用程序时收到以下错误。

```
Error : DEP0700 : Registration of the app failed. Windows cannot install package 5d6f272d-c915-4de1-a9d6-c0c08d63ab94 because 
this package depends on another package that could not be found. This package requires minimum version 11.0.50727.1 of framework Microsoft.VCLibs.110 
published by any publisher to install. Provide the framework along with this package. (0x80073cf3) Test_App1 
```

所以我们删除它并提交应用程序，它只是失败并给出了以下错误。

```
XXXX takes a dependency on Microsoft Visual C++ Runtime Package framework but is missing the framework dependency declaration in the manifest. 
```

我们需要将此包本身保留在清单中，但不要完成它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:01:18.510

我有类似的问题。在您的项目中添加一个引用到`Microsoft Visual C++ Runtime Package`

只需单击项目我选择添加引用并找到这个包。添加这个应该可以解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:13:13.257

问题已通过更新解决

"Microsoft.VCLibs.110" 到 Name="Microsoft.VCLibs.110.00"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T22:09:27.820

只是我已经从控制面板>程序修复了适用于 Windows 8 的 VS 2012，并且设计器工作正常。

# objective-c - iOS 解压 .gz 文件

> ID：13045903
> 
> 赞同：1
> 
> 时间：2012-10-24T08:58:17.493
> 
> 标签：objective-c, ios, gzip, ziparchive

> **可能重复：**
> [如何在 iPhone 上解压缩 gzip 文件并将其写入未压缩文件](https://stackoverflow.com/questions/6740820/how-to-uncompress-a-gzip-file-and-write-that-out-to-an-uncompressed-file-on-iph)

我试图在 iOS 中解压缩 .gz sqlite 文件，但直到现在我还没有找到一个好的库。

我试过`SSZipArchive`这样：

```
path = [[NSBundle bundleForClass:[self class]] pathForResource:@"test.sqlite" ofType:@"gz"];

NSString *documentsDir = (NSString *)[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
destination = documentsDir;
NSError *error;

BOOL success =  [SSZipArchive unzipFileAtPath:path toDestination:destination overwrite:YES password:nil error: &error]; 
```

这适用于压缩的 sqlite 数据库文件，但如果我 gzip sqlite 数据库则不行。然后每次返回错误“无法打开 zip 文件”。

[然后我从https://github.com/nicklockwood/GZIP](https://github.com/nicklockwood/GZIP)尝试了这种`GZIP`方法。我使用了这样的代码：

```
path = [[NSBundle bundleForClass:[self class]] pathForResource:@"test.sqlite" ofType:@"gz"];

NSString *documentsDir = (NSString *)[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
destination = [documentsDir stringByAppendingPathComponent:@"test.sqlite"];

NSData *gzData = [NSData dataWithContentsOfFile:path];
NSData *ungzippedData = [gzData gunzippedData];

return [ungzippedData writeToFile:destination atomically:YES]; 
```

之后，我在我的 Documents 文件夹中获得了一个名为 test.sqlite 的文件，但是如果我尝试打开它，它会失败，因为失败已损坏。

我最后一次尝试`ZipArchive`来自[http://code.google.com/p/ziparchive/](http://code.google.com/p/ziparchive/)。我是这样使用它的：

```
ZipArchive* za = [[ZipArchive alloc] init];
if( [za UnzipOpenFile:path] ){
    BOOL success = [za UnzipFileTo:destination overWrite:YES];
    [za UnzipCloseFile];
    return success;
} 
```

但这也无法打开文件。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:34:48.393

在 Xcode 的链接器设置中可以使用 zlib 库添加到您的目标。

在这里您可以找到有关如何使用 zlib 的示例。[http://zlib.net/zlib_how.html](http://zlib.net/zlib_how.html)

# python - Python中的词法分析器

> ID：13045906
> 
> 赞同：1
> 
> 时间：2012-10-24T08:58:24.293
> 
> 标签：python, python-module

是否有 python 模块进行词法分析？（例如给定一个字符串，它会分析它是否是一个有效的英文单词？）提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:10:19.147

您将需要收集英语单词列表。在 UNIX 上，您可以使用 /usr/share/dict/words。将单词列表读入 python 并执行以下操作：

```
for word in my_string.split():
    if not word in word_list:
        print mystring, "is invalid"
    else
        print mystring, "is valid" 
```

# python - 如何将帐户移至主要/主要组织单位？

> ID：13045911
> 
> 赞同：0
> 
> 时间：2012-10-24T08:58:35.213
> 
> 标签：python, google-provisioning-api

使用 Google Provisioning API，在[管理组织单位](https://developers.google.com/google-apps/provisioning/#managing_organization_users)下，我可以`UpdateOrgUser`用来更改用户所在的 OU。

如何将用户移出 OU 并进入“顶级”OU？应该传递给`org_unit_path`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:00:56.777

顶级 OU 可以用一个斜杠引用。您可以通过将 orgUnitPath 设置为“/”将用户移动到根 OU。

# sql - 使用 SQL 脚本显示最低温度和最高温度

> ID：13045913
> 
> 赞同：-4
> 
> 时间：2012-10-24T08:58:39.387
> 
> 标签：sql, max, minimum

我有一张表格，其中存储了每个订单号和日期的最低和最高温度。我想选择每天的最低温度和最高温度。这应该使用 SQL 脚本来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:01:09.757

您必须使用`group by`子句和聚合函数`min`，`max`如下所示：

```
select date, min(temperature), max(temperature)
from table
group by date 
```

`date`如果您只有年、月和日 (01/11/2012)，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T08:48:14.397

在甲骨文中：

```
SELECT TO_CHAR(DATE_VAL,'DD-MM-YYYY'), MAX(temperature), 
MIN(temperature) FROM table_name group by TO_CHAR(DATE_VAL,'DD-MM-YYYY'); 
```

在 MySQL 中：

```
 SELECT DATE_FORMAT(DATE_VAL, '%d-%m-%Y'), max(temperature), 
   min(temperature) from table_name group by DATE_FORMAT(DATE_VAL, '%d-%m-%Y'); 
```

# c# - 映射每个 JSON 层次结构的 c# 类

> ID：13045915
> 
> 赞同：0
> 
> 时间：2012-10-24T08:58:53.787
> 
> 标签：c#, json

注意：这与 C# <==> JSON 的序列化或反序列化无关。

这更多是关于拥有一个将 1:1 映射到 JSON 结构本身的 C# 类。JSON 可以是字典（哈希）或数组，还可以嵌套（例如：JSON 对象作为“值”或 JSON 对象内的数组元素）。我如何定义一个行为相同的 C# 类，以便它可以将 1:1 映射到它的 JSON“等效”？

[顺便说一句，我确实在http://msdn.microsoft.com/en-us/library/system.json.jsonobject(v=vs.110)](http://msdn.microsoft.com/en-us/library/system.json.jsonobject(v=vs.110).aspx)看到 .NET 4.5 似乎对 JSON 有一级支持（终于！ ） [.aspx](http://msdn.microsoft.com/en-us/library/system.json.jsonobject(v=vs.110).aspx)。另外，它似乎也可以进行序列化。然而这是一个密封的类，所以我看不到它的实现。

*使用源卢克！*

**编辑**： .NET 4.5 似乎是开源的。[我在http://referencesource.microsoft.com/netframework.aspx](http://referencesource.microsoft.com/netframework.aspx)找到了一个链接，但似乎无法下载源代码。用损坏的下载尝试了 3 次。任何其他来源位置？最好从 .NET 4.5 => .NET 4.0 反向移植 JSON 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:03:48.537

只要您的类结构中没有任何循环引用，那么 JSON 映射就不会有任何问题。但是有一些工具可以帮助减少任何歧义。这是一篇可能有帮助的相关博客文章：http: [//bartwullems.blogspot.com/2012/06/json-to-c.html](http://bartwullems.blogspot.com/2012/06/json-to-c.html)

# xcode - 选择行后设置变量的值并添加复选标记（xcode）

> ID：13045917
> 
> 赞同：0
> 
> 时间：2012-10-24T08:58:57.583
> 
> 标签：xcode, tableview, checkmark

我想做以下事情：单击表格视图中的一行后，我想设置一些变量的值，同时将单元格附件类型更改为复选标记。这是我的实现文件：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    tabledata = [[NSArray alloc] initWithObjects:@"row1", @"row2", @"row3", nil];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - TableView Data Source methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tabledata count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:@"Row"];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Row"];
    }

    cell.textLabel.text = [tabledata objectAtIndex:indexPath.row];

    return cell;
}

#pragma mark TableVoew Delegate methods

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
//if row1 is selected change 'value' to 1 and change cell accessory to checkmark (other cells accessory to none)
//if row2 is selected change 'value' to 2 and change cell accessory to checkmark (other cells accessory to none)
//if row3 is selected change 'value' to 2 and change cell accessory to checkmark (other cells accessory to none)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:29:42.867

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.value = indexPath.row;
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:nowIndex];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

**EDIT** 仅设置所选行的附件`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

```
cell.accessoryType = UITableViewAccessoryNone;

if (indexPath.row == self.value) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

请参阅[此](https://stackoverflow.com/questions/5677218/only-one-uitableviewcellaccessorycheckmark-allowed-at-a-time)内容以从 tableview 中当前可见的单元格中删除复选标记。

**编辑 2** 要取消选择上一行，请在`didSelectRowAtIndexPath`

```
NSIndexPath *oldIndexPath = [NSIndexPath indexPathForRow:index inSection:1];
NSLog(@"Oldindexpath is: %@", oldIndexPath);
UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];

if (newCell.accessoryType == UITableViewCellAccessoryNone) {
    newCell.accessoryType = UITableViewCellAccessoryCheckmark;
}
UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:oldIndexPath];

if (oldCell != newCell){
    if (oldCell.accessoryType == UITableViewCellAccessoryCheckmark) {
        oldCell.accessoryType = UITableViewCellAccessoryNone;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:31:56.323

这解决了我删除旧复选标记的问题：

```
for (UITableViewCell *cell in [tableView visibleCells]) {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

并且在上一个答案中解决了当前行的设置值问题。

# python - MySql 连接器在 Python 中死机

> ID：13045923
> 
> 赞同：6
> 
> 时间：2012-10-24T08:59:07.267
> 
> 标签：python, mysql, mysql-connector-python

编辑：这个问题令人难以置信。我现在已经设法用 time.sleep(0.01) 替换了一个烦人的打印功能，但是为什么我应该从更慢的执行时间中受益，这超出了我的理解。

我在 Python 3.23 的 MySQL 1.0.7 连接器中迭代光标时遇到问题。

除非 print() 每次迭代的结果（这既愚蠢又耗时）我得到以下错误：

> raise errors.InterfaceError(errno=2013) mysql.connector.errors.InterfaceError: 2013: Lost connection to MySQL server during query

有什么想法吗？

到目前为止，代码很简单：

```
self.config = {'user': user,'password': password,'host': host,'database':     
database,'raise_on_warnings': True}

self.data = []
self.clickcnx = mysql.connector.connect(**self.config)
self.clickcursor = self.clickcnx.cursor()

query = "SELECT table1, table2, table3 FROM `db`-tables;"
self.clickcursor.execute(query)
for item in self.clickcursor:
  print(item)     #this is the strange line that I need!
  self.data.append(item)
self.clickcnx.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:28:23.943

您错过了实际获取结果的部分，您只是跨过光标。

试试这个版本：

```
query = "SELECT table1, table2, table3 FROM `db`-tables;"
self.clickcursor.execute(query)
results = self.clickcursor.fetchall()
for item in results:
  print(item)     #this is the strange line that I need!
  self.data.append(item)
self.clickcnx.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T06:48:03.443

我对 1.0.7 也有同样的问题。添加 time.sleep() 修复它。然后我升级到 1.0.10 并删除了睡眠。这也很好用。

所以解决方案似乎是：

```
pip install --upgrade mysql-connector-python 
```

您可能需要使用 sudo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T22:06:03.563

我遇到了 MySQL 连接器的问题。我尝试了 Burhan Khalid 的回答，但没有奏效。我能够通过添加 GROUP BY 语句来解决我的问题。

**原始查询：**

```
SELECT
    a.ID,
    a.UID,
    g.GroupId,
FROM Accounts a
    LEFT JOIN Profile p ON p.ID = a.ID
    LEFT JOIN Group g ON g.GroupId = p.GroupId
WHERE
    a.UID IS NOT NULL
    AND a.Active = 1
    AND a.Type = 1; 
```

**返回与原始结果相同的查询：**

```
SELECT
    a.ID,
    a.UID,
    g.GroupId,
FROM Accounts a
    LEFT JOIN Profile p ON p.ID = a.ID
    LEFT JOIN Group g ON g.GroupId = p.GroupId
WHERE
    a.UID IS NOT NULL
    AND a.Active = 1
    AND a.Type = 1
GROUP BY
    a.UID; 
```

唯一的区别是第二个查询不会引发 InterfaceError(2013)。我的查询返回大约 250,000 行。我对这些查询中的每一个都进行了解释，令我惊讶的是，第二个查询比第一个查询花费了更长的时间（持续时间），因为它将结果存储在一个临时表中，但获取时间从 6.00 秒变为 0.50 秒！

尝试添加 GROUP BY 聚合器，看看是否能解决您的问题。当然，您需要确保您的结果是相同的。我建议对您知道将是唯一的表值进行 GROUP BY。

# c++ - cudaGraphicsGLRegisterImage 给出 cudaErrorMemoryAllocation

> ID：13045930
> 
> 赞同：1
> 
> 时间：2012-10-24T08:59:51.777
> 
> 标签：c++, opengl, cuda

## 情景

我正在创建两个相当大、大小相同的 OpenGL 3D 纹理。第一个是单通道 16 位纹理，第二个有四个通道，每个纹素 8 位。比我需要向 CUDA 注册他们两个。

我正在开发的应用程序是 32 位的。系统特性：Win 7 64bit，NVIDIA GeForce 540M 2GB

## 问题

当使用 512x512x391 或更大的纹理时，我的调用给`cudaGraphicsGLRegisterImage`了我一个`cudaErrorMemoryAllocation`，尽管这个返回值甚至不是可能的返回值列表的一部分，由`cudaGraphicsGLRegisterImage`. [可以在第 94 页上找到此](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Toolkit_Reference_Manual.pdf)列表。以前没有执行过内存扩展操作。但是，它*确实*适用于较小的纹理，例如 512x512x71。

在调用之前查询可用的设备内存`cudaGraphicsGLRegisterImage`会发现大约 1778 MB 是可用的。

## 审议

1.  一种解释可能是返回值是某个先前调用的错误代码。我基本上可以通过在调用`cudaGetLastError`之前放置一个权利并检查它的返回值来消除这种可能性：它给了我一个.`cudaGraphicsGLRegisterImage``cudaSuccess`

2.  我进行了一些计算。两个 3D 纹理所需的内存为：

    (512 * 512 * 391) 纹素 * (4 通道 * 每纹素 1 字节 + 1 通道 * 每纹素 2 字节) = 586.5 MB

    *这*并不多，尤其是当我的图形设备有 2 GB 的专用内存时。

3.  我还检查了进程获取的总内存，以确保这不是 Win32-2GB 限制问题：根据任务管理器，总进程的内存大小约为 279 MB，就在`cudaGraphicsGLRegisterImage`调用。

4.  根据[这个帖子](https://stackoverflow.com/a/6143736/1444073)，`cudaGraphicsRegisterImage`操作的内存成本应该非常低。

## 一些代码

获取两个 3D 纹理：

```
glTexImage3D( GL_TEXTURE_3D, 0, GL_INTENSITY16
            , size.x, size.y, size.z
            , 0, GL_RED, GL_UNSIGNED_SHORT, bufferPtr );

glTexImage3D( GL_TEXTURE_3D, 0, GL_RGBA8
            , size.x, size.y, size.z
            , 0, GL_RGB, GL_BYTE, nullptr ); 
```

我已经放弃了纹理生成和绑定以获得更好的概览。

使用 CUDA 进行纹理配准：

```
size_t free, total;
CHECK_CUDA( cudaMemGetInfo( &free, &total ) );
qDebug() << "Free Memory:" << free / ( 1024 * 1024 ) << "MB";

enum resourceIndices{ FIRST_RESOURCE = 0, SECOND_RESOURCE = 1 };
cudaGraphicsResource* resources[ 2 ];

CHECK_CUDA( cudaGetLastError() );
CHECK_CUDA( cudaGraphicsGLRegisterImage( &resources[ FIRST_RESOURCE ]
                                       , firstTextureID
                                       , GL_TEXTURE_3D
                                       , cudaGraphicsRegisterFlagsReadOnly ) );

CHECK_CUDA( cudaGraphicsGLRegisterImage( &resources[ SECOND_RESOURCE ]
                                       , secondTextureID
                                       , GL_TEXTURE_3D
                                       , cudaGraphicsRegisterFlagsSurfaceLoadStore ) ); 
```

宏`CHECK_CUDA`只是检查返回值并抛出异常。`cudaGraphicsGLRegisterImage`它在第一次调用时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:40:42.507

您的代码片段对我来说看起来不错。但是，您说您使用的是 32 位系统。这可能是问题所在：您的进程只有 2GiB 的地址空间。根据这个地址空间的分配方式，很可能没有足够大的**连续切片。**因此，即使仍有足够的内存，您也可能只是用完了可用的地址空间。而且由于每块 CUDA 内存都映射到进程地址空间，甚至是设备内存，这很可能会发生。

这是 32 位系统上众所周知的问题，称为*地址空间碎片*。这实际上是 64 位系统的真正好处：与其说是可寻址的内存量，不如说是地址空间的绝对大小，它大大简化了内存管理，因为它很难填满，地址空间碎片不是一个实际问题。

我的建议：在 64 位系统上测试你的程序。

# xml - 从文本文件创建 XML 文件

> ID：13045932
> 
> 赞同：1
> 
> 时间：2012-10-24T08:59:58.810
> 
> 标签：xml, vb.net, xml-parsing

我有一个这样的文本文件，其中包含这样的联系信息：

```
martin@actionbase.se, Martin Grape, HTML
pedram@actionbase.se, Pedram Mebedi, HTML 
```

我需要将上述信息转换为适当的 XML 格式，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<Subscribers>
    <Subscriber>
        <Name>Martin Grape</Name>
        <Email>martin@actionbase.se</Email>
        <Format>HTML</Format>
    </Subscriber>
    <Subscriber>
        <Name>Pedram Mebedi</Name>
        <Email>pedram@actionbase.se</Email>
        <Format>HTML</Format>
    </Subscriber>
</Subscribers> 
```

我需要务实地做到这一点。那么我必须想出自己的算法还是有更快的方法呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:03:18.427

这取决于您使用的平台，我不能代表所有内容，但我认为您需要自己编写代码才能将其转换为 XML。虽然应该非常简单，因为您可以读取每一行并将其拆分为逗号以获取每项数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:03:59.627

您可以使用不同的工具，例如[SoftSilver](http://www.softsilver.com/)。

你可以看看这个链接。它一定会帮助你：- [http://www.devx.com/getHelpOn/10MinuteSolution/20356](http://www.devx.com/getHelpOn/10MinuteSolution/20356)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:06:08.920

这是 C# 中的灵感，您可以轻松转换为 VB.NET 并扩展：

```
var xml = new StringBuilder();

xml.Append("<Subscribers>");

foreach(var line in System.IO.File.ReadAllLines(@"yourfile.txt"))
{
    var vals = line.Split(',');

    // TODO add more fields
    xml.AppendFormat("<Subscriber><Name>{0}</Name><Email>{1}</Email></Subscriber>",
        vals[0].Trim(), vals[1].Trim());

}

xml.Append("</Subscribers>");

System.IO.File.WriteAllText(@"your.xml", xml.ToString()); 
```

# delphi - Delphi + Synapse：如何检查我是否仍然连接

> ID：13045943
> 
> 赞同：7
> 
> 时间：2012-10-24T09:00:54.217
> 
> 标签：delphi, synapse

我正在使用[`TTCPBlockSocket`](http://synapse.ararat.cz/doc/help/blcksock.TTCPBlockSocket.html)TCP/IP 应用程序。问题是我无法确定连接何时丢失。

`GetLastError`返回 0
`Read`返回 0

但是即使应用程序已连接，我也会遇到这些值，因此我可以获取它如何在 TCP/IP 连接丢失时收到通知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:51:47.150

我想说，您可以使用该[`CanRead`](http://synapse.ararat.cz/doc/help/blcksock.TBlockSocket.html#CanRead)方法，将 0 传递给它的`Timeout`参数。此函数在内部[`select`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)为套接字执行功能，并在发生错误时返回 False。仅使用此方法就足够了，因为如果您失去连接，该[`select`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)函数将返回，并且它会导致该方法返回 False 作为结果。所以我认为，以这种方式检查套接字连接是否存在就足够了：`SOCKET_ERROR`[`CanRead`](http://synapse.ararat.cz/doc/help/blcksock.TBlockSocket.html#CanRead)

```
function IsSocketAlive(ASocket: TTCPBlockSocket): Boolean;
begin
  Result := ASocket.CanRead(0);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T22:41:30.987

正如 opC0de 所说，要检查客户端是否仍然连接，您需要同时检查 TCPBlockSocket.CanRead(0) 和 TCPBlockSocket.WaitingData = 0

```
function IsSocketAlive(ASocket: TTCPBlockSocket): Boolean;
begin
  Result := (ASocket.Socket = INVALID_SOCKET) or ((ASocket.WaitingData = 0) and ASocket.CanRead(0));
end; 
```

我在我的项目中使用这种方式，所以我可以确认它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-03T16:21:34.857

我正在使用 kattunga 的答案，但在我的压力测试期间遇到了很多误报触发因素。我的假设是数据包有时会在 WaitingData 和 CanRead 条件之间到达服务器，导致服务器认为套接字已死。我改变了条件的顺序，问题就消失了。

```
function TTCPSynWorkThread.IsSocketDead(ASocket: TTCPBlockSocket): boolean;
begin 
  Result := (ASocket.Socket = INVALID_SOCKET) or (ASocket.CanRead(0) and (ASocket.WaitingData = 0));
end; 
```

# c# - MemoryCache Contains() 线程安全

> ID：13045950
> 
> 赞同：2
> 
> 时间：2012-10-24T09:01:19.980
> 
> 标签：c#, caching, concurrency, thread-safety

`MemoryCache`根据[这篇](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)文章，是一个线程安全的类。但我不明白它在特定情况下会如何表现。例如我有代码：

```
static private MemoryCache _cache = MemoryCache.Default;

...

if (_cache.Contains("Test"))
{
    return _cache.Get("Test") as string;
} 
```

1.  元素的生存时间可以在我调用之后过期吗`Contains()`，所以`null`值会被返回？
2.  另一个线程可以在我调用之后删除项目，`Contains()`因此`null`将返回值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:05:30.697

是的，是的，这些是常见的竞争条件。如果只需将代码编写为

```
var test = _cache.Get("Test");
if (test != null) {
    return test as string;
} 
```

# c# - 无法从类库中读取 App.config 值

> ID：13045958
> 
> 赞同：5
> 
> 时间：2012-10-24T09:01:45.613
> 
> 标签：c#, asp.net

这可能是一个简单的问题，但我正在努力解决。

我`Web.config`的 Web 应用程序中有以下值。

```
<appSettings>
    <add key ="FirstName" value ="Prasad"/>
    <add key ="LastName" value ="Kanaparthi"/>
</appSettings> 
```

我`App.config`的类库（Say Lib）中有以下值。

```
<appSettings>
    <add key ="FullName" value ="Prasad Kanaparthi"/>
</appSettings> 
```

类库(Lib) 是可插拔组件，我在我的Web 应用程序中添加了类库(Lib) 引用。

我的类库（Lib）中有以下代码。当我在我的 Web 应用程序中创建实例时`GetAppSettings`，我可以看到以下响应。

```
namespace Lib
{
    public class GetAppSettings
    {
        public GetAppSettings()
        {
            var FirstName = ConfigurationManager.AppSettings["FirstName"];  // O/P : Prasad
            var MiddleName = ConfigurationManager.AppSettings["LastName"];  // O/P : Kanaparthi

            var FullName = ConfigurationManager.AppSettings["FullName"];    // O/P : null
        }
    }
} 
```

问题是我如何读取`FullName`哪个`App.config`是类库（Lib）。

**注意**：由于我的 Lib 是可插拔组件，所以消费者可以`FullName`自行更改。我无法将值合并到`Web.confing`from `App.config`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T09:07:13.273

您必须合并两个配置部分并将所有设置放在应用程序的主配置文件中。如果是网络应用程序，它将是`web.config`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:29:17.627

简短的回答是：你不能。使用您的库的应用程序不会关注您的`app.config`. 您可以使用一个`settings`文件来代替，或者可能走更长的路，抽象出配置管理器并让它以编程方式将您的`app.config`作为 XML 文件读取到应用程序的输出目录中，以包含其设置。可以理解的是，这两种选择都不是理想的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T02:19:38.487

虽然我不经常使用 Web 应用程序，但在我的桌面应用程序中，我经常遇到类似的问题。我一直在使用 Daniel Hilgarth [https://stackoverflow.com/a/6151688/2212458](https://stackoverflow.com/a/6151688/2212458)提供的代码来临时切换配置文件。插件加载器可以拉入插件配置文件，然后恢复它自己的。

# griffon - intellij+griffon.0.9.5 没有这样的属性：withSql？

> ID：13045960
> 
> 赞同：1
> 
> 时间：2012-10-24T09:01:52.807
> 
> 标签：griffon

groovy.lang.MissingPropertyException：没有这样的属性：类的withSql：org.codehaus.griffon.runtime.builder.UberBuilder在addressbook.AddressbookView$_run_closure1_closure2_closure7_closure8.doCall（AddressbookView.groovy：14）在addressbook.AddressbookView$_run_closure1_closure2_closure7.doCall（AddressbookView .groovy:13) 在地址簿.AddressbookView$_run_closure1_closure2_closure7.doCall(AddressbookView.groovy) 在 org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:96) 在 org.codehaus.griffon.runtime.builder。 UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source) at org.codehaus.griffon.runtime.builder。UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:140) at addressbook.AddressbookView$_run_closure1_closure2.doCall(AddressbookView.groovy:12) at addressbook.AddressbookView$_run_closure1_closure2.doCall(AddressbookView.groovy) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass .invokeFactoryMethod(UberInterceptorMetaClass.groovy:96) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent （未知来源）在地址簿中的 org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:140) 中。AddressbookView$_run_closure1.doCall(AddressbookView.groovy:11) 在地址簿中。AddressbookView$_run_closure1.doCall(AddressbookView.groovy) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:96) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass .groovy) 在 org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source) 在 org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:167) 在地址簿。 AddressbookView.run(AddressbookView.groovy:10) at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:151) at org.codehaus.griffon.runtime.builder.UberBuilder.build(UberBuilder.groovy: 155）在 org.codehaus.griffon。runtime.core.AbstractMVCGroup$1.run(AbstractMVCGroup.java:129)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:55:08.893

GSQL/Datasource 插件默认不将`withSql`方法注入视图，您必须更改配置（在插件页面中说明）。但是我强烈建议不要在 View 中注入这样的方法，因为视图是在 UI 线程内构建的，在这个线程内进行数据库调用确实是个坏主意。

# vba - 删除我的数组中不包含字符串的行

> ID：13045962
> 
> 赞同：3
> 
> 时间：2012-10-24T09:02:05.053
> 
> 标签：vba, excel

请帮我修改这段代码，但我想保持 90% 不变。

我想删除不包含数组项的行。所以我的程序删除单元格中带有 a、b 的行。我如何修改下面的代码，以便它删除另一个 a、b 以保留在 exec 中。

```
myArr = Array("a","b")
For I = LBound(myArr) To UBound(myArr)

    'Sheet with the data, you can also use Sheets("MySheet")
    With ActiveSheet

        'Firstly, remove the AutoFilter
        .AutoFilterMode = False

        'Apply the filter
        .Range("E1:E" & .Rows.Count).AutoFilter Field:=1, Criteria1:=myArr(I)

        Set rng = Nothing
        With .AutoFilter.Range
            On Error Resume Next
            Set rng = .Offset(1, 0).Resize(.Rows.Count - 1, 1) _
                      .SpecialCells(xlCellTypeVisible)
            On Error GoTo 0
            If Not rng Is Nothing Then rng.EntireRow.Delete
        End With

        'Remove the AutoFilter
        .AutoFilterMode = False
    End With
Next I 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:13:12.230

这对我有用......我已经评论了代码，所以你不应该有理解它的问题......

```
Option Explicit

Dim myArr

Sub Sample()
    Dim ws As Worksheet
    Dim Lrow As Long, i As Long
    Dim rRange As Range, delRange As Range

    myArr = Array("a", "b", "c")

    Set ws = ThisWorkbook.Sheets("MySheet")

    With ws
        '~~> Get last row of Sheet
        Lrow = .Range("A" & .Rows.Count).End(xlUp).Row

        For i = 2 To Lrow
            If Not DoesExists(.Range("A" & i).Value) Then
                If delRange Is Nothing Then
                    Set delRange = .Range("A" & i)
                Else
                    Set delRange = Union(delRange, .Range("A" & i))
                End If
            End If
        Next i

        If Not delRange Is Nothing Then delRange.EntireRow.Delete
    End With
End Sub

Function DoesExists(clVal As Variant) As Boolean
    Dim j As Long

    For j = LBound(myArr) To UBound(myArr)
        If clVal = myArr(j) Then
            DoesExists = True: Exit For
        End If
    Next j
End Function 
```

# wpf - PopUp 控件 IsOpen 属性总是返回 false

> ID：13045964
> 
> 赞同：0
> 
> 时间：2012-10-24T09:02:07.500
> 
> 标签：wpf, popup, contextmenu

我有一个简单的弹出控件，我想在我的 wpf 应用程序中使用它作为 contextmenu，但它的 isOpen 属性始终显示为 false 并且我的弹出窗口没有显示。我尝试在 xaml 以及通过我的代码中更改它，但都是徒劳的。谁能告诉我为什么会发生这种意外行为？

```
 <Grid>
    <StackPanel>
        <Popup x:Name="contextMenu" IsOpen="True" StaysOpen="False">
            <Grid>
                <Border BorderBrush="Black"
                        BorderThickness="2"
                        CornerRadius="3"
                        Background="AliceBlue">
                    <ListBox Name="ContextMenuList"
                             HorizontalAlignment="Stretch"
                             SelectionChanged="ContextMenuListSelectionChanged" />

                        ItemsSource="{Binding Path=ContextMenuListBinding}"
                        SelectedItem="{Binding Path=ContextMenuListBinding,
                        Mode=OneWay}"

                </Border>
            </Grid>
        </Popup>
    </StackPanel>
</Grid>

public void PositionContextMenu()
    {

        contextMenu.PlacementRectangle = new Rect(700, 250, 40, 30);
        contextMenu.Placement = PlacementMode.Absolute;
        contextMenu.IsOpen = true;

    } 
```

当我调试我的代码 contextmenu.Isopen 时，它的值总是显示为 false。

对函数的调用是在 MouseLeftbuttonDown 事件中进行的：-

```
 void MapMouseLeftButtonDownCommand(MouseEventArgs e)
    {

           var mycontextmenu = new MyContextMenu();

        mycontextmenu.PositionContextMenu();
    } 
```

MyContextMenu 是包含我的弹出窗口的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:38:55.060

当您调试代码（例如引发断点）时，您会失去弹出窗口的焦点。当弹出窗口没有将`StaysOpen`属性设置为 true 时，它​​会在失去焦点时自行关闭。例如，如果您切换到另一个窗口/应用程序然后切换回您的表单，也会发生同样的情况，您将看到弹出窗口已关闭。

在`IsOpen`那个阶段真的是假的，因为弹出窗口已经（或正在中间）关闭自己。

要查看一切都按预期工作，而不是断点，请添加以下行： `Debug.Print(contextMenu.IsOpen.ToString());`

你会看到你仍然得到一个真实的，因为你没有使用断点并且没有失去焦点。

# javascript - 多态一个将浮点数与整数区分开来的函数（javascript）

> ID：13045966
> 
> 赞同：1
> 
> 时间：2012-10-24T09:02:18.827
> 
> 标签：javascript, integer, polymorphism

我需要在javascript中构建一个可以处理不同类型变量的多态函数。整数和浮点数。

那可能吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:04:30.260

Javascript 中没有整数数据类型，因此您必须检查值是什么，即它是否有任何小数部分：

```
if (value % 1 != 0) {
  // use it as integer
} else {
  // use it as floating point
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:08:45.890

最好的解决方案是不依赖方法重载（这正是您在此处寻找的，真的，并且在 JS 中不可用），而是使用不同的函数名称并具有两个函数。

这意味着您必须在调用端决定调用哪个函数，但这与其他语言（如 Java、C#、C）类似，在编译时做出此决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:08:59.060

是的。Javascript 没有函数参数类型化。整数和浮点数是一类类型的对象 - 数字

# php - Zencart 如何在我的布局中插入图像

> ID：13045970
> 
> 赞同：0
> 
> 时间：2012-10-24T09:02:45.177
> 
> 标签：php

我真的只想在我的 zencart 购物车中添加一个固定的图像，而不需要进入管理面板。我试过正常但没有运气。我也尝试过同样的问题。

我怀疑有一个php函数可以为我的模板文件夹提供正确的页面，所以如果有人知道该怎么做，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:17:17.117

我创建了一个函数来为我构建它。没找到直接用。

# delphi - RAD Studio XE2 在打开项目时删除 dfm 中设置的 OnClick

> ID：13045976
> 
> 赞同：0
> 
> 时间：2012-10-24T09:03:05.370
> 
> 标签：delphi, ide, delphi-xe2

我们有一个可以在简单或高级模式下运行的应用程序。不同之处在于主菜单条目是可见的。问题是 RAD Studio XE2 默默地删除了 dfm 中设置的 OnClick 属性值。它指向一个在主菜单 > 文件菜单中隐藏一些菜单项的过程。

步骤：
1\. 从 subversion 重新签出到磁盘上的一个新文件夹，一个以前从未存在过的文件夹。
2.在notepad++中打开主窗体的dfm和pas文件，确保“OnClick = MenuItem_File1Click”行存在，并且MenuItem_File1Click过程在pas文件的接口和实现中。是的，一切看起来都很好。
3\. 在 RAD Studio XE2 中打开项目。
4\. Object Inspector 中 File 菜单项的 OnClick 属性为空。

我们还有一些在 FormShow 中处理的其他菜单项，它们按预期工作，在简单模式下隐藏，在高级模式下可见。解决方法是将 MenuItem_File1Click 中的功能移动到 FormShow。但我真的很想了解为什么会发生这种情况。

谁能解释这种行为？有没有其他人遇到过这样的事情？我尝试将过程重命名为绝对不是系统的东西，但 IDE 还是将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:46:58.337

如果您将您的`Menu`（或 a `Button`）与连接起来`Action`，那么`Action`应该接管所有这些属性的控制： `AutoCheck, Caption, Checked, Enabled, HelpContext, Hint, GroupIndex, Bitmap/ImageIndex, ShortCut, Visible`在您的情况下**`OnClick/Execute`**.

这就是第一名的行动的“存在理由”。

因此，如果您在`Action`没有`Execute`事件处理程序的情况下离开，您实际上是在`nil`投入您的控件`OnClick`事件。

每当在 dfm 中指定的 Action 与控件挂钩时从 dfm 读取控件时，就会发生这种情况。只需尝试设置 OnClick，然后切换到 View As Text 并返回（Alt+F12 两次），您的 OnClick 就消失了……

查看 VCL 源代码：

```
procedure TMenuItem.ActionChange(Sender: TObject; CheckDefaults: Boolean);
begin
  if Sender is TCustomAction then
    with TCustomAction(Sender) do
    begin
      if not CheckDefaults or (Self.AutoCheck = False) then
        Self.AutoCheck := AutoCheck;
      if not CheckDefaults or (Self.Caption = '') then
        Self.Caption := Caption;
      if not CheckDefaults or (Self.Checked = False) then
        Self.Checked := Checked;
      if not CheckDefaults or (Self.Enabled = True) then
        Self.Enabled := Enabled;
      if not CheckDefaults or (Self.HelpContext = 0) then
        Self.HelpContext := HelpContext;
      if not CheckDefaults or (Self.Hint = '') then
        Self.Hint := Hint;
      if RadioItem and (not CheckDefaults or (Self.GroupIndex = 0)) then
        Self.GroupIndex := GroupIndex;
      if not CheckDefaults or (Self.ImageIndex = -1) then
        Self.ImageIndex := ImageIndex;
      if not CheckDefaults or (Self.ShortCut = scNone) then
        Self.ShortCut := ShortCut;
      if not CheckDefaults or (Self.Visible = True) then
        Self.Visible := Visible;
      if not CheckDefaults or not Assigned(Self.OnClick) then
        Self.OnClick := OnExecute; // <====== use debug dcus and put a break here...
    end;
end; 
```

**更新：...但是如果您在 OnClick 事件中有代码，则不应发生这种情况。**
这看起来像一个错误。从 dfm 读取 MenuItem 时，父窗体尚未完全加载，并且 OnClick 显示为

```
Name            Value
FOnClick    ($3,$6142210)
    Code    $3
    Data    $6142210 
```

但是`Assigned(FOnClick)`回来`False`了！！！！

所以`if not CheckDefaults or (@Self.OnClick=nil) then` 会是一个更好的测试

# c# - 如何在 ListView Webcontrol 中使用 GroupTemplate

> ID：13045978
> 
> 赞同：2
> 
> 时间：2012-10-24T09:03:16.313
> 
> 标签：c#, asp.net, listview, datatable

我需要 ASP.NET ListView 的帮助，我已经阅读了很多教程，但我还没有找到我的问题的答案。我试图解释我的问题。

**我的申请：**

我使用来自我们 Active Directory 的数据的 DataTable，并用这个 DataTable 填充我的 ListView

```
 this.myListView.DataSource = //myDataTable
 this.myListView.DataBind(); 
```

例如，我的 DataTable 有三列和几行，其中包含来自 ActiveDirectory 的用户信息。

![在此处输入图像描述](../Images/17d76d98cc01aea94d7b3762132d7a47.png)

如果我启动我的 ListView 我会得到这个......我的图片和我的 ASPX 代码是如何......

```
<ListView ...>
 <LayoutTemplate>
   <table>
    <tr>
     <th> --> Firstname Header
     <th> --> Lastname Header
     <th> --> Location Header
    <tr>
    <tr> --->itemPlaceHolder
   </table>
 </LayoutTemplate>
 <ItemTemplate>
  <tr>
   <td> --> Firstname
   <td> --> Lastname
   <td> --> Location
  </tr>
 </ItemTemplate>
</ListView> 
```

我的想法：

我想如果我显示我的 ListView 我得到这个......

![在此处输入图像描述](../Images/77ec890a026544ba8805dbc7b62fc747.png)

为此必须使用 GroupTemplate 但我不知道如何构建可以创建此组的 ListView。问题是我必须知道哪个用户拥有该位置，然后我必须构建 ListView。

谁能帮我 ：（

# javascript - 从指令设置 ngModel 时的范围问题

> ID：13045980
> 
> 赞同：0
> 
> 时间：2012-10-24T09:03:17.263
> 
> 标签：javascript, angularjs

我有一个看起来像这样的指令：

```
var myApp = angular.module('myApp',[])
    .directive("test", function() {
      return {
        template: '<button ng-click="setValue()">Set value</button>',
        require: 'ngModel',
        link: function(scope, iElement, iAttrs, ngModel) {
          scope.setValue = function(){
            ngModel.$setViewValue(iAttrs.setTo);
          }
        }
      };
    }); 
```

问题是，如果我在一个页面中多次使用这个指令，那么`setValue`只会在最后一个声明的指令上被调用。显而易见的解决方案是使用隔离范围，`scope: {}`但在指令之外无法访问 ngModel。​</p>

这是我的代码的 JSFiddle：http: [//jsfiddle.net/kMybm/3/](http://jsfiddle.net/kMybm/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:41:41.120

对于这种情况，ngModel 可能不是正确的解决方案。这主要是为了将值绑定到表单以执行诸如将它们标记为脏和验证之类的事情......

在这里，您可以只使用来自隔离范围的双向绑定，如下所示：

```
app.directive('test', function() {
   return {
      restrict: 'E',
      scope: { 
         target: '=target',
         setTo: '@setTo'
      },
      template: '<button ng-click="setValue()">Set value</button>',
      controller: function($scope) {
          $scope.setValue = function() {
              $scope.target = $scope.setTo;
          };
          //HACK: to get rid of strange behavior mentioned in comments
          $scope.$watch('target',function(){});
      }
   };
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:07:15.623

您需要做的就是添加`scope: true`到您的指令哈希。这为指令的每个实例创建了一个新的继承子范围，而不是在任何已经在使用的范围上不断覆盖“setValue”。

你对隔离范围是正确的。我对新手的建议是永远不要使用它。

**回复评论：**

我现在更好地理解了这个问题。当您通过表达式设置值时，它会将其设置在最直接的范围内。所以人们通常用 Angular 做的是他们读取和改变值而不是覆盖值。这需要将事物包含在某种结构中，例如对象或数组。

查看更新的小提琴：

[http://jsfiddle.net/kMybm/20/](http://jsfiddle.net/kMybm/20/)

（“foo”通常会进入通过 ngController 连接的控制器中。）

另一种选择，如果你真的想做到“无范围”，那就是不使用 ng-click 并自己处理 click 。

[http://jsfiddle.net/WnU6z/8/](http://jsfiddle.net/WnU6z/8/)

# scala - _._1 和 _++_ 在 Scala 中是什么意思（两个独立的操作）？

> ID：13045988
> 
> 赞同：14
> 
> 时间：2012-10-24T09:03:41.907
> 
> 标签：scala

我的解释`_._1`是：

`_`= 通配符参数 `_1`= 方法参数列表中的第一个参数 但是当与它一起使用时`.`，它意味着什么？

这是它的使用方式：

```
.toList.sortWith(_._1 < _._1) 
```

对于这个声明：

```
_++_ 
```

我迷路了。是否以某种方式连接两个通配符参数？这是它的使用方式：

```
.reduce(_++_) 
```

如果他们上面的代码可以变得更冗长并删除任何隐式，我会特别感兴趣，这样我才能更好地理解它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T09:06:14.927

`_._1`调用`_1`通配符参数上的方法`_`，获取元组的第一个元素。因此，`sortWith(_._1 < _._1)`按元组的第一个元素对元组列表进行排序。

`_++_``++`使用第二个参数作为参数调用第一个通配符参数的方法。`++`对序列进行连接。因此`.reduce(_++_)`将序列列表连接在一起。通常你可以使用`flatten`它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T09:07:54.897

`_1`是一个方法名。具体来说，元组有一个名为 的方法`_1`，它返回元组的第一个元素。所以`_._1 < _._1`意味着“在两个参数上调用 _1 方法并检查第一个是否小于第二个”。

是的，`_++_`连接两个参数（假设第一个参数有一个`++`执行连接的方法）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T09:08:27.763

```
.reduce(_++_) 
```

真的只是：

```
.reduce{ (acc, n) => acc ++ n } 
```

# ruby-on-rails-3 - 找不到宝石“摩卡（= 0.12.3）x86-mingw32”

> ID：13045989
> 
> 赞同：0
> 
> 时间：2012-10-24T09:03:43.083
> 
> 标签：ruby-on-rails-3

我尝试从 IDE 启动 redmine：

> rails/redmine/script/rails server -b 127.0.0.1 -p 3000 -e development

但我收到错误：

> ```
> /resolver.rb:287:in `resolve': Could not find gem 'mocha (= 0.12.3) x86-mingw32' in the gems available on this machine. (Bundler::GemNotFound) 
> ```

我安装了摩卡：

```
gem install mocha 
```

但仍然出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:32:23.200

尝试使用相同的确切版本安装它：

```
gem install mocha -v '0.12.3' 
```

# html - div内的跨度不换行

> ID：13045990
> 
> 赞同：7
> 
> 时间：2012-10-24T09:03:45.307
> 
> 标签：html, css

我有一个 div 是一个块并且具有正确的背景，在这个 div 内部有一个 span，但是 span 不会将文本包装在其中，而是通过 div 块。

```
<div id='code'><span class='kw'>string</span>&nbsp;str&nbsp;=&nbsp;<span class='str'>"SetResult(&#39;LINK1,LINK2&#39;,&nbsp;TagMatch(Return(TagMatch(Download(&#39;http://www.google.com\&#39;),&nbsp;&#39;&amp;lt;a&#39;,&nbsp;&#39;&#39;),&nbsp;&#39;5,6&#39;),&nbsp;&#39;onclick=gbar.logger.il(1,{t:5}); class="</span>gbzt<span class='str'>"&nbsp;id=gb_5&nbsp;href=\"&#39;,&nbsp;&#39;\"&#39;));Download(GetResult(&#39;LINK1&#39;))"</span>;<br/><span class='Var'>Scrapper</span>&nbsp;scr&nbsp;=&nbsp;<span class='kw'>new</span>&nbsp;<span class='Var'>Scrapper</span>();<br/><span class='kw'>string</span>[]&nbsp;results&nbsp;=&nbsp;scr.Multiple(str);</div> 
```

您可以在此处查看问题页面[http://innosia.com/Home/Article/WEBSCRAPER](http://innosia.com/Home/Article/WEBSCRAPER) 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-04-06T07:01:01.833

将空白属性设置为正常。

```
white-space:normal; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T09:10:48.513

在 CSS 中使用`word-wrap:break-word;`，但如果您不喜欢它，请使用`#code{overflow:auto;}`.

在您的页面上，您有多个`code`不好的 ID。尝试使用唯一 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T09:07:37.470

将样式添加`word-wrap:break-word`到您的`span`. 那应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T09:07:48.900

这可能可以通过`white-space`和`overflow`CSS 属性来实现

# google-app-engine - 如何在 GAE 中的 JPA 中持久化 Map

> ID：13045994
> 
> 赞同：0
> 
> 时间：2012-10-24T09:03:50.947
> 
> 标签：google-app-engine, jpa, map, persistent

我不知道为什么我不能在 GAE 中的 JPA 中持久化 MAP

```
AnnualReport thatyear = ....... 
if (stud.getAnnualReport() == null){
            Map<Integer,AnnualReport> temp = new HashMap<Integer,AnnualReport>();
            temp.put(thatyear.getAttrKey(), thatyear);
            stud.setAnnualReport(temp);
        } else{
            Map<Integer,AnnualReport> temp2 = stud.getAnnualReport();
            temp2.put(thatyear.getAttrKey(), thatyear);
            stud.setAnnualReport(temp2);
        }

        em.getTransaction().begin();
        try {
            em.persist(stud);
            em.getTransaction().commit();
        } finally {
            if (em.getTransaction().isActive()) {
                em.getTransaction().rollback();
            }
        } 
```

实际上在 http:// localhost :8888/_ah/admin/datastore 我可以看到那一年一直持续；但是，我永远无法得到它们；或者， stud.getAnnualReport() 始终为空。

```
EntityManager em;
em = EMF.get().createEntityManager();
AnnualReport thatyear = stud.getAnnualReport().get(yearselected); 
```

我真的不知道该怎么办。以下是Stud和AnnualReport之间的关系

螺柱

```
@Entity( name = "Stud")
public class Stud{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Key studID;

private String lastName = new String();

private Map<Integer,AnnualReport>annualReport = new HashMap<Integer,AnnualReport>(20);
@OneToMany(mappedBy="stud",cascade = CascadeType.ALL) 
@MapKey(name = "attrKey") 
@Basic
public Map<Integer, AnnualReport> getAnnualReport() {

        return annualReport;

} 
```

年度报告

```
@Entity( name = "AnnualReport")
public class AnnualReport  implements Serializable{
private static final long serialVersionUID = 3581307841164176872L;  
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Key annualReportID;

public int attrKey;
@ManyToOne 
Stud stud; 

private String attendSchoolNote; 
```

我不知道会发生什么。为什么我无法获取那些已经持久化的地图信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:00:03.917

不知道为什么你没有得到预期的结果，但是你没有提供任何调试信息。您可以使用日志轻松跟踪持久化过程，告诉您实际持久化到 GAE 实体对象中的内容。[GAE 在http://code.google.com/p/datanucleus-appengine/source/browse/trunk/tests/com/google/appengine/datanucleus/jdo/JDOMapTest.java](http://code.google.com/p/datanucleus-appengine/source/browse/trunk/tests/com/google/appengine/datanucleus/jdo/JDOMapTest.java)有一个（JDO）单元测试

这证明了正确的行为（并且由于 JDO/JPA 只是持久性引擎的一个包装器，因此没有理由认为使用 JPA 不会保持良好）。

编辑：事实上，我刚刚在[http://code.google.com/p/datanucleus-appengine/source/browse/trunk/tests/com/google/appengine/datanucleus/jpa/JPAMapTest.java](http://code.google.com/p/datanucleus-appengine/source/browse/trunk/tests/com/google/appengine/datanucleus/jpa/JPAMapTest.java)添加了一个 JPA 地图测试并且工作正常。

# c# - 并行复制文件和不并行复制文件是否应该有区别？

> ID：13045996
> 
> 赞同：5
> 
> 时间：2012-10-24T09:03:55.440
> 
> 标签：c#, multithreading, file, task-parallel-library, multiprocessing

我尝试使用以下两种解决方案复制 200 个文件，但我没有看到差异（我曾经`System.Diagnostics.Stopwatch`测量时间）。在这两种情况下，都需要 8 秒。第二个（并行）解决方案不应该更快吗？我想因为是 IO 操作使用 Parallel 会加快复制速度。

我错过了什么？

```
// Case1 - Regular iteration
foreach (FileInfo file in files)
{
    string temppath = Path.Combine(destDirName, file.Name);
    file.CopyTo(temppath, false);
}

// Case2 - Parallel
Parallel.ForEach(files, file =>
{
    string temppath = Path.Combine(destDirName, file.Name);
    file.CopyTo(temppath, false);
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T09:06:07.237

任务的并行执行并不能保证性能改进。

在您的情况下，文件复制可能会受到 IO 限制，而不是 CPU 限制。CPU 通常比 IO 设备有更多的可用带宽（除非您碰巧使用 Fusion IO 卡或其他东西），因此 IO 操作往往会导致 CPU 等待很多。

使用大量 CPU 的任务可以并行完成以获得性能提升。同样等待外部因素的任务也可以从转移到另一个线程中受益，以免成为阻塞任务。

但是，等待相同外部资源的任务可能几乎看不到任何好处，除非该外部资源本身可以处理与多个线程相关的流量（IO 往往永远无法处理流量并且实际上可能导致资源争用，放慢速度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:00:33.863

与上面的@Adam 完全相同，但增加了几点：

如果你有机会，你可能想用一个或两个网络驱动器试试这个。高延迟连接上的文件传输具有较大的设置延迟，这很可能为多线程解决方案带来优势，尤其是在处理大量小文件时。

使用具有少量固定线程数（例如 2 个）的池可能也很有用，以查看这是否可以减少磁盘争用并提高性能。

如果您喜欢我的回答，请点赞@Adam，而不是我。

# java - JFree图表将轴设置为百分比

> ID：13045997
> 
> 赞同：2
> 
> 时间：2012-10-24T09:03:56.837
> 
> 标签：java, jfreechart

我希望我的[JFree 图表](http://www.jfree.org/jfreechart/ "JFreeChart")中的 Axis 变为 % 而不是正常数字有谁知道我可以如何修改我的代码以便发生这种情况。

应该说我的表已经在百分比但它自己的图表不是！

**更新**

这是我到目前为止尝试过的，但仍然没有改变：

```
CategoryPlot plot = (CategoryPlot) chart.getPlot();
    NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
    DecimalFormat pctFormat = new DecimalFormat("#.0%");
    rangeAxis.setNumberFormatOverride(pctFormat); 
    rangeAxis.setRange(0.0, 100.0);

    chart.getXYPlot().setRangeAxis(rangeAxis);
    title = periode;
    chartPanel.setChart(chart);
    setTableModel(true,true); 
```

**更新2**

要将间隔设置为 10，您需要以下代码：

```
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
        rangeAxis.setRange(0.0, 100.0);
        rangeAxis.setTickUnit(new NumberTickUnit(10));
        rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
        rangeAxis.setAutoRangeIncludesZero(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:53:49.523

您可以使用`NumberAxis#setNumberFormatOverride()`并提供一个`java.text.NumberFormat`

```
CategoryPlot plot = (CategoryPlot) chart.getPlot(); 
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
DecimalFormat pctFormat = new DecimalFormat("#.0%");
rangeAxis.setNumberFormatOverride(pctFormat); 
```

# c# - 查询集合的最有效方法 - C#

> ID：13045999
> 
> 赞同：0
> 
> 时间：2012-10-24T09:04:01.907
> 
> 标签：c#, asp.net-mvc, linq

我正在搜索包含 3 列的通用列表（或 IQueryable）。我正在尝试根据 1 和 2 查找第 3 列的值，但搜索速度确实很慢。对于单个搜索，速度并不明显，但我正在循环执行此搜索，并且对于 700 次迭代，总共需要 2 多分钟的时间，这没有任何用处。第 1 列和第 2`int`列是，第 3 列是 a `double`。这是我正在使用的 linq：

```
public static Distance FindByStartAndEnd(int start, int end, IQueryable<Distance> distanceList)
{
    Distance item = distanceList.Where(h => h.Start == start && h.End == end).FirstOrDefault();
    return item ;
} 
```

IQueryable 列表中最多可能有 60,000 个条目。我知道这很多，但我认为这不会对搜索造成任何问题。

所以我的问题是，当需要匹配两列以获得第三列的值时，是否有更好的方法来搜索集合？我想我需要所有 700 次搜索几乎是即时的，但每个搜索都需要大约 300 毫秒，很快就会增加。

**更新 - 最终解决方案#######################**

我现在使用`Tuple`with`start`和`end`作为键创建了一个字典。我认为这可能是正确的解决方案。

```
var dictionary = new Dictionary<Tuple<int, int>, double>();

var key = new Tuple<int, int>(Convert.ToInt32(reader[0]), Convert.ToInt32(reader[1]));
var value = Convert.ToDouble(reader[2]);

if (value <= distance)
{
    dictionary.Add(key, value);
}
var key = new Tuple<int, int>(5, 20); 
```

工作正常 - 更快

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:06:56.643

创建一个字典，其中第 1 列和第 2 列创建键。您创建字典一次，然后您的搜索将几乎是即时的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:07:25.223

如果您可以控制您的集合和模型类，那么有一个库可以让您索引类的属性，这可以大大加快搜索速度。

[http://i4o.codeplex.com/](http://i4o.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:14:07.587

从前两列中创建一个值，例如通过将它们连接到 a`long`中，并将其用作字典中的键：

```
public long Combine(int start, int end) {
  return ((long)start << 32) | end;
}

Dictionary<long, Distance> lookup = distanceList.ToDictionary(h => Combine(h.Start, h.End)); 
```

然后您可以查找该值：

```
public static Distance FindByStartAndEnd(int start, int end, IQueryable<Distance> distanceList) {
  Distance item;
  if (!lookup.TryGetValue(Combine(start, end), out item) {
    item = null;
  }
  return item;
} 
```

从字典中获取项目接近于 O(1) 操作，这应该与 O(n) 操作产生显着差异，以循环遍历项目以找到一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:09:16.727

您的问题是每次返回项目时 LINQ 都必须执行表达式树。只需使用多个开始和结束值调用此方法

```
public static IEnumerable<Distance> FindByStartAndEnd
    (IEnumerable<KeyValuePair<int, int>> startAndEnd,
    IQueryable<Distance> distanceList)
{

    return
        from item in distanceList
        where 
            startAndEnd.Select(s => s.Key).Contains(item.Start)
            && startAndEnd.Select(s => s.Value).Contains(item.End)
        select item;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T09:11:09.527

我会试试[hashSet](https://stackoverflow.com/questions/1247442/when-should-i-use-the-hashsett-type)。这应该加快速度；）