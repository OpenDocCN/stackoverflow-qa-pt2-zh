# StackOverflow 问答 15183000-15183999

# ruby-on-rails - JSON 只能由 AJAX 访问

> ID：15183002
> 
> 赞同：0
> 
> 时间：2013-03-03T06:15:33.790
> 
> 标签：ruby-on-rails, ajax, json, browser

我正在 Rails 中创建一个 Web 应用程序，它将 HTML 模板（由用户创建）输出为 JSON。但是，我不希望 Web 浏览器或爬虫能够查看呈现的 JSON（如访问时`http://example.com/content.json`），我只希望 AJAX 请求能够解析内容。这可能吗？如果可以，我该如何在 Rails 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:18:57.393

在您的控制器中使用`if request.xhr?`以检测请求是否为 AJAX。

[Rails 检测请求是否为 AJAX](https://stackoverflow.com/questions/8220701/rails-detect-if-request-was-ajax)

# xslt - XSLT GROUP BY 使用键

> ID：15183004
> 
> 赞同：0
> 
> 时间：2013-03-03T06:15:50.590
> 
> 标签：xslt, xslt-grouping

我正在尝试生成 HTML 输出，它是以下层次结构中的表 - DIVISION、DESK、STRATEGY。我需要在 Division 列和 Desk 列上设置行跨度。一个部门可以有多个办公桌，一个办公桌可以有多种策略。

我正在使用键来按 Division,Desk 定义分组。它适用于 Division，但适用于 Desk。请指教。

xml代码：

```
<?xml version="1.0"?>
<ROWSET>
<ROW>
    <DIVISION>Flow Credit</DIVISION>
    <DESK>Europe Indices Net</DESK>
    <ACCT_PNL>     0.18 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
</ROW>
<ROW>
    <DIVISION>Flow Credit</DIVISION>
    <DESK>US CDS Trading</DESK>
    <STRATEGY>Funk_A6M</STRATEGY>
    <ACCT_PNL>    -0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
</ROW>
<ROW>
    <DIVISION>Flow Credit</DIVISION>
    <DESK>US CDS Trading</DESK>
    <STRATEGY>HYQUANTO</STRATEGY>
    <ACCT_PNL>     0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
</ROW> 
```

xslt：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"   xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
<xsl:output method="xml" indent="yes"/>
<xsl:key name="groups" match="/ROWSET/ROW" use="DIVISION"/>
<xsl:key name="groups2" match="/ROWSET/ROW" use="concat(DIVISION, '|', DESK)"/>
<xsl:template match="/ROWSET/ROW">
    <xsl:apply-templates select="result[generate-id() = generate-id(key('groups', DIVISION)[1])]" mode="groups"/>
    <xsl:apply-templates select="result[generate-id() = generate-id(key('groups2', concat(DIVISION, '|', DESK))[1])]" mode="groups2"/>
</xsl:template>
<xsl:template match="/ROWSET">
    <h1>
        <xsl:value-of select="DIVISION"/>
    </h1>
    <table id="{DIVISION}">
        <tr class="heading">
            <th scope="col">DIVISION</th>
            <th scope="col">DESK</th>
            <th scope="col">STRATEGY</th>
        </tr>
        <xsl:for-each select="key('groups', ROW/DIVISION)">
            <tr>
                <xsl:if test="position() = 1">
                    <td valign="center" bgcolor="#999999">
                        <xsl:attribute name="rowspan">  <xsl:value-of select="count(key('groups', DIVISION))"/></xsl:attribute>
                        <b>
                            <xsl:text/>
                            <xsl:value-of select="DIVISION"/>
                        </b>
                    </td>
                </xsl:if>
                <xsl:if test="position() = 1">
                    <td valign="center" bgcolor="#999999">
                        <xsl:attribute name="rowspan">     <xsl:value-of select="count(key('groups2', concat(DIVISION, '|',DESK)))"/></xsl:attribute>
                        <b>
                            <xsl:text/>
                            <xsl:value-of select="DESK"/>
                        </b>
                    </td>
                </xsl:if>
                <td>
                    <xsl:value-of select="STRATEGY"/>
                </td>
            </tr>
        </xsl:for-each>
    </table>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:14:22.677

这有点棘手，但应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="groups" match="/ROWSET/ROW" use="DIVISION"/>
  <xsl:key name="groups2" match="/ROWSET/ROW" use="concat(DIVISION, '|', DESK)"/>

  <xsl:template match="/ROWSET">
    <xsl:apply-templates select="ROW[generate-id() = 
                                     generate-id(key('groups', DIVISION)[1])]" />
  </xsl:template>

  <xsl:template match="ROW">
    <h1>
      <xsl:value-of select="DIVISION"/>
    </h1>
    <table id="{DIVISION}">
      <tr class="heading">
        <th scope="col">DIVISION</th>
        <th scope="col">DESK</th>
        <th scope="col">STRATEGY</th>
      </tr>
      <tr>
        <xsl:call-template name="DivisionCell" />
        <xsl:call-template name="DeskCell" />
        <xsl:call-template name="Strategy" />
      </tr>
      <!-- Remaining rows for the first desk -->
      <xsl:call-template name="DeskRemainder" />
      <!-- Apply templates on the first row of each remaining desk -->
      <xsl:apply-templates 
          select="key('groups', DIVISION)
                    [generate-id() = 
                     generate-id(key('groups2', concat(DIVISION, '|', DESK)
                                 )[1])]
                    [position() > 1]" mode="deskStarter" />
    </table>
  </xsl:template>

  <xsl:template name="DivisionCell">
    <xsl:call-template name="GroupCell">
      <xsl:with-param name="value" select="DIVISION" />
      <xsl:with-param name="key" select="'groups'" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="DeskCell">
    <xsl:call-template name="GroupCell">
      <xsl:with-param name="value" select="DESK" />
      <xsl:with-param name="key" select="'groups2'" />
      <xsl:with-param name="keyValue" select="concat(DIVISION, '|', DESK)" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="GroupCell">
    <xsl:param name="value" />
    <xsl:param name="key" />
    <xsl:param name="keyValue" select="$value" />

    <td valign="center" bgcolor="#999999"
        rowspan="{count(key($key, $keyValue))}">
      <b>
        <xsl:value-of select="$value"/>
      </b>
    </td>
  </xsl:template>

  <xsl:template name="DeskRemainder">
    <xsl:apply-templates 
            select="key('groups2', concat(DIVISION, '|', DESK))[position() > 1]"
            mode="deskRemainder" />
  </xsl:template>

  <!-- For the first row of each distinct desk, after the first distinct desk -->
  <xsl:template match="ROW" mode="deskStarter">
    <tr>
      <xsl:call-template name="DeskCell" />
      <xsl:call-template name="Strategy" />
    </tr>
    <xsl:call-template name="DeskRemainder" />
  </xsl:template>

  <!-- For remaining rows for a given desk -->
  <xsl:template match="ROW" mode="deskRemainder">
    <tr>
      <xsl:call-template name="Strategy" />
    </tr>
  </xsl:template>

  <xsl:template name="Strategy">
    <td>
      <xsl:value-of select="STRATEGY"/>
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入 XML 上运行时（使用额外的项目使其更有趣）：

```
<ROWSET>
  <ROW>
    <DIVISION>Flow Credit</DIVISION>
    <DESK>Europe Indices Net</DESK>
    <ACCT_PNL>     0.18 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
  </ROW>
  <ROW>
    <DIVISION>Flow Credit</DIVISION>
    <DESK>US CDS Trading</DESK>
    <STRATEGY>Funk_A6M</STRATEGY>
    <ACCT_PNL>    -0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
  </ROW>
  <ROW>
    <DIVISION>Other Division</DIVISION>
    <DESK>US CDS Trading</DESK>
    <STRATEGY>HYQUANTO</STRATEGY>
    <ACCT_PNL>     0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
  </ROW>
  <ROW>
    <DIVISION>Flow Credit</DIVISION>
    <DESK>US CDS Trading</DESK>
    <STRATEGY>HYQUANTO</STRATEGY>
    <ACCT_PNL>     0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
  </ROW>
  <ROW>
    <DIVISION>Other Division</DIVISION>
    <DESK>US CDS Trading</DESK>
    <STRATEGY>HYQUANTO</STRATEGY>
    <ACCT_PNL>     0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
  </ROW>
  <ROW>
    <DIVISION>Other Division</DIVISION>
    <DESK>Europe CDS Trading</DESK>
    <STRATEGY>HYQUANTO</STRATEGY>
    <ACCT_PNL>     0.01 MM USD</ACCT_PNL>
    <ECO_PNL>     0.00 MM USD</ECO_PNL>
  </ROW>
</ROWSET> 
```

这会产生：

```
<h1>Flow Credit</h1>
<table id="Flow Credit">
  <tr class="heading">
    <th scope="col">DIVISION</th>
    <th scope="col">DESK</th>
    <th scope="col">STRATEGY</th>
  </tr>
  <tr>
    <td valign="center" bgcolor="#999999" rowspan="3">
      <b>Flow Credit</b>
    </td>
    <td valign="center" bgcolor="#999999" rowspan="1">
      <b>Europe Indices Net</b>
    </td>
    <td></td>
  </tr>
  <tr>
    <td valign="center" bgcolor="#999999" rowspan="2">
      <b>US CDS Trading</b>
    </td>
    <td>Funk_A6M</td>
  </tr>
  <tr>
    <td>HYQUANTO</td>
  </tr>
</table>
<h1>Other Division</h1>
<table id="Other Division">
  <tr class="heading">
    <th scope="col">DIVISION</th>
    <th scope="col">DESK</th>
    <th scope="col">STRATEGY</th>
  </tr>
  <tr>
    <td valign="center" bgcolor="#999999" rowspan="3">
      <b>Other Division</b>
    </td>
    <td valign="center" bgcolor="#999999" rowspan="2">
      <b>US CDS Trading</b>
    </td>
    <td>HYQUANTO</td>
  </tr>
  <tr>
    <td>HYQUANTO</td>
  </tr>
  <tr>
    <td valign="center" bgcolor="#999999" rowspan="1">
      <b>Europe CDS Trading</b>
    </td>
    <td>HYQUANTO</td>
  </tr>
</table> 
```

# web-services - 要输出的文本中的无效空字符

> ID：15183006
> 
> 赞同：0
> 
> 时间：2013-03-03T06:16:13.987
> 
> 标签：web-services, xml-parsing, jax-ws, woodstox

我正在尝试通过我的 WS 将服务器端的一些数据进程传递给客户端。

但我收到了这个错误：

```
 SEVERE: caught throwable
    javax.xml.ws.WebServiceException: com.ctc.wstx.exc.WstxIOException: Invalid null   character in text to output
        at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:112)
        at com.sun.xml.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:278)
        at com.sun.xml.ws.transport.http.HttpAdapter.encodePacket(HttpAdapter.java:380)
        at com.sun.xml.ws.transport.http.HttpAdapter.access$100(HttpAdapter.java:92)
        at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:525)
        at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:285)
        at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:143)
        at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:155)
        at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:189)
        at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:76)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxIOException: Invalid null character in text to output
        at com.ctc.wstx.sw.BaseStreamWriter.writeCharacters(BaseStreamWriter.java:520)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:135)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:138)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:138)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:138)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:138)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:138)
        at com.sun.xml.ws.util.DOMUtil.serializeNode(DOMUtil.java:138)
        at com.sun.xml.ws.message.saaj.SAAJMessage.writeTo(SAAJMessage.java:365)
        at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:109)
        ... 24 more
Caused by: java.io.IOException: Invalid null character in text to output
        at com.ctc.wstx.sw.XmlWriter.throwInvalidChar(XmlWriter.java:538)
        at com.ctc.wstx.sw.BufferingXmlWriter.writeCharacters(BufferingXmlWriter.java:453)
        at com.ctc.wstx.sw.BaseStreamWriter.writeCharacters(BaseStreamWriter.java:518) 
```

将响应发送回客户端时会引发此异常。

在客户端，这是响应：

```
ParseError at [row,col]:[1,11347] 
```

但是看着这个很难找到错误在哪里。无论如何我可以解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T17:56:40.060

As exception suggests, some String (character data value) in object you trying to write out contains null character (Unicode zero). Beyond finding and fixing corrupt String value(s), you can also work around the problem by making Woodstox change such invalid character values. See [How to alleviate the infamous "Xml Invalid Character" problem with Woodstox](http://www.cowtowncoder.com/blog/archives/2008/12/entry_106.html) .

# javascript - 如何防止这个指针改变？

> ID：15183008
> 
> 赞同：-1
> 
> 时间：2013-03-03T06:16:47.093
> 
> 标签：javascript, variables, pointers, backbone.js, reference

```
 var oldView = currentView;
        currentView = new View();
        console.log(oldView) //oldView should point to the old one, not the new one. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T06:32:16.397

扩展我的评论：

我假设您正在考虑 C++“参考”变量。JavaScript 没有这些，也没有指针。

C++ 的语义是围绕固定内存位置的概念构建的：`int foo;`保证您的程序在某处有四个字节。 `foo`将始终引用相同的四个字节。如果您随后创建对with的*引用*，也将始终引用这四个字节。分配给一个变量的任何值都将是您从另一个变量获得的值。`foo``int &bar = foo;``bar`

JavaScript 和许多其他动态语言一样，不是这样工作的。变量名称更像是在对象之间移动的标签，对象所在位置的精确细节与您无关。所以，一步一步，你的代码会这样做：

```
var oldView = currentView; 
```

创建一个名称，`oldView`并将其粘贴到所粘贴的同一对象`currentView`上。就像一个便利贴。

```
currentView = new View(); 
```

创建一个新`View`对象，并在其上粘贴名称`currentView`。这对;*没有影响* `oldView`那是一个完全不同的名字，仍然粘在同一个物体上。

```
console.log(oldView); 
```

因为你从未改变过`oldView`，所以它仍然附着在同一个对象上。

# c++ - 我应该多久在 C++ 中重新播种一次？

> ID：15183010
> 
> 赞同：11
> 
> 时间：2013-03-03T06:17:03.317
> 
> 标签：c++, c++11

我只是想知道在程序开始时只播种一次随机数生成器是否足够。我编写使用随机数的函数。我从不在函数中播种 rand() 生成器，而是在主条目上保留调用 srand() 。例如，我的程序可能如下所示：

```
void func1()
{
    std::cout << "This is func1 " << std::rand() << std::endl;
}

void func2()
{
    std::cout << "This is func2 " << std::rand() << std::endl;
}

int main()
{
    std::srand(std::time(NULL));
    func1();
    func2();
    return 0;
} 
```

通过这样做，我可以轻松地从主条目中关闭播种。它在调试程序时很有用 - 每次我运行程序而不播种时结果都保持不变。有时，如果由于某个随机数而出现问题，如果要生成一组不同的随机数，它可能会消失，所以我更喜欢这种简单的机制来关闭播种。

但是，我注意到在 C++11 的新随机实用程序集中，随机数生成器必须在使用前进行实例化。（例如 default_random_engine）。并且每次生成器都必须单独播种。我想知道是否真的鼓励在需要新生成器时重新植入生成器。我知道我可以创建一个全局随机生成器并像以前一样只播种一次，但我根本不喜欢使用全局变量的想法。否则，如果我创建一个本地随机数生成器，我就会失去全局关闭种子以进行调试或任何目的的能力。

我很高兴学习 C++11 中的新功能，但有时它只是非常令人困惑。如果我对新的随机生成器有任何问题，谁能告诉我？或者 C++11 中的最佳实践是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T06:34:47.320

这肯定取决于您正在开发的系统的总体目标，但通常您只需要在系统初始化时为需要随机数生成器 (RNG) 的任何系统播种一次。

在游戏开发中，每个系统（AI、程序内容生成器、粒子等）都有一个单独的 RNG 来隔离该系统以进行调试和维护是很常见的。

如果您存储种子，您还可以用很少的数据重放逻辑（只需要每帧的增量输入）。这不仅可以让您更轻松地调试应用程序，还可以让您支持用户的录制和回放功能。显然，如果您要创建重播模式，则需要在每个重播会话之前为系统提供记录的种子。

还有其他系统，例如密码学，您可能希望定期建立一个新种子。您可能希望随着时间的推移使种子过期，或者需要在每次与客户端应用程序握手时生成一个新种子。但是，您可能希望使用 Cryptography 库，因为它们可能比您自己推出的库更强大。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T08:00:24.087

随机数生成器 (RNG) 需要实例化的原因之一是它可以保持其内部状态，这样在多线程应用程序中，当多个线程使用同一个 RNG 进程时，您不会引入不确定性- 全局状态。假设您有两个线程，每个线程都处理问题的独立部分 - 如果状态（种子）对于 RNG 实例是私有的，那么当您使用已知值为每个线程的 RNG 播种时，您可以获得确定性。另一方面，如果 RNG 将状态保存在全局变量中，那么每个线程观察到的随机数序列取决于它们对 RNG 的调用的交错——您现在已经引入了非确定性。

用于在多线程应用程序中分配工作的一种编程模式是[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)。如果在池中排队等待工作线程执行的工作项需要一个 RNG，并且您希望每次运行都具有确定性，那么您希望每个线程在从队列

*   这可以作为工作项初始化的一部分来完成
*   种子可能涉及作业参数的[哈希函数](http://en.wikipedia.org/wiki/Hash_function)
*   如果您对它的编码方式很小心，那么无论工作线程的数量或它们从队列中拉出作业的顺序如何，您都可以拥有伪随机性和确定性。

这是一个处理此问题的 SO 问题：[Deterministic random number generator bolted to instance (thread independent)](https://stackoverflow.com/questions/6467585/deterministic-random-number-generator-tied-to-instance-thread-independent)

在单线程应用程序中，没有必要重新播种 RNG，实际上这是不可取的，因为这样做会缩短它开始重复之前的周期。@MatthewSanders 指出的例外是密码学 - 在这种情况下，您需要最大熵（最小确定性），因为随机数被用作私钥。

# transactions - 当他们的买家通过 PayPal 付款时，我如何向我的商家（客户）收取每笔交易的百分比？

> ID：15183011
> 
> 赞同：0
> 
> 时间：2013-03-03T06:17:05.920
> 
> 标签：transactions, paypal, markup

我有一个电子商务 SaaS 产品，商家可以在其中自动打开他们的在线商店，与 Shopify 非常相似。当买家在我的客户（商家）商店进行交易时，我如何向商家收取一定的百分比并将其转入我的账户？我通过了自适应支付 API，它似乎是可行的。但是，我正在使用 Express Checkout 让买家向商家付款。另一方面，Express Checkout 中存在并行付款，但它在交易详细信息中显示买家除了向商家付款外，他还将向我付款。我希望这对买家来说是透明的，他们看到他们只向商家付款，并且在后台我得到了一个家长。我不知道 Shopify 是如何使用 Express Checkout 并在其商家网站上发生的每笔交易上收取加价的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:28:59.910

让您的用户使用[Preapproval API](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation)与您一起设置预先批准配置文件。这将允许您使用预批准密钥拨打[Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)电话，这样付款将立即进行，无需任何额外的登录或批准。

然后，您可以在 Express Checkout 流程中绑定 Pay 电话以支付自己的百分比，或者您可以在[IPN](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)中执行此操作，这可能是更好的执行方式。例如，这样您就不会在电子支票真正清除之前支付自己的费用。

结果将是您的用户看到他们支付给他们的总金额，然后他们立即看到他们欠您支付给您的金额。

# mysql - 在不使用 SELECT 的情况下将布尔值更新为 SQL 中的相反值

> ID：15183012
> 
> 赞同：17
> 
> 时间：2013-03-03T06:17:13.497
> 
> 标签：mysql, sql, pdo, sql-update

是否可以通过告诉布尔字段将字段更新为与其相反的值来升级布尔字段，而不必选择值 - 检查它然后相应地更新，这似乎很冗长......

我的意思的一个伪例子

```
UPDATE `table` SET `my_bool` = opposite_of(my_bool) 
```

目前我必须在一个查询中选择 my_bool 然后快速检查它的值，以便我可以在第二个查询中更新表。

如果可能的话，我希望将其减少为一个查询？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-03T06:17:50.107

利用`NOT`

```
UPDATE `table` SET `my_bool` = NOT my_bool 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-05-22T09:41:24.240

```
UPDATE `Table` SET `my_bool` = 1 ^ `my_bool` 
```

# r - 仅在矩阵中搜索某些记录

> ID：15183019
> 
> 赞同：3
> 
> 时间：2013-03-03T06:18:02.593
> 
> 标签：r, search, matrix

首先让我说我对 R 比较陌生，并且通常认为自己是一个新手程序员......所以不要假设我知道我在做什么 :)

我有一个大矩阵，大约 300,000 x 14。它本质上是一个包含 15 分钟数据的 20 年数据集。但是，我只需要我命名为 REC.TYPE 的列包含字符串“SAO”或“FL-15”的行。

我非常低效的解决方案是逐行搜索矩阵，测试 REC.TYPE 列，如果该行不符合我的条件，则基本上删除该行。本质上...

```
 j <- 1
   for (i in 1:nrow(dataset)) {
      if(dataset$REC.TYPE[j] != "SAO  " && dataset$RECTYPE[j] != "FL-15") {
        dataset <- dataset[-j,]  }
      else {
        j <- j+1  }
   } 
```

在看到我的代码在一小时内只通过了大约 10% 的矩阵并且每一行都变慢之后......我认为必须有一种更有效的方法来只提取我需要的记录......尤其是当我需要重复时这适用于另外 8 个数据集。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T06:25:32.530

你想要正则表达式。它们区分大小写（如下所示）。

```
x <- c("ABC", "omgSAOinside", "TRALAsaoLA", "tumtiFL-15", "fl-15", "SAOFL-15")
grepl("SAO|FL-15", x)
[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE 
```

在你的情况下，我会做

```
subsao <- grepl("SAO", x = dataset$REC.TYPE)
subfl <- grepl("FL-15", x = dataset$RECTYPE)
#mysubset <- subsao & subfl # will return TRUE only if SAO & FL-15 occur in the same line
mysubset <- subsao | subfl # will return TRUE if either occurs in the same line
dataset[mysubset, ] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T06:26:23.903

我无法从您发布的代码中看出，但如果您的数据已经在 data.frame 中，您可以直接执行此操作。如果没有，请先运行`dataset <- data.frame(dataset)`.

从那里：

```
dataset[dataset$REC.TYPE == "SAO  " | dataset$RECTYPE == "FL-15",] 
```

应该返回你正在寻找的东西。`For`循环在 R 中非常低效。一旦你通读了 R 教程，[R inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)会告诉你如何避免一些常见的陷阱。

此特定行的工作方式是过滤数据框，仅返回符合条件的行。您可以`?[`在您的 R 解释器中输入更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T06:42:24.323

正如其他发帖人所说，重复子集`[`操作很慢。相反，对整个向量进行操作的函数更可取。

我假设您的两个标准都会影响`REC.TYPE`. 我的解决方案使用以下功能`%in%`：

```
dataset <- dataset[dataset$REC.TYPE %in% c("SAO","FL-15"),] 
```

# ios - 为报亭推送注册应用程序时，标准推送有效负载的徽章值会被忽略吗？

> ID：15183022
> 
> 赞同：2
> 
> 时间：2013-03-03T06:18:51.140
> 
> 标签：ios, objective-c, push-notification

从它的样子来看，如果我的应用程序注册了 UIRemoteNotificationTypeNewsstandContentAvailability，即使推送有效负载包含非零徽章值，iOS 也不会更新我的应用程序的徽章图标。这是注册报亭推送的应用程序的预期行为吗？我找不到任何 Apple 文档来支持这一点，所以我很好奇其他人是否也看到了这一点。

如果我从接受的远程通知列表中删除 UIRemoteNotificationTypeNewsstandContentAvailability，那么徽章的设置就可以正常工作。

# actionscript-3 - 使用 ctrl+鼠标滚轮 flex3 在高级数据网格中放大/缩小

> ID：15183026
> 
> 赞同：1
> 
> 时间：2013-03-03T06:19:36.127
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

有没有办法放大flex3。我想使用 ctrl+鼠标滚轮放大高级数据网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:55:16.117

首先将datagrid 的属性`variableRowHeight`设置为. 然后在鼠标悬停时，您应该获得鼠标当前所在行的行。`wordwrap``True`

现在用于缩放鼠标所在的行，正如 Christophe Herreman 所说，使用`MOUSE_WHEEL`事件来增加和减少行的内容大小。当您的行内容大小增加时，行高也会相应增加。

您可以使用样式功能来设置数据网格的样式。

```
('http://livedocs.adobe.com/flex/3/html/help.html?content=advdatagrid_01.html') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:13:53.957

您可以通过监听[MouseEvent.MOUSE_WHEEL](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#MOUSE_WHEEL)事件来捕捉鼠标滚轮的移动。事件对象还包含一个“ctrlKey”属性，如果控制键处于活动状态，该属性将为真。

我不确定放大高级数据网格是什么意思，但以上内容应该使您能够实现这一点。

# php - javascript显示不同的错误信息

> ID：15183029
> 
> 赞同：-1
> 
> 时间：2013-03-03T06:20:25.373
> 
> 标签：php, javascript

我有两个页面（page1.php 和 page2.php）需要放置 javascript 编码。在 page1.php 上，有两个指向 page2.php 的图像链接。

这是 page1.php 的代码：

```
<a href="page2.php"><img src="btn1.png" id="img1"></a>
<a href="page2.php"><img src="btn2.png" id="img2"></a> 
```

这是 page2.php 的代码：

```
<input id="t_c" type="checkbox" name="t_c" value="1"/>
<input type="image" value="continue" src="images/btn_cont.png"/> 
```

如果用户单击 image1，它将转到 page2.php。然后如果用户没有单击复选框，则会显示错误消息。

如果用户单击 image2，它将转到 page2.php。那么如果用户没有点击复选框，将会显示不同的错误信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:38:20.433

输入类型图像是一个提交按钮。

如果第 2 页是 php 页面，最好的解决方案是 - 正如 jeff9888 所提到的，选择要在服务器上显示的消息。如果必须使用 JavaScript，请在​​查询字符串中传递参数，它将显示在第 2 页的 location.search 中

第 1 页

```
<a href="page2.php?parm=img1"><img src="btn1.png" id="img1"></a>
<a href="page2.php?parm=img2"><img src="btn2.png" id="img2"></a> 
```

第2页：

```
<hmtl>
<head>
<title>Page 2</title>
<script>
window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    if (!this.elements["t_c"].checked) { // note the "this" keyword
      if (location.search.indexOf("img1")!=-1) { // ?id=img1
        alert("Please check the checkbox for image 1");
      }
      else  {
        alert("Please check the checkbox for image 2");
      }
      return false; // cancel submit
    }
    return true; // allow submit
  }
}
</script>
</head>
<body>
<form id="form1">
  <input id="t_c" type="checkbox" name="t_c" value="1"/>
  <input type="image" value="continue" src="images/btn_cont.png"/>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:40:49.437

将 get 变量发送到您的 page2.php：

```
<a href="page2.php?id=img1"><img src="btn1.png" id="img1"></a>
<a href="page2.php?id=img2"><img src="btn2.png" id="img2"></a> 
```

然后在您的 page2.php 中，使用您获得的 ID 来决定要显示的错误消息。

```
<?php
if($_GET['id']=='img1')
    $msg="Message 1";
else if($_GET['id']=='img2')
    $msg="Message 2";
?> 
```

# ace-editor - ace 编辑器光标行为不正确

> ID：15183031
> 
> 赞同：21
> 
> 时间：2013-03-03T06:20:51.300
> 
> 标签：ace-editor

我在我的项目中使用 Ace 编辑器。

CSS：

```
#editor {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background-color:white;
} 
```

JavaScript：

```
var editor = ace.edit("editor");
editor.setTheme("ace/theme/textmate");
editor.getSession().setMode("ace/mode/java"); 
```

`#editor`包含在一个相对定位的 div 中。

这个问题很难解释，但我会尝试。

每当我在 Ace 中键入文本时，行号会增加光标实际位置的空格，并且预期位置也会增加。

例如，当我输入“这是文本”时，它显示如下：

```
This is text           | 
```

现在，当我按下退格键时，它将删除“t”行上的最后一个字符，并显示：

```
This is tex           | 
```

当缩放设置为 120 时，我在 Google 上搜索过这个问题，发现 chrome 浏览器有一个类似的问题。但我正在使用 Firefox 浏览器。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-03T20:25:10.590

Ace 只能显示等宽字体，如果将编辑器的字体更改为非等宽字体，或者将不同的字体分配给编辑器的不同部分，则可能会发生您描述的问题。

（ubuntu 上有一个 firefox 插件，它将所有字体更改为非等宽字体）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-12T09:34:29.733

我的同样问题以这种方式解决：

```
 #editor *{ font-family : monospace !important;font-size: 16px !important;direction:ltr !important;text-align:left !important;} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-26T11:22:25.537

我正在使用 mediawiki + chrome 并遇到了同样的错误。

通过使用解决的问题

```
.ace_editor, .ace_editor *{
font-family: "Monaco", "Menlo", "Ubuntu Mono", "Droid Sans Mono", "Consolas", monospace !important;
font-size: 12px !important;
font-weight: 400 !important;
letter-spacing: 0 !important;
} 
```

在 Mediawiki:Common.css

# vbscript - Imacros 提取 url

> ID：15183032
> 
> 赞同：0
> 
> 时间：2013-03-03T06:21:15.310
> 
> 标签：vbscript, imacros

该脚本旨在循环播放收集其 URL 的 Youtube 视频。

```
Option Explicit

'initiate iMacros instance
Dim iim1, iret
set iim1 = CreateObject ("imacros")
iret = iim1.iimInit()

'navigate to youtube frontpage
Dim macro
macro = "CODE:"
macro = macro + "VERSION BUILD=7601105     " + vbNewLine
macro = macro + "TAB T=1     " + vbNewLine
macro = macro + "TAB CLOSEALLOTHERS     " + vbNewLine
macro = macro + "URL GOTO=http://www.youtube.com/     " + vbNewLine

iret = iim1.iimPlay(macro)

'loop through videos
Dim counter
counter = 0
do while not iret < 0
   counter = counter + 1
   macro = "CODE:"
   macro = macro + "TAG POS=R"+Cstr(counter)+" TYPE=IMG ATTR=CLASS:vimg120&&TITLE:*&&HREF:*&&NAME:*&&ALT:video&&SRC:*   " + vbNewLine
   macro = macro + "PROMPT Current<SP>URL:<SP>{{!URLCURRENT}}" + vbNewLine
   macro = macro + "BACK"
   iret = iim1.iimPlay(macro)
loop

'end
msgbox "End. We'll close the iMacros browser and exit the VBS script."

'close iMacros instance
iret = iim1.iimExit()

' exit script
Wscript.Quit( 
```

由于某种原因，它似乎不起作用。它返回： SyntaxError: unknown command: OPTION, line: 1 (Error code: -910) 请帮帮我。谢谢。

编辑：看起来我发现这个脚本必须作为 VBS 脚本（例如 File.vbs）运行，而不是直接在 Imacros 浏览器中运行。

但我仍然有一个问题。此脚本旨在保存在上述脚本中提取的 URL：

```
 SET !EXTRACT {{!URLCURRENT}}
SAVEAS TYPE=EXTRACT FOLDER=myFolder FILE=myFile.csv 
```

我应该在哪里准确插入这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:52:40.417

试试这个，让我知道它是否有效。到目前为止我还没有做 VBS，但这可以工作。

```
Option Explicit

'initiate iMacros instance
Dim iim1, iret
set iim1 = CreateObject ("imacros")
iret = iim1.iimInit()

'navigate to youtube frontpage
Dim macro
macro = "CODE:"
macro = macro + "VERSION BUILD=7601105     " + vbNewLine
macro = macro + "TAB T=1     " + vbNewLine
macro = macro + "TAB CLOSEALLOTHERS     " + vbNewLine
macro = macro + "URL GOTO=http://www.youtube.com/     " + vbNewLine

iret = iim1.iimPlay(macro)

'loop through videos
Dim counter
counter = 0
do while not iret < 0
   counter = counter + 1
   macro = "CODE:"
   macro = macro + "TAG POS=R"+Cstr(counter)+" TYPE=IMG ATTR=CLASS:vimg120&&TITLE:*&&HREF:*&&NAME:*&&ALT:video&&SRC:*   " + vbNewLine
   macro = macro + "PROMPT Current<SP>URL:<SP>{{!URLCURRENT}}" + vbNewLine
macro = macro + "SET !EXTRACT {{!URLCURRENT}}" + vbNewLine
macro = macro + "SAVEAS TYPE=EXTRACT FOLDER=myFolder FILE=myFile.csv" + vbNewLine
   macro = macro + "BACK"
   iret = iim1.iimPlay(macro)
loop

'end
msgbox "End. We'll close the iMacros browser and exit the VBS script."

'close iMacros instance
iret = iim1.iimExit()

' exit script
Wscript.Quit() 
```

# mysql - SQL 使用来自 select 的信息插入

> ID：15183038
> 
> 赞同：0
> 
> 时间：2013-03-03T06:22:03.043
> 
> 标签：mysql, sql, join, phpmyadmin

我运行此代码以获取用户发票号、地址等的列表。

```
SELECT A.id, A.userid, A.duedate, A.status, B.firstname, B.lastname, B.address1, B.city, B.postcode
FROM tblinvoices A
inner join tblclients B
on A.userid = B.id
WHERE duedate >= '2013-02-18'
AND duedate <= '2013-03-03'
AND A.status = 'Unpaid'; 
```

但我需要将一些信息插入到另一个表中。

现在我手动运行：

```
INSERT INTO `dbuser`.`tblnotes` (`id`, `userid`, `adminid`, `created`, `modified`, `note`, `sticky`) VALUES (NULL, '4585', '1', '2013-03-03 07:05:00', '', 'invoice by mail', '1'); 
```

如何实现自动化？因此，第一个命令列出的所有“用户 ID”都会简单地添加一个说明，说明它是通过邮件发送发票的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:23:17.703

使用`INSERT INTO...SELECT`语句，例如

```
INSERT  INTO dbuser.tblnotes (id, userid, adminid, created, modified, note, sticky)
SELECT  NULL, A.userid, A.userid, '2013-03-03 07:05:00', '', 'invoice by mail', '1' 
FROM    tblinvoices A
        inner join tblclients B
            on A.userid = B.id
WHERE   duedate BETWEEN '2013-02-18' AND '2013-03-03' 
        AND A.status = 'Unpaid'; 
```

`INSERT`注意：您必须按照子句中列的顺序对齐 select 语句的值。

# magento - Magento CE 1.7.0.2 - Authorize.net 上的多个交易并且没有记录到 Magento

> ID：15183040
> 
> 赞同：0
> 
> 时间：2013-03-03T06:22:21.860
> 
> 标签：magento, magento-1.7

最近，我们在进行了一次重大的重新设计后，从一个域迁移到了另一个域。重新设计期间未触及结帐代码。我们确实将数据库中的所有引用从旧域更改为新域。底线是 Magento 和 Authorize.net 的大多数交易都进行得很好。

但是，有些交易在 Authorize.net 上显示 2 次或更多次。这些交易显示 Magento 交易编号和支付金额，但是当您去查看 Magento 时，这些交易无处可寻。我什至检查了数据库，事务至少在它应该存在的地方不存在。由于下一个事务的增量高于重复的事​​务，因此必须在某个地方进行跟踪。

我尝试了这里所说的但不起作用：[http ://blog.iuvocommerce.com/magento-authorize-net-frustrating-error-11-a-duplicate-transaction-has-been-submitted/](http://blog.iuvocommerce.com/magento-authorize-net-frustrating-error-11-a-duplicate-transaction-has-been-submitted/)

我们也将 Magento 从 1.7.0.0 升级到了 1.7.0.2。我们也在使用 OneStepCheckout。但同样，我们之前没有遇到过这个问题。

**底线**

只是想知道是否有人遇到过这样的问题，如果有，他们做了什么来解决它？我在这里找不到与我们的问题相关的任何内容。我将继续查看代码测试，看看哪些事情可能会导致问题。

此致，

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:35:46.893

几天前我就发现了这个问题。出现问题是因为 dev 上的重新设计没有允许添加带有重复代码的促销规则的优惠券销售规则覆盖。我们需要允许重复优惠券代码的原因是以下示例场景：

1.  用户应用代码

2.  我们需要允许两个或多个不同的操作，例如：

    a) 给整个购物车 30% 的折扣

    b）如果 productx 也在购物车中，则使其免费

所以，生产环境有一些重复代码的规则，但重新设计的开发环境没有。请注意，我们有两个不同的开发环境。一个是针对旧设计的，因此我们可以对当时具有旧设计的产品进行任何更改，同时开发新的主题设计。然后，当我们将没有优惠券代码规则交易的新设计投入生产并且客户开始进行交易时，Magento 不会记录订单并且 Authorize.net 会显示它重复。

正在考虑删除这个问题，但我想我会回答的。

此致，

乔治

# java - 使用 while 循环和扫描器验证输入

> ID：15183046
> 
> 赞同：0
> 
> 时间：2013-03-03T06:23:50.363
> 
> 标签：java, input, while-loop, java.util.scanner, validating

**从指定范围（0,20）**内的用户获取有效整数并且是`int`. 如果他们输入无效的整数，则打印出错误。

我在想类似的事情：

```
 int choice = -1;
 while(!scanner.hasNextInt() || choice < 0 || choice > 20) {
       System.out.println("Error");
       scanner.next(); //clear the buffer
 }
 choice = scanner.nextInt(); 
```

这是正确的还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:35:39.750

你可以这样做：

```
Scanner sc = new Scanner(System.in);
int number;
do {
    System.out.println("Please enter a valid number: ");
    while (!sc.hasNextInt()) {
       System.out.println("Error. Please enter a valid number: ");
       sc.next(); 
    }
    number = sc.nextInt();
} while (!checkChoice(number));

private static boolean checkChoice(int choice){
    if (choice <MIN || choice > MAX) {     //Where MIN = 0 and MAX = 20
        System.out.print("Error. ");
        return false;
    }
    return true;
} 
```

这个程序会一直要求输入，直到它得到一个有效的输入。

*确保您了解程序的每一步。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T06:49:54.413

您在 while 循环中在哪里更改选择？如果它没有改变，你不能期望在你的 if 块的布尔条件中使用它。

您必须检查 Scanner 是否没有 int，如果*确实*有 int，请选择并单独检查。

伪代码：

```
set choice to -1
while choice still -1
  check if scanner has int available
    if so, get next int from scanner and put into temp value
    check temp value in bounds
    if so, set choice else error
  else error message and get next scanner token and discard
done while 
```

# windows - 西班牙语、法语和英语的文档、图片、音乐的默认配置文件位置/路径是什么？

> ID：15183047
> 
> 赞同：1
> 
> 时间：2013-03-03T06:24:00.660
> 
> 标签：windows, windows-7, windows-xp, profiles

我正在处理一个可以读取使用绝对路径而不是相对路径的文件的程序。问题是，这可能是法语、英语和西班牙语。我正在寻找的是用户配置文件目录设置的定义，如英语、西班牙语和法语。

比如英文比较东方，有文档：XP:c:\Documents and Settings\user\my documents c:\Documents and Settings\user\my documents\my Pictures 等等

Win7/8: c:\users\user\pictures c:\users\user\music c:\users\user\documents 等等

但是，对于西班牙语，我找不到文档，例如，我认为它是 XP: c:\configuraciones y documentos\user\mis documentos c:\configuraciones y documentos\user\mis documentos\mis imagenes c:\configuraciones y documentos\user\mis documentos\mis 图片 c:\configuraciones y documentos\user\mis documentos\mis fotos

7/8: c:\users\user\documentos c:\users\user\fotos c:\users\user\imagenes c:\users\user\imágenes

95/98/ME/NT/2000/etc - 他们甚至在任何地方都有标准的音乐、文件和图片位置吗？？？？

粗略地说，我在 google 和 bing 上都看到了这些，但没有什么看起来像坚定的“就是这样”，我在法语上几乎看不到任何东西。我搜索了 MSDN，但只看到英文的任何内容。

无论如何，我正在做的是对我在这些文件中读取的路径名的一部分进行替换，但是，除非我知道路径应该是什么，否则我无法替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:22:47.620

好吧，我能想到的最好的，虽然我找不到关于它的真正文档。

英语：Windows 95：C:\我的文档

Windows 98、Windows ME：C:\我的文档 C:\我的图片 C:\我的音乐

Windows NT、Windows 2000、Windows 2003：未知

Windows XP、Vista：C:\Documents and Settings\用户名\我的文档 C:\Documents and Settings\用户名\我的文档\我的图片 C:\Documents and Settings\用户名\我的文档\我的音乐

Windows 7/8 c:\users\username\My Documents c:\users\username\My Music c:\users\username\My Pictures

西班牙语：Windows 95：C:\Mis Documentos

Windows 98、Windows ME：C:\Mi Documentos C:\Mi Imagenes 或 C:\Mis Imágenes C:\Mi Musica

Windows NT、Windows 2000、Windows 2003：未知

Windows XP、Vista：C:\Documents and Settings\username\Mis Documentos C:\Documents and Settings\username\Mis Documentos\Mis Imagenes 或 C:\Documents and Settings\username\Mis Documentos\Mis Imágenes C:\Documents and设置\用户名\Mi Documentos\Mi Musica

或者它可以是 C:\documentos y configuraciones 或 c:\configuraciones y documentos

Windows 7/8 c:\users\username\Mis Documentos c:\users\username\Mi Musica c:\users\username\Mis Imagenes 或 c:\users\username\Mis Imagenes

或者它可能是 c:\usuarios\users....

法语：目前未知

# javascript - 如何在 V8 中将对象传递给 JavaScript 回调

> ID：15183051
> 
> 赞同：5
> 
> 时间：2013-03-03T06:24:20.410
> 
> 标签：javascript, c++, node.js, v8

我正在开发一个 Node 模块，并试图将一个类的实例`ObjectWrap`作为参数传递给 JavaScript 回调。

在其他地方，我已经能够成功地将 JavaScript 对象解包到同一个类，使用：

```
 GitCommit *commit = ObjectWrap::Unwrap<GitCommit>(args[0]->ToObject()); 
```

我该如何做相反的事情？我想将一个实例传递`GitCommit`给 JavaScript 回调，例如：

```
Local<Value> argv[] = {
  // Error code
  Local<Value>::New(Integer::New(0)),
  // The commit
  commit // Instance of GitCommit : ObjectWrap
};

// Both error code and the commit are passed, JS equiv: callback(error, commit)    
ar->callback->Call(Context::GetCurrent()->Global(), 1, argv); 
```

这可能吗？如果是这样，请给我一个例子，或相关文档的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T13:21:06.070

所以你正在编写一个节点插件。尝试：

```
Handle<Value> argv[] = {
    // Error code
    Integer::New(0),
    // The commit
    commit->handle_ // Instance of GitCommit : ObjectWrap
};

// Both error code and the commit are passed, JS equiv: callback(error, commit)    
ar->callback->Call(Context::GetCurrent()->Global(), 1, argv); 
```

# android - 如何使用cursorloader查询android中的歌曲列表（不包括特定文件夹）？

> ID：15183053
> 
> 赞同：0
> 
> 时间：2013-03-03T06:24:40.083
> 
> 标签：android

以下是我从 android 设备中获取所有歌曲的代码：

```
String[] proj = { MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.SIZE };
        musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,proj, null, null, null);

music_column_index=musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE); 
```

上面给了我设备中任何文件夹中所有歌曲的列表，但是我不想从特定文件夹（比如music_folder）中获取歌曲。有人可以帮助修改查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:38:02.920

尝试这个：

```
String[] proj = { MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DATA,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.SIZE };
String selection = MediaStore.Audio.Media.DATA +" NOT LIKE '%/music_folder/%'";
        musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,proj, selection, null, null);

music_column_index=musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE); 
```

# c# - 基于规则（数据驱动或基于配置）的条件评估和计算

> ID：15183057
> 
> 赞同：-2
> 
> 时间：2013-03-03T06:25:12.177
> 
> 标签：c#, asp.net, winforms

我正在为一家小型杂货店开发一个折扣计算器，他们在销售柜台上显示每周的优惠。我需要开发一个可以通过数据库或配置文件评估报价条件的模块。

所需规则：

> **买 2 件送 3 等值免费**-- 商店账单将显示
> 
> ($50 X 3) = $150 Gross ------ 减去 $50 ------ $100 Net Payable -------- (**适用的优惠代码**)
> 
> **购买超过*$xxx*金额 ***并获得**y** % 折扣 -- 商店账单将显示
> 
> ($15 X 10) = $150 Gross ------ 减去 $15 ------ $135 净应付（**适用的优惠代码**）
> 
> **购买完整套件并获得一些固定折扣 *** -- 商店账单将显示
> 
> (Moneysaver pack blah blah) = $250 Gross ------ 减去 $20 ------ $230 Net Payable ( **Applicable Offer Code** )

我尝试使用 NCalc - Mathematical Expressions Evaluator for .NET (ncalc.codeplex.com)，但是它对字符串中的数学表达式很有用，我没有找到用我的规则集对其进行分支的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:32:54.620

您看过 Windows 工作流规则集引擎吗？这包括一个编辑器以及在运行时执行规则（在数据库中保存为 xml）的能力。

要阅读有关此的更多信息：

[使用 Windows 工作流的快速而肮脏的规则引擎（第 1 部分）](http://www.sanderstechnology.com/?p=10166)

# ant - 尽管满足工作要求，Cobertura 仍报告 0% 的覆盖率

> ID：15183060
> 
> 赞同：3
> 
> 时间：2013-03-03T06:25:40.893
> 
> 标签：ant, code-coverage, junit4, cobertura

是的，这是另一个 0% 覆盖率的东西。我已检查并确认以下内容：

[1) ...根据http://cobertura.sourceforge.net/faq.html](http://cobertura.sourceforge.net/faq.html)，该程序确实正在生成适当的 cobertura.ser 文件，并且该文件和 Instrumented 目录的内容已经消失。

2) ...“instrumented”是 Cobertura 测试中确定的第一个类路径。

3) ...这些行确实正在我的测试套件中进行测试，并且...

4) ...确实正在创建并写入“instrumented”目录——我看到了这种情况。

奇怪的是，我注意到 Ant 生成的报告只不过是一系列消息，内容如下：

```
Testcase: pluralizeIt[0] took 0.004 sec
    Caused an ERROR
Instruction type does not match stack map in method StringUtil.main([Ljava/lang/String;)V at offset 50
java.lang.VerifyError: Instruction type does not match stack map in method StringUtil.main([Ljava/lang/String;)V at offset 50
    at PluralTest.pluralizeIt(PluralTest.java:55) 
```

但是，如果我注释掉所有 Cobertura 引用和目标，测试运行良好，并且 Ant 报告在成功和失败方面给了我 100% 的预期。

我的 build.xml 文件在下面……有什么想法吗？？？谢谢....

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TestPlurazliation" default="coverage" basedir=".">
    <property name="src" location="src" />
    <property name="build" location="bin" />
    <property name="cobertura" location="/Users/Dauber/Desktop/cobertura-1.9.4.1" />
    <property name="instrumented" location="instrumented" />
    <property name="coverage.xml" location="coverage-xml" />
    <property name="coverage.html" location="coverage-html" />
    <path id="cobertura.classpath">
        <fileset dir="${cobertura}">
            <include name="cobertura.jar" />
            <include name="lib/**/*.jar" />
        </fileset>
    </path>

    <taskdef classpathref="cobertura.classpath" resource="tasks.properties" />

    <target name="init">
        <tstamp />
        <mkdir dir="${build}" />
    </target>

    <target name="compile" depends="init">
        <javac srcdir="/Volumes/Junk/Java projects/SE433/TestingPluralization/src" includeantruntime="false" debug="on" destdir="${build}">
            <classpath location="/Users/Dauber/Desktop/junit-4.10.jar" />
        </javac>
    </target>

    <target name="PluralizationTest" depends="compile">
        <junit printsummary="yes" fork="yes" haltonfailure="yes">
            <classpath location="/Users/Dauber/Desktop/junit-4.10.jar" />
            <classpath location="${build}" />
            <formatter type="plain" />
            <test name="PluralTest" />
        </junit>
    </target>

    <target name="instrument" depends="init,compile">
        <delete file="cobertura.ser" />
        <delete dir="${instrumented}" />
        <cobertura-instrument todir="${instrumented}">
            <ignore regex="org.apache.log4j.*" />
            <fileset dir="bin">
                <include name="**/*.class" />
                <exclude name="**/*Test*.class" />
            </fileset>
        </cobertura-instrument>
    </target>

    <target name="PluralizationTest2" depends="init,compile">
        <junit fork="yes">
            <classpath location="${instrumented}" />
            <classpath location="${build}" />
            <classpath location="/Users/Dauber/Desktop/junit-4.10.jar" />
            <classpath refid="cobertura.classpath" />
            <formatter type="plain" />
            <test name="PluralTest" />
        </junit>
    </target>

    <target name="coverage-report-xml">
        <cobertura-report srcdir="${src}" destdir="${coverage.xml}" format="xml" />
    </target>

    <target name="coverage-report-html">
        <cobertura-report srcdir="${src}" destdir="${coverage.html}"/>
    </target>

    <target name="coverage" depends="compile,instrument,PluralizationTest2,coverage-report-xml,coverage-report-html"  />

    <target name="clean" description="clean up" >
        <delete dir="${build}"/>
        <delete dir="${instrumented}"/>
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-04T13:42:09.307

如果您使用的是 JDK 7，则需要添加 UseSplitVerifier JVM 参数：

```
<jvmarg value="-XX:-UseSplitVerifier"/> 
```

（注意：我将其添加为评论中的答案，以便其他人可以轻松找到解决方案。）

# html - 每个浏览器都支持所有 unicode 吗？

> ID：15183061
> 
> 赞同：14
> 
> 时间：2013-03-03T06:25:41.237
> 
> 标签：html, css, unicode, cross-browser, webfonts

我想通过使用 Unicode 而不是小图像图标来减少 HTTP 请求的数量。

我想使用的图标包括 ✔ ,► 等。

有关所有必需字符的完整列表，请参见[此处](http://en.wikipedia.org/wiki/List_of_Unicode_characters)

*   所有浏览器都默认支持这些字符吗？
*   如果默认不支持，我可以添加对这些字符的支持吗？
*   以跨浏览器的方式将这些字符添加到网页需要哪些 CSS 和 HTML？

另外，我正在制作一个使用以下语言的 Unicode 网站：

```
यो भाषामा म वेबसाईट बनाउँदै छु 
```

*   是否有可能在每个浏览器和每个操作系统上都可以看到这种语言？
*   如果可以提供这种支持，那么需要哪些 CSS 和 HTML 代码？
*   我需要为此包含一个网络字体吗？
*   我可以使用哪些网络字体以及如何以跨浏览器的方式添加它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T07:05:21.537

这是*字体*的问题，而不是浏览器支持的问题。除非浏览器本身存在严重错误，只要用户安装了带有您尝试使用的字符的字体，它就应该毫无问题地显示。

现在，每个通用操作系统中内置的所有字体中的所有字形的交集完全是一个不同的问题，而且有点难以回答。

对于小图标，最可靠的解决方案是使用 CSS[`@font-face`](https://developer.mozilla.org/en-US/docs/CSS/@font-face)规则要求浏览器下载特定字体。然后，您将确定用户安装了适当的字体。甚至还有一些专门为此用途设计的字体，内置了额外的图标：“ [Font Awesome](http://fortawesome.github.com/Font-Awesome/) ”就是一个众所周知的例子。

就外文而言：大概你的听众是能*读懂*剧本的人吧？在那种情况下，他们几乎肯定已经支持字体了——他们中的许多人的整个界面可能都是同一种语言！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T06:37:59.007

比较常见的字符大家都可以看到。但是亚洲字体往往很麻烦。据我所知，并非每个操作系统上的每个浏览器都可以查看该字体。我在 Chrome、Opera 和 IE 上的 Windows 7 Ultimate 计算机可以查看这些字符。我的 4.1 Android 手机在默认浏览器上也可以。

我无法看到该列表中的每个角色，但我可以看到其中的绝大多数。在“杂项数学符号-A”之后我几乎看不到任何东西

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T11:50:38.137

没有浏览器支持所有的 Unicode，或者必须这样做。规范不要求正确显示所有字符或其任何特定子集。这样做几乎是不可能的，因为没有一种字体可以覆盖所有的 Unicode，即使是常用字体的联合也可以做到这一点。

因此，应该根据对特定字符的字体支持来重新表述这个问题。此外，您应该使用`font-family`合理努力使用合适字体的声明。原因是浏览器在字体回退方面仍然存在困难：如果声明的字体或浏览器默认字体不包含特定字符，它们并不总是自动找到合适的备用字体。

使用可下载字体（网络字体）可能是答案的一部分，但如果您只想使用少数图标，这可能会有点过分。对于用梵文编写的文本，这可能是最好的方法；唯一支持它的常用字体是 Arial Unicode MS，没有安装 Microsoft Office 的人可能还没有安装它。[因此，请考虑使用例如来自 GNU Freefont](http://savannah.gnu.org/projects/freefont/)的FreeSans 或FreeSerif作为可通过`@font-face`.

有关该主题的一般信息：[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

# svn - Hudson 没有从存储库中获取最新代码

> ID：15183064
> 
> 赞同：0
> 
> 时间：2013-03-03T06:26:17.850
> 
> 标签：svn, hudson, nant

我正在使用 Hudson 构建我的 .NET 项目，使用 nAnt。我只配置了 NAnt 可执行路径和 SVN 存储库路径，但是当我尝试通过 Hudson 构建时，它总是说构建成功！

虽然它显示文件中有新的更改但没有显示错误为什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:14:37.470

检查构建服务器上的数据/时间设置是否与 svn 服务器一致。

# linux - mtime是修改过程的开始时间还是结束时间

> ID：15183067
> 
> 赞同：1
> 
> 时间：2013-03-03T06:26:52.973
> 
> 标签：linux, filesystems

修改过程开始（打开并写入文件）或修改过程结束（关闭文件）时是否更新 mtime？

我在这个[链接](https://stackoverflow.com/questions/6478622/xfs-how-to-not-modify-mtime-when-writing-to-file)上找到了一些东西。

`See man 2 stat for the semantics of mtime and ctime. In practice, the mtime and ctime will be updated in the in-memory copy of the inode and flushed out to disk asynchronously.`

我认为 inode 可能不止一次被刷新。如果是真的。这是否意味着在修改过程中mtime可能会多次更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:11:48.900

从概念上讲，每次修改都发生在特定的时间。这`mtime`是最近一次此类事件的时间。

如果您愿意，您可以将对文件的大量写入视为将其分解为一系列单独的写入，每次写入一个字节（或位，如果您愿意！）。每个单字节写入都是瞬时发生的。所以在耗时较长的大写之后，修改时间应该反映大写最后一部分完成的时间，也就是大写结束的时间。

那是常规写入（`write()`, `pwrite()`,`writev()`等...）当文件被映射到内存（使用`mmap()`）并且与文件映射关联的内存地址之一被更新时，应该发生什么并不那么清楚。但在这种情况下，标准有答案。来自 Linux 的`mmap()`手册页：“使用 PROT_WRITE 和 MAP_SHARED 映射的文件的 st_ctime 和 st_mtime 字段将在写入映射区域后更新，并且在随后的带有 MS_SYNC 或 MS_ASYNC 标志的 msync(2) 之前更新，如果发生的话。”

顺便说一句，打开文件不算作修改（即使您打开文件进行写入）。关闭文件也不算作修改。只有实际写入它。

# regex - 包含 ${reg.xx.xx 的匹配字符串的正则表达式。. . .}

> ID：15183068
> 
> 赞同：1
> 
> 时间：2013-03-03T06:26:58.097
> 
> 标签：regex, string-matching

有人可以为我提供一个匹配词的正则表达式，比如`${reg.employee.name}`或`${reg.gihan.anuruddha}`等等。在这里，`${}`模式里面的词总是以 reg 开头。期间之后的其余字数可能会有所不同。有时你可以有 3 个单词`${reg.emp.name}`，有时`${reg.tech.emp.name}`从 period(.) 划分的字数可能会因`${reg.`部分而异。我希望我的问题很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:47:07.713

这应该与您的字符串匹配：

```
\$\{reg(\.[a-z]+)*\} 
```

如果字面上是 3 或 4 组（包括“reg”）：

```
\$\{reg(\.[a-z]+){2,3}\} 
```

# html - div 宽度 100% +10px：相对于父级？

> ID：15183069
> 
> 赞同：7
> 
> 时间：2013-03-03T06:27:07.573
> 
> 标签：html, css, menu, width, css-position

我有一个带有 display:table/table-cell:auto 布局的 ul/li 菜单，拉伸以填充容器并在菜单项之间分配水平空间。我必须将一个额外的 UI 元素与最后一个菜单项对齐。我可以通过将该元素添加为最后一个 li 元素的子元素并使其 100% 宽来实现这一点。

但是，我需要将此 UI 元素（语言选择器）部分定位在主要内容之外，因此我将其定位为相对右侧：-10px。但副作用是，与菜单元素相比，选择器的左边缘向右移动。通常我会将选择器 div 的宽度增加 10px，但因为它是 100%，所以我不能这样做。而父 li 的宽度由其文本内容决定。

有没有办法使用纯 css 来解决这个问题？我不能在选择器上添加填充，因为我需要它的子内容来填充整个 div。

```
<div class="menu">
    <ul>
        <li><a href="#">first</a>
        </li>
        <li><a href="#">second</a>
            <div id="selector">
                <a href="#">EN</a>
                <a href="#">FR</a>
            </div>
        </li>
    </ul>
</div> 
```

这是一个工作示例：http: [//jsfiddle.net/hJXng/13/](http://jsfiddle.net/hJXng/13/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T09:02:58.400

根据您想要支持的浏览器，一个简单的选项是使用[calc](https://developer.mozilla.org/en-US/docs/CSS/calc)：

```
width: calc(100% + 10px); 
```

另请参阅：[我可以使用`calc()`](http://caniuse.com/#feat=calc)
示例：http: [//jsfiddle.net/hJXng/19/](http://jsfiddle.net/hJXng/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:35:05.670

我不确定 xpy 的答案去了哪里，但他/她的评论终于让我开心了。必须添加两个包装器 div，因为带有“display: table”的 div 没有填充 Chrome 中的填充，而“display: block”可以。因此，在另一个填充的 div 中绝对定位 100% 宽的块 div 确实有效。

```
#selector-full {
    width: 100%;
    position: absolute;
    display: block;
    right: 0;
} 
```

小提琴：http: [//jsfiddle.net/cPDd6/4/](http://jsfiddle.net/cPDd6/4/)

# sql - 所需的最新事务总和 SQL 查询

> ID：15183072
> 
> 赞同：0
> 
> 时间：2013-03-03T06:27:22.283
> 
> 标签：sql, sql-server, sql-server-2008

我很难想出一个查询。我对 SQL 还很陌生，所以对于老手来说，这个解决方案可能看起来很明显，但我已经诚实地尝试过了，再也想不起来了。我有一个名为 Transactions 的表，其中包含相关列：ID (int)、CustomerID (int)、Amount (int) 和 TransactionDate (date)。我想要所有客户最近交易的总和。TransactionDate 可以手动输入/更改，因此只有在该最新日期有多个交易时，ID 才会用作辅助排序参数。

在变得沮丧之前我有什么：

```
SUM (
    SELECT  TOP 1 Amount
    FROM    Transactions
    GROUP   BY CustomerID
    ORDER   BY TransactionDate DESC, ID DESC
) 
```

我知道为什么它是错误的，它可能甚至不接近我需要的，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T06:34:44.520

尝试这个：

```
WITH CTE
AS
(
  SELECT Amount,
    ROW_NUMBER() OVER(PARTITION BY CustomerID
                      ORDER BY TransactionDate DESC, ID DESC) AS RN
  FROM Transactions
)
SELECT SUM(Amount)
FROM CTE
WHERE RN = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:31:58.150

尝试这个

```
SELECT id, CustomerID, Amount
FROM (
    SELECT 
        id, CustomerID, Amount
        ,rank() over(Partition BY CustomerID ORDER BY TransactionDate,id DESC ) AS Rank 
    from Transactions
) AS a
WHERE a.Rank<=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T06:32:12.373

```
DECLARE @FromDate DATETIME, @ToDate DATETIME
SELECT @FromDate = '1/1/2009', @ToDate = '1/1/2010'

SELECT SUM(Amount)
FROM    Transactions
WHERE TransactionDate BETWEEN @FromDate AND @ToDate
GROUP   BY CustomerID
ORDER   BY TransactionDate DESC, ID DESC 
```

这可能会帮助你

# javascript - 可以关闭信息窗口

> ID：15183073
> 
> 赞同：0
> 
> 时间：2013-03-03T06:27:23.607
> 
> 标签：javascript, google-maps-api-3

我无法关闭 google maps Api 中的 infoWindow。任何人都可以帮助我。我有 5 个标记，每个标记都包含一个 svg 文件。我还想调整信息窗口的高度，我不知道该怎么做？

```
var infowindow = new google.maps.InfoWindow({
content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">',
maxWidth: 300,
});

var infowindow1 = new google.maps.InfoWindow({
content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">',
maxWidth: 300,
});

var infowindow2 = new google.maps.InfoWindow({
content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">',
maxWidth: 300,
});

 var infowindow3 = new google.maps.InfoWindow({
content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">',
maxWidth: 300,
});

 var infowindow4 = new google.maps.InfoWindow({
content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">',
maxWidth: 300,
});

 var infowindow5 = new google.maps.InfoWindow({
content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">',
maxWidth: 300,
});

// event handlers for clicking
google.maps.event.addListener(marker, 'click', function(){
    infowindow.open(googleMap,marker);
    infowindow.close();
});   

google.maps.event.addListener(marker1, 'click', function(){
    infowindow1.open(googleMap,marker1);
    infowindow1.close();
});   

google.maps.event.addListener(marker2, 'click', function(){
    infowindow2.open(googleMap,marker2);
    infowindow2.close();        
});   

google.maps.event.addListener(marker3, 'click', function(){
    infowindow3.open(googleMap,marker3);
    infowindow3.close();    
});   

google.maps.event.addListener(marker4, 'click', function(){
    infowindow4.open(googleMap,marker4);
    infowindow4.close();        
});   

google.maps.event.addListener(marker5, 'click', function(){
    infowindow5.open(googleMap,marker5);
    infowindow5.close();
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:33:55.007

使用这个例子：

```
var bizInfowindow = new google.maps.InfoWindow();
var html = "somecontent html form";
bizInfowindow.close();
bizInfowindow.close();
bizInfowindow.setContent(html);  
bizInfowindow.open(map, marker); 
```

看看双关

# javascript - 从一个大文件逐行复制到另一个？

> ID：15183077
> 
> 赞同：0
> 
> 时间：2013-03-03T06:28:15.650
> 
> 标签：javascript, node.js

我想用 Node.js 逐行处理一个大文件。它的大小为 100MB，有 500,000 行。我找到了这个解决方案来读取输入文件中的行

[javascript - node.js：将文本文件读入数组。（每一行都是数组中的一个项目。） - VoidCC](https://stackoverflow.com/questions/6831918/node-js-read-a-text-file-into-an-array-each-line-an-item-in-the-array)

现在是关于将每一行写入一个新的输出文件，所以我尝试

```
function readLines(input, func)
{
    var remaining = "";

    input.on("data", function(data)
    {
        remaining += data;
        var index = remaining.indexOf("\n");
        var last = 0;
        while (index > -1)
        {
            var line = remaining.substring(last, index);
            last = index + 1;
            func(line);
            index = remaining.indexOf("\n", last);
        }

        remaining = remaining.substring(last);
    });

    input.on("end", function()
    {
        if (remaining.length > 0)
        {
            func(remaining);
        }
    });
}

function write(data)
{
    var written = output.write(data);
}

var fs = require("fs");
var input = fs.createReadStream("input.txt");
var output = fs.createWriteStream("output.txt", {flags: "w"});
readLines(input, write); 
```

但是脚本真的很慢，完全处理输入文件需要1个多小时，并且消耗大量CPU和RAM（CPU数量为25，内存使用量高达200MB）。那么有人可以告诉我是否有任何方法可以优化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:31:29.320

您面临的问题是您不断地 1) 附加到字符串和 2) 切片字符串。这两种操作都可能导致分配新字符串并复制旧数据，这很慢。旧的字符串不再被引用，因此最终被垃圾收集器释放，但这需要时间，因此会占用大量内存。

当然有更简单的方法可以做到这一点，但我假设你想学习如何使用 Node.JS 中的流来做到这一点。在这种情况下，您可以用来替换大量附加和切片的一般技术是将数据累积在字符串数组中。您可以稍后将字符串数组加入单个数组，`mystring.join("")`然后将其转换`["hello, ", "world"]`为`"hello, world"`. 创建一个字符串数组然后一次将它们全部加入一个大字符串比创建字符串我将每个字符串附加到最后一个要快得多。

希望对您有所帮助，并且足以让您解决此问题并从中学到一些东西！

# php - 倒数计时器显示 .php 文件

> ID：15183079
> 
> 赞同：0
> 
> 时间：2013-03-03T06:28:28.583
> 
> 标签：php, countdown

我正在使用倒数计时器在时钟降至 0 时显示链接。有没有办法可以在时钟达到 0 时调用 .php 文件而不是显示链接？

这是我正在使用的代码。

```
<!--START COUNTDOWN TIMER SCRIPT-->
<br />
<script type="text/javascript">                          
    window.onload = function()
    {
        countDown('my_div1', '<a href="cdtl.html">Hello 1</a>', 720); 
    }

    function countDown(elID, output, seconds)
    {
         var elem = document.getElementById(elID),
             start = new Date().getTime(), end = start+seconds*1000,
             timer = setInterval(function() {

             var now = new Date().getTime(), timeleft = end-now, timeparts;

             if( timeleft < 0) {
                 elem.innerHTML = output;
                 clearInterval(timer);
             }
             else {
                 timeparts = [Math.floor(timeleft/60000),Math.floor(timeleft/1000)%60];
                 if( timeparts[1] < 10) timeparts[1] = "0"+timeparts[1];
                 elem.innerHTML = "Time left: "+timeparts[0]+":"+timeparts[1];
             }
         } ,250); // the lower this number, the more accurate the timer. 250 recommended 
    }
</script>

<center>
    <div id="my_div1"></div>
</center>

<!--END COUNTDOWN TIMER SCRIPT--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:38:23.817

如果你使用 jQuery，你可以使用

**首先**，包括 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>\ 
```

**然后**，每当您的计数器完成时，调用 jQuery 的 ajax 函数之一：
1) [`$('#idOfContainer').load("/path/to/your/file")`](http://api.jquery.com/load/)：在指定容器内动态嵌入页面。用于`$.load("path")`调用页面。

2) [`$('#idOfContainer').get("/path/to/your/file")`](http://api.jquery.com/get/): 使用 HTTP GET 请求调用文件。然后结果显示在指定的容器内。用于`$.get("path")`调用页面。

3) [`$('#idOfContainer').post("/path/to/your/file")`](http://api.jquery.com/get/)：使用 HTTP POST 请求调用文件。然后结果显示在指定的容器内。用于`$.post("path")`调用页面。

单击任何上述链接以获取有关每个命令的更多详细信息。
**祝你好运！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:38:24.470

## 更新

改变`elem.innerHTML = output;`

至

`document.location.href = output;`

然后改变

`countDown('my_div1', '<a href="cdtl.html">Hello 1</a>', 720);`

至

`countDown('my_div1', 'cdtl.html', 720);`

# java - 无法在 Java AWT 中重新定位一个文本文件

> ID：15183083
> 
> 赞同：0
> 
> 时间：2013-03-03T06:29:46.123
> 
> 标签：java, layout, button, frame, textfield

我正在尝试使用 Java AWT 制作登录表单。我成功了。但是当我点击按钮时，除了“Pin”之外的所有文件都显示在正确的位置。“Pin”显示在与“Name”相同的维度上。我无法重新定位“Pin”文本字段。为什么？这是代码：

```
 import java.awt.*;
import java.awt.event.*;
import java.applet.*;
public class Loginform extends Frame implements ActionListener
{ 
  Label l1=new Label("Name");
  Label l2=new Label("Street");
  Label l3=new Label("City");
  Label l4=new Label("Pin");
  Label l5=new Label("  ");
  Label l6=new Label("  ");
  Label l7=new Label("   ");
  Label l8=new Label("    ");
  TextField t1=new TextField();
  TextField t2=new TextField();
  TextField t3=new TextField();
  TextField t4=new TextField();
  Button b= new Button("Submit");
  public Loginform()
  { add(l1);
    add(t1);
    add(l2);
    add(t2);
    add(l3);
    add(t3);
    add(l4);
    add(t4);
    add(b);
    add(l5);
    add(l6);
    add(l7);
    add(l8);
    l1.setBounds(20,45,70,20);
    t1.setBounds(180,45,200,20);
    l2.setBounds(20,95,70,20);
    t2.setBounds(180,95,200,20);

    l3.setBounds(20,135,70,20);
    t3.setBounds(180,135,200,20);
    l4.setBounds(20,175,70,20);
    t4.setBounds(180,175,200,20);

    l5.setBounds(20,300,70,20);
    l6.setBounds(20,320,70,20);
    l7.setBounds(20,340,70,20);
    l8.setBounds(20,360,70,20);

    b.setBounds(410,245,70,20);
    b.addActionListener(this);

    addWindowListener(new mwa());
  }
  public void actionPerformed(ActionEvent e)
  { 
      l5.setText("Name: "+t1.getText());
      l6.setText("Street: "+t2.getText());
      l7.setText("City: "+t3.getText());
      l8.setText("Pin: "+t4.getText());

  }
  public static void main(String s[])
  {
     Loginform l=new Loginform();
    l.setSize(new Dimension(600,600));
    l.setTitle("REGISTRATION");
    l.setVisible(true);
  }
}
class mwa extends WindowAdapter
{ public mwa(){}
  public void windowClosing(WindowEvent e)
  { System.exit(0);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:36:07.703

您的大多数标签都没有显示在您的 GUI 上，因为您不尊重保存它们的容器的默认布局管理器。由于您要添加到默认使用 BorderLayout 的容器（框架），因此只会显示最后添加的标签。为了证明确实如此，请将您的 actionPerformed 更改为：

```
public void actionPerformed(ActionEvent e) {
  l5.setText("Name: " + t1.getText());
  l6.setText("Street: " + t2.getText());
  l7.setText("City: " + t3.getText());
  l8.setText("Pin: " + t4.getText());

  System.out.println("l5: " + l5.getBounds());
  System.out.println("l6: " + l6.getBounds());
  System.out.println("l7: " + l7.getBounds());
  System.out.println("l8: " + l8.getBounds());

} 
```

你会看到：

```
l5: java.awt.Rectangle[x=0,y=0,width=0,height=0]
l6: java.awt.Rectangle[x=0,y=0,width=0,height=0]
l7: java.awt.Rectangle[x=0,y=0,width=0,height=0]
l8: java.awt.Rectangle[x=8,y=30,width=584,height=562] 
```

要使此代码起作用，必须显示标签。我建议：

*   避免设置任何组件的边界或位置或位置。
*   阅读有关如何使用布局管理器的教程，并使用它们来帮助您创建易于显示且灵活且易于修改的 GUI。
*   避免使用 AWT 并改用 Swing，因为它更加健壮和强大。
*   将您的变量名称更改为描述其用途的名称，使您的代码能够自我注释。

# python - 如何在 python 中使用两个列表创建字典？

> ID：15183084
> 
> 赞同：18
> 
> 时间：2013-03-03T06:30:48.620
> 
> 标签：python, list, dictionary

```
x = ['1', '2', '3', '4']
y = [[1,0],[2,0],[3,0],[4,]] 
```

我想创建一个字典，以便 x 和 y 值对应如下：

```
1: [1,0], 2: [2,0] 
```

等等

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-03T06:35:15.070

您可以使用 zip 功能： `dict(zip(x, y))`

```
>>> x = ['1', '2', '3', '4']
... y = [[1,0],[2,0],[3,0],[4,]]
>>> dict(zip(x, y))
0: {'1': [1, 0], '2': [2, 0], '3': [3, 0], '4': [4]} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T06:35:40.973

在 python > 2.7 中，您可以使用 dict 理解：

```
>>> x = ['1', '2', '3', '4']
>>> y = [[1,0],[2,0],[3,0],[4,]]
>>> mydict = {key:value for key, value in zip(x,y)}
>>> mydict
{'1': [1, 0], '3': [3, 0], '2': [2, 0], '4': [4]}
>>> 
```

还是已经给出了最好的答案

> 字典（zip（x，y））

在 python <= 2.7`itertools.izip`中，您可以使用大列表作为`izip`返回迭代器。对于像您这样的小型列表，使用`izip`将是矫枉过正。但是请注意，在 python 3 中`itertools.izip`消失了。在 python 3 中，`zip`内置函数已经返回一个迭代器，因此`izip`不再需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T06:35:51.980

快速简单的答案是`dict(zip(x,y))`，如果您对键是字符串感到满意。否则，使用`dict(zip(map(int,x),y))`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T06:35:38.673

您可以使用[`itertools.izip`](http://docs.python.org/2/library/itertools.html#itertools.izip)来完成此操作。

```
from itertools import izip
x = ['1', '2', '3', '4']
y = [[1,0],[2,0],[3,0],[4,]]
dict(izip(x, y)) 
```

如果您的 Python 风格是 3.x，那么您可以使用[`itertools.zip_longest`](http://docs.python.org/dev/library/itertools.html?highlight=itertools#itertools.zip_longest)它来做同样的事情。

```
from itertools import zip_longest
x = ['1', '2', '3', '4']
y = [[1,0],[2,0],[3,0],[4,]]
dict(zip_longest(x, y)) 
```

# symfony - Symfony 2 无法覆盖模板 FOSUserBundle

> ID：15183087
> 
> 赞同：2
> 
> 时间：2013-03-03T06:31:19.147
> 
> 标签：symfony, overriding, twig, fosuserbundle

我已经在我的项目中实现了 FOSUser。我成功地重载了表格。

只有当我想覆盖模板时，它才起作用。但我尊重 FOSUser 架构的观点。

你知道什么可能是一个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:10:06.667

看一下文档：

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md)

基本上有两种方法可以实现您的目标。首先 - 更简单，只是将新模板放入您的应用程序/资源中，例如：

```
app/Resources/FOSUserBundle/views/Profile/layout.html.twig 
```

第二种方式是：

> (...) 您还可以创建一个定义为 FOSUserBundle 子级的包，并将新模板放置在与 FOSUserBundle 相同的位置。

# facebook - PHP Post 在多个 facebook 墙上

> ID：15183088
> 
> 赞同：1
> 
> 时间：2013-03-03T06:31:46.333
> 
> 标签：facebook, post

好吧，我正在开发一个与 Facebook 用户页面交互的在线 Web 应用程序。在我的应用程序中，用户将加入并添加他们的 Facebook 页面，然后如果有一些更新会及时（每天） - 图片和一些文字将发布在他们的页面上。

我几乎完成了这些事情，但是，如果我的应用程序注册了 1000-10000 个用户页面，需要一些专家建议如何在墙上发帖？检查权限等和存在的简单循环就足够了吗？还是我需要考虑其他一些事情？

最好的问候 ZH

# java - 如何用字符串填充一个充满值类型 Hello 的数组？

> ID：15183093
> 
> 赞同：0
> 
> 时间：2013-03-03T06:32:44.310
> 
> 标签：java, typeerror

我的家庭作业即将结束，我一生都无法弄清楚如何做到这一点。基本上我有一个充满空值的数组，它们都是 Hello 类型。我需要用我创建的一堆字符串填充这个数组。这是我得到的错误：

```
incompatible types
required: Hello
found: String 
```

我可以更改我的字符串以键入 Hello 吗？还是我在这里完全缺少其他东西？

这是我的数组的初始化方式：我将 i 更改为 3 以使其更简单

```
Hello[] array = new Hello[3]; 
```

我没有做任何花哨的事情来填充数组：

```
test = "1 two three";
Hello[0] = test; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:35:50.293

对象是如何`Hello`构造的？我的猜测是它需要一个`String`论点。所以你会做这样的事情：

```
Hello hello = new Hello(myString);
myHelloArray[index] = hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:10:29.917

语句 Hello[] array = new Hello[3]; 声明您正在尝试创建 Hello Object 数组。所以数组中的每个元素只能指向 Hello 类的对象，在这里你试图将 String 类的对象分配给 Hello。您必须先创建 Hello 对象，然后分配给数组元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:14:06.120

正如您在上面所描述的，下面的数组采用 Hello 类型是具有构造函数的类 Hello，该构造函数采用 String 类型元素和 MainHello 类，该类将具有 main 方法并将使用 Hello 类型数组以方便您使用我已覆盖 toString() ;) 希望它会帮助你，谢谢

```
public class Hello {

    String hello;

    Hello(String hello){        
        this.hello = hello;
    }

    @Override
    public String toString() {

        return hello;
    }

}

public class MainHello {

    public static void main(String[] args) {

         Hello[] helloArray = new Hello[4] ;
         helloArray[0] = new Hello("soumyaansh");
         helloArray[1] = new Hello("user1294377");
         helloArray[2] = new Hello("india");
         helloArray[3] = new Hello("Bangalore");

        for (Hello hello : helloArray) {
            System.out.println(hello.toString());
        }

    }
} 
```

# javascript - AngularJS 在渲染大约 2000 个元素时真的很慢吗？

> ID：15183095
> 
> 赞同：27
> 
> 时间：2013-03-03T06:33:03.120
> 
> 标签：javascript, angularjs, performance, pageload, ng-bind

这是小提琴：http: [//jsfiddle.net/D5h7H/7/](http://jsfiddle.net/D5h7H/7/)

它呈现以下内容：

```
<div ng-repeat="group in Model.Groups">
    <span>{{group.Name}}</span>
    <div ng-repeat="filter in group.Filters">
        <input type="checkbox" ng-model="filter.enabled">{{filter.Name}}
        <select ng-disabled="!filter.enabled">
            <option ng-repeat="value in filter.Values">{{value}}</option>
        </select>
    </div>
</div> 
```

它是一个过滤器列表，从服务器加载到 json 中，然后呈现给用户（在示例中，json 是在 Fiddle 中生成的）。目前有 6 组，每组 30 个过滤器，每个过滤器有 15 个选项元素。

在 Firefox 中，现在重绘 UI 大约需要 2 秒。

这个时间适合 Angular js 吗？有什么我做错了导致2秒。渲染（因为 2000 个元素对我来说不是一个大数字，但 2 秒。肯定很大）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-09-08T23:04:58.747

在 AngularJS 1.3+ 中，有[`One-time binding`](https://docs.angularjs.org/guide/expression#-event-)内置的：

> 一次性绑定表达式的主要目的是提供一种创建绑定的方法，一旦绑定稳定，该绑定就会取消注册并释放资源。减少被观察的表达式的数量使摘要循环更快，并允许同时显示更多信息。

为了进行一次性绑定，`::`在绑定值之前添加：

```
<div>{{::name}}</div> 
```

另见相关讨论：

*   [在没有数据绑定的情况下呈现值](https://stackoverflow.com/questions/18790333/angular-js-render-value-without-data-binding)
*   [AngularJS 中的数据绑定是如何工作的？](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)
*   [真正阻止元素绑定 - 取消绑定元素 - AngularJS](https://stackoverflow.com/questions/18240168/genuinely-stop-a-element-from-binding-unbind-an-element-angularjs)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-16T17:44:12.860

如果在绑定数据后不需要更新 UI，则 应该查看[bindonce 。](https://github.com/pasvaz/bindonce)[bindonce](https://github.com/pasvaz/bindonce)也可以等到一个对象被加载后再进行绑定。如果使用得当，它将为您节省大量时间并`$watch()`显着减少您的 es。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T16:36:03.693

这是由于 AngularJS 是如何进行脏检查的。这是使用 AngularJS 进行慢速渲染的[明确答案。](https://stackoverflow.com/a/9693933/1095616)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-27T11:36:06.430

使用这个项目：[angular-vs-repeat](https://github.com/kamilkp/angular-vs-repeat)会提高你的表现。

有了这个，浏览器将渲染（因此 angular 将进行脏检查）只有这么多适合您渲染元素的可滚动容器中的元素。演示[在这里](http://kamilkp.github.io/angular-vs-repeat/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-16T11:19:23.550

有大约 2000 个项目要加载，您不需要一次全部渲染它们。您可以在页面滚动或更改页面时积极呈现它们。参考这个[问题](https://stackoverflow.com/a/17350875/6521116)

使用 filter id 等唯一 id 来最小化 ng-repeat 创建所有 dom 的时间。请参阅[跟踪和复制](https://docs.angularjs.org/api/ng/directive/ngRepeat#tracking-and-duplicates)

作为[上述 alecxe 的答案](https://stackoverflow.com/a/25734374/6521116)，使用一次性边界，如果这不适合您，您可以使用此类`ng-model-options="{ debounce: 200 }`角度[选项设置来减慢摘要频率](https://docs.angularjs.org/api/ng/directive/ngModelOptions)

最后，您必须使用一些性能分析工具来跟踪应用程序的瓶颈，并修复它们。

希望这可以帮助。

```
ng-repeat="filter in group.Filters | track by:filter.id | limitTo: NumPerOperation" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-31T18:57:35.357

我意识到这是一个老问题，但我认为尚未发布答案。

我相信你的表单很慢的原因不仅仅是你有 2,000 多个元素，而且这些元素是使用`ng-model`. Angular 中内置的表单验证功能非常强大和方便，但运行速度非常慢，尤其是在您第一次加载表单时。如果那些 180(6x30) 输入元素使用类似的东西`ng-checked`而不是`ng-model`，避免表单验证机制，那么你的表单应该加载得更快。

`<input type="checkbox" ng-checked="filter.enabled">{{filter.Name}}`

通过一次性绑定减少观察者`::`也将有助于这种情况，但我认为您的主要问题是`ng-model`角度表单验证。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-25T19:16:44.157

使用这两个角度模块，您可以更快地渲染表格。

“快速-ng-重复” [https://github.com/allaud/quick-ng-repeat](https://github.com/allaud/quick-ng-repeat)

“无限滚动” [https://github.com/infinite-scroll/infinite-scroll](https://github.com/infinite-scroll/infinite-scroll)

请注意，这不是提高“ng-repeat”性能的解决方案，这只是一种使您的表格更快的不同方法。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-10-09T19:13:24.653

替换`ng-repeat="group in Model.Groups"`为`collection-repeat="group in Model.Groups"`。

# java - WindowsBuilder：按下按钮时如何绘制组件？

> ID：15183097
> 
> 赞同：2
> 
> 时间：2013-03-03T06:33:36.243
> 
> 标签：java, swing, layout, draw, paintcomponent

我希望在按下按钮时绘制一个矩形，但它似乎不起作用。这是我的代码：

```
package draw.rect;

import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class DR extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    DR frame = new DR();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public DR() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 458, 312);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        JButton btnDrawRrect = new JButton("Draw Rrect");
        btnDrawRrect.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                System.out.print("hello");
                RectangleComponent r2 = new RectangleComponent();
                contentPane.add(r2);
                r2.revalidate();
                contentPane.revalidate();
            }
        });
        btnDrawRrect.setBounds(10, 11, 89, 23);
        contentPane.add(btnDrawRrect);    
    }
}

package draw.rect;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;

import javax.swing.JComponent;

public class RectangleComponent extends JComponent {

      Rectangle rect;

      public RectangleComponent()
      {
        rect  = new Rectangle(50, 50, 120, 130);
      }

      public void paintComponent(Graphics g)
      {
        Graphics2D g2 = (Graphics2D) g;
        g2.draw(rect);
      } 
} 
```

问题是，当调用动作事件侦听器时，JComponent 已正确构造，但未添加到框架中。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T06:43:12.543

您正在使用空布局，并且在这样做时，您完全负责设置使用容器添加到空布局的任何组件的大小和位置。您忽略了这个责任并且没有给您添加的 JComponent 一个大小或位置，因此当它被添加到容器中时，由于它的大小为 0，所以无法看到它。为了向您自己证明这一点，添加一个 System.out。 println() 打印出添加的组件是否可见以及它的边界是什么，您将自己看到。您的第二个问题是您`repaint()`在添加组件后没有调用，尽管这并不总是必要的，也不是您当前问题的原因。一个快速的解决方法是设置新添加的组件的边界，但我不建议您这样做。相反，我建议：

*   我强烈建议您不要使用 null 布局，因为它们会使您的代码不灵活并且*很难*维护和升级。
*   阅读教程并使用布局管理器。
*   从容器中删除或添加组件后，调用`revalidate()`，然后`repaint()`在容器上。

# php - 如何仅通过我的服务器获取 OAuth2.0 访问令牌？（我有我的用户名/密码）

> ID：15183100
> 
> 赞同：1
> 
> 时间：2013-03-03T06:34:17.163
> 
> 标签：php, oauth-2.0

我正在阅读有关`Weibo`API 的信息。（`Weibo`意思是微博。基本上，它是 的模仿者`Twitter`）。
但是，我对他们的 API 文档感到很困惑，因此我来寻求帮助。

事情是这样的：
我想在我的`PHP`服务器上创建一个应用程序，能够获取我帐户的推文列表或其他内容，然后我的服务器可以分析它们，并自动进行适当的操作。
但是，它需要一个`OAuth2.0`身份验证。我不知道如何让我的服务器在身份验证过程中充当应用程序用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:24:03.793

基本上，您希望您的应用程序充当 Twitter 的客户端，以及您自己的服务器。

据我所知，您需要知道如何从 twitter 的服务器获取推文。您需要做的是 - 在您的应用程序中集成 Twitter OAuth 流程。会发生什么——

**使用 twitter 注册您的应用程序 - 获取客户端 ID 和密码，并指定 redirect_uri。**

i) 你拨打了推特的登录页面。（必须与 SDK 一起提供，Facebook 的 OAuth SDK 提供 FB.login() 调用）
ii) 作为用户，您向 twitter 窗口提供您的凭据。Twitter 将验证凭据并将（访问令牌 + 刷新令牌）对发送到您在注册时提供的 redirect_uri。
iii) 您可以获取此访问令牌并使用访问令牌调用 Twitter 的 API。（访问令牌包含将获取推文的用户的信息） - 现在我再次没有使用 twitter 的 OAuth，所以我不确定他们的确切端点是什么。

您应该阅读 OAuth 文档，这样事情就会清楚得多。

# openssl - 如何中止 RSA_generate_key？

> ID：15183101
> 
> 赞同：8
> 
> 时间：2013-03-03T06:34:31.983
> 
> 标签：openssl

考虑以下对 的调用`RSA_generate_key()`：

```
RSA * rsa = RSA_generate_key(8192, RSA_F4, NULL, NULL); 
```

生成 8,192 位 RSA 密钥可能需要很长时间（从几秒到几分钟不等）。假设包含上述代码行的应用程序为用户提供了一个取消密钥生成的按钮。

如何在生成密钥之前中止计算并使函数返回？我记得第三个参数`RSA_generate_key()`是用于显示进度的回调函数 - 有什么方法可以让回调返回一个意味着“中止操作并返回”的值？

在另一个线程中运行该函数然后终止该线程不是一种选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T21:59:58.383

由于`RSA_generate_key`提供了进度回调，您可以`longjmp`退出它来终止函数。通过一些额外的代码，您可以创建一个`RSA_generate_key`接受通用测试函数的包装器，该函数可用于检查超时或窗口系统设置的标志。

```
#include <openssl/rsa.h>
#include <stdbool.h>
#include <setjmp.h>

struct trampoline_ctx {
  bool (*testfn)(void *);
  void *testfn_arg;
  jmp_buf env;
};

static void trampoline(int ignore1, int ignore2, void *arg)
{
  struct trampoline_ctx *ctx = arg;
  if (!ctx->testfn(ctx->testfn_arg))
    longjmp(ctx->env, 1);
}

// like RSA_generate_key, but accepts a test function. If testfn returns
// false, key generation is terminated and NULL is returned.    
RSA *
my_generate_key(int num, unsigned long e,
                bool (*testfn)(void *), void *testfn_arg)
{
  struct trampoline_ctx ctx;
  ctx.testfn = testfn;
  ctx.testfn_arg = testfn_arg;
  if (setjmp(ctx.env))
    return NULL;
  return RSA_generate_key(num, e, trampoline, &ctx);
} 
```

`longjmp`正如C89 和 C99 所要求的那样，这种方法具有惊人的可移植性。它的缺点是，如果您要使用 longjmping 的函数动态分配资源，它可能会泄漏资源。然而，在实践中，如果不经常进行或仅在明确的用户请求下进行，泄漏可能足够小以至于不引人注意。肯定是这种情况，在紧密循环中运行代码并观察进程的资源消耗。

这是上述功能的测试程序：

```
#include <stdio.h>
#include <sys/time.h>

double now()
{
  struct timeval tv;
  gettimeofday(&tv, NULL);
  return tv.tv_sec + (double) tv.tv_usec / 1e6;
}

struct tt_ctx {
  double start;
  double limit;
};

bool test_time_limit(void *arg)
{
  struct tt_ctx *ctx = arg;
  return now() - ctx->start <= ctx->limit;
}

int main(int argc, char **argv)
{
  int limit = atoi(argv[1]);
  struct tt_ctx ctx;
  ctx.start = now();
  ctx.limit = limit / 1000.0;

  RSA *key = my_generate_key(4096, 65537, test_time_limit, &ctx);
  printf("%p\n", key);
  return 0;
} 
```

测试程序假定为 POSIX `gettimeofday`，但可以轻松转换为系统提供的另一个高分辨率时钟。测试程序如下：

将两段代码附加到文件中并使用`-lrsa`. 测试程序将在命令行上以毫秒为单位指定的时间限制内生成一个 4096 位的 RSA 密钥。在所有情况下，它都会打印结果`RSA *`指针以指示`my_generate_key`其请求是否已完成或已中止。伴随执行的输出`time`作为健全性检查以验证是否遵守时间限制：

```
# try with a 10ms limit
$ time ./a.out 10
(nil)                         # too short
./a.out 10  0.02s user 0.00s system 85% cpu 0.023 total

# see if 100ms is enough time
$ time ./a.out 100
(nil)                         # still too short
./a.out 100  0.10s user 0.00s system 97% cpu 0.106 total

# try with 1 whole second:
$ time ./a.out 1000
0x2369010                     # success!
./a.out 1000  0.64s user 0.00s system 99% cpu 0.649 total 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T19:34:57.750

*我相信问题在于回调*通常不会使您能够发送信息*，*而只能接收信息。正如其他一些海报所提到的，您可能会考虑更改实际密钥生成例程的源代码，并编译您自己的版本。*在这种情况下，您可以通过引用*将某种值传递回调用例程，然后您可以将其设置在外部，从而触发失败条件。

 ***注意*:`RSA_generate_key`实际上已被弃用，现在只是`RSA_generate_key_ex`.

根据该文件的[1.19.4.2](http://cvs.openssl.org/fileview?f=openssl/crypto/rsa/rsa_gen.c&v=1.19.4.2)`rsa_gen.c`版本，除非您在 中，否则`FIPS_mode`密钥将由静态方法生成`rsa_builtin_keygen`。在`FIPS_mode`中，它将由`rsa->meth->rsa_keygen`进入 的任何内容生成`RSA_generate_key`。

也就是说，有很多地方将回调（`cb`参数）传递给其他方法，大概是因为这些方法可以反过来调用它来更新状态。

诀窍是更新`BN_GENCB`以包含某种“取消”标志，或者改变在方法中实际调用回调的方式，以便当回调方法触发时，您可以设置一个标志，调用函数将通过中断生成子例程来兑现。

你将如何去做仍然是你需要弄清楚和解决的问题——但希望这会给你一个开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T06:39:03.350

进度回调不能用于取消函数，它纯粹是为了向用户显示进度。（[在这里阅读更多](http://linux.die.net/man/3/rsa_generate_key)）

生成一个要调用的线程，`RSA_generate_key()`以便它在后台执行。当用户按下取消按钮时，终止线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T03:53:30.433

虽然我从来没有遇到过这种情况，也从来没有做过任何事情。如果可以修改 OpenSSL 的源代码，可以尝试以下方法：

假设变量 V 在两个函数之间共享。因此，它要么是文件中的全局变量，要么是静态变量，并被 RSA_generate_key 使用，并说另一个函数 RSA_set_V。

RSA_generate_key 只会读取变量。RSA_set_V 设置变量。

在 RSA_generate_key 中，耗时循环可能会使用检查此变量的附加条件。它可以终止这个循环或在某个 V 值上退出函数。例如

```
 while (V!=CERTAIN_VALUE && Rest_of_Condition) {
      //Loop body.
  } 
```

现在，在 RSA_set_V 中，将 V 设置为 CERTAIN_VALUE。当用户单击停止时，调用 RSA_set_V。它应该停止 RSA_generate_key。

但是，它几乎没有问题。它可能会减慢 RSA_generate_key。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T18:24:20.810

如果您不希望终止线程，您可以派生一个新进程并在用户中止时终止它？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T15:09:32.770

根据[源码](http://www.openssl.org/source/)，不修改openssl的代码，我们不能中断RSA_generate_key方法让它返回。

我想了两种方法来做到这一点：

1.  让方法在后台线程中运行，当用户按下取消按钮时，让方法运行到后台结束。然后让线程死掉。并忽略结果。如果用户请求另一代，则启动一个新线程。

2.  另一种是启动子流程来生成密钥。RSA结构包含很多BIGNUM成员，也是一些ints/ulongs的结构，子进程生成密钥后，将这些相关成员复制回父进程。如果用户按下取消按钮，则终止子进程是安全的。但不确定复制这些整数/长整数是否足以满足您的需求。**

# ruby-on-rails-3 - Rails 链接的帖子消息

> ID：15183107
> 
> 赞同：0
> 
> 时间：2013-03-03T06:35:08.247
> 
> 标签：ruby-on-rails-3, linkedin

我正在使用[linkedin](https://github.com/pengwynn/linkedin) gem。使用这个 gem，我可以获得配置文件和连接。我正在尝试使用 add_share 方法更新帖子状态，但出现以下错误

```
(403): Access to posting shares denied 
```

如何添加权限和使用发布消息？

这是我正在使用的代码，

```
User.rb

def linkedin_client
  client = LinkedIn::Client.new(LINKEDIN_API_KEY, LINKEDIN_SECRET_KEY)
  client.authorize_from_access(auth_token, auth_secret)
  client
end
...

PostsController.rb

client = current_user.linkedin_client
client.add_share({
  :title=> 'title',
  :content=>'message',
  "submitted-url" => 'url',
  "submitted-image-url" => 'logo-url'
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:40:05.717

这是我的错误，用正确的 add_share 格式修改

```
client.add_share({:comment => "comment text",
                  :content => {
                     "title"=> "post title",
                     "description" => "description",
                     "submitted-url" => "url",
                     "submitted-image-url" => 'image url'
                   }
                 }) 
```

# charles-proxy - 在 Charles Proxy 中查看 127.0.0.1:8080 流量

> ID：15183108
> 
> 赞同：10
> 
> 时间：2013-03-03T06:35:09.480
> 
> 标签：charles-proxy

我使用 Charles Proxy 来监控我的网络流量（特别是查看 iOS 和 Android 应用程序中的 API 流量）。我有一个在 127.0.0.1:8080 本地运行的 API 站点，但该流量没有出现在 Charles Proxy 中。我一直在摆弄设置，但似乎无法让它工作 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-25T21:18:47.503

使用`localhost.charlesproxy.com`而不是`localhost`. 这是在 charlesproxy.com DNS 上设置的指向 127.0.0.1，并且始终如此。而且因为它不是字面意思`localhost`，它*应该*绕过操作系统的硬连线逻辑`localhost`。

也可以使用`local.charles`，但前提是 Charles 实际正在运行并且您将其用作代理。所以我更喜欢这个`localhost.charlesproxy.com`解决方案。

更多信息在这里：[https ://www.charlesproxy.com/documentation/faqs/localhost-traffic-doesnt-appear-in-charles/](https://www.charlesproxy.com/documentation/faqs/localhost-traffic-doesnt-appear-in-charles/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T22:43:09.583

同样的问题也发生在我身上。使用我的计算机名称而不是“localhost”解决了我的问题，并可以在 Charles 上显示它。例如，我的计算机名称是“sukwon”，我通过使用“ [http://sukwon.local:3000](http://sukwon.local:3000) ”而不是“ [http://127.0.0.1:3000](http://127.0.0.1:3000) ”来解决它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T12:27:06.143

您可以在访问网络流量时使用您的私有网络地址（例如 192.168.x.xxx、10.xxx、172.16.xx）或在 hosts 文件中将主机名映射到 127.0.0.1。

编辑：我应该提到，如果 API**仅**在 127.0.0.1 上侦听，则应更改主机文件。如果您由于某种原因无法更改主机文件，则另一种选择是让服务侦听 0.0.0.0:8080，然后使用专用网络地址进行请求。

# opengl - 为什么我的视图坐标没有正确显示？

> ID：15183110
> 
> 赞同：0
> 
> 时间：2013-03-03T06:35:17.800
> 
> 标签：opengl, graphics, coordinates

我编写了一个将“屏幕”坐标转换为“视图”坐标的函数。它看起来像这样（C# 中的示例）：

```
Vector2 ScreenToViewCoords(Point p)
{
    return new Vector2(
        _projMatrix.M11 * p.X + _projMatrix.M12 * p.Y + _projMatrix.M14,
        _projMatrix.M21 * p.X + _projMatrix.M22 * p.Y + _projMatrix.M24
    );
} 
```

`p`是相对于 OpenGL 控件/视口左上角的一个点，以像素为单位。

`_projMatrix`是我的投影矩阵。

我的渲染函数如下所示：

```
private void Render()
{
    GL.MatrixMode(MatrixMode.Projection);
    GL.LoadMatrix(ref _projMatrix);

    GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);

    GL.MatrixMode(MatrixMode.Modelview);
    GL.LoadIdentity();

    if (_texture != null)
    {
        _texture.Bind();
        GL.Color3(Color.White);
        GL.Begin(BeginMode.Quads);
        {
            GL.TexCoord2(0, 0); GL.Vertex2(0, 0);
            GL.TexCoord2(0, 1); GL.Vertex2(0, _texture.Height);
            GL.TexCoord2(1, 1); GL.Vertex2(_texture.Width, _texture.Height);
            GL.TexCoord2(1, 0); GL.Vertex2(_texture.Width, 0);
        }
        GL.End();
        _texture.Unbind();
    }

    glControl.SwapBuffers();
} 
```

它使用投影矩阵，并在屏幕上绘制图像，始终位于同一位置：（0,0）到（宽度，高度）。

由于图像是在 1 个视图单元 = 1 个像素处绘制的，所以我希望我的投影矩阵所要做的只是进行一点平移以将图像放置在正确的位置。因此，我认为它看起来像

```
 1  0  0  0
 0  1  0  0
 0  0  1  0
tx ty  0  1 
```

但它实际上看起来像这样：

![](../Images/226d0e0e7524d5071366bc93a0298767.png)

（注意：它看起来是旋转的，因为这些是列，而不是行）

那部分已经让我感到困惑，但无论如何，我的数学应该是正确的，除非我忘记了什么？

请注意，渲染功能完全按照预期工作，我只是想将鼠标单击转换为视图坐标。另请注意，这是一个 2D 应用程序，因此并未真正使用 Z 向量（同样，不确定为什么`Column2`会出现奇怪的情况）。

那么**我在这里做错了什么，坐标没有正确输出？**

例如，如果我如前所述在 (0,0) 到 (w,h) 处绘制图像，然后单击 700x500 图像的右下角，我希望它输出 699x499 但它出来`(0.9959349, -0.9971989)`。

**编辑：**找出为什么`Z`坐标很奇怪。我已经在 -1 和 11 而不是 -1 和 1 之间设置了正交矩阵。然而，这并没有真正改变任何东西，因为 Z 值无关紧要。

**Edit2：**我现在想到投影矩阵将模型视图转换为屏幕坐标，而我基本上想做相反的事情——我需要反转矩阵吗？这样做会给我更多的像素数字，但乘以它会使我的坐标太大：

![](../Images/5bc52f0bc4bf5f6a6db5fcc2947a0a83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:19:33.567

GL 中的投影矩阵转换为归一化坐标空间，其中 X 和 Y 将介于 -1 和 1 之间（在透视除法之后，在正交投影中可以忽略，因为它只是除以 1）

要获取像素坐标，您需要按视口缩放/偏移，以便 -1 到 1 范围映射到视口中指定的左右宽度和高度。

例如：

```
screenX = (viewWidth * (normX + 1) / 2) + viewLeft; 
```

要将屏幕坐标转换回视图坐标，请反向执行所有操作 - 将屏幕坐标转换为标准化坐标，然后将它们推入逆变换。

`gluProject()`并将`gluUnproject()`为您执行此操作，或者您可以咨询来源。

# vb.net - 在 vb.net 中运行选择查询

> ID：15183124
> 
> 赞同：0
> 
> 时间：2013-03-03T06:36:45.660
> 
> 标签：vb.net

我想使用选择查询从数据库 amsdb.mbd 中检索用户密码，表名“user”

这是连接字符串

```
conaccess.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\Documents and Settings\shirish\Desktop\AMS\New Folder\ams\ams\amsdb.mdb"
conaccess.Open() 
```

这是我使用的查询：

```
Dim selcmd As New OleDbCommand("SELECT pwd FROM user WHERE uid = '" & ComboBox1.SelectedText & "'", conaccess)
Dim pwd1 As String
pwd1 = selcmd.ExecuteNonQuery() 
```

但这给了我一个错误

> *FROM 子句中的语法错误。*

任何更正或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:43:42.283

问题是因为`user`是关键字，这意味着您不能使用具有该名称的表还是不能使用该单词运行查询。

要查看所有 Sql Server 关键字，请参阅：[保留关键字 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189822%28v=sql.105%29.aspx)

如果您更改表名，您可以再次运行查询。

**更新：**

您需要获取密码，但 ExecuteNonQuery 方法无法做到。为此，您需要使用[OledbDataReader](http://msdn.microsoft.com/pt-br/library/system.data.oledb.oledbdatareader%28v=vs.71%29.aspx)

示例：

```
Dim selcmd As New OleDbCommand("SELECT pwd FROM userstbl WHERE uid = '" & ComboBox1.SelectedText & "'", conaccess)
Dim reader As OleDbDataReader = selcmd.ExecuteReader()
pwd1 = reader("pwd").ToString(); 
```

# ruby-on-rails - Rails：即使启用了资产摘要，浏览器也会重新验证资产

> ID：15183126
> 
> 赞同：0
> 
> 时间：2013-03-03T06:37:00.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

我一直在尝试摆脱浏览器为我们的 Rails 应用程序发出的重新验证请求。我打开了资产摘要：

```
 config.assets.digest = true 
```

并希望304的消失。但他们没有（资产是 md5'ed）：

```
Started GET "/assets/bootstrap/bootstrap-4379dca12de4846777a274a301167a41.css" for 192.168.56.1 at Sun Mar 03 00:34:22 +0100 2013
[INFO  pid: 3967: 13-03-03 00:34:22 ] Served asset /bootstrap/bootstrap-4379dca12de4846777a274a301167a41.css - 304 Not Modified (5ms) 
```

供参考 - 这是页面中的原始 html：

```
 <link href="/assets/bootstrap/bootstrap-4379dca12de4846777a274a301167a41.css" media="screen" rel="stylesheet" type="text/css" /> 
```

我使用 curl 检查了缓存头 - 它们看起来不错：

```
< Content-Type: text/css
< Connection: keep-alive
< Status: 200
< X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.11
< ETag: "4379dca12de4846777a274a301167a41"
< X-UA-Compatible: IE=Edge
< Last-Modified: Tue, 26 Feb 2013 08:03:21 GMT
< X-Rack-Cache: miss, store
< X-Content-Digest: 97d1f611b557f55fa917899bca0ef9b674d65a6a
< X-Runtime: 0.023510
< Date: Sat, 02 Mar 2013 23:43:37 GMT
< Content-Length: 141338
< Cache-Control: public, max-age=31536000
< Age: 0
< Server: nginx/1.0.10 + Phusion Passenger 3.0.11 (mod_rails/mod_rack) 
```

如果我直接从浏览器加载这个 css URL - 那么浏览器似乎确实缓存了它。（刷新不会在 rails 日志上生成 GET）。但是，当我加载我的应用程序页面时 - 它总是发出重新验证，导致 304。

我玩弄了这些设置（真/假，存在/不存在）（**几乎尝试了所有组合**）（并且总是删除 tmp/cache 只是为了安全起见）：

```
config.assets.compile = true
config.static_cache_control = "public, max-age=30758400"
config.serve_static_assets = true 
```

但没有任何帮助。我在某处读到“Etag”标头是问题所在 - 但我无法弄清楚如何关闭 Etag 标头（无论我做什么 - 始终返回 etag 标头）。（而且我不明白为什么官方食谱不起作用）。

这是在开发模式 - 但我已经改变了配置设置，如上所示。没有预编译。

非常感谢有关如何关闭重新验证的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:02:06.580

Rails 可能没有添加这些标头……nginx 是。查看 Rails 指南部分（向下滚动到 4.1.1）：

[http://edgeguides.rubyonrails.org/asset_pipeline.html#precompiling-assets](http://edgeguides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

特别是“For nginx”部分：

```
location ~ ^/assets/ {
  expires 1y;
  add_header Cache-Control public;

  add_header ETag "";
  break;
} 
```

# date - tcsh：在 shell 中打印 2 周前的日期

> ID：15183127
> 
> 赞同：1
> 
> 时间：2013-03-03T06:37:02.567
> 
> 标签：date, tcsh

在 OpenBSD 上的 tcsh 中，我需要打印两周前的日期。

例如，如果今天是`2013-03-02`，我需要`2013-02-16`打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:43:08.640

这应该可以工作（它适用于 GNU 日期。我对 OpenBSD 不是很熟悉。所以不确定它是否适合你）

```
date -d "now - 14 days" +%Y-%m-%d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:37:02.567

它似乎`tcsh`不允许执行嵌套命令，所以看起来`ksh`必须使用。

```
date +%Y-%m-%d ; \
sh -c 'date -r $(expr $(date +%s) - $(expr 60 \* 60 \* 24 \* 14)) +%Y-%m-%d'
2013-03-02
2013-02-16 
```

我们以 UTC 中的 Epoch 以来的秒数获取日期，并使用 、减去以秒为单位计算两周，并使用参数`expr`将这些秒传回。`date``-r`

不确定是否有更短的解决方案，除了使用`1209600`代替`$(expr 60 \* 60 \* 24 \* 14)`：

```
sh -c 'date -r $(expr $(date +%s) - 1209600) +%Y-%m-%d' 
```

# binary - 二进制和十六进制的事实和想法

> ID：15183140
> 
> 赞同：1
> 
> 时间：2013-03-03T06:39:12.753
> 
> 标签：binary, hex

二进制已成为社会的一种比喻，但没有人理解它。计算机使用它们来运行庞大的操作系统并一直在进行复杂的计算和二进制算术，数亿甚至数十亿的小火花在几秒钟内穿过一小块金属，但没有人能理解所有的深度和大小那些使魔术发生的火花和电弧。

但请记住，在某一时刻，人们必须实际使用这种布尔语言进行编码和解码，才能制造出微处理器，以便他们可以抽象为十六进制和汇编语言，从而使每个人的生活更轻松，最终从大型大型计算机和打孔卡。

这将作为二进制及其老大哥十六进制的有趣事实、思想、顿悟和理论的集合。根据 Stack Overflow 的说法，任何人都可以添加它，但这将是一个自我回答的“常见问题解答”。

* * *

无论如何，我希望每个读到这篇文章的人都能找到一些有趣的东西，也许可以在从网页设计到汇编语言的任何事情上帮助他们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T06:39:12.753

# cassandra - 在 cassandra 获取查询中仅获取行值作为整数？

> ID：15183142
> 
> 赞同：0
> 
> 时间：2013-03-03T06:39:15.397
> 
> 标签：cassandra

我对 cassandra 很陌生，是否有任何命令可以仅从 cassandra 的列族中获取值？

如果我使用以下命令：

```
[default@CustomKeySpace] get user['peter'];
=> (column=friday, value=10, timestamp=1362290522592000) 
```

我得到：

```
Returned 1 results.
Elapsed time: 8.4 msec(s). 
```

在上面的结果中，我可以只抓取价值部分吗？如果我给出类似的命令`get user['peter'][xxx]`，我应该得到输出值 10。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:05:59.917

你的命令

```
get user['peter']; 
```

正在读取整行 peter，其中可能包含许多列。在你的情况下，它只有一个，星期五。要检索，您可以使用

```
get user['peter']['friday']; 
```

假设您的列比较器是字符串类型，否则您可以使用

```
get user['peter'][ascii('friday')]; 
```

但是，这仍然会打印时间戳，因为每列都有一个时间戳。当您编写代码时，您将返回一个列对象，您可以从中提取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:02:16.207

在 Cassandra（无论是 cli 还是 cqlsh）中没有办法做到这一点，因为 thrift 返回的存储单元始终是列、值、时间戳。

# java - 在执行脚本之前等待 AsyncTask 完成

> ID：15183144
> 
> 赞同：0
> 
> 时间：2013-03-03T06:39:25.467
> 
> 标签：java, android, scripting

```
package com.cydeon.plasmamodz;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;

import com.cydeon.plasmamodz.R;

import android.app.ActionBar;
import android.app.Activity;
import android.app.DownloadManager;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

//Class for Boot Animation Blue Kindle
public class Boots extends Activity {

public static String TAG = "Boots";
Process process;

private class DownloadFile extends AsyncTask<String, Integer, String>{
    @Override
    protected String doInBackground(String... sURL) {
        try{
            URL url = new URL(sURL[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            //Shows 0-100% progress bar
            int fileLength = connection.getContentLength();

            //Download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/TWRP-Blaze-2.4.3.0-1.zip");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                //Publish the Progress
                publishProgress((int) (total * 100/fileLength));
                output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();
    } catch (Exception e) {

    }
    return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress){
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        mProgressDialog.dismiss();
        Context context = getApplicationContext();
        CharSequence text = "Installing. Please Wait";
        int duration = Toast.LENGTH_SHORT;

        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

        try {
                Runtime rt = Runtime.getRuntime();
                Process proc = rt.exec("su");

                proc = rt.exec("sh /sdcard/boots.sh");
                InputStream is = proc.getInputStream();
                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);
                String line;

                while ((line = br.readLine()) != null){
                    System.out.println(line);
                }
        }catch (Throwable t){
            t.printStackTrace();
        }

    }
}

ProgressDialog mProgressDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.boots);
    ActionBar actionBar = getActionBar();
    actionBar.hide();
    ImageView img = (ImageView) findViewById(R.id.iv2);
    img.setImageResource(R.drawable.boot1);
    Button install = (Button) findViewById(R.id.bAInstall);
    Button rtrn = (Button) findViewById(R.id.bAReturn);
    mProgressDialog = new ProgressDialog(Boots.this);
    mProgressDialog.setMessage("Downloading..." );
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    install.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            DownloadFile downloadFile = new DownloadFile();
            downloadFile.execute("https://dl.dropbox.com/s/t16a0cq0qcon2ux/TWRP-Blaze-2.4.3.0-1.zip");

            }

        }
    );

    rtrn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            finish();
        }
    });

    }

   } 
```

抱歉，如果我搜索得不够好。我有我的代码，所以我会发布它。此外，您可能会看到，我不知道如何在我的应用程序中包含一个脚本然后运行它。我尝试创建一个新文件夹并将脚本放入其中，但它不起作用。对此的帮助也将不胜感激...

编辑：我得到了第一部分的工作。现在我无法执行脚本。su 被执行，但我的脚本没有。我还需要知道将我的脚本放在我的应用程序中的哪个位置，然后运行该脚本。我不确定安装应用程序时脚本会在哪里。而且我不知道把脚本放在哪里。因此，我们将不胜感激。下面（我猜现在上面。lol）是更新的代码：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:44:35.803

您拥有`onPostExecute`可用于执行后指令的方法。他的参数取决于您在`AsyncTask`定义中指定的输出。

为了使用输出，您需要在`doInBackground`方法中返回一些内容。一个好的做法是在使用它之前检查这个输出是否为空。那应该这样做=）

# spring - 自动装配工厂 bean

> ID：15183145
> 
> 赞同：0
> 
> 时间：2013-03-03T06:39:34.193
> 
> 标签：spring

我有 2 个豆子“myBeanA”和“myBeanB”。我必须根据一些标志在启动时归还其中一个。

我决定用工厂来实现这个

```
<bean id="myBeanFactory" class="MyBeanFactory"/>
<bean id="myBeanA" class="MyClassImplA"/>
<bean id="myBeanB" class="MyClassImplB"/>
<bean id="myBean" class="MyInterface" bean-factory="myBeanFactory" bean-method="getMyBean"/> 
```

现在工厂应该做这样的事情

```
public MyInterface getMyBean(){
    if ( flag ) { 
           return (MyInterface) context.getBean("myBeanA");
    }else{
           return (MyInterface) context.getBean("myBeanB");
    }
} 
```

这工作正常.. 但是当我尝试将“myBeanB”和“myBeanA”注入 myBeanFactory 时，我得到空值..

```
@Inject  // assume setters included.. 
private MyInterface myBeanA;

@Inject // assume setters included...
private MyInterface myBeanB;

public MyInterface getMyBean(){
   return flag ? myBeanA : myBeanB;
} 
```

在这种情况下出于某种原因 - myBeanA 和 myBeanB 都是空的！

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T21:35:42.867

请改用`@Awtowired`注释。要使用`@Inject`注释，您必须在支持它的 claspath 上有一个特殊的 jar。此外，您的 xml 中必须有 `<context:annotation-config/>`元素才能启用awtowiring。此外，您应该为这 3 个 bean（myBean、myBeanA、myBeanB）启用按名称自动装配。

# java - 切换浏览器选项卡时隐藏小程序的JDialog

> ID：15183146
> 
> 赞同：2
> 
> 时间：2013-03-03T06:39:52.377
> 
> 标签：java, javascript, swing, jdialog, japplet

[我的问题似乎与用户切换浏览器选项卡时如何从 JApplet 中隐藏 JDialog](https://stackoverflow.com/questions/7584646/how-to-hide-jdialog-from-japplet-when-user-switch-browser-tab)非常相关？但它没有提供有效的解决方案。

我开发了一个使用 JWS/JNLP 部署的小程序。它从显示“新游戏”对话框开始。

```
private class NewGameDialog extends CustomDialog implements ActionListener {
    ...
    public NewGameDialog () {
       super(topContainer, "NEW GAME", modalityType);

       System.out.println(topContainer + " " + modalityType);
       //prints JApplet and DOCUMENT_MODAL
    ... 
```

`CustomDialog`只是扩展`JDialog`：

```
public class CustomDialog extends JDialog implements WindowListener {

    public CustomDialog(Container cont, String title, ModalityType modalityType) {
        super(windowForComponent(cont), title, modalityType);
    }

    public static Window windowForComponent(Component c) {
        if (c instanceof Window) return (Window) c;
        return SwingUtilities.windowForComponent(c);
    }

    ... 
```

这是`JDialog`从 GUI 类调用的方式：

```
public void requestNewGame () {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            NewGameDialog dialog = new NewGameDialog();
            dialog.setVisible(true);
        }
    });
} 
```

![在此处输入图像描述](../Images/3d334ae6649ed8ee83352f352584632b.png)

我使用了[如何在对话框中使用](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)模态中描述的不同类型的模态。`JDialog`目标是在用户切换到浏览器中的另一个选项卡时隐藏。但似乎没有一个选项不起作用。该对话框保持浮动在所有选项卡之上。

**请告诉我如何在用户移动到另一个选项卡时隐藏对话框并在用户返回我的小程序选项卡后再次显示？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T07:15:03.910

这可以在标签更改时在屏幕上更改位置的假设。例如

```
JDialog.getParent().getLocationOnScreen() 
```

### 经测试并适用于：

*   火狐19.0
*   Chrome 版本 25.0.1364.97 m

### 失败：

*   **Internet Explorer 8.0.7601.17514**

使用除拒绝访问浏览器选项卡或导致安全异常之外 的其他`Dialog.ModalityType`值。`MODELESS`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DialogApplet extends JApplet {

    @Override
    public void init() {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                initGUI();
            }
        };
        SwingUtilities.invokeLater(r);
    }

    public void initGUI() {
        JButton b = new JButton("Show Dialog");
        ActionListener listener = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                showDialog();
            }
        };
        b.addActionListener(listener);
        add(b);
    }

    private JDialog d;
    JTextArea output;
    int currentX = -1;
    Timer timer;

    public void showDialog() {
        if (d==null) {
            output = new JTextArea(5,20);
            Window w = SwingUtilities.windowForComponent(this);
            d = new JDialog(w, "Dialog", Dialog.ModalityType.MODELESS);
            //Dialog.ModalityType.TOOLKIT_MODAL);  //security
            //Dialog.ModalityType.DOCUMENT_MODAL);
            //Dialog.ModalityType.APPLICATION_MODAL);
            d.add(output, BorderLayout.CENTER);
            ActionListener al = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    StringBuilder sb = new StringBuilder();

                    sb.append("parent location: \t" +
                        d.getParent().getLocation() + "\n");
                    sb.append("parent location - screen: \t" +
                        d.getParent().getLocationOnScreen() + "\n");

                    System.out.print(sb.toString());

                    output.setText(sb.toString());
                    if (currentX>-1 && 
                        currentX!=d.getParent().getLocationOnScreen().getX() 
                        ) {
                        System.out.println( "Goodbye world!" );
                        d.setVisible(false);
                        timer.stop();
                    }
                }
            };
            timer = new Timer(1000, al);
            d.pack();
            d.setLocationRelativeTo(d.getParent());
        }
        currentX = (int)d.getParent().getLocationOnScreen().getX();
        timer.start();
        d.setVisible(true);
    }
} 
```

## Java 脚本

也许相反，请为此寻找 JS。诀窍似乎在于检测 HTML 窗口焦点/模糊事件。EG 详细回答如下：

*   [检测用户是否更改选项卡的 Javascript](https://stackoverflow.com/q/10338704/418556)
*   [使用 javascript 检测浏览器选项卡的变化](https://stackoverflow.com/q/13989737/418556)

显然，当 JS 检测选项卡更改时，我们会让它调用小程序中的一个方法，例如`tabVisible()`或`tabHidden()`对对话框执行适当的操作。

# php - 从 MySQL 表中选择 MAX 数不起作用 - PHP

> ID：15183148
> 
> 赞同：4
> 
> 时间：2013-03-03T06:40:08.610
> 
> 标签：php, mysql

我有一张像下面这样的桌子（一块）；

```
| Sl | NUMBER | Name |
----------------------
| 7  | 00007  | Name |
----------------------
| 8  | 00008  | Name |
----------------------
| 9  | 00009  | Name |
----------------------
| 10 | 00010  | Name |
----------------------
| 11 | 00011  | Name |
----------------------
| 12 | 00012  | Name |
----------------------
| 13 | 00013  | Name |
---------------------- 
```

我有这样的mysql语句；

```
$con = mysql_connect("localhost","root","password");
if (!$con){
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("dbname", $con);
$query = 'SELECT MAX(NUMBER) FROM tablename';//varchar 15 entry
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
    $maxnumber = $row['MAX(NUMBER)'];
}
echo $maxnumber; 
```

但它返回 9 而不是 13。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T06:48:44.327

您指出`column`数据类型是`varchar`。`MAX`适用于数字。您将需要强制转换或更改`datatype`.

```
$query = 'SELECT MAX(CAST(NUMBER as UNSIGNED)) FROM tablename'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T06:46:52.103

您的`number`字段似乎不是数字数据类型，而是字符串数据类型。您必须将其转换为数字数据类型才能获得正确的结果。试试下面的代码：

```
$query = 'SELECT MAX(CAST(NUMBER as Int(12))) FROM tablename'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T07:12:44.000

使用此查询

```
SELECT 
    *
FROM tablename AS t
INNER JOIN (SELECT MAX(SL) AS SL FROM tablename) AS r ON r.SL = t.SL 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/77f5c/4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T06:44:10.620

尝试按如下方式更改查询

```
$query = 'SELECT NUMBER FROM tablename ORDER BY NUMBER DESC LIMIT 0,1'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T07:08:38.593

这似乎是多种原因（尽管很难解释）。但是我已经用一些注释“清理”了一些违规行为的代码。也许这应该起作用。

1：假设 NAME 字段是 VarChar，您最好使用 CAST 函数将其转换为数字。但这不是问题。

2：您正在阅读所有记录并尝试打印出循环。首先，您不需要循环。由于 MAX 预计会返回 ONE 记录，因此此处的循环是多余的。

3：当使用像 MAX 这样的函数时，最好将结果值放入另一个变量中。但这不是问题。这更像是“清理”代码的建议。

现在来回答...修改后的代码应该是这样的：

```
$query = 'SELECT MAX(NUMBER) As M FROM tablename';//varchar 15 entry
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result)
$maxnumber = $row['M'];

echo $maxnumber; 
```

这应该这样做:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T06:51:57.110

由于您的数字列不仅是数字，而且是零填充，因此请尝试降序并获得第一个。

```
select number from tablename order by number desc limit 1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-03T06:48:16.623

```
SELECT MAX(CAST(NUMBER AS UNSIGNED)) FROM tablename 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-03T06:57:19.603

尝试这个 ：

```
$query = 'SELECT MAX(NUMBER) as NUMBER FROM test';//varchar 15 entry
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
    $maxnumber = $row['NUMBER'];
}
echo $maxnumber; 
```

它的回报`00013`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-26T05:44:50.313

NUMBER 的数据类型必须是整数或任何数字数据类型，重新检查...您的查询是正确的。

# testing - Meteor 的测试实践

> ID：15183155
> 
> 赞同：9
> 
> 时间：2013-03-03T06:41:10.393
> 
> 标签：testing, mocking, meteor, mocha.js

这不是技术问题。我看到很多人都在使用[Mocha](http://visionmedia.github.com/mocha/)，看起来很整洁，所以我会尝试一下。

我想知道的是人们如何处理与 Meteor 集合相关的模型之类的测试。你会使用[sinon](http://sinonjs.org/)来模拟数据库记录吗？是否有您将加载使用的框架文件`require`以便您可以使用`Meteor.Collection`？

**编辑**

更具体地说，我正在编写一个使用多个[Minimongoid](https://github.com/haihappen/minimongoid)模型的应用程序。如果您看过其中一个，就会知道每个模型的`@_collection`属性都是`new Meteor.Collection(...)`.

拥有模型而不是数据库记录的主要优点之一是您可以将行为附加到它，而这种行为正是我想要测试的。

因此，假设您有一个游戏，其中包含棋盘上的两个棋子。当玩家点击一个棋子时，我们希望通过突出显示方块来显示棋盘上的所有合法移动。该棋子有一种方法，可以根据该棋子的移动方式以及是否有其他棋子挡住它来确定给定位置是否构成合法移动；确定是否有碎片可能需要数据库查询：

```
class Piece extends Minimongoid
  @_collection: new Meteor.Collection('pieces')

  @find: (selector = {}, options = {}) ->
    document = @_collection.findOne(selector, options)
    if document
      model = new @(document)
      _.extend(model, model.attributes)

  @where: (selector = {}, options = {}) ->
    @_collection.find(selector, options).map (record) =>
      model = new @(record)
      _.extend(model, model.attributes)

class Bishop extends Piece
  @code: "bishop"

  isLegalMove: (location) ->
    @isOnMyPath(location) && @noPiecesInMyWay(location)

  noPiecesInMyWay: (location) ->
    _.all Piece.where({ color: @otherColor() }), (piece) -> 
      !piece.isOnMyPath(location) || (piece.location == location && piece.color == @otherColor()) 
```

所以如果我用一个测试框架加载这个类，我真的只看到两个测试这个代码的选项：

1.  用 sinon 之类的东西模拟 @_collection[对象](http://sinonjs.org/)
2.  让测试框架加载 Meteor（或它的一部分），以便我的模型可以访问`Meteor.Collection`

**更新**

大约一年后，我又回到了这个问题上，并尝试了一些建议的测试方法。

我看了一下[RTD](https://github.com/xolvio/meteor-rtd-example-project)，它似乎是所有可用解决方案中最完整的，但我无法让它运行。

我也看过[Laika](http://arunoda.github.io/laika/)，但真的不关心语法。我想要一个 BDD 风格的语法，相比之下，Laika 提供的语法看起来相当神秘。

然而，经过一些试验和错误，我能够让[meteor-mocha-web](https://github.com/mad-eye/meteor-mocha-web)工作，到目前为止我对它非常满意。它运行您的应用程序并提取您的测试文件，因此无需模拟框架的任何部分。当然，它远非完美，但它是我能够运行的第一件事，它具有我喜欢的语法，所以它赢了。感谢贾吉尔的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:33:19.603

在尝试测试我们的应用程序[MadEye.io](http://madeye.io)时，我们遇到了类似的问题。有很多移动部件和边缘案例，所以自动化套件是必不可少的。我们构建了一个包[meteor-mocha-web](https://github.com/mad-eye/meteor-mocha-web)以支持在Meteor 上下文中进行测试，包括Session、Meteor.Collections、Deps 等。我们还在Meteor 的Devshop 0 上进行了一次[Lightning Talk简要解释。](http://www.youtube.com/watch?v=3QW6c9J-tjM&t=16m40s)

这是早期阶段，但它对我们来说是无价的，它涵盖了人们需要的更多用例。

# sql - SQL - 数据透视表和组不工作

> ID：15183160
> 
> 赞同：9
> 
> 时间：2013-03-03T06:42:29.067
> 
> 标签：sql, sql-server-2008, pivot, pivot-table

我有一张如下表：

```
Product     #users  Date            Count   Type
prodA       29      2013-02-27      113     Document
prodA       31      2013-03-02      152     Extraction
prodB       17      2013-02-26      40      Document
prodB       28      2013-03-02      73      Extraction 
```

我需要在 [Type]/Count 列上使用数据透视表并获取如下表：

```
Product     #users  Date            Document Extraction
prodA       60      2013-03-02      113      152
prodB       45      2013-03-02      40       73 
```

其中#user 列是按产品分组的总和，而日期是按产品分组的最大日期。

这是我到目前为止得到的：

```
SELECT Product, 
       sum(users),
       max([Date]),  
       [Document],[Extraction] FROM Table

     PIVOT 
        ( sum([Count]) FOR [Type] IN ( Document , Extraction)) AS [QUANTITY]

     GROUP BY activity, document, extraction 
```

但我的最终结果给了我这样的东西：

```
Product     #users Date      Document Extraction
prodA       31     2013-03-02 NULL     152
prodA       29     2013-02-27 113      NULL
prodB       28     2013-03-02 NULL     73
prodB       17     2013-02-26 40       NULL 
```

它不是按产品分组的！

有任何想法吗？

编辑：

到目前为止，我有

```
WITH Pivoted
AS
(
  SELECT *
  FROM table1
  PIVOT 
  ( 
    sum([Count]) FOR [Type] IN ( Document , 
                                Extraction)
  ) AS p
) 
SELECT 
  product,
  SUM(Users) AS TotalUsers,
  MAX(DAte) AS LatestDate,
  MAX(Document) AS Document,
  MAX(Extraction) AS Extraction
FROM Pivoted
GROUP BY Product; 
```

但我上面的表1实际上是由下面的代码组成的：

```
WITH a
AS(
SELECT    activity, 
                username, 
                [Last Accessed] = max(DATEADD(dd, DATEDIFF(d, 0, ActDateTime), 0)), --[#Users] = count(distinct username), 
                CASE WHEN COUNT(activity)IS NOT NULL THEN 1 ELSE 0 END AS Count,
                CASE WHEN pageURL LIKE '/Document%'
                OR pageURL LIKE '/Database%' THEN 'Document' ELSE 'Extraction' END AS [Type] --into #temp
                from activitylog
                where pageURL not like '%home%' AND pageURL not like '/Default%'
                --AND ActDateTime >= @StartDate AND ActDateTime <= @EndDate
                group by activity, 
                username, 
                --department,
                DATEADD(dd, DATEDIFF(d, 0, ActDateTime), 0), 
                CASE WHEN pageURL LIKE '/Document%' OR pageURL LIKE '/Database%' THEN 'Document' ELSE 'Extraction' END 
                --order by activity--, username, department,DATEADD(dd, DATEDIFF(d, 0, ActDateTime), 0)
    )

    ,b as
    (select activity, count(distinct username) as [Users] ,
        --department ,
        max([Last Accessed]) as [Last Accessed1],count([count])as [Count],[Type] from a --into #temp1 from #temp
        group by activity, 
        --department,
        [Type]

        )  

        select * from b order by activity; 
```

所以我的问题是，我如何将上面的代码块放在第一个 WITH AS 中？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T06:50:14.797

您不能`GROUP BY activity, document, extraction`在`PIVOT`表运算符中，`PIVOT`运算符自动推断分组列。但是你可以这样写：

```
WITH Pivoted
AS
(
  SELECT *
  FROM table1
  PIVOT 
  ( 
    sum([Count]) FOR [Type] IN ( Document , 
                                Extraction)
  ) AS p
) 
SELECT 
  product,
  SUM(Users) AS TotalUsers,
  MAX(DAte) AS LatestDate,
  MAX(Document) AS Document,
  MAX(Extraction) AS Extraction
FROM Pivoted
GROUP BY Product; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/b70440/7)

这会给你：

```
| PRODUCT | TOTALUSERS |                   LATESTDATE | DOCUMENT | EXTRACTION |
-------------------------------------------------------------------------------
|   prodA |         60 | March, 02 2013 02:00:00+0000 |      113 |        152 |
|   prodB |         45 | March, 02 2013 02:00:00+0000 |       40 |         73 | 
```

* * *

## 更新 1

```
WITH a
AS(
  SELECT    
    activity, 
    username, 
    [Last Accessed] = max(DATEADD(dd, 
                                  DATEDIFF(d, 0, ActDateTime), 
                                  0)), 
    --[#Users] = count(distinct username), 
    CASE 
      WHEN COUNT(activity) IS NOT NULL THEN 1 
      ELSE 0 
    END AS Count,
    CASE 
      WHEN pageURL LIKE '/Document%'
        OR pageURL LIKE '/Database%' THEN 'Document'
      ELSE 'Extraction' 
    END AS [Type] 
  from activitylog
  where pageURL not like '%home%' 
    AND pageURL not like '/Default%'
  group by activity, 
           username, 
           ...
), Pivoted
AS
(
  SELECT *
  FROM a
  PIVOT 
  ( 
    sum([Count]) FOR [Type] IN ( Document , 
                                 Extraction)
   ) AS p
) 
SELECT 
  product,
  SUM(Users) AS TotalUsers,
  MAX(DAte) AS LatestDate,
  MAX(Document) AS Document,
  MAX(Extraction) AS Extraction
FROM Pivoted
GROUP BY Product; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:08:39.117

> 您可以使用 CTE 实现它。

```
;WITH CTE  
AS  
(  
    SELECT *   
    FROM Sample  
    PIVOT  
       (SUM([COUNT]) FOR [TYPE] IN (Document, Extraction)) AS PI  
)  

SELECT   
     Product,  
     SUM(Users) AS Users,  
     MAX(Date) AS Date,  
     MAX(Document) AS Document,  
     MAX(Extraction) AS Extraction  
FROM CTE  
GROUP BY Product; 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/8ba22/1)

# django - django项目下拉引导程序中的登录表单

> ID：15183162
> 
> 赞同：2
> 
> 时间：2013-03-03T06:42:32.313
> 
> 标签：django, forms, drop-down-menu, twitter-bootstrap, login

我一直在尝试在 django 项目的下拉列表（引导程序）中创建和验证登录表单（用户和密码），但该表单从未创建且从未验证，我真的不知道它可能是什么，这是代码（在简历中，我不能在引导下拉列表中放置表单）：

在`forms.py`：

```
class LoginForm(forms.Form):

   username = forms.CharField(min_length = 2, max_length=36,label=_('Username'))

   password = forms.CharField(min_length = 4, max_length=16, widget=forms.PasswordInput(render_value=False), label=_('Password')) 
```

在`views.py`：

```
def index_view(request):
activo = "index"
secciones = seccion.objects.filter(titulo=activo)
mensaje = ""
if request.user.is_authenticated():
    return HttpResponseRedirect('/')
else:
    if request.method == "POST":
        form = LoginForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            usuario = authenticate(username=username,password=password)
            if usuario is not None and usuario.is_active:
                login(request,usuario)
                return HttpResponseRedirect('/')
            else:
                mensaje = "usuario y/o password incorrecto"

ctx = {'activo':activo,'seccion':secciones}
return render_to_response('home/index.html',ctx,context_instance=RequestContext(request)) 
```

在`base.html`：

```
 <div class="nav-collapse"><!-- Other nav bar content -->
        <!-- The drop down mrender_to_response('home/index.html',ctx,context_instance=RequestContext(request))enu -->
            <ul class="nav pull-right sign-in">
            {% if user.is_authenticated %}
                <a id="profile-box" class="btn dropdown-info" data-toggle="dropdown" href="#">
                    <i class="icon-user"></i> {{ user.username }}
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="#">Perfil</a></li>
                    <li class="divider"></li>
                    <li><a id="sign-out-link" href="{% url vista_logout %}">Cerrar Sesion</a></li>
                </ul>
            {% else %}
                <li><a href="/accounts/register"><button class="btn btn-success"  type="submit">Registrase</button></a></li>

                <li class="divider-vertical"></li>
                <li id="sign-in-box" class="dropdown">
                <a id="sign-in-link" class="dropdown-toggle" href="#" data-toggle="dropdown"><button class="btn btn-success">Ingresar</button></a>

                <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                    <form class="js-signin signin" action="." method="POST" accept-charset="UTF-8">{% csrf_token %}
                            <!--{% if form %}-->                                
                                {{ form.as_p }}
                            <!--{% else %}                          
                                <p>
                                    <label for="username">usuario:</label> 
                                    <input id="username" type="text" name="username" />
                                </p>
                                <p>
                                    <label for="password">contraseña:</label> 
                                    <input id="password" type="password" name="password" />
                                </p>
                            {% endif %}-->

                                <input id="remember_me" type="checkbox" name="remember_me" value="1" />
                                <label class="string optional" for="user-remember-me"> Recordar mis datos</label>       
                    </form>

                            <button id="login-button" class="btn btn-block btn-primary" type="submit">Ingresar</button>

                </div>

                </li>           
              {% endif %}
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:29:03.957

您忘记将表单传递给您的上下文数据。

试试这个：

```
ctx = {'activo':activo,'seccion':secciones,'form': form} 
```

# r - 捕获数据输出

> ID：15183165
> 
> 赞同：9
> 
> 时间：2013-03-03T06:42:59.070
> 
> 标签：r

我想从`data`您提供包名称的函数中捕获输出，并且该函数会产生静态输出。我想把它变成一个数据框。

目前以下给出了静态输出：

```
data(package = "ggplot2") 
```

我希望它作为一个数据框，实际上永远不会产生外部静态输出。

```
diamonds                Prices of 50,000 round cut diamonds
economics               US economic time series.
midwest                 Midwest demographics.
movies                  Movie information and user ratings from IMDB.com.
mpg                     Fuel economy data from 1999 and 2008 for 38 popular models of car
msleep                  An updated and expanded version of the mammals sleep dataset.
presidential            Terms of 10 presidents from Eisenhower to Bush W.
seals                   Vector field of seal movements. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T06:49:10.403

这足以让你开始吗？

```
> data(package = "ggplot2")$results
     Package   LibPath                  Item          
[1,] "ggplot2" "/home/mrdwab/R/library" "diamonds"    
[2,] "ggplot2" "/home/mrdwab/R/library" "economics"   
[3,] "ggplot2" "/home/mrdwab/R/library" "midwest"     
[4,] "ggplot2" "/home/mrdwab/R/library" "movies"      
[5,] "ggplot2" "/home/mrdwab/R/library" "mpg"         
[6,] "ggplot2" "/home/mrdwab/R/library" "msleep"      
[7,] "ggplot2" "/home/mrdwab/R/library" "presidential"
[8,] "ggplot2" "/home/mrdwab/R/library" "seals"       
     Title                                                              
[1,] "Prices of 50,000 round cut diamonds"                              
[2,] "US economic time series."                                         
[3,] "Midwest demographics."                                            
[4,] "Movie information and user ratings from IMDB.com."                
[5,] "Fuel economy data from 1999 and 2008 for 38 popular models of car"
[6,] "An updated and expanded version of the mammals sleep dataset."    
[7,] "Terms of 10 presidents from Eisenhower to Bush W."                
[8,] "Vector field of seal movements." 
```

显然，要获取`data.frame`“项目”和“标题”数据，您可以使用：

```
> data.frame(data(package = "ggplot2")$results)[-c(1, 2)]
          Item                                                             Title
1     diamonds                               Prices of 50,000 round cut diamonds
2    economics                                          US economic time series.
3      midwest                                             Midwest demographics.
4       movies                 Movie information and user ratings from IMDB.com.
5          mpg Fuel economy data from 1999 and 2008 for 38 popular models of car
6       msleep     An updated and expanded version of the mammals sleep dataset.
7 presidential                 Terms of 10 presidents from Eisenhower to Bush W.
8        seals                                   Vector field of seal movements. 
```

# c++ - 用已知公式求解缺失变量

> ID：15183167
> 
> 赞同：0
> 
> 时间：2013-03-03T06:43:10.817
> 
> 标签：c++, formula, solver

这就是我目前正在做的事情，但我只是想知道是否有更好的方法？

如果变量已设置，我的运动学变量类只包含一个长双精度值和一个布尔值。我重载了 = 赋值运算符。

```
// v_f = v_o + a*t
bool KinematicEquations::equation_vat(KinematicVariable &vo, KinematicVariable &vf,
                                      KinematicVariable &a, KinematicVariable &t)
{
    if (vf.isUsed() && vo.isUsed() && a.isUsed())
        t = (vf.value() - vo.value()) / a.value();  // t = (vf - vo)/a
    else if (vf.isUsed() && vo.isUsed() && t.isUsed())
        a = (vf.value() - vo.value()) / a.value();  // a = (vf - vo)/t
    else if (vf.isUsed() && t.isUsed() && a.isUsed())
        vo = vf.value() - a.value() * t.value(); // vo = vf - a*t
    else if (vo.isUsed() && t.isUsed() && a.isUsed())
        vf = vo.value() + a.value() * t.value(); // vf = vo + at
    else
        return false;

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:28:57.573

我会考虑的是，with`t = 0`和/或`a = 0`这个等式或多或少是无用的。结果是`vo = vf`. 所以，我会说先检查它们。具有物理知识的用户可能会认为如果 t 或 a 为零，您必须为它们求解：

```
bool KinematicEquations::equation_vat(KinematicVariable &vo, KinematicVariable &vf,
                                      KinematicVariable &a, KinematicVariable &t)
{
    if (t == 0)
        t = (vf.value() - vo.value()) / a.value();  // t = (vf - vo)/a
    else if (a == 0)
        a = (vf.value() - vo.value()) / a.value();  // a = (vf - vo)/t
    else if (vf.isUsed())
        vo = vf.value() - a.value() * t.value(); // vo = vf - a*t
    else if (vo.isUsed())
        vf = vo.value() + a.value() * t.value(); // vf = vo + at
    else
        return false;

    return true;
} 
```

这样做至少可以为您节省一些操作。将变量初始化为`0`如果它们没有被使用，它们将有`0`s 并且一切都很好。此外，当您到达最后两个时，您已经确定`a`并且`t`已使用，因此无需检查。我认为这是一个基于用户感知知识的公平解决方案。

# python - 将图像下载为numpy数组时Python崩溃

> ID：15183170
> 
> 赞同：2
> 
> 时间：2013-03-03T06:43:57.260
> 
> 标签：python, numpy, python-3.x, scipy, urllib

为什么以下代码会导致 python 崩溃？有没有更简单/更好的方法来下载图像并将其转换为 numpy 数组？

```
from pylab import *
from urllib import request
captcha=imread(request.urlopen('http://pastebin.com/etc/CaptchaSecurityImages.php?width=100&height=35&characters=4&b=123')) 
```

请注意，这会导致 python 解释器退出，而不仅仅是打印堆栈跟踪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T08:16:17.273

几个问题：

1.  `imread`无法检测图像类型，默认为`png`.
2.  matplotlib 的[_png.read_png 在 Python 3 上使用 urllib.request object 崩溃](https://github.com/matplotlib/matplotlib/pull/1650)。
3.  该`request.urlopen`对象缺少搜索功能并且不适用于 PIL（matplotlib 使用 PIL 来读取非 png 图像）。

此代码适用于 win-amd64-py3.3：

```
from pylab import *
from urllib import request
from io import BytesIO
url = 'http://pastebin.com/etc/CaptchaSecurityImages.php?width=100&height=35&characters=4&b=123'
data = BytesIO(request.urlopen(url).read())
captcha = imread(data, format='jpg') 
```

# xcode - AppDelegate.h 错误突然出现

> ID：15183173
> 
> 赞同：2
> 
> 时间：2013-03-03T06:44:07.930
> 
> 标签：xcode, compiler-errors, appdelegate

我一整天都没有碰过 AppDelegate.h 文件，突然我收到 3 个错误...

```
//  AppDelegate.h

#import <UIKit/UIKit.h>  //!Expected selector for Objective-C method
                         //!Expected method body

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;  //!Unknown type name "ViewController" did you mean "UIViewController?

@end 
```

我把上面代码中的错误作为注释。

我看到其他人过去也有类似的错误，但我没有看到对我的情况有意义的答案。

我的根 UIViewController 被命名为 ViewController。我做了什么导致这些错误突然出现？我今天所做的只是添加一个新的 ViewControler 和 xib 以在 UIPopoverController 中使用。我刚刚让弹出框正常工作，这开始发生了。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:24:06.793

您在作为`#import`该头文件的源文件的行中引入了语法错误。

# jquery - 如何使用 jquery 迭代 DOM ol 并将其 li 值保存到数组

> ID：15183179
> 
> 赞同：0
> 
> 时间：2013-03-03T06:44:38.167
> 
> 标签：jquery

我想迭代 ol 并将所有 li 保存到数组中

```
<ol id="sortableAvailable">
  <li id="1"><a href="" >Foo 1</a></li>
  <li id="2"><a href="" >Foo 2</a></li>
  <li id="3"><a href="" >Foo 3</a></li>
  <li id="4"><a href="" >Foo 4</a></li>
</ol> 
```

js应该是这样的：

```
var testInfoList = {};
testInfoList.ConfiguredTests = [];    

/* some iteration that do the following */
testInfoList.ConfiguredTests.push({
    ID: /*here i want the ID*/,
    Value: /*here i want the value*/
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:47:07.483

您可以使用[`.map`](http://api.jquery.com/map/)：

```
testInfoList.ConfiguredTests = = $("#sortableAvailable li").map(function() {
    return { ID:this.id, Value:$(this).find("a").text() };
}).get(); 
```

`map`将遍历您的元素（选择查找`li`列表中的所有 s）并对每个元素应用一个函数。结果将是一个 jQuery 对象，可以使用`.get()`.

我假设“值”是指链接中的文本；如果你想要别的东西，你可以从当前元素中提取它（`this`是 DOM 元素，`$(this)`将它包装在一个 jQuery 对象中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T06:48:13.163

```
var myarray = [];    

$("ol li").each(function(){
    myarray.push({
                   ID: $(this).attr('id'),
                   Value: $(this).html()
                 });
}); 
```

# javascript - 无法使用“in”运算符搜索 .... in undefined

> ID：15183183
> 
> 赞同：0
> 
> 时间：2013-03-03T06:45:03.793
> 
> 标签：javascript

我有以下代码：

```
function sendAjax(myData){
  $.ajax({
      type: myData["verb"],
      url: "url" in myData["url"] ? myData["url"] : "/default123",
      //.............. 
```

如果我没有将“ `url`”作为键传递，那么我会得到“ `Uncaught TypeError: Cannot use 'in' operator to search for 'url' in undefined`”的错误。

我该如何摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:46:43.743

你是这个意思吗？

```
url: myData["url"] || "/default123", 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T06:47:34.177

`url : "url" in myData ? myData["url"] : "/default123"`

# jquery - 为什么 jQuery 包只呈现在新 MVC4 _Layout 页面的底部？

> ID：15183185
> 
> 赞同：2
> 
> 时间：2013-03-03T06:45:32.763
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我和我相信许多其他开发人员都习惯于在 then`<head>`标记或视图页面中的 '' 标记中编写更小的内联脚本块。现在我的头看起来像这样，

```
<head>
    <title>Simple Demo</title>
    <script>
        function setCheckCheckboxState(checkbox, state) {

        }

        $(function() {

            $("#tri-state").prop("indeterminate", true);
        });
    </script>
</head> 
```

尽管代码由于某种原因运行良好，但在 Chrome 开发人员控制台中，就在`$(function()`调用上方，我得到了错误`Uncaught ReferenceError: $ is not defined`

现在我不喜欢在尝试调试该代码时看到与我的代码无关的错误，因此我已将其移至`@Scripts.Render("~/bundles/jquery")`标签`<head>`中。当我们都可以访问一个几乎本能的函数时，为什么 MS 要将它移到正文之后，我们使用该函数仅在整个文档加载后才调用任何 jQuery 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:27:40.850

主要是为了性能。请参阅： [jQuery Script included at the bottom of page in mvc 4 template](https://stackoverflow.com/questions/11437063/jquery-script-included-at-bottom-of-page-in-mvc-4-template "jQuery 脚本包含在 mvc 4 模板的页面底部")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T06:53:52.300

必须在使用 jQuery的`jQuery`任何函数之前声明脚本。

需要在 jQuery 脚本引用之后调用此代码以解决`Uncaught Reference`您遇到的错误。

```
$(function(){...}); 
```

根据最佳实践（由[Yahoo!](http://developer.yahoo.com/performance/rules.html)和许多其他人完成），脚本被添加到`</body>`标签末尾之前，这就是 MS 选择这种方法的原因。从技术上讲，文档准备功能`$(function(){});`应该不是必需的，因为脚本已经在页面底部，即在 UI 元素加载到 DOM 之后。最好始终将其仅用于安全措施。

```
<body>
   <div id="content"></div>
   @Scripts.Render("~/bundles/jquery")
   <script type="text/javascript">
       $(function() {
           ....
       });
   </script>
</body> 
```

# php - 查找数组类对象值 - 如果存在：将其作为第一个数组键移动

> ID：15183190
> 
> 赞同：1
> 
> 时间：2013-03-03T06:46:02.707
> 
> 标签：php, arrays, sorting, object

我正在寻找一个 php 函数，它可以找到数组类对象值“FIND_ME”并将其交换为第一个数组键（如果存在）。

这是我当前的数组输出：

```
Array ( 
        [0] => stdClass Object ([id] => 1 [uid] => 52 [type] => A_TEST [title] => TITLE [value] => 1 ) 
        [1] => stdClass Object ([id] => 2 [uid] => 52 [type] => TEST [title] => TITLE [value] => 1 )
        [2] => stdClass Object ([id] => 3 [uid] => 52 [type] => FIND_ME [title] => TITLE [value] => 1 )
    ) 
```

这是我需要的结果：

```
Array ( 
        [0] => stdClass Object ([id] => 3 [uid] => 52 [type] => FIND_ME [title] => TITLE [value] => 1 ) 
        [1] => stdClass Object ([id] => 2 [uid] => 52 [type] => TEST [title] => TITLE [value] => 1 )
        [2] => stdClass Object ([id] => 1 [uid] => 52 [type] => A_TEST [title] => TITLE [value] => 1 )
    ) 
```

结果： Array[2] 更改并变为 Array[0] 因为`type => FIND_ME`在数组中找到。

注意：我不关心其他键的顺序。

任何想法？

编辑：好的，我设法找到了`type => FIND_ME`使用 foreach() 的键号：

```
foreach($array as $key => $value) {
        if ($value->type == 'FIND_ME') {
            $found = $key;
            break;
        }
    } 
```

但是如何将它交换为数组的第一个键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:18:51.167

```
$found = $others = array();
foreach($array as $key => $value) {
    if ($value->type == 'FIND_ME') {
        $found[] = $value;
    }else{
        $others[] = $value;
    }
}
$array = array_merge($found,$others); 
```

# java - 如何从 DB2 数据库中获取一个值并将其分配给一个字符串值？

> ID：15183200
> 
> 赞同：-1
> 
> 时间：2013-03-03T06:47:12.233
> 
> 标签：java, database, string, methods, db2

我正在使用连接到 DB2 数据库的 java 应用程序。我想做的是从我查询过的 DB2 表中获取一个值并将其分配给 java 中的字符串值，你能教我怎么做吗？我自己尝试过，我会向您展示我的代码，但我认为并且知道这是错误的，请帮助...

```
public class GetValueFromDB2 implements ActionListener{
    static String value;

    public void actionPerformed(ActionEvent e){
      Object source = e.getSource();
      if(source==testValue){ //testValue = a button to test my results
        setValue(getValue());
        JOptionPane.showMessageDialog(null, value);
      }
    }

    public static void main(String[] args){
      //GUI Implementations here...
    }

    public static void setValue(String val){
    try{
      Connection con = DriverManager.getConnection("jdbc:db2://localhost:50000/db","username","password");          
      String sql = "select column1 from \"user\".\"mytable\" where column2='abc'";
      Statement st = con.createStatement();
      ResultSet rs = st.executeQuery(sql);
      val = rs.getString(1); //I think this is the part I'm mistaken
      value = val;
    }catch(SQLException e){
      JOptionPane.showMessageDialog(null, e);
    }
    }

    public static String getValue(){
      return value;
    }
} 
```

我的数据库中的表是这样的：

```
"table: mytable, schema: user"
column1            column2
--------           --------
john               abc
jeff               xyz
ian                123 
```

所以基本上，JOptionPane 应该将“john”显示为字符串输出，这就是我想要做的，请帮助我，我真的很需要这个。

*   我 100% 确定我的数据库已连接，只是我无法获得我想要的值，因为在某种程度上我做错了方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T12:48:05.763

`rs.next()`您在获取值之前忘记调用：

```
if (rs.next()) {
    val = rs.getString(1);
} 
```

如果您不调用`rs.next()`，则光标不会指向任何行。

# image - Google Plus 专辑网址

> ID：15183212
> 
> 赞同：12
> 
> 时间：2013-03-03T06:49:33.633
> 
> 标签：image, google-app-engine, google-plus

我正在使用谷歌应用引擎为我拍摄的所有照片创建一个照片库网站。我想显示的照片在我的 google plus 帐户中的公共相册中。我希望我的应用程序自动显示该相册中的所有照片。我知道我可以将所有 url 存储到数据存储中的图像中，然后将 url 传递给模板并渲染图像，

```
images = LinksToImages.all()
self.renderTemplate(images)

#  Template
{% for img in images %}
<img src={{img}}>
{% endfor %} 
```

我想知道是否有一种方法可以自动获取 google plus 相册中的所有图像，而无需每次手动输入网址。我曾考虑过使用[google plus api](https://developers.google.com/+/api/)，但我只需要从一个公共相册中获取图像，不需要访问用户帐户。

有没有办法可以从公共 google plus 相册中检索所有图像或图像链接？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T23:57:59.007

你可以这样做，但答案是一种技巧，因为它不是通过 Google+ 本身完成的。

### 诀窍：

要列出 Google+ 相册中的所有照片，请使用 Picasa 网络相册数据 API。应该这样做并不明显，但在我写这篇文章时，所有 Google+ 照片都是 Picasa 照片。

Picasa 的相关文档[位于相册中的列出照片](http://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#ListAlbumPhotos)下。

* * *

### 答案：

基本上，在

```
https://picasaweb.google.com/data/feed/api/user/userID/albumid/albumID 
```

您的 Google+ 相册的值在哪里`UserID`和是。`albumID`这会给你一些 Xml，列出所有的照片。

* * *

### 说明：

从 Google+ 页面中如何找到`userID`或可能并不明显`albumID`。

查找 ID 的一种方法是在 Google+ 上导航到您想要的相册，然后将该 URL 中的长数字插入到上述样式中。

具体来说，对于 John "Maddog" Hall 的相册 "Campus Party, Brasil - Second Edition"，我们将 Url 从

```
https://plus.google.com/photos/115999964287637644901/albums/5659736500890118225 
```

至

```
 https://picasaweb.google.com/data/feed/api/user/115999964287637644901/albumid/5659736500890118225 
```

从那里，您可以解析生成的 Xml 并列出所有照片。如果您需要，也可以使用字幕信息、缩略图等。图像的 URL`/feed/entry/media:group/media:content`在生成的 Xml 中。

我假设您知道如何[在 Python 中解析和读取 Xml](https://stackoverflow.com/questions/1912434/easiest-way-to-parse-xml-in-python)。

* * *

### 概括：

如果您需要能够列出用户的所有相册，您可以使用以下样式的 Url，再次替换`userID`为 Google+ 中的数字。

```
https://picasaweb.google.com/data/feed/api/user/userID 
```

# terminal - 从applescript导出到文本文件时如何删除自动换行？

> ID：15183217
> 
> 赞同：0
> 
> 时间：2013-03-03T06:50:21.620
> 
> 标签：terminal, applescript, echo

如果我要运行命令

`do shell script "echo hello > ~/Desktop/file.txt"`

它会在我的桌面上生成一个名为 file.txt 和内容的文本文件

> 你好
> 
> > （想象这里有一个空行）

我怎样才能阻止它创建这条线，我无法在网上找到任何资源。还是我的在线选项可以在创建后找到某种方法将其删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:36:32.207

```
do shell script "printf %s " & quoted form of "hel'\\%slo" & " > ~/Desktop/file.txt" 
```

`printf aa%sbb`会打印`aabb`. `getconf ARG_MAX`如果输入长于字节（目前约为 300 kB），则此方法不起作用。

这也适用于更长的字符串：

```
set f to POSIX file ((system attribute "HOME") & "/Desktop/file.txt") as text
set b to open for access f with write permission
set eof b to 0
write "α" to b as «class utf8»
close access b 
```

没有`as «class utf8»`该文件将被保存为 MacRoman。`as Unicode text`是 UTF-16。

`do shell script`使用 /bin/sh，所以`do shell script "echo -n hello"`除非`-n hello`你添加`shopt -u xpg_echo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:11:51.733

我相信这样做：

```
do shell script "printf hello > ~/Desktop/file.txt" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:39:07.600

DigiMonk's code works.

## But a note to future readers:

The original posters code :

```
do shell script "echo hello" > "~/Desktop/file.txt" 
```

Is incorrectly posted and will never work as is. Applescript will compile it. But in effect it is say 'is hello **greater than** ~/Desktop/file.txt

Correct forms:

Quote and escape the quotes for the text string. ( the better option if the text string is long and contains spaces.)

```
do shell script "echo \"hello world\" > ~/Desktop/file.txt" 
```

or use no quotes.

```
do shell script "echo hello > ~/Desktop/file.txt" 
```

Also note you cannot quote around the file path when using the tilde ~ symbol. The tilde symbol is used to point to the users home directory. Quoting it will stop it working.

# php - PHP CLI 不使用额外的 .ini 文件

> ID：15183218
> 
> 赞同：4
> 
> 时间：2013-03-03T06:50:22.807
> 
> 标签：php

我似乎找不到答案，为什么当我从 CLI 运行 PHP 时，附加的 ini 文件选项设置为无。我知道，当我使用该`-c`标志时，我可以指定要加载的特定配置文件，但是，我无法找到一个标志来指定从中加载 ini 文件的目录。有旗帜可以做到这一点吗？或者是否有我可以编辑的文件来指定 ini 目录的位置？

这是运行`php -i`产生的结果：

```
Configuration File (php.ini) Path: /usr/local/lib
Loaded Configuration File:         /usr/local/lib/php.ini
Scan for additional .ini files in: (none)
Additional .ini files parsed:      (none) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T06:52:53.117

您必须重新编译 PHP 才能启用它，例如：

```
./configure ... --with-config-file-scan-dir=/etc/php.d 
```

# ruby-on-rails - ubuntu中的gem install rails输出错误

> ID：15183220
> 
> 赞同：4
> 
> 时间：2013-03-03T06:51:02.443
> 
> 标签：ruby-on-rails, ruby, ubuntu, rubygems, gem

我是这个环境的新手，我正在尝试安装 rails。我安装了 ruby​​ 并使用`rvm list`我得到 ruby​​-2.0.0-p0 作为我的当前和默认值进行了检查。安装 ruby​​ 后我尝试安装 rails

```
gem install rails 
```

得到错误：

```
ERROR: Loading command :install (LoadError)
       cannot load such file -- openssl
ERROR: while executing gem ... (NoMethodError)
       undefined method `invoke_with_build_args` for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T07:00:47.910

你在那里缺少 openssl :)

安装 openssl 包

```
rvm pkg install openssl 
```

删除您正在使用的 Ruby 安装

```
rvm remove 2.0.0 
```

最后用 openssl 重新编译 Ruby

```
rvm install 2.0.0 --with-openssl-dir=$HOME/.rvm/usr 
```

现在一切都应该正常了。不要忘记：

```
rvm use 2.0.0 --default 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-20T02:56:43.907

对于从源代码编译的酷孩子，即使我的机器上安装了最新版本的 OpenSSL，我也遇到了这个问题。原来我仍然需要这个库：

```
sudo apt-get install libssl-dev 
```

然后我重新编译，一切正常。

# html - 网站的 HTML 布局无法正确显示

> ID：15183222
> 
> 赞同：0
> 
> 时间：2013-03-03T06:51:20.243
> 
> 标签：html, css, alignment, mediawiki

我正在使用 MediaWiki 为在线游戏制作 wiki。但是，我似乎无法修复这个简单的错误。请参阅屏幕截图。请忽略媒体 wiki 代码，例如 '''。他们的意思是粗体标签。这段代码似乎一切正常，但我认为问题与 align=. 提前谢谢你。

```
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">Wiki Links</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">
<ul>
<li>[http://link.com/to/contact/page Website Support]</li>
</ul>
</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">Zone iPhone Support</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">Zone iPhone Staff Information</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">Zone iPhone Shops</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">Zone iPhone Staff Events</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">Zone iPhone Games</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">NPC Information</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 25%;" align="left">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">External Links</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">All content goes here.</div></td>
</tr>
</table>
<table border="1" style="margin-right: 5px; margin-bottom: 5px; border-collapse: collapse; width: 50%;">
<tr>
<td height="30px" style="text-align: center; font-weight: bold; background-color: #639CFB;">About Zone iPhone</td>
</tr>
<tr>
<td style="height: 190px; vertical-align: top; background-color: #C5D8FF;"><div id="zonecontent" style="margin: 5px;">'''Zone iPhone''' is an iOS server made to bring the GraalOnline Server Zone to life on mobile devices. It has vast battlegrounds and fighting with guns. Players can spar each other, help each other on missions, or visit other planets so they can win it. Players can also participate in many events and mini-games, including a similar game to Bomberman.<br /><br />'''Genre:''' Massively Multiplayer Online Role Playing Game<br />'''Date of Release:''' December 17, 2012<br />'''Owner:''' Eurocenter Games<br />'''Manager:''' Matt</div></td>
</tr>
</table> 
```

截图：

![截图](../Images/e91a66145d2b79c106df3a76f31b3449.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:57:07.813

不要`<table>`用于布局。您显示的数据不是表格数据，因此不要使用`<table>`.

使用块元素，喜欢`<div>`并将它们设置为按逻辑页面顺序浮动或流动。它不仅可以解决您遇到的问题，而且您的标记会更加清晰，并且网络蜘蛛会更好地理解它。

当然，如果您使用 MediaWiki，为什么不使用 MediaWiki 语法来生成 HTML？

# ios - 用于测试八哥游戏的苹果证书

> ID：15183223
> 
> 赞同：0
> 
> 时间：2013-03-03T06:51:21.993
> 
> 标签：ios, starling-framework

我想知道如何在真正的 iPad 上测试我的应用程序。我买了一个苹果开发者 ID，我想在我的 iPad 上做一些测试。

问题是我需要注册我的应用程序，需要输入屏幕截图和图标，描述和费用等...

问题是我还不知道所有这些东西。我只想创建一个可用于测试目的的证书。

有谁知道从苹果那里得到一个最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:14:25.413

不，您不需要输入屏幕截图、图标和所有内容。只需转到您的开发者帐户中的“iOS Provisioning Portal”，然后启动“Development Provisioning Assistant”。按照步骤操作，您将上路:)

# android - 应用程序在重新启动时不断忘记共享首选项

> ID：15183224
> 
> 赞同：7
> 
> 时间：2013-03-03T06:51:36.870
> 
> 标签：android, sharedpreferences

我不知道该怎么办了

似乎在 android 3.0 及更高版本上运行良好，但在 android 2.3.3 上，每次我启动应用程序时它都会再次询问用户名/密码。

我正在使用共享首选项。

以下是我保存首选项的方法：

```
 SharedPreferences preferences = MyApplication.getAppContext().getSharedPreferences("athopbalance", MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putString("username", username).commit();
        editor.putString("password", password).commit(); 
```

以下是我阅读它们的方式：

```
 SharedPreferences preferences = MyApplication.getAppContext().getSharedPreferences("athopbalance", Context.MODE_PRIVATE);
    String username = preferences.getString("username", "");
    String password = preferences.getString("password", ""); 
```

我还尝试使用以下代码保存首选项：

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(MyApplication.getAppContext());
        SharedPreferences.Editor editor = preferences.edit();
        editor.putString("username", username).commit();
        editor.putString("password", password).commit(); 
```

并使用以下代码阅读它们：

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(MyApplication.getAppContext());
    String username = preferences.getString("username", "");
    String password = preferences.getString("password", ""); 
```

但它也不起作用。

问题是在我重新启动应用程序之前，我可以看到它们仍然存在。但是，一旦我重新启动 - 我最终会得到“”（空字符串）作为用户名和“”作为密码。

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:02:56.517

```
public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        Log.d(TAG, "onCreate() called");
    }

    public MyApplication() {
        super();
        Log.d(TAG, "Constructor called");
        instance = this;
    }

    public static MyApplication getApplication() {
        if (instance == null) {
            instance = new MyApplication();
        }
        return instance;
    }
} 
```

和用法：

```
MyApplication.getApplication().getSharedPreferences(MY_PREFERENCES, Context.MODE_PRIVATE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:00:50.493

尝试这个：

```
 SharedPreferences preferences = context.getSharedPreferences("YOUR_TAG", 0);
 String username = preferences.getString("username", "");
 String password = preferences.getString("password", "");

  SharedPreferences.Editor editor = preferences.edit();
    editor.putString("username", username).commit();
    editor.putString("password", password).commit(); 
```

其中 context 是您的应用程序的上下文：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        context = this; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T08:44:17.667

您有 2 个选项：

1.  在活动的生命周期内获得共享偏好值。

2.  打电话`.clear`之前`.commit`

看我的回答：

[重新启动Android后自定义小部件中的Android持久可检查菜单](https://stackoverflow.com/questions/36939380/android-persistent-checkable-menu-in-custom-widget-after-reboot-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T08:29:33.120

我不知道到底发生了什么，但是在我重新启动后，模拟器问题就消失了。

抱歉浪费你的时间

# javascript - this.initialize(arguments) vs this.initialize.apply(this, arguments)：有什么区别？

> ID：15183226
> 
> 赞同：5
> 
> 时间：2013-03-03T06:51:44.073
> 
> 标签：javascript, backbone.js

如果您查看 Backbone.js 的源代码，您会看到这种模式的多种用途：

```
 this.initialize.apply(this, arguments); 
```

例如，这里：

```
 var Router = Backbone.Router = function(options) {
    options || (options = {});
    if (options.routes) this.routes = options.routes;
    this._bindRoutes();
    this.initialize.apply(this, arguments);
  }; 
```

为什么不直接写`this.initialize(arguments)`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T06:54:36.397

```
this.initialize.apply(this, arguments) 
```

像这样工作：

```
this.initialize(arguments[0], arguments[1], arguments[2], ...) 
```

*arguments 中的每一项都作为参数传递给`initialize()`*

这与只是：

```
this.initialize(arguments) 
```

*`arguments`作为第一个也是唯一的参数传递给`initialize()`*

换句话说，如果函数需要一个数组作为第一个参数，则使用`this.initialize(arguments)`，否则使用`.apply()`。

# php - php - 将数组传递给 $_POST

> ID：15183230
> 
> 赞同：0
> 
> 时间：2013-03-03T06:52:52.460
> 
> 标签：php, arrays, post

我正在开发一个 PHP 应用程序，该应用程序具有对程序运行至关重要的一个（许多）数组。我需要在页面加载之间保持这个数组的内容完整。我知道这`$_POST`可用于在页面加载时保留大多数数据类型，但是如何将数组...放入数组中？

该数组是一个简单的数组，但它的索引数量取决于用户输入——它的范围可以在 1 到 50 之间。

有什么方法可以在页面加载之间保留数组的数据`$_POST`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T06:58:17.797

你的问题不是很清楚。在页面之间传递变量应该保存在一个`$_SESSION`非`$_POST`变量中。将数组存储在会话变量中与将任何变量保存到会话变量中相同。

```
$session_start();
$_SESSION['my_array'] = array('one', 'two', 'three');
foreach($_SESSION['my_array'] as $value) {
    echo $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:55:44.257

客户端/服务器开发中的规则 #1：*永远不要信任客户端*。

您最好将数组存储在 PHP 的会话状态中，或者将其序列化到磁盘。

幸运的是，这很容易：

```
$_SESSION['someKey]' = $myArray; 
```

您将其存储在页面中的建议还有另一个问题：如果用户使用后退按钮并重新提交或以其他方式破坏您的页面排序会发生什么？通过在客户端上存储状态，您不能再依赖它了。

# macos - 使用 ssh 处理程序链接粘贴到现有的 iterm 选项卡

> ID：15183233
> 
> 赞同：1
> 
> 时间：2013-03-03T06:53:40.163
> 
> 标签：macos, ssh, applescript, osx-snow-leopard, iterm

我使用 ssh 网关，它使用 key-auth。这意味着我的工作站没有被键入我每天使用的任何服务器。我使用 ssh:// 处理程序，我在我的 PC 上有一个脚本可以使用 putty（单击链接，然后单击打开 putty 窗口进行粘贴）。我想用 applescript 做一些类似的事情，但甚至无法让基本的脚本工作。

有没有更简单的方法？我真的只需要能够将“ssh://root@ip:port”转换为“ssh root@ip -p port”（例如）并将其粘贴到活动的 iterm2 选项卡中。如果有更优雅的方式来做到这一点，我愿意接受建议。我发现有几十页跳过了这个想法，但我真的无法理解他们使用的 applescript（我似乎也无法重现它）。

编辑澄清：

我总是在 iterm 中打开一个到网关的 ssh 会话，在这里我保留了我正在做的各种事情的多个屏幕。理想情况下，我只想把它扔到我的剪贴板中，这样我就可以点击我的网关和 cmd+v。这比与 iterm 交互更容易，但是我无法围绕 AppleScript 来解析参数行。此外，我修改了 info.plist 以接受“ssh”作为方案，但还需要其他东西吗？

=------------------------=

这是我在继续搜索后得到的结果，虽然它在测试期间主要在 CLI 中工作（打开 script.app/ssh://root@127.0.0.1:22），但它不适用于我的浏览器。坦率地说，我真的不知道自己在做什么。

```
on open location this_URL

    set oldDelims to AppleScript's text item delimiters
    set AppleScript's text item delimiters to {"ssh://", ":"}
    set preBuff to item 2 of the text items of this_URL
    set prePort to item 3 of the text items of this_URL as integer
    set preLine to "ssh " & prebuf & " -p " & prePort

    set the clipboard to preLine

end open location 
```

=------------------------=

我在这方面做了更多的工作，并且：

```
on open location this_URL

    set oldDelims to AppleScript's text item delimiters
    set AppleScript's text item delimiters to {"ssh://", ":"}
    set preBuff to item 2 of the text items of this_URL
    set prePort to item 3 of the text items of this_URL as integer
    set preLine to "ssh " & preBuf & " -p " & prePort

    -- debug dialog
    display dialog the [preLine]
    buttons("exit")

    set the clipboard to preLine

end open location
-- debug dialog
display dialog the ["didn't run"]
buttons("exit") 
```

在浏览器中单击 ssh:// 链接时将弹出“未运行”对话框，但是“打开位置”中包含的所有内容似乎都没有被触及。

编辑：我的 info.plist - [http://pastebin.com/JgRps1B5](http://pastebin.com/JgRps1B5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:31:00.013

我现在实际上已经让这个工作了，使用这个：

```
on open location test
    if test contains "rm" then --shitty sanitization
        display dialog the ["Link may be malicious"] --debug
    else
        set oldDelims to AppleScript's text item delimiters
        set AppleScript's text item delimiters to {"ssh://", ":", "/"}
        set preHost to item 2 of the text items of test
        set prePort to item 3 of the text items of test as integer
        set final to "ssh " & preHost & " -p " & prePort
        set the clipboard to final
        display dialog the [final] --debug
    end if
end open location 
```

我不知道为什么一个工作而另一个没有，我只能猜测它没有通过一些错误。最终结果：

ssh://root@127.0.0.1:22/（ex）作为“ssh root@127.0.0.1 -p 22”被放置在剪贴板中

所以在大多数情况下，这已经解决了（我只是不知道为什么）。

# javascript - 找不到所需模块的 node.js 变量

> ID：15183234
> 
> 赞同：0
> 
> 时间：2013-03-03T06:53:47.760
> 
> 标签：javascript, node.js

我试图弄清楚当`var fs = require('fs');`稍后在我的代码中尝试使用我的变量时，我不知道 javascript 和/或节点是什么。我让它在另一个文件中以相同的方式工作，其他`require`d 变量也是如此。下面的代码...谢谢！

编辑：这是我得到的错误：`ReferenceError: Can't find variable: fs`

编辑编辑：可能值得注意的是，我的文件中确实拥有并使用`fs = require('fs')`了该`world.js`文件，这也是该文件所必需的。

```
var keychain = require('keychain');
var world = require('./world').World;
var authentication = require('./authentication');
var fs = require('fs');

var getApps = function(appname, version, description){
  keychain.getPassword({ account: 'lightmanUsername', service: 'lightman' }, function(err,username) {
    keychain.getPassword({ account: 'lightmanPassword', service: 'lightman' }, function(err,password) {
      if (password === null) {
        console.log("Not logged in");
      } else {
        world(function(world) {

          authentication.authenticate(username,password);

          spooky.then(function(){
            this.capture('body.png', {
              top: 0,
              left: 0,
              width: 1080,
              height: 800
            });
          });

          spooky.then(function(){
            var app = this.evaluate(function(){
              return $('.fwb').text();
            });
            console.log("APPS: " + app);
            this.download('https://developers.facebook.com/apps', 'app_list.html');
          });

          spooky.then(function(){
            var appList = fs.readFile('app_list.html');
            console.log(appList);
          });

          spooky.run();

        });
      }
    });
  });
};
exports.getApps = getApps; 
```

# python - 每个句子的单词数

> ID：15183237
> 
> 赞同：0
> 
> 时间：2013-03-03T06:54:10.527
> 
> 标签：python, numpy

我正在阅读 Python 2.7 中的文本文件，我想做的是将文本文件的每个句子中的单词数填写到一维数组中。这是我所拥有的：

```
f = open(file_txt, 'r')

sen_prog = []

for line in f:
    sents = line.split('.')
    sen_prog.append(sents)

sen_p = []

for a in sen_prog:
    for b in a:
        sen_p.append(b)

sen_p = numpy.array(sen_p)
sen_p = sen_p[sen_p!='-']

sen_d = []

for c in sen_p:
    sen_d.append([len(x.split()) for x in sen_p])

sen_d = numpy.array(sen_d)
sen_d = numpy.ravel(sen_d)

print sen_prog, sen_d 
```

问题是它创建了数组，但它给出了错误的句子计数。我的文本文件有 55 个句子（每个句子用句号 '.' 分隔），但它给出了错误的数字……需要帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:13:25.607

这制作了一个带有句子长度的列表。

```
with open('path/to/file', 'r') as f:
    l = [len(x.split()) for x in f.read().split('.')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:05:52.860

您正在逐行读取文件。假设文件是​​这样的，一个句子跨越多行，你可能会得到一个错误的计数。

```
This is line 1\. This 
is line 2\. This is 
line 3. 
```

sen_prog 将具有以下值：

```
[ "This is line 1", "This", "is line 2", "This is", "line 3", ""] 
```

这可能不是您想要的。

你可能想做：

```
sen_prog = " ".join(f.readlines()).split(".") 
```

所以 sen_prog 是

```
[ "This is line 1", "This is line 2", "This is line 3", ""] 
```

对于上述输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:50:31.870

这应该可以做到，并且还可以在一行中解释多个句子：

```
sen_prog = []
sentence = ''

for line in f:
    parts = line.split('.')
    if len(parts) > 1:
        sentence += parts[0]
        sen_prog.append(sentence)
        if len(parts) > 2:
            sen_prog.append(parts[1:-1])
        sentence = parts[-1] 
```

# c++ - c ++模板：避免零长度数组而不占用额外空间

> ID：15183239
> 
> 赞同：4
> 
> 时间：2013-03-03T06:55:07.113
> 
> 标签：c++, templates

## 笔记：

根据[liveworkspace.org](http://liveworkspace.org/code/3PdFq$0)的说法，这个问题的答案适用于 g++ (4.7.2)、clang (3.2) 和 icc (13.0.1) 的最新版本，但根据 Stephen Lin 的评论，这取决于[空基优化](http://en.wikibooks.org/wiki/More_C++_Idioms/Empty_Base_Optimization)和的实施`std::tuple`。

* * *

## 原来的问题：

如果我有一个看起来像这样的模板结构：

```
template<
    class T1, unsigned short N1,
    class T2, unsigned short N2
>
struct ComboThree {
    T1 data_1[N1];
    T2 data_2[N2];
}; 
```

我可以通过专门化它来避免零长度数组和额外的对齐填充：

```
template<class T1, class T2>
struct ComboThree<T1, 0, T2, 0> {
};

template<class T1, class T2, unsigned short N2>
struct ComboThree<T1, 0, T2, N2>
{
    T2 data_2[N2];
};

template<class T1, unsigned short N1, class T2>
struct ComboThree<T1, N1, T2, 0>
{
    T1 data_1[N1];
}; 
```

但是，当 TX/NX 对中的 X 变得更大时，这样的专业化变得有些麻烦。在我的项目中，不同组合的实际数量可能会少于五个，所以我最终可能根本不使用模板，但我很好奇：

**有没有办法使用 TEMPLATE MAGIC 来避免零长度数组，同时避免占用任何额外空间？**

例如，这个：

```
template<class T, unsigned short N>
struct Array {
    T data[N];
};

template<class T>
struct Array<T, 0> {};

template<
    class T1, unsigned short N1,
    class T2, unsigned short N2
>
struct ComboTwo {
    Array<T1, N1> data_1;
    Array<T2, N2> data_2;
}; 
```

避免了零长度数组，但空结构占用额外空间。另一方面，这是：

```
template<class T, unsigned short N>
struct Array {
    T data[N];
};

template<class T>
struct Array<T, 0> {};

template<
    class T1, unsigned short N1,
    class T2, unsigned short N2
>
struct ComboFour : Array<T1, N1>, Array<T2, N2> {}; 
```

似乎做我想做的事（是吗？），但我不知道如何访问程序中 Array<> 基本结构中的数据。 [它还具有以下 Stephen Lin 指出的其他限制。](https://stackoverflow.com/a/15183353/1502548)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:14:22.973

这不是一个完整的答案，但很难放入评论中。要访问 的子对象`ComboFour`，如果您真的想做最后一个选项，则需要以下丑陋的语法：

```
ComboFour<int, 2, float, 1> cf;
cf.Array<int, 2>::data[0] = 0;
cf.Array<int, 2>::data[1] = 1;
cf.Array<float, 1>::data[0] = 2.0f; 
```

您可能可以使用一些访问器函数来清理它，但它仍然不是很好。

但是，更大的问题是以下错误：

```
ComboFour<int, 1, int, 1> cf2 // fails to compile 
```

因为同一个类不能被用作父类两次。

（另外，请注意，`Array<T, 0>`子对象`ComboFour`可能会或可能不会占用零空间，这称为“空基优化”，标准允许但不是必需的。）

可能有一些方法可以解决第二个问题......我认为继承`std::tuple<...>`（可能会或可能不会通过您的标准库实现在内部使用空基优化来实现）`Array<T, N>`，如果你这样做，可能是最简单的方法确实必须这样做，但这会使语法更加丑陋。

**编辑**：这适用于 GCC 4.7.2

```
template<
    class T1, unsigned short N1,
    class T2, unsigned short N2,
    class T3, unsigned short N3
>
struct Combo : std::tuple<Array<T1, N1>, Array<T2, N2>, Array<T3, N3>>
{
}; 
```

然后...

```
Combo<int, 2, int, 2, float, 3> c;
std::get<0>(c).data[0] = 0;
std::get<0>(c).data[1] = 1;
std::get<1>(c).data[0] = 2;
std::get<1>(c).data[1] = 3;
std::get<2>(c).data[0] = 0.0;
std::get<2>(c).data[1] = 1.0;
std::get<2>(c).data[2] = 2.0;

assert(sizeof(Combo<int, 0, int, 0, float, 1>) == sizeof(float)); 
```

（老实说，标准库或多或少需要空基优化才能使用，所以即使它不是必需的，如果任何最近的编译器不支持它，我都会感到惊讶；无论是否`std::tuple<...>`以书面形式正确利用这一点优化是另一回事。）

# c# - 每秒将变量增加 X

> ID：15183244
> 
> 赞同：-3
> 
> 时间：2013-03-03T06:55:59.910
> 
> 标签：c#, timer

我被困在代码中的这一部分。我希望一个 int 变量每秒增加 X 直到（变量<=必需的数字）。请指导我。

编辑//我有一个变量'i'。我希望它的最大值是.. 280 我想对变量执行增量函数，以便“i”的每一秒值增加 1 直到 (i=280)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T06:58:47.147

你想让它成为单线程吗？

```
int i = 0;
while (i < max)
{
    i++;
    Thread.Sleep(x); // in milliseconds
} 
```

或多线程：

```
static int i = 0; // class scope

var timer = new Timer { Interval = x }; // in milliseconds
timer.Elapsed += (s,e) =>
    {
        if (++i > max)
            timer.Stop();
    };
timer.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:00:33.810

您可以创建一个间隔为 1 秒的 Timer 类的实例（在构造函数中传递 1000），然后注册 Elapsed 事件。在事件处理程序代码中执行您正在尝试的增量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T06:59:55.910

在没有任何上下文的情况下，这段代码应该完成它的工作：

```
for(int i=0; i<280; i++){
    Thread.Sleep(1000);
} 
```

但是对于 UI 的东西，你应该使用例如 Timer。

# php - 在 PHP 中的同一页面上加载多个页面

> ID：15183248
> 
> 赞同：0
> 
> 时间：2013-03-03T06:56:42.190
> 
> 标签：php

我对 PHP 比较陌生。对于我的网页，我需要在同一页面中加载多个页面。因为我有一个名为 cwt.html 的基本 HTML 页面，其中包含所有复选框和提交按钮。单击提交按钮后，与所选复选框（cwt.html）关联的下一页（例如 processing.php）也应加载到同一页面中。

```
<html>
<head>
<title> Conditions We Treat </title>
</head>
<body>
<form id = form1 action = "processing1.php" method = "post">
<input type = "checkbox" name = "sickness[]" value = "Nausea">Nausea</input><br/>
<input type = "checkbox" name = "sickness[]" value = "Constipation">Constipation</input><br/>
<input type = "checkbox" name = "sickness[]" value = "vomiting">Vomiting</input><br/>
<div id = "submit1"><input type = "submit" name = "submit" value = "submit"></input></div><br/>
</form>
</body>
</html> 
```

在此网页中单击提交按钮后，控件应转到 processing1.php，但必须在同一页面中加载内容

```
<html>
<head>
<title> Conditions We Treat </title>
</head>
<body>
<?php
echo "hi"
foreach($_POST['sickness'] as $s)
{
    $con = mysqli_connect("localhost","root","","collofnursing");
    //mysql_select_db("collofnursing");
    $res = mysqli_query($con,"select * from condwetreat");
    while($row = mysqli_fetch_array($res))
    {
        echo $s;?> <br><br><?php
        }
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:08:21.363

您可以使用 jquery，通过 onclick 事件将您的提交方法更改为函数：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
function onSubmitForm(){
    $.get('page1.php').success(function(html) {
        $('#page1').html(html);
    });
    $.get('page2.php').success(function(html) {
        $('#page2').html(html);
    });
}
</script>

<div id="page1"></div>
<div id="page2"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:20:54.943

正如其他人所说，使用 jQuery 将 HTML 片段加载到`div`. 由于您已经有一个完整的 HTML 文档，因此您加载的文本不应该是一个完整的 HTML 文档 - 如果您将它加载`div`到开始时您需要的 HTML。

我想知道我是否可以提供一些建议 - 与问题无关！- 您可能会觉得这很有用。随着您的应用程序变得越来越复杂，您会发现将逻辑和演示代码分开会更加整洁——即使一开始，您只需将前者放在 PHP 文档的开头，而将后者放在末尾。随着您对 PHP 的了解越来越多，您会发现将它们作为单独的文件并在 using 中加载“模板”是个好主意`require_once`。

如果你这样做，你会发现你编写 PHP 的方式在逻辑和模板之间是不同的。对于模板，它有助于将每个 PHP 语句保存在单个 PHP 块中，因此文档基本上保持为 HTML。这更简洁，有助于利用 IDE 中的语法着色和标签验证。因此，我会这样写你的模板：

```
<?php
// Move this 'logic' code out of the way of your view layer
// Here, the brace form of loops is preferred
// Ideally it'd get moved to a different file entirely
$con = mysqli_connect("localhost","root","","collofnursing");
mysql_select_db("collofnursing");
$res = mysqli_query($con,"select * from condwetreat");

?><html>
<head>
    <title> Conditions We Treat </title>
</head>
<body>
    <!-- The PHP 'tags' are now easier to indent -->
    <!-- So use while/endwhile, foreach/endforeach etc -->
    Hi
    <?php while($row = mysqli_fetch_array($res)): ?>
        <!-- So it's HTML to style stuff, rather than putting
             HTML tags into PHP echo statements :) -->
        <p class="symptom">
            <?php echo $row['symptom'] ?>
        </p>
    <?php endwhile ?>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:00:57.793

我推荐使用使用 AJAX 加载页面的 jQuery .load() 函数。

[链接在这里！](http://api.jquery.com/load/)

# c++ - 如何在opencv中合并8个图像？

> ID：15183251
> 
> 赞同：0
> 
> 时间：2013-03-03T06:57:38.537
> 
> 标签：c++, opencv

我正在尝试使用 cvMerge() 合并 8 个图像，但它不起作用。我应该怎么做才能合并这 8 个图像？

下面是查看图像不同位平面的代码。并将所有 8 张图像组合起来，就像输入的图像一样。

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"
#include <cmath>
using namespace std;

int T(int r)
{
if (r == 0)
return 0;
else
return 255;
}

int main()
{
char infname[256];
cout << "Enter input image : ";
cin >> infname;
IplImage *mono = cvLoadImage(infname, 0);
BwImage pic(mono);
int H = mono->height;
int W = mono->width;
IplImage *out0 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out1 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out2 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out3 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out4 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out5 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out6 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *out7 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 1);
IplImage *output1 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 4);
IplImage *output2 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 4);
IplImage *output = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 2);

BwImage bp0(out0);
BwImage bp1(out1);
BwImage bp2(out2);
BwImage bp3(out3);
BwImage bp4(out4);
BwImage bp5(out5);
BwImage bp6(out6);
BwImage bp7(out7);
BwImage b1(output1);
BwImage b2(output2);
BwImage b(output);

for (int y = 0; y < H; y++)
for (int x = 0; x < W; x++){
bp0[y][x] = T(pic[y][x] % 2);
bp1[y][x] = T((pic[y][x] / 2) % 2);
bp2[y][x] = T((pic[y][x] / 4) % 2);
bp3[y][x] = T((pic[y][x] / 8) % 2);
bp4[y][x] = T((pic[y][x] / 16) % 2);
bp5[y][x] = T((pic[y][x] / 32) % 2);
bp6[y][x] = T((pic[y][x] / 64) % 2);
bp7[y][x] = T((pic[y][x] / 128) % 2);
}

// here's the pronlem. i guess

cvMerge(out0,out1,out2,out3,output1);
cvMerge(output1,out4,out5,out6,output2);
cvMerge(output2,out7,NULL,NULL,output);

cvWaitKey(0);
cvSaveImage("b0.png", out0);
cvSaveImage("b1.png", out1);
cvSaveImage("b2.png", out2);
cvSaveImage("b3.png", out3);
cvSaveImage("b4.png", out4);
cvSaveImage("b5.png", out5);
cvSaveImage("b6.png", out6);
cvSaveImage("b7.png", out7);
cvSaveImage("b8.png", output);
cvReleaseImage(&mono);
cvReleaseImage(&out0);
cvReleaseImage(&out1);
cvReleaseImage(&out2);
cvReleaseImage(&out3);
cvReleaseImage(&out4);
cvReleaseImage(&out5);
cvReleaseImage(&out6);
cvReleaseImage(&out7);
cvReleaseImage(&output);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:32:38.763

我的猜测是，除非您有 RGBA 格式的输出图像，否则通道数必须为 3，而不是您输入的 2 或 4：

```
IplImage *output2 = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 4);
IplImage *output = cvCreateImage(cvSize(W,H), IPL_DEPTH_8U, 2); 
```

尝试将其设置为 3 并一次仅合并 3 个图像。但我不认为合并可以将 3 通道图像作为输入......然后`cvtColor(src, src, CV_BGR2GRAY);`在合并之前使用（它将对 3 通道的值进行平均每个像素）。

# django - Django NoReverseMatch 在 /pet/

> ID：15183254
> 
> 赞同：0
> 
> 时间：2013-03-03T06:58:41.417
> 
> 标签：django

我正在开发一个简单的宠物商店应用程序

我几次遇到这个错误，我设法理解它并修复它，但在这种情况下。我不知道出了什么问题。一切对我来说似乎都很清楚。

它说我的 store.html 在 {% url world:brazil animal.id %} 的位置有一个错误，但我已经定义了命名空间。

```
 Reverse for 'brazil' with arguments '('',)' and keyword arguments '{}' not found.
  Error during template rendering

  In template C:\djcode\mysite\pet\templates\store.html, error at line 5
  Reverse for 'brazil' with arguments '('',)' and keyword arguments '{}' not found.
  1     Sydney's Pet Store
  2     {% if store %}
  3     <ul>
  4     {% for a in store %}
  5     <li><a href ="{% url world:brazil animal.id %}">{{ a.name }}</li>
  6     {% endfor %}
  7     
  8     </ul>
  9     {% endif %} 
```

我的商店.html

```
Sydney's Pet Store
{% if store %}
<ul>
        {% for a in store %}
    <li><a href ="{% url world:brazil animal.id %}">{{ a.name }}</li>
    {% endfor %}

</ul>
{% endif %} 
```

我的观点.py

```
 from pet.models import Store , Pet
 from django.shortcuts import render_to_response ,get_object_or_404

 def index(request):
     store = Store.objects.all()
     return render_to_response ('store.html',{'store':store})

 def brazil(request , animal_id):
     store = get_object_or_404(Store , Pet, pk=animal_id)
     return render_to_response ('animal.html',{'store':store}) 
```

我的宠物应用 URLCONF：

```
 from django.conf.urls import patterns,include , url 

 urlpatterns = patterns ('pet.views',
     url(r'^$','index',name = 'index'),
     url(r'^(?P<poll_id>\d+)/$','brazil',name ='brazil'),

     ) 
```

我的主要URCONF：

```
 from django.conf.urls import patterns, include, url
   from django.contrib import admin
  from django.conf import settings
  from django.contrib.staticfiles.urls import staticfiles_urlpatterns
  from django.conf.urls.static import static

  admin.autodiscover()
  urlpatterns = patterns('',

      url(r'^pet/',include('pet.urls' , namespace='world' )),

  ) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

  urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:02:27.913

因为你没有定义animal.id。您在视图中呈现的只是存储变量。

```
Sydney's Pet Store
{% if store %}
<ul>
        {% for a in store %}
    <li><a href ="{% url world:brazil a.id %}">{{ a.name }}</li>
    {% endfor %}

</ul>
{% endif %} 
```

# jsf - 在 Netbeans 中使用 JPA、JSF 创建子类警告

> ID：15183258
> 
> 赞同：0
> 
> 时间：2013-03-03T06:58:58.093
> 
> 标签：jsf, jpa, netbeans

我正在使用 Netebans 7.3 使用 JPA 开发 JSF 应用程序。当我创建一个新实体时，在类声明“创建子类”上方的@Entity 行有一个警告，当我单击它时，它会引导我创建一个具有默认名称的类，将 Impl 后缀添加到原始类。为什么它会给出这样的警告，我可以用新的子类做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:55:50.657

Netbeans 文档说“创建子类”是一个建议。

[http://wiki.netbeans.org/Java_Hints](http://wiki.netbeans.org/Java_Hints)

它还说它是在 7.2 版本中添加的，我猜他们还没有完善它，并且它在比要求更多的地方显示为建议。

# architecture - ASP.NET Web API 缓存

> ID：15183259
> 
> 赞同：1
> 
> 时间：2013-03-03T06:59:23.963
> 
> 标签：architecture, asp.net-mvc-4, asp.net-web-api

我正在一个项目中工作，我们正在构建一个 Web API 层以供不同类型的客户端使用。

我这样的架构（客户端）<-Web API<-服务层<-存储库<-数据存储

我需要根据 Web API 验证的用户身份缓存数据，或者可能是从 Web API 请求的某些过滤器

构建这种缓存的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:30:59.337

目前还不是很清楚你想要实现什么......如果你可以完善你的问题并添加更多细节。

同时，如果您想缓存依赖于经过身份验证的用户的数据，也许您可​​以使用 Session 对象（如果它是一个简单的场景）。如果它依赖于过滤器，您可以使用任意数量的缓存提供程序（见下文）并将过滤器用作缓存键。

还有 Cache 对象和更高级的解决方案。如果您使用 NHibernate，则几乎可以缓存数据实体。这在很大程度上取决于您的实施和具体要求。

阅读[这篇](http://ofps.oreilly.com/titles/9781449320317/ch_Caching.html)文章以获取有关可能解决方案的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T09:23:19.020

你可以在你的服务层实现缓存（使用简单的内存缓存，或redis），当然你需要将用户的身份传递给服务层。如果您不想将身份传递给您的服务层，您将需要另一个缓存层（在 Web API 和服务层之间）。

# qt - 如何为 Qt Creator 使用 MongoDB C 驱动程序？

> ID：15183260
> 
> 赞同：3
> 
> 时间：2013-03-03T06:59:29.847
> 
> 标签：qt, mongodb-c

我想开发一个使用 MongoDB 作为后端数据库的 Qt GUI 应用程序。所以我需要使用 MongoDB C 驱动程序或 C++ 驱动程序。

说实话，在 Windows 下构建 C++ 驱动程序有点困难。当我做“scons”时，它找不到boost，我已经安装了boost。我不知道为什么。

所以我选择了MongoDB C驱动。当我执行“scons”时，一切顺利，生成了四个文件（bson.lib、bson.dll、mongoc.lib、mongoc.dll）。但我不确切知道如何使用这些库和 DLL 使其在 Qt Creator 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:04:10.727

我还没有完成 C 驱动程序，但我正在使用 Qt Creator 完成 C++ 驱动程序。您需要在项目中包含 boost 库，并且——对于我下载的 MongoDB 客户端 C++ 版本——它们需要是 Boost 1.49 库，不多也不少。下载它并让它构建所有的库，即使你只需要其中的四个。以下是我的 Qt Creator .pro 文件中的相关代码，请注意我的 C:/MongoDB 文件夹中的所有内容都是从 MongoDB 源下载的，或者至少由 scons 从该直接下载中构建。

```
INCLUDEPATH += C:/MongoDB/src   \
 C:/MongoDB/src/mongo/client  \
 C:/MongoDB/src/third_party/boost  \
 C:/MongoDB/src/third_party/boost/boost   \
 C:/MongoDB/src/mongo    \
 C:/MongoDB/src/third_party/boost/boost/algorithm  \
 C:/MongoDB/src/third_party/boost/boost/asio  \
 C:/MongoDB/src/third_party/boost/boost/bind  \
 C:/MongoDB/src/third_party/boost/boost/concept \
 C:/MongoDB/src/third_party/boost/boost/config \
 C:/MongoDB/src/third_party/boost/boost/container \
 C:/MongoDB/src/third_party/boost/boost/date_time \
 C:/MongoDB/src/third_party/boost/boost/detail  \
 C:/MongoDB/src/third_party/boost/boost/exception  \
 C:/MongoDB/src/third_party/boost/boost/filesystem \
 C:/MongoDB/src/third_party/boost/boost/function   \
 C:/MongoDB/src/third_party/boost/boost/functional \
 C:/MongoDB/src/third_party/boost/boost/integer    \
 C:/MongoDB/src/third_party/boost/boost/io    \
 C:/MongoDB/src/third_party/boost/boost/iterator   \
 C:/MongoDB/src/third_party/boost/boost/math    \
 C:/MongoDB/src/third_party/boost/boost/move    \
 C:/MongoDB/src/third_party/boost/boost/mpl     \
 C:/MongoDB/src/third_party/boost/boost/numeric  \
 C:/MongoDB/src/third_party/boost/boost/optional  \
 C:/MongoDB/src/third_party/boost/boost/pending  \
 C:/MongoDB/src/third_party/boost/boost/preprocessor \
 C:/MongoDB/src/third_party/boost/boost/program_options\
 C:/MongoDB/src/third_party/boost/boost/random  \
 C:/MongoDB/src/third_party/boost/boost/range   \
 C:/MongoDB/src/third_party/boost/boost/regex   \
 C:/MongoDB/src/third_party/boost/boost/smart_ptr \
 C:/MongoDB/src/third_party/boost/boost/spirit   \
 C:/MongoDB/src/third_party/boost/boost/system    \
 C:/MongoDB/src/third_party/boost/boost/test     \
 C:/MongoDB/src/third_party/boost/boost/thread    \
 C:/MongoDB/src/third_party/boost/boost/tuple     \
 C:/MongoDB/src/third_party/boost/boost/type_traits \
 C:/MongoDB/src/third_party/boost/boost/typeof   \
 C:/MongoDB/src/third_party/boost/boost/units   \
 C:/MongoDB/src/third_party/boost/boost/unordered \
 C:/MongoDB/src/third_party/boost/boost/utility   \

DEFINES += _UNICODE   \
    SYM_STATICLIB

QMAKE_CFLAGS_RELEASE += /MT
QMAKE_CXXFLAGS_RELEASE += /MT
QMAKE_CFLAGS_DEBUG += /MTd
QMAKE_CXXFLAGS_DEBUG += /MTd

LIBS += -L$$PWD/../../../../../../MongoDB/src/third_party -lWS2_32
LIBS += -L$$PWD/../../../../../../MongoDB/src/third_party -lDbgHelp

CONFIG(debug, debug|release) {
    LIBS += -LC:\MongoDB\build\win32\debug\client_build -lmongoclient
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/thread/build/msvc-10.0/debug/link-static/runtime-link-static/threading-multi/ -llibboost_thread-vc100-mt-sgd-1_49
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/date_time/build/msvc-10.0/debug/link-static/runtime-link-static/threading-multi/ -llibboost_date_time-vc100-mt-sgd-1_49
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/system/build/msvc-10.0/debug/link-static/runtime-link-static/ -llibboost_system-vc100-sgd-1_49
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/filesystem/build/msvc-10.0/debug/link-static/runtime-link-static/ -llibboost_filesystem-vc100-sgd-1_49
}

CONFIG(release, debug|release) {
    LIBS += -LC:\MongoDB\build\win32\release\client_build -lmongoclient
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/thread/build/msvc-10.0/release/link-static/runtime-link-static/threading-multi/ -llibboost_thread-vc100-mt-s-1_49
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/date_time/build/msvc-10.0/release/link-static/runtime-link-static/threading-multi/ -llibboost_date_time-vc100-mt-s-1_49
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/system/build/msvc-10.0/release/link-static/runtime-link-static/ -llibboost_system-vc100-s-1_49
    LIBS += -L$$PWD/../../../../../../Boost/1.49/bin.v2/libs/filesystem/build/msvc-10.0/release/link-static/runtime-link-static/ -llibboost_filesystem-vc100-s-1_49
} 
```

请注意，已知 Qt 在针对静态 C++ 运行时构建时会出现异常行为，因此最好遵循我在[此处](https://stackoverflow.com/questions/15127026/what-to-do-when-mt-and-md-both-required)给出的建议并将驱动程序包装在针对静态运行时构建的非 Qt C++ dll 中，然后在内部使用该 dll将针对动态运行时构建的主要 Qt 应用程序。

另请注意，我必须手动将 winsock 和帮助库复制到根文件夹中并手动包含它们，因为 Qt Creator 不接受“程序文件（x86）”路径，因为它有空格。

我意识到这不是“Mongo C”的答案，但你确实提到你只是出于挫败感而使用 C 驱动程序让 C++ 驱动程序工作，所以我想我会分享我所知道的。

# ios - 从 TableViewController 的 CoreData 数据库中获取数据

> ID：15183272
> 
> 赞同：0
> 
> 时间：2013-03-03T07:00:50.050
> 
> 标签：ios, objective-c, core-data

我有一个使用 CoreData 数据库的 TableViewController。我有另一个 UIviewController，我想从中读取 TableViewController 的数据库。我所做的如下。

```
//In UIviewController
-(NSArray *)fetchRecordedDatainsqldatabase
{
    // construct a fetch request

    NSError *error;
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"TrackerList" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    //[fetchRequest setFetchBatchSize:20];
    // Create the sort descriptors array.
    NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"descript" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:descriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];
    // return the result of executing the fetch request
    return [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];} 
```

我有一个财产

```
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;

But managedObjectContext is always nil, at the line
NSEntityDescription *entity = [NSEntityDescription entityForName:@"TrackerList" 
inManagedObjectContext:self.managedObjectContext]; 
```

因此，当程序到达该行时，它总是崩溃。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:04:07.227

**Managed Object Context**需要使用**Persistent Store Coordinator**进行初始化，并且需要**Managed Object Model**。XCode 用于为 AppDelegate 中的所有这些实现提供样板代码。

作为替代解决方案，您可以尝试使用[MagicalRecord](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&ved=0CGAQFjAH&url=http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/&ei=Rw4zUdCbIoXXrQenpIAw&usg=AFQjCNEOzUWDICJB_m830sGlyGXvr9xhng&bvm=bv.43148975,d.bmk&cad=rja)

您可以通过以下方式设置核心数据

`[MagicalRecord setupCoreDataStackWithStoreNamed:@"Database.sqlite"];`

您可以通过以下方式获取上下文中的所有跟踪列表值

```
NSManagedObjectContext *context = [NSManagedObjectContext defaultContext];
[TrackerList findAllSortedBy:@"descript" ascending:YES inContext:context]; 
```

以下链接将更好地指导您 [如何使 Core Data 中的编程愉快](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&ved=0CGAQFjAH&url=http://yannickloriot.com/2012/03/magicalrecord-how-to-make-programming-with-core-data-pleasant/&ei=Rw4zUdCbIoXXrQenpIAw&usg=AFQjCNEOzUWDICJB_m830sGlyGXvr9xhng&bvm=bv.43148975,d.bmk&cad=rja)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:54:14.133

一般你可以使用`managedObjectContext`提供给你的 stub 代码中的`AppDelegate`. 如果是这种情况，您可以使用：

```
AppDelegate *appD = [[UIApplication sharedApplication] delegate]; 
```

然后代替该行：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"TrackerList" 
inManagedObjectContext:self.managedObjectContext]; 
```

利用：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"TrackerList" 
inManagedObjectContext:appD.managedObjectContext]; 
```

您应该将 return 语句替换为：

```
return [appD.managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

如果您正在创建自己的`NSManagedObjectContext`对象，那么您应该设置它`persistentStoreCoordinator`（这又需要托管对象模型并设置持久存储类型）。

`AppDelegate.m`如果您在创建项目时选中了“使用核心数据”，您可以在 中查看如何执行所有这些操作。

无论如何，在您的情况下，您已经在第一个视图控制器中成功使用了 managedObjectContext 。所以你只需要在第二个视图控制器中获取相同的对象。

为了使您的方法起作用，您只需在您提供的代码块顶部添加一行：

```
self.managedObjectContext = [[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

# c# - 如何将 sdl.net 窗口添加到 C# windows 窗体应用程序？

> ID：15183275
> 
> 赞同：1
> 
> 时间：2013-03-03T07:00:56.543
> 
> 标签：c#, winforms, sdl.net

我有一个几乎完整的 C# winform 应用程序（它很大，所以我不能从头开始重写它），我想向它添加一个 sdl.net 窗口，以便显示我的应用程序在复杂的图形方式（sdl.net 窗口必须以某种方式从我的应用程序中获得稳定的数据流，所以我不能只做另一个项目）。

问题是我该怎么做？这种事情有什么常见的做法吗？或者做类似事情的教程？

简而言之，我可以将 sdl.net 窗口添加到 C# winform 应用程序中，如果可以，那么如何添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:28:24.793

您可以创建自己的 sdl.net 窗口类，该类将`SdlDotNet.Graphics.Video.SetVideoMode()`在创建时使用该方法，在内部处理图形操作并提供从您的 winform 应用程序调用的公共方法。

像这样的东西：

```
using System.Drawing;
using SdlDotNet.Graphics;

public class SdlWindow
{
    private Surface screen; // the display Surface

    /* ctor */
    public SdlWindow(Size size)
    {
        screen = Video.SetVideoMode(size.Width, size.Height);   // create a new sdl Surface and its own window container
        Video.WindowCaption = "Sdl Window";
    }

    /* your methods */
    public void DrawRectangle(Rectangle rect)
    {
        screen.Fill(rect, Color.Red);
        screen.Update();
    }

    /* cleanup a bit */
    public void Dispose()
    {
        if (screen != null)
            Video.Close();
    }
} 
```

不要忘记在项目中添加对 SdlDotNet.dll 库的引用。

希望这可以帮助！

# python - 单独文件中的python日志信息

> ID：15183277
> 
> 赞同：0
> 
> 时间：2013-03-03T07:01:50.790
> 
> 标签：python

我正在用python创建一个程序，我需要记录我通常会登录数据库的信息，但我现在无法实现。我如何将数据写入一个 python 文件，其中有一个 dict 矩阵。

例如，如果 main.py 有

```
name = raw_input("Please enter your name")
age = raw_input("Please enter your age")
hair_colour = raw_input("Pleas enter your hair colour") 
```

我想将所有这些数据写入我的 log.py 文件，以便它具有

```
logs = {
    ...
    ...
    'the name': {'age':'the age', 'hair colour':'the hair colour'}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:42:48.257

也许这样的事情可以解决问题：

```
from pprint import pformat

log = dict()

name = raw_input("Please enter your name : ")
age = raw_input("Please enter your age : ")
hair = raw_input("Pleas enter your hair colour : ")

entry = dict()
entry['age'] = age
entry['hair'] = hair

log[name] = entry

with open('log.py', 'w') as logfile:
    logfile.write('log = {}'.format(pformat(log))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:50:36.843

一种非常hacky的方法：

```
x = open('test.py','wb')
x.write('logs = { ')
x.write('"the name": {"test1": 1, "test2": 2, "test3": 3}')
x.write('}')
x.close()

In [27]: run test.py
In [28]: logs
Out[28]: {'the name': {'test1': 1, 'test2': 2, 'test3': 3}} 
```

为了更好地使用，我会将您的用户输入与字符串 .format 合并为您希望作为数据的部分。从所有输入数据中创建一个列表，然后使用 for 循环为列表中的每个项目添加一行数据。

# c++ - 可以初始化 dll 文件 - Dll 构造函数

> ID：15183278
> 
> 赞同：0
> 
> 时间：2013-03-03T07:01:56.237
> 
> 标签：c++, dll

我目前在 C# 应用程序中以下列方式从我的 dll 中导入一个函数。

```
[DllImport("C:\\File.dll")]
public static extern int SomeMethod(int A); 
```

我的 dll 文件是用 C++ 编写的。此方法也在 dll 的 .def 文件中定义。目前，每当第一次尝试调用此方法时，都会调用其他几个方法，这些方法为该方法奠定了基础。然而，这些方法只需要调用一次。这些方法再也不会被调用/我想知道是否有办法在加载 dll 文件后立即调用一组方法（初始化程序）。有什么作为 dll 构造函数的吗？

我的 dllmain.cpp 中有类似的东西可以在那里输入一些东西来完成这个任务

```
// dllmain.cpp : Defines the entry point for the DLL application.
#include "stdafx.h"

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:21:16.587

DllMain 最接近 DLL“构造函数”（进行初始化的正确位置是在 DLL_PROCESS_ATTACH 的 case 标签中）。然而，更现实的构造函数是由 C# 代码实例化的 COM 类的构造函数。在这种情况下，将为您创建的类的每个实例调用构造函数（就像 C# 类一样）。在 Visual C++ 中创建一个 ATL 项目，它将为您生成如下代码：

```
class ATL_NO_VTABLE CMyClass :
    public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CMyClass, &CLSID_MyClass>,
    public IMyClass
{
public:
    CMyClass()
    {
    }

DECLARE_REGISTRY_RESOURCEID(IDR_MYCLASS1)

BEGIN_COM_MAP(CMyClass)
    COM_INTERFACE_ENTRY(IMyClass)
END_COM_MAP()

    DECLARE_PROTECT_FINAL_CONSTRUCT()

    HRESULT FinalConstruct()
    {
        return S_OK;
    }

    void FinalRelease()
    {
    }

    ... 
```

在 CMyClass 构造函数或 FinalConstruct 方法中，您可以执行对象的初始化代码。还将您的 SomeMethod 方法添加到此类（以及 IDL 文件中的 IDL 接口）。

然后你会像这样在 C# 中使用该类：

```
MyClass mc = new MyClass(); // CMyClass::CMyClass and CMyClass::FinalConstruct are called in C++
mc.SomeMethod(); // CMyClass::SomeMethod is called in C++ 
```

# javascript - 使用 JavaScript 屏蔽检测域转发

> ID：15183281
> 
> 赞同：2
> 
> 时间：2013-03-03T07:02:34.747
> 
> 标签：javascript, dns, forwarding

我的域通过掩码`website.com`转发到`mysite.com/website`（在我的 Godaddy 帐户上配置。）

我想确定该站点是否是通过`website.com`或访问的`mysite.com/website`。

不幸`mysite.com/website`的是，即使网址栏包含`website.com`. IE。即使地址栏是 也`var url = window.location.href` 总是返回。因此，使用 JavaScript 如何确定用于访问页面的实际 URL 而不是翻译后的 URL。（浏览器不知何故知道此信息，因为它显示在地址栏中，但是当我执行“查看源代码”时，我只看到翻译后的 URL。）我只需要它来为 IE 工作。`mysite.com/website``website.com`

# mysql - SQL SELECT 后跟 UPDATE

> ID：15183287
> 
> 赞同：3
> 
> 时间：2013-03-03T07:04:29.703
> 
> 标签：mysql, sql, select, sql-update

我有员工表和人力资源表。两个表中都有员工地址（地址列）。我想用 Employee 表中的地址更新 HR 表的地址列，对于所有这些记录，只要 HR 表的地址和同一雇员的 Employee 表的地址不匹配。employee-id 是员工表和外部的主键HR 表中的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:06:48.937

你仍然可以`JOIN`在`UPDATE`语句上做。

```
UPDATE  HR a
        INNER JOIN Employee b
            ON a.EmpID = b.ID  -- relationship column
SET     a.address = b.address
WHERE   a.address <> b.address -- to make this query faster
                               -- filter only those address that didn't match 
```

# android - 用另一个活动的结果填充列表视图

> ID：15183289
> 
> 赞同：0
> 
> 时间：2013-03-03T07:04:44.307
> 
> 标签：android, listview, arraylist, adapter

我想在我的项目中实现以下内容。从活动 A 我想开始活动 B 以获得结果。活动 A 有一个列表视图（比如 mylistview）和一个为其设置的适配器。（说我的适配器）。和相应的arraylist myarraylist。

使用活动 B 的结果字符串，我想将该字符串添加到活动 A 的现有列表视图中。

我做了以下事情：

在活动 A 中：

```
ArrayAdapter<String> myadapter = new ArrayAdapter<String>(this, android.r.layout.simple_list_item_1,myarraylist);
mylistview.setListAdapter(myadapter);

Intent i = new Intent(this, activityB.class);
startAcivityForResult(i,1); 
```

现在在我的 onActivityResult 方法中：

```
String new_str = data.getStringExtra();
myarraylist.add(new_str);
myadapter.notifyDatasetChanged(); 
```

在活动 B 中：

```
Intent i =new Intent();
i.putExtra("card_name", Card_name);
setResult(RESULT_OK,i); 
```

我的程序没有显示任何错误并且工作正常。但我的列表视图仍然没有正确更新。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:35:27.583

我认为您应该尝试调试问题所在。未正确读取字符串或字符串从未到达列表视图。

如果未读取字符串，请尝试在意图中发送它。如果它被添加到数组中，而不是列表视图中，我会尝试更新适配器，以便它直接从数组中读取。

像这样：

```
 public class CustomStringAdapter extends ArrayAdapter<String> {

    public CustomStringAdapter(Context context, int textViewResourceId,
            List<String> objects) {
        super(context, textViewResourceId, objects);
    }
    @Override
    public int getCount() {
        return myarraylist.size();
    }

    @Override
    public String getItem(int position) {
        // TODO Auto-generated method stub
        return myarraylist.get(position);
    }

} 
```

然后将其设置为适配器：

```
CustomStringAdapter myadapter = new CustomStringAdapter(this,android.r.layout.simple_list_item_1,myarraylist);
mylistview.setListAdapter(myadapter); 
```

这可能不是答案，但值得测试。

# c++ - const extern C 数组链接器多个定义

> ID：15183291
> 
> 赞同：0
> 
> 时间：2013-03-03T07:04:53.240
> 
> 标签：c++

我有几个用于更新它们的源文件。他们拒绝编译的原因很明显（所有无趣的源代码都被剥离了）：

```
// hashset.h
class HashSet {
    unsigned prime = 0; // Index to table size (c++11 syntax)
    unsigned long table_size () const { return prime_list [prime]; }
};

//hashet.cpp
const unsigned long prime_list [] = {53, 97, 193, 389, 769,
      1543, 3079, 6151, 12289, 24593, 49157, 98317}; 
```

`prime_list`从标头中调用时未定义`HashSet::table_size`。我试图修复源，添加`extern const unsigned long prime_list [];`到标题和`extern`这个数组定义。`make clean && make`我得到后

```
g++ main.o dictionary.o hashset.o  -o spell
dictionary.o:(.rodata+0x4): multiple definition of `num_primes'
main.o:(.rodata+0x4): first defined here
dictionary.o:(.rodata+0x20): multiple definition of `prime_list'
main.o:(.rodata+0x20): first defined here
hashset.o:(.rodata+0x4): multiple definition of `num_primes'
main.o:(.rodata+0x4): first defined here
hashset.o:(.rodata+0x20): multiple definition of `prime_list'
main.o:(.rodata+0x20): first defined here
collect2: error: ld returned 1 exit status 
```

正如我发现的那样，实际上 if just`prime_table`被定义为

```
// hashset.cpp
extern const unsigned long prime_list [] = {53, 97, 193, 389, 769,
      1543, 3079, 6151, 12289, 24593, 49157, 98317}; 
```

并且主体`table_size ()`被移动到`hashset.cpp`（以避免编译错误），我得到这些链接器错误。没有`extern`我就没有错误。为什么会这样？我只有这个数组的一个定义，我不会以任何方式将它暴露给我的其他源文件（我现在不放在`extern const unsigned long prime_list [];`标题中）。它如何被多重定义？

要清楚，我现在的消息来源：

```
// hashset.h
class HashSet {
    unsigned prime = 0; // Index to table size (c++11 syntax)
    unsigned long table_size () const;
};

//hashet.cpp
extern const unsigned long prime_list [] = {53, 97, 193, 389, 769,
      1543, 3079, 6151, 12289, 24593, 49157, 98317};
unsigned long HashSet::table_size () const {
     return prime_list [prime];
} 
```

现在`extern`in`.cpp`是不必要的，但我只是想知道，有什么问题？有没有办法将正文放回头`table_size()`文件以使其内联？

**upd** `prime_list`和`prime_table`是同一个对象。我在缩短这篇文章的来源时错误地更改了名称；现在修好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:45:04.237

我认为，如果@Adnan Akbar 建议的外部规范的使用没有解决您的问题，那么它**可能是由多次包含头文件引起的**。
因此，在这种情况下，有一个简单的解决方案可以解决您的问题： 在“hashset.h”中
**使用条件翻译指令**或#pragma once

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:08:54.317

删除外部。应该没问题。

要将方法放到头文件中，只需在头文件中使用 extern 声明数组即可。

```
 extern const unsigned long prime_table []; 
```

此外，由于 prime_table ，您没有收到错误，而是 num_primes。

非常适合我。

****构建项目 tmpCheck 的配置调试 ******

 **生成所有构建文件：../src/hashset.cpp 调用：GCC C++ 编译器 g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/hashset.d" -MT"src /hashset.d" -o "src/hashset.o" "../src/hashset.cpp" 完成构建：../src/hashset.cpp

构建文件：../src/tmpCheck.cpp 调用：GCC C++ 编译器 g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/tmpCheck.d" -MT"src/tmpCheck .d" -o "src/tmpCheck.o" "../src/tmpCheck.cpp" 完成构建：../src/tmpCheck.cpp

构建目标：tmpCheck 调用：GCC C++ Linker g++ -o "tmpCheck" ./src/hashset.o ./src/tmpCheck.o
完成构建目标：tmpCheck

****构建完成******

 **```
 #ifndef HASHSET_H_
 #define HASHSET_H_

  extern const unsigned long prime_list [];
  // hashset.h
  class HashSet {
     unsigned prime ; // Index to table size (c++11 syntax)
   public:
      HashSet():prime(0){
        //
      }
      unsigned long table_size () const { return prime_list [prime]; }

  };
  #endif /* HASHSET_H_ */

   #include "hashset.h"
   //hashet.cpp
   const unsigned long prime_list [] = {53, 97, 193, 389, 769,
      1543, 3079, 6151, 12289, 24593, 49157, 98317}; 
```****

# java - 请问如何重复repaint()？

> ID：15183292
> 
> 赞同：1
> 
> 时间：2013-03-03T07:05:01.553
> 
> 标签：java, swing, paint, repaint, paintcomponent

请问，请问java repaint 重复的问题，遇到了一个麻烦，就是用重复drafting 来表达Pacman Open&Close 的嘴巴动作。但是这个程序只有一次不会动......有人可以帮我解决这个问题......非常感谢！：D

我的代码如下：

```
package Strive;
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

class CDrawF extends JFrame {
    CDrawF (){
        setTitle("繪製各式圖形");                       //JFrame interface
        setBounds(50, 50, 490, 260);        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        for(int i = 0; i<= 360; i++){              //repeatly 360 times
        repaint();
        g2.setColor(new Color(1.0f, 0.0f, 1.0f));               
        g2.fill(new Arc2D.Double(100, 100, 80, 80, 30, 300, Arc2D.PIE)); 
        //PacMan close mouth
        repaint();
        try{            //Delay setions
                Thread.sleep(1000);
             }catch(InterruptedException ex){}
        g2.fill(new Arc2D.Double(100, 100, 80, 80, 10, 340, Arc2D.PIE)); 
        //PacMan open mouth
        repaint();
        }
    }
}

public class NewClass {          //Main
    public static void main(String[] args){
        new CDrawF ();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T07:10:17.307

建议：

*   不要直接在 JFrame 中绘制
*   不要在paint(...) 方法中绘制。
*   从不调用`Thread.sleep(...)`Swing 事件线程
*   特别是不要在`paint(...)`or`paintComponent(...)`方法中调用它。
*   而是在 JPanel 或 JComponent 的 paintComponent(...) 方法中绘制
*   阅读 Java 图形教程，因为它们将解释**所有**这些。
*   不要`repaint()`在paint(...) 或paintComponent(...) 内部调用
*   为您的动画循环使用 Swing Timer。教程将再次帮助您做到这一点。

# java - Worklight：调用 java 静态方法与对象创建的性能

> ID：15183295
> 
> 赞同：4
> 
> 时间：2013-03-03T07:05:26.910
> 
> 标签：java, performance, static, adapter, ibm-mobilefirst

我需要建议我将自定义 java 方法设为静态还是通过适配器从 java 对象访问？

我的场景是：成千上万的用户正在进行交易，每个用户一次又一次地访问相同的方法，只是更改特定于该用户或交易的一些值。

现在，如果我将它们作为静态方法，那么它会给用户带来问题，因为我们知道适配器调用是异步的......所以如果多个用户同时调用相同的方法，那么它会导致问题返回不同的值彼此？

或者，如果我通过首先声明该类对象然后访问方法，提供参数来访问所有自定义 java 方法....那么当多个用户同时访问同一个方法时，他们将获得正确/相关的数据？

从性能的角度来看，哪种方法更好，静态方法是否会给用户带来错误的数据......一个用户的数据给另一个人，而其他人的数据给另一个人。

感谢阿卜杜勒阿哈德

------------我的代码就像---

```
java code:

  public static String getBalanceSummaries(String userAct){
            String replyMsg="";
    try {

    replyMsg = getBalanceStatementfromMQ(userAct);

    }catch(Exception e) {}

    return replyMsg;

    }

  -----WL Adapter code:------

    function showAllBalace(userActNo){
        return{
            result: com.my.package.getBalanceSummaries(userActNo)
        };
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:55:42.717

我相信您将静态方法与静态*字段*混淆了。静态方法只是与对象的任何特定实例无关的代码——基本上任何未使用`this`或`super`引用的方法都可能是静态的候选方法，前提是它们没有覆盖另一个方法并且不打算被覆盖。与“普通”方法相比，静态方法在多线程方面没有任何额外的问题。

另一方面，静态*字段根据定义在所有线程之间共享，并且对它们的访问应该像任何共享资源一样受到保护。**任何*使用静态字段的方法，无论方法本身是否是静态的，都应该检查并发问题。

就性能而言，有轶事证据表明，与普通虚拟方法相比，静态方法可能会提供性能改进，但老实说，在分析器告诉我之前我不会担心它。过早的优化是万恶之源……

# python - 哈希函数可防止碰撞，而不是攻击。（产生一个随机的 UUID 大小的结果空间）

> ID：15183297
> 
> 赞同：5
> 
> 时间：2013-03-03T07:05:57.143
> 
> 标签：python, hash, sha1, hashlib

使用 SHA1 对较大的字符串进行哈希处理，以便它们可以用作数据库中的键。

尝试从原始字符串生成一个 UUID 大小的字符串，该字符串足够随机且足够大以防止冲突，但比原始字符串小得多。

不要将其用于任何与安全相关的事情。

### 例子：

```
# Take a very long string, hash it down to a smaller string behind the scenes and use
#     the hashed key as the data base primary key instead
def _get_database_key(very_long_key):
    return hashlib.sha1(very_long_key).digest() 
```

SHA1 是用于此目的的好算法吗？或者还有什么更合适的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T07:55:18.067

Python 有一个基于[RFC 4122的](https://www.rfc-editor.org/rfc/rfc4122)[`uuid`库](http://docs.python.org/2/library/uuid.html#module-uuid)。

使用 SHA1 的版本是 UUIDv5，所以代码是这样的：

```
import uuid

uuid.uuid5(uuid.NAMESPACE_OID, 'your string here') 
```

# java - 如何使用 Java 制作自由桌面应用程序

> ID：15183298
> 
> 赞同：1
> 
> 时间：2013-03-03T07:05:59.223
> 
> 标签：java, class, exe

我是Java新手。我有一个小问题。假设，我用 Java 编写了这样的代码：-

```
import java.awt.*;
import java.applet.*;
public class J02_02 extends Applet
{
    public void paint (Graphics g)
    {
        g.drawString("Make a Software From this Java Code",10,100);
    }
} 
```

我已经使用`javac`命令将它编译为 J02_02.class 并且它在**Java Applet**中运行良好。但是，我想用这段代码制作一个自由桌面应用程序。想一想，我想制作一个桌面应用程序，就像我们使用 IE 的任何其他软件一样：Firefox、记事本、KMPlayer。我的意思是，我想在没有安装 java 的计算机上运行这个应用程序。我想将此 .class 文件制作成 .exe 软件。.exe 软件应该可以在任何平台（如 windows/linux）上运行，而无需安装其他任何东西（如 Java/jdk）。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:07:27.603

提前（AOT）编译器就是答案......

AOT 编译器上的一个常见问题是[Excelsior](http://www.excelsior-usa.com/jet.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:02:10.903

在您的情况下，AOT 编译器显然是一种过度杀伤。

查看我的文章[Convert Java to EXE: Why, When, When Not and How](http://www.excelsior-usa.com/articles/java-to-exe.html)中的其他选项。

以防万一，Excelsior JET 9 支持 Java 7：[http ://www.excelsiorjet.com](http://www.excelsiorjet.com)

# python - 将号码插入列表

> ID：15183299
> 
> 赞同：-2
> 
> 时间：2013-03-03T07:06:38.577
> 
> 标签：python, python-2.7, insertion

我有一个有序的字典，如下所示：

```
source =([('a',[1,2,3,4,5,6,7,11,13,17]),('b',[1,2,3,12])]) 
```

我想先计算每个键值的长度，然后计算`sqrt`它的长度，比如说它是**L**。

在可以无余数的位置插入**L ，在其他数字后插入“1”。**

例如，`source['a'] = [1,2,3,4,5,6,7,11,13,17]`它的长度是 9。因此 sqrt of`len(source['a'])`是 3。

在可以被3整除的位置插入数字3（例如位置3，位置6，位置9）如果数字的位置不能被3整除，则在其后插入1。

要获得如下结果：

```
result=([('a',["1,1","2,1","3,3","4,1","5,1","6,3","7,1","11,1","13,3","10,1"]),('b',["1,1","2,2","3,1","12,2"])] 
```

我不知道如何将列表中的项目更改为字符串对。顺便说一句，这不是我的家庭作业，我正在尝试构建一个布尔检索引擎，源数据太大，所以我只是在这里创建了一个简单的示例来解释我想要实现的目标:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:25:46.670

由于这似乎是一项家庭作业，我将尽力帮助您解决您面临问题的部分

> 我不知道如何将列表中的项目更改为字符串对。

由于需要更新整个列表，最好重新创建它而不是就地更新它，尽管它可能因为列表是可变的

考虑一个列表

```
lst = [1,2,3,4,5] 
```

要将其转换为字符串列表，您可以使用列表推导

```
lst = [str(e) for e in lst] 
```

你也可以使用内置的`map`as `map(str,lst)`，但是你需要记住，比在 Py3.X 中，map 返回的是一个 map 对象，所以需要做相应的处理

理解中的条件最好表示为条件语句

```
<TRUE-STATEMENT> if <condition> else <FALSE-STATEMENT> 
```

要获取列表中任何项目的索引，最好的办法是使用内置的[enumerate](http://docs.python.org/2/library/functions.html#enumerate)

如果您需要从一系列项目创建格式化字符串表达式，建议使用[格式字符串说明符](http://docs.python.org/2/library/string.html#format-specification-mini-language)

```
"{},{}".format(a,b) 
```

包括 a 在内的任何序列的长度`list`都可以通过内置的[len来计算](http://docs.python.org/2/library/functions.html#len)

您可以使用`**`具有分数幂的运算符或使用`math`模块并调用`sqrt`函数来计算平方根

现在你只需要结合上面的每一个建议来解决你的问题。

# c# - 从后台工作人员登录到 MyLogger 时出现跨线程 InvalidOperationException

> ID：15183307
> 
> 赞同：1
> 
> 时间：2013-03-03T07:07:45.387
> 
> 标签：c#, multithreading, events, thread-safety, richtextbox

我创建了一个事件驱动的记录器，当从另一个线程调用时它似乎有问题。我怎样才能使它线程安全？

这是记录器类：

```
public static class MyLogger
{
    private static List<string> log = new List<string>();
    public static event EventHandler LogAdded;
    private static string indent = "";

    public static void Log(string message)
    {
        log.Add(indent + message);
        if (LogAdded != null)
            LogAdded(null, EventArgs.Empty);
    }
} 
```

在我的表单类中，我通过以下两种方式启动它：

```
public frm_main()
{
    InitializeComponent();
    MyLogger.LogAdded += new EventHandler(MyLogger_LogAdded);
} 
```

这是发生崩溃的事件进度：

```
private void MyLogger_LogAdded(object sender, EventArgs e)
{
    int length = rtb_logger.TextLength;  // at end of text
    string prefix = string.Format("{0:d3}: ", ++logindex);
    string ToAppend = prefix + MyLogger.GetLastLog();
    rtb_logger.AppendText(ToAppend);
    if (ToAppend.Contains("Alert -"))
    {
        rtb_logger.SelectionStart = length;
        rtb_logger.SelectionLength = ToAppend.Length;
        rtb_logger.SelectionColor = Color.Red;
    }
    rtb_logger.AppendText(Environment.NewLine);
    rtb_logger.SelectionStart = rtb_logger.TextLength;
    rtb_logger.ScrollToCaret();
    EnableControls();
} 
```

在后台工作人员的以下调用中，崩溃发生在上面注释为“文本末尾”的第一行：

```
MyLogger.Log("Sending cmd: \"" + strCmdText + "\" to CMD.exe."); 
```

如何使 MyLogger 类线程安全？

**编辑：**使用 SeeSharp 解决方案，代码更改为：

```
private void MyLogger_LogAdded(object sender, EventArgs e)
{
    if (rtb_logger.InvokeRequired)
    {
        rtb_logger.BeginInvoke(new Action(delegate {
            MyLogger_LogAdded(sender, e);
        }));
        return;
    }
    int length = rtb_logger.TextLength;  // at end of text
    string prefix = string.Format("{0:d3}: ", ++logindex);
    string ToAppend = prefix + MyLogger.GetLastLog();
    rtb_logger.AppendText(ToAppend);
    if (ToAppend.Contains("Alert -"))
    {
        rtb_logger.SelectionStart = length;
        rtb_logger.SelectionLength = ToAppend.Length;
        rtb_logger.SelectionColor = Color.Red;
    }
    rtb_logger.AppendText(Environment.NewLine);
    rtb_logger.SelectionStart = rtb_logger.TextLength;
    rtb_logger.ScrollToCaret();
    EnableControls();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:16:33.633

您必须在 UI 线程中调用 MyLogger_LogAdded 的主体。在调用 rtb_logger 的方法或属性时尝试使用 Dispatcher.BeginInvoke()。

请参阅[C#：线程安全的 Richtextbox 事件记录方法？](https://stackoverflow.com/questions/418845/c-thread-safe-richtextbox-event-logging-method/418880#418880)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:29:29.180

```
private delegate void MYLOGGEREVENT(object sender, EventArgs e);
private void MyLogger_LogAdded(object sender, EventArgs e)
{
if (InvokeRequired)
            {
                BeginInvoke(new MYLOGGEREVENT(MyLogger_LogAdded), new object[]{sender, e});
            }
else{
    int length = rtb_logger.TextLength;  // at end of text
    string prefix = string.Format("{0:d3}: ", ++logindex);
    string ToAppend = prefix + MyLogger.GetLastLog();
    rtb_logger.AppendText(ToAppend);
    if (ToAppend.Contains("Alert -"))
    {
        rtb_logger.SelectionStart = length;
        rtb_logger.SelectionLength = ToAppend.Length;
        rtb_logger.SelectionColor = Color.Red;
    }
    rtb_logger.AppendText(Environment.NewLine);
    rtb_logger.SelectionStart = rtb_logger.TextLength;
    rtb_logger.ScrollToCaret();
    EnableControls();
}
} 
```

试试这个。

# c# - 如何在 Telerik 报告中的列字段之后添加行字段

> ID：15183308
> 
> 赞同：3
> 
> 时间：2013-03-03T07:07:53.600
> 
> 标签：c#, asp.net, telerik, reporting

我正在 Telerik 报告中创建报告。报告结构：

![在此处输入图像描述](../Images/6dbf6d396d4f7f1c856d59d10bd8b9a2.png)

*名称*和*日期*分别是行和列字段。现在我想在列字段之后添加一个行字段。怎么做？我正在使用交叉表控件。

# qt - 如何使新的小部件填充可用空间？

> ID：15183309
> 
> 赞同：1
> 
> 时间：2013-03-03T07:08:00.743
> 
> 标签：qt, user-interface, layout, qt5

我在使新的 QT 小部件填充所有可用空间时遇到了一些麻烦。

我想在垂直布局 ( `mVisual`) 中添加一个小部件（一个 QGLWidget）并调整布局大小，以便 mVisual 占据最大面积。

我的布局如下所示：

![在此处输入图像描述](../Images/bec33a6205c14fbe143e9738ef6b8a0e.png)

我的代码是

```
ui.setupUi(this);
mWidget = new glStream();
//mWidget->setMinimumHeight(480);
//mWidget->setMinimumWidth(480);
ui.mVisual->addWidget(mWidget); 
```

问题是，如果我不手动设置宽度或高度，当我添加它时我什至看不到我的小部件！

我唯一能想到的就是执行某种排序或算术运算`parentSize-lytControlsSize`，但这感觉很脏，就像 MFC。

如何布局我的小部件，以使一种布局 ( `mVisual`) 最小，而另一种布局最大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:59:07.037

如果您将小部件放在布局中，小部件将填充其父区域中的所有可用空间，并且如果您想不填充边距，请将布局边距设置为`0`.

# wpf - WPF CollectionViewSource：当前记录是否最后？

> ID：15183312
> 
> 赞同：2
> 
> 时间：2013-03-03T07:08:27.277
> 
> 标签：wpf, collectionviewsource

使用 CollectionViewSource，是否有一种“直接”的方式来知道当前记录是否是最后一条，而无需进行相对繁重的操作来枚举所有项目以计算它们（即使 LINQ 也会这样做）？我需要根据当前位置启用/禁用导航按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:13:20.677

不，没有直接的方法可以确定当前的是否是最后一个。集合视图上的一个简单的 Linq`Last()`会为您找到最后一个项目。请注意，Linq`Last`不一定会枚举整个集合。如果被枚举的集合支持`IList`接口或类似的，它将能够直接定位最后一项 - 请参阅[此处的示例实现](http://msmvps.com/blogs/jon_skeet/archive/2010/12/29/reimplementing-linq-to-objects-part-11-first-single-last-and-the-ordefault-versions.aspx)。

# iphone - 应用程序提交警告：“应用程序引用了 My_application.app/My_application:productName 中的非公共选择器”

> ID：15183313
> 
> 赞同：0
> 
> 时间：2013-03-03T07:08:30.180
> 
> 标签：iphone, ios6, app-store-connect

我最近尝试向 Apple Store 提交一个 iOS 应用程序，它触发了以下警告：

“应用程序引用了 My_application.app/My_application:productName 中的非公共选择器”

我在这些链接中看到过在 stackoverflow 中提出的先前问题，但是对于这是否会导致应用程序被拒绝，还没有任何具体的答案。 [iTunes，应用上传警告。应用程序在 : productName 中](https://stackoverflow.com/questions/13798537/itune-app-upload-warning-app-references-non-public-selectors-in-productname) [引用了非公共选择器 该应用程序在 Payload 中引用了非公共选择器](https://stackoverflow.com/questions/10023343/the-app-references-non-public-selectors-in-payload)

在我的应用程序中，我使用 Cocos2D 2.0 和 Chartboost 3.1.1、FacebookSDK 3.1.1 构建了它。应用程序中没有集成任何额外的第 3 方 API。

有没有人在使用上述 SDK 时遇到过类似的问题？有没有人因为上面的警告而拒绝了他们的应用程序？

请分享您的经验，以便我可以在我的应用程序中纠正此问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T03:53:42.183

只需将其提交到应用商店，它对我有用 3 次。当 Apple 更改为新的 iOS 版本时，有时会出现此问题。

# azure - Windows Azure 中专用缓存的初始加载

> ID：15183320
> 
> 赞同：0
> 
> 时间：2013-03-03T07:09:16.060
> 
> 标签：azure, azure-caching

我为专用缓存设置了一个工作角色。在应用程序启动时，我想从数据库加载缓存（最好在 WorkerRole/RoleEntryPoint 的 OnStart() 方法中）。我无法找到如何从专用缓存项目中将对象添加到缓存中（我可以毫无问题地使用其他角色的缓存）。

有谁知道是否最好像其他项目一样创建一个新的 DataCache() 对象，或者是否有更快的内部方法？最终我可能要加载大量数据，所以我希望它尽可能快（也希望最小化跨角色的带宽）。有人对 Azure 中缓存的初始加载有任何提示或最佳实践吗？我一直在寻找一段时间，并没有想出任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:42:59.697

专用缓存上 WorkerRole 中的 OnStart() 或 Run() 方法中的缓存尚不可用（空 DataCache，尝试初始化时抛出错误）。我还在其中一个 Web 项目的 WebRole 上尝试了它，但也没有用。

我最终在我的一个网络角色的 Global.asax 中使用了 Application_Start 方法，并且该方法有效。我认为这是一个不错的解决方案，因为无论如何我都会在从登台移动之前等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:37:02.327

您应该像对待任何其他角色一样从角色内部处理缓存。

# nginx - 每月轮换 nginx 日志文件的最简单方法是什么？

> ID：15183321
> 
> 赞同：1
> 
> 时间：2013-03-03T07:09:17.660
> 
> 标签：nginx, openbsd, logrotate, log-rotation

在 OpenBSD 中，没有`logrotate`in 端口，并且[`newsyslog`](http://mdoc.su/o/newsyslog)就大量日志文件的每月轮换而言，似乎功能有限。

我有很多域，大量的 nginx 日志文件名称，例如`/var/www/logs/*/*.{access,error}.log`.

我在想一个小的shell脚本和cronjob。每月轮换它们并将前一个月附加到文件名的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:09:17.660

我认为以下 crontab 应该可以工作：

```
0   0   1   *   *   /etc/nginx/logrotate.monthly.sh 
```

其中 /etc/nginx/logrotate.monthly.sh 应该有以下内容：

```
find /var/www/logs/ -name "*log" -exec \
mv -i {} {}.`sh -c 'date -r $(expr $(date +%s) - 1209600) +%Y-%m'` \; ; \
kill -USR1 `cat /var/run/nginx.pid` 
```

`-i`选项对于确保`mv`文件不会被覆盖很重要。我们通过将今天的日期向后移动两周来获得文件名的日期（根据 « [tcsh: print date 2 weeks ago in shell](https://stackoverflow.com/questions/15183127/tcsh-print-date-2-weeks-ago-in-shell/15183128#15183128) »）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:55:24.440

请也检查这个[misc@ 线程](http://openbsd.7691.n7.nabble.com/Nginx-log-rotation-td220827.html)。

（还请记住[FAQ](http://www.openbsd.org/faq/faq10.html#httpdchroot)中记录的关于 privseped apache 的警告以及在移动时需要一个小的时间窗口。）

# ruby - 如何向现有类添加方法，就像 Ruby 中的 Objective-C 类别一样？

> ID：15183323
> 
> 赞同：3
> 
> 时间：2013-03-03T07:09:57.980
> 
> 标签：ruby, objective-c-category

据我记得Ruby也有这个功能。动态地向现有类添加方法。但我忘记了如何做到这一点。该功能的名称是什么以及如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T07:17:03.790

要将方法添加到现有类，只需重新打开该类并定义该方法。

```
class ExistingClass
  def new_method
    ...
  end
end 
```

你也可以使用`class_eval`：

```
ExistingClass.class_eval do
  def new_method
    ...
  end
end 
```

您的所有实例都`ExistingClass`将获得`new_method`.

# haskell - haskell中纯和不纯有什么区别？

> ID：15183324
> 
> 赞同：13
> 
> 时间：2013-03-03T07:10:15.683
> 
> 标签：haskell, functional-programming

haskell中纯和不纯有什么区别？在haskell中做IO的时候，把纯项和不纯项分开是什么意思？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-03T08:50:19.707

本质上，您希望在“不纯部分”中保留尽可能少的代码。用 IO monad 编写的代码永远充满不安全感。带有签名的函数`IO Int`将在 IO monad 中返回一个整数，但除此之外它还可以向月球发送核导弹。如果不研究每一行代码，我们就无法知道。

例如，假设您要编写一个程序，该程序接受一个字符串并在其上附加“, dude”。

```
main = do
  line <- getLine
  putStrLn $ line ++ ", dude" 
```

代码的某些部分需要在 IO monad 中，因为它们有副作用。这包括 getLine 和 putStrLn。但是，将两个字符串放在一起不会。

```
main = do
  line <- getLine
  putStrLn $ addDude line

addDude input = input ++ ", dude" 
```

addDude 的签名表明它是纯的：`String -> String`。这里没有`IO`。这意味着我们可以假设 addDude 至少会以这种方式运行。它将接受一个字符串并返回一个字符串。它不可能有副作用。它不可能炸毁月球。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T07:53:02.917

纯度仅仅意味着不会产生副作用（从磁盘读取、移动机械臂等）

将纯函数与不纯函数分开意味着您可以更多地了解您的代码将要做什么。例如，当您说 时`1 + 2`，您可以通过它的类型 ( `Int -> Int -> Int`) 确定它所做的唯一事情就是取两个数字并产生第三个数字。如果它的类型是`Int -> Int -> IO Int`，它可能会在每次将两个数字相加时移动一个机械臂。

可以在这里找到 Haskell 基础知识的良好起点：http: [//learnyouahaskell.com/introduction#so-whats-haskell](http://learnyouahaskell.com/introduction#so-whats-haskell)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T20:38:37.020

Haskell 中的一切都是纯粹的。您正在阅读的内容可能是关于 IO mondad 内部与外部的代码。一旦你将某些东西放入 IO monad，它就永远无法“逃脱”——你必须留在 IO monad。因此，IO monad 倾向于“侵入”你的代码——如果你有一个返回 IO 的东西，那么任何调用它的代码也必须返回 IO，等等。因此最好只在必要的地方使用 IO monad，尽可能在程序的顶层，并将计算的任何部分分离为纯函数。

# c++ - C++ 变量零校正

> ID：15183327
> 
> 赞同：0
> 
> 时间：2013-03-03T07:10:58.553
> 
> 标签：c++, visual-c++, double, cout

即使其他变量的输出与程序结束时的概率变量位于同一放置区域，变量“概率”总是为零。我感觉它与放置有关，但这可能是另一个初始化问题。概率永远不应该为零。

```
#include <iostream>
#include <cstdlib>  
#include <ctime>
#include <iomanip>

using namespace std;

int main() {

    int die1, 
        die2, 
        sum,
        turns,
        win=0,
        loss=0;
    double probability=0;
    int thepoint, rolls;
        srand(time(0));

    cout<<"How many turns would you like? ";
    cin>>turns;

    for(int i=0; i<turns; i++)
    {
        sum=0;

        die1=rand()%6;
        die2=rand()%6;
        sum=die1+die2;

        //cout<<"\nFirst die is a  "<<die1<<endl;
        //cout<<"Second die is a "<<die2<<endl;
        //cout<<"\n\n>>>Turn "<<i<<": You rolled "<<sum;

        switch (sum){
            case 2: case 3: case 12:
                //cout<<"You have lost this turn with 2 3 or 12!"<<endl;
                loss++;
                break;
            case 7: 
                //cout<<"\nYea! You won this turn with a 7 on the first roll!"<<endl;

                win++;

                break;      
            case 11:
                //cout<<"You won this turn ith 11!"<<endl;
                win++;
                break;
            default:
                //cout<<"\nRolling again!"<<endl;
                thepoint=sum;
                rolls=1;
                sum=0;
                //cout<<"\nRoll 1 - Your point is "<<thepoint<<endl;
                while (sum != thepoint)
                {
                    //srand(time(0));
                    die1=rand()%6;
                    die2=rand()%6;
                    sum=die1+die2;
                    rolls++;
                    //cout<<"Roll "<<rolls<<". You rolled "<<sum<<endl;
                    if (sum == thepoint)
                    {
                        //cout<<"You won this turn in the while with a point match!"<<endl;
                        win++;
                        break;
                    }
                    if (sum == 7)
                    {
                        loss++;
                        //cout<<"You lost this turn in the while with a 7"<<endl;
                        break;
                    }
                }
        }

    }

    probability = win/turns;

    cout<<"No. of Turns: "<<turns<<"\n";
    cout<<"No. of Wins: "<<win<<"\n";
    cout<<"No. of Loses: "<<loss;

    cout.precision(6);
    cout<<"\nExperimental probability of winning: "<<fixed<<probability;

    cin.get();
    cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T07:14:10.973

由于变量`win`和`turns`是数据类型`int`, 并且`probability`是实数（即此处为双精度数），因此您需要在`double`执行除法之前将其中至少一个转换为。

```
probability = (double)win/turns; 
```

顺便说一句，如果需要但不是真的需要，同时投射`win`也没有害处。`turns`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T07:15:49.307

该`mod 6`操作`% 6`将为您提供 0..5 范围内的数字（除以 6 后的余数）。你需要补充`1`一点。

改变

```
die1=rand()%6;
die2=rand()%6; 
```

至

```
die1=1+rand()%6;
die2=1+rand()%6; 
```

**更新：**虽然这是一个错误，但它不是概率打印为零的根本原因，@Tuxdude 指出了真正的问题。

# php - Magento onestepcheckout 更改帐单地址字段顺序

> ID：15183331
> 
> 赞同：0
> 
> 时间：2013-03-03T07:11:38.023
> 
> 标签：php, magento

我想更改 onestepcheckout 页面上帐单地址字段的顺序。我从管理员 onestepcheckout settongs 中找到“字段位置管理”，但此处显示一条消息“配置部分账单和送货地址中的字段位置。您可以将字段显示为 2 列（例如：名字 + 姓氏）或 1 个完整列（例如：地址+空）”。

我改变了她的顺序，但它没有反映。我也找不到帐单和送货地址部分。请帮我找到这个部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:11:24.570

您可以从 Admin > System > Configuration > Onestepcheckout 执行此操作

[http://www.YOURWEBSITE.com/index.php/admin/system_config/edit/section/onestepcheckout/](http://www.YOURWEBSITE.com/index.php/admin/system_config/edit/section/onestepcheckout/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:58:43.443

您可能正在使用付费的第 3 方扩展，因此最好的选择是联系扩展提供商支持以获得答案。

在所有情况下，当您使用付费扩展程序时，请先尝试通过支持解决您的问题，然后询问：

*   其他开发人员很可能无法访问源代码来帮助您
*   您在开放互联网中的问题已编入索引，并且可能只需要扩展提供商的销售费用
*   您在开放互联网上的问题可能不会引起扩展提供商的注意

# open-source - 对选择什么许可证感到困惑

> ID：15183333
> 
> 赞同：0
> 
> 时间：2013-03-03T07:11:51.827
> 
> 标签：open-source, licensing

我和我的朋友一起做了一个项目并做了一个网站。这是网站：[TOFSIS](http://tofsis.com)

它或多或少像一个教育 CMS。现在的事情是，它处于初始阶段。我们仍然需要按照学院的指示为网站准备更多的模块。

所以，我和我的搭档想把它开源，这样大学里的人就可以在它的基础上发展。我们希望从一群真正感兴趣的合格开发人员中进行选择，并仅在特定条件下向他们提供代码，以便他们可以为站点准备特定模块或修复现有错误。对于诸如 GPA 计算器、考勤计算器之类的东西，您不需要该网站的代码。

我完全阅读了许可证，我认为我们还不能选择开源许可证，因为我们现在没有给出代码。但是知识共享呢？只需添加像 SO 这样的 CC 徽章。

我看到在 SO 页脚上有一个 CC 印章。据我所知，SO 不是开源的。但我也听说 CC 不适用于软件或代码。那么开发人员什么时候使用 CC 许可证呢？在我的情况下，使用 GPL 而不现在给出代码但增加一些额外的自定义条件是否公平？

在我的情况下我应该怎么做？我想申请执照。我不希望任何人商业化，我也希望人们分享东西。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T09:13:08.903

如果您想让源代码开放供人们改进，但又想迫使人们分享他们的改进，那么 AGPL 可能是最好的许可选择[。](http://en.wikipedia.org/wiki/Affero_General_Public_License)

它没有明确阻止商业化，但任何制作商业衍生作品的人都必须根据 AGPL 分享他们的所有更改。在实践中，这意味着商业实体将不得不寻找其他创造价值的方式，例如提供增值服务。

**注意**：[开源定义](http://opensource.org/docs/osd)要求许可证具有*“不歧视努力领域”*。这意味着如果你想被归类为开源，你就不能添加禁止商业用途的条款。您必须让企业以相同的条件公平地使用开源代码，就像其他所有人一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T09:05:37.893

在我回答之前，首先要问一个问题：为什么不让代码广泛可用？既然您似乎无意将其商业化，为什么还要麻烦使用非 OSS 许可证（这将引发与您的贡献者的讨论）。

无论如何，一个好的许可证可能是[Microsoft Reference Source License](http://referencesource.microsoft.com/referencesourcelicensing.aspx)，它允许查看权限，但不允许修改/重新分发。您可以制定单独的协议以允许特定人员做出贡献，请咨询律师，因为这属于合同法领域（您需要获得他们的许可才能重新许可他们的代码）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:48:04.117

> 但我也听说 CC 不适用于软件或代码。那么开发人员什么时候使用 CC 许可证呢？

软件开发人员***绝不应将***CC 许可证用于软件程序。

知识共享许可适用于图像、照片、音乐、视频或文档文本等作品。

它们不太适合软件，因为软件程序有两种形式：目标代码和源代码。CC 许可证不适用于这两种形式。例如，您可以很好地编辑照片或音乐，如果您没有源代码，则无法很好地使用软件。

顺便说一句，在stackoverflow上CC。用于内容。所以你现在可以编辑我的答案并改进它；）

# assembly - 在全局变量上调用 addr 无法在 masm32 中组装，但偏移有效

> ID：15183335
> 
> 赞同：0
> 
> 时间：2013-03-03T07:12:01.817
> 
> 标签：assembly, masm, memory-address, masm32

我昨天真的开始学习 MASM32，如果这是一个愚蠢的问题，请耐心等待。

我对`addr`and`offset`的理解如下：两者都返回变量的内存地址，但`offset`仅适用于全局变量（其内存地址在汇编时知道），并且`addr`适用于全局变量和局部变量。我知道高级语言中的全局变量和局部变量是什么；我的理解是，在`.data`、`.data?`和`.const`块中声明的变量是全局的，而`local`在过程中用关键字声明的变量是局部的。

我的整个代码是：

```
.386
.model flat, stdcall
option casemap:none

include \masm32\include\windows.inc
include \masm32\include\user32.inc
includelib \masm32\lib\user32.lib
include \masm32\include\kernel32.inc
includelib \masm32\lib\kernel32.lib

.data

szCap db "Hello", 0                   ;caption for the MessageBox
szMsg db "Hello, world!", 0           ;text for the MessageBox

.code

;Procedure for creating a MessaheBox with NULL parent and variable text
TestProcedure proc msg:dword, cap:dword     
    invoke MessageBox, NULL, msg, cap, MB_OK
    ret
TestProcedure endp

main:
    ; error on these lines
    push addr szCap ; C:\masm32\My files\HelloWorld.asm(35) : error A2008: syntax error : addr
    push addr szMsg ; C:\masm32\My files\HelloWorld.asm(36) : error A2008: syntax error : addr

    call TestProcedure

    invoke ExitProcess, 0
end main 
```

但是，如果我更改`addr`为`offset`，则代码可以完美运行。为什么`addr`在这种情况下无法组装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:09:51.493

在平面模式下，所有地址都是偏移量。

ADDR 运算符是在相当新的 MASM 版本中添加的，据我所知，它仅与 INVOKE 关键字一起使用。在 INVOKE 中，ADDR 与全局标识符的偏移量相同，但也可以计算本地基于堆栈的变量的相对地址（它通常会发出 LEA 指令）。

# java - sysout 仅在具有 main 方法的类中工作

> ID：15183339
> 
> 赞同：0
> 
> 时间：2013-03-03T07:12:19.087
> 
> 标签：java

我是 Java 新手。在新的 Lubuntu（12.10 x64 和所有更新）下，我从 Lubuntu 软件中心下载 Eclipse（3.8）。我的问题是**System.out.print()**仅在具有 main 方法的类中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:25:09.253

在任何方法声明之外只允许声明变量。在你的情况下：

```
System.out.println("test"); 
```

In 在`Class2`方法声明之外被调用。（你希望它什么时候被调用？？？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:42:40.533

让我们试着说出 MousEvent 想要表达的意思……但要清楚。

当你写：

```
public class Foo {
    System.out.println("test");
} 
```

您将声明放在不允许出现声明的上下文中。

在这种情况下，您只能放置变量声明、方法声明、类型声明和静态或实例初始化程序块。

语句（通常）只允许*在*方法或静态/实例初始化程序块内。

# android - “IllegalStateException：内容已被使用”

> ID：15183343
> 
> 赞同：1
> 
> 时间：2013-03-03T07:13:03.547
> 
> 标签：android, json

我因为以下代码中的 IllegalStateException 而感到震惊。有人可以帮我吗？代码：

这是一些通过 json 从远程服务器获取数据并将其插入本地存储并在列表视图中显示的应用程序

```
package com.shadatv.shada;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Locale;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Toast;

public class MediaActivity extends OptionsMenu {
    Locale locale;

    // boolean mybooks;

    Configuration config = new Configuration();
    static SharedPreferences sharedPreferenceid;
    static SharedPreferences.Editor editorid;
    public static final String Myid = "Myid";
    String myid = "";
    InputStream is = null;
    StringBuilder sb = null;
    String resultt = "";
    JSONArray jArray;
    String result = null;

    public DAOCanticles cantDatabase = null;

    int numberofrowssss;
    int responseCode;

    //String targetcover, targetbname, targetauthname;

    public String caNameField = "", caLinkField = "", caImgField = "";

    // ///////////////////ONLINE BESTSALED//////////////////////
    String caNameJson, caLinkJson, caImgJson;

    public ArrayList<String> caNameHolder = new ArrayList<String>();
    public ArrayList<String> caLinkHolder = new ArrayList<String>();
    public ArrayList<String> caImgHolder = new ArrayList<String>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.media);

        cantDatabase = new DAOCanticles(this);
        new LoadData().execute();
    }

    // =============================================================================

    public void onClickPrograms(View view) {
        startActivity(new Intent("com.shadatv.ProgramsActivity"));
    }

    // =============================================================================

    public void onClickCanticles(View view) {
        startActivity(new Intent("com.shadatv.CanticlesActivity"));
    }

    // =============================================================================

    public void onClickDocumentaries(View view) {
        startActivity(new Intent("com.shadatv.DocumentariesActivity"));
    }

    // =============================================================================

    private class LoadData extends AsyncTask<Void, Void, Void> {
        public ProgressDialog progressDialog1;

        @Override
        protected Void doInBackground(Void... params) {
            cantDatabase.deletetable();
            getCanticlesByJSON();
            addCanticles();
            return null;
        }

        @Override
        // can use UI thread here
        protected void onPreExecute() {
            CharSequence contentTitle = getString(R.string.loading);
            this.progressDialog1 = ProgressDialog.show(MediaActivity.this, "",
                    contentTitle);
        }

        // -------------------------------------------//

        @Override
        protected void onPostExecute(final Void unused) {
            this.progressDialog1.dismiss();
        }
    }

    // =============================================================================

    public void getCanticlesByJSON() {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            try {

            } catch (Exception e) {
                Log.e("my_log_tag", e.toString());
            }

            // buffered reader
            try {
                HttpPost httppost = new HttpPost(
                        "http://dt-works.com/ags/shadatv/canticles/android_data");
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "UTF-8"), 80);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                String line = "0";
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = EntityUtils.toString(entity);
                //result = sb.toString();
            } catch (Exception e) {
                Log.e("my_log_tag", e.toString());
            }
            try {
                result = result.substring(1);
                jArray = new JSONArray(result);

                JSONObject json_data = null;

                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);

                    caNameJson = json_data.getString("ca_name");
                    Toast.makeText(MediaActivity.this, caNameJson, Toast.LENGTH_LONG).show();
                    caLinkJson = json_data.getString("ca_link");
                    caImgJson = json_data.getString("ca_link");

                    caNameHolder.add(caNameJson);
                    caLinkHolder.add(caLinkJson);
                    caImgHolder.add(caImgJson);

                }
            } catch (JSONException e) {
                Log.e("my_log_tag", e.toString());
            }
        } catch (ParseException e) {
            Log.e("my_log_tag", e.toString());
        } catch (Exception e) {
            Log.e("my_log_tag", e.toString());
        }

    }

    // =============================================================================

    public void addCanticles() {
        try {
            for (int i = 0; i < caNameHolder.size(); i++) {
                caNameField = caNameHolder.get(i);
                caLinkField = caLinkHolder.get(i);
                caImgField = caImgHolder.get(i);

                cantDatabase.createCanticle(caNameField, caLinkField,
                        caImgField);
            }
        } catch (Exception e) {
            Log.e("my_log_tag", "notfilled yet");
        }
    }
} 
```

## 日志猫

```
03-03 07:03:06.565: D/libEGL(6716): loaded /system/lib/egl/libEGL_mali.so
03-03 07:03:06.570: D/libEGL(6716): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-03 07:03:06.575: D/libEGL(6716): loaded /system/lib/egl/libGLESv2_mali.so
03-03 07:03:06.580: D/(6716): Device driver API match
03-03 07:03:06.580: D/(6716): Device driver API version: 10
03-03 07:03:06.580: D/(6716): User space API version: 10 
03-03 07:03:06.580: D/(6716): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Mon Mar  5 09:47:55 KST 2012 
03-03 07:03:06.595: D/OpenGLRenderer(6716): Enabling debug mode 0
03-03 07:03:06.655: D/CLIPBOARD(6716): Hide Clipboard dialog at Starting input: finished by someone else... !
03-03 07:03:06.655: W/IInputConnectionWrapper(6716): showStatusIcon on inactive InputConnection
03-03 07:03:15.215: D/dalvikvm(6716): GC_FOR_ALLOC freed 9K, 2% free 12615K/12807K, paused 12ms
03-03 07:03:15.215: I/dalvikvm-heap(6716): Grow heap (frag case) to 15.015MB for 2764816-byte allocation
03-03 07:03:15.255: D/dalvikvm(6716): GC_CONCURRENT freed <1K, 2% free 15315K/15559K, paused 1ms+1ms
03-03 07:03:15.460: D/OpenGLRenderer(6716): Flushing caches (mode 0)
03-03 07:03:18.945: E/my_log_tag(6716): java.lang.IllegalStateException: Content has been consumed
03-03 07:03:18.945: E/my_log_tag(6716): java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:54:53.800

您已经从实体中获取了内容，并且您再次尝试从实体中获取值，因此它会引发 IllegalStateException。因为您已经使用了实体中的内容并且您正在尝试再次阅读它

```
 result = EntityUtils.toString(entity); // this throws the exception 
```

# assembly - MIPS 中的大于、小于等于、大于等于

> ID：15183346
> 
> 赞同：19
> 
> 时间：2013-03-03T07:13:34.793
> 
> 标签：assembly, mips

给定两个寄存器`$s0`, `$s1`，我如何仅使用`slt`(set on less than) and `beq`and `bne`(branch if equal, branch if not equal) 指令将以下伪代码转换为 MIPS 汇编语言。

```
 if ($s0 > $s1) { goto label1 }
   if ($s0 >= $s1) { goto label2 }
   if ($s0 <= $s1) { go to label3 } 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-03T09:33:13.887

我假设伪代码是按顺序执行的，所以早期的条件为真意味着你去那里并且永远不会到达后面的`if`语句。这使得最后一个分支保证在到达时被采用，所以它甚至不需要是有条件的。（同时假设这是一个没有分支延迟槽的 MIPS。）

```
slt  $t1,$s1,$s0      # checks if $s0 > $s1
bne  $t1,$zero,label1 # if $s0 >  $s1, goes to label1
beq  $s1,$s2,label2   # if $s0 == $s2, goes to label2 
# beq  $t1,$zero,label3 # if $s0 <  $s1, goes to label3
b    label3            # only possibility left 
```

如果不是这种情况，您将希望使用/来实现，`$s0 >= $s1`例如， 如 Ahmed 的回答中所示。
`!($s0 < $s1)``slt $t1, $s0, $s1``beqz $t1, target`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-13T15:11:53.820

*分别*实现每个比较，而不是在多个比较中优化与早期的真实条件，使后面的不可达：

```
slt $at, $s1, $s0           # $s0 > $s1  as ($s1 < $s0) != 0
bne $at, $zero, label1

slt $t0, $s0, $s1           # $s0 >= $s1 as (s0<s1) == 0
beq $t0, $zero, label2

slt $t1, $s1, $s0           # $s0 <= $s1 the same but reversing the inputs
beq $t1, $zero, label3

label1:
label2:
label3: 
```

有关的：

*   [如何在汇编语言（MIPS）中做小于或等于？](https://stackoverflow.com/questions/22736836/how-to-do-less-than-or-equal-in-assembly-languagemips)- 无分支比较注册，例如 C`return (z<=y);`作为`int`.

# php - PHP SoapClient 只发送一些头字段

> ID：15183352
> 
> 赞同：2
> 
> 时间：2013-03-03T07:14:12.487
> 
> 标签：php, soap, soap-client

我正在尝试访问需要自定义标头进行身份验证的 SOAP API。我可以很好地创建标头，因为它只是用户名、密码、id，很好而且简单，但由于某种原因，当实际请求通过时，它只发送用户名和密码，而不是 id。

我创建了一个 SoapHeader：

```
$auth = array("UserName" => $user, "Password" => $password, "ClientId" => $clientId);
$header = new SoapHeader("namespace", "ClientHeader", $auth, FALSE);
$this->client->__setSoapHeaders($header); 
```

我 var_dump 创建的标头、客户端等，并验证 UserName、Password 和 ClientId 都在标头中。

```
SoapClient::__set_state(array(
  Extra Fields Removed
   '__default_headers' => 
  array (
    0 => 
    SoapHeader::__set_state(array(
       'namespace' => 'namespace',
       'name' => 'ClientHeader',
       'data' => 
      array (
        'UserName' => 'name',
        'Password' => 'password',
        'ClientId' => 'id',
      ),
    )),
  ),
)) 
```

但是当我提出请求时，只会发送用户名和密码：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="namespace>
  <SOAP-ENV:Header>
  <ns1:ClientHeader>
    <ns1:UserName>name</ns1:UserName>
    <ns1:Password>pass</ns1:Password>
  </ns1:ClientHeader>
  </SOAP-ENV:Header>
  Remainder snipped 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:06:17.570

当您应该设置 ClientID 时，您正在设置 ClientId

# c# - 从 C# 中的文本文件中读取整数

> ID：15183355
> 
> 赞同：0
> 
> 时间：2013-03-03T07:14:39.077
> 
> 标签：c#, arrays, text-files

我有一个包含以下内容的文本文件：

```
0 12
1 15
2 6
3 4
4 3
5 6
6 12
7 8
8 8
9 9
10 13 
```

两行之间没有空格，但两个数字之间有空格。我想从 txt 文件中读取这些整数并将这两列保存到 C# 中的两个不同数组中。有人帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:26:45.797

尝试以下操作：

```
var r = File.ReadAllLines(path)
            .Select(line => line.Split(' '))
            .Select(arr => new
                {
                    Column0 = Int32.Parse(arr[0]),
                    Column1 = Int32.Parse(arr[1])
                    // etc
                })
            .ToArray(); 
```

然后：

```
int[] column0 = r.Select(x => x.Column0).ToArray(); // note double loop over r
int[] column1 = r.Select(x => x.Column1).ToArray(); 
```

或更长时间但也更有效：

```
int[] column0 = new int[r.Length], column1 = new int[r.Length];

for (int i = 0; i < r.Length; i++) // single loop over r
{
    column0[i] = t[i].Column0;
    column1[i] = t[i].Column1;
} 
```

* * *

甚至更长，但效率更高（一般而言）：

```
List<int> column0  = new List<int>(), column1 = new List<int>();

using (Stream stream = File.Open(path, FileMode.Open))
using (TextReader sr = new StreamReader(stream, Encoding.UTF8))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        string[] arr = line.Split(' ');
        column0.Add(Int32.Parse(arr[0]);
        column1.Add(Int32.Parse(arr[1]);
    }
} 
```

* * *

迭代/显示结果（基于零索引，即第 0、1 行等）：

```
for (int i = 0; i < column0.Length; i++)
{
    Console.WriteLine("Line {0}: column 0: {1}, column 1: {2}", i, column0[i], column1[i]);
} 
```

为了获得更好的可靠性，请使用函数而不是 Int32.Parse：

```
static int Parse(string input)
{
    int i;
    if (!Int32.TryParse(intput, out i)
        throw new Exception("Can't parse " + input);
    return i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:15:53.793

您也可以检查以下代码..

```
string data = string.Empty;
        List<int[]> intarray = new List<int[]>();

        void ReadData()
        {
            data = File.ReadAllText("Input.txt");
        }
        List<int[]> Getdata()
        {            
            string[] lines = data.Split('\n', '\r');
            foreach (string line in lines)
            {
                if(!string.IsNullOrEmpty(line.Trim()))
                {
                    int[] intdata = new int[2];
                    string[] d = line.Split(' ');
                    intdata[0] = Convert.ToInt32(d[0]);
                    intdata[1] = Convert.ToInt32(d[1]);
                    intarray.Add(intdata);
                    intdata = null;
                }
            }

            return intarray;
        } 
```

# php - 使用 PHP 从文件夹中获取图像：代码工作并获取图像路径但 img 未放入 HTML

> ID：15183356
> 
> 赞同：0
> 
> 时间：2013-03-03T07:14:39.587
> 
> 标签：php, css, glob

我一直在寻找所有地方，但似乎找不到像我这样的问题。也许我没有把正确的关键词放在一起；但也许我会更幸运地解释我的问题。

我整理了以下小代码：

```
 $image_types = array('gif','png','jpg');
    $recent = array();

    foreach($image_types as $image_type) {
        foreach(glob('first/second/*.'.$image_type) as $filename){
            $recent[$filename] = time() - filemtime($filename);
        }
    }

    $recent = array_keys($recent, min($recent));
    $recent_img = $recent[0]; 
```

它应该做的是查看特定文件夹并找到最新图像，然后将其放入网页中。它*所做*的是找到最新的图像、路径和所有内容。所以一切都在进行中。如果我`echo` `$recent_img`得到最新的图像`src`，那么显然我想在之后放置以下代码：`<img src="<?php echo $recent_img ?>" />`我应该得到图像。果然，一切正常，甚至在 HTML`<img>`中定位到我需要的图像。但是，此时有些事情变得混乱！

如果单独`glob()`设置为路径`first`，则代码完全有效：图像显示在网站中。但是随着`second`文件夹的添加，除了在网站上显示图像之外，它会执行所有操作。

于是我去结果网站查看源代码，图片代码如下：

```
 <img src="first/second/img.jpg" style="display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 0px 0px;" width="0" height="0"> 
```

注意等等`display:none!important`，`visibility:hidden!important`几乎就像 CSS 被设置为尽其所能避免显示图像一样。包括在图像明显不是 0 x 0 像素的情况下将宽度和高度设置为 0。（以防万一：我的样式表中也没有任何实例会导致在我的项目中的任何图像上将所有内容设置为 0 和隐藏等。）

但是，正如我所说，当路径只有一部分时，不会发生这种情况，即文件夹`first`。我尝试将一个文件夹中的所有图像放入另一个文件夹，但问题仍然存在。我已经在 Chrome 中当场编辑了 CSS 值，但仍然没有。

这似乎是一个荒谬的问题，因为除了代码在父文件夹内的文件夹内寻找文件外，没有任何变化。此外，因为代码实际上可以显示我需要的文件及其路径，而不是文件本身。

## 供你们查看的在线试用示例和 TEMP 解决方案，或者更确切地说，“解决方法”。

我讨厌解决问题。它通常会使事情复杂化和/或使它们变得混乱。首先，在这种情况下，这是一个组织问题。最好将所有图像放在一个文件夹中，然后为不同类型创建子文件夹。让许多图像文件夹漂浮在根目录上对我来说不是一个好主意。其次，当错误中似乎没有逻辑时，不得不使用“解决方法”似乎很荒谬。第三，我真的很想了解发生了什么，而不是把它变成 PHP 百慕大三角。所以请不要把我的 TEMP 解决方案当作我放弃，请继续在这个美妙的地方发挥协同作用，毫无疑问，我们会在某个时候找到解决方案。

无论如何，您可能已经猜到的“解决方法”是将`second`文件夹放在与文件夹相同的目录中`first`，即根目录。因此，这应该解决该特定问题。但如果你问我，这不是一个友好的解决方案。

我被要求上传该问题的在线试用版，我已经这样做了[>>HERE<<](http://www.procesosaltavida.com/trial.php)。您将能够看到相同的代码在`first/second/`和 中查找最新图像`first/`，并且您会发现其中一个工作得非常好，而另一个却神秘地失败了！

**问：我刚想到。它可能与路径名的长度有关吗？即`first/`可以，但是`first/second/`太长了？考虑到从路径中检索信息是成功的，这没有多大意义，而且问题是在 HTML 结果的一边，但我已经尝试将`second`文件夹放在根目录中并给它一个 10-字母名称和问题被重新创建。然而，这只发生在 WAMP localhost 中，因为当我在线上传所有内容时，长度似乎并不重要。但是，即使在网上，正如您从我的[LINK](http://www.procesosaltavida.com/trial.php)中看到的那样，第一个问题仍然存在。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:21:54.630

您可以尝试使用 jquery 检索 src 和更新：

```
$.get('image.php').success(function(src) {
    $('#myimg').attr('src',src);
}); 
```

# c# - 如何通过单击按钮在窗口窗体应用程序中播放音乐

> ID：15183357
> 
> 赞同：0
> 
> 时间：2013-03-03T07:14:48.157
> 
> 标签：c#, winforms

我想创建一个按钮，当用户单击按钮时，应用程序可以播放音乐（以嵌入式方式或外部方式播放都可以）我只是c＃的菜鸟，只知道如何创建按钮任何人都知道如何编码吗？

```
 private void musicbutton_Click(object sender, EventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:29:01.867

如果声音文件是波形文件，您可以进行以下操作。

```
My.Computer.Audio.Play("wave.wav", AudioPlayMode.WaitToComplete) 
```

你会在搜索引擎上找到更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:38:34.193

这个问题已经在这里得到解答：[如何在 C# 中播放 mp3 文件？](https://stackoverflow.com/questions/3129361/how-to-play-mp3-files-in-c). 您也可以使用@jparthj 的解决方案，但添加对此处指定的“Microsoft.VisualBasic.dll”的引用：http: [//msdn.microsoft.com/en-us/library/cf1shcah%28v=vs.90%29。 aspx](http://msdn.microsoft.com/en-us/library/cf1shcah%28v=vs.90%29.aspx)

# ruby-on-rails - Mongoid 关联不起作用，但 id 很好地存在

> ID：15183358
> 
> 赞同：1
> 
> 时间：2013-03-03T07:14:56.763
> 
> 标签：ruby-on-rails, mongodb, mongoid, appfog

我有一个在 Appfog 运行的测试应用程序。Appfog 文档建议使用 Mongomapper gem，但我在我的项目中使用了 Mongoid。[https://docs.appfog.com/services/mongodb](https://docs.appfog.com/services/mongodb)

问题是：

Mongoid 关联不起作用，但 id 就在那里。

```
m = Movie.find_by(:name => "Argo")
m.actors
=> []
m.actor_ids
=> ["510a092553c205c294000040", "510a099b53c205c2940001ce", "510a09a553c205c2940001ef", "510a0a4653c205c2940003ca", "510a0aaa53c205c2940004b2"] 
```

当我使用托管在 MongoHQ 的数据库时，关联工作正常。但是我不想单独托管应用程序和数据库，因为网络延迟会增加每个数据库查询的时间。

任何想法可能是错误的以及如何解决它？

**更新：**

appfog 的 Mongoid 版本是 1.8.5，我的本地机器上它工作的 mongoid 版本是 2.2.0。

两者的以下内容相同：

```
m.actors.metadata
=> #<Mongoid::Relations::Metadata
  autobuild:    false
  class_name:   Actor
  cyclic:       nil
  dependent:    nil
  inverse_of:   nil
  key:          actor_ids
  macro:        has_and_belongs_to_many
  name:         actors
  order:        nil
  polymorphic:  false
  relation:     Mongoid::Relations::Referenced::ManyToMany
  setter:       actors=
  versioned:    false> 
```

# c++ - 如果存在三个变量，则范围解析运算符

> ID：15183362
> 
> 赞同：2
> 
> 时间：2013-03-03T07:15:18.687
> 
> 标签：c++, scope

我刚开始学习c++。我遇到了范围解析运算符，我尝试了一个类似这样的程序

```
#include <iostream>
using namespace std;

int i = 40;
int main(){
    int i = 20;
    {  
        int i = 10;
        cout<< ::i;  // prints 40
        cout<<i;    // prints 10
        cout << i;  // how do i print variable i whose value is 20 
    }
} 
```

但是如果我想访问内部块中的变量 i (i=20) `main()`。我怎么做？可能吗？这可能很愚蠢，但我不知道 C++ 的所有内置函数。所以想看看有没有什么办法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:52:13.123

我认为这可以使用`namespaces`.

```
#include <iostream>
using namespace std;
namespace inner{int i;}
int i = 40;
int main() {
    inner::i = 20;
    {
        int i = 10;
        cout<< ::i;  // prints 40
        cout<<i;    // prints 10
        cout << inner::i; // this prints 20
    }
} 
```

我希望这可以用于`i`代码中的几个。

**编辑**答案在语义上改变了程序，因为它使内部`i`成为全局变量。

# python - Python：替换一个简单的字符串？

> ID：15183363
> 
> 赞同：0
> 
> 时间：2013-03-03T07:15:21.983
> 
> 标签：python, string

我想扩展“博士”。进入“医生”或“驱动器”以消除混乱。

```
string = 'Dr. Seuss Dr.'
if string[0:3] == "Dr.":
    new_string = 'Doctor Seuss Dr.'
if string[:3] == "Dr.":
    another_string = 'Dr. Seuss Drive' 
```

有没有更好的方法来扩展“博士”？如果字符串是“我喜欢苏斯博士”，我将无法处理案件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T07:32:33.947

像这样的东西？

```
mystring = 'Dr. Seuss Dr.'
if 'Dr.' in mystring:
    mystring = mystring.replace('Dr.', 'Doctor', 1).replace('Dr.', 'Drive') 
```

第一次替换只替换`Dr.`一次（注意添加的额外参数）。

感谢 shantanoo 指出有一个模块`string`，所以变量名应该避免这样的词。我已将变量更改为`mystring`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:38:32.263

我猜你想转换`Dr.`成`Doctor`它是否在字符串的开头。否则，你想`Dr.`被转换成`Driver`.

您可以使用正则表达式来实现这一点：

```
import re
string = 'Dr. Seuss Dr.'
string = re.sub(re.compile('^Dr.'), 'Doctor', string)
string = re.sub(re.compile('Dr.$'), 'Driver', string)
#now string contains 'Dr. Seuss Drive' 
```

# c# - 如何使用模型中的数据定义列表，然后使用 lambda 表达式获取所有元素

> ID：15183366
> 
> 赞同：0
> 
> 时间：2013-03-03T07:15:51.147
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我想做的是用模型中的数据填充列表并设置为查看并在视图中显示使用dropDownListFor ...我的逻辑是正确的...我应该做什么

模型 ：

```
public class Categories{
public int id {get;set}
public string categoryName{get;set}
    public List<CategoryName> catNames {get;set;} //or IEnumerable<>
} 
```

控制器：

```
public ActionResult getSomething(){
public List<CategoryName>   list = new List<CategoryName>() ;
public List<CategoryName> names= list.FindAll(x=>x.categoryName);
return View(names)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:30:10.013

您的 C# 语法无效，但您走在正确的轨道上。

定义模型：

```
public class CategoriesModel
{
    public int Id { get; set }
    public string CategoryName { get; set }
    public List<CategoryName> CategoryNames { get; set; }
} 
```

控制器：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new CategoriesModel();
        model.CategoryNames = GetCategoryNames();
        return View(model);
    }

    private List<CategoryName> GetCategoryNames()
    {
        // TODO: you could obviously fetch your categories from your DAL
        // instead of hardcoding them as shown in this example
        var categories = new List<CategoryName>();
        categories.Add(new CategoryName { Id = 1, Name = "category 1" });
        categories.Add(new CategoryName { Id = 2, Name = "category 2" });
        categories.Add(new CategoryName { Id = 3, Name = "category 3" });
        return categories;
    }
} 
```

最后是模型的强类型视图：

```
@model CategoriesModel
@using (Html.BeginForm())
{
    @Html.DropDownListFor(
        x => x.CategoryName, 
        new SelectList(Model.CategoryName, "Id", "Name")
    )
    <button type="submit"> OK</button>
} 
```

您尚未展示您的`CategoryName`模型，但在此示例中，我假设它具有已调用的属性`Id`，并且`Name`是 DropDownList 所绑定的。

# git - 如何右键单击打开 Github for Windows 的 Git Shell？

> ID：15183369
> 
> 赞同：8
> 
> 时间：2013-03-03T07:16:27.480
> 
> 标签：git, powershell, github-for-windows

如何`"open a Git Shell here"`在右键单击 repo 文件夹时添加选项？这样我就不必打开`Github for Windows`并右键单击 repo 的名称并选择`"open a shell here"`？

我可以通过右键单击打开普通的 PowerShell 或 cmd，但它们缺少像of提供`posh-git`的附加组件`Git Shell``Github for Windows`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:20:32.770

尝试`Shift`+ `Right Click`> `Open shell here`。在默认安装下，git 应该将此选项添加到 Windows 资源管理器的扩展上下文菜单中。

# c++ - 具有数据类型问题的 C++ 阶乘函数

> ID：15183370
> 
> 赞同：0
> 
> 时间：2013-03-03T07:16:31.603
> 
> 标签：c++

我做了一个函数来计算从 0 到 16 的阶乘数（没有负数并且相当小）

但它不会超过 n15 知道我应该使用什么数据类型以及在哪里使用？

```
long factorial(long num1)
{
    long f;

    if (num1 >= 0 && num1 <= 16)  
    {
        for (long i = 0; i <=num1; i++)
        {
            if (i==0) f = 1;
            else f=f * i;
        }
        return f;
    }
    return 0xFFFFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:22:45.257

我猜你使用的是 32 位系统，否则它会工作。

您可以在 32 位整数上表示的最大数字是 2^31（您必须为符号保存一点）。

根据您的架构（如果没有此信息，您的问题将无法回答），a`long`可能存储在 32 位上，因此您无法准确表示 16！因为它大于 2^31。

寻找编译器/体系结构的特定扩展以保证您有 64 位存储（标准不保证，它没有规定类型必须具有多少位，它只是设置类型存储大小之间的不等式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:23:42.553

更改`long`为`long long`：

```
long long factorial(long num1)
{
    long long f;
    //....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:29:53.720

尝试查看库[gmplib](http://gmplib.org/) - 应该能够存储和使用非常大的数字

# android - 转发的短信是否包含原始发件人的电话号码？

> ID：15183375
> 
> 赞同：-3
> 
> 时间：2013-03-03T07:17:23.867
> 
> 标签：android, sms, pdu

假设 user1 收到了来自 tel1 的 SMS。然后他转发给user2。user2 能从他收到的 SMS 中提取 tel1 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:19:12.753

简短的回答是*否定*的，此类信息不会转发给接收者。

# mysql - 使用 COUNT() 跨 2 个表执行 INNER JOIN

> ID：15183377
> 
> 赞同：1
> 
> 时间：2013-03-03T07:17:48.640
> 
> 标签：mysql, sql, join, count

我被困在一个 SQL 查询上，希望你们能帮助我。

我有 2 张桌子：

```
EVENTS
event_id (PK)
event_name

ORDERS
order_id (PK)
event_id (FK) 
```

我正在尝试对这些表执行以下查询：

```
SELECT
    e.event_id,
    e.name,
    COUNT(o.event_id) AS booked     
FROM
    events AS e
INNER JOIN
    orders AS o
ON
    e.event_id = o.event_id
WHERE
    e.event_id IN (1, 2, 3) 
```

问题是我得到的结果是：

```
+----------+------+--------+
| event_id | name | booked |
+----------+------+--------+
|     NULL | NULL |      0 |
+----------+------+--------+ 
```

但是当我运行 3 个单独的查询时：

```
WHERE e.event_id IN (1)

WHERE e.event_id IN (2)

WHERE e.event_id IN (3) 
```

我得到了我想要的结果：

```
+----------+-------+--------+
| event_id | name  | booked |
+----------+-------+--------+
|       1  | Test1 |      0 |
+----------+-------+--------+

+----------+-------+--------+
| event_id | name  | booked |
+----------+-------+--------+
|       2  | Test2 |      0 |
+----------+-------+--------+

+----------+-------+--------+
| event_id | name  | booked |
+----------+-------+--------+
|       3  | Test3 |      0 |
+----------+-------+--------+ 
```

我究竟做错了什么？有没有办法只使用一个查询并获得：

```
+----------+-------+--------+
| event_id | name  | booked |
+----------+-------+--------+
|       1  | Test1 |      0 |
+----------+-------+--------+
|       2  | Test2 |      0 |
+----------+-------+--------+
|       3  | Test3 |      0 |
+----------+-------+--------+ 
```

请帮忙。

更新：当我运行时：

```
SELECT
    e.event_id,
    e.name,
    COUNT(o.event_id) AS booked     
FROM
    events AS e
LEFT JOIN
    orders AS o
ON
    e.event_id = o.event_id
WHERE
    e.event_id IN (1, 2, 3) 
```

我只得到：

```
+----------+-------+--------+
| event_id | name  | booked |
+----------+-------+--------+
|       1  | Test1 |      0 |
+----------+-------+--------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T07:19:21.413

您应该使用`LEFT JOIN`而不是`INNER JOIN`并且不要忘记使用`GROUP BY`子句，因为您使用的是*聚合函数* `COUNT()`。

```
SELECT  e.event_id,
        e.name,
        COUNT(o.event_id) AS booked     
FROM    events AS e
        LEFT JOIN orders AS o
            ON e.event_id = o.event_id
WHERE   e.event_id IN (1, 2, 3)
GROUP   BY e.event_id, e.name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/814a3/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:24:21.397

使用带有 if 条件的左连接可以做到这一点

```
SELECT
  e.event_id,
  e.name,
  SUM(IF(o.event_id IS NULL, 0, 1)) AS booked
FROM events AS e
  LEFT JOIN orders AS o
    ON e.event_id = o.event_id
WHERE e.event_id IN(1, 2, 3)
GROUP   BY e.event_id, e.name 
```

[小提琴演示](http://www.sqlfiddle.com/#!2/814a3/3)

或者你也可以这样做

```
SELECT
  e.event_id,
  e.name,
  COUNT(o.event_id) AS booked
FROM events AS e
  LEFT JOIN orders AS o
    ON e.event_id = o.event_id
WHERE e.event_id IN(1, 2, 3)
GROUP BY e.event_id, e.name 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/814a3/4)

# css - 设置 Twitter Bootstrap 页面的最小宽度

> ID：15183379
> 
> 赞同：3
> 
> 时间：2013-03-03T07:18:12.510
> 
> 标签：css, twitter-bootstrap, width

关于设置 Twitter Bootstrap 页面的最小显示宽度，我已经搜索了很多（这里和网络上）。我想将最小显示设置为 360px，这样布局就不会改变。我尝试在 CSS 代码中设置最小宽度：

```
html, body {
  min-width: 360px;
} 
```

但没有运气。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:17:35.340

此页面似乎回答了您的问题： [窗口调整大小的最小宽度](https://stackoverflow.com/questions/3802455/min-width-in-window-resizing)

据我所知，您缺少的是将宽度设置为自动。

# ruby - 运行名为“未指定 SDK”的 Ruby 代码时出错

> ID：15183380
> 
> 赞同：9
> 
> 时间：2013-03-03T07:18:46.483
> 
> 标签：ruby, rubymine

我已经下载了 RubyMine IDE 来运行 ruby​​ 代码。我写了以下代码：

```
puts 'hellow world' 
```

但是当我想运行这个最小的程序时出现错误。IDE 显示以下错误。

```
"No SDKs specified" 
```

为什么 ？如果我想解决这个问题怎么办？我是这门语言的初学者。你们能在这方面帮助我吗？我也想要你的建议。“RubyMine”是 Ruby 的最佳 IDE 吗？你用的是什么IDE？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T07:56:44.783

您需要在此处配置 SDK：

![添加 SDK](../Images/8666636a00f1dec4c80e5ac0dbdeb7a4.png)

使用`Add SDK...`按钮并指定系统上 ruby​​ 可执行文件的路径。

在 Windows 上，您应该使用[http://rubyinstaller.org/](http://rubyinstaller.org/)二进制版本安装 Ruby。不是源包。

* * *

`what is the best`本网站欢迎或`your favorite`不欢迎问题，请[参阅常见问题解答](https://stackoverflow.com/faq#dontask)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-22T07:08:05.723

我这样修复它（Idea 2019 Ultimate）：

*   文件 | 项目结构 | 模块
*   选择“Ruby SDK 和 Gems”上的单选按钮
*   申请

[![](../Images/d35d8a9f4bf0d6fdd62d4fb6085cad57.png)](https://i.stack.imgur.com/xrpbz.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T17:50:06.823

当你创建一个新项目时，你只需要配置 SDK 来运行你的项目 ![截屏](../Images/322394c072879f0901efa8adb7c8b94e.png)

# ruby-on-rails - 在一个 ActiveRecord 查询中应用两个范围

> ID：15183385
> 
> 赞同：0
> 
> 时间：2013-03-03T07:19:25.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我的**程序**模型有这个：

```
has_many :registry_patient_counts
scope :salary_and_bonus, 
  :joins => :registry_patient_counts,
  :order => "patient_count_percentage DESC" 
```

当我使用我的控制器开始简单的婴儿步骤时，这很有效，这是：

```
programs = 
  Program.includes([:registry_patient_counts])
    .salary_and_bonus.where('organization_id = 1')
    .limit(2) 
```

但我的最终控制器应该是这样的（没有范围的情况下看起来如何）

```
@programs = Program.includes(
  [:registry_patient_counts, measures: :measures_off_targets])
  .where('organization_id = 1')
  .limit(2) 
```

所以请注意它有一个 `measures: :measures_off_targets`额外的。所以在measures和measures_off_targets之间类似地，我想定义一个与前一个类似的范围......但是我不明白如何在控制器中输入这两个范围？

* * *

**编辑：所以这就是我们到目前为止通过以下答案得到的：**

在 Program.rb 中：

```
scope :rpc,   includes(:registry_patient_counts).order => "patient_count_percentage DESC"

scope :msr, includes(measures: :measures_off_targets) 
```

控制器查询如下所示：

```
@programs2 = Program.rpc.msr.where('organization_id: 1').limit(2) 
```

RubyMine 在 IDE 中显示的错误是“找不到 msr” 如果我忽略它并转到浏览器，仍然在 Rail 控制台中，我会收到“错误 500，错误请求”并且没有任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:32:15.393

您可以链接范围和包含。

```
scope :rpc, includes(:registry_patient_counts)
scope :msr, includes(measures: :measures_off_targets)

@programs = Program.rpc.msr.where(organization_id: 1).limit(2)

# Equivalent to
@programs = Program.includes(
  [:registry_patient_counts, measures: :measures_off_targets])
  .where(organization_id: 1)
  .limit(2) 
```

# java - Java：数组作为引用类型，在方法中

> ID：15183387
> 
> 赞同：2
> 
> 时间：2013-03-03T07:19:37.923
> 
> 标签：java, pass-by-value, local-variables

我正在从 C++ 迁移到 Java，但我无法理解在 Java 中数组如何在创建它的方法之外持续存在。看看下面这个简单的代码：

```
public static int[] arrayMethod(){
    int[] tempArray = {1, 2, 3, 4};
    return tempArray;
}

public static void main(String[] args){
    int arr[] = arrayMethod();
    for(int i : arr){
        System.out.println(i);
    }
} 
```

在 C++ 中，除非数组是使用运算符动态分配的，否则`new`调用后数组将不存在，因为它是在方法中本地创建的。据我了解，Java 总是按值传递，而数组是引用类型，所以我的 c++ 逻辑会告诉我，我正在返回对本地创建的数组的引用。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T07:30:50.123

也许这会帮助你理解。

在 Java 中，这是：

```
int[] tempArray = {1, 2, 3, 4}; 
```

意思和这个*完全*一样：

```
int[] tempArray = new int[]{1, 2, 3, 4}; 
```

第一种形式是*隐含* `new`的。

在 Java 中，所有数组都是堆对象/引用。当一个数组被传递给一个方法时，它的处理方式与处理任何引用的方式相同；即引用是按值传递的。（不，这不是“通过引用调用”或“通过引用传递”，因为这些术语被正确理解。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:25:29.430

由于您要返回对然后分配给 int arr[] 的数组的引用，因此该数组仍然有指向它的东西。所以垃圾收集器不会剔除它，因为它仍然有一个引用。

它*是*一个局部变量，但随后您将它返回给您的 main 方法并为其分配了一个变量，因此该数组仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T07:29:33.733

对数组的引用是按值传递的。所以你有2个参考。您将按值返回对数组的引用。因此，只要引用指向数组，您就可以对数组进行更改（应用一些操作）。

现在，如果您有 2 个引用指向同一个数组，则通过任一引用更改数组将更改同一个数组。但是，如果在某些时候您更改了引用的值（即更改了引用指向的数组），那么这两个引用将指向不同的数组。

重要的一点是，这里的引用是按值返回的。不是数组与它的指针一起返回。简而言之，你是对的。我其实对C++知之甚少

就好像一台电视机有两个遥控器。但是，如果您将一个遥控器更改为指向其他电视机，第一个遥控器仍然可以访问旧电视。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T08:21:27.590

在 Java 中，[对象通过引用](http://way2java.com/string-and-stringbuffer/stringbuffer-petty-methods-and-pass-by-reference/)传递，值通过值传递。[数组是对象，它们通过引用传递](http://way2java.com/arrays/passing-arrays-to-methods/)。通过引用传递，您可以获得指针效果。

# html - HTML5 Boilerplate 和 960.gs 是否应该包含 reset.css？

> ID：15183389
> 
> 赞同：1
> 
> 时间：2013-03-03T07:19:49.437
> 
> 标签：html, css, 960.gs, html5boilerplate, css-reset

我正在使用 HTML5 Boilerplate 和 960.gs 开始一个项目。

在实现 960.gs 时，我应该复制 reset.css 还是只使用 normalize.css，或者两者都保留！对不起，如果这是一个可悲的问题，我还是有点绿！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:14:08.893

不应**同时**使用 Normalize 和 CSS Reset。

Normalize 将确保您的所有浏览器都以相似的方式显示元素，而不会从中删除“默认样式”。（如列表项和列表的项目符号和填充/边距）

我已经使用了很多年，我推荐 Normalize，因为它是跨浏览器 CSS“规范化”的一种不太“激进”的方法。CSS 重置将使所有值变为 0 或无，您通常需要自己重新添加样式。

您还应该查看 Yahoo CSS 重置 ( [http://yuilibrary.com/yui/docs/cssreset/](http://yuilibrary.com/yui/docs/cssreset/) )，它在重置中引入了“上下文”的概念；基本上你可以使用类来重置一些元素来限制你的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:08:19.220

Normalise.css 和 reset.css 是实现相同目的的不同方法。因此，我只会费心包括其中一个。

[Normalize.css 和 Reset CSS 有什么区别？](https://stackoverflow.com/questions/6887336/what-is-the-difference-between-normalize-css-and-reset-css)

似乎表明 normalise.css 更可取。

# java - 如何在 eclipse 中的 java 程序中编译 C ar C++ 代码并进行错误记录？

> ID：15183390
> 
> 赞同：0
> 
> 时间：2013-03-03T07:19:52.313
> 
> 标签：java, eclipse, compiler-errors, mingw

我必须在 java 中开发一个程序，该程序将 C 或 C++ 文件作为输入并编译该文件并给出在程序中发现的错误的位置、位置和类型。我更关心语法错误。我需要一种在 eclipse java 中执行此操作的方法。我已经安装了 Eclipse CDT 插件，但我不知道我是否可以从 java 程序内部调用编译器并获取行号、位置、位置。

我已经尝试安装一个编译器，即 MinGW 编译器，并且能够打印错误，但我没有按照我想要的方式得到错误。这是我尝试过[的链接](https://stackoverflow.com/questions/14833558/is-it-possible-to-get-the-diagnostics-printed-out-for-a-c-program-in-java)

有人可以帮我捕获行号，在数组中的 C 程序中发现的语法错误的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:40:38.653

您必须从`stdout`和 from解析结果`stderr`。在您链接的问题中，您可以找到如何访问它们的解决方案。

您还提到您希望有一个编译器错误的侦听器。

```
public interface CompilerErrorListener {
    public void onSyntaxError(String filename, String functionName, 
        int lineNumber, int position, String message);

    public void invalidOutputLine(String line);
} 
```

您可以使用任何实现来实现这一点：

```
public class CompilerErrorProcessor implements CompilerErrorListener {
    public void onSyntaxError(String filename, String functionName, 
        int lineNumber, int position, String message) {
        ....
        // your code here to process the errors, e.g. put them into an ArrayList
    }

    public void invalidOutputLine(String line) {
        // your error handling here
    }
} 
```

所以，让我们解析编译器输出！（请注意，这取决于您的编译器输出，并且您只提供了 2 行输出）

```
BufferedReader stdError = ...
String line;

CompilerErrorListener listener = new CompilerErrorProcessor(...);

String fileName = "";
String functionName = "";
int lineNumber = -1;
int position = -1;
String message = null;

while ((line = stdError.readLine()) != null) {
    // the line always starts with "filename.c:"
    String[] a1 = line.split(":", 2);
    if (a1.length == 2) {
        // a1[0] is the filename, a1[1] is the rest
        if (! a1[0].equals(fileName)) {
            // on new file
            fileName = a1[0];
            functionName = "";
        }
        // here is the compiler message
        String msg = a1[1];
        if (msg.startsWith("In ")) {
            // "In function 'main':" - we cut the text between '-s
            String[] a2 = msg.split("'");
            if (a2.length == 3) {
                functionName = a2[1];
            } else {
                listener.invalidOutputLine(line);
            }
        } else {
            // "9:1: error: expected ';' before '}' token"
            String[] a2 = msg.split(":", 3);
            if (a2.length == 3) {
                lineNumber = Integer.parseInt(a2[0]);
                position = Integer.parseInt(a2[1]);
                message = a2[2];

                // Notify the listener about the error:
                listener.onSyntaxError(filename, functionName, lineNumber, position, message);
            } else {
                listener.invalidOutputLine(line);
            }
        }

    } else {
        listener.invalidOutputLine(line);
    }

} 
```

这不是一个完整的例子，当然，可能还有更多的可能性，但希望你明白了。不要忘记记录无效/未处理的分支。

由于您使用特定的编译器，因此您必须适应其输出。此外，编译器版本的更改可能会导致解析代码的更改。要特别注意发现输出的结构，当你想解析它时它会付出代价。

# php - 下载的 .csv 文件包含 HTML 标记作为文本

> ID：15183398
> 
> 赞同：0
> 
> 时间：2013-03-03T07:21:26.190
> 
> 标签：php, csv, html

我想通过链接**下载****.csv**文件。为此，下载链接是在模板文件中定义的。

为了生成 .csv 文件，我编写了如下代码。

```
public function loadPartnerApplicantData() {
    $inboundBo = BoFactory::getInboundHttpRequestBo();
    $fileType = $inboundBo->getSanitizedGetParam('f');
    $formId = $inboundBo->getSanitizedGetParam('fid');
    ServiceFactory::getFormService()->loadFormDetails($formId);
    $dbTable = BoFactory::getFormBo()->getFormDbTable($formId);
    $formName = slugify(BoFactory::getFormBo()->getFormName());
    $fileName = $formName . "." . time();
    $fieldMasterSqlQuery = "SELECT field_name,field_label FROM" . FORM_FIELDS_MASTER_v2 . "where form_id='$formId' order by serial_no";
    $fieldMasterSqlQueryStatus = mysql_query(mysql_fetch_assoc($fieldMasterSqlQuery));
    $csvHeader = "";
    $fieldNameArray = array();
    foreach ($fieldMasterSqlQueryStatus as $key => $value) {
        if ($value['field_name'] == 'declaration' || $value['field_name'] == 'docPicture') {
            continue;
        }
        $csvHeader.= "\"{$value['field_label']}\";";
        $fieldNameArray[] = $value['field_name'];
    }
    $queryString = implode(",", $fieldNameArray);
    $dbTableSqlQuery = "SELECT $queryString FROM `$dbTable`";
    $dbTableSqlQueryStaus = mysql_query(mysql_fetch_assoc($dbTableSqlQuery));
    ef_clearBuffer();
   // To generate csv
    header("Content-type: text/csv");
    header("Content-Disposition: attachment; filename=$fileName.csv");
    header("Pragma: no-cache");
    header("Expires: 0");
    echo($csvHeader);
    foreach ($dbTableSqlQueryStaus as $applicantData) {
        echo "\n";
        foreach ($fieldNameArray as $fieldName) {
            echo "\"$applicantData[$fieldName]\";";
        }
        echo "\n";
    }
} 
```

并生成所需的 .csv。

**但在 .csv 文件的末尾显示浏览器的 HTML 标记。**不应该在那里。

请建议我从生成的 .csv 文件**中删除 html 内容。**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:24:49.913

由于您的函数将请求处理到最后（即交付所有数据），并且您不希望框架（无论您使用哪个）继续处理，添加

```
exit(0); 
```

作为函数的最后一行。这将在内容交付后停止处理，并阻止框架/环境发送额外的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:11:34.623

也许您在处理标头之前已经有一些回显命令，那么您要下载的 .csv 文件将包含您之前编写的所有字符串。

# asp.net - 仅显示几秒钟的消息；ASP.Net VS 2010

> ID：15183400
> 
> 赞同：1
> 
> 时间：2013-03-03T07:21:41.867
> 
> 标签：asp.net, visual-studio-2010

我正在处理 ASP.Net 页面。当用户完成一项任务时，会弹出一个用户控件并显示任务的状态，即。完成/失败。我希望`visible=false`在 3 秒后设置此用户控件。在这 3 秒内，如果用户请求另一个任务，则不应受到阻碍。

我研究了*元*标记，但我不想刷新我的页面。也使用`Thread.Sleep`会阻止我的页面 3 秒，这是我根本不想要的。也许开始一个新线程并分配此功能是可行的方法，但正如您所知，我是新手，寻求专家建议应该是富有成效的。顺便说一句，这是我第一次发帖，所以我带着很多期望来到这里。

我已经对线程和 Ajax 计时器的使用做了一些挖掘，但我似乎没有搞定。这就是为什么我来这里寻求你的帮助。

感谢期待。

PS - 出于某种原因，我不希望使用*JQuery/Javascript*来完成此操作。我希望单独使用服务器端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:35:56.317

为此，您需要使用 JavaScript。您正在尝试操纵客户端 html div/元素的可见性。有什么问题`RegisterStartupScript`并切换 css 可见性？这就是 ASP.net 愚弄您认为您可以在服务器端执行此操作的地方。

在重新加载/回发/按钮上单击：

```
ScriptManager.RegisterStartupScript(Page, typeof(Page),
              "showResponse","$('#myDiv').delay(3000).hide();", true); 
```

利用 Javascript 超时`setTimeout`或 jQuery`delay()`

[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:32:31.690

我假设使用 JQuery show 函数可以解决这个问题

$control.show( [duration ] , [ complete ] ) / control.show(duration[int])

# php - 以 pdf 格式打印 Highcharts

> ID：15183401
> 
> 赞同：1
> 
> 时间：2013-03-03T07:21:46.193
> 
> 标签：php, pdf, highcharts

是否可以使用 DOMPDF 或任何其他 PHP Html pdf 生成器将 highchart 打印为 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:42:01.920

看看他们关于在服务器上生成图像的[最新公告。](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)

保存图像后，您可以使用[tcpdf等库将它们添加到 pdf](http://www.tcpdf.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:35:20.700

Highcharts 的第 2 版包括 PDF 生成。Highcharts 客户端将导出一个 SVG 字符串，并且将有基于 Batik 的服务器模块将其转换为 PDF。[您可以在Link](http://www.highcharts.com/demo/?prerelease=1.3)上试用。

该组件只会转换图表本身。如果要转换整个网页或部分网页，请查看名称为 wkhtmltopdf 的服务器库（阅读 WebKit HTML 到 PDF）。它也转换图表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:03:37.983

请熟悉包含的导出模块和可以使用的参数[http://api.highcharts.com/highcharts#exporting](http://api.highcharts.com/highcharts#exporting)

# php - 我的 for 循环/if 语句有问题吗？

> ID：15183404
> 
> 赞同：0
> 
> 时间：2013-03-03T07:22:06.140
> 
> 标签：php, for-loop

我在 for 循环中有一个 for 循环，就在我输入 if 语句之前，两个值回显并且相等。当我评估（使用 if 语句）它们是否相等时，这些值不会评估为偶数。我看不到这句话有什么问题吗？

```
for($x = 0; $x < count($movies_total);$x++){

                for($j = 0; $j < count($ask_array);$j++){
                    echo $movies_total[$x]->question_id.' '.$ask_array[$j].'<br>';
                    if($movies_total[$x]->question_id == $ask_array[$j]){
                        echo 'no';
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:01:16.860

你应该转储你的两个变量（ $movies_total[$x] ， $ask_array ）让我们知道问题，但我猜你会有空格。您可以在修剪后比较变量：

```
if( trim($movies_total[$x]->question_id) == trim($ask_array[$j]) ) 
```

# android - Android ImageView onclicklistener不工作

> ID：15183410
> 
> 赞同：1
> 
> 时间：2013-03-03T07:22:46.607
> 
> 标签：android, imageview, android-imageview

我是 android 新手，我尝试`onclicklistener`在图像视图上实现。但它不工作..请帮助。当我单击图像时，它没有响应。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        ImageView ad = (ImageView) findViewById(R.id.imageView1);
        ad.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            startActivity(new Intent(MainActivity.this, ads.class));
            }
        });

        return true;

    }

} 
```

这是我的代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:36:47.407

我认为你应该如下声明你`ImageView`的`onCreate()`：

> ```
>  public class MainActivity extends Activity {
>     @Override
>    protected void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>         setContentView(R.layout.activity_main);
>         ImageView ad = (ImageView) findViewById(R.id.imageView1);
>       ad.setOnClickListener(new View.OnClickListener() {
> 
>         @Override
>         public void onClick(View v) {
>             // TODO Auto-generated method stub
>         startActivity(new Intent(MainActivity.this, ads.class));
>         }
>     });
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:26:49.850

你有两个问题

第一的：

`startActivity(new Intent(MainActivity.this, ads.class));`

第二个参数应该是**一个活动**

第二：

在你的情况下，`ImageView`和监听器应该在你的`onCreate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-08T01:07:26.533

当我遇到类似的问题时，我通过添加`android:layout_width="44dp"`来修复它，以确保**用户有足够的区域来点击**. 然后，您可以按照您想要的方式对齐图像内容。就我而言：

```
 <ImageView
    android:id="@+id/locationImageView"
    android:layout_width="44dp"
    android:layout_height="16dp"
    android:layout_centerVertical="true"
    android:layout_marginStart="4dp"
    android:layout_toEndOf="@id/locationText"
    android:adjustViewBounds="true"
    android:scaleType="fitStart"
    android:src="@drawable/icn_edit_small_white"/> 
```

# knockout.js - 如果不需要保存，请禁用按钮

> ID：15183412
> 
> 赞同：0
> 
> 时间：2013-03-03T07:23:12.470
> 
> 标签：knockout.js, knockout-2.0

在以前版本的 Knockout 中，如果不需要像这样保存任何内容，则可以停用按钮：

```
<button type="submit" data-bind="enable: CanSave">Save</button> 
```

对于 2.2.0 版本，这会导致此“CanSave”出现未定义的错误。

有替代品吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:50:09.237

确定是否需要保存的方法之一是使用脏标志。它跟踪视图模型的变化。

此类功能不是淘汰赛的一部分，但可以轻松添加。在此处查看脏标志的实现：[http ://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:28:47.117

您需要自己实现 canSave 功能，例如使用 KO 的验证库。

我对 KO 的配置库做了一些约定，使用我的 lib，语法看起来像

```
<button data-name="save">Save</button> 
```

[http://jsfiddle.net/3Ajnj/](http://jsfiddle.net/3Ajnj/)

没有我的库

```
<button data-bind="click: save, enable: canSave">Save</button> 
```

[https://github.com/AndersMalmgren/Knockout.BindingConventions](https://github.com/AndersMalmgren/Knockout.BindingConventions)

# excel - VBA：将单元格内容保存到 Mac 上特定位置的文本文件

> ID：15183416
> 
> 赞同：1
> 
> 时间：2013-03-03T07:23:59.477
> 
> 标签：excel, vba, macos, text-files

我真的是 VBA 的新手，我正在尝试编写一个宏，它将某些特定单元格的内容保存到我 Mac 上的特定位置。整个代码工作正常，除了它不会保存到正确的位置；所有文件保存到桌面。

基本上，A1 开始包含类似“260 - CategoryA - 555.555.555.555 - 2012-11-06 17:43:49”的内容，我希望宏将 A 列第 2-61 行的内容保存到文本以单元格 A1 中的前 3 个数字命名的文件。我希望它保存到的位置取决于单元格 A1 最初是否包含文本“CategoryA”或“CategoryB”。同样，它将数据导出到文本文件就好了，但只会保存到桌面。

任何帮助都会很棒！

```
Public Sub Columns_2_TextFile()

    Const My_Path1 = "Users:Username:Desktop:Folder1"
    Const My_Path2 = "Users:Username:Desktop:Folder2"
    Dim iCol As Integer
    Dim lRow As Long
    Dim File_Num As Long
    Dim SaveDest As String

    On Error Resume Next
    If InStr(1, Cells(1, 1).Value, "CategoryA", vbTextCompare) > 0 Then
        If Trim(Dir(My_Path1, vbDirectory)) = "" Then
            MkDir My_Path1
        Else
            Kill My_Path1 & "*.txt"
        End If
    ElseIf InStr(1, Cells(1, 1).Value, "CategoryB", vbTextCompare) > 0 Then
        If Trim(Dir(My_Path2, vbDirectory)) = "" Then
            MkDir My_Path2
        Else
            Kill My_Path2 & "*.txt"
        End If
    End If
    On Error GoTo 0
    File_Num = FreeFile
    With ActiveSheet
        Cells(1, 1).Value = Left(Cells(1, 1), 3)
        Open Trim(.Cells(1, 1).Value) & ".txt" For Output As #File_Num
        For lRow = 2 To 61
            Print #File_Num, .Cells(lRow, 1).Value
        Next
        Close #File_Num
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:05:46.900

我认为您遇到了这个问题，因为您没有为`Open`输出文件指定文件夹。我已经修改了您的代码以定义输出文件名和输出文件夹名称。

注意：您可以使用`Application.PathSeperator`允许通用代码在 Mac 和 Windows 上运行。

```
 Public Sub Columns_2_TextFile()

    Const My_Path1 = "Users:Username:Desktop:Folder1"
    Const My_Path2 = "Users:Username:Desktop:Folder2"
    Dim iCol As Integer
    Dim lRow As Long
    Dim File_Num As Long
    Dim SaveDest As String
    'Define new variables here to hold output filename and output folder
    Dim sOutFolder As String, sOutFile As String

    On Error Resume Next
    If InStr(1, Cells(1, 1).Value, "CategoryA", vbTextCompare) > 0 Then
        'Define the output folder if CategoryA here------------------
        sOutFolder = My_Path1
    ElseIf InStr(1, Cells(1, 1).Value, "CategoryB", vbTextCompare) > 0 Then
        'Define the output folder if CategoryB here-------------------
        sOutFolder = My_Path2
    End If

    'You can also make the code a bit more efficient by taking this out of the other If statement
    If Trim(Dir(My_sOutFolder, vbDirectory)) = "" Then
        MkDir My_sOutFolder
    Else
        Kill My_sOutFolder & "*.txt"
    End If

    On Error GoTo 0
    File_Num = FreeFile
    With ActiveSheet
        'Specify the output filename without destroying the original value
        sOutFile = Left(Cells(1, 1).Value, 3)
        'Specify the correct output folder and the output file name
        Open sOutFolder & Application.PathSeparator & Trim(sOutFile) & ".txt" For Output As #File_Num
        For lRow = 2 To 61
            Print #File_Num, .Cells(lRow, 1).Value
        Next
        Close #File_Num
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:04:53.050

您可以将任何您想要的内容复制到新工作表并执行：

```
ThisWorkbook.Sheets("<new sheet name>").SaveAs Filename:=strfullpath, FileFormat:=xlText 
```

# php - 无法使用 php 将 textarea 保存到文件？

> ID：15183417
> 
> 赞同：-2
> 
> 时间：2013-03-03T07:24:12.303
> 
> 标签：php, html, textarea

我在将 textarea 保存到文件时遇到问题。我使用 POST 方法将表单发送到另一个页面，然后在下一页中我无法将 textarea 内容包含在文件中我不确定是什么问题。

有什么想法吗？

这是两个页面： page1：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Save</title>
</head>

<body>
    <form action="page2.php" method="post">
    <span>name:</span>
    <input type="text" name="name"><br>
    <span>file extension: </span>
    <select name="ext" id="ext">            
        <option value=".txt">.txt</option>
        <option value=".doc">.doc</option>          
    </select>
    <textarea name="txt1" id="txt1" cols="15" rows="10"></textarea>
    <br>
          <input type="submit" name="submit"  id="submit" value="Save">
          </form>
          <br>
</body>

  </html> 
```

-page2.php

```
$txt1 = $_POST['txt1']; //textarea
$name = $_POST['name'];
$ext = $_POST['ext'];  //choose from multiple extensions
if ($ext == '.txt')    // In case if I want to add more than extension.
{   
    $file = "'. $name$ext.'" ;
    $output = "$txt1";
    file_put_contents($file, $output);
    $text = file_get_contents($file);

    header("Content-Description: File Transfer");
    header("Content-Type: application/text/plain");
    header("Content-Disposition: attachment; filename=".basename($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T20:11:33.493

尝试在你的 textarea 中使用 wrap 元素

```
<textarea name="txt1" id="txt1" cols="15" rows="10"></textarea> 
```

添加包装

```
<textarea name="txt1" id="txt1" cols="15" rows="10" wrap="virtual"></textarea> 
```

你也可以使用 wrap: off, hard, soft and physical

在您的数据库中确保正确定义字段 txt1（即键入文本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:32:51.453

`$file = "'. $name$ext.'";`

应该：

`$file = $name.$ext;`

至少那是我必须改变的才能让它在我的服务器上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:35:32.780

如果没有看到您的 html，我无法确定问题所在。但根据我的经验，当您无法在服务器端访问 POST 变量时，这可能是一个简单的拼写错误。确保表单中的名称属性与您的 POST 变量对齐。只是我的两分钱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T07:35:51.020

我不知道你的代码是什么意思，所以，我只是重写它

要在服务器上保存文件，您需要这两行

```
$name = basename($_POST['name']).'.txt';
file_put_contents($name, $_POST['txt1']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T00:54:20.393

您需要向表单添加一个 id，然后将表单 Id 添加到 textarea 元素。例如：

```
<form action="page2.php" method="post" id="myform">
    <textarea name="txt1" id="txt1" cols="15" rows="10" form="myform"></textarea> 
```

# c# - 调试时使用 Visual Studio 命令运行实例方法

> ID：15183423
> 
> 赞同：7
> 
> 时间：2013-03-03T07:25:09.467
> 
> 标签：c#, visual-studio, debugging, visual-studio-2012

我想知道是否有一个技巧可以使用 Visual Studio 命令或其他东西运行方法。

例如，假设我创建了一个类型`Connection`in的新实例`void Main`并将其保存到类中的静态变量中`Program`。现在，假设我的程序在 VS2012 调试器下运行，并且我想在 Visual Studio 的类中保留`Connection.Blah(int, string)`的实例上任意执行该方法，而无需事先编写代码。`Connection``Program`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T07:33:40.343

是的。使用[立即窗口](http://msdn.microsoft.com/en-us/library/f177hahy.aspx)。打卡`FullyQualified.Name.To.Program.staticvar.Blah(0, "foo")`，按回车。

# iphone - html img 标签中的图像在我的 iPhone 应用程序上变得模糊

> ID：15183426
> 
> 赞同：2
> 
> 时间：2013-03-03T07:25:31.273
> 
> 标签：iphone, html, ios, image

我的 iOS 应用程序包含一些 .html 文件，项目本身中的 .jpg 文件。并通过 webView 显示它们。我的图像文件是高分辨率的，但是当它添加到带有标签的 html 文件并使用 iOS 模拟器放大检查它们时......图像变得模糊，以至于我无法阅读它们上的文本。

```
<!DOCTYPE html> 
<html> 
<head>
<title></title>
<meta name="viewport" charset="utf-8" content="initial-scale=1.0; maximum-scale=20.0; user-scalable=yes">
<link rel="stylesheet"  href="style.css" />
<link rel="stylesheet" type="text/css" href="m.ritz.css"/>
<link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
<script src="jquery-1.8.2.min.js"></script>
<script src="jquery.mobile-1.2.0.min.js"></script>
<script src="scrollview.js"></script>
</head> 

<body>          
 <img src="tong.png" width="500"/>
</body>                         
</html> 
```

我的代码没什么特别的……但是我找不到原因……帮帮我~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:00:54.430

您似乎正在为 HTML 中的图像设置特定的宽度（分辨率）。如果存储的图像具有比请求更大的分辨率，浏览器会将图像下采样到请求的分辨率。此过程可能会引入图像伪影、模糊等。

尝试创建一个与您希望显示的分辨率相同的图像文件。这应该消除浏览器代​​表图像的需要，从而为您提供清晰的图像。

# c - getpid 和 getppid 返回两个不同的值

> ID：15183427
> 
> 赞同：16
> 
> 时间：2013-03-03T07:25:34.250
> 
> 标签：c, fork, pid

当我运行下面的代码时

```
#include <stdio.h>
#include <sys/types.h>
//int i=0;
int main(){

int id ;
id = fork() ;
printf("id value : %d\n",id);
    if ( id == 0 )
    {
    printf ( "Child : Hello I am the child process\n");
    printf ( "Child : Child’s PID: %d\n", getpid());
    printf ( "Child : Parent’s PID: %d\n", getppid());
    }
    else
    {
    printf ( "Parent : Hello I am the parent process\n" ) ;
    printf ( "Parent : Parent’s PID: %d\n", getpid());
    printf ( "Parent : Child’s PID: %d\n", id);
    } 

} 
```

我的输出是

```
id value : 20173
Parent : Hello I am the parent process
Parent : Parent’s PID: 20172
Parent : Child’s PID: 20173
id value : 0
Child : Hello I am the child process
Child : Child’s PID: 20173
Child : Parent’s PID: 1 
```

父母的 PID(20172) 与孩子的父母 ID (1) 有何不同？这两个不应该相等吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-03T07:28:41.987

发生的事情是父母在孩子跑之前就终止了。这会使子进程成为孤儿，并被 PID 为 1 的根进程采用。如果您延迟或从标准输入读取数据，而不是让父进程终止，您将看到您期望的结果。

> 进程**ID 1 通常是**主要负责启动和关闭系统的 init 进程。init（initialization 的缩写）是一个守护进程，它是所有其他进程的直接或间接祖先。[init 的 wiki 链接](http://en.wikipedia.org/wiki/Init)

正如 user314104 指出的那样，wait() 和 waitpid() 函数旨在允许父进程暂停自身，直到子进程的状态发生变化。因此，在 if 语句的父分支中调用 wait() 会导致父级等待子级终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T07:13:52.880

因为父进程跑完释放了，它的子进程变成了孤儿，pid为1的init（initialization的缩写）收到了孤儿进程。

# c++ - C ++完全擦除（或重置）结构的所有值？

> ID：15183429
> 
> 赞同：25
> 
> 时间：2013-03-03T07:25:42.463
> 
> 标签：c++

所以，我只是想知道我们怎样才能完全擦除或重置一个结构，以便它可以被重用？

我刚刚输入了这个，你去：

```
typedef struct PART_STRUCT
{
    unsigned int Id;
    std::string Label;
} Part;

typedef struct OBJECT_STRUCT
{
    std::vector< unsigned char > DBA;
    std::vector< Part > Parts;
    unsigned int Id;
} Object;

Object Engine;

// Initialize all members of Engine
// Do whatever with Engine
// ...
// Erase/Reset Engine value 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-03T07:27:34.250

您可以为其分配一个构造的临时对象：

```
Part my_struct;

my_struct = Part(); // reset 
```

C++11：

```
my_struct = {}; // reset 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-03T07:39:50.340

如果出于某种原因，我一心想要始终保持同一个对象，我只会编写一个`reset`方法，将所有值重置回原来的值。

与此类似的东西：

```
struct Test {
    int a;
    int b;
    Test(): a(0), b(100) {}
    void reset() {
        a = 0;
        b = 100;
    }
};

int main() {
    Test test;
    //do stuff with test
    test.reset(); //reset test
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T07:40:01.147

好的做法是避免这种类型的构造（对两种不同的语义含义使用相同的变量，同时重置它）。当您（或其他人）修改您的代码并忘记您为两种不同用途共享一个变量时，它将不可避免地产生一个奇怪的错误。

唯一的理由是腾出一些内存空间，但是：

*   您实际上不太可能需要这样的优化。
*   即使你这样做了，编译器通常会发现堆栈上的一个变量不再使用并且可以被丢弃，你创建的新变量将因此有效地替换第一个变量。您不需要关心自己保留内存。
*   如果你的变量在堆上，你最好只使用两个不同的指针。

但是如果你真的想要做这个重置，你必须写一个方法来做。C++ 中没有内置方法，因为它实际上需要调用 the`destructor`然后再调用`constructor`。

该解决方案`my_struct = Part()`仅在您`destructor`微不足道的情况下才有效。假设您在 中分配了指针`std::vector`，您必须`delete`在清空`vector`. 这就是它不能自动完成的原因：结构的清理可能需要特殊处理而不是简单的遗忘。

# apache - 在共享主机子域上不指向我的网站在服务器上的文件夹

> ID：15183439
> 
> 赞同：0
> 
> 时间：2013-03-03T07:27:46.747
> 
> 标签：apache, dns, subdomain

我的网站托管在共享托管服务器上，其他网站也托管在该服务器上。现在我想子域将我的网站文件夹指向服务器。意味着如果我们访问 URL coolname.domain.com，那么它应该被重定向到 www.domain.com。但它被重定向到 Cpanel 错误页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:01:57.957

最好的方法是在您的 DNS 区域中为您的子域设置一个条目。

您还可以在`.htaccess`文件中使用 URL 重写：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sub.domain.com$
RewriteRule (.*) http://domain2.com/$1 
```

# ruby-on-rails - 使用 koala ruby gem 设置简单的 facebook oauth

> ID：15183441
> 
> 赞同：0
> 
> 时间：2013-03-03T07:27:54.083
> 
> 标签：ruby-on-rails, ruby, facebook-graph-api, oauth, koala

现在我正在使用我的应用程序中提取 facebook 个人资料照片

```
 graph = Koala::Facebook::API.new
    profile_path = graph.get_picture("username",:type=>"large")
    @user.update_attributes(:profile_pic => profile_path) 
```

并使用显示它

```
<%= image_tag  @user.profile_pic%> 
```

它显示得很好。

但我想做的是设置一个 OAuth，用户可以在其中登录，应用程序将检索登录用户的用户名以在上面进行解析。因为现在我是手动做的，正如你在上面看到的。

这可能是一个愚蠢的问题。但由于某种原因，我无法弄清楚从哪里开始实施 OAuth。那应该如何设置登录页面？回调应该如何？我很乐意在 Facebook 上注册一个应用程序。但不知道下一步该怎么做。

任何帮助表示赞赏。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:50:36.890

也许这里是你可以开始的地方

[http://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)

railscast 总是很好地寻找来源。

# java - 如何通过将猫头鹰的名称传递给Java程序来从猫头鹰那里获取个人信息

> ID：15183442
> 
> 赞同：1
> 
> 时间：2013-03-03T07:28:09.553
> 
> 标签：java, ontology, owl

我有一个 owl 文件，我需要编写一个 java 程序，在其中传递个人名称（例如 Lion）并从 owl 获取与此个人相关的所有对象/数据属性值（例如：`Golden`从`has_color`对象属性等） .

我基于最简单的 api 编写了一个 java 类`uk.ac.ebi.brain.core.Brain`，但是这个 API 没有列出个人信息的方法。那么还有其他简单的方法可以满足我的需求吗？

在下面的示例中，我正在检索主类的子类`Animal` ，但我不知道如何检索每个子类的个体，甚至不知道如何通过个体名称来获取该个体的对象/数据属性：

```
import edu.stanford.smi.protegex.owl.model.OWLIndividual;
import java.util.List;
import java.util.Set;
import org.semanticweb.owlapi.model.OWLAnonymousIndividual;
import org.semanticweb.owlapi.model.OWLObjectProperty;
import uk.ac.ebi.brain.core.Brain;
import uk.ac.ebi.brain.error.BrainException;

public class AnimalIndividuals {

    public static void main(String[] args) throws BrainException {
        Brain brain = new Brain();
        brain.learn("d:\\Animal.owl");
        List<String> subClasses = brain.getSubClasses("Animal", false);
        for (String subClass : subClasses) {
            System.out.println("Subclass of Animal: " + subClass);
        }
        brain.sleep();
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:46:29.350

目前（2013 年 3 月）无法使用 Brain 检索附加到对象属性的个体，因为它尚未由负责此操作的底层推理器[ELK实现。](https://code.google.com/p/elk-reasoner/)

但是，在我看来，你可以玩弄你的建模。你可以断言`Lion`为一个阶级而不是个人。您可以进一步将该概念定义`Lion`为`has_color some Golden`. 这在 OWL 中意味着所有的狮子都是金色的，但事物也可以是金色的，但不一定是狮子。

用大脑实现：

```
public static void main(String[] args) throws BrainException {
    Brain brain = new Brain();

    //Declaration of the concepts and properties
    brain.addClass("Animal");
    brain.addClass("Lion");
    brain.addClass("Golden");
    brain.addObjectProperty("has_color");

    //Axioms assertion
    brain.subClassOf("Lion", "Animal");
    brain.subClassOf("Lion", "has_color some Golden");

    //Query
    List<String> results = brain.getSubClasses("has_color some Golden", false);
    System.out.println(results);

    brain.sleep();
} 
```

# django-rest-framework - django-rest-framework 对象级条件验证

> ID：15183444
> 
> 赞同：4
> 
> 时间：2013-03-03T07:28:25.310
> 
> 标签：django-rest-framework

**如何使用 django-rest-framework 执行对象级条件验证。** 如果我们`validate(self, attrs)`在序列化程序中使用，所有调用都会进行验证。我应该知道并将其应用于某些 http 动词。例如：我只想为 PUT 执行对象级验证。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T12:23:41.860

您可以使用以下方法在序列化程序方法中获取请求：

```
request = self.context['request'] 
```

然后，您可以使用“request.method”进行任何条件验证

# twitter - 我怎样才能让某个用户推文上发生的所有操作（转发和收藏）以及这些操作是谁做的？

> ID：15183446
> 
> 赞同：0
> 
> 时间：2013-03-03T07:28:52.080
> 
> 标签：twitter

我正在为我的推特追随者创建一个竞赛，因此任何人转发我的任何推文都将获得 15 分，任何一个喜欢我的任何推文的人都将获得 10 分。

我如何使用 API 来获取特定用户推文上发生的所有操作（转发和收藏）以及这些操作是谁执行的？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:54:14.750

好的，所以您想使用对 twitter API 进行 oAuth 调用。您想从获取推文详细信息开始

[https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3Aid](https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3aid)

这将返回有关该推文的数据，其中包括转发或收藏之间的次数。然后，您使用以下 API 调用来获取有关转发和收藏的详细信息。

[https://dev.twitter.com/docs/api/1.1/get/statuses/retweets/%3Aid](https://dev.twitter.com/docs/api/1.1/get/statuses/retweets/%3aid)

[https://dev.twitter.com/docs/api/1.1/get/favorites/list](https://dev.twitter.com/docs/api/1.1/get/favorites/list)

# javascript - Ajax 文件上传表单在 firefox 中有效，但在 safari 中无效

> ID：15183457
> 
> 赞同：0
> 
> 时间：2013-03-03T07:30:27.383
> 
> 标签：javascript, jquery, ajax

我编写了以下代码来从网络浏览器上传文件。它适用于 Firefox 但不适用于 Safari，是否有任何明显的原因导致这种情况。

```
// when the file field is changed I get its data and the "salonId" variable
    $("#btnFrontUpload").change(function (e){
        frontPic = e.target.files[0]
        displayPicAsBackground(frontPic, "btnFrontUploadShow")
        frontPicName = frontPic.name
        salonId=$("#salonId").val();
    });

fd = new FormData()

$("#btnNextPhotos").click(function(){
    $('#mdlPhotos').modal('hide')
        resizeAndPopulateVariables()
        doAjaxRequest()
    });

});

function updateMilliTime(){
    milliTime = (new Date).getTime()
}

function displayPicAsBackground(file, btn){
// here I display the uploaded file (which is a picture) on the screen
//  it works on most browsers including mobile safari, but not the "desktop" safari
    $.canvasResize(file,
        {
            width: 160,
            height: 0,
            crop: false,
            quality: 100,
            callback: function (data)
            {
                $('#'+btn).css("background", "url("+data+")")
            }
        });
}

function resizeAndPopulateVariables(){
// I resize the image and create a file variable for upload
    $.canvasResize(frontPic,
           {
                width: 400,
                height: 0,
                crop: false,
                quality: 100,
                callback: function (data)
           {    // Add file data
                var frontPicForUpload = $.canvasResize('dataURLtoBlob', data)
                fd.append("frontPic", frontPicForUpload)
                fd.append("frontPicName", frontPicName)
                fd.append("salonId", salonId)
           }
           });
}

function doAjaxRequest(){
// send the ajax request
    $.ajax(
          {
                url: '/create/picture',
                type: 'POST',
                data: fd,  //fd is a global variable
                dataType: 'json',
                contentType: false,
                processData: false,
                beforeSend: function (xhr)
                {
                    xhr.setRequestHeader("pragma", "no-cache");
                }
          }
          ).done(function (response){
            window.location.reload()
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:57:16.343

您的代码中有许多语法错误。我不确定它是如何在 Firefox 中运行的。通过 Javascript 代码检查器（如[JSLint](http://www.jslint.com/) ）运行您的代码。显而易见的是，您的行尾没有分号 ( `;`)。添加它们。

最大的一个是这个部分：

```
$("#btnNextPhotos").click(function(){
    $('#mdlPhotos').modal('hide'); 
        resizeAndPopulateVariables();
        doAjaxRequest();
    }); // <--- what is this closing?
}); 
```

看起来您打算`.modal()`使用回调函数调用，因为您有一个结束`)}`after `doAjaxRequest()`。我不熟悉这个`.modal()`函数，但它要么需要一个回调，也许像这样：

```
$("#btnNextPhotos").click(function(){
    $('#mdlPhotos').modal('hide', function () { 
        resizeAndPopulateVariables();
        doAjaxRequest();
    }); 
}); 
```

或者您需要删除额外的关闭运算符：

```
$("#btnNextPhotos").click(function(){
    $('#mdlPhotos').modal('hide'); 
    resizeAndPopulateVariables();
    doAjaxRequest();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:44:48.580

我真的不知道你的问题可能是你的 Ajax cal，所以为什么不使用[插件 Ajax](http://www.malsup.com/jquery/form/)。我知道这听起来很压抑。

这是一个示例，非常简单：

```
<html> 
<head> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                alert("Thank you for your comment!"); 
            }); 
        }); 
    </script> 
</head> 
```

# c++ - 如何将Winform成员函数的引用传递给不同的线程不同的类？

> ID：15183458
> 
> 赞同：0
> 
> 时间：2013-03-03T07:30:27.753
> 
> 标签：c++, multithreading, winforms, delegates, c++-cli

我正在尝试从另一个线程上运行的另一个类更新 Winform 图片框。我[从另一个线程 _and_ 类](https://stackoverflow.com/questions/12131453/update-winform-controls-from-another-thread-and-class)中遵循 Update WinForm Controls 的答案，该类似乎具有所有信息，除了如何准确地将 Winform/Winform 成员函数的引用传递给构造函数中的线程/如何调用 Winform 成员函数从线程。

我的代码如下：

```
//Camera.h

public class CameraThread
{
    public:
       CameraThread(????)
       {
           // constructor
       }

       void DoSomething
       {
         // call UpdateBox on Form1
         ????
       }
};

//Form1.h
namespace SV7 {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    public ref class Form1 : public System::Windows::Forms::Form
    {
        private: CameraThread* CT;
        private: boost::thread* ImageACQ;

        public: delegate void UpdateDelegate(void);
        public:
            Form1(void)
            {
                CT = new CameraThread(????);
                boost::thread* ImageACQ = new boost::thread(&CameraThread::ImageAcquisition,CT);
                InitializeComponent();
                InitializeCanny();
            }

            void UpdateBox(void) 
            {
                if (this->RawImageBox->InvokeRequired) 
                {
                    UpdateDelegate^ d = gcnew UpdateDelegate(this,&Form1::UpdateBox);
                    this->RawImageBox->BeginInvoke(d);
                }
                else 
                {
                }
            }
    };
} 
```

我把??????，我不知道使用什么语法来传递/调用成员函数。我假设我的 Camera.h 中需要 Form1 的前向声明，但在引用 Form.h 中的实际表单类时遇到了麻烦。但是，如果使用直接函数指针，那么我认为这不是可行的方法。

作为背景，我使用的是 VS2010 SE C++。我试图有一个单独的线程从网络摄像头中获取图像，使用 OpenCV 处理它们，然后在 GUI 线程上的图片框中显示结果。

我只是不知道如何做到这一点，并希望得到任何指导。提前致谢/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:44:37.810

您需要在类中使用 Form1 实例，因此您的构造函数调用应如下所示：

```
CT = new CameraThread(this); 
```

我不太喜欢 C++/CLI，所以也许它的语法并不完美，但含义应该很清楚。您的类必须获取 Form1 的实例并保存它，直到需要调用 UpdateBox：

```
public class CameraThread
{
    private:
       Form1^ form;
    public:
       CameraThread(Form1^ form)
       {
           // constructor
           this->form = form;
       }

       void DoSomething
       {
         // call UpdateBox on Form1
         form->UpdateBox();
       }
}; 
```

请注意，您正在混合使用两个强大的库，即 .NET Framework 和 boost。如果您不需要它们*两个*，则应坚持使用*其中*之一。.NET Framework 也有线程。

# java - 创建 BufferedImage 时出错

> ID：15183460
> 
> 赞同：1
> 
> 时间：2013-03-03T07:30:54.343
> 
> 标签：java, ocr, bufferedimage

***代码 1***

```
/*
   Java code for making the image grayscale, then binarizing it.
 */
import javax.imageio.ImageIO;
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.lang.Object;
import java.lang.*;
import java.io.IOException;
import javax.imageio.ImageIO;
import java.lang.reflect.Field;
import java.lang.reflect.ParameterizedType;
import java.util.ArrayList;
import java.util.List;
public class lineremoval {

    private static BufferedImage binarizedImage;

    public static void main(String[] args) throws IOException {

        File orignal_name = new File("photot.png");
        binarizedImage = ImageIO.read(orignal_name);
        ExtractBeltsBasedonCoveredHeight();

        BufferedImage    bmp = new BufferedImage(binarizedImage.getWidth(), binarizedImage.getHeight(),binarizedImage.getType());
        for(int i=0; i<binarizedImage.getWidth(); i++) {
            for(int j=0; j<binarizedImage.getHeight(); j++) {
                int red;
                red = new Color(binarizedImage.getRGB(i,j)).getRed();
                int alpha = new Color(binarizedImage.getRGB(i,j)).getAlpha();
                int newPixel;
                newPixel = colorToRGB(alpha, red,red,red);
                bmp.setRGB(i, j, newPixel);

            }
        }
        writeImage(bmp,0);

    }
    public static int FindBottomOfLine(BufferedImage bitmap, int topOfLine)
    {
        int x=0;
        boolean no_black_pixel;
        no_black_pixel = false;
        int to_match;
        while (no_black_pixel == false)
        {
            topOfLine++;
            int white=new Color(bitmap.getRGB(0,0)).getRed();
            no_black_pixel = true; 
            for (x = 0; x < bitmap.getWidth() && topOfLine < bitmap.getHeight(); x++)
            {
                to_match = new Color(bitmap.getRGB(x,topOfLine)).getRed();
                if (to_match!=white)
                    no_black_pixel = false;
            }
        }
        return topOfLine - 1;
    }
    public static int  ExtractBeltsBasedonCoveredHeight()
    {
        int y = 0;
        int x = 0;
        boolean line_present = true;
        ArrayList<Integer> line_top = new ArrayList<Integer>(1000);
        ArrayList<Integer> line_bottom = new ArrayList<Integer>(1000);
        while (line_present)
        {
            x = 0;
            y = FindNextLine(binarizedImage, y, x);
            if (y == -1)
                break;
            if (y >= binarizedImage.getHeight())
            {
                line_present = false;
            }
            if (line_present)
            {
                line_top.add(y);
                y = FindBottomOfLine(binarizedImage, y) + 1;
                line_bottom.add(y);
            }
        }

        return 1;
    }
    private static void writeImage(BufferedImage bmp,int number) throws IOException {
        String strI = Integer.toString(number); 
        File file = new File("output"+strI+".png");
        try {
                    ImageIO.write(bmp, "png", file);
            }catch(IOException e) {
                    System.out.println("Not worked");
            }
            finally {
                    System.out.println("Works fine");
            }

    }
    private static int colorToRGB(int alpha, int red, int green, int blue) {

        int newPixel = 0;
        newPixel += alpha;
        newPixel = newPixel << 8;
        newPixel += red; newPixel = newPixel << 8;
        newPixel += green; newPixel = newPixel << 8;
        newPixel += blue;

        return newPixel;

    }
    public static int FindNextLine(BufferedImage bitmap, int y,int x)
    {
        if (y >= bitmap.getHeight())
            return -1;
        int white=new Color(bitmap.getRGB(0,0)).getRed();
        int to_match = new Color(bitmap.getRGB(x,y)).getRed();
        while (to_match==white)
        {

            x++;
            if (x == bitmap.getWidth())
            {
                x = 0;
                y++;
            }
            if (y >= bitmap.getHeight())
            {
                break;
            }
            to_match = new Color(bitmap.getRGB(x,y)).getRed();
        }
        return y < bitmap.getHeight() ? y : -1;
    }

} 
```

***代码 2***

```
 import javax.imageio.ImageIO;
    import java.awt.Color;
    import java.awt.image.BufferedImage;
    import java.io.File;
    import java.lang.Object;
    import java.lang.*;
    import java.io.IOException;
    import javax.imageio.ImageIO;
    import java.lang.reflect.Field;
    import java.lang.reflect.ParameterizedType;
    import java.util.ArrayList;
    import java.util.List;
    public class lineremoval {

        private static BufferedImage binarizedImage;

        public static void main(String[] args) throws IOException {

            File orignal_name = new File("photot.png");
            binarizedImage = ImageIO.read(orignal_name);
            ExtractBeltsBasedonCoveredHeight();
        }
        public static int FindBottomOfLine(BufferedImage bitmap, int topOfLine)
        {
            int x=0;
            boolean no_black_pixel;
            no_black_pixel = false;
            int to_match;
            while (no_black_pixel == false)
            {
                topOfLine++;
                int white=new Color(bitmap.getRGB(0,0)).getRed();
                no_black_pixel = true; 
                for (x = 0; x < bitmap.getWidth() && topOfLine < bitmap.getHeight(); x++)
                {
                    to_match = new Color(bitmap.getRGB(x,topOfLine)).getRed();
                    if (to_match!=white)
                        no_black_pixel = false;
                }
            }
            return topOfLine - 1;
        }
        public static int  ExtractBeltsBasedonCoveredHeight()
        {
            int y = 0;
            int x = 0;
            boolean line_present = true;
            ArrayList<Integer> line_top = new ArrayList<Integer>(1000);
            ArrayList<Integer> line_bottom = new ArrayList<Integer>(1000);
            while (line_present)
            {
                x = 0;
                y = FindNextLine(binarizedImage, y, x);
                if (y == -1)
                    break;
                if (y >= binarizedImage.getHeight())
                {
                    line_present = false;
                }
                if (line_present)
                {
                    line_top.add(y);
                    y = FindBottomOfLine(binarizedImage, y) + 1;
                    line_bottom.add(y);
                }
            }

            BufferedImage    bmp = new BufferedImage(binarizedImage.getWidth(), binarizedImage.getHeight(),binarizedImage.getType());
                            for(int i=0; i<binarizedImage.getWidth(); i++) {
                            for(int j=0; j<binarizedImage.getHeight(); j++) {
                    int red;
                    red = new Color(binarizedImage.getRGB(i,j)).getRed();
                    int alpha = new Color(binarizedImage.getRGB(i,j)).getAlpha();
                    int newPixel;
                    newPixel = colorToRGB(alpha, red,red,red);
                    bmp.setRGB(i, j, newPixel);

                    }
                    }
                    writeImage(bmp,0);

            return 1;
        }
        private static void writeImage(BufferedImage bmp,int number) throws IOException {
            String strI = Integer.toString(number); 
            File file = new File("output"+strI+".png");
            try {
                    ImageIO.write(bmp, "png", file);
            }catch(IOException e) {
                    System.out.println("Not worked");
            }
            finally {
                    System.out.println("Works fine");
            }

        }
        private static int colorToRGB(int alpha, int red, int green, int blue) {

            int newPixel = 0;
            newPixel += alpha;
            newPixel = newPixel << 8;
            newPixel += red; newPixel = newPixel << 8;
            newPixel += green; newPixel = newPixel << 8;
            newPixel += blue;

            return newPixel;

        }
        public static int FindNextLine(BufferedImage bitmap, int y,int x)
        {
            if (y >= bitmap.getHeight())
                return -1;
            int white=new Color(bitmap.getRGB(0,0)).getRed();
            int to_match = new Color(bitmap.getRGB(x,y)).getRed();
            while (to_match==white)
            {

                x++;
                if (x == bitmap.getWidth())
                {
                    x = 0;
                    y++;
                }
                if (y >= bitmap.getHeight())
                {
                    break;
                }
                to_match = new Color(bitmap.getRGB(x,y)).getRed();
            }
            return y < bitmap.getHeight() ? y : -1;
        }

    } 
```

我想从包含 x 行段落的位图图像中获取 x 图像。每个图像应包含段落中的一行。为此，我使用函数（“ExtractBeltsBasedonCoveredHeight”）来获取两个列表。在这些列表中，第 i 个元素表示段落中第 i 行的起始行号和结束行号（在列表 list_top 和 list_bottom 中）。

获得这些值后，我无法从函数 ExtractBeltsBasedonCoveredHeight 创建图像。

我的code1创建图像但code2给出错误两个代码都是相同的唯一区别是code2我从函数“ExtractBeltsBasedonCoveredHeight”调用了writeImage，在code1中我从主函数调用了writeImage

***错误信息***

```
lineremoval.java:86: error: unreported exception IOException; must be caught or declared to be thrown
                writeImage(bmp,0);
                          ^
1 error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:33:38.260

该消息（像往常一样）告诉您确切的问题以及如何解决它。您正在调用有可能调用 IOException 的代码，当您这样做时，您*必须*要么抛出异常，要么在 try/catch 块中捕获它。您最好的选择是查看异常教程以了解如何执行这两项操作。

# css - 无法在其他 div 中定位 div

> ID：15183461
> 
> 赞同：0
> 
> 时间：2013-03-03T07:31:17.587
> 
> 标签：css, html, styles, positioning

现在我有一个 id 为**"wrapper"**的主 div ，在这个 div 中，我试图制作另外两个 div，它们占据了**"wrapper"**的整个宽度。第一个 div **"sidebar"很窄，包含一些我想在****"wrapper"**最右侧显示的信息。我拥有的第二个内部 div 将使用 php 和 javascript 从用户插入的数据中动态更新，id 称为**“maincontent”**。

一开始我可以把它们放在“包装器”里面。当在“maincontent” div 中添加新内容时，问题就出现了。添加新内容时，“侧边栏” div 将与新添加内容的高度成比例地向下移动。

所以，我的问题是：

如何让两个内部 div 保持它们在页面顶部的位置，同时仍然能够动态向下扩展而没有任何移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:52:53.923

你需要`float:left`你的左内容：

见下面的CSS：

```
 .wrapper
  {
     margin:0;
     padding:0;
     top:10px;
     width:100%;
     height:500px;
     background-color:yellow;
  }
  .left-content
  {
     position:relative;
     width:20%;
     background-color:red;
     height:100%;
     float:left;
  }
  .main-content
  {
     position:relative;
     width:80%;
     left:20%;
     background-color:green;
     height:100%;

  } 
```

您的 div 如下所示：

```
<body>
<div class="wrapper">
  <div class="left-content">
  </div>
  <div class="main-content">
  </div>
</div>
</body> 
```

重要的是，您准确地将父容器的宽度划分为子容器

IE`total width of child containers <= parent width`

`position`看，当你为任何容器做的时候，你需要了解css-style 的属性`position:relative`，css 属性就像`top, left,right,bottom`开始为它们工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:58:23.717

看看我的小提琴，Javascript 是完全没有必要的。让我知道它是否对您有帮助，或者如果您还有任何问题。最重要的部分是主要内容和侧边栏 都有`float: left`或同时存在。[http://jsfiddle.net/y89zp/](http://jsfiddle.net/y89zp/)`float: right`

# sql - 如何从连接键不唯一的 2 个表的连接中生成总和报告

> ID：15183464
> 
> 赞同：0
> 
> 时间：2013-03-03T07:32:22.300
> 
> 标签：sql, join

我有 2 个表来收集关于点的事件记录。

```
CREATE TABLE report_one
(
  date timestamp,
  point_id bigint,
  income int
 )
CREATE TABLE report_two
(
  date timestamp,
  point_id bigint,
  spent int
 ) 
```

我想生成一个总和报告（和附加报告）。我想使用 join 因为我需要支持分页，排序......

问题是连接键（报告的点 id）不是 1:1 ，所以我得到的同一行不止一个。

```
insert into report_one values('2013-1-1',1,1)
insert into report_two values('2013-1-1',1,1)
insert into report_two values('2013-1-2',1,1)

select * from report_one r1 left join report_two r2 on r1.point_id  = r2.point_id 
```

将有 2 行表 report_one ，但总共我只需要一个。我希望能够在表之间创建某种连接的视图，其中每行只有一次。

**我想要这样的输出：

1 (pid) , 1,1,0,0 - 这个来自 report_one

1 (pid) ,0,0,1,1——来自report_two

1 (pid) ,0,0,1,1——来自report_two **

联合都可以很好，但我在两个表中没有相同的列类型。

附言。真正的表有很多列，pk不止一列，我只是为了这个问题而简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:13:12.023

为什么不尝试以下。

```
CREATE TABLE report
(
  report_id bigint,
  date varchar(20),
  point_id bigint,
  amount int,
  amount_type varchar(20)
 ); 
```

然后

```
 insert into report values (1,'2013-01-01',1,1,'income');
   insert into report values (2,'2013-01-01',1,1,'expense');
   insert into report values (2,'2013-01-02',1,1,'expense'); 
```

最后

```
SELECT report_id,amount_type,SUM(point_id) FROM report GROUP BY report_id,amount_type 
```

输出将汇总每个报告/金额类型的 point_id，然后更容易绘制每个日期范围的统计信息等，并且创建表和连接的开销也将最小化。

**输出：[SQL Fiddle 演示](http://sqlfiddle.com/#!2/0f4fb/4)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:20:37.887

我认为这对我有用：

```
select date d1,point_id p1,0 income ,spent spent from report_one
union ALL
select date d2,point_id p2,income,0 spent from report_two 
```

我不必有零。我为演示添加了它们，因为它们的列不是同一类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:58:49.860

您可以先按 point_id 对表进行分组，为所需字段选择更合适的聚合函数，然后相互连接：

```
select r1.point_id, r1.date, r1.income, r2.spent
from
(
   select point_id, max(date) date, sum(income) income
   from report_one
   group by point_id
) r1 
    inner join
    (
       select point_id, max(date) date, sum(spent) spent
       from report_two
       group by point_id
    ) r2 on r1.point_id = r2.point_id 
```

另外，联合方式：

```
select point_id, date, income sum, 1 is_income
   from report_one
union all
select point_id, date, spent sum, 0 is_income
       from report_two 
```

# sql - 是否可以使用行号和列号进行 SQL 更新？

> ID：15183465
> 
> 赞同：2
> 
> 时间：2013-03-03T07:32:27.350
> 
> 标签：sql, sqlite

我正在使用 jquery datables/jedtiable，它传回 ROW 和 COLUMN 编号以及要更新的新 VALUE，如下所示。这是 POST'ed 到另一个 JSP 页面，该页面具有到 sqlite DB 的 JDBC 连接。

注意：我不想指定列名，只是一个基于从我的其他页面发布的 int 的数字。希望这能让我的问题更清楚

行、值、列

> 2 没有 4

将“否”更新到第 2 行第 4 列的 SQL 是什么？

更新***** ** *** ** *** ****

这目前正在使用 rowid，但是我仍然希望能够按数字使用列。

```
 String value = request.getParameter("value");
     String row = request.getParameter("row_id");
     String column = request.getParameter("column");

UPDATE PROJECT SET DELIVERY_STREAM ='"+value+"' WHERE rowid = "+rowId+"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:20:30.690

所有 SQL 命令都需要列*名*，而不是数字。

此外，SQL 表没有行号有意义的固有顺序。记录只能通过一些唯一的字段值来标识。

所以，严格来说，你的问题的答案是“不”。

* * *

要按数字访问列，您需要知道哪个列有哪个数字，以便您可以将数字映射回相应的名称：

```
String[] columnNames = new String[] {
    "NAME", "DELIVERY_STREAM", "NUMBER_OF_FEET", "RETICULATED", ...
};
int columnNumber = ...;

String sql = "UPDATE Project SET " + columnNames[columnNumber] + " = ? WHERE ..."; 
```

从行号映射到实际记录需要您在某处存储一个包含这些记录的键值的数组，但在使用多个 JSP 页面时这是不可行的。而不是行号，只需使用原始表中的一些键值（主键，或 SQLite 的`rowid`）来识别记录；这就是钥匙的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:40:09.097

让我们假设您的表中有一些唯一的订单字段 (ord_field)。然后你可以做一些接近这个的事情：

```
UPDATE table SET value ='some value'
FROM (
SELECT *, (select COUNT(0) 
            from table t1 
            where t2.ord_field <= t1.ord_field 
            ) AS ord
FROM table t2
ORDER BY ord_field ASC) a WHERE table.ord_field = a.ord_field AND a.ord BETTWEN 2 and 4 
```

# c# - 当类型参数是 IEnumerable 时，如何将扩展方法附加到泛型类 ?

> ID：15183471
> 
> 赞同：6
> 
> 时间：2013-03-03T07:33:03.953
> 
> 标签：c#, .net, generics, compiler-errors, extension-methods

作为一个爱好项目（并且让自己更深入地沉浸在泛型/扩展方法中），我正在编写一个参数检查库！

我有一个名为 Argument 的模型，它描述了一个参数，如下所示：

```
public class Argument<T>
{
    internal Argument(string name, T value)
    {
        Name = name;
        Value = value;
    }

    public string Name { get; private set; }

    public T Value { get; private set; }
} 
```

当对参数进行验证时，会创建该对象的一个​​实例，并通过调用与其相关的扩展方法（包含实际逻辑）来执行单独的验证。

一种这样的扩展方法验证一个集合是否包含至少一个项目，目前看起来像这样：

```
public static Argument<IEnumerable<T>> HasItems<T>(this Argument<IEnumerable<T>> argument)
{
    if (!argument.Value.Any())
        throw Error.Generic(argument.Name, "Collection contains no items.");

    return argument;
} 
```

但它似乎不起作用。比如说，如果我要编写这个单元测试：

```
[TestMethod]
public void TestMethod1()
{
    var argument = new List<int>() { 1, 2, 6, 3, -1, 5, 0 };

    Validate.Argument("argument", argument)
        .IsNotNull()
        .HasItems()
        .All(v => v.IsGreaterThan(0));
} 
```

HasItems 没有出现在 Intellisense 中，*我*得到这个编译错误：

> `'Validation.Argument<System.Collections.Generic.List<int>>'`不包含“HasItems”的定义，并且找不到接受第一个类型参数的扩展方法“HasItems” `'Validation.Argument<System.Collections.Generic.List<int>>'`（您是否缺少 using 指令或程序集引用？）

如果我尝试将值直接传递给扩展方法，如下所示：

```
CollectionTypeExtensions.HasItems(Validate.Argument("argument", argument)); 
```

我明白了：

> 匹配的最佳重载方法`'Validation.CollectionTypeExtensions.HasItems<int>(Validation.Argument<System.Collections.Generic.IEnumerable<int>>)'`有一些无效参数

根据我的研究，我需要这样做的东西称为“方差”，适用于接口和委托，但不适用于类（即：所有类都是不变的。）

也就是说，它可能会以另一种方式工作。想到的一个是将其重写为直接进入 T，如下所示：

```
public static Argument<T> HasItems<T, TElement>(this Argument<T> argument)
        where T : IEnumerable<TElement>
{
    if (!argument.Value.Any())
        throw Error.Generic(argument.Name, "Collection contains no items.");

    return argument;
} 
```

..但这也不起作用，因为它需要在调用方法时显式指定 TElement 。我也可以回退到在类型约束中使用非通用 IEnumerable 接口，但是我必须找到一种方法将 IEnumerable 强制转换为 IEnumerable （这需要知道 T 在该上下文中是什么），或者复制Any() 的功能是为了测试是否存在任何项目，*还有*另一种扩展方法 (All) 会非常非常混乱，所以我宁愿避免它。

所以最终，我想我的问题是：如何让我的扩展方法正确附加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:20:49.133

这对你有用吗？看起来有点笨拙，但它确实有效。

```
public static Argument<T> HasItems<T>(this Argument<T> argument) where T: IEnumerable
{
    if (!argument.Value.Cast<object>().Any())
    {
        throw Error.Generic(argument.Name, "Collection contains no items.");
    }

    return argument;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:17:24.263

我相信你真正想要的是一个`IArgument`协变的接口`T`：

```
public static class Validate
{
    public static IArgument<T> Argument<T>(string name, T value)
    {
        return new Argument<T>(name, value);
    }
}

public interface IArgument<out T>
{
    string Name { get; }
    T Value { get; }
}

public class Argument<T> : IArgument<T>
{
    internal Argument(string name, T value)
    {
        Name = name;
        Value = value;
    }

    public string Name { get; private set; }

    public T Value { get; private set; }
}

public static class ExtensionMethods
{
    public static IArgument<T> IsNotNull<T>(this IArgument<T> argument)
    {
        return argument;
    }

    public static IArgument<IEnumerable<T>> HasItems<T>(this IArgument<IEnumerable<T>> argument)
    {
        return argument;
    }

    public static IArgument<IEnumerable<T>> All<T>(this IArgument<IEnumerable<T>> argument, Predicate<T> predicate)
    {
        return argument;
    }
}

[TestMethod]
public void TestMethod1()
{
    List<int> argument = new List<int>() { 1, 2, 6, 3, -1, 5, 0 };

    Validate.Argument("argument", argument)
        .IsNotNull()
        .HasItems()
        .All(v => v > 0);
} 
```

# java - 你如何创建一个 局部变量？

> ID：15183473
> 
> 赞同：0
> 
> 时间：2013-03-03T07:33:28.593
> 
> 标签：java

我试图弄清楚如何将 ArrayList 创建为局部变量。我想我已经弄清楚了，下面的代码是否正确？谢谢。

```
public void setExample(){
ArrayList<String> example = new ArrayList<String>();      //local variable? 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:41:26.243

您在方法中声明的每个变量都是局部变量，并且在使用它之前必须对其进行初始化。

# knockout.js - ko 没有用 requirejs 定义

> ID：15183474
> 
> 赞同：5
> 
> 时间：2013-03-03T07:33:29.653
> 
> 标签：knockout.js, requirejs

我正在尝试使用requirejs以下列方式加载knockoutjs：

```
<script type="text/javascript">
    require(['scripts/knockout-2.2.1.debug'], function() {
        var someModel = {
            firstname: ko.observable('asd')
        };
        ko.applyBindings(someModel);
    });
</script> 
```

使用顶部的脚本标记加载 require.js 的位置。当这段代码执行时，我得到一个 ko is not defined 错误。做类似的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T08:08:29.323

```
require(['scripts/knockout-2.2.1.debug'], function(ko) { 
```

我不确定，但看到 requirejs 上的示例，我猜这些是在该回调函数的范围内加载的。所以，除非你在你的函数中接受它，否则你不能使用它。

是的，你是对的（至少，看到他们的例子）。如果包含 4 个库，则需要接受 4 个参数。例如，如果你加载了jquery和knockout，你可以这样写：

```
require(['scripts/jquery.js', 'scripts/knockout-2.2.1.debug'], function($, ko) { 
```

# c# - 不安全的指针操作

> ID：15183480
> 
> 赞同：3
> 
> 时间：2013-03-03T07:34:35.720
> 
> 标签：c#, .net, pointers, unsafe, fixed-point

我正在尝试用 C# 编写一个 CPU 模拟器。机器的对象如下所示：

```
class Machine 
{
    short a,b,c,d; //these are registers.

    short[] ram=new short[0x10000];  //RAM organised as 65536 16-bit words

    public void tick() { ... } //one instruction is processed
} 
```

当我执行一条指令时，我有一个 switch 语句，它决定指令的结果将存储在什么中（寄存器或 RAM 字）

我希望能够做到这一点：

```
short* resultContainer;

if (destination == register)
{
    switch (resultSymbol) //this is really an opcode, made a char for clarity
    {
       case 'a': resultContainer=&a;
       case 'b': resultContainer=&b;
       //etc
    }
}
else
{
    //must be a place in RAM
    resultContainer = &RAM[location];
} 
```

然后，当我执行指令时，我可以简单地存储结果，如：

```
*resultContainer = result; 
```

我一直在试图弄清楚如何在不破坏 C# 的情况下做到这一点。

我如何使用以及可能还有其他我不知道的东西来完成`unsafe{}`这个`fixed(){ }`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:07:56.587

这就是我将如何实现它：

```
class Machine
{
    short a, b, c, d;
    short[] ram = new short[0x10000];

    enum AddressType
    {
        Register,
        DirectMemory,
    }

    // Gives the address for an operand or for the result.
    // `addressType`and `addrCode` are extracted from instruction opcode
    // `regPointers` and `ramPointer` are fixed pointers to registers and RAM.
    private unsafe short* GetAddress(AddressType addressType, short addrCode, short*[] regPointers, short* ramPointer)
    {
        switch (addressType)
        {
            case AddressType.Register:
                return regPointers[addrCode]; //just an example implementation
            case AddressType.DirectMemory:
                return ramPointer + addrCode; //just an example implementation
            default:
                return null;
        }
    }

    public unsafe void tick()
    {
        fixed (short* ap = &a, bp = &b, cp = &c, dp = &d, ramPointer = ram)
        {
            short*[] regPointers = new short*[] { ap, bp, cp, dp };

            short* pOperand1, pOperand2, pResult;
            AddressType operand1AddrType, operand2AddrType, resultAddrType;
            short operand1AddrCode, operand2AddrCode, resultAddrCode;

            // ... decipher the instruction and extract the address types and codes

            pOperand1 = GetAddress(operand1AddrType, operand1AddrCode, regPointers, ramPointer);
            pOperand2 = GetAddress(operand2AddrType, operand2AddrCode, regPointers, ramPointer);
            pResult = GetAddress(resultAddrType, resultAddrCode, regPointers, ramPointer);

            // execute the instruction, using `*pOperand1` and `*pOperand2`, storing the result in `*pResult`.

        }
    }
} 
```

要获取寄存器和 RAM 数组的地址，必须使用`fixed`语句。此外，您只能在`fixed`块中使用获取的指针。所以你必须传递指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:50:19.430

如果我们从另一个角度看问题呢？执行指令并将结果存储在变量 ( `result`) 中，然后决定将结果放在哪里。不工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:15:49.867

我为 DevKit 计划但尚未实现的一个不错的选择是生成您的仿真代码。这是一个久经考验、久经考验的解决方案。对于每个操作码/寄存器组合，或一些有效的子集，分别为 ADD A、B 和 SUB X、Y 生成代码。您可以使用位掩码来获取您正在寻找的特定情况并简单地执行正确的代码。编译器应该能够在后台使用跳转表，并且没有查找，没有条件，应该非常有效。

# java - 如何在java swing中的复制按钮中添加复制功能

> ID：15183481
> 
> 赞同：-1
> 
> 时间：2013-03-03T07:34:51.363
> 
> 标签：java, swing, copy

我正在使用 java swing 将代码从一个位置复制到另一个位置。我在这里做了`Browse`。但我不知道如何为复制按钮添加功能。请帮我写代码。提前致谢。这是我的完整代码。（对不起，如果我错了，我是第一次使用这个）

```
/*
 For Browse button. 
 */
package com.design;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class Browse extends JFrame implements 

ActionListener {

JButton button1, button2 ;
JTextField field1, field2;

public Browse () {
this.setLayout(null);

button1 = new JButton("Browse");
field1 = new JTextField();

field1.setBounds(30, 50, 200, 25);
button1.setBounds(240, 50, 100, 25);
this.add(field1);
this.add(button1);

button2 = new JButton("Copy");
button2.setBounds(150, 150, 100, 25);
this.add(button2);

button1.addActionListener(this);
setDefaultCloseOperation

(javax.swing.WindowConstants.EXIT_ON_CLOSE

);

}

public void actionPerformed(ActionEvent e) {
Chooser frame = new Chooser();
field1.setText(frame.fileName);

}

public static void main(String args[]) {

Browse frame = new Browse ();
frame.setSize(400, 300);
frame.setLocation(200, 100);
frame.setVisible(true);

}
}

class Chooser extends JFrame {

JFileChooser chooser;
String fileName;

public Chooser() {
chooser = new JFileChooser();
int r = chooser.showOpenDialog(new JFrame());
if (r == JFileChooser.APPROVE_OPTION) {
fileName = chooser.getSelectedFile().getPath();
System.out.println(fileName);
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:53:43.347

这是使用 Java 7 复制文件的片段

```
try {
    Files.copy(new File(your_source_file).toPath(), new File(your_target_file).toPath(), StandardCopyOption.REPLACE_EXISTING);
} catch (IOException e) {
    e.printStackTrace();
} 
```

但是，我不确定 java 6 和以前的版本是否也支持它，所以这是一个“diy”片段，应该适用于所有 Java 版本，`true`如果文件已被复制，它会返回，`false`如果抛出一些异常：

```
public boolean copyfile(String sourceFile, String targetFile) {
   try {
      File f1 = new File(sourceFile);
      File f2 = new File(targetFile);
      InputStream in = new FileInputStream(f1);

      //Write to the new file
      OutputStream out = new FileOutputStream(f2);

      byte[] buf = new byte[1024];
      int len;
      while ((len = in.read(buf)) > 0) {
         out.write(buf, 0, len);
      }
      in.close();
      out.close();
      System.out.println("File copied.");
   } catch (Exception ex) {
      ex.printStackTrace();
      return false;
   }
   return true;
} 
```

希望这可以帮助

# typescript - 如何在 TypeScript 中执行函数参数验证？

> ID：15183483
> 
> 赞同：0
> 
> 时间：2013-03-03T07:35:20.433
> 
> 标签：typescript

我有一个要用来管理复选框的 TypeScript 类。它看起来像这样：

```
export class TriStateCheckboxManager {

    constructor(public checkBox: HTMLInputElement) {
        if (checkBox.type != "checkbox") {
            // What now?
        }
    }
} 
```

如果*复选框*的类型不等于`checkbox`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T19:10:15.050

因为 TypeScript 是 JavaScript 的超集，它支持所有内置的 JavaScript 函数、类型、对象、关键字等。您正在寻找的是**`throw`**关键字，它将引发所需的异常。

到目前为止，您的代码很好，所以下面的代码可以完成这项工作。

```
export class TriStateCheckboxManager {

    constructor(public checkBox: HTMLInputElement) {
        if (checkBox.type !== "checkbox") {
            // checkBox doesn't meet the reqruirements,
            // so raise an error. Optionally, you could
            // log a message, warning or whatever you want
            // to the console.
            console.warn("checkBox.type doesn't match.", checkBox, this);
            throw "checkBox.type doesn't match."    // Throw anything you want here
        }
    }
} 
```

顺便说一句：强烈建议在 JavaScript（因此是 TypeScript）中使用`!==`and`===`进行比较，而不是`!=`and `==`。请参阅[此处](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)了解更多信息。

编辑：正如 MiMo 下面所说，你可以抛出任何你想要的类型，所以一个对象也是一个合适的候选人。

我发现如果您喜欢 JavaScript / TypeScript 错误处理，[这篇文章看起来很有希望。](http://www.nczonline.net/blog/2009/03/03/the-art-of-throwing-javascript-errors/)这是用于在 JavaScript 中引发错误的[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/throw)页面。

# sql - 如何使用 CASE-WHEN 将空值列设置为 0？

> ID：15183488
> 
> 赞同：2
> 
> 时间：2013-03-03T07:35:41.170
> 
> 标签：sql, sql-server, tsql, distinct

您好，我的一个字段为空，我正在尝试使用 distinct 过滤掉重复的冗余和记录。这是我的 SQL 语句，它根据绘制而不是计算检查值！

```
SELECT   CASE SUM(Money)
             WHEN null THEN sum(0)
             ELSE SUM(Money)
         END AS MoneyTaken
FROM     (SELECT   Money
          FROM     tblPayment AS tblPayment_1
          WHERE    (CheckStatus = 0) AND (IDBuyer = @BuyerID) AND (IDSource = @SourceID)
          GROUP BY ID, IDBuyer, IDSeller, Money) AS derivedtbl_1_1) AS [Cheques Which didnt have credit], tblPurchase.Price AS SellPrice 
```

但这不起作用，我在执行函数时仍然进入 Column `NULL`。`MoneyTaken`

这是我的 Full StoredProcedure 仍然显示重复的结果：

```
ALTER PROCEDURE [dbo].[SGetListofKharIDBuyer]
@SurceId bigint,
@BuyerId bigint
AS
    SET NOCOUNT ON;
    /*
    0 = check(cheque)  dosent have credit-so couldntget money out of it
    1 = check(cheque) has credit- got the money
   -1 = in cashe  - paid in cash
    */

SELECT     distinct   vPatmentForReport.Account, vPatmentForReport.PaymentStatus, vPatmentForReport.Description, vPatmentForReport.Bank, vPatmentForReport.Serial, 
                         vPatmentForReport.PaymentMethod, vPatmentForReport.Date, vPatmentForReport.مبلغ * Money AS [Payment in Cash], tblPurchase.Date AS [PurchaseDate], 
                         tblReserve.Fee , tblReserve.NumberOfReserve , tblReserve.TotalMoney ,
                             (SELECT         COALESCE( SUM(Money),0) AS [PaidMoney]
                                FROM            (SELECT        Money
                                                           FROM            tblPardakht
                                                           WHERE        (CheckStatus <> 0) AND (IDBuyer = @BuyerId) AND (IDSource = @SurceId)
                                                           GROUP BY ID, IDBuyer, IDAccount, Money) AS derivedtbl_1) AS [Sum of Cheques and in cash payments],
                             (SELECT       COALESCE( SUM(Money),0) AS [PaidMoney]
                                FROM            (SELECT        Money
                                                           FROM            tblPardakht AS tblPardakht_1
                                                           WHERE        (CheckStatus = 0) AND (IDBuyer = @BuyerId) AND (IDSource = @SurceId)
                                                           GROUP BY ID, IDBuyer, IDAccount, Money) AS derivedtbl_1_1) AS [sum of cheques which are not drawn], tblPurchase.Money , 
                         tblReserve.Description , tblReserve.Date
FROM            tblPurchase INNER JOIN
                         tblReserve ON tblPurchase.IDReserve = tblReserve.ID inner JOIN
                         vPatmentForReport ON tblReserve.IDSource = vPatmentForReport.[SourceId] AND tblReserve.IDBuyer = vPatmentForReport.[BuyerId]
WHERE        (vPatmentForReport.[BuyerId] = @BuyerId) AND (vPatmentForReport.[SourceId] = @SurceId) 
```

`vPatmentForReport`是由没有任何参数的函数创建的视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T07:38:00.540

利用`COALESCE`

```
SELECT COALESCE(SUM(Money),0), .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:24:54.180

试试下面的代码：

```
SELECT   SUM(Money) as  MoneyTaken
FROM     (SELECT   Money
          FROM     tblPayment AS tblPayment_1
          WHERE    (CheckStatus = 0) AND (IDBuyer = @BuyerID) AND (IDSource = @SourceID) and ISNULL(Money,0)<> 0
          GROUP BY ID, IDBuyer, IDSeller, Money) AS derivedtbl_1_1) AS [Cheques Which didnt have credit], tblPurchase.Price AS SellPrice 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T08:28:21.740

如果您的子选择不返回任何行，您将获得 NULL，请在子选择之外使用 ISNULL：例如

```
,ISNULL(
(SELECT SUM(Money) AS [PaidMoney]
FROM (SELECT  Money
FROM tblPardakht 
WHERE (CheckStatus <> 0) AND (IDBuyer = @BuyerId) AND (IDSource = @SurceId)
GROUP BY ID, IDBuyer, IDAccount, Money) AS derivedtbl_1) 
,0) AS [Sum of Cheques and in cash payments] 
```

# phantomjs - CasperJS 登录 Facebook

> ID：15183492
> 
> 赞同：0
> 
> 时间：2013-03-03T07:36:30.627
> 
> 标签：phantomjs, casperjs

尝试此答案后 [如何使用 CasperJS 登录网站？](https://stackoverflow.com/questions/13376189/login-with-casperjs)我没有工作显然填充功能是失败的现在facebook没有电子邮件，并作为login_form的直接子代传递这会影响代码吗？我认为它停在 this.test.assert ......我的代码

```
var casper = require('casper').create({   
    pageSettings: {
         loadImages:  false,         // The WebPage instance used by Casper will
         loadPlugins: false,         // use these settings
         userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'
    }
});
var url = 'https://www.facebook.com/';

casper.start(url, function() {
   console.log("page loaded");
   this.test.assertExists('form#login_form', 'form is found');
   this.fill('form#login_form', { 
        email: 'email', 
        pass:  'pass'
    }, true);
});

casper.then(function() {
    this.evaluateOrDie(function() {
        return /message sent/.test(document.body.innerText);
    }, 'sending message failed');
});

casper.run(function() {
    this.echo('message sent').exit();
}); 
```

如果没有答案，我只需要使用 PhantomJS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:46:25.990

版本问题，不清楚是什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T19:26:47.887

将文件中对 phantomjs 的调用`batchbin/casperjs.bat`从

```
call phantomjs "%CASPER_BIN%bootstrap.js" --casper-path="%CASPER_PATH%" --cli %ARGV% 
```

到

```
call phantomjs --ignore-ssl-errors=yes "%CASPER_BIN%bootstrap.js" --casper-path="%CASPER_PATH%" --cli %ARGV% 
```

这只是强制`ignore-ssl-errors`每次调用 phantomjs，这对我的用例来说很好。这不是一个修复，只是一个黑客。

[https://github.com/n1k0/casperjs/issues/49](https://github.com/n1k0/casperjs/issues/49)

# ruby-on-rails - Codemirror 制表符到空格

> ID：15183494
> 
> 赞同：7
> 
> 时间：2013-03-03T07:36:32.990
> 
> 标签：ruby-on-rails, codemirror

我在应用程序中使用 Codemirror。有没有人找到一种方法让它在使用制表符时使用空格？当我按回车键转到新行时，它使用空格。但是，如果我退格到行首，并改用制表符，它会将其作为制表符插入，而不是 2 或 4 个空格或我设置的任何内容。然后，当我查看渲染视图时，我的代码在我使用 tab 键的区域有 8 个空格用于缩进。是否有一些选项或方法可以将 Codemirror 中的实际制表符转换为空格？

我也在使用 codemirror-rails gem，它可能不像实际的 Codemirror 版本那样最新。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T19:39:37.790

我将覆盖默认的制表键功能并将其替换为此功能。将此添加到您的 Codemirror 配置中。

```
extraKeys: {
            "Tab": function(cm){
              cm.replaceSelection("   " , "end");
            }
           } 
```

[演示 jsfiddle](http://jsfiddle.net/aljordan82/hC7jP/)

# twitter-bootstrap - 如何使这个下拉搜索栏看起来更好？

> ID：15183497
> 
> 赞同：1
> 
> 时间：2013-03-03T07:36:58.480
> 
> 标签：twitter-bootstrap

做了一个下拉按钮，点击后会显示一个搜索栏，但看起来不是很好，我可以使用什么类来使其更适合？这是它目前的样子：

![我不好看的搜索栏](../Images/2235c8e0de91600a94de8633d4cd5ff4.png)

```
 <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Search<b class="caret"></b></a>
          <ul class="dropdown-menu">
          <form>
          <div class="input-prepend">
          <div class="btn-group"><
          <button class="btn" tabindex="-1">Search</button>
          <select class="btn dropdown-toggle" style="width: 140px;">
          <option>Suncor</option>
          <option>Syncrude</option>
          <option>Albian Sands</option>
          </select>
          </div>
          <input type="text">
          </div>
          </form>
          </ul>
          </li>
          </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:57:57.930

你可以使用这个 boostrap 插件来启动`select`bootstrap `dropdown`。 [https://github.com/silviomoreto/bootstrap-select](https://github.com/silviomoreto/bootstrap-select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:33:55.643

这里没有利用现有的引导类，而只是添加了一个小的自定义。这至少是您可以用来解决问题的一种途径。请注意`.dropForm`该类是如何添加到`<form>`.

[http://jsfiddle.net/fhVnJ/3/](http://jsfiddle.net/fhVnJ/3/)

**CSS**

```
.w140 {
    width: 135px;    
}

.dropForm {
    margin: 0;
    padding: 15px 12px 10px 12px;    
} 
```

**HTML**

```
<div class="navbar">
    <div class="navbar-inner">
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Search<b class="caret"></b></a>
              <ul class="dropdown-menu">
                  <form class="dropForm">
                      <div class="input-prepend">
                          <div class="btn-group">
                              <button class="btn" tabindex="-1">Search</button>
                              <select class="w140">
                                  <option>Suncor</option>
                                  <option>Syncrude</option>
                                  <option>Albian Sands</option>
                              </select>
                          </div>
                          <input type="text" />
                      </div>
                  </form>
              </ul>
          </li>
        </ul>
    </div>
</div> 
```

PS - 无论你做什么，你都需要清理你拥有的 html 标记`<div class="btn-group"><`：应该删除开放的尖括号。

# php - 从用户类上传 CodeIgniter

> ID：15183501
> 
> 赞同：-4
> 
> 时间：2013-03-03T07:37:36.400
> 
> 标签：php, codeigniter, file-upload

我的问题是我有一个带有 edit_profile() 函数的用户类，我希望用户能够在编辑他们的个人资料时上传他们的照片。提交表单后，它会使用该 edit_profile() 函数保留在编辑个人资料页面上并更新其信息，但我无法使用 do_upload() 函数，因为该函数必须位于 Upload 类中。我如何在 User Class/edit_profile() 函数中 do_upload() ？

希望这不会令人困惑。感谢所有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:03:36.567

没有看到任何代码就很难知道你的意思，但听起来你没有加载上传库。加载后您应该可以使用任何上传功能

```
$this->load->library('upload'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:27:32.043

我不明白你的意思，也许这个教程可以帮助你解决问题：

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/)

# windows-server-2003 - 使用 GPO /计算机配置通过 .vbs 合并注册表项

> ID：15183502
> 
> 赞同：0
> 
> 时间：2013-03-03T07:37:48.873
> 
> 标签：windows-server-2003, windows-xp-sp3, gpo

我们购买了 Team Viewer 公司，需要部署到我们的基础架构，包括 Windows XP SP3 和 Windows 7，我们的域控制器是 Windows 2003 SP2，Team Viewer 的设置导出到 .reg 文件，包括密码和白名单，我使用 Team Viewer 提供的 .vbs 来合并我们之前导出的注册表值。在与真实环境匹配的测试环境中，部署本身使用GPO完美运行，但脚本没有运行，如果我试图通过双击.vbs文件手动运行脚本，我会收到“打开文件安全警告”对话框，所以我在附件管理器中通过将 .vbs 添加到低风险列表中禁用了它，一切正常，但管理层拒绝了这个解决方案，因为它会将所有 .vbs 文件标记为安全，从而危及网络，并且因为它在 GPO 使用“用户配置”而不是“计算机配置”，为什么这很重要？因为用户在我们运营的整个地区都是移动的，当用户使用他们的凭据登录时，他们将触发脚本和部署，这将影响网络带宽。我的问题是，有什么方法可以使用 Active Directory GPO 中的“计算机配置”部署 Team Viewer 并通过 .vbs 合并注册表文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:44:24.863

这是一篇有趣的文章，它建议使用 .adm 文件（而不是 .vbs 脚本）使用组策略将注册表更改传播给您的用户：

*   [http://blogs.technet.com/b/askds/archive/2007/08/14/deploying-custom-registry-changes-through-group-policy.aspx](http://blogs.technet.com/b/askds/archive/2007/08/14/deploying-custom-registry-changes-through-group-policy.aspx)

# c++ - 重载 * 运算符以将 2 个多项式相乘

> ID：15183509
> 
> 赞同：0
> 
> 时间：2013-03-03T07:38:54.143
> 
> 标签：c++, polynomial-math

我正在尝试使用重载 * 运算符编写乘以 2 个多项式

这是重载 * func

```
Polynomial Polynomial::operator * (const Polynomial &right)
{
    Polynomial temp;
    temp.setPolynomial(right.maxExp + maxExp + 1);
    for (int i = 0; i < maxExp; i++)
    {
        for (int j = 0; j < right.maxExp; j++)
            temp.poly[1][i+j] += poly[0][i] * right.poly[0][j];
    }
    return temp;
} 
```

数组结果，其中第一行是系数，第二行存储指数。

```
The first (original) polynomial is: (degree = 4, F = x^2)
0 0 1 0 0
0 0 2 0 0
The second polynomial is: (degree = 4, F = x^2)
0 0 1 0 0
0 0 2 0 0
The result polynomial is: // the location of the result is right (x^4)
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 0 0 0 0 0 0 0 
```

多项式类

```
class Polynomial
{
private:
    int **poly;
    int maxExp;
    void createPolynomialArray(int);
public:
    Polynomial();
    Polynomial(int); // constructor
    Polynomial(const Polynomial &); // copy constructor
    ~Polynomial(); // destructor

    // setter
    void setCoefficient(int,int);
    void setPolynomial(int);

    // getters
    int getTerm() const; // get the maxExp (highest exponent)
    int getCoefficient(int,int) const; // get a specific exponential value

    // overloading operators
    void operator=(const Polynomial &); // assignment
    Polynomial operator+(const Polynomial &); // addition
    Polynomial operator-(const Polynomial &); // substraction
    Polynomial operator*(const Polynomial &);
} 
```

问题：我的代码产生该值有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:02:13.427

这样，您将使用多个系数更新结果指数；

```
 temp.poly[1][i+j] += poly[0][i] * right.poly[0][j]; 
```

我认为代码应该是

```
for (int j = 0; j < right.maxExp; j++)
{
    temp.poly[0][i+j] += poly[0][i] * right.poly[0][j];
    if (temp.poly[0][i+j] != 0)
        temp.poly[1][i+j] = i+j;
} 
```

我还认为在您的代码中存储指数是冗余信息，因为数组本身的位置反映了指数

# c# - 升序排序日期

> ID：15183512
> 
> 赞同：2
> 
> 时间：2013-03-03T07:39:03.620
> 
> 标签：c#, sql, linq, sorting

我想要排序日期，并使用此代码：

```
SELECT     TID, TName, TOrder
FROM         tblOrder
ORDER BY TOrder 
```

结果：

> 1 麦克尔空
> 
> 5 埃米尔空
> 
> 4 卡博尔 1
> 
> 3 萨明 2
> 
> 2 米哈德 3

但我想要这个结果：

> 4 卡博尔 1
> 
> 3 萨明 2
> 
> 2 米哈德 3
> 
> 1 麦克尔空
> 
> 5 埃米尔空

请帮助我进行升序排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T07:40:28.813

```
SELECT  TID, TName, TOrder
FROM    tblOrder
ORDER   BY  CASE WHEN TORDER IS NULL THEN 1 ELSE 0 END,
            TOrder 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e921c/2)

林克：

```
var x = from a in tblOrder
        orderby (a.TORDER == null ? 1 : 0), a.TORDER 
        select a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:40:30.143

尝试使用“ORDER BY TOrder ASC”。

[http://www.w3schools.com/sql/sql_orderby.asp](http://www.w3schools.com/sql/sql_orderby.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:40:45.103

您可以使用[`COALESCE`](http://sqlblog.com/blogs/denis_gobo/archive/2007/10/19/3048.aspx)：

```
SELECT     TID, TName, TOrder
FROM         tblOrder
ORDER BY COALESCE(TOrder,'9999-12-31 23:59:59.997') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T07:42:48.800

这是 SQL Server 最简单的方法：

```
SELECT TID, TName, TOrder
FROM   tblOrder
ORDER BY isnumeric(TOrder) DESC, TOrder 
```

对于 MySQL 和 PostgreSQL 等其他数据库，有更简单的解决方案：

```
SELECT TID, TName, TOrder
FROM   tblOrder
ORDER BY TOrder IS NULL, TOrder 
```

对于 Oracle 和 PostgreSQL，这是可行的，并将利用 TOrder 上可能的索引：

```
SELECT TID, TName, TOrder
FROM   tblOrder
ORDER BY TOrder ASC NULLS LAST 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T07:59:06.807

看看这个查询和[小提琴](http://www.sqlfiddle.com/#!3/bf98b/1)

```
SELECT TID, TName, TOrder INTO #TempTab
FROM         tblOrder
WHERE TOrder IS NOT NULL
ORDER BY TOrder
SELECT * FROM #TempTab 
UNION ALL
SELECT     TID, TName, TOrder
FROM         tblOrder
WHERE TOrder IS NULL; 
```

# python - Django：错误的组名

> ID：15183514
> 
> 赞同：0
> 
> 时间：2013-03-03T07:39:08.103
> 
> 标签：python, regex, django, django-views, django-errors

我在“错误的组名”上遇到错误。

这是代码：

```
for qitem in q['display']:
    if qitem['type'] == 1:
        for keyword in keywordTags.split('|'):
            p = re.compile('^' + keyword + '$')
            newstring=''
            for word in qitem['value'].split():
                if word[-1:] == ',':
                    word = word[0:len(word)-1]
                    newstring += (p.sub('<b>'+word+'</b>', word) + ', ')
                else:
                    newstring += (p.sub('<b>'+word+'</b>', word) + ' ')
            qitem['value']=newstring 
```

这是错误：

> /result/1/ 错误组名请求方法：GET Django 版本：1.4.1 异常类型：错误异常值：错误组名异常位置：C:\Python27\lib\re.py in _compile_repl，第 257 行 Python 可执行文件: C:\Python27\python.exe Python 版本: 2.7.3 Python 路径: ['D:\ExampPapers', 'C:\Windows\SYSTEM32\python27.zip', 'C:\Python27\DLLs', 'C :\Python27\lib', 'C:\Python27\lib\plat-win', 'C:\Python27\lib\lib-tk', 'C:\Python27', 'C:\Python27\lib\site- packages'] 服务器时间：Sun,3 Mar 2013 15:31:05 +0800
> 
> Traceback 切换到复制和粘贴视图
> 
> C:\Python27\lib\site-packages\django\core\handlers\base.py in get_response response = callback(request, *callback_args, **callback_kwargs) ... ▶ 本地变量？D:\ExampPapers\views.py in result newstring += (p.sub(' **'+word+'** ', word) + ' ') ... ▶ 本地变量

总之，错误在于：

```
newstring += (p.sub('<b>'+word+'</b>', word) + ' ') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:26:43.973

因此，您尝试以粗体突出显示一组关键字的出现。现在这段代码在很多方面都被破坏了。您现在正在使用该`re`模块来匹配关键字，但您也将关键字和字符串分解为单个单词，您不需要两者都做，这两种解决问题的不同方法之间的交互是是什么导致了你的问题。

您可以使用正则表达式同时匹配多个可能的字符串，这就是它们的优点！`"^keyword$"`因此，您可以使用`"^keyword|hello$"`匹配“keyword”*或*“hello”来代替仅匹配“keyword”。您还可以使用仅匹配整个字符串的开头或结尾的`^`and`$`字符，但您最初可能想要的是匹配单词的开头或结尾，为此您可以使用`\b`this `r"\b(keyword|hello)\b"`。请注意，在最后一个示例中，我`r`在字符串之前添加了一个字符，这代表“原始”并关闭了 python 通常处理与正则表达式冲突的反斜杠字符，最好*始终*使用`r`当字符串包含正则表达式时，在字符串之前。我还使用括号将单词组合在一起。

正则表达式`sub`方法允许您用另一个字符串替换正则表达式匹配的内容。它还允许您在包含匹配的原始字符串部分的替换字符串中进行“反向引用”。它包含的部分称为“组”，并在原始正则表达式中用括号表示，在上面的示例中，只有一组括号，它们是第一组，因此它们由反向引用表示`\1`。您询问的实际错误消息的原因是您的替换字符串包含看起来像 backref 的内容，但您的正则表达式中没有任何组。

使用它，您可以执行以下操作：

```
keywordMatcher = re.compile(r"\b(keyword|hello)\b")
value = keywordMatcher.sub(r"<b>\1</b>", value) 
```

另一件与您的要求没有直接关系但非常重要的事情是您正在获取源纯文本字符串（我假设）并将它们制作成 HTML，这为脚本注入漏洞提供了很多机会，如果您不要花时间去理解和避免会让坏人破解你构建的应用程序（他们可以以自动化的方式做到这一点，所以即使你认为你的应用程序太小以至于任何人都不会注意到它仍然可能被黑客入侵并用于各种不好的事情，不要让这种情况发生！）。基本规则是可以将文本转换为 HTML，但您需要先“转义”它，这很简单：

```
from django.utils import html
html_safe = html.escape(my_text) 
```

所有这一切都是将字符转换`<`为`&lt;`浏览器将显示`<`但不会解释为标记开头的字符。因此，如果一个坏人`<script>`输入了您的一个表单并由您的代码处理，它将显示为`<script>`而不是作为脚本执行。

同样，如果您在正则表达式中使用不打算包含特殊正则表达式字符的文本，那么您也必须对其进行转义！您可以使用以下方法执行此操作`re.escape`：

```
import re
my_regexp = re.compile(r"\b%s\b" % (re.escape(my_word),)) 
```

好的，所以现在我们已经解决了这个问题，这是一种您可以用来做您想做的事情的方法：

```
value = "this is my super duper testing thingy"
keywords = "super|my|test"

from django.utils import html
import re
# first we must split up the keywords
keywords = keywords.split("|")
# Next we must make each keyword safe for use in a regular expression,
# this is similar to the HTML escaping we discussed above but not to
# be confused with it.
keywords = [re.escape(k) for k in keywords]
# Now we reform the keywordTags string, but this time we know each keyword is regexp-safe
keywords = "|".join(keywords)
# Finally we create a regular expression that matches *any* of the keywords
keywordMatcher = re.compile(r'\b(%s)\b' % (keywords,))
# We are going to make the value into HTML (by adding <b> tags) so must first escape it
value = html.escape(value)
# We can then apply the regular expression to the value. We use a "back reference" `\0` to say
# that each keyword found should be replace with itself wrapped in a <b> tag
value = keywordMatcher.sub(r"<b>\1</b>", value)

print value 
```

我敦促您花时间了解它的作用，否则您只会把自己弄得一团糟！只是剪切和粘贴并继续前进总是更容易，但这会导致糟糕的损坏代码，更糟糕的是意味着你自己没有改进也没有学习。所有伟大的程序员都是从初学者开始的，他们花时间去理解事物:)

# for-loop - vb6当For Each循环我如何分配变量

> ID：15183515
> 
> 赞同：0
> 
> 时间：2013-03-03T07:39:41.007
> 
> 标签：for-loop, vb6, var

我遇到的问题是我在 VB 6 中为调制解调器名称和端口请求 WMI 查询

我有一个 FOR EACH 循环，每个循环有超过 1 个值（显示 2 个端口，所以每个循环有 2 个值）。如何分配变量以便将其分配给标签或文本框？

我想要一个如何通过循环分配变量以及如何调用变量的 VB 6 代码示例？

这是我的代码（当我使用 MsgBox 时，我可以看到它，它只是分别弹出两次，但我想要变量，所以我可以分配它们）

```
For Each objItem In colItems
    MsgBox ("Test -" & objItem.Name)
Next 
```

我试过这个，我得到一个数字，但我不知道如何引用它

```
For Each objItem In colItems
    Dim myCount
    myCount = myCount + 1

    Debug.Print objItem.Name & myCount  '** i just tested with Debug.Print
Next

Form1.TextBox1.Text = myCount(1)  '** THIS DOES NOT WORK
Form1.TextBox2.Text = myCount(2) 
```

如何分配`objItem.Name`（它带回 2 个不同的对象）？这就是我得到的：

```
1SAMSUNG Mobile Modem #2
2SAMSUNG Mobile Modem Diagnostic Serial Port (WDM) (COM1) 
```

（1 和 2 来自 myCount）

在不使用 myCount 的情况下，我只想为每个值分配自己的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:18:06.653

假设您有 100 个或更少的对象，每个对象有 2 个值，这是将一对值存储到二维数组中的一种方法：

```
Dim myVar(100,2) As String
Dim myCount as Integer
myCount = 0
For Each objItem In colItems
    If myCount Mod 2 = 0 Then     
        'read the first value
        myVar(myCount,1) = objItem.Name
    Else
        'read the second value then move to the next object
        myVar(myCount,2) = objItem.Name
        myCount = myCount + 1      
    End If
Next

'Now if you want to print the value of the fifth object:
MsgBox("(Object #5) has first value: " & myVar(5,1) )
MsgBox("And the second value is: " & myVar(5,2) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:15:09.520

实际上，您已经将数据保存在变量中。该变量名为 colItems。colItems 是 Collection 类型的变量。 [您可以在 MSDN 上阅读有关集合的更多信息。](http://msdn.microsoft.com/en-us/library/a1y8b3b3%28v=vs.80%29.aspx)

如果您知道您的收藏包含 2 个项目并且您的收藏是基于 1 的，您可以像这样使用您的收藏：

```
myTextbox1.Text = colItems(1).Name
myTextbox2.Text = colItems(2).Name 
```

或者，如果要将它们分配给变量：

```
Dim myString1 as String
Dim myString2 as String

myString1 = colItems(1).Name
myString2 = colItems(2).Name 
```

困难的部分是您很少知道您的收藏将包含多少项目。通常，您使用的 API 的开发人员会给您一个集合，因为无法知道该函数将返回多少元素。在这种情况下，集合非常适合。

当给定一个集合作为函数的返回值时，在几个文本框中显示它很少是处理数据的充分方法。某种列表框通常更合适。如果有充分的理由使用文本框，那么文本框控件数组是一种可能的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T06:40:36.140

根据您的描述，我假设 .Name 属性包含您要分别存储的多个字段？

我不知道 .Name 中的字段是如何分隔的，所以在下面的示例中，我只是将它们视为空格分隔：

```
Option Explicit

Private Type ModemData
  strField() As String
End Type

Private mudtModems() As ModemData

Private Sub ReadModems()
  Dim intCount As Integer
  Dim strName As String
  ReDim mudtModems(31) As ModemData
  intCount = 0
  For Each objItem In colItems
    strName = objItem.Name
    mudtModems(intCount).strField = Split(strName, " ")
    intCount = intCount + 1
  Next
  ReDim Preserve mudtModems(intCount - 1) As ModemData
End Sub 
```

最初它创建一个数组来容纳 32 个调制解调器，最后将数组重新调整为实际大小

每个 udtModem 中的 strField 数组将具有不同的长度，具体取决于 .Name 中的字段数

您可能需要另一个例程来正确拆分 .Name 的字段，使用该例程而不是`Split(strName, " ")`

# android - 在 videovew 中拍摄视频快照的任何解决方案？

> ID：15183520
> 
> 赞同：0
> 
> 时间：2013-03-03T07:40:26.853
> 
> 标签：android, android-layout, android-intent, android-widget

嗨，谁能告诉我如何拍摄在 videoview 中播放的视频的快照。快照给出了空白图像，或任何方法来获取当前视频帧，我想选择当前帧，任何人都可以帮助请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:50:50.583

最有效的解决方案是[MediaMetadataRetriever](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)。首先打电话

> setDataSource（文件描述符 fd）

是的，这是一个相当棘手的方法。有时它需要复杂的解决方案。这是一个例子：

```
public void setVideo(Uri videoPath) {
    videoUri = videoPath;
    File file = new File(videoPath.getPath());
    ParcelFileDescriptor pfd;

    FileDescriptor fd = new FileDescriptor();
    try {
        pfd = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_WRITE);
        fd = pfd.getFileDescriptor();
        metadataRetriever.setDataSource(fd);           
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
} 
```

设置您要使用的视频。其次使用这种方法：

> getFrameAtTime(long timeUs)

提取帧。请记住，您应该使用**微秒**作为参数

# android - AVD 无法启动

> ID：15183523
> 
> 赞同：0
> 
> 时间：2013-03-03T07:40:33.997
> 
> 标签：android, android-emulator

当我运行项目时，.apk 文件被上传并成功安装在设备上，但 AVD 无法启动。请帮我解决这个问题。

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.bottleworks.dailymoney.core"> 
<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:33:06.193

您还需要在 manifest.xml 文件中添加应用程序标签。

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
         >
        <activity
            android:name=".SplahScreenActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >

 <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

 </activity>
        <activity
            android:name=".OtherActivity"
            android:screenOrientation="portrait" >
        </activity>
    </application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:49:48.993

确保位于此文件夹中的现有 AVD 列表

C:\Users\youruser\.android\avd

或以这种方式测试它：

1-右键单击您的应用程序

2-运行为=>运行配置

3-目标选项卡=>经理

如果您有任何错误，请发布您的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:37:17.357

如果它给出消息“无法上传文件**超时**”或类似的消息，则关闭模拟器并再次运行应用程序

否则在此处发布**logcat**以获得更好的解决方案

# objective-c - 为什么使用单例？

> ID：15183526
> 
> 赞同：0
> 
> 时间：2013-03-03T07:40:46.160
> 
> 标签：objective-c, cocoa, oop, class, singleton

好的，我知道这个问题可能看起来无关紧要或太基本，但是 - 因为我一直想知道我在做什么以及我为什么要这样做，如果它符合我的设计 - 请阐明一下。

所以，这就是我需要的：

*   假设我们有一堂课
*   我们想在几乎任何地方使用它的方法
*   我决定使用类方法和伪全局实例，而不是传递一个对象

所以，假设我们有一个名为“MyDocumentManager”的类。

* * *

**这是我通常做的：**

```
+ (MyDocumentManager*)documentManager
{
     MyDocumentManager* newDocumentManager = [[MyDocumentManager alloc] init];

     if (newDocumentManager)
     {
          // initialize that new document manager
     }
     return newDocumentManager;
} 
```

**然后像这样使用它：**

```
[[MyDocumentManager documentManager] someMethod]; 
```

* * *

但是，我经常看到人们提出类似的建议：

```
+ (MyDocumentManager*)sharedManager
{
    static dispatch_once_t pred;
    static MyDocumentManager *sharedManager;
    dispatch_once(&pred, ^{
        sharedManager = [[MyDocumentManager alloc] init];
    });
    return sharedManager;
} 
```

* * *

**所以，这是我的问题：**

*   是一样的吗？
*   如果不是，有什么区别？
*   它的方法的优点/缺点是什么？（在内存/速度/等方面）
*   我应该使用哪一个，为什么？
*   它们都适合我需要它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T07:45:32.767

> 是一样的吗？

不。

> 如果不是，有什么区别？

您所拥有的并没有实现单例，因为它在每个函数调用时都分配了一个新的类实例。它被称为**工厂方法。**单例的定义是某个类方法总是返回该类的同一个实例。

> 我应该使用哪一个，为什么？

您通常应该避免使用单例，因为它通常被认为是不好的做法，尽管在某些情况下使用它们很方便。例如，如果你有一个使用封装数据的类，但你只需要准类级别的方法，那么最好实现一个带有适当放置的实例变量的单例，而不是实现类方法和大量的全局/静态变量（这是因为在Objective-C，类不能有成员变量，只有对象）。

> 它们都适合我需要它们吗？

你决定那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:46:00.540

您粘贴在“我通常做什么”中的代码已损坏。它不返回单例。每次调用它时它都会返回一个全新的对象（如果这不是 ARC，那么它也会泄漏它）。

您按照人们的建议粘贴的代码是正确的代码。它不仅每次都返回一个共享对象而不会泄漏，而且它也是线程安全的（就对象的初始化而言；它没有说明对象的使用是否是线程安全的）。

# ios - iOS 将属性值传递给已初始化的视图

> ID：15183528
> 
> 赞同：0
> 
> 时间：2013-03-03T07:41:24.023
> 
> 标签：ios, uiview, properties

我有一个 UIView 子类。该视图具有浮动属性。我从另一个视图（它是 superView）初始化这个子类，如下所示：

```
 myView = [[CustomView alloc]initWithFrame:aFrame]; 
```

问题是，我对如何为 myView 的 float 属性赋值感到困惑。当我尝试在初始化之后（从超级视图的 initWithFrame ）分配一个值时，什么也没有发生。即使我尝试从另一个方法或从 viewController 分配它也不起作用。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:46:19.203

您的班级很可能正试图在设置之前调用的方法中使用它。制作自定义初始化程序，例如`-(id)initWithFrame:(CGRect)frame andFloat:(float)f`. 这将允许您在创建对象时设置浮点数，因此在实例化时它将具有该值。如果这不是问题，我们将需要查看更多代码！

# c - 了解 MSB LSB

> ID：15183530
> 
> 赞同：3
> 
> 时间：2013-03-03T07:41:46.910
> 
> 标签：c, raspberry-pi

我正在转换一个在特定微控制器上运行的程序，并将其调整为在树莓派上运行。我已经成功地从我一直在使用的传感器中提取值，但现在我遇到了一个问题，我认为这是由我无法理解的几行代码引起的。我已经阅读了它们是什么，但仍在摸不着头脑。我认为下面的代码应该修改存储在`X,Y,Z`变量中的数字，但是我认为这不会发生在我当前的程序中。此外，我必须更改`byte`为`INT`使程序编译没有错误。这是我转换的原始代码中未修改的代码。有人可以告诉我这是否还在修改数字吗？

```
void getGyroValues () {
  byte MSB, LSB;

  MSB = readI2C(0x29);
  LSB = readI2C(0x28);
  x = ((MSB << 8) | LSB);

  MSB = readI2C(0x2B);
  LSB = readI2C(0x2A);
  y = ((MSB << 8) | LSB);

  MSB = readI2C(0x2D);
  LSB = readI2C(0x2C);
  z = ((MSB << 8) | LSB);
} 
```

这是原始的 readI2C 函数：

```
int readI2C (byte regAddr) {
    Wire.beginTransmission(Addr);
    Wire.write(regAddr);                // Register address to read
    Wire.endTransmission();             // Terminate request
    Wire.requestFrom(Addr, 1);          // Read a byte
    while(!Wire.available()) { };       // Wait for receipt
    return(Wire.read());                // Get result
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T07:56:35.180

[I2C](http://en.wikipedia.org/wiki/I%C2%B2C)是一种用于与低速外设通信的 2 线协议。

您的传感器应通过 I2C 总线连接到您的 CPU。您正在从传感器读取 3 个值 - x、y 和 z。这些值可作为`6 x 8-bit`寄存器从传感器访问。

```
x - Addresses 0x28, 0x29
y - Addresses 0x2A, 0x2B
z - Addresses 0x2C, 0x2D 
```

`ReadI2C()`正如函数名所暗示的那样，从传感器的给定地址读取一个字节的数据并返回正在读取的数据。中的代码`ReadI2C()`取决于您设备的 I2C 控制器的设置方式。

一个字节是 8 位数据。MSB ( `Most-Significant-Byte`) 和 LSB( `Least-Significant-Byte`) 表示每个读取的 8 位`I2C`。看起来您对 16 位数据（x、y 和 z）感兴趣。要从 2 条 8 位数据构造 16 位数据，请将`MSB`8 位向左移动，然后与`LSB`.

例如：

> 让我们假设： MSB = 0x45 LSB = 0x89
> 
> MSB << 8 = 0x4500
> 
> (MSB << 8) | LSB = 0x4589

看看我的内联评论：

```
void getGyroValues () {
  byte MSB, LSB;

  MSB = readI2C(0x29);
  LSB = readI2C(0x28);
  // Shift the value in MSB left by 8 bits and OR with the 8-bits of LSB
  // And store this result in x
  x = ((MSB << 8) | LSB);

  MSB = readI2C(0x2B);
  LSB = readI2C(0x2A);
  // Do the same as above, but store the value in y
  y = ((MSB << 8) | LSB);

  MSB = readI2C(0x2D);
  LSB = readI2C(0x2C);
  // Do the same as above, but store the value in z
  z = ((MSB << 8) | LSB);
} 
```

# asp.net - 如何移动动态创建的按钮？

> ID：15183534
> 
> 赞同：0
> 
> 时间：2013-03-03T07:42:14.660
> 
> 标签：asp.net

我有一个 Button1 和一个文本框。当我在文本框中输入一个值并单击此按钮时，会创建一个新按钮，其中填充了文本框中的值，但我希望再次单击 Button1 时应该还有一个按钮，或者我们可以说如何移动上一个按钮的位置？

这是 .aspx.cs 中 Button1 的代码

受保护的无效Button1_Click（对象发送者，EventArgs e）{

```
 Button btnNew = new Button();
        btnNew.ID = "btnNew";
        btnNew.Text = textBox1.Text;

        form1.Controls.Add(btnNew);
    } 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:51:44.983

你可以用 JavaScript/jQuery 做这样的事情：

```
$('#button1').click(function() {
    $('#button2').css('position', 'absolute');
    $('#button2').css('top', '50px');
}); 
```

等。您应该按照马特的建议提供更多信息。

# php - 有什么技术可以在 Wordpress 中使用 Yii？

> ID：15183535
> 
> 赞同：2
> 
> 时间：2013-03-03T07:42:36.943
> 
> 标签：php, mysql, wordpress, yii

我熟悉 WordPress 环境和 wp 开发。现在我想用 PHP 的 YII 框架扩展我的知识，我正在通过 YII 学习东西。

我想知道是否存在在 WordPress 中使用 YII 进行主题和插件开发的任何技术或技巧。

寻找你的答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T14:26:54.167

是的，这是非常可行的。在这里阅读我的文章：[http ://www.yiiframework.com/wiki/322/integrating-wordpress-and-yii-still-another-approach-using-yii-as-the-router-controller/](http://www.yiiframework.com/wiki/322/integrating-wordpress-and-yii-still-another-approach-using-yii-as-the-router-controller/)

注意：它不是那么简单，所以如果你是 Yii 的新手，它可能会很快变得复杂。但是请随时在论坛上提问，我们会看看我们是否可以让您继续前进。

我还将在某个时候在 Github 上建立一个基本的 Yii/Wordpress 设置。如果你订阅了那篇文章，当我订阅的时候你应该会收到通知。

**编辑**：这里的 GitHub 仓库：[https ://github.com/acorncom/yii-wordpress-integration](https://github.com/acorncom/yii-wordpress-integration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T07:59:18.780

不容易。WordPress 不是使用 Yii 框架编写的，Yii 将实现的大部分任务（数据库抽象、请求路由、缓存等）已经由 WordPress 以完全不兼容的方式处理。

正如其他人所指出的，*可以*将两者结合起来，但这是一个尴尬的配合。您可能需要首先考虑单独使用 Yii 或 WordPress 是否更有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:56:21.523

是的。您可以从 Yii 的[明确指南中阅读](http://www.yiiframework.com/doc/guide/)[在 3rd-Party Systems](http://www.yiiframework.com/doc/guide/1.1/en/extension.integration#using-yii-in-3rd-party-systems)部分 中使用 Yii 以获取更多信息：

> Yii 也可以作为一个自包含的库来支持开发和增强现有的 3rd-party 系统，例如**WordPress**、Joomla 等。为此，请在 3rd-party 系统的引导代码中包含以下代码：

```
require_once('path/to/yii.php');
Yii::createWebApplication('path/to/config.php'); 
```

> 上面的代码与典型的 Yii 应用程序使用的引导代码非常相似，除了一件事：它在创建 Web 应用程序实例后不调用 run() 方法。

# facebook-graph-api - 使用 FB - JS SDK 避免用户登录 Facebook 提要对话框

> ID：15183539
> 
> 赞同：1
> 
> 时间：2013-03-03T07:43:01.657
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, fb-graph

我有一个 Rails 3.2 应用程序，它使用`omniauth`gem 通过 Facebook 对用户进行身份验证。一旦用户通过身份验证，我会保存他的 FB`user_id`并`access_token`生成它。

我使用`fb_graph`gem 允许用户通过我们的应用程序直接发布到他们的朋友墙上。但是最近 FB 已经取消了使用他们的`Graph API`. 这破坏了我使用 fb_graph gem 发布到朋友墙上的功能。

他们的文档说我们可以通过`Feed Dialog`. 以下是我为提要对话框编写的代码：

```
<p><a onclick="launchFeedDialog(); return false">Testing the Feed Dialog</a></p>
<script>
function launchFeedDialog() {

// calling the API ...
var obj = {
  method: 'feed',
  to: 'RECIPIENT NAME', // Can specify recipient here
  link: 'http://example.com',
  name: 'Test post',
  description: 'Test description'
};

  FB.ui(obj);
}
</script> 
```

当我点击链接时，它会打开 FB 对话框，要求用户登录。我需要避免这种情况，因为我已经通过 FB 对用户进行了身份验证并拥有他的访问令牌。单击链接时，它应该要求用户输入消息，而不是要求用户凭据。

我怎样才能做到这一点？

谢谢。

# jquery - bootstrap-datepicker 没有在输入时选择更改事件

> ID：15183541
> 
> 赞同：6
> 
> 时间：2013-03-03T07:43:10.593
> 
> 标签：jquery, twitter-bootstrap, datepicker, jquery-events

我有一个要编辑日期的输入。当输入的值发生变化时，我想执行一个回调。

如果我调用函数 datepicker （来自 bootstrap-datepicker [https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)）我不能再挂钩到更改事件。（很奇怪，其他事件似乎还可以）

这是我到目前为止所尝试的：

（使用主干）

```
events: {
  'changeDate :input' : 'onUpdateField'
}, 
```

或者直接使用jquery

```
$('#Fundacion').on('change', this.onUpdateField); 
```

如果我只是评论以下行

```
$('#Fundacion').datepicker({
  autoclose : true,
[...] 
```

事件被调用。

另一方面，changeDate 事件被调用，但仅当使用鼠标或箭头更改日期时。我想在用户输入不同的日期时捕捉到事件。

我尝试查看源代码（[https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js](https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js)），但我找不到它可能在哪里“吞下”变化事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-11T10:21:16.063

这不是推荐的方法，而是一种肮脏的解决方法。只需在 500 毫秒后（或根据您的要求）继续检查日期字段。

```
var current = $('.transaction-date').val();
function keep_checking() {

    if (current != $('.transaction-date').val()) {
        alert('change happened');
        current = $('.transaction-date').val();
    }
    setTimeout(keep_checking, 500);
}
keep_checking(); 
```

**更新**

如果您使用以下库，那么它会在日期更改时触发事件“changeDate”。外观与 eternicode datepicker 非常相似

[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

示例用法：

```
jQuery('#dp1').datepicker().on('changeDate', function(ev){
     alert('date is changed');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-04T12:29:14.793

就我而言，只需执行两个简单的步骤：

1.  将更改事件侦听器添加到输入（当用户键入不同的日期时它将捕获事件）

    ```
    $('#dateInput').on(change, doSomethingOnChange); 
    ```

2.  添加 datepicker changeDate 事件（当使用鼠标或箭头更改日期时，它将从第一步触发更改事件）

    ```
    input.datepicker().on('changeDate', function(){
        $(this).trigger('change');
    }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:57:44.647

不确定它是否回答了问题，但问题似乎是已知的

显然，当离开输入焦点时，他们还无法找到判断值是否已更改的方法。

查看：

[https://github.com/eternicode/bootstrap-datepicker/pull/295](https://github.com/eternicode/bootstrap-datepicker/pull/295) [https://github.com/eternicode/bootstrap-datepicker/issues/241](https://github.com/eternicode/bootstrap-datepicker/issues/241)

# windows - 在 Windows C++ 控制台应用程序中使用 wchar_t/wmain 有意义吗？

> ID：15183542
> 
> 赞同：2
> 
> 时间：2013-03-03T07:43:11.903
> 
> 标签：windows, unicode, console, codepages, widechar

我一直在用 C++ 编写一个新的命令行应用程序。我们支持的一个平台当然是 Windows。

默认情况下，Windows 控制台根据区域设置使用 OEM 代码页（例如，在我的机器上它是 CP437 / DOS.Western）。我想，如果它是 Windows Cyrillic 版本，它会是 CP866，等等。这些 OEM 代码页仅包含 256 个字符）

我认为这意味着 Windows 控制台根据默认代码页将输入的击键转换为字符。（并且，根据当前选择的字体，如果有对应的字形，就会显示出来）。

1.  在这种情况下，在我的应用程序中使用 wmain/wchar_t 和宽字符类型是否有意义？
2.  使用宽类型有什么好处吗？或者如果只使用 char * 会有什么严重的问题吗？
3.  当使用宽字符类型时，命令行参数和环境字符串的编码是什么 - （wchar_t * argv[] 和 wchar_t * envp[]），我的意思是。它们是由 Windows CRT 转换为 UTF-16，还是原封不动？

感谢您的贡献。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:06:00.640

您似乎假设 Windows 内部在指定的代码页中工作。这不是真的。Windows 在内部以 Unicode (UTF-16) 工作。对于使用`char`而不是 的旧版软件`wchar_t`，输入和输出将转换为指定的代码页。

> 我认为这意味着 Windows 控制台根据默认代码页将输入的击键转换为字符

这是不正确的。击键到 (Unicode) 字符的映射由键盘布局定义。这完全独立于代码页。例如，您可以在使用西里尔代码页的系统上使用中文键盘布局。

1.  不仅使用起来完全有意义`wchar_t`，而且是**推荐**的方式。
2.  是的，有一个优势：您的程序可以处理 Windows 支持的所有字符。如果使用 char，则无法处理任何不在当前代码页中的字符。
3.  它们没有被转换——它们保持原样，即 UTF-16 字符。

不幸的是，命令提示符本身是一个“ANSI”应用程序，因此它受到“ANSI”的所有限制，如果您从命令提示符使用它，这会影响您的应用程序。但是，控制台应用程序可以在没有命令提示符窗口的情况下以其他方式使用，然后它可以完全支持 Unicode。

# spring - 比较 JAX-RS 和 Spring Rest 服务

> ID：15183544
> 
> 赞同：10
> 
> 时间：2013-03-03T07:43:21.803
> 
> 标签：spring, spring-security, jax-rs

我正在开发一个安全的 Web 应用程序，它可以进行金融交易并在其中使用 spring。*哪个更适合用于安全、JAX-RS 服务或 Spring Rest 服务？*我想使用 spring，因为我们已经在应用程序中使用它，如果它提供了功能，那么为什么要使用 JAX-RS，但正如我所说，它是一个高度安全的 Web 应用程序，人们可以在其中购买东西并进行金融交易，所以我得看哪个更适合使用。

关注了下面的博客还是有点迷茫……</p>

*   [http://sleeplessinslc.blogspot.in/2012/02/jersey-jax-rs-mvc-killed-spring-mvc.html](http://sleeplessinslc.blogspot.in/2012/02/jersey-jax-rs-mvc-killed-spring-mvc.html)
*   [http://blog.cyclopsgroup.org/2012/10/jaxrs-client-on-android.html](http://blog.cyclopsgroup.org/2012/10/jaxrs-client-on-android.html)
*   [http://www.infoq.com/articles/springmvc_jsx-rs](http://www.infoq.com/articles/springmvc_jsx-rs)

有人可以建议使用哪个更有用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T08:32:01.317

这不是一个非此即彼的选择。我在同一个安全应用程序中同时使用 Spring 和 JAX-RS（特别是 Apache CXF，它实现了 JAX-RS 规范）。

理解这一点的关键是要注意 Spring 不是一个同质的块。它实际上是很多部分。我使用的部分（大约）是 Spring IoC 核心、Spring AOP 和 Spring Security。IoC 核心就是*Spring*的部分；它管理 bean 的生命周期和配置。我使用 AOP 进行事务管理（因为这比在需要事务的每个方法中自己编写所有代码要容易得多）。对我的代码的 REST 调用的调度管理由 Apache CXF 处理（只要您使用正确的上下文加载器，它就很好地位于 Spring IoC 中），并且与 Spring Security 配合得很好。

* * *

作为旁注，您知道金融交易处理很棘手吗？不是因为代码更难，而是因为出错的后果更糟，而且有很多人愿意为了个人利益而试图让事情出错。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-22T13:03:12.770

我使用 Jersey Rest 和 spring rest 也使用了 Jersey Rest with spring，两者都是非常丰富的框架，具有很好的实现，如果您使用其他 Spring 服务，例如 ORM，Spring security，我建议最好使用 Spring rest一个 DI 等，两者都是 spring 库，所以我觉得管理代码和依赖关系的文章有点

# xml - 什么是属性节点

> ID：15183546
> 
> 赞同：4
> 
> 时间：2013-03-03T07:43:28.953
> 
> 标签：xml

XPath 数据模型中的属性节点是什么？特定节点何时会成为属性节点？

如果有人可以提供属性节点的示例，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T17:31:18.810

OP在评论中澄清说他的问题是：

*是否可以在没有任何父元素的情况下创建属性节点？*

**是的，在 XSLT 2.0 中可以这样写：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vAttr" as="attribute()">
  <xsl:attribute name="x">y</xsl:attribute>
 </xsl:variable>

 <xsl:template match="/*">
     <xsl:copy>
       <xsl:copy-of select="$vAttr"/>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t/> 
```

**产生了想要的正确结果**：

```
<t x="y"/> 
```

**因此，该属性被创建为没有任何父元素的独立项。然后，我们可以将它的一个实例复制到任何元素上**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T08:05:07.460

它是一个保存所有匹配属性的属性值的节点。例如，如果您有以下标签：

```
<tag name="foo">
    <child>Bar</child>
</tag> 
```

那么 XPath 查询`//@name`将返回“foo”作为结果。如果有*n 个*具有该属性的标签，它将获取所有*n 个*属性的值。

属性节点本身由两部分组成——名称和值。因此，在上面的示例中，它将是`name="foo"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T08:03:14.600

在下面的 XML 中`bar="baz"`是一个带有名称`bar`和值的属性`baz`：

```
<foo bar="baz"/> 
```

一个属性不会“变成”一个属性；它要么是一个属性，要么不是。

要访问 XPath 中的属性，您可以使用`@`（这只是`attribute::`轴的快捷方式）：

```
/foo/@bar 
```

另请参阅这些链接以获取有关 XML 基础知识的更多信息。

*   [http://www.w3.org/standards/xml/core](http://www.w3.org/standards/xml/core)
*   [http://www.w3.org/XML/Datamodel.html](http://www.w3.org/XML/Datamodel.html)

# c - 从外部程序计算使用 malloc() 分配的块

> ID：15183547
> 
> 赞同：5
> 
> 时间：2013-03-03T07:44:00.813
> 
> 标签：c, linux, malloc

我想写一个“简单”的内存泄漏检查器。

为了做到这一点，我需要计算`malloc()`程序中的 ed 内存块的数量，但我不想修改它的来源的问题。

换句话说，我想实现以下接口：

```
memory_check <executable name> 
```

我无权访问可执行文件的源代码。

首先，我应该尝试拦截系统调用。但我读到“[所以 malloc 不调用任何系统调用？](https://stackoverflow.com/questions/6326474/so-malloc-doesnt-invoke-any-syscall) ”这似乎不是一个想法，也因为它会极大地减慢所有系统（我可以假设）。

是否有任何其他选项可以拦截`malloc()`呼叫？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T07:51:14.390

如果你愿意改变你的界面，`LD_PRELOAD=mymalloc.so <executable>`你可以这样做：

*   创建一个共享库
    *   获取使用`malloc`句柄`dlsym`
    *   暴露外部`void *malloc(size_t size)`
    *   通过上面获得的句柄调用真实`malloc`的，并存储你的调试信息

然后：

*   调用程序`LD_PRELOAD=mymalloc.so ./program`
*   该程序会自动调用您的“劫持”版本`malloc`

* * *

### 编辑

如果您不想更改界面但想使用此技巧，您可以制作一个包装程序，使用其名称`fork(2)`设置`LD_PRELOAD`并执行您的真实程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:56:00.233

如果可执行文件是动态链接的，那么您可以编写自己的 malloc，并将其构建为 .so，在您自己的 malloc 中，您可以简单地增加一个计数器：

```
#ifdef malloc
#undef malloc
#endif

static int count;
void *malloc(size_t size)
{
    count++;
    return _malloc(size);
} 
```

然后使用 LD_PRELOAD 来预加载你自己的 malloc 。

# java - 访问 arraylist 的随机元素会产生相同的结果

> ID：15183550
> 
> 赞同：-2
> 
> 时间：2013-03-03T07:44:34.430
> 
> 标签：java, list

我有一个名为 Keypoints 的类，我想创建一个存储各种关键点对象的数组列表。这就是我贴花和初始化关键点列表的方式：

```
 private static List<Keypoint> m_keyPoints = new ArrayList<Keypoint>(); 
```

所以在我的代码中，我有一个 for 循环，它将关键点对象添加到列表中：

```
 for(xi=0;xi<width;xi++)
            {
                for(yi=0;yi<height;yi++)
                {
                    /*Calculation for scale,mag,orien*/

                        // Save this keypoint into the list
                        Keypoint kp =new Keypoint(xi*scale/2, yi*scale/2, mag, orien, i*m_numIntervals+j-1);
                        m_keyPoints.add(kp);
                }
            } 
```

但是现在每当我尝试从列表中访问一个随机元素时，我总是得到相同的结果。

```
 for(int ikp = 0;ikp<m_numKeypoints;ikp++)
    {
        Keypoint key =m_keyPoints.get(ikp);
        int scale = key.s();
        float kpxi = key.xi();
        float kpyi = key.yi();
    } 
```

对于列表中的每个元素，我得到的 scale、kpxi 和 kpyi 值相同，尽管我非常确定每个值都是不同的。相反，它返回 list 中的最后一个对象。所以我的问题是，在将对象添加到列表时我做错了还是我的关键点类有问题？还是完全是别的东西？

下面是关键点的类

```
import java.util.List;
public class Keypoint {
public float            xi;
public float            yi; 
public List<Double> orien ;
public List<Double> mag;
public  int scale;  

public Keypoint(){}

public Keypoint(float x, float y, List<Double> magnitude, List<Double> orientation, int s)
{
    xi = x;
    yi = y;
    mag = magnitude;
    orien = orientation;
    scale = s;
}
public static float xi()
{
    return xi;
}
public static float yi()
{
    return yi;
}
public static int s()
{
    return scale;
}
public  static List<Double> mag()
{
    return mag;
}
public  static List<Double> orien()
{
    return mag;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:52:06.760

您显示的代码无法编译。但是，错误提示您的*实际*代码中出了什么问题。

的所有吸气剂`Keypoint`是`static`：

```
public static float xi() { return xi; }
public static float yi() { ... }
public static int s()    { ... }
... 
```

这只有在相应的数据成员也是 的情况下才能编译`static`，这意味着它们由类的所有实例共享。

# php - 如何在 PHP 中添加 if-else 格式的链接

> ID：15183554
> 
> 赞同：0
> 
> 时间：2013-03-03T07:45:19.547
> 
> 标签：php

我正在尝试在会话中创建链接但未能执行：我的代码：

```
<?php
$link =<a href=login.php>LOGIN HERE</a>;
?> 
```

但它说在线错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:46:38.290

你忘记了引号：

```
<?php
$link = '<a href="login.php">LOGIN HERE</a>';
?> 
```

以上是有效的，但很可能不是你想要的。我不能说更多，因为我看不到这里涉及到任何条件（if/else）......

如果您想在浏览器中显示链接而不是将其保存在变量中，请`$link`使用它作为起点：

```
<?php
echo '<a href="login.php">LOGIN HERE</a>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:59:19.530

更好的是，使用这个：

`<?php`
`if (some_condition_is_true) { // Start the condition` `?>`
`<a href="login.php">LOGIN HERE</a>`
`<?php } // End the condition ?>`

这虽然含义相同，但事实证明它是浏览器和 php 引擎在`<?php?>`和`html`标签之间切换的一种更简单的方法

# c++ - 将布尔值转换为位序列

> ID：15183556
> 
> 赞同：1
> 
> 时间：2013-03-03T07:45:36.613
> 
> 标签：c++, boolean, byte, bit

寻找一些运营商（我猜是代替 + ？）

```
unsigned char bits = true + false + true + true + true;  // 1 byte is sufficient 
```

变为以下位模式：

```
00010111 
```

那么如何在 if 中检查该位模式

```
if (bits == 00010111) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T07:49:13.017

你要

```
bits = true << 5 | false << 4 | true << 3 | true << 2 | true << 1; 
```

或者

```
bits |= true;
bits <<= 1;
bits |= false;
bits <<= 1;
bits |= true;
bits <<= 1;
bits |= true;
bits <<= 1;
bits |= true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T07:53:04.370

您可以使用[`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)'s 字符串构造函数。

```
#include <bitset>
#include <string>
#include <iostream>

int main() {
    std::string bits;
    bits.push_back('1');
    bits.push_back('0');
    bits.push_back('1');
    bits.push_back('1');
    bits.push_back('1');
    std::bitset<8> bitset(bits);
    std::cout << bitset.to_string();

} 
```

不过，有更好的方法可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T07:48:52.950

为什么不使用[bitset](http://www.cplusplus.com/reference/bitset/)。有一种方法可以设置各种位并转换为无符号长整数。只需`&`对其进行操作即可获取字节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T07:56:36.770

运算符 + 需要将当前值左移一位，然后“按位或”传入的真或假并返回。

这是我想出的一个快速实现：

```
#include <iostream>
class Foo
{
    int result;

public:
    Foo() : result(0) {}
    Foo(bool value) : result(value ? 1 : 0) {}
    explicit Foo(int value) : result(value) {}
    Foo operator+(bool value) const
    {
        std::cout << "adding " << value << std::endl;
        return Foo((result << 1) | (value ? 1 : 0));
    }
    int get_result() const { return result; }
};

int main()
{
    Foo x;
    x = Foo(true) + false + true;
    std::cout << x.get_result() << std::endl;
} 
```

[在这里](http://ideone.com/KuvgVK)玩它

# variables - 如何保存主题标签值并在页面加载时恢复？

> ID：15183558
> 
> 赞同：0
> 
> 时间：2013-03-03T07:46:05.090
> 
> 标签：variables, cookies, twitter-bootstrap, hashtag

我试图弄清楚如何保存然后恢复 url 中的主题标签值。我这样做是为了使所选的选项卡在页面重新加载时保持不变。我正在使用引导 atm，选项卡的代码是

```
 <div class="tabbable">
    <ul class="nav nav-pills">  
    <li class="active"><a href="#na" data-toggle="tab">North America</a></li>
    <li><a href="#euw" data-toggle="tab">Europe West</a></li>
    <li><a href="#eune" data-toggle="tab">Europe Nordic & East</a></li>
    <li><a href="#br" data-toggle="tab">Brazil</a></li>
    <li><a href="#kr" data-toggle="tab">Korea</a></li>
    </ul>
...(other stuff here that doesn't really matter) 
```

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:59:10.207

使用 JavaScript cookie。

1.  为每个标签添加一个 onclick 事件。在这种情况下，使用 div 的名称保存一个 cookie。

2.  页面加载后，检查该 cookie 是否存在。如果是这样，则在具有该 ID 的 div 上模拟单击（例如，使用 jQuery 的 .click() 函数）。

# jquery - TypeError: $ is undefined & ReferenceError: Foundation is not defined

> ID：15183560
> 
> 赞同：0
> 
> 时间：2013-03-03T07:46:20.243
> 
> 标签：jquery, drupal-7, zurb-foundation

我正在尝试通过drupal 7中的theme.info将foundation.js和foundation-topbar.js版本4添加到page.tpl.php。我可以看到jquery和foundation js文件已正确添加-jquery在基础js文件之上-但我得到这个错误：

```
TypeError: $ is undefined
(Foundation.zj, this, this.document)); // foundation-topbar.js line 206 

 ReferenceError: Foundation is not defined 
 (Foundation.zj, this, this.document)); // foundation-topbar.js line 206 
```

[有基础-topbar.js](https://github.com/zurb/foundation/blob/master/js/foundation/foundation.topbar.js#L208)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:57:11.680

您需要按以下顺序添加到脚本的链接：

1.  Zepto 或 jQuery（但不能同时使用，Zepto 在 Foundation 4 中取代了 jQuery）
2.  基础.js
3.  基础-topbar.js

`$`是 jQuery 调用和函数的简写。So与Zepto 使用`$('')`的相同，并且与 jQuery 兼容，因此您可能会同时加载冲突，但如果没有看到源代码，则很难分辨。`jQuery('')``$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:54:26.897

它正在寻找的“基础”是类对象。您需要包含与您正在使用的 js 库位于同一目录中的foundation.js。

# java - 制作 GImage 时出现 NullPointerException

> ID：15183565
> 
> 赞同：1
> 
> 时间：2013-03-03T07:46:32.313
> 
> 标签：java, image, nullpointerexception, acm-java-libraries

所以这是我抛出 NullPointerException 的代码的一部分：

```
public class PuzzleGame extends GraphicsProgram implements KeyListener{
        private ArrayList <PuzzleImage> list = new ArrayList <PuzzleImage>();
        private PuzzleImage _11=null;

    public static void main(String[] args) {
            PuzzleGame game= new PuzzleGame();
            game.setup();  //NullPointerException here
            game.addKeyListener(game);
        }

     private void setup(){
            BufferedImage img11 = null;
            try {
                img11 = ImageIO.read(new File("C://part11.png"));
            } catch (IOException e) {
            }
            PuzzleImage _11=new PuzzleImage(img11,2,2,2,2);  //NullPointerException here
            list.add(_11);
    }
} 
```

这是 PuzzleImage 类

```
public class PuzzleImage extends GImage {
    public PuzzleImage(Image img, double x1, double y1, double realX, double realY) {
        super(img, x1, y1);  //NullPointerException here
        x=x1;
        y=y1;
    }
    private double x;
    private double y;
    private double realX;
    private double realY;
} 
```

所以我确保 C 上有名为 part11.png 的文件，所以我猜路径应该是正确的。现在我真的不知道这段代码有什么问题，但是我对 java 很陌生，所以很可能有一些我不知道或没见过的东西。也许你们中的一些人可以看看，看看你能找到什么吗？谢谢。

已解决：原来我要添加的 12 张图片中只有 .jpg，而不是 .png。时间不早了，不好意思打扰各位了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:50:40.203

很可能`img11`in `setup()`is `null`，因为您在其分配周围有一个 try catch 块。如果您的代码获得 IOException，您的代码不会中断，但也不会`img11`被分配任何值并继续保持为空。

尝试打印错误消息以验证您是否收到 IO 异常。

因此，将您的代码更改为这样的...

```
private void setup(){
            BufferedImage img11 = null;
            try {
                img11 = ImageIO.read(new File("C://part11.png"));
            } catch (IOException e) {
                e.printStackTrace() //ADD THIS LINE
            }
            PuzzleImage _11=new PuzzleImage(img11,2,2,2,2);  //NullPointerException here
            list.add(_11);
    } 
```

如果您看到正在打印的错误消息，您将知道问题很可能与`img11`.

另外，我猜您正在使用以下 JDK API [http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read( java.io.File)](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read(java.io.File))，它明确指出如果输入为空就会抛出错误...

> **读**
> 
> 公共静态 BufferedImage 读取（文件输入）抛出 IOException
> 
> **参数**： input - 要读取的文件。返回： 包含输入的解码内容的 BufferedImage，或 null。
> 
> **抛出**： IllegalArgumentException - 如果输入为空。IOException - 如果在读取过程中发生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:06:48.033

PuzzleImage _11=new PuzzleImage(img11,2,2,2,2);

试试这样：

_11=new PuzzleImage(img11,2,2,2,2);

一般情况下，[**NullPointerException**](http://way2java.com/exceptions/nullpointerexception/)仅在此类型引起。

# javascript - 在 Ticker 模式下单击时停止 Bxslider

> ID：15183570
> 
> 赞同：0
> 
> 时间：2013-03-03T07:47:24.617
> 
> 标签：javascript, jquery, bxslider

我在自动收报机模式下使用 bxslider 来显示我添加了灯箱的一行图像。一切正常，但是当我单击时，我想停止显示。

在非股票代码模式下这似乎很容易做到，但股票代码模式运行的[`tickerLoop()`](https://github.com/wandoledzep/bxslider-4/blob/master/jquery.bxslider.js#L889)功能不会停止。

有一个功能可以在悬停时停止显示，我想我可以修改它，但它似乎不起作用。

这是我的代码：

```
var slider = $('.portfolio-slider').bxSlider({
                          minSlides: 4,
                          maxSlides: 4,
                          slideWidth: 170,
                          slideMargin: 10,
                          ticker: true,
                          speed: 30000,
                          tickerHover:true,
                          useCSS:false
                         });
    $('.portfolio-slider').click(function (l){
             $('a[rel*=facebox-cap]').facebox();
                      slider.stopShow,
                      slider.startShow
             }

            }); 
```

编辑：

它几乎可以使用这个：

```
 var slider_config = {
                      minSlides: 4,
                          maxSlides: 4,
                          slideWidth: 170,
                          slideMargin: 10,
                          ticker: true,
                          speed: 30000,
                          tickerHover:true,
                          useCSS:false
                    }
var slider = $('.portfolio-slider').bxSlider(slider_config);

 $('ul.portfolio-slider  li').on({
  click: function(e){
   e.preventDefault();
                $('a[rel*=facebox-cap]').facebox();

    var slide_index = slider.getCurrentSlide();
    slider_config['speed'] = 0;
    slider_config['startSlide'] = slide_index;  
    slider.reloadSlider(slider_config);
  },
  mouseleave: function(e){
      e.preventDefault();
    var slide_index = slider.getCurrentSlide();
   slider_config['speed'] = 30000;
    slider_config['startSlide'] = slide_index;  
    slider.reloadSlider(slider_config);
  }
}); 
```

该代码至少可以让我修改重新加载滑块的设置。唯一的问题是它看起来很俗气，并且不能与灯箱配合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:10:16.870

从未使用过这个，但看看这个例子[http://bxslider.com/examples/auto-show-start-stop-controls](http://bxslider.com/examples/auto-show-start-stop-controls) 似乎你可以在你的点击事件上使用[stopAuto() 。](http://bxslider.com/options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:11:49.293

您的点击事件跟随链接，您应该防止这种情况发生，也许它会按您的意愿工作，我不明白您想要

```
 $('.portfolio-slider').click(function (event){
             event.preventDefault()

             $('a[rel*=facebox-cap]').facebox();
                      slider.stopShow,
                      slider.startShow
             } 
```

编辑：当您点击时，您可以在 url 上看到 rash 标签，它不应该发生

# jsplumb - 如何移动 Jsplumb 源及其目标

> ID：15183574
> 
> 赞同：0
> 
> 时间：2013-03-03T07:48:23.283
> 
> 标签：jsplumb

！[我想移动我的**jsplumb**源及其目标，因为我*动态绘制这些 jsplumb，当我移动每个源时，*它的目标也应该随之移动？[1](http://i.stack.imgur.com/bCmye.png)

如果有办法移动我的 Jsplumb 的每个源及其目标，请帮助我下载图像并提供帮助***** 当*我拖动任何 Jsplumb 源时，它应该与它的目标一起*移动**？***

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T11:11:09.203

我想你已经有代码来移动源代码。

所以以下可能会有所帮助:-)

`var sourcecon = jsPlumb.getConnections({source: e}) ; for(i=0; i<sourcecon.length; i++) { moveTarget(sourcecon[i].targetId) ; }` moveTarget 将是一个具有移动目标代码的函数。*

# ruby - 与虚假的“if”块中的赋值操作混淆

> ID：15183576
> 
> 赞同：3
> 
> 时间：2013-03-03T07:48:31.077
> 
> 标签：ruby, if-statement, nameerror

我正在玩`if`块内的赋值操作，发现了下面的结果，这让我很惊讶：

```
C:\>irb --simple-prompt
if false
x = 10
end
#=> nil
p x
nil
x.object_id
#=> 4
#=> nil
p y
NameError: undefined local variable or method `y' for main:Object
        from (irb):5
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

在上面的代码中，您可以看到`x`已经创建了局部变量，即使它只是在 falsy`if`块中分配。我试图查看它的内容，`x`它`p x`迫使我相信赋值没有完成，但`x`变量存在。`x.object_id`也证明是这样的。

现在我的问题是，`x`即使`if`故意永久关闭块入口点，该局部变量是如何创建的？

我希望 的输出`p x`与 的输出相似`p y`。但相反，我得到了一个令人惊讶的答案`p x`。

有人可以向我解释这个概念是如何工作的吗？

***编辑***

不，这是另一个测试。这不是只有`local`变量的情况。`instance`和`class`变量也发生了同样的情况。见下文：

```
class Foo
  def show
    @X = 10 if false
    p @X,"hi",@X.object_id
  end
end
#=> nil
Foo.new.show
nil
"hi"
4
#=> [nil, "hi", 4]

class Foo
  def self.show
    @@X = 10 if false
    p @@X,"hi",@@X.object_id
  end
end
#=> nil
Foo.show
nil
"hi"
4
#=> [nil, "hi", 4] 
```

成功案例：

```
class Foo
  def self.show
    @@X = 10 if true
    p @@X,"hi",@@X.object_id
  end
end
#=> nil
Foo.show
10
"hi"
4
#=> [10, "hi", 4] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T13:37:51.053

在 Ruby 中，局部变量由解析器在第一次遇到赋值时定义，然后从那时起就在作用域内。

这是一个小演示：

```
foo # NameError: undefined local variable or method `foo' for main:Object

if false
  foo = 42
end

foo # => nil 
```

如您所见，局部变量*确实*存在于第 7 行，即使第 4 行的赋值从未执行过。然而，它被*解析*了，这就是局部变量`foo`存在的原因。但是因为从未执行过赋值，所以变量未初始化，因此计算结果为`nil`and not `42`。

在 Ruby 中，大多数未初始化甚至不存在的变量的计算结果为`nil`. 这适用于局部变量、实例变量和全局变量：

```
defined? foo       #=> nil
local_variables    #=> []
if false
  foo = 42
end
defined? foo       #=> 'local-variable'
local_variables    #=> [:foo]
foo                #=> nil
foo.nil?           #=> true

defined? @bar      #=> nil
instance_variables #=> []
@bar               #=> nil
@bar.nil?          #=> true
# warning: instance variable @bar not initialized

defined? $baz      #=> nil
$baz               #=> nil
# warning: global variable `$baz' not initialized
$baz.nil?          #=> true
# warning: global variable `$baz' not initialized 
```

但是，对于类层次结构变量和常量，情况并非如此：

```
defined? @@wah     #=> nil
@@wah
# NameError: uninitialized class variable @@wah in Object

defined? QUUX      #=> nil
QUUX
# NameError: uninitialized constant Object::QUUX 
```

这是一条红鲱鱼：

```
defined? fnord     #=> nil
local_variables    #=> []
fnord
# NameError: undefined local variable or method `fnord' for main:Object 
```

在这里出现错误的原因*不是未*初始化的局部变量不计算为`nil`，而是`fnord`模棱两可：它可能是*发送*到默认接收器的无参数消息（即等效于`self.fnord()`）*或*访问局部变量`fnord`。

为了消除歧义，您需要添加一个接收者或一个参数列表（即使是空的）来告诉 Ruby 这是一个消息发送：

```
self.fnord
# NoMethodError: undefined method `fnord' for main:Object
fnord()
# NoMethodError: undefined method `fnord' for main:Object 
```

或者确保*解析器*（*而不是*评估器）在使用之前解析（*不*执行）赋值，告诉 Ruby 它是一个局部变量：

```
if false
  fnord = 42
end
fnord              #=> nil 
```

而且，当然，`nil`是一个对象（它是 class 的唯一实例`NilClass`），因此有一个`object_id`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T08:31:07.560

Ruby 总是解析你的所有代码。它不会将 false 视为不解析内部内容的标志，它会对其进行评估并看到不应执行内部代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T07:55:22.963

Ruby 有局部变量“提升”。如果您在方法中的任何地方都对局部变量进行了赋值，那么该变量在方法中的任何地方都存在，甚至在赋值之前，即使赋值从未实际执行。在分配变量之前，它的值为`nil`。

编辑：

上面说的不太对。Ruby 确实有一种变量提升的形式，它会在局部变量赋值存在但未执行时定义一个局部变量。但是，在上述方法中发生赋值的点处不会发现该变量。

# asp.net - 输入按钮在右上角显示一个数字

> ID：15183578
> 
> 赞同：0
> 
> 时间：2013-03-03T07:48:47.897
> 
> 标签：asp.net, html, css, css-position

任何帮助都会很棒

我正在从数据库 SQL 中提取数据

我想要做的是在输入按钮的右上角显示结果。

例如打击。

知道我该怎么做吗？

![在此处输入图像描述](../Images/b579d94767e7ee95db2cbcb90df277cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:15:27.997

这是小提琴，它可以帮助你

```
<div>
<div class="input-div">
    <input type="button" value="view"/>
    <span class="topText">value</span>
</div>
</div> 
```

[http://jsfiddle.net/EeSSX/1/](http://jsfiddle.net/EeSSX/1/)

# mysql - 每天在MySQL列中自减一个值

> ID：15183581
> 
> 赞同：0
> 
> 时间：2013-03-03T07:49:03.813
> 
> 标签：mysql, error-handling

我是 PHP 的新手，但我一直在尽我所能知道这里出了什么问题：

```
$sid = $db->EscapeString($_GET['data']);
    $site = $db->FetchArray($db->Query("SELECT id,cpc FROM `surf` WHERE `id`='".$sid."'"));
    $check = $db->GetNumRows($db->Query("SELECT * FROM `surfed` WHERE `user`='".$data['id']."' AND `site`='".$sid."'"));
    $pr = mysql_query("SELECT premium  FROM users");
        if($site['id'] != "" && $check == 0 && $pr['premium'] = "0"){
        $db->Query("UPDATE `users` SET `coins`=`coins`+'".$site['cpc']."' WHERE `id`='".$data['id']."'");
        $db->Query("UPDATE `surf` SET `visits`=`visits`+'1', `points`=`points`-'".$site['cpc']."' WHERE `id`='".$site['id']."'");
        $db->Query("INSERT INTO `surfed` (user, site) VALUES('".$data['id']."', '".$site['id']."')");
    }
        elseif($site['id'] != "" && $check == 0 && $pr['premium'] != "0"){
        $db->Query("UPDATE `users` SET `coins`=`coins`+ 20 WHERE `id`='".$data['id']."'");
        $db->Query("UPDATE `surf` SET `visits`=`visits`+'1', `points`=`points`-'".$site['cpc']."' WHERE `id`='".$site['id']."'");
        $db->Query("INSERT INTO `surfed` (user, site) VALUES('".$data['id']."', '".$site['id']."')");
    }
} 
```

所以，基本上我一直在尝试做的是在我的流量交换网站上用正常数量的硬币奖励没有 Premium 的用户和有 Premium 的用户每人 20 个硬币。我不知道为什么，但上面的代码奖励每个人 20 个硬币。

另一个问题是，上面的 Premium 表示一个人帐户中剩余的 Premium 天数，但这似乎并没有每天都在减少。有什么办法解决吗？

定义：

*   `surf`包含`id`、`user`、`title`等`cpc`。这是我的 Traffic Exchange 上的冲浪页面从中提取要显示的数据的表格。`id`是 siteID，`cpc`= 每次点击费用等。
*   `surfed`包含`siteid`并`userid`防止用户在 24 小时之前再次浏览同一站点。Cron 每天都会从这个表中删除数据。
*   `users`包含`id`、`username`、`coins`等`premium`。用户信息表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:20:16.973

我发现的第一个问题是您试图确定特定用户是否是“高级”用户。为此，您有以下代码：

```
$pr = mysql_query("SELECT premium FROM users"); 
```

但是，这将为所有用户获得“高级”列，这不是很有用。尝试将其更改为此：

```
$pr = mysql_query("SELECT premium FROM users WHERE id={$data['id']}"); 
```

这假设您的用户 ID 存在`$data['id']`（我认为您现有的代码就是这种情况）并且可以认为该数组条目已经转义。

其次，您试图将 的值`$pr`用作结果数组，而实际上这是一个结果句柄。要使用它，您需要执行以下操作：

```
$pr = mysql_query("SELECT premium FROM users WHERE id={$data['id']}");
$prData = mysql_fetch_assoc($pr);
$premium = $prData['premium']; 
```

第三，您似乎有一个名为 的数据库类`$db`，但您正在将`mysql_`函数混合到代码中。使用类上提供的方法*可能*会更好`$db`，但是由于我不知道您在这里使用的是什么类，因此很难提供建议。

* * *

另外：如果您提供尽可能多的信息，它将对您作为初学者有所帮助。您需要假设人们对您的用例一无所知 - 所以解释一切，尽可能多地包含信息，同时保持合理简洁。什么是“冲浪页面”？你的“流量交换”是什么？什么课`$db`？对于数据库问题，通常提供*完整*的表定义。

此外，如果您获得问题的答案，请尝试将其应用于您的案例，并根据需要要求澄清。大多数情况下，这里的人会愿意教你，但不愿意为你做你的工作。在任何情况下，将您的服务器凭据提供给 Internet 上的人都不是好的安全做法，除非您确信他们不会损坏您的文件或窃取您的用户数据库`:)`。对此要非常小心！

正如我在评论中指出的那样，这类问题已经成熟，可以调试了。您知道代码没有按照您的意愿执行，但您不确定它*在哪里*失败。因此，诀窍是缩小范围，直到找到具有意外或错误值的变量。

例如，请看这段代码（为了清楚起见，我将其包装起来 - 您可以在 PHP 中执行此操作）：

```
$sid = $db->EscapeString($_GET['data']);
$site = $db->FetchArray(
    $db->Query("SELECT id,cpc FROM `surf` WHERE `id`='".$sid."'")
); 
```

尝试添加调试语句：

```
$sid = $db->EscapeString($_GET['data']);
echo "Site ID: $sid";
exit();
$site = $db->FetchArray(
    $db->Query("SELECT id,cpc FROM `surf` WHERE `id`='".$sid."'")
); 
```

然后，检查`$sid`是您期望的值。如果是，那就太好了，然后继续下一段代码。如果不是，请查看*为什么*它不正确。我要尝试的下一件事是这样的：

```
$sid = $db->EscapeString($_GET['data']);
$sql = "SELECT id,cpc FROM `surf` WHERE `id`='" . $sid . "'";
echo "Surf query: $sql";
exit();
$site = $db->FetchArray($db->Query($sql)); 
```

在这里您可以检查您的 SQL 查询是否符合您的预期。

# android - 使用 Asynctask 调用多个函数进行网络连接

> ID：15183582
> 
> 赞同：3
> 
> 时间：2013-03-03T07:49:06.037
> 
> 标签：android, android-asynctask

我想建立一个类，每次我想做网络连接时，我都会使用它。我想先打开一个对话框，然后建立网络连接（或者从 SQL 获取一些东西，或者从 Web 下载一些东西，或者更新 SQL），然后关闭对话框。

我需要等待函数结束才能继续。

我想使用`AsyncTask`，但我想不出一种方法来确定`AsyncTask`要使用哪个功能。我找到了两个解决方案，`switch-case`或者尝试发送带有 java 反射的函数。两种解决方案都不是很好。

有人有其他想法或其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:44:54.257

考虑使用`Command`设计模式。 [这是 Java 示例](http://java.dzone.com/articles/design-patterns-command)。您可以通过回调扩展它以在完成后台工作后执行某些操作。

```
public abstract class Command {

    protected AsyncTaskCallback callback;

    public Command(AsyncTaskCallback callback) {
            this.callback = callback;
    }

    public abstract void execute();

    public AsyncTaskCallback getCallback() {
        return callback;
    }

    public interface AsyncTaskCallback {
        public void onPreExecute();
        public void onPostExecute();
    }

} 
```

调用者：

```
public class Invoker extends AsyncTask<Void, Void, Void> {

    private Command command;

    public static void execute(Command command) {
            new Invoker(command).execute();
    }

    private Invoker(Command command) {
            this.command = command;
    }

    @Override
    protected Void doInBackground(Void... params) {
            return command.execute();
    }

    @Override
    protected void onPreExecute() {
            if (command.getCallback() != null) {
                    command.getCallback().onPreExecute();
            }
    }

    @Override
    protected void onPostExecute(Void result) {
            if (command.getCallback() != null) {
                    command.getCallback().onPostExecute();
            }
    } 
```

}

因此，您的 AsyncTask 不知道它正在执行哪个命令，因此可以在整个应用程序中使用。现在您可以`AsyncTaskCallback`在您的接口中实现`Activity`并处理您需要的所有与 UI 相关的事情。

例子：

```
public class MyActivity extends Activity implements AsyncTaskCallback {

...

public void onPreExecute() {
    showProgress();
}

public void onPostExecute() {
    hideProgress();
    doOtherThings();
}

...

Command myCommand = new Command(this) {
    @Override
    public void execute() {
        // Do specific background work
    }
}
Invoker.execute(command); 
```

您还需要处理[方向更改](https://stackoverflow.com/questions/7128670/best-practice-asynctask-during-orientation-change)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T08:45:14.883

Android 文档有很好的示例说明如何使用`AsyncTask`. [这里有一个](http://developer.android.com/reference/android/os/AsyncTask.html)。如果你想添加一些代码来显示对话框，那么可能是这样的：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {

     // Constant for identifying the dialog
     private static final int LOADING_DIALOG = 1000;
     private Activity parent;

     public DownloadFilesTask(Activity parent) {
         // record the calling activity, to use in showing/hiding dialogs
         this.parent = parent;
     }

     protected void onPreExecute () {
         // called on UI thread
         parent.showDialog(LOADING_DIALOG); 
     }

     protected Long doInBackground(URL... urls) {
         // called on the background thread
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         // called on the UI thread
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         // this method is called back on the UI thread, so it's safe to 
         //  make UI calls (like dismissing a dialog) here
         parent.dismissDialog(LOADING_DIALOG);
     }
 } 
```

在执行后台工作之前，`onPreExecute()`会被回调。这是在您的子类中覆盖的*可选*方法`AsyncTask`，但它使您有机会在网络/数据库工作开始之前抛出一个 UI。

后台工作完成后，您还有机会在`onPostExecute()`.

你会`Activity`像这样使用这个类（从一个内部）：

```
DownloadFilesTask task = new DownloadFilesTask(this);
task.execute(new URL[] { new URL("http://host1.com/file.pdf"), 
                         new URL("http://host2.net/music.mp3") }); 
```

# google-maps-markers - 样式地图上的标记

> ID：15183585
> 
> 赞同：0
> 
> 时间：2013-03-03T07:49:43.110
> 
> 标签：google-maps-markers, google-maps-styled

我正在尝试将一组样式应用于带有标记的地图。这是基于我正在努力以任何可能的方式组合的两个功能示例。不用说，我还没有成功。

这是我的想法：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
    <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0px; padding: 0px; }
    #map_canvas { height: 80% ; width:100%; //*position:(100,0);*//}
        #content {}
    </style>
    <script type="text/javascript"
  src="http://maps-api-tt.appspot.com/apilite/styled/apiv3.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(51.795624, 15.724284);
            var settings = {
                zoom: 18,
                center: latlng,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DEFAULT},
                navigationControl: false,
                navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
            var styles = {
      "map_canvas": [
        {
          featureType: 'all',
          rules: [ 
              { "invert_lightness": true },
              { "weight": 0.5 }, 
              { "lightness": 5 },
              { "gamma": 1.58 }, 
              { "saturation": 2 }
          ]
        }
      ]
    };
            var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
            var contentString = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h1 id="firstHeading" class="firstHeading">heading</h1>'+
                '<div id="bodyContent">'+
                '<p>sample txt</p>'+
                '</div>'+
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            var companyImage = new google.maps.MarkerImage('images/logoo.png',
                new google.maps.Size(337,191),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var companyShadow = new google.maps.MarkerImage('images/logoo_shadow.png',
                new google.maps.Size(337,191),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var companyPos = new google.maps.LatLng(51.796414, 15.724155);

            var companyMarker = new google.maps.Marker({
                position: companyPos,
                map: map,
                icon: companyImage,
                shadow: companyShadow,
                title:"Kacza Górka Park Sportowy",
                zIndex: 3});

            var skateImage = new google.maps.MarkerImage('images/skate.png',
                new google.maps.Size(100,100),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var skateShadow = new google.maps.MarkerImage('images/skate_shadow.png',
                new google.maps.Size(100,100),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var skatePos = new google.maps.LatLng(51.795623, 15.724286);

            var skateMarker = new google.maps.Marker({
                position: skatePos,
                map: map,
                icon: skateImage,
                shadow: skateShadow,
                title:"skate park",
                zIndex: 2
            });

            var parkingImage = new google.maps.MarkerImage('images/parking.png',
                new google.maps.Size(50,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

            var parkingShadow = new google.maps.MarkerImage('images/parking_shadow.png',
                new google.maps.Size(70,50),
                new google.maps.Point(0,0),
                new google.maps.Point(60, 50)
            );

            var parkingPos = new google.maps.LatLng(57.0437, 9.9147);

            var parkingMarker = new google.maps.Marker({
                position: parkingPos,
                map: map,
                icon: parkingImage,
                shadow: parkingShadow,
                title:"Parking Lot",
                zIndex: 1
            });

            google.maps.event.addListener(companyMarker, 'click', function() {
                infowindow.open(map,companyMarker);
            });
        }
    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas"></div>
</body> 
```

我已经尝试了一段时间，但无法弄清楚，我会感谢所有输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:32:37.780

您可能会在下面找到样式化地图的干净示例。当您按下“添加一些标记”链接时，地图上就会添加新的标记。

为了为您的地图创建新样式，您可以使用[**Google Style Maps Wizard**](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)，它会自动生成 JSON 对象以传递给 MapOptions 对象的样式属性，以便将样式应用于 Maps API v3 地图。

```
<!doctype html>
<html lang="en">

    <head>
        <title>Google Maps</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script type="text/javascript">
            var cityList = [
                    ['Chicago', 41.850033, -87.6500523, 1],
                    ['Illinois', 40.797177, -89.406738, 2]
                ],
                demoCenter = new google.maps.LatLng(41, -87),
                map,
                styles = [{
                    stylers: [{
                        hue: "#00ffe6"
                    }, {
                        saturation: -20
                    }]
                }, {
                    featureType: "road",
                    elementType: "geometry",
                    stylers: [{
                        lightness: 100
                    }, {
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "road",
                    elementType: "labels",
                    stylers: [{
                        visibility: "off"
                    }]
                }];

            function initialize() {
                var styledMap = new google.maps.StyledMapType(styles, {
                        name: "Styled Map"
                    }),
                    mapOptions = {
                        zoom: 7,
                        center: demoCenter,
                        mapTypeControlOptions: {
                            mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
                        }
                    };

                map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
                map.mapTypes.set('map_style', styledMap);
                map.setMapTypeId('map_style');
            }

            function addMarkers() {
                var marker,
                i,
                infowindow = new google.maps.InfoWindow();

                for (i = 0; i < cityList.length; i++) {
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                        map: map,
                        title: cityList[i][0]
                    });

                    google.maps.event.addListener(marker, 'click', (function (marker, i) {
                        return function () {
                            infowindow.setContent(cityList[i][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }
            }

            $(document).ready(function () {
                initialize();
            });

            $(document).on('click', '.add-markers', function (e) {
                e.preventDefault();
                addMarkers();
            });
        </script>
    </head>

    <body>
        <div id="basic-map">
            <div id="map_canvas" style="height:350px;"></div>
            <a href="#" class="add-markers">Add Some Markers</a>
        </div>
    </body>

</html> 
```

我希望这有帮助。

# sas - 用于数字序列的 SAS 计数器

> ID：15183586
> 
> 赞同：2
> 
> 时间：2013-03-03T07:49:57.190
> 
> 标签：sas, counter

我正在努力解决以下问题。我希望为给定的“一”序列创建一个计数器。例如，我有以下内容：
`1
1
1
1
0
0
1
1
1
0
0
1
1
1
1`

给定这个序列，我希望每个序列都有一个计数器，`1`直到我点击一个`0`. 这就是我要的：

`1 1
1 1
1 1
1 1
0 .
0 .
1 2
1 2
1 2
0 .
0 .
1 3
1 3
1 3
1 3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:10:12.000

使用 dperetin 示例中的数据，使用 'notsorted' 的替代解决方案：

```
数据要；
  设置有；
  由 x 未排序；
  如果 x = 1 则执行；
    如果 first.x 然后 y + 1 ;
    z = y ;
  结尾 ;
跑 ;

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T08:49:35.593

尝试这样的事情：

```
data have;
input x;
datalines;
0
1
0
1
1
1
1
0
0
1
1
1
0
0
1
1
1
1
;
run;

data want(keep= x z);
set have;
retain y;
retain u;

if _N_ eq 1 then do; 
    y = x;
    u = 1;
end;

if x eq 1 then z = u;
else if x eq 0 and x ne y then u = u + 1;
y = x;
run; 
```

`y`跟踪 的前一个值`x`，`u`保持计数。当`x`等于 1 时，则`u`存储在`z`. 当`x`等于 0 且之前的值`x`不为 0 时，则将 的值增加`u`1。

结果：

```
x    z
------
0    .
1    1
0    .
1    2
1    2
1    2
1    2
0    .
0    .
1    3
1    3
1    3
0    .
0    .
1    4
1    4
1    4
1    4 
```

# java - 如何混淆 11 个字符的字符串？

> ID：15183587
> 
> 赞同：0
> 
> 时间：2013-03-03T07:49:57.937
> 
> 标签：java, obfuscation, deobfuscation

我有一个长度为 11 的字母数字字符串，需要对其进行混淆，其中混淆字符串应满足以下条件：
- 它应保持 11 个字符的长度。
- 它只能由字母数字字符组成，（即它可以由 10 个数字 + 26 个小写字母 + 26 个大写字母组成）。
- 应该有一种方法可以对原始字符串进行反混淆。

请注意，我不需要混淆我的整个代码，一次只需要一个字符串。
- 在核心 Java 中有没有办法做到这一点？
- 我将不胜感激任何帮助，首选示例、示例链接或此类代码的指南。
- 如果有人知道解决这种情况的第三方包，那么请留下一个链接。

提前致谢！

* * *

关于Zoul提出的答案/算法：我实现了一切，目前我遇到了隐藏问题；这就是我所做的：

*   我目前使用`random_stri`Zoul 建议的值。这仅用于测试目的；请注意，我将其设为 11 长度，因为我不需要 13。

*   由于上述原因，我使用了您使用的 ASCII 数组值，它再次被截断为 11: `[114, 97, 110, 100, 111, 109, 95, 115, 116, 114, 105]`。

*   我准备了一个包含所有 62 个可用字符的数组并将其打乱，这给了我以下打乱的字符数组：

```
[h，P，y，8，o，n，5，V，X，R，2，g，Q，p，Z，E，s，x，b，Y，m，v，u，c，j , 9,
 w, 4, I, l, z, B, U, K, S, f, 7, 1, 0, i, k, M, q, e, r, F, 3, C, J, W, O,吨，
 d、N、T、A、G、6、a、D、H、L]
```

从现在开始，对于所有程序执行，这个改组的数组都是硬编码的并且是不变的。

*   我循环了 11 个字符的输入字符串，对于每个字符，我从混洗后的数组中找到混淆字符的索引，如下所示：当前字符 + ASCII_ARRAY [当前字符索引]。例如，如果我的输入是 '1bS0EMtBbK7'，那么对于第一个字符 '1'，我们执行 (1 + 114)，得到 '1' 的 ASCII 值加上 114，得到 (49 + 114) --> 163。

*   然后，为了在 shuffled chars 数组中找到混淆 char 的索引，我执行 163 模数组长度并获取该索引处的 char。

问题是这些值仍然是连续的；即对于 2 个连续输入，输出结果也将是连续的！我在这里想念什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:04:11.417

由于您需要保持结果的可读性，一个不错的解决方案是在由字符组成的数组中移动`a-zA-Z0-9`字符。移位将是模数组大小，即。当你到达数组的末尾时，你又回到了开始。这类似于 ROT13。这就是你如何移动一个：

```
sampletextzZ9
tbnqmfufyuA0a 
```

为了稍微加强混淆，您可以为每个字母使用不同的移位常数。有第二个随机生成的字符串，并将源文本的每个字母移动随机生成的字符串中相应字母的 ASCII 码：

```
random_string # token
114, 97, 110, 100, 111, 109, 95, 115, 116, 114, 105, 110, 103 # ASCII codes
text # source text to obfuscate

t + 114 = …
e +  97 = …
x + 110 = …
t + 100 = … 
```

然后你必须将随机令牌存储在代码中。这是默默无闻的安全，但在这些情况下通常没问题。随机标记也可以是二进制的，不限于可打印的字符，这会在生成的目标代码中稍微伪装一下。

如果您需要隐藏字符串的连续性，可以将`a-zA-Z0-9`用于移位的数组打乱。使用伪随机数生成器执行 shuffle 并记住种子，以便您可以执行完全相同的 shuffle 以进行反混淆。通过一个不错的随机播放，您可能会丢弃随机标记的东西，只需使用相同的常量移动每个字符。

要消除混淆，您只需向后移动。另请参阅Wikipedia 上的[Caesar cipher](http://en.wikipedia.org/wiki/Caesar_cipher)和[ROT13](http://en.wikipedia.org/wiki/ROT13)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:18:17.323

如果您认为输入字符串等效于从 0 到 62^11-1 的整数集，那么您真正需要的只是该整数集的可逆排列。我建议如下：找到一个与 62^11 互质的数字 p。然后求q，p 的[模乘逆](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)，即求q 使得p * q = 1 (mod 62^11)。现在，为了混淆，乘以 p (mod 62^11)。要反混淆，请乘以 q (mod 62^11)。

将此与 zoul 在他的回答中建议的每个字符随机生成的旋转相结合，您最终会得到一系列字符串，这些字符串在普通观察者看来非常随机，但可以很容易地转换回有序输入序列。

我不知道是否存在可逆排列整数序列的加密安全方法，缺少生成和存储完整的随机排列，这对于大小为 62^11 的列表可能不可行。

# matlab - 字符识别

> ID：15183590
> 
> 赞同：2
> 
> 时间：2013-03-03T07:50:20.827
> 
> 标签：matlab, image-processing, ocr

我是 matlab 新手，我正在尝试在其中学习 OCR。现在我只是想让一个系统工作，然后再深入研究构建我自己的系统的理论。

无论如何，我正在关注[这里的代码片段](http://www.mathworks.com/matlabcentral/fileexchange/8612-character-recognition-example-iii-pre-processing-of-image/content/char2.m)

然而，每当我尝试代码时，不仅我的矩形看起来是倒置的，而且它们也不会强加在我的原始图像上。

我在想问题可能出在这里

```
[Ilabel num] = bwlabel(Ifill);
disp(num);
Iprops = regionprops(Ilabel);
Ibox = [Iprops.BoundingBox];
Ibox = reshape(Ibox,[4 50]);
imshow(I) 
```

我正在使用 Matlab R2012b。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:55:34.370

一些要检查的参考资料：

*   [关于字符识别的 mathworks 文档](http://www.mathworks.com/matlabcentral/fileexchange/index?utf8=%E2%9C%93&term=character+recognition)
*   [谷歌关于“matlab 字符识别”的结果](https://www.google.com/search?q=matlab%20character%20recognition&aq=f&oq=matlab%20character%20recognition&aqs=chrome.0.57.5471&sourceid=chrome&ie=UTF-8)
*   [谷歌关于“matlab 字符识别”的结果](https://www.google.com/search?q=matlat+character+recognition&aq=f&oq=matlab+character+recognition&aqs=chrome.0.57.5471&sourceid=chrome&ie=UTF-8#hl=lv&gs_rn=5&gs_ri=psy-ab&tok=u0Y57ktFY4QZo8b-fH4RaA&pq=matlab%20character%20recognition&cp=23&gs_id=f&xhr=t&q=character+recognition+algorithm&es_nrs=true&pf=p&sclient=psy-ab&oq=character+recognition+a&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43148975,d.bGE&fp=b8743810bba186dd&biw=1553&bih=963)

这些应该足以帮助您成功完成。我有一个类似的任务并使用了这些。（我必须使用不同的算法使用 matlab 识别图像中的硬币。）所以：检查所有可用的示例，检查所有/主要现有算法示例/想法（可能在其他语言中：google.lv 结果对我来说很棒！），然后将它们结合起来以更好地创建一个工作示例。

如果您遇到困难，另一个很好的资源：[在 mathworks matlab 中央新闻组上](http://www.mathworks.com/matlabcentral/newsreader/)发布您的问题。但请注意：您必须在发布之前完成“您的作业”，因为那里的人可以提供帮助，但（就像这里）他们不会为您解决问题。

祝你好运。

# linux - 如何在linux中对带有韩文字符的文件进行排序？

> ID：15183597
> 
> 赞同：2
> 
> 时间：2013-03-03T07:51:00.037
> 
> 标签：linux, sorting, unicode

我有包含许多韩文字符的文件。例如：

```
저
가
항
공
사

인
도
의
항
공
사 
```

我想使用 linux sort 对文件中的行进行排序，但 sort 不起作用。它给了我：

```
저
가
항
공
사
인
도
의
항
공
사 
```

所以，sort 只对空格进行排序。这个怎么排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T08:22:34.487

这与您系统的 LANG 环境变量有关。

为了对韩文字符进行排序，LANG 应设置为 ko_KR.utf-8。

`LANG=ko_KR.utf-8 sort tmp.txt`

应该适合您的需要：

```
가
공
공
도
사
사
의
인
저
항
항 
```

:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T08:40:20.103

您应该知道另一个韩语语言环境**ko_KR.euckr**。

最近，似乎大多数发行版都使用 ko_KR.utf-8 作为默认的韩语语言环境，但 ko_KR.euckr 仍然被广泛使用。

# php - PHP 多语言

> ID：15183601
> 
> 赞同：0
> 
> 时间：2013-03-03T07:51:39.007
> 
> 标签：php

我正在做多语言项目。文章、产品描述等内容将从数据库中显示。这没有问题。问题是有一些“静态”描述，例如表单标签、错误消息等。

到目前为止，我以这个结束。我将语言存储在 COOKIE 中，并且我具有以设置语言编写消息的功能。我有一个名为 _lang.php 的文件，其中包含以下内容：

```
$['empty_field']['sk'] = "Slovak description of error";
$['empty_field']['en'] = "English description of error"; 
```

等等。这是一个好的解决方案吗？还有其他解决方案吗？谢谢

所以我尝试了 gettext() 并以此结束：（欢迎输出）

```
putenv("LANGUAGE=sk_SK");
setlocale(LC_ALL, 'sk_SK');
$dom = "roids";
bindtextdomain($dom, "www/roids/_locale");
textdomain($dom);
echo gettext('welcome'); 
```

我创建了这个文件夹：_locale/sk_SK/roids.po

roids.po 的内容：

```
msgid ""
msgstr ""
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"

msgid "welcome"
msgstr "vitaj" 
```

我使用 WAMP 服务器，但我不知道这条路径是否：www/roids/_locale 好。Wamp 安装在这里：D:\wamp 和 ww 文件在 D:\wamp\www

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:54:47.790

我认为你应该看看一些资源。一个很好的就在堆栈交换网络上。 [PHP本地化最佳实践？获取文本？](https://stackoverflow.com/questions/2790952/php-localization-best-practices-gettext)

另一个很好的资源是谷歌。只是 google [php 本地化最佳实践](https://www.google.com/search?q=php%20localization%20best%20practices&rlz=1C1GPCK_enUS410US410&aq=f&oq=php%20localization%20best%20practices&aqs=chrome.0.57j0j62l2j64.8650&sourceid=chrome&ie=UTF-8) 有很多很好的库可用于 php 和本地化

另一个很好的资源是 php 本身的[gettext](http://www.php.net/_)函数。这就是我要做这样的事情的方式。

**更新**

这是 O'Reilly 小组关于该主题的非常好的教程。 [Gettext - O'Reilly 媒体](http://onlamp.com/pub/a/php/2002/06/13/php.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:09:41.430

根据您的情况而不是维护数组，例如

```
$['empty_field']['sk'] = "Slovak description of error";
$['empty_field']['en'] = "English description of error"; 
```

[您可以使用 ini 文件和 PHPs parse_ini_file](http://www.php.net/manual/en/function.parse-ini-file.php)更轻松地管理字符串，或将它们出租给其他人：

```
[sk]
empty_field = "Slovak description of error";
; others in here ...

[en]
empty_field = "English description of error";
; others in here ... 
```

**对Wouter J**的评论表示赞同，您将 lang 设为第一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T08:03:12.460

我会使用`require_one`加载特定语言的 PHP 文件。

IE

```
require_once('/some/path/errors_'. $_SERVER['HTTP_ACCEPT_LANGUAGE'] . '.php'); 
```

并且该文件定义了该语言的相关错误消息/等数组。

# c - 比较arduino中的两个双变量

> ID：15183606
> 
> 赞同：2
> 
> 时间：2013-03-03T07:52:23.080
> 
> 标签：c, arduino, decimal

所以，我有两个双变量，我想将它们比较到小数点后 3 位。因此，对于变量（例如）：

```
double x = 0.695999;
double y = 0.695111; 
```

如果我检查 (x==y)，它应该返回 true（因为两者都相等，直到小数点后 3 位）。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T07:54:25.093

您可以（ab）使用整数比较和截断：

```
int is_equal_3decplaces(double a, double b) {
    long long ai = a * 1000;
    long long bi = b * 1000;
    return ai == bi;
} 
```

正如@DavidRF 的基准所显示的那样，与计算绝对值相比，此解决方案的性能略有提高（约 40%）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T07:59:20.423

您实际上应该检查差异是否小于可预配置的小增量，除非您总是希望检查小数点后三位。例如：

```
#define epsilon ((double)0.000999)
bool is_approximately_equal(double x, double y)
{
        return (abs(x - y) < epsilon);
} 
```

请注意，C++ 上的 abs 具有用于 double 的 abs 版本。在 C 语言中，您必须对 -ve 值做一些事情。

# android - 如何在窗口中运行我自己的 android 模拟器？

> ID：15183607
> 
> 赞同：2
> 
> 时间：2013-03-03T07:52:49.917
> 
> 标签：android, android-emulator, android-source

在 linux 中，我构建了自己的模拟器（按照说明： http: [//source.android.com](http://source.android.com)）并启动它。现在，我想将它复制到 Windows 并运行它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T05:13:59.143

您可以下载模拟器附带的适用于 windows 的 Android SDK。 [安卓 SDK](http://developer.android.com/sdk/index.html)

或者你可以使用其他安卓播放器，比如[Blue Stacks](http://www.bluestacks.com/)

或者您可以使用 Vmware 等模拟器直接在 Windows 上运行 Android OS（图像文件）。

祝你好运！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:01:52.797

我猜你想要做的是从源代码构建你自己的 Android SDK (for Windows)。你可以这样做：

设置：

```
$ sudo apt-get install mingw32 tofrodos 
```

mingw32 是交叉编译器，tofrodos 增加了一个 unix2dos 命令。

构建：

```
$ . build/envsetup.sh
$ lunch sdk-eng
$ make win_sdk 
```

取自[此处](http://tools.android.com/build)（构建 Windows SDK）。

如果它不起作用，请使用更多调试选项（例如：**-show-kernel**）为模拟器提供午餐，然后查看它停止的位置。由于它没有达到初始化 adbd 守护程序的地步，这可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:13:07.807

我不确定，但我认为以下步骤可以帮助您。您需要将以下文件（我还提供这些文件的路径）复制到 Windows 中的文件夹中（假设该文件夹为`user_folder`）：

```
out/target/product/generic/system.img
out/target/product/generic/ramdisk.img
out/target/product/generic/userdata.img
prebuilt/android-arm/kernel/kernel-qemu 
```

如果在 Windows 中安装了 Android SDK，那么应该有 command `emulator`。您可能还需要为 sdcard 放置一个图像（可以使用 mksdcard 生成）您只需填写此命令的参数即可。

```
emulator -sysdir <path_to_your_user_folder> -system <path_to_your_user_folder>/system.img -ramdisk <path_to_your_user_folder>/ramdisk.img -data <path_to_your_user_folder>/userdata.img -kernel <path_to_your_user_folder>/kernel-qemu -sdcard <path_to_your_user_folder>/sdcard.img 
```

# android - Android youtube api删除订阅不起作用

> ID：15183610
> 
> 赞同：0
> 
> 时间：2013-03-03T07:53:02.973
> 
> 标签：android, api, youtube, subscription

```
public static boolean deleteSubscribe(String subscription_id, String authToken){
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("https://gdata.youtube.com/feeds/api/users/default/subscriptions/"+subscription_id+"?v=2");
    httpPost.setHeader("DELETE", "/feeds/api/users/default/subscriptions/"+subscription_id+" HTTP/1.1"); 
    httpPost.setHeader("Host", "gdata.youtube.com"); 
    httpPost.setHeader("Authorization", "Bearer "+authToken);
    httpPost.setHeader("GData-Version", "2");
    httpPost.setHeader("X-GData-Key", "key="+DeveloperKey.DEVELOPER_KEY);
    HttpResponse httpResponse = null;
    httpPost.setHeader("Content-type","application/atom+xml");

    try {

        httpResponse = httpClient.execute(httpPost);
        BufferedReader reader = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        System.out.println("remove:" + json);

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_CREATED);
} 
```

我正在使用此代码删除 Youtube API 中的订阅。我可以成功添加订阅，但删除功能时出现错误：

> http://schemas.google.com/g/2005'>GData`invalidRequestUri`请求 URI 无效

[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions#Deleting_a_subscription)的原始链接。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:19:57.567

尝试对您的开发人员密钥、authtoken 和 subscription_id 进行 urlencode。

# python - 导入模板源加载器 pyjade.ext.django.Loader 时出错

> ID：15183615
> 
> 赞同：1
> 
> 时间：2013-03-03T07:53:53.390
> 
> 标签：python, django, pyjade

Jade 是一个很棒的模板。我想在 Django 中使用它，我找到了 Pyjade。

我按照示例代码进行操作，但在运行项目时出现错误。

在 Django 调试模式下，Django 告诉我：

```
ImproperlyConfigured at /
Error importing template source loader pyjade.ext.django.Loader: "cannot import name force_text" 
```

当我尝试使用

```
pyjade index.jade 
```

我可以得到正确的结果，但有 3 个警告：

```
WARNING:root:cannot import name force_text
WARNING:root:No module named jinja2.ext
WARNING:root:No module named tornado.template 
```

这是我的设置.py

```
...

TEMPLATE_LOADERS = (
    ('pyjade.ext.django.Loader',(
        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',
    )),
)

... 
```

我使用 pip 在我的 Django==1.4 上安装 pyjade

有没有人遇到这个问题以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:52:21.077

按照这个链接，你会解决这个问题。也许你可以安装最新版本的 pyjade 来解决这个问题。

作者帮助我并关闭了这个问题：[https ://github.com/SyrusAkbary/pyjade/issues/85](https://github.com/SyrusAkbary/pyjade/issues/85)

玩得开心。

# ios - 在全屏视频播放期间旋转后不显示 UISplitViewController 的 MasterViewController

> ID：15183616
> 
> 赞同：0
> 
> 时间：2013-03-03T07:54:02.247
> 
> 标签：ios, uisplitviewcontroller

我有一个 UISplitViewController，它仅在默认情况下显示 MasterViewController。

如果我从纵向开始，单击按钮播放视频（我的应用程序的主要功能），然后进入全屏，然后旋转到横向，然后退出全屏：MasterViewController 不显示。

取而代之，主人应该在的地方，简直就是黑死空间。在右侧，详细视图控制器正确显示。

我无法弄清楚为什么没有显示主人。这适用于 iOS 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:39:24.840

我相信这可以帮助你： [https](https://github.com/alexth/TBSV) ://github.com/alexth/TBSV 如何在一个项目中拥有 UINavigationBar、UITabBar 和 UISplitViewController 的示例，并且方向之间的转换看起来正确

# python - 在python列表中包含一个元素0不包含在过滤函数中，为什么？

> ID：15183622
> 
> 赞同：-3
> 
> 时间：2013-03-03T07:55:01.680
> 
> 标签：python, filter, lambda, functional-programming

```
>>> print filter(lambda x:x,[4,0,4,0,0,2])
[4, 4, 2] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T07:57:25.993

您的函数 ( `lambda x:x`) 的结果被视为布尔值，并且`bool(0)`是`False`. 的工作`filter()`是排除函数返回的所有元素`False`。从[文档](http://docs.python.org/2/library/functions.html#filter)中：

> 从函数返回 true 的那些可迭代元素构造一个列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:27:44.057

@NPE 已经解释了您观察到的行为

顺便说一句，你的表情

```
>>> print filter(lambda x:x,[4,0,4,0,0,2]) 
```

可以等效地写为

```
>>> filter(None,[4,0,4,0,0,2]) 
```

# sorting - 对三个数字从小到大排序

> ID：15183630
> 
> 赞同：2
> 
> 时间：2013-03-03T07:55:56.607
> 
> 标签：sorting, assembly, little-man-computer

我目前正在学习汇编语言。我已经能够创建一个快速的短函数来将两个数字从最小到最大交换。我正在应用相同的基本基础来使用三个数字执行此操作，但每次执行比较时，它都会进入无限循环。我通过使用来声明这个函数`*60`。如何正确地将三个数字从小到大排序？另外，有没有一种方法可以让相同的函数在不进行任何额外更改的情况下执行两个和三个数字？

一些汇编程序的语法略有变化。[这里](http://www.cba.uri.edu/vvm/getit.html)是我目前正在使用的一个教育组件 Little Man 计算机模拟器的链接。

使用两个数字进行交换：

```
INP     //Input x number
STO 99      //Store x number
INP     //Input y number 
STO 98      //Store y number
BR 60       //Jump to function *60
HLT     //End run
*60         //Number SWAP function
LDA 99      //Load x
STO 87      //Move x to mailbox 87
LDA 98      //Load y
STO 86      //Move y to mailbox 86
SUB 87      //Subtract y - x 
BRP 71      //Branch to line 71 if result is positive
LDA 86      //SUB 87 gives a negative result- then y is smallest number. Load y
OUT     //Display y
LDA 87      //Load x- the greater number. 
OUT     //Display x
HLT     //End here since y > x
LDA 87      //BRP 71 branches here- then x is smallest number 
OUT         //Display x
LDA 86      //y is the greater number
OUT *       //display y 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:30:01.243

这是一个冒泡排序，[https://en.wikipedia.org/wiki/Bubble_sort](https://en.wikipedia.org/wiki/Bubble_sort)因为它使用了 3 次交换代码。

我从来没有学过小人，但基于[https://en.wikipedia.org/wiki/Little_man_computer](https://en.wikipedia.org/wiki/Little_man_computer)，这应该可行。我没有看到任何关于分支到特定行号的信息，但看起来 - 根据您的第一个工作示例 - 您已经将其记下来并希望可以适当地翻译标签。（手指交叉）

Wikipedia 条目有多个伪代码副本，但我想从 Wikipedia 条目的第一个“优化冒泡排序”伪代码中展开循环，因为我在 Little Man 中没有看到任何关于使用索引访问内存位置的内容，就像你需要的那样对于一个数组。没有检查数组是否有序。

```
Load the three values into registers r91-r93

// loop 1 step 1
if r92-r91>0 then    
    do nothing
else      // swap them, using a temp register  
    temp=r92
    r92=r91
    r91=temp
end if
// loop 1 step 2
if r93-r92>0 then 
    do nothing
else      // swap them, using a temp register 
    temp=r93
    r93=r92 
    r92=temp
end if 
// loop 2 step 1
if r92-r91>0 then 
    do nothing
else      // swap them, using a temp register  
    temp=r92
    r92=r91
    r91=temp
end if

Write out the registers in order:  r91, r92, r93 
```

根据维基百科的文章，这是我对小人的最佳近似的相同代码。您可能需要修复标签。

```
 INP        // Read in the first value
         STA 91     // store it
         INP        // Read in the second value
         STA 92     // store it
         INP        // Read in the third value
         STA 93     // store it
         LDA 92     // LOOP 1, STEP 1:  
         SUB 91     // 
         BRP STEP2  // if r91 and r92 are in order, don't swap them
         LDA 92     // Begin swapping registers
         STA 99     // temp = r92
         LDA 91
         STA 92     // r92 = r91
         LDA 99
         STA 91     // r91 = temp
STEP2    LDA 93     // LOOP 1, STEP 2
         SUB 92
         BRP STEP3  // If r92 and r93 are in order, don't swap them
         LDA 93     // Begin swapping registers
         STA 99     // temp = r93
         LDA 92
         STA 93     // r93 = r92
         LDA 99
         STA 92     // r92 = temp
STEP3    LDA 92     // LOOP 2, STEP 1
         SUB 91
         BRP STEP4  // if r91 and r92 are in order, don't swap them
         LDA 92     // Begin swapping registers
         STA 99     // temp = r92
         LDA 91
         STA 92     // r92 = r91
         LDA 99
         STO 91     // r91 = temp
STEP4    LDA 91     // Write out the sorted values 
         OUT
         LDA 92
         OUT
         LDA 93
         OUT
         HLT        // stop 
```

# android - 使用 FragmentTransaction.attach() 和 detach() 时不保留 Fragment ui

> ID：15183633
> 
> 赞同：1
> 
> 时间：2013-03-03T07:56:23.420
> 
> 标签：android, android-fragments, detach

根据我对文档的了解，您可以分离一个片段并稍后重新附加它，它会自动看起来与分离时相同。还有比这更多的吗？我有一个简单的操作栏，带有 2 个按钮，用于 2 个不同的片段。当我从第一个切换到第二个回到第一个时，第一个片段中加载的图像不再可见。我是否错误地使用了附加/分离，或者我是否需要自己管理 instanceState 并重绘 ui。如果是这样，附加和分离方法的意义何在？

```
 @Override
public void onStart(){
    super.onStart();    
    ndi=new NasaDailyFragment(this);
    bnf=new BreakingNewsFragment(this);
   ft=getFragmentManager().beginTransaction();
   ft.add(R.id.focused_view_container,ndi).commit();

}

public void onTabSelected(Tab tab, FragmentTransaction f) {

switch(tab.getPosition()){
case 0:
    ft=getFragmentManager().beginTransaction();
    if(!ndi.isAdded()){ 
        ft.replace(R.id.focused_view_container, ndi).setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN).commit();
        ft.attach(ndi);
        getFragmentManager().executePendingTransactions();
    }

    break;
case 1:
        ft=getFragmentManager().beginTransaction();
        ft.detach(ndi);
        ft.replace(R.id.focused_view_container, bnf).commit();
        getFragmentManager().executePendingTransactions();
     break;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:27:18.807

使用显示和隐藏而不是附加和分离。这是一个示例代码，

```
 private class MyTabListener implements ActionBar.TabListener {
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

        switch (tab.getPosition()) {
        case 0:

            if (frag1 == null) {
                // If not, instantiate and add it to the activity
                frag1 = Fragment.instantiate(getApplicationContext(),
                        FeedsActivity.class.getName());
                ft.add(android.R.id.content, frag1, "Feeds");
            } else {
                // If it exists, simply attach it in order to show it
                ft.show(frag1);
            }
            return;

        case 1:
            if (frag2 == null) {
                // If not, instantiate and add it to the activity
                frag2 = Fragment.instantiate(getApplicationContext(),
                        ProfileActivity.class.getName());
                ft.add(android.R.id.content, frag2, "Profile");
            } else {
                // If it exists, simply attach it in order to show it
                ft.show(frag2);
            }
            return;
        case 2:

            if (frag3 == null) {
                // If not, instantiate and add it to the activity
                frag3 = Fragment.instantiate(getApplicationContext(),
                        History.class.getName());
                ft.add(android.R.id.content, frag3, "History");
            } else {
                // If it exists, simply attach it in order to show it
                ft.show(frag3);
            }

            return;

        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        if (frag1 != null) {
            // Detach the fragment, because another one is being attached
            switch (tab.getPosition()) {
            case 0:
                ft.hide(frag1);
                return;
            case 1:
                ft.hide(frag2);
                return;
            case 2:
                ft.hide(frag3);
                return;

            }

        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T14:04:22.660

你的逻辑有问题 - 你替换片段然后再次附加它，或者如果 1 分离然后替换，那是多余的。除了替换你每次切换标签时都会破坏旧片段。我宁愿这样：

```
public void onTabSelected(Tab tab, FragmentTransaction f) {
    switch(tab.getPosition()){
    case 0:
        if(ndi.isAdded()){ 
            f.detach(bnf);
            f.attach(ndi);
        }else{
            f.add(R.id.focused_view_container, ndi).setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        }
    break;
    case 1:
        if(bnf.isAdded()){ 
            f.detach(ndi);
            f.attach(bnf);
        }else{
            f.add(R.id.focused_view_container, bnf).setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        }
     break;
} 
```

而且您不必在传递的 FragmentTransaction OnTabSelected 事件上调用提交。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T09:19:29.983

默认情况下，`Fragment`当您分离然后附加它时会重新创建。`setRetainInstance(true)`您可以通过调用来更改此行为`Fragment`：实际实例将保存在内存中，并且在分离-附加循环后不会重新创建。但是. `Fragment`_ `Fragment`_ `Activity`希望这可以帮助。

# javascript - 使用 javascript 进行类显示/隐藏文本

> ID：15183637
> 
> 赞同：0
> 
> 时间：2013-03-03T07:57:07.927
> 
> 标签：javascript, html

JavaScript：

```
 function showOrHide()  
  { 
      var div = document.getElementByClass("showorhide"); 
      if (div.myDivClass.display == "block")  
      { 
          div.myDivClass.display = "none"; 
      } 
      else  
      { 
          div.myDivClass.display = "block"; 
      } 
  } 
```

CSS：

```
.showorhide {
    display: none;
    padding: 12px 0px 12px 0px;
} 
```

html:

```
<div align="left" style="padding-bottom:3px;"><font size="5">Chat Issues:</font></div>
<a href="javascript:showOrHide();"><font size="3">Are there any age requirements?</font></a> 
<ul style="margin:0px 0px 0px 0px;">
    <div class="showorhide">
        <li>Yes. You must be 13 years of age or older to use our chatrooms. Anyone under the age of 13 will be directed to a chatroom more suitable for their age.</li>
    </div>
</ul>
<a href="javascript:showOrHide();"><font size="3">Can i advertise in your chatroom? </font></a> 
<ul style="margin:0px 0px 0px 0px;">
    <div class="showorhide">
        <li>Absolutely not! Advertising is strictly prohibited and anyone caught advertising will be banned without warning.</li>
    </div>
</ul> 
```

它曾经有一个 div id 效果很好，但我需要使用相同的 id 和多个显示/隐藏而不更改 id 并制作大量代码，所以我尝试将它更改为一个类，但我似乎无法得到它去工作。它隐藏了内容，但点击时不会显示出来，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:10:37.253

现在编辑，我更好地理解了这个问题。请注意标记更改。您会注意到您需要丢弃由标记中的空格创建的可能的垃圾文本节点，但这应该可行。在这种特殊情况下，库将大大减少您需要编写的代码。jQuery 是一个很常见的。 [http://jsfiddle.net/Hx5uD/2/](http://jsfiddle.net/Hx5uD/2/)

```
 function showOrHide(clickedAnchorElement) {
      var i, toggleableElements, firstNonTextSibling = clickedAnchorElement;
      do {
          firstNonTextSibling = firstNonTextSibling.nextSibling;
      } while (firstNonTextSibling && firstNonTextSibling.nodeType == 3);

      toggleableElements = firstNonTextSibling.getElementsByClassName('showorhide');

      if (!toggleableElements) {
          return;
      }
      for (i = toggleableElements.length - 1; i >= 0; i--) {
          if (toggleableElements[i].style.display == "block") {
              toggleableElements[i].style.display = "none";
          } else {
              toggleableElements[i].style.display = "block";
          }
      }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:03:28.237

您应该使用 onclick 来使用纯 javascript，但是 jquery `is(":visible") , will work much better in this place`：

```
<a onclick="javascript:showOrHide();"><font size="3">Can i advertise in your chatroom? </font></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:06:27.353

您必须使您的 div 独一无二。否则，您当前的 javascript 代码将显示和隐藏所有 div。此外，您当前的 javascript 代码甚至无法正常工作，因为`.getElementByClassName("showorhide")`它正在获取多个元素，并且您将其用作单个元素

将您的 html 修改为：

```
<div align="left" style="padding-bottom:3px;">
      <font size="5">Chat Issues:</font>
 </div>
 <a href='javascript:showOrHide("div1");'>
      <font size="3">Are there any age requirements?</font>
 </a> 
 <ul style="margin:0px 0px 0px 0px;">
      <div id="div1">
          <li>Yes. You must be 13 years of age or older to use our chatrooms. Anyone under  
              the age of 13 will be directed to a chatroom more suitable for their age.
          </li>
      </div>  
 </ul>
 <a href='javascript:showOrHide("div2");'>
      <font size="3">Can i advertise in your chatroom? </font>
 </a> 
 <ul style="margin:0px 0px 0px 0px;">
    <div id="div2">
         <li>Absolutely not! Advertising is strictly prohibited and anyone caught 
             advertising will be banned without warning.
        </li>
    </div>
 </ul> 
```

并将您的javascript代码修改为：

```
function showOrHide(id)  
    { 
        var div = document.getElementById(id); 
        if (div.myDivClass.display == "block")  
        { 
            div.myDivClass.display = "none"; 
        } 
        else  
        { 
            div.myDivClass.display = "block"; 
        } 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T08:12:31.170

几件事：

*   `document.getElementByClass`应该是`document.getElementsByClassName`（注意 Elements 是复数）
*   `document.getElementsByClassName`返回一个数组，因此您需要使用索引来访问其项目。有很多方法可以做到这一点；这是您可以做到的一种方法：

```
var divs = document.getElementsByClassName('showorhide');
for (i = 0; i < divs.length; i++)
{
    //Do your hide/show logic here using divs[i] instead of div
} 
```

*   当您获取/设置显示属性时，`div.myDivClass.display` 应该是 `div[i].style.display`

让我知道这一切是否有效/有意义:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T08:14:00.383

试试这个：

```
function showOrHide()  
{ 
    var div = document.getElementByClassName("showorhide"); 
    if (div.style.visibility == "visible")  
    { 
        div.style.visibility = "hidden"; 
    } 
    else  
    { 
        div.style.visibility = "visible"; 
    } 
} 
```

# javascript - 创建 cookie 不起作用

> ID：15183638
> 
> 赞同：2
> 
> 时间：2013-03-03T07:57:20.440
> 
> 标签：javascript, cookies

我绝对无法弄清楚这段代码有什么问题，

第一次迭代完美运行：

```
if (window.location.href != "http://fiddlehead.co/pages/verify-age") {
current_url = window.location;
document.cookie = 'landing_Cookie=' + escape(current_url) +';'
}; 
```

但我需要 cookie 在几秒钟内过期，这不起作用（没有创建 cookie）：

```
if (window.location.href != "http://fiddlehead.co/pages/verify-age") {
function createCookie(name, value) {
   var date = new Date();
   date.setTime(date.getTime()+(30*1000));
   var expires = "; expires="+date.toGMTString();
   var current_url = window.location;
   document.cookie = name+"="+escape(value)+expires+"; path=/";
 };
 createCookie('landing_Cookie', current_url);
}; 
```

任何帮助将不胜感激，这是我将头撞在桌子上的最后一个障碍！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:03:57.417

`var current_url = window.location;`必须放在身体外面`createCookie`。

# android - 在 Ubuntu 中更改 Android 模拟器的光标图标

> ID：15183644
> 
> 赞同：2
> 
> 时间：2013-03-03T07:58:12.327
> 
> 标签：android, ubuntu, emulation, qemu

我很高兴拥有 x86 Android 仿真，现在我想将它用于我的应用程序的宣传视频。最后要修复的一件事是将鼠标光标从指针更改为半透明点。

我开始看它，博客为我指出了重新编译 Android 源代码的方向。没问题。但是，即使有源，我也找不到绘制Android模拟器的地方。我知道它使用 QEMU，但我不确定这个库是否正在帮助窗口渲染，也许我应该查看 QEMU 以获取光标的代码。

任何指针表示赞赏。

# php - # 之后如何在 URL 中获取查询

> ID：15183655
> 
> 赞同：-1
> 
> 时间：2013-03-03T07:59:58.623
> 
> 标签：php

我正在使用 PHP 并想检查同一页面的链接但具有不同的尾随信息。

该页面的 URL 通常是[http://www.mypage.com/?about](http://www.mypage.com/?about)但如果用户通过单击链接 SEND 访问它，则用户将发送到[http://www.mypage.com/?about#send](http://www.mypage.com/?about#send)

如果用户单击 INFO，他们会转到[http://mypage.com/?about#info](http://mypage.com/?about#info)

问题我如何检查`#`以及之后会发生什么？我试过`$_SERVER[query_string]`了，它显示了`about#send`，我只需要检查数字符号后面的内容`#`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:20:55.073

哈希部分（# 符号后面的所有内容）永远不会发送到服务器，并且您无法进入 PHP 脚本。您只能使用 javascript 来操作它。这是通过`window.location.hash`属性实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:03:45.557

您可以在阅读您的网址后使用此代码：

```
$s =  $_SERVER[query_string];
$url = explode('#',$s);
echo $url[1]; 
```

在此代码中 $url[1] 是您想要的值。用#分割url，组成一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:05:25.823

最好在客户端做，但这里的 php 代码比做不到：

```
<?
echo parse_url("http://mypage.com?about#send",PHP_URL_FRAGMENT);
?>
Outout : send 
```

# boost - boost 1.53.0 安装时出错

> ID：15183658
> 
> 赞同：1
> 
> 时间：2013-03-03T08:00:37.503
> 
> 标签：boost, bjam

我正在按照[http://www.boost.org/doc/libs/1_53_0/doc/html/bbv2/installation.html](http://www.boost.org/doc/libs/1_53_0/doc/html/bbv2/installation.html)中的步骤操作，但在第 3 步中出现以下错误`./b2 install --prefix=PATH-TO-PREFIX`

```
import error: length of source and target rule name lists don't match!
    source: peek poke record-binding
    target: modules.peek
/usr/users/wammar/boost_1_53_0/tools/build/v2/boost-build.jam:8: in module scope 
```

我正在使用 gcc 4.6.0。boost 1.52.0 也会发生同样的错误。无论我是否 cd into 都会发生同样的错误`tools/build/v2`。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:50:52.413

根据[https://svn.boost.org/trac/boost/ticket/7212](https://svn.boost.org/trac/boost/ticket/7212)，这是由于 gcc 编译器版本 4.6.0 中的错误，该错误已在 4.6.1 和 4.6.2 中修复

# jquery - 如何防止元素在悬停后上升/改变位置后悬停

> ID：15183660
> 
> 赞同：1
> 
> 时间：2013-03-03T08:01:00.620
> 
> 标签：jquery, html, css, lazy-loading

我正在使用 socialite.js 创建社交按钮的延迟加载效果 一切都很好，但是悬停之后，按钮有点向上。

[提琴手](http://jsfiddle.net/fnkpH/)

```
CSS
/*
 * Socialite Look-a-like defaults
 */
 .cf:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content:" ";
    clear: both;
    height: 0;
}
* html .cf {
    zoom: 1;
}
*:first-child+html .cf {
    zoom: 1;
}
/* visually hidden from HTML5 Boilerplate */
 .vhidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}
.social-buttons {
    display: block;
    list-style: none;
    padding: 0;
    margin: 00px;
}
.social-buttons > li {
    display: block;
    margin: 0;
    padding: 00px;
    float: left;
}
.social-buttons .socialite {
    display: block;
    position: relative;
    background: url('https://lh4.googleusercontent.com/-4P_Yq4L-QXM/UTHWS6CDigI/AAAAAAAAGrU/t4K0HmWUv2U/s194/socialshare.png') 0 0 no-repeat;
}
.social-buttons .socialite-loaded {
    background: none !important;
}
.social-buttons .twitter-share {
    width: 83px;
    height: 45px;
    background-position: -145px 0;
}
.social-buttons .googleplus-one {
    width: 65px;
    height: 45px;
    background-position: -75px 0;
}
.social-buttons .facebook-like {
    width: 77px;
    height: 45px;
    background-position: 0 0;
}
.social-buttons .linkedin-share {
    width: 59px;
    height: 25px;
    background-position: -215px 0;
}
</style> 
```

我尝试了很多 css 技巧，但徒劳无功。虽然我对 jquery 了解不多，但我浏览了 socialite.js 并没有发现与高度 afterhover 相关的内容。是否有任何技巧可以使元素的位置在同一位置之后。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:20:21.460

我在 Mac 上使用 Firefox 19，替换图像的插件确实更高（如果这就是你所指的）。

我试着只是添加`margin-top:10px`，`.social-buttons > li`这似乎有效？

[http://jsfiddle.net/NjuDa/](http://jsfiddle.net/NjuDa/)

# php - 如何使用 time() 计算您登录的秒数

> ID：15183661
> 
> 赞同：5
> 
> 时间：2013-03-03T08:01:01.987
> 
> 标签：php, session, login, time

我正在创建一个脚本，假设我有一个用户/通行证要输入，一旦进入，另一个页面将被重定向，并且在该页面中将显示一行，说你已经在这里停留了 xxx 秒。

我目前正在使用 $_SESSION 但我不确定如何设置，因此 time() 将在登录后开始计数。

这是我的 index.php 脚本

```
if((isset($_GET["user"])) || (isset($_GET["pass"])))
{
    if(($_GET["user"] == "a") && ($_GET["pass"] == "a"))
    {
        session_start();
    $_SESSION["auth"] = 1;
    $_SESSION["username"] = $_GET["user"];
    $_SESSION["loginTime"] = time();
    $_SESSION["timeLogged"] = time() - $_SESSION["loginTime"];

    header("Location: 1.php");
}
else
{
    echo "Incorrect login data";
}
} 
```

这是我的 1.php 脚本

```
session_start();
if(!(isset($_SESSION["username"])))
{
    header("location: index.php");
}
else
{
    echo "Welcome " . $_SESSION["username"] . "<br/>";
    echo "You have been logged in for " . $_SESSION["timeLogged"] . " seconds.";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:04:37.730

使用`$_SESSION`（如您所述）

第 1 页 - 将当前时间（或任何时间）存储在会话（cookie）中

```
$_SESSION['startTime'] = time(); 
```

第 2 页 - 将当前时间（即访问第 2 页的时间）减去我们传入 cookie 的时间（在第 1 页上创建）

```
if (is_int($_SESSION['startTime'])){ // if the cookie exists:
    $difference = time() - $_SESSION['startTime'];
} else { // if the cookie does not exist:
    echo "You have been here some time in the future";
} 
```

无论如何......这样的事情可能会奏效

* * *

**编辑**- 使用您提供的代码：

移至您的1.php`$_SESSION["timeLogged"] = time() - $_SESSION["loginTime"];`脚本。*进入第二页后，*您需要计算差异:)

你有什么：

```
$_SESSION["loginTime"] = time();
$_SESSION["timeLogged"] = time() - $_SESSION["loginTime"]; 
```

最后一行是=当前时间-（变量也=当前时间）= 0

# jsf - 当我清除我的支持 bean 时，视图保持旧值

> ID：15183663
> 
> 赞同：0
> 
> 时间：2013-03-03T08:01:11.827
> 
> 标签：jsf, jsf-2, el

JSF 值绑定是单向的还是双向的？

当我清除我的支持 bean 数据时，视图仍然保留旧值。这是 JSF 的工作方式吗？我想知道一种将视图与支持 bean 同步的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:32:40.800

是的，数据绑定是双向的。但这意味着什么，如果不回答两个关键问题：

*   当阅读和写作发生时，
*   它在什么条件下发生。

答案是：

*   如果每个组件都有效，则数据在回发后从控件推送到 bean。
*   数据是在渲染之前从 bean 中读取的，即在每个动作发生并触发每个标准事件（命令按钮、值更改事件等）之后。

这意味着与第一直觉相反： - 像输入这样的组件确实保持它们的状态，并且它与支持 bean 分离。它可以保留很长时间，甚至可以保留很多回发，而无需与支持 bean 进行任何同步（例如，当表单上的任何其他组件无法验证时）。

想象生命周期的最简单方法是：

1.  组件使用请求数据和可能的其他一些依赖于配置的方式来恢复它们的状态[仅限回发]
2.  如果转换和验证正常，则使用绑定将来自组件的数据复制到支持 bean，如果不是，则跳过下一步，但组件仍会记住它们的状态 [仅限回发]
3.  执行动作（查看动作、命令）。在这个阶段，您总是可以从 bean 中读取数据并确保它是有效的（不是“连贯的”，更像是“孤立的每个组件都有一个可接受的值”）。您还可以更改 bean 中的值，以确保它们将在下一步中使用。
4.  组件使用绑定从支持 bean 中提取数据并拉取数据。

要点是：

*   如果您尝试将任何逻辑放入 getter 和 setter 中，那么您就会遇到问题。如果您的任何设置器设置了一些额外的属性，您最终会得到设置其他值的代码，结果可能取决于调用绑定的顺序（步骤 2）；
*   更改任何数据的唯一好时机是第 3 步：执行操作的时刻；
*   如果您没有任何操作，您也可以使用 PreRenderView 事件，它在第 3 步和第 4 步之间被调用（如果您有一个纯 GET 页面，则可用于将一些数据移动到 bean 中，没有回发）。
*   在转换器、验证器和 valuechangelisteners 中更改 bean 或依赖 bean 的值 - 至少很棘手。

如果您尝试将 JSF 与谷物一起使用，那么使用起来真的很愉快。如果试图违背常规并将 JSF 转变为您对 Web 框架应该如何工作的想法（例如在验证器中使用业务验证、更改转换器内部的模型、从构造函数读取数据库等），您将需要 BalusC 的大量帮助:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:24:02.697

不太确定您要问什么，但是是的，如果您的 bean 不是请求范围，它们将使用以前的值填充您的 html 表单控件。

如果您的 bean 是视图范围或会话范围，您仍然可以通过在 bean 的操作方法（commandLink/commanButton 操作）中操作模型值来控制呈现的值

如果您希望在以后访问同一页面时清除这些值，您应该使您的页面 bean 请求范围。

如果您愿意，您可以通过使用绑定而不是值直接对 UIComponents 进行微管理以实现完全控制，从而允许您直接在 bean.eg 中创建和管理 UIComponents

`<h:inputText binding="#{bean.inputComponent" />`在你的代码中

```
public class myBean {
    private UIInput inputComponent;

    public UIComponent getInputComponent() {
        // create your UIComponent here, and manage values in your command methods
    }

    public void setInputComponent(UIComponent component) {
         inputComponent = component;
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:24:09.997

JSF 做你告诉它做的事情。

为了刷新视图（在对 bean 进行一些更改之后），您需要通过从您的操作方法返回 null/void*来回发到原始视图*，或者指定客户端 ID（或其他可接受的值，如 @form ) 要执行（更新）并稍后呈现（刷新）为附加到您的组件的*标签的**属性，`<f:ajax>`*该组件应该对您的 bean 进行更改。

# java - 是否有任何扩展 JUnit4 测试类的约定？

> ID：15183669
> 
> 赞同：2
> 
> 时间：2013-03-03T08:02:19.940
> 
> 标签：java, unit-testing, intellij-idea, junit4

我的测试有很多共同的逻辑，所以我决定通过扩展来分享它。我写了两个类：`TestNumberOne`which extends `TestBase`.

*TestBase.java*

```
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;

/**
 * @author Pavel
 * @since 2013-03-03
 */
public class TestBase {

    @BeforeClass
    public static void beforeClass() {
        System.out.println("beforeClass() in TestBase");
        System.out.flush();
    }

    @AfterClass
    public static void afterClass() {
        System.out.println("afterClass() in TestBase");
        System.out.flush();
    }

    @Before
    public void before() {
        System.out.println("before() in TestBase");
        System.out.flush();
    }

    @After
    public void after() {
        System.out.println("after() in TestBase");
        System.out.flush();
    }
} 
```

*TestNumberOne.java*

```
import org.junit.*;

/**
 * @author Pavel
 * @since 2013-03-03
 */
public class TestNumberOne extends TestBase {

    @Test
    public void anyTest() {
        System.out.println("anyTest() in TestNumberOne");
        System.out.flush();
    }
} 
```

当我执行测试时，我得到了如此奇怪的输出：

```
before() in TestBase
anyTest() in TestNumberOne
after() in TestBase
beforeClass() in TestBase
afterClass() in TestBase 
```

为什么它有如此奇怪的顺序？是否有任何扩展 JUnit 测试类的约定？

更新：

1.  测试在 IDEA 中运行
2.  为了得到如此奇怪的结果，我已经运行了几次（其他结果符合预期）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:41:23.073

这绝对是一个 IntelliJ IDEA 问题。

如果我通过 maven 运行您的代码，它运行正常；如果我在 IntelliJ 中运行它几次，那么我有时会像你一样得到不正确的输出。

实际上，我找到了一种重现它的方法：

*   在每条输出消息后添加 Thread.sleep(1000)。
*   在运行测试窗口中关闭“跟踪运行测试”（运行测试列表上方的蓝色圆圈）
*   在 IntelliJ 中运行整个 TestNumberOne 测试类（即使您只有一种测试方法）-> 输出应该是正确的顺序
*   单击测试列表中的 anyTest 方法，然后在 TestNumberOne -> output is in wrong order

（同样，如果您在睡眠状态下运行它，您会看到输出顺序正确，但在测试结束时会重新排序）

因此它们以正确的顺序运行，只有输出混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:37:35.380

当我尝试你的代码时，我得到了预期的输出，即

```
beforeClass() in TestBase
before() in TestBase
anyTest() in TestNumberOne
after() in TestBase
afterClass() in TestBase 
```

（与 Eclipse 一起启动）。这是惯例^^你的结果确实很奇怪......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:40:28.560

不知道任何约定。在 junit 3 中，基类通常是抽象的。

以下似乎以合理的顺序出现（可能除了拆解）。

```
import org.junit.*;
public class BaseTestCase {
    public static String method() {
        return Thread.currentThread().getStackTrace()[2].getMethodName() + "()";
    }
    @BeforeClass public static void classSetupBaseClass() {
        System.out.println(method());
    }
    @AfterClass public static void classTeardownBaseClass() {
        System.out.println(method());
    }
    @Before public void setupBaseClass() {
        System.out.println(method());
    }
    @After public void teardownBaseClass() {
        System.out.println(method());
    }
    @Test public void aTestInBaseClass() {
        System.out.println(method());
    }
}

import static org.junit.Assert.*;
import org.junit.*;

public class  So15183669 extends BaseTestCase {
    @BeforeClass public static void classSetup() {
        System.out.println(method());
    }
    @AfterClass public static void classTeardown() {
        System.out.println(method());
    }
    @Before public void setup() {
        System.out.println(method());
    }
    @After public void teardown() {
        System.out.println(method());
    }
    @Test public void aTest() {
        System.out.println(method());
    }
}

classSetupBaseClass()
classSetup()
setupBaseClass()
setup()
aTest()
teardown()
teardownBaseClass()
setupBaseClass()
setup()
aTestInBaseClass()
teardown()
teardownBaseClass()
classTeardown()
classTeardownBaseClass() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T15:19:28.020

我认为当您运行测试时，您的 TestBase 也作为它自己的 junit 测试运行。尝试将其命名为 HelperBase。

# asp.net-mvc-3 - MVC3 更改网址

> ID：15183670
> 
> 赞同：0
> 
> 时间：2013-03-03T08:02:27.640
> 
> 标签：asp.net-mvc-3, url

我们有一个模块可以生成和存储 PDF 格式的报告。

获取文档的 url 例如如下：

```
https://domain.com/Document/GetDocument?documentId=00000000-0000-0000-0000-000000000000 
```

此 url 将返回一个名为: 的文档`Document_UserName_Date`。

但是，由于有浏览器可以像 Chrome 一样查看 PDF 文件，因此该文档将在具有上述 url 的浏览器选项卡中查看。

因此，当用户尝试将该文档保存在他们的计算机中时，默认文件名（从 url 获取）是：`https___domain.com.pdf`而不是`Document_UserName_Date.pdf`我们预期的。所以我在想，如果我可以将网址更改为：

```
https://domain.com/Document/Document_UserName_Date.pdf 
```

我的问题将得到解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:28:33.957

为了避免文档在浏览器中显示，但用户直接提示下载它，您可以使用将`Content-Disposition`标题设置为`attachment`：

```
Content-Disposition: attachment; filename="Document_UserName_Date.pdf" 
```

这可以通过简单地将文件名作为第三个参数传递给 File 重载来完成：

```
public ActionResult GetDocument(Guid documentId)
{
    byte[] document = GetDocument(documentId);
    return File(document, "application/pdf", "Document_UserName_Date.pdf");
} 
```

* * *

更新：

如果您希望用户在其浏览器中查看内联文档，那么您可以使用路由并定义以下路由：

```
routes.MapRoute(
    "ViewPdfRoute",
    "document/{id}/{name}.pdf",
    new { controller = "Home", action = "GetDocument" }
); 
```

并在您的控制器操作中：

```
public ActionResult GetDocument(Guid id, string name)
{
    byte[] pdf = GetDocument(id);
    return File(pdf, "application/pdf");
} 
```

最后，您可以请求这样的文件：

```
http://domain.com/document/0DF7E254-0576-4BC0-8B05-34FC0F5246A2/document_username_date.pdf 
```

# c++ - 是否可以使用 new 运算符在 C++ 11 中初始化数组

> ID：15183671
> 
> 赞同：3
> 
> 时间：2013-03-03T08:02:50.777
> 
> 标签：c++, arrays, stl, new-operator

大家好，我想像这样在 C++ 中初始化一个数组

`int array[10]={1,2,3,4,5,6,7,8,9,10};`

但我正在使用新的运算符。

我知道我可以像下面那样做，然后迭代并分配值

`shared_ptr<int[]> l (new int[7]);`

但是如果有某种方法可以在新命令期间初始化它，我真的很喜欢

像这样的东西，`shared_ptr<int[]> l (new int[7] ={1,2,3,4,5,6,7});` 但遗憾的是这不是一个有效的语法。

同样在 C++ 11 标准中添加了一个新的 STL 容器数组，有人可以告诉我是使用普通数组还是 STL 数组可以实现

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T08:04:27.487

C++11 为容器提供了一个`initializer_list`像这样工作的容器：

```
std::vector<int> array = {1,2,3,4,5}; 
```

`vector`是动态数组类*。*

* * *

这是您的 shared_ptr 版本：

```
std::shared_ptr<int> ptr(new int[5]{1,2,3,4,5}, std::default_delete<int[]>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:36:39.840

感谢 C++11 和统一初始化，您可以：

```
int main()
{
    int* p = new int[10] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    // ...
    delete[] p;
} 
```

[现场演示](http://ideone.com/4U9zcu)

# cordova - Phonegap Navigator Notification Confirmback 不按顺序工作

> ID：15183672
> 
> 赞同：1
> 
> 时间：2013-03-03T08:02:51.813
> 
> 标签：cordova, notifications

该应用程序有一个删除 dblog 的按钮。当用户点击按钮时，我要求确认，然后继续删除。

我正在使用 navigator.notification.confirm 询问用户

这是我的代码 -

```
function deleteLog()
{

    navigator.notification.confirm(
    "Are you sure you want delete?",
    function(buttonIndex){
        if(buttonIndex==1)
        {
            console.log("User has cancelled");
            return;
        }
    },
    "Confirmation",
    "Cancel, Delete");

    console.log("User has confirmed Delete");

} 
```

但是，即使在用户单击取消或删除之前，我也会收到“用户已确认”消息。我尝试在上面添加一个 else 语句，但仍然没有运气。

有什么问题？

编辑：更多信息 -

我喜欢的顺序是 Single Thread === Press Delete -> Ask for Confirmation -> User Pressed Delete -> Delete dbLog。

发生了什么 按 Delete --> 线程一 == 请求确认线程二（按 Delete 后）--> 删除数据库日志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:46:09.870

通过将console.log（“用户已确认删除”）放在回调之外，您基本上是在告诉程序无论用户按下什么都运行console.log。

我会去掉确认功能以获得更好的可用性，并这样写：

```
function deleteLog() {
    navigator.notification.confirm(
        'Are you sure you want delete?', // message
        onConfirm,                       // callback to invoke with index of button
        'Confirmation',                  // title
        'Cancel,Delete'                  // buttonLabels
    );
}

//on button press, the onConfirm function is called
function onConfirm(button) {
    //console.log('You selected button ' + button);
    if(button == 1){
        //pressed "cancel"
        console.log("User has cancelled");
    }
    else if(button == 2){
        //pressed "delete"
        console.log("User has confirmed Delete");
    }
} 
```

这行得通。

# binding - 如何在 angularjs 的 $scope 中显示关于布尔变量的文本？

> ID：15183673
> 
> 赞同：0
> 
> 时间：2013-03-03T08:03:00.153
> 
> 标签：binding, angularjs

假设我在 $scope 中有一个变量：

> $scope.smsProfile.Active

这可以是真或假，我想在屏幕上显示一个关于它的值的文本。例如，如果为真则显示“配置文件处于活动状态”，如果为假则显示“配置文件未激活”。我怎样才能做到这一点？

我试过这样：

```
{{true:'Profile active', false:'Profile not active'}[$scope.smsProfile.Active]} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T16:41:29.710

使用 ng-hide 和/或 ng-show 指令：

```
<span ng-show="smsProfile.Active">Profile active</span>
<span ng-hide="smsProfile.Active">Profile not active</span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:54:31.933

在控制器中添加一个方法：

```
$scope.smsProfile= {
        Active: true,
        statusText: function () {
            return $scope.foo.Active ? 'active' : 'not active';
        }
    } 
```

然后在表达式中输出方法或`ng-bind`

```
<span>Profile is {{smsProfile.statusText()}}</span> 
```

演示：http: [//jsfiddle.net/zpfq4/](http://jsfiddle.net/zpfq4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-19T13:42:32.597

虽然这有点旧，但我想为任何最终来到这里的人参考这个：

[如何在 angularjs 的 $scope 中显示关于布尔变量的文本？](https://stackoverflow.com/questions/15183673/how-do-i-display-text-in-view-with-respect-to-a-boolean-variable-in-the-scope-i)

另一个示例，使用三元运算符遵循上述帖子的逻辑如下。此示例基于带有切换按钮的复选框列表，用于选择全部或不选择。如果全部选中（长度相同），则选项文本将更改为*Select None*。

```
{{ (selected.length === options.length) ? 'Select None' : 'Select All'}} 
```

按照这个逻辑，上面的代码也可以这样写：

```
{{ (selected.length !== options.length) ? 'Select All' : 'Select None'}} 
```

有关这方面的更多信息，请参阅以下来自 Mozilla 的文章：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)

# javascript - Emberjs - 在 @each 中更改的模型

> ID：15183682
> 
> 赞同：5
> 
> 时间：2013-03-03T08:03:53.033
> 
> 标签：javascript, ember.js

我有一个`ArrayController`观察*每个*模型的特定属性的变化。我`.observes('content.@each.someprop')`为此目的使用：

```
App.ListController = Em.ArrayController.extend({
    content: [],

    myObserver: function () {
        //check changed property
        //do stuff if changed to some specific value
    }.observes('content.@each.someprop')
}); 
```

到目前为止一切顺利 - 当任何模型的属性发生变化时，观察者就会触发。但是，当它触发时，我不知道哪个模型发生了变化——我必须遍历模型并将该属性与存储在其他地方的旧值进行比较才能弄清楚，这是非常笨拙和低效的。我试图检查`arguments`观察者收到的，但它们也没有用：`console.log(arguments)`从观察者内部给出以下内容：`[Class, "content.@each.someprop"]`，并`console.log(arguments[0].toString())`给出`<App.ListController:ember366>`- 控制器本身和属性字符串。

所以我的问题是：有没有办法在观察数组的`@each`属性时知道哪个模型发生了变化？

### 更新

当观察者触发时，我想检查被监视的属性是否已更改为某个特定值，如果是，则执行一些操作。

正如建议的那样，我会检查`itemController`现在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T18:42:26.523

[您可以使用reduceComputed](http://emberjs.com/api/#method_reduceComputed)或[arrayComputed](http://emberjs.com/api/#method_arrayComputed)在当前 ember 中实现此目的。

不过，最好了解您的用例：很可能有比手动创建观察者更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:39:33.623

您可以直接在您可以访问的模型上观察该属性`this`。当您与您一起观察时，`@each`您不应该真正关心特定记录是否发生了变化，而只是某些事情发生了变化。

使用 an`itemController`也是一种选择，但这可能是一种矫枉过正。

# python - Python - 正则表达式“机器学习”

> ID：15183685
> 
> 赞同：4
> 
> 时间：2013-03-03T08:04:22.830
> 
> 标签：python, regex, machine-learning, nlp

我有数千行文本，我需要在其中找到金钱代表，例如：

```
Lorem ipsum dolor sit amet, 100.000,00 USD sadipscing elitr, sed diam nonumy eirmod 
GBP 400 ut labore et dolore magna aliquyam erat, sed diam voluptua. At USD 20 eos et 
accusam et justo duo dolores et 100,000.00 USD  ea rebum. Stet 3,-- USD gubergren, no 
```

Python 脚本应返回转换为美元的金额。（例如 100000USF、400 GBP -> USD 等）

到目前为止，我所做的是手动为数字 - 货币组合创建正则表达式以检索值，然后将货币与数据库进行比较并计算兑换。

然而，这既不是有效的，也不是未来的证明（例如，如果添加了另一种货币）所以我想知道是否有一种有效的机器学习算法，我可以用一些例子“训练”，然后它试图找到 sich “价值 - 货币“组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:40:02.890

如果首字母缩略词是一种货币，人类甚至可以知道吗？如果出现一种新货币，那么它如何与任何其他任意首字母缩写词区分开来？假设您遇到类似“1000 CPU”之类的东西，如果您不知道 CPU 是什么，您如何判断它是（或不是）货币？

您可以使用自然语言处理来查看相关数字周围的上下文，但这需要更多的处理，而且您永远无法确定。

我的观点是：对于这个问题，机器学习是矫枉过正的，如果它甚至适用的话。

当以另一种方式做事更容易和更准确时，为什么要以艰难的方式做事呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T09:17:08.180

您的问题没有明确定义，但不需要机器学习。可能的货币集是有限且小的，货币表示集不能复杂到不能用正则表达式表达。您根本没有使用正则表达式的全部功能。

例如，要匹配多种货币，请使用：

```
 currency = r"((USD)|(GBP)(...))" 
```

然后您可以表达表示的数字部分

```
 numbers = r"([0-9]+[0-9\.,]*)" 
```

编译正则表达式：

```
 matcher = re.compile(numbers+r"[\s]*+"currency) 
```

您可以先创建第二个匹配货币的匹配器。您可能可以对可选的捕获组等使用一些聪明的东西，但如果性能不是一个大问题，我会推荐一个简单的第二个匹配器。

```
 matcher2 = re.compile(currency+r"[\s]*"+numbers) 
```

请注意，不需要手动创建“货币”正则表达式。匹配后，您可以访问相应的组号（1 或 3）以获取匹配的货币。例如：

```
 curren = m.group(1)
    amount = m.group(2) 
```

这是可能的，因为整个“货币”正则表达式被视为一个组。

除非您的输入中有无限的货币表示模式（可能是不可能的），否则您的问题绝对可以使用适当的正则表达式来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:57:31.097

我只会使用正则表达式来粗略地提取可能的对：

```
import re

test = '''Lorem ipsum dolor sit amet, 100.000,00 USD sadipscing elitr, sed diam nonumy eirmod 
GBP 400 ut labore et dolore magna aliquyam erat, sed diam voluptua. At USD 20 eos et 
accusam et justo duo dolores et 100,000.00 USD  ea rebum. Stet 3,-- USD gubergren, no'''

number = r'([\d+.,]+)'
currency = r'([A-Z]{2,3})'

r1 = re.compile(number + r'\s+' + currency)
r2 = re.compile(currency + r'\s+' + number)

matches = r1.findall(test) + r2.findall(test)

print(matches) 
```

我得到：

```
[('100.000,00', 'USD'), ('100,000.00', 'USD'), ('GBP', '400'), ('USD', '20')] 
```

从那里，您可以解析数字并过滤掉不存在的货币。你只有五六种可能的格式，所以机器学习在这里真的无能为力。

# service - 如何检查服务是否停止

> ID：15183686
> 
> 赞同：0
> 
> 时间：2013-03-03T08:04:24.820
> 
> 标签：service, batch-file

我已经完成了一个批处理文件，它可以停止服务、删除文件、安装文件和启动服务。到目前为止，它没有任何问题。但今天它无法安装文件。

经过一番搜索，我发现服务正在停止而不是停止。我正在使用**net stop "Service-Name"**来停止服务。

如何检查服务何时停止或等待它们完全停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:51:46.797

`wmic service where name="Service-Name" get state`将向您显示服务是正在运行还是已停止。您可以循环回该命令并使用 ping 暂停。

```
:running
ping /n 2 0.0.0.0 >NUL
for /f "tokens=2 delims=^=" %%I in ('wmic service where name^="Service-Name" get state /format:list') do (
    if #%%I==#Running goto running
)
rem When the script reaches this line, the service status is not "Running." 
```

或者，如果您更喜欢使用`sc`来确定服务的状态：

```
:running
ping /n 2 0.0.0.0 >NUL
for /f "tokens=4" %%I in ('sc query Service-Name ^| find /i "state"') do (
    if #%%I==#RUNNING goto running
)
rem When the script reaches this line, the service status is not "Running." 
```

我不确定，但服务可能在实际“停止”时说“已停止”，或者在实际“启动”时说“正在运行”。如果是这种情况，那么您最好检查进程列表中是否存在进程。这也可以使用 wmic:`wmic process where name="appname.exe" get name`或类似方法来完成。

# c++ - 编译程序依赖 没有 Visual Studio

> ID：15183691
> 
> 赞同：4
> 
> 时间：2013-03-03T08:04:53.717
> 
> 标签：c++, windows, visual-studio

是否可以编译依赖于的 c++ 程序`windows.h`而无需安装完整的可视化 c++ 包？

我刚刚编写了一些小程序，它调用了`windows.h`（例如`ShellExecute`）中定义的一些函数。

我不想为了编译这么小的东西而安装整个 Visual Studio 包。所以我想知道是否可以只安装最小的包（只是编译器和库）。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:09:42.293

这是可能的，但是您需要获取所有库和头文件。也许您应该安装 express 版本，并选择最小安装。Igonre IDE 本身。

# php - 如何正确引用 css 文件并包含在 php 项目中？

> ID：15183696
> 
> 赞同：1
> 
> 时间：2013-03-03T08:05:35.240
> 
> 标签：php, include

我是 php 新手，知道这是一个很常见的问题。我已经在网上阅读了很多相关的问题，在这里堆栈溢出，但是我无法成功地实现它们。

我有一个目录结构如下的项目：

```
Project/
     includes/
              header.php
              footer.php
              sidebar.php
     css/
              style.css
     index.php
     blog/
              index.php 
```

在根目录的 index.php 中，我像这样拉入包含：

```
include 'includes/header.php'; 
```

header.php 中的 css 文件如下所示：

```
<link rel="stylesheet" href="css/style.css"> 
```

现在这适用于根目录中的 index.php 文件和根目录中的任何其他文件。但是它会中断子文件夹中的所有页面，例如 blog/index.php

我的主要问题是如何正确引用我的 css 文件和项目中的包含，以便二级页面也可以访问这些文件？

注意：
- 我在本地服务器上工作
- 所有项目文件都包含在根目录的 PROJECT 文件夹中 - (localhost:8888/Project/index.php)

任何帮助都感激不尽。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:08:17.437

您需要通过应用程序的根目录引用它。使用以下选项

```
 <link rel="stylesheet" href="/css/style.css">

 <link rel="stylesheet" href="//domain.com/css/style.css">

 include $_SERVER['DOCUMENT_ROOT'].'/includes/header.php'; 
```

您当前拥有的方式不适用于域名根目录之外的任何文件。它正在做的事情如下。

您在[http://example.com/](http://example.com/)并且您的网站包含 css/style.css，因此它附加到域中。在根级别这很好。现在，如果您在[http://example.com/myFile/andFolder](http://example.com/myFile/andFolder)，如果您不包含前导斜杠，它仍然会附加到域...所以现在它正在[http://example.com寻找您的风格/myFile/andFolder/css/style.css](http://example.com/myFile/andFolder/css/style.css)。添加前导斜线是告诉服务器，我想在我的域的根目录中查找它。

我对域名前`<link rel....`两个选项的第二个选项只是通过 https:// 托管它的快速方法，如果这是当前页面所在的位置。`//`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:08:43.837

简单但不是最好的方法是您始终可以链接到绝对路径：（我不推荐）

```
<link rel="stylesheet" href="http://localhost/Project/css/style.css"> 
```

最好有一个具有 base_url 变量的配置文件，并始终通过 base_url 链接您的 css 和其他内容；

# algorithm - 如果您遗漏了一个单词的某些字母，如何确定它是哪个单词？

> ID：15183698
> 
> 赞同：1
> 
> 时间：2013-03-03T08:05:55.613
> 
> 标签：algorithm, artificial-intelligence, complexity-theory, neural-network

假设您正在编写 OST 或网络纠错应用程序。所以你正在处理一个缺少一些字母的单词，比如“*leph*nt”。您将英语词典存储在一个数组中。你如何确定它是哪个词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T08:10:54.810

一种常见的方法是使用由[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)测量的最接近的词。可以任意解决平局，通常使用最大允许距离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T01:56:29.833

计算您的查询和所有字典单词之间的 Levenstein 距离肯定会很慢。

[BLAST](http://en.wikipedia.org/wiki/BLAST)程序对生物序列使用了更好的策略。在 BLAST 中，索引首先建立了一个序列数据库，该数据库将固定长度的小子字符串 K 与包含它们的所有单词的列表相关联。

在查询中，BLAST 在索引中搜索查询字符串中的所有 K 长度子字符串。然后可以扩展查询和索引字符串中的匹配子字符串以快速计算近似 Levenstein 距离，并返回距离低于某个阈值的索引字符串。

# java - 为什么这段代码会生成 ArrayIndexOutOfBoundsException？

> ID：15183699
> 
> 赞同：2
> 
> 时间：2013-03-03T08:05:57.503
> 
> 标签：java, arrays, exception

我在 Java (Android) 中有一段代码偶尔会生成 ArrayIndexOutOfBoundsException。

```
String characterLevel = mCharacterModel.CharacterLevel() >= 
        MessageModel.CharacterLevels.length ? "Hyperion Overlord" : 
        MessageModel.CharacterLevels[mCharacterModel.CharacterLevel()]; 
```

方法 mCharacterModel.CharacterLevel() 始终为 1 或更多。

MessageModel.CharacterLevels 数组定义如下，包含大约 50 个元素。

`public static final String[] CharacterLevels = { "Title", "Title" };`

问题的本质是如果超出数组的大小，则优雅地默认为另一个数据源。

我肯定错过了什么。这是将字符串设置为默认字符串的错误方法吗？

我已经在我能想到的所有地方寻找解决方案，但我担心我只是遗漏了上述逻辑中的一些基本缺陷。

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:26:37.927

您的代码在逻辑上类似于以下内容：

```
int level = mCharacterModel.CharacterLevel();
String[] arr = MessageModel.CharacterLevels;
String characterLevel = level < arr.length ? 
        arr[level] : 
        "Hyperion Overlord"; 
```

如果它在界限内，它显然只会索引到数组中。我不同意关于`-1`数组索引修饰符的其他答案，因为您的逻辑检查应该防止级别对于数组来说太大。

我可以在您的原始代码（或我看不到的东西）中看到可能导致问题的唯一差异是（按可能性顺序）：

1.  您`mCharacterModel.CharacterLevel()`不止一次调用 - 如果后续调用发生变化，则可能是错误的来源。也许第一次调用是 1，第二次调用是 3？
2.  `mCharacterModel.CharacterLevel()`可能会返回一个负数 - 我会添加一个检查以确保它也在`>= 0`索引到数组之前。
3.  `MessageModel.CharacterLevels`可能是在多个线程上访问的东西，并且在长度检查和访问之间被修改，导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:07:39.363

```
String characterLevel = mCharacterModel.CharacterLevel() >= MessageModel.CharacterLevels.length-1 ? "Hyperion Overlord" : MessageModel.CharacterLevels[mCharacterModel.CharacterLevel()]; 
```

这应该可行，长度不是基于 0 的，因此在基于长度计算时应该使用“-1”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:09:07.107

数组索引从 0 开始，因此您可能希望使用：

```
int index = mCharacterModel.CharacterLevel() - 1;
String characterLevel = index >= MessageModel.CharacterLevels.length ? "Hyperion Overlord" : MessageModel.CharacterLevels[index]; 
```

如果该值始终为 1 或更大，则需要从 0 开始。另一个问题 - 您最好不要调用该函数`CharacterLevel()`两次并使用结果。最好将值存储在局部变量中并在两个地方都使用它。

# ocaml - 反编译 OCaml 字节码文件

> ID：15183701
> 
> 赞同：9
> 
> 时间：2013-03-03T08:06:09.540
> 
> 标签：ocaml, decompiling

我正在研究 Ocaml，我需要弄清楚一些二进制文件。我最接近的方法是将 OCaml 字节码转换为使用`ocamlcc`.

我不希望对 C 代码进行逆向工程，除非并且直到我确定我将无法反编译 OCaml 代码。

问题：是否有任何传统方法可以专门为 OCaml 反编译 ML 代码？

（如果问题是抽象的，请道歉。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T10:03:54.470

您也可以`dumpobj`从`tools`分发的目录中使用。它安装在我的 Ubuntu linux 上，名称为`ocamldumpobj`，并将打印字节码文件中包含的指令，格式如下：

```
...
131214  APPLY1 
131215  PUSHCONST1 
131216  LTINT 
131217  BRANCHIF 131225
131219  ACC2 
131220  BRANCHIFNOT 131225
131222  ACC3 
... 
```

你必须了解 OCaml 字节码才能走得更远。没有从字节码到源文件的工具，因为字节码不包含足够的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T09:35:05.560

您是否尝试过打印字节码或 lambda 码？您可以使用 OCaml 的`-dlambda`选项或`-dinstr`。

还有一个非常好的二进制打印机项目：[ocamlpp](http://opam.ocamlpro.com/pkg/ocamlpp.1.0.html)。也许你应该看看。

# html - reveal.js 背景颜色选择

> ID：15183704
> 
> 赞同：7
> 
> 时间：2013-03-03T08:06:24.047
> 
> 标签：html, reveal.js

我一直在使用[reveal.js](http://lab.hakim.se/reveal-js/#/)，您可以使用被称为全局状态的东西更改单个幻灯片的背景，如[演示](http://lab.hakim.se/reveal-js/#/11)中所见。

除了这张幻灯片上提到的颜色（-soothe、-blackout 和-alert）之外，是否还有其他可以应用的颜色（在演示文稿中按下键以查看颜色）？如果有，是什么颜色？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T20:24:08.070

您可以这样做，例如为最终幻灯片设置不同的背景颜色：

声明背景样式（给定类“the-end”）：

```
 html.the-end .state-background {
    background-color: rgba(0,0,0, 0.8);
  } 
```

然后让最终的幻灯片看起来像这样：

```
<section data-state='the-end'>
  <h1>__END__</h1>
  <br>
  <h3>Thank you!</h3>
</section> 
```

**编辑（由 tyler rinker 添加）**你是对的，但我想对未来的搜索者更加明确。我添加了以下两个部分。

**将此添加到reveal.min.css**

```
.orange .reveal .state-background{background:rgba(255,165,0,1)} 
```

**将此添加到reveal.css**

```
.orange .reveal .state-background {
    background: rgba( 255, 165, 0, 1 );
} 
```

# asp.net-mvc - ADFS 中的会话不匹配

> ID：15183709
> 
> 赞同：0
> 
> 时间：2013-03-03T08:06:55.143
> 
> 标签：asp.net-mvc, wif, adfs

我使用 ADFS STS 登录到我的应用程序。

角色和用户大部分时间都在正常工作，但在某些页面上，我得到一些用户不匹配：突然，屏幕右上角的用户名不正确（它是另一个同时登录的用户时间）。

你知道我应该检查什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T04:36:59.887

**评论移入答案**

首先想到的是缓存和缓存变化。我认为缓存控制要么未设置，要么设置为公共，并且没有其他变化意味着您可以从不同的会话中获得响应。

如果您没有在响应中设置私有标头，则应该明确：

```
 HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.Private); 
```

有很多不同的方法来包装例如属性以使更多类似 MVC。MSDN 文档在这里：

[http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cachecontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cachecontrol.aspx)

# c# - 在列表框中搜索要搜索的项目在文本框中的项目，并且没有按钮单击 C#

> ID：15183714
> 
> 赞同：0
> 
> 时间：2013-03-03T08:07:22.223
> 
> 标签：c#, .net, winforms, listbox, windows-forms-designer

说我有一个已经存在项目的列表框，说这些项目是

```
Ant
Adam    
Ball
Cat
Dog
Ear
Frog 
```

列表框上方有一个文本框提示用户搜索

说如果我在文本框**广告**中输入，那么它必须指向 Adam 如果我删除**a**那么它必须指向 Dog 并且不能使用按钮进行搜索

另外，如果我单击列表框中的项**cat**，然后在列表框旁边有一个文本框，上面写着**Hi I'm Cat**

我发现使用文本框显示**Hi I'm Cat**是不正确的，我应该使用什么来显示有关所选项目详细信息的信息。

***自己找到解决方案***

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        int index = listBox1.FindString(textBox1.Text, -1);
        if (index != -1)
        {
            listBox1.SetSelected(index, true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:22:47.287

您需要在`TextChanged`TextBox 的 " " 事件上更新您的列表框。

获取在此事件内的文本框中写入的文本，遍历列表框的项目并执行`Text.Contains`

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
        {
            var current = TextBox1.Text;
            foreach (ListItem item in ListBox1.Items)
            {
                if (item.Text.ToLower().Contains(current.ToLower()))
                    item.Selected = true;
            }
        } 
```

这是您如何获取列表框的选定项目的方法：

```
protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if(ListBox1.SelectedItem!=null)
            {
               Label1.Text =  ListBox1.SelectedItem.Text;
               //or you can dynamically create a label and add it to the page
               Label lbl = new Label();
               lbl.Text=ListBox1.SelectedItem.Text;
               MyContainer.Controls.Add(lbl);
               //where MyContainer is any server side container, HtmlContainerControl  
               //or HtmlControl 
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:22:36.013

它必须是一个列表框吗？如果您改用 ComboBox，则可以使用自动完成功能。例如，将 AutoCompleteMode 设置为“SuggestAppend”，将 AutoCompleteSource 设置为“ListItems”。列表框没有内置该功能，因此您必须自己实现它。

此外，对于它旁边的标签或文本框来说，“嗨，我是猫”.. 或其他.. 使用 SelectedIndexChanged 事件。在那里你可以做这样的事情：

`myLabel.Text = "Hi, I'm " + myComboBox.SelectedItem.ToString()`

# .htaccess - .htacces 文件的最大大小

> ID：15183717
> 
> 赞同：1
> 
> 时间：2013-03-03T08:07:40.680
> 
> 标签：.htaccess

.htaccess 文件的最大大小是多少，这对网站速度有影响吗？因为我有将近 20 多个重写规则和 100 多个 URL 重定向。

# python - Python：如何在同一个文件中调用一个类

> ID：15183718
> 
> 赞同：2
> 
> 时间：2013-03-03T08:07:50.693
> 
> 标签：python

如何从一个类中调用一个函数，在另一个类中，在同一个文件中。我的文件如下所示：

```
class one:
    def get(self):
        return 1

class two:
    def init(self):
        get class one get() 
```

我正在尝试访问第二类中第一类的 get 函数。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T08:09:42.990

`One.get()`如果你把它变成静态方法，你可以直接调用：

```
class One:
    @staticmethod
    def get():
        return 1

class Two:
    def __init__(self):
        val = One.get() 
```

如果没有`@staticmethod`，您需要一个实例`One`才能调用`get()`：

```
class One:
    def get(self):
        return 1

class Two:
    def __init__(self):
        one = One()
        val = one.get() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T08:55:30.010

NPE 的答案是正确的。此外，如果您想按名称（字符串值）调用类，您可以使用下一个解决方案：

```
class_name_type = globals()['class_name']
class_object = class_name_type() 
```

# javascript - focus() 方法在 jquery 中不起作用

> ID：15183719
> 
> 赞同：4
> 
> 时间：2013-03-03T08:07:57.390
> 
> 标签：javascript, jquery

我正在尝试专注于 jquery 中的锚点

我正在使用这些代码：

```
$(textBox).parent().next().find('a').first().focus(); 
```

或者

```
$(textBox).parent().next().find('a')[0].focus(); 
```

但这些代码不起作用

尽管

```
 $(textBox).parent().next().find('a').first() 
```

返回：

```
<a role="menuitem" class=""><strong>101</strong>0320117585</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:17:14.477

看来您的锚需要有一个`href`属性（至少在 Chrome 中）。如果你不需要特别的`href`，你可以使用`href="javascript:void(0);"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:17:36.857

有两件事你应该在那个锚点上有一个 ID 和一个标签索引，并且更喜欢一个负值，它甚至不会在 IE 中是 8：

```
<a href="someWhere" id="someName" tabindex=-1>Click Me!<a/> 
```

# wpf - WPF：Windows 8 Tabtip 关闭？

> ID：15183720
> 
> 赞同：0
> 
> 时间：2013-03-03T08:08:09.883
> 
> 标签：wpf, vb.net, windows-8, keyboard

我一直在搜索，但仍然找不到有关此问题的答案。我设法通过以下代码打开了标签提示的过程：

```
Private Sub TextBox1_GotFocus(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) 处理 TextBox1.GotFocus

Process.Start("C:\Program Files\Common Files\Microsoft Shared\ink\TabTip.exe")

结束子

```

我一直试图杀死这个过程，但它仍然无法正常工作。

但将其退回停靠或关闭。仍然找不到任何答案。这可能吗？希望有人反刍帮助。谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T09:11:10.583

```
/// <summary>
/// Close Touch Keyboard
/// </summary>
public static void CloseTouchKeyboard()
{
    try
    {
        foreach (var p in Process.GetProcessesByName("C:\\Program Files\\Common Files\\microsoft shared\\ink\\TabTip.exe"))
        {
            p.Kill();
        }
    }
    catch (Exception e)
    {
        Logger.Error(e.ToString());
    }
}

/// <summary>
/// Open Touch keyboard
/// </summary>
public static void OpenTouchKeyboard()
{
    try
    {
        Process.Start("C:\\Program Files\\Common Files\\microsoft shared\\ink\\TabTip.exe");
    }
    catch (Exception e)
    {
        Logger.Error(e.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:48:06.787

Process.Close、CloseMainWindow 等对我不起作用，因此发送此消息以关闭键盘。

```
[DllImport("user32.dll")]
public static extern IntPtr FindWindow(String sClassName, String sAppName);

int WM_SYSCOMMAND = 274
uint SC_CLOSE   = 61536
...

IntPtr KeyboardWnd = FindWindow("IPTip_Main_Window", null);
PostMessage(KeyboardWnd , WM_SYSCOMMAND, SC_CLOSE, 0); 
```

感谢[http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/de9b66b5-f1e2-477c-9da2-303982790f63/](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/de9b66b5-f1e2-477c-9da2-303982790f63/)的回答！

# php - PHP：在卷曲标题中发送边界值

> ID：15183725
> 
> 赞同：4
> 
> 时间：2013-03-03T08:09:27.757
> 
> 标签：php, curl

我想在 curl 标头中发送以下数据。

```
Content-Type: multipart/form-data; boundary=---------------------------28854217951032752725060171 
```

我使用了下面的代码，但它似乎不起作用

```
$ch = curl_init();

curl_setopt($ch,CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13");
curl_setopt($ch,CURLOPT_HTTPHEADER,array('Content-Type: multipart/form-data; boundary=---------------------------28854217951032752725060171'));
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch,CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch,CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch,CURLOPT_POST, 1);
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
$result = curl_exec($ch); 
$last = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
$info = curl_getinfo($ch);
return array($result,$last,$info);
curl_close($ch); 
```

发送边界值的正确方法是什么。
Ps : 28854217951032752725060171 是常数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:12:10.443

您无需手动发送此值。Curl 会自己处理这个问题。

**编辑：**

`CURLOPT_POSTFIELDS`可以接受数组，它会自动附加`Content-Type`所需的边界。以下是PHP 文档的[引用](http://php.net/manual/en/function.curl-setopt.php)：

> *如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。*

例如：

```
$data = array(
    'name' => 'Foo',
    'file' => '@/absolute/path/to/some/file'
); 
```

# ember.js - 为什么 Ember 对显式定义的视图有不同的行为？

> ID：15183730
> 
> 赞同：3
> 
> 时间：2013-03-03T08:09:46.280
> 
> 标签：ember.js

使用 Ember 1.0.0-rc.1，我有一个`application`只包含`{{outlet}}`. 我的 ApplicationView 被明确定义为利用布局和自定义类用于 CSS 目的：

```
define ["ember"], (Ember) ->
  ApplicationView = Ember.View.extend
    classNames: ["application"]
    layoutName: "layout"

  ApplicationView 
```

我的路由器设置了两条路由；调用它们`tab1`和`tab2`，并使用要匹配的模板名称。但是，我没有为这些明确定义视图或控制器，而是更喜欢利用 Ember 的“魔法”。我的期望是，当路由器转到时`/tab1`，`tab1`模板将呈现到 ApplicationView 中`{{outlet}}`；与 相同`/tab2`。

当我运行应用程序时，tab1 模板确实呈现并且元素如下所示：

```
<body class="ember-application">
    <div id="ember229" class="ember-view application">
        <div class="navbar navbar-inverse navbar-fixed-top">...</div>  <!-- layout -->
        <div class="wrapper"> <!-- layout -->
            <script id="metamorph-1-start" type="text/x-placeholder"></script>
            <script id="metamorph-0-start" type="text/x-placeholder"></script>
            Tab 1 Content
            <script id="metamorph-0-end" type="text/x-placeholder"></script>
            <script id="metamorph-1-end" type="text/x-placeholder"></script>
etc. 
```

`/tab1`当我在and之间来回移动时`tab2`，内部变形数上升：0、2、3、4 等。接下来，我像这样明确定义 Tab1View：

```
define ["ember"], (Ember) ->
  Tab1View = Ember.View.extend
    templateName: "tab1"

  Tab1View 
```

我预计这将等同于隐含的“魔术”，因为我在这里没有做任何特别的事情，并且一切都显示相同。但是，DOM 元素不再相同：

```
<body class="ember-application">
    <div id="ember229" class="ember-view application">
        <div class="navbar navbar-inverse navbar-fixed-top">...</div>
        <div class="wrapper">
            <script id="metamorph-0-start" type="text/x-placeholder"></script>
            <div id="ember265" class="ember-view">
                Tab 1 Content
            </div>
            <script id="metamorph-0-end" type="text/x-placeholder"></script>
etc. 
```

现在只有一组变形元素（`{{outlet}}`我假设代表 ）和一个新的`ember-view`div。这里发生了什么？为什么显式的 View 定义会导致 DOM 中的不同行为？这是重要的还是只是 Ember 内部的一些我不应该担心的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:59:23.997

一个视图代表一个实际的 DOM 元素，默认情况下是一个`div`. 当您提供`Tab1`自己的视图并将其附加到 DOM 时，Ember 必须实际插入一个新标签来表示它。这`ember265`就是您在 html 的最后一个块中看到的标签。您可以通过`tagName`视图的属性更改标签的类型，但不能省略它。

**编辑：**

Ember 创建的隐式视图是虚拟视图。它们实际上有一个真实的`isVirtual`属性，不渲染为元素，并且不能被`parentView`or访问`childViews`。这也是任何车把绑定的情况。[指南中](http://emberjs.com/guides/understanding-ember/the-view-layer/#toc_virtual-views)有一些信息。您还可以在[代码](https://github.com/emberjs/ember.js/blob/526f588870e5833a70c4133b4c13ed94fe751a9f/packages/ember-handlebars/lib/views/metamorph_view.js#L79)中看到`Ember._Metamorph`如何`Ember._MetamorphView`定义为虚拟和无标记。

# javascript - 谷歌文档中电子表格背后的网格是什么？

> ID：15183735
> 
> 赞同：3
> 
> 时间：2013-03-03T08:10:43.127
> 
> 标签：javascript, google-closure

厌倦了各种半可用的网格，我真的很想把手放在 Google Docs 中电子表格后面的网格/表格组件上。

我真正热衷的是使用键盘导航的能力、直观的就地编辑和对复杂编辑器的支持（比如日期选择器，它确实看起来像来自 Closure 的那个）。

它是否有机会作为开源提供？

# c# - 如何使用 C# 通过输入文本文件计算总经过时间？

> ID：15183740
> 
> 赞同：0
> 
> 时间：2013-03-03T08:11:26.947
> 
> 标签：c#

我想在“WX GSA 搜索”中计算总“经过时间”。以下是我的日志文件：

> WX 搜索 = 服务器：nomos-scanner.corp.adobe.com 用户：vibsharm appGUID：wx 已用时间：875 毫秒 SaveSearchID：361 WX GSA 搜索 = 服务器：nomos-scanner.corp.adobe.com 用户：gulanand appGUID：wx 已用时间：890 毫秒 SaveSearchID：361 WX GSA 搜索 = 服务器：nomos-scanner.corp.adobe.com 用户：vibsharm appGUID：wx 已用时间：887 毫秒 SaveSearchID：361 WX GSA 搜索 = 服务器：nomos-scanner.corp.adobe.com 用户： gulanand appGUID: wx Elapsed Time:875.5ms SaveSearchID:361 WX GSA Search = Server:nomos-scanner.corp.adobe.com 用户:vibsharm appGUID: wx Elapsed Time:877.6ms SaveSearchID:361

我写的代码但不工作。请检查正则表达式是否正常：

```
string searchKeyword = "WX GSA Search";
string fileName = @"C:\Users\karan\Desktop\Sample log file.txt";
string[] textLines = File.ReadAllLines(fileName);

List<string> results = new List<string>();

foreach (string line in textLines)
{
    if (line.Contains(searchKeyword))
    {
        results.Add(line);
    }
}

string x = string.Join(",",results);

List<string> users = new List<string>();
Regex regex = new Regex(@"Elapsed Time:\s*(?<timevalue>.*?)+ms");
MatchCollection matches = regex.Matches(x);

foreach (Match match in matches)
{
    var user = match.Groups["value"].Value;
    if (!users.Contains(time)) users.Add(time);
}

string[] s = users.ToArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:17:08.510

如果你唯一的问题是正则表达式，试试这个。

```
Regex re = new Regex(@"Elapsed Time:(?<timevalue>\d+(?:\.\d)?)ms"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:19:27.603

好吧，您的正则表达式并非完全无效，但可以改进。

例如：

```
Regex regex = new Regex(@"Elapsed Time:\s*(?<value>\d+\.?\d*)\s*ms"); 
```

“ms”之前的“+”意味着任意数量的字符应该重复一次或多次 - 然后它会尝试任何可能的组合以使其最适合，这需要时间。

我改变了 *.? 到 \d+.?\d* 只接受带有可选小数的数值。

我还将 (?< timevalue>... 更改为 (?< value>... 所以它与您的代码示例匹配。

祝你的任务好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T09:43:30.043

您可以使用`String.Split`and 一点`Linq`来解析 Elapsed time；

```
 TimeSpan elapsedTime = TimeSpan.FromMilliseconds(File.ReadAllLines("c:\\log.txt")
        .Where(line => line.Contains("Elapsed Time:"))
        .Select(line => line.Split(new string[] { "Elapsed Time:"}, StringSplitOptions.RemoveEmptyEntries).Last().Split(' ').First())
        .Select<string,double>(time => time.EndsWith("ms") ? double.Parse(time.Replace("ms","").Trim()) 
                                     : time.EndsWith("s") ? double.Parse(time.Replace("s","").Trim()) * 1000.0 : 0.0 ).Sum()); 
```

# mysql - 在 EAV 结构化数据模型中搜索实体

> ID：15183741
> 
> 赞同：2
> 
> 时间：2013-03-03T08:11:27.070
> 
> 标签：mysql, sql, entity-attribute-value

我正在尝试在使用实体属性值模型来存储对象的数据库中进行搜索。有人可以告诉我下面的查询有什么问题吗？

```
SELECT * FROM object a
   INNER JOIN object_meta b
   ON a.id = b.object 
WHERE
   a.name LIKE '%michael%' AND
   b.name='type' AND b.value='judge'
   AND ( 
      (b.name='country' AND b.value='France') 
      OR  
      (b.name='country' AND b.value='Sweden')
   ) 
ORDER BY a.name DESC
LIMIT 0, 50; 
```

在这种情况下，我想选择名称包含“michael”并且属于类型 Judge 并且来自瑞典或法国的对象。我可以看到它在浏览数据库时存在与查询匹配的对象，但在我运行查询时没有任何结果。我正在通过命令行运行查询，因此它与应用程序代码无关。

**表结构**

```
object
+----+------------+
| id | name       |
+----+------------+
|  1 | Michael... |
|  2 | Michael... | 
+----+------------+

object_meta
+--------+---------+-----------+
| object | name    | value     |
+--------+---------+-----------+
|   1    | type    | judge     |
|   2    | type    | judge     |
+--------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T08:48:05.243

您的查询返回一个空集，因为 JOIN 中没有可以同时满足这两个条件的行 `b.name='type' AND b.name='country'`

试试这个：

```
SELECT * FROM object a
   INNER JOIN object_meta b
   ON a.id = b.object 
WHERE
   a.name LIKE '%michael%' AND
   b.name='type' AND b.value='judge'
   AND EXISTS( SELECT 1 FROM object_meta b1 
               WHERE b1.[object]=b.[object] AND ( b1.name='country' AND (b1.value='France' OR b1.value='Sweden'))

   ) 
ORDER BY a.name DESC
LIMIT 0, 50; 
```

# ios - 如何将子视图与父视图的中心对齐？

> ID：15183742
> 
> 赞同：1
> 
> 时间：2013-03-03T08:11:33.397
> 
> 标签：ios, ios6

我创建了一个CenterContainerView，其中包含imageViews，在我将imageView添加到CenterContainerView之后，CenterContainerView的子视图会自动对齐到中心，我不知道如何实现它，我想可能是我应该使用autoresizing mask来做到这一点，对？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T08:27:20.650

要将子视图与 superView 的中心对齐，请使用视图的 center 属性。

`imageView.center = CenterContainerView.center`;

# java - 检查java类循环中的变量和语句依赖关系

> ID：15183746
> 
> 赞同：2
> 
> 时间：2013-03-03T08:12:07.680
> 
> 标签：java, multithreading

假设我有一个 java 方法（例如数组添加）

```
public void mymethod() {   
  { 
   //i have some global arrays named a, b & c
  for(int i=0;i<10;i++)
     a[i]=b[i]+c[i];     //no dependency exists
  } 
```

在这里，如果我将此循环转换为 2 个单独的循环并使用两个线程运行。结果将是准确的。但在下面给出的情况下

```
public void mymethod() {   
  { 
   //i have some global arrays named a, b
  for(int i=0;i<10;i++)
     a[i]=b[i]+a[i-1];           //a[i] dependent on a[i-1]
  } 
```

a[i] 的下一个值取决于 a[i-1] 的前一个值。因此循环中存在依赖关系，并且不能仅通过将循环分成两个单独的循环来并行化。

所以我的问题；

**是否有任何 JAVA 类/工具/包等可以在循环中检查这种类型的依赖关系**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:18:24.403

您可以查看[JDepend](http://clarkware.com/software/JDepend.html)或找到任何其他 java 代码分析工具。

# windows - 通过命令行运行 .exe 安装程序（在 Windows 上） - 并让它自动按“下一步”

> ID：15183748
> 
> 赞同：0
> 
> 时间：2013-03-03T08:12:23.720
> 
> 标签：windows, shell, command-line, exe

我想为某些软件的安装程序运行 .exe 命令，并且每次安装程序要求它时都会按下“下一步”按钮的“某物”。

运行.exe时是否可以通过命令来命令它？

如果不是，那么可以完成此任务的最简单（编程）工具是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:15:47.887

查看[AutoIt](http://www.autoitscript.com/site/autoit/)。这是一组非常简单的工具，专为您的任务而设计。

# android-layout - setcontentview 和 findViewById 无法在布局中找到 xml 和 ID

> ID：15183760
> 
> 赞同：0
> 
> 时间：2013-03-03T08:14:59.793
> 
> 标签：android-layout

我们正在尝试在 Eclipse 中编译开源项目。（项目、源代码等已上传）。但是在 setContentView(R.layout.private_chat); 行中出现错误

private_chat 给出错误：“ private_chat 无法解析或不是字段 - 行断点：PrivateChat [行：435] - onCreate”

尽管 private_chat.xml 文件存在于资源目录中。任何人都可以帮助我如何进一步调试问题，或者为什么它无法识别 xml 文件，尽管它存在于项目中。

提前致谢！！！，

问候，桑迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:01:01.350

删除行：

```
import android.R; 
```

并将其替换为您项目的 R 文件。

删除 android.R 后，按 CTRL+Shift O 应该会弹出一个对话框，其中包含两个选项。

# java - 如何使用扫描仪检查行尾？

> ID：15183761
> 
> 赞同：10
> 
> 时间：2013-03-03T08:15:07.323
> 
> 标签：java, java.util.scanner

我搜索了类似的问题，但没有任何帮助。

考虑一个文件：

> 你好你好吗？
> 当时你在哪里？

我想在每一行结束后做一些操作。如果我使用`next()`它不会告诉我何时到达第一行的末尾。

我也见过`hasNextLine()`，但它只告诉我是否存在另一条线。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T08:16:15.043

考虑使用多个扫描仪，一个用于获取每一行，另一个用于在您收到后扫描每一行。我必须给出的唯一警告是，您必须确保在使用完内部 Scanner 后关闭它。实际上，您需要在使用完*所有*Scanner 后关闭它们，尤其是内部 Scanner，因为它们会累加并浪费资源。

例如，

```
Scanner fileScanner = new Scanner(myFile);
while (fileScanner.hasNextLine()) {
  String line = fileScanner.nextLine();

  Scanner lineScanner = new Scanner(line);
  while (lineScanner.hasNext()) {
    String token = lineScanner.next();
    // do whatever needs to be done with token
  }
  lineScanner.close();
  // you're at the end of the line here. Do what you have to do.
}
fileScanner.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:47:26.407

您可以逐行扫描文本并使用方法将每一行拆分为标记`String.split()`。这样你就知道一行何时结束，并且每一行都有所有标记：

```
Scanner sc = new Scanner(input);
while (sc.hasNextLine()){
    String line = sc.nextLine();
    if (line.isEmpty())
        continue;
    // do whatever processing at the end of each line
    String[] tokens = line.split("\\s");
    for (String token : tokens) {
        if (token.isEmpty())
            continue;
        // do whatever processing for each token
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-04T09:23:40.600

You can use Scanner and the method you mentioned:

```
 Scanner scanner = new Scanner(new File("your_file"));
        while(scanner.hasNextLine()){
            String line = scanner.nextLine();
            // do your things here
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T09:16:40.133

当我阅读本文时，不确定这是否相关或为时已晚。我对 Java 比较陌生，但是当我遇到类似问题时，这似乎对我有用。我只是使用了一个 DO-WHILE 循环和一个文件结束符，由一个简单的字符串表示。

```
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;`enter code here`

public class Main {
    public static void main(String[] args) {
        List<String> name = new ArrayList<>();
        Scanner input = new Scanner(System.in);
        String eof = "";

        do {
            String in = input.nextLine();
            name.add(in);
            eof = input.findInLine("//");
        } while (eof == null);

        System.out.println(name);
     }
} 
```

# c# - C# XNA 2D 平台跳跃逻辑

> ID：15183762
> 
> 赞同：3
> 
> 时间：2013-03-03T08:15:17.013
> 
> 标签：c#, xna, 2d

我正在开发一个 2D 平台游戏作为学习实验，目前在跳跃逻辑方面遇到了一些问题。我知道重力应该应用到玩家身上，这会影响跳跃和下降的过程。这是我目前实现它的方式。

`isJumping`只是`bool`我用来知道玩家应该向上还是向下以及他们当前是否处于中间跳跃状态，因此他们不会再次跳跃。

`spriteJumpPosition`是我用来限制玩家跳多高的值（默认为 0，上限为 10 是硬编码的）。

```
void UpdateGravity()
    {
        // Check if player is currently jumping
        if (isJumping == true)
        {
            if (spriteJumpPosition < 10)
            {
                spritePosition.Y += (float)gravity;
                spriteJumpPosition += gravity;
            }
            else if ( spriteJumpPosition >= 10 )
            {
                isJumping = false;
                spritePosition.Y -= (float)gravity;
                spriteJumpPosition -= gravity;
            }
        }
        else if ( isJumping == false )
        {
            if (spriteJumpPosition > 0)
            {
                spriteJumpPosition -= (int)gravity;
                spritePosition.Y -= (float)gravity;
            }
        }
    } 
```

使用上面的代码，当前的行为是玩家向下移动一点（可能是 2-3 帧）然后开始向上移动，`isJumping = false`并且永远不会停止。我在这里做错了什么？这只是完全错误的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T09:30:55.660

恐怕完全错了。你知道**位置**、**速度**和**加速度**吗？

速度是位置随时间的变化。加速度是速度随时间的变化。重力是一种向下的加速度，因此物体下落时会变得更快。

以下是一些可能有助于说明该概念的代码：

```
Vector2 position;
Vector2 velocity;
readonly Vector2 gravity = new Vector2(0, -9.8f);

// Update:
float time = (float)GameTime.ElapsedGameTime.TotalSeconds;
velocity += gravity * time;
position += velocity * time; 
```

如果您使用此代码向上拍摄一个物体，您可以获得（非常）逼真的轨迹。这是一个很好的跳跃起点。

开始跳跃的最简单方法是在按下跳跃键时增加一些向上的速度。上面的代码将使角色恢复原状。

然而值得注意的是，优秀的平台游戏采用了很多技巧来让跳跃感觉更好。尤其是跳跃的高度可以通过按下跳跃按钮的时间来调节。通过让玩家立即开始向下移动，让这种感觉反应灵敏是很重要的。一个快速的方法是将速度设置为零并在玩家向下移动时施加额外的重力。但这确实是您必须调整的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:01:58.253

您使用什么进行碰撞检测/响应？那会有点影响。但是，您至少需要速度和位置。一个例子可能是：

```
class Player 
{
    Vector2 Position;
    Vector2 Velocity;
}

// in the constructor:

Position = new Vector2 (YOUR POSITION HERE);
Velocity = Vector2.Zero; 
```

然后你添加`Velocity`到`Position`每个时间步（创建一个`Player.Update()`方法并从你的默认`Update`方法中调用它）。然后当你想移动时，添加到`Velocity`每个时间步。例如，检测何时按下右键并添加`0.5f`到`X`. `Velocity`对左键执行相反的操作（减去它），并修改`Y`向上和向下。这将产生滑动效果，就像在冰上一样。对于重力，只需在每个时间步的 Y 部分添加少量，即可使玩家“跌倒”。

为了让玩家跳跃（最简单的方法），只需将`Y`速度设置为`-5`或按下空间时设置。如前所述，由于您的“重力”，角色会向上移动，并最终跌落。

# windows-phone-7 - Windows Phone 应用程序的应用程序生命周期：数据何时会丢失？

> ID：15183764
> 
> 赞同：0
> 
> 时间：2013-03-03T08:15:52.523
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, application-lifecycle

我想问一些关于 Windows Phone 应用程序生命周期的问题

我阅读了更多关于这个主题的文章，但我无法得到一些观点：

1-为什么我要在应用程序被停用之前保存数据，因为它会在内存中？如果它终止，那只是预期吗？

2-休眠状态和墓碑状态作为两者的电话保存状态有什么区别？在墓碑的情况下是否只有5个应用程序的限制？

3-最后，当应用程序的数据已经处于哪个状态以及何时触发事件时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:13:56.610

1.  是的。该应用程序可能会被终止/墓碑化，您将没有机会处理它。

2.  来自 MSDN 文档：“已终止墓碑应用程序，但操作系统保留有关其导航状态的信息，并保留应用程序在停用期间填充的状态字典。”

    不同之处在于，停用的应用程序将所有信息保留在内存中，但暂停执行，而墓碑应用程序也会从内存中删除应用程序，仅在字典和当前页面中保留少量状态信息。

3.  我不太明白这个问题。就墓碑化而言，您应该假设在 Application_Deactivated 事件触发后数据已消失，因为此后您可能随时会被墓碑化。结果可能是您被重新激活并且没有被墓碑化，在这种情况下，您在停用之前的记忆状态被保留。

# c++ - 无法使用对类型键设置映射值

> ID：15183772
> 
> 赞同：0
> 
> 时间：2013-03-03T08:16:30.150
> 
> 标签：c++, dictionary, compiler-errors, stl

```
#include <vector>
#include <map>
#include <algorithm>
using namespace std;
class NodePoint {
  public:
  int x, y;
  NodePoint (int i, int j){x=i; y=j;}
  NodePoint (){}
  bool operator == (const NodePoint &rhs) { return (x == rhs.x && y == rhs.y); };
  bool operator != (const NodePoint &rhs) { return (x != rhs.x || y != rhs.y); };
};
class Link {
  public:
  Link (){}
};
int main() {
  vector < vector <NodePoint> > nodes;
  map < pair < NodePoint, NodePoint > , Link > node_links;
  int sol_row_size = 10, sol_col_size = 10, i, j;
  for(i=0; i<sol_row_size; i++) {
    vector < NodePoint > tn;
    for(j=0; j<sol_col_size; j++) tn.push_back(NodePoint(i,j));
    nodes.push_back(tn);
  }
  for(i=0; i<sol_row_size; i++) {
    for(j=0; j<(sol_col_size-1); j++) {
      node_links[make_pair(nodes[i][j], nodes[i][j+1])] = Link();
    }
  }
  return 0;
} 
```

在上面的程序中，我只是尝试创建一个调用的映射`node_links`，其键将是一对 2 个输入节点，但是我得到了大量的编译错误（并且没有指出我的代码中的某些行）而且我并不多习惯了cpp，有什么帮助吗？我究竟做错了什么？

编译错误如下：

```
$ g++ temp.cpp -o temp;
In file included from /usr/include/c++/4.6/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.6/vector:61,
                 from temp.cpp:1:
/usr/include/c++/4.6/bits/stl_pair.h: In function ‘bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&) [with _T1 = NodePoint, _T2 = NodePoint]’:
/usr/include/c++/4.6/bits/stl_function.h:236:22:   instantiated from ‘bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = std::pair<NodePoint, NodePoint>]’
/usr/include/c++/4.6/bits/stl_map.h:452:2:   instantiated from ‘std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const key_type&) [with _Key = std::pair<NodePoint, NodePoint>, _Tp = Link, _Compare = std::less<std::pair<NodePoint, NodePoint> >, _Alloc = std::allocator<std::pair<const std::pair<NodePoint, NodePoint>, Link> >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = Link, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = std::pair<NodePoint, NodePoint>]’
temp.cpp:35:55:   instantiated from here
/usr/include/c++/4.6/bits/stl_pair.h:209:62: error: no match for ‘operator<’ in ‘__x.std::pair<NodePoint, NodePoint>::second < __y.std::pair<NodePoint, NodePoint>::second’
/usr/include/c++/4.6/bits/stl_pair.h:209:62: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:207:5: note: template<class _T1, class _T2> bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.6/bits/stl_iterator.h:291:5: note: template<class _Iterator> bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:341:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/stl_vector.h:1290:5: note: template<class _Tp, class _Alloc> bool std::operator<(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
/usr/include/c++/4.6/bits/stl_tree.h:866:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator<(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_map.h:899:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator<(const std::map<_Key, _Tp, _Compare, _Alloc>&, const std::map<_Key, _Tp, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_multimap.h:817:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator<(const std::multimap<_Key, _Tp, _Compare, _Alloc>&, const std::multimap<_Key, _Tp, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_pair.h:209:62: error: no match for ‘operator<’ in ‘__y.std::pair<NodePoint, NodePoint>::first < __x.std::pair<NodePoint, NodePoint>::first’
/usr/include/c++/4.6/bits/stl_pair.h:209:62: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:207:5: note: template<class _T1, class _T2> bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.6/bits/stl_iterator.h:291:5: note: template<class _Iterator> bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:341:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/stl_vector.h:1290:5: note: template<class _Tp, class _Alloc> bool std::operator<(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
/usr/include/c++/4.6/bits/stl_tree.h:866:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator<(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_map.h:899:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator<(const std::map<_Key, _Tp, _Compare, _Alloc>&, const std::map<_Key, _Tp, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_multimap.h:817:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator<(const std::multimap<_Key, _Tp, _Compare, _Alloc>&, const std::multimap<_Key, _Tp, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_pair.h:209:62: error: no match for ‘operator<’ in ‘__x.std::pair<NodePoint, NodePoint>::first < __y.std::pair<NodePoint, NodePoint>::first’
/usr/include/c++/4.6/bits/stl_pair.h:209:62: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:207:5: note: template<class _T1, class _T2> bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.6/bits/stl_iterator.h:291:5: note: template<class _Iterator> bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:341:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/stl_vector.h:1290:5: note: template<class _Tp, class _Alloc> bool std::operator<(const std::vector<_Tp, _Alloc>&, const std::vector<_Tp, _Alloc>&)
/usr/include/c++/4.6/bits/stl_tree.h:866:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator<(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_map.h:899:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator<(const std::map<_Key, _Tp, _Compare, _Alloc>&, const std::map<_Key, _Tp, _Compare, _Alloc>&)
/usr/include/c++/4.6/bits/stl_multimap.h:817:5: note: template<class _Key, class _Tp, class _Compare, class _Alloc> bool std::operator<(const std::multimap<_Key, _Tp, _Compare, _Alloc>&, const std::multimap<_Key, _Tp, _Compare, _Alloc>&) 
```

更新 1

我已将以下内容添加到 NodePOint 类

```
bool operator < (const NodePoint &rhs) {
    return (x < rhs.x || (x == rhs.x && y < rhs.y));
}; 
```

我收到以下错误：

```
In file included from /usr/include/c++/4.6/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.6/vector:61,
                 from temp.cpp:1:
/usr/include/c++/4.6/bits/stl_pair.h: In function ‘bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&) [with _T1 = NodePoint, _T2 = NodePoint]’:
/usr/include/c++/4.6/bits/stl_function.h:236:22:   instantiated from ‘bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = std::pair<NodePoint, NodePoint>]’
/usr/include/c++/4.6/bits/stl_map.h:452:2:   instantiated from ‘std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const key_type&) [with _Key = std::pair<NodePoint, NodePoint>, _Tp = Link, _Compare = std::less<std::pair<NodePoint, NodePoint> >, _Alloc = std::allocator<std::pair<const std::pair<NodePoint, NodePoint>, Link> >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = Link, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = std::pair<NodePoint, NodePoint>]’
temp.cpp:37:55:   instantiated from here
/usr/include/c++/4.6/bits/stl_pair.h:209:62: error: passing ‘const NodePoint’ as ‘this’ argument of ‘bool NodePoint::operator<(const NodePoint&)’ discards qualifiers [-fpermissive]
/usr/include/c++/4.6/bits/stl_pair.h:209:62: error: passing ‘const NodePoint’ as ‘this’ argument of ‘bool NodePoint::operator<(const NodePoint&)’ discards qualifiers [-fpermissive]
/usr/include/c++/4.6/bits/stl_pair.h:209:62: error: passing ‘const NodePoint’ as ‘this’ argument of ‘bool NodePoint::operator<(const NodePoint&)’ discards qualifiers [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:19:08.447

您需要定义`operator<`on `NodePoint`，以便可以订购您的节点对（根据`std::pair<NodePoint, NodePoint>`自动`operator<`为您定义`NodePoint::operator<`）

大概你想要类似的东西：

```
bool operator <(const NodePoint &rhs) const {
    return (x < rhs.x || (x == rhs.x && y < rhs.y));
}; 
```

**编辑**添加`const`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:19:01.163

为了使用`std::map`，第三个模板参数默认为`std::less<KeyType>`，因此您的类必须提供`operator<`或它自己的比较器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T08:50:07.497

您需要为您的映射键定义 < 运算符作为其中之一

1.  会员 - 在您的情况下不可能

2.  全局（或命名空间范围），

    typedef std::pair < NodePoint, NodePoint > NodePointPair;

    bool operator<(const NodePointPair&, const NodePointPair& ) { .... }

3.- 作为函子 - 然后是地图中的第三个参数，带有您的函子的名称。为读者练习。

# javascript - ng-repeat、$index 和偏移问题？

> ID：15183773
> 
> 赞同：0
> 
> 时间：2013-03-03T08:16:34.223
> 
> 标签：javascript, angularjs

```
<ul class="stream-informer-short-list">
  <li class="stream-informer-short-list-item" ng-repeat="streamer in streamerItems">
     <a href="stream.html"><img src="{{streamer.imageUrl}}"></a>
  </li>
</ul> 
```

我如何使用 $index 来抵消前 X 个项目？{{streamer.imageUrl[$index+4}} - 工作不正确。或者我必须为此操作编写过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:54:44.440

ng-switch 可以与 $index 一起使用，以允许 ng-repeat 项目具有不同的 HTML：

```
<ul class="stream-informer-short-list">
  <li class="stream-informer-short-list-item" ng-repeat="streamer in streamerItems">
     <span ng-switch on="$index <= 4">
       <a ng-switch-when="true" href="stream.html">
          <img src="{{streamer.imageUrl[$index+4]}}"></a>
       <a ng-switch-default href="stream.html">
          <img src="{{streamer.imageUrl[$index]}}"></a>
     </span>
  </li>
</ul> 
```

# c# - 文件存在特殊文件夹在 Windows 7 上不起作用

> ID：15183774
> 
> 赞同：0
> 
> 时间：2013-03-03T08:16:35.450
> 
> 标签：c#, windows-7, windows-server-2008, filepath, windows-applications

我使用 Environment.GetFolderPath(Environment.SpecialFolder 从路径 + 文件名设置字符串变量，该文件没有任何扩展名在 windows server 2003 和 xp 上正常工作，但在 windows 7 和 windows server 2008 上不工作

```
var path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), "testxyz");

if (File.Exists(path))            
{return true;}
else
{return false;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:28:47.530

请检查两件事：

*   应用程序是否有权访问系统目录？
*   这个文件夹中的文件真的存在吗？

工作示例（win7 32 位）：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;

namespace testPath
{
    class Program
    {
        static void Main(string[] args)
        {
            var path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), "main.cpl");
            Console.WriteLine(File.Exists(path));
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:41:05.160

Windows 7 或 2008 服务器 x64 平台在 .net 中有两个文件夹 system32 和 systemWOW32 特殊文件夹类返回 systemWOW64 作为 system32 ，当我们使用 specialfolder.system 时。返回系统WOW64。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:47:15.237

如果你的进程没有权限，`File.Exists`将返回 false 并且不抛出异常。

尝试打开或枚举本地目录中的文件以查看是否获得`UnauthorizedAccessException`.

# android - 如何在 IntelliJ 中添加多个本机库 (.so) 文件

> ID：15183779
> 
> 赞同：7
> 
> 时间：2013-03-03T08:17:26.420
> 
> 标签：android, android-ndk, intellij-idea, shared-objects

我有两个 3rd 方本机库，比如说`libfoo.so`和`libbar.so`. 我很难加载这两个库。我已将它们复制到`libs`适当的 CPU 架构（armeabi、mips 和 x86）下的文件夹中，并将***Project Structure>Modules>Android>Structure***`libs`下的 Native 目录设置为指向此 libs 文件夹。我只能加载一个库，而不能加载另一个。如果我尝试一次加载一个（删除其他库），它运行良好。我得到的例外是：

 *```
java.lang.UnsatisfiedLinkError: Couldn't load foo from loader dalvik.system.PathClassLoader 
```

我应该怎么做才能让 IntelliJ 或 Android 运行时找到这两个本机库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T02:52:51.380

完全可以加载多个本机库。只需将它们复制到 /libs/CPU_ARCH/ 目录中。但是，所有库都需要具有相同的架构。如果说 libfoo.so 是 armeabi 而 libbar.so 是 x86，那么只会复制一个（在我前段时间的试验中）。

然后你可以加载它：

```
static {
    //the following 3 are identical
    //System.load(context.getApplicationInfo().dataDir + "/lib/libfoo.so");
    //Runtime.getRuntime().load(context.getApplicationInfo().dataDir + "/lib/libfoo.so");
    System.loadLibrary("foo");

    System.loadLibrary("bar");
} 
```

如果 System.loadLibrary() 失败，那么您可以尝试使用 System.load() 或 Runtime.getRuntime().load() 加载完整路径*

# ruby - 具有三层深度连接的范围

> ID：15183785
> 
> 赞同：0
> 
> 时间：2013-03-03T08:18:14.487
> 
> 标签：ruby, ruby-on-rails-3.2, rails-activerecord

我的`Program`桌子有很多`Measures` 我的`Measure`桌子有很多`Targets` 我的`Target`桌子有一个名为“**钱**”的列

我的 ActiveRecord 查询如下所示：

```
@programs2 = Program.includes([measures: :target]).where('organization_id = 1').limit(2) 
```

我想定义一个范围，以便查询可以返回其 target.money 值最低的顶级程序。所以我需要编写一个范围并将其应用于该查询，但是我应该如何以及在模型中的何处定义该范围，就像这样？好吧，这行不通，但这就是我所知道的。

```
scope :top5, :joins => [:measures, :targets]  ,  :order => "money DESC" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:15:48.950

一个 Program 的 target.money 是什么，这个 Program 的所有措施的所有 Targets.money 的总和？

您可以尝试以下方法：

```
Target.order_by( :money => :desc ).map{|target| target.measure }.map{|measure| measure.program }.uniq 
```

祝你好运

# filesystems - 检索 ReFS 完整性流校验和

> ID：15183787
> 
> 赞同：3
> 
> 时间：2013-03-03T08:18:59.963
> 
> 标签：filesystems, windows-server-2012, refs

是否可以检索 ReFS 为完整性流创建的校验和/哈希？我发现[这个](https://www.microsoft.com/en-us/download/details.aspx?id=29043)文档描述了一个新的 API 控制代码：[FSCTL_GET_INTEGRITY_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/desktop/hh965606%28v=vs.85%29.aspx)，但它似乎只得到了一些关于完整性流的细节，比如校验和类型和块大小，而不是校验和本身。

我对此信息感兴趣，因为我正在编写一个程序，它需要比文件名和时间戳更可靠地识别文件更改，而且我不想重新执行文件系统已经在做的所有校验和，特别是因为我正在处理数 TB 的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T18:46:51.950

我认为您不应该直接访问校验和。一个文件中每个 64 KB 集群有一个 CRC64 校验和（对于大文件，您可能会得到大量的校验和）。它们以文件系统的“私有”方式存储，没有我知道的 API 访问权限。根据我对 2012R2 中二进制格式的了解，没有 ADS 可以访问校验和，您必须在分区中挖掘。

至于最初关心的问题，您可能对 FILE_ATTRIBUTE_NO_SCRUB_DATA 感兴趣。其目的是“当应用程序开发人员希望更严格地控​​制何时以及如何清理这些文件时，此属性对于那些维护自己的完整性信息的应用程序很有用。”。这接近你想要的。

此致。

# java - Java URLClassLoader 无法识别字符串

> ID：15183792
> 
> 赞同：4
> 
> 时间：2013-03-03T08:19:26.543
> 
> 标签：java, string, file-handling, urlclassloader

我有一个非常奇怪的问题。

我正在使用 URLClassLoader 从目录中动态导入文件。如果我使用文字字符串，代码可以正常工作，如果我将变量用于文字字符串，代码也可以正常工作，但这不是我需要的。

```
package test;

import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLClassLoader;

public class Test {
    public static void main(String[] args) {

        try {
            File subfolder = new File("C:\\temp\\");
            URL classUrl = subfolder.toURI().toURL();
            URL[] classUrls = { classUrl };
            URLClassLoader ucl = new URLClassLoader(classUrls);

            for (File f : subfolder.listFiles()) {

                String name = f.getName()
                        .substring(0, f.getName().lastIndexOf(".")).trim();
                if (name.equals("TestClass"))
                        System.out.println(name);
                try {
                    MyInterface de = (MyInterface) Class.forName("TestClass", true, ucl)
                            .newInstance();
                    de.printSomething();
                } catch (ClassNotFoundException e) {
                }

                ucl.close();

            }
        } catch (MalformedURLException e) {
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

我需要的是能够做到这一点：

```
MyInterface de = (MyInterface) Class.forName(name, true, ucl).newInstance(); 
```

但即使“name”是一个有效的字符串并且等于“TestClass”，它也不起作用。

编辑：我得到错误：

```
java.lang.ClassNotFoundException: TestClass
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at test.Test.main(Test.java:25) 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-27T13:43:19.210

您的问题似乎与您正在加载的类有一个包有关。当 Java 加载这些类时，它希望找到与该包相关的目录结构。因此，以下代码有效：

```
try {
        File subfolder = new File("/home/glen/TestClass");
        URL classUrl = subfolder.toURI().toURL();
        URL[] classUrls = { classUrl };
        URLClassLoader ucl = new URLClassLoader(classUrls);

        for (File f : subfolder.listFiles()[0].listFiles()) {

            System.out.println(f.getName());

            String name = f.getName()
                    .substring(0, f.getName().lastIndexOf(".")).trim();// "TestClass";
            if (name.equals("TestClass"))
                    System.out.println(name);
            try {
                MyInterface de = (MyInterface) Class.forName("test." + name, true, ucl)
                        .newInstance();
                de.printSomething();
            } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }

            ucl.close();

        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

注意我的情况：

1.  `test.TestClass`在`Class.forName`方法中指定完全限定的类名 ,
2.  枚举加载文件夹的第一个子目录（在我的例子中是“test”目录）。TestClass.class 文件位于其中。如果我尝试直接通过那里加载，无论是否指定包名称，它都会失败。

本质上，URLClassLoader 需要一个类似 JAR 的目录结构，例如`test/TestClass.class`，同时有一个*包含*目录结构的 URL 根。

我的工作理论是，您不仅仅是将 name 变量更改为字符串文字，当我这样做时它仍然可以正常工作。仔细检查你没有改变任何其他东西。无论哪种方式，我希望这会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-31T16:15:58.423

我猜这是因为 for 循环中的 ucl.close() 。如果有目录，我添加了一些测试：如果在根包中声明，并且如果 eclipse 配置为在“bin”目录中生成 .class 文件，则以下类可以工作并实例化自身：

```
public class Toto {

    public Toto(){
        // this writes "Toto" in the console if the class is well instanciated
        System.out.println("Toto");
    }

    public static void main(String[] args) {
        try {
            File subfolder = new File("bin");
            URL classUrl = subfolder.toURI().toURL();
            URL[] classUrls = { classUrl };
            URLClassLoader ucl = new URLClassLoader(classUrls);

            for (File f : subfolder.listFiles()) {
                String fileName= f.getName();
                int suffix = fileName.lastIndexOf('.');
                if(f.isDirectory() || suffix==-1){
                    continue;
                }
                String name = fileName.substring(0, suffix);
                try {
                    Class.forName(name, true, ucl).newInstance();

                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            }
            ucl.close();
        } catch (MalformedURLException e) {
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-27T05:05:39.583

> 怎么了？

错误的第一件事是这不是真正的代码。此代码捕获*并忽略* `ClassNotFoundException`：

```
} catch (ClassNotFoundException e) {
} 
```

所以它不可能产生所示的输出。

错误的第二件事是，当它被纠正时，代码按预期工作。

无法重现。

显然，您没有运行您认为正在运行的代码。Java 根本不像声称的那样运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-27T06:02:42.157

代替

```
MyInterface de = (MyInterface) Class.forName(name, true, ucl).newInstance(); 
```

采用

```
MyInterface de = (MyInterface) Class.forName(name + "Class", true, ucl).newInstance(); 
```

为我工作。

# iphone - 在 UIWebView 中加载 PDF 问题

> ID：15183794
> 
> 赞同：0
> 
> 时间：2013-03-03T08:19:36.007
> 
> 标签：iphone, pdf, uiwebview

我正在尝试在 UIwebView 中加载 pdf，但它不会缩放页面以适应。此外，它一次显示 2 页。有人可以建议一种更好的方法来像阅读器一样在 ipad 中打开 pdf（在捆绑包中）吗？

谢谢。 ![在此处输入图像描述](../Images/d79ca33e71548f3d5dcb45b068bde0fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:13:23.167

包含这行代码吗？

```
webview.scalesPageToFit = YES; 
```

# r - 在 R 中生成栅格图

> ID：15183795
> 
> 赞同：5
> 
> 时间：2013-03-03T08:19:40.920
> 
> 标签：r, plot, raster, raster-graphics

我正在尝试制作一个光栅图（如 hovmoller 图），并希望有人能提供帮助。我已经查看了 rasterVis 和其他一些人的帮助，但似乎无法让他们的示例适合我的数据，这可能需要以某种我无法理解的方式进行转换。我设法创建了绘图，但单元格的填充值与原始数据不对应。我已经复制了我的数据框示例的 dput() 文件（希望这是正确的方法）。我想要的是沿 x 轴的一年中的几天（DOY），每个 DOY 上方有 48 个矩形的 y 轴（DF 中的小时列）。这些矩形将代表每个 DOY 的半小时间隔，并根据其对应的值（DF 中的 qc 列）为 0,1 或 2 着色

到目前为止，我已经提出了以下代码，但似乎将 z 值（qc 列）分配给颜色存在问题，我认为这些值由于某种原因没有正确排列......

```
mcol <- c("green","blue","red")
x=unique(DF[,"DOY"])
y=unique(DF[,"hour"])
z=matrix(DF[,"qc"],nrow=length(unique(DF[,"DOY"])),
                     ncol=length(unique(DF[,"hour"])))
image(x,y,z, col=mcol,
  xlab="Day of Year 2012", 
  ylab="Hour of day",
  main="Hovmoller plot of 2012 qc flags",
useRaster=TRUE) 
```

似乎正在发生的是填充值矩阵（z）首先沿x轴底部（从左到右）运行，然后循环到顶部，而我需要它从左下角开始并向上然后从左到右循环（希望有某种意义！）我这里的示例数据只涵盖三天，但完整的数据集将是一整年（2012 年为 366）。提前感谢您的帮助，

乔恩

```
structure(list(DOY = c(4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 6L, 6L), hour = c(0.5, 1, 1.5, 2, 2.5, 3, 3.5, 
4, 4.5, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, 10.5, 11, 
11.5, 12, 12.5, 13, 13.5, 14, 14.5, 15, 15.5, 16, 16.5, 17, 17.5, 
18, 18.5, 19, 19.5, 20, 20.5, 21, 21.5, 22, 22.5, 23, 23.5, 24, 
0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.5, 
8, 8.5, 9, 9.5, 10, 10.5, 11, 11.5, 12, 12.5, 13, 13.5, 14, 14.5, 
15, 15.5, 16, 16.5, 17, 17.5, 18, 18.5, 19, 19.5, 20, 20.5, 21, 
21.5, 22, 22.5, 23, 23.5, 24, 0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 
4.5, 5, 5.5, 6, 6.5, 7, 7.5, 8, 8.5, 9, 9.5, 10, 10.5, 11, 11.5, 
12, 12.5, 13, 13.5, 14, 14.5, 15, 15.5, 16, 16.5, 17, 17.5, 18, 
18.5, 19, 19.5, 20, 20.5, 21, 21.5, 22, 22.5, 23, 23.5, 24), 
    qc = c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 1L, 2L, 1L, 1L, 2L, 2L, 0L, 0L, 1L, 0L, 2L, 2L, 2L, 2L, 
    2L, 2L, 0L, 2L, 2L, 0L, 0L, 1L, 2L, 0L, 2L, 0L, 1L, 2L, 1L, 
    2L, 2L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 2L, 0L, 0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 2L, 2L, 2L, 2L, 0L, 0L, 
    2L, 0L, 0L, 0L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L)), .Names = c("DOY", 
"hour", "qc"), class = "data.frame", row.names = c(NA, -144L)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T10:25:17.167

关！尝试这样的事情（x 和 y 由上面的代码生成）：

```
library( sp )
r <- raster(nrows=length(y), ncols=length(x), xmn=min(x), xmx=max(x), ymn=min(y), ymx=max(y))
values(r) <- t(DF$qc)
spplot( r , cuts = 2 ) 
```

`spplot`从包装中`sp`使用格子图形，并且可以根据您的需要进行高度定制

![在此处输入图像描述](../Images/8904dbd258c8c145cdff9d8d9626c9cf.png)

好的，`geom_tile`如果您希望能够辨别不同的单元格，可能是一个更好的选择（直到光栅单元格的数量变大）：

```
p <-    ggplot( DF , aes(factor(DOY), hour ) ) + 
    geom_tile( aes(fill = factor(qc) ) , color = "#D9D9D9" ) + 
    scale_fill_brewer(name="QC", type = "div" , palette = "RdBu" )+
    scale_x_discrete( name = "Day" , expand = c(0,0) ) +
    scale_y_continuous( name = "Hour" , limits = c(0.5,24) , expand = c(0,0) , breaks = seq(0,24,2) )+
    coord_equal()
print(p) 
```

![在此处输入图像描述](../Images/514e9567cb0c127ff27d8d786fcf0022.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T11:30:41.303

好的，现在解决了这个问题，而且也很简单......

```
library(ggplot2)
ggplot(DF,aes(DOY,hour,fill=qc))+geom_raster() 
```

抱歉，这比我想象的要简单得多。我希望图例颜色是离散的而不是连续的，但这是一个小细节。感谢您的输入。乔恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:39:09.617

包中的`hovmoller`函数`rasterVis`专为 4D 数据（坐标、数值变量和时间索引）而设计。但是，如果我没记错的话，您需要使用水平图绘制单变量时间序列。

在这里，我展示了一个带有`lattice::levelplot`.

首先，我们用时间索引定义数据：

```
tt <- seq(as.POSIXct('2013-01-01'), by='hour', length=8760)
vals <- 1:24 - 12.5
myDF <- data.frame(vals, tt) 
```

接下来，我们定义两个辅助函数来从时间索引中提取一年中的小时和日期：

```
hour <- function(x)as.numeric(format(x, '%H'))
DoY <- function(x)as.numeric(format(x, '%j')) 
```

然后，我们加载包并使用包中的顺序调色板定义一个主题`RColorBrewer`：

```
library(lattice)
library(latticeExtra)
myTheme <- custom.theme(region=brewer.pal(n=10, 'RdBu')) 
```

最后，我们准备好显示数据：

```
levelplot(vals ~ DoY(tt)*hour(tt),
          data=myDF,
          xlab='Day', ylab='Hour',
          par.settings=myTheme) 
```

![水平图结果](../Images/5c2f8195665eb87f19f31845afd48c3a.png)

对于更完整的解决方案，您可能对 package [的](http://metvurst.blogspot.com.es/2013/02/metvurst-now-package-repository-moved.html)[`strip`功能](http://metvurst.blogspot.com.es/2012/11/plotting-large-amounts-of-atmospheric_4.html)感兴趣。[`metvurst`](http://metvurst.blogspot.com.es/2013/02/metvurst-now-package-repository-moved.html)

# java - 在编辑开始时将 JCombobox 中的选定索引设置为 jtable 中的单元格编辑器

> ID：15183804
> 
> 赞同：0
> 
> 时间：2013-03-03T08:20:46.813
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

我是Java编程的初学者。我想使用 JComboBox 作为 JTable 中的单元格编辑器。但是我想将 JCombobox 的选定索引设置为单击以进行编辑时单元格的当前值的值。我怎么能做到这一点？

我用于单元格以及 Jcombobox 项目的类：

```
public class PersianLetterIDPair {              
    private int id;
    private String letter;

    public PersianLetterIDPair(int id, String description)
    {
        this.id = id;
        this.letter = description;
    }

    public int getID()
    {
        return id;
    }

    public String getLetter()
    {
        return letter;
    }

    public void setID(int inID)
    {
        id = inID;
    }

    public void setLetter(String inLetter)
    {
        letter = inLetter;
    }

    public String toString()
    {
        return letter;
    } 
```

}

我填写 Jcombobox 的方式：

```
Vector<PersianLetterIDPair> model2 = new Vector<PersianLetterIDPair>();

                        model1 = myDBLayer
                                .getVectorPersianLettersIDContent();
                        int tPLID;
                        String tPL;

                        Iterator iterator = model1.iterator();
                        while (iterator.hasNext()) {

                            Vector newRow = new Vector();
                            newRow = (Vector) iterator.next();
                            tPLID = (Integer) newRow.get(0);
                            tPL = (String) newRow.get(1);

                            model2.addElement(new PersianLetterIDPair(tPLID,
                                    tPL));
                        }

                        PersianLetters0001 = new JComboBox(model2);
                        jTable2.getColumnModel().getColumn(0).setCellEditor(new  DefaultCellEditor(PersianLetters0001)); 
```

我为我的 Jtable 使用了一个表模型，如下所示：

```
public class FormSimilaritiesTableModel  extends AbstractTableModel {

private DBLayer myDBLayer = new DBLayer();
private ResultSet rs;
private String colNames[];
private Vector<FormSimilarityRow> allRows;
private FormSimilarityRow row;
private Vector<FormSimilarityRow> newRow;

private int li_cols;

private String tableName;
private ResultSetMetaData myM;

private Vector<FormSimilarityRow> deletedKeys;
private Vector newRows;
private Vector updatedRows;

private boolean ibRowInserted = false;
private guiBaseTables myGuiBaseTables ;
boolean ibRowNew = false;

FormSimilaritiesTableModel() {

    deletedKeys = new Vector();
    newRows = new Vector();
    updatedRows = new Vector();
    try {
        ResultSet rs = myDBLayer.getrsFormSimilarities();
        li_cols = 3 ;
        colNames = new String[li_cols];
        colNames[0] = "Persian Letter 1";
        colNames[1] = "Persian Letter 2";
        colNames[2] = "Form Similarity";            
        allRows = new Vector<FormSimilarityRow>();
        int rPLID1;
        String rPL1;
        int rPLID2;
        String rPL2;
        while (rs.next()) {
            ///newRow = new Vector();
            rPLID1 = (Integer) rs.getObject(1);
            rPL1 = (String) rs.getObject(2);

            rPLID2 = (Integer) rs.getObject(3);
            rPL2 = (String) rs.getObject(4);

            allRows.addElement(new FormSimilarityRow(new PersianLetterIDPair(rPLID1, rPL1),new PersianLetterIDPair(rPLID2, rPL2), (Integer)rs.getObject(5)));

        } // while

    } catch (SQLException e) {
        System.out.println(e.getMessage());
    }

}

public Class getColumnClass(int col) {

        if (col == 0 || col == 1) {
            return PersianLetterIDPair.class;
        } else if (col == 2) {
            return Integer.class;
        } else {
            return null;
        }
}

public String getColumnName(int col) {      
    return colNames[col];
}

public int getColumnCount() {
    return li_cols;
}

public int getRowCount() {
    return allRows.size();
}

public Object getValueAt(int arow, int col) {
    row =  allRows.elementAt(arow);
    if(col == 0){           
        PersianLetterIDPair pL1 = row.getPL1();
        return pL1.getLetter();
    }
    else
    if(col == 1){           
        PersianLetterIDPair pL2 = row.getPL2();
        return pL2.getLetter();
    }
    else{
        return row.getFS();
    }

}

public boolean isCellEditable(int row, int col) {
    int totalNewRows;                   
    if (col == 0 || col == 1) {
        totalNewRows = newRows.size();
        for(int j = 0; j< totalNewRows; j++)
        {
            int rVal = ((Integer) newRows.get(j)).intValue();               
            if(  rVal == row + 1){
                return true;
            }                               
        }
        return false;

    } else {
        return true;
    }
}

public void setValueAt(Object aValue, int aRow, int aCol) {     

    FormSimilarityRow dataRow =  allRows.elementAt(aRow);
    if (aCol == 0){     
        PersianLetterIDPair sV = (PersianLetterIDPair) aValue;
        dataRow.setPL1(sV);
    }
    else 
    if (aCol == 1){     
        PersianLetterIDPair sV = (PersianLetterIDPair) aValue;
        dataRow.setPL2(sV);

    }
    else        
        dataRow.setFS((Integer) aValue);
    fireTableCellUpdated(aRow, aCol);
}
... 
```

}

我的 Jtable 的定义如下：

```
myFormSimilaritiesTableModel = new FormSimilaritiesTableModel();
                        jTable2 = new JTable();
                        jScrollPane2.setViewportView(jTable2);
                        jTable2.setModel(myFormSimilaritiesTableModel);
                        jTable2.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
                        jTable2.getTableHeader()
                                .setReorderingAllowed(false); 
```

我按照@Polet 所说的提示更改了 getValueAt 方法以返回 PersianLetterIDPair：

```
public Object getValueAt(int arow, int col) {
    row =  allRows.elementAt(arow);
    if(col == 0){           
        PersianLetterIDPair pL1 = row.getPL1();
        //return pL1.getLetter();
        return pL1;
    }
    else
    if(col == 1){           
        PersianLetterIDPair pL2 = row.getPL2();
        //return pL2.getLetter();
        return pL2;
    }
    else{
        return row.getFS();
    }

} 
```

然后我创建一个 TableCellRenderer：

```
class PersianLetterIDPairRenderer extends DefaultTableCellRenderer 
```

{

```
 public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);       
        setText(((PersianLetterIDPair)value).getLetter());              
        return this;
    } 
```

}

然后我添加到我的 Jtable：

```
TableColumn tCol = jTable2.getColumnModel().getColumn(0);
                        tCol.setCellRenderer(new PersianLetterIDPairRenderer());
                        tCol = jTable2.getColumnModel().getColumn(1);
                        tCol.setCellRenderer(new PersianLetterIDPairRenderer()); 
```

但是当我从 TableCellRenderer 断开连接时它变得正确：

```
TableColumn tCol = jTable2.getColumnModel().getColumn(0);
                        //tCol.setCellRenderer(new PersianLetterIDPairRenderer());
                        tCol = jTable2.getColumnModel().getColumn(1);
                        //tCol.setCellRenderer(new PersianLetterIDPairRenderer()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:33:54.173

看看这个链接[点击这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)

或者

看这个小例子：

```
import javax.swing.*;
import java.awt.*;
import javax.swing.table.TableColumn;

public class TableTest extends JFrame {

    JTable table ;
    public TableTest(){
        table = new JTable(4,2);
        String []subject = {"Java Programming","Hoshang","Mathematics","Database"};
        String []lecturer={"Nuhara","Jon","Saran","Mikey"};
        table.setSize(200, 200);
        JComboBox subj = new JComboBox(subject);
        JComboBox lec = new JComboBox(lecturer);

        table.getColumnModel().getColumn(0).setCellEditor(new DefaultCellEditor(lec));
        table.getColumnModel().getColumn(1).setCellEditor(new DefaultCellEditor(subj));
        /*
         * OR you can use TableColumn 
         *  
         */
//        TableColumn tc = table.getColumnModel().getColumn(0);
//        tc.setCellEditor(new DefaultCellEditor(subj));

        this.add(new JScrollPane(table),BorderLayout.CENTER);
        this.setVisible(true);
        this.setSize(300,200);
        this.setDefaultCloseOperation(3);
    }
    public static void main(String...ag){
        new TableTest();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:09:37.297

按照建议，将`DefaultCellEditor`与 一起使用`JComboBox`。

证明这一点的小型工作示例：

```
import java.awt.BorderLayout;
import java.util.Random;
import java.util.Vector;

import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;

public class TestTable2 {

    protected void initUI() {
        DefaultTableModel model = new DefaultTableModel();
        for (int i = 0; i < 3; i++) {
            model.addColumn("Col-" + (i + 1));
        }
        Random random = new Random();
        for (int i = 0; i < 2000; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 3; j++) {
                row.add(VALUES[random.nextInt(VALUES.length)]);
            }
            model.addRow(row);
        }
        JTable table = new JTable(model);
        DefaultCellEditor editor = new DefaultCellEditor(new JComboBox(VALUES));
        for (int i = 0; i < table.getColumnCount(); i++) {
            table.getColumnModel().getColumn(i).setCellEditor(editor);
        }
        JFrame frame = new JFrame(TestTable2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable2().initUI();
            }
        });
    }

    private static final String[] VALUES = { "Sun", "Hello", "Sky", "Cloud", "World", "Time", "System", "Computer", "Dummy", "Simple",
            "Today", "Lorem" };

} 
```

# c# - 如何重新启动窗口服务

> ID：15183810
> 
> 赞同：3
> 
> 时间：2013-03-03T08:21:11.753
> 
> 标签：c#, .net, winforms, visual-studio-2010, windows-services

我想重新启动名为“Spooler”的窗口服务，我做了以下代码，但没有运气，任何人都知道发生了什么问题吗？代码是

```
using System.ServiceProcess;

ServiceController service = new ServiceController("Spooler");

if ((service.Status.Equals(ServiceControllerStatus.Stopped)) ||
    (service.Status.Equals(ServiceControllerStatus.StopPending)))
{
    service.Start();
}
else
{
    service.Stop();
    service.Start();
} 
```

例外是

> “System.InvalidOperationException：无法在计算机'.'上启动服务假脱机程序。---> System.ComponentModel.Win32Exception：服务的实例已经在运行
> 
> --- 内部异常堆栈跟踪结束 ---
> 
> 在 System.ServiceProcess.ServiceController.Start（字符串 [] 参数）
> 
> 在 System.ServiceProcess.ServiceController.Start()
> 
> 在 D:\samplecodes\servicerestart\servicerestart\Form1.cs:line 33 中的 servicerestart.Form1.button1_Click(Object sender, EventArgs e)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T08:31:20.667

[`WaitForStatus`](http://msdn.microsoft.com/en-us/library/w52kaf2y.aspx)您必须在停止服务后等待，然后使用以下方法再次启动它：

```
else
{
    service.Stop();
    service.WaitForStatus(ServiceControllerStatus.Stopped);
    service.Start();
    service.WaitForStatus(ServiceControllerStatus.Running);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T07:10:49.343

我认为问题是您需要管理员权限才能启动和停止服务，这就是您必须授予所需权限的原因。

为此，请将 ISS 中的应用程序池的标识更改为 LocalSystem。

希望这有帮助

# php - 避免使用 include($_GET['page'])

> ID：15183814
> 
> 赞同：1
> 
> 时间：2013-03-03T08:22:03.033
> 
> 标签：php, security

基本上，我已经在一个网站上工作了几个月，我即将打开它。在开幕之前，我将讨论潜在的安全问题，并且我在网络上进行了一些研究以找出 php 中常见的安全问题，我已经知道如何解决其中的大部分问题，尽管我确实有一个问题其中之一：我想避免使用`include($_GET['page'])`，我进行了一些研究，但没有发现任何真正方便使用的东西，尽管有什么方法可以“保护”我的代码吗？
这是我为防止安全问题而编写的代码：

```
if (!isset($_GET['page'])) 
{
echo redirect_tempo(500, 'index.php?page=home');    
}
    elseif ($_GET['page']=="index") 
    {
    echo redirect_tempo(500, 'index.php?page=home');        
    }
        elseif (file_exists($_GET['page'].".php"))
        {
        require $_GET['page'].'.php';
        }
            else 
            {
            echo redirect_tempo(500, 'index.php?page=404');
            } 
```

*请注意，这`redirect_temp()`基本上只是一个`header()`.*

这是否足够，我可以改进它，还是我只需要完全改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:30:55.020

这部分很危险：

```
elseif (file_exists($_GET['page'].".php")) 
```

我可以给出路径`"../../../../etc/passwd"`（我知道，这有点旧，但它可以是任何东西）并且它会读取文件（给定足够的权限）。

一个简单的修复可能是：

```
elseif (file_exists(basename($_GET['page']) . ".php")) 
```

不要忘记对实际应用同样的东西`require`：

```
require basename($_GET['page']) . '.php'; 
```

*您也可以`basename()`进一步向上应用，这样您就不必两次应用该功能*

也可以看看：[`basename`](http://www.php.net/basename)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:27:35.723

做你的方法没有错。只需添加一些基本验证，这样您就知道恶意用户不会尝试访问其他路径。

我建议验证斜线和点不在字符串中（因为 Windows 中的路径如 ../ 或 / 或 \）。甚至可能在最后硬编码一个 .PHP 以防止其他文件类型被访问。

```
if (strstr($_GET['page'], ".") || strstr($_GET['page'], "/") || strstr($_GET['page'], "\\")
{
    echo "error";
    exit;
}

include($_GET['page'] .".php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:29:52.150

根据我的评论，我会做这样的事情。

```
switch($_GET['page']) {
    case 'index' :
        redirect_tempo(500, 'index.php?page=home');
    break;
    ........
    default :
        die('NO!');
    break;
} 
```

然而，这不是解决这个问题的最佳方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T08:32:02.390

你的代码看起来不错。但是，如果您在使用之前也验证您的 GET 值会更好。您可以检查它是仅数字还是仅字母或字母数字。它可以是单个单词或多个单词。根据您的要求检查它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T08:43:51.600

这将包括所有允许的页面，因此 $_GET['page'] == search 将包括 search.php，但 $_GET['page'] == something 将包括 home.php :]

```
$allowed_pages = array('home', 'search', 'signup', 'signin', 'loggedin');
if(in_array($_GET["page"], $allowed_pages)) {
  $page = $_GET["page"]; 
} else { 
  $page = "home"; 
}
  $page = str_replace('/', '', $page);

if(file_exists("page_includes/$page.php")) {
  include("page_includes/$page.php");
} else {
  include("page_includes/home.php");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T09:18:45.127

我会使用白名单：

```
$all_pages = array(
    'index' => 'index.php',
    'about' => 'misc/about.php',
    '404' => '404.php',
    ...
);
function reverse($filename) {
    /* maps filenames to page names */
    return preg_replace('#/pages/(.*).php#', '$1', $filename);
}
/* add all php files in pages/ directory to $all_pages */
foreach (glob("pages/*.php") as $filename) {
    $all_pages[reverse($filename)] = $filename;
}

/* for debugging: make sure this only prints stuffs you want to include */
/* var_dump($all_pages); */

/* the actual check is simple */
$page_name = isset($_GET['page']) ? $_GET['page'] : "index";
$include_name = isset($all_pages[$page_name]) ? $all_pages[$page_name] : "404";
require $include_name; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T03:27:44.530

很多这些答案都忘记了[空字节攻击](http://projects.webappsec.org/w/page/13246949/Null%20Byte%20Injection)。附加“.php”以防止诸如 ../../../../../etc/passwd 之类的事情在许多部署中不起作用。此问题仅在[PHP 5.3.4](http://php.net/releases/5_3_4.php)中正确修复。

# django - 模型和链接之间的Django图片链接

> ID：15183816
> 
> 赞同：2
> 
> 时间：2013-03-03T08:22:17.997
> 
> 标签：django

我正在开发一个有趣的宠物商店应用程序。我的应用程序是如何工作的，它会显示一个列出所有宠物商店的页面，以及当您点击宠物商店时。你看到宠物店里所有的动物。

问题是，我不知道如何在不静态执行的情况下将图片从模型传递到模板中，如果这没有意义，我很抱歉。

例子。当有人查看商店时。他会看到所有的动物，例如名称、描述和图片。

我可以将图像上传到我的管理员，但是如何将带有图片的上下文渲染到我的模板中

```
 image = models.FileField(upload_to="images/") 
```

我的模型。

```
from django.db import models

class Store(models.Model):
    name = models.CharField(max_length = 20)
    number = models.BigIntegerField()
    address =models.CharField(max_length = 20)
    def __unicode__(self):
        return self.name

class Pet(models.Model):
    animal = models.CharField(max_length =20)
    description = models.TextField()
    owner = models.ManyToManyField(Store)
    image = models.FileField(upload_to="images/")

    def __unicode__(self):
        return self.animal 
```

我的观点.py

```
from pet.models import Store , Pet
from django.shortcuts import render_to_response ,get_object_or_404

def index(request):
    store = Store.objects.all()
    return render_to_response ('store.html',{'store':store})

def brazil(request , animal_id):
    pet = get_object_or_404(Pet, pk=animal_id)
    return render_to_response ('animal.html',{'pet':pet}) 
```

我的商店.html

```
Sydney's Pet Store
{% if store %}
<ul>
    {% for a in store %}
    <li><a href ="{% url world:brazil a.id %}">{{ a.name }}</li>
    {% endfor %}

</ul>
{% endif %} 
```

我的动物.html

```
{% if store %}
<li>Pet = {{ store.animal }}</li>
<li>description = {{store.description}} </li>
<li>owner = {{ store.owner }} </li>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:33:22.740

`FileField`s（以及扩展名`ImageField`s）具有`url`可用于获取 url 的属性。您可以像这样从模板中使用此属性`<img src="{{ pet.image.url }}">`

# javascript - javascript修复了Ipad的定位问题

> ID：15183821
> 
> 赞同：0
> 
> 时间：2013-03-03T08:23:21.697
> 
> 标签：javascript, ipad, positioning, fixed

嗨，这是我在这里的第一个问题，我希望我能得到帮助，并且答案也会对其他人有所帮助。

我必须在页面顶部放置一个标题 div 元素，以便在正文内容在其下方滚动时保持固定。它在台式机和 iPad 2 上都运行良好，但是当我在 Safari 中的 iPad 1 上进行测试时，它表现得很奇怪。起初，您滚动整个页面，就像没有定义要固定的标题一样，但在第二次滚动时，标题保持固定。我正在使用 CSS 定义进行固定定位，而且我读过的这个 jQuery hack 很有用......

```
`<script type="text/javascript">
jQuery(document).ready(function($) {
if(navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod')
{
$("#fixed").css("position", "static");
};
});
</script>` 
```

这是实际站点的URL...

`http://176.9.5.243/~marin/iQabinet`

提前致谢...：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:24:08.180

@Chris Koo 是正确的，仅在更高版本的 iOS 中支持固定位置，但还有另一个问题：当用户在 iPad 上滚动时，JavaScript 被“暂停”，使得基于滚动或滚动位置的功能成为问题。

一旦用户开始滚动或在滚动时按住手指，JS 就会停止。只有在滚动完全完成后才会重新启动。然后脚本将运行，所有东西都会立即跳来跳去。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:18:53.410

位置固定 css 功能仅支持 iOS 版本 >= 5.x

# c# - 文件系统和数据库操作的原子事务

> ID：15183822
> 
> 赞同：0
> 
> 时间：2013-03-03T08:23:31.243
> 
> 标签：c#, linq, entity-framework, transactions, io

我有一个实现原子事务的问题，涉及：

1.  文件系统操作，如添加、编辑、移动、复制和删除文件。
2.  Linq 操作（实体框架），例如添加对象和保存更改。

这两种类型的操作应该一起提交\回滚。

我环顾四周寻找解决方案，发现（事务性 NTFS 和 .NET`TransactionScope`类）是我的最佳选择，现在我的问题是`TransactionScope`类是否支持 EF linq 操作？如果你能给我提供简单的例子，我在这里有点迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:33:35.943

是的 Linq to Sql 支持 .Net Transactions.SaveChanges 应用具有隔离级别 ReadCommitted 的事务。如果您必须在一个事务中应用多个 SaveChanges，那么您明确地应用事务。EF SaveChanges 首先检查是否已经存在事务，如果没有，则继续执行事务。如果每个事务只有一个 SaveChanges，则无需应用事务。

# c# - 没有访问我的文件夹或目录

> ID：15183823
> 
> 赞同：0
> 
> 时间：2013-03-03T08:23:52.303
> 
> 标签：c#, file-io

这个程序应该显示一个目录的路径和目录如果它存在那么它还应该显示带有以下扩展名的文件（即.doc、.pdf、.jpg、.jpeg）我创建了一个名为 max 的文件夹代码正在运行的 bin 目录，但它告诉我该目录不存在这是我下面的代码

```
namespace sharp_lab_2
{
    interface IFileOperation
    {
        //should  handle the file
        bool Accept(string fileName);
        //handler function file
        void Process(string fileName);
    }

    class FileProcByExt : IFileOperation
    {
        string extName;
        string folderName;
        public FileProcByExt(string ext = "")
        {
            extName = ext;
            if (extName == "")
                folderName = "MAXee";
            else
                folderName = extName.ToUpper();
        }
        public bool Accept(string fileName)
        {
            bool res = false;
            if (extName == "" ) res = true; // all
            if (Path.GetExtension(fileName) == "." + extName) res = true; // has extension
            return res;
        }
        public void Process(string fileName)
        {
            Directory.CreateDirectory(Path.Combine(Path.GetDirectoryName(fileName),
                                                   folderName));
            File.Move(fileName,
                      Path.Combine(Path.GetDirectoryName(fileName),
                                   folderName,
                                   Path.GetFileName(fileName)));            
        }
    }
    class FileProcNameAfter10 : IFileOperation
    {
        static int cnt;
        public bool Accept(string fileName)
        {
            return Path.GetFileNameWithoutExtension(fileName).Length > 10;
        }
        public void Process(string fileName)
        {
            File.Copy(fileName,
                      Path.Combine(Path.GetDirectoryName(fileName),
                                   "longname_" + cnt + Path.GetExtension(fileName)));
            cnt++;
        }
    }
    class FileProcEnc: IFileOperation
    {
        public bool Accept(string fileName)
        {
            FileInfo fi = new FileInfo(fileName);
            return fi.Length < 1024;
        }
        public void Process(string fileName)
        {
            File.Encrypt(fileName);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            try
            {             
                string directoryPath = args[0];
                string[] filesList, filesListTmp;
                IFileOperation[] opList = { new FileProcNameAfter10(),
                                            new FileProcEnc(),
                                            new FileProcByExt("jpeg"),
                                            new FileProcByExt("jpg"),
                                            new FileProcByExt("doc"),
                                            new FileProcByExt("pdf"),
                                            new FileProcByExt("djvu")
                                            };
                if (Directory.Exists(directoryPath))
                {
                    filesList = Directory.GetFiles(directoryPath);
                    while (true)
                    {
                        Thread.Sleep(500);
                        filesListTmp = Directory.GetFiles(directoryPath);
                        foreach (var elem in Enumerable.Except<string>(filesListTmp, filesList))
                        {
                            Console.WriteLine(elem);
                            foreach (var op in opList)
                            {
                                if (op.Accept(elem)) op.Process(elem);
                            }    
                        }
                        filesList = filesListTmp;
                        if (Console.KeyAvailable == true && Console.ReadKey(true).Key == ConsoleKey.Escape) break;
                    }
                }
                else
                {
                    Console.WriteLine("There is no such directory.");
                    Console.ReadKey();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error." + ex.Message);

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:51:25.023

你应该让你的代码获得所需的权限。如果您没有对该目录的最低只读权限，则 Exists 方法将返回 false。如果在尝试确定指定文件是否存在时发生任何错误，Exists 方法将返回 false。这可能发生在引发异常的情况下，例如传递包含无效字符或过多字符的文件名、磁盘故障或丢失，或者调用者没有读取文件的权限。

[微软](http://msdn.microsoft.com/en-us/library/system.io.directory.exists%28v=vs.90%29.aspx)

# python - 以编程方式加载 Python 模块/函数

> ID：15183831
> 
> 赞同：2
> 
> 时间：2013-03-03T08:24:44.813
> 
> 标签：python, objective-c, macos, cocoa

*   我的主要应用程序是在 Objective-C/Cocoa (OS X)
*   使用 Python“插件”对主应用程序进行“扩展”
*   我们正在使用 Python 框架

这是我用作“桥梁”来执行特定脚本的代码：

```
from Foundation import *
from AppKit import *

import imp
import sys

class ppPluginBridge(NSObject):
    @classmethod
    def loadModuleAtPath_functionName_arguments_documents_(self, path, func, args,docs):

        f = open(path)
        try:
             mod = imp.load_module('plugin', f, path, (".py", "r", imp.PY_SOURCE))
             realfunc = getattr(mod, func, None)
             if realfunc is not None:
                 realfunc(*tuple(args))
        except Exception as e:
             docs.showConsoleError_('%s' % e)
        finally:
             f.close()
             return NO

        return YES 
```

所以这个函数接受一个脚本`path`并加载/执行它。

现在，我需要的是：使一些 python 类/函数/模块自动可用于最终脚本（在外部声明或 - 最好在我的`ppPluginBridge.py`文件中声明）。

怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:11:55.457

首先，我会加载类似这样的内容：

```
>>> class Thingus:
...     def __init__(self):
...         module = __import__('string')
...         setattr(self,module.__name__,module)
... 
>>> thing = thingus()
>>> thing.string
<module 'string' from '/usr/lib/python2.7/string.pyc'>
>>> 
```

请注意，这使用内置的导入函数进行导入，并且能够采用标准模块名称，`this.that`而不是 Python 文件的直接路径。这更干净。您只需要确保模块是正确的模块，并且在路径内。

至于指定要导入的内容，为什么不直接使用 ppPluginBridge.py 中的列表呢？您只需执行以下操作：

```
plugin_modules = [ 'plugins.loader', 'plugins.serializer' ] 
```

...或者你有什么。Python 非常具有表现力，因此将 Python 模块本身作为配置文件并没有错。当然，配置文件应该被适当地分开，并且在它们的默认值建立后被版本控制系统忽略，以便单独的安装可以更改它们。

# c# - 使用循环在 C# 中制作数字及其平方的列表

> ID：15183839
> 
> 赞同：2
> 
> 时间：2013-03-03T08:26:00.213
> 
> 标签：c#, list, for-loop, perfect-square

我想使用 for 循环在 C# 中制作数字及其平方的列表。

现在我有：

```
namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {

            int counter;
            int square = 1;
            const int maxValue = 10;

            Console.WriteLine("Number  Square");
            Console.WriteLine("-------------------");
            {
                for (counter = 1; counter <= maxValue; counter++)
                    square = counter ^ 2;
                Console.WriteLine("{0}   {1}",  counter, square);
            }

         }
      }

   } 
```

但我的输出只有 11 和 8。

当我将“square = counter ^ 2”放在变量声明的正下方时，我最终得到一列数字 1-10，但第二行只是一堆三，如果它们设置为 0，它们就是二。如果我没有将它设置为某个值，它也会给我一个错误来声明计数器变量。

当我把方程放在现在的位置时，它要求将 square 变量声明为某物（这里它是 1）。

另外我是一个初学者，我还没有学习过课程，所以我希望任何更正都不包括它们。

编辑：固定，天哪，我上次没有犯这个错误，是的，我需要更多的练习。对不起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:29:42.583

您不小心使用了简写来声明 for 循环块。

for 语句后面应该跟花括号来指示要执行的块。但是，如果您跳过大括号，它只会抓住“下一行”。在您的情况下，仅`square = counter ^ 2;`在循环中执行。但是，^ 运算符用于 xor 操作，而不是 pow。

你想要这个：

```
Console.WriteLine("Number  Square");
Console.WriteLine("-------------------");

for (counter = 1; counter <= maxValue; counter++)
{
    square = counter * counter;
    Console.WriteLine("{0}   {1}",  counter, square);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:30:33.193

试试这个你的计数器循环：

```
for (counter = 1; counter <= maxValue; counter++)
{
   square = Math.Pow(counter, 2);
   Console.WriteLine("{0}   {1}",  counter, square);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T08:31:13.677

牙套的位置很重要：

```
 Console.WriteLine("Number  Square");
 Console.WriteLine("-------------------");

 for (counter = 1; counter <= maxValue; counter++)
 {
     square = counter * counter;
     Console.WriteLine("{0}   {1}",  counter, square);
 } 
```

**注意**`for`：出于这个原因，最好始终对循环和`if`语句使用大括号。

另请注意，这`^`不是“权力”而是独占 OR

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T08:30:33.793

^ 运算符不是用于此目的。请改用 System.Math.Pow()。示例： `var square = Math.Pow(3, 2)`。这将给出 9。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T08:31:03.560

`square = counter ^ 2`?? 这`^`是一个[异或运算](http://msdn.microsoft.com/en-us/library/zkacc7k1.aspx)

做这个：
`square = counter * counter;`

并附上

```
{
    square = counter * counter;
    Console.WriteLine("{0}   {1}",  counter, square);
} 
```

在**for - 循环**

内 或更好地使用[Math.pow](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T08:31:47.873

您的 for 循环处于速记模式。你`console.writeline`在 for 循环之外。

尝试用这个替换行

```
for (counter = 1; counter <= maxValue; counter++)
{
  square = counter * counter;
  Console.WriteLine("{0}   {1}",  counter, square);
} 
```

请注意，^ 不是 C# 中的幂运算符。它用于异或。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-19T22:56:08.723

我会使用：

```
 private void sqtBtn_Click(object sender, EventArgs e)
    {
        outputList.Items.Clear();

        int itemValue, sqt;

        for (int i = 0; i < randomNumAmount; i++)
        {
            int.TryParse(randomList.Items[i].ToString(), out itemValue);

            outputList.Items.Add(Math.Sqrt(itemValue).ToString("f"));
        }
    } 
```

# php - 在外部网站上获取 Facebook 用户图像

> ID：15183840
> 
> 赞同：0
> 
> 时间：2013-03-03T08:26:03.903
> 
> 标签：php, facebook, facebook-graph-api

我想知道是否有办法获取登录 Facebook 的访问您网站的人的个人资料图片。

**实际例子** 我想创建一个捐助者页面。如果捐赠者可以显示，例如，他们的姓名和头像。我会征求他们的许可，但我想已经拥有它，他们只需单击“是”。

我猜你必须在你的页面上创建一个“通过 Facebook 登录”按钮或通过应用程序授予权限。但我不知道该怎么做。

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T20:57:13.633

首先，您需要在您的 facebook 帐户中创建一个 facebook 应用程序并获取应用程序 ID 和您的密码以连接到 Facebook 的 api。此信息可在此处找到：[https ://developers.facebook.com/docs/guides/canvas/](https://developers.facebook.com/docs/guides/canvas/)

然后当用户登录时，您使用 api 获取他们的用户 ID。一旦你有了这个，你就可以使用这个代码并将他们的 id 放在正确的位置。

http://graph.facebook.com/[UID]/picture

# php - 在 PHP 中的同一页面上加载多个页面（续）

> ID：15183841
> 
> 赞同：-1
> 
> 时间：2013-03-03T08:26:07.840
> 
> 标签：php, javascript, jquery

这篇文章是这个 URL 中的文章的延续[在 PHP 的同一页面上加载多个页面](https://stackoverflow.com/questions/15183248/loading-multiple-pages-on-the-same-page-in-php)

对不起，我觉得这是一个新问题，所以我想发布一个新问题..

谢谢你们在那里的投入。我的核心问题仍然是一样的

“我有一个名为 cwt.html 的基本 HTML 页面，其中包含所有复选框和提交按钮。单击提交按钮后，与所选复选框（cwt.html 的）关联的下一页（例如 processing1.php）应该也被加载在同一页面中..”

我使用了 Load 函数调用，这相对解决了这个问题，但我在代码中遇到了另一个重大问题。如果你能帮助我，那就太好了。

```
<html>
<head>
<title> Conditions We Treat </title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$("#submit1").click(function(){
$("#form1").load('processing1.php');
});
</script>
</head>
<body>
    <div id = form1>
        <input type = "checkbox" name = "sickness[]" value = "Nausea">Nausea</input><br/>
        <input type = "checkbox" name = "sickness[]" value = "Constipation">Constipation</input><br/>
        <input type = "checkbox" name = "sickness[]" value = "vomiting">Vomiting</input><br/>
        <div id = "submit1"><input type = "submit" name = "submit1" value = "submit"></input></div><br/>

    </div>  
</body>
</html> 
```

我需要做的是，当我单击提交时，它应该转到另一个页面并使用该页面的值进行处理..

我在这里发现的限制是

1.  当我声明表单操作时，它会转到该特定页面而不是在此页面中加载，就像我将`<form name = "i1" action = "processing1.php" method = "get">,` 控制权交给 processing1.php 并且内容被加载到新页面中一样

2.  如果我不执行表单操作，它会按预期方式工作，但我无法保留此页面的数据..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:51:02.470

您可能希望在该表单上使用事件侦听器来捕获提交事件，然后通过 AJAX 在您的新页面中调用。jQuery API 参考将告诉您具体如何执行此操作： http: [//api.jquery.com/submit/](http://api.jquery.com/submit/)

这是一个例子：

```
$('#form').submit(function(e) {
    // prevents the browser from sending the form
    e.preventDefault();
    // loads your nextpage.php into the target with the form-data sent as postdata
    $('#target').load(
        "nextpage.php",
        { postdata: $('#form').serialize() }
    );
    return false;
}); 
```

在`.submit()`浏览器发送表单之前调用。因此，您可以使用本机函数`.preventDefault()`来告诉浏览器不要对提交事件执行默认操作。然后，您可以进行自己的事件处理；在这种情况下：通过 AJAX 加载新页面并将其附加到当前页面的某个位置。

`.serialize()`例如，将创建一个准备好通过 AJAX 提交的字符串。[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

不要忘记通过 AJAX 检索的 HTML 默认情况下不受初始`$(document).ready(function () { /* code here */ });`调用的影响，您必须使用`.live()`或其他方式将 jQuery 功能绑定到该新代码。

# java - 如何在java中创建进程间文件访问互斥锁？

> ID：15183842
> 
> 赞同：0
> 
> 时间：2013-03-03T08:26:22.933
> 
> 标签：java, multithreading, file-io, mutex

我有两个进程读取/写入相同的文件。所以我想在它们之间创建一个锁。我的想法是在该文件夹中创建一个名为 file.lock 的文件，其中包含进程标识信息。拥有锁的进程创建文件并通过删除它来释放锁。
我的问题是：

1.  是否有可能在进程 A 正在创建文件并且在最终创建文件之前，进程 B 检查文件并发现它不存在，因此互斥锁失败了？

2.  `wait()`在这种情况下如何实现方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:28:46.877

我的建议是研究[`FileLock`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html)API。

# google-maps - 我没有看到任何错误，但地图不会出现（使用来自 github 的 gmaps.js）

> ID：15183843
> 
> 赞同：5
> 
> 时间：2013-03-03T08:26:33.977
> 
> 标签：google-maps, google-maps-api-3

我正在尝试[在 github 中使用 GMaps.js，](http://hpneo.github.com/gmaps/)但由于某种原因它无法正常工作，我很确定我输入正确，如果有人能指出我正确的方向，谢谢。（[http://i.imgur.com/3LkL6xS.png](https://i.imgur.com/3LkL6xS.png)实际照片，以防这里不够大。）

![破码](../Images/d0fa90e9060216d4f3c32ef572b1fd19.png)

这是新的源代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://maps.google.com/maps/api/js?key=AIzaSyBi7e8AiTyqWiFt9vlbGqsAzGyRhVWqCsk&sensor=true"></script>
<script src="js/gmaps.js"></script>
<script>
/**
  * Basic Map
  */
$(document).ready(function(){
 var map = new GMaps({
    div: '#basic_map',
    lat: 51.5073346,
    lng: -0.1276831,
    zoom: 12,
    zoomControl : true,
    zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_LEFT'
    },
    panControl : false,
  });
});
</script>
</head>
<body>
<div id="basic_map"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T08:49:07.243

正如我在评论中所说，您可能缺少 div 的宽度和高度，您尝试在其中显示地图。

这是工作的jsfiddle：[jsFiddle to play with](http://jsfiddle.net/Lk4gx/26/)

```
$(document).ready(function () {
    var map = new GMaps({
        div: '#basic_map',
        lat: 51.5073346,
        lng: -0.1276831,
        width: '500px',
        height: '500px',
        zoom: 12,
        zoomControl: true,
        zoomControlOpt: {
            style: 'SMALL',
            position: 'TOP_LEFT'
        },
        panControl: false
    });
}); 
```

在代码中添加了宽度和高度。
或者**[在这里](http://jsfiddle.net/Lk4gx/28/)**你有相同的结果，宽度和高度在 css 中。差别不大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-14T08:27:19.240

（请原谅我糟糕的英语）

我通过查看“gmaps.js”文件解决了这个问题......

gmaps.js (v4.5.0) 使用`getElementById`.

```
if (typeof(options.el) === 'string' || typeof(options.div) === 'string') {
      this.el = getElementById(container_id, options.context);
    } else {
      this.el = container_id;
    } 
```

结论：

1.  gmaps.js 不在乎您是否正在使用`div: 'basic_map'`或`el: 'basic_map'`-> 两者都可以正常工作。
2.  错误 = `div: '#basic_map'`，正确 = `div: 'basic_map'`。
3.  `div`用一些 CSS指定宽度和高度

刷新和快乐。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T08:33:22.823

我测试了代码。也许您应该设置 div 元素的宽度和高度。您可以使用萤火虫检查地图是否已经创建

像这样改变你的div `<div id="basic_map" style="height: 100px; position: relative; background-color: rgb(229, 227, 223); overflow: hidden;">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T16:26:08.673

* * *

```
$(document).ready(function () {
    var map = new GMaps({
        div: '#basic_map',
        lat: 51.5073346,
        lng: -0.1276831,
        width: '500px',  --->You must add this
        height: '500px',---->And this in your map declaration
        zoom: 12,
        zoomControl: true,
        zoomControlOpt: {
            style: 'SMALL',
            position: 'TOP_LEFT'
        },
        panControl: false
    });
}); 
```

在你的 div 中：

```
<div id="basic_map"></div> 
```

* * *

或者您将 div id 更改为“map”并创建样式：

```
 <style type="text/css">
    #map {
         width: 700px;
          height: 500px;
          border: 1px solid #a0a0a0;
    }
  </style> 
```

在您的 div 中：

```
<div id="map" class="map"></div> 
```

# ios - iOS：EXC_BAD_ACCESS 按下按钮时

> ID：15183847
> 
> 赞同：-3
> 
> 时间：2013-03-03T08:27:12.570
> 
> 标签：ios, objective-c

我有一个带有自定义单元格的标签视图，这些单元格是在不同的笔尖中创建的，在每个单元格中我都有一个按钮。我不想处理我创建的一个对象（我称之为`PlaylistController`）中的按钮按下事件。在 IB 中，我将此类 ( `PlaylistController`) 添加为对象，然后将`Touch Up Inside`操作拖到 IB 中的对象表示中，并在按下按钮时实现简单的警报。但是当我按下模拟器上的按钮时，我得到 EXC_BAD_ACCESS; 我的堆栈跟踪：

```
Thread 1, Queue : com.apple.main-thread
0   0x010ea09b in objc_msgSend ()
1   0x000202c0 in -[UIApplication sendAction:to:from:forEvent:] ()
6   0x002e41d3 in _UIGestureRecognizerUpdate ()
7   0x01c63afe in __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ ()
11  0x01c40e1b in CFRunLoopRunInMode ()
12  0x01bf57e3 in GSEventRunModal ()
13  0x01bf5668 in GSEventRun ()
14  0x0001cffc in UIApplicationMain ()
15  0x0000227d in main at /Users/bysdan/Documents/workspace/Starling/Starling/main.m:16
16  0x000021a5 in start () 
```

PS
我也尝试过使用`External Object`而不是这样做，`Object`但是在我尝试访问笔尖的行中出现异常。

`NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"PlaylistCell" owner:nil options:nil];`

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:46:13.860

就像我担心的那样：您的接收对象已直接从您下方释放，原因很明显：它没有被强存储。IB 坚信您有勇气保留稍后在代码中引用的顶级对象。当 XIB 被取消归档，并且您发布的对象没有所有者（在原始 NSCoder 之外）时，自然会假设它可以被释放而不会产生任何后果。当然，问题在于 IB 已经将对象绑定到按钮的操作。因此，当按钮呼唤对象时，BOOM！只需添加一个表示对象的以 IBOutlet 为前缀的属性，它就会自行清除。

# python - python 3 - HTTP代理问题

> ID：15183853
> 
> 赞同：0
> 
> 时间：2013-03-03T08:27:39.310
> 
> 标签：python, python-3.x, proxy

我在 Windows 7 中使用 python 3.3.0。

我制作了这个脚本来绕过`http proxy without authentication`系统。但是当我执行时，它给出了错误：`UnicodeEncodeError: 'charmap' codec can't encode characters in position 6242-6243: character maps to <undefined>` 它似乎无法将 unicode 字符解码为字符串。

那么，我应该使用或编辑/做什么？有人有任何线索或解决方案吗？

我的`.py`包含以下内容：

```
import sys, urllib
import urllib.request

url = "http://www.python.org"
proxies = {'http': 'http://199.91.174.6:3128/'}

opener = urllib.request.FancyURLopener(proxies)

try:
    f = urllib.request.urlopen(url)
except urllib.error.HTTPError as  e:
    print ("[!] The connection could not be established.")
    print ("[!] Error code: ",  e.code)
    sys.exit(1)
except urllib.error.URLError as  e:
    print ("[!] The connection could not be established.")
    print ("[!] Reason: ",  e.reason)
    sys.exit(1)

source = f.read()

if "iso-8859-1" in str(source):
    source = source.decode('iso-8859-1')
else:
    source = source.decode('utf-8')

print("\n SOURCE:\n",source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:50:15.567

1.  此代码甚至不使用您的代理
2.  这种形式的编码检测真的很弱。您应该只在定义明确的位置查找声明的编码：HTTP 标头“Content-Type”以及字符集元标记中的响应是否为 HTML。
3.  由于您没有包含堆栈跟踪，因此我假设错误发生在该行中 `if "iso-8859-1" in str(source):`。调用`str()`使用您的系统默认编码 ( ) 解码字节数据`sys.getdefaultencoding()`。如果您真的想保留此检查（请参阅第 2 点），您应该这样做 `if b"iso-8859-1" in source:`这适用于字节而不是字符串，因此无需事先进行解码。

注意：这段代码对我来说很好用，大概是因为我的系统使用了 utf-8 的默认编码，而你的 Windows 系统使用了不同的编码。

更新：我建议在 python 中执行 http 时使用[python-requests 。](http://python-requests.org/)

```
import requests

proxies = {'http': your_proxy_here}

with requests.Session(proxies=proxies) as sess:
    r = sess.get('http://httpbin.org/ip')
    print(r.apparent_encoding)
    print(r.text)
    # more requests 
```

注意：这不使用 HTML 中指定的编码，您需要像 beautifulsoup 这样的 HTML 解析器来提取它。

# c - 我的 linux 的 gcc 编译器不支持布尔值

> ID：15183860
> 
> 赞同：6
> 
> 时间：2013-03-03T08:28:45.490
> 
> 标签：c, linux, gcc, compiler-errors, boolean

我正在尝试创建一个返回类型为布尔值的函数......程序的语法似乎是正确的，但编译器给出了错误......

我包含的头文件是：

```
#include<stdio.h>
#include<stdlib.h> 
```

我创建的功能是：

```
34.bool checknull(struct node* node){
35\.    if ( node != NULL )
36\.        return TRUE;
37\.       
38\.    return false;
39.} 
```

我在编译时得到的是

```
bininsertion.c:34:1: error: unknown type name ‘bool’
bininsertion.c: In function ‘checknull’:
bininsertion.c:36:10: error: ‘TRUE’ undeclared (first use in this function)
bininsertion.c:36:10: note: each undeclared identifier is reported only once for each  function it appears in
bininsertion.c:38:9: error: ‘false’ undeclared (first use in this function) 
```

我用小写和大写字母都试过“真，假”，但似乎没有用......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-03T08:29:43.557

`<stdbool.h>`如果需要，您应该包括`bool`,`true`和`false`。也是`true`，不是`TRUE`。

* * *

如果您不想包含`stdbool.h`，可以使用稍微丑陋的`_Bool`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T08:32:23.727

## 原始答案

~~尝试包括 cstdio 和 cstdlib。可能没有任何区别，但我的编译器也注意到了这些奇怪的错误。曾经有效的东西，不再有效~~

## 编辑

在 C 中，false 由 0 表示，而 true 由任何非零值表示。

`bool`本质上，您可以像这样滚动自己的数据类型

```
typedef enum {false, true} bool; 
```

然后你可以像在你的应用程序中一样使用它。

您也可以只包括`stdbool.h`应该与枚举建议类似的内容

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T10:59:09.107

bool 不是数据类型..
它在 Visual Studio 中工作正常..因为它是 Microsoft 特定的东西..
只需包含`stdbool.h`它就可以正常工作:)

# vb.net - 如何在 vb.net 中编写自动检测串口

> ID：15183865
> 
> 赞同：1
> 
> 时间：2013-03-03T08:29:36.723
> 
> 标签：vb.net, serial-port

我正在开发一个通过笔记本电脑/PC 的 USB 端口连接 RS232 的项目。我已经创建了 vb.net 应用程序。当应用程序第一次加载时，它需要检测串口。到目前为止，我手动将端口名放入串行端口的属性中，但是如果我部署我的应用程序并且如果我使用其他笔记本电脑/PC，则会出现错误：运行我的 GUI 时出现 System.IO.IOException。我想对串口的自动检测进行编程，但我是 vb.net 中串口编程的新手。

谁能帮我？谢谢！

这是我的程序的一部分：

```
Imports System.IO.Ports

Public Class Form1

'Dim myPort As Array 

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try

        'myPort = IO.Ports.SerialPort.GetPortNames() 

        SerialPort1.Open()
        Timer1.Enabled = True
    Catch ex As Exception
        MsgBox(ex.ToString)

    End Try
End Sub

Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived

    '==zigbee sent data to the app====
    Console.Beep(3000, 1000) 'high tone buzzer whenever there is a notification received

    MsgBox("THERE IS A NOTIFICATION RECEIVED!")

    uart_rx = Me.SerialPort1.ReadExisting
    toDisplay = toDisplay + uart_rx

    flag = 1 'there is a notification sent

End Sub

.... 
```

在 myPort = IO.Ports.SerialPort.GetPortNames() 之后，我不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:57:33.080

有一个示例显示了如何在以下网页上完成此操作：http: [//msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

在示例中，在应用程序与端口通信之前提示用户输入串行端口设置。

SerialPort.GetPortNames ( [http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.getportnames.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.getportnames.aspx) ) 将获取串行端口的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T14:23:01.483

我提供了一个列表框并用系统上的所有端口填充它。用户必须选择 com 端口，然后将该端口名称分配给串行端口。
代码如下 Dim SP as string

```
Private Sub frmSelectPort_Load(sender as Object,  e as 
System. EventArgs)  Handles Me. Load 
GetSerialPortnames 
End Sub

 Sub GetSerialPortnames () For Each SP In My. Computer. 
   SerialPortNames
   Listbox1\. Items. Add(sp) 
 End Sub

 (Under button click event) 
SP =Listbox1\. SelectedItem
SerialPort1\. PortName=SP 
SerialPort1\. Open() 
```

# java - 未在 netbeans 中显示上述方法的 @Override

> ID：15183873
> 
> 赞同：0
> 
> 时间：2013-03-03T08:30:10.000
> 
> 标签：java, overriding, netbeans-7

我正在使用最新版本的 Netbeans，在实现 MouseListener（或任何监听器）之后，我注意到它没有显示`@Override`有关方法。有没有办法真正自动编写

# javascript - jQuery attr() 仅适用于第一个元素

> ID：15183876
> 
> 赞同：4
> 
> 时间：2013-03-03T08:30:43.340
> 
> 标签：javascript, jquery

我不明白为什么 attr() 只被调用一次，

我的 html 是

```
<table id="myTable">
    <tbody>
        <tr>
            <td>...</td>
            <td>...</td>
            <td>
                <abbr title='first'>Demo1</abbr>
            </td>
        </tr>
        <tr>
            <td>...</td>
            <td>...</td>
            <td>
                <abbr title='second'>Demo2</abbr>
            </td>
        </tr>
        .
        .
        .
    </tbody>
</table> 
```

现在我想得到所有的“标题”，`abbr` 所以写了下面的查询

```
$(document).ready(function () {
    console.log($('#myTable tr td:nth-child(3) abbr').attr("title"));
} 
```

所以，它应该返回我

```
first
second
.
.
. 
```

但输出只是`"first"`，

但如果写

```
var oRows = $('#myTable tbody tr');
$.each(oRows, function (i) {
    console.log($(this).children('td:nth-child(5)').children().attr("title"));
}); 
```

然后我得到正确的输出。但我认为这不是一个正确的方法，所以任何人都可以告诉我哪里出错了。

我也读[了这个](https://stackoverflow.com/questions/3306414/jquerys-attr-function-works-only-one-time)答案，但我仍然不清楚

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T08:32:45.347

`.attr()`返回第一个元素的属性。如果您想要所有匹配元素的属性，请使用`map`：

```
var titles = $('#myTable tr td:eq(3) abbr').map(function() {
    return $(this).attr('title');   // or just `return this.title`
}).get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:43:57.207

这是一个非常简单的方法。从表 myTable 中获取所有 abbr 元素并给出它们的标题。

[http://jsfiddle.net/cngpd/](http://jsfiddle.net/cngpd/)

```
$("abbr", $("#myTable")).each(function () {
    console.log($(this).attr('title'));
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-06T11:30:45.123

这样你就可以为每个元素获得它：

JS

```
 $(".ele_title").click(function(){
    var value = $(this).attr('title');
    alert(value);
  }); 
```

HTML

```
<abbr class='ele_title' title='first'>Demo1</abbr>
<abbr class='ele_title' title='second'>Demo1</abbr>
<abbr class='ele_title' title='third'>Demo1</abbr> 
```

# mysql - 用于存储包含转义序列的文本（代码）的 mysql 数据类型

> ID：15183879
> 
> 赞同：0
> 
> 时间：2013-03-03T08:30:57.593
> 
> 标签：mysql, database

我正在开发一个项目，用户将能够将他的代码存储在数据库服务器中。

*   代码可以来自任何语言，如 c、c++、java、python。该代码将包含转义序列（'\n'、'\t'）和重要的空格（专门用于 python）。

*   我想要一种数据类型，它将存储所有这些代码，因为它在代码中维护所有空格和转义序列（没有任何格式或任何东西）。

我不确定'TEXT' MySQL 数据类型，那么在 MYSQL 中将此代码存储为（原始数据）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:37:46.933

使用[BLOB](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

从手册。

> BLOB 是一个二进制大对象，可以保存可变数量的数据。四种 BLOB 类型是 TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。

> BLOB 值被视为二进制字符串（字节字符串）。它们没有字符集，排序和比较基于列值中字节的数值。

# stored-procedures - 我应该将 EntityFramework 与存储过程一起使用吗？

> ID：15183886
> 
> 赞同：2
> 
> 时间：2013-03-03T08:31:51.940
> 
> 标签：stored-procedures, entity-framework-5

我正在使用 MVC 和 EF Code-First构建一个***新网站。***

据我了解，EF 根据我的更改动态创建了一个完整的 SQL 命令。当然，如果我有很多更改，它会创建很多 SQL 查询和命令。

在我看来，我应该通过尽可能减少流量负载来提高网站的性能。

有理由不这样做吗？是否有一个不使用存储过程和 EF 的主要站点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T21:39:51.800

在我看来，Entity Framework 旨在与 LINQ-to-Entities 和内置更改跟踪一起使用，包括尽可能自动生成的 DML 语句，并且它有后门可以在任何你必须使用的地方使用存储过程**——****无论**是在性能方面.

如果您计划或被迫通过使用存储过程来优化每一毫秒，那么我看不到在您的项目中使用实体框架的意义和好处。您可能会使用带有直接 SQL 语句和存储过程的普通 ADO.NET。

# mysql - 在这种情况下我应该使用哪个 SQL 查询

> ID：15183891
> 
> 赞同：0
> 
> 时间：2013-03-03T08:32:13.327
> 
> 标签：mysql, sql, algorithm, tsql

我`tbl_comments`在 MySQL 中有一个表。表中有`user_name`, `comment_id`, `user_likes`,四个字段`user_dislikes`。`user_likes`和字段的`user_dislikes`类型为 VARCHAR，并且在这两个字段中有逗号分隔的用户名。

我有以下查询：

```
$query = "SELECT * FROM tbl_comments WHERE comment_id=223"; 
```

我的问题是我也想通过这个查询传递用户名并获得以下输出

```
1\.  0 (if user_name does not exist in user_likes and user_dislikes)
2\.  1 (if user_name exists in user_likes)
3\.  2 (if user_name exists in user_dislikes) 
```

哪个 SQL 查询可以给出我想要的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:44:37.150

我猜，您使用的是 SQL Server：

```
SELECT *, 
CASE 
WHEN (if user_name does not exist in user_likes and user_dislikes) THEN O
WHEN (if user_name exists in user_likes) THEN 1
WHEN (if user_name exists in user_dislikes) THEN 2
END
FROM tbl_comments WHERE comment_id=223 
```

这大致就是你需要的。请根据您的使用情况更改**WHEN**内的条件。但我不明白 'user_likes' 和 'user dislikes' 的实际含义，以及为什么用逗号分隔的用户名？所以条件不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T09:07:55.657

我已经采取了在自己之前使用逗号分隔值的陷阱。这是一个很好的答案：[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad/3653574#3653574)

您将不得不使用 LIKE '%user_name%' 从效率的角度来看这并不好。尝试研究数据库规范化。

（我在 Stackoverflow 上的第一篇文章 :)）

# actionscript-3 - 如何从类中获取随机常量？

> ID：15183898
> 
> 赞同：1
> 
> 时间：2013-03-03T08:32:46.367
> 
> 标签：actionscript-3

是否可以从 AS3 中的类中获取随机常数？

```
class Constat
{
    public static const constA:String = "const1";
    public static const constB:String = "const2";
    ...

    /** this method must return a random constant */
    public static function getRandomConst():String
    {
         -------------------------------
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:58:09.567

您可以使用[`describeType()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType%28%29)收集类中定义的所有常量，然后从那里随机选择一个。

```
public class Constat
{

    public static const constA:String = "const1";
    public static const constB:String = "const2";

    private static var _constants:Vector.<String>;

    public static function getRandomConst():String
    {
        if(_constants === null)
        {
            _constants = new <String>[];

            var def:XML = describeType(Constat);

            for each(var i:XML in def.constant)
            {
                _constants.push(i.@name);
            }
        }

        // Select random.
        var con:String = _constants[ int(Math.random() * _constants.length) ];

        return Constat[con];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:42:00.300

是的，您总是可以将所有值粘贴到一个数组中并随机选择一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T11:31:45.343

设置为 const 名称后跟一个数字。并使用带有`Math.random()`.

试试这个

```
package {

    import flash.display.Sprite;

    public class MyClass extends Sprite
    {
        public static const constA:String = "00";
        public static const constB:String = "11";
        public static const constC:String = "22";
        public static const constD:String = "33";
        public static const constE:String = "44";
        public static const constF:String = "55";
        public static const constG:String = "66";
        public static const constH:String = "77";
        public static const constI:String = "88";
        public static const constJ:String = "99";
                             .
                             .
                             .

        public function MyClass() 
        {   
            MyClass.test();
        }

        public static function mapped(i:int):String
        {
            //65 is A
            return String.fromCharCode(65+i);                   
        }

        public static function test():void
        {
            trace(MyClass["const"+mapped(int(Math.random()*10))]);
        }

    }
} 
```

# php - Wordpress - 错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误

> ID：15183899
> 
> 赞同：-1
> 
> 时间：2013-03-03T08:32:50.430
> 
> 标签：php, javascript, sql-server, wordpress

我刚刚在以下站点中安装了插件：

[http://trucialstates.com/blog/](http://trucialstates.com/blog/)

每次我尝试在 Facebook 或 Google+ 上注册时，它都会重定向到[https://trucialstates.com/blog/](https://trucialstates.com/blog/)页面，并出现以下错误：

> 安全连接失败
> 
> 连接到 littleblackbeautybook.com 时出错。
> 
> SSL 收到超过最大允许长度的记录。
> 
> （错误代码：ssl_error_rx_record_too_long）
> 
> 您尝试查看的页面无法显示，因为无法验证接收到的数据的真实性。请联系网站所有者告知他们这个问题。或者，使用帮助菜单中的命令来报告这个损坏的站点。

Beadvised 我的网站上没有 SSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:20:44.280

与您的虚拟主机讨论可能的错误配置错误。请注意，Google 会尽可能将用户引导至网站的安全版本，因此，如果您的网络托管服务商错误地配置了服务器以使其看起来像安全版本可用，而实际上并非如此，则会导致问题。

# c# - SQL 查询 WHERE 字符串 LIKE 字段

> ID：15183904
> 
> 赞同：-6
> 
> 时间：2013-03-03T08:33:24.783
> 
> 标签：c#, sql, sql-server

我想从具有艺术家列的 up_song 表中检索艺术家名称为 Lata Mangeshkar 的记录，以及像 1.Lata Mangeshkar 2\. Lata Mangeshkar,sunidhi chuhan 3.Mohit chuhan, Ashaji ,Lata Mangeshkar 这样的记录。

歌曲.aspx

```
 string lata = hlinklata.Text;
    hlinklata.NavigateUrl = "DisplayList.aspx?name=" + lata; 
```

显示列表.aspx

```
 lblheader.Text = Request.QueryString["name"];

    String sql = "SELECT  title, song_id, movie_name, size FROM up_song WHERE  artist  LIKE  '%"+  lblheader.Text +" %' ";
    adpt = new SqlDataAdapter(sql, con);
     DataSet ds = new DataSet();
    adpt.Fill(ds, "title");
    var last6Uploaded = ds.Tables["title"].AsEnumerable().OrderByDescending(r => r.Field<int>("song_id"));
    foreach (DataRow row in last6Uploaded)
    {

        int songID = row.Field<int>("song_id");
        HyperLink hl = new HyperLink(); 
        hl.ID = "hyperlink" + songID;
        string title = row.Field<string>("title");
        hl.Text = title;
        hl.NavigateUrl = "Downloadpage.aspx?name=" + title;
        hl.ForeColor = System.Drawing.Color.White;
        Paneltitle.Controls.Add(hl);
        Paneltitle.Controls.Add(new LiteralControl("<br>"));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T08:43:07.210

我认为问题是在 SQL 中插入的文本之后有一个额外的空间。这意味着您每次都在有效地搜索“lblheader.text”（后面有一个空格），我怀疑这是您想要的。

在 SQL 语句中，更改

`LIKE '%"+ lblheader.Text +" %' ";`

到

`LIKE '%"+ lblheader.Text +"%' ";`

**在一个单独的问题上**

上面的代码受到 SQL 注入的影响，这对您的应用程序来说是一个主要的安全问题。在这里阅读更多：[http ://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

# android - 线性布局在小屏幕上擦除文本的重要部分

> ID：15183905
> 
> 赞同：0
> 
> 时间：2013-03-03T08:33:33.557
> 
> 标签：android, xml, android-linearlayout

这是一个屏幕截图：

![在此处输入图像描述](../Images/e8dfb3c3a03e6b878701e6d40e3abd99.png)

我想要实现的是自动使区域 1 变小，因此它将文本保持在 2 行，但不会影响布局的区域 2。显示区域 2 中的所有信息对我来说很重要。

这是我的布局代码：

```
<!-- Content of the header -->
<LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="@drawable/backrepeat"
        android:layout_margin="8dp">

    <!-- More details button -->
    <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@drawable/ic_menu_more"
            android:onClick="expandView"
            android:id="@+id/card_button_more_details" />

    <!-- Edit nickname button -->
    <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:onClick="editNickname"
            android:src="@drawable/ic_menu_edit"
            android:id="@+id/card_button_edit_nickname"/>

    <!-- Nickname or number of the card -->
    <TextView
            android:layout_width="0px"
            android:layout_weight="1"
            android:layout_height="fill_parent"
            android:id="@+id/card_value_nickname_or_number"
            android:layout_margin="8dp" android:gravity="center_vertical" android:layout_gravity="center_vertical"
            android:textColor="@color/white"/>

    <!-- Current balance -->
    <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/frameLayoutBalanceClosed"
            android:background="@drawable/balance_warning">
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/card_value_balance"
                android:layout_margin="8dp"
                android:layout_gravity="center_vertical|right"
                android:singleLine="true" android:gravity="center_vertical" 
                android:textColor="@color/white"/>
    </FrameLayout>
</LinearLayout> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:41:44.230

我建议您将线性布局更改为相对布局。将前三个视图（2 个图像视图和文本视图）设置为向左显示，而最后一个文本视图将以固定大小显示在右侧。那应该可以解决您的问题。

# android - 广播接收器中的 WakeLock 采集问题

> ID：15183908
> 
> 赞同：1
> 
> 时间：2013-03-03T08:33:56.737
> 
> 标签：android

我开发了一个应用程序，我需要一个广播接收器来生成有关从 GCM 推送接收消息的通知。

我使用的代码拒绝编译，说明

```
 "Cannot make a static reference to the non-static method acquire() from
  the type PowerManager.Wakelock" 
```

IDE（日食）现在建议我应该

```
 remove argument to match "acquire()" 
```

但是，当我这样做时，显示的下一个错误是：

```
 The method acquire(long) in the type PowerManager.WakeLock is not applicable        
  for the arguements(Context).... 
```

广播接收器的代码是：

```
 private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);

    WakeLock.acquire(getApplicationContext());

    // Showing received message
    lblMessage.append(newMessage + "\n");
    Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

    // Releasing wake lock
    WakeLock.release();
} 
```

我在哪里想念它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:39:46.563

> 如何在broadcastReceiver.中获取唤醒锁？

```
private PowerManager.WakeLock wakeLock;  //Declaration of Instance variable.

@Override
public void onReceive(Context context, Intent intent) {
    //......Code.....
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK |PowerManager.ACQUIRE_CAUSES_WAKEUP 
                       | PowerManager.ON_AFTER_RELEASE,"Wake Lock");
    wakeLock.acquire(15*1000);
    //......Code....
} 
```

在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# javascript - 如何在 JavaScript 中为图像像素着色？

> ID：15183909
> 
> 赞同：0
> 
> 时间：2013-03-03T08:34:13.363
> 
> 标签：javascript, image

我正在寻找通过某种规则为图像像素着色的方法。可以说我有一些图像：

```
<div id="static">
  <img border="0" src="some/image.png">
</div> 
```

我想根据 RGB（或其他方式）将像素着色为黑色。

![在此处输入图像描述](../Images/70808ac96e89b2356303d5ce6259f01f.png)

至

![在此处输入图像描述](../Images/4fbe1bfe908a8382336d52a9b1147577.png)

我知道怎么做 `Java`

并找到了如何在 C++ 上执行此操作的源代码（[示例](http://gauth.fr/2011/10/estimate-the-lakes-area-from-google-maps/)）

但是`JavaScript`……嗯

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:43:02.227

你应该能够做类似的事情，尽管使用画布可能会很慢。

请参阅这篇文章，了解如何在将图像转换为画布表示后获取像素颜色： [如何从图像中获取像素的 x,y 坐标颜色？](https://stackoverflow.com/questions/8751020/how-to-get-a-pixels-color-of-an-image).

您必须使用循环将 event.OffsetX 和 event.OffsetY 替换为每个像素的坐标，`for`以检索每个像素的 RGB。然后，如果它与蓝色的 RGB 值不匹配，则将像素颜色替换为黑色，如果是蓝色，则将其替换为白色。

这会非常慢，如果不锁定浏览器，边界线可能不可行（我还没有亲自使用过画布，还不知道它的性能），除非你把它卸载到一个网络工作者身上，这样它就发生在另一个线程中。

# php - 教义的等于，不返回预期的结果，

> ID：15183917
> 
> 赞同：0
> 
> 时间：2013-03-03T08:35:47.070
> 
> 标签：php, mongodb, doctrine

这是我的结构。

```
{
  "title" : "wastelands",
  "playerLimit" : [ 
    1, 
    2, 
    4 ],
  "mode" : "coop" 
} 
```

现在我想选择 playerLimit 包含任意值的位置，使用 mongodb 我可以这样做。

```
> db.Map.find({playerLimit : 4})
{ "title" : "wastelands", "playerLimit" : [ 1, 2, 4 ], "mode" : "coop" } 
```

我想这在学说上与此相对应

```
$q = $this->get('doctrine_mongodb')
->getRepository('AcmeGameBundle:Map')
>createQueryBuilder();
$q->field('playerLimit')->equals($playerLimit); 
```

$playerLimit 为 4，执行时我得到的只是 null。

这是怎么做到的？文档似乎解释得不够清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T14:49:48.303

事实证明，

```
$q->field('playerLimit')->equals($playerLimit); 
```

事实上确实像预期的那样工作，但是 Symfony 中的 paramFetcher 将整数作为字符串获取。

因此解决方案是

```
$q->field('playerLimit')->equals( (int) $playerLimit); 
```

# ios - 我的观点似乎没有调整高度，尽管它应该？

> ID：15183918
> 
> 赞同：0
> 
> 时间：2013-03-03T08:36:17.963
> 
> 标签：ios, uiviewcontroller

视图设置为“Retina 3.5 全屏”

底部是一个按钮，用于跟踪视图的底部（外部顶部、外部左侧和外部底部支柱设置）。

这段代码在 viewDidLoad

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    CGRect viewRect = [self.view bounds];
    CGFloat height = viewRect.size.height;
    NSLog(@"Screen is %g pixels high", height);
} 
```

当我在 iPhone 3.5" 的模拟器中运行它时，我得到了 480 像素的高度，并且按钮保持在原来的位置。

当我在 4" 模拟器中运行它时，我希望看到更高的视图，并且按钮移动到与底部齐平。但事实并非如此。但视图明显扩大以填满模拟器的整个屏幕，尽管声称视图仍然只有 480 像素高的代码。

我可以检查什么？我宁愿不必编写代码来重新定位按钮...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:44:53.103

在 XCode 实用程序中的尺寸检查器选项卡中，您应该在“查看”部分下看到自动调整大小选项。
确保您的 UIView 配置为向所有方向扩展，在使用 Retina 4 屏幕时应该看到它的高度增加：

**扩展 UIView**

![扩展 UIView](../Images/3ad2ba4afcc8a221b9a680437994046f.png)

其次，自动调整大小选项允许您设置 UIView 锚定到哪一侧（灰色框外的红线）。通过将 UIButton 锚定到底部而不是顶部，它应该在调整大小期间保持与父视图底部的距离：

**UIView 锚定到底部**

![UIView 锚定到底部](../Images/a13004ac047749523f104995ea6c5777.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-03T09:10:03.683

iPhone 5 和之前型号的视图框架保持不变。

取而代之**的是 UIScreen 边界改变**

您可以通过以下方式检查 iPhone 5

```
if([UIScreen mainScreen] bounds].size.height == 480)
{
    // iPhone Classic
}
else
{
    // iPhone 5
} 
```

# php - 将两个 SELECT 加入一个 mysql_query

> ID：15183926
> 
> 赞同：0
> 
> 时间：2013-03-03T08:37:39.397
> 
> 标签：php, mysql

有问题，我需要加入 2 个 SELECT。我有这个代码，但它把所有从 $age 到页面末尾，我需要它与其他结果在同一行

```
<?php
mysql_connect("***", "***", "***") or die(mysql_error());
mysql_select_db("***");

$result = mysql_query("SELECT * FROM business");
$age = mysql_query("SELECT DATEDIFF( CURRENT_DATE, founded ) as date_difference FROM business");

while($row = mysql_fetch_array($result))
  {
 ?><li class="onebusiness <?php echo $row['category']?>"><a href="<?php
  echo $row['link'];?>"><img src="<?php
  echo $row['img'];?>" height="125" width="125"/><p class="name"><?php
  echo $row['name'];?></p><p class="age"><?php
  echo $row['founded'];?></p></a></li><?php
  }

while($row = mysql_fetch_array($age))
  {
 ?><p class="age"><?php echo $row['date_difference']?></p><?php
  }
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:40:42.473

你可以这样做：

```
mysql_query("SELECT *, DATEDIFF( CURRENT_DATE, founded ) as date_difference FROM business"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:40:43.983

```
select a, b, a-b as difference from mytable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T08:41:07.250

```
$result = mysql_query("SELECT *, DATEDIFF( CURRENT_DATE, founded ) as date_difference FROM business"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T08:41:21.360

你为什么不做

```
SELECT link, img, name, founded, DATEDIFF( CURRENT_DATE, founded ) as date_difference FROM business 
```

这将为您提供所需的所有字段

```
<?php
    mysql_connect("***", "***", "***") or die(mysql_error());
    mysql_select_db("***");

    $result = mysql_query("SELECT `link`, `img`, `name`, `founded`, DATEDIFF( CURRENT_DATE, founded ) as 'date_difference' FROM `business`");

    while($row = mysql_fetch_array($result))
    {
    ?>
        <li class="onebusiness <?php echo $row['category']?>">
            <a href="<?php echo $row['link'];?>">
                <img src="<?php echo $row['img'];?>" height="125" width="125"/>
                <p class="name"><?php echo $row['name'];?></p>
                <p class="age"><?php echo $row['founded'];?></p>
            </a>
        </li>
        <p class="age"><?php echo $row['date_difference']?></p>
    <?php
    }
    mysql_close();
?> 
```

# redirect - 如何将任何特定的 url 重定向到 nginx 中的 localhost

> ID：15183929
> 
> 赞同：0
> 
> 时间：2013-03-03T08:37:50.270
> 
> 标签：redirect, nginx, gunicorn, appdomain

我努力将任何特定的 url 重定向`www.google.com`到我的本地主机。但我做不到。我使用 nginx 作为 Web 服务器和 gunicorn 来部署我的烧瓶代码。我在服务器块中尝试过

```
rewrite ^http://www.google.com http://127.0.0.1:8000;

and rewrite ^(.*)$ http://localhost:8000; 
```

和许多其他重定向，但都是徒劳的。但是，是的，我可以做与此相反的事情，`localhost`即`www.google.com`

非常感谢你们，我真的被困在这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:42:50.240

你找错地方了：

要将 www.google.com 重定向到本地主机网络服务器，您需要更改您的 dns 设置（很可能通过您的主机文件）

完成 dns 更改后，您在 nginx 端最需要的是`server`带有 a 的 -block，`server_name www.google.com;`因此您的服务器知道接受 www.google.com 的请求

更新：假设我是正确的，因为您只想重定向特定的请求 url，您需要在 nginx 配置中添加以下内容

```
server{
  server_name www.example.org;
  location /flask-app { proxy_pass http://127.0.0.1:8000; }
} 
```

将所有[http://www.example.org/flaskapp](http://www.example.org/flaskapp)请求路由到您的应用程序。（显然您更改了域名，并添加了您网站其余部分所需的任何进一步配置）

# c++ - 我使用 opengl 的 SDL C++（2d 游戏）速度很慢，怎么办？

> ID：15183930
> 
> 赞同：5
> 
> 时间：2013-03-03T08:38:09.073
> 
> 标签：c++, performance, opengl, sdl

我自己做了一个游戏，就像 Pong 在 C++ 下使用 SDL 和 OpenGL：

```
#include "SDL.h"
#include "SDL_opengl.h"
#include <iostream>
int main(int argc, char* args[])
{
//initialize SDL
SDL_Init(SDL_INIT_EVERYTHING);

//OpenGL memory
SDL_GL_SetAttribute( SDL_GL_RED_SIZE, 8 );
SDL_GL_SetAttribute( SDL_GL_GREEN_SIZE, 8);
SDL_GL_SetAttribute( SDL_GL_BLUE_SIZE, 8);
SDL_GL_SetAttribute( SDL_GL_ALPHA_SIZE, 8);
SDL_GL_SetAttribute( SDL_GL_BUFFER_SIZE, 32);
SDL_GL_SetAttribute( SDL_GL_DEPTH_SIZE, 16);
SDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1);

//caption of the window
SDL_WM_SetCaption( "Bine baaa", NULL );

//size
SDL_SetVideoMode(600,400,32, SDL_OPENGL);

//clearcolor
glClearColor(0,0,0,1); //RED,GREEN,BLUE,ALPHA

//portion of screen displayed
glViewport(0,0,600,400);

//for gradients
glShadeModel(GL_SMOOTH);

//2D rendering
glMatrixMode(GL_PROJECTION);
glLoadIdentity();//save

glDisable(GL_DEPTH_TEST);

bool isRunning = true;

SDL_Event event;

typedef struct player{

    float myX;
    float myY;
    float width=15;
    float height=60;
    bool up=false;
    bool down=false;
};
player player1,player2;

player1.myX=10;
player1.myY=160;
player2.myX=580;
player2.myY=160;

float ballX=300;
float ballY=200;
float vitezaX=0.5;
float vitezaY=0.5;
float latura =10;

//main loop
while(isRunning){
    //EVENTS
    while ( SDL_PollEvent(&event)){

        if( event.type == SDL_QUIT )
            isRunning=false;
        //escape button closes window
        if(event.type == SDL_KEYUP && event.key.keysym.sym == SDLK_ESCAPE)
            isRunning=false;
        if( event.type == SDL_KEYUP && event.key.keysym.sym == SDLK_r)
            glClearColor(1,0,0,1);
        if( event.type == SDL_KEYDOWN){
            if(event.key.keysym.sym==SDLK_UP)
                player2.up=true;
            if(event.key.keysym.sym==SDLK_DOWN)
                player2.down=true;
            if(event.key.keysym.sym==SDLK_w)
                player1.up=true;
            if(event.key.keysym.sym==SDLK_s)
                player1.down=true;
        }
        if( event.type == SDL_KEYUP){
            if(event.key.keysym.sym==SDLK_UP)
                player2.up=false;
            if(event.key.keysym.sym==SDLK_DOWN)
                player2.down=false;
            if(event.key.keysym.sym==SDLK_w)
                player1.up=false;
            if(event.key.keysym.sym==SDLK_s)
                player1.down=false;
        }
    }
    //LOGIC
    if(player1.up==true)
        player1.myY-=0.3;
    if(player1.down==true)
        player1.myY+=0.3;
    if(player2.up==true)
        player2.myY-=0.3;
    if(player2.down==true)
        player2.myY+=0.3;
    if(ballY<0)
        vitezaY=-vitezaY;
    if(ballY+latura>400)
        vitezaY=-vitezaY;
    if(ballX+latura>player2.myX && ballY+latura>player2.myY && ballY<player2.myY+player2.height){
        vitezaX=-vitezaX;
        if(ballX+latura-player2.myX>=1){
                if(vitezaY>0)
                    ballY=player2.myY-latura;
                else
                    ballY=player2.myY+player2.height;
            vitezaX=-vitezaX;
            vitezaY=-vitezaY;
        }
    }
    if(ballX<player1.myX+player1.width && ballY+latura>player1.myY && ballY<player1.myY+player1.height){
        vitezaX=-vitezaX;
        if((player1.myX+player1.width)-ballX>=1){
            if(vitezaY>0)
                ballY=player1.myY-latura;
            else
                ballY=player1.myY+player1.height;
            vitezaX=-vitezaX;
            vitezaY=-vitezaY;
        }
    }
    if(ballX<0 || ballX>600){
         ballX=300;
         ballY=200;
         SDL_Delay(500);
    }
    ballX+=vitezaX;
    ballY+=vitezaY;

    //RENDER
    glClear(GL_COLOR_BUFFER_BIT);

        glPushMatrix(); //Begin Render

        glColor4ub(255,255,255,255);
        glOrtho(0,600,400,0,-1,1);

        glBegin(GL_QUADS);//GL_LINES, GL_LINE_STRIP, GL_QUADS, GL_POLIGON,GL_TRIANGLES, GL_LINE_LOOP

        glVertex2f(player1.myX,player1.myY);
        glVertex2f(player1.myX+player1.width,player1.myY);
        glVertex2f(player1.myX+player1.width,player1.myY+player1.height);
        glVertex2f(player1.myX,player1.myY+player1.height);

        glEnd();//End Draw

         glBegin(GL_QUADS);//GL_LINES, GL_LINE_STRIP, GL_QUADS, GL_POLIGON,GL_TRIANGLES, GL_LINE_LOOP

        glVertex2f(player2.myX,player2.myY);
        glVertex2f(player2.myX+player2.width,player2.myY);
        glVertex2f(player2.myX+player2.width,player2.myY+player2.height);
        glVertex2f(player2.myX,player2.myY+player2.height);

        glEnd();//End Draw

        glBegin(GL_QUADS);//GL_LINES, GL_LINE_STRIP, GL_QUADS, GL_POLIGON,GL_TRIANGLES, GL_LINE_LOOP

        glVertex2f(ballX,ballY);
        glVertex2f(ballX+latura,ballY);
        glVertex2f(ballX+latura,ballY+latura);
        glVertex2f(ballX,ballY+latura);

        glEnd();//End Draw

        glPopMatrix(); //End Render

    SDL_GL_SwapBuffers();
    SDL_Delay(2);
}
SDL_Quit();

return 0;} 
```

注意：“latura”是矩形的宽度或高度，“viteza”是速度。

问题是当我在其他机器上测试游戏时，在我的 PC 上游戏运行非常缓慢，即使我可以说我的 PC 还不错......（2GB RAM，8600GT nvidia 和四核英特尔），在其他机器上游戏的速度要快得多，无论代码是否设置为相同的速度。我似乎无法找到这个问题下的逻辑。我想知道如何让这个游戏在不同的机器上以相同的速度运行（我一直在寻找诸如时间相关动画之类的东西……我不知道会有多大帮助；我还找到了一些关于软件/硬件渲染的主题，这可能是问题吗？在我的 PC 上游戏使用软件渲染而在其他机器上是硬件基础？）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-19T16:50:22.610

我看到的主要问题是在你的游戏循环中。为什么要使用 2 毫秒的静态延迟？这就是你的瓶颈所在。您正在尝试在可能没有硬件加速 OpenGL 驱动程序的机器上以 500 FPS 的速度渲染您的游戏。

首先，将您的游戏延迟到 50 到 100Hz，而不是您在此处使用的 500。从游戏循环开始时的时间保持变量开始。

```
Uint32 time = SDL_GetTicks(); 
```

现在我们一直跳到最后以获取更多代码......

```
if(20>(SDL_GetTicks()-time))
{
    SDL_Delay(20-(SDL_GetTicks()-time)); //SDL_Delay pauses the execution.
} 
```

对于不熟悉 SDL 的人来说，这可能看起来有点令人困惑，但它所做的就是将代码延迟一段确切的时间，无论程序通过它的循环有多快。

为了更好地解释它，假设游戏循环从开始到结束需要 4 毫秒（仅出于论证的目的，循环实际上可能要快得多）。您已经在其上添加了 2 毫秒，因此总延迟为 6 毫秒，或 ~130 FPS。大多数现代计算机显示器的刷新率只有大约 60Hz，即每秒 60 帧。

通过让游戏循环尽可能快，您的游戏渲染的帧数增加了一倍以上，甚至没有显示大部分帧。想想是极其浪费的，但我们看一下上面的通用解决方案。

SDL_GetTicks() 是一个函数，它告诉您自初始化以来的当前运行时间。您在循环的最开始拍摄此时间的快照以获取您的开始时间。然后，您会在最后再次看到 SDL_GetTicks() 并使用它与您的起始值进行比较。

假设开始时间是 15，最后 SDL_GetTicks() 返回的时间是 22。该等式首先比较 22 减去 15，7，然后比较该数字是否小于 20，即是。然后它将系统暂停 20 减去 7 毫秒，即 13。

这很有用，因为帧率不会剧烈波动，并且如果游戏循环速度需要超过 20 毫秒才能到达终点，它根本不会延迟，这意味着您永远不会浪费宝贵的处理能力或帧渲染用它。

除了 20，您还可以将其替换为 (1000/FPS)，其中 FPS 是……嗯……您希望游戏运行的 FPS。这使得无需先打开计算器即可轻松完成 60 FPS 之类的操作。简单的划分，仅此而已。

最终结果：

```
int main(int argc, char *argv[])
{
    int FPS = 50 //Framerate
    //Setup stuff
    while(GAME_RUNNING)
    {
        Uint32 start_time = SDL_GetTicks();

        //Event handling

        //Logic stuff

        //Rendering things

        if((1000/FPS)>(SDL_GetTicks()-start_time))
        {
            SDL_Delay((1000/FPS)-(SDL_GetTicks()-start_time)) //Yay stable framerate!
        }
    } 
```

这几乎是控制游戏渲染的最简单方法。附带说明一下，我使用了一个稍微复杂一点的方法，我创建了一个单独的线程来以 60Hz 进行屏幕渲染，同时我以 100 的频率运行游戏循环。没有浪费处理能力，我可以为我的游戏中获得一个不错的整数计算。查找 SDL_CreateThread() 函数，它使它非常简单。

您可能遇到的唯一问题是将动态数量的对象渲染到屏幕上，但是所有这些都可以用静态向量来解决，但我离题了。我希望这能解决你的大部分问题，但由于这篇文章已有 3 个月的历史，它可能对其他偶然发现它并提出相同问题的人更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:41:15.737

我已经在我的 PC 上编译了您的代码，并且在集成显卡 (intel HD 4000) 上运行顺畅 (>500 fps)。

如果要检查 openGL 是否正在运行，请在表面上使用标志。

```
SDL_Surface* screen = SDL_SetVideoMode( 640, 480, 16, SDL_OPENGL );

if( screen->flags & SDL_OPENGL ) printf("using openGL"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T12:04:53.897

查看其他答案，我猜您的机器没有硬件加速 OpenGL 驱动程序，这导致您的游戏使用 MESA gl 库。

这是确认它的一种方法。在 cmdline 中，键入：

```
ldd ./program_name 
```

如果你看到 /usr/lib/mesa/libGL.so.1 而不是 /usr/lib/libGL.so.1，你就会知道它为什么这么慢。

# python - 如何优化 2 个元组列表的组合并删除它们的重复项？

> ID：15183931
> 
> 赞同：2
> 
> 时间：2013-03-03T08:38:22.163
> 
> 标签：python, list, duplicates, tuples

从这里开始，[如果每个元组中的第二个项目是重复的，我如何从元组列表中删除元素？](https://stackoverflow.com/questions/15090039/how-do-i-remove-element-from-a-list-of-tuple-if-the-2nd-item-in-each-tuple-is-a)，我可以从 1 个元组列表中删除元组中第二个元素的重复项。

假设我有 2 个元组列表：

```
alist = [(0.7897897,'this is a foo bar sentence'),
(0.653234, 'this is a foo bar sentence'),
(0.353234, 'this is a foo bar sentence'),
(0.325345, 'this is not really a foo bar'),
(0.323234, 'this is a foo bar sentence'),]

blist = [(0.64637,'this is a foo bar sentence'),
(0.534234, 'i am going to foo bar this sentence'),
(0.453234, 'this is a foo bar sentence'),
(0.323445, 'this is not really a foo bar')] 
```

如果第二个元素相同（score_from_alist * score_from_blist），我需要合并分数并获得所需的输出：

```
clist = [(0.51,'this is a foo bar sentence'), # 0.51 = 0.789 * 0.646
(0.201, 'this is not really a foo bar')] # 0.201  = 0.325 * 0.323 
```

**目前，我正在通过这样做来实现 clist，但是当我的 alist 和 blist 有大约 5500 多个元组时，它需要 5 多秒，其中第二个元素每个大约有 20-40 个单词。有什么方法可以使以下功能更快？**

```
def overlapMatches(alist, blist):
    start_time = time.time()
    clist = []
    overlap = set()
    for d in alist:
        for dn in blist:
            if d[1] == dn[1]:
                score = d[0]*dn[0]
                overlap.add((score,d[1]))
    for s in sorted(overlap, reverse=True)[:20]:
        clist.append((s[0],s[1]))
    print "overlapping matches takes", time.time() - start_time 
    return clist 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T08:51:35.883

我会使用字典/集合来消除重复并提供快速查找：

```
alist = [(0.7897897,'this is a foo bar sentence'),
(0.653234, 'this is a foo bar sentence'),
(0.353234, 'this is a foo bar sentence'),
(0.325345, 'this is not really a foo bar'),
(0.323234, 'this is a foo bar sentence'),]

blist = [(0.64637,'this is a foo bar sentence'),
(0.534234, 'i am going to foo bar this sentence'),
(0.453234, 'this is a foo bar sentence'),
(0.323445, 'this is not really a foo bar')]

bdict = {k:v for v,k in reversed(blist)}
clist = []
cset = set()
for v,k in alist:
   if k not in cset:
      b = bdict.get(k, None)
      if b is not None:
        clist.append((v * b, k))
        cset.add(k)
print(clist) 
```

在这里，`blist`用于消除每个句子的第一次出现以外的所有内容，并提供逐句快速查找。

如果您不关心 的顺序`clist`，可以稍微简化结构：

```
bdict = {k:v for v,k in reversed(blist)}
cdict = {}
for v,k in alist:
   if k not in cdict:
      b = bdict.get(k, None)
      if b is not None:
        cdict[k] = v * b
print(list((k,v) for v,k in cdict.items())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:43:41.757

在单个列表中存在重复项的情况下保留具有最高第一项的元组，假设它按元组中的第一项按降序排序，如果元组中对应的第二项是，则合并两个列表中的分数相同的：

```
# remove duplicates (take the 1st item among duplicates)
a, b = [{sentence: score for score, sentence in reversed(lst)}
        for lst in [alist, blist]]

# merge (leave only tuples that have common 2nd items (sentences))
clist = [(a[s]*b[s], s) for s in a.viewkeys() & b.viewkeys()]
clist.sort(reverse=True) # sort by (score, sentence) in descending order
print(clist) 
```

输出：

```
[(0.510496368389, 'this is a foo bar sentence'),
 (0.10523121352499999, 'this is not really a foo bar')] 
```

# ruby - Ruby 应用程序的嵌入式 HTTP/HTTPS 服务器有什么选择？

> ID：15183938
> 
> 赞同：3
> 
> 时间：2013-03-03T08:40:13.190
> 
> 标签：ruby, httpserver

我正在制作一些游戏服务器。就像任何其他游戏服务器一样，我认为服务器应该是有状态的。（以后可能会改变，但目前我正在寻找有状态的解决方案）

在玩了一些 Rake 之后，我决定在 Ruby 中找到解决方案。我发现的是：

*   一个可嵌入的 HTTP 服务器库，可以集成长时间运行的 Ruby 应用程序。（进程内库）
*   应该支持处理简单的 HTTP 请求/响应处理。没有装饰、URL 调度或网页模板。（我从不需要）
*   应该提供硬单线程模式。
*   应该支持带有自签名证书的 HTTPS。
*   可靠，并在生产中得到验证。
*   不错的文档和大型社区。

我认为最类似的例子是 HTTP 服务器集成到`node.js`. 基本上是 TCP 套接字之上的一个薄层。

它不需要支持多线程。我认为我将为每个 CPU 内核运行单独的进程，并且我需要快速开发，因此目前要回避多线程。

我一直在寻找`Rack`，它似乎只是一个协议规范，而不是实际的实现。它看起来只适用于无状态网络应用程序。如果不是，请纠正我。

那么，在 Ruby 中这些东西有哪些可用的选项呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:43:50.087

在仔细重新评估您的问题后，我可能找到了另一种解决方案。

也许您唯一需要的就是一个简单的**TCP 套接字服务器**。一个原始的 HTTP 1.0 服务器可以使用 Ruby 核心类来完成，如下所示：

```
require 'socket'

server = TCPServer.open(80)
loop do
  client = server.accept

  response = "<html>...</html>"
  headers = ["HTTP/1.0 200 OK",
             "Content-Type: text/html",
             "Content-Length: #{response.length}"].join("\r\n")

  client.puts headers
  client.puts "\r\n\r\n"
  client.puts response

  client.close
end 
```

看看这些资源：

*   [Ruby 文档 TCPServer](http://www.ruby-doc.org/stdlib-2.0/libdoc/socket/rdoc/TCPServer.html)
*   [Ruby 套接字编程](http://www.tutorialspoint.com/ruby/ruby_socket_programming.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T08:52:49.707

一般来说，如果您想知道“*关于 [...]，我在 Ruby 中的选择是什么*”，您最好的资源是[**The Ruby Toolbox**](https://www.ruby-toolbox.com/)。

[Web 服务器类别](https://www.ruby-toolbox.com/categories/web_servers)显示了许多选项。最受欢迎的服务器是：

*   薄的
*   乘客（可以独立使用或与 Apache Web 服务器一起使用）
*   独角兽
*   杂种

关于您的要求的几点说明：

*   如果认为“Web 服务器嵌入了我的应用程序”而不是“我将服务器嵌入到我的应用程序中”会有所帮助。
*   在生产环境中，您总是需要应用程序的*多个*实例，因为大多数 Ruby Web 服务器都是这样工作的。（因为 Ruby 中的多线程及其实现是一个[棘手的主题](https://stackoverflow.com/questions/56087/does-ruby-have-real-multithreading)）

就我个人而言，我使用 Thin 和Passenger 都取得了巨大的成功。“开发时瘦，生产时乘客”的组合似乎也很常见。

PS：你没有提到任何网络框架。即使您想让您的应用程序尽可能轻量级，一个简单的 Web 框架也可以为您节省大量样板代码。（[Ruby 工具箱：Web 应用程序框架](https://www.ruby-toolbox.com/categories/web_app_frameworks)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T06:49:57.700

如果您正在寻找一种*简单*的方法来回答主要不是 Web 服务器（例如用于调试）的 Ruby 进程中的一些 HTTP 查询，那么到目前为止，WEBrick 对我来说似乎不错。

[https://docs.ruby-lang.org/en/2.1.0/WEBrick.html](https://docs.ruby-lang.org/en/2.1.0/WEBrick.html)

```
require 'webrick'

server = WEBrick::HTTPServer.new(Port: 8000)
server.mount_proc '/some_useful_query' do |req, res|
    res.status = 200
    res.body = 'Hello, world!'
end
Thread.new {
    server.start
} 
```

# java - Spring 应用程序中有关 JDBC 中 SQL 指令的一些信息

> ID：15183940
> 
> 赞同：0
> 
> 时间：2013-03-03T08:40:21.443
> 
> 标签：java, sql, spring, spring-mvc, jdbc

我正在学习如何按照本教程使用 JDBC 在 Spring 中对数据库实现 CRUD 操作：[http ://www.tutorialspoint.com/spring/spring_jdbc_example.htm](http://www.tutorialspoint.com/spring/spring_jdbc_example.htm)

很清楚，但我对如何指定 SQL 查询只有一个疑问：

例如，在我的**StudentJDBCTemplate 类的****create()**方法中，查询以下列方式声明：

 **```
String SQL = "insert into Student (name, age) values (?, ?)"; 
```

这与 classi SQL 语句完全不同，即：

```
insert into Student("Andrea", 25); 
```

我读过关于“？”的使用。用于防止 SQL 注入的占位符，我了解此插入指令的工作原理（非常直观......）

我只知道本教程中使用的指令是 JDBC 还是特定于 Spring 的形式，或者它是什么？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:45:04.113

使用准备好的语句？作为参数的占位符是标准 JDBC 功能。阅读[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/)（和 JDBC javadoc）以了解 JDBC 提供的内容。

Spring-JDBC 在普通 JDBC 上添加了 JdbcTemplate，这有助于处理异常、关闭资源、从行生成对象等。它还添加了对普通 JDBC 不支持的命名参数的支持。

包中的类`java.sql`是`javax.sql`标准的 Java 类。包`org.springframework`中的类是 Spring 特定的类。**

# amazon-web-services - Amazon AWS Beanstalk 基于 IP 的节流

> ID：15183942
> 
> 赞同：2
> 
> 时间：2013-03-03T08:40:32.643
> 
> 标签：amazon-web-services, iptables, amazon-elastic-beanstalk, rate-limiting

我已经使用 Amazon AWS beanstalk 部署了一个 Web 应用程序。有人可以介绍一下 AWS 如何处理基于 IP 的限制吗？

早些时候，当我在 EC2 上运行自己的 tomcat 实例时，我为此目的使用了 iptables。但是，现在我对如何实现这一点感到困惑，因为 AWS 根据负载在多台机器上扩展我的 web 应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:41:17.487

好吧，Beanstalk 内部是 Cloudformation 堆栈，其中包括：负载均衡器、自动缩放组以及使用 tomcat 预先配置的 ami。

您有两个选择如何实现节流： 1\. 借助 EB 配置文件设置 iptables 规则：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html) 2\. 创建自定义 ami。描述：[http ://blog.jetztgrad.net/2011/02/how-to-customize-an-amazon-elastic-beanstalk-instance/](http://blog.jetztgrad.net/2011/02/how-to-customize-an-amazon-elastic-beanstalk-instance/)

# c# - asp.net 从数据集创建单选按钮

> ID：15183943
> 
> 赞同：2
> 
> 时间：2013-03-03T08:40:34.127
> 
> 标签：c#, asp.net, dataset, radio-button

我有一个包含许多项目的数据集，包括“blockID”和“blockName”。我想填充它们的值将是“blockName”属性的单选按钮列表，并且我需要将它们按“blockID”属性分组。即用户只能从每个“blockID”中选择一个“blockName”。我正在使用 c# 这可能吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:41:11.010

是的，有可能。我在下面做了一个例子，我知道它不是一个 DataSet 但仍然是一个很好的例子，说明你如何做到这一点。仍然可以从该结构的 DataSet 进行映射，因为在我看来它确实会使事情变得更容易。

给定 DataSource 项的以下块类：

```
public class Block
{
    public int ID { get; set; }
    public List<string> BlockNames { get; set; }

    public Block(int id, params string[] names)
    {
        ID = id;
        BlockNames = new List<string>();
        foreach (var item in names)
        {
            BlockNames.Add(item);
        }
    }
} 
```

您会看到，对于此类，`BlockNames`它们已经与单个块的`ID`.

在您的 ASPX/ASCX 标记中，定义一个`Repeater`并订阅`OnItemDataBound`事件：

```
<asp:Repeater ID="rptDummy" runat="server" OnItemDataBound="rptDummy_OnItemDataBound">
</asp:Repeater> 
```

在`OnItemDataBound`事件中，动态添加`RadioButtonLists`每个 BlockName 是一个不同的 RadioButton，并且每个`RadioButtonList`都是不同的 BlockID：

```
protected void rptDummy_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Block blk = (Block)e.Item.DataItem;
        RadioButtonList list = new RadioButtonList();
        list.ID = "rblBlocks";
        list.Attributes.Add("BlockID", blk.ID.ToString());

        foreach (string item in blk.BlockNames)
        {
            list.Items.Add(new ListItem(item, item));
        }

        e.Item.Controls.Add(list);
    }
} 
```

绑定中继器：

```
List<Block> blocks = new List<Block>();

blocks.Add(new Block(1, "BlockName1", "BlockName2", "BlockName3"));
blocks.Add(new Block(2, "BlockName4", "BlockName5"));
blocks.Add(new Block(3, "BlockName6"));

rptDummy.DataSource = blocks;
rptDummy.DataBind(); 
```

# javascript - JSFiddle 正确执行 Javascript，但在浏览器上不正确

> ID：15183949
> 
> 赞同：0
> 
> 时间：2013-03-03T08:40:57.717
> 
> 标签：javascript, jquery, html, textarea, jsfiddle

我已经在 J​​SFiddle 上为本地存储工作的文本区域测试了 Javascript。一旦我制作了 HTML 页面并加载它，它就不会使用编写的 Javascript。

这是我的 HTML 代码：

```
<html>
<head>
<title>Page Title</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.4.2.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.js"></script>
<script type='text/javascript'>
    jQuery(function($) {
    var editor = document.querySelector("#editor");
    if (window.localStorage["TextEditorData"]) {
        editor.value = window.localStorage["TextEditorData"];
    }    
    editor.addEventListener("keyup", function() {
    window.localStorage["TextEditorData"] = editor.value;
    });
</script>
</head>
<body onLoad=".ready()">
<textarea id="editor"></textarea>
</body>
</html> 
```

我错过了什么？在 JSFiddle 上测试它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:49:24.390

我已经在本地机器上安装的网络服务器上测试了您的代码。一些测试揭示了你的问题似乎是什么原因.. 缺少一对右括号：

```
}); 
```

这将关闭您`jQuery(function($) {`上面的电话，然后您的代码对我来说可以正常工作。当然，我也删除了那个错误的`onload=".ready()"`调用。

# ruby-on-rails - 安装多个版本的 Rails 会覆盖以前的安装吗？

> ID：15183951
> 
> 赞同：5
> 
> 时间：2013-03-03T08:41:11.657
> 
> 标签：ruby-on-rails, ruby, gem

**如果我继续** `gem install rails` **使用不同版本的 Rails 输入会发生什么？**

例如，我可以输入：

```
gem install rails --verson 3.2.10 
```

或者

```
gem install rails 
```

这给了我 3.2.12 版本。

## 问题

1.  **每次安装都会覆盖前一个吗？**

2.  它会删除所有旧文件并添加我正在安装的新版本吗？

3.  或者如果我运行它两次，它会保留一些文件？

我正在使用 Ubuntu。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T08:51:19.690

它将安装两个单独的 gem。实际的可执行文件`rails`将调用最新版本。

你可以用

```
<gem_command> _<version>_ 
```

例如，

```
rails _3.2.10_ 
```

将执行 Rails 3.2.10。

## 捆绑器

顺便说一句，如果我们专门讨论 Ruby on Rails，那么在您的应用程序中使用的 gem 是由[Bundler](http://bundler.io/)控制的。**Bundler 查看应用程序根目录中的 Gemfile，然后自行确定要下载、安装和使用的版本。**

如果您是初学者，此时您不必担心所有这些事情。`gem install rails`，`rails new app`这就是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T23:22:12.683

根据[enthrops 的回答](https://stackoverflow.com/a/15184043/456814)，`gem`将分别安装每个版本的 Rails，这样它们就不会相互覆盖：

> 它将安装两个单独的 gem。实际的可执行文件`rails`将调用最新版本。

如果您[`rbenv`](https://github.com/sstephenson/rbenv)用于管理 Ruby 安装，那么您可以在表单的路径中找到每个 Rails 安装的目录

```
~/.rbenv/versions/<rubyVersion>/lib/ruby/gems/<rubyVersion>/gems/rails-<version> 
```

例如，在我的机器上，我安装了以下版本的 Rails：

```
$ ls -l ~/.rbenv/versions/2.0.0-p451/lib/ruby/gems/2.0.0/gems/ | \
$ grep --extended-regexp "(\s)rails-"
drwxr-xr-x  4 foobar staff  136 May 13 19:07 rails-4.0.0
drwxr-xr-x  4 foobar staff  136 May 13 18:41 rails-4.0.5
drwxr-xr-x  4 foobar staff  136 Apr 19 21:27 rails-4.1.0 
```

# c++ - 多次对向量进行排序

> ID：15183953
> 
> 赞同：2
> 
> 时间：2013-03-03T08:41:25.500
> 
> 标签：c++, sorting, vector

我必须编写一个程序来接收多行输入，然后根据给定的几个命令行参数对它们进行排序。行可以是可变长度的，行上的每个项目都用逗号分隔，如下所示：

```
a,b,c,12,3
d,e,f,4,56
a,g,h,8,5 
```

程序要做的是根据给定的参数对某些列上的输入进行排序。这很简单，但困难的部分是我还必须能够对多个参数进行排序。

例如，命令行参数 1,4（均为升序）将输出：

```
a,g,h,8,5
a,b,c,12,3
d,e,f,4,56 
```

所以它根据第一列排序，然后是第四列。我不确定如何对某些内容进行排序，然后只使用下一个参数对冲突的元素进行排序，而不使用整个列。我目前将输入存储在向量向量中。

作为旁注，我已经阅读了一些类似的问题，但所有这些问题都只有一组要排序的东西。对于这个程序，每行的项目数可以从 1 开始，并且排序依据的参数数量也可以是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:18:10.067

首先，使用 std::sort() ，它首先与迭代器一起工作，最后作为输入。然后，使用递归。递归是解决方案的关键。

对于每个参数，即排序标准 C_i，您有一个递归级别 R_i。在每个递归级别 R_i 中，您有两个步骤：

1.  根据标准 C_i 对给定的数据范围进行排序。
2.  循环遍历数据范围。每当值 C_i 更改时，使用参数调用下一个递归级别 R_{i+1}：
    *   first：指向最后一次更改的迭代器，或者，范围的开头
    *   last：指向当前元素的迭代器（第一个改变 C_i 的元素）
    *   指向标准列表和 i+1 的引用/指针

而已！

讨论此解决方案：

*   由于迭代器，这种方法是有效的，因为底层数据结构不需要重新初始化、复制等。
*   您需要编写一个用 i 初始化的自定义比较器函子，并将始终根据向量的元素 i 进行比较。
*   哪个更快是有争议的：做一个大排序，在每次比较中都必须通过所有排序标准，或者排序多次，就像我的方法一样，每次只检查一个标准。
*   在这个解决方案中，很多向量被交换。然而这不是问题，因为 std::vector 交换很便宜。

# c# - 使用日期作为 where 子句检索数据的 SQL 查询

> ID：15183954
> 
> 赞同：0
> 
> 时间：2013-03-03T08:41:29.040
> 
> 标签：c#, sql, date, ms-access

我想使用以下 sql 查询从数据库中检索数据，但这不起作用。我正在尝试根据输入日期获取数据。在数据库中，日期格式为 03/03/2013。以下查询是否对问题正确。

```
 public DataSet OrderByDate(string date1, string date2)
        {

            //  string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
            DataSet dataSet = new DataSet();
            OleDbConnection oleConn = new OleDbConnection(connString);

            try
            {
                oleConn.Open();
                string sql = "SELECT Order.OrderNumber, (Customer.Title +SPACE(2)+ Customer.CustomerName) as [Customer Name], Customer.CustomerEbayname, Customer.EmailAddress, Customer.PhoneNumber, (Customer.Address1 + SPACE(2) + Customer.Address2 + SPACE(2)+ Customer.City + SPACE(2) + Customer.PostCode + SPACE(2) + Customer.Country) as Address,  Order.ItemPurchased, Order.PurchasedDate, Order.TotalPrice FROM Customer INNER JOIN [Order] ON Customer.[CustomerID] = Order.[CustomerID] WHERE [PurchasedDate] BETWEEN #date1# AND #date2#";                    OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Customer");
            }
            catch (Exception ex)
            {
                MessageBox.Show("An exception has been occured\n" + ex.ToString());
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables.Count <= 0)
                return null;
            else
                return dataSet;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:44:01.653

由于您使用的是 ，请不要用单引号`Access`将日期括起来。`#`

```
SELECT  [Order].[Order]Number, 
        (Customer.Title +SPACE(2)+ Customer.CustomerName) as [Customer Name],
        Customer.CustomerEbayname, 
        Customer.EmailAddress, 
        Customer.PhoneNumber, 
        (Customer.Address1 + SPACE(2) + Customer.Address2 + SPACE(2)+ Customer.City + SPACE(2) + Customer.PostCode + SPACE(2) + Customer.Country) as Address,  
        [Order].ItemPurchased, 
        [Order].PurchasedDate, 
        [Order].TotalPrice 
FROM    Customer 
        INNER JOIN [Order] 
            ON Customer.[CustomerID] = [Order].[CustomerID]  
WHERE   [PurchasedDate]= #" + date + "# 
```

# c# - Bitmap.LockBits 是否将位图“固定”到内存中？

> ID：15183958
> 
> 赞同：6
> 
> 时间：2013-03-03T08:41:52.600
> 
> 标签：c#, .net, memory, bitmap, lockbits

我最近经常使用锁定位图，并且不断收到“试图访问无效内存”错误。这主要是因为位图已在内存中移动。有些人使用`GCHandle.Alloc()`在 CLR 中分配内存并将其固定。做`Bitmap.LockBits()`同样的事情吗？我不明白“锁定”内存和“固定”内存之间的区别。如果有的话，你能解释一下术语和区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T09:48:43.703

`GCHandle.Alloc`是一种更通用的方法，它允许您为任何托管对象分配句柄并将其固定在内存中（或不固定）。固定内存可防止 GC 移动它，这在您必须将一些数据（例如数组）传递给非托管代码时特别有用。

`GCHandle.Alloc`不会帮助您以任何方式访问位图的数据，因为固定此对象只会阻止托管对象移动（位图对象）（并被垃圾收集）。

然而，位图是原生 GDI+`BITMAP`结构的包装器。它不会将数据保存在您必须固定的任何托管数组中，它只是管理 GDI+ 位图对象的本机句柄。因为这`Bitmap.LockBits`是告诉这个位图你有兴趣访问它的内存的一种方式，它只是一个函数的包装器`GdipBitmapLockBits`。因此，您需要调用它更多地与您使用 GDI+ 位图这一事实有关，而不是与您在使用 GC 的托管环境中工作这一事实有关。

一旦你使用过`LockBits`，你应该能够使用指针访问它的内存`BitmapData.Scan0`——它是第一个数据字节的地址。只要您不访问`BitmapData.Scan0 + Height * Stride`.

完成后请记住`UnlockBits`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:14:03.597

在您的情况下，`attempted to access invalid memory`错误很可能是由您在代码的不安全部分中执行的无效内存分配引起的，例如分配的数组小于您尝试放入的像素数。

[除非您的图像数据小于 85000 字节](http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx)，否则也无需考虑固定对象，因为只有小于 85K 的对象才会在内存中移动。

另一个故事是，如果您将对象传递给非托管代码，例如在 c++ 库中以加快处理速度。在这种情况下，如果传递的图像超出范围并且将被垃圾收集，则您的异常很可能发生。在这种情况下，您可以使用 [GCHandle.Alloc](http://msdn.microsoft.com/en-us/library/1246yz8f.aspx)`(imageArray,GCHandleType.Pinned);`并在不再需要时调用 Free。

# sql - 如何将 select 语句与存储过程结合使用

> ID：15183959
> 
> 赞同：1
> 
> 时间：2013-03-03T08:41:52.890
> 
> 标签：sql, sql-server, select, stored-procedures

我怎样才能实现这样的目标：

```
SELECT * DISTINCT FROM 
(execute dbo.MyStoredProcedure(@ID1,@ID2)) 
```

假设这是在另一个存储过程中。

如何从另一个存储过程调用存储过程并将结果作为表获取（我的选择是为此而设计的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:47:56.447

尝试

```
DECLARE @TableTemp TABLE (--declare parameters, ouput from SP)

INSERT INTO @TableTemp
EXEC dbo.MyStoredProcedure @ID1,@ID2

SELECT * FROM @TableTemp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:52:01.813

你可以做这样的事情。

```
INSERT INTO #temp 
EXEC MyStoredProcedure(@ID1,@ID2)

SELECT * FROM #temp 
```

# netbeans - 设置 Netbeans 用户名

> ID：15183961
> 
> 赞同：8
> 
> 时间：2013-03-03T08:42:04.450
> 
> 标签：netbeans

如何将用户名添加到 Netbeans，该名称作为作者出现在 JSF 应用程序的 JavaDoc 中。以下文章描述了如何做到这一点，但它已经过时并且导航路径完全不同以找到线索。

[链接到旧文章](http://netbeans.org/competition/win-with-netbeans/customize-java-template.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T08:49:29.650

Tools > Template > Settings >>> Will Open an Editor

Uncomment Line and add the name like user=

(Following Link gives pictures but go through the comments to find the answer [Link](http://crypt-sdk.blogspot.com/2011/07/how-to-change-author-in-netbeans.html))

# linux - 当设置为通过引用返回时，Linux 中的 Firebird UDF 会导致服务器崩溃

> ID：15183965
> 
> 赞同：5
> 
> 时间：2013-03-03T08:42:48.917
> 
> 标签：linux, gcc, reference, firebird

我正在尝试为 Linux 中的 firebird 创建一些简单的 UDF（使用 GCC 编译的 C 语言）。问题是，当我将“返回机制”设置为“通过引用”时，当我调用该函数时，服务器崩溃了。当它是“按价值”时，没有问题。

以下是我尝试用 C 编写的函数：

这个有效：

```
double round(double *); 
double round(val)
double *val;
{
    *val = *val * 100;
    *val = (*val>= 0) ? (long)(*val + 0.5) : (long)(*val - 0.5);
    *val = *val / 100;
    return *val;
} 
```

但是这个在调用时会导致服务器崩溃：

```
char * proper_case(str)
char * str;
{
    return str;
} 
```

以下是 DDL：

```
DECLARE EXTERNAL FUNCTION "ROUND"
    DOUBLE PRECISION
RETURNS DOUBLE PRECISION BY VALUE
ENTRY_POINT 'round' MODULE_NAME 'my_udfs.so';

DECLARE EXTERNAL FUNCTION PROPCASE
    CSTRING(10000)
RETURNS CSTRING(10000) FREE_IT
ENTRY_POINT 'proper_case' MODULE_NAME 'my_udfs.so'; 
```

我用以下方法调用第二个函数：

```
select propcase('abrakadabra') from rdb$database; 
```

火鸟服务器崩溃，我得到的唯一错误消息是：

```
Statement failed, SQLSTATE = -902
Error reading data from the connection. 
```

有人可以建议吗？任何帮助将不胜感激！

我忘记提供的唯一信息是我编译 .so 文件的方式（可能关键在这里）：

```
gcc -c -O -fpic my_udf.c
ld -G my_udf.o -lm -lc -o my_udf.so
cp my_udf.so /usr/lib/firebird/2.1/UDF/my_udfs.so 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:43:49.537

AFAIK，Firebird 会在调用后尝试释放参数和返回值（因为它不知道你在函数内部做了什么，并且你已经将返回值声明为`FREE_IT`），所以你需要在之前为返回值分配空间退回它。你必须通过调用分配内存`ib_util_malloc()`，所以它看起来像（甚至没有尝试编译它，但它应该给你一个大致的想法）：

```
char * proper_case(str)
char * str;
{
    char* ret = (char*)ib_util_malloc(strlen(str) + 1);
    strcpy(ret, str); // or run the actual logic here
    return ret;
} 
```

编辑：我从 UDF lib 中内置的 Firebird 中找到了一个示例：

```
pChar EXPORT IB_UDF_lower(const char *s)
{
if (!s) return 0;

char* buf = (char *) ib_util_malloc(strlen(s) + 1);
char* p = buf;
while (*s) {
    if (*s >= 'A' && *s <= 'Z') {
        *p++ = *s++ - 'A' + 'a';
    }
    else
        *p++ = *s++;
}
*p = '\0';

return buf;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:05:46.243

谢谢马克，你是对的。编译/链接有问题。

这不完全是一个答案，而是我如何设法解决这个问题。

我正在使用以下命令编译 UDF：

```
gcc -c -O -fpic my_udf.c
ld -G my_udf.o -lm -lc -o my_udf.so
cp my_udf.so /usr/lib/firebird/2.1/UDF/my_udfs.so 
```

没有错误，firebird 服务器崩溃也没有错误状态。所以我打开了 Python 并尝试了以下操作：

```
from ctypes import *
libc = CDLL("path/to/my_udf.so")
libc.IB_UDF_lower("abrakadabra") 
```

Python 抛出关于不存在函数“ib_util_malloc”的错误。所以我用“malloc”替换它，一切正常。

我仍然不知道我做错了什么，但由于 GCC 没有给我任何错误，我想这是一个链接问题。

# jpa - JPA EclipseLink 表创建顺序

> ID：15183972
> 
> 赞同：0
> 
> 时间：2013-03-03T08:43:23.510
> 
> 标签：jpa, eclipselink

我有一个使用 JPA 将数据持久保存在 MySQL 上的工作项目（EclipseLink 作为提供者）。最近我想删除数据库并通过 Eclipse => EclipseLink '从实体生成表'使用表再次创建它。我还更新了 persistence.xml（首先自动生成，然后手动修改以缩小此问题的范围）。

```
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<class>xxx.entity.options.Difficulty</class>
<class>xxx.entity.options.Options</class> 
```

（省略其余部分，因为其他情况都可以=>它一般都在工作）

问题是当我生成表时出现错误：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'xxx.DIFFICULTY' doesn't exist
Error Code: 1146 
```

（实体类定义了表名：@Entity @Table(name = "DIFFICULTY")）

如果我从persistence.xml 中注释掉'Options'，'DIFFICULTY' 表就会被创建好。然后再次取消注释“选项”并重新生成表 => 还将创建“选项”表（选项与难度有 @ManyToOne 关联）。

在 persistence.xml 我有

```
<property name="eclipselink.ddl-generation" value="drop-and-create-tables" /> 
```

因为我还在发展。

在选项类中我有

```
@ManyToOne(optional = false, cascade = CascadeType.REFRESH, fetch = FetchType.LAZY)
private Difficulty difficulty = null; 
```

（许多选项假设选择了相同的难度，所以没有一个真正拥有一个。我希望这是正确的？）

成功创建难度和选项表后，我能够重新创建其余的数据库表。

1.  问题是我应该（能够）指定创建表的顺序吗？
2.  @ManyToOne 协会有什么问题吗？

已经在这个问题上花费了几个小时，但无法弄清楚问题是什么。

对不起，很长的文字，我只是试图解释整个情况。上次我收到 'tl; 博士;' 回答（当时不知道是什么意思），我花了 6 个小时寻找错误的东西，所以在这种情况下请不要费心回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:09:26.597

您是否在上次创建之间更改类/模式？可能是您添加或删除了新关系，因此 EclipseLink 无法删除旧约束。

对于 drop-and-create-tables EclipseLink 基本上会执行以下操作，

*   放弃已知的约束
*   删除已知表
*   创建已知表
*   创建已知约束

在最新版本中，EclipseLink 将尝试几个 drop pass 来尝试处理未知约束，但是对于快速变化的开发模式的最佳方法是在部署之间删除整个模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:36:18.793

如果您查看异常堆栈，您会发现它来自实体的默认构造函数。此构造函数试图通过获取实体管理器来发出查询，但由于它需要的表尚不存在而失败。当您创建一个表时，构造函数可以查询它，这允许一切继续进行。

您的默认构造函数中不应包含业务逻辑。这由提供程序使用，并在 DDL 之前的部署期间被调用。删除它将解决问题。

# web-services - Worklight：定制 WAR 中的 Web 服务

> ID：15183973
> 
> 赞同：0
> 
> 时间：2013-03-03T08:43:33.293
> 
> 标签：web-services, ibm-mobilefirst

我们可以在 Worklight 定制 WAR 文件中创建 Web 服务吗？目的是让外部应用程序用户访问一些资源，例如来自 worklight 的适配器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:07:34.370

这可能是可能的，但我不认为我会建议它。编写您的 Web 服务以独立于 Worklight 运行。即使 Web 服务在完全独立的服务器上运行，适配器仍然可以连接到您的 Web 服务。

让 Worklight WAR 成为 Worklight，让 Web 服务成为 Web 服务。

# c# - C# - 使用 .NET 更改 Windows 8 设置

> ID：15183975
> 
> 赞同：1
> 
> 时间：2013-03-03T08:43:46.423
> 
> 标签：c#, .net

如何使用 C# 和 .NET 在 Windows 8 中更改新现代 UI 的颜色（样式）？我知道我可以使用 SystemParametersInfo 更改壁纸，但我不知道如何在 ModernUI 中更改颜色。

# ruby-on-rails - 在 Rails 中使用 gsub 将字符串替换为符号

> ID：15183981
> 
> 赞同：3
> 
> 时间：2013-03-03T08:44:11.970
> 
> 标签：ruby-on-rails

我有一个使用 simple_feed gem 读取 RSS 提要的 Rails 应用程序。但是，一些提要没有正确读入 - 即，一些标题有：

```
`&#x2018;` 
```

或者

```
`&#x2019;` 
```

代替： ”

我的标题读作：

```
i.title 
```

我在想 gsub 可以很容易地解决这个问题，但我很难让它工作。我试过：

```
i.title.gsub(%r[&#x2018;]/, '"') 
```

我什至不确定它是否会起作用，但它在`#`.

然后我尝试了：

```
i.title.gsub(%r["&#x2018;"]/, '*') 
```

这导致：

```
C:/Sites/foo/app/views/bar/show.html.erb:20: syntax error, unexpected ','
...( i.title.gsub(%r["&#x2018;"]/, '*') ) 
```

我以前没有真正使用过 gsub，我正在尝试处理[这些示例](http://ruby-doc.org/core-2.0/String.html#method-i-gsub)。可以帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T09:42:32.560

尝试

```
i.title.gsub("&#x2018;", '"') 
```

或与

```
i.title.gsub(/&#x2018;/, '"') 
```

# java - 有没有办法在多个列表中找到共同元素？

> ID：15183982
> 
> 赞同：18
> 
> 时间：2013-03-03T08:44:15.257
> 
> 标签：java, arrays, collections, guava, colt

我有一个整数数组列表。我需要找到它们之间的共同点。我能想到的是 [**两个列表中通用元素中列出的内容的扩展**](https://stackoverflow.com/questions/5943330/common-elements-in-two-lists)

```
Example would be 
[1,3,5],
[1,6,7,9,3],
[1,3,10,11]

should result in [1,3] 
```

**数组中也没有重复项。**

有没有直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T09:54:36.390

您可以将列表转换为集合，然后使用`Set.retainAll`方法在不同集合之间进行交集。与所有集合相交后，就剩下公共元素，您可以将结果集合转换回列表。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T11:07:59.987

您可以使用[Guava](http://code.google.com/p/guava-libraries/)提供的 Set 的交集方法，这里有一个小例子：

```
public <T> Set<T> intersection(List<T>... list) {
    Set<T> result = Sets.newHashSet(list[0]);
    for (List<T> numbers : list) {
        result = Sets.intersection(result, Sets.newHashSet(numbers));
    }
    return result;
} 
```

希望能帮到你

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-01T14:21:45.017

我们可以使用[`retainAll`Collections 的方法](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll(java.util.Collection))。我`commons`用第一个数组列表初始化了我的数组列表，并为每个剩余的数组列表调用了它。

```
 List<List<Integer>> lists = new ArrayList<List<Integer>>();
    lists.add(new ArrayList<Integer>(Arrays.asList(1, 3, 5)));
    lists.add(new ArrayList<Integer>(Arrays.asList(1, 6, 7, 9, 3)));
    lists.add(new ArrayList<Integer>(Arrays.asList(1, 3, 10, 11)));

    List<Integer> commons = new ArrayList<Integer>();
    commons.addAll(lists.get(1));
    for (ListIterator<List<Integer>> iter = lists.listIterator(1); iter.hasNext(); ) {
        commons.retainAll(iter.next());
    }

    System.out.println(commons);
    System.out.println(lists.get(1)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-02T23:02:59.833

使用 Java 8

```
ArrayList retain = list1.stream()
                     .filter(list2::contains).filter(list3::contains).collect(toList()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T09:16:39.300

如果您正在寻找一个返回所有列表中存在的元素的函数，

那么直接和简单的方法是建立一个统计信息 { < member,occurrences > }

这里的条件是同一个列表中没有重复，

```
private Set<Integer> getCommonElements(ArrayList<Integer[]> idList)
{

    MapList<Integer,Short> stat = new MapList<Integer,Short>();

    // Here we count how many times each value occur
    for (int i = 0; i < idList.size(); i++)
    {
        for (int j = 0; j < idList.get(i).size; j++)
        {
            if (stat.containsKey(idList.get(i)[j]))
            {
                stat.set(idList.get(i)[j], stat.get(idList.get(i)[j])+1);
            }
            else
            {
                stat.add(idList.get(i)[j], 1);
            }
        }
    }

    // Here we only keep value that occured in all lists
    for (int i = 0; i < stat.size(); i++)
    {
        if (stat.get(i) < idList.size())
        {
            stat.remove(i);
            i--;
        }
    }

    return stat.keySet();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-27T09:26:04.427

```
public class ArrayListImpl{
  public static void main(String s[]){
    ArrayList<Integer> al1=new ArrayList<Integer>();
     al1.add(21);al1.add(23);al1.add(25);al1.add(26);
    ArrayList<Integer> al2=new ArrayList<Integer>();
     al2.add(15);al2.add(16);al2.add(23);al2.add(25);
     ArrayList Al3=new ArrayList<Integer>();
     al3.addAll(al1);
      System.out.println("Al3 Elements :"+al3);
     al3.retainAll(al2); //Keeps common elements of (al1 & al2) & removes remaining elements
       System.out.println("Common Elements Between Two Array List:"+al3);  
}
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-03-01T21:35:11.263

```
public class commonvalue {

   Public static void MyMethod(){

       Set<integer> S1 = new set<integer>{1,3,5};
        Set<integer> S2 = new set<integer>{1,6,7,9,3};
        Set<integer> S3 = new set<integer>{1,3,10,11};

            s2.retainall(s1);
            s3.retainall(s2);

       system.debug(s3);
}
} 
```

# android - 在androidemulator上访问相机

> ID：15183983
> 
> 赞同：1
> 
> 时间：2013-03-03T08:44:27.260
> 
> 标签：android, camera, emulation

我正在尝试在模拟器中使用笔记本电脑摄像头。我已经为我的模拟器提供了摄像头支持，但是当我在模拟器上单击摄像头应用程序时，我在 android 2.3.3 上得到白屏，在 android 2.1 中出现类似黑框的东西。每当我启动虚拟机时，我都会被询问相机权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:13:23.437

没有办法“使用网络摄像头在 android 模拟器中模拟相机”，除非通过大量修改 Android 固件

3.1 及更高版本是可能的

检查这个...[模拟器中的网络摄像头](http://www.tomgibara.com/android/camera-source)

# javascript - node.js 守护进程和外部 GUI 客户端之间的通信

> ID：15183991
> 
> 赞同：0
> 
> 时间：2013-03-03T08:46:09.357
> 
> 标签：javascript, node.js, user-interface, client, daemon

我想在 Node.js 中创建一个守护进程并使用另一种语言来编写外部 GUI（可能是 Python）。我应该使用什么来在它们之间进行通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:51:14.057

我建议您是否可以让您的 node.js 守护程序使用内置于 web 服务器的 node.js 运行 web 服务，这样您就可以通过 http 进行通信并使用 REST 风格的软件架构。

# java - 如何从Java中的字符串解析运算符

> ID：15183995
> 
> 赞同：3
> 
> 时间：2013-03-03T08:46:41.557
> 
> 标签：java, string, class, parsing, operators

我想从我在运行时作为命令行参数输入的字符串“+”中解析一个运算符“+”，然后添加两个整数“a”和“b”。

那么我该如何执行上述任务呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:51:00.690

如果您使用的是 Java 1.7，则可以使用开关来测试每个可能的运算符，然后执行相应的操作：

```
switch(operator){
    case("+"): result = a + b; break;
    case("-"): result = a - b; break;
} 
```

对于旧版本的 Java，可以使用`if`语句来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T09:21:35.563

到目前为止没有人告诉您的是，要识别一般的算术表达式，您需要使用或编写解析器。看看Shunting-yard算法，递归下降表达式解析等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T08:49:30.940

```
if (string.equals("+")) {
    System.out.println("The result is " + (a + b));
} 
```

# java - Criteria 正确生成 SQL 查询，但不返回任何内容

> ID：15183996
> 
> 赞同：2
> 
> 时间：2013-03-03T08:46:56.910
> 
> 标签：java, hibernate, jakarta-ee, criteria, hibernate-criteria

标准用于从数据库中检索数据。完美生成SQL Query，`mySql`单独测试并正确加载记录；
但是，当使用`Criterial.list()`它时，它会给我一个空列表。

我检查了我的数据库连接，它们都是正确的。什么会导致这个问题？

* * *

**更新**
这是我的代码：

```
accCr = DetachedCriteria.forClass(TSESpotInvestorAccount.class, "acc");
accCr.setResultTransformer(DetachedCriteria.DISTINCT_ROOT_ENTITY);
accCr.add(Restrictions.eq("exchangeDepositNo", filter.getBc()));
accCr.setProjection(Projections.id());
List accIds = getHibernateTemplate().findByCriteria(accCr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:00:21.040

您的代码没有多大意义：

```
accCr.setResultTransformer(DetachedCriteria.DISTINCT_ROOT_ENTITY); 
```

上面这行表示查询应该返回实体（可能有连接的实体），并且 Hibernate 应该只返回不同的实体

```
accCr.setProjection(Projections.id()); 
```

上一行表示查询必须只返回一个标量列：根实体的 ID。

如果您想要的是 ID 列表，则不要设置不同的根实体结果转换器。

# php - 空变量会影响我的代码吗？(PHP)

> ID：15183997
> 
> 赞同：-3
> 
> 时间：2013-03-03T08:46:57.407
> 
> 标签：php, arguments

换句话说，说我有

```
$existingVariable = 'This is set';
echo thisFunction($existingVariable, $nonExistingVariable);

//included file
function thisFunction($existingVariable){
  echo $existingVariable;
} 
```

$nonExistingVariable 不再存在，因为包含的文件已更改。

所以我理解它的方式`$nonExistingVariable`是 =`''`或`NULL`，对吧？这对我的代码有任何实际影响吗？我会在发布之前将它们删除（或将它们添加回包含的文件），但我只是好奇是否将不存在的变量作为参数存在功能问题的风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:56:22.217

它不会影响代码的功能，除非您使用`func_get_args();`参数而不是仅指定它们（您正在指定它们，所以它不会有任何影响）

你可以做的IE：

```
function test() {

$args = func_get_args();

$b = $args[0];
$c = $args[1];
echo "$b\n$c";
}
test('dog','cat');
outputs: 
dog
cat 
```

但它会影响代码的可读性和用户友好性，因为您可能会尝试从旧代码区域复制和粘贴函数调用，并在试图弄清楚为什么变量没有被传递到时陷入困境函数（因为它不再是参数）。

如果它不再被使用，为什么不直接删除它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:57:23.847

如果变量不存在，那么是的 PHP 会给你一个错误。“未定义的变量”。您可以分配一个 NULL 值，$nonExistingVariable= NULL; 或者你可以做

if (!empty($nonExistingVariable))

为了防止错误

# objective-c - textDidEndEditing: - 如何过滤“返回”键？

> ID：15183998
> 
> 赞同：2
> 
> 时间：2013-03-03T08:46:59.217
> 
> 标签：objective-c, macos, cocoa, nstextfield

好的，这是我的情况：

*   我正在使用一个`NSTextField`
*   我正在观察`NSTextDidEndEditingNotification`通知

这是最后的方法：

```
- (void)handleConsoleInput:(NSNotification*)not 
```

每当（至少从我注意到的）用户时触发此通知：

*   按下“返回”
*   按“标签”
*   点击次数`NSTextField`

但是，我（显然）想将其限制为“返回”键。

我该怎么做？我已经测试了`NSNotification`发送的对象的内容，并且没有关于触发`textDidEndEditing:`通知的关键代码或事件的信息。

有任何想法吗？

* * *

**编辑：**

**刚刚注意到：**

*   当用户点击`NSTextField`，`[[not userInfo] valueForKey:@"NSTextMovement"]`变成`0`表示*可以*过滤这种情况。
*   但是，如何区分“tab”和“return”，它们都返回`NSTextMovement`值`>0`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:08:34.450

如果您真的觉得订阅通知是解决此问题的最有效方式，那么您将获得更多权力，但我觉得您将 NSTextField 子类化并覆盖相关事件方法会更容易。但是，没关系，这是我认为它应该是什么样子的快速实现：

```
- (void)handleConsoleInput:(NSNotification*)notification {
    NSUInteger textMove = [notification.userInfo[@"NSTextMovement"] unsignedIntegerValue];
    if (textMove != NSReturnTextMovement) {
        [self.window makeFirstResponder:notification.object];
    }
} 
```

结束事件的类型在[NSText](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSText_Class/Reference/Reference.html#//apple_ref/c/data/NSTextDidEndEditingNotification)的文档中列举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T09:04:03.640

的可能值

```
NSDictionary *userInfo = [notification userInfo];
int movement = [[userInfo objectForKey:@"NSTextMovement"] intValue]; 
```

其中的在“NSText 类参考”`NSTextDidEndEditingNotification`中记录为[运动代码：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSText_Class/Reference/Reference.html#//apple_ref/doc/constant_group/Movement_Codes)

```
enum {
   NSIllegalTextMovement = 0,
   NSReturnTextMovement  = 0x10,
   NSTabTextMovement     = 0x11,
   NSBacktabTextMovement = 0x12,
   NSLeftTextMovement    = 0x13,
   NSRightTextMovement   = 0x14,
   NSUpTextMovement      = 0x15,
   NSDownTextMovement    = 0x16,
   NSCancelTextMovement  = 0x17,
   NSOtherTextMovement    = 0
}; 
```