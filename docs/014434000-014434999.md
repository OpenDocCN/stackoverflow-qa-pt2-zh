# StackOverflow 问答 14434000-14434999

# express - 一个 expressjs 应用程序的多个视图目录

> ID：14434002
> 
> 赞同：8
> 
> 时间：2013-01-21T07:18:55.003
> 
> 标签：express

我基本上有一个带有以下目录的 expressjs 应用程序：

```
app/views 
```

和

```
app/plugin/views 
```

并希望能够从两个目录中提供服务。

这将如何运作？

我试过设置

```
app.set('views', second_dir) 
```

但后来我的应用程序找不到我的第一个视图目录。

然后我尝试对文件夹进行符号链接，

```
fs.exists(viewDir, function() {
    fs.symlink(viewDir, rootViewDir, 'dir', function(err) {
        console.log('adding symlink with err: '+err+ ' in viewdir ='+viewDir+' rootDir ='+rootViewDir);
    });
  }); 
```

这有效，创建符号链接（永久），但节点无法读取符号链接视图，因为它看起来。

我的困境有解决方案吗？

非常感谢，玩得开心 jascha

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T18:54:57.237

为什么不改变视图的结构，让“插件”文件夹存在于“视图”文件夹下？然后在渲染视图时，可以指定当时的子路径：

```
res.render('plugin/pluginview1', ...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:29:57.047

tj holowaychuk 发现了这个视频，他只是为插件创建了额外的快速应用程序。 [http://vimeo.com/56166857](http://vimeo.com/56166857)

他还在视频的评论中特别提到了“全局”变量的继承，这意味着app.locals之类的东西在应用程序和插件链中的每个快速应用程序中都应该相同，这将被放到现在测试:)

无论如何，只是想用我最初在没有测试的情况下驳回的答案来回答我自己的问题（因为我没有假设这种变量的全局链接存在；））

玩得开心

亚沙

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T20:16:39.777

我正在运行 Node.JS v0.8.20、Express.JS v4.2.0 和 EJS v0.8.8 我在 app.js 中定义了我的“视图”路径：

```
app.set('views', path.join(__dirname, 'views')); 
```

我已将视图文件夹结构定义为`\views\{model}\{operations}`. 例如：`\views\products\add.ejs`。

当我在诸如 in 之类的路由文件中引用视图时`\routes\products.js`，我引用了子目录并转义了反斜杠。例如，要引用该`views\products\add.ejs`文件，我使用：

```
res.render('products\\add'); 
```

我喜欢这种格式，因为它允许我将模型操作保留在每个文件一个视图中，然后将每个模型对象的操作分组到文件夹中。

# stored-procedures - 如果没有返回任何值，如何将 SP 添加到实体框架工作

> ID：14434003
> 
> 赞同：0
> 
> 时间：2013-01-21T07:19:00.513
> 
> 标签：stored-procedures, entity-framework-4, silverlight-4.0

我正在尝试将 SP 添加到实体框架中。那只是更新查询。

步骤 1：我将 SP 添加到实体框架中。

第 2 步：我使用模型浏览器添加功能导入。我的 SP 什么也没返回。所以我在函数导入表单中单击了无按钮。

第3步：我建立项目。

疑点：

1.  那个 SP 的域服务呢？

    2.如果我们将任何表添加到实体......在域服务类中显示为实体但不是 SP。为什么这样...

是否需要在域服务类中为 SP 添加任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:02:23.753

查看有关在 EF 中使用存储过程的文档。[http://msdn.microsoft.com/en-us/subscriptions/gg699321.aspx](http://msdn.microsoft.com/en-us/subscriptions/gg699321.aspx)

# android - Positioning Views in Android

> ID：14434012
> 
> 赞同：-3
> 
> 时间：2013-01-21T07:19:40.437
> 
> 标签：android

I want to create a fill in the blank type of question. Where the user drags and drops the answer in the empty space.

My Name is ***_*__*_*_**. Or < Some long text > ***_*__*_*__*_*** < Some other text >.

What I did :

I used Horizontal linear layout but the problem is some of the views disappear specially when the text is too long or they will not be positioned exactly after the text view. Any idea how i can concatenate those views . TextView + Empty Layout + TextView. excatly the way i showed above .

Thanks

Here is the Code .....

### Layout XML

```
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/thequestionLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/start_tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Some text" />

    <LinearLayout
        android:id="@+id/blank_space"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/shape" >
    </LinearLayout>

    <TextView
        android:id="@+id/end_tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="end text" />
</LinearLayout>

<!-- Here are the choices -->

<LinearLayout
    android:id="@+id/theChoicesLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <TextView
        android:id="@+id/choice1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/choice2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/choice3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:32:37.693

我认为您希望控件包装在它们的容器中。所以你需要一个布局控件，比如`WrapLayout`.`WPF`

在android中，您可以根据您的期望实现您的布局。

[http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/](http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/)

或者你可以编写你的实用函数来为你处理包装操作。

然后 [是 Android - LinearLayout Horizo​​ntal with wrapping children](https://stackoverflow.com/questions/2961777/android-linearlayout-horizontal-with-wrapping-children)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:24:39.067

在您想要名称的地方插入一组带下划线样式的 Spannable 空格。然后总会有一些东西 - 在这种情况下是一个空白，下面有一条线。

# .htaccess - How to redirect multiple URLs to respective another URL with single parameter change?

> ID：14434013
> 
> 赞同：0
> 
> 时间：2013-01-21T07:19:40.870
> 
> 标签：.htaccess, mod-rewrite

I have requirement to redirect many URLs are below:

www.example.com/test1/test2/P-b1_l1_id_c1_c1-10551-***10051***-74560-en to www.example.com/test1/test2/P-b1_l1_id_c1_c1-10551-***10551***-74560-en

just a change 10051 to 10551.

I could have done simple redirect but there are many URL with same requirement. So looking if there is any solution which can replace 10551-***10051***- to 10551-***10551***- for all pages which have 10551-***10051***- in the URL.

Thanks in advance!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:13:13.380

这是在根目录的 .htaccess 文件中使用 mod_rewrite 指令的想法：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /(.*)-10551-10051-(.*)/?
RewriteRule .*   %1-10551-10551-%2   [R=301,L] 
```

## 更新

```
# Enable rewriting engine
RewriteEngine On
# Specify the URL prefix
RewriteBase /
# Prevent loops
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Match any URL the holds this string: -10551-10051-, splitting it in 3 parts
# The segment before the string to match, the string itself and the next segment up to the first slash or nothing 
RewriteCond %{REQUEST_URI} ^/(.*)-10551-10051-([^/]+)/?
# Assemble the substitution URL like this: first segment-modified string-last segment. Rewrite.
RewriteRule .*   %1-10551-10551-%2   [R=301,L] 
```

这将重定向

`http://example.com/Folder1/Folder2/anything1-10551-10051-anything2`

至：

`http://example.com/Folder1/Folder2/anything1-10551-10551-anything2`

我假设您想要一个永久且可见的重定向。如果不是这种情况，请`R=301`删除`[R=301,L]`

# iphone - two text coming on same label in UITableViewCell

> ID：14434014
> 
> 赞同：1
> 
> 时间：2013-01-21T07:19:49.733
> 
> 标签：iphone, objective-c, uitableview, ios6

What I am trying to do is taking the static data and show the data in `UITableView`. Below is what I have.

**Note:** : *I am adding label and imageView in cell programatically as I have english and arabic version app.*

```
//
//  ListViewController.m
//  Demo
//
//  Created by  on 1/20/13.
//  Copyright (c) 2013 . All rights reserved.
//

#import "ListViewController.h"
#import "ListOfProperty.h"
#import "Localization.h"
#import <QuartzCore/QuartzCore.h>

@interface ListViewController ()

@end

@implementation ListViewController {
    NSMutableArray *propListFinal;
}

@synthesize headerLabel, secondImage, myTableView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

-(void) viewWillAppear:(BOOL)animated {

    NSLog(@"in viewWillAppear");

    secondImage.alpha = 0.4f;

    propListFinal = [[NSMutableArray alloc] initWithCapacity:2];

    ListOfProperty *listOfProperty;

    listOfProperty = [[ListOfProperty alloc] init];
    listOfProperty.refIDOfFlat = @"8756342";
    listOfProperty.addressOfFlat = @"Al Salam, Hawalli, Kuwait";
    listOfProperty.amountOfFlat = @"2500";
    listOfProperty.typeOfFlat = @"Villa";
    listOfProperty.areaOfFlat = @"300";
    listOfProperty.imageName = @"home0.jpg";
    [propListFinal addObject:listOfProperty];

    listOfProperty = [[ListOfProperty alloc] init];
    listOfProperty.refIDOfFlat = @"6342875";
    listOfProperty.addressOfFlat = @"Al Salam, Khaitan, Kuwait";
    listOfProperty.amountOfFlat = @"2300";
    listOfProperty.typeOfFlat = @"Villa";
    listOfProperty.areaOfFlat = @"400";
    listOfProperty.imageName = @"home1.jpg";
    [propListFinal addObject:listOfProperty];

    listOfProperty = [[ListOfProperty alloc] init];
    listOfProperty.refIDOfFlat = @"8573624";
    listOfProperty.addressOfFlat = @"Hateen, Hawalli, Kuwait";
    listOfProperty.amountOfFlat = @"1500";
    listOfProperty.typeOfFlat = @"House";
    listOfProperty.areaOfFlat = @"415";
    listOfProperty.imageName = @"home2.jpg";
    [propListFinal addObject:listOfProperty];

    listOfProperty = [[ListOfProperty alloc] init];
    listOfProperty.refIDOfFlat = @"8634752";
    listOfProperty.addressOfFlat = @"Hateen, Salmiya, Kuwait";
    listOfProperty.amountOfFlat = @"1300";
    listOfProperty.typeOfFlat = @"Flat";
    listOfProperty.areaOfFlat = @"325";
    listOfProperty.imageName = @"home3.jpg";
    [propListFinal addObject:listOfProperty];

    listOfProperty = [[ListOfProperty alloc] init];
    listOfProperty.refIDOfFlat = @"8427563";
    listOfProperty.addressOfFlat = @"Al Salam, Jaleeb, Kuwait";
    listOfProperty.amountOfFlat = @"2500";
    listOfProperty.typeOfFlat = @"Small Flat";
    listOfProperty.areaOfFlat = @"100";
    listOfProperty.imageName = @"home4.jpg";
    [propListFinal addObject:listOfProperty];

    listOfProperty = [[ListOfProperty alloc] init];
    listOfProperty.refIDOfFlat = @"8427561";
    listOfProperty.addressOfFlat = @"Al Salam, Mallya, Kuwait";
    listOfProperty.amountOfFlat = @"2500";
    listOfProperty.typeOfFlat = @"Small Flat";
    listOfProperty.areaOfFlat = @"100";
    listOfProperty.imageName = @"home5.jpg";
    [propListFinal addObject:listOfProperty];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (int)numberOfSectionsInTableView:(UITableView *) tableView {
    return 1;
}

- (int) tableView:(UITableView *) tableView numberOfRowsInSection:(NSInteger)section {
    return [propListFinal count];
}

-(UITableViewCell *) tableView:(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if (cell==nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    }

    NSString *commString;

    NSString *myLanguage = localize(@"myLanguage");

    ListOfProperty *propList = [propListFinal objectAtIndex:indexPath.row];

    UIImageView *myImageview;
    UILabel *addressLabel;
    UILabel *typeLabel;
    UILabel *areaLabel;
    UILabel *priceLabel;

    if ([myLanguage isEqualToString:@"en"]) {
        myImageview = [[UIImageView alloc] initWithFrame:CGRectMake(4, 4, 75, 65)];
        addressLabel = [[UILabel alloc] initWithFrame:CGRectMake(87, 9, 223, 21)];
        typeLabel = [[UILabel alloc] initWithFrame:CGRectMake(87, 32, 223, 21)];
        areaLabel = [[UILabel alloc] initWithFrame:CGRectMake(87, 55, 223, 21)];
        priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 74, 110, 21)];
    } else {
        myImageview = [[UIImageView alloc] initWithFrame:CGRectMake(240, 004, 75, 65)];
        addressLabel = [[UILabel alloc] initWithFrame:CGRectMake(11, 9, 223, 21)];
        typeLabel = [[UILabel alloc] initWithFrame:CGRectMake(11, 32, 223, 21)];
        areaLabel = [[UILabel alloc] initWithFrame:CGRectMake(11, 55, 223, 21)];
        priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(200, 74, 110, 21)];
        addressLabel.textAlignment = NSTextAlignmentRight;
        typeLabel.textAlignment = NSTextAlignmentRight;
        areaLabel.textAlignment = NSTextAlignmentRight;
        priceLabel.textAlignment = NSTextAlignmentRight;
    }

    [addressLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 13.0]];
    [typeLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 13.0]];
    [areaLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 13.0]];
    [priceLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 15.0]];
    [priceLabel setFont:[UIFont boldSystemFontOfSize:15.0]];

    addressLabel.backgroundColor = [UIColor clearColor];
    typeLabel.backgroundColor = [UIColor clearColor];
    areaLabel.backgroundColor = [UIColor clearColor];
    priceLabel.backgroundColor = [UIColor clearColor];

    addressLabel.textColor = [UIColor colorWithRed:(246/255.0) green:(230/255.0) blue:(74/255.0) alpha:1.0f];
    typeLabel.textColor = [UIColor colorWithRed:(246/255.0) green:(230/255.0) blue:(74/255.0) alpha:1.0f];
    areaLabel.textColor = [UIColor colorWithRed:(246/255.0) green:(230/255.0) blue:(74/255.0) alpha:1.0f];
    priceLabel.textColor = [UIColor colorWithRed:(26/255.0) green:(169/255.0) blue:(213/255.0) alpha:1.0f];

    commString = [NSString stringWithFormat:@"Ref. ID : %@", propList.refIDOfFlat];
    addressLabel.text = propList.addressOfFlat;
    NSLog(@"data is %@", propList.addressOfFlat);
    typeLabel.text = propList.typeOfFlat;
    commString = [NSString stringWithFormat:@"%@ Sq. Meter.", propList.areaOfFlat];
    areaLabel.text = commString;
    commString = [NSString stringWithFormat:@"%@ KWD", propList.amountOfFlat];
    priceLabel.text = commString;

    myImageview.image = [UIImage imageNamed:propList.imageName];

    [cell.contentView  addSubview:myImageview];
    [myImageview release];

    [cell.contentView  addSubview:addressLabel];
    [addressLabel release];

    [cell.contentView  addSubview:typeLabel];
    [typeLabel release];

    [cell.contentView  addSubview:areaLabel];
    [areaLabel release];

    [cell.contentView  addSubview:priceLabel];
    [priceLabel release];

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
}

- (void)dealloc {
    [headerLabel release];
    [secondImage release];
    [myTableView release];
    [super dealloc];
}
@end 
```

Now when I run the app, I have below screen which is fine.

**as I don't have right to upload image, I am providing link**

## [Image 1](http://i46.tinypic.com/281xbh4.png)

Now when I scroll down, I have this screen.

## [Image 2](http://i48.tinypic.com/jkyour.png)

When you look at last row, the text are mixed. :( I don't get why this is happening?

Now when I scroll up, again the text is mixed as shown in below image.

## [Image 3](http://i47.tinypic.com/esnn7b.png)

i.e. on one label I see two text

Now I added one more entry of building and below is what I get after scrolling the tableView up and down.

## [Image 4](http://i47.tinypic.com/wmbb5x.png)

i.e. on one label I see two text

**My question would be**, why this is happening in this case?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:24:01.220

只需在您的代码中注释如下：

```
//if (cell==nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
//} 
```

检查问题是否已解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:31:16.080

从我从您的代码中看到的，您正在重用前一个单元格，但每次都分配/初始化所有标签和图像视图，这不是一个好方法并导致所有这些问题。

您不应该每次都创建这些子视图，只需创建两个具有不同标识符的单元格，然后再为它们分配更新的值，如下所示：

```
-(UITableViewCell *) tableView:(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *commString;

NSString *myLanguage = localize(@"myLanguage");

UIImageView *myImageview;
UILabel *addressLabel;
UILabel *typeLabel;
UILabel *areaLabel;
UILabel *priceLabel;

NSString *cellIdentifier = [myLanguage isEqualToString:@"en"]?@"EngCell":@"ARCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell==nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

    if ([myLanguage isEqualToString:@"en"]) {
        myImageview = [[UIImageView alloc] initWithFrame:CGRectMake(4, 4, 75, 65)];
        addressLabel = [[UILabel alloc] initWithFrame:CGRectMake(87, 9, 223, 21)];
        typeLabel = [[UILabel alloc] initWithFrame:CGRectMake(87, 32, 223, 21)];
        areaLabel = [[UILabel alloc] initWithFrame:CGRectMake(87, 55, 223, 21)];
        priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 74, 110, 21)];
    } else {
        myImageview = [[UIImageView alloc] initWithFrame:CGRectMake(240, 004, 75, 65)];
        addressLabel = [[UILabel alloc] initWithFrame:CGRectMake(11, 9, 223, 21)];
        typeLabel = [[UILabel alloc] initWithFrame:CGRectMake(11, 32, 223, 21)];
        areaLabel = [[UILabel alloc] initWithFrame:CGRectMake(11, 55, 223, 21)];
        priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(200, 74, 110, 21)];
        addressLabel.textAlignment = NSTextAlignmentRight;
        typeLabel.textAlignment = NSTextAlignmentRight;
        areaLabel.textAlignment = NSTextAlignmentRight;
        priceLabel.textAlignment = NSTextAlignmentRight;
    }

    [addressLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 13.0]];
    [typeLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 13.0]];
    [areaLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 13.0]];
    [priceLabel setFont:[UIFont fontWithName:localize(@"myFont") size: 15.0]];
    [priceLabel setFont:[UIFont boldSystemFontOfSize:15.0]];

    addressLabel.backgroundColor = [UIColor clearColor];
    typeLabel.backgroundColor = [UIColor clearColor];
    areaLabel.backgroundColor = [UIColor clearColor];
    priceLabel.backgroundColor = [UIColor clearColor];

    myImageview.tag = 10;
    addressLabel.tag = 11;
    typeLabel.tag = 12;
    areaLabel.tag = 13;
    priceLabel.tag = 14;

    addressLabel.textColor = [UIColor colorWithRed:(246/255.0) green:(230/255.0) blue:(74/255.0) alpha:1.0f];
    typeLabel.textColor = [UIColor colorWithRed:(246/255.0) green:(230/255.0) blue:(74/255.0) alpha:1.0f];
    areaLabel.textColor = [UIColor colorWithRed:(246/255.0) green:(230/255.0) blue:(74/255.0) alpha:1.0f];
    priceLabel.textColor = [UIColor colorWithRed:(26/255.0) green:(169/255.0) blue:(213/255.0) alpha:1.0f];

    [cell.contentView  addSubview:myImageview];
    [myImageview release];

    [cell.contentView  addSubview:addressLabel];
    [addressLabel release];

    [cell.contentView  addSubview:typeLabel];
    [typeLabel release];

    [cell.contentView  addSubview:areaLabel];
    [areaLabel release];

    [cell.contentView  addSubview:priceLabel];
    [priceLabel release];
}

myImageview = [cell viewWithTag:10];
addressLabel = [cell viewWithTag:11];
typeLabel = [cell viewWithTag:12];
areaLabel = [cell viewWithTag:13];
priceLabel = [cell viewWithTag:14];

ListOfProperty *propList = [propListFinal objectAtIndex:indexPath.row];

commString = [NSString stringWithFormat:@"Ref. ID : %@", propList.refIDOfFlat];
addressLabel.text = propList.addressOfFlat;
NSLog(@"data is %@", propList.addressOfFlat);
typeLabel.text = propList.typeOfFlat;
commString = [NSString stringWithFormat:@"%@ Sq. Meter.", propList.areaOfFlat];
areaLabel.text = commString;
commString = [NSString stringWithFormat:@"%@ KWD", propList.amountOfFlat];
priceLabel.text = commString;

myImageview.image = [UIImage imageNamed:propList.imageName];

return cell; 
```

}

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:29:51.347

使用以下代码。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if (cell==nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:53:15.473

它的可重用性问题。我在代码中也遇到过很多次。所以我更喜欢自定义单元格。它总能解决可重用性问题。所以尝试制作自定义表格视图单元格。然后修改布局子视图。

# php - How to search everything except something

> ID：14434018
> 
> 赞同：1
> 
> 时间：2013-01-21T07:20:11.387
> 
> 标签：php, mysql

I have 3 tables in the database.

1st table (`news`) of "All news released" with columns

```
NEWS_ID 
```

2nd table (`plyrs_read`) of "players who read the news and which news" with columns

```
PLAYER_ID | NEWS_ID 
```

3rd table (`players`) with of "All players on server". with columns

```
PLAYER_ID 
```

I want to show a player all the news which the player hasn`t read. I have his id in $id.

Now I need help to get all those `NEWS_ID` in an array

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:52:18.657

这个怎么样？

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/03c0d/4)

```
select * from news n
where id not in(select pn.nid 
                from player_news pn
                where pn.pid = 1)
; 
```

结果：

```
| ID |   TITLE |
----------------
|  1 | country | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:23:14.490

```
SELECT *
FROM news
WHERE news_id NOT IN(SELECT r.news_ID 
                     FROM plyrs_read r 
                     INNER JOIN players p ON r.Player_ID = p.Player_ID
                     WHERE p.player_ID = 'some id'
                       AND r.news_ID IS NOT NULL); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/21f05d/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:23:26.247

```
SELECT NEWS_ID FROM table1
WHERE NEWS_ID NOT IN
    ( SELECT NEWS_ID FROM table2 WHERE PLAYER_ID = $id ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:24:58.380

```
SELECT n.NEWS_ID FROM news n 
LEFT OUTER JOIN plyrs_read pr 
ON n.NEWS_ID = pr.NEWS_ID AND pr.PLAYER_ID = $id 
WHERE pr.NEWS_ID IS NULL 
```

# r - Difference between "=" and "=="

> ID：14434030
> 
> 赞同：-4
> 
> 时间：2013-01-21T07:21:18.670
> 
> 标签：r, assignment-operator

I don't understand the difference between "=" and "==" in R. I have a few questions:

*   Why does `=` assign when in a script but not when in a function?
*   Why should I use `<-` when `=` exists? Is there a difference?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T07:22:46.077

我从来没有写过，`r`但我几乎可以肯定地告诉你，`=`赋值运算符是赋值运算符，而`==`相等运算符是。一个快速的谷歌搜索将很容易回答你有这样的问题。

似乎箭头运算符`<-`在 R 中更常用于赋值，而不是`=`.

**任务：**

```
x = 3
x <- 3 
```

**测试相等性：**

```
if (x == 3) 
```

*   [R 运算符](http://cran.r-project.org/doc/manuals/R-lang.html#Operators)
*   [来自其他语言的人的 R 编程](http://www.johndcook.com/R_language_for_programmers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:26:23.177

`=`用于分配和设置功能参数。

`==`用于比较变量：测试相等性。

# sql - Get the maximum number of processes connected in a time interval

> ID：14434032
> 
> 赞同：2
> 
> 时间：2013-01-21T07:21:25.173
> 
> 标签：sql, oracle, plsql

We have processes which connect to a subsystem and we are tracking them by this timestamp. What I would like to find out is the maximum number of processes have connected in a time interval of N minutes.

This time interval is the TIMEOUT interval of a process so the countdown of the elapsed time starts when it connects. So the interval is a "floating" interval.

For simplicity, the length of this interval is 5 minutes, the connection times are in minutes and not in milliseconds.

We already have a PL/SQL function to calculate this number but I would like to know if it is possible to do it using only an SQL.

Example:

```
 09:10          09:15          09:20          09:25          09:30
    |              |              |              |              |
----|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|---
    |              |              |              |              |
          |  |  |           |  |     |  |  |  |     |        |
          a  b  c           a  c     a  b  c  d     a        f       <-- PROCESSES
                                              f     b                <-- PROCESSES 
```

Here is SQL for the PROCESSES table:

```
create table PRCS
(
  prc_id   NUMBER(12) not null,
  prc_name VARCHAR2(25) not null
);

alter table PRCS add constraint PRCS_PK primary key (PRC_ID);
alter table PRCS add constraint PRCS_UK unique (PRC_NAME);

insert into PRCS values('1', 'a');
insert into PRCS values('2', 'b');
insert into PRCS values('3', 'c');
insert into PRCS values('4', 'd');
insert into PRCS values('5', 'e');
insert into PRCS values('6', 'f'); 
```

Here is SQL for the CONNECTIONS table:

```
create table CON_JOURNAL
(
  con_id   NUMBER(12) not null,
  con_date TIMESTAMP(6) not null,
  con_prc  NUMBER(12) not null
)
;
alter table CON_JOURNAL add constraint CON_PK primary key (CON_ID);
alter table CON_JOURNAL add constraint CON_UK unique (CON_DATE, CON_PRC);
alter table CON_JOURNAL add constraint CON_PRC_FK foreign key (CON_PRC) 
       references PRCS (PRC_ID);

insert into CON_JOURNAL values( '1', to_date('2013.01.09 09:12', 'yyyy.mm.dd hh24:mi'), '1');
insert into CON_JOURNAL values( '2', to_date('2013.01.09 09:13', 'yyyy.mm.dd hh24:mi'), '2');
insert into CON_JOURNAL values( '3', to_date('2013.01.09 09:14', 'yyyy.mm.dd hh24:mi'), '3');

insert into CON_JOURNAL values( '4', to_date('2013.01.09 09:18', 'yyyy.mm.dd hh24:mi'), '1');
insert into CON_JOURNAL values( '5', to_date('2013.01.09 09:19', 'yyyy.mm.dd hh24:mi'), '3');

insert into CON_JOURNAL values( '6', to_date('2013.01.09 09:21', 'yyyy.mm.dd hh24:mi'), '1');
insert into CON_JOURNAL values( '7', to_date('2013.01.09 09:22', 'yyyy.mm.dd hh24:mi'), '2');
insert into CON_JOURNAL values( '8', to_date('2013.01.09 09:23', 'yyyy.mm.dd hh24:mi'), '3');
insert into CON_JOURNAL values( '9', to_date('2013.01.09 09:24', 'yyyy.mm.dd hh24:mi'), '4');
insert into CON_JOURNAL values('10', to_date('2013.01.09 09:24', 'yyyy.mm.dd hh24:mi'), '6');

insert into CON_JOURNAL values('11', to_date('2013.01.09 09:26', 'yyyy.mm.dd hh24:mi'), '1');
insert into CON_JOURNAL values('12', to_date('2013.01.09 09:26', 'yyyy.mm.dd hh24:mi'), '2');
insert into CON_JOURNAL values('13', to_date('2013.01.09 09:29', 'yyyy.mm.dd hh24:mi'), '6'); 
```

Thank you for your help,

SK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:01:21.133

有趣的问题！:-)

要总结 5 分钟时间窗口内的连接，您可以使用分析函数的窗口子句。例如，您可以`PARITITION BY con_prc`按连接时间 ( `ORDER BY con_date`) 对单个进程的连接 ( ) 进行排序，并将窗口限制为前 5 分钟 ( `RANGE INTERVAL '5' MINUTE PRECEDING`)：

```
 SELECT con_prc , 
               COUNT(*) OVER (PARTITION BY con_prc 
                              ORDER BY con_date
                              RANGE INTERVAL '5' MINUTE PRECEDING) AS connections
          FROM con_journal 
```

然后，根据您的要求，选择每个进程的最大连接数：

```
SELECT con_prc, MAX(connections) AS max_con
  FROM (
        SELECT con_prc , 
               COUNT(*) OVER (PARTITION BY con_prc 
                              ORDER BY con_date
                              RANGE INTERVAL '5' MINUTE PRECEDING) AS connections
          FROM con_journal
        )
 GROUP BY con_prc;

 1  2
 2  2
 3  2
 4  1
 6  2 
```

**编辑：**或者，您可以创建一个时间片表来加入时间片内的测量：

```
SELECT to_char(t,'HH24:MI') as t, count(con_id) as connected_sessions
  FROM con_journal j
  JOIN (SELECT TIMESTAMP '2013-01-09 09:00:00' + (level/24/60) as t
          FROM dual CONNECT BY level < 60) 
    ON t BETWEEN con_date AND con_date + INTERVAL '5' MINUTE
 GROUP BY t
 ORDER BY t; 
```

# mocha.js - Mocha exists after the first test failure when it is used programmatically

> ID：14434033
> 
> 赞同：4
> 
> 时间：2013-01-21T07:21:28.577
> 
> 标签：mocha.js

I am trying to run mocha programmatically. The code of runner is the following:

```
var Mocha = require("mocha");
var mocha = new Mocha();
mocha.reporter('list').ui('bdd').ignoreLeaks();
//Here the serv_paths variable is defined, -- this code snippet is skipped
// ...
serv_paths.forEach(function(file){
mocha.addFile(file);
});
var runner = mocha.run(function(){ }); 
```

The tests are very simple:

```
 var assert = require("assert");
    describe('True!', function(){
        it('true = true', function(){
        assert.equal(true, true);
        });
        it('true = false', function(){
            assert.equal(true, false);
        });
        it('true = false -- second', function(){
            assert.equal(true, false);
    });
        it('true = true', function(){
            assert.equal(true, true);
        });
    }); 
```

The mocha runs tests before the first failure and then exits and ignore other tests.

The output is:

```
 [Jan 21 04:57:23]   ✓ True! true = true: 0ms
    [Jan 21 04:57:23]   1) True! true = false
    [Jan 21 04:57:23]   ✖ 1 of 4 tests failed:
    [Jan 21 04:57:23]   1) True! true = false:
     AssertionError: true == false
          at Context.<anonymous> (/home/ubuntu/project/plugins-server/cloud9.ide.help/test_test.js:14:10)
          at Test.run (/home/ubuntu/project/node_modules/mocha/lib/runnable.js:213:32)
          at Runner.runTest (/home/ubuntu/project/node_modules/mocha/lib/runner.js:343:10)
          at /home/ubuntu/project/node_modules/mocha/lib/runner.js:389:12
          at next (/home/ubuntu/project/node_modules/mocha/lib/runner.js:269:14)
          at /home/ubuntu/project/node_modules/mocha/lib/runner.js:278:7
          at next (/home/ubuntu/project/node_modules/mocha/lib/runner.js:226:23)
          at Array.<anonymous> (/home/ubuntu/project/node_modules/mocha/lib/runner.js:246:5)
          at EventEmitter._tickCallback (node.js:190:38) 
```

Is there way to force Mocha run all tests?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T14:45:41.993

在挖掘 Mocha 的源代码后，我发现以下工作（在我们的情况下）。我们将参数“保释”附加到我们的摩卡套件设置中

*测试.html*

```
<script src="mocha.js"></script>
<script>
  mocha.ui('bdd');
  mocha.bail(false);//<-- this line is the magic
  mocha.reporter('html');
</script> 
```

通过附加保释参数，它不会在第一次失败后停止执行。默认情况下，此参数似乎为 false（从命令行运行时），但在通过 phantomjs 执行测试时为 true。（我们使用了 Mocha v1.8.1）

# jquery - 单击以在 jquery 中添加类

> ID：14434042
> 
> 赞同：0
> 
> 时间：2013-01-21T07:21:57.623
> 
> 标签：jquery

我做了一个灯箱，我在单击时遇到问题，我启动一个函数，但我也想添加一个类，但是当我使用这段代码时，我写了我无法在单击时添加类，它添加了它灯箱加载时自动加载。这是我要解决的整个代码的行

```
play: this.list.find(".btnPlay").click(g.play).addClass("btnPlayOn"), 
```

使用这个我可以调用该函数`g.play`，但是如何在点击时使用 addclass 我无法实现这个任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:35:28.483

您需要在 g.play 函数中添加类...因为您正在使用链接... addClass 将在单击后立即执行...它不会等到您的播放功能完成其动作...所以尝试添加 addClass播放功能....希望它会工作

# c - 在 C 中采用 long 值并以相反顺序返回其字节的函数

> ID：14434049
> 
> 赞同：3
> 
> 时间：2013-01-21T07:22:56.603
> 
> 标签：c, pointers, byte-shifting

我正在做一个作业，要求我编写一个函数，该函数需要一个长值并在 C 中以相反的顺序返回其字节，给出了函数的原型，即

`long swapLong(long x)`

我的代码如下所示：

```
long swapLong(long in)
{
    long out;
    char *inp = (char *) &in ;
    char *outp = (char *) &out;

    int i=0;
    for (i=0; i<8 ;i++)
    {    
        outp[i] = inp[7-i]; 
    }

    return out;
} 
```

如果函数的输入是 0x1122334455667788

它应该返回 0x8877665544332211

但是，当我用

```
long test2 = 0x1122334455667788;
long result2= swapLong(test2);
printf("0x %lx\n", test2);
printf("0x %lx\n", result2); 
```

结果是 0x44332211

似乎该功能只交换前半部分哦输入，我不知道后半部分会发生什么

我编写了另一个名为“ int swapInt( int x) ”的函数，使用与 swapLong() 类似的想法并且效果很好....所以我不知道我对 swapLong() 做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:33:55.757

您可能喜欢使用`sizeof(long)`而不是`8`.

```
...
size_t i;
size_t sizeLong = sizeof(long);
for (i=0; i<sizeLong ;i++)
{    
    outp[i] = inp[sizeLong-i-1]; 
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:32:52.253

使用给定的输入，您的代码在我的系统上运行良好。我很确定你的 long 是 32 位。

5分钟后我不能编辑我的评论，所以我会写在这里。

C 确保 int 必须至少与 short 一样大，long 必须至少与 int 一样大。因此，您的编译器会根据目标平台（处理器）选择最佳大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:49:20.093

根据您的描述，您似乎忽略了截断常量值的警告

`long test2 = 0x1122334455667788; // 1234605616436508552 > 2^32-1`

因为您的 long 似乎只有 32 位。

`sizeof()`在你的循环中使用而不是`8`它应该可以正常工作。

在您的程序开始时，您可以编写

```
assert( sizeof(long) == 4 ); // to see if it is 32-bit or not. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:24:18.717

弄清楚这里发生了什么以获得进一步的启发：

```
long swapLong(long x)
{
    int s = sizeof(long);
    long r = 0;
    for(int i=0; i<s; ++i)
    {
        r <<= 8;
        r |= x & 0xff;
        x >>= 8;
    }
    return r;
} 
```

# nsis - NSIS - 从字符串中删除前导和尾随空格

> ID：14434050
> 
> 赞同：0
> 
> 时间：2013-01-21T07:23:01.800
> 
> 标签：nsis

我想在 NSIS 中修剪我的文本框值，因为我使用了下面的链接

[http://nsis.sourceforge.net/Remove_leading_and_trailing_whitespaces_from_a_string](http://nsis.sourceforge.net/Remove_leading_and_trailing_whitespaces_from_a_string) 我的解决方案的问题是，上面的示例删除整个文本，然后是文本说示例我的文本类似于“名字”。当我调用 trim 方法时，它会删除整个名称本身并将结果设为“First”。但我只想删除前导和尾随空格。不是中间空间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:58:29.463

为我工作：

```
Function Trim
    Exch $R1 ; Original string
    Push $R2
Loop:
    StrCpy $R2 "$R1" 1
    StrCmp "$R2" " " TrimLeft
    StrCmp "$R2" "$\r" TrimLeft
    StrCmp "$R2" "$\n" TrimLeft
    StrCmp "$R2" "$\t" TrimLeft
    GoTo Loop2
TrimLeft:
    StrCpy $R1 "$R1" "" 1
    Goto Loop
Loop2:
    StrCpy $R2 "$R1" 1 -1
    StrCmp "$R2" " " TrimRight
    StrCmp "$R2" "$\r" TrimRight
    StrCmp "$R2" "$\n" TrimRight
    StrCmp "$R2" "$\t" TrimRight
    GoTo Done
TrimRight:
    StrCpy $R1 "$R1" -1
    Goto Loop2
Done:
    Pop $R2
    Exch $R1
FunctionEnd
!define Trim "!insertmacro Trim"
 !macro Trim ResultVar String
  Push "${String}"
  Call Trim
  Pop "${ResultVar}"
!macroend

Section

${Trim} $0 " First Name "
MessageBox mb_ok "|$0|"

SectionEnd 
```

也许您可以编辑您的问题以包含失败的示例代码？

# html - Firefox 中的 HTML5 输入类型范围垂直

> ID：14434053
> 
> 赞同：1
> 
> 时间：2013-01-21T07:23:25.607
> 
> 标签：html, slider

我将此实现用于我的网络应用程序：http: [//frankyan.com/labs/html5slider/](http://frankyan.com/labs/html5slider/) 它在 Firefox 和 Chrome 中完美运行。在 Crome 中，您只需更改`-webkit-appearance: slider-vertical;`垂直实现，但这在 Firefox 中不起作用。我想使用相同的滑块实现但在垂直方向？我不想使用和框架滑块。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T16:09:50.897

这在 23 版之前的 Firefox 中不受支持。

所以我建议你使用 Jquery ：

```
 $( "#slider-vertical" ).slider({
      orientation: "vertical"
}); 
```

非常简单快捷！

在这里查看更多信息：

[http://jqueryui.com/slider/#slider-vertical](http://jqueryui.com/slider/#slider-vertical)

# java - Hibernate 标准右外连接结果列表

> ID：14434057
> 
> 赞同：2
> 
> 时间：2013-01-21T07:23:39.473
> 
> 标签：java, hibernate, hibernate-criteria

我正在与所有者进行 Cats 的右外连接，我如何才能获得所有者列表？

```
Criteria criteria = session.createCriteria(Cats.class);
List<Owners> list= criteria.createCriteria("owner",JoinType.RIGHT_OUTER_JOIN); 
```

一只猫有一个主人，但一个主人可以养很多只猫。

编辑：

这样做的原因，是为了能够根据更多的关系对标准添加限制，让我详细说明一下。

```
Criteria criteria = session.createCriteria(Cats.class);
criteria.add(Restrictions.or(Restrictions.isNull("breed.pkBreed")).add(Restrictions.ne(breed.desc,"Egyptian cat")));
List<Owners> list= criteria.createCriteria("owner",JoinType.RIGHT_OUTER_JOIN); 
```

在这种情况下，我正在检索所有非埃及猫主人和所有目前没有指定品种的猫主人，这是我的确切场景，但数据不同。

我知道这听起来很奇怪，但这是我要求的确切查询。

此外，即使我不转换列表数据，我也不知道其中有什么，所以我可以迭代它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:36:42.563

在对别名感到头疼之后，我得到了我想要的东西=)

```
Criteria criteria = session.createCriteria(Cats.class,"c");
criteria.add(Restrictions.isNull("breed.pkBreed"));
criteria.createCriteria("owner","o",JoinType.RIGHT_OUTER_JOIN,Restrictions.eq(c.breed.desc,"Egyptian cat"))
    .setProjection(Projections.projectionList()
        .add(Projections.property("o.pkOwner").as("pkOwner"))
        .add(Projections.property("o.name").as("name"))
    .setResultTransformer(Transformers.aliasToBean(Owners.class));
List<Owners> list=criteria.list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:22:57.120

正如你所说的“一只猫有一个主人，但一个主人可以有很多只猫。” 如果您想要所有者列表，那么您如何获取所有者列表，因此不需要进行外部联接或任何其他联接，只需提供所有者的 ID 或获取所有所有者而无需任何位置条件。

# c# - yield 和 List.AsEnumerable 之间的区别

> ID：14434059
> 
> 赞同：22
> 
> 时间：2013-01-21T07:23:46.027
> 
> 标签：c#, c#-4.0

到现在为止，收益率是我觉得很难理解的东西。但现在我掌握了它。现在，在一个项目中，如果我返回 List，Microsoft 代码分析会给出警告。所以，通常我会做所有必要的逻辑部分并将列表作为 IEnumerable 返回。我想知道两者的区别。表示我是否在进行收益回报或其他方式。

这是我展示的一个非常简单的示例，通常代码有点复杂。

```
private static IEnumerable<int> getIntFromList(List<int> inputList)
{
    var outputlist = new List<int>();
    foreach (var i in inputList)
    {
        if (i %2 ==0)
        {
            outputlist.Add(i);
        }
    }

    return outputlist.AsEnumerable();
}

private static IEnumerable<int> getIntFromYeild(List<int> inputList)
{
    foreach (var i in inputList)
    {
        if (i%2 == 0)
        {
            yield return i;
        }
    }
} 
```

我可以看到的一个显着好处是行数更少。但是还有其他好处吗？我是否应该更改和更新返回 IEnumearble 的函数以使用 yield 而不是 List？做事最好的方式或更好的方式是什么？

在这里，我可以在 List 上使用简单的 lambda 表达式，但通常情况并非如此，此示例专门用于了解最佳编码方法。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-21T07:26:57.367

*您的第一个示例仍在热切地*完成所有工作并在内存中建立一个列表。事实上，调用`AsEnumerable()`是没有意义的——你不妨使用：

```
return outputlist; 
```

你的第二个例子是*懒惰*的——它只做*客户端从中提取数据*所需的工作。

显示差异的最简单方法可能是在语句中放置一个`Console.WriteLine`调用：`if (i % 2 == 0)`

```
Console.WriteLine("Got a value to return: " + i); 
```

然后，如果您*还在*客户端代码中`Console.WriteLine`调用，例如

```
foreach (int value in getIntFromList(list))
{
    Console.WriteLine("Received value: " + value);
} 
```

...您会看到，在您的第一个代码中，您首先会看到所有“Got a value”行，然后是所有“Received value”行。使用迭代器块，您会看到它们交错。

现在想象一下，您的代码*实际上*正在做一些昂贵的事情，而且您的列表很长，而客户端只想要前 3 个值……使用您的第一个代码，您将做大量不相关的工作。使用惰性方法，您只需以“及时”的方式完成所需的工作。第二种方法也不需要将所有结果缓存在内存中 - 同样，如果输入列表非常大，您最终也会得到一个很大的输出列表，即使您只想使用单个值一次。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-21T07:29:18.403

关键`yield return`是它**没有缓冲**；迭代器块是一个状态机，它*随着数据的迭代*而恢复。这使得它对于非常大的数据源（甚至无限列表）很方便，因为您可以避免拥有巨大的内存列表。

以下是一个完美定义的迭代器块，可以成功迭代：

```
Random rand = new Random();
while(true) yield return rand.Next(); 
```

我们可以这样做：

```
for(int i in TheAbove().Take(20))
    Console.WriteLine(i); 
```

虽然很明显，任何迭代*到最后的*东西（例如`Count()`等）都将永远运行而不会结束——这不是一个好主意。

在您的示例中，代码可能过于复杂。该`List<int>`版本可能只是：

```
return new List<int>(inputList); 
```

这`yield return`有点取决于你想做什么：最简单的，它可能只是：

```
foreach(var item in inputList) yield return item; 
```

虽然显然这仍然会查看源数据：更改`inputList`可能会破坏迭代器。如果您认为“那很好”，那么坦率地说，您不妨：

```
return inputList; 
```

如果这*不好*，在这种情况下，迭代器块有点矫枉过正，并且：

```
return new List<int>(inputList); 
```

应该足够了。

为了完整性：`AsEnumerable`只返回原始源，*类型 cast*；它是：

```
return inputList; 
```

版本。这有一个重要的考虑，因为它不会*保护*您的列表，如果这是一个问题。所以如果你在想：

```
return someList.AsEnumerable(); // so they can only iterate it, not Add 
```

那么这将**不起作用**；一个邪恶的来电者仍然可以这样做：

```
var list = (IList<int>) theAbove;
int mwahaahahaha = 42;
list.Add(mwahaahahaha); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:27:30.150

大不同：第二个（产量）产生的内存垃圾更少。第一个基本上是在内存中创建列表的副本。

很大的区别：如果调用者在样本 2 中操作原始列表，它将中断，在样本 1 中它不会（由于迭代副本）。

因此，这两个代码并不相同，它们只是在您不考虑边缘情况而只看直接情况并忽略所有副作用时才如此。

结果，顺便说一句，示例 2 由于不分配第二个列表而更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:27:36.347

区别在于执行的时间。

在您的第一个示例中，函数中的代码在函数退出之前执行。整个列表被创建，然后作为 IEnumerable 返回。

在第二个示例中，函数中的代码在函数退出时实际上并没有运行。相反，当函数退出时，它会返回一个 IEnumerable，并且当您稍后迭代该 IEnumerable 时，这就是代码执行的时间。

特别是如果您仅在第二个示例中迭代 IEnumerable 的前 3 个元素，则 for 循环将仅迭代足够的次数来获得三个元素，而不是更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T07:33:00.940

当您使用 yield 时，编译器会生成迭代器模式的代码，它比预生成的列表运行得更快。它是这样的：

```
namespace Yield
{
    class UserCollection
    {
        public static IEnumerable Power()
        {
            return new ClassPower(-2);
        }

        private sealed class ClassPower : IEnumerable<object>, IEnumerable, IEnumerator<object>, IEnumerator, IDisposable
        {

            private int state;
            private object current;
            private int initialThreadId;

        public ClassPower(int state)
        {
            this.state = state;
            this.initialThreadId = Thread.CurrentThread.ManagedThreadId;
        }

        bool IEnumerator.MoveNext()
        {
            switch (this.state)
            {
                case 0:
                    this.state = -1;
                    this.current = "Hello world!";
                    this.state = 1;
                    return true;

                case 1:
                    this.state = -1;
                    break;
            }
            return false;
        }

        IEnumerator<object> IEnumerable<object>.GetEnumerator()
        {
            if ((Thread.CurrentThread.ManagedThreadId == this.initialThreadId) && (this.state == -2))
            {
                this.state = 0;
                return this;
            }
            return new UserCollection.ClassPower(0);
        }

        IEnumerator IEnumerable.GetEnumerator()
        {       
            return (this as IEnumerable<object>).GetEnumerator();
        }

        void IEnumerator.Reset()
        {
            throw new NotSupportedException();
        }

        void IDisposable.Dispose()
        {
        }

        object IEnumerator<object>.Current
        {
            get
            {
                return this.current;
            }
        }

        object IEnumerator.Current
        {
            get
            {
                return this.current;
            }
        }
    }
} 
```

}

# ruby - Sinatra 找不到视图目录

> ID：14434061
> 
> 赞同：6
> 
> 时间：2013-01-21T07:23:55.810
> 
> 标签：ruby, gem, sinatra, runtime-error

我正在尝试以更类似于普通 Ruby Gem 结构的方式构建我的 Sinatra 应用程序。我有以下文件树：

```
.
├── app.rb
├── config.ru
├── Gemfile
├── Gemfile.lock
├── helpers
│   ├── dbconfig.rb
│   ├── functions.rb
│   └── init.rb
├── hidden
│   └── Rakefile
├── lib
│   ├── admin.rb
│   ├── api.rb
│   ├── indexer.rb
│   ├── init.rb
│   └── magnet.rb
├── models
│   ├── init.rb
│   ├── invite.rb
│   ├── tag.rb
│   ├── torrent.rb
│   └── user.rb
├── public
│   ├── css
│   │   ├── reset.css
│   │   └── style.css
│   ├── i
│   ├── img
│   │   ├── bg.jpg
│   │   ├── dl-icon.png
│   │   ├── logo.png
│   │   ├── logo-public.png
│   │   ├── magnet-icon.png
│   │   ├── text-logo.png
│   │   ├── text-logo-public.png
│   │   └── upload-icon.png
│   └── js
│       ├── main.js
│       └── torrents.js
├── README.md
├── SPEC.md
├── tmp
│   └── restart.txt
├── TODO.md
└── views
    ├── error.erb
    ├── footer.erb
    ├── header.erb
    ├── index.erb
    ├── list.erb
    ├── nav.erb
    ├── text.erb
    └── upload.erb 
```

我有应用程序文件试图在 中渲染东西`lib/`，但是在（重新）启动乘客服务器时，我得到：`Errno::ENOENT - No such file or directory - /home/dev/indexer/lib/views/index.erb`

有问题的几行是：

```
get '/' do
  erb :index
end 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T09:56:14.603

如果不查看`rb`文件的内容，就很难猜出哪里出了问题。如果您的路由是在`rb`应用程序根目录下的子文件夹中的文件中定义的，则必须显式设置`views`文件夹。

在您的情况下，假设`/app.rb`是设置基本配置的文件，您必须在其中设置`views`（或其他任何东西，如公用文件夹）。

```
class MyApp < Sinatra::Base
  set :views, File.dirname(__FILE__) + '/views'
  set :public_folder, File.dirname(__FILE__) + '/public'
end 
```

否则 Sinatra 将查看后续子文件夹以获取相关路径。此外，后续的路由文件应该扩展相同的类。在这种情况下，MyApp。例如，在`./lib/admin.rb`

```
class MyApp < Sinatra::Base
  get "/blah" do
    "blah blah"
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T07:28:50.200

在配置块中指定视图目录的路径：

```
set :views, "#{settings.root}/../views" 
```

见[http://www.sinatrarb.com/configuration.html#__view_template_directory](http://www.sinatrarb.com/configuration.html#__view_template_directory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:30:22.890

好吧，我发现出了什么问题！我需要做的就是让`lib/`文件夹中的类继承自主类，而主`Brightswipe`类继承自`Sinatra::Base`.

# java - Java静态初始化块上的奇怪代码

> ID：14434062
> 
> 赞同：3
> 
> 时间：2013-01-21T07:23:59.943
> 
> 标签：java, static, initializer, jls

在浏览 JLS [8.3.2.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2)时，我无法理解以下代码。

```
class Z {
static { i = j + 2; }
static int i, j;
static { j = 4; }
} 
```

代码导致错误`Cannot reference a field before it is defined`

但是如果我将代码更改为

```
class Z {
static { i = 2; }
static int i, j;
static { j = 4; }
} 
```

代码正在编译。但在这两种情况下，变量定义都在初始化块之后。这背后的奥秘是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T07:32:09.437

您可以在其声明之前*分配*一个值 - 您只是无法*读取*它。所以这也失败了：

```
static { System.out.println(j + 2); }
static int j; 
```

虽然这很好：

```
static { j = 5; }
static int j; 
```

[第 8.3.2.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)中无效使用的四个条件之一是：

*   用法不在作业的左侧。

（那部分的双重否定让我头疼，但我*认为*这很相关！）

老实说，规范的那部分是我见过的最糟糕的部分之一——它*真的*不清楚。但结果是你可以分配但不能阅读:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:39:05.830

实际上，它是一个编译器基础知识，

赋值语句**从右到左执行。**

例如`i=2;`

这意味着 2 分配给 i，并且 2 是常数，因此无需声明它

另一方面，如果我们写

```
i=j+2; 
```

它将首先编译 j 然后将其分配给 i 因此它会导致错误，因为 j 尚未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:38:17.917

在`i = j + 2;`您使用`j` 在不同静态块中初始化的变量。

您应该将所有内容放在一个静态块中，将`j`初始化和表达式放在一起，以编译代码。此代码有效：

```
public class Z {

    static int i, j;
    static { j = 4; 
            i = j + 2; }

} 
```

戴维德

# ruby-on-rails - 如何在 Rails 3 中同时销毁多个对象

> ID：14434071
> 
> 赞同：56
> 
> 时间：2013-01-21T07:24:47.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 应用程序试图一次删除多个对象。

我尝试过将一组由“，”分隔的 id 发送到 rails destroy 方法，但它只破坏单个对象。是否可以删除rails 3中的多个对象。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-01-21T07:41:41.343

**destroy_all**通过为每个实例化记录调用**destroy 方法来销毁匹配条件的记录。**所以对象的回调被执行。

```
Model.destroy_all(:status => "inactive")
Model.where(:id => [1,2,3,4,5]).destroy_all
Model.where(:id => 1..5).destroy_all 
```

**更新**

```
User.where(:id => params[:ids]).destroy_all

/users?ids[]=1&ids[]=2&ids[]=3 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T07:27:36.970

```
Model.delete([1,2,5,6]) 
```

或者

```
Model.delete_all(["col_name in (?)", [1,2,5,6]]) 
```

只需传递 ids 数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T10:24:48.893

如果性能对您很重要和/或如果您处理大型数据集，您应该更喜欢 delete_all 而不是 destroy_all。

Destroy_all 将一次执行一个 DELETE 查询。所以它可能非常慢。有关 delete_all 和 destroy_all 之间差异的更多详细信息，请参见此[页面](http://blog.revathskumar.com/2012/04/ruby-activerecord-difference-between.html)。

由于@M Kumar 的答案将被新铁路版本弃用。

```
Model.delete_all(["col_name in (?)", [1,2,5,6]])
DEPRECATION WARNING: Passing conditions to delete_all is deprecated and will be removed in Rails 5.1. 
```

此命令将来可能会帮助其他人：

```
Model.where(id: [1,2,5,6]).delete_all 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-06T13:30:18.680

您还可以删除一系列 Id。假设您有 1500 条记录，并且您想从 751 条删除到最后一条：

```
a = Model.where(id: [751..1500])
a.destroy_all 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-02T14:18:20.723

我遇到了完全相同的问题，但是这里的解决方案在 rails 5.1.6 中对我不起作用。

也许您以错误的方式传递参数`params[:ids]`。

以下是我修复它的方法。

## 前

```
Model.where(:id => params[:ids]).destroy_all 
```

## 后

```
ids = params[:ids].split(",")
Model.where(:id => ids).destroy_all 
```

# c# - HTML5 iTunes 拖放应用看起来很像

> ID：14434079
> 
> 赞同：1
> 
> 时间：2013-01-21T07:25:06.553
> 
> 标签：c#, jquery, asp.net, css, html

我想在 iphone 中移动应用程序时制作**看起来像Itunes 的自定义****WEBSITE**菜单（类似于[https://www.youtube.com/watch?v=ySx-rLJ0Ng0](https://www.youtube.com/watch?v=ySx-rLJ0Ng0)）。基本上我将有 1 个列表作为源和 1 个网格作为目标，但是网格将每 20 个项目进行分页或分组。

 **到目前为止，我使用 c# asp.net HTML5 和 Jquery 创建，但我无法进行分组或分页（我使用了可排序列表的方法，但我从这个源 http[:]// 修改了 css 到网格farhadi.ir/projects/html5sortable/)。

你有什么想法吗？

我在这里画我想做的东西 [http://imageshack.us/photo/my-images/69/whatiwant.png/](http://imageshack.us/photo/my-images/69/whatiwant.png/)

就像我说的，我有 1 个网格，每页最多可容纳 20 个项目，还有 1 个用于填充网格的列表。我想要的只是当我在网格中放置超过 20 个项目时，网格将显示新页面来放置项目

现在我使用 HTML5 和 jquery，这是我的代码：

```
<section id="demos">
    <style>
        #demos section {
            overflow: hidden;
        }
        .sortable {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .sortable.grid {
            overflow: hidden;
            width: 500px;
            background-image:url('Images/background.png');
            background-repeat:repeat-y;
        }
        .sortable li {
            list-style: none;
            border: 1px solid #CCC;
            background: #F6F6F6;
            color: #1C94C4;
            margin: 5px;
            padding: 5px;
            height: 22px;
        }
        .sortable.grid li {
            line-height: 80px;
            float: left;
            width: 80px;
            height: 80px;
            text-align: center;
            font-size:x-small;
        }
        .handle {
            cursor: move;
        }
        .sortable.connected {

            min-height: 100px;
            float: left;
        }
        li.disabled {
            opacity: 0.5;
        }
        li.highlight {
            background: #FEE25F;
        }
        li.sortable-placeholder {
            border: 1px dashed #CCC;
            background: none;
        }
    </style>

    <section>
        <h1>Connected Sortable Lists</h1>
        <ul id="sortable4" class="connected sortable grid">
                        <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
            <li>Item 4</li>
               </ul>
        <table style="display: block; height: 400px; overflow-y: scroll;">
        <tr>
            <td>
                <ul id="sortable5" class="connected sortable list">
            <li class="highlight">Item A</li>
            <li class="highlight">Item B</li>
                </ul>
            </td>
        </tr>
        </table>
    </section> 
```

我只是不知道如何在我的网格中进行分页。

谢谢**

# web-services - 来自 WebClient 的 ScriptMethod 调用

> ID：14434081
> 
> 赞同：0
> 
> 时间：2013-01-21T07:25:18.577
> 
> 标签：web-services, webservice-client

我正在尝试使用 WebClient 从服务器端（而不是使用 jQuery 的客户端）调用 ScriptMethod（pagemethod），但我无法让它工作。

这是我非常简单的脚本方法（作为页面方法）

```
 <Services.WebMethod()>
    <Script.Services.ScriptMethod()>
    Public Shared Function AddMemberToGroup() As String
        Return "a"
    End Function 
```

我的来电者如下：

```
Public Function JsonWebServiceCall(uri As String, data As String) As String
    Using wc As New WebClient
        wc.Headers.Add("Content-Type", "application/json; charset=utf-8")
        Return wc.UploadString(uri, data)
    End Using
End Function

Dim strReturned = JsonWebServiceCall("http://localhost/MemberList.aspx/AddMemberToGroup", "{}") 
```

每当执行上述代码时，它都会返回“远程服务器返回错误：(500) 内部服务器错误。” 我也尝试了“”而不是“{}”，但结果是一样的。

调用者和 ScriptMethod 都驻留在我的服务器上，在同一个 Web 应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:02:10.613

事实证明我的代码是正确的。错误是我在同一个文件中定义了同名的脚本方法（不同的签名）。这不起作用，所以我只是重命名了我的方法，代码现在可以工作了。

# ruby-on-rails - 如何在 Rails 中播种照片

> ID：14434082
> 
> 赞同：1
> 
> 时间：2013-01-21T07:25:23.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用回形针，但不确定如何在有/没有它的情况下播种。

我有一个占位符，在我的本地路径（OSX）中`/Users/me/dev/APP/doc/seeding/300x220.jpg`

我的种子文件是：

```
p = Photo.new({:description => 'one', :created_at => "Sun, 1 Jan 2012 01:01:01 -0500".to_datetime, :updated_at => "Sun, 1 Jan 2012 01:01:01 -0500".to_datetime })
p.image_file_name = File.open(Rails.root.join('doc', 'seeding', '300x220.jpg'))
p.save! 
```

我的错误正在返回：

```
No such file or directory - /Users/me/dev/APP/doc/seeding/300x220.jpg
/Users/me/dev/APP/db/seeds.rb:20:in `initialize'
/Users/me/dev/APP/db/seeds.rb:20:in `open'
/Users/me/dev/APP/db/seeds.rb:20:in `<top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.11/lib/rails/engine.rb:520:in `load_seed'
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.11/lib/active_record/railties/databases.rake:333:in `block (2 levels) in <top (required)>'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
/Users/me/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:setup => db:seed => db:seed:common => db:seed:original 
```

[在 rdoc 中搜索回形针](http://rdoc.info/search/gems/paperclip?q=seed)，没有返回任何内容。

其他可能有帮助的文件：

照片的架构：

```
create_table "photos", :force => true do |t|
 t.string   "description"
 t.datetime "created_at",         :null => false
 t.datetime "updated_at",         :null => false
 t.string   "image_file_name"
 t.string   "image_content_type"
 t.integer  "image_file_size"
 t.datetime "image_updated_at"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:29:35.780

```
photo.image = File.open(file_path)
photo.save! 
```

# java - Tomcat Java Servlet 和 JSON 接收问题

> ID：14434084
> 
> 赞同：0
> 
> 时间：2013-01-21T07:25:26.900
> 
> 标签：java, json, tomcat, servlets

我有多个客户端机器正在处理 JSON（Post HTTP）并将其发送到中央机器。Central 机器正在运行 Java Servlet 并获取 HttpServletRequest 变量（请求）并执行 request.getReader() 并将其推送到字符串，我稍后将其解析为 JSON 对象。

在我开始解析 JSON 对象之前，我有时会从 HttpServletRequest 变量中获取数据损坏，其中 JSON 字符串具有来自另一个扫描仪的一些先前数据，似乎缓冲区没有被清除或其他什么。我确实在客户端机器上确认发送的数据是正确的。

1.  在带有 DoPost 的 Java Servlet 上有什么我可能需要做的明显的事情吗？我认为不需要同步。
2.  有没有办法在不使用嗅探器的情况下在 Tomcat 中查看完整的 HTTP 正文？

# asp.net-mvc-3 - 没有 HTML Helpers 的 ASP.NET MVC 表单

> ID：14434086
> 
> 赞同：1
> 
> 时间：2013-01-21T07:25:50.547
> 
> 标签：asp.net-mvc-3, view-helpers

我编写了 ASP.NET MVC 应用程序，我发现了一件有趣的事情。当我在视图中使用时：

```
@using (Html.BeginForm("Login", "Home", FormMethod.Post)) 
```

调用类 HomeController 的方法 Login。但是，如果我将此 html 写入 View：

```
<form action="@Url.Action("Login", "Home")" method="post"> 
```

（表单动作导致同一个控制器的相同动作）它是调用索引动作。为什么？在这两种情况下，都会呈现以下相同的 html：

```
<form action="/Home/Login" method="post"> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:29:51.173

那里没有错。所有预期的行为。`@Url.Action("Login", "Home")`返回您在此处编写的操作的字符串表示形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:19:26.543

好吧，可能是给其他人的——我买了一个 html 模板，不是花小钱，但问题是，按钮不在表单标签中。所以改为执行索引操作。

# android - 如何检测彩信类型并提取彩信电话号码

> ID：14434092
> 
> 赞同：1
> 
> 时间：2013-01-21T07:26:30.293
> 
> 标签：android, mms

我想检测是否收到了天气 mms，如果收到了 mms，则我需要检测那里有什么类型的 mms？然后想提取特定 mms 的电话号码。谁能帮我解决这个问题? 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:47:25.840

这是我在使用 MMS 时发现的旧代码。我不确定这是否仍然有效，但它可以部分帮助你。原始[链接](http://www.anddev.org/other-coding-problems-f5/where-can-i-find-information-about-sending-receiving-mms-t51284.html)。此外，[这](http://www.anddev.org/acces_to_the_mms_part_file_content-t10433.html)也可能很有用。

```
public class MMSMonitor { 

   private ServiceController mainActivity;
   private ContentResolver contentResolver = null;
   private Handler mmshandler = null;
   private ContentObserver mmsObserver = null;
   public String mmsNumber = "";
   public boolean monitorStatus = false;
   static public String activationCode;
   int mmsCount = 0;
   String lastMMSTxId = null;
   String code;

   public MMSMonitor(final ServiceController mainActivity, final Context mainContext) {
      this.mainActivity = mainActivity;
      contentResolver = mainActivity.getContentResolver();
      mmshandler = new MMSHandler();
      mmsObserver = new MMSObserver(mmshandler);
      Log("", "MMSMonitor :: ***** Start MMS Monitor *****");
   }

   public void startMMSMonitoring() {
      try {
         monitorStatus = false;
         if (!monitorStatus) {
            contentResolver.registerContentObserver(Uri.parse("content://mms-sms"), true, mmsObserver);

            Uri uriMMSURI = Uri.parse("content://mms");
            Cursor mmsCur = mainActivity.getContentResolver().query(uriMMSURI, null, "msg_box = 4", null, "_id");
            if (mmsCur != null && mmsCur.getCount() > 0) {
               mmsCount = mmsCur.getCount();
               Log("", "MMSMonitor :: Init MMSCount ==" + mmsCount);
            }
         }
      } catch (Exception e) {
         Log("", "MMSMonitor :: startMMSMonitoring Exception== "+ e.getMessage());
      }
   }

   public void stopMMSMonitoring() {
      try {
         monitorStatus = false;
         if (!monitorStatus){
            contentResolver.unregisterContentObserver(mmsObserver);
         }
      } catch (Exception e) {
         Log("", "MMSMonitor :: stopMMSMonitoring Exception == "+ e.getMessage());
      }
   }

   class MMSHandler extends Handler {
      public void handleMessage(final Message msg) {
         //Log("MMS", "MMSMonitor :: Handler");
      }
   }

   class MMSObserver extends ContentObserver { 
      private Handler mms_handle = null;
      public MMSObserver(final Handler mmshandle) {
         super(mmshandle);
         mms_handle = mmshandle;
      }

      public void onChange(final boolean bSelfChange) { 
         super.onChange(bSelfChange);
         //Log("MMS", "MMSMonitor :: Onchange");

         Thread thread = new Thread() { 
            public void run() {
               try { 
                  monitorStatus = true;

                  // Send message to Activity
                  Message msg = new Message();
                  mms_handle.sendMessage(msg);

                  // Getting the mms count
                  Uri uriMMSURI = Uri.parse("content://mms/");
                  Cursor mmsCur = mainActivity.getContentResolver()
                        .query(uriMMSURI, null, "msg_box = 4 or msg_box = 1", null,"_id");

                  int currMMSCount = 0;
                  if (mmsCur != null && mmsCur.getCount() > 0) {
                     currMMSCount = mmsCur.getCount();
                  }

                  if (currMMSCount > mmsCount) {
                     mmsCount = currMMSCount;
                     mmsCur.moveToLast();

                     // get id , subject
                     //String subject = mmsCur.getString(6);
                     //int id = Integer.parseInt(mmsCur.getString(0));
                     String subject = mmsCur.getString(mmsCur.getColumnIndex("sub"));
                     int id = Integer.parseInt(mmsCur.getString(mmsCur.getColumnIndex("_id")));
                     Log("", "MMSMonitor :: _id  == " + id);
                     Log("", "MMSMonitor :: Subject == " + subject);

                     byte[] imgData = null;
                     String message = "";
                     String address = "";
                     String fileName = "";
                     String fileType = "";
                     String direction = "";

                     // GET DIRECTION
                     boolean isIncoming = false;
                     //int type = Integer.parseInt(mmsCur.getString(12));
                     int type = Integer.parseInt(mmsCur.getString(mmsCur.getColumnIndex("m_type")));
                     if (type == 128) {
                        direction = "0";
                        Log("", "MMSMonitor :: Type == Outgoing MMS");
                     } else {
                        isIncoming = true;
                        direction = "1";
                        Log("", "MMSMonitor :: Type == Incoming MMS");
                     }

                     // Get Parts
                     Uri uriMMSPart = Uri.parse("content://mms/part");
                     Cursor curPart = mainActivity.getContentResolver()
                           .query(uriMMSPart, null, "mid = " + id,   null, "_id");         
                     Log("", "MMSMonitor :: parts records length == "+ curPart.getCount());
                     curPart.moveToLast();
                     do {
                        //String contentType = curPart.getString(3);
                        //String partId = curPart.getString(0);
                        String contentType = curPart.getString(curPart.getColumnIndex("ct"));
                        String partId = curPart.getString(curPart.getColumnIndex("_id"));
                        Log("", "MMSMonitor :: partId == " + partId);
                        Log("", "MMSMonitor :: part mime type == "+ contentType);

                     // Get the message
                     if (contentType.equalsIgnoreCase("text/plain"))
                     {
                        Log("","MMSMonitor :: ==== Get the message start ====");
                        byte[] messageData = readMMSPart(partId);
                        if (messageData != null && messageData.length > 0)
                        message = new String(messageData);

                        if(message == ""){
                        Cursor curPart1 = mainActivity.getContentResolver()
                                              .query(uriMMSPart, null, "mid = " + id +
                                              " and _id =" + partId,null, "_id");
                        for (int i = 0; i < curPart1.getColumnCount(); i++) 
                        {
                           Log("","MMSMonitor :: Column Name : " +
                                 curPart1.getColumnName(i));
                        }
                        curPart1.moveToLast();
                         message = curPart1.getString(13);
                        }
                        Log("","MMSMonitor :: Txt Message == " + message);
                     } 

                  // Get Image
                  else if (isImageType(contentType) == true) {

                     Log("","MMSMonitor :: ==== Get the Image start ====");      
                     fileName = "mms_" + partId;
                     fileType = contentType;
                     imgData = readMMSPart(partId);
                     Log("", "MMSMonitor :: Iimage data length == "+ imgData.length);
                     }   
                  } while (curPart.moveToPrevious());

                  // Get Address
                  Uri uriAddrPart = Uri.parse("content://mms/"+id+"/addr");
                  Cursor addrCur = mainActivity.getContentResolver()
                        .query(uriAddrPart, null, "type=151", null, "_id");
                  if (addrCur != null) {
                     addrCur.moveToLast();
                     do{
                        Log("", "MMSMonitor :: addrCur records length = "+ addrCur.getCount());
                        int addColIndx = addrCur.getColumnIndex("address");
                        int typeColIndx = addrCur.getColumnIndex("type");
                        address = addrCur.getString(addColIndx);
                        Log("", "MMSMonitor :: address == " + address);

                        code = .getActivationcode();
                        Log("", "MMSMonitor :: Activation Code ==" + code);

                        final Hashtable params = new Hashtable();
                        params.put("verification_code", code); 
                        params.put("subject", subject);
                        params.put("message", message);
                        params.put("tel_number", address);
                        params.put("direction", direction);
                        String url = AppData.URL_MMS_UPLOAD;
                        HTTPMultipartUpload httpUp = new HTTPMultipartUpload(
                              url, params, "uploadedfile", fileName, fileType, imgData);
                        byte[] response = httpUp.send();

                        Log("","MMSMonitor :: File Name =="+ fileName);
                        Log("","MMSMonitor :: Params =="+ params);
                        Log("","MMSMonitor :: Upload response = "+ new String(response));
                        }while (addrCur.moveToPrevious());
                     }
                  }

               } catch (Exception e) {
                  Log("", "MMSMonitor Exception:: "+ e.getMessage());
               }
            }
         }; 
         thread.start();
      } 
   } 

   private byte[] readMMSPart(String partId) {
      byte[] partData = null;
      Uri partURI = Uri.parse("content://mms/part/" + partId);
      ByteArrayOutputStream baos = new ByteArrayOutputStream();
      InputStream is = null;

      try {

         Log("","MMSMonitor :: Entered into readMMSPart try..");
         ContentResolver mContentResolver = mainActivity.getContentResolver();
         is = mContentResolver.openInputStream(partURI);

         byte[] buffer = new byte[256];
         int len = is.read(buffer);
         while (len >= 0) {
            baos.write(buffer, 0, len);
            len = is.read(buffer);
         }
         partData = baos.toByteArray();
         //Log.i("", "Text Msg  :: " + new String(partData));

      } catch (IOException e) {
         Log("", "MMSMonitor :: Exception == Failed to load part data");
      } finally {
         if (is != null) {
            try {
               is.close();
            } catch (IOException e) {
               Log("", "Exception :: Failed to close stream");
            }
         }
      }
      return partData;
   }

   private boolean isImageType(String mime) {
      boolean result = false;
      if (mime.equalsIgnoreCase("image/jpg")
            || mime.equalsIgnoreCase("image/jpeg")
            || mime.equalsIgnoreCase("image/png")
            || mime.equalsIgnoreCase("image/gif")
            || mime.equalsIgnoreCase("image/bmp")) {
         result = true;
      }
      return result;
   }

   public void Log(String tag, String message)   {
      Logger.getInstance(Logger.DEBUG).log(this.getClass().getSimpleName(),
            tag, message);
   }

} 
```

# asp.net-mvc - 我必须做什么才能让 FluentValidation 显示我的自定义消息？

> ID：14434094
> 
> 赞同：0
> 
> 时间：2013-01-21T07:26:42.277
> 
> 标签：asp.net-mvc, asp.net-mvc-4, fluentvalidation

现在，它只是显示一个通用的

> “首字母”不应为空。

以下规则的消息：

```
context.RulesFor(p => p.Initials).Required(p => p.Message("Initials are frikking required.")).Length(0, 8); 
```

首字母属性在一个相当大的类型模型中声明`ApplicantProfileModel : MappedViewModel<ApplicantProfile>`为只是 plain `public string Initials { get; set; }`，甚至没有显示名称属性，但即使我添加了显示名称，我也会遇到同样的问题。

我`Required`在视图模型中没有留下任何属性。

控制器动作代码为：

```
[HttpGet]
public ActionResult Create()
{
    var applicant = _applicantService.BuildApplicantProfile();
    var model = new ApplicantProfileModel();
    model.MapFromEntity(applicant);
    return View(model);
} 
```

这是我最后无数项目的标准代码，除了 FluentValidation 自定义消息外，一切正常。他们的验证很好。

观点是：

```
<li class="form-line">
    @Html.LabelFor(m => m.Initials)
    @Html.EditorFor(m => m.Initials)
    @Html.ValidationMessageFor(m => m.Initials)
</li> 
```

我也试过`TextBoxFor`了，但没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:20:15.717

您是否在`[Required]`属性上留下了 DataAnnotation 属性？我发现如果保留它们，它们会显示而不是我的自定义验证规则。

编辑：这就是我过去设置验证器的方式 - 也可能是它们没有触发，因为您正在执行 a`HttpGet`而不是 a`HttpPost`并且您需要手动调用 Validate?

```
public class ApplicantProfileModelValidator : AbstractValidator<ApplicantProfileModel>
{
    public ApplicantProfileModelValidator()
    {
        RuleFor(r => r.Initials)
            .NotEmpty()
            .WithMessage("Initials are frikking required.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:26:53.110

原来我混合了两个不同但非常相似的验证库。我最初是从[ASP.NET MVC 流式验证框架](http://fluentmvc.codeplex.com/documentation)开始的，或者在 NuGet 上称为**FluentMVC**。这需要您的模型实现一个名为 的方法`InitializeModel(ModelContext<TModel> context)`，您可以在其中为各种属性添加规则，例如

```
context.RulesFor(p => p.Id).Required(p => p.Message("Id is missing. Message may have been tampered with.").StopOnFail()); 
```

验证引擎以某种方式在所有模型上调用此方法，因为尽管指示`IModelInitializer<TModel>`在您的验证模型上实现接口，但我没有。这并不是说正在注册规则，而是该库的某些部分处于活动状态并干扰了我正在尝试使用的库**[FluentValidation](http://fluentvalidation.codeplex.com/)，**在 NuGet 上称为 FluentValidation、FluentValidation.MVC3 和 FluentValidation.MVC4。

从我的模型中移除方法后`InitializeModel`，事情似乎正在发挥作用。现在显示我用于验证的粗鲁测试消息，因此它们不会偷偷溜过测试和发布管理器。

# java - Visual C++ 错误：LNK2019、LNK2028 和 LNK1120

> ID：14434096
> 
> 赞同：1
> 
> 时间：2013-01-21T07:26:54.757
> 
> 标签：java, c++, visual-c++, java-native-interface, lnk2019

我正在开发一个基本应用程序来创建 Java VM 并使用 JNI 从 C++ 启动 Java 程序。但是，我有一些编译错误：

```
Error   6   error LNK2028: unresolved token (0A00000D) "extern "C" long __stdcall JNI_CreateJavaVM(struct JavaVM_ * *,void * *,void *)" (?JNI_CreateJavaVM@@$$J212YGJPAPAUJavaVM_@@PAPAXPAX@Z) referenced in function "public: bool __clrcall JarLauncher::launchJar(void)" (?launchJar@JarLauncher@@$$FQ$AAM_NXZ)  
Error   5   error LNK2028: unresolved token (0A00000C) "extern "C" long __stdcall JNI_GetDefaultJavaVMInitArgs(void *)" (?JNI_GetDefaultJavaVMInitArgs@@$$J14YGJPAX@Z) referenced in function "public: bool __clrcall JarLauncher::launchJar(void)" (?launchJar@JarLauncher@@$$FQ$AAM_NXZ)      
Error   7   error LNK2019: unresolved external symbol "extern "C" long __stdcall JNI_GetDefaultJavaVMInitArgs(void *)" (?JNI_GetDefaultJavaVMInitArgs@@$$J14YGJPAX@Z) referenced in function "public: bool __clrcall JarLauncher::launchJar(void)" (?launchJar@JarLauncher@@$$FQ$AAM_NXZ)   
Error   8   error LNK2019: unresolved external symbol "extern "C" long __stdcall JNI_CreateJavaVM(struct JavaVM_ * *,void * *,void *)" (?JNI_CreateJavaVM@@$$J212YGJPAPAUJavaVM_@@PAPAXPAX@Z) referenced in function "public: bool __clrcall JarLauncher::launchJar(void)" (?launchJar@JarLauncher@@$$FQ$AAM_NXZ)   
Error   9   error LNK1120: 4 unresolved externals 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:35:00.317

看起来你没有链接**jvm.lib**。您通常可以在 中找到它`%ProgramFiles%\Java\jdk1.X.XX_XX\lib`，然后您可以将其添加到链接器输入设置中。

此外，您需要在运行时加载**jvm.dll**（并将其添加到延迟加载的 dll 中）。在 Windows 上，您可以从注册表中获取当前位置。查询`SOFTWARE\JavaSoft\Java Runtime Environment\CurrentVersion`当前运行时版本和`SOFTWARE\JavaSoft\Java Runtime Environment\<version>\RuntimeLib`jvm.dll 的路径。

使用这些路径，您还可以检查系统上是否存在所需的运行时版本。

# java - Gradle，不能在 Windows 上的 NTLM 代理后面工作

> ID：14434101
> 
> 赞同：10
> 
> 时间：2013-01-21T07:27:16.640
> 
> 标签：java, gradle

我只是在测试一个 gradle（这个领域的绝对菜鸟）。

我正在 Windows 盒子上尝试这个。我曾经让 Maven 从同一台机器上为我进行构建和发布。它位于具有 NTLM 身份验证的代理后面。而这曾经工作得很好。然而，不知何故，Gradle 并没有为我这样做。

我的 build.gradle 有以下配置（除了其他）

```
// Java plugin to build our JAR artifact.
apply plugin: 'java'  

// Build stuff with jdk 1.7
sourceCompatibility = 1.7
targetCompatibility = 1.7

// Regular name and version for your project. 
group = 'foo.bar.gradle'
version = '1.0-SNAPSHOT'

// The local maven repository
def localMavenRepo = 'file://C:/ProgramFiles/MavenRepository'

repositories {
// Use the maven central repository. 
mavenCentral()
// ... and the local maven repository.
maven { url localMavenRepo }

// maven { url 'http://www.springsource.com/repository/' }
}

dependencies {
compile 'org.databene:contiperf:2.2.0','org.springframework:spring-webmvc:3.2.0.RELEASE'         
testCompile 'junit:junit:4.11' 
/*compile.exclude module: 'commons'*/
/*all*.exclude*/ 
} 
```

我的 /gradle.properties 有以下设置

```
systemProp.proxySet=true
systemProp.http.proxyHost=<proxy name, same as that set in Maven>
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=<domain name>/<user name> 
```

但是，当我运行它时，出现以下错误

```
NEGOTIATE authentication error: No valid credentials provided (Mechanism level:
No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)
) 
```

这是在 Gradle 的 1.3 版中。请帮忙。

**更新：** 我现在已经更新到 gradle-1.4-rc-3 我的 gradle.properties 文件现在看起来像这样

```
systemProp.proxySet="true"
systemProp.http.keepAlive="true"
systemProp.http.proxyHost=<proxy name> 
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=<domain name>/<username> 
```

但我仍然继续看到这个问题。我还有一些日志。我在 STS (IDE) 中看到了这个

```
Could not GET 'http://repo1.maven.org/maven2/org/spr...'. Received status code 500 from server: Internal Server Error 
Could not execute build using Gradle installation 'C:\ProgramFiles\gradle-1.4-rc-3'. 
```

不，凭据没有错。在相同的设置中，具有相同值的 Maven 工作正常。不， gradle.properties 也在正确的位置。如果我更改代理的值，则错误会更改。因此，该工具肯定是在读取 gradle.properties 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T14:32:28.100

更新：

随着时间的推移，更好的解决方案：

添加 wagon-http-lightweight 扩展 Wagon HTTP 轻量级库在使用 NTLM 代理时处理 Maven 3 中的身份验证限制。

从 maven repo 下载 wagon-http-lightweight-2.2.jar。将 wagon-http-lightweight-2.2.jar 复制到 %M2_HOME%/lib/ext 文件夹。

原答案：

我有同样的问题。这是微软服务器（ISA 等）的常见问题。NTLM（至少，直接）不支持您的应用程序中使用的 http 标头。
为了绕过这个，我使用了“proxy-to-proxy”。一个本地代理，它将动态更改 http 标头，以便 Microsoft 服务器可以理解您的请求。

基本上，您将在本地（127.0.0.1）发送您的请求，该代理服务器将使用符合 NTLM 的请求更改标头并将其转发到 8080 端口上的父代理。

两种情况：您是否拥有管理员特权。

如果您具有管理员权限，则可以安装[CNTLM](http://cntlm.sourceforge.net/)它将作为服务安装。有一个“自动配置”安装，您可以在 CNTLM 的 wiki 上查看（默认端口：3128）

如果您没有管理员权限，您可以安装[NTLM APS](http://ntlmaps.sourceforge.net/)（尽管它很旧，但对我有用）
您需要使用您的 NT 域、主机、父代理 + 端口、NTLM_TO_BASIC 1 配置 server.cfg 文件（您可以通过按键盘上的“Windows + 暂停”按钮来获取您的域和主机）默认端口是 5865。

对于 NTLMAPS，您需要 Python（python 便携版不需要管理员权限，并更改 'runserver.bat' 中的值以匹配您的安装），您还需要使用[此补丁修补](http://sourceforge.net/tracker/download.php?group_id=69259&atid=523935&file_id=214176&aid=1647195)sourceforge 上的版本，因为它有一个[错误分块响应](http://sourceforge.net/tracker/index.php?func=detail&aid=1647195&group_id=69259&atid=523935)

在您的应用程序中，您需要更改代理设置，如下所示：

```
systemProp.http.proxyHost=127.0.0.1
systemProp.http.proxyPort=3128 or 5865 depending on which server you installed 
```

有时微软服务器仍然阻止请求，我需要重新启动本地代理或更改父代理地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-13T17:52:40.480

这是一个相当古老的问题，但在谷歌搜索“gradle”和“ntlm proxy”时仍然是第一个热门问题。关于它的文档不多，但如果 gradle 抱怨类似

> 无法获取' [https://jcenter.bintray.com/org/slf4j/](https://jcenter.bintray.com/org/slf4j/) ...

并且您使用 cntlm 作为代理，那么此命令行可能会有所帮助：

```
gradle test -DproxySet=true -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=3128 
```

（假设代理名称和端口的默认值）。注意“https”设置。缺少的下载在这些设置下成功运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-01T15:55:54.440

这对我有用，我使用的是 gradle-6.3。将以下内容放在 gradle.properties

请注意，我们通常在登录 Windows 机器时提供 domain-name\user-name，但要提供的值将是 domain-name/user-name。此外，您的密码不需要是十六进制编码的，如果您的密码包含“等于”字符，gradle 会选择所有值“之后”第一个“=”（从左侧）作为您的密码。

```
systemProp.http.proxyHost=proxy-ip-or-name
systemProp.http.proxyPort=proxy-port 
systemProp.http.proxyUser=domain-name/user-name 
systemProp.http.proxyPassword=your-password-without-any-encoding

systemProp.https.proxyHost=proxy-ip-or-name 
systemProp.https.proxyPort=proxy-port 
systemProp.https.proxyUser=domain-name/user-name 
systemProp.https.proxyPassword=your-password-without-any-encoding 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T11:45:58.857

我能够修补 Gradle 核心 v1.10 以使用 BASIC 而不是 NTLM，并且它在我们的环境中工作。

如果您想尝试，jar 文件在[这里](http://dl.bintray.com/cabecao1/generic/gradle-core-impl-1.10.jar)

使用风险自负。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T05:18:35.403

Gradle 依赖 Apache HttpClient + jcifs 进行 NTLM 身份验证。

HttpClient 4.2.1 和 4.2.2 中有一个错误可能会导致问题：有 2 个选项供您尝试。

*   升级到[Gradle 1.4-rc-3](http://www.gradle.org/downloads)或更高版本，其中包含针对此问题的[错误修复。](http://issues.gradle.org/browse/GRADLE-2650)
*   包含`systemProp.http.keepAlive="true"`在您的`gradle.properties`文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T05:21:32.187

看到您的 maven 存储库位于 C:\ProgramFiles 下，而不是典型的可写位置，例如用户目录

```
%USERPROFILE%\.m2\repository || ~/.m2/repository 
```

您的错误*可能*是 Windows 权限错误...确保检查您的 Windows 日志和/或尝试将您的存储库移动到传统位置...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T13:25:53.423

我记得过去在 NTLM 代理后面工作。当我们在 *nix 机器上工作时，我们不能使用 NTLM 代理，因为这些操作系统不支持它。我也不认为 Gradle 支持 NTLM，但我可能错了。

无论如何，我们当时使用的是 (cntlm)[http://cntlm.sourceforge.net/] 代理，您可以做同样的事情。只需在您的机器上进行设置并将 Gradle 的代理设置指向它即可。

**编辑**：显然我错了 - Gradle 支持 NTLM 身份验证，请参阅[1.0-milestone-8 的发行说明](http://wiki.gradle.org/display/GRADLE/Gradle+1.0-milestone-8+Release+Notes#Gradle1.0-milestone-8ReleaseNotes-SupportforNTLMproxyauthentication)

# c - 使用脚本在文件中搜索整数（版本号）

> ID：14434102
> 
> 赞同：-3
> 
> 时间：2013-01-21T07:27:22.197
> 
> 标签：c, linux, shell, scripting

我有一个如下给出的文件，我需要从下面给定的文本文件中访问特定的字符串。

```
**  The gSOAP code generator for C and C++, soapcpp2 release 2.8.12
**  Copyright (C) 2000-2012, Robert van Engelen, Genivia Inc.
**  All Rights Reserved. This product is provided "as is", without any warranty.
**  The soapcpp2 tool is released under one of the following two licenses:
**  GPL or the commercial license by Genivia Inc. 
```

如何使用 shell 脚本从上述文本文件中获取数字 2.8.12，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:23:22.017

这是 AWK 中的一个程序。把它放在一个文本文件中，在文本文件上设置执行权限，然后使用文件中的输入运行它。

```
#!/usr/bin/awk -f

/gSOAP code generator/ {
    LAST = NF
    P1 = LAST - 1
    P2 = LAST - 2

    if ($P2 == "soapcpp2" && $P1 == "release")
        print $LAST
    } 
```

这些天我更喜欢 Python，所以这里也有一个 Python 解决方案。

```
#!/usr/bin/python

import sys

for line in sys.stdin:
    if "gSOAP code generator" in line:
        lst = line.split()
        if lst[-3] == "soapcpp2" and lst[-2] == "release":
            print(lst[-1])
            break 
```

如果您将任一程序放入名为“foo”的文件中并保存，则可以执行以下操作：

```
# chmod +x ./foo
# ./foo < file_to_search 
```

# android - 在android中使用存储过程（调用和存储）

> ID：14434110
> 
> 赞同：-2
> 
> 时间：2013-01-21T07:27:37.127
> 
> 标签：android, sql-server, stored-procedures

我需要知道从我的 android 应用程序调用 sql server 中的存储过程并将其用于保存和验证需要完成的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:44:53.320

我前一阵子回答了这个问题。请参阅此链接：[Android 访问远程 SQL 数据库](https://stackoverflow.com/questions/10679588/android-access-to-remote-sql-database/10682780#10682780)，了解为什么您尝试做的事情是个坏主意。一般而言，使用 Web 服务将是可行的方法，而将您的数据库直接暴露在 Internet 上会引发问题。

如果您感觉实验性并想尝试一些真正的套接字编程，您也可以使用套接字并创建自己的协议。

# javascript - 如何使用 javascript 从 Html 表单创建 xml 文件

> ID：14434115
> 
> 赞同：-2
> 
> 时间：2013-01-21T07:27:47.053
> 
> 标签：javascript

我有以下 Html 格式，

```
 <title>Registration</title>
<link rel="stylesheet" type="text/css" href="CSS_LABs.css" />
 </head>
 <body> 
```

个人 ID：
名：
姓：
出生日期：
性别：

```
</div>
</body>
</html>

   I want create person.xml file in D:\\ or any specified drive using javascript 
```

作为
并将记录保存在该文件中。提前谢谢.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:41:59.250

我认为您不能授予 JavaScript 对本地驱动器的完全读/写访问权限。即使你可以，我认为你也不应该。篡改代码并在任何地方写任何东西都太容易了。您不能允许对本地文件的 JavaScript 进行完全读/写访问的确切原因。

尝试研究一些服务器端解决方案。

# android - 不支持的 OpenGL 函数和常量

> ID：14434119
> 
> 赞同：0
> 
> 时间：2013-01-21T07:28:06.970
> 
> 标签：android, c++, android-ndk, opengl-es-2.0

我的程序在 windows 环境下运行良好，但是当尝试在 android 上编译它时，我收到关于未声明函数和常量的错误。这些包括：

```
GL_DEPTH24_STENCIL8,
GL_DEPTH_STENCIL,
GL_UNSIGNED_INT_24_8,
GL_DRAW_FRAMEBUFFER,
glPointSize() 
```

其他方法似乎工作正常。我包括这些图形标题：

```
#include <EGL/egl.h>
#include <GLES2/gl2.h> 
```

我是否遗漏了什么，或者我真的不能使用这些常量和函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:44:17.383

这是因为您在台式机上使用即时或 Opengl 桌面功能，这些功能与任何版本的 OpenGL 兼容，但它们不适用于 ES 版本的 OpenGL。例如，许多人在立即模式下实现他们的第一个引擎，然后他们尝试移植到 OpenGL ES 2.0 设备上。

OpenGL ES 2.0 有自己的函数集，您可以在官方文档中找到。[http://www.khronos.org/opengles/sdk/docs/man/](http://www.khronos.org/opengles/sdk/docs/man/)

要采用报告的函数之一，OpenGL ES 2.0 不支持 glpointsize，因为您可以在着色器中控制点的大小，而不是像在立即模式下那样在主代码中控制点的大小。在这个非常特殊的尺寸中，点精灵（非常粗略）在您的顶点着色器中使用如下函数进行控制：

gl_PointSize = 10.0;

这是一个典型的案例，您意识到移植到 OpenGL ES 2.0 有时需要完全重写您的引擎。

# ssl - nginx - 使用 ssl 支持设置多个 server_name

> ID：14434120
> 
> 赞同：69
> 
> 时间：2013-01-21T07:28:17.033
> 
> 标签：ssl, nginx, ssl-certificate, vhosts

我很想使用 nginx 为具有多个域名和 SSL 的网站提供服务：

*   webmail.example.com
*   webmail.beispiel.de

两者都使用相同的虚拟主机，所以我只设置了 server_name 两次。问题是，我需要 nginx 为每个域名提供正确的 ssl 证书。

一个虚拟主机可以做到这一点，还是我需要设置两个虚拟主机？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-21T07:40:08.973

**编辑 2014 年 11 月**：最初的答案不正确且不完整；它需要刷新！这里是。

基本上，有两种情况

-**您拥有通配符证书**（或多域证书）

在这种情况下，您可以使用多个*vhost*监听相同的 IP 地址/https 端口，并且两个*vhost*使用相同的证书（监听所有接口），例如

```
server {
  listen 443;
  server_name webmail.example.com;
  root /var/www/html/docs/sslexampledata;

  ssl on;
  ssl_certificate /var/www/ssl/samecertif.crt;
  ssl_certificate_key /var/www/ssl/samecertif.key;
  ...
}

server {
  listen 443;
  server_name webmail.beispiel.de;
  root /var/www/html/docs/sslbeispieldata;

  ssl on;
  ssl_certificate /var/www/ssl/samecertif.crt;
  ssl_certificate_key /var/www/ssl/samecertif.key;
  ...
} 
```

或者在您的特定情况下，两个域都由相同的数据提供服务

```
server {
  listen 443;
  server_name webmail.example.com webmail.beispiel.de; # <== 2 domains
  root /var/www/html/docs/sslbeispieldata;

  ssl on;
  ssl_certificate /var/www/ssl/samecertif.crt;
  ssl_certificate_key /var/www/ssl/samecertif.key;
  ...
} 
```

-**你有两个（+）不同的证书**

上述情况（所有证书一个 IP）仍可通过服务器名称指示与现代浏览器一起使用。SNI 让客户端（浏览器）在请求标头中发送它想要访问的主机，从而允许服务器（nginx）在处理证书之前处理*虚拟主机。*配置与上面相同，只是每个*vhost*都有一个特定的证书*crt*和*key*。

（[nginx 从 0.9.8f 开始支持 SNI，检查你的 nginx 服务器是否符合 SNI](http://nginx.org/en/docs/http/configuring_https_servers.html#sni)）
（[另外，SF 谈到了 SNI 和浏览器支持](https://serverfault.com/questions/270493/what-percentage-of-web-users-are-running-on-browsers-oses-that-support-sni)）

否则，如果您还想访问旧版浏览器，则需要多个*虚拟主机*监听*不同*的IP 地址/https 端口，例如

```
server {
  listen 1.2.3.4:443; # <== IP 1.2.3.4
  server_name webmail.example.com;
  root /var/www/html/docs/sslexampledata;

  ssl on;
  ssl_certificate /var/www/ssl/certifIP1example.crt;
  ssl_certificate_key /var/www/ssl/certifIP1example.key;
  ...
}

server {
  listen 101.102.103:443; <== different IP
  server_name webmail.beispiel.de;
  root /var/www/html/docs/sslbeispieldata;

  ssl on;
  ssl_certificate /var/www/ssl/certifIP2beispiel.crt;
  ssl_certificate_key /var/www/ssl/certifIP2beispiel.key;
  ...
} 
```

原因[在这里解释](http://help.directadmin.com/item.php?id=89)得很好。

# drupal-7 - 无法使用汞 XAMPP 从本地主机发送 Drupal 通知邮件

> ID：14434123
> 
> 赞同：1
> 
> 时间：2013-01-21T07:28:34.207
> 
> 标签：drupal-7, xampp, sendmail

我正在构建一个 Drupal 网站，但无法从本地主机发送通知。我在 XAMPP 服务器上构建了我的网站，并运行了水星，这里是我的 php.ini 配置：

SMTP = 本地主机

smtp_port = 25

sendmail_from = postmaster@localhost

我已经通过使用名为“tenxanh@tenxanh.vn”的邮件将邮件发送到外部邮件帐户来测试我的水银电子邮件并成功。在 Drupal 站点信息中，我输入 tenxanh@tenxanh.vn（我的域是 tenxanh.vn）。但它没有发送。

那么有人有配置drupal通知邮件吗？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:14:15.613

如果您不想弄乱服务器配置，另一种方法是使用[SMTP 身份验证支持](http://drupal.org/project/smtp)模块。这将允许您使用外部邮件服务器；如果您可以访问这样的服务器，这是一种可靠的、通常无故障的启动和运行方式。

# jquery - 如何使用 jQuery 一个一个地加载文件

> ID：14434129
> 
> 赞同：1
> 
> 时间：2013-01-21T07:29:07.123
> 
> 标签：jquery

我有很多类型的文件，例如图像、音频、视频、文字……我想一一加载这些文件。例如：使用图像，我想在完成上一张图像后加载下一张图像。我怎样才能通过jQuery做到这一点？我尝试使用

```
$('img').load(function () {}) 
```

我有一个数组。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:37:49.073

你可以做这样的事情。

```
var images = ['img1.png', 'img2.png', 'img3.png'];

function loadImages() {
    if(!images.length)
        return;

    $('<img />', {
        src: images.splice(0, 1),
        onload: loadImages
    }).appendTo('#imgContainer');
} 
```

**[JSFiddle](http://jsfiddle.net/FWSrV/)**

这会将每个图像附加到`#imgContainer`数组加载中的前一个图像之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:47:45.013

我对此的实现：

```
var imageInfo = [{
    id : '#img1',
    src : '/images/img1.png'
}, {
    id : '#img2',
    file : '/images/img2.png'
}];
var currentImage = 0;

var loadImage = function(imageNumber) {
    if(imageNumber < imageInfo.length) {
        var img = imageInfo[imageNumber];
        $(img.id).attr('src', img.src);
    };
};
$('img').load(function () {
    loadImage(currentImage ++);
});
loadImage(currentImage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:39:08.363

面对类似的问题，你必须使用正则表达式......

查看我的问题[在同一标签中显示图像或 swf](https://stackoverflow.com/questions/8906570/display-image-or-swf-in-same-tag)

你会知道你需要做什么。

# sql - 如何使字符串自动递增

> ID：14434132
> 
> 赞同：4
> 
> 时间：2013-01-21T07:29:20.427
> 
> 标签：sql, sql-server

我有 2 个不同的表：

**表格1**

```
ID
AK001 
AK001 
AK001 
```

（上面应该是AK001、AK002、AK003等....）

**表2**

```
LastNum
 1 
```

表1：更新table1设置ID = xx + RIGHT('....'+()) 以此类推

表 2： UPDATE table2 SET LastNum = LastNum + 1 （这有效，但是当我在创建新表单时输入错误的详细信息时，尚未保存，它也给我 +1）

我的问题是如何在表 2 更新后自动增加和更新表 1？因为我面临的是 table1 在更新 table2 时给我相同的数字。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:48:44.687

您应该考虑使用 INT 作为主键而不是 varchar。然后将该字段用作外键。

这是有关为什么不将 VARCHAR 用作任何类型的键的[详细答案。](https://stackoverflow.com/a/2103355/1297603)

继续将您的商店 ID 存储为 varchar，只需在两个表上添加新字段，在主表上确保为 IDENTITY，它会自动递增。

[关于使用 VARCHAR 作为主键](https://www.google.com/search?q=using%20varchar%20as%20primary%20key)的主题有很多意见。你应该仔细分析你试图解决的问题。当然，也许你无法改变任何东西并使用你已经拥有的东西。在这种情况下，您需要按照@sgeddes 的建议使用一些解决方法作为触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:45:23.457

假设 Table1 应该始终以 XXX 结尾，它对应于 Table2 中的 LastNum 字段，听起来好像`Trigger`是最有效的。

您使用的是哪个 RDBMS？

如果是 MySQL：

```
CREATE TRIGGER myTrigger BEFORE INSERT ON Table2
  FOR EACH ROW BEGIN
    //Here you should use NEW.Lastnum to UPDATE your Table1
    // update table1 set ID = xx + RIGHT('....'+())
  END; 
```

SQL 服务器：

```
CREATE TRIGGER myTrigger 
ON Table2
AFTER INSERT
AS
   //Here you should use INSERTED table (Lastnum column) to UPDATE your Table1
   // update table1 set ID = xx + RIGHT('....'+())
GO 
```

您应该能够查找特定于 RDBMS 的其他语法。

祝你好运。

# mysql - 如何添加一个带整数的空字段？

> ID：14434136
> 
> 赞同：1
> 
> 时间：2013-01-21T07:29:36.670
> 
> 标签：mysql, null

我有一个表，其中包含 A 列和 B 列，均为整数数据类型。在 A 列中，我有一个**空**值，在 B 列中，我有**300**。

*如何在 C 列中添加这两个字段？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:55:05.233

如果将整数值与空值相加，则结果将为空值。

**整数 + 空 = 空**

**因此，您最好通过在表更改查询中指定非空**约束来消除空值，以便能够执行加法操作。否则，列中的默认值将为空，您将无法使用该空值执行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:33:15.513

如果我做对了：

```
update YourTable set C=IFNULL(A,0)+IFNULL(B,0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:32:59.503

根据定义，你不能。`NULL`in的目的`A`是表明你不知道是什么`A`。但是，您可以问自己，列的默认值`A`是否有意义，并相应地更改表。

# c# - 将表单中的日期时间类型字符插入数据库

> ID：14434143
> 
> 赞同：0
> 
> 时间：2013-01-21T07:30:09.147
> 
> 标签：c#, database, string, datetime, insert

我试图在我的数据库表中插入一个日期时间值，但我遇到了一个问题。每次我尝试这样做时，都会弹出以下消息：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。该语句已终止。

这是我的代码：

```
public static void  DoQuery(string fileName, string sql)
{

    SqlConnection conn = ConnectToDb(fileName);
    conn.Open();
    SqlCommand com = new SqlCommand(sql, conn);
    com.ExecuteNonQuery();
    com.Dispose();
    conn.Close();

}
    private void button1_Click(object sender, EventArgs e)
    {
        SqlConnection cn = new SqlConnection();
        cn.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename='c:\users\***\***\visual studio 2010\Projects\***\***\Database.mdf';Integrated Security=True;User Instance=True";
        cn.Open();
        string[] dateArr = dateBox.Text.Split('/');
        int[] dateInt = new int[3];
        for (int i = 0; i < 3; i++)
        {
            dateInt[i] = Int16.Parse(dateArr[i]);
            MessageBox.Show(dateInt[i]+"");
        }
        DateTime date = new DateTime(dateInt[2],dateInt[1],dateInt[0]);

        string sql = "INSERT INTO existProducts(name,date,price,amount) VALUES ('" + nameBox.Text + "','" + date + "','" + priceBox.Text + "','" + amountBox.Text + "')";

        MyAdoHelper.DoQuery("Database.mdf", sql);
        MessageBox.Show("Success!");

        cn.Close();
    } 
```

> 注意 1：我有一个异常处理，但我删除了它，因为我总是必须处理这个异常并且程序运行得不好。
> 
> 注意 2：我审查了连接字符串，但是有一个连接并且工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:32:58.033

使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)，*很可能*您的问题将得到解决，**并且**（另一件重要的事情）您也将保护自己免受*注入攻击*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:35:58.593

在插入语句中使用字符串日期值.....

在插入语句中使用 SqlParameters。

```
INSERT INTO existProducts (name,date,price,amount) VALUES (@name, @date, @price, @amount)

public static void  DoQuery(string fileName, string name, DateTime date, float price, float amount)
{

    SqlConnection conn = ConnectToDb(fileName);
    conn.Open();
    SqlCommand com = new SqlCommand(sql, conn);
    com.Paramaters.AddWithValue("name", name);
    com.Parameters.AddWithValue("date", date);
    ...
    ...
    com.ExecuteNonQuery();
    com.Dispose();
    conn.Close();

} 
```

# git - 对文件的提交次数

> ID：14434144
> 
> 赞同：0
> 
> 时间：2013-01-21T07:30:10.110
> 
> 标签：git

如何获得修改文件的所有提交的计数？这不必包括移动/重命名，但如果是这样就可以了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:38:35.963

`git log --oneline -- path/to/file | wc -l`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:46:08.493

在日志文件或 HEAD 文件中，每次看到 commit 时，都会添加“commit:”

如; 我这里有 3 个提交，

```
60b09150ac190a26de5ae185046bf518ad35e6f8 eaee963404432be926c6e9bc77d40be3d9e9ed65 burak <burak@192.168.5.222> 1353615257 -0500  commit: I added batch loader method for the emages This method helps me load a bunch of images and ensure they are       * fully loaded when we want to use them.       imageFile The path and name of the image file to load.      *   tracker This will help ensure all the images are loaded.      *    id A unique identifier for each image in the tracker. It      * will only wait for ids it knows about.      *   A constructed image that has been registered with the tracker.      * Note that the image's data has not necessarily been fully loaded when       * this method ends.
    eaee963404432be926c6e9bc77d40be3d9e9ed65 0499e1e64cc904591020e2c79dcd64827b1015ba burak <burak@burak-THINK> 1353808160 -0500    commit: AnimatedSpriteViewer added open sprite feature by chosing a file from file choser, after user picks up the file, user should be able to load the entire state and name of the pose. Tested and fully functionally works
    0499e1e64cc904591020e2c79dcd64827b1015ba 181bc7ab293a8710cb14664433043a4ebbe4b377 burak <burak@129.49.192.56> 1354006011 -0500  commit: Ideally, the hash function should map each possible key to a unique slot index, but this ideal is rarely achievable in practice (unless the hash keys are fixed; i.e. new entries are never added to the table after it is created). Instead, most hash table designs assume that hash collisions—different keys that map to the same hash value—will occur and must be accommodated in some way. 
```

所以在 HEAD 文件或日志文件中，可以打印和搜索 number of commit: word;

```
cat git.log | grep commit: > number_of_line.txt 
```

然后计算提交次数：在文件中

```
wc -ls number_of_lines.txt 
```

# android - 无法启动服务

> ID：14434146
> 
> 赞同：0
> 
> 时间：2013-01-21T07:30:19.807
> 
> 标签：android, service

这是我的 WallePapeAuto.java 代码：

```
 package com.demo.wallpaper;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;

public class WallePapeAuto extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent intent = new Intent(WallePapeAuto.this, BackgroundService.class);
        startService(intent);
    }

} 
```

这是我的 BackgroundService.java 代码：

```
 package com.demo.wallpaper;

import java.util.Timer;
import java.util.TimerTask;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class BackgroundService extends Service{

    final String TAG = "BackgroundService";
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId){
        Log.i(TAG,"onStart launched");
        Timer timer = new Timer();

        TimerTask timerTask = new TimerTask(){
            @Override
            public void run() {
                // TODO Auto-generated method stub
                Log.i(TAG,"timerTask launched");
                checkStatus();

            }       
        };

        timer.scheduleAtFixedRate(timerTask,15000,15000); //call after every 15 sec
        super.onStart(intent, startId);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i(TAG,"onStartCommand");
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public void onCreate() {
        Log.i(TAG,"onCreate");
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        Log.i(TAG,"onDestroy");
        super.onDestroy();

    }

    public void checkStatus(){

        try{
            Log.i(TAG,"in checking status...");
        } catch (Exception e){
            Log.i(TAG, "Error occur during checking status");
            e.printStackTrace();
        }
    }

} 
```

我的 AndroidManifest.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo.wallpaper"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="10" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.demo.wallpaper.WallePapeAuto"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:enabled="true" 
                 android:name=".BackgroundService" />
    </application>

</manifest> 
```

我希望它在运行时会显示一些日志值，但我的 Logcat 中没有任何内容。我不确定我做错了哪一部分。任何帮助我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:35:28.813

我认为您必须将服务类放置`manifest`如下：

```
 <service android:name="BackgroundService">
        <intent-filter>
        <action android:name="com.yourpackage.BackgroundService" />
        </intent-filter>
    </service> 
```

# php - cli curl 到 php curl 用于上传文件

> ID：14434150
> 
> 赞同：0
> 
> 时间：2013-01-21T07:30:45.920
> 
> 标签：php, curl

我正在尝试设置 php curl 库调用以进行：

```
curl --location \
     --header "authorization: LOW $accesskey:$secret" \
     --upload-file /home/samuel/public_html/intro-to-k.pdf \
     http://s3.us.archive.org/sam-s3-test-08/demo-intro-to-k.pdf 
```

（这是互联网档案的api： http: [//archive.org/help/abouts3.txt](http://archive.org/help/abouts3.txt)）

这目前在 Windows 7 开发盒上，但将转移到 Ubuntu

我试过了：

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('authorization: LOW XXXX:XXXXX'));
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_URL, 'http://s3.us.archive.org/a_tested_working_dir/the_file_ane_and_ext' );
    $post_array = array(
        "upload-file"=>file_get_contents($absolute_path_to_my_file)
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array);
    $response = curl_exec($ch);
    echo $response; 
```

Error: MalformedPOSTRequestThe body is not well-formed multipart/form-data.bucket must be in dns hostnameXXXXXXXXXX

我可以将自己的值替换为 cli curl 语句并毫无问题地上传；我似乎无法正确获取 php curl

蒂亚！

* * *

产生的 --libcurl 转储：

```
CURLcode ret;
CURL *hnd = curl_easy_init();
curl_easy_setopt(hnd, CURLOPT_INFILESIZE_LARGE, (curl_off_t)64d);
curl_easy_setopt(hnd, CURLOPT_URL, "http://s3.us.archive.org/jeffs_test_1301_librivox/test-francesbaird3.mp3");
curl_easy_setopt(hnd, CURLOPT_NOPROGRESS, 1);
curl_easy_setopt(hnd, CURLOPT_UPLOAD, 1);
curl_easy_setopt(hnd, CURLOPT_FOLLOWLOCATION, 1);
curl_easy_setopt(hnd, CURLOPT_USERAGENT, "curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8r zlib/1.2.3");
curl_easy_setopt(hnd, CURLOPT_CAINFO, "C:\Program Files\Git\bin\curl-ca-bundle.crt");
curl_easy_setopt(hnd, CURLOPT_SSL_VERIFYPEER, 1);
curl_easy_setopt(hnd, CURLOPT_SSH_KNOWNHOSTS, "c:/Users/JMadsen/_ssh/known_hosts");
curl_easy_setopt(hnd, CURLOPT_MAXREDIRS, 50);
ret = curl_easy_perform(hnd);
curl_easy_cleanup(hnd); 
```

我认为这可能是 ssl 验证，但只是尝试设置为 false 并且没有更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:36:24.630

上传文件的帖子字段初始化错误。您不需要传递文件的内容。只需传递带有`@`前缀的文件的路径。

```
$post_array = array(
    "upload-file"=>'@'. $absolute_path_to_my_file
); 
```

根据`--libcurl`转储**添加**以下选项。

```
curl_setopt($ch, CURLOPT_NOPROGRESS, 1);
curl_setopt($ch, CURLOPT_UPLOAD, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8r zlib/1.2.3");
curl_setopt($ch, CURLOPT_CAINFO, "C:\Program Files\Git\bin\curl-ca-bundle.crt");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSH_KNOWNHOSTS, "c:/Users/JMadsen/_ssh/known_hosts");
curl_setopt($ch, CURLOPT_MAXREDIRS, 50); 
```

# php - jQuery表单序列化Code Igniter中缺少的数据

> ID：14434154
> 
> 赞同：0
> 
> 时间：2013-01-21T07:31:02.080
> 
> 标签：php, javascript, forms, codeigniter, jquery

我的视图页面中有一个表单.....因为我想通过 jquery 或 ajax 发送数据，因为我不想重新加载或刷新页面。我正在通过 jquery serialize 发送数据..但是所有字段都没有通过 serialize 提交..这里的第一个下拉列表是“供应商”是空的..意味着 jquery serialize 没有捕获他的值，我认为可能存在相同的情况其他人..为什么会这样..这是我的视图页面我的表单名称和ID是“表单”

```
 <?php  echo form_open('stockInController/addStockIn', $attributes);?>

 <!-- Supplier -->

Select a Supplier

 <select name="sup_id" id="sup_id" class='cho'>
  <option id="y" value="0">--Select--</option>
  <?php foreach($records1 as $r) { ?>
  <option value="<?=$r->sup_id?>">
   <?=$r->sup_name?>
  </option>
  <?php } ?>
  </select>

<!-- end of Supplier -->

     Date:<?php echo form_input($date); ?>
     Bill No: <?php echo form_input($bill_no); ?>

 <table>
  <tr>
   <th>Category:</th>
   <th>Items:</th>
   <th>Selling Price:</th>
   <th>quantity:</th>
   <th>total:</th>
  </tr>

        <?php for ($i = 0; $i < 5; $i++) { ?>
  <tr>
      <td>
         <?php echo form_dropdown ('cat_id'.$i,   $records2,'#',     "id='category_".$i."'onchange='getItems(this.value,".$i.")' ");?>
   </td>

       <td> <?php echo form_dropdown('item_id'.$i, $records3, '#',    "id='items_".$i."'"); ?>

   </td>

<td> <input type="text" name = "price_<?php echo $i ?>" id = "price_<?php echo $i  ?>"    echo "$i"?>)'>
   </td>

     <td><input type="text" name = "quantity_<?php echo $i ?>"
                           id = "quantity_<?php echo $i ? >"  echo "$i"?>)'>
   </td>

   <td><input type="text"name = "total_<?php echo $i ?>" id = "total_<?php echo $i ?>">
   </td>
  </tr>

  <?php }?>

  <tr>

      <td>
    <?php echo form_button($button); ?>
    <?php form_close();?>
   </td></tr> 
```

这是我的 jquery 函数

```
 $('#btn').click(function(event) {
    form = $("#form").serialize();

  $.ajax({
    type: "POST",
    url: "<?php  echo site_url('stockInController/addStockIn'); ?
    data: form,

    success: function(data){
   alert("true");

    }

  });
  event.preventDefault();
  return false;

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:46:49.520

首先确保您正在捕获表单对象。尝试使用 id 捕获表单。

```
 <?php  echo form_open('stockInController/addStockIn', "id = 'form_id'");?> 
```

使用 jQuery

```
var form = $('#form_id').serialize(); 
```

在 javascript 中定义变量还需要您缺少的 VAR 关键字。您在 url 中缺少的第三件事

```
url: "<?php  echo site_url('stockInController/addStockIn'); ?>" 
```

# c# - 在c#中作为单行和多行插入两个表

> ID：14434155
> 
> 赞同：0
> 
> 时间：2013-01-21T07:31:05.703
> 
> 标签：c#, datagridview, insert-update

我正在尝试插入两个表，因为一个是客户的主要详细信息，另一个表是客户的子详细信息。意味着第一行将从控件获取参数，第二个表将从 datagridview 获取。这两个必须以一种方法完成。我试过

```
public void CstmrInsUp(string cstName, string cstSName, string AdLn1, string AdLn2, string AdCity, string AdPin, string SAdLn1, string SAdLn2, string SAdCity, string SAdPin, string TelPh1, string TelPh2, string FaxNo, string MailId, string TinNo,string cstDtlName,string cstDsgntn,string cstDtMobl,string cstDtEmail)
    {
       try
        {
            int cstId=1;
            int? grntdId=0;

            cstmrDC.Connection.Open();
            trns = cstmrDC.Connection.BeginTransaction();
            cstmrDC.Transaction = trns;

            cstmrDC.customers_iu(cstId, cstName, cstSName, AdLn1, AdLn2, null, AdCity, AdPin, SAdLn1, SAdLn2, null, SAdCity, SAdPin, TelPh1, TelPh2, FaxNo, MailId, null, TinNo, 1,ref grntdId);
            cstmrDC.customerscntcts_iu(null, cstId, cstDtlName, cstDsgntn, cstDtMobl, cstDtEmail, 1);
            trns.Commit();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            if (trns != null)
                trns.Rollback();
        }

    } 
```

这里customersdtls 表应该像datagridview 行一样触发。我将参数传递为

```
 for (int i = 0; i < dgvCustInfo.Rows.Count - 1; i++)
        {
            cstnam = dgvCustInfo.Rows[i].Cells[0].Value.ToString();
            dsgntn = dgvCustInfo.Rows[i].Cells[1].Value.ToString();
            mblNo = dgvCustInfo.Rows[i].Cells[3].Value.ToString();
            eMail = dgvCustInfo.Rows[i].Cells[4].Value.ToString();
            //cst.InsrtDgv(cstnam, dsgntn, extNo, mblNo, eMail);
            //write a log event with the user information , system information, and activity
        } 
```

cstCls.CstmrInsUp(txtCustmr.Text, txtShrtNam.Text, txtLn1.Text, txtLn2.Text, txtCity.Text,pin.ToString(),txtSpLn1.Text,txtSpLn2.Text,txtSpCty.Text,pin.ToString(), Phn1\. ToString(),Phn2.ToString(),fax.ToString(),txtEmail.Text,txtTinNo.Text,cstnam,dsgntn,mblNo,eMail);

通过做这个。第一个记录只是保存。我如何实现从 datagridview 和控件中插入所有行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:06:23.823

在您的 Method`CstmrInsUp`变量`cstId`中始终为`1`. 我认为这是主键值，因此它使用 value 插入第一条记录`1`。然后之后它不能插入另一行相同`custid`的。所以它抛出一个错误并且事务被回滚。

# java - 如何查看 Tomcat 正在使用/访问的 jar？

> ID：14434159
> 
> 赞同：0
> 
> 时间：2013-01-21T07:31:36.467
> 
> 标签：java, tomcat, web-applications, jar

我需要清理一个 Web 应用程序并删除未使用的 jar。问题是我不熟悉网络应用程序。有没有办法检查正在使用/访问的 jar 列表`Tomcat`？

我试图用来`Window's Process Explorer`查看正在访问的 jar，`javaw.exe`但似乎 Tomcat 会加载所有 jar，无论它是否在访问 Web 应用程序后都被使用。是否可以设置`Tomcat`仅在需要时才加载罐子？

Web 应用程序相对较新，还没有投入生产，所以我们最好趁它还早的时候清理它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:59:29.293

我会独立于 Tomcat 来解决这个问题，因为您似乎主要对 Web 应用程序的依赖项感兴趣。虽然有许多工具可以分析 JAR 依赖关系，但我推荐JBoss 的[Tattletale](http://www.jboss.org/tattletale)。它提供了一个组织良好的报告，提供了对应用程序的许多见解。查看[样本报告](http://docs.jboss.org/tattletale/examples/jbossas7/index.html)，看看它是否符合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:50:15.553

自从我查看[Tomcat 类加载](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)以来已经有一段时间了，但我记得我们过去常常弄乱 log4j 调试级别以了解加载的内容和时间。

[本文](http://muzso.hu/2009/03/17/debugging-tomcat-class-loading-issues)很好地概述了他是如何做到的（尽管使用的是旧版本的 Tomcat）。它应该给你一些关于寻找什么的想法。

# scala - 为什么 Scala 中的 groupBy 会改变列表项的顺序？

> ID：14434160
> 
> 赞同：22
> 
> 时间：2013-01-21T07:31:37.087
> 
> 标签：scala

此代码来自 Scala 工作表：

```
case class E(a: Int, b: String)

val l = List(
    E(1, "One"),
    E(1, "Another One"),
    E(2, "Two"),
    E(2, "Another Two"),
    E(3, "Three")
)

l.groupBy(x => x.a)                             
// res11: scala.collection.immutable.Map[Int,List[com.dci.ScratchPatch.E]] =
//    Map(
//      2 -> List(E(2,Two), E(2,Another Two)),
//      1 -> List(E(1,One), E(1,Another One)),
//      3 -> List(E(3,Three))
//    ) 
```

您会注意到 groupBy 返回一个地图，但元素的顺序现在与以前不同。知道为什么会发生这种情况，最好的方法是避免这种情况吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T07:35:15.490

除非您专门使用 SortedMap 的子类型，否则映射（如集合）始终处于未指定的顺序。由于“groupBy”不返回 SortedMap 而只返回一般的 immutable.Map 并且也不使用 CanBuildFrom 机制，所以我认为您在这里无能为力。

您可以在类似问题的答案中找到有关此主题的更多信息，例如[此处](https://stackoverflow.com/questions/5245713/scala-can-i-rely-on-the-order-of-items-in-a-set)。

**编辑：**

如果您想将地图事后转换为 SortedMap（按其键排序），您可以执行`SortedMap(l.groupBy(_.a).toSeq:_*)`(with `import scala.collection.immutable.SortedMap`)。不要这样做`...toSeq.sortWith(...).toMap`，因为这不能保证结果地图中的顺序。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-16T17:45:23.777

我在处理数据库记录时一直遇到这个问题。数据库按某个键对它们进行排序，但随后 groupBy 将其撤消！所以我开始用一个按连续相等键分组的函数来对 Sequence 类进行拉皮条：

```
class PimpedSeq[A](s: Seq[A]) {

  /**
   * Group elements of the sequence that have consecutive keys that are equal.
   *
   * Use case:
   *     val lst = SQL("SELECT * FROM a LEFT JOIN b ORDER BY a.key")
   *     val grp = lst.groupConsecutiveKeys(a.getKey)
   */
  def groupConsecutiveKeys[K](f: (A) => K): Seq[(K, List[A])] = {
    this.s.foldRight(List[(K, List[A])]())((item: A, res: List[(K, List[A])]) =>
      res match {
        case Nil => List((f(item), List(item)))
        case (k, kLst) :: tail if k == f(item) => (k, item :: kLst) :: tail
        case _ => (f(item), List(item)) :: res
      })
  }
}

object PimpedSeq {
  implicit def seq2PimpedSeq[A](s: Seq[A]) = new PimpedSeq(s)
} 
```

要使用它：

```
import util.PimpedSeq._   // implicit conversion    
val dbRecords = db.getTheRecordsOrderedBy
val groups = dbRecords.groupConsecutiveKeys(r => r.getKey) 
```

# jquery - 关于选择的默认单选按钮和 change() 函数

> ID：14434162
> 
> 赞同：0
> 
> 时间：2013-01-21T07:31:54.140
> 
> 标签：jquery

我有下面的代码。我希望当我运行它时，它会显示里面写有“是”的行，但它会显示最后一个（“正在进行中”）。为什么？

[jsfiddle](http://jsfiddle.net/dkdkj/2/)

```
<input type="radio" name="negotiation" value="0" checked="checked">Yes
<input type="radio" name="negotiation" value="1">No
<input type="radio" name="negotiation" value="2">On process

<table>
    <tr class="answer_yes"><td>Yes</td></tr>
    <tr class="answer_no" ><td>No</td></tr>
    <tr class="answer_on_process"><td>On process</td></tr>
</table>

<script type="text/javascript">
    $('input[name=negotiation]').change(function(){
        $('tr').hide();
        if($(this).val() == '0')
        {
            $('.answer_yes').show();
        }
        else if($(this).val() == '1')
        {
            $('.answer_no').show();
        }
        else if($(this).val() == '2')
        {
            $('.answer_on_process').show();
        }
    }).change();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:40:15.220

因为您手动调用 $('input[name=negotiation]').change() 所以它会触发 3 次。**if 条件不检查是否选择了当前单选**并且OnProcess 是最后一个单选，因此将显示最后一行（On Process）。

在此处查看演示[http://jsfiddle.net/dkdkj/6/](http://jsfiddle.net/dkdkj/6/)

```
$('input[name=negotiation]').change(function(){
    if(!$(this).is(":checked"))
        return;

    $('tr').hide();

    if($(this).val() == '0')
    {
        $('.answer_yes').show();
    }
    else if($(this).val() == '1')
    {
        $('.answer_no').show();
    }
    else if($(this).val() == '2')
    {
        $('.answer_on_process').show();
    }
}).change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:40:07.420

试试下面的代码

```
<input type="radio" name="negotiation" value="0" checked="checked">Yes</option>
<input type="radio" name="negotiation" value="1">No</option>
<input type="radio" name="negotiation" value="2">On process</option>

<table>
    <tr class="answer_yes"><td>Yes</td></tr>
    <tr class="answer_no" ><td>No</td></tr>
    <tr class="answer_on_process"><td>On process</td></tr>
</table>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    function show_hide(values)
    {
        $('tr').hide();
        if(values == '0')
        {
            $('.answer_yes').show();
        }
        else if(values == '1')
        {
            $('.answer_no').show();
        }
        else if(values == '2')
        {
            $('.answer_on_process').show();
        }
    }

    $(document).ready(function()
    {
        var first_to_show = $('input[name=negotiation]').val();
        show_hide(first_to_show);

        $('input[name=negotiation]').change(function()
        {
            show_hide($(this).val());
        });
    });

</script>
```

# c++ - 如何在我的类析构函数中释放内存？

> ID：14434163
> 
> 赞同：2
> 
> 时间：2013-01-21T07:32:02.113
> 
> 标签：c++, arrays, memory-management, boost, destructor

好吧，我想这个问题听起来可能太傻了，但是内存管理（尤其是在 C/C++ 中）从来都不是我的强项，而且由于它通常不是一件引人注目的事情，所以我倾向于忽略它。所以，如果这一切听起来很愚蠢，请原谅我。然而，由于我目前的项目涉及大量数据和处理，**内存消耗很容易在几秒钟内超过 2GB，**这肯定会减慢整个过程，所以......是时候开始考虑如何解决它了。

* * *

所以，这是我的情况......

**我的主要类**（其中我正在创建数百万个实例（希望它们被自动删除，因为它们不再被使用），所以据说*这*是罪魁祸首）（大致）是这样的：

```
class MyClass
{
    public:
        // My Constructors
        MyClass ();
        MyClass (std::string param);

        // My Destructor (still empty)
        virtual ~MyClass ();

        // Some methods
        void methodA(std::string moves);
        void methodB();

        //----------------------
        // My Variables
        //----------------------
        boost::array<int,64> arrA;
        boost::array<unsigned int,13> arrB;
        unsigned int key;

        boost::array<int,3> arrC;       
        int argA;
        int argB;
}; 
```

这是（大致 - 实际代码已被更改）上述类的实例是如何创建的：

```
vector<MyClass*> SomeOtherClass::getListOfObjects()
{   
    vector<MyClass*> objects;

    for (int i=0; i<MAX_OBJS; i++)
    {
          // Do some preparatory work
          objects += new MyClass();
    }

    return objects;
} 
```

以下是如何使用上述函数的结果：

```
void SomeOtherClass::doSth()
{
    vector<MyClass*> objs = this->getListOfObjects();
    int objsSize = objs.size();

    for (int i=0; i<objsSize; i++)
    {
        MyClass* obj = objs[i];

        // Do sth with obj

        delete objs[i];
    }
} 
```

**所以，我的问题是：**

*   我应该在我的析构函数中做什么，以便当不再需要对象并因此被释放时，它的所有“子组件”也会被释放？（例如 2`boost::array`秒）

*   您注意到上述方法有什么问题吗？

* * *

请让我知道您是否需要了解有关我的实施的任何其他信息...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T07:36:59.640

您的类成员看起来不是动态分配的，在这种情况下，您不需要`delete`在析构函数中显式指定任何内容。如果您*碰巧*遗漏了一些指向已分配内存的指针，那么在您使用 分配的这个问题中，`new`您需要`delete`在析构函数中使用这些指针。

请记住，如果您`new`需要`delete`，同样使用`new[]`- `delete[]`。除非分配到一个`std::unique_ptr`.

如果您的`MyClass`对象本身是在堆上分配的`new`，那么您将不得不分配`delete`它们。

ps 如果你使用的是 C++11，你现在应该可以使用`std::array`了。

* * *

从您的新代码中，很明显，无论谁保留从 返回的列表`getListOfObjects()`，都需要`delete`在每个元素被销毁时调用它。它很可能是`SomeOtherClass`.

`MyClass*`或者，您可以将指针包装在 a `std::unique_ptr`or `std::shared_ptr`（或任何可能与此处相关的 boost 智能指针）中，然后当持有它们的向量超出范围并被销毁时，它将自动删除。

* * *

如果`doSth`它的表示是准确的，并确保`MyClass`get `delete`d 的所有实例，那么从内存泄漏的角度来看，这段代码似乎很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:42:33.383

我所看到的只是一个正确管理它的内存的类。`boost::array`是普通旧数组的精美包装器（`boost::array<int,64> arrA`只是`int arrA[64]`添加了方法以使其成为标准库算法的随机访问只读集合），因此被分配为对象的一部分。

现在，如果你说你有泄漏，你显然在某个地方对内存管理不善，但它不在这里。

* * *

在现代 C++ 中，趋势是避免自己编写删除，而是将其留给专门的析构函数。鉴于上面的分配代码，[Boost.Pointer Container](http://www.boost.org/libs/ptr_container/doc/ptr_container.html)可能是正确的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:46:45.720

我看到的都是在堆栈上分配的。因此它们在析构函数中得到妥善管理和删除。如果存在内存泄漏，可能是您正在调用`new MyClass`但没有释放它们。或其他地方的东西。

正如我在编辑后的代码中看到的那样，有一个向量您是否正在删除`objects`返回 的项目`SomeOtherClass::getListOfObjects`？

您也可以使用`boost::shared_ptr<MyClass>`而不是原始指针`MyClass*`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T07:54:39.740

这听起来有点奇怪

> 我的主要类（我正在创建数百万个实例（希望它们被自动删除，因为它们不再被使用）

如果您正在创建实例`MyClass`并且没有使用某种智能指针完成它，那么它们不会被神奇地删除，您需要完成这项工作。

# jquery - 如何更改谷歌静态地图位置的 SRC

> ID：14434169
> 
> 赞同：0
> 
> 时间：2013-01-21T07:32:36.273
> 
> 标签：jquery, google-maps

在页面的 Jquery Mobile 内容上，我有一个像这样的 img src：

```
<img id="map" src="https://maps.googleapis.com/maps/api/staticmap?center=Madison, WI&amp;zoom=14&amp;size=288x200&amp;markers=Madison, WI&amp;sensor=false" height="200" width="288" /> 
```

我有一个按钮和代码可以在 javascript 中更改上述 IMG 的 SRC

```
<script type="text/javascript">
        function update()
        {
            cval = '"https://maps.googleapis.com/maps/api/staticmap?center=Brisbane&amp;zoom=14&amp;size=288x200&amp;markers=Brisbane&amp;sensor=false"'
            $('#map').attr('src',cval);

        }
    </script> 
```

页面加载正常并显示地图图像。但是当我从一个按钮调用脚本时，我得到一个错误并且图像不会显示。查看 Chrome Inspect Elements，第一次调用是 GET 并加载图像，但第二次调用也是 GET 但不起作用，错误是“禁止”

我正在尝试制作一个移动页面，以便当用户输入新位置并单击刷新时，我想将 IMG 更新到新位置，但这给了我一个错误。

那么这里有什么问题呢？为什么第一个 GET 工作，但不是第二个，以及如何让它工作？

也只是在浏览器中粘贴 url 也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:32:11.977

我通过制作一个新`<img>`的而不是仅仅切换`src`属性来解决它。

[http://jsfiddle.net/lollero/VKAW9/1](http://jsfiddle.net/lollero/VKAW9/1)

HTML：

```
<img id="map" src="https://maps.googleapis.com/maps/api/staticmap?center=Madison, WI&amp;zoom=14&amp;size=288x200&amp;markers=Madison, WI&amp;sensor=false" height="200" width="288" /> 
```

jQuery：

```
$('html').on("click", function() {

    var map = $('#map'),
       cval = 'https://maps.googleapis.com/maps/api/staticmap?center=Brisbane&amp;zoom=14&amp;size=288x200&amp;markers=Brisbane&amp;sensor=false';

    $('<img id="map" height="200" width="288" src="'+ cval +'">').insertAfter( map );
    map.remove();

}); 
```

# c++ - 如何在 C++ 中检查互联网可用性

> ID：14434181
> 
> 赞同：4
> 
> 时间：2013-01-21T07:33:01.140
> 
> 标签：c++, c, wininet

我写了一个小函数来检查互联网连接的可用性

```
void cis()
{
    if(InternetCheckConnection(NULL,FLAG_ICC_FORCE_CONNECTION,0))
    {
        cout << "internet alive";
    }
} 
```

我正在`WinInet.h`使用`InternetCheckConnection()`. 现在的问题是我收到以下链接器错误：

```
[Linker error] undefined reference to `_imp__InternetCheckConnectionA@12' 
```

我正在为我的项目使用 DevC++。有关如何解决此链接器问题的任何想法或检查活动互联网连接的任何其他想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T07:36:01.697

它是一个链接器错误。根据您需要使用`wininet`库的文档。添加`-lwininet`makefile可能会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:49:51.900

对于 unix

```
 if (system("ping www.google.com -c 2 > /dev/nul") == 0) {
    cout << "all good" << endl;
}else{
    cout << "bad" << endl;
} 
```

视窗

```
 if (system("ping www.google.com -t 2 > nul") == 0) {
    cout << "all good" << endl;
}else{
    cout << "bad" << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:40:16.970

它找到了您的标题，但是您需要链接到库。尝试将 Wininet.lib 添加到您的项目中（尝试作为文件或在链接器属性中）并确保 Windows SDK 已正确安装在您的系统上。

# storage - Google 云端硬盘服务帐户额外存储空间

> ID：14434186
> 
> 赞同：2
> 
> 时间：2013-01-21T07:33:20.033
> 
> 标签：storage, google-drive-api, service-accounts

我有一个应用程序，我的应用程序的用户可以上传/下载文件，我不希望他们每次想要上传文件时都授权。所以我开始知道服务帐户是它的解决方案，而这正是我所寻找的。我按照此页面中给出的说明进行操作：

[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts)

这一切都很好，但问题是限制，即只有 5GB，我没有办法为我的服务帐户购买一些附加存储（提到它无法完成，但我还是想确认一下）。我不想使用网络服务器流程，我在其中保存凭据，即访问令牌并在每次令牌过期时刷新令牌。我的问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-20T11:32:15.260

将文件存储在您自己的 google 驱动器帐户而不是服务帐户的 google 驱动器中的解决方案是在您的 google 开发人员控制台中授予对您的服务帐户的所有者权限。

然后在您的个人 google 驱动器中创建一个文件夹并获取该文件夹的 ID。

并且当您使用服务帐户上传文件时，请确保将该文件夹的 ID 作为您正在上传的文件的父 ID

```
 $file = new Google_Service_Drive_DriveFile();
      $file->title = "Automata";
    $parent = new Google_Service_Drive_ParentReference();
    $parent->setId('Your Folder id');
    $file->setParents(array($parent));
      $requestss = $drive_service->files->insert($file,array(
          'data' => $data,
          'mimeType' => 'application/pdf',
        ));

    $permission = new Google_Service_Drive_Permission();
    $permission->setRole( 'writer' );
    $permission->setType( 'anyone' );
    $permission->setValue( 'youraccount@gmail.com' );
    $drive_service->permissions->insert( $requestss->getId(), $permission ); 
```

现在您将能够将文件上传到您自己的 google 驱动器而不是服务帐户驱动器

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T23:38:47.573

将您的普通帐户的文件夹共享到您的服务帐户。
您的服务帐号的地址类似于 XXX@XXX.iam.gserviceaccount.com。
然后您的服务帐户可以从您的普通帐户中看到共享文件夹。
现在，您的服务帐户获得了普通帐户的额外存储空间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T13:02:33.433

看一眼：

[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts)

服务帐户无法购买额外的存储空间，因此您需要使用常规 Google 帐户。

# java - 谁在状态模式中定义状态转换？

> ID：14434187
> 
> 赞同：16
> 
> 时间：2013-01-21T07:33:30.100
> 
> 标签：java, design-patterns, state-pattern

我知道`State pattern`can 可用于对根据状态改变行为的对象进行建模，并且`Context`can 具有的各种状态封装在表示`State`interface 的具体类中。我不清楚的是在这种模式下状态转换是如何发生的。个人是否`states`知道并决定跟随他们的人，还是`Context`决定下一个状态的人？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T07:36:38.263

来自 GOF 设计模式书（在实施部分中有）：

*1\. 谁定义状态转换？状态模式没有指定哪个参与者定义状态转换的标准。如果标准是固定的，那么它们可以完全在上下文中实现。然而，让 State 子类自己指定它们的后继状态以及何时进行转换通常更灵活和合适。这需要向 Context 添加一个接口，让 State 对象显式设置 Context 的当前状态。*

*以这种方式去中心化转换逻辑可以通过定义新的 State 子类来轻松修改或扩展逻辑。去中心化的一个缺点是一个 State 子类将至少了解另一个 State，这会在子类之间引入实现依赖关系。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-09T05:22:06.513

可能是一个比较具体的例子可以说明。我希望我理解正确

假设洗衣机有两种状态（开、关）。以下 GoF 词汇表：

*   上下文 => 洗衣机
*   状态 => WashingMachineState
*   具体状态 => StateOn, StateOff

对于状态转换，通过状态子类（在我们的例子中是 StateOn 和 StateOff），我们需要一个方法来改变状态上下文：

```
class WashingMachine {
   WashingMachineState state;
   ...
   protected void setState(WashingMachineState newState) {
      state = newState;
   }

   someMethod () {
      ...
      state.pushStartButton(this);
      ...
   }
}
abstract class WashingMachineState {
   protected void run();
   protected void pushStartButton(WashingMachine wm);
}
class StateOn extends WashingMachineState {
   ...
   void pushStartButton(WashingMachine wm) {
      wm.setState(new StateOff())
   }
}

class StateOff extends WashingMachineState {
   ...
   void pushStartButton(WashingMachine wm) {
      wm.setState(new StateOn())
   }
} 
```

请记住，有几种方法可以实现它，创造力会有所帮助！

# php - 如何使用php编辑图像

> ID：14434189
> 
> 赞同：0
> 
> 时间：2013-01-21T07:33:46.147
> 
> 标签：php, image-processing

我写了以下一组代码。

```
$image = ImageCreate(200, 50);
$background_color = ImageColorAllocate($image, 255, 255, 255); // white
$gray = ImageColorAllocate($image, 204, 204, 204); // gray
ImageFilledRectangle($image, 50, 10, 150, 40, $gray);
header('Content-type: image/png');
ImagePNG($image); 
```

运行此代码时出现错误

```
The image "http://localhost/app/" cannot be displayed because it contains errors. 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:04:06.417

这不是直接`PHP`错误，因为您发布的代码是正确的。这很可能是由外部的一些额外数据引起的`php tags.`

如果这是您在文件中的全部内容，它可以工作

```
<?php
$image = ImageCreate(200, 50);
$background_color = ImageColorAllocate($image, 255, 255, 255); // white
$gray = ImageColorAllocate($image, 204, 204, 204); // gray
ImageFilledRectangle($image, 50, 10, 150, 40, $gray);
header('Content-type: image/png');
ImagePNG($image);
?> 
```

但这不会

```
<?php
//see the new line outside the php tags below? this will break the image.
?>

<?php
$image = ImageCreate(200, 50);
$background_color = ImageColorAllocate($image, 255, 255, 255); // white
$gray = ImageColorAllocate($image, 204, 204, 204); // gray
ImageFilledRectangle($image, 50, 10, 150, 40, $gray);
header('Content-type: image/png');
ImagePNG($image);

//these extra lines wont matter, because they are inside the php tags.

?> 
```

确保 . 之前没有多余的空格或换行符`<?php`。如果您在此代码之前有一个包含文件，还要检查该文件（文件）以确保外部没有数据`<?php ?>`

# ios - 当我在视图库中推送 UIButton 时如何调用 AppDelegate

> ID：14434190
> 
> 赞同：0
> 
> 时间：2013-01-21T07:33:51.703
> 
> 标签：ios, xcode, methods, call, appdelegate

当我推送 UIBotton 时，我想从另一个视图库调用 FrameMarkersAppdelegate。我能怎么做？

> FrameMarkersAppdelegate.mm

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    window = [[UIWindow alloc] initWithFrame: screenBounds];
    [self setupSplashContinuation];
    [QCARutils getInstance].targetType = TYPE_FRAMEMARKERS;

    // Add the EAGLView and the overlay view to the window
    arParentViewController = [[ARParentViewController alloc] init];
    arParentViewController.arViewRect = screenBounds;
    [window insertSubview:arParentViewController.view atIndex:0];
    [window makeKeyAndVisible];
    return YES;
} 
```

> 视图控制器.m

```
-(IBAction)displaySelection:(id)sender 
{
       // How can I start FrameMarkersAppDelegate here?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:38:02.427

```
FrameMarkersAppdelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:46:26.467

虽然 sunkehappy 的答案几乎可以满足您的需求，但您可以通过让 appDelegate 成为您的班级成员来节省一些处理时间。

也就是说，app Delegate 是一个非常重要的类，它可以让你的应用有许多共享的实现。为了进一步节省您的执行时间，您可能还想尝试以下方法[。](https://stackoverflow.com/questions/12408684/define-for-appdelegate)

# ios - 在 Google 代码上基于 UPnPx 库开发 iOS DMC 应用程序

> ID：14434194
> 
> 赞同：-1
> 
> 时间：2013-01-21T07:34:10.623
> 
> 标签：ios, upnp, dlna

我正在开发一个 iOS 应用程序，该应用程序将用作支持 UPnP 协议的设备的基于 DLNA 技术的 DMC（数字媒体控制器）。我正在使用 code.google.com 上提供的 UPnPx iOS 库，并且已成功构建和运行演示应用程序。我可以浏览我的 Macbook Pro 上托管的 DMS（数字媒体服务器）的内容。我正在为此使用 serviio DMS 应用程序。

现在我的问题是，当我在 iOS 设备上运行该应用程序时，我能够浏览我的 DMS 共享的所有内容，但在`UITableView`页脚部分中，我只是得到文本“未选择渲染器”。这意味着该应用无法在同一个 Wi-Fi 网络中找到 DMR（数字媒体渲染器），或者我的网络上没有 DMR。

您能否向我建议该库可以识别的 iOS 设备或 Mac OS X 上的任何 DMR 应用程序？我也有 Android 设备，所以如果有任何免费的 DMR Android 应用程序可用于 Android，请建议我，以便我可以进一步测试和开发该应用程序。

我刚刚观察了适用于 Mac 的 XBMC 应用程序和适用于 iOS 设备的 XBMC 远程控制应用程序。我想开发一个类似的应用程序。这是否需要我编写自己的 DMR 应用程序以便我的应用程序可以从内部控制它，或者基于 UPnP 技术，我的应用程序可以控制同一 Wi-Fi 网络中的任何 DMR？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:27:37.310

[http://en.wikipedia.org/wiki/List_of_UPnP_AV_media_servers_and_clients](http://en.wikipedia.org/wiki/List_of_UPnP_AV_media_servers_and_clients)

在 iOS/MacOS 上不多。不知道为什么。Android有很好的选择。我个人可以确认 BubbleUPnP 和 UPnPlay 工作正常。除非您愿意，否则您绝对不需要编写自己的 DMR。它可以像在 Android 上编译现成的[Cling DMR](http://4thline.org/projects/cling/mediarenderer/)一样简单。

# javascript - Javascript 程序无法在 Windows 7 机器上运行

> ID：14434197
> 
> 赞同：0
> 
> 时间：2013-01-21T07:34:28.090
> 
> 标签：javascript, google-chrome, internet-explorer-7, ie8-compatibility-mode

我开发了一个 Javascript 程序，它在 Windows 8 PC 上运行良好，但在 Windows 7 上却不行。

该程序有一个按钮，允许用户选择文件并在文本区域中显示内容。

该网页在以下版本中进行了测试：

在 Windows 7 上 - Chrome 20.0.1132.47 m 和 IE7 在 Windows 8 上 - Chrome 在 20.0.1132.47 m 和 IE9 上

可能是由于Windows版本不同吗？无论如何通过调整机器配置或程序代码来克服它？如果是由于后者，我愿意附上代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:02:21.180

这是一个从文件中解密某些文本的程序。一个按钮允许用户从打开的对话框中选择一个文件。选择后，内容将显示在输入文本区域中。

请忽略下面的模块“readByLine”和“readKeyword”，因为存在一些问题。

不确定 HTML5 是否支持 Chrome 20.0.1132.47 m 和 IE7。

附上代码如下：

```
<html>
<head>
<script type="text/javascript">

//Select a Cipher file from Open Dialog Box
function readCipherFile()
{           
    if (!window.FileReader)
      document.getElementById("cipher").innerHTML = "<p>This browser doesn\'t support File API</p>";
    else
    {
        // Input handler for cipher text
        document.getElementById("cipherfile").onchange = function() { 
                                                    readFileAsText(this.files[0]);
                                                    };
    }
}

//Read content as text and display in Input textarea
function readFileAsText(file)
{
    var reader = new FileReader();

    reader.readAsText(file);
    reader.onload = function(event) {
      document.getElementById("cipher").innerHTML = event.target.result;
    };

    reader.onerror = function() {
      document.getElementById("cipher").innerHTML = 'Unable to read ' + file.fileName;
    };
}

//Select a Keyword file from Open Dialog Box
function readKeyword()
{
    if (!window.FileReader)
      document.getElementById("keyword").innerHTML = "<p>This browser doesn\'t support File API</p>";
    else
    {
        // Input handler for keyword
        document.getElementById("keyfile").onchange = function() { 
                                                    readByLine(this.files[0]);
                                                    };
    }
}

//Read and display one keyword at a time
function readByLine(file)
{
    var reader = new FileReader();
    var arr = "";

    console.log("test" + arr);
    console.log(file);
    reader.onload = function(event) {
      arr = event.target.result;
    };

    reader.readAsText(file);        

    for(i=0; i<arr.length; i++)
    {
        arr = arr.split("\n");
        document.getElementById("keyword").value = arr;
    }

    //display the next keyword when button is clicked
    var keyButton = document.getElementById("keyfile");
    keyButton.addEventListener("click", readByLine, false);
}

</script>

</head>
<body>
<center>
<h2>Vigenere Cipher</h2>
<br>
    <form name="form1">
      <table>
         <tr>
           <td>
             Input:
           </td>
           <td>
              <textarea name=input id="cipher" rows=10 cols=60 wrap=virtual></textarea>
           </td>
         </tr>
     <tr>
    <td></td>
    <td align="center">
        <input type=file id="cipherfile" onClick="readCipherFile(this)" />
    </td>
     </tr>
     <tr height="20px"></tr>
    <tr>
      <td>
        Key:
      </td>
      <td>
        <textarea name=key id="keyword" rows=2 cols=60 wrap=virtual></textarea>
      </td>
      <tr>
        <td></td>
        <td align="center">
            <input type=file id="keyfile" onClick="readKeyword()" />
        </td>
      </tr>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
      <td></td>
      <td>
        <input type=button value="Decrypt" onClick="decode()" style="margin-left: 135px">
      </td>
    </tr>
      <td>
        Output:
      </td>
      <td>
        <textarea id="output" rows=10 cols=60 wrap=virtual></textarea>
      </td>
    </table>
</form>
</center>
</body>
<html> 
```

# java - 使用 Java 代码通过 ftp 从 unix 服务器上的目录递归下载文件到本地目录

> ID：14434204
> 
> 赞同：1
> 
> 时间：2013-01-21T07:35:01.497
> 
> 标签：java, recursion, ftp, ftp4j

我需要使用 Java 从 Unix 服务器将文件从具有许多子目录（而每个目录又包含许多其他目录和文件）的目录 ftp 到我的本地计算机。

我尝试使用`org.apache.commons.net.ftp.FTPClient`和`it.sauronsoftware.ftp4j.FTPClient`下载，但我无法递归下载文件。

或者有什么办法可以将根目录本身下载到本地机器上？

请帮我。

# django - 如何清除imagekit缓存

> ID：14434206
> 
> 赞同：2
> 
> 时间：2013-01-21T07:35:08.453
> 
> 标签：django, django-imagekit

我在 S3 上使用带有 NonValidatingImageCacheBackend 后端的 imagekit。我最近更改了我的一个规格的大小，并意识到 imagekit 没有重新生成新规格，因为乐观的后端无法检索旧的缓存图像。

如何强制 imagekit 重新生成整个缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T20:54:39.883

我想通了（阅读后[）](https://github.com/jdriscoll/django-imagekit/issues/145)：假设您有一个 ImageSpec 调用`thumbnail`，然后只需调用该`generate`对象上的方法。它会为您重新生成缩略图文件。

# android-ndk - 不幸的是，android模拟器显示应用程序已停止

> ID：14434219
> 
> 赞同：0
> 
> 时间：2013-01-21T07:35:49.040
> 
> 标签：android-ndk, emulation

我使用 JNI 和 NDK 创建了一个 android 项目。在运行时，我没有收到任何编译时错误，而是在 logcat 中收到了一些错误，并且我的模拟器显示如上所述..

日志猫：

```
01-21 12:27:12.077: D/dalvikvm(1570): Not late-enabling CheckJNI (already on)
01-21 12:27:12.117: E/Trace(1570): error opening trace file: No such file or directory (2)
01-21 12:27:12.117: D/AndroidRuntime(1570): Shutting down VM
01-21 12:27:12.117: W/dalvikvm(1570): threadid=1: thread exiting with uncaught exception (group=0xb2fd6288)
01-21 12:27:12.117: E/AndroidRuntime(1570): FATAL EXCEPTION: main
01-21 12:27:12.117: E/AndroidRuntime(1570): java.lang.RuntimeException: Unable to instantiate application com.samplendk.SampleNDK: java.lang.ClassNotFoundException: com.samplendk.SampleNDK
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.LoadedApk.makeApplication(LoadedApk.java:501)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4124)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.ActivityThread.access$1300(ActivityThread.java:130)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.os.Looper.loop(Looper.java:137)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at dalvik.system.NativeStart.main(Native Method)
01-21 12:27:12.117: E/AndroidRuntime(1570): Caused by: java.lang.ClassNotFoundException: com.samplendk.SampleNDK
01-21 12:27:12.117: E/AndroidRuntime(1570):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.Instrumentation.newApplication(Instrumentation.java:967)
01-21 12:27:12.117: E/AndroidRuntime(1570):     at android.app.LoadedApk.makeApplication(LoadedApk.java:496)
01-21 12:27:12.117: E/AndroidRuntime(1570):     ... 11 more 
```

请解决我的问题？？

# sql-server - Mac 替代 SQL Server 管理工作室？

> ID：14434220
> 
> 赞同：32
> 
> 时间：2013-01-21T07:35:53.377
> 
> 标签：sql-server, windows, macos, sql-server-2008, ssms

我在 Windows 上，所以 SQL 服务器管理工​​作室对我来说很好。但是，我的应用程序是托管的，我的客户需要在 DB 中输入一些条目，并且他有 Mac。我们怎样才能克服这个问题？SSMS 是否有任何 MAC 选项？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T16:49:36.177

DbVisualizer 使用 java 独立于操作系统。

[http://www.dbvis.com/download/](http://www.dbvis.com/download/)

这是几年前的回答。另一种选择是 Azure 数据工作室

[https://docs.microsoft.com/en-us/sql/azure-data-studio/download-azure-data-studio?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/azure-data-studio/download-azure-data-studio?view=sql-server-ver15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T13:46:45.243

我使用 RazorSQL。它适用于 OS X、Windows 和 Linux，因此您可以根据需要在所有平台上使用一种工具。

[http://www.razorsql.com/](http://www.razorsql.com/)

# forms - 使用define CONSTANT的codeigniter表单验证

> ID：14434221
> 
> 赞同：0
> 
> 时间：2013-01-21T07:35:54.150
> 
> 标签：forms, codeigniter, validation

我在 /application/config/abc.php 中定义了一个常量

```
define('MINI_LENGTH', 5); 
```

然后在 /application/controllers/abc.php

```
$config_form = array(array(
    'field' => 'name',
    'label' => 'First name',
    'rules' => 'trim|required|min_length[MINI_LENGTH]'), 
```

它不起作用，我收到一条错误消息：“xxx 字段的长度必须至少为 MINI_LENGTH 个字符。”

我错过或做错了哪一部分？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:38:58.180

尝试

```
$config_form = array(array(
     'field' => 'name',
     'label' => 'First name',
     'rules' => 'trim|required|min_length['.MINI_LENGTH.']'), 
```

虽然我没有测试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:39:51.440

这很容易：

```
$config_form = array(array(
    'field' => 'name',
    'label' => 'First name',
    'rules' => 'trim|required|min_length['.MINI_LENGTH.']'), 
```

# php - php 输入的结果是 1 而不是 XML 数据

> ID：14434224
> 
> 赞同：2
> 
> 时间：2013-01-21T07:36:05.707
> 
> 标签：php, xml, curl, domdocument

我正在从 PHP 输入中读取 XML 数据，并且收到的是数字 1 而不是 XML 数据。

用于从 PHP 输入读取 XML 数据的 PHP 代码：

```
 $xmlStr="";
            $file=fopen('php://input','r');
            while ($line=fgets($file) !== false) {
              $xmlStr .= $line;
            }
            fclose($file); 
```

用于发送 XML 的 PHP 代码：

```
public static function xmlPost($url,$xml) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_VERBOSE, 1); // set url to post to
    curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // return into a variable
    curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml"));
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 40); // times out after 4s
    curl_setopt($ch, CURLOPT_POSTFIELDS, $xml); // add POST fields
    curl_setopt($ch, CURLOPT_POST, 1);
    $result=curl_exec ($ch);
    return $result;
} 
```

无论我发送什么 XML，接收端都会得到数字 1 而不是 XML 数据。有任何想法吗？

任何有关该问题的信息将不胜感激。

# 更新

以下代码有效：

```
$xmlStr = file_get_contents('php://input'); 
```

但为什么我的代码没有？为什么我的代码返回 1 而不是实际的 xml ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T07:56:17.150

尽管我也建议使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)来回答您的问题：
由于[运算符优先级](http://docs.php.net/manual/en/language.operators.precedence.php)，该行

```
while ($line=fgets($file) !== false) 
```

不能按您希望的方式工作。比较的结果`fgets($file) !== false`分配给 $line。当您将其附加到 $xmlStr 时，布尔值将转换为字符串。由于 while 循环的条件是 $line 为真，`(string)$line`因此将始终`1`在该循环“内”。
你需要

```
while ( ($line=fgets($file)) !== false) 
```

改变优先级

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:59:38.907

尝试添加额外的括号：

```
while (( $line=fgets($file) ) !== false) {...} 
```

# c# - 循环数据C#的最佳方法是什么

> ID：14434227
> 
> 赞同：-3
> 
> 时间：2013-01-21T07:36:17.893
> 
> 标签：c#, windows-ce

我想遍历设备应用程序上的一些数据。例如：

```
Select name, surname, mail_ad, phone_nr from cust_details 
```

在表单上，​​我想用下一个和上一个按钮逐行显示。例如：

**姓名：** 维尔纳

**姓名：** VDH

**邮箱：** werner@me.com

**电话号码：** 0716848805

**[上一个]** **[下一个]**

我在这方面遇到了很多麻烦。我以前使用过 List，但它不像我想要的那样工作。有人可以在这里帮助我吗？

我是如何使用列表的：

```
public List<String> InfoList = new List<String>();
int i = 1;

conn.Open();
string query;
query = "Select name, surname, mail_ad, phone_nr from cust_details";
OracleCommand cmd = new OracleCommand(query, conn);
OracleDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
   this.InfoList.Add(dr["name"].ToString());
   this.InfoList.Add(dr["surname"].ToString());
   this.InfoList.Add(dr["mail_ad"].ToString());
   this.InfoList.Add(dr["phone_nr "].ToString());
}
dr.Close();
conn.Close(); 
```

然后在下一个和上一个按钮中：

```
if (i + 1 < this.InfoList.Count)
   label1.Text = this.InfoList[++i];
if (i + 1 < this.InfoList.Count)
   label2.Text = this.InfoList[++i];
if (i + 1 < this.InfoList.Count)
   label3.Text = this.InfoList[++i];
if (i + 1 < this.InfoList.Count)
    label4.Text = this.InfoList[++i];

if (i - 1 < this.InfoList.Count)
   label1.Text = this.InfoList[--i];
if (i - 1 < this.InfoList.Count)
   label2.Text = this.InfoList[--i];
if (i - 1 < this.InfoList.Count)
   label3.Text = this.InfoList[--i];
if (i - 1 < this.InfoList.Count)
   label4.Text = this.InfoList[--i]; 
```

我正在使用标签来显示数据。我遇到的问题：有时当我点击下一个时，标签的顺序会混淆。或 1 个标签中没有任何信息。当我点击上一个并且没有更多细节时，我得到了例外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:48:29.003

我不知道这是否是您要寻找的，但只需创建一个类，然后使用`List<YourClass>`. 通过使用定义它`List<YourClass> myList = new List<YourClass>();`

要将值添加到列表中，您必须创建一个对象`YourClass`并在那里定义值：

```
YourClass myClassObject = new YourClass();

myClassObject.name = dr[i].toString(); //This is the database reader 
```

`Class YourClass`包含以下属性：

```
string name, 
string surname, 
string mail_address, 
string phone_nr. 
```

属性是这样写的，并且表现得像全局变量：

```
internal string mystring {get; set;} 
```

然后您可以遍历此列表并使用以下变量：

```
name_Lbl.Text = this.myList.name[i]; //This is an example. 
```

然后使用按钮的 OnPress-Event 递增或递减`i`。

编辑：正确命名您的课程；）

编辑 2：有关属性的更多信息，请[单击我](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:44:54.463

把它变成一个类：

```
class CustDetails
public string Name
{
get;
set;
}
public string Surname
{
get;
set;
}
public string Email
{
get;
set;
}
public ulong PhoneNumber
{
get;
set;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:09:23.800

第一步，将你的详细信息封装到一个数据包类中

```
public class CustDetails
{
    public string Name {get; set;}
    public string Surname {get; set;}
    public string MailAddress {get; set;]
    public string Phone {get; set;}
 } 
```

步骤 2\. 创建 CustDetails 列表——这是您的 InfoList

```
 public List<CustDetails> InfoList = new List <CustDetails>(); 
```

步骤 3\. 将您查询的详细信息分配给您的新班级

```
conn.Open();
string query = "Select name, surname, mail_ad, phone_nr from cust_details";
OracleCommand cmd = new OracleCommand(query, conn);
OracleDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
   var details = new CustDetails { Name = dr["name"].ToString(),
                     Surname = dr["surname"].ToString(),
                     MailAddress = dr["mail_ad"].ToString(),
                     Phone = dr["phone"].ToString() }
   this.InfoList.Add(details);
}
dr.Close();
conn.Close(); 
```

第 4 步。跟踪您当前的位置。实现方法以访问上一个和下一个按钮中的上一个或下一个详细信息。您的上一个和下一个按钮处理程序分别如下所示：

```
//previous
if (current == 0)
    //you are at the beginning of the list, the button should be disabled, 
    // handle it accordingly. In this case I just terminate
    return;
current--;
var detail = InfoList[current];
label1.Text = detail.Name;
label2.Text = detail.Surname;
label3.Text = detail.MailAddress;
label4.Text = detail.Phone;

//next
if (current == (InfoList.Count -1))
    //you are at the endof the list, the button should be disabled, 
    // handle it accordingly. In this case I just terminate
    return;

current++;
var detail = InfoList[current];
label1.Text = detail.Name;
label2.Text = detail.Surname;
label3.Text = detail.MailAddress;
label4.Text = detail.Phone; 
```

**只需确保您可以跟踪方法调用之间的“当前”**要么将其添加为参数，要么创建一个全局变量。

# javascript - Jinja，Javascript 和 Google Maps Api，冲突

> ID：14434229
> 
> 赞同：0
> 
> 时间：2013-01-21T07:36:27.780
> 
> 标签：javascript, python, maps, jinja2

我正在尝试使用 google api 显示地图，但没有显示。

```
<script type="text/javascript"    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAH35jXY2Yb5eApUzvZXuObiwFOpTC9xu0&sensor=true"> </script> 
```

钥匙

```
{% if page == "Map"  %}
  <body bgcolor="#000000" onload="initialize()" >
    <div id="floater" style="color:#33ff33; width:100%;"> Cool Title Here </div>
    <div id="map_canvas" style="width: 60%; height:80%"></div>
  </body>
{% endif %} 
```

金贾

```
<script>
var map;
var markersArray = [];
var newMark;

function initialize() {
    var a = new google.maps.LatLng(40.731649,-73.923269);
    var mapOptions = {
        zoom: 12    ,
        center: a,
        mapTypeId: google.maps.MapTypeId.HYBRID
    };
    map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    {% for x in MessageList %}
    newMark = new google.maps.LatLng({{x[1]}},{{x[0]}});
    addMarker(newMark, "{{x[2]}}")  ;
    {% endfor %}
    infowindow = new google.maps.InfoWindow({   content: "holding..."  });
    for (var i = 0; i < markersArray.length; i++) {
      var marker = markersArray[i];
  google.maps.event.addListener(marker, 'click', function () {
    infowindow.setContent(this.user);
    infowindow.open(map, this);
    map.setCenter(this.getPosition());
  });    
    }
}
</script> 
```

Javascript

我之前在没有 Jinja 的情况下使用过这段代码来围绕身体，它适用于此。这是它在我的测试页面中的样子（这里没有显示标记，但它们很实用） ![在此处输入图像描述](../Images/4d8aa0c7e4bd6bdc0a012e0cf7a9087b.png)

这是我正在使用的当前页面： ![在此处输入图像描述](../Images/965808908aaac85e9bd6a5476d6b1770.png)

控制台不显示任何错误。目前，“浮动”显示但地图没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:52:58.450

非易失性。原来是像 map_canvas 一样简单的东西不能在括号内，只能在外面。

# html - 调整窗口大小时的页脚“跳起来”

> ID：14434230
> 
> 赞同：1
> 
> 时间：2013-01-21T07:36:27.827
> 
> 标签：html, css, footer

我有一个绝对定位的页脚，当浏览器窗口调整大小时，它会向上移动并与内容重叠。

这是HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>

<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>FOO</title>
<link href="../stylesheet/typo.css" rel="stylesheet" type="text/css">  
<link href="../stylesheet/main.css" rel="stylesheet" type="text/css">

</head><body>

<div id="header">
<h1><br>Blah Blah</h1>
&nbsp;&nbsp;
<h5 style="overflow:hidden">Foo</h5>
</div>

<div id="container">
<div class="loginbox">
<div class="innerlogin" align="left">
<span wicket:id="topPanel"> 
<h3>Please Login</h3>
<br><br>
<form style="margin:0">
<label for="name">Username</label><br>
<input type="text" name="name" class="styledinput" /><br>
<label for="password">Password</label><br>
<input type="password" class="styledinput" /><br><br>
<input type="submit" value="Login" class="login" />
</form>

 </span></div>
 </div>

<div class="contentbox">
<div class="rightcont">
<div id="content" align="left">LoremIpsum </div>

 <img src="../images/imageright.png" style="margin-left:70px">
 </div>
 </div>
 </div>
 <div id="clearfix"></div>
 <div id="footerhome">1400Labs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Legal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Privacy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 About&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Terms&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Help</div>
 </body>
 </html> 
```

和 CSS

```
 body {
margin: 0px;
padding-bottom: 100px;
border-width: 0px;
height: 100%;
background: #e1d8d8;
    }

     #header {
width: 100%;
margin: 0px auto;
padding-left: 12.85%;
background-color: #205081; /*#4f4f4f#205081*/
position: relative;
height: 80px;
    }

    #footerhome {
position: absolute;
bottom: 0;
float: left;
width: 100%;
height: 100px; /* Height of the footer */
background: #fff;
font-size: 10px;
text-align: center;
margin-top: auto;
clear: both;
    }

   /*Heading Spans*/
    h1 {
font-family: Arial;
color: #FFF;
margin: 0;
padding: 0;
    }

    h5 {
font-family: Arial;
color: #FFF;
margin: 0;
padding: 0;
    }

   h3 {
color: #205080;
font-family: Arial;
   }
     /*Menu Table*/
    #menutable {
margin-top: 10px;
border-spacing: 25px;
background: #4f4f4f;
   }
  /*Content Divs*/
 .loginbox {
width: 30.666%;
margin-top: 15%;
float: right;
margin-right: 12.5%;
display: inline;
  }

   .contentbox {
width: 30.666%;
margin-top: 15%;
float: left;
margin-left: 12.5%;
     }

    .rightcont {
position: relative;
width: 30em;
height: 18em;
margin-top: -9em; /*set to a negative number 1/2 of your height*/
margin-left: -20em border:  2px solid #ccc;
background: transparent padding-bottom:0px;
padding-top: 10px;
    }

   .innerlogin {
position: fixed width:30em;
height: 18em;
margin-top: -9em; /*set to a negative number 1/2 of your height*/
margin-left: -15em border:  2px solid #ccc;
padding-bottom: 0px;
background: transparent;
padding-top: 100px;
padding-left: 100px;
     }
     /*Form Elements*/
    .login {
background: #205080;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
border: none;
color: #FFF;
font-weight: bold;
text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);
-webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px
    rgba(0, 0, 0, 0.2);
-moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px
    rgba(0, 0, 0, 0.2);
box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px
    rgba(0, 0, 0, 0.2);
height: 25px;
width: 60px;
"
    }

 label {
font-size: 12px;
font-family: Arial;
color: #205080;
text-align: left;
  }

.styledinput {
border-radius: 4px
}
/*content*/
#content {
color: #205080;
font-size: 14px;
width: 320px;
margin-left: 100px;
}

#container {
width: 1000px;
margin: 0 auto;
padding-top: 30px;
padding-bottom: 20px;
clear: both;
margin-bottom: 100px;
}

#clearfix {
clear: both;
}

@media screen and (max-width: 1000px) {
.contentbox {
    width: 30.666%;
    margin-top: 15%;
    float: left;
    margin-left: 0%;
}
.loginbox {
    width: 30.666%;
    margin-top: 15%;
    float: right;
    margin-right: 12.5%;
    margin-left: 0;
    display: block;
}
#container {
    width: 1000px;
    margin: 0 auto;
    padding-top: 30px;
    padding-bottom: 20px;
    clear: both;
    margin-bottom: 100px;
    margin-bottom: 100px;
}
} 
```

页脚礼貌： http: [//matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

jsFiddle： http: [//jsfiddle.net/anirudhvarma/JLZzs/](http://jsfiddle.net/anirudhvarma/JLZzs/) 我希望我说清楚了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:03:11.890

您没有正确格式化 HTML 标签。

使您的`container`div 父`footerhome`级 div 并相应地调整您的 CSS。

像这样：[演示](http://jsfiddle.net/JLZzs/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:41:34.603

你可能想用

```
html {
  height: 100%;
} 
```

看看是否有帮助。

还引入了一个包装器 div，底部有一个填充以容纳页脚

```
<div id="wrapper">

<div id="header">
<h1><br>Blah Blah</h1>
&nbsp;&nbsp;
<h5 style="overflow:hidden">Foo</h5>
</div>

<div id="container">
<div class="loginbox">
<div class="innerlogin" align="left">
<span wicket:id="topPanel"> 
<h3>Please Login</h3>
<br><br>
<form style="margin:0">
<label for="name">Username</label><br>
<input type="text" name="name" class="styledinput" /><br>
<label for="password">Password</label><br>
<input type="password" class="styledinput" /><br><br>
<input type="submit" value="Login" class="login" />
</form>

 </span></div>
 </div>

<div class="contentbox">
<div class="rightcont">
<div id="content" align="left">LoremIpsum </div>

 <img src="../images/imageright.png" style="margin-left:70px">
 </div>
 </div>
 </div>
 <div id="clearfix"></div>
 <div id="footerhome">1400Labs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 Legal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Privacy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 About&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Terms&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Help</div>

</div> /* end wrapper */ 
```

CSS：

```
#wrapper {
  position:absolute;
  top:0px;
  left:0px;
  padding-bottom:100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:45:57.260

`position: absolute;` 从#footerhome中删除，或者您可以更改为`position: relative;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T05:31:09.577

试试这种方式

```
<body>

<div id="wrapper">
    <div id="header">
        <h1> Header</h1>
        <div id="content">
            <p> text for content </p>
        </div>
    </div>
        <div id="footer">
            <p> text for footer </p>
        </div>
</div>
</body> 
```

CSS

* * *

```
body, html {
    height: 100%;
    }

p {
    -moz-column-count:3;
    -moz-column-width: 200px;
}

#wrapper {
    margin:0 auto;
    width: 75%;
    height: 75%;
    background: yellow;
    }

#header {
    min-height: 100%;
    margin-bottom: -200px;
    }

#footer {
    background: red;
    height: 200px;
    } 
```

# jquery-mobile - $.mobile.changePage 与 Jquery 移动中的角色弹出？

> ID：14434235
> 
> 赞同：0
> 
> 时间：2013-01-21T07:36:53.363
> 
> 标签：jquery-mobile

是否可以使用 Jquery Mobile 在 changePage 中将数据角色作为弹出窗口。

我正在尝试以下代码

```
$.mobile.changePage('Last.html',{
            transition : 'slide',
                        role : 'popup'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:04:02.983

不幸的是，从您的问题中不清楚您为什么需要这个。

尽管如此，根据 jQM 1.2.0 文档：

> 要创建弹出窗口，请将 data-role="popup" 属性添加到带有弹出窗口内容的 div。然后创建一个链接，href 设置为弹出 div 的 id，并添加属性 data-rel="popup" 告诉框架在点击链接时打开弹出窗口。这是与对话框小部件类似的标记模式。**弹出 div 必须嵌套在与链接相同的页面内。**

所以您可能无法处理外部页面 ( `Last.html`)

你可以做什么：

1.  为 jQM 页面中的弹出窗口创建适当的标记
2.  如果需要，您可以使用 `popupbeforeposition`和/或以编程方式操作弹出窗口的内容`popupafteropen`
3.  `popup("open")`使用方法打开一个弹出窗口

在这里您可以找到[其中一个示例](https://stackoverflow.com/questions/14431100/how-do-i-change-the-text-of-a-jquery-popup-dynamically)。

# objective-c - 导航控制器中的循环方法，用户前景

> ID：14434236
> 
> 赞同：0
> 
> 时间：2013-01-21T07:36:57.050
> 
> 标签：objective-c

在我的应用程序中，我有 2 个视图控制器，ViewController1 和 ViewController2。根据要求，我必须在 ViewController1 上推送 ViewController2。而在 ViewController2 中有一个链接会再次推送 ViewController1，所以这个推送过程会继续进行。现在我的问题是根据用户的可访问性推送这样的视图控制器的好习惯？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:01:53.193

这不是一个好的做法，因为它可能会损坏视图控制器层次结构。如果这是一个强大的前景，那么：

*   只是让导航控制器弹出vc2，show vc1 / vc1弹出模态视图控制器vc2

或者

*   代替导航控制器，使用您自己定制的 UIViewController 容器，这样来自 vc2 的弹出可能会以 vc1 被推入的方式进行动画处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:49:45.077

继续推送视图不是一个好习惯，因为如果用户想要返回，他将不得不在用户推送视图的次数内继续返回。

您可以尝试两种方法中的任何一种：

*   在 view1 上推送 view2，并从 view1 弹出 view2 或
*   如果您的逻辑允许，请在 view1 上添加子视图 view2，并从超级视图 view2 中删除。但我会说第一步更好。

# asp.net - Response.Write - Internet Explorer 中的文件名编码错误

> ID：14434239
> 
> 赞同：2
> 
> 时间：2013-01-21T07:37:31.483
> 
> 标签：asp.net, internet-explorer, encoding

我使用以下代码将文件从我的服务器发送到客户端：

```
Response.AppendHeader("content-disposition", "attachment; filename=" + FileName);
Response.ContentType = MimeType;
Response.WriteFile(PathToFile);
Response.End(); 
```

这工作正常。问题是，当我从 Internet Explorer 下载文件时，特殊字符（如丹麦语 æ、ø 和 å）会被错误解释。因此，我使用名称为“Test æøå file.txt”的文件下载为“Test Ã¦_Ã¸_Ã¥ f​​ile.txt”

我尝试将字节顺序标记添加到响应中：

```
byte[] BOM = { 0xEF, 0xBB, 0xBF };
Response.BinaryWrite(BOM); 
```

并设置字符集：

```
Response.Charset = "UTF-8";
Response.ContentEncoding = System.Text.Encoding.UTF8; 
```

但如果它有帮助，那就没有了。这似乎只是 Internet Explorer 中的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:57:43.837

标头不使用内容的编码，因此更改内容编码无济于事。有一个为标头参数指定编码的标准，但它是相当新的，所以它不会在所有浏览器中得到完全支持：

[http://greenbytes.de/tech/webdav/rfc5987.html](http://greenbytes.de/tech/webdav/rfc5987.html)

这是您对名称进行编码的方式：

```
string FileName = "Test æ ø å file.txt";

string name = String.Concat(Encoding.UTF8.GetBytes(FileName).Select(b => {
  if ((b >= 48 && b <= 57) || (b >= 65 && b <= 90) || (b >= 97 && b <= 122)) {
    return new String((char)b, 1);
  } else {
    return String.Format("%{0:x2}", b);
  }
}).ToArray());

Response.AppendHeader("content-disposition", "attachment; filename*=UTF-8''" + name); 
```

以标题结尾的文本如下所示：

```
attachment; filename*=UTF-8''Test%20%c3%a6%20%c3%b8%20%c3%a5%20file%2etxt 
```

注意：代码对除字母数字以外的所有字符进行编码。这可行，但并非所有其他字符都需要编码。在检查标准后，您可以改进代码以保留更多未编码的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:44:10.657

尝试指定特定的文件类型，如下所示（这是用于 excel 文件类型） -

```
Response.ContentType = "application/vnd.ms-excel"; 
```

请参阅[强制下载文本响应的内容类型是什么？](https://stackoverflow.com/questions/186867/what-content-type-to-force-download-of-text-response)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T11:24:29.687

解决 Internet Explorer 文件名问题要容易得多，您会在[这里找到答案](https://stackoverflow.com/questions/8551522/valid-filenames-for-download-in-ie)

您必须`HttpUtility.UrlPathEncode(yourFileName)`- 因为这会弄乱其他浏览器中的文件名，您必须检查浏览器 ( `Request.Browser.Browser`) 是否为 Internet Explorer（*IE*直到版本 10，*Internet Explorer*从版本 11）。

# php - Javascript警报在codeigniter中的实时服务器上不起作用

> ID：14434253
> 
> 赞同：0
> 
> 时间：2013-01-21T07:39:10.107
> 
> 标签：php, javascript, codeigniter

我在codeigniter工作。我在 javascript 代码中有一个错误。我有一个登录表单，如果登录名或用户名错误，我想显示一个 javascript 警告框。我已经在 localhost 上完成了我的项目，并且 javascript 在 localhost 上运行良好。但是当我在实时服务器上上传项目时，它会显示一条错误消息。

遇到 PHP 错误

> 严重性：警告消息：无法修改标头信息 - 标头已发送（输出开始于 /home/servername/public_html/projectdemo/wms/application/controllers/login.php:36） 文件名：helpers/url_helper.php 行号：540

我把这个javascript代码放在控制器中

```
<script type='text/javascript'>
function jsfunction()
{
    window.alert("Wrong User Name or Password");
}
</script> 
```

在控制器中，我调用了这个函数：

```
echo "<script type='text/javascript'>jsfunction();</script>"; 
```

后来我把脚本放在 head 部分，但出现了同样的错误消息。
你能帮我么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:42:44.773

CodeIgniter 使用视图/模板渲染系统正式回复客户端。在框架过程的那一部分之前回显某些内容会导致服务器提前回复客户端，因此“标头已发送”。此后，CodeIgniter 无法再按预期做任何事情，因为您强制服务器过早回复。

您应该做的是与模板/视图数据一起设置一些标志，以便视图可以有条件地在视图/模板中呈现一段 HTML（这将是您的错误警报代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:43:34.693

标头必须在任何 HTML、JS、CSS 等之前解析。

正如[https://stackoverflow.com/users/920374/setsuna](https://stackoverflow.com/users/920374/setsuna)提到的，您应该将 JavaScript 放入视图文件中。您的 PHP 错误基本上是在发送页面标题之前有输出，这搞砸了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:43:59.463

在此处检查接受的答案：[如何修复 PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

剧透：你不能在控制器中开始输出，这就是你有视图的原因。

# android - 生成 csv 文件和电子邮件作为附件

> ID：14434256
> 
> 赞同：1
> 
> 时间：2013-01-21T07:39:26.737
> 
> 标签：android, android-intent, email-attachments

我正在尝试生成 Csv 文件，同时将其作为电子邮件附件发送。它在通过电子邮件发送时显示附件，但问题是当我检查收件箱时，我只找到没有附件的电子邮件。我会感谢你的帮助。

这是我尝试过的代码

```
 buttonSend = (Button) findViewById(R.id.buttonSend);

        textTo = (EditText) findViewById(R.id.editTextTo);
        textSubject = (EditText) findViewById(R.id.editTextSubject);
        textMessage = (EditText) findViewById(R.id.editTextMessage);

        buttonSend.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                String to = textTo.getText().toString();
                String subject = textSubject.getText().toString();
                String message = textMessage.getText().toString();

                Intent i = new Intent(Intent.ACTION_SEND);
                i.setType("plain/text");
                File data = null;
                try {
                    Date dateVal = new Date();
                    String filename = dateVal.toString();
                    data = File.createTempFile("Report", ".csv");
                    FileWriter out = (FileWriter) GenerateCsv.generateCsvFile(
                            data, "Name,Data1");
                    i.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(data));
                    i.putExtra(Intent.EXTRA_EMAIL, new String[] { to });
                    i.putExtra(Intent.EXTRA_SUBJECT, subject);
                    i.putExtra(Intent.EXTRA_TEXT, message);
                    startActivity(Intent.createChooser(i, "E-mail"));

                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        });
    }

    public class GenerateCsv {
        public static FileWriter generateCsvFile(File sFileName,String fileContent) {
            FileWriter writer = null;

            try {
                writer = new FileWriter(sFileName);
                writer.append(fileContent);
                             writer.flush();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }finally
            {
                try {
                    writer.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            return writer;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T08:07:39.033

可以看出，您的 GenerateCsv 不起作用，您必须导入 csv 库。在您的代码中没有任何内容。要下载检查这个：[Csv 库](https://stackoverflow.com/questions/9561749/create-csv-fie-in-android-app)

另请参阅：[读/写 csv](http://www.codeproject.com/Questions/491823/Read-2fWriteplusCSVplusinplusplusAndroid)

和清单中的许可：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# tcl - tcl 中的 fileevent 在接收 udp 数据时不起作用。怎么做？

> ID：14434270
> 
> 赞同：0
> 
> 时间：2013-01-21T07:40:58.467
> 
> 标签：tcl

我正在使用 tcl 提供的 udp 包从一台电脑向另一台电脑发送 udp 数据包。在接收方，我创建了一个文件事件，这样只要 udp 端口​​上有数据，它就应该调用处理程序来读取数据。但是当我运行我的接收器脚本时，什么都没有发生，直到我在脚本中提到永远等待。我想要一个功能，只要 udp 端口​​上有数据，我就想读取它。请告诉我我该怎么做。这是我的发送者和接收者脚本。

名为“udp_sender_script.tcl”的发件人脚本：

```
namespace eval soc {
variable s
}

set soc::s [udp_open]
udp_conf $soc::s $IP_ADDR_RX  $UDP_PORT
fconfigure $soc::s -buffering none -translation binary

set data 1234
append hex [ format %04X [ expr $i | 0x8000 ] ]
append hex [ format %08X [ expr $data ] ]

while { 1 } {
after 500
puts -nonewline $soc::s [binary format H* $hex]
} 
```

名为“udp_receiver_script.tcl”的 udp 脚本

```
proc udp_listen {} {
set pkt [read $soc::s ]
if { $pkt > 0 } {
puts "received string is $pkt"
}
return 0
}

proc every { ms body } {
eval $body; after $ms [info level 0]}

if { $argc < 1 } {
puts "ERROR! Please give udp port number as an argument while running the script"
} else {
set UDP_PORT [lindex $argv 0]
set  soc::s [udp_open $UDP_PORT]
fconfigure $soc::s -buffering none -translation binary
fileevent $soc::s readable [list ::udp_listen $soc::s]
} 
```

如果我在接收器脚本的 while 循环中读取 udp 端口​​上的数据而不是使用 fileevent，我会得到数据。但我不会不必要地使用 while 循环。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:58:13.893

除非您的第二个片段不是真正完整的，否则您会错过一个关键点：对于任何类型的事件，包括使用 设置的事件，`fileevent`Tcl 运行时都必须*“进入事件循环”。*这暂停了使 Tcl 进入事件循环的脚本的执行，并且*仅*在响应生成的各种事件时才对 Tcl 代码进行进一步处理。当运行时离开事件循环时，将恢复正常处理。

在不使用 Tk 的程序中，通常使用[`vwait`](http://www.tcl.tk/man/tcl8.5/TclCmd/vwait.htm)("wait for a variable until it'swritten") 命令进入事件循环，并且是这样完成[的](https://stackoverflow.com/a/12198748/720999)。另请参阅[此](http://wiki.tcl.tk/1757)内容并通常[在 wiki](http://wiki.tcl.tk/)中搜索“事件”关键字。

我还强烈推荐阅读[“使用 Tcl 构建高性能网络服务器”](http://www.maplefish.com/todd/tcl_net_idioms.html)。

# java - action_send 有效...javamailapi 在 android sendmail 函数中无效

> ID：14434271
> 
> 赞同：0
> 
> 时间：2013-01-21T07:41:03.677
> 
> 标签：java, android, jakarta-mail, sendmail

我开发了一个发送电子邮件的 android 应用程序。

在这里，我必须发送多个产品详细信息发送到电子邮件。

我使用了以下代码：

```
 public class InvoiceOrder extends Activity {

        String mGrandTotal;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub  
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invoice);
    Bundle b = getIntent().getExtras();
    //String s= getIntent().getStringExtra("orderid");
    mGrandTotal = b.getString("GrandTotal");

    ListView mLstView1 = (ListView) findViewById(R.id.listView1);

    CustomerAdapter mViewCartAdpt = new CustomerAdapter(
            InvoiceOrder.this);
    mLstView1.setAdapter(mViewCartAdpt);

            Button login = (Button) findViewById(R.id.mBtnSubmit);
            login.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            Properties props = new Properties();
            props.put("mail.smtp.host", "smtp.gmail.com");
            props.put("mail.smtp.socketFactory.port", "465");
            props.put("mail.smtp.socketFactory.class",
                    "javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.port", "465");

            Session session = Session.getDefaultInstance(props,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("krishnaveniv96@gmail.com","arirajaguru");
                    }
                });

            try {

                Message message = new MimeMessage(session);
                message.setFrom(new InternetAddress("krishnaveni.veeman@mercuryminds.com"));
                message.setRecipients(Message.RecipientType.TO,
                        InternetAddress.parse("mercy.krishnaveni@gmail.com"));
                message.setSubject("Testing Subject");
                message.setSentDate(new Date());

                StringBuilder body = new StringBuilder();
                body.append("<html><body><table>"); 
                for (int i = 0; i < Constants.mItem_Detail
                        .size(); i++) {

                    String title = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_PNAME);

                    String qty = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_QTY);

                    String cost = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_PRICE);

                    String total = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_TOTAL);

                    body.append("<tr>" + "<td>" + title
                            + "</td><td>" + qty + " * " + cost
                            + "</td>" + " = <td>" + total
                            + "  " + "</td></tr>");
                }

                body.append("<tr>" + "<td>" + "Grand Total is:-  "
                        + "</td><td>" + mGrandTotal + " "
                    + "</td></tr>");
                body.append("</table></body></html>"); 
    final Intent emailIntent = new Intent(
                        android.content.Intent.ACTION_SEND);
                emailIntent.setType("text/html");
                emailIntent
                        .putExtra(
                                Intent.EXTRA_EMAIL,
                                new String[] { "mercy.krishnaveni@gmail.com,krishnaveni.veeman@mercuryminds.com" });

                emailIntent.putExtra(
                        android.content.Intent.EXTRA_TEXT,
                        Html.fromHtml(body.toString()));
                startActivity(Intent.createChooser(emailIntent,
                        "Email:")); 
                System.out.println("Done");

            } catch (MessagingException e) {
                throw new RuntimeException(e);
            }
           }

  });
        }

} 
```

在这里，使用 android 应用程序中的 ACTION_SEND 成功完成了将多个产品发送到电子邮件的操作。

但是我必须使用 java mail api 将多个产品详细信息发送到电子邮件。

我使用了 javamail api 意味着单个产品详细信息仅发送到邮件...但我必须发送多个产品详细信息。

这是我的代码：

```
Multipart multipart = new MimeMultipart();
                BodyPart messageBodyPart = new MimeBodyPart();
                for (int i = 0; i < Constants.mItem_Detail
                        .size(); i++) {

                    String title = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_PNAME);

                    String qty = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_QTY);

                    String cost = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_PRICE);

                    String total = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_TOTAL);
                    messageBodyPart.setText(title + qty + cost + total);

                }
            multipart.addBodyPart(messageBodyPart);

            message.setContent(multipart);

                 Transport.send(message); 
```

我的代码有什么问题。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:43:57.017

我在使用 stringbuffer 和 append 后得到了输出。

```
 StringBuffer sb = new StringBuffer();    
                sb.append("<html><body><table>"); 
```

在 for 循环中：

```
 StringBuffer buffer = sb.append("<tr>" + "<td>" + title
                            + "</td><td>" + qty + " * " + cost
                            + "</td>" + " = <td>" + total
                            + "  " + "</td></tr>");
                    messageBodyPart.setDataHandler(new DataHandler( new ByteArrayDataSource(buffer.toString(), "text/html; charset=utf-8"))); 
```

# shared-libraries - 使用 SWIG to Go 公开 C++ 函数：找不到共享库

> ID：14434277
> 
> 赞同：0
> 
> 时间：2013-01-21T07:41:46.743
> 
> 标签：shared-libraries, go, swig

我正在使用 SWIG 通过以下命令向 Go 公开一些 C++ 函数：

```
gcc -std=c++0x -Wall -Wextra -pedantic -fPIC -shared -L./lib -lsomething -o example.so
swig -go -intgosize 32 example.i
go tool 6g example.go
go tool 6c -I /usr/lib/go/pkg/linux_amd64 -D_64BIT example_gc.c
go tool pack grc example.a example.6 example_gc.6
rm -f example_wrap.c

go install  // this installs the generated .a; not the .so 
```

对于我的项目，我使用的是 /src:/pkg:/bin 文件结构，其中 $GOHOME 指向它。当我`import "example"` 在另一个 Go 包中使用时，我得到：

```
error while loading shared libraries: example.so: cannot open shared object file: No such file or directory 
```

我必须将共享库放在哪里，以便找到它？无需在系统目录中乱搞。

# neo4j - Neo4j——如何将图形数据存储在不同的磁盘中？

> ID：14434281
> 
> 赞同：2
> 
> 时间：2013-01-21T07:42:03.497
> 
> 标签：neo4j

我在使用不同磁盘的 Neo4j 存储上找不到任何内容。但是，事实上，有一个很大（非常大）的图并且无法存储在一台机器或磁盘中，如何使用 Neo4j 存储它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:16:40.857

为什么不只使用符号链接来执行此操作，并指出不同的文件？没有尝试过，但它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:24:53.350

你用的是社区版还是企业版？社区版本只能（根据许可证）在单个节点上运行 - 您可以以嵌入式方式或在单独的机器上运行它并从您的服务（Java/REST API）访问它。企业版可以根据许可证在多个节点上运行。

# ios - iOS 和 Sparrow 框架上的 UITextField

> ID：14434285
> 
> 赞同：0
> 
> 时间：2013-01-21T07:42:17.130
> 
> 标签：ios, cocoa-touch, keyboard, uikit, sparrow-framework

我需要在 UIView 上以编程方式添加 UITextField。我什至不需要 UITextField 可见，只需要键盘，因为我打算以其他方式处理文本字段方面。但是键盘根本没有出现。

我有这个：

```
UITextField* field = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

SPView* view = (SPView*)[SPStage mainStage].nativeView; // I think I don't need this line I believe, since I don't need it visible, but this is my UIView (SPView inherits from UIView)
[view addSubview:field];

[field becomeFirstResponder]; 
```

我还需要什么来显示 iOS 原生键盘吗？

为什么键盘不能显示？我错过了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:45:06.383

找到了解决方案。我在构造函数中调用代码。

虽然 Sparrow 上的其他所有内容都可以在构造函数中完成，但 nativeView 直到所有内容都构建完成后才被分配，因此视图给出`(null)`了一个`NSLog(@"%@", view);`

对代码进行了延迟调用（在调用之前等待 0.2 秒），现在它可以正常工作了。

# java - 如何使用 GSON 解析 JSONArray

> ID：14434286
> 
> 赞同：-2
> 
> 时间：2013-01-21T07:42:30.420
> 
> 标签：java, android, json, gson

> **可能重复：**
> [在 11 MB 的 android 中解析大型 json](https://stackoverflow.com/questions/14412676/parsing-a-large-json-in-android-of-11-mb)

我在使用 GSON 和 Jackson 在 android 中解析大约 11MB 的大型 JSON 时遇到问题。问题是发生内存不足错误异常并且堆大小不足以完成此过程。这是我的纸模型课

```
public class Paper {
    public int primaryKey;
    public String title;
    public int entry;
    public Boolean favourite;
    public String comment;
    public int opt;
    public int score;
} 
```

这是我的响应模型类

```
public class Response {
    public List<Paper> papers;
} 
```

这是我的 JSON 字符串

```
{"Paper":[[{"abstract":"Not Available","title":"A Fully Intraocular 0.0169mm<sup>2<\/sup>/pixel 512-Channel Self-Calibrating Epiretinal Prosthesis in 65nm CMOS","primaryKey":3,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A Scalable 2.9mW 1Mb/s eTextiles Body Area Network Transceiver with Remotely Powered Sensors and Bi-Directional Data Communication","primaryKey":14,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 0.18Âµm CMOS SoC for a 100m-Range 10fps 200Ã—96-Pixel Time-of-Flight Depth Sensor","primaryKey":20,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 12b 1.6GS/s 40mW DAC in 40nm CMOS with >70dB SFDR over Entire Nyquist Bandwidth","primaryKey":26,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"All-Digital Hybrid Temperature Sensor Network for Dense Thermal Monitoring","primaryKey":49,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"32Gb/s Data-Interpolator Receiver with 2-Tap DFE in 28nm CMOS","primaryKey":51,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 93% Efficiency Reconfigurable Switched-Capacitor DC-DC Converter Using On-Chip Ferroelectric Capacitors","primaryKey":60,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 45nm CMOS Near-Field Communication Radio with 0.15A/m RX Sensitivity and 4mA Current Consumption in Card Emulation Mode","primaryKey":61,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1}]]} 
```

我不知道我在哪里做错了。我因为论文而变得无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:49:34.107

> 我在使用 GSON 和 Jackson 在 android 中解析大约 11MB 的大型 JSON 时遇到问题。

下载和解析它会非常困难。11MB 太高了。

您可以使用的替代方案是：

> 您可以修改您的 Web 服务，使其具有类似 Counter 的分区， **`counter=1,2,3....`**使 WS 以这样的方式创建一个 WS，即解析后的前 1000 条记录用于 counter=1，另一个数据将用于 **counter=2**并解析它等等..

这将帮助您以某种方式解决您的问题。

# matlab - 关闭所有 GUI:s 如果主 GUI 正在关闭

> ID：14434291
> 
> 赞同：1
> 
> 时间：2013-01-21T07:43:01.977
> 
> 标签：matlab, user-interface

我可以用菜单或 x 按钮关闭我的主 gui

```
function menuProgramQuit_Callback(hObject, eventdata, handles)
close(handles.figure1); 
```

但是同时可能会打开一个子 gui 对话框

```
function pushbuttonCalibrationConfigure_Callback(hObject, eventdata, handles)
calibrationOutput = uiConfigureCalibration('uiMain', handles.figure1);
waitfor(calibrationOutput);
guidata(handles.output,handles); 
```

如果主图形已关闭，则子 gui 不关闭，并且当他关闭 subgui（此处 `uiConfigureCalibration`）时它会崩溃，因为主 gui 的图形句柄无效。

那么如何在关闭主 gui 之前关闭 matlab 中的所有子 gui？

编辑：我更改了代码，以便被调用的对话框将其句柄保存到主对话框的句柄

```
function uiConfigureCalibration_OpeningFcn(hObject, eventdata, handles, varargin)
% Choose default command line output for uiConfigureCalibration
handles.output = hObject;
% Update handles structure
guidata(hObject, handles);
% save handle of calling gui
mainGuiHandleIndex = find(strcmp(varargin, 'uiMain'));
if ~isempty(mainGuiHandleIndex)
    handles.mainHandle = varargin{mainGuiHandleIndex+1};
    handlesMain = guidata(handles.mainHandle);
    handlesMain.('openfigures').('calibration') = handles.figure1;
    guidata(handles.mainHandle, handlesMain);
    guidata(handles.figure1, handles);
end 
```

在主 gui 的关闭功能中，我无法检查图形是否在主图形关闭之前打开和关闭

```
if isfieldRecursive(handles, 'handles.openfigures.calibration') 
    close(handles.openfigures.calibration);
end
close(handles.figure1); 
```

然而，这并没有改变。子对话框图仅在主对话框关闭并且整个代码再次崩溃后才关闭。

为什么关闭命令没有关闭子对话框的图形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:36:29.337

您可以使用该`CloseRequestFcn` `figure`属性执行此操作。

这将让您拦截删除图形的请求，然后按照您认为合适的方式处理这些请求。

这是一个简单的函数，说明了如何使用`CloseRequestFcn`来实现您在上面描述的行为：

```
function figTest()

f1 = figure('UserData', 1, 'Position', [100 500 50 50]);
f2 = figure('UserData', 2, 'Position', [200 500 50 50]);

set(f1,'CloseRequestFcn', @preCloseMain);

function preCloseMain(src, e)

  % Delete f2, in try-block incase it was already closed
  try 
    fprintf('Closing non-main figures!\n');
    close(f2);
  end 
  fprintf('Closing main figure!\n');     
  delete(src);
end

end 
```

这是[官方文档](http://www.mathworks.com/help/matlab/creating_plots/the-figure-close-request-function.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T14:50:13.280

我只是遇到了同样的问题，我想在打开主窗口时关闭所有现有的 GUI 窗口。

我写了一个`.m`函数：

```
function closeAll()
clear all, close all, fclose('all'), clc, warning('off','MATLAB:xlswrite:AddSheet'); %   close all opened items and clear Matlab workspace
end 
```

并在 GUI OpeningFcn 或任何需要的地方调用此函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T18:10:55.597

我有一个类似的问题，我的 gui 会产生其他 gui，即选项 gui 和日志 gui。在我的主应用程序中，我有这样的事情。

```
logFH = CreateLog;
optFH = CreateOptions; 
```

这些函数将创建图形并返回句柄。句柄可以保存在 gui 句柄中或使用`setappdata`and保存`getappdata`。稍后我会关闭主要功能。

```
if (isgraphics(logFH))
    close(logFH);
    delete(logFH);
end 
```

# fortran - 不同等级的重载fortran接口

> ID：14434293
> 
> 赞同：6
> 
> 时间：2013-01-21T07:43:10.673
> 
> 标签：fortran, overloading, rank

在 Fortran 模块中，我有一个函数，它接受一个数组及其名称，从数据库（实际上调用一个 C 函数）获取数组的形状，将数组复制到临时缓冲区中并将缓冲区传递给另一个 C 函数来处理它。此 Fortran 函数的名称为 fs_WriteData_i（用于整数数据）、fs_WriteData_f（用于实数）和 fs_WriteData_d（用于双精度）。所有这些函数不仅接受一维数组，还接受 2D、3D 和 4D 数组，并且它们工作得很好。下面是这些子例程之一的接口：

```
subroutine fs_WriteData_d(fieldname, data)
    use, intrinsic :: iso_c_binding
    implicit none

    real(c_double), dimension(*) :: data
    character                    :: fieldname*(*)

    ! ...

end subroutine fs_WriteData_d 
```

如果用户调用`fs_WriteData_d('name', data)`数据是双精度的，最多 4 维数组，这个子例程就可以完成这项工作。

现在，问题是：我想提供一个名为 fs_WriteData 的通用重载接口，所以我使用

```
interface fs_WriteData
    module procedure fs_WriteData_i, &
                     fs_WriteData_f, &
                     fs_WriteData_d
end interface fs_WriteData 
```

不幸的是，这不起作用：编译器声明如果用户只调用`fs_WriteData('name', data)`，它无法找到正确的实现，这是因为与所有这些函数的排名不匹配。

是否有一种巧妙的方法可以避免编写所有 fs_WriteData_d_1d、fs_WriteData_d_2d、... 子程序的内容相同，从而使模块更易于维护？

提前谢谢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T08:37:00.133

有点。

正如您所发现的，从 F2008 开始，为通用调用选择特定过程的规则除其他事项和基本过程外，还需要类型、种类和等级的匹配（所谓的 TKR 兼容）。即使假定数据虚拟参数的大小（因此在直接调用特定过程时，它可以与任何非零等级的实际参数相关联），出于 TKR 兼容性的目的，它仍被视为等级一的参数。

最近发布的关于 Fortran 与 C 的进一步互操作性的技术规范 (TS29113) 增加了假定等级的概念。根据您在可执行部分`fs_WriteData_d`（传递给 C 几乎是您可以做的所有事情）中所做的事情，可能适合 - 类型/种类/等级匹配的规则已经扩展，因此假定等级实际或虚拟参数是兼容的等级的。相当重要的问题是编译器支持——我认为目前没有任何编译器支持这个 TS！

对于 F201X 之前的语言标准编码，有几种可能性：

*   为您想要支持的每个等级编写一系列瘦包装子例程，然后这些包装子例程调用一维形式的特定过程，依靠序列关联将多维数组映射到一维数组。

*   将子程序的主体放在一个单独的文件中，并将该文件包含在每个等级的子程序的骨架接口中。这种方法要求子程序主体内的代码在词法上是独立的。在某些情况下，代码也可以以独立于类型的方式编写，您可以使用一个通用的包含文件来处理您想要支持的各种类型。虽然这消除了与“复制和粘贴”代码的更改管理相关的问题，但处理 INCLUDE 文件可能有点痛苦。

两者的某种组合也可能是合适的。

（可能存在第三种选择，使用 C 互操作性将为每个等级和类型组合编写的接口主体的绑定名称设置为一个实现过程的绑定名称，但我不确定 C 的（ab）用法是否互操作性是合法的。）

如果您所追求的只是不同类型变体的通用命名，那么另一种可能性（再次取决于您在正文中所做的事情）是将数据参数作为 ISO_C_BINDING 内在模块中的 C_PTR 并推动采取的要求将实际参数的 C_LOC 返回到子例程的客户端代码中。

# visual-studio-2012 - 安装 VS 2012 后的 Sql 服务器问题 - SQL Server 代理给出 - 远程过程调用失败 (0x800706be)

> ID：14434294
> 
> 赞同：0
> 
> 时间：2013-01-21T07:43:12.147
> 
> 标签：visual-studio-2012, sql-server-2008-r2, installation

我最近安装了 VS 2012，安装后我无法在配置管理器下看到 SQL 服务 - 它给出错误消息 - 远程过程调用失败 (0x800706be)。我尝试在谷歌上搜索解决方案，但没有得到任何正确答案或解决此问题的方法。我的操作系统是 Win7 家庭高级版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:10:04.910

在安装 Visual Studio 2012 之前，您的计算机中是否有其他 SQL 数据库（如 SQL Server 2008 或更早版本）？

发生此问题的原因可能是您拥有 SQL Server 2012 Express 以及 SQL Server 2008 Express Edition 等旧版本。

要解决此问题，请尝试重新安装 Visual Studio 并且不要添加 SQL Express。

另一种解决方法是为旧 SQL 安装带有最新服务包的补丁。

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T04:58:22.247

在我的工作机器上安装 Microsoft Visual Studio 2012 设置后，我也遇到了这个错误。

由于是 WMI 错误，我重新编译了 MOF 文件 –> mofcomp.exe "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

我还取消注册并重新注册了 sql 提供程序 DLL –> regsvr32 "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmprovider.dll" 但问题未解决。

**解决方案**：

我已经在我的 SQL 2008 R2 实例上应用了 SQL Server 2008 R2 SP2，这解决了 Sql Server 配置管理器的问题。您可以从这里下载安装程序... [http://www.microsoft.com/en-us/download/details.aspx?id=30437](http://www.microsoft.com/en-us/download/details.aspx?id=30437)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T15:10:29.003

如果你想备份你的数据，你必须删除旧的 Sql Server 并重新安装 Sql Server，你可以从 C:/ Sql Server 目录备份，之后它会正常工作......

观看此视频如何在 Windows 7 中安装 Visual Studio 2012 和 Sql Server 2012

**Visual Studio 2012 安装** [http://www.youtube.com/watch?v=5LnyH-evqeY](http://www.youtube.com/watch?v=5LnyH-evqeY)

**Sql Server 2012 安装** [http://www.youtube.com/watch?v=WTVLo9kvK3w](http://www.youtube.com/watch?v=WTVLo9kvK3w)

# c# - CheckBox/RadioButton 所需的验证 JQuery MVC

> ID：14434298
> 
> 赞同：0
> 
> 时间：2013-01-21T07:43:54.770
> 
> 标签：c#, jquery, asp.net-mvc, radio-button

所以我有这个模型：

```
 public int ID { get; set; }
    [Required(ErrorMessage = "A Name is required")]
    public string Name { get; set; }
    public bool GreenCircle { get; set; }
    public bool BlueSquare { get; set; }
    public bool BlackDiamond { get; set; }
    public bool TerrainPark { get; set; } 
```

目前，我拥有的允许用户创建配置文件的视图为此处列出的布尔属性设置了复选框。

我正在寻找一种设置 JQuery Validation 的方法，该方法需要将这些 bool 属性中的一个且只有一个设置为 true，所以我想我应该使用 RadioButtons 但我不太确定如何将它们分组它们是在视图中设置的，或者我如何执行这种类型的验证。

有任何想法吗？我是来学习的，所以如果必须的话，请指出我正确的研究方向；先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:03:30.073

使用枚举。例如：

```
public enum MyEnum
{
    GreenCircle,
    BlueSquare,
    BlackDiamond,
    TerrainPark
} 
```

然后在您的模型中使用它而不是四个不同的布尔属性。

```
public class MyModel
{
    public MyEnum MyOption { get; set; }
} 
```

然后在您的视图中生成单选按钮。

```
@using (Html.BeginForm())
{
    @Html.RadioButtonFor(m => m.MyOption, (int)MyEnum.BlackDiamond);
    <span>Black Diamond</span><br />
    @Html.RadioButtonFor(m => m.MyOption, (int)MyEnum.BlueSquare, 
        new { @checked = "true" });
    <span>Blue Square</span><br />
    @Html.RadioButtonFor(m => m.MyOption, (int)MyEnum.GreenCircle);
    <span>Green Circle</span><br />
    @Html.RadioButtonFor(m => m.MyOption, (int)MyEnum.TerrainPark);
    <span>Terrain Park</span><br />
} 
```

**备注**：也许您可以实现一个 HTML 助手来为您生成单选按钮标记。

# ios - 触摸时如何向右滑动标签？

> ID：14434301
> 
> 赞同：1
> 
> 时间：2013-01-21T07:44:01.007
> 
> 标签：ios, ios5, ios6, slider, uilabel

在我的应用程序中，我创建了一个 UiLabel。我必须根据触摸手势将标签向右移动，例如滑出菜单。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:49:50.883

您可以使用 UITapGestureRecognizer ：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];

[label addGestureRecognizer:singleTap]; 
```

然后在你的方法中使用 UIViewAnimation ：

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {

     CGRect frame = label.frame;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

     frame.origin.x += 100; // slide right
    label.frame = frame;

    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:51:06.210

假设 UILabel 出口名称是 testing 。

```
// set up geture as follows in view did load
UISwipeGestureRecognizer* swipeGesture = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(labelDidSwiped:)];
[swipeGesture setDirection: UISwipeGestureRecognizerDirectionLeft];
[testing addGestureRecognizer:swipeGesture];

swipeGesture = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(labelDidSwiped:)];
[swipeGesture setDirection:UISwipeGestureRecognizerDirectionRight];

[testing addGestureRecognizer:swipeGesture];

-(void)labelDidSwiped:(UISwipeGestureRecognizer*)gesture
{
switch (gesture.direction) {
    case UISwipeGestureRecognizerDirectionLeft:
        // you can change the frame of label in here depending on your requirement
        DLog(@"left swipe");
        break;
    case UISwipeGestureRecognizerDirectionRight:
// you can change the frame of label in here depending on your requirement
        break;
    default:
        break;
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:52:58.863

使用 CGPointMake 函数补给仓位

```
label.position = CGPointMake (newX, newY);
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
animation.duration = <duration>;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
animation.fromValue = CGPointMake (oldX, oldY);
animation.toValue = CGPointMake (newX, newY);
[label addAnimation:animation forKey:@"position"]; 
```

# javascript - 如何在按键事件上运行函数

> ID：14434303
> 
> 赞同：1
> 
> 时间：2013-01-21T07:44:05.363
> 
> 标签：javascript, jquery, wordpress

> **可能重复：**
> [jQuery keypress() 事件未触发？](https://stackoverflow.com/questions/492865/jquery-keypress-event-not-firing)

我使用 wordpress 作为我的 cms

我也在开发一个投票系统

这是我用于投票功能的 jquery

如何在按键事件上运行此功能？

例如，如果有人按“A”键，此功能会自动运行

我google了至少半小时，但没有找到任何相关结果

```
 <script type="text/javascript">
/* <![CDATA[ */ 
(function($) {
 function setCookie(name,value,days) {
 if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
}
else var expires = "";
document.cookie = name+"="+value+expires+"; path=/";
}

function getCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');
for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
}
return null;
 }

 $(document).ready(function(){
 $("body").on('click', '.vote-btn:not(.disabled)', function () { 
 var el = $(this),
    nonce = $("input#voting_nonce", el.parent()).val(),
    id = el.attr('id').replace(/vote-/, ''); // get the Post ID

 el.html('<span id="loader"></span>');
 var data = {
    action: 'add_votes_options',
    nonce: nonce,
    postid: id,
    ip: '<?php echo $_SERVER['REMOTE_ADDR']; ?>'            
};
 $.post('<?php echo admin_url('admin-ajax.php'); ?>', data,
function(response){
 console.log( response );

     if(response!="-1") {

el.html('<img src="<?php get_bloginfo('url'); ?>/wp- content/themes/9GAG/happysimily.png">').unbind('click').addClass('clickedyellow');
 $('.vote-btn', el.closest('div')).addClass('disabled');
 $("#vote", el.closest('article')).addClass('clickedlove'); 

        if(response=="null") {
            alert("A vote has already been registered to this IP address.");

        } else {
            $("#votecounter", el.closest('article')).html(response); 

        }
        var cookie = getCookie("better_votes");
        if(!cookie) {
            var newcookie = id;
        } else {
            var newcookie = cookie + "," + id;
        }
        setCookie("better_votes", newcookie, 0);
    } else {
        alert("There was a problem registering your vote. Please try again later or enable browser cookies.");
    }

 });

 return false;
});

 })
 })(jQuery);

 /* ]]> */
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:50:15.570

需要为 keypress（或 keyup、keydown 等）添加事件监听器

```
$(document).keypress(function(e) {
 if (e.keyCode == 65) {              // "A" key
  //code.... 
 }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:53:52.487

您可以通过不同的方式捕获按键，简单的一种是使用 Jquery 默认的一种，

[。按键（）](http://api.jquery.com/keypress/)

因此，您需要将您的功能块附加到功能名称。这应该在您的文档就绪函数中，因为您的投票函数不是全局的并且仅在就绪上下文中。

```
(function($) { 

   var yourVotingFn = function(){
          .........//your code logic
    }

   $(body).keypress(function(event) {
     if ( event.which == 13 ) {//Enter key
       yourVotingFn();
     }
   });

}); 
```

# bing - 必应搜索 API 无法获得阿拉伯语的任何结果

> ID：14434310
> 
> 赞同：0
> 
> 时间：2013-01-21T07:44:54.243
> 
> 标签：bing

字符串查询=“123”；

```
 // Create a Bing container.
        string rootUrl = "https://api.datamarket.azure.com/Bing/Search";
        var bingContainer = new Bing.BingSearchContainer(new Uri(rootUrl));

        // The market to use.
        string market = "ar-XA";

        // Get news for science and technology.
        string newsCat = "rt_ScienceAndTechnology"; 
```

bingContainer.Credentials = new NetworkCredential("...", "...");

// 构建查询，限制为 10 个结果。var newsQuery = bingContainer.News(query, null, market, null, null, null, null, newsCat, null); newsQuery = newsQuery.AddQueryOption("$top", 10);

```
 //Run the query and display the results.
        var newsResults = newsQuery.Execute();

        foreach (var result in newsResults)
        {
            Console.WriteLine("{0}-{1}\n\t{2}",
             result.Source, result.Title, result.Description);
        } 
```

为什么这对日本等其他语言可以工作，只对阿拉伯语不工作！必应搜索API没有在阿拉伯语做任何测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:05:24.680

Bing 可以返回阿拉伯语的结果。您提供的特定查询词恰好不在阿拉伯语结果的 Bing 索引中。如果您在索引中搜索了诸如“清真寺”之类的术语，则会返回结果。请参阅下面的查询

[https://api.datamarket.azure.com/Bing/Search/v1/Web?Query=%27mosque%27&Market=%27ar-XA%27](https://api.datamarket.azure.com/Bing/Search/v1/Web?Query=%27mosque%27&Market=%27ar-XA%27)

兵足

# php - 拆分mysql表如何使用CakePHP 2.x

> ID：14434315
> 
> 赞同：-1
> 
> 时间：2013-01-21T07:45:18.730
> 
> 标签：php, cakephp

我有这个问题，一个表（表名是内容）在我的项目中有 600 万条记录。我想拆分这个表（内容）并在 cakephp 中使用，但我不知道该怎么做。

请帮我。

谢谢！

`CakePHP version : 2.x`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:25:18.277

你指的是[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)吗？这可能是一个更好的选择，无需大量额外工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:30:31.910

由于您使用的是 MySQL，因此您可以将表拆分为两个（或更多）并从中创建一个[MERGE 表。](http://dev.mysql.com/doc/refman/5.5/en/merge-storage-engine.html)然后您可以访问合并，就好像您只有一个大表一样。您的程序无需更改。

这是一个如何从[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/merge-storage-engine.html)创建合并表的示例：

```
mysql> CREATE TABLE t1 (
    ->    a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ->    message CHAR(20)) ENGINE=MyISAM;
mysql> CREATE TABLE t2 (
    ->    a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ->    message CHAR(20)) ENGINE=MyISAM;
mysql> INSERT INTO t1 (message) VALUES ('Testing'),('table'),('t1');
mysql> INSERT INTO t2 (message) VALUES ('Testing'),('table'),('t2');
mysql> CREATE TABLE total (
    ->    a INT NOT NULL AUTO_INCREMENT,
    ->    message CHAR(20), INDEX(a))
    ->    ENGINE=MERGE UNION=(t1,t2) INSERT_METHOD=LAST; 
```

使用合并表的最佳方式取决于您的情况。如果您必须拆分大表，因为它已经太大了，您将创建具有相同结构的其他表（`create mySmallTable1 like myBigTable`），然后将部分数据移动到每个表（`insert into mySmallTable1 select * from myBigTable where ...`）中。显然这需要一些时间，因为 MySQL 必须将记录从一个文件复制到另一个文件。然后删除大表并将其重新创建为小表的合并。

如果大表没问题，但您不想在其中插入新记录，您会做不同的事情：创建一个与大表具有相同结构的新表。定义新表和大表的合并，以便新插入进入新表（`INSERT_METHOD`选项）

# java - javap 以可编程的方式

> ID：14434320
> 
> 赞同：5
> 
> 时间：2013-01-21T07:45:53.093
> 
> 标签：java, api, javap

我们可以以可编程的方式在我们自己的 java 代码中使用 javap 吗？

例如，下面的代码：

```
public class TestClass {
    public static void main(String[] args) {
        System.out.println("hello world");
    }
} 
```

在命令行中使用 javap，我们得到：

```
// Header + consts 1..22 snipped
const #22 = String      #23;    //  hello world
const #23 = Asciz       hello world;

public static void main(java.lang.String[]);
  Signature: ([Ljava/lang/String;)V
  Code:
   Stack=2, Locals=1, Args_size=1
   0:   getstatic       #16; //Field java/lang/System.out:Ljava/io/PrintStream;
   3:   ldc     #22; //String hello world
   5:   invokevirtual   #24; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   8:   return
  // Debug info snipped
} 
```

我可以使用 javap 的 API 只打印常量池吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T03:58:39.953

javap 内部没有 API，但您可以在 package 中查找 javap 的源代码`com.sun.tools.javap`。入口类是`com.sun.tools.javap.Main`. 所以另一种运行 javap 的方法是`java -cp $JAVA_HOME/lib/tools.jar com.sun.tools.javap.Main YourTestClass`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T04:17:17.067

[Apache BCEL](http://commons.apache.org/bcel/)提供了对.class 文件解析的封装，提供了一套API。几乎对于 .class 文件中的每个元素，BECL API 中都有一个对应的 Class 来表示它。所以在某种程度上，如果你只想打印出类文件的某些部分，这并不是那么简单。这是一个简单的例子，你可以参考，注意[`org.apache.bcel.classfile.ClassParser`](http://commons.apache.org/bcel/apidocs/org/apache/bcel/classfile/ClassParser.html)：

```
 ClassParser cp = new ClassParser("TestClass.class");
    JavaClass jc = cp.parse();
    ConstantPool constantPool = jc.getConstantPool(); // Get the constant pool here.
    for (Constant c : constantPool.getConstantPool()) {
        System.out.println(c); // Do what you need to do with all the constants.
    } 
```

# java - FindBugs - 使用 ObjectOutputStream 时“可能无法关闭流”

> ID：14434323
> 
> 赞同：8
> 
> 时间：2013-01-21T07:46:12.397
> 
> 标签：java, stream, findbugs, software-quality

我有这段代码，就是将 Ojbect 写入字节数组流：

```
 static byte[] toBytes(MyTokens tokens) throws IOException {
        ByteArrayOutputStream out = null;
        ObjectOutput s = null;
        try {
            out = new ByteArrayOutputStream();
            try {
                s = new ObjectOutputStream(out);
                s.writeObject(tokens);
            } finally {
                try {
                    s.close();
                } catch (Exception e) {
                    throw new CSBRuntimeException(e);
                }             
            }
        } catch (Exception e) {
            throw new CSBRuntimeException(e);
        } finally {
            IOUtils.closeQuietly(out);
        }
        return out.toByteArray();
    } 
```

然而，FindBugs 一直在抱怨这一行：

```
s = new ObjectOutputStream(out); 
```

“可能无法关闭流” - BAD_PRACTICE - OS_OPEN_STREAM。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T07:58:00.183

我认为 FindBugs 并不理解 IOUtils.closeQuietly(out) 关闭了。

无论如何，关闭 ObjectOutputStream 就足够了，它将关闭底层的 ByteArrayOutputStream。这是 ObjectOutputStream.close 实现

```
public void close() throws IOException {
    flush();
    clear();
    bout.close();
} 
```

所以你可以简化你的代码

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();
    ObjectOutputStream s = new ObjectOutputStream(out);
    try {
        s.writeObject(1);
    } finally {
        IOUtils.closeQuietly(s);
    } 
```

或者如果您使用的是 Java 7

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();
    try (ObjectOutputStream s = new ObjectOutputStream(out)) {
        s.writeObject(1);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:54:03.133

这意味着`s.close()`它将尝试关闭底层流，但它可能无法做到这一点。所以要确保你也应该自己关闭它。尝试添加`out.close()`并查看警告是否消失。

# c# - 此程序集由比当前加载的运行时更新的运行时构建，无法在实体框架中加载

> ID：14434324
> 
> 赞同：1
> 
> 时间：2013-01-21T07:46:20.130
> 
> 标签：c#, asp.net, entity-framework

我是实体框架的新手。我已经安装了带有 sp 1 的 .net framework 3.5。我正在使用 vs 2008。

但是，我收到以下错误：

> 错误 1 ​​无法加载文件或程序集“EntityFramework”或其依赖项之一。
> 此程序集由比当前加载的运行时更新的运行时构建，无法加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:49:04.113

可能您使用的是 EF4.x 或 EF 5.x。第一个版本的目标`.Net 4.0`和第二个目标`.Net 4.5`。如果您需要使用`.Net 3.5`，您应该使用早期版本的 EF 库。

# c# - 带有 CustomMessageBox 的 NullReferenceException

> ID：14434325
> 
> 赞同：1
> 
> 时间：2013-01-21T07:46:25.920
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone, nullreferenceexception

我对 WP Toolkit 中的 CustomMessageBox 有疑问。目前，我有代码可以在每两次单击按钮时启动应用评分提示。

```
Dispatcher.BeginInvoke(() =>
{
    if (rtcount == 2 && (AppSettings.ShowAgainSetting == true))
    {
        CheckBox checkBox = new CheckBox()
        {
            Content = "Do not ask me again",
            Margin = new Thickness(0, 14, 0, -2)
        };

        TiltEffect.SetIsTiltEnabled(checkBox, true);

        CustomMessageBox messageBox = new CustomMessageBox()
        {
            Caption = "Would you like to rate and review this application?",
            Message =
                "Thank you for using my app."
                + Environment.NewLine + Environment.NewLine
                + "If you've been enjoying the app we'd love if you could leave us a rating in the Store. Would you mind spending a couple of seconds to rate (and/or) review this application?",
            Content = checkBox,
            LeftButtonContent = "ok",
            RightButtonContent = "not now",
        };

        messageBox.Dismissed += (s1, e1) =>
        {
            switch (e1.Result)
            {
                case CustomMessageBoxResult.LeftButton:
                    if ((bool)checkBox.IsChecked)
                    {
                        MarketplaceReviewTask marketplaceReviewTask = new MarketplaceReviewTask();
                        marketplaceReviewTask.Show();
                        AppSettings.ShowAgainSetting = false;
                    }
                    else
                    {
                        MarketplaceReviewTask marketplaceReviewTask = new MarketplaceReviewTask();
                        marketplaceReviewTask.Show();
                    }
                    break;
                case CustomMessageBoxResult.RightButton:
                    if ((bool)checkBox.IsChecked)
                    {
                        AppSettings.ShowAgainSetting = false;
                    }
                    else
                    {
                    }
                    break;
                case CustomMessageBoxResult.None:
                    if ((bool)checkBox.IsChecked)
                    {
                        AppSettings.ShowAgainSetting = false;
                    }
                    else
                    {
                    }
                    break;
                default:
                    break;
            }
        };

        messageBox.Show();
        rtcount = 0;
    }
});

rtcount++; 
```

All options seem to work fine except those that actually launch the MarketplaceReviewTask. The task launches correctly, but on resuming the app I'm hitting a NullReferenceException:

> {System.NullReferenceException: NullReferenceException at Microsoft.Phone.Controls.CustomMessageBox.ClosePopup(Boolean restoreOriginalValues) at Microsoft.Phone.Controls.CustomMessageBox.<>c_*DisplayClass4.b*_1(Object s, EventArgs e) at Microsoft.Phone.Controls.Transition.OnCompleted(Object sender, EventArgs e) at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args) at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)}

我怎样才能解决这个问题？更改为 Coding4Fun Toolkit 中的 MessagePrompt 是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:11:07.530

我无法弄清楚这一点，推出更新对我来说非常重要，所以我继续前进，并且“被骗”了一点。我已经“处理”了异常：

```
if (e.ExceptionObject.Message.ToString() == "NullReferenceException")
        {
            e.Handled = true;
            return;
        } 
```

下`Application_UnhandledException`。

如果有人对此有更好的解决方法，我很想听听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:57:17.433

我认为问题可能出在您的`Dismissed`处理程序中。我不确定如何`CustomMessageBox`实现，但该`checkBox`属性可能为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T17:28:05.210

遇到了同样的问题。CustomMessageBox.cs 中有一个错误。当它为空时，他们调用了弹出窗口。

```
private void ClosePopup(bool restoreOriginalValues)
{
    _popup.IsOpen = false; 
```

它已在最新版本中修复[http://phone.codeplex.com](http://phone.codeplex.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T21:40:39.000

我在驳回事件上使用了一个布尔值来定义按下了哪个按钮。然后我实现了我将在 Unloaded 事件中的被解雇事件中实现的代码。这似乎解决了这个问题。

IE

```
 messageBox.Dismissed += (s1, e1) =>
        {
            switch (e1.Result)
            {
                case CustomMessageBoxResult.LeftButton:
                    {
                        delete = true ;
                    }
                    break;
                case CustomMessageBoxResult.RightButton:
                    break;
                case CustomMessageBoxResult.None:
                    break;
                default:
                    break;
            }
        };

        messageBox.Unloaded += (s1, e1) =>
        {
            if (delete)
                DeleteWorkout();
        }; 
```

# iphone - 如何在 iPhone 中使用彩信进行音频？

> ID：14434330
> 
> 赞同：2
> 
> 时间：2013-01-21T07:46:53.890
> 
> 标签：iphone, ios, objective-c, mms

我确实`MMS`在 iPhone 上进行了搜索，但我没有找到太多关于此的信息，大部分发现都与图像有关。我想使用 in 发送音频。`MMS`是否可以这样做？我有以下关于.`iPhone``ios sdk``MMS`

如何识别使用`MMS`中的所有音频文件？`iPhone``iOS SDK`

如何在使用中播放`MMS`文件？`iPhone``iOS SDK`

有人可以帮我识别这些东西吗！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:06:51.767

`MMS`如在多媒体消息服务中，iOS 中的开发人员无法使用。只有 messages.app 可以发送`MMS`，您不能从 messages.app 访问任何数据，也不能发送`MMS`.

iOS SDK 提供[消息 UI 框架](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MessageUI_Framework_Reference/_index.html)，允许您发送电子邮件和文本消息。但短信仅限于`SMS`。

* * *

更新：iOS 7 现在支持附件。

```
 - (void)sendAudioFile:(NSURL)audioFilePath {
    if ([MFMessageComposeViewController canSendAttachments] &&
        [MFMessageComposeViewController canSendText] &&
        [MFMessageComposeViewController isSupportedAttachmentUTI:@"com.apple.coreaudio-​format"]) //.caf files
    { 
        NSLog(@"can send");

        MFMessageComposeViewController *message = [[MFMessageComposeViewController alloc] init];
        [message addAttachmentURL:audioFilePath withAlternateFilename:nil]; //.caf file
        message.messageComposeDelegate = self;
        [self presentViewController:message animated:YES completion:nil];
    }
    else {
        NSLog(@"cannot send");
    }
} 
```

# binding - WP 7.1 Listpicker：选择的值显示对象名称而不是属性

> ID：14434331
> 
> 赞同：1
> 
> 时间：2013-01-21T07:46:57.697
> 
> 标签：binding, windows-phone-7.1, listpicker

我的 ListPicker for WP 7.1 出现问题，我选择的值不显示绑定，而是显示我作为 ItemSource 的模型的对象名称。但是，当我转到 FullModeItemTemplate 时，我的绑定工作得很好。我检查了我的输出并且没有任何绑定错误..

这是我的代码。

```
public class TurnoverModel
{
    public string TurnoverId { get; set; }
    public string TurnoverDesc { get; set; }
} 
```

我的模型作为集合传入 ItemSource

```
 <toolkit:ListPicker ItemsSource="{Binding TurnoverList}" Width="350" HorizontalAlignment="Left" Name="turnOverListPicker" SelectionMode="Multiple"}" Header="Turnover" SelectionChanged="OnTurnoverChanged">
            <toolkit:ListPicker.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding TurnoverDesc}"/>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.ItemTemplate>
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding TurnoverDesc}" Width="150"/>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
        </toolkit:ListPicker> 
```

如果有人有任何想法为什么我的绑定不起作用，我将不胜感激所有答案，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:58:14.853

```
 <toolkit:ListPicker ItemsSource="{Binding TurnoverList}" Width="350" HorizontalAlignment="Left" Name="turnOverListPicker" SelectionMode="Multiple"}" Header="Turnover" SelectionChanged="OnTurnoverChanged"> 
<toolkit:ListPicker.FullModeItemTemplate>
 <DataTemplate> 
<StackPanel Orientation="Horizontal"> 
<TextBlock Text="{Binding TurnoverDesc}" Width="150"/>
 </StackPanel>
 </DataTemplate>
 </toolkit:ListPicker.FullModeItemTemplate>
 </toolkit:ListPicker> 
```

在 selectionchanged 事件上写：

```
 private void OnTurnoverChanged(object sender, SelectionChangedEventArgs e)
    {
     TurnoverModel selecteditem = e.AddedItems[0] as TurnoverModel;
     String turnoverId =selecteditem.TurnoverId;
     String turnoverDesc =selecteditem.TurnoverDesc; 
    }
======================================================================== 
```

# google-drive-api - 如何获取公开共享文件/文件夹的链接

> ID：14434339
> 
> 赞同：5
> 
> 时间：2013-01-21T07:47:45.953
> 
> 标签：google-drive-api

[我们可以使用https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)共享文件/文件夹。但响应（[https://developers.google.com/drive/v2/reference/permissions#resource](https://developers.google.com/drive/v2/reference/permissions#resource)）将不包含共享文件/文件夹的链接。

共享文件/文件夹后，您可以使用[https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)获取共享文件/文件夹的链接。所以我们需要再发送一个请求来获取链接。如果我们在第一个请求本身中获得链接，这将很有用。

我刚刚使用了 Google Drive Web 界面并获得了共享文件/文件夹的链接模式，如下所示：

```
For files: https://docs.google.com/file/d/{file-id}/edit

For folders: https://docs.google.com/folder/d/{folder-id}/edit 
```

现在工作正常。

获取共享文件/文件夹是否正确？将来会坏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:46:28.063

`alternateLink`方法中的文件[资源](https://developers.google.com/drive/v2/reference/files#resource)应该包含`drive.files.*`在 Google Drive 中查看文件的链接。这将是一致的，并且是查找正确 URL 的最佳方式。

话虽如此，您设计的那些 URL 可能不会更改，但最好是安全的。

# java - 需要在不按回车的情况下进行按键操作

> ID：14434340
> 
> 赞同：1
> 
> 时间：2013-01-21T07:47:45.730
> 
> 标签：java, awt, keypress

我正在使用 NetBeans 制作程序。是否可以在不按回车的情况下制作按键方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:51:31.380

[Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#keyPress%28int%29)类有一些方法可以让这变得相当简单：

```
Robot r = new Robot();
r.keyPress(KeyEvent.VK_ENTER); 
```

应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:52:00.480

如果我正确理解了您的问题，您需要模拟按键事件。如果是这种情况，您需要使用 Robot 类。有关更多信息，请参见此处[机器人类](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)

# linux - 如何在 gpg 中使用私钥加密文件

> ID：14434343
> 
> 赞同：10
> 
> 时间：2013-01-21T07:47:57.283
> 
> 标签：linux, encryption, public-key-encryption, private-key, gnupg

我正在为某些系统制作更新，并且我想加密更新以保持我的签名的机密性、完整性和有效性。我想用我的私钥加密文件并将它们发送给我的客户，以便他们可以用我的公钥解密它。但是 GPG 的工作方式是使用公共加密和私人解密。我不想发送我的私钥，以便我可以更改它并将公钥发送给其他任何人。知道怎么做吗？？？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T07:56:04.857

您的意思不是“加密”，而是 gpg 术语中的“签名”。

*签名*基本上是用你的私钥加密并用公钥解密。

利用

```
 gpg --sign myfile.ext 
```

或者使用您的电子邮件客户端的签名功能。

签名显然将允许任何有权访问您的“公共”密钥的人读取您的文件的内容（并且由于“公共”密钥通常是，嗯......，*public*，这将允许*每个人*解密内容）。

如果您正在寻找一种只有收件人才能解码内容的方法，那么您需要以只有收件人才能访问解密令牌的方式对数据进行加密。显然收件人需要有这样的令牌（即：你用他们的公钥编码**，**所以他们可以用他们的**私钥**解码）

**更新**

简单来说：如果你想保证*完整性*（即：接收者肯定知道，数据来自*你*而不是其他人），你需要对数据进行**签名**。如果要保证*机密性*（即：只有您的收件人可以读取数据），则需要对数据进行**加密**。

签名和*加密*实际上是一回事*。*唯一的区别是，谁可以访问密钥。

 *使用*签名*，您可以使用您的私钥加密数据，并且可以使用您的公钥对其进行解密（并且由于每个人都可以访问公钥，因此每个人都可以解密它，因此每个人都可以验证数据是否已由*你*）

使用*encrypting*，您使用收件人的公钥加密数据，他们使用他们的私钥解密数据（所以只有他们可以读取它；但是每个人都可以向他们发送加密数据，他们不能保证它真的来自发件人，但保证只有他们可以阅读）。

如果您需要机密性和完整性，则需要同时进行签名和加密，并且要使其正常工作，您和您的收件人都需要拥有（不同的）公钥/私钥对。

**结论**

由于签名和加密是同一件事，只要您完全控制所涉及密钥的可用性，您就可以使用两者来保证数据的有效性和完整性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T10:45:17.577

GnuPG 要求您发布您的*私钥*来加密文档是不正确的。你*永远不*应该向任何人公开你的私钥。

GnuPG 支持两种不同的加密方法，*非*对称加密和*对称*加密。

*非对称*加密需要知道收件人的*公钥*。这通常不是问题，因为顾名思义，这些密钥不是秘密，而是每个人都知道的。为了再次解密它，只能使用只有您的收件人知道的*私钥。*使用 GnuPG 的非对称加密是通过该`--encrypt`选项完成的。

如果您不知道收件人的*公钥*，那么您可以使用双方*共享相同密钥的**对称*加密。当然，这需要一个用于传输共享秘密的安全通道。对于对称加密，请使用该选项。这里既不需要公钥也不需要私钥，但是共享密钥的安全交换使得对称加密容易受到攻击。*`--symmetric`*

 *如果您只需要*完整性*和*问责制*（如果不检测文档就无法修改文档，并且您能够验证是谁创建/签署了它），那么您可以使用该选项使用您的*私钥*`--sign`创建签名。每个有权访问您的*公钥*的人都可以检查此签名以验证完整性和问责制。但请注意，*每个人都*可以阅读您的原始邮件内容，因为此签名*未加密*。生成的 .gpg 文件看起来像二进制数据，但仅包含*压缩*但未*加密*的文本。您还可以通过指定禁用压缩******`--compress-level 0`您将看到输出文件包含您的纯文本原始消息。*因此，如果您想保密*，请不要使用此选项。******

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-20T21:00:26.313

我正在研究一个类似的问题：从中央源分发软件更新，以应用于该领域的许多最终用户。最终用户需要验证更新是否来自官方来源（使用私钥签名），但我也希望更新以保密方式传播（加密）。

在大约 30 年前我在大学上的密码学课程中，他们教导说用一个人的私钥加密与签署一条消息是一样的——当接收者使用公钥解密时，他们没有得到胡言乱语的事实证实了使用要加密的私钥。如果公钥保持“接近背心”，这也提供了一种保密措施，这将是我的首选实施方式。

正如其他人所提到的，我已经确认 gpg --sign 操作不会加密消息，消息在签名文件中以明文形式可见。为了使用 gpg 通过私钥签名实现一定的真实性和合理的保密措施，除了更新分发器的公钥之外，我决定为基于字段的接收者提供自己的密钥对的解决方案. 这不是一个非常安全的解决方案，任何人都可以在现场对设备进行逆向工程并获得它将持有的“秘密”密钥，他们可以解密签名的更新消息并查看其明文内容。他们不能做的是创建一个带有分发者密钥签名的文件，

这是暴露程度的问题。传输中的更新对于任何无权访问端点设备进行逆向工程的人都是安全的。通过对端点的物理访问（我们无法阻止），他们最终将能够对已安装的软件，甚至更新本身进行逆向工程，但他们将永远无法签署自己的更新并将其推送到未受影响的机器上. 至少只要 RSA 是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-11T02:15:50.960

*简单的答案：忘记keys*的想法。您只需要一个共享的秘密*密码*。所以和你的客户在一起。打电话给他们。或者，如果您偏执，请面对面进行。同意您将共享的密码短语，并根据需要保密。根据我的经验，我建议一起使用 diceware 来选择共享密码。你们俩都保留了该共享机密的安全副本。如果您是偏执狂，请不要写下来——<em>记住它！现在，您可以使用该共享密钥作为密码来加密任何内容。任何对称加密工具都可以为您做到这一点，*包括 GPG*。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-21T07:53:33.887

您可能需要有一个单独的密钥对来实现该明确目的，并分发*私钥*，同时将公钥保密（是的，就条款而言，这是一种倒退）；然后您只需使用公钥正常加密更新，您的收件人可以使用私钥解密它们。****

# python - 是否可以在 Python 中获取所有引用给定对象的对象？

> ID：14434345
> 
> 赞同：1
> 
> 时间：2013-01-21T07:48:08.550
> 
> 标签：python

我有一个特定的对象`obj` 我想要的是让所有其他对象引用它。我知道我可以得到一个引用计数`sys.getrefcount(obj)`，但这在我的情况下没有多大用处 - 我需要实际的引用对象，尽管我不确定这在 Python 中是否可行......

此外，获取创建对象的代码行对我来说也没有多大用处——我知道对象是在哪里创建的——我只是不知道现在是谁在引用它。

PS我需要这个来调试泄漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:51:05.983

看一下`gc`模块。这是你能得到的最接近的。

一个好的网站是，例如，[这个](http://www.doughellmann.com/PyMOTW/gc/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:07:37.903

这只是一个想法：如果您知道对象是在哪里创建的，我可以想象您知道可以引用您的对象的潜在变量和类。因此，您可以使用该[`id`](http://docs.python.org/2/library/functions.html#id)功能来检查谁在引用什么。

我希望它有帮助

# iphone - 如何从 UIImageView 获取图像？

> ID：14434347
> 
> 赞同：-1
> 
> 时间：2013-01-21T07:48:26.427
> 
> 标签：iphone, ios6, uiimageview, uiimage, xcode4.5

我是 iOS 应用程序开发的新手。我需要有关 UIImageView 的帮助。我需要将图像发送到用户将绘制的服务器。在我的应用程序中，我使用 UIImageView 用户可以在其上绘制和填充颜色等，就像一个痛苦的应用程序。现在我需要将该草图发送到服务器，因为用户将单击更新按钮。为了通过网络服务发送数据，我认为我必须将其作为二进制字符串发送。每件事对我来说都很好而且很清楚。问题是如何从 UIImageView 获取图像而不将其保存到核心数据或 sq-lite，因为我不想永久保存该图像。

是否可以在不使用核心数据或 sq-lite 的情况下从 UIImageView 获取 UIImage？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:53:55.713

如果你需要获取 `UIImage`然后`UIImageView`试试这个。

`UIImageView *imageView = ... //here is your UIImageView.`

`UIImage *image = imageView.image; //Here is you UIImage`

如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:54:27.277

我没有完全理解你的问题。

从获取图像`UIImageView`

```
UIImage *image = imageView.image; 
```

# android - 使用 Looper.prepare 显示对话窗口

> ID：14434351
> 
> 赞同：0
> 
> 时间：2013-01-21T07:48:51.397
> 
> 标签：android, android-alertdialog, progressdialog, looper

我想在执行工作后显示一个对话框窗口，并且应该显示进度对话框，直到工作完成。所以我尝试在以下代码中使用线程。

```
ProgressDialog dialog=new ProgressDialog(SampActivity.this);
                     dialog.setMessage("Please wait..");
                     dialog.setProgress(100);
                     dialog.setMax(5000);
                     dialog.show();
                     Thread progressing = new Thread() 
                       {
                         @Override
                         public void run()
                           {
                                try
                                        {
                                           Thread.sleep(5000);
                                           Looper.prepare();
                                         AlertDialog.Builder 

alertDialogBuilder = new AlertDialog.Builder(SampActivity.this);
                                     alertDialogBuilder.setMessage("finished");
                                     AlertDialog alertDialog = alertDialogBuilder.create();
                                     alertDialog.show();

                                     }
               catch (Exception e) 
               {
                   e.printStackTrace();
                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(SampActivity.this);
                 alertDialogBuilder.setMessage("Unable to stop SAP.The connection is down.Please retry after sometime.");
                 AlertDialog alertDialog = alertDialogBuilder.create();
                 alertDialog.show();
               }

                       finally
                       {
                           dialog.dismiss();
                       }

                          runOnUiThread(new Runnable(){

                                                @Override
                                                public void run() {
                                                    if(dialog.isShowing())
                                                        dialog.dismiss();
                                                }
                                            });
                       }
                   };       
                 progressing.setPriority(Thread.MAX_PRIORITY );
                 progressing.start(); 
```

运行此程序后，程序挂起。我不知道代码有什么问题。请帮我弄清楚。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:51:42.010

您无法从非 ui 线程更新 ui...您可以或使用`runOnUiThread`来执行更新 ui 的部分：

```
runOnUiThread(new Runnable() {
public void run() {
    //display dialog
}
}); 
```

或者更好地使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)..

```
private class MyTask extends AsyncTask<URL, Integer, Long> {

   private Context context;

   public MyTask(Context context) {
     this.context = context;
   }

   protected void onPreExecute() {
      progressDialog = ProgressDialog.show(context, "", "msg", true); 
   }

  protected Long doInBackground(URL... urls) {
       //do something
  }

 protected void onPostExecute(Long result) {
     progressDialog.dismiss();  
 }
} 
```

# twitter-bootstrap - Twitter 引导向导在 onnext 期间跳过步骤

> ID：14434355
> 
> 赞同：5
> 
> 时间：2013-01-21T07:49:05.950
> 
> 标签：twitter-bootstrap, twitter-bootstrap-wizard

这是 twitter bootstrap [http://vadimg.com/twitter-bootstrap-wizard/的具体问题](http://vadimg.com/twitter-bootstrap-wizard/)

我正在尝试确定是否有人能够在处理 onNext 事件时跳过步骤。我想根据先前步骤中选择的输入跳过步骤。我已经看到你可以这样做：

```
$('#rootwizard .finish').click(function() {
    alert('Finished!, Starting over!');
    $('#rootwizard').find("a[href*='tab1']").trigger('click');
}); 
```

我不能使用它，因为我已经禁用了选项卡，如果我在 onNext 事件期间使用它，如果我启用了选项卡，因为它继续执行来自 onNext 事件调用者的代码，这将无济于事。

谢谢丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-05T10:45:56.110

只是你可以使用

```
_myWizard.bootstrapWizard('show', 6);// zero-bazed index 
```

并且`_myWizard`是从`bootstrapWizard initialisation`

```
var _myWizard=$('#AddMemberWizard').bootstrapWizard({
    'tabClass': 'form-wizard',
    'onNext': function (tab, navigation, index) {
            .....
         }
}); 
```

希望这对你有帮助

# sql-server - 中间文件 MS Server 2012 Exp 的条件连接

> ID：14434361
> 
> 赞同：1
> 
> 时间：2013-01-21T07:49:38.190
> 
> 标签：sql-server, sql-server-2012-express

我的数据库有 3 个表： [Groups] - 有关特定组的信息，

```
CREATE TABLE [dbo].[Groups](
  [Prime_ID] [nvarchar](20) NULL,
  [Name] [nvarchar](100) NULL,   -- there are a number of other fields as well
) ON [PRIMARY] 
```

[User_Groups] - 不是一个好名字，因为这是每个用户所属的组列表。该组可能按 Prime_ID 或别名列出

```
CREATE TABLE [dbo].[User_Groups](
  [uPrime_ID] [nvarchar](20) NULL,   -- the User's Prime_ID
  [gPrime_ID] [nvarchar](20) NULL,   -- the Group Prime_ID
  [gAlias] [nvarchar](100) NULL,     -- the Group alias
) ON [PRIMARY] 
```

[Convert] - 这是一个中间文件，用于从 Alias 转换为 Prime_ID

```
CREATE TABLE [dbo].[Convert](
  [Alias] [nvarchar](100) NOT NULL,
  [Prime_ID] [nvarchar](20) NOT NULL,
 CONSTRAINT [PK_Convert] PRIMARY KEY CLUSTERED 
) ON [PRIMARY] 
```

问题是 User_Groups 文件将填充 gPrime_ID 或 gAlias 字段。有时它可能已经填满了。

Alias 字段是指 Prime_ID。即别名“GeorgeOfTheJungle”可能指向 Prime_ID“BQ47823”

当 [User_Groups] 的一行包含 gPrime_ID 时，可以直接链接到 [Groups]，但是当它有 gAlias 时，必须先链接到 [Convert] 表获取 Prime_ID，然后再链接到 [Groups] 表获取组名、访问级别等

我已经尝试过“加入三个或更多表” [http://msdn.microsoft.com/en-us/library/aa213227%28v=sql.80%29.aspx（MSDN](http://msdn.microsoft.com/en-us/library/aa213227%28v=sql.80%29.aspx)方法）中列出的方法，以及来自“SQL Server 中的条件连接” [http://weblogs.sqlteam.com/jeffs/archive/2007/04/03/Conditional-Joins.aspx](http://weblogs.sqlteam.com/jeffs/archive/2007/04/03/Conditional-Joins.aspx)（杰夫的存档方法）没有成功。MSDN 方法确实允许我通过 [Convert] 表正确链接到 [Groups] 或直接链接到 [Groups]，但不能同时链接到两者。另一种方法只是让我失望并开车离开。

MSDN 方法：

```
SELECT g.name, g.Prime_ID, t.gPrime_ID, t.gAlias

FROM Groups g 
  INNER JOIN [Convert] cv
    ON g.Prime_ID = cv.Prime_ID 
  JOIN User_Groups t
    ON t.gAlias = cv.Alias -- JOIN User_Groups t
--   on t.gPrime_ID = g.Prime_ID
go 
```

杰夫的存档方法：

```
SELECT
  g.name, g.Prime_ID, t.gPrime_ID, t.gAlias, coalesce(g.Prime_ID, cv.Alias) AS gp
FROM
  [Groups] g
LEFT OUTER JOIN
  [User_Groups] t  ON t.gPrime_ID = g.Prime_ID
LEFT OUTER JOIN 
  [Convert] cv
  ON g.Prime_ID = cv.Prime_ID 
  JOIN User_Groups ON t.gAlias = cv.Alias
go 
```

我正在使用 MS Server 2012 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:22:18.753

此查询应尝试直接链接`Groups`或`User_Groups`通过中间表链接：

```
select  *
from    Groups g
left join
        Convert c
on      c.Prime_ID = g.Prime_ID
left join
        User_Groups ug
on      ug.gPrime_ID = g.Prime_ID
        or ug.gAlias = g.gAlias 
```

# user-interface - 如何运行 sparQL 查询？

> ID：14434362
> 
> 赞同：8
> 
> 时间：2013-01-21T07:49:44.633
> 
> 标签：user-interface, cross-platform, rdf, sparql, dbpedia

我在 Mozilla Festival 12 上发现了 SparQL 语法。

演示者使用的是专有的基于 Web 的界面，我想知道是否有开放服务或**（跨平台）GUI 应用程序**？为了 ：

1.  写下你的查询；
2.  执行查询；
3.  探索结果。

某种 SparQL IDE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T08:18:40.707

这是我发现的：

### 跨平台（Linux/Windows/Mac？）

*   [闪烁](http://www.ldodds.com/projects/twinkle/)(Java)
*   [sparql-aderis](http://code.google.com/p/sparql-aderis/) (Java)：
    *   提供[CLI接口](http://code.google.com/p/sparql-aderis/wiki/Getting_Started#Command-line_execution)；
    *   最后一次构建 2010。

### 仅限 Windows

*   [SparqlGUI](https://github.com/dotnetrdf/dotnetrdf/releases)（需要 .NET；作为 dotNetRDF 工具安装程序的一部分安装）；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-07T15:18:37.003

五年后，另一个 GUI 客户端是[YASGUI](http://about.yasgui.org)。

还有一个非常精细的客户端，带有用于查询编写和结果/数据探索的文本和 GUI 界面，称为[Gruff](https://franz.com/agraph/gruff/)，但我不知道它是否仅适用于同一公司的三重存储 (AllegroGraph)，或者它是否也可以连接到通用 SPARQL 端点.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T13:06:25.943

几个链接，你选择。

*   TopBraid Composer 免费版是 W3C 的语义 Web 标准 RDF Schema、OWL Web Ontology Language 和 SPARQL Query Language 的专业开发环境。
*   Twinkle 是一个简单的 GUI 界面，它封装了 ARQ SPARQL 查询引擎。该工具对于想要学习 SPARQL 查询语言的人以及从事语义 Web 开发的人都应该很有用。
*   Corese 是一个语义 Web 工厂，为 RDF 实现 W3C RDF、RDFS、SPARQL 1.1 查询和更新、SPARQL 规则。它还带有一个 GUI
*   Semantic Web Import 是一个插件，允许 Gephi 平台使用 Sparql 查询可视化语义 RDF 图
*   Sgvizler 是一个 javascript，它将 SPARQL SELECT 查询的结果呈现到图表或 html 元素中。

当然，一些 RDF 数据存储提供了 Sparql 端点，例如[dbpedia](http://dbpedia.org/sparql)及其[法语版本](http://fr.dbpedia.org/sparql)。您可以直接在网页上访问它们，也可以通过编程方式访问它们

玩得开心 ！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T10:09:46.513

如果您乐于使用基于 Web 的 GUI，一个有趣的跨平台解决方案是[Flint SPARQL 编辑器](http://openup.tso.co.uk/blog/flint-sparql-editor)，它来自英国政府实验室，并在后台使用流行的 CodeMirror Javascript 库

他们的原始版本仅支持 SPARQL 1.0，我不确定他们是否曾将其更新到 SPARQL 1.1，我知道这是可能的，因为我们已经完成了我们公司构建的产品。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T20:16:51.490

在线 UI 是[http://dbpedia.org/snorql/](http://dbpedia.org/snorql/)和[http://dbpedia.org/sparql/](http://dbpedia.org/sparql/)，它们都接受 SparQL 查询。我注意到[http://querybuilder.dbpedia.org/](http://querybuilder.dbpedia.org/)它的用途是探索。

# c# - 将 postscript 转换为 jpeg

> ID：14434364
> 
> 赞同：2
> 
> 时间：2013-01-21T07:49:44.650
> 
> 标签：c#, jpeg, ghostscript, postscript

我有已包装到我的 c# 应用程序中的 ghostscript dll (gsdll32.dll)。我尝试了各种将 postscript 转换为 jpeg 的方法，但它没有发生。代码如下：

```
 PDFPrinter.WGhostScript gs = new PDFPrinter.WGhostScript();
            gs.AddParam("-sDEVICE=jpeg");
            gs.AddParam("-dJPEGQ=100");
            gs.AddParam("-dNOPAUSE");
            gs.AddParam("-dBATCH");
            gs.AddParam("-dSAFER");
            gs.AddParam("-r300");
            string outfile = txtOutFolderLoc.Text + txtFileName.Text + ".jpg";
            gs.AddParam(@"-sOutputFile=" + outfile);
            gs.AddParam(psFilePath);
            gs.Execute();
            Application.Exit(); 
```

可能是什么原因？

1.  我手头有字符串“psFilePath”中的后记位置。
2.  “outfile”表示输出的位置和文件名。

[我使用了相同的东西并将后记转换为 PDF 和 PNG，如下所示]。

到 PDF 工作

```
 gs.AddParam("-dBATCH");
            gs.AddParam("-dNOPAUSE");
            gs.AddParam("-sDEVICE=pdfwrite");
            gs.AddParam("-sPAPERSIZE=a4");
            gs.AddParam("-sProcessColorModel=DeviceGray");
            gs.AddParam("-sPDFPassword=password");
            string outfile = txtOutFolderLoc.Text + txtFileName.Text + ".pdf";
            gs.AddParam(@"-sOutputFile=" + outfile);
            gs.AddParam(psFilePath);
            gs.Execute();
            Application.Exit(); 
```

到PNG代码：

```
 gs.AddParam("-dSAFER");
            gs.AddParam("-dBATCH");
            gs.AddParam("-dNOPAUSE");
            gs.AddParam("-sDEVICE=png16m");
            gs.AddParam("-dGraphicsAlphaBits=4");
            gs.AddParam(@"-sOutputFile=" + txtOutFolderLoc.Text + txtFileName.Text + "%i.png");
            gs.AddParam(psFilePath);
            gs.Execute();
            Application.Exit(); 
```

**编辑 I** 正在生成后记，应用程序继续运行直到它退出。但是没有找到 jpeg 文件。

postscript 由与 ghostscript 一起提供的 postscript 打印机生成。一旦生成了这个后记，控制就会转移到转换这个 PS 的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:44:18.437

我设法使用以下参数获得输出：

```
 PDFPrinter.WGhostScript gs = new PDFPrinter.WGhostScript();
            gs.AddParam("-q");
            gs.AddParam("-dNOPAUSE");
            gs.AddParam("-dBATCH");
            gs.AddParam("-sDEVICE=jpeg");
            gs.AddParam(@"-sOutputFile=<full oytput file path>%i.jpg");
            gs.AddParam(<psFilePath>); 
```

我必须添加“-q”才能完成它。

' *-q 防止 Ghostscript 将消息写入与预期输出流混合的标准输出。*'

# java - 如何在 EJB 项目中创建会话？

> ID：14434369
> 
> 赞同：2
> 
> 时间：2013-01-21T07:50:13.233
> 
> 标签：java, jakarta-ee, ejb

我正在开发一个电子商务应用程序。为此，我想为每个客户创建一个会话来维护他们的购物车信息。

如果它是一个普通的 Java EE 项目，我会使用`HttpSession session = request.getSession();`并将所有购物车信息添加到该会话中。

我的问题是针对 EJB 项目，为上述目的创建会话的过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:31:32.160

EJB 只不过是在相同/不同位置独立运行的业务逻辑

它不知道是谁在调用逻辑。在这种情况下，会话一词将不适合此处。

您可以以不同的方式调用它，如使用有状态会话 bean**维护 EJB 会话 bean的状态**

它只不过是一个带有实例变量的会话 bean。收到实例后，您可以在 bean 中分配属性的值

这通常用于在线购物，其中必须跟踪和维护交易

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:18:09.943

远程 EJB 与 HTTP/Servlet 的不同之处在于容器不会将某种映射与您不断发送的标识相关联，而是基于客户端与之保持会话的有状态 bean。

如果您使用有状态会话 bean (SFSB) 作为服务器的边缘，那么 bean 就是您的会话。从这个 bean 中，您可以引用例如 Map 或任何数量的其他可以保持会话状态的 bean。

使用 CDI 请求范围，您可以将请求范围 bean 注入调用链中的任意其他 bean。这就像 http 请求一样工作。没有像这样工作的会话范围，但是从您的外观 bean 中，您可以将提到的 Map 放入请求范围的 bean 中。注入此 bean 或使用生产者方法，您将有效地拥有一个等效的 http 会话映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:57:00.997

如果使用“EJB 项目”您的意思是应用程序的入口是通过远程客户端使用 RMI 联系的 EJB bean，那么答案是使用有状态会话 bean 进行入口调用。

客户端需要从服务器请求这个特定的 bean（这通常通过远程 JNDI 查找发生），然后简单地保持引用。每次对这个完全相同的引用进行调用时，您都会在服务器端访问同一个 bean 实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T08:23:41.777

Servlet Session : Servlet 中的一个会话，由 Servlet Container 通过 HttpSession 对象维护，通过 request 对象获取。您不能真正实例化一个新的 HttpSession 对象，它不包含任何业务逻辑，但更多的是存储对象的地方。

EJB 会话：使用 SessionBeans 维护 EJB 中的会话。您设计的 bean 可以包含业务逻辑，并且可以被客户端使用。您有两种不同的会话 bean：有状态和无状态。第一个以某种方式与单个客户端连接。它维护该客户端的状态，只能由该客户端使用，当客户端“死亡”时，会话 bean 将“丢失”。

何时使用 SessionBean

[http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipmt](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipmt)

如何创建会话Bean

[http://www.roseindia.net/jboss/sessionbeanservlet.shtml](http://www.roseindia.net/jboss/sessionbeanservlet.shtml)

# ruby - 与机械化安装混淆

> ID：14434372
> 
> 赞同：1
> 
> 时间：2013-01-21T07:50:17.253
> 
> 标签：ruby, mechanize

我想安装 Mechanize，但看起来有两个 gem。我应该同时安装“mechanize-downloader”和“mechanize”，还是只需要“mechanize”？

```
gem install mechanize-downloader 
gem install mechanize 
```

或者：

```
gem install mechanize 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:28:22.433

[Mechanize](http://rubygems.org/gems/mechanize)是主要的 gem，用于自动化与网站的交互（包括下载文件）。

[mechanize-downloader](http://rubygems.org/gems/mechanize-downloader)是一个用于下载带有进度条的文件的 gem。它扩展了 Mechanize 以在下载文件时提供进度条。

运行`gem install mechanize-downloader`也会安装 Mechanize，因为它是一个依赖项。机械化是一个标准，如果您遇到问题，很容易获得帮助。

查看“[使用 WWW:Mechanize 将文件下载到磁盘而不先将其全部加载到内存中](https://stackoverflow.com/a/9105153/429758)”，了解如何使用 Mechanize 下载文件的示例。

有关使用 Mechanize 的更一般性介绍，请查看“ [#191 Mechanize](http://railscasts.com/episodes/191-mechanize) ” 。

“[机械化示例](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html)”是另一个有用的资源。

# c# - 内连接多个表

> ID：14434387
> 
> 赞同：2
> 
> 时间：2013-01-21T07:51:21.837
> 
> 标签：c#, winforms, crystal-reports

```
CrystalReportAct crt = new CrystalReportAct();
sqlcon.Open();

sql = "SELECT EmpLog.Date, JobCategory.JobDesc, 
        Client.CompDesc, Product.ProdName, EmpLog.Actions, EmpLog.Remarks 
        FROM Client 
        INNER JOIN EmpLog ON Client.CompCode = EmpLog.CompCode 
        INNER JOIN JobCategory ON EmpLog.JobCode = JobCategory.JobCode 
        INNER JOIN Product ON EmpLog.ProdCode = Product.ProdCode 
        WHERE (EmpLog.EmpID = '"+empID+"')";

SqlDataAdapter adp = new SqlDataAdapter(sql, sqlcon);
DataSet ds = new DataSet();
adp.Fill(ds, "Client");
adp.Fill(ds, "Emplog");
adp.Fill(ds, "JobCategory");
adp.Fill(ds, "Product");

crt.SetDataSource(ds);
crystalReportViewer1.ReportSource = crt; 
```

这运行但输出错误。输出几乎是 80 行，而不仅仅是 3 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:20:25.977

在 crt.SetDataSource(ds) 语句中还要指定表名，否则它会占用总行数。

# installation - 安装软件时出错“找不到 microsoft visual foxpro 支持库 windows xp”

> ID：14434388
> 
> 赞同：0
> 
> 时间：2013-01-21T07:51:22.523
> 
> 标签：installation, windows-installer, foxpro, visual-foxpro

当我尝试在我的 Windows XP 机器上安装软件时，它正在寻找 Microsoft Visual foxpro 支持库，我收到此错误：

> 找不到 microsoft visual foxpro 支持库。

谷歌搜索并得到了一些没有帮助的建议。

尝试将`msvcr70.dll`, `vfp7r.dll`,`vfp8renu.dll`放入安装文件夹。

任何建议都会有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:00:05.177

我相信这个错误通常是由编译的应用程序具有错误版本的运行时（DLL）引起的。下面的链接显示了哪些运行时 (DLL) 需要与已编译的应用程序版本一起分发。

您提到了 VFP7 和 VFP8。您需要知道编译应用程序的 VFP 版本，并将正确的运行时复制到此应用程序文件夹。或者至少尝试一组运行时，然后再尝试另一组，看看哪个有效。

[http://fox.wikis.com/wc.dll?Wiki~VFP9RuntimeFiles](http://fox.wikis.com/wc.dll?Wiki~VFP9RuntimeFiles) http://fox.wikis.com/wc.dll?Wiki~VFP8RuntimeFiles [http://fox.wikis.com/wc.dll?Wiki~ VFP7运行时文件](http://fox.wikis.com/wc.dll?Wiki~VFP7RuntimeFiles)

# mysql - MySQL 查询我所有（已接受）朋友的列表

> ID：14434392
> 
> 赞同：1
> 
> 时间：2013-01-21T07:51:35.923
> 
> 标签：mysql, sql

我有一个这样的 MySQL 表：

```
| USER | FRIEND |
-----------------
|    1 |      2 |
|    2 |      1 |
|    1 |     16 |
|   16 |      1 |
|    1 |      4 | 
```

我需要编写一个 MySQL 查询来列出 的所有（接受的）朋友`user 1`，在这种情况下，它应该返回`2`and `16`，但不是`4`，因为不接受这种友谊。

有没有 1-query 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:02:27.323

请试试这个：

```
select * from table1 a
join table1 b
on a.user = b.friend
and b.user = a.friend
; 
```

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/b0def/12)

```
| USER | FRIEND |
-----------------
|    2 |      1 |
|    1 |      2 |
|   16 |      1 |
|    1 |     16 | 
```

您可以通过更改查询并提供所需的确切用户来简化获取朋友或用户的过程：

```
select A.FRIEND from table1 a
join table1 b
on a.user = b.friend
and b.user = a.friend
WHERE A.USER = 1
;

| FRIEND |
----------
|      2 |
|     16 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:59:37.740

> 我需要编写一个 MySQL 查询来列出用户 1 的所有（已接受）朋友

假设一个*接受的油炸食品*是一个朋友，在表中有两个条目，一个从用户到朋友，另一个从朋友到用户（正如您在问题中使用示例数据解释的那样），那么您可以这样做：

```
SELECT ID
FROM
(
      SELECT user AS ID FROM friends WHERE friend = 1
      UNION ALL 
      SELECT friend     FROM friends WHERE user = 1
) t 
GROUP BY ID
HAVING COUNT(ID) > 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2b95f/1)

这会给你：

```
| ID |
------
|  2 |
| 16 | 
```

# iphone - 如何比较 Iphone sdk 中的两个图像？

> ID：14434394
> 
> 赞同：0
> 
> 时间：2013-01-21T07:51:45.067
> 
> 标签：iphone, ios, image, comparison

我有两个图像，我想检查两个图像是否相似，如果是，那么百分比相似度有多少，我听说 opencv 是一个很棒的图像处理库，但我仍然找不到。

# regex - 正则表达式。从 For 循环块中删除代码语句

> ID：14434395
> 
> 赞同：0
> 
> 时间：2013-01-21T07:51:51.880
> 
> 标签：regex, notepad++, replace

从 for 循环块中删除代码语句...

```
 for( UIComponent currentMenuItemComponent : menuBarComponent.getChildren() ) {
     String style = "";
     String selectedViewName = ( String )currentMenuItemComponent.getAttributes().get( ATTRIBUTE_View );
     logger.info( "Value of selectedViewName =" + selectedViewName );
     if( selectedViewName.equals( targetView ) ) {
        style = "selected";
        logger.info( "Value of style =" + style );
     } 
```

我想`logger.info`从 for 循环块中删除语句。这可能吗 ？

我已经用过这个表达

```
(if|else)(.*)(\r?\n)([\s-]*)(logger.info)(\( \")(.*)(\" \);) 
```

从 Notepad++ 中的 if 语句中删除它们。我正在寻找一种从**for**块中移除的方法

**更新：**如果可能使用 python 脚本，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:39:08.837

这是你不能用正则表达式做的事情，至少不能用 Notepad++ 的正则表达式引擎。

考虑以下：

```
for (...)
{
   foo();
   logger.info(baz)
   if (bar())
   {
       logger.info(spam)
   }
   logger.info(ham)
} 
```

您需要递归地跟踪`{...}`程序当前所在的大括号的嵌套级别，以确定是否有任何`logger.info()`属于正确的块。而且大多数正则表达式引擎无法处理递归。

即使您使用的是可以（如 .NET），它仍然是一场噩梦。想象一下：

```
 for (...)
    {
       foo();
       logger.info(baz)
//       if (bar())
//       {
       if (badabing()) {
           logger.info(spam)
       }
       logger.info(ham)
    } 
```

*现在* 尝试跟踪嵌套...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T00:21:19.407

这与您在此处找到的另一个问题非常相似`System.out.println`：[Remove System.out statements from For Loops blocks only](https://stackoverflow.com/questions/14508605/remove-system-out-statements-from-for-loops-blocks-only)。

参考[我的回答](https://stackoverflow.com/a/14556782/1395668)，唯一的区别是 PMD 查询不同。这是新的：

```
//ForStatement/Statement/descendant-or-self::
       Statement[./StatementExpression/PrimaryExpression/PrimaryPrefix/Name[@Image="logger.info"]] 
```

在我的答案中替换`<![CDATA[ ... ]]>`元素中的其他查询。`custom.xml`所有其他步骤都相同。

# php - 在 codeigniter 的会话数组中回显/打印变量

> ID：14434401
> 
> 赞同：2
> 
> 时间：2013-01-21T07:52:20.800
> 
> 标签：php, mysql, codeigniter

我正在尝试编写一个代码，我使用这行特定的代码将我的帖子值存储在会话数组中

```
$this->session->set_userdata('newdata', $newdata); 
```

问题是，我似乎无法回显其中的值。

这就是我回应它们的方式：

```
<?php echo $this->session->userdata('suffix'); ?> 
```

还有另一种方式来回显会话吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T08:02:27.417

用这个

```
$session_data = $this->session->all_userdata();

echo '<pre>';
print_r($session_data); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T07:55:43.357

如果你这样设置数据：

```
$this->session->set_userdata('newdata', $newdata); 
```

您将需要像这样访问它：

```
$this->session->userdata('newdata'); 
```

所以你可以这样做：

```
// dump all content
var_dump($this->session->userdata('newdata'));

// or access array indexes like so.
$post_array = $this->session->userdata('newdata');
echo $post_array['index']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:55:30.087

它将是一个数组，因此您无法使用`echo`. 用于`print_r()`显示数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T11:40:04.783

假设您正在从名为“用户名”的文本框中获取数据，那么您可以通过以下方式打印会话变量数据：

```
$uname=$this->input->post('username'); //uname is the variable storing the user input.

$this->session->set_userdata('uname',$uname); //setting session variable assigning name as "uname".

echo $this->session->userdata('uname'); // echoing session data 
```

# java - 从某些方法调用模拟时出现奇怪的模拟 InvalidUseOfMatchersException

> ID：14434402
> 
> 赞同：1
> 
> 时间：2013-01-21T07:52:27.887
> 
> 标签：java, mockito

```
import org.mockito.Mockito;

public class Scratch2 {
public static class Foo {
}

public interface Custom {
    public void someMethod(String arg1, String arg2, String arg3,
            String arg4);
}

public static class SomeClass {

    private final Custom custom;

    public SomeClass(Custom c) {
        this.custom = c;
    }

    public boolean run(Foo someFoo) {
        custom.someMethod("Dummy", "Dummy", "Dummy", "Dummy");
        return false;
    }
}

public static void callSomeMethod(Custom custom) {
    custom.someMethod("Dummy", "Dummy", "Dummy", "Dummy");
}

public static void main(String[] args) {
    Custom mock = Mockito.mock(Custom.class);
    SomeClass c = new SomeClass(mock);
    callSomeMethod(Mockito.mock(Custom.class));
    c.run(Mockito.any(Foo.class));

}
} 
```

如果我们模拟自定义接口并直接在其上调用 someMethod 是没有问题的。但是使用 run() 会出现以下错误：

==========

线程“主”org.mockito.exceptions.misusing.InvalidUseOfMatchersException 中的异常：参数匹配器的使用无效！预期 4 个匹配器，1 个记录：-> 在 com.knewton.scratch.Scratch2.main(Scratch2.java:37)

如果匹配器与原始值组合，则可能发生此异常： //incorrect: someMethod(anyObject(), "raw String"); 使用匹配器时，所有参数都必须由匹配器提供。例如： //正确：someMethod(anyObject(), eq("String by matcher"));

有关更多信息，请参阅 Matchers 类的 javadoc。

在 com.knewton.scratch.Scratch2$SomeClass.run(Scratch2.java:24) 在 com.knewton.scratch.Scratch2.main(Scratch2.java:37)

===========

这是在模拟 1.9.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:11:33.133

Your use of the matcher in this case is not correct. What happens is that mockito will record this matcher to use in a future call to a mocked method, which in your case happens here:

```
public boolean run(Foo someFoo) {
    custom.someMethod("Dummy", "Dummy", "Dummy", "Dummy"); // <- call on mock
    return false;
} 
```

mockito counts your use of `Mockito.any(Foo.class)` for this method and now rightly complains that you only provided one matcher, but in fact, since the method requires 4 parameters, you need to pass 4 matchers.

Instead of passing a matcher to your `run()` method you should instead either pass a real instance (as you do in your own answer), or if that object is hard to instantiate and you don't need it anyway, you can replace it by a mock:

```
public static void main(String[] args) {
    Custom mock = Mockito.mock(Custom.class);
    SomeClass c = new SomeClass(mock);
    c.run(Mockito.mock(Foo.class));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:58:50.280

所以这就是我如何解决它并且它很奇怪。它绝对是一个错误。

```
 import org.mockito.Mockito;

    public class Scratch2 {
        public static class Foo {
        }

        public interface Custom {
            public void someMethod(String arg1, String arg2, String arg3,
                    String arg4);
        }

        public static class SomeClass {

            private final Custom custom;

            public SomeClass(Custom c) {
                this.custom = c;
            }

            public boolean run(Foo serviceDiscoveryConfig) {
                custom.someMethod("Dummy", "Dummy", "Dummy", "Dummy");
                return false;
            }
        }

        public static void main(String[] args) {
            Custom mock = Mockito.mock(Custom.class);
            SomeClass c = new SomeClass(mock);
            Foo foo = new Foo();// HAD TO MAKE A NEW OBJECT HERE!
            c.run(foo);
        }
    } 
```

# text - 每当按下按钮时，如何更改用户输入文本颜色？

> ID：14434404
> 
> 赞同：0
> 
> 时间：2013-01-21T07:52:40.103
> 
> 标签：text, input, colors, editor, textarea

每当按下按钮时，我想将新文本的颜色更改为与以前文本的颜色不同。例如，如果用户按下“红色”按钮，他输入的下一个文本将是红色的。然后，当他按下“蓝色”按钮时，他键入的下一个文本将是蓝色的，而红色文本保持不变......等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:21:00.920

不知道有没有可以这样设置的属性。但是您可以像下面的伪代码那样以编程方式来完成它：

1.  **声明一个名为NextColor**的全局/公共变量。
2.  在相应按钮**的单击事件中，您分别设置****NextColor**变量，
    例如：

    ```
    btnBlue_OnClick()  
    {  
        NextColor = blue;  
        //Do your work  
    } 
    ```

3.  现在在**OnTextChanged**事件（或根据您的需要更合适的事件）使用**NextColor**初始化 textBox 颜色。

# iphone - 如何在 iOS 的菜单控制器中禁用粘贴选项？

> ID：14434406
> 
> 赞同：0
> 
> 时间：2013-01-21T07:52:42.090
> 
> 标签：iphone, ios, ipad

当用户长按 UITextField 时，我必须禁用粘贴选项。我有这个代码，但它仍然没有隐藏粘贴选项。

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender {

    if ( [UIMenuController sharedMenuController] )
    {
        [UIMenuController sharedMenuController].menuVisible = NO;

    }
    return NO;  
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:22:30.840

正如评论中已经说过的那样..您需要“在 UITextField 的子类中包含完全相同的代码，然后使用该类的实例”

所以.. 创建新文件.. 比如说 TestPaste.. UITextField 的子类

![在此处输入图像描述](../Images/251f8922fd6a80a84c4031a938aef803.png)

将您的代码放入实现文件（TextPaste.m）

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender {

    if ( [UIMenuController sharedMenuController] )
    {
        [UIMenuController sharedMenuController].menuVisible = NO;

    }
    return NO;  
} 
```

现在。转到您的笔尖/故事板，单击您的 UITextFiled 并将 textview 类更改为您的 TextPaste

![在此处输入图像描述](../Images/f5007e5c9fc671b4594d78b96eb03ccf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:32:27.110

Piya 只需检查以下链接：-

[http://eureka.ykyuen.info/2010/04/12/iphone-disable-the-cutcopypaste-menu-on-uitextfield/](http://eureka.ykyuen.info/2010/04/12/iphone-disable-the-cutcopypaste-menu-on-uitextfield/)

您还可以检查此代码：-

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:))
        return NO;
    return [super canPerformAction:action withSender:sender];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:48:10.750

您必须创建一个新的 Class-> UITextField 的子类 .. 然后在您的代码/xib 中将 textview 类更改为您的自定义类 .. 并在您的自定义 TextField 类中添加方法

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:))
        return NO;
    return [super canPerformAction:action withSender:sender];
} 
```

然后它将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:57:00.257

用这个

```
@implementation UITextFiels (DisableCopyPaste)

- (BOOL)canBecomeFirstResponder
{
    return NO;
}

@end 
```

# kineticjs - 形状（弧）笔划上的单击事件不起作用

> ID：14434407
> 
> 赞同：1
> 
> 时间：2013-01-21T07:52:49.743
> 
> 标签：kineticjs

使用 KineticJS，形状描边（在我的情况下为弧形）上的单击事件根本不会触发。

我的代码在那里 [http://jsfiddle.net/mPsfm/](http://jsfiddle.net/mPsfm/)

**js**

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 200,
    height: 200
});
var layer = new Kinetic.Layer();

var arc = new Kinetic.Shape({
        drawFunc: function(canvas) {

            var ctx = canvas.getContext();
            ctx.beginPath();
            ctx.lineWidth = 10;
            var startAngle = 0;
            var endAngle = 135 * Math.PI / 180;
            ctx.arc(50, 50, 40, startAngle, endAngle, false);
            ctx.stroke();
        }
});

arc.on('click', function() {
    alert("click detected");
 });

layer.add(arc);
stage.add(layer); 
```

我怎样才能使这项工作顺利进行？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:57:29.920

[http://jsfiddle.net/mPsfm/3/](http://jsfiddle.net/mPsfm/3/)

你错过了一小行：

```
 canvas.fillStroke(this); 
```

这使您的自定义形状功能：

```
 var arc = new Kinetic.Shape({
    drawFunc: function(canvas) {

        var ctx = canvas.getContext();
        ctx.beginPath();
        ctx.lineWidth = 10;
        var startAngle = 0;
        var endAngle = 135 * Math.PI / 180;
        ctx.arc(50, 50, 40, startAngle, endAngle, false);
        ctx.stroke();
        canvas.fillStroke(this);
    }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:26:09.693

感谢 EliteOctagon。

最终代码在这里！

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 200,
    height: 200
});
var layer = new Kinetic.Layer();

var arc = new Kinetic.Shape({
        drawFunc: function(canvas) {
            var ctx = canvas.getContext();
            ctx.beginPath();
            ctx.lineWidth = 10;
            var startAngle = 0;
            var endAngle = 135 * Math.PI / 180;
            ctx.arc(50, 50, 40, startAngle, endAngle, false);
            ctx.stroke();
            canvas.fillStroke(this);
        },
    drawHitFunc: function(canvas) {
            var ctx = canvas.getContext();
            ctx.beginPath();
            ctx.lineWidth = 10;
            var startAngle = 0;
            var endAngle = 135 * Math.PI / 180;
            ctx.arc(50, 50, 40+ctx.lineWidth, startAngle, endAngle, false);
            ctx.lineTo(50*Math.cos(endAngle)+40,50*Math.sin(endAngle)+40);
            ctx.lineTo(50*Math.cos(endAngle/2)+40,50*Math.sin(endAngle/2)+40);
            ctx.lineTo(50*Math.cos(startAngle)+40,50*Math.sin(startAngle)+40);
            ctx.stroke();
            canvas.fillStroke(this);
        }
});

arc.on('click', function() {
    alert("click detected");
});

layer.add(arc);
stage.add(layer); 
```

# android - Unity3d分数通过级别增加

> ID：14434412
> 
> 赞同：0
> 
> 时间：2013-01-21T07:53:10.340
> 
> 标签：android, unity3d

不知道如何为我的问题命名，但我想做的是让玩家进入下一个级别时，无论他们是死是赢，他们的得分都会添加到已经高分的顶部。到目前为止，我的 playerprefs 仅存储第一级的分数，但不添加其他所有级别的分数。我该怎么做呢？我需要制作两个单独的播放器偏好并将它们组合起来吗？如果是这样，我将如何组合它们？以下代码在每个级别中调用。预先感谢您的任何回复或帮助。

这是我的 playerprefs 代码：

```
 if(score > PlayerPrefs.GetInt("brickScore")){
           PlayerPrefs.SetInt("brickScore", score); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:16:10.440

> 到目前为止，我的 playerprefs 仅存储第一级的分数，但不添加其他所有级别的分数。

所以...嗯...据我所知，您想将以前级别的分数添加到当前分数吗？

```
if(score > PlayerPrefs.GetInt("brickScore")){
       PlayerPrefs.SetInt("brickScore", score + PlayerPrefs.GetInt("brickScore")); 
```

# android - 如何在android中使用twitter4j提供twitter帐户的用户名和密码

> ID：14434419
> 
> 赞同：1
> 
> 时间：2013-01-21T07:53:53.127
> 
> 标签：android, twitter, twitter4j

我正在使用 twitter4j 并在[https://dev.twitter.com/apps/new](https://dev.twitter.com/apps/new)上注册了 myapp并获得了消费者密钥和秘密。我正在使用以下代码

```
private static Twitter twitter;
    private static RequestToken requestToken;
ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
            Configuration configuration = builder.build();

            TwitterFactory factory = new TwitterFactory(configuration);
            twitter = factory.getInstance();

            try {
                requestToken = twitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
                this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(requestToken.getAuthenticationURL())));
            } 
```

这打开了一个页面，我在其中输入 twitter 帐户的用户名和密码，这成功了。但是我想以编程方式提供用户名和密码以避免打开该页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:35:01.580

OAuth 的目的是向应用程序授予（有限的）权限，而不将有关凭据（ID 和密码）的信息传递给应用程序。因此，您要执行的操作与 OAuth 冲突。要以编程方式将凭据传递到 Twitter 身份验证页面的输入字段，需要进行讨厌的 hack。Twitter4J 和其他 Twitter OAuth 库不支持这样的用例。

# ios - iCarousel 中的分页

> ID：14434424
> 
> 赞同：2
> 
> 时间：2013-01-21T07:54:15.357
> 
> 标签：ios, xcode, ipad, icarousel

我需要在*iCarousel*中实现分页。在编写以下代码之后，我已将iCarousel 与**iCarouselTypeLinear集成：**

```
UIView *bandImageView = [[UIView alloc] initWithFrame:CGRectMake(350, 300, 100, 20)];
bandImageView.backgroundColor = [UIColor redColor];
[self.view addSubview:bandImageView]; 
```

这段代码在 Carousel 下方创建了一个红色区域，我想在其中显示分页控件。

*在iCarousel*中实现分页的下一步是什么。

泽山简

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-13T06:08:32.400

试试这个......为我工作。

```
 carousel.decelerationRate = 0.0f; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:43:41.593

试试这个，看看它是否对你有帮助 [http://snipplr.com/view/60971/](http://snipplr.com/view/60971/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:50:32.763

首先将您的 caroselView 类型设置为线性。

```
[carouselView setType:iCarouselTypeLinear]; 
```

在 iCarosel.m 文件的第二个中，您可以在顶部看到代码。设置 MAX_VISIBLE_ITEMS 1，它将显示 1 个视图，然后您可以滚动它。我看起来像分页。

```
#ifdef ICAROUSEL_MACOS
#define MAX_VISIBLE_ITEMS 1
#else
#define MAX_VISIBLE_ITEMS 1
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-27T18:56:33.390

快速：
carouselView.isPagingEnabled = true

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T03:09:33.717

设置页面控件，然后设置轮播。一旦完成，iCarousel 可以实现一个名为 CarouselDidScroll 的函数。实现这个功能，然后在里面分配 pageControl.currentPage = carouselView.currentItemIndex

```
func carouselDidScroll(_ carousel: iCarousel) {
    pageControl.currentPage = carouselView.currentItemIndex
} 
```

# algorithm - 忽略亮度的图像比较算法

> ID：14434426
> 
> 赞同：11
> 
> 时间：2013-01-21T07:54:25.450
> 
> 标签：algorithm, colors, imaging

我正在寻找一种算法，可用于比较两个图像并确定两者之间是否存在显着差异。我所说的“显着”是指，如果你拍了两张房间的照片，其中一张的墙上明显有一只大蜘蛛，你就能检测到它。我对检测到的内容或什至在哪里并不真正感兴趣 - 只是有一些不同的东西。该算法需要忽略亮度。如果房间在白天变得更亮或更暗，算法应该忽略它。

即使您不知道算法，任何正确方向的提示都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T09:02:36.170

我会尝试对您的二维数据进行高通滤波。

根据[傅里叶](http://en.wikipedia.org/wiki/Fourier_analysis)，每个信号都可以通过分析信号中的频率来转换为“频率空间”。这也适用于二维信号，如图像。

通过“高通滤波器”，您可以删除所有低频部分，例如恒定偏移和慢梯度。如果应用于图像，它可以用作简单的“边缘检测”算法。查看示例可能会更容易理解：

![图像的高通滤波](../Images/2a436987e0c6d61f40881a73f108f396.png)

我从网络上的某个地方（左上角）拍了一张墙上蜘蛛的图像。然后我降低了这张图片的亮度（左下）。[对于这两个版本，我使用 GIMP (This plugin)](http://registry.gimp.org/node/7385)应用了高通滤波器。对于两个输入图像，输出看起来非常相似。

我的建议：首先应用高通滤波器，然后查看差异。

**可能的问题**

根据要求，这里有一些我可以想象的问题。

*   没有锐利边缘：如果您要检测的对象没有锐利边缘，您可能会使用 HF 通滤波将其滤除。但那可能是什么物体？它们必须是巨大的、平坦的（不产生阴影）和非结构化的。

*   只有颜色不同，而不是亮度：如果对象只是颜色不同，但亮度与背景相同，则灰度转换可能会出现问题。但如果遇到这个问题，只需分别分析 R、G、B 数据，那么至少有一个通道应该有助于检测物体——否则，无论如何你都看不到它。

**Edit** As reply to ???, if you also adjust the levels of the high-pass filtered image (which of course is all around 0.5*256) by just normalizing it to the range 0, 256 again you get

![调整后的水平](../Images/02c673fc81d0167de6c52732ea1cfa9f.png)

Which probably isn't worse than your result. But, HP-filters are simple and, when using FFT, very fast.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:58:23.283

如果相机是完全静止的，并且所有差异都是由于环境照明和/或相机曝光设置造成的，那么可以通过对 2 个图像进行归一化来忽略亮度（和对比度）。

从每个图像的所有像素中减去相应的图像平均值（平均像素值）并取差。这将照顾亮度。

如果您也想处理对比度，请计算每个图像的方差（在将均值设为 0 之后），并将像素值乘以使它们具有相同方差的因子。现在，差异对于对比度也是不变的（假设没有过度/不足曝光区域）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T09:10:50.227

A common approach with such a problem is to average the images taken by your camera over time, and detect any difference above a given threshold.

You need to keep an image in memory that will be the averaged image. Let's call it "avg".

Each time your camera takes a picture (called "pic"), you gonna :

*   Sum up absolute pixels value differences between "avg" and "pic".
    *   If above a threshold, something is moving in front of the camera.
    *   否则，修改“avg”，使其略微收敛到“pic”。例如，由您来找到合适的公式`avg = avg * 0.95 + pic * 0.05`。

在这里，您的参考图像会在一天中发生变化，以适应太阳和阴影的变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-20T00:01:15.130

如何从像素中删除亮度分量：

```
Red_ratio = Red / (Red + Blue + Green)
Blue_ratio = Blue / (Red + Blue + Green)
Green_ratio = Green / (Red + Blue + Green) 
```

# python - 从文件中读取 sys.maxint

> ID：14434429
> 
> 赞同：0
> 
> 时间：2013-01-21T07:54:31.440
> 
> 标签：python, file

我有一些 Python 程序可以从文件中读取某些值。

*文件示例：*

```
0
4
5
6 
```

解析每一行的代码如下：

```
 s = f2.readline()
    p = int(s) 
```

我正在尝试`sys.maxint`按如下方式传递文件：

```
0
sys.maxint
5
6 
```

这样做的一种方法是检查`if (s=='sys.maxint')`代码中的特殊情况。

我想知道是否有另一种*巧妙*的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T08:04:21.963

使用查找值的字典，例如

```
import sys

constants = {"sys.maxint" : sys.maxint, "meaning_of_life": 42}

with open("input.txt", "r") as f:
    for line in f2:
        s = line.rstrip("\n")
        try:
            p = int(s)
        except ValueError, ve:
            p = constants.get(s)
            if p is None:
                raise ve 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:35:04.033

我不确定为什么`if`不“整洁”。在我看来，这是显而易见的解决方案。如果你真的想在没有 的情况下这样做`if`，你可以这样做（使用不必要的字符串表示）：

```
#! /usr/bin/python2.7
import sys

for s in (s.strip () for s in open ('test', 'r') ):
    p = int (s.replace ('sys.maxint', str (sys.maxint) ) )
    print (p) 
```

我个人会保留`if`：

```
for s in (s.strip () for s in open ('test', 'r') ):
    p = sys.maxint if s == 'sys.maxint' else int (s)
    print (p) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:04:26.827

您可以使用 eval 函数。尽管它可以达到目的，但应谨慎使用。

```
 Python 2.7.1+ (r271:86832, Sep 27 2012, 21:16:52) 
    [GCC 4.5.2] on linux2
    Type "help", "copyright", "credits" or "license" for more information.
    >>> a = eval('0')
    >>> import sys
    >>> a = eval('sys.maxint')
    >>> a
    2147483647
    >>> 
```

# eclipse - 用于运行 BAT 文件的 Eclipse 项目？

> ID：14434430
> 
> 赞同：1
> 
> 时间：2013-01-21T07:54:39.420
> 
> 标签：eclipse, eclipse-cdt

是否有某种方法可以在没有任何源文件的 Eclipse 中创建项目，在构建时运行单个 BAT 文件（直接或通过 Makefile，都可以）？

目标是将具有构建后步骤（执行部署的 BAT 文件）的现有项目拆分为两个项目，一个用于构建，一个用于运行部署 BAT 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:45:01.197

看看通过`Run->External Tools` One type is创建外部工具启动配置`Program`，您可以使用它来运行 bat 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-18T10:17:15.437

我知道这是一个老问题，也许当时的答案是无关紧要的。当前在 Eclipse 中，如果您右键单击您的项目并转到：

> 属性->C/C++ 构建->设置

第二个选项卡是构建步骤。您可以添加构建前和构建后步骤。

我发现有时 Eclipse 内部 shell 有点糟糕。因此，如果您想在 Windows shell 中运行它，您可以在 cmd /c 前面添加插入符号 (^) 作为转义字符，例如 a_file_with_(escaped)_chars.bat

> cmd /c "a_file_with_^(转义^)_chars.bat"

# android - Android：带有垂直滚动文本的Textview

> ID：14434433
> 
> 赞同：21
> 
> 时间：2013-01-21T07:54:46.740
> 
> 标签：android, android-layout

我发现设置带有垂直滚动文本的文本视图很困难。在我的对话框中，我有一个带有大文本的文本视图，因为对话框是小窗口，我希望文本视图文本垂直滚动，以便对话框看起来不错。下面是我的xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF" >

    <ImageView
        android:id="@+id/fbcancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/fbcancel" />

    <EditText
        android:id="@+id/fbedittext"
        android:layout_width="230dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="33dp"
        android:background="@drawable/roundcorners"
        android:ems="10"
        android:gravity="center"
        android:hint="@string/fbhint"
        android:lines="6"
        android:paddingRight="5dp"
        android:scrollHorizontally="true" />
    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="80dp"
        android:layout_height="250dp"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/fbedittext" >

        <Spinner
            android:id="@+id/spinner"
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:layout_alignLeft="@+id/fbshare"
            android:layout_alignRight="@+id/fbshare"
            android:layout_below="@+id/fbshare"
            android:layout_marginTop="16dp"
            android:drawSelectorOnTop="true"
            android:entries="@array/fblist" 

            android:visibility="gone"/>

        <ImageView
            android:id="@+id/fbpeople"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/fbshare"
            android:layout_alignRight="@+id/fbshare"
            android:layout_below="@+id/fbshare"
            android:layout_marginTop="16dp"
            android:background="@drawable/people"
            android:drawSelectorOnTop="true" />

        <ImageView
            android:id="@+id/fbshare"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="65dp"
            android:src="@drawable/newfb" />
    </RelativeLayout>

<ScrollView android:id="@+id/textAreaScroller" 
    android:layout_width="fill_parent" 
        android:layout_height="173px" 
        android:layout_x="0px" 
        android:layout_y="25px" 

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/fbedittext"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/fbedittext"
        android:layout_marginTop="22dp"
        android:lines="7"
        android:scrollbars="vertical"
        android:text="@string/fbtext" />
</ScrollView> 
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/fbcancel"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:paddingRight="2dp"
        android:src="@drawable/askabud" />

</RelativeLayout> 
```

我尝试放置滚动视图，但文本视图的位置错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-21T08:09:57.390

**1\. 通过 XML**

```
<ScrollView android:id="@+id/textAreaScroller" 
    android:layout_width="fill_parent" 
    android:layout_height="173px" 
    android:layout_x="0px" 
    android:layout_y="25px" 
    android:scrollbars="vertical">
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/fbedittext"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/fbedittext"
    android:layout_marginTop="22dp"
    android:lines="7"        
    android:text="@string/fbtext" />
</ScrollView> 
```

* * *

**2.通过代码**

```
ScrollView scroller = new ScrollView(this);
TextView tv=(TextView)findViewById(R.id.textView1);
scroller.addView(tv); 
```

或者

**将以下属性放入您的** `<TextView>`

```
android:scrollbars = "vertical" 
```

**在代码中**

```
tv.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:58:30.357

尝试在 textview 中设置最大高度，它可能对您有用，如下所示

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="100dip" // change dip accordingly
        android:layout_alignLeft="@+id/fbedittext"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/fbedittext"
        android:layout_marginTop="22dp"
        android:lines="7"
        android:scrollbars="vertical"
        android:text="@string/fbtext" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T07:57:26.690

在你的 ScrollView 里面再给一个 RelativeLayout，在这个 RelativeLayout 里面放你的 TextView。

# java - HTTP 状态 500 - 在第 39 行处理 JSP 页面 /Query.jsp 时发生异常

> ID：14434434
> 
> 赞同：1
> 
> 时间：2013-01-21T07:54:56.237
> 
> 标签：java, jsp

当我尝试将这行代码放入我的 jsp 文件并运行它时出现错误。

```
<% DataCorrelationClient data= new DataCorrelationClient(); %> 
```

甚至是一个简单的`<% string ="abc"%>`

会给我一个错误。

我也有插入`<%@ page import="Webservice.DataCorrelationClient"%>`命令，以便我使用`httpcore-4.2.3`和`httpclient-4.2.3.jar`作为我项目的外部 jar 调用我的 web 服务。

我得到的错误是： -

```
HTTP Status 500 - An exception occurred processing JSP page /Query.jsp at line 39 
```

有人遇到过这个错误吗？帮助 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:58:00.377

由于 scriptlet 中的错误（未声明变量字符串），您的 *.jsp 无法编译。

看起来容器正在尝试按要求执行此操作。

编译错误被容器解释为运行时错误，容器拦截它并向您发送返回代码为 500 的页面（“内部服务器错误”）。

这是处理未处理异常的标准。

* * *

不要将我的回答标记为“已回答”，感谢@Subin。

他首先给了你完全正确的提示。

# jquery - 使用jquery将参数传递给自动完成

> ID：14434437
> 
> 赞同：0
> 
> 时间：2013-01-21T07:55:33.327
> 
> 标签：jquery, autocomplete

我读过这篇文章：[使用 Jquery UI 自动完成向源传递额外的参数](https://stackoverflow.com/questions/5939801/passing-extra-parameters-to-source-using-jquery-ui-autocomplete)
我正在用 Asp.net C# 开发一个网页。

我的 HTML 代码：

```
 <input class="tags" to_search="Birds" />
 <input class="tags" to_search="Animals" /> 
```

Javascript：

```
$(document).ready(function() {
     $(".tags").autocomplete({
          source: "GenericHandler.ashx?name="+$(this).attr("to_search")
    });
}); 
```

我想将标签的`to_search`属性传递给通用处理程序。 上面的代码正在调用，但给出了 null 值。 如何获得等于标签属性的值？ 请帮忙。`<input>`
`GenericHandler.ashx``name`
`name``to_search``<input>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:06:41.937

假设您`.tags`在运行时不添加任何内容，您可以这样做。

```
$('.tags').each(function(i, tag) {
    $(tag).autocomplete({
        source: 'GenericHandler.ashx?name='+ $(tag).attr('to_search')
    });
}); 
```

我还建议您像这样在输入标签中使用数据属性。

```
<input class="tags" data-search="Birds" /> 
```

得到最终解决方案，

```
$('.tags').each(function(i, tag) {
    $(tag).autocomplete({
        source: 'GenericHandler.ashx?name='+ $(tag).data('search')
    });
}); 
```

如果您确实将元素动态添加到文档中，则可以执行此操作。

```
// jquery object of the new element created
var element;

element.autocomplete({
    source: 'GenericHandler.ashx?name='+ element.data('search')
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-29T10:42:30.870

就这样通过

```
$('#txtCropname').autocomplete('Handler/CropSearch.ashx', { extraParams: {ids:'new'} }); 
```

# java - 如何使用辅助键连接建立 OneToOne 关系？

> ID：14434440
> 
> 赞同：3
> 
> 时间：2013-01-21T07:55:46.293
> 
> 标签：java, jpa, orm, playframework-2.0, ebean

我有两节课：

```
@Entity
@Table(name = "clients")
public class Client extends Model {

    @Id
    public int id;

    public String name;

    @OneToOne
    public Contact contact;
}

@Entity
@Table(name = "contacts")
public class Contact extends Model {

    @Id
    public int id;

    @OneToOne
    @Column(name = "client_name")
    public String clientName;
} 
```

现在我想设置 OneToOne 关系，但使用 client_name 列 ( `on clients.name=contacts.client_name`) 加入。怎么做？

我知道最好使用主键加入，但数据库结构是固定的，我无法更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:25:56.947

尝试：

```
@OneToOne
@Column(name = "client_name")
@JoinColumn(name = "client_name", referencedColumnName = "name")
public Client client; 
```

# javascript - “...不是函数”错误

> ID：14434441
> 
> 赞同：1
> 
> 时间：2013-01-21T07:55:49.770
> 
> 标签：javascript, jquery, coffeescript

我正在尝试在 CoffeeScript 中做一个非常基本的事情：

```
...
nextId = $('.optionsTemplate').prev().children().length + 1
# 'alert nextId' gives 4, which is correct
...
newOption = /*selector of new option*/
newOption.attr 'id', 'item_options_' + nextId
newOption.attr 'name', 'item[options]['+ nextId +']' 
```

因此，当我调用“nextId”时（设置 id 和名称时）-JS 控制台说“nextId 不是函数”

我尝试了几件事：

```
# get text instead of integer
nextId.text()

# make a function
getNextId = () ->
  $('.optionsTemplate').prev().children().length + 1 
```

得到同样的错误。

* * *

这是编译的输出：

```
$('.addOption').on('click', function() {
  var contents, newOption, nextId;
  nextId = $('.optionsTemplate').prev().children().length + 1;
  contents = "<div class='row'>" + $('.optionsTemplate').html() + '</div>';
  $(this).before(contents);
  newOption = $('.optionsTemplate').prev().children().eq(-1).find('.text_field');
  newOption.attr('id', 'item_options_' + nextId);
  return newOption.attr('name', 'item[options][' + nextId(+']'));
}); 
```

对我来说似乎还可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:04:02.253

```
return newOption.attr('name', 'item[options][' + nextId(+']'));
```

将上面更改为

```
return newOption.attr('name', 'item[options][' + nextId +']');
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:36:22.670

如前所述，问题存在于最后一行：

```
newOption.attr 'name', 'item[options]['+ nextId +']' 
```

问题是 CoffeeScript 将 nextId 视为一个函数。原因是 + 符号和 ']' 字符串之间没有空格。

添加空格如下：

```
newOption.attr 'name', 'item[options]['+ nextId + ']' 
```

使一切按预期工作。这只是使用 CoffeeScript 需要注意的事情之一——由于大量的空白，事情并不总是像您第一次预期的那样工作。

# java - 专业程序员使用哪种风格，使用 try 和 catch 还是在代码中添加错误处理？

> ID：14434448
> 
> 赞同：3
> 
> 时间：2013-01-21T07:56:05.843
> 
> 标签：java, error-handling, runtime-error

哪个应该优先于另一个？例子：

```
class Example {
    int[] A = new A[5];

    void setArray(int item, int index) {
        if(index < 0 || index >= 5) {
            System.out.println("Index out of bounds");
        } else {
            A[index] = item;
        }
    }
} 
```

还是这个？

```
class Example {
    int[] A = new A[5];

    void setArray(int item, int index) {
        try {
            A[index] = item;
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("Index out of bounds");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:12:25.340

当一种语言对异常有很好的支持时（如 C# 和 Java），抛出和捕获异常是处理异常情况的最常用方法。

原因是它使代码的逻辑更清晰：可以为一般情况编写方法（无需费心解决错误代码等），只有*实际上有*足够上下文来处理异常情况的少数方法也包含这样做的代码。

你的例子没有证明我在说什么，因为你已经在它发生的同一级别捕获了异常。在实践中，异常是有用的，因为它们被抛出了几个层次，其中一些甚至达到了程序的顶层附近，中止了随后将被该层次调用的所有方法。

当正确使用异常时，以下解释有望阐明异常的重要性：

首先，考虑到一条错误消息`array index out of bounds`对用户来说毫无意义。即使只是简单地显示另一种错误消息，例如一个说法`the file being read has an incorrect format`更有用，即使它是（由您的程序）从数组被越界访问这一事实推断出来的。但是您不能只更改`set`数组方法中的错误消息，因为它没有任何意义 - 数组用于许多事情，超出范围的索引尝试可能意味着许多不同的事情（取决于如何流量到达那里）。只有调用层次结构中足够高的方法才能知道每种异常的实际*含义*。

其次，让异常传播更高的几个级别可以让您的程序更好地推理问题并可能尝试另一种行动方案，可能根本不会打扰用户。

第三，捕获异常并在如此低的级别显示错误消息根本不会让调用者方法知道发生了异常。这意味着程序的更高级别逻辑将继续其正常流程，就好像什么都没发生一样，认为到现在为止的每个操作都已成功。这是一种错误行为，其范围从相对无害到具有破坏性。

因此，要回答您的问题，通常您问题*中特定示例*的正确（实用）方法很简单

```
void setArray(int item, int index) {
    A[index] = item;
} 
```

而且您必须在更高级别处理异常。如果您想要一种决定在这些情况下做什么的一般方法，请在[此处阅读我的答案](https://stackoverflow.com/questions/14222121/try-catch-inside-or-outside-functions/14223113#14223113)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:59:37.683

`ArrayIndexOutOfBoundsException`是运行时异常。

在清理`IllegalArgumentException`输入的第一个代码片段中添加一个更有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:00:29.613

例外，尤其是未经检查的例外，适用于特殊情况。如果您可以预测故障点，请自行验证输入。对我来说唯一的例外是`NumberFormatException`，因为这显然很难验证自己。

未经检查的异常适用于 API 用户可能无法恢复的情况，但在这种情况下您显然可以。

# iphone - 在iphone中绘图后如何在一个图像视图中保存两个图像视图

> ID：14434453
> 
> 赞同：2
> 
> 时间：2013-01-21T07:56:56.867
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, ios6

** 我有两个图像视图，一个用于背景，一个用于前景，我正在前景图像视图上绘图。对于擦除功能，我这样做是因为我不想在擦除时擦除背景图像。它做得很好。现在我想保存该图像（背景+前景），我需要通过邮件对其进行打磨。这可能吗？**

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    if (doodlemode==YES){

    UITouch *touch = [touches anyObject];

    previousPoint2 = previousPoint1;
    previousPoint1 = [touch previousLocationInView:self.view];
    currentPoint = [touch locationInView:self.view];

    // calculate mid point
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2);
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    UIGraphicsBeginImageContext(imageDoodle.frame.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

     [imgView.image drawInRect:CGRectMake(0, 0, imageDoodle.frame.size.width,      

     imageDoodle.frame.size.height)];

    CGContextMoveToPoint(context, mid1.x, mid1.y);

    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);

    CGContextSetLineCap(context, kCGLineCapRound);

    [imgView.layer renderInContext:UIGraphicsGetCurrentContext()];

    //this is for erase
    if(IsErase)
    {
    CGContextSetBlendMode(context,kCGBlendModeClear);
    }
    //make a strok color
    else
    {
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), redvalue, greenvalue, bluevalue,  

    1.0);
    }

    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 8.0);
    //size of stroke

    CGContextStrokePath(UIGraphicsGetCurrentContext());

    imgView.image = UIGraphicsGetImageFromCurrentImageContext();

     UIGraphicsEndImageContext();

    }

 }
   -(IBAction)sharePrint{
    //Compose email with activity sheet attached

     MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];

     picker.mailComposeDelegate = self;

    [UIImage imageNamed:@"feedback.png"]]];

    *//here i nedd to sand that. Image  how can i?*

     NSData *imageData = UIImagePNGRepresentation(imgView.image);

    [picker addAttachmentData:imageData mimeType:@"image/png" fileName:@"shared.png"];

     //Show Mail view with composed email

    [self presentModalViewController:picker animated:YES];

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:02:25.903

```
-（无效）一些方法{
    UIImage *newImage = [self captureScreen];
    IBbtn1.hidden = 假；
    IBbtn2.hidden = 假；
}

- (UIImage *) captureScreen {

    IBbtn1.hidden = TRUE;
    IBbtn2.hidden = TRUE;

    CGRect rect = [wrapperView 边界];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef 上下文 = UIGraphicsGetCurrentContext();
    [wrapperView.layer renderInContext:context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    返回图片；
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:26:20.977

您可以捕获具有背景和前景图像的视图并将其存储为单一图像，并可以邮寄该捕获的图像。

# c# - 用户设置未更改

> ID：14434456
> 
> 赞同：0
> 
> 时间：2013-01-21T07:57:01.070
> 
> 标签：c#, wpf

这是我的 xaml：

```
SelectedItem="{Binding Source={StaticResource Settings}, Path=Default.Selected, Converter={StaticResource SelectedTabConverter}}" 
```

我在 Convert() 和 ConvertBack() 中添加了 Console.WriteLine()，所以我可以看到他们正在做他们应该做的事情。但是，当我在将设置保存到 OnExit() 之前检查我的设置时，我看到设置没有更改。我认为这个绑定是双向的，我对 UI 所做的任何更改都应该同时更改设置。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:45:33.007

[首先，如果不阅读您之前的问题](https://stackoverflow.com/q/14433150/1136211)，很难说出您的问题是什么。

您已在 App 的 ResourceDictionary 中创建了一个 Settings 对象作为资源。没有必要这样做。只需绑定到`Settings.Default`如下所示的静态对象（并在您的其他问题的答案中正确显示）。

```
{Binding Path=Selected, Source={x:Static properties:Settings.Default}} 
```

XML 命名空间`properties`引用`Properties`应用程序的命名空间。

```
<Window ...
        xmlns:properties="clr-namespace:MyHomework__MVVM_.Properties"
        ... > 
```

除此之外，您应该绑定到[SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedindex%28v=vs.110%29.aspx)属性而不是 SelectedItem。这样你就不需要转换器了。

```
SelectedIndex="{Binding Path=Selected, Source={x:Static properties:Settings.Default}}" 
```

* * *

另请参阅[此问题](https://stackoverflow.com/q/154533/1136211)。

# android - android.speech.tts.TextToSpeech 服务未启动

> ID：14434457
> 
> 赞同：0
> 
> 时间：2013-01-21T07:57:08.793
> 
> 标签：android, text-to-speech

我正在尝试编写一个应用程序，它应该说出我在这里给出的任何字符串是我的代码......有什么问题让我知道请告诉我......当我运行这段代码时，我得到了**android.speech。 tts.TextToSpeech 服务未**在 logcat 中启动错误。

注意：我已经从 Google play 安装了 TTS

```
public class MainActivity extends Activity implements TextToSpeech.OnInitListener {

    private TextToSpeech tts;
    private final int MY_VOICE_CHECK_CODE = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent voiceCheckIntent = new Intent();
        // Intiating voice Recognizer
        voiceCheckIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(voiceCheckIntent, MY_VOICE_CHECK_CODE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
        case MY_VOICE_CHECK_CODE: {
            if (requestCode == MY_VOICE_CHECK_CODE) {
                if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                    // On Success, create the TTS(Text To Speech Synthesizer)
                    // instance
                    tts = new TextToSpeech(this, (TextToSpeech.OnInitListener) this);
                    speakOut("hello world");
                } else {
                    // missing data, install it, This will give connection to
                    // Google play(TTS data)
                    Intent installIntent = new Intent();
                    installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                    startActivity(installIntent);
                }
            }
            break;
        }    

        default:
            break;
        }
    }       

    public void onInit(int status) {
        if (status == TextToSpeech.SUCCESS) {

        } else {

        }
    }

    private void speakOut(String text) {
        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    }

    @Override
    protected void onDestroy() {
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:23:55.533

在调用 onInit 之前，您不能调用 tts.speak。直到那时它才完全初始化。

# ruby-on-rails - env：ruby_noexec_wrapper：没有这样的文件或目录错误

> ID：14434459
> 
> 赞同：2
> 
> 时间：2013-01-21T07:57:15.163
> 
> 标签：ruby-on-rails, gem, bundler

运行此命令一次后，我经常收到此错误....

```
bundle clean --force 
```

在我的 Rails 项目中..

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T19:46:31.773

同样的事情发生在我身上，我根据这个评论修复了它：[https ://github.com/sstephenson/rbenv/issues/337#issuecomment-13235367](https://github.com/sstephenson/rbenv/issues/337#issuecomment-13235367)

通过运行这些命令

```
gem install rubygems-bundler
rubygems-bundler-uninstaller
gem uninstall rubygems-bundler 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:14:17.413

看起来你正在使用 noexec，它已经死了：

[https://github.com/joshbuddy/noexec](https://github.com/joshbuddy/noexec)

检查您的 .gemrc 并尝试`gem pristine [GEM]`在您的 gems 上运行。

# php - PHP：如何移动上传的文件？

> ID：14434468
> 
> 赞同：0
> 
> 时间：2013-01-21T07:57:59.417
> 
> 标签：php, html, mysql

PHP代码：

```
$target_path='uploads/';
//$target_path=$target_path.basename($_FILES['photo']['name']);
$res=move_uploaded_file($_FILES['photo']['tmp_name'],$target_path);
if($res)
//perform insert query
else
//echo 'file not uploaded'; 
```

HTML 代码：

```
<td colspan="3"> <input type="file" name="photo" id="photo"> </td> 
```

执行后，图像文件不会移动到 target_path 文件夹。此外， $res 的值仍然为空。

我需要 $res 的值，因为如果变量具有“true”作为值，我想执行插入查询。

上传的文件没有错误。它存在，target_path 也存在。target_path 文件夹中也没有同名文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:46:46.823

您的文件输入是否在 HTML 的表单元素中？你的表单元素上肯定有 enctype="multipart/form-data" 吗？

如果您有上述情况，请执行此操作以调试正在发生的事情。这将打印出文件数组，以便您查看是否有问题：

```
exit(var_dump($_FILES));
$target_path='uploads/';
//$target_path=$target_path.basename($_FILES['photo']['name']);
$res=move_uploaded_file($_FILES['photo']['tmp_name'],$target_path);
if($res)
//perform insert query
else
//echo 'file not uploaded'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:26:35.753

我只是使用 copy() 而不是 move_uploaded_files 并且它有效。请注意，我的表格中没有提到 enctype。不知道这是否是 move_uploaded_files 无法正常工作的原因。但是没有它 copy() 肯定可以工作。

还要考虑 oldskool 上面的评论

"$_FILES['photo']['tmp_name'] 将保存上传的完整路径，例如 /tmp/asx823ASDfg，因此使用此语法将生成 /upload//tmp/asx823ASDfg，这是一个绝对路径（很可能）不存在的文件夹。 – Oldskool

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T11:35:20.337

这是一个工作代码

```
$target_path='/uploads/';
$target_path=$target_path.uniqid().$_FILES['upload_photo']['name'];
$res=move_uploaded_file($_FILES['upload_photo']['tmp_name'],$target_path);
if($res)
//perform insert query
else
//echo 'file not uploaded';

 <input type="file" name="upload_photo" id="upload_photo"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T09:41:09.680

请试试这个方法。。

`move_uploaded_file($_FILES['photo']['tmp_name'], "/upload/".$_FILES['photo']['tmp_name']);`

# c# - 从我的网站获取 SQL Server 中的数据时出现异常

> ID：14434470
> 
> 赞同：0
> 
> 时间：2013-01-21T07:58:09.447
> 
> 标签：c#, asp.net, sql-server, database

我在我的 SQL Server 数据库中创建了一个新表。当我想从新创建的表中获取数据时，我的应用程序会引发异常。我调试了代码，发现它无法从新表中获取数据。拼写正确，对象正确，一切正常，但是当从这些表中调用数据时，我的应用程序会爆裂。

我用`"SELECT * FROM GROUPS"`旧桌子工作得很好。新表的名称`APPLICATION`在同一个数据库中，有 4 行。

我使用`"SELECT * FROM APPLICATION"`它会引发异常。虽然它确实有数据。这是我正在工作的 GROUPS 代码：

```
public DataTable getAllRO()
{
  const string query_ = "SELECT * FROM GROUPS ";
  SHMA.Enterprise.Data.ParameterCollection pc = new SHMA.Enterprise.Data.ParameterCollection();
  return DAL.executeQuery_DT(query_, pc);
} 
```

并调用这个：

```
 GROUPSDB objGroup = new GROUPSDB(dataHolder);
 listerData = objGroup.getAllRO(); 
```

但是表格的相同代码`APPLICATION`不起作用。

# javascript - 将 JSON 数据发布到服务器 URL

> ID：14434472
> 
> 赞同：0
> 
> 时间：2013-01-21T07:58:20.127
> 
> 标签：javascript, jquery, ajax, json, post

当我在 jQuery 中使用 Ajax 调用将 JSON 数据发布到服务器时，我遇到了问题，该函数没有进入成功模式。当我使用 Firefox 的 POSTER 插件发布时，它会成功发布。分享相同的代码片段和屏幕截图：

```
function showSubscribeContent()
    {
        alert("*1*------- SUB CLICKED");

        var myJSONData = '{"data":{"mode" : "subscribe","technologyareas":[1],"assettypes":["podcast","documents"]}}';

        alert("*2*------- POSTING--------->"+myJSONData);

        $('#subscribePage').html('<h1>POSTING...</h1>');

        $.ajax({
            type: 'POST',
            url: 'https://tt.s2.acc.com/tt/subscribe-service/uid=sagar_mate',
            data: myJSONData,
            dataType: 'application/xml',
            success: function(data) { 
             alert("*3*------- POSTED SUCCESSFULLY TO THE SERVER");

             $('#subscribePage').html('<h1>POSTED</h1>');

          } // Success Function 
          });   // Ajax Call
} 
```

我收到警报编号*1*和*2*但不是*3*。

此外，当我使用 Firefox 的 POSTER 插件发布时，它很容易发布。

![在此处输入图像描述](../Images/b67353031dcee7df38a2709e312eafa3.png)

响应是成功的。

![海报插件快照](../Images/bcdad5fdb16b00e466febf4b7a4cb7eb.png)

我无法使用 AJAX 调用发布相同的数据。

谢谢， 安基特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:08:55.157

除非并且直到您的 AJAX 调用中的 URL 属于同一个域，否则我认为它不会成功发布。Firefox 的 POSTER 插件没有对域进行任何此类限制，但浏览器会对应用程序进行此限制。

尝试检查错误：function(){alert(4);}

看看它是否至少到达错误处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:29:47.210

请明确你想要什么，当使用 Firefox 的 POSTER 插件时，你已将数据类型指定为 json，而在使用 ajax 时，你正在使用 xml。

如果您将数据作为 JSON 发布，请使用 JSON.stringify，它接受 JSON 对象并将其转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:01:37.750

尝试使用此代码

```
function showSubscribeContent()
    {
        alert("*1*------- SUB CLICKED");
        var myJSONData = {"data":{"mode" : "subscribe","technologyareas":[1],"assettypes":["podcast","documents"]}};
        alert("*2*------- POSTING--------->"+myJSONData);
        $('#subscribePage').html('<h1>POSTING...</h1>');

        $.ajax({
            type: 'POST',
            url: 'https://tt.s2.acc.com/tt/subscribe-service/uid=sagar_mate',
            data: myJSONData,
            dataType: 'application/json',
            success: function(data) { 
             alert("*3*------- POSTED SUCCESSFULLY TO THE SERVER");
             $('#subscribePage').html('<h1>POSTED</h1>');

          } // Success Function 
          });   // Ajax Call
} 
```

**在这里，我更改了以下几行**

将 myJSONData 从字符串转换为 JSON 对象

```
var myJSONData = {"data":{"mode" : "subscribe","technologyareas":[1],"assettypes":["podcast","documents"]}}; 
```

注意：如果这不适合您，请尝试使用字符串（您正在做的方式）

将数据类型更改为 JSON

```
dataType: 'application/json', 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T09:58:41.337

在 beforeSend 函数中添加标题对我来说效果很好。CORS 的安全原因。

# opencl - opencl 内核线程中的竞争条件

> ID：14434478
> 
> 赞同：1
> 
> 时间：2013-01-21T07:58:43.053
> 
> 标签：opencl, gpgpu, gpu

如果多个线程同时写入一个内存位置。，会有竞争条件，对吧？？在我的情况下，同样的事情正在发生..

考虑来自“reduce.cl”的模块

```
int i = get_global_id(0);
int n,j;

n = keyMobj[i];                       // this n is the key..It can be either 0 or 1.
for(j=0; j<2; j++)
      sumMobj[n*2+j] += dataMobj[i].dattr[j];        //summing operation. 
```

在这里，内存位置
sumMobj===> [...0..., ....1...] 被 4 个线程同时访问 & sumMobj===> [....3..., . ...4 ...]同时访问6个线程..

有没有办法让它并行，比如使用锁定或信号量？因为这个求和是我算法中非常重要的一部分......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:16:26.157

我可以给你一些提示，因为我也面临类似的问题。

我可以想到三种不同的方法来实现类似的目标：

考虑一个简单的内核，假设您启动了 4 (0-3) 个线程

```
_kernel void addition (int *p)
{
int i = get_local_id(0);
     p[4]+= p[i];
} 
```

您希望将值 p[0]、p[1]、p[2]、p[3]、p[4] 相加，并将最终总和存储在 p[4] 中。正确的？IE：

```
p[4]= p[0] + p[1] + p[2] + p[3] + p[4] 
```

**方法-1** （无并行）

将此作业分配给仅 1 个线程（无并行性）：

```
int i = get_local_id(0);
if (i==0)

{

p[4]+= p[i];

} 
```

**方法 2**（具有并行性）

表达你的问题如下：

```
p[4]= p[0] + p[1] + p[2] + p[3] + p[4] + 0 
```

这是一个减少问题

所以启动 3 个线程：i=0 到 i=2。在第一次迭代中

```
 i=0 finds p[0] + p[1]
 i=1 finds p[2] + p[3]  
 i=2 finds p[4] + 0 
```

现在你有了三个数字，你应用与上面相同的逻辑并添加这些数字（适当的填充 0 使其成为 2 的幂）

**方法-3**原子操作

如果您仍然需要以原子方式实现此功能，可以使用[atomic_add()](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/atomic_add.html)：

```
 int fsfunc atomic_add (   volatile __global int *p ,int val) 
```

> 描述
> 
> 读取存储在 p 指向的位置的 32 位值（称为旧值）。计算 (old + val) 并将结果存储在 p 指向的位置。该函数返回旧的。

这是假设数据是 int 类型。否则，您可以看到上面建议的[链接](http://suhorukov.blogspot.co.uk/2011/12/opencl-11-atomic-operations-on-floating.html)。

# php - 重定向回消息

> ID：14434479
> 
> 赞同：0
> 
> 时间：2013-01-21T07:58:43.963
> 
> 标签：php, smarty

我有一个名为的文件`editprofile.php`，我还有另一个名为`action.php`. 当用户使用`editprofile.php`. 信息被`POST`编辑到`action.php`我处理信息的地方并将其发送到mysql。发送后，我想显示一条消息，表明一切都已成功更改。我用这个：

```
if $everythingisdone{
$smarty->assign('sucess', 'Your changes have been made');
header('Location: ' . $_SERVER['HTTP_REFERER']);
} 
```

我被重定向到上一页，但没有消息，即使我有这个`editprofile.tpl`

```
{if $sucess}
<div class="sucess">
{$sucess}
</div>
{/if} 
```

重定向回来时如何分配消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:14:45.930

你可以这样做：

```
//custom smarty function to set session flash messages
function smarty_function_set_flash($params, $smarty) {
    $flash = "";
    if (isset($_SESSION['success'])) {
        $flash = $_SESSION['success'];
        $_SESSION['success'] = ""; //unset the session
    }
    return $flash; //return flash message
} 
```

你的代码

```
....
if($everythingisdone) {
  $_SESSION['success'] =  'Your changes have been made';
  header('Location: ' . $_SERVER['HTTP_REFERER']);
} 
```

并查看：

```
{if isset($smarty.session.flash) && $smarty.session.flash != ''}
    <div class="sucess">{set_flash}</div>
{/if} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:05:12.137

您不能重定向到另一个页面并期望变量持续存在。当您调用`$smarty->assign()`该更改时，该更改将仅针对该特定页面请求持续存在，一旦您重定向它就不再存在了。

您可以使用 GET 参数执行此操作：

```
<?php
// action.php
if ($something) {
    header ("Location: " . $_SERVER['HTTP_REFERER'] . "?success=1");
    die;
}
else {
    header ("Location: " . $_SERVER['HTTP_REFERER'] . "?success=0");
    die;
} 
```

然后`editprofile.php`您可以检查该值：

```
<?php
// editprofile.php
if ($_GET['success'] == '1') {
    // yes!
}
else {
    // aww :(
} 
```

如果您不那样重定向，则没有必要这样做。为什么不将表单放在`editprofile.php`并提交到同一页面并检查那里的错误？设置标志变量并在表单未提交时显示错误消息：

```
<?php
if ($ok) {
    $smarty->assign ('form_processed', true); 
}
else {
    $smarty->assign ('form_processed', false); 
} 
```

然后只需在您的表单中使用它来检查错误。

希望这可以帮助

# java - 不清楚Java

> ID：14434480
> 
> 赞同：-1
> 
> 时间：2013-01-21T07:58:46.633
> 
> 标签：java

这可能是一个愚蠢的问题。我还在学习和理解java。我有一个让我感到困惑的担忧。我有一个包含大约 50 行信息的文本文档。

我担心的是我正在尝试检索有关某些名称的信息并计算其名称旁边的值作为总数。意思是如果文档是关于棒球队及其平均水平的。我只想计算属于某个部门的那些团队。

我有这段代码可以帮助我计算所有内容。

```
public int totalAverage( ) {
    int total = 0;
    for ( int i = 0; i < teamArray.length; i++ ) {
        total += teamArray[i].getAverages( );
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:03:36.120

使用条件语句（如[`if`-statement](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)）检查是否满足某些条件。例如`division`在方法中添加一个参数，这样你就可以检查除法的总平均值：

```
public int totalAverage(String division) {
    int total = 0;
    for ( int i = 0; i < teamArray.length; i++ ) {
        if(division.equals(teamArray[i].getDivision()) {
            // Team belongs to division, so increase total
            total += teamArray[i].getAverages( );
        }
    }
    return total;
} 
```

# iphone - 同一个mall里两个店铺之间的最短路径画法

> ID：14434486
> 
> 赞同：0
> 
> 时间：2013-01-21T07:59:02.900
> 
> 标签：iphone, ios, objective-c, ios5, mapkit

要求是，假设一个人去商场，他想从他当前的位置去特定的商店，所以应用程序会给他两个选项供他选择，当前商店和预定商店，在选择这两个选项后，地图将在那里弹出，显示所选商店之间的最短路径，该商店可能存在差异。地板。因为商店在同一个购物中心，所以不能使用 lat long 我怎么能这样做，请一些人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:47:12.790

一个解决方案是创建一个代表商场的加权图：

*   节点是商店和路径交叉点（即楼层之间的自动扶梯）

*   边缘是连接它们的路径

*   边的权重是节点之间行走的距离/时间

然后实现类似[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm "Dijkstra 算法")来找到两个节点（商店）之间的最短路径。

然后可以将解决方案绘制为商场地图上的叠加层。

[这是最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)的一个示例，它是经典[旅行商问题的一个子集](http://en.wikipedia.org/wiki/Travelling_salesman_problem)

该线程有一个指向可能有帮助的目标 c 代码的链接：[在目标 c 中应用最短路径算法的简单方法](https://stackoverflow.com/a/10756237/1124373)

# python - sorted() 函数的复杂度是多少？

> ID：14434490
> 
> 赞同：67
> 
> 时间：2013-01-21T07:59:30.543
> 
> 标签：python, algorithm, sorting

我有一个列表列表，我正在使用以下方法对它们进行排序

```
data=sorted(data, key=itemgetter(0)) 
```

想知道这个 python 函数的运行时复杂度是多少？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-21T08:02:09.913

提供`itemgetter(0)`的是`O(1)`当与 一起使用时`data`，排序是`O(n log n)`平均的和最坏的情况。

有关 Python 中使用的排序方法的更多信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Timsort)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T09:10:22.907

sorted 与 sort 类似，不同之处在于前者从可迭代对象中构建一个新的排序列表，而 sort 则在原地进行排序。主要区别在于空间复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T02:44:21.563

就是Timsort，Timsort是一种基于归并排序和插入排序的自适应排序算法，后来我以为它属于比较排序，[据说](http://en.wikipedia.org/wiki/Comparison_sort#Number_of_comparisons_required_to_sort_a_list)没有比较排序可以保证小于lg(N! ) ~ N log N。

# sql-server - 显示报表中每个记录的子行，SSRS（Sql Server Report Server 2012）

> ID：14434495
> 
> 赞同：0
> 
> 时间：2013-01-21T07:59:42.930
> 
> 标签：sql-server, report

我有一份报告，其中显示了公司列表。每家公司都有 1 个或多个地址。我想将每个地址显示为子记录。像这样的东西：

*   父记录
    *   孩子记录
    *   孩子记录
    *   孩子记录
*   父记录
    *   孩子记录
*   父记录
*   父记录
*   父记录
    *   孩子记录
    *   孩子记录

例如有 2 个表：公司和地址。从地址表到 CompanyID 的外键，这两个表之间存在关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:18:34.453

你需要一个**Tablix**；将此与您的**Dataset**相关联。

将**Group**添加到**Tablix**，基于*Company*；包括一个组头。

现在您应该为每个*Company*设置一行，为每个子*Address*设置一行。如果您想要类似于您的示例的缩进合并组标题行中的单元格。

最终结果应该是这样的：

![在此处输入图像描述](../Images/0b87a3200f60f790c8f52953f2da3c8d.png)

# jquery - asp.net中的jquery面板设计

> ID：14434496
> 
> 赞同：0
> 
> 时间：2013-01-21T07:59:57.733
> 
> 标签：jquery, asp.net

我想设计一个 asp.net 面板。已经创建了它，但是主题不起作用。请帮助我。应该是什么

> 脚本类型=“文本/javascript”标签？

代码如下

```
<script src="ui/jquery.corners.min.js" type="text/javascript"></script>
 <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>

<script src="ui/jquery.ui.core.js "type="text/javascript"></script>
<script src="ui/jquery.ui.widget.js"type="text/javascript"></script> 
```

```
<asp:Panel ID='jQueryBox' runat='server' ClientIDMode='Static'
    class='rounded'>
  <p>Some Developer Links</p>
  <ol>
    Some thing

  </ol>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:10:19.417

您可以通过将[jQuery UI CSS 类](http://ui-dev.jquery.com/docs/Theming/API)应用到任何 div（包括面板）来使其看起来更好。特别是，您需要`ui-widget`在外部 div 和`ui-widget-header`内部 div 上。例如：

```
<asp:Panel ID='jQueryBox' runat='server' ClientIDMode='Static' CssClass='ui-widget'>    
    <div class="ui-widget-header">Some Developer Links</div>
    <div class="ui-widget-content">
        <ol>
            <li>All of your content in here!</li>
        </ol>
    </div> 
```

# c++ - 使用 DirectShow 捕获 AVI 视频

> ID：14434497
> 
> 赞同：0
> 
> 时间：2013-01-21T08:00:02.383
> 
> 标签：c++, video, directshow

我正在尝试使用 DirectShow`AVIMux`和`FileWriter`过滤器捕获 AVI 视频。当我连接`SampleGrabber`过滤器而不是 时`AVIMux`，我可以清楚地看到流是 30 fps，但是在捕获视频时，每帧重复 4 次，我得到 120 帧而不是 30 帧。电影比它应该慢 4 倍是并且只有 4 帧集合中的第一帧是关键帧。我用 8 fps 进行了相同的实验，对于我收到的每张图像，我在视频中有 15 帧。在 15 fps 的情况下，我得到每帧 8 次。

我尝试使用 C++ 编写代码并使用 Graph Edit Plus 对其进行测试。有什么办法可以控制吗？也许对`AVIMux`过滤器有一些限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:58:06.610

您没有指定可能对问题有一定影响的捕获格式，但通常听起来像写入文件时的图表有一些瓶颈，这会阻止流继续以 30fps 流动。相机正在尝试以 30fps 的速度生成帧，只要缓冲区被回收以填充它，它就会这样做。

但是这里的缓冲区不可用，因为文件编写器正忙于将它们放到磁盘上。捕获过滤器处于饥饿状态，在这种情况下，它会增加随每个捕获帧传播的“丢帧”计数器。AVIMux 使用此计数将指示符插入到 AVI 文件中，该指示符实际上表示“此处应该有一个帧可用于写入文件，但不是；在播放时重复最后一帧”。因此，该文件应该有每秒 30 帧的占位符——一些填充了实际帧，还有一些“丢帧”。

此外，您没有提及您是否正在混合音频，这将充当图表的参考时钟以保持音频-视频同步。如果还使用音频流，当捕获完成时，AVIMux 会更改视频流的帧速率以使两个流的持续时间相等。您可以通过转储 AVI 文件头（或者在资源管理器中右键单击文件并查看属性）来检查 AVIMux 是否更改了视频流的帧速率。

如果我不得不冒险猜测问题的根源，我敢打赌捕获驱动程序在计算丢帧计数时存在错误，这反过来又会弄乱 AVIMux。使用不同的相机会发生这种情况吗？

# javascript - 查找更新的节点 Facebook 模板

> ID：14434500
> 
> 赞同：1
> 
> 时间：2013-01-21T08:00:09.743
> 
> 标签：javascript, facebook, node.js, express

所以我一直在网上寻找一个好的 node.js Facebook 模板，但我真正能找到的是这个[https://github.com/heroku/facebook-template-nodejs](https://github.com/heroku/facebook-template-nodejs)。它很不错，但它使用 express 2.4.6 和节点 0.6.x。我想跟上标准并在 express 3.x 和节点 0.8.x 中工作，但是如果我更新了，`package.json`我将无法再使用 heroku 模板附带的动态帮助器，主要是这些功能：

```
app.dynamicHelpers({
  'host': function(req, res) {
    return req.headers['host'];
  },
  'scheme': function(req, res) {
    return req.headers['x-forwarded-proto'] || 'http';
  },
  'url': function(req, res) {
    return function(path) {
      return app.dynamicViewHelpers.scheme(req, res) + app.dynamicViewHelpers.url_no_scheme(req, res)(path);
    }
  },
  'url_no_scheme': function(req, res) {
    return function(path) {
      return '://' + app.dynamicViewHelpers.host(req, res) + (path || '');
    }
  },
}); 
```

有谁知道我在哪里可以找到一些最新的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:18:45.200

嗨，我遇到了同样的问题，要使其正常工作，需要进行多项更改：

首先你需要更新 package.json 中的依赖：

```
"dependencies": {
"async":     "0.1.x",
"ejs":       "0.8.x",
"express":   "3.1.x",
"faceplate": "0.4.x"
}, 
```

然后执行“npm install”以更新本地内容。

在 web.js 中的几个地方都需要进行下一次手术。对于我的设置，我需要更新顶部的“要求”列表：

```
var async   = require('async');
var express = require('express');
var util    = require('util');
var http = require('http');
var path =require('path'); 
```

然后在顶部注释掉旧的（2.x）风格的表达初始化。然后添加一个新的 3.x 兼容的：

```
var store  = new express.session.MemoryStore;
var app = express();

app.configure(function(){
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs');
app.set('view options', { pretty: true });
app.locals.pretty = true;
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(express.cookieParser('secret'));
app.use(express.session({ secret: 'secret', store: store }));
app.use(express.static(path.join(__dirname, 'public')));
app.use(require('faceplate').middleware({
    app_id: process.env.FACEBOOK_APP_ID,
    secret: process.env.FACEBOOK_SECRET,
    scope:  'user_likes,user_photos,user_photo_video_tags'
  }));

// fix dynamic helpers
app.use(function(req,res,next){
    res.locals.host =  req.headers['host'];
    res.locals.scheme = req.headers['x-forwarded-proto'] || 'http';
    res.locals.url_no_scheme =  function(path) {
                  return '://' + res.locals.host + path;
                };
    res.locals.url =  function(path) {
          return res.locals.scheme + res.locals.url_no_scheme(path);
        };

    next();
});
}); 
```

请注意，前面的块包含对您原始问题的修复。只需添加您自己的中间件，将这些变量/函数设置为 res.locals。此时您可以注释掉旧的 2.x`app.dynamicHelpers`块。

添加 3.x 样式初始化：

```
var server = http.createServer(app).listen(app.get('port'), function(){
console.log("Express server listening on port " + app.get('port')
  + ":" + app.get('env'));
}); 
```

此时问题已“解决”，但仍然无法正常工作。显然，用于面板的最新 API（可能是由于 FB 更改）已经有所改变。因此，在授权应用程序然后尝试呈现页面后，您会收到错误消息。这是由于函数中`facebook.get`回调的签名不正确`handle_facebook_request`，以及传递给回调的数据发生了变化。

所以以朋友为例：

```
...
function(cb) {
    // query 4 friends and send them to the socket for this socket id
    req.facebook.get('/me/friends', { limit: 4 }, function(friends) {
      req.friends = friends;
      cb();
    });
  },
... 
```

应该改成这样：

```
...
function(cb) {
    // query 4 friends and send them to the socket for this socket id
    req.facebook.get('/me/friends', { limit: 4 }, function(dummy,friends) {
      req.friends = friends.data;
      cb();
    });
  },
... 
```

对照片和喜欢重复此操作，您应该会很好。

# dojo - IBM Worklight with Dojo Toolkit | dojo/main.js 404 未找到问题

> ID：14434503
> 
> 赞同：0
> 
> 时间：2013-01-21T08:00:33.857
> 
> 标签：dojo, ibm-mobilefirst

我最近开始探索 IBM Worklight，它看起来非常有希望构建混合移动应用程序，为此，我创建了一个 Worklight 项目，同时选择 Dojo Toolkit 作为默认框架选项，并看到了缺少的 dojo/main.js 问题。

这是HTML代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>TD_Mobile</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">

    <script src="dojo/dojo.js" data-dojo-config="isDebug: false, parseOnLoad: true, async: false"></script>

<link rel="stylesheet" href="css/TD_Mobile.css">
</head>
<body id="content" style="display: none;">
    <div data-dojo-type="dojox.mobile.ScrollableView" id="view0"
        data-dojo-props="selected:true"></div>

TD_Mobile
    <!--application UI goes here-->
    <script src="js/initOptions.js"></script>
    <script src="js/TD_Mobile.js"></script>
    <script src="js/messages.js"></script>
</body>
</html> 
```

当我从 worklight 控制台构建和部署并运行项目作为公共资源时，在以下路径中看到 main.js not found 问题`http://localhost:8080/apps/services/preview/TD_Mobile/common/1.0/default/dojo/main.js`

更令我惊讶的是，我能够搜索参考文件夹，但在`C:\Users\marif\workspace\WorklightServerHome\TD Mobile New\widget-resources\TD_Mobile-common-e6cd3d9088c88e96df743ed1c9a1b584a90da8c9\preview\default\dojo`那里看不到 main.js 和更多 JS 文件。

看起来最终部署的构建不知何故无法正常工作，如果有任何快速指针，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:19:58.477

并非所有文件都包含在 dojo 构建中，您的项目中有一个名为 build-dojo.xml 的文件。将 main.js 添加到其中。

在`<patternset id="dojo.resources.loose-modules">`添加您要使用的模块下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:08:10.283

这听起来像一个写权限问题。你能创建一个新项目，看看它是否也在那里发生吗？如果没有，则问题已解决，否则可能是插件问题。您是否在构建过程中收到任何错误消息是 Worklight 控制台？

# java - 在热键上启动 Android 应用程序？

> ID：14434504
> 
> 赞同：1
> 
> 时间：2013-01-21T08:00:50.033
> 
> 标签：java, android

我有这样的问题，我可以通过按例如三下主页按钮或其他方式来启动我的 android 应用程序。我有兴趣确切地使用硬件按钮（主页、返回、菜单、音量 +/-、电源、相机......）来启动？？有任何想法吗？？

# javascript - 谷歌路线规划器模式

> ID：14434505
> 
> 赞同：1
> 
> 时间：2013-01-21T08:00:50.310
> 
> 标签：javascript, jquery, google-maps

当谈到 javascript 时，我有点笨。我有一个谷歌地图简单的脚本，用于从 A 到 B 的路线路线。一切都很好，除了我想将模式（驾驶，步行......）从当前下拉选择器更改为单选按钮。

我在网上和stackoverflow上搜索过，但目前没有找到一个可行的解决方案。

我的html：

```
<select id="mode">
     <option selected="selected" value="DRIVING">Car</option>
     <option value="WALKING">Walk</option>
     <option value="TRANSIT">Public transport</option>
     <option value="BICYCLING">Bike</option>
</select> 
```

和脚本：

```
function calcRoute() {
var selectedMode = document.getElementById('mode').value;
var start = document.getElementById("routeStart").value;
var end = document.getElementById("routeEnd").value;
var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.TravelMode[selectedMode]
}; 
```

是否可以从上面的代码中将选择（下拉菜单）更改为单选按钮，或者我还应该发布其他内容吗？

ps 我也尝试过[这个解决方案](https://stackoverflow.com/questions/10788011/buttons-instead-of-select)，但是当我提交计算路由时，它只是将我重定向到一个空白的子页面/模式？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:07:31.270

我希望您谈论的是单选按钮而不是复选框，因为可以选择多个复选框，这将无法按预期工作。单选按钮以具有相同名称和不同 ID 的组的形式出现，其中一个将选中的属性设置为 true，因此循环它们直到找到它。

创建一个新函数来查找选中的单选按钮，然后替换 var selectedMode = document.getElementById('mode').value; 使用下面给出的代码：

```
function getCheckedRadio(radio_group) {
    for (var i = 0; i < radio_group.length; i++) {
        var button = radio_group[i];
        if (button.checked) {
            return button;
        }
    }
    return undefined;
}

var selectedMode = getCheckedRadio(document.forms.frmId.elements.groupName).value; 
```

# user-interface - 无法在struts2中设置单选按钮

> ID：14434510
> 
> 赞同：0
> 
> 时间：2013-01-21T08:01:25.780
> 
> 标签：user-interface, struts2

我无法获得在页面中选择的单选按钮的值 我有一个 JSP 页面

```
<body>
    <s:form action="/YYY" id="frmPersonalPage" name="frmPersonalPage" >
      <s:radio name ="radio" list="skillMasterData"></s:radio>  
   </s:form>
 </body> 
```

这可以正确渲染。在我的 struts.xml 我有

```
<action name="YYY" class="com.tdi.atom.actions.CCC" method="showEditSkillMasterPage">
        <result name ="success">/jsp/modules/skillmap/createskillmaster.jsp</result>
</action> 
```

在我的动作课上，我有这个

```
public class CCC extends BaseActionSupport {        
private ArrayList skillMasterData;  
public String   radio;
private ArrayList l1;
private ArrayList l2;
private ArrayList l3;

public ArrayList getSkillMasterData() {
    return skillMasterData;
}

public void setSkillMasterData(ArrayList skillMasterData) {
    this.skillMasterData = skillMasterData;
}

public String showEditSkillMasterPage()
{   log.info("at showEditSkillMasterPage");
    System.out.println("radio buttoneee : "+getRadio());//this is null
    setEditType("EDIT");
    return SUCCESS;
}

public String showListSkillMasterPage()
{
    SkillMasterDB pddb =new SkillMasterDB();
    JdbcHelper helper;
     l1 =new ArrayList();
       l2=new ArrayList();
       l3=new ArrayList();
       l1.add("asda");
       l1.add("rqwrq");
       l2.add("!@@##");
       l2.add("9087907");
       l3.add("./,/");
       l3.add("[][][]");
       skdto.add(l1);
       skdto.add(l2);
       skdto.add(l3);
       setSkillMasterData(skdto);
    return SUCCESS;
}
public String getRadio() {
    return radio;
}
public void setRadio(String radio) {
    this.radio = radio;
} 
```

}

在 BaseActionSupport 类我有

```
 public class BaseActionSupport extends ActionSupport implements SessionAware {
 private Map userSession;
 public UserDTO user; 
 public UserDTO getUser() {
 return mgr.getUser(); 
}
 public boolean isAdmin() {
 return mgr.isUserADMIN(); 
}
 public void setSession(Map session) { 
 userSession = session; mgr = new SecurityManager(userSession);
 }
 } 
```

我只是想不通为什么这么简单的代码不起作用。在其他非常相似的代码工作正常的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:59:16.580

您的代码中有一些奇怪的东西。

假设`CCC`和`YYY`是仅为在此处发布它们而创建的混淆名称（否则，您应该使用`CamelCase`首字母大写的类名，如`MyAction`），

*   您应该尊重`JavaBeans conventions`，然后`userSession`应该成为`session`，因为访问器方法（getter 和 setter）应该始终尊重私有变量的名称）；
*   `skdto`变量未在您的`showListSkillMasterPage`方法中初始化或定义；
*   我不确定使用`ArrayList<ArrayList<String>>`单选按钮是否很好。您可以尝试使用简单的`ArrayList<String>`，例如：

    ```
    public String showListSkillMasterPage() {
        SkillMasterDB pddb =new SkillMasterDB();
        JdbcHelper helper;    
        List<String> skdto = new ArrayList<String>();
        skdto.add("asda");
        skdto.add("rqwrq");
        skdto.add("!@@##");
        skdto.add("9087907");
        skdto.add("./,/");
        skdto.add("[][][]");
        setSkillMasterData(skdto);
        return SUCCESS;
    } 
    ```

*   最后，您可以测试`Firebug's Net module`页面的内容，现在和编辑后检查无线电参数值，看看现在出了什么问题以及稍后会如何（希望如此）......

# audio - 如何将音频上传到服务器：黑莓

> ID：14434512
> 
> 赞同：0
> 
> 时间：2013-01-21T08:01:33.533
> 
> 标签：audio, blackberry, java-me, upload

我正在尝试将 .amr 文件上传到服务器。我的代码如下：

```
private static void uploadRecording(byte[] data) {
    byte[] response=null;
    String currentFile = getFileName();  //the .amr file to upload
    StringBuffer connectionStr=new StringBuffer("http://www.myserver/bb/upload.php");
    connectionStr.append(getString());
    PostFile req;
    try {
        req = new PostFile(connectionStr.toString(),
           "uploadedfile", currentFile, "audio/AMR", data    );
        response = req.send(data);
    } catch (Exception e) {
        System.out.println("====Exception: "+e.getMessage());
    }
    System.out.println("Server Response : "+new String(response));
}

public class PostFile
{
    static final String BOUNDARY = "----------V2ymHFg03ehbqgZCaKO6jy";
    byte[] postBytes = null;
    String url = null;

    public PostFile(String url, String fileField, String fileName, String fileType, byte[] fileBytes) throws Exception
    {    
        this.url = url;
        String boundary = getBoundaryString();
        String boundaryMessage = getBoundaryMessage(boundary, fileField, fileName, fileType);
        String endBoundary = "\r\n--" + boundary + "--\r\n";
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bos.write(boundaryMessage.getBytes());
        bos.write(fileBytes);
        bos.write(endBoundary.getBytes());
        this.postBytes = bos.toByteArray();
        bos.close();
    }

    String getBoundaryString()
    {
        return BOUNDARY;
    }

    String getBoundaryMessage(String boundary, String fileField, String fileName, String fileType)
    {
        StringBuffer res = new StringBuffer("--").append(boundary).append("\r\n");
        res.append("Content-Disposition: form-data; name=\"").append(fileField).append("\"; filename=\"").append(fileName).append("\"\r\n")
           .append("Content-Type: ").append(fileType).append("\r\n\r\n");
        return res.toString();
    }

    public byte[] send(byte[] fileBytes) throws Exception
    {
        HttpConnection hc = null;
        InputStream is = null;
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] res = null;
        try
        {    
            hc = (HttpConnection) Connector.open(url);
            hc.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + getBoundaryString());
            hc.setRequestMethod(HttpConnection.POST);
            hc.setRequestProperty(HttpProtocolConstants.HEADER_ACCEPT_CHARSET,
               "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
            hc.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LENGTH ,Integer.toString(fileBytes.length));
            OutputStream dout = hc.openOutputStream();
            dout.write(postBytes);
            dout.close();
            int ch;

            is = hc.openInputStream();  // <<< EXCEPTION HERE!!!

            if(hc.getResponseCode()== HttpConnection.HTTP_OK)
            {
                while ((ch = is.read()) != -1)
                {
                    bos.write(ch);
                }
                res = bos.toByteArray();
                System.out.println("res loaded..");
            }
            else {
                System.out.println("Unexpected response code: " + hc.getResponseCode());
                hc.close();
                return null;
            }
        }
        catch(IOException e)
        {
            System.out.println("====IOException : "+e.getMessage());
        }
        catch(Exception e1)
        {
            e1.printStackTrace();
            System.out.println("====Exception : "+e1.getMessage());
        }
        finally
        {
            try
            {
                if(bos != null)
                   bos.close();
                if(is != null)
                   is.close();
                if(hc != null)
                   hc.close();
            }
            catch(Exception e2)
            {
                System.out.println("====Exception : "+e2.getMessage());
            }
        }
        return res;
    }
} 
```

上面突出显示的是引发异常的代码行：**Not Connected**。有人可以告诉我可以做些什么来纠正这个问题吗？非常感谢。

更新：

```
public static String getString()
{
 String connectionString = null;       
 String uid = null;
// Wifi
if(WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
{
        connectionString = ";interface=wifi";
}
else
{
 ServiceBook sb = ServiceBook.getSB();
 net.rim.device.api.servicebook.ServiceRecord[] records = sb.findRecordsByCid("WPTCP");
 for (int i = 0; i < records.length; i++) {
     if (records[i].isValid() && !records[i].isDisabled()) {
         if (records[i].getUid() != null &&
        records[i].getUid().length() != 0) {
             if ((records[i].getCid().toLowerCase().indexOf("wptcp") != -1) &&                       
                     (records[i].getUid().toLowerCase().indexOf("wifi") == -1) &&
                     (records[i].getUid().toLowerCase().indexOf("mms") == -1) ) {
                        uid = records[i].getUid();
                        break;
             }
         }
     }
 }
 if (uid != null)
 {
     connectionString = ";deviceside=true;ConnectionUID="+uid;
 }
 else
 {                       
     // the carrier network
     if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT)
     {
         String carrierUid = getCarrierBIBSUid();
            if (carrierUid == null) {
                // Has carrier coverage, but not BIBS. So use the
                // carrier's
                // TCP network                  
                 System.out.println("No Uid");

                connectionString = ";deviceside=true";
            } else {
                // otherwise, use the Uid to construct a valid carrier
                // BIBS
                // request                  
                 System.out.println("uid is: " + carrierUid);
                connectionString = ";deviceside=false;connectionUID="
                        + carrierUid + ";ConnectionType=mds-public";
            }
     } 

     //(BlackBerry Enterprise Server)
     else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS)
     {
         connectionString = ";deviceside=false";
     }   
    // If there is no connection available abort to avoid bugging
    // the user unnecessarily.       
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {          
        System.out.println("There is no available connection.");
    }

    // In theory, all bases are covered so this shouldn't be
    // reachable.
    else {          
        System.out.println("no other options found, assuming device.");
        connectionString = ";deviceside=true";
    }
 }
}
 return connectionString;
 }

/**
 * Looks through the phone's service book for a carrier provided BIBS
 * network
 * 
 * @return The uid used to connect to that network.
 */
private static String getCarrierBIBSUid() {
    try {
        net.rim.device.api.servicebook.ServiceRecord[] records = ServiceBook.getSB().getRecords();
        int currentRecord;

        for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
            if (records[currentRecord].getCid().toLowerCase().equals(
                    "ippp")) {
                if (records[currentRecord].getName().toLowerCase()
                        .indexOf("bibs") >= 0) {
                    return records[currentRecord].getUid();
                }
            }
        }
    } catch (Exception e) {         
        System.out.println("====Exception : "+e.toString());
    }
    return null;
} 
```

# html - 相对于彼此定位跨度

> ID：14434513
> 
> 赞同：0
> 
> 时间：2013-01-21T08:01:49.047
> 
> 标签：html, css, css-float

我将三个 span 元素包裹在一个容器中。我希望第一个跨度是其他两个跨度的两倍并且向左浮动。另外两个应该在第一个的左侧。但是在不同的线上，使它们垂直占据相同的高度。我尝试了很多不同的方法，但无法让它发挥作用。有谁知道我如何做到这一点？

```
<div id="wrapper>
  <span id="span1>text1</span>
  <span id="span2>text2</span>
  <span id="span3>text3</span>
</div> 
```

![Span1 为红色，span 2 为绿色，span 3 为蓝色](../Images/dcfaeb9bedfb01437391a59a04e727a8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:14:10.753

看看[我为你做的例子](http://codepen.io/yardenst/pen/oLtcg)

您需要所有内部跨度向左浮动，而不仅仅是控制大小：

```
div{width:200px;height:200px;border:solid 1px black}
#s1{float:left;background:red;width:50%;height:100%;}
#s2{float:left;background:green;width:50%;height:50%;}
#s3{float:left;background:yellow;width:50%;height:50%;} 
```

# php - 在 php 和 htaccess 中上传图像的安全方法

> ID：14434517
> 
> 赞同：7
> 
> 时间：2013-01-21T08:02:11.767
> 
> 标签：php, image-uploading

我在互联网上找到了以下代码，用于在 php 中安全上传图片。

我想知道它涵盖了图像上传中所有可能的攻击方式。

```
define('MAX_SIZE_EXCEDED', 101);
define('UPLOAD_FAILED', 102);
define('NO_UPLOAD', 103);
define('NOT_IMAGE', 104);
define('INVALID_IMAGE', 105);
define('NONEXISTANT_PATH', 106);

class ImgUploader
{
  var $tmp_name;
  var $name;
  var $size;
  var $type;
  var $error;
  var $width_orig;
  var $height_orig;
  var $num_type;
  var $errorCode = 0;
    var $allow_types = array(IMAGETYPE_GIF, IMAGETYPE_JPEG, IMAGETYPE_PNG);

  function __construct($fileArray)
  {
    foreach($fileArray as $key => $value)
    {
      $this->$key = $value;
    }
    if($this->error > 0)
    {
      switch ($this->error)
      {
        case 1: $this->errorCode = MAX_SIZE_EXCEDED; break;
        case 2: $this->errorCode = MAX_SIZE_EXCEDED; break;
        case 3: $this->errorCode = UPLOAD_FAILED; break;
        case 4: $this->errorCode = NO_UPLOAD; break;
      }
    }
    if($this->errorCode == 0)
    {
      $this->secure();
    }
  }

  function secure()
  {
    //$this->num_type = exif_imagetype($this->tmp_name);
    @list($this->width_orig, $this->height_orig, $this->num_type) = getimagesize($this->tmp_name);

    if(filesize($this->tmp_name) > 1024*1024*1024*5) // allows for five megabytes.  Change this number if need be.
    {
      $this->errorCode = MAX_SIZE_EXCEDED;
      return false;
    }

    if (!$this->num_type)
    {
      $this->errorCode = NOT_IMAGE;
        return false;
    }
    if(!in_array($this->num_type, $this->allow_types))
    {
      $this->errorCode = INVALID_IMAGE;
      return false;
    }
  }

  function getError()
  {
    return $this->errorCode;
  }

  function upload_unscaled($folder, $name)
  {
    return $this->upload($folder, $name, "0", "0");
  }

  function upload($folder, $name, $width, $height, $scaleUp = false)
  {
    // $folder is location to be saved
    // $name is name of file, without file extention
    // $width is desired max width
    // $height is desired max height

    if($this->errorCode > 0)
      return false;

    // deal with sizing
    // if image is small enough to not scale, or upload_unscaled() is called, don't scale
    if((!$scaleUp && ($width > $this->width_orig && $height > $this->height_orig)) || ($width === "0" && $height === "0"))
    {
      $width = $this->width_orig;
      $height = $this->height_orig;
    }
    else
    {
      // if height diff is less than width dif, calc height
      if(($this->height_orig - $height) <= ($this->width_orig - $width))
        $height = ($width / $this->width_orig) * $this->height_orig;
      else
        $width = ($height / $this->height_orig) * $this->width_orig;
    }

    // Resample
    switch($this->num_type)
    {
      case IMAGETYPE_GIF: $image_o = imagecreatefromgif($this->tmp_name); $ext = '.gif'; break;
      case IMAGETYPE_JPEG: $image_o = imagecreatefromjpeg($this->tmp_name); $ext = '.jpg'; break;
      case IMAGETYPE_PNG: $image_o = imagecreatefrompng($this->tmp_name); $ext = '.png'; break;
    }

    $filepath = $folder.(substr($folder,-1) != '/' ? '/' : '');
    if(is_dir($_SERVER['DOCUMENT_ROOT'].$filepath))
      $filepath .= $name.$ext;
    else
    {
      $this->errorCode = NONEXISTANT_PATH;
      imagedestroy($image_o);
      return false;
    }

    $image_r = imagecreatetruecolor($width, $height);
    imagecopyresampled($image_r, $image_o, 0, 0, 0, 0, $width, $height, $this->width_orig, $this->height_orig);

    switch($this->num_type)
    {
      case IMAGETYPE_GIF: imagegif($image_r, $_SERVER['DOCUMENT_ROOT'].$filepath); break;
      case IMAGETYPE_JPEG: imagejpeg($image_r, $_SERVER['DOCUMENT_ROOT'].$filepath); break;
      case IMAGETYPE_PNG: imagepng($image_r, $_SERVER['DOCUMENT_ROOT'].$filepath); break;
    }

    imagedestroy($image_o);
    imagedestroy($image_r);

    return '/'.$filepath;
  }
} 
```

我还有一个 .htaccess 文件存储在“images”文件夹中，它关闭了文件脚本，因此没有人可以在照片文件夹中执行脚本。

```
<Files ^(*.jpg)>
order deny,allow
deny from all
</Files>
Options -Indexes
Options -ExecCGI 
AddHandler cgi-script .php .php3 .php4 .php5 .phtml .pl .py .jsp .asp .htm .shtml .sh .cgi 
```

出于安全原因，这样做就足够了，或者我必须采取一些其他步骤来保护我的代码和网站。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:42:25.923

我要说的第一件事是使用 Apache 的**mod_mime检查***文件类型*，否则我可以发送一个 HTTP 请求，说明*我是 JPEG 文件！*并且您只需信任*Yeap 之类的文件扩展名！**你有 .jpg 扩展名*，但实际上我可以注入 PHP 源代码而不是 JPEG 数据，然后我可以在你的服务器上执行 PHP 源代码。

 ****另一件事是始终强制 Apache 不运行任何这些图像类型。您可以使用**ForceType**指令来做到这一点。

```
<FilesMatch "(?i)\.jpe?g$">
    ForceType image/jpeg
</FilesMatch> 
```

**编辑：**

我没有看到底线。关闭文件脚本绝对有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:40:32.983

## 此代码安全吗？

### PHP

总之，不，不一定！有一个代码没有涵盖的致命缺陷，但不要绝望，这很容易解决！

虽然脚本正在测试文件的扩展名，但它并没有测试文件的 MIME 类型，因此可能会引发整个问题。

***除了这个小漏洞之外，代码非常安全。***

### 阿帕奇

伪造一个 HTTP 请求看起来像一个 JPEG 是一件非常容易的事情，虽然 PHP 可以处理这个问题，但有时最好确保这个漏洞已经被各个角度覆盖。使用 Apache 中的 MOD_MIME 模块的简单修复可用于修复此缺陷，如下所述。

### HTTPS -*可能无关紧要*

如果您担心这些文件会在客户端和服务器之间被嗅探，那么绝对重要的安全部分就是在您的网站上使用 SSL 证书。这将加密客户端和服务器之间的所有数据。

***但是，如果您只是担心服务器端的事情，尽管建议这样做，但这并不是必需的。***

## 可能的解决方案

### `finfo()`功能_

该`finfo()`函数将返回文件的 MIME 类型，因此指示它是否是 JPEG 并且可以上传。

[**有关此功能的更多详细信息，请参见此处**](http://php.net/manual/en/function.finfo-file.php)。

### 上传替代品

就个人而言，我更喜欢使用 Colin Verot Upload Class。这个类非常易于使用，涵盖了所有潜在的安全问题，使用 GD 库具有大量扩展功能，并且会不断维护。

**[在此处](http://www.verot.net/php_class_upload.htm)**访问 Colin Verot 的网站以下载并开始使用该课程。

### 阿帕奇 MOD_MIME

Apache MOD_MIME 模块将强制检查发送到服务器的文件的 MIME 类型。

在**[这里](http://httpd.apache.org/docs/2.2/mod/mod_mime.html)**查看更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:51:32.700

代码看起来不错，最重要的答案也很好我只想再补充一点关于安全性：

*   您应该将文件存储在文档根目录之外的目录中（不能通过 http 请求访问），并通过首先检查正确授权的脚本来提供它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T03:44:19.337

由于您关闭了服务器上文件的所有解释，因此只剩下文件名。如果您生成自己的名称或过滤用户提供的名称，则无需担心。

嗯..几乎没有。GD 库中可能存在安全错误，因此使用恶意图像可能会在调整大小时做坏事。但这不是您可以通过 PHP 处理的，因此请保持服务器更新。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-30T22:52:35.270

如果您不介意使用现有的 PHP 上传系统，那么这个 jQuery/PHP 上传框架非常可配置且令人惊叹。

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)****

# c# - 使用 XNA 绘制精灵会导致图片背景中的白色像素也被渲染

> ID：14434518
> 
> 赞同：1
> 
> 时间：2013-01-21T08:02:13.593
> 
> 标签：c#, xna

每当我使用 XNA 框架加载精灵（png 文件）时，都会在精灵后面产生一个白色矩形。我如何过滤掉这个？我的代码如下

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);
    spriteBatch.Begin();
    spriteBatch.Draw(MySprite, MySpritePosition, Color.White);
    spriteBatch.End();
    base.Draw(gameTime);
} 
```

![图片](../Images/8ffa96ae7aca76a69c932260dd9be121.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:06:18.517

这可能是由于图像本身具有白色背景。尝试使用透明背景重新保存它。

**编辑**

您发布的图像显示背景实际上是白色而不是透明。更改这取决于您用于绘制图像的工具。尝试用谷歌`<<your tool name>>`制作透明背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:54:46.483

如果由于某种原因不能使其透明，您也可以使用 RGB 255、0、255 作为背景而不是白色。XNA 的 draw 方法将 255、0、255 过滤为“神奇”颜色。

# c# - 五秒钟后显示另一个窗口

> ID：14434520
> 
> 赞同：1
> 
> 时间：2013-01-21T08:02:21.933
> 
> 标签：c#, wpf, timer

我想做一个这样的WPF程序：运行程序时，主窗口显示，五秒钟后，另一个窗口显示。我怎样才能实现它？我看过计时器，但我做不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T08:09:58.920

感谢@Kshitij Mehta 提供有关 DispatcherTimer 的指针。

在你的`MainWindow`，定义一个[DispatcherTimer并像这样在](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)[Tick](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.tick.aspx)上弹出另一个窗口-

```
 DispatcherTimer timer = null;
    void StartTimer()
    {
        timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(5);
        timer.Tick += new EventHandler(timer_Elapsed);
        timer.Start();
    }

    void timer_Elapsed(object sender, EventArgs e)
    {
        timer.Stop();

        AnotherWindow window = new AnotherWindow();
        window.Show();
    } 
```

调用`StartTimer()`你的`MainWindow`构造函数。

```
 public MainWindow
    {
        InitializeComponent();
        StartTimer();
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T08:15:21.173

您想为此使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28VS.95%29.aspx)。Prateek Singh 几乎做对了。我只是将他的 Timer 更改为 DispatcherTimer 以便它在 UI 线程上运行。

# android - 如果我触摸设备屏幕，为什么在更改按钮文本时我的应用程序会在设备上崩溃？

> ID：14434525
> 
> 赞同：0
> 
> 时间：2013-01-21T08:02:39.330
> 
> 标签：android, eclipse

我添加到活动 java 文件中：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    Button p1_button = (Button)findViewById(R.id.mybutton);
    p1_button.setText("Some text");
    return super.onTouchEvent(event);
} 
```

一旦我添加了这个：

```
Button p1_button = (Button)findViewById(R.id.mybutton);
p1_button.setText("Some text"); 
```

当我触摸设备上的屏幕时应用程序崩溃。如果我在触摸我的设备上的屏幕时删除这两条线将不会做任何事情，但也不会崩溃。

这是添加按钮的主要 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<FrameLayout
    android:id="@+id/videoview" 
    android:layout_width="720px"
    android:layout_height="480px"/>
<Button
    android:id="@+id/mybutton" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="REC"
    android:textSize="12dp"/>
</LinearLayout>
</LinearLayout> 
```

我想这样做，当我触摸设备上的屏幕时，它会更改按钮文本。我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:03:48.447

因为该按钮在此上下文中不存在，所以您试图找到它。在您的班级中定义按钮`static`并在`onCreate`

```
static Button p1_button;

...

protected void onCreate(...){
 ....
p1_button =(Button)findViewById(R.id.mybutton);
} 
```

然后使用`p1_button`变量中的`onTouchEvent`

**或者**

你可以通过`onTouchEvent`类似的活动

```
final Activity activity = this; 
```

进而

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    Button p1_button = (Button)activity.findViewById(R.id.mybutton);
    p1_button.setText("Some text");
    return super.onTouchEvent(event);
} 
```

# javascript - 将 HTML5 画布详细信息保存到 MySql

> ID：14434526
> 
> 赞同：0
> 
> 时间：2013-01-21T08:03:05.833
> 
> 标签：javascript, html, html5-canvas

我是 HTML5 新手，我只想知道如何保存画布数据（我在画布上画了一个正方形）。我想在数据库中保存 x、y、h、w 或缩放并使用该数据重新创建绘图。我怎样才能做到这一点 ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:15:48.480

好吧，您可以将它们存储到 mysql 数据库或服务器文件中。

在 mysql 的情况下，使用您想要的列甚至 1 列创建一个名为实体的表，并序列化您要存储的数据。

例如

```
id | x | y | h | w | scale
1    4   4   4   4    0.5 
```

或者

```
$object_cube = array();
$object_bube['x'] = 4;
$object_bube['y'] = 4;
$object_bube['h'] = 4;
$object_bube['w'] = 4;
$object_bube['s'] = 0.5; 
```

然后序列化并创建您的 PDO 查询

```
$host =     "localhost";
$user =     "someuser";
$pass =     "somepass";
$database = "db_name";

$db = new PDO("mysql:host=$host;dbname=$database", $user, $pass,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")) or die("Connection error!");
$ser_obj = serialize($object_cube);
$query = "INSERT INTO entities ('cube') VALUES (:object)";
$params = array(':object' => $ser_obj );
db_query($query, $params);

function db_query($q,$p = array())
{
    global $db;

    if($stmt = $db->prepare($query))
    {

        if(count($p) > 0)
        {
            foreach ($p as $key => $value) {
                $stmt->bindParam($key,$value);
            }
        }

        $stmt->execute();

    }

} 
```

这应该负责保存，这取决于您在需要时通过挖掘数据库来加载您想要的内容:)

您必须熟悉 AJAX -> [http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp) 和一些服务器端语言，如 php 或 asp。否则，您可以将其存储在本地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:13:28.470

为了访问服务器上的数据库，您需要一个服务器端应用程序，该应用程序从用户 Web 浏览器接收数据，然后将其发送到数据库。

客户端和服务器之间的通信可以使用[XmlHttpRequest](http://www.w3.org/TR/XMLHttpRequest/)或[WebSockets](https://developer.mozilla.org/en/docs/WebSockets)来实现。

在服务器上运行的 Web 应用程序可以用 NodeJS、PHP、ASP.NET、JSP、Django、Ruby on Rails 或任何其他服务器端 Web 开发技术来实现。

或者，当您想在没有服务器端编程的情况下执行此操作时，您也可以将数据本地存储在用户[localStorage](http://diveintohtml5.info/storage.html)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:27:15.567

一种可能的解决方案是将所有对象数据存储在一个数组中并在将其发送到服务器之前对其进行序列化：

```
GraphicObjects = new Array();
GraphicObjects.push({
    x: 10,
    y: 10,
    w: 100,
    h: 200,
    scale: 0.5
}); // Write a function for adding new objects, that's just an example
$.post('urlToPostTo', data: GraphicObjects.stringify()); 
```

稍后检索 JSON 数据以重绘您的图像。

# node.js - 同步 NodeJs（或其他服务器端 JS）调用

> ID：14434527
> 
> 赞同：0
> 
> 时间：2013-01-21T08:03:07.607
> 
> 标签：node.js

我们使用 Node 进行开发，95% 的代码是异步的，运行良好。

对于大约 5%（一个小模块），本质上是同步的 [并且依赖于其他第三方软件]，

我们正在寻找 1.“在回调完成之前阻塞的代码” 2\. 一次只应该执行一个 function1 的实例 + 它的回调。

PS 1：我完全同意，Node 用于异步工作，我们应该避免这种情况，但这是单独的非实时过程。

PS 2：如果不使用 Node 任何其他服务器端 JS 框架？最后一个选择是使用其他语言，如 python，但如果 JS 有任何可能，我们准备试一试！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:52:24.277

[SEQ](https://github.com/substack/node-seq)应该可以解决您的问题。

有关同步模块的概述，请查看[http://nodejsrocks.blogspot.de/2012/05/how-to-avoid-nodejs-spaghetti-code-with.html](http://nodejsrocks.blogspot.de/2012/05/how-to-avoid-nodejs-spaghetti-code-with.html)

```
Seq()
 .seq(function () {
   mysql.query("select * from foo",[], function(err,rows,fields) {

        this(null, rows);
   });
 })
 .seq(function(mysqlResult) {
     console.log("mysql callback returnes:"+mysqlResult);
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:07:37.207

有很多很多的选项，看看[node-async](https://github.com/caolan/async)、[kaffeine](http://weepy.github.com/kaffeine/docs/unwrapping_async_calls.html)异步支持、[IcedCoffeescript](http://maxtaco.github.com/coffee-script/)等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T23:52:08.453

我想为[IcedCoffeeScript](http://maxtaco.github.io/coffee-script)做一个插件，因为我是它的维护者。您可以使用 Seq 之类的解决方案，但通常您会使用函数调用对控制流进行编码。我发现这种方法很难编写和维护。IcedCoffeeScript 使简单的顺序操作变得轻而易举：

```
console.log "hello, just wait a sec"
await setTimeout defer(), 100
console.log "ok, what did you want" 
```

但更重要的是，它处理异步代码和标准控制流的任意组合：

```
console.log "Let me check..."
if isRunningLate()
  console.log "Can't stop now, sorry!"
else
  await setTimeout defer(), 1000
  console.log "happy to wait, now what did you want?"
resumeWhatIWasDoingBefore() 
```

循环也很好用，这里是串行调度：

```
for i in [0...10]
   await launchRpc defer res[i]
done() 
```

这是并行调度：

```
await
   for i in [0...10]
      launchRpc defer res[i]
done() 
```

ICS 不仅使异步代码的顺序链更流畅，还鼓励您尽可能多地并行执行。如果您需要更改您的代码或您的并发要求，更改是最小的，而不是完全重写（就像在标准 JS/CS 或一些并发库中那样）。

# css - 子 div 周围的 CSS div 边框

> ID：14434529
> 
> 赞同：2
> 
> 时间：2013-01-21T08:03:11.683
> 
> 标签：css, html

1.  我有一个容器 div，其中包含 3 个 div。
2.  当我为容器 div 写边框：1px 纯红色时，边框仅显示在这 3 个子 div 的顶部，但不在它们周围。
3.  下面是css代码。

    ```
    #cont {
        width:800px;
        margin-right:auto;
        margin-left:auto; 
        border:1px dashed red;
        padding:2px;
    }
    #third, #second, #first {
        width:260px;
        float:left;
        margin:2px;
    } 
    ```

html代码：

```
![<div id="cont">
<div id="third"><p>A demo text </p></br>
<p>A demo text </p></br>
<p>A demo text </p></br>
<p>A demo text </p></br>
</div>

<div id="second"><p>A demo text </p></br>
<p>A demo text </p></br>
<p>A demo text </p></br>
<p>A demo text </p></br>
</div>

<div id="third"><p>A demo text </p></br>
<p>A demo text </p></br>
<p>A demo text </p></br>
<p>A demo text </p></br>
</div>
</div>][1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:05:47.643

添加溢出：隐藏；

```
#cont {width:800px;margin-right:auto;margin-left:auto; border:1px dashed red;padding:2px; overflow:hidden;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:09:01.057

add overflow:hidden to the #cont element

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:06:07.620

`<div style="clear:both;float:none;"></div>`很好地解决你的问题。将其添加到 div 下

# php - Codeigniter：访问视图中的数组

> ID：14434530
> 
> 赞同：0
> 
> 时间：2013-01-21T08:03:13.533
> 
> 标签：php, codeigniter

我在 codigniter 中是全新的我刚开始的一天前一天我遇到了问题这是我的控制器代码片段

```
 $allcalldetails_array = array(
                        'id' => $row->id,
                        'customer_id' => $row->customer_id
        );

        $this->session->set_userdata('logged',$allcalldetails_array); 
```

我想`$allcalldetails_array` 在我的观点中迭代请告诉我这样做的方法

我尝试迭代`logged` 但无法得到任何东西。

如果我在我的视图中打印数组，`print_r($allcalldetails_array);` 但这也让我失望。请帮助我回到正轨。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:10:24.003

要从会话中获取数据，您需要执行以下操作：

```
// controller logic
$logged = $data['logged_for_view'] = $this->session->userdata('logged'); // since 'logged' is the name you set it to
// more controller logic
$this->load->view('view_name', $data);

// in view
var_dump($logged_for_view); // this is the key of the $data variable you assigned for the view 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:14:05.350

如果您希望将数据作为变量发送到您的视图，您应该将相应的数据添加到您的视图负载中。控制器：

```
$logged = $this->session->userdata('logged');
$this->load->view('viewfile', $logged); 
```

看法

```
print "logged id:".$id; 
```

最好的祝福。乔纳斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:42:18.620

不需要通过控制器解析会话变量，直接在视图上访问它：

```
$logged = $this->session->userdata('logged');
print_r($logged); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:59:37.587

关于[CodeIgniter 的文档](http://ellislab.com/codeigniter/user-guide/general/views.html)：

> 数据通过视图加载函数的第二个参数中的数组或对象从控制器传递到视图。

然后你可以使用类似的东西：

```
// Controller side

$data['allcalldetails_array'] = array(
    'id' => $row->id,
    'customer_id' => $row->customer_id
);
$this->load->view('your_view', $data);

// View side

print_r($allcalldetails_array);

// Loop through your array
foreach ($allcalldetails_array as $detail){
    // Do something with your $detail.
} 
```

# java - 使用Java快速开发WEB应用程序的框架

> ID：14434534
> 
> 赞同：-4
> 
> 时间：2013-01-21T08:03:32.870
> 
> 标签：java, web-applications

市场上有很多可用的框架，但是应该使用哪个框架来快速开发 Java Web 应用程序？

除此之外，许多人更喜欢框架和 JS 库的组合，例如 gwt/jquery+spring+hibernate；但是哪种组合可以提供良好的 Web 应用程序性能以及更少的 Web 应用程序开发时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:13:32.763

就我而言，最好的 J2EE 框架是

1.Spring作为应用开发框架

1.  ORM 休眠

2.  Struts for View

我们必须记住的主要事情是，作为一名 IT 专业人员，不依赖于任何框架。您可能需要在您真的不知道的框架上工作。但是掌握了基本的 Java 概念，这使我们可以适用于任何 J2EE 框架

# php - 强制 CodeIgniter 显示 404 页面而不是任何其他错误，如 1064

> ID：14434537
> 
> 赞同：8
> 
> 时间：2013-01-21T08:03:49.650
> 
> 标签：php, mysql, codeigniter, http-status-code-404

如何替换错误页面，例如

```
A Database Error Occurred

Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL     server version for the right syntax to use near 'order by rand()' at line 1 
```

使用我网站的默认 404 错误页面？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T11:25:58.483

您可以使用该方法强制 404

```
show_404(); 
```

这将在您需要时显示 404。在您的情况下，只需抓住您的错误并使用此功能。

或者您可以设置自定义错误处理程序，记录它并显示 404，我认为我不建议这样做。

# event-handling - Word 2007 多个 BeforeClose 事件处理

> ID：14434538
> 
> 赞同：0
> 
> 时间：2013-01-21T08:03:49.947
> 
> 标签：event-handling, add-in, office-2007, word-2007

我在 windows 7 平台上安装了 office 2007。在 Word 应用程序中存在我们供应商的加载项，它捕获 BeforeClose 文档事件并在退出前询问客户问题。现在，我开发了我的自定义加载项，它也捕获 BeforeClose 文档事件并执行一些操作。 **问题是**：我如何控制，哪个“捕捉”将首先执行，哪个第二？我需要我的加载项首先工作，供应商代码将在我之后工作，然后文档网络将关闭。

非常感谢，米洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:44:10.177

我唯一能看到的是插件的加载顺序。您可能需要“命名”您的插件文件，以便它首先加载（不确定是否有其他方法），然后检查它是否首先在您的所有系统配置上有效触发。

# iphone - 一年中的今天

> ID：14434543
> 
> 赞同：-3
> 
> 时间：2013-01-21T08:04:07.123
> 
> 标签：iphone, ios, objective-c, nsdate, nscalendar

> **可能重复：**
> [您如何计算目标 C 中特定日期的一年中的哪一天](https://stackoverflow.com/questions/2080927/how-do-you-calculate-the-day-of-the-year-for-a-specific-date-in-objective-c)

我正在寻找一种方法来查找本年度过去的日期。例如，如果今天是 2013-03-22 ，那么数字应该是 81，因为 2013 年已经过去了 81 天。不管是不是闰年。

因此，如果有人有一些链接甚至是如何做到这一点的方法，请与我分享。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:10:18.153

Try this:

```
NSCalendar *currentCalendar = [NSCalendar currentCalendar];
NSDate *today = [NSDate date];
NSInteger dc = [currentCalendar  ordinalityOfUnit:NSDayCalendarUnit
                                                  inUnit:NSYearCalendarUnit
                                                 forDate:today];

```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-21T08:08:27.830

你可以通过

```
NSDate *date1 = [NSDate dateWithString:@"2010-01-01 00:00:00 +0000"];
NSDate *date2 = Your END Date / Today's date may be;

NSTimeInterval secondsBetween = [date2 timeIntervalSinceDate:date1];

int numberOfDays = secondsBetween / 86400;

NSLog(@"No of days passed since new year.", numberOfDays); 
```

# bash - 如何在文本文件中扩展 shell 变量？

> ID：14434549
> 
> 赞同：26
> 
> 时间：2013-01-21T08:04:55.270
> 
> 标签：bash, shell, unix, solaris, ksh

考虑一个 ASCII 文本文件（假设它包含非 shell 脚本语言的代码）：

**文本文件.msh：**

```
spool on to '$LOG_FILE_PATH/logfile.log';
login 'username' 'password';
.... 
```

现在，如果这是一个 shell 脚本，我可以运行它，`$ sh Text_File.msh`并且 shell 会自动扩展变量。我想要做的是让 shell 扩展这些变量，然后创建一个新文件，`Text_File_expanded.msh`如下所示：

**Text_File_expanded.msh：**

```
spool on to '/expanded/path/of/the/log/file/../logfile.log';
login 'username' 'password';
.... 
```

* * *

考虑：

```
$ a=123
$ echo "$a"
123 
```

所以从技术上讲，这应该可以解决问题：

```
$ echo "`cat Text_File.msh`" > Text_File_expanded.msh 
```

...但它没有按预期工作，并且输出文件与源文件相同。

所以我不确定如何实现这一点。我的目标是更容易维护嵌入在我的非 shell 脚本中的目录路径。*这些脚本不能包含任何 UNIX 代码，因为它不是由 UNIX shell 编译的。*

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-10-02T18:19:52.553

这个问题已在另一个线程中提出，这是 IMO 的最佳答案：

```
export LOG_FILE_PATH=/expanded/path/of/the/log/file/../logfile.log
cat Text_File.msh | envsubst > Text_File_expanded.msh 
```

如果在 Mac 上，请先安装`gettext`：`brew install gettext`

请参阅： [强制 bash 扩展从文件加载的字符串中的变量](https://stackoverflow.com/questions/10683349/forcing-bash-to-expand-variables-in-a-string-loaded-from-a-file?answertab=active#tab-top)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T08:23:44.783

这个解决方案并不优雅，但它确实有效。创建一个脚本调用 shell_expansion.sh：

```
echo 'cat <<END_OF_TEXT' >  temp.sh
cat "$1"                 >> temp.sh
echo 'END_OF_TEXT'       >> temp.sh
bash temp.sh >> "$2"
rm temp.sh 
```

然后，您可以按如下方式调用此脚本：

```
bash shell_expansion.sh Text_File.msh Text_File_expanded.msh 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-14T17:28:16.453

如果你想要它在一行中（我不是 bash 专家，所以可能有一些警告，但它在我尝试过的任何地方都有效）：

当 test.txt 包含

```
${line1}
${line2} 
```

然后：

```
>line1=fark
>line2=fork
>value=$(eval "echo \"$(cat test.txt)\"")
>echo "$value"
line1 says fark
line2 says fork 
```

显然，如果您只想打印它，您可以取出额外的`value=$()`和`echo "$value"`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-21T08:24:25.080

如果 Perl 解决方案适合您：

示例文件：

```
$ cat file.sh
spool on to '$HOME/logfile.log';
login 'username' 'password'; 
```

解决方案：

```
$ perl -pe 's/\$(\w+)/$ENV{$1}/g' file.sh
spool on to '/home/user/logfile.log';
login 'username' 'password'; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-07-04T05:21:06.497

上述答案的一个限制是它们都需要将变量导出到环境中。这是我想出的，它允许变量在当前 shell 脚本中是本地的：

```
#!/bin/sh
FOO=bar;
FILE=`mktemp`; # Let the shell create a temporary file
trap 'rm -f $FILE' 0 1 2 3 15;   # Clean up the temporary file 

(
  echo 'cat <<END_OF_TEXT'
  cat "$@"
  echo 'END_OF_TEXT'
) > $FILE
. $FILE 
```

`$FOO`上面的示例允许在命令行命名的文件中替换变量。我确信它可以改进，但到目前为止这对我有用。

感谢他们之前的两个答案的想法！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-23T16:59:37.600

如果您要翻译的变量已知且数量有限，则您始终可以自己进行翻译：

```
sed "s/\$LOG_FILE_PATH/$LOG_FILE_PATH/g" input > output 
```

并且还假设变量本身是已知的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-24T12:10:28.817

此解决方案允许您在输出文件中保持相同的格式

在脚本中复制并粘贴以下行

```
cat $1 | while read line
do
  eval $line
  echo $line
  eval echo $line
done | uniq | grep -v '\$' 
```

这将逐行读取作为参数传递的文件，然后尝试打印每行两次： - 一次不替换 - 一次替换变量。然后删除重复的行然后删除包含可见变量（$）的行

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-31T17:13:49.390

创建一个包含以下内容的 ascii 文件 test.txt：

```
Try to replace this ${myTestVariable1} 
bla bla
.... 
```

现在创建一个包含变量名称的文件“sub.sed”，例如

```
's,${myTestVariable1},'"${myTestVariable1}"',g;
s,${myTestVariable2},'"${myTestVariable2}"',g;
s,${myTestVariable3},'"${myTestVariable3}"',g;
s,${myTestVariable4},'"${myTestVariable4}"',g' 
```

打开终端移动到包含 test.txt 和 sub.sed 的文件夹。
定义要替换的变量的值

```
myTestVariable1=SomeNewText 
```

现在调用 sed 替换该变量

```
sed "$(eval echo $(cat sub.sed))" test.txt > test2.txt 
```

输出将是

```
$cat test2.txt

Try to replace this SomeNewText 
bla bla
.... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-21T00:15:19.760

是的*eval*应该小心使用，但它为我的问题提供了这个简单的 oneliner。以下是使用您的文件名的示例：

```
eval "echo \"$(<Text_File.msh)\"" 
```

我出于自己的目的使用*printf*而不是*echo ，但这应该可以解决问题。*谢谢 abyss.7 提供解决我问题的链接。希望能帮助到你。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-14T19:01:34.797

#logfiles.list：

```
$EAMSROOT/var/log/LinuxOSAgent.log
$EAMSROOT/var/log/PanacesServer.log
$EAMSROOT/var/log/PanacesStrutsGUI.log 
```

#我的程序：

```
cat logfiles.list | while read line
    do
        eval Eline=$line
        echo $Eline
    done 
```

# magento - 覆盖 Magento 小计并在管理员发票电子邮件中添加新行

> ID：14434550
> 
> 赞同：3
> 
> 时间：2013-01-21T08:04:56.307
> 
> 标签：magento

我想在 Magento 发票电子邮件中的小计之后添加新行。谁能指出我要重写发票电子邮件的哪个核心文件？

我试图在小计后添加发票电子邮件新行的 Magento Core 文件中的文件，但我不知道 Magento Core 文件夹中的正确路径和文件名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T07:34:17.307

您正在寻找总计块。请查看本文底部的链接，其中提供了有关如何扩展和添加您自己的选项的示例

基本上，您必须向 magento 表明，在某些类型中，如报价单、发票……您想要添加“总计”项目，您可以像示例中那样给出位置：

```
<global>
        <sales>
            <quote>
                <totals>
                    <yourcompany_yourmodule>
                        <class>company_module/path_to_class</class>
                        <after>subtotal</after>
                        <before>tax</before>
                    </yourcompany_yourmodule>
                </totals>
            </quote>
            <order_invoice>
                <totals>
                    <yourcompany_yourmodule>
                        <class>company_module/path_to_class</class>
                        <after>subtotal</after>
                        <before>tax</before>
                    </yourcompany_yourmodule>
                </totals>
            </order_invoice>
            <order_creditmemo>
                <totals>
                    <yourcompany_yourmodule>
                        <class>company_module/path_to_class</class>
                        <after>subtotal</after>
                        <before>tax</before>
                    </yourcompany_yourmodule>
                </totals>
            </order_creditmemo>
        </sales>
    </global> 
```

比你必须创建正确的类并从想要的类扩展。

更多信息和步骤：[http ://turnkeye.com/blog/magento-development-add-total-row-checkout/](http://turnkeye.com/blog/magento-development-add-total-row-checkout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:24:33.347

我已经使用以下重写规则重写了发票电子邮件小计并在小计之后添加了 ned 行

```
 <blocks>
            <sales>
            <rewrite>
                <order_invoice_totals>Companyname_Modulename_Block_Sales_Order_Invoice_Totals</order_invoice_totals>
            </rewrite>
            </sales>
</blocks> 
```

并在下面的路径中重写小计

```
<?php 
class Companyname_Modulename_Block_Sales_Order_Invoice_Totals extends Mage_Sales_Block_Order_Invoice_Totals
{
    protected function _initTotals()
    {
            parent::_initTotals();

            //Your Code Logic Here

            return $this;
    }
} 
```

# javascript - 如何在html正文中打印var值

> ID：14434552
> 
> 赞同：-1
> 
> 时间：2013-01-21T08:05:07.113
> 
> 标签：javascript, html

我正在使用以下代码在 html 正文中打印文本我希望我有 var 其值 hello 它应该与正文文本连接以显示 hi hello。

```
 $("#commandEmail1").click(function() {

presenter.command("emailSend",{
    "toEmail": "jani_06sw@yahoo.com",
    "toName": "Jani",
    "subject": "email test",
    "body": "Single Attachment",
    "bodyHtml":" Hi",
    "attachments": [""]
}, status);
return false;
    }); 
```

我希望 hello 应该与 Hi like Hi hello 那么我如何将该 var 连接到此函数。

这是js链接

[http://collabedit.com/49grk](http://collabedit.com/49grk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:08:13.477

我不确定我是否完全理解您要接受的内容，但是要在 javascript 中将一个变量连接到另一个变量，您使用 + 运算符

```
eg. "bodyHtml":" Hi" + helloVar, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:08:27.403

```
$("#commandEmail1").click(function() {

   var extra_text = "hello";                 // your extra text

   presenter.command("emailSend",{
      "toEmail"     : "jani_06sw@yahoo.com",
      "toName"      : "Jani",
      "subject"     : "email test",
      "body"        : "Single Attachment",
      "bodyHtml"    : "Hi " + extra_text,    // concatentate with `+` operator
      "attachments" : [""]
   }, status);

   return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:21:15.523

因此，假设您有一个 Elemen，您想要将文本连接到，并且在单击它时会触发一个函数。然后应该将对象的属性连接到元素。

鉴于此 HTML

```
 <div id="myDiv">Hello</div>  
  <div id="clickMe">Click Me</div> 
```

和下面的例子

```
var myObject = {
  propToConcat:"Hi" //This is the property you want to be concatenated
};

var clickElement = document.getElementById("clickMe"); //This is your Element, the Click event is added to

var concatElement = document.getElementById("myDiv"); //This is the Element where you display the Text;

clickElement.addEventListener("click",concat); //THis adds the EventListener *You use Jquerys '.click' method for this* 

function concat () {
  concatElement.innerHTML += " " + myObject.propToConcat; //This is what you looking for.
} 
```

因此，该行`concatElement.innerHTML += " " + myObject.propToConcat;` 访问`innerHTML`您的 DOM 元素的属性，并附加一个空格和您的对象属性。

那么这就是输出之前的样子

![在此处输入图像描述](../Images/8bbe08b00b14735071cccc23f0855b20.png)

之后

![在此处输入图像描述](../Images/3b01304772f24204070181718bc4f9de.png)

我希望你理解这个例子，因为我没有得到你正在使用你的代码的上下文。

这是一个[JSBin](http://jsbin.com/equvuv/1/edit)

# android - 无法在 Popupwindow 内为 Edittext 视图输入文本？

> ID：14434553
> 
> 赞同：3
> 
> 时间：2013-01-21T08:05:11.560
> 
> 标签：android, android-edittext, popupwindow, android-dialog

我想从软键盘输入文本到弹出窗口内的 Edittext 小部件，但我遇到了一些问题。我的活动是一张游戏卡桌，并在上面启用一些动画。在游戏表中，有一些按钮。如果玩家点击某个按钮，将显示一个弹出窗口。问题是播放器无法在弹出窗口内向 Edittext 输入文本。我发现了一些类似的问题，最流行的建议是：

```
Popupwindow.setFocusable(true) 
```

使用此设置，我可以正常输入到 Edittext。但是，这会阻塞主 UI 线程并导致游戏表中的动画停止。我不希望这种情况发生，因为它不利于用户体验。当 edittext 使用下面的代码片段获得焦点时，可以显示软键盘。但是，我无法输入从键盘到编辑文本的任何内容。此外，当我关闭弹出窗口时，键盘仍然显示而不关闭。

```
editText.setOnFocusChangeListener(new OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if(hasFocus){
                    InputMethodManager imm = (InputMethodManager)ct.getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
                    imm.showSoftInput(v, InputMethodManager.SHOW_IMPLICIT);
                }
            }
        }); 
```

请帮助我找到在不阻塞 mainUI 线程中的动画的情况下将数据输入到 Edittext 的方法。另一种方法是使用自定义对话框，但它没有帮助。使用对话框也会导致阻塞 mainUI 线程。非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:48:18.493

如果您不想阻止 UI，请尝试在线程下运行这部分代码。AsyncTask 将是一个不错的选择。

在此处查看如何使用 AsyncTask :-> [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

祝你好运

# eclipse - 通过属性文件的插件启动级别

> ID：14434567
> 
> 赞同：0
> 
> 时间：2013-01-21T08:06:13.477
> 
> 标签：eclipse, eclipse-plugin

我们如何通过一些属性文件来设置插件启动级别？这个起始水平有多稳定？能保证启动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:44:18.837

您可以使用产品文件更改统计级别，转到产品文件下的配置选项卡并添加设置插件启动级别。内部覆盖配置文件夹中的 config.ini 文件

* * *

" autoStart="true" startLevel="4" /> ... ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:50:56.473

我发现了。我们可以在 eclipse 安装的配置文件夹中的 config.ini 文件中设置它。在那里我们需要添加/更改以下行：

```
 osgi.bundles.defaultStartLevel=4 
```

# php - Codeigniter 生产环境显示错误

> ID：14434571
> 
> 赞同：1
> 
> 时间：2013-01-21T08:06:29.480
> 
> 标签：php, codeigniter

在我的生产服务器上，我在 Codigniter 的 index.php 文件中将环境设置为“生产”：

`define('ENVIRONMENT', 'production');`

下面的 case 语句看起来也在做正确的事情（我没有改变它）。

但是仍然显示 PHP 错误，例如：

```
A Database Error Occurred
Error Number: 1054
Unknown column 'laassad' in 'field list'
SELECT laassad FROM contents LIMIT 1
Filename: /home/something/public_html/mysite/somemorestuff.php
Line Number: 11 
```

这显然没有吸引力，并且存在安全风险。有谁知道可能导致这种行为的原因以及我如何解决它？

我正在使用“CI_VERSION”、“2.1.2”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:19:05.820

Defining your environment as production only suppresses PHP errors - this is a DB error.

See this thread for answer: [How to turn off mysql errors from being displayed to screen in CodeIgniter](https://stackoverflow.com/questions/288559/how-to-turn-off-mysql-errors-from-being-displayed-to-screen-in-codeigniter)

# android - 读取 NFC 标签和返回按钮

> ID：14434572
> 
> 赞同：0
> 
> 时间：2013-01-21T08:06:32.543
> 
> 标签：android, nfc

我的问题与后退按钮和后台堆栈有关，我有一个用于读取 nfc 标签的应用程序，所以我启动了 Activity A，然后转到 Activity B，它在清单中声明为 SingleTop。我将手机靠近标签，它会读取标签，此时一切正常。

如果我按下后退按钮，它将返回到活动 B，而不是转到活动 A，然后如果我再次按下后退按钮，它会转到活动 A。

像这样：

A->B->阅读标签->B->按返回按钮->B->按返回按钮->A->按返回按钮->关闭应用程序。

我想要这样：

A->B->阅读标签->B->按返回按钮-> A->按返回按钮->关闭应用程序。

我只想要 B 的一个实例。我尝试了单个任务，但问题是我点击了应用程序图标，并启动了活动 b，但保留了读取标签的意图。

```
public class B extends Activity {
private static final String KINVEY_KEY = YOUR_APP_KEY;
private static final String KINVEY_SECRET_KEY = 'YOUR_APP_SECRET_KEY';

private KCSClient kinveyClient;
private NfcAdapter mNfcAdapter;

private Button mEnableWriteButton;
private EditText mTextField;
private ProgressBar mProgressBar;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tags);

    mTextField = (EditText) findViewById(R.id.text_field);

    mProgressBar = (ProgressBar) findViewById(R.id.progress_bar);
    mProgressBar.setVisibility(View.GONE);

    mEnableWriteButton = (Button) findViewById(R.id.enable_write_button);
    mEnableWriteButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            setTagWriteReady(!isWriteReady);
            mProgressBar.setVisibility(isWriteReady ? View.VISIBLE : View.GONE);
        }
    });

    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
    if (mNfcAdapter == null) {
        Toast.makeText(this, 'Sorry, NFC is not available on this device', Toast.LENGTH_SHORT).show();
        finish();
    }

    // Initialize Kinvey
    KinveySettings settings = new KinveySettings(KINVEY_KEY, KINVEY_SECRET_KEY);
    kinveyClient = KCSClient.getInstance(this.getApplicationContext(), settings);
}

private boolean isWriteReady = false;

public void setTagWriteReady(boolean isWriteReady) {
    this.isWriteReady = isWriteReady;
    if (isWriteReady) {
        IntentFilter[] writeTagFilters = new IntentFilter[] { new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED) };
        mNfcAdapter.enableForegroundDispatch(TagsActivity.this, NfcUtils.getPendingIntent(TagsActivity.this),
                writeTagFilters, null);
    } else {
        // Disable dispatch if not writing tags
        mNfcAdapter.disableForegroundDispatch(TagsActivity.this);
    }
    mProgressBar.setVisibility(isWriteReady ? View.VISIBLE : View.GONE);
}

@Override
public void onNewIntent(Intent intent) {
    // onResume gets called after this to handle the intent
    setIntent(intent);
}

@Override
public void onResume() {
    super.onResume();
    if (isWriteReady && NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {
        processWriteIntent(getIntent());
    } else if (!isWriteReady
            && (NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction()) || NfcAdapter.ACTION_NDEF_DISCOVERED
                    .equals(getIntent().getAction()))) {
        processReadIntent(getIntent());
    }
}

private static final String MIME_TYPE = 'application/com.tapped.nfc.tag';

public void processWriteIntent(Intent intent) {
    if (isWriteReady && NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {

        Tag detectedTag = getIntent().getParcelableExtra(NfcAdapter.EXTRA_TAG);

        String tagWriteMessage = mTextField.getText().toString();
        byte[] payload = new String(tagWriteMessage).getBytes();

        if (detectedTag != null && NfcUtils.writeTag(
                NfcUtils.createMessage(MIME_TYPE, payload), detectedTag)) {

            Toast.makeText(this, "Wrote '" + tagWriteMessage + "' to a tag!", 
                    Toast.LENGTH_LONG).show();
            setTagWriteReady(false);
        } else {
            Toast.makeText(this, "Write failed. Please try again.", Toast.LENGTH_LONG).show();
        }
    }
}

public void processReadIntent(Intent intent) {
    List<NdefMessage> intentMessages = NfcUtils.getMessagesFromIntent(intent);
    List<String> payloadStrings = new ArrayList<String>(intentMessages.size());

    for (NdefMessage message : intentMessages) {
        for (NdefRecord record : message.getRecords()) {
            byte[] payload = record.getPayload();
            String payloadString = new String(payload);

            if (!TextUtils.isEmpty(payloadString))
                payloadStrings.add(payloadString);
        }
    }

    if (!payloadStrings.isEmpty()) {
        String content =  TextUtils.join(",", payloadStrings);
        Toast.makeText(TagsActivity.this, "Read from tag: " + content,
                Toast.LENGTH_LONG).show();
        saveTag(content);
    }
}

private void saveTag(String tagMessage){
    TagReadEntity tag = new TagReadEntity(UUID.randomUUID().toString(), 
            tagMessage, System.currentTimeMillis());

    kinveyClient.mappeddata("tags").save(tag, new ScalarCallback<TagReadEntity>() {

        @Override
        public void onSuccess(TagReadEntity tag) {
            Log.i("NFC Demo", "Saved tag!");
        }

        @Override
        public void onFailure(Throwable e) {
            Log.e("NFC Demo", "Error saving tag", e);
        }
    });
}
} 
```

和清单：

```
<activity
        android:name=".TagsActivity"
        android:label="@string/title_activity_tags"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="application/com.tapped.nfc.tag" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="application/com.tapped.nfc.tag" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:04:32.600

我将任务声明为单任务，现在似乎可以工作了。

```
android:launchMode="singleTask" 
```

我尝试了标准，每次我读取一个 nfc 标签时，都会创建一个新活动，如果读取 10 个标签，我需要按 9 次后退按钮。在我尝试过 singleTop 之后，现在我从 A 到 B，然后无论我阅读标签多少次，只有 2 个 B 实例，所以我需要按一次返回到活动 B，然后再返回到关闭应用程序。

# reporting-services - SSRS 报告参数的奇怪行为

> ID：14434575
> 
> 赞同：1
> 
> 时间：2013-01-21T08:06:51.293
> 
> 标签：reporting-services, ssrs-2008, dynamics-ax-2012, multivalue, reportparameter

有没有其他人遇到过这个问题？我正在使用 Dynamics AX 2012 的开发工具在 SSRS 2008 中设计报表，我的报表中有多个数据集和参数，问题是当我对主数据集进行任何更改并刷新数据集时，我的一些报表参数**忘记****多值**选项，然后我必须为所有这些参数再次将多值设置为真。

这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:25:36.967

是的。我过去已经注意到这个问题。要避免此问题，您可以在报告代码中进行必要的更改（右键单击报告 -> 查看代码）。

# javascript - jsfiddle 在移动设备上的替代品？

> ID：14434578
> 
> 赞同：25
> 
> 时间：2013-01-21T08:07:00.827
> 
> 标签：javascript, jsfiddle

有没有类似jsfiddle的网站可以通过手机访问。我想要一个帮助 JavaScript/HTML/CSS 开发的网站/工具。当我在手机（nexus 4）上使用时，Jsfiddle 非常麻烦。

对在线或离线工具的任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T08:45:13.793

也许这个：http: [//jsbin.com/](http://jsbin.com/)

真的很简单很干净。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T08:11:56.117

试试[http://jsdo.it/](http://jsdo.it/)

它应该针对移动设备适当缩小。

# actionscript-3 - 寻求在 flex 4.5 netStream byteArray 中不起作用

> ID：14434579
> 
> 赞同：2
> 
> 时间：2013-01-21T08:07:02.720
> 
> 标签：actionscript-3, apache-flex, video, air, flex4.5

我正在尝试使用 netStream byteArray 在 flex 4.5 中播放 flv 视频文件。我在做什么如下：

1.  创建 netStream 和视频对象
2.  附加带有视频的 netStream
3.  读取 byteArray 中的 flv 文件
4.  使用“appendBytes”方法在 netStream 中附加 byteArray
5.  播放视频

在这种情况下，播放、暂停、停止功能可以很好地处理视频。

但是当我试图**在**视频中寻找时，它就不起作用了。

[您可以通过单击链接http://pastebin.com/fZp0mKDs](http://pastebin.com/fZp0mKDs)来遵循我正在执行的代码

谁能告诉我，我在哪里执行寻找错误。

任何代码示例或任何类型的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:13:11.273

我明白了，下面的代码适用于我的情况

```
// onmetadata function get all timestamp and corresponding fileposition..
function onMetaData(informationObject:Object):void 
{
    for (var propertyName:String in informationObject) 
    {
        if (propertyName == "keyframes")
        {
            var kfObject:Object = informationObject[propertyName];
            var timeArray:Array = kfObject["times"];
            var filePositionArray:Array = kfObject["filepositions"];

            for(var i:int=0;i<timeArray.length;i++)
            {
                var tagPosition:int = filePositionArray[i];//Read the tag size;
                var timestamp:Number = timeArray[i];//read the timestamp;
                tags.push({timestamp:timestamp,tagPosition:tagPosition});
            }
        }
    }
}

// onseek click get approximate timestamp and its fileposition
protected function seek_click(seektime:Number):void
{
    var currentTime:Number = 0;
    var previousTime:Number = 0;

    for (var i:int=1; i<tags.length; i++)
    {
        currentTime = tags[i].timestamp;
        previousTime = tags[i-1].timestamp;

        if(previousTime < seektime)
        {
            if(seektime < currentTime)
            {
                seekPos = tags[i-1].tagPosition;
                stream.seek(previousTime);
                break;
            }
        }
    }
}

// append bytes on seekposition
private function netStatusHandler(event:NetStatusEvent):void 
{
    switch (event.info.code) 
    {
        case "NetStream.Seek.Notify" :

        stream.appendBytesAction(NetStreamAppendBytesAction.RESET_SEEK);
        totalfilePositionArray.position = seekPos;

        var bytes:filePositionArray = new filePositionArray();

        totalfilePositionArray.readBytes(bytes);
        stream.appendBytes(bytes);

        stream.resume();

        break;
    }
} 
```

用于将元数据关键帧注入 flv 文件。使用一些注入器工具 fe。FLV 元数据注入器

[http://www.buraks.com/flvmdi/](http://www.buraks.com/flvmdi/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:59:13.913

I think there is a problem in seeking of byteArray constructed after reading file. Just play you netStream directly, it works:

```
var fileName:String = "dummy-video.flv";
ns.play(fileName); 
```

# silverlight - 参考文献错误

> ID：14434583
> 
> 赞同：0
> 
> 时间：2013-01-21T08:07:35.413
> 
> 标签：silverlight, reference, visual-studio-2012, windows-phone-8

这是我在引用几个 dll 后得到的错误图片，结束了我需要用于特定视图模型的类

![在此处输入图像描述](../Images/36c388f7d6dafa2649e32cb5d8ed12e1.png)

这是我在解决方案资源管理器中的引用选项卡的图片，所有这些引用都是我通过 Nuget 包管理器添加的。

![在此处输入图像描述](../Images/364dd7f972d5ad7d4f2f42293c624600.png)

我用谷歌搜索了它，每个答案都表明有人没有添加必要的参考，我添加了该项目运行所需的一切，有人可以指出我正确的方向吗？

我正在使用 Visual Studio 2012/Windows Phone 8 SDK/C#/Silverlight

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T13:25:51.133

您必须将它们导入鬃毛空间 Doing sone Using System.**.NewtonSoft 或使用 **..**Newtonsoft ...

# url - 加载后续页面时，网站 URL 不会更改

> ID：14434587
> 
> 赞同：0
> 
> 时间：2013-01-21T08:08:03.270
> 
> 标签：url, subdomain

我可以创建一个子域并将其与域名连接，但这里有一个问题，当在我的网站中打开任何页面时，我的网站 URL 不会改变。它与我的域名相同，但如果我用我的子域名打开我的网站，它会很好地工作。

这是我的网站检查它：

[www.testmydomainname.tk](http://www.testmydomainname.tk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:25:18.767

您的托管服务提供商将您的网站加载到[框架](http://www.w3schools.com/tags/tag_frameset.asp)集中，当您浏览网站页面时，只有当前框架 URL 发生变化，而不是父（顶部）框架。

例如，当您查看 www.testmydomainname.tk 站点的来源时：

```
<frameset rows="*">
    <frame frameborder=0 src="http://azelead.westlinkpk.com" name="dot_tk_frame_content" scrolling="auto" noresize>
</frameset> 
```

您的托管服务提供商可能会使用这种方法来投放广告，以支付“免费”域名的费用。

您可以通过将此标签放置在`<head>`您网站的所有页面中来解决此问题，以打破所有链接的框架，并使用您网站所在的原始 URL：

```
<base target="_top" /> 
```

# sql-server - 从命令提示符安装 SQL Server 2005

> ID：14434588
> 
> 赞同：0
> 
> 时间：2013-01-21T08:08:06.590
> 
> 标签：sql-server, sql-server-2005

我正在使用以下命令手动安装 SQL Server 2005。

```
H:\SQLServer\SQLExpr.exe /ADDLOCAL="All"/INSTANCENAME="SQLEXPRESS"/SAPWD="test123" 
```

它不会返回任何错误，但也不会真正安装 SQL Server。
首先它显示![在此处输入图像描述](../Images/24f26be20b6a85156678316189200c17.png)

当我单击下一步时，它会显示一个报告 ![在此处输入图像描述](../Images/99b049c2193da591df9da6074ebf51e2.png)

并单击确定，它会关闭。但是没有安装 SQL Server。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:10:02.580

A cursory glance of [the documentation](http://msdn.microsoft.com/en-us/library/ms144259(v=sql.90).aspx) suggests you need to specify at least one of `/qn` or `/qb` on the command line.

> The `/qn` switch suppresses all Setup dialog boxes and error messages. If the `/qn` switch is specified, all Setup messages, including error messages, are written to Setup log files. For more information about log files, see How to: View SQL Server 2005 Setup Log Files.
> 
> The `/qb` switch allows the display of basic Setup dialog boxes. Error messages are also displayed.

Although I've never had to install SQL Server from the command line before, it seems that simply by reading the documentation it is clear the easiest way to do this is with an options file:

> # To run a command prompt installation of SQL Server 2005 using an .ini file
> 
> Run `Setup.exe` from the command prompt:
> 
> ```
> <CD or DVD Drive>\Setup.exe /settings C:/set.ini /qn 
> ```

# codeigniter - 通过控制器的数据 - 在 CodeIgniter 中查看

> ID：14434589
> 
> 赞同：0
> 
> 时间：2013-01-21T08:08:11.887
> 
> 标签：codeigniter, view, controller

我的控制器中有这个片段代码：

```
// load model
$this->load->model('article');
$data['article'] = $this->article->get_data_article();

// add more array in data['article']
$data['article'][] = array( 'newcontent' => 'dummy string' );

 $this->load->view('index',$data); 
```

然后我有 2 个视图，第一个是 index.php：

```
$this->load->view('content',$article[0]); 
```

第二个视图是 content.php：

```
<?php echo $title;?> <br>
<?php echo $newcontent;?> 
```

我在上面的第二行有错误。错误信息是：

```
Severity: Notice
Message: Undefined variable: newcontent
Filename: views/content.php 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:56:44.073

这是正确的做法。

```
$data['article']['article1'] = array( 'newcontent' => 'dummy string' );
$data['article']['article2'] = $this->article->get_data_article(); 
```

并且在视图中

```
echo '<pre>';
print_R($article1);
echo '<pre>';
print_R($article2); 
```

现在可以访问了。数值数组会导致将数据传递给视图的问题。使用索引数组。

编辑：
您可以将其传递给像这样查看

```
$this->load->view('content',$data); 
```

现在在视图中你有 $article。

```
echo '<pre>';
print_R($article); 
```

如果您在文章提取（$article）上应用php提取；您将能够访问

```
echo '<pre>';
print_R($article1);    
echo '<pre>';
print_R($article2); 
```

但每一种方式都是做那个控制器

```
$data['article1'] = array( 'newcontent' => 'dummy string' );
$data['article2'] = $this->article->get_data_article(); 
```

传递给查看

```
$this->load->view('content',$data); 
```

并像这样访问

```
echo '<pre>';
print_r($article1);
echo '<pre>';
print_r($article2); 
```

无需提取

更多编辑：
你可以这样做

```
$result['article1'] = array( 'newcontent' => 'dummy string' );
$this->load->view('content',$result);
$result1['article2'] = $this->article->get_data_article();
$this->load->view('index',$result1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:20:57.067

你必须像这样显示，

```
echo $article[0]['newcontent']; 
```

因为您已将其创建为二维数组。

# javascript - 单击列表视图中的项目不运行 onclick

> ID：14434600
> 
> 赞同：0
> 
> 时间：2013-01-21T08:09:00.463
> 
> 标签：javascript, jquery, html, listview, href

我有一个列表视图`Jquery`。

单击每个项目将转到另一个页面：

这是列表：

我在**代码**中填写如下：

```
function FillList() {
    var UL= $('#MyList');
    for (var i = 0; i < 3; i++) {
        var newLI = document.createElement("LI");
        UL.append(newLI);
        newLI.innerHTML = '<a href="NewPage.html" data-transition="slide" 
                           onclick="DoSomething('+i+');" >
                               <p> item number:'+i+'</p>
                          </a>';

    }
    $('#MyList').slideDown('slow');
} 
```

DoSomthing 函数：

```
function DoSomething(numberLi)
{
  alert(numberLi);
} 
```

单击列表中的项目时，函数 DoSomething 不运行，

它**无需先输入功能 DoSomething 即可移动到另一个页面**

为什么？

**更新**：

即使代码看起来像这样：

```
 newLI.innerHTML = '<a href="NewPage.html" data-transition="slide" 
                           onclick="alert('aaa');" >
                               <p> item number:'+i+'</p>
                          </a>'; 
```

提示没有出现。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:35:37.017

这是因为内联事件注册要求您在 XHTML 结构层中编写 JavaScript 行为代码。查看更多信息：[http](http://www.quirksmode.org/js/events_early.html) ://www.quirksmode.org/js/events_early.html 。

在此处查看演示[http://jsfiddle.net/8t2Ye/3/](http://jsfiddle.net/8t2Ye/3/)

HTML：

```
<a onclick="test1();">test 1</a>
<p>
<a onclick="test2();">test 2</a>

<script>
    function test1(){
        alert('test 1');
    }
</script> 
```

JS（外部）：

```
function test2(){
    alert('test 2');
} 
```

只有 test1 被触发。

**更新**

您的代码似乎有语法错误。在这里试试我的演示[http://jsfiddle.net/en7VU/1/](http://jsfiddle.net/en7VU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:11:34.300

只要导航到新页面，就不会触发该事件。您可以做的是将锚元素作为参数传递，然后在函数完成后导航到 URL，就像这样。

```
newLI.innerHTML = '<a href="NewPage.html" data-transition="slide" 
                           onclick="DoSomething(this, '+ i +');" >
                               <p> item number:'+ i +'</p>
                          </a>'; 
```

和功能。

```
function DoSomething(anchor, numberLi) {
    alert(numberLi);

    window.location.href = anchor.href; 

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T09:18:29.453

问题已解决

我给他发了一个**空间变量**，因此该功能对我不起作用..

没有问题，所以你不知道，

不管怎么说，还是要谢谢你

# jquery - jQuery textarea character count (including carriage return)

> ID：14434602
> 
> 赞同：2
> 
> 时间：2013-01-21T08:09:17.147
> 
> 标签：jquery, textarea, carriage-return, charactercount

I have a jQuery function wherein I count the characters left on keyup.

```
function charactersLeft(e) {
    var textArea = e.data.textArea,
            charLeft = e.data.maxLength - textArea.val().length,
            message = e.data.messageContainer;

    if (charLeft < e.data.warningLength) {
        message.addClass('red').removeClass('green');
    }
    else {
        message.addClass('green').removeClass('red');
    }

    message.text(charLeft);
} 
```

This one works fine but it counts the carriage return as one character instead of two. This causes a problem when it's passed to the server since the carriage return is passed as '\r\n'.

What can I do to modify my code so that whenever I hit enter, the character count subtracts 2 instead of 1 and adds 2 instead of 1 when a carriage return is deleted?

Thank you :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:14:19.630

keyup 的 if 条件？

把类似的东西`if(e.which==13){charLeft--}`。这将减去一个额外的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:17:04.603

下面是您正在寻找的代码。

下面的代码也经过测试。

```
<script type="text/javascript" src="js/jquery.js"></script>

<script type="text/javascript">

(function($)
{ 
    $.fn.extend(
    {
        limit: function(limit,element)
        {
            var interval, f;
            var self = $(this);

            $(this).focus(function()
            {
                interval = window.setInterval(substring,100);
            });

            $(this).blur(function()
            {
                clearInterval(interval);
                substring();
            });

            substringFunction = "function substring(){ var val = $(self).val();var length = val.length;if(length > limit){$(self).val($(self).val().substring(0,limit));}";
            if(typeof element != 'undefined')
                substringFunction += "if($(element).html() != limit-length){$(element).html((limit-length<=0)?'0':limit-length);}"

            substringFunction += "}";

            eval(substringFunction);
            substring();
        } 
    }); 
})(jQuery);

</script>

<textarea id="myTextarea"></textarea>
<script type="text/javascript">
    $(document).ready(function()
    {
        $('#myTextarea').limit('140','#charsLeft');
    });    
</script>
<div id="charsLeft"></div>
```

# javascript - I want to delay a link for a period of 500 with javascript

> ID：14434604
> 
> 赞同：8
> 
> 时间：2013-01-21T08:09:28.743
> 
> 标签：javascript, html, time, hyperlink, delay

I've been looking through the Stackoverflow questions, trying to get help with a simple link delay; I want to put it around a div, and I can't make heads or tails of the examples I've found.

So far, I understand that I need to halt the native function of href, but I don't know how to do that. The code is still very alien to me. Help?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T08:15:38.920

将您的`href`属性设置为`href="javascript:delay('URL')"`和 JavaScript：

```
function delay (URL) {
    setTimeout( function() { window.location = URL }, 500 );
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T08:22:31.253

如果您想延迟页面上的每个链接，您可以使用 jQuery 来完成，如下所示

```
$(function(){
    $("a").click(function(evt){
        var link = $(this).attr("href");
        setTimeout(function() {
            window.location.href = link;
        }, 500);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T19:22:48.187

要延迟内联 javascript 的链接，只需将您的`href`属性设置为`href="javascript:setTimeout(()=>{window.location = 'URL' },500);"`.

当您将 URL 替换为您的链接时，只需确保它位于`' '`.

```
<li class="nav-item">
  <a href="javascript:setTimeout(()=>{window.location = '#About' },500);">
    About Me
  </a>
</li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-07T02:21:19.683

如果您想在新标签页上打开 (target="_blank")，

这将是[@gurvinder372](https://stackoverflow.com/users/1984039/gurvinder372)的代码更改为考虑新选项卡：

###### 如果您想使用任何其他目标设置，只需将 更改`"_blank"`为您的首选设置。

```
function delay(URL) {
    setTimeout(function () {
        window.open(URL, "_blank"); // this is what I've changed.
    }, 500);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T19:53:54.120

在继续之前，我使用它来保持功能等待：

```
var wait_until = new Date().getTime() + 500;
while (new Date().getTime() < wait_until) {
    //Do nothing, wait
} 
```

# python - Divide one list by another list

> ID：14434605
> 
> 赞同：16
> 
> 时间：2013-01-21T08:09:29.570
> 
> 标签：python, list, divide

I have two lists like this:

```
monkey = ['2\n', '4\n', '10\n']

banana = ['18\n', '16\n', '120\n'] 
```

What I want to do with these two list is make a third list, let's call it bananasplit.

I have to strip away `' \n'`, leaving only values and then make a formula which divides into:

```
bananasplit[0] = banana[0]/monkey[0] 
```

`bananasplit[1] = banana[1]/monkey[1]` etc

I experimented with while-loop but can't get it right. Here is what I did:

```
bananasplit = 3*[None]

i = 0

while i <= 2:

    [int(i) for i in monkey]

    [int(i) for i in banana]

    bananasplit[i] = banana[i]/monkey[i]

    i += 1 
```

How would you demolish this minor problem?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-21T08:11:45.890

The following will do it:

```
>>> bananasplit = [int(b) / int(m) for b,m in zip(banana, monkey)]
>>> print(bananasplit)
[9, 4, 12] 
```

As far as your original code goes, the main issue is that the following are effectively no-ops:

```
[int(i) for i in monkey]
[int(i) for i in banana] 
```

To turn them into something useful, you would need to assign the results somewhere, e.g.:

```
monkey = [int(i) for i in monkey]
banana = [int(i) for i in banana] 
```

Finally, it is worth noting that, depending on Python version, dividing one integer by another using `/` either truncates the result or returns a floating-point result. See [In Python 2, what is the difference between '/' and '//' when used for division?](https://stackoverflow.com/questions/183853/in-python-what-is-the-difference-between-and-when-used-for-division)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:11:52.943

Try something like this.

```
bananasplit = [x/y for x, y in zip(map(int, banana), map(int, monkey))] 
```

If you want the `float` result (in python 2.x), you can change the `int`s to be `float`, or `from __future__ import division`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:17:18.730

列表迭代和映射功能可以让你很快到达那里。

```
>>> monkey = ['2\n', '4\n', '10\n']

>>> banana = ['18\n', '16\n', '120\n']

>>> monkey = [ float(m.strip()) for m in monkey]

>>> banana = [ float(m.strip()) for m in banana]

>>> def div(a,b):

...     return a/b

... 

>>> map(div, banana, monkey)

[9.0, 4.0, 12.0]

>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:26:06.760

列表推导，例如`[an_expression for some_variable in some_sequence]`返回一个*新*列表。您的示例只是删除了这些结果。

```
# remove trailing whitespace and convert strings to numbers
monkey_numbers = [int(item.strip()) for item in monkey]
banana_numbers = [int(item.strip()) for item in banana]

# a traditional loop
bananasplit = [] # an empty list
for i in range(len(banana_numbers)):
  # make bananasplit longer on each iteration
  bananasplit.append(banana_numbers[i] / monkey_numbers[i]) 
```

然后，您可以使用列表推导而不是循环，因为您的表达式非常简单。您将需要带有两个列表并制作成对列表的[`zip`函数。](http://docs.python.org/2.7/library/functions.html#zip)

```
# divide in one statement
bananasplit = [
  banana_portion / monkey_bunch 
  for (banana_portion, monkey_bunch) in 
  zip(banana_numbers, monkey_numbers)
] 
```

当然，您可以随意使用较短的标识符；我使用长名称使他们的角色更容易理解。

# mysql - Getting particular day using MySql

> ID：14434607
> 
> 赞同：4
> 
> 时间：2013-01-21T08:09:55.443
> 
> 标签：mysql, sql-server

I need to get Bth working day in a month when the value of B is entered. For example, If b=12 in the month of January,2013 the resultant value should be in the date format as '17-01-2013' as the result is calculated after excluding Saturdays, Sundays & holidays in the month.

I have tried it in SQLserver with the following code & its working fine, but Im finding it difficult to execute it in MySql as some functions are not available as in Sqlserver.

```
 Declare 
@fromDate Date,
@Daydiff int

Set @fromDate ='01 jan 2013'

Set @Daydiff=datediff(day, @fromdate, dateadd(month, 1, @fromdate))
Select * from 
(
Select 
    dateadd(day,DayNo,@fromDate) as Date,
    dateName(weekday,(dateadd(day,DayNo,@fromDate))) As WeekDate,
    Datename(month,(dateadd(day,DayNo,@fromDate))) as MonthName,
    Row_number() Over (partition by (DatePart(month,(dateadd(day,DayNo,@fromDate)))) 
    order by (dateadd(day,DayNo,@fromDate))) as Business_day
from 
    (Select top (@Daydiff) row_number() over(order by (select 1))-1 as DayNo 
     from sys.syscolumns a cross join sys.syscolumns b)Dates
Where
    dateName(weekday,(dateadd(day,DayNo,@fromDate))) Not In ('Saturday','Sunday') and
    dateadd(day,DayNo,@fromDate) Not In (Select hdate from Holidays)
)A
Where Business_day=1 
```

# Note

Holidays is the static holidays table which contains list of holidays of 2013

I need a similar instance in Mysql. Kindly help me with this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:45:31.720

[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fd41c/25)

如果您需要第一天最后设置OFFSET 0。如果第二个 OFFSET 1，如果第 15 个设置 OFFSET 14

```
select d
FROM
(
SELECT @row := @row + 1 as row,
 DATE_ADD('2013-01-01', INTERVAL @row-1 DAY) d
from
(SELECT @row := 0) r,
(
select 1 n
union all 
select 2 n
union all 
select 3 n
union all 
select 4 n
union all 
select 5 n
union all 
select 6 n
) t1,
(
select 1 n
union all 
select 2 n
union all 
select 3 n
union all 
select 4 n
union all 
select 5 n
union all 
select 6 n
) t2
) num_seq

where 
d<DATE_ADD('2013-01-01', INTERVAL 1 MONTH)
and d not in (select hdate from Holidays )
and DAYNAME(d) not in ('Saturday','Sunday')
order by d
LIMIT 1 OFFSET 20 
```

没有 OFFSET 和 LIMIT 的版本。看到最新`where r=1`的是第一天。如果您需要第 15 天更改为`where r=15`

[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fd41c/29)

```
select d
from
(
select d,@r := @r + 1 as r
FROM
(SELECT @r := 0) r1,
(
SELECT @row := @row + 1 as row,
 DATE_ADD('2013-01-01', INTERVAL @row-1 DAY) d
from
(SELECT @row := 0) r,
(
select 1 n
union all 
select 2 n
union all 
select 3 n
union all 
select 4 n
union all 
select 5 n
union all 
select 6 n
) t1,
(
select 1 n
union all 
select 2 n
union all 
select 3 n
union all 
select 4 n
union all 
select 5 n
union all 
select 6 n
) t2
) num_seq

where 
d<DATE_ADD('2013-01-01', INTERVAL 1 MONTH)
and d not in (select hdate from Holidays )
and DAYNAME(d) not in ('Saturday','Sunday')
order by d
) rTable
where r=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:22:33.713

当仅将月份和年份作为参数传递时，如何获得相同的结果。因为当我检查代码时......它在日期是相应月份的第一天时工作，就像如果我输入参数为'2013-01-01'，结果是绝对的，但如果日期是'2013-01 -15' 程序计算第 1 天第 15 天并从那里开始计算第 n 天。

# javascript - 在 IE9-10 中使用 sort() 对 DOM 元素进行排序

> ID：14434612
> 
> 赞同：3
> 
> 时间：2013-01-21T08:10:12.600
> 
> 标签：javascript, internet-explorer, sorting, dom

我有这段代码在最新的 Chrome、Firefox、Opera 中完美运行，但在 IE9-10 中失败：

```
var div = document.querySelector('#wrap'),
    para = document.querySelectorAll('#wrap p');

var paraArr = [].slice.call( para ).sort(function( a,b ) {
  return a.textContent > b.textContent;
});

paraArr.forEach(function( p ) {
  div.appendChild( p );
}); 
```

**小提琴：http:** [//jsfiddle.net/2nUMk/1/](http://jsfiddle.net/2nUMk/1/)

任何想法是什么问题？`sort`IE中的实现与其他浏览器中的实现不一样吗？甚至`sort`是这里的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:27:26.077

没有必要，`div.innerHTML = "";`因为它删除了已排序的元素。

在 sorter 函数中，您可以显式设置返回值：

```
var paraArr = [].slice.call(para).sort(function (a, b) {
    return a.textContent > b.textContent ? 1 : -1;
}); 
```

**演示：http:** [//jsfiddle.net/2nUMk/3/](http://jsfiddle.net/2nUMk/3/)

# javascript - Accessing javascript open source API

> ID：14434622
> 
> 赞同：0
> 
> 时间：2013-01-21T08:10:36.587
> 
> 标签：javascript, json

how can i communicate with Mega.co.nz? They claim that they are using a open source java-script project that we (developers) can use to communicate with their server. But how does someone begin? I would really appreciate if i can get some tips on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:13:19.660

正如 mega.co.nz 开发者页面上所述，API 规范尚未记录在案。您必须对网站上的 HTML 和 javascript 进行逆向工程才能学习如何使用它。或者等到完整的文档可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:20:37.717

API 主要是为第三方开发人员使用而设计的，因此他们通常会提供有关如何连接它的文档（例如，要调用哪个 URL、要传递什么参数以及预期的响应是什么。）大多数时候，您可以找到它在他们的网站上，如果没有，您应该向他们索取。

# iphone - implementation of QuickDialogue shows QRootElement undeclared identifier

> ID：14434623
> 
> 赞同：0
> 
> 时间：2013-01-21T08:10:37.650
> 
> 标签：iphone, ios

I am using QuickDialogue for my form building. After following all instruction of [http://escoz.com/open-source/quickdialog](http://escoz.com/open-source/quickdialog) I am getting an error in my viewcontroller that QRootElement object is undeclared one. I tried declaring it in .h file however it still shows the same.

What is the correct way to use the form builder?

```
 - (void)viewDidLoad
 {
     [super viewDidLoad];
     QRootElement *root = [[QRootElement alloc] init];
     root.title = @"Hello World";
     root.grouped = YES;
     QSection *section = [[QSection alloc] init];
     QLabelElement *label = [[QLabelElement alloc] initWithTitle:@"Hello" Value:@"world!"];
     [root addSection:section];
     [section addElement:label];
     UINavigationController *navigation = [QuickDialogController controllerWithNavigationForRoot:root];   
     [self presentModalViewController:navigation animated:YES]; 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:25:41.350

您拥有的代码大部分都很好（除了您从 viewdidload 内部呈现模态视图控制器这一事实，这确实不是它的正确位置）。

您的问题似乎与在您的项目中安装 QD 有关。确保遵循[安装中的所有步骤](http://escoz.com/open-source/quickdialog)，特别是构建设置选项卡部分。

# python - 如何获取从 django.template 导入的 RequestContext 字典

> ID：14434624
> 
> 赞同：8
> 
> 时间：2013-01-21T08:10:38.130
> 
> 标签：python, django

我的 django 项目中有以下代码。

```
ctxt = RequestContext(request, {
    'power': power,
    'attack': attack,
    'defense': defense,
    }) 
```

现在我想通过如下方式获得这本字典`ctxt`

```
{
    'power': power,
    'attack': attack,
    'defense': defense,
} 
```

我试过`ctxt.dicts`了，但这包含太多项目。所以我查看了源代码，并在`class RequestContext(Context):`

```
for processor in get_standard_processors() + processors:
    self.update(processor(request)) 
```

我认为带入其他项目。

那我怎么能得到呢？

顺便说一句，如果你想知道我为什么要这样做，你可以看看我之前问过的这个问题。

[如何获得重写的 render_to_response 以在 django 中获得对整个项目的更改最少的 json](https://stackoverflow.com/questions/14394376/how-can-i-get-a-rewritten-render-to-response-to-get-a-json-in-django-with-the-le)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-05-01T16:19:27.343

我参加聚会有点晚了，但是您可以从 RequestContext 对象中获取字典

```
ctxt.flatten() 
```

如果你使用 Django>=1.7。[（文档）](https://docs.djangoproject.com/en/1.11/ref/templates/api/#django.template.Context.flatten "文档")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:22:10.077

ctxt.dict 是一堆字典，所以你只需要：

```
ctxt.dict[0] 
```

# r - 查找矩阵或数据框中每个唯一列的频率

> ID：14434632
> 
> 赞同：4
> 
> 时间：2013-01-21T08:11:22.040
> 
> 标签：r

我想通过它们的列找到矩阵的频率。例如对于下面的矩阵 x

```
 x <- matrix(c(rep(1:4,3),rep(2:5,2)),4,5)
   x
         [,1] [,2] [,3] [,4] [,5]
   [1,]    1    1    1    2    2
   [2,]    2    2    2    3    3
   [3,]    3    3    3    4    4
   [4,]    4    4    4    5    5 
```

现在如何找到每个唯一列的频率并创建一个矩阵，每列是 x 的唯一列，最后一行作为它在矩阵 x 中的频率添加

```
 #freqmatrix
        [,1] [,2]
 [,1]      1  2
 [,2]      2  3
 [,3]      3  4
 [,4]      4  5
 [,5]      3  2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T09:12:57.070

这是一个避免将矩阵转换为列表列表的解决方案，但它也有点混乱：

```
x.unique <- unique(x, MARGIN  = 2)

freq <- apply(x.unique, MARGIN = 2, 
              function(b) sum(apply(x, MARGIN = 2, function(a) all(a == b)))
        )

rbind(x.unique, freq)

     [,1] [,2]
        1    2
        2    3
        3    4
        4    5
freq    3    2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:49:20.490

你的最终目标到底是什么？换句话说，您将如何进一步处理这些数据？如果它只是制表，不会`paste()`让你得到答案吗？

```
x <- matrix(c(rep(1:4,3),rep(2:5,2)),4,5)
x1 <- data.frame(table(apply(x, 2, paste, collapse = ", ")))
#         Var1 Freq
# 1 1, 2, 3, 4    3
# 2 2, 3, 4, 5    2 
```

如果您确实想要`Var1`分离，您可以`read.csv()`在该列上使用。

```
cbind(read.csv(text = as.character(x1$Var1), header = FALSE), x1[-1])
#   V1 V2 V3 V4 Freq
# 1  1  2  3  4    3
# 2  2  3  4  5    2 
```

或者，如果您更喜欢转置输出：

```
t(cbind(read.csv(text = as.character(x1$Var1), header = FALSE), x1[-1]))
#      [,1] [,2]
# V1      1    2
# V2      2    3
# V3      3    4
# V4      4    5
# Freq    3    2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T08:45:13.780

这个答案会有点混乱，因为它涉及我无法避免的列表列表：

```
x <- matrix(c(rep(1:4,3),rep(2:5,2)),4,5)
#convert columns to elements in list
y <- apply(x, 2, list)

#Get unique columns
unique_y <- unique(unlist(y, recursive=FALSE))

#Get column frequencies
frequencies <- sapply(unique(y), function(f) sum(unlist(y, recursive=FALSE) %in% f))

#Bind unique columns with frequencies
rbind(simplify2array(unique_y), frequencies) 
```

瞧：

```
 [,1] [,2]
               1    2
               2    3
               3    4
               4    5
frequencies    3    2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T10:20:03.830

一个班轮使用`aggregate`（如果您的输入是 a `data.frame`）：

```
y <- matrix(c(1:4, 2:5, 1:4, 1,3,4,5, 2:5), ncol=5)
> y
#      [,1] [,2] [,3] [,4] [,5]
# [1,]    1    2    1    1    2
# [2,]    2    3    2    3    3
# [3,]    3    4    3    4    4
# [4,]    4    5    4    5    5

z <- as.data.frame(t(y))
> t(aggregate(z, by=z, length)[1:(ncol(z)+1)])
#      [,1] [,2] [,3]
# V1      1    1    2
# V2      2    3    3
# V3      3    4    4
# V4      4    5    5
# V1.1    2    1    2 
```

**注意：**如果输入矩阵中的列数`x`大于其 nrows，即`ncol(x) >> nrow(x)`.

# ruby-on-rails - 如何在 simple_form_for 中有下拉选项？

> ID：14434641
> 
> 赞同：3
> 
> 时间：2013-01-21T08:12:04.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3

到目前为止，我一直在使用 form_for 并且正在使用此代码

```
<%= f.select :name, options_for_select(%w[Mike Nick Jason Tim]) %> 
```

但是 simple_form_for 中的这个等价物是什么？我查看了 simple_form_for 的 github 文档，但他们没有涵盖这个

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T08:16:37.857

该文档涵盖了此主题，请查看`Collections`部分

```
<%= f.input :name, :collection => %w[Mike Nick Jason Tim] %> 
```

# c# - 如何在 WPF 中的 DragDrop opetaion 期间获取放置位置/路径

> ID：14434643
> 
> 赞同：1
> 
> 时间：2013-01-21T08:12:07.843
> 
> 标签：c#, wpf, drag-and-drop

在 WPF 中使用 DoDragDrop 将项目拖动到桌面时如何获取放置位置/路径？

例如，如果我将一个项目从 WPF 窗口拖放到桌面，我如何才能将桌面的地址设为**"C:\Users\somnath\Desktop"**。

是否有任何事件可以为我提供放置位置？

```
string[] paths = ...;
DragDrop.DoDragDrop(this, new DataObject(DataFormats.FileDrop, paths),
                    DragDropEffects.Copy); 
```

# html - 删除下拉列表中的按钮

> ID：14434645
> 
> 赞同：0
> 
> 时间：2013-01-21T08:12:16.480
> 
> 标签：html, css

有没有办法隐藏或删除下拉列表中的箭头按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:16:33.700

是的，至少在 webkit 中：http: [//jsfiddle.net/zzTjy/1/](http://jsfiddle.net/zzTjy/1/)。

**HTML**

```
<select>
    <option>123</option>
</select> 
```

**CSS**

```
SELECT { -webkit-appearance: none; } 
```

值得注意的是，Mozilla 支持`-moz-appearance`，但它并没有隐藏下拉列表中的箭头。这在相当长的一段时间内一直是一个悬而未决的问题。

Mozilla 还指出：

> 不要在 Web 站点上使用此属性：它不仅是非标准的，而且它的行为会从一种浏览器更改为另一种浏览器。

这可能有点苛刻，但您当然不应该使用它`appearance`来更改元素的预期行为。

**延伸阅读**

*   [更多示例](http://37signals.com/svn/posts/2609-customizing-web-forms-with-css3-and-webkit)
*   [在 Mozilla 中实现的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=649849)
*   [如何从 Firefox 中的选择元素中删除箭头](https://stackoverflow.com/questions/5912791/how-to-remove-the-arrow-from-a-select-tag-in-firefox)

# mysql - 为什么mysql选择varchar类型很慢

> ID：14434649
> 
> 赞同：5
> 
> 时间：2013-01-21T08:12:32.740
> 
> 标签：mysql, varchar

表中有 400,000 条记录

# 表格形成

```
id(int,pk)
title varchar(255)
body(text) 
```

## 查询 1

```
select **title** from qa_question order by id desc limit 300000, 15; 
```

运行时间**15**秒

## 查询 2

```
select **body** from qa_question order by id desc limit 300000, 15; 
```

运行时间**1.8**秒

我想知道为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:25:37.063

很简单，先执行**ORDER BY**然后只有**LIMIT**起作用。如果您在如此多的记录上按偶数**id**排序 ，则意味着大量数据正在移动（varchar 和 text）。如果您不在那里订购，那么您的查询会很快，因为数据不会像那样移动。数据越多，对磁盘的 I/O 请求就会越多。

在下面的评论中回答问题。

差异可能是由于 OP 可能正在使用 MyISAM 存储引擎，而 TEXT 没有为此存储在行内。VARCHAR 是。[见这里](http://dev.mysql.com/doc/refman/5.6/en/memory-storage-engine.html)。该文件系统存储可能是行内存储而不是行内存储的排序时间差异。另请阅读[这个很好的解释](http://nicj.net/mysql-text-vs-varchar-performance/)

也可以看看[这个帖子](https://stackoverflow.com/questions/4708708/mysql-order-by-limit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:38:30.370

让我们仔细看看您的查询有`ORDER BY id DESC LIMIT 300000, 15`.

MySQL 服务器必须做什么才能执行它？首先，它必须根据主索引`id`以降序获取每条记录。请注意，这必须发生 300k 次。一旦达到 300,000 个计数，服务器才可以开始输出结果行，并且只有 15 个。如果您使用的不是 300k 初始偏移量，而是更小的值，则此查询会运行得更快。

为什么 query1 与 query2 相差 10 倍？这是因为`TEXT`MySQL[中的列链接到父表](http://de.planet.mysql.com/entry/?id=23118)（未存储在其中）并且检索它们需要额外的查找，但`VARCHAR`存储在表中。在您的情况下，`TEXT`列获胜，因为您实际上不需要拉`body`列，直到您达到第 300,000 行（服务器仅拉`body` `TEXT`取对另一个不可见表中的列的相对较小的引用）。但是在`title`列的情况下，服务器别无选择，只能拉满`title`列，即使它在 100 字节的范围内，这就是它慢 10 倍的原因。

很难说清楚。这可能是因为第一个查询运行缓慢，但将所有表数据缓存在 RAM 中，所以第二个可以运行得更快。在得出任何结论之前，您应该至少重复所有查询 3 次。

我对你的建议是找到一种方法来`LIMIT 300000, 15`替换

```
WHERE id BETWEEN 300000 AND 300014 
```

或等效的，如果可以的话。在这种情况下，服务器将能够利用主索引，而且速度会快如闪电。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:36:45.173

这是因为**varchar**在执行查询之前分配内存，即它使用静态内存分配。因此，即使标题短于 255 个字符，它也会保留 255 个字符的内存。

在这种情况下，您可以使用**VARCHAR CHARACTER SET utf8**，它是 nvarchar 的别名，它是动态的并根据标题的长度使用内存量。

由于您有 400,000 条记录，这相当多，这会在使用 varchar 时导致更长的运行时间。所以，我的建议是使用**VARCHAR CHARACTER SET utf8**并避免使用 varchar。

# php - 如何调试 PHP 错误以识别父类

> ID：14434650
> 
> 赞同：0
> 
> 时间：2013-01-21T08:12:37.500
> 
> 标签：php, zend-framework

这是一个 SmartJobBoard 软件，我不知道如何生成以下错误：

```
Fatal error: Call to a member function getType() on a non-object in /home/_web/html/engjobs/system/lib/classifieds/SearchEngine/SearchSqlTranslator.php on line 21 
```

我去找这个文件`SearchSqlTranslator.php`，下面的代码是具有getType的函数：

```
function buildSQLQuery($criteria, &$valid_criterion_number, $sorting_fields, $inner_join = false, $count = false, $relevance = false)
    {
        foreach ($criteria['common'] as $crit) {
            foreach($crit as $criterion) {
                $type = $criterion->getProperty()->getType();
                if ($criterion->getProperty() !== null && $type == 'monetary') {
                    $this->isMonetary = true;
                    break;
                }
                if ($criterion->getProperty() !== null && $criterion->getProperty()->isComplex()) {
                    $this->isComplex = true;
                    break;
                }
            }
        }
        if ($relevance)
            $this->isRelevance = true;
        $sorting_block = $this->_getSortingStatement($sorting_fields);
        if ($count)
            $select_block = $this->_getSelectCountStatement();
        elseif ($relevance)
            $select_block = $this->_getSelectRelevanceStatement($relevance);
        else
            $select_block = $this->_getSelectStatement();
        $from_block = $this->_getFromStatement($inner_join);
        $where_block = $this->_getWhereStatement($criteria);

        $group_block = '';
        if (SJB_DB::table_exists($this->object_table_prefix.'_properties'))
            $group_block = $this->_getGroupStatement();

        $having_block = '';
        if ($this->valid_criterion_number != 0 && !empty($group_block)) {
            $having_block = " HAVING `count` = {$this->valid_criterion_number} ";
        }
        $limit_block = '';
        if ($this->limit)
            $limit_block = ' LIMIT ' . $this->limit;

        $valid_criterion_number = $this->valid_criterion_number;
        return $select_block . $from_block . $where_block . $group_block . $having_block . $sorting_block . $limit_block;
    } 
```

现在我已经看到了类文件，很明显该函数是从其他地方调用的。那么我应该如何找到哪个类正在调用这个函数呢？

我是否必须猜测并遍历每个类文件才能找到它的位置，或者我是否可以使用类似`grep`on shell 的东西来潜在地找到这个函数及其类？

似乎有多个层（至少 6-7 次），如果发生类似这样的错误，很难追溯。有没有办法系统地调试这类问题？

上面的函数也是其中的一部分，`class SJB_SearchSqlTranslator`它不会扩展到任何其他类。

Smart Job Board 脚本使用 Zend 作为其库，但似乎他们已经创建了自己的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:22:16.733

您应该使用错误/异常处理程序，针对此类错误生成堆栈跟踪。这样你就可以得到完整的调用堆栈。错误处理程序将与[set_error_handler一起附加，您可以使用](http://php.net/manual/en/function.set-error-handler.php)[debug_backtrace](http://php.net/manual/en/function.debug-backtrace.php)获取堆栈跟踪。

[本手册注释](http://php.net/manual/en/ref.errorfunc.php#68642)中有一个示例：

```
<?php
set_error_handler('errorHandler');

function errorHandler( $errno, $errstr, $errfile, $errline, $errcontext)
{
  echo 'Into '.__FUNCTION__.'() at line '.__LINE__.
  "\n\n---ERRNO---\n". print_r( $errno, true).
  "\n\n---ERRSTR---\n". print_r( $errstr, true).
  "\n\n---ERRFILE---\n". print_r( $errfile, true).
  "\n\n---ERRLINE---\n". print_r( $errline, true).
  "\n\n---ERRCONTEXT---\n".print_r( $errcontext, true).
  "\n\nBacktrace of errorHandler()\n".
  print_r( debug_backtrace(), true);
}

function a( )
{
  //echo "a()'s backtrace\n".print_r( debug_backtrace(), true);
  asdfasdf; // oops
}

function b()
{
  //echo "b()'s backtrace\n".print_r( debug_backtrace(), true);
  a();
}

b(); 
```

# tsql - 如何计算 SQL 列中一组字符的实例

> ID：14434653
> 
> 赞同：0
> 
> 时间：2013-01-21T08:13:20.093
> 
> 标签：tsql, wildcard

我需要计算每行中一组字符（aeıioöuü）的实例。

例如：

```
"linebreak" should return 4.
"indent" should return 2
"quote" should return 3 
```

我可以用这个数一个字符：

```
SELECT LENGTH(col) - LENGTH(REPLACE(col, 'a', '')) 
```

我还找到了一种计算一组字符的方法：

```
SELECT LENGTH(col) - LENGTH(REPLACE(REPLACE(REPLACE(col, 'a', ''), 'e', ''), 'ı', ''))... 
```

然而，随着它的不断增长，这个查询变得令人困惑。有没有更好的通配符或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:46:50.340

我真正需要的是具有特定数量 a、e、ı、i、o、ö、u 或 ü 的行；而不是出现的次数。以下查询返回只有一个元音字符的行：

```
SELECT COUNT(*) AS cnt FROM [table]
WHERE col Like '%[aeıioöuü]%'
AND col NOT LIKE '%[aeıioöuü]%[aeıioöuü]%' 
```

这将返回只有两个元音字符的行：

```
SELECT COUNT(*) AS cnt FROM [table]
WHERE col Like '%[aeıioöuü]%[aeıioöuü]%'
AND col NOT LIKE '%[aeıioöuü]%[aeıioöuü]%[aeıioöuü]%' 
```

等等...

# php - 将数据库中的中文转换为 utf-8 中文

> ID：14434659
> 
> 赞同：-1
> 
> 时间：2013-01-21T08:13:43.993
> 
> 标签：php, sql-server

数据库中的字符显示的是中文字符，但是当从 phppage 查询时，它们会显示为特殊字符，例如“³Â³¯Àû”，而不是中文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:21:09.677

当您在浏览器中手动覆盖它时，它是否以正确的编码显示？如果是这样，您可能只需要在“Content-Type: ...”HTTP 标头中设置适当的编码。

如果您无法更改输出的编码并且需要将其强制为特定编码，则可以使用 iconv - PHP 原生支持：http: [//php.net/manual/en/book.iconv。 php](http://php.net/manual/en/book.iconv.php)

编辑：刚刚看了一下，看起来你的数据是用“GB2312”编码的。所以应该工作的是：

```
$yourstring=iconv('GB2312','UTF-8',$yourstring); 
```

# string - 如何将 NULL 的文本字符串转换为数字？

> ID：14434660
> 
> 赞同：0
> 
> 时间：2013-01-21T08:14:00.300
> 
> 标签：string, r, numeric

我有来自 SQL 的输入数据，其中的字段是字符串“NULL”，这样

```
unique(file$x) 
```

返回

```
Levels: 1 10 14 8 NULL 
```

我希望任何“NULL”的结果变为“0”，然后使用 as.numeric() 进行转换。

我试过了：

```
i <- 1
for(i <= nrow(file) {
    if(file$x[i] == "NULL") {
        file$x[i] <- 0
    }
i <- i + 1
} 
```

但是，我现在得到的结果是 NULL 已经简单地变成了，我仍然无法将它转换为数字 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:47:04.580

如果您正在阅读本文，请`read.csv`设置选项`na.strings='NULL'`。这将导入`file$x`为`numeric`，而不是`factor`，用数字`NA`s 对象代替`NULL`字符串。然后用s替换`NA`s `0`：

```
file$x[is.na(file$x)] <- 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:15:52.807

在您的 SQL 查询中添加：`ISNULL(myNullableField, 0)`

这确保 - 如果您的值为 NULL - 它被转换为 0

我认为这是一个选择查询？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:22:22.520

在 R 中：

```
file$x[file$x=="NULL"] <- 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:43:05.510

尽管您应该从源头（即 SQL）解决此问题，但这里有一种方法可以解决。

将因子转换为字符，然后将 NA 替换为 0

不过，我不确定这是否是处理非常大的数据的正确方法。

```
> x <- as.factor(c('1', '10', '14', '8', 'NULL'))
> y <- as.numeric(as.character(x))
Warning message:
NAs introduced by coercion 
> y[is.na(y)] <- 0
> y
[1]  1 10 14  8  0 
```

# asp.net-mvc - 标题属性不适用于 asp.net 中的 gridview

> ID：14434664
> 
> 赞同：2
> 
> 时间：2013-01-21T08:14:13.850
> 
> 标签：asp.net-mvc, gridview, pdf-generation, caption

我试图从 asp.net 的数据库中导出 pdf 文件。在这里，我点击了这个链接：[http ://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx](http://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx)

**对于导出 .doc 文件：**

```
string strQuery = "select CustomerID, ContactName, City, PostalCode" +
                      " from customers";
    SqlCommand cmd = new SqlCommand(strQuery);
    DataTable dt = GetData(cmd);

    //Create a dummy GridView
    GridView GridView1 = new GridView();
    GridView1.AllowPaging = false;
    GridView1.DataSource = dt;
    GridView1.DataBind();

    Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition",
        "attachment;filename=DataTable.doc");
    Response.Charset = "";
    Response.ContentType = "application/vnd.ms-word ";
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    GridView1.RenderControl(hw);
    GridView1.Caption = "<br><br><br>" + "<h3>" + "Register Users Table" + "</h3>" + "<br>";
    Response.Output.Write(sw.ToString());
    Response.Flush();
    Response.End(); 
```

这里 Caption 显示在 .doc 文件中 GridView 的顶部

**对于导出 .pdf 文件：**

```
string strQuery = "select CustomerID, ContactName, City, PostalCode" +
        " from customers";
    SqlCommand cmd = new SqlCommand(strQuery);
    DataTable dt = GetData(cmd);

    //Create a dummy GridView
    GridView GridView1 = new GridView();
    GridView1.AllowPaging = false;
    GridView1.DataSource = dt;
    GridView1.DataBind();

    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition",
        "attachment;filename=DataTable.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    GridView1.RenderControl(hw);
    GridView1.Caption = "<br><br><br>" + "<h3>" + "Register Users Table" + "</h3>" + "<br>";
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End(); 
```

这里没有显示 GridView 的标题...如何在 C# asp.net 中导出 pdf 文件中显示 Gridview 的标题

如何做到这一点..我的代码有什么问题吗？提前致谢..

# html - 阻止 CSS 背景属性在调整大小时移动背景

> ID：14434667
> 
> 赞同：0
> 
> 时间：2013-01-21T08:14:19.643
> 
> 标签：html, css, properties, background

我最近在我在这里提出的一个最近的问题上发现了这个问题，这与我认为是 Chrome 或 Safari webkit 错误，或者可能是我的 style.css 中的某些东西有关。但是，过了一会儿，我注意到我的背景在调整大小时略有移动，我得出结论，当它向右移动时，屏幕左侧从上到下没有出现左白边框，但是当背景图片向右侧移动，然后在左侧右侧出现 2px 白色边框。如何阻止边界移动。

我的CSS：

```
html { 
    background: url(/assets/fotball.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:13:32.277

将您的代码更改为：[**jsFiddle Live Demo**](http://jsfiddle.net/BlackSRC/hB2h6/5/)

```
html { 
    background: url(/assets/fotball.jpg) repeat center top fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    background-position:;
} 
```

使用时`background-size: cover;`，使用`background:no-repeat`or没有区别`background:repeat`。因此，在这种情况下，您可以使用它`repeat`来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:08:52.370

尝试这个：

```
background: url(/assets/fotball.jpg) no-repeat center top fixed; 
```

# unix - 持久单一 ssh 连接上的并行命令/文件传输

> ID：14434669
> 
> 赞同：1
> 
> 时间：2013-01-21T08:14:35.957
> 
> 标签：unix, file-upload, ssh, file-transfer, openssh

我创建了 SSH 连接，如下所示：

```
ssh -MNf -S /tmp/mysocket user@host 
```

我在这个会话中使用没有密码的 ssh。我想在同一个连接上运行多个并行命令（例如：500 个并行命令），并且我想通过使用这个持久 ssh 套接字同时复制文件，所以我可以运行命令：

```
ssh -S /tmp/mysocket user@host md5sum file102 | cut -d " " -f 1 
```

有时我收到“连接被拒绝”警告，但实际上命令有效，我看到多个连接与“netstat -an”我知道命令不在同一个连接上工作......

```
aokan-pc:~ $ netstat -an |grep ESTABLISHED |grep '192.168.1.30:22'
tcp        0      0 192.168.1.29:58568         192.168.1.30:22           ESTABLISHED 
tcp        0      0 192.168.1.29:60866         192.168.1.30:22           ESTABLISHED 
tcp        0      0 192.168.1.29:60385         192.168.1.30:22           ESTABLISHED 
tcp        0      0 192.168.1.29:60368         192.168.1.30:22           ESTABLISHED 
tcp        0      0 192.168.1.29:52523         192.168.1.30:22           ESTABLISHED 
tcp        0      0 192.168.1.29:42096         192.168.1.30:22           ESTABLISHED 
tcp        0      0 192.168.1.29:42177         192.168.1.30:22           ESTABLISHED 
```

1) 是否可以在 1 个持久的 openssh 连接上运行并行命令？如何？

2) 我可以在 1 个持久 ssh 连接/套接字上将多个并行文件传输到同一个远程主机吗？而且我必须使用校验和系统，我尝试使用 md5sum 进行校验和控制......（使用 rsync 或使用 scp（使用多个连接）或使用 nfs 如何？）

3）在这项工作中使用单套接字连接有什么缺点？而不是使用一个我应该使用数千个 TCP 套接字连接到同一主机吗？

# javascript - “未捕获的语法错误：输入意外结束”通过 Chrome 控制台

> ID：14434672
> 
> 赞同：1
> 
> 时间：2013-01-21T08:15:02.213
> 
> 标签：javascript, asp.net-mvc, json.net

我有一个来自asp.net mvc控制器动作的json，日期格式像'/Date(1358753460000+0800)/'，我想把它解析成像'2013-12-31'这样的格式，这里是javascript功能。

错误发生在使用 eval 函数的行中。

```
function renderTime(data){console.log('new ' + data.replace('/', '', 'g'));var da = eval('new ' + data.replace('/', '', 'g').replace('/', '', 'g'));console.log(da);return da.getFullYear() + "-" + da.getMonth() + 1 + "-" + da.getDay() + " " + da.getHours() + ":" + da.getMinutes();} 
```

# javascript - 比较和逻辑“非”运算符有什么区别？

> ID：14434676
> 
> 赞同：-2
> 
> 时间：2013-01-21T08:15:22.150
> 
> 标签：javascript

我很难理解 Javascript 中比较运算符和逻辑“非”运算符之间的区别。我也对语法感到困惑。我的问题是：

由于它们都是布尔运算符，因此两者之间有什么真正的区别吗？

两者的语法是这样的吗？X！= 5

任何解释表示赞赏 - 如果可以，请发布示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:55:40.607

比较：取两个值并比较它们。我们可以提出各种问题，例如：

*   这两个值是否“相同”，我们使用 ==
*   这个值是否大于那个值，>
*   该值是否大于*或*等于该值，>=

每一个的结果都是一个布尔值。所以我们可以写：

boolean areTheyEqual = ( x == y );

所以如果 x 等于 y，aretheyEqual 将是“真”。现在假设您想要一个变量“areTheyDifferent”。我们可以通过两种方式得到它，或者使用“not”运算符，它适用于布尔值：

```
boolean areTheyDifferent = ! areTheyEqual; 
```

或者我们可以使用“notEqual”比较

```
boolean areTheyDifferent = ( x != y ); 
```

所以 ！运算符接受一个布尔值并“反转”它。你需要阅读

```
!= 
```

作为单个比较运算符，就像 >= 是单个运算符一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:24:47.667

比较运算符在逻辑语句中用于确定变量或值之间的相等或差异。例如 `x!=y`

逻辑运算符用于确定变量或值之间的逻辑。

例如 `!(x==y)`

# objective-c - 如何将图像设置为以编程方式创建的按钮

> ID：14434677
> 
> 赞同：-1
> 
> 时间：2013-01-21T08:15:31.110
> 
> 标签：objective-c, cocoa

> **可能重复：**
> [在 NSButton 上使用 -setImage](https://stackoverflow.com/questions/6929409/using-setimage-on-nsbutton)

```
I created a button using following code .

    NSView *superview = [_window contentView];
    NSRect frame = NSMakeRect(10, 10, 200, 100);
    button = [[NSButton alloc] initWithFrame:frame];
    [button setTitle:@"Click me!"]; 
```

那么如何为这个按钮设置图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:35:49.350

```
[button setBackgroundImage:[UIImage imageNamed:@"yourImage"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:45:15.183

你应该使用：

```
- (void)setImage:(NSImage *)anImage 
```

例如：

```
[button setImage:[NSImage imageNamed:@"image"]]; 
```

# java - 如何使杰克逊不序列化具有默认值的基元

> ID：14434679
> 
> 赞同：18
> 
> 时间：2013-01-21T08:15:35.923
> 
> 标签：java, json, jackson

在 Jackson 中，可以在 POJO 上使用 JsonSerialize 注释以防止空对象被序列化 (@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL))。但是，基元不能设置为 null，因此此注释不适用于诸如未触及且默认为 0 的 int 之类的东西。

是否有一个注释可以让我说“对于这个类，除非它们与默认值不同，否则不要序列化基元”或“对于这个字段，如果它的值为 X，不要序列化它”？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T21:54:48.200

如果您使用的是最新版本的 Jackson，您可以使用[`JsonInclude.Include.NON_DEFAULT`](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.1/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_DEFAULT)应该适用于原语的版本。

这种方法的缺点是，将 bean 属性设置为其默认值将不起作用，并且该属性仍然不会被包括在内：

```
@JsonInclude(Include.NON_DEFAULT)
public class Bean {
  private int val;
  public int getVal() { return val; }
  public void setVal(int val) { this.val = val; }
}

Bean b = new Bean();
b.setVal(0);
new ObjectMapper().writeValueAsString(b); // "{}" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T09:57:58.337

事实是，在 Java 中，类加载器会将所有未初始化的原始属性（int = 0，boolean = false 等）设置为默认值，因此您无法将它们与应用程序明确设置的属性区分开来。在我看来，你有两个选择：

*   使用相应的包装对象而不是原语（整数、布尔值、长整数..）
*   如前所述，定义一个自定义序列化程序

# android - 如何有效地显示连续的位图？

> ID：14434680
> 
> 赞同：1
> 
> 时间：2013-01-21T08:15:37.533
> 
> 标签：android, bitmap

我想有效地显示连续的位图。首先，我尝试使用`SurfaceView`如下代码：

```
Canvas canvas = holder.lockCanvas();
canvas.drawBitmap(bmpNow, 0, 0, paint);
holder.unlockCanvasAndPost(canvas); 
```

但是，性能很差，不能满足我的需求。然后我尝试了另一种方式。我直接使用`ImageView`and `imageView.setImageBitmap(bitmap)`，这种方式的性能比前一种情况要好，但即便如此，它仍然不能满足我的需求。

编辑：*连续位图*是相机捕获的帧。它们将使用 ImageView 之类的 UI 小部件逐帧显示。我希望这个 UI 小部件能够快速流畅地显示帧，例如：每秒显示超过 15 或 20 帧。问题是，我不知道该选择哪个 UI 小部件，以及如何有效地使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:23:55.367

对于快速的逐帧动画，您应该考虑使用 OpenGL。我建议使用 libgdx 或 andengine 库。

使用普通 API 会更容易，但会有很多性能和内存问题需要您处理。

# api - RavenDB HTTP API 元数据所有文档

> ID：14434681
> 
> 赞同：1
> 
> 时间：2013-01-21T08:15:37.420
> 
> 标签：api, http, metadata, ravendb

是否有一个在 http api 上调用时会返回数据库中包含的所有文档的元数据的 url？我知道我可以为一种类型/文档获取它，但不知道如何为所有类型执行此操作。斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:45:36.400

您可以致电`/docs`获取所有文件。如果您只想要元数据，则有一个查询字符串参数：

```
GET http://localhost:8080/docs/?metadata-only=true 
```

[文档在这里](http://ravendb.net/docs/2.0/http-api/extensions/metadata-only)

# c - 尝试 printf "+INF" 但只得到 "inf"

> ID：14434686
> 
> 赞同：1
> 
> 时间：2013-01-21T08:16:04.613
> 
> 标签：c, variables, format, printf

我想返回`+INF`，但我只返回“inf”：

```
int main(void)
{
    double dubb = HUGE_VAL;
    printf("%f \n", dubb);
} 
```

我在这里忽略了什么吗？或者它只是编译器语义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:25:01.433

`printf("%+F\n", dubb);`改为使用

'+' 使 printf 显示符号 'F' 使 inf/nan 大写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:26:20.373

你没有告诉我们你有什么 C 库。我在 linux 上的手册页告诉我：

> C99 标准为无穷大指定“[-]inf”或“[-]infinity”，在 f 转换的情况下为 NaN 指定以“nan”开头的字符串，以及“[-]INF”或“[ -]INFINITY" 或 "NAN*" 在 F 转换的情况下。

所以你观察到的似乎与 C99 标准同步。使用“%F”将其全部大写，因为`+`只需将其放在前面。

# javascript - Page.ResolveUrl 与 Ajax 的 Calendar Extender 冲突

> ID：14434692
> 
> 赞同：0
> 
> 时间：2013-01-21T08:16:54.463
> 
> 标签：javascript, jquery, ajax, calendarextender

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:04:39.590

# c# - 以 MVVM 安全的方式将 WPF 元素 (UserControl) 移动到新窗口？

> ID：14434693
> 
> 赞同：2
> 
> 时间：2013-01-21T08:16:58.797
> 
> 标签：c#, .net, wpf, mvvm, .net-4.5

我在这里问了一个奇怪的问题，我理解。但是我遇到了一个场景，有一个“弹出到新窗口”功能可能很酷。但是那个时候用户与之交互的 UI 在技术上是一个 DataTemplate，只是我使用了一个 UserControl 作为模板。

我想做的只是将该 UserControl 弹出到一个新窗口中（而不创建一个新窗口）。但是，如果创建了一个新 UI 并且不太麻烦，那么绑定规则无论如何都应该创建一个相同的界面。

我的第一个想法是简单地将项目从视图模型的集合中取出并将其插入新的集合中，这就是我认为将创建一个新 UI 的地方，第一个问题是我现在是否必须编写一个窗口管理器也？

如果可能的话，看看关于如何处理这种情况的一些意见和想法。

PS。如果可能的话，我真的很想避免挖掘可视化树，但我并不反对编写附加行为等来做到这一点。我只是不确定从哪里开始，什么是“最好的”方法，谷歌没有提供任何与我的需求相关的东西，哈哈。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:59:49.820

我经常将 XAML 的部分从较大的控件移到较小的控件中，它与将控件移到另一个窗口具有相同的基本要求。只要`DataContext`窗口的 是正确的，那么控件中的绑定应该仍然有效。

你是不是想多了？

```
using System.Windows;

namespace WpfApplication1
{
    public partial class MyWindow : Window
    {
        // private, See Execute() instead
        MyWindow() {
            InitializeComponent();
        }

        static public void Execute(MyViewModel vm)
        {
            MyWindow Window = new MyWindow() {
                DataContext = vm
            };

            Window.ShowDialog();
        }
    }
} 
```

# iphone - 如何在 iOS 上以图形方式实现和显示声音振幅？

> ID：14434696
> 
> 赞同：10
> 
> 时间：2013-01-21T08:17:11.480
> 
> 标签：iphone, ios, xcode, voice-recording

任务是显示进入手机麦克风的语音幅度，并显示如下所示的幅度：

![在此处输入图像描述](../Images/8372f92acd6b7de193b5ec5a2ae9bae9.png)

有人可以指导我如何实现这一目标。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:50:29.940

没那么容易。。

你可以检查：

*   对于“动画波形图”，您可以查看 Apple 示例“ [aurioTouch](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html) ”
*   对于处理音频，您还可以查看“ [SpeakHere](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html) ”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:38:13.240

查看核心图形和drawRect。

帮你搜索：

[如何在 iPhone 上画线？](https://stackoverflow.com/questions/856354/how-do-i-draw-a-line-on-the-iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:46:54.810

我相信这只能通过核心情节框架来完成。你可以[在这里](https://stackoverflow.com/a/2402899/919545)查看 Brad larson 的回答。

# android - 在android中录制视频时媒体播放器启动失败

> ID：14434705
> 
> 赞同：3
> 
> 时间：2013-01-21T08:17:41.000
> 
> 标签：android, android-mediarecorder

我正在尝试使用媒体记录器在 android 中录制视频。当我尝试在 2.3.4 版媒体记录器中进行视频录制时，它可以在 4.0 及更高版本中正常工作，导致启动失败异常 -12。

这是我的媒体记录器代码。

```
 mrec.setCamera(camera);
        mrec.setAudioSource(MediaRecorder.AudioSource.MIC);
        mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mrec.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        mrec.setVideoSize(getMaxSupportedVideoSize().width,
            getMaxSupportedVideoSize().height);

        mrec.setOutputFile(path + filename);
        mrec.setMaxDuration(30000);
        mrec.setPreviewDisplay(surfaceHolder.getSurface());

        mrec.prepare();
        mrec.start(); 
```

我得到的运行时异常是

```
01-21 12:58:16.459: E/MediaRecorder(2461): start failed: -12
01-21 12:58:16.469: W/System.err(2461): java.lang.RuntimeException: start failed.
01-21 12:58:16.469: W/System.err(2461):     at android.media.MediaRecorder.native_start(Native Method)
01-21 12:58:16.469: W/System.err(2461):     at android.media.MediaRecorder.start(MediaRecorder.java:603)
01-21 12:58:16.469: W/System.err(2461):     at com.roseenvy.ui.activities.VideoRecordActivity.startRecording(VideoRecordActivity.java:235)
01-21 12:58:16.469: W/System.err(2461):     at com.roseenvy.ui.activities.VideoRecordActivity.onClick(VideoRecordActivity.java:125)
01-21 12:58:16.469: W/System.err(2461):     at android.view.View.performClick(View.java:2485)
01-21 12:58:16.469: W/System.err(2461):     at android.view.View$PerformClick.run(View.java:9080)
01-21 12:58:16.469: W/System.err(2461):     at android.os.Handler.handleCallback(Handler.java:587)
01-21 12:58:16.469: W/System.err(2461):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 12:58:16.469: W/System.err(2461):     at android.os.Looper.loop(Looper.java:130)
01-21 12:58:16.469: W/System.err(2461):     at android.app.ActivityThread.main(ActivityThread.java:3737)
01-21 12:58:16.469: W/System.err(2461):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 12:58:16.469: W/System.err(2461):     at java.lang.reflect.Method.invoke(Method.java:507)
01-21 12:58:16.469: W/System.err(2461):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:902)
01-21 12:58:16.469: W/System.err(2461):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:660)
01-21 12:58:16.469: W/System.err(2461):     at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:27:07.540

```
 The below code worked for me.      
public Size getMaxSupportedVideoSize() {
    int maximum = 0;
    int position = -1;
    for (int i = 0; i < sizes.size(); i++) {
        if (sizes.get(i).width > maximum) {
            maximum = sizes.get(i).width; // new maximum
            position = i;
        }
    }
    if (position == -1) {
        return null;
    }

    return sizes.get(position);

       }

        mrec = new MediaRecorder();
camera.unlock();
mrec.setCamera(camera);
mrec.setAudioSource(MediaRecorder.AudioSource.MIC);
mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mrec.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
Size maxSupportedVideoSize = getMaxSupportedVideoSize();
if (maxSupportedVideoSize == null) {
    mrec.setVideoSize(480, 640);
} else {
    mrec.setVideoSize(maxSupportedVideoSize.width,
            maxSupportedVideoSize.height);
    System.out.println(maxSupportedVideoSize.width + " width");
    System.out.println(maxSupportedVideoSize.height + " height");
}
mrec.setOutputFile(path + filename);
mrec.setMaxDuration(30000);
mrec.setPreviewDisplay(surfaceHolder.getSurface()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:53:23.710

只需评论这一行，然后尝试。

```
mrec.setVideoSize(getMaxSupportedVideoSize().width,
            getMaxSupportedVideoSize().height); 
```

并更改此行::

```
mrec.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT); 
```

请参阅此[链接](http://androidcookbook.com/Recipe.seam;jsessionid=40151FCD26222877E151C3EEFB406EED?recipeId=1375&recipeFrom=ViewTOC)如何使用 MediaRecorder 抓取视频。

希望这可以帮助 ：）

# mysql - 根据同一列选择两个值

> ID：14434706
> 
> 赞同：1
> 
> 时间：2013-01-21T08:17:42.583
> 
> 标签：mysql, sql, select, pdo

我试图在查询的一行中选择两个用户名，一个称为“用户名”，第二个说“用户名 2”。这是我有atm的代码。users 表使用 user_id 的主键。

```
SELECT
  r.report_id,
  r.poster_id,
  r.reporter_id,
  u.username,
  (2nd username)
FROM reports r,
  users u
WHERE r.report_id = :report_id
    AND r.reporter_id = u.user_id
    AND r.poster_id = u.user_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:20:28.243

你需要加入表`user`两次

```
SELECT 
        r.report_id,
        r.poster_id,
        r.reporter_id,
        u.username AS ReporterName,
        b.userName as PosterName
FROM
        reports r
        INNER JOIN users u      
            ON r.reporter_id=u.user_id
        INNER JOIN users b
            ON r.poster_id=b.user_id
WHERE
        r.report_id=:report_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:26:11.833

这是MySQL的代码

```
 SELECT
          r.report_id,
          r.poster_id,
          r.reporter_id,
          u.username,
          u.username username2,
        FROM reports r,
          users u
        WHERE r.report_id = :report_id
            AND r.reporter_id = u.user_id
            AND r.poster_id = u.user_id 
```

# java - 如何在 mysql 数据库中存储 gps 坐标？

> ID：14434709
> 
> 赞同：1
> 
> 时间：2013-01-21T08:17:45.420
> 
> 标签：java, php, mysql

我目前有一个带有 php 和 mysql 的 android 应用程序，但我的问题是，当我的代码传递给 php 并将其存储在 mysql 中时，它总是抛出 0.000000 经度和纬度。

这是我的代码

**

```
class myLocationlistener  implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            if (location != null) {
                double pLong = location.getLongitude();
                double pLat = location.getLatitude();
                textLat.setText(Double.toString(pLat));
                textLong.setText(Double.toString(pLong));
            }
        }
        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }

    class CreateNewProduct extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Sample.this);
            pDialog.setMessage("Sending Location");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String latitude = textLong.getText().toString();
            String longitude = textLat.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("latitude", latitude));
            params.add(new BasicNameValuePair("longitude", longitude));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), Echos.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        } 
```

**

这是针对 php

**

```
if ($_POST['latitude'] && $_POST['longitude'] != null) {
    $db_connect = mysql_connect($db_host, $db_user, $db_password) or die(mysql_error());
    $db = mysql_select_db($db_name);
    $latitude = $_POST['latitude'];
    $longitude = $_POST['longitude'];

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO gpslocation(latitude, longitude) VALUES('latitude', 'longitude')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Product successfully created.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
} 
```

**

如果有人对此有所了解，请在这里回答，或者告诉我我是否误导了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:29:14.030

问题似乎出在您的 PHP 代码上。

```
$result = mysql_query("INSERT INTO gpslocation(latitude, longitude) VALUES('$latitude', '$longitude')"); 
```

将上面的行更改为具有 $ 符号并查看。

最好将 mysql_execute 与准备好的语句一起使用。看到[这个](http://teaching-2.cs.uml.edu/MySQLdocs/MySQL_Manual/mysql_execute.html)帖子

# c++ - 具有值和指针的数组

> ID：14434710
> 
> 赞同：1
> 
> 时间：2013-01-21T08:17:51.897
> 
> 标签：c++

我有一个 64 位无符号整数数组。是否可以在数组的某些位置分配数组的某些指针。我是说：

```
array [0] = Integer
array [1] = Integer
array [2] = Pointer to array
array [3] = Pointer to array
array [4] = Integer 
```

有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:23:29.750

一种方法是`array`变成一个数组

```
union {
  uint64_t   intval;
  uintptr_t  ptrval;
}; 
```

并与之合作。

当然，您将需要某种方法来了解特定元素是存储整数还是指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T08:20:17.707

您可以使用`reinterpret_cast`：

```
array[3] = reinterpret_cast<std::uintptr_t>(pointer); 
```

（`uintptr_t`来自`<cstdint>`）

如果可能的话，尽量避免这样做。你能重新考虑你的设计吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:44:28.157

让我猜猜：你想要一个数组，其中的每个元素可以是一个数字或另一个数字数组？如果是这样，请创建一个 s 数组，`std::vector`如果要存储一个数字，则只保留一个值。像这样：

```
typedef std::vector< long long > I64Vector;
std::vector< I64Vector > array;
array.push_back( I64Vector( { 42 } ) ); // store one integer ( 42 ) in array[ 0 ]
array.push_back( I64Vector( { 1, 2, 3, 4, 5 } ) ); // store 5 integers in array[ 1 ]
//... etc.
// accessing them
long long num = array[ 0 ][ 0 ]; // 42
const I64Vector & subarray = array[ 1 ];
long subNumber1 = subarray[ 0 ]; // 1
long subNumber2 = subarray[ 1 ]; // 2
//... etc. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T08:53:10.073

您必须将`array`元素的类型更改为可以存储整数和指针（或者最好是`std::vector<std::uint64_t>`）的类型。一种类型安全的方法是使用 [`boost::variant`](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html)：

```
std::vector<boost::variant<std::uint64_t, std::vector<std::uint64_t>>> array;
array.push_back(1);
array.push_back(2);
array.push_back(std::vector<std::uint64_t>{4,5,6});

if (int* x = boost::get<std::uint64_t>(array[0])) { ... }
if (std::vector<std::uint64_t>* x 
        = boost::get<std::vector<std::uint64_t>>(array[2])) { ... } 
```

如果你想使用内置数组而不是向量，你可以使用联合而不是`boost::variant`：

```
 struct IntOrArray
 {
   bool isInt;
   union {
     std::uint64_t int_value;
     std::uint64_t* array_value;
   }
 };

 std::vector<IntOrArray> array;
 IntOrArray a1;
 IntOrArray a1.isInt = true;
 IntOrArray a1.int_value = 1;
 array.push_back(a1);

 IntOrArray a2;
 IntOrArray a2.isInt = false;
 IntOrArray a2.array_value = arrayYouGotElsewhere;
 array.push_back(a2);

 if (array[0].isInt) { ... } 
```

C++11 允许您将`std::vector`s 放入联合中，但并非所有编译器都支持。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-21T08:39:33.170

是的，我们可以做到，

a[3] = (unsigned long long)&a; （在窗口中）

并取回指针值， (unsigned long long *)a[3]

# python - 即使代码中没有打印语句，python mysqldb也会打印文本

> ID：14434712
> 
> 赞同：0
> 
> 时间：2013-01-21T08:18:07.223
> 
> 标签：python, mysql

这是我的程序

> 将 MySQLdb 导入为 mdb
> 
> 从 MySQLdb 导入 IntegrityError
> 
> conn = mdb.connect("localhost", "asdf", "asdf", "asdf")

当调用 connect 函数时，python 会打印一些文本（shell 中的“h”）。仅当我从特定文件夹执行脚本文件时才会发生这种情况。如果我将相同的脚本文件复制到其他文件夹，则不会打印“h”。

实际上我之前在同一个脚本中使用了这一行进行测试

> 打印“h”

但现在我已经从脚本中删除了这一行。但它仍然被打印出来。我的文件夹怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:23:25.143

尝试删除 *.pyc 文件。其次使用带有 -v 选项的脚本，以便您可以查看从哪里导入文件

# facebook - 在 Facebook 提要中嵌入 html5 视频播放器

> ID：14434714
> 
> 赞同：7
> 
> 时间：2013-01-21T08:18:22.937
> 
> 标签：facebook, html, facebook-graph-api, html5-video

是否可以在 Facebook 提要中嵌入 html5 视频播放器？

我尝试设置 OpenGraph 元标记，但在页面共享 (http://autru.com/f) 之后，Facebook 仍在发布作为网站链接的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T22:46:06.713

目前这是不可能的。您可以指定 Flash 并回退到 mp4 等，但您不能为 mp4 自定义 HTML5 播放器。

# mysql - 活动记录 ruby on rails 错误

> ID：14434718
> 
> 赞同：1
> 
> 时间：2013-01-21T08:18:42.250
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, gem

我在应用程序的开发方面并没有走得太远。
我刚刚做了`rails new app -d mysql`，我确实`rails s`加载了我的浏览器。

Rails 主页已加载，我进入我的应用程序文件夹，`http://localhost:3000/demo/index`惊讶地看到这个错误`ActiveRecord::ConnectionNotEstablished`。
请提出一些好的方法来摆脱这种情况并继续我的进一步发展。

操作系统是 Windows 7，我已经安装了 mysql 适配器并在 stackoverflow 类似问题上尝试了许多解决方案。没有人能解决我的问题。我请求认真的帮助。
我的 database.yml 在开发方面看起来像这样：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: app_development
  pool: 5
  username: root
  password: pass
  host: localhost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:56:46.023

在尝试了多种方法来解决 Windows 上的问题后，我切换到了 Ubuntu。解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:31:01.337

创建应用程序后，使用以下命令创建数据库

```
 rake db:create 
```

然后使用启动服务器`rails s`

# regex - 正则表达式仅将字符串增加一（连续数字）

> ID：14434719
> 
> 赞同：0
> 
> 时间：2013-01-21T08:18:46.457
> 
> 标签：regex, search, notepad++

我使用记事本++，我需要一个正则表达式来匹配连续的数字

例子：

```
verses 3-4
verses 11-12
verses 26-27 
```

因此正则表达式会找到这些匹配项，而*不是*以下行：第 3-9 节或第 26-32 节等。

我使用 \d+，但不知道如何将相同的值逐一增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:20:16.653

正则表达式匹配*文本*，而不是*数字*。因此，您不能仅使用正则表达式来执行此操作（除非您拼出所有可能的组合）。您需要一种脚本语言，将匹配的文本转换为整数并进行比较。

例如，在 Python 中：

```
for potentialmatch in re.finditer(r"(\d+)-(\d+)", mytext):
    if int(potentialmatch.group(1)) + 1 == int(potentialmatch.group(2)):
        # Match found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:20:54.543

您不能这样做，除非使用包含所有此类选项的正则表达式。

不过，您可以生成一个：

```
(1..99 | %{"$_-$($_+1)"}) -join '|' 
```

在 PowerShell 中生成一个正则表达式，它将匹配从 1-2 到 99-100 的所有内容。

# mysql - sql中的限制计数

> ID：14434720
> 
> 赞同：5
> 
> 时间：2013-01-21T08:18:47.903
> 
> 标签：mysql, count

我有一个如下所示的查询

```
SELECT
venueid as VENUES, venue2.venue AS LOCATION,
(SELECT COUNT(*) FROM events WHERE (VENUES = venueid) AND eventdate < CURDATE()) AS number
FROM events
    INNER JOIN venues as venue2 ON events.venueid=venue2.id
GROUP BY VENUES
ORDER BY number DESC 
```

我想限制计数以计算表中的最后 5 行（按 id 排序）但是当我添加 limt 0,5 时，结果似乎没有改变。在计算时，您在哪里添加限制以限制正在计算的行数？

```
 CREATE TABLE venues (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        venue VARCHAR(255)
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    CREATE TABLE categories (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        category VARCHAR(255)
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    CREATE TABLE events (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        eventdate DATE NOT NULL,
        title VARCHAR(255),
        venueid INT,
        categoryid INT
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    INSERT INTO venues (id, venue) VALUES
    (1, 'USA'),
    (2, 'UK'),
    (3, 'Japan');

    INSERT INTO categories (id, category) VALUES
    (1, 'Jazz'),
    (2, 'Rock'),
    (3, 'Pop');

    INSERT INTO events (id, eventdate, title, venueid, categoryid) VALUES
    (1,20121003,'Title number 1',1,3),
    (2,20121010,'Title number 2',2,1),
    (3,20121015,'Title number 3',3,2),
    (4,20121020,'Title number 4',1,3),
    (5,20121022,'Title number 5',2,1),
    (6,20121025,'Title number 6',3,2),
    (7,20121030,'Title number 7',1,3),
    (8,20121130,'Title number 8',1,1),
    (9,20121230,'Title number 9',1,2),
    (10,20130130,'Title number 10',1,3); 
```

预期结果应如下所示

```
 |VENUES |LOCATION   |NUMBER |
    |1      |   USA     |   3   |
    |2      |   UK      |   1   |
    |3      |   Japan   |   1   | 
```

截至发布 id 9,8,7,6,5 是当前日期之前的最后 5 个事件。

有关完整表格的详细信息，请参阅下面的 SQL Fiddle 链接。

[http://sqlfiddle.com/#!2/21ad85/32](http://sqlfiddle.com/#!2/21ad85/32)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:22:56.710

此查询为您提供了您尝试分组和计数的五行：

```
SELECT *
FROM events
WHERE eventdate < CURDATE()
ORDER BY eventdate DESC
LIMIT 5 
```

现在您可以将此查询用作子查询。您可以加入子查询的结果，就像它是一个普通的表一样：

```
SELECT
    venueid as VENUES,
    venue2.venue AS LOCATION,
    COUNT(*) AS number
FROM
(
    SELECT *
    FROM events
    WHERE eventdate < CURDATE()
    ORDER BY eventdate DESC
    LIMIT 5
) AS events
INNER JOIN venues as venue2 ON events.venueid=venue2.id
GROUP BY VENUES
ORDER BY number DESC 
```

[http://sqlfiddle.com/#!2/21ad85/37](http://sqlfiddle.com/#!2/21ad85/37)

# sql - 1个字段的2种格式之间的SQL相同空格

> ID：14434723
> 
> 赞同：0
> 
> 时间：2013-01-21T08:19:15.547
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我正在使用 MS SQL，我的查询是这样的：

```
select
A.CUS_EuroCustId No_Id, 
' '  BLANK1,
A.IVC_Number INV_Nr , 
'     ' BLANK2, 
'PINV' PINV ,  
' ' BLANK3,

from 
INVOICE as A 
```

然后输出是这样的：

```
 01102450 146918     PINV 
  01102847 146381     PINV 
  01105915 16151     PINV 
  01102646 146850     PINV
  01105915 16150     PINV 
```

IVC_Number 有两种格式，6 位和 5 位，IVC_Number 和 'PINV' 之间的空格很重要。现在我怎样才能在我的 SQL 查询中实现它，输出应该是这样的：

```
 01102450 146918     PINV 
  01102847 146381     PINV 
  01105915 16151      PINV 
  01102646 146850     PINV
  01105915 16150      PINV 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:28:06.027

自己使用[`LEFT`](http://msdn.microsoft.com/en-us/library/ms177601.aspx)并添加一些填充：

```
LEFT(A.IVC_Number+'    ',6) INV_Nr , 
```

它总是 6 个字符宽。

* * *

虽然，当然，在当前查询中，每一列都应该单独显示——有些东西是将所有列组合成一个单独的文本，我通常建议将字符串格式推送到该组件的任何内容，而不是在 SQL 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:35:00.797

这是另一种选择——您需要使用单型（固定宽度）字体来查看结果，但间距应该是正确的（相应调整——目前两者都设置为 7 个字符）：

```
SELECT 
   RIGHT('       ' + CAST(ID AS VARCHAR(7)), 7) + 
   RIGHT('       ' + CAST(INV_Nr  AS VARCHAR(7)), 7) +
   PINV
FROM Test 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/43db6/5)。

祝你好运。

# ruby-on-rails - config.time_zone 和 config.local_zone 有什么区别，什么时候都应该设置？

> ID：14434725
> 
> 赞同：1
> 
> 时间：2013-01-21T08:19:20.390
> 
> 标签：ruby-on-rails, timezone, environment

`config.time_zone`和 和有什么不一样`config.local_zone`？是否有两种情况都应该设置的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T08:54:24.750

**1)** `config.time_zone`

Rails 使您能够配置应用程序**时区**。这很容易`Time.zone = 'EST'`。

所以设置`config.time_zone`你`application.rb`最终会做同样的事情。这是正确的做法，因为我们不想依赖**服务器时区**。

在您的`application.rb`(Rails 3) 文件中，您可以设置默认时区：

```
config.time_zone = 'Central Time (US & Canada)' 
```

**2)** `config.local_zone`

它显示系统本地时间。

因此，如果您确实必须在数据库中有**本地时间**，然后通过设置为 UTC 来欺骗 Rails `config.time_zone`，这告诉它假设时间戳已经在 UTC 中，因此不需要更改它们以使其成为它认为的世界标准时间。

`config.active_record.default_timezone`确定在从数据库中提取日期和时间时是使用`Time.local`（如果设置为 :local）还是`Time.utc`（如果设置为 :utc）。默认`:utc`为 Rails，尽管 Active Record`:local`在 Rails 之外使用时默认为。

# ruby - ruby 中的类接口设计模式

> ID：14434726
> 
> 赞同：9
> 
> 时间：2013-01-21T08:19:21.843
> 
> 标签：ruby, design-patterns

我正在寻求有关设计模式的帮助。我非常习惯java中的接口，我不知道如何在ruby中获得类似的机制。它需要的是一种具有方法的接口，例如联系人。为了获得联系人，我需要对 api 进行调用，这可能是 google、linkedid 或任何网络服务。所以我想使用一个接口，它为我提供了联系人方法，我不想知道任何关于提供者的信息。

我的第一次尝试看起来像这样（伪代码）：

```
Module AbstractContact
 def contacts
  #do some stuff with @data
  @data
 end
end

class Impl
  include AbstractContact
 def build_provider(provider)
  if provider == :google
   #get the data from google
    gdata= api_call
   @data = gdata
   elsif provider == :linkedin
   end
 end
end

c=Impl.new
c.build_provider

c.contacts 
```

但我真的不确定，这是否是“红宝石之路”。

欢迎帮助，建议和建议。最好的，菲尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T03:10:37.117

策略模式可以在这里应用

```
def Provider
  def contacts
    raise "Abstract method called"
  end
end

class Google < Provider
  def contacts
    data = # Google API call
  end
end

class LinkedIn < Provider
  def contacts
    data = # LinkedIn API call
  end
end

class Impl
  def initialize(provider)
    case provider
    when :google
      @provider = Google.new
    when :linkedin
      @provider = LinkedIn.new
    else
      raise "Unknown provider"
    end
  end

  def contacts
    @provider.contacts
  end
end

impl = Impl.new(provider)
impl.contacts 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:51:10.607

有几种很好的方法。一种是将不同的功能封装到模块中：

```
module Google
  def contacts
    puts 'contacts from Google'
  end
end

module LinkedIn
  def contacts
    puts 'contacts from LinkedIn'
  end
end

class Impl
  def self.create provider
    o = new
    o.extend(provider)
  end
end

Impl.create(Google).contacts
Impl.create(LinkedIn).contacts 
```

输出：

```
contacts from Google
contacts from LinkedIn 
```

这里的`create`方法`Impl`是 Impl 实例的工厂方法，它添加来自给定模块的方法。只需确保模块实现相同的方法名称并返回兼容的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-03T00:51:25.947

我真的很喜欢@Bui The Hoa 的回答，但我会添加以下内容：

我非常喜欢这种方法，尤其是在基础 Provider 类中引发错误。但是我不认为在 Impl 中有 case 语句是很好的策略模式使用。它违反了单一目的原则，因为它使实现负责跟踪所有可能的提供者。它还违反了类对扩展开放但不可更改的开闭原则，因为当您添加新的提供者时，您必须更改 case 语句。

为什么不只是做

```
impl = Impl.new(Google.new) 
```

由于会以这种方式处理引发“未知提供者”错误：

```
impl = Impl.new(BadProvider.new) => Error 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T12:09:08.873

模块通常用于排除多个对象的共同行为。我相信在这种情况下你所需要的只是鸭式打字。只需`contacts`在 Java 解决方案中共享接口的所有类中实现方法。

请注意，此解决方案允许您将不同类型的对象保存在单个集合中，并且当您迭代它们（或以任何其他方式您想使用这些公共接口对象）时，您只需调用此`contacts`方法，而不关心什么类型他们真的是。

如果您需要在实现此接口的所有类中具有一些共同行为，您可以创建基于`contacts`方法存在的模块，并将其包含在可以使用它的所有类中。

# c# - 在图中找到一对节点之间的 K 最短路径？

> ID：14434731
> 
> 赞同：-5
> 
> 时间：2013-01-21T08:19:32.277
> 
> 标签：c#, java, c, algorithm, graph

有谁知道寻找k-最短路径的算法，我在网上搜索并找到了Yen's，但它是如此复杂？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:28:32.150

它不能有效地完成（多项式）¹ - 问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)

这样想 - 你是否可以多项式地找到 ak 最短路径的长度（假设这里是简单路径），通过对 的范围`[1,n!]`进行二进制搜索`k`，你可以找到图中是否存在[哈密顿路径](http://en.wikipedia.org/wiki/Hamiltonian_path)（通过查找一条长度的路径`n`）。

由于[哈密顿路径问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)是 NP-Hard，所以这个问题也是如此，并且没有已知的多项式解决方案。

* * *

(1) 可能，除非[P=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)，但大多数 CS 研究人员认为这不太可能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:30:11.853

现在总...

谷歌搜索 Djikstra 算法。[这里](http://code.google.com/p/k-shortest-paths/)有一个实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T09:28:55.910

这是通过不相交集解决的。谷歌它，但简而言之，你有 2 个向量。一个用-1初始化的父母。另一个用零初始化的等级。现在从源节点开始。你去寻找你可以从那里得到的每个可能的节点。通过使它们的 parent[i] = 当前节点将它们添加到您的集合中。根据持有数字的 rank[i] 决定谁是谁的父母

# actionscript-3 - AutoComplete Combobox Flex 3 到 Flex 4 迁移问题

> ID：14434732
> 
> 赞同：1
> 
> 时间：2013-01-21T08:19:52.093
> 
> 标签：actionscript-3, apache-flex, flex4.5

我们一直在使用 flex sdk 3 创建的项目中使用 AutoCompleteModified.as（**由 Jens Krause [www.websector.de] 创建**）类，AutoCompleteModified.as 是具有自动完成功能的comboxbox 的高级版本，最近，我们将 sdk 迁移到 flex 4.5 并遇到了**textInput.setSelection**和**textInput.selectionBeginIndex**的编译问题，经过深入分析，我们将**textInput.setSelection** 替换为**textInput.selectRange**并将**textInput.selectionBeginIndex**替换为**textInput.selectionAnchorPosition**，编译成功完成，但我们开始在应用程序中看到组合框的奇怪行为，当我们输入组合框时，它总是将光标移动到最左边的位置，导致它以相反的顺序输入。

请建议/帮助尽快解决此问题。

# c# - 在嵌套列表框中显示主从数据

> ID：14434734
> 
> 赞同：1
> 
> 时间：2013-01-21T08:20:00.067
> 
> 标签：c#, wpf, binding

我想这样显示我的数据

![在此处输入图像描述](../Images/1f1a03efc22e10271f20136b4cd67845.png)

这是类定义：

```
public class Order
{
    public string Customer { get; set; }
    public decimal Amount { get; set; }
    public List<OrderDetail> Details = new List<OrderDetail>();
}

public class OrderDetail
{
    public string Product { get; set; }
    public int Qty { get; set; }
} 
```

我尝试使用 ListBox 但无法显示详细信息。下面是我在 xaml 中的尝试：

```
<ListBox x:Name="lstOrder">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Customer}"/>
                <TextBlock Text="{Binding Amount}"/>
                <ListBox ItemsSource="{Binding Details}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Product}"/>
                                <TextBlock Text="{Binding Qty}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

在后面的代码中：

```
public MainWindow()
{
    InitializeComponent();

    List<Order> OrderList = new List<Order>();
    Order order = new Order { Customer = "David", Amount = 2000 };
    order.Details.Add(new OrderDetail { Product = "A", Qty = 5 });
    OrderList.Add(order);

    order = new Order { Customer = "John", Amount = 5000 };
    order.Details.Add(new OrderDetail { Product = "A", Qty = 2 });
    order.Details.Add(new OrderDetail { Product = "B", Qty = 3 });
    OrderList.Add(order);

    lstOrder.ItemsSource = OrderList;
} 
```

绑定 OrderList.Details 的正确方法是什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:13:56.997

在您的`Order`班级`Details`中是一个字段而不是一个属性。不支持绑定到字段。

您可以稍微修改该类，使其变为：

```
public class Order
{
    public string Customer { get; set; }
    public decimal Amount { get; set; }

    List<OrderDetail> details;
    public List<OrderDetail> Details { get { return details; } }

    public Order()
    {
        details = new List<OrderDetail>();
    }
} 
```

然后它将正确绑定。

# ios - 在 sqlite 上删除消息。越狱 iPhone

> ID：14434735
> 
> 赞同：1
> 
> 时间：2013-01-21T08:20:13.153
> 
> 标签：ios, sqlite, sms, jailbreak

在我的应用程序中，我想自动删除 SMS 消息。例如，当我单击一个按钮以触发在 sqlite 中执行 SQL 的方法时。

SQL是这样的：

```
drop trigger if exists delete_message;
delete from message;
delete from madrid_chat;
CREATE TRIGGER if not exists delete_message AFTER DELETE ON message WHEN NOT read(old.flags) 
BEGIN 
UPDATE msg_group SET unread_count = (SELECT unread_count FROM msg_group WHERE ROWID = old.group_id) - 1 WHERE ROWID = old.group_id; 
END 
```

可以成功执行（文件在`/private/var/mobile/Library/SMS/sms.db`）。但是在短信应用中，消息被删除了，聊天群没有。

iphone是ios5.1.1，越狱了。iOS有另一种保存消息的方法吗？

我下载 sms.db，并删除`madrid_chat`和`message`表的数据。然后我上传到iphone。但在短信应用程序中，我总是有旧数据。删除不成功？不，当我重新启动设备并重新打开 SMS 应用程序时，数据清晰。

短信数据库有缓存吗？

# php - $_GET 没有变量名

> ID：14434739
> 
> 赞同：0
> 
> 时间：2013-01-21T08:20:25.977
> 
> 标签：php

很多时候，我尝试用不同的语言编写不同类型的代码。当我试图写这样的东西时：

```
if (!isset($_GET[""])) $_GET[""] = false; 
```

编译器不报告错误。好的，我们有这个**没有变量名**的构造。这是在实践中使用这种结构的一种方法吗？我认为这是胡说八道。

我认为只有**$_GET**在实践中可用，例如：

```
if (count($_GET) > 0) do something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:33:23.460

如果您在谈论 $_GET[""] 的可用性 - 您不能使用 URL 设置它。

如果你去 URL`test.php?=3`你会得到一个空的`$_GET`

如果您转到该 URL `test.php?""=3`，您将能够使用它访问它`$_GET["\"\""]`

所以没有办法在 URL 中设置一个变量并用它来检索它`$_GET[""];`

但是，您可以将密钥设置为代码中的空字符串：

```
$_GET[""] = 3;
echo $_GET['']; // 3
echo $_GET[""]; // 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:31:46.810

我不明白你想通过这段代码实现什么：

```
if (!isset($_GET[""])) $_GET[""] = false; 
```

php 可以将空字符串分配为数组键，并且可以像这样访问它：

```
$array[0][''] 
```

为了您的检查，您可以使用这样的功能，例如：

```
function GET($key, $default = null) {
    return isset($_GET[$key]) ? $_GET[$key] : $default;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:34:18.180

如果您使用 'http://domain.com' 之类的 url 测试以下代码：

```
print_r($_GET);
echo '<br>';
if(isset($_GET))
{
   echo '$_GET IS SET<br>';
}

if(!empty($_GET))
{
   echo '$_GET IS NOT EMPTY<br>';
}

if(count($_GET) > 0)
{
   echo '$_GET IS NOT EMPTY<br>';
} 
```

你会得到

```
Array ( ) 
$_GET IS SET 
```

根据这一点，您要检查或记住的内容取决于您，即使您执行[http://www.domain.com](http://www.domain.com)或此[http://www.domain.com/index ，也始终设置 $_GET .php?test=adsf](http://www.domain.com/index.php?test=adsf)

你对 $_GET[''] = 'smthing' 所做的就像拥有一个数组 arr['test'] = 'smthing'; 尽管您没有提供测试密钥，而是提供了一个空密钥，但在涉及 $_GET 时您无法正确处理。

所以如果你问我，你应该检查一下具体的东西。

```
if(isset($_GET['test']) && $_GET['test'] == 'adsf')
{
   doSomething();
} 
```

这只是一个简单的例子，应该进行进一步的验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:27:49.060

`empty($_GET)`并`count($_GET)`在这里为我工作！

# ajax - 在 ajax_callback 中传递参数：未填充返回数组

> ID：14434749
> 
> 赞同：1
> 
> 时间：2013-01-21T08:21:18.910
> 
> 标签：ajax, drupal, drupal-7

我正在尝试使用选择框中第一个选定内容类型名称的所有日期字段填充第二个选择框。我正在使用 ajax_callback 通过 $form_state 获取选定的值。我收到错误，我无法确定原因。有人可以帮忙吗？

这是我的自定义模块代码。

```
function mymodule_settings($form, &$form_state){
  $content_type_options = array();
  $result = db_query("SELECT * FROM {node_type}");  
  foreach($result as $record){
    $content_type_options[$record->type]  =  $record->name;  
  }
  $form = array();
  $form['content_type'] = array(
    '#title'  => t('Content Types'),
    '#description'  => t('Select a content type.'),
    '#type' => 'select',
    '#options'  => $content_type_options,
    '#ajax' => array(
      'event' => 'change',
      'wrapper' => 'reg-start-date',
      'callback' => 'mymodule_datefields_ajax_callback',
      'method' => 'replace',
    ),
  );
  $form['checkboxes_fieldset'] = array(
    '#title' => t("Start Date"),
    '#prefix' => '<div id="reg-start-date">',
    '#suffix' => '</div>',
    '#type' => 'select',
    '#description' => t('Select the date field'),
  );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value'  => t('Save'),
  );
  return $form;
}

function mymodule_datefields_ajax_callback($form, $form_state) {
  $fieldname = $form_state['triggering_element']['#value'];

  $field_query = db_query("SELECT fc.field_name FROM {field_config} fc, {field_config_instance} fci
                          WHERE fc.field_name = fci.field_name
                          AND fc.type = 'datetime'
                          AND fci.bundle = '".$fieldname."'");
  $datefield_options = array();
  foreach($field_query as $record){
    $datefield_options = $record;
  }
  return $datefield_options;
  //dpm($form_state, 'AJAX $form_state');
} 
```

这是我在弹出窗口中遇到的错误-

> 发生 AJAX HTTP 错误。HTTP 结果代码：200 调试信息如下。路径：/module_dev/?q=system/ajax StatusText：OK ResponseText：致命错误：无法在 /var/www/module_dev/includes/common.inc 的第 5786 行使用 stdClass 类型的对象作为数组

我浏览了第 5786 行的 /var/www/module_dev/includes/common.inc，这是我在那里找到的代码。

```
function drupal_render(&$elements) {
  // Early-return nothing if user does not have access.
  if (empty($elements) || (isset($elements['#access']) && !$elements['#access'])) {
    return;
  }

  // Do not print elements twice.
  if (!empty($elements['#printed'])) {
    return;
  }

  // Try to fetch the element's markup from cache and return.
  if (isset($elements['#cache'])) {
    $cached_output = drupal_render_cache_get($elements);
    if ($cached_output !== FALSE) {
      return $cached_output;
    }
  }

  // If #markup is set, ensure #type is set. This allows to specify just #markup
  // on an element without setting #type.
  if (isset($elements['#markup']) && !isset($elements['#type'])) {
    $elements['#type'] = 'markup';
  }

  // If the default values for this element have not been loaded yet, populate
  // them.
  if (isset($elements['#type']) && empty($elements['#defaults_loaded'])) {
    $elements += element_info($elements['#type']);
  }

  // Make any final changes to the element before it is rendered. This means
  // that the $element or the children can be altered or corrected before the
  // element is rendered into the final text.
  if (isset($elements['#pre_render'])) {
    foreach ($elements['#pre_render'] as $function) {
      if (function_exists($function)) {
        $elements = $function($elements);
      }
    }
  }

  // Allow #pre_render to abort rendering.
  if (!empty($elements['#printed'])) {
    return;
  }

  // Get the children of the element, sorted by weight.
  $children = element_children($elements, TRUE);

  // Initialize this element's #children, unless a #pre_render callback already
  // preset #children.
  if (!isset($elements['#children'])) {
    $elements['#children'] = '';
  }
  // Call the element's #theme function if it is set. Then any children of the
  // element have to be rendered there.
  if (isset($elements['#theme'])) {
    $elements['#children'] = theme($elements['#theme'], $elements);
  }
  // If #theme was not set and the element has children, render them now.
  // This is the same process as drupal_render_children() but is inlined
  // for speed.
  if ($elements['#children'] == '') {
    foreach ($children as $key) {
      $elements['#children'] .= drupal_render($elements[$key]);
    }
  }

  // Let the theme functions in #theme_wrappers add markup around the rendered
  // children.
  if (isset($elements['#theme_wrappers'])) {
    foreach ($elements['#theme_wrappers'] as $theme_wrapper) {
      $elements['#children'] = theme($theme_wrapper, $elements);
    }
  }

  // Filter the outputted content and make any last changes before the
  // content is sent to the browser. The changes are made on $content
  // which allows the output'ed text to be filtered.
  if (isset($elements['#post_render'])) {
    foreach ($elements['#post_render'] as $function) {
      if (function_exists($function)) {
        $elements['#children'] = $function($elements['#children'], $elements);
      }
    }
  }

  // Add any JavaScript state information associated with the element.
  if (!empty($elements['#states'])) {
    drupal_process_states($elements);
  }

  // Add additional libraries, CSS, JavaScript an other custom
  // attached data associated with this element.
  if (!empty($elements['#attached'])) {
    drupal_process_attached($elements);
  }

  $prefix = isset($elements['#prefix']) ? $elements['#prefix'] : '';
  $suffix = isset($elements['#suffix']) ? $elements['#suffix'] : '';
  $output = $prefix . $elements['#children'] . $suffix;

  // Cache the processed element if #cache is set.
  if (isset($elements['#cache'])) {
    drupal_render_cache_set($output, $elements);
  }

  $elements['#printed'] = TRUE;
  return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:58:46.450

你的 AJAX 回调应该返回的是一个表单元素的渲染数组，它替换了`<div>`CSS ID 设置为 #ajax[wrapper] 的标签的内容。您的 AJAX 回调返回的是一个对象数组，这不是渲染 API 所期望的。（渲染 API 使用数组。）这就是为什么您会收到错误消息，指出对象不能用作数组。

请参阅[ajax_example_simplest()](http://api.drupal.org/api/examples/ajax_example%21ajax_example.module/function/ajax_example_simplest/7)作为使用 AJAX 的表单构建器的示例；特别是，请参阅它的 AJAX 回调[ajax_example_simplest_callback()](http://api.drupal.org/api/examples/ajax_example%21ajax_example.module/function/ajax_example_simplest_callback/7)。

简而言之，`mymodule_datefields_ajax_callback()`应该是下面的代码。

```
function mymodule_datefields_ajax_callback($form, $form_state) {
  return $form['checkboxes_fieldset'];
} 
```

表单构建器应使用以下代码。

```
function mymodule_settings($form, &$form_state){
  $content_type_options = array();
  $result = db_query("SELECT * FROM {node_type}");  
  foreach ($result as $record) {
    $content_type_options[$record->type]  =  $record->name;  
  }

  // $form is already passed as argument; you don't need to initialize it to an empty array.
  // $form = array();

  $form['content_type'] = array(
    '#title'  => t('Content Types'),
    '#description'  => t('Select a content type.'),
    '#type' => 'select',
    '#options'  => $content_type_options,
    '#ajax' => array(
      'event' => 'change',
      'wrapper' => 'reg-start-date',
      'callback' => 'mymodule_datefields_ajax_callback',
      'method' => 'replace',
    ),
  );

  // An AJAX request call to the form builder function has been done.
  if (!empty($form_state['values']['content_type'])) {
    // Use $form_state['values']['content_type'] to get the option list.
    // Set the value of $date_options with that list.
    $field_query = db_query("query to execute");
    $date_options = array();

    foreach ($field_query as $record) {
      $date_options[$record->field_name] = $record->field_name;
    }
  }
  else {
    $date_options = array();
  }

  $form['checkboxes_fieldset'] = array(
    '#title' => t("Start Date"),
    '#prefix' => '<div id="reg-start-date">',
    '#suffix' => '</div>',
    '#type' => 'select',
    '#options' => $date_options,
    '#description' => t('Select the date'),
  );

  $form['submit'] = array(
    '#type' => 'submit',
    '#value'  => t('Save'),
  );

  return $form;
} 
```

`$date_options`是格式为的数组`value => string_to_show`；它与您使用的格式相同`$content_type_options`。

# c# - 遍历数据表中的特定列

> ID：14434750
> 
> 赞同：2
> 
> 时间：2013-01-21T08:21:21.127
> 
> 标签：c#, asp.net

我在 asp.net 和 c# 中工作。

我的应用程序中有一个包含一列的数据表。我想遍历该列值并用其他值检查这些值。请告诉我该怎么做。我用 foreach 尝试过，但它不起作用。

代码：

```
 foreach (DataRow dr in dt.Rows)
        {
            int code = Convert.ToInt32(dt.Rows[0]["Code"]);

            if (code == pcode)
            {
                //do something
            }
            else 
            { }
        } 
```

**笔记：**

**dt**是我的带有列**代码**的数据表。我想将列**代码**中的所有值与**pcode**进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:24:45.737

```
int code = Convert.ToInt32(dr["Code"]); 
```

尽管您可能还想检查 NULL :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:23:18.360

在您的循环中，访问 dr，而不是 dt.Rows[0]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:25:15.643

您总是访问第一行：

```
dt.Rows[0]["Code"]  // use dr instead of dt.Rows[0] 
```

> dt 是我的带有列代码的数据表。我想将列代码中的所有值与 pcode 进行比较。

那么当我假设您想将所有值与一个变量进行比较时，我是否正确，如果所有字段都等于该值，则`bool`变量应该是`true`，否则`false`？

您可以使用 Linq：

```
var allEqual = dt.AsEnumerable()
                 .All(r => r.Field<int>("Code") == pcode); 
```

[`Enumerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)确定序列的所有元素是否满足条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:30:11.290

```
foreach (DataRow dr in dt.Rows)
{
    object o = dr["Code"];
    if (o != DBNull.Value) // Check for null
    {
        int code = Convert.ToInt32(o);

        if (code == pcode)
        {
            //do something
        }
        else 
        { }
    }
} 
```

# javascript - jScrollPane 无法在 Windows 8 触摸屏笔记本电脑的浏览器上滚动内容

> ID：14434753
> 
> 赞同：4
> 
> 时间：2013-01-21T08:21:38.243
> 
> 标签：javascript, jquery, windows-8, jscrollpane, jquery-jscrollpane

我在我的网站中使用 jQuery [jScrollPane](http://jscrollpane.kelvinluck.com/)插件，它在普通 PC 浏览器和 iPad、Android 平板电脑上运行良好。

但是，当我在 Windows 8 触摸屏笔记本电脑上打开我的网站时，我无法使用 iPad 或 Android 平板电脑中的触摸手势滚动页面。

我也试过这个演示网站（[http://jscrollpane.kelvinluck.com/themes/lozenge/](http://jscrollpane.kelvinluck.com/themes/lozenge/)），我无法用触摸手势滚动内容。

要滚动页面，我必须转到滚动条并将其向左/向右拖动。之前使用默认滚动条我可以使用触摸手势滚动页面，现在我不能使用 jScrollPane。

我可以在**Chrome**中滚动内容（演示和我的网站，在 windows8 设备中），但不能在**IE 和 FireFox中滚动**

> 这是一个已知的问题？我怎样才能解决这个问题？
> 
> jScrollPane 是否仅支持 webkit 浏览器的触摸手势？
> 
> 如果是，我们如何使它适用于所有浏览器，尤其是 Firefox 和 IE？

**更新：**

正如我在评论布鲁诺回答时提到的那样，我们已经尝试过使用以下样式来划分该部门。但没有运气

```
.scroll-pane{
overflow-x:scroll; 
-ms-touch-action: pan-x;    
}

and 

.scroll-pane{
overflow-x: scroll;
-ms-scroll-snap-type: mandatory;
-ms-scroll-snap-points-x: snapInterval(0%, 100%);

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T11:31:09.670

将此样式添加到 CSS 的 body 标记中。

```
overflow-x:scroll ; 
-ms-touch-action: pan-x; 
```

它对我有用。希望这对您也有帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:40:07.103

是的，jScollPane 只关心 webkit 触摸事件（它们是唯一的事件 atm），但现在 MS 引入了[Pointer 事件](http://msdn.microsoft.com/en-us/library/ie/hh673557%28v=vs.85%29.aspx)，虽然很容易检测到许多开发人员不这样做。想到的另一个例子是 FlexSlider 插件，它也用于仅检测 touchend、touchstart 等。

如果您想让 jScollPane 在 Win8 中工作，您可能需要修改源并对其进行调整以检测 MS 指针事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:12:43.513

我将 MsPointerEvents ( [http://goo.gl/MnEIh](http://goo.gl/MnEIh) ) 添加到 jquery.jscrollpane.js：

[https://raw.github.com/karacas/jScrollPane/9fe8872f6e2438a87847e3d01b46648f06d15fc1/script/jquery.jscrollpane.js](https://raw.github.com/karacas/jScrollPane/9fe8872f6e2438a87847e3d01b46648f06d15fc1/script/jquery.jscrollpane.js)

希望它有效，对不起，但我无法测试这个，因为我没有 w8。

# python - 验证失败时重新显示 LoginForm

> ID：14434754
> 
> 赞同：0
> 
> 时间：2013-01-21T08:22:00.867
> 
> 标签：python, django

这是我的登录视图：

```
def sign_in(request):
    if request.method == 'POST':
        form = LoginForm(request.POST)
        if form.is_valid():
            username = request.POST['username']
            password = request.POST['password']
            user = authenticate(username=username, password=password)
            if user is not None:
                if user.is_active:
                    login(request, user)
                    redirect('/')
                else:
                    # Return a 'disabled account' error message
                    return render_to_response('message.html', {...})
            else:
                # Return an 'invalid login' error message.
                ???

    else:
        form = LoginForm()

    return render(request, 'accounts/login.html', {
        'form': form,
        }) 
```

这是我的 LoginForm 类：

```
class LoginForm(forms.Form):
    username = forms.CharField(required=True, max_length=30)
    password = forms.CharField(required=True, widget=forms.PasswordInput(), max_length=128) 
```

缺少的部分是`# Return an 'invalid login' error message. ???`

如何重新显示带有无效登录错误消息的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:28:32.523

代替 ？？？通过。在第三行创建的 LoginForm 对象包含错误。修改模板以显示错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:32:16.950

您可以定义错误消息并呈现相同的模板。您需要将错误消息传递给模板，以便它显示在某处。

像这样的东西：

```
def sign_in(request):
    error = None
    if request.method == 'POST':
    ...
        else:
            # Return an 'invalid login' error message
            error = "Invalid username/password."
            #if you want to keep provided username, but clear password field
            form = LoginForm(initial={'username': request.POST.get('username')})

    ...
    return render(request, 'accounts/login.html', {
        'form': form, 'error': error
        }) 
```

更新模板以`error`适当显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:29:04.420

要显示表单错误，您应该使用`{{ form.name_of_field.errors }}`和`{{ form.non_field_errors }}`。在您的情况下，您可以：

```
 ...
    else:
        # Return an 'invalid login' error message.
        message = 'Your message'

return render(request, 'accounts/login.html', {
    'form': form, 'message': message
    }) 
```

您还可以使用以下方法删除不必要`if request.method == 'POST':`的：`form = LoginForm(request.POST or None)`

# c# - 安装程序不删除以前的版本

> ID：14434756
> 
> 赞同：8
> 
> 时间：2013-01-21T08:22:10.000
> 
> 标签：c#, installation, windows-installer

我有一个应用程序。为了安装应用程序，我使用了一个简单的部署项目，其参数如下：

```
DetectNewerInstalledVersion = true  
InstallAllUsers = true  
ProductCode = GUID (changing with version)  
RemovePreviousVersions = true  
UpgradeCode = GUID (Allways the same)  
Version = 1.0.5 (changing with each deployment). 
```

问题是，**这个安装程序（部署项目）永远不会删除以前的版本**。它安装在顶部，Windows 显示，我有 2 个版本的程序（即我安装的应用程序），但没有一个主题能正常工作。

* * *

**编辑**
我在 assemblyInfo: 中添加了一行：但它仍然没有任何改变。在更深入地分析了我的问题后，我意识到安装程序更改了 Program Files 文件夹中的大部分文件，但它从桌面上删除了图标并从注册表中删除了记录。在顶部安装后，我什至无法删除应用程序，因为我在控制面板 -> 程序 -> 程序和功能中看不到它。
如果我安装在上面，我将无法使用程序。但是，如果我从程序文件文件夹中运行它，它可以工作（较新版本）。如果我安装两次，一切正常（第二次安装时，向导要求修复或删除程序）。
也许这次有人有别的建议？
MSI 文件的解决方案不适合我，因为最终安装程序是 EXE 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-22T02:25:01.627

我为此苦苦挣扎了很长时间，但这很简单。

1.  去管理VS扩展并安装'Microsoft Visual Studio Installer Project' v0.9.9
2.  右键单击您的安装程序项目并转到属性。对于同一产品的不同版本，请保持属性窗口中的 UpgradeCode 变量相同。
3.  在不同的构建之间更改您的 ProductCode 变量。
4.  现在，当您在系统上安装具有相同 UpgradeCode 的产品时，安装程​​序将升级您现有的产品，并且您将在“添加/删除”窗口中只有一个程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:18:26.710

我曾经也有过一样的问题。在调用新版本的安装程序之前，我通过卸载旧版本来解决它。

此代码将通过其 ProductCode 卸载已安装的产品：

```
 try
  {
     Process p = new Process();
     p.StartInfo.UseShellExecute = false;
     p.StartInfo.CreateNoWindow = true;
     p.StartInfo.FileName = "MsiExec.exe";
     p.StartInfo.Arguments = @"/x{53A13817-D52F-4F16-AE27-68D01DA0A656} /passive";
     p.Start();
     p.WaitForExit();
  }
  catch
  {
     MessageBox.Show("Unable to uninstall Application.  Manually uninstall/reinstall to update.");
  } 
```

请记住用您的替换我的产品代码。好的部分是，如果没有安装该产品，它什么也不做。

# java - 如何编辑检票口组件以获取有关进程的信息

> ID：14434757
> 
> 赞同：2
> 
> 时间：2013-01-21T08:22:14.743
> 
> 标签：java, wicket

在我的表单中，我有 textField：

```
 add(new TextField<String>("awayScore", new PropertyModel<String>(value, "awayScore") {

                    private static final long serialVersionUID = 1L;

                    @Override
                    public String getObject() {
                        logger.info("textField");
                        return super.getObject();
                    }
                })); 
```

如您所见，我只是添加了记录器。

我在这里没有看到任何问题，但是当我运行我的应用程序时，我收到了这个错误：

```
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String
     at org.toursys.web.PlayOffPage$PlayOffForm$2$1$1.getObject(PlayOffPage.java:135) 
```

第 135 行包含：

```
return super.getObject(); 
```

我真的很困惑，因为没有覆盖这个作品

更新：

当我将代码编辑为：

```
Object value = super.getObject();
logger.error(value.getClass() + ""); 
```

此代码返回：

```
 class java.lang.Integer 
```

这真的很奇怪，因为根据编译器这应该返回 String

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:51:20.707

当你写的时候，`new PropertyModel<String>(value, "awayScore")`你承诺你的`awayScore`in`value`是一个`String`. 编译器无法验证您的声明并且没有自动转换。

在`AbstractPropertyModel`该方法`getObject`中定义为返回一个`T`将被替换为`Object`. 这就是它仍然有效的原因。一旦您覆盖返回的方法，`String`演员表就会失败。

# php - PHP float/double 存储为 MySQL DECIMAL

> ID：14434762
> 
> 赞同：4
> 
> 时间：2013-01-21T08:22:25.690
> 
> 标签：php, mysql, casting, floating-point, decimal

我在 MySQL 中存储值时遇到了一个非常奇怪的问题。前提：

我有一个`DECIMAL(15,8)`用于存储货币值的表（如订单总额），但是当我尝试插入时，例如：

```
2,45545345 
```

这被存储为

```
2.00000000 
```

我尝试了 MySQL 的 FORMAT/CAST 函数，但输出仍然相同。

这是生成查询的方式：

```
$db->query("INSERT INTO `random_table_name` SET currency_value = '" . floatval($value) . "'"); 
```

我也试过了`doubleval`，但结果一样。有趣的是，虽然同样的一段代码在几周前运行良好，但我不记得对 db 结构或 db 类可能导致这种情况的任何更改。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T08:25:09.200

使用[number_format](http://php.net/manual/en/function.number-format.php)替换`,`_`.`

像这样：

```
number_format($value, 8, '.') // 8 = number of decimals, . = decimal separator 
```

但是，您的问题似乎与当前语言环境有关。您需要查看以下内容：[setlocale()](http://php.net/manual/en/function.setlocale.php)和[localeconv](http://php.net/manual/en/function.localeconv.php)

```
setlocale(LC_ALL, 'en_US'); // NOT TESTED, read up on the appropriate syntax 
```

这是执行此操作的适当方法，替代方法是（如下所示）执行 a `str_replace(',', '.')`，但每次要输出字符串时都必须执行相反的操作。

但是还有另一个选项，您可以将 MySQL 语言环境设置为`en_US`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T08:29:26.387

在插入数据库之前替换`,`为：`.`

```
$value = str_replace( ',', '.', $value); 
```

这将创建一个有效的数字，可以安全地插入到数据库中。或者只是将它添加到您的查询中：

```
INSERT INTO `random_table_name` SET currency_value = '" . str_replace( ',', '.', $value ) . "' 
```

# android - 如何在单击第一个按钮之前禁用其他按钮

> ID：14434764
> 
> 赞同：2
> 
> 时间：2013-01-21T08:22:44.127
> 
> 标签：android, button

我是android的新手。单击第一个选项卡时，我有四个按钮。我希望用户先单击第一个按钮，而不是先随机单击其他按钮。所以需要禁用其他按钮，直到我的第一个按钮被点击，一旦第一个按钮被点击，当用户返回时，所有按钮都需要被启用。我该怎么做呢？请帮忙！！

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId() == R.id.imgbtn_details)
    {
        attendees_imgbtn.setEnabled(true);
        resources_imgbtn.setEnabled(true);
        contacts_imgbtn.setEnabled(true);
        count = 1;
        Intent detail_intent=new Intent(getActivity().getApplicationContext(),DetailsActivity.class);
        detail_intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(detail_intent);
    }
    else if(v.getId() == R.id.imgbtn_attendees && count == 0)
    {

        if(count == 1)
        {
        Intent attendee_intent = new Intent(getActivity().getApplicationContext(),AttendeesActivity.class);
        attendee_intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(attendee_intent);
        }
        else
        {
            attendees_imgbtn.setEnabled(false);
            resources_imgbtn.setEnabled(false);
            contacts_imgbtn.setEnabled(false);
        }
    }
    else if(v.getId() == R.id.imgbtn_resources && count == 0)
    {

        if(count == 1)
        {
        Intent resources_intent = new Intent(getActivity().getApplicationContext(),ResourcesActivity.class);
        resources_intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(resources_intent);
        }
        else
        {
            attendees_imgbtn.setEnabled(false);
            resources_imgbtn.setEnabled(false);
            contacts_imgbtn.setEnabled(false);
        }
    }
    else if(v.getId() == R.id.imgbtn_contacts && count == 0)
    {

        if(count == 1)
        {
        Intent contact_intent = new Intent(getActivity().getApplicationContext(),ContactsActivity.class);
        contact_intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(contact_intent);
        }
        else
        {
            attendees_imgbtn.setEnabled(false);
            resources_imgbtn.setEnabled(false);
            contacts_imgbtn.setEnabled(false);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:25:13.563

用于`setEnable(true)`按钮启用和禁用按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:39:57.050

定义一个静态布尔变量 wasClicked....如果单击了 but1，则使变量为 true，否则为 false...覆盖此方法....当用户返回时，它将首先检查而不是启用或禁用第一个但是否被单击。

```
 @Override
     protected void onResume() {
    // TODO Auto-generated method stub
     if(!wasClicked){
        but2.setClickable(false);       
        but3.setClickable(false);
        but4.setClickable(false);           
     }else{
        but2.setClickable(true);        
        but3.setClickable(true);
        but4.setClickable(true);            
     }

     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:28:15.263

试试这个代码：

```
Public static boolean enable_buttons = false;

  if(enable_buttons == false){   
    button2.setEnable(false);
    button3.setEnable(false);
    button4.setEnable(false);
  }else{
    button2.setEnable(true);
    button3.setEnable(true);
    button4.setEnable(true);
  }
button1.setOnClickListener(new OnClickListener() {           

  @Override
  public void onClick(View v) 
  {
      button2.setEnable(true);
      button3.setEnable(true);
      button4.setEnable(true);
      enable_buttons = true;
  }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:48:43.820

我认为您需要传递变量来指定是否要启用按钮。

第一次，将其传递为：

```
Intent intent = new Intent (this, NextAct.class);
intent.putExtra ("ENABLE", "No"); 
```

当您想要启用按钮时，将 String 作为 Yes 传递：

```
Intent intent = new Intent (this, NextAct.class);
intent.putExtra ("ENABLE", "YES"); 
```

然后在 NextAct 类中检查该字符串。

```
 Intent intent = getIntent();
    String enableBtn = intent.getStringExtra("ENABLE");
    if (enableBtn != null && enableBtn.equalsIgnoreCase("YES")) {
        button2.setEnabled(true);
        button3.setEnabled(true);
        button4.setEnabled(true);
    } else {
        button2.setEnabled(false);
        button3.setEnabled(false);
        button4.setEnabled(false);
    } 
```

因此，您的按钮将仅在您需要时启用。

希望有帮助。

# css - CSS表格宽度规则

> ID：14434765
> 
> 赞同：0
> 
> 时间：2013-01-21T08:22:55.367
> 
> 标签：css, richfaces

我支持旧版应用程序。

在 CSS 中有以下规则：

```
.dashboard-panel table {
    width: 100%;
} 
```

所以基本上有很多面板，并且对于其中的所有表格，都`width`设置为`100%`.

现在的问题是：在仪表板面板中，我从外部库（richfaces）中放置了一个日历控件。此日历控件使用表格来显示日期。这`width:100%`正在影响日历表。

例子：

```
<div class="dashboard-panel">
    <div id="content">
       <table id="table1"> //this is ok
            <tr>
               <td>
                  <table id="richfacesCalendarTable"> //this not ok
                  </table>
               </td>  
            </tr> 
       </table>        
    </div>
</div> 
```

这里的正确解决方案是什么？

我不想浏览此应用程序中的每个面板并在那里放置单独的样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:39:27.580

Mabye，如果您在 CSS 末尾添加类似的内容：

```
.dashboard-panel table#richfacesCalendarTable {
    width: your_desired_width_px !important;
} 
```

或者

```
.dashboard-panel table#richfacesCalendarTable {
    width: auto !important;
    display: table !important;
} 
```

很难确定，因为这只是您提供的 HTML 和 CSS 代码的一小部分。可能还有其他因素会影响您的结果。

# c# - 如何在数据网格视图特定列上设置默认文本值

> ID：14434767
> 
> 赞同：2
> 
> 时间：2013-01-21T08:23:03.947
> 
> 标签：c#, winforms, datagridview

我想在数据网格视图特定列上定义默认文本值。如果该列只能接受`DateTime`值。在表单加载时，该`DateTime`格式应该对用户可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:32:22.460

尝试

```
if (dataGridView1.Columns[i].ValueType == typeof(DateTime))
{
    dataGridView1.Columns[ColumnIndex].DefaultCellStyle.Format = "dd/MM/yyyy";
} 
```

# django - 实现 Aptana Studio + Django + Vagrant&Virtual box

> ID：14434775
> 
> 赞同：0
> 
> 时间：2013-01-21T08:23:44.037
> 
> 标签：django, aptana, virtualenv, virtualbox, vagrant

我通过 vagrant 和 virtual box 设置了我的虚拟环境。我使用 Aptana IDE 进行 django 开发，我想知道是否有办法将 aptana 中的新项目与 VM 集成。我以前使用过 virtualenv，我只是将我的 python 路径更改为包含我的 virtualenv 目录。但是，对于虚拟盒子，我不知道该怎么做。我认为这将是相同的程序，但我不这么认为。使用 Virtualenv，我能够找到我在该目录中创建的项目。当我通过 Vagrant+Virtual Box 创建项目时，我无法在任何地方找到项目目录......它不在我为虚拟环境设置的专用目录中。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T08:31:48.757

你可以用 Vagrant 做到这一点。让我给你举个例子：

**一、项目结构：**

```
/yourdjangoapp
    /... # all your app stuff here
    /manage.py
/vagrant
    /provisioning
        /init.sh
/Vagrantfile
/.project 
```

**二、/Vagrantfile**（带有默认精确64框的简单示例）：

```
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|
    config.vm.box = "precise64"
    config.vm.box_url = "http://files.vagrantup.com/precise64.box"
    config.vm.provision :shell, :path => "vagrant/provisioning/init.sh"
    config.vm.network :forwarded_port, guest: 8000, host: 8000
end 
```

三、**/vagrant/provisioning/init.sh**

```
if [ ! -f /home/vagrant/.vm_initialized ]
then
    rm -rf /var/www
    ln -fs /vagrant /var/www
    touch /home/vagrant/.vm_initialized
fi 
```

**发生了什么？**

*   Vagrant 为每个 vm 创建一个共享文件夹，默认为 quest os 中的“/vagrant”，以及您在主机上放置 Vagrantfile 的文件夹。

*   我们将配置 shell 脚本添加到我们的 Vagrant 配置中，因此 Vagrant 将在启动 VM 后运行它

*   在 /vagrant/provisioning/init.sh 我们为共享文件夹设置了一个符号链接到 /var/www （只是一个例子，所以我们可以使用 apache 访问它而无需进一步配置）

*   由于 Vagrant 将在每个“vagrant up”上运行它，我们必须检查 vm 是否已经初始化（init.sh 中的 if-block）

**然后去哪儿？**

好吧，您可以使用以下命令启动您的开发服务器：

```
python /var/www/yourdjangoapp/manage.py runserver 0.0.0.0:8000 
```

并且应该能够通过您的主机访问它

```
http://localhost:8000/ 
```

您现在可以使用您最喜欢的编辑器在主机上编辑您的项目（放置在 /yourdjangoapp 中）。

对于新项目，创建/复制项目结构。当 Vagrant 为每个项目创建一个新的 VM 时，来宾中的共享文件夹始终链接到您当前项目的文件夹。

**在没有供应商的情况下工作**

当前示例显示了我使用的设置。我的 init.sh 包括安装包、拉 GIT 存储库等内容。

当然，您可以省略提供部分并直接使用来宾操作系统中 /vagrant 中可用的共享文件夹。因此，您应该能够使用以下命令启动开发服务器：

```
python /vagrant/yourdjangoapp/manage.py runserver 0.0.0.0:8000 
```

高温高压

基督教

# javascript - 如何在javascript中获取当年的第一天？

> ID：14434777
> 
> 赞同：42
> 
> 时间：2013-01-21T08:23:47.050
> 
> 标签：javascript

我需要 javascript 代码才能获得一年中的第一天。例如，今年将是 2013 年 1 月 1 日。

明年应该是 2014 年 1 月 1 日。所以基本上是今年的第一天。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-01-21T08:31:43.927

创建一个新`Date`实例以获取当前日期，用于`getFullYear`从中获取年份，并创建一个`Date`具有年份、月份 0（一月）和日期 1 的实例：

```
var d = new Date(new Date().getFullYear(), 0, 1); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T08:29:57.313

```
var year = 2013;

var date = new Date(year, 0, 1);

console.log(date); // Tue Jan 01 2013 00:00:00 GMT+0100 (Mitteleuropäische Zeit)
```

您可以使用构造日期`new Date(YEAR,MONTH,DAY)`

所以给构造函数`year`你想要的和第一个月的第一天，你得到你的 Date 对象

*请注意，日期对象从月份开始计数为 0，因此一月 == 0*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T08:26:00.930

试试这个：

```
var timestmp = new Date().setFullYear(new Date().getFullYear(), 0, 1);
var yearFirstDay = Math.floor(timestmp / 86400000);
var day = new Date(yearFirstDay);
alert(day.getDay()); 
```

注意：该代码返回数字，因此星期日为 0，星期一为 1，依此类推。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T08:27:41.603

```
var d = new Date(2013, 0, 1).getDay(); //0 is January for some reason

alert(d); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T08:30:30.787

看看这个[小提琴](http://jsfiddle.net/hM36f/)

```
year = prompt("Enter year : ");

d = new Date(year, 0,1);

var myDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];

alert("First Day is " + myDays[d.getDay()]); 
```

# java - Socket 的 getOutputStream() 是如何工作的？

> ID：14434780
> 
> 赞同：4
> 
> 时间：2013-01-21T08:23:55.407
> 
> 标签：java, sockets

```
 { Socket s = new Socket("xxx.xx.xx.xx",10004);

    BufferedReader bufr = new BufferedReader(new InputStreamReader(System.in));

    PrintWriter out = new PrintWriter(s.getOutputStream(),true);

    BufferedReader bufIn  = new BufferedReader(new InputStreamReader(s.getInputStream()));

    String line = null;     
    while((line=bufr.readLine())!=null){
         if("over".equals(line))
             break;

         out.println(line);

         String upperStr = bufIn.readLine();
         System.out.println(upperStr);
    }

    s.close();} 
```

**out.println(line);**也是如此 意思是 1\. 输入的字符串会出现在屏幕上 2\. 内容会同时发送到服务器套接字？多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:28:12.820

您的变量`out`是 a `PrintWriter`，但这并不意味着它将打印在屏幕上。在这种情况下，你给了它一个套接字的输出流，所以它会在套接字上打印一行。如果你想让它也出现在屏幕上，你也必须调用类似`System.out.println(line)`的东西。

# sql-server - 需要一个不会因异常而回滚的 TransactionScope

> ID：14434782
> 
> 赞同：0
> 
> 时间：2013-01-21T08:24:04.267
> 
> 标签：sql-server, vb.net, exception, transactionscope

我有一些命令，如插入、更新、创建等，我想在 SQL 实例的某个数据库中运行它们。我为此使用事务范围，即使发生一些错误，我也想在所有数据库上运行所有命令。如果发生了一些错误，我想在不提交正确命令的情况下向用户显示所有错误。但是在事务中，当它遇到第一个错误时，它将被回滚，我无法继续运行其他命令。我的命令是这样的：

```
using Trans as new TransactionScope

con.open()

for i as integer = 0 to n

Try
    com.commandtext = coms(i)
    com.executenonquery()

catch ex as exception
    errorCollection.add(ex.message) 
    continue for

end try

next

end using 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:36:33.333

事务的工作方式是 SQL Server 实际上跟踪发生的任何错误。如果事务中发生任何错误，SQL Server 将声明事务错误，并且不允许在同一事务下发送任何进一步的命令。因此，即使 SQL 错误由应用程序中的 try/catch 块处理，事务在 SQL Server 上已经失败，因此在您发送下一个命令时将失败。

唯一可行的选择是基本上在事务中运行每个命令，然后回滚它们，无论它们是失败还是成功。如果一切都成功，那么您可以在一个大事务中运行它们并提交。不过，这只有在它们完全独立时才有效。

您最好的选择可能是解决它，基本上接受您可能只会遇到第一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T10:51:04.640

将异常处理移到 SQL 中，请参阅[异常处理和嵌套事务](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)。确定可以安全处理哪些异常，必须进一步提出哪些异常以及可以安全忽略哪些异常。绝大多数例外情况*不容*忽视。即使是那些可能被忽略的，绝大多数人也必须考虑*整个*事务上下文，以免数据不一致。**请注意，并非所有异常都可以通过回滚到保存点来处理，在已经销毁事务后**会引发某些异常（例如死锁）。

总体而言，我会将您的要求归类为*判断力极差*的类别。

# java - JSF 数据表过滤：占位符

> ID：14434784
> 
> 赞同：1
> 
> 时间：2013-01-21T08:24:07.093
> 
> 标签：java, javascript, jsf-2, primefaces, placeholder

由于并非我们的所有用户都保证支持 HTML 5 占位符属性，因此我试图在 JavaScript 中为它构建一个解决方法：

```
$(document).ready(function() {
    var searchInColumn = $('#searchInColumn').text();
    $(".ui-widget-glossary-editor-column-filter").on('focus', function() {
        var $this = $(this);
        if ($this.val() == searchInColumn) {
            $this.val('');
            $this.css('color', '#444444');
        }
    }).on('blur', function() {
        var $this = $(this);
        if ($this.val() == '') {
            $this.val(searchInColumn);
            $this.css('color', '#c9c9c9');
        }
    }).blur();
}); 
```

虽然这可以正常工作，但现在这当然会带来一个问题，即输入文本字段中存在实际（本地化）文本，从而触发数据表过滤器。我可以以某种方式拦截 PrimeFaces 数据表过滤，以便将此本地化占位符文本视为空字符串吗？

感谢您的建议和问候

帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:49:11.060

您的意思是您的占位符被解释为值并发送到服务器？

如果是这样，您最好使用[jq-watermark](http://code.google.com/p/jq-watermark/wiki/Instructions)正确应用水印......

# java - linkedhashmap 的重复项

> ID：14434791
> 
> 赞同：2
> 
> 时间：2013-01-21T08:24:26.083
> 
> 标签：java, duplicates, linkedhashmap

对于我输入到我的程序中的数据，我需要每个数据项的重复值和值，并且我要求数据的迭代顺序按插入顺序作为默认值。

这是我正在使用的数据类型：

```
y = m * x + c
y = 8, m = 3, x = 2, c = 2 
```

到目前为止，我一直在使用的是一个linkedHashMap 来存储我的所有数据，它满足我除了存储重复项之外的所有标准。

因此，如果我有**b + b = c**，我将无法让我的程序运行。

最好我想继续使用键和值属性的映射以及存储不同类型数据的能力，即字符串、整数。所以我更喜欢linkedhashmap保留重复项的方法。如果没有，请告诉我是否有其他方法可以满足我的所有要求。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:28:26.697

使用值类型为 Object 的 Guava 库 Multimap。查看他们的[文档](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)以获取更多信息。

```
 Multimap map = ArrayListMultimap.create();
  map.put(key, value1);
  map.put(key, value2);
  List values = map.get(key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:20:26.307

```
package com.shashi.mpoole;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.lang.reflect.Field;
import java.net.URISyntaxException;

public class LinearEquation {

    public static void main(String[] args) throws URISyntaxException {

        LinearEquation linearEquation = new LinearEquation();
         InputStream in = LinearEquation.class.getResourceAsStream("../../../Inputs.txt");

            // Inputs Taken
            try {
                // Reading Inputs
                BufferedReader reader=new BufferedReader(new InputStreamReader(in));
                String line=null;
                // Separated by Comma m=4,x=2,c=5
                    while((line=reader.readLine())!=null){
                        LinearEqInput lei = new LinearEqInput();
                        String[] inputs = line.split(",");
                        //Getting array [m=4,x=2,c=5]
                        for (int i = 0; i < inputs.length; i++) {

                            String[] keyval = inputs[i].split("=");
                            //Getting vallue [m,4]
                            linearEquation.setValue(lei, keyval[0], keyval[1]);

                        }
                        System.out.print("[Inputs: m= " + lei.m + " x= " + lei.x + " ,c= " + lei.c + "]");
                        //result
                        System.out.println(" Output :" + linearEquation.calculate(lei));

                    }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }

    // This method use reflection to store the value of a field in the class LinearEqInput
    public void setValue(LinearEqInput lei,String fieldName, String value) throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException
    {
        Field f = lei.getClass().getDeclaredField(fieldName);
        f.setDouble(lei, Double.parseDouble(value));

    }

    //Calculating the Y
    public double calculate(LinearEqInput lei)
    {
        return lei.m*lei.x + lei.c;
    }

}

class LinearEqInput
{
//Inputs
    double m,x,c = 0;

} 
```

输入文件

```
m=4,x=3,c=1
m=4,x=4,c=6
m=4,x=5,c=5
m=4,x=7,c=4
m=4,x=2,c=3
m=4,x=5,c=2 
```

输出：

```
[Inputs: m= 4.0 x= 3.0 ,c= 1.0] Output :13.0
[Inputs: m= 4.0 x= 4.0 ,c= 6.0] Output :22.0
[Inputs: m= 4.0 x= 5.0 ,c= 5.0] Output :25.0
[Inputs: m= 4.0 x= 7.0 ,c= 4.0] Output :32.0
[Inputs: m= 4.0 x= 2.0 ,c= 3.0] Output :11.0
[Inputs: m= 4.0 x= 5.0 ,c= 2.0] Output :22.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T09:27:32.610

您可以使用`Map<Integer,List<Integer>>`. 在这种数据类型中，您可以为同一个键存储多个值。您的 put 方法可以是这样的...

```
 public void put(Integer key,Integer val){
     List<Integer> arr = map.get(key);
     if(arr == null){
      arr = new ArrayList<Integer>();
      map.put(key,arr);
     }
     arr.add(val);
    } 
```

# javascript - 平板电脑上的 Javascript 问题

> ID：14434793
> 
> 赞同：0
> 
> 时间：2013-01-21T08:24:32.493
> 
> 标签：javascript, tablet

我在 webApplication 上有 3 个按钮，每次用户单击一个按钮时，它都会变为红色，而其他两个按钮变为灰色。我正在使用这段代码来做到这一点：

```
 function toogleButton(b) {

    document.getElementById("internal").setAttribute("class", "icon-home span2");
    document.getElementById("external").setAttribute("class", "icon-target span2");
    document.getElementById("unknown").setAttribute("class", "icon-help-2 span2");
    var extraClass = " bg-color-red fg-color-white"
    document.getElementById(b.id).setAttribute("class", document.getElementById(b.id).getAttribute("class") + extraClass);        
} 
```

这在台式电脑中的每个浏览器上都可以正常工作，但是当我从平板电脑（android）运行它时，按钮不会改变它们的颜色。实际上，当平板电脑转动（从横向到便携式或反之亦然）时，新刷新的页面具有按钮的新颜色，但是当按下该按钮时它不起作用。我认为问题是由浏览器（android chrome）引起的，但同样的问题也发生在 dolphin 浏览器上。

有什么解决办法吗？

# r - 在 Vegan 中使用 metaMDS() 没有稳定的解决方案

> ID：14434794
> 
> 赞同：2
> 
> 时间：2013-01-21T08:24:34.513
> 
> 标签：r, vegan

我有一个物种丰度数据集，其中有很多零，即使我`trymax = 1000`为`metaMDS()`程序设置，也无法找到压力的稳定解决方案。我已经尝试过合并数据（将多年合并以减少零的数量），但我不能再这样做了。我只是想知道是否有人知道 - 选择 R 最后给我的东西（1000 个解决方案中的最低值）在科学上是否有效，还是我不应该使用 NMDS，因为它找不到稳定的位置？互联网上似乎很少有这方面的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:03:07.603

对此的一种解释是您尝试使用太少的维度进行映射。我想您使用的是默认值`k = 2`？如果是这样，请尝试比较从 1000 次尝试中获得的*最佳*`k = 3`解决方案的压力。*`k = 2`*

 *我会有点担心从 1000 个解决方案中取出一个解决方案，因为它具有最好/最低的压力。

您还可以尝试再随机开始 1000 次，看看如果您运行更多迭代，它是否会收敛。当您从 保存输出时，您可以通过参数`metaMDS()`将该对象提供给另一个调用。然后它将进行进一步的随机启动，但将任何较低压力的解决方案与之前的最佳解决方案进行比较，并在找到与之相似的解决方案时收敛，而不是必须在 1000 次启动中找到两个相似的低压力解决方案。`metaMDS()``previous.best``trymax`*

# reporting-services - 在报告服务中按首字母分组

> ID：14434799
> 
> 赞同：0
> 
> 时间：2013-01-21T08:24:54.860
> 
> 标签：reporting-services

我有一份列出员工名单的报告。我想显示如下列表；

```
 A
                    -----------------
                    asdas
                    adfgs
                    artret

                    B
                    -----------------
                    bifjgdifg
                    buasüdp
                    bpopo

                    C
                    ----------------
                    cxasdas
                    coierewf
                    clasdksa 
```

如何将此分组类型集成到我的报告中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:34:01.313

您可以在返回数据的 SQL 语句中执行此操作，方法是添加一个仅包含第一个字母且在报告中不可见的附加列 - 然后按该列分组。

另一种方法可能是将报表组中的组字段更改为不按例如分组`=Fields!Name.Value`，而是使用字符串操作函数仅按第一个字母分组。例如，您可以尝试

```
= LEFT(Fields!Name.Value, 1) 
```

为分组。

# eclipse - Eclipse：如何将活动绑定到视图

> ID：14434803
> 
> 赞同：1
> 
> 时间：2013-01-21T08:25:11.430
> 
> 标签：eclipse, android-activity, rcp

对于我的 Eclipse rcp 应用程序，我想使用活动来显示和隐藏一些视图。我阅读了有关活动的 Eclipse 文档，并尝试根据文档中的*“使用基于表达式的活动”*片段获取一个工作示例。

在第一步中，我创建了一个新视图并在我的透视类中为其添加了一个占位符：

```
layout.addPlaceholder(View1.ID, IPageLayout.RIGHT, 0.5f, layout.getEditorArea()); 
```

*然后我使用“启用时”*表达式和绑定添加了我的活动：

```
<extension point="org.eclipse.ui.activities">
    <activity id="org.project.activities.activity1" name="myActivity">
       <enabledWhen>
           <with variable="org.project.activities.sessionState">
               <equals value="loggedIn"></equals>
           </with>
       </enabledWhen>
    </activity>
</extension>
<activityPatternBinding
    activityId="org.project.activities.activity1"
    pattern="org.project.activities/org.project.activities.View1">
</activityPatternBinding> 
```

在最后一步中，我添加了我的源提供者：

```
public class ActivitiySourceProvider extends AbstractSourceProvider {
   public static final String SESSION_STATE = "org.project.activities.sessionState";
   private static final String LOGGED_OUT = "loggedOut";
   private static final String LOGGED_IN = "loggedIn";
   private static final String[] SOURCE_NAMES = new String[] { SESSION_STATE };
   private boolean loggedIn = false;

   @Override
   public Map<String, String> getCurrentState() {
       Map<String, String> map = new HashMap<String, String>(1);
       String value = loggedIn ? LOGGED_IN : LOGGED_OUT;
       map.put(SESSION_STATE, value);
       return map;
   }

   @Override
   public String[] getProvidedSourceNames() {
       return SOURCE_NAMES;
   }

   public void setLoggedIn() {
       loggedIn = !loggedIn;
       String value = loggedIn ? LOGGED_IN : LOGGED_OUT;
       fireSourceChanged(ISources.WORKBENCH, SESSION_STATE, value);
   }
} 
```

当我启动测试应用程序时，我的视图*“ `View1`”*是隐藏的，当我切换我的变量时，视图仍然是隐藏的。为了切换我的变量，我使用了一个句柄，我没有收到任何异常。我还尝试在应用程序启动时将我的变量显式设置为*“loggedOut”*，但我也没有工作。

我是否遗漏了文档中的某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:45:22.973

`ActivitySourceProvider`您是否在扩展点的扩展中注册为源提供者`org.eclipse.ui.services`？否则它不会用于表达式评估。

# mysql - sql中的随机函数，用于两个不同表中的两个不同字段

> ID：14434808
> 
> 赞同：0
> 
> 时间：2013-01-21T08:25:31.383
> 
> 标签：mysql

我想执行一个随机函数`rand(100001, 1000000)`，它必须生成随机数`s`，它必须在两个不同的领域中是唯一的。

为了清楚地解释它，我有两个表`A`，一个表有状态记录，另一个`Submitted`表`Approved`只有`B`状态记录`Rejected`。

我有一个`ackno`在表中调用的字段`A`以及`B`与两个表字段相比需要随机且唯一的表。

这可能吗 ？任何人都可以给出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:10:33.800

随机数不会是唯一的。在这种情况下，您有 999.999 个数字，根据记录数，您可以计算 2 个数字相同的概率。

我看到了两种确保独特价值的方法。

首先你可以使用`autoincrement`. 让我们`table A`从 1`table B`开始，从 1.000.000 开始。只要`table A`行数少于一百万，就可以了。

二是使用[`uuid`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid). UUID 是一个 128 位数字，由五个十六进制数字组成的 utf8 字符串以 aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee 格式表示。

请注意，这两种方法都提供可猜测的值。如果这是一个问题，您可以向其中添加一个随机数并对其进行编码，例如：

```
SELECT SHA2(CONCAT(UUID(), RAND()), 256); 
```

# mongodb - 按距离排序的特定半径内的位置

> ID：14434818
> 
> 赞同：1
> 
> 时间：2013-01-21T08:26:40.280
> 
> 标签：mongodb, morphia, database

我对吗啡有疑问。我想查询位于某个位置周围特定半径内的位置。

但我不知道该怎么做。如果我使用“near(x,y,r)”，我会按照距离的顺序得到很多结果（最多可达限制）。但它们也是我范围之外的结果。

如果我使用的是“within(x,y,r)”，那么我确实会以错误的顺序得到我想要的结果。我可以使用什么来获取该半径内的所有位置并按距离顺序？

# javascript - 将函数与 Javascript 和 JQuery 相结合

> ID：14434827
> 
> 赞同：0
> 
> 时间：2013-01-21T08:27:28.547
> 
> 标签：javascript, jquery, ajax

我在通过一个函数组合 som javascript 函数时遇到了问题。我正在尝试建立一个小系统来展示工作。一种展示如何改进。不用于部署。

函数看起来像这样。

```
// To choose an errand or with a zero start a new errand. 
function buildErrandBox(number)
{
$.ajax({
    url: 'db/buildErrandBox.inc.php',
    type:'POST',
    dataType: 'json',
    data: { customerNumber: $("#customerNumber").val(), errandNumber: number },
    success: function(build){ $('#newErrandsBoxResult').empty(); $('#newErrandsBoxResult').append(build.buildForm); $('#newErrandsBoxTextResult').empty(); $('#newErrandsBoxTextResult').append(build.buildText); showMinorContent('#newErrands'); $('#errandArea').val(build.area); $('#errandGroup').val(build.group); $('#errandType').val(build.type); escalateOptions(); getEscalationGroups(); },
    error: function (xhr, ajaxOptions, thrownError) { alert(xhr.status); alert(thrownError); }
});
}

// To save changes on a errand. 
function saveErrand()
{
$.ajax({
    url: 'db/saveErrandsForCustomer.inc.php',
    type:'POST',
    dataType: 'json',
    data: { id: $("#errandID").val(),
            telephone: $("#errandTelephoneNumber").val(),
            email: $("#errandEmail").val(),
            area: $("#errandArea").val(),
            group: $("#errandGroup").val(),
            type: $("#errandType").val()
    },
    success: function(output_string){ showCustomerErrands(); },
    error: function (xhr, ajaxOptions, thrownError) { alert(xhr.status); alert(thrownError); }
});
}

// To save a new note on an errand. 
function saveTextForErrand()
{
$.ajax({
    url: 'db/saveErrandsText.inc.php',
    type:'POST',
    dataType: 'json',
    data: { id: $("#errandID").val(), text: $("#newTextForErrandTextArea").val() },
    success: function(output_string){ buildErrandBox($("#errandID").val()); },
    error: function (xhr, ajaxOptions, thrownError) { alert(xhr.status); alert(thrownError); }
});
} 
```

这三个单独的功能在使用网页上的按钮时起作用。首先点击开始新的差事。改变它是什么类型的差事。放一些笔记。并保存差事。一切正常。

在后台构建差事功能构建整个输入框并选择显示差事。但是保存差事的下一个函数识别差事编号并将差事保存在数据库中。

但是当我像下面这样结合这些时

```
function preMadeErrand(area, group, type, text, servicetext)
{
buildErrandBox(0); 
alert($("#errandID").val());
$('#errandArea').val(area);
changeErrandBoxes();
$("#errandGroup").val(group);
changeErrandBoxes();
$("#errandType").val(type);
$("#newTextForErrandTextArea").val(servicetext);
saveTextForErrand();
$("#newTextForErrandTextArea").val(text);
saveTextForErrand();
alert($("#errandID").val());

saveErrand();
} 
```

errandID 变为未定义。有任何想法吗？

更新！

当我在功能开始时收到警报时，它就起作用了。在尝试使用 errandID 之前，似乎构建盒子的功能还没有完成。有两个警报，第二个得到 errandID。

有没有办法让它在继续执行之前完成像 buildErrandBox(0) 这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:35:07.717

这是因为 ajax`asynchronous`在调用 alert 时是 ..。ajax 函数尚未执行.....您可以修复它的一种方法是在`buildErrandBox(0)`.. 的 ajax 成功函数之后重新排列函数并调用其他函数，这样我们可以确保仅在`buildErrandBox()`执行后调用另一个函数

```
function buildErrandBox(number)
{
  $.ajax({
    url: 'db/buildErrandBox.inc.php',
    type:'POST',
    dataType: 'json',
    data: { customerNumber: $("#customerNumber").val(), errandNumber: number },
    success: function(build){ 
                //your stuff.. 
                alert($("#errandID").val());
                $('#errandArea').val(area);
                changeErrandBoxes();
                ...
                saveTextForErrand();
                .........
                // function you want to execute here
             },
    error: function (xhr, ajaxOptions, thrownError) { 
               //your stuff
             }
 });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:41:41.660

在执行这样的异步请求时，您应该考虑使用 jQuery Deferred。

[http://api.jquery.com/jQuery.Deferred/](http://api.jquery.com/jQuery.Deferred/)

这将确保请求完成并在调用下一个函数之前返回。

其他延期资源：

[http://addyosmani.com/blog/digging-into-deferreds-1/](http://addyosmani.com/blog/digging-into-deferreds-1/)

[http://net.tutsplus.com/tutorials/javascript-ajax/wrangle-async-tasks-with-jquery-promises/](http://net.tutsplus.com/tutorials/javascript-ajax/wrangle-async-tasks-with-jquery-promises/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:47:03.263

如果您希望 AJAX 功能在继续之前完成，请将**async**选项设置为**false**：

```
$.ajax({
    url: 'db/buildErrandBox.inc.php',
    type:'POST',
    dataType: 'json',
    async: false, // <-- add this line
    ... 
```

这将**阻止**下一条语句的进一步执行，直到返回结果（或超时）。

[文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T08:45:18.577

您必须确保所有 AJAX 调用都已完成，然后您应该尝试进一步处理服务器响应。

# node.js - “工作完成”事件未在 Kue 触发

> ID：14434829
> 
> 赞同：2
> 
> 时间：2013-01-21T08:27:47.330
> 
> 标签：node.js, redis, kue

我无法弄清楚我做错了什么，也许有人可以指出。我试图弄清楚为什么我的“工作完成”事件没有触发。

```
var kue = require('kue'),           
jobs = kue.createQueue();
var util= require('util');
var job = jobs.create('test',  util.puts('123')).on('complete', function(){
    console.log("Job complete");
}).on('failed', function(){
    console.log("Job failed");
}).on('progress', function(progress){
    process.stdout.write('\r  job #' + job.id + ' ' + progress + '% complete');
}); 
```

现在，当我在节点上运行它时，它会打印 123，但它并没有说作业完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-11T16:35:01.240

这个问题很老了，但是对于那些即使放置也遇到这个问题的人来说，互联网上仍然没有解决方案`save()`......我已经为自己制定了三个步骤来解决这个问题：

**1\. 确保`save()`在设置处理程序后调用作业的方法。**

```
var job = queue.create('some process', some_args);

job.on('complete', function(result) {

  console.log('complete');

}).on('failed', function(result) {

  console.log('failed');

}).removeOnComplete(true).save(); 
```

PS 在完成时删除作业也是一个好习惯，否则你会溢出 redis 内存。

**2\. 确保您的处理程序一切正常。**
我自己尝试过事件处理程序，试图向它们传递几个参数。我的“失败”事件处理程序接受了错误代码和我通过`done(err, data)`方法传递的其他数据。这是不对的。因此，请检查文档和官方 Kue 示例，以确保您的代码没有错误。

**3\. 如果没有任何帮助，`redis-cli flushall`请在终端中执行。**
小心！！！这将删除 redis 中的所有内容。我自己是其中的菜鸟，因此它仅用作 Kue 在我的系统上的依赖项。我不确定，但我想这会破坏你可能在 redis 中使用的数据。尽管它以某种方式解决了问题，但没有其他帮助。

请大家随意提出任何其他安全的方法来使用 redis 修复 Kue。

PS 没有检查，但我想，更改工作的进程名称（在我的示例中是“某个进程”）也可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:50:16.910

我认为您需要在执行`job.save()`后运行`.create`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-06T16:53:18.537

正如[@James](https://stackoverflow.com/a/15336697/194515)提到的，您必须`.save()`在设置事件处理程序后调用。

请参阅[示例](https://github.com/LearnBoost/kue/blob/master/examples/events.js#L17-L31)。

# openerp-7 - OpenERP 自定义报告文件名

> ID：14434846
> 
> 赞同：3
> 
> 时间：2013-01-21T08:29:27.423
> 
> 标签：openerp-7

我想自定义报告文件名。

例如，当我下载发票时，我会有类似“Invoice.pdf”的文件名。我想要的是类似'invoice_number.pdf'但我不知道如何使用动态文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T11:07:08.613

我找到了 7.0 和当前主干的方法：

1.  如需快速修复，请查看以下中的 Reports 类：

    ```
    openerp-7.0\web\addons\web\controllers\main.py 
    ```

2.  报告名称在名为 file_name 的变量中设置：

    ```
    file_name = '%s.%s' % (file_name, report_struct['format']) 
    ```

3.  找到这一行并在它之前插入这个部分：

    ```
    '''
      YP: Added proc. to create reports with real object names (the object must have a field named "name"):
      eg: "PO00006.pdf" instead of "Request For Quotation.pdf" for a single object report
          "PO00006-PO00002.pdf" instead of "Request For Quotation.pdf" for a multiple objects report
    '''

    # Try to get current object model and their ids from context
    if action.has_key('context'):
        action_context = action.get('context',{})
        if action_context.has_key('active_model') and action_context.has_key('active_id'):
            action_active_model = action_context.get('active_model','')
            action_active_ids = action_context.get('active_ids', [])
            if action_active_model and action_active_ids:
                # Use built-in ORM method to get data from DB
                m = req.session.model(action_active_model)
                r = m.read(action_active_ids, False, context)
                # Parse result to create a better filename
                for i, item in enumerate(r):
                  if item.has_key('name'):
                    if i == 0: 
                      file_name = ('%s') % (item['name'])
                    else:
                      file_name = ('%s-%s') % (file_name, item['name']) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T11:57:19.653

我找到了一种解决方案，可以使用 xml 报告定义中的附件属性中的表达式来设置默认文件名，如附件文件名。

找到并修改这个文件：openerp7/openerp-web/addons/web/controllers/main.py。

搜索这句话：

```
 file_name = '%s.%s' % (file_name, report_struct['format']) 
```

然后在之前添加此代码：

```
 '''Code added by Raul Paz to set the default file_name like the attach_name
        The attach_name mach with the attachment expresion from your report_xml
        <report
            id="report_webkit.YourModule_report_id"
            model="YourModule.model"        
            name="Your_report_name"
            file="YOUR_MODULE/report/YOUR_MAKO_FILE.mako"
            string="Your Text in the print button" 
            auto="False" 
            report_type="webkit"
            attachment="'Valid_filename_expresion"
            usage="default"
        />
        And
        to modify existing report sale_report.xml to manage the name:
        create in your module a file : sale_report.xml
        <?xml version="1.0" encoding="UTF-8"?>
        <openerp>
           <data>
              <record id="sale.report_sale_order" model="ir.actions.report.xml">
                  <field name="attachment">(object.name or 'Sale Order')</field>
          <field name="attachment_use" eval="True"/>
      </record>
          </data>
        </openerp>

    '''
    try:
        if action.get('attachment_use',False) and action['attachment']:
            model = context['active_model']
            cr = openerp.pooler.get_db(req.session._db).cursor()
            uid = context['uid']
            ids = context['active_ids']
            objects=openerp.pooler.get_pool(req.session._db).get(model).browse(cr,uid,ids,context=context)
            file_name=[eval(action['attachment'],{'object':x, 'time':time}) for x in objects][0]
    except:
        pass
    #end code added 
```

好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T14:57:47.670

1.  如需快速修复，请查看以下中的 Reports 类：

    ```
    openerp-6.1\web\addons\web\controllers\main.py 
    ```

2.  报告名称设置在名为 header 的变量中。出于我的需要，我只希望报表以对象名称命名（这适用于 99% 的情况），因此我添加了一个名为 report_name 的新变量：

    ```
    report_name = action['report_name']
    if action.has_key('context'):
        action_context = action.get('context',{})
        if action_context.has_key('name'):
            report_name = action_context['name'] 

    return req.make_response(report,
         headers=[
             ('Content-Disposition', 'attachment; filename="%s.%s"' % (report_name, report_struct['format'])),
             ('Content-Type', report_mimetype),
             ('Content-Length', len(report))],
         cookies={'fileToken': int(token)}) 
    ```

# java - 从多个队列中消费

> ID：14434847
> 
> 赞同：1
> 
> 时间：2013-01-21T08:29:37.873
> 
> 标签：java, concurrency

我有大量的状态机。有时，需要将状态机从一种状态转移到另一种状态，这可能很便宜，也可能很昂贵，并且可能涉及数据库读取和写入等。

这些状态更改是由于来自客户端的传入命令而发生的，并且可以随时发生。

我想并行化工作负载。我想要一个队列说“将这台机器从这个状态移动到这个状态”。显然，任何一台机器的命令都需要按顺序执行，但如果我有很多线程，我可以并行移动多台机器。

每个状态机我可以有一个线程，但状态机的数量取决于数据，可能有数百或数千；我不想要每个状态机都有一个专用线程，我想要某种类型的池。

我怎样才能拥有一个工人池，但要确保每个状态机的命令都严格按顺序处理？

***更新***：想象一下`Machine`实例有一个未完成的命令列表。当线程池中的执行器完成了一个命令的消费后，如果它有更多未完成的命令，它将`Machine`返回到线程池的任务队列中。`Machine`所以问题是，当你追加第一个命令时，如何原子地放入并确保这都是线程安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:50:36.807

我建议你这个场景：

1.  创建线程池，可能是一些固定大小`Executors.newFixedThreadPool`
2.  创建一些结构（可能是 a `HashMap`），`Semaphore`每个状态机都有一个。该信号量的值为 1 并且是保持序列的**公平信号量**
3.  在 Runnable 中，它将完成乞求工作，只需添加`semaphore.aquire()`其状态机的信号量并`semaphore.release()`在运行方法结束时添加。

使用线程池的大小，您将控制并行度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:16:48.740

我建议另一种方法。不要使用线程池来移动状态机中的状态，而是使用线程池来处理所有事情，包括*完成工作*。在完成一些导致状态更改的工作后，应将状态更改事件添加到队列中。处理完状态更改后，应将另一个 do-work 事件添加到队列中。

假设状态转换是工作驱动的，反之亦然，则不可能进行顺序处理。

将信号量存储在特殊映射中的想法非常危险。地图必须同步（添加/删除 objs 是线程不安全的），并且执行搜索（可能在地图上同步）然后使用信号量的开销相对较大。

此外 - 如果你想在你的应用程序中使用多线程架构，我认为你应该一路走下去。混合不同的架构以后可能会很麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T09:38:07.277

每台机器都有一个线程 ID。产生所需数量的线程。让所有线程贪婪地处理来自全局队列的消息。每个线程锁定当前消息的服务器以供其自己独占使用（直到它处理完当前消息及其队列中的所有消息），其他线程将该服务器的消息放入其内部队列中。

**编辑：处理消息伪代码：**

```
void handle(message)
  targetMachine = message.targetMachine
  if (targetMachine.thread != null)
    targetMachine.thread.addToQueue(message);
  else
    targetMachine.thread = this;
    process(message);
    processAllQueueMessages();
    targetMachine.thread = null; 
```

**处理消息 Java 代码：（**我可能有点过于复杂了，但这应该是线程安全的）

```
/* class ThreadClass */
void handle(Message message)
{
  // get targetMachine from message
  targetMachine.mutexInc.aquire(); // blocking
  targetMachine.messages++;
  boolean acquired = targetMachine.mutex.aquire(); // non-blocking
  if (acquired)
    targetMachine.threadID = this.ID;
  targetMachine.mutexInc.release();
  if (!acquired)
    // can put this before release, it may speed things up
    threads[targetMachine.threadID].addToQueue(message);
  else
  {
    process(message);
    targetMachine.messages--;
    while (true)
    {
      while (!queue.empty())
      {
        process(queue.pop());
        targetMachine.messages--;
      }
      targetMachine.mutexInc.acquire(); // blocking
      if (targetMachine.messages > 0)
      {
        targetMachine.mutexInc.release();
        Thread.sleep(1);
      }
      else
        break;
    }
    targetMachine.mutex.release();
    targetMachine.mutexInc.release();
  }
} 
```

# ruby-on-rails - 使用 ruby 的 LDAP 绑定中的错误号

> ID：14434848
> 
> 赞同：4
> 
> 时间：2013-01-21T08:29:39.023
> 
> 标签：ruby-on-rails, ldap, ldapconnection

我正在使用以下代码来检查提供的参数是否正确用于绑定..

```
require 'rubygems'
require 'net/ldap'

ldap = Net::LDAP.new
ldap.host = your_server_ip_address
ldap.port = 389
ldap.auth "joe_user", "opensesame"
if ldap.bind
   # authentication succeeded
else
   # authentication failed
end 
```

如果用户和密码不正确，则返回 false，但如果主机或端口号不正确，则显示错误（异常）

```
 no connection to server (Net::LDAP::LdapError) 
```

我还想捕获此错误，并希望分别为 incoreect 用户/密码和不正确的端口/主机名显示错误消息。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-05T17:11:42.687

您可以在此处检查所有可能的异常：[https ://www.rubydoc.info/gems/net-ldap/Net/LDAP/Error](https://www.rubydoc.info/gems/net-ldap/Net/LDAP/Error)

但是有些错误不被视为异常，因此您必须使用它们来获取它们`get_operation_result`

```
ldap = Net::LDAP.new

begin
    ldap.host = '1.2.3.4'
    ldap.auth 'cn=config', 'myPassword'
    ldap.bind

rescue Net::LDAP::AuthMethodUnsupportedError => e
    puts "Net::LDAP::AuthMethodUnsupportedError: #{e}"

rescue Net::LDAP::BindingInformationInvalidError => e
    puts "Net::LDAP::BindingInformationInvalidError: #{e}"

rescue Net::LDAP::ConnectionError => e
    puts "Net::LDAP::ConnectionError: #{e}"

rescue Net::LDAP::ConnectionRefusedError => e
    puts "Net::LDAP::ConnectionRefusedError: #{e}"

rescue Net::LDAP::SocketError => e
    puts "Net::LDAP::SocketError: #{e}"

rescue StandardError => e
    # Timeout errors are rescued here
    puts "StandardError: #{e}"

end

# Wrong user/pass is not an exception and must be checked here
p ldap.get_operation_result 
```

# windows-phone-7 - 如何制作像 wp 的瓷砖桌一样的容器

> ID：14434849
> 
> 赞同：0
> 
> 时间：2013-01-21T08:29:40.177
> 
> 标签：windows-phone-7, windows-phone-7.1

我的应用程序有一个页面，其中包含画布中的一些图块布局。

现在有一些新的需求：我想让这些磁贴可以像 wp7 OS 桌面一样移动和缩放。

您能否与我分享是否有任何现有的控件（库）来实现上述功能，或者给我一个路线图如何实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:49:29.467

Telerik 有一个适用于 Windows Phone 的控件库，其中包含一个名为 HubTile 的控件。在[此处](http://www.telerik.com/products/windows-phone/overview/all-controls/hubtile.aspx "这里")查看控件是否满足您的需求。

# javascript - 使用 CustomValidator 的 ClientValidationFunction 验证文本框未触发

> ID：14434852
> 
> 赞同：0
> 
> 时间：2013-01-21T08:29:49.560
> 
> 标签：javascript, jquery, asp.net

我对此有一些严重的问题。我有两个这样的字段，它们都被分配了带有 jquery 的日期选择器。

```
<asp:TextBox ID="RTRP" runat="server" CssClass="textEntry" Width="120"></asp:TextBox>
<asp:CustomValidator runat="server" ID="CustomValidator3" 
   ControlToValidate="RTRP"
   Text="No date selected" 
   ValidateEmptyText="True"
   ClientValidationFunction="clientValidate" 
   Display="Static">
</asp:CustomValidator>
<asp:TextBox ID="ContEd" runat="server" CssClass="textEntry" Width="120"></asp:TextBox>
<asp:CustomValidator runat="server" ID="CustomValidator1"
    ControlToValidate="ContEd"
    Text="No date selected" 
    ValidateEmptyText="True"
    ClientValidationFunction="clientValidate" 
    Display="Static">
</asp:CustomValidator> 
```

用下面的 javascript 来验证它。

```
$("#<%=RTRP.ClientID %>").datepicker();
$("#<%=ContEd.ClientID %>").datepicker();

function clientValidate(sender, args) {
    args.IsValid = args.Value.length > 0;
} 
```

两者都得到了他们的日期选择器，但是验证函数只是拒绝被触发，并且总是允许表单提交。我完全迷失在这里，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:32:39.120

您正在检查一个字符串`length`是否小于 0（这永远不会是真的）：

```
function clientValidate(sender, args) {
    if (args.Value.length < 0) {
        args.IsValid = false;
    } else {
        args.IsValid = true;
    }
} 
```

我不确定这是否是你想要的（你可以简单地使用 a `RequiredFieldValidator`），但是......

```
function clientValidate(sender, args) {
    args.IsValid = args.Value.length > 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:41:23.090

将您的方法更改为此。然后重试

```
function clientValidate(sender, args)
{
  if(Page_ClientValidate())
  {
   if (args.Value.length < 0)
   {
    args.IsValid = false;
   } else
   {
    args.IsValid = true;
   }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:35:39.090

如果您将 $.datepicker() 行为分配给任何文本，并运行 page.. 您会发现覆盖 jQuery datepicker 的文本框有 css set display : none.. 所以这可能是自定义验证没有得到的原因文本框...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:36:47.840

你为什么不使用

```
<asp:RequiredFieldValidator id="id" controltovalidate="controlname" erormessage="please enter the dates"> 
</asp:RequiredFieldValidator> 
```

纠正我我错了

# silverlight - 在 windows phone 7 中本地化图像

> ID：14434857
> 
> 赞同：2
> 
> 时间：2013-01-21T08:30:07.943
> 
> 标签：silverlight, windows-phone-7, xaml, localization, windows-phone

我正在开发一个 Windows Phone 应用程序。在这里，我们在我们的应用程序中使用本地化。我们目前在我们的应用程序中支持 2 种语言。使用资源文件将文本更改为所选语言。但是我需要根据语言更改在我的应用程序中显示的一些图像。现在我通过务实地检查手机文化并更改图像路径来做到这一点。是否也可以像本地化字符串一样本地化图像文件？如果可能的话，我该怎么做？.

我用谷歌搜索了它，但没有得到任何关于在 windows phone 的应用程序中本地化图像的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:47:29.253

您可以将图像的 uri 放置到资源文件中，就像使用字符串一样（不同语言的不同资源文件中的不同 uri）并将其与绑定一起使用。

# android - Android：每次使用一次获取即时位置的最佳方式

> ID：14434860
> 
> 赞同：3
> 
> 时间：2013-01-21T08:30:19.170
> 
> 标签：android, location

我总是很难找到设备即时定位的好方法。我想要做的是每次使用应用程序（例如，当调用活动的 onCreate 时）我想知道设备在那个确切时刻的坐标，并且不再要求它们。我认为最好的方法是拥有一个类似于静态类的东西，其功能类似于：

```
coordinates getCoordinates(); 
```

一些建议/片段给？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T08:55:25.187

使用`LocationManager.getLastKnownLocation`或`LocationManager.requestSingleUpdate`。

第一个将立即返回，但如果没有可用的位置，则 可能返回*null 。*

第二个将在回调中返回您的数据，但会唤醒所需的任何提供者并获得一个好的位置（如果可能的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:08:28.677

我在[这个](https://stackoverflow.com/a/3145655/1830034)答案中找到了我真正在寻找的东西。

我只添加了两个控件；我检查是否：

*   gps_loc.getTime()（或 net_loc.getTime()）大于 System.currentTimeMillis() - 300000（5 分钟前）。在内部类GetLastLocation的方法run()中；
*   location.getAccuracy() < 100。在两个 LocationListeners（网络和 GPS）的 onLocationChanged() 方法中。

希望能帮助到你！

# ruby-on-rails - 如何启用基于法拉第和事件机同步的高性能http客户端？

> ID：14434861
> 
> 赞同：0
> 
> 时间：2013-01-21T08:30:20.620
> 
> 标签：ruby-on-rails, eventmachine, faraday

我正在重构一个 ROR 项目，该项目使用法拉第作为请求客户端，并具有预定义的适配器以与 EM 同步使用，如下所示：

```
 def which_faraday_adapter?
    if Utils::ModuleLoaded.synchrony? && Utils::ModuleLoaded.fiberpool?
      :em_synchrony
    else
      :net_http
    end
  end

  module ModuleLoaded
    def self.synchrony?
      defined?(EM::Synchrony) && EM.reactor_running?
    end

    def self.fiberpool?
      CfConsole::Application.config.middleware.middlewares.include?(Rack::FiberPool)
    end
  end 
```

我知道我可以在我的 config/application.rb 中启用 FiberPool，但是如何启用 EM.synchrony？

我是红宝石新手，具有 EM 的基本知识，但我仍然不太清楚以下内容的含义：

```
defined?(EM::Synchrony) && EM.reactor_running? 
```

因此，非常感谢任何解释和示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:46:02.333

这很简单，只需在 application.rb 中取消注释这一行：

```
config.middleware.insert_before Rails::Rack::Logger, Rack::FiberPool 
```

# sql-server - 从视图中删除子查询以使其成为索引视图

> ID：14434865
> 
> 赞同：4
> 
> 时间：2013-01-21T08:30:35.610
> 
> 标签：sql-server, views

我想为全文搜索创建一个索引视图。

我面临子查询的唯一问题，因为索引视图不允许子查询。

以下是我的查询

```
ALTER VIEW [dbo].[Demo] with SCHEMABINDING  AS
select distinct a.ID,a.Title, a.Description ,b.Name as Recipe, c.Name as Taste , d.Name as CuisineType,
STUFF((SELECT ',' + Name FROM dbo.Ingredients where ID in (select IngredientID from dbo.listingIngredients 
where listingid = a.ID ) FOR XML PATH('')), 1, 1, '') as Ingredients
from dbo.Listing as a 
inner join dbo.RecipeType b on a.RecipeTypeID = b.ID
inner join dbo.taste c on a.tasteID = c.ID
inner join dbo.CuisineType d on a.CuisineTypeID = d.ID
inner join dbo.listingIngredients e on a.ID = e.listingID
GO 
```

我正在使用子查询使用 STUFF 从成分表中获取成分作为连接字符串。 ![在此处输入图像描述](../Images/474b79a315afe408071b60f4de51b3ad.png)

有人可以告诉我如何删除这个子查询并将成分作为满足的字符串。

请告诉我

问候曼尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-14T11:29:39.217

即使您确实设法删除了子选择，查询的 XML 部分也会导致问题。

然而，一切都没有丢失。您可以将视图重写为可以索引的部分和更便宜但不能索引的另一部分。例如，您可以编写：

```
ALTER VIEW [dbo].[Demo_Part] with SCHEMABINDING  AS
select a.ID,a.Title
, a.Description 
, b.Name as Recipe
, c.Name as Taste 
, d.Name as CuisineType
, e.name
from dbo.Listing as a 
inner join dbo.RecipeType b on a.RecipeTypeID = b.ID
inner join dbo.taste c on a.tasteID = c.ID
inner join dbo.CuisineType d on a.CuisineTypeID = d.ID
inner join dbo.listingIngredients e on a.ID = e.listingID
GROUP BY a.ID,a.Title
, a.Description 
, b.Name as Recipe
, c.Name as Taste 
, d.Name as CuisineType
, e.name 
```

根据您的数据模型，您甚至可能不需要 group by。这个视图可以被索引

然后编写另一个未编入索引但替换原始视图的视图

```
CREATE VIEW [dbo].[Demo]
SELECT ...
 STUFF (...)
FROM [dbo].[Demo_Part] 
```

作为一个元答案，我要补充一点，如果您需要为这样的视图编制索引（并使用 DISTINCT），那么您的数据建模者很可能在数据模型上犯了一个很大的错误，或者您的数据访问代码效率非常低。关于这一切的一切都像是你在尝试解决糟糕的编码和建模实践。

# datatable - 具有多个条件的数据表选择SQL查询问题

> ID：14434867
> 
> 赞同：8
> 
> 时间：2013-01-21T08:30:54.993
> 
> 标签：datatable, vb.net-2010

从[这个问题](https://stackoverflow.com/questions/1990946/datatable-select-with-multiple-conditions)，它的答案几乎就是我的答案。但我面临一些 sql 查询问题，我在 VB 中有以下语句

```
Dim results As DataRow() = table.Select("A = 'foo' AND B = 'bar' AND C = 'baz'") 
```

**我想放入** `foo, bar and baz` **变量并在上述语句中使用该变量。**

```
Dim Varfoo As String = "foo"
Dim Varbar As String = "bar"
Dim Varbaz As String = "baz" 
```

我设法在语句中得到一个变量

```
 Dim results As DataRow() = table.Select("A = " + Varfoo) 
```

**但是如何使用变量插入多个排序表达式？**

**编辑：**我用**vikas**的回答解决了它，如下所示；

```
Dim results As DataRow() = table.Select("A = '" & Varfoo & "' And B = '" & Varbar & "' And C = '" & Varbaz & "'") 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T08:38:15.673

你有没有尝试过

```
Dim results As DataRow() = table.Select("A = '" & Varfoo & "'") 
```

**已编辑**

用于 OR 操作

```
Dim results As DataRow() = table.Select("A = '" & Varfoo & "' OR B = '" & Varbar & "' OR C = '" & Varbaz & "'") 
```

对于 AND 运算

```
Dim results As DataRow() = table.Select("A = '" & Varfoo & "' AND B = '" & Varbar & "' AND C = '" & Varbaz & "'") 
```

# javascript - 为什么原型的重写不成功？

> ID：14434868
> 
> 赞同：0
> 
> 时间：2013-01-21T08:31:11.717
> 
> 标签：javascript, prototype

```
function DivElement(){
    this.ctor.apply(this,arguments);
}

DivElement.prototype = {
    obj:{
        name:'',
        src:''
    },
    objName:'',
    objSrc:'',

    ctor:function(){
        this.obj.name = arguments[0];
        this.obj.src = arguments[1];
        this.objName = arguments[0];
        this.objSrc = arguments[1];
    }
}

var d1 = new DivElement('a','a.jpg');
var d2 = new DivElement('b','b.jpg');

console.log(d1.obj.src);    //b.jpg
console.log(d2.obj.src);    //b.jpg
console.log(d1.objSrc);     //a.jpg
console.log(d2.objSrc);     //b.jpg 
```

问题是为什么 d1.obj.src 不是'a.jpg'？

如果我像这样重写函数ctor：

```
ctor:function(){
    this.obj = {name:arguments[0],src:arguments[1]};
    this.objName = arguments[0];
    this.objSrc = arguments[1];
} 
```

它工作正常！

谁能告诉我那边发生了什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:40:08.417

您遇到的问题是实例`DivElement`共享相同的对象`obj`，除非您没有明确地将它分配为您的实例的属性。

所以实际发生的是在这条线上`this.obj.src = arguments[1];`

您正在覆盖被所有实例遮蔽`src`的对象的属性。`obj`

因此，一旦您`ctor`第二次执行，youz 就会用初始化的值覆盖' s的`d1`属性。`src``a``d2`

`this.objSrc = arguments[1];`是它自己的实例的 Own 属性，因此每个实例都有自己的副本，并且不会在第二次执行中被覆盖。

这同样适用于`this.obj = {name:arguments[0],src:arguments[1]};`您将对象`obj`显式分配给每个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:33:56.760

原型中的项目不会为每个新对象进行深度复制。因此，当您尝试`obj.name`从原型中使用时，所有对象都只有一个副本`obj`。因此，您的第二个对象是从第一个对象覆盖的`obj`，因此会产生混淆。原型最适用于函数或常量，而不适用于对象和数组。

最好`obj`在构造函数中添加到您的实例数据，这样每个实例都会有一个新的，如下所示：

```
function DivElement(){
    this.ctor.apply(this,arguments);
}

DivElement.prototype = {
    ctor:function(){
        this.obj = {};
        this.obj.name = arguments[0];
        this.obj.src = arguments[1];
        this.objName = arguments[0];
        this.objSrc = arguments[1];
    }
}

var d1 = new DivElement('a','a.jpg');
var d2 = new DivElement('b','b.jpg');

console.log(d1.obj.src);    //b.jpg
console.log(d2.obj.src);    //b.jpg
console.log(d1.objSrc);     //a.jpg
console.log(d2.objSrc);     //b.jpg 
```

# python - 比较长列表之间元素的有效方法

> ID：14434869
> 
> 赞同：0
> 
> 时间：2013-01-21T08:31:21.137
> 
> 标签：python, match, performance

我在文件中有两个列表：文件 1 有 200000 行，看起来像

```
MAP2K4  FLNC
MYPN    ACTN2
ACVR1   FNTA
UGT2A1  HPGDS
RPA2    STAT3
ARF1    GGA3
ARF3    ARFIP2
ARF3    ARFIP1
AKR1A1  EXOSC4
RPA2    GAS7
APP APPBP2
APLP1   DAB1
CITED2  TFAP2A
EP300   TFAP2A
APOB    MTTP
ARRB2   RALGDS
ARRB2   ZNF807 
```

文件 2 有 700000 行，如下所示：

```
MAP2K4  FLNC
MAP2K4  rs10036867
MAP2K4  ACTN2
MAP2K4  TEP1
ACTN2   MYPN
UGT2A1  NDUFAF6
RPA2    rs10109257
RPA2    rs10151961
GAS7    RPA2
APOB    PDZRN4
APOB    BICD1
ARRB2   ZNF807
ARRB2   FAM107B 
```

尽管元素的顺序不同，我仍需要获取这两个列表之间的匹配行。例如，在上面的示例中，它应该如下所示：

```
MAP2K4  FLNC
ACTN2   MYPN
RPA2    GAS7
ARRB2   ZNF807 
```

我写了以下内容，但这似乎需要永远！

```
col0_file1 = []
col1_file1 = []
col0_file2 = []
col1_file2 = []
with open('File1') as f1, open('File2') as f2:
    for line in f1:
        col0,col1 = line.split()
        col0_file1.append(col0)
        col1_file1.append(col1)
    for line in f2:
        col0,col1 = line.split()
        col0_file2.append(col0)
        col1_file2.append(col1)

result = []
for x in range(len(col0_file1)):
    for i, j in map(None, col0_file2, col1_file2):
        if i == col0_file1[x] and j == col1_file1[x]:
            result.append([i,j])
        elif j == col0_file1[x] and i == col1_file[x]:
            result.append([i,j])

with open('matching', 'w') as out:
    for elem in result:
        out.write('{a} \n'.format(a = '\t'.join(elem))) 
```

有什么办法可以简化复杂性？还是更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:37:46.900

我说，做两个`set`s 并取一个交叉点：

```
with open('File1') as f1, open('File2') as f2:
    columns_a = set(tuple(sorted(l.split())) for l in f1)
    columns_b = set(tuple(sorted(l.split())) for l in f2)

with open('matching', 'w') as out:
    for elem in columns_a  & columns_b:
        out.write('{a} \n'.format(a = '\t'.join(elem))) 
```

# c# - ASP.NET Membership.DeleteUser 从另一个应用程序

> ID：14434872
> 
> 赞同：1
> 
> 时间：2013-01-21T08:31:42.533
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我有两个应用程序，一个是主站点，另一个是管理站点。我想做的事情是从管理中删除属于主站点的用户，使用`Membership.DeleteUser`.

问题是它返回 false，尽管`Membership.GetUser`返回的是正确的用户。

微软关于 DeleteUsers 的文档说

> “从数据库中删除的用户只从配置的 applicationName 中删除。”

所以我的问题没有什么奇怪的。我尝试删除通过我的管理应用程序创建的用户并且它有效。但这不是我想要的。有任何想法吗？

```
 var muser = Membership.GetUser( userId, false );

 if( !Membership.DeleteUser( muser.UserName, true ) )
 {
    throw new Exception( "An error occurred. User not deleted." );
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:44:40.407

我假设您使用的是默认架构和`Membership`. 提供者（`Membership`,`Role`等）都包含一个`ApplicationName`属性，有目的地使用该属性，让您将一个数据库用于多个应用程序，但仍让您的用户由 app 分隔。正如文档在[http://msdn.microsoft.com/en-us/library/system.web.security.membership.applicationname%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membership.applicationname%28v=vs.100%29.aspx)`ApplicationName`中解释的那样，如果需要，您需要以编程方式更改删除当前应用程序之外的用户。

# windows-phone-8 - 在 WP8 中从 C++ 代码调用 C# 方法

> ID：14434874
> 
> 赞同：14
> 
> 时间：2013-01-21T08:31:44.677
> 
> 标签：windows-phone-8, c++-cx

我有兴趣从 Windows Phone 8 中的 C++ 代码调用 C# 方法。我已经学会了如何通过我的 C++ 代码中的委托声明将回调函数从 C# 传递给 C++ 代码，但我正在寻找是否可以做到以下任何一项：

*   直接从 C++ 代码调用某些方法。这将涉及以某种方式检查 C++ 中的 C# 对象构成，这对我来说似乎不太可能，但我想我还是会问你们所有人

*   在 C# 代码中触发事件，然后可以由 C# 方法处理

*   使用调度程序在主 UI 线程中调用 C# 回调，以便回调可以修改 UI 元素

*   在C#代码中使用dispatcher来触发事件，（本质上是以上两点的合并）

简而言之，我正在寻找尽可能多的 C++ -->C# 通信技巧，你们可以扔给我，我想学习这一切。:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T09:45:47.550

通过在 C# 代码中获取一个对象来实现 Windows RT 接口，并传递对该对象的引用，可以通过一些设置来完成上述所有操作（如果我理解正确 - 不确定到底是什么您想要处理您的 Dispatcher 示例 - 您可能希望将 Dispatcher 包装在 C# 端）。

1.  创建 Windows 运行时组件库。
2.  在 C++/CX 标头中定义 a`public interface class`以供 C# 实现（C++ 调用）（例如`ICallback`）。
3.  在 C++/CX 标头中定义 a`public ref class`以供 C++ 实现（C# 调用）（例如`CppCxClass`）。
4.  在其中添加一个`CppCxClass`传递并存储`ICallback`. （为了简洁起见，显示了一个 C++ 全局变量，我建议您查看此内容以查看是否可以找到更好的位置将其存储在您的代码库中）。

    > ```
    > ICallback^ globalCallback;
    > ...
    > void CppCxClass::SetCallback(ICallback ^callback)
    > {
    >     globalCallback = callback;
    > } 
    > ```

5.  在 C# 代码中引用 WinRT 库。

6.  C# 代码：创建`CppCxClass`using的实例`var cppObject = new CppCxClass()`。
7.  C# 代码：创建一个实现`ICallback`（例如`CSharpCallbackObject`）的类。
8.  C# 代码：将 down 的实例传递`CSharpCallbackObject`给 C++。例如`cppObject.SetCallback(new CSharpCallbackObject())`。

您现在可以使用`globalCallback->CallCsharp(L"Hello C#");`. 您应该能够扩展`ICallback`和/或`CppCxObject`完成其余任务。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-21T03:21:40.623

在尝试找出所需的代码后，我认为值得在这里发布最终版本

C++/CX

```
//.h
[Windows::Foundation::Metadata::WebHostHidden]
public interface class ICallback
{
public:
    virtual void Exec( Platform::String ^Command, Platform::String ^Param);
};
//.cpp
ICallback ^CSCallback = nullptr;
void Direct3DInterop::SetCallback( ICallback ^Callback)
{
    CSCallback = Callback;
}
//...

if (CSCallback != nullptr)
    CSCallback->Exec( "Command", "Param" ); 
```

C＃

```
public class CallbackImpl : ICallback
{
    public void Exec(String Command, String Param)
    {
        //Execute some C# code, if you call UI stuff you will need to call this too
        //Deployment.Current.Dispatcher.BeginInvoke(() => { 
        // //Lambda code
        //}
    }
}
//...
CallbackImpl CI = new CallbackImpl();
D3DComponent.SetCallback( CI); 
```

# android - Android json 解析错误（Froyo 或更少）

> ID：14434876
> 
> 赞同：1
> 
> 时间：2013-01-21T08:31:47.423
> 
> 标签：android, json

冰淇淋三明治，果冻豆就可以了。但是，它不应该与早期版本一起使用。

我不知道为什么。请给我一些建议。

json数据：

```
{
 "ANDROID" :[
    {
        "NAME"  : "homepage",
        "URL"   : "http://www.stackoverflow.com",
        "IMAGE" : "http://www.stackoverflow/menu_01.png",
        "USE_YN"    : "Y",
        "APP_YN"    : "N"
    }
   ]        
} 
```

错误日志：

```
org.json.JSONException: Value  of type java.lang.String cannot be converted to JSONObject 
```

目标来源：

```
JSONObject jobject = new JSONObject(jsondata); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:07:14.003

```
 /*"ANDROID" :[
                {
                    "NAME"  : "homepage",
                    "URL"   : "http://www.stackoverflow.com",
                    "IMAGE" : "http://www.stackoverflow/menu_01.png",
                    "USE_YN"    : "Y",
                    "APP_YN"    : "N"
                }
               ]        
            }*/

            //here is the code to parse

            try {
                String jsondata = "your server response like above statements";

                if (jsondata != null && !jsondata.equals("")
                        && jsondata.equalsIgnoreCase("null")) {
                    JSONObject jobject = new JSONObject(jsondata);

                    if (jobject != null) {
                        if (jobject.has("ANDROID")) {
                            JSONArray jsonArr = jobject.getJSONArray("ANDROID");

                            if (jsonArr != null && jsonArr.length() > 0) {
                                for (int i = 0; i < jsonArr.length(); i++) {
                                    JSONObject json = jsonArr.getJSONObject(i);

                                    if (json != null) {

                                        if (json.has("NAME")) {
                                            String name = json
                                                    .getString("NAME");
                                        }

                                        if (json.has("URL")) {
                                            String url = json.getString("URL");
                                        }

                                        if (json.has("IMAGE")) {
                                            String image = json
                                                    .getString("IMAGE");
                                        }

                                        if (json.has("USE_YN")) {
                                            String use = json
                                                    .getString("USE_YN");
                                        }

                                        if (json.has("APP_YN")) {
                                            String app = json
                                                    .getString("APP_YN");
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

# jpa - 将复合键添加到“1”端后，看到“referencedColumnNames(ID) ... 未映射到单个属性”错误，1-M 关系

> ID：14434877
> 
> 赞同：0
> 
> 时间：2013-01-21T08:31:57.747
> 
> 标签：jpa, key, composite

我有一个现有的 JPA 实体（“引用”），其 ID 列作为其从基类“BaseEntity”继承的主键（使用超类上的 @MappedSuperclass 注释）。

我在引用和另一个名为 Violation 的实体之间也有 1-M 关系。违规以前是使用外键“REFERENCE_ID”定义的，指向参考实体的“ID”列。

最近，我尝试在 Reference 实体中添加一个不相关的复合键。这不应该影响参考和违规之间的 1-M 关系。但是，当我在我的 tomcat 服务器中运行代码时，我会看到以下堆栈跟踪：

引起：org.hibernate.AnnotationException：org.qcri.copydetection.sdk.metastore.entity.Violation.reference 的 referencedColumnNames(ID) 引用 org.qcri.copydetection.sdk.metastore.entity.Reference 未映射到单个属性org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:205) ~[hibernate-annotations-3.5.6-Final.jar:3.5.6-Final] at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java :110) ~[hibernate-annotations-3.5.6-Final.jar:3.5.6-Final] at org.hibernate.cfg.AnnotationConfiguration.processEndOfQueue(AnnotationConfiguration.java:541) ~[hibernate-annotations-3.5.6- Final.jar:3.5.6-Final] 在 org.hibernate.cfg.AnnotationConfiguration.processFkSecondPassInOrder(AnnotationConfiguration.java:523) ~[hibernate-annotations-3.5.6-Final.jar:3.5.6-Final] 在 org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:380) ~[hibernate-annotations-3.5.6-Final.jar:3.5.6-Final] 在 org.hibernate.cfg.Configuration。 buildMappings(Configuration.java:1206) ~[hibernate-core-3.5.6-Final.jar:3.5.6-Final] at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1459) ~[hibernate-entitymanager -3.5.6-Final.jar:3.5.6-Final] 在 org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:193) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6- Final] at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1086) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6-Final] at org.hibernate.ejb.Ejb3Configuration.configure( Ejb3Configuration.java:685) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6-Final] 在 org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) ~[hibernate-entitymanager-3.5.6-Final.jar:3.5.6-Final] 在 org.springframework。 orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268) ~[spring-orm-3.1.2.RELEASE.jar:3.1.2.RELEASE] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java :310)~[spring-orm-3.1.2.RELEASE.jar:3.1.2.RELEASE] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)~[spring-beans- 3.1.2.RELEASE.jar:3.1.2.RELEASE] 在 org.springframework.beans.factory.support。AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE] ...省略了39个常用框架

以下是所涉及的 3 个类的代码：

```
@Entity
@Table(name = "REFERENCE")
@XmlRootElement
@XmlAccessorType(XmlAccessType.PROPERTY)
@IdClass(Reference.ContextualName.class)
public class Reference extends BaseEntity {

@Column(name= "LOCATION", unique=true)
@XmlElement
private String location;

@Id
@AttributeOverrides({
    @AttributeOverride(name = "name", column = @Column(name = "NAME")),
    @AttributeOverride(name = "account", column = @Column(name = "ACCOUNT_ID"))
})

@Column(name = "NAME")
@XmlElement
private String name;

@ManyToOne(optional=false)
@XmlTransient
@JoinColumn(name = "ACCOUNT_ID", referencedColumnName = "ID")
private Account account;

public String getLocation() {
    return location;
}

public void setLocation(String location) {
    this.location = location;
}

public Reference() {}

public Reference(String name) {
    setName(name);
}

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return this.name;
}

public Account getAccount() {
    return this.account;
}

public void setAccount(Account account) {
    this.account = account;
}

@Embeddable
private class ContextualName implements Serializable {
    private static final long serialVersionUID = -3687389984589209378L;

    @Basic(optional = false)
    @Column(name = "NAME")
    @XmlElement
    private String name;

    @ManyToOne(optional=false)
    @XmlTransient
    @JoinColumn(name = "ACCOUNT_ID", referencedColumnName = "ID")
    private Account account;

    ContextualName() {}
}
}

@MappedSuperclass
@XmlAccessorType(XmlAccessType.FIELD)
public abstract class BaseEntity {
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
@XmlElement
private Long id;

@Basic(optional = true)
@Column(name = "CREATED", insertable = false, updatable = false, columnDefinition="TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
@Temporal(TemporalType.TIMESTAMP)
@XmlElement
private Date creationDate;

protected BaseEntity() {}

public Long getId() {
    return id;
}

public void setId(Long id) {
    if(this.id==null) {
        this.id = id;
    } else if (this.id!=id) {
        throw new IllegalArgumentException("Cannot change the id after it has been set, as it is a generated field.");
    }
}

public Date getCreationDate() {
    return creationDate;
}

public void setCreationDate(Date creationDate) {
    if(this.creationDate==null) {
        this.creationDate = creationDate;
    } else if (this.creationDate!=creationDate) {
        throw new IllegalArgumentException("Cannot change the creation-date after it has been set, as it is a generated field.");
    }
}
}

@Entity
@Table(name = "VIOLATION")
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Violation extends BaseEntity {

@ManyToOne (optional=false, fetch= FetchType.EAGER)
@JoinColumn(name = "REFERENCE_ID", referencedColumnName = "ID")
private Reference reference;

@ManyToOne (optional=false, fetch= FetchType.EAGER)
@JoinColumn(name = "SUSPECT_ID", referencedColumnName = "ID")
private Suspect suspect;

@ManyToOne (optional=false, fetch= FetchType.EAGER)
@XmlTransient
@JoinColumn(name = "SEARCH_ID", referencedColumnName = "ID")
private Search search;

@Basic(optional = false)
@Column(name = "SCORE")
@XmlElement
private double score;

public Violation() {}

public Violation(Search search, Reference ref, Suspect sus, double score) {
    this.search = search;
    this.reference = ref;
    this.suspect = sus;
    this.score = score;
}

public double getScore() {
    return score;
}

public void setScore(double score) {
    this.score = score;
}

public Reference getReference() {
    return reference;
}

public void setReference(Reference reference) {
    this.reference = reference;
}

public Suspect getSuspect() {
    return suspect;
}

public void setSuspect(Suspect suspect) {
    this.suspect = suspect;
}

public Search getSearch() {
    return search;
}

public void setSearch(Search search) {
    if(this.search!=null && this.search!=search) {
        this.search.removeViolation(this);
    }
    this.search = search;
    if(search!=null) {
        if(!search.getViolations().contains(this)) {
            search.addViolation(this);
        }
    }
}
} 
```

长话短说，我完全不知道如何将复合键添加到已经具有 ID 列的现有（旧）实体。我无法删除 ID 列，也无法更改 Reference 和 Violation 之间的 1-M 关系。我一生都无法理解错误消息，因为 Violation 实体的“REFERENCE_ID”外键列被映射到引用实体的单个“ID”列。

提前谢谢了！

# java - 如何区分已知IP和未知IP

> ID：14434890
> 
> 赞同：0
> 
> 时间：2013-01-21T08:32:50.193
> 
> 标签：java, jakarta-ee, ip

我需要开发一个 Web 应用程序，它可以通过在服务器端存储一对（源 IP，有效用户名）来识别已知机器和未知机器，之前登录成功。当任何人从未知机器登录时，如何识别。托管 web 应用程序在本地主机中。是否有可能获取客户端 IP。当检索客户端 IP 时，我只得到 127.0.0.1，即 localhost。任何人有任何想法......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:03:49.587

简短的回答是您无法始终获得真实的客户端 IP 地址。

如果客户端有自己的 IP 地址并直接连接到服务器，则`HttpServletRequest.getRemoteAddr()`应该返回它。然而：

*   如果客户端的请求通过代理或反向代理到达服务器，`getRemoteAddr()`则将返回第一个上游代理地址。

*   如果客户端向服务器寻址，`localhost`则请求将*来自*本地主机。

*   如果客户端位于 NAT 网关或 IPv4 <-> IPv6 网桥后面，您可能会看到网关或网桥的 IP 地址。

然后是IP地址可能被欺骗的问题。

简而言之，*依赖*于知道真实客户端 IP 地址的安全方案通常是有问题的。

* * *

如果您的问题是由于反向代理引起的（并且看到 127.0.0.1 会暗示这一点），您可以让反向代理在请求中添加一个请求标头，以说明它看到的远程 IP 地址。然后服务器需要使用该标头而不是`getRemoteAddr()`. 但是，如果代理没有看到真实的客户端 IP 地址，这将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:42:25.977

在 Servlet 中，您可以执行以下操作：

```
public class GetAddress extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        String ip = request.getRemoteAddr();
        // now you can check if the ip exists and if not store it or do other usefull stuff ...
    }
} 
```

# java - 如何计算先绘制什么实体（使用 Slick2D 进行 2D java 渲染）

> ID：14434891
> 
> 赞同：2
> 
> 时间：2013-01-21T08:32:52.580
> 
> 标签：java

## **解释：**

**EDIT3：大规模清理，因为没有明确解释。**

我正在尝试用图块和实体构建 2D 级别。**例如**，实体是可以切割的树木。我需要为每个实体存储数据（例如，剩下多少个印章）。我希望它们具有更动态的位置（双打）和更动态的精灵宽度和高度。我的瓷砖是 32x32 像素，而我的树不会是一个瓷砖，而是一个高度大于宽度的精灵。

我希望在其他对象之前绘制更接近关卡顶部的对象。在这种情况下，树后面的角色将无法在树中或树前渲染。这种情况也适用于其他同类对象（如树）。我认为遍历实体并计算每个实体的位置可能效率太低，因为关卡中可能有很多实体。

当我做了一些研究时，我发现某些库允许存储对象及其在 MAP 中的位置（谷歌 Guava 中的 BiMap）。

## **问题：**

*   这是一种低效的方式吗.. 但是是否可以
    应用一些更改来提高渲染效率（如果是，可以优化什么）？
*   或者这是呈现实体的低效方式，是否有更好的方式（如果有，Java 中还有哪些其他方法）？
*   或者还有什么我没有列出的？

**EDIT2：**我查看了我在下面的编辑中发布的链接。似乎 Google 的 Guava（我认为这是正确的）有 BiMaps。在常规 Java 中是否有与此等价的功能？否则谷歌的图书馆可能会为我解决这个问题。但我宁愿不为这个界面安装如此庞大的库。

## **终于：**

在 StackOverflow 或互联网上的其他地方，答案很可能就在我眼前。我已经尽力寻找，但一无所获。如果您对搜索查询或任何可能对我有用的相关链接有任何建议，如果您将它们发布在评论中，我会很高兴。

感谢您花时间阅读/帮助我；）

## **编辑：**

我看过；[Java中游戏实体位置的有效映射](https://stackoverflow.com/questions/3027538/efficient-mapping-of-game-entity-positions-in-java?rq=1)。我认为它与这个问题密切相关。但我认为这不是我想要的。我将非常仔细地查看第二个答案，因为这可能会为我解决这个问题..但我不确定。

# **解决方案**

解决方案是使用数组、数组列表或其他方式来跟踪您的实体。每次滴答/更新，您将获取所有对象的 Y 坐标并将它们存储在另一个数组/arraylist/map/other 中，其大小与存储实体的位置相同。在实体的每个等效位置上，您将存储它是 Y . 然后你会用另一个循环或使用[http://www.leepoint.net/notes-java/data/arrays/70sorting.html](http://www.leepoint.net/notes-java/data/arrays/70sorting.html)来订购它。

然后在渲染时：

```
for(int i = 0; i < entityArray.length; i++)
entityArray[i].render(); 
```

当然，您可以通过仅渲染屏幕上或屏幕附近的内容来更有效地渲染它。但这基本上就是在 2D 顶视图/前视图中执行此操作的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:58:28.060

在我自己的 2d 游戏尝试中，我提出了以下解决方案：

*   使用枚举来指定游戏中不同类型的对象并赋予它们优先级（示例顺序：草、河流、树木、小动物、角色、云、鸟、GUI）
*   使所有可视对象实现允许获取此 DrawPriority 枚举的接口
*   使用基于枚举的带有比较器的列表的排序实现
*   使用列表绘制所有元素

这样，订单计算不是很昂贵，因为它只在插入可视对象时完成（在我的情况下，这是在加载关卡时完成的）。

.. 由于您已经使用了比较器，因此请在枚举优先级值相同时进行 ax/y 比较。这应该可以解决您的 y 顺序绘制问题。

# c# - Android UDP 广播有效，但直接 IP 无效

> ID：14434892
> 
> 赞同：1
> 
> 时间：2013-01-21T08:33:02.057
> 
> 标签：c#, android, udp

我发布了一个通过 UDP 与 C# 服务器应用程序通信的 Android 应用程序。我已经实现了一个“自动连接”功能，它进行广播并从服务器接收答案。手机收到回复后，手机应用程序会保存发件人 IP，并将后续消息直接发送到此 IP。还有一个手动连接功能，可将数据发送到用户输入的 IP 地址（即运行服务器应用程序的 PC 的本地 IP）。

所以，对于很多用户来说，一切都很好，但有些用户报告我说，当他们使用手动连接时，它永远不会连接；当他们使用自动连接时，服务器会收到广播消息（似乎已连接）并且手机会收到答案，但之后服务器应用程序将不会收到任何（直接）消息。这些用户的共同点是他们的PC通过有线连接到WiFi路由器，而他们的手机通过无线连接。我在我的网络上尝试过同样的事情，但它再次对我有用，没有任何问题。

可能是因为有多个网络接口（LAN 和 WLAN）？我已经在网上搜索了 1 周，但没有成功。我应该怎么办？请帮忙。

提前致谢。

# java - 如何将 OnLongClickListener 设置为 ListView 中的按钮？

> ID：14434893
> 
> 赞同：0
> 
> 时间：2013-01-21T08:33:03.597
> 
> 标签：java, android, listview

所以我想做的是，将 OnLongClickListener 设置为 ListView 按钮。我设法将一个 OnClickListener 放到它上面，我还尝试将一个 OnLongItemClick 放到我的整个 ListView 中，但问题是，当我按下项目中的某个按钮时，永远不会调用 OnLongItemClick。

我可以通过使用 android:onClick="myOnClickListener" 将 OnClickListener 放到 ListView-Rows 的 XML 文件中的按钮上，但这不适用于 OnLongClickListener。

我还尝试将 OnLongClickListener 设置为普通 OnClickListener 中的按钮，但这不是我真正想要的，因为它只是在正常单击它后才起作用。

有没有办法以编程方式将 OnLongClickListener 设置为按钮？它们在每一行中都必须是唯一的。顺便说一句，我没有扩展 ListActivity。

这是按钮的 OnClickListener：

```
//I attached this in my XML-File to the Button
public void handlerForPlus(View v) 
{
    //The LinearLayout where all my Items are in
    LinearLayout myItemLayout = (LinearLayout)v.getParent();

    //A random EditText in my Layout
    editTextCountItem = (EditText) myItemLayout.getChildAt(0);

    //The Button i want to add the OnLongClickListener to
    buttonItemPlus = (Button)myItemLayout.getChildAt(1);

    //Here i set the OnLongClickListener to the button, but I want to do this before it gets clicked normally.
    buttonItemPlus.setOnLongClickListener(this);

    editTextCountItem.setText((Integer.toString(Integer.parseInt(editTextCountItem.getText().toString()) + 1)));

    myItemLayout.refreshDrawableState();
} 
```

这是我的 ListView-Items 的 LinearLayout 的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="40" >

    <EditText
        android:id="@+id/etAnzahl"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginTop="5dp"
        android:layout_weight="5"
        android:text="0" />

    <!-- This is the Button i want to set a OnLongClickListener to. -->
    <Button
        android:id="@+id/bItemPlus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="25"
        android:onClick="handlerForPlus"
        android:text="Item" />

    <Button
        android:id="@+id/bItemMinus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:onClick="handlerForMinus"
        android:text="-" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:weightSum="10"
        android:layout_weight="5"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvPriceItemSmall"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:text="PreisS" />

        <TextView
            android:id="@+id/tvPriceItemLarge"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:text="PreisL" />

    </LinearLayout>

</LinearLayout> 
```

那么有人知道什么可以解决我的问题吗？

最好的问候，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:42:18.947

`buttonItemPlus.setOnLongClickListener(this);`对整个 ListView 有影响。我认为您正在寻找的是`buttonItemPlus.setOnItemLongClickListener(this);`对 ListView 中特定 TextView 的影响。

# php - PHP循环二进制异或

> ID：14434895
> 
> 赞同：0
> 
> 时间：2013-01-21T08:33:10.090
> 
> 标签：php

如何循环密钥只要 $text 这是我的代码：

```
function _xor($text,$key){
    for($i=0; $i<strlen($text); $i++){
        $text[$i] = intval($text[$i])^intval($key[$i]);
    }
    return $text;
} 
```

上述代码的结果不会像`$key`length那样重复`$text`。我想和re-XORed一样多重复怎么办`$key`？`$text`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:41:12.343

您必须使用模运算符才能仅使用 $key 字符串的 [0 .. strlen($key)-1] 索引。如果你把`$i % strlen($key)`你的值从零到 strlen($key) - 1 in loop

```
function _xor($text,$key){
    for($i=0; $i<strlen($text); $i++){
        $text[$i] = intval($text[$i])^intval($key[$i % strlen($key)]);
    }
    return $text;
} 
```

PS：关于模运算符的信息：[http ://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)

# google-maps-api-3 - 将谷歌地图添加到页面时出错

> ID：14434905
> 
> 赞同：-1
> 
> 时间：2013-01-21T08:34:12.780
> 
> 标签：google-maps-api-3

我正在尝试将带有标记的谷歌地图添加到我的表单中，以帮助用户选择位置，但它在某个地方出错了。

![输入表格时出错](../Images/4c1a024b60ae760a19633b8b00d827c3.png)

如您所见，地图在其区域内未正确显示。我已经在地图中放置了一个标记并在那里设置了中心，但是该标记的位置不正确，它隐藏在初始地图之外（在上面地图的右上角，而不是中心）。

当我按 F12 按钮启用 Firebug（在 firefox 中）时，地图正确显示 ![启用萤火虫时地图正确显示](../Images/b9b30d6663fd23cb67cf18caebc4fb36.png)

这是创建表单和添加谷歌地图的代码：

index.html 文件中的表单：

```
<div id="map_company" style="float: left; width: 500px;height: 350px;">
 <label style="margin-bottom: 5px;">Chọn vị trí hãng xe trên bản đồ:</label>
 <div id="map_canvas" style="width: 100%; height: 100%; position: relative;"></div>
</div> 
```

以及脚本文件中的 javascript：

```
//add map to company tab
//Set Center 
var myOptions = 
{
center: new google.maps.LatLng(21.044813, 105.79864),
zoom: 13,
mapTypeId: google.maps.MapTypeId.ROADMAP,
zoomControlOptions: {
    style: google.maps.ZoomControlStyle.SMALL
}
};
map = new google.maps.Map(document.getElementById("map_canvas"),
  myOptions);
var comMarker = new google.maps.Marker({
position: new google.maps.LatLng(21.044813, 105.79864),
    map: map,
draggable: true
});
google.maps.event.addListener(comMarker, 'dragend', function {
document.getElementById("cLat").value = this.getPosition().lat();
document.getElementById("cLon").value = this.getPosition().lng();
}); 
```

谁能帮我解决这里的问题，我什至不知道如何向谷歌解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:52:01.450

看来您使用标签。

如果是，则必须在选择带有地图的选项卡时触发地图的调整大小事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:43:07.833

给你的 map_canvas 一个固定的大小（以像素为单位，而不是百分比）并删除 position = relative。如果您使用百分比，则父节点也必须具有大小，否则就没有意义（100% 的什么？）。

```
<div id="map_canvas" style="width: 400px; height: 300px;"></div> 
```

# java - java.lang.NoClassDefFoundError: org/eclipse/draw2d/LightweightSystem

> ID：14434906
> 
> 赞同：1
> 
> 时间：2013-01-21T08:34:14.987
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, draw2d

[我正在使用 Eclipse 图形编辑框架 ( GEF](https://www.eclipse.org/gef/) )构建一个 Eclipse 插件项目。可以用我在互联网上找到的示例代码编写一个用于测试的类，代码如下：

```
public class Test {
    public static void main(String args[]){
        Shell shell = new Shell(); 
        shell.open();
        Display display = shell.getDisplay();
        LightweightSystem lws = new LightweightSystem(shell);
        IFigure panel = new Figure();
        lws.setContents(panel);
        RectangleFigure node1 = new RectangleFigure();
        RectangleFigure node2 = new RectangleFigure();
        node1.setBackgroundColor(ColorConstants.red);
        node1.setBounds(new Rectangle(30, 30, 64, 36));
        node2.setBackgroundColor(ColorConstants.blue);
        node2.setBounds(new Rectangle(300, 300, 64, 36));
        PolylineConnection conn = new PolylineConnection();
        conn.setSourceAnchor(new ChopboxAnchor(node1));
        conn.setTargetAnchor(new ChopboxAnchor(node2));
        conn.setTargetDecoration(new PolygonDecoration());
        Label label = new Label("Midpoint");
        label.setOpaque(true);
        label.setBackgroundColor(ColorConstants.buttonLightest);
        label.setBorder(new LineBorder());
        conn.add(label, new MidpointLocator(conn, 0));
        panel.add(node1);
        panel.add(node2);
        panel.add(conn);
        while (!shell.isDisposed ()) { 
            if (!display.readAndDispatch ()) 
               display.sleep (); 
        }
    }//main
} 
```

有用。

**但是**- 当我尝试在 EditorPart ( `org.eclipse.ui.IEditorPart`) 实例类中构建图形时，它变得很糟糕并给了我以下错误代码：

```
**org.eclipse.e4.core.di.InjectionException: java.lang.NoClassDefFoundError:** org/eclipse/draw2d/LightweightSystem 
```

这很奇怪，因为我只是在编辑器的`createPartControl`方法中写了 3 行：

```
Shell shell = parent.getShell();
Display display = shell.getDisplay();
LightweightSystem lws = new LightweightSystem(shell); 
```

那么有没有身体帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:55:28.287

您的依赖项设置正确吗？您需要*为*.`LightweightSystem`

# ios - 应用因不可重现的错误而被拒绝：可能的原因？

> ID：14434910
> 
> 赞同：2
> 
> 时间：2013-01-21T08:34:38.370
> 
> 标签：ios, ipad, appstore-approval

我们的一个应用最近第二次被拒绝，因为“我们发现您的应用无法在运行 iOS 6.0.1 的 iPad 上启动，无论是在 Wi-Fi 还是蜂窝网络上”。

苹果提供的崩溃日志开头是：

> Incident Identifier: CE8868A8-1C68-4161-91AD-DB50D3D5780B
> CrashReporter Key: 83b816533ead866666681b87f5736242d8aac2ff
> Hardware Model: xxx
> Process: Test Skis [29192]
> Path: /var/mobile/Applications/890E8D9C-6A17-4EA6-9A06-5503B3D35888/Test Skis.app /Test Skis 标识符：Test Skis
> 版本：??? (???)
> 代码类型：ARM（本机）
> 父进程：launchd [1]
> 
> 日期/时间：2013-01-04 19:24:52.667 -0800
> 操作系统版本：iOS 6.0.1 (10A523)
> 报告版本：104
> 
> 异常类型：EXC_CRASH (SIGABRT)
> 异常代码：0x0000000000000000, 0x0000000000000000
> 线程崩溃：0

我的问题不是关于如何解决我们特定代码中的问题，而是一个更普遍的问题：我们无法使用与 Apple 相同的二进制文件（制作 Ad Hoc 版本）、设备和操作系统版本来重现崩溃据说正在使用。

这种崩溃怎么可能发生在 Apple 审阅者的设备上，而不是我们的设备上？Apple 审阅者的设备是否以可以解释差异的非标准方式配置？

我在 Stack Overflow 上发现了另一个问题，提到了一个类似的问题，但也没有得到回答：[Apple 由于无法复制的崩溃而拒绝了应用程序](https://stackoverflow.com/questions/10347091/apple-rejected-app-due-to-a-crash-which-is-not-reproducing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:01:39.037

我的猜测是您的临时构建配置在某种程度上与您的发布/分发配置不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-02T08:42:12.343

我遇到了同样的问题，Apple 给我发了一份崩溃报告让我查看。我学会了如何符号化它们，但我的应用程序中的相关代码行不会符号化。所以我尝试进行其他一些更改并重新提交，导致同样的拒绝。

最后我要求他们发送更多详细信息，因为我在两个设备和模拟器上进行了测试。今天我看到他们“开发商从销售中删除”，然后“准备出售”。所以我想我的应用程序很好用，我这边没有任何改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:28:21.193

看起来您正在尝试实例化一个 nib（名称未知，因为崩溃报告中缺少异常原因）并且它不存在。确保应用程序所需的所有 nib 实际上是您发送给 Apple 的构建的一部分。

# android - 对从数据库中检索到的计算数据进行列表视图排序

> ID：14434915
> 
> 赞同：0
> 
> 时间：2013-01-21T08:35:07.443
> 
> 标签：android, database, listview, sorting, cursor

我有一个由自定义光标适配器填充的广告列表。我希望根据商店位置与用户的距离对列表进行排序。

我在实现这一点时遇到了一些麻烦。目前，我将商店位置作为经纬度存储在数据库中，我将其取出并进行一些计算以计算出距离。我目前只输出列表视图中每一行中每家商店的距离，但是我希望列表视图按距离排序，首先显示较近的广告。我真的想不出该怎么做。

我考虑过重新查询数据库，但是我不确定是否可以将计算出的距离与存储在某个商店的纬度/经度字段进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:41:17.870

首先我们需要使用Haversine公式从当前用户位置和目的地坐标计算距离，然后我们需要将计算出的距离存储在数据库中。最后我们可以按距离升序查询数据库。

# c# - 同一台本地计算机上的多个应用程序同时访问轻量级/（嵌入式？）SQL 数据库？

> ID：14434916
> 
> 赞同：2
> 
> 时间：2013-01-21T08:35:09.303
> 
> 标签：c#, mysql, sql, sqlite, sql-server-ce

我正在寻找一种解决方案，其中同一台机器上的多个应用程序访问同一个数据库。通常这些操作只是读取，因此我对必须提供并发写入访问也不感兴趣。

我检查了 SQL Server Express、SQL Server LocalDb、SQL CE、SQLite、MySQL，但不相信哪一个是最好的解决方案。我读到 SQL CE 允许并发读取访问，但 SQL Server LocalDb 不允许，我觉得这很奇怪，因为 MS 大肆宣传 LocalDb 是一个在功能上与 SQL Server 系列非常相似的版本，并且应该可以很容易地后来扩大规模。

我喜欢管理 5-10 个表，每个表的行数少于 5000 行，内容非常轻量级。

我正在寻找满足以下要求的解决方案：

*   同一台机器上的多个应用程序的并发读取访问
*   应该有点轻。我打算稍后将解决方案中的所有应用程序移动到另一台机器上，并且如果可能的话，我不想安装 200mb 的完整 SQL Server Ex@ress 版本。
*   应该与 VS2012 express 配合使用（sqlite 和 mysql 在这方面非常不受支持，要么不支持 EF5，要么它们没有出现在服务器资源管理器中。
*   应该是一个 SQL 解决方案，以便在 Workbench 或 Management Studio 或其他第三方应用程序等管理控制台中手动更新数据库表。
*   应该与 EF 或其他 ORM 解决方案一起使用。我希望能够创建一个实体类并从中创建一个数据库或使用类对象更新表。此外，我想从表行填充类对象集合，而无需通过 SQL 代码。

我在 .Net 4.5 中以 C# 为目标，我想这归结为 SQL CE 是否能够完成允许并发读取的任务以及我如何加载 CE 数据表并在某种管理控制台中编辑和可视化内容的问题。SQL CE 也能与 EF5 配合得很好吗？有更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:37:41.557

既然您要征求意见，[SQLite](http://www.sqlite.org/faq.html)就是我的答案。

> 我们知道没有其他嵌入式 SQL 数据库引擎支持与 SQLite 一样多的并发性。SQLite 允许多个进程一次打开数据库文件，并允许多个进程一次读取数据库。当任何进程想要写入时，它必须在其更新期间锁定整个数据库文件。但这通常只需要几毫秒。其他流程只是等待作者完成，然后继续他们的业务。其他嵌入式 SQL 数据库引擎通常只允许单个进程一次连接到数据库。

*   [SQLite 上的实体框架](http://brice-lambson.blogspot.com/2012/10/entity-framework-on-sqlite.html)

*   [System.Data.SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

**32 位 Windows (.NET Framework 4.5) 的设置**

> 此安装程序包能够安装 Visual Studio 2012 的设计时组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:51:01.877

SQL CE 与 EF5 和 VS 2012 Express 一起工作，非常轻量级，支持同一台机器上的多个阅读器，并且可以在 VS Pro+ 中结合 SQL Server Compact Toolbox 插件（或独立）进行管理（我是作者）

# iphone - 数组中的xcode重复

> ID：14434917
> 
> 赞同：-4
> 
> 时间：2013-01-21T08:35:19.293
> 
> 标签：iphone, xcode, arrays, nsarray

我有一个 NSArray，里面有一些“城镇”（从 json 数据库中获取这些城镇），但是数组中有一些城镇 2 或 3 次，我必须删除这些城镇。

我怎么解决这个问题？在 x 代码中使用 for 循环或特定函数？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:38:21.310

您可以遍历所有城镇，如果其中不存在，则仅将其添加到“uniqueItems”

```
//Towns is an array of strings in this case

NSMutableArray *uniqueItems = [NSMutableArray array];
for (NSString *town in towns)
    if (![uniqueItems containsObject:town])
        [uniqueItems addObject:town]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:38:03.257

您可以将数组转换为只能保存唯一值的 NSSet。

```
NSArray *array = ... // Your array of "towns"
NSSet *set = [[NSSet alloc] initWithArray:array];
NSArray *unique = [set allObjects]; 
```

如果您使用的是自定义数据类，请确保实现`isEqual:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:38:54.957

这是执行此操作的程序，

```
NSArray *to = // your towns;
NSSet *set = [[NSSet alloc]initWithArray:towns];
arryl = [set allObjects]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:38:58.630

一条线解决方案，您需要为非ARC项目添加自动发布

```
NSArray *array = // your array
NSArray filteredArray = [[[NSOrderedSet alloc] initWithArray:array] array]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T08:40:43.990

您可以`valueForKey`为此使用方法。这意味着您可以创建一个数组的 NSSet，然后根据键获得价值

```
NSSet *uniqueStates = [NSSet setWithArray:[myArrayOfCustomObjects valueForKey:@"state"]]; 
```

# android - Android上的Achartengine

> ID：14434919
> 
> 赞同：3
> 
> 时间：2013-01-21T08:35:30.973
> 
> 标签：android, graph, charts, achartengine

我正在使用 Achartengine 在我的应用程序中创建图表。我希望我的 X 轴是一个字符串，现在我在这里：

```
public class LineGraph {
    public Intent getIntent(Context context){
        String[] x = { "a", "b" };
        int[] y = { 1 , 2 };

        TimeSeries series = new TimeSeries("Line");
        for(int i = 0; i < x.length; i++){
            series.add(x, y);
        }

        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:45:46.403

您可以通过这种方式在 X 轴上添加自定义文本标签：

```
renderer.addXTextLabel(x, "text"); 
```

# wcf - 使用自定义用户名和密码进行 WCF 服务身份验证

> ID：14434920
> 
> 赞同：0
> 
> 时间：2013-01-21T08:35:35.127
> 
> 标签：wcf, security, authentication

我必须实现可由已知客户端使用的公共 WCF 服务。我还想使用自定义身份（不是 Windows 身份验证）对客户端进行身份验证。

我已经探索了使用自定义用户名和密码进行身份验证的 WCF 安全性。由于我必须实现异构网络的解决方案，我不能使用 Windows 身份验证。

我发现了两种方法可以将自定义身份验证合并到 WCF 中。我对以下每种方法几乎没有疑问。

**1）**通过“UserNamePasswordValidator”类。我们可以创建自定义用户名密码验证器并从数据库验证用户。这种方法非常适合实现 SSO（单点登录），因为每个请求在 SOAP 标头中都有凭据。客户不必在每次请求之前验证自己。

**问题：**

1.  这种方法是否也可以轻松扩展为授权？因为身份验证发生在通过从 SOAP 标头获取凭据来调用服务之前。凭据也不是 ObjectContext 的一部分，我觉得授权方法并不简单。
2.  要遵循这种方法，我们需要使用代理身份验证模式，为此我们需要第三方证书。是否建议采用这种方法，因为我们必须在项目中增加证书成本。
3.  如果我们使用消息安全来加密消息，为什么我们需要证书？只是为了客户身份？既然我们知道谁会使用这项服务，我们就不能在生产中使用自签名证书吗？

**2）**通过“ServiceAuthenticationManager”类。我只知道使用此类的一种方法，那就是使用 Direct authetication 模式实现解决方案。同样在验证用户身份后，我们需要通过自定义标头为所有后续请求提供其身份或令牌以实现 SSO（单点登录）

**问题：**

1.  这是公共服务的有效方法吗？我们是否应该强制用户通过每个请求中的自定义标头提供凭据（或一旦我们的服务通过身份验证后提供的令牌）？
2.  这种方法不需要认证，因此我们可以节省项目成本。这是选择这种方法的足够理由吗？

我个人觉得第一种方法很容易实现，它是在 WCF 服务中实现身份验证的更标准的方法，但唯一的问题是我们需要第三方证书。

请回答我的查询，如果可能的话，建议我的要求的最佳方法。

谢谢，

安库尔

# sharepoint-2007 - SharePoint 产品和技术配置向导：System.FormatException

> ID：14434926
> 
> 赞同：1
> 
> 时间：2013-01-21T08:35:49.983
> 
> 标签：sharepoint-2007

我是第一次使用 SharePoint 产品和技术配置向导配置 Sharepoint。在配置时，我选择了以下选项：

1.  我正在创建一个新的服务器场。
2.  输入我的机器名称作为数据库服务器名称，并指定域用户的凭据。使用 Windows 身份验证将此域用户添加到我的数据库服务器上的登录用户。
3.  指定端口号 10100 并选择 NTLM 身份验证提供程序。

单击下一步后，我收到以下错误：

**验证配置设置时出错。引发了 System.FormatException 类型的异常。附加异常信息： **输入字符串格式不正确****。**

在事件查看器中没有记录错误。但是很少记录信息级别的日志，说明“用户登录失败***”。原因：无法打开明确指定的数据库。[客户：**。**.* **.** ]'。但我可以通过 Windows 身份验证使用同一用户登录数据库。

请提出一些解决此问题的建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T08:25:22.853

我遇到了同样的问题。我用 SP1 重新安装了 SQL 2008 R2 并在 SharePoint 服务器上重新安装了 IIS。然后问题得到了解决。

# javascript - 输入的焦点不会被代码输出

> ID：14434930
> 
> 赞同：0
> 
> 时间：2013-01-21T08:36:13.110
> 
> 标签：javascript, android, html, cordova, input

我有一个`PhoneGap`2.2.0 和`Android`4.0.4 的应用程序。

当我按下输入时，我在它上面打开了 div。

我的输入和我的 Div：

```
 <input type="text" onclick="OpenDiv();" id="MyInput" />

    <div id="MyDiv">
       ...
    </div> 
```

CSS：

```
#MyDiv
{
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 5000;
    display: none;
} 
```

OpenDiv 函数：

```
function OpenSearch() {
    $('#MyDiv').css('display', 'block');
} 
```

旧版本**没问题**，在这个版本中，第一个输入的焦点没有通过，并且在我的 div 上创建了一个红色方块。

我试图把焦点移开，如下：

```
$('#MyInput').blur(); 
```

而且我还尝试在 div 打开时隐藏 Android 键盘：

```
//It works for me in this application on other things
 window.cordova.plugins.SoftKeyBoard.hide(function () {
    }, function () {
    }); 
```

**没有任何帮助..**

我的 div 上方仍然保留着红色方块，

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:39:12.680

你有没有尝试过：`document.activeElement.blur();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:52:26.983

当打开 div 时，我**隐藏**了输入，然后焦点就出来了。

这是一个非常严重的错误，它**是焦点来自输入的唯一方式**，

但这是**唯一**对我有用的解决方案。

这里的代码：

```
function OpenSearch() {
    $('#MyInput').css('display', 'none');
    $('#MyDiv').css('display', 'block');
} 
```

# c++ - 具有默认实现的抽象工厂设计模式

> ID：14434931
> 
> 赞同：2
> 
> 时间：2013-01-21T08:36:28.480
> 
> 标签：c++, design-patterns, abstract-class

我必须根据客户类型创建对象系列。我有一个基本抽象类 ApplicationRulesFactory，它定义了虚拟接口。许多具体的客户类都继承自这个类。

问题是对于一些客户说 CustomerB 我们不使用对象 Rule2 和 Rule3 因为应用程序中使用这些对象 Rule2 和 Rule3 的功能在该客户的应用程序用户界面中被禁用，所以我们真的不需要完全实例化这些对象。

简化的代码在这里，即实际上 ApplicationRulesFactory 有更多的虚拟方法，以及从它继承的更具体的客户类：

```
class ApplicationRulesFactory
{
  virtual Rule1*  GetRule1() = 0;
  virtual Rule2*  GetRule2() = 0;
  virtual Rule3*  GetRule3() = 0;   
  .....
};

class ACustomerRulesFactory : public ApplicationRulesFactory
{
   Rule1* GetRule1()
   {
     return new ACustomerRule1();
   }

  Rule2 * GetRule2()
  {
    return new ACustomerRule2();
  }  

 Rule3* GetRule3()
 {
   return new ACustomerRule3();
 }  
};  

class BCustomerRulesFactory : public ApplicationRulesFactory
{
    Rule1* GetRule1()
    {
      return new BCustomerRule1();
    }
    Rule2* GetRule2() // not needed
    {
      // what to return here ?
    }  
    Rule3* GetRule3() // not needed
    {
     // what to return here ?
    }
}; 
```

那么我应该如何去实现这个：

1) 在基类 ApplicationRulesFactory 中返回一些默认实现：

```
class ApplicationRulesFactory
{
  virtual Rule1*  GetRule1() = 0;
  virtual Rule2*  GetRule2()  { return new Rule2DefaultImpl();}
  virtual Rule3*  GetRule3()  { return new Rule3DefaultIml();}   
}; 
```

但这似乎是错误的，从 Rule1，Rule2 继承新类（Rule1DefaultImpl，Rule2DefaultImpl），并可能使它们具有空实现，只是为了像 ApplicationRulesFactory 中的默认实现一样返回它们

2）或在具体类中返回默认实现并将这些方法保留在基类中纯虚拟

```
class BCustomerRulesFactory : public ApplicationRulesFactory
{
  Rule1* GetRule1()
  {
     return new BCustomerRule1();
  }

  Rule2* GetRule2() 
  {
    return new Rule2DefaultImpl();
  }

 Rule3* GetRule3() 
 {
    return new Rule3DefaultImpl();
 }
}; 
```

这些解决方案似乎也很难重新定义每个具体客户类中的方法，尽管它们不是必需的。

3) 另外我有一种感觉，也许我不应该像这样使用继承，因为这违反了继承的 IS-A 规则，导致大量方法不适用于所有具体的客户类，但不要如何在没有继承的情况下实现这一点。

有任何想法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:56:07.563

如果`ApplicationRulesFactory`对某些类型没有意义`Customers`，那么它就不是适合您的抽象。

您的域`knows`有什么意义，那么为什么要要求`Rule2`and `Rule3`？

使知道它只需要的对象`Rule1`使用只提供它的工厂`Rule1`。给它一个上下文，这样它就可以得到它需要的工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:47:06.117

您似乎将界面和工厂混合在一起。当然，接口本身应该是一个类，具有各种规则，这些规则在基类中具有默认行为，然后在派生类中具有覆盖行为，然后工厂返回一个指向实现正确规则的请求类的指针对于那种情况。

但也许我误解了你想要达到的目标......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:45:32.077

如果这些规则永远无法使用，我建议只从基类实现返回一个空指针（主要像您的选项之一，除了甚至不打扰默认实现，因为它永远不会被调用）。

# android - Android：更改 BroadcastReceiver 中的变量值？

> ID：14434933
> 
> 赞同：0
> 
> 时间：2013-01-21T08:36:30.200
> 
> 标签：android, broadcastreceiver, android-broadcast

我的应用程序逻辑是，将一些数据保存在本地，并通过`BroadcastReceiver`.

而且我还有一个功能是通过按钮手动发送数据。

这里的问题是如果我手动同步数据并且在后端发生自动同步并且我得到重复值。

所以给我一些解决方案。

现在我正在做的意思是制作一个**布尔**值，`true`如`BroadcastReceiver(SyncAlarmReceiver.java)`

```
public void onReceive(Context context, Intent intent) {
    isAutoSync = true; }` 
```

并在手动同步活动中

```
if (!SyncAlarmReceiver.isAutoSync) {
    // then send data to server
} 
```

**但是布尔值没有改变。**

请给我一些解决方案。

# shell - 如果文件不在当前目录中，则在父目录中查找文件

> ID：14434934
> 
> 赞同：1
> 
> 时间：2013-01-21T08:36:33.843
> 
> 标签：shell, zsh

我正在尝试制作一个在当前目录中查找文件存在的 shell 函数。如果当前目录不存在该文件，它应该尝试父目录，并向上到文件系统的根目录（向上到 ~ 应该绰绰有余）。

我想要实现的是在我的提示下显示用于项目的当前 ruby​​ on rails 版本。简单的方法是调用`bundle show rails`和解析字符串，但是速度很慢；所以我想解析包含版本信息的文件，`Gemfile.lock`. 我目前所拥有的仅在我位于项目的根目录（Gemfile.lock 所在的位置）时才有效。

这也可以用于解析 git 配置文件，尽管`git config`速度非常快。

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:45:00.830

像这样？

```
#!/bin/zsh

# the function    
findfile_parent() {
 FILE=$1
 while [ ! -e "${FILE}" ]; do
  if [ "$(pwd)" = "/" ]; then
    return
  fi
  cd ..
 done
 echo "$(pwd)/${FILE}"
}

# usage example
SEARCHFILE=foo.pyl
UPFILE=$(findfile_parent ${SEARCHFILE})
if [ "x${UPFILE}" != "x" ]; then
 echo "found file ${SEARCHFILE} as ${UPFILE}"
else
 echo "couldn't find file ${SEARCHFILE}"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:55:58.803

请参阅以下两个有用的链接以找出您的解决方案。

[获取Ruby中当前目录的父目录](https://stackoverflow.com/questions/8660732/get-parent-directory-of-current-directory-in-ruby)

[如何检查文件是否存在](https://stackoverflow.com/questions/8590098/ruby-function-to-check-file-existence)

):

# ios - 如何在 UINavigationBar 下方绘制主视图，以便当栏显示/隐藏时，视图不受影响？

> ID：14434936
> 
> 赞同：0
> 
> 时间：2013-01-21T08:36:40.160
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uikit, uinavigationbar

情况如下：

我正在使用 Autolayout 和 UINavigationController 为带有 iOS 6 的 iPad 制作应用程序。我想做的是：

使用标准的 push segue 从一个视图控制器到下一个视图控制器。当我到达新的视图控制器时，用动画隐藏导航栏。当导航栏隐藏时，我希望我的视图根本不会改变。事实上，我希望我的视图从一开始就有效地绘制在导航栏下方，所以我没有移动或移动内容，也没有黑条。作为参考，当您阅读一本书时，Amazon Kindle 应用程序中会发生这种情况。

使用我当前的代码，我的视图内容向上移动以填充 UINavigationBar 留下的空白。

我尝试在我的 viewcontroller 的 viewWillAppear 方法中将 UIViewController 的视图和 UINavigationController 的视图的框架强制设置为整个 iPad 屏幕，但没有骰子。我已经在 Autolayout 中尝试了约束，但这也没有让我到达我想去的地方。

您能提供的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:26:11.747

在为导航栏设置动画之前尝试以下操作：

```
self.navigationController.navigationBar.alpha = 0.99f; 
```

我没有尝试过，但这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:59:13.873

看起来您需要在新视图中添加自定义导航栏并将其动画化以使其消失。

我认为，在不移动视图的情况下隐藏导航控制器的原始导航栏是不可能的。

而是将 UINavigationBar 添加到 xib 文件，将其绑定到 IBOutlet uiNavigationBar 并尝试以下代码

```
-(void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:NO];
}

- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [UIView animateWithDuration:0.3f delay:0.0f options:UIViewAnimationOptionCurveEaseInOut animations:^{
        CGRect f = self.uiNavigationBar.frame;
        f.origin = CGPointMake(f.origin.x, f.origin.y - 44);
        self.uiNavigationBar.frame = f;
    } completion:^(BOOL finished) {
        NSLog(@"done");
    }];
} 
```

# css - 将 `!important` 添加到 mixin

> ID：14434940
> 
> 赞同：7
> 
> 时间：2013-01-21T08:36:51.737
> 
> 标签：css, sass

我想添加`!important`到一个mixin。我尝试了以下两种方法，它们都返回错误：

```
@include linear-gradient(hsl(68%, 94%, 90%), hsl(68%, 90%, 80%)); !important

@include linear-gradient(hsl(68%, 94%, 90%), hsl(68%, 90%, 80%)) !important; 
```

有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-03-11T13:39:42.240

在某些情况下，我使用一个名为的可选参数`$important`，我可以传入`true`.

例子：

```
my-mixin($important: true); 
```

它看起来像这样，带有一个辅助函数，以避免重复我必须切换的属性`important`：

```
@function if-important($important){
  @return #{if($important, '!important', '')};
}

@mixin my-mixin($important: false) {
  border-radius: 0; //whatever
  border: 1px solid #ccc if-important($important);
  background-color: #fff if-important($important);
  color: #000 if-important($important);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T09:04:03.937

!important 不能在 mixin 中使用。请参阅以下链接。

[使用 Compass Mixin 添加 !important](https://stackoverflow.com/questions/7115959/adding-important-using-a-compass-mixin)

[https://github.com/cloudhead/less.js/issues/547](https://github.com/cloudhead/less.js/issues/547)

):

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:45:28.193

你不能在 Mixin 上使用 !important。

它最终会给你一个 SASS 语法错误。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/7115959/adding-important-using-a-compass-mixin)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-15T11:40:12.263

尝试将其作为参数传递：

```
@mixin anim($params...){

  $values: null;

  @for $i from 0 to length($params) {

    @debug #{nth($params, $i + 1)};

    @if '#{nth($params, $i + 1)}' != '!important' {
      $values: #{nth($params, $i + 1)} $animation__time $animation__easing, $values;
    }
  }
  @if '#{nth($params, length($params))}' != '!important' {
    transition: $values;
  }
  @else {
    transition: $values !important;
  }

} 
```

用法：

```
@include anim(background-color, color, !important); 
```

# android - Android App 上的 TOP 和 BOTTOM 上的 ActionBar

> ID：14434942
> 
> 赞同：0
> 
> 时间：2013-01-21T08:36:56.377
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在开发一个 Android 应用程序，我希望有 2 个 ActionBar（一个在顶部，另一个在底部），如下所示：http: [//developer.android.com/design/media/action_bar_pattern_considerations.png](http://developer.android.com/design/media/action_bar_pattern_considerations.png)

我正在使用[Actionbar Sherlock](http://actionbarsherlock.com/)，现在我只创建了顶部的 ActionBar。我在网上搜索，但我还没有找到解决方案，只有一些代码。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:13:30.797

看看以下链接：

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

[如何强制操作栏位于 ICS 的底部？](https://stackoverflow.com/questions/8465258/how-can-i-force-the-action-bar-to-be-at-the-bottom-in-ics)

[更改 Android 操作栏的位置](https://stackoverflow.com/questions/9132066/changing-position-of-android-action-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T14:31:38.083

尝试这个...

```
public class MainActivity extends SherlockActivity {

    private View contentView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        contentView = getLayoutInflater().inflate(R.layout.activity_main, null);
        setContentView(contentView);
        LinearLayout layout = (LinearLayout) contentView.getParent().getParent();
        View view = layout.getChildAt(0);
        layout.removeViewAt(0);
        layout.addView(view);
    } 
```

# c++ - 如何继承模板结构运算符（）？

> ID：14434946
> 
> 赞同：-1
> 
> 时间：2013-01-21T08:37:11.823
> 
> 标签：c++, templates

我试试

```
template<class T>
struct getData
{
    boost::shared_ptr<T> operator()()
    {
        return boost::shared_ptr<T>(new T());
    }
};

struct getVector : public getData<std::vector<int>>{}; 
```

我想`()`通过继承指定返回......但它似乎没有返回所需的类型。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:38:34.787

您不需要返回类型吗

```
boost::shared_ptr<T> operator()()
^^^^^^^^^^^^^^^^^^^^
{
    return boost::shared_ptr<T>(new T());
} 
```

# plugins - Dynamics CRM - 创建插件以将新的逻辑运算符添加到高级查找中

> ID：14434950
> 
> 赞同：1
> 
> 时间：2013-01-21T08:37:22.243
> 
> 标签：plugins, dynamics-crm-2011, advanced-search

我正在尝试在 Dynamics CRM 2011 中的高级查找中添加一个新选项，但我无法找到是否有办法做到这一点。

原因是我想获取当前用户，然后使用他们的一个属性来减少找到的项目列表，例如用户列表说他们照顾德克萨斯州的所有汽车销售，而不是显示德克萨斯州的所有销售对于 Cars 和 Vans，我只想展示 Cars。但是，还有其他人想要查看列表并查看 Cars 和 Vans 的所有销售，因此我无法设置所有者 - 如果这有意义的话。

所以我想做的是在高级查找中添加一个选项，这样我就可以说出所有汽车在当前用户感兴趣的汽车列表中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:25:42.253

您可以在不创建插件的情况下做到这一点...在编辑过滤器上，您选择对象作为关系对象，而不是实际字段。例如：

当您选择该字段时，转到组合框中的“相关”部分：

![在组合框中选择“相关”部分。](../Images/024ece7a017018182da362dd2ab1cbca.png)

完成此操作后，您可以将它们链接回您想要的部分：

![多个连锁项目](../Images/77620345178a76185ce117e3c783548c.png)

因此，只要创建了所有关系等，实际上就不需要创建插件。

# windows-phone-8 - 将 WriteableBitmap 保存为 PNG

> ID：14434951
> 
> 赞同：3
> 
> 时间：2013-01-21T08:37:26.933
> 
> 标签：windows-phone-8

如何将 WriteableBitmap 保存为具有透明背景的 PNG。PNG和具有透明度的PNG之间有什么不同吗？感谢你的帮助。请给我看示例代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:23:55.660

只需通过以下链接。愿这能帮助你。

[使用 WPF 将 WriteableBitmap 保存到文件](https://stackoverflow.com/questions/11212771/save-writeablebitmap-to-file-using-wpf)

[在 WP7 上将位图保存为 PNG](https://stackoverflow.com/questions/7378946/saving-bitmap-as-png-on-wp7)

[http://www.codeproject.com/Questions/272722/Converting-WriteableBitmap-to-a-Bitmap-for-saving](http://www.codeproject.com/Questions/272722/Converting-WriteableBitmap-to-a-Bitmap-for-saving)

):

# struts2 - 如何在 Struts 2 中从 JSP 更新会话值

> ID：14434953
> 
> 赞同：0
> 
> 时间：2013-01-21T08:37:32.197
> 
> 标签：struts2, session-variables, textfield

我正在使用 Struts 2.0。我有一个具有 perName、perAge、perMail 等字段的 Java Bean Person。我想`{[1, person1], [2, person2])`在 JSP 上显示 Java Bean 的映射，并允许用户使用文本字段从同一个 JSP 更新它。bean 中有很多变量，其中一些是可编辑的，而有些则不是。

例如，perName 不可编辑，而 perAge 可编辑。我不想显示不可编辑的字段。如果我仅使用可编辑文件，则在更新后，我将不可编辑字段设为空（更新后 perName 为空）。所以我不能指定 name 属性，因为它在运行时会发生变化。所以我把它们放在 HTTP Session 中并显示它们。我正在使用指定文本字段的名称属性`#session.person[iterator index].perAge`。到目前为止，一切正常。但是，如果我更改任何文本字段中的值并尝试更新，我会得到旧的会话属性而不是更改的属性。我希望具有新更改值的旧会话属性和不可编辑字段的值应该保留在用户请求中。我不想使用 JavaScript。OGNL 或表达式是最受欢迎的。

```
public class PersonDTO implements Serializable {
    private String perName;
    private int perAge;

    public String getPerName() {
        return perName;
    }

    public void setPerName(String perName) {
        this.perName = perName;
    }

    public int getPerAge() {
        return perAge;
    }

    public void setPerAge(int perAge) {
        this.perAge = perAge;
    }
} 
```

```
 <s:form action="updatePerson" id="updatePerson">
        <table>
            <tr>
                <td>AGE:<s:textfield name="#session.person.perAge" />
                </td>
            </tr>
            <tr>
                <td><s:submit id="update" value="Update" />
                </td>
            </tr>
        </table>
    </s:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:31:08.337

谢谢你的支持。经过一天的GOOGLE，我发现无法直接使用Struts标签更新会话。您可以使用会话信息在 scriplet 中显示和更新会话，但不能直接更新会话。您可以参考[Struts2 表单来更新 Session 映射中的对象吗？](https://stackoverflow.com/questions/3719614/struts2-form-to-update-object-in-session-map)了解更多信息。再次感谢帮助！！！

# python - Python GI Notify 如何调用 Gtk.main()？

> ID：14434958
> 
> 赞同：2
> 
> 时间：2013-01-21T08:38:03.363
> 
> 标签：python, notify, pygobject, gobject-introspection

我正在尝试创建一个 Python 通知应用程序。简而言之，这是我想做的：
1\. 检查我的 gmail 帐户
2\. 显示未读邮件数量的通知
3\. 显示一个允许我打开 chromium 的按钮（使用系统调用）

现在一切看起来都很好。检查邮件部分很容易。我序列化了我的未读邮件计数，这样通知就不会每分钟都出现。它仅在我有新邮件时显示。
我阻止的地方是我不知道如何创建主 gtk 循环以便我可以处理按钮信号。

这是我的代码：

```
#!/usr/bin/python

from gi.repository import Notify, Gtk, GLib
from urllib.request import FancyURLopener
from datetime import datetime, date, time, timedelta
import os.path, sys, getopt
from subprocess import call

serialisedvalue=0;
serialiseddate=0;

def callback():
        call(["chromium", "gmail.com"])

def serialise(unread):
        try:
                f = open("mailcount", "w")
                try:
                        f.write(unread+"\n") # Write a string to a file
                        f.write(datetime.now().strftime('%b %d %Y %I:%M%p'))
                finally:
                        f.close()
        except IOError:
                pass

def deserialise():
        global serialisedvalue
        global serialiseddate
        try:
                f = open("mailcount", "r")
                try:
                        serialisedvalue = f.readline().rstrip()
                        serialiseddate = datetime.strptime(f.readline(), '%b %d %Y %I:%M%p')
                finally:
                        f.close()
        except IOError:
                pass

def notif(unread):
        Notify.init ("New Mail")
        if unread != "1":
                Hello=Notify.Notification.new ("New mail","You have "+unread+" unread mails","/usr/share/icons/Faenza/actions/96/mail-forward.png")
        else :
                Hello=Notify.Notification.new ("New mail","You have "+unread+" unread mails","/usr/share/icons/Faenza/actions/96/mail-forward.png")
        Hello.add_action('action', 'Read', callback, None, None)
        Hello.show ()

def main(argv):

        notify=0
        forced=0
        try:
                opts, args = getopt.getopt(argv,"nf",['notify','force-notify'])
        except getopt.GetoptError:
                print("unreadgmail.py [-n --notify] [-f --force-notify")
                sys.exit(2)
        for opt,args in opts:
                if opt in ("-n", "--notify"):
                        notify=1
                elif opt in ("-f","--force-notify"):
                        forced=1
        url = 'https://%s:%s@mail.google.com/mail/feed/atom' % ("myaccount", "mypassword")
        opener = FancyURLopener()
        page = opener.open(url)
        contents = page.read().decode('utf-8')
        ifrom = contents.index('<fullcount>') + 11
        ito   = contents.index('</fullcount>')
        unread = contents[ifrom:ito]
        print("Unread messages : "+unread)
        if notify==1 and forced==0:
                if os.path.exists("mailcount"):
                        deserialise()
                else:
                        serialise(unread)
                        deserialise()
                if unread != "0":
                        if unread != serialisedvalue:
                                notif(unread)
                                serialise(unread)
                        elif ((datetime.now() - serialiseddate) > timedelta(hours=1)):
                                notif(unread)
        if forced==1:
                notif(unread)
        GLib.MainLoop().run()

if __name__ == "__main__":
   main(sys.argv[1:]) 
```

我记得我的通知过去可以与 pygtk 和 pynotify 一起正常工作。虽然我想更新我的代码并且因为我丢失了最后一个代码，但我对此一无所知。在我的 main 中调用 Gtk.main() 只会阻止程序，直到我杀死它。

我正在使用 Gnome3.6、Archlinux 和 python3.3。
那么有谁知道如何在程序结束之前“等待”信号处理程序被点击？事实上它运行良好，但脚本只是在显示通知时结束并且它不等待信号。

非常感谢 ：）

编辑：我的问题的更多细节： ![最终结果](../Images/68ed4785f31de65e523098f8813cee8d.png)
如您所见，程序已经结束并且不等待信号。这就是我现在要解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:11:13.567

如果你没有使用 GTK+——据我所知没有——你可能会在函数`GLib.MainLoop().run()`结束时`main`调用以保持程序运行。

# image-processing - 在matlab中更改灰度图像中的灰度级数

> ID：14434963
> 
> 赞同：6
> 
> 时间：2013-01-21T08:38:16.133
> 
> 标签：image-processing, matlab

我对matlab相当陌生，但我希望有人可以帮助解决这个问题。所以我有一张彩色图像，我想将其转换为灰度，然后减少灰度级的数量。所以我读入图像并使用 rgb2gray() 将图像转换为灰度。但是，我不确定如何将图像转换为仅使用 32 个灰度级而不是 255 个灰度级。

我试图使用颜色图（灰色（32）），但这似乎对绘制的图像本身或图像下的颜色条没有影响。所以我不知道还能去哪里看。那里有任何提示吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:41:40.080

虽然`result = (img/8)*8`确实将 [0, 255] 范围内的灰度图像转换为该范围的子集，但现在仅使用 32 个值，但它可能会产生不希望的伪影。一种可能产生视觉效果更好的图像的方法称为改进灰度量化（简称 IGS）。执行它的伪代码可以如下给出：

```
mult = 256 / (2^bits)
mask = 2^(8 - bits) - 1
prev_sum = 0
for x = 1 to width
    for y = 1 to height
        value = img[x, y]
        if value >> bits != mask:
            prev_sum = value + (prev_sum & mask)
        else:
            prev_sum = value
        res[x, y] = (prev_sum >> (8 - bits)) * mult 
```

例如，考虑下图以及使用 、 和 使用上述方法的`bits = 5`相应`bits = 4`量化`bits = 3`：

![在此处输入图像描述](../Images/05520a75df7a8bcf18ad79c9cdf740bc.png) ![在此处输入图像描述](../Images/34bdafa1ed141ae3f843db0fe09a4b5b.png) ![在此处输入图像描述](../Images/3d9b0e7c4496bbe4c98c5c550efcfc05.png) ![在此处输入图像描述](../Images/fc260f9981fee95b464567280d89ee54.png)

现在相同的图像，但通过做量化`(img/(256/(2^bits)))*(256/(2^bits))`：

![在此处输入图像描述](../Images/ba5ae0b50623877ec16f1a26392b2a81.png) ![在此处输入图像描述](../Images/9864736bd5ce5e27187ba20e1ff596e3.png) ![在此处输入图像描述](../Images/df344cee34fd48378cc290a3cf8f52f5.png) ![在此处输入图像描述](../Images/295448453f23f70a060ac7f31a363d7a.png)

这不是一个病态的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:46:13.757

您可以通过简单的舍入来减少图像中不同值的数量：

```
I = rgb2gray(imread('image.gif'));
J = 8*round(I/8) 
```

见`imhist(I)`和`imhist(J)`的效果。

但是，如果您想减小图像大小，最好使用 Photoshop、Gimp 或 IrfanView 等图像处理程序，并将其保存为 32 色 gif。这样，您实际上会减少文件的调色板，我认为这是 Matlab 无法做到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:45:55.213

检查您的图像数据的类型是否是`uint8`我怀疑的。如果是这种情况，将图像除以 8 以滥用整数除法的地板效应，再乘以 8，您就设置好了：`I2=(I/8)*8`。`I2`将只有 32 个灰度级。

# ruby-on-rails - rails 项目的 URL 重定向

> ID：14434966
> 
> 赞同：0
> 
> 时间：2013-01-21T08:38:21.820
> 
> 标签：ruby-on-rails, redirect, devise, routes, ruby-on-rails-3.2

我安装`devise`在我的 Rails 项目上，从这个 URL 导航后 -

`http://localhost:3000/users/sign_in`

它正在重定向到这个 URL -`http://localhost:3000/`

真的不知道到底是什么问题，也检查了`routes.rb`文件。

我的项目位置 - [https://github.com/swapnesh/prjmgttool](https://github.com/swapnesh/prjmgttool)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:48:43.433

现在，这很容易，因为您已经登录。成功登录后，如果您已经登录并尝试调用 sign_in 页面，Devise 会将您重定向到起始页面。您需要先注销（或手动删除 cookie）才能再次查看登录表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:48:07.390

您必须为用户登录后要使用的某些控制器操作设置根 URL。

```
# in routes.rb
root to: 'example_controller#show' 
```

# forms - 自动填表

> ID：14434970
> 
> 赞同：0
> 
> 时间：2013-01-21T08:38:37.607
> 
> 标签：forms, automation, imacros

我有一个要求，比如我需要自动填写在线表格。（自动填写表格）。

意味着我需要创建一个应用程序，单击“自动填充”按钮将在浏览器中打开表单（表单是另一个网站页面）并自动填充数据。

我将从我的应用程序中提供的数据（每次都可能更改）。所以首先我想到了使用 iMacro 来实现这个功能。

但后来我意识到如果它是免费版本，我不能从应用程序中调用这个 imacro。所以请给我一些想法来实现这个功能。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:43:02.237

据我了解你的问题，我会说尝试[sikuli](http://www.sikuli.org/) ..它只是一个简单的，你可以说一个编译器和一种使用图像识别的语言，你可以通过这个和一个非常容易学习的方式制作汽车人..

# android - 如何知道布局中有多少对象（例如按钮或文本视图）

> ID：14434975
> 
> 赞同：0
> 
> 时间：2013-01-21T08:39:25.327
> 
> 标签：android, android-layout, android-view

有没有办法知道布局中有多少某种类型的对象（文本视图或按钮或图像视图等）。当然有办法，但我不知道如何开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:01:38.513

您可以使用以下递归方法执行此操作：

```
public int getChildrenCount(ViewGroup parent, Class type) {
    int count = 0;
    for(int i=0; i<parent.getChildCount(); i++) {
        View child = parent.getChildAt(i);

        if(child instanceof ViewGroup) {
            count += getChildrenCount((ViewGroup) child, type);
        }
        else {
            if(child.getClass() == type) {
                // Try to find element name in XML layout
                for(Field field : R.id.class.getDeclaredFields()) {
                    try {
                        int id = field.getInt(null);
                        if(id == child.getId()) {
                            String childName = field.getName();
                        }
                    } catch (Exception e) {
                        // error handling
                    }
                }
                //

                count++;
            }
        }
    }
    return count;
} 
```

例如，要查找布局`TextView`中的所有子项：`activity_main`

```
 ViewGroup parent = (ViewGroup) LayoutInflater.from(this).inflate(R.layout.activity_main, null);        
    int count = getChildrenCount(parent, TextView.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:43:35.493

[您可以使用getChildCount()](http://developer.android.com/reference/android/view/ViewGroup.html#getChildCount%28%29)和[getChildAt()](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)找出

例如：

```
 RelativeLayout fl = new RelativeLayout(this);
    int childCount = fl.getChildCount();
    int buttonCount = 0;
    for (int i = 0; i < childCount; i++) {
        if(fl.getChildAt(i) instanceof Button){
            buttonCount++;
        }
    } 
```

**注意：此方法仅检查 ViewGroup 的直接子项/后代。**

# javascript - 使用 ObjLoader 加载的形状的旋转

> ID：14434981
> 
> 赞同：1
> 
> 时间：2013-01-21T08:39:34.300
> 
> 标签：javascript, math, three.js, webgl

> **可能重复：**
> [围绕其中心点旋转自定义几何网格](https://stackoverflow.com/questions/14413492/rotating-a-custom-geometry-mesh-around-its-center-point)

[这段代码的 JSFiddle 在](http://jsfiddle.net/tezcancirakoglu/Ldt7z/38/)这里...

我有一个用 ObjLoader 加载到场景中的几何图形，其中包含这些顶点（一个简单的双面垫。三角形）（我手动定义了顶点来重新创建样本，在小提琴中没有使用 ObjLoader）

```
var geom = new THREE.Geometry();
geom.vertices.push(new THREE.Vector3(-4.77353, 2.7, 0.660501));
geom.vertices.push(new THREE.Vector3(-0.521001, 2.7, 0.660501));
geom.vertices.push(new THREE.Vector3(-0.521, 2.7, -2.065922)); 
```

在世界上它的位置是 (0, 0, 0) 但根据它的顶点我计算了它的中心点，现在尝试围绕这个质心旋转这个三角形。

正如您在小提琴中看到的，当我通过给出旋转值在 x 轴上旋转对象时，它在 x、y 和 z 轴上旋转，每个渲染中的弧度为 0.1。但我只需要它在 x 轴上旋转。

注意：在回答问题之前，请先检查小提琴。

感谢您的进一步帮助

# mvvm - MVVM：一个 ViewModel 是否应该有另一个 ViewModel 的成员？

> ID：14434982
> 
> 赞同：2
> 
> 时间：2013-01-21T08:39:39.557
> 
> 标签：mvvm, viewmodel, view-model-pattern

依赖的 ViewModel 通过构造函数（IoC 容器）注入。

示例：ProductSelectionViewModel 使用 ShoppingBasketViewModel。

这是一种常见的做法还是推荐的方式？我不这么认为...

应该怎么做才对？

视图应该使用 2 个 ViewModel 吗？中介模式？事件驱动？

个人不喜欢最后一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:03:32.010

直接引用另一个视图模型的视图模型没有任何问题，如果它是必需的依赖项，那么通过构造函数注入它就可以了。

如果您希望视图模型能够创建另一个视图模型的新实例，那么注入视图模型工厂类型将是可行的方法。

# python - 模块不能对包树中自己的分支进行绝对导入？

> ID：14434983
> 
> 赞同：0
> 
> 时间：2013-01-21T08:39:56.233
> 
> 标签：python, import, coding-style

如果你有这样的包结构：

```
foldertest/
  __init__.py
  a/
    __init__.py
    asub/
      __init__.py
  b/
    __init__.py 
```

`foldertest.__ini__.py`：

```
import a 
```

`foldertest.a.__init__.py`：

```
import foldertest.a.asub
print foldertest.a.asub 
```

如果我从上面的文件夹`foldertest/`运行 python shell 并发出`import foldertest`以下错误：

```
>>> import foldertest
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "foldertest/__init__.py", line 1, in <module>
    import foldertest.a
  File "foldertest/a/__init__.py", line 4, in <module>
    print foldertest.a.asub
AttributeError: 'module' object has no attribute 'a' 
```

而如果我`foldertest.a.__init__.py`改为导入`foldertest.b`并尝试打印我会收到：

```
>>> import foldertest
<module 'foldertest.b' from 'foldertest/b/__init__.pyc'>
>>> 
```

我做错了什么还是不能在包树中使用对包/模块自己的分支的绝对引用？（PyDev 似乎也不赞成写这样的导入）我想有绝对的包引用以保持一致性。此外，我不知道有任何“最佳实践”来编写导入语句或构建建议的包。

# java - 为什么 servlet 不检索零件？它显示 null 作为文件名

> ID：14434988
> 
> 赞同：8
> 
> 时间：2013-01-21T08:40:13.523
> 
> 标签：java, jakarta-ee, servlets, multipartform-data

*html*片段向命名的*servlet*发送`post`请求。请求的类型是. 但是 servlet 什么也没找到，并为我尝试检索的部分的名称打印 null。这是为什么 ？`servlet`*`multipart/form-data`*

 *```
<form method="post" action="servlet" enctype="multipart/form-data">
        <input type="file" value="browse" name="FileShared" />
        <input type="submit" value="submit" />
 </form> 
```

* * *

```
import javax.servlet.http.Part;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

    @Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/plain");
    //String fileName = request.getPart("FileShared").getName(); 
    // Throws a nullpointer exception if I don't comment the above statement
    PrintWriter writer = response.getWriter();
    //writer.println(fileName);
    Collection<Part> c = request.getParts();
    Iterator i = c.iterator();
    while(i.hasNext()) {
        writer.println("Inside while loop"); // This statement never gets printed
        writer.println(i.next());
    }
    writer.println("outside while loop"); // Only this statement gets printed
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T08:44:20.077

如果你想使用 Servlet 3.0`HttpServletRequest#getParts()`方法，那么你必须用`@MultipartConfig`.

**例子 ：**

```
@WebServlet(urlPatterns={"/SampleServlet"})
@MultipartConfig
public class SampleServlet extends HttpServlet {

} 
```*

# c# - 创建 API URL 的设计模式

> ID：14434992
> 
> 赞同：7
> 
> 时间：2013-01-21T08:40:25.930
> 
> 标签：c#, asp.net-mvc, design-patterns

我正在构建一个与各种 3rd 方 API 交互的类库。我使用了外观模式来提供对复杂和令人困惑的调用的简化访问，并使用工厂模式来返回正确的实现。我现在正在尝试构建一个实现，但想不出一个优雅的设计。

我正在构建的实现需要构建一个 URL（我正在通过 URIBuilder 进行）。然后我需要“执行”该网址。然后我将 Xml 结果反序列化为一个类。

我计划使用 HttpClient 使用我构建的 URI 调用 api，但不确定如何构建类。我想到的选项是：

1.  我的实现的基类，因此可以通过`base.InvokeURI(Uri myUri)`.

2.  一个分离类，因此它可以被多个实现使用

我也不确定反序列化应该放在哪里。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T09:59:38.037

我认为在这种情况下使用 Interface 更合适：

```
public interface IURLInvoke 
{
    string InvokeURI(Uri myUri);
}

// some implementation
public class YourURLInvoker: IURLInvoke 
{
    public string InvokeURI(Uri myUri)
    {
         // do something
    }
}

public class YourClass 
{
    public IURLInvoke Invoker {get; set;}

    public void InvokeURI(Uri myUri)
    {
         if(Invoker == null)
              return; 

         string xml = Invoker.InvokeURI(Uri myUri);
         // put your code for deserialization here
    }
}

// here is an usage example:
YourClass a = new YourClass();
// set an Invoker, choose a strategy to invoke url
a.Invoker = new YourURLInvoker();
a.InvokeURI(url); 
```

这种方法也称为[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T19:20:31.737

> 请查看使用适配器模式和依赖注入的虚拟代码。想法是创建一个接口并传递它

```
public class Adapter{
 public void processRequest(){
   RequestProcessor processor = new RequestProcessor();
   processor.processRequest();
 }
}

public class RequestProcessor{
  public void procesRequest(){
    Irequest request = new HTTPRequest();
    HTTPService service = new HTTPService();
    // fetch the uri from builder class
    URI url = URIBUIlder();
    string response = service.sendRequest(request,url);
    // now fetch type from just 
    Type t = Serializer.searialize<T>(response);

  }
}

public Class Serializer{
  public static  T searialize<T>(string xml){
  }
}

public interface IRequest{
 public string sendRequest(uri url);
}

public class HTTPRequest:IRequest{
 public string sendRequest(uri url){
  // instantiate actual http request here and return response
 }
}

//This will act as controller
public class HTTPService{
 public string sendRequest(IRequest request,uri url) {
  return request.sendRequest(url);
 }
} 
```

# c# - 远程服务器返回错误：(407) 需要代理身份验证

> ID：14434996
> 
> 赞同：4
> 
> 时间：2013-01-21T08:40:48.817
> 
> 标签：c#, httpwebrequest

我正在尝试从我的 winforms 应用程序打开一个 url，我收到“需要 407 代理身份验证”错误。我可以在我的机器上打开一个部署在 IIS 上的示例应用程序。但如果我尝试访问任何其他 URL 得到此错误。这是源代码。请有任何建议。

```
string url = "http://google.co.in";

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
HttpWebRequest.DefaultWebProxy.Credentials = CredentialCache.DefaultCredentials;
request.Method = "POST";

HttpWebResponse response = (HttpWebResponse)request.GetResponse();

Console.WriteLine(response.StatusDescription);

Stream dataStream = response.GetResponseStream();

StreamReader reader = new StreamReader(dataStream);

string responseFromServer = reader.ReadToEnd();

Console.WriteLine(responseFromServer);
MessageBox.Show(responseFromServer);

reader.Close();
dataStream.Close();
response.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T12:23:03.090

试试这个，它对我有用

```
string url = "http://google.co.in"; 
IWebProxy proxy = new WebProxy("your proxy server address", port number ); // port number is of type integer 
        proxy.Credentials = new NetworkCredential("your user name", "your password");

        try
        {
                WebClient client = new WebClient();
                client.Proxy = proxy;

                string resp = client.DownloadString(url);
                // more processing code 
                }
            }
        }
        catch (WebException ex)
        {
            MessageBox.Show(ex.ToString()); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:43:53.517

这表明您的系统设置中设置的代理要求您先登录才能使用它。如果它在您的浏览器中有效，那么您过去很可能已经这样做了。在系统的网络设置中禁用代理，或添加适当的标头以针对代理进行身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T10:24:26.940

```
IWebProxy proxy = new WebProxy("proxy address", port number); 
proxy.Credentials = new NetworkCredential("username", "password");

using (var webClient = new System.Net.WebClient())
{
    webClient.Proxy = proxy;

    webClient.DownloadString("url");

} 
```

# tfs - 从 Team Explorer Everywhere 中排除 bin 文件夹

> ID：14434999
> 
> 赞同：1
> 
> 时间：2013-01-21T08:41:10.643
> 
> 标签：tfs, team-explorer-everywhere

如何[在 Eclipse 的 TFS 插件中](http://www.microsoft.com/en-us/download/details.aspx?id=4240)`bin`从 TFS 版本控制的签入和签出中排除文件夹？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T17:09:51.280

TFS 应该已经忽略了 bin 文件夹，除非每个地方的配置都不同。是否可能意味着 bin 文件夹已经签入并且您不想再操作它？如果是这种情况，只需从 tfs 中删除 bin，它将停止提示您签出/签入。 Bin 文件夹通常不受源代码控制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:57:32.923

您可以使用[`.tpignore`文件](http://msdn.microsoft.com/en-us/library/gg413275%28v=vs.100%29.aspx)来忽略文件。将`bin`目录添加到您的最简单的方法`.tpignore`是简单地右键单击`bin`包资源管理器中的目录，然后在团队菜单中选择“忽略”选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T14:39:32.643

我有同样的问题，我将以下内容添加到**.tfignore**文件中

```
/bin/
/bin/.*
/bin/classes/* 
```

我必须明确地包含 classes 目录，因为它继续出现在挂起的更改中。