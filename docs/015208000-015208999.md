# StackOverflow 问答 15208000-15208999

# asp.net-mvc - 无法将 cookie 共享到 Chrome 和 Firefox 的子域

> ID：15208002
> 
> 赞同：0
> 
> 时间：2013-03-04T18:03:52.090
> 
> 标签：asp.net-mvc, forms-authentication, session-cookies, dotnetopenauth

我用表单身份验证构建了一个小型 ASP.NET mvc 应用程序。我似乎无法将 cookie/身份验证从基域（比如 people.com）共享到子域（abc.people.com）我的意思是当我通过代码调试时 Request.Cookies 对象没有有任何和 User.Identity.IsAuthenticated 是假的。

更奇怪的是，它似乎在 Internet Explorer 上运行良好（很奇怪吧 .. ？），但对于 Chrome 和 Firefox。

但是当我检查浏览器的 cookie 时，我可以看到域 people.com 的 cookie 存在

我错过了一些非常明显的东西吗？

编辑：我正在使用 OAuthWebSecurity 登录。登录的代码是这样的

```
 OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: true); 
```

而 web.config 的值为

```
<authentication mode="Forms">
  <forms loginUrl="~/Account" timeout="2880" />
</authentication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:03:17.740

将域属性添加到表单提交，基本域值似乎已经解决了这个问题。

```
 <authentication mode="Forms">
    <forms loginUrl="~/Account" 
         timeout="2880"
         domain="people.com"
         /> 
```

# c# - 从执行反向 P/Invoke 的函数返回时访问冲突

> ID：15208003
> 
> 赞同：0
> 
> 时间：2013-03-04T18:04:04.043
> 
> 标签：c#, c++, logging, dll, pinvoke

我有一个导入非托管 c++ dll 的 ac# 托管项目。我想要的是使用我在 C# 代码中编写的日志记录功能让日志记录工作。所以我在我的 C# 端添加了以下内容：

```
public struct API 
{
    [UnmanagedFunctionPointer(CallingConvention.StdCall)]
    public delegate void FunctionPointer(string msg);

    [DllImport("mydll.dll", CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    unsafe public static extern void setLoggerPointer(IntPtr fctPointer);

    [DLLImport("mydll.dll", SetLastError = true)]
    [return: MarshalAsAttribute(UnmanagedType.I1)] unsafe public static extern bool init();
}

public unsafe class MyInterface
{
    public MyInterface()
    {
        API.FunctionPointer loggerDelegate;
        loggerDelegate = new API.FunctionPointer(Logger.LogMessage);
        IntPtr loggerPtr = Marshal.GetFunctionPointerForDelegate(loggerDelegate);
        API.setLoggerPointer(loggerPtr);

        if (API.init()) 
        {
           //do stuff
        }
    }
} 
```

这是我的 Logger 类定义：

```
public static class Logger
{
    public static void LogMessage(string msg)
    {
        Console.WriteLine(msg);
        fileStream.Write(msg);
    }
} 
```

我在 c++ 端标题上有以下内容：

```
#define MY_C_API extern "C" __declspec(dllexport);

MY_C_API __declspec(dllexport) void __stdcall setLoggerPointer( void *fctPointer(LPCTSTR msg) );
MY_C_API __declspec(dllexport) bool __stdcall init(); 
```

在 C++ 源代码中：

```
//global variable
void *(*logger)(LPCTSTR msg);

void __stdcall setLoggerPointer( void *fctPointer(LPCTSTR msg) )
{
    logger = fctPointer;
}

bool __stdcall init()
{
    logger("WOOO");

    return true;  //I'm getting the AccessViolation right here
} 
```

从 mfc100.dll 内的 atlsimpstr.h Release() 函数中的 init() 函数返回时，我得到了 System.AccessViolationException

有人知道我在做什么错吗？我看到的关于这类事情的所有问题都是如何在不违反访问权限的情况下进行反向 P/Invoke，但它对我来说工作正常，只是当从另一个调用返回时它被搞砸了，好像那部分内存现在被认为是 C# 应用程序的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:17:30.997

问题是回调的调用约定不匹配。您的本机代码期望回调为`cdecl`，但托管代码将其声明为`stdcall`。您可以在托管代码或本机代码中解决此问题。为简单起见，我将展示如何在托管代码中修复它。

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
public delegate void FunctionPointer(string msg); 
```

其他几点：

1.  不要将`SetLastError`参数设置为，`true`因为您的函数没有设置 Win32 上一个错误。
2.  不要`unsafe`在此代码中的任何地方使用。作为一般规则，您应该避免`unsafe`，并且您不需要它来做任何事情。

# mysql - MySQL：选择条件适用于多行的记录

> ID：15208004
> 
> 赞同：-1
> 
> 时间：2013-03-04T18:04:18.780
> 
> 标签：mysql, sql, select, row

我有一张桌子：

**细节**

```
--------------------------------------------------------
ID    |   PARENT_ID    |    DATA_KEY     |   DATA_VALUE
======================================================== 
1     |      1         |     Guitar      |      4
--------------------------------------------------------
2     |      1         |     Radio       |      2
--------------------------------------------------------
3     |      1         |     Tv          |      2
--------------------------------------------------------
4     |      1         |     Drum Kit    |      3
--------------------------------------------------------
5     |      2         |     Guitar      |      4
--------------------------------------------------------
6     |      2         |     Radio       |      2
--------------------------------------------------------
7     |      2         |     Tv          |      2
--------------------------------------------------------
8     |      2         |     Drum Kit    |      3
--------------------------------------------------------
9     |      3         |     Guitar      |      1
--------------------------------------------------------
10    |      3         |     Radio       |      2
--------------------------------------------------------
11    |      3         |     Tv          |      2
--------------------------------------------------------
12    |      3         |     Drum Kit    |      3
-------------------------------------------------------- 
```

如何在 mysql 中选择满足以下条件的不同 PARENT_ID：

*   1.  DATA_KEY = '吉他' 和 DATA_VALUE = '4'
*   1.  DATA_KEY = '收音机' 和 DATA_VALUE = '2'

查询的预期输出应该是

```
-------------
PARENT_ID
=============
  1
-------------
  2
------------- 
```

因为只有 PARENT_ID 1 和 2 有 'Guitar' = '4' 和 'Radio' = '2'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:07:00.550

```
SELECT DISTINCT a.parent_id 
FROM details AS a
JOIN details AS b ON a.parent_id=b.parent_id
WHERE a.data_key='Guitar' AND a.data_value='4' AND
      b.data_key='Radio' AND b.data_value='2'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:11:15.707

```
SELECT DISTINCT Parent_Id
FROM details
WHERE (data_key='Guitar' AND data_value='4') OR
(data_key='Radio' AND data_value='2') 
```

这将得到您要求的结果。

您所评论的尝试很接近，但它使用的是“AND”而不是“OR”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:23:30.903

也许你找这个

```
 SELECT  a.parent_id 
  FROM details AS a
  JOIN details AS b ON a.parent_id=b.parent_id
  WHERE a.data_key='Guitar' AND a.data_value='4' AND
     b.data_key='Radio' AND b.data_value='2'
  group by a.parent_id ; 
```

[演示在这里](http://sqlfiddle.com/#!2/ba282/4)

# html - 谷歌地图而不是 iframe

> ID：15208007
> 
> 赞同：0
> 
> 时间：2013-03-04T18:04:32.483
> 
> 标签：html, google-maps, object, internet-explorer-7

如何让它在 ie8-ie9 中工作？

我使用过 iframe，但我必须拿走所有 iframe 并用一些没有错误的显示方式替换它们。

这是除了 ie7-ie9 之外的所有地方的最佳方式，因为在 IE 中只显示空框。

我想采用谷歌地图链接并将它们在链接和样式之间分开，但现在不知道该怎么做。

```
<div style="margin: 0 auto; width:550px; height:400px;">
<object type="text/html" data="https://maps.google.co.uk/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=BH20+5QT&amp;aq=&amp;sll=50.638194,-2.206535&amp;sspn=0.048883,0.100851&amp;t=m&amp;ie=UTF8&amp;hq=&amp;hnear=East+Lulworth+BH20+5QT,+United+Kingdom&amp;ll=50.638085,-2.181816&amp;spn=0.021774,0.049009&amp;z=14&amp;iwloc=A&amp;output=embed" style="width:550px; height:400px;">
</object></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T04:56:19.153

使用对象不会有太大帮助，因为那里有更好的选择。如果你不能使用 iframe，最好的办法是使用**Google Maps API**。

就这样我不会重复发布，有一种方法可以在没有 iframe 的情况下将地图添加到页面。我已经在此处发布了回复，您要查找的回复在回复的**解决方案 1**中。

[https://stackoverflow.com/a/18565736/782859](https://stackoverflow.com/a/18565736/782859)

**笔记**

第一个解决方案中的第二个链接包含有关如何在没有 iframe 的情况下添加地图的指南。

# php - 从代理服务器后面的本地主机发送 PHP 邮件

> ID：15208008
> 
> 赞同：2
> 
> 时间：2013-03-04T18:04:38.337
> 
> 标签：php, email, localhost

我想在 localhost 中使用 php 脚本发送邮件。通过谷歌，我找到了 switchmailer。我使用 swiftmailer 尝试了以下代码。

```
<?php
require_once 'lib/swift_required.php';

$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 587)
  ->setUsername('gmailid@gmail.com')
  ->setPassword('gmailpassword')
  ;
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Wonderful Subject')
  ->setFrom(array('john@doe.com' => 'John Doe'))
  ->setTo(array('mail1@gmail.com', 'mail2@gmail.com' => 'A name'))
  ->setBody('Here is the message itself')
  ;

// Send the message
$result = $mailer->send($message);

?> 
```

代码在激光线上给出错误`$result = $mailer->send($message);`

php 错误日志文件包含以下信息

> [错误] [客户端 127.0.0.1] PHP 致命错误：在 /home/shashwat001/public_html/swift 中出现消息“无法与主机 smtp.gmail.com [网络无法访问 #101] 建立连接”的未捕获异常“Swift_TransportException” /lib/classes/Swift/Transport/StreamBuffer.php:259\n堆栈跟踪：\n#0 /home/shashwat001/public_html/swift/lib/classes/Swift/Transport/StreamBuffer.php(64): Swift_Transport_StreamBuffer->_establishSocketConnection ()\n#1 /home/shashwat001/public_html/swift/lib/classes/Swift/Transport/AbstractSmtpTransport.php(115): Swift_Transport_StreamBuffer->initialize(Array)\n#2 /home/shashwat001/public_html/swift/ lib/classes/Swift/Mailer.php(80): Swift_Transport_AbstractSmtpTransport->start()\n#3 /home/shashwat001/public_html/swift/index.php(31): Swift_Mailer->send(Object(Swift_Message))\n#4 {main}\n 在第 259 行的 /home/shashwat001/public_html/swift/lib/classes/Swift/Transport/StreamBuffer.php 中抛出

原因似乎是我连接到 LAN 网络，所以在代理服务器后面。关于 switchmailer 中的代理设置，网络上没有太多内容。

有没有办法使用代理服务器后面的本地主机在局域网以外的任何地方发送邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:11:10.263

Google Mail 的正确端口是 465，Google 还使用 SSL 连接到 Gmail。

# twitter-bootstrap - .hidden-phone 不适用于 Bootstrap 轮播

> ID：15208013
> 
> 赞同：0
> 
> 时间：2013-03-04T18:04:56.620
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap 制作一个响应式网站。我正在尝试隐藏手机上的滑块。我正在使用该类`.hidden-phone`来实现这一点。但是，它对我不起作用。如果我使用`.hidden-desktop`它，它会隐藏在桌面网站和手机上。有人可以查看我的代码并可能进行演示吗？谢谢。

[地点](http://wwwdev.cco.purdue.edu/boot/welcome.shtml)

代码：

```
<body>
  <div class="container" style="position: relative">
<div class="carousel slide hidden-phone" id="myCarousel">
<ol class="carousel-indicators">
<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
<li data-target="#myCarousel" data-slide-to="1"></li>
<li data-target="#myCarousel" data-slide-to="2"></li>
 </ol>
    <div class="carousel-inner">
        <div class="item active">
            <!--<img src="/ImageSlider/21centuryimages/sliderimages/USS.JPG" />-->
        </div>
        <div class="item">
            <img src="../ImageSlider/21centuryimages/sliderimages/Bechtel.jpg" />
        </div>

        <div class="item">
            <img src="../ImageSlider/21centuryimages/sliderimages/ADM.jpg" />
        </div>

    </div>
     <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
     <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

</div>
</div>   
    </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-08T01:46:23.060

对于 bootstrap 3.0 使用 class="hidden-sm"

# xml - 如何使用 XSLT 从 CDATA 中选择要显示的数据？

> ID：15208017
> 
> 赞同：0
> 
> 时间：2013-03-04T18:05:05.557
> 
> 标签：xml, xslt, rss

我正在从以下 XML 中的描述标签中提取数据：

```
<rss xmlns:yweather="http://xml.weather.yahoo.com/ns/rss/1.0" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" version="2.0">
<channel>
<title>Yahoo! Weather - Dubai, AE</title>
<link>
http://us.rd.yahoo.com/dailynews/rss/weather/Dubai__AE/*http://weather.yahoo.com/forecast/AEXX0004_f.html
</link>
<description>Yahoo! Weather for Dubai, AE</description>
<language>en-us</language>
<lastBuildDate>Mon, 04 Mar 2013 9:01 pm GST</lastBuildDate>
<ttl>60</ttl>
<yweather:location city="Dubai" region="" country="United Arab Emirates"/>
<yweather:units temperature="F" distance="mi" pressure="in" speed="mph"/>
<yweather:wind chill="75" direction="350" speed="6"/>
<yweather:atmosphere humidity="69" visibility="6.21" pressure="29.97" rising="0"/>
<yweather:astronomy sunrise="6:39 am" sunset="6:23 pm"/>
<image>
<title>Yahoo! Weather</title>
<width>142</width>
<height>18</height>
<link>http://weather.yahoo.com</link>
<url>
http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif
</url>
</image>
<item>
<title>Conditions for Dubai, AE at 9:01 pm GST</title>
<geo:lat>25.27</geo:lat>
<geo:long>55.31</geo:long>
<link>
http://us.rd.yahoo.com/dailynews/rss/weather/Dubai__AE/*http://weather.yahoo.com/forecast/AEXX0004_f.html
</link>
<pubDate>Mon, 04 Mar 2013 9:01 pm GST</pubDate>
<yweather:condition text="Fair" code="33" temp="75" date="Mon, 04 Mar 2013 9:01 pm GST"/>
<description>
<![CDATA[
<img src="http://l.yimg.com/a/i/us/we/52/33.gif"/><br /> <b>Current Conditions:</b><br /> Fair, 75 F<BR /> <BR /><b>Forecast:</b><BR /> Mon - Clear. High: 86 Low: 67<br /> Tue - Sunny. High: 89 Low: 68<br /> <br /> <a href="http://us.rd.yahoo.com/dailynews/rss/weather/Dubai__AE/*http://weather.yahoo.com/forecast/AEXX0004_f.html">Full Forecast at Yahoo! Weather</a><BR/><BR/> (provided by <a href="http://www.weather.com" >The Weather Channel</a>)<br/>
]]>
</description>
<yweather:forecast day="Mon" date="4 Mar 2013" low="67" high="86" text="Clear" code="31"/>
<yweather:forecast day="Tue" date="5 Mar 2013" low="68" high="89" text="Sunny" code="32"/>
<guid isPermaLink="false">AEXX0004_2013_03_05_7_00_GST</guid>
</item>
</channel>
</rss>
<!--
 api3.weather.ch1.yahoo.com Mon Mar  4 17:44:49 PST 2013 
--> 
```

使用这个 XSLT：

```
<xsl:template match="channel">
    <xsl:element name="div">
        <!-- This holds the image links-->
        <xsl:attribute name="id">
            <xsl:text>weatherdiv</xsl:text>
        </xsl:attribute>
        <table>
            <xsl:attribute name="class">wtab</xsl:attribute>
            <xsl:apply-templates select="item" />
        </table>
    </xsl:element>
</xsl:template>
<xsl:template match="item">
    <tr>
        <td colspan="2" >
            <xsl:attribute name="id">
                <xsl:text>titletd</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="title"  />
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <xsl:attribute name="id">
                <xsl:text>descriptiontd</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="description" disable-output-escaping="yes" />
        </td>
    </tr>
    <!-- ... -->
</xsl:template> 
```

这一行：

```
<xsl:value-of select="description" disable-output-escaping="yes" /> 
```

获取描述中的所有内容，如何防止它获取此部分：

```
(provided by <a href="http://www.weather.com" >The Weather Channel</a>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:48:17.460

您可以使用以下[`substring-before()`](http://www.xml.com/pub/a/2002/05/01/xslt-string.html)功能：

```
<xsl:value-of select="substring-before(description, '(provided')" disable-output-escaping="yes" /> 
```

# java - 从 pom 配置 web.xml

> ID：15208020
> 
> 赞同：1
> 
> 时间：2013-03-04T18:05:10.620
> 
> 标签：java, maven

我想根据构建配置文件添加到我的 web.xml，但是当我尝试添加新属性时，它显示以下错误：

cvc-complex-type.2.3：元素“web-app”不能有字符 [children]，因为该类型的内容类型是仅元素。

我必须做什么才能让我的 web.xml 识别这个新属性？

我希望能够仅基于某些 Maven 构建配置文件将元素添加到 web.xml - 那么我将如何根据配置文件注释掉安全约束元素。

# amazon-elastic-beanstalk - Amazon beanstalk 是否会自动阻止 DDoS

> ID：15208022
> 
> 赞同：6
> 
> 时间：2013-03-04T18:05:11.947
> 
> 标签：amazon-elastic-beanstalk, ddos

Amazon Beanstalk 是否自动防止（分布式）拒绝服务攻击？如果没有，最方便的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-04-21T09:18:36.577

我相信确实如此

> 新 – AWS Shield AWS Shield 是一项新的托管服务，可保护您的 Web 应用程序免受 DDoS（分布式拒绝服务）攻击。它与 Elastic Load Balancing、Amazon CloudFront 和 Amazon Route 53 结合使用，保护您免受多种类型、形状和大小的 DDoS 攻击。有两层服务：
> 
> AWS Shield Standard 可供所有 AWS 客户免费使用。它可以保护您免受当今 96% 的最常见攻击，包括 SYN/ACK 洪水、反射攻击和 HTTP 慢读。此保护会自动且透明地应用于您的 Elastic Load Balancer、CloudFront 分配和 Route 53 资源。
> 
> AWS Shield Advanced 为容量攻击、智能攻击检测以及应用程序和网络层攻击的缓解提供了额外的 DDoS 缓解功能。您可以 24×7 全天候访问我们的 DDoS 响应团队 (DRT)，以在攻击期间进行自定义缓解、高级实时指标和报告以及 DDoS 成本保护，以防止 DDoS 攻击后的账单激增。
> 
> [https://aws.amazon.com/blogs/aws/aws-shield-protect-your-applications-from-ddos-attacks/](https://aws.amazon.com/blogs/aws/aws-shield-protect-your-applications-from-ddos-attacks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:07:57.923

不，它不能阻止 DoS 攻击，您必须自己检测和阻止此类攻击。有不同的方法可以保护您的应用程序免受 DoS 攻击，您可以在 google 上搜索。以下是一些可能对您有所帮助的链接：

*   [aiCache DoS 攻击识别和缓解](http://aws.amazon.com/customerapps/3351?_encoding=UTF8&queryArg=searchQuery&x=0&fromSearch=1&y=0&searchPath=all&searchQuery=aicache)
*   [Amazon Web Services：安全流程概述](http://aws.amazon.com/whitepapers/overview-of-security-processes/)
*   [维基百科：SYN cookie](http://en.wikipedia.org/wiki/Syn_cookies)
*   [亚马逊论坛：DoS 攻击](https://forums.aws.amazon.com/thread.jspa?messageID=289622)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-13T00:12:17.970

有几种dos。由于您的 ec2 公共 IP 地址位于 aws eb 后面，我认为您的 ec2 实例至少可以免受 layer3/4 ddos​​ 的影响。

# c++ - 如何将 GUI 添加到预先存在的 C++ 控制台应用程序？

> ID：15208023
> 
> 赞同：0
> 
> 时间：2013-03-04T18:05:12.497
> 
> 标签：c++, user-interface

我有一个简单的 C++ 控制台应用程序，想知道是否有任何方法可以添加 GUI 而无需重新制作应用程序。

我正在使用 MinGW 编译器、Eclipse CDT IDE 以及标准库和 boost 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:20:10.230

您应该详细说明您的问题，以获得更准确的答案。

您的控制台应用程序提供的交互级别是多少？

**- 这就像一个带有输入参数的简单命令，在程序结束时产生输出**

在这种情况下，您可以编写一个 gui 前端，该前端将从表单或任何您需要的参数中获取参数，然后您的 gui 应用程序将启动控制台命令，解析结果并将其显示在 gui 中。

**- 控制台应用程序非常具有交互性（在所有执行过程中从用户那里获取输入）**

*   控制台应用程序代码非常大并且与控制台交互非常耦合：

也许您可以编写一个带有 std::in 和 std::out 的 gui 包装器，并在 gui 小部件中呈现这两个流，但这可能会很棘手。这不是一个非常令人愉快的解决方案，只有当您真的不想进入控制台应用程序代码时才应该使用它。

*   控制台应用程序代码不是那么大，或者很容易将控制台输入/输出部分与程序的其余部分分开：

在这种情况下，您应该从您的应用程序中创建一个库，然后为它编写一个 gui。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:19:50.590

（在不了解控制台应用程序的情况下）

您将不得不重新制作应用程序。

如果控制台应用程序“制作精良”，用户交互与实际功能代码脱节，那么它应该是一个简单的转换。

只需创建适当的 UI 并调用必要的函数。

例如，如果您的控制台应用程序包含一个文本菜单并询问答案，那么您将在 GUI 中有按钮和/或菜单和/或编辑框，您需要修补代码。

最大限度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:22:48.097

如果您不想重写应用程序，您可以尝试使用分离的引擎和接口模式，其中 GUI 和控制台应用程序是单独的可执行文件，其中 GUI 生成控制台应用程序的实例并与其通信以通过某种机制驱动应用程序，例如标准输入

如果您的控制台应用程序不能以这种方式驱动，您不需要更改/重写应用程序

# ruby-on-rails - 缺少用于呈现用户/新的模板

> ID：15208024
> 
> 赞同：0
> 
> 时间：2013-03-04T18:05:13.517
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, actionview

尝试呈现控制器操作时出现问题。按照文档我应该能够使用：

```
render 'user/new' or
render template: 'user/new' or
render :action => "new", :controller => "users" 
```

虽然我得到一个模板丢失异常并且我不知道为什么。使用表格工作，但复制完全相同的表格是愚蠢的。

我很乱，所以我很想念一些东西，但我不明白。有什么提示吗？

编辑：我从要呈现新用户表单的 GroupsController 调用。仅使用脚手架模型进行了测试，我得到了同样的错误。

```
ActionView::Template::Error (
Missing partial users/new with {:locale=>[:de], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
* "/Users/rob/Development/projects/test/app/views"
* "/Users/rob/.rvm/gems/ruby-1.9.3-p362/gems/oembed_provider_engine-0.2.0/app/views"
* "/Users/rob/.rvm/gems/ruby-1.9.3-p362/gems/devise-2.2.3/app/views"
): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:41:49.987

部分模板的文件名总是以下划线开头。因此，您需要在“用户”视图中使用“_new.html.erb”文件进行渲染。

如果我没记错的话，默认的脚手架会为每个模型创建一个“_form.html.erb”，以便在新操作和编辑操作中呈现它。您可以只渲染它而不是整个“新”视图。

# xcode - .xib 文件未显示在 MonoTouch 中

> ID：15208030
> 
> 赞同：0
> 
> 时间：2013-03-04T18:05:30.767
> 
> 标签：xcode, xamarin.ios

在为模拟器构建之后，我收到一条错误消息，说 MonoTouch 意外停止并关闭。所以我关闭了 Xcode 并重新加载了两者。现在，我在 MonoTouch 文件树中看不到我的 .xib 文件。我可以直接在 Xcode 中打开 .xib 文件，但是这些文件所需的资源都不可见（例如，存储在 Resource 文件夹中的图像）。

我怎样才能让这些 .xib 文件再次正确关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:28:19.297

我解决了这个问题。必须返回并将我现有的每个 .xib 文件添加回项目中，方法是右键单击相应的文件夹，然后在项目文件夹中找到 .xib 文件。一旦我将它们全部添加回来，一切都按预期工作

# entity-framework - 从实体框架代码优先模型生成数据库脚本

> ID：15208031
> 
> 赞同：4
> 
> 时间：2013-03-04T18:05:33.963
> 
> 标签：entity-framework

我正在使用具有代码优先的实体框架（主要是因为使用 RIA 服务，无论如何您都需要某种形式的代码类来获取其他属性）。

我想获得一个数据库生成脚本来轻松更新 Visual Studio 数据库项目。我不想使用 ef 迁移，我更喜欢数据库项目。

我可以使用类似的东西

```
string sqlscript = (context as IObjectContextAdapter).ObjectContext.CreateDatabaseScript(); 
```

在运行时，但我希望有一种方便的方法来获取脚本，而无需以某种方式运行项目，也无需使用迁移。

有人有什么想法吗？

我在不同的项目中使用 ef4.1 和 ef5。

[**编辑：**回答这个问题的一种方法是从包管理器控制台调用上面的行。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:55:59.253

一种方法是使用 Entity Framework Power Tools。他们为包含 DbContext 类的文件添加了一个上下文菜单条目，该类为数据库生成 DDL 文件。

另一种方法是使用 LinqPad。在 LinqPad 中打开 dll 后，可以在查询中执行问题中给出的代码片段：

```
(this as IObjectContextAdapter).ObjectContext.CreateDatabaseScript() 
```

这两种方式都有些不方便，因为它们需要第三方工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-19T14:39:26.700

我已经启用了迁移，但我**总是**在运行时获取脚本，而不使用包管理器控制台来更新数据库，因为我有动态实体，只能在运行时发现，具体取决于项目中包含的引用。

获取脚本的代码如下所示：

```
var config = new DbMigrationsConfiguration<MyContext> { AutomaticMigrationsEnabled = true };
var migrator = new DbMigrator(config);
var scriptor = new MigratorScriptingDecorator(migrator);
string script = scriptor.ScriptUpdate(sourceMigration: null, targetMigration: null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T11:21:27.530

您还可以使用 `ObjectQuery 类生成自定义查询。这是一个例子：

```
var query = from emp in context.Employees
            select emp;

var sqlScript = ((ObjectQuery)query).ToTraceString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T05:48:01.293

您可以考虑的一种方法是使用 ef 迁移来生成脚本，然后在构建时使用 MSBuild 构建后任务将脚本复制到数据库项目。

# mysql - 挂mysql查询

> ID：15208041
> 
> 赞同：1
> 
> 时间：2013-03-04T18:05:51.203
> 
> 标签：mysql, sql, join

我对以下查询有疑问

```
select
ord.order_id, 
ordProduct.product_id,
coupProd.product_id,
coup.date_end as DateEnd, coup.coupon_id
from `order` ord
inner join order_product ordProduct on ord.order_id = ordProduct.order_id
inner join coupon_product coupProd on ordProduct.product_id = coupProd.product_id
inner join coupon coup on coupProd.coupon_id = coup.coupon_id
where (coup.date_end > curdate()); 
```

如果我删除 where 子句，查询执行得很好，否则它就会挂起。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:18:39.000

它本身不是解决方案，但作为一种解决方法，您可以将其作为嵌套查询来完成。IE ，

```
SELECT * FROM (
    SELECT
    ord.order_id, 
    ordProduct.product_id,
    coupProd.product_id,
    coup.date_end AS DateEnd, coup.coupon_id
    FROM `order` ord
    INNER JOIN order_product ordProduct ON ord.order_id = ordProduct.order_id
    INNER JOIN coupon_product coupProd ON ordProduct.product_id = coupProd.product_id
    INNER JOIN coupon coup ON coupProd.coupon_id = coup.coupon_id)
WHERE (DateEnd > CURDATE()); 
```

# ios - 在一个方法在另一个方法中执行之后调用一个新视图

> ID：15208042
> 
> 赞同：1
> 
> 时间：2013-03-04T18:05:52.563
> 
> 标签：ios, objective-c, macos

我正在制作一个iOS应用程序，我有这个在线程中运行的方法，我也在这个方法中调用另一个方法，但是在执行第二种方法时，应用程序崩溃了，实际上，我想移动到第二种方法成功执行后的新视图。

任何帮助将不胜感激。欢迎索取代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:30:19.483

UI 不是线程安全的。因此，您应该只从主线程更新 UI。

要强制代码在主线程上运行，您可以在线程或其他块中使用这样的块：

```
dispatch_async(dispatch_get_main_queue(), ^{
  // Update UI here
}); 
```

# xml - 问题在 IE 中显示单引号

> ID：15208054
> 
> 赞同：0
> 
> 时间：2013-03-04T18:06:47.817
> 
> 标签：xml, xslt, quote, apostrophe

我正在使用 XSLT 和 XML 生成网页，但在 IE 中使用单引号时遇到问题。

我有一个带有文本的段落标签，应该说“`Student's`课程是：”。另外，我有一个名为 MORAL PROBLEMS:CONTEMP'RY 的课程名称，来自 XML。

但是，在 IE 中查看 HTML 时，它显示为`Student&apos;s courses are`，对于标题，它显示为`PROBLEMS:CONTEMP&apos;RY`. 在 Firefox 和 chrome 中，它正确显示为`Student's courses are:`和`MORAL PROBLEMS:CONTEMP'RY`.

在我的 XSLT 中，我尝试了很多东西，例如放入“ `Student&#39;`”，但它仍然没有`'`在 IE 中显示。

这是XML

```
<courses_xml>
  <taken_courses>
    <course_subj>PHIL</course_subj>
    <course_no>235</course_no>
    <title>MORAL PROBLEMS:CONTEMP&apos;RY</title>
    <term_code>200805</term_code>
    <grade>B</grade>
  </taken_course>
  <taken_courses>
    <course_subj>MATH</course_subj>
    <course_no>200</course_no>
    <title>ADVANCED CALCULUS</title>
    <term_code>200805</term_code>
    <grade>A</grade>
  </taken_course>
<courses_xml> 
```

这是 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

<xsl:template match="/">
    <html>
        <body>
        <p>Student's courses are:</p>  
        <table>
            <xsl:apply-templates select="courses_xml"/>
        </table>   
        </body>
    </html>  
</xsl:template>

<xsl:template match="/courses_xml/taken_courses">
    <tr>
        <td><xsl:value-of select="course_subj"/></td>
        <td><xsl:value-of select="course_no"/></td>
        <td><xsl:value-of select="title"/></td> 
        <td><xsl:value-of select="grade"/></td>
    </tr>
</xsl:template> 
```

# javascript - jQuery / Javascript 冲突

> ID：15208056
> 
> 赞同：0
> 
> 时间：2013-03-04T18:07:01.700
> 
> 标签：javascript, jquery

我对网络开发相当陌生，但我相信我与我的 jQuery / javascripts 有冲突（我不完全确定是哪一个）。我的网站有一个下拉菜单和一个图像选择器。当两个脚本在一起时，它们将不起作用。无论哪个先出现，都会被后者覆盖。我相信实际上导致问题的 2 个脚本是“js/jquery-1.js”和“js/global-perf-minified.js”，但这里是我页面中使用的所有脚本：

```
<script src="js/jquery-1.js" type="text/javascript"></script>    

<script type="text/javascript" src="js/hoverIntent.js"></script>

<script type="text/javascript" src="js/superfish.js"></script>

<script src="js/app.js" type="text/javascript"></script>

<script src="js/product.js" type="text/javascript"></script>

<script src="js/searchsuggest.js" type="text/javascript"></script>

<script src="js/full.js" type="text/javascript"></script>

<script type="text/javascript" src="js/jquery_004.js"></script>

<script src="js/jquery.js" type="text/javascript"></script>

<script src="js/easing.js" type="text/javascript"></script>

<script src="js/slider.js" type="text/javascript"></script>

<link href="css/colorbox.css" type="text/css" rel="stylesheet">

<script src="js/jquery_007.js" type="text/javascript"></script>

<link href="js/cloud-zoom.css" type="text/css" rel="stylesheet">

<script src="js/cloud-zoom.js" type="text/javascript"></script>

<script type="text/javascript" src="js/utag_008.js"></script>

<script type="text/javascript" src="js/script.js"></script>

<script src="js/global-perf-minified.js" type="text/javascript"> </script>

<script type="text/javascript" src="js/product-minified.js"></script> 
```

我看到了一些关于添加 '.noconflict()' 样式的帖子，但似乎运气不佳。我愿意接受我可能只是插入错误/为此选择了错误的代码。任何帮助是极大的赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:23:36.110

可能的重复：

```
<script src="js/jquery-1.js" type="text/javascript"></script> 
<script src="js/jquery.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery_004.js"></script>
<script type="text/javascript" src="js/jquery_004.js"></script> 
```

多次声明 jquery ......最好检查它们，看看它们是否重复；）

- - - - - - - - -编辑 - - - - - - - - - - - - - -

现在你的代码应该是这样的，只有一个 jquery：

```
 <script src="js/jquery.js" type="text/javascript"></script>

    <script type="text/javascript" src="js/hoverIntent.js"></script>

    <script type="text/javascript" src="js/superfish.js"></script>

    <script src="js/app.js" type="text/javascript"></script>

    <script src="js/product.js" type="text/javascript"></script>

    <script src="js/searchsuggest.js" type="text/javascript"></script>

    <script src="js/full.js" type="text/javascript"></script>

    <script src="js/easing.js" type="text/javascript"></script>

    <script src="js/slider.js" type="text/javascript"></script>

    <link href="css/colorbox.css" type="text/css" rel="stylesheet">

    <link href="js/cloud-zoom.css" type="text/css" rel="stylesheet">

    <script src="js/cloud-zoom.js" type="text/javascript"></script>

    <script type="text/javascript" src="js/utag_008.js"></script>

    <script type="text/javascript" src="js/script.js"></script>

    <script src="js/global-perf-minified.js" type="text/javascript"> </script>

    <script type="text/javascript" src="js/product-minified.js"></script> 
```

如果您一直遇到问题，请尝试仅放置两个或三个 js，如下所示：

```
 <script src="js/jquery.js" type="text/javascript"></script> 

    <script type="text/javascript" src="js/hoverIntent.js"></script>

    <script type="text/javascript" src="js/superfish.js"></script> 
```

如果与这两个一起使用，则添加其他的，直到找到与其余 js 产生错误或问题（冲突）的那个；）

萨卢多斯。

# php - PHP 文本操作库

> ID：15208060
> 
> 赞同：0
> 
> 时间：2013-03-04T18:07:06.450
> 
> 标签：php, class, text-manipulation

我正在开发一个 Web 应用程序，它的主要功能是文本操作。如您所知，PHP 内部甚至不支持 Unicode。（有一些基本的解决方案，`mbstring`扩展和`u`修饰符`preg_*`）

是否有任何库可以使字符串操作更好一些？

我找到[了这门课](https://github.com/alecgorge/PHP-String-Class)，但还有其他选择。

# scala - 为什么不弃用 toList 和朋友？

> ID：15208065
> 
> 赞同：9
> 
> 时间：2013-03-04T18:07:21.847
> 
> 标签：scala

在 Scala 2.10 版本之前，序列类型具有类似`toList`和`toArray`用于从一种类型转换为另一种类型的方法。从 Scala 2.10 开始，我们有`to[_]`, eg `to[List]`，它似乎包含`toList`和朋友，也使我们能够转换为新类型，比如`Vector`甚至可能转换为我们自己的集合类型。当然，它使您能够转换为您只知道作为类型参数的类型，例如`to[A]`——不错！

但是为什么不弃用旧方法呢？他们更快吗？是否存在`toList`有效但`to[List]`无效的情况？我们是否应该在两者都起作用的情况下更喜欢其中一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T18:27:27.070

`toList`在`TraversableOnce`as中实现`to[List]`，因此不会有任何明显的性能差异。

但是，比前者`toArray`（非常轻微地）更有效，`to[Array]`因为前者分配正确大小的数组，而后者首先创建一个数组，然后设置大小提示（就像它对每个目标集合类型所做的那样）。除非您在紧密循环中将数据转换为数组，否则这在实际应用程序中不会产生影响。

旧方法很容易被弃用，我敢打赌它们将来会被弃用，但是人们已经习惯了它们，以至于立即弃用它们可能会让一些人生气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:28:49.667

问题似乎是您不能在后缀表示法中使用 to[] ：

```
scala> Array(1,2) toList
res2: List[Int] = List(1, 2)

scala> Array(1,2) to[List]
<console>:1: error: ';' expected but '[' found.
       Array(1,2) to[List]

scala> Array(1,2).to[List]
res3: List[Int] = List(1, 2) 
```

# php - FPDF-合并错误（）

> ID：15208068
> 
> 赞同：0
> 
> 时间：2013-03-04T18:07:26.113
> 
> 标签：php, forms, pdf, fpdf, fill

我使用[FPDF](http://www.fpdf.org/en/script/script93.php)脚本填写表格

使用 PHP 数组填写 PDF 表单。模板 PDF 一切正常，但是当我制作自定义模板“可填充”并尝试填充它时，我收到以下错误。

```
FPDF-Merge Error: startxref tag expected, read 0000000843 00000 n 
```

我不知道这意味着什么，我在谷歌的“startxref”上找不到任何东西。请帮忙。

提前致谢

编辑：这是我的模板 pdf。我使用 acrobat 8​​ Pro Mac [http://devinblackwell.info/files/documents/flag-app.pdf向它添加了表单](http://devinblackwell.info/files/documents/flag-app.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T09:23:13.067

我赢了！

我最终选择了忘记FPDF，直接自己做系统，这简直就是我想的FPDF。别担心，这根本不难。

看看这个网站，了解 fdf 如何填充 pdf 模板（映射）和.. 做到这一点:)

[http://doc.ubuntu-fr.org/pdftk](http://doc.ubuntu-fr.org/pdftk)

第 1 步：在 PhP 中创建 FDF 内容

```
/* A FDF content empy */
$xfdf_head = '<?xml version="1.0" encoding="UTF-8"?><xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve"><fields>';
$xml_data = '';
$xfdf_end = '</fields></xfdf>';

/* Generate all fields with field_key form webform and value form submission */
foreach ($webform['#node']->webform['components'] as $key => $value) {

    if ($webform['#submission']->data[$key]['value'][0]){
        $valeur = $webform['#submission']->data[$key]['value'][0];
    } else {
        $valeur = '';
    }

    $xml_data .= '
        <field name="'.$webform['#node']->webform['components'][$key]['form_key'].'">
            <value>'.$valeur.'</value>
        </field>';
}

$FDF_content = $xfdf_head.$xml_data.$xfdf_end; 
```

第 2 步：创建一个 FDF 文件并将您的内容写入其中

```
$FDF_file = fopen('new_fdf.fdf', 'w');
fwrite($FDF_file, $FDF_content);
fclose($FDF_file); 
```

第 3 步：在 Php 中使用 PDFTK 命令（检查网站顶部）[在之前填写这 2 个 var ..]

```
$pdftk_command = '/usr/bin/pdftk '. $pdf_template .' fill_form new_fdf.fdf output '.$new_fillup_pdf;
shell_exec($pdftk_command); 
```

第 4 步：强制下载或在 PHP 中打开新的 PDF。（我让你找到方法，这很容易）

# css - KSS 安装和设置

> ID：15208072
> 
> 赞同：1
> 
> 时间：2013-03-04T18:07:40.450
> 
> 标签：css, ruby, rubygems, kss

有人可以概述一些有关如何在我的本地计算机上设置 KSS 的分步说明吗？

我一直在阅读很多文章，但都没有展示工作演示。他们还认为我是红宝石专家。

我期待看到一个 html 页面和某种自动生成的文档页面。

我以前安装和使用过 gems，但我绝不是专家。所以假设我是一个完全的菜鸟。

假设我有以下文件夹结构：

C:项目/我的网站

*   索引.html
*   粗鲁的
*   css
*   js

我这样做了：

```
gem install kss 
```

我在这里感到困惑：

```
styleguide = Kss::Parser.new("#{RACK_ROOT}public/stylesheets") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:49:47.867

KSS 没有本地输出器。让您感到困惑的示例应该在 Ruby 解释性 shell 中运行（`irb`例如，默认情况下与 ruby​​ 一起安装）。

因此，转到您的命令行，输入 irb，然后将该行输入到生成的 shell 中，替换`"#{RACK_ROOT}public/stylesheets"`为`"C:/Projects/MySite/css"`

如果您想要一个漂亮的可导航网页，请参阅示例 Sinatra 应用程序。

# c++ - 传递对突变 C++ 对象的引用

> ID：15208074
> 
> 赞同：0
> 
> 时间：2013-03-04T18:07:41.557
> 
> 标签：c++, pointers, object, parameters

我有一个对象，其方法需要改变外部实例化对象。我一直在尝试在参数中引用该对象，但这显然不起作用。这就是我所拥有的：

```
#include <iostream>
#include <cstdlib>
#include "Character.h"

using namespace std;

class TesterClass {
public:
    void printStuff();
    TesterClass(Character& userChar);
private:
    Character& character;
};

TesterClass::TesterClass(Character& userChar)
{
    character = userChar;
}
int main() {
    Character userCharacter;
    TesterClass tester(userCharacter);
    return 0;
} 
```

我的问题是如何使用实例化的测试器类通过参数传递来编辑 Character 对象。我是 C++ 的新手，我已经阅读了所有可感知的引用和点传递定义，但它似乎不想点击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:11:29.697

你的构造函数应该是：

`TesterClass::TesterClass(Character& userChar):character(userChar){}`

另请参阅[此问题](https://stackoverflow.com/questions/6576109/initialising-reference-in-constructor-c?lq=1)。

为了解决评论，这里是修改值的示例代码：

```
#include <iostream>
#include <cstdlib>

typedef char Character;

using namespace std;

class TesterClass {
public:
    void printStuff();
    TesterClass(Character& userChar);
private:
    Character& character;
};

TesterClass::TesterClass(Character& userChar):character(userChar)
{
}

void TesterClass::printStuff() {
  cout << character << endl;
  cout << ++character << endl;
}

int main() {
    Character userCharacter = 'a';
    TesterClass tester(userCharacter);
    tester.printStuff();
    cout << userCharacter << endl;
    ++userCharacter;
    cout << userCharacter << endl;
    tester.printStuff();
    return 0;
} 
```

输出是

```
a
b
b
c
c
d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:17:52.733

我同意之前的回答/评论 - 您确实应该在构造函数中使用初始化列表。问题是您的数据成员是通过初始化列表初始化的（这发生在调用构造函数的主体之前）。在你的情况下，你有`Character&`一个成员。由于这是一个参考，它必须被分配一些东西。我不确定您使用的是哪个编译器，但 AFAIK 代码甚至不应该编译。

您可能正在寻找的是在您的主要方法中传递引用，例如：

```
int main() 
{
    Character userCharacter;

    // Notice the use of the &-operator
    TesterClass tester(&userCharacter);
    return 0;
} 
```

此时，您不再是在谈论`Character`-instance，而是在谈论实例的内存地址。因此，由于您传递的是内存地址，它实际上是您在类中需要的指针，而不是引用。（例如，`userCharacter.SomeMethod()`是`(&userCharacter)->SomeMethod()`where`&`引用和`->`取消引用的同义词）。

相反，你可以写你`TesterClass`的：

```
class TesterClass 
{
public:
    void printStuff();
    TesterClass(Character* userChar);
private:
    Character* character;
};

TesterClass::TesterClass(Character* userChar)
    : character(userChar) // <- Notice the init-list
{} 
```

这样，在您的`TesterClass`实例中，您将拥有一个指向`userChar`-instance 所在的相同内存地址的指针。

作为旁注：虽然这`userCharacter`是一个局部变量，但最好注意它，这意味着它会在超出范围时被销毁。在这种情况下，这并不是一个真正的问题，因为`tester`它也是本地的。但是，如果您不习惯使用指针 - 请注意。确保您永远不会将指针（因为您将地址存储在类成员中）传递给`TesterClass`超出您要传递其引用的变量范围的 -object。这会给你留下一个悬空的指针。

我希望对你有帮助:)

# ios - 如何编写正确的单例 BOOL 函数

> ID：15208077
> 
> 赞同：0
> 
> 时间：2013-03-04T18:07:48.983
> 
> 标签：ios, objective-c, singleton, asihttprequest

我`ASIHTTPRequest`用来检查用户是否登录，并在登录成功时尝试返回一个布尔值

**问题：**当我请求布尔值时，它总是返回 0，然后几秒钟后 `ASIHTTPRequest`完成它的请求并更新布尔值。

**我想要的：**在所有请求完成后获取布尔值。我认为正确的方法是编写一个布尔函数并检索 asihhtp 请求的结果？

在单例中：

```
@interface CloudConnection : NSObject
{
    BOOL isUserLoggedIN;
}
@property BOOL isUserLoggedIN;
+ (CloudConnection  *)sharedInstance;
@end

+ (CloudConnection *)sharedInstance
{
    static CloudConnection *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[CloudConnection alloc] init];
        // Do any other initialisation stuff here

    });
    return sharedInstance;
}

- (id)init {
    if (self = [super init]) {
        //send login request
        [self sendLoginRequest];
    }
    return self;
}
-(void) sendLoginRequest{ .....}
- (void)requestFinished:(ASIHTTPRequest *)request
{ else if (request.responseStatusCode == 202) {
        //parse  json data
        NSLog(@"Login Succesfull");
        _isUserLoggedIN=YES;
    }
}
- (void)requestFailed:(ASIHTTPRequest *)request{} 
```

在 VC 中：

```
CloudConnection *sharedInstance=[CloudConnection  sharedInstance];
 NSLog(@"is logged in init %hhd",sharedInstance.isUserLoggedIN);
[self performSelector:@selector( checkLoginAfterFiveSeconds) withObject:nil afterDelay:5.0];

-(void) checkLoginAfterFiveSeconds
{

    CloudConnection *sharedInstance=[CloudConnection  sharedInstance];
    NSLog(@"is logged in init %hhd",sharedInstance.isUserLoggedIN);
} 
```

**NSLOG：**

```
is logged in init 0
Login Succesfull`
is logged in init 1 //after 5 secs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:12:06.263

好吧，如果你按照你的建议去做，它会阻塞调用线程。而且您永远不希望线程等待网络流量，**尤其是主/ ui线程**

将其设为 void 函数并调用completionHandler 或...一旦可以直接计算结果，就发送一个NSNotification！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:50:40.423

是的，您是对的 :) 在您的请求完成块中调用此方法：

```
[self loginResult:result];

-(void)loginResult:(BOOL)result
{
    if(result == TRUE)
    {
        NSLog(@"Login successfully now call any method or do what ever you want");
    }
    else
    {
        NSLog(@"Login unsuccessfull");
    }
} 
```

# c++ - 整数决定论

> ID：15208079
> 
> 赞同：0
> 
> 时间：2013-03-04T18:07:54.827
> 
> 标签：c++, c, cpu, cpu-architecture

我只想问，整数是确定性的吗？我知道它们应该是，但它们在所有平台上都一样吗？

我在谷歌上搜索了它，但它返回的唯一内容是如何将两个数字放在一起，以及对确定性主题的深入研究。

我问的原因是因为我计划开发一个具有锁步网络模型的小型演示。屏幕上会有几个块可以通过命令移动，并且正在考虑为所有块提供整数值。

这也让我想到了那些总是不得不与浮点数不同步的一般 RTS 游戏（这不是它们不同步的唯一原因，但仍然是不同步的主要因素）。为什么这些游戏不只使用 64 位整数来存储所有单位位置等。我认为 64 位具有存储大量不同值的能力将足以处理单位位置等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:13:11.163

除了少数罕见的例外（例如，内存访问的时序和明确的随机操作，如[`RDRAND`](http://en.wikipedia.org/wiki/RdRand)），CPU 上的所有操作都是确定性的，包括整数和浮点操作。

网络游戏中的不同步往往是游戏逻辑错误的结果，而不是架构问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:13:34.490

在某种程度上。只要没有任何运算溢出，算术运算的结果将始终相同。有符号整数溢出的结果是未定义的。即使在程序的同一调用中，编译器优化也可能导致不同的结果。无符号溢出的结果是明确定义的；只要两个平台的 UINT_MAX 值相同，结果将始终相同。您也不能依赖平台使用的实际二进制表示。如果要在不同机器之间传递整数，则必须使用某种形式的序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:15:13.703

有一些重要的未定义行为案例；例如，如果您的表达式生成一个超出范围的有符号整数值，即使作为中间步骤，那么实际上任何事情都可能发生。（并且“越界”在某种程度上取决于系统；`int`例如，不能保证正好是 32 位。）还有一些实现定义行为的情况；例如，负符号整数值的右移是实现定义的，这意味着编译器可以决定它想要如何处理它，并且必须记录该决定。

当然，在多线程的情况下，除非您注意正确处理同步，否则几乎所有的赌注都会失败。

但是，如果您避免这些情况，那么 - 没有任何平台`2+2`可以在`4`.

# highcharts - Highcharts -- 导出、设置 dataLabel 选项

> ID：15208082
> 
> 赞同：5
> 
> 时间：2013-03-04T18:08:01.020
> 
> 标签：highcharts

我使用的是 Highcharts 2.3.5。在“导出”对象的“chartOptions”下，我可以在导出时更改一些内容，例如图表的背景颜色，但我无法启用 dataLabels 也无法更改标记大小。

这是一个例子，什么有效，什么无效。在这种情况下，导出时，我想更改背景颜色（有效）并确保出现数据标签（无效）：...

```
 exporting : {
        chartOptions : {
              chart: { backgroundColor: '#ff0000'}, //this works
              plotOptions: {
                    pie : {
                               dataLabels: {enabled: true}  //this one doesn't work
                            }
              }                         
}... 
```

我错过了一些明显的东西吗？j

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-30T09:47:41.360

```
$('#container1').highcharts({
        exporting: {
            chartOptions: { // specific options for the exported image
                plotOptions: {
                    series: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                }
            },
            scale: 3,
            fallbackToExportServer: false
        }, 
```

# ruby-on-rails - 无法识别rails中的javascript

> ID：15208083
> 
> 赞同：0
> 
> 时间：2013-03-04T18:08:02.867
> 
> 标签：ruby-on-rails

这是一个相当简单的问题，但我似乎无法弄清楚为什么它不起作用

我有这个代码：

`$(".positive").numeric({ negative: false }, function() { alert("No negative values"); this.value = ""; this.focus(); })`

当我把它放在我的视野和之间时，它会`<script>`起作用`</script>`

但是，当我将该公式复制并粘贴到`app->assets->javascripts-> page.js.coffee`它时不起作用。我什至尝试将该代码复制并粘贴到 JS2Coffee 转换器并粘贴代码的咖啡版本。仍然没有运气。

我的视图无法识别资产中的 javascript，我做错了什么？

这是咖啡脚本中的代码：

```
$(".positive").numeric
  negative: false
  , ->
  alert "No negative values"
  @value = ""
  @focus() 
```

我的 application.js 有

```
//= require jquery
//= require jquery_ujs
//= require jquery.numeric
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:49:47.553

您的 CoffeeScript 生成以下 JavaScript：

```
$(".positive").numeric({
  negative: false
}, function() {}, alert("No negative values"), this.value = "", this.focus()); 
```

如您所见，它不一样。

请注意一些事项：

*   您不必使用 CoffeeScript。如果您愿意，可以使用纯 JavaScript。
*   如果你想使用 CoffeeScript，请阅读它的语法。最重要的是：在 CoffeeScript 中，空格很重要。

在正确的 CoffeeScript 中，您的代码片段可能如下所示：

```
$(".positive").numeric 
  negative: false
  -> 
    alert "No negative values"
    @value = ""
    @focus() 
```

将代码放入资产管道时未执行代码的原因是它最终会出现在文档的头部而不是正文中，因此它将在浏览器完成加载 DOM*之前*执行.

换句话说 - 还没有任何要获取的元素。

为了解决这个问题，用 JQuery 包装你的代码：

```
$ ->
  # Your code goes here 
```

JQuery 将确保您的代码仅在 DOM 准备好进行操作时执行。

# macos - Mac/Mono WinForms 打印对话框在 Mac 上不显示打印机

> ID：15208087
> 
> 赞同：1
> 
> 时间：2013-03-04T18:08:27.547
> 
> 标签：macos, printing, dialog, mono

OSX 版本 10.8.2。这是由一位用户报告的，他遵循了与 OSX10.7.5 完全相同的说明。

感谢您的任何想法！

# java - Vaadin 7 Servlet ClassCastException

> ID：15208090
> 
> 赞同：4
> 
> 时间：2013-03-04T18:08:42.687
> 
> 标签：java, vaadin

我正在尝试从 Vaadin 6 迁移到 Vaadin 7。
当我尝试打开应用程序 url 时，我得到一个 ClassCastException

```
SEVERE: Allocate exception for servlet Vaadin Application Servlet
java.lang.ClassCastException: com.vaadin.server.VaadinServlet cannot be cast to javax.servlet.Servlet
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我不明白出了什么问题，因为 web.xml 似乎没问题。下面列出了应用程序 servlet 的映射

```
 <servlet>
        <servlet-name>Ohta Application</servlet-name>
        <servlet-class>com.vaadin.server.VaadinServlet</servlet-class>
        <init-param>
            <description>
        Vaadin UI class to use</description>
            <param-name>UI</param-name>
            <param-value>com.ritmsoft.ohta.OhtaUI</param-value>
        </init-param>
        <init-param>
            <param-name>widgetset</param-name>
            <param-value>com.ritmsoft.ohta.widgetset.OhtaWidgetSet</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>Ohta Application</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Ohta Application</servlet-name>
        <url-pattern>/VAADIN/*</url-pattern>
    </servlet-mapping> 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:08:06.627

或者，如果您使用 Maven，请像这样“提供”您的 servlet 范围：

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency> 
```

这样，它将使用容器的 servlet jar 版本（如果存在），否则它将使用您在 Maven 中声明的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:23:48.047

该问题很可能是`javax.servlet.Servlet`由多个类加载器加载引起的。它通常存在于`servlet*.jar`. 有可能容器提供了它自己的这个 jar 版本，而您的应用程序提供了另一个版本。尝试删除你的战争中的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T15:34:32.543

I have the same issue here, but only if I try to run the vaadin maven project with the tomcat plugin for eclipse. The dependency for the serlet-api is exactly as shown above. Snd tehr eis no difference if I comment it completely or just the scope part. There is always a servlet-api-2.5-6.1.11 in the lib folder. I don't know from where this comes from. But with the scope provided there is definitly no javax.servlet-api.jar in the lib folder. And if i copy the war manuelly into the tomcats webapps folder and start if by console it works fine. I don't get the difference. Any ideas?

# com - IDownloadHistoryDatabase - 我怎样才能找到接口定义？

> ID：15208094
> 
> 赞同：0
> 
> 时间：2013-03-04T18:08:58.343
> 
> 标签：com, atl

我发现在清理 IE 下载历史记录时，`IDownloadHistoryDatabase`会创建一个实现的对象。

实际上，该对象是通过调用**ieproxy.dll**并使用其`IPSFactoryBuffer`实现来创建的。

我已经能够创建对象但我不能使用它，因为我不知道接口定义。

```
CComPtr<IUnknown> spUnk;
spFactory->CreateProxy(0, IID_IDownloadHistoryDatabase, &spProxyBuffer, (void**)&spUnk); 
```

我尝试查询`IProvideClassInfo`使用`spUnk`但未实现。

有人有这个接口定义吗？或者关于如何找出这个接口的 vtable 结构的任何想法？

# bash - 如何从 Bash 中的域获取主 MX IP

> ID：15208095
> 
> 赞同：1
> 
> 时间：2013-03-04T18:08:58.907
> 
> 标签：bash, awk, host, mx-record

我正在尝试编写一个 bash 脚本，该脚本将从域名中找到它的 MX 记录，从中找出哪个是主要的（它们并不总是按顺序排列），然后找到它的 IP。（当有多个主要 MX 时，找到的第一个 MX 就可以了）

例如：

```
./findmxip.sh gmail.com 
```

会给我`173.194.71.26`。为此，我需要托管 gmail.com，然后在结果中找到主 MX 并托管它，获取其 IP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T18:42:31.803

要得到 0 或 1 个答案：

```
dig +short gmail.com mx | sort -n | nawk '{print $2; exit}' | dig +short -f - 
```

你需要一个`dig`支持`+short`.

如前所述，可能有多个“主要”MX，因为偏好不必是唯一的。如果您想要所有最低首选项记录的所有 IP 地址，则：

```
dig +short oracle.com mx | sort -n | 
  nawk -v pref=65536 '($1<=pref) {pref=$1; print $2}' | 
  dig +short -f - | uniq 
```

这不处理没有 MX 记录并且 A 记录接受电子邮件的情况，这是一种不常见但完全有效的配置。

遗憾的是，`dig`无论域是否存在（NXDOMAIN），以及是否存在任何 MX 记录，我测试过的所有版本都返回 0。不过，您*可以*捕获 DNS 超时 (rc=9)。相关`host`命令*确实*返回一个非零的 NXDOMAIN rc，但它的行为有点不一致，脚本很混乱，输出更难解析。

根据您的命令，一个穷人的错误检查版本（受*Tripleee*的评论启发）可能会稍微更健壮`host`：

```
DOMAIN=gmail.com
if ! host -t any $DOMAIN >/dev/null 2>&1 ; then
  echo "no such domain"
elif ! host -t mx $DOMAIN >/dev/null 2>&1;  then
  echo "no MX records"
else
  dig +short $DOMAIN mx | sort -n | nawk '{print $2; exit}' | dig +short -f -
fi 
```

（相反，您可能需要*旧*版本的`host`( `bind-8.x`) 才能进行`-t mx`测试，而新版本只返回 0。）

这正是人们开始~~紧张地后退~~的时候，问你为什么不使用`perl`// `python`。`$MFTL`

如果你*真的*需要在 bash 中编写一个健壮的版本，请查看更容易解析的[*djbdns*](http://cr.yp.to/djbdns/tools.html) CLI 工具和[调试工具](http://cr.yp.to/djbdns/debugging.html)（虽然遗憾的是也没有设置用户退出代码）。

# c# - C# Winforms 应用程序发送电子邮件失败：无法解析远程名称：'smtp.gmail.com；操作超时

> ID：15208097
> 
> 赞同：1
> 
> 时间：2013-03-04T18:09:03.290
> 
> 标签：c#, .net, winforms, windows-forms-designer, smtpclient

我的 WinForms C# 程序发送电子邮件。我用过`MailMessage`和`SmtpClient`。在`SmtpClient`I 的构造函数中传递了`smtp.gmail.com`587 端口。

这是在我朋友的电脑上运行的，但是当我尝试它时，我得到了这个错误：

```
System.Net.Mail.SmtpException: Failure sending mail. ---> System.Net.WebException: The remote name could not be resolved: 'smtp.gmail.com'

System.Net.Mail.SmtpException: Operation Timed out 
```

如何修复此错误？为什么它特定于我的计算机？

```
If i use port 25 i get exception : Operation Timed out

If i use port 587 i get exception : The remote name could not be resolved: 'smtp.gmail.com'

if i use port 465 i get exception : Operation Timed out 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:26:27.733

尝试一些基本的网络故障排除。首先，确保您可以通过 IP 地址 ping 某些东西，这不需要 DNS 工作，因此请尝试`ping 173.194.41.86`看看您是否收到了一些回复。

然后使用 . 从您的机器 ping www.gmail.com `ping www.gmail.com`。这应该告诉您您的网络是否可以将任何名称解析为 IP 地址。您应该在与上述相同的响应中获得四个 IP 地址 ping。

如果没有，那么您的 DNS 配置是错误的。如果您有静态 IP 地址，则需要咨询网络管理员或将 DNS 服务器设置为与工作机器相同。如果它是动态的，那么您可能会尝试`ipconfig /renew`从 DHCP 服务器获取最新设置。

如果 ping www.gmail.com 有效，则尝试`ping smtp.gmail.com`查看 smtp 主机是否正在解析。如果没有，那么仍然存在 DNS 问题，但仅影响 smtp 主机名。

尝试`ipconfig /flushdns`清除本地 DNS 缓存，然后重试。如果不在产品服务器上，请尝试重新启动。

您还可以`nslookup`用于检查 DNS 名称解析，也可以`Resolve-DnsName`在 PowerShell 中使用，但可能仅在 3.0 中。

此外，检查任何防火墙设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T11:38:28.617

将 SmtpClient 中的 EnableSsl 标记为 true。

smtpClient.EnableSsl = true;

# javascript - 我正在循环一个数组并修改数组的内容，但我没有得到我期望的结果。

> ID：15208102
> 
> 赞同：5
> 
> 时间：2013-03-04T18:09:19.267
> 
> 标签：javascript, html, css, loops

我正在循环一个数组并修改数组的内容，但我没有得到我期望的结果。我错过了什么或做错了什么？

我有两组 div（一组是攻击者，另一组是敌人），每组包含三个元素。我试图通过在它周围制作边框来从每一侧选择一个元素。现在我想将课程从攻击者切换到敌人，反之亦然。但是当我使用 for 循环时，它会以某种方式忽略一些元素并且只更改一两个 div 类。这是我的代码：

HTML：

```
<div id="army1">
    <div class="attacker">
        <img src="img/Man/Archer.jpg" />
        <div class="hp"></div>
    </div>
    <br><div class="attacker">
        <img src="img/Man/Knight.jpg" />
        <div class="hp"></div>
    </div>
    <br><div class="attacker">
        <img src="img/Man/Soldier.jpg" />
        <div class="hp"></div>
    </div>
    <br>            
</div>

<div id="army2">
    <div class="enemy">
        <img src="img/Orcs/Crossbowman.jpg" />
        <div class="hp"></div>
    </div>
    <br><div class="enemy">
        <img src="img/Orcs/Mine.jpg" />
        <div class="hp"></div>
    </div>
    <br><div class="enemy">
        <img src="img/Orcs/Pikeman.jpg" />
        <div class="hp"></div>
    </div>
    <br>            
</div> 
```

还有我的javascript代码：

```
var attacker = document.getElementsByClassName('attacker');
var enemy = document.getElementsByClassName('enemy');

var button = document.getElementById("fight");

// var class1 = document.getElementsByClassName("first")[0].getAttribute("class");
// class1 = class1.split(" ");

//choose attacker
for (var i = 0; i < attacker.length; i++) {
    attacker[i].onclick = function () {
        //select only one attacker and set its id to attackerid
        if (this.getAttribute('class') != 'attacker first') {
            resetAttackerClasses();
            this.setAttribute('class', 'attacker first');
        } else {
            resetAttackerClasses();
        }

    };
}

//choose enemy
for (var i = 0; i < enemy.length; i++) {
    enemy[i].onclick = function () {
        //select only one attacker and set its id to enemyid
        if (this.getAttribute('class') != 'enemy second') {
            resetEnemyClasses();
            this.setAttribute('class', 'enemy second');
        } else {
            resetEnemyClasses();
        }
    };
}

//fight
button.onclick = function() {
    //take off enemy health
    document.getElementsByClassName('enemy second')[0].children[1].style.width = '50px';

    resetAttackerClasses();
    resetEnemyClasses();

     for (var i = 0; i < attacker.length; i++) {
            attacker[i].setAttribute('class', 'enemy');
            enemy[i].setAttribute('class', 'attacker');
    };
};

function resetAttackerClasses() {
    for (var i = 0; i < attacker.length; i++) {
        attacker[i].setAttribute('class', 'attacker');
    };
}
function resetEnemyClasses() {
    for (var i = 0; i < attacker.length; i++) {
        enemy[i].setAttribute('class', 'enemy');
    };
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T18:10:51.813

这是因为您要删除用于获取元素的类，这意味着该元素将自动从活动的 NodeList 中删除*（因为它不再与查询匹配）*。

发生这种情况时，NodeList 被重新索引，因此下一个元素成为当前元素，您最终会用 next 跳过它`i++`；

要修复它，请改为反向迭代。

如果您不想反向，则每次从列表中删除元素时都会减少索引。

# c++ - OpenGL 摄像机俯仰、偏航和滚动旋转

> ID：15208104
> 
> 赞同：3
> 
> 时间：2013-03-04T18:09:21.593
> 
> 标签：c++, opengl, camera, rotation, trigonometry

我正在尝试创建一个类来控制 OpenGL 中的相机。我有三种方法可以改变相机的俯仰偏航和滚动。这些方法采用浮点参数作为要添加的旋转量。

这些方法中的代码是我需要帮助的地方。旋转存储在 Vector3 中。到目前为止，对于改变音高方法，我有：

```
void changePitch(float degrees)
{
    float rads = MathHelp::degreesToRadians(degrees);
    m_rotation.x += cos(m_rotation.y) * rads;
} 
```

这是我自己所能得到的。它有点工作，相机在向上或向下看 z 轴时向上和向下看，而不是在向下看 x 轴时。我尝试添加 z 旋转：

```
m_rotation.z += sin(m_rotation.y) * rads; 
```

但这并不顺利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:26:52.487

假设你有`upVector`,`lookAtVector`和`rightVector`3D 向量指向上，看你的相机的方向和右边。然后，要正确增加音高，您应该按如下方式进行计算：

```
void changePitch(angle) {
    angle = DegreeToRadian(angle);

    // Rotate lookAtVector around the right vector
    // This is where we actually change pitch
    lookAtVector = Normalize3dVector(viewDir * cos(angle) + UpVector * sin(angle));

    // Now update the upVector
    upVector = CrossProduct(rightVector, lookAtVector);
} 
```

在上面的摘录中，任意使用的函数的名称是不言自明的。

# php - 在单个属性中插入多选多个值

> ID：15208106
> 
> 赞同：0
> 
> 时间：2013-03-04T18:09:25.303
> 
> 标签：php, mysql

我正在尝试从多项选择中检索数据并使用 PHP。以下是创建选择列表并使用 MySQL 数据库中的信息填充它的代码：

```
 <select title="Basic example" multiple="multiple" name="id_categorie[]" size="3">
<?php
include_once('../../modeles/class_Categorie.php');
include_once '../../core/connx.php';
    foreach(Categorie::getAllCategorie()as $cat ){
    $categorie= new Categorie($cat->ID_CAT);
    echo '<option value="'.$categorie->getIDCategorie().'">'.$categorie->getNomCategorie().'</option>';
}
?>
</select> 
```

表单将使用方法的值发送到我尝试使用该语句`POST`的 URL ：`addArticle.php``implode()`

```
 include_once '../core/connx.php';
include_once('../modeles/class_Article.php');
include_once('../modeles/class_Image.php');
include_once '../modeles/class.upload.php';
$id=Article::creatArticle(0,$_POST['title'],implode(', ', $_POST['id_categorie']),$_POST['article']);
insertionImage($id,'img1');
function insertionImage($id,$img){
                $obj_img = new upload('../views/img/file/', $img);

                $obj_img->cl_taille_maxi = 1048579900000;
                $obj_img->cl_extensions = array('.gif','.jpg','.png','.jpeg'); // on attribut les extensions autorisées 
                $obj_img->cl_nb_char_aleatoire = 15;
                if (!$obj_img->uploadFichier('aleatoire')){
                      $erreur=$obj_img->affichageErreur();

                }
                else {
                    $chemin=$obj_img->cGetNameFileFinal();
                    Image::addImage($id,$chemin);

                }
} 
```

以及添加文章类的功能`Article`：

```
/**
 * function créeArticle
 */
public static function creatArticle($id_article,$title,$id_categorie,$article)
{
    global $db;

    $req = $db->prepare("INSERT INTO blog (ID_BLOG,TITLE,ID_CAT, ARTICLE,DATE) VALUES ('',:title,:id_categorie,:article,'".date('Y-m-d')."')");
    $ok = $req->execute(Array('title' =>$title,'id_categorie' => $id_categorie,'article' => $article));
     return $db->lastInsertId();
    //$erreur = $req->errorInfo();
} 
```

问题是当我选择多个值时，我只能从表单中获得第一个选择的选项。如何获取所有选定的值？

# php - 将php变量内容转换为html字符串

> ID：15208111
> 
> 赞同：0
> 
> 时间：2013-03-04T18:09:47.787
> 
> 标签：php, html, parsing, variables

我正在使用[PHP Simple HTML DOM parser](http://simplehtmldom.sourceforge.net/manual.htm)从 html 解析数据。

```
$html = file_get_html('www.example.com');
$e= $html->find('div[class=BodyContent]'); 
```

变量 $e 包含 html 数据（divs、imgs 等）。如果我用 foreach 循环在屏幕上回显它，它会完美地打印在屏幕上。如何将此 $e 转换为字符串？我的目标是让它看起来像这样并使用：

```
$x = str_get_html('<div id="BodyContent">Hello</div>
                   <div id="world">World</div>...otherData'); 
```

我该如何做到这一点，以便 $e 内容在 str_get_html 中显示为常规 HTML？

更新：变量 $e 解析后应该包含 HTML 数据：

```
<div id="BodyContent">
  <div id="somethingelse>
    <p>Some more content</p><a>Some links</a>
  <span></span>
</div> 
```

SimpleHtmlDom 中的函数要求参数 1 是字符串，所以...我想将变量 $e 转换为字符串，以便所有这些 div 和段落都可以插入到 str_get_html('HERE') 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:19:08.437

`$e`是一个数组或一个对象。将其转换为数组将确保即使它是单个对象也可以对其进行内爆，然后内爆将在所有对象上调用 __toString ，为您提供单个 html 字符串：

```
$htmlstr = implode("\n", (array) $e); 
```

数组强制转换可能是矫枉过正，因为为了只获得一个对象作为返回值，`find`您必须使用特定索引调用它 - 所以大概您会知道是否强制转换......但是如果您正在玩弄`$e`一个束它可能更容易像 ive show 一样投射它，这样它就不会爆炸。

在这种情况下，您需要在 API 中找到所需的方法并在每个元素上调用它......我为此使用 array_map：

```
$htmlstr = implode("\n", array_map(function ($node) { return $node->whatever; }), (array) $e); 
```

# iphone - 使用 segues 获取对 UIPopoverController 的引用

> ID：15208114
> 
> 赞同：2
> 
> 时间：2013-03-04T18:10:11.307
> 
> 标签：iphone, ios, objective-c, ipad

可以通过编程方式创建一个 UIPopoverController，然后设置它的 viewController、passthrough 视图等：

```
- (IBAction)showCustomPopoverButtonHandler:(id)sender {
    if (self.colorPicker == nil) {
        self.colorPicker = [[ColorPickerTableViewController alloc] initWithStyle:UITableViewStylePlain];
        _colorPicker.delegate = self;
        self.colorPickerPopover = [[UIPopoverController alloc] initWithContentViewController:_colorPicker];
    }

    [self.colorPickerPopover setPassthroughViews:@[self.containerView]];
    [self.colorPickerPopover presentPopoverFromRect:self.showCustomPopoverButton.frame
                                             inView:self.view
                           permittedArrowDirections:UIPopoverArrowDirectionRight
                                           animated:YES];
} 
```

但是，我想利用故事板/序列。采用这种方法时，我看不到如何获取对 UIPopoverController 实例的编程引用：

![在此处输入图像描述](../Images/c3f28b9eaacfd679d9a2ac566cb439e9.png)

有人知道怎么做吗？我希望像

```
UIPopoverController* pvc = self.popoverController; 
```

我还列举了 childViewControllers 来检查他们的类类型：

```
 // Get references to child view controllers.
    for(NSUInteger index = 0; index < self.childViewControllers.count; index++){
        id obj = self.childViewControllers[index];
        if([obj isKindOfClass:[UIPopoverController class]]){
            self.menuPopoverController = self.childViewControllers[index];
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:35:28.240

在苹果文档中找到答案：[UIStoryboardPopoverSegue Class Ref](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboardPopoverSegue_Class/Reference/Reference.html)

我在 prepareForSegue 中投射了 segue，并将 strong iVar 设置为 popoverController 属性，如下所示：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:YOUR_SEGUE_IDENTIFIER]){
        // Typical delegate setup.....
        UIStoryboardPopoverSegue* ps = (UIStoryboardPopoverSegue*)segue;
        self.popoverController = ps.popoverController;
        [self.popoverController setPassthroughViews:/* array of views */];
    }
} 
```

奇迹般有效。

或者，您可以像这样使用它（以相同的方法）

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue isKindOfClass:[UIStoryboardPopoverSegue class]]){
        self.menuPopoverController = ((UIStoryboardPopoverSegue*)segue).popoverController;
    }
} 
```

# gwt - 仅拍摄读取查询时，[Auto bean freeze] 已编辑（可变）代理的 RequestFactory 异常

> ID：15208115
> 
> 赞同：0
> 
> 时间：2013-03-04T18:10:13.450
> 
> 标签：gwt, requestfactory

让我把问题放在代码中：

```
RPCRequest request = ClientFactory.getRPCRequest();
VenueProxy venue = request
      .create(VenueProxy.class);

venue = request.edit(venue);
venue.setId(121);//Trouble Maker line of code... comment it will make things go smooth
venue.setVersion(0);//helper line otherwise get the exception version is null

request.readVenueById(121).fire(new Reciever<VenueProxy>(){

    public void onSuccess(VenueProxy venue){
         ....
         ....
    }
 } 
```

现在，我在这里所做的只是发出读取查询的请求。当我触发请求时，没有对新创建和可编辑的代理地点的引用，但这会给我这个异常堆栈跟踪：

```
java.lang.IllegalStateException: The AutoBean has been frozen
at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.checkFrozen(AbstractAutoBean.java:195)
at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.setProperty(AbstractAutoBean.java:270)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)
at com.google.web.bindery.autobean.gwt.client.impl.ClientPropertyContext$Setter$.call$(ClientPropertyContext.java)
at com.google.web.bindery.autobean.gwt.client.impl.ClientPropertyContext.set(ClientPropertyContext.java:137)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$3.visitValueProperty(AbstractRequestContext.java:910)
at com.xxxxxxxxxx.shared.VenueProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.traverseProperties(EtmVenueMasterProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.java:356)
at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.traverse(AbstractAutoBean.java:166)
at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.accept(AbstractAutoBean.java:101)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.processReturnOperation(AbstractRequestContext.java:879)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.processReturnOperations(AbstractRequestContext.java:1215)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.access$7(AbstractRequestContext.java:1185)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$StandardPayloadDialect.processPayload(AbstractRequestContext.java:347)
at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$5.onTransportSuccess(AbstractRequestContext.java:1108)
at com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport$1.onResponseReceived(DefaultRequestTransport.java:136)
at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
at sun.reflect.GeneratedMethodAccessor179.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Thread.java:662) 
```

我很好奇 的这种行为`RequestFactory`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:50:00.413

您正在点击[https://code.google.com/p/google-web-toolkit/issues/detail?id=7341](https://code.google.com/p/google-web-toolkit/issues/detail?id=7341)（我不确定这实际上是一个错误）

在服务器端，您将有两个具有相同 ID 的对象，即代表同一个实体，RequestFactory 不能很好地处理（它可能应该扔到服务器上，而不是让客户端在解码响应时失败） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:09:19.953

请求跟踪它处理的对象，这就是它如何在`edit()`和方法之间仅发送更改的数据的`fire()`方式。

在同一个请求中已经有一个具有相同 id 的 bean 可以暂停问题。您为什么不为该`readVenueById()`呼叫创建一个新请求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:40:39.743

创建后不要调用编辑。Create 用于创建新对象，正如我假设您在这里所做的那样。

编辑用于编辑已经存在的对象...

# ios - allBundles 未在 iOS 中记录自定义捆绑包

> ID：15208116
> 
> 赞同：2
> 
> 时间：2013-03-04T18:10:15.847
> 
> 标签：ios, objective-c, xcode4.5, bundle

我创建的捆绑包不显示。以下代码仅打印出应用程序包，而我添加了我的自定义包。但这不会用 NSLog 打印出来。

```
for (id obj in [NSBundle allBundles]) {
    NSLog(@"Bundle Data= %@",obj);
}; 
```

只是，它输出的是***ApplicationName*** .bundle。

所以，有什么想法为什么不注销添加的捆绑包

在意识到未加载捆绑包后添加了新代码。

```
 NSString *bundlePath=[[NSBundle mainBundle] pathForResource:@"myBundle" ofType:@"bundle"];
 NSBundle *myBundle=[[NSBundle alloc] initWithPath:bundlePath];
 [myBundle load];
 for (id obj in [NSBundle allBundles]) {
    NSLog(@"Bundle Data= %@",obj);
 }; 
```

这现在正在注销以下行：

```
2013-03-05 18:55:37.248 MyApp[414:c07] Bundle Data= NSBundle </Users/MyUser/Library/Application Support/iPhone Simulator/6.1/Applications/8DA9E19E-5028-4654-A0E0-251372B08139/MyApp.app> (loaded)
2013-03-05 18:55:37.250 MyApp[414:c07] Bundle Data= NSBundle </Users/MyUser/Library/Application Support/iPhone Simulator/6.1/Applications/8DA9E19E-5028-4654-A0E0-251372B08139/MyApp.app/myBundle.bundle> (not yet loaded) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-19T15:44:42.933

我不认为`allBundles`列出未加载的捆绑包。您可能想要使用`Bundle(identifier: "your.bundle.url)`.

OP：`allFrameworks`用来列出所有框架，你也可以在那里找到有用的东西。

# javascript - Jcrop Rails、Devise 和 Railscasts #182 已修订

> ID：15208119
> 
> 赞同：1
> 
> 时间：2013-03-04T18:10:26.320
> 
> 标签：javascript, ruby-on-rails, devise, ruby-on-rails-3.2, jcrop

所以我又有了一点“我被卡住了”的时刻。

Victim 是一个带有设计的 Rails 应用程序，并希望在其中实现 Jcrop。

我将自己定位在 Railscasts #182 修订版上，因为它几乎适合我的环境拥有/需要的所有内容（Carrierwave 上传） - 所以当前状态：上传作品和图像大小已正确调整。我现在的问题是 - Jcrop-Box 没有出现。

据我在代码中看到的，这部分（可在[此处](https://github.com/railscasts/182-cropping-images-revised/blob/master/cropper-after/app/controllers/users_controller.rb)找到）：

```
def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      if params[:user][:avatar].present?
        render :crop
      else
        redirect_to @user, notice: "Successfully updated user."
      end
    else
      render :new
    end
  end 
```

处理具有cropbox的裁剪文件的触发（可以在[这里](https://github.com/railscasts/182-cropping-images-revised/tree/master/cropper-after/app/views/users)找到）

但据我所知，更新和新的用户控制器操作由设计处理。有谁知道我能做什么或如何以另一种方式触发事件？

# eclipse - Eclipse CVS 忽略传出更改但接受传入更改

> ID：15208121
> 
> 赞同：1
> 
> 时间：2013-03-04T18:10:31.463
> 
> 标签：eclipse, cvs

在我的本地环境中，我禁用了一些安全代码，以提高开发过程中的性能和便利性。当我提交其他人时，我显然不想提交这些更改。我想从 Eclipse Team Synchronizing 视图中的传出更改集中自动忽略它们，但不会错过其他人提交的更改。现在，我必须记住在提交其他更改之前手动删除它们。更改 .cvsignore 文件或 Ignored Resources 模式集将忽略传入和传出的更改。“单向” cvsignore 可能吗？我知道如果我想对这些文件之一进行更改，我必须记得更改它。感谢您的任何意见！

# php - 如何确保字符串中只有一个 http://？

> ID：15208128
> 
> 赞同：0
> 
> 时间：2013-03-04T18:10:47.350
> 
> 标签：php, regex, preg-match

如何确保字符串中只有一个**http:// ？**

```
$url = "http://mysite.com/http://http://mysite.com/";

# set the regex for checking.
$regex = '/^\bhttp:\b\/\/.*/';

# reject the url address if it doesn't match
if (!preg_match($regex, $url)) echo 'false'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:14:13.910

您可以使用[`strrpos`](http://php.net/manual/en/function.strrpos.php)：

```
if (strrpos($url, "http://") > 0) {
   // reject
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:48:23.567

[查阅手册页](http://www.php.net/manual/en/ref.strings.php)非常有用。
它包含的解决方案比您在 Stackoverflow 上从路人那里找到的解决方案要好得多。

然而，简单浏览一下几十个功能并不难，只是为了让自己成为一张照片。

您可以从标题中轻松找到问题的*可靠* [答案](http://www.php.net/manual/en/function.substr-count.php)

```
if (substr_count($url,"http://") > 1) 
```

这将适用于针的任何位置，不仅在开始时。

还有其他方法，包括带有偏移量的[strpos](http://www.php.net/manual/en/function.strpos.php)等等。

# ruby-on-rails - Nginx + 配置错误

> ID：15208135
> 
> 赞同：1
> 
> 时间：2013-03-04T18:11:04.600
> 
> 标签：ruby-on-rails, configuration, nginx, unicorn

我一直在尝试配置 vh 文件，但最终出现此错误：

我从 unicorns github 网站上抓取了这个配置文件。

```
# This is example contains the bare mininum to get nginx going with
# Unicorn or Rainbows! servers.  Generally these configuration settings
# are applicable to other HTTP application servers (and not just Ruby
# ones), so if you have one working well for proxying another app
# server, feel free to continue using it.
#
# The only setting we feel strongly about is the fail_timeout=0
# directive in the "upstream" block.  max_fails=0 also has the same
# effect as fail_timeout=0 for current versions of nginx and may be
# used in its place.
#
# Users are strongly encouraged to refer to nginx documentation for more
# details and search for other example configs.

# you generally only need one nginx worker unless you're serving
# large amounts of static files which require blocking disk reads
worker_processes 1;

# # drop privileges, root is needed on most systems for binding to port 80
# # (or anything < 1024).  Capability-based security may be available for
# # your system and worth checking out so you won't need to be root to
# # start nginx to bind on 80
user nobody nogroup; # for systems with a "nogroup"
# user nobody nobody; # for systems with "nobody" as a group instead

# Feel free to change all paths to suite your needs here, of course
pid /tmp/nginx.pid;
error_log /tmp/nginx.error.log;

events {
  worker_connections 1024; # increase if you have lots of clients
  accept_mutex off; # "on" if nginx worker_processes > 1
  # use epoll; # enable for Linux 2.6+
  # use kqueue; # enable for FreeBSD, OSX
}

http {
  # nginx will find this file in the config directory set at nginx build time
  include mime.types;

  # fallback in case we can't determine a type
  default_type application/octet-stream;

  # click tracking!
  access_log /tmp/nginx.access.log combined;

  # you generally want to serve static files with nginx since neither
  # Unicorn nor Rainbows! is optimized for it at the moment
  sendfile on;

  tcp_nopush on; # off may be better for *some* Comet/long-poll stuff
  tcp_nodelay off; # on may be better for some Comet/long-poll stuff

  # we haven't checked to see if Rack::Deflate on the app server is
  # faster or not than doing compression via nginx.  It's easier
  # to configure it all in one place here for static files and also
  # to disable gzip for clients who don't get gzip/deflate right.
  # There are other gzip settings that may be needed used to deal with
  # bad clients out there, see http://wiki.nginx.org/NginxHttpGzipModule
  gzip on;
  gzip_http_version 1.0;
  gzip_proxied any;
  gzip_min_length 500;
  gzip_disable "MSIE [1-6]\.";
  gzip_types text/plain text/html text/xml text/css
             text/comma-separated-values
             text/javascript application/x-javascript
             application/atom+xml;

  # this can be any application server, not just Unicorn/Rainbows!
  upstream app_server {
    # fail_timeout=0 means we always retry an upstream even if it failed
    # to return a good HTTP response (in case the Unicorn master nukes a
    # single worker for timing out).

    # for UNIX domain socket setups:
    server unix:/tmp/.sock fail_timeout=0;

    # for TCP setups, point these to your backend servers
    # server 192.168.0.7:8080 fail_timeout=0;
    # server 192.168.0.8:8080 fail_timeout=0;
    # server 192.168.0.9:8080 fail_timeout=0;
  }

  server {
    # enable one of the following if you're on Linux or FreeBSD
    # listen 80 default deferred; # for Linux
    # listen 80 default accept_filter=httpready; # for FreeBSD

    # If you have IPv6, you'll likely want to have two separate listeners.
    # One on IPv4 only (the default), and another on IPv6 only instead
    # of a single dual-stack listener.  A dual-stack listener will make
    # for ugly IPv4 addresses in $remote_addr (e.g ":ffff:10.0.0.1"
    # instead of just "10.0.0.1") and potentially trigger bugs in
    # some software.
    # listen [::]:80 ipv6only=on; # deferred or accept_filter recommended

    client_max_body_size 4G;
    server_name _;

    # ~2 seconds is often enough for most folks to parse HTML/CSS and
    # retrieve needed images/icons/frames, connections are cheap in
    # nginx so increasing this is generally safe...
    keepalive_timeout 5;

    # path for static files
    root /path/to/app/current/public;

    # Prefer to serve static files directly from nginx to avoid unnecessary
    # data copies from the application server.
    #
    # try_files directive appeared in in nginx 0.7.27 and has stabilized
    # over time.  Older versions of nginx (e.g. 0.6.x) requires
    # "if (!-f $request_filename)" which was less efficient:
    # http://bogomips.org/unicorn.git/tree/examples/nginx.conf?id=v3.3.1#n127
    try_files $uri/index.html $uri.html $uri @app;

    location @app {
      # an HTTP header important enough to have its own Wikipedia entry:
      #   http://en.wikipedia.org/wiki/X-Forwarded-For
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

      # enable this if you forward HTTPS traffic to unicorn,
      # this helps Rack set the proper URL scheme for doing redirects:
      # proxy_set_header X-Forwarded-Proto $scheme;

      # pass the Host: header from the client right along so redirects
      # can be set properly within the Rack application
      proxy_set_header Host $http_host;

      # we don't want nginx trying to do something clever with
      # redirects, we set the Host: header above already.
      proxy_redirect off;

      # set "proxy_buffering off" *only* for Rainbows! when doing
      # Comet/long-poll/streaming.  It's also safe to set if you're using
      # only serving fast clients with Unicorn + nginx, but not slow
      # clients.  You normally want nginx to buffer responses to slow
      # clients, even with Rails 3.1 streaming because otherwise a slow
      # client can become a bottleneck of Unicorn.
      #
      # The Rack application may also set "X-Accel-Buffering (yes|no)"
      # in the response headers do disable/enable buffering on a
      # per-response basis.
      # proxy_buffering off;

      proxy_pass http://app_server;
    }

    # Rails error pages
    error_page 500 502 503 504 /500.html;
    location = /500.html {
      root /path/to/app/current/public;
    }
  }
} 
```

我在尝试启动服务器时收到此错误，并不是说我已经将路径等更改为我自己的路径，但我什至没有到达那里......

```
Starting nginx: nginx: [emerg] "worker_processes" directive is not allowed here in /etc/nginx/sites-enabled/default.conf:18 
```

我究竟做错了什么？我自己编译了 nginx 并将其安装到 /usr/local/... 这是我的 nginx.conf 文件：

```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    include /etc/nginx/sites-enabled/*; 

    #gzip  on;

    server {
        listen       80;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   html;
            index  index.html index.htm;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }

    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

    # HTTPS server
    #
    #server {
    #    listen       443;
    #    server_name  localhost;

    #    ssl                  on;
    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_timeout  5m;

    #    ssl_protocols  SSLv2 SSLv3 TLSv1;
    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers   on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

} 
```

我也试过用独角兽配置文件​​覆盖 /usr/local/nginx/conf/nginx.conf 文件，但这无济于事......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:51:34.557

将服务器设置之外的所有内容放在 nginx.conf 文件中。

# php - Word limiter php 删除结束逗号

> ID：15208136
> 
> 赞同：1
> 
> 时间：2013-03-04T18:11:08.343
> 
> 标签：php, frameworks, word

我正在使用来自代码点火器的字数限制器。我的数据库为主页吐出一个字符串，并且由于它太长而无法容纳此代码，因此在链接到相应页面的末尾添加了一个“...”。最近我遇到了一个问题，如果我在某个地方有一个逗号，我们会得到一个'，......'，这对我来说看起来很乱。所以我决定更改代码，以便将字符串限制为一定数量的单词，此时如果字符串在限制后以逗号结尾，那么我们将限制器数量更改为 -1。不幸的是，代码不起作用，我看不出哪里出错了。

```
 // limits a string to X number of words.
    function word_limiter($str, $limit = 100, $link_end = '', $end_char = '&#8230;')
    {
        if (trim($str) == '') {
            return $str;
        }
// modified
        $cfc = preg_match('/^\s*+(?:\S++\s*+){1,' . (int) $limit . '}/', $str, $matches);
        if (substr($cfc, -1) == ',') {
            $limit_minus = $limit-1;
            preg_match('/^\s*+(?:\S++\s*+){1,' . (int) $limit_minus . '}/', $str, $matches);
        }
        if (strlen($str) == strlen($matches[0])) {
            $end_char = '';
        }
        if (empty($link_end)) {
            return rtrim($matches[0]) . $end_char;
        } else {
            $end = '<a href="'.$link_end.'">'.$end_char.'</a>'; 
            return rtrim($matches[0]) . $end;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:27:05.733

您可以使用 PHP 的[修剪](http://php.net/manual/en/function.trim.php)功能

[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

```
$str1 = 'a,b,c,';
$str = trim($str1, ','); 
```

最终代码：

```
function word_limiter($str, $limit = 100, $link_end = '', $end_char = '&#8230;')
{
    if (trim($str) == '') {
        return $str;
    }
    preg_match('/^\s*+(?:\S++\s*+){1,' . (int) $limit . '}/', $str, $matches);
    if (strlen($str) == strlen($matches[0])) {
        $end_char = '';
    }
    if (empty($link_end)) { // if link end is empty do not output a link
        return trim(rtrim($matches[0]), ',') . $end_char;
    } else {
        $end = '<a href="'.$link_end.'">'.$end_char.'</a>'; 
        return trim(rtrim($matches[0]), ',') . $end;
    }
} 
```

# jquery-ui - 在发送电子邮件和 JS .POST() 之前，云服务器 SMTP 转发到错误的服务器需要 2 分钟

> ID：15208140
> 
> 赞同：1
> 
> 时间：2013-03-04T18:11:22.007
> 
> 标签：jquery-ui, codeigniter, post, apache2, sendmail

我创造了一个有点超出我的联盟的问题，需要一些专业的建议！

我在`Rackspace`托管我的沙盒`CodeIgniter`应用程序的云服务器上运行完美。我创建了一个新的云服务器并将图像从沙盒服务器复制到生产服务器。一切都完全相同。

我添加了一个`virtualhost`并启动并运行了生产应用程序。

这是问题所在：沙盒应用程序通过发送电子邮件`jQuery UI`，`CI email class`并且成功时显示对话框“完成！” 几乎立即。

在生产应用程序上，您单击发送按钮，它需要两分钟`.POST()`才能成功返回 - 这意味着对话框在两分钟内不会改变......

这是 chrome 检查员发现的链接：http: [//persogenics.com/post.jpg](http://persogenics.com/post.jpg)

只是为了检查一下，我从两个系统都向自己发送了电子邮件，以查看它们的`SMTP Headers`外观。

```
THE SANDBOX SERVER 'RECEIVED' SECTION:
-------------------------------------------
Received: from test.persogenics.com (localhost [127.0.0.1])
    by test.persogenics.com (8.14.3/8.14.3/Debian-9.1ubuntu1) with ESMTP id r24G1I8O020018
    for <tonylefler@gmail.com>; Mon, 4 Mar 2013 16:01:18 GMT
-------------------------------------------

THE PRODUCTION SERVER 'RECEIVED' SECTION:
-------------------------------------------
Received: from prod-server (localhost [127.0.0.1])
    by test.persogenics.com (8.14.3/8.14.3/Debian-9.1ubuntu1) with ESMTP id r24FqNkY031102
    for <tonylefler@gmail.com>; Mon, 4 Mar 2013 15:52:23 GMT
------------------------------------------- 
```

有谁知道为什么生产服务器中有这些词`by test.persogenics.com`？我在生产应用程序中找不到任何包含这些词的代码！事实上我已经使用过`site_url()`，所以它不应该有什么区别它是什么域名......

我唯一的结论是它会将电子邮件转发到沙盒服务器，然后将其发送出去......但我还是个菜鸟，我真的不知道......

我正在使用`UBUNTU 10.4`, `CodeIgniter 2.1`，`Apache2`如果这有帮助...

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:23:23.647

1) prod-server 需要多长时间才能获得 SMTP 服务器问候语？

```
telnet 127.0.0.1 25 
```

2）以下两个测试命令在 prod-server 上报告的内容（以 root 身份执行第二个）：

```
hostname --fqdn
 echo '$j' | sendmail -Am -bt 
```

*PS 你可以在 news:comp.mail.sendmail 询问 sendail 相关的问题*

# java - 如何传递一个 ArrayList 从一个意图到另一个？

> ID：15208143
> 
> 赞同：0
> 
> 时间：2013-03-04T18:11:31.930
> 
> 标签：java, android, android-intent

我的意图是从网络服务中搜索数据。我正在尝试将这些数据从这个意图传递到另一个屏幕（意图）

搜索意图

```
public void setXXX(ArrayList<XXX> xxxData) {
    this.xxxs= xxxData;
    if(xxxData.size() > 0)
    {
        Intent intent = new Intent(this, otherActivity.class);

        startActivity(intent);
    }else{
        alert (getResources().getString(R.string.no_result));
    }
} 
```

接收者意图

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            this.xxxs = (...);      

    setContentView(R.layout.activity_xxxlist);
    this.xxxList = (ListView) findViewById(R.id.listview);

    this.listView.setAdapter(new xxxDataAdapter(this,this.layoutInflator, this.xxxs));
} 
```

如何从第二个意图中使用我的 arrayList<> ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:18:29.517

为了能够通过 发送对象，您必须为该对象`Intents`实现接口。`Parcelable`它使用 a`CREATOR`来编写该对象的字符串和原始类型。

[这是它的开发者页面](http://developer.android.com/reference/android/os/Parcelable.html)。

完成后，您可以像这样在 ArrayList 中发送该对象：

```
intent.putParcelableArrayListExtra(ArrayList<Parcelable> ... ); 
```

看到这个方法：[putParcelableArrayListExtra](http://goo.gl/lNvlO)

在接收活动中，您可以调用：

```
getIntent().getParcelableArrayListExtra( String key ); 
```

[正如此处 API 中所定义的那样](http://goo.gl/dV9UN)

# cobol - 尽管种子不同，随机函数总是返回相同的结果

> ID：15208144
> 
> 赞同：0
> 
> 时间：2013-03-04T18:11:33.773
> 
> 标签：cobol, gnucobol

我正在尝试创建一个随机数生成器（一些随机数稍后将被转换为 [AZ] 字符）。我已经让随机生成器的主要部分正常工作，但我不断收到相同的随机结果`0.6734141422`。

我面临的另一个问题：有一半时间我的程序编译速度太快。由于我以毫秒为单位使用当前日期，因此快速编译我的程序将意味着为`RANDOM`函数提供相同的种子。我一直在考虑简单地添加一个计数器，在将每个种子应用到`RANDOM`. 这足够还是有更优雅的解决方案？

有人可以向我解释为什么即使应用了不同的种子值，我总是会收到相同的随机结果？每次执行程序时都会得到这个结果。

我正在使用 PerCobol 编译器，据我所知，它与 OpenCobol 兼容。

总结一下：

*   我应该如何克服平等的种子？
*   为什么我会收到不同种子的相同随机结果？

    ```
    000100 IDENTIFICATION DIVISION.
    000200 PROGRAM-ID. RandomTest.

    ENVIRONMENT DIVISION.  

       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01 RANDOMRESULT PIC S9V9(10).

       01 WS-CURRENT-DATE-DATA.
        05 WS-CURRENT-DATE.
          10 WS-CURRENT-YEAR    PIC 9(04).
          10 WS-CURRENT-MONTH   PIC 9(02).
          10  WS-CURRENT-DAY    PIC 9(02).
        05  WS-CURRENT-TIME.
      10  WS-CURRENT-HOURS      PIC 9(02).
      10  WS-CURRENT-MINUTE     PIC 9(02).
      10  WS-CURRENT-SECOND     PIC 9(02).
      10  WS-CURRENT-MILLISECONDS   COMP-2.
    05  WS-DIFF-FROM-GMT        PIC S9(04).

       PROCEDURE DIVISION.
       PRGRM.

       PERFORM 4 TIMES
        MOVE FUNCTION CURRENT-DATE TO WS-CURRENT-DATE-DATA
        COMPUTE RANDOMRESULT = FUNCTION RANDOM (WS-CURRENT-MILLISECONDS)
        DISPLAY "Seed value: " WS-CURRENT-MILLISECONDS UPON SYSOUT
        DISPLAY "Random result: " RANDOMRESULT UPON SYSOUT
       END-PERFORM

       STOP RUN. 
    ```

样本输出：

```
Seed value: 8.222829361429599E-67
Random result: 0.6734141422
Seed value: 8.964670591567083E-67
Random result: 0.6734141422
Seed value: 9.335591206635825E-67
Random result: 0.6734141422
Seed value: 9.335591206635825E-67
Random result: 0.6734141422 
```

如果您对解决我最初的问题有建议（创建一个由字母数字字符组成的随机密码），我也很高兴听到它。

编辑：通过省略种子，两个问题都立即得到解决。这个结论背后的更多信息可以在下面的评论中找到。如果有人解释为什么不同的种子仍然会产生相同的值，我会很高兴听到它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:37:32.413

是的，你的种子需要是一个整数，所以你不能使用 COMP-2。种子不需要是特定的大小，只是一个整数，你可以把它做得很大。

您的程序编译所花费的时间与任何事情无关。

您应该在第一次调用该函数时指定 SEED。之后，使用零。这将遵循“伪随机”序列。您不需要每次都“播种”，因此无需担心毫秒。

您应该始终输出您的种子，以便以后可以重新生成序列。使用时间变得很棘手，所以取而代之的是一个参数或一个包含种子的单记录文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:51:24.627

从[这篇文章](http://ibmmainframes.com/post-54359.html)看来，该函数似乎`RANDOM`需要一个 32 位整数作为种子。但是，您声明`WS-CURRENT-MILLISECONDS`为`COMP-2`浮点数（在其他语言中，为 64 位双精度数）。

我想这要么使它成为种子的无效参数，因此使用默认的种子值 0，或者只使用双精度的第一个或最后 32 位，所以你基本上得到[尾数或有效数的一部分](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)这与您尝试的数字相同。

如果发生第一件事，请尝试使用 0 作为种子，我想您会得到相同的输出。在任何情况下，您都可以尝试显式地使用一些不同的整数播种，然后看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T23:06:47.830

这是一些生成随机数的源代码，希望对您有所帮助。

```
 IDENTIFICATION DIVISION.
   PROGRAM-ID.  RANDGEN as "ConsoleApplication2.RANDGEN".
   AUTHOR.  Myron D Denson.
   DATE-COMPILED.
  * ************************************************************** 
  *  SUBROUTINE TO GENERATE RANDOM NUMBERS THAT ARE GREATER THAN
  *    ZERO AND LESS OR EQUAL TO THE RANDOM NUMBERS NEEDED WITH NO
  *    DUPLICATIONS.  (CALL "RANDGEN" USING RANDGEN-AREA.)
  *     
  *    FORMULA CYCLES THROUGH EVERY NUMBER OF 2X2 ONLY ONCE. 
  *    RANDOM-NUMBERS FROM 1 TO RANDOM-NUMBERS-NEEDED ARE CREATED 
  *    AND PASSED BACK TO YOU.
  *
  *  RULES TO USE RANDGEN:
  *
  *    RANDOM-NUMBERS-NEEDED > ZERO 
  *     
  *    COUNT-OF-ACCESSES MUST = ZERO FIRST TIME USED.
  *         
  *    RANDOM-NUMBER = ZERO, WILL BUILD A SEED FOR YOU
  *    WHEN COUNT-OF-ACCESSES IS ALSO = 0 
  *     
  *    RANDOM-NUMBER NOT = ZERO, WILL BE NEXT SEED FOR RANDGEN
  *    YOU CAN PASS RANDGEN YOUR OWN RANDOM-NUMBER SEED
  *     THE FIRST TIME YOU USE RANDGEN.
  *     
  *    BY PLACING A NUMBER IN RANDOM-NUMBER FIELD
  *      THAT FOLLOWES THESE SIMPLE RULES:
  *        IF COUNT-OF-ACCESSES = ZERO AND 
  *        RANDOM-NUMBER > ZERO. 
  *    
  *    YOU CAN PICK THE SEED OR YOU CAN LET RANDGEN BUILD A SEED FOR YOU.
  *
  *       IF YOU PICK A SEED < RANDON-NUMBERS-NEEDED IT WILL BECOME THE LAST
  *          RANDON-NUMBER YOU RECEIVE BACK.
  *       IF SEED > RANDON-NUMBERS-NEEDED LAST NUMBER COULD BE ANYTHING.         
  *     
  *      THAT FOLLOWES THESE SIMPLE RULES:
  *        IF COUNT-OF-ACCESSES = ZERO AND 
  *        RANDOM-NUMBER = ZERO AND 
  *        RANDOM-NUMBER-NEEDED > ZERO  
  *         
  *     TO INSURING A DIFFERENT PATTERN OF RANDOM NUMBERS
  *        A LOW-RANGE AND HIGH-RANGE IS USED TO BUILD
  *        RANDOM NUMBERS.
  *        COMPUTE LOW-RANGE =
  *             ((SECONDS + HOURS + MINUTES + MS) * 1753).           
  *        A HIGH-RANGE = RANDOM-NUMBERS-NEEDED + LOW-RANGE
  *        AFTER RANDOM-NUMBER-BUILT IS CREATED 
  *        AND IS BETWEEN LOW AND HIGH RANGE
  *        RANDUM-NUMBER = RANDOM-NUMBER-BUILT - LOW-RANGE
  *               
  * **************************************************************         
   ENVIRONMENT DIVISION.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
   DATA DIVISION.
   FILE SECTION.
   WORKING-STORAGE SECTION.
   01  WORK-AREA.
       05  X2-POWER                     PIC 9      VALUE 2\. 
       05  2X2                          PIC 9(12)  VALUE 2.
       05  RANDOM-NUMBER-BUILT          PIC 9(12)  COMP.
       05  FIRST-PART                   PIC 9(12)  COMP.
       05  NOT-USED-NUMBER              PIC 9(12)  COMP.
       05  LOW-RANGE                    PIC 9(12)  VALUE ZERO.
       05  HIGH-RANGE                   PIC 9(12)  VALUE ZERO.
       05  YOU-PROVIDE-SEED             PIC X      VALUE SPACE.
       05  RUN-AGAIN                    PIC X      VALUE SPACE.
       05  PAUSE-FOR-A-SECOND           PIC X      VALUE SPACE.   
   01  SEED-TIME.
       05  HOURS                        PIC 99.
       05  MINUTES                      PIC 99.
       05  SECONDS                      PIC 99.
       05  MS                           PIC 99\. 
  *
  * LINKAGE SECTION.
  *  Not used during testing  
   01  RANDGEN-AREA.
       05  COUNT-OF-ACCESSES            PIC 9(12) VALUE ZERO.
       05  RANDOM-NUMBERS-NEEDED        PIC 9(12) VALUE ZERO.
       05  RANDOM-NUMBER                PIC 9(12) VALUE ZERO.
       05  RANDOM-MSG                   PIC X(60) VALUE SPACE.
  *    
  * PROCEDURE DIVISION USING RANDGEN-AREA.
  * Not used during testing 
  *  
   PROCEDURE DIVISION.
   100-RANDGEN-EDIT-HOUSEKEEPING.
       MOVE SPACE TO RANDOM-MSG. 
       IF RANDOM-NUMBERS-NEEDED = ZERO
         DISPLAY 'RANDOM-NUMBERS-NEEDED ' NO ADVANCING
         ACCEPT RANDOM-NUMBERS-NEEDED.
       IF RANDOM-NUMBERS-NEEDED NOT NUMERIC 
         MOVE 'RANDOM-NUMBERS-NEEDED NOT NUMERIC' TO RANDOM-MSG
           GO TO 900-EXIT-RANDGEN.
       IF RANDOM-NUMBERS-NEEDED = ZERO
         MOVE 'RANDOM-NUMBERS-NEEDED = ZERO' TO RANDOM-MSG
           GO TO 900-EXIT-RANDGEN.
       IF COUNT-OF-ACCESSES NOT NUMERIC
         MOVE 'COUNT-OF-ACCESSES NOT NUMERIC' TO RANDOM-MSG
           GO TO 900-EXIT-RANDGEN.
       IF COUNT-OF-ACCESSES GREATER THAN RANDOM-NUMBERS-NEEDED
         MOVE 'COUNT-OF-ACCESSES > THAT RANDOM-NUMBERS-NEEDED' TO RANDOM-MSG
           GO TO 900-EXIT-RANDGEN.
       IF YOU-PROVIDE-SEED = SPACE AND RANDOM-NUMBER = ZERO
         DISPLAY 'DO YOU WANT TO PROVIDE SEED  Y OR N: '
           NO ADVANCING
           ACCEPT YOU-PROVIDE-SEED.  
       IF RANDOM-NUMBER = ZERO AND
          (YOU-PROVIDE-SEED = 'Y' OR 'y')
         DISPLAY 'ENTER SEED ' NO ADVANCING
         ACCEPT RANDOM-NUMBER. 
       IF RANDOM-NUMBER NOT NUMERIC
         MOVE 'RANDOM-NUMBER NOT NUMERIC' TO RANDOM-MSG
         GO TO 900-EXIT-RANDGEN.
   200-RANDGEN-DATA-HOUSEKEEPING.      
       MOVE FUNCTION CURRENT-DATE (9:8) TO SEED-TIME.
       IF COUNT-OF-ACCESSES = ZERO
         COMPUTE LOW-RANGE =
                ((SECONDS + HOURS + MINUTES + MS) * 1753).
       COMPUTE RANDOM-NUMBER-BUILT = RANDOM-NUMBER + LOW-RANGE.  
       COMPUTE HIGH-RANGE = RANDOM-NUMBERS-NEEDED + LOW-RANGE.
       MOVE X2-POWER TO 2X2\.             
   300-SET-2X2-DIVISOR.
       IF 2X2 < (HIGH-RANGE + 1) 
          COMPUTE 2X2 = 2X2 * X2-POWER
           GO TO 300-SET-2X2-DIVISOR.    
  * *********************************************************         
  *  IF FIRST TIME THROUGH AND YOU WANT TO BUILD A SEED.    *
  * ********************************************************* 
       IF COUNT-OF-ACCESSES = ZERO AND RANDOM-NUMBER = ZERO
          COMPUTE RANDOM-NUMBER-BUILT =
                ((SECONDS + HOURS + MINUTES + MS) + HIGH-RANGE).
  * *********************************************     
  *    END OF BUILDING A SEED IF YOU WANTED TO  * 
  * ********************************************* 
  * *******************************************************
  * THE NEXT 4 LINE OF CODE ARE FOR TESTING  ON CONSOLE   *  
  * *******************************************************            
  *    IF COUNT-OF-ACCESSES = ZERO        
  *      DISPLAY 'SEED TIME ' SEED-TIME 
  *            ' RANDOM-NUMBER-BUILT ' RANDOM-NUMBER-BUILT 
  *            ' LOW-RANGE  ' LOW-RANGE.          
  * ***************************************************
  * THIS PROCESS IS WHERE THE RANDOM-NUMBER IS BUILT  *  
  * ***************************************************   
   400-RANDGEN-FORMULA.
       COMPUTE FIRST-PART = (5 * RANDOM-NUMBER-BUILT) + 7.
       DIVIDE FIRST-PART BY 2X2 GIVING NOT-USED-NUMBER 
         REMAINDER RANDOM-NUMBER-BUILT. 
       IF RANDOM-NUMBER-BUILT > LOW-RANGE AND
          RANDOM-NUMBER-BUILT < (HIGH-RANGE + 1)
         GO TO 600-RANDGEN-CLEANUP.
       GO TO 400-RANDGEN-FORMULA.
  * *********************************************     
  *    GOOD RANDOM NUMBER HAS BEEN BUILT        *               
  * *********************************************
   600-RANDGEN-CLEANUP.
       ADD 1 TO COUNT-OF-ACCESSES.
       COMPUTE RANDOM-NUMBER = 
            RANDOM-NUMBER-BUILT - LOW-RANGE. 
  * *******************************************************
  * THE NEXT 3 LINE OF CODE ARE FOR TESTING  ON CONSOLE   *  
  * *******************************************************
       DISPLAY RANDOM-NUMBER.
       IF COUNT-OF-ACCESSES < RANDOM-NUMBERS-NEEDED
        GO TO 100-RANDGEN-EDIT-HOUSEKEEPING.     
   900-EXIT-RANDGEN.
       IF RANDOM-MSG NOT = SPACE
        DISPLAY 'RANDOM-MSG: ' RANDOM-MSG.
        MOVE ZERO TO COUNT-OF-ACCESSES RANDOM-NUMBERS-NEEDED RANDOM-NUMBER. 
        MOVE SPACE TO YOU-PROVIDE-SEED RUN-AGAIN.
       DISPLAY 'RUN AGAIN Y OR N '
         NO ADVANCING.
       ACCEPT RUN-AGAIN.
       IF (RUN-AGAIN = 'Y' OR 'y')
         GO TO 100-RANDGEN-EDIT-HOUSEKEEPING.
       ACCEPT PAUSE-FOR-A-SECOND.
       GOBACK. 
```

# android - 多行EditText中的垂直滚动条

> ID：15208145
> 
> 赞同：1
> 
> 时间：2013-03-04T18:11:36.700
> 
> 标签：android

我使用了表格布局并为其提供了垂直滚动条。表格布局有一个 edittext 表格行，其输入类型为 textMultiLine 我想向其添加垂直滚动条。为此我使用过，

```
 edittext_level_desc.setScroller(new Scroller(getApplicationContext()));
   edittext_level_desc.setVerticalScrollBarEnabled(true); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:40:26.640

Check out these:

*   [https://stackoverflow.com/a/6124165/944070](https://stackoverflow.com/a/6124165/944070)
*   [https://stackoverflow.com/a/4233683/944070](https://stackoverflow.com/a/4233683/944070)

If any of them work, but it is quite difficult and annoying to apply scrollers in scrollers you may need a custom view, and also a custom scroll based on gestures or touch events.

I suggest change your layout in order to avoid that. It may be more helpful to have an EditText not scrolling expanding.

# matlab - 消息目录 Matlab：解释器未加载

> ID：15208150
> 
> 赞同：7
> 
> 时间：2013-03-04T18:11:50.347
> 
> 标签：matlab, error-handling, ram

我在 MATLAB 中有一个非常奇怪的错误，它似乎与我的程序没有直接关系。MATLAB 甚至没有给我一条发生错误的行。

我的程序处理很多文件。我可以处理它们的组而不会出现错误，但是当将它们全部一起处理时，我会收到以下错误：

```
Caught "std::exception" Exception message is:
Message Catalog MATLAB:interpreter was not loaded from the file. Please check file location, format or contents 
```

这通常发生在大致相同的时间点，但不完全一致。我围绕这一点测试了所有文件，它们都可以工作。这就是为什么我认为它与RAM有关。

如果我尝试再次运行该程序，我会在开始时遇到相同的错误，但在重新启动 MATLAB 后一切都会再次运行正常。

我想知道这是否是基于 C++ 的错误，因为它包含“std::...”

你知道这个错误意味着什么以及我该如何解决它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T00:52:58.337

我今天遇到了这个错误，但是我的原因很简单，我每次写新文件时都忘记调用 fclose 了。在我添加 fclose 之后，错误就消失了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T08:31:37.407

这看起来像一个安装问题。MATLAB 正在您的安装中寻找一个名为`$MATLABROOT/resources/MATLAB/en/interpreter.xml`. 检查该文件是否存在 - 您可能需要重新安装。

编辑：原来问题是 OP 的代码泄漏了文件句柄，这意味着 MATLAB 最终无法打开资源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T07:03:17.753

如果你最后使用 fopen 打开一个没有 fclose 的文件，你就会遇到这个问题。所以解决方法很简单，去fclose文件！

# batch-file - 使用文本文件的每一行创建文件夹。Line1 = 文件夹 1 等

> ID：15208155
> 
> 赞同：0
> 
> 时间：2013-03-04T18:12:01.007
> 
> 标签：batch-file

我正在使用 Windows 2008 服务器。我正在从 SQL 表中提取一个包含用户列表的 txt 文件：

用户1 用户 2
用户
3
...

我需要使用该列表中的每个用户名（可能会有所不同）创建文件夹，然后将数据从唯一的源文件夹复制到每个文件夹中。我能够创建变量 var1、var2 等...使用此处另一个已回答问题的帮助，但我不知道如何将它们用于我的文件夹测试和创建功能。

```
setlocal ENABLEDELAYEDEXPANSION
set vidx=0
for /F "tokens=*" %%A in (mysourcefile.txt) do (
    SET /A vidx=!vidx! + 1
    set var!vidx!=%%A
)
set var 
```

但这失败得很惨：

```
IF exist %var% (echo %var% exists ) ELSE ( mkdir %var% && echo %var% created ) 
```

这可能很简单，但经过多次尝试，我现在迷路了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:44:39.523

如果文本文件只是用户名列表，您可以这样做。

```
setlocal EnableDelayedExpansion
for /f "tokens=*" %%A in (mysourcefile.txt) do (
    if exist "%%~A" ( echo %%A exists ) else ( md %%A && echo %%A created )
)
endlocal 
```

# css - 将 DIV 的背景扩展到其边界之外

> ID：15208158
> 
> 赞同：1
> 
> 时间：2013-03-04T18:12:14.960
> 
> 标签：css, twitter-bootstrap, background

我意识到将 div 的背景扩展到包含元素的宽度之外是很常见的，例如在导航栏中。到目前为止，为了实现这一点，我使用了填充和边距的混合，它似乎工作得很好。

但是，我正在尝试扩展包含图像的 div 的背景：

```
<div class="row-fluid box">
 <img src="image.jpg"/>
</div>

.box{
background:red;
padding-right:100em;
padding-left:50em;
margin-left:-50em /*The background won't move left without setting the margin like
this for me*/
} 
```

当我这样做时，图像变得非常小（高度和宽度）到不可见的程度。使用完全相同的 CSS 样式的文本不会发生这种情况。

我正在使用引导程序并给 div 一个 row-fluid 类（与包含 div 的文本的设置完全相同）。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:45:38.713

我发现最简单的方法是将背景应用于引导容器外部的 div，类似于以下内容：http: [//jsfiddle.net/panchroma/qFtNT/](http://jsfiddle.net/panchroma/qFtNT/)。

很容易想象正在发生的事情，它很灵活，而且 CSS 更简洁。

请记住，对于更复杂的背景布局，没有什么可以阻止您多次关闭和打开引导容器 div。

**HTML**

```
<div class="wideBackground">  

<div class="container">
<div class="row-fluid">
.....
</div> <!-- close row-fluid -->
</div><!-- close container -->

</div><!-- close wideBackground --> 
```

**CSS**

```
 .wideBackground{
 background-color:red;
} 
```

# ruby-on-rails - 使用 nested_form 获取对象值

> ID：15208161
> 
> 赞同：5
> 
> 时间：2013-03-04T18:12:27.543
> 
> 标签：ruby-on-rails, nested-forms, fields-for

我有一个嵌套表单（按订单付款），我想在编辑视图中测试嵌套表单 (fields_for) 中的值。但问题是我无法检查每一个，我可以这样做：

```
<% if @order.payments[0].monthly == false %> 
```

您现在是否可以检查每个，例如：

```
<% if @order.payments[current_payment].monthly == false %> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T18:17:37.880

如果我理解了这个问题，您正在编辑一个订单并且有一个`fields_for`用于付款并希望获得与`fields_for`. 你可以通过`object`如下调用来做到这一点

```
= form_for @order do |f|
  = f.fields_for :payments do |ff|
    - payment_for_this_fields_for = ff.object # current payment object 
```

# javascript - 地理位置根本不起作用，找不到解决方案 不要认为我的代码有什么问题

> ID：15208162
> 
> 赞同：0
> 
> 时间：2013-03-04T18:12:31.947
> 
> 标签：javascript, html, google-maps, geolocation

我正在尝试在 Google Maps 上使用 Geolocation，但是当页面加载时，什么也没发生

```
<script>
var initialLocation;
var map;
var markersArray = [];
function initialize() {
  var mapOptions = {
  zoom: 15,
  center: new google.maps.LatLng(-34.397, 150.644),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  disableDefaultUI: false,
  zoomControl: true,
  zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE
  }
};

  map = new google.maps.Map(document.getElementById('gmaps'),
  mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    var latitude = event.latLng.lat();
    var longitude = event.latLng.lng();
    deleteOverlays();
    addMarker(event.latLng);
    updateTextFields(latitude, longitude);
  });

  google.maps.event.addListener(marker, 'click', function(event) {
    showInfo(window);
  });

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success);
    alert('Browser Supports but Im not doing anything yet');
  } else {
    error('Geo Location is not supported');
  }
}

function updateTextFields(lati, longi) {
  $('#inputLatitude').val(lati);
  $('#inputLongitude').val(longi);
}

function addMarker(location) {
  marker = new google.maps.Marker({
    position: location,
    map: map
  });
  markersArray.push(marker);
}

function deleteOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
}

function loadScript() {
  var script = document.createElement('script');
  script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&' +
  'callback=initialize';
  document.body.appendChild(script);
}

$(document).ready(function() {
$(window).resize(function () {
    var h = $(window).height(),
        offsetTop = 190; // Calculate the top offset

    $('#gmaps').css('height', (h - offsetTop));
  }).resize();
  window.onload = loadScript;
});

</script> 
```

![在此处输入图像描述](../Images/c3d90c47ce4ca0b6faae1c42965f64b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:17:22.997

您正在为窗口加载`window.onload` *后分配一个功能；*因此它不会被调用。

以下会更好：

```
$(document).ready(function() {
  $(window).resize(function () {
    var h = $(window).height(),
        offsetTop = 190; // Calculate the top offset

    $('#gmaps').css('height', (h - offsetTop));
  }).resize();
  loadScript();
}); 
```

此外：

```
navigator.geolocation.getCurrentPosition(success); 
```

需要一个`success`将地理位置作为输入参数的函数。我在您的代码中没有看到这样的功能。

# php - 为什么我们连接变量....没有连接这可以做不同的变量

> ID：15208164
> 
> 赞同：2
> 
> 时间：2013-03-04T18:12:53.903
> 
> 标签：php

我是php编程的新手，谁能告诉我plz有什么区别

```
$strJobs[$months] .= $jobs.","; 
```

和

```
$strJobs[$months]  = $jobs.","; 
```

没有连接有没有相同的结果...请告诉我谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:14:46.897

`.=`是连接 + 分配的快捷表示法。你的第一行相当于

```
$strJobs[$months] = $strJobs[$months] . $jobs . ","; 
```

您的第二行将简单地将逗号粘贴到 的末尾`$jobs`，并将该新字符串分配给`$strJobs[$months]`，替换之前的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:14:34.037

```
$strJobs[$months] .= $jobs.","; 
```

是相同的

```
$strJobs[$months] = $strJobs[$months] . $jobs.","; 
```

因此它采用新值 ( `$jobs.","`) 并将其连接到现有值。

第二个只是将值设置`$strJobs[$months]`为`$jobs.","`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:15:17.413

查看有关[字符串运算符](http://php.net/manual/en/language.operators.string.php)的 PHP 文档。

`$foo .= $bar;`是相同的`$foo = $foo . $bar;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:20:15.710

好吧，有时候，替代品会让生活更快乐……通常……

```
.= 
```

用于连接+分配...在某个地方您需要连接长文本..我将得到最常用的示例作为发送邮件...我们创建正文并通过此运算符连接PHP变量...。

```
. 
```

点运算符通常用于将单个变量与文本组合。

# javascript - 使用由 chrome 扩展注入的元素触发点击原始页面

> ID：15208166
> 
> 赞同：2
> 
> 时间：2013-03-04T18:13:00.617
> 
> 标签：javascript, google-chrome, google-chrome-extension, browser-extension

我正在开发一个 Chrome 扩展程序，它将一个链接注入到页面中，单击该链接会触发对页面中可见的两个链接的点击。当我从控制台运行代码时它可以工作，但由于 Chromes 隔离世界处理扩展，点击事件无法在原始页面链接上触发。有没有解决的办法？

代码：

```
function foo(e) {
    e.preventDefault();
    $(this).parent().siblings('.myElement').children('a.first-link').click();
    $(this).parent().siblings('.myElement').children('a.second-link').click();
}

$(document).on('mouseover', 'div.content', function() {
    if($(this).find('ul').children('li').length === 0) {
        var li = $('<li class="foo"></li>');
        var a = $('<a href="#">Action</a>');
        a.on('click', foo);
        li.append(a);
        $(this).find('ul').children('.myElement').after(li);
    }
}); 
```

谢谢你的帮助！

# ios - Box2d 和 Cocos2d 在 iOS 上的精灵和定位问题

> ID：15208167
> 
> 赞同：1
> 
> 时间：2013-03-04T18:13:00.717
> 
> 标签：ios, cocos2d-iphone, box2d, box2d-iphone

触摸屏幕时我正在创建新的精灵/身体：

```
-(void) addNewSpriteAtPosition:(CGPoint)pos
{
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position=[Helper toMeters:pos];
    b2Body* body = world->CreateBody(&bodyDef);

    b2CircleShape circle;
    circle.m_radius = 30/PTM_RATIO;

    // Define the dynamic body fixture.
    b2FixtureDef fixtureDef;
    fixtureDef.shape=&circle;
    fixtureDef.density=0.7f;
    fixtureDef.friction=0.3f;
    fixtureDef.restitution = 0.5;
    body-> CreateFixture(&fixtureDef);

    PhysicsSprite* sprite = [PhysicsSprite spriteWithFile:@"circle.png"];
    [self addChild:sprite];
    [sprite setPhysicsBody:body];
    body->SetUserData((__bridge void*)sprite);
} 
```

这是我的定位助手：

```
+(b2Vec2) toMeters:(CGPoint)point
{
    return b2Vec2(point.x / PTM_RATIO, point.y / PTM_RATIO);
} 
```

PhysicsSprite 是与 Box2D 一起使用的典型方法，但我将包含相关方法：

```
-(CGAffineTransform) nodeToParentTransform
{
    b2Vec2 pos = physicsBody->GetPosition();

    float x = pos.x * PTM_RATIO;
    float y = pos.y * PTM_RATIO;

    if (ignoreAnchorPointForPosition_)
    {
        x += anchorPointInPoints_.x;
        y += anchorPointInPoints_.y;
    }

    float radians = physicsBody->GetAngle();
    float c = cosf(radians);
    float s = sinf(radians);

    if (!CGPointEqualToPoint(anchorPointInPoints_, CGPointZero))
    {
        x += c * -anchorPointInPoints_.x + -s * -anchorPointInPoints_.y;
        y += s * -anchorPointInPoints_.x + c * -anchorPointInPoints_.y;
    }

    self.position = CGPointMake(x, y);

    // Rot, Translate Matrix
    transform_ = CGAffineTransformMake(c, s, -s, c, x, y);
    return transform_;
} 
```

现在，我有以下两个图像说明的两个问题，它们显示了精灵的调试绘制。视网膜和非视网膜版本：

![视网膜](../Images/d9a92cfe62d67c928a61f7a450d60f34.png)

![非视网膜](../Images/831ae7ece94650f6477ee42a590d6cbe.png)

问题 #1 - 正如您在两幅图像中看到的，对象离 (0,0) 越远，精灵与物理体的偏移越远。

问题 #2 - 红色圆圈图像文件为 60x60（视网膜），白色圆圈为 30x30（非视网膜）。为什么它们在屏幕上的大小不同？Cocos2d 应该使用点，而不是像素，所以它们在屏幕上不应该是相同的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:25:38.573

使用 contentSize，而不是硬编码大小。

```
circle.m_radius = sprite.contentSize.width*0.5f/PTM_RATIO; 
```

这适用于所有 SD 和 Retina 模式。

您可以使用此样式在 box2d 和 cocos2d 位置之间进行同步：

```
body->SetTransform([self toB2Meters:sprite.position], 0.0f);    //box2d<---cocos2d

//OR
sprite.position = ccp(body->GetPosition().x * PTM_RATIO,
                     body->GetPosition().y * PTM_RATIO);  //box2d--->cocos2d 
```

# java - Java ArrayList 乘法

> ID：15208168
> 
> 赞同：0
> 
> 时间：2013-03-04T18:13:06.143
> 
> 标签：java

大家好，我有以下代码行

```
solution first = mylist.remove((int)(Math.random() * mylist)); 
```

这给了我一个错误说明

```
The operator * is undefined for the argument type(s) double, ArrayList<solution> 
```

我正在尝试从我的 ArrayList 中删除我的 arrayList 中的一个随机数

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:15:21.490

看起来您正试图从列表中删除一个随机元素。要使用随机索引覆盖所有元素，您需要列表大小。

将数字乘以 是没有意义的`ArrayList`。您无法通过在代码中直接指定列表来获得列表的大小。调用`size()`列表中的方法。这将返回一个`int`可以相乘的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:24:42.650

您需要在列表大小范围内找到一个随机数

```
final Random random = new Random();

mylist.remove(random.nextInt(myList.size())); 
```

确保创建`Random`并存储它，否则它可能会重复创建相同的数字（它只是伪随机的）。

此外，该`nextInt`方法排除了上限，因此`mylist.size()`不会返回无效索引。

# java - 日期显示错误

> ID：15208174
> 
> 赞同：-1
> 
> 时间：2013-03-04T18:13:22.817
> 
> 标签：java, date

我使用此方法生成我今天的日期以将其写入文件。

```
 public void DateFiledControl() {
    Calendar currentTime = Calendar.getInstance();
    SimpleDateFormat myFormat = new SimpleDateFormat("YYYY/MM/DD");
    String strDate = myFormat.format(currentTime.getTime());
    System.out.println(strDate);
} 
```

但是，我的结果是：`2013/03/63`

为什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:14:25.237

因为您应该使用`dd`而不是`DD`，文档[对此`SimpleDateFormat`非常清楚。](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

![在此处输入图像描述](../Images/df943985338a187f29a9ed850d361b88.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:19:01.530

尝试

```
SimpleDateFormat myFormat = new SimpleDateFormat("yyyy/MM/dd"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T18:56:40.230

另外，请注意“MM”是月份，而“mm”是分钟。

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# c++ - 模板转换运算符

> ID：15208178
> 
> 赞同：1
> 
> 时间：2013-03-04T18:13:25.910
> 
> 标签：c++, templates, operator-overloading

我想为两个模板重载转换运算符。

啊

```
#pragma once

#include <B.h>

template <typename T> class A
{
operator B<T>() const;
} 
```

溴化氢

```
#pragma once

#include <A.h>

template <typename T> class B
{
operator A<T>() const;
} 
```

我有错误

```
error C2833: 'operator A' is not a recognized operator or type see
reference to class template instantiation 'B<T>' being compiled 
```

虽然如果转换运算符仅在一个模板中重载，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:17:33.977

你有一个循环依赖问题。您需要有一个前向声明，例如：

啊：

```
#pragma once

template <class T> class B;

template <class T> class A {
   operator B<T>() const;
};

#include "B.h"

template <class T>
A<T>::operator B<T>() const {
   foo();
} 
```

乙：

```
#pragma once
#include "A.h"

template <class T>
class B {
   operator A<T>() const {
      bar();
   }
}; 
```

我假设你用过`#include "A.h"`. Ah 然后包含 Bh 当编译器开始编译 Bh 时，它还没有看到 Ah 的声明，因此编译器不知道如何解释`operator A<T>() const`，因为它不知道 A 是一个类型。

# ios - 将 GMSVisibleRegion 转换为 CLRegion 或 MKCoordinateRegion

> ID：15208181
> 
> 赞同：4
> 
> 时间：2013-03-04T18:13:41.650
> 
> 标签：ios, google-maps, google-maps-sdk-ios, clregion

我正在使用 GoogleMaps SDK，目前我正在尝试将 GMSVisibleRegion 转换为 CLRegion。

GMSVisibleRegion 定义为：

```
typedef struct {
  CLLocationCoordinate2D nearLeft;
  CLLocationCoordinate2D nearRight;
  CLLocationCoordinate2D farLeft;
  CLLocationCoordinate2D farRight;
} GMSVisibleRegion; 
```

最快的方法是什么？

不幸的是，很难理解开发人员命名“近”和“远”的含义。我认为这条评论也很有用：

```
/**
 * Returns the region (four location coordinates) that is visible according to
 * the projection.
 *
 * The visible region can be non-rectangular. The result is undefined if the
 * projection includes points that do not map to anywhere on the map (e.g.,
 * camera sees outer space).
 */
 - (GMSVisibleRegion)visibleRegion; 
```

非常感谢！

编辑：好的，我的第一步是创建一个 GMSVisibleRegion 的 MKCoordinateRegion。

我建议使用以下代码将 aa GMSVisibleRegion 转换为 MKCoordinateRegion。任何异议。

```
 + (MKCoordinateRegion)regionForCenter:(CLLocationCoordinate2D)center andGMSVisibleRegion:(GMSVisibleRegion)visibleRegion
{
    CLLocationDegrees latitudeDelta = visibleRegion.farLeft.latitude - visibleRegion.nearLeft.latitude;
    CLLocationDegrees longitudeDelta = visibleRegion.farRight.longitude - visibleRegion.farLeft.longitude;
    MKCoordinateSpan span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta);

    return MKCoordinateRegionMake(center, span);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T00:25:09.347

我的猜测是“近”是指屏幕底部视图的角落，而“远”是指屏幕顶部的角落。这是因为如果您倾斜了视图，那么底角离相机最近，顶角离相机最远。

将其转换为 a 的一种方法`CLRegion`可能是使用相机的目标作为中心，然后计算从最大距离到四个角的半径。这可能不是该区域上最紧密的拟合圆，但由于圆无论如何都无法拟合视图的四边形，因此它可能足够接近。

这是一个辅助函数，用于计算两个`CLLocationCoordinate`值之间的距离（以米为单位）：

```
double getDistanceMetresBetweenLocationCoordinates(
    CLLocationCoordinate2D coord1, 
    CLLocationCoordinate2D coord2)
{
    CLLocation* location1 = 
        [[CLLocation alloc] 
            initWithLatitude: coord1.latitude 
            longitude: coord1.longitude];
    CLLocation* location2 = 
        [[CLLocation alloc] 
            initWithLatitude: coord2.latitude 
            longitude: coord2.longitude];

    return [location1 distanceFromLocation: location2];
} 
```

然后`CLRegion`可以这样计算：

```
GMSMapView* mapView = ...;
...
CLLocationCoordinate2D centre = mapView.camera.target;
GMSVisibleRegion* visibleRegion = mapView.projection.visibleRegion;

double nearLeftDistanceMetres = 
    getDistanceMetresBetweenLocationCoordinates(centre, visibleRegion.nearLeft);
double nearRightDistanceMetres = 
    getDistanceMetresBetweenLocationCoordinates(centre, visibleRegion.nearRight);
double farLeftDistanceMetres = 
    getDistanceMetresBetweenLocationCoordinates(centre, visibleRegion.farLeft);
double farRightDistanceMetres = 
    getDistanceMetresBetweenLocationCoordinates(centre, visibleRegion.farRight);
double radiusMetres = 
    MAX(nearLeftDistanceMetres, 
    MAX(nearRightDistanceMetres, 
    MAX(farLeftDistanceMetres, farRightDistanceMetres)));

CLRegion region = [[CLRegion alloc] 
    initCircularRegionWithCenter: centre radius: radius identifier: @"id"]; 
```

**更新：**

关于您的更新`MKCoordinateRegion`，您的示例代码可能不起作用。如果地图已旋转 90 度，则`farLeft`和`nearLeft`将具有相同的纬度，`farRight`并且`farLeft`将具有相同的经度，因此您的纬度和经度增量为零。

您需要遍历所有四个`farLeft`, `farRight`, `nearLeft`, `nearRight`，计算每个的纬度和经度的最小值和最大值，然后从中计算增量。

适用于 iOS 的 Google Maps SDK 包含一个帮助程序类，它已经为您完成了一些工作 - `GMSCoordinateBounds`. 它可以用 a 初始化`GMSVisibleRegion`：

```
GMSMapView* mapView = ...;
....
GMSVisibleRegion visibleRegion = mapView.projection.visibleRegion;
GMSCoordinateBounds bounds = 
    [[GMSCoordinateBounds alloc] initWithRegion: visibleRegion]; 
```

然后`GMSCoordinateBounds`有`northEast`和`southWest`定义边界的属性。因此，您可以按如下方式计算增量：

```
CLLocationDegrees latitudeDelta = 
    bounds.northEast.latitude - bounds.southWest.latitude;
CLLocationDegrees longitudeDelta = 
    bounds.northEast.longitude - bounds.southWest.longitude; 
```

您还可以从边界计算中心，因此`MKCoordinateRegion`：

```
CLLocationCoordinate2D centre = CLLocationCoordinate2DMake(
    (bounds.southWest.latitude + bounds.northEast.latitude) / 2,
    (bounds.southWest.longitude + bounds.northEast.longitude) / 2);
MKCoordinateSpan span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta);
return MKCoordinateRegionMake(centre, span); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-16T12:40:58.763

纯粹主义者的附录

如果您想绝对严格，则需要围绕国际日期变更线进行更正。在大多数应用程序中这将是浪费精力，但这个问题最近一直让我感到非常悲痛，所以我想把它扔进社区帽子里

基于 Druce 的更新（恐怕我无法发表评论）......

```
GMSMapView* mapView = ...;
....
GMSVisibleRegion visibleRegion = mapView.projection.visibleRegion;
GMSCoordinateBounds bounds = 
    [[GMSCoordinateBounds alloc] initWithRegion: visibleRegion]; 
```

纬度不需要做任何事情

```
CLLocationDegrees latitudeDelta = 
bounds.northEast.latitude - bounds.southWest.latitude; 
```

该协议认为，跨越国际日期变更线的地区可能在日本有一个西南角（+140 经度），在阿拉斯加有一个东北角（-150 经度）。加起来除以 2 在地球的错误一侧给出了一个点。

northEast.longitude 小于 southWest.longitude 的特殊情况需要处理

```
CLLocationCoordinate2D centre;
CLLocationDegrees longitudeDelta;

if(bounds.northEast.longitude >= bounds.southWest.longitude) {
//Standard case
    centre = CLLocationCoordinate2DMake(
             (bounds.southWest.latitude + bounds.northEast.latitude) / 2,
             (bounds.southWest.longitude + bounds.northEast.longitude) / 2);
    longitudeDelta = bounds.northEast.longitude - bounds.southWest.longitude;
} else {
//Region spans the international dateline
    centre = CLLocationCoordinate2DMake(
             (bounds.southWest.latitude + bounds.northEast.latitude) / 2,
             (bounds.southWest.longitude + bounds.northEast.longitude + 360) / 2);
    longitudeDelta = bounds.northEast.longitude + 360 
                    - bounds.southWest.longitude;
}
MKCoordinateSpan span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta);
return MKCoordinateRegionMake(centre, span); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-22T13:31:07.930

对于根据迄今为止提供的所有答案和更正寻找样板代码的任何人，这里是`region`作为 GMSMapView 上的一个类别实现的：

```
//
//  GMSMapViewExtensions.h
//

#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
#import <GoogleMaps/GoogleMaps.h>

@interface GMSMapView (GMSMapViewExtensions)

@end 
```

和

```
//
//  GMSMapViewExtensions.m
//

#import "GMSMapViewExtensions.h"

@implementation GMSMapView (GMSMapViewExtensions)

- (MKCoordinateRegion) region {
    GMSVisibleRegion visibleRegion = self.projection.visibleRegion;
    GMSCoordinateBounds * bounds = [[GMSCoordinateBounds alloc] initWithRegion: visibleRegion];

    CLLocationDegrees latitudeDelta = bounds.northEast.latitude - bounds.southWest.latitude;

    CLLocationCoordinate2D centre;
    CLLocationDegrees longitudeDelta;

    if (bounds.northEast.longitude >= bounds.southWest.longitude) {
        // Standard case
        centre = CLLocationCoordinate2DMake(
            (bounds.southWest.latitude + bounds.northEast.latitude) / 2,
            (bounds.southWest.longitude + bounds.northEast.longitude) / 2);
        longitudeDelta = bounds.northEast.longitude - bounds.southWest.longitude;
    } else {
        // Region spans the international dateline
        centre = CLLocationCoordinate2DMake(
            (bounds.southWest.latitude + bounds.northEast.latitude) / 2,
            (bounds.southWest.longitude + bounds.northEast.longitude + 360) / 2);
        longitudeDelta = bounds.northEast.longitude + 360 - bounds.southWest.longitude;
    }

    MKCoordinateSpan span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta);
    return MKCoordinateRegionMake(centre, span);
}

- (MKMapRect)visibleMapRect {
    MKCoordinateRegion region = [self region];
    MKMapPoint a = MKMapPointForCoordinate(CLLocationCoordinate2DMake(
        region.center.latitude + region.span.latitudeDelta / 2,
        region.center.longitude - region.span.longitudeDelta / 2));
     MKMapPoint b = MKMapPointForCoordinate(CLLocationCoordinate2DMake(
        region.center.latitude - region.span.latitudeDelta / 2,
        region.center.longitude + region.span.longitudeDelta / 2));
     return MKMapRectMake(MIN(a.x, b.x), MIN(a.y, b.y), ABS(a.x - b.x), ABS(a.y - b.y));
}

@end 
```

使用示例：

```
GMSMapView * mapView = .... // init code
MKCoordinateRegion mapRegion = mapView.region; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-19T12:32:11.277

根据@Saxon Druce 的回答，这是设置和`region`使用 MKCoordinateRegion的快速扩展`GMSMapView`

```
extension GMSMapView {
    var region : MKCoordinateRegion {
        get {
            let position = self.camera
            let visibleRegion = self.projection.visibleRegion()
            let bounds = GMSCoordinateBounds(region: visibleRegion)
            let latitudeDelta = bounds.northEast.latitude - bounds.southWest.latitude
            let longitudeDelta = bounds.northEast.longitude - bounds.southWest.longitude
            let center = CLLocationCoordinate2DMake(
                (bounds.southWest.latitude + bounds.northEast.latitude) / 2,
                (bounds.southWest.longitude + bounds.northEast.longitude) / 2)
            let span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta)
            return MKCoordinateRegionMake(center, span)
        }
        set {
            let northEast = CLLocationCoordinate2DMake(newValue.center.latitude - newValue.span.latitudeDelta/2, newValue.center.longitude - newValue.span.longitudeDelta/2)
            let southWest = CLLocationCoordinate2DMake(newValue.center.latitude + newValue.span.latitudeDelta/2, newValue.center.longitude + newValue.span.longitudeDelta/2)
            let bounds = GMSCoordinateBounds(coordinate: northEast, coordinate: southWest)
            let update = GMSCameraUpdate.fitBounds(bounds, withPadding: 0)
            self.moveCamera(update)
        }
    }
} 
```

# java - Eclipse 在将 GaussianBlur 与 OpenCV for Android 一起使用时出错

> ID：15208184
> 
> 赞同：7
> 
> 时间：2013-03-04T18:13:55.750
> 
> 标签：java, android, opencv, gaussian

我发布了我的代码的一小部分，因为我不断收到一个我似乎无法摆脱的奇怪错误。问题可以在这一行找到：**Imgproc.GaussianBlur(mGray, mGray, new Size (5,5), 2.2, 2);**

```
public Mat onCameraFrame(Mat inputFrame) {
    mGray = new Mat();
    Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_RGBA2GRAY);    
    // doing a gaussian blur prevents getting a lot of false hits
    Imgproc.GaussianBlur(mGray, mGray, new Size (5,5), 2.2, 2);
    // Values 3 and 4are the LowerThreshold and UpperThreshold.
    Imgproc.Canny(inputFrame, mIntermediateMat, 80, 100);
    Imgproc.cvtColor(mIntermediateMat,mRgba, Imgproc.COLOR_GRAY2BGRA, 4);
    return mIntermediateMat;
} 
```

我从 Eclipse 得到的错误是：

```
The method GaussianBlur(Mat,Mat,Size,double,double) in 
the type imgproc is not applicable for the arguments (Mat,Mat,CameraSize,int,int) 
```

我正在使用 tutorial3 Camera-control 的编辑版本（Android 版本 2.4.4 的 OpenCV），其中输出显示为 Canny 的边缘检测。我需要 GaussianBlur 来去除一些较小的细节。有谁知道这行代码到底出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T11:58:38.693

这段代码工作正常。只需根据需要重新排序参数。

```
Imgproc.GaussianBlur(mGray, mGray, new Size(15,15),50); 
```

大小意味着您将使用它作为内核大小。内核大小也必须是**奇数！**图 50 显示了 X 方向的核标准偏差。

公式 ： `sigma = 0.3 * ((kSize-1)*0.5 - 1) + 0.8`

这里 sigma 通过 50 所以**sigmaX = sigmaY = 50**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:25:06.743

我从 Alexander Smorkalov 那里得到了这个解决方案，它奏效了。只需更改 Imgproc.GaussianBlur(mGray, mGray, new Size (5,5), 2.2, 2); to Imgproc.GaussianBlur(mGray, mGray, new org.opencv.core.Size (5,5), 2.2, 2);

# svn - 恢复后如何强制在SVN中提交工作副本

> ID：15208185
> 
> 赞同：0
> 
> 时间：2013-03-04T18:13:59.943
> 
> 标签：svn

我不得不将受 SVN 保护的代码恢复到较早的版本，然后我对其进行了大量修改。我想将修改后的版本提交给 SVN，但是当我尝试提交时，SVN 告诉我必须先更新。我不想这样做。

是否可以指定我的本地版本（工作副本）是新的当前正确版本，而无需来自 SVN 的更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:25:32.607

答案似乎是`svn up --accept mine-full`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:48:47.640

`HEAD`除了主干或分支之外，您不能提交更改。这适用于所有版本控制系统。否则，人们将覆盖他们想要保留的更改。

你可以做两件事：

1.  继续前进并更新到最新版本。Subversion 不会覆盖您的更改，而是会简单地更新它可以的地方。可能会有一些冲突。这完全取决于您修改的代码有多旧。例如，我们目前处于修订版 12,001，我检查了修订版 11,980，因为那是我们服务器上的内容，我正在调试它。我在两个文件中修复了一些小问题。更新到最新版本将更新所有文件，甚至是我处理过的文件，但不会更新我处理过的那些文件的区域。很可能，这确实是我想要做的。（当然，更新后要彻底测试！）。
2.  根据您的修订创建一个新分支。Subversion 可以在一毫秒内完成。然后，在该新分支上提交您的更改。

让我们再次假设，我检查了修订版 11,980，最新修订版是 12,0001：

```
$ svn co -r 11980 http://path/to/my/project workdir
$ cd workdir
...a bunch of changes
$ svn commit -m"My changes"
SVN Error: you need to update first...
$ svn copy -r11900 http://path/to/my/project@11900 http://path/to/branches/my_branch/project 
```

现在，我有了作为一个分支的工作*基础*。现在，我要切换到那个分支：

```
$ svn switch http://path/to/branches/my_branch/project 
```

我的工作目录位于基于我正在处理的旧版本的新分支上。我所有的更改都没有被开关改变。我现在可以毫无问题地提交我的更改。

```
$ svn commit -m"My changes"
$ It worked! 
```

现在，如果我愿意，我可以将我的更改合并回原始项目：

```
$ svn co http://path/to/my/project workdir2
$ cd workdir2
$ svn merge http://path/to/branches/my_branch/project 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:28:07.837

1）在硬盘的其他地方备份您的最终代码库。
2) 进行更新
3) 从 SVN 中删除所有内容
4) 从备份驱动器复制粘贴所有代码库
5) 提交

或者

如果有帮助，您可以执行清理，我不这么认为...

# css - CSS3甜甜圈菜单

> ID：15208190
> 
> 赞同：2
> 
> 时间：2013-03-04T18:14:22.497
> 
> 标签：css, user-interface

嗨，我想实现一个像这样的甜甜圈菜单[http://dribbble.com/shots/610433-Wheel-Nav](http://dribbble.com/shots/610433-Wheel-Nav)我知道有一种简单的方法可以在 css3 中制作甜甜圈。

```
.doughnut { 
    border: 50px solid #f00;
    border-radius: 100px;
    height:100px;
    width:100px;
} 
```

但当然，这只会使甜甜圈内部没有任何元素。我想知道是否只能用css3来做，关于如何开始的任何想法？如果仅使用 css 是不可能的，我将跳入 javascript 区域...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T23:03:04.223

我尝试使用 CSS 重现该图像：

# [*现场演示*](http://codepen.io/thebabydino/pen/Bzuti)

**结果**：

![结果](../Images/7b35ce973c04df3c931909eae575fa0f.png)

**HTML**：

```
<ul class='menu circ-menu'>
  <li class='menu-item'>
    <a href='#'>☊&lt;/a>
  </li>
  <li class='menu-item selected'>
    <a href='#'>☁☀</a>
    <ul class='menu submenu'>
      <li><a href='#'>☂&lt;/a></li><!--
      --><li><a href='#'>☁&lt;/a></li><!--
      --><li><a href='#'>☃&lt;/a></li>
    </ul>
  </li>
  <li class='menu-item'>
    <a href='#'>✦&lt;/a>
  </li>
</ul> 
```

**CSS**：

```
.menu { padding: 0; list-style: none; }
.menu a {
  display: block;
  color: #666561;
  font: 900 2em/3.2 monospace;
  text-decoration: none;
  text-shadow: 0 1px white;
}
.circ-menu {
  overflow: hidden;
  position: relative;
  margin: 1em auto;
  padding: 5em 0 0;
  width: 20em; height: 10em;
  box-shadow: 0 .5em .5em -.5em;
}
.menu-item {
  overflow: hidden;
  position: absolute;
  z-index: 0;
  left: -50%; bottom: 0;
  width: 20em; height: 20em;
  transform-origin: 100% 100%;
}

/* === style the menu items (slices) === */

/* three slices making up half a circle mean that a slice is going to have a central_angle = 60deg */
.menu-item:first-child {
  transform: skewX(30deg) /* 90deg - central_angle */;
}
.menu-item:nth-child(2) {
  /* rotate by the value of the central angle multiplied with how many slices are before */
  transform: 
    rotate(60deg) /* 60deg = 1*central angle */
    skewX(30deg) /* 90deg - central_angle */;
}
.menu-item:last-child {
  transform: 
    rotate(120deg) /* 120deg = 2*central angle */
    skewX(30deg) /* 90deg - central_angle */;
}

/* === contents of the menu items === */
.menu-item > * {
  position: absolute;
  top: 55%; left: 55%;
  width: 90%; height: 90%;
  text-align: center;
}
.menu-item > a {
  border-radius: 50%;
  box-shadow: 0 0 0 .2em #aaa497, 
    0 0 .5em .2em black;
  transform:
    skewX(-30deg) /* unskew */
    rotate(-60deg);
  background: #f8f4ef;
  background: 
    radial-gradient(transparent 39%, #f7f3ee 40%);
}
.selected > a { z-index: 1; }
.selected > a, .menu a:hover {
  color: #e96429;
}
.selected > a, .menu-item > a:hover {
  box-shadow: 0 0 0 .2em #e96429, 
    0 0 .5em .2em black;
  background: 
    linear-gradient(60deg, #e96429 31%, rgba(247, 243, 238, 0) 33%),
    linear-gradient(-60deg, #e96429 31%, rgba(247, 243, 238, 0) 33%),
    radial-gradient(transparent 39%, #f7f3ee 40%);
  background-size: 100% 26%,  100% 26%, 100% 100%;
}

.submenu {
  z-index: 0;
  transform: 
    skewX(-30deg) /* unskew */
    rotate(-60deg)
    translateY(-5.25em);
}
.submenu li {
  display: inline-block;
  position: relative;
  border-top: solid 1px #666561;
  border-bottom: solid 1px #666561;
  width: 3.2em; height: 3.2em;
  background: #f7f3ee;
}
.submenu li:before {
  position: absolute;
  bottom: 0;
  width: 100%; height: .2em;
  background: #666561;
  content: '';
}
.submenu a {
  line-height: 2
}
.submenu li:first-child {
  border-radius: .3em 0 0 .3em;
  border-left: solid 1px #666561;
}
.submenu:after {
  position: absolute;
  z-index: -1;
  top: 2.5em; left: 50%;
  margin: 0 -.6em;
  width: 1.2em; height: 1.2em;
  transform: rotate(-30deg) skewX(30deg);
  background: #666561;
  content: '';
}
.submenu li:last-child {
  border-radius: 0 .3em .3em 0;
  border-right: solid 1px #666561;
}

.circ-menu:before, .circ-menu:after {
  position: absolute;
  z-index: 1;
  bottom: -7.071em; left: 14.645%;
  width: 14.142em; height: 14.142em;
  border-radius: 50%;
  content: '';
}
.circ-menu:before {
  bottom: -5em; left: 5em;
  width: 10em; height: 10em;
  box-shadow: inset 0 0 .75em black, 
    0 0 .5em .2em #f7f3ee;
}
.circ-menu:after {
  bottom: -1em; left: 9em;
  width: 2em; height: 2em;
  box-shadow: 0 0 .4em dimgrey, 
    0 0 0 .75em #e27447, 
    0 0 .4em .75em dimgrey, 
    0 0 0 2em #f7f3ee, 
    0 0 .4em 2em dimgrey;
  background: #f7a480;
} 
```

这个想法很简单。你从一个列表结构开始，就像你为每个菜单做的那样。

```
<ul class='menu-circ'>
  <li class='menu-item'><a href='#'>boo</a></li>
  <!-- the other list items -->
</ul> 
```

## 解释基本思想

您给容器`.menu-circ` `position: relative`并绝对定位其子项（菜单项），使它们的一个角位于中心（的`.menu-circ`）。然后你将变换原点设置`.menu-item`在那个角落。

在这种情况下，我选择了右下角位于中心（`transform-origin: right bottom`相当于`transform-origin: 100% 100%`），但这并不重要，您可以选择要放在中心的任何一个角并将其设置在`transform-origin`那里。

然后，您需要确定菜单项形成的每个切片的[**中心角值。**](http://en.wikipedia.org/wiki/Central_angle)在这种情况下，这很容易 - 半圆有三个切片，半圆表示`180deg`，所以假设我想要 3 个相等的切片，每个的中心角是`180deg/3 = 60deg`。

决定后，您现在需要使在父项中心相交的边（在本例中为右侧和底部）形成 角`60deg`。您可以通过应用倾斜变换来做到这一点，倾斜角度为`90deg-60deg = 30deg`：

```
transform: skewX(30deg); 
```

但这仍然将所有菜单项保留在第一个菜单项的位置。因此，对于除第一个以外的所有菜单项，您还需要将 旋转中心角的值乘以之前的项目数。这意味着您将拥有：

```
.menu-item:first-child { transform: skewX(30deg); } /* no items before */
.menu-item:nth-child(2) { transform: rotate(60deg) /* 1*60deg */ skewX(30deg); }
.menu-item:nth-child(3) { transform: rotate(120deg) /* 2*60deg */ skewX(30deg); } 
```

这会将所有菜单项定位在它们应该在的位置，但现在它们的内容是倾斜的。因此，您需要“消除”它们。我的意思是你应用了一个相反角度的倾斜变换。在这种情况下，不偏斜意味着应用`skewX(-30deg)`.

尽管如此，内容的角度还是不对。在这种情况下，您需要将其旋转中心角减 90 度的一半。这意味着通过`60deg/2 - 90deg = 30deg - 90deg = -60deg`。

内容（在这种情况下为链接）也应该绝对定位，使其中心位于您`transform-origin`为其父级 ( `.menu-item`) 设置的点处，您可以给它任何您想要的大小，但如果您希望它是圆形的，那么你必须给它相等的宽度和高度，并确保它们不超过其父级（`.menu-item`）的两倍。

最后，你开始`overflow: hidden`了`.menu-item`，你有一个馅饼菜单。如果要覆盖中心部分，请在菜单 ( `.menu-circ`) 上使用伪元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:20:39.887

看看其中一些属性：

*   CSS 3 变换 - 用于元素旋转 - [W3](http://www.w3schools.com/cssref/css3_pr_transform.asp)
*   CSS 3 Transitions - 我想平滑旋转表盘 - [W3](http://www.w3schools.com/cssref/css3_pr_transition.asp)
*   CSS 悬停选择器 - 用于弹出窗口 - [W3](http://www.w3schools.com/cssref/sel_hover.asp)
*   CSS 3 Clip - 塑造元素 - [W3](http://www.w3schools.com/cssref/pr_pos_clip.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:22:14.630

本教程创建 css3 饼图可以帮助您：[http](http://www.kylejlarson.com/blog/2011/how-to-create-pie-charts-with-css3/) ://www.kylejlarson.com/blog/2011/how-to-create-pie-charts-with-css3/ 。

你可以让所有的饼形楔子成为你的按钮，然后在轮子的中心叠加一个较小的圆圈。

# java - 为什么这段代码不能正确显示？

> ID：15208191
> 
> 赞同：0
> 
> 时间：2013-03-04T18:14:24.427
> 
> 标签：java, swing, netbeans

为什么 FieldBox 面板上的 JLabel、JTextField 和 JButton 组件不显示？

请让我知道我是否可以在这个问题上添加任何内容以使其更容易回答！

字段框（其中一个是为几个实例字段中的每一个创建的）：

```
public class FieldBox extends javax.swing.JPanel {
JLabel label;
JTextField textField;

public FieldBox() {
            setBackground(Color.RED);

    setLayout(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints();

    label = new JLabel();
    gbc.gridx = 0;
    gbc.gridy = 0;
    add(label,gbc);

    textField = new JTextField();
    gbc.gridx = 1;
    gbc.gridy = 0;
    add(textField, gbc);

    JButton editBtn = new JButton("edit");
    gbc.gridx = 2;
    gbc.gridy = 0;
    add(editBtn, gbc);        

    JButton saveBtn = new JButton ("save");
    gbc.gridx = 3;
    gbc.gridy = 0;
    add(saveBtn, gbc);

    label.setVisible(true);
    label.setBackground(Color.yellow);

    setVisible(true);

    initComponents();
} 
```

添加框的面板：（出现面板。我知道此面板已加载，因为我可以看到它的背景。我还可以看到我用于测试的“tit”JLabel。此外，当我加载使用 gridLayout 将框放到它上面（如下所示），我看到其中一个框的背景，但没有显示任何内容，并且应该显示三个框但我只看到一个。使用 GridBagLayout

```
public class ShowBook extends javax.swing.JPanel {

public ShowBook(Book b) {
    setLayout(new GridLayout(1,6));
    setBackground(Color.GREEN);
       String[] fieldTitles = {"title",  "catalog", "publisher" };
    JLabel tit = new JLabel("tit");

    add(tit);

    for (String s : fieldTitles){
        FieldBox fb = new FieldBox();
        fb.label.setText(s + ": ");
        fb.textField.setText(getField(b, s));     
        System.out.println("in text field" + fb.textField.getText());
        fb.revalidate();
        fb.setVisible(true);
        add (fb);

    }
    revalidate();
   setVisible(true);
} 
```

添加 ShowBook 面板（上图）的面板。该面板还包含一个列表框，其中列出了收藏中的书籍，以及一个用于启动 ShowBook 面板的按钮，该面板将所选书籍作为参数。

```
public class ShowLib extends javax.swing.JPanel {

/**
 * Creates new form ShowLib
 */
public ShowLib(Library l) {

    setLayout(new BorderLayout())  ;     
    setBackground(Color.WHITE);
    JPanel listPanel = new JPanel();
    listPanel.setLayout(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints();

    final JList bookList = new JList();

    bookList.setVisible(true);
    bookList.setPreferredSize(new Dimension(150, 600));
    bookList.setBackground(Color.yellow);

    DefaultListModel dlm = new DefaultListModel();
    for (Book b : l.libList){
        dlm.addElement(b);
    }
    bookList.setModel(dlm);

    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.fill = gbc.BOTH;
    listPanel.add(bookList, gbc);

    JButton showBtn = new JButton("show");
    gbc.gridy = gbc.RELATIVE;
    listPanel.add(showBtn, gbc);

    showBtn.addActionListener(new ActionListener () {

        @Override
        public void actionPerformed(ActionEvent e){
            Book b = (Book) bookList.getSelectedValue();
            ShowBook db = new ShowBook (b);
            System.out.println("Clicked");
            add (db, BorderLayout.CENTER);
            revalidate();
        }

    });

    revalidate();
    setVisible(true);

    add(listPanel, BorderLayout.WEST);  

} 
```

ShowLib 面板添加到主 JFrame 的位置。我知道这行得通，因为该面板显示正确

```
void showLib() {
    ShowLib sl = new ShowLib(l);
    sl.setVisible(true);
    setContentPane(sl);
    revalidate();
 //   this.revalidate();
//    this.pack();
    System.out.println("showlibClicked");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:58:53.130

问题是`initComponents();`FieldBox 类底部的行。

经验教训：如果您没有使用 NetBeans 可视化 GUI 编辑器，请摆脱这条线！

# python - 从python向mongodb插入一个值会产生奇怪的数字吗？

> ID：15208197
> 
> 赞同：1
> 
> 时间：2013-03-04T18:14:35.803
> 
> 标签：python, mongodb, pymongo, database

我想用 pymongo 和 mongodb 执行一个非常简单的任务。我在我的树莓派上运行最新的 pymongo 和 mongodb 2.1.1。

问题是，我在 python 上运行以下代码来插入值：

```
myDATA1 = {"sensor_id":3, "value":float(str(w1_temp)), "date":datetime.datetime.utcnow()}
post_id = db.sensor.insert(myDATA1) 
```

注意行`float(str(w1_temp))`。我也试过了`w1_temp`，还是不行。我只是想确保 w1_temp 被格式化为浮点数，并且它可以存储在 mongodb 上。但这不是问题。线

```
print myDATA1 
```

在 python 上会生成这个：

```
{'date': datetime.datetime(2013, 3, 4, 18, 3, 55, 923904), 'sensor_id': 3, 'value': 1.937, '_id': ObjectId('5134e20b72ab8a6491111a8a')} 
```

在 mongodb 上，我看到了这个：

```
{ "_id" : ObjectId("5134e20b72ab8a6491111a8a"), "date" : ISODate("2013-03-04T18:03:55.923Z"), "sensor_id" : 3, "value" : -2.960244045726579e-47 } 
```

如您所见， 的价值`value`完全不同！为什么？

谢谢

# c++ - 《C++ Templates - The Complete Guide》这本书似乎有矛盾之处

> ID：15208198
> 
> 赞同：2
> 
> 时间：2013-03-04T18:14:43.837
> 
> 标签：c++, templates, template-argument-deduction

在“C++ 模板 - 完整指南”一书的部分`2.4 Overloading Function Templates`中，您将找到以下示例：

```
// maximum of two int values
inline int const& max (int const& a, int const& b)
{
    return a < b ? b : a;
}
// maximum of two values of any type
template <typename T>
inline T const& max (T const& a, T const& b)
{
    return a < b ? b : a;
}
// maximum of three values of any type
template <typename T>
inline T const& max (T const& a, T const& b, T const& c)
{
    return max (max(a,b), c);
}
int main()
{
    ::max(7, 42); // calls the nontemplate for two ints (1)
} 
```

然而，在附录 B 的 B.2 简化重载解决方案中，作者指出：

> 请注意，重载决议发生*在*模板参数推导之后，... (2)

根据`(2)`，`::max(7,42)`应该`max<int>`通过参数推导调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:21:01.717

如果函数都完全匹配，包括`cv`限定符，编译器将在重载解析中更喜欢非模板函数。

因此，这里将选择非模板，即使模板化函数本质上是相同的。

编辑：

在标准草案 N3485 中，我发现了这一点：

**13.3.3 最佳可行函数[over.match.best]**

> 鉴于这些定义，如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2*更好*的函数，然后

...

> — *F1 是非模板函数*，F2 是函数模板特化，或者，如果不是，
> 
> — F1 和 F2 是函数模板特化，根据 14.5.6.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更特化。

...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T18:36:48.087

> 根据`(2)`，`::max(7,42)`应该`max<int>`通过参数推导调用。

不。想一想，要进行重载解析（也就是选择最佳匹配），编译器首先需要知道所有可用的重载并能够比较它们。请注意，函数模板本身并不是一个有效的函数，它首先需要被*实例化*以创建一个真正的函数。

这意味着，首先，编译器查看所有名为 的函数模板`max`，尝试为每个模板推导模板参数，然后对实例化函数和非模板函数进行重载解析。

这是函数的可视化（为简洁起见，省略了 cv 限定符）：

```
 int max(int, int);
template<class Arg> Arg max(Arg, Arg);
template<class Arg> Arg max(Arg, Arg, Arg); 
```

让我们来看看调用`::max(7, 42)`。

首先，编译器看到有三个候选函数。但是，它不能只将第一个重载`max`与其他两个进行比较——这就像比较苹果和橙子一样。相反，它首先需要从功能模板蓝图中“印出”一个真正的功能。在我们的例子中，这是通过模板参数推导发生的：

```
int max(int, int); // originally non-template
int max(int, int); // originally template
int max(int, int, int); // not enough arguments, invalid 
```

由于参数/参数计数不匹配，第三个重载被抛出，我们减少到两个。从重载解决方案的角度来看，两者都是平等的——但请稍等！现在有一条规则说明：

`§13.3.3 [over.match.best] p1`

> [...] 鉴于这些定义，如果 [...]，一个可行函数`F1`被定义为比另一个可行函数更好的函数`F2`：
> 
> *   `F1`是一个非模板函数并且`F2`是一个函数模板特化，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T18:23:56.547

模板参数推导重载决议后发生之间

```
1) inline int const& max (int const& a, int const& b); 
```

和

```
2) template <>
   inline int const& max (int const& a, int const& b) 
```

在这种情况下 1) 按照 C++ 标准 13.3.3 中的规定调用。1（[草案 n3092](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3092.pdf)）。

msdn 也明确指出：

> 如果非模板函数与模板函数同样匹配，则选择非模板函数

[http://msdn.microsoft.com/en-us/library/s016dfe8%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/s016dfe8%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T18:35:07.173

根据 C++11 标准的第 13.3.3/1 段（重载决议上下文中的“最佳可行函数”）：

> 定义 ICSi(F) 如下：
> 
> — 如果 F 是静态成员函数，ICS1 (F) 被定义为对于任何函数 G，ICS1 (F) 既不好也不差于 ICS1 (G)，并且对称地，ICS1 (G) 既不好也不差于ICS1 (F)132；除此以外，
> 
> — 令 ICSi(F) 表示将列表中的第 i 个参数转换为可行函数 F 的第 i 个参数的类型的隐式转换序列。13.3.3.1 定义了隐式转换序列，13.3.3.2 定义了它意味着一个隐式转换序列比另一个转换序列更好或更差。
> 
> 鉴于这些定义，**如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2 更好的函数**，然后
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — 上下文是通过用户定义的转换（见 8.5、13.3.1.5 和 13.3.1.6）和从 F1 的返回类型到目标类型（即被初始化的实体的类型）的标准转换序列进行的初始化是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。[...]
> 
> — **F1 是非模板函数，F2 是函数模板特化**，或者，如果不是，
> 
> — F1 和 F2 是函数模板特化，根据 14.5.6.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更特化。

这意味着在重载决议的上下文中，当通过实例化函数模板（因此，在类型推导之后）生成的函数与非模板函数同样好匹配时，非模板函数是首选。

# asp.net - 按钮悬停着色

> ID：15208201
> 
> 赞同：0
> 
> 时间：2013-03-04T18:15:07.197
> 
> 标签：asp.net, html, css

为清晰起见，在解决后进行了编辑。

我想将按钮上的悬停颜色从默认的蓝色更改为另一种颜色。我想这样做，而不必完全重新定义按钮的所有 CSS。我只想覆盖悬停颜色，保留剩余的默认值。

图片：

通常是这样的：![在此处输入图像描述](../Images/f9de2c51dda55e7f7bf0d8640844226b.png)悬停，是这样的：![在此处输入图像描述](../Images/c62dd436ca63b978649d87b844e62766.png)

我想更改悬停时的突出显示颜色。

编辑：

试过：

```
.Cancel:hover
    {
        background: linear-gradient(black, white); //Tried these separately
        background-color:Red;
    } 
```

和按钮标记：

```
<asp:Button ID="btnPprGrdsCancelRefresh" runat="server" Text="Cancel/Refresh" CssClass="Cancel" /> 
```

线性渐变似乎没有做任何事情，背景颜色改变了按钮的颜色，而不是按钮上的蒙版。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:16:48.053

[`:hover`](https://developer.mozilla.org/en-US/docs/CSS/:hover)伪类这样做：

```
button:hover {
    background-color: #f00;
} 
```

但是，样式化表单控件通常很棘手。如果您试图让浏览器以其默认样式呈现按钮，那么只需更改悬停时的背景颜色，它就行不通了；其他属性（如边框）​​也将发生变化，[正如这个现场示例所演示](http://jsfiddle.net/cGRbC/)的那样。您必须在让浏览器和操作系统决定控件在所有状态下的外观或为每个状态创建自己的样式之间做出选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:17:46.817

```
button:hover{
//style color here
} 
```

# couchdb - couchdb冲突相同的文件

> ID：15208208
> 
> 赞同：0
> 
> 时间：2013-03-04T18:15:22.363
> 
> 标签：couchdb, conflict

在 CouchDB 的 1.2 版中。
有谁知道，如果将两个具有相同 ID 的相同文档插入两个数据库，然后从一个数据库复制到另一个数据库，是否会发生冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:12:16.207

I didn't yet try it. But I guess if this happens one would want to resolve the confict automatically since the documents are the same it doesn't matter which one is the latest.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:59:54.750

在 CouchDB 版本 >= 0.10 中不会有冲突。

这是因为通过发现未出现在文档历史记录中的不同修订来检测冲突。修订号在文档数据（包括 id）和历史上是确定的，因此对于任何两个相同的新文档来说都是完全相同的，CouchDB 甚至不会知道存在问题。

旧版本（最高 0.9 的版本）使用随机修订号，在这种情况下会导致冲突。

有关更多信息，请参阅[http://guide.couchdb.org/draft/conflicts.html#deterministic](http://guide.couchdb.org/draft/conflicts.html#deterministic)。[在http://csm.tumblr.com/post/18963100318/how-couchdb-revision-number-generation-works](http://csm.tumblr.com/post/18963100318/how-couchdb-revision-number-generation-works)开头还有更多关于修订号生成的详细信息。

# iphone - iPhone 应用程序中的 Dropbox 集成错误 400

> ID：15208213
> 
> 赞同：4
> 
> 时间：2013-03-04T18:15:43.567
> 
> 标签：iphone, ios, objective-c, ipad, dropbox

我正在使用伟大的源代码`GSDropboxDemoApp`，它很好地将 Dropbox 集成到应用程序中。但是，将应用程序链接到 Dropbox 后，加载文件夹内容时出错。下面是代码

我已经编辑了**info.plist**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
#warning Potentially incomplete method implementation. Fill in your Dropbox credentials!
#warning NB: you must also update the URL scheme listed under the CFBundleURLTypes key in GSDropboxDemoApp-Info.plist
    NSString *dropboxAppKey = @"sxxxxxxxxxx";
    NSString *dropboxAppSecret = @"cxxxxxxxxx";
    NSString *dropboxRoot = @"kDBRootAppFolder";  // either kDBRootAppFolder or kDBRootDropbox

    DBSession* dbSession = [[DBSession alloc] initWithAppKey:dropboxAppKey
                                                   appSecret:dropboxAppSecret
                                                        root:dropboxRoot];
    [DBSession setSharedSession:dbSession];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[GSViewController alloc] initWithNibName:@"GSViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {
            NSLog(@"App linked to Dropbox successfully");
        } else {
            NSLog(@"App not linked to Dropbox!");
        }
        return YES;
    }
    return NO;
} 
```

* * *

## 错误信息

```
 GSDropboxDemoApp[4674:907] [WARNING] DropboxSDK: error making request to /1/metadata/kDBRootAppFolder - (400) Expected a root of either 'dropbox' or 'sandbox', got 'kDBRootAppFolder' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T18:18:21.700

您应该使用一个*常量*，如下所示：

```
NSString *dropboxRoot = kDBRootAppFolder;  // either kDBRootAppFolder or kDBRootDropbox 
```

使用常量是为了让您不必担心实际值本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T20:21:14.887

对于我们这些人（将来偶然发现这个问题）使用 ruby​​ 运动遇到同样的错误，它需要是：

```
dropboxRoot = KDBRootAppFolder # Capital K 
```

# android - Google Maps Android API v2 路由 json 解析

> ID：15208216
> 
> 赞同：3
> 
> 时间：2013-03-04T18:15:54.543
> 
> 标签：android, routes, maps

嗨，在 LocationManager 的帮助下，我设法在 android 中找到了当前位置。为了显示两个地理坐标之间的路线，我应该使用什么，这样我就不会绘制空中距离，而是会显示地面路线，还是在 json 的帮助下我可以绘制路线。

我试过 polyLine() 但它给出了直线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:29:56.100

要计算出两点之间的线，您需要知道您使用的地图投影类型。一些地图投影保留了形状（因此角度），其他的则没有。看看[http://www.progonos.com/furuti/MapProj/Dither/CartProp/ShapePres/shapePres.html](http://www.progonos.com/furuti/MapProj/Dither/CartProp/ShapePres/shapePres.html)它可能会有所帮助。

如果您使用的是墨卡托投影，那么我发现此页面声称 C# 中的算法应该为您指明方向：[http ://conceptdev.blogspot.co.uk/2009/01/great-circles.html](http://conceptdev.blogspot.co.uk/2009/01/great-circles.html)

至于线段，多段线将在点之间给出直线。您需要使用 Path 并从内存中使用 Bézier 曲线方法 Path.cubicTo() 和 Path.rCubicTo()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:33:55.553

您是否在清单中设置了所有权限？此外，您必须启用定位服务（状态栏中的 gps 图标是否显示？）。设备获取位置需要一些时间，因此请查看是否调用了 onLocationChanged。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:47:55.517

在这里你可以找到你的问题的答案：

[有没有办法在 Google Map API v2 中显示道路方向？](https://stackoverflow.com/questions/14554078/is-there-a-way-to-show-road-directions-in-google-map-api-v2)

和这里：

[使用 Google Maps API v2 获取行车路线](https://stackoverflow.com/questions/14495030/google-map-api-v2-get-driving-directions/15053901#15053901)

基本上你应该做的是调用 Google Directions API 接收道路方向坐标（许多 Latlng 点），然后在每个坐标点之间绘制一条折线。

# bash - bash：if 语句以一种方式工作，但不适用于添加过程

> ID：15208217
> 
> 赞同：0
> 
> 时间：2013-03-04T18:15:56.507
> 
> 标签：bash, if-statement, xterm

此命令按预期工作。

```
if [[ "$fsb" > "19" || "$fsb" < "06" ]]; then
  xterm -name Xtermc
else
  xterm -name Xtermd
fi 
```

但这并没有，xterm 也没有产生，更不用说在其中运行脚本（x0 或 x100）了。

```
if [[ "$fsb" > "19" || "$fsb" < "06" ]]; then
  xterm -name Xtermc -e x0
else
  xterm -name Xtermd -e x100
fi 
```

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:26:59.527

这很可能是因为`x0`并且`x100`无法立即找到或退出。跑

```
xterm -name Xtermc -e 'x0; read' 
```

查看产生的任何错误消息。如果命令工作正常，但立即完成并退出，您可以在之后得到提示

```
xterm -name Xtermc -e 'x0; bash' 
```

# wordpress - Wordpress - 创建具有相同功能等的多个插件？

> ID：15208220
> 
> 赞同：0
> 
> 时间：2013-03-04T18:16:13.637
> 
> 标签：wordpress, plugins

我为 wordpress 写了一个插件，效果很好。我使用例如这样的东西：

```
add_action('wp_enqueue_scripts', 'head_css');
function head_css() {
    $myStyleFile =  plugins_url( 'css/a2m_lp.css', __FILE__ ) ;
    wp_enqueue_style( 'a2m_lp_stylesheet',$myStyleFile,false,'1.0');
} 
```

我也使用 HTML 代码和 JQuery 选择器来创建一些好的特性。

如果我创建了第二个可以安装在同一个 wordpress 环境中的插件，我必须重命名所有 HTML/JQuery 类/选择器，并且必须更新所有函数名称才能拥有唯一的名称 - 对吗？我怎么知道其他人是否使用了某些选择器。

是否有可能使用它们两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:27:34.810

我会让你的函数像这样匿名

```
$head_css = function() {
$myStyleFile =  plugins_url( 'css/a2m_lp.css', __FILE__ ) ;
wp_enqueue_style( 'a2m_lp_stylesheet',$myStyleFile,false,'1.0');
} 
```

或者为了使用 wordpress add_action

```
 add_action('wp_enqueue_scripts', function(){
  $myStyleFile =  plugins_url( 'css/a2m_lp.css', __FILE__ ) ;
  return wp_enqueue_style( 'a2m_lp_stylesheet',$myStyleFile,false,'1.0');
}); 
```

这样您就不会浪费命名空间并与其他插件发生冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-11T15:37:49.733

You can do it like this:

```
if (!function_exists('my_function')) {
    function my_function() {
        ...
    }
} 
```

I recommend declaring the function like that for every plugin that uses it - because the plugins may be called in a different/unexpected order in future.

Additionally, if you can set up your development environment efficiently - for example, creating a single file/library that contains the `my_function` code, then importing that into each of your plugin projects - it means you will only have once source file to update with any changes in the future, which could make maintenance a lot easier.

# api - 首次数据远程检查 (ICA) 集成

> ID：15208222
> 
> 赞同：1
> 
> 时间：2013-03-04T18:16:15.287
> 
> 标签：api, firstdata, linkpoint

我正在将 Firstdata telecheck 集成到我的购物车中。我有一个用于信用卡处理的暂存帐户，并且我已将其用于远程支票处理。

我得到的回应是：

**SGS-020019：无权进行此类交易。**

我猜我的帐户中没有启用 Telecheck。我尝试联系 Firstdata 支持，但没有得到太多帮助，因为它是一个暂存/演示帐户。

任何解决它的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T20:03:03.703

Found the answer. Firstdata do not provides sandbox environment for Telecheck. We need to get it enabled on production environment and test it their.

# c++ - 将 char* 输出到 std::string C++

> ID：15208225
> 
> 赞同：0
> 
> 时间：2013-03-04T18:16:29.753
> 
> 标签：c++, xml, string, char

所以给出：

```
struct MemoryStruct {
    char *memory;
    size_t size;
}; 
```

`char* memory`持有 curl 返回，XML doc。

我在做：

```
if(chunk.memory) {
    std::cout << "char size is " << sizeof(chunk.memory) << std::endl;
    std::string s = "";
    for (int c = 0; c<sizeof(chunk.memory); c++) {
        s.push_back(chunk.memory[c]);
    }
    std::cout << "s: " << s.c_str() << std::endl;
} 
```

我只是回来`<?xm`

所以`sizeof()`我认为是返回 char* 中的总字节数

我如何获得实际值是 a `char*`。所以基本上整个卷曲都回来了。哪一行是 5 行 XML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:18:10.607

`sizeof(chunk.memory)`将始终为您提供指针的大小，在您的情况下似乎为 4。这就是为什么您在 std::string 中只看到 4 个字符的原因。

如果您的 curl 返回或其他任何内容由 终止`\0`，那么您可以直接执行以下操作

```
std::string s(chunk.memory); 
```

如果您的 char * 不是由 终止`\0`，那么您需要知道字符串的长度 - 您不能`sizeof(chunk.memory)`用于此。如果您的 chunk.size 包含正确的大小，那么您可以使用

```
std::string s(chunk.memory, chunk.size); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:22:21.900

**std::string**构造函数可以接受**char***和数据长度（[参见文档](http://www.cplusplus.com/reference/string/string/string/)）；例子：

```
 std::string s(chunk.memory, chunk.size); 
```

因此容器将为您的字符串预先分配需要的空间并使用它进行初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T18:22:39.983

In`MemoryStruct` `memory`是指向第一个返回字符的指针，是返回`size`的字符数。你想用这个数据初始化一个字符串，所以你需要这样做：

```
s.assign(chunk.memory, chunk.size); 
```

# forms - 使用非字母数字字段名在 asp 中获取 post 变量

> ID：15208227
> 
> 赞同：0
> 
> 时间：2013-03-04T18:16:34.323
> 
> 标签：forms, asp-classic

我正在使用可以具有非字母数字字段名的旧式表单构建器系统，例如

```
< input type=text name="5-Teléfono"> 
```

在 asp 中，只需执行以下操作不会输出发布的值

```
response.write (request('5-Teléfono')) 
```

我知道这不是最好的设计决策（可能应该将字段命名为 text_123 ... 等），但是更新整个系统以使用此结构需要时间。

有没有办法让我用非字母数字读取表单字段名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:18:29.423

尝试

```
response.write (request("5-Teléfono")) 
```

（即在 5-Teléfono 周围加上双引号）

vbscript 中的单引号用于注释掉后面的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:55:43.133

不要使用这样的名称，这就像使用非英文变量名一样 - 影响相同。

如果您无法更改名称，您仍然可以迭代发布的值并查找正确的值：

```
For Each key In Request.Form
    If (InStr(key, "fono") > 0) And (InStr(key, "5-Tel") > 0) Then
        Response.Write("Found, value is: " & Request.Form(key))
    End If
Next 
```

# sql - 如何查看一个字段条目是否在另一个字段中有对应的条目？

> ID：15208232
> 
> 赞同：1
> 
> 时间：2013-03-04T18:16:50.393
> 
> 标签：sql, ms-access

我有一个名为 Table1 的表，如下所示：

```
Company    Start1      Start2      Start3      End1      End2      End3
-----------------------------------------------------------------------------
010105     1/2/1990                            7/30/2001
023123     2/1/1998    2/1/2012                5/15/2008 
124557     1/15/2001   
436567     1/12/2004   1/12/2010   1/12/2012   1/15/2005 1/15/2010 
034534     1/1/2002    1/1/2003    1/1/2004    5/1/2002  5/1/2006  5/1/2004
123456     1/1/2002    1/1/2003                          5/1/2006 
```

我正在寻找任何具有 Start1 而没有相应 End1 或 Start2 没有相应 End2 的公司，等等。字段中的条目不会完全匹配，但如果一个有条目，另一个也应该。

这可能吗？

上面示例中的查询将返回以下内容：

```
023123 (has Start2 but no End2)
124557 (has Start1 but no End1)
436567 (has Start3 but no End3)
123456 (has Start1 but no End1) 
```

（我只需要公司编号，不需要括号内的文字）

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:23:43.070

假设除了列出的 3 对之外没有其他列，这可以通过一个简单的`WHERE`子句来完成，该子句测试`NULL`每列中的非开始日期以及相应的`NULL`结束日期。如果满足三个条件中的任何一个，`Company`则将返回。

```
SELECT DISTINCT Company
FROM Table1
WHERE
  (Start1 IS NOT NULL AND End1 IS NULL)
  OR (Start2 IS NOT NULL AND End2 IS NULL)
  OR (Start3 IS NOT NULL AND End3 IS NULL) 
```

如果您的空字段实际上是空字符串`''`而不是`NULL`，请将空字符串替换为：

```
(Start1 <> '' AND End1 = '') 
```

请注意，如果列是唯一键或主键，`DISTINCT`则不需要。`Company`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:26:26.637

```
SELECT t.Company FROM Table1
WHERE t.start1 IS NOT NULL and t.end1 IS NULL or
      t.start2 IS NOT NULL and t.end2 IS NULL or
      t.start3 IS NOT NULL and t.end3 IS NULL 
```

如果以上方法不能解决您的问题，请提供更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:29:20.133

```
SELECT Company FROM yourtable
  WHERE Start1 IS NOT NULL AND End1 IS NULL OR
  Start2 IS NOT NULL and End2 IS NULL OR
  Start3 IS NOT NULL and End3 IS NULL 
```

# database-design - 在数据库中生成发票图像后我应该保留吗？

> ID：15208235
> 
> 赞同：0
> 
> 时间：2013-03-04T18:17:07.960
> 
> 标签：database-design

在任何情况下，我应该将生成的文本发票作为“图像”保存在数据库中吗？

是否有任何法律问题或其他我应该将其保持在不接触状态的地方？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:29:02.947

我们在 LedgerSMB 中进行。它提供了客户收到内容的权威记录。在某些情况下，您可能希望能够查看实际文档并将其与您的记录进行比较以进行审计。是的，我建议这样做。

# jquery-mobile - 后退按钮上的空白页（jQuery Mobile）

> ID：15208239
> 
> 赞同：0
> 
> 时间：2013-03-04T18:17:16.137
> 
> 标签：jquery-mobile

我有以下问题： 当我使用 jQuery Mobile 后退按钮或 jQuery Mobile 的 changePage 函数返回到上一页时，它不会在页面上显示任何数据。所有javascript都被执行但页面仍然是空的..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:45:23.397

这是我在通过 javascript 从 DOM 中删除页面以防止第一页粘在 DOM 中时遇到的问题。单击后退按钮时，它只会显示一个空白页面。

您是否在 javascript 中从 DOM 中删除以前的页面？

当您说页面“仍然为空”时，它只是内容标签中的数据，还是页面上根本没有出现任何内容（包括 jquery 移动增强标记）？

您应该在此处发布您的 changePage 功能，以便我和其他人可以帮助您。

# python - 为文件系统上的每个文件创建一个哈希

> ID：15208242
> 
> 赞同：3
> 
> 时间：2013-03-04T18:17:24.027
> 
> 标签：python, hash

我正在尝试编写一个程序，该程序将创建文件系统 Window/Linux/Unix 上每个文件的哈希值。然后脚本将检查它是否与已知的错误哈希值文件进行比较。如果文件系统中的哈希与文件中的某些内容匹配，则打印出匹配。关于这件事有什么想法吗？

我是 python 新手，对最有效的方法感到好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:23:09.623

要遍历文件系统中的文件，请使用[`os.walk`](http://docs.python.org/2/library/os.html#os.walk). 对于每个文件，您可以使用内置库创建一个哈希[`hashlib`](http://docs.python.org/2/library/hashlib.html)。

最小的工作示例：

```
import os, hashlib

current_dir = os.getcwd()
for root,dirs,files in os.walk(current_dir):
    for f in files:
        current_file = os.path.join(root,f)
        H = hashlib.md5()

        with open(current_file) as FIN:
            H.update(FIN.read())

        print current_file, H.hexdigest() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T01:02:13.637

我编写了一个模块，该模块能够散列目录及其子目录中的文件。输出是一个 json 格式的树视图。

```
pip3 install py_essentials 
```

像这样使用模块：

```
from py_essentials import hashing as hs
hashtree = hs.createHashtree("path/to/the/directory/", 'sha1') 
```

有关此功能的更多信息，请阅读[文档](https://github.com/phyyyl/py_essentials/wiki/hashing)。

这是一个示例，输出看起来如何使用`json.loads()`and打印`json.dumps()`。

```
{
    "LICENSE": "1e69fdee9a5b6a177b20178014ffd56e0f64c417",
    ".gitignore": "182ba25cd720d7a2be1314927f9fa72604a9fda7",
    "MANIFEST": "b7efe1149685a1e858b4a83242a5eefbe263e00e",
    "README.md": "63b6fda48fd270e620a3defa9f960a1081d15132",
    "setup.py": "81b0b4bcb7e9076986b7135c01dd1969aedfb256",
    "setup.cfg": "7bc6f4c388d1e0409aee1f79c557b6ce3a3e9511",
    "examples": {
        "advancedList-example1.py": "615082e89704bce44b2b8a78b2738c590efcbf83"
    },
    "py_essentials": {
        "fileHandler.py": "03611c13ab37a15d8d04e79711475114fe818a08",
        "hashing.py": "5a7c77ecfa670309fb685a50ba75b1c9b2fbf161",
        "checkup.py": "95743567715213d57f0e5e6cfbb42521c5a2b661",
        "xcptns.py": "e053b7e4923ba270a7971624802efb32fd480ebb",
        "simpleRandom.py": "a1ded44a7f707c2b0530e18a4f144665e9ad759a",
        "__pycache__": {
            "exceptions.cpython-36.pyc": "ec8c20db40523c09ee51616c4e1b250bb2a0825b",
            "advancedList.cpython-36.pyc": "eeed573a2ec8187315f414e61cd5e6e083a5151d",
            "hashing.cpython-36.pyc": "ea966ec926ed9516df7d332e45a6a411f88a3b7d",
            "prettyPrinting.cpython-36.pyc": "c623260362e08ebfebf229681c357923eee85289",
            "xcptns.cpython-36.pyc": "a2538519fd5fd37f67b73272a7077b93861589ca",
            "__init__.cpython-36.pyc": "e25ee2a75c14026a2dc20170b1b3f8fe3f77069e",
            "simpleRandom.cpython-36.pyc": "1968cf15b29472c855679c71dd5b862d5bec1d26",
            "checkup.cpython-36.pyc": "982fb978040d168e888f6a389a259cc06d32d815",
            "fileHandler.cpython-36.pyc": "0995fea9dfeae4740a77284a8eae19d9231c083f"
        },
        "advancedList.py": "41e9275662562da582326757cf3c9eb7bcc031dd",
        "prettyPrinting.py": "b5244c76e5c33203b2d843705e62d1552b241db0",
        "__init__.py": "5736a4b7e59efc4191665edb471a9282d2fd642e",
        "test.py": "088d1b9786d5f4a3bf02f207a95b3b173cb636e2"
    },
    "dist": {
        "py_essentials-1.4.11.tar.gz": "a8a7f93f1fe3aa263369e6b26fbafae6ed7dbd37",
        "py_essentials-1.4.7.tar.gz": "8c4788c388d64bae1c740a21b200a9d95cf014d6",
        "py_essentials-1.4.10.tar.gz": "e632e6093a1ceb602726e3c0848692b0d4205dd9",
        "py_essentials-1.4.5.tar.gz": "a576e66b2f41a629d55ad585993b819bf3960d40",
        "py_essentials-1.4.9.tar.gz": "bc6786fbeb5be254e5c05215779a3c37a427f398",
        "py_essentials-1.4.6.tar.gz": "08f8dffdb57e7ee4aa99b0494f2b5ae529aae85a",
        "py_essentials-1.4.8.tar.gz": "16c4fff88823c7900d3bb7ecfb489916315ca492"
    }
} 
```

在此之后，您可以反复浏览此树视图并将哈希值与错误哈希值列表进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:29:44.307

首先制作一组要检测的散列：

```
badHash_set = set(['1234', 'abcd']) 
```

然后在要检查的目录树的根目录上使用 os.walk：

[http://docs.python.org/2/library/os.html#os.walk](http://docs.python.org/2/library/os.html#os.walk)

```
for root, dirs, files in os.walk(base_path):
    for file_str in files:
        file_obj = file(os.path.join(root, file_str))
        file_md5 = hashlib.md5(file_obj.read()).hexdigest()

        if file_md5 in badHash_set:
            # ...complain 
```

然而，这可能会非常缓慢。目前尚不清楚这是否会成为问题。

# c# - 使用c#将文本框中的字符串值转换为int

> ID：15208243
> 
> 赞同：-3
> 
> 时间：2013-03-04T18:17:26.893
> 
> 标签：c#, asp.net

我有文本框，用户可以输入“是”或“否”，一旦他们做出选择，我就会写到一张桌子上。但是在我将值写入表之前，我想更改它，因为该字段只需要 1 或 0。我想在后面的代码中进行更改，如下所示：如果是 YES，则将其更改为 1，如果不是，则将其更改为 0 更改后，我将获取新变量并将其插入我的表中。这是我的代码：

```
string myvalue = ((TextBox)DV_Port.FindControl("txtmyvalue")).Text.ToString();

 sqlcmd.CommandText = "INSERT INTO MyTable(myvalue) VALUES(@myvalue)";                 
                    sqlcmd.Parameters.Clear();
                    sqlcmd.Parameters.Add("@myvalue", SqlDbType.VarChar).Value = ServerName; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:26:15.363

如果您有一个仅接受 1 或 1（位）的数据库列，那么您应该使用相应的 UI 元素，例如复选框或单选按钮。

但是，如果您必须使用文本框（无论出于何种原因）并且您需要明确检查“是”和“否”而不是“是”以及除“是”以外的任何内容：

```
bool valueIsTrue = false;
string myvalue = ((TextBox)DV_Port.FindControl("txtmyvalue")).Text;
if (myValue.ToLower() == "yes")
   valueIsTrue = true;
else if (myValue.ToLower() == "no")
   valueIsTrue = false 
```

例如，如果您使用的是复选框，您可以简单地执行以下操作：

```
bool value = ((CheckBox)DV_Port.FindControl("chkMyValue")).Checked; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:26:31.530

首先，如果您可以更改代码，请使用复选框。单选按钮甚至 2 项组合框更容易接受。但是输入是/否？IMO 不是很友好。

要回答您的问题，您应该使用以下内容：

```
int myvalue = ((TextBox)DV_Port.FindControl("txtmyvalue")).Text.Equals("Yes", StringComparison.OrdinalIgnoreCase) ? 1 : 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:30:08.917

正如上面评论中所指出的，复选框最适合这种输入。要求用户输入“是”或“否”都很好，但如果用户输入“也许”，你如何处理呢？此外，您必须考虑到“YES”（大写）与“yes”（小写）等不一样。

如果您绝对别无选择，只能使用文本框，那么以下内容应该这样做，但对于您的更大问题来说，这是一个不好的解决方案。

```
string myvalue = ((TextBox)DV_Port.FindControl("txtmyvalue")).Text;

if (myvalue.Equals("YES", StringComparison.OrdinalIgnoreCase))
{
    //Change to 1
}
else if (myvalue.Equals("NO", StringComparison.OrdinalIgnoreCase))
{
    //Change to 0
}
else
{
    //You should probably tell the user that their input is in an incorrect
    //format here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:26:01.773

要将是/否转换为布尔值，您可以使用这一行：

```
bool result = (myString == "yes") ? true : false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T18:28:02.410

就像是

```
string myvalue = ((TextBox)DV_Port.FindControl("txtmyvalue")).Text;
sqlcmd.CommandText = "INSERT INTO MyTable(myvalue) VALUES(@myvalue)";                 
                    sqlcmd.Parameters.Add("@myvalue", SqlDbType.Bit, myValue == "Yes"); 
```

注意弯曲的红线，Visual Studio 团队为您付出了很多努力。

# jquery - 为什么当它有一个 jQuery 参数时这个更新不起作用

> ID：15208246
> 
> 赞同：0
> 
> 时间：2013-03-04T18:17:32.530
> 
> 标签：jquery, html, text, countdown

我的 javascript 标头中有以下内容：

```
$(document).ready(function(){
    $("#renew").click(function() {
        // Here we want to do an asynchronous ajax update of the time on the queue entry
        alert('reset to '+$('#time-div').text());
        $("#remainingTime").countdown('option',{until: $('#time-div').text(), format: "mS", expiryText: "Entry Released"});
    });
    $("#remainingTime").countdown({until: $('#time-div').text(), format: "mS", expiryText: "Entry Released"});
}); 
```

我有一个 id 为 'time-div' 的 div

```
<div id='time-div'>+120s</div> 
```

我正在使用 来进行倒计时。

如果我将 until: '+30s' 放在直到：$('#time-div').text() 的位置，那么我的 div 'remaining-time' 会显示倒计时。

当我有 $('#time-div').text() 时，它总是显示为零！现在，您在 click 函数中看到的警报会正确显示带有“+120s”的警报，表明 div 确实具有该值。

这里有什么问题？如何在 until: 参数中使用来自 div 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:27:16.797

在这里使用`data`属性可能会更好，尽管我不确定为什么文本不起作用。

尝试这个：

```
<div id='time-div' data-time_div="+120s">+120s</div>

$(document).ready(function(){
    $("#renew").click(function() {
        var time = $('#time-div').data('time_div');
        // Here we want to do an asynchronous ajax update of the time on the queue entry
        alert('reset to '+ time);
        $("#remainingTime").countdown('option',{until: time, format: "mS", expiryText: "Entry Released"});
    });
    $("#remainingTime").countdown({until: $('#time-div').data('time_div'), format: "mS", expiryText: "Entry Released"});
}); 
```

# java - 在android项目中实现数据库时遇到问题

> ID：15208249
> 
> 赞同：0
> 
> 时间：2013-03-04T18:17:44.327
> 
> 标签：java, android, database, sqlite

我一直在关注[本](http://www.devx.com/wireless/Article/40842)指南以在 android 项目中实现数据库。

这是我的 DBAdapter 类的代码：

```
package com.sab.namespace;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_PROPERTYID = "propertyid";
    public static final String KEY_ADDRESS = "propertyaddress";
    public static final String KEY_JOBNO = "jobnumber";  
    public static final String KEY_ASSIGNED = "assignedto";
    public static final String KEY_COMPANY = "company";
    public static final String KEY_DATE = "datecreated";
    public static final String KEY_MASTERKEY = "usemasterkey"; 
    public static final String KEY_PHONEBEFORE = "phonebefore";
    public static final String KEY_PROBLEM = "descriptionofproblem";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "SABDatabase";
    private static final String DATABASE_TABLE = "jobs";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table jobs (_id integer primary key autoincrement, "
        + "propertyid text not null, propertyaddress text not null, "
        + "jobnumber text not null, assignedto text not null, "
        + "company text not null, datecreated text not null, "
        + "usemasterkey text not null, phonebefore text not null, "
        + "descriptionofproblem text not null);";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
                              int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                  + " to "
                  + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS jobs");
            onCreate(db);
        }
    } 

  //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a job into the database---
    public long insertJob(String propertyid, String propertyaddress, String jobnumber,
            String assignedto, String company, String datecreated, String usemasterkey,
            String phonebefore, String descriptionofproblem) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_PROPERTYID, propertyid);
        initialValues.put(KEY_ADDRESS, propertyaddress);
        initialValues.put(KEY_JOBNO, jobnumber);
        initialValues.put(KEY_ASSIGNED, assignedto);
        initialValues.put(KEY_COMPANY, company);
        initialValues.put(KEY_DATE, datecreated);
        initialValues.put(KEY_MASTERKEY, usemasterkey);
        initialValues.put(KEY_PHONEBEFORE, phonebefore);
        initialValues.put(KEY_PROBLEM, descriptionofproblem);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular job---
    public boolean deleteJob(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    //---retrieves all the jobs---
    public Cursor getAllJobs() 
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_PROPERTYID,
                KEY_ADDRESS,
                KEY_JOBNO,
                KEY_ASSIGNED,
                KEY_COMPANY,
                KEY_DATE,
                KEY_MASTERKEY,
                KEY_PHONEBEFORE,
                KEY_PROBLEM}, 
                null, 
                null, 
                null, 
                null, 
                null);
    }

    //---retrieves a particular job---
    public Cursor getJob(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID, 
                        KEY_PROPERTYID,
                        KEY_ADDRESS,
                        KEY_JOBNO,
                        KEY_ASSIGNED,
                        KEY_COMPANY,
                        KEY_DATE,
                        KEY_MASTERKEY,
                        KEY_PHONEBEFORE,
                        KEY_PROBLEM}, 
                        KEY_ROWID + "=" + rowId, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a job---
    public boolean updateJob(long rowId, String propertyid, String propertyaddress, String jobnumber,
            String assignedto, String company, String datecreated, String usemasterkey,
            String phonebefore, String descriptionofproblem)
    {
        ContentValues args = new ContentValues();
        args.put(KEY_PROPERTYID, propertyid);
        args.put(KEY_ADDRESS, propertyaddress);
        args.put(KEY_JOBNO, jobnumber);
        args.put(KEY_ASSIGNED, assignedto);
        args.put(KEY_COMPANY, company);
        args.put(KEY_DATE, datecreated);
        args.put(KEY_MASTERKEY, usemasterkey);
        args.put(KEY_PHONEBEFORE, phonebefore);
        args.put(KEY_PROBLEM, descriptionofproblem);
        return db.update(DATABASE_TABLE, args, 
                         KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

然后我尝试在我的 ViewJobs.java 类中使用数据库

```
DBAdapter db = new DBAdapter(this);
        db.open();        
        long id;
        id = db.insertJob(
                "PROP121",
                "MARK ANDREWS DRIVE",
                "JOB32",
                "COLIN",
                "SAB",
                "12/4/13",
                "yes",
                "yes",
                "SHIT IS EVERYWHERE");
        id = db.insertJob(
                "PROP122",
                "FAULTY CLOSE",
                "JOB33",
                "DAVE",
                "SAB",
                "13/4/13",
                "yes",
                "yes",
                "FIX PLEASE");
        db.close();
        Toast.makeText(this, Long.toString(id), Toast.LENGTH_LONG).show(); 
```

Toast 输出 -1 告诉我输入数据时出错，但我找不到出错的地方。

如果我只是忽略错误并继续使用以下代码，那么我的应用程序将崩溃。

```
db.open();
        Cursor c = db.getAllJobs();
        db.close(); 
```

如果有人能提供任何建议，我将不胜感激！

-哈利

这是崩溃时的 logcat 代码：

```
03-04 18:37:59.760: W/dalvikvm(2078): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
03-04 18:37:59.809: I/dalvikvm(2078): threadid=3: reacting to signal 3
03-04 18:37:59.958: E/AndroidRuntime(2078): FATAL EXCEPTION: main
03-04 18:37:59.958: E/AndroidRuntime(2078): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sab.namespace/com.sab.namespace.ViewJobs}: android.database.sqlite.SQLiteException: no such table: jobs: , while compiling: SELECT _id, propertyid, propertyaddress, jobnumber, assignedto, company, datecreated, usemasterkey, phonebefore, descriptionofproblem FROM jobs
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.os.Looper.loop(Looper.java:137)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.ActivityThread.main(ActivityThread.java:4424)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at java.lang.reflect.Method.invokeNative(Native Method)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at java.lang.reflect.Method.invoke(Method.java:511)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at dalvik.system.NativeStart.main(Native Method)
03-04 18:37:59.958: E/AndroidRuntime(2078): Caused by: android.database.sqlite.SQLiteException: no such table: jobs: , while compiling: SELECT _id, propertyid, propertyaddress, jobnumber, assignedto, company, datecreated, usemasterkey, phonebefore, descriptionofproblem FROM jobs
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at com.sab.namespace.DBAdapter.getAllJobs(DBAdapter.java:114)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at com.sab.namespace.ViewJobs.onCreate(ViewJobs.java:52)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.Activity.performCreate(Activity.java:4465)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-04 18:37:59.958: E/AndroidRuntime(2078):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-04 18:37:59.958: E/AndroidRuntime(2078):     ... 11 more
03-04 18:37:59.969: I/dalvikvm(2078): Wrote stack traces to '/data/anr/traces.txt'
03-04 18:38:00.328: I/dalvikvm(2078): threadid=3: reacting to signal 3
03-04 18:38:00.358: I/dalvikvm(2078): Wrote stack traces to '/data/anr/traces.txt'
03-04 18:38:00.658: I/dalvikvm(2078): threadid=3: reacting to signal 3
03-04 18:38:00.799: I/dalvikvm(2078): Wrote stack traces to '/data/anr/traces.txt'
03-04 18:38:03.210: I/Process(2078): Sending signal. PID: 2078 SIG: 9 
```

这是 ViewJobs.java 的完整代码

```
package com.sab.namespace;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class ViewJobs extends Activity {

    String titles[] = {"hello","bannana","frogshehe","hello","bannana","frogshehe","hello","bannana","frogshehe","hello","bannana","frogshehe","hello","bannana","frogshehe"};
    ListView vListView;
    ArrayAdapter<String> lVAAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view);

        //database stuff
        DBAdapter db = new DBAdapter(this);
        db.open();        
        long id;
        id = db.insertJob(
                "PROP121",
                "MARK ANDREWS DRIVE",
                "JOB32",
                "COLIN",
                "SAB",
                "12/4/13",
                "yes",
                "yes",
                "SHIT IS EVERYWHERE");
        id = db.insertJob(
                "PROP122",
                "FAULTY CLOSE",
                "JOB33",
                "DAVE",
                "SAB",
                "13/4/13",
                "yes",
                "yes",
                "FIX PLEASE");
        db.close();
        Toast.makeText(this, Long.toString(id), Toast.LENGTH_LONG).show();

        db.open();
        Cursor c = db.getAllJobs();
        db.close();
        /*
        if (c.moveToFirst())
        {
            do {          
                DisplayJob(c);
            } while (c.moveToNext());
        }
        db.close();
        */

      //create list
        vListView = (ListView) findViewById(R.id.vlistview);
        lVAAdapter = new ArrayAdapter<String>(ViewJobs.this,
                android.R.layout.simple_list_item_1, titles);

        //create listener
        vListView.setAdapter(lVAAdapter);
        vListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> lVAAdapter, View myView,
                    int myItemInt, long mylng) {
                    String selectedFromList = (String) (vListView.getItemAtPosition(myItemInt));
                    if (titles[myItemInt] == "hello") {
                        titles[2] = "test";
                        vListView.invalidateViews();
                    }
            }
        });
    }

    public void DisplayJob(Cursor c)
    {
        Toast.makeText(this, 
                "id: " + c.getString(0) + "\n" +
                "propertyid: " + c.getString(1) + "\n" +
                "propertyaddress: " + c.getString(2) + "\n" +
                "jobnumber: " + c.getString(3) + "\n" +
                "assignedto: " + c.getString(4) + "\n" +
                "company: " + c.getString(5) + "\n" +
                "datecreated: " + c.getString(6) + "\n" +
                "usemasterkey: " + c.getString(7) + "\n" +
                "phonebefore: " + c.getString(8) + "\n" +
                "descriptionofproblem:  " + c.getString(9),
                Toast.LENGTH_LONG).show();        
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:56:29.257

您可能在创建数据库后添加了作业表。onCreate 不会被调用。因此，您需要清除数据，以便再次调用 onCreate。

# c# - 为什么我的 FileStream 路径被更改为包含我的代码路径？

> ID：15208251
> 
> 赞同：0
> 
> 时间：2013-03-04T18:17:51.877
> 
> 标签：c#, .net-4.0, filestream

好的，所以我使用以下代码：

```
FileStream FS;
StreamWriter SW;
FS = new FileStream(path: newFileName, mode: FileMode.Append);
SW = new StreamWriter(FS);
SW.WriteLine(message);
SW.Close();
SW.Dispose();
FS.Close();
FS.Dispose(); 
```

并且在运行文件时，代码的路径包含在 newFileName 中。为什么？这是vs中的设置吗？我错过了什么？它曾经工作过。

要明确发生这种情况的路线是：

```
FS = new FileStream(path: newFileName, mode: FileMode.Append); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:24:32.837

你`newFileName`的是一个相对路径。检查项目设置中的工作目录。问题是代码是如何设置的`newFileName`。

# powershell - 在 Powershell 中不使用 AD 工具更改工作站 OU

> ID：15208252
> 
> 赞同：0
> 
> 时间：2013-03-04T18:18:00.873
> 
> 标签：powershell

现在我有一个按钮工具，它基本上是一个调用 DSMOVE 命令的精美 GUI。

是否可以在没有实际安装用于 powershell 的 AD 工具的情况下将工作站帐户更改为另一个 OU（本机在 powershell 中）？我确实有能够看到我所在的 OU 的语法，但我找不到改变它的方法。我想删除 DSMOVE 可执行文件。

下一个问题是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:05:27.220

没有任何工具（或错误检查，或任何类似的东西）：

```
$User = [adsi]'LDAP://CN=BielawB,CN=Users,DC=monad,DC=ps1'
$User.MoveTo('LDAP://OU=Destination,DC=monad,DC=ps1') 
```

显然，将它包装在某个函数中并添加一些检查/错误处理是明智的。我使用了用户对象，但这对于任何其他 AD 对象都没有什么不同......

# vim - 如何使 'str +x' 'str+f' 命令相对

> ID：15208255
> 
> 赞同：1
> 
> 时间：2013-03-04T18:18:11.063
> 
> 标签：vim, filepath, relative-path

如何更改 'str +x' 'str+f' 命令的起始位置。

我的意思是我的缓冲区位于 home/website/index.htm 中。但是当我使用命令时，他从家里开始，但我希望他从我的文件位置开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:26:11.807

实际上，`ctrl-x` `ctrl-f`查找 vim 会话所在文件夹中的文件名。

用于`:pwd`检查您所在的位置。

要切换到当前文件所在的文件夹，请`:cd %:p:h`在正常模式下键入。

# algorithm - 查找总和为 0 mod n 的数组

> ID：15208261
> 
> 赞同：2
> 
> 时间：2013-03-04T18:18:28.037
> 
> 标签：algorithm

有长度为 m 的数组，其中所有条目都是正 (>= 0) 整数。我希望条目的总和为 0 mod n。

我想要一个所有此类数组的列表，其中条目的平方和小于 k。

我该怎么做呢？我想不出找到所有这样的数组的方法，只是其中的一些。

我可以展示我用 python 编写的内容，但是我的方法有缺陷，我需要从头开始，所以除非有人要求，否则我不会展示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:57:58.153

我现在只能想到一个非常暴力的解决方案。让我举一个实数的例子。让 m = 4，n = 5 和 k = 25。因此，您将拥有的是遍历所有数组并针对每个位置，测试从 1 到给定范围*u*的所有数字。对于这个*u*的计算，我想到了这个。在这种最坏的情况下，你会得到类似的东西：

[1 1 1 u]

这意味着 3 + u**2 必须小于 k。因此，我使用*u*作为 int(sqrt(k - (m-1)))。

```
from math import sqrt

array = [1, 2, 3, 4]
comb = [0 for i in range(m)]
u = int(sqrt(k-m+1))

all_combs(comb, 0, 0, 0)

def all_combs(comb, pos, sum, square_sum):
    global n, m, u, k

    if (square_sum > k):
        # Invalid case
        return
    if (pos == m):
        if (sum % n == 0):
            print comb
        return

    for i in range(1,u+1):
        comb[pos] = i
        all_combs(comb, pos + 1, sum + i, sum_square + i**2) 
```

清楚吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:20:11.127

以下是三个可以帮助您的观察结果：

1.  数组上的约束与数组元素的顺序无关。因此假设`a_0 <= a_1 <= ... <= a_m-1`。

2.  一个`[a_0,...,a_m-1]`非负整数数组有总和`0 mod n`当且仅当`-a_m-1 = a0 + ... + a_m-2 mod n`。因此，第一个`m-1`条目是免费的，但最后一个条目是固定的。

3.  该条件`a_0^2 + ... + a_m-1^2 < k`限制了条目的大小。因此循环是有限的。

解决方案可能是这样的：

```
array := [0,...,0];
sqsum := sum_{j=0..m-1} array[j]^2;
for i := m-2...1 do {
  array[i]++;
  for j from i+1 to m-2 do
    array[j] := array[i];
  L := sum_{j=0..m-2} array[j] mod n;
  array[m-1] := n-L;
  sqsum := sum_{j=0..m-1} array[j]^2;
  while sqsum < k do {
    print(array);
    sqsum := sqsum + 2*array[m-1]n+n^2;
    array[m-1] := array[m-1]+n;
  }
} 
```

# ms-access - Microsoft Access 2010 VB 脚本和查询

> ID：15208267
> 
> 赞同：0
> 
> 时间：2013-03-04T18:18:46.660
> 
> 标签：ms-access, vbscript, vba

我在 MS Access 中做一个报告，我想使用 VB Script 来过滤我的一些数据，但我以前从未使用过它。我有一个表（查询），我想返回在线下所有订单的客户。我尝试了不同的组合，我在其中设置 ID 是否相同，只为所有在线下订单的客户添加价格。我失败得很惨。任何帮助将不胜感激。我在 JSFiddle 中创建了表的副本。例如，完成后，报告将仅包含以下客户：John Smith、Irene François、William Gedeon 和 Joshua Gonzalez，因为他们是 3 月份所有在线订单的客户。请参阅下面的链接以更好地了解数据。非常感谢。

```
<table  border="1">
    <tr>
        <th width="120">Month/Year</th>
        <th width="120">Customer ID</th>
        <th width="120">Last Name</th>
        <th width="120">First Name</th>
        <th width="120">In/Out of State</th>
        <th width="120">Customer Type</th>
        <th width="120">Product Name</th>
        <th width="120">Source of Order</th>
        <th width="120">Price</th>
        <th width="120">Monthly Total</th>
    </tr>
      <tr>
        <td>March/2013</td>  
        <td>000357321</td>
        <td>John</td>
        <td>Smith</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Natural Olive Oil</td>
        <td>Online</td>
        <td>$3</td>
        <td>$7</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>000357321</td>
        <td>John</td>
        <td>Smith</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Cream of Coconut</td>
        <td>Online</td>
        <td>$4</td>
        <td>$7</td>
    </tr>
          <tr>
        <td>March/2013</td>   
        <td>000568354</td>
        <td>Purkiss</td>
        <td>Andre</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>Pink Candy</td>
        <td>In-Store</td>
        <td>$7</td>
        <td>$17</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>000568354</td>
        <td>Purkiss</td>
        <td>Andre</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>Organic Pasta</td>
        <td>Online</td>
        <td>$4</td>
        <td>$17</td>
    </tr>
          <tr>
        <td>March/2013</td>   
        <td>000568354</td>
        <td>Purkiss</td>
        <td>Andre</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>Challah Bread</td>
        <td>Phone Order</td>
        <td>$6</td>
        <td>$17</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>025999248</td>
        <td>François</td>
        <td>Irene</td>
        <td>Resident</td>
        <td>Regular</td>
        <td>Bottle Opener</td>
        <td>Online</td>
        <td>$8</td>
        <td>$21</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>025999248</td>
        <td>François</td>
        <td>Irene</td>
        <td>Resident</td>
        <td>Regular</td>
        <td>Key Chain</td>
        <td>Online</td>
        <td>$4</td>
        <td>$21</td>
    </tr>
          <tr>
        <td>March/2013</td>   
        <td>025999248</td>
        <td>François</td>
        <td>Irenee</td>
        <td>Resident</td>
        <td>Regular</td>
        <td>Printing Paper</td>
        <td>Online</td>
        <td>$5</td>
        <td>$21</td>
    </tr>
          <tr>
        <td>March/2013</td> 
        <td>025999248</td>
        <td>François</td>
        <td>Irene</td>
        <td>Resident</td>
        <td>Regular</td>
        <td>Cho. Chip Cookies</td>
        <td>Online</td>
        <td>$4</td>
        <td>$21</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>091357456</td>
        <td>Abramovitch</td>
        <td>Tayron</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Banana</td>
        <td>Phone Order</td>
        <td>$3</td>
        <td>$10</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>091357456</td>
        <td>Abramovitch</td>
        <td>Tayron</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Fried Onions</td>
        <td>Online</td>
        <td>$7</td>
        <td>$10</td>
    </tr>
          <tr>
        <td>March/2013</td>   
        <td>022864295</td>
        <td>Hatchner</td>
        <td>Emily</td>
        <td>Non-Resident</td>
        <td>VIP</td>
        <td>Vodka Sauce</td>
        <td>In-Store</td>
        <td>$5</td>
        <td>$34</td>
    </tr>
          <tr>
        <td>March/2013</td>   
        <td>022864295</td>
        <td>Hatchner</td>
        <td>Emily</td>
        <td>Non-Resident</td>
        <td>VIP</td>
        <td>Old Cheese</td>
        <td>Online</td>
        <td>$8</td>
        <td>$34</td>
    </tr>
          <tr>
        <td>March/2013</td>   
        <td>022864295</td>
        <td>Hatchner</td>
        <td>Emily</td>
        <td>Non-Resident</td>
        <td>VIP</td>
        <td>Tomatoes</td>
        <td>Phone Order</td>
        <td>$4</td>
        <td>$34</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>022864295</td>
        <td>Hatchner</td>
        <td>Emily</td>
        <td>Non-Resident</td>
        <td>VIP</td>
        <td>Frying Pan</td>
        <td>Online</td>
        <td>$17</td>
        <td>$34</td>
    </tr>
          <tr>
        <td>March/2013</td>  
        <td>092456753</td>
        <td>Gedeon</td>
        <td>William</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>USB Drive</td>
        <td>Online</td>
        <td>$2</td>
        <td>$13</td>
    </tr>
          <tr>
              <td>March/2013</td>  
        <td>092456753</td>
        <td>Gedeon</td>
        <td>Williame</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>Cordless Keyboard</td>
        <td>Online</td>
        <td>$4</td>
        <td>$13</td>
    </tr>
          <tr>
              <td>March/2013</td> 
        <td>092456753</td>
        <td>Gedeon</td>
        <td>William</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>MacBook Charger</td>
        <td>Online</td>
        <td>$7</td>
        <td>$13</td>
    </tr>
        <tr>
        <td>March/2013</td> 
        <td>000320680</td>
        <td>Baltar</td>
        <td>D'Anna</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>Pineapple</td>
        <td>In-Store</td>
        <td>$3</td>
        <td>$5</td>
    </tr>
     <tr>
         <td>March/2013</td> 
        <td>000320680</td>
        <td>Baltar</td>
        <td>D'Anna</td>
        <td>Non-Resident</td>
        <td>Regular</td>
        <td>Fresh Fish</td>
        <td>Online</td>
        <td>$2</td>
        <td>$5</td>
    </tr>
          <tr>
              <td>March/2013</td> 
        <td>04400250</td>
        <td>Gonzalez</td>
        <td>Joshua</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>NotePad</td>
        <td>Online</td>
        <td>$5</td>
        <td>$19</td>
    </tr>
          <tr>
              <td>March/2013</td> 
        <td>04400250</td>
        <td>Gonzalez</td>
        <td>Joshua</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Plastic Binder</td>
        <td>Online</td>
        <td>$4</td>
        <td>$19</td>
    </tr>
          <tr>
              <td>March/2013</td> 
        <td>04400250</td>
        <td>Gonzalez</td>
        <td>Joshua</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Box of Pencils</td>
        <td>Online</td>
        <td>$4</td>
        <td>$19</td>
    </tr>
          <tr>
              <td>March/2013</td> 
        <td>04400250</td>
        <td>Gonzalez</td>
        <td>Joshua</td>
        <td>Resident</td>
        <td>VIP</td>
        <td>Au. Picture Frame</td>
        <td>Online</td>
        <td>$6</td>
        <td>$19</td>
    </tr>

</table> 
```

JSFiddle 链接：“ [http://jsfiddle.net/xqmDE/29/](http://jsfiddle.net/xqmDE/29/) ”

最好的，

ZDM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:57:56.823

您不需要 VB 脚本来执行此操作（尽管您可以根据需要使用它 - 见下文）。

*注意：我假设表名称为“Orders”，字段为“CustomerID”和“SourceOfOrder”。*

在报告的“过滤器”属性中应用以下内容，并确保“加载时过滤器”和“允许过滤器”属性都设置为“是”

```
CustomerID IN (
    (SELECT CustomerID FROM
        (SELECT CustomerID, SourceOfOrder
             FROM Orders
             GROUP BY CustomerID, SourceOfOrder
         ) orders_grouped
        GROUP BY CustomerID
        HAVING Count(SourceOfOrder) = 1)
) AND SourceOfOrder = 'Online' 
```

如果您想在 VBA 中执行此操作，请输入以下内容：

```
Private Sub Report_Load()
    Reports!Orders.Filter = "CustomerID IN ((SELECT CustomerID FROM (SELECT CustomerID, SourceOfOrder FROM Orders GROUP BY CustomerID, SourceOfOrder) orders_grouped GROUP BY CustomerID HAVING Count(SourceOfOrder) = 1)) AND SourceOfOrder = 'Online'"
    Reports!Orders.FilterOn = True
End Sub 
```

# magento - 如果总计小于美元金额，Magento 隐藏 Div ID

> ID：15208271
> 
> 赞同：0
> 
> 时间：2013-03-04T18:19:01.250
> 
> 标签：magento, html, hide, checkout

我正在尝试根据购物车总数隐藏或显示 div。例如，如果购物车总计少于 79 美元，我想隐藏 div。我尝试过使用条件语句，但效果不太好。我尝试在 onepage.phtml、review.phtml（放置 div 的位置）和包含我想隐藏的 div 的实际文件中使用以下代码。

```
<?php
$totals = Mage::getSingleton('checkout/session')->getQuote()->getTotals(); 
$subtotal = round($totals["subtotal"]->getValue()); 
$grandtotal = round($totals["grand_total"]->getValue()); 
if ($grandtotal <= '79'){ ?>
     <script type="text/javascript">$('#gifterWrap').hide()</script>
   <?php
    }
?> 
```

任何见解将不胜感激。

编辑：在尝试了下面的一些修复后，我认为错误可能出现在代码的第一部分，在那里我得到了总计小计等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:27:08.140

也许：

```
 <script language="javascript">
     grandTotal=<?php echo round($totals["grand_total"]->getValue());?>;
     alert(grandTotal); // to check if it's the right value.
     if (grandTotal<=79){
         $('#gifterWrap').css('display', 'none');
     }
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:41:28.197

尝试将 '79' (string) 更改为 79 (int)

```
<?php if(79 >= Mage::getModel('checkout/cart')->getQuote()->getGrandTotal()): ?>
     <script type="text/javascript">$('#gifterWrap').hide()</script>
<?php endif; ?> 
```

看

*   [http://amjath.com/2012/06/get-subtotal-and-grand-total-in-magento.html](http://amjath.com/2012/06/get-subtotal-and-grand-total-in-magento.html)
*   [http://www.magazento.com/english/blog/cartinfomagento](http://www.magazento.com/english/blog/cartinfomagento)

# ios - 如何从 GLuint 中检索相应的纹理名称？

> ID：15208275
> 
> 赞同：0
> 
> 时间：2013-03-04T18:19:21.827
> 
> 标签：ios, cocos2d-iphone, frame, sprite, ccspritebatchnode

编辑 5：优化级别构建设置：

![构建设置](../Images/d6915177c45aedbdf1ab45ddca1a3fe8.png)

编辑 4：我试图将构建配置全部更改为“调试”，然后运行“测试”。奇怪的是，它并没有崩溃大约 20 次（我一直在加载和卸载具有不同资产的各种 GameScenes）。在第 21 次（即使在统计上不相关），我正要考虑它可能不再崩溃但它崩溃了。摘要仍然不可用，所以我想知道我做得对还是有其他问题。这是构建配置和崩溃报告：

![配置](../Images/f8a8d0978411826064fe8628723199a1.png)

![仍然会发生什么](../Images/d1244440889f908a91e881291e67f642.png)

**编辑 3：重要的是，这个错误只发生几次，比如 6/7 中的 1 次运行，所以我发现很难隔离它。**

我在理解哪个纹理让这个 NSAssert 失败时遇到了一些严重的问题。我尝试[了几种方法](https://stackoverflow.com/questions/14979451/cocos2d-and-spritebatchnode-cannot-identify-which-sprite-frame-is-causing-an-as/14980849#comment21131891_14980849)，但都没有奏效（或者很可能只是我有点太愚蠢了:)）。

在调试器中，我可以看到 GLuint 信息。在互联网上阅读我发现这是一种引用框架（一种指针）的方法。

我认为应该有一种方法可以从 batchNode plist 文件中检索框架名称，并且想知道这个 GLuint 编号是否可以以某种方式对应于 plist 文件中框架的顺序。

```
NSAssert( !batchNode_ || texture.name == batchNode_.texture.name , @"CCSprite: Batched sprites should use the same texture as the batchnode");

/** texture name */
@property(nonatomic,readonly) GLuint name; 
```

我尝试了这些方法，但它们捕获了所有情况：

```
//From CCSprite.m
-(void) setTexture:(CCTexture2D*)texture
{

    if(!batchNode_ || texture.name != batchNode_.texture.name)
    {
CCLOG(@"");     // I added a debug here but it catches all cases..
        NSAssert( !batchNode_ || texture.name == batchNode_.texture.name , @"CCSprite: Batched sprites should use the same texture as the batchnode");
    } 
```

编辑：我知道这有点疯狂，但我尝试在 CCTexture2D 中初始化 fileName，因为我似乎无法正确初始化它：

```
- (id) initWithString:(NSString*)string dimensions:(CGSize)dimensions hAlignment:(CCTextAlignment)hAlignment vAlignment:(CCVerticalTextAlignment) vAlignment lineBreakMode:(CCLineBreakMode)lineBreakMode font:(UIFont*)uifont
{
    NSAssert( uifont, @"Invalid font");
    fileName=string;//TODO: Remove
    .....
} 
```

上面的一个是我能够修改的唯一 initWithString 。我无法在另一个中修改 fileName 属性：

```
#elif defined(__CC_PLATFORM_MAC)

- (id) initWithString:(NSString*)string dimensions:(CGSize)dimensions hAlignment:(CCTextAlignment)hAlignment vAlignment:(CCVerticalTextAlignment)vAlignment attributedString:(NSAttributedString*)stringWithAttributes 
```

编辑 2： 我试图将 fileName 分配为：

```
fileName = [string copy]; 
```

但它仍然给我提供了不可用的摘要，如此处报道的：

![持续存在的问题](../Images/a00341869e79225defe148b90600305c.png)

该问题似乎发生在动画更新期间的 setTexture 中，但文件名似乎最初是错误的。

这就是我在 CCTexture2D 中声明该属性的方式：

```
@property(nonatomic, copy) NSString* fileName; //TODO Remove 
```

# c# - 调用 Web 服务时最有效的 C# 任务和延续配置？

> ID：15208277
> 
> 赞同：3
> 
> 时间：2013-03-04T18:19:37.177
> 
> 标签：c#, .net, performance, task-parallel-library, threadpool

我正在创建一个与实时 Web API 对话的网络客户端。

客户端每秒必须进行许多不同的调用`Task<TResult>`并向每个客户端组件反馈，以便客户端可以决定是否阻塞：

```
public Task<TResult> Execute<TResult>(IOperation<TResult> operation); 
```

进行 API 调用的过程如下所示：

1.  将（小，小于 1KB）请求序列化到 Json
2.  使用`HttpClient`
3.  成功后，反序列化为`TResult`（Json 的大小可能为几百 KB，但通常要小得多）并返回

在我的测试中，选择在任务工作流中包含每个步骤的位置（以及因此在哪个线程上）对性能有重大影响。

到目前为止我发现的最快的设置是这样的（半伪代码，为简洁起见省略了泛型类型参数）：

```
// serialize on main thread
var requestString = JsonConvert.SerializeObject(request);
// create message - omitted
var post = Task.Factory.StartNew(() => this.client.SendAsync(requestMessage)).Unwrap();
return post.ContinueWith(response =>
            {
                var jsonString = response.Result.Content.ReadAsStringAsync();
                return JsonConvert.DeserializeObject(jsonString.Result);
            }); 
```

最慢的是这种设置，其中整个过程在单个任务中执行：

```
return Task.Factory.StartNew((request) => 
            {
                var requestString = JsonConvert.SerializeObject(request);
                // create message - omitted
                var post = client.SendAsync(requestMessage);
                var jsonString = post.Result.Content.ReadAsStringAsync();
                return JsonConvert.DeserializeObject(jsonString.Result);
            }) 
```

我原以为最后一种方法可能是最快的，因为您为每个请求创建一个后台线程。我的假设是，由于阻塞调用，这不允许 TPL 最有效地使用可用线程。

那么，是否有一个关于什么应该进入任务以及什么应该放在它之外或继续的一般规则？

在这种特定情况下，我可以尝试进一步的优化吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T18:27:47.143

您根本不需要使用`Task.Factory.StartNew`，因为已经`SendAsync`返回`Task`：

```
var post = this.client.SendAsync(requestMessage);
return post.ContinueWith(response =>
        {
            var jsonString = response.Result.Content.ReadAsStringAsync();
            return JsonConvert.DeserializeObject(jsonString.Result);
        }); 
```

这实际上会更有效，因为它根本不需要 ThreadPool 线程。

请注意，您可以使用`async`/进一步优化它`await`（以保持响应异步）：

```
var response = await this.client.SendAsync(requestMessage);
var jsonString = await response.Content.ReadAsStringAsync();
return JsonConvert.DeserializeObject(jsonString); 
```

这也可以通过 TPL 延续来编写，但这需要从 中返回（展开的）任务`ReadAsStringAsync`，然后在其上发布新的延续以获得最终字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:31:09.143

`StartNew`所以，首先，发送初始请求时没有理由使用。您已经有一个任务，在后台线程中启动任务是不必要的开销。

所以这：

```
var post = Task.Factory.StartNew(() => this.client.SendAsync(requestMessage)).Unwrap(); 
```

可以变成：

```
var post = this.client.SendAsync(requestMessage); 
```

接下来，在这两种情况下，您都在阻塞`ReadAsStringAsync`方法的结果，而不是异步处理它。这是在咀嚼另一个线程池线程，只是坐在那里无所事事。

相反，请执行以下操作：

```
return post.ContinueWith(response =>
    {
        return response.Result.Content.ReadAsStringAsync()
            .ContinueWith(t => JsonConvert.DeserializeObject(t.Result));
    }).UnWrap(); 
```

# java - 如何将自定义链表（双链表？）保存到文件中？

> ID：15208283
> 
> 赞同：-1
> 
> 时间：2013-03-04T18:19:51.823
> 
> 标签：java, load, linked-list, save

我有一个名为 CalendarLinkedList 的链表，其中的数据成员都是用户定义的，

```
GregorianCalendar date;
Monetary savings;
Monetary loss;
Memo memo;
Debt debt;
int counter;

CalendarLinkedList next;
CalendarLinkedList previous; 
```

货币对象由一个双精度数组和一个字符串数组组成

```
double value;
String[] type;

public Monetary()
{
    setValue(0);
    type = new String [50];
} 
```

备忘录仅包含字符串

```
String writing;

    public Memo()
    {
        writing = "";
    } 
```

债务是货币的延伸，具有一个双倍价值和两个公历。

无论如何我可以将它存储在文本文件中吗？如果你们告诉我如何在保存后从文本文件中加载它会更好。

我知道代码效率很低，但我想至少在没有任何帮助的情况下创建链接列表。我在这里被困了一段时间，终于来到这个地方寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:36:02.620

如果您必须使用文本文件，那么我的建议是找到某种方案来将行与属性相对应，并从该方案中，在您读取文件时重建链接列表。作为方案，看这个小例子。想象一下，您只想保存一份货币清单。您可以做的是，对于列表中的每个项目，您将在每一行中保存：

1.  变量“值”的值
2.  字符串数组的长度（比如说*n 个*字符串）
3.  *n 个*字符串

现在，在读取文件时，您将首先创建一个空的货币项目，然后您将读取文本文件的第一行以填充“值”。然后，您将读取*n*的值，它会指示您仍然需要读取多少行来填充字符串数组。您将执行此过程，直到找到 EOF。

现在，我所说的仅适用于保存 Monetary 实例的情况。对于你的链表，你会做同样的事情，但是对于更多的对象。我够清楚了吗？

# android - 无法在android中获取自定义微调器

> ID：15208285
> 
> 赞同：0
> 
> 时间：2013-03-04T18:20:01.823
> 
> 标签：android, drop-down-menu, android-actionbar, actionbarsherlock

我已按照此[链接](https://stackoverflow.com/questions/11737500/show-dropdown-programatically-in-actionbar-actionbarsherlock)了解如何实现自定义微调器。我的要求只是在单击图像时获得下拉菜单，它应该像一个下拉菜单，在其中我将内容从后端加载到列表中。

但我认为上面链接中发布的示例示例会起作用。但它没有在单击图像图标时给出任何列表。

这是完整的源代码。

```
package com.example.testdroid;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.internal.widget.IcsSpinner;
import com.actionbarsherlock.view.ActionMode;
import com.actionbarsherlock.view.ActionMode.Callback;

public class MainActivity extends SherlockActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        createCustomActionBar();
    }

//  @Override
//  public boolean onCreateOptionsMenu(Menu menu) {
//      // Inflate the menu; this adds items to the action bar if it is present.
//      getMenuInflater().inflate(R.menu.activity_main, menu);
//      return true;
//  }

    private void createCustomActionBar() 
    {
        List<String> links = new ArrayList<String>();
        links.add("Abc");
        links.add("Def");
        links.add("Ghi");
        LinksAdapter linkAdapter = new LinksAdapter(this, R.layout.externallink, links);

        View customNav = LayoutInflater.from(this).inflate(R.layout.custom_show_action_bar, null);
        IcsSpinner spinner = (IcsSpinner)customNav.findViewById(R.id.spinner);
        spinner.setAdapter(linkAdapter);

        ImageView refresh = (ImageView) customNav.findViewById(R.id.refresh);
        refresh.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

            }
        });

        ImageView settings = (ImageView) customNav.findViewById(R.id.settings);
        settings.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

            }
        });

        getSupportActionBar().setCustomView(customNav, new ActionBar.LayoutParams(Gravity.RIGHT));
        getSupportActionBar().setDisplayShowCustomEnabled(true);

    }

    private static class LinksAdapter extends ArrayAdapter<String> {

        private List<String> strings;
        private Context context;

        private LinksAdapter(Context mainActivity, int textViewResourceId, List<String> objects) {
            super(mainActivity, textViewResourceId, objects);
            this.strings = objects;
            this.context = mainActivity;
        }

        @Override
        public int getCount() {
            if (strings == null) return 0;
            return strings.size();
        }

        @Override
        public String getItem(int position) {
            return super.getItem(position);
        }

        // return views of drop down items
        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) {

            final String siteLink = strings.get(position);
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            // at 0 position show only icon

            TextView site = (TextView) inflater.inflate(R.layout.externallink, null);
            site.setText(siteLink);

            site.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    //Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(siteLink.getUrl()));
                    //context.startActivity(i);
                }
            });
            return site;

        }

        // return header view of drop down
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            return inflater.inflate(R.layout.custom_show_action_bar, null);
        }
    }

} 
```

这是我的 XML 文件，即布局 xml 文件。

**custom_show_action_bar.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
               android:gravity="right"
        >

    <com.actionbarsherlock.internal.widget.IcsSpinner
        android:id="@+id/spinner"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingRight="20dp"
        android:layout_gravity="center"
            />

     <ImageView  android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:src="@drawable/ic_launcher"
                 android:paddingRight="20dp"
                 android:paddingLeft="10dp"
                 android:layout_gravity="center"
                 android:background="#ffffff"
                 android:id="@+id/refresh"/>

    <ImageView  android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/ic_launcher"
                android:paddingRight="20dp"
                android:background="#ffffff"
                android:layout_gravity="center"
                android:id="@+id/settings"/>

</LinearLayout> 
```

**外部链接.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
        />
</LinearLayout> 
```

指导我哪里错了。

# vba - 无法从 MS Access 2007 创建 Excel 文件

> ID：15208288
> 
> 赞同：0
> 
> 时间：2013-03-04T18:20:09.453
> 
> 标签：vba, ms-access

我收到错误

```
Object type argument for the action or method is blank or invalid 
```

真的不明白为什么我使用的代码在另一个数据库中工作。这是代码：

```
'Print the report
Private Sub printReport()

        Dim myReport As String
        Dim oXL As Excel.Application
        Dim oBook As Excel.Workbook
        Dim oSheet As Object

        DoCmd.SetWarnings False

        myReport = "\Desktop" & "Report_" & (Format(Now(), "yyyymmdd")) & ".xls"

        If GetVersion = "11.0" Then
            DoCmd.OutputTo acOutputQuery, qryTest, acSpreadsheetTypeExcel9, myReport 

        ElseIf GetVersion = "12.0" Then
            DoCmd.OutputTo acOutputQuery, qryTest, acSpreadsheetTypeExcel12, myReport 

        Else
            DoCmd.OutputTo acOutputQuery, qryTest, "Excel 97 - Excel 2003 Workbook (*.xls)", myReport 

        End If

        Set oXL = New Excel.Application
        oXL.Visible = True
        Set oBook = oXL.Workbooks.Open(myReport )
        Set oSheet = oXL.ActiveSheet

        With oBook.ActiveSheet.PageSetup
            .CenterHeader = "Hep C New Patient Report " & (Format(Now(), "m/d/yyyy"))
            .CenterFooter = "&P"
            .PrintTitleRows = "$1:$1"
            .PrintTitleColumns = "$A:$A"
            .Orientation = 2    '1 = Portrait, 2 = Landscape
            .LeftMargin = 18    '72 = 1 inch
            .RightMargin = 18
            .TopMargin = 54
            .BottomMargin = 54
            .PrintGridlines = True
            .PaperSize = 1      '5 = Legal, 1 = Letter
            .ORDER = 2          '2 = Over then down, 1 = Down then over
        End With

        oSheet.Cells.Select
        oSheet.Cells.EntireColumn.AutoFit
        oBook.Save

        oXL.Visible = False

        If (MsgBox("Is it OK to close the report and return to CPE Application?", vbYesNo)) = vbYes Then
            Set oBook = Nothing
            Set oSheet = Nothing
            oXL.Quit
            Set oXL = Nothing
        Else
            MsgBox ("Close Excel when finished to return here.")
            oXL.Visible = True
        End If

        DoCmd.SetWarnings True

End Sub 
```

有任何想法吗？

PS它说错误是由Else语句代码生成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:48:31.783

它收到错误的原因是因为 qryTest，它将用来填充 excel 表的查询，不在引号中，即“qryTest”。这是必要的

# php - 使用 AJAX/JQuery 的投票页面

> ID：15208304
> 
> 赞同：1
> 
> 时间：2013-03-04T18:21:29.593
> 
> 标签：php, jquery, ajax

我试图弄清楚这一点，我想我快到了，但我一直在弄清楚如何正确使用变量。

我正在制作一个页面，允许用户对三种颜色的 M&M 中的一种进行投票。通过在主 html 页面上单击其中一个 M&M 的图片，您的投票将被转移到使用 JQuery/AJAX 的 php 页面，然后 PHP 页面将更新 DBase。

我的 PHP 页面和 Dbase 都很好。我一直在试图弄清楚我如何准确地格式化我的 HTML 页面以将正确的信息发送到我的 php 页面，这样当点击红色的 M&M 时，该信息就会消失，蓝色等等。

这是我的 HTML 链接：

```
<div id="red">
<a href="#"><img src="images/red.jpg" width="100%" /></a>
</div>

<div id="blue">
<a href="#"><img src="images/blue.jpg" width="100%" /></a>
</div>

<div id="green">
<a href="#"><img src="images/green.jpg" width="100%" /></a>
</div> 
```

我想使用 JQuery 和 AJAX 将这些发送到我的 PHP 页面，然后接收更新的投票计数。我将如何制定 AJAX/jQuery 命令，以便在单击每个链接时发送该链接的颜色？我在这里不需要确切的代码，只需要一两个指针就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:27:42.720

HTML：

```
<div id="red" data-color="red" class="answer">
    ...
</div>
<div id="blue" data-color="green" class="answer">
    ...
</div>
<div id="green" data-color="blue" class="answer">
    ...
</div> 
```

JS：

```
$('.answer').click ( function (e) {
    var color = $(this).attr("data-color");
    $.ajax({
        url: '/your/relative/endpoint',
        type: 'POST',
        data: '{ color: "'+color+'" }',
        success: function (res) {
            ...
        },
        error: function (jqXHR) {
            ...
        }
    })
}) 
```

这将跟踪每种颜色并在单击时使用适当的颜色向您的服务器发出请求。请记住，您应该清理输入服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:27:43.250

1.  将点击处理程序附加到每个锚点
2.  在您的 ajax 请求中，将父 div 的 id 作为 post 参数发送
3.  请求完成后，使用结果中的计数更新相应的 div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:32:11.253

尼克的回答很好，只是想我会给你一个选择：

```
<div id="red">
<a href="/vote.php?color=red" class='vote'><img src="images/red.jpg" width="100%" /></a>
</div>

<div id="blue">
<a href="/vote.php?color=blue" class='vote'><img src="images/blue.jpg" width="100%" /></a>
</div>

<div id="green">
<a href="/vote.php?color=green" class='vote'><img src="images/green.jpg" width="100%" /></a>
</div> 
```

Javascript / jQuery：

```
$('.vote').click(function() {
    $.ajax({
        type: 'POST',
        url: $(this).attr('href'),
        cache: false,
        success: function(resp){

        }
    });
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:43:00.360

很简单。

```
/****** JQUERY *******/

/**
* SEND NEW VOTE
* @param int color id of color
*/
function SendVote(color){
    var count = '';
    if( color == 1){
        count = 'red';
    }
    if( color == 2){
        count == 'blue';
    }
    if( color == 3){
        count == 'green';
    }

    //send data via ajax,
    var queryParams = {'color':color};
    $.ajax({
        data: queryParams,
        type: "post",
        url: 'path/to/vote.php'
        beforeSend: function(){ // here you could add a loader (if you want)
            //show loader 
        },
        success: function(response){ // success here you get the response from the server
            //response is not empty
            if( response.length > 0){
                $("#"+count+' span').html(response+' votes'); // then change the number of the counter
            }else{
                //and error on php, cause there response but is empty
            }
        },
        fail: function(e){ //get fail ajax errors
            console.log('fail '+e);
        },
        error: function(e){ // get errors
            console.log('error '+e);
        }
    });
}

/*** ON vote.php (or your php script) *****/

if( isset($_POST['color']) ){

    //do the things to add the new vote

    //then echo the total of votes for the color
    echo getVotes($_POST['color']); //this is the response that ajax will get
}

/********** html *******/

<div id="red">
<a href="#" onclick="SendVote(1)"><img src="images/red.jpg" width="100%" /></a>
<span>
    5 votes
</span>
</div>

<div id="blue">
<a href="#" onclick="SendVote(2)"><img src="images/blue.jpg" width="100%" /></a>
<span>
    4 votes
</span>
</div>

<div id="green">
<a href="#" onclick="SendVote(3)"><img src="images/green.jpg" width="100%" /></a>
<span>
    0 votes
</span>
</div> 
```

# .net - 如何从 .p12 文件中提取私钥字符串？

> ID：15208306
> 
> 赞同：1
> 
> 时间：2013-03-04T18:21:46.457
> 
> 标签：.net, vb.net, google-api, google-analytics-api, jwt

我正在尝试从 VB.NET 服务器应用程序访问 Google Analytics API。我的应用程序属于“服务帐户”应用程序的类别，因此我没有向用户请求凭据——该应用程序有自己的凭据，它用于从 Google 检索数据以显示给用户。

[服务帐户 OAuth2 工作流程](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)要求应用程序生成 JWT（JSON Web 令牌）作为对自身进行身份验证的一种方式。我找到[了一个 .NET 库](https://github.com/johnsheehan/jwt)来生成这些令牌，但我对给这个库提供哪个“键”有点困惑。在库的文档中，给出的示例键是一个 base-64 外观的数字和大写和小写字母字符串。但我拥有的是一个`.p12`私钥文件和相应的密码。如何从该密钥文件中提取某种文本密钥？

我试图做类似的事情

```
Dim cert As New X509Certificate2("C:\Users\xxxxx\private.p12", "notasecret")
Dim certData As Byte() = cert.Export(X509ContentType.Pkcs12, "notasecret") 
```

但这给我留下了一个字节数组，而不是一个字符串。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:52:44.090

我相信我已经知道该怎么做：

```
Dim PrivateKeyPath As String = "C:\Users\xxxxx\privatekey.p12"
Dim CertificatePassword As String = "notasecret"

Dim cert As New X509Certificate2(PrivateKeyPath, CertificatePassword,
                                 X509KeyStorageFlags.Exportable)
Dim certData As Byte() = cert.Export(X509ContentType.Pkcs12, CertificatePassword)
Dim keyString As String = Convert.ToBase64String(certData) 
```

正如@Jim Mischel 指出的那样，我只需要以base-64 对关键数据进行编码。

顺便说一句，`X509KeyStorageFlags.Exportable`在尝试导出密钥时，添加标志修复了 CryptographicException（“密钥在指定状态下无效。”）。

# cpanel - Why my links in the website(just online) show like this: href=\"http://link\"?

> ID：15208308
> 
> 赞同：0
> 
> 时间：2013-03-04T18:21:54.650
> 
> 标签：cpanel

I use ckeditor in my website, when i add link or image in the textarea after submit the form All links and images change to this style:

For links : `href=\"link\"`
For images: `src=\"link\"`

Please help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:52:50.570

Thank u guys for guide me, i used this code as solution:

```
if (get_magic_quotes_gpc()) {
$process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
while (list($key, $val) = each($process)) {
    foreach ($val as $k => $v) {
        unset($process[$key][$k]);
        if (is_array($v)) {
            $process[$key][stripslashes($k)] = $v;
            $process[] = &$process[$key][stripslashes($k)];
        } else {
            $process[$key][stripslashes($k)] = stripslashes($v);
        }
    }
}
unset($process);
}#insert this code in top of your main file body 
```

# java - Java 数组 - 相邻卡片

> ID：15208320
> 
> 赞同：0
> 
> 时间：2013-03-04T18:22:31.183
> 
> 标签：java, arrays

我正在尝试创建一个程序，该程序以特定方式在网格上排列 6 张卡片，以便没有卡片与相同类型的其他卡片相邻（类型为国王、王后和杰克）。网格是 4x4，但我只能将卡片放在以下图案内：

```
[ ][ ][x][ ]
[x][x][x][ ]
[ ][x][x][x]
[ ][ ][x][ ] 
```

现在，我的主要问题是当我的方法尝试检查相邻单元格的卡片类型时。当它从 0,0 开始时，它会尝试检查 [row-1][column]，这显然不起作用，因为它转换为 -1,0。问题是，我不知道如何正确实施。

如果之前有人问过这个问题，我深表歉意，因为我不确定要准确搜索什么（或如何正确命名这个问题）。

```
private boolean bordersCard(int row, int column, char cardChar)
    {
        Candidate center = board[row][column];
        Candidate top;
        Candidate bottom;
        Candidate left;
        Candidate right;

        if (board[row-1][column] != null){
            top = board[row+1][column];
        }
        else
        {
            top = new Candidate('?', 0);
        }

        if (board[row+1][column] != null){
            bottom = board[row+1][column];
        }
        else
        {
            bottom = new Candidate('?', 0);
        }

        if (board[row][column-1] != null){
            left = board[row][column-1];
        }
        else
        {
            left = new Candidate('?', 0);
        }
        if (board[row][column+1] != null){
            right = board[row][column+1];
        }
        else
        {
            right = new Candidate('?', 0);
        }

        if ((center.getCardChar() == top.getCardChar()) || (center.getCardChar() == bottom.getCardChar()) ||
        (center.getCardChar() == left.getCardChar()) || (center.getCardChar() == right.getCardChar())){
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:24:55.613

您必须添加`if`栅栏以防止无效检查：

```
if (row > 0 && board[row-1][column] != null){
    top = board[row+1][column];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:28:41.720

正如您所确定的，检查 [-1][0] 不起作用。但是您不需要检查那个不存在的插槽。只要确保你没有跑出数组的开头或结尾。此外，请确保您`if`在您的情况下执行相同的数学运算：

```
if ((row - 1) >= 0 && (row - 1) < board.length && board[row-1][column] != null){
     top = board[row-1][column];  // Use -1 to match condition.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:31:20.723

如果任何索引超出范围，请将它们分配为 NULL。在 Candidate 创建一个方法 isSameType(Candidate other);

```
isSameType(Candidate other)
{
   if(other == null)
    return false;
   else
    retrun getCardChar() == other.getCardChar();
} 
```

将您的 if 更改为：

```
if(center.isSameType(top) || center.isSameType(bottom) || ...)
{
   return false;
} 
```

# java - java.lang.NoClassDefFoundError: org/json/simple/JSONObject 在 Netbeans IDE 之外运行

> ID：15208321
> 
> 赞同：4
> 
> 时间：2013-03-04T18:22:34.173
> 
> 标签：java, json, netbeans

此处已就此错误提出了类似的问题，但我已经尝试了大多数解决方案，但仍然收到相同的错误消息。我在我的 java 应用程序中使用 json-simple 库。我在我的库中包含了 json-simple-1.1.1.jar 文件。通过 Netbeans 运行完美。当我尝试通过命令行“java -jar”运行它时，出现以下错误。即使“java -cp json-simple-1.1.1.jar -jar”仍然给出同样的错误。

```
nullException in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/json/simple/JSONObject
    at gui.keo_synopticx.jb_save_configMouseClicked(keo_synopticx.java:5318)
    at gui.keo_synopticx.access$6000(keo_synopticx.java:49)
    at gui.keo_synopticx$60.mouseClicked(keo_synopticx.java:3358)
    at java.awt.AWTEventMulticaster.mouseClicked(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.json.simple.JSONObject
    at java.net.URLClassLoader$1.run(Unknown Source) 
```

我可能缺少 json-simple-1.1.1 的依赖项？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:49:21.390

org/json/simple/JSONObject 类肯定在 jar 文件中。

我能想到的问题的唯一原因是您没有指定jar文件路径，并且该jar与您的执行目录不在同一目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T00:59:17.997

要解决这个问题，你应该在终端上精确你的类路径：

语法：

```
java -classpath <your_archive.jar> [<package>.]<Class_name> 
```

如果该类属于某个类，请不要忘记包。

# c# - 第 326 行中的 RSACryptoServiceProvider.VerifyData 异常

> ID：15208322
> 
> 赞同：1
> 
> 时间：2013-03-04T18:22:35.333
> 
> 标签：c#, nullreferenceexception, rsacryptoserviceprovider

我在使用 RSACryptoServiceProvider.VerifyData 时遇到问题

> NullReferenceException：对象引用未设置为对象 System.Security.Cryptography.RSACryptoServiceProvider.VerifyData（System.Byte[] 缓冲区，System.Object halg，System.Byte[] 签名）的实例（在 /Applications/buildAgent/work/ 3df08680c6f85295/mcs/class/corlib/System.Security.Cryptography/RSACryptoServiceProvider.cs:326)

您可以在 RSACryptoServiceProvider.cs 第 326 行看到异常我仔细检查了所有参数和 rsa 的创建——一切正常。有任何想法吗 ？

我的代码：

```
X509Certificate2 x509 = null;
RSACryptoServiceProvider rsa = null;
byte[] certificate = Convert.FromBase64String( certificate_s );
x509 = new X509Certificate2( certificate );
rsa = (RSACryptoServiceProvider) x509.PublicKey.Key;
bool sha1Valid = rsa.VerifyData( data, CryptoConfig.MapNameToOID("SHA1"), signature ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:10:08.627

解决了。由 halg 参数引起的错误 -- CryptoConfig.MapNameToOID("SHA1") 似乎在 Unity C# 脚本中是非法的 HashAlgorithm.Create("SHA1") 必须改用

# ruby-on-rails-3.1 - Rails 3.1资产管道，它如何处理同名文件？优先？

> ID：15208325
> 
> 赞同：4
> 
> 时间：2013-03-04T18:22:40.200
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

这是个问题，我使用的是 Typus，它在 /vendor/assets 下包含了一个 fancybox jquery 插件。那个fancybox 版本太旧了（1.3.4），它不能与rails 1.9.x 一起工作，所以我需要用与那个版本的jquery 一起工作的fancybox 2.x 替换它，因为我网站的其余部分使用jquery 1.9。

Typus 的 application.js 清单以这种方式加载fancybox

```
//= require jquery.fancybox-1.3.4.pack 
```

所以我想我可以添加带有该文件名的 fancybox 2，资产管道将使用该版本，但事实并非如此，它正在将文件加载到 /vendor/assets.xml 中。

所以，我的问题是，当有多个同名文件时，rails 如何处理这种情况？有什么优先权吗？最重要的是，我可以更改它以使 /app/assets 下的文件具有更高的优先级吗？

我读过它使用它找到的第一个带有名称的文件，但我不知道如何告诉 rails 先查看某个文件夹。

我试过了

```
config.assets.paths = [Rails.root.join('app','assets')] 
```

或者

```
config.assets.paths = [Rails.root.join('app','assets'),Rails.root.join('vendor','assets')] 
```

在我的 config/application.rb 但它继续使用 /vendor/assets 下的文件

我不想 fork>修改 Typus，我想告诉 rails 使用我的 jquery.fancybox-1.3.4.pack.js 版本的文件

我在 github 上看到 Typus 的最后一次提交将 jquery 降级到 1.8.x 但我不能这样做，我需要 jquery 1.9。

我也试图在我的项目中覆盖 Typus 的 application.js 但没有运气。

# ios - 带有 iOS 6.1 的 GCD 内的 SIGABRT

> ID：15208326
> 
> 赞同：0
> 
> 时间：2013-03-04T18:22:41.493
> 
> 标签：ios, crash, grand-central-dispatch, sigabrt, ios6.1

我们在 libdispatch 内部函数中发生了奇怪的崩溃，经过数小时的研究，我们对发生的事情一无所知。

崩溃跟踪是：

```
Incident Identifier: 7A5CBCD8-28A3-4AC5-937A-D5BA69A64B67
CrashReporter Key:   [TODO]
Hardware Model:      iPhone5,2
Process:         Memoir Dev [6973]
Path:            /Users/USER/Memoir Dev.app/Memoir Dev
Identifier:      com.veri.memoir-enterprise
Version:         0.9.191
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2013-03-03 20:55:42 +0000
OS Version:      iPhone OS 6.1.2 (10B146)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x3ae66350
Crashed Thread:  1

Thread 0:
0   libsystem_kernel.dylib              0x3ae55e30 _mach_msg_trap + 20
1   CoreFoundation                      0x000972bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x00095fdb __CFRunLoopRun + 819
3   CoreFoundation                      0x32bc823d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x32bc80c9 _CFRunLoopRunInMode + 105
5   GraphicsServices                    0x367a633b _GSEventRunModal + 75
6   UIKit                               0x34ae42b9 _UIApplicationMain + 1121
7   Memoir Dev                          0x0002a0d7 main (main.m:20)

Thread 1 Crashed:
0   libsystem_kernel.dylib              0x3ae66350 ___pthread_kill + 8
1   libsystem_c.dylib                   0x3ae1936b _abort + 95
2   libsystem_c.dylib                   0x3adb212d _free + 361
3   libdispatch.dylib                   0x000088d1 _dispatch_kevent_register + 169
4   libdispatch.dylib                   0x00007e91 _dispatch_source_kevent_register + 33
5   libdispatch.dylib                   0x00008957 _dispatch_timer_list_update + 27
6   libdispatch.dylib                   0x00006b81 _dispatch_mgr_invoke + 389
7   libdispatch.dylib                   0x00002378 _dispatch_mgr_thread + 36

Thread 2:
0   libsystem_kernel.dylib              0x3ae55e30 _mach_msg_trap + 20

[...] 
```

关于我们的代码和场景的一些背景知识：

*   我们广泛使用 NSOperations 和 GCD 将数据上传到我们的服务器
*   崩溃似乎发生在应用程序在后台上传时，在 10 分钟限制内
*   在我们从 6.0.2 升级到 6.1 的几天后，使用 iOS 6.1 (10B143) 的崩溃开始发生在 2 月 9 日左右
*   到目前为止，我们可以在 iOS 6.1.2 (10B146) 中重现它，但不能在 6.0.1 (10A523) 中重现
*   关于 SIGABRT 异常类型，似乎有人在调用 'abort' 函数（实际上，它是由 'dispatch_kevent_register' 调用的'free'）

你们有谁知道 iOS 6.1 及更高版本的 GCD 内部是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:36:27.490

由于进程中的堆损坏，这是 free() 中止的。

调度管理器线程是命中 abort() 的线程可能是偶然的（回溯表明它醒来异步安装新的调度计时器源并且 malloc 检测到当时的损坏）。

您可能想尝试使用 GuardMalloc 运行（请参阅 XCode 方案编辑器中的诊断选项卡），当损坏实际发生时，它更有可能给您一个崩溃点。

或者，各种 malloc 调试环境变量可能有助于追查罪魁祸首，参见 malloc(3) 中的 ENVIRONMENT

# html - DD内容无空格时如何在DT下做DD Wrap

> ID：15208327
> 
> 赞同：3
> 
> 时间：2013-03-04T18:22:44.860
> 
> 标签：html, css

我正在使用要求以下代码的规范：

```
<dl>
    <dt>Key</dt>
    <dd>012345678901234567890123456789</dd>
</dl> 
```

...像这样渲染：

```
Key  01234567890123456
7890123456789 
```

当 DD 的内容包含空格时，它可以正常工作，但是当没有空格时，它会失败。即使包括`dd { word-wrap: break-word; }`也不太有效，并导致以下结果：

```
Key
0123456789012345678901
23456789 
```

我当前的 CSS 如下所示：

```
dl {
    margin: 1em 0;
    padding: 0;
    width: 250px;
}

dt {
    float: left;
    clear: left;
    margin: 0;
    padding: 0 .5em 0 0;
    font-weight: bold;
}

dd {
    margin: 0;
    padding: 0;
    word-wrap: break-word;
}

dd:after {
    content: ".";
    visibility: hidden;
    clear: left;
} 
```

如何仅使用 HTML 和 CSS 来达到我想要的效果？

我在这里也有一个演示，试图澄清我的需求：[http](http://cdpn.io/Ezujp) ://cdpn.io/Ezujp （警告，包含 SCSS 而不是 CSS，但它并不是非常复杂，所以应该很容易理解） .

我阅读、学习并使用了[https://stackoverflow.com/a/1577397/771948](https://stackoverflow.com/a/1577397/771948)，虽然它让我更接近我的预期解决方案，但它并不能满足我的所有需求。

我不需要使用 DL。如果有另一种方法可以跨浏览器（IE7+）的方式实现我的预期效果，那么我愿意使用它，只要它在语义上是正确的并且不涉及太多的黑客攻击。

我会尝试`dt { display: run-in; }`，但这在 Firefox 中不起作用，并且它仍然没有导致我现在所拥有的任何差异（`dd { word-wrap: break-word }`包含时， dd 从下一行开始，*然后*包装，就像现在一样） .

编辑：在围绕 SO 进行更多搜索后，我找到了这个答案：[https ://stackoverflow.com/a/3284425/771948](https://stackoverflow.com/a/3284425/771948)

它提供了一些比 DL 更容易设计样式的替代选项，但我不确定语义。尽管如此，我使用 ul 以下列方式构建了一个工作原型：

```
<ul>
    <li><strong>Key</strong>012345678901234567890123456789</li>
</ul> 
```

...其中，当样式如下：

```
ul {
    outline: 1px solid #F00;
    margin: 1em 0;
    padding: 0;
    width: 250px;
}

li {
    width: 100%;
    outline: 1px solid #00F;
    margin: 0;
    padding: 0;
    word-wrap: break-word;
}

strong {
    white-space: nowrap;
} 
```

...按预期呈现，但我不确定这在语义上是否正确，也不确定屏幕阅读器是否可访问。在这种情况下，有人对我有什么有用的建议吗？

先感谢您。如果不出意外，我希望这对处于类似情况的其他人来说是一个有用的资源（因为链接到其他两个类似问题的 SO 答案）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T19:00:29.777

根据 CSS3 文本草案，您可以使用[`word-break: break-all`](https://developer.mozilla.org/en-US/docs/CSS/word-break)（在`dd`元素上）。名称用词不当；设置声明内容中的任何*字符串都**可能*在任何时候被破坏。（这与 形成对比`word-wrap: break-word`，它同样允许“自由”换行，但仅在绝对需要避免溢出时，即作为紧急中断。）

但是，它仅受 Firefox 和 IE 支持。为了更好地覆盖浏览器，您需要`<wbr>`在每个数字后插入例如零宽度空格或标签（但您可以使用客户端脚本来执行此操作）；这两种选择都有[优点和缺点](http://www.cs.tut.fi/~jkorpela/html/nobr.html#suggest)。

# php - PHP MySQL如何获取列完全唯一的行数

> ID：15208329
> 
> 赞同：0
> 
> 时间：2013-03-04T18:22:53.133
> 
> 标签：php, mysql

我有一张看起来像这样的桌子

```
身份证+孩子       
--------------------------
0 | 3
1 | 6
2 | 7
3 | 6
4 | 7
5 | 5

```

我想要做的是找到`kID`只发生一次的行数。所以在这种情况下，变量的值应该是`2`因为`kID: 3 and 5 occurs only once`所以我试图计算它而忽略其他所有内容。我真的很难过，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:25:13.993

这将显示`kID`只出现一次的 s：

```
SELECT kID, COUNT(kID)
FROM table
GROUP BY kID
HAVING COUNT(kID) < 2 
```

**结果**

```
| 孩子 | 计数（儿童）|
--------------------
| 3 | 1 |
| 5 | 1 |
```

[查看演示](http://sqlfiddle.com/#!2/69cbf/2)

然后得到这些的总数：

```
SELECT Count(*) AS count 
FROM   (SELECT kid, 
               Count(kid) 
        FROM   tbl 
        GROUP  BY kid 
        HAVING Count(kid) < 2) a 
```

**结果**

```
| 计数 |
---------
| 2 |

```

[查看演示](http://sqlfiddle.com/#!2/69cbf/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:25:21.203

试试这个

```
SELECT
  id,
  count(kID) as `Count`
FROM mytable as t
GROUP BY kID
HAVING Count = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:25:25.707

怎么样

```
select count(*) from 
(select kid, count(*) from table group by kid having count(*) = 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:26:31.807

您可以执行以下操作：

```
select count(*) from 
(
    select kID, COUNT(*) [c] from tableName
    group by kID
) t
where t.c = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T18:26:39.753

```
SELECT kID, 
COUNT(kID) 
FROM tableName
GROUP BY kID
HAVING COUNT(kID) = 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T18:28:46.283

您可以使用子选择来做到这一点。这应该有效，但可能不是非常有效：

```
SELECT id, kID, COUNT(1) FROM (SELECT COUNT(1),kID FROM TABLE
                               GROUP BY kID
                               HAVING COUNT = 1) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T18:39:13.443

另一种方法来做到这一点。只要`(id)`是表的主键或存在唯一约束，它就可以工作`(kid, id)`：

```
SELECT COUNT(*) AS cnt
FROM
  ( SELECT NULL
    FROM tableX
    GROUP BY kid
    HAVING MIN(id) = MAX(id) 
  ) AS g ; 
```

在**[SQL-Fiddle测试](http://sqlfiddle.com/#!2/b02fc/2)**

一个索引`(kid, id)`将提高效率 - 只会`COUNT()`做一个，而不是 2。

# c++ - 冒泡排序不起作用

> ID：15208330
> 
> 赞同：0
> 
> 时间：2013-03-04T18:22:54.693
> 
> 标签：c++, sorting, struct

它不会第二次将我打印出数组。

如果我删除对 bubbleSort( ... ) 的调用，它会起作用。

无法理解为什么...这种行为从未发生过，为什么执行程序会跳转到 printArray(...) 的第二次调用？

有什么建议么？

```
#include <iostream>
#include <cstdlib>
using namespace std;

// STRUCT
struct Array
{
    int * data;
    unsigned int size;
};

// PROTYPES
void printArray( Array & );
void bubbleSort( Array & );

// MAIN
int main(int argc, char **argv)
{
    Array array;

    array.size = 10;
    array.data = new int [ array.size ];

    for ( unsigned int i = 0; i < array.size; ++i )
        array.data[ i ] = rand() % 10;

    printArray( array );
    bubbleSort( array );
    printArray( array );

    return 0;
}

void printArray( Array & array )
{
    for ( unsigned int i = 0; i < array.size; ++i )
        cout << array.data[ i ] << ' ';

    cout << endl;
}

void swap( int & m, int & n )
{
    int temp = m;
    m = n;
    n = temp;
}

void bubbleSort( Array & a )
{
    for ( unsigned int i = 0; i < a.size - 1; ++i )
        for ( unsigned int j = a.size - 1; j >= i; --j )
            if ( a.data[ j-1 ] > a.data[ j ] )
                swap( a.data[ j-1 ], a.data[ j ] );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:24:54.637

小心**无**符号数据类型。在某些时候，“i”将为 0，您将检查“j>=0”，这始终是正确的。从而创建一个无限循环。

# c++ - C ++ 11条件包含控制表达式“类型就像表示相同”？

> ID：15208332
> 
> 赞同：1
> 
> 时间：2013-03-04T18:23:05.643
> 
> 标签：c++, c++11

在 C++ 标准的 16.1.4（条件包含）中，它说：

> 出于此令牌转换和评估的目的，所有有符号和无符号整数类型的行为就好像它们分别具有与 intmax_t 或 uintmax_t 相同的表示。

我不明白这一点。“表现得好像它们具有相同的表示形式”是什么意思？

`integer-literals`根据 2.14.2.2 中解释的值和后缀，将其标记为特定的基本类型。

16.1.4 引用是否说他们的类型被`intmax_t`and以某种方式“替换”了`uintmax_t`？（这是否完全等同于将整数文字静态转换为`intmax_t`or `uintmax_t`？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:40:33.827

It basically means that the preprocessor doesn't have to deal with type information; it can do all of its integral arithmetic in a single type. Most of the time, it won't make a different, but it does mean that something like `UINT_MAX + 1U` will result in a very big number, where as outside of the preprocessor, it will result in `0`.

# mysql - Typo3 无法连接到 mysql

> ID：15208344
> 
> 赞同：0
> 
> 时间：2013-03-04T18:23:47.937
> 
> 标签：mysql, content-management-system, typo3

刚刚在 Linux Mint 14 上安装了 Typo3 版本 6，政府包。安装了最新版本的 PHP 和 MYSQL。编译PHP：

```
./configure --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql  --with-openssl --with-zlib --enable-soap --enable-hash --with-pcre-regex --with-curl --with-gd --with-mysqlih-mysql  --with-openssl --with-zlib --enable-soap

make

make install 
```

Typo3 安装程序给出以下错误：

> *没有连接到数据库！
> （用户名：typo3，主机：localhost，使用密码：YES）
> 转到步骤 1 并输入有效的用户名和密码！*

我输入的用户名和密码是正确的。我可以使用这些凭据连接到 mysql

1.  phpMyAdmin 网页界面
2.  mysql -u 错字3 -p 错字3db

谷歌搜索，发现有些人有这个问题，原因是三件事之一：

1.  数据库名称中的下划线 - 从我的数据库名称可以看出，它不适用于我的情况
2.  配置不允许持久连接到 mysql - 不适用于我的情况，因为我目前允许持久连接。
3.  Typo3 文件的权限 - 建议的修复将所有文件设置为 755 或 777（我认为是允许的方式），但我尝试这样做以排除权限问题。没有解决我的问题。

我为 mysql 启用了常规日志记录。当我在typo3安装程序中输入mysql用户的用户名和密码时，它立即给出无法连接的错误，但mysql日志显示没有登录尝试。相反，当我使用 phpMyAdmin 登录时，它确实显示成功，而当我故意输入错误密码时，日志显示它被拒绝。

这对我来说意味着没有启动从 Typo3 到 mysql 的连接，但我现在不知道为什么。

关于问题可能是什么或我接下来应该检查什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:04:12.957

我有一个类似的问题，但发现我必须使用服务器 IP 地址而不是 localhost。奇怪的是 localhost 在过去一直没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T13:25:28.347

我有同样的问题。通过在 PHP 中启用所需的模块来修复它。它们列在根 TYPO3 文件夹的 INSTALL.txt 文件中。

```
- fileinfo
- filter
- GD2
- JSON
- mysqli
- openssl
- pcre
- session
- SOAP
- SPL
- standard
- xml
- zlib 
```

我相信这种情况下的关键模块是 mysqli。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T19:41:14.920

我的解决方案是：必须以这种方式设置对 /var/lib/mysql 的文件访问权限：

```
[root@localhost phpmyadmin]# cd /var/lib
[root@localhost lib]# chmod 755 mysql
[root@localhost lib]# ls -ld mysql
drwxr-xr-x 16 mysql mysql 4096 Dez 16 20:14 mysql/ 
```

mysql 用户和 mysql 组也必须在 /var/lib/mysql 下的所有文件和文件夹中设置。在此更改之后，我可以使用安装工具登录到 TYPO3 数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:56:02.980

marc_s,

你检查你的文件权限了吗？

对于 TYPO3，我使用 TYPO3 安装文件夹中的这些命令：

```
find . -type d ! -name .svn -exec chmod 755 {} \; && find . -type f ! -name .svn -exec chmod 644 {} \;

chmod -R g+wX fileadmin typo3temp typo3conf uploads 
```

你也可以这篇文章： [http ://dmitry-dulepov.com/article/migrating-typo3-installation-to-a-different-server.html](http://dmitry-dulepov.com/article/migrating-typo3-installation-to-a-different-server.html)

我希望这些信息会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-29T20:33:13.257

我与typo3 4.6 有相同的症状，它的安装程序没有连接。我将其追溯到此调用堆栈：

class.ux_t3lib_db.php / sql_pconnect / handler_init

handler_init 函数具有以下代码：

```
 if (!$cfgArray['config']['database']) {
            // Configuration is incomplete
            return;
        } 
```

数据库属性为空。我必须在 localconf.php 中使用这一行进行设置 $typo_db = "mydatabasename";

我还在 MySQL 中用这个名称创建了我的数据库。

# c# - C#：在 foreach 中跳线？

> ID：15208350
> 
> 赞同：2
> 
> 时间：2013-03-04T18:24:08.070
> 
> 标签：c#, .net, regex

我正在用 C# 编写一个非常简单的脚本解释器。该语言中没有`If/Else`语句或用户可编程子程序；唯一的控制流是`goto`关键字。

如果我使用`foreach`循环逐行解析脚本，如何使程序“跳转”到`GoTo()`块中参数指定的行号？

```
static void Main(string[] args)
{
    string testLines = "SomeCommand(34,32)\n" +
    "SomeCommand(1)\n" +
    "GoTo(5)\n" +
    "This(\"Will\",\"Be\",\"Skipped\")\n" +
    "Destination(\"OfTheGoToKeyWord\")";
    Regex r = new Regex("^(?<cmd>\\w+)[(](?<params>\\S+)[)]", RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace);
    string[] lines = testLines.Split('\n');
    foreach (string line in lines)
    {
        try
        {
            string[] matches = r.Split(line);
            if (matches[1].Equals("GoTo"))
            {
                GoToLineSpecifiedByMatchesElement2();
            }
        }
        catch (Exception)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T18:26:25.243

您将无法为此使用 foreach 。您将需要一个`while`循环并按索引跳转。

看起来这可能只是你想做的事情的冰山一角。如果是这样，您将很快超越正则表达式。阅读编译器设计，特别是如何分离词法、句法和语义阶段，以及如何重用可以在每个步骤中为您提供帮助的现有工具。

在我看来，在阅读了一些内容之后，您可能会很快理解为什么您当前的方法可能还不够，而且成熟的编译器也可能是矫枉过正。在这种情况下，.Net 内置了一些很好的特性来帮助定义所谓的“[领域特定语言](http://msdn.microsoft.com/en-us/library/bb126278.aspx)”，这可能正是您所需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T18:35:56.223

改用`while`循环：

```
 private static void Main(string[] args)
    {
        string testLines = "SomeCommand(34,32)\n" +
                           "SomeCommand(1)\n" +
                           "GoTo(5)\n" +
                           "This(\"Will\",\"Be\",\"Skipped\")\n" +
                           "Destination(\"OfTheGoToKeyWord\")";
        Regex r = new Regex(
            "^(?<cmd>\\w+)[(](?<params>\\S+)[)]", RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace);

        List<string> lines = testLines.Split('\n').ToList();
        int i = 0;

        while (i < lines.Count)
        {
            try
            {
                var input = lines[i];
                var matches = r.Split(input);
                if (matches[1].Equals("GoTo"))
                {
                    i = testLines.IndexOf(input);
                }
                else
                {
                    i++;
                }
            }
            catch (Exception)
            {

            }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T18:29:40.080

使用 for 循环。该变量`i`可以跟踪您当前的行，您可以在循环内更改它，模拟 goto。

```
 for (int i = 0; i < lines.Length; i++)
{
    try
    {
        string[] matches = r.Split(lines[i]);
        if (matches[1].Equals("GoTo"))
        {
            i = matches[2] - 1; // -1 because for loop will do i++
        }
    }
    catch (Exception)
    {

    }
} 
```

# ajax - AJAX 和 Coldfusion：对数据库执行更新并反映更改而无需重新加载

> ID：15208351
> 
> 赞同：1
> 
> 时间：2013-03-04T18:24:08.857
> 
> 标签：ajax, database, coldfusion, cfml

我在可视化我需要的解决方案时遇到问题。我正在处理的网站上有一个选择菜单，客户希望能够选择一个名为“创建新源”的选项，然后会弹出一个带有空白字段的 JS 窗口供用户使用输入那个新的起源。

提交此表单后，数据库将被更新，选择菜单现在将显示此项目，而无需整个页面刷新。

数据库方面的一切都已设置好并准备就绪，Coldfusion 的 99% 也是如此。

这是相关表单字段的片段：

```
<p class="_30NP" align="right">
    <label>Origin&nbsp;</label>
</p>
<p class="_20NP">
    <cfselect 
     name="Origin" 
     id="Origin" 
     query="Origin" 
     display="description" 
     value="code"  
     required="yes">
        <option value="new">New Origin</option>
    </cfselect>
</p> 
```

这是CFQUERY：

```
<CFQUERY DBTYPE="Query" NAME="Origin">
    SELECT Code, [Description]
    FROM ZCODES WHERE CODE = 0
    UNION ALL 
    SELECT Code, [Description]
    FROM ZCODES
    WHERE FieldName = 'Origin'
    ORDER BY 1
</CFQUERY> 
```

这是一个非常简单的问题，答案可能非常简单，我只是很少接触 AJAX。

如何在不完全刷新页面的情况下提交表单（弹出窗口）并刷新选择列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:11:12.437

我会使用像[jQuery](http://jquery.com/)这样的 javascript 库来处理你的 ajax。

单击按钮后，使用[$.get()](http://api.jquery.com/jQuery.get/)、[$.post()](http://api.jquery.com/jQuery.post/)或[$.ajax()](http://api.jquery.com/jQuery.ajax/)与服务器通信。每个人都会做出回应。响应类型由您决定。您可以返回 JSON 并将其解析出来，也可以直接返回 HTML。我可能只是简单地返回 html 来快速简单。

```
<cfoutput query = "...">
    <option value = "...">...</option>
</cfoutput> 
```

获得结果后，使用[$.html()](http://api.jquery.com/html/)更新`select's`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:22:50.827

Michael，我个人不喜欢完全 jQuery ajax 解决方案。我真的很喜欢 CFAJAXPROXY。我听说它有缺点，但我没有发现任何缺点。

您的问题与 stackexchange.com 网站上的另一个问题非常相似。我想你可以在这里找到一些很好的信息。

[https://softwareengineering.stackexchange.com/questions/133759/where-can-i-find-a-simple-jquery-ajax-coldfusion-tutorial](https://softwareengineering.stackexchange.com/questions/133759/where-can-i-find-a-simple-jquery-ajax-coldfusion-tutorial)

# qt - 在 Qt 中切换布局

> ID：15208352
> 
> 赞同：2
> 
> 时间：2013-03-04T18:24:09.450
> 
> 标签：qt, layout, qt4

我有 2 个布局 -`layout1`和`layout2`. 假设两者在其中的小部件类型数量方面完全不同。现在我有 2 个按钮`but1`和`but2`. 什么时候`but1`被点击被`layout1`激活，什么时候`but2`被点击`layout2`被激活。我怎样才能在 Qt 中实现这一点？

**注意：** 我不想删除我的小部件（或布局）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:45:19.447

```
QStackedWidget* stackedWidget = new QStackedWidget;
QWidget* parentLayout1 = new QWidget;
QWidget* parentLayout2 = new QWidget;
QGridLayout* layout1 = new QGridLayout(parentLayout1);
QGridLayout* layout2 = new QGridLayout(parentLayout2);
stackedWidget->addWidget(parentLayout1);
stackedWidget->addWidget(parentLayout2);
stackedWidget->widget(1)->show(); 
```

然后根据需要隐藏并显示它们，我自己尝试了 QStackedLayout 来解决这个问题，但我无法让它工作，但上述解决方案应该可以正常工作。我在我目前正在处理的一个项目中使用它，切换小部件的性能可能与 QStackedLayout 相同。显然我给你的是代码的基本内容，但这应该对你有所帮助。任何后续问题让我知道。您也可以使用您想要的任何类型的布局，不必是 QGridLayout，这正是我使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:17:54.780

为此，您应该使用 QStackedLayout 或 QStackedWidget。

# php - 架构验证失败 php

> ID：15208355
> 
> 赞同：-1
> 
> 时间：2013-03-04T18:24:24.110
> 
> 标签：php, xml, xsd, domdocument

我创建了`DOMDocument`元素，`appendChild()`多次调用等等。

在我完成构建 XML 后，我想[根据 XSD 模式对其进行验证](http://php.net/domdocument.schemavalidate)。

```
$newDocument->schemaValidate($schemaPath); 
```

我有错误

```
No matching global declaration available for the validation root. 
```

但是，如果我将生成的 XML 保存到文件中，打开它并验证一切正常。或者，如果执行以下操作：

```
$newDocument->loadXML($newDocument->saveXML()); 
```

然后一切都很好。

你能解释一下，为什么验证器在第一种情况下找不到根元素？

更新

我如何构建我的 xml：

```
$newDocument = new DOMDocument();

$rootElement = $newDocument->createElement('ONIXMessage');

$rootElement->setAttribute('xmlns', 'http://www.editeur.org/onix/2.1/reference');

$newDocument->appendChild($rootElement); 
```

在我将子元素添加到根元素之后，但当我尝试根据 XML 模式对其进行验证时，即使列出的代码也会产生错误。

关于 xml 模式文件。我从 EDItEUR 组织下载了它，所以我相信问题就在我身边。链接到网站[http://www.editeur.org/onix/2.1/reference/ONIX_BookProduct_Release2.1_reference.xsd上的 .xsd 文件](http://www.editeur.org/onix/2.1/reference/ONIX_BookProduct_Release2.1_reference.xsd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:39:06.103

As far as I know, with some older versions of libxml people come across this issue, it's related to the namespaces the elements are created on.

Maybe you can try to create your elements with [`createElementNS()`](http://php.net/domdocument.createElementNS) instead of a simple `createElement` (and then `appendChild`), specifying the same NS as the schema file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:16:57.560

我相信你应该使用`createElementNS`而不是`createElement`- 即：

```
$newDocument = new DOMDocument();
$rootElement = $newDocument->createElementNS('http://www.editeur.org/onix/2.1/reference', 'ONIXMessage');
$newDocument->appendChild($rootElement); 
```

发生的事情是`DOMDocument`内存中的根元素在 null 命名空间中-因此验证失败，但它具有命名空间声明-因此当它被保存并重新加载时，根元素最终位于正确的命名空间中，并且验证有效。

# linux - 从 xtrace 隐藏命令

> ID：15208361
> 
> 赞同：3
> 
> 时间：2013-03-04T18:24:40.263
> 
> 标签：linux, bash

有没有办法使用 xtrace on ( `set -o xtrace`) 从输出中隐藏命令？

在 DOS 中，该技术是`echo on`在隐藏命令前面加上`@`符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:34:22.293

我从未在 bash 中看到过类似的技巧，但有时您可以使用 subshel​​l 临时启用对您感兴趣的命令的跟踪：

```
echo "This command is not traced"
(
  set -x
  echo "This command is traced"
)
echo "No longer traced" 
```

如果 subshel​​l 不适合，因为您想修改环境，您可以使用`set -x`then `set +x`，但这会给您留下跟踪`set +x`命令的工件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:44:02.907

你可以做这样的事情

```
# At start of script, or where xtrace may be enabled:
[[ "$SHELLOPTS" =~ xtrace ]] && xtrace_on=1

# Later
set +o xtrace
# Your untraced code here
[[ "$xtrace_on" ]] && set -o xtrace 
```

# python - 否定先前匹配的词组

> ID：15208362
> 
> 赞同：1
> 
> 时间：2013-03-04T18:24:42.243
> 
> 标签：python, regex, pattern-matching

我正在尝试从如下所示的字符串中提取内容：

```
A.content content 
  content 
B.content  C. content content
content D.content 
```

这是我在 Python 中的正则表达式模式：

```
reg = re.compile(r''' 
     (?xi)
     (\w\.\t*\s*)+ (?# e.g. A. or b.)
     (.+)          (?# the alphanumeric content with common symbols)
     ^(?:\1)       (?# e.g. 'not A.' or 'not b.')
     ''')

m = reg.findall(s) 
```

让我给你举个例子。假设我有以下字符串：

```
s = '''
 a.   $1000 abcde!?
 b.  (December 31, 1993.)
 c.  8/1/2013
 d.   $690 * 10% = 69 Blah blah
''' 
```

以下正则表达式**有效**并将正则表达式组的内容返回给我：

```
reg = re.compile(r'''
            (?xi)
            \w\.\t*
            ([^\n]+) (?# anything not newline char)
''')

for c in reg.findall(s): print "line:", c
>>>line:    $1000 abcde!?
>>>line:  (December 31, 1993.)
>>>line:    8/1/2013
>>>line:   $690 * 10% = 69 Blah blah 
```

**但**如果内容渗入另一行，则正则表达式**不起作用**。

```
s = '''
   a.   $1000 abcde!? B.     December 
   31, 1993 c.  8/1/2013 D.   $690 * 10% = 
   69 Blah blah
'''
reg = re.compile(r''' 
     (?xi)
     (\w\.\t*\s*)+ (?# e.g. A. or b.)
     (.+)          (?# the alphanumeric content with common symbols)
     ^(?:\1)       (?# e.g. 'not A.' or 'not b.')
     ''')
for c in reg.findall(s): print "line:", c # no matches :(
>>> blank :( 
```

无论是否有换行符分隔内容，我都希望获得相同的匹配。

这就是我尝试使用否定匹配词组的原因。那么关于如何使用正则表达式或其他一些解决方法来解决这个问题的任何想法？

谢谢。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:58:44.093

我*想* 我明白你想要什么。你想分开

```
a.   $1000 abcde!? B.     December 
31, 1993 c.  8/1/2013 D.   $690 * 10% = 
69 Blah blah 
```

进入

*   `a. $1000 abcde!?`
*   `B. December \n31, 1993`
*   `c. 8/1/2013`
*   `D. $690 * 10% = \n69 Blah blah`

对？那么你想要的是负面的前瞻断言：

```
reg = re.compile(r''' 
     (?xs)               # no need for i, but for s (dot matches newlines)
     (\b\w\.\s*)         # e.g. A. or b. (word boundary to restrict to 1 letter)
     ((?:(?!\b\w\.).)+)  # everything until the next A. or b.
     ''') 
```

使用它`findall()`：

```
>>> reg.findall(s)
[('a.   ', '$1000 abcde!? '), ('B.     ', 'December \n   31, 1993 '), 
 ('c.  ', '8/1/2013 '), ('D.   ', '$690 * 10% = \n   69 Blah blah\n')] 
```

如果您不想要这些`a.`零件，请使用

```
reg = re.compile(r''' 
     (?xs)               # no need for i, but for s (dot matches newlines)
     (?:\b\w\.\s*)       # e.g. A. or b. (word boundary to restrict to 1 letter)
     ((?:(?!\b\w\.).)+)  # everything until the next A. or b.
     ''') 
```

# python - 测试集合是否是子集，考虑集合中每个元素的数量（多重性）

> ID：15208369
> 
> 赞同：4
> 
> 时间：2013-03-04T18:24:57.520
> 
> 标签：python, set, subset, multiset, multiplicity

我知道我可以测试 set1 是否是 set2 的子集：

```
{'a','b','c'} <= {'a','b','c','d','e'} # True 
```

但以下也是正确的：

```
{'a','a','b','c'} <= {'a','b','c','d','e'} # True 
```

我如何让它考虑集合中的元素出现的次数，以便：

```
{'a','b','c'}     <= {'a','b','c','d','e'}      # True
{'a','a','b','c'} <= {'a','b','c','d','e'}      # False since 'a' is in set1 twice but set2 only once
{'a','a','b','c'} <= {'a','a','b','c','d','e'}  # True because both sets have two 'a' elements 
```

我知道我可以做类似的事情：

```
A, B, C = ['a','a','b','c'], ['a','b','c','d','e'], ['a','a','b','c','d','e']
all([A.count(i) == B.count(i) for i in A]) # False
all([A.count(i) == C.count(i) for i in A]) # True 
```

但我想知道是否有更简洁的东西`set(A).issubset(B,count=True)`或一种远离列表推导的方法。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T18:49:07.093

如评论中所述，可能的解决方案是[`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
from collections import Counter

def issubset(X, Y):
    return len(Counter(X)-Counter(Y)) == 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T18:39:31.993

对您的问题的简短回答是没有集合操作可以做到这一点，因为[集合的定义](http://en.wikipedia.org/wiki/Set_%28computer_science%29)不提供这些操作。IE 定义您正在寻找的功能将使数据类型不是一个集合。

根据定义，集合具有唯一的、无序的成员：

```
>>> print {'a', 'a', 'b', 'c'}
set(['a', 'c', 'b'])
>>> {'a', 'a', 'b', 'c'} == {'a', 'b', 'c'}
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-20T19:52:22.250

结合以前的答案给出了一个尽可能干净和快速的解决方案：

```
def issubset(X, Y):
    return all(v <= Y[k] for k, v in X.items()) 
```

*   在@A.Rodas 版本中没有创建实例而不是 3（两个参数必须已经是 Counter 类型，因为这是处理多重集的 Pythonic 方式）。
*   一旦谓词被伪造，就提前返回（短路）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:46:36.947

由于@DSM 删除了他的解决方案，我将借此机会提供一个原型，您可以在此基础上进行扩展

```
>>> class Multi_set(Counter):
    def __le__(self, rhs):
        return all(v == rhs[k] for k,v in self.items())

>>> Multi_set(['a','b','c']) <= Multi_set(['a','b','c','d','e'])
True
>>> Multi_set(['a','a','b','c']) <= Multi_set(['a','b','c','d','e'])
False
>>> Multi_set(['a','a','b','c']) <= Multi_set(['a','a','b','c','d','e'])
True
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-22T11:37:49.100

对于那些对多集包含的通常概念感兴趣的人，测试多集包含的最简单方法是使用多集的交集：

```
from collections import Counter

def issubset(X, Y):
    return X & Y == X

issubset(Counter("ab"), Counter("aab"))  # returns True
issubset(Counter("abc"), Counter("aab")) # returns False 
```

这是[幂等半环](https://en.wikipedia.org/wiki/Semiring#Theory)中使用的标准思想。

# php - 在同一位置重复 PHP 包含

> ID：15208370
> 
> 赞同：0
> 
> 时间：2013-03-04T18:25:01.530
> 
> 标签：php, html, loops, include

我正在研究一些 HTML 线框。

有一些 HTML 代码我希望能够重复“X”次。

例如

```
<li>my list item</li> 
```

所以我将该代码放入一个名为“myListItem.php”的单独 PHP 文件中。然后在我的主要 HTML 模板中。我有一些看起来像这样的代码：

```
<ul>
<?php include('myListItem.php');?>
<?php include('myListItem.php');?>
<?php include('myListItem.php');?>
<?php include('myListItem.php');?>
</ul> 
```

这感觉是多余的。

**有没有一种简单的方法可以重复包含同一文件“X”次？**

理想情况下，我可以在我的 HTML 模板中包含以下内容：

```
<ul>
<?php include('myListItem.php'); myItem(4);?>
</ul> 
```

只是弄清楚这些东西，所以我为对许多人来说肯定是一个明显的问题表示歉意。当然请记住，我在现实生活中重复的代码实际上比简单的列表项要长得多，在我的示例中，它比 php 包含自身要短得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:25:58.607

```
for ($i = 0; $i < XXX; $i++) { include('myListItem.php'); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:29:18.890

你是对的——*这是多余的*。根据您的描述，包含同一个文件 4 次是解决此问题的错误方法。

合适的替代方案是：

*   将所有逻辑提取到包含的内容中，以便您可以简单地执行以下操作：

    ```
    <ul>
    <?php include('myListItem.php');?>
    </ul> 
    ```

*   在包含的文件中创建[一个函数](http://php.net/manual/en/functions.user-defined.php)

    ```
    <?php include('myListItem.php');?>
    <!-- other code... -->
    <ul>
    <?php displayListItems(4); ?>
    </ul> 
    ```

无论哪种方式，您只包含一次文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:26:05.957

```
<?php for ($i = 0; $i < 4; $i++) include('myListItem.php'); ?> 
```

# doctrine-orm - 如何从多对多关系中删除注册表 - 教义 2

> ID：15208371
> 
> 赞同：0
> 
> 时间：2013-03-04T18:25:04.970
> 
> 标签：doctrine-orm, many-to-many, entity, zend-framework2

我正在尝试使用学说 2 从我的数据库中删除注册表，但出现以下错误：

```
Catchable fatal error: Argument 1 passed to Doctrine\ORM\Mapping\DefaultQuoteStrategy::getJoinTableName() must be an array, null given, called in /home/triangulum/www/pedal/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php on line 1020 and defined in /home/triangulum/www/pedal/vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/DefaultQuoteStrategy.php on line 86 
```

我有 3 张桌子：

grupo = id，名称

permissao = 身份证，姓名

grupo_permissao = grupo_id，permissao_id

我的实体：

集团：

```
 <?php

namespace User\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="grupo")
 * @ORM\Entity(repositoryClass="User\Entity\GrupoRepository")
 */
class Grupo {

    public function __construct($options=null) {
        Configurator::configure($this, $options); 
        $this->permissoes = new ArrayCollection();
    }

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     * @var int
     */
    protected $id;

    /**
     * @ORM\Column(type="text")
     * @var string
     */
    protected $nome;

    /**
     * @ORM\ManyToMany(targetEntity="User\Entity\Permissao", mappedBy="grupo", cascade={"remove"})
     */
    protected $permissoes;

    public function getPermissoes()
    {
        return $this->permissoes;
    }

    public function getId() {
        return $this->id;
    }

    public function setId($id) {
        $this->id = $id;
    }

    public function getNome() {
        return $this->nome;
    }

    public function setNome($nome) {
        $this->nome = $nome;
    }

    public function toArray()
    {
        return array
        (
            'id' => $this->getId(),
            'nome' => $this->getNome()
        );
    }
}

?> 
```

许可：

```
<?php

namespace User\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="permissao")
 * @ORM\Entity(repositoryClass="User\Entity\PermissaoRepository")
 */
class Permissao {

    public function __construct($options=null) {
        Configurator::configure($this, $options); 
        $this->grupos = new ArrayCollection();

    }

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     * @var int
     */
    protected $id;

    /**
     * @ORM\Column(type="text")
     * @var string
     */
    protected $nome;

     /**
     * @ORM\ManyToMany(targetEntity="User\Entity\Grupo", inversedBy="permissao",  cascade={"persist", "remove"})
     * @ORM\JoinTable(name="grupo_permissao",
      * joinColumns={@ORM\JoinColumn(name="permissao_id", referencedColumnName="id")},
      * inverseJoinColumns={@ORM\JoinColumn(name="grupo_id", referencedColumnName="id")}
      * )
     */
    protected $grupos;

    public function getGrupos() {
        return $this->grupos;
    }
    public function getId() {
        return $this->id;
    }

    public function setId($id) {
        $this->id = $id;
    }

    public function getNome() {
        return $this->nome;
    }

    public function setNome($nome) {
        $this->nome = $nome;
    }

    public function toArray()
    {
        return array
        (
            'id' => $this->getId(),
            'nome' => $this->getNome()
        );
    }
}

?> 
```

消除：

```
 public function delete($id)
    {

        $entity = $this->entityManager->find('User\Entity\Grupo', $id);

        if($entity)
        {
            $this->entityManager->remove($entity);

            $this->entityManager->flush();
            return $id;
        }
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:10:39.943

我认为您在 manyToMany 注释中的`mappedBy`和属性有问题。`inversedBy`它们应该与其他实体的属性名称匹配，`grupos`并且`permissoes`. 尝试这个：

```
/**
 * @ORM\ManyToMany(targetEntity="User\Entity\Permissao", mappedBy="grupos", cascade={"remove"})
 */
protected $permissoes;

/**
 * @ORM\ManyToMany(targetEntity="User\Entity\Grupo", inversedBy="permissoes", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="grupo_permissao",
 * joinColumns={@ORM\JoinColumn(name="permissao_id", referencedColumnName="id")},
 * inverseJoinColumns={@ORM\JoinColumn(name="grupo_id", referencedColumnName="id")}
 * )
 */
protected $grupos; 
```

# python - P2P 中的 Python 音频流

> ID：15208372
> 
> 赞同：0
> 
> 时间：2013-03-04T18:25:08.537
> 
> 标签：python, audio, streaming, p2p

我想做一个有点像 Skype 的宠物项目，在 P2P 中的两台计算机之间发送音频，python 中存在什么模块来创建这样的项目，音频流在理论上是如何工作的？两台计算机之间的数据如何实时传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:47:46.560

您可以使用 python 来执行此操作，但也请保持简单，我会将问题分解为更小的可管理部分。

*   `audio` 有很多 python 音频模块，看看[这里](http://wiki.python.org/moin/Audio/)我猜你会想要一个可以处理流而不是`.mp3`文件`.wav`的。

*   `P2P` 您需要了解 TCP/IP - 特别是`socket`可以帮助解决此问题（[文档](http://docs.python.org/2/library/socket.html)），但它可能非常复杂。

这听起来像一个有趣的项目，祝你好运！

# deployment - 使用 wix 部署 SqlLocalDB.msi

> ID：15208375
> 
> 赞同：2
> 
> 时间：2013-03-04T18:25:22.460
> 
> 标签：deployment, wix, localdb

我想为我的应用程序使用 SqlLocalDB。该应用程序使用 WiX 进行部署。现在，我正在寻找第一次安装我的应用程序时安装 SqlLocalDB 的方法。我怎样才能做到这一点？用我的应用程序部署一些二进制文件就足够了吗，还是我必须安装整个 SqlLocalDB.msi？- 当需要安装整个 msi 时 - 我如何使用 WiX 来做到这一点？- 目标是，结果是一个单独的 msi 文件，其中包含安装我的应用程序所需的所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:56:30.373

我不知道 LocalDB 的私有部署模型。如果 WiX 是您选择的工具，则需要使用它的 Burn 引导程序功能来安装 LocalDB 作为先决条件。结果将是一个安装 2 个 MSI 的 EXE。

# javascript - javascript日期格式错误

> ID：15208382
> 
> 赞同：-1
> 
> 时间：2013-03-04T18:25:48.920
> 
> 标签：javascript, jquery

我有一个函数可以从 jQuery 日历中获取日期，然后将其格式化为年月日。

我为日历获取的日期是 dateString 的 03/04/2013，然后我希望它采用 2013-03-04 的格式。但是我得到的 start_date 日期是 2013-21-04。奇怪，因为它一直没问题，我想。

```
function makeUpDates() {
    // concantenate values to date_start and date_end hidden inputs
    var dateString = document.getElementById('date').value, date = new Date(dateString);
    document.getElementById('date_start').value = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + ("0" + date.getDate()).slice(-2);
    var numDays = document.getElementById('slider').value;
    date.setDate(date.getDate() + parseInt(numDays));
    var dateEnd = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + ("0" + date.getDate()).slice(-2);
    document.getElementById('date_end').value = dateEnd;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:31:51.377

您可以像这样转换日期

```
//will take a date in the form MM/DD/YYYY and return YYYY-MM-DD
function convertDate(dateString){
    var dateparts = dateString.split("/");
    var newDate = dateparts[2]+"-"+dateparts[0]+"-"+dateparts[1]
    return newDate;
} 
```

此外，对于更一般的日期处理，您可以查看moment.js，在[this answer](https://stackoverflow.com/a/10119138/1424361) to an more general question on this topic中提到

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:35:01.207

> 开始日期是 2013-21-04

可能你忘记了`date.getMonth()+1`字符串连接中的括号，产生`21`而不是`3`. 不过，它似乎已在您发布的代码段中得到修复。

# java - 在 AJax 中提交 Spring 表单始终为 null

> ID：15208386
> 
> 赞同：0
> 
> 时间：2013-03-04T18:26:03.663
> 
> 标签：java, ajax, spring, jsp

我正在尝试通过 ajax 提交 spring 表单，但表单中的值始终为 null（实际表单不为 null）。

这就是我从 JSP 发送表单的方式：

```
$('#fSystemSave').click(function() {
    $.post("/live-application/systemSave", {systemForm: $("#systemForm").serialize()}, displayModifiedSystemResults, "html");
}); 
```

这是表格：

```
<form:form id="systemForm" 
    method="post" action="/live-application/systemSave"
commandName="systemForm">
    <tr>
        <td colspan="1" align="left">
            <strong>SYSTEM SETTINGS</strong>
        </td>
    </tr>
    <tr>                            
        <td valign="top">Name:&nbsp;</td>
        <td valign="top"><form:input path="fName" size="20" />&nbsp;</td>
</tr>
    <tr>
         <td valign="top" align="left">
            <button type="button" id="fSystemSave">Save</button>
        </td>
    </tr>
</form:form> 
```

这是 Java 控制器端：

```
@RequestMapping(value = "/systemSave", method = RequestMethod.POST)
    public void saveSystem(@ModelAttribute("systemForm") SystemForm systemForm, OutputStream outputStream) throws IOException {

      logger.info("Save System1: " + systemForm);
      logger.info("Save System2: " + systemForm.getfName());
} 
```

所以'Save System1'返回一个Object tostring，'Save System2'返回null。谁能发现我做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:30:32.737

我不知道 Spring 但我认为`{systemForm: $("#systemForm").serialize()}`应该只是`$("#systemForm").serialize()`.

# android - 添加 category.DEFAULT 后如何使后退按钮起作用

> ID：15208391
> 
> 赞同：0
> 
> 时间：2013-03-04T18:26:12.950
> 
> 标签：android, android-intent, homescreen

我有一个应用程序，我希望它用默认的主屏幕替换它，这样每当手机在启动时启动或按下主屏幕按钮时。为此，我使用了意图过滤器。

```
<intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.LAUNCHER"/>
    <category android:name="android.intent.category.HOME"/>
    <category android:name="android.intent.category.DEFAULT"/>
</intent-filter> 
```

但是，在这种情况下，后退按钮不起作用，我无法返回原来的主屏幕。有什么办法，我可以让应用程序在手机启动或按下主页按钮时出现，当按下后退按钮时，出现默认主屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:32:27.883

```
Try overriden function OnBackPressed()

 @Override
    public void onBackPressed() {

          moveTaskToBack(true);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:47:29.007

```
public boolean dispatchKeyEvent(KeyEvent event){ 
     int action = event.getAction();
     int keyCode = event.getKeyCode();
         switch (keyCode) {
         case KeyEvent.KEYCODE_BACK:                            
                if (action == KeyEvent.ACTION_UP)
                //DO something

                    return true;

           default:
             return super.dispatchKeyEvent(event);
                }
     } 
```

# java - 在 jsf 中单击第一个按钮后，未在第二个、第三个 h:commandbutton 上调用操作方法

> ID：15208393
> 
> 赞同：0
> 
> 时间：2013-03-04T18:26:16.520
> 
> 标签：java, jsf

我有一个打算用来编辑用户信息的 JSF 页面。编辑用户所需的所有组件都包含在同一个页面中，并且我正在使用 render 属性来确定应该呈现哪些组件。呈现第一个面板组，当您输入用户登录名并单击按钮时，一切正常，显示第二个面板组，您可以在文本字段中更改用户信息。问题在于单击手风琴面板第一个选项卡中的按钮，它不起作用。我已经尝试过请求范围和查看范围，并且在使用任何一个时都遇到了同样的问题。

```
 <f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            <title></title>
        </f:facet> 
    </h:head>
    <h:body styleClass="pageDefaultBGC">
            <p:layout fullPage="true">
                <f:facet name="last">
                    <h:outputStylesheet library="css" name="discovery.css"></h:outputStylesheet>
                </f:facet>
                <p:layoutUnit styleClass="headerDiv" position="north" size="100">
                    <h:graphicImage library="images" name="header.jpg"></h:graphicImage>
                </p:layoutUnit>
                <p:layoutUnit styleClass="navDiv" position="west" size="200">
                    <h:outputText value="Navigation Menu"></h:outputText>
                    <br/>
                    <hr/>
                    <h:outputLink styleClass="navLink" value="index.xhtml">Admin Home</h:outputLink>
                    <br/>
                    <h:outputLink styleClass="navLink" value="addNewUser.xhtml">Add New User</h:outputLink>
                    <br/>
                    <h:outputLink styleClass="navLink" value="edituser.xhtml">Edit User</h:outputLink>
                    <br/>                    
                </p:layoutUnit>
                <p:layoutUnit position="center" id="main">
                    <h:form id="editForm">
                        <h:panelGroup rendered="#{!adminManagedBean.editingUser}">
                            <h2>Edit User Account</h2>
                            <h:outputLabel for="useredit" value="Enter User's Name:"></h:outputLabel>
                            <h:inputText id="useredit" value="#{adminManagedBean.editUserLogin}" required="true"></h:inputText>
                            <br/><br/>                  
      THIS BUTTON WORKS!---><h:commandButton value="Submit" action="#{adminManagedBean.startUserEdit()}"></h:commandButton>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{adminManagedBean.editingUser}">
                            <h:outputText value="Editing User:"></h:outputText>
                            <p:dataTable value="#{adminManagedBean.editUser}" var="u">
                                <p:column styleClass="dataTableHeader" headerText="Full Name">#{u.firstName}&nbsp;#{u.lastName}</p:column>
                                <p:column styleClass="dataTableHeader" headerText="Username">#{u.login}</p:column>
                                <p:column styleClass="dataTableHeader" headerText="Phone">#{u.phone}</p:column>
                                <p:column styleClass="dataTableHeader" headerText="Email">#{u.email}</p:column>
                                <p:column styleClass="dataTableHeader" headerText="Agency ID">#{u.agencyId}</p:column>
                            </p:dataTable>
                            <br/>
                            <h:outputText value="User's Current Roles"></h:outputText>
                            <ul>
                                <ui:repeat value="#{adminManagedBean.editUsersRoles}" var="cr">
                                    <li><h:outputText value="#{cr}"></h:outputText></li>
                                </ui:repeat>
                            </ul>
                            <br/>
                            <h:outputText value="Select an item to edit using the menu below"></h:outputText>
                            <br/>
                            <p:accordionPanel>
                                    <p:tab title="Edit User's Name" titleStyleClass="accordianTitleStyle">
                                            <h:panelGrid styleClass="panelGridStyle1" columns="2" cellpadding="10">
                                                <h:outputText value="First Name:"></h:outputText>
                                                <h:inputText value="#{adminManagedBean.editUser.firstName}"></h:inputText>
                                                <h:outputText value="Last Name:"></h:outputText>
                                                <h:inputText value="#{adminManagedBean.editUser.lastName}"></h:inputText>
                  THIS BUTTON DOESN'T WORK----><h:commandButton value="Save Changes" action="#{adminManagedBean.saveNameChange()}"></h:commandButton>
                                                <h:commandButton value="Cancel Changes"></h:commandButton>    
                                            </h:panelGrid>
                                    </p:tab> 
```

值为“Save Changes”的命令按钮是有问题的按钮，因为从未调用过 bean 方法。

```
@ManagedBean
@ViewScoped
public class AdminManagedBean implements Serializable {
public String saveNameChange(){
    log.info("save Name called");
    this.editUser = ssb.updateUser(editUser);
    return "edituser";
} 
```

单击按钮时未调用方法“saveNameChange”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:07:51.027

在编辑页面和 bean 以在 SO 上发布的过程中，发现了问题，它与 JSF 组件无关。问题有两个方面，

1) 开发人员更改了数据库中表中字段的大小，但未更改与该表关联的实体类中的字段大小，这导致验证抛出错误消息。2) 正在使用的样式阻止显示来自验证的错误消息。

解决方案：我更新了实体类，更正了样式，按钮现在可以正常工作。

# java - JRadionButton 自动取消选择

> ID：15208396
> 
> 赞同：1
> 
> 时间：2013-03-04T18:26:22.317
> 
> 标签：java, swing, jradiobutton

我有一个包含两个 JRadioButton 的 jframe。

```
public class jradioButtontest extends javax.swing.JFrame {

public jradioButtontest() {
    initComponents();
}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jRadioButton1 = new javax.swing.JRadioButton();
    jRadioButton2 = new javax.swing.JRadioButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jRadioButton1.setText("jRadioButton1");

    jRadioButton2.setText("jRadioButton2");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(198, 198, 198)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jRadioButton2)
                .addComponent(jRadioButton1))
            .addContainerGap(203, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(80, 80, 80)
            .addComponent(jRadioButton1)
            .addGap(18, 18, 18)
            .addComponent(jRadioButton2)
            .addContainerGap(225, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new jradioButtontest().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JRadioButton jRadioButton1;
private javax.swing.JRadioButton jRadioButton2;
// End of variables declaration
} 
```

我想当我选择第一个 JRadioButton 时，应该取消选择其他 JRadioButton。我用现成的jframe，怎么改netbeans生成的代码？这是怎么做的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:29:46.810

默认情况下，会在自己的 ButtonGroup 中创建一个新的 JRadioButton，这意味着它们都可以独立选择。

如果您希望链接两个按钮以便一次只能选择一个，则需要添加：

```
ButtonGroup group = new ButtonGroup();
group.add(jRadioButton1);
group.add(jRadioButton2); 
```

构建按钮之后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T18:27:50.520

将 2 添加`JRadioButtons`到单个`javax.swing.ButtonGroup`实例中。

请参阅：[如何使用 ButtonGroup 组件](http://docs.oracle.com/javase/tutorial/uiswing/components/buttongroup.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:40:19.410

使用 ButtonGroup ：

```
ButtonGroup buttongroup = new ButtonGroup();
buttongroup.add(...); 
```

# google-app-engine - 部署到具有可信连接的 appengine？

> ID：15208403
> 
> 赞同：1
> 
> 时间：2013-03-04T18:26:32.690
> 
> 标签：google-app-engine

是否可以将应用程序部署到 google appengine 而无需每次都询问电子邮件/密码，使用类似于 ssh 受信任连接使用的架构（使用存储的安全密钥）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:47:30.477

这就是我一直在寻找的东西：

[https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth)

基本上，您将此参数添加到命令行：

```
appcfg.py --oauth2 update myapp/ 
```

它重定向到浏览器，您在那里进行身份验证并存储一个令牌，因此您无需每次都登录

# php - SQL查询语句表连接

> ID：15208405
> 
> 赞同：2
> 
> 时间：2013-03-04T18:26:37.583
> 
> 标签：php, mysql, sql

我的 SQL 查询有问题，返回的结果集不是我所期望的。

我有这三个表，我试图关联。

**events_detail**

```
 __________________
| ID | start_date |
| 1  | 2012-08-09 |
| 2  | 2013-02-13 |
| 3  | 2012-12-12 |
| 4  | 2013-01-21 |
| 5  | 2012-12-25 |
------------------- 
```

其中 ID 是主键

**events_category_relationship**

```
__________________________    
| ID | event_id | cat_id |
| 1  |     1    |    1   |
| 2  |     2    |    4   |
| 3  |     3    |    2   |
| 4  |     4    |    2   |
| 5  |     5    |    3   |
-------------------------- 
```

其中 ID 是主键

**events_category_detail**

```
 __________________________________
| ID | name   | description        | 
| 1  | Europe | Kings and castles! |
| 2  | USA    | Freedoms           |
| 3  | China  | Made in China      |
| 4  | UK     | Big Brother        |
------------------------------------ 
```

其中 ID 是主键

我需要做的是从每个类别中仅获取 1 个事件，并按最早出现的日期排序。所以我应该期待我的结果如下

**结果集**

```
________________________________________________________________
| e_id | start_date | c_id | category_name | category_desc      |
|   1  | 2012-08-09 |   1  |     Europe    | Kings and castles! |
|   3  | 2012-12-12 |   2  |     USA       | Freedoms           |
|   5  | 2012-12-25 |   3  |     China     | Made in China      |
|   2  | 2013-02-13 |   4  |     UK        | Big Brother        |
----------------------------------------------------------------- 
```

我尝试的 SQL 查询如下所示

```
SELECT e.id, e.start_date, c.category_name, c.category_desc
FROM events_detail e
JOIN events_category_relationship r ON r.event_id = e.id
JOIN events_category_detail c ON c.id = r.cat_id
ORDER BY date(e.start_date) 
```

这只是连接 3 个表并按日期顺序返回结果。我坚持的是使每个类别中只有一个像上面所需的结果集一样显示。我曾尝试使用 DISTINCT c.category_name 和 GROUP BY c.category_name，但它们都不起作用。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:33:29.397

您将需要使用子查询来获取`min(start_date)`for each`name`和`description`. 然后，您将使用此结果连接回您的`events_details`表以获取`id`与子查询中的数据相关联：

```
SELECT e.id, 
  d.start_date, 
  d.name, 
  d.description
FROM events_detail e
INNER JOIN
(
  select min(e.start_date) Start_date, 
    c.name, 
    c.description
  from events_detail e
  INNER JOIN events_category_relationship r 
    ON r.event_id = e.id
  INNER JOIN events_category_detail c 
    ON c.id = r.cat_id
  group by c.name, c.description
)  d
  on e.start_date = d.Start_date
ORDER BY date(e.start_date) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/4692a/7)

# android - 在 Android 中实现 Touch Listener 时出现 NULL 指针异常

> ID：15208408
> 
> 赞同：1
> 
> 时间：2013-03-04T18:26:40.367
> 
> 标签：android

我正在尝试通过 Drag and Touch Listeners 创建简单的应用程序。但是当我通过内部类将 TouchListener 设置为 TextView 控件时，得到`NullPointerException`： 这是代码。

```
public class MainActivity extends Activity 
{

private TextView option1,  choice1; 

protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    option1 = (TextView)findViewById(R.id.option_1);        
    setContentView(R.layout.activity_main);
        option1.setOnTouchListener(new ChoiceTouchListener());  [NULLPOINTER]   
}

private final class ChoiceTouchListener implements OnTouchListener
{

    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        // TODO Auto-generated method stub

        if(arg1.getAction() == MotionEvent.ACTION_DOWN)
        {

ClipData clipdata = ClipData.newPlainText("","");
DragShadowBuilder shadowbuilder = new DragShadowBuilder(arg0);
arg0.startDrag(clipdata, shadowbuilder, arg0, 0);
return true;
        }
        else
        {
        return false;
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T18:27:30.270

改变：

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    option1 = (TextView)findViewById(R.id.option_1);        
    setContentView(R.layout.activity_main);
    option1.setOnTouchListener(new ChoiceTouchListener());   
} 
```

至

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    option1 = (TextView)findViewById(R.id.option_1);  
    option1.setOnTouchListener(new ChoiceTouchListener());   
} 
```

`findViewById()`在当前膨胀的布局中查找具有提供的 ID 的视图。但是，您尝试`findViewById()`在调用之前使用`setContentView()`，这会导致`option1`获取空值，因为当前没有膨胀的布局。重新排序语句应该可以解决这个问题

# c# - ListBox.DataSource 集合与 ListBox.Items 的区别？

> ID：15208411
> 
> 赞同：7
> 
> 时间：2013-03-04T18:26:55.673
> 
> 标签：c#, winforms

我正在动态创建一个 Winforms 多选 ListBox 并将其添加到流程面板控件中。我从我创建的对象绑定数据源，并验证 DataSource 实际上有大约 14 个元素。当我这样做时，我会抛出`listBox.SetSelected(0, true)`一个错误。`System.ArgumentOutOfRangeException`

我已经确定问题是，虽然 DataSource 有 14 个元素，但 Item 集合没有 (0)，因此引发了异常。我的问题是为什么这两个彼此不同，为什么我不简单地将数据源中的 foreach 项目添加到项目集合中？

以下是我到目前为止的代码：

```
case InsertableItemParameter.ParameterType.ListBox:
    //note: two-way bindings are not possible with multiple-select listboxes
    Label lblListBox = new Label();
    lblListBox.Text = param.DisplayText;
    ListBox listBox = new ListBox();
    listBox.DataSource = param.Values;
    listBox.DisplayMember = "Value";
    listBox.SelectionMode = SelectionMode.MultiExtended;
    listBox.Size = new System.Drawing.Size(flowPanel.Size.Width - lblListBox.Size.Width - 10, 100);
    listBox.SetSelected(0, true);   //will throw argument out of range exception here!
    listBox.SetSelected(1, true);
    flowPanel.Controls.Add(lblListBox);
    flowPanel.Controls.Add(listBox);
    flowPanel.SetFlowBreak(listBox, true);
    break; 
```

* * *

下面是我尝试和工作的另一种解决方案，但为什么我还要使用 DataSource 与 Items 集合？

```
case InsertableItemParameter.ParameterType.ListBox:
    //note: two-way bindings are not possible with multiple-select listboxes
    Label lblListBox = new Label();
    lblListBox.Text = param.DisplayText;
    ListBox listBox = new ListBox();
    //listBox.DataSource = param.Values;
    listBox.DisplayMember = "Value";
    listBox.SelectionMode = SelectionMode.MultiExtended;
    listBox.Size = new System.Drawing.Size(flowPanel.Size.Width - lblListBox.Size.Width - 10, 100);
    listBox.BeginUpdate();
    foreach (String paramater in param.Values)
    {
        listBox.Items.Add(paramater);
    }
    listBox.EndUpdate();
    listBox.SetSelected(0, true);
    listBox.SetSelected(1, true);
    flowPanel.Controls.Add(lblListBox);
    flowPanel.Controls.Add(listBox);
    flowPanel.SetFlowBreak(listBox, true);
    break; 
```

* * *

**回答**： 感谢所有的回复。这里的问题是可见性和 win-form 渲染。虽然 DataSource 和 Items 集合之间的差异并没有真正解决（除了少数人），但我的问题的真正根源是通过`SetSelected()`在表单完成绘制后调用该方法来解决的。这在我的应用程序设计中引起了很多我必须解决的问题，但这就是问题所在。请参阅我标记为答案的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:51:40.290

您的问题可能出在其他地方，因为此代码可以正常工作：

```
string[] ds = {"123","321"};
listBox1.DataSource = ds;
listBox1.SetSelected(1, true);
MessageBox.Show(listBox1.Items.Count.ToString()); //returns 2 
```

在一个全新的 C# 项目中进行了测试，`listBox1`表单上有一个 put，上面的代码位于`Form_Load`.

**编辑：**我没有意识到`ListBox`在运行时创建 a 可能会有所作为，尤其是因为何时设置选定项目很重要。此代码有效：

```
string[] ds = { "123", "321" };
ListBox lst = new ListBox();
lst.DataSource = ds;
lst.Size = new Size(100,100);            
this.Controls.Add(lst);
//make sure to call SetSelected after adding the ListBox to the parent
lst.SetSelected(1, true); 
```

感谢@Brad 指出这一点。所以回到原来的问题，替换这个：

```
listBox.SetSelected(0, true);
listBox.SetSelected(1, true);
flowPanel.Controls.Add(lblListBox);
flowPanel.Controls.Add(listBox); 
```

有了这个：

```
flowPanel.Controls.Add(lblListBox);
flowPanel.Controls.Add(listBox);
listBox.SetSelected(0, true);
listBox.SetSelected(1, true); 
```

它应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:50:33.100

您有两种选择如何让数据在`ListBox`. 您可以设置`DataSource`或您可以通过手动添加项目`listBox.Items.Add(paramater)`。你不能两者都做，因为它们会互相踩踏，因此你的错误

```
...cannot add items to the Item collection when DataSource is set. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:43:58.757

来自[MSDN 的项目](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)

> 此属性使您能够获取对当前存储在 ListBox 中的项目列表的引用。使用此引用，您可以添加项目、删除项目并获取集合中项目的计数。有关可以使用项目集合执行的任务的详细信息，请参阅 ListBox.ObjectCollection 类参考主题。

来自[MSDN的数据源](http://msdn.microsoft.com/en-us/librarysystem.windows.forms.listcontrol.datasource.aspx)

> 实现 IList 或 IListSource 接口的对象，例如 DataSet 或 Array。默认为空

我不是这方面的专家，但从我读到的内容看来，Items 允许您添加/修改列表中的内容，而 Datasource 检索和设置内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T18:53:50.747

我不确定为什么有两个不同的集合。该`Items`属性似乎更简单。

我找到了异常的原因：显然你必须按照特定的顺序做事，像这样：

```
 //init the listbox
    var listBox1 = new ListBox();
    listBox1.Location = new System.Drawing.Point(122, 61);
    listBox1.Size = new System.Drawing.Size(205, 147);
    listBox1.SelectionMode = SelectionMode.MultiExtended;
    Controls.Add(listBox1); //<-- point of interest

    //then set the DataSource
    listBox1.DataSource = lst;
    listBox1.DisplayMember = "Name";
    listBox1.ValueMember = "Age";

    //then set the selected values
    listBox1.SetSelected(0, true);
    listBox1.SetSelected(1, true); 
```

我的`Test`班级看起来像这样：

```
public class Test
{
    private static Random r = new Random();
    public Test (string name)
    {
        Name = name;
        Age = r.Next(16, 45);
    }

    public string Name { get; set; }

    public int Age{ get; set; }
} 
```

并`lst`声明如下：

```
 var lst = new List<Test>()
                  {
                      new Test("jens"),
                      new Test("Tom"),
                      new Test("John"),
                      new Test("Don"),
                      new Test("Jenny"),
                  }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T18:55:28.963

仅当控件可见时，才会从 DataSource 填充 Items 集合。由于您动态创建控件，因此它不会添加到父控件，因此不可见。因此，您首先需要有一个在屏幕上可见的控件。在您的代码中，您设置 DataSource ，然后在您`Control`可见之前设置所选项目，`FlowChart`因为它没有添加到`Parent`控件中。您应该更改语句的顺序。您应该添加`listBox`到`FlowPanel`将填充 Items 集合`DataSource`，您可以在其上执行`SetSelected()`方法。试试这个并注意初始代码执行的更改顺序：

```
ListBox listBox = new ListBox();
listBox.DataSource = param.Values;
listBox.DisplayMember = "Value";
listBox.SelectionMode = SelectionMode.MultiExtended;
listBox.Size = new System.Drawing.Size(flowPanel.Size.Width - lblListBox.Size.Width - 10, 100);
flowPanel.Controls.Add(lblListBox);
flowPanel.Controls.Add(listBox); //notice that you first add the listBox to the flowChart
listBox.SetSelected(0, true);   //and then you have items in the Items collection which you can select
listBox.SetSelected(1, true); 
```

# html - Css html全出血和居中

> ID：15208426
> 
> 赞同：0
> 
> 时间：2013-03-04T18:27:40.557
> 
> 标签：html, css, center

我正在尝试从头开始学习 html/css 并开始了一个小项目。我在这里研究了这些主题，但我发现它有点高级，希望有人可以一步一步地向我解释，这样我就可以从中学到一些东西:)

挑战 1：我正在尝试垂直获得全出血颜色。问题是我在颜色区域周围有一个白色框架。我已经使用下面的代码让它在左侧和顶部边缘到边缘。

```
margin-right: -8px;
margin-top: -8px; 
```

但它不会一直走到右侧的边缘。我将在下面发布我的 html 和 css。任何帮助将不胜感激 ：）

```
HTML
<div id="feature1">
<div id="feature1_cont">Content for New Div Tag Goes Here</div>
</div>

CSS
#feature1 { 
height: 400px;
width: 100%;
float: left;
background-color: #0CC;
margin-left: -8px;
margin-right: -8px;

}

#feature1_cont {
font-family: Arial, Helvetica, sans-serif;
font-size:36px;
margin-top: 7%;
margin-left: 7%;
min-width: 300px;
max-width: 600px;
background-color: #0F9;

} 
```

挑战 2：我在一个 div 中也有 3 个 div。我想让它们居中，以便移动并始终居中。但我只能让他们留在左边。代码如下

```
CSS
#feature2 { 
width: 100%;
heigt: 100%;
float: left;
background-color: #C96;
margin-left: -8px;
margin-right: -8px;

}

#feature2_cont {
width: 400px;
height: 400px;
background-color: #36F;
margin-top: 5%;
margin-left: 5%;
margin-bottom: 5%;
float: left;

}

HTML
<div id="feature2">
<div id="feature2_cont">Content for New Div Tag Goes Here</div>
<div id="feature2_cont">Content for New Div Tag Goes Here</div>
<div id="feature2_cont">Content for New Div Tag Goes Here</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:36:01.263

**挑战一：**

删除负边距`#feature1`并添加`* { margin: 0; padding: 0; }`到 CSS 的顶部

**挑战二：**

删除`float: left;`并添加`margin: 0 auto;`到`#feature2_cont`

# php - 将值列出到数组中

> ID：15208435
> 
> 赞同：0
> 
> 时间：2013-03-04T18:27:53.240
> 
> 标签：php, arrays, list, csv

我对php相当陌生，所以请原谅我的无知......：P

我有以下代码：

```
<?php
$fh = fopen("../filename.csv", "r");
while (list($siteid, $sitename, $scheduled, $arecords, $crons, $sslintf, $customip, $psccjobs, $odbc, $sitesize, $dbsize, $nfssize, $fasize, $siteclass, $dbexport, $chatver, $socintf, $sitemode, $mailboxes, $mailfiles, $oesmtp) = fgetcsv($fh, 1024, ";")) {
    echo "<p>$siteid, $sitename, $scheduled, $arecords, $crons, $sslintf, $customip, $psccjobs, $odbc, $sitesize, $dbsize, $nfssize, $fasize, $siteclass, $dbexport, $chatver, $socintf, $sitemode, $mailboxes, $mailfiles, $oesmtp</p>";
}
?> 
```

我想将每一行变量添加到一个数组中......

即使有更好的方法，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:30:04.500

gah....为什么不简单

```
while($row = fgetcsv($fh)) {
    echo "<p>", implode(', ', $row), "</p>";
} 
```

如果要将每一行存储在数组中，则

```
$data = array();
while($row = fgetcsv($fh)) {
    echo "<p>", implode(', ', $row), "</p>";
    $data[] = $row;
} 
```

# asp.net-mvc - 如何在 Razor 中使用 ReportViewer 控件？

> ID：15208437
> 
> 赞同：5
> 
> 时间：2013-03-04T18:28:03.380
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, reporting-services

我见过很多人说要使用 iframe 或新页面来显示 ReportViewer 控件。有没有办法在不使用 iframe 的情况下将控件与我的页面的其余部分内联显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T18:28:03.380

如果`.ascx`用户控件从`System.Web.Mvc.ViewUserControl`.

在这种情况下，您可以在文件夹中创建一个`ASCX`包含您的`ReportViewer`控件和必需项`ScriptManager`的`View\Controller`文件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ReportViewerControl.ascx.cs" Inherits="MyApp.Views.Reports.ReportViewerControl" %>
<%@ Register TagPrefix="rsweb" Namespace="Microsoft.Reporting.WebForms" Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" %>

<form id="form1" runat="server">
<div>
    <asp:ScriptManager ID="scriptManager" runat="server" EnablePartialRendering="false" />
    <rsweb:ReportViewer Width="100%" Height="100%" ID="reportViewer" runat="server" AsyncRendering="false" ProcessingMode="Remote"> 
        <ServerReport />
    </rsweb:ReportViewer> 
</div>
</form> 
```

在代码隐藏中，确保在`Page_Init`;中包含以下内容 否则，您将无法在报告视图中使用任何选项：

```
protected void Page_Init(object sender, EventArgs e)
{
    // Required for report events to be handled properly.
    Context.Handler = Page;
} 
```

您还想确保您的控件继承自`System.Web.Mvc.ViewUserControl`：

```
public partial class ReportViewerControl : ViewUserControl 
```

要使用此控件，您可以在 Razor 页面中执行以下操作：

```
@Html.Partial("ReportViewerControl", Model) 
```

`Page_Load`然后，您可以像往常一样在控件中设置 ReportViewer 。您将可以访问`object`named `Model`，您可以将其转换为您发送的模型类型，然后使用：

```
ReportViewParameters model = (ReportViewParameters)Model; 
```

# highcharts - 如何旋转极坐标图？

> ID：15208458
> 
> 赞同：1
> 
> 时间：2013-03-04T18:29:29.783
> 
> 标签：highcharts

我想要一个极坐标图（带有 highcharts 库），但我需要将图表旋转 45º。我有以下基本脚本：

```
$(function () {

var interval = 90;
var startAngle = 0;

window.chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        polar: true,
        margin: 60
    },
    title: {
        text: 'Style of thought',
    },
    pane: {
        startAngle: startAngle
    },
    xAxis: {
        tickmarkPlacement: 'on',
        startOnTick: true,
        tickInterval: interval,
        min: 0,
        max: 360
    },
    yAxis: {
        min: 0,
        max: 100
    },
    plotOptions: {
        series: {
            pointStart: 0,
            pointInterval: interval
        },
        column: {
            pointPadding: 0,
            groupPadding: 0
        }
    },
    series: [
        {
            type: 'area',
            name: 'Luis',
            data: [40, 60, 35, 89]
        }, {
            type: 'line',
            name: 'Media de comunidad',
            data: [60, 75, 15, 52]
        }]
    });
}); 
```

[jsfiddle 中](http://jsfiddle.net/CL27V/1/)的示例和图表很好。

我需要将图表旋转 45º，为此我将 startAngle 的值更改为 45

```
$(function () {

var interval = 90;
var startAngle = 45;

window.chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        polar: true,
        margin: 60
    },
    title: {
        text: 'Style of thought',
    },
    pane: {
        startAngle: startAngle
    },
    xAxis: {
        tickmarkPlacement: 'on',
        startOnTick: true,
        tickInterval: interval,
        min: 0,
        max: 360
    },
    yAxis: {
        min: 0,
        max: 100
    },
    plotOptions: {
        series: {
            pointStart: 0,
            pointInterval: interval
        },
        column: {
            pointPadding: 0,
            groupPadding: 0
        }
    },
    series: [
        {
            type: 'area',
            name: 'Luis',
            data: [40, 60, 35, 89]
        }, {
            type: 'line',
            name: 'Media de comunidad',
            data: [60, 75, 15, 52]
        }]
});
}); 
```

[jsfiddle 中](http://jsfiddle.net/CL27V/)的示例 2，现在图表很糟糕。如果你看到它，圆的中心与圆周的距离不是等距的。

对这个问题有任何想法吗？

非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:09:06.833

它看起来像一个错误，所以我在这里向我们的开发人员报告：[https ://github.com/highslide-software/highcharts.com/issues/1561](https://github.com/highslide-software/highcharts.com/issues/1561)

感谢您的建议

# assembly - 如何存储未知数量的数字

> ID：15208459
> 
> 赞同：1
> 
> 时间：2013-03-04T18:29:32.270
> 
> 标签：assembly, 68000

我想要做的是从一个只有正整数的文件中读取，然后对整数进行排序并输出它们。

问题是我不知道我试图从中读取的文件有多少行（每行都有一个数字）。

即使我不知道会有多少数字，有没有办法将数字存储在地址/数据寄存器中？

编辑：将解释更多。数据文件的输入可能少于 14 个，问题是，如何在不对每个单独的寄存器进行硬编码的情况下将 <14 个数字放入不同的寄存器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:46:51.020

如果您正在读取文件，操作系统将为您提供“文件结束检查”。如果逐行阅读，很容易数行；EndOfFile 检查为真时行计数器所说的总行数。

要*存储*这组数字，您可能需要一个足够大的连续存储块。您可以提前确定最大大小，并简单地静态声明一个足够大的缓冲区。

另一种方法是动态分配内存（请参阅对 Malloc 的调用或操作系统提供的类似内容）以容纳比您期望的更大的内存量，并将值填充到该空间直到它满为止。如果文件还有更多，分配一个更大的块，复制从旧块收集的值，释放旧块，然后继续。一个简单的规则是最初分配您认为是 2 sigma 乘以您期望的平均值的数量（例如，如果您认为文件通常包含 100 个值，您可能最初分配 150 个插槽的缓冲区）以处理大多数情况初始分配。如果您需要重新分配，则将您分配的最后一个缓冲区的大小加倍（例如，切换到 300、600、...）。这使得重新分配开销非常低。

第三种选择是在一组固定大小的缓冲区中收集您的值，例如，为每个新块分配 100 个插槽）并在您阅读时填充它们。您现在有一组缓冲区（您可以将它们链接到一个线性列表中，或者使用上一段中的技术构建一个数组来跟踪它们）。这有使你的排序复杂化的缺点，所以我认为这不是最好的方法。

# java - 将字符串形式的整数转换为字符八位字节

> ID：15208463
> 
> 赞同：2
> 
> 时间：2013-03-04T18:29:45.527
> 
> 标签：java, encoding, ascii

我需要一些有关 Java 程序的帮助。

我正在尝试获取一个包含整数的字符串并将其转换为更紧凑的存储格式，即将打印到文件中的几个八位字节字符。读取文件时，它应该能够获取字符并组合它们的值以获取原始 int 。有没有办法做到这一点？还是我误解了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:36:45.697

使用`Integer.toOctalString(Integer.parseInt([String Value]))`. 这会给你一个八进制字符串。要取回整数，请使用`Integer.parseInt([Octal string],8);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:31:19.583

尝试

```
Integer.valueOf(yourstring) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:36:02.463

你可以使用

```
public static String toHexString(int i) 
```

和

```
 public static int parseInt(String s, int radix) 
```

以 16 为基数作为将字符串“压缩”为十六进制的一种方式。

或者，如果文件是二进制文件，您可以只对整数本身使用序列化方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:42:31.433

将字符串转换为 int 使用

```
int i = Integer.parseInt(String) 
```

`int`保存到文件的最紧凑的方法是二进制表示

```
java.io.DataOutputStream.writeInt(i); 
```

读回来

```
int i = java.io.DataInputStream.readInt(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T18:45:14.160

所以你有一个真正包含像“12345”这样的int的字符串，你想把它紧凑地写在一个文件中。

首先，将字符串转换为 int：

```
int value = Integer.valueOf(string); 
```

然后，您可以将其转换为带有 ByteBuffer 的字节数组：

```
ByteBuffer b = ByteBuffer.allocate(4);
b.putInt(value);
byte[] result = b.array(); 
```

或者您只需将其写入文件中：

```
FileOutputStream fos = new FileOutputStream(f);
ObjectOutputStream oos = new ObjectOutputStream(fos);
oos.writeInt(value); 
```

**编辑**：由于你仍然有困难，这里是一个完整的例子：

```
public class Snippet {

  public static void main(String[] args) {
    int value = Integer.parseInt("1234567890");

    ByteBuffer b = ByteBuffer.allocate(4);
    b.putInt(value);
    byte[] result = b.array();

    System.out.println(result.length);  // 4
    System.out.println(Arrays.toString(result)); // [73, -106, 2, -46]
  }
} 
```

# java - 理解 == 和等于

> ID：15208468
> 
> 赞同：1
> 
> 时间：2013-03-04T18:30:07.350
> 
> 标签：java, equals, equality

我了解到 == 检查被比较的引用是否相同，而 .equals() 比较两个状态。那么为什么我们可以在 .equals() 方法中使用 == 呢？

例如：

```
public boolean equals(Object o){
        //cast o to SimpleBankAccount
        SimpleBankAccount b = (SimpleBankAccount)o;

        //check if all attributes are the same
        if ((this.balance == b.balance) && (this.accountNumber == b.accountNumber)){
            return true;
        }
        else{
            return false;
        }
    } 
```

为什么 this.balance 和 b.balance 有相同的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:32:38.007

equals 方法是比较对象。当使用“==”来测试相等性时，它会按预期运行的唯一时间是在比较原始类型或本机类型时，或者您实际上是在测试两个指针是否指向同一个对象。也就是说，`balance`很可能是类型`int`，`float`或`double`，这意味着“==”将按预期测试是否相等。如果`balance`是 type `Balance`，那么这将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:34:55.497

引用也类似于原始类型以及 int、chars 和 double，因为当您执行 == 时，您实际上是在比较这些类型的二进制表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:31:49.757

因为平衡很可能是原始的，对吗？像int还是float？所以你正在比较余额的价值。使用对象比较引用，但使用基元比较实际数据值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:31:36.530

如果此`equals`方法有效，那是因为`balance`and`accountNumber`变量是原始类型，例如`int`or `double`，并且`==`确实比较了原始类型的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T18:31:52.893

取决于什么是平衡。

如果`balance`是原语，那么`==`将比较这些值，这是正确的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T18:32:16.337

`==`通常在 equals 方法中使用来检查两个引用是否实际上是同一个对象。如果不是，则进一步检查对象是否具有相同的状态。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T18:39:59.867

如果您想比较 balance/accountNumber 的值并且它们是原语或原始包装器（如 Integer），那么 == 是您比较值的方式。包装器将被自动装箱。

# php - 检查字符串中的字符

> ID：15208471
> 
> 赞同：-5
> 
> 时间：2013-03-04T18:30:17.803
> 
> 标签：php

我想看看字符串是否以`"profile.php"`结尾或最后 4 个字符相等`".php"`

我怎样才能用 PHP 做到这一点

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:34:09.903

用于[`substr()`](http://php.net/substr)获取最后 4 个字符，然后将其与 string 进行比较`".php"`。

```
if (substr("profile.php", -4) === ".php")
{
    echo "Ends in .php";
}
else
{
    echo "Doesn't end in .php";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:39:59.587

You can try PHP's inbuilt function [pathinfo](http://php.net/manual/en/function.pathinfo.php).

```
<?php
$path_parts = pathinfo('/www/htdocs/inc/lib.inc.php');
echo $path_parts['dirname'], "\n";
echo $path_parts['basename'], "\n";
echo $path_parts['extension'], "\n"; // return php
echo $path_parts['filename'], "\n";
?> 
```

# ios - 将 iPhone 连接到现有的 MFI 设备

> ID：15208475
> 
> 赞同：0
> 
> 时间：2013-03-04T18:30:32.400
> 
> 标签：ios, bluetooth, mfi

我们公司开发的iOS程序，连接蓝牙模块并获取一些数据。我们不能使用蓝牙 4.0，因为我们需要支持 iPhone 3g/3gs。我们需要蓝牙设备，但不会注册 MFI 计划。您是否知道存在 MFI 设备，它允许我们从他那里获取数据而无需注册到 MFI？

更新。我们需要检测按钮按下（设备有 2 个或 3 个按钮）并发送按钮、设备名称和当前地理位置的命令（可能是从 iPhone 获取的地理位置）。按钮推送后应用程序将接收到的数据发送到服务器。

# php - 从表中选择条件1或反转条件1的有效方法

> ID：15208476
> 
> 赞同：1
> 
> 时间：2013-03-04T18:30:36.090
> 
> 标签：php, mysql, performance

我有一个**对称**用户关系表：

```
CREATE TABLE IF NOT EXISTS `friends` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_a` int(11) NOT NULL DEFAULT '0',
  `user_b` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

此表包含以下信息：

*   ID为1的用户是ID为2的用户的好友
*   ID为3的用户是ID为1的用户的好友

得出结论：

*   ID 为 1 的用户有 2 个朋友（ID 3 和 ID 2）
*   **用户 ID 可以在 2 列中的任何一列中**（参见用户 ID 1）

如何进行有效查询以检查用户 1 是否是用户 3 的朋友？

为什么我要问一种有效的方法？好吧，因为我有 3 种不同的解决方案（可能还有更多），但我正在努力选择最有效的解决方案。有什么帮助吗？

方法一：

```
SELECT user_b AS user_a
FROM    friends
WHERE   (user_a = :user_a AND user_b = :user_b)
UNION ALL
SELECT  user_a
FROM    friends
WHERE   (user_b = :user_b AND user_a = :user_a) 
```

方法二：

```
SELECT * FROM friends WHERE (user_a = :user_a AND user_b = :user_b) OR
(user_b = :user_a AND user_a = :user_b) 
```

方法3：

```
SELECT user_a FROM (
SELECT user_b AS user_a
FROM    friends
WHERE   user_a = :user_a
UNION ALL
SELECT  user_a
FROM    friends
WHERE   user_b = :user_a
) AS newtab WHERE newtab.user_a = :user_b; 
```

PHP检查：

```
$my_id = 1;
$friend_id = 3;
$stmt = $dbh->prepare("SELECT ..."); // approach 1 or 2 or 3 or ...
$stmt->bindParam(':user_a', $my_id, PDO::PARAM_STR);
$stmt->bindParam(':user_b', $friend_id, PDO::PARAM_STR);
$stmt->execute();

if ($stmt->rowCount() > 0) {
echo "You are friends";}
else { echo "he is not your friend";} 
```

性能方面 - 哪种方法更好？

编辑：

**测试**：

```
$start_2 = microtime(true);
for ($i = 1; $i <= 100; $i++) {
    $stmt->execute();
}
$end_2 = microtime(true); 
```

**结果**：

> 1：0.14095306396484
> 
> 2：0.063449859619141
> 
> 3：0.18946194648743

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:47:41.000

您必须为 usersID 创建一个索引，并检查您是否真的需要额外的 ID。

为了简单起见，我会使用选项 2，不确定它是否是最有效的方法，你可以测试女巫一个是否足够简单。

曾经我不得不做类似的事情，其中​​选择查询比插入更常见，并且有很多记录，所以我所做的总是以特定顺序插入，在这种情况下可能类似于 user_a < user_b ，因此您只能检查查询中的一侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:01:56.203

正如您已经通过测试发现的那样，方法 2 会更快。

我对此的看法是，在 50% 的情况下，第一部分足以满足该`WHERE`部分，而第二部分根本不会执行。

添加来自@Luis 的想法，其中您始终拥有 user_a < user_b 那些 50% 将上升到 100%。

此外，连接和子查询可能需要临时表，有时它们甚至必须在磁盘上。这真的很慢，所以应该避免。

要测试查询是否使用临时表运行`EXPLAIN`并在**额外**部分中查找*使用临时表。*

 **我还将摆脱那个额外的 id（无用数据）并将 user_a、user_b 作为主键。这将为您提供一个快速的索引（只要您知道 user_a < user_b）。**

# animation - Gimp：应用波纹效果后去除灰色背景

> ID：15208478
> 
> 赞同：0
> 
> 时间：2013-03-04T18:30:37.463
> 
> 标签：animation, gimp, ripple

当我选择文本图层然后应用波纹效果（滤镜->动画->波纹）时，结果图像具有灰色背景。我可以删除此背景或更改其颜色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:58:09.680

[您可以使用颜色选择工具](http://docs.gimp.org/en/gimp-tool-by-color-select.html)在 Gimp 中删除单色背景。这是一个[屏幕截图，](http://www.youtube.com/watch?v=DWJ8sxQ_494&feature=youtu.be)展示了如何做到这一点。

# html - 如何使文本标签贴在 CSS 中的图像旁边？

> ID：15208480
> 
> 赞同：2
> 
> 时间：2013-03-04T18:30:39.287
> 
> 标签：html, css, image, twitter-bootstrap

我在 Bootstrap 的模式中有一个图像，它周围有文本标签。因此，当我缩小浏览器时，文本的位置至关重要（它必须响应准确）

我可以很容易地用一个文本也像这样在 png 中的图像来做到这一点，但我不喜欢它。 ![我想做的事](../Images/180af80b515538b9544048609c167a29.png)

我尝试了什么：

HTML：

```
<div class="modal-body">
<div class="container-fluid">
<img class="" src="img/panel/cutaway-drawing.png">
  <span class="a">Open frame technology</span>
  <span class="b">Roxul rock wool</span>
  <span class="c">Camira fabric</span>
  <span class="d">Damped membrane technology</span>
</div>
</div> 
```

CSS：

```
.a {
  position: absolute;
  top: 55%;
}
.b {
  position: absolute;
  top: 25%;
}
.c {
  position: absolute;
  top: 55%;
  left: 70%;
}
.d {
  position: absolute;
  top: 25%;
  left: 70%;
} 
```

`.a .b .c .d`这应该可以正常工作，除非我不知道为什么绝对位置`.modal-body`作为父级而不是`.container-fluid`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:35:52.243

您需要添加 position:relative to .container-fluid

# python - 如何在没有 POST 请求的情况下获取 WTF 表单对象数据？

> ID：15208481
> 
> 赞同：1
> 
> 时间：2013-03-04T18:30:44.547
> 
> 标签：python, flask, wtforms, flask-wtforms

我有一个模板，允许用户输入搜索参数（search.html）

```
{% from "_formhelpers.html" import render_field %}
<form method=”post”&gt;
<dl>
    {{ render_field(form. notificationId) }}
    {{ render_field(form. recordName) }}
</dl>
<div id="searchResults" > </div>
</form> 
```

宏

```
{% macro render_field(field) %}
  <dt>{{ field.label }}
  <dd>{{ field(**kwargs)|safe }}
  {% if field.errors %}
    <ul class=errors>
    {% for error in field.errors %}
      <li>{{ error }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  </dd>
{% endmacro %} 
```

以及搜索结果的模板（result.html）

```
{% for notification in content %}
  Result:
  content[notification]['type'] }}</td>
{% endfor %} 
```

我正在使用以下 ajax 请求来获取搜索结果并显示在上面的模板中。在两个搜索字段的 keyup 上调用 ajax 函数

```
$.ajax(
    {
      url: ‘result’,
      dataType: "html",
      data:createQueryString(),// gets the value from the dataFields and creates a queryString 
      success: function(data) 
      {
                              $("# searchResults").html(data);      }    }); 
```

我也有 2 个视图，一个用于搜索条件部分（包含 2 个搜索字段的部分），一个用于搜索结果部分。

```
class NotificationSearchView(MethodView):
 def get(self):
   searchform = SearchForm()
   return render_template("search.html”, searchform=searchform)

 @classmethod
 def registerSelf(cls, app):
   NotificationSearchView.app = app
   app.flaskApp.add_url_rule('/search ', view_func=NotificationSearchView.as_view(‘search’))

class NotificationResultView(MethodView):
 def get(self):
   searchform = SearchForm()
   success, content=self.performSearch(searchform) //search method which takes the search parameters and performs the search
   return render_template("result.html”, content=content)

@classmethod
def registerSelf(cls, app):
   NotificationResultView.app = app
   app.flaskApp.add_url_rule('/result', view_func= NotificationResultView.as_view(‘result’)) 
```

WTF 表单类

```
from wtforms import Form, TextField 
class SearchForm(BaseForm):
    notificationId = TextField(notificationId)
    recordName = TextField(recordName) 
```

我面临的问题是，当对 NotificationResultView 进行 ajax 调用时，未填充 wtf 表单对象，我认为这是因为没有触发发布请求，但根据我的设计，不需要发布要求。

我曾尝试将 ajax 请求作为发布请求，但即便如此，wtf 表单对象仍为空。

现在我唯一的另一个选择是，如果我在进行 ajax 调用时通过查询字符串中的搜索条件，但不确定这是否是最好的方法。请建议在这种情况下如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:08:57.167

```
$.ajax(
    {
      url: ‘result’,
      dataType: "html",
      success: function(data) 
      {
                              $("# searchResults").html(data);      }    }); 
```

在您的 ajax 函数中，您没有发送任何数据。

更新：好的，所以您实际上是在发送数据并且 url 是正确的。

```
class NotificationResultView(MethodView):
 def get(self):
   searchform = SearchForm()
   success, content=self.performSearch(searchform) //search method which takes the search parameters and performs the search
   return render_template("result.html”, content=content) 
```

从您的视图函数上方（路由到“结果”），您的问题是`searchform = SearchForm()`没有填充提供的 GET 查询。

要解决此问题，您必须将值提供给`searchform`. 有很多方法可以做到这一点（最明显的一种是摆弄表单对象的创建，by `searchform = SearchForm(formdata = request.args)`），并且可以通过使用flask extension更轻松地完成`flask-wtf`。

这是一种方法（我将提供我的示例，因为我不知道您如何构建查询字符串）：

在 html 中：

```
query_obj = { foo : 'bar', bar : 'baz', answer : 42 };
$.params(query_obj); //foo=bar&bar=baz&answer=42 
/* ajax using above params */ 
```

假设参数已成功提供给视图：

```
@app.route('/result', method=['GET'])
def fooview():
  foo = request.args.get('foo', '')
  bar = request.args.get('bar', '')
  answer = request.args.get('answer', None, type=int)
  .. 
```

希望有帮助。

# django - 根据 arg 过滤结果

> ID：15208486
> 
> 赞同：1
> 
> 时间：2013-03-04T18:31:06.553
> 
> 标签：django, filter, django-templates, filtering

在我的项目管理应用程序中，我有一个页面列出了数据库中的所有项目。我希望可以过滤项目，以便仅显示用户是管理员的项目。下面模板中的代码根据用户单击的内容调用具有不同参数的 project_list 视图。

我需要帮助的是下面视图中的箭头指向的查询，即仅显示用户是成员的项目以及用户既不是管理员也不是成员的所有项目。

**模板：**

```
<h5>Show only projects where you are:</h5>
<div id="filter_div">
    <a class="btn btn-success" href="{% url project_list 'admin' %}">Admin</a>
    <a class="btn btn-info" href="{% url project_list 'member' %}">Member</a>
    <a class="btn" href="{% url project_list 'not_member' %}">Not member</a>
</div> 
```

**风景：**

```
def project_list(request, projects_to_show='All'):
    if projects_to_show == 'admin':
        projects = get_list_or_404(Project.objects.filter(added_by_user = user))
    else:
        if projects_to_show == 'member':
            projects = get_list_or_404(?) // <- only projects where user is a member
        else:
            if projects_to_show == 'not_member' :
                projects = get_list_or_404(?) // <----- only projects where user is NOT admin OR member

        projects = get_list_or_404(Project.objects.order_by('name')) // <- all projects (works)

    return render(request, 'projects/list.html', {"projects" : projects, "headline" : "All projects"}) 
```

模型“项目”和“用户”具有多对多关系（即表 project_users 存在于数据库中）。这是项目模型：

```
class Project(models.Model):
    ... the rest of the fields...   
    added_by_user = models.ForeignKey(User)
    users = models.ManyToManyField(User, related_name='projects') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:51:27.807

更正如下：过滤器应该这样设置......（我相应地更改了文本）

```
users__id__iexact=user.id 
```

查询`projects_to_show == 'member'`应该是这样的：

```
projects = Projects.objects.filter(users__id__iexact=user.id) 
```

考虑到最后一个，`projects_to_show == 'not_member'`我认为这可能有效：

```
projects = Projects.objects.exclude(users__id__iexact=user.id) 
```

要排除用户和 added_by_user，只需添加一个额外的排除。例如：

```
projects = Projects.objects.exclude(users__id__iexact=user.id)
projects = projects.exclude(added_by_user=user) 
```

或者作为一种说法，这应该有效：

```
projects = Projects.objects.exclude(users__id__iexact=user, added_by_user=user) 
```

过滤器是一个字段查找。[django 细节。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iexact)

# asp.net - 获取用户当地时间

> ID：15208487
> 
> 赞同：1
> 
> 时间：2013-03-04T18:31:07.870
> 
> 标签：asp.net, oracle11g, timezone

数据库中的日期/时间数据存储为 Oracle Time Stamp with Time Zone (02-FEB-2013 13:25:00 US/PACIFIC)。当我读取数据时，我需要确定这个时间与用户当前本地时间之间的差异。使用上面，我可以得到用户的本地时间偏移：

```
OracleTimeStampTZ dtzLastActivity = new OracleTimeStampTZ(dr["LAST_ACTIVITY_TZ"].ToString());
TimeSpan tsOffset = dtzLastActivity.GetTimeZoneOffset(); 
```

我可以获取本地时间，也许使用 TimeZoneInfo，只知道偏移量，所以我可以从本地时间减去数据库中的时间来获得差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:39:54.733

`US/Pacific`是[IANA/Olson](http://www.iana.org/time-zones)时区标识符 - 不是 Windows 时区 ID。所以你不能使用`TimeZoneInfo`它的类。

相反，请使用 TZDB 实现，例如[NodaTime](https://code.google.com/p/noda-time/)。它对这些类型的时区有充分的认识，并且可以进行您正在寻找的计算类型。

顺便说一句-`US/Pacific`实际上是`America/Los_Angeles`. [您可以在此处](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)找到这些时区的列表。

**更新**

抱歉，我忽略了您正在使用`OracleTimeStampTZ`. 这[似乎](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleTimeStampTZStructure.htm)已经实现了 TZDB，因此您应该可以直接使用它。尝试以下操作：

```
var span = DateTime.UtcNow - dtzLastActivity.ToUniversalTime().Value; 
```

# javascript - qTip2 中的 Ajax 形式

> ID：15208489
> 
> 赞同：1
> 
> 时间：2013-03-04T18:31:17.663
> 
> 标签：javascript, jquery, ajax, qtip2

我有一张表，其中列出了每条记录的名称、属性和注释。我希望能够在工具提示中显示评论，并且还能够通过 Ajax 更新这些评论。我想通过单击链接来显示工具提示或模式。此模式将有一个预加载评论的文本区域。用户可以修改评论并通过 Ajax 将它们提交到操作页面。成功提交后，现有的工具提示内容也需要更新。

任何帮助将不胜感激。

我正在使用 qtip2 和 Tipsy 插件。

我正在通过 ajax 在 qTip2 工具提示、onclick 中加载表单。表单的链接是从 rel 标签中获得的。现在，当我提交表单时，它不是通过 ajax 提交，而是直接通过操作页面提交。这是我的 JS 代码：

```
 $('.commentsedit').each(function()
        {
            // We make use of the .each() loop to gain access to each element via the "this" keyword...
            $(this).qtip(
            {
                content: {
                    // Set the text to an image HTML string with the correct src URL to the loading image you want to use
                    text: '<img class="throbber" src="images/throbber.gif" alt="Loading..." />',
                    ajax: {
                        url: $(this).attr('rel') // Use the rel attribute of each element for the url to load
                    },
                    title: {
                        text: $(this).attr('title'), // Give the tooltip a title using each elements text
                        button: true
                    }
                },
                position: {
                    at: 'bottom center', // Position the tooltip above the link
                    my: 'top right',
                    viewport: $(window), // Keep the tooltip on-screen at all times
                    effect: false // Disable positioning animation
                },
                show: {
                    event: 'click',
                    solo: true // Only show one tooltip at a time
                },
                hide: 'unfocus',            
                style: {
                    classes: 'my_width_setting_class qtip-wiki qtip-light qtip-shadow'
                },
                events: {
                    render: function(event, api) {
                        // Capture the form submission
                        $('form', this).bind('submit', function(event) {
                            // Grab and store input elements
                            var inputs = $(':textarea', this);

                            // Common ajax error handler
                            function errorHandler(jqXHR, message) {
                                // Set the error and show/hide it
                                $('.error', api.elements.tooltip).html(message || '').toggle(!!message);
                            }

                            // Setup AJAX request
                            $.ajax({
                                url: 'commentsform.cfm',
                                data: $(this).serialize(),
                                type: 'post',
                                dataType: 'json',
                                success: function(data, status, jqXHR) {
                                    // On success, show message and refresh after 2 seconds
                                    if(data.status === 'success'){
                                        api.set('content.text', data.message + ' Redirecting...');
                                        setTimeout(function(){ window.location.reload() }, 2000);
                                    }

                                    // Call error handler on error status too.
                                    else { errorHandler(jqXHR, data.message); }
                                },
                                error: errorHandler,

                                // Disable/Enable input elements
                                beforeSend: function() { inputs.attr('disabled', 'disabled'); },
                                complete: function() { inputs.removeAttr('disabled'); inputs[0].focus(); }
                            });

                            // Prevent normal form submission
                            event.preventDefault();
                        });
                    }
                }
            })
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T13:47:10.183

虽然是一个老问题，但我认为有人会发现在 qtip2 开发人员站点中提出的类似问题的解决方案很有用，特别是在
[http://craigsworks.com/projects/forums/showthread.php?tid=3680](http://craigsworks.com/projects/forums/showthread.php?tid=3680)

编辑：作为对评论的回应，我复制了答案的主要部分作为参考：

```
$('a[class=qTipForm][rel]').each(function(){
    var formName = $(this).attr('name');

    $(this).qtip({
        content: {
            //text: '<iframe src="'+$(this).attr('rel')+'" height="400px" width="700px" frameborder="0"></iframe>',
            text: 'Loading...',
            ajax: {
                url: $(this).attr('rel'),
                success: function(data) {
                    // Set the tooltip contents
                    this.set('content.text', data);

                    // Bind the form submit event
                    $('#' + formName).bind('submit', function(event) {
                        // Grab and store input elements
                        var inputs = $(':input','#' + formName);

                        // Common ajax error handler
                        function errorHandler(jqXHR, message) {
                            // Set the error and show/hide it
                            $('.error', api.elements.tooltip).html(message || '').toggle(!!message);
                        }

                        // Setup AJAX request
                        $.ajax({
                            url: $('#' + formName).attr('action'),
                            data: $('#' + formName).serialize(),
                            type: 'post',
                            dataType: 'json',
                            success: function(data, status, jqXHR) {
                                // On success, show message and refresh after 2 seconds
                                if(data.status === 'success'){
                                    api.set('content.text', ' Redirecting...');
                                    setTimeout(function(){ window.location.reload() }, 2000);
                                }

                                // Call error handler on error status too.
                                else { errorHandler(jqXHR, data.message); }
                            },
                            error: errorHandler,

                            // Disable/Enable input elements
                            beforeSend: function() { inputs.attr('disabled', 'disabled'); },
                            complete: function() { inputs.removeAttr('disabled'); inputs[0].focus(); }
                        });

                        // Prevent normal form submission
                        event.preventDefault();
                    })
                }
            },
            title: {
                text: $(this).attr('title'),
                button: true
            }
        },
        position: {
            my: 'center',
            at: 'center', // Position the tooltip above the link
            target:$(window),
            effect: false // Disable positioning animation
        },
        show: {
            event: 'click',
            solo: true, // Only show one tooltip at a time
            modal: true
        },
        hide: false,
        style: {
            classes: 'viewTipForm ui-tooltip-rounded ui-tooltip-light',
            tip: false
        }
    })

    .click(function(event) { event.preventDefault(); });
}) 
```

# cakephp - 出生日期会话数组显示为“数组”而不是日/月/年

> ID：15208498
> 
> 赞同：0
> 
> 时间：2013-03-04T18:31:48.687
> 
> 标签：cakephp, cakephp-2.0

我试图让用户的出生日期显示在会话的页面上，但它显示的是这个词`Array`。我检查了数据库，我知道出生数据已正确保存，只是它不会显示在视图，我认为这可能是由于调试器将出生日期保存为

`'dob' => array( 'day' => '25', 'month' => '04', 'year' => '1992' ),`

我正在使用视图中调用出生日期

```
<td><?php echo __('Date Of Birth'); ?></td>
<td><?php echo h($this->Session->read('Auth.User.dob')); ?></td> 
```

这适用于所有其他用户信息，例如姓名、姓氏等。

为什么它显示数组而不是dob，以及如何更改它以显示我输入的出生日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:40:33.673

那是 PHP 101，如果您尝试回显一个数组，它将输出“Array”。CakePHP 不会为您神奇地将数组转换为字符串。分别回显日、月、年或首先创建一个连接每个日期部分的字符串并回显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T19:42:20.033

```
$dob = $this->Session->read('Auth.User.dob'); 
echo $dob['day'] . '/' . $dob['month'] . '/' . $dob['year']; 
```

但这并不完全可用。你为什么首先以这种格式存储它？发布保存`dob`. If `dob`is a `date`Cake*应该*为你存储它`YYYY-MM-DD`，所以看起来有些不对劲。

# c++ - 如何在 C++ 头文件上使用 gdb？

> ID：15208503
> 
> 赞同：11
> 
> 时间：2013-03-04T18:31:52.933
> 
> 标签：c++, debugging, header, gdb

我试图在网上搜索这个问题，但似乎我找不到解决我问题的好方法。好吧，我正在尝试使用 gdb 来调试我的 c++ 程序。该程序由一个简单的 main.cpp 和一个 model.h 组成。编译命令是

```
g++ -Wall -g -c main.cpp
g++ -Wall -g main.o -o OUTPUT 
```

由于几乎所有算法都存储在 model.h 中，因此我需要调试该头文件而不是 cpp 文件。但是，每当我尝试在标题上放置一个断点时

```
tbreak model.h:163 
```

gdb 总是给我一条消息“没有名为 TNFmodel.h 的源文件”。

在 GDB 中的另一个问题[断点中](https://stackoverflow.com/questions/1810415/breakpoints-in-gdb)，我通过“dir”将包含标头的文件夹添加到库中看到了一个解决方案。但是我的头文件已经在源文件夹中，并且在尝试之后

```
dir ./ 
```

问题依然存在。

所以有人知道怎么了？如何使用 gdb 调试头文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T00:34:48.550

正如[https://stackoverflow.com/users/760746/nobody](https://stackoverflow.com/users/760746/nobody)所建议的，确保标头在源代码中的一种方法是通过检查来验证它

```
info sources 
```

在确保标头本身位于源中之后（在我的情况下，问题是标头名称中字母的大小写被混淆了，并且不知何故它通过了我的 mac book 上的编译），在 a 行中插入断点头文件工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:34:47.843

尝试将 break 与您的类/方法名称一起使用，如下所示：

```
break  class::method 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-11T08:38:10.880

我发现文件名有时会缩短。使用`info sources`我能够找到 GCC 使用的缩短名称。当我使用缩短的文件名设置断点时，GDB 正确设置了断点。

例如文件`CommonLibrary\headers\Endian.h`更改为`COM~2\headers\Endian.h`

这在运行 mingw-64 的 Windows 10 上。

# java - 在linux中编译的Eclipse插件在windows上工作？

> ID：15208507
> 
> 赞同：0
> 
> 时间：2013-03-04T18:32:02.433
> 
> 标签：java, linux, eclipse, eclipse-plugin, tycho

我开发了一个eclipse插件，使用maven Tycho插件编译linux。但由于某种原因，我无法在 Eclipse 中看到在 Windows 上运行的插件。我在日志文件中找不到任何内容。

由于我是插件开发的新手，跨平台编译的插件会导致什么不同？

我心中的一个难题是，如果我在 linux 上使用基于 windows 的 eclipse 安装（因为它只是一个 zip，解压缩并使用它）机器来编译和构建我的插件，这真的很重要吗？好吧，对我来说，这似乎很重要。我应该使用基于 linux 的 eclipse 在 linux 操作系统中编译插件。

但这不是违反java原则的吗？在任何地方编译和运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:51:05.730

据我所知，如果您在该插件中使用 UI 的东西，那么您必须为多个操作系统导出它......并且您需要 eclipse 网站上的一些库来在 linux 中导出您的应用程序......

如果您只导出插件，那么您什么都不需要... OSGI 会处理一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:52:40.517

一些 Eclipse 包是系统相关的。举一个例子，`org.eclipse.core.resources.win32.x86`只能在 32 位 Windows 工作站上工作。

检查您的插件并查看您是否有任何这些系统相关的 Eclipse 包。

如果这样做，您必须为您希望插件运行的每个环境使用适当的 Eclipse 包导出插件。

一次编写，随处运行是一个神话。询问任何 Android 程序员。:-)

# javascript - 如何使用 Soundcloud api 获取流到 html5 音频播放器？

> ID：15208512
> 
> 赞同：6
> 
> 时间：2013-03-04T18:32:26.527
> 
> 标签：javascript, html, audio, soundcloud

我刚刚开始学习 javascript，作为我的第一次尝试，我想创建自定义音频播放器，它使用 soundcloud 的 api 作为音乐源。

到目前为止，这是我设置的：

```
<!DOCTYPE html>
<html>
<head>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://connect.soundcloud.com/sdk.js"></script>

<script>
window.onload = function() {
SC.initialize({
  client_id: '10e27db0dacd00954d7160b4c092a6e2' //Demo ID
});

SC.stream("/tracks/75868018", function(sound){
    $("audio-test").attr("src", sound.uri);
});
};
</script>

</head>
<body>

<audio id="audio-test" controls></audio>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T21:06:49.293

好的，想通了。问题在于 .stream() - 它旨在提供由 .play() 函数部署的预打包播放器。

如果您`SC.get()`改为使用，您实际上将访问轨道的属性，并能够将其嵌入到音频标签中。查看我的代码：http: [//jsfiddle.net/LpzpK/6/](http://jsfiddle.net/LpzpK/6/)

还有一个问题 - 曲目被标记为 401 禁止，所以播放器只是“加载”。您必须找到一种方法来公开您想要播放的曲目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T19:48:21.123

粗略一看，似乎所有 soundcloud API 对象都带有一个直接链接到资源的 URI 属性。在你的情况下，它会是`sound.uri`.

在您的播放器代码的顶部，您有一个`<audio>`标签 - 我猜您需要将它设置`src`为您正在播放的曲目的 URI 值。您可以通过将 ID 附加到它并调用

```
SC.stream("/tracks/293", function(sound){
    $("[audio_id]").attr("src", sound.uri);
}); 
```

替换`[audio_id]`为您为标签选择的任何 ID。每次播放器更改时，您可能仍然需要做一些事情来重新初始化/重新启动播放器，但这有望让您开始。让我知道它是如何工作的！

# c - 我是否使用此 printf() 丢失了信息？

> ID：15208514
> 
> 赞同：0
> 
> 时间：2013-03-04T18:32:27.953
> 
> 标签：c, printf, compiler-warnings

在**Expert C Programming**中，第 146 页上有一个练习，旨在说明典型的 Unix OS 如何将`a.out`文件的各个段分配到各个内存段中以供执行。

“入门”代码是：

```
main () {
   int i;
   printf("The stack top is near %#X\n", &i);
} 
```

编译器会警告但不会出错，使用`%X`with `&i`：

`warning: format ‘%X’ expects argument of type ‘unsigned int’, but argument 2 has type ‘int *’ [-Wformat]`

作为内存布局和十六进制地址的新手，我只是想知道推荐的格式是否不能完全代表所需的信息？我四处搜寻，但找不到任何确定的东西——例如，我读到了有关使用`%p`格式提示的信息，但不清楚这种情况是否有必要这样做。

此外，这本神圣的 C 书是否会犯这样的错误似乎值得怀疑，所以我认为这对于这个用例来说是一个无关紧要的警告，但我想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:34:11.480

```
 int i;
   printf("The stack top is near %#X\n", &i); 
```

这是未定义的行为。`X`转换说明符需要一个类型的参数，`unsigned int`但`&i`它是指向`int`. 在未定义行为的情况下，C 不需要实现中止翻译，但 C 允许中止翻译。

要打印指针值，请使用`p`转换说明符：

```
 int i;
   printf("The stack top is near %p\n", (void *) &i); 
```

# php - 选择查询相似排名

> ID：15208515
> 
> 赞同：2
> 
> 时间：2013-03-04T18:32:28.570
> 
> 标签：php, mysql

```
SELECT *
FROM `cms_goods`
WHERE rank < 20
     OR rank > 20
LIMIT 10 
```

此代码仅返回 10 条排名字段小于 20 的记录。我希望查询同时显示小于和大于记录。（限 10 人）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:36:41.540

尝试联合：

```
SELECT * FROM `cms_goods` WHERE 
rank < 20 LIMIT 5
UNION ALL
SELECT * FROM `cms_goods` WHERE 
rank > 20 LIMIT 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T18:37:12.073

您可以使用 UNION ALL

```
(SELECT * FROM `cms_goods` WHERE rank < 20 LIMIT 5)
UNION ALL 
(SELECT * FROM `cms_goods` WHERE rank > 20 LIMIT 5) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T18:41:28.730

最好的方法是通过一个可以节省几毫秒的子查询，但不幸的是 mySQL 还不支持子查询中的 LIMIT 功能。

所以你最好的选择是使用这样的联合：

```
SELECT * FROM `cms_goods` WHERE 
rank < 20 LIMIT 5
UNION ALL
SELECT * FROM `cms_goods` WHERE 
rank > 20 LIMIT 5 
```

例如：

```
$query = mysq_query("SELECT * FROM `cms_goods` WHERE rank < 20 LIMIT 5 UNION ALL SELECT * FROM `cms_goods` WHERE rank > 20 LIMIT 5"); 
```

说明：第一个查询将获得 5 个顶部结果，最后一个查询将获得底部 5 个结果，然后 UNION ALL 将它们连接成一个结果。

PS：不要忘记将评论标记为答案，以有帮助的为准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:35:57.367

您可以使用

```
LIMIT 10, 20 
```

接下来将从第 10 行和 20 行中选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T18:35:58.023

子查询可能吗？

```
SELECT * FROM cms_goods WHERE id IN (SELECT id FROM cms_goods WHERE rank < 20 LIMIT 10) OR id IN (SELECT id FROM cms_goods where rank > 20 LIMIT 10) 
```

# python - 将时间字符串转换为十进制小时数？

> ID：15208516
> 
> 赞同：1
> 
> 时间：2013-03-04T18:32:29.730
> 
> 标签：python

如何将“12:30”或“5:51:23”之类的字符串转换为表示 Python 中经过的小时数的十进制数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:57:59.933

可能的解决方案

```
>>> time_st = ["12:30" , "5:51:23"]
>>> HMS = [60*60, 60, 1]
>>> for t in time_st:
    dec_time = sum(a * b for a,b in zip(HMS, map(int, t.split(":"))))
    dec_time /= 3600.
    print "{} = {}".format(t, dec_time)

12:30 = 12.5
5:51:23 = 5.85638888889
00:00 = 0.0
23:59 = 23.9833333333 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:32:29.730

相当简单的字符串分割和数学：

```
def time_string_to_decimals(time_string):
    fields = time_string.split(":")
    hours = fields[0] if len(fields) > 0 else 0.0
    minutes = fields[1] if len(fields) > 1 else 0.0
    seconds = fields[2] if len(fields) > 2 else 0.0
    return float(hours) + (float(minutes) / 60.0) + (float(seconds) / pow(60.0, 2) 
```

如果只给出一个数字 like `"3"`，这将返回`3.0`。如果给出两个冒号分隔的值 like `"4:57"`，这将返回`4.95`。如果给出三个冒号分隔的值 like `"14:36:27"`，这将返回`14.6075`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:47:44.497

```
>>> float('5:51:23'.split(':')[0])
5.0 
```

# c# - 带有 SqlDataSource 更新的 GridView 不起作用

> ID：15208518
> 
> 赞同：0
> 
> 时间：2013-03-04T18:32:30.170
> 
> 标签：c#, asp.net, .net

我的网站上有这个`GridView`：

```
<asp:GridView ID="ClientGridView" runat="server" AutoGenerateColumns="False"
                CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" 
                GridLines="None" DataKeyNames="id,email,first,last">
                <AlternatingRowStyle BackColor="White" />
                <Columns>
                    <asp:TemplateField ShowHeader="False">
                        <EditItemTemplate>
                            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton>
                      &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                        </EditItemTemplate>
                        <ItemTemplate>
                            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton>
                      &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Delete" 
                            onclientclick="javascript:return confirm('are you sure you want to delete.');" Text="Delete"></asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField DataField="id" HeaderText="id" SortExpression="id"/>
                    <asp:BoundField DataField="email" HeaderText="email" SortExpression="email" />
                    <asp:BoundField DataField="first" HeaderText="first" SortExpression="first"/>
                    <asp:BoundField DataField="last" HeaderText="last" SortExpression="last" />
                </Columns>
                <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
                <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
                <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
                <SortedAscendingCellStyle BackColor="#FDF5AC" />
                <SortedAscendingHeaderStyle BackColor="#4D0000" />
                <SortedDescendingCellStyle BackColor="#FCF6C0" />
                <SortedDescendingHeaderStyle BackColor="#820000" />
            </asp:GridView> 
```

这是`SqlDataSource`：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:clientConnectionString %>" 
                ProviderName="<%$ ConnectionStrings:clientConnectionString.ProviderName %>" 
                SelectCommand="SELECT * FROM Client;" 
                DeleteCommand="DELETE FROM Client WHERE id = @id AND email = @email;"
                UpdateCommand="UPDATE Client SET first = @first WHERE id = @id;">

                <DeleteParameters>
                    <asp:Parameter Name="id" Type="String" />
                    <asp:Parameter Name="email" Type="String" />
                </DeleteParameters>
                <UpdateParameters>
                    <asp:Parameter Name="id" Type="String" />
                    <asp:Parameter Name="first" Type="String" />
                </UpdateParameters>
             </asp:SqlDataSource> 
```

当我尝试对一行执行更新时，它会保持相同的值并且不会更新，知道如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:36:43.670

根据 UpdateCommand，First 字段是唯一更新的字段。更新成功了吗？

我认为您的更新命令需要是“首先更新客户端集 = @first, last = @last, email = @email where id = @id”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T17:47:45.723

如果您只想更新第一行，首先您应该使用 boundfield read only ture，除非首先希望这应该有效，否则请使用建议 DavidEdwards

# javascript - jquery在ajax调用中没有正确序列化json

> ID：15208519
> 
> 赞同：0
> 
> 时间：2013-03-04T18:32:31.920
> 
> 标签：javascript, jquery

首先让我说我对 Javascript 不是非常熟悉，我无法弄清楚这里发生了什么。

我有以下功能：

```
 self.search = function () {

            var searchTerms = {
                "City":  this.cityName,
                "State": this.stateName,
                "StoreNumber": this.storeNumber,
                };                

                $.ajax("/api/SearchApi", {
                    data: searchTerms,
                    type: "POST", contentType: "application/json",
                    success: function (result) {
                        alert(result);                            
                        }
                    }
                }); 
```

当我提交时，发生的情况是，它没有按预期提交一个不错的 JSON 对象，而是提交了一个 JSON 对象，格式如下：`"City=testing&State=AL&StoreNumber=test "`

理想情况下，我想使用 GET 方法将对象传递给我的服务器，以便我可以返回结果，但是当我使用 get 方法时，它只是将上述内容附加到 API 调用 url 中，从而形成这样的 URL 请求：`http://localhost:57175/api/SearchApi?City=testing&State=AL&StoreNumber=test`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:36:55.937

确保将 JSON 的 dataType 添加到`$.ajax({ });`对象中。那应该可以解决问题！

```
$.ajax({ 
    // ...

    data     : JSON.stringify( searchTerms ), // Encode it properly like so
    dataType : "json", 

    // ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:48:24.937

2 件事

1.  将 json 内容类型（不是数据类型）添加到您的 ajax 对象中，重要的是要注意您的服务器在这种情况下使用的字符集 utf-8。

2.  在发送和检索 Json 时使用 Json2 库对 Json 进行字符串化和解析，可在此处找到：[https ://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

    ```
    $.ajax({
        url: URL,
        type: "POST",
        //Stringify the data you send to make shure its properly encoded
        data: JSON.stringify(DATA),  
        //This is the type  for the data that  gets sent            
        contentType: 'application/json; charset=utf-8',
        //This is for the data you receive
        dataType: "json"
    }).done(function(data) {
       var dataYouGet = JSON.parse(data);
    }).fail(function(xhr, ajaxOptions, thrownError) {

    }).always(function(data) {

    }); 
    ```

# ruby-on-rails-3 - 如何在 Rails 视图中显示内容并排除几个页面？

> ID：15208524
> 
> 赞同：0
> 
> 时间：2013-03-04T18:32:41.517
> 
> 标签：ruby-on-rails-3

我对 Rails 很陌生，我需要在视图中显示指向 javascript 文件的链接，但我需要排除几个页面。这东西是用haml写的。我需要类似的东西：

```
-if request.url != 'My Link' || request.url != 'My Other Link'
  =javascript_include_tag 'My javascript file' 
```

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:08:59.393

这现在有点笨拙[，](https://github.com/rails/rails/issues/9360)因为`content_for`. 在修复该错误之前，我认为最好的方法是让您的布局文件仅在单个视图未提供特殊内容时才包含 javascript：

```
- if content_for(:exclude_javascript) != "exclude" then
   = javascript_include_tag 'My javascript file' 
```

然后在您不想要 javascript 的几个视图中，提供特殊内容：

```
- content_for :custom_javascript, "exclude" 
```

* * *

一旦修复`content_for`可用，该方法将更清洁。您将能够让您的布局包含：

```
=  content_for(:custom_javascript) || javascript_include_tag 'My javascript file' 
```

您的特殊观点包括：

```
content_for :custom_javascript, "" 
```

# ruby-on-rails - 安装 gem 时出错，无法构建 gem 原生扩展 -- 无法加载此类文件 -- mkmf

> ID：15208525
> 
> 赞同：6
> 
> 时间：2013-03-04T18:32:43.423
> 
> 标签：ruby-on-rails, ruby, eventmachine, mkmf

RoR 很好，但有时让我想把头撞到墙上（无论如何这可能是我的错）。我只是试图安装`Thin`web-client gem，当我运行时`sudo gem install thin`，我收到以下错误（它需要先安装 eventmachine gem）：

```
 sudo gem install thin
    Fetching: eventmachine-1.0.1.gem (100%)
    Building native extensions.  This could take a while...
    ERROR:  Error installing thin:
            ERROR: Failed to build gem native extension.

            /usr/bin/ruby1.9.1 extconf.rb
            /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
            from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
            from extconf.rb:2:in `<main>' 
```

我搜索了“无法加载此类文件--mkmf”错误，但大多数问题似乎都围绕着这样一个事实，即它在 1.8-dev 但不是 1.8 中可用，但当我运行 1.9.3 时，我想我有 mkmf - 我验证过`locate mkmf`：

```
 /home/ubuntu/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/mkmf.rb 
```

mkmf 所在的目录显然不在 /usr/lib/ruby/... 目录下 - 我不确定这是否是我的问题，但它可能足以让你们中的一位专家快速启动发生了什么以及解决方案可能是什么。

另外，我使用 RVM 来安装 ruby​​ 1.9.3 而不仅仅是`gem install`...

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T19:00:04.207

如果您使用的是 RVM，则永远不应该使用“sudo”。使用 sudo 从 rvm 路径中调用 libs 等。尝试只是一个单位

```
gem install thin 
```

看看是否有帮助。

〜凯文

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-06T19:01:28.917

我在rvm之外遇到了类似的错误，我发现我需要安装`ruby-devel`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-07T09:43:54.047

我在 Ubuntu 12.04 有同样的问题。解决者：

```
sudo apt-get install build-essential
sudo apt-get install curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-08T14:39:00.517

尝试以下命令将有助于解决问题

```
sudo gem install thin -- --with-cflags=\"-O2 -pipe -march=native -w\" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-19T12:11:49.740

这为我做到了：

```
sudo apt-get install ruby-dev 
```

干杯

# ms-access-2000 - 使 Access 2000 拆分数据库适应 SQL 后端

> ID：15208526
> 
> 赞同：1
> 
> 时间：2013-03-04T18:32:45.650
> 
> 标签：ms-access-2000

我有一个十多年前创建的 Access 2000 数据库。最初的创造者早已不复存在。它存储在本地网络上文件服务器上的共享文件夹中。该文件的大小超过 250MB，网络上的十几个到两打本地用户都可以访问该文件。我们还是用Access 2000装在机器上打开文件。我还已经使用 Access 的拆分工具将数据库拆分为 FE 和 BE 文件，以尝试加快处理速度。我们目前正在使用 FE/BE 方法，同时访问存储在服务器上的单个 FE 文件。

我试图弄清楚我还能做些什么来尝试优化它。将 BE 移入 SQL 服务器？在每台机器上放一份FE的本地副本？让自己着火并希望最好？

我们正在寻求更换数据库，但计划至少需要一年或更长时间才能完成。

# ruby-on-rails - 从 Rails 应用程序中重新加载 nginx 配置

> ID：15208527
> 
> 赞同：2
> 
> 时间：2013-03-04T18:32:47.487
> 
> 标签：ruby-on-rails, linux, nginx

我有一个在 centOS 机器上运行的多应用程序系统，它由我们的主应用程序和部署应用程序组成。当客户想要我们应用程序的新实例时，他们会使用我们的部署程序，填写一些信息，然后在我们的服务器上创建新的安装。我遇到的问题是我无法让 nginx 自动重新加载它的配置文件。因此，在访问新应用程序部署后，我们会收到 404，直到我手动重新加载。

我尝试了几种不同的方法，包括 chmod /opt/nginx/sbin/nginx 到 777，chmod 安装脚本和部署应用程序到 777，

脚本是这样的：

```
#create install directory -- works correctly
#copy files over -- works correctly
#run install script
##-- and then at this point i've tried multiple lines, including:
system("nginx -s reload") ## this works manually
system("/etc/init.d/nginx reload") ## this works manually 
```

## 我在这里遵循了指示：[Restart nginx without sudo?](https://stackoverflow.com/questions/3011067/restart-nginx-without-sudo) 创建一个脚本以在没有 sudo 密码的情况下运行，然后尝试以下操作：

```
system("sudo /var/www/vhosts/deployer/lib/nginx_reload") 
```

似乎没有任何效果，我假设这是一个权限错误，但也许我错了，如果有人能指出我的任何方向，那将非常有帮助，因为我已经尝试了几天太长了，我没有新想法

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T21:10:21.227

`sudo /etc/init.d/nginx reload`

# ios - 将禁用的滚动子视图添加到 UITableViewController

> ID：15208531
> 
> 赞同：0
> 
> 时间：2013-03-04T18:33:01.010
> 
> 标签：ios, uitableview, subview

这是否可以在 UITableViewController 中创建一个子视图，该子视图将被禁用滚动？

[http://img689.imageshack.us/img689/9036/map1w.png](http://img689.imageshack.us/img689/9036/map1w.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:37:07.797

No. You'll want to create a custom view controller, add a UITableView and a fixed view above the UITableView.

# php - jquery mobile - 在ajax pull上强制页面更新

> ID：15208538
> 
> 赞同：0
> 
> 时间：2013-03-04T18:33:34.623
> 
> 标签：php, jquery-mobile

我的应用目前非常频繁地更改数据，并且需要用户在页面之间来回切换。

我经常发现，当通过 AJAX 加载页面时，然后您通过后退按钮或单击链接返回到该页面......信息并不总是刷新。

有没有办法强制刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:23:14.867

这是因为当您通过 Jquery mobile 中的 AJAX 导航链接页面时，它们会根据文档自动加载到 DOM 中。

尝试将 data-dom-cache="false" 作为属性之一添加到您的“页面”。

# java - 将 LinearLayout 放入 LinearLayout 数组

> ID：15208541
> 
> 赞同：0
> 
> 时间：2013-03-04T18:33:45.283
> 
> 标签：java, android

我想创建按钮 1 到 9，我想循环执行。但在每 3 个计数中，我想创建一个新的 LinearLayout。

```
 final LinearLayout[] ll2 = new LinearLayout[10]; // create an empty array;

            for(int i=1; i<=9;i++)
            {
                Button btnNums = new Button(this);
            final LinearLayout[] ll2 = new LinearLayout[10]; // create an empty array;

            for(int i=1; i<=9;i++)
            {
                Button btnNums = new Button(this);
                btnNums.setText(i+"");
                ll.addView(btnNums);
                if(i%3==0){
                    ll2[i] = ll;
                    ll = null;

                }
            }

            layout.addView(ll2[0]);

    btnNums.setText(i+"");
            ll.addView(btnNums);
            if(i%3==0){
                ll2[i] = ll;
                ll = null;

            }
        }

        layout.addView(ll2[0]); 
```

这不起作用。我没有收到任何错误，但是当运行该应用程序时，它会停止工作。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T07:29:01.090

我在我的项目中使用了它，它对我有用，我就是这样使用它的。希望能帮助到你

在类级别声明空数组：

```
LinearLayout[] imageLayoutContainers = new LinearLayout[10]; 
```

然后在 onCreate 方法中：

```
 for (int i = 0; i < imageLayoutContainers.length; i++) {
        imageLayoutContainers[i] = new LinearLayout(this);
        imageLayoutContainers[i].setOrientation(LinearLayout.VERTICAL);
        imageLayoutContainers[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        imageLayoutContainers[i].setBackgroundResource(imagesIds[i]);
    } 
```

成功了，谢谢

# c++ - c++ 强制转换的问题

> ID：15208542
> 
> 赞同：-2
> 
> 时间：2013-03-04T18:33:46.230
> 
> 标签：c++, visual-studio-2010, visual-c++, casting

你好我有三个班

1.  抽象足球队
2.  球员足球队
3.  PlayersFieldPlayerStates

PlayerSoccerTeam 是 AbstSoccerTeam 的子类。

```
bool AlanSoccerTeam::isClosestTeamMemberToSupportingPlayer(FieldPlayer* plyr) 
```

是球员足球队的一种方法。

我试图用这个在 PlayersFieldPlayerStates 类中调用该方法

```
PlayersSoccerTeam* sTeam;
sTeam->isClosestTeamMemberToSupportingPlayer(player); 
```

我运行它时会遇到这个问题

使用了未初始化的局部变量“sTeam”

我不知道发生了什么或为什么我收到此错误。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:37:26.630

The problem is you have created a pointer to a PlayersSoccerTeam but you have not actually created the object itself yet.

I would suggest doing this.

```
PlayersSoccerTeam sTeam;
sTeam.isClosestTeamMemberToSupportingPlayer(player); 
```

You could alternatively do this.

```
PlayersSoccerTeam* sTeam = new PlayersSoccerTeam()
sTeam->isClosestTeamMemberToSupportingPlayer(player); 
```

As perhaps an interesting education experience create a constructor that prints something to stdout when it is run and then try doing these two options and yours to see what happens. A constructor will be run whenever a new object is created.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:36:44.273

```
PlayersSoccerTeam* sTeam; 
```

这一行声明了一个指向 a 的指针，仅此`PlayersSoccerTeam`而已。你从这一行得到的只是一个指针。由于您尚未初始化，因此它没有特别指向任何地方。没有`PlayersSoccerTeam`任何地方可以指向。

如果你想要一个类型的对象`PlayersSoccerTeam`，那么你只想要：

```
PlayersSoccerTeam sTeam;
sTeam.isClosestTeamMemberToSupportingPlayer(player); 
```

由于您告诉我们您的层次结构，因此您可能希望将您的`PlayersSoccerTeam`多态用作`AbstSoccerTeam`. 在这种情况下，您将需要使用指针或引用。这可以这样做：

```
AbstSoccerTeam* sTeam = new PlayersSoccerTeam();
// ...
delete sTeam; 
```

请注意，这仍然只声明了一个指针，但该表达式`new PlayersSoccerTeam`还创建了一个`PlayersSoccerTeam`指针指向的对象。请注意，将指向 a`PlayersSoccerTeam`的指针分配给指向其父级的指针是完全可以的`AbstSoccerTeam`——这就是多态性。如果你这样做，你必须确保你`delete sTeam;`以后，否则对象将被泄露。

处理动态分配对象的用户的一种更安全的方法是使用智能指针，您可以这样做：

```
std::unique_ptr<AbstSoccerTeam> sTeam(new PlayersSoccerTeam()); 
```

现在您将不必这样做`delete`，因为它`std::unique_ptr`会为您处理。

# python - 我可以让 lxml 在根标记之前和之后忽略非 XML 内容吗？

> ID：15208543
> 
> 赞同：0
> 
> 时间：2013-03-04T18:33:52.780
> 
> 标签：python, xml, lxml

我正在尝试使用 lxml 处理在 XML 内容之前和之后可能有一些非 xml 垃圾的文件，想象有人捕获了一个终端缓冲区，我有这样的东西：

```
user@host: cat /tmp/log.xml
<log>
  <foo>...</foo>
  <bar>..
...
</bar>

</log>

user@host: 
```

如果我交给 etree.parse 文件名，它会阻塞开始的内容。我可以删除第一组行，直到找到以“<”开头的行并将其交给 etree.parse，但随后它会阻塞关闭内容。打开和关闭的非 xml 垃圾可以是任何东西。我可以坚持在文件中只使用有效的 XML，但我试图容忍我的输入。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:52:34.257

这是便利性和正确性之间平衡的另一点：

```
import re

xml = re.search(r"<(\w+).*</\1>", console_output, flags=re.DOTALL).group() 
```

它需要以上述格式给出的单个根标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:44:56.400

最多你可以从前面清除所有不是开尖括号的东西，以及从末端清除所有不是闭合尖括号的东西：

```
data = data[data.find('<'):data.rfind('>')] 
```

但是，如果在实际 XML 数据之前的开头有任何左尖括号，并且在数据末尾有任何额外的右尖括号，这将很容易失败。这在 shell 环境中*并不*少见。

如果您只是拒绝任何此类输入，那对您来说会容易*得多。*

# java - 什么时候应该抛出 IllegalArgumentException？

> ID：15208544
> 
> 赞同：114
> 
> 时间：2013-03-04T18:34:04.110
> 
> 标签：java, exception, illegalargumentexception

我担心这是一个运行时异常，所以应该谨慎使用它。
标准用例：

```
void setPercentage(int pct) {
    if( pct < 0 || pct > 100) {
         throw new IllegalArgumentException("bad percent");
     }
} 
```

但这似乎会迫使以下设计：

```
public void computeScore() throws MyPackageException {
      try {
          setPercentage(userInputPercent);
      }
      catch(IllegalArgumentException exc){
           throw new MyPackageException(exc);
      }
 } 
```

让它恢复为已检查的异常。

好的，但让我们开始吧。如果输入错误，则会出现运行时错误。因此，首先，这实际上是一个很难统一实施的策略，因为您可能必须进行完全相反的转换：

```
public void scanEmail(String emailStr, InputStream mime) {
    try {
        EmailAddress parsedAddress = EmailUtil.parse(emailStr);
    }
    catch(ParseException exc){
        throw new IllegalArgumentException("bad email", exc);
    }
} 
```

更糟糕的是——虽然检查`0 <= pct && pct <= 100`客户端代码可能是静态的，但对于更高级的数据（例如电子邮件地址）而言并非如此，或者更糟糕的是，必须针对数据库进行检查，因此通常客户端代码不能预先证实。

所以基本上我要说的是我没有看到一个有意义的一致政策来使用`IllegalArgumentException`. 似乎不应该使用它，我们应该坚持我们自己的检查异常。抛出这个的好用例是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-04T19:48:30.550

API 文档`IllegalArgumentException`：

> 抛出以指示方法已传递了非法或不适当的参数。

通过查看[它在 JDK 库中的使用方式](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)，我会说：

*   在输入进入工作之前抱怨明显错误的输入似乎是一种防御措施，并导致某些事情在中途失败并显示无意义的错误消息。

*   它用于抛出受检异常太烦人的情况（尽管它出现在 java.lang.reflect 代码中，在这种情况下，对抛出受检异常的荒谬程度的担忧并不明显）。

我会使用`IllegalArgumentException`对常用实用程序进行最后的防御性参数检查（尝试与 JDK 使用保持一致）。或者期望错误参数是程序员错误，类似于`NullPointerException`. 我不会用它来实现业务代码中的验证。我当然不会将它用于电子邮件示例。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-04T20:06:14.547

在谈论“错误输入”时，您应该考虑输入的来源。

输入是由用户或您无法控制的其他外部系统输入的，您应该期望输入无效，并始终对其进行验证。在这种情况下抛出一个检查异常是完全可以的。您的应用程序应该通过向用户提供错误消息来从该异常中“恢复”。

如果输入来自您自己的系统，例如您的数据库或应用程序的某些其他部分，您应该能够相信它是有效的（它应该在到达那里之前已经过验证）。在这种情况下，抛出一个像 IllegalArgumentException 这样的未经检查的异常是完全可以的，它不应该被捕获（通常你​​不应该捕获未经检查的异常）。无效值首先到达那里是程序员的错误；）您需要修复它。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-04T18:40:07.197

“谨慎地”抛出运行时异常并不是一个好策略——Effective Java 建议您*在可以合理地预期调用者恢复*时使用检查异常。（程序员错误是一个具体的例子：如果一个特殊情况表明程序员错误，那么你应该抛出一个未经检查的异常；你希望程序员有一个逻辑问题发生在哪里的堆栈跟踪，而不是试图自己处理。）

如果没有恢复的希望，请随意使用未经检查的异常；抓住它们是没有意义的，所以这很好。

但是，从您的示例中无法 100% 清楚地了解此示例在您的代码中的哪种情况。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-04T19:06:19.187

如 oracle 官方教程中所述，它指出：

> 如果可以合理地期望客户端从异常中恢复，则使其成为受检异常。如果客户端无法从异常中恢复，请将其设为未经检查的异常。

如果我有一个使用 , 与数据库交互的应用程序`JDBC`，并且我有一个将参数作为`int item`and的方法`double price`。对应的`price`项目是从数据库表中读取的。`item`我只是将购买的总数乘以`price`价值并返回结果。虽然我总是确定在我的最后（应用程序端），表中的价格字段值永远不会是负数。但是如果价格值出现**负数**怎么办？这表明数据库端存在严重问题。可能是运营商输入错误的价格。这是调用该方法的应用程序的另一部分无法预料也无法从中恢复的问题。它`BUG`在您的数据库中。所以 和`IllegalArguementException()`在这种情况下应该抛出`the price can't be negative`.
我希望我已经清楚地表达了我的观点..

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-17T11:47:12.703

任何 API 在执行之前都应该检查任何公共方法的每个参数的有效性：

```
void setPercentage(int pct, AnObject object) {
    if( pct < 0 || pct > 100) {
        throw new IllegalArgumentException("pct has an invalid value");
    }
    if (object == null) {
        throw new IllegalArgumentException("object is null");
    }
} 
```

它们代表了应用程序中 99.9% 的错误，因为它要求执行不可能的操作，因此最终它们是应该使应用程序崩溃的错误（因此这是一个不可恢复的错误）。

在这种情况下并遵循快速失败的方法，您应该让应用程序完成以避免破坏应用程序状态。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-03-27T16:15:00.463

视为*前提条件*`IllegalArgumentException`检查，并考虑设计原则：**公共方法应该知道并公开记录自己的前提条件。**

 ***我同意这个例子是正确的：

```
void setPercentage(int pct) {
    if( pct < 0 || pct > 100) {
         throw new IllegalArgumentException("bad percent");
     }
} 
```

**如果 EmailUtil 是不透明**的，这意味着无法向最终用户描述先决条件是有原因的，那么检查的异常是正确的。第二个版本，更正了这个设计：

```
import com.someoneelse.EmailUtil;

public void scanEmail(String emailStr, InputStream mime) throws ParseException {
    EmailAddress parsedAddress = EmailUtil.parseAddress(emailStr);
} 
```

**如果 EmailUtil 是透明**的，例如它可能是所讨论的类拥有的私有方法，`IllegalArgumentException`当且仅当它的先决条件可以在函数文档中描述时才是正确的。这也是一个正确的版本：

```
/** @param String email An email with an address in the form abc@xyz.com
 * with no nested comments, periods or other nonsense.
 */
public String scanEmail(String email)
  if (!addressIsProperlyFormatted(email)) {
      throw new IllegalArgumentException("invalid address");
  }
  return parseEmail(emailAddr);
}
private String parseEmail(String emailS) {
  // Assumes email is valid
  boolean parsesJustFine = true;
  // Parse logic
  if (!parsesJustFine) {
    // As a private method it is an internal error if address is improperly
    // formatted. This is an internal error to the class implementation.
    throw new AssertError("Internal error");
  }
} 
```

**这种设计可以采用任何一种方式。**

*   如果先决条件的描述成本很高，或者如果该类旨在供不知道其电子邮件是否有效的客户使用，则使用`ParseException`. 此处命名的顶级方法`scanEmail`暗示最终用户打算通过它发送未经研究的电子邮件，因此这可能是正确的。
*   如果可以在函数文档中描述先决条件，并且该类不打算输入无效并因此指示程序员错误，请使用`IllegalArgumentException`. 尽管没有“检查”，但“检查”移动到记录功能的 Javadoc，客户端应遵守该功能。**`IllegalArgumentException`客户不能事先告诉他们的论点是非法的，这是错误的。**

**关于 IllegalStateException 的注释**：这意味着“此对象的内部状态（私有实例变量）无法执行此操作。” `IllegalArgumentException`在客户端调用无法知道对象的状态不一致的情况下，最终用户无法看到私有状态。当它优于检查异常时，我没有一个很好的解释，尽管诸如初始化两次或丢失未恢复的数据库连接之类的例子都是示例。***

# grep - grep 查找具有唯一字母的单词

> ID：15208547
> 
> 赞同：2
> 
> 时间：2013-03-04T18:34:13.530
> 
> 标签：grep

如何使用 grep 从字典文件中查找出现的单词，这些单词具有给定的一组字母，并且每个字母出现一次且仅出现一次。

EG 如果字母是 abc，那么预期的输出是：

出租车

* * *

编辑：

给定一个字典文件（即每行包含一个单词的文件，例如`/usr/share/dict/words`在 mac os x 操作系统上）和一组（唯一）字符，我想打印出字典文件中包含输入的每个字符的所有单词设置一次且仅一次。例如，如果字符集`{a,b,c}`随后打印出包含该字符集的每个字符的所有（3 个字母）单词。

我正在寻找一种仅使用 grep 表达式的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:58:34.263

例如，给定一系列字母，`abc`您可以将每个字母转换为前瞻，如下所示：

```
^(?=[^a]*a[^a]*)(?=[^b]*b[^b]*)(?=[^c]*c[^c]*)$ 
```

您可能需要使用“扩展正则表达式”标志`-E`来将此正则表达式与`grep`.

* * *

要从字符串创建此正则表达式，您可以使用`sed`（读者练习）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T20:29:57.497

```
grep -E ^[abc]{3}.$ <Dictionary file> | grep -v -e a.*a -e b.*b -e c.*c 
```

即找到与输入匹配的所有三个字母字符串，并通过反向 grep 将这些字符串通过管道删除带有双字母的字符串。

我正在使用“。” 在 {3} 之后，因为我的字典文件是基于 Windows 的，所以有一个额外的回车或换行。所以，这可能没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:31:30.020

下面是一个 Perl 解决方案。请注意，您需要向字典中添加更多单词，并将输入读入`$input`变量。一个有效单词数组最终会出现在`@results`.

```
#!/usr/bin/env perl

use Data::Dumper;

my $input = "abc";

my @dictionary = qw(aaa aac aad aal aam aap aar aas aat aaw aba abc abd abf abg
  abh abm abn abo abr abs abv abw aca acc ace aci ack acl acp acs act acv ada adb
  adc add adf adh adl adn ado adp adq adr ads adt adw aea aeb aec aed aef aes aev
  afb afc afe aff afg afi afk afl afn afp aft afu afv agb agc agl agm agn ago agp
  ...

  PUT A REAL DICTIONARY HERE!

  ...
  zie zif zig zii zij zik zil zim zin zio zip zir zis zit ziu ziv zlm zlo zlx zma
  zme zmi zmu zna zoa zob zoe zog zoi zol zom zon zoo zor zos zot zou zov zoy zrn
  zsr zub zud zug zui zuk zul zum zun zuo zur zus zut zuz zva zwo zye zzz);

# Generate a lookahead expression for each character in the input word
my $regexp = join("", map { "(?=.*$_)" } split(//, $input));

my @results;
foreach my $word (@dictionary) {

  # If the size of the input doesn't match the dictionary word, skip to the
  # next word.
  if (length($input) != length($word)) {
    next;
  }

  if ($word =~ /$regexp/) {
    push(@results, $word);
  }
}

print Dumper @results; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T00:51:46.030

我找到的解决方案涉及使用`grep`first 从输入集中提取所有仅包含字母的 n 字母单词 - 尽管有些字母可能出现不止一次，但有些可能不会出现；（我再次假设输入字母是唯一的）。然后它会执行一系列 1 字母`greps`以确保每个字母至少出现一次。因为单词的长度为 n，这确保了单词包含每个字母一次且仅一次。例如，如果输入字符集是，`(a,b,c}`那么解决方案是：

`grep -E '^[abc]{3}$' /usr/share/dict/words | grep a | grep b | grep c`

可以编写一个简单的 bash 脚本，它创建这个`grep`字符串并针对 word 文件执行它，使用 $1 作为输入字母集。它可能不是生成字符串的最有效方法，但由于我不熟悉，`sed`或者`awk`它似乎确实解决了我的问题。我创建的脚本是：

```
#!/bin/sh
slen=${#1}
g2="'^[$1]{$slen}\$'"
g3=""
ix1=0
while [ $ix1 -lt $slen ]
do
  g3="$g3 | grep ${1:$ix1:1}"
  ix1=$((ix1+1))
done
eval grep -E $g2 /usr/share/dict/words $g3 
```

# c - C 编程：scanf 中的字符

> ID：15208548
> 
> 赞同：3
> 
> 时间：2013-03-04T18:34:14.930
> 
> 标签：c

scanf 字符有问题...运行程序时不要让我输入字符 当我输入整数时程序会打印 printf 并转到最后一个 else ...

```
#include <stdio.h>
#include <stdlib.h>

#define EG 0.23
#define AG 0.70
#define TG 0.15

main() {
    int posothta;
    char eidos;
    float poso;

    printf("Dwse posothta grammatosimwn: ");
    scanf("%d",&posothta);
    printf("Dwse to eidos grammatoshmou: ");
    scanf("%c",&eidos);

    if(eidos=='E' || eidos=='e'){
        poso=posothta*EG;
        printf("To poso pou plirwnoume einai: %f",poso);
    }else if(eidos=='A' || eidos=='a'){
        poso=posothta*AG;
        printf("To poso pou plirwnoume einai: %f",poso);
    }else if(eidos=='T' || eidos=='t'){
        poso=posothta*TG;
        printf("To poso pou plirwnoume einai: %f",poso);
    }else{
        printf("Kapou exei gine kapoio la9os");
    }   

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:37:06.610

When you do a `scanf()` it's taking the value you ask for only.. for example:

```
scanf("%d",&posothta); 
```

Let's say I enter `5` here. Really, `stdin` got 2 characters: `'5'` and `'\n'` (because I had to hit the enter key and that generates a newline character).

So into `posothta` goes the 5, but that pesky newline is left sitting there. The next `scanf()` now is looking for a character, and since the newline character (`'\n'`) is indeed a character, the program doesn't ask questions, it simply picks up that newline and moves on.

Change your code to:

```
scanf(" %c",&eidos); 
```

Will skip tell `scanf()` that "I want you to skip any whitespace characters, then grab the next one". To `scanf()` a white space character includes not only spaces, but newlines as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:45:42.907

您需要刷新缓冲区：

```
printf("Dwse posothta grammatosimwn: ");
scanf("%d",&posothta);
flushall();
printf("Dwse to eidos grammatoshmou: ");
scanf("%c",&eidos); 
```

**flushall() 函数：**

```
#include <stdio.h>
int flushall( void ); 
```

**描述：**

> flushall() 函数清除与输入流关联的所有缓冲区，并写入与输出流关联的所有缓冲区。对输入文件的后续读取操作会导致从相关文件或设备中读取新数据。
> 
> 调用 flushall() 函数相当于对所有打开的流文件调用 fflush()。

**回报：**

> 打开的流的数量。当写入文件时发生输出错误时，将设置全局变量 errno。

# box2d - 是否可以在 Box2D 中快进模拟

> ID：15208549
> 
> 赞同：1
> 
> 时间：2013-03-04T18:34:16.863
> 
> 标签：box2d, simulation

我创建了一个 box2d 世界，将一些具有不同属性的对象放在屏幕上，例如旋转、恢复、密度。然后我启动应用程序。是否可以快进模拟以便我可以快速看到结果？我所说的结果是指世界对象的最终状态。就像一个视频剪辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:45:10.987

感谢 Andrew，我发现如果我多次运行 Step 函数，我可以获得快进模拟。这只是我猜任何人都可以编写的一小段代码：

```
-(void)simulateWithFastForwardRate:(int)ffRate timeStep:(float32)timeStep
                    velocity:(int)velIters 
       andPositionIterations:(int)posIters{
     for(int i=0;i<ffRate;i++){
       _world->Step(timeStep,velIters,posIters);
     }
} 
```

只需运行上述方法，将快进速率、速度和位置迭代传递给它。

# apache - Apache HTTP Server Load Balancer-File 不存在异常

> ID：15208555
> 
> 赞同：0
> 
> 时间：2013-03-04T18:34:28.363
> 
> 标签：apache, websphere, load-balancing

我使用单个 Apache HTTP Server (2.2.23) 作为负载均衡器，带有两个 IBM Websphere 应用程序服务器节点（其他机器）。我已经部署了基于简单文本的 helloWorld 应用程序，它可以与负载均衡器一起正常工作。但是当我部署包含图像、css 文件、java 脚本文件的真实应用程序时。它加载没有图像的页面并向我显示简单的文本，并在 error_logs 和类似的异常上给我以下异常：

> [错误] [客户端`192.217.71.77`] 文件不存在：/usr/local/apache2/htdocs/application，引用者： `http://192.168.141.17/application/faces/test.jsp`

有趣的是，当我在没有负载均衡器的情况下访问应用程序时，它也可以正常工作。

这是负载平衡器设置

```
<VirtualHost *:80>
ServerName test.com:80
<Proxy balancer://mybalancer>
BalancerMember `http://192.168.141.13:9081` route=1
BalancerMember `http://192.168.141.13:9082` route=2
Order allow,deny
Allow from all
</Proxy>
RewriteEngine On
RewriteLog "/usr/local/apache2/logs/rewrite.log"
RewriteLogLevel 5
ProxyPass /application/faces/test.jsp balancer://mybalancer/application/faces/test.jsp
ProxyPassReverse /application/faces/test.jsp 
balancer://mybalancer/application/faces/test.jsp
</VirtualHost> 
```

我使用以下 URL 将应用程序从我的机器访问到负载平衡器机器：`http://192.168.141.17/application/faces/test.jsp`

我是否缺少任何模块/配置来阻止 Apache 在浏览器上加载图像？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:41:56.097

您只是代理 test.jsp 本身，而不是应用程序的整个上下文根。您需要 ProxyPass 一个包含触发 404 的资源的模式（旧的 Apache 没有正确地将其包含在错误日志条目中）

# ruby - MSpec 库的原因是什么？

> ID：15208556
> 
> 赞同：1
> 
> 时间：2013-03-04T18:34:31.493
> 
> 标签：ruby, testing, rspec, mspec-ruby

我一直在阅读[MSpec 项目的自述文件，虽然它对它是](https://github.com/rubyspec/mspec#readme)*什么*以及（它不是什么）做了很多解释，并在它自己和 RSpec 之间做了一些对比，但没有任何关于它存在的***原因。***使用 RSpec（在启动 MSpec 时）会以某种方式引起问题，还是缺少某些功能？这些事情仍然是真的吗？是否可以为 RSpec 编写一个扩展来做到这一点？是不是有点政治？

显然有很多 RSpec 的文档和示例，更多的特性和库的更多更新，而且由于 MSpec 似乎更难使用 IMO（考虑到特性集的差异和我自己对 RSpec 的舒适度），如果任何人都知道原因。也许这听起来很关键，但这不是我的意思，我只是想提供一些背景信息——所有这一切都可能有充分的理由，这就是我希望找出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:40:01.360

从自述文件：

> MSpec 尝试使用最简单的 Ruby 语言特性，以便刚开始的 Ruby 实现可以运行 Ruby 规范。

这是为基础 Ruby 语言的不完整实现（特别是 Rubinius）而设计的。它没有使用 Ruby 的所有语言特性，因此更容易引导您的实现到可以运行 mspec 的地步。

如果您没有为 Ruby 语言创建新的实现，那么您不应该使用它。

# sql - 返回时差超过阈值的行的查询

> ID：15208566
> 
> 赞同：3
> 
> 时间：2013-03-04T18:35:00.020
> 
> 标签：sql, postgresql, datetime, join, row

这是一个奇怪的问题。我不知道这是否可行。

假设我有下表：

```
person | product  | trans  | purchase_date
-------+----------+--------+---------------
jim    | square   | aaaa   | 2013-03-04 00:01:00
sarah  | circle   | aaab   | 2013-03-04 00:02:00
john   | square   | aac1   | 2013-03-04 00:03:00
john   | circle   | aac2   | 2013-03-04 00:03:10
jim    | triangle | aad1   | 2013-03-04 00:04:00
jim    | square   | abcd   | 2013-03-04 00:05:00
sarah  | square   | efgh   | 2013-03-04 00:07:00
jim    | circle   | ijkl   | 2013-03-04 00:22:00
sarah  | circle   | mnop   | 2013-03-04 00:24:00
sarah  | square   | qrst   | 2013-03-04 00:26:00
sarah  | circle   | uvwx   | 2013-03-04 00:44:00 
```

我需要知道任何人购买的正方形和圆形（或圆形和正方形）之间的差异何时超过 10 分钟。理想情况下，我也想知道这种差异，但这不是必需的。

因此，这就是我需要的：

```
person | product  | trans  | purchase_date
-------+----------+--------+---------------
jim    | square   | abcd   | 2013-03-04 00:05:00
jim    | circle   | ijkl   | 2013-03-04 00:22:00
sarah  | square   | efgh   | 2013-03-04 00:07:00
sarah  | circle   | mnop   | 2013-03-04 00:24:00
sarah  | square   | qrst   | 2013-03-04 00:26:00
sarah  | circle   | uvwx   | 2013-03-04 00:44:00 
```

这将每天运行，所以我将添加一个“where”子句以确保查询不会失控。另外，我知道可能会出现多笔交易（例如，购买一个圆圈之间有 20 分钟，然后是 20 分钟购买一个正方形，然后是 20 分钟再次购买一个圆圈，这意味着有 2 个实例时差超过 10 分钟）。

有什么建议吗？我在 postgres 8.1.23

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:56:20.850

### Modern day solution

With modern day Postgres (8.4 or later) you can use the [window function `row_number()`](http://www.postgresql.org/docs/current/interactive/functions-window.html) to get a continuous numbering per group. Then you can left join to the previous and next row and see if either of them matches the criteria. Voilá.

```
WITH x AS (
   SELECT *
         ,row_number() OVER (PARTITION BY person ORDER BY purchase_date) AS rn
   FROM   tbl
   WHERE  product IN ('circle', 'square')
   )
SELECT x.person, x.product, x.trans, x.purchase_date
FROM   x
LEFT   JOIN x y ON y.person = x.person AND y.rn = x.rn + 1
LEFT   JOIN x z ON z.person = x.person AND z.rn = x.rn - 1
WHERE (y.product <> x.product
       AND y.purchase_date > x.purchase_date + interval '10 min')
   OR (z.product <> x.product
       AND z.purchase_date < x.purchase_date - interval '10 min')
ORDER  BY x.person, x.purchase_date; 
```

[**SQLfiddle.**](http://sqlfiddle.com/#!12/60e4a/1)

### Solution for Postgres 8.1

I can't test this on Postgres 8.1, no surviving instance available. Tested and works on v8.4 and *should* work for you, too. [Temporary sequences](http://www.postgresql.org/docs/8.1/interactive/sql-createsequence.html) and temporary tables and and [`CREATE TABLE AS`](http://www.postgresql.org/docs/8.1/interactive/sql-createtableas.html) were already available.
Temporary sequence and table are only visible to you, so you can get continuous numbers even with concurrent queries.

```
CREATE TEMP SEQUENCE s;

CREATE TEMP TABLE x AS
SELECT *, nextval('s') AS rn  -- get row-numbers from sequence
FROM  (
   SELECT *
   FROM   tbl
   WHERE  product IN ('circle', 'square')
   ORDER  BY person, purchase_date  -- need to order in a subquery first!
   ) a; 
```

Then the same `SELECT` as above should work:

```
SELECT x.person, x.product, x.trans, x.purchase_date
FROM   x
LEFT   JOIN x y ON y.person = x.person AND y.rn = x.rn + 1
LEFT   JOIN x z ON z.person = x.person AND z.rn = x.rn - 1
WHERE (y.product <> x.product
       AND y.purchase_date > x.purchase_date + interval '10 min')
   OR (z.product <> x.product
       AND z.purchase_date < x.purchase_date - interval '10 min')
ORDER  BY x.person, x.purchase_date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:46:11.207

您可以尝试使用这样的“ON”子句将表连接到自身：

```
SELECT a.Person, CAST((DATEDIFF(mi, b.purchaseDateb a.purchaseDate)/60.0) AS Decimal) AS TimeDiff, a.Product, b.Product FROM <TABLE> a
JOIN <TABLE> b
ON a.Person = b.Person AND b.purchaseDate > a.purchaseDate
WHERE
(a.Product = 'Circle' AND b.Product = 'Square')
OR
(a.Product = 'Square' AND b.Product = 'Circle') 
```

通过将表连接到自身，您可以获得将同一个人的两次购买组合在一起的行。通过将其限制为“b.purchaseDate > a.purchaseDate”，您可以防止行匹配自己。然后您可以简单地检查购买的不同产品。

时差是最后一个棘手的部分。我上面包含的内容是基于我在[这里](http://forums.asp.net/t/1188751.aspx/1)找到的答案。看起来它应该可以工作，如果此输出对您不起作用，您可以使用一些变体。

您需要在 WHERE 语句上添加一个子句，该子句使用相同的 DATEDIFF 函数来测试 > 10 分钟的时间，但这不会构成太大的挑战。

Please note that this won't return exactly what you have in your question - this will include a row for Jim's first transaction as well as one for Jim's 2nd square purchase. Both will match to the same circle, and you will get both times (ijkl-abcd AND ijkl-aaaa). Thanks for xQbert's comment for pointing this out.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:02:00.087

--Assumes

1.  You want to know differences in minutes for purchase on same day. If dates don't matter eliminate the where clause.
2.  That you only want considerations of circle to square following the purchase_date, not preceding. .

.

```
SELECT A.person, A.product, a.Trans, A.Purchase_date, B.Purchase_date, 
hours_diff * 60 + DATE_PART('minute', B.purchase_date - A.Purchase_date ) as minuteDifference
FROM yourTable A
LEFT JOIN yourTable B 
  on A.person = B.Person 
    and ((A.product = 'square' and b.product = 'circle') 
      OR (A.Product = 'circle' and b.product = 'square'))
    and A.purchase_date <= B.Purchase_date
WHERE (A.purchase_Date::date = B.purchase_date::date OR B.purchase_date is null) 
```

Null B.purchase_dates will tell you when you don't have a circle/square or square circle combo.

# jquery-selectors - jQuery BBQ 插件选择器不起作用

> ID：15208572
> 
> 赞同：1
> 
> 时间：2013-03-04T18:35:13.203
> 
> 标签：jquery-selectors, jquery-bbq

我正在使用 BBQ 插件加载 PHP 页面：

```
 $(function(){
 var cache = {
    '': $('.bbq-default')
  };

  $(window).bind( 'hashchange', function() {
    var url = $.param.fragment();
    $( 'a.bbq-current' ).removeClass( 'bbq-current' );
    $( '.bbq-content' ).children( ':visible' ).hide();
    url && $( 'a[href="#' + url + '"]' ).addClass( 'bbq-current' );

    if ( cache[ url ] && url == "") {
      cache[ url ].show();
    } else {
      $('.bbq-loading' ).show();
      cache[ url ] = $( '<div class="bbq-item"/>' )
      .appendTo( '.bbq-content' )
      .load('session.php', {url: url}, function(){
          // Content loaded, hide "loading" content.
          $( '.bbq-loading' ).hide();
        });
   }
  })
  $(window).trigger( 'hashchange' );
}); 
```

这只是插件中的示例代码。

使用 session.php，我有一个导航菜单，可以浏览我的 MySQL DB 的不同数据集。在通过 BBQ 插件加载的每一面，我都有一个评论字段`<textarea id='comment'></textarea>`

我想使用 AJAX 将来自 textarea 的输入提交到我的数据库，但选择器`$("textarea#comment").val();`仅在页面初始加载 URL 时才起作用。当我使用我的 php 文件生成的链接导航时，无论我是否在 textarea 中写入，选择器都不会输出任何内容（使用 firebug 控制台测试）。（当 textarea 的值被预填充时，选择器可以工作，但当我更改内容时不会）

# java - 混合资源 (REST) 和非资源

> ID：15208579
> 
> 赞同：3
> 
> 时间：2013-03-04T18:35:48.703
> 
> 标签：java, rest

我们的服务器目前提供一个 REST-ful API，允许用户按预期对资源进行 CRUD。

如果我们有一些不是资源的东西，比如辅助数据，会发生什么？我们是否必须遵守严格的 REST-ful 约定？

例如，假设我们在 REST-ful API 中有 dog：

```
GET:  /dogs/
GET:  /dogs/:id
POST: /dogs/
PUT:  /dogs/:id
DELETE: /dogs/:id 
```

是否可以添加类似的内容：

```
GET: /util/randomNumber/ 
```

返回一个随机数？

它不是真正的资源，因为您永远不会更新或删除它，也不能成为集合的一部分。它也不可靠，因为每次点击都会改变。

（注意，我实际上并没有尝试生成随机数。只是一个例子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:54:19.320

在 RESTful 环境中，并非每个资源都需要进行所有 CRUD 操作。拥有只读的非收集资源是完全合法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:46:36.230

是的，可以将您的随机数生成器方法装饰为

```
@GET
@Path("util/randomNumber")
public Response getRandom(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T19:06:38.157

是的，您可以通过 GET 请求使用某些服务来做到这一点。

[Apigee 团队](http://apigee.com/about/api-best-practices)讨论展示了在 RESTful 服务中使用 URL 和资源的许多有趣的方式和标准。

[我已经阅读了 Apigee电子书的](http://apigee.com/about/content/web-api-design)第 19 页，这是一种关于转换的方法，我认为这对您很有用。

就您而言，我认为处理生成一些随机值的服务的最佳方法是：

```
GET: /util/generateRandomNumber/ 
```

在这种情况下，您确定您的操作，生成一个随机数。或者，让我们尝试做得更好：

```
GET: /util/generate?type=number 
```

在这种情况下，您可以更灵活地将其他类型用于生成。

您还可以放置一些查询参数，例如：

```
GET: /util/generate?type=number&min=0&max=100 
```

这将返回一个介于 0 和 100 之间的数字。

这是我的观点，希望对你有所帮助。

# c# - 从 xml 读取数据并使用 C# 写入数据库

> ID：15208585
> 
> 赞同：1
> 
> 时间：2013-03-04T18:35:58.643
> 
> 标签：c#, linq

有什么快速的方法可以读取 XML 文件并将信息转储到数据库中吗？

我有一个 XSD 文件，并使用此处提供的 Xsd2DB 实用程序创建了一个数据库（[http://xsd2db.sourceforge.net/](http://xsd2db.sourceforge.net/)） -

我现在有了要插入数据库的 XML 文件，有什么快速的方法吗？或者唯一的方法是读取/遍历 xml 并将记录插入数据库？

我试过以下

*   我尝试将 XSD 读入 DataSet
*   然后我将 XML 读入同一个 DS

但是不知道怎么告诉Adapter把所有的表都推入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:55:12.997

您可以将 xml 文件读入数据集，然后将数据集添加到表中。你如何去做取决于你的 SQL 服务器（mySql、Oracle、MS SQL）。这是一个例子：

```
Imports System.Xml
Imports System.Data.SqlClient
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim connetionString As String
    Dim connection As SqlConnection
    Dim command As SqlCommand
    Dim adpter As New SqlDataAdapter
    Dim ds As New DataSet
    Dim xmlFile As XmlReader
    Dim sql As String

    Dim product_ID As Integer
    Dim Product_Name As String
    Dim product_Price As Double

    connetionString = "Data Source=servername;Initial Catalog=databsename;User ID=username;Password=password"
    connection = New SqlConnection(connetionString)

    xmlFile = XmlReader.Create("Product.xml", New XmlReaderSettings())
    ds.ReadXml(xmlFile)
    Dim i As Integer
    connection.Open()
    For i = 0 To ds.Tables(0).Rows.Count - 1
        product_ID = Convert.ToInt32(ds.Tables(0).Rows(i).Item(0))
        Product_Name = ds.Tables(0).Rows(i).Item(1)
        product_Price = Convert.ToDouble(ds.Tables(0).Rows(i).Item(2))
        sql = "insert into Product values(" & product_ID & ",'" & Product_Name & "'," & product_Price & ")"
        command = New SqlCommand(sql, connection)
        adpter.InsertCommand = command
        adpter.InsertCommand.ExecuteNonQuery()
    Next
    connection.Close()
End Sub 
```

结束类

您可以在此处找到更多示例：http: [//vb.net-informations.com/xml/vb.net-xml-insert-database.htm](http://vb.net-informations.com/xml/vb.net-xml-insert-database.htm)

# c# - 在 ReactiveUI 中订阅用户控件的依赖属性

> ID：15208591
> 
> 赞同：1
> 
> 时间：2013-03-04T18:36:07.990
> 
> 标签：c#, wpf, wpf-controls, dependency-properties, reactiveui

我正在尝试使用 ReactiveUI 来订阅 UserControl 上的依赖项属性的更改。

我看到了另一个堆栈溢出答案（[组合依赖属性](https://stackoverflow.com/questions/14196302/combine-dependency-properties)）中描述的技术，但我在某处的实现出错了。即使在下面的简单情况下，当依赖属性更改时，我也无法触发订阅。

这是我的代码的相关部分：

```
public partial class AutoCompleteBox : UserControl
{
    public static readonly DependencyProperty SelectedItemProperty =
    DependencyProperty.Register("SelectedItem",typeof(object),typeof(AutoCompleteBox),
    new FrameworkPropertyMetadata{BindsTwoWayByDefault = true});

    public object SelectedItem
    {
        get { return (object)GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }

    public AutoCompleteBox()
    {
        InitializeComponent();               
        this.WhenAny(m=>m.SelectedItem,m=>m.Value)
            .Subscribe(_=>
            Console.WriteLine("Selected Item Changed!"));
    }
} 
```

**编辑**

我正在使用 ReactiveUI 版本 4.4.2.0

在进一步调查中，当我在我的主项目中使用用户控件时，订阅调用似乎确实有效，而不是在我用于测试它的小项目中。我不确定有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:11:32.330

几个问题：

1.  您的代码中有对 ReactiveUI.Xaml 的引用吗？如果加载不正确，这将不起作用
2.  你使用的是什么版本的 ReactiveUI？

# android - SensorManager.getRotationMatrix 在 Android 模拟器上总是返回 false

> ID：15208597
> 
> 赞同：2
> 
> 时间：2013-03-04T18:36:32.197
> 
> 标签：android, android-sensors

我尝试通过`SensorManager.getOrientation`. 在此之前我`SensorManager.getRotationMatrix`用来获取旋转矩阵，但这总是返回`false`。这是我的活动代码：

```
 public class MainActivity extends Activity implements SurfaceHolder.Callback,  View.OnClickListener{ `public final static String DEBUG_TAG = "MainActivity";

private SensorManager sensorManager;
private SurfaceView preview;
private float[] mGravs;
private float[] mGeoMags;
private float[] mRotationM;
private float[] mOrientation;

private Sensor mAccelerometer;
private Sensor mMagneticField;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.activity_main);

    preview = (SurfaceView)findViewById(R.id.SurfaceView1);

    sensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);

    mAccelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    mMagneticField = sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);

    mGravs = new float[3];
    mGeoMags = new float[3];
    mRotationM = new float[16];
    mOrientation = new float[3];

    List<Sensor> sensorList = sensorManager.getSensorList(Sensor.TYPE_ALL);
    for (int nI = 0; nI < sensorList.size(); nI++) {
        Log.d(DEBUG_TAG, sensorList.get(nI).getName());
    }
}

private SensorEventListener sensorEventListener = new SensorEventListener() {
    @Override
    public void onSensorChanged(SensorEvent event)
    {
        synchronized (this) {
            switch (event.sensor.getType()) {
            case Sensor.TYPE_ACCELEROMETER:
                System.arraycopy(event.values, 0, mGravs, 0, 3);
                break;
            case Sensor.TYPE_MAGNETIC_FIELD:
                System.arraycopy(event.values, 0, mGeoMags, 0, 3);
                break;
            default:
                return;
            }
            if (mGravs != null && mGeoMags != null) {
                boolean bSuccess = SensorManager.getRotationMatrix(mRotationM, null, mGravs, mGeoMags);
                if (bSuccess) {
                    SensorManager.getOrientation(mRotationM, mOrientation);
                }
            }
        }
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }
};

private boolean openHardware()
{
    sensorManager.registerListener(sensorEventListener, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    sensorManager.registerListener(sensorEventListener, mMagneticField, SensorManager.SENSOR_DELAY_NORMAL);
    return true;
}

private void closeHardware()
{
    sensorManager.unregisterListener(sensorEventListener);
}

@Override
protected void onResume()
{
    super.onResume();
    openHardware();
}

@Override
protected void onPause()
{
    super.onPause();
    closeHardware();
}

@Override
protected void onStop()
{
    closeHardware();
    super.onStop();
}
 }` 

好的，出现这个问题是因为磁场传感器总是返回 [0.0, 0.0, 0.0]。我怎样才能让磁场传感器返回别的东西？

            回答 #1

赞同：3

时间：2013-07-15T11:40:29.167

我有同样的问题。一切都变得**虚假**

这个答案帮助了我：[https ://stackoverflow.com/a/14224122/1549127](https://stackoverflow.com/a/14224122/1549127)

```

# sql - 如何使用`select`的结果作为`insert into`的参数

> ID：15208598
> 
> 赞同：1
> 
> 时间：2013-03-04T18:36:35.063
> 
> 标签：sql, select, sqlite, bulkinsert

我正在用 sqlite3 破解我的 Zotero 数据库，因为 Zotero gui 仍然不支持一次编辑多个记录。当前任务是从特定期刊中查找所有项目，分离出那些还没有值的项目`journalAbbreviation`，并添加正确的缩写。以下是相关表格：

```
fields (fieldID, fieldName, fieldFormatID)
itemData (itemID, fieldID, valueID)
itemDataValues (valueID, value) 
```

这是我的查询以查找我想要的所有记录：

```
SELECT itemData.itemID
FROM fields JOIN itemData JOIN itemDataValues 
WHERE (fields.fieldname IN ('publicationTitle'))  
AND (fields.fieldID = itemData.fieldID) 
AND (itemData.valueID = itemDataValues.valueID) 
AND (itemDataValues.value IN ('The Journal of the Acoustical Society of America')); 
```

现在我有了`itemID`s 列表，我想向表中添加一堆条目`itemData`。示意图我想这样做：

```
INSERT INTO itemData (itemID, fieldID, valueID)
VALUES (A,X,Y),(B,X,Y),(C,X,Y), ... (W,X,Y); 
```

其中 X 是`fieldID`“journalAbbreviation”，Y 是`valueID`“J”。声学。社会党。是。' （我知道如何获得这些值）。如何编写此`INSERT INTO`语句以用上面查询中的s替换`A`、`B`、`C`等？`itemID``SELECT`

注意：一些记录中已经有期刊缩写。我才写`SQL`了几天，所以我不知道尝试`INSERT`表中已经存在的记录是否会导致问题（我假设它会，基于对主键的模糊理解和`itemData`表中的架构部分包含一行的事实`PRIMARY KEY (itemID, fieldID)`）。因此，可能有必要首先排除那些`itemID`已经有记录的 s，`itemData`其中包含 X as `fieldID`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:39:00.407

With little discussion with @drammock, found a query that is working. Main part of this query is `EXCEPT` keyword.

```
INSERT INTO itemData (itemID, fieldID, valueID) 
SELECT itemData.itemID, 25, 8356
FROM fields JOIN itemData JOIN itemDataValues 
WHERE (fields.fieldname IN ('publicationTitle'))  
AND (fields.fieldID = itemData.fieldID) 
AND (itemData.valueID = itemDataValues.valueID) 
AND (itemDataValues.value IN ('The Journal of the Acoustical Society of America'))
EXCEPT SELECT itemData.itemID, 25, 8356
FROM fields JOIN itemData JOIN itemDataValues 
WHERE (fields.fieldname IN ('journalAbbreviation'))  
AND (fields.fieldID = itemData.fieldID) 
AND (itemData.valueID = itemDataValues.valueID) 
AND (itemDataValues.value IN ('J. Acoust. Soc. Am.', 'J Acoust Soc Am')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:24:52.733

这基本上是 Ravindra 的答案的副本，仅使用了我的首选语法，即在简化子句`DISTINCT`的语句中使用外键链接，并在我看来使其更具可读性。`FROM``WHERE`

我还添加了一个自连接，并表示`WHERE existing.itemID IS NULL`要避免插入已经存在的记录。

```
INSERT INTO itemData (
  itemID, 
  fieldID, 
  valueID) 
SELECT DISTINCT
  itemData.itemID, 
  'journalAbbreviation', 
  'Journal of the Acoustical Society of America' 
FROM 
  fields 
    INNER JOIN itemData ON fields.fieldID = itemData.fieldID
    INNER JOIN itemDataValues ON itemData.valueID = itemDataValues.valueID
    LEFT OUTER JOIN itemData existing ON itemData.itemID = existing.itemID
WHERE 
  fields.fieldname = 'publicationTitle'
  AND itemDataValues.value = 'The Journal of the Acoustical Society of America'
  AND existing.itemID IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T21:19:20.603

您可能希望通过 Zotero 的 javascript API 来执行此操作，这使得数据损坏的可能性大大降低。 [http://www.zotero.org/support/dev/client_coding/javascript_api](http://www.zotero.org/support/dev/client_coding/javascript_api)

此外，如果您要查找的只是期刊缩写，请考虑为 Zotero 的 3.1 分支运行 xpi 分支，该分支通过 MEDLINE 的列表具有自动期刊缩写： [http ://www.zotero.org/support/dev_builds#zotero_31_branch](http://www.zotero.org/support/dev_builds#zotero_31_branch)

# bash - 如何获得内置命令的内置？

> ID：15208600
> 
> 赞同：2
> 
> 时间：2013-03-04T18:36:43.473
> 
> 标签：bash, command-line, unset

出于好奇，假设您创建了这个函数：

```
cd () { echo 'hi'; } 
```

现在，无论您何时输入，都会`cd`打印出“hi”字样。如果您想使用原始`cd`命令，可以执行以下操作：

```
builtin cd 
```

但是如果我也创建了这个怎么办：

```
builtin() { echo 'haha, got ya!'; } 
```

现在，您如何获得`builtin`or的内置命令`cd`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:34:26.067

好的，首先不要覆盖`builtin`命令，我假设你不是故意这样做的。鉴于您可以覆盖所有内置函数，我想出了一条更荒谬的路线：

```
#!/bin/bash

builtin() { echo "Ha"; }
cd() { echo "Ha"; }
pwd() { echo "foobar"; }

result=$(/bin/bash --noprofile --norc -c "\\cd /home/cwgem/testdir; \\pwd; \\ls" )

/bin/echo "$result" 
```

结果：

```
$ bash test.sh 
/home/cwgem/testdir
test.txt 
```

这里的想法是：

*   使用不能作为函数覆盖的函数的绝对路径（这当然是在假设你不会乱用`/bin/bash`and的前提下`/bin/echo`）
*   利用语法命令替换这一事实，`$()`我无法覆盖它
*   调用and `bash`，这在不采购可能包含覆盖的常用文件中是明确的`--noprofile``--norc`
*   finally`\`被添加在命令前面，以防别名浮动

也就是说，所有这些黑客都是出于学术好奇心，不应该应用于现实世界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T13:33:00.757

另一种选择是使用`env -i`它的别名和功能剥离环境：

```
builtin() { echo 'haha, got ya!'; }
builtin pwd
/usr/bin/env -i bash -c 'builtin pwd' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:36:43.473

`unset`我在写下这个问题时想起了这个命令。如果其他人想知道，您可以这样做：

```
unset builtin 
```

和

```
unset cd 
```

使原始命令按预期工作。如果有人有办法在不取消设置方法的情况下这样做，我很想知道如何做。

# c# - DBContext 自定义验证

> ID：15208610
> 
> 赞同：2
> 
> 时间：2013-03-04T18:37:01.503
> 
> 标签：c#, entity-framework, validation, dbcontext

相对较新的 DBContext 并尝试在 DBContext 中编写自定义验证**而不**实现**IValidatableObject**接口或**ValidateEntity**覆盖。

例如，对于具有以下属性的部门实体：名称 Trasit# BLID

这是保存逻辑的片段：

```
public static Boolean saveDepartmentDetails(Department dept, out string errorMessage)
{
Boolean isSuccessful = false;
Int32 iRetVal = 0;
errorMessage = string.Empty;

using (OnlineFormsEntities context = new OnlineFormsEntities())
{
    if (dept != null)
    {
        if (dept.DepartmentID > 0)
        {
            //Todo: I know this is wrong.
            if (context.Departments.Where(d => d.DepartmentName.ToLower() == dept.DepartmentName.ToLower() && d.DepartmentID != dept.DepartmentID).Count() > 0)
            {
                errorMessage = "A Department with the given name already exists.";
                return false;
            }
            if (context.Departments.Where(d => d.Transit.ToLower() == dept.Transit.ToLower() && d.DepartmentID != dept.DepartmentID).Count() > 0)
            {
                errorMessage = "A Department with the given Transit # already exists.";
                return false;
            }

            context.Departments.Attach(dept);
            context.Entry(dept).State = EntityState.Modified;
        }
        else
        {
            if (context.Departments.Where(d => d.DepartmentName.ToLower() == dept.DepartmentName.ToLower()).Count() > 0)
            {
                errorMessage = "A Department with the given name already exists.";
                return false;
            }
            if (context.Departments.Where(d => d.Transit.ToLower() == dept.Transit.ToLower()).Count() > 0)
            {
                errorMessage = "A Department with the given Transit # already exists.";
                return false;
            }

            context.Departments.Add(dept);
        }

        try
        {
            iRetVal = context.SaveChanges();
        }
        catch (System.Data.OptimisticConcurrencyException opEx)
        {
            errorMessage = opEx.Message;
            ((IObjectContextAdapter)context).ObjectContext.Refresh(RefreshMode.ClientWins, dept);
            iRetVal = context.SaveChanges();
        }
        isSuccessful = (iRetVal > 0) ? true : false;
    }
}
return isSuccessful;
} 
```

我需要有关更新逻辑的帮助。或者更好的方式来编码这个 SaveDepartmentDetails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:49:22.940

我建议将所有常见逻辑提取到您保存的同一个类中的 Validation 方法中（即返回`bool`值的方法：如果通过，则为 True，如果不通过，则为 False。您可能会收到错误消息也被用作`out`参数）：

```
private bool ValidateDept(OnlineFormsEntities context, Department dept, out string errorMessage)
{
  errorMessage = string.empty;

  if (context.Departments.Any(d => d.DepartmentName.ToLower() == dept.DepartmentName.ToLower() && d.ID != dept.ID))
   {
     errorMessage = "A Department with the given name already exists.";
     return false;
   }
 if (context.Departments.Any(d => d.Transit.ToLower() == dept.Transit.ToLower() && d.ID != dept.ID))
   {
     errorMessage = "A Department with the given Transit # already exists.";
     return false;
  }
 return true;
} 
```

然后，这样做将允许您在保存方法的开头调用此验证方法，然后仅在它通过后执行添加/附加。

# jquery - JqueryUI“幻灯片”效果不起作用

> ID：15208611
> 
> 赞同：0
> 
> 时间：2013-03-04T18:37:02.230
> 
> 标签：jquery, user-interface, slide

我在一个网站项目中使用 jQueryUI，幻灯片效果在没有 div 的 DIV 中工作正常（#sectionOverlay）。当我尝试在其中包含更多 div 的 DIV 中应用相同的内容时出现问题（当点击#btnClose 时，#sectionInfo 就会消失）

[http://jsfiddle.net/fB4bw/](http://jsfiddle.net/fB4bw/)

希望你能帮助我，问候！

HTML：

```
<div id="sectionCarrousel">

            <div class="carrousel_navigation" id="navPrev"></div>

            <div id="sectionProducts" class="imageflow"></div>

            <div class="carrousel_navigation" id="navNext"></div>

            <div id="sectionInfo">
                <img id="imgTitle" src="img/chips/1_name.png" alt="" />
                <a id="btnClose">
                    <img src="img/button_close.png" alt="" />
                </a>

                <div id="sectionDescription">
                    <p>PLACE HOLDER TEXT: consectetur adipiscing elit. Phasellus lacinia consequat enim. Suspendisse gravida pellentesque dui, sed commodo ligula auctor ut. Duis scelerisque vehicula neque, vel ultrices ipsum aliquam in. In eget erat id nulla elementum rutrum. Aliquam at est nibh, ac elementum est. Donec quis ligula vel ipsum vestibulum rutrum vel eget magna. Morbi ultricies convallis ultrices. Donec a urna eu augue mattis ullamcorper sit amet eget lectus. Praesent mauris dui, posuere eget dignissim at, cursus vitae mi. Suspendisse convallis lacinia ligula, vel porttitor arcu euismod at. Sed tincidunt massa in justo consequat ac feugiat risus ornare. Maecenas accumsan risus at dui hendrerit molestie. Proin eu eros nec diam dignissim consequat sit amet mollis ipsum. Vestibulum tincidunt ligula ac purus dictum porttitor.</p>
                </div>

                <div id="sectionShare">
                    <img src="img/txt_share.png" alt="" />
                    <a href="http://www.facebook.com/sharer.php?u=<?=URL?>" target="_blank">
                        <img src="img/icon_facebook.png" alt="" />
                    </a>
                    <a href="http://twitter.com/home?status=<?=TXT_TW_SHARE?> <?=URL?>" target="_blank">
                        <img src="img/icon_twitter.png" alt="" />
                    </a>
                </div>
            </div>

            <div id="sectionLogoBarcel"></div>
        </div>
    </div>
    <div id="sectionOverlay"></div> 
```

CSS：

```
 #sectionCarrousel
{
    position: relative;
    top: 90px;
    height: 415px;
    /*width: 100%;*/
    /*min-width: 1280px;*/
    text-align: center;
    /*margin-bottom: 100px;*/
}

#sectionOverlay
{
    background-color: #260101;
    opacity: 0.8;
    z-index: 200;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}

#sectionInfo
{
    background-color: #4EA012;
    height: 300px;
    left: 230px;
    margin: 0 auto;
    position: relative;
    margin-top: -345px;
    width: 300px;
    z-index: 490;
    visibility: hidden;
} 
```

JS：

```
function HideInfo()
{
    $("#sectionInfo").hide("slide", { direction: "right" }, 1000);

    $("#sectionOverlay").fadeOut(500);

//    blnOverlayVisible = false;
}

function changeInfo(id, force)
{
    if(force)
    {
        $("#sectionOverlay").fadeIn(500);
        blnOverlayVisible = true;
    }
    else
    {
        if(!blnOverlayVisible) return;
    }

    var description = "";

    $("#sectionInfo").fadeOut(function()
    {
        for(var i in products)
        {
            if(products[i].id == id)
            {
                description = products[i].description;
                break;
            }
        }

        $("#imgTitle").attr("src", "img/chips/" + id + "_name.png");
        $("#sectionDescription p").html(description);

        $(this).fadeIn().css("visibility","visible");
    });

$("#btnClose").click(HideInfo); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:43:33.640

代码中有几个错误。让我们看看我们可以修复什么，然后从那里开始。[编辑代码] 在本地编辑和设置后，我看到的只是一个空白屏幕。批准编辑后，在其中获取一些内容，包括按钮，我们将查看幻灯片问题。

# python - 使用 .pth 文件

> ID：15208615
> 
> 赞同：50
> 
> 时间：2013-03-04T18:37:07.677
> 
> 标签：python

我试图在我没有对全局`site-packages`目录的写访问权且不更改环境（`PYTHONPATH`）的系统上使模块可被发现。我试图将一个`.pth`文件放在与我正在执行的脚本相同的目录中，但它似乎被忽略了。例如，我创建了一个`extras.pth`包含以下内容的文件：

```
N:\PythonExtras\lib\site-packages 
```

但是下面的脚本，放置并运行在同一目录中，打印`False`.

```
import sys
print r"N:\PythonExtras\lib\site-packages" in sys.paths 
```

我拥有写入权限的唯一目录`sys.path`是包含脚本的目录。是否有另一个（当前不存在的）目录我可以放置`extras.pth`并看到它？有没有更好的方法来解决这个问题？

我在 Windows 上使用 python 2.7。`.pth`我可以在这里找到的所有问题都使用系统模块目录。

**编辑：**我已经在`%APPDATA%\Python\Python27\site-packages`. 我可以在那里放置一个模块，它会被导入，但是如果我把一个`.pth`文件放在那里，它就没有效果。这真的不应该工作，还是我做错了什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-04T19:06:13.950

如[文档中所述](http://docs.python.org/2/library/site.html)，仅当 PTH 文件位于 site-packages 目录中时才会处理它们。（更准确地说，如果它们位于“站点目录”中，则会对其进行处理，但“站点目录”本身是 Python 安装的全局设置，不依赖于当前目录或脚本所在的目录。）

如果包含您的脚本的目录是 on `sys.path`，您可以在该目录中创建一个`sitecustomize.py`。这将在 Python 启动时加载。在里面`sitecustomize.py`，你可以这样做：

```
import site
site.addsitedir('/some/dir/you/want/on/the/path') 
```

这不仅会添加该目录，还会将其添加为“站点目录”，从而处理那里的 PTH 文件。如果您想创建自己的个人`site-packages`类似目录，这很方便。

如果您只需要在路径中添加一两个目录，您可以更简单地执行此操作。只需创建一个小型 Python 库来操作`sys.path`，然后从您的脚本中导入该库。就像是：

```
# makepath.py
import sys
sys.path.append('/whatever/dir/you/want')

# script.py
import makepath 
```

编辑：同样，根据[文档](http://docs.python.org/2/library/site.html#site.USER_SITE)`%APPDATA%\Python\PythonXY\site-packages`， （在 Windows 上）可能存在特定于站点的目录。你可以试试，如果事实上你有写权限（而不仅仅是你的脚本目录）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-01-05T19:14:04.353

您可以在 sys.path 中已经存在的目录中创建一个 .pth （路径）文件，以便可以包含/

# ajax - Ajax not working for many form on same page

> ID：15208618
> 
> 赞同：1
> 
> 时间：2013-03-04T18:37:16.517
> 
> 标签：ajax, codeigniter, jquery

in a view im repating the same form and posting it via ajax, my concern is the ajax is working for 1st form but not working from second form, below is the code im using.

```
<form action="http://localhost/comment" method="post" accept-charset="utf-8">
<input type="text" name="comment_text" value="" id="comment_text" size="35" class="comment_text">
<input type="submit" id="post_comment" name="post_comment" value="submit comment" class="post_comment" >
</form>
<form action="http://localhost/comment" method="post" accept-charset="utf-8">
<input type="text" name="comment_text" value="" id="comment_text" size="35" class="comment_text">
<input type="submit" id="post_comment" name="post_comment" value="submit comment" class="post_comment" >
</form>
<form action="http://localhost/comment" method="post" accept-charset="utf-8">
<input type="text" name="comment_text" value="" id="comment_text" size="35" class="comment_text">
<input type="submit" id="post_comment" name="post_comment" value="submit comment" class="post_comment" >
</form>
<form action="http://localhost/comment" method="post" accept-charset="utf-8">
<input type="text" name="comment_text" value="" id="comment_text" size="35" class="comment_text">
<input type="submit" id="post_comment" name="post_comment" value="submit comment" class="post_comment" >
</form>

<script type="text/javascript">
$('.post_comment').click(function() {
  var form_data = {
    csrfsecurity: $("input[name=csrfsecurity]").val(),
    post_text: $('.comment_text').val()    
  };

  $.ajax({
    url: "<?php echo site_url('/comment'); ?>",
    type: 'POST',
    data: form_data,
    success: function(response){
      $(".home_user_feeds").html("markUpCreatedUsingResponseFromServer");
    }
  });
  return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:41:29.713

你的问题是`post_text: $('.comment_text', this).val()`哪个会给你第一个 selected 的值`.comment`，你想要的是`.comment`当前形式的值。尝试

```
<script type="text/javascript">
$('.post_comment').click(function() {
  var form_data = {
    csrfsecurity: $("input[name=csrfsecurity]").val(),
    post_text: $(this).closest('form').find('.comment_text').val()    
  };

  $.ajax({
    url: "<?php echo site_url('/comment'); ?>",
    type: 'POST',
    data: form_data,
    success: function(response){
      $(".home_user_feeds").html("markUpCreatedUsingResponseFromServer");
    }
  });
  return false;
});
</script> 
```

元素 ID 也应该是唯一的。

# sigabrt - SIGABRT error in Xcode 4.6

> ID：15208621
> 
> 赞同：1
> 
> 时间：2013-03-04T18:37:38.147
> 
> 标签：sigabrt, xcode4.6

I'm building an app to demonstrate a point for a project and I keep getting the SIGABRT error whenever I run it I have tried using breakpoints but it comes back to the same line of code in main.m:

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

I have typed bt into the debugger and this is what I get:

```
* thread #1: tid = 0x1c03, 0x96b38a6a libsystem_kernel.dylib`__pthread_kill + 10, stop reason = signal SIGABRT
    frame #0: 0x96b38a6a libsystem_kernel.dylib`__pthread_kill + 10
    frame #1: 0x9244bacf libsystem_c.dylib`pthread_kill + 101
    frame #2: 0x04a7657b libsystem_sim_c.dylib`abort + 140
    frame #3: 0x04bf6f7b libc++abi.dylib`abort_message + 105
    frame #4: 0x04bf4a25 libc++abi.dylib`default_terminate() + 34
    frame #5: 0x010cf0c1 libobjc.A.dylib`_objc_terminate() + 94
    frame #6: 0x04bf4a65 libc++abi.dylib`safe_handler_caller(void (*)()) + 13
    frame #7: 0x04bf4acd libc++abi.dylib`std::terminate() + 23
    frame #8: 0x04bf5c4e libc++abi.dylib`__cxa_rethrow + 83
    frame #9: 0x010cefbd libobjc.A.dylib`objc_exception_rethrow + 47
    frame #10: 0x01c36f98 CoreFoundation`CFRunLoopRunSpecific + 360
    frame #11: 0x01c36e1b CoreFoundation`CFRunLoopRunInMode + 123
    frame #12: 0x0001117a UIKit`-[UIApplication _run] + 774
    frame #13: 0x00012ffc UIKit`UIApplicationMain + 1211
    frame #14: 0x000021bd Scooter App`main(argc=1, argv=0xbffff378) + 141 at main.m:16 
```

All help will be gratefully received.

# css - 模板 Joomla

> ID：15208627
> 
> 赞同：0
> 
> 时间：2013-03-04T18:38:00.490
> 
> 标签：css, joomla, joomla2.5

我正在尝试在 Joomla 2.5 中创建自己的模板，这是我的模板结构：

我在底部的三个盒子里

*   方框 1

*   框 2

*   方框 3

如何将我的文章放在类似于此模板 [模板示例](http://www.omegatheme.com/joomla/travel-template-ot-tourim.html)的这些框中？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:33:50.097

joomla 的模板只能有一个显示内容的地方（例如，“文章”） - `<jdoc:include type="component" />`. 在底部区域，您应该插入模块的位置

```
<div id="box1"><jdoc:include type="modules" name="box1" /></div>
<div id="box2"><jdoc:include type="modules" name="box2" /></div>
<div id="box3"><jdoc:include type="modules" name="box3" /></div> 
```

之后，对于每个职位，您应该为模块分配内容。[http://extensions.joomla.org](http://extensions.joomla.org) - 这个站点帮助您找到显示文章的模块。您也可以通过这种方式调整底部区域 `<div id="box1"><jdoc:include type="modules" name="box1" /></div>`- 在这种情况下，您应该在一个位置分配 3 个模块或一个模块将显示 3 篇文章。

# c++ - Why does iterator type deduction fail?

> ID：15208628
> 
> 赞同：1
> 
> 时间：2013-03-04T18:38:01.707
> 
> 标签：c++, templates, typedef, type-deduction

Why does this not work in C++?
Why can't I restrict `foo`'s parameter to `std::vector<T>::iterator` like this, and what is the best workaround?

```
#include <vector>

template<class T>
void foo(typename std::vector<T>::iterator) { }

int main()
{
    std::vector<int> v;
    foo(v.end());
} 
```

The error is:

```
In function ‘int main()’:
     error: no matching function for call to ‘foo(std::vector<int>::iterator)’
     note: candidate is:
    note: template<class T> void foo(typename std::vector<T>::iterator)
    note:   template argument deduction/substitution failed:
     note:   couldn’t deduce template parameter ‘T’ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T18:47:37.580

The main reason it doesn't work is because the sandard says that the `T` here is in a non-deduced context. The reason why the context is not deduced is because when you pass some type to the function, the compiler would have to instantiate every single possible `std::vector` (including for types not present in this particular translation unit) in order to try to find one which had a corresponding type.

Of course, in case of `std::vector`, the compiler could contain some magic to make this work, since the semantics of the class are defined by the standard. But generally, `TemplateClass<T>::NestedType` can be a typedef to literally anything, and there's nothing the compiler can do about it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:42:11.623

Simple.

```
struct X {};
template<> class std::vector<X> {
    typedef std::vector<int>::iterator iterator;
}; 
```

Oops.

Templates are Turing-Complete. You are asking the compiler to infer the arguments from the results. This is impossible in the general case, even ignoring the possibility of non-one-to-one correspondence.

Typically, you take the iterator type itself as template parameter. This permits other random-access iterators like deque, circular buffer, etc.

# php - MySQL MATCH，AGAINST 不适用于 PDO

> ID：15208630
> 
> 赞同：1
> 
> 时间：2013-03-04T18:38:08.530
> 
> 标签：php, mysql, pdo

我有这个简单的代码来根据相关性制作搜索结果：

```
$stmt = $db->query('SELECT * FROM `apps` WHERE MATCH(appName, appSeller) AGAINST("angry")');
$appCount = $stmt->rowCount();

echo $appCount; 
```

它没有显示任何结果！

提前感谢您的帮助，马塞尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:01:14.160

Stackoverflow 的可用性低于零。
因为没有办法让在 PDO 标签下发布问题的每个人都显示半屏横幅：

## 在提问前连接到 PDO 时启用 ERRMODE_EXCEPTION。

因为在没有错误信息的情况下询问是没有意义的，但错误信息很可能会使问题变得不必要。

```
$dsn = 'mysql:host=localhost;dbname=test;charset=utf8';
$opt = array(
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
);
$pdo = new PDO($dsn,'root','', $opt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:44:11.487

尝试

```
 'SELECT * FROM `apps` WHERE MATCH(appName, appSeller) AGAINST("angry")' 
```

在 phpmyadmin 中，看看它是否真的返回任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:51:54.740

试试这个

```
 <?php
  // Connection data (server_address, database, name, poassword)
   $hostdb = 'localhost';
   $namedb = 'tests';
   $userdb = 'username';
   $passdb = 'password';

 try {
  // Connect and create the PDO object
 $db = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);
 $db->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8

 // Define and perform the SQL SELECT query
 $sql = "SELECT * FROM `apps` WHERE MATCH(appName, appSeller) AGAINST("angry")";
 $stmt = $db->query($sql);

  // If the SQL query is succesfully performed ($stmt not false)
 if($stmt !== false) {
  $cols = $stmt->columnCount();           // Number of returned columns

   echo 'Number of returned columns: '. $cols. '<br />';

 // Parse the result set
  foreach($stmt as $row) {
  echo $row['id']. ' - '. $row['name']. ' - '. $row['category']. ' - '. $row['link'].  '<br />';
 }
 }

 $db = null;        // Disconnect
 }
 print_r($sth->errorInfo());
 }
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T18:47:47.287

将您的代码包含在 try 和 catch 块中，然后您应该知道您的 SQL 语法哪里出错了：

```
 try {

         // your code

    } catch ( PDOException £e ) {

         echo $e->getMessage();
         exit();

    } 
```

# java - 如何在java中传递多项式函数？

> ID：15208631
> 
> 赞同：3
> 
> 时间：2013-03-04T18:38:11.137
> 
> 标签：java, calculus

对于一个微积分编程项目，我们被要求编写一个模拟辛普森 1/3 和 3/8 规则的程序。

我们应该采用多项式（即 5x^2+7x+10），但我正在努力将其概念化。我已经开始使用扫描仪，但有没有更好的方法来正确读取多项式？

任何示例或参考材料将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:47:00.240

一个简单的方法（让你开始）是使用一个数组。
在您的示例中：`5x^2 + 7x + 10`将是：
`{10,7,5}`
即在索引 0 处，索引 1 处的 x^0 的因子 10 是索引 2 处的 x^1 的 7 是 x^2 处的 10。

当然这不是最好的方法。想办法弄清楚你将如何代表`x^20`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:47:48.220

在 java 中，最简单的方法是预先格式化您的输入并只要求输入常量——如“请输入 X^2 项”（然后是 X 项，然后是常量）。

如果这不可接受，您将很容易受到输入样式差异的影响。您可以通过 + 和 - 上的 String.split[ting] 来分隔这些术语，这会给您留下如下内容：

[5x^2]、[7x]、[10]

然后，您可以搜索包含“x^2”和“x”的字符串以区分您的术语

当然，首先删除空格和 .toLowerCase() 以应对用户差异。

当您拆分字符串时，您需要识别 - 情况，以便您可以否定这些常量。

你可以做两个分裂，一个在+另一个在-。您也可以将 StringTokenizer 与保留“令牌”的选项一起使用，这可能更直接，但 StringTokenizer 让一些人有点不舒服，所以选择适合您的任何东西。

请注意，即使用户键入“5x^2 + 10 + 7 x”，这也会成功，这很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T18:54:42.940

我建议您从一个 Function 接口开始，该接口接受多个输入值并返回一个输出值：

```
public interface Function {
    double evaluate(double x);
} 
```

编写多项式实现：

```
public class Poly {

    public static double evaluate(double x, double [] coeffs) {
        double value = 0.0;
        if (coeffs != null) {
            // Use Horner's method to evaluate.
            for (int i = coeffs.length-1; i >= 0; --i) {
                value = coeffs[i] + (x*value);
            }
        }
        return value;
    }
} 
```

将它传递给您的集成商并让它完成它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:50:49.573

> 我相信解析是我的问题。我对java有点陌生，所以这让我很困扰。

您应该使用[解析器生成器](http://javacc.java.net/)。

> 解析器生成器是一种读取语法规范并将其转换为可以识别与语法匹配的 Java 程序的工具。除了解析器生成器本身之外，JavaCC 还提供与解析器生成相关的其他标准功能，例如树构建（通过 JavaCC 附带的名为 JJTree 的工具）、操作、调试等。

JavaCC 的常见问题解答[如何解析算术表达式？](http://www.engr.mun.ca/%7Etheo/JavaCC-FAQ/javacc-faq-moz.htm#tth_sEc7.2)

> 请参阅 JavaCC 附带的示例。
> 
> 请参阅有关编译的任何文本。
> 
> 请参阅[Recursive Descent 解析 Epressions和](http://www.engr.mun.ca/%7Etheo/Misc/index.html#parsingExps)[Theodore Norvell](http://www.engr.mun.ca/%7Etheo/JavaCC-Tutorial/)的教程。

另请参阅[JavaCC - 将数学表达式解析为类结构](https://stackoverflow.com/questions/839362/javacc-parse-math-expressions-into-a-class-structure)

# multithreading - Allow a child thread to call a delegate to the parent when the parent is in a join state waiting on the child in c#

> ID：15208633
> 
> 赞同：1
> 
> 时间：2013-03-04T18:38:15.220
> 
> 标签：multithreading, delegates, deadlock

I have a form that is responsible for creating and setting up an instance of an object, and then telling the object to go do its work. The process is a long one, so there's an area on the form where status messages appears to let the user know something is happening. Messages are set with a setMessage(string msg) function. To allow the form to remain responsive to events, I create a new thread for the object to run in, and pass it the setMessage function as a delegate to allow the object to set status messages on the form. This part is working properly. The main form is responsive and messages posted to its setMessage function appear as expected.

Because the process is a long one, and is made up of many steps, I want to allow the user to terminate the process before it's finished. To do this I created a volatile bool called _stopRequested and a function called shouldStop() that returns its value. This is also given to the object as a delegate. The object can tell if it should terminate by checking shouldStop() periodically, and if it's true, shut down gracefully.

Lastly, Windows controls are not thread safe, so the compiler will complain if a thread other than the one that created the control tries to manipulate it. Therefore, the setMessage function is wrapped in an if statement that tests for this and invokes the function using the parent thread if it's being called from the worker thread (see [http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx) for a description).

The problem arises when the user requests a shutdown. The main form sets _stopRequested to true and then waits for the child thread to finish before closing the application. It does this by executing _child.Join(). Now the parent thread (the one running the form) is in a Join state and can't do anything. The child thread (running the long process) detects the stop flag and attempts to shut down, but before it does, it posts a status message by calling it's setMessage delegate. That delegate points back to the main form, which figures out that the thread setting the message (child) is different than the thread that created the control (parent) and invokes the function in the parent thread. The parent thread is, of course, in a Join state and won't set the text on the text box until the child thread terminates. The child thread won't terminate because it's waiting for the delegate it called to return. Instant deadlock.

I've found examples of signaling a thread to terminate, and I've found examples of child threads sending messages to the parent thread, but I can't find any examples of both things happening at the same time. Can someone give me some pointers on how to avoid this deadlock? Specifically, I'd like the form to wait until the child thread terminates before closing the application but remain able to do work while it waits.

Thanks in advance for the advice.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T13:53:59.097

1-（懒惰）从新线程调度方法，使其不锁定

2-（重新思考）主 UI 线程应该能够控制子线程，所以忘记 _stopRequested 和 shouldStop() 并实现 childThread.Abort() ，abort 不会杀死线程，但会发送一个[ThreadAbortException](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception%28v=vs.100%29.aspx) 可以被处理甚至取消

```
catch(ThreadAbortException e)
{
    ReleaseResources();
} 
```

通过进行各种检查来确保 ReleaseResources 的安全，例如：

```
resource != null 
```

或者

```
resource.IsClosed() 
```

ReleaseResources 应该在没有中止的情况下正常调用，也应该通过中止调用。

3-（如果可能）通过主线程调用 ReleaseResources() 停止子进程

您可能必须混合实现这些。

# javascript - 网站加载缓慢。javascript是罪魁祸首吗？

> ID：15208634
> 
> 赞同：-4
> 
> 时间：2013-03-04T18:38:16.503
> 
> 标签：javascript, performance, response

我怀疑我的网站加载缓慢是因为大量的 javascript 引用。如果我将所有 javascript 文件合并到一个文件中会更有效和更合适吗？

```
 <script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>
    <script src="assets/js/jquery.js" type="text/javascript"></script>
    <script src="assets/js/jquery.cycle.js" type="text/javascript"></script>
    <script src="assets/js/jquery.simplyscroll.js" type="text/javascript"></script>
    <script src="assets/js/jquery.watermark.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        $(function () {
           ...
        });
    </script>
    <script src="files/js/runfunction.js" type="text/javascript"></script>
    <script>
        $(function () {
           ...
        });
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:42:33.070

使用webpagetest.org 为页面加载生成一个瀑布，这样您就可以看到什么是花时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:47:06.967

可能有许多其他原因会降低您的网站速度。但至少你可以使用缩小版。如您所说，将它们组合到一个文件中应该会有所帮助。看看[Scott Hanselman 的文章](http://www.hanselman.com/blog/TheImportanceAndEaseOfMinifyingYourCSSAndJavaScriptAndOptimizingPNGsForYourBlogOrWebsite.aspx)。

# ruby - Ruby array of class objects iterate back on view

> ID：15208635
> 
> 赞同：0
> 
> 时间：2013-03-04T18:38:16.547
> 
> 标签：ruby, rhomobile, rhodes

I have an array of objects returned from Rest in JSON format, when I debug I just see the reference. I have added the do loop to one of my views, but I don't have any properties of the object. Is there something I need to do like cast the array? I'm new to ruby and have searched and found nothing specific to this.

First controller not PolicyList

```
 data3 = data2.map { |rd| PolicyList.new(rd["policyNbr"], rd["systemId"], rd["insuredName"], rd["type"], rd["statusCd"], rd["statusDes"], rd["payorZipcode"], rd["lastPaymentDate"], rd['lastPaymentAmount'], rd["pastDueDate"], rd["pastDueAmount"], rd["currentDueDate"], rd["currentDueAmount"], rd["eft"], rd["suspenseAmt"], rd["expireTime"]) }
     $policylist =data3       
     puts data3.inspect

    WebView.navigate(url_for(:controller => :PolicyList, :action => :index)) 
```

PolicyList Controller

```
 def index
        #@policylists = PolicyList.find(:all)
         @policylists = $policylist
         render :back => '/app'
      end 
```

PolicyList index.erb

```
 <ul data-role="listview">
  <% @policylists.each do |policylist| %>

      <li>
        <a href="<%= url_for :action => :show, :id => policylist.policyNbr %>">
          <%= policylist.policyNbr %>
        </a>
      </li>

  <% end %>
</ul> 
```

PolicyList class

```
 # The model has already been created by the framework, and extends Rhom::RhomObject
 # You can add more methods here
 class PolicyList
       include Rhom::PropertyBag
         attr_accessor  :policyNbr, :systemId, :insuredName,
            :type, :statusCd, :statusDes, :payorZipcode,
            :lastPaymentDate,:lastPaymentAmount,:pastDueDate,
            :pastDueAmount,:currentDueDate,:currentDueAmount,:eft,
            :suspenseAmt,:expireTime 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:20:09.803

尝试检查 data2 变量（在映射之前）。
JSON 中的数据可能有一个根元素，如下所示：

```
[
 {"policy":{
   "policyNbr":"1",
   "systemId":"2"
   }
 },
 {"policy":{
   "policyNbr":"3",
   "systemI‌​d":"4"
   }
 }
] 
```

# javascript - 在 Javascript 中散列图像

> ID：15208640
> 
> 赞同：6
> 
> 时间：2013-03-04T18:38:53.417
> 
> 标签：javascript, html, image, hash

我目前一直在尝试使用 javascript 从我的浏览器中散列图像。但是，我一直在对从 HTML 中的 canvas 元素中检索到的 dataURL 或像素数据的字符串进行散列处理。这显然与我想要做的散列图像的原始数据不同。

例如，将用于 php 哈希文件函数中的同一图像的数据。

有谁知道我如何使用 javascript 访问这些原始图像数据以获取与我从 PHP hash_file($file) 获得的结果哈希值等效的哈希值？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:45:40.097

您可以通过对该图像文件位置的 XHR 请求获取图像的原始数据。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', '/my/image/file.png', true);
xhr.responseType = 'arraybuffer'; // this will accept the response as an ArrayBuffer
xhr.onload = function(buffer) {
    var words = new Uint32Array(buffer),
        hex = '';
    for (var i = 0; i < words.length; i++) {
      hex += words.get(i).toString(16);  // this will convert it to a 4byte hex string
    }
    console.log(hex);
};
xhr.send(); 
```

之后，您可以使用任何您喜欢的散列算法。这是它们的库：[https ://code.google.com/p/crypto-js/](https://code.google.com/p/crypto-js/)

# controller - 在 Laravel 4 中是否有子域控制器的最佳实践？

> ID：15208642
> 
> 赞同：2
> 
> 时间：2013-03-04T18:38:57.437
> 
> 标签：controller, laravel, laravel-4, subdomain

我正在寻找一种简单的方法来获取我现有的 Laravel 4 控制器和模型，并让它们在访问时返回一个 json 对象响应 - “api.myapp.com”。

是否有可用于指定子域请求的路由过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:21:50.210

我发现问题在于两件事：1）我忘记更新本地主机文件以正确解析子域。2) Laravel 4 Route::resource 实例不能在多个 Route::group() 中复用。

我发现在不同子域上引用相同资源路由的唯一方法是手动指定每个 RESTful 路由并为每个资源创建一个新控制器。Jeffery Way 有一个很好的 sublime 片段来加速这个。[片段在这里。](https://gist.github.com/JeffreyWay/3717337)

注意每个复制的控制器之前的“Api..”，它在我的控制器目录中命名相同。

```
Route::group(array('domain' => 'www.myapp.com'), function()
{
    Route::resource('projects', 'ProjectsController');
});

Route::group(array('domain' => 'api.myapp.com'), function()
{

/ Resource API
// project API Resource
    Route::get('projects', array('as' => 'projects', 'uses' => 'ApiProjectsController@index'));
    Route::get('projects/{id}', array('as' => 'project', 'uses' => 'ApiProjectsController@show'));
    Route::get('projects/new', array('as' => 'new_project', 'uses' => 'ApiProjectsController@new'));
    Route::get('projects/{id}/edit', array('as' => 'edit_project', 'uses' => 'ApiProjectsController@edit'));
    Route::post('projects', 'ApiProjectsController@create');
    Route::put('projects/{id}', 'ApiProjectsController@update');
    Route::delete('projects/{id}', 'ApiProjectsController@destroy');
}); 
```

下一步是在 ApiProjectController RESTful 方法中调用适当的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:23:22.273

只需使用前置过滤器 - 并检查“api”子域。像这样的东西

```
Route::filter('before', function()
{
    $server = explode('.', Request::server('HTTP_HOST'));
    if ($server[0] === 'api')
    {
         // Api subdomain request - do JSON
    }
    else
    {
         // Route normal
    }
} 
```

# objective-c - 将变量从一个函数传递到另一个函数

> ID：15208646
> 
> 赞同：0
> 
> 时间：2013-03-04T18:39:13.860
> 
> 标签：objective-c, variables

我有一个问题..我想从这个函数传递选定的段索引变量：

```
-(IBAction)segControllIndex:(id)sender {

    UISegmentedControl *segmentedControl = (UISegmentedControl *)sender;
   int segValue = [segmentedControl selectedSegmentIndex]; 
```

到这里：

```
 NSString *strURL = [NSString stringWithFormat:
 @"http://phpFile.php?Name=%1@&Artist=%2@&Titel=%3@&Genere=%4@", 
 insertName,insertArtist,insertTitle, PASSED VALUE]; 
```

我尝试了很多东西，但我没有成功..你能帮帮我吗？

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:03:49.477

假设流派应该是整数，并假设`insertName`、`insertArtist`和`insertTitle`是 的实例`NSString`：

```
// define this method in your class
-(void)someMethod:(int)passedValue {
    NSString *strURL = [NSString stringWithFormat:@"http://phpFile.php?Name=%@&Artist=%@&Titel=%@&Genere=%d", insertName,insertArtist,insertTitle, passedValue];

    // do your work
} 
```

这样，您可以调用：

```
-(IBAction)segControllIndex:(id)sender {
    // I would recommend validating 'sender' first
    // withou knowing anything else about your calls, here is one example
    if ( [sender isKindOfClass:[UISegmentedControl class]] ) {
        UISegmentedControl *segmentedControl = (UISegmentedControl *)sender;
        int segValue = [segmentedControl selectedSegmentIndex];

        [self someMethod:segValue];
    }
} 
```

我建议[阅读如何格式化`NSString`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)，[Objective C 方法和消息传递的入门](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/)。

# jquery - Slickgrid redisplay grid after deleteItem

> ID：15208655
> 
> 赞同：0
> 
> 时间：2013-03-04T18:39:38.353
> 
> 标签：jquery, slickgrid

I have several SlickGrids that allow User to deleteItems (actually rows). This works fine but when User wants to cancel the deletion of the rows, I am not able to redisplay the entire grid. Here's the relevent code to remove the rows:

```
//  Modal Grid2 Remove rows
$('#removeBtnGrid2').click(function() {
    for (var i = 1; i <= 2; i++) {
        dataViewMG2.deleteItem(i);
    }
    invmodalgrid2.invalidate();
    invmodalgrid2.render();
}); 
```

and here's the code I'm using to redisplay the Grid (this doesn't work):

```
// XXXXXXXXXXXXXXXXXXXXXXX Load selected data into MODAL GRID 2 
$('#addBtnGrid1').click(function() {  /// this acts as a cancel btn
    dataViewMG2.beginUpdate();
    dataViewMG2.setItems(modaldata2);
    dataViewMG2.refresh();
    invmodalgrid2.render();
    dataViewMG2.endUpdate();
} 
```

What am I doing wrong? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:48:24.827

首先，`addBtnGrid1`当我认为您的意思是 (2) 时，您已经提出`addBtnGrid2`，其次，您是否正在处理服务器端来删除您的行？因为这似乎不是处理它的正确方法（尽管我不得不承认我没有尝试过你的代码）。我处理删除的方式是直接将 ID 本身的操作嵌入到`columns`接受/取消定义的定义中，例如：

```
columns1 = [
            {id:'accnt_name', field:'accnt_name', name: "Account Name", width:90, sortable:true, sorter:sorterStringCompare} },
            {id:"id", name:"", field:"id", width:20, formatter: function (r,c,id,def,datactx){ return "<a href='#' onclick='if (confirm(\"Really Delete?\")) removeClick("+id+","+r+")'><img src='/images/deletex_16.png' border='0' /></a>";} }
        ]; 
```

然后要删除的函数（在 PHP 中使用 AJAX 调用服务器端）如下所示：

```
function removeClick(databaseId, gridRow) {
        $.post('myajaxfile.php?action=delete', {id:databaseId}, function(ServerResponse) {
            // if database return an error then display it to the user and undo the cell change
            if(ServerResponse  === undefined) {
                alert("Deleting from database failed...");
            }else {
                if( parseInt(ServerResponse.affected_rows) < 1 || ServerResponse.error_msg != "" ) {                             
                    alert("Deleting from database failed...\n\nERROR Returned: "+ServerResponse.error_msg);
                }else {
                    // success, update the datagrid view on screen
                    var item = dataView1.getItem(gridRow);//RowNum is the number of the row
                    dataView1.deleteItem( item.id );//RowID is the actual ID of the row and not the row number
                    grid1.invalidate();
                    grid1.render();          
                }    
            }   
            $('#loading').hide(); // hide the loading logo                                                                        
        }, "json")
        .fail(function(ServerResponse) { 
            alert("Deleting from database failed...\n\nERROR Returned: "+ServerResponse.responseText);  
            $('#loading').hide(); // hide the loading logo             
        });      
    } 
```

因此，如果 DELETE 在服务器端运行良好，我只会刷新（渲染）网格......希望它有所帮助！我认为没有必要向您展示用于删除的 PHP 文件（服务器端），但如果您这样做了，请再次询问...

# objective-c - ASIFormDataRequest: Unable to upload multiple files to server

> ID：15208656
> 
> 赞同：0
> 
> 时间：2013-03-04T18:39:42.153
> 
> 标签：objective-c, forms, csv, asihttprequest, asiformdatarequest

I have been trying to upload multiple files to the server and I haven't been able to reach my goal. The current situation is that I am able to send some csv files but not all the csv within my archive (My archive saves the session and all the values required to know which files belong to which session). The files are being sent to the server but I have to press the button again to upload the leftover csv files to the server.

```
NSMutableArray *rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
NSLog(@"total objects counted: %d", [rootObject count]);

    for ( int i = 0; i < [rootObject count]; i++ ) {
        NSLog(@"current object: %d", i);
        [self sendCSVtoServer: rootObject[0]];
        [rootObject removeObjectAtIndex: 0];
    }

[NSKeyedArchiver archiveRootObject:rootObject toFile:path]; 
```

Here is what my sendCSVtoServer function looks like

```
- (void) sendCSVtoServer: ( Session * ) archive_session {

    NSLog(@"file name: %@", [archive_session getFile]);

    NSURL *url = [NSURL URLWithString:@"http://xx.x.xxx.xxx:3000/xxx/xxxxxxxx"];

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

    [request setPostValue: [archive_session getEmail] forKey:@"email"];
    [request addFile: [archive_session getFile] forKey:@"csv"];
    [request setDelegate:self];
    [request startSynchronous];

} 
```

Any ideas would be greatly appreciated, thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:50:22.020

这是答案....：/愚蠢的我

```
NSMutableArray *rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
NSLog(@"total objects counted: %d", [rootObject count]);

    for ( int i = 0; i < [rootObject count]; i++ ) {
        NSLog(@"current object: %d", i);
        [self sendCSVtoServer: rootObject[i]];
    }

[rootObject removeAllObjects];
[NSKeyedArchiver archiveRootObject:rootObject toFile:path]; 
```

# css - 将边距底部添加到 div

> ID：15208658
> 
> 赞同：0
> 
> 时间：2013-03-04T18:39:55.450
> 
> 标签：css

我试图将 margin-bottom 添加到 div (div.bar) 但正在破坏父 div

在这个小提琴中，你可以检查我在说什么。

[http://jsfiddle.net/dmsf/2JggY/](http://jsfiddle.net/dmsf/2JggY/)

但是如果你给 foo div 添加一个 1px 的边框

```
.foo {
    background-color:#FFF;
    border: 1px solid;
    margin: 10px;
} 
```

它将按预期工作。

没有1px边框可以让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:41:46.323

在父节点上设置 {overflow: hidden} 或 {overflow: auto}。

[http://jsfiddle.net/2JggY/1/](http://jsfiddle.net/2JggY/1/)

```
.foo {
    overflow: auto
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:52:21.600

这是一种折叠边距的情况（[http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)），有几种方法可以解决这个问题，一种是在元素内部使用填充。以您的示例并在 .foo 上使用 padding-bottom 而不是 .bar [http://jsfiddle.net/davidpett/g2CzH/上的边距底部](http://jsfiddle.net/davidpett/g2CzH/)

```
.foo {
    background-color:#FFF;
    margin: 10px;
    padding-bottom: 50px;
}

.bar {
    height:100px;
    background-color:#333;
} 
```

# javascript - 将 jQuery 对象传递给函数

> ID：15208665
> 
> 赞同：2
> 
> 时间：2013-03-04T18:40:08.607
> 
> 标签：javascript, jquery

这是我想要实现的[**工作演示。**](http://jsfiddle.net/Ajinkya_Parakh/fjtFA/2/embedded/result/)只需在输入中输入一些值，您可能会得到我想要实现的目标。（是的，我得到了它的工作，但坚持下去..）
但是当多个键一起按下时它会失败。

我正在尝试：
我的屏幕包含很少启用和禁用的输入元素。每当用户更新可编辑输入元素中的任何值时，我都想更新与用户更新值具有相同值的禁用输入。

HTML：

```
<input value="foo" />   // When User updates this
<br/>
<input value="bar">
<br/>
<input value="Hello">
<br/>
<input value="World">
<br/>
<input value="foo" disabled>  // this should be updated
<br/>
<input value="bar" disabled>
<br/>
<input value="foo" disabled>  // and this also
<br/>
<input value="bar" disabled>
<br/>
<input value="Happy Ending!">
<br/> 
```

我尝试了这个，我认为这将使我免于 multiple_clicks_at_a_time
JS：

```
$(":input:not(:disabled)").keyup(function () {
    // Get user entered value
    var val = this.value;

    // Find associated inputs which should be updated with new value
    siblings = $(this).data("siblings");
    $(siblings).each(function () {
         // Update each input with new value 
         this.value = val;
    });
});

$(function () {
    $(":input:not(:disabled)").each(function () {
        // Find inputs which should be updated with this change in this input
        siblings = $(":input:disabled[value=" + this.value + "]");

        //  add them to data attribute   
        $(this).data("siblings", siblings);
    });
}); 
```

但是我无法将选择器传递给`keyup`函数并对其进行调用`.each`。

* * *

**PS：**

我之前完全不同的尝试，使用 single_click_at_a_time 但我觉得我一次又一次不必要地遍历 DOM 所以放弃了这个

```
$(":input").keypress(function () {
    $(this).data("oldVal", this.value);
});

$(":input").keyup(function () {
    var oldVal = $(this).data("oldVal");
    $(this).data("newVal", this.value);
    var newVal = $(this).data("newVal");

    $("input:disabled").each(function () {
        if (this.value == oldVal) this.value = newVal;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:54:37.137

我将首先对这些输入进行分组，并为启用的元素绑定一个处理程序以应用于该组。见下文，

```
var grpInp = {};

$(":input").each(function () {
    if (grpInp.hasOwnProperty(this.value)) {
        grpInp[this.value] = grpInp[this.value].add($(this));
    } else {
        grpInp[this.value] = $(this); 
    }
});

$.each(grpInp, function (i, el) {    
    el.filter(':enabled').keyup(function () {
        el.val(this.value);
    });
}); 
```

**演示：http:** [//jsfiddle.net/fjtFA/9/](http://jsfiddle.net/fjtFA/9/)

上述方法基本上是对具有相同值的输入元素进行分组，然后根据它们进行过滤`:enabled`并绑定一个处理程序以将其应用于组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:51:41.080

```
// Find associated inputs which should be updated with new value
siblings = $(this).data("siblings", siblings); 
```

否。使用两个参数调用的[`.data`方法](http://api.jquery.com/data/)不会获取，而是设置数据（并返回当前选择）。此外，您应该将变量设为本地：

```
var siblings = $(this).data("siblings"); 
```

[工作演示](http://jsfiddle.net/fjtFA/12/)

# ruby-on-rails - Rails CSS for text_field_tag default value

> ID：15208668
> 
> 赞同：0
> 
> 时间：2013-03-04T18:40:14.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

Text field Tag:

```
<%= text_field_tag :note, "#{f.notes}", :placeholder => 'Add a note about this rating set..' %> 
```

How can I style `f.notes` to have a background color so that the note looks highlighted after being submitted.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:47:07.493

如果你把

```
:class => 'cssclass' 
```

它将添加您想要的 css 类样式

# serialization - 使用 iPhone 的单声道触摸将 json 反序列化为对象

> ID：15208670
> 
> 赞同：0
> 
> 时间：2013-03-04T18:40:28.117
> 
> 标签：serialization, xamarin.ios, monodevelop

是否可以在不使用 System.ServiceModel.Web 中的 DataContractJsonSerializer 的情况下将 JSON 字符串反序列化为对象？我有以下代码，但我需要付费许可证才能使用它...

```
response = (HttpWebResponse)request.EndGetResponse(iar);
System.Runtime.Serialization.Json.DataContractJsonSerializer ser = new System.Runtime.Serialization.Json.DataContractJsonSerializer(typeof(Result));

Result result = (Result)ser.ReadObject(response.GetResponseStream()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:01:18.523

我正在使用 RestSharp 来使用通过 JSON 发送数据的 Web.API 服务。但是，我使用 JSON.NET 来反序列化它。

```
_client.ExecuteAsync (request, (response) => {

    List<Account> data = JsonConvert.DeserializeObject<List<Account>>(response.Content); 
```

这对我来说很好用，而且 JSON.NET 是免费的、非常快速的，并且是 .NET 的事实上的 JSON 序列化库。

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# asp.net - 如何处理动态生成的控件

> ID：15208674
> 
> 赞同：1
> 
> 时间：2013-03-04T18:40:37.310
> 
> 标签：asp.net, file-upload, c#-3.0, dynamic-controls

在下图中，显示的表格是在单击“创建表格”按钮时动态生成的。

我已将文本框、文件上传、按钮动态添加到表中。

我想通过单击表中的“上传”按钮从文件上传控件上传文件，但我不知道如何处理这些动态生成的控件。

“创建表”按钮的代码如下所示：

```
protected void Button1_Click(object sender, EventArgs e)
{
    //Button1.Visible = false;
    //Creat the Table and Add it to the Page
    Table table = new Table();
    table.Caption = "Table1";
    table.BackColor = System.Drawing.Color.BurlyWood; 
    Page.Form.Controls.Add(table);
    for (int i = 0; i < 3; i++)
    {
        TableRow row = new TableRow();
        row.BorderStyle = BorderStyle.Ridge;

        for (int j = 0; j <= 10; j++)
        {
            TableCell cell = new TableCell();
            cell.BorderWidth = 5;
            cell.BorderStyle = BorderStyle.Ridge;
            cell.BorderColor = System.Drawing.Color.Azure; 
            for (j = 0; j <= 0; j++)
            {
                Label lbl = new Label();
                lbl.ID = "lblCCRow" + i + "Col" + j;
                lbl.Text = "CC NO. " + i + " ";
                lbl.Width = 100;
                // Add the control to the TableCell
                cell.Controls.Add(lbl);
            }

            for (j = 1; j <= 1; j++)
            {                        
                Label lbl = new Label();
                lbl.ID = "lblRow" + i + "Col" + j;
                lbl.Width = 100;
                lbl.Text = Convert.ToString(DateTime.Now.Day) + "/" + Convert.ToString(DateTime.Now.Month) + "/" + Convert.ToString(DateTime.Now.Year);
                // Add the control to the TableCell
                cell.Controls.Add(lbl);
            }

            for (j = 2; j <= 7; j++)
            {                        
                TextBox tb = new TextBox();
                tb.Width = 100;
                tb.ID = "txtBoxRow" + i + "Col" + j;
                tb.Text = "";
                // Add the control to the TableCell
                cell.Controls.Add(tb);
            }

            for (j = 8; j <= 8; j++)
            {
                FileUpload fileUp = new FileUpload();
                fileUp.ID = "flupRow" + i + "Col" + j;
                fileUp.Width = 220;
                cell.Controls.Add(fileUp);
            }

            for (j = 9; j <= 9; j++)
            {                        
                Button btnUpld = new Button();
                btnUpld.Width = 100;
                btnUpld.ID = "btnUpRow" + i + "Col" + j;
                btnUpld.Text = "Upload";
                cell.Controls.Add(btnUpld);
            }

            for (j = 10; j <= 10; j++)
            {
                Label lbl = new Label();
                lbl.ID = "lblRow" + i + "Col" + j;
                lbl.Text = "[ Status ]";
                lbl.Width = 100;
                // Add the control to the TableCell
                cell.Controls.Add(lbl);
             }

             row.Cells.Add(cell);
         }

         // Add the TableRow to the Table
         table.Rows.Add(row);
     }
     //table.Rows.Add(row);  
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:45:34.520

附加事件处理程序 btnUpld 运行时。

```
 Button btnUpld = new Button();
            btnUpld.Width = 100;
            btnUpld.ID = "btnUpRow" + i + "Col" + j;
            btnUpld.Text = "Upload";
             btnUpld.Click += new EventHandler(btnUpld_Click); 
           cell.Controls.Add(btnUpld);

//code behind
private void btnUpld_Click(object sender, System.EventArgs e) 
{
// Add upload functionality here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:46:04.097

```
 btnUpload.Click +=new EventHandler(btnUpload_Click); 
```

使用上面的代码将控件动态添加到表单后添加一个事件处理程序，然后使用以下代码添加创建一个处理此事件的函数

```
 protected void btnEdit_Click(object sender, EventArgs e)
     {

     } 
```

# vba - 使用 VBA 重命名 Word 样式

> ID：15208677
> 
> 赞同：1
> 
> 时间：2013-03-04T18:40:45.110
> 
> 标签：vba, ms-word

我有一批已经格式化的文件（WinWord），我想在任何地方使用相同的名称来进行逻辑匹配的样式。

有没有办法通过 VBA 重命名许多 WinWord 2007 样式，或者只能手动完成？

感谢您花时间思考我的问题。马塞尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-20T20:14:51.490

关于如何重命名链接样式有一个重要说明。通过样式本身重命名样式时，我偶然发现了这个技巧`NameLocal`：重命名也改变了样式的字符格式。对于链接样式，应该使用被重命名`NameLocal`的`LinkStyle`样式的 。这是重命名这两种类型的样式的完整功能。`Debug`用于查看样式被重命名的内容和方式。

```
Function rename_style(ByVal p_Styles As Styles, ByVal From_n As String, ByVal to_n As String) As Boolean
  Dim v_Style As Style
  On Error Resume Next
  Set v_Style = p_Styles(From_n)
  If Not v_Style Is Nothing Then
    If v_Style.Linked Then
      v_Style.LinkStyle.NameLocal = to_n
    Else
      v_Style.NameLocal = to_n
    End If
    Set v_Style = p_Styles(From_n)
    'Accessing through p_Styles to avoid the use of the localized name
    If v_Style Is Nothing Then
      Debug.Print From_n; " -> "; to_n; " failed"
      rename_style = False
    Else
      Debug.Print From_n; " -> "; to_n
      rename_style = True
    End If
  Else
    rename_style = False
    Debug.Print From_n; " skipped"
  End If
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:27:59.643

您应该能够通过写入其 NameLocal 属性来更改用户定义样式的名称。例如：

```
ActiveDocument.Styles(3).NameLocal = "abbracadabra" 
```

将 Styles 集合中第三种样式的名称更改为“abbracadabra”。究竟如何自动化这取决于名称更改是否有逻辑。

我认为这不适用于内置样式（如标题 1）；相反，您会得到一个别名样式。在 Word 2010 中，这最终看起来像“[旧样式名称]，[新样式名称]”。我对这些了解不多。

因此，例如，如果您想将“-changed”附加到每个样式名称，您可以执行以下操作：

```
For Each aStyle in ActiveDocument.Styles
    If aStyle.BuiltIn = False Then aStyle.NameLocal = aStyle.NameLocal & "-changed"
Next aStyle 
```

# android - Android 上的简单标记检测（不是传统的增强现实），可能使用 OpenCV

> ID：15208691
> 
> 赞同：2
> 
> 时间：2013-03-04T18:42:04.967
> 
> 标签：android, opencv, augmented-reality, ros, andar

对于我在大学的最后一年项目，我正在扩展一个名为 Rviz for Android 的应用程序。这是一款适用于 Android 平板电脑的应用程序，它使用 ROS（机器人操作系统）来显示来自机器人的信息。该项目的主要意图本质上与传统的增强现实相反——我不是将数字化的东西投影到现实世界的视图上，而是将来自平板电脑相机的现实世界的视图投影到数字化视图上。世界（抽象地图）。该应用程序的预期目的是当平板电脑四处移动时，现实世界的视图应该在地图上移动。

为了在屏幕上移动摄像头的视图，我使用平板电脑的加速度计并计算行进距离。这本质上是有缺陷的，因此，运动远非准确（这本身并不重要——它是我报告的好材料）。为了改善摄像机源的移动，我希望使用放置在现实世界中预定义位置的标记，目的是如果检测到标记，视图会跳转到标记的位置。不幸的是，虽然有许多处理标记检测的 SDK（例如 Qualcomm SDK），但它们都面向适当的增强现实（也就是说，在标记上覆盖一些东西）。

到目前为止，我确定的唯一两个可能有用的框架是 OpenCV（看起来确实很有前途，尽管我对 C++ 不是很熟悉）和 AndAR，它似乎又非常专注于传统的 AR 用途，但我可能能够修改。这些框架中的任何一个都适合吗？还有其他方法可以实现解决方案吗？

如果它有帮助，[这是我正在扩展的应用程序的源代码](https://bitbucket.org/zimmrmn3/rviz-for-android/src/75d912943a6d?at=default)，[这是 Android 上 ROS 的源代码](https://code.google.com/p/rosjava/source/browse/?repo=android)（使用相机的代码在“android_gingerbread_mr1”文件夹中。我还可以提供一个链接到我对 Rviz 的扩展，如果这也有帮助的话。非常感谢！

编辑：我目前遇到的主要问题是尝试集成访问相机的两个单独的类（OpenCV 中的 JavaCameraView 和 ROS 中的 CameraPreviewView）。他们都需要同时活跃，但他们做的事情不同。我确信我可以将它们结合起来。如前所述，如果需要，我将链接到/上传有问题的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:45:20.923

查看OpenCV 文档中关于[模板匹配的部分。](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)[这个线程](https://stackoverflow.com/questions/11095113/how-to-detect-and-match-a-marker-using-opencv-template-matching)也可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:00:02.563

所以我设法找到了解决我的问题的方法，这与我想象的完全不同。所有的图像处理都卸载到计算机上，并由 ROS 节点执行。此节点使用名为[ArUco](http://www.uco.es/investiga/grupos/ava/node/26)的库来检测标记。标记由库提供的单独程序生成，每个标记都有自己的唯一 ID。

当检测到标记时，会发布一条包含标记 ID 的 ROS 消息。平板电脑上的应用程序接收到消息，并根据它接收到的标记移动现实世界的视图。它工作得很好，虽然它有点不可靠，因为我必须使用低图像质量来更快地渲染和传输图像。这就是我的解决方案！一旦项目完全完成，我可以在这里发布我的源代码。

# php - 具有 Composer 依赖项的大型项目不断需要修改 json 文件

> ID：15208692
> 
> 赞同：2
> 
> 时间：2013-03-04T18:42:07.550
> 
> 标签：php, dependency-management, composer-php

我在一个包含大量作曲家包的大型项目中有一个问题/工作流程，其中我的 json 文件经常需要用新版本的包更新，否则作曲家将不会更新。其他语言的其他依赖管理器将在没有手动交互的情况下（在大多数情况下）即时处理这种类型的情况。Composer 是否缺少我的约定或更好的方法？手动在线检查包页面并再次同步所有包非常耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:01:06.560

如果您需要具有灵活约束的包，例如`1.*`或类似，那么当您运行`composer update`它时，它将更新您到与此约束匹配的最新版本。您所描述的绝对不是预期的工作流程，所以我认为您在某处有误解。

# javascript - 广播网站的“正在播出”

> ID：15208693
> 
> 赞同：0
> 
> 时间：2013-03-04T18:42:08.667
> 
> 标签：javascript, timer, message

我正在尝试使用 JS 创建广播网站的“当前正在播出”部分，但目前卡住了。到目前为止，我有：

```
if (now.getDay() == monday && now.getHours() < 12.15) {
    dtString = "Non-Stop Music";
}
else if (now.getDay() == monday && now.getHours() < 13) {
    dtString = "More Great music"; 
```

如果我删除“now.getDay”部分，它会起作用，但我需要每天都是独一无二的。

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:43:53.433

我的猜测是现在不是约会？你现在是这样创建的：

```
var now = new Date(); 
```

此外，getDay 返回一个数字而不是字符串。星期一 = 1

你`now.getDay() == 1`想要的也是如此。我认为 getHours 不会返回小数。它将是 12 或 13，而不是 12.15 或类似的东西。如果您想检查一个小时的分数，您将需要结合使用 get minuet 和 get hours。

阅读 javascript 日期规范并查看您期望返回的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:44:12.377

getDay() 返回一个整数。查看[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)

什么是“星期一”？

0 = 星期日，1 = 星期一等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:45:26.793

[`now.getDay()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)返回当天的整数。因此，对于星期一，您需要检查 now.getDay() 是否返回 1。

例如，如果我要在您的代码上实现它

```
if (now.getDay() == 1 && now.getHours() < 12.15) {
    dtString = "Non-Stop Music";
} 
```

# wpf - 更改项目 DisplayMemberPath MVVM 时 WPF ListView 未更新

> ID：15208696
> 
> 赞同：2
> 
> 时间：2013-03-04T18:42:18.097
> 
> 标签：wpf, listview, mvvm

我有绑定到 ObservableCollection 的 WPF ListView。

这是我的列表视图：

```
<ListView 
                BorderBrush="#6797c8" 
                BorderThickness="2" 
                ItemsSource="{Binding Path=MainCategoriesCollection, UpdateSourceTrigger=PropertyChanged}" 
                DisplayMemberPath="Category" 
                SelectedValuePath="MainCatID" 
                SelectedItem="{Binding MainCategorySelectedItem}"
                SelectedIndex="{Binding MainCategorySelectedIndex, Mode=TwoWay}"
                FontSize="14"/> 
```

这是我的ItemSource：

```
 private ObservableCollection<DataModel.MainCategories> mainCategoriesCollection;
public ObservableCollection<DataModel.MainCategories> MainCategoriesCollection
{
    get
    {
        if (mainCategoriesCollection == null)
        {
            mainCategoriesCollection = new ObservableCollection<DataModel.MainCategories>();
        }
        return mainCategoriesCollection;
    }
    set
    {
        mainCategoriesCollection = value;
        RaisePropertyChanged("MainCategoriesCollection" );
    }
} 
```

我有有线问题。当我从 MainCategoriesCollection 添加项目或删除项目时，我的 ListView 会毫无问题地更新，但是当我采用特定项目并更改代表“DisplayMemberPath”的项目属性时，我无法在 ListView 中看到更改。我调试了这个问题，发现 MainCategoriesCollection 中存在更改，但我的 ListView 拒绝显示它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:44:38.140

确保 DisplayMemberPath 属性位于具有所有 INotifyPropertyChanged 内容的视图模型上，即该属性是否可观察？

# android - Android Galaxy S3 图标未出现在 phonegap 构建中

> ID：15208697
> 
> 赞同：0
> 
> 时间：2013-03-04T18:42:20.253
> 
> 标签：android, cordova, icons, config, galaxy

我已经在这个问题上工作了好几天了。我知道解决方案有各种建议，但我敢说，我都试过了。最重要的是，当我在 PhoneGap Build 之后下载我的应用程序时，我的 Galaxy S3 上没有出现图标。我在 Dreamweaver 中构建了应用程序，压缩文件，将其上传到 PG，然后使用我的 QR 阅读器下载构建。该应用程序有效，图标未出现。我试过让默认的android图标出现但没有成功。我已经尝试使用[https://github.com/phonegap/phonegap-start](https://github.com/phonegap/phonegap-start)演示，并且再次使用没有图标。这是我在 config.xml 文件中的内容：

```
<icon src="icon.png" />
<icon src="icon_96.png" width="96" height="96" gap:platform="android" gap:density="xhdpi"/>
<icon src="icon_72.png" width="72" height="72" gap:platform="android" gap:density="hdpi"/>
<icon src="icon_48.png" width="48" height="48" gap:platform="android" gap:density="mdpi"/>
<icon src="icon_36.png" width="36" height="36" gap:platform="android" gap:density="ldpi"/> 
```

我什至尝试将文件复制到 Eclipse 中并稍微更改文件路径以反映 Eclipse 为您构建的图标，但没有成功。我真的很茫然，觉得我已经用尽了主要的在线资源来寻找答案。我也觉得答案就在我面前并且相对简单（通常是，对吗？）哈，非常感谢任何帮助。最好的祝愿，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T14:52:23.423

我的测试设备是华硕平板电脑，我发现如果我指定了特定于 android 的图标，那么我会得到默认的 phonegap 图标。但是，如果我指定一个与平台无关的图标和 IOS 图标，那么我的应用程序图标将用于 android（可能是根文件夹中的默认图标。）

不知道问题是什么 - 文件格式似乎没有任何问题，因为它显示默认值就好了。我已经尝试了 config.xml 文件中文件位置和宽度/高度与密度的所有排列。

# ajax - 为 ajax 调用设置 .Net MVC http 错误代码

> ID：15208699
> 
> 赞同：0
> 
> 时间：2013-03-04T18:42:25.063
> 
> 标签：ajax, asp.net-mvc

我正在尝试设置我的控制器，以便他们可以使用 http 错误代码将响应发送到 ajax 调用。例如，我有我的登录 ajax 调用和控制器操作：

```
[System.Web.Mvc.HttpPost, System.Web.Mvc.AllowAnonymous]
public ActionResult Login(string userName, string password, bool rememberMe, string returnUrl)
{
    [...]
    var loginError = new HttpResponseMessage(HttpStatusCode.Unauthorized)
    {
        Content = new StringContent("Lorem ipsum 2 " + ErrorMessages.LOGINERROR),
        ReasonPhrase = "Lorem ipsum 2 " + ErrorMessages.LOGINERROR
    };
    throw new HttpResponseException(loginError);
}

$.ajax({
    type: "POST",
    url: url,
    data: data,
    dataType: "text",
    success: callBack,
    error: function () { console.log("Error..."); },
    statusCode : {
        401: function (result) {
            console.log("Login failed (401): " + result);
        }
    }
}); 
```

我在想有几件事我做的不对，如果有人能指出他们会很可爱！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:58:09.480

而不是抛出异常，只返回提供一些内容和设置响应代码的 ActionResult。对于您的情况，您可以创建一些我称之为 ExtendedJsonResult 的东西：

```
public class ExtendedJsonResult : JsonResult
{
    public ExtendedJsonResult(object data)
    {
        base.Data = data;
    }

    public int StatusCode { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.StatusCode = this.StatusCode;
        base.ExecuteResult(context);
    }
} 
```

然后在控制器中

```
return new ExtendedJsonResult("Some error")
{
    StatusCode = 401,
}; 
```

您也可以只返回现有的`HttpStatusCodeResult`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:28:50.710

看看这个解决方案： [ASP.NET MVC Ajax Error handling](https://stackoverflow.com/questions/4707755/asp-net-mvc-ajax-error-handling)

**Darin Dimitrov**使用动作过滤器编写了非常好的解决方案：

```
public class MyErrorHandlerAttribute : FilterAttribute, IExceptionFilter
{
    public void OnException(ExceptionContext filterContext)
    {
        filterContext.ExceptionHandled = true;
        filterContext.Result = new JsonResult
        {
            Data = new { success = false, error = filterContext.Exception.ToString() },
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
    }
} 
```

然后，您可以为所有状态代码编写客户端错误处理并将其用于 ajax 请求。

# orchardcms - 什么是立体声类型

> ID：15208700
> 
> 赞同：5
> 
> 时间：2013-03-04T18:42:28.517
> 
> 标签：orchardcms, orchardcms-1.6

我已经搜索了 Orchard 文档（以及一些 google-fu），但找不到任何可以解释 StereoType 是什么以及何时（如果可能）适合创建或扩展 StereoType 的内容。

有人可以解释一下它们是什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T19:59:37.610

将其视为内容类型类别。示例是小部件、菜单项。如果您正在构建一个需要处理多个具有共同基本内容的内容类型的功能，您绝对可以提出自己的功能。

# vba - 我的 VBA 代码有什么问题？

> ID：15208706
> 
> 赞同：-2
> 
> 时间：2013-03-04T18:42:46.690
> 
> 标签：vba, excel

请帮助我了解我的代码错误的来源：

```
Private Sub Workbook_SheetCalculate(ByVal Sh As Object)
    Dim MyRange as double
    Dim ErrorCheck as Boolean
    Set MyRange = Sheets(1)
    ErrorCheck = WorksheetFunction.IsError(MyRange)
    If ErrorCheck = True Then MsgBox "ERROR on the Sheet"
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T18:52:29.163

```
Set MyRange = Sheets(1) 
```

这会尝试创建一个名为 MyRange 的工作表对象，而不是范围对象。（正如 A Webb 指出的那样，您将 DIM MyRange 设为 double
如果您尝试检查 Sheets(1) 上的 1 个或多个单元格是否包含您不能在一系列单元格上使用 IsError 来检测该范围​​是否包含错误。

# html - 在悬停时添加底部边框，仅 CSS

> ID：15208708
> 
> 赞同：4
> 
> 时间：2013-03-04T18:42:59.273
> 
> 标签：html, css

悬停时如何使线条仅出现在链接图像的底部？

我可以在悬停时显示内边框，但我只想显示边框底部。

这是我到目前为止所拥有的，即使它使用的是大纲属性而不是边框​​：

```
#links a img, #links a{ border: none; float: left; }
#links a{ margin: 3px; }
#links a:hover{ outline: 3px solid black; } 
```

**未悬停：**

![在此处输入图像描述](../Images/41c70760d4953fdf7dd7660e1241b3b1.png)

**悬停：**

![在此处输入图像描述](../Images/84238dd694b8165a7f6e5322ef9a6a12.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-07T21:13:38.203

在不影响链接大小（边框附加到元素外部）的情况下获得相同结果的一种选择是使用插入框阴影。

在您的示例中，您将更`a:hover`改为以下内容：

```
#links a:hover { 
    box-shadow: inset 0 -10px 0 0 cyan; 
} 
```

你可以在这里看到小提琴：[https ://jsfiddle.net/kLLxkdw4/](https://jsfiddle.net/kLLxkdw4/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T18:45:57.580

只需在 上分配`border-bottom`属性`:hover`：

```
#links a:hover{
    border-bottom: 3px solid #00f; /* or whatever colour you'd prefer */
    outline: 3px solid black;
} 
```

如果应该将短语“锚定图像”表示`img`为元素*内*，那么`a`我建议：

```
#links a:hover img {
    border-bottom: 3px solid #00f; /* or whatever you'd prefer */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-08T04:47:06.280

试试我刚刚专门为你写的这段代码。此解决方案回答您关于添加`border-bottom`on的问题`:hover`。它甚至远远超出了这一点，并且还改变`background`了整个`#link`元素`:hover`的`CSS transitions`.

[CODEPEN 演示](http://codepen.io/chrisN/pen/mPvmVa)

**HTML 标记**

```
<div id="links">
  <a href="#">Example Link</a>
</div> 
```

**CSS 效果和过渡**

```
#links a{
  color:#fafafa;
  text-decoration:none;
  background-color:#8b0000;
  padding:15px;
  border-radius:5px;
  font-size:1.3em;
  transition: all 0.3s ease-in-out;
  -webkit-transition: all 0.3s ease-in-out;
  -moz-transition: all 0.3s ease-in-out;

}
#links a:hover{
  background-color:#fff;
  color:#002f5b;
  border-bottom:5px solid #002f5b;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-20T17:59:09.340

如果您希望它与您的`img`内部一起`a`使用，您可以在锚点上使用`pseudo`-element，然后对其应用边框。还。为避免边框附加到链接的外部，您应该改用插图`box-shadow`：

```
a {
  display: inline-block;
  position: relative;
}

a:hover:before {
  content: '';
  width: 100%;
  height: 100%;
  position: absolute;
  left: 0;
  bottom: 0;
  box-shadow: inset 0 -20px 0 #11c0e5;
}

a img {
  display: block;
}
```

```
<a href="#">
  <img src="http://oi65.tinypic.com/241jlzk.jpg"/>
</a>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T12:12:03.410

**试试这个**
#links a:hover{border-bottom: inset 8px #000; }

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-29T12:52:59.327

将您的图像放在一个 div 中并添加一个蒙版 div。

```
#mask {
  position: absolute;
  z-index: 2;
  box-sizing: border-box;
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  border-bottom: 3px solid transparent;
}
#mask:hover {
  border-bottom: 3px solid cyan;
}
#outerDiv {
  display: inline-block;
  position: relative;
}
img {
  display: block;
}
```

```
<div id='outerDiv'>
  <img src="https://www.gravatar.com/avatar/087039a00851e75ff483470e3aba89c9?s=32&d=identicon&r=PG" />
  <div id='mask'></div>
</div>
```

# javascript - Mongoose 子文档与嵌套模式

> ID：15208711
> 
> 赞同：143
> 
> 时间：2013-03-04T18:43:00.807
> 
> 标签：javascript, node.js, mongodb, mongoose

我很好奇在我的主架构中使用子文档与更深层的利弊：

```
var subDoc = new Schema({
  name: String
});

var mainDoc = new Schema({
  names: [subDoc]
}); 
```

或者

```
var mainDoc = new Schema({
  names: [{
    name: String
 }]
}); 
```

我目前到处都在使用子文档，但我主要想知道我可能遇到的性能或查询问题。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-05-11T04:53:45.870

根据[文档](http://mongoosejs.com/docs/subdocs.html#altsyntax)，它完全相同。但是，使用模式也会添加一个`_id`字段（只要您没有禁用该字段），并且可能会使用更多资源来跟踪子文档。

> **备用声明语法**
> 
> *v3 中的新*功能 如果您不需要访问子文档模式实例，您也可以通过简单地传递对象文字来声明子文档 [...]

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-20T18:20:03.617

如果您有在模型的各个部分中重复使用的模式，那么为子文档定义单独的模式可能很有用，这样您就不必重复自己。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-01-09T05:52:29.090

如果是静态文档或者由于性能影响不超过几百个，则应该使用嵌入式文档。我已经讨论过这个问题一段时间了。最近，作为 MongoDB 解决方案架构师的 Asya Kamsky 写了一篇关于“使用子文档”的文章。

我希望这对正在寻找解决方案或最佳实践的人有所帮助。

[http://askasya.com/post/largeembeddedarrays](http://askasya.com/post/largeembeddedarrays)上的原始帖子。您可以在[https://stackoverflow.com/users/431012/asya-kamsky上找到她的 stackoverflow 个人资料](https://stackoverflow.com/users/431012/asya-kamsky)

> 首先，我们必须考虑为什么我们会想做这样的事情。通常，我会建议人们在获取此文档时嵌入他们总是想取回的东西。这样做的另一面是你不想在文档中嵌入你不想用它回来的东西。
> 
> 如果你将我执行的活动嵌入到文档中，它一开始会很好用，因为我的所有活动都在那里，只需一次阅读，你就可以取回你可能想向我展示的所有内容：“你最近点击了这个和这里是你的最后两条评论吗？”但是六个月后会发生什么，我不在乎我很久以前做过的事情，除非我专门去寻找一些旧活动，否则你不想向我展示它们？
> 
> 首先，您最终会返回越来越大的文档并关心其中越来越小的部分。但是你可以使用投影来只返回一些数组，真正的痛苦是磁盘上的文档会变大，即使你只将其中的一部分返回给最终用户，它仍然会被读取，但是因为只要我活跃，我的活动就不会停止，因此文档将继续增长和增长。
> 
> 最明显的问题是最终您会达到 16MB 的文档限制，但这根本不是您应该关心的问题。不断增长的文档每次必须重新定位到磁盘上时都会产生越来越高的成本，即使您采取措施减轻碎片的影响，您的写入总体上也会不必要地冗长，从而影响整个应用程序的整体性能。
> 
> 您还可以做一件事，这将完全破坏应用程序的性能，那就是对这个不断增长的数组进行索引。这意味着每次重定位具有该数组的文档时，需要更新的索引条目的数量与该文档中索引值的数量成正比，并且数组越大，该数字越大是。
> 
> 当数组非常适合数据模型时，我不希望这会吓到您使用数组 - 它们是文档数据库数据模型的强大功能，但与所有强大的工具一样，它需要在正确的情况下使用并且应该小心使用。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-09-02T15:16:33.813

基本上，创建一个变量`nestedDov`并把它放在这里`name: [nestedDov]`

简单版：

```
var nestedDoc = new Schema({
  name: String
});

var mainDoc = new Schema({
  names: [nestedDoc]
}); 
```

JSON 示例

```
{
    "_id" : ObjectId("57c88bf5818e70007dc72e85"),
    "name" : "Corinthia Hotel Budapest",
    "stars" : 5,
    "description" : "The 5-star Corinthia Hotel Budapest on the Grand Boulevard offers free access to its Royal Spa",
    "photos" : [
        "/photos/hotel/corinthiahotelbudapest/1.jpg",
        "/photos/hotel/corinthiahotelbudapest/2.jpg"
    ],
    "currency" : "HUF",
    "rooms" : [
        {
            "type" : "Superior Double or Twin Room",
            "number" : 20,
            "description" : "These are some great rooms",
            "photos" : [
                "/photos/room/corinthiahotelbudapest/2.jpg",
                "/photos/room/corinthiahotelbudapest/5.jpg"
            ],
            "price" : 73000
        },
        {
            "type" : "Deluxe Double Room",
            "number" : 50,
            "description" : "These are amazing rooms",
            "photos" : [
                "/photos/room/corinthiahotelbudapest/4.jpg",
                "/photos/room/corinthiahotelbudapest/6.jpg"
            ],
            "price" : 92000
        },
        {
            "type" : "Executive Double Room",
            "number" : 25,
            "description" : "These are amazing rooms",
            "photos" : [
                "/photos/room/corinthiahotelbudapest/4.jpg",
                "/photos/room/corinthiahotelbudapest/6.jpg"
            ],
            "price" : 112000
        }
    ],
    "reviews" : [
        {
            "name" : "Tamas",
            "id" : "/user/tamas.json",
            "review" : "Great hotel",
            "rating" : 4
        }
    ],
    "services" : [
        "Room service",
        "Airport shuttle (surcharge)",
        "24-hour front desk",
        "Currency exchange",
        "Tour desk"
    ]
} 
```

例子：

[![在此处输入图像描述](../Images/0cc14245a81f482925b8b1474b51c624.png)](https://i.stack.imgur.com/A7pug.png)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-03-04T22:11:06.363

我认为这是由 SO 上的多个帖子在其他地方处理的。

一些：

*   [MongoDB 关系：嵌入还是引用？](https://stackoverflow.com/questions/5373198)
*   [我应该如何在 MongoDB 中实现这个模式？](https://stackoverflow.com/questions/4662530)
*   [MongoDB Schema Design - 许多小文档还是更少的大文档？](https://stackoverflow.com/questions/3038703)

关键是这里没有单一的答案，只有一组相当复杂的权衡。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-06T15:28:21.580

两者有一些区别：

*   使用嵌套模式有助于验证。

*   嵌套模式可以在其他模式中重用。

*   嵌套模式将“_id”字段添加到子文档，除非您使用“_id：false”

# clojure - 用户是否可以定义特殊形式的宏？

> ID：15208713
> 
> 赞同：1
> 
> 时间：2013-03-04T18:43:13.390
> 
> 标签：clojure

看看一些特殊形式的扩展方式：

```
(macroexpand '(String. "foo"))
(macroexpand '('a))
;; etc 
```

...并意识到它们是作为宏实现的，这让我很好奇用户定义的宏的语法形式限制是什么。到目前为止，我所有的宏在语法形式上都类似于函数。但是，例如，是否有可能定义一个如下所示的宏？

```
(macroexpand '(myprintln-foo))
;;=> (println "foo")
(macroexpand '(myprintln-zoo))
;;=> (println "zoo") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:45:44.347

限制是宏必须有一个有效的名称并返回一个表达式。例如，它不能在调用命名空间中的表达式的末尾添加一些东西，也不能返回两个表达式按顺序插入到调用命名空间中（而不是通过将其包装在一个表达式中来使其成为一个表达式`do`。你可以写一个宏来定义很多宏：

```
(defmacro make-printers [& names]
  `(do ~@(for [name  names]
           `(defmacro ~(symbol (str "myprintln-" name)) []
              (println ~(str name))))))

user> (make-printers foo bar)
#'user/myprintln-bar
user> (myprintln-foo)

foo
nil 
user> (myprintln-bar) 
bar
nil 
```

宏只是返回 s 表达式的函数。该表达式可以是任何东西，只要它是有效的 s 表达式（函数 arg arg ...）。宏的名称必须与要调用的宏完全匹配，因此宏的名称不能是宏的一部分。[您可以使用新的可扩展阅读器](https://github.com/edn-format/edn)功能接近您所询问的内容，尽管这不是您所需要的。

ps：值得指出的是，这个例子违反了宏俱乐部的第一条规则，是“不卫生的”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:15:08.193

如果我理解正确，您正在尝试编写[阅读器宏](http://clojure.org/reader#The%20Reader--Macro%20characters)，而简短的回答是“不，这是不可能的”（或者至少不支持）。

看看[这篇文章](http://fulldisclojure.blogspot.com/2009/12/how-to-write-clojure-reader-macro.html)及其评论

# c# - 如何使用给定的约定配置实体框架？

> ID：15208717
> 
> 赞同：0
> 
> 时间：2013-03-04T18:43:26.823
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-4.1

我有一个 MVC4 项目，其中已经创建了 DB (Sql2008) 和 Models (C#)，因此无法更改它们的名称。我开始为我正在使用的每个类使用带有自定义配置的 EF4.1，因此在创建模型时，所有内容都会映射到数据库。大多数情况下，所有表的名称为“tbl_X_”+ entityName，主键为 entityName +“ *ID”。其他人有“tbl* ”+ entityName 和其他主键。为了避免重复代码，我创建了一个自定义 EntityTypeConfiguration：

```
 public abstract class BaseConfiguration<T> : EntityTypeConfiguration<T>
        where T: class
    {
        public BaseConfiguration()
        {
            Map(x => x.ToTable("tbl_X_" + typeof(T).Name));

            var parm = Expression.Parameter(typeof(T), typeof(T).Name);
            var propExpression = Expression.Lambda<Func<T, int>>
                (Expression.Convert(Expression.Property(parm, "Id"), typeof(int)), parm);
            Property(propExpression).HasColumnName(typeof(T).Name + "_ID");
        }
    } 
```

这在大多数情况下都可以正常工作，除非表名不遵循该约定并且我将表与其给定名称映射：

```
 public class CompanyConfiguration : BaseConfiguration<Company>
    {
        public CompanyConfiguration()
        {
            Map(x => x.ToTable("tbl_Company"));
            //Key does follow convention
        }
    } 
```

当我构建时，我得到了错误

> “‘公司’类型的属性只能映射一次。”

我绝对知道会发生这种情况，因为我映射了两次，一次在基础上，另一次在派生类上。如果tableName 和primaryKeyName 都有第二个映射，我想知道是否可以覆盖第一个。

提前致谢！

**编辑：一些实体需要歧视。**

```
Map(x => x.Requires("discriminatorColumn")
                            .HasValue(value)
                            .HasColumnType("dataType")
                            .IsRequired())
                            .ToTable("tbl_TableName"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:34:34.040

BaseConfiguration 的构造函数总是在 CompanyConfiguration 的构造函数之前运行，因此在 CompanyConfiguration 的代码块运行之前总会有一个 map 动作执行。我不知道如何覆盖地图调用以允许第二次调用它。但是，解决此问题的一种选择可能是使用一些重载的构造函数来解决此问题。

像孩子班的东西：

```
public class CompanyConfiguration : BaseConfiguration<Company>
{
    private readonly string customTableMap = "tbl_Company"; 

    public CompanyConfiguration() : base(customTableMap) { }
} 
```

和父母：

```
public abstract class BaseConfiguration<T> : EntityTypeConfiguration<T>
    where T: class
{
    private readonly string defaultTableMap = "tbl_X_" + typeof(T).Name;

    public BaseConfiguration(): this(defaultTableMap) { }

    public BaseConfiguration(string tableMap)
    {
        Map(x => x.ToTable(tableMap));

        var parm = Expression.Parameter(typeof(T), typeof(T).Name);
        var propExpression = Expression.Lambda<Func<T, int>>
            (Expression.Convert(Expression.Property(parm, "Id"), typeof(int)), parm);
        Property(propExpression).HasColumnName(typeof(T).Name + "_ID");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:36:14.623

赞赏的答案，但没有满足所有要求。这是我到目前为止得到的解决方案：

我将所有 table 和 primaryKey 映射移至 BaseConfiguration 类：

```
public class BaseConfiguration<T> : EntityTypeConfiguration<T>
    where T : class
{
    public BaseConfiguration()
    {
        TableNameConvention();
        PrimaryKeyConvention();
    }

    private void TableNameConvention()
    {
        switch (typeof(T).Name)
        {
            case "entityA":
                ToTable("vw_entityA");
                break;
            case "entityB":
                ToTable("tbl_entityB");
                break;
            case "entityC":
                Map(x => x.Requires("discriminatorColumn")
                        .HasValue(value)
                        .HasColumnType("dataType")
                        .IsRequired())
                        .ToTable("tblentityC");
                break;

            default:
                ToTable("tbl_X_" + typeof(T).Name);
                break;
        }
    }

    private void PrimaryKeyConvention()
    {
        var type = typeof(T);
        var parm = Expression.Parameter(type, type.Name);
        var propExpression = Expression.Lambda<Func<T, int>>
                (Expression.Convert(Expression.Property(parm, "Id"), typeof(int)), parm);

        switch (type.Name)
        {
            case "entityB":
                Property(propExpression).HasColumnName("IdEntityB");
                break;
            default:

                Property(propExpression).HasColumnName(type.Name + "_ID");

                break;
        }

    }

} 
```

然后在我的自定义配置类中，我只映射其他列、外键、关系。例如：

```
 public class EntityXConfiguration : BaseConfiguration<EntityX>
    {
        public EntityXConfiguration ()
        {
            ////Not needed here anymore. Moved to baseconfiguration
            //Property(x => x.Id).HasColumnName("EntityX_ID");
            //ToTable("tbl_X_EntityX");
            ////

            Property(x => x.ParentId).HasColumnName("EntityXParent_ID");
            Property(x => x.Name).HasColumnName("EntityXName");

            Ignore(x => x.EntityXProperty);

            ////Other mappings...
        }
    } 
```

随意添加您的评论！

谢谢！

# elasticsearch - elasticsearch/kibana 查询未在 _all 索引中找到文本

> ID：15208719
> 
> 赞同：0
> 
> 时间：2013-03-04T18:43:36.033
> 
> 标签：elasticsearch

我们有一个用于存储日志文件的 elasticsearch kibana 设置。日志文件是使用 Flume elasticsearch sink 编写的。

如果我搜索，`@fields.environment:"sm-local-mlamley"`那么我会找到我期望的日志事件。这些日志事件的 @message 字段为`2013-03-04 10:05:41.7262|INFO|FlumePOC.Program|SM 101123123 log message fudgesicle`

但是，如果我搜索，`"fudgesicle"`则找不到它们。事实上，即使我搜索整个 @message 字段，我也找不到该条目。

我该如何确定为什么弹性搜索似乎没有为数据编制索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:34:48.763

您可以直接查询 Elasticsearch，如下所示：

```
http://elasticsearch-host:port/index-name/index-type/_search?q=search-term 
```

您可以使用通配符作为名称和类型，包括空字符串。如果你添加`&pretty`到最后，它会稍微格式化 JSON 响应。所以你可以试试：

```
http://elasticsearch-host:9200///_search?q=fudgesicle&pretty 
```

这将显示日志事件是否已进入 ES。如果它在那里，您可能会更好地了解 Kibana 找不到它的原因。

# android - Android 自定义 IME 使用默认屏幕键盘

> ID：15208722
> 
> 赞同：8
> 
> 时间：2013-03-04T18:43:43.167
> 
> 标签：android, android-softkeyboard, ime, on-screen-keyboard

在为 Android 创建 IME 时，您需要通过覆盖许多 InputMethodService 方法（例如 onCreateInputView()）来支持屏幕键盘 (OSK)。

有没有办法从用户默认的 IME 中使用屏幕键盘。例如，假设 Android 默认 IME 是他们的默认 IME。使用我的 IME 时，有一种方法可以使用 Android 默认 IME 中的 OSK，而不必手动处理整个事情（包括预测等）。我不想用这个 IME 替换屏幕键盘上的用户。

或者，我可能会提取 android 默认键盘的源代码并使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:05:03.330

你绝对没有办法做到这一点。将默认 IME 视为一个单独的应用程序，您无法从另一个应用程序控制它。我的建议是从 AOSP 中提取 LatinIME 源代码，然后使用它来创建您自己的 IME。相信我，PlayStore 中几乎 99%（为了安全起见，但我认为是 100%）的键盘都使用 LatinIME 作为起点。键盘上有很多事情要处理。

# ajax - 如何在渲染动作中包含关联对象

> ID：15208727
> 
> 赞同：0
> 
> 时间：2013-03-04T18:43:58.780
> 
> 标签：ajax, ruby-on-rails-3, has-many, belongs-to

我有一个有很多帖子的故事模型：

`story.rb`：

```
 has_many      :posts, :dependent  =>  :destroy 
```

`post.rb`：

```
 belongs_to    :story, :touch => true 
```

我使用 AJAX 向我的`stories#index`操作发出 get 请求，并在该操作中生成一个响应，该响应由一组符合我的搜索参数的 Stories 组成。我在回复中包含了一些额外的数据，例如是否有`current_user`，以及我的搜索查找故事的日期：

```
 def index
    ajax_response = {}
    ajax_response[:currentUser] = user_signed_in? ? current_user : "no current user"
    searched_through_date = Stories.last.created_at
    @stories = get_stories(params,searched_through_date)
    if @stories && @stories.length << 200
      ajax_response[:stories] = @stories 
      ajax_response[:searched_through_date] = searched_through_date
    else #only happens if there are too many responsive stories
      ajax_response[:error] = {:type => "Response too large", :number_of_stories => @stories.length }
    end 
    render :json => ajax_response
  end 
```

现在我想更改响应，以便我返回的每个故事都有一个附加属性 ，`:latest_post`它包含属于该故事的最新帖子。作为一个相对的 nOOb，我在修改我的故事对象时遇到了麻烦，以便它们包含这个新的属性/关联，然后作为响应的一部分与故事对象一起呈现。

任何帮助将不胜感激！

**编辑：**

以下是该`get_stories`方法的相关部分：

```
 def get_stories(params)
    q = get_story_search_params(params) 
    Story.search_with_params(q).limit(q[:limit]).offset(q[:offset])
  end

  def get_story_search_params(params)
    q = {}
    q[:limit] = params[:limit].blank? ? 25 : params[:limit].to_i 
    q[:text_to_search] = params[:text_to_search].blank? ? nil : params[:text_to_search]
    q[:offset] = params[:offset].blank? ? 0 : params[:offset]
    return q
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:00:33.790

我在 rabl gem 的帮助下解决了这个问题。想出正确的 DSL 语法被证明有点容易试错。关键是`object false`在`stories/index.json.rabl`视图中使用并充分利用 rabl partials。希望它可以帮助某人，我在这里附上了我的工作代码。

```
#stories/index.json.rabl

object false

node(:currentUser) do
  if user_signed_in?
    partial('users/show', :object => current_user)
  else
    "no current user"
  end
end

node(:stories) do 
  partial('stories/list', :object => @stories )
end

node(:searched_through_date) { |m| @searched_through_date } 
```

* * *

```
#stories/show.json.rabl

object @story

attributes  :address, :category, :created_at, :username 

node :latest_post do |story| 
  { :post => partial("posts/show", :object => story.posts.first) }
end 
```

* * *

```
#stories/list.json.rabl

collection @stories, :object_root => "story"

extends "stories/show" 
```

* * *

```
#user/show.json.rabl

object @user

node :user do |u|
  { :email => u.email, :username => u.username, :preferred_post_to_facebook => u.preferred_post_to_facebook, 
    :preferred_tweet_to_twitter => u.preferred_tweet_to_twitter, :home_address => u.home_address, 
    :home_lat => u.home_lat, :home_lng => u.home_lng, :suspended => u.suspended }
end 
```

# c# - 根据控件可见性调整表单大小

> ID：15208730
> 
> 赞同：4
> 
> 时间：2013-03-04T18:44:05.173
> 
> 标签：c#, .net, winforms

我正在开发 .net win forms 应用程序。我有三个控件放在一个表单中。这些控件根据条件可见。当这些控件不可见时，我会在表单底部看到一个空白区域。我想在控件不可见时消除空格，并且在控件可见时表单大小应自动调整大小。我应该使用哪些选项/设置/代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:52:25.807

[这是从此处](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/14daa166-68a2-429f-8b6d-678648319e4a)使用面板的人的示例

```
private void panel3_VisibleChanged(object sender, EventArgs e)  
{  
if (panel3.Visible == false)  
{  
if (panel3.Tag == null)  
panel3.Tag = panel3.Height;  
panel2.Height += (int)panel3.Tag;  
}  
else 
{  
if (panel3.Tag == null)  
panel3.Tag = panel3.Height;  
panel2.Height -= (int)panel3.Tag;  
}  
} 
```

如果您只使用表单，则可以使用 Form.size 属性

```
form1.Size = New Size(150, 200) 
```

# php - 在脚本中通过电子邮件发送到 PHP 服务器端验证

> ID：15208731
> 
> 赞同：0
> 
> 时间：2013-03-04T18:44:07.453
> 
> 标签：php

经常使用这个站点作为参考点，但在一些代码方面真的很挣扎。

我正在构建一个回调表单，我最初构建了客户端验证（javascript），但很快意识到我需要服务器端 php 验证，因此尝试将其添加到我的脚本中。它在其功能中起作用，除了当我收到电子邮件时没有显示任何信息。我真的不明白为什么 $name 没有像以前不使用验证时那样提取信息。代码如下：

PHP：

```
<?php

if (isset($_POST['Form'])) {
    import_request_variables("p", "z");
    $missingfields = array();
    $required = array("Name"=>"Name", "Company"=>"Company");

    while (list($var, $val) = each($required)) {
        if (isset($zForm[$var]) && $zForm[$var] != '') {
            // check this value further here
        } else {
            $missingfields[$var] = $val;
        }
    }

    if (count($missingfields)) {
        print "You missed out one or more fields:<br />";

        while(list($var, $val) = each($missingfields)) {
            print $val . "<br />";
        print "Please click back on your browser and enter the required fields.<br />";
        }
    } else {
        /* Subject and E-mail Variables */

$emailSubject = 'Call-back Request';
$webMaster = 'hello@microsoft.com';

/* Gathering Data Variables */

$name = $_POST['Form[Name]'];
$email = $_POST['email'];
$telephone = $_POST['telephone'];
$company = $_POST['company'];
$message = $_POST['message'];

$body = <<<EOD
<br><hr><br>
Name: $name <br>
Email: $email <br>
Telephone: $telephone <br>
Company: $company <br>
Message: $message <br>
EOD;

$headers = "From: $email\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($webMaster, $emailSubject, $body, $headers);

/* Results rendered as HTML */

$theResults = <<<EOD
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head>
    <title>Thankyou</title>
    <link href="style.css" rel="stylesheet" type="text/css" media="screen" />  
</head>
<body>
    <div id="content">
        <div id="contactthankyouheader">
            <h2>Thankyou for Contacting Us</h2></br>
        </div>
        <div id="contactthankyou">
            <p>Someone will be in contact with you shortly.</p>
        </div>
        <div id="contactthankyou2">
            <p>Please click the link below to return to the homepage.     
 </p>
        </div>
        <div id="contactthankyoulink">
            <a href="index.htm"><h4>Homepage</h4></a>
        </div>
    </div>
</body>
</html>
EOD;
echo "$theResults";
    }
}

?>

HTML:

<html>
<form method="post" action="callback-function.php">
Name: <input type="text" name="Form[Name]" /> (required)<br />
Company: <input type="text" name="Form[Company]" /> (required) <br />
Age: <input type="text" name="Form[Age]" /><br /><br />
Languages known:<br />
<input type="checkbox" name="Form[Languages][]" value="PHP" checked="checked">    
PHP</input>
para><input type="checkbox" name="Form[Languages][]" value="CPP"> C++</input>
<input type="checkbox" name="Form[Languages][]" value="Delphi"> Delphi</input>
<input type="checkbox" name="Form[Languages][]" value="Java"> Java</input>
<input type="submit" />
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:47:06.797

`Form`来自您的表单作为数组发送。所以你应该把它当作一个数组：

```
$name = $_POST['Form']['Name'];
$company = $_POST['Form']['Company']; 
```

而且您的表格上缺少`Email`, `Message`.. 等。

`Languages`也是一个数组，您可以将 implode 用于列表：

```
$Languages = implode(',', $_POST['Languages']); 
```

# r - R - 绘制两个不同大小的向量

> ID：15208734
> 
> 赞同：2
> 
> 时间：2013-03-04T18:44:17.453
> 
> 标签：r, plot

```
a <- c(1,2,3,4,5,6,7,8,9,10)
b <- c(4,5,6,3,7,8,5,2,5,8)
plot(a,b) 
```

好的，当然，这行得通

```
a <- c(1,2,3,4,5,6,7,8,9,10)
b <- c(4,2,3,1,3)
plot(a,b) 
```

是否可以将 a 的前两项绘制到 b 的第一项，将 a 的后两项绘制到 b 的第二项......等等。

有任何想法吗？

而我不想做的是..

```
a <- c(1,2,3,4,5,6,7,8,9,10)
b <- c(4,4,2,2,3,3,1,1,3.3)
plot(a,b) 
```

只是因为我的数组更大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T18:45:36.777

是的！试试这个

```
plot(a,rep(b, each=2)) 
```

# python - 如何使用 QueryString 启动网站？

> ID：15208737
> 
> 赞同：2
> 
> 时间：2013-03-04T18:44:34.887
> 
> 标签：python, python-3.x, cherrypy, mako

我在 Cherrypy 中编写了服务器并使用 Mako。

我有一个变量（json_data，其中是文件 [json] 的内容），其中包含在我的网站上工作的数据。

要更改这些参数，我必须使用查询字符串

简化我在数据管理方面的工作。

当我的服务器 url 打开时，我需要在我的服务器 url 上有我的变量 (json_data)。

( `localhost:8100?=json_data?json_data=demo_title%24+Demo+title+%23+`) 我知道将分隔符的 python 替换为 javascript。

**我希望在启动我的网站时在 url 上添加变量 json_data 但是如何？**

信息：

json_data=

```
demo_title%24+Demo+title+%23+proc1_script%24+script.sh+parameters+%23+proc1_chk_make%24+on+%23+outputp2_value%24++%23+demo_input_description%24+hola+mundo+%23+outputp4_visible%24+on+%23+outputp4_info%24++%23+inputdata1_max_pixels%24+1024000+%23+tag%24++%23+outputp1_id%24+nanana+%23+proc1_src_compresion%24+zip+%23+proc1_chk_cmake%24+off+%23+outputp3_description%24++%23+outputp3_value%24++%23+inputdata1_description%24+input+data+description+%23+inputp2_description%24+bien%3F+%23+inputp3_description%24+funciona+%23+proc1_cmake%24+D+CMAKE_BUILD_TYPE%3Astring%3DRelease++%23+outputp2_visible%24+on+%23+outputp3_visible%24+on+%23+outputp1_type%24+header+%23+inputp1_type%24+text+%23+demo_params_description%24+va+bien+%23+outputp1_description%24++%23+inputdata1_type%24+image2d 
```

用程序更新

```
import cherrypy
import urllib
#import requests

class Root(object):
    @cherrypy.expose
    def index(self):
        jsondict = [('foo', '1'), ('foo', '2')]
        p = urllib.urlencode(jsondict)
        #url = urllib.urlopen("http://localhost:8080?%s" % params)
        #urlVar = 1
        #urlVar2 = 2
        #requests.get("localhost:8080/?", params =p)
        raise cherrypy.HTTPRedirect("localhost:8080?" + params)

cherrypy.config.update({

        'server.socketPort': 8080

})
cherrypy.quickstart(Root()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:09:35.530

我不得不问，你为什么需要这样做？这些变量不能作为处理请求的方法的默认值吗？

# javascript - 将移动用户重定向到桌面版本

> ID：15208740
> 
> 赞同：0
> 
> 时间：2013-03-04T18:44:39.157
> 
> 标签：javascript, wordpress, redirect, mobile, detect

我有一个 Wordpress 网站，它使用设备检测将用户在其移动设备上的浏览重定向到使用以下内容的特定页面：

```
<script>
if( /Android|webOS|iPhone|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent) ) {
window.location = "176.32.230.17/domain.co.uk/m";
}
</script> 
```

此代码当前位于 domain.co.uk 的主页模板上。就在打开正文标签之后。检测和重定向效果很好，但是，我需要在该移动页面上提供指向该网站桌面版本的链接。所以只是一个简单的链接：

```
<a href="http://176.32.230.17/domain.co.uk/?ref=desktop">Link back to desktop website</a> 
```

这是因为它将用户引导回 domain.co.uk 地址，但是，因为检测/重定向代码的位置是在 domain.co.uk 的主页模板上，所以用户会被重定向回移动版本。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:49:10.527

您需要以某种方式传达用户已经被重定向一次的事实。如果您使用的是 PHP，则可以使用 GET 变量进行条件重定向。如果您只是使用 Javascript，则可以使用 cookie。HTML5 也支持某种数据存储，但我对此并不熟悉。

编辑：实际上，您可以在地址上添加一个 GET 变量，甚至不使用 PHP。只需使用获取地址`window.location.href`并查看变量是否仅使用 Javascript 设置。

EDIT2：评论中放了太多东西，所以让我把它放在这里。链接应更改为：

```
<a href="http://176.32.230.17/domain.co.uk/?ref=desktop#redirected">Link back to desktop website</a> 
```

并且重定向代码可以更改为：

```
<script>
if( /Android|webOS|iPhone|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent) &&
        !window.location.href.contains("#redirected") ) {
    window.location = "176.32.230.17/domain.co.uk/m";
}
</script> 
```

# php - 回显图像而不是 PHP 中的 URL

> ID：15208744
> 
> 赞同：1
> 
> 时间：2013-03-04T18:44:46.127
> 
> 标签：php, image, api, instagram

我正在尝试在 PHP 中回显图像，但是我只实现了 URL。这是使用 Instagram API。

```
echo $pics['data'][0]['images']['standard_resolution']['url']; 
```

令我困惑的是在`<img src= />`没有代码破坏的情况下在哪里使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T18:46:36.450

```
echo "<img src=\"".$pics['data'][0]['images']['standard_resolution']['url']."\">"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T15:32:19.267

您将需要使用复杂的语法将复杂变量类型的值输出到双引号和解析字符串中。

例子：

```
echo "<img src='{$pics['data'][0]['images']['standard_resolution']['url']}'>"; 
```

输出：

```
<img src='http://nicenicejpg.com/350/150'> 
```

[示例的 php 键盘](http://codepad.viper-7.com/yw4fWD)

[来自关于字符串的 PHP 文档，更具体地说是双引号字符串。](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

> 任何具有字符串表示的标量变量、数组元素或对象属性都可以通过此语法包含在内。只需将表达式写成与它出现在字符串之外的相同方式，然后将其包装在 { 和 } 中。

我相信这种包含字符串的方法增加了可读性，否则在将值用于字符串之前将值分配给简单变量没有任何优势。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T18:54:25.563

假设它`$pics['data'][0]['images']['standard_resolution']['url'];`指的是一个图像 url，你会想要做类似的事情......

```
<? $url = $pics['data'][0]['images']['standard_resolution']['url'];
...
echo "<img src=\"".$url."\">";
?> 
```

这与 Duniyadnd 建议的相同，但使输出“部分”更具可读性。

# ruby-on-rails - 在 Ruby on Rails 中安装 ActiveAdmin 时出现此错误？

> ID：15208746
> 
> 赞同：0
> 
> 时间：2013-03-04T18:44:53.423
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

我是 Rails 新手，我正在尝试安装 activeadmin

我添加`gem 'activeadmin'`到我的 gem 文件中。然后我运行`bundle update`。

我然后`rails g active_admin:install`，这工作

接下来我迁移了数据库，它也可以工作

但是，当我去时`localhost:3000/admin`，我收到此错误：

```
ExecJS::RuntimeError in Active_admin/devise/sessions#new

Showing /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activeadmin-0.5.1/app/views/layouts/active_admin_logged_out.html.erb where line #12 raised:

SyntaxError: cannot return a value from a constructor: "this" in class DropdownMenu
  (in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activeadmin-0.5.1/app/assets/javascripts/active_admin/components/jquery.aa.dropdown-menu.js.coffee)
Extracted source (around line #12):

9:     <%= stylesheet_link_tag style.path, style.options.dup %>
10:   <% end %>
11:   <% ActiveAdmin.application.javascripts.each do |path| %>
12:     <%= javascript_include_tag path %>
13:   <% end %>
14: 
15:   <%= csrf_meta_tag %> 
```

目前我不确定在哪里： Active_admin/devise/sessions#new 是。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:53:43.037

我删除了

```
//=require active_admin/base 
```

来自active_admin.js，它起作用了！

希望这可以帮助任何有同样问题的人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:56:03.260

它是更新后的咖啡脚本解析器出现的一个已知错误 - 在 github 问题中是一个固定分支引用：

> gem 'activeadmin'，github：'Daxter/active_admin'，分支：'bugfix/1773-execjs'

如果您在活动管理员中遇到任何此类错误，请尝试此操作，直到他们将修复合并到

# r - 空间数据 xyz 到矩阵

> ID：15208750
> 
> 赞同：4
> 
> 时间：2013-03-04T18:45:10.223
> 
> 标签：r

我有一个带有 LON、LAT、VALUE 的大型数据框（100,000 行），我想将其转换为矩阵。（EPSG 中的坐标：3035）。

我用以下命令尝试了 reshape2 包

```
acast(df, lon~lat, value.var="value") 
```

效果很好。

当我将坐标转换为“EPSG：4326”并运行相同的代码时，它就出现了错误。

```
str(df1)
data.frame':    168643 obs. of  3 variables:
 $ x: num  28 28.1 27.8 28 28.1 ...
 $ y: num  71.1 71 71 71 71 ...
 $ z: num  0.0893 0.093 0.085 0.0886 0.0924 ...
> aa=acast(df1, x~y, value.var="z")
Error in seq_len(n) : argument must be coercible to non-negative integer
In addition: Warning message:
In match(seq_len(n), overall, nomatch = NA) : NAs introduced by coercion 
```

对于像下面给出的一个可重复的示例，代码可以工作，但是为什么像我这样的大型数据框，我得到了错误。它与坐标的变换有什么关系吗？

```
x=c(-8.084929925, -8.01229693, -7.939629855, -7.866928803, -7.794193877, -7.721425179,    -7.648622813, -7.575786885, -7.502917498, -7.430014757, -7.357078769, -7.284109638, -7.211107472, -7.138072377, -7.065004461, -6.99190383)

y=c(53.07977473, 53.09085897, 53.10189964, 53.11289671, 53.12385014, 53.1347599, 53.14562596, 53.15644829, 53.16722685, 53.17796162, 53.18865255, 53.19929962, 53.2099028, 53.22046205, 53.23097734, 53.24144865)

z=c(0.065, 0.063, 0.062, 0, 0, 0, 0.061, 0.062, 0.064, 0.06, 0.069, 0.074, 0.079, 0.08, 0.092, 0.10)

df=data.frame(x,y,z)
acast(df, x~y, value.var="z") 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:07:46.993

确信这是有道理的给定数据，而提供的示例并非如此，请执行以下操作：

```
 mtx <- matrix(NA, nrow=length(unique(df$x)), ncol=length(unique(df$y)) )
 mtx[cbind(order(df$x), order(df$y))] <- df$z 
```

您将丢失有关 x 和 y 距离的任何信息。如果需要，可以将有序的唯一值添加到矩阵 dimnames 中。

```
dimnames(mtx) <- list( sort(unique(df$x)), sort(unique(df$y) ) ) 
```

目前，它们似乎确实是相当有规律的空间，因此也许并非所有空间都丢失了。在确定什么是“唯一”值之前，您会发现测量误差需要某种舍入操作：

```
> diff(df$x)
 [1] 0.07263300 0.07266708 0.07270105 0.07273493 0.07276870 0.07280237 0.07283593 0.07286939
 [9] 0.07290274 0.07293599 0.07296913 0.07300217 0.07303509 0.07306792 0.07310063
> diff(df$y)
 [1] 0.01108424 0.01104067 0.01099707 0.01095343 0.01090976 0.01086606 0.01082233 0.01077856
 [9] 0.01073477 0.01069093 0.01064707 0.01060318 0.01055925 0.01051529 0.01047131 
```

看起来间隔距离有系统的增加/蠕变：

```
> diff(diff(df$x))
 [1] 3.4080e-05 3.3977e-05 3.3874e-05 3.3772e-05 3.3668e-05 3.3562e-05 3.3459e-05 3.3354e-05
 [9] 3.3247e-05 3.3143e-05 3.3035e-05 3.2929e-05 3.2821e-05 3.2715e-05
> diff(diff(df$y))
 [1] -4.357e-05 -4.360e-05 -4.364e-05 -4.367e-05 -4.370e-05 -4.373e-05 -4.377e-05 -4.379e-05
 [9] -4.384e-05 -4.386e-05 -4.389e-05 -4.393e-05 -4.396e-05 -4.398e-05 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:14:21.013

如果数据集不是太大，并且 LAT 和 LON 变量是整数，您可能需要尝试使用 for 循环加载矩阵。即使有 100k 个元素，也不会花费超过一分钟的时间来完成。

```
n = max(df$LON)
m = max(df$LAT)
x = matrix(0, nrow=m, ncol=n)
for (i in nrows(df)){
    x[df[i,"LAT"], df[i,"LON"]] = df[i,"VALUE"]
} 
```

# r - R从列表元素创建一个热向量

> ID：15208751
> 
> 赞同：1
> 
> 时间：2013-03-04T18:45:10.457
> 
> 标签：r, plyr

我正在尝试为输入文件处理一些字符串。首先，我将字符串从向量转换为列表，然后减少为唯一值。

接下来，我想将每个列表元素中的单词转换为分隔符为 ':1' 的字符串。

我可以使该函数在单个列表元素上工作，但是当我尝试使用`ldply`from`plyr`为整个列表执行此操作时，我只能得到每个列表元素中的最后一个单词。

这是代码：

```
library(plyr)

df1 <- data.frame(id = seq(1,5,1), string1 = NA)
head(df1)
df1$string1[1] <- "This string is a string."
df1$string1[2] <- "This string is a slightly longer string."
df1$string1[3] <- "This string is an even longer string."
df1$string1[4] <- "This string is a slightly shorter string."
df1$string1[5] <- "This string is the longest string of all the other strings."

df1$string1 <- tolower(as.character(df1$string1))
df1$string1 <- gsub('[[:punct:]]',' ',df1$string1)
df1$string1 <- gsub('[[:digit:]]',' ',df1$string1)
df1$string1 <- gsub("\\s+"," ",df1$string1)

fdList1 <- strsplit(df1$string1, " ", df1$string1)
fdList2 <- lapply(fdList1, unique)

toString1 <- function(x){
string2 <- c()
#print(length(x[1][1]))
#print(x)
#print(class(x))
for(i in length(x)){
string2 <- paste0(string2, x[[i]], ":1 ", collapse="")
}
string2
}

df2 <- ldply(fdList2, toString1)
df2 

v1 <- toString1(fdList2[2])
v1 
```

`df2`错了，我想要一个类似于`v1`每个列表元素的向量。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:03:36.140

解释为什么会这样：

你的功能`toString1`是问题：

```
toString1 <- function(x) {
    string2 <- c()
    for(i in length(x)) { 
        string2 <- paste0(string2, x[[i]], ":1 ", collapse="")
    }
    string2
} 
```

在 的情况下`toString1(fdList2[1])`，您正在传递一个列表。所以，没有用`for-loop`。如果您的功能是：

```
toString1 <- function(x) {
    string2 <- paste0(x[[1]], ":1 ", collapse="")
}
o <- toString1(fdList2[2])

# [1] "this:1 string:1 is:1 a:1 slightly:1 longer:1 " 
```

但是当你这样做时`ldply`，你传递的不是列表（`fdList2[2]`），而是一个向量（`fdList2[[2]]`）。因此，在这种情况下，您的功能应该是：

```
toString1 <- function(x) {
    string2 <- c()
    for(i in 1:length(x)) { 
        string2 <- paste0(string2, x[i], ":1 ", collapse="")
    }
    string2
}
ldply(fdList2, toString1)

#                                                                   V1
# 1                                          this:1 string:1 is:1 a:1 
# 2                      this:1 string:1 is:1 a:1 slightly:1 longer:1 
# 3                         this:1 string:1 is:1 an:1 even:1 longer:1 
# 4                     this:1 string:1 is:1 a:1 slightly:1 shorter:1 
# 5 this:1 string:1 is:1 the:1 longest:1 of:1 all:1 other:1 strings:1 
```

请注意`length(x)`for 循环中的更改为，`1:length(x)`因为它必须循环遍历所有元素，并且`x[[i]]`因为`x[i]`它是一个向量。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T19:00:46.953

为什么不只`sapply`在“fdList2”上使用？

```
> sapply(fdList2, paste0, ":1 ", collapse = "")
[1] "this:1 string:1 is:1 a:1 "                                         
[2] "this:1 string:1 is:1 a:1 slightly:1 longer:1 "                     
[3] "this:1 string:1 is:1 an:1 even:1 longer:1 "                        
[4] "this:1 string:1 is:1 a:1 slightly:1 shorter:1 "                    
[5] "this:1 string:1 is:1 the:1 longest:1 of:1 all:1 other:1 strings:1 "
> ## If you need a single column data.frame
> data.frame(V1 = sapply(fdList2, paste0, ":1 ", collapse = ""))
                                                                  V1
1                                          this:1 string:1 is:1 a:1 
2                      this:1 string:1 is:1 a:1 slightly:1 longer:1 
3                         this:1 string:1 is:1 an:1 even:1 longer:1 
4                     this:1 string:1 is:1 a:1 slightly:1 shorter:1 
5 this:1 string:1 is:1 the:1 longest:1 of:1 all:1 other:1 strings:1 
```

就此而言，如果这确实是您的目标，您可以进一步简化中间步骤。跳过“fdList1”和“fdList2”的创建，只需使用：

```
sapply(strsplit(df1$string1, " "), 
       function(x) paste0(unique(x), ":1 ", collapse = "")) 
```

# sql - ActiveRecord 中的 Rails 嵌套关系

> ID：15208753
> 
> 赞同：0
> 
> 时间：2013-03-04T18:45:15.623
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, rails-activerecord

我想用这些模型查询属于学校的部分：

```
School
  has_many :terms

Term
  belongs_to :school
  has_many :departments

Department
  belongs_to :term
  has_many :courses

Courses
  belongs_to :department
  has_many :sections

Section
  belongs_to :course 
```

我对如何做到这一点有点迷茫。

我希望能够调用属于学校的部分列表并从这些部分中找到学校（并查询它们之间的所有关系）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:06:50.773

如果您正在使用 Rails 3.1 或更高版本，您可以使用 :has_many :through 来帮助您获取每个学校内的部分。首先，您需要在模型中设置关系：

```
School
  has_many :terms
  has_many :departments, :through => :terms

Term
  belongs_to :school
  has_many :departments

Department
  belongs_to :term
  has_many :courses
  has_many :sections, :through => :courses

Courses
  belongs_to :department
  has_many :sections

Section
  belongs_to :course 
```

然后要获得学校的部分，您可以做...

```
School.first.departments.collect{|d| d.sections}.flatten! 
```

要获得某个部门所属的学校，您需要做的就是

`section.course.department.term.school`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:12:03.947

必须从上到下遍历每个模型。例如：

```
s = School.find(1)
s.terms.find(1).departments.find(1).courses.find(1).sections 
```

这将为您提供与`school_id = 1`

由于您的模型有很多级联，除非您想更改数据库架构，否则您必须这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:03:32.803

要从某个部分找到学校，您只需执行以下操作：

```
section.course.department.term.school 
```

如果没有太多的记录可以减慢速度，您可以通过执行以下操作获取给定学校的一组部分：

```
sections = []
school.terms.each do |term|
   term.departments.each do |department|
      department.courses.each do |course|
         course.sections.each do |section|
            sections << section
         end
      end
   end
end 
```

如果您需要进行任何进一步的处理，这也将使您能够访问中间的每个关系。

这是一个简洁的版本：

```
sections = school.terms.map(&:departments).flatten.map(&:courses).flatten.map(&:sections).flatten 
```

# hadoop - Hive 字段分隔符作为固定偏移量

> ID：15208757
> 
> 赞同：2
> 
> 时间：2013-03-04T18:45:28.930
> 
> 标签：hadoop, hive

谁能告诉：可以通过固定偏移量创建配置单元表并分隔值。例如，文件：col1 col2 col3 在这种情况下，1-4 个字符将在表中的第一列，5-8 个字符第二列，8-12 个字符第三。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T22:34:50.813

我用这种方式解决了类似的问题：

给定换行分隔行、固定偏移列的输入，

首先将数据输入到一个一列的表中，一个字符串

然后通过流式 hadoop 传递一个 Java 类或一个 Python 模块，它接受一行，并返回多个字段：

```
import sys

for line in sys.stdin:
    # line will have a newline on the end you don't want
    line = line.strip()
    output = []
    output.append(line[:4])
    output.append(line[4:8])
    output.append(line[8:12])
    print '\t'.join(output) 
```

您的配置单元脚本将如下所示：

```
CREATE TABLE IF NOT EXISTS input_raw(line STRING);

LOAD DATA LOCAL INPATH '${hiveconf:input}' OVERWRITE INTO TABLE input_raw;

CREATE TABLE IF NOT EXISTS processed_data(
field1 STRING,
field2 STRING
field3 STRING);

delete FILE processing.py;

add FILE processing.py;

INSERT INTO TABLE processed_data
SELECT
TRANSFORM (line)
USING 'python processing.py'
AS(field1, field2, field3)
FROM input_raw;

DROP TABLE input_raw; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T06:21:01.760

您也可以按照您的方法避免流式传输和 python 以及所有这些，但使用 hive substr()

```
CREATE TABLE IF NOT EXISTS input_raw(line STRING);

LOAD DATA LOCAL INPATH '${hiveconf:input}' OVERWRITE INTO TABLE input_raw;

CREATE TABLE IF NOT EXISTS processed_data(
field1 STRING,
field2 STRING
field3 STRING);

INSERT INTO TABLE processed_data
SELECT
substr(line,1,4) as field1,
substr(line,5,4) as field2,
substr(line,9,4) as field3
FROM input_raw;

DROP TABLE input_raw; 
```

# winforms - 在 Windows 窗体中仅显示具有透明度的图像？

> ID：15208767
> 
> 赞同：2
> 
> 时间：2013-03-04T18:46:00.233
> 
> 标签：winforms, windows-7, .net-4.0, aero, aero-glass

我试图让我的 Windows 窗体程序中的窗体无边界、不可见，并且`PictureBox`在其中有一个控件。PictureBox 图像设置为带有 alpha 通道的 PNG，以使其具有透明背景。

我想要的是表单完全不可见，但我希望具有正确透明度的 PNG 仍然可见。

这仅适用于带有 Aero 主题的 Windows 7，因此我可以使用 Areo 提供的任何快捷方式。

我尝试对表单使用透明度键，如下所示：

```
this.TransparencyKey = Color.Turquoise;
this.BackColor = Color.Turquoise; 
```

除了不是 100% 透明的 PNG 部分会拾取绿松石并给 PNG 周围带来丑陋的绿松石光晕，这几乎可以工作。

编辑：我发现[这篇文章](http://msdn.microsoft.com/en-us/library/ms997507.aspx)听起来可能是我正在寻找的，但它没有详细介绍实现。这对我有用吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:45:53.600

我在这里的源代码中找到了一个解决方案：

[http://www.codeproject.com/Articles/29184/A-lovely-goldfish-desktop-pet-using-alpha-PNG-and](http://www.codeproject.com/Articles/29184/A-lovely-goldfish-desktop-pet-using-alpha-PNG-and)

# objective-c - TFHpple 只解析 标签前的文本

> ID：15208773
> 
> 赞同：2
> 
> 时间：2013-03-04T18:46:16.610
> 
> 标签：objective-c, hpple

这是 HTML：

```
<p id="content">Every Sunday, our Chef proposes a buffet high in color.
<br>
A brunch either classic or on a theme for special events
<br>
Every Sunday at the restaurant
</p> 
```

这是我的代码：

```
NSString *u = [[NSString alloc] initWithFormat:@"http//mydomain.com%@", _currentNews.url];
NSURL *url = [NSURL URLWithString:u];
NSData *paHtmlData = [NSData dataWithContentsOfURL:url];

TFHpple *paParser = [TFHpple hppleWithHTMLData:paHtmlData];

NSArray *array = [paParser searchWithXPathQuery:@"//p[@id='content']/text()"];
TFHppleElement *ele= [array objectAtIndex:0];

_currentBody.text = [ele text];
_currentTitle.text = _currentNews.title; 
```

我想解析`<p id="content"></p>`没有之间的所有文本`<br>`

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:02:31.457

```
 NSString*  webSIteSource=[NSString stringWithContentsOfURL:[NSURL URLWithString:u]encoding:NSUTF8StringEncoding error:nil];

    webSIteSource=  [webSIteSource stringByReplacingOccurrencesOfString:@"<br />"withString:@" "];
    webSIteSource=[webSIteSource stringByReplacingOccurrencesOfString:@"<blockquote>" withString:@" "];
    webSIteSource=[webSIteSource stringByReplacingOccurrencesOfString:@"</blockquote>" withString:@" "]; 
```

只需将所有网站内容添加到 nsstring，然后删除所有“br”标签！而已！

# android - 通过多播从 VLC 流式传输到 Android

> ID：15208776
> 
> 赞同：1
> 
> 时间：2013-03-04T18:46:28.707
> 
> 标签：android, android-videoview, vlc, multicast

我已经使用 VideoView 构建了一个媒体播放器，以使用多播从 VLC 流式传输。我已经提供了 url，并且应用程序确实流式传输了视频。但是，当我检查网络活动（在资源监视器中）时，它显示 VLC 已连接到多播地址以及 android 设备的 IP，因此应用程序正在单播流式传输。

我正在使用的代码：

```
VideoView videoView = (VideoView) findViewById(R.id.video);

Uri uri= Uri.parse("rtsp://192.168.137.159:8554/test.sdp");
videoView.setVideoURI(uri);
videoView.start(); 
```

我还确保不会使用以下代码过滤掉多播数据包：

```
WifiManager wifi = (WifiManager)getSystemService( Context.WIFI_SERVICE );
if(wifi != null)
{
    WifiManager.MulticastLock lock = wifi.createMulticastLock("Log_Tag");
    lock.acquire();
} 
```

为了告诉 VideoView 从多播地址而不是直接从服务器流式传输，我还缺少其他什么吗？

我已经使用以下参数将 VLC 设置为流式传输到多播地址：#rtp{mux=ts,dst=239.255.12.42,sdp=rtsp://:8554/test.sdp}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T00:17:44.603

我认为 RTSP 的重点在于按需设置单播流。这按预期工作。如果需要，请使用 RTP 多播，也不要使用 RTSP。

# regex - 删除正则表达式敏感字符

> ID：15208780
> 
> 赞同：0
> 
> 时间：2013-03-04T18:46:40.690
> 
> 标签：regex, special-characters

我知道这听起来像是关于如何使用正则表达式删除某些字符的问题之一。但我的问题是，您将如何使用 PHP 甚至正则表达式从可能被识别为正则表达式函数操作的字符中清除用户输入字符串并将其弄乱。

我从用户那里获取一些输入并使用其中的一些来匹配 html。所以像 +、&、# 等特殊字符是不可取的。

谢谢

[编辑] PHP 的答案： $my_var = preg_replace($my_var);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:40:03.050

你需要告诉我们语言！！！而且你需要解释的更详细，你想要达到什么，“&”和“#”不是正则表达式的特殊字符。

许多语言都有从字符串中转义正则表达式特殊字符的功能。

例如：

在 .net 中：`Regex.Escape()`参见[Regex.Escape 方法](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)

在 Java 中：`Pattern.quote()`参见[类模式](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)

在 php 中：`preg_quote()`见[preg_quote](http://www.php.net/manual/en/function.preg-quote.php)

其他语言也有类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:48:28.527

```
$str = preg_replace("/[\+\&\#]/is" , "" , $str); 
```

# c# - 根据选择的 RadPane 更改元素的可见性

> ID：15208784
> 
> 赞同：2
> 
> 时间：2013-03-04T18:46:52.843
> 
> 标签：c#, silverlight, xaml, mvvm, telerik

我已经简化了一些代码和一个问题来询问我将如何实现这一点 - 我希望我的代码在选择 RadPane Page1 时，RadPane Linked1 可见，但 RadPane Linked2 不可见（反之亦然）。实现这一点的最佳方法是什么，请记住我非常严格地遵守 MVVM。

我有一个 Telerik RadPane，有两个标题，都显示不同的页面：

```
<telerik:RadPane Header="Page 1" Name="Page1" IsSelected="{Binding IsPage1Selected, Mode=TwoWay}">
<vws:Page1 />
</telerik:RadPane>
<telerik:RadPane Header="Page2" Name="Page2" IsSelected="{Binding IsPage1Selected, Mode=TwoWay, Converter={StaticResource NotBooleanConverter}}">
<vws:Page2 />
</telerik:RadPane> 
```

然后，我有一个容器，其中包含两个元素 Linked1 和 Linked2，位于页面下方。

```
 <telerik:RadSplitContainer InitialPosition="DockedBottom">
           <telerik:RadPaneGroup>
                <telerik:RadPane Header="Linked1">
                    <vws:Linked1  />
                </telerik:RadPane>
                <telerik:RadPane Header="Linked2">
                    <vws:Linked1  />
                </telerik:RadPane>                
           </telerik:RadPaneGroup>
        </telerik:RadSplitContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:45:06.063

如果您在 Silverlight 5 中工作，则可以使用 Ancestor Binding 实现此目的。

```
<vws:Linked1 Visibility="{Binding IsSelected, 
                RelativeSource={RelativeSource AncestorType=telerik:RadPane}, 
                Converter={StaticResource MyBoolToVisibilityConverter}}" /> 
```

# jquery - jQuery - RCarousel 幻灯片 - 动态宽度？

> ID：15208787
> 
> 赞同：2
> 
> 时间：2013-03-04T18:47:01.287
> 
> 标签：jquery, jquery-ui, slideshow, grid-layout

是否可以使 rcarousel 与液体布局/自适应 UI 一起工作？

它似乎只适用于固定的宽度和高度......如果我使用这样的百分比，它就不会运行：

```
<script type="text/javascript"> 
   jQuery(function($) {
      $( "#carousel" ).rcarousel( {width: 100%, height: 100%, visible:1, step:1});
   });
</script> 
```

唯一一次指定尺寸是在上面的代码中，所以如果没有百分比，它如何处理调整大小事件（例如 iPad 从横向变为纵向）？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:49:45.947

没关系，我刚刚制作了自己的轮播，可以在自适应 UI 中运行（如果您熟悉 jQueryUI 库，则确实不需要 rCarousel）。

# ios - 如何获取字符串中第三个和第四个分隔字符之间的子字符串？

> ID：15208788
> 
> 赞同：0
> 
> 时间：2013-03-04T18:47:03.203
> 
> 标签：ios, objective-c

我正在使用 API 创建一些图像。当我发出 HTTP 请求时，我返回一个字符串，如下所示：

```
{"img": "?svg=mscfP39TT", "errors": [],"naturalWidth": 199.671,"actualWidth": 199.671} 
```

如果我附加`?svg=mscfP39TT`到站点的 URL，它会显示图像。为了得到这个子字符串，我目前正在这样做：

```
NSArray *splitStrings = [imgLoc componentsSeparatedByString:@"\""];
NSString *URL = [@"site.com/" stringByAppendingString:[splitStrings objectAtIndex:3]]; 
```

我很好奇是否有更好或更有效的方法可以在不涉及数组的情况下做到这一点？我知道我只想要一个子字符串，其余的对我来说没用。有没有办法将字符串从第三个`"`到第四个子串起来？

我在表达我要查找的内容时遇到问题，如果这是重复的，请见谅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:49:28.713

与其对返回的确切字符串进行破解和假设，不如使用`NSJSONSerialization`该类对其进行解析，因为它似乎是有效的 JSON。

```
NSData *strData = [stringResponse dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:strData options:kNilOptions error:NULL];
NSString *query = [dict objectForKey:@"img"];
NSString *urlStr = [@"site.com/" stringByAppendingString:query]; 
```

# c - 从 ARP 条目（Linux 内核）获取给定 IP 的 MAC 地址

> ID：15208792
> 
> 赞同：1
> 
> 时间：2013-03-04T18:47:10.883
> 
> 标签：c, linux, linux-device-driver

我正在编写一个内核模块，并且需要对于给定的 IP 来验证内核的 ARP 缓存中是否有针对该 IP 的 ARP 条目。如果它存在，我需要从这个 ARP 条目中获取 MAC 地址。

我在这一点上试图理解这个`arp_find`功能，`usr/src/linux-version/net/ipv4/arp.c`但我不太明白......有人可以发布一个例子来说明我如何完成这项任务或指导我做一些可以帮助我的事情吗？我将不胜感激！

**编辑：**我的 IP 地址存储为`struct in_addr`

**编辑#2：**我找到了答案——对于那些有这个问题的人，请`neigh_lookup`检查`net/core/neighbour.c`. 该`pkey`参数只是指向您的 IPv4 地址 ( `struct in_addr`) 的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:23:10.370

我认为在Linux内核中，ARP缓存只存储邻居的mac地址。您可以使用 arp_ioctl() 或遵循 arp_ioctl() 方法来实现您的任务。arp_ioctl() 做了两个主要的事情： (1) 找到 net_device；（2）arp查找；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T15:06:27.643

我有同样的问题。

我需要获取与特定 IP 关联的邻居的 MAC 地址。此外，在我的情况下，可能 IP<->MAC 映射没有出现在 ARP 缓存中。所以在这种情况下，我需要先发送 ARP 请求。

这是我目前得到的一个*肮脏的解决方案：*

```
struct mac_addr {
    uint8_t addr[ETH_ALEN];
};

static int resolve_neighbour(__be32 const src_ip, __be32 const dst_ip, struct mac_addr* const mac) {
    int rc = 0;
    struct neighbour *neigh;
    struct rtable* const rt = ip_route_output(&init_net, dst_ip, src_ip, 0, 0);

    if (IS_ERR(rt)) {
        LOG(KERN_ERR, "Failed to find ip route"); // TODO: add dst and src ip
        return PTR_ERR(rt);
    }

    rcu_read_lock();
    neigh = dst_neigh_lookup(&rt->dst, &dst_ip);
    if (neigh) {
        if (neigh->nud_state & NUD_VALID) {
            neigh_ha_snapshot(mac->addr, neigh, rt->dst.dev);
        } else {
            PDEBUG("neigh is not valid. Sending ARP");
            if ((rc = neigh_resolve_output(neigh, NULL))) {
                LOG(KERN_ERR, "Failed to resolve neighbour");
            } else {
                rc = -EAGAIN;
            }
        }
        neigh_release(neigh);
    } else {
        LOG(KERN_ERR, "Failed to get neighbour"); // TODO: add dst ip
        rc = -ENONET;
    }
    rcu_read_unlock();
    return rc;
}

static int foobar(void) {
    int rc = 0;
    __be32 const dst_ip = 0x0a01000a; // FIXME: TODO: get it from register or from tre user
    __be32 const src_ip = htonl(0); // FIXME: TODO: get it from register or from the user
    struct mac_addr mac;
    size_t i;
    enum {RESOLVE_TRIES = 3, RESOLVE_TIMEOUT_MS = 100};

    for (i = 0; i < RESOLVE_TRIES; ++i) {
        if ((rc = resolve_neighbour(src_ip, dst_ip, &mac)) == -EAGAIN) {
            msleep(RESOLVE_TIMEOUT_MS);
        } else {
            break;
        }
    }

    if (rc) {
        LOG(KERN_ERR, "Failed to get neighbour MAC address");
        return rc;
    }

    PDEBUG("DST MAC %02X:%02X:%02X:%02X:%02X:%02X",
            mac.addr[0], mac.addr[1], mac.addr[2],
            mac.addr[3], mac.addr[4], mac.addr[5]);

    return rc;
} 
```

# jakarta-ee - 获取鉴别器列的值

> ID：15208793
> 
> 赞同：3
> 
> 时间：2013-03-04T18:47:19.997
> 
> 标签：jakarta-ee, jpa

我有一个使用鉴别器列的 JPA 实体。但是我需要访问鉴别器的值作为实体的字段之一。我该怎么做。如果我创建一个与鉴别器列匹配的方法，我会在部署时收到以下错误：

```
Caused by: org.hibernate.MappingException: Repeated column in mapping for entity: com.example.PortEntity column: type (should be mapped with insert="false" update="false") 
```

实体定义：

```
@Entity(name="Port")
@DiscriminatorColumn(name="type",
         discriminatorType=DiscriminatorType.STRING,
         length=10)
@DiscriminatorValue(value="port")
@Table(name="vPorts")
@XmlRootElement(name="port")
public class PortEntity {

     ...

     @Column(name="type", length=20, insert=false, update="false")
     @XmlAttribute(name="type")
     public String getType() { ... }

     public void setType(String newType) {... }

     ...

     @Entity(name="SeaPort")
     @DiscriminatorValue(value="seaport")
     @XmlRootElement(name="seaport")
     public static class Sea
     extends PortEntity { ... }

     @Entity(name="AirPort")
     @DiscriminatorValue(value="seaport")
     @XmlRootElement(name="seaport")
     public static class Air
     extends PortEntity { ... }

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-06-11T10:59:40.267

```
@Transient
public String getDecriminatorValue() {
    return this.getClass().getAnnotation(DiscriminatorValue.class).value();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T19:17:43.240

如果您想要访问值，`@DiscriminatorColumn(name="type", discriminatorType=DiscriminatorType.STRING, length=10)`您可以添加如下方法：

```
@Transient
public String getDecriminatorValue() {
    return limitString(this.getClass().getName(), 10);
} 
```

如果您想在 JQPL 查询中访问它，您需要使用`TYPE`运算符： `SELECT pe FROM PortEntity as pe WHERE TYPE(pe) = SomePortEntity`

# ruby - 为什么这段代码不符合我的预期

> ID：15208794
> 
> 赞同：2
> 
> 时间：2013-03-04T18:47:27.657
> 
> 标签：ruby, puzzle

我希望这段代码：

```
def print_call_and_return(string, &block)
  puts string
  block.call unless !block
  "return"
end

puts print_call_and_return("parameter") do
  puts "block"
end 
```

打印：

```
parameter
block
return 
```

但是它实际上打印以下内容：

```
irb(main):011:0> puts print_call_and_return("parameter") do
irb(main):012:1* puts "block"
irb(main):013:1> end
parameter
return
=> nil 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:58:25.590

这确实有效：

```
puts print_call_and_return("parameter") { puts "block" } 
```

我认为原因与运算符优先级有关。`do/end`具有比`{}`块更高的优先级。

```
puts print_call_and_return("parameter") do
  puts "block"
end 
```

是相同的

```
puts(print_call_and_return("parameter")){ puts "block" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:58:40.633

print_call_and_return("parameter") 打印“parameter”并返回“return”

所以到目前为止的输出是“参数”

puts print_call_and_return("parameter") 对返回值执行 put，即“return”

所以到目前为止的输出是“参数”，然后是“返回”

puts 答案为零，而 puts do #anything 什么都不做。do 比任何表达式都弱，因此该块适用于 (puts function) do，而不是 puts (function do)。

输出符合预期。

# mysql - 第 9 行 C:\webdev\wamp\www\membershipSite\classes\Mysql.php 中的用户 'username'@'localhost' 的访问被拒绝（使用密码：YES）

> ID：15208795
> 
> 赞同：7
> 
> 时间：2013-03-04T18:47:28.103
> 
> 标签：mysql, access-denied

我对这一切都很陌生，但我确实知道相当数量的 HTML/CSS。我想创建一个登录服务器，我从视频中获得了大部分代码。如果有人可以帮助我并彻底解释，以便我理解，将不胜感激。如果需要任何其他东西，我会很乐意发布。

```
<?php

require_once 'includes/constants.php';

class Mysql {
private $conn;

function _construct() {
    $this->conn = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME) or die('There was a problem connecting to the database.');
}

function verify_Username_and_Pass($un, $pwd) {

    $query = "SELECT *
            FROM users
            WHERE username = ? AND password = ?
            LIMIT 1";

    if($stmt = $this->conn->prepare($query)) {
        $stmt->bind_param('ss', $un, $pwd);
        $stmt->execute();

        if($stmt->fetch()) {
            $stmt->close();
            return true;
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T18:52:32.317

您需要在 mysql 中授予 user@host 权限。授予命令看起来像

```
grant all privileges on YOURDB.* to
'YOURUSER'@'localhost' identified by 'YOURPASSWORD'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-22T07:46:03.403

只是一个侧面答案，因为我从自己的问题中得出了这个答案，但是有一个不同的解决方案，因为我知道所有特权都已授予相关用户

我正在使用诸如

```
 <?php

        session_start();

        $db_host="host";
        $db_user="user";
        $db_pass="mypassword";
        $db_name="dbname";
        $db_table="tblname";

        mysql_connect($db_host, $db_user, $db_pass) or die(mysql_error());
        mysql_select_db($db_name) or die(mysql_error()); 
```

这里的问题是我使用生成器的数据库密码包含一个 $ 符号，它混淆了脚本并认为在开始时还有另一个变量

```
 $db_pass="mypass$word"; 
```

# c# - 如何知道何时从 Web 加载了一组图像？

> ID：15208797
> 
> 赞同：0
> 
> 时间：2013-03-04T18:47:32.877
> 
> 标签：c#, image, events, windows-8

我有一个视图，可以将 1 到 5 个图像（取决于从服务器接收到的数据）获取到 a`StackPanel`中，而今天它们只是在下载时弹出（以任何随机顺序）。我想隐藏所有图像，直到它们都可用于渲染（即，当它们都从网络加载并准备好显示时）。

现在，每个 Image 都有一个`Loaded`我可以监听的事件。但是，跟踪一组真/假值并不断轮询这听起来是个坏主意。有没有更好的方法来完成我所追求的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:50:32.020

当然。假设您展示了许多不同的图像，如下所示：

```
<Grid Background="Black">
    <StackPanel x:Name="ImageContainer" Opacity="0" Width="100">
        <Image Loaded="Image_Loaded_1" Source="http://www.hdwallpaperspk.com/wp-content/uploads/2013/01/1600x1200_hd_wallpaper_177.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://www.hdwallpaperspk.com/wp-content/uploads/2013/01/nature-wallpaper-hd1.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://hidefwalls.com/wp-content/g/hd-2/hd-wallpaper-30.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://beautifulcoolwallpapers.files.wordpress.com/2011/09/red-tree-wallpaper-hd.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://hidefwalls.com/wp-content/g/hd-2/at-the-beach-hd-wallpaper-1920x1200.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://freedomwallpaper.com/wallpaper/funky-wallpaper-hd.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://walfast.com/wp-content/uploads/2013/02/wallpaper-hd.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://www.hdwallpaperspk.com/wp-content/uploads/2013/01/hd-wallpaper-6-o-u-ibackgroundz-com_.jpg" />
        <Image Loaded="Image_Loaded_1" Source="http://2.bp.blogspot.com/-dcgYv-SFEu0/TZVuveCkq1I/AAAAAAAAI2A/vK0PXUJ8aKw/s1600/tiger_wallpapers_hd_Bengal_Tiger_hd_wallpaper.jpg" />
    </StackPanel>
</Grid> 
```

然后你可以隐藏它们，直到它们都像这样加载：

```
object m_ImagesLock = new object();
private List<Image> m_ImagesLoading = new List<Image>();

private void Image_Loaded_1(object sender, RoutedEventArgs e)
{
    lock (m_ImagesLock)
    {
        var _Image = sender as Image;
        m_ImagesLoading.Add(_Image);
        var _Action = new Action(() =>
        {
            m_ImagesLoading.Remove(_Image);
            ImageContainer.Opacity = m_ImagesLoading.Any() ? 0 : 1;
        });
        _Image.ImageOpened += (s, arg) => _Action();
        _Image.ImageFailed += (s, arg) => _Action();
    }
} 
```

我希望这有帮助。

# c# - 使用命令行解析器库标记所需的集合

> ID：15208798
> 
> 赞同：4
> 
> 时间：2013-03-04T18:47:37.123
> 
> 标签：c#, command-line, command-line-arguments, command-line-parser

使用[Command Line Parser Library](https://github.com/gsscoder/commandline)，有没有办法标记一组说 3 个选项并准确地制作所需的三个选项之一？

所以有这些选择：

```
[Option("list-plugins", MutuallyExclusiveSet = "Commands")]
public bool ListPLugins { get; set; }

[Option("list-languages", MutuallyExclusiveSet = "Commands")]
public bool ListLanguages { get; set; }

[OptionList('f', "files", ',', MutuallyExclusiveSet = "Commands")]
public IList<string> Files { get; set; } 
```

我希望用户一次只能使用一个。

IE 有效调用将包括具有以下选项之一的调用 `"MyProgram --files a.txt"`：`"MyProgram --list-languages"`和`"MyProgram --list-plugins"`

while 调用没有或使用多个选项：（ `"MyProgram"`这种情况是我的问题），`"MyProgram --files a.txt --list-languages"`并且`"MyProgram --list-languages --list-plugins"`将是无效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:49:05.690

@PHeiberg，您已将所有选项放入集合中`Commands`，如此处所述是正确[的](https://github.com/gsscoder/commandline/wiki/Mutually-Exclusive-Options)。

这样你就告诉解析器：*嘿，让用户选择其中一个！*.

如果添加绑定到另一个集合的另一个选项：

```
[Option MutuallyExclusiveSet = "Other"]
public int Offsets { get; set; } 
```

您可以根据需要指定它，但`Commands`set 中的选项是互斥的。

根据实际设计，您所要求的仍然不存在（但可以实现）。

也就是说，我们知道存在一个`Required`属性以及它是如何关联的？

如果您将 a`Required = true`应用于多个选项之一，那么您（在实际实现中）与您自己相矛盾并使解析器感到困惑。

随意打开一个问题。

实际实现支持动词命令。请注意，动词命令在设计上是互斥的，您必须查看一个（您想要的选项行为）。

也许这不完全是你想要的，反正这里是描述[here](https://github.com/gsscoder/commandline/wiki/Verb-Commands)。

# stream - Directsound流同步

> ID：15208800
> 
> 赞同：0
> 
> 时间：2013-03-04T18:47:37.930
> 
> 标签：stream, directsound, portaudio, synchronisation

我对 2 个 Directsound 流的同步有疑问。

为了录制和播放声音，我目前使用 Portaudio 打开 2 个 Directsound 流。每次输入缓冲区被填满并且输出缓冲区需要数据时，都会调用 2 个回调函数。

现在这是我的问题...

输入流以 48kHz 采样率运行（@1024 个样本）。输出流以 192kHz 采样率运行（@4096 个样本）。每次输入缓冲区被填满并调用回调时，我都会做一些 DSP，然后将结果转换为 192kHz。输出流获取结果并输出数据。现在这两个流完全不同步了。

我查看了整个 Portaudio API，但找不到将 2 个流锁定在一起的同步选项。

有什么方法可以锁定 2 个 Directsound 流吗？我真的需要 48kHz 输入和 192kHz 输出。

溴，

文森特·布鲁因克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:41:08.507

问题是您不能真正“同时”打开两个流，也不能打开两个设备（甚至一个设备以两种不同的采样率）并期望它们真正保持同步，即使它们是，一次，同步。要了解原因，您可能需要阅读有关[音频如何在计算机上工作的内容](http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html)。您可能还想阅读[此文档](http://www.portaudio.com/docs/portaudio_sync_acmc2003.pdf)，它是特定于 PortAudio 的。

作为替代方案，您可能需要考虑在单个流中打开单个设备并使用软件采样率转换。

# mysql - MySQL - 将整个表的记录放入具有唯一 ID 列的另一个表中

> ID：15208802
> 
> 赞同：0
> 
> 时间：2013-03-04T18:47:39.933
> 
> 标签：mysql, sql

我想复制一个表 (bids_accepted) 的全部内容，并通过将表中的所有行放入 archive_bids_accepted 表来归档它。除了archive_bids_accepted 表有一个额外的列（第一列）来为整个出价集提供一个唯一ID（在前面的步骤中创建）之外，这些表完全相同。

执行此操作的正确 MySQL 语法是什么？我认为它很接近，但无法正确使用语法。

```
// gets the unique ID
long id = DBUtil.executeInsert("INSERT INTO archive (create_username,create_ts,update_username,update_ts) VALUES('', NOW(),'',NOW())");

// MySQL syntax causing problems
String sql = "INSERT INTO archive_bids_accepted VALUES(" + id + ",select * from bids_accepted)";

// Also tried this
String sql = "INSERT INTO archive_bids_accepted " + id + ",select b.* from bids_accepted b"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:10:16.240

我不会尝试手动插入`id`. 只需让 MySQL 为您执行此操作`AUTOINCREMENT`：

```
CREATE TABLE archive
(
  Id int AUTOINCREMENT,
  create_username <datatype>,
  create_ts <datatype>,
  update_username <datatype>,
  update_ts <datatype>
) 
```

然后执行以下SQL：

```
INSERT INTO archive_bids_accepted 
  (create_username, create_ts, update_username, update_ts)
SELECT create_username, create_ts, update_username, update_ts 
FROM bids_accepted 
```

该`Id`字段将自动填写。

# php - php如何创建俄语文件夹

> ID：15208807
> 
> 赞同：1
> 
> 时间：2013-03-04T18:47:47.287
> 
> 标签：php, utf-8, directory, encode

我在 WAMP 服务器 Windows 7 上使用以下代码创建一个具有俄语名称的文件夹，但实际文件夹的名称类似于 Ð°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ñ

```
<?php
  $name="Наименования";
     if (!mkdir($name, 0, true)) 
          echo "no";
     else 
          echo "yes";
?> 
```

我怎样才能正确地做到这一点？浏览器无法看到我在该文件夹中的图像。

# c - 解析 execve() 错误的命令行。纯C

> ID：15208812
> 
> 赞同：0
> 
> 时间：2013-03-04T18:48:09.523
> 
> 标签：c, pointers, segmentation-fault, argv

我是 C 指针的新手，并试图用命令行执行进程并获取它的 pid。任何使用命令行的 system()、sh() 等都不会返回 pid，所以我决定使用 execve()。但它需要将命令行解析为字符串数组。

我找到了一些现有的解决方案，但我无法使任何工作。所以，我自己写了。它在我的测试程序中有效，但在实际程序中会导致分段错误。谁能告诉我，我错在哪里？代码是：

```
void cmdline_to_argv(const char* cmd_line, char*** argv, int* argc){
    int len, i, count, spc;
    char *s,*d;
    /* make a copy to play with */
    char *cmd_line1 = strdup(cmd_line);

    /* count items to deal with and trim multiple spaces */
    d = s = cmd_line1; spc = 1; count = 0; len=strlen(cmd_line1);
    for (i=0; i<len;i++,s++) {
        switch (*s) {
        case ' ':
            if (spc) continue;
            *d++ = '\0'; /* replace spaces with zeroes */
            spc = 1;
            break;
        default:
            if (spc) { count++; spc = 0; }
            *d++ = *s;
        }
    }
    (*d++) = '\0'; /* line termination */
    /* reallocate copy to correct size */
    cmd_line1 = realloc( cmd_line1, d - cmd_line1);
    /* allocate array of poiters */
    *argv = (char**) malloc(sizeof(char*) * (count+1));
    argv[count] = NULL;
    /* scan line again to find all lines starts and register */
    s = cmd_line1;
    for (i=0; i<count; i++) {
        (*argv)[i] = s;
        while (*(s++)) ;
    }
    *argc = count;
} 
```

这就是我所说的：

```
char **chargv = NULL;
int chargc;

/* parse line to argument array */
cmdline_to_argv(cmdline, &chargv, &chargc); 
```

我认为这里的所有问题都与我分配数组并写入它的指针操作有关。怎么做才对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:15:42.667

问题已结束。找到解决方案。棘手的指针声明语法解决了。这是工作的。

谢谢大家。:-|

```
 void cmdline_to_argv(const char* cmd_line, char ***argv, int* argc){
    int i, spc;
    size_t len;
    char *s,*d;
    /* make a copy to play with */
    char *cmd_line1 = strdup(cmd_line);

    /* count items to deal with and trim multiple spaces */
    d = s = cmd_line1; spc = 1; *argc = 0; len=strlen(cmd_line1);
    for (i=0; i<len;i++,s++) {
        switch (*s) {
        case ' ':
            if (spc) continue;
            *d++ = '\0'; /* replace spaces with zeroes */
            spc = 1;
            break;
        default:
            if (spc) { (*argc)++; spc = 0; }
            *d++ = *s;
        }
    }
    (*d++) = '\0'; /* line termination */
    /* calc actual size */
    len = d - cmd_line1;
    /* allocate array of poiters */
    *argv = (char**) malloc(sizeof(char*) * ((*argc)+1) + len);
    (*argv)[*argc] = (char*) NULL;
    d = (char*) &(*argv)[(*argc)+1];
    memmove(d, cmd_line1, len);
    free(cmd_line1);
    cmd_line1 = d;
    /* scan line again to find all lines starts and register */
    for (i=0; i<*argc; i++) {
        (*argv)[i] = d;
        while (*(d++)) ;
    }
}

/* deallocate array and strings */
void free_argv(char ***argv) {
    free(*argv); /* strings laying together at once after pointers array */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:50:39.060

你看过这里吗[https://www.kernel.org/doc/man-pages/online/pages/man2/getpid.2.html](https://www.kernel.org/doc/man-pages/online/pages/man2/getpid.2.html) 我相信你想要的是 getpid() 虽然也许你问的更多。

# python - 正则表达式会是编写涉及单词和句子的代码的更好方法吗？

> ID：15208819
> 
> 赞同：1
> 
> 时间：2013-03-04T18:48:34.937
> 
> 标签：python

我想定义一个函数，它接受一个句子并返回长度至少为 4 且小写的单词。问题是，我对 Python 很陌生，我不太确定如何编写处理单词而不是整数的代码。我目前的代码如下：

```
def my_function(s):
    sentence = []
    for word in s.split():
        if len(word) >=4:
            return (word.lower()) 
```

如果我`my_function("Bill's dog was born in 2010")`希望`["bill","born"]`我的代码输出在哪里`"bill's"` 从我在 StackOverflow 和 Python 教程中看到的内容来看，正则表达式会帮助我，但我不完全理解模块中发生了什么。如果可以的话，你们能解释一下正则表达式如何提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:50:34.863

您的要求略有不一致，因此我将以您的示例作为参考。

```
In [27]: import re

In [28]: s = "Bill's dog was born in 2010"

In [29]: [w.lower() for w in re.findall(r'\b[A-Za-z]{4,}\b', s)]
Out[29]: ['bill', 'born'] 
```

让我们看一下正则表达式，`r'\b[A-Za-z]{4,}\b'`.

`r'...'`不是正则表达式的一部分。这是一个 Python 构造，称为[*raw string*](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)。它就像一个普通的字符串文字，除了反斜杠序列[`\b`](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)没有它们通常的含义。

两者`\b`寻找单词*边界*（即单词的开头或结尾）。

查找四个或更多字母的`[A-Za-z]{4,}`序列。被`[A-Za-z]`称为*字符类*，由字母`A`through`Z`和`a`through组成`z`。这`{4,}`是一个重复运算符，要求字符类至少匹配四次。

最后，列表`[w.lower() for w in ...]`推导式将单词转换为小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:51:40.300

是的，Regex 将是实现您想要的最简单和最简单的方法。

试试这个正则表达式：

```
matches = re.findall(ur"\b[a-zA-Z]{4,}\b", "Put Your String Here") #matches [Your,String,Here] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:50:25.503

您返回第一个 4 个字符或更长的单词，而不是所有这些单词。追加`sentence`并返回它：

```
def my_function(s):
    sentence = []
    for word in s.split():
        if len(word) >=4:
           sentence.append(word.lower())
    return sentence 
```

您可以使用列表推导来简化它：

```
def my_function(s):
    return [word.lower() for word in s.split() if len(word) >= 4] 
```

是的，正则表达式也可以做到这一点，但对于您的情况，这可能是矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:54:14.050

您忘记在“句子”中累积长词；）您要返回第一个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T21:31:48.957

使用 re.split

```
>>> import re
>>> a='Hi, how are you today?'
>>> [x for x in re.split('[^a-z]', a.lower()) if len(x)>=4]
['today']
>>> 
```

# javascript - 重新定义作为另一个函数一部分的函数

> ID：15208820
> 
> 赞同：1
> 
> 时间：2013-03-04T18:48:35.643
> 
> 标签：javascript

我有一个看起来像这样的函数：

```
function outer() {
    function inner_1() {
        alert('inner_1');
    }

    function inner_2() {
        alert('inner_2');
    }

    function inner_3() {
        alert('inner_3');
    }

    inner_1();
    inner_2();
    inner_3();
} 
```

我需要调用`outer()`，但我想`inner_1()`用另一个函数替换。

我试过这个：

```
new_outer = outer;

new_outer.inner_1 = function() {
    alert('my new inner function');
}; 
```

如果我尝试`inner_1`像这样调用新重新定义的：

```
new_outer.inner_1(); 
```

它按预期工作（警告“我的新内部功能”）。

但是如果我尝试调用外部函数：

```
new_outer(); 
```

旧版本的`inner_1`被称为。

我想重新定义`inner_1`和调用`outer`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:25:26.393

这似乎是一个非常糟糕的主意，所以我不会发布任何代码。但是，如果您寻求“仅用于教育目的”的答案，我只是暗示，尽管您无法轻松地从其范围之外重新定义函数（根据您的示例），但没有什么能阻止您重新定义附加到函数对象。

但是，我确实认为，无论您要解决的问题是什么，都有更好的解决方案。

# zend-framework2 - 使用 Zend Framework 2 如何在使用 put 方法时将参数附加到请求对象？

> ID：15208821
> 
> 赞同：0
> 
> 时间：2013-03-04T18:48:45.253
> 
> 标签：zend-framework2

我正在尝试使用 phpunit 测试 REST 更新方法。我创建一个请求对象，匹配一个路由，然后将它分派给控制器：

```
$this->routeMatch->setParam('id', '1');
$this->request->setMethod(Request::METHOD_PUT);
$result = $this->controller->dispatch($this->request); 
```

一切正常，但我遇到的问题是如何通过此请求传递数据？我试过通过 post 或 get 方法附​​加，但没有运气：

```
$this->request->getQuery()->set('description', 'foo'); //Nope
$this->request->getPost()->set('description', 'foo'); //Nope 
```

我没有看到 ->getPut() 方法...如何将数据添加到使用 put 方法的请求对象？除了匹配的路由 ID，我没有看到控制器中通过任何参数。

**更新：**

```
//Create mocks:        
    $statusMock=new Status();
    $statusMock->exchangeArray($testData);
    $statusTableMock = $this->getMockBuilder('Status\Model\StatusTable')
                        ->disableOriginalConstructor()
                        ->getMock();
    $statusTableMock->expects($this->any())
                    ->method("getStatus")
                    ->will($this->returnValue($statusMock));
    $statusTableMock->expects($this->once())
                    ->method('updateStatus')
                    ->will($this->returnValue(array()));

//pass mocks to service manager, will use mocks instead of actual model
    $serviceManager = Bootstrap::getServiceManager();
    $serviceManager->setAllowOverride(true);
    $serviceManager->setService('Status\Model\StatusTable', $statusTableMock);

//set route and request object
    $this->routeMatch->setParam('id', '1');
    $this->request->setMethod(Request::METHOD_PUT);

//try to attach data 
    $this->request->getQuery()->set('description', 'foo'); //NOPE!
    $this->request->getPost()->set('title', 'bar'); //NOPE!

//Send and test
    $result = $this->controller->dispatch($this->request);
    $this->assertResponseStatusCode(200); 
```

**更新 2** 这有效：

```
$ curl -i -H "Accept: application/json" -X PUT -d "title=something&description=something else" http://mysite.com 
```

那么如何使用 Zend\Http\Request 对象来做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:43:51.887

不太熟悉 zf2 中的 RESTful 内容，但我认为 PUT 会读取请求正文，因此您应该使用`setContent()`

```
$this->request->setMethod(Request::METHOD_PUT)
              ->setContent("title=something&description=something else"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T20:05:10.977

确保您还将 Content-type 设置为 application/json。我挂了几个小时：

[如何在 ZendFramework2 中发送 PUT 请求？](https://stackoverflow.com/questions/16325060/how-do-i-send-a-put-request-in-zendframework2)

# css - 水平对齐 h2 和 a 元素

> ID：15208826
> 
> 赞同：0
> 
> 时间：2013-03-04T18:49:22.453
> 
> 标签：css

我在这样的 div 中有一个`h2`和一个元素：`a`

```
<div>
    <h2>Header...</h2>
    <a href="#">the link</a>
</div> 
```

**我想在不使用 display inline-block**的情况下水平对齐 h2 元素旁边的锚元素。另外，如果我`float:left`在 h2 元素和`float:right`a 元素上使用，它们会相距太远（我希望它们彼此相邻）

请提供任何帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:51:46.073

```
h2 {
float: left;
}

a {
float: left;
} 
```

根据您的需要调整`margin`它们之间的值，不要忘记在这[两个元素](http://css-tricks.com/the-how-and-why-of-clearing-floats/)*之后使用 clear 属性*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:50:19.057

将锚点放在标题内？使用浮子？你试过什么吗？

将它们都向左浮动并在 H2 上放置一个右边距。根据需要添加尽可能多的边距。

# java-3d - Java3D消失法

> ID：15208829
> 
> 赞同：1
> 
> 时间：2013-03-04T18:49:24.040
> 
> 标签：java-3d

在我看来，当 Frame/JPanel/Canvas3D 已调整大小时，Java3D 有时会出现重绘场景的问题。我在使用 Java3D/JUNG3D 的应用程序中遇到问题，如果 Frame/JPanel/Canvas3D 的水平尺寸达到一定尺寸，整个场景就会消失。我试图简单地解决问题，然后发现以下示例代码中出现了类似的问题：[http](http://www.java3d.org/samples.html) ://www.java3d.org/samples.html （倒数第二个示例，“Text 3D Example”）我将粘贴在底部方便。

脚步：

1.  安装 Java3D
2.  使用 3 个 Java3D jar 构建此示例。
3.  跑
4.  将框架水平拉伸到 500 像素左右，然后一切都消失了。缩小它然后它又在那里。当事物消失时，垂直伸展，事物再次出现。

它似乎与 Frame/JPanel/Canvas3D 纵横比及其显示的内容有关。我猜我自己的问题略有不同，因为我正在显示不同纵横比的场景，而根本问题是相同的。谁能告诉我如何才能绕过这个错误/功能，以便在调整窗口大小时场景永远不会消失？

以下是我到目前为止没有成功的尝试：

1.  捕获 JPanel 调整大小事件，然后强制 Canvas3D 重绘
2.  玩双缓冲设置
3.  许多其他事情我现在不记得了——刚从假期回来:)

代码 ：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.media.j3d.*;
import javax.vecmath.*;
import com.sun.j3d.utils.universe.*;
import com.sun.j3d.utils.geometry.*;

public class Titles {

    public static void main(String[] args) {
        Titles t = new Titles();
        t.setUp();
    }

    public void setUp() {
        JFrame jf = new JFrame("Welcome");
        // kill the window on close
        jf.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent winEvent) {
                System.exit(0);
            }
        });
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(1, 1, 2, 2));

        GraphicsConfiguration config = SimpleUniverse
                .getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(config);
        canvas3D.setSize(360, 160);
        SimpleUniverse universe = new SimpleUniverse(canvas3D);
        BranchGroup group = new BranchGroup();
        addObjects(group);
        addLights(group);
        universe.getViewingPlatform().setNominalViewingTransform();
        universe.addBranchGraph(group);
        panel.add(canvas3D);
        jf.getContentPane().add(panel, BorderLayout.CENTER);
        jf.pack();
        jf.setVisible(true);
    }

    public void addLights(BranchGroup group) {
        BoundingSphere bounds = new BoundingSphere(new Point3d(0.0, 0.0, 0.0),
                1000.0);

        Color3f light1Color = new Color3f(1.0f, 1.0f, 1.0f);
        Vector3f light1Direction = new Vector3f(4.0f, -7.0f, -12.0f);
        DirectionalLight light1 = new DirectionalLight(light1Color,
                light1Direction);
        light1.setInfluencingBounds(bounds);
        group.addChild(light1);

        // Set up the ambient light
        Color3f ambientColor = new Color3f(.1f, .1f, .1f);
        AmbientLight ambientLightNode = new AmbientLight(ambientColor);
        ambientLightNode.setInfluencingBounds(bounds);
        group.addChild(ambientLightNode);
    }

    private void addObjects(BranchGroup group) {
        Font3D f3d = new Font3D(new Font("TestFont", Font.PLAIN, 2),
                new FontExtrusion());
        Text3D text = new Text3D(f3d, new String("Java3D.org"), new Point3f(-3.5f,
                -.5f, -4.5f));

        text.setString("Java3D.org");
        Color3f white = new Color3f(1.0f, 1.0f, 1.0f);
        Color3f blue = new Color3f(.2f, 0.2f, 0.6f);
        Appearance a = new Appearance();
        Material m = new Material(blue, blue, blue, white, 80.0f);
        m.setLightingEnable(true);
        a.setMaterial(m);

        Shape3D sh = new Shape3D();
        sh.setGeometry(text);
        sh.setAppearance(a);
        TransformGroup tg = new TransformGroup();
        Transform3D t3d = new Transform3D();
        Transform3D tDown = new Transform3D();
        Transform3D rot = new Transform3D();
        Vector3f v3f = new Vector3f(-1.6f, -1.35f, -6.5f);
        t3d.setTranslation(v3f);
        rot.rotX(Math.PI / 5);
        t3d.mul(rot);
        v3f = new Vector3f(0, -1.4f, 0f);
        tDown.setTranslation(v3f);
        t3d.mul(tDown);
        tg.setTransform(t3d);
        tg.addChild(sh);
        group.addChild(tg);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T03:41:03.930

尝试在此处设置缓冲区，教程。[http://www.youtube.com/watch?v=vzfnUSLKUDs&list=ECA331A6709F40B79D](http://www.youtube.com/watch?v=vzfnUSLKUDs&list=ECA331A6709F40B79D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T14:24:33.167

已经 5 年了，但试试这个[解决方案](https://stackoverflow.com/questions/29038302/why-does-the-java3d-canvas-flicker-when-i-call-canvas3d-repaint)。

我试过了，它与 lookAt() 函数一起工作。

# c++ - 检查是否所有变量都等于c ++中的相同值

> ID：15208831
> 
> 赞同：8
> 
> 时间：2013-03-04T18:49:31.987
> 
> 标签：c++, compare

比较多个变量以查看它们是否都是相同值的最简单方法是什么？例如，如果 var1 = 53 并且我想检查 var2 或 var3 是否等于 var1 并且彼此相等？到目前为止，我已经这样做了：

```
if(row1==row2==row3==row4==col1==col2==col3==col4==diag1==diag2)
    cout << "It is a magic square";
else
    cout << "Not a magic square"; 
```

但是，这似乎不起作用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T18:53:48.137

在 C++11 中，您可以使用可变参数模板来定义自己的函数：

```
#include <iostream>

template<typename T, typename U>
bool all_equal(T&& t, U&& u)
{
    return (t == u);
}

template<typename T, typename U, typename... Ts>
bool all_equal(T&& t, U&& u, Ts&&... args)
{
    return (t == u) && all_equal(u, std::forward<Ts>(args)...);
}

int main()
{
    int x = 42;
    int y = 42
    std::cout << all_equal(42, y, x);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T18:53:52.693

你不能`==`像这样链接运营商。你需要写，例如

```
if (row1==row2 && row2==row3 && row3==row4 && ...) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-29T09:33:44.760

我希望以下信息能让您了解链“==”运算符的工作原理：

由于 C 语言不支持像 a==b==c 这样的链式比较；每个等于运算符 (==) 仅对两个操作数进行操作。那么表达式 a==b==c 是如何计算的呢？

根据运算符关联性等于运算符（==）从左到右操作，这意味着相等运算符（==）的关联性是从左到右。

表达式 a==b==c 实际上是 (a==b) ==c，看看表达式 (a==b) ==c 是如何计算的？

•(a==b) 将首先进行比较并返回 1 (true) 或 0 (false)。

• 然后将变量c 的值与(a==b) 的结果进行比较。

所以我们不会使用链式 '==' 运算符进行多变量比较。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T18:53:33.250

它不起作用，因为`==`比较运算符返回`true`or `false`（它们是`1`or `0`）。为了避免进行成对比较，我想最好的方法是使用循环：

```
int vals[] = {row1,row2,row3,row4,col1,col2,col3,col4,diag1,diag2};
bool equals = true;
for (int i = 0; i < sizeof(vals); ++i) {
  if (vals[i] != vals[i+1]) {
    equals = false;
    break;
  }
} 
```

我想它甚至可以使用按位循环：

```
int val = vals[0];
for (int i = 1; i < sizeof(vals); ++i)
  val &= vals[i];
bool equals = val == vals[0]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-28T08:27:17.210

没有任何 if 的解决方案

```
#include <iostream>

bool equals(int val1, int val2, int val3, int val4)
{
    return((val1 | val2 | val3 | val4) == (val1 & val2 & val3 & val4));
}

int main()
{
  std::cout << "1, 1, 1, 1 -> " << (equals(1, 1, 1, 1)?"true":"false") << std::endl;
  std::cout << "0, 0, 0, 0 -> " << (equals(0, 0, 0, 0)?"true":"false") << std::endl;
  std::cout << "0, 0, 1, 1 -> " << (equals(0, 0, 1, 1)?"true":"false") << std::endl;
  std::cout << "3, 3, 1, 1 -> " << (equals(3, 3, 1, 1)?"true":"false") << std::endl;
  std::cout << "-5, -5, -5, -5 -> " << (equals(-5, -5, -5, -5)?"true":"false") << std::endl;
  return(0);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T18:54:24.583

您将需要使用 && 运算符，尽管这会增加您需要键入的代码量。如果您要比较矩阵的值，我建议使用循环和索引来比较这些值，而不是将它们分配给变量并测试是否相等。

```
if(row1==row2 && row2==row3 && row3==row4 && row4==col1 && col1==col2 && col2==col3 &&   col3==col4 && col4==diag1 && diag1==diag2)
    cout << "It is a magic square";
else
    cout << "Not a magic square"; 
```

# c# - Visual Studio 注释位置调整

> ID：15208833
> 
> 赞同：3
> 
> 时间：2013-03-04T18:49:54.110
> 
> 标签：c#, visual-studio-2010

好的，也许这是一个有点菜鸟和愚蠢的问题，但我无法谷歌任何东西

当我用 C# 编写代码时，我会在命令行末尾添加注释

有些行更长，有些更短，因此评论也位于不同的位置

例如：

```
int N=10; //comment1
SomeFunctionWithLongName() //comment2
AnotherFunction() //comment3 
```

我希望它以更干净整洁的形式出现：

```
int N=10;                     //comment1
SomeFunctionWithLongName()    //comment2
AnotherFunction()             //comment3 
```

我可以努力工作并使用制表符和空格来获得结果，但是如果我更改代码中的任何内容，它会很乏味并且会被全部破坏

是否有任何自动工具可以为我的所有评论设置相同的位置，针对最长的行进行调整

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:48:02.063

*好吧*，不幸的是，Visual Studio 2010 中没有像您的情况这样的对齐注释的*直接*选项。

但在我的脑海里，我有一个想法。有一个名为[`Code alignment`](http://www.codealignment.com/)Visual Studio 2010 和 2012 的扩展。让我给你看一段带有这个扩展的代码；

当你写作时；

```
foo = bar();
foobar = foo(); 
```

扩展基于`=`;对齐这条线。

```
foo    = bar;
foobar = foo; 
```

因此，当您撰写评论时，它们会自动对齐；

```
foo    = bar; //comment1
foobar = foo; //comment2 
```

# android - 在 Android SDK 中使按钮保持按下状态

> ID：15208834
> 
> 赞同：2
> 
> 时间：2013-03-04T18:49:57.980
> 
> 标签：android, button, state, selected

我有 5 个简单的按钮，我希望它们表现得像单选按钮，但没有勾选框（或他们称之为的任何东西）。They are aligned in row and I want only one of them to be selected at once, and when a button is selected it must keep its selected style. 我的布局代码如下所示：

```
 <Button
            android:id="@+id/button1"
            android:layout_width="150dp"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true"
            android:layout_margin="0dp"
            android:text="@string/mybutton1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="150dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/button1"
            android:text="@string/mybutton2" />

        // and so on 
```

我的代码：

```
 mybtn1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mybtn1.setPressed(true);
        }
    }); 
```

所以，我不知道我是否可以在布局或代码中做到这一点。当我单击它时，有什么方法可以使按钮保持选定状态（和选定样式）？另外，是否可以将事件分配给所有这些按钮？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T18:54:57.340

只需在 onClickListener 中设置它们的选定状态：

```
myButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v)
    {
        //handle click
        v.setSelected(true);
    }
}); 
```

单击状态只是选定状态，您可以打开和关闭该状态以使其生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:09:26.373

如果您希望按钮的行为是将它们用作复选框，则可以使用[ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)。

在您的情况下，实际上将是一个切换按钮列表，当您单击一个时，您必须使用以下命令取消选择所有其他按钮：

```
for (ToggleButton btn : buttons)
    if (btn != crtButton)
        btn.setChecked(false); 
```

# php - Location.reload 更优雅/高效的解决方案

> ID：15208837
> 
> 赞同：0
> 
> 时间：2013-03-04T18:50:07.343
> 
> 标签：php, jquery, ajax

情况：

我有一个带有 PHP 函数的 html 页面。`foreach`该函数在循环中回显数组的元素。阵列的数据用于每个单独的回波。

```
foreach ($DB->query($sql) as $v) {
    echo $v['specificData'];
} 
```

所有新元素都使用 ajax 添加到数组中。

问题：

`location.reload`每次添加新元素时，我一直在使用刷新页面，因此它会立即显示出来。问题是该解决方案根本不优雅/高效。

问题：

我还有哪些其他选择？越简单越好。

感谢任何帮助和建议；）

PS：我已经考虑过了，`jquery.append()`但我希望有人有一个更简单的想法xD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:54:03.663

只刷新页面中需要刷新的部分。您可以通过在成功的 AJAX 回调后在 jQuery 中执行以下操作来使其顺利进行：

```
$(element).fadeOut(function(){
    $(element).html(ajax_response_here).fadeIn(); // .html() or .append() whichever makes more sense
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T18:58:31.050

如果您已经使用 ajax 将数据发送回服务器，那么它也应该很难使用它来更新 dom。如果您想要一种有效的方法，那么这可能就是要走的路。如果你想避免 jQ 更新站点，你可以简单地编写一个基本的 js 函数。

```
function appendTo(parent, content) {
    parent.innerHTML += "<p>"+content+"</p>";
} 
```

或者

```
function appendToById(parentId, content) {
    appendTo(document.getElementById(parentId), content);
} 
```

# c# - win32_networkaddressconfiguration 没有ip地址

> ID：15208839
> 
> 赞同：1
> 
> 时间：2013-03-04T18:50:09.137
> 
> 标签：c#, networking, ip, wmi, system.management

我正在从`Win32_NetworkAdapterConfiguration`C# 的类中收集所有网络适配器配置。我使用这个查询：

```
private String strDetailedInterfaces =
                       @"SELECT * 
                       FROM   Win32_NetworkAdapterConfiguration
                       WHERE  DHCPEnabled = 'TRUE'"; 
```

但是，在选择我用来连接到Internet的NetworkAdapter时，它就说，`IPEnabled = false`当我调用数组时`IPAddresses`，我得到了nullpointerexception（意味着array = null）。

我这样称呼地址：

```
ManagementObject choosen = (ManagementObject)eInterfacesConfig.Current;
String[] ipAddresses = (String[]) choosen["IPAddress"];
lblIP.Text = ipAddresses[0]; 
```

`eInterfacesConfig`是 a`ManagementObjectCollection.Enumerator`并且选择的是当前`ManagementObject`的枚举数。

我尝试将标签 (lblIP) 的文本更改为数组中的第一个 IP 地址。但这是引发异常的地方。

有人可以解释为什么，也许可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:34:20.753

以下查询`Win32_NetworkAdapterConfiguration`在我的 Windows 8 机器上返回两个对象：

```
ManagementObjectSearcher query = 
    new ManagementObjectSearcher("SELECT * FROM Win32_NetworkAdapterConfiguration  WHERE DHCPEnabled ='TRUE'");

ManagementObjectCollection queryCollection = query.Get();
queryCollection = query.Get();

foreach (ManagementObject currentConfig in queryCollection)
{
  string[] addresses = (string[])currentConfig["IPAddress"];

  Console.Out.WriteLine(currentConfig["Description"]);
  if (addresses != null)
  {
    foreach (var addr in addresses)
    {
      Console.Out.WriteLine(addr);
    }
  }
} 
```

第一个适配器配置用于*Microsoft 内核调试网络适配器*。该适配器用于远程内核调试。此适配器的`DHCPEnabled`属性是`TRUE`。但是，没有分配给该适配器的 IP 地址。这就是`IPAddress`数组为空的原因。

第二个适配器配置用于我的*Intel Gigabit Network Adapter*。有两个 IP 地址分配给适配器。

阵列可能为空的另一个原因`IPAddress`是例如*断开的无线网络适配器*。

因此，为了解决您的问题，`NullReferenceException`您必须检查 `IPAddress`数组是否为空（请参阅上面的代码）。使用该`Description` 属性来标识适配器配置。

# php - 让 WordPress 开发周期和环境像 Rails 一样顺畅？

> ID：15208840
> 
> 赞同：4
> 
> 时间：2013-03-04T18:50:15.967
> 
> 标签：php, ruby-on-rails, ruby, wordpress

我已经习惯了 Rails 的流畅开发周期和围绕它成长的标准例程，但最近我发现自己越来越多地从事 WordPress 开发。充其量它看起来笨重和脱节。

有一大堆“最佳实践”在四处飘荡，但到目前为止，似乎没有什么东西能够让我有宾至如归的感觉。

你能否分享一下是什么对你有用，使 WP 开发周期真正融合在一起，并在来自基于 Unix 的 Rails / Git / Hg 环境时像人们希望的那样工作？我并不特别关心这些工具，而是实际工作流程以及如何设置它，以便个人和团队可以更流畅地合作。

# ios - 尝试在 xcode iOS 项目中为视图设置标题

> ID：15208843
> 
> 赞同：0
> 
> 时间：2013-03-04T18:50:26.203
> 
> 标签：ios, xcode

我需要做什么才能在我的 iOS 项目中设置每个主视图的标题。以下是我到目前为止所做的以及我正在尝试做的事情......

创建了我试图一起工作的文件。

*   PageTitleView.h
*   PageTitleView.m
*   PageBaseViewController.h
*   PageBaseViewController.m
*   HomeViewController.h
*   主视图控制器.m
*   ActivityFeedViewController.h
*   ActivityFeedViewController.m

基本上设置 PageTitleView.h * .m 以及 PageBaseViewController.h & .m 以便我可以调用 HomeViewController&ActivityFeedViewController 并设置当前视图的标题。

这是我从这些文件中获取的代码

* * *

**PageTitleView.h**

```
#import "ContainerView.h"
#import "BaseLabel.h"

@interface PageTitleView : ContainerView
@property (nonatomic, strong) BaseLabel* label;
@property (nonatomic, strong) NSString* title;

@end 
```

* * *

**PageTitleView.m**

```
#import "PageTitleView.h"

@implementation PageTitleView

@synthesize label;

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:CGRectMake(frame.origin.x, frame.origin.y, frame.size.width, 35)];
    label = [[BaseLabel alloc] initWithFrame:CGRectMake(18, 10, frame.size.width , 25)];
    label.font=[UIFont fontWithName:@"Helvetica" size:15.0];
    label.textColor = (UIColor *) COLOR_DARK_BLUE;
    label.text =[[NSString alloc] initWithFormat: @"text"];

    self.backgroundColor = (UIColor *)COLOR_WHITE;

    self.layer.shadowOpacity = 0.05;
    self.layer.shadowOffset = CGSizeMake(.25, .25);
    self.layer.shadowColor = [UIColor blackColor].CGColor;
    self.layer.shadowRadius = 5;

    self.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.layer.bounds].CGPath;

    self.layer.cornerRadius = 10.0;

    self.layer.borderWidth = 0.25;
    self.layer.borderColor = [UIColor grayColor].CGColor;

    [self addSubview:label];

    return self;
}

@end 
```

* * *

**PageBaseViewController.h**

```
#import <QuartzCore/QuartzCore.h>
#import <UIKit/UIKit.h>
#import "Settings.h"
#import "CustomButton.h"
#import "PageTitleView.h"

@interface PageBaseViewController : UIViewController

@property (nonatomic, strong) UIScrollView *scrollView;
@property (nonatomic, strong) CustomButton *backButton;

@end 
```

* * *

**PageBaseViewController.m**

```
#import "PageBaseViewController.h"

@interface PageBaseViewController ()

@end

@implementation PageBaseViewController
synthesize scrollView;

- (void)viewDidLoad {
    [super viewDidLoad];

    // GRADIENT
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.view.bounds;
    gradient.colors = [NSArray arrayWithObjects:
                       (id)BACKGROUND_GRADIENT_COLOR_1.CGColor,
                       (id)BACKGROUND_GRADIENT_COLOR_2.CGColor,
                       (id)BACKGROUND_GRADIENT_COLOR_3.CGColor,  nil];
    gradient.locations = [NSArray arrayWithObjects:
                          (id)[NSNumber numberWithFloat:0.0],
                          (id)[NSNumber numberWithFloat:0.4],
                          (id)[NSNumber numberWithFloat:1.0], nil];
    [self.view.layer insertSublayer:gradient atIndex:0];

    float height = self.view.frame.size.height - TITLEBAR_HEIGHT - self.tabBarController.tabBar.frame.size.height;
    scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, TITLEBAR_HEIGHT, self.view.frame.size.width, height)];
    [self.view addSubview:scrollView];

    PageTitleView *pageTitle = [[PageTitleView alloc] initWithFrame:CGRectMake(105, -10, 100 , 35)];
    [self.view addSubview:pageTitle];

    /* This button is currently added to the view and will show in the TITLEBAR_HEIGHT. 
     These will be used throughout the entire project, we will be working next to have 
     correct buttons turn on and off for each view.*/

    CustomButton *buttonLeft = [[CustomButton alloc] initWithFrame:CGRectMake(5, 5, 60, 25) andText:@"Left"];
    [buttonLeft addTarget:self action:@selector(buttonLeft:) forControlEvents:UIControlEventTouchUpInside];
    [buttonLeft setBackgroundColor:BUTTON_COLOR_1];
    [self.view addSubview:buttonLeft];

    // Remove this button from homeview and have a logo show up.
    CustomButton *buttonRight = [[CustomButton alloc] initWithFrame:CGRectMake(235, 5, 80, 25) andText:@"Right"];
    [buttonRight addTarget:self action:@selector(buttonRight:) forControlEvents:UIControlEventTouchUpInside];
    [buttonRight setBackgroundColor:BUTTON_COLOR_1];
    [self.view addSubview:buttonRight];

}

- (void)buttonLeft:(UIButton *)buttonLeft {
    NSLog(@"Ping");
}

- (void)buttonRight:(UIButton *)buttonRight {
    NSLog(@"Ping");
}

@end 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:42:40.227

通过以下步骤解决了这个问题。

1.  将 PageTitleView.h 导入到 PageBaseViewController.h

2.  在 PageBaseViewController.h 中声明了以下属性

    @property (nonatomic, strong) PageTitleView *pageTitle;

3.  然后在PageBaseViewController中调整了PageTitleView的导入

    来自：PageTitleView *pageTitle = [[PageTitleView alloc] initWithFrame:CGRectMake(105, -10, 100 , 35)];

    到：pageTitle = [[PageTitleView alloc] initWithFrame:CGRectMake(105, -10, 100 , 35)];

4.  然后在我的一个视图中，例如 HomeViewController 我添加了以下代码。

    [self.pageTitle setTitle:@"Home"];

5.  现在我将以下代码添加到我的其他视图中，并用适当的名称填充它。

    [self.pageTitle setTitle:@""];

# sql-server - mvc 3.0 中的类和关系设计

> ID：15208845
> 
> 赞同：0
> 
> 时间：2013-03-04T18:50:33.910
> 
> 标签：sql-server, asp.net-mvc-3, database-design

我目前有以下课程：

```
public class Ticket
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }

    public int ClientId { get; set; }
    public virtual Client Client { get; set; }
    public virtual ICollection<Item> Items { get; set; }

    public Ticket()
    {
        Items = new List<Item>();
    }

}

public class Client
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }

    public virtual ICollection<Ticket> Tickets { get; set; }
}

public class Item
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }
    public double Price { get; set; }

    public virtual ICollection<Ticket> Tickets { get; set; }
} 
```

我的问题/问题如下，假设我创建了一个新项目：“Item1”并将其价格设置为“3.00”，我将该项目添加到一些“Tickets”中，即“Ticket1”：“Item1”，“ 3.00"; “Ticket2”：“Item1”、“3.00”等。如果在将这些项目添加到门票后，我将“Item1”的价格更改为“4.00”，它会更改我已经创建的门票的价格，我怎么能拥有它仅更改价格更改后创建的票的价格吗？

这是我的票务控制器：

```
 [HttpPost]
    public ActionResult Create(TicketViewModel ticketViewModel)
    {
        if (ModelState.IsValid)
        {
            var ticket = new Ticket();
            ticket = ticketViewModel.Ticket;
            AddOrUpdateItems(ticket, ticketViewModel.Item);
            context.Tickets.Add(ticket);
            context.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(ticketViewModel);
    }

   private void AddOrUpdateItems(Ticket ticket, ICollection<AssignedItem> assignedItems)
    {
        foreach (var assignedItem in assignedItems)
        {
            if (assignedItem.Assigned)
            {
                var item = context.Items.Find(assignedItem.ItemId);
                ticket.Items.Add(item);
            }
        }
    } 
```

# javascript - 如何查询javascript的对象空间

> ID：15208849
> 
> 赞同：2
> 
> 时间：2013-03-04T18:50:42.833
> 
> 标签：javascript, metaprogramming

JavaScript 在内存中创建了一堆对象。甚至“类”实际上也只是 JavaScript 中的原型对象。

我想创建一个当前在页面上实例化的所有对象的列表。我意识到这可能包括 JavaScript 基本对象，例如`String.prototype`和`Number.prototype`. 我觉得那太好了！

还告诉我如何更具体地查询 JavaScript 的对象空间的奖励积分。例如，也许可以找到当前内存中所有具有匹配“名称”的属性键的对象。

# java - URLConnection getInputStream 阻塞线程

> ID：15208851
> 
> 赞同：2
> 
> 时间：2013-03-04T18:50:49.540
> 
> 标签：java, android, urlconnection

`getInputStream`我在`URLConnection`课堂上遇到了方法问题。我知道在其他线程中讨论了一些其他类似的问题，但在我的情况下似乎没有单一的解决方案有效。

有趣的是，随着第一次执行顺利，更多的执行失败（阻塞）。在描述这个问题之前，我想写一些背景知识。这里是。

基本上我有简单的客户端-服务器配置。由于我不想在客户端应用程序中对服务器地址和端口进行硬编码，因此我使用 HTTP 服务器 ( `nginx`)，可以从中检索实际的连接参数。

在客户端，有一个由服务控制的“网络线程”。服务启动线程并在需要时中断它。在`run()`方法的最开始调用以下函数：

```
private ConnectionParameters obtainConnectionParameters(String url) throws MalformedURLException, IOException {
    URLConnection connection = new URL(url).openConnection();
    InputStream in = connection.getInputStream(); // here the problem occurs

    ... // do some processing

    in.close();     
    return connectionParameters;
} 
```

获取连接参数后，打开另一个套接字连接。一段时间后，线程可能会关闭或只是到达`run()`方法的结尾。我仔细检查了它是否干净地退出。

回到这个问题，我不知道是什么导致了这种情况发生。您是否有任何线索可能导致这种行为？

我还想提一下，服务和网络线程在与活动分开的（后台）进程中运行。在这个过程中没有其他地方`URLConnection`可以使用。值得注意的是，方法中使用的所有变量`obtainConnectionParameters`都是本地的。

我想描述中没有任何重要的东西遗漏。否则请告诉我，以便我编辑我的帖子。

**编辑（1）：**

我刚刚在线程[Make an HTTP request with android](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)中尝试了 apache HTTP 客户端 ，它运行良好。不过，我很想找出问题所在`URLConnection`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:22:50.657

如果我理解正确，上面的代码片段被多次调用，第一次运行正常，但第二次阻塞 getInputStream() 调用？

问题可能出在服务器端。也许服务器一次只接受一个连接，而您建立的第一个连接仍然打开？是否可以多次使用浏览器打开 url，以验证服务器是否按预期工作？

# windows-7 - 更新文件或文件夹 修改日期

> ID：15208855
> 
> 赞同：4
> 
> 时间：2013-03-04T18:50:57.953
> 
> 标签：windows-7, batch-file, cmd

我需要更新文件和文件夹的“修改日期”属性，因为它们从一个位置复制到另一个位置，以便“修改日期”= 当前系统时间。我有一台装有 Windows 7 的 PC，但我没有对其的管理权限，因此我无法安装任何自定义实用程序。我当前的 bat 文件使用 XCOPY：

```
xcopy "\\sharepoint\dept\gis\Abandoned_Wire\*.*" "\\corp.dom\fs4\g1\OUTPUT\GRIDPROD\PDF\Maps\Abandon Wire Maps" /c /s /r /y /i 
```

在我的 Windows XP 机器上，我使用来自 UnxUtils 的“touch”命令，但我找不到 Windows 7 原生的等效命令。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T23:35:51.717

在 Windows 上“触摸”文件有一种非常简单（尽管晦涩难懂）的语法。（更新最后修改的时间戳）

如果文件在当前目录中，您只需要：

```
copy /b fileName+ 
```

如果文件位于其他路径中，则此方法有效：

```
copy /b somePath\fileName+,, somePath\ 
```

但是，您似乎仍然需要进行大量编码，因为我相信您只想触摸已复制的文件。

以下内容未经测试，但我相信它会起作用。我不能保证表演。此解决方案需要 2 个未使用的驱动器号。我假设 K: 和 L: 可用。

```
@echo off

:: map unused drive letters to your source and target paths
subst K: "\\sharepoint\dept\gis\Abandoned_Wire"
subst L: "\\corp.dom\fs4\g1\OUTPUT\GRIDPROD\PDF\Maps\Abandon Wire Maps"

:: replicate the folder hierarchy
xcopy K: L: /t

:: recursively copy and touch all files
for /r K: %%F in (*) do (
  xcopy "%%F" "L:%%~pnxF" /r /y
  copy /b "L:%%~pnxF"+,, "L:%%~pF"
)

:: release the temporary drive mappings
subst /d K:
subst /d L: 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T19:18:20.033

您可以使用`powershell`，我相信它已经默认安装在 Windows 7 上。将此行添加到您的批处理文件以运行一个 powershell 命令，该命令会更新所有名为 Abandoned_Wire*.* 的文件的时间戳：

```
powershell.exe -command "ls 'folder\Abandoned_Wire\*.*' | foreach-object { $_.LastWriteTime = Get-Date }" 
```

那条线的作用很简单：

`-command`: 告诉 powershell 运行以下命令并立即返回

`ls`: 列出指定路径下的所有匹配文件

`foreach-object``ls`：在找到的每个文件上运行以下块

`$_.LastWriteTime = Get-Date`：对于每个文件，将 设置为（今天的日期和时间）`LastWriteTime`返回的值`Get-Date`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:48:36.070

**Robocopy**应该能够为您做到这一点。 `robocopy`是自 Vista 以来包含在 Windows 中的本机工具。

```
robocopy "\sharepoint\dept\gis\Abandoned_Wire" "\corp.dom\fs4\g1\OUTPUT\GRIDPROD\PDF\Maps\Abandon Wire Maps" /COPY:DA /S /IS 
```

默认情况下`robocopy`将复制`DAT`：数据、属性和时间戳，但这可以通过`/COPY`标志来控制。

查看[`robocopy /?`](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)所有选项。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-22T08:45:41.127

```
for /R %i in (\*.\*) do copy %i /B+ ,,/Y 
```

# c# - C# html sanitizer 有没有好的解决方案？

> ID：15208860
> 
> 赞同：10
> 
> 时间：2013-03-04T18:51:13.193
> 
> 标签：c#, html

用户可以输入稍后将显示给其他用户的 HTML。我正在使用的 WYSIWYG 插件从前端清理 HTML。它删除了所有潜在的恶意标签（脚本、src、任何以“on”开头的东西等）我显然还需要在后端进行一些验证。

有谁知道 C# 的一个好的解决方案？我一直看到这个[http://roberto.open-lab.com/2010/03/04/a-html-sanitizer-for-c/](http://roberto.open-lab.com/2010/03/04/a-html-sanitizer-for-c/)，虽然我有点犹豫是否要使用随机博客中的一些代码。有没有众所周知的插件？大多数人在这种情况下会怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T18:57:47.623

您可以使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)，这是一个维护良好的库，用于与 HTML 标签相关的所有内容。最佳实践是实施白名单，这是一个允许标签的列表。这个 SO 问题可能正是您所需要的：

[HTML Agility Pack 条带标签不在白名单中](https://stackoverflow.com/questions/3107514/html-agility-pack-strip-tags-not-in-whitelist)

# android - 点击文本视图以显示文本的代码

> ID：15208864
> 
> 赞同：1
> 
> 时间：2013-03-04T18:51:34.107
> 
> 标签：android

我正在开发一个 android 应用程序，这是我的第一个应用程序开发，

根据我的要求，我需要代码来实现如下图所示的 UI。

跳跃图像正在解释我的要求。下图是 App UI 视图。谢谢..

![在此处输入图像描述](../Images/a0f48569ac203a018cce125d0094d6c2.png)

我使用了下面的代码，但它不起作用。任何人都可以找到错误..

```
 - DrinkActivity.java

TextView t ;
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_drink);
            t = (TextView)findViewById(R.id.TextView01);
            t.setOnClickListener((android.view.View.OnClickListener) this);
            }
public void onClick(View arg0) {
            t.setText("My text on click");  
            }

 - activity_drink.xml

<LinearLayout 
    android:id="@+id/LinearLayout01" 
    android:layout_width="wrap_content"  
    android:layout_height="wrap_content">

</LinearLayout>

<ListView
    android:id="@+id/ListView01"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >
</ListView>
<LinearLayout 
    android:id="@+id/LinearLayout02" 
    android:layout_width="wrap_content"   
    android:layout_height="wrap_content">

</LinearLayout>

<TextView android:text="This is my first text"
 android:id="@+id/TextView01" 
 android:layout_width="wrap_content" 
 android:textStyle="bold"
 android:textSize="28sp"
 android:editable="true"
 android:clickable="true"
 android:layout_height="wrap_content"
 android:onClick="onClick">

 </TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:57:26.600

您可以通过设计 2 个片段来实现此行为：

**1.**第一个将是一个简单的 TextView 片段，它将仅显示您的选项卡文本。

**2.**第二个片段将作为一个 LinerLayout 垂直布局，其中一个接一个地包含 2 个 TextView，第一个将与第一个片段中的 TextView 相同，而第二个 TextView 将包含您的选项卡的描述。

那么您应该做的就是单击第一个片段，使用以下代码将其替换为第二个片段：

```
 if (!isTabOpen)
 {
     fragmentTransaction = fragmentManager.beginTransaction();
     fragmentTransaction.remove(TabFragment)
     .add(R.id.containerForFragments,TabAndDescriptionFragment)
     .commit();
 }
 else
 {
      fragmentTransaction = fragmentManager.beginTransaction();
     fragmentTransaction.remove(TabAndDescriptionFragment)
     .add(R.id.containerForFragments,TabFragment)
     .commit(); 
 } 
```

在您创建了 plusButtonFragment 和 userNewFragment 之后。

# javascript - JS - 停止对象链接而不会出错

> ID：15208874
> 
> 赞同：3
> 
> 时间：2013-03-04T18:51:49.557
> 
> 标签：javascript, oop

我有像棋盘这样的对象数组，每个对象都有返回`top`对象邻居`down`的函数。`left``right`

```
data.field(3,3).left() //returns field(2,3); 
```

我可以把它锁起来

`data.field(3,3).left().left().top().right().down().getName();`

但是没有像负线这样的物体

`data.field(-1,0)`

当给定的绳索为负数或大于对象数组时，它很容易检测到。您可以返回 false 或空对象 - 但是当没有返回任何内容并继续链接时，会出现错误

```
Uncaught TypeError: Object #<error> has no method 'down' 
```

哪个是ofc的东西，但是我怎样才能避免这个错误，并在没有对象返回时停止长链而不会出现停止js执行的错误？

让我们说：

```
data.left().left()/*here there is nothing to return*/.right().right().getName(); //should return false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:56:09.787

不是为无效位置返回 null ，而是返回一个自定义的“null object”，它会覆盖定向函数，只返回一个 null 对象，其中的 getName 函数返回“invalid location”，或者在调用这些函数时抛出异常。

```
nullObject = {

    this.left = function(){return this;}
    this.right =  function(){return this;}
    //etc
    this.getName = function(){"Invalid Location"}

} 
```

异常处理可能如下所示

```
try{
  piece.left().right().down().getName()
}
catch(exc){
  //handle exception
} 
```

顺便说一句，您实际上是在这里创建一个 monad。如果你让它在接收到 null 对象时停止计算，那么这就是[可能 monad](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29#The_Maybe_monad)的一个例子。不过，这比这里的实际问题高出几个理论水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:59:22.267

`try/catch`结构允许您在没有返回任何内容的情况下停止执行。但是，如果您不想使用`try/catch`，则每个方法都必须能够返回一个对象，该对象拥有与返回对象本身相同的方法。在这种情况下，链将被完全执行：

```
right: function () {
    var nextItem;
    // get next item to the right here
    return nextItem || {
        up: function () { return this; },
        right: function () { return this; },
        down: function () { return this; },
        left: function () { return this; }
    };
} 
```

# wcf - 将 WSHttpBinding 转换为自定义

> ID：15208875
> 
> 赞同：0
> 
> 时间：2013-03-04T18:51:53.217
> 
> 标签：wcf, web-config, wcf-binding

我想增加绑定的 MaxClockSkew，但我不知道如何将绑定转换为自定义绑定以添加 MaxClockSkew 元素。

如果有人可以帮助我转换它，我真的很感激。

```
 <wsHttpBinding>
    <binding name="MyBinding" maxReceivedMessageSize="102400">
      <readerQuotas  maxArrayLength="51200" maxStringContentLength="102400" maxNameTableCharCount="2147483647" />
      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None" />
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </wsHttpBinding> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:17:24.760

使用在线[WCF 绑定转换器](http://webservices20.cloudapp.net/)

尝试这个：

```
<customBinding>
  <binding name="NewBinding0">    
      <security authenticationMode="UserNameOverTransport" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" />

    <textMessageEncoding />
    <httpsTransport maxBufferSize="102400" maxReceivedMessageSize="102400" />
  </binding>
</customBinding> 
```

# c - 什么函数实际调用 WinMain

> ID：15208878
> 
> 赞同：3
> 
> 时间：2013-03-04T18:52:18.453
> 
> 标签：c, winapi

究竟是怎么`WinMain()`称呼的？我记得专业黑客使用的一个函数，它以（某物）开头，看起来像`__startupWinMain()`.

问题是，我有一个 Win32 EXE（用 编译`/SUBSYSTEM:WINDOWS`）但从命令行获取参数。如果命令行不正确，该过程应将帮助消息打印到控制台。

如何`FreeConsole()`使用链接器选项从 exe 手动释放（或）`/SUBSYSTEM:WINDOWS`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:52:35.043

作为程序的第一步，检查参数。如果他们没问题，请照常继续。

否则调用`AttachConsole`通过`ATTACH_PARENT_PROCESS`。如果成功，那么您可以将错误打印到标准输出并退出。如果没有，那么您必须在消息框中显示错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:36:57.843

也许您应该考虑让程序在命令行不正确时弹出一个消息框。像这样的东西：

```
MessageBox( NULL, "(description of command line error)",
            "MyProg - Command Line Error",
            MB_OK|MB_ICONEXCLAMATION ); 
```

这将在显示屏中央打开一个消息框，并在实际终止程序之前等待用户确认。

另一方面，您可以将程序构建为控制台应用程序并用于`printf()`写入控制台。控制台程序可能仍会创建窗口，但控制台本身会挂起，除非您弄清楚如何从中分离（然后，当然，您将不再能够使用`printf()`.）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:31:15.483

> WinMain() 实际上是如何调用的？

如果您在调试器中单步执行程序的第一行，然后查看堆栈，您可以看到 WinMain 是如何被调用的。典型构建的实际启动函数是从运行时库中提取的函数。对我来说，它是`_WinMainCRTStartup`.，但我想它可能会根据您构建的编译器、链接器和库的版本而有所不同。运行时库中的启动函数进行一些初始化，然后调用 WinMain。

使用`dumpbin /headers`（或其他可以检查 PE 二进制文件的程序），您可以确认哪个函数是可执行文件的“入口点”。除非你做了一些改变它，你可能会看到`_WinMainCRTStartup`，这与堆栈跟踪告诉我们的一致。

那应该回答你的问题，但它不能解决你的问题。看起来其他一些人已经发布了很好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:04:54.333

编译器如何知道调用 wWinMain 而不是标准的 main 函数？实际发生的是 Microsoft C 运行时库 (CRT) 提供调用 WinMain 或 wWinMain 的 main 实现。注意 CRT 在 main 中做了一些额外的工作。例如，在 wWinMain 之前调用任何静态初始化程序。尽管您可以告诉链接器使用不同的入口点函数，但如果您链接到 CRT，请使用默认值。否则，将跳过 CRT 初始化代码，导致无法预料的结果。（例如，全局对象将无法正确初始化。）

# mocking - 此测试是否正确使用 AutoFixture 和 Moq？

> ID：15208879
> 
> 赞同：10
> 
> 时间：2013-03-04T18:52:19.700
> 
> 标签：mocking, moq, autofixture

此测试是否正确使用 AutoFixture 和 Moq？是否写得尽可能简洁？测试如预期的那样失败，并在编写正确的实现后通过。

```
[Fact]
public void CustomerPropertyIsCorrect()
{
    var fixture = new AutoMoqFixture();

    var expected = fixture.Create<CardHolderCustomer>();
    var builderMock = fixture
        .Freeze<Mock<ICustomerAdapter>>()
        .Setup(x => x.BuildCustomer()).Returns(expected);

    var sut = fixture.Create<CardHolderViewModel>();
    var actual = sut.Customer;

    Assert.Equal(expected, actual);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T05:23:19.180

看起来不错！但是，**您也可以**通过 xUnit.net[扩展名以](http://nuget.org/packages/AutoFixture.Xunit/)**[声明](http://blog.ploeh.dk/2010/10/08/AutoDataTheoriesWithAutoFixture.aspx)**方式使用它。

假设测试中使用的类型定义为：

```
public class CardHolderCustomer
{
}

public interface ICustomerAdapter
{
    CardHolderCustomer BuildCustomer();
}

public class CardHolderViewModel
{
    private readonly ICustomerAdapter adapter;

    public CardHolderViewModel(ICustomerAdapter adapter)
    {
        if (adapter == null)
            throw new ArgumentNullException("adapter");
        this.adapter = adapter;
    }

    public CardHolderCustomer Customer
    {
        get
        {
            return this.adapter.BuildCustomer();
        }
    }
} 
```

**原始测试可以写成**：

```
[Theory, DomainTestConventions]
public void CustomerPropertyIsCorrect2(
    CardHolderCustomer expected,
    [Frozen]Mock<ICustomerAdapter> builderStub,
    CardHolderViewModel sut)
{
    builderStub
        .Setup(x => x.BuildCustomer())
        .Returns(expected);

    var actual = sut.Customer;

    Assert.Equal(expected, actual);
} 
```

`DomainTestConventionsAttribute`定义为：

```
internal class DomainTestConventionsAttribute : AutoDataAttribute
{
    internal DomainTestConventionsAttribute()
        :base(new Fixture().Customize(new DomainTestConventions()))
    {
    }
} 
```

`DomainTestConventions`定义为：

```
internal class DomainTestConventions : CompositeCustomization
{
    internal DomainTestConventions()
        :base(new AutoMoqCustomization())
    {
    }
} 
```

***请注意，`DomainTestConventions`派生自`CompositeCustomization`which 基本上意味着您可以创建更多自定义项并将它们作为参数添加到基本构造函数。***

您还可以阅读：

*   [AutoFixture 自定义的顺序很重要](http://blog.ploeh.dk/2012/07/31/TheorderofAutoFixtureCustomizationsmatter/)
*   [带有 AutoFixture 的 AutoData 理论](http://blog.ploeh.dk/2010/10/08/AutoDataTheorieswithAutoFixture/)
*   [使用 AutoFixture 自定义保持单元测试干燥](http://megakemp.com/2011/12/15/keep-your-unit-tests-dry-with-autofixture-customizations/)
*   [AutoFixture、xUnit.net 和自动模拟](http://nikosbaxevanis.com/2012/07/31/autofixture-xunit-net-and-auto-mocking/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:22:07.003

我认为这是简洁易读的。但我质疑这种测试的*价值。*

您的测试名为**CustomerPropertyIsCorrect**，所以我假设这是您想要测试的。由于您指示 ICustomerAdapter 的**BuildCustomer****方法**返回之前创建的冻结实例，并且由于视图模型代码在 xUnit 中运行时将使用此代码，所以是的，冻结对象确实会返回。

 **现在，我还没有完全加入 TDD 阵营，所以这可能只是我，而不是“获得” TDD。但据我所知，这个测试将验证视图模型在其 Customer 属性中有一些**CardHolderCustomer**实例——但不一定是“正确的”实例。这其中的价值在哪里？**

# java - Log4j SMTP 将错误消息发送到电子邮件

> ID：15208883
> 
> 赞同：3
> 
> 时间：2013-03-04T18:52:29.120
> 
> 标签：java, smtp, log4j

我在尝试让我的 Log4j 在出现问题时发送 SMTP 电子邮件时遇到了一个重大问题。这是我的代码：

```
final Properties properties = new Properties();
final String strProperties = "log4j.rootLogger=ERROR, console, smtp\n"
            + "log4j.appender.console=org.apache.log4j.ConsoleAppender\n"
            + "log4j.appender.console.Target=System.out\n"
            + "log4j.appender.console.layout=org.apache.log4j.PatternLayout\n"
            + "log4j.appender.console.layout.ConversionPattern=%-5p: %c - %m%n\n"
            + "log4j.appender.smtp=org.apache.log4j.net.SMTPAppender\n"
            + "log4j.appender.smtp.EvaluatorClass=com.blah.blah.log4j.TriggerOnError\n"
            + "log4j.appender.smtp.SMTPHost=localhost\n"
            + "log4j.appender.smtp.From=mml_automation@blah.com\n"
            + "log4j.appender.smtp.To=ccmis@blah.com\n"
            + "log4j.appender.smtp.Subject=BagBox ERROR\n"
            + "log4j.appender.smtp.layout=org.apache.log4j.PatternLayout\n"
            + "log4j.appender.smtp.threshold=INFO\n"
            + "log4j.appender.smtp.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} : %-40c : %-5p %x - %m %n\n"
            + "log4j.logger.com.blah.blah.service.BagBoxService=INFO, smtp\n"
            + "log4j.logger.com.blah.blah.security=INFO, smtp\n"
            + "log4j.logger.org.springframework.core=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.beans=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.context=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.web=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.web.servlet.DispatcherServlet=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.security=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.aop=ERROR, console, smtp\n"
            + "log4j.logger.org.springframework.ui=ERROR, console, smtp\n";

    final ByteArrayInputStream byteProperties = new ByteArrayInputStream(
            strProperties.getBytes());
    properties.load(byteProperties);
    PropertyConfigurator.configure(properties); 
```

我在控制台中不断收到以下错误：

```
Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
java.net.SocketException: Network is unreachable: connect 
```

如果我在 IP 地址上运行 telnet，它会恢复正常并且可以正常连接。谁能告诉我我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:35:08.133

我猜您的 SMTP 守护程序正在侦听“真实”IP，例如 192.168.1.123，因此未绑定到`localhost`(127.0.0.1)，如中所示

```
log4j.appender.smtp.SMTPHost=localhost 
```

`netstat -anpt | grep 25`告诉你什么？您是否可能在 25 以外的端口上运行 SMTP？

干杯，

# java - Java - 是否可以将图像和字符串放在同一个 JTable 单元格中？

> ID：15208884
> 
> 赞同：2
> 
> 时间：2013-03-04T18:52:30.813
> 
> 标签：java, swing, jtable, tablecellrenderer

我知道如何将字符串放入 JTable 单元格中，并且我知道如何将图像放入 JTable 单元格中。但是是否可以将图像和字符串放入相同的 JTable 单元格中？

这样做的原因是我的 JTable 中有一个“状态”列，该列目前包含绿色、琥珀色或红色图像。为了满足设计要求，我需要在每张图片旁边添加一些解释性文字（所以绿色图片旁边的文字是“在线”，琥珀色图片旁边的文字是“未知”，接下来的文字到红色图像将是“离线”）。我需要在单列（或看起来/行为像单列）而不是两列中执行此操作。

我对此进行了研究，但根本没有找到任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T19:49:59.813

是的。

您需要使用自定义单元格渲染器。查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)了解更多详细信息。

您实际上有两个选择，您可以简单地设置单元格的图标和文本，或者您可以使用渲染器工具提示文本来代替......

```
public class IconTextCellRemderer extend DefaultTableCellRenderer {
    public Component getTableCellRendererComponent(JTable table,
                                  Object value,
                                  boolean isSelected,
                                  boolean hasFocus,
                                  int row,
                                  int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        setText(...);
        setIcon(...);
        setToolTipText(...);
        return this;
    }
} 
```

当然，您需要将渲染器应用于列...

```
TableColumnModel tcm = table.getColumnModel();
tcm.getColumn(x).setCellRenderer(new IconTextCellRemderer()); 
```

# email - 使用 Powershell 查找 Lotus Notes 互联网电子邮件地址

> ID：15208888
> 
> 赞同：0
> 
> 时间：2013-03-04T18:52:39.993
> 
> 标签：email, powershell, lotus-notes, lotus

使用 Powershell，我需要从 Lotus Notes names.nsf 通讯簿中检索 Internet 电子邮件地址。

在 Notes 中，我可以看到要检索的 Internet 电子邮件地址。它位于“邮件”部分下的“基本”选项卡上，位于名为“Internet 地址”的字段中。但是，我无法找到它所在的视图，也找不到查询或派生它的方法。在 Lotus Notes 的“工作/家庭”选项卡上过滤我希望公司找到的电子邮件地址也会很有帮助。

在 IE 中打开其中一个 names.nsf 文件，我看到了一些我想要的字段，但其中没有格式化的 Internet 电子邮件地址。我所看到的只是 Lotus notes 样式的电子邮件地址：

**名字姓氏/我的公司/abc @ abc**

（其中的列名为**$16**）。

有没有办法从 Lotus Notes names.nsf 地址簿中提取完整的 Internet 电子邮件地址？如果是这样，怎么做？如果它们在某些可用的“隐藏”视图中，您如何查询这些隐藏视图中的值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:06:54.967

在许多情况下，用于查找个人文档的最佳视图是名为“$Users”的隐藏视图。它由您能想到的几乎所有名称变体索引，因此查找往往会起作用。您可以通过从视图中打开 Person 文档并读取名为“InternetAddress”的 NotesItem 来找到它，或者您可以直接从标有“InternetAddress”的视图列中读取它，我相信它是第 17 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:35:04.020

您可以使用 powershell 从 NAB 访问给定用户的所有属性。如果您的 Notes 客户端是 32 位，则必须运行 32 位版本的 PS。系统将提示您输入 Notes 标识密码。

```
 $notes=new-object -comobject Lotus.NotesSession;
  $notes.Initialize("");
  $ndb = $notes.getdatabase("admin","names.nsf");
  $nview = $ndb.getview('($Users)');
  $searchkey = "Schmoe"; #whatever
  $doc =$nview.getdocumentbykey($searchkey,$true);
  $mailaddress = $doc.getitemvalue('mailaddress')[0];
  $internetaddress = $doc.getitemvalue('internetaddress')[0]; 
```

# ruby-on-rails - 获取每个月最后一个星期五的日期

> ID：15208890
> 
> 赞同：9
> 
> 时间：2013-03-04T18:52:43.660
> 
> 标签：ruby-on-rails, ruby

我是红宝石的新手，我想得到每个月最后一个星期五的日期。例如，3 月的最后一个星期五是 29 日，4 月 26 日的最后一个星期五。那么，我该如何获得解决方案？我正在使用rails框架。

该方法`.cweek`返回一年中的第几周，但不返回当前月份的第几周。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T19:06:25.207

```
#!/usr/bin/env ruby

require 'date'

(1..12).each do |month|
  d = Date.new(2013, month, -1)
  d -= (d.wday - 5) % 7
  puts d
end 
```

[来源](http://rosettacode.org/wiki/Last_Friday_of_Each_Month#Ruby)（第二/第三个谷歌结果..）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T19:20:39.787

我会接受李的回答，我只发布这个是因为（我认为）它很酷。

使用宝石`Chronic`（[https://github.com/mojombo/chronic](https://github.com/mojombo/chronic)）：

```
#Last Friday of this coming December
require 'chronic'
last_friday = Chronic.parse("First Friday of next January") - 1.week 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-31T19:15:23.093

可以在一行中检索一个月的最后一个星期五：

```
def last_fridays_for_every_month_of_year(year)
  (1..12).map do |month|
    Date.new(year, month, -1).downto(0).find(&:friday?)
  end
end 
```

你可以这样使用它：

```
last_fridays_for_every_month_of_year 2013
#=> [#<Date: 2013-01-25 ((2456318j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-02-22 ((2456346j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-03-29 ((2456381j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-04-26 ((2456409j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-05-31 ((2456444j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-06-28 ((2456472j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-07-26 ((2456500j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-08-30 ((2456535j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-09-27 ((2456563j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-10-25 ((2456591j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-11-29 ((2456626j,0s,0n),+0s,2299161j)>,
     #<Date: 2013-12-27 ((2456654j,0s,0n),+0s,2299161j)>] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T19:11:33.980

```
require "active_support/core_ext"

end_of_month = Date.today.end_of_month
if end_of_month - end_of_month.beginning_of_week >= 4
   end_of_month+5.days
else
   end_of_month-2.days
end
# => Fri, 29 Mar 2013 
```

# objective-c - CGContextRef 不绘图

> ID：15208895
> 
> 赞同：0
> 
> 时间：2013-03-04T18:52:54.487
> 
> 标签：objective-c, macos, drawing

我正在尝试为我的 Mac 应用程序画一个圆圈。该代码是：

```
- (void)mouseMoved:(NSEvent*)theEvent {
    NSPoint thePoint = [[self.window contentView] convertPoint:[theEvent locationInWindow] fromView:nil];
    NSLog(@"mouse moved: %f % %f",thePoint.x, thePoint.y);

    CGRect circleRect = CGRectMake(thePoint.x, thePoint.y, 20, 20);
    CGContextRef context = [[NSGraphicsContext currentContext] graphicsPort];
    CGContextSetRGBFillColor(context, 0, 0, 255, 1.0);
    CGContextSetRGBStrokeColor(context, 0, 0, 255, 0.5);
    CGContextFillEllipseInRect(context, CGRectMake(circleRect.origin.x, circleRect.origin.y, 25, 25));
    CGContextStrokeEllipseInRect(context, circleRect);
    [self needsDisplay];
} 
```

`- (void)mouseMoved:`被完美调用，我可以在 NSLog 中看到正确的 x 和 y 坐标。但我没有得到任何圆圈......令人惊讶的是：如果我正在**最小化我的应用程序并重新打开它**（因此它“更新”NSView）**，那么圆圈就会完美绘制**！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:56:38.987

`mouseMoved`不是**绘制**任何东西的正确位置，除非您在屏幕外缓冲区上绘制。如果您要在屏幕上绘制，请保存*thePoint*和任何其他必要的数据，然后在该方法中调用`[self setNeedsDisplay:YES]`并绘制。`drawRect:(NSRect)rect`

此外，我看不出有使用的理由，`CGContextRef`而有更多的“友好” `NSGraphicsContext`。虽然，这是品味问题。

绘制代码示例：

```
- (void)mouseMoved:(NSEvent*)theEvent {
    // thePoint must be declared as the class member
    thePoint = [[self.window contentView] convertPoint:[theEvent locationInWindow] fromView:nil];
    [self setNeedsDisplay:YES];
}

- (void)drawRect:(NSRect)rect
{
    NSRect ovalRect = NSMakeRect(thePoint.x - 100, thePoint.y - 100, 200, 200);
    NSBezierPath* oval = [NSBezierPath bezierPathWithOvalInRect:ovalRect];
    [[NSColor blueColor] set];
    [oval fill];
    [[NSColor redColor] set];
    [oval stroke];
} 
```

# graph - 创建在系列之间着色的区域折线图？

> ID：15208896
> 
> 赞同：0
> 
> 时间：2013-03-04T18:52:57.203
> 
> 标签：graph, highcharts

我正在尝试创建一个新的区域线图，为两条线之间的空间着色，但由于某种原因，我无法做到这一点。默认行为是为从系列到 x 轴的区域着色。有没有办法只能在两个系列之间的空间中着色？

我试图模仿这种行为，但使用 HighCharts，在这里：[https ://confluence.atlassian.com/download/attachments/185729594/report_chart_created_vs_resolved_report.png?version=3&modificationDate=1354064895573&api=v2](https://confluence.atlassian.com/download/attachments/185729594/report_chart_created_vs_resolved_report.png?version=3&modificationDate=1354064895573&api=v2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:28:47.667

我认为您需要使用区域范围图表类型：[http ://www.highcharts.com/demo/arearange](http://www.highcharts.com/demo/arearange)

# mysql - 想要使用 mysql Query 显示关键字及其翻译

> ID：15208900
> 
> 赞同：0
> 
> 时间：2013-03-04T18:53:14.220
> 
> 标签：mysql

我有一种情况，有两个表，一个是关键字，第二个是 mysql 中的翻译

```
Keywords
------------
ID    Keyword
------------
1     Hi
2     How are you 
```

这是第二张桌子

```
Translations
----------------------------------------
keyword_id      translation   Lang_id
------------------------------------------
1               Hello          1
1               Hej            4
1               Hey            2 
```

所以我想显示关键字列表（即使它们不在翻译表中）及其翻译，

我正在使用这个查询

```
SELECT keywords.keyword, translation 
FROM keywords 
LEFT JOIN translations on keywords.id = translations.keyword_id 
WHERE lang_id = 4 
```

结果我想要关键字列表（嗨，你好吗）和翻译列表（Hej），如果没有翻译你好吗，那么它应该显示一些默认文本，如 lang_id 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:58:12.447

使用[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

```
SELECT keywords.keyword, COALESCE(translation, "lang_id 1")
FROM keywords 
LEFT JOIN translations on keywords.id = translations.keyword_id 
WHERE lang_id = 4 
```

这将向您显示您设置的默认字符串，而不是`NULL`在没有相应记录时...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:02:08.000

```
SELECT keywords.keyword, Case When translation is null Then "Lang_ID1" Else translation End)
from keywords 
LEFT JOIN translations on keywords.id = translations.keyword_id 
where lang_id = 4 
```

# c# - OpenTK 基本三角形未按应有的方式绘制

> ID：15208901
> 
> 赞同：0
> 
> 时间：2013-03-04T18:53:26.497
> 
> 标签：c#, opengl, opentk

我正在尝试使用指定的颜色和顶点来绘制三角形，但目前它似乎为位置选择了一些颜色数字并且没有做它应该做的事情

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenTK;
using OpenTK.Graphics.OpenGL;
using OpenTK.Graphics;

namespace newTriangle
{
    class Program
    {
        static void Main(string[] args)
        {
            MyWindow myWindow = new MyWindow();
            myWindow.Run();
        }
    }

    class MyWindow : GameWindow
    {
        private uint[] vertexBufferObjectIDs = new uint[2];
        private int vertexArrayID, vertexShaderID, fragmentShaderID, shaderProgramID;

        public MyWindow()
            : base(800, // Width
                600, // Height
                GraphicsMode.Default,
                "My OpenTK Window",
                GameWindowFlags.Default,
                DisplayDevice.Default,
                3, // major
                0, // minor
                GraphicsContextFlags.ForwardCompatible) { }

        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);
            GL.ClearColor(Color4.CornflowerBlue);

            GL.GenVertexArrays(1, out vertexArrayID);
            GL.BindVertexArray(vertexArrayID);

            ushort[] indices = new ushort[] { 0, 1, 2 };
            float[] vertices = new float[] {-1.0f, 1.0f, 0.0f, 1.0f, 0.0f,
                                            0.0f, -1.0f, 1.0f, 0.0f, 0.0f,
                                            1.0f, 1.0f, 0.0f, 0.0f, 1.0f };

            GL.GenBuffers(vertexBufferObjectIDs.Length, vertexBufferObjectIDs);
            GL.BindBuffer(BufferTarget.ArrayBuffer, vertexBufferObjectIDs[0]);
            GL.BufferData(BufferTarget.ArrayBuffer, (IntPtr)(vertices.Length * sizeof(float)), vertices, BufferUsageHint.StaticDraw);

            GL.BindBuffer(BufferTarget.ElementArrayBuffer, vertexBufferObjectIDs[1]);
            GL.BufferData(BufferTarget.ElementArrayBuffer, (IntPtr)(indices.Length * sizeof(ushort)), indices, BufferUsageHint.StaticDraw);

            GL.VertexAttribPointer(0, 2, VertexAttribPointerType.Float, true, 5 * sizeof(float), 0);
            GL.EnableVertexAttribArray(0);

            GL.VertexAttribPointer(1, 3, VertexAttribPointerType.Float, true, 5 * sizeof(float), 2 * sizeof(float));
            GL.EnableVertexAttribArray(1);

            vertexShaderID = GL.CreateShader(ShaderType.VertexShader);
            string vertShaderText =
                @"
                            #version 150

                            in vec3 position;
                            in vec3 colour;
                            out vec3 Colour;
                            void main()
                            {
                            Colour = colour;
                            gl_Position = vec4(position, 1) ;
                            }";

            GL.ShaderSource(vertexShaderID, vertShaderText);
            GL.CompileShader(vertexShaderID);

            fragmentShaderID = GL.CreateShader(ShaderType.FragmentShader);
            string fragShaderText =
                @"
                            #version 150
                            in vec3 Colour;
                            out vec4 outputF;
                            void main() 
                            {
                            outputF = vec4(Colour, 1.0);
                            }";
            GL.ShaderSource(fragmentShaderID, fragShaderText);
            GL.CompileShader(fragmentShaderID);

            shaderProgramID = GL.CreateProgram();
            GL.AttachShader(shaderProgramID, fragmentShaderID);
            GL.AttachShader(shaderProgramID, vertexShaderID);
            GL.LinkProgram(shaderProgramID);
            GL.UseProgram(shaderProgramID);
        }

        protected override void OnUnload(EventArgs e)
        {
            base.OnUnload(e);
            GL.DeleteBuffers(vertexBufferObjectIDs.Length, vertexBufferObjectIDs);
            GL.DeleteVertexArrays(1, ref vertexArrayID);

            GL.UseProgram(0); GL.DetachShader(shaderProgramID, vertexShaderID);
            GL.DetachShader(shaderProgramID, fragmentShaderID);
            GL.DeleteShader(fragmentShaderID);
            GL.DeleteShader(vertexShaderID);
            GL.DeleteProgram(shaderProgramID);
        }

        protected override void OnRenderFrame(FrameEventArgs e)
        {
            base.OnRenderFrame(e);

            GL.Clear(ClearBufferMask.ColorBufferBit);

            GL.DrawElements(BeginMode.Triangles, 3, DrawElementsType.UnsignedShort, IntPtr.Zero);

            this.SwapBuffers();
        }
    }
} 
```

谁能看到我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:21:42.570

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:14:02.620

```
vec4(position, 1) 
```

在 GLSL 中，整数不会自动进行类型提升。

有点奇怪，因为你在片段着色器中做对了。

尝试这个：

```
vec4(position, 1.0) 
```

# java - 设置中断位不会使 Future.get() 抛出 TimeoutException

> ID：15208903
> 
> 赞同：1
> 
> 时间：2013-03-04T18:53:31.690
> 
> 标签：java, timeout, interrupt, future, timeoutexception

为什么在调用 Future.get() 时不设置 Callable 中的中断位会导致代表 Callable 的 Future 抛出 TimeoutException？

```
public class ExecutorServiceTest extends MockitoTestCase {
  private static CountDownLatch latch1 = new CountDownLatch(1);

  class TaskChecksForInterruptedExcAndDoesSetInterruptedBit implements Callable<String> {
    @Override
    public String call() {
      latch1.countDown();
      while (!Thread.currentThread().isInterrupted()) {
      }
      Thread.currentThread().interrupt();
      return "blah";
    }
  }

  void testInterrupt() throws Exception {
    ExecutorService pool = Executors.newFixedThreadPool(numThreads);
    Future<String> future = pool.submit(new TaskChecksForInterruptedExcAndDoesSetInterruptedBit());
    latch1.await(); // Don't interrupt the Callable until it actually starts processing
    pool.shutdownNow();
    try {
      future.get(100, TimeUnit.MILLISECONDS);
    } catch (final TimeoutException e) {
      // Why doesn't this get called!
      return;
    }
    fail();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:07:24.987

1.  shutdownNow() 调用尝试中断所有正在运行的任务。在这种情况下，在您的繁忙循环中检测到中断，因此代码继续并且 Callable 返回“blah”（而不是异常）

2.  根据规范，TimeoutException 仅在线程等待完整的超时期限但没有结果可用时才抛出。中断不适合这种情况。

3.  您对 CountDownLatch 的使用不正确。你递减它，但我没有看到对latch1.await() 的调用

# java - Struts , JSON, 忽略一些属性

> ID：15208909
> 
> 赞同：1
> 
> 时间：2013-03-04T18:53:50.013
> 
> 标签：java, jquery, json, struts

我有一个包含多个字段的表单（显示在客户端），并且一些字段用 JSON 填充（如国家列表）。问题是每次 JSON 填充位置列表时，它都会引发 ognl.OgnlException，因为它无法在 JSON CLASS 上看到 auther 属性（来自表单）！！！

所以我正在寻找一种方法让我的 JSON 类忽略那些必须在另一个 Action CLASS 上处理的属性！

# python - 显示两个测试覆盖运行的差异

> ID：15208925
> 
> 赞同：0
> 
> 时间：2013-03-04T18:54:24.867
> 
> 标签：python, code-coverage, coverage.py

我正在为一些旧的和不受欢迎的代码编写测试。我发现coverage.py 是一个有用的工具，可以帮助我决定接下来要编写哪个测试。当我改进我们的测试时，我想看看我是如何影响我们的覆盖范围的。

目前，我通过在并排的浏览器窗口中两次调出 html 报告并在视觉上寻找差异来做到这一点。这看起来很粗糙。你们有没有更好的解决方案？

我找到[了 z3c.coverage](https://pypi.python.org/pypi/z3c.coverage#using-coveragediff)，在努力让 zope-testrunner 与我们的测试一起工作后，发现它只报告回归，而不是改进。我可以将输入设置为相反的，这样改进看起来就像回归，但是向其他人展示会很混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:34:56.523

Coverage.py 没有差异功能。听起来很酷，想提供补丁吗？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T11:49:45.527

我也有类似的情况。我想看看覆盖率是否下降了。没有直接的方法可以得到它。所以，我写了一些python脚本和一个shell脚本。我工作得很好，我现在有詹金斯。

**脚步**

1.  存储以前的报告和当前报告（report.prev 和 report.curr）

报告文本格式：（这是默认格式，很容易解析）

```
Name                                     Stmts   Miss  Cover
------------------------------------------------------------------------------
my/project/example.py                     3      3     0% 
```

2.  将报告解析为键、值是 { 文件名：coverage_percentage } 的地图

    **例子：**

> ```
> previous_run = { 
>     '/my/filename.py' : '67', 
>     '/one/more/file.py' : '89'
> }
> 
> current_run = {
>     '/my/filename.py' : '67',
>     '/one/more/file.py' : '89'
> } 
> ```

3.  然后我们可以比较这些地图（current_run，previous_run）

4.  在生成新报告时，滚动文件：意思是，将当前报告文件移动到上一个（'mv report.curr report.prev'）并将新文件移动到 report.curr

我在这里放了完整的实现： [https](https://github.com/diganthdr/handytools) ://github.com/diganthdr/handytools 见（coverage_compare.py）

# ios - 创建一个新的状态栏

> ID：15208926
> 
> 赞同：0
> 
> 时间：2013-03-04T18:54:25.283
> 
> 标签：ios, statusbar

我正在创建原型应用程序，需要有一个自定义运营商，而不是显示 AT&T/Verizon 或手机上的任何实际运营商。

我有一个应用程序启动的假主屏幕，但希望为其显示自定义状态栏以及之后的屏幕。这些都是黑色状态栏。

对最好的方法有什么建议吗？我创建了一个 UIViewController 子类，它只是添加了一个状态栏的图像，其标签设置为当前时间，但如果我使用导航栏，这将不起作用。

理想情况下，这是以我可以使用真实状态栏的方式完成的，但我可以在载体区域上放置一个带有我想要的文本的 uiview。这样我就不必在时间和电池图标中编码。

请注意，由于这些是原型，我不需要担心应用商店的批准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:26:25.457

隐藏真实的状态栏并使用 UIView 制作一个，或者在 UIImageView 中制作一个看起来像它的图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:25:04.217

在尝试了几种不同的方法后，我偶然发现了这个有效的代码：[https ://gist.github.com/guidosabatini/4066796](https://gist.github.com/guidosabatini/4066796)

无法在现场设备上进行测试。

这是我以前使用的（经过一些修改）： http: [//www.cocoaintheshell.com/2010/11/custom-status-bar-ios/](http://www.cocoaintheshell.com/2010/11/custom-status-bar-ios/)

# c# - 如何更改列表框的突出显示颜色

> ID：15208930
> 
> 赞同：1
> 
> 时间：2013-03-04T18:54:33.820
> 
> 标签：c#, colors, listbox, devexpress, highlight

我正在使用 ListBox（来自 DevExpress）。如图所示，突出显示颜色为淡橙色 (?)。如何将其更改为蓝色或其他内容？

![在此处输入图像描述](../Images/479997f2671b684f04990bf7674faa06.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:38:59.823

参考：[DevExpress 支持线程 - 更改 ListBox 中的 FocusedColor](http://www.devexpress.com/Support/Center/p/Q260549.aspx)

要获得所需的结果，请处理[DrawItem](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsBaseListBoxControl_DrawItemtopic)事件并在此事件处理程序中设置`e.Appearance`以获得所需的结果。

```
private void listBoxControl1_DrawItem(object sender, DevExpress.XtraEditors.ListBoxDrawItemEventArgs e) {
    if(e.State == DrawItemState.Focus || e.State== DrawItemState.Selected) {
        e.Appearance.BackColor = Color.Red;
    }
} 
```

如需更多帮助，请查看[DevExpress 搜索结果](http://search.devexpress.com/?q=change%20listbox%20Appearance&p=T4%7CP1%7C4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:54:21.257

您需要先删除列表框的主题。

主题会覆盖您对`Appereance`属性所做的更改。

![在此处输入图像描述](../Images/dddc3c58086f0322c13c77165496777c.png)

选择“皮肤”值以外的任何值 - 如果您需要覆盖颜色。

然后设置你想要的颜色：

![在此处输入图像描述](../Images/6f9683c5c619d3c466d82cfbfdab29bc.png)

[该](https://www.youtube.com/watch?v=_1-SsHUtbJs)视频展示了它是如何对 XtraGrid 进行的 - 但该原理仍然可以应用于列表框。

**编辑** 如果您需要更改高亮颜色 - 移除皮肤（如图所示）并使用 DrawItem 事件：

```
private void listBoxControl1_DrawItem(object sender, ListBoxDrawItemEventArgs e)
{
  if(e.State != (DrawItemState.Focus & DrawItemState.Selected))
  {
    e.Appearance.BackColor = Color.Blue;
  }
} 
```

并且您需要设置 listBox 属性

`this.listBoxControl1.HotTrackSelectMode = DevExpress.XtraEditors.HotTrackSelectMode.SelectItemOnClick;`

# c# - 使用命令行解析器库的列表/数组的默认值

> ID：15208931
> 
> 赞同：7
> 
> 时间：2013-03-04T18:54:35.830
> 
> 标签：c#, command-line, command-line-arguments, command-line-parser

使用[命令行解析器库](https://github.com/gsscoder/commandline)并具有具有默认值的列表或数组，默认值打印为（默认值：System.String[]）。有没有办法让它显示实际的默认值？

所以随着

```
[OptionList('l', "languages", Separator = ',', DefaultValue = new []{"eng"})]
public IList<string> Languages { get; set; } 
```

帮助文本打印为`"(Default: System.String[]) ..."`. 我想说`"(Default: { "eng" })"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:45:01.817

HelpText 因使用针对 DefaultValue 的通用格式化函数而受苦。

问题是（参考最新稳定版）在 HelpText.cs 的第 702[行](https://github.com/gsscoder/commandline/blob/master/src/libcmdline/Text/HelpText.cs#L702)：

```
if (option.HasDefaultValue)
{
  option.HelpText = "(Default: {0}) ".FormatLocal(option.DefaultValue) + option.HelpText;
} 
```

当前的开发分支（我认为可用）使用[新的辅助私有方法](https://github.com/gsscoder/commandline/blob/develop-1.9.8-beta/src/libcmdline/Text/HelpText.cs#L783)（也从测试的角度涵盖）解决了它：

```
private static string FormatDefaultValue(object value)
{
    if (value is bool)
    {
        return value.ToLocalString().ToLowerInvariant();
    }

    if (value is string)
    {
        return value.ToLocalString();
    }

    var asEnumerable = value as IEnumerable;
    if (asEnumerable != null)
    {
        var builder = new StringBuilder();
        foreach (var item in asEnumerable)
        {
            builder.Append(item.ToLocalString());
            builder.Append(" ");
        }
        return builder.Length > 0 ? builder.ToString(0, builder.Length - 1) : string.Empty;
    }
    return value.ToLocalString();
} 
```

要使用最新的开发分支：

```
git clone -b develop-1.9.8-beta https://github.com/gsscoder/commandline.git commandline-develop 
```

For informations on its stability and how could change after first release, see [here](https://github.com/gsscoder/commandline/wiki/Latest-Beta).

With this instructions should be easy also patch a fork of the current stable.

# python - 如果python中有错误，请用户重新输入输入

> ID：15208934
> 
> 赞同：1
> 
> 时间：2013-03-04T18:54:48.473
> 
> 标签：python, input, user-input, base-conversion

我正在用python开发一个程序，以从任何数字基数转换为任何数字基数。我的代码如下

```
num = raw_input("Please enter a number: ")
base = int(raw_input("Please enter the base that your number is in: "))
convers = int(raw_input("Please enter the base that you would like to convert to: "))
if (64 < convert < 2 or 64 < base < 2):
    print "Error! Base must be between 2 and 32."
    sys.exit()
symtodig = {
    '0': 0,
    '1': 1,
    '2': 2,
    '3': 3,
    '4': 4,
    '5': 5,
    '6': 6,
    '7': 7,
    '8': 8,
    '9': 9,
    'A': 10,
    'B': 11,
    'C': 12,
    'D': 13,
    'E': 14,
    'F': 15,
    'G': 16,
    'H': 17,
    'I': 18,
    'J': 19,
    'K': 20,
    'L': 21,
    'M': 22,
    'N': 23,
    'O': 24,
    'P': 25,
    'Q': 26,
    'R': 27,
    'S': 28,
    'T': 29,
    'U': 30,
    'V': 31,
    'W': 32,
    'X': 33,
    'Y': 34,
    'Z': 35,
    'a': 36,
    'b': 37,
    'c': 38,
    'd': 39,
    'e': 40,
    'f': 41,
    'g': 42,
    'h': 43,
    'i': 44,
    'j': 45,
    'k': 46,
    'l': 47,
    'm': 48,
    'n': 49,
    'o': 50,
    'p': 51,
    'q': 52,
    'r': 53,
    's': 54,
    't': 55,
    'u': 56,
    'v': 57,
    'w': 58,
    'x': 59,
    'y': 60,
    'z': 61,
    '!': 62,
    '"': 63,
    '#': 64,
    '$': 65,
    '%': 66,
    '&': 67,
    "'": 68,
    '(': 69,
    ')': 70,
    '*': 71,
    '+': 72,
    ',': 73,
    '-': 74,
    '.': 75,
    '/': 76,
    ':': 77,
    ';': 78,
    '<': 79,
    '=': 80,
    '>': 81,
    '?': 82,
    '@': 83,
    '[': 84,
    '\\': 85,
    ']': 86,
    '^': 87,
    '_': 88,
    '`': 89,
    '{': 90,
    '|': 91,
    '}': 92,
    '~': 93}

digits = 0
for character in num:
assert character in symtodig, 'Found unknown character!'
value = symtodig[character]
assert value < base, 'Found digit outside base!'
digits *= base
digits += value

digtosym = dict(map(reversed, symtodig.items()))

array = []
    while digits:
    digits, value = divmod(digits, convers)
    array.append(digtosym[value])
answer = ''.join(reversed(array))

print "Your number in base", base, "is: ", answer 
```

我的代码效果很好，但没有使用

```
if (64 < convert < 2 or 64 < base < 2):
print "Error! Base must be between 2 and 32."
sys.exit() 
```

id 喜欢将它们带回基本变量的输入，而不是退出程序。我是 python 新手，不知道如何做这样的事情。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:00:00.900

```
while True:
    try:
        convert = int(raw_input('Convert: '))
        base = int(raw_input('Base: '))
        if (64 < convert < 2 or 64 < base < 2):
            print "Error! Base must be between 2 and 32."
            continue
        break
    except Exception, e:
        print '>> Error: %s' % e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:00:43.230

通用模板：

```
while True:
    # get user input
    # ...
    if valid_input():
        break 
```

例如：

```
def get_int(prompt, lo=None, hi=None):
    while True:
        try:
            n = int(raw_input(prompt))
        except ValueError:
            print("expected integer")
        else: # got integer, check range
            if ((lo is None or n >= lo) and
                (hi is None or n <= hi)):
                break # valid
            print("integer is not in range")
    return n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:57:38.337

一个简单的方法是在选择的开头简单地添加一个循环：它在有效选择的情况下转义并在它不正确时迭代（而不是 sys.exit()，我相信这是你想要避免的） .

第一部分可能是：

```
selected = False
while not selected:
    num = raw_input("Please enter a number: ")
    base = int(raw_input("Please enter the base that your number is in: "))
    convert = int(raw_input("Please enter the base that you would like to convert to: "))
    if (64 < convert or convert < 2 or 64 < base or base < 2):
        print "Error! Base must be between 2 and 32."

    else:
        selected = True 
```

另外，请注意我将条件更改为：

```
if (64 < convert or convert < 2 or 64 < base or base < 2): 
```

# c# - 无法从 SerialPort 读取

> ID：15208935
> 
> 赞同：1
> 
> 时间：2013-03-04T18:54:57.133
> 
> 标签：c#

我正在尝试通过串行端口读取消息（通过 USB 将 RS-422 插入我的计算机）

问题是我有 2 根这种类型的电缆。

一种是直接转 422 的 USB，另一种是带有 RS-232 到 RS-422 适配器的 USB-RS-232 电缆。

我已经安装了所有的驱动程序。我写了一行：SerialPort 对象在`m_Pod.read(response, 0, 1000);`哪里，在 byte[] 中保存读取的消息。`m_Pod``response`

这条线是在收到数据的情况下，所以我阅读了消息。

第一个连接器工作正常，我在事件发生时阅读了消息。但是，第二个连接器不起作用。该事件不发生。如果我尝试手动阅读消息，我会得到一个随机数 (63)，而不是我应该看到的长消息。

这是第二个适配器的图片：http: [//oi50.tinypic.com/34nh4kz.jpg](http://oi50.tinypic.com/34nh4kz.jpg)

右边是 USB 转 RS-232，左边是 RS-232 转 RS-422。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:23:20.097

您是否尝试过使用 Handshake 属性？ [http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.handshake.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.handshake.aspx) 根据您的适配器使用/提供的信号，您可能需要从软件/硬件握手中进行选择。

# c# - C# 中的数字列表并在不保留存储在前一个循环中的变量的情况下获取最小值和最大值

> ID：15208936
> 
> 赞同：2
> 
> 时间：2013-03-04T18:54:57.160
> 
> 标签：c#, loops, if-statement, numbers

所以我有这个东西可以显示输入的一系列数字中的最小和最大数字，请注意我只是一个初学者，还没有学习数组或排序：

```
namespace ConsoleApplication12
{
    class Program
    {
        static void Main(string[] args)
        {
            double number, maxValue= Double.MinValue , minValue= Double.MaxValue;
            string goOn = "Y";

            Console.WriteLine("Please enter a series of numbers, when you wish to stop entering numbers please enter -99.");
            Console.WriteLine("The smallest and largest values will then be displayed.");
            Console.WriteLine("Remember not to enter -99 unless you want the series to end.");
            do
            {
                while (!double.TryParse(Console.ReadLine(), out number))
                    Console.WriteLine("Please enter whole numbers only");

                while (number != -99)
                {
                    process(ref minValue, ref maxValue, number);

                    while (!double.TryParse(Console.ReadLine(), out number))
                        Console.WriteLine("Please enter whole numbers only");
                }
                Console.WriteLine("The smallest value is {0} and the largest value is {1}.", minValue, maxValue);
                Console.WriteLine("Do you want to enter another series of numbers?");
                Console.WriteLine("If so enter y, if you want to end press any other key");
                goOn = Console.ReadLine();
                if (goOn.ToUpper() == "Y")
                {
                    Console.WriteLine("Please enter your set of numbers.");
                    Console.WriteLine("Remember not to enter -99 unless you want the series to end.");
                }

            } while (goOn.ToUpper() == "Y");
        }
        static void process(ref double minValue, ref double maxValue, double number)
        {
            if (number > maxValue)
            {
                maxValue = number;
            }
            if (number < minValue)
            {
                minValue = number;
            }

        }
    }
} 
```

但是当我输入一系列数字，然后停止，然后制作另一个数字列表时，它会保留上一个列表中的最小值和最大值，如下所示：

[![显示数字 6、7、-7、3、5、100、44 的控制台示例。-7 是最小值，100 是最大值。 然后又做了一个列表，5,55,34，但是-7仍然是最小值，100仍然是最大值](../Images/739252bd8e5338d3c7db84bba2d86ee8.png)](https://i.stack.imgur.com/V9s3T.png)

我也在做我自己版本的其他人的程序，但无法弄清楚他如何通过设置 maxValue = 0 和 minValue = 0 来做到这一点。他确实使用 Int64 而不是 double 并使用三个模块代替1 和另一个 if 语句，如果 minValue 和 maxValue 为 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T19:01:00.700

如果您需要在新序列中搜索 min 和 max，只需清除之前保存的值即可：

```
if (goOn.ToUpper() == "Y")
{
    maxValue= Double.MinValue;
    minValue= Double.MaxValue;
    Console.WriteLine("Please enter your set of numbers.");
    Console.WriteLine("Remember not to enter -99 unless you want the series to end.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:58:50.637

您永远不会在 do-while 循环的每次迭代结束时重置`maxValue`和的值。`minValue`由于您没有这样做，因此您的程序会保留以前使用的数字。

您应该将它们都重置为您在程序开始时在 do-while 循环结束前的最后一行设置的任何值。

# mysql - mysql替换h2标签之间的文本

> ID：15208938
> 
> 赞同：2
> 
> 时间：2013-03-04T18:55:03.583
> 
> 标签：mysql

在 mysql db 中，我有一个名为“Summary”的字段，我们在其中添加了 html 文本，我想在每条记录中搜索 h2 标签删除整个标签和后面的，真实示例如下

我的领域将包含这样的东西

```
 <h2>Summary: S.Res.80  [107th]</h2>
</div>    <div id="main" class="wrapper_std" role="main"> 
```

所以我想要像这样替换后的字段内容

```
<div id="main" class="wrapper_std" role="main"> 
```

h2 标记之间的文本对于所有记录并不相同，但会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:08:02.967

你可以这样做：

```
UPDATE <your table> 
SET <your field> = SUBSTRING_INDEX(<your field>,'</h2>\n</div>    ',-1) 
```

那应该用你在之后的值替换旧值`</div>`

# asp.net-mvc - 您如何决定在单页应用程序中向用户推送多少数据？

> ID：15208941
> 
> 赞同：5
> 
> 时间：2013-03-04T18:55:17.560
> 
> 标签：asp.net-mvc, api, web-applications, asp.net-web-api, single-page-application

假设您有一个使用 Web Api 项目构建的 Recipe Manager 应用程序。您是否以 JSON 格式发送食谱列表及其成分名称？或者您是否发送食谱、成分名称和成分详细信息？确定 SPA 的初始有效负载应该有多大的过程是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T01:50:59.673

这些是在初始页面中向客户端发送多少的决定因素：

1.  将为第一页显示的数据
2.  查找该页面上任何下拉列表的列表数据
3.  需要的数据和呈现规则（可能不显示但被使用）

在将显示食谱列表的食谱页面上，我将获取可显示在列表中的食谱和一些要显示的关键因素（如食谱名称、菜肴和其他关键信息）。足以让用户决定选择什么。然后当用户潜入一个食谱时，然后去获取那个 1 食谱的详细信息。

一般规则是获得用户几乎肯定需要的东西。然后根据他们的要求获取其他数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T18:59:22.683

您确定要发送多少数据的过程完全取决于您希望为用户提供的体验——然而它就是这么简单。如果我的经验要求我很容易地显示所有带有简短描述的食谱，然后允许他们深入研究食谱以获取更多信息，那么我**只会**发送足够的信息来生成显示并进一步导航到实体中.

如果在导航到配方后，它要求您显示成分名称和度量，然后发送该信息和足够的信息以进一步导航到任何单一成分。

正如你所看到的，它一直在继续。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T09:30:42.270

这取决于您的应用程序是否只是支持您的网页的简单 HTTP API，或者您的目标是更类似于平台即服务的东西。采用 SPA 的一个驱动因素是它使浏览器成为另一个客户端，就像 iOS 或 Android 应用程序或第 3 方一样。

如果您想支持多个客户端，那么您可能希望围绕您尝试公开的资源设计您的 API，以便您可以针对该资源使用 GET/POST/PUT 等统一接口。这意味着您更有可能没有以特定于客户端的样式进行编码，并且您的 API 将被广泛的客户端使用。

资源是您希望拥有自己的 URN 的任何东西。

我建议在这种情况下，您可能需要一个食谱书资源，该资源具有指向各个食谱资源的链接，这些资源可能包含该食谱所需的所有信息。如果您对成分所包含的内容有更深入的了解并且他们拥有自己的资源，那么成分只会是一个单独的资源。

在 Huddle，我们使用文档驱动设计方法。也就是说，我们预先为我们的 API 编写文档，以便我们了解我们的 API 的可用性。您可以测量 WTF 中的 API 质量。[http://code.google.com/p/huddle-apis/](http://code.google.com/p/huddle-apis/)

现在，就性能而言，这种逻辑划分可能不是最佳的。您在 API 的可用性和 API 的性能之间处理一个经典的权衡（最终架构就是平衡设计权衡）。通常，在您知道这是一个问题之前不要偏爱性能，因为您将在可用性或可维护性方面为早期优化付出代价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:34:02.293

另一种可能性是实现对 WebAPI 的 OData 查询支持。[http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api)

这样，您的客户可以执行他们自己的查询以仅返回他们需要的数据。

# php - 投票页面重新访问 PHP/AJAX

> ID：15208942
> 
> 赞同：0
> 
> 时间：2013-03-04T18:55:18.583
> 
> 标签：php, jquery, ajax, post

所以，我以为我已经弄清楚了，但是，不。所以我可以在这里使用任何帮助。

我有一个 html 页面。在那个页面上，我有三个链接。每个链接代表不同的数据。当用户单击这些链接时，它将发布到 PHP 页面并将该数据传送到 PHP 页面。然后 PHP 页面将更新数据库。然后，PHP 页面会将更新后的结果返回给 HTML 页面。

我知道这需要 JQuery、PHP 和 Ajax。

这是我现在在董事会的帮助下得到的：

网页

```
<script src="_js/jquery-1.7.2.min.js"></script>     <!-- Linking jQuery -->
<script>                        

$(document).ready(function () {
$('.answer').click ( function (e) {
    var color = $(this).attr("data-color");
    $.ajax({
        url: 'mm.php',
        type: 'POST',
        data: '{ color: "'+color+'" }',
        success: function (res) {
            ...
        },
        error: function (jqXHR) {
            ...
        }
    })
})
                  }
</script>

<title>M&M Poll</title>

</head>

<body>
<h1>VOTE FOR YOUR FAVORITE COLOR M&M</h1>
<h2>Click the M&M to vote</h2>

<div id="wrapper">

<div id="red" data-color="red" class="answer">
<a href="#"><img src="images/red.jpg" width="100%" /></a>
</div>

<div id="blue" data-color="blue" class="answer">
<a href="#"><img src="images/blue.jpg" width="100%" /></a>
</div>

<div id="green" data-color="green" class="answer">
<a href="#"><img src="images/green.jpg" width="100%" /></a>
</div>

<div id=rvotes>
TEST
</div>

<div id=bvotes>
TEST
</div>

<div id=gvotes>
TEST
</div> 
```

PHP 页面

```
<?php

function showVotes()

{
 $sql = "SELECT * FROM mms";
 $result = mysql_query($sql) or die(mysql_error());
 $showresult = mysql_query("SELECT * from mms") or die("Invalid query: " . mysql_error());
   while ($row = mysql_fetch_array($showresult))
    {
     echo ("<br> M&M = ". $row["color"] . " has " . $row["votes"] . "votes <br>");
    }
}

function addVote() 

{
 $sql= "UPDATE mms SET votes = votes+1 WHERE color = 'red'";
 $result= mysql_query($sql) or die(mysql_error());
 return $result;
}

?> 
```

我知道我的数据库有效。我只需要连接 HTML/AJAX/PHP

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:22:27.630

好吧，你就快到了，只是一步一步地浏览它——不一定要为你输入代码，这样你就可以自己弄清楚，你会学到更多。

在您的 jQuery 中，您输入一个类型：'post'，这意味着正在调用的 php 文件将包含 $_POST 中的数据。

如果您不确定 $_POST 数组中的内容 - 将其打印出来。

例如

```
print_r($_POST); 
```

您可能会看到正在输出的数组包含“颜色”

接下来 - 您需要将其插入到您的函数中。理想情况下，您的函数在 addVote() 中接受参数 - 因为这是它需要输入的内容。这还将教您清理从长远来看进入您的函数的信息的方法，这样您就不会面临 sql 注入的风险。

所以一个又快又脏的是：

```
// you already have this function - add a parameter
addVote ( $color ) { // blah }

addVote ( $_POST['color'] ); 
```

现在在您的 addVote() 函数中，您并不是真正的特定颜色，因为一切都是红色的，因此您需要修复它。

```
$sql= "UPDATE mms SET votes = votes+1 WHERE color = '$color'"; 
```

旁注：您还使用了 mysql_query() ，它已经过时了，如果您继续使用它，这里的人会鞭打您 - 查找[MySql PDO](http://php.net/manual/en/ref.pdo-mysql.php)或 mysqli （取决于您问谁）。但这是一个不同的线程。

通过这些步骤，你应该看到表格已经更新了，接下来就是输出结果了，也就是你在你的另一个函数中调用的地方——showVotes();

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:26:10.780

**编辑：**新代码，经过测试和工作

HTML：

```
 <html>
    <head>
    <title>M&M Poll</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

</head>

<body>
    <h1>VOTE FOR YOUR FAVORITE COLOR M&M</h1>
    <h2>Click the M&M to vote</h2>

    <div id="wrapper">

    <div id="red" data-color="red" class="answer">
    <a href="#">Red</a>
    </div>

    <div id="blue" data-color="blue" class="answer">
    <a href="#">blue</a>
    </div>

    <div id="green" data-color="green" class="answer">
    <a href="#">green</a>
    </div>

    <div id="rvotes">
    TEST
    </div>

    <div id="bvotes">
    TEST
    </div>

    <div id="gvotes">
    TEST
    </div>
    </div>
    <script>                        
    $(document).ready(function ($) {
        $('.answer').click ( function (e) {
            e.preventDefault();
            var color = $(this).data("color");
            $.post('mm.php', { color: color}, function(data) {
                console.log(data);
                var obj = $.parseJSON(data);
                $('#rvotes').html(obj.red);
                $('#bvotes').html(obj.blue);
                $('#gvotes').html(obj.green);
            });
        });
    });
    </script>
</body>
</html> 
```

PHP：

```
<?php

$con=mysql_connect("localhost","root","");
mysql_select_db('mm_db') or die('Could not select database');

// Check connection
if (mysqli_connect_errno($con))
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

function showVotes()

{
 $sql = "SELECT * FROM mms";
 $result = mysql_query($sql) or die(mysql_error());
 $showresult = mysql_query("SELECT * from mms") or die("Invalid query: " . mysql_error());
   while ($row = mysql_fetch_array($showresult))
    {
     echo ("<br> M&M = ". $row["color"] . " has " . $row["votes"] . "votes <br>");
    }
}

function jsonVotes()

{
 $sql = "SELECT * FROM mms";
 $result = mysql_query($sql) or die(mysql_error());
 $showresult = mysql_query("SELECT * from mms") or die("Invalid query: " . mysql_error());
 $color_votes = array();
 while ($row = mysql_fetch_array($showresult))
  {
    $color_votes[$row['color']] = $row['votes'];
  }
  return $color_votes;
}

function addVote($color) 
{
  //If the color is one of the 3 we expect...
  if($color == "red" || $color == "blue" || $color == "green") {
    //NEVER put the variable in the query string, especially in production. Always use prepared statements -> http://php.net/manual/en/pdo.prepared-statements.php
    $sql= "UPDATE mms SET votes = votes+1 WHERE color = '$color'";
    $result = mysql_query($sql) or die(mysql_error());
    return $result;
  } else {
    die();
  }
}

//If this is an AJAX request
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
  //Do some sanitization since we're dealing with mysql instead of mysqli or PDO -> http://php.net/manual/en/book.pdo.php
  $color = htmlspecialchars(trim(strtolower($_POST['color'])));
  //If the vote was added successfully
  if(addVote($color)) {
    echo json_encode(jsonVotes());
  }
}
?> 
```

一些注意事项：查看 PDO。使用`mysql_*`是不好的做法和贬值，但我想尽可能地贴近你的代码，这样你就可以更容易地理解它。还要查看`$.post`而不是`$.ajax`. 大多数人喜欢它，因为它打字更短，但这只是个人喜好。

# php - 在 PHP 中设置第三方 cookie

> ID：15208946
> 
> 赞同：0
> 
> 时间：2013-03-04T18:55:45.500
> 
> 标签：php, iframe, cookies

我有一个使用 iframe 从电力公司网站加载断电地图的网站。电力公司的站点使用 cookie 来记住用户的状态以显示正确的地图。我想让我自己的站点将此带有地理位置的 cookie 发送到 iframe 中的外部站点，供尚未设置其位置的用户使用。这可能吗？前任。

`setcookie("GeographicLocation","%2FGeographic%20Location%2FColorado",$time,"/","www.powercompany.com");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:58:40.413

不可以。您不能代表第三方网站设置 cookie，无论您是否将它们嵌入到 iframe 中。如果浏览器允许这样做，那将是一个严重的安全漏洞。

# coldfusion - ColdFusion 多个实例的相同逻辑路径

> ID：15208952
> 
> 赞同：0
> 
> 时间：2013-03-04T18:56:21.793
> 
> 标签：coldfusion, coldfusion-9

我正在运行两个 CF9 实例。两个实例都有一个称为`SharedCode`映射的逻辑路径`Mappings`，该路径指向两个不同的目录。但是，当我从第二个实例引用映射时，它指向在第一个（默认）实例中映射的目录。

映射如下：

```
Default instance: SharedCode --> D:\Websites\SharedCode
Second instance: SharedCode --> D:\Websites\CF2\SharedCode 
```

我这样引用映射的代码：`SharedCode\cfc\foo.cfm`. 如果我`expandPath('\SharedCode'\)`在第二种情况下运行，它会输出`D:\Websites\SharedCode\`

经过一番调查，ColdFusion 似乎不允许在不同的实例中使用相同的逻辑路径进行映射。这是真的吗，是否有不涉及使每个逻辑路径唯一的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T19:42:08.043

听起来您的第二个实例中运行的代码实际上并未连接到第二个实例。您可以通过转储每个实例中的服务器范围来检查它们是否引用相同的根目录。如果它们相同，您将需要使用 Web 服务器配置工具来配置您的网站以使用正确的 CF 实例。

# android - Android sqlite 行数总是为零？

> ID：15208954
> 
> 赞同：0
> 
> 时间：2013-03-04T18:56:29.217
> 
> 标签：android, sqlite

我使用 GUI 创建了一个包含 1650 条记录的数据库。

我正在尝试查询这个数据库，但它总是什么都不返回。我试过写一个简单的`getrowcount()`方法来看看我是否得到任何东西，但它总是返回零。如果有人可以帮助指出发生了什么，我必须在这里遗漏一些明显的东西。

在我的主要`app.java`：

```
 db = new DbHandler(this);
    String sIcao1 = "ROW COUNT = " + String.valueOf(db.getRowCount()); 
```

在我的`dbhandler.java`：

```
package com.jammo.mywidget4;

<snip - standard includes>

public class DbHandler extends SQLiteOpenHelper {

    private static SQLiteDatabase db;
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME = "airports";
    private static final String TABLE_AIRPORTS = "airports";

    public DbHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

        db = this.getWritableDatabase();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db = this.getWritableDatabase();
    }

    int getRowCount() {

        int nCount = -1;
        //SQLiteDatabase db = this.getReadableDatabase();
        Cursor cur = db.rawQuery("SELECT * FROM airports", null);
        nCount = cur.getCount();
        if (cur != null) {
            //cur.moveToFirst();                      
            //nCount = cur.getInt(0);
            //if (cur.getInt (0) == 0) {              

            //}
        }

        return nCount;
    }

} 
```

在 GUI（SQLite DB 浏览器）中，我正在做一个简单的

```
select * from airports 
```

...而且我正在取回全部行数。当我调试 Java 时，游标不返回任何内容。

此外，由 GUI 创建的数据库位于`myapp/assets/airports.db`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:01:54.880

我认为您需要`.db`在 DATABASE_NAME 中包含 。

尝试改变这个：

```
private static final String DATABASE_NAME = "airports"; 
```

对此：

```
private static final String DATABASE_NAME = "airports.db"; 
```

**编辑：**

实际上，我认为即使进行了这种更改，它也不适合您。SQLiteOpenHelper 期望您的 db 文件位于其中`/data/data/your.package/databases/`所以我认为如果您希望它与未修改的 SQLiteOpenHelper 一起使用，您需要将其从资产复制到那里。

请参阅此处以了解如何将其复制过来：[Android: Accessing assets folder sqlite database file with .sqlite extension](https://stackoverflow.com/questions/2605555/android-accessing-assets-folder-sqlite-database-file-with-sqlite-extension)

# c++ - OpenGL在纹理上使用着色器

> ID：15208957
> 
> 赞同：1
> 
> 时间：2013-03-04T18:56:30.523
> 
> 标签：c++, opengl, shader, textures

我有两张图片，并在此处的说明的帮助下： [http ://en.wikibooks.org/wiki/OpenGL_Programming/Intermediate/Textures](http://en.wikibooks.org/wiki/OpenGL_Programming/Intermediate/Textures)

我能够将它们单独存储到两个单独的纹理中，然后将它们上传到视频内存中：

```
 gluBuild2DMipmaps(GL_TEXTURE_2D, 4, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data); 
```

现在，我将如何使用着色器访问这些纹理以将这两个纹理相乘？

例如，我发现了这个例子，关于使用着色器的乘法： [http ://www.opengl.org/wiki/Texture_Combiners](http://www.opengl.org/wiki/Texture_Combiners)

```
//Vertex shader
 #version 110
 attribute vec4 InVertex;
 attribute vec2 InTexCoord0;
 attribute vec2 InTexCoord1;
 uniform mat4 ProjectionModelviewMatrix;
 varying vec2 TexCoord0;
 varying vec2 TexCoord1;    //Or just use TexCoord0
 //------------------------
 void main()
 {
   gl_Position = ProjectionModelviewMatrix * InVertex;
   TexCoord0 = InTexCoord0;
   TexCoord1 = InTexCoord1;
 }
 //------------------------
 //Fragment shader
 #version 110
 uniform sampler2D Texture0;
 uniform sampler2D Texture1;
 //------------------------
 varying vec2 TexCoord0;
 varying vec2 TexCoord1;    //Or just use TexCoord0
 //------------------------
 void main()
 {
    vec4 texel = texture2D(Texture0, TexCoord0);
    texel *= texture2D(Texture1, TexCoord1);
    gl_FragColor = texel;
 } 
```

但是我将如何制作以顶点形式上传的纹理，以便我可以使用这个片段着色器来完成这种乘法。

我所做的只是生成 gluBuild2DMipmaps，但现在我不知道如何将顶点/片段着色器应用于我的纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T08:49:07.820

假设您有一个四边形，其中前三个值是顶点坐标。最后两个是你的 TexCoord。

```
 -1.0f,-1.0f, 1.0f,   0.0f, 0.0f,
    1.0f,-1.0f, 1.0f,   1.0f, 0.0f,
   -1.0f, 1.0f, 1.0f,   0.0f, 1.0f,
    1.0f,-1.0f, 1.0f,   1.0f, 0.0f,
    1.0f, 1.0f, 1.0f,   1.0f, 1.0f,
   -1.0f, 1.0f, 1.0f,   0.0f, 1.0f, 
```

你必须提交你的硬件不同的制服和属性：

首先是（在 MVP 等之后）顶点和文本坐标：

```
glEnableVertexAttribArray(VAA_Normal);
glVertexAttribPointer(VAA_Normal, 3, GL_FLOAT, GL_TRUE,  5*sizeof(GLfloat), (const GLvoid*)(5 * sizeof(GLfloat)));

glEnableVertexAttribArray(VAA_TexCoord);
glVertexAttribPointer(VAA_TexCoord, 2, GL_FLOAT, GL_TRUE,  5*sizeof(GLfloat), (const GLvoid*)(3 * sizeof(GLfloat))); 
```

(VAA_Normal = glGetAttribLocation(aProgram, attribName);)

最后但并非最不重要的重要纹理：

```
 glActiveTexture(GL_TEXTURE0);
   glBindTexture(GL_TEXTURE_2D, aTexture); 
```

不要忘记：这取决于你如何组合不同的纹理

编辑：抱歉忘记了

```
 glUniform1i(glGetUniformLocation(aProgramID, "TEXTURE0"), 0); 
```

# javascript - 谷歌地图：为每个多边形添加点击监听器

> ID：15208965
> 
> 赞同：19
> 
> 时间：2013-03-04T18:56:59.113
> 
> 标签：javascript, google-maps, asp.net-mvc-4, polygon

我正在开发一个网络应用程序。我有一个谷歌地图，我从一个数组中添加多边形。我遍历该数组并将多边形添加到地图中。我还需要向多边形单击添加事件侦听器并提醒多边形的位置

这就是我正在做的

```
map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);
//Loop on the polygonArray
for (var i = 0; i < polygonArray.length; i++) {
    //Add the polygon
    var p = new google.maps.Polygon({
        paths: polygonArray[i],
        strokeWeight: 0,
        fillColor: '#FF0000',
        fillOpacity: 0.6,
        indexID: i
    });
    p.setMap(map);

    //Add the click listener
    google.maps.event.addListener(p, 'click', function (event) {
        //alert the index of the polygon
        alert(p.indexID);
    });
} 
```

**问题**

多边形都正确绘制。但是问题是，当我尝试单击多边形时，它总是显示最后一个索引。就像它只是单击添加的最后一个多边形。我认为当我添加一个新的监听器时，它会覆盖旧的监听器。如何为添加的每个多边形添加一个侦听器以提醒正确的索引？

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-04T19:16:36.033

这是正常的行为。我能想到两种解决方案：

1）我相信你可以从上下文中找到多边形（我没有测试它）：

```
google.maps.event.addListener(polygon, 'click', function (event) {
  alert(this.indexID);
}); 
```

2）你也可以使用一些[闭包](https://stackoverflow.com/a/111111/1134411)：

```
var addListenersOnPolygon = function(polygon) {
  google.maps.event.addListener(polygon, 'click', function (event) {
    alert(polygon.indexID);
  });  
}

map = new google.maps.Map(document.getElementById('map_canvas'),
    mapOptions);
//Loop on the polygonArray
for (var i = 0; i < polygonArray.length; i++) {
    //Add the polygon
    var p = new google.maps.Polygon({
        paths: polygonArray[i],
        strokeWeight: 0,
        fillColor: '#FF0000',
        fillOpacity: 0.6,
        indexID: i
    });
    p.setMap(map);
    addListenersOnPolygon(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T14:16:51.270

在 for 循环内移动代码块。

```
//Add the click listener
    google.maps.event.addListener(p, 'click', function (event) {
        //alert the index of the polygon
        alert(p.indexID);
    }); 
```

或者

您将其添加到 for 循环中，

```
p.addListener('click', clickSelection); 
```

并这样做

```
function clickSelection(){
alert("Clicked");
} 
```

# php - 如何检查某个对象 ID 是页面还是帖子（从页面外部/帖子本身）

> ID：15208969
> 
> 赞同：0
> 
> 时间：2013-03-04T18:57:09.747
> 
> 标签：php, wordpress

我有一个导航菜单循环，它使用一个自定义的walker，它输出：

```
<ul>
<li id="menu-item-2" class="menu-item-object-category">stuff</li>
<li id="menu-item-3" class="menu-item-object-category">stuff</li>
...
etc
And if a page is in the menu, it outputs:
<li id="menu-item-4" class="menu-item-object-page">stuff</li>
</ul> 
```

显然，wordpress 在某处检测到菜单中的条目是类别或页面并分配适当的类。如何在我的助行器中运行相同的检查？

我只是想做一个

```
If ($item->object_id = page) { // special code} 
```

我尝试了 is_page()，但意识到这是一个布尔函数，用于检测您所在的当前页面是否为页面。

是否有任何简单的方法可以检查步行器中的每个输出以查找页面？

这是我的沃克代码：

```
class Custom_Walker extends Walker_Nav_Menu
{ 
    function start_el(&$output, $item, $depth, $args) {
        global $wp_query;

        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
        $class_names = ' class="' . esc_attr( $class_names ) . '"';

        $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

        $item_output = $args->before;

                $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;

        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );

    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:12:14.813

您可以使用[get_post](http://codex.wordpress.org/Function_Reference/get_post)函数并检查类型，例如：

```
<?php

$current_post = get_post($current_post_id);
if ($current_post->type == 'post') {
  //Do the stuff with post
}
elseif ($current_post->type == 'page') {
  //Do the stuff with page
}
else {
  //Do the stuff with other post types
} 
```

# java - 使用 Java API 显式提交或回滚 MQ 工作单元

> ID：15208973
> 
> 赞同：2
> 
> 时间：2013-03-04T18:57:27.317
> 
> 标签：java, ibm-mq

我正在开发一个独立的 Java 应用程序，它从一个 MQ 队列获取多条消息，处理消息中包含的数据，然后将一条新消息放入另一个 MQ 队列。要求之一是 GET 和 PUT 操作必须在同一个工作单元内，我可以通过指定`MQGMO_SYNCPOINT`和`MQGMO_SYNCPOINT`获取/放置消息选项来做到这一点。

我不明白如何使用 Java MQ API 执行 MQCMIT 和 MQBACK 操作以显式提交或回滚 MQ 工作单元。

我在 IBM MQ InfoCenter 网站和 JavaDoc 上进行了搜索，但在用于提交和回滚工作单元的 API 上找不到任何内容。

我使用的 WebSphere MQ 版本是 7.5，并且我正在使用绑定模式连接到队列管理器。

任何人都可以提供一些示例代码来展示如何使用 Java MQ API 显式提交或回滚 MQ 工作单元，或者向我指出相应的 JavaDoc 页面的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T19:01:25.033

基本流程是，当您在事务中发送消息时，它会将消息保存在缓冲区中，直到调用提交或回滚：如果执行提交，则发送消息，否则将丢弃它们。

下面是一个来自 Novell 的使用 JMS API 的示例，如果您使用的是 JMS API，它应该与 WebSphere MQ 相同：

[http://www.novell.com/documentation/extend52/Docs/help/MP/jms/tutorial/txSession-1.htm](http://www.novell.com/documentation/extend52/Docs/help/MP/jms/tutorial/txSession-1.htm)

**更新：** 下面是 StackOverflow 上的另一个问题，其中包含使用 Websphere MQ API 提交/回滚的代码：

[java websphere MQ](https://stackoverflow.com/questions/14426272/java-websphere-mq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T19:11:49.787

使用中的[`commit()`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQQueueManager.html) 方法`MQQueueManager`。

# mediawiki-api - 如何从特定页面搜索 mediawiki api 中的单词？

> ID：15208983
> 
> 赞同：0
> 
> 时间：2013-03-04T18:58:12.793
> 
> 标签：mediawiki-api

如何从特定页面开始搜索 mediawiki api 中的一个或多个单词？

我试过 api.php?action=query&format=xml&titles=Feature_doc&list=search&srsearch=manage

但它从所有页面而不是“Feature doc”页面开始搜索。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:00:48.253

I don't think you can do that easily. You would need to get the text of all pages linked from your page using a query like:

api.php?action=query&titles=Feature_doc&generator=links&prop=revisions&rvprop=content

And then manually search the contents for the string.

# c# - FlipView.SelectedIndex 鼠标模式与基本触摸模式

> ID：15208984
> 
> 赞同：2
> 
> 时间：2013-03-04T18:58:22.727
> 
> 标签：c#, .net, xaml, windows-8

我的页面上有一个数据绑定`FlipView`，效果很好。我的页面上有 2 个按钮，我想用它们来`FlipView`向前和向后导航。当我`Mouse Mode`在模拟器中使用或在本地机器模式下实际使用鼠标时，这些按钮会起作用。

但是当我使用“基本触摸模式”或在实际触摸屏上使用我的应用程序并点击按钮时，FlipView 会导航到下一个视图，但随后会闪烁/翻转回来。

这是我的翻转视图：

```
<FlipView x:Name="Flipper" ItemsSource="{Binding Path=Views}">...</FlipView> 
```

我的按钮：

```
<Button x:Name="ForwardButton" IsEnabled="{Binding CanGoForward}" Style="{StaticResource ForwardButtonStyle}" Tapped="ForwardButton_OnTapped" /> 
```

我的活动：

```
private void ForwardButton_OnTapped(object sender, TappedRoutedEventArgs e)
{
            if (Flipper.SelectedIndex >= Flipper.Items.Count - 1)
            {
                Flipper.SelectedIndex = 0;
            }
            else
            {
                Flipper.SelectedIndex++;
            }

            e.Handled = true;
 } 
```

**更新：**

添加`OnSelectionChanged`到 FlipView 中，我看到它在 中命中两次`Basic touch mode`，但`Mouse mode`仅在一次中，再次`Mouse mode`按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:34:21.937

是的，所以我是这样实现的：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    ViewModel ViewModel { get { return this.DataContext as ViewModel; } }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        this.ViewModel.MovePrevious();
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        this.ViewModel.MoveNext();
    }
}

public class ViewModel : INotifyPropertyChanged
{
    public ViewModel() { SelectedThing = ThingList.First(); }

    List<int> m_ThingList = Enumerable.Range(1, 50).ToList();
    public List<int> ThingList { get { return m_ThingList; } set { SetProperty(ref m_ThingList, value); } }

    int m_SelectedThing = default(int);
    public int SelectedThing { get { return m_SelectedThing; } set { SetProperty(ref m_SelectedThing, value); } }

    internal void MovePrevious()
    {
        var _CurrentIndex = ThingList.IndexOf(this.SelectedThing);
        try { SelectedThing = ThingList[--_CurrentIndex]; }
        catch { SelectedThing = ThingList.First(); }
    }

    internal void MoveNext()
    {
        var _CurrentIndex = ThingList.IndexOf(this.SelectedThing);
        try { SelectedThing = ThingList[++_CurrentIndex]; }
        catch { SelectedThing = ThingList.Last(); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    void SetProperty<T>(ref T storage, T value, [System.Runtime.CompilerServices.CallerMemberName] String propertyName = null)
    {
        if (!object.Equals(storage, value))
        {
            storage = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

和

```
<Page.DataContext>
    <local:ViewModel />
</Page.DataContext>

<Page.BottomAppBar>
    <AppBar>
        <Grid>
            <Button HorizontalAlignment="Left" Click="Button_Click_1">Previous</Button>
            <Button HorizontalAlignment="Right" Click="Button_Click_2">Next</Button>
        </Grid>
    </AppBar>
</Page.BottomAppBar>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <FlipView x:Name="MyFlip"
                ItemsSource="{Binding ThingList}"
                SelectedItem="{Binding SelectedThing,
                                        Mode=TwoWay}" />
</Grid> 
```

嗯，它工作正常。你能仔细检查一下吗？或者提供更多信息？否则，也许使用我的指导更新您的实施可以为您解决这个问题。但愿如此。

实际上，我会使用 DelegateCommand 来处理按钮。但是我不想用太多的样板代码来过度使用这个例子。如果你想看看我会做什么，你可以看这里：[http ://blog.jerrynixon.com/2012/08/most-people-are-doing-mvvm-all-wrong.html](http://blog.jerrynixon.com/2012/08/most-people-are-doing-mvvm-all-wrong.html)

# file - Clojure 中的原子文件替换

> ID：15208986
> 
> 赞同：3
> 
> 时间：2013-03-04T18:58:29.307
> 
> 标签：file, clojure, atomic

我有一个写入更新磁盘文件的应用程序，但我想尽可能确保文件的先前版本不会损坏。

当然，更新文件最直接的方法是简单地编写：

```
(spit "myfile.txt" mystring) 
```

但是，如果 PC（或 java 进程）在写入过程中死机，则文件损坏的可能性很小。

一个更好的解决方案可能是这样写：

```
(do (spit "tempfile" mystring)
    (.rename (file "tempfile") "myfile.txt")
    (delete-file "tempfile")) 
```

这使用了 java 文件重命名功能，我认为在大多数情况下，在单个存储设备上执行该功能时通常是原子的。

对 Clojure 文件 IO 有更深入了解的任何 Clojurians 是否对这是否是最佳方法有任何建议，或者是否有更好的方法可以在更新磁盘文件时最大限度地降低文件损坏的风险？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:44:55.480

这不是 Clojure 特有的；temp-rename-delete 方案不*保证*在 POSIX 标准下进行原子替换。这是由于写入重新排序的可能性 - 重命名可能会在临时写入之前到达物理磁盘，因此当在此时间窗口内发生电源故障时，会发生数据丢失。这不是纯粹理论上的可能性：

[http://en.wikipedia.org/wiki/Ext4#Delayed_allocation_and_potential_data_loss](http://en.wikipedia.org/wiki/Ext4#Delayed_allocation_and_potential_data_loss)

编写临时文件后，您需要一个 fsync() 。[这个问题](https://stackoverflow.com/questions/730521/really-force-file-sync-flush-in-java)讨论了从 Java 调用 fsync() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:34:04.907

你给出的例子在我看来是完全地道和正确的。如果之前的运行失败，我会先对 tempfile 进行删除并添加一些错误检测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:10:54.627

根据您的评论反馈，我建议您避免尝试推出自己的文件支持数据库，基于以下几点观察：

*   文件系统中数据结构的持久存储在崩溃的情况下保持一致是一个难以解决的问题。很多真正聪明的人都花了很多时间思考这个问题。
*   小型数据库往往会成长为大型数据库并随着时间的推移收集额外的功能。如果你自己动手，你会发现自己在项目过程中重新发明了轮子。

如果您真的对在发生崩溃时保持应用程序数据的一致性感兴趣，那么我建议您考虑嵌入许多可用的免费数据库之一 - 您可以从 Berkely DB、HyperSQL 开始，或者对于具有更多 Clo​​jure 风味的产品，Datomic。

# ios - 自定义 UISlider - iOS5 中的问题

> ID：15208988
> 
> 赞同：0
> 
> 时间：2013-03-04T18:58:33.383
> 
> 标签：ios, objective-c, ios5, ios6, uislider

UISlider 在 iOS6 中看起来像我想要的那样，但在 iOS5 中却不是。

我想制作自定义 UISlider，为此我制作了 UISlder 的子类，我在其中放入：

```
 [self setThumbImage:[[UIImage alloc] init] forState:UIControlStateNormal];
   [self setMinimumTrackImage:[[UIImage imageNamed:@"fast_dots"] resizableImageWithCapInsets:UIEdgeInsetsZero] forState:UIControlStateNormal];
   [self setMaximumTrackImage:[[UIImage imageNamed:@"fast_dots_white"] resizableImageWithCapInsets:UIEdgeInsetsZero] forState:UIControlStateNormal]; 
```

`[UIImage imageNamed:@"fast_dots"]`是：![在此处输入图像描述](../Images/eca7a035fb7066a3f64e5bed3bbca867.png)

`[UIImage imageNamed:@"fast_dots_white"]`是：![在此处输入图像描述](../Images/e9185a52c9ce97f83015b9771650b890.png)

这样我的 UISlider 在 iOS6 中看起来：![在此处输入图像描述](../Images/24fed803c550d8b5805ed204be335306.png)

这样我的 UISlider 在 iOS5 中看起来：![在此处输入图像描述](../Images/71eb6fc0bb0d71d939a1f8c5f29c1f64.png)

我已经尝试了 resizableImageWithCapInsets 的所有变体，但没有任何帮助。

# ios - 添加 UITableViewController.view 作为子视图表现不佳

> ID：15208991
> 
> 赞同：0
> 
> 时间：2013-03-04T18:58:34.597
> 
> 标签：ios, uiview, uitableview

我正在尝试将表格视图动画化到我的视图中，但是我无法让 UITableView 中的数据出现（下面的 NAConversationViewController 是 UITableViewController 的子类）：

```
Post *post = [self.fetchedResultsController objectAtIndexPath:indexPath];

UIView *takeover = [[UIView alloc] initWithFrame:self.view.frame];
takeover.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.75];

NAConversationViewController *vc = [[NAConversationViewController alloc] initWithNibName:@"NAConversationViewController" bundle:nil];
vc.managedObjectContext = self.managedObjectContext;
vc.post = post;
vc.view.frame = CGRectMake(0, self.view.frame.size.height, 320, 320);

[takeover addSubview:vc.view];
[self.view addSubview:takeover];

[UIView animateWithDuration:0.2
                 animations: ^{

                     vc.view.frame = CGRectMake(0, 100, 320, 320);
                 }
                 completion:^(BOOL finished) {
                     if (finished) {
                         [vc.view setNeedsDisplay];
                     }
                 }]; 
```

我可以让表格数据显示的唯一方法是 [vc.view setNeedsDisplay]; 但是一旦我在表格视图上滚动，表格单元格就会立即消失。

我是否错误地调用了 UITableView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:11:53.307

如果您使用的是 ARC，则可能正在释放 NAConversationViewController 实例，并且它也是视图...尝试创建一个实例变量，这样视图控制器就不会被释放。

# javascript - != null 和 !== null 在Javascript中的区别

> ID：15208992
> 
> 赞同：2
> 
> 时间：2013-03-04T18:58:36.470
> 
> 标签：javascript

在这里分裂头发，但我的编辑抱怨我应该使用`a !== null`而不是`a != null`在 Javascript`if`语句中。有什么区别？

**更新**

这个问题已作为重复问题关闭，但其他应该回答我的问题的问题没有回答......检查他们的答案！这里有一个微妙之处->`null`

# c - pthread 将值返回到数组

> ID：15208997
> 
> 赞同：4
> 
> 时间：2013-03-04T18:58:49.077
> 
> 标签：c, pthreads, pthread-join

我目前正在开发一个使用 pthreads 的项目。到目前为止，该项目启动用户指定数量的线程并在每个线程上执行一些工作，然后关闭。每个线程都存储在动态分配的内存数组中。我这样做使用：

`threads = malloc(number_of_threads * sizeof(pthread_t));`

然后我在 for 循环中创建每个线程：

```
pthread_create(&(threads[i]), NULL, client_pipe_run, (void *) &param[i]); 
```

接下来我需要做的是存储这些线程的返回值。我的理解是我需要传递 pthread_join 一个我想要存储返回值的指针的地址。这是我有点困惑的地方。我对这一点的指针很好，然后我的大脑有点崩溃了哈哈。这是我关于如何实现这一点的想法，但我不相信这是正确的：

```
int *return_vals = malloc(sizeof(int) * number_of_threads);
for(i = 0; i< number_of_threads; i++)
{
pthread_join(&(threads[i]),(void *) &(return_vals[i]));
} 
```

然后为了得到返回值，我会做类似的事情：

```
int val = *(return_val[0]); 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T19:13:47.007

请注意，您正在为线程分配内存，如下所示：

```
threads = malloc(number_of_thread * sizeof(pthread_t)); 
```

但是对于返回值，您可以：

```
int *return_vals = malloc(sizeof(int *)); 
```

即这里也应该计算线程数：

```
int *return_vals = malloc(number_of_thread * sizeof(int)); 
```

然后您可以将返回值转换为`void*`：

```
void *foo(void *arg) {
    int i = 7;
    return (void*)i;
}

int main(void) {
    int i = 0;
    int thread_count = 3;
    pthread_t* threads = malloc(thread_count * sizeof(pthread_t));
    int *return_vals = malloc(thread_count * sizeof(int));

    // create threads:
    for(i = 0; i < thread_count; ++i)
        pthread_create(&threads[i], NULL, &foo, NULL);

    // wait untill they finish their work:
    for(i = 0; i < thread_count; ++i)
        pthread_join(threads[i], (void**) &return_vals[i]);

    // print results:
    for(i = 0; i < thread_count; ++i)
        printf("Thread %d returned: %d\n", i, return_vals[i]);

    // clean up:
    free(return_vals);
    free(threads);

    return 0;
} 
```

或者您可以确保您的代码不会对您返回的类型的大小小于或等于做出任何假设，`sizeof(void*)`并在线程内为返回值动态分配内存：

```
void *foo(void *arg) {
    int* ret = malloc(sizeof(int));
    *ret = 7;
    return ret;
}

int main(void) {
    int i = 0;
    int thread_count = 3;
    pthread_t* threads = malloc(thread_count * sizeof(pthread_t));

    // array of pointers to return values of type int:
    int **return_vals = calloc(thread_count, sizeof(int*));

    // create threads:
    for(i = 0; i < thread_count; ++i)
        pthread_create(&threads[i], NULL, &foo, NULL);

    // wait untill they finish their work:
    for(i = 0; i < thread_count; ++i)
        pthread_join(threads[i], (void**) &return_vals[i]);

    // print results:
    for(i = 0; i < thread_count; ++i)
        printf("Thread %d returned: %d\n", i, *return_vals[i]);

    // clean up:
    for(i = 0; i < thread_count; ++i)
        free(return_vals[i]);
    free(return_vals);
    free(threads);

    return 0;
} 
```

但是，如果您选择了后者，请注意最终可能导致的内存泄漏。