# StackOverflow 问答 13847000-13847999

# javascript - 检测 IE 7 和 8 问题

> ID：13847000
> 
> 赞同：0
> 
> 时间：2012-12-12T19:18:36.087
> 
> 标签：javascript, internet-explorer, internet-explorer-8, internet-explorer-7, version

问题很简单：我需要 IE 的版本。如果是 7 或更早，我想重定向。下面的代码在所有情况下都有效，除了 IE 8 访问页面时。如果 IE 8 不是从 7 升级的，它将起作用。但是，如果它已升级，则返回的值仍然是 7，即使关于 Internet Explorer 帮助页面显示版本为 8.0.etc。我被困住了。有任何想法吗？

```
var BrowserDetect = {
init: function () {
    this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
    this.version = this.searchVersion(navigator.userAgent)
        || this.searchVersion(navigator.appVersion)
        || "an unknown version";
    this.OS = this.searchString(this.dataOS) || "an unknown OS";
},
searchString: function (data) {
    for (var i = 0; i < data.length; i++) {
        var dataString = data[i].string;
        var dataProp = data[i].prop;
        this.versionSearchString = data[i].versionSearch || data[i].identity;
        if (dataString) {
            if (dataString.indexOf(data[i].subString) != -1)
                return data[i].identity;
        }
        else if (dataProp)
            return data[i].identity;
    }
},
searchVersion: function (dataString) {
    var index = dataString.indexOf(this.versionSearchString);
    if (index == -1) return;
    return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
},
dataBrowser: [
    {
        string: navigator.userAgent,
        subString: "Chrome",
        identity: "Chrome"
    },
    { string: navigator.userAgent,
        subString: "OmniWeb",
        versionSearch: "OmniWeb/",
        identity: "OmniWeb"
    },
    {
        string: navigator.vendor,
        subString: "Apple",
        identity: "Safari",
        versionSearch: "Version"
    },
    {
        prop: window.opera,
        identity: "Opera"
    },
    {
        string: navigator.vendor,
        subString: "iCab",
        identity: "iCab"
    },
    {
        string: navigator.vendor,
        subString: "KDE",
        identity: "Konqueror"
    },
    {
        string: navigator.userAgent,
        subString: "Firefox",
        identity: "Firefox"
    },
    {
        string: navigator.vendor,
        subString: "Camino",
        identity: "Camino"
    },
    {       // for newer Netscapes (6+)
        string: navigator.userAgent,
        subString: "Netscape",
        identity: "Netscape"
    },
    {
        string: navigator.userAgent,
        subString: "MSIE",
        identity: "Explorer",
        versionSearch: "MSIE"
    },
    {
        string: navigator.userAgent,
        subString: "Gecko",
        identity: "Mozilla",
        versionSearch: "rv"
    },
    {       // for older Netscapes (4-)
        string: navigator.userAgent,
        subString: "Mozilla",
        identity: "Netscape",
        versionSearch: "Mozilla"
    }
],
dataOS: [
    {
        string: navigator.platform,
        subString: "Win",
        identity: "Windows"
    },
    {
        string: navigator.platform,
        subString: "Mac",
        identity: "Mac"
    },
    {
        string: navigator.userAgent,
        subString: "iPhone",
        identity: "iPhone/iPod"
    },
    {
        string: navigator.platform,
        subString: "Linux",
        identity: "Linux"
    }
]

};
BrowserDetect.init();

var x = (BrowserDetect.browser);
var y = (BrowserDetect.version);
var z = (BrowserDetect.OS); 
```

Y 仍然返回等于 7 的版本，而 IE 实际上是 8。但是，这只发生在 IE 8 从 IE 7 升级时。这让我发疯。为什么它没有看到当前浏览器等于 8...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:23:02.397

如果您绝对*必须*检测浏览器，请使用[条件注释](http://www.quirksmode.org/css/condcom.html)仅针对 IE：

```
<!--[if lte IE 7]>
    <script type="text/javascript">
        window.location.href = "http://www.go-away-ie7.com/"
    </script>
<![endif]--> 
```

# android-viewpager - 具有缩放 imageView 和 imageLoader 的 ViewPager

> ID：13847002
> 
> 赞同：2
> 
> 时间：2012-12-12T19:18:40.173
> 
> 标签：android-viewpager

我想用 it.sephiroth.android.library.imagezoom.ImageViewTouch 或 ScaleImageView 或其他实现缩放图像视图来实现 viewPager...我的问题是我使用 imageLoader 来显示图像：

```
imageLoader.displayImage(path,imageView); 
```

我用它来快速显示图像（也许这是我的问题，我可以使用其他东西..）

结果是图像没有缩放，我希望它是“FIT CENTER”。

当我通过比例类型将其设置为 FIT CENTER 时，我无法缩放它，它必须是 MATRIX ...

我该怎么做？我搜索了很多正确的答案..

# jquery-plugins - mobiscroll - 单击时选择选项

> ID：13847003
> 
> 赞同：1
> 
> 时间：2012-12-12T19:18:41.990
> 
> 标签：jquery-plugins, mobiscroll

我正在决定如何在网站上实现“选择”，并且正在强烈考虑使用 mobiscroll，只有一件小事让我烦恼，那就是“额外点击”（与老式下拉菜单相比）选择选项后所需的“设置”按钮。

我的问题是，有没有办法在通过单击或触摸选择选项时关闭滚动条并设置值，但如果由于拖动滚动条或使用鼠标滚轮而“选择”了新选项，则没有办法？

这是我的代码：

```
<script type="text/javascript">

        $('#myScroller').mobiscroll({
            preset: 'select',
            theme: 'android-ics',
            mode: 'mixed',
            display: 'bubble',
            rows: 7,
            inputClass: 'subtleDropdown',
            onChange: function(val, inst) {
                //I would think this is where it's supposed to go, no luck thus far though!
                console.log(this);
            },
        });

</script> 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:27:35.473

最后，我们决定不使用 mobiScroll（可用的信息太少），所以我要结束这个问题。

# google-apps-script - 如何从谷歌应用程序脚本中的数据单元中检索超链接？

> ID：13847007
> 
> 赞同：10
> 
> 时间：2012-12-12T19:18:59.130
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我正在使用 SpreadsheetApp.getActiveRange().getValues(); 获取一系列单元格的值，但它不返回与该单元格关联的超链接，只返回文本。有什么方法可以获取超链接，还是我必须在其中添加另一个带有 url 的字段？

谢谢。

更新：这就是我最终使用它来构建链接列表的方式。

```
<ul>
    <?
    var range = SpreadsheetApp.getActiveRange();
    var data = range.getValues();
    var links = range.getFormulas();

    for(var i=1; i < data.length; i++){
        if(data[i][0] !== ''){
            ?>
            <li><a href="<?= links[i][0].split("\"")[1]; ?>"><?= data[i][0]; ?></a></li>
            <?
        }
    }
    ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T20:28:44.803

与单元格文本关联的超链接由公式表示。Google 电子表格会自动将任何 URL 转换为可点击的超链接，但在这些情况下，不使用公式并且文本和 URL 相同。

下面是一个非常简单的解决方案（无错误检查），关于如何通过脚本获得它。我怀疑你是从 Excel 或其他东西导入的，那是你看不到 HYPERLINK 公式。

如果你有一个看起来像这样的单元格 -

![带有超链接的单元格](../Images/8e164fff2829837fc89091cf0f7041f5.png)

然后此脚本将让您读取与其关联的 URL -

```
function getURL() {
  var range = SpreadsheetApp.getActiveSheet().getActiveCell();

  //logs - Google
  Logger.log(range.getValue());

  //logs - =HYPERLINK("http://www.google.com", "Google")
  Logger.log(range.getFormulaR1C1());

  //simple regex to get first quoted string
  var url = /"(.*?)"/.exec(range.getFormulaR1C1())[1];

  //logs - http://www.google.com
  Logger.log(url);
} 
```

# odata - 使用非文字表达式过滤

> ID：13847008
> 
> 赞同：0
> 
> 时间：2012-12-12T19:19:04.783
> 
> 标签：odata

如何使用 OData 创建跨属性比较过滤器。即类似的东西

/Orders?$filter=OrderDate gt ShippedDate

所有 OData 示例仅在过滤器表达式的右侧显示文字。

OData 可以做到这一点，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:06:54.633

你当然可以这样做。这是来自 Netflix 的查询，比较了 DVD 和蓝光影片的可用日期

```
http://odata.netflix.com/Catalog/Titles?$filter=Dvd/AvailableFrom%20gt%20BluRay/AvailableFrom 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:00:24.580

但是当然，这里是相关的ABNF，表明左右值是可以互换的，两者都可以是memberExpr或者boolFunctionCallExpr甚至是非bool表达式（eg: lowercase(Category/Slug) eq lowercase(substring(ProcuctName,10) ）。

```
commonExpr                  =   [ WSP ] (
                                    boolCommonExpr / 
                                    methodCallExpr /
                                    parenExpr / 
                                    literalExpr / 
                                    addExpr /
                                    subExpr / 
                                    mulExpr / 
                                    divExpr /
                                    modExpr /  
                                    negateExpr / 
                                    memberExpr / 
                                    firstMemberExpr / 
                                    castExpr / 
                                    functionCallExpr 
                                ) [ WSP ]

ltExpr                      =   commonExpr WSP "lt" WSP commonExpr 
```

# git - 如何从另一个 git 存储库的子目录中提取对文件的更改

> ID：13847017
> 
> 赞同：1
> 
> 时间：2012-12-12T19:19:45.633
> 
> 标签：git

我的 git 存储库中有一个文件，该文件有时会在另一个 git 存储库中接收错误修复。我希望能够将这些提交提取到我的仓库中。

例如：

```
project_a/
  /.git
  /src/somefile.cpp

project_b/
  /.git
  /utils/converters/apples/bananas/src/somefile.cpp 
```

我想从`project_b`to拉入提交`project_a`for `somefile.cpp`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T16:10:41.247

如果您有相同名称但位于不同文件夹中的文件（假设您已将 project_b 合并到子目录中），那么您必须按以下方式进行挑选

```
git cherry-pick project_b/master --strategy=subtree 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:37:46.607

您可以添加`project_b`为遥控器，然后从中获取和挑选。尝试这样的事情：

```
git remote add project_b /path/to/project_b/
git fetch project_b 
```

现在你可以从`project_b`. 如果您想要的提交位于`project_b`master 分支的顶端，只需执行

```
git cherry-pick project_b/master 
```

或者，您可以绕过远程获取/樱桃采摘的东西，直接从`project_b`这样的补丁：

```
git --git-dir=/path/to/project_b/.git format-patch -k -1 \
--stdout <commit SHA> somefile.cpp | git am -3 -k 
```

（[改编自这个答案](https://stackoverflow.com/a/9507417/349353)。）

# uiview - UIView 的尺寸可以通过多少种方式改变？

> ID：13847018
> 
> 赞同：0
> 
> 时间：2012-12-12T19:19:49.630
> 
> 标签：uiview, uikit, subclass, autoresizingmask

我有一个 UIView 的自定义子类，我们称之为 BottomBox。

BottomBox 具有以下覆盖方法：

```
-(void)setBounds:(CGRect)bounds; 
```

和

```
-(void)setFrame:(CGRect)frame; 
```

在每个中调用 [super set*:*]，并记录当前和新的 CGRect，以及两者中的断点。

BottomBox 对象具有 autoresizingMask 集：

```
bottombox1.autoresizingMask =
    UIViewAutoresizingFlexibleTopMargin |
    UIViewAutoresizingFlexibleLeftMargin |
    UIViewAutoresizingFlexibleRightMargin; 
```

它们位于屏幕底部。

BottomBox 对象包含主 .layer 属性的子层，这些子层被转换，这些层的边界框超出了 BottomBox 对象的视图边界区域。这会导致框架/边界访问器返回调整后的边界值，我已经说明了这一点。

但是在设备方向更改后，BottomBox 对象的大小会异常调整，尽管 autoresizingMask 属性没有定义宽度或高度的灵活性。以我的经验，边界/框架的高度没有被调整，但宽度被极度扭曲。

现在，我觉得我只是误解了边界和框架的真正含义。也许，实际上，它们是根据子视图和子层为每次访问动态计算的。

我想知道是否有其他方法可以调整这些，也许我忽略了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:06:15.937

在设备旋转期间，如果 view.autoresizesSubviews 为 YES，任何允许重定向和调整视图大小的 UIViewController 都会影响任何子视图。

然后任何具有任何灵活调整大小掩码的子视图都将允许从 [UIView(Geometry) _applyAutoresizingMaskWithOldSuperviewSize:] 中调用 setFrame。

setFrame: 的接收者会正确接收根据 autoresizing mask 调整的帧。

在我的 BottomBox 中，有一个 setFrame 覆盖，用于检查框架参数，以及调用 [super setFrame:frame] 后框架的值。

*我的具体实施说明：*

例如，一个 432 像素正方形旋转 -120 度，有一个新的边界框 589。
然后当设备旋转并调用 setFrame 因为任何灵活的自动调整掩码常量时，setFrame 接收一个 589 像素正方形框架尺寸。旋转是静默应用的，另一个外部边界框由 803 像素正方形定义。

实际上，这个 803 的正方形实际上保持了 589 像素的高度，并没有垂直调整大小。这是因为自动调整大小的蒙版。在我的具体情况下，严格的下边距。

所以总而言之，一个最初是 432 像素正方形的视图设法变成了一个以 803x589 像素矩形为边界的视图。严重变形。

# php - 如何按 desc 顺序按最大值对数组进行排序？

> ID：13847020
> 
> 赞同：-4
> 
> 时间：2012-12-12T19:20:16.060
> 
> 标签：php, loops, for-loop, foreach, bubble-sort

我的数组看起来像：

```
$array['keyword1'] = 20;
$array['keyword4'] = 1;
$array['keywordsda'] = 33; 
```

.....其中大约1k。

我将如何按值 desc 对它们进行排序？

```
$array['keywordsda'] = 33;
$array['keyword1'] = 20;
$array['keyword4'] = 1; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T19:23:25.853

您可以使用函数[arsort](http://php.net/manual/en/function.arsort.php)来执行此操作...

> 此函数对数组进行排序，以便数组索引保持与它们关联的数组元素的相关性。
> 
> 这主要用于对实际元素顺序很重要的关联数组进行排序时。

它将以相反的顺序（从高到低）对您的数组进行排序，以维护您的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:21:51.143

[`rsort`](http://us2.php.net/manual/en/function.rsort.php)以相反的顺序对数组进行排序。您可以使用`rsort($array, SORT_NUMERIC)`，但我认为如果没有第二个参数，它可能会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T19:21:57.683

在手册中查找函数：sort、array_reverse

```
sort($your_array, SORT_NUMERIC);
$your_array = array_reverse($your_array, true); 
```

如果你想保留键作为 array_reverse 的第二个参数发送 true，如果没有，那么你可以省略它。

# objective-c - UIAlertView：警报不会显示

> ID：13847021
> 
> 赞同：0
> 
> 时间：2012-12-12T19:20:21.443
> 
> 标签：objective-c, ios, uikit, uialertview

无法让这个警报实例显示在这个实现文件中，我就是找不到问题所在。

其他一切正常。

关于有什么问题的任何建议？

```
#import "BIDSingleComponentViewController.h"

@implementation BIDSingleComponentViewController

- (IBAction)buttonPressed
{
    NSInteger row = [self.singlePicker selectedRowInComponent:0];
    NSString *selected = self.characterNames[row];
    NSString *title = [[NSString alloc] initWithFormat:@"You selected %@", selected];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title
                                                    message:@"Thank you for choosing."
                                                   delegate:nil
                                          cancelButtonTitle:@"You're welcome."
                                          otherButtonTitles: nil];
    [alert show];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.characterNames = @[@"Luke", @"Leia", @"Han", @"Chewbacca", @"Artoo", @"Threepio", @"Lando"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark
#pragma mark Picker Data Source Methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1; // Incompatible integer to pointer conversion
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return [self.characterNames count];
}

#pragma mark Picker Delegate Methods

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return self.characterNames[row];
}

@end 
```

头文件：

```
#import <UIKit/UIKit.h>

@interface BIDSingleComponentViewController : UIViewController
<UIPickerViewDelegate, UIPickerViewDataSource>

@property (strong, nonatomic)IBOutlet UIPickerView *singlePicker;
@property (strong, nonatomic)NSArray *characterNames;

- (IBAction)buttonPressed;

@end 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-12T21:18:27.203

在您的头文件中确保包含 AlertViewDelegate：

```
@interface BIDSingleComponentViewController : UIViewController
<UIPickerViewDelegate, UIPickerViewDataSource, UIAlertViewDelegate> 
```

此外，请务必将所有插座连接到它们在 IB 中的所属位置

# jquery - 使用jQuery，如何获取变量值，找到与变量同名的HTML元素，并更新内容

> ID：13847026
> 
> 赞同：1
> 
> 时间：2012-12-12T19:20:58.353
> 
> 标签：jquery

我有许多变量存储在外部文件（settings.js）中：

```
var company = "Apple";
var city = "Toronto";
var weather = "Sunny"; 
```

在我的 HTML 中，我引用了将存储所有变量的 jQuery 和 settings.js。标签之间的`body`代码如下所示：

```
<div class="company"></div>
<div class="city"></div>
<div class="weather"></div> 
```

我正在尝试制作一些智能 jQuery 代码，它将读取 settings.js 文件，找到变量并加载它，然后找到与变量具有相同类名的 HTML 元素，最后用变量值更新该元素的内容。

执行函数 HTML 后应该如下所示：

```
<div class="company">Apple</div>
<div class="city">Toronto</div>
<div class="weather">Sunny</div> 
```

**注意：** HTML 中可能有多个位置具有相同的类名。所有这些都将在 FF 本地运行。这是测试/演示项目，所以我不太担心性能。

[**JSF中：**](http://jsfiddle.net/Klikerko/sdDZB/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:27:29.407

使用对象来包含变量，然后您可以使用字符串引用属性：

```
 // Variables 
    var data = {
        company:"Apple",
        city:"Toronto",
        weather:"Sunny"

    }

    ​$("div").each(
        function(){
        this_class = $(this).attr("class");
        $(this).text(data[this_class]);
        }
    );​​​​​​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T19:26:47.083

这是不可能的，因为无法获取给定范围内的变量列表（请参阅 [获取范围内的所有变量](https://stackoverflow.com/questions/2051678/getting-all-variables-in-scope)）。

如果您要`var`省略（不一定推荐），那么它们将各自附加到`window`对象上，您可以执行以下操作：

```
$("div").each(function () {
   $(this).text(window[$(this).attr('class')]);
}); 
```

作为替代方案，您还可以在对象中定义这些值，而不是将每个值都作为自己的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:28:20.027

你需要某种范围来实现这一点。只需将它们定义为`var x`将它们放在窗口上即可。因此，您可以遍历窗口上的所有变量以找到它们：

```
for(var k in window) {
    // do stuff
} 
```

但正如您可能想象的那样，将会有很多窗口变量（我的 chrome 浏览器中的 45 个，现在在这个页面上。

Matanya 刚刚在范围界定到位后击败了我。但以上是其中的一些原因。

**编辑：**我实际上会以另一种方式来做，不是在 div 上选择，而是在类名上选择。你会在你感兴趣的类上选择一个小得多的结果集（无论如何，对于典型的页面 - div 通常像糖果一样洒满）。

```
for(var k in data)
{
    $("."+k).html(data[k]);
} 
```

# mysql - 在 where 子句中使用函数

> ID：13847027
> 
> 赞同：1
> 
> 时间：2012-12-12T19:21:01.180
> 
> 标签：mysql, sql, stored-procedures

我有一个 MySQL 数据库，我在其中运行某些存储过程。

在其中一个中，我想总结某个用户必须支付的金额，他已经支付的金额并返回所有用户，其中要支付的金额不等于支付的金额。我想出了以下（简化的）查询：

```
SELECT userId, SUM(costs) as sum_costs, 
  (SELECT SUM(payed)
   FROM payments p WHERE ta.userId=p.userId) as sum_payed
FROM ta 
GROUP BY ta.userId
ORDER BY ta.userId; 
```

这给了我每个用户的费用和付款的总和。但我不知道，我如何才能只选择成本和付款不相等的用户。

```
WHERE sum_costs != sum_payed 
```

不起作用，因为 mysql 不知道 WHERE 子句中的“sum_costs”列。

任何想法，如何让选择工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:24:50.703

```
SELECT * FROM 
(
SELECT userId, SUM(costs) as sum_costs, 
(SELECT SUM(payed)
FROM payments p WHERE ta.userId=p.userId) as sum_payed
FROM ta 
GROUP BY ta.userId
)a
WHERE a.sum_costs <> a.sum_payed 
--ORDER BY a.userId; 
```

更新：实际上不需要，`ORDER BY UserId`因为它将由隐式订购`GROUP BY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:47:36.597

```
SELECT * from
(select userId, SUM(costs) as sum_costs
    FROM ta 
       GROUP BY ta.userId) t1
 left join
  (SELECT userId,SUM(payed) as sum_payed FROM payments p group by userId) t2
   on t1.UserId=t2.UserId

where t1.sum_costs<>t2.sum_payed
ORDER BY t1.userId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:24:33.527

```
WHERE SUM(costs) <> (SELECT SUM(payed) FROM payments p WHERE ta.userId=p.userId) 
```

# pdf - 在没有第三方 DLL 的情况下转换为 PDF

> ID：13847032
> 
> 赞同：0
> 
> 时间：2012-12-12T19:21:24.357
> 
> 标签：pdf, converter

我正在考虑创建自己的自定义 DLL 来将我想要的任何内容转换为 PDF（HTML、XML、docx、xls 等）。我什至不知道从哪里开始，因为每次提出这个问题时，所有答案都只是链接到现有的进行 PDF 转换的 DLL。

我知道这项任务并不简单，但是有人可以告诉我如何编写这样一个项目吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T23:18:45.090

安德鲁，不是这个问题很难（也不是答案）。大多数人都知道这项任务*的*难度。但如果你真的想这样做，方法很简单。

访问[http://www.adobe.com/devnet/acrobat/overview.html](http://www.adobe.com/devnet/acrobat/overview.html)并从此页面下载 Adob​​e Acrobat SDK。此 SDK 的一部分是 PDF 规范，在其最新版本中是 ISO 标准 (ISO 32000)。这份非常长的文档详细描述了 PDF 文件的结构以及它必须遵守的法律。

剩下的就是（我真的试图包含我的讽刺:-)）是摄取您想要支持的任何文件格式并将其中的信息转换为有效的 PDF 文件。编写好的 PDF 文件不是火箭科学 - 编写总是比阅读更容易，因为您可以控制要支持的内容而不是不支持的内容。

请记住，数十种不同的应用程序可以读取 PDF，并且您最好编写非常非常严格地遵守规则的东西。尽早并经常测试。要进行测试，请使用 Adob​​e Acrobat，因为它或多或少仍是黄金标准。其次，为自己准备一个预检应用程序（例如 callas pdfToolbox 或 Enfocus PitStop - 观看它，我隶属于 callas）并根据 PDF/A-1b 标准对您的 PDF 文件进行预检。特别是那个，因为它对实际的文件结构非常严格。您会收到许多与 PDF/A 合规性有关的错误，但如果您的文件结构有任何问题，您也可能会收到报告的这些错误。

祝你好运！

# c# - 使用 async/await 时实现请求同步队列的正确方法

> ID：13847034
> 
> 赞同：0
> 
> 时间：2012-12-12T19:21:24.630
> 
> 标签：c#, async-await

我想知道是否有人可以指导我在正确的方向上为需要这种模式的服务器创建一个同步请求队列。

我想在我的代码中继续使用已经实现的 async/await 模式，并且能够将上传参数和下载结果（将使用 JSON 序列化）中通用的 GET 和 POST 请求排入队列。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:28:12.977

我建议[`ActionBlock<T>`](http://msdn.microsoft.com/en-us/library/hh194684.aspx)从[TPL Dataflow library](https://nuget.org/packages/Microsoft.Tpl.Dataflow)使用。

或者，您可以[`AsyncProducerConsumerQueue`](http://nitoasyncex.codeplex.com/wikipage?title=AsyncProducerConsumerQueue)从我的[AsyncEx 库](http://nitoasyncex.codeplex.com/)中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:07:59.220

如果您需要单线程访问，只需使用锁。这有一个异步等效项：（`AsyncLock`或`AsyncSemaphore`）。

不需要像队列或数据流这样的复杂结构。（`AsyncSemaphore`引擎盖下有一个这样的队列，但这对你来说并不重要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:34:55.703

您的客户端代码可能是异步的，而您的服务是纯同步的。您可以设置 ServiceBehaviorAttribute 以便您的服务一个接一个地执行请求。它甚至可以在您用来打开服务主机的同一线程上运行。如果您的服务从不执行“等待”，它会同步运行。使用这种设计，您可以在需要时增强您的服务，而不会破坏客户端。请参阅[我的帖子](https://stackoverflow.com/questions/4095247/async-ctp-how-can-i-use-async-await-to-call-a-wcf-service/10020063#10020063)以获取一些提示。

# google-app-engine - 无法在 Google AppEngine 项目中使用线程安全

> ID：13847039
> 
> 赞同：1
> 
> 时间：2012-12-12T19:21:39.863
> 
> 标签：google-app-engine

我想在本地设置 AppEngine 服务。一切都可以编译，但是当我尝试运行该项目时，出现此错误：

> 严重：收到异常处理 C:\Users\eazyigz\Google Drive\Books\Android eBooks\Apress Practical Android Projects\PracticalAndroidProjectsSourceCode\Projects\08_GameService\war\WEB-INF/appengine-web.xml com.google.apphosting.utils。 config.AppEngineConfigException：appengine-web.xml 不包含元素。请参阅[http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests](http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests)了解更多信息。您可能希望启用并发请求。在 com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79) 在 com.google.apphosting.utils.config.EarHelper.readWebModule(EarHelper.java:130) 在 com.google.appengine.tools .development.AbstractContainerService.loadAppEngineWebXml(AbstractContainerService.java:334) 在 com.google.appengine.tools.development.JettyContainerService.initContext(JettyContainerService.java:160) 在 com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService .java:227) 在 com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157) 在 com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333) 在com。

当我启用**threadsafe**时，Eclipse 显示此编译错误： ![在此处输入图像描述](../Images/9c9267c050e553c9dadb07a00f918d78.png)

我根本不明白发生了什么。有人可以解释一下吗？

谢谢你，伊戈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:35:54.663

你应该归档，而`<threadsafe>`不是`appengine-web.xml``web.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:34:59.003

您需要将 true 添加到文件“appengine-web.xml”而不是“web.xml”

[https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)

# kinect - getUserPixels - 官方 Kinect SDK 中的替代方案

> ID：13847046
> 
> 赞同：0
> 
> 时间：2012-12-12T19:22:01.423
> 
> 标签：kinect, openni

官方 Kinect SDK 中[OpenNI](http://openni.org/docs2/Reference/classxn_1_1_user_generator_aa302a10f2f6f13174a2e2a5bf1746a10.html)`getUserPixels`提供的方法是否有替代方法？

如何使用官方 Kinect SDK 实现这一功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:44:01.323

官方 Kinect for Windows SDK (v1.6) 不支持直接调用，例如`getUserPixels`提取玩家剪影，但确实包含执行此操作所需的所有信息。

[通过检查Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)中提供的两个示例，您可以以不同的方式看到这一点。

*   *Basic Interactions-WPF*：包括创建被跟踪用户的简单轮廓的功能。
*   *绿屏（-WPF 或 -D2D）*：显示如何执行背景减除以产生绿屏效果。在此示例中，来自 RGB 相机的数据叠加在图像上。

这两个示例以不同的方式执行此操作。

*   *Basic Interactions*`BitmapMask`将从与请求的玩家对应的深度数据中提取一个。这样做的好处是只显示被跟踪的用户；任何不被认为是骨架的物体都会被忽略。
*   *绿屏*不寻找特定用户，而是选择运动。这提供了对任何移动物体进行剪影的优势——例如在两个用户之间传递的球。

我相信“基本交互”示例将向您展示如何实现您正在寻找的内容。您必须自己完成这项工作，但这是可能的。例如，使用“基本交互”示例作为基础，我创建了一个`UserControl`生成被跟踪用户的简单剪影...

当骨架框架准备好时，我拉出玩家索引：

```
private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame != null && skeletonFrame.SkeletonArrayLength > 0)
        {
            if (_skeletons == null || _skeletons.Length != skeletonFrame.SkeletonArrayLength)
            {
                _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
            }

            skeletonFrame.CopySkeletonDataTo(_skeletons);

            // grab the tracked skeleton and set the playerIndex for use pulling
            // the depth data out for the silhouette.
            // NOTE: this assumes only a single tracked skeleton!
            this.playerIndex = -1;
            for (int i = 0; i < _skeletons.Length; i++)
            {
                if (_skeletons[i].TrackingState != SkeletonTrackingState.NotTracked)
                {
                    this.playerIndex = i+1;
                }
            }
        }
    }
} 
```

`BitmapMask`然后，当下一个深度帧准备好时，我为对应的用户拉出`playerIndex`。

```
private void OnDepthFrameReady(object sender, DepthImageFrameReadyEventArgs e)
{
    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
    {
        if (depthFrame != null)
        {
            // check if the format has changed.
            bool haveNewFormat = this.lastImageFormat != depthFrame.Format;

            if (haveNewFormat)
            {
                this.pixelData = new short[depthFrame.PixelDataLength];
                this.depthFrame32 = new byte[depthFrame.Width * depthFrame.Height * Bgra32BytesPerPixel];
                this.convertedDepthBits = new byte[this.depthFrame32.Length];
            }

            depthFrame.CopyPixelDataTo(this.pixelData);

            for (int i16 = 0, i32 = 0; i16 < pixelData.Length && i32 < depthFrame32.Length; i16++, i32 += 4)
            {
                int player = pixelData[i16] & DepthImageFrame.PlayerIndexBitmask;
                if (player == this.playerIndex)
                {
                    convertedDepthBits[i32 + RedIndex] = 0x44;
                    convertedDepthBits[i32 + GreenIndex] = 0x23;
                    convertedDepthBits[i32 + BlueIndex] = 0x59;
                    convertedDepthBits[i32 + 3] = 0x66;
                }
                else if (player > 0)
                {
                    convertedDepthBits[i32 + RedIndex] = 0xBC;
                    convertedDepthBits[i32 + GreenIndex] = 0xBE;
                    convertedDepthBits[i32 + BlueIndex] = 0xC0;
                    convertedDepthBits[i32 + 3] = 0x66;
                }
                else
                {
                    convertedDepthBits[i32 + RedIndex] = 0x0;
                    convertedDepthBits[i32 + GreenIndex] = 0x0;
                    convertedDepthBits[i32 + BlueIndex] = 0x0;
                    convertedDepthBits[i32 + 3] = 0x0;
                }
            }

            if (silhouette == null || haveNewFormat)
            {
                silhouette = new WriteableBitmap(
                    depthFrame.Width,
                    depthFrame.Height,
                    96,
                    96,
                    PixelFormats.Bgra32,
                    null);

                SilhouetteImage.Source = silhouette;
            }

            silhouette.WritePixels(
                new Int32Rect(0, 0, depthFrame.Width, depthFrame.Height),
                convertedDepthBits,
                depthFrame.Width * Bgra32BytesPerPixel,
                0);

            Silhouette = silhouette;

            this.lastImageFormat = depthFrame.Format;
        }
    }
} 
```

我最终得到的是 a 中用户的紫色剪影`WriteableBitmap`，可以将其复制到`Image`控件上的 an 或拉出并在其他地方使用。一旦你有了，`BitmapMask`你也可以将数据映射到颜色流，如果你想真正看到对应于那个区域的 RGB 数据。

如果您愿意，可以调整代码以更接近地模拟该`getUserPixels`功能。给定深度框架和 playerIndex，您会感兴趣的大部分内容是：

```
if (depthFrame != null)
{
    // check if the format has changed.
    bool haveNewFormat = this.lastImageFormat != depthFrame.Format;

    if (haveNewFormat)
    {
        this.pixelData = new short[depthFrame.PixelDataLength];
        this.depthFrame32 = new byte[depthFrame.Width * depthFrame.Height * Bgra32BytesPerPixel];
        this.convertedDepthBits = new byte[this.depthFrame32.Length];
    }

    depthFrame.CopyPixelDataTo(this.pixelData);

    for (int i16 = 0, i32 = 0; i16 < pixelData.Length && i32 < depthFrame32.Length; i16++, i32 += 4)
    {
        int player = pixelData[i16] & DepthImageFrame.PlayerIndexBitmask;
        if (player == this.playerIndex)
        {
            // this pixel "belongs" to the user identified in "playerIndex"
        }
        else
        {
            // not the requested user
        }
    }
} 
```

# unity3d - 对象生成和删除

> ID：13847047
> 
> 赞同：1
> 
> 时间：2012-12-12T19:22:31.333
> 
> 标签：unity3d, 2d, unityscript, side-scroller

我目前正在制作一个简单的横向卷轴。团结一致。我正在寻找一种在对象进入相机之前生成对象并在它们通过相机后将其移除的方法。所有这些都将发生在 x 轴上。

将生成 6 种不同类型的对象。并且彼此距离不同。物体是可以拾取的，它们都是预制件，并且有玩家碰撞时拾取的功能脚本。但是如果他们没有被捡起，我需要一种方法来删除它们。

有没有人有一个简单的脚本可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:13:54.100

`MonoBehaviour`您可以使用2 种方法： [OnBecameInvisible](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnBecameInvisible.html)和 [OnBecameVisible](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnBecameVisible.html)。只要渲染器不再被任何相机可见（或变得可见），它们就会被调用。

# dart - Dart 编辑器视觉主 题...可编辑？

> ID：13847051
> 
> 赞同：3
> 
> 时间：2012-12-12T19:22:41.320
> 
> 标签：dart, dart-editor

新的视觉主题选择器很棒！谢谢！我们终于可以“调暗灯光”了。虽然，黑色，特别是蓝色字体，在深色背景上，很难看。是否有某种可编辑的 CSS 文件，我们可以调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:43:10.280

快速的答案是查看此文件夹中的文件：

```
plugins\com.google.dart.tools.deploy_0.2.8.r15948\themes 
```

（`r15948`编辑器的版本在哪里）

这包含一系列 xml 文件 - 每个主题一个，您可以在其中编辑相关的颜色值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:35:01.877

如果您查看首选项>>视觉主题，它会说：

在 eclipsecolorthemes.org 上下载更多主题或创建您自己的主题。它还允许您导入主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-08T17:48:50.440

Hannes Rammer 为此构建了一个开源工具

*   [https://github.com/HannesRammer/Rainbow](https://github.com/HannesRammer/Rainbow) (GitHub)
*   [http://pub.dartlang.org/packages/rainbow](http://pub.dartlang.org/packages/rainbow)

也可在 [https://rainbow-dart.appspot.com/在线获取](https://rainbow-dart.appspot.com/)

# javascript - ~~ 和 Math.floor() 的区别

> ID：13847053
> 
> 赞同：6
> 
> 时间：2012-12-12T19:22:49.150
> 
> 标签：javascript, performance, math, floor

正如我在示例中看到的那样，功能 if`~~`和`Math.floor`是相同的。他们都向下舍入一个数字（我认为正确吗？）

另外我应该提到，根据这个测试`~~`比`Math.floor`：[jsperf.com/math-round-vs更快](http://jsperf.com/math-round-vs)

`~~`所以我想知道，和之间有什么区别`Math.floor`吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T19:25:25.227

是的，按位运算符通常不能很好地处理负数。前：

```
~~-6.8 == -6 // doesn’t round down, simply removes the decimals

Math.floor(-6.8) == -7 
```

你也得到`0`而不是`NaN`，f.ex：

```
~~'a' == 0

Math.floor('a') == NaN 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-29T11:08:06.010

除了大卫回答：

> 关于 JavaScript 中的位运算，我注意到的一件事是它可以方便地处理较小的值，但并不总是适用于较大的值。出现这种情况的原因是按位运算符仅适用于可以完全以 32 位有符号格式表示的操作数。换句话说，使用按位运算只会产生介于 -2147483648 (-231) 到 2147483647 (231 – 1) 之间的数字。此外，如果使用的操作数之一超出该范围，则将使用数字的最后 32 位而不是指定的数字。

*   [http://cwestblog.com/2011/07/27/limits-on-bitwise-operators-in-javascript/](http://cwestblog.com/2011/07/27/limits-on-bitwise-operators-in-javascript/)

使用 Date 时很容易发现此限制，假设您正在四舍五入毫秒值：

```
Math.floor(1559125440000.6) // 1559125440000
~~1559125440000.6           // 52311552 
```

# r - R优化脚本有很多循环

> ID：13847056
> 
> 赞同：1
> 
> 时间：2012-12-12T19:22:57.777
> 
> 标签：r

我有一个包含数百列和行的列表。我正在做的是循环遍历几乎所有可能的迭代，以获取两列之间的差异。例如，取第 1 列和第 2 列、第 1 列和第 3 列之间的差异……第 1 列和第 500 列……第 499 列和第 500 列。一旦我有了这些差异，我就会计算一些描述性统计数据（即平均值、标准偏差、峰度、偏度等）以用于输出。我知道我可以使用 lapply 单独计算每一列的统计数据，但是 sd(x)-sd(y) <> sd(xy) 所以它并没有真正减少我的循环。我可以使用 avg(x)-avg(y)=avg(xy) 但这是我可以使用此属性的唯一统计数据。

这是我拥有的一些伪代码：

```
 for (n1 in 1:(number of columns) {
        for (n2 in n1:(number of columns) {
            temp<-bigdata[n1]-bigdata[n2]
                 results[abc]<-(maxdrawdown,mean,skewness,kurtosis,count,st dev,
                       median, downsidedeviation)
         }
         } 
```

这样做可能需要几天的时间，所以我正在寻找一些改进。我已经在使用**Compiler**了，`enableJIT(3)`它实际上确实使它明显更快。我还有其他一些想法，任何煽动都会有所帮助。一个是尝试利用降雪包（仍然试图让我了解如何实现它），并认为一个核心可以计算偏斜和峰度，而另一个核心可以计算其他统计数据。另一个想法是创建大块 temp（即 1-2、1-3、1-4）作为另一个 data.frame（或列表），以便对它使用 lapply 来一次淘汰许多迭代。这会有很大的不同吗？还有什么我可以做的，我什至没有想到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:57:33.353

一个可重复的例子真的很有帮助，因为你描述问题的方式令人困惑（例如列表没有行/列）。我的猜测是，`bigdata`并且`results`是 data.frames，在这种情况下，将它们中的每一个转换为矩阵将使您的循环明显更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:00:39.043

我不知道它是否会更快，但以下内容可能会使代码更容易阅读，如果不是更快的话，虽然它也应该变得更快一些，因为你已经消除了`for() ...`.

尝试使用`expand.grid()`，我倾向于使用的频率低于我应该使用的频率

例如：

```
nC <- 3 # Num of cols
nR <- 4 # Num of cols
indices <- expand.grid(nC, nC)
# Now you can use apply cleanly
apply(indices, 1,
   function(x) {
      c1 <- x[1]; c2 <- x[2]
      yourResult[c1,c2] <- doYourThing(bigData[,c1], bigData[,c2])
   }
) 
```

反正你懂这个意思。:-)

# c# - 如何在 Windows Phone 中的页面之间传递照片？

> ID：13847057
> 
> 赞同：0
> 
> 时间：2012-12-12T19:23:00.363
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我知道如何传递数据 `NavigationService.Navigate(new Uri("/Second.xaml?msg=mesage", UriKind.Relative));`

问题是，如何将从库中选择的图像传递到另一个页面？

要选择图像，我使用`PhotoChooserTask`and 在它完成的情况下我有这个：

```
 private void photoChooserTask_Completed(object sender, PhotoResult e)
    {
        if (e.ChosenPhoto != null)
        {
            BitmapImage image = new BitmapImage();
            image.SetSource(e.ChosenPhoto);
            this.img.Source = image;
        }
    } 
```

如何将选择的照片发送到另一个页面？我是否必须将其写入缓冲区、设置全局变量或将其“保存”在独立存储中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T01:04:43.210

1.  您可以先将图片保存在 IsolatedStorage 中，将文件路径作为字符串参数传递到另一个页面，在需要时将图片加载出来。

2.  使用 PhoneApplicationService 将图像保存到 State 中，在需要时加载它。

保存到 IsolatedStorage 的示例：

```
public static void SaveStreamToStorage(Stream imgStream, string fileName)
        {
            using (IsolatedStorageFile iso_storage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                //Structure the path you want for your file.
                string filePath = GetImageStorePathByFileName(fileName);

                //Constants.S_STORE_PATH is the path I want to store my picture.
                if (!iso_storage.DirectoryExists(Constants.S_STORE_PATH))
                {
                    iso_storage.CreateDirectory(Constants.S_STORE_PATH);
                }
                //I skip the process when I find the same file.
                if (iso_storage.FileExists(filePath))
                {
                    return;
                }

                try
                {
                    if (imgStream.Length > 0)
                    {
                        using (IsolatedStorageFileStream isostream = iso_storage.CreateFile(filePath))
                        {
                            BitmapImage bitmap = new BitmapImage();
                            bitmap.SetSource(imgStream);

                            WriteableBitmap wb = new WriteableBitmap(bitmap);

                            // Encode WriteableBitmap object to a JPEG stream. 
                            Extensions.SaveJpeg(wb, isostream, wb.PixelWidth, wb.PixelHeight, 0, 100);

                            isostream.Close();

                            bitmap.UriSource = null;
                            bitmap = null;
                            wb = null;
                        }
                    }
                }
                catch(Exception e)
                {
                    if (iso_storage.FileExists(filePath))
                        iso_storage.DeleteFile(filePath);

                    throw e;
                }
            }
        } 
```

从 IsolatedStorage 读取图片的示例：

```
public static BitmapImage LoadImageFromIsolatedStorage(string imgName)
        {
            try
            {
                var bitmapImage = new BitmapImage();
                //bitmapImage.CreateOptions = BitmapCreateOptions.DelayCreation;
                using (var iso = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    //Check if file exists to prevent exception when trying to access the file.
                    if (!iso.FileExists(GetImageStorePathByFileName(imgName)))
                    {
                        return null;
                    }
                    //Since I store my picture under a folder structure, I wrote a method GetImageStorePathByFileName(string fileName) to get the correct path.
                    using (var stream = iso.OpenFile(GetImageStorePathByFileName(imgName), FileMode.Open, FileAccess.Read))
                    {
                        bitmapImage.SetSource(stream);
                    }
                }
                //Return the picture as a bitmapImage
                return bitmapImage;
            }
            catch (Exception e)
            {
                // handle the exception 
                Debug.WriteLine(e.Message);
            }

            return null;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:32:21.630

您可以使用 app.xaml.cs 中定义的变量并从其他页面调用它（不要介意变量名称，只是我用于语言支持的代码示例）：

```
private LanguageSingleton LanguageInstance
{
    get
    {
        return (App.Current as App).Language;
    }
} 
```

以下是定义该变量的方法：

```
public LanguageSingleton Language { get; set; } 
```

我确信有更多方法可以做到这一点，但这是一种解决方案。

# php - 如何将访问级别添加到 tank_auth

> ID：13847058
> 
> 赞同：0
> 
> 时间：2012-12-12T19:23:00.603
> 
> 标签：php, codeigniter, codeigniter-2, tankauth, access-levels

我正在使用 ci 2，我在上一篇文章中看到你推荐 tank_auth 作为用户身份验证的最佳库。我下载了它，但不知道如何在 tank_auth 中设置访问级别。

我应该手动修改这个吗？

我正在考虑在用户表中添加 group_id 字段并调整注册表以将 group_id 也保存给每个新用户，但我不想重新发明轮子所以我的问题是这个调整已经存在了吗？还是我应该硬编码？如果它没有任何关于最好方法的线索，所以我不会弄乱 tank_auth 代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:16:09.620

您不想在表单中允许隐藏（group_id）字段，因为它可以被操纵。

只需将其设置为 group_id 的默认值并通过您的管理进行更改。

**基本理念/实施：**

*添加到您的用户表*

```
`gid` smallint unsigned not null default 0, //or members default value 
```

-

```
alter table `users` add index(`gid`);
alter table `users` foreign key(`gid`) references groups(`id`) on delete restrict on update restrict; 
```

- 您可以在此处规范化权限列并有多种选择

```
create table `groups`(
id smallint unsigned not null auto_increment primary key,
`name` varchar(20) not null,
`permissions` varchar(255) not null, //JSON object '["read", "edit", "delete", "admin", "super"]'
created_at datetime
)engine=innodb;//or whatever engine you like 
```

-

在我的头顶

```
class MY_Controller extends CI_Controller{

     protected $_user;
     protected $_permissions=array();
     protected $_group;
     public function __construct()
     { 
         parent::__construct();

         //check for a user logged in
         $this->_user = ( $user ) ? $user : NULL;

         //if user, get group and permissions
         if($this->_user !== NULL)
         {
             $this->_get_group();
             $this->_get_permissions(); 
         }
     }

     public function _get_group(){
         return $this->_group = $this->_user->group->name; //need to work this bit out
     }

      public function _get_permissions(){
         return $this->_permissions = json_decode($this->_user->permissions, TRUE); 
     }

     public function can_read(){
         return in_array('read', $this->_permissions);
     }

     /// and so on etc
 } 
```

# php - 影响完整网站代码的 JS 和 CSS 下拉菜单代码

> ID：13847060
> 
> 赞同：-7
> 
> 时间：2012-12-12T19:23:03.357
> 
> 标签：php, javascript, html, css

我正在使用具有 JS 和 css 以及此脚本的多列下拉菜单。当我安装此菜单时，我网站上的所有内容都发生了变化。我知道它只是因为脚本。所有按钮大小增加，所有文本大小增加，一些以前的 java 脚本不起作用。请让我知道为什么会这样……[点击这里查看网站](http://www.fedri.com)一切都变了。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:27:20.037

因为菜单的 CSS 中有通用选择器。查看文件[http://www.fedri.com/css/dcmegamenu.css](http://www.fedri.com/css/dcmegamenu.css)，您将在文件顶部看到以下内容。

```
ul{list-style:none;}

body {font: normal 13px Arial, sans-serif;}
h2 {font: normal 26px Arial, sans-serif; padding: 20px 0; margin: 0 0 30px 0;} 
```

# c# - 将 WrapPanel 与相同的间距大小对齐

> ID：13847061
> 
> 赞同：1
> 
> 时间：2012-12-12T19:23:07.727
> 
> 标签：c#, silverlight, xaml, binding

我正在尝试对齐我`WrapPanel`的间距大小，尽管我不知道如何。这是我想要的一个例子，

![在此处输入图像描述](../Images/ddf8b76872502eea781204a86a26788c.png)

**XAML 代码：**

```
 <ListBox Grid.Row="1" ItemsSource="{Binding HolidayGenerator}" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <CheckBox Content="{Binding Name}" IsChecked="{Binding IsSelected, Mode=TwoWay}" HorizontalAlignment="Right" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:39:17.380

I can't be sure that this will work, but I'm thinking that you may be able to coerce the vertical alignment of each column by setting the `ItemWidth` property on the `WrapPanel` (using a value that is appropriate based on the column width that you want it to render with):

```
<ItemsPanelTemplate>
    <toolkit:WrapPanel Orientation="Horizontal" ItemWidth="25" />
</ItemsPanelTemplate> 
```

# playframework-2.0 - PlayFramework，如何注册一个BeanPersistListener？

> ID：13847063
> 
> 赞同：2
> 
> 时间：2012-12-12T19:23:08.303
> 
> 标签：playframework-2.0, listener, ebean

我发现了我想注册到我的一些模型的[BeanPersistListener ，但是我没有从 Ebean 或 PlayFramework 中找到任何关于如何集成它的文档。](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/event/BeanPersistListener.html)

从文档中：

> BeanPersistListener 可以通过类路径搜索自动找到，也可以通过 ServerConfiguration.addEntity() 以编程方式添加。

显然，它不是自动找到的（我`Logger.info`在实现的方法中添加了一些，但没有显示任何内容），所以我想通过 ServerConfiguration 添加它，但是如何添加呢？在哪里？

我也怀疑是版本问题。据我所见，BeanPersistListener 来自 Ebean 2.6.0，但我找不到正在运行的 Ebean PlayFramework 版本（我使用的是 2.0.4）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:33:21.033

First Play 2.0.4 使用 Ebean 版本 2.7.3 [[1]](https://github.com/playframework/Play20/blob/2.0.4/framework/project/Build.scala#L196)

对于注册您的监听器，您可以尝试使用本[文档](http://play2-docs-snapshot.herokuapp.com/render/JavaEbean)中所示的 ServerConfigStartup ：

```
package models;

import com.avaje.ebean.config.ServerConfig;
import com.avaje.ebean.event.ServerConfigStartup;
import com.avaje.ebean.event.BeanPersistListener;

public class MyServerConfigStartup implements ServerConfigStartup {
    @Override
    public void onStart(ServerConfig serverConfig) {
        serverConfig.add(new BeanPersistListener() {
            ....
        });
    }
} 
```

我从未测试过它，我认为值得一试:-)

**评论更新：**

您需要将这些类放在`models`包或包的子项下，`models` 以便 Ebean 可以找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T08:15:54.170

我在 PLAY 框架中看到 BeanPersistListener 存在两个问题：

1.  我必须为每个实体创建自己的 BeanPersistListener。当我有 100 个实体时不好。

2.  BeanPersistListener 在后台线程中触发。我不知道谁是用户。

# javascript - 如何像激光一样追踪字母

> ID：13847068
> 
> 赞同：1
> 
> 时间：2012-12-12T19:23:43.550
> 
> 标签：javascript, svg, smil

寻找有关如何使用 SVG 为看起来像激光的东西绘制草书字体的动画的想法。动画可以用 SMIL 或 JavaScript 我不在乎 - 虽然我认为用 SMIL 会更容易。

我很确定如果我可以将字母表示为路径，我可以弄清楚如何将一条线从固定点动画到单词路径 - 即使路径是不连续的。

有任何想法吗？

编辑我的演示非常基础，基本上我为每个字母编写了动画函数并安排了它们的时间。以字母 X 为例：

```
<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
   <rect x="0" y="0" width="100%" height="100%" fill="black"/>

   <path id="word" stroke="red" d="M10 10 L40 40 M40 10 L10 40" />
   <line x1="10" y1="10" x2="25" y2="50" stroke="blue" stroke-width="0.5">
      <animate attributeName="x1" begin="0s" dur="1s" values="10; 40;" />
      <animate attributeName="y1" begin="0s" dur="1s" values="10; 40;" />
      <animate attributeName="x1" begin="1s" dur="1s" values="40; 10;" />
      <animate attributeName="y1" begin="1s" dur="1s" values="10; 40;" />
      <set attributeName="visibility" to="hidden" begin="2s" />
   </line>

</svg> 
```

我相信我们都同意这不是一个理想的长期解决方案......我认为沿着路径为 LINE 的一端设置动画会相对容易，但我在获取路径时遇到了问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:00:52.363

从相关字形中提取路径，然后在每个路径上应用[本示例中所示的破折号数组动画。](http://xn--dahlstrm-t4a.net/svg/smil/pen-stroke-animation.svg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:47:52.040

一种可能性……据我所知，SVG 字体存储为一系列用于绘制单个字符的 SVG 命令。SVG 中基于矢量的绘图特性似乎可以实时“追踪”字符；您也许可以制作一个转换实用程序来将 SVG 字体预转换为简单路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:37:02.077

从高层次的角度来看，我认为你会想做一些事情，比如将字体渲染到画布上，然后使用像素信息来生成动画序列。一个简单的算法可以从左到右进行追踪，要找出单个笔划路径要困难得多，但这也是可行的。

你没有提到任何关于什么平台或任何时间限制的想法，所以很难比这更接近。

# asp-classic - 十六进制 1F 作为字符串分隔符

> ID：13847074
> 
> 赞同：0
> 
> 时间：2012-12-12T19:24:10.103
> 
> 标签：asp-classic, hex

如何拆分由“”分隔的字符串（从非标准 Web 服务返回）（在引号之间，这就是它在浏览器或文本文件中的样子）？它应该是Hex 1F。在我的代码中，如果我用“”分割，它可以工作。我尝试了 FieldSeparator = Hex(1F), 0x1F，没有任何效果（只有“”才有意义，我不想转换为十进制）。它不会那么糟糕，但我还需要除以 1E 并且我还没有找到一个（复制和粘贴并在我的代码中使用）。而且我还想了解为什么 1F（十六进制的“1”和“15”）看起来像那样......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:27:30.777

您可以使用 chr 函数，[请参阅此处](http://www.w3schools.com/vbscript/func_chr.asp)获取获取角色的帮助。

```
dim array_var, input_string

array_var = split(input_string, CHR(&H1F)) 
```

我不知道你是否熟悉 &H.. 语法，这是 VBScript 等价于其他语言中的 0x.. 语法。

# ruby-on-rails - 带有 Ruby on Rails 的 jQuery UI - 304 未修改处理消息 - 网页加载速度慢

> ID：13847078
> 
> 赞同：1
> 
> 时间：2012-12-12T19:24:25.150
> 
> 标签：ruby-on-rails, jquery-ui, ruby-on-rails-3.2

# 问题：

的添加`jQuery UI 1.9`导致网页***加载时间变慢***`Ruby on Rails 3.2`。

 *# 处理消息：

```
Started GET "/assets/jquery-ui-1.9.2.custom/development-bundle/ui/minified/i18n/
jquery.ui.datepicker-tj.min.js?body=1" for *[localhost]*
Served asset /jquery-ui-1.9.2.custom/development-bundle/ui/minified/i18n/jquery.
ui.datepicker-tj.min.js - 304 Not Modified (15ms) 
```

# 问题：

此处理消息确实会重复出现。如何以及在哪里可以设置处理消息`304 Not Modified`？*

# oracle - 显示输入的命令以运行触发器

> ID：13847079
> 
> 赞同：0
> 
> 时间：2012-12-12T19:24:30.477
> 
> 标签：oracle, plsql, triggers

我试图弄清楚如何显示用户输入的插入语句。我希望它在“请更新插入语句”文本打印后显示。通过在线阅读大量内容，我发现您可以通过输入“/”符号以及运行此查询 'SELECT * FROM gv$sql WHERE SQL_ID = IDENT_CURRENT('gv $sql')'。我尝试在触发器中使用立即执行语句，使用 dbms_output.put_line(/)，并简单地使用 t0_char('/'); 在查询中，如下所示。有小费吗？

```
set serveroutput on
CREATE or REPLACE trigger before_insert_t
before insert on reservations
for each row

DECLARE
rooms_remaining number(5,2);

BEGIN

select roooms_rem into rooms_remaining from reservations where roomno=:new.roomno;

if rooms_remaining = 0 then

    dbms_output.put_line('Insertion now allowed because room ' || :new.roomno || ' is booked!' );
dbms_output.put_line('Please update the insert statement');
--  to_char('/');
    dbms_output.put_line('insert into reservations values ' || :new.roomno  );
--  EXECUTE IMMEDIATE sql_stmt;
end if;
END;
/
show errors
insert into reservations values (99,9); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:49:21.043

```
CREATE or REPLACE trigger before_insert_t
before insert on TEST_TAB1
for each row    
DECLARE
  sql_insert varchar2(1000);    
BEGIN    
  select sql_text into sql_insert 
    from (select sql_text 
            from v$sql 
            where upper(sql_text) like 'INSERT INTO TEST_TAB1%'
            order by first_load_time desc)
   where rownum=1;  
  dbms_output.put_line('Inserting into table SQL is '||sql_insert);    
END;
/

SQL> set serveroutput on
SQL> insert into TEST_TAB1 values ('Hello');
1 rows inserted.
Inserting into table SQL is insert into TEST_TAB1 values (:"SYS_B_0") 
```

您排序并按降序对其进行排序，然后选择第一行，如果有多个s `FIRST_LOAD_TIME`，这将是最新的语句。`INSERT``INSERT`

# bonsaijs - 动态更改盆景代码

> ID：13847084
> 
> 赞同：0
> 
> 时间：2012-12-12T19:24:55.210
> 
> 标签：bonsaijs

我有这部分代码

```
<script>
    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'getNewUsers.php',false);
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

    xhr.send();
    var json;
    if (xhr.readyState == 4 && xhr.status == 200) { // If file is loaded correctly.
        json = JSON.parse(xhr.responseText);
        alert(json.en);

    }
    else if(xhr.readyState == 4 && xhr.status != 200) { // En cas d'erreur !
        alert( ' Une erreur est survenue !\n\nCode :' + xhr.status + '\nTexte : ' + xhr.statusText);
    }
</script>
<script id="bs">
function Sector(x, y, radius, startAngle, endAngle) {
  SpecialAttrPath.call(this, {
    radius: 0,
    startAngle: startAngle,
    endAngle: endAngle
  });
  this.attr({
    x: x,
    y: y,
    radius: radius,
    startAngle: startAngle,
    endAngle: endAngle
  });
}

Sector.prototype = Object.create(SpecialAttrPath.prototype);
Sector.prototype._make = function() {

  var attr = this._attributes,
      radius = attr.radius,
      startAngle = attr.startAngle,
      endAngle = attr.endAngle;

  var startX, startY, endX, endY;
  var diffAngle = Math.abs(endAngle - startAngle);

  this.startX = startX = radius * Math.cos(startAngle);
  this.startY = startY = radius * Math.sin(startAngle);
  if (diffAngle < Math.PI*2) {
    endX = radius * Math.cos(endAngle);
    endY = radius * Math.sin(endAngle);
  } else { // angles differ by more than 2*PI: draw a full circle
    endX = startX;
    endY = startY - .0001;
  }

  this.endX = endX;
  this.endY = endY;

  this.radiusExtentX = radius * Math.cos(startAngle + (endAngle - startAngle)/2);
  this.radiusExtentY = radius * Math.sin(startAngle + (endAngle - startAngle)/2);

  return this.moveTo(0, 0)
    .lineTo(startX, startY)
    .arcTo(radius, radius, 0, (diffAngle < Math.PI) ? 0 : 1, 1, endX, endY)
    .lineTo(0, 0);

};

Sector.prototype.getDimensions = function() {
  var x = this.attr('x'),
      y = this.attr('y'),
      left = Math.min(x, x + this.startX, x + this.endX, x + this.radiusExtentX),
      top = Math.min(y, y + this.startY, y + this.endY, y + this.radiusExtentY),
      right = Math.max(x, x + this.startX, x + this.endX, x + this.radiusExtentX),
      bottom = Math.max(y, y + this.startY, y + this.endY, y + this.radiusExtentY);
  console.log(y, y + this.startY, y + this.endY, y + this.radiusExtentY)
  return {
    left: left,
    top: top,
    width: right - left,
    height: bottom - top
  };
};

PieChart.BASE_COLOR = color('red');

function PieChart(data) {
  this.angle = 0;
  this.labelY = 30;
  this.kolor = PieChart.BASE_COLOR.clone();
  var n = 0;
  for (var i in data) {
    this.slice(i, data[i], n++);
  }
}

PieChart.prototype = {
  slice: function(name, value, i) {

    var start = this.angle,
        end = start + (Math.PI*2) * value/100,
        // Increase hue by .1 with each slice (max of 10 will work)
        kolor = this.kolor = this.kolor.clone().hue(this.kolor.hue()+.1);

    var s = new Sector(
      400, 200, 150,
      start,
      end
    );

    var animDelay = (i * 200) + 'ms';

    var label = this.label(name, value, kolor);

    label.attr({ opacity: 0 });

    s.stroke('#FFF', 3);
    s.fill(kolor);

    s.attr({
      endAngle: start,
      radius: 0
    }).addTo(stage).on('mouseover', over).on('mouseout', out);
    label.on('mouseover', over).on('mouseout', out);

    function over() {
      label.text.attr('fontWeight', 'bold');
      label.animate('.2s', {
        x: 40
      });
      s.animate('.2s', {
        radius: 170,
        fillColor: kolor.lighter(.1)
      }, {
        easing: 'sineOut'
      });
    }

    function out() {
      label.text.attr('fontWeight', '');
      label.animate('.2s', {
        x: 30
      });
      s.animate('.2s', {
        radius: 150,
        fillColor: kolor
      });
    }

    s.animate('.4s', {
      radius: 150,
      startAngle: start,
      endAngle: end
    }, {
      easing: 'sineOut',
      delay: animDelay
    });

    label.animate('.4s', {
      opacity: 1
    }, { delay: animDelay });

    this.angle = end;
  },

  label: function(name, v, fill) {

    var g = new Group().attr({
      x: 30,
      y: this.labelY,
      cursor: 'pointer'
    });

    var t = new Text(name + ' (' + v + '%)').addTo(g);
    var r = new Rect(0, 0, 20, 20, 5).fill(fill).addTo(g);

    t.attr({
      x: 30,
      y: 17,
      textFillColor: 'black',
      fontFamily: 'Arial',
      fontSize: '14'
    });

    g.addTo(stage);
    this.labelY += 30;

    g.text = t;

    return g;
  }
};

new PieChart({
  English: json.en,
  French: 20,
  German: 30,
  Dutch: 5,
  Spanish: 19,
  Others: 18
})

</script> 
```

问题是我想使用 Json 动态更改饼图，在 demi 中它以整数显示，但在这里它也是一个整数。这是导致渲染饼图问题的行。

```
new PieChart({
      English: json.en, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:46:48.347

BonsaiJS 在单独的执行环境（主要是工作人员）中执行，因此它无法访问`json`在 BonsaiJS 电影代码（在您的示例中`<script id="bs">`）的外部（在您的情况下为变量）定义的对象。

您可以在此处阅读有关 BonsaiJS 的特殊执行的信息：http: [//docs.bonsaijs.org/overview/Execution.html](http://docs.bonsaijs.org/overview/Execution.html)。如果您想将数据从您的页面传递到 Bonsai 电影执行，您可以执行以下操作：

1.  Dynamically communicate through `sendMessage` with the execution context (described here: [http://docs.bonsaijs.org/overview/Communication.html](http://docs.bonsaijs.org/overview/Communication.html))
2.  If you just have to pass data into your context once you can do that through `bonsai.run(myNode, {myJson: json});` and access it from within your movie code through `stage.options.myJson` (documented on the bottom of [http://docs.bonsaijs.org/overview/Execution.html](http://docs.bonsaijs.org/overview/Execution.html)).

You also have the third option to move the XMLHttpRequest code into the movie-code and do the request from there. Every client-side bonsai execution context (worker, iframe) does support that.

# apache - RewriteRule 后的 Apache 重定向

> ID：13847089
> 
> 赞同：2
> 
> 时间：2012-12-12T19:25:16.503
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, rewrite

我正在尝试重定向到网站的“移动”版本，通过以下方式完成：

```
RewriteCond %{HTTP_USER_AGENT} "ipad|iphone|ipod" [NC]
RewriteCond %{HTTP_COOKIE} !^.*mobile.*$ [NC]
RewriteRule ^$ /?m=t [L,R=302,co=mobile:true:.domain.com]

RewriteCond %{HTTP_USER_AGENT} "ipad|iphone|ipod" [NC]
RewriteCond %{HTTP_COOKIE}   ^.*mobile=true.*$ [NC]
RewriteCond %{QUERY_STRING} !(^|&)m=t(&|$) [NC]
RewriteRule ^$ /?m=t [L,R=302,co=mobile:true:.domain.com,QSA] 
```

现在这适用于根。但由于该网站严重依赖重写，如果我修改

```
RewriteRule ^$ /?m=t [L,R=302,co=mobile:true:.domain.com,QSA] 
```

到

```
RewriteRule ^(.*)$ /$1?m=t [L,R=302,co=mobile:true:.domain.com,QSA] 
```

它会给我正确的重定向，但之前没有任何重写。

所以如果我之前说过重写

```
RewriteRule ^product/shimano$ /index.php?product_cat=shimano [L] 
```

修改后的行会给我 /index.php?m=t&product_cat=shimano 而不是 /product/shimano?m=t

我错过了什么？我一直试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:05:46.230

尝试先重定向，然后重写。也就是说，将这些移动检查规则放在重写之前。

这样，如果它是移动的，并且 m=t 不存在，它将执行 302 重定向并添加 m=t。然后会再次出现，跳过这些规则（因为 m=t 在那里），并继续进行正常的重写。

我不完全确定上面的第一组规则。他们可能还需要第二组中的那一行，用于查询字符串检查 m=t，以避免无限循环。基本上，如果它已经有 m=t，那么它就不会再这样做了。

# java - 如何查看 JVM 加载了哪些本机 dll？

> ID：13847090
> 
> 赞同：1
> 
> 时间：2012-12-12T19:25:21.277
> 
> 标签：java, dll, jvm, libpng

我在 IntelliJ 中调试应用程序，JVM 抱怨 libpng 的版本：

```
QSystemTrayIcon::setVisible: No Icon set
libpng warning: Application was compiled with png.h from libpng-1.4.0
libpng warning: Application  is  running with png.c from libpng-1.2.46
libpng error: Incompatible libpng version in application and library 
```

我想检查在我的 java 程序执行期间正在加载哪个 libpng 文件（即文件的完整路径）。我怎样才能做到这一点？

下一个问题是：如何确保它加载 libpng 1.4.0 版（它在我的系统上，但显然它首先找到 libpng 1.2.46）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:46:16.260

在 Unix 上，您可以查看所有映射。如果加载了共享库，您可以在`/proc/{pid}/maps`例如下看到它

```
address           perms offset  dev   inode   pathname
08048000-08056000 r-xp 00000000 03:0c 64593   /usr/sbin/gpm
08056000-08058000 rw-p 0000d000 03:0c 64593   /usr/sbin/gpm
08058000-0805b000 rwxp 00000000 00:00 0
40000000-40013000 r-xp 00000000 03:0c 4165    /lib/ld-2.2.4.so
40013000-40015000 rw-p 00012000 03:0c 4165    /lib/ld-2.2.4.so
4001f000-40135000 r-xp 00000000 03:0c 45494   /lib/libc-2.2.4.so
40135000-4013e000 rw-p 00115000 03:0c 45494   /lib/libc-2.2.4.so
4013e000-40142000 rw-p 00000000 00:00 0
bffff000-c0000000 rwxp 00000000 00:00 0 
```

[http://linux.die.net/man/5/proc](http://linux.die.net/man/5/proc)

# c# - 继承的 Web 服务器控件找不到对父程序集的引用？

> ID：13847092
> 
> 赞同：1
> 
> 时间：2012-12-12T19:25:30.733
> 
> 标签：c#, asp.net

我将 ASP.Net 与 Visual Studio 2012/.NET 4.5 一起使用，情况如下：

我有一个从 WebControl 继承的名为 CDASPControl 的抽象类的程序集，它包含各种辅助方法，以及从它继承的其他控件。

我有一个名为 CDASPGrid 的程序集，它继承自上述控件。

当我将 CDASPGrid 放到我的网页中时，它添加了控件就好了，并且添加了注册页面指令没有问题：

```
<%@ Register Assembly="CDASPGrid, Version=0.0.0.0, Culture=neutral, PublicKeyToken=" Namespace="Controls" TagPrefix="cdc" %>

<cdc:CDASPGrid ID="CDASPGrid1" runat="server" /> 
```

当我去编译我的应用程序时，我收到以下错误：

> 类型“Controls.CDASPControl”在未引用的程序集中定义。您必须添加对程序集“CDASPControl，Version=0.0.0.0，Culture=neutral，PublicKeyToken=”的引用。

在引用中，CDASPGrid 引用存在，但 CDASPControl 引用不存在。

当我手动将 CDASPControl 引用添加到网站时（如果这有什么不同，它就是一个 Web 项目），它编译并运行得很好。

有没有办法让网站自动获取额外的参考，而无需手动添加？

我注意到第 3 方控件执行此操作，例如 DevXPress ASP Gridview 控件将根据需要添加对 web.config 的任何必要引用。有人能指出我正确的方向，以便我可以学习如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:48:49.703

所以，事实证明，我不得不手动处理这个。使用 EnvDTE 程序集，我能够在设计时通过控件设计器获取项目引用，并将缺少的引用添加到项目引用中。此外，我还能够修改 web.config 以通过控件设计器将程序集添加到程序集列表中。

不是一个理想的解决方案，但效果很好。

这是让我走上这条道路的文章： [如何自动注册 Web 服务器控件所需的 HTTP 处理程序](http://www.tkachenko.com/blog/archives/000686.html)

# iphone - 将 Static-TableView-Cells 添加到 UIViewcontroller 的最佳方法？

> ID：13847093
> 
> 赞同：7
> 
> 时间：2012-12-12T19:25:33.320
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我想在我的应用程序中添加一个 tableview-look-a-like-login，但它似乎并不容易实现。我尝试使用不止一种方法来实现我的目标，但我不确定哪种解决方案是最好的。

例如，Dropbox 和 Facebook 都有这样的登录页面。

这是我的 3 种方法：

1.  *我在视图中添加了 2 个 UITextfields（无边框）并放置了一个 . png 后面，看起来像一个 tableviewcell。（不是最好的方法，因为我想使用真正的表格视图）*

2.  *我在 ViewController 中添加了一个容器视图，在其中放置了一个带有静态表视图的表视图。这里的问题是，我不知道如何访问我的视图控制器中的信息？*

3.  *我在 ViewController 中添加了一个 tableview 并使用了动态单元格。将委托和数据源的出口连接到我的视图控制器，并使用委托和数据源方法对其进行初始化。这里的问题是，我不能在 uiviewcontroller 中使用静态表视图。*

有没有更好的方法来解决这个问题？我真的很想知道如何以更优雅的方式做到这一点。

**编辑**：

一个月前，ContainerViewController 基本上为我解决了这个问题。将一个嵌入主控制器后，您可以通过该`prepareForSegue`函数访问它，并为该特定控制器定义一个基于协议的接口，以与嵌入式控制器进行交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T11:43:11.677

如果您想在常规中使用静态单元格`UIViewController`，只需添加静态单元格并在界面构建器中按照您喜欢的方式设计它们，然后将表格单元格连接为**强**IB 插座（弱不起作用，确保它们被强引用） . 如果您有几个表格单元格，这将完美无缺。然后将视图控制器设置为平板视图的数据源，实现`-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`返回单元格数量并实现`-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`返回指定索引路径的强引用单元格实例。我已经在我的视图控制器中将这种方法用于一个简单的表格视图，它有四个单元格，并且运行良好。对于大型动态数据集，我绝对不推荐这种方法，但对于小型静态表，这可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:46:40.247

我有一个想法如何解决这个问题。我认为这是一种干净的方式。您不需要**此**控制器的情节提要。

让你的控制器子类 UITableViewController 像这样：

```
@interface YourViewController : UITableViewController 
```

然后在您的 viewDidLoad 中创建单元格的实例：

```
- (void) viewDidLoad {
    usernameCell = [YourTextFieldCell new];
    passwordCell = [YourTextFieldCell new];
} 
```

当然是你自己的`YourTextFieldCell`UITableViewCell 的子类，可能是这样的：

```
@implementation YourTextFieldCell {
    UITextField textField;
}
- (id) init {
    self = [super init];
    if (self) {
        // Adjust the text's frame field to your liking
        textField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 200, 20)];
        [self addSubview:textField];
    }
}
// A getter method to access the textfield from the outside
- (UITextField *) textField {
    return textField;
}

@end 
```

回到`YourViewController`：

```
- (NSInteger) tableView:(UITableView *) tv numberOfRowsInSection:(NSInteger) section {
    return 2;
}
- (UITableViewCell *) tableView:(UITableView *) tv cellForRowAtIndexPath:(NSIndexPath *) indexPath {
    if (indexPath.row == 0) {
        return usernameCell;
    } else if (indexPath.row == 1) {
        return passwordCell;
    }
    return nil;
} 
```

你明白我要去哪里了吗？这就是我认为你应该这样做的方式！祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:28:57.443

我认为你的方法2是最好的。如果您需要从您的 UIViewController（将是父视图控制器）访问表视图控制器中的信息，您可以使用 self.childViewControllers.lastObject 获取对该表视图控制器的引用。在 UIViewController 子类的 viewDidLoad 方法中，如果需要，您可以使用以下行将自己设置为 table view 的委托：

```
[[(UITableViewController *)self.childViewControllers.lastObject tableView] setDelegate:self]; 
```

这样，您可以在视图控制器中实现 tableView:didSelectRowAtIndexPath: 方法，这将获得我猜您需要的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:43:19.373

***免责声明***- 此答案适用于任何大小的`UITableView`，但如果您只是制作登录视图，Tom 的答案将非常有效。

我不确定这是否会有所帮助，但我为此所做的就是创建自己的`UITableView`-esque 子类和`UITableViewCell`-esque 子类。

这可能不是你想听到的，但我发现我所做的真的很有帮助，因为我现在已经使用过很多次了。基本上，你有一个 UIView 具有不同类型的风格方法（10.0f - 20.0f`cornerRadius`和 1px 边框（除以`UIScreen`视网膜的 scale 属性）。至于单元格，你需要一个全尺寸`UIButton`的它通过委托或通过在表格视图的类中设置目标和标记来响应您的表格视图的触摸事件。

最后，您将拥有一个委托系统，就像`UITableView`用于构建特定表的信息一样。

简而言之，您需要：

*   2`UIView`个子类（TableView 和 TableViewCell）
*   2 委托/协议（TableViewDataSource 和 TableViewDelegate）

可选

*   1 个委托（TableViewCellResponseDelegate）
*   1`NSObject`个子类（包含每个单元格所需的所有信息 - 易于使用）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T22:13:10.370

如果您使用您的选项 2）使用情节提要并有一个 ContainerView 包含您自己的 UITableViewController 子类和静态单元格，那么您可以`prepareForSegue:`在父 ViewController 中实现该方法以引用 UITableViewController （它将是segue) 并且在必要时将自身传递给 UITableViewController 子类（它应该通过弱引用来保持它）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-15T10:26:02.047

我发现 Can 的解决方案是最好/最简单的，但不幸的是它在 XCode 5.1 中中断了——

我找到了一个基于相同基本思想的解决方法，但不幸的是需要更多的参与： http: [//www.codebestowed.com/ios-static-tableview-in-uiviewcontroller/](http://www.codebestowed.com/ios-static-tableview-in-uiviewcontroller/)

总而言之，您可以将 TableViewCells 直接添加到视图（并从中创建 IBOutlets 等），但为了使它们正确“移动”到 TableView，您需要在代码中将它们从视图中删除，并且您还需要在 IB 中设置自动布局约束。

# entity-framework - 构造最终 SQL 时是否可以强制 EF（代码优先）忽略派生类型

> ID：13847096
> 
> 赞同：2
> 
> 时间：2012-12-12T19:25:50.857
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

如果我有这个作为我的 TPT 模型：

```
public class Foo
{
    public Int32 Id { get; set; }
    public string Text { get; set;  }
}

[Table("Bars")]
public class Bar : Foo
{
    public string MoreText { get; set; }
} 
```

和这样的派生 DbContext：

```
public class MyContext : DbContext
{
    public DbSet<Foo> Foos { get; set; }
    public DbSet<Bar> Bars { get; set; }
} 
```

然后，当我对 Foo 执行查询时，最终的 SQL 将包含到 Bar 的外部连接。

例如：

```
uisng(var context = new MyContext())
{
    Console.WriteLine(context.Foos.ToString());
} 
```

将导致这作为最终的 SQL 语句

```
SELECT
CASE WHEN ( NOT (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL))) THEN
'0X' ELSE '0X0X' END AS [C1],
[Extent1].[Id] AS [Id],
[Extent1].[Text] AS [Text],
CASE WHEN ( NOT (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL))) THEN
CAST(NULL AS varchar(1)) ELSE [Project1].[MoreText] END AS [C2]
FROM  [dbo].[Foos] AS [Extent1]
LEFT OUTER JOIN  (SELECT
        [Extent2].[Id] AS [Id],
        [Extent2].[MoreText] AS [MoreText],
        cast(1 as bit) AS [C1]
        FROM [dbo].[Bars] AS [Extent2] ) AS [Project1] ON [Extent1].[Id] = [Proj
ect1].[Id] 
```

我确实理解为什么 --- 这样做可以让我做类似的事情：

```
foreach(var x in context.Foos)
{
    if(x is Bar) Console.WriteLine("Impressive");
    else Console.WriteLine("Not so much");
} 
```

但是，正如您可以想象的那样，这种对基类的查询会很快导致 SQL Server 处理的噩梦般的查询。因此问题。

是否可以通知 Linq 到 EF 5.0 它应该只带回基本类型而不是派生类型。因此使最终的 SQL 更简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:26:24.800

不适用于 Linq to Entity。Linq to entity 提供`OfType`，但它使用 .NET 规则进行类型继承，因此如果您使用`OfType<Foo>`，您仍然会同时获得`Foo`和`Bar`实例，因为`Bar`它属于 .NET 类型`Foo`。

实体 SQL（在代码优先和 DbContext API 中不可用 - 您必须通过 ObjectContext API 访问它）更强大，因为它不依赖于 Linq 提供的有限功能。它提供`OFTYPE ONLY`了只能返回实例的构造，`Foo`但我相信它不会使查询更简单，因为要找到哪些类型是唯一的`Foo`，而不是`Bar`它仍然必须进行连接。如果您希望获得的实例`Foo`即使对象是`Bar`您也无法使用 EF 实现 - 实体类型是不可变的。您不能更改查询中的类型。

使用和 Linq 最简单的解决方法`OfType`是定义`Foo`为抽象并添加额外的派生类型。您将始终查询一个真实类型，`OfType`并且它应该确保您没有与不必要的表的连接。

# python - 如何更改pylab创建的图像的位置和大小

> ID：13847099
> 
> 赞同：0
> 
> 时间：2012-12-12T19:26:05.740
> 
> 标签：python, matplotlib, window

当我在 Linux 下使用 pylab 和 python 来绘制和显示图像时，如下例所示：

```
img = pylab.imread(filename)
pylab.imshow(img)
pylab.show()
pylab.draw() 
```

当我这样做时，会弹出一个带有图像的新窗口。

我的问题：我如何影响位置和大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:38:48.160

The whole point of `pylab`'s Image stuff is that you get a `np.array` of pixel data.

So, you can just do this:

```
img = pylab.imread(filename)
img = img * myTransformationMatrix
pylab.imshow(img) 
```

If that immediately tells you what you need to know, great. If you don't understand what matrix multiplication has to do with rotating, translating, and scaling images, `pylab` is probably not the image library you want to use. Just use PIL.

If you're trying to manipulate the windows, rather than the images, `pylab` is *really* not meant for that.

You probably want to use `TkInter`, the windowing library that comes built-in with Python. It's can be ugly, clunky, and slow, and some advanced uses are either impossible or require you to write Tcl code instead of Python… but for simple stuff, it's not going to be a step down from `pylab`. In fact, it's what `pylab` uses under the covers.

If you start to hit the limits of `TkInter`, it's time to look at an external windowing library. You can go with a full GUI framework like Gtk+, Qt, or wx. The Python bindings to the three aren't that different; the important difference is that in the slightly different models of how GUIs work, so read about them and pick the model you like best. Alternatively, you can use something like `pygame`, which does very bare-bones windowing (the kind of thing games would need, rather than, say, word processors).

# java - Android HttpClient 和 Cookie

> ID：13847102
> 
> 赞同：7
> 
> 时间：2012-12-12T19:26:17.987
> 
> 标签：java, android, cookies, httpclient

我对 Android 中的 HttpClient 有一个问题：通过使用以下代码，我想通过 webview 登录来使用之前已经设置的 cookie。所以登录数据应该在那里并且确实在那里，我测试了它。但是当我在 httppost 或 httpget 中使用 cookie 时，它​​不会使用登录数据。但这些 cookie 实际上应该足以接收需要登录的页面，不是吗？我不确定是否需要以特殊方式将 cookie 发送到服务器，或者是否足以将其加载到 httpcontext 中。这是代码：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
CookieStore lCS = new BasicCookieStore();

if (CookieManager.getInstance().getCookie(pUrl) != null) {  
    String cookieString = CookieManager.getInstance().getCookie(pUrl);

    String[] urlCookieArray = cookieString.split(";");
    for (int i = 0; i < urlCookieArray.length; i++) {           
        System.out.println(urlCookieArray[i]);          
        String[] singleCookie = urlCookieArray[i].split("=");
        Cookie urlCookie = new BasicClientCookie(singleCookie[0], singleCookie[1]);
        lCS.addCookie(urlCookie);           
    }

}

HttpContext localContext = new BasicHttpContext();
httpclient.setCookieStore(lCS);
localContext.setAttribute(ClientContext.COOKIE_STORE, lCS);

HttpPost httppost = new HttpPost(pUrl);        

    // get the url connection       
try {

    StringBuilder sb = new StringBuilder();     
    HttpResponse response = httpclient.execute(httppost, localContext);     
    InputStream is = response.getEntity().getContent();         
    InputStreamReader isr = new InputStreamReader(is); 
```

如果我运行代码，我只会收到该站点的登录页面，所以它不接受 cookie。

提前感谢您的帮助

问候，蒂莫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T11:46:52.803

I had the same problem and I used similar approach as in the question with no luck. The thing that made it work for me was to add the domain for each copied cookie. (BasicClientCookie cookie.setDomain(String))

My util function:

```
public static BasicCookieStore getCookieStore(String cookies, String domain) {
    String[] cookieValues = cookies.split(";");
    BasicCookieStore cs = new BasicCookieStore();

    BasicClientCookie cookie;
    for (int i = 0; i < cookieValues.length; i++) {
        String[] split = cookieValues[i].split("=");
        if (split.length == 2)
            cookie = new BasicClientCookie(split[0], split[1]);
        else
            cookie = new BasicClientCookie(split[0], null);

        cookie.setDomain(domain);
        cs.addCookie(cookie);
    }
    return cs;
}

 String cookies = CookieManager.getInstance().getCookie(url);
 BasicCookieStore lCS = getCookieStore(cookies, MyApp.sDomain);

 HttpContext localContext = new BasicHttpContext();
 DefaultHttpClient httpclient = new DefaultHttpClient();
 httpclient.setCookieStore(lCS);
 localContext.setAttribute(ClientContext.COOKIE_STORE, lCS);
 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T23:49:12.780

如果您仍然遇到此问题，请注意给定的 cookie，有些可能格式不正确，请检查以下两个站点：

[http://www.codeproject.com/Articles/3106/On-The-Care-and-Handling-of-Cookies](http://www.codeproject.com/Articles/3106/On-The-Care-and-Handling-of-Cookies)

这个帮助了我： [获取“Set-Cookie”标头](https://stackoverflow.com/questions/13302245/getting-set-cookie-header)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:59:28.553

看来您正在正确复制 cookie，通常您不需要为 HttpClient 执行任何特殊操作来发送 cookie。但是，其中一些可能绑定到会话，并且当您打开与 HttpClient 的新连接时，您会打开一个新会话。服务器可能会忽略与当前会话不匹配的 cookie。如果会话 ID 在 cookie 中并且您能够进入同一个会话，这*可能会起作用，但您确实需要确切地知道服务器在做什么。*

# php - 仅在不包含时显示？

> ID：13847103
> 
> 赞同：5
> 
> 时间：2012-12-12T19:26:19.560
> 
> 标签：php, include

我有一个 php 脚本，我希望它只有在您在浏览器中查看页面时才会显示此特定文本，并且它不包含在另一个脚本中。

例如

```
//foo.php
<?php
   if(!included){
      echo "You can only see this if this is the page you're viewing";
   }
?>

//bar.php
<?php
  include 'foo.php';
?> 
```

现在，当您查看“bar.php”时，您不应该看到文本.. 但是如果您打开 foo.php，您将.. 我将如何执行此操作..？如果可能的话..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T19:29:11.197

本身不可能，但如果您在网站上公开 php 页面，例如`example.com/bar.php`，您可以检查`$_SERVER['SCRIPT_FILENAME']`您是否使用 apache。

```
if (basename(__FILE__) != basename($_SERVER['SCRIPT_FILENAME'])) {
   //this is included
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T19:29:23.790

在 bar.php 中：

```
<?php
    $included = true;
    include 'foo.php';
?> 
```

在 foo.php 中：

```
if(!isset($included)){
      echo "You can only see this if this is the page you're viewing";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:30:13.197

你应该看到`array get_included_files(void)` [http://php.net/manual/en/function.get-included-files.php](http://php.net/manual/en/function.get-included-files.php)

它为您提供了包含文件的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:33:27.557

“我想要它，这样人们就可以使用 include 'foo.php'.. 这是一个类，我不希望他们使用比他们更多的代码.. 我想要大部分代码上课。”

**既然你需要这个，我会推荐你​​ class_exists 函数。** [http://php.net/manual/en/function.class-exists.php](http://php.net/manual/en/function.class-exists.php)

这样您就可以检查您的类是否已定义，无需检查文件是否包含在内。因为，如果它被定义，它的文件肯定被包含在内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T19:35:03.510

使用 include_once() 或 require_once() 函数始终是一个好习惯。这样可以确保文件只包含一次。

在您包含的页面中定义一个常量：

```
 if(defined("ALREADY_LOADED")) {
     echo "this page was loaded already";
     die("ciao");
 }
  else {
     define("ALREADY_LOADED", 1);
 } 
```

现在，无论您在哪里需要此控件，只需在加载文件之前定义：

```
 define("ALREADY_LOADED", 1); 
```

# registry - 从多台 PC 获取注册表项值

> ID：13847107
> 
> 赞同：2
> 
> 时间：2012-12-12T19:26:40.407
> 
> 标签：registry

我试图在域中查找程序版本低于要求的计算机。

因此，我需要从多个 Windows 设备获取应用程序版本号的注册表项。

理想情况下，该脚本将导入具有多个机器名称的文件，登录并将注册表项值“版本”从 HKEY_LOCAL_MACHINE\SOFTWARE\Program\Name 导出到机器名称旁边的不同文件中。（理想情况下，它还会输出进程失败的机器）

我已经搜索无济于事。

干杯。

# scala - 如何使用 SBT 编译测试而不运行它们

> ID：13847109
> 
> 赞同：106
> 
> 时间：2012-12-12T19:26:41.640
> 
> 标签：scala, sbt, build-tools

有没有办法在不运行 SBT 的情况下构建测试？

我自己的用例是使用 scalac 插件对测试代码运行静态分析。另一个可能的用例是使用单独的运行程序运行部分或全部测试代码，而不是内置在 SBT 中的运行程序。

理想情况下，这个问题会有一个适用于任何 SBT 项目的解决方案。例如，Maven 有一个 test-compile 命令，可以用来编译测试而不运行它们。如果 SBT 也有同样的东西，那就太好了。

不太理想但仍然非常有用的是涉及修改项目构建文件的解决方案。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-12-12T19:37:14.060

只需使用`test:compile`命令。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-01-30T10:55:57.490

`test:compile`适用于编译单元测试。

要编译集成测试，您可以使用`it:compile`.

在每次文件更改时持续编译的另一个提示：`~test:compile`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-19T22:10:20.730

我们有一个`build.sbt`用于多个项目的文件。Doing`sbt test:compile`编译了每个项目的测试并花费了 30 多分钟。

我发现我只能为`xyz`通过以下方式命名的特定项目编译测试：

```
sbt xyz/test:compile 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-04-30T22:58:47.720

使用 sbt 1.5.0 及更高版本会`test:compile`返回弃用警告。

使用`Test / compile`.

（[文档](https://www.scala-sbt.org/1.x/docs/Testing.html#Other+tasks)）

# javascript - IE9，如何从opener打开的popup窗口中引用window，opener刷新后自己

> ID：13847116
> 
> 赞同：0
> 
> 时间：2012-12-12T19:27:04.947
> 
> 标签：javascript, internet-explorer

我知道这确实是一个奇怪的情况，但这是事实。

我在页面中有一个 iframe - **Frame-A** ，我将从**Frame** -A打开一个名为**Win-B**的弹出窗口，因此，**Win-B**是**Frame-A**的子级。

 ******```
win_b = window.open(...); 
```

我可以在 Win-B 中使用window.opener 在**Frame** **-** **A**中调用 javascript ，我可以在 Frame-A 中使用**win_b.someFunciton()**在**Win-B**中调用 javascript 。

 ******现在，我刷新**Frame-A**所在的页面。Frame **-A**丢失了对 win_b 的引用，**Win-B**丢失了**window.opener**的引用。但是，我仍然可以从**Frame-A调用****Win-B**中的 javascript 函数，因为我可以在同一个打开的窗口上再次执行**window.open(..)**以再次获取引用。但是我无法从**Win-B**调用 javascript 函数到**Frame-A**，我无法恢复**window.opener**！

 ******问题是我怎样才能再次取回**window.opener**的引用。基本上，在**Win-B中获取****Frame-A**参考。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:00:14.290

我真的只是在这里猜测，我还没有测试过，但是：你能否将 Frame-A 中的函数的引用从 Frame-A 传递到 Win-B：

`win_b.setCallback( callback );``callback`Frame-A 中的函数在哪里

在您刷新 Frame-A 并重新建立对 Win-B 的引用之后。********************

# c++ - 方法调用中抛出堆栈溢出异常

> ID：13847121
> 
> 赞同：1
> 
> 时间：2012-12-12T19:27:20.560
> 
> 标签：c++, exception, stack-overflow

我正在处理 C++ 中的一个问题，但是我遇到了堆栈溢出异常，我不知道为什么。主要方法调用problem28()，但第一行应该打印“检查”到我的输出，这没有发生。如果我将 gridsize 定义为 501 或更少，它运行良好，但除此之外，它会引发堆栈溢出异常。

任何帮助，将不胜感激。

```
#define right 0
#define down 1
#define left 2
#define up 3
#define gridsize 1001

int* next(int row, int col, int dir) {
    int* newPos = new int[2];
    newPos[0] = row;
    newPos[1] = col;
    switch(dir) {
    case right:
        newPos[1] += 1;
        break;
    case down:
        newPos[0] += 1;
        break;
    case left:
        newPos[1] -= 1;
        break;
    case up:
        newPos[0] -= 1;
        break;
    }
    return newPos;
}

int problem28() {
    cout << "check" << endl;
    int grid[gridsize][gridsize];
    for (int i = 0; i < gridsize; i++)
        for (int j = 0; j < gridsize; j++)
            grid[i][j] = 0;
    int* pos = new int[2];
    pos[0] = pos[1] = gridsize / 2;
    int dir = right;

    for (int i = 1; i <= 1001; i++) {
        grid[pos[0]][pos[1]] = i;
        pos = next(pos[0], pos[1], dir);
        int* npos;

        npos = next(pos[0], pos[1], (dir + 1) % 4);
        if (grid[npos[0]][npos[1]] == 0)
            dir = (dir + 1) % 4;
    }
    cout << "generated grid" << endl;

    int total = 0;
    for (int i = 0; i < gridsize; i++) {
        total += grid[i][i];
        total += grid[i][gridsize - i - 1];
    }
    total -= grid[gridsize / 2][gridsize / 2];

    return 0;
}

int main() {
    problem28();

    system("pause");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:32:34.220

与整体内存相比，您的堆栈通常非常有限。由于`problem28`似乎不是递归的，到目前为止，最有可能起作用的最简单的修复方法是更改​​：

```
int grid[gridsize][gridsize]; 
```

到：

```
static int grid[gridsize][gridsize]; 
```

这将静态地而不是本地地为该数组分配内存，这通常意味着它不再在堆栈上。

另一种可能性是使用 a`std::vector`而不是数组。这通常会从空闲存储而不是本地分配其内存。小问题是`vector`（本身）不提供 2D 寻址，因此您必须单独处理（例如，使用我在上一个答案中发布的[array_2D](https://stackoverflow.com/a/13655942/179910)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:31:24.153

> 如果我将 gridsize 定义为 501 或更少，它运行良好，但除此之外，它会引发堆栈溢出异常。

整个`grid`数组都存在于堆栈中。如果`int`是 32 位宽，`int[500][500]`大约需要 1MB，这恰好是某些操作系统上的默认最大堆栈大小。

您可以增加堆栈的大小，或者（最好）`grid`在堆上分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:32:14.640

问题似乎在这里：

```
int grid[gridsize][gridsize]; 
```

您是否尝试过动态分配此二维数组？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:13:23.153

我建议您使用诸如 Application Verifier 之类的程序来查找导致崩溃的问题：

[应用程序验证器下载](http://www.microsoft.com/en-us/download/details.aspx?id=20028)

学习如何调试软件并了解正在发生的事情很重要。请在调试器（Visual Studio、Eclipse）中运行您的代码并查看它停止的位置。如果您使用了应用程序验证程序，那么它可能会在问题所在的地方停止。看看变量，看看它们是否有意义。看看你是否正在访问你不应该访问的内存位置。

要将 Application Verifier 与 Visual Studio 一起使用，请安装它，然后在 C:\Windows 的 System32 文件夹中找到 appVerifier.exe。然后打开文件并将其指向您的可执行文件。启用您认为正确的检查。然后在 Visual Studio 中运行它。

对于 Linux，您可以（并且应该）使用 valgrind 来检测此类问题

# java - 理解（字符串 args[]）

> ID：13847123
> 
> 赞同：2
> 
> 时间：2012-12-12T19:27:33.167
> 
> 标签：java, args

> **可能重复：**
> [什么是“String args[]”？在爪哇](https://stackoverflow.com/questions/890966/what-is-string-args-in-java)

所以我最近（好吧，三天前）开始自学 Java，除非你算上 HTML/CSS，否则我以前的编程经验绝对为零。

现在，我一直在浏览书籍和在线教程，包括 Sun 教程。我不太明白`(string args[])`方法中的目的是什么。

我从网上看到的是，当使用控制台运行程序时，它会替换“>Java myprogram”之后的任何内容来代替“args”。

首先，这是正确的吗？如果是这样，你为什么要这样做？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:32:04.400

`String[] args`可以写成`String args[]`或者是你给程序的`String ... args`参数数组。

> 为什么要这么做？

所以你可以在命令行上给你的程序输入。它在 Java 程序中并不经常使用，但命令行实用程序接受参数是很常见的，例如

在这种情况下，`MyClass.java`是一个论点。

```
javac MyClass.java 
```

或者像下面这样有三个参数。

```
java -cp . MyClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:34:02.017

这或多或少是正确的。后面的每个空格分隔的单词都`java Program`存储到一个字符串数组中，该数组恰好被称为`args`.

有关如何使用此功能为您带来好处的示例：

```
public class Test {
    public static void main(String[] args)
    {
        if(args.length > 0)
        {
            System.out.println(args[0] + "\n");
        }
    }
} 
```

编译：

```
> javac Test.java 
```

然后运行它：

```
> java Test Yes 
```

“是”然后打印到您的屏幕上。

# php - 使用递归查找用户是否是另一个用户 php mysql 的引用者

> ID：13847125
> 
> 赞同：3
> 
> 时间：2012-12-12T19:27:42.060
> 
> 标签：php, mysql

我已经为这个问题苦苦挣扎了两天，但我仍然无法提出解决方案。我目前正在设计一个网站，用户可以通过他的会员注册其他用户，以便我们可以给他积分。该网站的主要游戏之一要求如果用户注册了另外两个用户，他的百分比等于 1。然后该函数必须递归检查这两个用户中的每一个，如果他们也注册了两个用户，然后将百分比增加到 3。因此，对于除第一个之外的每个级别，百分比必须增加 2；

这是一个小图表，向您展示它应该可以工作：

```
 [A]
                                    [B]             [C]
                                  [D] [E]         [F] [G]
                                [H][I] [j][k]   [l][m] [o][p] 
```

A代表我们要为其计算百分比的成员。他注册[B]和[C]他的百分比=1 B注册[D]和[E]百分比+=1.C在这里也注册[F]和[G]百分比+ =1.所以在这个级别的检查百分比将等于3。

这是我想出的功能，但它不完整，我很确定它不会工作。我卡住了，请帮助我。

```
function calcpercentage($id)
 {
  $count=0;
  $percent=1;
  $id1=$id;
  $sql="SELECT * from bs100049 WHERE RefId='$id1'";
  $checkh=mysql_query($sql) or die('error'.mysql_error());
  while($result=mysql_fetch_array($checkh)&& $count<=2)
  {
   $count++;
   $id1=$result['MemberId'];
   $percent++;
  }
 } 
```

因为我也在使用 mysql，所以它并不容易。我确信一旦我弄清楚了这个函数，我就可以编写一个函数来为每个用户动态地绘制上面的树。

这是一个更好的解释（我想在丹的回答之后发布，但我不能）这是这个网站的设计工作方式。只有现有成员是您的推荐人，您才能注册，因此在“会员”表中您的 id 和推荐人的将被存储。以这种格式（id，name，memberid，refid）。一旦您注册，您可以申请参加不同的游戏。bs100049 游戏要求您自己购买并注册 2 个用户。一旦完成，您可以确定您已经赚取 1%。如果且仅当您的两个注册用户都完成了您在上面所做的事情（他们每个人都注册了两个用户），那么百分比从 1 增加到 3，因此下一个百分比值将是 5，依此类推。如果用户购买了 bs100049 游戏，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:58:59.967

我认为要使其递归，您首先必须定义最终情况 - 当用户未注册 2 个用户时：

```
function calcpercentage($id){

    //SQL to get $count (number of users this user has referred) + also array of usr ids at this 'level'

    foreach($usr_ids as $usr_id){

        if($count<2){
            return 0;
        }else{
            return 1+calcpercentage($usr_id);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:59:54.897

这是我的方法。请注意，您应该考虑切换到 PDO 或 mysqli，因为不推荐使用 mysql 函数。为了这个例子，我已经使用了它们。您还必须确保您的数据确实形成了一棵树，否则您将陷入无限循环。

如果可以避免递归，请尝试。

我假设被推荐用户的 id 存在于表中名为 id 的列中。我还假设被推荐的用户永远不会超过两个，并将它们限制在 2 个。

```
function calc($id) {

    $sql = "SELECT * FROM bs100049 WHERE RefId='$id' LIMIT 2";
    $res = mysql_query($sql);

    if(mysql_num_rows($res) == 2) {
        // We have two referred users (1 point) and if calc returns 1 we add 1 for each user.

        $user1 = mysql_result($res, 0, 'id');
        $user2 = mysql_result($res, 1, 'id');

        return 1 + (1 * calc($user1)) + (1 * calc($user2));
    }
    // If we get here we have 0 or 1 referred users.
    return 0;
} 
```

# grails - 文件上传不保留值

> ID：13847126
> 
> 赞同：1
> 
> 时间：2012-12-12T19:27:43.840
> 
> 标签：grails, file-upload

我正在研究 Grails 过滤器，我需要将上传文件的内容保存在`after{}`过滤器中。我看到上传文件的“数据”在这里丢失了。您能否建议一种保留这些数据的方法？

# c++ - Heap / C++ 标准库使用 Under Green Hills INTEGRITY

> ID：13847127
> 
> 赞同：0
> 
> 时间：2012-12-12T19:27:57.323
> 
> 标签：c++, integrity, greenhills

我在针对 Marvell Monahans PXA 320 的 Green Hills INTEGRITY 5.0.10 下运行。对于开发，我使用的是 MULTI 4.2.3，我选择的语言是 C++。

我只是在学习 INTEGRITY 内存管理，并且想知道动态内存的使用。

我想使用 std::string、std::map 等。当然，这些都需要堆。我可以使用这些课程吗？更一般地说，我可以直接使用堆（新建/删除）吗？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:54:49.890

是的。我在 INTEGRITY 5.0.11 和 Multi 4.2.4 上开发，你可以使用所有这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:32:07.683

Green Hills 的 INTEGRITY OS 或 MULTI IDE 的目标不是超小型、资源严重受限的嵌入式微控制器，因此如果他们的专有 C++ 编译器不支持 STL 或一般堆，那么在他们的市场上他们不会走得太远. 以下网页似乎支持这一点：

[http://www.ghs.com/news/20030915_m40.html](http://www.ghs.com/news/20030915_m40.html)

[http://www.ghs.com/news/20041116_mobileye.html](http://www.ghs.com/news/20041116_mobileye.html)

所以我会说“是的，你可以使用 std::string、std::map、malloc()、new 等”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T17:47:08.090

是的，您可以使用所有 STD 库，并且可以在有或没有异常支持的情况下对其进行编译。它还支持日本汽车标准，我不太了解。

从 2017 年年中开始，Green Hills 编译器也支持 C++11，我不能告诉你支持的程度，因为我们仍在过渡

# mysql - 哪个复合索引会使这个简单的 MySQL 查询更快？

> ID：13847137
> 
> 赞同：3
> 
> 时间：2012-12-12T19:28:51.230
> 
> 标签：mysql, indexing, query-optimization, composite-index

哪个**复合索引**会使这个简单的 MySQL 查询**更快**，我将**如何**创建该复合索引？

```
SELECT * 
FROM  `Table1` 
WHERE  `col1` =  '145307'
AND  `col2` =  '0'
AND col3 NOT 
IN ( 130209, 130839 ) 
ORDER BY col4 DESC 
LIMIT 0 , 5 
```

`col1`上面的每一列 ( to `col4`)上已经有一个单独的索引。

* * *

**编辑**：

结果`SHOW CREATE TABLE`：

```
CREATE TABLE `Table1` (  
 `primaryCol` int(11) NOT NULL AUTO_INCREMENT,
 `col3` int(11) DEFAULT '0',
 `col5` varchar(20) COLLATE utf8_bin DEFAULT NULL,
 `col1` int(11) DEFAULT '0',
 `col6` varchar(80) COLLATE utf8_bin DEFAULT NULL,
 `col7` text CHARACTER SET utf8,
 `col4` int(11) DEFAULT '0',
 `col8` char(1) COLLATE utf8_bin DEFAULT 'N',
 `col9` char(1) COLLATE utf8_bin DEFAULT 'N',
 `col2` tinyint(1) NOT NULL,
 `col10` tinyint(1) NOT NULL,
 `col11` smallint(6) NOT NULL,
 PRIMARY KEY (`primaryCol`),
 KEY `col5` (`col5`),
 KEY `col1` (`col1`),
 KEY `col3` (`col3`),
 KEY `col4` (`col4`),
 KEY `col8` (`col8`),
 KEY `col9` (`col9`),
 KEY `CompIndex1` (`col1`,`col8`,`col4`),
 KEY `col2` (`col2`),
 KEY `col10` (`col10`),
 KEY `col11` (`col11`),
 FULLTEXT KEY `col7` (`col7`)
) ENGINE=MyISAM AUTO_INCREMENT=4575350 DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

结果`EXPLAIN EXTENDED`：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  Table1  ref col1,col3,CompIndex1,col2   CompIndex1  5   const   226 100 Using where; Using filesort 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:36:49.620

我建议在 (col1, col2, col3) 上建立一个索引。

```
mysql> CREATE INDEX NewIndex ON Table1 (col1,col2,col3);

mysql> EXPLAIN SELECT *  FROM  `Table1`  WHERE  `col1` =  '145307' 
AND  `col2` =  '0' AND col3 NOT  IN ( 130209, 130839 )  
ORDER BY col4 DESC  LIMIT 0 , 5\G

           id: 1
  select_type: SIMPLE
        table: Table1
         type: ref
possible_keys: col1,col3,CompIndex1,col2,NewIndex
          key: NewIndex
      key_len: 6
          ref: const,const
         rows: 1
        Extra: Using where; Using filesort 
```

您对 col3 的条件不是相等比较，而是范围比较，应该是索引中的最后一列。

不幸的是，这意味着您无法摆脱 EXPLAIN 计划中的“使用文件排序”。通常，如果您在不同的列上也有范围比较，则无法使用索引优化排序。

但是您至少可以使用三列索引来缩小搜索范围，这样文件排序就必须对一组较小的行进行处理，然后它可能会在内存中完成。

另请参阅我的演示文稿[如何设计索引，真的](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:17:11.007

如果您要创建复合索引，那么在作为复合索引成员的各个列上创建索引将是多余的。找出您最常运行的查询、查询中涉及的每列的基数、查询将返回的大致行数、表中的总行数、表是否经常更新等。记住索引插入和更新的成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:17:58.170

目前最好的答案是最可怕的。每次在 EXPLAIN 中看到“文件排序”时，它都会非常慢，因为 MySQL 必须创建临时文件并且不使用索引进行排序！

索引就像电话簿。在您的情况下，正确的索引是：

（col4，col1，col2，col3，primaryCol）

顺序很重要！复合索引的最左侧部分必须始终是您要排序的列。然后，添加您在 WHERE 子句中使用的其他列。最后，对于 MyISAM，您还需要添加主键（InnoDB 会自动添加）。

此外，您需要更改查询，以便将排序/过滤和获取完整详细信息分开：

```
SELECT * FROM `Table1` JOIN (
  SELECT primaryKey FROM  `Table1` 
  WHERE  `col1` =  '145307'
  AND  `col2` =  '0'
  AND col3 NOT 
  IN ( 130209, 130839 ) 
  ORDER BY col4 DESC 
  LIMIT 0 , 5
) foo ON Table1.primaryKey=foo.primaryKey 
```

使用 EXPLAIN 检查这一点，您将看到正确的索引使用情况，用于排序和过滤。然后将结果 id 再次与表连接（在另一个快速索引操作中）以获得完整的详细信息。

# uiviewcontroller - UICollectionViewDelegate 的奇怪行为

> ID：13847142
> 
> 赞同：3
> 
> 时间：2012-12-12T19:29:06.917
> 
> 标签：uiviewcontroller, ios6, uicollectionview

我有一个包含 UICollectionView 的 viewController，我在其中实现了两个委托方法 shouldSelectItemAtIndexPath 和 didSelectItemAtIndexPath。shouldSelect 方法按预期工作，并为每个选定的单元格调用。

didSelect 方法不会在第一个被点击的单元格上被调用，即使被点击了多次。但是，如果您点击第二个单元格，则会调用 didSelect 方法，但 indexPath.item 值是针对先前点击的单元格的。

例如，我点击 collectionView 中的第一个单元格，并调用 shouldSelect，它的 indexPath.item 值 = 0。即使多次点击单元格，也不会调用 DidSelect。

如果我然后点击任何其他单元格，例如，collectionView 中的第 4 个单元格，将调用 shouldSelect 并且它的 indexPath.item 值 = 3。也调用了 didSelect，但它的 indexPath.item 值 = 0（之前选择的单元格）。

如果我继续选择不同的单元格，didSelect 会继续被调用，但 indexPath.item 的值始终是先前选择的项目。如果我多次点击一个单元格，didSelect 将无法调用，直到我点击另一个单元格。

有人吗？我难住了。所有其他数据源和委托方法似乎工作正常。委托和数据源在情节提要中正确连接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T19:28:01.413

确保您的

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

实际上并不是

```
- (void)collectionView:(UICollectionView *)collectionView didDeSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

（DidDeSelect 与 DidSelect）

我有同样的问题。

# html - 按钮合并到 IE 7 中的列表元素

> ID：13847150
> 
> 赞同：0
> 
> 时间：2012-12-12T19:29:36.590
> 
> 标签：html, css, html-lists

我对仅在 IE 7 或更低版本中合并到列表元素中的一组按钮有疑问。所以所有按钮都出现`Title 2`在第二个 li 元素中。请参阅下面的 html 和 css

```
<ul class="tabs">
   <li><a href="#tab1">Title 1</a></li>
   <li><a href="#tab2">Title 2</a></li>
   <span class="button-span">
   <button id="print" title="Print">
   <img alt="Print" src="images/ico-print.png" border="0"/>
   </button>
   <button id="save" title="Save">
   <img alt="Save" src="images/word.gif"/>
   </button>
   </span>
</ul> 
```

CSS

```
ul.tabs li {
    background: url('../images/gradient-black.png') repeat-x top left #262626;
    border-top: 1px solid #444;
    border-left: 1px solid #535250;
    border-right: 1px solid #535250;
    -webkit-border-top-left-radius: 6px;
    -moz-border-top-left-radius: 6px;
    border-top-left-radius: 6px;
    -webkit-border-top-right-radius: 6px;
    -moz-border-top-right-radius: 6px;
    border-top-right-radius: 6px;
    cursor: pointer;
    float: left;
    margin: 0 5px 0 0;
    padding: 6px 20px;
    overflow: hidden;
    text-align: center;
    width: 200px;
}

span.button-span {
    margin-right: 35px;
    float: right;
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:50:12.553

你应该看看这个：http://stackoverflow.com/questions/1903453/what-disadvantages-are-there-to-the-button-tag-it-seems-there-are-quite-a-fe一个线索，为什么它不能正常工作，你还需要像@da5id 说的那样关闭你的跨度标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:41:54.027

固定示例： http: [//jsfiddle.net/xQ4L9/1/](http://jsfiddle.net/xQ4L9/1/)（使用 URL [http://jsfiddle.net/xQ4L9/1/show/](http://jsfiddle.net/xQ4L9/1/show/)在 IE7 中查看结果）

修复步骤：

1.  移出`button-span`并`ul`使其成为块元素。
2.  将相应的 CSS 选择器从 更改`span.button-span`为`.button-span`
3.  删除. `clear:both`_`.button-span`

# android - 拥有一个活动实例

> ID：13847151
> 
> 赞同：22
> 
> 时间：2012-12-12T19:29:38.107
> 
> 标签：android, android-intent, android-activity, android-lifecycle

我的活动导航和后台堆栈有问题，我希望你能帮我解决这个问题。

**问题**

根活动 >>> SecondActivity >> HomeButton

然后这会将我带到主页并从那里选择...

Gmail >> 消息 >> 在我的应用程序中打开附件 >> ImportActivity >> RootActivity

结果是启动了一个新任务，并使用了我的应用程序的另一个实例。这是不可接受的，因为我不想运行两个单独的任务，我只想要一个。

**期望的结果**

我想要发生的是当用户打开附件并且**ImportActivity**完成它所做的事情（它已`android:noHistory`设置为 true）并调用`startActivity(intent)`,`RootActivity`启动时，但在原始任务中只保留一个实例和其余的活动（在这种情况下`SecondActivity`）被删除。

我想要这样做的原因是，如果用户在导入文件后导航出我的应用程序，然后触摸应用程序图标，它会加载第一个任务及其后堆栈，并且我有两个任务正在运行，用户可以在其中的两个不同部分我的申请。

**我试过的**

我玩过启动模式，但它们都没有真正给我我需要的功能。

我尝试过的启动模式..

*android:launchMode="singleTask"* - 每次启动时都会再次启动根活动。即使用户在我的应用程序中按下主页按钮并触摸应用程序图标，后堆栈也会被破坏。

*android:launchMode="singleInstance* = 不允许任何其他活动在任务中运行。

此外，在调用意图启动时，`RootActivity`我使用以下方法无济于事。

```
Intent i = new Intent(ImportActivity.this,TrackingActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

有可能做我想做的事吗？

**提前致谢**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:05:02.343

You say

```
Gmail >> Message >> Open attachment in my application >> ImportActivity >> RootActivity 
```

but that may not be right. In this circumstance, gmail will issue an `Intent` targeted at the `ImportActivity` in your app. `ImportActivity` will execute. However, my reading of [https://developer.android.com/guide/components/tasks-and-back-stack.html](https://developer.android.com/guide/components/tasks-and-back-stack.html) suggests that `ImportActivity` will execute as part of the same task as gmail and will be put on top of the back stack for the gmail task, unless you take special steps in the manifest to prevent that or gmail specifically invokes it as a separate task. When `ImportActivity` finishes, it shouldn't call `startActivity(intentForRootActivity)` but should just call `finish()` so that it will be destroyed and the activity from gmail which lies underneath it in the back stack will appear.

If `ImportActivity` did call `startActivity(intentForRootActivity)` then `RootActivity` would just go onto the top of the gmail task and appear on the gmail back stack. Touching `home` and then the launcher icon for gmail would see `RootActivity` reappear, hiding gmail underneath.

I think you need `android:launchMode="standard"` in the manifest declaration of `ImportActivity`.

The task which represents the older, stand-alone instance of your app will not be modified. If someone touches the launcher icon for your app, the old state of your app will be restored, unaffected by whatever happened in the gmail task.

The document [http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html) is rather vague about how Activities map onto processes here (causing David Wasser to comment on my earlier version of this answer) but it seems that the Activities of gmail will execute in one linux process with one linux user id and the `ImportActivity` will execute in another linux process with another user id. However, they can all form part of one task with one back stack.

`ImportActivity` will execute, as part of the gmail task, with the same effective Linux User ID as it would had it executed as part of your standalone app - and different from the Linux user ID that gmail executes with. This sounds unlikely and complicated but seems to be implied by [https://developer.android.com/guide/components/fundamentals.html](https://developer.android.com/guide/components/fundamentals.html). That makes sense; if `ImportActivity` needs to get at, say, the user preferences stored for your app, it needs to read the preference file as if it were the user defined for your app, not the user defined for gmail.

I haven't tried executing any of this. If I have hold of entirely the wrong end of the stick, I'm sure someone will soon tell us!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:48:01.737

你不应该需要任何特殊的东西`launchMode`来做到这一点。如果您的导入活动使用此启动根活动，`Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP`则应该可以执行您想要的操作。我猜你有问题`taskAffinity`。尝试这个：

在您的清单中，在 importActivity 的声明中添加以下内容：

```
android:taskAffinity="" 
```

如果这不起作用，请发布您的清单，以便我们查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:46:41.447

我真的不确定我是否明白了，但如果你想在不丢失额外应用程序堆栈的情况下进入你的“根”活动，它将`Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP`直接在你的标志上`intent`，并且没有额外的配置`Manifest`......如果你需要分离任务以创建一个新的完整的新堆栈，而不是`Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP`您描述的那样使用。

# ssrs-2008 - 在 SSRS 中格式化空矩阵单元格

> ID：13847152
> 
> 赞同：3
> 
> 时间：2012-12-12T19:29:40.443
> 
> 标签：ssrs-2008, reporting-services

当我在设计 SSRS 报告时将 0.00% 格式应用于单元格，然后导出到 Excel 时，只有包含值的单元格具有这种数字格式。没有数据的单元格默认为“常规”格式。

有没有办法格式化空单元格以使它们具有 0.00%？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T23:09:25.920

你可以在你的单元格中尝试这样的表达式：

```
=IIf(IsNothing(Fields!MyColumn.Value),0,Fields!MyColumn.Value) 
```

如果该字段为空，则输入 0，否则使用数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:18:02.190

您可以使用 ReportItem 表达式解决空单元格值的引用问题。

darkdusky在[文章](http://forums.databasejournal.com/showthread.php?50106-conditional-format-column-containing-blank-cells)中发布了一个解决方案。

在空白单元格中使用 =ReportItems!textbox4.Value 来比较单元格值。

# file - 通过在 Web 应用程序上管理用户文件来优化性能

> ID：13847156
> 
> 赞同：0
> 
> 时间：2012-12-12T19:29:56.450
> 
> 标签：file, file-management

我的 Web 应用程序需要存储和检索应用程序用户创建的数据文件（这些文件是源自应用程序用户使用的监控设备的日志文件）。一个典型的文件小于 10KB。每个这样的文件都有一个创建日期属性。通常，用户会一次上传并要求检索在调整日创建的多个文件。

我的问题是，我是否应该设计我的文件处理代码来连接相邻日期的多个用户文件并将它们作为一个文件存储在一起以优化服务器性能？IOW，我应该担心减少文件获取的数量吗？最后，在 Linux 上，一个文件夹中可以放置的文件数量是否有限制？

谢谢，阿维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:04:06.293

为了快速检索，您应该使用文件夹结构，让它是任何操作系统 Windows、Linux 等，当搜索发生时它会检查所有文件列表。

所以你可以做的是你可以拥有像 2012 -> 12 -> 20 2012 - year 12 - Month 20 - day 这样的文件夹结构

这将有助于快速检索，而且如果您可以执行索引，那就太好了。

Linux 或任何操作系统，它们不限制文件夹中的文件数量。

# .net - 无法从 c# 项目（DynamicBase）加载本机 dll

> ID：13847162
> 
> 赞同：1
> 
> 时间：2012-12-12T19:30:16.340
> 
> 标签：.net, aslr

在 Visual Studio 中，我创建了一个 C# 可执行文件，它加载一个 clr 库，然后在 64 位本机 dll 上调用 loadlibrary，显示一个内部异常消息框。如果我将可执行文件更改为 clr 并在 exe 项目上将高级选项随机基地址设置为否 (/DynamicBase:NO)，它加载正常。如何让本机 .net exe 不使用 ASLR？此外，如何让这个场景在 IIS 下工作？-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:28:48.543

找到了。/HIGHENTROPYVA 默认在本机 .net exe 上启用。使用 link -edit /HIGHENTROPYVA:no test.exe 将其删除并修复了问题。

# java - 测验程序中的数组索引超出范围异常

> ID：13847163
> 
> 赞同：0
> 
> 时间：2012-12-12T19:30:18.387
> 
> 标签：java, arrays, indexoutofboundsexception

我在尝试修复[`ArrayIndexOutOfBoundsException`](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html).

我有一种方法可以逐行读取文件。如果该行上的名称和 id 与我传递给该方法的某些变量匹配，那么我将该行保存到一个数组中。

该程序模拟测验。用户不能使用相同的name和id超过2次；因此，该文件仅包含 2 行具有相同名称和 id 的行。

我创建了一个名为的数组`temp`来保存文件中的这两行。如果文件为空，则用户进行两次尝试，当他再次尝试时，他被拒绝。因此，如果您输入不同的名称和 ID，您应该再尝试 2 次。此时文件中有两行来自前一个用户，但是当新用户尝试时，他只能参加一次测试。当他第二次尝试时，我得到了数组越界异常。

我的问题是：数组是否包含`temp`以前的值，这就是我得到异常的原因吗？

```
private String readFile(String id, String name) {
    String[] temp = new String[3];
    int i = 1;
    int index = 0;
    String[] split = null;
    String idCheck = null;
    String nameCheck = null;
    temp = null;

    try {
        BufferedReader read = new BufferedReader(new FileReader("studentInfo.txt"));
        String line = null;           

        try {
            while ((line = read.readLine()) != null) {
                try {
                    split = line.split("\t\t");
                } catch (Exception ex) {
                }

                nameCheck = split[0];
                idCheck = split[1];

                if (idCheck.equals(id) && nameCheck.equals(name)) {
                    temp[index] = line;
                }

                index++;
            }
            read.close();
        } catch (IOException ex) {
        }
    } catch (FileNotFoundException ex) {
    }

    if (temp != null) {
        if (temp[1] == null) {
            return temp[0];
        }
        if (temp[1] != null && temp[2] == null) {
            return temp[1];
        }
        if (temp[2] != null) {
            return temp[2];
        }
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:37:35.830

我看到两个地方可以让索引越界异常。首先是这段代码：

```
try {
    split = line.split("\t\t");
} catch (Exception ex) {
}
nameCheck = split[0];
idCheck = split[1]; 
```

如果该行没有`"\t\t"`序列，则`split`只有一个元素，尝试访问`split[1]`将引发异常。（顺便说一句：你不应该默默地忽略异常！）

第二个（更可能是问题的根源）是您正在`index`为具有匹配 id 和 name 的每一行递增，因此一旦您阅读第三行这样的行，`index`作为`temp`.

您可以包含`index < temp.length`在`while`循环条件中，也可以使用`ArrayList<String>`for`temp`代替`String[]`. 这样您就可以添加无限数量的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:36:47.127

这就是可能发生的事情

```
 String[] split = "xxx\tyyyy".split("\t\t");
    System.out.println(split[0]);
    System.out.println(split[1]); 
```

.

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
    at Test.main(Test.java:17) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:43:32.223

设置后`temp = null;`

下一个对 temp 的引用是：

```
if (idCheck.equals(id) && nameCheck.equals(name)) {

    temp[index] = line;
} 
```

我相信您应该删除该行`temp = null;`。它所做的只是将您刚刚在该行上方实例化的数组丢弃。

这个索引让我有点紧张，但我想如果你确定正在读取的文件永远不会超过 3 行......

# iphone - iphone上的网站问题

> ID：13847164
> 
> 赞同：0
> 
> 时间：2012-12-12T19:30:20.027
> 
> 标签：iphone, html, css, mobile

我有一个网站，其 Div 的宽度为 100%。这一切都有效，但是，当我在 iPhone 上打开网页时，div 不是 100% 的宽度。

这是我的 iPhone 上的照片：

![在此处输入图像描述](../Images/302d456cacde8e03b1666065390371e7.png)

深灰色是身体的颜色。

[您可以在creemersa.be/Ontwerp2/index.html](http://creemersa.be/Ontwerp2/index.html)找到该网站的开头

顺便说一句：非常欢迎对我的设计提出想法/评论。我还是个初学者 :-) 编辑：我也刚刚注意到我的页脚没有很好地显示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:58:40.380

我认为您的问题来自：

```
<div class="wrapper">...</div>
<div class="incontent">...</div>
<div class="incontent2">...</div> 
```

尝试添加到这三个`div`属性`width: 100%`。

```
.wrapper, .incontent, .incontent2 { width: 100%; } 
```

我还认为您应该将 padding: 的设置`incontent div`为 0：

```
.incontent { padding: 0; } 
```

**更新：**您应该将填充设置为 0 的原因是将填充添加到设置为 100% 的元素宽度，因此最终宽度将为**100%+padding**。要正确格式化内容，您应该处理子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:37:07.353

检查所有元素的定义宽度是否大于您设计的设备。尽可能在 CSS 中使用百分比。说 900px 的宽度将拉伸视口。对于 iPhone，这是**320px**。

# java - 球面相机

> ID：13847166
> 
> 赞同：2
> 
> 时间：2012-12-12T19:30:25.823
> 
> 标签：java, android, opengl-es, libgdx

请参阅下面的我的编辑。

我在原点绘制了一个球体。我的相机正在观察半径为 3 个单位的球体。我正在尝试使用 2D 操纵杆使相机绕球体运行。我目前正在使用下面的代码来环绕球体，但我不确定如何让操纵杆控制操纵杆指向的方向的旋转。我的操纵杆提供 0 度向上的角度，当您逆时针移动时，度数上升到 360。操纵杆离中心起点越远，旋转速度就会增加。我只是不知道该怎么做。

```
PIOVER180 = Math.PI/180;
rho = 3;
theta = (theta+1)%360;
phi = (theta+1)%360;

camera.position.x = (float) (rho * Math.sin(theta * PIOVER180) * Math.cos(phi * PIOVER180));
camera.position.y = (float) (rho * Math.cos(theta * PIOVER180));
camera.position.z = (float) (rho * Math.sin(theta * PIOVER180) * Math.sin(phi * PIOVER180));
camera.normalizeUp(); 
```

libGDX 提供了一个不错的`PerspectiveCamera`类，我希望将其扩展为 a`SphericalCamera`并在需要时使用它来调用我的轮换。

**编辑：**

我想如果我能弄清楚如何让 2D 操纵杆正确操纵`theta`和`phi`变量，那么它应该可以正常工作。`theta`是正 x 轴与球体上的点之间的角度，该点在`phi`z 轴上的位置（正或负），并且`rho`是从中心点 (0, 0, 0) 到球面上的点的距离球体（基本上是半径）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T17:44:20.383

您正在尝试以操纵杆控制的方式围绕球体旋转，同时看着中心，对吗？

好吧，如果操纵杆给你一个以度为单位的角度“ang”，0 向上，那么每个轴的分量将是：

```
double x = Math.sin(ang*Math.PI/180.);
double y = Math.cos(ang*Math.PI/180.); 
```

然后你可以做的就是将你的相机在它自己的 UP/LEFT 平面上平移这些数量，可能使用“速度”参数：

```
Vector3 left = new Vector3(camera.up).crs(camera.direction).scl((float)(speed*x));
Vector3 up = new Vector3(camera.up).scl((float)(speed*y));
camera.position.add(left).add(up); 
```

此时您的相机将离开所需的轨道，因此您需要将其带回：

```
camera.position.nor().scl(rho); 
```

在您的代码示例中，您不会在更改位置后更新相机的方向，但根据您的描述这是必要的。看原点：

```
camera.direction.set(camera.position).scl(-1).nor(); 
```

最后更新上向量和模型矩阵：

```
camera.normalizeUp();
camera.update(false); 
```

希望这可以帮助！

# c++ - x86 中不同数学函数的性能？

> ID：13847167
> 
> 赞同：8
> 
> 时间：2012-12-12T19:30:28.970
> 
> 标签：c++, performance, math, floating-point

我正在写一个 3D 碰撞，想知道基本数学函数的性能差异，如 + - * / sqrt pwr trigonometry like sin cos tan arcsin..

我听说这取决于许多其他事情，所以我只想大致了解哪个更慢并且需要避免，同时寻找不同的方法来解决问题。我也想知道差异的顺序和大小

谢谢

编辑：我用 VC++ 为 x86 编写。但是其他架构和总体情况的知识也很好。我主要以单浮点计算以进行实时应用。

问题是某些算法需要 sqrt 或三角函数，但我可以通过其他方法绕过它们。每个人都有自己的进步，我想知道是否足以进行权衡。我想要一个通用知识来解决我自己的问题，做了一个谷歌但一无所获，所以请让它回答

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:41:14.977

说得非常广泛，并概括介绍了最近的常见硬件：

*   加法、减法和乘法速度很快（每个内核每个周期至少可以进行一次运算）。
*   除法和平方根通常慢一个数量级（每个操作数十个周期）。有许多近似算法可用于在特定用途中缩小这一差距。
*   调用数学库函数（`sin`、`cos`、`exp`、`log`等）会因您使用的数学库实现和硬件而有很大差异。在（例如）当前的 i7 上，通常在每 ~20 个周期执行一次操作和每 ~200 个周期执行一次操作之间，具体取决于实现的质量和被调用的特定函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:33:19.613

一个粗略的想法：`+, -`< `*`< `/`< `sqrt`<`sin, cos, etc`

PS。在最近的英特尔架构上：

ADDSD/SUBSD - 3 个周期延迟，1 个周期吞吐量

MULSD - 6-7 周期延迟，2 周期吞吐量

DIVSD - 38-39 周期延迟，38-39 周期吞吐量

# google-maps - Draw KmlLayer data as polygons and not polylines on Google Map

> ID：13847168
> 
> 赞同：1
> 
> 时间：2012-12-12T19:30:38.507
> 
> 标签：google-maps, kml, layer

I've converted an .shp file, downloaded from Zillow [http://www.zillow.com/howto/api/neighborhood-boundaries.htm](http://www.zillow.com/howto/api/neighborhood-boundaries.htm), to .kml using the "Quantum GIS Desktop", when I loaded it on the map I found that I can't click inside of the boundary to get the name of the county since Google has drawn the boundaries using polylines, I can only click on the line which is very unusable. You can see what I mean on this page: [http://webappscustoms.com/tests/google_maps/Zillow/map/index.html](http://webappscustoms.com/tests/google_maps/Zillow/map/index.html).

所以我想知道是否有一种简单的方法可以告诉 Google Maps API 绘制多边形而不是折线？也许有一种方法，在 Quantum 中将 .shp 转换为 .kml 文件时，可以告诉边界是多边形而不是折线？..如果我在 Google 地球中打开转换后的文件，我可以在该区域内单击并获取默认数据而不会出现任何问题。

如果没有任何简单的选项，那么我可能可以手动绘制多边形，但我不确定如何使用 Google Maps API 从 .kml 文件中提取纬度/经度，是否可能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:04:11.527

查看您的 KML，它们是多边形。您可以按照它们的显示方式设置它们的样式：

```
<Style>
 <LineStyle>
  <color>ff0000ff</color>
 </LineStyle>
 <PolyStyle>
  <fill>0</fill>
 </PolyStyle>
</Style> 
```

我想你想要

```
<fill>1</fill> 
```

[例子](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/il_neighbourhoods_fill1_kml.xml)

# java - 文件上传限制在 Chrome 上的 6 个请求

> ID：13847179
> 
> 赞同：4
> 
> 时间：2012-12-12T19:31:26.930
> 
> 标签：java, php, http, file-upload, plupload

我知道谷歌浏览器限制为 6 个 http 请求。

这就是为什么在我的简单文件上传器上，我只能同时上传 6 个文件。如果我触发它，它将显示 6 个 http Post 请求正在工作。

我的问题是，为什么java uploader或plupload等上传软件不受限制？（当我触发它时，它不显示 http 请求）。

他们做了什么？他们是否使用除了 POST 请求之外的其他方法来上传文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:38:28.747

我认为你应该问相反的问题：为什么 Chrome 是有限的？顺便说一句，至少在过去 MSIE 受到通过注册表配置的 2 个同时上传的限制。

浏览器限制上传次数以更稳定。否则不负责任的开发人员可能会导致浏览器崩溃。为工程师而不是最终用户开发的较低级别的工具不会限制将此责任转移给应用程序开发人员的数量。

# sql - MS Access 子查询

> ID：13847181
> 
> 赞同：0
> 
> 时间：2012-12-12T19:31:38.927
> 
> 标签：sql, ms-access, subquery

我有一个从一个 Access 表中选择数据的简单查询。其中一个记录字段通过 submittalID 字段与另一个表（名为 submittalfwd）中的四个日期相关联。我想为较大查询返回的每条记录选择四个日期作为查询的一部分，按升序排列（Date1、Date2、...）。

我知道 LIMIT 和 OFFSET 不能与 Access 一起使用，所以我不确定按升序选择四个记录的最有效方式。

下面的查询几乎可以工作——但 MS Access 无法理解 WHERE 子句中的 SUB.submittalID。

任何帮助，将不胜感激。谢谢，

```
SELECT SUB.submittalID,

(SELECT TOP 1 subq2.subfwddate FROM
(SELECT TOP 2 subq2.subfwddate FROM submittalfwd AS subq2
WHERE subq2.submittal = SUB.submittalID ORDER BY subq2.subfwddate ASC)
ORDER BY subq2.subfwddate DESC) AS Date2

FROM submittals AS SUB; 
```

示例数据 - submittalfwd 表

```
subfwdID 提交 subfwddate
1 1 2012 年 12 月 9 日
2 1 2012 年 12 月 10 日
3 1 2012 年 12 月 11 日
4 1 2012 年 12 月 12 日
5 2 2012 年 12 月 13 日
6 2 2012 年 12 月 14 日
7 2 2012 年 12 月 15 日
8 2 2012 年 12 月 16 日

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:15:48.513

MS Access 无法理解 Date2 和 Date3 的 WHERE 子句中的 SUB.submittalID（Date1 和 Date4 工作正常），因为当您处于 date2 和 date3 子查询中时 sub 超出范围。

尝试更多类似的东西：

```
SELECT 
sub.submittalID, specdivision, specsection, submittalnumber, 
miscnumber, submittaltitle, subcontractor, action, comments, 
open,

min_sfDate,

(select submittal, subfwddate_min2 from
   (SELECT TOP 1 submittal, subfwddate_min2 FROM 
      (SELECT TOP 2 submittal, subfwddate_min2 FROM submittalfwd ORDER BY subfwddate ASC) s2
   ORDER BY submittal, subfwddate_min2 DESC) AS min_sfDate_2nd
where sub.submittalid = submittal),

(select submittal, subfwddate_min3 from
   (SELECT TOP 1 submittal, subfwddate_min3 FROM 
      (SELECT TOP 3 submittal, subfwddate_min3 FROM submittalfwd ORDER BY subfwddate ASC) s3
   ORDER BY submittal, subfwddate_min3 DESC) AS min_sfDate_3rd,
where sub.submittalid = submittal),

max_sfDate

FROM submittals AS SUB inner join
(select submittal, min(subfwddate) as min_sfDate, max(subfwddate) as max_sfDate
from submittalfwd group by submittal) m on
sub.submittalID = m.submittal 
```

或者，在我看来更好的是，为您的第 2 分钟和第 3 分钟日期创建 2 个持久查询，并将它们与这个主要日期连接起来。更容易理解和调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:17:21.177

我担心这不是你想要的，但你为什么不能做相对简单的事情：

```
SELECT s.SubmittalID [Submittal], sf.SubFwdDate [Forward Date]
FROM submittals s LEFT JOIN submittalfwd sf ON s.SubmittalID = sf.SubmittalID
ORDER BY 1, 2 
```

?

# c# - 格式化查询以枚举 2 个不同的数据表

> ID：13847186
> 
> 赞同：0
> 
> 时间：2012-12-12T19:31:47.320
> 
> 标签：c#, linq, datatable

我有 2 个数据表`sendTable`和`recvTable`

它们都有相同的列名和列数

> “节点”“DSP 名称”“总线”“IDENT”“站”“REF1”“REF2”“REF3”“REF4”“REF5”“REF6”“REF7”“REF8”

我需要比较这两个表并分离出不匹配的地方，只检查第 3-11 列并忽略第 1 列和第 2 列

我首先尝试删除 2 列，然后逐行循环并返回匹配项和不匹配项，但这种方法的问题是，当我最终确定结果时，我不再具有与该行关联的“节点”和“DSP 名称”

所以我需要查询帮助

这是我的尝试

```
var samerecordQuery = from r1 in sendTable.AsEnumerable()
                      where r1.Field<int>("BUS").Equals(from r2 in recvTable.AsEnumerable() where r2.Field<int>("BUS")) 
```

这显然行不通，所以我该如何格式化查询

```
from r1 cols[3-11] equals r2 cols [3-11] 
```

一旦我有了这个，我就可以使用 except 来消除不匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:49:59.653

希望这可以帮助

```
var matched = from s in sendTable.AsEnumerable()
              join r in recvTable.AsEnumerable() on
              new {BUS = s.Field<int>("BUS"), IDENT = s.Field<int>("IDENT"),...} equals
              new {BUS = r.Field<int>("BUS"), IDENT = r.Field<int>("IDENT"),...}
              select new {Send = s, Receive = r}; 
```

这将根据您需要的任何列匹配两个表中的记录，并返回分组的匹配记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T14:18:10.877

这是我的解决方案

```
var matched = from s in sendTable.AsEnumerable()
                     join r in recvTable.AsEnumerable() on
                     new { BUS = s.Field<int>("BUS"), 
                           IDENT = s.Field<int>("IDENT"), 
                           STATION = s.Field<int>("STATION"), 
                           REF1 = s.Field<string>("REF1"), 
                           REF2 = s.Field<string>("REF2"),
                           REF3 = s.Field<string>("REF3"),
                           REF4 = s.Field<string>("REF4"),
                           REF5 = s.Field<string>("REF5"),
                           REF6 = s.Field<string>("REF6"),
                           REF7 = s.Field<string>("REF7"),
                           REF8 = s.Field<string>("REF8") } equals
                      new { BUS = r.Field<int>("BUS"), 
                           IDENT = r.Field<int>("IDENT"), 
                           STATION = r.Field<int>("STATION"), 
                           REF1 = r.Field<string>("REF1"), 
                           REF2 = r.Field<string>("REF2"),
                           REF3 = r.Field<string>("REF3"),
                           REF4 = r.Field<string>("REF4"),
                           REF5 = r.Field<string>("REF5"),
                           REF6 = r.Field<string>("REF6"),
                           REF7 = r.Field<string>("REF7"),
                           REF8 = r.Field<string>("REF8") } 
                     select new { Send = s, Receive = r }; 
```

# ruby-on-rails-3 - 在 model.errors.add 旁边添加数据

> ID：13847187
> 
> 赞同：0
> 
> 时间：2012-12-12T19:31:48.590
> 
> 标签：ruby-on-rails-3

我希望将一些数据与错误一起发送。我猜它在响应者的某个地方，虽然不知道从哪里开始。本质上，我想做

```
model.errors.add :some_attr, "error message"
model.also_send_attrs = { prop: "some data also sent" } 
```

并且结构是通常的（有一些附加）

```
{ 
  errors: { some_attr: ['error message'] },
  also_send_data: { prop: "some data also sent" }
} 
```

如果发生错误，是否可以在错误的同时发送数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:05:21.913

嗯，扩展 Rails。

```
# config/initializers/also_send_attrs.rb

module AlsoSendAttrs
  module ErrorsExtension
    extend ActiveSupport::Concern
    included do
      delegate :also_send_attrs, :to => :@base
    end
  end

  module ActiveRecordExtension
    extend ActiveSupport::Concern
    included do
      attr_accessor :also_send_attrs
    end
  end

  ActiveModel::Errors.send(:include, ErrorsExtension)
  ActiveSupport.on_load :active_record do
    include ActiveRecordExtension
  end
end 
```

这是一种基本方法。

每个模型都有一个访问器 :also_send_attrs 并且每个错误都可以访问这个访问器。如需更多功能，请扩展代码。

# npapi - Firebreath NPAPI 插件通过引用传递 javascript 数组

> ID：13847191
> 
> 赞同：0
> 
> 时间：2012-12-12T19:31:59.430
> 
> 标签：npapi, firebreath

我是使用 Firebreath 的新手。作为一个练习，我正在尝试编写一个进行矢量加法的插件。出于某种原因，我正在为此苦苦挣扎。我将与我正在尝试做的事情相关的代码。

这是我的 Javascript 代码。

```
 var problemsize = 512 * 100 
var allocsize   = problemsize * 8

var bufferA = new ArrayBuffer(allocsize);
var bufferB = new ArrayBuffer(allocsize);
var bufferC = new ArrayBuffer(allocsize);
var N = problemsize

var float32ViewA = new Float32Array(bufferA);
var float32ViewB = new Float32Array(bufferB);
var float32ViewC = new Float32Array(bufferC);

for (var i = 0; i < problemsize; i++) {
    float32ViewA[i] = 4;
    float32ViewB[i] = 3;
    float32ViewC[i] = 0;
} 
```

`plugin().addvect(float32ViewA.buffer,float32ViewB.buffer,float32ViewC.buffer,problemsize);`

以及我的插件 API.cpp 中的代码

```
void TestJSAPI::addvect(const FB::JSObjectPtr& A, const FB::JSObjectPtr& B, const  FB::JSObjectPtr& C, int N){

std::cout << "Entering TestJSAPI::addvect " << std::endl;

int i = 0;
for( i = 0 ; i < N ; i++){
    double val = A->GetProperty(i).cast<double>() + B->GetProperty(i).cast<double>();
    C->SetProperty(i,val);

}

std::cout << "Exiting TestJSAPI::addvect" << std::endl; 
```

}

我似乎无法弄清楚出了什么问题。我正在从控制台启动 Firefox，它只是打印 Entering... 而 Not Exiting.. 我在这里错过了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:22:58.260

首先你不应该使用.cast，你应该使用.convert_cast。如果您使用 .cast ，它只会在它碰巧实际上是双精度时才有效，这可能是也可能不是。请记住，NPAPI 对您正在使用的类型化数组/缓冲区一无所知。

我的猜测是你没有得到任何地方的原因是有一个 FB::variant::bad_variant_cast 异常被抛出（我认为这是正确的异常类型；请查看 variant.h 以确保）强制转换或可能您的 GetProperty 失败并抛出 FB::script_error。

# c# - 比较像素图

> ID：13847194
> 
> 赞同：0
> 
> 时间：2012-12-12T19:32:10.757
> 
> 标签：c#, winforms

我正在使用以下代码从某个像素位置获取 RGB 颜色。

```
public Color GetColorAt(Point location)
{
    using (Graphics gdest = Graphics.FromImage(screenPixel))
    {
        using (Graphics gsrc = Graphics.FromHwnd(IntPtr.Zero))
        {
            IntPtr hSrcDC = gsrc.GetHdc();
            IntPtr hDC = gdest.GetHdc();
            int retval = BitBlt(hDC, 0, 0, 1, 1, hSrcDC, location.X, location.Y, (int)CopyPixelOperation.SourceCopy);
            gdest.ReleaseHdc();
            gsrc.ReleaseHdc();
        }
    }

    return screenPixel.GetPixel(0, 0);
} 
```

但是有什么方法可以保存例如 10x10 像素的图表吗？我的目标是将一张图表与另一张图表进行比较，看看它们是否相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:43:24.800

您可以创建一个方法，将屏幕的一部分复制到`Bitmap`您想要的任何大小（假设您没有创建大于屏幕的位图，在这种情况下您应该检查大小），如示例中所示：

```
public Bitmap GetPartOfTheScreen(Point location, Size size)
{
    Bitmap screenPartCopy = new Bitmap(size.Width, size.Height);
    using (Graphics gdest = Graphics.FromImage(screenPartCopy))
    {
        using (Graphics gsrc = Graphics.FromHwnd(IntPtr.Zero))
        {
            IntPtr hSrcDC = gsrc.GetHdc();
            IntPtr hDC = gdest.GetHdc();
            int retval = BitBlt(hDC, 0, 0, size.Width, size.Height, hSrcDC, location.X, location.Y, (int)CopyPixelOperation.SourceCopy);
            gdest.ReleaseHdc();
            gsrc.ReleaseHdc();
        }
    }

    return screenPartCopy;
} 
```

当您获得屏幕的一部分时，您可以使用`GetPixel`（慢速方法）比较像素颜色，或者您可以利用`LockBits`Bitmap 类的方法来比较像素。

# android - Android TCP 套接字服务和睡眠模式

> ID：13847197
> 
> 赞同：0
> 
> 时间：2012-12-12T19:32:17.807
> 
> 标签：android, sockets, tcp

我有一个始终在运行的服务，它是我的 TCP 服务器，它正在侦听传入的连接。事实是，当我按下电源按钮时，手机进入睡眠模式，我无法从其他设备访问手机，而在我唤醒手机后，一切又开始工作了。我想我必须使用 PARTIAL_WAKE_LOCK，不是吗？还是有其他解决方案？

编辑：我目前在 WIFI 上，稍后我将切换到 WIFI-DIRECT。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:00:46.333

`I guess i have to use PARTIAL_WAKE_LOCK, isn't it?`

正确的。如果您允许设备进入睡眠状态，则不会运行任何代码，因此您的 TCP 服务器将无法接受连接。

问候。

# git - 具有两个远程存储库的项目

> ID：13847202
> 
> 赞同：0
> 
> 时间：2012-12-12T19:32:35.607
> 
> 标签：git, cakephp, github, repository

我现在使用 Git，希望事情变得非常简单。

我有一堆使用 CakePHP 的项目。我在 bitbucket.org 中托管我的存储库。

因此，我只想将项目特定代码推送到 bitbucket，其余代码直接管理到 CakePHP github repo。

我该如何做到这一点？两个远程仓库，合并 origin->master 中的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:07:49.577

听起来您想查看[submodules](http://git-scm.com/book/ch6-6.html)。子模块是对另一个 git 存储库中*特定提交*的引用。如果您告诉我更多有关您所需的存储库布局的信息，我可以为您提供更多详细信息。

# python - 如何着手改进这个协程

> ID：13847203
> 
> 赞同：0
> 
> 时间：2012-12-12T19:32:36.903
> 
> 标签：python, python-2.7, coroutine

我有这个协程，它旨在接受数据，然后将数据发送到链中的下一个协程，但以长度为块的形式发送`blocksize`。由于字符串是不可变的，我认为我正在做的字符串附加效率很低，因为每次附加都会创建一个新的字符串对象。

由于这只是这些链中一些适当工作之间的“胶水”，因此能够使其尽可能光滑会很好。

```
def chunker(target, blocksize=DEFAULT_BLOCK_SIZE):
    buffer = ""
    target_send = target.send
    while True:
        try:
            input_data = yield
            buffer += input_data  # creates new string object every time
            buffer_len = len(buffer)
            if buffer_len >= blocksize:
                chunks, leftover = divmod(buffer_len, blocksize)
                for i in xrange(0, chunks*blocksize, blocksize):
                    target_send(buffer[i:i+blocksize])
                buffer = buffer[-leftover:] if leftover else ""
        except CleanUp:
            if buffer:
                target_send(buffer)
            target_send("") 
```

我该如何改进呢？或者更好的是，有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:45:42.403

一种选择是维护每个块的列表，然后`''.join()`在到达时维护它们`blocksize`，这应该比字符串连接更有效。例如（未经测试）：

```
def chunker(target, blocksize=DEFAULT_BLOCK_SIZE):
    data = []
    buffer = ''
    buffer_len = 0
    target_send = target.send
    while True:
        try:
            input_data = yield
            data.append(input_data)
            buffer_len += len(input_data)
            if buffer_len >= blocksize:
                buffer = ''.join(data)
                chunks, leftover = divmod(buffer_len, blocksize)
                for i in xrange(0, chunks*blocksize, blocksize):
                    target_send(buffer[i:i+blocksize])
                buffer = buffer[-leftover:] if leftover else ""
                buffer_len = len(buffer)
                data = [buffer] if buffer else []
        except CleanUp:
            buffer = ''.join(data)
            if buffer:
                target_send(buffer)
            target_send("") 
```

# android - BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE 的原因可能是什么？

> ID：13847206
> 
> 赞同：1
> 
> 时间：2012-12-12T19:32:47.100
> 
> 标签：android, in-app-billing

使用应用内计费 v3 库和`IabHelper`提供的示例中的，我在运行后得到响应`BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE`(3) `mHelper.startSetup(myOnIabSetupFinishedListener)`。

我已经签署了应用程序，上传了它，创建了一个商店项目，等待了所需的 2-3 小时（实际上等待了 24 小时），我正在使用测试人员列表中的单个 Google 帐户的设备上对其进行测试。

这个错误是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T21:08:43.060

检查也许...

```
Check 
Maybe ...
No need: Inapp
skuDetails = mService.getSkuDetails(3,getPackageName(), "Inapp", querySkus);

Need: inapp
skuDetails = mService.getSkuDetails(3,getPackageName(), "inapp", querySkus);
```

# objective-c - 不将 NSError 设置为 nil 会导致崩溃

> ID：13847207
> 
> 赞同：0
> 
> 时间：2012-12-12T19:32:49.337
> 
> 标签：objective-c, ios

我遇到了一个非常奇怪的问题，经过几个月的测试，当我即将提交应用程序时，它恰好弹出。

我有以下方法，它需要一些 JSON 数据并将其转换为字典：

```
NSError *e;
NSMutableDictionary *result= [NSJSONSerialization JSONObjectWithData:jsonData 
                              options:NSJSONReadingMutableContainers error:&e];
if (e != nil) return nil; 
```

在过去的几个月里，这种方法一直在不停地使用，绝对没有问题。但就在今天，它刚刚停止工作。它现在总是导致错误（没有描述；只是一个非零错误）。

事实证明，我所要做的就是解决这个问题`NSError *e = nil;`。我认为这样做只是一个好习惯，而不是绝对关键。这让我害怕。我想知道我在我的代码中还有多少次这样做。谁能解释可能发生的事情？

另外，我正在使用 ARC，我想这让发生这种情况变得更加奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:37:08.533

您的代码是错误的，您的修复也是如此。你需要做的是说

```
if (result == nil) {
    // an error occurred, and the NSError* variable can now be consulted
} 
```

如果`result`是除 之外的任何内容`nil`，那么您不得对 的内容做出*任何*`e`假设。

* * *

这里的基本原因是具有`NSError**`返回值的 API 不需要在该位置放置任何内容，除非 API 返回错误。通常这意味着在非错误情况下，它们根本不会修改值，因此您之前在`e`变量中拥有的东西就是您之后拥有的东西。如果您的代码是在没有 ARC 的情况下编译的，那么您的`e`变量将包含来自堆栈的垃圾。在 ARC 下，它将被初始化为`nil`，但我猜你不在 ARC 下，原因我会讲到。

然而，它比这更复杂。即使该方法没有返回错误，它也可能仍然修改了该`NSError**`值。一个简单的例子是，如果这个方法调用另一个方法，将相同的方法传递给`NSError**`那个方法，然后从错误中恢复并返回一个成功值。然而，第二种方法可能已经`NSError*`用不再有效的错误填充了您的变量。

现在，我认为您的代码不是 ARC 的原因是，据我所知，这些天所有的 Cocoa API 都在努力*不*修改`NSError**`值，除非发生错误。这符合一两年前制定的新准则（它是在 2011 年初或 2012 年初，我忘记了），即具有`NSError**`参数的方法只应在错误情况下修改它。这是为了让说的代码`NSError *e = nil; [foo callAPIWithError:e]; if (e) ...`能够工作，即使这实际上并不遵循`NSError`API 的规则，纯粹是作为一个实际问题，在面对不正确的代码时更有弹性。而且由于 ARC 取消了具有对象类型的所有自动变量，因此您的崩溃表明该变量`e`没有被取消，因此您不在 ARC 中。

然而，尽管我刚刚在上一段中说过，你仍然不应该假设任何`NSError`启用了 - 的 API`NSError`在没有抛出错误的情况下都会单独保留该值。当前实现此类 API 的指南确实说这应该是正确的，但这不是硬性要求。在这些指南之前编写的任何代码可能不会以这种方式运行，并且在指南之后编写的任何代码都可能会忽略它们。调用`NSError`启用的 API 的规则继续规定必须查阅 API 的返回值，并且`NSError*`只有在返回值指示发生错误时才能观察变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:38:10.937

让我一步一步解释错误的原因：

```
NSError *e; //some garbage non-nil value may be here

NSMutableDictionary *result= [NSJSONSerialization JSONObjectWithData:jsonData 
                              options:NSJSONReadingMutableContainers error:&e]; // no error, e is untouched, garbage is still here

if (e != nil) return nil; // there was no error but because of garbage we think there was one 
```

因此，首先您需要检查结果值或将 e 变量设置为 nil（首选第一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:37:15.207

该方法的[参考资料](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/occ/clm/NSJSONSerialization/JSONObjectWithData%3aoptions%3aerror%3a)说：

> **返回值** data 中 JSON 数据的 Foundation 对象，如果发生错误，则返回 nil。

所以使用返回值来检测错误，并且只有当你想要详细查看错误对象时。

# php - zend 发送电子邮件推荐朋友

> ID：13847209
> 
> 赞同：-1
> 
> 时间：2012-12-12T19:32:58.357
> 
> 标签：php, zend-framework, email, parameters, param

我有一个页面可以向朋友发送邀请电子邮件。

当您输入您的朋友电子邮件并发送时。

您的朋友收到这封电子邮件，并且在该电子邮件中他有一个链接，该链接指向一个页面以推荐该用户。

这是我的问题：当朋友单击该链接时，是否可以将此朋友电子邮件作为参数放入该链接的 url 中？？？

因此，当该朋友单击该链接时，它将将该朋友电子邮件保存到数据库中。

如果我有这样的网址：www.mywebsite.com/dasdasd324gb2h423g?email=myemail@gmail.com

我怎样才能得到 myemail@gmail.com????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:09:30.237

您必须将电子邮件作为 URI 参数放在消息发送时间中的 href 属性中。没有任何可能在查看时获得收件人的电子邮件。并没有真正需要这样做。

作为更好的解决方案，您可以将每条发送的消息保存为数据库中的唯一邀请（带有相应的电子邮件地址），并将一些唯一的邀请代码添加到链接中（例如 example.com/inv?eii54u3ksm5553）

# ios - iOS - 当蜂窝连接处于活动状态时，30 分钟后持续 wi-fi 超时

> ID：13847212
> 
> 赞同：2
> 
> 时间：2012-12-12T19:33:00.750
> 
> 标签：ios, ios6, wifi, core-audio, nsstream

当我使用 wifi 网络发送/接收音频时，我正在开发的应用程序需要 wifi 不断开启。然后它会播放音频。需要持续执行此操作，直到用户选择停止它。

**问题：** iOS 在 30 分钟后关闭 WiFi，因此套接字关闭并且 AudioQueues 停止。以下是 Apple 文档的摘录：

> 为了防止 Wi-Fi 硬件消耗过多电量，iOS 有一个内置计时器，如果没有正在运行的应用程序通过 UIRequiresPersistentWiFi 键请求使用它，iOS 会在 30 分钟后完全关闭硬件。如果用户启动包含密钥的应用程序，iOS 会在应用程序的生命周期内有效地禁用计时器。但是，一旦该应用程序退出或暂停，系统就会重新启用计时器。
> 
> **注意：**请注意，即使 UIRequiresPersistentWiFi 的值为 true，它在设备空闲（即屏幕锁定）时也不起作用。该应用程序被认为是非活动的，虽然它可能在某些级别上运行，但它没有 Wi-Fi 连接。

**已经实现的东西：**

1.  音频会话在设备上被激活。它一直保持这种状态，直到用户选择停止音频或连接丢失并且 AudioQueues 也停止。

2.  UIRequiresPersistentWiFi 在 .plist 文件中设置为 true

3.  实现可达性 API 以检测任何连接丢失并执行必要的操作。

4.  “应用程序不在后台运行”在 .plist 文件中设置为“false”

5.  “必需的背景模式”在 .plist 文件的数组中具有“应用程序播放音频”项。

6.  NSStreamNetworkServiceTypeVoiceforKey 在两个设备上的套接字的属性 NSStreamNetworkServiceType 上设置。

7.  将套接字上的 kCFStreamPropertyNoCellular 属性设置为 kCFBooleanTrue 的值没有帮助

8.  唯一有帮助的设置是将 NSStreamNetworkServiceType 设置为 NSStreamNetworkServiceTypeVoIP 并为 .plist 文件中的“必需的背景模式”字段添加“应用程序提供 IP 语音服务”。但是，Apple 将拒绝该应用程序，因为该应用程序未在应用程序中实现任何 VoIP 服务。

我一直在与 Apple DTS 讨论这个问题，根据他们的说法，没有 API 级别的支持可以帮助解决这个问题。然而，我对此说法表示怀疑，应用商店中有几个应用程序（例如 Pandora）需要此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:03:12.397

禁用设备睡眠计时器并告诉用户将应用程序保持在前台。这将防止显示屏关闭（屏幕锁定），从而防止设备进入低功耗状态，从而使 WIFI 无线电保持通电状态。

# session - 使用缓存来记忆用户会话？

> ID：13847214
> 
> 赞同：0
> 
> 时间：2012-12-12T19:33:05.493
> 
> 标签：session, cakephp, caching

我正在开发一个管理员可以删除其他用户帐户的项目。

最近遇到一个问题：当用户登录时管理员删除了一个账户会发生什么？有人建议将用户数据存储在缓存系统中，以便随时删除，但这对我来说并不正确。

我的想法是用户身份验证数据应该始终存储在会话中，但我找不到任何关于为什么以这种方式使用缓存系统是一个坏主意的论据。那么，处理这种情况的最佳做法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:44:00.077

我认为在几乎所有情况下，您都希望立即断开登录用户的连接。您可能在数据库中拥有用户信息，在会话中拥有身份验证信息。这可以。我只是让删除过程包含两个步骤：

1.  从数据库中删除用户。这将阻止新的登录。（编辑：或者更好的是，切换一个`active`标志，以便您维护任何现有的 user_id 关联，并且它们无法重新注册。）
2.  删除用户的所有现有会话。这将实质上断开用户在其下一页刷新时的连接。

# linux - 无法“rmmod”模块

> ID：13847217
> 
> 赞同：7
> 
> 时间：2012-12-12T19:33:28.937
> 
> 标签：linux, linux-kernel, kernel-module

我正在使用涉及内核和用户空间代码的大型嵌入式软件（ARM 处理器、嵌入式 linux 2.6.31、busybox）。通常首先加载一个内核模块，并且守护进程与该模块建立netlink套接字。

这里的问题是，在杀死守护进程后，我不再能够从内存中卸载模块：

```
% rmmod _module.ko
% rmmod: _module.ko: Resource temporarily unavailable 
```

分析表明，错误（返回值为`-11`，即`EAGAIN`？）是由`try_stop_module()`在系统调用`delete_module()`定义中调用返回的`kernel/module.c`。函数 try_stop_module() 依次调用 stop_machine() 这就是我坚持的地方，因为

我不确定那里到底发生了什么。我认为根本原因在守护进程中的某个地方，它打开了与模块的连接，显然还有其他东西，并且在退出时没有正确关闭/清理（显然一些引用/锁没有释放？）

有没有人知道还有什么可以看和探索的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T16:06:12.030

检查与您的模块相关的所有接口是否都未“启动”。

如果与您的模块相关的任何接口为“up”，则 rmmod 将失败并返回 -11。

因此，在调用 rmmod 之前，请使用“netcfg”命令检查活动接口。然后使用 ifconfig，将您的界面设置为`'ifconfig <interface_name> down'`

然后尝试运行`rmmod <module_name>`。它会工作的！

```
1.netcfg <lists out all interfaces>
2.ifconfig <interface_name> down
3.rmmod <module_name> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:51:18.350

首先，您应该是执行此操作的超级用户。你也可以使用，但这个选项可能非常危险：除非在编译内核时设置`rmmod -f`它，否则它不起作用。`CONFIG_MODULE_FORCE_UNLOAD`使用此选项，您可以删除正在使用的模块，或未设计为删除的模块，或已标记为不安全的模块。

也读`man rmmod`。

# node.js - 如何在 Mongoose 中为 REST API 创建虚拟对象

> ID：13847220
> 
> 赞同：2
> 
> 时间：2012-12-12T19:33:35.937
> 
> 标签：node.js, mongoose

我有一个用户模型。并且存在追随者关系。

我想要的是，当客户端请求用户的关注者时，我应该返回关注者，如果关注者被当前用户关注，则追加。

这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:09:29.217

看看这个线程中提到的实例方法[http://mongoosejs.com/docs/guide.html#methods](http://mongoosejs.com/docs/guide.html#methods)[在虚拟吸气剂中添加参数](https://stackoverflow.com/questions/13566817/add-arguments-in-a-virtual-getter)

# entity-relationship - ERwin 关系迁移的属性

> ID：13847221
> 
> 赞同：0
> 
> 时间：2012-12-12T19:33:38.240
> 
> 标签：entity-relationship, data-modeling

在 erwin 中，我有 2 个表，如下所示。

```
Table_A
|ID|DATA|

TABLE_B
|A_ID|DATA| 
```

我在表 A 和表 B 之间创建了关系。Erwin 将 ID 添加到表 B。在逻辑视图中，我可以抑制迁移的属性 (TABLE_B.ID)，但我似乎找不到在物理中抑制迁移属性的选项看法。

假设你不能在物理视图中抑制它，有没有办法告诉关系 ID 和 A_ID 是连接形成这种关系的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:28:34.273

我找到了。

创建关系后，您可以重命名迁移的属性，它不会重命名创建它的父级。还应注意，此重命名在逻辑视图和物理视图之间可能不同。

另一种方法是打开关系的属性并在“角色名称”选项卡下设置角色名称。无论您将角色名称设置为什么，迁移的属性都将被命名。

# delphi - Datasnap 客户端应用程序挂起

> ID：13847228
> 
> 赞同：0
> 
> 时间：2012-12-12T19:34:26.040
> 
> 标签：delphi, delphi-2010, datasnap

我编写了一个应用程序，它使用作为 Windows 服务安装的 TCP 上的 Datasnap 服务器，以及使用 Delphi 2010 的 VCL Winform 客户端。服务器应用程序连接到同一个盒子上的 SQL Server 2008 实例。当我有一个用户登录时，一切正常，花花公子，一旦第二个用户连接，他们都开始让程序没有响应。我认为问题可能是 SQL 中某些查询的瓶颈，但我整天都在运行跟踪，没有发现任何问题。随后我发现安装了较旧版本的 midas.dll，因此我将其更新为较新版本。但仍然没有喜悦。我不确定从哪里开始寻找问题。我使用 Bob Swart 的 Data How you want it 白皮书作为我制作 Datasnap 服务器和客户端的指南，在较小的实现上，它似乎工作正常。在我将应用程序恢复到胖客户端并使用实体框架等将服务器重写为 .net WCF 服务之前，任何关于从哪里开始寻找的指针都将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:17:33.447

它可能与这里描述的多线程相同的问题[http://blog.marcocantu.com/blog/datasnap_webinar_bedelphi_material.html](http://blog.marcocantu.com/blog/datasnap_webinar_bedelphi_material.html) 它描述了如何在 Delphi XE3 中修补 DataSnap，但我在以前的版本（如 XE）中发现了相同的错误。

# ios - 用户位置和电池消耗

> ID：13847229
> 
> 赞同：3
> 
> 时间：2012-12-12T19:34:36.850
> 
> 标签：ios, location, cllocationmanager

我正在开发一个 iOS 应用程序，该应用程序专注于建筑物（校园）中的行人。我已经开发了一个足够好的（我相信）用户的位置更新，但是，我希望比我更专业的人给我一些提示，关于准确位置的建议，电池问题等。此外，是否可以停止位置更新和n秒后重新启动？是我为了节省能源而做的一个想法。就目前而言，应用程序正在检测当前位置，但是，蓝点（用户）仍在四处移动，我不喜欢这样。有什么可以做的吗？

下面是我的 didUpdateToLocation 方法：

*应用程序正在从文件中读取建筑物的信息（存储在设备上）*

```
 - (void)viewDidLoad{

        [super viewDidLoad];

        if ([self checkForInternet]) {

            _locationManager = [[CLLocationManager alloc] init];
            _locationManager.delegate = self;
            _locationManager.distanceFilter = 10.0f;
            _locationManager.desiredAccuracy = 20.0f;

            [_locationManager startUpdatingLocation];

        }
    }

    - (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
    fromLocation:(CLLocation *)oldLocation {

        if (newLocation.horizontalAccuracy > manager.desiredAccuracy) return;

        [self.mapView removeAnnotations:listOfAnn];
        [listOfAnn removeAllObjects];
        if ([manager locationServicesEnabled]) {

            for (NSString* row in rows){
                NSArray* cells = [row componentsSeparatedByString:@"\t"];

                CLLocationCoordinate2D newCoord;
                newCoord.latitude = [[cells objectAtIndex:5]floatValue];
                newCoord.longitude = [[cells objectAtIndex:6]floatValue];

                CLLocation *locB = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude];
                CLLocation *centerLoc = [[CLLocation alloc] initWithLatitude:CAMPUS_LATITUDE longitude:CAMPUS_LONGITUDE];
                CLLocationDistance borders = [locB distanceFromLocation:centerLoc];

                if ((int)round(borders) > 500) {

                    BuildingViewController *newBuilding = [[BuildingViewController alloc] initBuildingWithName:[cells objectAtIndex:2]                                                                                                       coordinates:newCoord shortDescription:[cells objectAtIndex:4] image:(NSString*)[cells objectAtIndex:3]                                                                                                               inDistance: borders];

                    if ([[prefs stringForKey:newBuilding.title] isEqualToString:[prefs stringForKey:@"userName"]]) {
                        [newBuilding retrieveID];
                        [listOfAnn addObject:newBuilding];
                    }

                } else{

                    CLLocation *locA = [[CLLocation alloc] initWithLatitude:newCoord.latitude longitude:newCoord.longitude];

                    CLLocationDistance distance = [locA distanceFromLocation:locB];

                    BuildingViewController *newBuilding = [[BuildingViewController alloc] initBuildingWithName:[cells objectAtIndex:2]
                                                        coordinates:newCoord shortDescription:[cells objectAtIndex:4] image:(NSString*)[cells objectAtIndex:3]
                                                        inDistance: distance];

                    if ((int)round(distance) < 100 ||
                       [[prefs stringForKey:newBuilding.title] isEqualToString:[prefs stringForKey:@"userName"]]){
                          [newBuilding retrieveID];
                          [listOfAnn addObject:newBuilding];
                    }

                }

           }
           [self.mapView addAnnotations:listOfAnn];
      }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:59:39.763

Γεια σου Παναγιώτη。

[您应该阅读有关位置服务的官方文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

这是一个很好的指南，应该涵盖所有内容。我将为您做一个快速回顾，并向您解释每种可用方法的优缺点，因为我已经为我们的应用程序与核心位置服务进行了广泛的合作：

有 3 种不同的方法可以在 iOS 中获取用户位置。

1.  普通 GPS 位置监控器（优点：非常准确且更新迅速，缺点：电池电量消耗太快）
2.  重要的定位服务（优点：非常省电，可以从后台启动应用程序，即使在进入区域后终止，无需后台位置监控任务和许可，缺点：在确定位置和接收位置更新方面非常不准确变化）
3.  区域监控（优点：非常省电，可以从后台启动应用程序，即使在输入区域后终止，无需后台位置监控任务和权限缺点：获取有关输入区域的通知不准确，最多 20 个区域可以由应用程序监控）

因此，根据您想要的准确性，您必须选择服务。当然，如果您采用 GPS 方式，就像您在代码中使用的那样，**您应该始终在获得更新后关闭位置更新**并再次请求位置，仅在一段时间后，否则您的应用程序将耗尽用户的电池。

当然，您可以随时重新启动用户的位置更新。如果您需要在应用程序的许多视图控制器中更新位置，我建议您为位置管理器创建一个单例类！

至于 GPS 监控，在您的 CoreLocation 委托方法 didUpdateToLocation 中，执行以下操作：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{

    NSDate* eventDate = newLocation.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    //prevent Location caching... (only accepts cached data 1 minute old)
    if( abs(howRecent) < 60.0) {
        [self.locationManager stopUpdatingLocation];
        //capture the location... (this is your code)

        //update location after 90 seconds again
        [self performSelector:@selector(startUpdatingLocation) withObject:nil afterDelay:90];
     }

} 
```

并再次更新位置：

```
- (void)startUpdatingLocation {
    if([CLLocationManager authorizationStatus]==kCLAuthorizationStatusAuthorized || [CLLocationManager authorizationStatus]==kCLAuthorizationStatusNotDetermined) {
        self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        [locationManager startUpdatingLocation];
    }
} 
```

并确保我们取消了 performSelector 以防用户更改 viewController，将其添加到：

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];    
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
} 
```

# python - 动态删除树中的奇数行

> ID：13847231
> 
> 赞同：0
> 
> 时间：2012-12-12T19:35:00.430
> 
> 标签：python, recursion, tree, dynamic-programming

所以我一直在复习一些旧的家庭作业，其中一项任务是使用递归删除树的奇数行（不包括根）。为了帮助您可视化，这是初始树的图像：

![树](../Images/e121c928f76b0c6906b1e94657abc628.png)

所以在调用删除方法后，[bcd] 将消失，[hi] 将消失。这是我的递归代码。

```
def deleteOddRows(self):
    oddRemoval = [] #Generate list with odd rows removed
    for child in self.getChildren(): #Children of the root
        for childChildren in child.getChildren(): #Grandchildren
            oddRemoval.append(childChildren) #Puts into list
            childChildren.deleteOddRows() 
    self.children = oddRemoval 
```

我现在又回到了这个问题，并尝试使用动态编程来解决它，但我似乎无法围绕一个能让我得到我正在寻找的结果的解决方案。如果有人可以帮助我指出正确的方向，那将是一个很大的帮助。谢谢！

# content-management-system - 寻求 Ektron 网站的托管服务提供商推荐

> ID：13847232
> 
> 赞同：-1
> 
> 时间：2012-12-12T19:35:02.137
> 
> 标签：content-management-system, ektron

我们在几台服务器上有很多 Ektron 8.0.1 站点，我们正在研究新的托管公司。我们正在寻找一个真正与我们“合作”的主机，而不是强迫我们弄清楚如何配置/调整/故障排除服务器。

有人对 Ektron 友好的托管服务提供商有什么建议吗？

我还在[http://dev.ektron.com/forum.aspx?g=posts&t=41805上发布了这个](http://dev.ektron.com/forum.aspx?g=posts&t=41805)

谢谢，扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:39:41.357

(Full disclosure: I work for Ektron.)

Before I started working for Ektron, though, I was an Ektron customer. Speaking strictly as a former customer, we worked with ServerSide.net. They're very good at Ektron and partnering in the way you describe. Able to help with everything we needed and more.

# apache - Apache2 服务器 MIME 类型

> ID：13847234
> 
> 赞同：5
> 
> 时间：2012-12-12T19:35:05.893
> 
> 标签：apache, apache2, download, mime-types, file-extension

我试图让我的 Apache2 Web 应用程序在浏览器指向时将任意文件扩展名作为八位字节流推送。

即有人去 blahblah/examples/example1.xyz 我希望浏览器下载 .xyz 文件，而不仅仅是显示它。

我尝试在 Web 应用程序的根目录中添加 .htaccess，包括

```
AddType application/octet-stream xyz 
```

而且我还尝试将 mime 类型添加到`/etc/apache2/mods-enabled/mime.conf`并`/etc/mime.types`作为类型库从`mime.conf`.

我在互联网上阅读了很多关于这方面的内容，但仍然没有得到这个工作。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T19:37:25.240

我相信你必须`.`在扩展之前添加一个：

`AddType application/octet-stream .xyz`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T15:49:12.953

我不建议将 .htaccess 与 Rails 应用程序一起使用。您必须为 apache 和乘客配置某些东西。最好使用 /etc/httpd/conf.d 中的配置文件（或者您在服务器上配置应用程序的任何位置）。如果您按如下方式放置 AddType 行（在我的情况下，我遇到了可下载 Python 脚本的问题）：

```
AddType application/x-python-script .py 
```

在你的 webapp 配置文件的 VirtualHosts 部分，那么你应该没问题。如果您真的想使用 .htaccess，请执行

```
chmod 600 .htaccess 
```

在您的公用文件夹中，这会导致 apache 出于安全原因而不会忽略该文件（但同样，您需要配置许多其他内容）。

# performance - three.js 粒子系统 vs 独立几何性能

> ID：13847235
> 
> 赞同：1
> 
> 时间：2012-12-12T19:35:20.760
> 
> 标签：performance, three.js, particles

我的代码管理着数千个粒子。这些粒子可以具有不同的纹理，并且这些纹理会随着时间而改变。所以到目前为止我还没有使用过粒子系统。我只是在场景中一一添加网格。

现在到了优化的时候，应用程序在旧计算机上运行缓慢。性能工具显示，占用 CPU 最多的任务是 Three.js 渲染方法。我想知道是否应该更改代码结构以切换到粒子系统。

差异会很大吗？ **与独立网格管理相比，粒子系统有哪些优化**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:22:30.037

没有额外的材料很难说，但是如果您查看[Three.js 代码](https://github.com/mrdoob/three.js/blob/master/build/three.js)，您会看到那里的粒子是如何管理的。

如果您要为每个粒子切换纹理，那可能是一个真正的性能杀手。尝试按纹理对粒子进行排序，以便每组粒子只切换一次，而不是每个粒子一次。

如果您对粒子进行深度分类，这可能不切实际，但是......我不知道您要做什么。如果是这种情况，并且您只使用少量不同的纹理，请考虑将它们全部放在“图集”中，然后将 UV 贴图偏移传递给每个粒子，而不是交换采样器。这也会更便宜。

# javascript - 没有复选框的 Kendo UI 树视图父节点

> ID：13847237
> 
> 赞同：7
> 
> 时间：2012-12-12T19:35:46.473
> 
> 标签：javascript, checkbox, treeview, kendo-ui

什么方法可以实现带有复选框的 TreeView 显示，但我不需要父节点的复选框，仅适用于没有子节点的“项目”。即我正在显示文件夹结构，但不想为任何文件夹设置复选框，仅用于文件。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T20:55:41.637

您应该使用[复选框模板](http://docs.kendoui.com/api/web/treeview#checkboxestemplate-stringfunction)。如果没有子项，则根本不显示复选框输入。 这是我正在谈论[的 JSBIN 示例。](http://jsbin.com/edamuj/131/edit)

# c# - 如何将 XML 元素值保存到变量中

> ID：13847240
> 
> 赞同：0
> 
> 时间：2012-12-12T19:35:50.530
> 
> 标签：c#, xml, asp.net-mvc

我的 MVC 应用程序的一部分是一个控制器操作方法，它将数据发布到 Web 服务并接收 XML 响应。我已经想出了如何将响应放入 XDocument，但现在我需要查看信息并获取一些节点值。我一直在研究，我能找到最接近的选择是使用 XPath。

我想知道这是否是最好的方法，或者您是否建议另一种方法。我正在使用的 XML 将类似于：

```
<HistoryResponse>
  <ResponseType>resultsList</ResponseType>
  <Matches>0</Matches>
  <SessionID>75803234r23df3de</SessionID>
  <RecStart>0</RecStart>
  <ClientCode></ClientCode>
  <Results></Results>
</HistoryResponse> 
```

我需要通过，获取 Matches 和 SessionID 并将值放入变量中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:45:45.583

您可以将您的 xml 转换为字典

```
var xDoc = XDocument.Parse(xmlstring); //XDocument.Load(fileName)
var dict = xDoc.Element("HistoryResponse")
               .Elements()
               .ToDictionary(e => e.Name.LocalName, e => e.Value); 
```

并用作

```
string sessionID = dict["SessionID"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:40:30.033

Use **LINQtoXML**. (you need to import the namespace `System.XML.Linq`)

```
string filePath = Server.MapPath(@"../YourFileLocation/somexml.xml");

//you can load the XML from file/stream /string etc...

XElement elem = XElement.Load(filePath);
if (elem != null)
{
   string sessionId=elem.Element("SessionID").Value;
   string matches=elem.Element("Matches").Value;
} 
```

If you are getting the XML in a string, you can load that to your XElement using `Parse` method.

```
string xml = "<HistoryResponse><Item>XML Item A</Item></HistoryResponse>";
XElement elem = XElement.Parse(xml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:40:35.117

That would definitely work with an XPath expression. Check out [how to use XPath with XDocument?](https://stackoverflow.com/questions/6209841/how-to-use-xpath-with-xdocument) for info on how to do it.

# asp.net - 使用 EPPlus 打开 Excel

> ID：13847243
> 
> 赞同：0
> 
> 时间：2012-12-12T19:36:00.843
> 
> 标签：asp.net, vb.net, excel, epplus

我正在尝试打开我使用 epplus 编写的 excel 文件。

我正在使用它打开它，它可以在开发服务器中工作，但在发布后不能。

```
System.Diagnostics.Process.Start(Server.MapPath("~\chart.xlsx")) 
```

我怎样才能打开这个excel表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:57:09.043

您的代码正试图打开**服务器上**的 Excel 文件。即使您在服务器上安装了 Excel，也可能不会有人坐在服务器前看到它。

我怀疑你想**在客户端**打开文件：

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
Response.AppendHeader("Content-Disposition", "attachment;filename=chart.xlsx")
Response.WriteFile(Server.MapPath("~/chart.xlsx"))
Response.End() 
```

您还需要记住，可能有多个用户同时访问您的应用程序。如果您`chart.xlsx`动态生成文件，则一个请求的文件可能会覆盖另一个请求的文件。最好将文件直接保存到响应中：

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
Response.AppendHeader("Content-Disposition", "attachment;filename=chart.xlsx")
YourExcelPackage.SaveAs(Response.OutputStream)
Response.End() 
```

# string - 如何解密未知解密的加密字符串

> ID：13847245
> 
> 赞同：-3
> 
> 时间：2012-12-12T19:36:17.110
> 
> 标签：string, encryption

我有这个我想解密的字符串

```
x7jxBpEygx2DJXppdyBeso9bUKs3AFRYPd4V93TP16ZmP12kaA2qyYoVPCdyKQAlK2F41TqQR2kX
q0AVeXPPTVJNN/J4BmzIHaoS3xJKNNeSKM6DXu0lkWA+MG5T9bGRuoNQcb7bJp0dz22Xz3wS9KfF
MY7mOKNBQIriYCwjU9b23cL/xIC0Ix0NESNcKchCcKUHm/QxD2pmeQ5pS9xda4BW2t0+E+yUtwxa
ae9lo+dniSPT/hj6cO9UkvKOqzXpktKwW0ljlJcCRp5sJ5p1dQedEAcKb2CcnNotjdtzwAzCzMXI
4qV3OXRZ3es3ql3n4e0q7wYKs1Huu05Z5cg3Skr5+sjqx27D1X+bQdoQIWOt6VsX52oll6JtzSQx
XXfja6fYYArX3rlXqvbHD8ht3vWO5kSTbXe58/pZ6uvvcz2q7OI483c8YphXxb88iCWRK/IE7Z7h
ROueTT2nbU7jJRGF6nZS2C9r/wWRT28a8vnINMzEzeV0MAPfW1ZBs/xEMH5VatNyjti1G58wvU+F
ksfifxdJ41XjKhJmV/kUIlmQtKQtJsC75rCTDtetVIXBzKlHy5XvqKkL5ZTJwoirwMmWXX7+6O2w
UQIOri6ZP4yTwGE/2BJueDFp98Oy/2cdWUNYYIACM+xIHw/wtyNTn/hYOwxpG+LcbuvdVUW2Ihwe
b7oosEif3idUSEolBf8tBwFvfW4XYVkvr3LB02JvBoU0xGCykNNsFDURKa9U6AlX1a/4POPX98t5
ZkMlw52vlxhCQV3iGb9Egrpm5ymKUdLtYW7KUDI0JnooIEy3a8stnTfVwpxNodk9jvjCIi4CwtL0
JjFtjUeXHXebVo/o8jiB7TO5+cwjJktcArbRpPKS/glAWKBhzpTxJXijUcwn8SF6vHeMNosAbOvG
7d86pwPMUS+0ycOplqAl7vgKkf9SzEtV0MTztb//L6jfTVRpkPwbYZuzOU2sg7YszRsl+Pw++E5q
HJ6JzcfxJWBvSPv5eL6qH1JBgRo+StuqTj0QwH2L81GKY5ilXL9oDHpiIpQ/p6FeyWEK9yG9Vi0+
c/P0InNgYbbAQ8WM0cqWKldWPCpjkg4MXcwg9RVlSIjCWsG3Pr+amZN6DoGkNDUxCRvmxKjjvXZK
9r9dulv2GRhw 
```

但我不知道用于加密此字符串的方法。有什么方法可以找出使用了什么加密并解密这个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:20:43.940

如果你没有私钥。你不能解密。如果您没有加密方法并且没有密钥。你超级不能解密。

没有办法确定使用了什么加密。即使您确实知道，除非它是 md5（我可以通过查看它不是）或其他超级简单的东西（不太可能），然后没有完美的方法来破解它，并且大多数这些方法都涉及超级计算机和很多和很多时间。

# sql - 相同值的 SQL 总和

> ID：13847253
> 
> 赞同：0
> 
> 时间：2012-12-12T19:37:07.323
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 SQL Server 2008。

这是我的数据：

```
column1   columnAmount
-----------------------
  ab           3
  ac           2
  ab           4 
```

所以在我的查询中，我想对colum1中相同的值求和。

我想要的输出是：

```
column1    columnAmount
----------------------    
  ab           7
  ac           2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:38:35.310

这是一个基本`SUM ... GROUP BY`

```
SELECT column1,
       Sum(columnAmount) AS columnAmount
FROM   YourTable
GROUP  BY column1 
```

正如语法所示，它将输入分成组（每个不同的值一组`column1`）并计算每个组的总和。

# c# - 使用 if-else 查找最大的三个数。为什么它不想编译？

> ID：13847256
> 
> 赞同：2
> 
> 时间：2012-12-12T19:37:13.870
> 
> 标签：c#, if-statement

我是编程初学者，我真的很想知道我的错误是什么：

```
static void Main(string[] args)
{
    int a = int.Parse(Console.ReadLine());
    int b = int.Parse(Console.ReadLine());
    int c = int.Parse(Console.ReadLine());

    if ((a > b) && (a > c))
    {
       Console.WriteLine(a);
    }
    else
    {
       if ((b > a) && (b > c)) ;
       {
          Console.WriteLine(b);
       }
       else
       {
          Console.WriteLine(c);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T19:38:52.783

```
if ((b > a) && (b > c)) ; 
```

Remove the `;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:40:46.513

你不能在你的 if 条件中使用`;`。去掉它。

```
if ((b > a) && (b > c))
{
      Console.WriteLine(b);
} 
```

而且您还需要`}`代码的另一端。

**编辑**：实际上你可以使用`;`你的 if 条件。例如;

```
if ((b > a) && (b > c)); 
```

是平等的

```
if ((b > a) && (b > c))
{

} 
```

# asp.net-mvc - 拥有多个表单是同一页面并提交其中一个

> ID：13847262
> 
> 赞同：0
> 
> 时间：2012-12-12T19:37:27.913
> 
> 标签：asp.net-mvc

我有一个包含多个表单的主视图。这些表单位于不同的 PartialViews 中，但其中一个位于主视图中。

问题是主视图中的表单提交后，我注意到与PartialViews中的表单相关的其他[HttpPost]动作也提交了！

我知道使用 Ajax 技术提交表单可以解决问题，但我正在寻找其他解决方案。

提前致谢

# sql-server-2008 - SQL Server - 根据时间从单个记录创建多行

> ID：13847268
> 
> 赞同：1
> 
> 时间：2012-12-12T19:37:48.307
> 
> 标签：sql-server-2008

我正在尝试创建一个查询，该查询从包含开始月份和结束月份的记录的表中返回每个月的单独行。EG 如果记录的开始月份为 2012 年 1 月，结束月份为 2012 年 3 月，我想返回三行 - 2012 年 1 月、2012 年 2 月和 2012 年 3 月。开始月和结束月之间的实际差距可能跨越数年和需要返回的行数因记录而异。实际目的是将总成本拆分为每月的成本

就像是：

记录：

```
Value  Start Month  End Month
 30     Jan 2012     March 2012 
```

查询返回

```
Value  Month
 10    Jan 2012
 10    Feb 2012
 10    March 2012 
```

已经找了好几个小时了——谁能帮帮我！！！提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:43:05.917

如果您有一个整数表，您可以将日期部分加入到[整数表中，](http://dataeducation.com/you-require-a-numbers-table/)这将为您提供月份范围。另一个加入月份描述表将使您恢复标签。要获得拆分成本，您需要计算出中间的行数并划分成本（假设它是直接拆分。

```
 select 
    bb.integer as MonthDesc,
cc.MonthDescription,
aa.MyCost / datediff(mm,mydatefield, mydatefield2)
    datepart(yy, mydatefield)
    from dbo.tblMyTableofFacts aa
    inner join dbo.tblMyTableOfInters bb
    on bb.integer between datepart(mm,mydatefield) and datepart(mm,mydatefield2)

inner join dbo.tblMyTableOfMonths cc
on bb.Integer = cc.MonthNumber 
```

# jquery - 在我的情况下 animate 和 setInterval 有什么区别

> ID：13847269
> 
> 赞同：0
> 
> 时间：2012-12-12T19:37:49.447
> 
> 标签：jquery

HTML

```
<div id="answer" style="width:100px;height:50px;">Answer></div> 
```

JS

```
$(function () {
    var answer = $('#answer');
    var sizeChangerHandle;

    function setBackground() {
        sizeChangerHandle = setInterval(changeConstantly, 1);
    }

    function changeConstantly() {

        answerHeight = answer.height();
        answerWidth = answer.width();
        answer.width(answerWidth + 1);
        answer.height(answerHeight + 1);
        setTimeout(function () {
            clearInterval(sizeChangerHandle);
        }, 300)

        // I am only using one of these codes, either the above or the below! I comment the other one out when I use one.
        answer.animate({
            width: 400,
            height: 200
        }, 300);

    }

    setBackground();
}); 
```

我正在尝试将我的 DIV 从 100 像素宽扩大到 400 像素宽，并且需要 300 秒。当我使用动画功能时，它可以完美运行。Div 最终宽度为 400 像素，需要 300 秒。当我使用间隔时，DIV 的宽度停止在 176 像素。这是为什么，它真的应该运行 300 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:52:45.980

您的`changeConstantly`间隔并不是真正每毫秒触发一次。来自 MDN 的注释[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Minimum_delay_and_timeout_nesting)：

> 从历史上看，浏览器实现了`setTimeout`“钳制”：`setTimeout`延迟小于“最小延迟”限制的连续调用被强制使用至少最小延迟。最小延迟 ,`DOM_MIN_TIMEOUT_VALUE`是**4 ms** ...

MDN 页面上[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval#Notes)确认此 4 毫秒限制也适用`setInverval`。

因此，您的区间函数仅运行 75 次（300 ms 除以 4 ms inverval），而不是 300 次。（或者，它可能运行 76 次——最后一个间隔可能在间隔被清除之前运行。）

解决方案是使用不小于 的间隔延迟重写您的代码`4`，并使您`<div>`在每次迭代期间增长 4 倍以上，即使用`answer.height(answerHeight + 4);`.

# vba - Word VBA 宏在打开时切换功能区选项卡

> ID：13847270
> 
> 赞同：2
> 
> 时间：2012-12-12T19:37:53.823
> 
> 标签：vba, tabs, ms-word, ribbon

我有一个从功能区按钮运行并打开模板的 vba 宏。使用第一个按钮旁边的其他按钮对模板进行修改。但是，当模板从“模板”选项卡作为新文档打开时，会重新选择“主页”选项卡。有没有我可以添加到宏末尾的代码，它会自动将其切换到“模板”选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:22:56.023

您可以使用键盘组合 Alt + Home + (2x) Esc 进行操作

```
SendKeys "%(H)", False
SendKeys "{esc}", True
SendKeys "{esc}", True 
```

# authentication - 设置中的权限与登录对话框中的权限不匹配

> ID：13847271
> 
> 赞同：0
> 
> 时间：2012-12-12T19:37:57.520
> 
> 标签：authentication, permissions, facebook-login

对于我的应用程序，我需要用户的生日和电子邮件地址。所以我设置了权限！ ![权限设置](../Images/5375593ed02717053a4d40ccb6b3c933.png)

在预览中它工作得很好：

![登录预览](../Images/fbb31d053a1bfebb45b5cb77847b5012.png)

但在实际的登录对话中却没有！

![实际登录](../Images/d19845f7714f999fdd9d299de59235df.png)

因此，我没有权限。现在我该怎么做？

代码：基本上就在facebook刚开始的时候......

```
window.fbAsyncInit = function() { 

  FB.init({ // init the FB JS SDK
    appId      : 'XXXXXXXX', // App ID from the App Dashboard
    channelUrl : 'http://nerdjokes.funpic.de/channel.html', // Channel File for x-domain         communication
    status     : true, // check the login status upon init?
    cookie     : true, // set sessions cookies to allow your server to access the session?
    xfbml      : true  // parse XFBML tags on this page?
  });

  FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      loggedIn();
    } else if (response.status === 'not_authorized') {
      login(); //user hast not authorized the app. Display the dialogue
    } else {
      login();
    }
  });
};
  function login() {
   FB.login(function(response) {
    if (response.authResponse) {
        // connected
    } else {
        // cancelled
    }
  }); 
```

# php - php oo编程父实例化子

> ID：13847272
> 
> 赞同：0
> 
> 时间：2012-12-12T19:37:57.120
> 
> 标签：php, oop

> **可能重复：**
> [PHP 中的后期静态绑定到底是什么？](https://stackoverflow.com/questions/1912902/what-exactly-is-late-static-binding-in-php)

我想构建一个**抽象类**，它将使用**静态**函数实例化它的子类。

```
<?php

class A
{
    protected $value;

    public function __construct($value)
    {
        $this->value = $value;
    }

    public static function create($value)
    {
        /* A must not know about B! 
         * I give that example for the context understanding */
        return **new B**($value);
    }
}

class B extends A
{
} 
```

当然 A**不**知道 B .. 我不知道这是否可能，我不想在我所有的 170 个子类中实现 create 函数......

你认为我应该使用一个**工厂**来返回我的 170 个类之一的实例吗？这很麻烦，而且不太可维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:17:44.747

我找到了解决方案，但是可以吗？

```
<?php

class A
{
    protected $value;

    public function __construct($value)
    {
        $this->value = $value;
    }

    public static function create($value)
    {
        $child = get_called_class();
        return new $child($value);
    }
} 
```

我测试了它，它工作正常它在我的上下文中真的很有用..我不知道它是否丑陋，因为父类**不知道**子类，如果子类不存在，调用者**将不会允许**调用创建函数..

现在，对于我的实际测试，我使用：

```
$graph->setBgcolor(Bgcolor::create('yellow')->valid()); 
```

和

```
 public function setBgcolor(Bgcolor $bgcolor) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:04:43.233

一个成功的实现可能是这样的

```
class A
{
    protected $value;
public static function create($value)
{
    $type = "NotDivisible";
    for ($i = 2; $i <= 10; $i++) {
         if($value % $i == 0)
         {
             $type = "DivisibleBy".$i;
             break;
         }
    }
    $instance = new $type;
    $instance->value = $value;
    return $instance;
}
}

public class DivisibleBy2 extends A
{
} 

public class DivisibleBy3 extends A
{
} 

public class DivisibleBy5 extends A
{
} 
... 
```

依此类推......（我还没有编译它，抱歉语法错误）

现在您知道静态方法与创建的对象实例无关，因为这就是我们首先创建静态方法的原因。

所以你可以把它们放在任何其他类中，恭喜你已经实现了工厂设计模式。

**然而，这不是一个好的实现。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:09:16.563

另一种解决方案是**不**使用静态函数并使用基本的新...

```
<?php

class A
{
    protected $value;

    public function __construct($value)
    {
        $this->value = $value;
    }
} 
```

现在，对于我的实际测试，我使用：

```
$graph->setBgcolor(new Bgcolor('yellow')); 
```

和

```
 public function setBgcolor(Bgcolor $bgcolor) 
```

我仍然认为

```
Bgcolor::create('yellow')->foo() 
```

看起来比

```
(new Bgcolor('yellow'))->foo() 
```

# java - 以任意顺序对字符串进行排序

> ID：13847276
> 
> 赞同：0
> 
> 时间：2012-12-12T19:38:21.680
> 
> 标签：java, sorting

我有一组代表产品尺寸的字符串，其中大多数在含义上重复但不是名称。（IE 大号尺寸至少有 14 种不同的拼写可能，每种拼写都需要保留。）我需要根据它们所代表的大小对它们进行排序。任何可能的小值都应该在任何可能的中值之前，等等。

我认为这是可能的唯一方法是实现一个特定的比较器，它包含不同的集合，将每个大小分组到它所代表的基本大小上。然后我可以通过确定特定大小属于哪个 Set 来实现 -1,0,1 关系。

有没有更强大的方法来实现这一点？具体来说，我担心从现在起两周后有人想出另一种拼写“大”的方法。

编辑：要清楚它不是我有疑问的实际比较器，它是包含每个组的集合的设置。这是处理这种情况的正常方法吗？我如何在未来证明它，以便每次添加新大小都不需要完全重新编译/部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:40:22.580

Custom comparator *is* the solution. I do not understand why do you worry that this is not robust enough.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:26:30.443

一种简单的方法是从资源包中加载大小别名。一些示例代码（将所有文件放在同一个包中）：

封装 size 属性的接口

```
public interface Sized {
    public String getSize();
} 
```

一个产品类

```
public class Product implements Sized {

    private final String size;

    public Product(String size) {
        this.size = size;
    }

    public String getSize() {
        return size;
    }

    @Override
    public String toString() {
        return size;
    }
} 
```

一个神奇的比较器：

```
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.ResourceBundle;

public class SizedComparator implements Comparator<Sized> {

    // maps size aliases to canonical sizes
    private static final Map<String, String> sizes = new HashMap<String, String>();

    static {
        // create the lookup map from a resourcebundle
        ResourceBundle sizesBundle = ResourceBundle
                .getBundle(SizedComparator.class.getName());
        for (String canonicalSize : sizesBundle.keySet()) {
            String[] aliases = sizesBundle.getString(canonicalSize).split(",");
            for (String alias : aliases) {
                sizes.put(alias, canonicalSize);
            }
        }
    }

    @Override
    public int compare(Sized s1, Sized s2) {
        int result;
        String c1 = getCanonicalSize(s1);
        String c2 = getCanonicalSize(s2);
        if (c1 == null && c2 == null) {
            result = 0;
        } else if (c1 == null) {
            result = -1;
        } else if (c2 == null) {
            result = 1;
        } else {
            result = c1.compareTo(c2);
        }
        return result;
    }

    private String getCanonicalSize(Sized s1) {
        String result = null;
        if (s1 != null && s1.getSize() != null) {
            result = sizes.get(s1.getSize());
        }
        return result;
    }

} 
```

SizedComparator.properties：

```
1 = Small,tiny
2 = medium,Average
3 = Large,big,HUGE 
```

单元测试（只是为了快乐的流程）：

```
import org.junit.Before;
import org.junit.Test;

public class FieldSortTest {

    private static final String SMALL = "tiny";
    private static final String LARGE = "Large";
    private static final String MEDIUM = "medium";

    private Comparator<Sized> instance;

    @Before
    public void setup() {
        instance = new SizedComparator();
    }

    @Test
    public void testHappy() {
        List<Product> products = new ArrayList<Product>();
        products.add(new Product(MEDIUM));
        products.add(new Product(LARGE));
        products.add(new Product(SMALL));

        Collections.sort(products, instance);

        Assert.assertSame(SMALL, products.get(0).getSize());
        Assert.assertSame(MEDIUM, products.get(1).getSize());
        Assert.assertSame(LARGE, products.get(2).getSize());
    }
} 
```

请注意，ResourceBundles 会自动缓存。您可以通过以下方式以编程方式重新加载 ResourceBundle：

```
ResourceBundle.clearCache(); 
```

（从 Java 1.6 开始）。或者，您可以使用一些[Spring 魔法](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/ReloadableResourceBundleMessageSource.html)来创建自动重新加载消息资源。

如果从摇摇晃晃的属性文件中读取数据还不够酷，您也可以很容易地将您的大小别名保存在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:02:32.347

要对字符串集合（或一般的对象）强加任意顺序，执行此操作的标准方法是按照您的建议实现 Comparator 。

除了您建议的“手动”解决方案之外，您还可以考虑将字符串的相对[编辑距离](http://en.wikipedia.org/wiki/Edit_distance)与规范示例进行比较。这将更加*灵活*，因为它将适用于您没有想到的替代方案。但就所涉及的工作而言，这对您的应用程序来说可能是多余的。

# php - 数组内的数组值乘以另一个数组 PHP

> ID：13847280
> 
> 赞同：-3
> 
> 时间：2012-12-12T19:38:24.743
> 
> 标签：php, arrays, math

好的，所以第二次发布问题，我在第一个问题上取得了巨大的成功，所以我又来了。
我有一个数组，其中填充了 8 个其他数组，其中包含 5 个值，例如 0,2,5,0,1（值也不固定）。我需要做的是将一个数组 (1,2,3,4,5) 乘以我存储在第一个数组中的 8 个数组中的***每一个。***
这就是我所拥有的，代码从我拥有的按钮中获取值并将它们存储在数组中：

```
$filename = "Results.txt";
$lines = file($filename);

$q1 = $_POST['q1']; //stored value between 1-5
$q2 = $_POST['q2'];
$q3 = $_POST['q3'];
$q4 = $_POST['q4'];
$q5 = $_POST['q5'];
$q6 = $_POST['q6'];
$q7 = $_POST['q7'];
$q8 = $_POST['q8'];

$qN = 1;  //question number
$newLines = '';
$values = array("1", "2", "3", "4", "5");
$total = array();
    foreach($lines as $line) {

        $line = trim($line);  //remove excess newlines etc.
        $lineArr = explode(',',$line);  //split line into array by commas
        $index = ${'q'.$qN}-1; //zero based

    if (isset($lineArr[$index])){
        $lineArr[$index]++;  //add to position by one vote.
        $total = array_sum($lineArr);
    $newLines .= implode(',',$lineArr) . "\r\n";
    $qN++;
}

//write contents back to file.<br/>
file_put_contents($filename, $newLines); 
```

所以这就是我所拥有的，我希望应该很清楚，但是是的，我需要取计算值，然后将它们除以第一个数组中每一行的总和。我希望这解释得足够清楚，我也意识到如果将这些值加载到数据库中会好得多，不幸的是这不是我需要的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:51:00.207

如果我理解正确，您需要使用以下 2 个数组 -

```
$q1 = array(0,1,2,2,4);
$values = array(1,2,3,4,5); 
```

并将它们相乘 -

```
$q1 * $values 
```

要得到 -

```
$result1 = array(0,2,6,8,20); 
```

* * *

去做这个 -

首先，改变你的`$q#`变量 -

```
$q1 = $_POST['q1'];
$q2 = $_POST['q2'];
...
$q7 = $_POST['q7'];
$q8 = $_POST['q8']; 
```

到一个数组 -

```
$q[1] = $_POST['q1'];
$q[2] = $_POST['q2'];
...
$q[7] = $_POST['q7'];
$q[8] = $_POST['q8']; 
```

然后使用嵌套`for`循环 -

```
$result = array();  // Creates a Results array
for($i=0;$i<count($q);$i++){   //loops through number of questions. '$i<count($q)' makes it so you can do less (ie. 'q[5]') or more (ie. 'q[14]') without having to change the for loop
    for($j=0;$j<count($values);$j++){   //loops through number of values in your $values array. '$i<count($values)' makes it so you can do less (ie. 'array(1,2,3)') or more  (ie. 'array(1,2,3,4,5,6)') without having to change the for loop
          $result[$i+1][$j] = $q[$i+1][$j]*$values[$j];}  // create array $result[1] = array(#,#,#,#,#), etc.
} 
```

您可以查看这个 PHPFiddle 作为示例。[http://phpfiddle.org/main/code/45a-6j0](http://phpfiddle.org/main/code/45a-6j0)

这会给你这样的结果 -

```
$q[1] = array(4,5,2,0,5)
$q[2] = array(5,1,0,0,1)
$q[3] = array(1,4,2,0,0)
$q[4] = array(4,5,0,0,4)
$q[5] = array(2,2,3,4,0)
$q[6] = array(5,4,3,2,0)
$q[7] = array(2,1,5,4,2)
$q[8] = array(4,4,3,5,5)

Results
$result[1] => array(4,10,6,0,25)
$result[2] => array(5,2,0,0,5)
$result[3] => array(1,8,6,0,0)
$result[4] => array(4,10,0,0,20)
$result[5] => array(2,4,9,16,0)
$result[6] => array(5,8,9,8,0)
$result[7] => array(2,2,15,16,10)
$result[8] => array(4,8,9,20,25) 
```

# javascript - 摆脱 for-in 语句

> ID：13847281
> 
> 赞同：0
> 
> 时间：2012-12-12T19:38:26.100
> 
> 标签：javascript, jslint, for-in-loop

这是一个创建面包屑的函数。它最初来自其他人，但我已经对其进行了调整以满足我的需要。现在——我想修复'for(i in bits)'的错误语法，但是当我尝试了我认为可行的方法时，它不起作用。

```
for (i = 0; i < bits; i++) {etc...}; 
```

我以为这行得通，它行不通。这是完整的脚本...

```
function breadcrumbs() {
'use strict';
/*jslint plusplus:true*/
/*jslint browser:true*/
var sURL, bits, x, stop, output, i, y, chunkStart;
sURL = String();
bits = {};
x = 0;
stop = 0;
output = "";
sURL = location.href;
sURL = sURL.slice(8, sURL.length);
chunkStart = sURL.indexOf("/");
sURL = sURL.slice(chunkStart + 1, sURL.length);
while (!stop) {
    chunkStart = sURL.indexOf("/");
    if (chunkStart !== -1) {
        bits[x] = sURL.slice(0, chunkStart);
        sURL = sURL.slice(chunkStart + 1, sURL.length);
    } else {
        stop = 1;
    }
    x++;
}
for (i in bits) {
    output += "<a href=\"";
    for (y = 1; y < x - i; y++) {
        output += "../";
    }
    bits[i] = decodeURIComponent(bits[i]);
    output += bits[i] + "/\">" + bits[i] + "</a> &nbsp;|&nbsp; ";
}
document.write(output + document.title);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:20:19.587

您需要在以下几行中将与对象相关的代码替换为与数组相关的代码：

```
// original code                 // fixed code
bits = {};                       bits = [];
for (i in bits) {                for (i = 0; i < bits.length; ++i) { 
```

顺便说一句，您可以使用`sURL.split("/")`将 URL 拆分为块数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:46:16.740

本文[探索 JavaScript for-in 循环](http://javascriptweblog.wordpress.com/2011/01/04/exploring-javascript-for-in-loops/)可能会有所帮助。

你会想使用一个循环，如

```
for (i = 0; i < bits.length; i++) {
  // stuff.
} 
```

另请参阅此[stackover flow JavaScript "For ...in" with Arrays](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:51:30.880

Bits 是一个对象（{}，而不是 []）。For in 将遍历其所有属性。如果你希望它是一个数组位应该初始化为一个数组。您还需要在 for 循环中使用 length 属性。对于 (i = 0;i

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T20:04:07.830

您`bits`是 JavaScript 对象[文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Literals)而不是数组。您不应该（不能）使用传统的`for`循环来迭代对象。因此， 的用法`for...in`是正确的。但是，存在一个错误——循环没有验证对象的属性是否应该被迭代。也就是说，除了对象自己的属性之外，您的循环还遍历原型属性。的正确用法`for...in`是：

```
for (prop in bits) {
  if (!bits.hasOwnProperty(prop)) {
    continue;
  }
  // Do something with `bits[prop]`.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T20:24:06.027

for-in 的问题在于它遍历对象的属性。

试试下面的代码。注意：创建 bits 数组的 while 循环已替换为 split & slice，并且简化了面包屑 URL

```
var sURL = location.href;
// the following line is just for testing...
sURL = "http://testURL.com/one/two/three/four";
var bits = sURL.split('/').slice(3);
var url = "";
var output = ""
for (i = 0; i < bits.length; i++) {
    bit = decodeURIComponent(bits[i]);
    url += "/" + bit;
    output += "<a href=\"" + url + "\">" + bit + "</a> &nbsp;|&nbsp; "
}
document.write(output); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T01:35:18.943

这是上面迈克答案的扩展/改进。

```
function breadcrumbs() {
    'use strict';
    /*jslint plusplus:true*/
    /*jslint browser:true*/
    var sURL, bits, bit, url, output, i, n, loc;
    sURL = location.href;
    bits = sURL.split('/').slice(3);
    url = {};
    output = "";
    for (i = 0; i < bits.length; i++) {
        if (bits[i] !== "") {
            bit = decodeURIComponent(bits[i]);
            if (bit.indexOf('.htm') >= 0) {
                n = bit.indexOf('.');
                bit = bit.slice(0, n);
            }//end bit.indexOf
            url += "/" + bit;
            output += "<a href=\"" + url + "\">" + bit + "</a> &nbsp;|&nbsp; ";
        }//end bits[i]
    }//end for bits.length
//  document.write(output);
    loc = document.getElementById('bread');
    loc.innerHTML = output;
} 
```

我添加了两个 if 语句。由于某种原因，.split 将一个空的“”字符串作为最后一个字符串，因此如果当前数组项不是“”，则第一个 if 语句仅执行其余代码。第二个 if 语句删除 .--eg .htm、.html、.html# 之后的任何内容。最后，我摆脱了 document.write(output) 并将其替换为 .innerHTML。这使我可以将脚本从 HTML 的中间取出，并将其移动到在 document.ready 函数调用的底部执行。

# java - Struts 标签中的 JSTL

> ID：13847284
> 
> 赞同：1
> 
> 时间：2012-12-12T19:38:32.897
> 
> 标签：java, jsp, struts, jstl

我必须检查 struts 标记中的条件并启用或禁用该字段，如下所示：

```
<c:when test="${multipleCase=='true'}">
    <html:text property="${row.dataElementJavaName}" 
               maxlength="${row.dataElementSize}" 
               size="60" 
               value="${row.dataElementValue}"
               onkeyup="javascript:enableSave()" 
               onkeypress="return letternumber(event,'c')" 
               <c:if test="${model.readonlyStatus=='true'}">disabled</c:if> 
    />        
</c:when> 
```

编译时出现以下错误：

```
Attribute: <c:if is not a valid attribute name
Encountered end tag </c:if> without corresponding start tag. 
```

如果我在 HTML 输入字段中使用相同的，它工作正常。另一种选择是什么？任何输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:33:39.707

您不能只将`<c:if>`标签放在`<html:text>`标签声明中。它只支持[这里](http://struts.apache.org/1.2.9/userGuide/struts-html.html#text)定义的属性。

这就是为什么会出现抱怨`<c:if`属性无效的错误。它将它视为另一个不存在的属性。所以我认为您在代码中尝试的内容是不可能的。

正如您所提到的，包括`<c:if>`在 HTML 中会正常工作。我希望它看起来像这样：

```
...
<input type="text" name="${row.dataElementJavaName}" 
           maxlength="${row.dataElementSize}" 
           size="60" 
           value="${row.dataElementValue}"
           onkeyup="javascript:enableSave()" 
           onkeypress="return letternumber(event,'c')" 
           <c:if test="${model.readonlyStatus=='true'}">disabled</c:if> 
/>  
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:06:49.227

像这样移动`<c:if>`外部`<html:text>`：

```
<c:when test="${multipleCase=='true'}">
  <c:if test="${model.readonlyStatus=='true'}">
    <html:text property="${row.dataElementJavaName}" 
               maxlength="${row.dataElementSize}" 
               size="60" 
               value="${row.dataElementValue}"
               onkeyup="javascript:enableSave()" 
               onkeypress="return letternumber(event,'c')" 
               disabled
    />   
  </c:if>     
  <c:if test="${model.readonlyStatus!='true'}">
    <html:text property="${row.dataElementJavaName}" 
               maxlength="${row.dataElementSize}" 
               size="60" 
               value="${row.dataElementValue}"
               onkeyup="javascript:enableSave()" 
               onkeypress="return letternumber(event,'c')" 
    />   
  </c:if>     
</c:when> 
```

# air - QNXStageWebView - drawViewPortToBitmapData() 总是画一个白屏

> ID：13847286
> 
> 赞同：5
> 
> 时间：2012-12-12T19:38:35.313
> 
> 标签：air, blackberry-playbook

我正在使用 Playbook Air SDK 2.1.0，试图捕获我的 webview 内容的位图。这是我尝试过的：

```
var bmd:BitmapData = new BitmapData(webView.viewPort.width, webView.viewPort.height);
webView.drawViewPortToBitmapData(bmd);
var bitmap:Bitmap = new Bitmap(bmd);

view.stage.addChild(bitmap); 
```

但是，添加到舞台的位图始终是空白的。我想知道是否有人在 Playbook 上成功使用了 QNXStageWebView.drawViewPortToBitmapData() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:10:25.800

你在等待 webview 完全加载吗？

```
webView.addEventListener(Event.COMPLETE,handleLoad); 
```

# mysql - UPDATE ON DUPLICATE on a repeating item

> ID：13847290
> 
> 赞同：0
> 
> 时间：2012-12-12T19:38:48.050
> 
> 标签：mysql

I have a query that updates the db using EVENT SCHEDULER. Its supposed to update data once a day. My issue is that I can't get it to update if the record exists unless I create UNIQUE INDEX which I can't do since the domain repeats for each month.

```
INSERT INTO f_s.s_d_s_tab(month,count_per_month,updated)
SELECT * FROM 
(
SELECT
DATE_FORMAT(`FE`,'%m') AS Month, COUNT(FE) AS FirstCount, domain
FROM rets
GROUP BY DATE_FORMAT(`FE`,'%m'), domain
ORDER BY domain, Month ASC
) a
ON DUPLICATE KEY UPDATE count_per_month = a.FirstCount, updated = NOW(); 
```

records show like so

```
Domain    Month    coun_per_month
dom1       01        50
dom1       02        90
dom1       03        34
dom2       01        12
dom2       02        99
dom2       03        80 
```

etc....

what can I do to make it insert new domains but update old ones.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:45:49.313

> 我的问题是，如果记录存在，我无法更新它，除非我创建 UNIQUE INDEX，因为域每个月都会重复，所以我不能这样做。

当然可以 -在域和月份上创建一个[多列唯一索引。](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:00:36.603

它看起来不像 SELECT 列表中的列与 INSERT 列表中的列“对齐”。

```
INSERT INTO f_s.s_d_s_tab(domain, month, count_per_month, updated)
SELECT a.*
  FROM (
         SELECT r.domain                 AS domain
              , DATE_FORMAT(r.`FE`,'%m') AS month
              , COUNT(r.FE)              AS count_per_month
              , NOW()                    AS updated
           FROM rets r
          GROUP
             BY DATE_FORMAT(r.`FE`,'%m')
              , r.domain
          ORDER BY r.domain ASC, r.month ASC
       ) a
    ON DUPLICATE KEY
UPDATE count_per_month = VALUES(count_per_month)
     , updated         = VALUES(updated) 
```

要生成“重复键”条件以获取 UPDATE 操作，您需要定义一个 UNIQUE 约束（或 PRIMARY KEY）`ON f_s.s_d_s_tab (domain, month)`。

# html - 如何传递到切割列表中元素的下一行？

> ID：13847293
> 
> 赞同：-1
> 
> 时间：2012-12-12T19:38:56.937
> 
> 标签：html, css, list, line

我有列表，并使用一些 css 将它们分类到一个框中的一行中。

```
<div class="box">  
<ul>
   <li>
       <a href="http://www.google.com">Example Link Sample</a>
   </li>
</ul>
</div> 
```

CSS：

```
.box {width:500px; margin:auto;}

li {display:inline;} 
```

但是一些位于行尾的列表元素被截断。如果他们切断了，我怎么能强迫他们去另一条线。

这是示例：http: [//jsfiddle.net/P5D8u/](http://jsfiddle.net/P5D8u/)

截图： http: [//prntscr.com/m0i88](http://prntscr.com/m0i88)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:49:53.897

添加这个：

```
li {
  white-space: nowrap;
} 
```

`display:inline;`在您的`li`元素上导致第三个流到下一行。

# javascript - 在 CHROME 中水平的 HTML 菜单标题

> ID：13847295
> 
> 赞同：-1
> 
> 时间：2012-12-12T19:39:02.377
> 
> 标签：javascript, html, css

大家好，我有一个使用 JS 的 UL 菜单，在 IE 中，DIV 的标题“过滤器”是垂直的，看起来很正确，但在 Chrome 中它是水平的

感谢您的帮助

IE浏览器 ![在此处输入图像描述](../Images/3b4944d79a0f428bce4d3edc88d52936.png)

铬浏览器 ![在此处输入图像描述](../Images/58dfcb84f0666073d651324d39f5a46b.png)

HTML：

```
<div id="filterDiv">
<ul class="sideMenu" style="top: 280px;">
<li style="border-bottom: none;">
    <div id="filterItem" class="sideMenuDiv" ><img src="../images/plus.gif" />&nbsp;Filters</div>
</li>
</ul>
</div> 
```

CSS：

```
ul.sideMenu {
    position: fixed;
    top: 150px;
    left: 0px;
    margin: 0px;
    padding: 0px;
    list-style: none;
}

ul.sideMenu > li {
    height: 80px;
    width: 25px;
    background-color:#000066;
    cursor:pointer;
    border-bottom: 1px white solid;
}

div.sideMenuDiv {
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 3px;
    padding-bottom: 3px;
    background-color:#000066;
    color: #FFFFFF;
    font-weight: bold;
    writing-mode: tb-rl;
    filter: flipv fliph;
    font-size: 10pt;
    font-family: arial, sans-serif;
    height: 100%;
} 
```

JS：

```
 $(document).ready(function()
{
    $("#filterItem").click(function() {
        $("#filterPanel").fadeToggle("slow", function() {
            toggleImg( 'filter' );
        });
        $(this).toggleClass("active");
        toggleImg( "filter" );
        return false;
    });
    $("#filterPanel").draggable({ snap: "#filterItem" });
});

function closeDraggablePanel( panelName, topPos)
{
    $("#"+panelName+"Panel").toggle("slow", function() {
        toggleImg( 'filter' );
        // Reposition to default
        $("#"+panelName+"Panel").css( "top", topPos);
        $("#"+panelName+"Panel").css( "left", "25");
    });

}

function toggleImg( name )
{
    if( $("#" + name +"Panel" ).is(':visible') )
    {
        $("#" + name + "Item" + " > img").attr("src", "../images/minus.gif");
    }
    else
    {
        $("#" + name + "Item" + " > img").attr("src", "../images/plus.gif");
    }
}

// Toggle the display of the element with the given ID.
function toggle(id)
{
    $('#' + id).slideToggle("slow");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:46:03.870

`<span>`在文本周围添加一个元素：

```
<div id="filterItem" class="sideMenuDiv" >
    <img src="../images/plus.gif" />&nbsp;
    <span>Filters</span>
</div> 
```

然后使用 CSS3 变换：

```
div.sideMenuDiv span {
    display: block;
    -webkit-transform: rotate(270deg);   
} 
```

请参阅此处的 jsFiddle 示例 > [http://jsfiddle.net/TsUmk/](http://jsfiddle.net/TsUmk/)。

显然，您需要修改定位等，但这应该为您解释一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:43:53.990

过滤器目前仅在 IE 中受支持。这是一个 HTML5 的东西。规范还没有完成，浏览器只是零星地实现了规范的一部分。例如，IE 不支持画布，而其他所有主流浏览器都支持。

尝试使用：

```
-webkit-transform: rotate(-90deg);
-moz-transform: rotate(-90deg); 
```

# android - NotificationCompat 4.1 SetSmallIcon and SetLargeIcon

> ID：13847297
> 
> 赞同：39
> 
> 时间：2012-12-12T19:39:15.057
> 
> 标签：android, notifications, icons

I used this simple code to set a Notification in Android 4.1 or higher. It works well, but my problem comes with SmallIcon and LargeIcon. I understand that SmallIcon is shown in the status bar and the LargeIcon is shown in the dropdown list.

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
builder.setTicker("The ticker");
builder.setContentTitle("The title");
builder.setContentText("The text");
builder.setSmallIcon(R.drawable.my_small_icon);
Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.my_96px_large_icon);
builder.setLargeIcon(bm);       
NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
nm.notify("direct_tag", NOTIF_ALERTA_ID, builder.build()); 
```

My problem is:

1.  When the notification is launched, a cropped oversized Small Icon is shown next to "The Ticker" text, instead of showing the original SmallIcon without oversizing it. ![enter image description here](../Images/e5cec0ed96fb03d918fb6f5f2ad04fdb.png)

2.  In the dropdown list I see the LargeIcon on the left, that's good. But I also see the small icon on the right, next to the time of the notification. I don't want to show that. ![enter image description here](../Images/ea3ef031cbf3a74351d41ed30cbf5779.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-11T14:48:10.957

1.  在我的应用程序中，我提供了可绘制的大 (128x128 像素) PNG 作为小图标，它显示为缩放且没有裁剪。您的可绘制对象是在位图文件中定义的还是作为 XML 资源定义的？在 XML 中，您可以指定显示的几个方面（例如裁剪）。仔细检查您的 XML 或仅使用 PNG/JPG。

2.  正如[Notification.setSmallIcon() 上的 Android API 文档](http://developer.android.com/reference/android/app/Notification.Builder.html#setSmallIcon%28int%29)明确指出的那样：

    > 设置小图标资源，用于表示状态栏中的通知。展开视图的平台模板将在左侧绘制此图标，除非还指定了大图标，**在这种情况下，小图标将移动到右侧**。

AFAIK 除非您提供自己的通知模板（通过[Notification.setContent()](http://developer.android.com/reference/android/app/Notification.Builder.html#setContent(android.widget.RemoteViews))

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-27T04:51:50.740

有一种方法可以解决这个奇怪的实现。而不是`setLargeIcon`使用这个：

```
Notification notification=notificationBuilder.build()
notification.contentView.setImageViewResource(android.R.id.icon, R.drawable.your_large_icon); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-12T20:18:29.810

我猜这是预期的行为。

您应该检查您的小图标是否遵循图标大小的 UX 指南。小图标限制为 24x24dp。

扩展通知的默认行为是同时显示大图标和小图标。我不确定有没有办法摆脱小图标，但为什么这很重要？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-01T19:44:47.147

就我而言，我只是将红色图标设置为大图标，将 setColor 设置为 Color.WHITE，并将白色图标设置为小图标。这样，在通知区域中，我的红色图标就会显示出来，而白色图标会“消失”。

```
Bitmap icon = BitmapFactory.decodeResource(getResources(),R.drawable.app_logo);

mBuilder.setContentIntent(resultPendingIntent).setColor(Color.WHITE).setLargeIcon(icon); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-21T13:58:04.630

就我而言，我没有在所有文件夹（xhdpi、hdpi、mdpi、ldpi）中放置图标图像。

# asp.net - Drop in control to edit a table

> ID：13847301
> 
> 赞同：0
> 
> 时间：2012-12-12T19:39:22.203
> 
> 标签：asp.net

Is there a control I can just drop on a page, and link it to a sql server table that will then list all the rows in the table and let me edit any of the columns?

Also the ability to add, delete rows.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:47:27.267

查看[SqlDataSource](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.aspx)控件。您可以通过属性设置连接`ConnectionString`，也可以使用`DeleteCommand`和`InsertCommand`属性。

`GridView`然后，您可以使用 a将 DataSourceID 设置为 SqlDataSource 的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:43:32.527

您可以使用 asp.net 动态数据，它为您的表生成一个 CRUD 接口。

阅读更多

[http://www.asp.net/web-forms/videos/aspnet-dynamic-data/getting-started-with-dynamic-data](http://www.asp.net/web-forms/videos/aspnet-dynamic-data/getting-started-with-dynamic-data)

[http://msdn.microsoft.com/en-us/library/ee845452(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee845452(v=vs.100).aspx)

# .net - Exposing a DataGridView's Columns Property on the Designer in a composite UserControl

> ID：13847303
> 
> 赞同：1
> 
> 时间：2012-12-12T19:39:33.467
> 
> 标签：.net, winforms, datagridview, windows-forms-designer

Suppose I have a composite UserControl (called 'ListTable'), consisting of a label, two buttons and a DataGridView. The label is the title for the DataGridView, and the two buttons are Add Row and Delete Row, with basic, obvious functionality.

How do I expose the DataGridView's columns in the Designer, so that I can edit the DataGridView's columns through the UserControl in the exact same way I would if editing the DataGridView itself?

WHAT I'VE TRIED:

Various combinations of wrapping the DataGridView's Columns property in the ListTable via a property titled 'TableColumns' of the form 'List', with various attribute values, such as:

```
[DesignerSerializationVisibility (DesignerSerializationVisibility.Content)]
    [Editor(typeof(TableColumnEditor),
        typeof(System.Drawing.Design.UITypeEditor))]
    public List<DataGridViewColumn> TableColumns
    {
        get
        {
            List<DataGridViewColumn> columns = new List<DataGridViewColumn>();
            foreach (DataGridViewColumn col in table.Columns)
            {
                columns.Add(col);
            }

            return columns;
        }
        set
        {
            this.table.Columns.Clear();

            foreach (DataGridViewColumn col in value)
            {
                this.table.Columns.Add(col);
            }
        }
    } 
```

Where TableColumnEditor is:

```
class TableColumnEditor : CollectionEditor
{
    public TableColumnEditor(Type type) : base(type) { }

    public override object EditValue(System.ComponentModel.ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        object result = base.EditValue(context, provider, value);
        ((ListTable)context.Instance).TableColumns = (List<DataGridViewColumn>)result;

        return result;
    }
} 
```

None of this has seemed to work. Most of this is just prayful patchwork that I don't completely understand.

So, the classic dilemma: I do need to sit down and learn about these innards, but I don't have the (work)time to do an unfocused, leisurely tramp through MSDN's more esoteric WinForms articles. Is the code above salvageable? Is it in the right direction?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T09:21:23.813

Does this help:

Put a BindingSource on the Form (`BindingSource1`).

Set your DataGridView's Datasource to Binding1.

Open the designer for the Form in question, and assuming you want to show the columns for the `MyObject` class, enter the following:

```
this.BindingSource1.Datasource = typeof(YourNamespace.MyObject); 
```

# ios - Reusable UIView Animation

> ID：13847305
> 
> 赞同：0
> 
> 时间：2012-12-12T19:39:36.240
> 
> 标签：ios, uiview, uiviewanimation

Consider this basic view animation. It will scale a view down to nothing over the course of 1 second:

```
[UIView animateWithDuration: 1.0
                      delay: 0.0
                    options: UIViewAnimationCurveEaseIn
                 animations:^{
                     vw.transform = CGAffineTransformMakeScale(0.0, 0.0);
                 }
                 completion:^(BOOL finished) {
                     if (finished) {
                         vw.transform = CGAffineTransformIdentity;
                     }
                 }
]; 
```

What I'd like to do is use this same animation on many different views at different times throughout my app. To do this, I can easily put it in a method, pass in the view I want to zoom. No problem.

The challenge is that I may need to do different things at the completion of the animation depending on the situation. For example, I may want to remove the view from the SuperView in one case, and I may want to move the view to a new location (for zooming in later) in another case.

In a nutshell: How can I notify the caller of my method when the animation completes?

```
completion:^(BOOL finished) {
    if (finished) {
        vw.transform = CGAffineTransformIdentity;
        // Do something unique here
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:42:52.397

您也可以传入完成块本身：

```
- (void)animateView:(UIView *)v completion:(void ^(BOOL))ch
{
    [UIView animateWithDuration: 1.0
                          delay: 0.0
                        options: UIViewAnimationCurveEaseIn
                     animations:^{
                         v.transform = CGAffineTransformMakeScale(0.0, 0.0);
                     }
                     completion:ch
    ];
} 
```

然后像这样称呼它

```
[self animateView:someView completion:^(BOOL flag) {
    // do stuff here
}]; 
```

# java - Cropping out whitespace in a user drawn image when the user is allowed to erase

> ID：13847310
> 
> 赞同：0
> 
> 时间：2012-12-12T19:39:53.203
> 
> 标签：java, android, algorithm, graphics

I have an app where the user draws pictures and then these pictures are converted to pdf. I need to be able to crop out the whitespace before conversion. Originally I kept track of the highest and lowest x and y values (http://stackoverflow.com/questions/13462088/cropping-out-whitespace-from-a-user-drawn-image). This worked for a while, but now I want to give the user the ability to erase. This is a problem because if for example the user erases the topmost point the bounding box would change, but I wouldn't the new dimensions of the box.

Right now I'm going through the entire image, pixel by pixel, to determine the bounding box. This isn't bad for one image, but I'm going to have ~70, it's way too slow for 70\. I also thought about keeping every pixel in an arraylist, but I don't feel like that would work well at all.

Is there an algorithm that would help me solve this? Perhaps something already built in? Speed is more important to me than accuracy. If there is some whitespace left on each side it won't be a tragedy.

Thank you so much.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:52:44.490

您提到您正在跟踪 X 和 Y 坐标的最小值和最大值（这似乎也是您在前面的问题中选择的解决方案）。

与此类似，您应该能够从擦除事件中找到已擦除区域的最小和最大 X & Y 坐标...

当用户擦除部分图像时，您只需将擦除部分的坐标与实际图像进行比较即可找到最终坐标。

尝试查看 2 个矩形是否重叠存在一个相关问题： [确定两个矩形是否相互重叠？](https://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other)

您可以使用类似的逻辑（尽管略有不同）并计算出最终的最小/最大 X 和 Y 值。

# internet-explorer - Internet Explorer puts hashes in href with jQuery Address

> ID：13847313
> 
> 赞同：2
> 
> 时间：2012-12-12T19:40:03.277
> 
> 标签：internet-explorer, jquery, pushstate, jquery-address

I'm looking for a good pushstate jquery plugin to work with ajax-json (and php's mod_rewrite when js is turned off) and found jQuery Address. I like it a lot since it's well documented and easy to work with. (I never really figured out history.js) I noticed however that the great internet explorer (9) puts hashes there in the href field. It's doing it in the example as well: [http://www.asual.com/jquery/address/samples/state/contact](http://www.asual.com/jquery/address/samples/state/contact) I've tested other browsers but you can only see this with the great internet explorer. Any way around this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:48:04.513

Internet Explorer 9[不支持](http://caniuse.com/#search=history)历史 API。相反，使用这些 api 的应用程序必须回退到`onhashchange`功能，它利用位置的片段在功能较弱的浏览器中复制类似的功能。

您所看到的是预期的；[Internet Explorer 10+ 支持这个更新的功能](http://msdn.microsoft.com/en-us/library/ie/hh920758%28v=vs.85%29.aspx)，因此不需要添加`/#`到 url 来记录和保存状态历史。Internet Explorer 9 不支持 History API，因此必须做出规定。

您提到了 history.js，它扩展了对`history.pushState`非 HTML5 浏览器等方法的支持。在这个项目的[GitHub 页面上](https://github.com/balupton/history.js)，您可以看到一些示例，说明 url 在新浏览器中的显示方式以及它们在旧浏览器中的显示方式。正如预期的那样，您现在所体验的模式也是在那里产生的。

尽管在 Internet Explorer 9 中查看时，您的 url 中有一个片段，但请注意，这并不反映您服务器上请求的路径。请注意在浏览器中输入的请求地址，以及“网络”选项卡中对服务器的实际请求：

![在此处输入图像描述](../Images/5d07851fa02f9efd5a9b0ae1490b4b38.png)

### 解决 404

您在 IE9 中获得 404 的原因是因为在不支持 HTML5 History API 的浏览器中，jQuery.address 将重新导航到您在设置中提供的任何状态。因此，当您输入 url 时，初始请求会传递给您的服务器。此地址由 mod_rewrite 处理，您`RewriteRules`确定要加载的初始内容。

当您的初始内容被加载并设置 jQuery.address 时，甚至会在您的设置路径中发生新的导航。在你的情况下，这是`/posters`. 不幸的*是*，您没有任何`RewriteRules`地方可以向.`/posters`

 *这可以通过再次访问 F12 开发人员工具的网络选项卡并捕获数据来确认。打开该选项卡后，按“开始捕获”，然后输入购物车中产品的完整路径。您会注意到对该完整路径的初始请求，然后加载了几个依赖项。不久之后，您将看到另一个导航事件发生在您提供的任何路径上`$.address.state`。*

# c# - Telerik radwindow position

> ID：13847316
> 
> 赞同：3
> 
> 时间：2012-12-12T19:40:10.173
> 
> 标签：c#, asp.net, telerik

I´m having a problem with telerik RadWindow. In my application the following steps will happen:

1.  User clicks on a button, the RadWindow will be visible (in the center of the window). The user will then pick a file to upload.

2.  When the user press the upload button the RadWindow is still visible but now a DataTable with Data will also be visible in there. The telerik RadWindow is set to AutoSieze="true" so it can be extended when the DataTable being filled with data. But because of the new size the RadWindow is not in the middle anymore because of the bigger size.

I have tried to use the left and top properties to adjust the position but without any success. Is it possible to change the position of the radWindow either from Client or Server code? I also have tried moveTo(position) (JavaScript) but it´s not working.

Does anyone has similar problems?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:03:34.540

RadWindow 客户端对象有一个`center()`方法，您可以像这样调用它：

```
var oWnd = $find("<%= DialogWindow.ClientID %>");
oWnd.center(); 
```

查看[在线文档](http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:08:09.323

我认为您需要`center()`通过调用来“强制”应用`show()`.

```
var oWnd = $find("<%= DialogWindow.ClientID %>");
oWnd.Center();
oWnd.Show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:34:19.250

确保您的**AutoSizeBehaviors**保留为**Default**。因此它会在自动调整大小后保持居中，将它们设置为其他值可能会导致左上角保持原位。

另外，尝试在 center() 周围添加超时：

```
setTimeout(function(){
oWnd.center();
}, 0); 
```

# c - 具有随机值的简单链表

> ID：13847330
> 
> 赞同：0
> 
> 时间：2012-12-12T19:41:00.100
> 
> 标签：c, list, linked-list

好的，这就是任务：实现一个包含 25 个 0 到 100 之间的有序随机整数的列表。

我的方法：在一个数组中获取 25 个数字，对数组进行排序并使用数组元素创建列表。

```
#include <conio.h>
#include <malloc.h>
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

struct Node{
    int data;
    struct Node *next;
};

int main()
{
    struct Node *p=NULL;
    struct Node *q=NULL;
    int j,i,aux,n,v[25];

    for (i=0;i<25;i++)
    {
        v[i]=rand()%100;
    }

    for (i=0;i<25;i++)
    {
        for (j=1;j<25;j++)
        {
            if (v[i]>v[j])
            {
                aux=v[i];
                v[i]=v[j];
                v[j]=v[i];
            }
        }
    }

    q=(Node *)malloc(sizeof(struct Node));

    q->data=v[0];
    q->next=NULL;

    for (i=1;i<25;i++)
    {
        p=(Node *)malloc(sizeof(struct Node));
        q->next=p;
        p->data=v[i];
        p->next=NULL;
        q=p;
    }

    while (p)
    {
        printf("%d ",p->data);
        p=p->next;
    }

} 
```

**输出：0。**

**你们能弄清楚我做错了什么吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:54:30.733

有很多事情是错误的......但主要的（导致全 0 的）在这里：

```
 if (v[i]>v[j])
        {
            aux=v[i];
            v[i]=v[j];
            v[j]=v[i];
        } 
```

您的交换不正确，您将`v[i]`的数据存储在 中`aux`，但您从未将其设置为`v[j]`，因此您只是用最小值覆盖所有内容（`0`）

你自找的：

```
v[j] = aux; 
```

* * *

另一个主要问题是您没有跟踪列表的“头部”：

```
 p=(struct Node *)malloc(sizeof(struct Node));
    q->next=p;
    p->data=v[i];
    p->next=NULL;
    q=p; 
```

您不断为 分配一个新值，然后用...`p`覆盖，因此无法找到返回的路。您将只有链接列表中的最后一个值`q``p`

就像是：

```
struct Node* head = NULL;
...
head = q=(Node *)malloc(sizeof(struct Node)); // head points to the first node now 
```

然后后来：

```
p = head; // reset p to the start of the list.
while (p)
{
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:39:49.610

你不需要设置所有这些数组的东西；下面的片段返回带有随机有效负载的 N=cnt 节点的链表：

```
struct Node *getnrandom(unsigned cnt) {
struct Node *p=NULL, **pp;

for (pp=&p; cnt--; pp = &(*pp)->next) {
    *pp = malloc (sizeof **pp);
    if (!*pp) break;
    (*pp)->data = rand();
    }
if (*pp) (*pp)->next = NULL;
return p;
} 
```

更新：由于 OP 似乎需要对值进行排序，他可以执行插入（在正确的位置）到 llist (N*N) 中，或者对其进行事后排序。(NlogN)

# python - 可扩展的 Python markdown 处理器

> ID：13847332
> 
> 赞同：1
> 
> 时间：2012-12-12T19:41:05.863
> 
> 标签：python, markdown

我正在寻找一个可以处理[降价](http://daringfireball.net/projects/markdown/)但我可以禁用任何功能的 Python 模块（因此使用标记的自定义子集，而其余部分未处理）。

[Markdown](https://github.com/waylan/Python-Markdown)模块似乎是可扩展的，但我不知道如何禁用某些规则。

[Markdown2](https://github.com/trentm/python-markdown2)模块有一些他们称之为“附加”的东西，但它都是内置的，而且代码看起来很糟糕，而且不容易扩展。

需要明确的是，我的问题是，是否存在这样的模块，或者我最好实现自己的（或分叉上述模块之一）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:44:46.290

由于没有人回应，我们最终自己实现了 Markdown 的一个子集。任何降价引擎似乎都没有足够的可扩展性。

# r - 在 R 图中指定字体大小

> ID：13847333
> 
> 赞同：9
> 
> 时间：2012-12-12T19:41:08.097
> 
> 标签：r, font-size

在 R 中生成图形时，是否有一种方法可以指定字体大小。这似乎是一个非常基本的要求，但我似乎找不到任何对指定字体大小的地方的引用。我可以将图形保存为 pdf，如下所示：

```
setwd("C:\\")
pdf(file="Plot.pdf",family="Times")
plot(x,y);
dev.off() 
```

其中R基本上在pdf中生成图形而不是在图形窗口中。当我寻找改变字体大小的方法时，我看到的只是人们引用 cex=1.5 参数来将字体缩放 150%，以及 cex.lab、cex.axis 等......虽然现在不是一个直接的问题，但我确实这样做了想知道当我发表一些结果并且期刊要求字体大小在 9 到 11 之间时会发生什么。我如何在 R 中控制这些？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T03:16:31.003

`ps`您可以使用(point size) 参数控制字体大小。默认值通常是`12`（但可以通过`pointsize`参数对 PDF 文件进行全局控制），所以如果你想要，比如说，`10`你将使用的特定文本大小的字体`par(ps=10); text(...)`。既然您提到`cex`了：请注意，这`cex`与当前的点大小有关，也适用于符号，而`ps`特别适用于文本。显然，只要您不调整结果图形的大小，大小就会匹配。

# c++ - C/C++ 编译器如何自动推断某些 C 函数调用的数组长度？

> ID：13847336
> 
> 赞同：1
> 
> 时间：2012-12-12T19:41:18.253
> 
> 标签：c++, c, visual-c++

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

在第一次调用 strcpy_s 时，编译器可以推断出数组长度，但在第二次调用中，必须传入数组长度。

```
TCHAR szTemp[512];
::strcpy_s(szTemp, "a long text message");

TCHAR* pszTemp = new TCHAR[512];
::strcpy_s(pszTemp, 512, "a long text message");
delete []pszTemp; 
```

编译器如何做到这一点？这是微软唯一的扩展吗？另外，我如何声明我的方法以利用参数推导？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:51:25.403

在第一次使用时`strcpy_s`，数组中元素的数量`szTemp`是类型的一部分`szTemp`（因为它是一个“512的数组`TCHAR`”），所以编译器知道它并可以完成声明的模板`strcpy_s`。

在第二种用法中`strcpy_s`， ,`pszTemp`是一个指针（它是一个“指向 ” 的指针`TCHAR`），而不是一个数组，指向的元素数量不是类型的一部分。通常，编译器无法知道指针指向的位置有多少元素。（在这种情况下，编译器可能会推导出它，因为前面的代码显示了它，但这增加了编译器和通常被认为不值得实现的语言的复杂性。）

要自己执行此操作，请按照声明的方式声明模板`strcpy_s`：

```
template <size_t size> errno_t strcpy_s(
    char (&strDestination)[size],
    const char *strSource 
); 
```

这声明了一个基于 parameter的模板，该模板用于一个函数，其第一个参数的类型为“引用元素`size`数组”。当编译器看到第一个参数是 char 的 512 个元素的数组的使用时，它能够将此参数与模板中的参数相匹配，并推断为 512。`size``char``strcpy_s``size`

在其他地方，您将拥有模板的定义（不仅仅是声明）。`size`该定义可以在其代码中使用模板参数。当编译器看到 的使用时`strcpy_s`，它将以`size`512 的特化实例化模板定义。

这仅适用于 C++，不适用于 C，因为 C 没有模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:48:14.350

根据[docs](http://msdn.microsoft.com/en-us/library/td1esda9%28v=vs.80%29.aspx)，`strcpy_s`作为具体函数存在，但也作为模板函数为已知大小的`szTemp`数组（例如您提供的数组）重载。在这种情况下，数组的大小是函数定义的模板参数。

`strcpy_s`它本身是 Microsoft 独有的函数，因此模板版本并不比接受指针的版本更特定于 Microsoft。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:50:38.750

在第一种情况下，使用模板函数（[doc](http://msdn.microsoft.com/en-us/library/td1esda9.aspx)），所以没有魔法：

```
template <size_t size>
errno_t strcpy_s(
   char (&strDestination)[size],
   const char *strSource 
); // C++ only 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:50:55.427

它可以推断 szTemp 的数组长度，因为它被声明为数组。对于 pszTemp，它被声明为一个指针，没有办法推断它的长度。

据说有一些第三方 strcpy_s 实现，但主要是微软的事情——这是他们努力加强安全漏洞的一部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T19:49:33.213

第一种是使用模板，例如：

```
template <size_t N>
strcpy_s(char (&dest)[N], char const *source) { 
    // ...
} 
```

在模板内部，`N`是传递的数组的大小。

在第二种情况下，`pszTemp`是指针而不是数组，因此它与模板参数（需要实际数组）不匹配，因此您需要显式传递目标大小。

# python - 无法使用 python3.3 及其包 twitter-1.9.0 向 twitter 发送状态消息

> ID：13847338
> 
> 赞同：0
> 
> 时间：2012-12-12T19:41:33.470
> 
> 标签：python, python-3.x, python-3.3

使用 twitter-1.9.0 ( [http://pypi.python.org/pypi/twitter/1.9.0](http://pypi.python.org/pypi/twitter/1.9.0) ) 我正在尝试发送状态消息但无法发送。下面是代码片段。

```
import twitter as t

# consumer and authentication key values are provided here.

def tweet(status):
    if len(status) > 140 :
        raise Exception ('Status message too long !!!')
    authkey = t.Twitter(auth=t.OAuth(ACCESS_TOKEN_KEY, ACCESS_TOKEN_SECRET, CONSUMER_KEY, CONSUMER_SECRET))
    authkey.statuses.update(status)

....

price = 99.99
status = "buy price is $" + str(price)
tweet(status) 
```

错误如下：

```
Traceback (most recent call last):
  File "/home/tanmaya/Documents/prog/py_prog/progs/getprice.py", line 42, in <module>
    tweet(status)
  File "/home/tanmaya/Documents/prog/py_prog/progs/getprice.py", line 17, in tweet
    authkey.statuses.update(status)
TypeError: __call__() takes 1 positional argument but 2 were given 
```

行号可能不同。我对这些 web 模块和 python 程序有点陌生。请帮忙 ！！

**请注意**：我使用的是 python 3.3，所以我只从 python3.3 包页面获得了这个（twitter-1.9.0）。我的完整程序有点长，所以我不想移动到其他版本的 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:50:51.027

根据您发布的包的示例用法，您应该在您的`def tweet(status):`

```
authkey.statuses.update(status=status) 
```

注意使用`status=status`... 来使用关键字参数，而不是位置参数

**为了澄清，您的代码变为**

```
def tweet(status):
    if len(status) > 140 :
        raise Exception ('Status message too long !!!')
    authkey = t.Twitter(auth=t.OAuth(ACCESS_TOKEN_KEY, ACCESS_TOKEN_SECRET, CONSUMER_KEY, CONSUMER_SECRET))
    authkey.statuses.update(status=status) # <----- only this line changes

....

price = 99.99
status = "buy price is $" + str(price)
tweet(status) 
```

# jquery - 动态添加和删除多个日期选择器

> ID：13847341
> 
> 赞同：1
> 
> 时间：2012-12-12T19:41:45.083
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

问题是当我添加一个新寄存器时，我需要所有的日期选择器都销毁并重新激活它们。我试图动态添加和删除多个日期选择器，但我无法实现。

```
$v = jQuery.noConflict();

function displayDatePickers(toogle){
    setDatePickers(toogle);
    setTimePickers(toogle);
}

function setDatePickers(toogle){
    if (toogle) {
            // toogle == true | destroy all datepickers
        $v(".datepicker").datepicker('destroy');
    }

    $v(".datepicker").datepicker();
}

function setTimePickers(toogle){
    if (toogle) {
            // toogle == true | destroy all datepickers
        $v('.timepicker').timepicker("destroy");
    }

    $v('.timepicker').timepicker({
    defaultTime: "Now"
    }); 
} 
```

如果有人可以帮助我。谢谢。

# jquery - RequireJS + jQuery 命名空间问题

> ID：13847344
> 
> 赞同：5
> 
> 时间：2012-12-12T19:41:58.890
> 
> 标签：jquery, namespaces, requirejs, optimization, r.js

如果我在没有“命名空间：'foo'”标志的情况下运行优化器，一切都会按预期工作。当我将“命名空间：'foo'”添加到 app.build.js 中时，我收到此错误：

> GET：file:// *（项目路径）* /require-jquery/jquery-require-sample/webapp/jquery.js
> main-built.js:main-built.js:1839
> 
> 未捕获的错误：脚本错误[http://requirejs.org/docs/errors.html#scripterror](http://requirejs.org/docs/errors.html#scripterror)
> main-built.js:163

我四处寻找解决方案，但几乎没有关于使用 RequireJS 优化器导出单个文件、带有 jquery 和命名空间的信息。谢谢！

我已将 RequireJS + jQuery 示例项目（带有修改的 app.build.js 和 app.html）[放在 github 上。](https://github.com/complexmag/require-jquery)

```
({
    baseUrl: ".",
    out: 'main-built.js',
    //Comment out the optimize line if you want
    //the code minified by UglifyJS
    optimize: "none",

    paths: {
        "jquery": "require-jquery"
    },

    name: 'main',
    namespace: 'foo'
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:11:59.240

尝试删除 name 参数（除非你真的需要它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T11:14:55.120

我知道我在这里聚会迟到了，但是只需使用谷歌搜索即可轻松找到此线程。

jquery 里面有 AMD 检测。您正在为 requirejs 使用命名空间，这会导致所有`define`函数调用发生一些变化。

这会导致 jquery 发生变化，只会破坏它（或者只是实际的定义代码，但您的命名空间调用无论如何都不起作用）

我目前正在解决这个问题。我看到以下选项：

1.  全局使用 jQuery，就像 2005 年一样
2.  hack 需要命名空间来理解 AMD 检测
3.  为 jquery 拼凑一个 shim 以使其工作

我将尝试第三种选择，如果有什么要报告的，我会报告

[编辑]

命名空间也可以在 shim 内部工作 :( 这没有任何意义，但它确实如此。到目前为止，我不知道如何使它与 shim 一起工作，并且不对 jquery 本身进行任何更改。如果你想摆弄jquery, 在末尾附近有一行测试是否`define`是用于定义 AMD 模块的函数。打破这一行（例如，通过添加`false &&`），你就有了一个工作垫片。

# visual-c++ - 在 Opencv 中使用 FileStorage 时出现运行时错误

> ID：13847345
> 
> 赞同：1
> 
> 时间：2012-12-12T19:42:01.693
> 
> 标签：visual-c++, opencv, opencvdotnet

这是 Opencv 文档中的代码，它使用 FileStorage 编写 XML/YAML 文件：

```
#include <opencv2/opencv.hpp>
#include <time.h>
#include <iostream>

using namespace cv;
using namespace std;

int main(int, char** argv) {
FileStorage fs("test.yml", FileStorage::WRITE);

fs << "frameCount" << 5;
time_t rawtime; time(&rawtime);
fs << "calibrationDate" << asctime(localtime(&rawtime));
Mat cameraMatrix = (Mat_<double>(3,3) << 1000, 0, 320, 0, 1000, 240, 0, 0, 1);
Mat distCoeffs = (Mat_<double>(5,1) << 0.1, 0.01, -0.001, 0, 0);
fs << "cameraMatrix" << cameraMatrix << "distCoeffs" << distCoeffs;
fs << "features" << "[";
for( int i = 0; i < 3; i++ )
{
    int x = rand() % 640;
    int y = rand() % 480;
    uchar lbp = rand() % 256;

    fs << "{:" << "x" << x << "y" << y << "lbp" << "[:";
    for( int j = 0; j < 8; j++ )
        fs << ((lbp >> j) & 1);
    fs << "]" << "}";
}
fs << "]";
fs.release();
return 0;
} 
```

每当我运行此代码时，我总是会收到此错误：

`OpenCV Error: Unspecified error (Incorrect element name É1Z) in unknown function , file c:\Users\vp\work\ocv\opencv\modules\core\src\persistence.cpp, line 5090`

如何解决这个问题？

# xml - SSRS - MDX - 如何创建一个字段？

> ID：13847348
> 
> 赞同：1
> 
> 时间：2012-12-12T19:42:26.747
> 
> 标签：xml, ssrs-2008, reporting-services, mdx

```
SELECT {} ON COLUMNS,
EXCEPT(
        EXCEPT(
            DESCENDANTS([Disposition].[Disposition Hierarchy].[Disposition Eligibility].&[Eligible],,SELF_AND_AFTER)
            ,[Disposition].[Disposition Hierarchy].[Disposition Group].&[Ungrouped Eligible]
              )
        ,[Disposition].[Disposition Hierarchy].[Disposition Code].&[030] 
          ) 
,
EXCEPT(
            DESCENDANTS([Disposition].[Disposition Hierarchy].[Disposition     Master].&[Total],,SELF_AND_AFTER)
            , {DESCENDANTS([Disposition].[Disposition Hierarchy].[Disposition     Eligibility].&[Eligible],,SELF_AND_AFTER)
            , DESCENDANTS([Disposition].[Disposition Hierarchy].[Disposition     Group].&[None],,SELF_AND_AFTER)
            ,[Disposition].[Disposition Hierarchy].[Disposition Group].&    [Duplicate / Recently Contacted]}
        ) 
ON ROWS
FROM CUBE 
```

我想在 SSRS 中创建一个字段，以便可以使用数据填充表中的列。如何查询字段源为 XML 格式的新字段？

![在此处输入图像描述](../Images/33c660545e42b1824393d46c7a6a826c.png)

# android - Phonegap 压垮外部页面加载

> ID：13847349
> 
> 赞同：0
> 
> 时间：2012-12-12T19:42:33.680
> 
> 标签：android, cordova

我刚开始使用phonegap（2.2.0）。在我的 index.html 中，我有一个 iframe 来加载外部 facebook 页面，它只是一个虚拟页面，大多数情况下它加载得很好。但是当它失败时，加载（不明白为什么）整个应用程序都会崩溃。iframe 是在页面的所有其他项目加载完成后加载的，当它超时时，应用程序崩溃。我首先尝试了 iframe 标签上的 src，结果相同（更改为更好的测试）

网址加载：

```
jQuery("#facebookIframe").attr({"src" : "https://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fcocacola&colorscheme=light&show_faces=true&border_color=%23fff&stream=false&header=false&height=186"}) 
```

内嵌框架

```
<div id="facebookFrame" style="text-align: center; width: 99%;">
<iframe id="facebookIframe" style="border: none; width: 90%;" ></iframe>
</div> 
```

作为记录，我使用的是android，我得到的错误消息是：

“与服务器的连接不成功。” 和超时错误！

谢谢

# javascript - 如何在动态添加的 JavaScript 文件的开头暂停执行？

> ID：13847350
> 
> 赞同：3
> 
> 时间：2012-12-12T19:42:35.033
> 
> 标签：javascript, debugging, google-chrome-devtools

假设我们有一个包含这个内联脚本的网页：

```
<script>
(function () {
    var script = document.createElement('script');
    script.src = 'http://remote.com/external.js';
    document.body.appendChild(script);
}());
</script> 
```

如您所见，`external.js`页面附加了一个外部脚本 , 。

我想在该外部脚本的开头暂停执行。我**无法**编辑该外部脚本。（如果是，我会`debugger;`在该文件的顶部插入一条语句。）

我目前在此语句（上述脚本）中暂停：

```
document.body.appendChild(script); 
```

页面上没有其他 SCRIPT 元素，因此，如果我恢复执行，将要执行的下一条语句将是外部脚本的第一条语句。

如何命令 Chrome 的开发工具在下一条语句处暂停执行？“Step over”命令仅在同一个调用堆栈中起作用。

**为什么我需要这个：（**这只是背景。您不需要阅读此内容。）W3C 的 HTML5 404 页面包含一个[脚本，该脚本具有`fixBrokenLink`](http://www.w3.org/TR/html5/link-fixup.js)在页面加载时调用的[函数。](http://www.w3.org/TR/html5/link-fixup.js)然后，此函数将[fragment-links.js](http://www.w3.org/TR/html5/fragment-links.js)脚本动态添加到页面。我想逐步完成该脚本。我的目标是了解该脚本如何“修复断开的链接”。当然，我可以静态分析该脚本，但我更愿意通过开发工具实时执行它，通过在执行它的代码时单步执行它。如果我认为不可能，我不会费心问这个问题。

* * *

# 解决方案：

如果从接受的答案中不清楚，只需跳过`document.body.appendChild(script);`语句，以便在右括号处暂停执行`}`（参见上面的代码）。此时，Chrome 会在后台加载外部脚本，最终会出现在开发工具中。一旦完成，就可以在该脚本中设置一个断点，然后继续执行到该断点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-23T19:31:29.073

**这是现在实现的，您可以在Script**部分下的**Event Listener Breakpoints**中打开**Script First Statement 。**

 ****![在此处输入图像描述](../Images/b870786890656decac94a65593310d38.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T20:41:32.293

1.  在第一个脚本（此处为）中，在该行*之后*`link-fixup.js`立即添加一个断点。（所以，在这里，在结尾的右括号线上。）*`appendChild(script)``link-fixup.js`*

**   通过单击 Devtools 的左上角打开 Sources 窗格中的导航器。浏览器完成加载脚本后，您将在此处看到已加载的脚本。

    *   在导航器中，`fragment-links.js`在 Sources 窗格中打开加载的脚本（此处为 ）并在其中放置一个断点。

    *   继续到断点；你完成了！* 

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:27:59.220

一种方法：

查看代码并使用 覆盖其中一个属性访问`defineGetter`。我与 DevTools 负责人 Pavel 进行了交谈，他建议拦截`window.jQuery`第一行 JS 代码。它存储旧的 jQuery 值，您可以`_defineGetter_`使用`function() { debugger; return null; }`

也可以看看：

*   [http://wordsbyf.at/2011/12/23/debugging-javascript-is-a-lame-title/](http://wordsbyf.at/2011/12/23/debugging-javascript-is-a-lame-title/) (Getters/Setters)
*   和：[https ://gist.github.com/1676346](https://gist.github.com/1676346)

* * *

但是，当我们这样做时，您能否[提交一个](http://crbug.com/new)您希望能够在 appendChild 即将评估 JS 时进入的错误？还要提到 Opera 的“Break on first statement of a new script”，因为这真的很方便。Chrome DevTools eng 团队希望为您提供对此用例的良好支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T17:27:22.063

据我所知，这还没有实现。[但是，您可以在专门的错误http://code.google.com/p/chromium/issues/detail?id=156556](http://code.google.com/p/chromium/issues/detail?id=156556)上投票或评论*****

# ios - iOS：如何子类化 UINavigationBar

> ID：13847356
> 
> 赞同：0
> 
> 时间：2012-12-12T19:43:04.997
> 
> 标签：ios, uinavigationbar

为什么这不起作用？我想 sublcas UINavigationBar 所以在 xcode 我点击新文件 - > 目标 c 类，类：CustomNavBar 子类：UINavigationBar

然后在导航控制器场景下的情节提要中，单击导航栏并将其类设置为 CustomNavBar。

然后我进入我的 CustomNaVBar 类并尝试添加自定义图像背景。

在 initWithFram 方法中，我添加了这个：

```
- (id)initWithFrame:(CGRect)frame
{
    NSLog(@"Does it get here?"); //no
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        UIImage *image = [UIImage imageNamed:@"customNavBarImage.png"];
        //  [self setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
        [self setBackgroundColor:[UIColor colorWithPatternImage:image]];
        [[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
        NSLog(@"Does this get called?"); //no
    }
    return self;
} 
```

我在控制台上看不到任何输出。

相反，我这样做是为了自定义 UINavBar，但我觉得它不像 sublasing 它那么正确。在我的第一个视图的 viewDidLoad 中，我添加了这一行：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
        UIImage *image = [UIImage imageNamed:@"customNavBarImage.png"];
        [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:02:42.237

我同意瑞恩佩里的观点。除了他的回答：

你不应该把这段代码放进去`initWithFrame`，而是把你的代码放进去`awakeFromNib`

```
- (void) awakeFromNib {
    // Initialization code
    UIImage *image = [UIImage imageNamed:@"customNavBarImage.png"];
    //  [self setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
    [self setBackgroundColor:[UIColor colorWithPatternImage:image]];
    [[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
    NSLog(@"Does this get called?"); //YES!!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:49:51.743

根据 initWithFrame 的文档：

> 如果您使用 Interface Builder 来设计您的界面，则当您的视图对象随后从 nib 文件加载时，**不会**调用此方法。nib 文件中的对象被重构，然后使用它们的 initWithCoder: 方法进行初始化，该方法修改视图的属性以匹配存储在 nib 文件中的属性。有关如何从 nib 文件加载视图的详细信息，请参阅资源编程指南。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

这就是该方法没有像您期望的那样被调用的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T18:11:04.543

从情节提要加载 UI 对象时，您必须使用`initWithCoder:`方法，因为这是指定的初始化程序。因此，使用此代码：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    NSLog(@"Does it get here?"); // now it does! 
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
       // ...
        NSLog(@"Does this get called?"); // yep it does! 
    }
    return self;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:05:50.577

您可以对 UINavigation 栏进行子类化，如下所示：

```
@interface CustomNavigationBar : UINavigationBar

@end

@implementation CustomNavigationBar

- (void)drawRect:(CGRect)rect
{    
   //custom draw code
}

@end

//Begin of UINavigationBar background customization
@implementation UINavigationBar (CustomImage)

//for iOS 5 
+ (Class)class {
    return NSClassFromString(@"CustomNavigationBar");
}

@end 
```

# html - Mozilla scale3d() 忽略元素 我认为这是 Mozilla (Firefox) 一直到现在的 17.0.1 的一个错误。希望人们有解决办法。请参阅示例 http://jsfiddle.net/dd3pQ/ CSS3 属性 scale3d 缩放页面中的元素，但忽略 SELECT 下拉列表的 OPTION 元素。如您所见，它们呈现在它们应该在的位置的左侧，在页面中如果没有缩放它们本来应该是。我们需要在我们的应用程序中使用 scale3d，但我们还需要下拉列表。现在 Mozilla

> ID：13847358
> 
> 赞同：0
> 
> 时间：2012-12-12T19:43:21.597
> 
> 标签：html, css, transform

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:56:52.643

下拉列表由操作系统呈现，并且操作系统不会给浏览器挂钩来设置它的样式。

因为表单元素受到操作系统功能的限制，CSS 根本不需要浏览器来设置它们的样式（它们是 CSS 术语中的“替换元素”，例如 的内容`<img>`）。所以，从技术上讲，这不是一个错误。

# c# - 如何从 System.DateTime.Now.Hour 获取 24 小时数？

> ID：13847367
> 
> 赞同：15
> 
> 时间：2012-12-12T19:43:48.360
> 
> 标签：c#, datetime

我想用`0-24`from 获取当前小时数`System.DateTime.Now.Hour`。我不确定它是否会返回一个介于`0-12`or之间的整数`0-24`。我如何确保我会得到一个介于 之间的整数`0-24`？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-12T19:44:55.910

[**DateTime.Hour 属性**](http://msdn.microsoft.com/en-us/library/system.datetime.hour.aspx)

> Hour 属性的值**始终使用 24 小时制表示**。若要使用 12 小时制检索表示日期和时间的小时的字符串，请使用“h”自定义格式说明符调用 DateTime.ToString(String) 或 DateTime.ToString(String, IFormatProvider) 方法。例如：

和

> 小时分量，表示为**0 到 23**之间的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:54:18.507

如果您尝试获取 DateTime 对象的特定字符串版本，我建议使用[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)或[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。

我通常使用`dateTimeVar.ToString("yyyy/MM/dd HH:mm:ss.ffff zzz");`虽然你可能想要`K`而不是`zzz`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:46:57.690

来自 MSDN；

```
 DateTime date1 = new DateTime(2008, 4, 1, 18, 53, 0);
   Console.WriteLine(date1.ToString("%h"));              // Displays 6 
   Console.WriteLine(date1.ToString("h tt"));            // Displays 6 PM 
```

# filemaker - FileMaker 不提示登录

> ID：13847373
> 
> 赞同：0
> 
> 时间：2012-12-12T19:44:16.333
> 
> 标签：filemaker

因此，我将 FileMaker 数据库从具有 FM 服务器 10 的机器移动到具有 FM 服务器 11 的新机器上。

一切似乎都正常，但问题是它不再提示用户输入用户名和密码。似乎只是使用他们的 Windows 用户名自动登录。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:19:39.980

听起来您在 FileMaker Server 上激活了外部身份验证。这意味着 FileMaker 服务器将尝试使用 Active Directory 甚至服务器计算机上的本地 Windows 帐户进行身份验证。

在 FileMaker Server Admin Console 中查看您是否启用了外部身份验证，如果启用，请将其停用并重新启动 FileMaker 服务。

# javascript - ExtJS 4 - 访问 REST 代理和/或存储中的自定义响应标头？

> ID：13847374
> 
> 赞同：2
> 
> 时间：2012-12-12T19:44:18.127
> 
> 标签：javascript, web-services, http, rest, extjs

我已经从这个问题中学习了如何将自定义标头添加到 Ext-JS 请求中：

[带有 ExtJS 4 存储的 HTTP 标头](https://stackoverflow.com/questions/8045917/http-headers-with-extjs-4-stores)

现在我正在尝试处理问题是用户错误时的异常处理问题。这个问题在这里处理：

[了解 REST：动词、错误代码和身份验证](https://stackoverflow.com/questions/2001773/understanding-rest-verbs-error-codes-and-authentication)

其中一个答案建议映射到最接近的 HTTP 错误代码，然后还使用自定义响应标头将异常信息传递回客户端。

> 我强烈建议不要扩展基本的 HTTP 状态代码。如果您找不到与您的情况完全匹配的一个，请选择最接近的一个并将错误详细信息放在响应正文中。另外，请记住 HTTP 标头是可扩展的；您的应用程序可以定义您喜欢的所有自定义标头。例如，我处理的一个应用程序可能在多种情况下返回 404 Not Found。我们没有让客户端解析响应正文，而是添加了一个新的标头 X-Status-Extended，其中包含我们专有的状态代码扩展。因此，您可能会看到如下响应：

`HTTP/1.1 404 Not Found
X-Status-Extended: 404.3 More Specific Error Here`

我非常喜欢这个主意。但无法弄清楚如何从 ExtJS 中访问此自定义响应标头以提取异常消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:40:11.100

响应对象有一个 getAllResponseHeader() 方法，您可以使用它来访问所有标头键值对。

在 Extjs 中你可以这样做：

```
Ext.Ajax.request({
    url: 'www.microsoft.com',
    method: 'GET',
    failure: function(response){
        console.log(response.getAllResponseHeaders());
     }
});​ 
```

这将返回一个包含以下信息的实例：

```
连接：“保持活动”
内容编码：“gzip”
内容类型：“文本/html；字符集=utf-8”
日期：“格林威治标准时间 2012 年 12 月 13 日星期四 03:10:15”
服务器：“nginx/0.8.54”
传输编码：“分块”
变化：“饼干”

```

在您的情况下，您应该执行以下操作：

```
 failure: function(response){
        var header = response.getAllResponseHeaders(),
            statusEx = header['X-Status-Extended'];

        if(statusEx === '404.3 More Specific Error Here'){
            // do something here
        }
     } 
```

# silverlight - 在 Silverlight + XNA 应用程序中播放音乐

> ID：13847376
> 
> 赞同：0
> 
> 时间：2012-12-12T19:44:20.860
> 
> 标签：silverlight, windows-phone-7, audio, xna

我在 Silverlight+XNA 组合应用程序中播放音乐时遇到了几个问题。它有几个 Silverlight 页面和在 XNA 中呈现的“游戏”页面。

首先，我在 Silverlight 主页面的 OnNavigatedTo 事件中添加了以下代码：

```
var song = (Application.Current as App).Content.Load<Song>("Music/Menu");
MediaPlayer.Play(song);
MediaPlayer.Volume = 0.9f;
MediaPlayer.IsRepeating = true; 
```

音乐开始播放，但应用程序失败，出现以下异常，没有明显的调用堆栈提示：

```
InvalidOperationException occured
FrameworkDispatcher.Update has not been called. Regular FrameworkDispatcher.Update calls are necessary for fire and forget sound effects and framework events to function correctly. 
```

其次，我有一些基于 Silverlight 的窗口使用`UIElementRenderer`. 当需要时，我将控件的`IsEnabled`标志更改为 true 并开始在屏幕上绘制它。这使得音乐在没有明显原因的情况下停止播放，并且当我关闭 Silverligh 窗口时它甚至不会重新开始。

从框架导航并返回到框架会使事情变得更糟。同一个调用`MediaPlayer.Play(song)`说这首歌已经被处理了，即使我`ContentManager`从新加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:12:45.080

请看[这个 StackOverflow](https://stackoverflow.com/questions/6807963/media-player-in-windows-phone-7)问题——答案很清楚。简而言之，您必须`FrameworkDispatcher.Update()`在使用 XNA 媒体库之前调用。

# asp.net-mvc - 为什么我的 http 帖子从我的视图模型返回 null

> ID：13847379
> 
> 赞同：2
> 
> 时间：2012-12-12T19:44:28.390
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4, asp.net-mvc-viewmodel

这是我的模型：

```
public class Attribute
{
    public string Key { get; set; }
    public string Value{ get; set; }
} 
```

我将其填写在我的 GET 创建中

```
 public ActionResult Create()
    {
        var Attributes = new[] 
        {
            new Attribute {Key = "Name" Value = "" },
            new Attribute {Key = "Age" Value = "" },
        };
        return View(Attributes);
    } 
```

我的视图如下所示：

```
@model IEnumerable<Customers.ViewModels.Attribute>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        @foreach (var item in Model)
        {
            <div class="editor-label">
                @Html.Label(item.Key)
            </div>
            <div class="editor-field">
                @Html.EditorFor(m => item.Value)
                @Html.ValidationMessageFor(m => item.Value)
            </div>
        }
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

然后我的帖子创建看起来像这样：

```
 [HttpPost]
    public ActionResult Create(IEnumerable<Attribute> attributes)
    {
    } 
```

但我`IEnumerable<Attribute> attributes`的为空。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:49:35.673

您需要为 a 创建一个编辑器模板`Attribute`，然后将`List<Attribute>`模型传递给它。

```
@Model Attribute
<div class="editor-label">
    @Html.LabelFor(m => m.Key)
</div>

<div class="editor-field">
    @Html.EditorFor(m => m.Value)
    @Html.ValidationMessageFor(m => item.Value)
</div> 
```

在您看来使用：

```
<fieldset>
    @Html.EditorFor(m > m)

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

您需要这样做，因为`foreach`不会为元素创建正确的名称。

# c++ - 将数组中的元素设置为 0 或 NULL

> ID：13847380
> 
> 赞同：2
> 
> 时间：2012-12-12T19:44:29.637
> 
> 标签：c++, arrays, visual-c++

我创建了一个由用户输入调整大小的数组。

```
 int spotInArray = 0;
    Bankcard* a = NULL;
    int n;           
    cout << "Enter number of cards" << std::endl;
    cin >> n;
    a = new Bankcard[n]; 
```

这是我的开关中的代码，供用户选择他们要删除的卡。

```
 int choice;
            cout << "Enter Number of card you would like to delete: " << endl;
            cin >> choice;
                for (int i = n; i < spotInArray; i++)
                {
                    a[n] = a[n + 1];
                    a[choice - 1] = 0;
                } 
```

我在 a[choice - 1] = 0; 上收到此错误

> IntelliSense：没有运算符“=”与这些操作数匹配

这是完整的代码。

```
int main()
{
//Bankcard bankcard1("Blue Card", 1, .05, 3000.00, 430.32, 200.35, 124.00);
int spotInArray = 0;
Bankcard* a = NULL;   // Pointer to int, initialize to nothing.
int n;           // Size needed for array
cout << "Enter number of cards" << std::endl;
cin >> n;        // Read in the size
a = new Bankcard[n];  // Allocate n ints and save ptr in a.
//for (int i=0; i<n; i++) {
//a[i] = bankcard1;
//bankcard1.show();
//}

int choice;

showMenu();

cin >> choice;

while (choice != 6)
{
    switch(choice)
    {
        case 1  :   {
                    string productName;
                    int cardNum;
                    double interestRate;
                    double maxLimit;
                    double outstandingBalance;
                    double purchaseAmount;
                    double paymentAmount;
                    cout << "Enter Card Name(No spaces, no special characters)" << std::endl;
                    cin >> productName;

                    cout << "Enter Number of Card" << std::endl;
                    cin >> cardNum;

                    cout << "Enter interest Rate" << std::endl;
                    cin >> interestRate;

                    cout << "Enter Max Limit" << std::endl;
                    cin >> maxLimit;

                    cout << "Enter Outstanding Balance" << std::endl;
                    cin >> outstandingBalance;

                    cout << "Enter Purchase Amount" << std::endl;
                    cin >> purchaseAmount;

                    cout << "Enter Payment Amount" << std::endl;
                    cin >> paymentAmount;
                    Bankcard bankcard1(productName, cardNum, interestRate, maxLimit, outstandingBalance, purchaseAmount, paymentAmount);
                    a[spotInArray] = bankcard1;
                    spotInArray++;
                    break;
                    }

        case 2  :   update();
                    break;
        case 3  :   {
                        int choice;
                        cout << "Enter Number of card you would like to delete: " << endl;
                        cin >> choice;
                        for (int i = 0; i < n; i++)
                        {
                            a[n] = a[n + 1];
                            a[choice - 1] = 0;
                        }
                    }
                    deleteCard();
                    break;
        case 4  :   overLoad();
                    break;
        case 5  :   {
                        for ( int i = 0; i < spotInArray; i++)
                        {
                            cout << a[i];
                        }
                    }
                    break;
        case 6  :   exit();
                    break;

    }
    showMenu();
    cout << endl;
    cin >> choice;
};

std::cin.get();
std::cin.get();
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:49:03.323

除非您没有显示其他代码，否则当前这个 for 循环甚至不应该运行：

```
 for (int i = n; i < spotInArray; i++)
        {
            a[n] = a[n + 1];
            a[choice - 1] = 0;
        } 
```

因为`spotInArray`is`0`并且`i`开始于`n`（并且你也在递增`i`）。

你确定它在那条线上失败了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:53:09.350

代码几乎没有不正确的地方。首先，`a[n]`无效。大小数组的有效索引为`n`0 到 n-1。避免自己处理记忆。在这种情况下使用`std::list`（如果经常删除）。

```
 std::list<Bankcard> bCards(n);

 // Take input to for the cardToRemove.

 bCards.erase( bCards.begin() + cardToRemove ); 
```

# php - 我如何获得 Twitter 关注者 ID？

> ID：13847382
> 
> 赞同：1
> 
> 时间：2012-12-12T19:44:37.020
> 
> 标签：php, json, twitter

单击此[https://api.twitter.com/1/followers/ids.json?screen_name=USER_NAME](https://api.twitter.com/1/followers/ids.json?screen_name=USER_NAME)

它返回；

```
{"ids":[XXXXXXXXXXX,XXXXXXXXXXXX,XXXXXXXXXXX,.........],"next_cursor":0,"next_cursor_str":"0","previous_cursor":0,"previous_cursor_str":"0"} 
```

以及如何将这些 id 保存到 PHP 上的数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:46:55.193

```
$data = file_get_contents("https://api.twitter.com/1/followers/ids.json?screen_name=$USER_NAME");
$array = json_decode($data, true);
if (isset($array['ids']) && is_array($array['ids']) {
    $idsArray = $array['ids'];
    var_dump($idsArray); // that is the array you need
} else {
    die('Data format error');
} 
```

# android - 从 Android GoogleMaps 中删除特定的 ItemizedOverlay

> ID：13847384
> 
> 赞同：1
> 
> 时间：2012-12-12T19:44:44.273
> 
> 标签：android, google-maps, itemizedoverlay

我按照你告诉我的做了。我会撒谎问在 oncreate() 里面是否应该放一些东西，除了 from
`mapOverlays = mapView.getOverlays();`??
另外，在我的 mainactivity 类开始时，我声明了所有变量，我应该放什么？我有 ：

```
List<Overlay> mapOverlays;
 HelloItemizedOverlay itemizedoverlay0;
 HelloItemizedOverlay itemizedoverlay1;
 HelloItemizedOverlay itemizedoverlay2;
 HelloItemizedOverlay itemizedoverlay3;
 HelloItemizedOverlay itemizedoverlay4;
 HelloItemizedOverlay itemizedoverlay5;

 GeoPoint point;

 Drawable drawable0;
 Drawable drawable1;
 Drawable drawable2;
 Drawable drawable3;
 Drawable drawable4;
 Drawable drawable5;

 OverlayItem overlayItem5;
 OverlayItem overlayItem0;
 OverlayItem overlayItem1;
 OverlayItem overlayItem2;
 OverlayItem overlayItem3;
 OverlayItem overlayItem4;` 
```

对所有类别的标记使用相同的地理点变量（点）是否有问题？为了将叠加项目添加到我所做的每个类别中：

```
try { 
    Drawable drawable0 = this.getResources().getDrawable(R.drawable.marker_default);
    HelloItemizedOverlay itemizedoverlay0 = new HelloItemizedOverlay(drawable0, this);
       JSONArray jArray = new JSONArray(result);    
       for(int i=0; i<jArray.length();i++){
           JSONObject json = jArray.getJSONObject(i);          
           double d1 =json.getDouble("longtitude");
           double d2 =json.getDouble("latitude");        

           GeoPoint point = new GeoPoint((int) (d2 * 1E6),
                                        (int) (d1 * 1E6));            
           OverlayItem overlayItem0= new OverlayItem((GeoPoint) point, "Center", "Center");  
           itemizedoverlay0.addOverlay(overlayItem0);        
       }//for
       mapOverlays.add(itemizedoverlay0);    
       mapView.getController().animateTo(point);
       mc.setZoom(7);      
}//try 
```

也 `mapOverlays.remove(itemizedoverlay0);` 不起作用..谢谢！

* * *

它仍然不起作用..在 rm0() 函数中我认为是问题所在。我写的：

```
 public void rm0()
  {                
          for(int i=0; i< mapOverlays.size();i++)
          {
              Toast.makeText(getBaseContext(), "in the rm0"+i,Toast.LENGTH_SHORT).show();
              mapOverlays.remove(overlayItem0);
          }

  } 
```

我怎样才能只删除 itemizedOverlay0 ？我试过 itemizedoverlay0.clearOverlay(); 也是，但什么也没发生..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:55:59.200

`populate()`更改中的项目后，您错过了电话`ItemizedOverlay`。

改变方法如下：

```
public void removeOverlay(int item) {
      mOverlays.remove(item);
      populate();
} 

public void clear() {
      mOverlays.clear();
      populate();
} 
```

--已编辑--

```
HelloItemizedOverlay itemizedoverlay0 = new HelloItemizedOverlay(drawable0, this);
try {
    JSONArray jArray = new JSONArray(result);
    for(int i=0; i<jArray.length();i++){
        JSONObject json = jArray.getJSONObject(i);
        double d1 =json.getDouble("longtitude");
        double d2 =json.getDouble("latitude");
        Drawable drawable0 = this.getResources().getDrawable(R.drawable.marker_default);
        GeoPoint point = new GeoPoint((int) (d2 * 1E6), (int) (d1 * 1E6));
        OverlayItem overlayItem0= new OverlayItem((GeoPoint) point, "Center", "Center");
        itemizedoverlay0.addOverlay(overlayItem0);
    }
    mapOverlays.add(itemizedoverlay0);
    mapView.getController().animateTo(point);
    mc.setZoom(7);
} 
```

问候

# r - reshape::melt data.frame 中字符的意外行为

> ID：13847388
> 
> 赞同：1
> 
> 时间：2012-12-12T19:45:09.737
> 
> 标签：r, dataframe, reshape

我回到了我上个月写的一些 R 代码，但我使用的 reshape (0.8.4, R 2.15.2) 版本似乎改变了这个功能。

这是一个示例：

```
> library(reshape)
> so.test <- data.frame(
                       one = as.character(rnorm(750)),
                       two = as.character(rnorm(750)),
                       three = as.character(rnorm(750)), four = as.character(rnorm(750)))
> check <- melt(so.test)

Using one, two, three, four as id variables 
```

这给出了一个等于原始数据的 data.frame：

```
> table(so.test == check)

TRUE 
3000 
```

我也用 reshape2::melt 试过这个，但我得到了相同的结果。有趣的是，该`melt()`函数与具有数值的 data.frame 一起按预期工作：

```
> so.test2 <- data.frame(
                      one = rnorm(750),
                      two = rnorm(750),
                      three = rnorm(750), four = rnorm(750))
> check2 <- melt(so.test2)
Using  as id variables
> head(check2)
  variable      value
1      one  0.2471168
2      one -0.0663480
3      one -0.0251867
4      one  2.8786207
5      one -0.2586785
6      one -0.7508927 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:54:38.167

reshape 和 reshape2 版本的文档都说：

> 如果您都不提供，melt 将假定因子和字符变量是 id 变量，而所有其他变量都是测量的。

`melt`记录的行为也是如此。

# jakarta-ee - 登录没有失败

> ID：13847389
> 
> 赞同：0
> 
> 时间：2012-12-12T19:45:11.777
> 
> 标签：jakarta-ee, weblogic-10.x, weblogic11g

我正在使用 WebLogic 10.3.3。每次调用我的 Web 服务之一时，我都想将日志条目写入数据库。

我的问题是，将日志信息发送到数据库的最佳方式是什么？如果数据库已关闭，我不希望日志记录代码停止 Web 服务。如果日志记录代码失败，我不希望我的 Web 服务等待或崩溃。我希望日志记录例程中的任何错误都被 Web 服务代码完全忽略。

我不确定如何在 WebLogic 上的 Java EE 中执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:47:56.690

我想你已经试了一下 log4j？只需用 try/catch 块包围您的日志记录，它就会影响您的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:55:51.070

您对彼得的评论是正确的。

您当然需要一个单独的服务来处理日志记录。

您总是会遇到“如果记录器关闭 - 数据库或服务”丢失消息的问题。

您需要做的是设置一个 JMS 队列，最有可能使用基于文件的后备存储，该后备存储发生故障的可能性最小。让您的服务写入 JMS 队列以执行日志记录，并让您的 EJB 记录器服务从队列中提取消息以写入数据库。

这样，日志消息将立即存储，而不必立即添加到数据库中，同时不需要您的服务等待数据库提交完成。

有一些方法可以在不等待完成响应的情况下写入 JMS 队列，这样您就可以最大限度地减少对服务的影响。

我不记得 10.3.3 是否具有策略网关功能，或者是否在 10.3.4 中出现，但是将您的客户端组件作为策略实现会更容易应用于您的每个服务，而无需实际接触您的服务代码并给出你是一个可重复使用的解决方案。

# ios - 内容可编辑的 UIWebView 在 iOS 中的 uiview 的按钮/图像上滚动和重叠

> ID：13847397
> 
> 赞同：0
> 
> 时间：2012-12-12T19:45:39.003
> 
> 标签：ios, uiwebview, contenteditable

我有一个带有几个按钮和 UIWebView 的视图，它加载了内容可编辑的 HTML。在 UIWebView 我使用本机和 javascript 功能插入图像/画布。

由于只要单击 webview 键盘就会出现 WebView 是可编辑的。现在，当我们插入/编辑图像/画布时，键盘应该隐藏。因此，我正在检查点击事件，获取该位置元素的 id 并隐藏键盘，如果这是使用 [webview endEditing:YES]; 的图像/画布。

现在我面临的问题是，如果我添加 2-3 个图像然后单击 webview，webview 开始从它的位置移动并重叠保留在 uiview 中的按钮/图像。所以按钮不可见，我无法执行与此相关的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:45:40.833

问题解决了。当键盘显示/隐藏时，我正在使用某种动画。一旦我删除了 uiwebview 就不会移动。

# html - 选择 XHTML 中的所有格式化节点

> ID：13847399
> 
> 赞同：0
> 
> 时间：2012-12-12T19:45:43.443
> 
> 标签：html, xpath, html-agility-pack

使用 HTML Agility Pack，我正在尝试使用 XPATH 选择 XHTML 中的节点。我想在每个 p 标签中选择我在下面列出的孩子，而不是孙子：

```
<strike></strike>
<em></em>
<u></u>
<strong></strong>
<sub></sub>
<sup></sup> 
```

换句话说，我正在寻找**A**和**B**，但不是任何一个节点的第二级。同时，可以在集合中的任何位置找到**A**或**B节点。**注意：**A**或**B**可以是我上面列出的任何一个。

![A和B图像来表示节点树](../Images/100629e2c274e36a64929372516bc27a.png)

如果我有以下 XHTML：

```
<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta name="generator" content="HTML Tidy for Windows (vers 25 March 2009), see www.w3.org" />
<title></title>
</head>
<body>
    <p><strike>element 1</strike> and <strike><em>element 2</em></strike></p>
    <p><strike>element 3</strike></p>
    <p><strike>element 4</strike></p>
</body>
</html> 
```

如果我可以在每个 p 标记中选择上面列出的子节点，它将返回以下节点集合：strike、strike、strike 和strike。让我接触到每次罢工的孩子。

```
<strike>element 1</strike> and <strike><em>element 2</em></strike> 
```

XPATH 中的第一个表示 sub `[1]`（我的意思是罢工的实例），第二个被忽略的是 sub `[2]`（我的意思是罢工的实例）。这是有道理的，因为这就是我的查询正在做的事情。然后 XPATH 抓取`<em>`标签等等......

我可以解释这一点的另一种方式是说我想要`//a|//b|//c|//d|//e`而**不是孩子**。这可能吗？

最后，这让我对如何找到解决方案感到困惑。

我在[MSDN](http://msdn.microsoft.com/en-us/library/ms256122.aspx)上寻找关于 XPATH 的答案。

如果您需要进一步的研究或信息，请告诉我。我会提供的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:47:08.273

你用`//`.

这将选择整个文档中的所有匹配节点，无论在哪个级别。如果您只想在它们直接位于 a 下时选择某些节点`p`，请执行`//p/strike`. 这将匹配`p`任何地方的节点，但只有`strike`直接在 a 下的节点`p`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:38:58.480

*在Frank van Puffelen*和工作中的朋友的建议下，我想出了一个很好的解决方案。

这个问题将分两步解决。

**首先**，我将选择我需要的所有节点`SelectNodes("//strike|//em|//u|//strong|//sub|//sup")`。

**其次**，然后我将使用 for 循环遍历我选择的所有节点，查看节点父节点，如果父节点是以下之一：strike、em、u、strong、sub 和 sup，然后将其删除并继续。

*感谢大家。*

# php - Twig 模板、继承和块使用

> ID：13847404
> 
> 赞同：1
> 
> 时间：2012-12-12T19:46:12.230
> 
> 标签：php, twig

我使用 Twig 创建了三个模板。第一个`A`定义了块，第二个从第一个扩展，但包括第三个模板，它设置块的内容`A`。

通过浏览器加载呈现 b.html.twig 的 url 时，块中的内容`A`（由第 3 个模板定义）未定义块 _A。

例子：

```
<!-- base.html.twig -->
{% block _css '' %}

{% block _header '' %}
{% block _content '' %}
{% block _footer '' %}

{% block _js '' %}

<!-- layout.html.twig -->
<!-- header and footer are placed in the raight zone -->
{% extends ::base.html.twig %}

{% block _header %}
    {% render "MyBundleBundle:Header:header"  %}
{% endblock %}

{% block _footer %}
    {% render "MyBundleBundle:Footer:footer" %}
{% endblock %}

<!-- my_template.html.twig -->
<!-- content is also placed in the right zone but css and js blocks in the included     template are not placed where declared in base.html.twig -->
{% extends MyBundleBundle::layout.html.twig %}
{% block _content %}
     SOME_CONTENT
     {% include MyBundleBundle::my_included_template.html.twig %}
{% endblock %}

<!-- my_included_template.html.twig -->
{% block _css %}
 <link.......................>
{% endblock %}

{% block _js %}
 <script..................>
{% endblock %}

MORE CONTENT BELONGING TO THE INCLUDED TEMPLATE 
```

我在这里期望的是，_css 阻止内容出现在页面顶部，_js 阻止内容出现在底部，但这并没有发生。我希望你能看到我哪里出错了，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:58:29.327

[包含](http://twig.sensiolabs.org/doc/tags/include.html)标签不像您认为/希望的那样工作。它只是将文件包含到当前上下文中。这意味着您不能引用[blocks](http://twig.sensiolabs.org/doc/tags/block.html)。您只能在文件顶部具有[扩展标签的模板中引用块。](http://twig.sensiolabs.org/doc/tags/extends.html)

您将不得不重新构建您设计模板的方式以使其适合您。而不是包括`my_included_template.html.twig`你应该直接在你的控制器中呈现该模板。这样它就可以完全访问任何继承的块。

# c# - 向实体框架模型添加属性

> ID：13847408
> 
> 赞同：2
> 
> 时间：2012-12-12T19:46:21.933
> 
> 标签：c#, entity-framework

我在我的数据访问层中使用实体框架，我也使用它作为我的对象模型。

伪对象模型：

```
public class Item{
    public string ID{get;set;}
    public string Name{get;set;}
    public Xml Data{get;set;}
} 
```

Data 属性是这里的关键。我希望能够做到这一点：

伪：

```
var item = Items.Get(id: 1);
var xmlValue = item["key"]; 
```

我希望能够使用新属性扩展 EF 生成的类 Item，在该属性中我使用一些逻辑从 xml 中按键获取值。

我的问题是：

1.  我发现 EF 数据模型不太容易使用，当我想更新 Item 表时，我不能确定我的扩展逻辑是否会成立。
2.  我不认为我想添加一个提取的模型并每次都将 EF Item 转换为 My.Item。如果桌子变大，这将是一个繁重的操作。

扩展 EF 对象模型的好方法是什么？

我没有

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:51:43.860

您可以只使用部分类并定义额外的字段/属性。

如果字段相同，则从 EF 项目转换为您的项目是微不足道的，您可以使用 [Automapper](http://automapper.codeplex.com/)

我倾向于部分类解决方案。

# asp.net - 在 ASP 中使用一个验证器一起验证一组控制器。网

> ID：13847411
> 
> 赞同：0
> 
> 时间：2012-12-12T19:46:26.050
> 
> 标签：asp.net

我有 3 个下拉列表，日、月、年，很简单，就是出生日期。

我需要一起验证这 3 个，也就是说，如果我选择了 day = 2，month = 3，但我没有选择 Year（默认选择 value = null），我需要这个验证器告诉我 DOB 不是完全设置。

如何将这 3 个 DropDownLists 链接在一起？

# google-drive-api - Licensing Manager API 可以检索云端硬盘配额使用情况吗？

> ID：13847420
> 
> 赞同：1
> 
> 时间：2012-12-12T19:47:05.740
> 
> 标签：google-drive-api, google-license-manager

Google Licensing Manager API [https://developers.google.com/google-apps/licensing/](https://developers.google.com/google-apps/licensing/)可用于将云端硬盘许可证分配给 Apps 域中的用户。如何检索给定用户实际使用的存储量，而不仅仅是他们的总配额？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:47:05.740

这不能在 Licensing Manager API 中完成，它只检索有关实际存储许可证的信息。用户实际使用的配额数量可以通过 Drive API 中的 about 调用找到，记录在[https://developers.google.com/drive/v2/reference/about/get](https://developers.google.com/drive/v2/reference/about/get)中。特别是`quotaBytesUsed`财产。

# c# - 为什么 VS2012 以不同的速度运行相同的测试？

> ID：13847421
> 
> 赞同：2
> 
> 时间：2012-12-12T19:47:05.753
> 
> 标签：c#, unit-testing, testing, visual-studio-2012, performance-testing

我正在处理一个代码存在性能问题的项目。

我有一些我认为会提高性能的更改，但没有真正的方法来衡量我的更改如何影响它。

我编写了一个单元测试，它按照当前实现的方式执行操作，并`Stopwatch`监控函数运行的速度。我还写了一个类似的单元测试，它做的事情略有不同。

如果测试一起运行，一个需要 1 秒完成，另一个需要 73 毫秒。如果测试是分开运行的，它们都需要大约 1 秒才能完成（是的.. 我所做的改变似乎并没有太大变化）。

如果测试相同，我有同样的问题，一个比另一个运行得快。

Visual Studio 是否在幕后做一些事情来提高性能？如果是，我可以关闭它吗？

我尝试将测试移动到不同的文件中，但这并没有解决我遇到的问题。

我希望能够运行所有测试，但让它们像一次只运行一个测试一样运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:21:16.793

我的猜测：很可能是 dll 加载和 JIT 编译

### 1\. 装配装载。

.NET 延迟加载程序集（dll）。如果您添加对 FooLibrary 的引用，这并不意味着它会在您的代码加载时被加载。相反，当你第一次从 FooLibrary 调用一个函数或实例化一个类时，*CLR*将去加载它所在的 dll。这涉及在文件系统中搜索它，可能的安全检查等。
如果你代码甚至中等复杂，那么“第一次测试”通常最终会导致加载数十个程序集，这显然需要一些时间。
随后的测试看起来很快，因为一切都已经加载。

### 2.JIT编译

请记住，您的 .NET 程序集不包含 CPU 可以直接执行的代码。每当您调用任何 .NET 函数时，CLR 都会获取 MSIL 字节码并将其编译为可执行的机器代码，然后运行并运行该机器代码。它在每个功能的基础上执行此操作。
因此，如果您考虑到第一次调用*任何*函数时，它在 JIT 编译时会有一点延迟，这些东西可以加起来。如果您要调用大量函数或初始化大型第三方库（想想实体框架等），这可能会特别糟糕。
如上所述，后续测试看起来很快，因为许多函数已经被 JIT 编译并缓存在内存中。

### 那么，你怎么能绕过这个呢？

您可以通过减少程序集来缩短程序集加载时间。这意味着更少的文件搜索等等。[microsoft .NET 性能指南](http://msdn.microsoft.com/en-us/library/ff647790.aspx)更详细。另外，我相信将它们安装在全局程序集缓存中可能（??）会有所帮助，但我根本没有测试过，所以请多加注意。安装到 GAC 需要管理权限，并且是一项重量级的操作。您不想在开发期间这样做，因为它*会*导致您出现问题（程序集从 GAC 加载而不是文件系统，因此您最终可能会在没有意识到的情况下加载代码的旧副本）。

[您可以通过使用ngen](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.100%29.aspx)预编译您的程序集来改进 JIT 时间。但是，与 GAC 一样，这需要管理权限并且需要一些时间，因此您也不希望在开发期间这样做。

我的建议？

首先，在单元测试中测量性能并不是一件特别好的或可靠的事情。谁知道 Visual Studio 在后台执行的其他操作可能会或可能不会影响您的测试。

一旦你得到你的代码，你就试图在一个独立的应用程序中进行基准测试，让它循环并运行所有测试两次，然后丢弃第一个结果:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:53:28.350

“过早的优化是万恶之源。”

如果你以前没有测量过，你怎么知道你现在正在修理什么？你怎么知道你有一个需要解决的问题？

单元测试是为了操作正确性。它们可以用于性能，但我不会依赖它，因为许多其他因素会在运行时发挥作用。

您最好的选择是获得一个分析器（或使用 VS 附带的一个）并开始测量。

# git - 用主分支中的相同文件覆盖当前分支中的单个文件？

> ID：13847425
> 
> 赞同：131
> 
> 时间：2012-12-12T19:47:21.573
> 
> 标签：git

假设我有两个分支 -`master`和`redesign`. 我将如何`default.aspx.cs`用 master 中的文件覆盖我的重新设计分支中的文件？

我发现[了这个问题](https://stackoverflow.com/questions/692246/how-do-i-revert-one-file-to-the-last-commit-in-git)，但它似乎讨论了如何将文件恢复到同一分支中的先前版本。我也考虑过使用 a `merge`，但我不想合并，我想覆盖。建议？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-12-12T19:51:07.547

`git checkout master path/to/default.aspx.cs`

在执行此操作之前，您可能必须：`git checkout redesign`

所以就**`git checkout FROM_BRANCH_NAME path/to/file`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-09T06:57:37.857

从另一个分支覆盖一个分支中的文件，即`master`做`redesign`（什么时候`redesign`是当前分支）

`git checkout master ./path_to_file/default.aspx.cs`

`git checkout branch_name ./path_to_file/file_name.[file_extension]`

要了解有关命令 checkout 的更多信息[git checkout](https://git-scm.com/docs/git-checkout)文档

# javascript - 如何在 grunt 中压缩文件夹？

> ID：13847432
> 
> 赞同：10
> 
> 时间：2012-12-12T19:47:47.533
> 
> 标签：javascript, node.js, gruntjs

我有一个文件夹`"foo"`，但是在我的目标文件夹中，`"target"`我想发送文件夹的 zip 版本，`"foo"`例如`"foo.zip"`，我在谷歌上找到了很多压缩文件的方法，但不是文件夹，那么我们如何在 grunt 中压缩整个文件夹？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-29T15:38:54.453

接受的答案是在 grunt-contrib-compress 0.5.0 中引发错误。试试这个：

```
compress: {
    foo: {
        options: {
            archive: './foo.zip',
            mode: 'zip'
        },
        files: [
            { src: './foo/**' }
        ]
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T06:05:45.457

根据上述建议，我可以得到答案，我们可以使用[https://github.com/gruntjs/grunt-contrib-compress/](https://github.com/gruntjs/grunt-contrib-compress/)压缩文件夹。

```
compress: {
            zip:{ 
                  files: {
                            './foo.zip': './foo/**'
                         }
                }
          } 
```

# iphone - 停止在 appstore 上销售并仍然提供更新

> ID：13847435
> 
> 赞同：0
> 
> 时间：2012-12-12T19:47:55.927
> 
> 标签：iphone, ios, app-store

我在 AppStore 上有一个应用程序，我将要下载它。但我想为现有用户提供更新。那有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:52:48.710

不，一旦它从 App Store 中删除，如果他们在本地没有该应用程序的备份，他们甚至无法重新安装它，所以忘记为不在应用程序中的应用程序提供更新再存储。

有趣的阅​​读：

[http://lifehacker.com/5867673/what-do-i-do-when-apple-removes-an-app-i-bought-from-the-app-store](http://lifehacker.com/5867673/what-do-i-do-when-apple-removes-an-app-i-bought-from-the-app-store)

# r - 合并两个数据集，删除重复列，添加新列

> ID：13847437
> 
> 赞同：0
> 
> 时间：2012-12-12T18:53:06.990
> 
> 标签：r, dataset

我有两个数据集： [这是第一个](https://www.dropbox.com/s/ikio3dexmvtg2w6/J_B5H1.csv)，[这是第二个](https://www.dropbox.com/s/pcrtz0o7lka8u8p/J_BL5H1.csv)。

我的目标是合并这些数据，删除第一个或第二个“JN”列，因为它是重复出现的，并找到这些数据之间“频率”的比率。

对于每一行，我想使用这个计算：

```
=(100)-(100*(FreqBL/FreqB)) 
```

并将这个新计算放到第 4 列。

新数据应如下所示：

```
JN  FreqBL  FreqB  Success Ratio
 4    10      33      69.6969 
```

但我不知道如何分别选择所有行以及计算所需的代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:06:53.943

你想要`merge`数据集。下一次，我会推荐你​​提供一个可重现的小例子。

```
> new.dt <- merge(dt1, dt2)
> new.dt$"Success ratio" <- with(new.dt, 100-(100 * (FreqBL/FreqB)))
> head(new.dt)
  JN FreqB FreqBL Success ratio
1  4    33     10      69.69697
2  8    49     10      79.59184
3 10    44     13      70.45455
4 11    38      7      81.57895
5 13    29      3      89.65517
6 17    15     10      33.33333 
```

# jquery - 客户端验证不适用于 mvc 4

> ID：13847441
> 
> 赞同：0
> 
> 时间：2012-12-12T19:48:10.527
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

出于某种原因，我在 mvc 3 中正确验证了相同的代码，但在 mvc 4 中从未调用客户端验证。本质上，我需要客户端验证才能在 jquery 模式对话框中工作。关于为什么不调用客户端验证的任何想法？

**网页配置**

```
<appSettings>
   <add key="webpages:Version" value="2.0.0.0" />
   <add key="webpages:Enabled" value="false" />
   <add key="PreserveLoginUrl" value="true" />
   <add key="ClientValidationEnabled" value="true" />
   <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

**调用jquery对话框的代码**

```
<script src="@Url.Content("~/Scripts/jquery-1.8.3.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.9.2.custom.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

<script>
    $(document).ready(function () {
        $('#lnk_report').click(function () {
            $('#dialog_report').dialog('open');

        });

        $.validator.unobtrusive.parse('#dialog_report');
        $('#dialog_report').dialog({
            position: {
                my: "center",
                at: "center",
            },
            autoOpen: false,
            width: 800,
            resizable: true,
            title: 'Report',
            modal: true,
            open: function (event, ui) {
                $(this).load('@Url.Action("CreateReport")');
            },
            buttons: {
                "Cancel": function () {
                    $(this).dialog("close");
                },
                "Submit": function () {
                    if ($('form').validate().form()) {
                        $.ajax({
                            url: '@Url.Action("CreateReport")',
                            type: 'POST',
                            data: $("form").serialize(),
                            success: function (result) {
                                $('#dialog_report').dialog("close");
                            }
                        });
                    }
                }
            }
        });

    });
</script>

@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
        </div>
    </section>
}

 <a id="lnk_report">Monthly Report</a>
 <div id="dialog_report" title="Report" style="overflow: hidden;"></div> 
```

**对话框代码**

```
@model DefaultMvc4App.Models.ReportModel

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <table>
        <tr>
            <td>@Html.LabelFor(model => model.Month)</td>
            <td>@Html.DropDownListFor(model => model.Month, Model.AllMonths, "-- Select Month --")</td>
            <td>@Html.ValidationMessageFor(model => model.Month)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.Year)</td>
            <td>@Html.DropDownListFor(model => model.Year, Model.AllYears, "-- Select Year --")</td>
            <td>@Html.ValidationMessageFor(model => model.Year)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.GeneralMeeting)</td>
            <td>@Html.DropDownListFor(model => model.GeneralMeeting, Model.YesNo, "-- Select Answer --")</td>
            <td>@Html.ValidationMessageFor(model => model.GeneralMeeting)</td>
        </tr>
    </table>
} 
```

**报告模型**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Data.Entity;
using System.Globalization;
using System.Web.Mvc;
using System.Web.Security;

namespace DefaultMvc4App.Models {
    public class ReportModel {
        [Key]
        public Guid ReportID { get; set; }

        [Required]
        public string Month { get; set; }
        public IEnumerable<SelectListItem> AllMonths {
            get { return new SelectList(Utils.GetMonths()); }
        }

        [Required]
        public string Year { get; set; }
        public IEnumerable<SelectListItem> AllYears {
            get { return new SelectList(Utils.GetYears()); }
        }

        [Required]
        public string GeneralMeeting { get; set; }
        public IEnumerable<SelectListItem> YesNo {
            get { return new SelectList(Utils.GetYesNo()); }
        }
    }
} 
```

**控制器代码**

```
 [HttpPost]
    public ActionResult CreateReport(ReportModel report) {
        if (ModelState.IsValid) {
            try {
                report.ReportID = Guid.NewGuid();
                db.report.Add(report);
                db.SaveChanges();
                return Json(new { success = true });
            }
            catch (Exception e) {
                return Json(new { success = false });
            }
        }
        return Json(new { success = false });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:37:30.537

*示例展示如何将数据发布到控制器方法*

**剃刀代码：**

```
<div id="form">
        <table width="600">
            <tr>
                <td>Select Date:</td>
                <td>
                    <input class="txtDate" type="date" size="20"></td>
            </tr>
            <tr>
                <td>Select Expense Type:</td>
                <td>
                    <select class="ExpenseType">
                        <optgroup label="Room">
                            <option>Room Fare</option>
                        </optgroup>

                        <optgroup label="Mess">
                            <option>Monthly Mess</option>
                        </optgroup>

                        <optgroup label="Others">
                            <option>Bus Fare</option>
                            <option>Tapari</option>
                            <option>Mobile Recharge</option>
                            <option>Auto</option>
                        </optgroup>
                    </select></td>
            </tr>
            <tr>
                <td>Enter Cost:</td>
                <td>
                    <input  class="cost" type="text" size="45" /></td>
            </tr>
            <tr>
                <td>Extra Details:</td>
                <td>
                    <input class="extra" type="text" size="45" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <button href="javascript:void(0);" onClick="saveExpense();" >Submit</button></td>
            </tr>
        </table>
    </div>

<script>
function saveExpense()
    {
        var expenseobject = {
            date:$('.txtDate').val() ,
            type:$('.ExpenseType').val() ,
            cost: $('.cost').val(),
            extra:$('.extra').val()

        };

        $.ajax({
            url: './saveexpense',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ obj: expenseobject }),
            success: function (result) {
                handleData(result);

            }
        });

    }
</script> 
```

**控制器：**

```
 public ActionResult SaveExpense(Expense obj)
        {
            obj.ExpenseId = Guid.NewGuid();
            if (ModelState.IsValid)
            {
                context.expenses.Add(obj);
                context.SaveChanges();
                int total=context.expenses.Sum(x => x.cost);
                return Json(new {spent=total,status="Saved" });

            }
            else
                return Json(new { status="Error"});   
        } 
```

费用是我的模型，其对象的字段被创建为 obj ......希望这会让你现在通过......

# iphone - xcode webview错误不起作用

> ID：13847446
> 
> 赞同：1
> 
> 时间：2012-12-12T19:48:23.367
> 
> 标签：iphone, objective-c, ios

此 Web 视图失败错误，即使在加载网站时也会显示警报弹出窗口。我相信我需要延迟此方法才能使其起作用。这样做的最佳方法是什么？

```
- (void)webView:(UIWebView *)webViewfail didFailLoadWithError:(NSError *)error 
{
    if([webViewfail isEqual:webview]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Failed" message:@"Check your Internet connection before refreshing."
                                                   delegate:webview
                                          cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
} 
```

这是我加载网站的方式

```
- (void)viewDidLoad
{
    [webview loadRequest:[NSURLRequest requestWithURL:[NSURL    URLWithString:@"http://www.blabla.com"]]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T18:41:50.083

问题很可能是错误 -999，通常在网页中的某些内容未正确加载或用户在页面仍在加载时尝试返回时发生。经过一些研究，这是我发现并用来防止 NetworkAlert 每次都弹出但在没有网络时仍会弹出的内容。

```
-(void)webView:(UIWebView *)webBlog didFailLoadWithError:(NSError *)error{

if ([error code] != -999) {
    NSLog(@"Could not load the dumb webPage");
    //show error alert, etc.
    [self showNoNetworkAlert];
   }else{

NSLog(@"Could not load the dumb web page...just might blame user!");
    }
}

- (void) showNoNetworkAlert{
UIAlertView *baseAlert = [[UIAlertView alloc]
                          initWithTitle:@"No Network"     message:@"A network connection is required.  Please verify your network settings and try again."
                          delegate:nil cancelButtonTitle:nil
                          otherButtonTitles:@"Dismiss", nil];
[baseAlert show];
} 
```

希望这可以帮助某人...

# linux - 如何在 Ubuntu 12.0.4 上安装 libjpeg-turbo8

> ID：13847447
> 
> 赞同：1
> 
> 时间：2012-12-12T19:48:23.150
> 
> 标签：linux, ubuntu, libjpeg-turbo

正如谷歌所建议的那样，我试图让[http://jpegclub.org/jpegtran/](http://jpegclub.org/jpegtran/)在我的 Ubuntu 服务器上工作，但我收到了错误：

“jpegtran：加载共享库时出错：libjpeg.so.8：无法打开共享对象文件：没有这样的文件或目录”

谷歌搜索告诉我安装（通过 apt-get）libjpeg-turbo8，但是 apt-get 找不到该软件包。我自己的 Ubuntu 计算机（运行 12.0.10）可以很好地找到该软件包。

我尝试安装[http://sourceforge.net/projects/libjpeg-turbo/](http://sourceforge.net/projects/libjpeg-turbo/)没有运气。

我做错了什么还是我错过了什么？我如何让 jpegtran 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T06:53:14.520

这个问题可能很老，但我试图运行 glassfish 更新工具，但由于缺少 libjpeg 库而失败。

我确实采取的步骤：

```
1\. install libjpeg62:i386 (for 64 bit ubuntu amd6) 
```

我希望它可以帮助某人

# iphone - 如何在 iOS 上从右到左读取 PDF 文件

> ID：13847448
> 
> 赞同：-1
> 
> 时间：2012-12-12T19:48:29.840
> 
> 标签：iphone, ios, pdf, ios6

我正在做一个从服务器读取 pdf 文件并将它们显示在屏幕上的基本项目。问题是我想从右到左读取这些文件作为一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:54:05.243

就像`Massimo Cafaro`说：

如果您想从 pdf 文件中提取一些内容，那么您可能需要阅读以下内容：

[解析 PDF 内容](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html)

来自 Quartz 2D 编程指南。

基本上，您将使用一个`CGPDFScanner`对象来解析内容，其工作原理如下。您注册了一些回调，当在 pdf 流中遇到一些 pdf 运算符时，Quartz 2D 将自动调用这些回调。在这个初始步骤之后，您实际上开始解析 pdf 流。

简要看一下您的代码，您似乎没有遵循解析您通过的页面的 pdf 内容所需的步骤`CGPDFDocumentGetPage()`。您首先需要使用`CGPDFOperatorTableCreate()`and设置回调`CGPDFOperatorTableSetCallback()`，然后获取页面，您需要使用该页面（使用`CGPDFContentStreamCreateWithPage()`）创建内容流，然后实例化一个`CGPDFScanner`through`CGPDFScannerCreate()`并实际开始扫描 through `CGPDFScannerScan()`。

上述 URL 指出的文档的“解析 PDF 内容”部分为您提供了实现 pdf 解析所需的所有信息。

如果你不尝试任何东西，你可以从这个项目[链接开始](https://github.com/mobfarm/FastPdfKit)

# python - 如何破译这个 cPickle 错误？

> ID：13847450
> 
> 赞同：2
> 
> 时间：2012-12-12T19:48:34.383
> 
> 标签：python, python-2.7, pickle

我有一个名为的腌制文件`classifier.pkl`，我正在尝试将其加载到另一个模块中。但是，我收到一个我不明白的错误。

我的腌制代码：

```
features = ['bob','ice','snowing'] #... shortened for exposition's sake
def extract_features(document):
      return  {'contains(%s)'% word: (word in set(document)) 
                 for word in all_together_word_list} 
training_set = classify.util.apply_features(extract_features,tweets[0])
classifier = NaiveBayesClassifier.train(training_set)
cPcikle.dump(open('cocaine_classifier.pkl','wb')) 
```

我的解压代码：

```
features, extract_features, classifier = 
         cPickle.load(open('cocaine_classifier.pkl','rb')) 
```

我的错误：

```
AttributeError: 'module' object has no attribute 'extract_features' 
```

不久前，我`.pkl`通过腌制三件事来制作文件：

*   特点：列表
*   extract_features : 函数
*   分类器：NLTK 朴素贝叶斯分类器的实例

令人费解的是，我在以下代码中遇到了同样的错误：

```
x = cPickle.load(open('cocaine_classifier.pkl','rb')) 
```

为什么我不能检索三样东西？即使我不想解包元组？

**更新**

正如 NPE 指出的那样，要取消腌制的函数的路径必须与取消腌制的函数完全匹配。我正在调试和终端，因此`from mod import *`将所有内容加载到命名空间中，而`import mod as m`没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:10:24.900

问题是当你腌制一个函数时，只有函数的（完全限定的）名称被腌制，而不是函数本身。这意味着您必须在 unpickling 时将函数定义到位。

你有没有故意腌制call的*结果*`extract_features`？

# ios - 有透明度问题的绘画

> ID：13847452
> 
> 赞同：1
> 
> 时间：2012-12-12T19:48:45.023
> 
> 标签：ios

我正在使用 CGLayers 来实现类似于 Photoshop 喷枪的“绘画”技术 - 并且遇到了一些奇怪的事情。当我使用透明度并重绘一个区域时，颜色永远不会达到完全强度（如果 alpha 值低于 0.5）。我的应用程序使用圆形“喷枪”图案，边缘不透明度下降，但我仅使用半透明白色正方形重现了该问题。当不透明度级别小于 0.5 时，重绘区域永远不会达到源图层的纯白色。我可能不会注意到，但我将绘画的结果用作蒙版，并且无法获得纯白色会导致问题。有什么想法吗？目标 iOS SDK 5.1。

下面是在黑色背景上多次绘制半透明正方形后的结果颜色：

```
opacity color
------  -----
1.0     255
0.9     255
0.8     255
0.7     255
0.6     255
0.5     255
0.4     254
0.3     253
0.2     252
0.1     247 
```

显示问题的简化代码：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef viewContext = UIGraphicsGetCurrentContext();

    // Create grey gradient to compare final blend color
    CGRect lineRect = CGRectMake(20, 20, 1, 400);
    float greyLevel = 1.0;
    for(int i=0;i<728;i++)
    {
        CGContextSetRGBFillColor(viewContext, greyLevel, greyLevel, greyLevel, 1);
        CGContextFillRect(viewContext, lineRect);
        lineRect.origin.x += 1;
        greyLevel -= 0.0001;
    }

    // Create semi-transparent white square
    CGSize whiteSquareSize = CGSizeMake(40, 40);
    CGLayerRef whiteSquareLayer = CGLayerCreateWithContext (viewContext, whiteSquareSize, NULL);
    CGContextRef whiteSquareContext = CGLayerGetContext(whiteSquareLayer);
    CGContextSetAlpha(whiteSquareContext, 1.0f); // just to make sure
    CGContextSetRGBFillColor(whiteSquareContext, 1, 1, 1, 0.3); // ??? color never reaches pure white if alpha < 0.5
    CGRect whiteSquareRect = CGRectMake(0, 0, whiteSquareSize.width, whiteSquareSize.height);
    CGContextFillRect(whiteSquareContext, whiteSquareRect);

    // "Paint" with layer a bazillion times
    CGContextSetBlendMode(viewContext, kCGBlendModeNormal); // just to make sure
    CGContextSetAlpha(viewContext, 1.0); // just to make sure
    for(int strokeNum=0;strokeNum<100;strokeNum++)
    {
        CGPoint drawPoint = CGPointMake(0, 400);
        for(int x=0;x<730;x++)
        {
            CGContextDrawLayerAtPoint(viewContext, drawPoint, whiteSquareLayer);
            drawPoint.x++;
        }
    }
} 
```

# ios - Titanium Studio Webview 不允许我与网站交互

> ID：13847453
> 
> 赞同：1
> 
> 时间：2012-12-12T19:48:52.870
> 
> 标签：ios, webview, titanium

我正在开发的应用程序的一部分需要访问外部网站来回答一些问题。

需要时，我会打开一个 Web 视图并将 URL 设置为此站点。页面加载正常，但无法交互。无法编辑文本字段并且无法单击按钮。为了确保它不是我的网站（适用于 iOS safari），我将网络视图指向 www.google.com 并且也无法单击那里的搜索按钮。基本上：

```
var webView = Titanium.UI.createWebView({url: 'http://www.google.com'});
win.add(webView);
win.open(); 
```

是否有一些技巧可以通过 Web 视图与网站进行交互？目前我无法使用本机应用程序和网络服务，需要让应用程序与现有网站一起使用才能填写此表格。

钛工作室 2.1.2 和 iOS6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:14:08.223

也许您在将 WebView 放入窗口后放置了一些视图（Ti.UI.View）？

# java - 使用 sax 和 java 从 xml 文件中删除多个节点

> ID：13847454
> 
> 赞同：4
> 
> 时间：2012-12-12T19:48:51.477
> 
> 标签：java, xml, sax

我是使用 Java 和 SAX 解析器进行 XML 解析的新手。我有一个非常大的 XML 文件，由于它的大小，我被建议使用 SAX 解析器。我已经完成了部分任务的解析，它按预期工作。现在，XML 作业剩下一项任务：根据用户的请求删除/更新一些节点。

我可以通过名称找到所有标签，更改它们的`data`属性等。如果我能够使用 SAX 执行这些操作，也可以删除。

示例 XML 描述了某些情况下的一些功能。用户的输入是“案例”的名称（`case1`, `case2`）。

```
<ruleset>
    <rule id="1">
        <condition>
            <case1>somefunctionality</case1>
            <allow>true</allow>
        </condition>
    </rule>
    <rule id="2">
        <condition>
            <case2>somefunctionality</case2>
            <allow>false</allow>
        </condition>
    </rule>
</ruleset> 
```

如果用户想要删除其中一种情况（例如`case1`）而不仅仅是标签，则必须删除`case1`完整的标签。`rule`如果`case1`要删除，XML 将变为：

```
<ruleset>
    <rule id="2">
        <condition>
            <case2>somefunctionality</case2>
            <allow>false</allow>
        </condition>
    </rule>
</ruleset> 
```

我的问题是，这可以使用 SAX 完成吗？此时我不能使用 DOM 或任何其他解析器。只有其他选项更糟糕：字符串搜索。如何使用 SaxParser 完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T01:25:20.503

试试看

```
 XMLReader xr = new XMLFilterImpl(XMLReaderFactory.createXMLReader()) {
        private boolean skip;

        @Override
        public void startElement(String uri, String localName, String qName, Attributes atts)
                throws SAXException {
            if (qName.equals("rule")) {
                if (atts.getValue("id").equals("1")) {
                    skip = true;
                } else {
                    super.startElement(uri, localName, qName, atts);
                    skip = false;
                }
            } else {
                if (!skip) {
                    super.startElement(uri, localName, qName, atts);
                }
            }
        }

        public void endElement(String uri, String localName, String qName) throws SAXException {
            if (!skip) {
                super.endElement(uri, localName, qName);
            }
        }

        @Override
        public void characters(char[] ch, int start, int length) throws SAXException {
            if (!skip) {
                super.characters(ch, start, length);
            }
        }
    };
    Source src = new SAXSource(xr, new InputSource("test.xml"));
    Result res = new StreamResult(System.out);
    TransformerFactory.newInstance().newTransformer().transform(src, res); 
```

输出

```
<?xml version="1.0" encoding="UTF-8"?><ruleset>
    <rule id="2">
        <condition>
            <case2>somefunctionality</case2>
            <allow>false</allow>
        </condition>
    </rule>
</ruleset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:24:33.737

SAX 最常用于读取/解析 XML。但是有一篇关于如何使用 SAX 写文件的文章。似乎该章节可在线获得 - 请参阅：

[http://xmlwriter.net/sample_chapters/Professional_XML/31100604.shtml](http://xmlwriter.net/sample_chapters/Professional_XML/31100604.shtml)

[这篇文章的日期是 1999 年，所以它使用的是旧版本的 SAX，但这些概念仍然适用]

基本思想是您创建一个自定义 DocumentHandler/ContentHandler。每当它接收到 SAX 事件时，它就会序列化并将该事件写入流/文件/任何内容。因此，您将输入文档用作 sax 事件的源并将这些事件转发到 XMLOutputter。

困难的部分是您可以将 XML 文档解析为 SAX 事件流，驱动 XMLOutputter 并生成输入文件的精确副本。一旦你开始工作，你就可以进入编辑逻辑，阅读你的规则并使用这些来修改输出文件。

它比 DOM、JDOM、XSLT 等要多得多，但它可能对您的情况有所帮助，因为您不必将整个文档存储在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:11:06.710

您需要构建的是一个 SAX 事件缓冲区。

当您遇到一个`<rule>`元素时，您需要保存它（或重新生成它所需的信息）以及它与您要删除的“案例”之间发生的所有其他事件。

如果您保存的“规则”与需要删除的“规则”相同，只需丢弃信息并继续。

如果您保存的“规则”不是需要删除的，您应该重新生成已保存的 sax 事件并继续。

# jquery - 选择一天时应用不同的样式 - jQuery multidatepicker

> ID：13847456
> 
> 赞同：0
> 
> 时间：2012-12-12T19:49:04.167
> 
> 标签：jquery, css, jquery-ui-datepicker

我正在使用[multidatepicker 插件](http://multidatespickr.sourceforge.net/)。

我的范围内有三天：

1.  不可用 - 这些具有默认样式；

2.  每天点击一次，它就变成了第二种：Out Of Window - 这些有黑色边框。

3.  并且，如果该天被第二次点击，则该天变为最后一种： 免费 - 这些有黑色边框和绿色背景。

所以，我的问题是：如何在被点击的那一天应用一个特定的样式/类？

我试过类似的东西：

```
onSelect: function(){
    $('.ui-state-active').each(function(){
        $(this).addClass('pick_up_free_dayCalendar');    
    })

    $(".calendar_").multiDatesPicker('refresh');
    // multidate picker has no refresh method, I created one!
} 
```

饲料：http : [//jsfiddle.net/TeAKU/](http://jsfiddle.net/TeAKU/)

但是，根本没有用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:34:04.873

我发现了问题：

我必须根据下拉表单动态生成这些日历......所以，它不适用于新日历。

如果我使用静态日历，它会像魅力一样工作......

feedle 上有一个完整的工作示例（请参阅问题链接）

# ruby - 需要 oci8 时脚本失败

> ID：13847457
> 
> 赞同：3
> 
> 时间：2012-12-12T19:49:03.803
> 
> 标签：ruby, watir-webdriver, oci8

我是 ruby​​ 新手，我遇到了这个奇怪的问题。我在 64 位 Win7 上安装了 ruby​​ 1.9.3p125、Oracle11gXE(ver 11.2.0.2.0)。我可以毫无问题地运行此脚本：

```
require 'watir-webdriver'
browser = Watir::Browser.new
browser.close 
```

还有这个脚本：

```
require 'oci8'
conn = OCI8.new('username/passwd')
conn.logoff 
```

但只要我这样做：

```
require 'watir-webdriver'
require 'oci8'
browser = Watir::Browser.new
browser.close 
```

事情出错了 - 我收到了这个错误：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 193: %1 is not a valid Win32 application.   - C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/openssl.so (LoadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/1.9.1/openssl.rb:17:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/1.9.1/net/https.rb:22:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/default.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote.rb:9:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/firefox/bridge.rb:6:in `<module:Firefox>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/firefox/bridge.rb:3:in `<module:WebDriver>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/firefox/bridge.rb:2:in `<module:Selenium>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/firefox/bridge.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/firefox.rb:12:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/common/driver.rb:31:in `for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver.rb:65:in `for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:35:in `initialize'
        from problem.rb:3:in `new'
        from problem.rb:3:in `<main>'
Press any key to continue . . . 
```

另一方面，这工作正常：

```
require 'watir-webdriver'
require 'oci8'
conn = OCI8.new('username/passwd')
conn.logoff 
```

你能帮我解决这个问题吗？当需要 'oci8' 时，'watir-webdriver' 似乎有一些问题。但这可能是错误的假设——可能是一些配置问题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:53:46.590

试试下面的代码。

```
require 'watir-webdriver'
require 'openssl' # <-- Add this line to load openssl.so before oci8.
require 'oci8'
browser = Watir::Browser.new
browser.close 
```

加载 openssl.so 时会引发 LoadError。据我测试，在 oci8 之后加载 openssl 会产生相同的错误，反之亦然。

# php - 如何停止在后台运行的 PHP 脚本

> ID：13847462
> 
> 赞同：15
> 
> 时间：2012-12-12T19:49:29.123
> 
> 标签：php, apache

我开始了这个过程（time.php）

```
<?php

ignore_user_abort(true); // run script in background
set_time_limit(0);       // run script forever 
$interval = 300;         // do every 1 minute...
do
{ 
    // add the script that has to be ran every 1 minute here
    // ...

    $to      = "xxxxxxxxx@gmail.com";
    $subject = "Hello Richie";
    $header  = "From: me@xxxxxxxxx.org";
    $body    = "Hello Richard,\n\n"
             . "I was just testing this service\n\n "
             . "Thanks! ";

    mail($to, $subject, $body, $header);

    sleep($interval); // wait 5 minutes

} while(true); 
?> 
```

但我现在想阻止它。它正在向我的 Gmail a/c 发送数百封邮件。它在一个网络服务器上，我无法重新启动它来终止进程。

有没有办法执行另一个文件来终止进程，或者我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-04T14:43:11.537

如果您没有 shell 访问权限，那么唯一的方法是要求服务器管理员终止该进程。

话虽如此，有一种简单的方法可以设置脚本并使其能够从同一服务器上的任何其他脚本中取消，如下所示：

```
<?php
// at start of script, create a cancelation file

file_put_contents(sys_get_temp_dir().'/myscriptcancelfile','run');

// inside the script loop, for each iteration, check the file

if ( file_get_contents(sys_get_temp_dir().'/myscriptcancelfile') != 'run' ) { 
    exit('Script was canceled') ; 
}

// optional cleanup/remove file after the completion of the loop

unlink(sys_get_temp_dir().'/myscriptcancelfile');

// To cancel/exit the loop from any other script on the same server

file_put_contents(sys_get_temp_dir().'/myscriptcancelfile','stop');

?> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-12T19:59:32.020

我假设您也没有外壳访问权限。我怀疑最简单的方法是联系管理员并让他们重新启动 Apache。他们比你更不想让这个运行。

一种替代方法是尝试使用 PHP 杀死所有 Apache 进程。它将向所有 Apache 进程发送终止信号，除了它正在运行的进程。如果 Apache 进程在没有 setuid() 的共享进程下运行，这可能会起作用。尝试自担风险。

```
<?php
$cpid = posix_getpid();
exec("ps aux | grep -v grep | grep apache", $psOutput);
if (count($psOutput) > 0)
{
    foreach ($psOutput as $ps)
    {
        $ps = preg_split('/ +/', $ps);
        $pid = $ps[1];

        if($pid != $cpid)
        {
          $result = posix_kill($pid, 9); 
        }
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-02T11:22:28.567

以下将停止后台进程（PHP）：

```
sudo service apache2 stop 
```

再次启动 apache：

```
sudo service apache2 start 
```

要简单地重新启动 apache：

```
sudo service apache2 start 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T19:52:47.983

如果你在后台启动它`ps aux | grep time.php`来获取 PID。那么就`kill PID`. 如果进程在前台启动，使用中断它。

如果进程在 Apache 中启动，请重新启动 Apache（Debian 的 /etc/init.d/apache2 restart）。如果进程使用 CGI 类服务器启动，请重新启动服务器。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-19T16:36:33.977

要停止运行 php 脚本，您只需在终端中输入以下命令。这将重新启动 Apache 服务。（最终重新启动您的 php 服务）。

```
sudo service apache2 restart 
```

您可能希望将来在您的脚本中包含超时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T19:52:20.323

您可以终止正在运行的 apache 进程。尝试运行类似的东西`apachectl stop`，然后`apachectl start`重新启动它。这将在一段时间内终止您的服务器，但它还将确保卡在该脚本上的任何进程都会消失。

# c++ - Intel 上的多线程比 AMD 慢得多

> ID：13847465
> 
> 赞同：8
> 
> 时间：2012-12-12T19:49:36.163
> 
> 标签：c++, multithreading, concurrency, c++11

我想让下面的代码并行化：

```
for(int c=0; c<n; ++c) {
    Work(someArray, c);
} 
```

我是这样做的：

```
#include <thread>
#include <vector>

auto iterationsPerCore = n/numCPU;
std::vector<std::future<void>> futures;

for(auto th = 0; th < numCPU; ++th) {
    for(auto n = th * iterationsPerCore; n < (th+1) * iterationsPerCore; ++n) {
        auto ftr = std::async( std::launch::deferred | std::launch::async,
            [n, iterationsPerCore, someArray]()
            {
                for(auto m = n; m < n + iterationsPerCore; ++m)
                    Work(someArray, m);
            }
        );
        futures.push_back(std::move(ftr));
    }

    for(auto& ftr : futures)
        ftr.wait();
}

// rest of iterations: n%iterationsPerCore
for(auto r = numCPU * iterationsPerCore; r < n; ++r)
    Work(someArray, r); 
```

问题是它在 Intel CPU 上的运行速度仅快**50% ，而在 AMD 上则快****300%**。我在三个 Intel CPU（Nehalem 2core+HT、Sandy Bridge 2core+HT、Ivy Brigde 4core+HT）上运行它。AMD 处理器是 4 核解锁的 Phenom II x2。在 2 核 Intel 处理器上，4 线程运行速度提高 50%。在 4 核上，它在 4 个线程上的运行速度也提高了 50%。我正在使用 VS2012、Windows 7 进行测试。

当我尝试使用 8 个线程时，它比 Intel 上的串行循环慢 8 倍。我想这是由HT引起的。

你怎么看待这件事？这种行为的原因是什么？也许代码不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:19:58.867

我怀疑*虚假分享*。当两个变量共享同一个缓存行时，就会发生这种情况。实际上，对它们的所有操作都必须非常昂贵地同步*，即使*它们不是同时访问的，因为缓存只能根据一定大小的缓存行进行操作，即使您的操作更细粒度。我怀疑 AMD 硬件只是更有弹性，或者有不同的硬件设计来应对这个问题。

要进行测试，请更改代码，使每个核心仅适用于 64 字节的倍数的块。这应该避免任何高速缓存行共享，因为英特尔 CPU 只有一个 64 字节的高速缓存行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:15:26.320

你也应该对 cpu 缓存感到敬畏。[这](http://aristeia.com/TalkNotes/PDXCodeCamp2010.pdf)是一篇关于这个主题的好文章。

简短的版本：硬件缓存数据，但如果你在同一个内存（SomeArray）上工作，它必须在 CPU 的缓存之间一直同步，它甚至会导致运行速度比单线程方式慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T21:10:51.650

我会说您需要更改编译器设置以使所有编译的代码最小化分支数量。两种不同的 CPU 样式具有不同的操作前瞻设置。您需要更改编译器优化设置以匹配*目标*CPU，而不是编译代码的 CPU。

# arrays - 通过引用将结构数组传递给函数的问题

> ID：13847468
> 
> 赞同：0
> 
> 时间：2012-12-12T19:49:44.973
> 
> 标签：arrays, structure

据我了解，将整个结构传递给函数而不是通过引用这样做可能会对系统资源造成负担。所以，我想掌握通过引用传递它们的方法。我正在创建一个具有以下结构的字符生成器：

```
struct Stats{
    string name;
    int level;
    int HP;
    int STR;
    int CON;
    int DEX;
    int INT;
    int WIS;
    int CHA;};

struct Growth{
    int HPperlvl;
    int STRperlvl;
    int CONperlvl;
    int DEXperlvl;
    int INTperlvl;
    int WISperlvl;
    int CHAperlvl;};

struct Holdstats{
    Stats classstats;
    Growth classgrowth;};
const int SIZE = 10;

Holdstats classlist[SIZE] = {
    { {"Fighter", 1, 18, 10, 10, 10, 10, 10, 10}, {1,1,1,1,1,1,1} },
    { {"Wizard", 1, 10, 10, 10, 10, 10, 10}, {1,1,1,1,1,1,1}},
    { {"Rogue", 1, 10, 10, 10, 10, 10, 10}, {1,1,1,1,1,1,1}}
} //These are just some examples, will be filled later

Holdstats charlist[SIZE]; //Empty array to store created characters 
```

我将使用程序中最简单的函数来说明我的问题。下面的函数只是为了显示传递给它的任何结构的信息，在传递给它的结构中的任何位置。该位置已在程序中预先定义。我想通过引用传递结构和位置。

```
void dispinfo(const Holdstats &p, int &i) //Should be passed a position and a structure
{
    cout << endl << "\tHere is the Character/Class info you requested: "
        << "\n\t----------------------------------------------"
        << "\nName:\t\t" << p[i].classstats.name << endl
        << "Level:\t\t" << p[i].classstats.level << endl
        << "Hit Points:\t\t" << p[i].classstats.HP << endl
        << "Strength:\t\t" << p[i].classstats.STR << endl
        << "Constitution\t\t" << p[i].classstats.CON << endl
        << "Dexterity\t\t" << p[i].classstats.DEX << endl
        << "Intelligence\t\t" << p[i].classstats.INT << endl
        << "Wisdom\t\t" << p[i].classstats.WIS << endl
        << "Charisma\t\t" << p[i].classstats.CHA << endl;

} 
```

我遇到的问题与`p[i]`. 我的编译器告诉我，对于 Holdstats &p - 没有运算符`[]`匹配这些操作数。我只会在函数头中使用先前定义的结构数组（“classlist”或其他东西）的名称，但我希望能够将任何结构数组传递给函数。

据我所知，我正在调用先前定义的数组的元素 i。但很明显，我做错了什么。任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:09:41.850

嗯，这个：

```
void dispinfo(const Holdstats &p, int &i) 
```

表示您正在传递对单个对象的引用。您不能将单个对象作为数组 ( `p[]`) 取消引用，因此诊断是有意义的。

在这种情况下，您可能想要的是：

```
void dispinfo(const Holdstats *p, int &i) 
```

或者，或者：

```
void dispinfo(const Holdstats p[], int &i) 
```

由于作为参数传递的数组衰减为指向第一个元素的指针，因此它们在很大程度上是相同的（至少对于一维数组）。

传递对象和对对象的引用之间的区别，您通常会注意到这样做是为了避免占用过多的参数传递空间（通常在堆栈上），它们之间的区别是：

```
void dispinfo(const Holdstats p, int &i) 
```

它将整个对象的副本放入堆栈，并且：

```
void dispinfo(const Holdstats &p, int &i) 
```

没有。引用通常实现为隐藏指针，因此在某种意义上，代码与传递指针非常相似，但 C++ 级别的语义（允许您对参数执行的操作）不同。将单个对象作为指针或引用传递将导致几乎相同的代码，但如果您想传入数组，则需要将其指定为数组或指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:04:25.013

一些想法可以尝试并提供帮助。

*   除非您要更改`i`within的值，否则`dispinfo()`实际上没有理由通过引用传递它。传递 an`int`和传递对 an 的引用`int`可能是等价的（两者都比可能多 32 位），但是`int`通过引用访问它（通常）更费力，因为必须取消引用才能获得该值。
*   看起来您希望将`Holdstats` `struct`s 数组传递给`dispinfo()`. 如果是这种情况，则不需要引用符号，因为数组总是通过引用传递。您应该使用`Holdstats p[]`而不是，`const Holdstats &p`并且该数组会很好地传入（并且您可以编译）。要调用`dispinfo()`您只需传递数组名称和要打印的索引。

您可能需要考虑更改`dispinfo()`为只接收一个`Holdstats` `struct`而不是一组它们。然后函数看起来像这样。

```
void dispinfo(const Holdstats &p) //Should be passed a structure only
{
    cout << endl << "\tHere is the Character/Class info you requested: "
        << "\n\t----------------------------------------------"
        << "\nName:\t\t" << p.classstats.name << endl
        << "Level:\t\t" << p.classstats.level << endl
        << "Hit Points:\t\t" << p.classstats.HP << endl
        << "Strength:\t\t" << p.classstats.STR << endl
        << "Constitution\t\t" << p.classstats.CON << endl
        << "Dexterity\t\t" << p.classstats.DEX << endl
        << "Intelligence\t\t" << p.classstats.INT << endl
        << "Wisdom\t\t" << p.classstats.WIS << endl
        << "Charisma\t\t" << p.classstats.CHA << endl;

} 
```

然后你的电话`dispinfo()`看起来像这样。

```
Holdstats classlist[SIZE] = { [...] };
dispinfo(classlist[0]);
dispinfo(classlist[1]);
[...] 
```

这就是你通过传递数组和索引来有效地做的事情，如下所示：`dispinfo(classlist,0);`

# ruby-on-rails - 无效模型对象的 Rails 路径助手

> ID：13847471
> 
> 赞同：0
> 
> 时间：2012-12-12T19:49:54.117
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, path

我有一个用于创建模型（名为 Image）的表单以及该模型在同一视图上的所有实体的列表。该模型与称为 Deck 的第二个模型以一对多的关系关联（一个 Deck 有许多图像）。我认为的列表如下所示：

```
# image list    
<% @deck.images.each  do |img| %> # iterates also through invalidated model
    <%= link_to 'Delete', deck_image_path(@deck, img), 
           :confirm => 'Sure?', :method => :delete %>
<% end %> 
```

当@image 对象的验证失败时，就会出现我的问题。迭代还遍历无效的图像对象，并为下一行给出错误，说明该对象没有这样的路径。

我可以检查每个对象的 .new_record？，但这是首选方式吗？还是我做错了什么？我没有其他人遇到过这样的问题；/

**更新 1 - 控制器**

```
def create
    @deck = Deck.find(params[:id])
    @image = @deck.images.build(params[:image])

        respond_to do |format|
            if @image.save
              # redirect
              flash[:notice] = "Saved succesfully."
              format.html { redirect_to(@deck) }
            else
              # render
              format.html { 
                flash.now[:error] = "Could not be saved."
                render 'decks/show'
              }
        end
    end
end 
```

**更新 2 - 更多混乱**

好吧，好吧，我现在完全糊涂了。将 create 方法中的第二行从

```
# not working
@image = @deck.images.build(params[:image]) 
```

至

```
# working
@image = Image.new(params[:image])
@image.deck = @deck 
```

似乎工作没有任何错误。有什么区别？

**更新 3 - 查看和错误消息**

```
<h3>Upload Image</h3>
<%= form_for @image, :url => deck_images_path(@deck), :html => { :multipart => true } do |form| %>
<fieldset>
    <legend>Upload new image</legend>
    <%= render :partial => 'shared/model_errors', :locals => {:model => @image} %>
    <%= form.file_field :image %><br/>
    <%= form.submit "Upload", :class => 'btn btn-primary' %>
</fieldset>
<% end %>

<h3>Show all existing images</h3>
<% @deck.images.each  do |img| %>
    <%= image_tag img.image.url %>  
    <%= link_to 'Delete'.html_safe, deck_image_path(@deck, img) %>
<% end %> 
```

错误信息：

```
No route matches {:controller=>"images", :action=>"destroy", :deck_id=>#<Deck id: 1, 
name: "Test", description: "Test", created_at: "2012-12-10 20:44:22", 
updated_at: "2012-12-10 20:44:22">, :id=>#<Image id: nil, created_at: nil, 
updated_at: nil, image_file_name: nil, image_content_type: nil, 
image_file_size: nil, image_updated_at: nil, deck_id: 1>} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:46:07.017

根据 [1]：[Build vs new in Rails 3](https://stackoverflow.com/questions/4954313/build-vs-new-in-rails-3) parent_model.children.build oder parent_model.children.new 似乎立即在内存中创建了关系。所以 parent_model.children 被一个新的子模型填充，它的 parent_id = parent。

Children.new 的替代方案似乎在保存新的子对象后添加了这种新关系。因此，它在所有孩子的迭代中丢失。

# asp.net - 试图实施 ELMAH - 不断收到 IIS HTTP 500.22 错误

> ID：13847473
> 
> 赞同：2
> 
> 时间：2012-12-12T19:49:59.640
> 
> 标签：asp.net, iis, elmah

我的 web.config 中有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false"
        type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false"
        type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false"
        type="Elmah.ErrorMailSectionHandler, Elmah" />
      <section name="errorFilter" requirePermission="false"
        type="Elmah.ErrorFilterSectionHandler, Elmah" />
    </sectionGroup>
  </configSections>
  <elmah>
    <security allowRemoteAccess="yes" />
    <errorLog type="Elmah.SqlErrorLog, Elmah"
    connectionStringName="PhumafConnectionString" />
    <errorMail
      from="*******"
      to="*********"
      subject="Application Exception"
      async="false"
      smtpPort="0"
      useSsl="true" />
  </elmah>
  <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network">
        <network host="smtp.gmail.com" port="587" userName="*********" password="********" />
      </smtp>
    </mailSettings>
  </system.net>
  <connectionStrings>
    <add name="PhumafEntities" connectionString="metadata=res://*/PhumafDB.csdl|res://*/PhumafDB.ssdl|res://*/PhumafDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DRAGAN-THINK\SQLEXPRESS;initial catalog=Phumaf;integrated security=True;multipleactiveresultsets=True;application name=EntityFramework&quot;"
      providerName="System.Data.EntityClient" />
    <add name="PhumafConnectionString" connectionString="Data Source=DRAGAN-THINK\SQLEXPRESS;Initial Catalog=Phumaf;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFramework"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <customErrors mode="On" defaultRedirect="~/genericError.aspx">
      <error statusCode="404" redirect="~/404.aspx" />
    </customErrors>
    <httpHandlers>
      <add verb="POST,GET,HEAD" path="elmah.axd"
  type="Elmah.ErrorLogPageFactory, Elmah" />
    </httpHandlers>
    <httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
    </httpModules>
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5" />
  </system.web>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

我还将 Elmah.dll 添加到 bin 文件夹中。每当我运行应用程序时，我都会收到包含以下消息的 IIS 错误屏幕：

```
HTTP Error 500.22 - Internal Server Error
An ASP.NET setting has been detected that does not apply in Integrated managed pipeline mode.

Most likely causes:
This application defines configuration in the system.web/httpModules section. 
```

* * *

```
Detailed Error Information:
Module     ConfigurationValidationModule
Notification       BeginRequest
Handler    PageHandlerFactory-Integrated-4.0
Error Code     0x80070032
Requested URL      http://localhost:13094/index.aspx
Physical Path      c:\users\dragan\documents\visual studio 2012\Projects\WebApplication2\WebApplication2\index.aspx
Logon Method       Not yet determined
Logon User     Not yet determined
Request Tracing Directory      C:\Users\Dragan\Documents\IISExpress\TraceLogFiles\WEBAPPLICATION2 
```

验证我的 XML 有效并且 100% 有效：/

我真的不知道出了什么问题。在我尝试实现 Elmah 之前，一切都还好。我开始失去理智，如果你看到我做错了什么，请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T19:59:46.360

查看以下两个链接 [http://code.google.com/p/elmah/issues/detail?id=231](http://code.google.com/p/elmah/issues/detail?id=231)

和

[http://mvolo.com/break-changes-for-aspnet-20-applications-running-in-integrated-mode-on-iis-70](http://mvolo.com/breaking-changes-for-aspnet-20-applications-running-in-integrated-mode-on-iis-70)

解决这个错误的关键部分如下

1) ASP.NET 应用程序在 或 中指定配置时需要迁移。您将收到 500 – 内部服务器错误。这可能包括 HTTP 错误 500.22 和 HTTP 错误 500.23：检测到不适用于集成托管管道模式的 ASP.NET 设置。这是因为 ASP.NET 模块和处理程序应在集成模式下的 IIS 和配置部分中指定。解决方法： 1) 您必须迁移应用程序配置才能在集成模式下正常工作。您可以使用 AppCmd 迁移应用程序配置：

> %windir%system32inetsrvAppcmd 迁移配置“”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T11:13:21.603

另一种选择是在 httphandlers 之后添加到 web.config。

例如

```
<system.webServer>
        <httpProtocol>
            <customHeaders>
                <add name="Access-Control-Allow-Origin" value="*" />
                <add name="Access-Control-Allow-Headers" value="*" />
                <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
            </customHeaders>
        </httpProtocol>
        <handlers>
            <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
            <remove name="OPTIONSVerbHandler" />
            <remove name="TRACEVerbHandler" />
            <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
        </handlers>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true">
            <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
            <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
            <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
        </modules>
    </system.webServer> 
```

# sql - DATE比较sql过程中的误区

> ID：13847475
> 
> 赞同：0
> 
> 时间：2012-12-12T19:50:02.950
> 
> 标签：sql, date, sql-server-2012

我正在使用 SQL Server 2012 数据库，我正在尝试检索所有员工 ID，以及在 2008 年 2 月 2 日没有处理订单的名字，我遇到了这样的问题

```
Select 
    Distinct E.empid, E.firstname
from 
    HR.Employees E 
where  
   E.empid in (Select empid
               From Sales.Orders As S
               where orderdate <> '20080212') 
```

此查询返回所有员工 ID 和名字，但此查询仅返回当天处理订单的雇员 ID

```
Select Distinct E.empid, E.firstname
    from HR.Employees E 
    where  E.empid in (Select  empid
    From Sales.Orders As S
    where  orderdate  = '20080212') 
```

我知道问题在于过滤`orderdate`，但你能告诉我伙计们我做错了什么吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:53:01.377

问题在于你的逻辑。没有员工只在该日期处理订单。您的第一个查询是获取在除该日期之外的任何日期有订单的所有员工。

您想要的第一个查询是：

```
Select Distinct E.empid, E.firstname
from HR.Employees E 
where  E.empid not in (Select  empid
From Sales.Orders As S
where  orderdate  = '20080212') 
```

第一个查询中的子查询获取在 2008-02-12 以外的日期工作的所有员工。大概是所有员工。好吧，有人可能会在那天开始并辞职或被解雇，但这并没有发生。

您想要排除当天工作的所有员工。因此，您需要在子查询中使用“=”，然后使用`not in`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:54:58.487

我假设这是一个 DataTime 列而不是 Date 列。作为 DateTime，您要求的是在某一时刻而不是一整天都没有接受订单的员工。有很多变体可以处理这个问题，但我会使用的一个是

```
Select Distinct E.empid, E.firstname
    from HR.Employees E 
    where  E.empid in (Select  empid
    From Sales.Orders As S
    where  orderdate  >= '20080212'
           and
           orderdate < '20080213') 
```

# ios - 延迟动画 UIImageView

> ID：13847478
> 
> 赞同：1
> 
> 时间：2012-12-12T19:50:14.410
> 
> 标签：ios, cocoa-touch

我以这种方式为 UIImageView 设置动画：

```
int timerAnimation = 0.0f;

for (UIImageView* img in imageArray) {

timerAnimation = timerAnimation + 1.0f;

[UIView animateWithDuration:1.0f
                      delay:timerAnimation
                    options:UIViewAnimationOptionCurveEaseIn
                 animations:^(void) {
                     img.frame = CGRectMake(20, img.frame.origin.y, 710, 60);
                 }
                 completion:NULL]; 
```

我想减少延迟时间，但我注意到如果我输入任何低于 1.0 的值，

例如

```
timerAnimation + 0.5f; 
```

然后所有对象都在保存时间移动，好像没有延迟一样。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T19:56:56.343

你正在使用一个int！

```
int timerAnimation = 0.0f; 
```

它应该是一个浮点数：

```
CGFloat timerAnimation = 0.0f; 
```

int 不支持分数，因此您只能向其添加整数 (1.0) 而不能添加半数 (0.5)

# iphone - Xcode 帮助预期表达式

> ID：13847480
> 
> 赞同：-2
> 
> 时间：2012-12-12T19:50:19.700
> 
> 标签：iphone, objective-c

我有一个声音文件，我想在加载应用程序时播放，但我只能在你按下按钮时播放。我需要有一个 .h 文件还是仅适用于 .m 文件

```
 #import "ViewController.h"

//sound
@implementation ViewController

-(void) viewDidLoad {

-(IBAction)play {           Here i get error Expected expression.
   CFBundleRef mainBundle = CFBundleGetMainBundle();
   CFURLRef soundFileURLRef;
   soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"app3", CFSTR   
   ("m4a"), NULL);
   UInt32 (soundID);
   AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
   AudioServicesPlaySystemSound(soundID);
  }

[super viewDidLoad];
}

-(IBAction)Facebook {
[[UIApplication sharedApplication]
 openURL: [NSURL URLWithString:@"http://www.facebook.com/synicapps?fref=ts]"]];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:13:08.257

您将按钮从布局链接到`IBAction`或声明并向`UIButton`其添加目标@implementation ViewController

```
-(void) viewDidLoad {
    [super viewDidLoad];
}

-(IBAction)play {         
   CFBundleRef mainBundle = CFBundleGetMainBundle();
   CFURLRef soundFileURLRef;
   soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"app3", CFSTR   
   ("m4a"), NULL);
   UInt32 (soundID);
   AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
   AudioServicesPlaySystemSound(soundID);
 }

-(IBAction)Facebook {
[[UIApplication sharedApplication]
 openURL: [NSURL URLWithString:@"http://www.facebook.com/synicapps?fref=ts]"]];
}

@end 
```

我知道这仍然没有任何意义：S 但你想用这个做什么：S

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:28:03.170

您收到“预期表达式”错误的原因是您试图在另一个方法 (viewDidLoad) 中声明和定义一个方法 (play)。相反，它将声明视为强制转换，其中方法名称是要强制转换的变量。因此，它期望在括号中放置一个有效类型。但是，IBAction 是一个什么都没有的宏。删除 IBAction 并且错误仍然存​​在。将其替换为类型（例如 void），它现在会给出“未声明的变量”错误，这证明这是因为它认为它是一个变量。

TL;DR：您不能在另一种方法中定义一种方法。您可能想考虑阅读一本关于 Objective-C 的好书。

编辑：对于那些感兴趣的人，这就是提问者的意思。

*减一元运算符*（类型）**变量**

在转换后获得变量的负值是转换和一元负数的组合。前任。

```
int foo = 10;
float bar = -(float)play; 
```

它看起来像一个方法声明，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:36:43.010

那里有许多简单的错误。我建议首先阅读 Objective-C 的基础知识。

无论如何，这是固定的代码：

```
#import "ViewController.h"

//sound
@implementation ViewController

-(void) viewDidLoad {
    [super viewDidLoad];
    [self play];
}

-(IBAction)play {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"app3", CFSTR ("m4a"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
}

-(IBAction)Facebook {
    [[UIApplication sharedApplication]
        openURL: [NSURL URLWithString:@"http://www.facebook.com/synicapps?fref=ts]"]];
}

@end 
```

# petapoco - 使用 PetaPoco /NPoco 进行多个查询？

> ID：13847484
> 
> 赞同：0
> 
> 时间：2012-12-12T19:50:31.013
> 
> 标签：petapoco, npoco

假设我有这 2 个表/域

```
[TableName("TableA")]
    [PrimaryKey("TableAId")]
    public class TableA
    {
        public int TableAId { get; set; }
        public string City { get; set; }

        public TableB TableB { get; set; }

        public TableA()
        {
            TableB = new TableB();
        }

    }

    [TableName("TableB")]
    [PrimaryKey("TableBId")]
    public class TableB
    {
        public int TableBId { get; set; }
        public string Name { get; set; }
    }

var sql = @" Select TableA.*, TableB.*
FROM         TableA INNER JOIN
                      TableB ON TableA.TableBId = TableB.TableBID";

// peta poco
var result = db.Query<TableA, TableB>(sql); 
```

当我这样做时，`TableA.TableB`被填充并且`TableA`id 被填充但`City`为空。我必须指定要绑定的每一列。是否可以只使用星号而不是指定每一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:55:10.363

但是，您所拥有的应该可以工作，我认为可能发生的事情是由于这些情况的发生：

1.  你有一个`TableBId`专栏`TableA`
2.  您没有`TableBId`该类的属性`TableA`
3.  `TableBId`当您手动运行查询时，City 紧随`TableA.*`其后

映射通过按顺序遍历列来工作，并且处理通过以下方式工作：

1.  如果通用参数列表中第一类的列将被映射并移至下一列（仍然使用第一类进行映射）
2.  如果该列不在第一堂课上，那么它将认为第一堂课结束并移动到第二堂课，依此类推......

# javascript - jQuery 的 attr() 函数用 html 特殊字符破坏 html？

> ID：13847485
> 
> 赞同：5
> 
> 时间：2012-12-12T19:50:37.580
> 
> 标签：javascript, jquery, html

请看下面的代码：

[http://jsfiddle.net/htdTg/2/](http://jsfiddle.net/htdTg/2/)

在第一个链接中有一个包含 html 特殊字符的标题属性，`&lt;`后跟“！” （实际上跟在哪个字符后面并不重要）。当我们使用 jQuery 的 attr() 函数获取该标题属性的值时，html 被破坏（您可以看到，只要以下文本也丢失，就没有打印“<”字符。

在第二个链接中，唯一的区别是我在之后添加了一个空格`&lt;`，现在它可以按预期工作。

您认为这是 jQuery 中的错误还是我只是不明白？

PS。如果您认为我在做一些奇怪的事情 - 这只是一些工具提示插件中的一段代码。

HTML：

```
<a href="#" title="<div style='color:red'>This is the less than sign: &lt;! Now you know it?</div>">This is a link</a><br>
<a href="#" title="<div style='color:red'>This is the less than sign: &lt; ! Now you know it?</div>">This is a link</a><br>​ 
```

jQuery：

```
$('a').each(function() {
    $('body').append($(this).attr('title')); });

// just to exclude that it's append() function's fault :)
$('body').append("<div style='color:red'>This is the less than sign: &lt;! Now you know it?</div>");​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:05:40.327

这很有趣。[`title`我查找了属性](http://www.w3.org/TR/html401/types.html#type-cdata)中可以包含哪些文本，并且参考中说：

> 用户代理应该如下解释属性值：
> 
> 1.  **用字符替换字符实体，**
> 2.  忽略换行，
> 3.  用一个空格替换每个回车符或制表符。

显然，这是预期的行为。`&lt;`正在被`<`浏览器解析，可能会被 jQuery 解释为 HTML。

您也应该逃避＆符号：

```
&amp;lt; 
```

**演示：http: [//jsfiddle.net/htdTg/9/](http://jsfiddle.net/htdTg/9/)**

**更好的演示：http: [//jsfiddle.net/PsZeY/6/](http://jsfiddle.net/PsZeY/6/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T19:59:58.907

## 为什么会发生？

发生这种情况是因为`&lt;! Now you know it? </div>`转换为`<! Now you know it? </div-->`

**根据 HTML 标准** `<!`，`>`是**注释结构**的开始和结束。请注意，这是评论结构**而不是评论**。因此 browwer 将其余部分转换为注释，除非它得到一个 end delimiter `>`。

来自[**W3C**](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.4)

> ```
> <!-- this is a comment -->
> <!-- and so is this one,
>     which occupies more than one line --> 
> ```
> 
> **标记声明打开**分隔符 ( `<!`) 和注释打开分隔符 ( )之间不允许有空格`--`，但注释关闭分隔符 ( `--`) 和**标记声明关闭**分隔符 (">") 之间允许使用空格。一个常见的错误是在评论中包含一串连字符 ( `---`)。作者应避免在评论中放置两个或更多相邻的连字符。

也在[这里](http://www.flightlab.com/~joe/sgml/comments.html)

> SGML 中注释声明的语法是
> 
> ```
>  comment declaration =
>     MDO ("<!"), (comment, ( s | comment )* )?, MDC (">")
>  comment =
>     COM ("--"), SGML character*, COM ("--") 
> ```

## 如何解决？

你已经知道了。用来`&amp;`代替`&`。所以写`&amp;lt;!`而不是`&lt;!`. 这将使`&lt;`附加到正文元素而不是`<!`注释结构打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:04:48.867

在这种情况下...

```
title="<div style='color:red'>This is the less than sign: &lt;! Now you know it?</div>" 
```

`&lt;!`被转换为`<!`HTML 注释的开头，以及它不在浏览器窗口中呈现的确切原因。

在所有情况下，您都不应该在属性中包含 HTML 实体。改用这个...

```
title="&lt;div style='color:red'&gt;This is the less than sign: &amp;lt;! Now you know it?&lt;/div&gt;" 
```

[​http://jsfiddle.net/htdTg/5/](http://jsfiddle.net/htdTg/5/)

如果要保留 HTML 实体，请使用`&lt;div&gt;`to*处理*为`<div>`. 或者，`&amp;lt;div&amp;gt;`将实际*呈现* `<div>`在浏览器窗口中。

见：http: [//jsfiddle.net/htdTg/8/](http://jsfiddle.net/htdTg/8/)

因此，如果您希望浏览器实际显示 a `<!`，请使用以下命令：`&amp;lt!`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T19:56:24.487

我不确定您是在问问题还是实际上在寻找问题的解决方案。如果是后者，那么奇怪的是这似乎工作正常：`&amp;lt;`

更新代码：

HTML：

```
<a href="#" title="<div style='color:red'>This is the less than sign: &amp;lt;! Now you know it?</div>">This is a link</a><br>
<a href="#" title="<div style='color:red'>This is the less than sign: &amp;lt; ! Now you know it?</div>">This is a link</a><br>​ 
```

jQuery：

```
$('a').each(function() {
    $('body').append($(this).attr('title')); });

// just to exclude that it's append() function's fault :)
$('body').append("<div style='color:red'>This is the less than sign: &lt;! Now you know it?</div>");​ 
```

更新小提琴：http: [//jsfiddle.net/htdTg/3/](http://jsfiddle.net/htdTg/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T19:57:28.287

文本没有遗漏问题是它被评论`&lt;!`了，因为它`<!`被翻译成`<!--`（不知道为什么），它在`html`.

如果您检查您的 html，您将看到以下内容。

```
<div style='color:red'>This is the less than sign: <!-- Now you know it? --></div>
<div style='color:red'>This is the less than sign: < ! Now you know it?</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T20:08:04.743

真的没有错。。

问题是必须对属性内部的 html 进行编码。您已经对`<`as进行了编码`&lt;`，这意味着它将被读取为`<`。

所以`.attr()` 将返回一个纯`<`字符而不是编码的..

~~它不显示的原因是`.append`如果它认为其中有 html，它将尝试解析 html。它找到`<!`文本并将其视为 html 注释。~~ ***实际上这是由浏览器直接完成的***。

* * *

如果你看

```
var e = document.createElement('div');
e.innerHTML = '<!';
console.log(e.innerHTML); 
```

设置为 div 后，您会看到 div 的内部 HTML`<!`为`<!---->`.

所以这就是浏览器解释这段代码的方式..它与jQuery无关..

# java - 两种不同的对象类型作为参数，返回一个类型的对象

> ID：13847490
> 
> 赞同：1
> 
> 时间：2012-12-12T19:50:53.523
> 
> 标签：java, object

我有这样的问题 - 有一个抽象类，以及从该类继承的许多类。我有作为非抽象类的参数对象的函数。它必须返回非抽象类的对象，但我知道在运行时是哪个。有任何想法吗？

这里的示例代码，它的样子：

```
public abstract class Shape {
    int x, y;
    void foo();
}

public class Circle extends Shape {
    int r;
    void bar();
}

public class Square extends Shape {
    int a;
    void bar();
} 
```

在这两个类中，方法 bar() 做同样的事情。现在要做这样的事情：

```
/* in some other class */
public static Shape iHateWinter(Shape a, Shape b) {
    Random rnd = new Random();
    Shape result;

    /* 
     btw. my second question is, how to do such thing: 
     a.bar(); ?
    */

    if(rnd.nextInt(2) == 0) {
       /* result is type of a */
    } else {
       /* result is type of b */
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:55:36.967

放入`public var abstract bar() {}`抽象类。

然后所有的孩子都必须执行`bar()`。

那么你的 if-block 将是

```
if(rnd.nextInt(2) == 0) {
      return a;
    } else {
      return b;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:55:56.123

你似乎在为自己把事情复杂化。

```
/* 
 btw. my second question is, how to do such thing: 
 a.bar(); ?
*/ 
```

您添加`bar()`并`Shape`调用`a.bar();`；

```
 if(rnd.nextInt(2) == 0) {
    /* result is type of a */
 } else {
    /* result is type of b */ 
```

这是相当迟钝的编码。如果您不打算使用对象，则不清楚为什么要传递它。即你只需要它的类。

```
 result = rnd.nextBoolean() ? a.getClass().newInstance() : b.getClass().newInstance(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:35:39.040

或者你可以做一个班级演员表。

```
if(a instanceof Circle)
{ Circle c = (Circle) a;
  c.bar();
}

if(a instanceof Square)
{ Square s = (Square) a;
  s.bar();
} 
```

# android - RoboGuice 和静态变量注入

> ID：13847498
> 
> 赞同：2
> 
> 时间：2012-12-12T19:51:38.820
> 
> 标签：android, dependency-injection, guice, roboguice

我在一个项目中第一次使用 RoboGuice，并试图注入一个静态变量，但该变量仍然为空。这是我正在测试的东西的快速模型：

```
public class MyActivity extends RoboFragmentActivity {

    @Override protected void onCreate(Bundle savedInstanceState) {
      MyObject.print();
    }
}

@ContextSingleton
public class MyObject {

    @Inject static AssetManager sAssetManager;

    public static void print() {
      if(sAssetManager == null) {
        Log.d("debug", "AssestManager is null");
      } else {
        Log.d("debug", "AssetManager was injected");
      }
  }
} 
```

我怎样才能使这项工作？

**读**

我知道这不是最佳实践——这更像是一个使用 RoboGuice 的学习练习。仅在您对给出的问题有答案时才回答，而不是“您为什么这样做”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:08:57.343

为什么要使用`static`方法/变量？这不是正确的做法。你应该 @Inject`MyObject`到`MyActivity`. 然后你可以做`myObjectInstance.print();`。请注意，`setContentView()`除非您强制执行，否则 RoboGuice 会在之后执行注入。

# rspec - 如何在 Rspec/Capybara 中为断言指定失败消息

> ID：13847499
> 
> 赞同：6
> 
> 时间：2012-12-12T19:51:42.090
> 
> 标签：rspec, capybara

在我的 rspec 集成测试中，当我有如下断言时：

```
assert page.has_content? some_value 
```

如果断言失败，则显示：

```
MiniTest::Assertion: 
Failed assertion, no message given 
```

minitest 文档说“所有断言方法都接受在断言失败时打印的消息”，但我找不到任何如何指定消息的示例。这些不是有效的语法：

```
assert("custom fail msg") page.has_content? some_value

assert page.has_content? some_value, "custom fail msg" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:48:21.110

尝试：

```
assert page.has_content?(some_value), "custom fail msg" 
```

假设我已经正确地重现了您的错误，那么您第二次尝试的问题是 Ruby 认为“自定义失败消息”`page.has_content?`是`assert`. 在参数周围添加括号`page.has_content?`应该可以解决问题。

# android - 如何在 Android 中杀死进程？

> ID：13847502
> 
> 赞同：2
> 
> 时间：2012-12-12T19:51:51.997
> 
> 标签：android, process, kill

我在下面有这段代码：

```
package com.example.killall;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
//import android.widget.TextView;
import android.app.ActivityManager;

public class MainKill extends Activity {

private Button BprocessesKill ;
//private TextView processesKill;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_kill);

    final ActivityManager am=(ActivityManager)     getSystemService("SYSTEM_ACTIVITY");

    BprocessesKill=(Button) this.findViewById(R.id.BkillProcesses);
    //processesKill=(TextView) this.findViewById(R.id.killProcesses);

    BprocessesKill.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            am.killBackgroundProcesses(getPackageName());

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main_kill, menu);
    return true;
}

} 
```

我想要做的只是按下按钮并杀死所有后台进程。我对这段代码的问题是，当我按下按钮时，它会向我显示消息：不幸的是，KillAll（那是我的应用程序的名称）已经停止。我应该改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:03:03.360

1.  您收到的消息表明您的应用已崩溃。您需要查看它的 LogCat 以找出原因。这在 Android 开发人员指南中有记录。
2.  请说明您杀死所有后台进程的原因，因为我想不出任何适当的理由来这样做。人们坚持声称“任务杀手”或“应用程序杀手”可以提高性能，但这种态度忽略了真正的问题：写得不好的应用程序。只要我们继续声称任务杀手有帮助，用户就会继续使用那些让不必要的服务等运行的应用程序。强迫用户使用任务杀手就像处理白蚁问题一样，每次杀死一只白蚁。真正的答案是消灭所有的白蚁。

简而言之，任何向您展示如何杀死所有后台进程的人都是在伤害您，而对 Android 社​​区也是一种伤害。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T20:47:31.167

我使用这段代码来杀死我自己的进程（应用程序）：

```
 android.os.Process.killProcess(android.os.Process.myPid()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T20:15:04.453

您可以使用以下代码：

```
List<ApplicationInfo> packages;
    PackageManager pm;
    pm = getPackageManager();
    //get a list of installed apps.
    packages = pm.getInstalledApplications(0);

    ActivityManager mActivityManager = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);

   for (ApplicationInfo packageInfo : packages) {
        if((packageInfo.flags & ApplicationInfo.FLAG_SYSTEM)==1)continue;
        if(packageInfo.packageName.equals("mypackage")) continue;
        mActivityManager.killBackgroundProcesses(packageInfo.packageName);
   } 
```

[来源](https://stackoverflow.com/questions/7397668/how-to-kill-all-running-applications-in-android)

请记住，杀死应用程序是非常危险的。如果您不完全知道自己在做什么，请不要使用此代码！

# mysql - ASP 连接到 MYSQL 错误 80004005 “无法连接到‘IP’上的 MySQL 服务器”

> ID：13847503
> 
> 赞同：2
> 
> 时间：2012-12-12T19:51:54.587
> 
> 标签：mysql, asp.net, asp-classic, ip

完整错误：

```
Microsoft OLE DB Provider for ODBC Drivers error '80004005'

[MySQL][ODBC 3.51 Driver]Can't connect to MySQL server on 'IP' (10065)

/test.asp, line 17 
```

尝试使用 ASP 连接到 MySQL 数据库。收到上述错误，我不知道为什么。显然错误号意味着数据无法访问，但并没有说明原因。

有人对此有经验吗？

```
<%
Dim oConn, oRs
Dim qry, connectstr
Dim db_name, db_username, db_userpassword
Dim db_server

db_server = "IP"
db_name = "DBNAME"
db_username = "USERNAME"
db_userpassword = "PASS"
fieldname = "FIELDNAME"
tablename = "TABLENAME"

connectstr = "Driver={MySQL ODBC 3.51 Driver};SERVER=" & db_server & ";DATABASE=" & db_name & ";UID=" & db_username & ";PWD=" & db_userpassword

Set oConn = Server.CreateObject("ADODB.Connection")
oConn.Open connectstr

qry = "SELECT * FROM " & tablename

Set oRS = oConn.Execute(qry)

if not oRS.EOF then
while not oRS.EOF
response.write ucase(fieldname) & ": " & oRs.Fields(fieldname) & "<br>"
oRS.movenext
wend
oRS.close
end if

Set oRs = nothing
Set oConn = nothing

%> 
```

出于明显的原因删除了值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:42:46.550

最终需要在 MySQL 服务器所在的防火墙上允许 IP 地址。谢谢大家。

# javascript - 如何在extjs中获取枚举名称？

> ID：13847504
> 
> 赞同：3
> 
> 时间：2012-12-12T19:51:57.323
> 
> 标签：javascript, extjs

我有这个带有静态枚举集的模型

```
Ext.define('MyApp.model.RefreshableComponent', {
   statics: {
      RefreshIntervals: {
         ONEMIN: 1,
         FIVEMINS: 2,
         TENMINS: 3,
         FIFTEENMINS: 4,
         DEFAULT: 5
      }
   }
}); 
```

我正在像这样在另一个类中访问它

```
updateDefaultTask: function () {
   this.updateTask(MyApp.model.RefreshableComponent.RefreshIntervals.DEFAULT);
},
updateTask: function (refreshInterval) {
      var components = this.getVisibleComponentsByRefreshInterval(refreshInterval);
      if (this.debugMode) {
         console.log("REFRESHMANAGER: Triggered the update task " + refreshInterval);
      }    
   }, 
```

我想在日志中显示 refreshInterval 的名称，而不是 int 值。我该怎么办？

我愿意以不同的方式定义此枚举，只要出于可读性原因，我仍然可以将名称作为参数而不是 int 传递。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:59:31.133

Ext 有[Ext.Object.getKey()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Object-method-getKey)方法：

> 返回与给定值对应的第一个匹配键。如果没有找到匹配的值，则返回 null。

```
var person = {
    name: 'Jacky',
    loves: 'food'
};

alert(Ext.Object.getKey(person, 'food')); // alerts 'loves' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:12:33.533

我想您可以存储一组键值对对象，而不是使用传统意义上的枚举：

```
Ext.define('MyApp.model.RefreshableComponent', {
   statics: {
      RefreshIntervals: {
         ONEMIN: { value = 1, name = 'ONEMIN' },
         FIVEMINS: { value = 2, name = 'FIVEMINS' },
         TENMINS: { value = 3, name = 'TENMINS' },
         FIFTEENMINS: { value = 4, name = 'FIFTEENMINS' },
         DEFAULT: { value = 5, name = 'DEFAULT' }
      }
   }
}); 
```

你可以像这样引用它们：

```
updateDefaultTask: function () {
   this.updateTask(MyApp.model.RefreshableComponent.RefreshIntervals.DEFAULT.name);
} 
```

如果您需要 int 值：

```
updateDefaultTask: function () {
   this.updateTask(MyApp.model.RefreshableComponent.RefreshIntervals.DEFAULT.value);
} 
```

它可能有点冗长，但更灵活一点，因为如果随着时间的推移有需要，您可以扩展对象。也许他们有一个关联图标图像或类似的东西，你可能需要适应例如。

# python - 如何在内存中的文件上从 python 运行程序？

> ID：13847505
> 
> 赞同：2
> 
> 时间：2012-12-12T19:52:00.917
> 
> 标签：python, elf, file-descriptor

我正在处理从远程数据库中提取的数千个包装在类似 zip 文件容器中的二进制文件。我需要使用 readelf 之类的工具分析这些二进制文件的内容，但我想避免产生不必要的 IO 来将二进制文件写入磁盘。

有没有办法调用 subprocess.Popen 以便我可以将内存中的文件传递给命令行实用程序，该命令会将其理解为文件？我尝试将文件描述符分配给标准输入，但实用程序没有按预期从标准输入读取文件内容。

```
with zipfile.ZipFile(file,'r') as z:
  with z.open(binary_path) as bin:
    subprocess.Popen(['readelf','-d'],stdin=bin) 
```

我也尝试直接将必要的参数设置为对文件描述符的引用，但这也被证明是徒劳的：

```
with zipfile.ZipFile(file,'r') as z:
  with z.open(binary_path) as bin:
    subprocess.Popen(['readelf','-d',bin]) 
```

我正在尝试的是可能的，还是我应该求助于写入磁盘并从那里分析？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:58:01.790

Zeroth，你为什么需要`popen` `readelf`，而不是使用`libelf`或类似的东西？在 PyPI 上快速搜索[“elf”](http://pypi.python.org/pypi?%3aaction=search&term=elf&submit=search)显示了很多可能性。你看过他们吗？

首先，在许多平台上，所有的 I/O 最终都会通过缓存，所以它不会真正减慢你的速度，即使它最终最终将所有内容刷新到磁盘只是为了删除它（它可能永远不会做）。小心使用`mmap`can 通常有助于避免刷新到磁盘，但您甚至可能不需要它。

所以说真的，我会先测试一下，看看过多的 I/O 是否真的会拖慢你的速度。如果没有，请停止担心。

如果您想确保没有磁盘 I/O（我假设您已禁用所有交换，否则这个想法一开始就毫无意义），最简单的解决方案是创建一个实际上不是的临时文件备份到磁盘。

最简单的方法是创建一个 ramdisk，然后将临时文件放在那里。

或者，大多数平台都有一种方法来创建一个临时文件，该文件要么从不备份到磁盘，要么仅在绝对必要时才备份到磁盘。不幸的是，我认为任何 stdlib Python 函数都不能做到这一点，在这种情况下，您必须为其编写特定于平台的代码。

如果您确实想将任意缓冲区作为标准输入传递给工具，这很容易。但是你必须知道如何告诉工具读取标准输入——这通常意味着像`-c`作为选项或`-`假文件名传递，或者有时只是不传递任何文件名。阅读手册页以查看哪个。例如：

```
with zipfile.ZipFile(file,'r') as z:
    with z.open(binary_path) as bin:
        subprocess.Popen(['gzip','-dc'], stdin=bin) 
```

不幸的是，一些工具不能以这种方式工作，通常是因为它们需要一个可搜索的文件而不仅仅是一个流。我相信`readelf`是其中之一。所以这个选项不可用。

并且将任意 fd 传递给工具需要该工具有一种方法来获取任意 fd 而不是文件名，而大多数文件名都没有。

# c++ - Qt5 lambda 连接内存泄漏的新信号

> ID：13847507
> 
> 赞同：24
> 
> 时间：2012-12-12T19:52:21.227
> 
> 标签：c++, c++11, signals, qt5, slot

新的 Qt5 信号和槽语法使我们不仅可以将信号连接到槽，还可以连接到普通的旧函数和仿函数/lambdas。现在的问题是，lambda 本质上是带有 () 运算符的对象，当您将信号连接到它们时，它们会被复制到 qt 内部类的某个地方。而且，当您从该函子断开信号时，它会保留在 qt 内部。我不明白，这是正常的行为吗？或者也许有办法在断开连接后销毁那些功能对象？

这是一个例子：

```
//example

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QTimer* timer = new QTimer();

    QSharedPointer<QMetaObject::Connection> connection(new QMetaObject::Connection());

    //functor is created and gets copied inside qt internals, connection variable is captured
    //inside the functor

    *connection.data() = QObject::connect(timer, &QTimer::timeout, [=]
    {
        qDebug() << "disconnected";
        QObject::disconnect(*connection.data());
    });

    timer->start(10000);

    return a.exec();
}

//example 
```

现在，当我在插槽断开后查看连接变量的强引用计数时，它保持为 2，这意味着仿函数对象本身仍然活着并且很好，尽管它现在对我没有用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T23:59:40.857

该示例被过度设计（为什么使用 QSharedPointer？为什么*按值*捕获它？）。但确实 Qt 正在泄漏仿函数对象。

关键是内部连接列表被简单地标记为脏，并且在发送者被删除或新信号连接之前不会被清除（参见[cleanConnectionLists](http://code.woboq.org/qt5/qtbase/src/corelib/kernel/qobject.cpp.html#_ZN14QObjectPrivate20cleanConnectionListsEv)的用法）。

我推送了几个应该修复此行为的补丁：[https](https://codereview.qt-project.org/#change,42976) : //codereview.qt-project.org/#change,42976 和 42979

# php - 如何在调用类内部的方法之前计算方法的参数？

> ID：13847509
> 
> 赞同：2
> 
> 时间：2012-12-12T19:52:27.187
> 
> 标签：php

我的问题很像这样：[PHP: Get argument count](https://stackoverflow.com/questions/4580619/php-get-argument-count)

除了我需要计算一个方法的参数（如果你愿意的话，参数），但这个方法是在一个对象内部。

我试过这个：

```
 $reflection = new ReflectionFunction($_SITE,$acao);
    $qtdArgumentos = $reflection->getNumberOfParameters(); 
```

和这个 ：

```
 $reflection = new ReflectionFunction($_SITE->$acao);
    $qtdArgumentos = $reflection->getNumberOfParameters(); 
```

并得到这个错误：

> 致命错误：C:\wamp\www\project\index.php:20 中未捕获的异常“ReflectionException”和消息“函数 $_SITE,$acao() 不存在”堆栈跟踪：#0 C:\wamp\www\ project\index.php(20): ReflectionFunction->__construct('$_SITE,$acao') #1 {main} 在第 20 行的 C:\wamp\www\projeto\index.php 中抛出

有谁知道另一种计算方法参数数量的方法是在对象内部还是我的代码的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:57:16.590

我认为你需要的是[ReflectionMethod](http://php.net/manual/en/reflectionmethod.construct.php)

```
 $reflection = new ReflectionMethod($_SITE, $acao);
 $qtdArgumentos = $reflection->getNumberOfParameters(); 
```

# c# - 没有本地用户帐户的模仿者

> ID：13847512
> 
> 赞同：0
> 
> 时间：2012-12-12T19:52:47.570
> 
> 标签：c#, c#-4.0, .net-4.5, impersonation

我正在使用代码项目中的模仿者：

[http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

我已经正确地实现了这一点并且似乎正在工作，但我认为它不应该是。

我已经在本地运行在 IIS 7.5 下的 .NET 4.5 WCF 应用程序中实现了它（不是 VS Dev Server 的表达），并且当调用传递用户名和密码的模拟方法时它工作正常，但用户在我的本地机器下不存在.

他们在 IIS 或 Windows 7 中的某个设置是否允许在用户帐户不存在时进行模拟？

# uiviewcontroller - 在 UIImageView 上使用 UITapGestureRecognizer 实例化 UIViewController

> ID：13847517
> 
> 赞同：1
> 
> 时间：2012-12-12T19:53:00.440
> 
> 标签：uiviewcontroller, uiimageview, uigesturerecognizer

我正在尝试创建一个包含缩略图列表的应用程序，一旦触摸该列表，就会创建一个新的视图控制器，其中包含一个大的 UIImageView，它显示来自缩略图视图控制器的选定图像。但是，在“ SmallpicsViewController”中，我有以下代码，但是，选择图像时，什么也不会发生。我试图实例化的新视图控制器称为“BigPicsViewController”，它包含一个 IBOutlet 到一个名为 bigPic 的 UIIMageView。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [touches anyObject];
if([[touch valueForKey:@"view"]isKindOfClass:[UIImageView class]]){

    UIImageView *viewSelected = (UIImageView *)[touch valueForKey:@"view"];

    BigPicsViewController *bigController = [[BigPicsViewController alloc]initWithNibName:@"BigPicsViewController" bundle:nil];

    bigController.bigPic = viewSelected;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:36:17.650

三个可能的原因：

1）`touchesBegan`根本没有调用该方法，很可能是因为默认设置`UIImageView`为`userInteractionEnabled`NO，这意味着它不会注册触摸。

2) 方法被调用，但是，再次，因为设置`UIImageView`为`userInteractionEnabled`NO，图像视图下面的视图注册它，所以 if 语句为假。

3）正如 gschandler 所说，您似乎没有对视图控制器做任何事情，使其视图出现在层次结构中。

使用断点或日志语句来确定它是什么。

# perl - 有没有办法使用 Perl 在 PDF 的特定区域内进行文本搜索？

> ID：13847522
> 
> 赞同：0
> 
> 时间：2012-12-12T19:53:17.810
> 
> 标签：perl, pdf

我有 PDFcreator 创建的 PDF。每个多页 PDF 的第一页都有需要识别的邮寄地址。有没有办法在 PDF 的特定区域内进行文本搜索？

我找到了[CAM::PDF](https://stackoverflow.com/questions/4049486/is-it-possible-to-read-the-text-in-a-pdf-file-using-perl)和[pdftotext](https://stackoverflow.com/questions/139015/how-can-i-do-a-full-text-search-of-pdf-files-from-perl)，但没有看到将搜索限制在特定区域的方法。我主要关心的是准确性，因为不同的地址可能会出现在同一个 PDF 中。搜索整个 PDF 也可能太慢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:07:21.610

Pdftotext 确实可以完成你想做的事情。我相当确定 CAM::PDF 也可以，但我过去没有使用该工具返回坐标信息。

我会在整个页面上运行 pdftotext，保存 xml 输出，然后梳理结果。它应该为页面上的每个单词提供 xMin/xMax/yMin/yMax 值。然后，您可以使用这些坐标来构建仅包含在您预定范围内的那些单词的列表。

然而，顺利识别多行地址可能会带来其自身的挑战，尤其是在您定义的区域内可能存在任何非地址文本时。

# symfony - 与 symfony2 结合使用的电子商务框架？

> ID：13847523
> 
> 赞同：2
> 
> 时间：2012-12-12T19:53:19.527
> 
> 标签：symfony, e-commerce

我需要一个包含 70% 的博客和文章、30% 的电子商务的网站。我想使用 symfony2 做网站，想知道是否有任何电子商务框架可以很好地使用它？

我已经看到了一些关于 sylius 的信息，这似乎很早，还有奏鸣曲，同样。我知道 Magento 将是一个既定的选择（只要我不需要对其进行太多定制！），但不知道如何让两者一起生活而不看起来是单独的站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T16:16:35.050

[Thelia2](http://thelia.net/v2)是另一个基于 symfony2 的电子商务解决方案。该项目目前处于测试版，预计于 2013 年底发布。

Thelia 2 的 beta 版本托管在 Github 上，可以在 Thelia 2 专用网站上下载：[thelia.net/v2](http://thelia.net/v2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:30:09.340

symfony2电子商务计划[vespolina](https://github.com/vespolina/vespolina)看起来很有希望，但仍处于早期阶段。Drupal 版本 8，一个流行的 CMS 正在转向 symfony2，他们可能有一些电子商务插件。根据您的比率，这可能是您的最佳选择。

# python - NDB 查询定期找不到实体

> ID：13847526
> 
> 赞同：0
> 
> 时间：2012-12-12T19:53:30.353
> 
> 标签：python, google-app-engine, app-engine-ndb

我有一个帐户密钥，我在处理项目时会检查它。此密钥可防止我花时间处理不再有效的项目。在处理的内部循环中，我验证我仍然可以找到我正在处理的密钥。

实体定义：

```
class AuthorizedKey(ndb.Model):
    secret_key = ndb.StringProperty()
    ...additional fields... 
```

我用来检查的代码：

```
authorized_key = AuthorizedKey.query(AuthorizedKey.secret_key == first_key).get() 
```

first_key 是一个字符串，它与已验证且位于数据存储区中的 AuthorizedKey 实体匹配。根据密钥，它在数周或数月内没有被修改过。

此查询定期无法检索结果。大约万分之一。错误似乎分布在键之间（即问题不在于一条记录）。

关于如何摆脱这些错误的任何建议？我需要存储在 AuthorizedKey 中的信息才能准确处理请求。如果传入的数据没有密钥，我想尽快停止处理它。

更新 --- 与查询匹配的记录通常在使用前几天创建。这些记录平均存在几个月。他们已经工作了数百万次，以前存在过，并且继续存在。有时，对 get() 调用的响应是无。

虽然多条记录都出现了这个问题，但一条特定记录在创建后大约 2 天就一直被访问。几天前我刚刚在内部循环上添加了监控代码。没有返回错误信息。

```
"if not authorized_key:" 
```

在上面的代码大约每 10,000 次返回 False 之后。在工作之前和之后访问。一个具有与我的论点相匹配的 secret_key 的实体已经存在了将近 8 个月，并且已成功访问了数百万次。这就是我提出问题的原因，寻求帮助。在这种情况下，我悄悄地失败了，稍后会自动重试。重试工作正常。完全一样的数据。

除了这个问题的奇怪性质之外，我担心的主要原因是：

*   核心系统的可靠性
*   系统的其他区域可能不会像这个区域那样优雅地退化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:27:30.970

您正在使用非祖先查询，因此您可能会得到最终一致的结果。如果实体是相当新的，那么对它的查询可能无法显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:48:23.033

事实证明，这个内部处理代码是以两种模式调用的。第一种模式拉出一批并处理它们。如果批次中的项目太多，它会安排后续任务以备后用。安排后续任务时，它位于默认命名空间以外的命名空间中。

第二种模式是作为后续任务，它会继承它所在的命名空间。这意味着我现在在错误的命名空间中寻找 AuthorizedKey 而没有找到它。我的批量相当大，但不是天文数字。当一个设备非常活跃或系统负载过重时，事件可能会达到该标记，从而非常偶尔地导致错误。

谢谢大家的建议和调试帮助！

# html - 如何将默认数据放入html表单字段

> ID：13847529
> 
> 赞同：0
> 
> 时间：2012-12-12T19:53:38.857
> 
> 标签：html

我有一个关于 html 表单字段的问题。我正在尝试创建一个表单以允许用户编辑他们的个人资料。我希望表单在他们访问页面时已经在字段中包含他们的信息。所以就像用户名 [ken] 地址 [12345] 城市 [NJ]。然后用户可以编辑他们想要的任何信息，而他们不想编辑的内容将与他们的新信息一起发送他们的旧信息。我想知道如何将他们的信息放在表单字段中。

如果我的问题之前已得到回答，我深表歉意，但我不知道如何措辞，因此很难搜索。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:00:29.530

基本上，您要做的就是向该字段添加一个值。

```
 <input type="text" value="hello" /> 
```

将在加载时将字段中的文本设置为“hello”。对于 php，您只需使用

```
 <input type="text" value=<?php json_encode($variable); ?> /> 
```

或者至少是类似的东西，这取决于您的确切需求。

对于此特定示例，请尝试类似以下内容：

```
<input type="text" value= <?php json_encode($username); ?> />
<input type="text" value= <?php json_encode($address); ?>  />
<input type="text" value= <?php json_encode($city); ?>     /> 
```

我在这个特定示例中使用 json_encode 的原因是它会在引号中打印到源代码，而不是做一些混乱的 '"'.$variable 类型废话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:00:23.257

您可能会使用标签输入。只需设置 value 属性

```
<input type="text" value="default"> 
```

结果将是这样的

```
<form ...>
<div>
<input name="user" type="text" value="ken">
<input name="address" type="text" value="12345">
<input name="city" type="text" value="NJ">
</div>
</form> 
```

# ios - 我们可以在 UIWebview 中显示许多 pdf 吗？

> ID：13847530
> 
> 赞同：1
> 
> 时间：2012-12-12T19:53:48.373
> 
> 标签：ios, uiwebview

我们可以在一个 webview 中显示多个 pdf/doc 吗？

例如，我有 3 个 pdf 文件要加载到单个 UIWebview 中：

> PDF 1（作为第一个）
> 
> PDF 2（作为第二个）
> 
> PDF 3（作为第三个）

我没有找到任何参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:33:03.310

UIWebView[显示一个文件](http://developer.apple.com/library/ios/#qa/qa1630/_index.html#//apple_ref/doc/uid/DTS40008749)。如果您需要在一个 UIWebView 中连续显示多个 PDF 文件，您可以：

1.  使用 Adob​​e Acrobat 将它们组合起来

2.  [通过在 Cocoa 中合并 PDF 文件以](https://stackoverflow.com/questions/5610521/merging-pdf-files-in-cocoa)编程方式组合它们

# javascript - javascript - 每次都为变量引用 DOM

> ID：13847533
> 
> 赞同：0
> 
> 时间：2012-12-12T19:54:06.543
> 
> 标签：javascript, jquery, server-sent-events

问题的标题似乎具有误导性，因为我知道如果您想每次都引用 DOM，则不应使用变量。但是，情况有点不同。我创建了一个 SSE 脚本，它在第一次加载页面时可以完美运行，但由于页面内容不断变化，它并不总是有效。

```
var objts = $(".newsItem:first").data("ts");
var objid = $(".newsItem").data("id"); 
var ids = $.makeArray(objid); //variable of IDS
var ts = $.makeArray(objts); //variable of ts

var source=new EventSource("AJAX/get_feed_updates.php?ids=" + ids + "&ts="+ ts +"");

source.onmessage=function(event)
  {
    if (event.data > 0){
        document.title = '(' + event.data + ') ' + originalTitle;

    if (event.data == 1){// no plurals
           $("#refreshFeed").fadeIn('slow').html(event.data + ' more news item.');
     }

     if (event.data > 1){ //plurals
        $("#refreshFeed").fadeIn('slow').html(event.data + ' more news items.');
     }
}
}; 
```

如您所见，第一个变量将数据放入数组中以放入`EventSource`url。显然，这不会像页面那样继续更新，也不会`source`。我试着把所有东西都串起来，而不是`source.onmessage...`变成；

```
new EventSource("..." + $.makeArray($".newsItem")...).onmessage=function(event) 
```

但这不起作用，因为事件源没有改变。我希望每次请求 SSE 源时都引用 DOM。我知道这不是做这些事情的好方法，但在这种情况下我看不到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:59:36.117

对于这种情况，我不会使用`EventSource`，因为您需要传递信息。

尝试使用 websockets 或使用某种 Comet 技术。

# type-conversion - 在 OS X 上保存 Pandoc 参考文件的目录？

> ID：13847534
> 
> 赞同：3
> 
> 时间：2012-12-12T19:54:13.313
> 
> 标签：type-conversion, osx-mountain-lion, macvim, implicit-conversion, pandoc

我整天都在玩这个。

据我了解，在使用 Pandoc 进行文件转换时，您可以使用具有所需字体、标题等的参考文件。

例如：如果我想使用参考文件将 markdown 文件 'filename.md' 转换为同名的 .docx 文件，我将在命令行中输入：

```
pandoc --reference-docx=reference.docx filename.md -o filename.docx 
```

我遇到的问题是当我运行这个命令时，它返回：

```
pandoc: reference.docx: openBinaryFile: does not exist (No such file or directory) 
```

在网上阅读了关于将我的参考文档保存在哪里之后，一些网站提到保存在“.pandoc/”下，这并不存在。我的第一个猜测是因为我使用了 OS X 安装程序，所以它没有创建它。所以我做了一个，并将 reference.docx 保存到该目录。

我重新启动并以几种不同的方式再次尝试了该命令，没有骰子。我的猜测是我仍然将参考文件保存到错误的目录中，没有正确获取某些内容，或者我完全错过了一些要点。

**更新**

我采用了显而易见的方法，并尝试了与我的参考文件所在的同一目录中的命令。Tab 浏览，语法很好，目录很好，所有文件都在正确的位置，但现在我有一个新错误：

```
pandoc: Did not find end of central directory signature. Failed reading at byte position 4 
```

现在这显然是一个 zip 文件问题......

如果有人知道会有帮助的快速修复，否则我将重新安装我发现的带有一些额外资源的 Pandoc 的不同版本，希望能解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:28:02.357

从源代码重新安装并使用不同的参考文档解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T18:16:35.650

1.set --data-dir=your PATH,pandoc 自动在dara-dir中查找reference.docx。但必须禁用 --reference-doc。

2.设置--reference-doc=your.docx，并将your.docx与your.md放在同一个目录，但必须禁用--data-dir。

当 pandoc 将 markdown 转换为 docx 时，1 或 2 是可以的。

# fortran - 在 Fortran 90 中使用高斯消除的 4 个方程组中的浮点误差

> ID：13847540
> 
> 赞同：2
> 
> 时间：2012-12-12T19:54:30.177
> 
> 标签：fortran, fortran90

该程序返回`"floating point error: overflow"`具有以下温度值的 a：

> 170 225 275 330 390 445 500 555 610 670 725 775 830 1100 1390 1670

这是非常明显的，因为巨大的值需要提升到 16 次方然后相加。

该矩阵表示一个由 4 个方程组成的系统，需要使用高斯消元法求解，剩余代码已准备好。

```
Real Mat(4,4),Temp(10), Temp2(10),Sum

Do i=1,16
    Write(*,*)"enter Temperature value T",i
    Read (*,*) Temp(i)
End do

Do i=1,16
    Do j=1,16
        sum=0
        Do k=1,16
           if(i.GT.1)then
                l=(4*(i-1))+j
            elseif(i.eq.1)then
                l=i+j-1
            endif   
            Temp2(k)=Temp(k)**l
            sum=sum+Temp2(k)
        End do
        Mat(i,j)=Sum
    End do
End Do

Do I=1,4
  Write(*,*) (mat(I,J), j=1,4)
End do
 !this just forces the program to stay in the exe wind
    Read(*,*) sum
End 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:16:35.940

您的数组`Temp`只有 10 个元素。您无法读取 16 个数字。`Mat`只是`(4,4)`，但您将其称为`(i,j)`循环`1..16`和`1..16`.

另外，添加`implicit none`，我不会考虑没有我的学生标记的程序。

我建议您使用具有良好调试功能的编译器并设置正确的标志。我用`gfortran -g -fbacktrace -fcheck=all -Wall`. `g95`也不错。也是商业`NAG`的，它甚至在运行时检查未定义的值..

# ruby - 在 Ruby 中动态定义类方法

> ID：13847543
> 
> 赞同：9
> 
> 时间：2012-12-12T19:55:02.207
> 
> 标签：ruby, metaprogramming

在 Ruby 1.9.3 中，我需要创建一些类实例，每个实例具有相似的实例方法和类方法，但它们仅因几个固定参数而异。它们的类类型的区别也很重要，所以我不能简单地使用同一类的不同实例。

一个简化的示例如下所示。

```
module Animal
private
  def self.make_animal(name, legs, noise)
    klass = Class.new
    klass.const_set(:NUM_LEGS, legs)
    klass.class.send(:define_method, :scream) { noise.upcase + '!' }
    Animal.const_set(name, klass)
  end
  make_animal :Tiger, 4, 'roar'
  make_animal :Human, 2, 'derp'
end 
```

除了动态定义“尖叫”方法的块中使用的变量在“尖叫”方法的运行时而不是“make_animal”方法的运行时绑定之外，这似乎工作正常。

```
Animal::Human::NUM_LEGS # => 2 -- ok
Animal::Tiger::NUM_LEGS # => 4 -- ok
Animal::Human.scream # => "DERP!" -- ok
Animal::Tiger.scream # => "DERP!" -- fail! 
```

我怎样才能修改上面的代码，让老虎尖叫`"ROAR!"`？

**[注意]**我确实需要维护示例中愚蠢的 OO 结构，原因太复杂，无法在此描述。我只对学习如何使用参数化方法实现以编程方式在动态定义的类上定义类方法感兴趣。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T21:14:24.830

`klass.class`在两种情况下都是相同的（类）：所有类都是`Class`. 结果，你定义了尖叫，然后重新定义它。

ruby 中通常被认为是类方法的实际上是单例方法（如果您有兴趣，可以阅读很多关于特征类等的内容）。

这

```
def some_object.foo
end 
```

Construct 创建单例方法。很多时候这将在类定义中，使用 self 但你可以在任何事情上做它，例如，如果你这样做

```
x = 'dog'
def x.bark
  "Woof"
end 
```

然后 x.bark 将返回 woof，但不会在任何其他字符串上定义 bark。

在这里，您的方法需要引用您的`noise`变量，因此您需要使用`define_singleton_method`来定义您的方法。

如果您仍在 ruby​​ 1.8 中，则不能使用 define_singleton_method - 您需要使用单例方法是特征类上的方法这一事实。

```
klass = Class.new
eigenclass = class << klass; self; end
eigenclass.send(:define_method, :scream){noise} 
```

相当于使用define_singleton_method

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T20:18:24.057

您的代码的问题不是错误的绑定时刻。这是您在`Class#class`. 它是，惊喜，惊喜，，`Class`唯一的。所以你用“derp”版本覆盖“roar”版本。

相反，您应该直接在这些动态类上定义方法。这是我的看法（它使用实例 var 来表示`noise`，希望这不是问题）。

```
module Animal
private
  def self.make_animal(name, legs, noise)
    klass = Class.new
    klass.const_set(:NUM_LEGS, legs)
    klass.instance_variable_set(:@noise, noise)

    klass.instance_eval do |k|
      def scream
        @noise.upcase + '!'
      end
    end

    Animal.const_set(name, klass)
  end

  make_animal :Tiger, 4, 'roar'
  make_animal :Human, 2, 'derp'
end

Animal::Human::NUM_LEGS # => 2
Animal::Tiger::NUM_LEGS # => 4

Animal::Human.scream # => "DERP!"
Animal::Tiger.scream # => "ROAR!" 
```

# jquery - jQuery 脚本在 iframe 中不起作用？

> ID：13847544
> 
> 赞同：1
> 
> 时间：2012-12-12T19:55:02.027
> 
> 标签：jquery, jquery-ui, iframe, quirks-mode

我有一个加载库 jQuery、jQuery UI 和一些脚本的页面（页面 A），并且该页面正常工作。

但是我有一个页面 B，它有一个调用页面 A 的 iFrame。但是当我在页面 B 上时，没有运行到页面 A 的脚本。

此错误仅发生在 Internet Explorer 8 和 9 中，但在 Firefox、Chrome、Safari、Opera 中，甚至当我在 IE9 上并将页面与 IE7 兼容时，页面 A 的脚本通常在页面 B 上的 iFrame 中运行。

可能发生了什么？

**编辑——** 我们开始：在页面 A 上，我有一个表单，它使用 jQuery 进行验证，显示 Datepicker、Colopicker 以上传文件。一切正常。

但是我必须通过 iFrame 将这个页面 A 包含在页面 B 内。也就是说，在页面B上必须显示，页面A的形式。

但是，当我只单击“页面 A”时，验证脚本、日期选择器等......正常工作。但是当我在页面 B 的 iFrame 中查看这个“页面 A”时，就好像该页面没有加载任何 javascript/库。但这仅发生在 Internet Explorer 8 和 9 中。在其他浏览器中，即使在 Internet Explorer 7 中，通过 iFrame 的“页面 A”在“页面 B”中也能完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:01:44.670

只需关闭您的 iframe 标记并在 Internet Explorer 中再次对其进行测试

```
<iframe src="form_intranet.asp" width="700" height="600"></iframe> 
```

看看这个关于 iframe 的资源：http: [//www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

# php - 在 PHP 中将 Oracle 转换为 JSON 以在 Google Maps API 中使用

> ID：13847546
> 
> 赞同：2
> 
> 时间：2012-12-12T19:55:07.437
> 
> 标签：php, json, oracle, google-maps-api-3

我想在 PHP 中获取一个 Oracle 10g 表到 JSON，以便在 GMap APIv3 中稀疏它。到目前为止，我可以获取 Oracle 表的第一行，但我不知道该怎么做。

到目前为止我使用这个：

```
$conn = oci_connect($user, $pass, $host);

$sql  = oci_parse($conn, "select * from POINTS_CS_FRANCO WHERE CODE_CS = '711'");

oci_execute($sql);

class User {
    public $Code_CES = "";
    public $Nbr_Electeur = "";
    public $lat = "";
    public $lng = "";
}

while ($row = oci_fetch_assoc($sql)){
    $user = new User();
    $user->Code_CES = $row['CODE_CES'];
    $user->Nbr_Electeur = $row['NBR_ELECTEUR'];
    $user->lat = $row['LATITUDE'];
    $user->lng = $row['LONGITUDE'];
} 

echo json_encode($user);

?> 

// Returns: {"Code_CES":"CES 000","Nbr_Electeur":"8","lat":"48.834997","lng":"-67.530141"} 
```

然后我不确定 JSON 输出是否会像这样在 GMap 中得到很好的结构，如果它完整的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:57:35.833

这很好用：

```
<?php

$conn = oci_connect($user, $pass, $host);

$sql  = oci_parse($conn, "select * from POINTS_CS_FRANCO WHERE CODE_CS = '711'");

oci_execute($sql);

$rows = array();
while($r = oci_fetch_assoc($sql)) {
    $rows[] = $r;
}

$locations =(json_encode($rows));

?> 
```

# bash - 分配动态多维变量

> ID：13847552
> 
> 赞同：1
> 
> 时间：2012-12-12T19:55:56.700
> 
> 标签：bash

我确实有xml，其中确实有类似的行

```
#<pdfrwt "2"> n_vars code(1) ... code1(2).... code1(n_vars) code2(1) ... code2(n_vars) code3(1) ... code3(n_vars)</pdfrwt> 
```

所以实际上，每次根据“n_vars”，我确实有一个对应于三个类的数字序列，即code1、code2、code3，对于每个类，我得到每个类的“n_vars”条目。所以，我怎样才能巧妙地阅读 bash 中的行（好的，我知道 ;-) 并分配一个“n_vars”多维变量，例如

```
output1[1]=code1(1)
output1[2]=code1(2)
...
output1[n]=code1(n)
and likewise

output2[1]=code2(1)
..
output2[1]=code2(1) 
```

提前致谢

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:11:55.337

您可以将整行读入一个数组，然后取出数组的切片。

```
# hdr gets the first field, n_vars gets the second, and rest gets
# the remaining values
read hdr n_vars rest < file

# Split rest into a proper array
array=( $rest )
# Copy the desired slices from array into the three output arrays.
output1=( "${array[@]:0:n_vars}")
output2=( "${array[@]:n_vars:n_vars}" )
output3=( "${array[@]:2*n_vars:n_vars}" ) 
```

如何访问值的一些示例：

```
echo ${output1[0]}    # The first element of output1
echo ${output2[3]}    # The fourth element of output2
echo ${output3[$#output3]}  # The last element of output3
echo "${output1[@]}"   # All the elements of output1 
```

# php - 如何将PHP脚本分配给PHP中的变量

> ID：13847554
> 
> 赞同：1
> 
> 时间：2012-12-12T19:56:10.927
> 
> 标签：php

我正在尝试在文件中编写 php 脚本。肯定会出现解析错误。帮助我将 php 代码分配给 php 变量，以便我可以将其写在代码上。

```
<?php

$myFile = "testFile1.php";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "<?php some php code with functions ?>";
fwrite($fh, $stringData);
fclose($fh);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:58:22.177

将要写入文件的字符串放在单引号中，否则将被解释。

```
$stringData = '<?php some php code ?>'; 
```

或者，您可以转义代码，有关详细信息，请参阅 php 手册中的“字符串”一章：http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:58:55.177

使用单引号：

```
<?php

$myFile = "testFile1.php";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = '<?php some php code ?>';
fwrite($fh, $stringData);

fclose($fh);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:59:33.370

例如：

```
 <?php

    $myFile = "testFile1.php";
    $fh = fopen($myFile, 'w') or die("can't open file");
    $var1 = 'value1';
    $var2 = 'value2';

    $stringData =
        '<?php $var1 = ' . $var1 . ';
        $var2 = ' . $var2 . ';
        do_something($var1); ?>';

    fwrite($fh, $stringData);

    fclose($fh);

?> 
```

所以只需使用单引号来确保 php 不会将 vars 解析为 php vars 本身，并使用连接将 var 值放入文件中。在某些情况下，您也可能使用[var_export($var, true)函数。](http://php.net/manual/en/function.var-export.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T19:58:14.740

你为什么想做这个？无论如何，你不能。但是您可以向 PHP 索要赎金临时文件名，创建该文件，在那里编写代码，然后`include`是该文件。

此外，您需要使用单引号，否则 PHP 将尝试解释它。

```
$phpCrapThatWillMakeSiteVulnerableToHacking = '<?php echo "Welcome to my easially hackable website. Now I will execute $_POST["code"]!"; ' . $_POST["code"] . ' ?>';
$fileName = tempnam("/tmp", "derp");
$handle = fopen($fileName, "w");
if ($handle === FALSE)
{
    die("I derped");
}
fwrite($handle, $phpCrapThatWillMakeSiteVulnerableToHacking);
fclose($handle);
include($fileName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T19:59:46.413

拆分问题。就像您在 JavaScript 中使用的一样，`<\/script>`或者`"<"+"/script"`在 PHP 中您可以编写`"?".">"`。

这可以防止`?>`令牌被识别。

此外，NOWDOC 旨在将 PHP 代码放入字符串中：

```
$phpcode = <<<'END'
Blah blah blah
This is code with $variables, functions() and {$complex['syntax']}
END; 
```

# ruby - 使用 ruby 的特定 dom 元素的屏幕截图

> ID：13847555
> 
> 赞同：11
> 
> 时间：2012-12-12T19:56:11.257
> 
> 标签：ruby, capybara, phantomjs, casperjs

有没有办法使用 capybara+phantomjs做到[这一点。](http://casperjs.org/api.html#casper.captureSelector)

或者更复杂的事情，比如将整页截图裁剪到特定的 dom 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T16:20:31.260

已为此功能提交拉[取请求。](https://github.com/jonleighton/poltergeist/pull/368)

它很快就会关闭，您将可以使用

```
driver.render selector: '#some_id` 
```

在下一个版本中。

# java - Guice 谜题：批处理范围的封装上下文

> ID：13847558
> 
> 赞同：3
> 
> 时间：2012-12-12T19:56:24.300
> 
> 标签：java, scope, guice

我们正准备开始在我们的保险数据转换平台中使用 Guice，我遇到了一个有趣的场景，在 Guice 文档或我发现的任何帖子中似乎都没有直接解决。

我们的平台在几个重要领域使用封装上下文 (EC) 模式。例如，假设我们正在处理一组 10 个策略。每当我们开始处理新策略时，我们希望构造一个`PolicyContext`对象并初始化诸如策略编号、状态和公司之类的属性。这`PolicyContext`是转换过程中涉及的许多类的依赖项。

请注意，`PolicyContext`（以及`*Context`我们应用程序中的其他对象）是一个紧密关注特定域区域的值对象（代表基本的、普遍需要的策略信息）。我很想知道你们中的模式专家是否仍然认为这是一种反模式（正如 Misko Hevery 在[http://misko.hevery.com/2008/07/18/break-the-law-中所讨论的那样of-demeter-is-like-looking-for-a-needle-in-the-haystack/](http://misko.hevery.com/2008/07/18/breaking-the-law-of-demeter-is-like-looking-for-a-needle-in-the-haystack/) ) 尽管这些是纯粹的价值对象，当然不代表“厨房水槽”。</p>

目前，我们正在`PolicyContext`以最糟糕的方式进行管理：我们有一个静态全局变量 , `policyContext`，`policyContext.initialize(String company, String state, String policyNum)`每当我们开始处理新策略时都会调用它。

我的目标是让 Guice 以架构上优化的方式管理这些上下文对象，以便从概念上讲，每当我们开始处理新策略时：

1.  古斯弃旧`PolicyContext`。
2.  Guice使用来自数据库的参数构造了一个新的、不可变的`PolicyContext`（没有臭名昭著的初始化方法） 。`company/state/policyNum`
3.  Guice 将已经构建`PolicyContext`的注入到所有需要它的类中。

这是我的暂定方法：

1.  创建一个自定义范围——类似于[http://code.google.com/p/google-guice/wiki/CustomScopes](http://code.google.com/p/google-guice/wiki/CustomScopes)上的 Guice 批处理范围示例——其中批处理的边界由外部确定。有了这个范围，我们开始处理一个新的策略，我们可以 1) 结束前一个“批次”并开始一个新的。**问**：为什么我不能完全按照上述 URL 中列出的方式使用 Guice 批处理范围示例？
2.  由于`PolicyContext`没有依赖关系，我们将对*所有*构造函数参数使用 AssistedInject（这似乎有点奇怪）。假设我们采用这种方法并生成一个`PolicyContextFactory`，那么在我们开始处理新策略的地方，我们将拥有如下代码：

    ```
    …
    scope.exit();
    scope.enter();
    @Inject private PolicyContextFactory policyContextFactory; 
    policyContextFactory.create(company, state, policyNum); // the parameters come from a database record.
    // Note that we don’t need to actually store the created instance; it will be injected elsewhere into various class constructors.
    … 
    ```

这看起来是最优的吗？我知道可能有更简单的方法（例如`PolicyContext`，每当我们处理新策略时，创建一个新的特定注入器，这会有效地创建一个新的`PolicyContext`）。然而，这是架构的核心方面，所以我真的不想妥协。

我知道，另一种选择是在这种情况下避免使用 DI，而只使用`PolicyContextManager`具有单独`create`和`get`方法的静态类，其中前一种方法是丢弃当前`PolicyContext`并创建/存储新方法的工厂，而后一种方法只需返回“活动” `PolicyContext`）。但是我的代码最终会执行手动 DI，因为我将编写很多代码，例如`methodThatNeedsPolicyContext(PolicyContextManager.get(), …)`. 由于我们无论如何都打算开始使用 Guice，因此这种方法似乎不是最佳的。

顺便说一句，对于那些试图深入了解 DI 的人，我强烈推荐 Dhanji Prasanna 的“依赖注入”。这本书专注于 Guice 和 Spring，绝对是必不可少的，因为它比我遇到的任何其他东西都要深入得多。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:56:04.267

看起来您的链接[`SimpleScope`](http://code.google.com/p/google-guice/wiki/CustomScopes#Implementing_Scope)几乎完全符合您的需求，因为您希望避免传递您的上下文，并且您的自定义范围将确保任何`@PolicyScoped`绑定（大概只有您的上下文及其内容）已经准备好（“播种”）。您还将获得一些不错的多线程功能，尽管您可以通过将静态引用转换为静态 ThreadLocal 来获得这些功能。

您必须在`enter`和`exit`调用之间完全注入策略范围的对象图，或者您选择的任何名称。请注意，如果您将 PolicyContext 注入构造函数或字段（将其保存到对象的状态），则您的对象实例现在特定于该策略。这可能看起来很明显，但是一个随意注入或缓存的队友`dueDateCalculator`可能没有意识到它被隐式构造为仅适用于策略 #8675-309 的到期日期计算器，并且它将为策略 #5550-187 提供错误的答案。特别是任何`@Singleton`需要策略范围依赖的对象都应该使用提供者，否则即使您退出范围，单例也会“记住”策略；这是“范围扩大注入”的示例，并且[Prasanna 详细讨论了它](http://www.manning.com/prasanna/Samplech5.pdf "依赖注入 (p145)")。

您可能会发现坚持让您的队友*从不*直接注射`PolicyContext`而是*始终*注射`Provider<PolicyContext>`（如果[是可注射的，您](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Injector.html)[可以免费获得`PolicyContext`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Injector.html)）更简单。这使您不必再考虑在构造对象时哪个策略处于活动状态，而是信任您在该对象的方法运行时收到的 PolicyContext。

如果一个对象没有依赖关系，则不需要 Guice 来创建它——这只是矫枉过正。一旦对象产生了如此多的依赖项以至于手动构建很痛苦，就很容易将对象的创建移动到 Guice。除非你必须这样做，否则不要这样做。

最后，关于封装上下文，我碰巧相信 EC 模式是一种有效的*重构*，只要上下文没有逻辑并且整个对象包适用于上下文出现的地方。如果您可以向我辩护说 Context 中的每个项目在您注入上下文的时间中有 80% 被使用，那么代码可能更短且更易于遵循并且您赢了。请记住，依赖注入的好处之一是添加或删除依赖项非常容易，因此从注入一个单独绑定的 Context 属性到注入两个单独的 Context 属性再到直接注入整个 Context 变得非常容易（并且重复尽可能多的上下文）。

不过，这只是我的看法。希望能帮助到你！

# hibernate - 休眠@Where Q

> ID：13847559
> 
> 赞同：1
> 
> 时间：2012-12-12T19:56:24.720
> 
> 标签：hibernate, annotations

我想映射`Train.fares`到票价类，但只有当前有效的票价（在有效/到期日期窗口内）。在`@Where`Fare 的注释中，如何指定`effDate`并`expDate`引用`Fare.effDate`and `Fare.expDate`？

```
@Entity
@Table(name = "TRAIN")
@Configurable
public class Train {

    @Id
    private String id;

    @Column
    private Date ddate;

    @Column
    private String company;

    @Column (name = "NBR")
    private String trainNbr;

    @OneToMany(mappedBy = "flight", fetch = FetchType.LAZY)
    @Id
    private List<Fare> Fares;

    ...setters & getters
}

@Entity
@Table(name = "FARE")    
public class Fare {

    @Id
    private Long id;

    @Column 
    private String company;

    @Column (name = "NBR")
    private string trainNbr;

    @Column
    private Date effDate;

    @Column 
    private Date expDate;

    @ManyToOne
    @JoinColumns({
        @JoinColumn(name = "COMP", referencedColumnName = "COMP", insertable = false, updatable = false),
        @JoinColumn(name = "NBR", referencedColumnName = "NBR", insertable = false, updatable = false)
    })
    @Where(clause = "SELECT t from TRAIN as t where t.ddate >= effDate AND t.ddate <= expDate")
    private Train train;

    ...setters & getters
} 
```

# java - 从文件夹/ja r 文件中读取资源时用于抽象 I/O 的 Java 库？

> ID：13847560
> 
> 赞同：2
> 
> 时间：2012-12-12T19:56:26.237
> 
> 标签：java, io

当涉及到来自例如的输入源时，是否有一个好的 Java 库可以透明地处理资源的 I/O。java项目/文件夹或jar档案？

我想在我的应用程序中使用相同的代码来读取资源：

1.  从 Eclipse 运行代码（来自源代码）
2.  运行已部署的应用程序（二进制文件）
3.  从文件夹 (src/bin) 中获取资源列表。

通常我会这样做：

```
 URL resource = this.getClass().getClassLoader().getResource("someResource.ext"); 
```

假设资源在类路径上，从源代码和二进制文件都可以正常工作。但是在某些项目中，只有子文件夹位于类路径上，而不是其内容（以避免必须将所有文件指定为单独的资源）：

```
project
 src
 resources
    someResource.txt
    subFolder
       -> resA.txt
       -> resB.txt
       -> resC.txt
          .... 
```

在这种情况下，我需要像这样做一些低级意大利面条：

[http://www.java-gaming.org/topics/how-to-check-if-a-url-is-a-directory/21435/view.html](http://www.java-gaming.org/topics/how-to-check-if-a-url-is-a-directory/21435/view.html)

我看过一个 apache.commons-io，但它并不完全符合我的需要。对于处理 src 和 bin 的嵌套文件夹/资源的其他库有什么建议吗？

编辑：

正如下面所推荐的，我正在尝试使用此处描述的 URL 协议处理程序：

[带有内嵌图像的 JEditorPane](https://stackoverflow.com/questions/9388264/jeditorpane-with-inline-image)

但我不确定我是否完全理解它。在一个项目中，我依赖一个 jar 文件，里面有一个文件夹：

```
myjar.jar
 myresources
   > fileA.txt
   > fileB.txt
   > fileC.txt 
```

在我的应用程序中，我这样做：

```
URL url = this.getClass().getClassLoader().getResource("myresources");
System.out.println(url.getPath());
Handler.install();
URLConnection con = new DataConnection(url);
try {
  inputStream = con.getInputStream();
} catch (IOException e) {
  e.printStackTrace();
} 
```

从哪里复制 DataConnection 和 Handler：

[带有内嵌图像的 JEditorPane](https://stackoverflow.com/questions/9388264/jeditorpane-with-inline-image)

但我看不出这如何帮助我获取“myresources”文件夹中的资源。我显然没有以正确的方式使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:07:29.577

在 java 7 中有[zip 文件系统](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)和文件系统的其他概括。

当然，您也可以创建[URL 协议处理程序](https://stackoverflow.com/questions/9388264/jeditorpane-with-inline-image)。

# javascript - 如何将 JSON 变量分配给外部 jQuery 函数

> ID：13847561
> 
> 赞同：-3
> 
> 时间：2012-12-12T19:56:26.997
> 
> 标签：javascript, jquery, ajax, json, variables

我在 DIV 中显示 JSON 项目的列表。将鼠标悬停在第二个 DIV 上时，如何重新显示特定项目。

现在，脚本会逐字打印：" + data.items[i].title + "，而不是实际显示值。

可以在下面的脚本中更改什么？提前致谢。

注意：这是一个与我之前的问题不同的问题，因为它处理的是文本，而不是图像。

```
$.getJSON('1zONE.json', function(data) {
    globalData = data;
    var output="<ul>";
    for (var i in data.items) {
        output += "<li><h1>" + data.items[i].title + "</h1>" + data.items[i].price + "--" + data.items[i].description.one+"</li>";
    }
    output += "</ul>";
    $("#placeholder").html(output);

    $('li').on({
        mouseenter: function() {
        document.getElementById("placeholder2").innerHTML=" + data.items[i].title + ";

        }
    });   
}); 
```

这是 JSON 文件 (1zONE.json)：

```
{"items":[
        {
            "id":"1",
            "thumb":"01_sm",
            "thumb2":"01_md",
            "title":"Ray",
            "price":"Villalobos",
            "description": {
                "one":"January",
                "two":12,
                "three":2012
            }
        },
        {
            "id":"2",
            "thumb":"02_sm",
            "thumb2":"02_md",
            "title":"John",
            "price":"Jones",
            "description": {
                "one":"April",
                "two":28,
                "three":2010
            }
        },
        {
            "id":"3",
            "thumb":"03_sm",
            "thumb3":"03_md",
            "title":"Jo",
            "price":"Jo",
            "description": {
                "one":"May",
                "two":8,
                "three":2010
            }
        },
        {
            "id":"4",
            "thumb":"04_sm",
            "thumb3":"04_md",
            "title":"Jo4",
            "price":"Jo4",
            "description": {
                "one":"May4",
                "two":84,
                "three":20104
            }
        }
]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:02:06.013

你搞砸了引号，这个：

```
document.getElementById("placeholder2").innerHTML=" + data.items[i].title + "; 
```

应该是这样的：

```
document.getElementById("placeholder2").innerHTML = data.items[i].title; 
```

并且由于它在 jQuery 事件处理程序中，它可能会更容易做到：

```
$("#placeholder2").html(data.items[i].title); 
```

**编辑：**

要解决迭代值不持久的问题，您需要一个闭包，所以我想我会为您编写它？

```
$.getJSON('1zONE.json', function(data) {
    globalData = data;
    var ul = $('<ul />');

    for (var key in data.items) {
        (function(j) {
            var li = $('<li />'),
                h1 = $('<h1 />', {text: data.items[j].title});

            li.append(h1).append(data.items[j].price + "--" + data.items[j].description.one).on('mouseenter', function() {
                $('#placeholder2').html(data.items[j].title);
            }).appendTo(ul);
        })(key);
    }
    $("#placeholder").html(ul);
});​ 
```

# regex - 我使用正则表达式有什么问题？

> ID：13847562
> 
> 赞同：0
> 
> 时间：2012-12-12T19:56:36.763
> 
> 标签：regex, bash

我的情况是这样的 - 我有一个文件：

```
this line(5)
that line(6)
another line(9)
one more(88)
last line(156) 
```

我需要将括号中的值从那个更改为：

```
this line(1)
that line(2)
another line(3)
one more(4)
last line(5) 
```

基本上，使值从 1 开始排序。

现在，这是我的代码：

```
#!/bin/bash

FILE=$1
COUNT=0
echo "Working with $FILE"

if [ -f $FILE ]; then
while read -r line; do 
    echo ${line/\([0-9]{1,3}\)/\($COUNT\)};
     let COUNT++;
  done < $FILE
else
  echo "File does not exist!"
fi 
```

这是我得到的：

```
this line(5))/(0)}
that line(6))/(1)}
another line(9))/(2)}
one more(88))/(3)}
last line(156))/(4)} 
```

我究竟做错了什么？如何在正则表达式中指定一些艺术长度？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:16:22.310

将您的回声线更改为：

```
echo ${line%%\([0-9]*\)}\($COUNT\) 
```

**编辑：**模式替换版本也适用，假设在该行的其他任何地方都没有带数字的括号 - 要使用模式替换并确保它只查看行尾，请在第一个分隔符`%`后使用 char `/`，像这样：

```
echo ${line/%\([0-9]*\)/\($COUNT\)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:16:54.037

`echo ${line/([0-9]*)/($COUNT)};`

你原来的有`{}`（由于某种原因不支持），并且`}`结束了变量。's 也不受支持（至少在这里）这一事实`()`意味着我们也不必逃避它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T23:56:12.510

请注意，这`${line/([0-9]*)/($COUNT)}`并不完全正确：该模式`[0-9]*`表示一个数字后跟零个或多个*任意*字符 - 不限于数字。例子

```
line='foo(1abc)'
COUNT=2
echo ${line/([0-9]*)/($COUNT)} 
```

输出`foo(2)`

正则表达式的等效[bash 模式](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)`[0-9]+`是扩展模式`+([0-9])`

```
shopt -s extglob
echo ${line/(+([0-9]))/($COUNT)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:07:24.163

这是另一种方法，用于使用`cat -n`行打印行号，并将`sed`行号替换为括号：

```
cat -n $FILE | sed 's/^ *\([0-9]*\)\t\(.*\)([0-9]*)/\2(\1)/' 
```

通过将正则表达式行更改为以下内容，我能够使您的解决方案正常工作：

```
echo ${line/([0-9]*)/($COUNT)}; 
```

我无法让重复范围在那里工作。

# java - 尝试在会话变量中检索数组列表

> ID：13847566
> 
> 赞同：2
> 
> 时间：2012-12-12T19:57:10.137
> 
> 标签：java, jsp, servlets

所以我试图将一个数组列表存储在会话变量中并且也能够检索它。它是用于网站上的购物车。问题是检索它。这是我到目前为止在 servlet 中的内容

```
 HttpSession session = request.getSession();
       ArrayList<Dvd> dvds;
        dvds = new ArrayList<Dvd>()= session.getAttribute("ProductsInCart"); 
```

编译器错误是意外类型：必需变量，找到值

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:58:18.607

```
dvds = (ArrayList<Dvd>)session.getAttribute("ProductsInCart"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:06:30.663

首先，您没有编写真正的 java 语句，您需要在赋值右侧有一个表达式，在左侧需要一个或多个受让人。你有两个表达式，用什么？

我认为您需要以下两部分：

设置属性：

```
HttpSession session = request.getSession();
session.setAttribute("ProductsInCart", new ArrayList<Dvd>()); 
```

读取属性：

```
HttpSession session = request.getSession();
List<Dvd> dvds = (List<Dvd>)session.getAttribute("ProductsInCart"); 
```

# c# - Windsor Logging Facility：控制日志名称

> ID：13847572
> 
> 赞同：5
> 
> 时间：2012-12-12T19:57:45.257
> 
> 标签：c#, castle-windsor, nlog

我正在使用 Windsor Logging Facility 和 NLog 集成将日志记录添加到项目中。

我没有遵循 Windsor 文档的推荐做法，即向`Log`我想要支持日志记录的每个类添加一个属性，而是决定尝试使用动态拦截来完成它。到目前为止，拦截器相当基本；它只是使用构造函数注入来获取以下实例`ILogger`：

```
class LoggingInterceptor : IInterceptor
{
    private readonly ILogger _logger;
    public LoggingInterceptor(ILogger logger)
    {
        if (logger == null) throw new ArgumentNullException("logger");
        _logger = logger;
    }

    public void Intercept(IInvocation invocation)
    {
        // just a placeholder implementation, I'm not actually planning to do this ;)
        _logger.Info(invocation.Method.Name);
        invocation.Proceed();
    }
} 
```

除此之外，我所做的只是注册拦截器并将其应用于组件的最低限度，而日志记录工具负责其余的工作。

```
container.Register(Component.For<LoggingInterceptor>().LifeStyle.Transient);

container.Register(
    Component.For<IEmployeeRepository>()
    .ImplementedBy<EmployeeRepository>()
    .Interceptors(InterceptorReference.ForType<LoggingInterceptor>()).First); 
```

到目前为止一切都很好 - 有点。我得到的记录器遵循 NLog 推荐的每类一个记录器的做法。在这种情况下，我认为这不是一个很好的选择。这意味着每条消息都将发送到名为“MyApplication.Interceptors.LoggingInterceptor”的日志，这并不是非常有用。

我更喜欢以记录器应用到的抽象命名日志。例如，如果记录器已应用于 的实现，`IEmployeeRepository`则日志应命名为`EmployeeRepository`. 这是可行的吗？

**编辑：** 我尝试实现自定义`ILoggerFactory`并指示容器使用它。但是我很快遇到了一个障碍：当 Windsor 调用工厂时，提供的唯一信息是获取记录器的对象的类型。没有提供有关该对象的其他信息，因此`ILoggerFactory`无法找出拦截器已应用于的抽象。

我注意到有两个`ILoggerFactory.Create()`接受字符串作为参数的重载。温莎似乎并没有直接使用它们中的任何一个，但人们会认为它们必须在那里是有原因的。流畅的注册 API 中是否有任何内容可用于指定使用特定字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:11:32.423

这是一个与您的问题非常相似的问题，它有一个公认的答案。在链接中，发布答案的人建议使拦截器依赖于 ILoggerFactory 并在 Intercept 方法中，使用 IInvocation.TargetType 作为类型发送到 ILoggerFactory 以获取适当的记录器。

请注意，我不使用 Castle，所以我不能对这个建议发表更多评论。

```
public class LoggingInterceptor : IInterceptor
{
    private readonly ILoggerFactory _loggerFactory;

    public LoggingInterceptor(ILoggerFactory loggerFactory)
    {
        _loggerFactory = loggerFactory;
    }

    public void Intercept(IInvocation invocation)
    {
        var logger = _loggerFactory.Create(invocation.TargetType);
        if (logger.IsDebugEnabled)
        {
            logger.Debug(CreateInvocationLogString(invocation));
        }
        try
        {
            invocation.Proceed();
        }
        catch (Exception e)
        {
            logger.Warn(CreateInvocationLogString(invocation));
            throw;
        }
        logger.Info(CreateInvocationLogString(invocation));
    }

    private static String CreateInvocationLogString(IInvocation invocation)
    {
        var sb = new StringBuilder(100);
        sb.AppendFormat("Called: {0}.{1}(", invocation.TargetType.Name, invocation.Method.Name);
        foreach (var argument in invocation.Arguments)
        {
            var argumentDescription = argument == null ? "null" : argument.ToString();
            sb.Append(argumentDescription).Append(",");
        }
        if (invocation.Arguments.Any())
        {
            sb.Length--;
        }
        sb.Append(")");
        return sb.ToString();
    }
} 
```

[Castle：如何在日志拦截器中获得正确的 ILogger？](https://stackoverflow.com/questions/4274637/castle-how-can-i-get-the-correct-ilogger-in-the-logging-interceptor?rq=1)

您可能已经看过这个，但这里有一个 Castle 示例的链接，该示例展示了如何创建日志拦截器，以及如何为包装类型创建记录器：

[http://docs.castleproject.org/Windsor.Introduction-to-AOP-With-Castle.ashx](http://docs.castleproject.org/Windsor.Introduction-to-AOP-With-Castle.ashx)

编辑： ILoggerFactory 的 nlog 实现是 ExtendedNLogFactory，它在 Castle.Core-NLog nuget 包中（[http://www.nuget.org/packages/Castle.Core-NLog](http://www.nuget.org/packages/Castle.Core-NLog)）

# python - 在本地测试 GAE-python27-django 项目

> ID：13847575
> 
> 赞同：2
> 
> 时间：2012-12-12T19:58:13.287
> 
> 标签：python, google-app-engine, nose

我正在尝试使用`nose`和`noseGAE`插件测试一些 GAE 模型。

这些教程展示了如何使用本教程[http://farmdev.com/projects/nosegae/](http://farmdev.com/projects/nosegae/)`webapp`中的框架设置 来运行测试。但由于我使用的是 django，所以我的是：`main.py`

```
import os

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

import django.core.handlers.wsgi
app = django.core.handlers.wsgi.WSGIHandler() 
```

当我试图流鼻涕时：

```
$ nosetests --with-gae 
```

我得到：

```
Traceback (most recent call last):
  File "c:\Python27\Scripts\nosetests-script.py", line 8, in <module>
    load_entry_point('nose==1.2.1', 'console_scripts', 'nosetests')()
  File "C:\Python27\lib\site-packages\nose-1.2.1-py2.7.egg\nose\core.py", line 118, in __init__
    **extra_args)
  File "C:\Python27\lib\unittest\main.py", line 94, in __init__
    self.parseArgs(argv)
  File "C:\Python27\lib\site-packages\nose-1.2.1-py2.7.egg\nose\core.py", line 135, in parseArgs
    self.config.configure(argv, doc=self.usage())
  File "C:\Python27\lib\site-packages\nose-1.2.1-py2.7.egg\nose\config.py", line 338, in configure
    self.plugins.configure(options, self)
  File "C:\Python27\lib\site-packages\nose-1.2.1-py2.7.egg\nose\plugins\manager.py", line 284, in configure
    cfg(options, config)
  File "C:\Python27\lib\site-packages\nose-1.2.1-py2.7.egg\nose\plugins\manager.py", line 99, in __call__
    return self.call(*arg, **kw)
  File "C:\Python27\lib\site-packages\nose-1.2.1-py2.7.egg\nose\plugins\manager.py", line 167, in simple
    result = meth(*arg, **kw)
  File "build\bdist.win32\egg\nosegae.py", line 80, in configure
ImportError: No module named dev_appserver 
```

我认为这是因为 django 依赖项，接下来我尝试运行单个文件：

```
import unittest
from google.appengine.ext import testbed

class TestServicios(unittest.TestCase):
    def setUP(self):
        self.testbed = testbed.Testbed()
        self.testbed.activate()
        self.testbed.init_datastore_v3_stub()

    def tearDown(self):
        self.testbed.deactivate()

if __name__ == '__main__':
    unittest.main() 
```

然后：

```
$ python test_models.py 
```

和：

```
Traceback (most recent call last):
  File "test_models.py", line 2, in <module>
    from google.appengine.ext import testbed
ImportError: No module named google.appengine.ext 
```

GAE 信息发布：1.7.3 运行时：python27

有人知道这里发生了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:34:33.380

我推荐这个[文档](https://developers.google.com/appengine/docs/python/tools/localunittesting#Setting_Up_a_Testing_Framework)。它展示了一个示例，您可以如何编写一个 testrunner.py 来加载您的测试类，这样您就可以拥有一个迷你测试框架。具体来说，您正在寻找以下代码：

```
sys.path.insert(0, sdk_path)
import dev_appserver
dev_appserver.fix_sys_path() 
```

sdk_path 是您的 google_appengine sdk 所在的位置。例如，它可能是 linux 上的 /usr/local/google_appengine。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:49:27.173

如果您使用的是 django，我建议您使用 django 测试基础架构而不是nose-gae。

# ios - iOS录制midi文件

> ID：13847580
> 
> 赞同：4
> 
> 时间：2012-12-12T19:58:26.800
> 
> 标签：ios, midi, recording

我正在从外部键盘接收 MIDI 事件，并寻找一种将它们记录到 MIDI 文件的方法。是否有任何可用的 Obj C 库来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:45:31.990

如果您不想从头开始编写文件创建例程，您可以使用`MusicPlayer`API`MusicSequence`方法[MusicSequenceFileCreate](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicSequence_Reference/Reference/reference.html#//apple_ref/c/func/MusicSequenceFileCreate)来生成 .mid 文件。您需要创建一个 a`MusicSequence`和一个[MusicTrack](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicTrack_Reference/Reference/reference.html#//apple_ref/doc/uid/TP40009332)的实例来添加传入的 MIDI 事件。优点是时钟得到处理，您可以获得预览/播放功能。

# jquery - 返回低不透明度 div 中内容的不透明度

> ID：13847581
> 
> 赞同：0
> 
> 时间：2012-12-12T19:58:29.853
> 
> 标签：jquery, html, css, opacity

> **可能重复：**
> [我不想从 CSS 中的父级继承子级不透明度](https://stackoverflow.com/questions/5770341/i-do-not-want-to-inherit-the-child-opacity-from-the-parent-in-css)

我的页面包含以下内容`<div>`：

```
<div id="OffDiv">
    <asp:Image ID="imgHammer" runat="server" ImageUrl="~/Images/hammer.png" ToolTip="Biding..." />
</div> 
```

和CSS：

```
div#OffDiv
{
    display: block;
    position: fixed;
    top: 0px;
    right: 0px;
    width: 100%;
    height: 100%;
    padding: 0px;
    margin: 0px;
    z-index: 90000;
    background-color: Blue;
    filter: alpha(opacity=40); /* internet explorer */
    -khtml-opacity: 0.4; /* khtml, old safari */
    -moz-opacity: 0.4; /* mozilla, netscape */
    opacity: 0.4; /* fx, safari, opera */
    text-align: center;
}
#imgHammer
{
    margin-top: 100px;
    z-index: 90001
     filter: alpha(opacity=100); /* internet explorer */
    -khtml-opacity: 1; /* khtml, old safari */
    -moz-opacity: 1; /* mozilla, netscape */
    opacity: 1; /* fx, safari, opera */
    z-index: 90001;
} 
```

问题是它在渲染后`imgHammer`具有低不透明度（意思是 0.4）。`OffDiv`

如何将其不透明度更改为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:38:50.827

只需使用 rgba 颜色（0-256 而不是 00-FF）：

```
background-color: rgba(0,0,0,0.5); 
```

[http://jsfiddle.net/aqHXB/](http://jsfiddle.net/aqHXB/)

# jquery - 来自服务器的 jquery $ajax + jsonp 404 错误显示成功

> ID：13847583
> 
> 赞同：1
> 
> 时间：2012-12-12T19:58:45.083
> 
> 标签：jquery

（我认为这可能是 jquery 中的一个错误，不确定）

如果我像这样使用 jQuery 进行 ajax 调用：

```
 $.ajax({
        type: "GET",
        url: url,
        dataType: "json",
        crossDomain: true
    }).done((result) => {
        if (result == null) {
            d.resolve();
            return;
        } else if (result.Results != null) {
            if (!$.isArray(result.Results)) {
                d.resolve([result.Results]);
                return;
            } else {
                d.resolve(result.Results);
                return;
            }
        } else {
            if (!$.isArray(result)) {
                d.resolve([result]);
                return;
            }
        }

        d.resolve(result);
    }).fail((e, description, error) => {
        d.reject(error);
    }); 
```

因此，如果服务器返回 404 或 403 或其他什么，则调用失败函数。但是服务器是 REST，所以它正确，如果找不到任何东西，返回“未找到”，但在正文中也会有错误描述。

奇怪的是，失败方法中的jQuery e 属性（是的，打字稿，但常规也是如此）具有 e.status == 200 和 statusText = "success" 即使它失败了。状态值应该是 403 或 404，responseText 应该是返回的任何值。

（所有这些都可以在没有 jsonp 的情况下正常工作。）

所以我的问题是，我如何让它向我显示来自服务器的真实返回值以及它声称它没有执行的函数中的实际描述性错误消息？

谢谢！

# php - Symfony2 - 动态角色管理

> ID：13847592
> 
> 赞同：3
> 
> 时间：2012-12-12T19:59:10.383
> 
> 标签：php, security, symfony, authorization, user-management

我正在开发一个 CRM，它将具有高级授权和管理在系统中具有特定角色的组中的用户。

基本上，我想做的是：

*   管理（域）模型/控制器/操作的动态授权
*   管理对象和字段的动态授权。

我知道 security.yml 文件中的 ROLE_xxxx ，但我不想对角色进行硬编码。

例如，我想要一种矩阵/网格，超级管理员可以在其中创建自定义授权角色。

其中一个角色可能是：“团队领导”可以查看和编辑员工的电子邮件地址，但不能查看或编辑 Employee_Wage 字段。

另一个用例是用户组“Accounting”中的用户可以调用操作 generateInvoiceAction()，但不能访问操作 createNewEmployeeAction()。

另一个用例是 PROJECT LEADER 可以使用 newProjectAction() 添加项目，但 PROJECT 对象的某些字段/属性对 PROJECT LEADER 组不可见/不可访问

我知道您可以在安全和路由中设置这些，但我不想对这些角色进行硬编码。例如，如果公司决定创建一个具有特定角色的新组，他们应该能够做到。

**我的（伪）解决方案**

1.  查看每个域模型、操作/函数和对象/字段并为 CRUD 创建一个角色，例如创建 EMPLOYEE_FIRSTNAME_READ、EMPLOYEE_FIRSTNAME_UPDATE、EMPLOYEE_CREATE、EMPLOYEE_EDIT、EMPLOYEE_DELETE 等...

2.  创建一个数据库对象“组”，其标题字段包含所有角色的组合数组。

3.  将用户放入组

这是要走的路还是有更好的方法在 Symfony2 中实现这一目标？

基本上：创建一个基于域模型、对象、字段等具有特定角色的组......可以使用管理员后端进行配置。

我希望我能正确解释这一点，请随时回复并询问更多信息。

*（我记得旧版本的 Invision Power Board 中的类似内容，您可以在其中配置权限掩码网格并将其附加到组）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:42:16.423

从你在这里所说的，我认为要走的路是使用`ACL`.

[http://symfony.com/doc/master/cookbook/security/acl.html](http://symfony.com/doc/master/cookbook/security/acl.html)

但是，您**必须**自己检查权限，以使用以下方式启动每个安全方法：

```
$securityContext = $this->get('security.context');
$comment = ... // load using Doctrine?

if (false === $securityContext->isGranted('EDIT', $comment))
{
    throw new AccessDeniedException();
} 
```

如果您正在扩展 Symfony 的`Controller`类，我强烈建议在其间再添加一个类，该类将实现常见的安全逻辑，以尽可能减少错误...

另一方面，在使用服务时，您可以提供一个对象作为参数，您可以依靠`@SecureParam`注释`JMSSecurityExtraBundle`（我假设您使用它）来检查相关的域对象权限。

[http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/annotations](http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/annotations)

希望这个对你有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T09:09:28.603

我只是面临同样的问题，经过多次搜索和引用现有捆绑包（FOSUserBundle、SonataUserBundle）后，它可以这样解决：

创建您自己的用户实体扩展 UserInterface 然后自定义函数 getRoles(); [http://symfony.com/doc/current/cookbook/security/custom_provider.html](http://symfony.com/doc/current/cookbook/security/custom_provider.html) 1\. 在这个函数里面可以查询用户属于哪个组，从组中得到所有的角色。您可以参考 FOSUserBundle 的用户模型和用户实体文件了解更多详细信息。[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/User.php](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/User.php) 第247行

1.  然后您可以将后端中的组和实体作为普通实体进行管理，并将用户添加到组中

2.  使用 ACL，但将用户身份更改为角色身份。 [http://symfony.com/doc/current/cookbook/security/acl_advanced.html](http://symfony.com/doc/current/cookbook/security/acl_advanced.html)

# android - 元数据 MediaStore.MediaColumns.DISPLAY_NAME 无法永久更改

> ID：13847603
> 
> 赞同：0
> 
> 时间：2012-12-12T19:59:41.797
> 
> 标签：android

我使用下面的代码来更改所有视频的元数据字段标题。

```
Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;

ContentValues values = new ContentValues(1);
    values.put(MediaStore.MediaColumns.TITLE, "asd2");
    if (context.getContentResolver()
            .update(uri, values, null, null) == 1) {

        Toast t = Toast.makeText(context, "Updated ",
                Toast.LENGTH_SHORT);
        t.show();
    } 
```

当我查看 sd_card 中的文件时，元数据发生了变化。但是，当我将文件复制到电脑中的其他位置时，视频文件详细信息中的标题字段为空白。

# java - 未应用 ActiveMQ 5.7.0 redeliveryPolicy

> ID：13847606
> 
> 赞同：3
> 
> 时间：2012-12-12T19:59:48.203
> 
> 标签：java, spring, jms, activemq

我正在使用 ActiveMQ 5.7.0 并尝试实施重新交付策略。我有两个队列需要为其设置重新投递策略。但是在测试中，它不适用于我的政策。它不遵循下面的配置，而是以 1 秒的间隔重试 7 次（不是我指定的）。

```
 <!--  ActiveMQ destinations to use  -->
  <amq:queue id="destinationOne" physicalName="${activemq.one.queuename}">
    <amq:properties>
        <amq:redeliveryPolicy destination="One.DLQ" maximumRedeliveries="5" initialRedeliveryDelay="300000" useExponentialBackOff="true" backOffMultiplier="2" maximumRedeliveryDelay="3600000"/>
    </amq:properties>
  </amq:queue>
  <amq:queue id="destinationTwo" physicalName="${activemq.two.queuename}">
    <amq:properties>
        <amq:redeliveryPolicy destination="Two.DLQ" maximumRedeliveries="5" initialRedeliveryDelay="300000" useExponentialBackOff="true" backOffMultiplier="2" maximumRedeliveryDelay="3600000"/>
    </amq:properties>
  </amq:queue> 
```

我定义了两个侦听器，它们正在应用如下队列：

```
 <bean id="oneMessageListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
    <property name="destination" ref="destinationOne"/>
    <property name="messageListener" ref="jmsOneListener" />
    <property name="autoStartup" value="false" />    
    <property name="sessionTransacted" value="true"/>
    <property name="concurrentConsumers" value="2" />
  </bean>
  <bean id="twoMessageListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
    <property name="destination" ref="destinationTwo"/>
    <property name="messageListener" ref="jmsTwoListener" />
    <property name="autoStartup" value="false" />    
    <property name="sessionTransacted" value="true"/>
    <property name="concurrentConsumers" value="2" />
  </bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:54:59.820

我同意蒂姆的回答：策略是在底层连接工厂对象上定义的。对于您的场景，我认为您需要使用自己的策略定义 2 个单独的 ActiveMQ 连接工厂，然后为每个连接工厂定义一个单独的 Spring 连接工厂，然后适当使用

这是我之前在 ActiveMQ v5.5 上使用的示例：

```
<bean id="rawConnectionFactory1" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${broker.url}" />
    <property name="redeliveryPolicy" ref="policy1" />
    <property name="useCompression" value="true" />
</bean>
<bean id="rawConnectionFactory2" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${broker.url}" />
    <property name="redeliveryPolicy" ref="policy2" />
    <property name="useCompression" value="true" />
</bean>

<bean id="policy1" class="org.apache.activemq.RedeliveryPolicy">
    <property name="initialRedeliveryDelay" value="20000" />
    <property name="useExponentialBackOff" value="false" />
    <property name="useCollisionAvoidance" value="false" />
    <property name="maximumRedeliveries" value="0" />
</bean>
<bean id="policy2" class="org.apache.activemq.RedeliveryPolicy">
    <property name="initialRedeliveryDelay" value="60000" />
    <property name="useExponentialBackOff" value="false" />
    <property name="useCollisionAvoidance" value="false" />
    <property name="maximumRedeliveries" value="5" />
</bean>

<bean id="connectionFactory1" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="rawConnectionFactory1" />
    <property name="sessionCacheSize" value="30" />
</bean>
<bean id="connectionFactory2" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="rawConnectionFactory2" />
    <property name="sessionCacheSize" value="10" />
</bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T23:51:18.017

通过 ActiveMQConnectionFactory RedeliveryPolicy 属性设置在 MessageConsumers 上设置重新传递策略实例。从片段中我不确定你正在配置什么，但它看起来不正确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-04T11:35:56.307

经过几次重试，我得到了一个使用 amq 命名空间的工作版本：

```
<amq:connectionFactory brokerURL="..." id="connectionFactory">
    <amq:redeliveryPolicyMap>
        <amq:redeliveryPolicyMap><!-- Don't know why a double nesting -->
            <amq:defaultEntry>
                <!-- default policy, 5 times with 10s delay each -->
                <amq:redeliveryPolicy maximumRedeliveries="5" initialRedeliveryDelay="10000" />
            </amq:defaultEntry>
            <amq:redeliveryPolicyEntries>
                <!-- three times with exponential back-off, that is, 1s, 2s, 4s, 8s. "queue" references to the "physicalName" defined in amq:queue -->
                <amq:redeliveryPolicy queue="queue.thread.autopay" maximumRedeliveries="3" initialRedeliveryDelay="1000" backOffMultiplier="2" useExponentialBackOff="true" />
                <!-- another policy mapping -->
                <amq:redeliveryPolicy queue="queue.thread.doc" maximumRedeliveries="2" initialRedeliveryDelay="4000" />
            </amq:redeliveryPolicyEntries>
        </amq:redeliveryPolicyMap>
    </amq:redeliveryPolicyMap>
</amq:connectionFactory> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-08T12:50:11.783

与杰伊的回答相同，但是当我使用属性时，将香草弹簧配置作为 amq 命名空间对我不起作用`${}`

```
<spring:bean name="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <spring:property name="brokerURL" value="${activemq.broker.url}"/>
        <spring:property name="userName" value="${activemq.username}"/>
        <spring:property name="password" value="${activemq.passwd}"/>
        <spring:property name="redeliveryPolicyMap">
            <spring:bean id="redeliveryPolicyMap" class="org.apache.activemq.broker.region.policy.RedeliveryPolicyMap">
                <spring:property name="defaultEntry">                  
                <spring:bean class="org.apache.activemq.RedeliveryPolicy"/>
                </spring:property>
                <spring:property name="redeliveryPolicyEntries">
                    <spring:list>
                        <spring:bean class="org.apache.activemq.RedeliveryPolicy">        
                            <spring:property name="maximumRedeliveries" value="${max.redelivery}"/>
                            <spring:property name="redeliveryDelay" value="${retry.delay}"/>
                            <spring:property name="initialRedeliveryDelay" value="${retry.delay.initial}"/>
                            <spring:property name="queue" value="${my.queue}"/>
                        </spring:bean>
                    </spring:list>
                </spring:property>
            </spring:bean>
        </spring:property>
    </spring:bean> 
```

# asp.net-mvc-3 - 如何创建自定义 mvc html 帮助器以在编辑器模板中使用？

> ID：13847611
> 
> 赞同：1
> 
> 时间：2012-12-12T20:00:03.097
> 
> 标签：asp.net-mvc-3, razor, html-helper

我有一个编辑器模板，用于以 html 表单显示模型的值以进行编辑。在编辑器模板中，我使用了一个显示/呈现复选框的自定义 mvc html 助手。我注意到当我提交表单时，复选框的值没有与模型数据的其余部分一起发送。在检查生成的 HTML 时，我注意到我使用的内置 html 助手都有一个 name 属性，其值前面有一个索引值，即

```
<input name="[0].CompanyName" type="text" value="CompanyName1">
<input name="[1].CompanyName" type="text" value="CompanyName2">
<input name="[2].CompanyName" type="text" value="CompanyName3"> 
```

但是我的自定义 html 助手（复选框）在没有索引值的情况下呈现，即

```
<input checked="checked" class="yesNoChk" id="IsActive" name="IsActive" type="checkbox" value="Y"> 
```

因此，为什么没有将值传递回我的 HttpPost 控制器方法。呸！无法知道自定义复选框属于任何模型。

所以，我的问题是，如何构建一个自定义的 mvc html 助手，它知道使用编辑器模板时分配的 html 元素索引？微软显然明白了这一点，因为所有内置的 html 助手都可以工作。我的自定义没有。

# c++ - I/O 完成端口上的多个线程

> ID：13847613
> 
> 赞同：1
> 
> 时间：2012-12-12T20:00:13.863
> 
> 标签：c++, windows, multithreading, winapi, io-completion-ports

我正在使用 I/O 完成端口开发 C++ 套接字服务器。我按照一些文章的建议为每个处理器创建一个 I/O 端口和两个工作线程，以处理重叠的 I/O 活动

从我所读到的，只有这些工作线程中的一个应该随时唤醒并处理 I/O 请求。因此，当一个客户端（仅）连接并发送某些内容时，我所期望的只是一个线程唤醒并处理该接收，但是当我尝试调试它时，我可以看到多个线程唤醒并尝试处理相同的操作。

我的假设是错误的吗？

# javascript - 如何在循环期间隐藏和检查无序列表中每个 li 的另一个元素的属性？

> ID：13847615
> 
> 赞同：0
> 
> 时间：2012-12-12T20:00:17.017
> 
> 标签：javascript, jquery

好的 - 我正在尝试通过`<li>`包含在无序列表中的内容进行反向循环。在这个循环中，我想删除每一个`<li>`，然后将它的父列的高度与相邻列的高度进行比较，直到它 =< 另一个。一旦这是真的，打破循环并显示剩余`<li>`。在此之前，我正在使用 shuffle.js 对列表进行洗牌。我已经能够捕捉到两列的高度，但是一旦我开始循环遍历`<li>`

这是HTML简短版本...

```
<body>  
  <div id="wrap">
        <div id="header"></div>
             <div id="main">This is the column that would set the height that determines the amount of [li] shown
            </div>
        <div id="sidebar">
            <ul id="shuffleunorderedlist">
                <li id="promo_1">
                    1
                </li>
                <li id="promo_2">
                    2
                </li>
                <li id="promo_3">
                    3
                </li>
                <li id="promo_4">
                    4
                </li>
                <li id="promo_5">
                    5
                </li>
                <li id="promo_6">
                    6
                </li>
                <li id="promo_7">
                    7
                </li>
                <li id="promo_8">
                    8
                </li>
                <li id="promo_9">
                    9
                </li>
                <li id="promo_10">
                    10
                </li>
                <li id="promo_11">
                    11
                </li>
                <li id="promo_12">
                    12
                </li>

            </ul>
        </div>
<div id="footer"></div> 
```

这是迄今为止我编写的 jQuery 和 Javascript。

```
<script type="text/javascript">
jQuery(function($)
{
    window.onload = function()
    { 
        $('#shuffleunorderedlist').shuffle();   //********** Shuffle List 
    };
    var mainHeight = $('#main').height();   //********** Capture 'main' height 
    var sidebarHeight = $('#sidebar').height();     //********** Capture 'sidebar'     height 
        if (mainHeight > sidebarHeight)     //********** Compare 'sidebar' height 
            {
                var liCheck = $('div#sidebar.li').reverse().each(function ()    //********** reverse Loop through <li>'s  
                    {
                    while(liCheck())
                        {
                           $('li').hide(); //********** reverse Loop through <li>'s 
                             if (sidebarHeight =< mainHeight) 
                                    {
                                    break;  // breaks loop completely   //**********  Output <li>'s that are left 
                                    }
                        }  
                    }   
            }               
});
</script> 
```

那么基本上为什么这不起作用？我在哪里打破它？我怎样才能让它工作？

非常感谢任何建议、帮助和答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:20:07.650

您的代码充满了问题，因此不要详细说明它们，而是将您的代码与以下内容进行比较：

```
var mainHeight = $('#main').height();
var sidebarHeight = $('#sidebar').height();
if (mainHeight < sidebarHeight) { // You are hiding things from the sidebar correct? Strictly speaking, this check isn't necessary, but it prevents us from looping when we don't need to. 
    $('div#sidebar li').each(function() {  // I removed reverse as it gave me a reference error. If it is defined for you, feel free to use it. 
        if (sidebarHeight > mainHeight) {  
            $(this).hide();  // hide only the current element
            sidebarHeight = $("#sidebar").height(); // update sidebarHeight 
        }
    });
} 
```

# c++ - 相同浮点计算的不同结果

> ID：13847618
> 
> 赞同：1
> 
> 时间：2012-12-12T20:00:25.597
> 
> 标签：c++, graphics, floating-point, raytracing

在我正在做的光线追踪任务中，我必须计算从相机拍摄的光线的 X 偏移量；偏移量计算是这样的

`FovY`作为输入给出；我记得在读取变量的那一刻将其转换为弧度。

`OffsetX = tan (FovX / 2) * ((col - (width / 2)) / (width / 2))`

`FovX = tan(FovY / 2) * aspect = tan(FovY / 2) * (width / height)`

代入原方程并编写代码：

```
float OffsetX = tan(FovY / 2.0f) * (width / height) * ((col - (width / 2.0f)) / (width / 2.0f)); 
```

给了我一个不正确的拉伸图像，我花了好几个小时才把它弄好，这是在发现相同的方程在简化后起作用之后。

最终重新排列的方程为：

```
float OffsetX = tan(FovY / 2.0f) * (2.0f / height) * (col - (width / 2.0f)); 
```

我尝试调试，确实两个方程的结果不同。

会不会有某种四舍五入的错误？有人可以向我解释这种古怪吗？

```
#include <cmath>
#include <iostream>
#include <cstdint>

using namespace std;

int main()
{
    const float PI = 3.1415f;
    const uint32_t width = 160, height = 120;
    const auto fovy = (30.0f * (PI / 180.0f));
    size_t j = 0;
    auto alpha = (tan(fovy / 2.0f) * (width / height)) * (((j + 0.5f) - (width / 2.0f)) / (width / 2.0f));
    cout << alpha << endl;
    alpha = tan(fovy / 2.0f) * (2.0f / height) * ((j + 0.5f) - (width / 2.0f));
    cout << alpha << endl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:09:38.690

让我猜猜：宽度和高度是整数。

当你这样做时：

```
(width / height) 
```

你得到整数除法，它会丢弃结果的小数部分。如果您改为：

```
((double)width / height) 
```

那么这两个结果将几乎相同。

* * *

顺便说一句，您可以进一步简化表达式：

```
tan(FovY / 2.0f) * (2.0f*col - width) / height 
```

# attributes - OpenERP 字段属性 - 树视图中的不可见属性

> ID：13847623
> 
> 赞同：3
> 
> 时间：2012-12-12T20:00:37.050
> 
> 标签：attributes, openerp

考虑以下对象和相应的视图：

```
class first_object(osv.osv):
    _name = "first.object"
    _columns = {
                'id': fields.integer ('First ID'),
                'flag': fields.boolean ('Flag'),
                'second_object_id': fields.one2many('second.object','first_object_id')
    }

class second_object(osv.osv):
    _name = "second.object"
    _columns = {
                'id': fields.integer ('Second ID'),
                'first_object_id': fields.many2one('first.object','random field'),
                'field_x': fields.float('x',size=128),
                'field_y': fields.float('y',size=128),
    }

<record model="ir.ui.view" id="first_object_view_id">
    <field name="name">Frist Object</field>
    <field name="model">first.object</field>
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form>
            <notebook>
                <page>
                    <field name="id"></field>
                    <field name="flag"></field>
                    <field name="second_object_id">
                        <tree editable="top">
                            <field name="field_x" attrs="{'invisible':[('flag','=',True)]}"/>
                            <field name="field_y"/>
                        </tree>
                        <form>
                            <field name="field_x"/>
                            <field name="field_y"/>
                        </form>
                    </field>
                </page>
            </notebook>
        </form>
    </field>
</record> 
```

请注意我现在对树中名为**field_x的***第二个对象*的字段的属性，它基于名为**flag的***第一个对象*的字段。

 *****首先，本例中的属性被完全忽略。我不知道为什么它不起作用。其次，假设这不起作用并且属性必须引用本地字段，那么**invisible**属性不适用于**树**视图，仅适用于**表单**视图。但是，如果您在树中设置一个简单的**invisible="1"**，它会工作得很好（我不能依赖它，我需要我提供的属性规则）。有任何想法吗？

**编辑：**
问题似乎是通过树视图中的属性（而不是不可见 =“1”）使字段不可见。它在表单中工作正常。如果可以做到这一点，它将解决我的问题。

**编辑 2：**
我尝试使用单独的视图定义和本地字段而不是 many2one 和 one2many 无济于事。但是，我设法以某种方式实现了这一点`invisible="context.get('xxx',True/False)"`。问题是一旦条件匹配，即使在创建条件不匹配的新记录后，它仍然不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:40:03.637

请查看 stock.move 中的 stock_move_tree

```
<field name="prodlot_id" groups="base.group_extended"/>
<button name="%(track_line)d" string="Split in production lots" type="action"
   icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('prodlot_id','&lt;&gt;',False)]}"
   states="draft,waiting,confirmed,assigned,done"
   groups="base.group_extended"/>
<field groups="base.group_extended" name="tracking_id"/>
<button name="setlast_tracking" string="Put in current pack" type="object"
   groups="base.group_extended"
   icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
   states="draft,assigned,confirmed,done"/> 
```

是相同的解决方案，但对于按钮，而不是常规字段。是的，删除字段但显示空列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:00:53.400

似乎尝试设置有条件的不可见属性不会影响真实视图。只有隐形=“1”。这是有道理的，因为我无法想象具有一些不可见字段的树视图，其中整个列本身不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:17:48.800

在 second.oject 中添加相关字段以标记

```
class second_object(osv.osv):
_name = "second.object"
_columns = {
            'id': fields.integer ('Second ID'),
            'flag': fields.related('first_object_id', 'flag', type='boolean',  relation='first.object', string='Flag'),
            'first_object_id': fields.many2one('first.object','random field'),
            'field_x': fields.float('x',size=128),
            'field_y': fields.float('y',size=128),
} 
```

然后在您的视图中添加字段标志为不可见和 attrs：

```
<record model="ir.ui.view" id="first_object_view_id">
<field name="name">Frist Object</field>
<field name="model">first.object</field>
<field name="type">form</field>
<field name="arch" type="xml">
    <form>
        <notebook>
            <page>
                <field name="id"></field>
                <field name="flag"></field>
                <field name="second_object_id">
                    <tree editable="top">
                        <field name="flag" invisible="1"/>
                        <field name="field_x" attrs="{'invisible':[('flag','=',True)]}"/>
                        <field name="field_y"/>
                    </tree>
                    <form>
                        <field name="field_x"/>
                        <field name="field_y"/>
                    </form>
                </field>
            </page>
        </notebook>
    </form>
</field> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:42:43.867

您在 Object2 中获得了 1 个额外的新字段（即布尔类型字段）。

并在object1的“flag”字段上创建onchnage。

在那个 onchnage 中，您根据 Flag 字段的值设置-重置这个新字段的值。

并将 attrs 放在这个 new_field 而不是 Flag 上。

希望对你有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T13:28:22.247

请单独定义模型“second.object”的视图。相同的示例在 stock 模块的向导文件夹中的 stock_partial_picking.py 文件中。请检查一下。您可能需要定义一个字段作为用户[user1888049](https://stackoverflow.com/users/1888049/user1888049)在他的回答中告诉*****

# .htaccess - 如何重定向 Joomla 2.5 SEF url

> ID：13847625
> 
> 赞同：1
> 
> 时间：2012-12-12T20:00:41.067
> 
> 标签：.htaccess, joomla2.5

最近将网站更新为 Joomla 2.5。客户想要将 url 从 example.com/products 更改为 example.com/solutions。

有指向 example.com/products 的外部链接现在会抛出 404。

我尝试了许多 .htaccess 重定向规则但均未成功，包括：

```
RewriteEngine on
RewriteBase /
RewriteRule ^products/(.*) http://www.example.com/solutions/ [R=301,L] 
```

其他人有这个问题吗？

# spring - 在 Hibernate 中删除多行

> ID：13847626
> 
> 赞同：1
> 
> 时间：2012-12-12T20:00:44.537
> 
> 标签：spring, hibernate, transactions

在非事务环境中，可以在 Hibernate 中批量删除多行，如下所示。

```
Session session=HibernateUtils.getSessionFactory().getCurrentSession();
session.beginTransaction();

String temp[]=request.getParameter("delIds").split(",");
int len=temp.length;
countryService.delete(temp);

Configuration configuration=new Configuration();
configuration.setProperty("hibernate.jdbc.batch_size", "50");

for(int i=0;i<len;i++)
{
    Country c=(Country)session.get(Country.class, new Long(temp[i]));

    if(i%50==0)
    {
         session.flush();
         session.clear();
    }

    session.delete(c);
}

//session.flush();
session.getTransaction().commit(); 
```

每批将考虑删除 50 行。

* * *

如何在交易环境中实现同样的目标？

```
@Service
@Transactional(readOnly = true, propagation=Propagation.REQUIRES_NEW)

final public class CountryDAO implements CountryService
{
    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
    }

    @SuppressWarnings("unchecked")
    @Transactional(readOnly=false, propagation=Propagation.REQUIRES_NEW)
    public void delete(String[] id)
    {
        int len=id.length;
        Session session=sessionFactory.getCurrentSession();

        for(int i=0;i<len;i++)
        {
            Country country=(Country)session.get(Country.class, Long.valueOf(id[i]));
            session.delete(country);
        }
    }
} 
```

这可行，但是如何删除一批中的行，每批都有特定的行，以便可以最小化流向数据库的流？

* * *

我可以这样做。

```
@SuppressWarnings("unchecked")
//@Transactional(readOnly=false, propagation=Propagation.REQUIRES_NEW)
public void delete(String[] id)
{
    int len=id.length;
    Session session=sessionFactory.openSession();       //<----------------
    Transaction transaction = session.beginTransaction();

    Configuration configuration=new Configuration();
    configuration.setProperty("hibernate.jdbc.batch_size", "50");

    for(int i=0;i<len;i++)
    {
        if(i%49==0)
        {
            session.flush();
            session.clear();
        }
        Country country=(Country)session.get(Country.class, Long.valueOf(id[i]));
        session.delete(country);
    }
    transaction.commit();
    session.close();
} 
```

根据下面的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:36:10.617

您可以使用在 HQL 中包含删除的“批量”更新命令。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-direct](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-direct)

# r - 在 R 中向 3D 绘图添加标记

> ID：13847628
> 
> 赞同：0
> 
> 时间：2012-12-12T20:00:53.350
> 
> 标签：r

我需要标记某些观测值出现在 3D 绘制的联合密度函数中的位置——我设想在密度图中添加一个向量 (x, y, f(x,y) + something_small)，以显示点的位置。我曾尝试使用 trans3d()，但没有奏效。

这是一个例子：

```
library(MASS)
Sigma <- matrix(c(12,1,1,12),2,2)
Sample <- mvrnorm(n=1000, rep(0, 2), Sigma)
empDen <- kde2d(Sample[,1],Sample[,2])
par(bg = "white")

x <- empDen$x
y <- empDen$y
z <- empDen$z
nrz <- nrow(z)
ncz <- ncol(z)
jet.colors <- colorRampPalette( c("lightblue", "blue") ) 
nbcol <- 100
color <- jet.colors(nbcol)
zfacet <- z[-1, -1] + z[-1, -ncz] + z[-nrz, -1] + z[-nrz, -ncz]
facetcol <- cut(zfacet, nbcol)
persp(x, y, z, col = color[facetcol], phi = 15, theta = -50, xlab="x", ylab="y", zlab="Empirical Joint Density", border=NA) 
```

问题是：我如何指出 Sample[1,] 在联合密度中出现的位置，即将它添加到图中？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:37:06.550

这有效：

```
fmt=persp(x, y, z, col = color[facetcol], phi = 15, theta = -50, xlab="x", ylab="y", zlab="Empirical Joint Density", border=NA)
pt = Sample[1,]
points(trans3d(pt[1],pt[2],.001,fmt),pch=20, col="Red")
lines(trans3d(c(pt[1],pt[1]), c(pt[2],pt[2]), c(0,.001),fmt),col="Red",cex=2) 
```

虽然，用一些基于经验联合密度的信息代替 0.001 会很好，而不是手动指定每个点的值。

# asp.net - Application_EndRequest 未找到会话

> ID：13847631
> 
> 赞同：9
> 
> 时间：2012-12-12T20:00:59.913
> 
> 标签：asp.net, session, global-asax

[我正在尝试按照ASP.NET OutputCache 和 Cookies](https://stackoverflow.com/questions/9411180/asp-net-outputcache-and-cookies/13592488#13592488)中的建议在 Global.asax.vb 中的 Application_EndRequest 中设置一个 cookie

我编写了以下代码，cookie 获得了`ERROR`价值。

为什么会话不可用？

```
Sub Application_EndRequest(ByVal sender As Object, ByVal e As EventArgs)
    Dim context As HttpContext = HttpContext.Current
    If Not context.Session Is Nothing Then
        context.Response.Cookies("T").Value = context.Session("T")
    Else
        context.Response.Cookies("T").Value = "ERROR"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T20:40:36.423

`Application_EndRequest`该会话在事件中不再存在。

`Application_PostRequestHandlerExecute`在执行应用程序的代码之后但在`SessionState`发布之前调用。

```
Sub Application_PostRequestHandlerExecute(ByVal sender As Object, ByVal e As EventArgs)
    Dim context As HttpContext = HttpContext.Current
    If Not context.Session Is Nothing Then
        context.Response.Cookies("T").Value = context.Session("T")
    Else
        context.Response.Cookies("T").Value = "ERROR"
    End If
End Sub 
```

# xaml - ISupportIncrementalLoading 结合 VariableSizedWrapGrid

> ID：13847632
> 
> 赞同：8
> 
> 时间：2012-12-12T20:01:01.347
> 
> 标签：xaml, windows-runtime, lazy-loading

我有一个`ObservableCollection<T>`实现`ISupportIncrementalLoading`接口的。

当我将此集合绑定到普通的 gridview 时，一切正常。

但是当我将 ItemsPanel 模板更改为 VariableSizedWrapGrid 时。增量加载不再起作用。

有效的 Xaml：

```
<ItemsPanelTemplate>                        
    <VirtualizingStackPanel Orientation="Horizontal"/>
</ItemsPanelTemplate> 
```

不起作用的 Xaml：

```
<ItemsPanelTemplate>
    <VariableSizedWrapGrid Orientation="Vertical" ItemHeight="250" ItemWidth="250"  Margin="0,0,80,0"/>
</ItemsPanelTemplate> 
```

我也找到[了 this](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/11cb4e1a-302b-4306-9426-e350eb335931) & [this](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/605467fb-0a20-4da7-a0bf-30a9f9d6e62c)。声明`VariableSizedWrapGrid`不支持`ISupportIncremetalLoading`。

是否有人编写了支持增量加载的 VariableSizedWrapGrid？还是开源解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:53:20.313

只有两个面板支持增量加载：VirtualizingStackPanel 和 WrapGrid。我不知道任何开源解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T22:27:43.810

它不支持，因为面板本身必须能够虚拟化元素。由于 VariableSizedWrapGrid 中的数据模板不同，因此无法虚拟化，因此您要绘制的每个元素都必须在开始时存在。

# asp.net - 要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的实例

> ID：13847634
> 
> 赞同：2
> 
> 时间：2012-12-12T20:01:07.387
> 
> 标签：asp.net, asp.net-mvc-4

嗨，我正在做一个 MVC4 教程，并不断收到此错误或某些链接：

```
to call this method, the "Membership.Provider" property must be an instance of     
"ExtendedMembershipProvider". 
```

我引用了另一个类似于这个问题的答案（http://stackoverflow.com/questions/12408349/membership-provider-must-be-an-instance-of-extendedmembershipprovider），但是我可以更新数据库，它是在运行时错误发生在浏览器中。

这是它指向的代码行：

```
ViewBag.HasLocalPassword = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name)); 
```

如果这也有帮助，这里是 Web.Config：

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=eManager.Web;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\eManager.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="enableSimpleMembership" value="true"/>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <roleManager defaultProvider="DefaultRoleProvider" enabled="true">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

谢谢！我这辈子都想不通。

# jquery - 获取某个元素之后的所有元素，包括它们的子元素

> ID：13847635
> 
> 赞同：1
> 
> 时间：2012-12-12T20:01:11.290
> 
> 标签：jquery

我正在尝试编写一些动态代码，但我无法确定我所追求的元素是兄弟姐妹的兄弟姐妹还是兄弟姐妹的孩子。我只有一个类，并且必须在我的元素之后搜索具有此类的第一个元素。例子：

```
 <something class='EitherMe'/>

   <table>
     <thead class = 'EitherMe'></thead>
     <tbody>
       <tr class = 'selectAfterThis'><td></td></tr>
        .
        .
        .
     </tbody>
     <tfoot class ='EitherMe'>
       <tr></tr>
       <tr class='OrMe'></tr>
     </tfoot>
   </table>

   <something class='OrMe'/> 
```

我会根据用户的需要得到“EitherMe”或“OrMe”。我需要准确选择'selectAfterThis'之后的那个类的元素

nextAll() 不起作用。因为它只得到兄弟姐妹。有什么办法吗？

更新：我把thead放在上面的例子中。因为大多数建议都是通过父母。而且我真的不知道是否没有更高级别的元素。我可以通过限制类的确切位置来限制我的插件，但如果可能的话我想避免这种情况。

update2：简单地说，我需要具有指定类的元素，它位于“selectAfterThis”下方，无论是在他下方还是远低于他，或者它与“selectAfterThis”的父子关系都无关紧要

更新3：这是我从wirey的回答中写的一个迷你插件。希望它可以帮助像我一样有问题的其他人：http: [//jsfiddle.net/jTLt2/4/](http://jsfiddle.net/jTLt2/4/)。所有学分都归于wirey。我只是做了一些修改，使它比父母兄弟姐妹和父母兄弟姐妹的孩子更深入。

如果你测试它，请告诉我。我想知道它是否 100% 有效

这是代码：

```
(function($){
    $.fn.nextInView = function(selector)
    {
        var ret = this.nextAll(selector);      
        for(var i = 0;this.parents().eq(i).find('body').length < 1 ;i++){
            ret = ret.add(this.parents().eq(i).nextAll(selector));  
            ret = ret.add(this.parents().eq(i).nextAll().find(selector));
        }            
        return ret.first();
    }
})(jQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:10:55.313

您需要将它们分别添加到集合中。然后从集合中取出第一个以找到最接近的

```
// get siblings first - they will always be before parents
var ele = $('.selectAfterThis').nextAll('.OrMe');
// get parent siblings after current parent - they will be before their children
ele = ele.add($('.selectAfterThis').parent().nextAll('.OrMe'));
// get descendants that match of parent slibings
ele = ele.add($('.OrMe',$('.selectAfterThis').parent().nextAll()));
// now get first in collection
ele.first();​ 
```

[http://jsfiddle.net/fRq4z/](http://jsfiddle.net/fRq4z/)

# php - 自定义 WP_Widget 未出现在管理面板中

> ID：13847636
> 
> 赞同：2
> 
> 时间：2012-12-12T20:01:17.940
> 
> 标签：php, widget, wordpress

为了对默认值应用一些更改，`Recent Posts Widget`我已经复制并修改了它以满足我的需要。它包含并注册在我的模板中`functions.php`，当在管理面板中加载小部件部分时，它的构造函数运行。

问题是它没有出现在可用小部件列表中，因此无法使用。当我尝试来自[http://www.darrenhoyt.com/2009/12/22/creating-custom-wordpress-widgets/](http://www.darrenhoyt.com/2009/12/22/creating-custom-wordpress-widgets/)的最小示例时也会出现问题，所以我想我错过了一些重要的东西，但不知道是什么.

*   到目前为止，我的主题是[https://wordpress.org/extend/themes/toolbox](https://wordpress.org/extend/themes/toolbox)的修改克隆。这解释了代码中多次出现的`toolbox_`。
*   `functions.php`以下是和 的代码摘录`inc/widgets.php`。如果需要，我可以提供更多代码。请在评论中告诉我。

代码：

```
<?php

// BEGIN functions.php

if ( ! function_exists( 'toolbox_setup' ) ):
/**
 * Sets up theme defaults and registers support for various WordPress features.
 *
 * Note that this function is hooked into the after_setup_theme hook, which runs
 * before the init hook. The init hook is too late for some features, such as indicating
 * support post thumbnails.
 *
 * To override toolbox_setup() in a child theme, add your own toolbox_setup to your child theme's
 * functions.php file.
 */
function toolbox_setup() {
    // [...]

    require( get_template_directory() . '/inc/widgets.php' );

    // [...]
}
endif; // toolbox_setup

/**
 * Tell WordPress to run toolbox_setup() when the 'after_setup_theme' hook is run.
 */
add_action( 'after_setup_theme', 'toolbox_setup' );

/**
 * Register widgetized area and update sidebar with default widgets
 */
function toolbox_widgets_init() {

  register_widget("My_Widget_Recent_Posts");

    register_sidebar( array(
        'name' => __( 'Sidebar 1', 'toolbox' ),
        'id' => 'sidebar-1',
        'before_widget' => '<aside id="%1$s" class="widget %2$s">',
        'after_widget' => "</aside>",
        'before_title' => '<h1 class="widget-title small">',
        'after_title' => '</h1>',
    ) );
}
add_action( 'init', 'toolbox_widgets_init' );

// END functions.php

?>
<?php

// BEGIN inc/widgets.php

/**
 * Recent_Posts widget class
 *
 * @since 2.8.0
 */

class My_Widget_Recent_Posts extends WP_Widget {

  function __construct() {
        $widget_ops = array('classname' => 'my_widget_recent_entries', 'description' => __( "The most recent posts on your site (modified)") );
        parent::__construct('my-recent-posts', __('Recent Posts (modified)'), $widget_ops);
        $this->alt_option_name = 'my_widget_recent_entries';

        add_action( 'save_post', array(&$this, 'flush_widget_cache') );
        add_action( 'deleted_post', array(&$this, 'flush_widget_cache') );
        add_action( 'switch_theme', array(&$this, 'flush_widget_cache') );
    }

    function widget($args, $instance) {
        $cache = wp_cache_get('my_widget_recent_posts', 'widget');

        if ( !is_array($cache) )
            $cache = array();

        if ( ! isset( $args['widget_id'] ) )
            $args['widget_id'] = $this->id;

        if ( isset( $cache[ $args['widget_id'] ] ) ) {
            echo $cache[ $args['widget_id'] ];
            return;
        }

        ob_start();
        extract($args);

        $title = apply_filters('widget_title', empty($instance['title']) ? __('Recent Posts') : $instance['title'], $instance, $this->id_base);
        if ( empty( $instance['number'] ) || ! $number = absint( $instance['number'] ) )
             $number = 10;

        $r = new WP_Query( apply_filters( 'widget_posts_args', array( 'posts_per_page' => $number, 'no_found_rows' => true, 'post_status' => 'publish', 'ignore_sticky_posts' => true ) ) );
        if ($r->have_posts()) :
?>
        <?php echo $before_widget; ?>
        <?php if ( $title ) echo $before_title . $title . $after_title; ?>
        <ul>
        <?php  while ($r->have_posts()) : $r->the_post(); ?>
        <li><a href="<?php the_permalink() ?>" title="<?php echo esc_attr(get_the_title() ? get_the_title() : get_the_ID()); ?>"><?php if ( get_the_title() ) the_title(); else the_ID(); ?></a>
        <?php the_content(); ?></li>
        <?php endwhile; ?>
        </ul>
        <?php echo $after_widget; ?>
<?php
        // Reset the global $the_post as this query will have stomped on it
        wp_reset_postdata();

        endif;

        $cache[$args['widget_id']] = ob_get_flush();
        wp_cache_set('my_widget_recent_posts', $cache, 'widget');
    }

    function update( $new_instance, $old_instance ) {
        $instance = $old_instance;
        $instance['title'] = strip_tags($new_instance['title']);
        $instance['number'] = (int) $new_instance['number'];
        $this->flush_widget_cache();

        $alloptions = wp_cache_get( 'alloptions', 'options' );
        if ( isset($alloptions['my_widget_recent_entries']) )
            delete_option('my_widget_recent_entries');

        return $instance;
    }

    function flush_widget_cache() {
        wp_cache_delete('my_widget_recent_posts', 'widget');
    }

    function form( $instance ) {
        $title = isset($instance['title']) ? esc_attr($instance['title']) : '';
        $number = isset($instance['number']) ? absint($instance['number']) : 5;
?>
        <p><label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:'); ?></label>
        <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo $title; ?>" /></p>

        <p><label for="<?php echo $this->get_field_id('number'); ?>"><?php _e('Number of posts to show:'); ?></label>
        <input id="<?php echo $this->get_field_id('number'); ?>" name="<?php echo $this->get_field_name('number'); ?>" type="text" value="<?php echo $number; ?>" size="3" /></p>
<?php
    }
}

// END inc/widgets.php

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-05T14:27:00.190

你必须挂钩`register_widget`到`widgets_init`行动，而不是`init`行动。在您的情况下，它是这样的：

```
<?php
add_action( 'widgets_init', 'toolbox_widgets_init' );

function toolbox_widgets_init() {
  register_widget("My_Widget_Recent_Posts");
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:47:52.370

好的，让我们做一些调试测试：

```
echo "include widget file";
require( get_template_directory() . '/inc/widgets.php' ); 
```

还：

```
echo "register widget";
register_widget("My_Widget_Recent_Posts"); 
```

然后：

```
function __construct() {
echo "widget class"; 
```

检查您的 HTML 以查看哪些部分已回显，哪些部分未回显，您可能会收到标头已发送错误，您可以忽略该错误。希望我们可以看到哪个部分没有被触发以缩小问题所在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:35:24.823

如下注册小部件为我解决了这个问题，但在我看来不是很优雅。在类定义后面我插入了行

```
<?php
add_action( 'widgets_init', create_function('',
    'return register_widget("My_Widget_Recent_Posts");') );
?> 
```

`toolbox_widgets_init()`并从我认为它所属的地方删除了注册。

万一有人可以解释为什么它必须这样，或者我可以改变什么，以便它像我打算做的那样工作，然后我会非常感谢评论。但是现在实际问题已经解决了。

# javascript - GMaps.js setContextMenu

> ID：13847637
> 
> 赞同：0
> 
> 时间：2012-12-12T20:01:21.587
> 
> 标签：javascript, google-maps, google-maps-api-3, gmaps.js

根据下面的示例，我已设法使用 GMaps.js 将上下文菜单添加到地图中

```
map.setContextMenu({
  control: 'map',
    options: [{
        title: 'Add marker',
        name: 'add_marker',
        action: function(e) {
            this.addMarker({
              lat: e.latLng.lat(),
              lng: e.latLng.lng(),
              title: 'New marker'
            });
        }
    }, {
        title: 'Center here',
        name: 'center_here',
        action: function(e) {
        this.setCenter(e.latLng.lat(), e.latLng.lng());
    }
  }]
}); 
```

但是我似乎无法向标记添加上下文菜单。

有人可以发布如何做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-17T05:01:38.940

这段代码非常适合我，如果你看不到 contextMenu 也许你应该尝试右键单击它会显示菜单！

```
map.setContextMenu({
        control: 'map',
        options: [{
            title: 'Add marker',
            name: 'add_marker',
            action: function(e){
                this.addMarker({
                    lat: e.latLng.lat(),
                    lng: e.latLng.lng(),
                    animation: google.maps.Animation.DROP,
                    draggable:true,
                    title: 'New Marker'
                });
                this.hideContextMenu();
            }
        }, {
            title: 'Center here',
            name: 'center_here',
            action: function(e){
                this.setCenter(e.latLng.lat(), e.latLng.lng());
            }
        }]
    });
    map.setContextMenu({
        control: 'marker',
        options: [{
            title: 'Center here',
            name: 'center_here',
            action: function(e){
                this.setCenter(e.latLng.lat(), e.latLng.lng());
            }
        }]
    }); 
```

[![用gmaps右键点击地图](../Images/dd22c8f3c2cef1357edbd8c582c4f2b6.png)](https://i.stack.imgur.com/ZPDiC.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:50:35.000

您是指这里演示的 infoWindow 吗？[http://hpneo.github.com/gmaps/examples/markers.html](http://hpneo.github.com/gmaps/examples/markers.html)

如果您查看该页面的源代码，您会发现您只需要添加

```
infoWindow: {
    content: '<p>HTML Content</p>'
} 
```

到您的 addMarker 位，即。标题下方。这真的很容易！:)

# c# - 命令绑定在上下文相关菜单上不起作用？

> ID：13847642
> 
> 赞同：1
> 
> 时间：2012-12-12T20:01:58.127
> 
> 标签：c#, wpf, user-controls, commandbinding

我有一个用户控件（例如：UserCtrlClass），里面有一个树视图

我有视图模型（例如：OBJViewModel）类来表示树视图上的实际项目/数据显示

接下来我有一个树视图模型（例如：TreeViewModel），它有一个 OBJViewModel 对象列表

现在在用户控件的代码隐藏文件中，我已经实例化了树视图模型类并设置为用户控件类的数据上下文

我需要一个上下文相关菜单，仅当我右键单击树中的特定项目时才需要显示它，因此我已经处理了用户控件类的右键单击事件并在那里完成了工作

但是命令不起作用，命令派生自 I 命令并在 TreeViewModel 类中实例化。我试图调试我的 Command.execute 从未被击中！任何帮助将不胜感激，因为我是 .net 和 wpf 的新手

树视图模型类

```
<UserControl Name="PFDBUserCtrl" x:Class="BFSimMaster.BFSMTreeview"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:BFSimMaster.ViewModel"
         xmlns:cmd="clr-namespace:BFSimMaster.Commands"
         mc:Ignorable="d" 
         d:DesignHeight="66" d:DesignWidth="300">
<UserControl.Resources>
    <!--cmd:ActivateProjectCmd x:Key="CMDActivateProject"/-->
    <!--cmd:DeActivateProjectCmd x:Key="CMDDeActivateProject"/-->
</UserControl.Resources>
<DockPanel>
    <!-- PF Object Browser TREE -->
    <TreeView Name="PFDataBrowser" ItemsSource="{Binding LevelOnePFObjects}" >  
        <TreeView.Resources>
            <ContextMenu x:Key ="ProjectMenu"  StaysOpen="true" >
                <!-- Text="{Binding Source={StaticResource myDataSource}, Path=PersonName}-->
                <!--MenuItem Header="Activate" Command="{Binding Source={StaticResource CMDActivateProject}}" CommandParameter="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType=ContextMenu}}"/-->
                <MenuItem Header="Activate" Command="{Binding DataContext.CMDActivateProject, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" CommandParameter="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
                <MenuItem Header="Deactivate" Command="{Binding Source=TVViewModel, Path=CMDDeActivateProject}" CommandParameter="{Binding Path=PlacementTarget,RelativeSource={RelativeSource AncestorType=ContextMenu}}"/>
            </ContextMenu>
        </TreeView.Resources>
        <TreeView.ItemContainerStyle>
            <!-- This Style binds a TreeViewItem to a PFObject View Model.-->                
            <Style TargetType="{x:Type TreeViewItem}">                    
                <EventSetter Event="MouseRightButtonDown" Handler="OnRightButtonDown"/>
                <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                <Setter Property="FontWeight" Value="Normal" />

                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="FontWeight" Value="Bold" />
                    </Trigger>                        
                </Style.Triggers>

            </Style>
        </TreeView.ItemContainerStyle>

        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                <TextBlock Text="{Binding Name}" />
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView>
</DockPanel> 
```

类后面的代码

```
using System;
namespace BFSimMaster
{

public partial class BFSMTreeview : UserControl
{

    readonly TreeViewItemViewModel mViewModelPFObjBrowserTree;  
    public BFSMTreeview()
    {
        InitializeComponent();

        WApplication appPF = PFAPIUtils.APIInstance.GetApplication();
        WDataObject User = appPF.GetCurrentUser();

        // Get raw objects - tree data from a PF database.
        //BFPFDataObject userdb = new BFPFDataObject(User,false,"*.IntPrj");
        BFPFDataObject userdb = new BFPFDataObject(User, true);

        // Create UI-friendly wrappers around the 
        // raw data objects (i.e. the view-model).
        mViewModelPFObjBrowserTree = new TreeViewItemViewModel(userdb);

        // Let the UI bind to the view-model.
        base.DataContext = mViewModelPFObjBrowserTree;

    }
    public TreeViewItemViewModel TVViewModel
    {
        get { return mViewModelPFObjBrowserTree; }
    }

    private void OnRightButtonDown(object sender, MouseButtonEventArgs e)
    {
        //MessageBox.Show("Right Clicked on tree view");
        if (sender is TreeViewItem)
        {
            e.Handled = true;
            (sender as TreeViewItem).IsSelected = true;

            string strObjectType = ((sender as TreeViewItem).Header as PFObjectViewModel).PFDataObject.mThisPFObject.GetClassName().GetString();
            switch (strObjectType)
            {
                case "IntPrj":
                    (sender as TreeViewItem).ContextMenu = PFDataBrowser.Resources["ProjectMenu"] as System.Windows.Controls.ContextMenu;
                    (sender as TreeViewItem).ContextMenu.PlacementTarget = (sender as TreeViewItem); 
                    break;
                case "Folder":
                    (sender as TreeViewItem).ContextMenu = PFDataBrowser.Resources["ProjectMenu"] as System.Windows.Controls.ContextMenu;
                    break;
            }

        }
    }
} 
```

}

树视图模型类

```
using System;
namespace BFSimMaster.ViewModel
{

public class TreeViewItemViewModel 
{
    #region Data

    readonly ReadOnlyCollection<PFObjectViewModel> mLevelOnePFObjects;
    readonly PFObjectViewModel mRootOfPFObjects;

    #endregion // Data

    #region Constructor

    public TreeViewItemViewModel(BFPFDataObject rootOfPFObjectsA)
    {
        this.CMDActivateProject = new ActivateProjectCmd();
        this.CMDDeActivateProject = new DeActivateProjectCmd();
        mRootOfPFObjects = new PFObjectViewModel(rootOfPFObjectsA);

        mLevelOnePFObjects = new ReadOnlyCollection<PFObjectViewModel>(
            new PFObjectViewModel[] 
            { 
                mRootOfPFObjects 
            });            
    }

    #endregion // Constructor
    public ICommand CMDActivateProject { get; set; }
    public ICommand CMDDeActivateProject { get; set; }

    public ReadOnlyCollection<PFObjectViewModel> LevelOnePFObjects
    {
        get { return mLevelOnePFObjects; }
    }       

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:38:06.247

我通过为 MenuItem 引入 VM 类并设置带有`ExtendedContextMenu.Items={Binding ContextMenu}`附加属性的上下文菜单解决了这个问题。MenuResourcesDictionary 是带有背面 .cs 文件的 ResourceDictionary.xaml（如下所示）。

要将它用于您的代码，您需要`IEnumerable<MenuItemVM> ContextMenu`在树模型上添加属性并将命令放在那里（例如将它们传递给`MenuItemVM`构造函数）。并在项目样式中添加`<Setter Property="ExtendedContextMenu.Items" Value="{Binding DataContext.ContextMenu}" />`

```
public static class ExtendedContextMenu
{
    private static readonly StyleSelector _styleSelector = new ContextMenuItemStyleSelector();

    public static readonly DependencyProperty ItemsProperty =
        DependencyProperty.RegisterAttached("Items",
                                            typeof(IEnumerable<MenuItemVM>),
                                            typeof(ExtendedContextMenu),
                                            new FrameworkPropertyMetadata(default(IEnumerable<MenuItemVM>), ItemsChanged));

    public static void SetItems(DependencyObject element, IEnumerable<MenuItemVM> value)
    {
        element.SetValue(ItemsProperty, value);
    }

    public static IEnumerable<MenuItemVM> GetItems(DependencyObject element)
    {
        return (IEnumerable<MenuItemVM>)element.GetValue(ItemsProperty);
    }

    private static void ItemsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var target = (FrameworkElement)d;

        var items = (IEnumerable<MenuItemVM>)e.NewValue;
        var contextMenu = new ContextMenu();

        contextMenu.ItemContainerStyleSelector = _styleSelector;
        contextMenu.ItemsSource = items;

        return contextMenu;
    }

    private static void AdjustContextMenuVisibility(ContextMenu menu)
    {
        menu.Visibility = menu.HasItems ? Visibility.Visible : Visibility.Hidden;
    }
}

public class ContextMenuItemStyleSelector : StyleSelector
{
    private static readonly MenuResourcesDictionary _resources = new MenuResourcesDictionary();
    private static readonly Style _menuItemStyle = (Style)_resources[MenuResourcesDictionary.MenuItemStyleResourceKey];
    private static readonly Style _separatorStyle = (Style)_resources[MenuResourcesDictionary.SeparatorStyleResourceKey];

    public override Style SelectStyle(object item, DependencyObject container)
    {
        if (item == MenuItemVM.Separator)
            return _separatorStyle;

        return _menuItemStyle;
    }
}

public sealed partial class MenuResourcesDictionary
{
    public const string MenuItemStyleResourceKey = "MenuItemStyleResourceKey";
    public const string DynamicMenuItemStyleResourceKey = "DynamicMenuItemStyleResourceKey";
    public const string SeparatorStyleResourceKey = "SeparatorStyleResourceKey";
    public const string LoadingStyleResourceKey = "LoadingMenuItemStyleResourceKey";

    public MenuResourcesDictionary()
    {
        InitializeComponent();
    }
} 
```

这是 XAML 样式：

```
<Style x:Key="{x:Static local:MenuResourcesDictionary.MenuItemStyleResourceKey}">
  <Setter Property="MenuItem.Header" Value="{Binding Path=(menuVMs:MenuItemVM.Text)}" />
  <Setter Property="MenuItem.Command" Value="{Binding Path=(menuVMs:MenuItemVM.Command)}" />
</Style>

<Style x:Key="{x:Static local:MenuResourcesDictionary.SeparatorStyleResourceKey}" TargetType="{x:Type MenuItem}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate>
        <Separator />
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

MenuItemVM 类或多或少是直截了当的，所以我不在这里写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:24:32.570

A`ContextMenu`不是逻辑树的一部分，所以这个绑定`"{Binding DataContext.CMDActivateProject, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"`不起作用，因为它根本没有 UserControl 类型的祖先。如果您没有手动设置 PlacementTarget 的 DataContext，您可以尝试

```
"{Binding PlacementTarget.DataContext.CMDActivateProject, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}}" 
```

我不能 100% 确定以下内容，但我认为如果您使用 ContextMenu 属性，这将起作用：

```
<Treeview>
    <Treeview.ContextMenu>
        <ContextMenu>
            ...
        <ContextMenu>
    <Treeview.ContextMenu>
    ... 
```

这里的冒险是，您不必在代码隐藏中处理 rightbuttondown 事件，如果您右键单击树视图，它会自动打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T16:57:42.033

我在这里找到了带有和不带有 DataTemplate 的 TreeView 上下文菜单的答案： [TreeView ContextMenu MVVM Binding](https://stackoverflow.com/questions/4584937/treeview-contextmenu-mvvm-binding) [MVVM binding command to contextmenu item](https://stackoverflow.com/questions/9994241/mvvm-binding-command-to-contextmenu-item)

# ms-access - Access 2007：我可以在查询条件中使用 Format() 吗？

> ID：13847645
> 
> 赞同：0
> 
> 时间：2012-12-12T20:02:11.880
> 
> 标签：ms-access, ms-access-2007, criteria

似乎我总是在尝试做不可能的事情。好吧，我有以下格式的 [月/日] 表设置：

```
Noombers | Lemmas
-----------------
0101     | Jan 1
0102     | Jan 2
...      | ...
1230     | Dec 30
1231     | Dec 31 
```

我有一个 [Publication Venues] 表，其中包含 [Reads From] 和 [Reads To] 字段，它们利用这个 [month/day] 表，当我输入信息时，我只需输入“Sep 1”并点击标签，它用“0901”填充字段（在背景中）。这是一个文本字段，因为我想按字母数字排序，而且我还想做一个字母数字比较。我想我可以在我为显示当前正在阅读的出版地点列表而创建的查询的标准中做这样的事情：

```
Field:       Reads From              | Reads To
Table:       Publication Venues      | Publication Venues
Sort:       
Show:    
Criteria:    >Format(Date(),"mmdd")  | <Format(Date(),"mmdd") 
```

但是，虽然我没有看到任何错误，但我也没有看到*应该*显示的记录。事实上，我没有看到任何记录。

那么，在这一点上假设我不能在查询的条件中使用 Format() 对我来说是否安全？如果是这样，那么我设置此过滤器的另一种方法是什么？最好使用我已经得到的表格，因为我已经输入了数百条记录。如果我可以使用 Format()，那么你认为我做错了什么？

这是SQL：

```
SELECT
    [Publication Venues].*
FROM
    [Publication Venues]
WHERE
    ((([Publication Venues].[Still Active?])=Yes)
  AND
    (([Publication Venues].[Reads From])<Format(Date(),"mmdd"))
  AND
    (([Publication Venues].[Reads To])>Format(Date(),"mmdd"))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:33:52.047

您看不到任何错误，因为您所做的不会导致任何错误。但是，它不能按您预期的那样工作。

如果您将日期描述为 4 个数字，Access 天生就不知道如何解释。例如，1231 转换为日期，即 1903 年 5 月 15 日。

要使用您正在使用的格式，您需要做`>Format(Date()-40043,"mmdd")`并`<Format(Date()-40043,"mmdd")`弥补差异。

您更有可能希望将 4 位数字转换为如下日期：

`Cdate(Left$([Reads From],2) & "/" & Right$([Reads From],2) & "/" & Year(Date()))>Date()`

长话短说，如果要将日期用作日期，则应将日期存储为日期。否则，您必须跳过一些障碍，以便您的前端知道您正在处理日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:51:54.877

结果证明这是解决方案，至少对于我的大脑工作方式而言：

```
SELECT [Publication Venues].*
FROM [Publication Venues]
WHERE
   ((([Publication Venues].[Still Active?])=Yes)
AND
   (((([Publication Venues].[Reads From]) < ([Publication Venues].[Reads To]))
   AND
   (Format(Date(), "mmdd") BETWEEN ([Publication Venues].[Reads From]) AND ([Publication Venues].[Reads To])))
OR
   ((([Publication Venues].[Reads From]) > ([Publication Venues].[Reads To]))
   AND
   (Format(Date(), "mmdd") NOT BETWEEN ([Publication Venues].[Reads From]) AND ([Publication Venues].[Reads To]))))
); 
```

我感谢你的帮助，人们。您的反馈确实使我的思想朝着引导我找到解决方案的方向前进。

# bash - 如何在 2 个条件下删除 bash（awk）中的一行

> ID：13847650
> 
> 赞同：3
> 
> 时间：2012-12-12T20:02:32.183
> 
> 标签：bash, awk

我有以下问题：我有一个文件，如：

```
1 3 4
2 5 6
3 1 3
4 1 0
5 7 0
6 0 1 
```

我想删除包含在第二列 1 和第三列中的数字 0 的行。所以结果应该是：

```
1 3 4
2 5 6
3 1 3
5 7 0
6 0 1 
```

我试过：`awk '$2!=1 && $3 != 0' file`

但它也会删除以下行：'5 7 0' 和 '3 1 3'

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:05:07.710

你要：

```
awk '!( $2==1 && $3 == 0)' file 
```

或者，等效地：

```
awk '$2 != 1 || $3' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:05:01.363

您正在寻找 的否定`$2 == 1 && $3 == 0`。根据逻辑规则，那是

```
awk '$2 != 1 || $3 != 0' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T20:05:14.123

这将确保：

```
 awk '!($2==1 && $3==0){print}' file 
```

即打印除第 2 列为 1 和第 3 列为 0 之外的所有行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:14:49.177

试试这个

```
awk '$2$3!="10"' file
```

干杯!

# c# - 与旋转矩形碰撞

> ID：13847651
> 
> 赞同：0
> 
> 时间：2012-12-12T20:02:41.540
> 
> 标签：c#, xna, collision-detection, rectangles

所以基本上，我正在做我的第一个 xna 游戏，它是一款打砖块游戏。我现在的球是一个可以旋转的正方形。

不幸的是，无法正确检测 xna 中旋转矩形的碰撞。

我发现了关于标量的东西，但我只在大学学习计算机科学，所以我不知道这些大数学......

谁能指导我以正确的方式检测这种碰撞？或者至少能够以正确的方式获得一个新的矩形，以便我可以检测到这个矩形上的碰撞？

**编辑** 我只是想把我的旋转正方形变成一个静止的正方形并测试与外部正方形的碰撞是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:27:43.027

如果要检测方形球与外部矩形的碰撞，则需要知道球的四个角的坐标。然后只需将这些点与外部矩形进行比较。

If`s`是矩形的边长。角可以这样计算：

```
double h = 0.707106781 * s; // Half diagonal
double angle = rotation_angle + 0.25 * Math.PI; // 0.25 * Math.PI = 45 degrees
                                                // inclination of the diagonal.
double x = h * Math.Cos(angle);
double y = h * Math.Sin(angle);

// The four points are
p1x = +x + squareCenterX;
p1y = +y + squareCenterY;

p2x = -y + squareCenterX;
p2y = +x + squareCenterY;

p3x = -x + squareCenterX;
p3y = -y + squareCenterY;

p4x = +y + squareCenterX;
p4y = -x + squareCenterY; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:04:31.343

你真的希望你的球是正方形的吗？或者一个简单的圆圈可以吗？

您可以改用碰撞圆，碰撞背后的逻辑比旋转的正方形要简单得多...（如果您真的想要正方形和像素完美的碰撞，请忽略此答案并查看 Terrance 的评论）

```
if(circle.Center.X - circle.Radius < ScreenBounds.XMin || 
    circle.Center.X + circle.Radius > ScreenBounds.XMax ||
    circle.Center.Y - circle.Radius < ScreenBounds.YMin || 
    circle.Center.Y + circle.Radius > ScreenBounds.YMax)
{
     //Ball is partly or entirely outside of the screen
} 
```

这并不是您问题的直接答案，而是更多的选择

**编辑：**此代码假定您的球的位置是相对于其中心的。

此外，您*可以*近似旋转正方形与碰撞圆（或事实上的非旋转正方形）的碰撞。碰撞不会是完美的像素，但我认为这几乎不会引起注意。它也将更容易实现（考虑到这是您的第一个游戏）。

# javascript - 如何将 onscroll 事件添加到 JavaScript InfoVis StackArea 图表

> ID：13847654
> 
> 赞同：1
> 
> 时间：2012-12-12T20:02:42.743
> 
> 标签：javascript, scrollbar, infovis

我似乎在向我的 JavaScript 图表添加滚动条时遇到了麻烦。问题是我的图表

infovis 是 2400 像素，而 frame 是 800。但是，每当我向右滚动时，光标就会错位并出现拖尾（好像 x 和 y 坐标已经混淆了）。

为了给你一个更好的主意，这里是图表的链接。

[http://philogb.github.com/jit/static/v20/Jit/Examples/AreaChart/example1.html](http://philogb.github.com/jit/static/v20/Jit/Examples/AreaChart/example1.html)

我的问题是：我怎样才能最好地纠正这个问题？应该在 html div 或 css 或 .js 文件中调用 onscroll 吗？另外，我对选定的 div 使用什么？它是包含可视化的中心容器、整个窗口还是#vis（可视化本身）。我在下面附上了一个屏幕截图以进行澄清。

由于图表的动画和向下钻取功能，此问题会导致图表无法使用。任何帮助或指导将不胜感激。

此外，这里是一个基于开源 API 的链接：http: [//philogb.github.com/jit/demos.html](http://philogb.github.com/jit/demos.html)

不幸的是，该网站不允许我发布屏幕截图。

# .net - 如何在 Prism 框架中刷新数据

> ID：13847658
> 
> 赞同：0
> 
> 时间：2012-12-12T20:03:05.697
> 
> 标签：.net, wpf, mvvm, prism, design-patterns

我正在重写一个基于 Prism 的应用程序。它基于 WAF，并使用实体框架通过工作单元/存储库模式访问数据。

我打算使用事件聚合器来通知我的视图模型何时有新的工作单元可用（例如，在保存之后）。然后，他们可以用来自新工作单元的新等价物替换他们正在呈现的模型对象。

1.) 这是一个合理的想法吗？我还能如何通知我的视图模型它们正在显示过时的信息？

我只想让可见的视图模型重新查询数据库。当前未显示的 ViewModel 可以延迟刷新，直到它们显示（我打算使用 INavigationAware 界面执行此操作）。

2.) 同样，这是一种合理的方式吗？如何区分当前对用户可见的视图模型和不可见的视图模型？

作为 2.) 的替代解决方案，我正在考虑仅在需要时创建视图，并在它们被隐藏时立即销毁它们。这将解决“哪些视图模型可见”的问题，但似乎非常昂贵。

3.) Prism 是否打算以这种方式使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:22:06.377

> 1.) 这是一个合理的想法吗？我还能如何通知我的视图模型它们正在显示过时的信息？

这归结为处理需要*保存*或需要*刷新*的脏数据。解决此问题的一种方法是 ViewModel 从服务中提取其数据，这将允许数据按需刷新。

> 2.) 同样，这是一种合理的方式吗？如何区分当前对用户可见的视图模型和不可见的视图模型？

如果您还打算通过 CI 来利用 IoC 和 DI，则 ViewModel 应该根据需要存在，并在构建时在运行时注入到 View 中。要管理数据的状态和持久性，您应该为此利用服务。

> 3.) Prism 是否打算以这种方式使用？

棱镜是服务的自助餐；棱镜不是单一的产品。`EventAggregator`用于跨模块通信。如果您的通信跨越模块，是的，这将很好地使用。如果通信是内部的，简单的事件就足够了。

可见的概念将取决于您的应用程序。`IActiveAware`只是一个接口，而不是实现。如果您的应用程序以表格方式构建，`IActiveAware`那么在该环境中会很好地服务。同样，实现细节对于您如何使用接口很重要，但由应用程序结构驱动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:15:57.260

啊，对不起-我想我已经找到了我问题的大部分答案。

我不知道 IActiveAware 接口 (http://compositewpf.codeplex.com/discussions/277463)，它似乎很好地解决了确定哪些视图模型可见的问题。

我仍然对如何通知他们有可用的新数据感兴趣，但如果问题没有足够的剩余空间并且需要删除，我会理解。

# css - CSS 不适用于 Internet Explorer

> ID：13847661
> 
> 赞同：-3
> 
> 时间：2012-12-12T20:03:21.100
> 
> 标签：css, internet-explorer, incompatibility

我正在为客户制作网站，但由于某种原因 Internet Explorer 不接受标记。它应该看起来像这样：![铬/火狐](../Images/5938c795f1855390406b5bdd1ae5dd4d.png)

它在 chrome/firefox 上执行，但在所有版本的 Internet Explorer 上显示如下： ![IE浏览器](../Images/4804c316e7b7f17abfa0f354cac5c3a0.png)

您可以在这里查看 CSS：http: [//infinity4life.nl/](http://infinity4life.nl/) 我希望你们中的一些人可以帮助我，我提前谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:14:33.090

对于 sidebar `ul.li`，添加以下属性：

```
ul.menu li {
    float: left; /*new*/
    margin: 0;
    width: 100%; /*new*/
} 
```

对于标题文本，首先删除所有空格。按空间控制定位不是正确的做法。然后用`text-align: center`它在中间制作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:58:18.420

我找到了解决主要问题的方法。在我使用的 div 末尾的 html 中

```
 </div><!-- end of div--> 
```

Internet explorer 没看懂，只好加个空格：

```
 </div> <!-- end of div--> 
```

这基本上毁了所有的 CSS，因为它会继承它不应该继承的样式。感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:08:44.537

`font-size:1em`从你的删除`#header FORM .inputbox`似乎修复了 IE 中巨大的输入字段问题。

# php - WSO2 WSF PHP - WSClientProxy->__call 不返回大响应

> ID：13847662
> 
> 赞同：6
> 
> 时间：2012-12-12T20:03:24.273
> 
> 标签：php, wso2, wsh

我一直在尝试在 WSDL 模式下使用 WSClient 来使用服务，但响应始终是一个带有空字符串的数组。

我正在使用 WSO2 WSF for PHP（WSO2 Web Services Framework for PHP），我的 PHP 版本是 5.3。

我认为问题可能是响应的大小（我知道它很大）。有办法定义 maxReceivedMessageSize 和 maxStringContentLength 吗？

我应该怎么办？有一个“WSO2 WSF for PHP”替代库吗？

**代码：**

```
function getCatalog($options, $input)
{   
        $client = new WSClient($options);

        // get proxy object reference form client
        $proxy = $client->getProxy();

        //return $proxy->BuscaCatalogo($input);
        var_dump($proxy->BuscaCatalogo($input));
} 
```

**输出：**

```
array(1) {
  ["BuscaCatalogoResult"]=>  string(0) ""
} 
```

**日志消息：** [Thu Dec 13 11:00:59 2012] [error] soap_builder.c(329) 构建节点时发生错误

-- 已解决这个话题有点老了，但这里是 WSO2 的替代方案，[https://code.google.com/p/wse-php/source/browse/examples/soap-wsa-example.php?](https://code.google.com/p/wse-php/source/browse/examples/soap-wsa-example.php?r=407b920367574e85f1302a76ec5a2991b746d79c) r=407b920367574e85f1302a76ec5a2991b746d79c .

**OBS：我是一名 PHP 开发人员**

# sql - 如何在单个查询中使用多个 rank()？

> ID：13847666
> 
> 赞同：0
> 
> 时间：2012-12-12T20:03:51.473
> 
> 标签：sql, oracle11g

**Oracle 11g** 如何编写查询以获得所需的结果？具体来说，如何加入**REQUIREMENTS**表中的最新记录？

选择标准：最近的细节和最近的要求

```
 with 
 detail as (
 select 'TAXI' code, '4920' numb, 1990 dstart, 'BLUE' taxi_name from dual union all
 select 'TAXI' code, '4920' numb, 2000 dstart, 'PINK' taxi_name from dual union all
 select 'TAXI' code, '4920' numb, 2008 dstart, 'CYAN' taxi_name from dual),

 requirement  as (
select 'TAXI' code, '4920' numb,  2 seqno, 2000 rstart,  25,min_age,'CDL',permit from dual union all
select 'TAXI' code, '4920' numb,  4 seqno, 2000 rstart, 27 min_age, 'CAR' permit from dual union all
select 'TAXI' code, '4920' numb,  6 seqno, 2000 rstart, 29 min_age, 'HAZ' permit from dual union all
select 'TAXI' code, '4920' numb,  2 seqno, 2007 rstart, 24 min_age, 'CDL' permit from dual union all
select 'TAXI' code, '4920' numb,  4 seqno, 2007 rstart, 26 min_age, 'VAN' permit from dual union all
select 'TAXI' code, '4920' numb,  6 seqno, 2007 rstart, 28 min_age, 'HAZ' permit from dual 
```

)

```
select code,numb,taxi_name, dstart, ranking from (
select code, numb, taxi_name,dstart, rank() over (partition by code, numb 
                                            order by dstart desc ) ranking
from detail)
where ranking =1 
```

产量

```
CODE NUMB  NAME  YEAR    
---- ---- -----  ------- 
TAXI 4920 CYAN   2008 

DESIRED OUTPUT
--------------------------
 code numb name        dstart     sqno    rstart   min_age permit
 TAXI 4920 CYAN       2008       2         2007    24      CDL
 TAXI 4920 CYAN       2008       4         2007    26      VAN
 TAXI 4920 CYAN       2008       6         2007    28      HAZ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:14:16.727

嗯，你基本上有这个想法。您只需要将其应用于两个表：

```
select code,numb,taxi_name, dstart, ranking
from (select code, numb, taxi_name,dstart,
             rank() over (partition by code, numb order by dstart desc) as ranking
      from detail
     ) d join
     (select r.*,
             rank() over (partition by code, numb order by rstart desc) as ranking
      from requirement
     ) r
     on d.code = r.code and
        d.ranking = 1 and
        r.ranking = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:17:35.627

您的完整查询可能是这样的：

```
 with detail as 
 (
     select 'TAXI' code, '4920' numb, 1990 dstart, 'BLUE' taxi_name from dual union all
     select 'TAXI' code, '4920' numb, 2000 dstart, 'PINK' taxi_name from dual union all
     select 'TAXI' code, '4920' numb, 2008 dstart, 'CYAN' taxi_name from dual
 ),
 requirement  as 
 (
    select 'TAXI' code, '4920' numb,  2 seqno, 2000 rstart,  25 min_age,'CDL' permit from dual union all
    select 'TAXI' code, '4920' numb,  4 seqno, 2000 rstart, 27 min_age, 'CAR' permit from dual union all
    select 'TAXI' code, '4920' numb,  6 seqno, 2000 rstart, 29 min_age, 'HAZ' permit from dual union all
    select 'TAXI' code, '4920' numb,  2 seqno, 2007 rstart, 24 min_age, 'CDL' permit from dual union all
    select 'TAXI' code, '4920' numb,  4 seqno, 2007 rstart, 26 min_age, 'VAN' permit from dual union all
    select 'TAXI' code, '4920' numb,  6 seqno, 2007 rstart, 28 min_age, 'HAZ' permit from dual
)
select code,numb,taxi_name, dstart, seqno, rstart, min_age, permit
from 
(
    select d.code, d.numb, d.taxi_name, d.dstart, rank() over (partition by d.code, d.numb order by d.dstart desc ) ranking,
        seqno, rstart, min_age, permit
    from detail d
    inner join
    (
        select code, numb, seqno, rstart, min_age, permit,
            rank() over (partition by code, numb order by rstart desc ) ranking
        from requirement
     )  r
        on d.code = r.code
        and d.numb = r.numb
        and r.ranking = 1
)
where ranking =1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/d41d8/5184)

结果是：

```
| CODE | NUMB | TAXI_NAME | DSTART | SEQNO | RSTART | MIN_AGE | PERMIT |
------------------------------------------------------------------------
| TAXI | 4920 |      CYAN |   2008 |     2 |   2007 |      24 |    CDL |
| TAXI | 4920 |      CYAN |   2008 |     4 |   2007 |      26 |    VAN |
| TAXI | 4920 |      CYAN |   2008 |     6 |   2007 |      28 |    HAZ | 
```

# c# - File.Move 进度条

> ID：13847669
> 
> 赞同：0
> 
> 时间：2012-12-12T20:04:12.187
> 
> 标签：c#, file-io

我有一个用户正在使用的程序，该程序将从他们的系统中获取一个文件并将其移动到网络驱动器以便进行处理和存储。移动本身运行良好，一切正常，除非他们正在移动一个大文件并且由于某种原因提前关闭程序并停止该过程。

我用来移动文件的代码是

```
try { File.Move(docFilepath, docFilePathTo); }
catch (Exception ex)
{
    docName = config.autoRename(docName + docExt.ToUpper()).Split('.')[0];
    File.Move(docFilepath, frmMain.Scans2LF + docName + docExt.ToUpper());
} 
```

这再次工作正常。我想知道当他们的文件实际上完全位于新位置时，是否有可能向用户显示进度条。

我查找了几个与此有半相关性的问题，但没有任何适合我情况的答案。更改用于移动文件的系统对我来说不是一个选项，所以我一直在努力寻找完成进度或完成的方法。

***编辑***

我可能会考虑改变文件的移动方式，主要问题是解释它，以便我的老板不会认为改变有效的东西是一个坏主意（如果人们不关闭程序......）

***结束编辑***

我想在其位置使用新文件的查找，其大小目前作为进度表，但不确定这是否可行。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:12:10.980

如果您想使用 Windows 文件进度对话框，只需添加`Microsoft.VisualBasic`作为参考并从那里使用 FileMove

```
Microsoft.VisualBasic.FileIO.FileSystem.MoveFile("sorceFile.ext", "destFile.ext", Microsoft.VisualBasic.FileIO.UIOption.AllDialogs); 
```

这将显示与 widnows 相同的对话框，包括取消选项等（如果需要）。

# ios - [NSURL initFileURLWithPath:]: 带有 ARC 的 nil 字符串参数

> ID：13847670
> 
> 赞同：0
> 
> 时间：2012-12-12T20:04:16.833
> 
> 标签：ios

我遇到了麻烦

> NSInvalidArgumentException 尝试使用 AudioFileCreateWithURL 时出现 nil 字符串参数

问题是，fileURL 打印`NSLog`正确。我相信这是正确的格式：

> 文件：//localhost/Users/me/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/1A617C0D-90CC-465C-9108-ECBCF85F075C/Documents/recording.wav

我猜 __bridge 转换可能会导致问题。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString* docDir = [paths objectAtIndex:0];
    NSString* file = [docDir stringByAppendingString:@"/recording.wav"];
    NSURL *fileURL = [NSURL fileURLWithPath:file];
    NSLog(@"%@", fileURL);
    OSStatus audioErr = noErr;
    audioErr = AudioFileCreateWithURL( (__bridge CFURLRef)fileURL, kAudioFileWAVEType, &asbd, kAudioFileFlags_EraseFile, &audioFile); 
```

我正在使用 ARC。我也试过这个：

```
audioErr = AudioFileCreateWithURL( (CFURLRef)CFBridgingRetain(fileURL), kAudioFileWAVEType, &asbd, kAudioFileFlags_EraseFile, &audioFile); 
```

它导致了同样的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:29:18.803

你看过[http://lists.apple.com/archives/coreaudio-api/2010/Aug/msg00210.html](http://lists.apple.com/archives/coreaudio-api/2010/Aug/msg00210.html)吗？他们过去常常`CFStringRef`让它工作。

```
// We have to encode spaces before sending it to CFURLCreateWithString. See CFURLCreateWithString returns NULL article http://markmail.org/message/5ugub2dvdaausdvf
    CFStringRef fileName = (CFStringRef) recordedFile; 
    CFStringRef fileNameEscaped = CFURLCreateStringByAddingPercentEscapes(NULL, fileName, NULL, NULL, kCFStringEncodingUTF8); 

    // Create the URL
    self.url = "" (CFStringRef)fileNameEscaped, NULL);    
    CHECK_NIL(url);

    // Create audio file
    OSStatus status = AudioFileCreateWithURL(url, kAudioFileWAVEType, &format, kAudioFileFlags_EraseFile, &audioFile);
    NSAssert(status == noErr, @"AudioFileCreateWithURL fails"); 
```

# facebook - FQL：选择朋友的照片

> ID：13847681
> 
> 赞同：3
> 
> 时间：2012-12-12T20:05:00.810
> 
> 标签：facebook, facebook-fql, fql.multiquery

此 FQL 试图为我的朋友获取照片

[1]

```
{"query1":"SELECT owner, object_id, src_big FROM photo
WHERE owner IN (SELECT uid2 FROM friend WHERE uid1=me())"} 
```

思考几秒钟后提供此错误响应...

```
{"error_code":1,"error_msg":"An unknown error occurred"} 
```

但是这个为我的朋友获取专辑的查询将起作用并返回专辑信息的 JSON 对象

[2]

```
{"query1":"SELECT aid, owner, name FROM album
WHERE owner IN (SELECT uid2 FROM friend WHERE uid1=me())"} 
```

为什么 [2] 有效但 [1] 无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:30:28.957

确实，这很奇怪。但是这个做你想要的：

```
SELECT owner, object_id, src_big 
FROM photo WHERE aid IN (
     SELECT aid FROM album WHERE owner in (
          SELECT uid2 FROM friend WHERE uid1=me()
     )
) 
```

享受分页带来的乐趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T22:38:12.637

查询`[1]`返回所有照片对象，而查询`[2]`返回相册对象。照片的数量大多数时候会远大于相册的数量。因此，如果每个朋友有 10 个相册，每个相册有 100 张照片，则查询大小会增加，并且由于 FQL 不使用任何形式的分页，因此您会一次全部提取。

考虑将来使用多查询或使用 LIMITS 批处理

# php - 在 If 语句后添加 php 代码

> ID：13847685
> 
> 赞同：0
> 
> 时间：2012-12-12T20:05:05.060
> 
> 标签：php, mysql, database

我是 PHP 新手，我正在开发一个随机数游戏。如果用户猜对了数字，他就会得到一分。但是，我无法向用户说明这一点。这是我的游戏代码：

```
:<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>result</title>
        <link href="style.css" rel="stylesheet" type="text/css" />
    </head>

    <body>
        <div id="main"></div>

        <div id="enterNumber">

            <?php
            $number_actual = rand(1, 20);
            $number_guess = $_REQUEST["inputnumber"];
            echo "You chose: " . $number_guess . "<br />";
            echo "The random number is: " . $number_actual . "<br />";
            if ($number_guess == $number_actual)
                echo "You guessed <b>Correctly!</b>";

            elseif ($number_guess < $number_actual)
            {
                echo "You are too <b>Low</b>!";
                echo "<br />";
                echo "<br />";
                echo "Try guessing again...";
                echo "<form>
                        <input type='text' name='inputnumber' />
                        <input type='submit' value='Guess' />
                    </form>";
            }
            elseif ($number_guess > $number_actual)
            {
                echo "You are too <b>High</b>!";
                echo "<br />";
                echo "<br />";
                echo "Try guessing again...";
                echo "<form>
                        <input type='text' name='inputnumber' />
                        <input type='submit' value='Guess' />
                    </form>";
            }
            ?>
        </div>

    </body>
</html> 
```

这是给用户一个点的代码，但我在将它们加在一起时遇到了问题！

```
$query = mysql_query("SELECT * FROM quiz WHERE username='$username'");

$insert = "UPDATE `users` SET `points` = (`points` + 1) WHERE `username` = '".$username."'";

mysql_query($insert); 

header('location: succes.php');
}
}
?> 
```

当我尝试添加它们时，我是这样做的：

```
<?php

$number_actual = rand(1, 20);
$number_guess = $_REQUEST["inputnumber"];
echo "You chose: " . $number_guess . "<br />";
echo "The random number is: " . $number_actual . "<br />";
if ($number_guess == $number_actual)
    $query = mysql_query("SELECT * FROM quiz WHERE username='$username'");

$insert = "UPDATE `users` SET `points` = (`points` + 1) WHERE `username` = '" . $username . "'";

mysql_query($insert);

header('location: succes.php');
}

echo "You guessed <b>Correctly!</b>";

elseif ($number_guess<$number_actual)
{
echo "You are too <b>Low</b>!";
echo "<br />";
echo "<br />";
echo "Try guessing again...";
echo "<form>
            <input type='text' name='inputnumber' />
            <input type='submit' value='Guess' />
        </form>";
}
elseif ($number_guess>$number_actual)
{
    echo "You are too <b>High</b>!";
    echo "<br />";
    echo "<br />";
    echo "Try guessing again...";
    echo "<form>
            <input type='text' name='inputnumber' />
            <input type='submit' value='Guess' />
        </form>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:09:47.240

你把`echo "You guessed <b>Correctly!</b>";`if 和 elseif 放在了中间。应该：

```
<?php
                $number_actual = rand (1,20);
                $number_guess = $_REQUEST["inputnumber"];
                echo "You chose: " . $number_guess . "<br />";
                        echo "The random number is: " . $number_actual . "<br />";
                                if ($number_guess==$number_actual) { // you forgot this curly brace
                                   $query = mysql_query("SELECT * FROM quiz WHERE username='$username'");

    $insert = "UPDATE `users` SET `points` = (`points` + 1) WHERE `username` = '".$username."'";

     mysql_query($insert); 

    echo "You guessed <b>Correctly!</b>"; // this was placed inbetween the if and the elseif

    header('location: succes.php');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:12:47.540

`unbalanced`由于} auto-indent` 您的代码存在编译问题``. Always try to indent your code. Depending on the IDE you are using you can`（顺便说一句，我使用的是 TextMate）：

```
header('location: succes.php');
} 
```

`}`不需要，所以很可能你忘记了，所以你的`{`代码可能是这样的：

```
if ($number_guess==$number_actual) {
    $query = mysql_query("SELECT * FROM quiz WHERE username='$username'");

    $insert = "UPDATE `users` SET `points` = (`points` + 1) WHERE `username` = '".$username."'";

    mysql_query($insert); 
    header('location: succes.php');
    echo "You guessed <b>Correctly!</b>";
} else {
    echo "Sorry, you wrong!</b>";
} 
```

一旦你尝试缩进你的代码，你自己就会发现很多问题。并且请不要将用户输入的数据直接传递给 MySQL，否则您可能会成为`SQL INJECTION`. 因此，请像这样重写您的查询：

```
 $query = mysql_query("SELECT * FROM quiz WHERE username='".mysql_real_escape_string($username)."'");

    $insert = "UPDATE `users` SET `points` = (`points` + 1) WHERE `username` = '".mysql_real_escape_string($username)."'"; 
```

# database - 如何让 SQLite 3 处理来自 URI 数据库的内存模式？

> ID：13847686
> 
> 赞同：2
> 
> 时间：2012-12-12T20:05:04.763
> 
> 标签：database, memory, sqlite, uri, in-memory-database

我想通过将 URI 传递给 SQLite 来创建一个共享的内存数据库`file:memdb1?mode=memory&cache=shared`。

以下代码看起来很简单，可以完成工作：

```
#include <iostream>
#include <sqlite3.h>

void main()
{
  sqlite3 * db;
  int flags = SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE | SQLITE_OPEN_URI;
  int returnCode = sqlite3_open_v2("file:memdb1?mode=memory&cache=shared", &db, flags, NULL);

  if (returnCode == SQLITE_OK)
    std::cout << "Success!" << std::endl;
  else
    std::cout << "Error: " << sqlite3_errmsg(db) << std::endl;

  if (db) sqlite3_close(db);
} 
```

然后我像这样编译它：

```
$ g++ sample.cpp -lsqlite3 
```

这就是我得到的：

```
$ ./a.out
Error: no such access mode: memory 
```

我已经尝试了许多不同的配置`flags`（其中一些包括`SQLITE_OPEN_MEMORY`），但我无法让这个简单的程序运行。我已经在 Windows（使用 SQLite 3.7.15 的自定义构建）和 Ubuntu（使用默认`apt-get`包，版本 3.7.9）上尝试了它，但没有成功。

有没有人遇到过这个并找到了解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:27:02.160

原来我使用了错误版本的 SQLite。SQLite 在 3.7.13 版之前不支持共享缓存（请参阅[更改日志](http://www.sqlite.org/changes.html#version_3_7_13)）。

# python - 在 Python 中转换为 XML 时从 CSV 数据中剥离标题

> ID：13847687
> 
> 赞同：0
> 
> 时间：2012-12-12T20:05:06.323
> 
> 标签：python, csv, elementtree

我正在学习如何使用 ElementTree 和 minidom 解析 CSV 文件并将数据格式化为 XML 文件（用于漂亮的打印）。我已经如此接近了，但遇到了一个小障碍，我似乎无法绕开我的头。我有以下代码：

```
for csvFile in directory:
    root = Element('Order')
    with open(csvFile, 'rt') as f:
        reader = csv.reader(f)
        for row in reader:
            queue = row[0]
            token = row[1]
            current_order = SubElement(root, 'Token', {'text':token})
            details = SubElement(current_order, 'Queue',
                                 {'queue':queue})

    print prettify(root) 
```

这会产生以下 XML：

```
<?xml version="1.0" ?>
<Order>
  <Token text="token">
    <Queue queue="site_code"/>
  </Token>
  <Token text="H54FC9">
    <Queue queue="Duplex_N-up"/>
  </Token>
</Order> 
```

如何从 CSV 输入中去除标题，使 XML 看起来像这样：

```
<?xml version="1.0" ?>
<Order>
  <Token text="H54FC9">
    <Queue queue="Duplex_N-up"/>
  </Token>
</Order> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:09:27.037

您是否要丢弃 csv 文件中的第一行？如果是这样，你可以很容易地做到这一点：

```
for csvFile in directory:
    root = Element('Order')
    with open(csvFile, 'rt') as f:
        junk = next(f)         #read the first line, don't do anything with it.
        reader = csv.reader(f)
        for row in reader:
            queue = row[0]
            token = row[1]
            current_order = SubElement(root, 'Token', {'text':token})
            details = SubElement(current_order, 'Queue',
                                 {'queue':queue})

    print prettify(root) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:18:08.053

如果您的 CSV 文件**总是**有标题，请立即`reader.next()`调用`reader=csv.reader(f)`

# javascript - 从 jQuery.map() 函数中获取正确的类型和格式

> ID：13847692
> 
> 赞同：0
> 
> 时间：2012-12-12T20:05:18.850
> 
> 标签：javascript, arrays, json, jquery, types

我对以下数组进行了硬编码，我可以使用它将选择插入到自动完成下拉列表中。它似乎是一个 JSON 对象数组，尽管我是 JS 新手，可能是错的。有用。

```
var boroughData = [
    {"label":"New York, Bronx, Bronx County, New York, United States","value":"Bronx, Bronx County, New York, United States"},
    {"label":"New York, Staten Island, Richmond County, New York, United States","value":"Staten Island, Richmond County, New York, United States"}
]; 
```

我想从数据库中提供类似的数据并通过 .map() 函数组装它。我有一些工作，但输出是不同的格式/类型。它似乎是一个带有一个长字符串的数组，但同样，我可能是错的。下面是一个示例（具有不同的城市）。请注意上面我的硬编码数组中没有的开头和结尾 "。

```
["{"label":"Dallas, Cockr... Texas, United States"}", "{"label":"Dallas, Downt... Texas, United States"}", "{"label":"Dallas, East ... Texas, United States"}"] 
```

数据库中的数据当前如下所示，但如果有帮助，可以对其进行更改。

```
{"label":"Dallas, Cockrell Hill, Dallas County, Texas, United States", "value":"Dallas, Cockrell Hill, Dallas County, Texas, United States"} 
```

我尝试了字符串操作来替换/删除初始和结尾“但我无法让它工作。也许我需要在 .map() 函数中使用不同的东西来创建对象。我在 ajax 成功选项中的 .map() 是跟随

```
success: function (data){
    boroughData = $.map( data, function (item){
        return item.boroughString;
        //returning {"label":"Dallas, Cockrell Hill, Dallas County, Texas, United States", "value":"Dallas, Cockrell Hill, Dallas County, Texas, United States"}
    });
    alert(jQuery.isArray(boroughData)  + "|bD1"); //true, is array
    return boroughData;
} 
```

如何获得与硬编码数组相同类型/格式的返回结果？请具体说明代码。我没有很好地遵循一般说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:58:48.973

由于您输入的数据`item.boroughString`是一个字符串，您可能可以使用它来解析它`JSON.parse`（或`json2.js`用于不支持此功能的浏览器 - 另请参阅这个问题：[Parse JSON in JavaScript?](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)），它应该将此字符串转换为完整的 JSON 对象。

```
$.ajax({
    success: function (data){
        boroughData = $.map( data, function (item){
            return JSON.parse(item.boroughString);
            // should return JSON object {"label":"Dallas, Cockrell Hill, Dallas County, Texas, United States", "value":"Dallas, Cockrell Hill, Dallas County, Texas, United States"}
        });

        alert(jQuery.isArray(boroughData)  + "|bD1"); //true, it is again an array

        //return boroughData; Your success should not return a variable to be used after!!! Ajax is asynchronous
        //
        // Rather use a callback function
        functionToBeExecutedAfterTheSuccess();
    }
});

function functionToBeExecutedAfterTheSuccess() {
    alert(boroughData + "|bD3"); //[object Object],[object Object],[object Object] with OK contents
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:11:39.667

在我看来，你能做的最好的事情就是确保服务器返回一个有效的 JSON 对象。通常不建议在 Javascript 中修复可以修复服务器端的内容。

也就是说，将字符串转换为等于硬编码数组的数组的方法，您可以使用：

```
success: function (data){
    // split the data with separator ", 
    var parts = data.split("\",");
    var boroughData = [];
    // looping through all parts
    for (var i=0, ii=parts.length; i < ii; i++) {
      // getting the value of the part between { and }
      var part = parts[i].substring(parts[i].indexOf("{"),parts[i].indexOf("}")+1);
      // add part as json to the array
      boroughData.push($.parseJSON(part));
    }
    return boroughData;
} 
```

# mongodb - mongodb查找复杂

> ID：13847694
> 
> 赞同：1
> 
> 时间：2012-12-12T20:05:36.443
> 
> 标签：mongodb

这是我的收藏结构：

科尔{

```
id:...,

..,

fieldA:{

   fieldA1:[

       {

           ...

       }

   ],

   ...,

   fieldA2:[

       {

           text: "ciao",

       },

       {

           text: "hello",

       },

       ...  

   ] 

} 

... 
```

}

我想用例如 text="ciao" 查找文档 我使用以下命令： Db.coll.find({fieldA: { fieldA2: {$elementMatch:{ text:”ciao”} } } }) 但结果是没什么...我该怎么做才能做这个操作？谢谢你非常匹配..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:43:19.930

您需要使用[点符号](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)来引用嵌入文档：

```
db.coll.find({'fieldA.fieldA2': { $elemMatch:{ text:"ciao"} }}) 
```

另请注意，运算符是[`$elemMatch`](http://docs.mongodb.org/manual/reference/operator/elemMatch/)，而不是 $elementMatch。

# java - Java删除arraylist迭代器

> ID：13847695
> 
> 赞同：2
> 
> 时间：2012-12-12T20:05:39.757
> 
> 标签：java, arraylist, iterator

我的类“炸弹”的 Java 中有一个 ArrayList。

这个类有一个方法'isExploded'，如果炸弹已经爆炸，这个方法将返回true，否则返回false。

现在我试图遍历这个arraylist，调用这个方法isExploded，如果它返回true，则从列表中删除元素。

我知道如何迭代：

```
 for (Iterator i = bombGrid.listIterator(); i.hasNext();) {
    if () {         
        i.remove();
} 
```

但我不知道如何通过迭代器访问 Bomb 类本身的 isExploded 方法。有谁知道这个问题的答案？

真挚地，

卢克索

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:07:20.390

您需要使用[next](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html#next%28%29)获得炸弹：

```
for (Iterator i = bombGrid.listIterator(); i.hasNext();) {
   Bomb bomb = (Bomb) i.next(); 
   if (bomb.isExploded()) i.remove();
} 
```

或者，如果你可以`Iterator<Bomb>`从你的 bombGrid 中得到一个（它是一个`ArrayList<Bomb>`？）：

```
Iterator<Bomb> i = bombGrid.listIterator();
while (i.hasNext()) {
   Bomb bomb = i.next(); 
   if (bomb.isExploded()) i.remove();
} 
```

这假设您的迭代器支持`remove`，例如由 an 给出的情况就是这种情况`ArrayList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:09:12.540

如果您使用 Java 5，请使用泛型：

```
List<Bomb> bombGrid = ...;
for (Iterator<Bomb> i = bombGrid.iterator(); i.hasNext();) {
  if (i.next().isExploded()) {         
    i.remove();
  }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-12T20:21:07.530

不，您不能在迭代时删除 ArrayList 的迭代器内部。这是 Javadoc 摘录：

> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

# scala - 如何创建链接列表

> ID：13847704
> 
> 赞同：0
> 
> 时间：2012-12-12T20:06:20.000
> 
> 标签：scala, playframework

我想要一个主页，其中包含指向我的应用程序其他部分的链接列表。`<a href="@controllers.routes.SomeModel.show(someModel.ean)">`因此，与其像我想的那样使用硬编码的 href，不如 创建一个 Link 对象，它包含一个链接列表，我可以通过控制器将其传递到该页面，然后呈现每个链接。但我不清楚如何实际引用该链接。

```
 case class Link(name: String, route: String)

    object Link {
      val links = Set(Link("SomeModels", controllers.SomeModels.list.toString()),
        Link("Products", controllers.Products.list.toString()))

      def allLinks = links.toList
    } 
```

我想像这样使用它：

```
@(links: List[Link])(implicit flash: Flash, lang: Lang)
@main("welcome to my awesome play app") {
<dl class="models">
    @for(link <- links) {
    <dt>
        <a href=@link.route>
            @link.name
        </a>
    </dt>
    }
</dl>
} 
```

但它显然不起作用，因为那些实际上链接到`http://localhost:9000/Action(parser=BodyParser(anyContent))`所以我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:47:06.787

您需要在“控制器”和控制器名称之间放置“.routes”，并使用方法“url”：

```
case class Link(name: String, route: String)

object Link {
  val links = List(Link("SomeModels", controllers.routes.SomeModels.list.url),
    Link("Products", controllers.routes.Products.list.url))

  def allLinks = links.toList
} 
```

我为 play 2.0.4 的工作代码做了一个要点：[https ://gist.github.com/4275931](https://gist.github.com/4275931)

# java - 我应该用两个 if 语句分隔 AND 吗？

> ID：13847707
> 
> 赞同：1
> 
> 时间：2012-12-12T20:06:23.580
> 
> 标签：java, optimization, if-statement

我的代码中有以下几行：

```
 if (command.equals("sort") && args.length == 2) {
    //run some program
    } 
```

有人建议我应该使用两个单独`if`的语句，因为如果命令不等于“排序”，则无需评估任何其他`if`语句，无论 args 长度是否正确。

因此，据此，我需要将代码重写为：

```
if (command.equals("sort")) {
  if (args.length == 2) {
    //run some program
  }
} 
```

我知道他们都做这项工作，但我的问题是哪一个更好，更有效？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T20:08:17.100

不，那不是真的。他们称之为`short circuit`，如果第一个条件评估为假，则根本不会评估第二个条件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T20:08:22.123

好吧，既然`&&`是`short-circuit`运营商。所以这两个`if`陈述实际上是相同的。

因此，在第一种情况下，如果您的`command.equals("sort")`, 返回 false，则根本不会评估以下条件。所以，在我看来，就选择第一个。更清楚了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T20:33:18.880

如前所述，短路将导致程序在条件失败时退出 if 语句，这意味着不会评估任何进一步的条件，因此两种格式的评估方式没有真正的区别。

我想指出，当您有多个相互嵌套的 if 语句时，代码的易读性会受到负面影响，而这对我来说是不嵌套的主要原因。例如：

```
if( conditionA && conditionaB && !conditionC ){
    // Do Something
} 
```

比：

```
if( conditionA ){
    if( conditionB ){
        if( !conditionC ){
            // Do Something
        }
    }
} 
```

想象一下，有 20 个嵌套的 if 语句？当然，这并不常见，但有可能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T20:09:42.713

他们是一样的。对于您的第一个示例，如果第一个表达式为假，任何现代运行时都将忽略第二个表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T20:16:32.980

短路更好，由 && 完成，如果您检查一个值的空大小写，然后在该对象上应用一个函数，短路运算符效果很好。如果条件 1 为假，则从条件 2 停止执行。

前任：

`String s=null;`

`if(s!=null && s.length())`

这不会引发异常，并且在大多数情况下，如果检查，您会再保存一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T20:13:11.017

如果条件顺序相同，则它们在效率方面完全相同。

```
if (command.equals("sort") && args.length == 2) 
```

如果 command.squals("sort") 返回 false 并且永远不会检查 args.length 将退出。这就是`short-circuit`运营商的`&&`操作。

它归结为样式和可读性问题。IMO 当您开始在单个语句中将太多链接在一起时`if`，可能会难以阅读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T20:22:30.730

实际上，它被称为 [Lazy_evaluation]：[http ://en.wikipedia.org/wiki/Lazy_evaluation](http://en.wikipedia.org/wiki/Lazy_evaluation)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-12T20:31:12.177

这不是真正的问题，但请注意，如果您想要评估这两个，您可以使用 & ：

```
if (methodA() & methodB()) {
    // 
} 
```

代替

```
boolean a = methodA();
boolean b = methodB();
if (a && b) {
    //
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-12-12T20:33:11.737

是的，他们的建议是完全正确的。我建议你将第一张支票写成：

```
"sort".equals(command) 
```

也许在这种情况下没有意义，但在将来。首先使用静态类型，这样您之前就不需要空检查

# python - 如何让某人在pygame中重复点击？

> ID：13847708
> 
> 赞同：-3
> 
> 时间：2012-12-12T20:06:26.240
> 
> 标签：python, pygame, clicking

我正在 pygame 中制作一个简单的游戏应用程序，但无法弄清楚如何让用户反复点击敌人进行交互（如射击），而不仅仅是按住鼠标。请帮忙！这是我的代码。

```
 import pygame, sys
    from pygame.locals import *
    from time import *

    bif="map.jpg"
    enemy="squarecharacter.png"

    pygame.init()
    screen=pygame.display.set_mode((1000,550), 0, 32)
    background=pygame.image.load(bif).convert()
    square1=pygame.image.load(enemy).convert_alpha()
    square1_x,square1_y=(300,300)
    clock=pygame.time.Clock()
    speed=50
    square_health1=100

    while True:
        for event in pygame.event.get():
            if event.type==QUIT:
                pygame.quit()
                sys.exit()
        screen.blit(background, (0,0))
        screen.blit(square1, (square1_x,square1_y))

        mousepos_x,mousepos_y=pygame.mouse.get_pos()
        button1, button2, button3=pygame.mouse.get_pressed()
        if mousepos_x in range((int(square1_x)),(int(square1_x+50))) and mousepos_y in range((int(square1_y)),(int(square1_y+50))):              
            if button1==1:
                square_health1-=10
                button1-=1
                print str(square_health1)
                continue 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:47:28.087

好的，对于初学者，我建议查看类，以使您的代码更具可读性。现在关于鼠标：除了事件类型退出之外，还有其他事件。您正在寻找的是`MOUSEBUTTONUP`and `MOUSEBUTTONDOWN`。一个简单的坐标检查是：

```
for event in pygame.event.get():
    if event.type==QUIT:
        pygame.quit()
    if event.type == MOUSEBUTTONUP:
        print('Mouse clicked at coordinates'+ str(event.pos)) 
```

我建议看一下 python 中可用的不同数据结构。建议使用列表来存储许多敌人。然后您可以简单地查看每个敌人并检查鼠标坐标是否在代表敌人的矩形内。

python 教程以及 pygame 文档是一个很好的开始。它真的很短，你会发现很多有用的功能，比如碰撞检测、精灵组等。

# jquery - WordPress 3.5 自定义媒体上传为您的主题选项

> ID：13847714
> 
> 赞同：68
> 
> 时间：2012-12-12T20:06:57.787
> 
> 标签：jquery, wordpress, file-upload, wordpress-3.5

WordPress 3.5 最近发布了，我通过thickbox 使用了WordPress 媒体上传系统，并`window.send_to_editor`在我的WordPress 主题中使用了一些选项（背景、徽标等...）。

但正如您所知，WordPress 已经集成了一个新的媒体管理器，我想使用这个新功能将图像/文件作为自定义字段上传。所以我花了一上午的时间来寻找一种方法来获得想要的结果。

我发现了这个解决方案，它对你们中的一些人很有用。感谢您对代码或您想到的任何改进提供反馈！

HTML 示例：

```
<a href="#" class="custom_media_upload">Upload</a>
<img class="custom_media_image" src="" />
<input class="custom_media_url" type="text" name="attachment_url" value="">
<input class="custom_media_id" type="text" name="attachment_id" value=""> 
```

jQuery代码：

```
$('.custom_media_upload').click(function() {

    var send_attachment_bkp = wp.media.editor.send.attachment;

    wp.media.editor.send.attachment = function(props, attachment) {

        $('.custom_media_image').attr('src', attachment.url);
        $('.custom_media_url').val(attachment.url);
        $('.custom_media_id').val(attachment.id);

        wp.media.editor.send.attachment = send_attachment_bkp;
    }

    wp.media.editor.open();

    return false;
}); 
```

如果您想查看`attachment`变量中包含的每个设置，您可以执行 a`console.log(attachment)`或`alert(attachment)`.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-17T21:24:24.280

你以一种意想不到的方式去做这件事。您的 javascript 代码应该看起来像这样：

```
$('.custom_media_upload').click(function(e) {
    e.preventDefault();

    var custom_uploader = wp.media({
        title: 'Custom Title',
        button: {
            text: 'Custom Button Text'
        },
        multiple: false  // Set this to true to allow multiple files to be selected
    })
    .on('select', function() {
        var attachment = custom_uploader.state().get('selection').first().toJSON();
        $('.custom_media_image').attr('src', attachment.url);
        $('.custom_media_url').val(attachment.url);
        $('.custom_media_id').val(attachment.id);
    })
    .open();
}); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-13T11:48:32.973

`wp_enqueue_media`如果您不在帖子编辑页面上，请不要忘记使用（3.5 中的新功能）

要使用旧的媒体上传框，您可以这样做：

```
if(function_exists( 'wp_enqueue_media' )){
    wp_enqueue_media();
}else{
    wp_enqueue_style('thickbox');
    wp_enqueue_script('media-upload');
    wp_enqueue_script('thickbox');
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-22T16:03:30.400

我稍微修改了这段代码，使其一次可用于多个字段：

HTML：

```
<!-- Image Thumbnail -->
<img class="custom_media_image" src="" style="max-width:100px; float:left; margin: 0px     10px 0px 0px; display:inline-block;" />

<!-- Upload button and text field -->
<input class="custom_media_url" id="" type="text" name="" value="" style="margin-bottom:10px; clear:right;">
<a href="#" class="button custom_media_upload">Upload</a> 
```

jQuery：

```
jQuery(document).ready(function($){

$('.custom_media_upload').click(function() {

        var send_attachment_bkp = wp.media.editor.send.attachment;
        var button = $(this);

        wp.media.editor.send.attachment = function(props, attachment) {

            $(button).prev().prev().attr('src', attachment.url);
            $(button).prev().val(attachment.url);

            wp.media.editor.send.attachment = send_attachment_bkp;
        }

        wp.media.editor.open(button);

        return false;       
    });

}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-14T11:15:09.650

如果编辑器关闭，我没有发现任何可以触发自定义功能的东西。我用这个：

```
wp.media.editor.open();
$('.media-modal-close, .media-modal-backdrop').one('click', function(){
    //do some stuff
}); 
```

或更好：

```
var id = wp.media.editor.id();
var editor = wp.media.editor.get( id );
if('undefined' != typeof( editor )) editor = wp.media.editor.add( id );

if ( editor ) {
    editor.on('close', function(){
        //do some stuff
    });
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-16T12:29:47.813

我没有太多机会玩这个，但对于那些希望利用画廊元素的人来说，这段代码应该会让你上路。

这只是一个起点——它只提供了一个逗号分隔的图像 id 列表，但这应该足以开始有创意了。

```
<input id="custom_media_id" type="text" name="attachment_id" value="">
<a href="#" class="button custom_media_upload" title="Add Media">Add Media</a>

<script type="text/javascript">
  jQuery('.custom_media_upload').click(function() {
    var clone = wp.media.gallery.shortcode;
    wp.media.gallery.shortcode = function(attachments) {
    images = attachments.pluck('id');
    jQuery('#custom_media_id').val(images);
    wp.media.gallery.shortcode = clone;
    var shortcode= new Object();
    shortcode.string = function() {return ''};
    return shortcode;
  }
jQuery(this).blur(); // For Opera. See: http://core.trac.wordpress.org/ticket/22445
wp.media.editor.open();
return false;       
});
</script> 
```

这将使用逗号分隔的图像 ID 列表填充输入字段，按照它们在编辑器中设置的顺序（使用新的拖放功能）。

该函数希望将短代码发回以放置在主编辑器中，但我们不想这样做，因此我们创建了一个新对象，该对象返回一个空白字符串以供插入。

另请注意，这不会像上面描述的那样处理插入单个图像 - 它只会将其放入帖子编辑器中。所以尝试组合这两个监听器，或者删除相应的选项卡。

**编辑**

[花了一些时间研究核心后，我认为使用此处](https://stackoverflow.com/questions/13936080/pre-select-images-when-opening-wordpress-3-5-media-manager)列出的技术实际上可以更轻松地完成整个过程，但是正如您将阅读的那样，我还没有弄清楚如何在重新打开时预先选择图像媒体经理。

# php - 使用 Ajax 在 Joomla 中加载组件数据

> ID：13847715
> 
> 赞同：0
> 
> 时间：2012-12-12T20:07:00.563
> 
> 标签：php, jquery, mysql, ajax, joomla

我正在切换我的组件以使用 AJAX 来实现更漂亮/更容易/更快/更好的分页和内容加载。

我试图跳过第一部分，它只是显示来自 mySQL/PHP 查询的内容。

既然我已经建立了查询，我想为什么要重新发明轮子？...但是如果我知道一个圆圈是什么样子的，那会有所帮助，可以这么说。

`AJAX/jQuery`这是我尝试使用的基本功能：

```
$.ajaxSetup ({  
    cache: false  
});  

var loadUrl = "http://www.mgoode.com/index.php";  

$("#load_basic").click(function(){  
   $("#result").load(loadUrl, "option=com_mls&view=list&lprice=100000&pstart=5&plimit=5");  
}); 
```

我希望将来，当我实现分页时，我可以只更改 URL 参数中的变量，而不必重新做很多事情。

**我有一个 JSFiddle[这里](http://jsfiddle.net/6vt92/26/)。** 我会很感激任何建议。

提前致谢！

**编辑：**所以，我只记得我所有的元素创作都发生在模板本身中。所以，难怪 JSFiddle 只会显示空白。抱歉打扰各位了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:41:43.573

将 Joomla 与 AJAX 一起使用是一个棘手的问题，但如果您正确构建文件，则可以正常工作

由于您无法向我们提供您的 PHP，我将向您传递我最近所做的修改。我的目标是在模块中使用 com_mycomponent 并从数据库中检索一些数据

我的模块（modules/mod_mymodule/tmpl/default.php）的default.php看起来像这样

```
<form id="myform" name="myform">
<label>Push this to load some data</label>
<input type="text" id="myid" name="myid"/>
<a href="#" id="pushme">Push me</a>
<div id="component data"></div>
</form>? 
```

获取 ID 以进行简单的 SQL 查询是一种很漂亮的形式

在我的组件上，我不得不修改 controller.php (component/com_mycomponent/controller.php)

```
<?php
defined('_JEXEC') or die;
class MyComponentController extends JControllerLegacy
{ 
public function myFunction()
    {
         $id = JRequest::getString('myid', '', 'method', JREQUEST_ALLOWRAW);
         //grab the id
         $db->setQuery('SELECT username FROM #__mytable WHERE id='.$db->Quote($id));
         //fetch data
         $json['returned'] = $result->name;
     echo(json_encode($json));
        }
}
?> 
```

上面的代码采用发布的 ID 进行查询并返回一些数据 Least but not last my jQuery function

```
$('a#pushme').click(function(){ 
$.ajax({
        url: 'index.php?option=com_users&format=raw&task=loginme',
        data: dataString,
        dataType: 'json',
        type: 'POST',
        success: function(data) {

       if(data!=null)   {
}); 
```

# android - 布局两个文本视图

> ID：13847722
> 
> 赞同：2
> 
> 时间：2012-12-12T20:07:32.100
> 
> 标签：android, layout

我必须将两个文本视图放在一行中。第二个应该放在第一个旁边（如图 1 所示）。

我的问题是：第一个文本视图的文本可能很长，所以我需要省略它。它应该占用尽可能多的空间，以便在第二个文本视图中阅读整个文本。图 2 显示了它。

是否可以使用 Android 内置层来实现这一点，或者我需要编写自定义视图？

![截屏](../Images/3d426bb46e346b97a901f6d30338d51c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:09:43.533

尝试这样的事情

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ellipsize="end"
    android:text="A long long text" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="A long text" />

</LinearLayout> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:09:56.733

创建一个内部布局并使用该`android:weightSum="100"`属性。然后在这个内部布局中放置两个文本视图并将属性添加`android:layout_weight="50"`到每个文本视图！

# windows-8 - Windows 8 应用程序共享魅力挂在“从 {AppName} 获取信息”上

> ID：13847730
> 
> 赞同：6
> 
> 时间：2012-12-12T20:07:45.727
> 
> 标签：windows-8, microsoft-metro

```
var dataTransferManager = Windows.ApplicationModel.DataTransfer.DataTransferManager.getForCurrentView();
dataTransferManager.addEventListener("datarequested", function (e) {
  var request = e.request;
  request.data.properties.title = "Share Link Example";
  request.data.properties.description = "A demonstration that shows how to add a link (URI) to share.";
  request.data.setUri(new Windows.Foundation.Uri("http://www.google.com"));
}); 
```

出于某种原因，如果我单击“共享”魅力，它只会挂在“从 GodVine 获取信息”上（GodVine 是我的应用程序的名称）。它曾经工作，然后突然停止工作。难道我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T20:17:15.110

**我怀疑您在datarequested**处理程序内的断点处停止了调试会话。如果您在**datarequested**处理程序内停止调试会话，则会出现一个破坏 Share Broker 的错误。“最简单”的重置方法是使用任务管理器停止并重新启动 explorer.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T04:14:38.393

在提升的命令提示符下 - taskkill 也很方便。

```
- taskkill /F /IM explorer.exe
- start explorer.exe 
```

# sql - 使用求和函数时的单次出现或最近的响应

> ID：13847734
> 
> 赞同：0
> 
> 时间：2012-12-12T20:07:58.153
> 
> 标签：sql, sum, distinct, last-occurrence

好的，昨天我问了一个问题并得到了很好的答案。我回来寻求更多帮助，天哪，我需要它吗！！！

昨天的问题在这里：[昨天的问题 - 与 Sum 和 Distinct 函数有关](https://stackoverflow.com/questions/13824377/sum-and-distinct-dont-alter-results)

- 该链接指向本网站内的另一个问题

今天我在结果中为返回的每一行添加了一个地址，问题是当我返回一个地址时，我发现人们输入的地址不同。主街 123 号 或 123 Main Street 等。问题是我能否仅提取所述地址的最新版本或单次出现，并且仍然像我在上面的链接中成功完成的那样计算保费？

这是我所拥有的，但它不起作用：

```
Select (Agency_Book_View.agency_no || '-' || Agency_Book_View.branch_no) AS "AGENCY-BRANCH",
   Agency.Agy_Name,
   SUM(Agency_Book_View.annual_premium) AS Premium,
   Branch.Mail_Address1,
   Agency_Book_View.effective_date
  from Branch
  INNER JOIN Agency_Book_View
on Branch.Agency_No = Agency_book_view.agency_no 
    INNER JOIN Agency
on Branch.Agency_No = Agency.agency_no
 INNER JOIN Comp_Agy on Branch.Agency_No = comp_agy.agency_no 
WHERE COMP_AGY.expiration_date = TO_DATE('12-31-2078','MM-DD-YYYY')
Group by (Agency_Book_View.agency_no || '-' || Agency_Book_View.branch_no),
   Agency.Agy_Name,
   Branch.Mail_Address1,
   Agency_Book_View.Effective_Date
Order by (Agency_Book_View.agency_no || '-' || Agency_Book_View.branch_no) 
```

结果

再次，我真的很感激任何和所有的帮助！

布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:23:24.897

我怀疑答案看起来像这样：

```
Select (Agency_Book_View.agency_no || '-' || Agency_Book_View.branch_no) AS "AGENCY-BRANCH",
       Agency.Agy_Name,
       SUM(Agency_Book_View.annual_premium) AS Premium,
       MAX(case when seqnum = 1 then Agency_Book_View.address end) as address,
       Branch.Mail_Address1,
       Agency_Book_View.effective_date
from Branch INNER JOIN
     (select *,
             ROW_NUMBER() over (partition by agency_no order by AddressDate desc) as seqnum
      from Agency_Book_View
     ) Agency_Book_View
     on Branch.Agency_No = Agency_book_view.agency_no INNER JOIN
     Agency
     on Branch.Agency_No = Agency.agency_no INNER JOIN
        Comp_Agy on Branch.Agency_No = comp_agy.agency_no 
WHERE COMP_AGY.expiration_date = TO_DATE('12-31-2078','MM-DD-YYYY')
Group by (Agency_Book_View.agency_no || '-' || Agency_Book_View.branch_no),
   Agency.Agy_Name,
   Branch.Mail_Address1,
   Agency_Book_View.Effective_Date
Order by (Agency_Book_View.agency_no || '-' || Agency_Book_View.branch_no) 
```

这会在表中添加一个序列号，看起来好像有地址，使用`row_number()`. 它假设存在一个字段来确定最近的；我在猜名字 它在外部使用聚合函数`select`来选择第一个值。

# ruby-on-rails - 在保留浏览器历史记录的同时重定向到随机页面

> ID：13847740
> 
> 赞同：1
> 
> 时间：2012-12-12T20:08:09.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试实现一个“随机页面”链接，它将向用户呈现来自数据库的随机文章。我尝试了两种不同（但相似）的方法，在这两种方法中，我都将 URL“/random”路由到 ArticleController 中的“random”方法。这是第一个：

```
def random
  offset = rand(Article.published.size)
  @article = Article.published.offset(offset).first
  render :action => 'show'
end 
```

这适用于提供随机文章，但有两个问题：首先，URL 没有更新到正确的文章，因此用户无法复制链接或为文章添加书签；其次，之前浏览过的随机文章不会显示在浏览器的后退按钮的历史记录中（即按“后退”将用户带回到他们第一次单击“随机”之前所在的页面）。

第二种方法替换`render`为`redirect_to`：

```
def random
  offset = rand(Article.published.size)
  @article = Article.published.offset(offset).first
  redirect_to @article
end 
```

这解决了第一个问题 - 它是一个重定向，因此浏览器实际上被重定向到随机选择的文章的适当 URL（因此它可用于复制/添加书签）。但是，后退按钮的问题仍然存在。此外，为这样的事情选择 HTTP 重定向感觉有点不对劲。

提供随机文章，同时显示文章的正确 URL 并维护浏览器历史链的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:47:21.140

你为什么不做一个随机文章的链接？

帮手：

```
def random_article_link
  random_article = Article.find_by_sql("SELECT 1 FROM articles ORDER BY RANDOM() LIMIT 1") # for MySql RAND()
  link_to "Random Article", random_article  
end 
```

在您的方法中，您不能在控制器级别上即时更改 URL 字符串。仅在使用约束的路由级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:40:34.197

嗯怎么样

```
@article = Article.find(rand(Article.count))
redirect_to @article 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T15:43:54.667

我想做类似的事情，但也遇到了麻烦。这是我想出的解决方案：

在您的控制器中，您不需要新页面`articles/random`。我假设您想要文章页面上的链接，这将是您控制器中的显示操作。

```
def show
   @article = Article.find(params[:id]
   @random_article = Article.order('random()').first
end 
```

然后在你的视图`show.html.erb`文件中

```
<%= link_to "Random Article", @random_article %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T03:32:19.267

稍微扩展一下 Chris 的评论 - 可以在视图中创建一个链接，该链接将为下一个链接生成一个随机 id（如果你有一些理由这样做......这取决于你）。

```
<%= link_to 'Show me a random thing', thing_path(rand(1..4)) %> 
```

您可以将其放置在任何地方，单击时它会简单地路由到一个随机页面。当然，您需要更改数字以反映实际`:id`的

# wpf - Reactiveui 命令绑定

> ID：13847742
> 
> 赞同：2
> 
> 时间：2012-12-12T20:08:12.837
> 
> 标签：wpf, viewmodel, reactive-programming, reactiveui

如果我的问题有点含糊，我提前道歉。

我正在研究和学习反应式，我发现了一个非常有趣的概念。为此，我正在使用 WPF 和 Prism 构建一个小型应用程序，但我在理解视图模型中构建命令的方式时遇到了一些困难。

我有一个例子，如果完整的话，希望能为我澄清一点：

我想要一个显示一些数据的网格。此数据是从 Web 服务加载的，我的目标是在向用户显示视图时加载一次，然后每 x 次（例如每分钟一次）或从视图中的按钮显式触发时重新加载它.

所以，我的视图模型目前看起来像：

```
public class MyPageViewModel : ReactiveValidatedObject
{
        /// <summary>
        /// Collection of tickets
        /// </summary>
        public ReactiveCollection<TicketModel> Tickets { get { return _Tickets.Value; } }

        /// <summary>
        /// Private store of tickets
        /// </summary>
        private ObservableAsPropertyHelper<ReactiveCollection<TicketModel>> _Tickets { get; set; }

        /// <summary>
        /// The service which retrieves the tickets
        /// </summary>
        private ITicketService _ticketService;

        public MyPageViewModel() : this(null) { }

        public MyPageViewModel(ITicketService ticketService)
        {
            LoadTickets = new ReactiveAsyncCommand(null, 0);
            }

        /// <summary>
        /// A command which exposes the load action for the tickets
        /// </summary>
        public ReactiveAsyncCommand LoadTickets { get; private set; }

        private void loadTickets()
        {
            //returns a List<TicketModel>
            var tickets = _ticketService.GetTickets();
        }
} 
```

我的问题是：

1) 如何注册一个异步命令，该命令将每 x 次触发一次，并调用内部 loadTickets 函数来重新加载 Ticket 存储？此命令也将由公开的命令 LoadTickets 触发。

2）在函数中，loadTickets我每次都会从服务中获取一个List。如何将此列表转换为向 UI 公开的 ReactiveCollection。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:14:40.380

> 1) 如何注册一个异步命令，该命令将每 x 次触发一次，并调用内部 loadTickets 函数来重新加载 Ticket 存储？此命令也将由公开的命令 LoadTickets 触发。

```
Observable.Timer(TimeSpan.FromSeconds(10), RxApp.DeferredScheduler)
    .InvokeCommand(LoadTickets); 
```

> 2）在函数中，loadTickets我每次都会从服务中获取一个List。如何将此列表转换为向 UI 公开的 ReactiveCollection。

```
// This makes it so when you invoke LoadTickets.Execute, Tickets
// gets updated.
// NB: Make loadTickets return a List<Ticket>
LoadTickets.RegisterAsyncFunc(x => loadTickets())
    .Select(x => new ReactiveCollection<Ticket>(x))
    .ToProperty(this, x => x.Tickets); 
```

# vb.net - MVC 3 App Dashboard 加载缓慢，多个查询（AutoMapper、EF、Kendo UI）

> ID：13847748
> 
> 赞同：0
> 
> 时间：2012-12-12T20:08:25.253
> 
> 标签：vb.net, asp.net-mvc-3, automapper, repository-pattern

让我再试一次...

视图模型的 MVC 3 存储库模式自动映射器

我把我的应用程序放到我的服务器上，当加载仪表板（这反过来加载 5 个 Kendo UI 图表）时，它使服务器陷入困境，处理器达到 100% 的峰值。IT 需要 5-10 秒来加载页面。

我正在尝试使用 EF Profiler 进行优化。我注意到进行了各种查询，当您看到我的仪表板控制器时，这是有道理的。但是 AutoMapper 似乎需要很长时间才能将 1800 多条记录转换为视图模型。我可以缓存我的 repo 以在控制器或其他东西上使用吗？

```
Public Class DashboardController
    Inherits BaseController

    Private ticketRepo As MaintenanceTicketsRepository

    Public Sub New()
        Me.ticketRepo = New MaintenanceTicketsRepository(New TicketContext)
    End Sub

    Function Chart_OpenItemsByPM() As ActionResult
        Dim tickets = ticketRepo.GetAll().Include(Function(p) p.Priority).Include(Function(s) s.Status).OrderBy(Function(o) o.PriorityId).ToArray()

        Mapper.CreateMap(Of MaintenanceTicket, PieChartViewModel)()

        Dim queue As PieChartViewModel() = Mapper.Map(Of MaintenanceTicket(), PieChartViewModel())(tickets)

        Dim ticketCounts = From t In queue _
                           Where t.StatusName = "Open" And _
                           t.PriorityName <> "Not Ready" _
                           Group t By t.PriorityName Into Count() _
                           Select PriorityName, Id = Count

        Return Json(ticketCounts)
    End Function 
```

**更新：** 如果有人读过这个，我也想知道填充“票”对象。当它们通过 ajax 调用时，我将其填充到我的每个函数中。这意味着我要为同一组初始数据发送多个查询，这些初始数据后来在函数中进行了精简。

是否存在一次填充存储库然后重用它的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:00:55.510

我最终使用了存储过程来进行计算，然后只加载必要的（少一吨）行。感觉不太理想，但正如另一位发帖者所说，让工具做他们最擅长的事情，而 sql 在这种情况下最擅长数据聚合。

# ios - IOS - AIR - 旋转时出现奇怪的组件

> ID：13847753
> 
> 赞同：1
> 
> 时间：2012-12-12T20:08:34.560
> 
> 标签：ios, apache-flex, air, rotation, components

我们正在使用 Adob​​e AIR 开发适用于 iOS 的应用程序。在 iOS 设备上旋转时，旋转过程中屏幕上出现一个奇怪的灰色矩形，旋转完成后消失。

仅当我尝试将其倒置向左并从左倒置时才会出现此问题。

我在多个 iPad 和 Android 设备上测试了该应用程序，并且只有 iOS 设备存在此问题。

有没有人见过这个？

![](../Images/abd0399e97d7285e57aac1b3691f630b.png)

# html - 屏幕尺寸的 CSS 媒体查询

> ID：13847755
> 
> 赞同：57
> 
> 时间：2012-12-12T20:08:51.250
> 
> 标签：html, css, media-queries

我目前正在尝试设计一种与多种屏幕尺寸兼容的布局。我正在设计的屏幕尺寸如下所示：

**屏幕尺寸：**

1.  640x480
2.  800x600
3.  1024x768
4.  1280x1024（及更大）

我遇到的问题是创建 css3 媒体查询，以便当窗口的宽度达到这些宽度之一时我的布局会发生变化。下面是我目前正在使用的媒体查询的示例，但它不适用于我，所以我想知道是否有人可以帮助我修复它。

```
<link rel="stylesheet" type="text/css" media="screen and (max-width: 700px)" href="css/devices/screen/layout-modify1.css">
<link rel="stylesheet" type="text/css" media="screen and (min-width: 701px) and (max-width: 900px)" href="css/devices/screen/layout-modify2.css">
<link rel="stylesheet" type="text/css" media="screen and (max-width: 901px)" href="css/devices/screen/layout-modify3.css"> 
```

我尝试使用一组新的媒体查询，但它们仍然不适合我。有人可以帮助解释我错了什么。你们中的一些人已经尝试过解释，但我不明白。新的媒体查询如下所示：

```
<link rel="stylesheet" type="text/css" media="screen and (max-width: 640px)" href="css/devices/screen/layout-modify1.css">

    <link rel="stylesheet" type="text/css" media="screen and (max-width: 800px)" href="css/devices/screen/layout-modify2.css">

    <link rel="stylesheet" type="text/css" media="screen and (max-width: 1024px)" href="css/devices/screen/layout-modify3.css">

    <link rel="stylesheet" type="text/css" media="screen and (max-width: 1280px)" href="css/devices/screen/layout-modify4.css"> 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-12T20:13:18.973

将它们全部放在一个文档中并使用它：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
  /* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
  /* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
  /* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
  /* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
  /* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
  /* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
  /* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
  /* Styles */
}

/* iPhone 4 - 5s ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
  /* Styles */
}

/* iPhone 6 ----------- */
@media
only screen and (max-device-width: 667px) 
only screen and (-webkit-device-pixel-ratio: 2) {
  /* Styles */
}

/* iPhone 6+ ----------- */
@media
only screen and (min-device-width : 414px) 
only screen and (-webkit-device-pixel-ratio: 3) {
  /*** You've spent way too much on a phone ***/
}

/* Samsung Galaxy S7 Edge ----------- */
@media only screen
and (-webkit-min-device-pixel-ratio: 3),
and (min-resolution: 192dpi)and (max-width:640px) {
 /* Styles */
} 
```

来源：[http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

在这一点上，我肯定会考虑使用`em`值而不是像素。有关更多信息，请查看此帖子：[https](https://zellwk.com/blog/media-query-units/) ://zellwk.com/blog/media-query-units/ 。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-12-12T20:18:35.683

除非你有更多的样式表，否则你已经搞砸了你的断点：

```
#1 (max-width: 700px)
#2 (min-width: 701px) and (max-width: 900px)
#3 (max-width: 901px) 
```

第三个媒体查询可能是`min-width: 901px`. 现在，它与#1 和#2 重叠，并且仅当屏幕正好为 901px 宽时才自行控制页面布局。

编辑更新的问题：

```
(max-width: 640px)
(max-width: 800px)
(max-width: 1024px)
(max-width: 1280px) 
```

媒体查询不像 catch 或 if/else 语句。如果任何条件匹配，那么它将应用它匹配的每个媒体查询的所有样式。如果您只`min-width`为所有媒体查询指定 a，则可能匹配部分或全部媒体查询。在您的情况下，一个 640px 宽的设备匹配您的所有 4 个媒体查询，因此所有样式表都已加载。您最有可能寻找的是：

```
(max-width: 640px)
(min-width: 641px) and (max-width: 800px)
(min-width: 801px) and (max-width: 1024px)
(min-width: 1025px) 
```

现在没有重叠。仅当设备的宽度介于指定的宽度之间时，样式才会适用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-19T06:43:48.500

对于所有智能手机和大屏幕，使用这种媒体查询格式

```
/* Smartphones (portrait and landscape) ----------- */

@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */

@media only screen and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */

@media only screen and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait) {
/* Styles */
}

/**********
iPad 3
**********/

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

/* Desktops and laptops ----------- */

@media only screen  and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen  and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */

@media only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : landscape) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

@media only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : portrait) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

/* iPhone 5 ----------- */

@media only screen and (min-device-width: 320px) and (max-device-height: 568px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 320px) and (max-device-height: 568px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* iPhone 6 ----------- */

@media only screen and (min-device-width: 375px) and (max-device-height: 667px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 375px) and (max-device-height: 667px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* iPhone 6+ ----------- */

@media only screen and (min-device-width: 414px) and (max-device-height: 736px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 414px) and (max-device-height: 736px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* Samsung Galaxy S3 ----------- */

@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* Samsung Galaxy S4 ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 3){
/* Styles */
}

@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 3){
/* Styles */
}

/* Samsung Galaxy S5 ----------- */

@media only screen and (min-device-width: 360px) and (max-device-height: 640px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 3){
/* Styles */
}

@media only screen and (min-device-width: 360px) and (max-device-height: 640px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 3){
/* Styles */
} 
```

# android - 在特定目录中打开图库

> ID：13847756
> 
> 赞同：1
> 
> 时间：2012-12-12T20:08:51.657
> 
> 标签：android, android-intent, gallery

我正在尝试使用本机图库打开我的应用程序拍摄的所有照片。

这是我的代码：

```
Intent intentBrowseFiles = new Intent(Intent.ACTION_VIEW);
intentBrowseFiles.setType("image/*");
                    Uri uri = Uri.parse(Environment.getExternalStorageDirectory() + "/DCIM/MyApp");
                    intentBrowseFiles.setData(uri); 
                    intentBrowseFiles.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intentBrowseFiles); 
```

如果我不设置`setData`画廊打开，但在根目录中，如果我设置，我的应用程序崩溃。

有没有办法在特定目录的图库中打开它？

无论如何，谢谢你！

# mysql - 使用 infile 时引用完整性错误，但使用 mysql CLI 时没有错误

> ID：13847757
> 
> 赞同：2
> 
> 时间：2012-12-12T20:08:52.883
> 
> 标签：mysql, foreign-keys, referential-integrity

当我尝试使用 --local-infile 选项加载 CSV 数据文件时，我收到以下错误：

> 第 2 行的错误 1452 (23000)：无法添加或更新子行：外键约束失败 ( `realtax`. `city_desc`, CONSTRAINT `city_desc_ibfk_1`FOREIGN KEY ( `cityid`) REFERENCES `city`( `id`) ON DELETE CASCADE ON UPDATE CASCADE)

错误发生在 CSV 文件的第一行（即，根本没有加载任何行）。

这是实际的mysql加载命令：

```
load data LOCAL infile 'out/desc.in' into table city_desc fields terminated by ',' lines terminated by '\n'; 
```

这是 CSV 文件的第一行：

```
# head -1 out/desc.in
NULL,1000,"R4","B1","NWC125","SUNRISE ACRES #1 W 120 FT OF S 75",0.207 
```

但是，当我使用 mysql CLI 时，我可以毫无问题地加载第一行。结果如下：

> mysql> 插入 city_desc 值 (NULL,1000,"R4","B1","NWC125","SUNRISE ACRES #1 W 120 FT OF S 75",0.207);
> 查询正常，1 行受影响（0.04 秒）

这是它所引用的表数据行：

> mysql> select * from city limit 1;
> +--------+---------+-----------------+
> | 编号 | 道具ID | pidn |
> +--------+---------+-----------------+
> | 1000 | 10208 | S912999001L0800 |
> +--------+---------+-----------------+
> 1 行在集合中（0.00 秒）

以下是每个表的 SQL 定义：

```
create table if not exists city 
(
    id              INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    prop_id         int,
    pidn            varchar(100)
) AUTO_INCREMENT=1000, engine=innodb;

create table if not exists city_desc
(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    cityid          int not null,
    zoning          varchar(20), 
    state_cd        varchar(20), 
    map_id          varchar(20), 
    legal_desc      varchar(100), 
    legal_acres     numeric(5,5),
    foreign key (cityid) references city(id)
    on update cascade on delete cascade
) AUTO_INCREMENT=500000, engine=innodb;

create index propid_city on city(prop_id);
create index pidn_city on city(pidn); 
```

我阅读了其他关于关闭引用检查的线程：

> SET foreign_key_checks = 0;

但我不想破解修复程序，而是想知道手动工作但不能使用 --local-infile 选项的原因。外国参考文献在那里（记录 id 1000），为什么它不起作用？

更新：这是我在插入失败后立即运行 SHOW ENGINE INNODB STATUS 后收到的信息：

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
121212 13:50:55 Transaction:
TRANSACTION 0 901853, ACTIVE 0 sec, process no 3217, OS thread id 140224990570240 inserting, thread declared inside InnoDB 492
mysql tables in use 1, locked 1
5 lock struct(s), heap size 1216, 9 row lock(s), undo log entries 9
MySQL thread id 15389, query id 1442612 localhost root
load data LOCAL infile 'out/desc.in' into table city_desc fields terminated by ',' lines terminated by '\n'
Foreign key constraint fails for table `realtax`.`city_desc`:
,
  CONSTRAINT `city_desc_ibfk_1` FOREIGN KEY (`cityid`) REFERENCES `city` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
Trying to add in child table, in index `cityid` tuple:
DATA TUPLE: 2 fields;
 0: len 4; hex 80000000; asc     ;; 1: len 4; hex 800ea15e; asc    ^;;

But in parent table `realtax`.`city`, in index `PRIMARY`,
the closest match we can find is record:
PHYSICAL RECORD: n_fields 5; compact format; info bits 0
 0: len 4; hex 800003e8; asc     ;; 1: len 6; hex 00000007aed1; asc       ;; 2: len 7; hex 800000002d0110; asc     -  ;; 3: len 4; hex 800027e0; asc   ' ;; 4: len 15; hex 533931323939393030314c30383030; asc S912999001L0800;; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:17:47.067

您需要跳过 CSV 文件中的第一行，添加**IGNORE number LINES**选项。

```
load data LOCAL infile 'out/desc.in'
into table city_desc
fields terminated by ','
lines terminated by '\n'
ignore 1 lines; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:47:04.067

根据您提供的信息，该行不应该产生任何问题。因此，快速提问：**csv 中有多少行？如果多于 1 行，是否至少其中之一包含不在主键中的外键值？**
如果该行确实包含数据数据，则该错误肯定不在该行上；它在不同的行上。

# winapi - 动态更改打开文件的文件锁定/访问权限

> ID：13847759
> 
> 赞同：0
> 
> 时间：2012-12-12T20:08:57.100
> 
> 标签：winapi, sharepoint

我有一个客户端应用程序，我们尝试从 SharePoint 签入和签出文件以进行编辑。我正在使用 SharePoint 的 SOAP 接口和一些 FrontPage 接口来执行此操作。它曾经在 SharePoint 2007 下正常工作，但在 2010 年，如果我打开文件进行编辑，我无法签出或签入文件。当我检查返回的错误消息时，我收到一条消息，例如“FileXXX 已被 DOMAIN\user 独占使用”。如果文件已打开进行编辑，我也无法更新文件/列表的任何用户定义的 SharePoint 字段。

我的问题是：有没有办法更改打开文件的访问/锁定以使其暂时非排他性然后恢复它？

注意：我的一些数据文件是使用 windows 文件句柄（平面文件）打开的，而其他数据文件是使用 windows 结构化存储（复合文档文件）打开的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:35:56.490

这可能不适用于 Sharepoint，但 ReOpenFile() API 可以满足您的需求。我不知道有任何其他方法可以做到这一点。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365497(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365497(v=vs.85).aspx)

# node.js - 如何在 MongoDB 中按日期对集合进行排序？

> ID：13847766
> 
> 赞同：163
> 
> 时间：2012-12-12T20:09:28.047
> 
> 标签：node.js, mongodb

我正在将 MongoDB 与 Node.JS 一起使用。我有一个包含日期和其他行的集合。日期是一个 JavaScript`Date`对象。

如何按日期对该集合进行排序？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-12-12T21:17:31.913

对@JohnnyHK 的回答稍作修改

```
collection.find().sort({datefield: -1}, function(err, cursor){...}); 
```

在许多用例中，我们希望返回最新记录（例如最新更新/插入）。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2017-06-29T01:59:19.963

```
db.getCollection('').find({}).sort({_id:-1}) 
```

这将根据插入日期按降序对您的收藏进行排序

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-12-12T21:11:16.080

按日期排序不需要任何特殊的东西。只需按集合的所需日期字段排序。

针对 1.4.28 node.js 原生驱动进行了更新，您可以`datefield`使用以下任何一种方式进行升序排序：

```
collection.find().sort({datefield: 1}).toArray(function(err, docs) {...});
collection.find().sort('datefield', 1).toArray(function(err, docs) {...});
collection.find().sort([['datefield', 1]]).toArray(function(err, docs) {...});
collection.find({}, {sort: {datefield: 1}}).toArray(function(err, docs) {...});
collection.find({}, {sort: [['datefield', 1]]}).toArray(function(err, docs) {...}); 
```

`'asc'`or`'ascending'`也可以用来代替`1`.

要降序排序，请使用`'desc'`,`'descending'`或`-1`代替`1`.

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-07-08T09:27:01.577

Sushant Gupta 的答案有点过时，不再起作用。

下面的代码片段现在应该是这样的：

`collection.find({}, {"sort" : ['datefield', 'asc']} ).toArray(function(err,docs) {});`

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-01-14T08:00:36.193

这对我有用：

```
collection.find({}, {"sort" : [['datefield', 'asc']]}, function (err, docs) { ... }); 
```

使用 Node.js、Express.js 和 Monk

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-13T08:57:54.217

```
collection.find().sort('date':1).exec(function(err, doc) {}); 
```

这对我有用

参考[https://docs.mongodb.org/getting-started/node/query/](https://docs.mongodb.org/getting-started/node/query/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-10-19T20:52:02.410

使用猫鼬，它很简单：

```
collection.find().sort('-date').exec(function(err, collectionItems) {
  // here's your code
}) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-08-13T17:06:01.030

排序参数需要额外的方**[ ]**括号才能工作。

```
collection.find({}, {"sort" : [['datefield', 'asc']]} ).toArray(function(err,docs) {}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-27T14:19:46.480

如果您的日期格式是这样的：14/02/1989 ----> 您可能会发现一些问题

你需要像这样使用 ISOdate ：

```
var start_date = new Date(2012, 07, x, x, x); 
```

-----> 结果 ------>ISODate("2012-07-14T08:14:00.201Z")

现在只需使用这样的查询：

```
 collection.find( { query : query ,$orderby :{start_date : -1}} ,function (err, cursor) {...} 
```

而已 ：）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-06-02T10:39:16.160

使用 mongoose，我无法使用“toArray”，并且出现错误：`TypeError: Collection.find(...).sort(...).toArray is not a function.` 来自 Native MongoDB NodeJS 驱动程序（[参考](https://mongodb.github.io/node-mongodb-native/api-generated/cursor.html#toarray)）的 Cursor 类中存在 toArray 函数。

也 sort 只接受一个参数，所以你不能在里面传递你的函数。

这对我有用（由[Emil](https://stackoverflow.com/a/33223694/7145177)回答）：

```
collection.find().sort('-date').exec(function(error, result) {
  // Your code
}) 
```

# javascript - 在 JavaScript 中迭代带有“洞”的数组

> ID：13847769
> 
> 赞同：2
> 
> 时间：2012-12-12T20:09:32.950
> 
> 标签：javascript, arrays, foreach, iteration

我有一个数组，其中一些项目将被删除；但是一些循环仍在它们上运行，所以我想简单地跳过我删除对象的地方

我知道 for(i in array) 的语法应该这样做，因为它在索引上迭代，但是我应该如何删除我的项目呢？因为当我执行 array[4] = null 时，我的 for 不在乎并继续尝试使用 4 处的值。

我还尝试检查是否 !null 但没有成功...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:10:58.347

如果你想在不留洞的情况下移除一个项目，你应该使用`.splice()`

```
myarray.splice(idx, 1); 
```

* * *

但是如果你说你*想要*那里的洞，但想跳过它们，那么你可以使用`delete`删除项目*（留下一个洞）*，并`.forEach()`用于迭代，跳过洞。

```
delete myarray[idx];

// ...

myarray.forEach(function(item, i) {
    // holes will be skipped
}); 
```

要支持 IE8 及更低版本的旧浏览器，您需要为`forEach()`.

*   [MDN `.forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility) *（忽略较短的补丁。这是一个糟糕的不兼容版本。）*

# windows-7 - 如何在没有 Visual Studio 的 Windows 7 上安装服务？

> ID：13847771
> 
> 赞同：4
> 
> 时间：2012-12-12T20:09:39.673
> 
> 标签：windows-7, windows-services

安装 Windows 服务：Visual Studio 中有一个实用程序：InstallUtil.exe。如果我有一个服务 MyService.exe 并且想在没有 Visual Studio 的 Windows 7 上安装它，我该如何安装它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T00:40:31.737

一种方法是使用 sc.exe，它是 OS 的一部分。例子：

```
sc create **ServiceName** start= auto binPath= "c:\mydir\myService.exe" 
```

其中 binPath 是包含您的服务的 exe 文件。

如果您不想启动类型 = 自动，那么您可以在 Windows 命令行上使用 net start 和 net stop 命令分别启动和停止服务。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T00:48:36.977

当“sc”不能按预期工作时，您可以尝试 NSSM（非吸吮服务管理器）。 [http://nssm.cc](http://nssm.cc)

我不久前在 Go 中构建了一项服务，但无法在“sc”下运行，nssm 运行良好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-17T15:14:44.893

您可以在“C:\Windows\Microsoft.NET\Framework\v2.0.50727”找到 installUtil.exe，从 CMD 提示符启动，然后将路径添加到您的服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T12:23:17.340

无法让 NSSM 在我的 W7 上工作。它总是把自己的路径作为我放在路径框中的程序的路径。必须手动使用上面的 sc 示例。那工作得很好。要获取 sc 参数列表，只需执行 sc。**ServiceName**前面的两个 *将导致 ServiceName 出现在 C:\Windows\System32\compmgmt.msc 列表的顶部。要删除服务，请使用 sc delete ServiceName。您将获得列表的焦点并使用 Refresh 菜单项查看 compmgmt.msc 中的更改。

# c# - XNA - 如何在安装时默认将 settings.ini 添加到游戏中？

> ID：13847775
> 
> 赞同：1
> 
> 时间：2012-12-12T20:09:42.967
> 
> 标签：c#, xna, ini, content-pipeline

我有一个 settings.ini 文件，我想在安装时将其包含在游戏中。它应该在一个名为 Settings 的文件夹中，并且应该与游戏的其余部分位于同一目录中（如可执行文件和默认内容文件夹）。

我想我会在我的游戏解决方案中添加一个额外的空内容项目并将 settings.ini 文件添加到其中。

你猜怎么着！它不起作用。

它给了我以下错误：

> 错误 6 无法自动检测要用于“Settings.ini”的导入程序。没有处理这种文件类型的进口商。在您的项目中指定处理此文件类型的导入器。PATH_TO_GAME\Settings\Settings.ini

我用谷歌搜索了一下，但看起来我需要编写自己的内容管道。

有没有更好/更简单的方法来做到这一点？我不想把时间浪费在写这个非常困难的部分上。

PS。如果我安装游戏并将 settings.ini 添加到设置目录，我可以写入和读取 settings.ini 文件。但是现在我必须手动添加 settings.ini 文件，这是我不想要的。我希望它在您安装时随游戏一起提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:02:52.130

在您的游戏项目解决方案（不是内容项目！）中，添加一个`Settings`文件夹和`Settings.ini`文件。`Add -> Existing Item...`如果您已经拥有该文件，则可以使用它。

![添加设置文件](../Images/e454bbb42bb9fec7e23f20ea39e6c035.png)

在文件下`Properties`，设置`Build Action`为`Content`和。`Copy to Output Directory``Copy if newer`

![在此处输入图像描述](../Images/2aa666d75d8f90dc122da1f050e7241d.png)

您的设置文件现在将与您的应用程序一起部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:25:35.703

获取 .ini 文件的所有内容并将它们放入游戏代码中：

```
string path = @"path\to\your.ini";
if (!File.Exists(path))
    using (var sw = File.CreateText(path))
    {
    sw.WriteLine(@"This is the .ini file text.");
    sw.WriteLine(@"It can contain all sorts of characters, like !@#$%^&*()_+|");
    sw.WriteLine(@"But you need to use double quotes "" so you don't get errors");
    } 
```

# jquery - 单选按钮 - 除一组之外的所有组

> ID：13847780
> 
> 赞同：1
> 
> 时间：2012-12-12T20:10:11.967
> 
> 标签：jquery, radio-button

我之前确实已经在这里得到了一些帮助，但现在我遇到了一个新问题：

几个单选按钮有一个动态给定的名称，我无法更改。

所以我首先想将列表中的所有单选按钮“分组”。你可以看到它在这个小提琴中工作：

[http://jsfiddle.net/DwL7J/1/](http://jsfiddle.net/DwL7J/1/)

这是使用的代码：

```
$(document).ready(function () {
    $('input[type=radio]').change(function() {
        // When any radio button on the page is selected,
        // then deselect all other radio buttons.
        $('input[type=radio]:checked').not(this).prop('checked', false);
    });
}); 
```

现在我希望前两个“组”保持分组，但最后一个名为“Schutzfolie”的组应该作为一个单独的组处理。所以我只能选择“格式”单选按钮之一，但我可以选择“Schutzfolie”单选按钮之一。最好预先选择第一个名为“ohne”的“Schutzfolie”单选按钮，除非有人点击最后一组的另一个单选按钮......

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:17:29.063

只排除最后一组：

```
$(document).ready(function () {
    $('input[type=radio]').not('[name="id[3]"]').change(function() {
        $('input[type=radio]:checked').not(this).not('[name="id[3]"]').prop('checked', false);
    });
});​ 
```

# php - ZF2 事件管理器如何支持面向方面的编程？

> ID：13847786
> 
> 赞同：2
> 
> 时间：2012-12-12T20:10:43.030
> 
> 标签：php, zend-framework2

引自[ZF2 事件管理器文档](http://framework.zend.com/manual/2.0/en/modules/zend.event-manager.event-manager.html)：

EventManager 是为以下用例设计的组件：

*   实现简单的主题/观察者模式。
*   实施面向方面的设计。
*   实现事件驱动的架构。

我对其中的“面向方面”部分感到困惑。我一直认为，使用面向方面的编程“编织”需要 PHP 没有的编译阶段，或者像 flow3 那样将方面注入到生成的缓存文件中（因此不会触及您的应用程序代码）。

ZF2 所说的“事件管理器允许面向方面的编程”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:16:26.830

他们可能会想到像方面这样的事件吗？*虽然使用单个事件管理器*通过事件完成所有框架对象交互，但可以轻松地将代码注入所有交互。

PS这只是一个猜测。

# javascript - 给图片添加隐藏值

> ID：13847789
> 
> 赞同：0
> 
> 时间：2012-12-12T20:10:48.853
> 
> 标签：javascript, lightbox, add

我在一张桌子上有一堆照片。图片还与灯箱功能一起使用。简化的代码是

```
<table><tr><td>
<a href="images/december122012.jpg" rel="lightbox[group1]" title="December 12, 2012"      value="1" id="december122012" name="december122012"><img src="images/december122012.jpg" width="100px"></a>
<a href="images/december142012.jpg" rel="lightbox[group1]" title="December 14, 2012"      value="1" id="december142012" name="december142012"><img src="images/december142012.jpg" width="100px"></a>
</td></tr></table> 
```

我想做的是有一个函数可以添加各种图像的值。我阅读了以下代码以在某处使用，但警报只是说未定义。

```
<script>
var val2 = parseInt(december122012.value);
alert (val2.value);
</script> 
```

在我得到正确分配的值之后，我想做类似的事情

```
var year2012= december122012.value + december142012.value
alert (year2012); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:13:45.777

尝试使用`document.getElementById("december122012").value`.

这将从“a”元素中获取值。“img”元素没有 value 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:13:02.760

您不能只通过字符串引用元素，您需要使用[getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)或 getElementsByName。当您阅读属性时，它们将是字符串，因此您必须[将它们转换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)为数字。

# javascript - 谷歌字符传递数据

> ID：13847792
> 
> 赞同：0
> 
> 时间：2012-12-12T20:10:57.573
> 
> 标签：javascript, google-visualization, web-project

我有一段使用谷歌图表 API 的代码

```
 <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">

    google.load('visualization', '1', {packages: ['annotatedtimeline']});

    function drawVisualization() {
    var data = new google.visualization.DataTable();
    data.addColumn('date', 'Date');
    data.addColumn('number', 'Artist');
    data.addRows([
            [new Date(2008, 1 ,1), 30000],
            [new Date(2008, 1 ,2), 14045],
            [new Date(2008, 1 ,3), 55022],
            [new Date(2008, 1 ,4), 75284],
            [new Date(2008, 1 ,5), 41476],
            [new Date(2008, 1 ,6), 33322]
            ]);

        var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
                document.getElementById('visualization'));
        annotatedtimeline.draw(data, {'displayAnnotations': true});
    }

    google.setOnLoadCallback(drawVisualization);
  </script>

<div id="visualization" style="width: 800px; height: 400px;"></div> 
```

这行得通。

但是，我将数据定义放在函数 drawVisualization 之外并将数据传递给它，如下所示，它不起作用。为什么会这样？

```
 google.load('visualization', '1', {packages: ['annotatedtimeline']});

    function drawVisualization(data) {
        var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
                document.getElementById('visualization'));
        annotatedtimeline.draw(data, {'displayAnnotations': true});
    }

    var data = new google.visualization.DataTable();
    data.addColumn('date', 'Date');
    data.addColumn('number', 'Artist');
    data.addRows([
    [new Date(2008, 1 ,1), 30000],
    [new Date(2008, 1 ,2), 14045],
    [new Date(2008, 1 ,3), 55022],
    [new Date(2008, 1 ,4), 75284],
    [new Date(2008, 1 ,5), 41476],
    [new Date(2008, 1 ,6), 33322]
    ]);

    google.setOnLoadCallback(function(){drawVisualization(data)});
  </script>

<div id="visualization" style="width: 800px; height: 400px;"></div> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:17:33.027

你没有传递`data`给它——你需要它作为参数，但`google.setOnLoadCallback`没有传递它。删除`data`参数，它应该可以工作：

```
function drawVisualization() { //<-- Note there is no parameter.
    var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
            document.getElementById('visualization'));
    annotatedtimeline.draw(data, {'displayAnnotations': true});
} 
```

# c - 是否有任何开源跨平台库可用于处理 C 中的进程？

> ID：13847795
> 
> 赞同：2
> 
> 时间：2012-12-12T20:10:59.457
> 
> 标签：c, process, open-source

不是像[boost::process](http://www.highscore.de/boost/process0.5/boost_process/tutorial.html)或[Qt](http://doc.qt.digia.com/qt/qprocess.html)这样的 C++，而是普通 C。是否有任何开源跨平台 C 库用于处理进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:38:16.717

[glib](http://developer.gnome.org/glib/stable/)（想想 Gnome）是 Qt（想想 Kde）的对等体，但它是用 C 编写的。有一个标题为[Spawning Processes](http://developer.gnome.org/glib/stable/glib-Spawning-Processes.html)的部分可能会引起人们的兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:40:14.333

根据您要实现的目标以及“跨平台”的含义，您可以编写所有内容以针对 POSIX 并仅将 Cygwin 用于您的 Windows 端口。我认为这涵盖了 Linux、Unix、OSX（又名 BSD）和 Windows XP - Win 7，以及任何带有 POSIX 层的 RTOS（例如 QNX）。不确定 Cygwin 是否适用于 Win 8。

另请参阅： [windows 与 fork() 最接近的东西是什么？](https://stackoverflow.com/questions/985281/what-is-the-closest-thing-windows-has-to-fork)

# mdx - 在 MDX 中求和分组

> ID：13847802
> 
> 赞同：-1
> 
> 时间：2012-12-12T20:11:13.923
> 
> 标签：mdx

我想要与 t-SQL 中等效的 SUM 和 Group By。但是我还没有在网上找到答案。我的 MDX 退货有一些具有相同名称的记录。我想用汇总的度量来显示不同的名称，就像 SQL 中的按功能分组一样。

这似乎是一个共同的特点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:47:05.523

在 AS 中定义度量时，您可以设置几种不同的方式，包括计数和求和。

假设您有一个产品维度和一个销售事实。按产品获取总销售额的简单查询如下所示。

```
SELECT {[Measures].[ItemCount], [Measures].[SalesDollars]} ON 0,
[Products].[Products].children ON 1
FROM [CUBE] 
```

这将为您提供示例输出，例如

```
Product  Item Count     Sales Dollars
Bike     10             1000
Tire      3              650 
```

# java - dojo 网格排序和 RESTEasy JAX-RS

> ID：13847805
> 
> 赞同：0
> 
> 时间：2012-12-12T20:11:20.140
> 
> 标签：java, dojo, jax-rs, resteasy, dojox.grid.datagrid

Dojo 网格通过向 REST Web 服务发出请求来实现排序，如下所示：

```
GET http://server/request?sort(+id) 
```

`sort(+id)`方向 (+/-) 和要排序的列在哪里。

目前我正在这样做，它可以工作，但它很难看：

```
@GET
@Path("request/")
@Produces(MediaType.APPLICATION_JSON)
public Collection<RequestDataWithCurrentStatus> getAllRequests() {
    Collection<RequestDataWithCurrentStatus> col = new ArrayList<RequestDataWithCurrentStatus>();

....

//handle the various types of sorting that can be requested by the dojo widget
String queryString = this.request.getQueryString();

//parse the dojo sort string 'sort(+id)' and sort
...

return col; 
```

}

此方法使用注入的 RESTEasy`@Context private HttpServletRequest request`来访问原始查询字符串。

我觉得我应该能够在我的调用中将此查询字符串映射到 RESTEasy 的`@*Param`注释之一。`getAllRequests()`但是根据 RESTEasy 的[文档](http://docs.jboss.org/resteasy/docs/1.1.GA/userguide/html_single/index.html#_QueryParam)，似乎没有一个很好的映射到文档中的螺旋 dojo 查询字符串。我想做这样的事情：

```
@GET
@Path("request/")
@Produces(MediaType.APPLICATION_JSON)
public Collection<RequestDataWithCurrentStatus> getAllRequests( @DojoQueryParam String sort) {
    ...
} 
```

如何以正确的方式将 dojo 网格查询字符串编组为 RESTEasy Web 服务方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:03:12.443

我对旧商店/dojox 网格的经验很少，但如果您使用的是 dojo/store/JsonRest：您可以更改它发送排序参数的方式`sortParam`。无耻地从参考指南中摘录：

```
var store = new JsonRest({
  target: "/FooObject/",
  sortParam: "sortBy"
}); 
```

这应该在表单上提出请求`/foo/bar?sortBy=+id`。

[http://dojotoolkit.org/reference-guide/1.8/dojo/store/JsonRest.html#sorting](http://dojotoolkit.org/reference-guide/1.8/dojo/store/JsonRest.html#sorting)

# html - 纯 CSS3 显示/隐藏带有过渡的全高 div

> ID：13847806
> 
> 赞同：1
> 
> 时间：2012-12-12T20:11:21.753
> 
> 标签：html, css, hide, show, transition

亲爱的 Stackoverflow 读者，

我一直在为我在鼓室看到的事情而头疼，我不知道如何正确地做这样的事情。

在此链接：[http](http://tympanus.net/Tutorials/FullscreenBookBlock/) ://tympanus.net/Tutorials/FullscreenBookBlock/ 中，您可以看到菜单完全隐藏，只有在单击图标时才可见。它有一个可爱的过渡，它基本上概括了我想要完成的事情。

与上面示例的唯一区别是我不想完全隐藏这个全高元素，我想通过悬停而不是单击按钮来完成上述效果。因此，在理想的世界中，您会看到一个垂直条，当您将鼠标悬停在该条上时（或者如果您使用的是平板电脑，则用手指单击它），它会“打开”并向您显示里面的全部内容打开 div。

现在，我可以在 html5 和 css3 中做出一些不错的事情，但是我试图完成的上述解释的效果让我非常头疼，呵呵。有没有人碰巧知道一个我可能错过的教程可以做到这一点？

ps：我试图拆开Tympanus的html / css，但是由于其中也实现了页面折叠效果，我似乎无法弄清楚，因此我希望这里有人能帮助我:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T21:44:38.583

[http://jsfiddle.net/LDntf/2/](http://jsfiddle.net/LDntf/2/)

```
#menu{
    position:absolute;
    width:175px;
    padding-right:25px;
    top:0;
    bottom:0;
    margin-left:-175px;
    background:#d00;
    -webkit-transition:margin-left .5s ease-in-out;
    z-index:1;
}
#menu:hover{
    margin-left:0;
} 
```

要移动内容，您也可以简单地为内容 div 设置动画：http: [//jsfiddle.net/LDntf/8/](http://jsfiddle.net/LDntf/8/)

```
#menu:hover + #content{
    left:200px;
    right:-175px;
}
#content{
    padding:1em;
    position:absolute;
    top:0;
    bottom:0;
    right:0;
    margin-right:-20px; /* hide the scrollbars */
    margin-bottom:-20px;
    left:25px;
    overflow:scroll;    /* always render the scrollbars, without this, the content may occasionally be cut off at the edge. */
    -webkit-transition:left .5s ease-in-out, right .5s ease-in-out;
}​ 
```

# apache-flex - 从 Flex 3.0 升级到 Flex 3.6 - 自定义组合框在 super.commitProperties() 中获取 TypeError

> ID：13847817
> 
> 赞同：0
> 
> 时间：2012-12-12T20:12:13.640
> 
> 标签：apache-flex, flex3

我正在将 Flex 3.0 应用程序升级到 Flex 3.6 SDK。该应用程序具有用于输入文本、组合框等的自定义控件。当我单击组合框时，调用 super.commitProperties() 时出现异常。这适用于 Flex 3.0 SDK。

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at mx.controls::ComboBox/destroyDropdown()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBox.as:1681]
    at mx.controls::ComboBox/styleChanged()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBox.as:1177]
    at mx.core::UIComponent/setBorderColorForErrorString()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\core\UIComponent.as:5048]
    at mx.core::UIComponent/commitProperties()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\core\UIComponent.as:6033]
    at mx.controls::ComboBase/commitProperties()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBase.as:993]
    at mx.controls::ComboBox/commitProperties()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBox.as:1291]
    at com.hanover.utility.controls.autotestcontrols::AutotestComboBox/commitProperties()[C:\App\Control\PLCustomComboBox.as:59]
    at mx.core::UIComponent/validateProperties()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\core\UIComponent.as:5966]
    at mx.managers::LayoutManager/validateProperties()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\managers\LayoutManager.as:539]
    at mx.managers::LayoutManager/doPhasedInstantiation()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\managers\LayoutManager.as:689]
    at mx.managers::LayoutManager/validateNow()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\managers\LayoutManager.as:748]
    at mx.controls::ComboBox/displayDropdown()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBox.as:1638]
    at mx.controls::ComboBox/downArrowButton_buttonDownHandler()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBox.as:1796]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.core::UIComponent/dispatchEvent()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\core\UIComponent.as:9590]
    at mx.controls::Button/http://www.adobe.com/2006/flex/mx/internal::buttonPressed()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\Button.as:2504]
    at mx.controls::Button/mouseDownHandler()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\Button.as:2750]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.core::UIComponent/dispatchEvent()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\core\UIComponent.as:9590]
    at mx.controls::ComboBase/textInput_mouseEventHandler()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\controls\ComboBase.as:1384] 
```

PLCustomCombobox.as 伪源代码，第 59 行如下所示

```
package com
{
    import com.name.utility.events.PLControlEvent;
    import com.name.utility.managers.ComboToolTipManager;

    import flash.events.Event;

    import mx.controls.ComboBox;
    import mx.events.FlexEvent;

    [Event(name="controlInitComplete", type="com.events.PLControlEvent")]

    [Event(name="plusControlValueChanged", type="com.name.utility.events.PLControlEvent")]

    public class PLControlComboBox extends ComboBox 
                                implements IPLControlControl
    {
        /**
         * A flag that indicates whether the control need to refresh.
         */     
        protected var isNeedRefresh:Boolean = false;

        /**
         * A flag that indicates whether the value of control is changed.
         */     
        protected var isValueChanged:Boolean = false;

        /**
         *  Constructor.
         */
        public function PLControlComboBox()
        {
            super();
            this.addEventListener(FlexEvent.CREATION_COMPLETE, onCreationComplete);
        }

        /**
         * @private
         * override commitProperties for avoid dispatch event many times.
         */     
        override protected function commitProperties():void
        {
            super.commitProperties(); // <---- line # 59 is here

            if(isNeedRefresh)
            {
                this.dispatchEvent(new PLControlEvent(PLControlEvent.VALUE_CHANGED));
                isNeedRefresh = false;
            }

            if(isValueChanged)
            {
                this.dispatchEvent(new Event("PLControlComboboxChanged"));
                isValueChanged = false;
            }
        }

        /**
         * Add item's tooltip.
         * @private
         */
        override public function set measuredWidth(value:Number):void
        {
            super.measuredWidth = value;
            if(collection && collection.length > 0)
            {
                ComboToolTipManager.showItemToolTip(this);
            }
        }
        protected function onCreationComplete(event:FlexEvent):void
        {
            this.removeEventListener(FlexEvent.CREATION_COMPLETE, onCreationComplete);
            this.dispatchEvent(new PLControlEvent(PLControlEvent.INIT_COMPLETE));
        }

        public function checkValidity():void
        {
            if(_required && dataProvider && dataProvider.length > 0 && _defaultItemIndex == selectedIndex)
            {
                _validity   = false;
                errorString = "please select one";
            }
            else
            {
                _validity   = true;
                errorString = "";
            }
        }

        // ======================================
        // public function
        // ======================================
        private function itemChanged():void
        {
            isNeedRefresh = true;
            isValueChanged = true;
            checkValidity();
        }

        // ======================================
        // properties
        // ======================================

        private var _required:Boolean       = false;
        private var _validity:Boolean       = false;
        private var _defaultItemIndex:int   = 0;

        public function get required():Boolean
        {
            return _required;
        }

        [Inspectable(defaultValue=false, category="Other")]
        public function set required(value:Boolean):void
        {
            _required       = value;
            isNeedRefresh   = true;
            checkValidity();
        }

        [Bindable("PLControlComboboxChanged")]
        public function get controlValue():Object
        {
            return this.selectedIndex;
        }

        public function set controlValue(value:Object):void
        {
            if(value is Number)
            {
                this.selectedIndex = int(value);
                itemChanged();
            }
        }

        /**
         * @copy IPLControlControl#validity
         */
        public function get validity():Boolean
        {
            return _validity;
        }

        /**
         * @copy IPLControlControl#type
         */
        public function get type():String
        {
            return PLControlTypeList.CONTROL_TYPE_COMBOBOX;
        }

        /**
         * If required is true, the default Item can not be selected.
         */
        public function get defaultItemIndex():int
        {
            return _defaultItemIndex;
        }

        [Inspectable(defaultValue=0, type="Number", category="Other")]
        public function set defaultItemIndex(index:int):void
        {
            _defaultItemIndex = index;
            isNeedRefresh   = true;
            checkValidity();
        }

        /**
         * Override for check validity.
         */
        override public function set selectedIndex(value:int):void
        {
            super.selectedIndex = value;
            itemChanged();
        }

        /**
         * Override for check validity.
         */
        override public function set selectedItem(value:Object):void
        {
            super.selectedItem = value;
            itemChanged();
        }
    }
} 
```

它来自 mx.controls.Comboxbox 第 1681 行，因为补间为空。

```
private function destroyDropdown():void
    {
        if (inTween)
            tween.endTween();//<---- exception on this line

        displayDropdown(false, null, false);
    } 
```

关于为什么会发生这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:03:02.910

Apache Flex 4.10 及更高版本中已修复的问题，请参阅[https://issues.apache.org/jira/browse/FLEX-33382](https://issues.apache.org/jira/browse/FLEX-33382)。

如果使用较旧的 SDK，您可以修改 mx:ComboBox 像这样添加“&& tween”检查：

```
private function destroyDropdown():void
{
    if (inTween && tween)
        tween.endTween();

    displayDropdown(false, null, false);
} 
```

# sql - 未使用自己的键连接表时的连接行为

> ID：13847820
> 
> 赞同：3
> 
> 时间：2012-12-12T20:12:29.737
> 
> 标签：sql, sql-server, tsql

如果我有查询：

```
SELECT * 
FROM Table1 a
Inner Join Table2 b on a.Key = b.Key
Inner Join Table3 c on a.Key = b.Key 
```

怎么了？我最近在一些代码中犯了这个错误（想要加入 c on on `a.Key = c.Key`），当我发现并修复它时，我很惊讶它被允许执行并得到结果。

我很好奇调用这样的查询时会发生什么。据我所知，它在 (table1 join table2) 和 table3 之间执行交叉连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:29:08.507

由于它是一个始终为真的条件，它等价于：

```
 SELECT * FROM Table1 a 
 Inner Join Table2 b on a.Key=b.Key
 Inner Join Table3 c on 1=1
   ; 
```

，例如 (t1 join t2) * t3 的笛卡尔积。

# python - Python 和 imaplib：无需下载完整电子邮件即可获取附件名称或正文

> ID：13847821
> 
> 赞同：2
> 
> 时间：2012-12-12T20:12:30.750
> 
> 标签：python, imaplib

我在 Django 中有一个电子邮件客户端。目前支持使用 imaplib 的 GMail 帐户。

我的问题是：我想获得附件名称而无需下载完整的电子邮件。目前，为了获取附件名称或电子邮件正文，我需要使用带有参数（RFC822）的 fetch 函数下载整个电子邮件。

我知道我只能使用 HEADER.FIELDS 获取特定字段，例如主题，来自 cc。但是有没有办法在不下载整个电子邮件的情况下获取附件名称或电子邮件正文？

我的具体意思是：假设我有一封 30Mb 的电子邮件，正文中有一行文本和两个 15Mb 的附件。我想在不下载完整的 30Mb 正文的情况下获取附件名称和那一行文本。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:25:25.117

假设您要问我认为您要问的问题，请执行以下操作：

首先，获取`BODYSTRUCTURE`. 假设 gmail 的 IMAP 服务器支持这个，你会得到这样的结果：

```
(("TEXT" "PLAIN" ("CHARSET" "UTF-8") NIL NIL "QUOTED-PRINTABLE" 56 1 NIL NIL NIL NIL)
 ("TEXT" "HTML" ("CHARSET" "UTF-8") (NAME "") NIL NIL "BASE64" 12345 NIL 
  ("attachment" ("FILENAME" "")) NIL NIL) 
 ("IMG" "JPEG" (NAME "funny picture") NIL NIL "BASE64" 56789 NIL
  ("attachment" ("FILENAME" "image.jpg")) NIL NIL))
 "MIXED" ("BOUNDARY" "----_=_NextPart_001_1234ABCD.56789EF0") NIL NIL NIL) 
```

然后获取`(BODY ENVELOPE)`是结构有一个。

如果您查看[RFC3501 7.4.2](https://www.rfc-editor.org/rfc/rfc3501#section-7.4.2)，它解释了如何处理这些。

一旦您确定`(BODY[1])`和`(BODY[2])`是主要内容的纯文本和 HTML 版本，并且`(BODY[3])`是第一个真正的附件，您可以通过 fetching 下载纯文本正文`(BODY[1])`，并且您从结构体。

抱歉，这里没有代码。我认为`imaplib`stdlib MIME 和邮件相关模块中的任何一个或任何一个都不会为你做最困难的部分（解释结构），但我还没有真正检查过，所以我先看看那里，如果不行，去 PyPI 看看有没有其他人已经写过代码了。

好吧，实际上，首先我只是 fetch `BODYSTRUCTURE`，`(BODY ENVELOPE)`并`(BODY[3])`针对特定消息确保 gmail 在编写一大堆代码之前得到完全支持……</p>

PS，如果最坏的情况变得最糟，如果您的用例像您描述的那样简单和严格，您可以随时获取`BODYSTRUCTURE`and ，如果失败则`(BODY[1])`回退，并通过在结构上运行 hacky 正则表达式而不是获取附件名称`RFC822`真正的解析。除了一次性脚本或快速&肮脏的原型来了解 gmail 之外，我不会写这个，但对于那些情况，我可能会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T20:33:08.773

[编辑]

好的，我们开始 =)

```
>>> import imaplib, email
>>> mail = imaplib.IMAP4_SSL('imap.gmail.com')
>>> mail.login('emailaddr@gmail.com', 'password')
('OK', ['emailaddr@gmail.com Inget Namn authenticated (Success)'])
>>> mail.select('inbox')
('OK', ['14'])
>>> result, data = mail.uid('search', None, 'ALL')
>>> uids=data[0].split()
>>> result, data = mail.uid('fetch', uids[-1], 'BODYSTRUCTURE')
>>> print data
['14 (UID 340 BODYSTRUCTURE ((("TEXT" "PLAIN" ("CHARSET" "ISO-8859-1") NIL NIL "7BIT" 17 1 NIL NIL NIL)("TEXT" "HTML" ("CHARSET" "ISO-8859-1") NIL NIL "7BIT" 17 1 NIL NIL NIL) "ALTERNATIVE" ("BOUNDARY" "20cf3071d16a5a877b04d0adcc43") NIL NIL)("APPLICATION" "PDF" ("NAME" "attiny40.pdf") NIL NIL "BASE64" 8429956 NIL ("ATTACHMENT" ("FILENAME" "attiny40.pdf")) NIL) "MIXED" ("BOUNDARY" "20cf3071d16a5a878104d0adcc45") NIL NIL))']
>>> 
```

此消息的附件名为“attiny40.pdf”，您可以在 BODYSTRUCTURE 中清楚地看到该名称。剩下的就是解析 BODYSTRUCTURE。

该代码几乎直接取自下面的最后一个链接。

[/编辑]

您需要将 fetch 的参数从 RFC822 更改为 BODYSTRUCTURE。

然后例如[这里](https://www.rfc-editor.org/rfc/rfc3501#section-7.4.2)描述的。

> 例如，由文本和 BASE64 编码文本附件组成的两部分消息的正文结构可以是： (("TEXT" "PLAIN" ("CHARSET" "US-ASCII") NIL NIL "7BIT" 1152 23 )("TEXT" "PLAIN" ("CHARSET" "US-ASCII" "NAME" "cc.diff") "960723163407.20117h@cac.washington.edu" "编译器差异" "BASE64" 4554 73) "MIXED")

另见[这篇文章](https://stackoverflow.com/questions/4745572/imap-attachement-retriving-commnand)和[这篇](https://stackoverflow.com/questions/13663672/get-the-gmail-attachment-filename-without-downloading-it/13663947#13663947)文章。最后一个链接看起来就像你正在尝试做的一样。

# visual-studio - VS2010右键菜单没有“复制”选项

> ID：13847826
> 
> 赞同：0
> 
> 时间：2012-12-12T20:12:52.233
> 
> 标签：visual-studio, visual-studio-2010, visual-c++

当我进行选择并尝试从 VS2010 帮助 (F1) 中复制某些内容时，它没有给我“复制”选项。这真的很烦人。有人知道如何解决这个问题吗？

![在此处输入图像描述](../Images/e9e33a043faab5664229b3e9f0e06edc.png)

# ssis - SSIS 多播问题：奇怪的行为

> ID：13847827
> 
> 赞同：3
> 
> 时间：2012-12-12T20:12:57.023
> 
> 标签：ssis, multicast, undefined-behavior

我正在开发集成服务，遇到了一个奇怪的错误。

我的数据流包括：

```
 -> DESTINATION
SOURCE -> SCRIPT_COMPONENT -> MULTICAST /
                                        \-> DESTINATION 
```

此错误总是发生，但与正在处理的列不同：

```
Error: 0xC0202009 at *STAFF_MIGRATION*, *STAFF_BASE* [627]: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80040E21.
An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80040E21  Description: "Multiple-step OLE DB operation generated errors. Check each OLE DB status value, if available. No work was done.".
Error: 0xC020901C at *STAFF_MIGRATION*, *STAFF_BASE* [627]: There was an error with input column "*LAST_UPDATED_BY*" (651) on input "OLE DB Destination Input" (640). The column status returned was: "The status value given to the provider was not valid.". 
```

该列`LAST_UPDATED_BY`有时会有所不同`LAST_UPDATE_DATE`

奇怪的行为是，如果我沿着通往目的地的路径添加数据查看器，则不会发生这种情况。

有任何想法吗？

编辑：我在 VS/BIDS 2008 SPI 和 SQL Server 2008 (RTM) x64 SP1 上运行。

编辑：我现在在 SQL Server SP3 上运行，并且仍然出现这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:17:52.623

我认为我的理论可能是正确的。当我放置一个数据查看器时，这意味着它需要构建数据集供我在插入之前查看。所以必须建立列的值。我通过将目标设置为打算进行批量插入的快速加载表找到了解决方案。这意味着它将有时间构建数据并且不会遇到列的无效值。这只是一个疯狂的猜测，但它有效

# c# - 使用命令行合并多个不同的变更集

> ID：13847845
> 
> 赞同：1
> 
> 时间：2012-12-12T20:14:27.943
> 
> 标签：c#, tfs, merge, command

有谁知道 tfs 命令通过指定不同的变更集（如 C1098、C5078 等）来毫无根据地合并。我目前知道指定范围的命令，但不知道具体的变更集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:22:36.410

我认为不可能在一次合并中做到这一点。您可以合并（最多）一个特定的变更集，或者您可以合并一个范围，但您不能同时合并变更集 1 和变更集 5。

我建议您使用以下命令

`tf merge $/Myteamproject/MyBranch $/MyTeamProject/MyOtherBranch /recursive /baseless /version:C1098`

完成此操作后，将在 2 个分支之间创建合并关系。从这一点开始，您现在可以在 2 个分支之间正常合并。然后您可以使用命令行

`tf merge $/Myteamproject/MyBranch $/MyTeamProject/MyOtherBranch /recursive /version:C5078`

或者您可以使用 Team Explorer / Visual Studio 执行任何所需的新合并

# c# - 从数据库检索时的字符编码

> ID：13847847
> 
> 赞同：1
> 
> 时间：2012-12-12T20:14:29.270
> 
> 标签：c#, wpf, entity-framework

我有一个 WPF MVVM 应用程序，它将一些文本存储在数据库（nvarchar）中。此文本包括`\n`指示新行。当我在 SQL Management Studio 中查看该列时，它`\n`按预期显示，但是当使用 Entity Framework 检索数据时，它会返回`\\n`，这会导致在我将属性绑定到我的文本块时不显示换行符。

我怎样才能阻止这种行为？

**一些附加信息：** 文本从数据库返回并分配给视图模型上的属性，然后绑定到文本块。如果我将属性硬编码为“Time\nStamp”之类的东西，它可以完美地与在 2 个单独的行上显示数据的文本块配合使用。问题似乎只出在实体或数据库中。我正在使用 SQL Server 2012 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:57:32.000

从[C# Obeying the NewLine Character in a String Pulled from SQL server 开始](https://stackoverflow.com/questions/11453016/c-sharp-obeying-the-newline-character-in-a-string-pulled-from-sql-server)，当您从 SQL 检索字符串时，存储在数据库中的值将存储为文字。检索到时`\n`，会将其作为文字读入字符串值，而不是换行符转义字符。

```
 str.Replace("\\n", Environment.NewLine); // Changes the escaped new line character to a NewLine character, environmental dependent. 
```

# c# - 通过线程将文件添加到列表框？

> ID：13847848
> 
> 赞同：0
> 
> 时间：2012-12-12T20:14:30.673
> 
> 标签：c#, winforms

在我的应用程序中，我想将文件添加到我的列表框中。如果我的文件不是 pcap 扩展名，我想将文件路径发送到我的班级并将其转换为 pcap 扩展名，然后将此文件添加到我的列表框。如果我选择添加名称文件，GUI 在我的应用程序完成添加或转换此文件之前没有响应，我想知道如何添加选项以通过线程完成所有这些操作。

```
private void btnAddfiles_Click(object sender, EventArgs e)
{
    System.IO.Stream stream;
    OpenFileDialog thisDialog = new OpenFileDialog();
    thisDialog.InitialDirectory = (lastPath.Length > 0 ? lastPath : "c:\\");
    thisDialog.Filter = "(*.snoop, *.pcap, *.cap, *.net, *.pcapng, *.5vw, *.bfr, *.erf, *.tr1)" +
        "|*.snoop; *.pcap; *.cap; *.net; *.pcapng; *.5vw; *.bfr; *.erf; *.tr1|" + "All files (*.*)|*.*";
    thisDialog.FilterIndex = 1;
    thisDialog.RestoreDirectory = false;
    thisDialog.Multiselect = true;
    thisDialog.Title = "Please Select Source File";

    if (thisDialog.ShowDialog() == DialogResult.OK)
    {
        if (thisDialog.FileNames.Length > 0)
        {
            lastPath = Path.GetDirectoryName(thisDialog.FileNames[0]);
        }

        foreach (String file in thisDialog.FileNames)
        {
            try
            {
                if ((stream = thisDialog.OpenFile()) != null)
                {
                    using (stream)
                    {
                        string fileToAdd = string.Empty;
                        Editcap editcap = new Editcap();

                            BackgroundWorker backgroundWorker = new BackgroundWorker();
                            backgroundWorker.WorkerReportsProgress = true;
                            backgroundWorker.DoWork += new DoWorkEventHandler(
                            (s3, e3) =>
                            {
                                if (!editcap.isLibpcapFormat(file))
                                {
                                    fileToAdd = editcap.getNewFileName(file);
                                }
                                else
                                {
                                    listBoxFiles.Items.Add(file);
                                }
                            });

                            backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
                                (s3, e3) =>
                                {
                                    listBoxFiles.Items.Add(fileToAdd);
                                });

                            backgroundWorker.RunWorkerAsync();

                        lastPath = Path.GetDirectoryName(thisDialog.FileNames[0]);
                    }
                }
            }

            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:27:06.473

您的应用程序正在冻结，因为您在 UI 线程中做了很多工作。您需要将长时间运行的任务移至后台线程，然后只需在 UI 线程中更新 UI。

为此，您需要做的第一件事是将长期运行的任务与 UI 操作分开。目前您正在将两者混合在一起，这就是导致您对如何将其映射到`BackgroundWorker`.

只要您不需要迭代地更新列表框，并且可以一次在最后添加所有项目（这就是我对列表框的期望），您可以简单地在一个中完成文件 IO放置，将结果添加到某种集合中（`List`在这里可能是合适的），然后，您可以单独将列表中的所有项目添加到您的`ListBox`（或使用数据绑定）中。

一旦你做出改变，使用类似 a`BackgroundWorker`的东西就很容易了。填充`List`go的 IO 工作`DoWork`在后台运行，然后设置`Result`. 然后该`RunWorkerCompleted`事件获取该列表并将项目添加到`ListBox`.

如果您迫切需要随时将项目添加到列表框中，那么随着时间的推移，您会看到一个项目，然后是下一个项目，等等，那么只需将其视为“报告进度”并使用内置的相关进度报告功能进入`BackgroundWorker`. 更新循环内的进度，并在进度报告事件处理程序中获取给您的值并将其放入`ListBox`.

这是一个实现：

```
private void btnAddfiles_Click(object sender, EventArgs e)
{
    System.IO.Stream stream;
    OpenFileDialog thisDialog = new OpenFileDialog();
    thisDialog.InitialDirectory = (lastPath.Length > 0 ? lastPath : "c:\\");
    thisDialog.Filter = "(*.snoop, *.pcap, *.cap, *.net, *.pcapng, *.5vw, *.bfr, *.erf, *.tr1)" +
        "|*.snoop; *.pcap; *.cap; *.net; *.pcapng; *.5vw; *.bfr; *.erf; *.tr1|" + "All files (*.*)|*.*";
    thisDialog.FilterIndex = 1;
    thisDialog.RestoreDirectory = false;
    thisDialog.Multiselect = true;
    thisDialog.Title = "Please Select Source File";

    if (thisDialog.ShowDialog() == DialogResult.OK)
    {
        if (thisDialog.FileNames.Length > 0)
        {
            lastPath = Path.GetDirectoryName(thisDialog.FileNames[0]);
        }

        BackgroundWorker backgroundWorker = new BackgroundWorker();
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.DoWork +=
        (s3, e3) =>
        {
            //TODO consider moving everything inside of the `DoWork` handler to another method
            //it's a bit long for an anonymous method
            foreach (String file in thisDialog.FileNames)
            {
                try
                {
                    if ((stream = thisDialog.OpenFile()) != null)
                    {
                        using (stream)
                        {
                            Editcap editcap = new Editcap();
                            if (!editcap.isLibpcapFormat(file))
                            {
                                string fileToAdd = editcap.getNewFileName(file);
                                backgroundWorker.ReportProgress(0, fileToAdd);
                            }
                            else
                            {
                                backgroundWorker.ReportProgress(0, file);
                            }

                            lastPath = Path.GetDirectoryName(thisDialog.FileNames[0]);
                        }
                    }
                }

                catch (Exception ex)
                {
                    MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
                }
            }
        };

        backgroundWorker.ProgressChanged +=
            (s3, arguments) =>
            {
                listBoxFiles.Items.Add(arguments.UserState);
            };

        backgroundWorker.RunWorkerAsync();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:27:47.377

您可以使用 BackgroundWorker：通过工具箱将 backgroundWorker 添加到您的表单中。

从以下开始：

```
backgroundWorker.RunWorkerAsync(new string[] {parm1, parm2}); 
```

向 backgroundWorker 添加事件（属性窗口）

使用 DoWork 进行计算。然后使用 RunWorkerCompleted 应用设置。

# typescript - 如何在 TypeScript 中提供缺失的声明？

> ID：13847851
> 
> 赞同：2
> 
> 时间：2012-12-12T20:14:36.663
> 
> 标签：typescript

如何为 TypeScript 中的静态类函数提供附加声明？例如，我正在使用带有实验性`Object.observe()`JavaScript 功能的 Chrome Canary。为了使用它（不诉诸任何演员），我想声明这个`Object.observe`函数。我该怎么做呢？

```
declare ?; // What goes here?

var x = {};
Object.observe( x, ( update : any ) => { console.log("Hello"); } ); // Declaration needed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:43:20.853

您需要创建一个接口：

```
interface Object {
  observe(beingObserved: any, callback: (update: any) => any) : void;
} 
```

`.ts`然后只需在文件中引用该接口即可。截至`0.8.1.1`，Intellisense 有点不稳定，但它可以工作并且会在编译期间强制执行合同。

它还将突出显示您使用`Object.observe`with的地方`Ambiguous call expression - could not choose overload`，但它仍然会编译。

# javascript - HTTP5，Jquery客户端电子邮件发送

> ID：13847856
> 
> 赞同：-2
> 
> 时间：2012-12-12T20:15:00.877
> 
> 标签：javascript, jquery, ajax, html

主要目标是通过客户端脚本实现从 Web 发送的即时匿名电子邮件。不知道这是否可能发生，但也许您知道一些解决方法，或者某些电子邮件提供商允许通过发布数据或有一些 API 来发送匿名电子邮件。

找到[了如何通过 javascript 向 gmail 发送邮件](http://blog.jrmoran.com/sending-an-email-message-to-gmail-with-javasc/)，但问题是你需要有 gmail 帐户..

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T04:08:13.840

您可以设置一个服务器端脚本来监视包含特殊密钥或 API 的 HTTP 请求，该 API 将根据硬编码参数或请求包含的参数发送电子邮件。在客户端，您只需设置一个 AJAX 请求来调用此服务器端脚本。您可以使用 Perl、PHP、Python 等来完成此操作。

# build - [MSBuild]::Add 调用返回错误 MSB4186

> ID：13847857
> 
> 赞同：6
> 
> 时间：2012-12-12T20:15:01.483
> 
> 标签：build, msbuild, build-automation, versioning

MSBuild 引擎为 '$([MSBuild]::Add($(OldRevision), 1))' 语句返回错误 MSB4186。我正在使用[此处](http://msdn.microsoft.com/en-us/library/dd633440.aspx)的示例，但它对我不起作用：

```
error MSB4186: Invalid static method invocation syntax:
"[MSBuild]::Add($(OldRevision), 1)". Input string was not in a correct format.
Static method invocation should be of the form: $([FullTypeName]::Method()),
e.g. $([System.IO.Path]::Combine(`a`, `b`)) 
```

这是我要执行的操作：

```
<CreateProperty Value="$([MSBuild]::Add($(OldRevision), 1))">
  <Output
      TaskParameter="Value"
      PropertyName="NewRevision" />
</CreateProperty> 
```

我想知道它的正确语法是什么

ps 是的，我使用的是 MSBuild 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:14:08.637

我认为你的这个属性语法是正确的，它只是在 CreateProperty 任务中不起作用。CreateProperty 函数已被弃用，使用它的理由很少。

这种更简单的属性语法对我有用：

```
<PropertyGroup>
    <NewVersion>$([MSBuild]::Add($(OldVersion), 1))</NewVersion>
</PropertyGroup> 
```

这也有效（在任何目标内）：

```
<Message Text="OldVersion=$(OldVersion), NewVersion=$([MSBuild]::Add($(OldVersion), 1))" /> 
```

# perl - 此类中未实现的功能 - perl 错误

> ID：13847859
> 
> 赞同：0
> 
> 时间：2012-12-12T20:15:20.657
> 
> 标签：perl, yaml, cpan

[http://cpansearch.perl.org/src/MSTROUT/YAML-0.84/lib/YAML/Loader/Base.pm](http://cpansearch.perl.org/src/MSTROUT/YAML-0.84/lib/YAML/Loader/Base.pm)

如果我打

```
die 'load() not implemented in this class.'; 
```

这意味着什么？

我是一个完整的 perl 新手，并试图学习/调试为什么我会看到这个错误。

这是否意味着，我应该在其他地方（重载）实现 load() 而我不应该到达这里？

我的代码是：

```
try.pm

use YAML;
my $yaml = YAML::LoadFile( $params{'filename'} ); 
```

转到 YAML.pm，其中有：

```
field loader_class => 'YAML::Loader'; 
```

并调用 LoadFile() 并执行以下操作：

```
Load(do { local $/; <$IN> }); 
```

调用 Load()

```
$yaml->loader_class($YAML::LoaderClass)
    if $YAML::LoaderClass; 
```

这就是我看到错误的地方：YAML/Loader/Base.pm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:50:42.240

YAML::Loader::Base 被用作提供一些通用功能的基类。`load`必须在基类中被覆盖。

尝试升级 YAML。您的版本中似乎存在错误。

# javascript - 使用 javascript (Firefox、Opera 和 IE) 隐藏 iframe 的滚动条

> ID：13847860
> 
> 赞同：1
> 
> 时间：2012-12-12T20:15:40.220
> 
> 标签：javascript, internet-explorer, firefox, iframe, opera

我有[一个需要在没有 javascript 的情况下工作的网站](http://planner.gvb.reizenapp.nl/advice?utf8=%E2%9C%93&plan%5Binput_from%5D=Lindenlaan,%20Amstelveen&plan%5Binput_from_pred_id%5D=4d3a67b9868060eaab4a92cf5d9932bf5b12f3d6&plan%5Binput_from_loc%5D=52.2939036,4.855229699999995&plan%5Binput_to%5D=Lindengracht,%20Amsterdam&plan%5Binput_to_pred_id%5D=3d9fc242ce093e749c5bb23227d6a61a53aec8e3&plan%5Binput_to_loc%5D=52.3800625,4.884104200000024&plan%5Bendpoint_date_time%5D=12-12-2012%2020:18&plan%5Bendpoint_type%5D=Vertrek&plan%5Btransports%5D%5B%5D=bus&plan%5Btransports%5D%5B%5D=train&plan%5Btransports%5D%5B%5D=metro&plan%5Btransports%5D%5B%5D=ferry&plan%5Btransports%5D%5B%5D=tram)。

在这个网站中，我展示了一个包含页面主要内容的 iframe。由于没有 javascript 要求，我必须首先通过滚动显示 iframe。当没有 javascript 时，我想要滚动条。

如果 javascript 可用，我会调整 iframe 的大小。我必须这样做，因为页面的内容发生了变化。调整框架大小时是否可以删除滚动条？Chrome 和 Safari 在内容适合时隐藏 iframe 滚动条，因此没有问题。

这可能在：

*   火狐 13
*   即 9
*   歌剧 12

我尝试在 javascript 中执行以下操作：

```
var iframe = document.getElementById('planneriframe'); 
iframe.setAttribute('style', 'style="overflow: hidden;"');
iframe.setAttribute('verticalscrolling', 'no"');
iframe.setAttribute('scrolling', 'no"'); 
```

它确实添加/更改了所有属性，但滚动条并未隐藏。

欢迎采用另一种方法或使用 JavaScript 的解决方案。

更新

更好的网站链接：http: [//planner.gvb.reizenapp.nl/advice](http://planner.gvb.reizenapp.nl/advice) 这不包含用于调整 iframe 大小的 javascript，但我认为这并不相关。

# c# - WP8 上的 HttpWebRequest.BeginGetResponse

> ID：13847862
> 
> 赞同：3
> 
> 时间：2012-12-12T20:15:45.663
> 
> 标签：c#, httpwebrequest, windows-phone-8, httpwebresponse, portable-class-library

我再次遇到了 PCL（可移植类库）中的 WebRequest 问题。

我有这段代码：

```
 static ManualResetEvent allDone = new ManualResetEvent(false);
    static string doc;

    static public void AddAnime(string encodedLogin, string id, int episodes, int status, int score)
    {
        if (string.IsNullOrEmpty(encodedLogin))
        {
            throw new ArgumentException();
        }
        else
        {   
            doc = String.Format("anime_id={0}&status={1}&episodes={2}&score={3}", id, "watching", episodes, score);

            HttpWebRequest request = HttpWebRequest.CreateHttp("http://mal-api.com/animelist/anime");

            request.Method = "POST";
            request.Headers["Authorization"] = encodedLogin;

            request.BeginGetRequestStream(new AsyncCallback(GetRequestCallBack), request);

            allDone.WaitOne();

            s.ToString();
        }
    }

    static private void GetRequestCallBack(IAsyncResult aResult)
    {
        HttpWebRequest request = (HttpWebRequest)aResult.AsyncState;

        Stream postStream = request.EndGetRequestStream(aResult);

        byte[] byteArray = Encoding.UTF8.GetBytes(doc);

        postStream.Write(byteArray, 0, doc.Length);
        postStream.Flush();

        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
    }

    static private void GetResponseCallback(IAsyncResult asyncResult)
    {
        HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;

        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asyncResult);

        Stream dataStream = response.GetResponseStream();
        StreamReader streamReader = new StreamReader(dataStream);

        string responseString = streamReader.ReadToEnd();

        //Do something with string here

        allDone.Set();
    } 
```

现在，问题是，当我调用`AddAnime`示例控制台应用程序时，它运行得非常好，但是当我从我的 WP8 设备或模拟器 (WXGA) 调用它时，它会卡在`BeginGetResponse`. 它根本不进入`GetResponseCallback`（用断点测试），也不会直接在任何代码之后继续`BeginGetResponse`。我已经等了两分钟多，应该会抛出一个`TimeOutException`（我认为），但即便如此，什么也没发生。

我测试过：

*   控制台应用程序（工作）
*   WP8 WXGA 模拟器（不工作）
*   WP8 设备已连接（不起作用）
*   WP8 设备已断开连接（不起作用）

对于我的 PCL，我的目标是：

*   SL4 及更高版本
*   WP7 及更高版本
*   Windows 商店
*   .NET 4.5

我怎么能解决这个问题？PCL不是用来保证交叉兼容性的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:49:52.423

Windows Phone（和 Silverlight，我认为）明确阻止您等待 UI 线程上的网络操作的结果。您需要将线程的控制权返回给调用者 - 如果您尝试阻止它，那么您将死锁。

最简单的方法是使用 Tasks 和 async/await。我们发布了一个[Async Targeting Pack](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)，它将这种支持添加到您所针对的平台（以及针对它们的可移植类库）。请注意，不支持 Windows Phone 7.0，您需要选择 Windows Phone 7.1/7.5（这是同一件事，但不同地方使用不同的版本号）。

# ccr - 如何安全地处理 CCR Dispatcher、DispatcherQueue 和 Interleave

> ID：13847863
> 
> 赞同：1
> 
> 时间：2012-12-12T20:15:47.607
> 
> 标签：ccr, robotics-studio

我正在尝试找到处理相互关联的 CCR Dispatcher、DispatcherQueue 和 Interleave 的最佳方法。我有一个类说“MyClass”，它有一个调度程序和一个调度程序队列。该类公开了一个端口集，客户端可以向其发布消息。在“MyClass”中，我为这些消息创建了持久接收器并附加到调度程序队列。我还将所有接收器添加为单个交错的一部分。现在，当客户认为使用“MyClass”类完成时，我希望客户安全地销毁该类。这里需要销毁三样东西，即调度程序、调度程序队列和交错。最好的方法是什么？我碰巧阅读了链接中的讨论[http://channel9.msdn.com/shows/Going+Deep/CCR-Programming-Jeffrey-Richter-and-George-Chrysanthakopoulos/](http://channel9.msdn.com/shows/Going+Deep/CCR-Programming-Jeffrey-Richter-and-George-Chrysanthakopoulos/)。虽然没有明确提及，但我推断 Dispose 的正确方法是我需要先向 interleave 发布一条拆除消息，等待 interleave 拆除然后处置调度程序队列。现在，我的班级的处置代码将如下所示。

```
var teardownInterleave = new TeardownInterleave();
InternalMessagesPort.PostUnknownType(teardownInterleave);
var done = new ManualResetEvent(false);
Activate(Arbiter.Receive(false, teardownInterleave.CompletionPort,
    emptyValue => done.Set()));
done.WaitOne();
Thread.Sleep(100);

// Dispose the TaskQ
TaskQueue.Dispose();

/// <summary>
/// Message posted to any interleave asking it to teardown.
/// </summary>
public sealed class TeardownInterleave
{
    /// <summary>
    /// Gets the completion port.
    /// </summary>
    /// <value>
    /// The completion port.
    /// </value>
    public Port<EmptyValue> CompletionPort { get; private set; }

    /// <summary>
    /// Initializes a new instance of the <see cref="TeardownInterleave" /> class.
    /// </summary>
    public TeardownInterleave()
    {
        CompletionPort = new Port<EmptyValue>();
    }
} 
```

请澄清这是正确的方法还是我遗漏了什么。

谢谢，

文卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T01:03:00.577

**次要注意**：在 InternalMessagesPort 上，您不需要使用 PostUnknownType，您应该能够使用 Post()

您唯一需要处理的是 Dispatcher，其他一切都应通过垃圾收集自行处理。

一般来说，CCR 对象（端口、任务、接收器、因果关系等）可以很好地与 GC 配合使用。简单来说，只要没有对端口的引用，那么与它关联的所有其他内容也将被收集（当然假设没有其他引用）。

DispatcherQueues 在拥有的 Dispatcher 被释放时被清理。

# php - 如何使用 scandir （或其他方法）按字母顺序对目录结果进行排序？

> ID：13847864
> 
> 赞同：-2
> 
> 时间：2012-12-12T20:15:49.230
> 
> 标签：php, arrays, sorting, readdir, scandir

根本不熟练使用PHP。我使用来自另一个站点的旧代码（我没有编写）为客户创建 CMS。问题是，这里的目录结果不是按字母顺序返回的。我已经读过 scandir 会这样做，而 readdir 不会。我也知道数组或任意数量的排序函数也可以工作......我只是不知道该怎么做:) 任何帮助将不胜感激。

```
<select name="image1[<?print($i);?>]">
<option value="none.gif">no photo available</option>
<?
$handle = opendir($art_image);
while ($file = readdir($handle)) {
    if ($file !="." && $file !="..") {
        option($file,$row["image1"]);
    }
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:30:06.447

```
<select name="image1[<?print($i);?>]">
<option value="none.gif">no photo available</option>
<?

while ($item = scandir($art_image, SCANDIR_SORT_DESCENDING)) 
{
    if ('.' !== $item[0]) // skip . .. and hidden files all in one swoop
    {
        option($item, $row['image1']);
    }
}

?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T11:49:21.037

您可以简单地使用[scandir](http://php.net/manual/en/function.scandir.php "scandir - 列出指定路径内的文件和目录")，然后使用[sort() 对 array() 进行排序](http://fr2.php.net/manual/en/function.sort.php "sort - 对数组进行排序")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:24:42.257

```
while ($file = scandir($art_image)) {
... 
```

那应该为你做。scandir 不需要句柄。

# ruby-on-rails-3 - 将 JQuery Datepicker 数据传递给 Rails 控制器

> ID：13847871
> 
> 赞同：0
> 
> 时间：2012-12-12T20:16:12.467
> 
> 标签：ruby-on-rails-3, jquery

我是 Rails 和 JQuery 的新手，所以我会尽力解释这一点。我正在尝试将我的 JQuery datepicker 值传递给我的 rails 控制器。该页面上有我希望用户能够根据日期范围过滤的数据。关于这个主题有许多不同的帖子：

[将变量从 jquery 传递到 rails 控制器](https://stackoverflow.com/questions/11211433/passing-the-variables-from-from-jquery-to-rails-controller)

[如何将变量从 AJAX 表单传递到控制器？](https://stackoverflow.com/questions/11842978/how-to-pass-variables-from-ajax-form-into-controller)

我试图遵循这些帖子的指导，但我仍然遇到问题。

这是我的部分 _ **dateFilter.html.erb** =>

```
 <%= form_tag({:controller => 'events', :action => 'dateFilter', :class => 'date_form'}, :remote => true) do %>
    <%= datepicker_input "event", :start_date, :class => 'dateFilter', :dateFormat => 'mm/dd/y' %>
    <%= datepicker_input "event", :end_date, :class => 'dateFilter', :dateFormat => 'mm/dd/y' %>
    <%= submit_tag "Submit" %>
    <% end %> 
```

这是生成的**HTML** =>

```
 <form accept-charset="UTF-8" action="/events/dateFilter?class=date_form" data-remote="true" method="post">
    <input class="dateFilter" id="event_start_date" name="event[start_date]" size="30" type="text" /><script type="text/javascript">

   //<![CDATA[
   jQuery(document).ready(function(){jQuery('#event_start_date').datepicker({"dateFormat":"mm/dd/y"})});
   //]]>
   </script>

   <input class="dateFilter" id="event_end_date" name="event[end_date]" size="30" type="text" /><script type="text/javascript">

   //<![CDATA[
   jQuery(document).ready(function(){jQuery('#event_end_date').datepicker({"dateFormat":"mm/dd/y"})});
   //]]>
   </script>

   <input name="commit" type="submit" value="Submit" />
   </form> 
```

这是**dateFilter.js.erb** =>

```
$('.dateFilter').append('<%= escape_javascript(render(@events)) %>'); 
```

这是**events_controller** =>

```
 def dateFilter
   @events = Event.find(:all, :conditions => ["EVENT_DATE_TIME_LOCAL BETWEEN ? AND ?", params[:start_date], params[:end_date]])

  respond_to do |format|
      format.html
      format.json { render json: @events }
      format.js
  end
end 
```

最后是**application.js** =>

```
$(document).ready(function() {

  $('#date_form').submit(function (){  

    $.ajax({
     type: 'POST',
     url: "/events/dateFilter", 
     beforeSend: function (xhr) {xhr.setRequestHeader("Accept", "text/javascript");},
     data: { 'start_date' : $("input[name='event[start_date]']").datepicker(), 'end_date' : $("input[name='event[end_date]']").datepicker()}
     success: function(data) { <%= render "events/dateFilter" %>}
    });

 }); 
```

这是来自服务器的**日志数据**=>

```
Started POST "/events/dateFilter?class=date_form" for 127.0.0.1 at 2012-12-12 15:09:39 -0500
Processing by EventsController#dateFilter as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"J/HU+DxNmIwEhu3keN071k6MGCCD/n/1UhXUD0MkH1Q=", "event"=>{"start_date"=>"12/06/12", "end_date"=>"12/13/12"}, "commit"=>"Submit", "class"=>"date_form"}
  Event Load (1.7ms)  SELECT "TBLEVENT".* FROM "TBLEVENT" WHERE (EVENT_DATE_TIME_LOCAL BETWEEN NULL AND NULL)
  Rendered collection (0.0ms)
  Rendered events/dateFilter.js.erb (0.3ms)
Completed 200 OK in 8ms (Views: 3.4ms | ActiveRecord: 1.7ms) 
```

问题之一是我不断为我试图传递的数据值获取“NULL”。我什至不确定我是否正确地解决了这个问题，对此的任何帮助/反馈将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:53:15.760

根据您的日志数据，这是在`Parameters`：

```
"event"=>{"start_date"=>"12/06/12", "end_date"=>"12/13/12"} 
```

这意味着`start_date`and`end_date`位于一个名为 的 Hash 中`event`，因此您的控制器应如下所示：

```
def dateFilter
    eventIn = params[:event]
    @events = Event.find(:all, :conditions => ["EVENT_DATE_TIME_LOCAL BETWEEN ? AND ?", eventIn[:start_date], eventIn[:end_date]])

    respond_to do |format|
       format.html
       format.json { render json: @events }
       format.js
    end
end 
```

另一件小事 -`form_tag` `class`应该像这样设置：

```
<%= form_tag({:controller => 'events', :action => 'dateFilter'}, :class => 'date_form', :remote => true) do %> 
```

# objective-c - UIImagePickerController 到另一个 ViewController

> ID：13847872
> 
> 赞同：-1
> 
> 时间：2012-12-12T20:16:16.930
> 
> 标签：objective-c, ios, xcode

如何将图像从 UIImagePickerController 显示到另一个 ViewController.xib？

我有“ViewController1”，在这里我得到了这个代码：

```
- (IBAction)goCamera:(id)sender {

    UIImagePickerController * picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
    [self presentModalViewController:picker animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissModalViewControllerAnimated:YES];
    UIImageView *theimageView = [[UIImageView alloc]init];
    theimageView.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

} 
```

我怎样才能去“ViewController2”并在那里显示拍摄的照片？我使用 ViewController1 拍摄照片，我想在 ViewController2 中显示这张拍摄的照片，其中我有一个 UIImageView。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:56:27.693

最好的方法是在您收到图像后立即将图像保存在应用程序的文件夹中。

*这很重要*，因为它有助于**内存管理**。

您可以放开图像数据，而不是在应用程序中传递它。

我使用类似于以下的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage *originalImage, *editedImage, *imageToSave;
    editedImage = (UIImage *) [info objectForKey:
                               UIImagePickerControllerEditedImage];
    originalImage = (UIImage *) [info objectForKey:
                                 UIImagePickerControllerOriginalImage];
    imageToSave = (editedImage!=nil ? editedImage : originalImage);

    // Check if the image was captured from the camera
    if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {
        // Save the image to the camera roll
        UIImageWriteToSavedPhotosAlbum(imageToSave, nil, nil, nil);
    }

    NSString *docspath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *filepathJPG = [docspath stringByAppendingPathComponent:@"imagefile.jpg"];

    NSData *data = UIImageJPEGRepresentation(imageToSave, 0.8);
    BOOL result = [data writeToFile:filepathJPG atomically:YES];
    NSLog(@"Saved to %@? %@", filepathJPG, (result? @"YES": @"NO") );

    [picker dismissModalViewControllerAnimated:YES];
} 
```

然后在您的其他视图控制器中，无论您希望加载图像（viewDidLoad、viewWillAppear 还是其他任何地方），都放：

```
NSString *docspath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString *filepathJPG = [docspath stringByAppendingPathComponent:@"imagefile.jpg"];

UIImage *img = [UIImage imageWithContentsOfFile: filepathJPG];
if (img != nil) {
    // assign the image to the imageview, 
    myImageView.image = img;

    // Optionally adjust the size
    BOOL adjustToSmallSize = YES;
    CGRect smallSize = (CGRect){0,0,100,100};
    if (adjustToSmallSize) {
        myImageView.bounds = smallSize;
    }

}
else {
    NSLog(@"Image hasn't been created");
} 
```

希望有帮助

# matlab - Matlab：真正的全局变量

> ID：13847873
> 
> 赞同：5
> 
> 时间：2012-12-12T20:16:17.497
> 
> 标签：matlab, global-variables

> **可能重复：**
> [在 MATLAB 中声明全局变量](https://stackoverflow.com/questions/4911926/declaring-a-global-variable-in-matlab)

目前我的 matlab 代码在一个没有内部函数的大脚本文件中。我想在我的脚本中声明函数，以使我的代码更具可读性和重用代码等。这在 matlab 中本身并不难，例如

示例 1：

```
function main()
  myfunc('goat');
end

function myfunc(x)
  fprintf(x);
end 
```

我的问题是我有一个 biig 数据文件，我只想加载一次，这样我就可以在开发过程中重新运行我的代码，而无需花费时间重新加载数据。在我当前的框架中，这不是问题，它有一个没有内部函数的大脚本。一种解决方案是拥有两个 matlab 脚本文件。一个用于加载数据，然后在另一个脚本中调用函数。

但是在上面的示例 1 中，真正的全局变量声明将不起作用，并且每次运行脚本时我都被迫加载 biig 文件。我想做的可以用两个例子来展示：

示例 2：

```
% Global variable
if ~exist('data',var) 
  data = load biigdatafile.mat;  %FAILS, outside function.
end

function main()
  myfunc('goat');
end

function myfunc(x)
  fprintf(x);
end 
```

示例 3：

```
function main()
  % Global variable
  if ~exist('data',var)
    global data;     % Is not really global after whole script is completed.
    data = load biigdatafile.mat;
  end
  myfunc('goat');
end

function myfunc(x)
  fprintf(x);
end 
```

所以我的问题是如何声明一个真正的全局变量，如示例 2 所示，我在其中加载一次数据以留在工作区中，同时在一个脚本中调用我的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:50:23.103

## 使用输入参数，这就是它们的用途

您可以只使用主函数的参数，将数据集加载到基础工作区中，然后使用该数据集作为参数调用您的函数。如果任何子功能也使用数据集，请将其传递

```
function main(data)
    if nargin<1
        disp('hey, you forgot to supply the dataset!');
    end
    % do your stuff
    showData(data);
end 
```

然后在基础工作区中：

```
Data = load('biigdatafile.mat');
main(Data); 
```

## 使用[持久变量](http://www.mathworks.nl/help/matlab/ref/persistent.html)

> `persistent X Y Z`将`X`、`Y`和定义`Z`为声明它们的函数的局部变量；但是它们的值在函数调用之间保留在内存中。持久变量类似于全局变量，因为 MATLAB 软件为两者创建了永久存储。它们与全局变量的不同之处在于，持久变量只有在其中声明它们的函数才知道。

所以你可以很容易地使用：

```
function main()
    persistent data;
    if isempty(data)
        disp('loading dataset');
        data=load('biigdatafile.mat');
    end
    % do your stuff
    showData(data);
end 
```

第一次在已清除的基础工作区或已清除的函数*上调用此函数时，将加载数据集。每次下一次（当函数没有被编辑时），数据集已经/仍然在内存中。

当我只使用一个数据集时，我通常会这样做；总是加载数据集很乏味，在测试函数时，只需按 F5 也更容易。

* 您可能会问什么时候清除一个功能？

> 每当您清除或修改内存中的函数时，MATLAB 也会清除该函数声明的所有持久变量。要在 MATLAB 退出之前将函数保留在内存中，请使用[mlock](http://www.mathworks.nl/help/matlab/ref/mlock.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:31:40.347

全局变量必须在使用它们的任何地方声明。只需将它添加`global data`到您需要的任何地方，它就会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:22:07.100

它不是在 matlab 中声明全局变量的重复。全局变量只能访问所有函数，但是当脚本完成时，全局变量已经消失，我需要再次将它们读入内存。

我需要将局部变量移动到基础工作区，然后在其他函数调用期间再次访问它。我实际上自己解决了它，现在用这段代码

```
function main()
  try
    Data = evalin('base','Data'); % Move back from base workspace
    fprintf('Already loaded...\n');
  catch
    fprintf('Loading data...');
    data = load biigdatafile.mat;
    assignin('base', 'Data', Data); % Move to base workspace
    fprintf('Ok\n');
  end

  showDocID(Data{1});
end

function showData(Data)
  fprintf(['Data: "' Data '"\n']);
end 
```

# java - 使用javacv opencv跟踪带有矩形的移动对象

> ID：13847874
> 
> 赞同：1
> 
> 时间：2012-12-12T20:16:17.320
> 
> 标签：java, opencv, javacv

我目前正在做项目的一部分，使用 javacv 在视频中围绕移动对象创建矩形。我使用了这段代码，当我运行它时，我收到一个名为“此指针地址为空”的错误。任何人都可以帮助我吗？谢谢你

```
 while(true) {
        colourImage = cvQueryFrame( capture );

    if( colourImage==null ) break;

    //If this is the first time, initialize the images.
    if(first)
    {
    difference = colourImage.clone();
    temp = colourImage.clone();  

    cvConvertScale(colourImage, movingAverage, 1.0, 0.0);
first = false;
    }       

    //else, make a running average of the motion.
    else
    {

    cvRunningAvg(colourImage, movingAverage, 0.020, null);
    }

    //Convert the scale of the moving average.
    cvConvertScale(movingAverage,temp, 1.0, 0.0);

    //Minus the current frame from the moving average.
    cvAbsDiff(colourImage, temp, difference);

    //Convert the image to grayscale.
    cvCvtColor(difference,greyImage,CV_RGB2GRAY);

    //Convert the image to black and white.
    cvThreshold(greyImage, greyImage, 70, 255, CV_THRESH_BINARY);

    //Dilate and erode to get people blobs
    cvDilate(greyImage, greyImage, null, 18);

    cvErode(greyImage, greyImage, null, 10);

    CvSeq contour=new  CvSeq();
    CvMemStorage storage=CvMemStorage.create();
    cvFindContours(greyImage, storage, contour, Loader.sizeof(CvContour.class), CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);

    System.out.println(contour.total()); 
```

# django - 我应该将字典传递给我的模板吗？

> ID：13847875
> 
> 赞同：0
> 
> 时间：2012-12-12T20:16:18.200
> 
> 标签：django, django-templates, django-views

作为一个新手，我正在努力弄清楚什么属于哪里。我有一个`ListView`列出系统中所有用户的方法，它包括一个`get_queryset`方法 - 类似于：

```
def get_queryset(self):
    users = []
    for user in User.objects.all(): 
        a_user = {}            
        a_user['username'] = user.username
        a_user['full_name'] = user.get_full_name()
        a_user['num_of_friends'] = len(user.friends.all())  
        a_user['phone_num'] = user.get_profile().phone_num

        a_user['has_subscription'] = bool(Subscription.objects.filter(subscriber=self.request.user))

        users.append(a_user)
    return users 
```

因此，我不是返回用户的查询集，而是根据每个用户的各种选择属性制作这个字典，模板设计者得到的仅限于我认为他们应该拥有的。

将用户对象传递给模板并让模板编写者从他们那里得到他们需要的任何东西是更好的做法吗？我想答案是肯定的。

但是，当谈到`a_user['has_subscription']`上面的那一行时，我认为答案是否？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:08:52.383

你这样做的方式完全没问题。我发现通过在视图中显式提供模板所需的信息来将我的模板与模型分开是很有用的，这基本上就是您所做的。[不](http://lukeplant.me.uk/blog/posts/djangos-cbvs-were-a-mistake/)`get_queryset`从一个名为最后，与组织视图代码的教条方式相反。抽象根本不像 Django ORM 那样干净。

如果你真的想要一些更漂亮的东西，你可以尝试使用该[`values`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)方法来缩小你的查询集，并在订阅计数中添加一个注释。但应该没什么太大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:42:28.313

这取决于您要对数组“用户”做什么。编辑模板的人只能以某种方式设置和显示数据的样式。get_queryset 函数可以为模板提供数据。

# c - Splint 静态代码分析分段错误

> ID：13847881
> 
> 赞同：1
> 
> 时间：2012-12-12T20:16:46.100
> 
> 标签：c, static-analysis, splint

嘿，我正在尝试对我编写的 ac cqde 项目进行一些静态分析，但是夹板给了我一个错误

```
$ splint -preproc ASL_ACAN.c
Splint 3.1.1 --- 28 Apr 2003
*** Segmentation Violation
*** Location (not trusted): Command Line
*** Last code point: llmain.c:659
*** Previous code point: llmain.c:588
*** Please report bug to splint-bug@splint.org 
```

甚至不确定从哪里开始，有人有什么建议吗？基本上这个项目中的任何文件都会返回这个错误

# html - iOS APNS 创建消息

> ID：13847885
> 
> 赞同：1
> 
> 时间：2012-12-12T20:16:54.530
> 
> 标签：html, ios, apple-push-notifications

> **可能重复：**
> [如何在 iPhone 通知警报消息或 SMS 上的纯文本中添加换行符](https://stackoverflow.com/questions/1151933/how-to-add-linebreak-in-iphone-notification-alert-message-or-plain-text-on-sms)

是否可以`<br>`在发送到 APNS 服务器/设备的消息中添加一个，以便您在消息中获得中断？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:35:47.583

在 Objective-C 中，您可以使用`\n`来表示换行符。

例如

`Hello\nworld!`

将输出：

你好
世界！

# model-view-controller - 使用正则表达式验证 MVC 验证器中的字符串

> ID：13847886
> 
> 赞同：1
> 
> 时间：2012-12-12T20:16:55.400
> 
> 标签：model-view-controller

我试图掌握正则表达式的概念，但似乎遗漏了一些东西。

我想确保有人在字段中输入以 .wav 结尾的字符串。应该是一个非常简单的正则表达式。

我试过这个...... [RegularExpression(@"$.wav")] 但似乎不正确。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:24:58.240

`$`是字符串结尾的锚点，所以`$.wav`没有任何意义。字符串结尾后不能有任何字符。此外，`.`正则表达式具有特殊含义（仅表示“任何字符”），因此您需要对其进行转义。

尝试写作

```
\.wav$ 
```

如果这不起作用，请尝试

```
.*\.wav$ 
```

（这取决于`RegularExpression`属性是要匹配整个字符串，还是只匹配其中的一部分。`.*`意思是“任何字符，0 次或更多次”）

您应该考虑的另一件事是如何处理字段中的额外空白。用户有在输入中添加额外空白的可怕习惯——这就是为什么各种`.Trim()`功能如此重要的原因。在这里，`RegularExpressionAttribute`可能会在您修剪输入之前进行评估，因此您可能想要编写以下代码：

```
.*\.wav[\s]*$ 
```

该`[\s]*`部分表示“任何空白字符（制表符、空格、换行符等）0 次或更多次”。

您应该阅读有关正则表达式的教程。像这样的简单问题并不难理解。当我学习时，我发现这个网站非常方便：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# hadoop - 如何在 Hadoop 中定义共享（全局）变量？

> ID：13847887
> 
> 赞同：2
> 
> 时间：2012-12-12T20:17:11.333
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我需要一个可在所有映射器和化简器之间访问的共享（全局）变量。Mappers 只是从中读取值，但 reducer 会更改一些值以在其中的下一次迭代中使用。我知道 DistributedCache 是一种技术，但它只支持读取共享值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:09:08.220

这正是[ZooKeeper](http://zookeeper.apache.org/)的目的所在。ZooKeeper 可以跟上来自 mapper/reducer 的大量读取，并且仍然能够不时地写一些东西。

另一个选项是[在配置对象中设置值](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/conf/Configuration.html#set%28java.lang.String,%20java.lang.String%29)。但是，这仅针对单个作业在全局范围内持续存在。您必须自己管理此值在作业之间的传递。此外，您不能在作业运行时结束此操作。

# savefiledialog - 使用 VW7.8/Jun789 JunFileDialog 进行文件保存并希望下次记住选择的目录

> ID：13847889
> 
> 赞同：3
> 
> 时间：2012-12-12T20:17:16.673
> 
> 标签：savefiledialog, visualworks

我正在使用 VW7.8/Jun789 JunFileDialog 将文件另存为，并希望下次记住/设置所选目录。我正在关注 JunFileDialog 类 example5。我想在 onAccept: 块中这样做应该是可能的，但到目前为止我还没有成功。

除了 JunFileDialog>>request 中的示例之外，我无法理解在何处或如何设置 initialDirectory：messageString initialDirectory：directoryFilename initialFile：filenameString fileTypeMenu：aMenu initialFileType：fileType onAccept：acceptBlock onCancel：cancelBlock。

是否有更好的文件保存对话框可供使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:02:07.730

您可以使用 VisualWorks 的 Dialog 类。在类方面，它具有“文件名对话框”协议。在那里你可以找到像#requestFileName:default: 或#requestNewFileName:default: 这样的方法。两者都应该在 Windows 和 Mac OS X 上显示一个本机对话框，默认为最后打开的文件夹。

# linux - MDADM 暂停 Raid 重新同步以启用位图

> ID：13847896
> 
> 赞同：4
> 
> 时间：2012-12-12T20:17:45.943
> 
> 标签：linux, ubuntu, raid

我有一个 3x3TB 的团队，它决定在我计划扩大团队的那一天开始重新同步。这是几天前的事情，重新同步尚未完成。它没有完成的原因是因为无论出于何种原因，机器硬停顿（完全无响应）似乎是随机的。因此，由于我找不到突然随机挂起的原因，我想至少给我的团队一个重建的机会。我已经读过，如果我启用位图，那么它可以在崩溃时恢复重新同步，而不是从 0% 开始。

我试过了：

```
 checkarray -x /dev/md0 
```

这表示停止请求已在 /dev/md0 上排队，但它实际上从未停止。

接下来我尝试了这个：

```
 echo "idle" > /sys/block/md0/md/sync_action 
```

该文件中的文本立即更改回“重新同步”。

问题：

我需要找到一种方法来发出这个命令：

```
 mdadm --grow --bitmap=internal /dev/md0 
```

但是当我发出这个命令时，raid 不能重新同步。

有没有办法在启动时启用位图？我是否可以启动一个 live linux 发行版并让 raid 从那里重新同步（如果硬冻结是我的 Ubuntu 安装）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-16T16:27:28.097

实际上这是可能的，您可以失败并移除执行重新同步的设备，将内部位图添加到阵列，然后将设备添加回来，只需确保在拧入阵列之前检查所有设备是否正常。这就是我在这样一种情况下所做的：

```
mdadm --manage --fail /dev/md5 /dev/sdb8
mdadm --manage --remove /dev/md5 /dev/sdb8
mdadm --grow /dev/md5 --bitmap=internal
mdadm --manage --add /dev/md5 /dev/sdb8 
```

结果如下：

```
md5 : active raid10 sdb8[0] sdd8[3] sdc8[2] sda8[1]
      1731712000 blocks super 1.1 512K chunks 2 near-copies [4/3] [_UUU]
      [>....................]  recovery =  0.4% (3681152/865856000)     finish=1391.9min speed=10322K/sec
      bitmap: 8/13 pages [32KB], 65536KB chunk 
```

当然，您最好只等待重新同步并添加位图，以防您无法暂停它，但是如果您希望重新同步在完成之前可能会失败并且不想等待它再次从开始这就是你可以做到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:13:39.583

没有办法克服重新同步，在将位图放入其中之前，数组应该是干净的。

# java - 使用 Java RegEx 查找以大写开头并包含小写的单词

> ID：13847898
> 
> 赞同：1
> 
> 时间：2012-12-12T20:17:47.797
> 
> 标签：java, regex

所以我使用 Java Regex 来查找首字母缩写词。我得到的大多数首字母缩写词都是大写的，这很好，我有正则表达式，因为我需要的是一个正则表达式，用于包含一个小写字母的单词，其余的都是大写字母，如 CCaRS。我可以为此使用什么正则表达式？下面是我正在使用的全部大写 Regex 的示例。

```
 String twoPlusUCRegEx = "[A-Z][A-Z]+"; 
```

缩略语示例：CCaRS、MiDAE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:32:06.210

这应该有效（以大写字母开头的任何字母组合，包括 2 个或更多大写字母）：

```
String twoPlusUCRegEx = "([A-Z][a-z]*){2,}"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-28T10:24:06.060

```
String regex = "\\b([A-Z])(\\S*?)\\b"; 
```

试一试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:19:22.370

以下正则表达式应该可以工作：

```
[A-Z]+[a-z][A-Z]* 
```

解释：

```
[A-Z]+   # one or more uppercase characters
[a-z]    # exactly one lowercase character
[A-Z]*   # zero or more uppercase characters 
```

请注意，您的文本正文暗示该字符串不需要以大写字符开头，但您的标题表明它确实如此。请澄清是否要求以大写开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:21:35.923

怎么样：

```
([A-Z]+[a-z][A-Z]*)|([A-Z]*[a-z][A-Z]+) 
```

如果至少需要 1 个大写字母。

如果不：

```
[A-Z]*[a-z][A-Z]* 
```

# optimization - 如何从 jql 查询中删除元数据？

> ID：13847902
> 
> 赞同：1
> 
> 时间：2012-12-12T20:18:07.363
> 
> 标签：optimization, curl, filter, metadata, jira

我有以下`curl`命令：

```
curl -k -u sandboxer:sandboxer -D- -X POST -H "Content-Type: application/json" --data     
'{"jql":"project = BNAP AND resolution = null AND status != Resolved AND status !=    Rejected", 
"maxResults":2 ,
"fields":["KEY","versions","description","status","resolution"]}'
 https://127.0.0.1/rest/api/latest/search 1> newtest 
```

我收到一个带有元数据的 JSON 对象，

```
{"expand":"schema,names"
,"startAt":0
,"maxResults":2
,"total":74
... 
```

我感兴趣的是以下内容，`issues`. 我可以在我的应用程序中处理这个问题，但我想知道是否有一种方法可以告诉 JIRA '不要向我发送元数据'。有没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T01:13:18.090

使用 Speakeasy 插件创建自定义请求/响应作为 Jira 扩展：

*   [Speakeasy 插件](https://github.com/mrdon/speakeasy-plugin)
*   [安装 Speakeasy](https://developer.atlassian.com/display/DOCS/Installing+Speakeasy)
*   [开发 Speakeasy 扩展](https://developer.atlassian.com/display/DOCS/Developing+Speakeasy+Extensions)

# android - 在微调器中仅显示自定义布局的 TextView

> ID：13847903
> 
> 赞同：1
> 
> 时间：2012-12-12T20:18:13.027
> 
> 标签：android, spinner

我创建了一个扩展RelativeLayout 的自定义布局。它包含一个 ImageButton、一个 TextView 和一个 RadioButton。我也有一个微调器和一个 ArrayAdapter。当我初始化 ArrayAdapter 并将此自定义布局设置为布局资源并将此布局的 TextView 设置为 textViewResourceId 时，布局不仅显示在下拉视图中，还显示在微调器本身中。是否可以仅在微调器中显示 TextView？

# .net - 在 Adob e 阅读器中打开在代码隐藏中创建的 pdf 文件

> ID：13847904
> 
> 赞同：5
> 
> 时间：2012-12-12T20:18:13.293
> 
> 标签：.net, vb.net, winforms, pdf, adobe-reader

如何在 Adob​​e Reader 中打开我在代码隐藏中创建的 PDF 文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T20:57:18.073

如果您想使用与其有文件关联的应用程序打开 pdf，请执行以下操作：

```
Process.Start("C:\foo\bar\mybook.pdf") 
```

如果你想打开一个特定的应用程序（比如没有文件关联时的 Adob​​e Reader），通过将 pdf 文件路径作为命令行参数传递来做同样的事情。您需要从注册表中获取 AcroRd32.exe 的路径，因为人们可能安装了不同的版本，或者将其安装到了不同的位置。

```
Process.Start("C:\Program Files (x86)\Adobe\Reader 11.0\Reader\AcroRd32.exe", _
              "C:\foo\bar\mybook.pdf") 
```

第一个选项通常更好，因为您的软件将尊重您的最终用户在他们的计算机上选择的任何 pdf 阅读器，或者他们可能根本没有安装它。

# xml - 无法获取属性值

> ID：13847908
> 
> 赞同：1
> 
> 时间：2012-12-12T20:18:29.117
> 
> 标签：xml, sql-server-2008, xquery

我在表中类型为 xml 的列 XMLData 中有以下数据 -

```
<ns0:SR xmlns:ns0="http://Country.Regions" 
    xmlns:Country="http://Country.Regions/Types">
  <Sale Category="Heavy Load" Quantity="1" Value="110" />
</ns0:SR> 
```

我正在尝试从以下查询中获取 Quantity 的值，但出现错误-

```
select
    XmlData.value('(/SR/Sale[@Category="HeavyLoad"]/@Quantity)[1]', 'int')      
from Cars 
```

没有名为 的元素`Category`。我尝试删除`/SR/`仍然得到相同的错误。我是 XQuery 的新手。仅包含使用的答案将不胜感激`.value`。我们正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:26:21.890

首先，您需要**尊重**并使用在您的 XML 数据中定义的 XML 命名空间。其次，您的 XPath 中有一个错字（应该是`[@Category="Heavy Load"]`- 和之间有一个**空格**）`Heavy``Load`

试试这个：

```
;WITH XMLNAMESPACES ('http://Country.Regions' AS ns0)
SELECT
    XmlData.value('(/ns0:SR/Sale[@Category="Heavy Load"]/@Quantity)[1]', 'int') 
FROM Cars 
```

# ruby-on-rails-3 - MiniProfiler Ruby：获得更好的非 SQL 调用细分

> ID：13847912
> 
> 赞同：4
> 
> 时间：2012-12-12T20:18:37.197
> 
> 标签：ruby-on-rails-3, profiling, mvc-mini-profiler

我正在尝试使用 Mini Profiler 来分析我们的一些 Rails 控制器，但我想我正在尝试将它用于它不是为它构建的东西。我已经很好地分析了 SQL 查询，但我需要分解非 SQL 代码，因为我们在某些页面中看到了很多突突，但 SQL 似乎不是问题。

这是我正在谈论的截图： http: [//cl.ly/image/2J3i1C1c072O](http://cl.ly/image/2J3i1C1c072O)

您可以看到顶层 ( `Executing action: show`) 需要 9136 毫秒才能完成，但执行的查询只是总时间的一小部分。我想我要问的是是否有一种方法可以显示有关正在执行的代码的更多“详细”信息，或者我是否需要找到一个不同的工具来使用。不幸的是，New Relic 不是一个选择。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T02:21:21.757

您可以在您认为负责的区域中插入自定义步骤。

```
# in your initializer
Rack::MiniProfiler.profile_method SomeClass, "method"

# or 
Rack::MiniProfiler.step "some step" do 
  # your code
end 
```

此外，您可以运行[ruby​​-prof](https://github.com/rdp/ruby-prof)来弄清楚到处都在发生什么，然后进行战略性检测。

# ruby - ruby 浮点数根据顺序加起来不同的值

> ID：13847917
> 
> 赞同：6
> 
> 时间：2012-12-12T20:18:59.317
> 
> 标签：ruby, floating-point

所以这很奇怪。我在 Ruby 1.9.3 中，浮点加法没有像我预期的那样工作。

```
0.3 + 0.6 + 0.1 = 0.9999999999999999
0.6 + 0.1 + 0.3 = 1 
```

我已经在另一台机器上尝试过这个并得到相同的结果。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T20:56:07.037

浮点运算是不精确的：它们将结果四舍五入到最接近的可表示浮点值。
这意味着每个浮动操作是：

```
float(a op b) = mathematical(a op b) + rounding-error( a op b ) 
```

如上式所示，舍入误差取决于操作数 a 和 b。
因此，如果您以不同的顺序执行操作，

```
float(float( a op b) op c) != float(a op (b op c)) 
```

换句话说，浮点运算不是关联的。
虽然它们是可交换的......

正如其他人所说，将十进制表示 0.1（即 1/10）转换为基数 2 表示（即 1/16 + 1/64 + ... ）将导致无限的数字系列。所以 float(0.1) 不完全等于 1/10，它也有一个舍入误差，它会导致一长串二进制数字，这说明以下操作有一个非空舍入误差（数学结果不可表示）浮点数）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T20:25:01.970

之前已经说过很多次了，但需要重复一遍：浮点数本质上是十进制数的*近似值*。由于浮点数以二进制存储的方式，有些十进制数无法精确表示。*会*出现小但可察觉的舍入误差。

为了避免这种混乱，您应该始终将您的数字格式化为适当数量的展示位置：

```
 '%.3f' % (0.3 + 0.6 + 0.1)
 # => "1.000" 

 '%.3f' % (0.6 + 0.1 + 0.3)
 # => "1.000" 
```

这就是为什么将浮点数用于货币值是有风险的，并且通常鼓励您使用*定点数*或常规整数来表示这些东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T21:14:07.560

首先，将源文本中的数字“0.3”、“.6”和“.1”转换为浮点数，我将其称为*a*、*b*和*c*。这些值接近 0.3、0.6 和 0.1，但不等于它们，但这并不是您看到不同结果的直接原因。

在每个浮点算术运算中，可能会有一点舍入误差，一些小的数字*e* [i]。因此，您的两个表达式计算的确切数学结果是：

> ( *a* + *b* + *e* [0] ) + *c* + e [1]和 ( *b* + *c* + *e* [2] ) + *a* + e [3]。

也就是说，在第一个表达式中，*a*被添加到*b*中，并且存在轻微的舍入误差*e* [0]。然后加上*c*，有轻微的舍入误差*e* [1]。在第二个表达式中，*b*被添加到*c*中，并且存在轻微的舍入误差*e* [2]。最后加上*a*，有轻微的舍入误差*e* [3]。

您的结果不同的原因是*e* [0] + *e* [1] ≠ *e* [2] + *e* [3]。即，添加*a*和*b时所需的舍入与添加**b*和*c*时所需的舍入不同和/或两种情况的第二次添加所需的舍入不同。

有一些规则可以控制这些错误。如果您知道规则，则可以对它们进行推断，以限制最终结果中的错误大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T20:29:26.823

这是浮点数的一个常见限制，因为它们是以基数 2 而不是基数 10 编码的。这可能很难理解，但一旦你这样做了，你就可以轻松避免这样的问题。我推荐[这个指南](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，它深入解释它。

对于这个问题，您可以尝试将结果四舍五入到最接近的百万分之一位：

```
result = (0.3+0.6+0.1)
  => 0.9999999999999999
(result*1000000.0).round/1000000.0
  => 1.0 
```

至于为什么顺序很重要，它与四舍五入有关。当这些数字转换为浮点数时，它们将转换为二进制，并且它们都变成重复的分数，就像 ⅓ 是十进制一样。由于在每次加法过程中结果都会四舍五入，因此最终答案取决于加法的顺序。似乎在其中一个中，你得到了一个回合，而在另一个中，你得到一个回合。这解释了差异。

值得注意的是这两个答案之间的实际差异是什么：大约 0.0000000000000001。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T20:38:44.440

鉴于您还可以使用`number_with_precision`助手：

```
result = 0.3 + 0.6 + 0.1
result = number_with_precision result, :precision => 3 
```

# c# - web 应用程序的应用程序设置

> ID：13847918
> 
> 赞同：0
> 
> 时间：2012-12-12T20:19:00.493
> 
> 标签：c#, asp.net, .net, web-services, web-config

我知道以前有人问过类似的问题，但我问的有点不同。我知道如何使用 applicationSettings 等，但我想做的是把它变成一个配置。即，我有一个 Web 应用程序作为对类库的引用。这个类库有一个对 Web 服务的引用。为此，它创建了一个 .settings 文件。当我在 Web 应用程序中使用这个类库时，一切都在本地正常工作。但是，在登台和生产中，我希望 Web 服务有不同的 URL - 唯一的方法似乎是采用 applicationSettings 部分，并将其放在 Web 应用程序项目的 web.config 中。我试图避免混淆 web.config，那么有没有办法让这个 applicationSettings 部分在 web.config 引用的另一个文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:25:47.273

```
 <appsSettings configSource="appSettings.config" /> 
```

这会将整个应用程序设置部分移动到单独的文件中。

# java - Spring MVC 是否在每次调用时创建一个定义为 ModelAttribute 的新对象？

> ID：13847922
> 
> 赞同：4
> 
> 时间：2012-12-12T20:19:34.280
> 
> 标签：java, spring-mvc

我正在处理一组类似向导的页面，用户必须在几个视图中输入数据位才能进行最终提交，从而允许他们在最终提交完成之前来回切换。我试图对所有视图使用相同的 Bean，定义为 ModelAttribute，基本上只是将这个 Bean 像一个令牌一样传递，每个视图在其中添加它的一点点数据。

问题是 Spring MVC 似乎在调用时创建了一个新的 Bean。我公认的对模型的模糊理解是，它基本上就像将某些东西放入会话中，并且该对象会一直存在直到会话完成。情况似乎并非如此。

所以，我想第一个问题是……模型属性在哪里“存在”，持续多久？是否有更好的模式来实现仅使用 Spring MVC 的类似向导的界面（我受到限制并且不能使用 Web Flow ......它不是我工作的批准工具）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:47:51.373

将模型属性用作 bean 不是一个好习惯。在将表单数据持久化到数据库之前对其进行操作很有用。

`@ModelAttribute("formAttribute")`当您在方法中将其指定为参数时创建：

```
public void getForm(@ModelAttribute("formAttribute") Form form) {
} 
```

它是在每个方法调用之前通过调用其构造创建的：

```
@ModelAttribute("formAttribute")
public Form getForm() {
   return new Form();
} 
```

当方法参数中未指定时，它不存在。

可以通过在控制器上`@ModelAttribute`定义将您添加到会话中：`@SessionAttributes`

```
@Controller
@SessionAttributes("formAttribute")
public HelloController 
```

然后它在你第一次使用它时被初始化一次，并在你通过调用销毁它时被销毁：

```
public void finalStep(SessionStatus status) {
   status.setComplete();
} 
```

我认为结合`@SessionAttributes`它可以以相对简单的方式创建类似向导的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T20:46:12.900

如果 Web-flow 不是一个选项，您可以尝试这样做：

将模型属性存储为会话属性，这是通过向`@SessionAttribute`控制器添加注释来完成的：

```
@Controller
@SessionAttribute("myconversationModel")
public class MyFlowController{

    @RequestMapping
    public String myMethod(@ModelAttribute("myconversationModel") ConversationModel myConversationModel){
        ....
    }
} 
```

然后你认为你已经完成了流程，只需接受一个额外的参数`SessionStatus`并调用`sessionStatus.complete`，这将从会话中擦除属性

```
@RequestMapping
public String myFinalMethod(@ModelAttribute("myconversationModel") ConversationModel myConversationModel, SessionStatus sessionStatus){
sessionStatus.complete();
    ....
} 
```

# jquery - jquery .html() 函数杀死一切

> ID：13847923
> 
> 赞同：2
> 
> 时间：2012-12-12T20:19:45.607
> 
> 标签：jquery, html, var

我试图将 2 个变量合并为 1，经典书籍方式

```
a = 1;
b = "bla";
c = a + b; 
```

但是，当其中一个变量具有 html() jquery 函数时，结果只有这个变量，仅此而已。为什么是这样？在这种情况下我该怎么办？

**所有 JS 代码**

```
 $("#target").click(function() {
$('#myTable tr:last').after('<tr><td>Bla</td><td><div class="remove">REMOVE</div></td></tr>');
});
$("#myTable").on('click', '.remove', function(event) {
  $(this).parent().parent().remove();
});

$("button").click(function() {
  var input = $("input").val();
  var table = $("#myTable").html();
  var output = input + "www" + table;
  $(".result").html(output);
}); 
```

**相关代码：**

```
$("button").click(function() {
  var input = $("input").val();
  var table = $("#myTable").html();
  var output = input + "www" + table;
  $(".result").html(output);
}); 
```

html 输出只打印表格内容，而不打印其他变量。组合 vars 确实有效，但如果有 html()。在其中一个中，仅打印此 var。这是什么源码？

[http://jsbin.com/ucopun/9/edit](http://jsbin.com/ucopun/9/edit)

要查看它不起作用，请在输入中键入内容并单击结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:24:11.990

`.html()`从 DOM 节点设置和检索 HTML；不要与`.text()`哪个处理节点内的文本值混淆。

可能是你正在寻找做这样的事情：

```
 var input = '<div>' + $("input").val() + 'www</div>';
 var table = $("#myTable").html();
 var output = input + '<table>' + table + '</table>; 
```

坦率地说，我认为您的 HTML 太复杂了。你为什么把div放在表格里？？您可以减少代码并使其仅与 div 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:33:38.480

问题是`$("#myTable").html();`返回的表格 html 没有开始和结束标记`<table></table>`，因此当您稍后将文本连接到截断的 html 表格代码时，浏览器会解释您的文本属于表格但不知道如何呈现它。

简单的解决方案是输出一个正确的表格，以便正确显示文本并与表格分开，为此，只需替换以下行：

```
var table = $("#myTable").html(); 
```

对于这个：

```
var table = '<table>' + $("#myTable").html() + '</table>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T20:24:46.390

您放入输出变量的所有文本都在那里，问题是`$(".result").html(output)`忽略了非 HTML 内容。通过添加此警报向自己证明：

```
$("button").click(function() {
  var input = $("input").val();
  var table = $("#myTable").html();
  var output = input + "www" + table;
  alert(output);
  $(".result").html(output);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T20:26:17.043

查看源（或`output`在警报框中显示的值）。

```
$("button").click(function() {
  var input = $("input").val();
  var table = $("#myTable").html();
  var output = input + "www" + table;
  alert (output);
  $(".result").html(output);
}); 
```

您可以看到输入字段中的值和“www”被添加到结果 div 的 html 中；它只是没有被渲染。

考虑使用 id 属性而不是类来定义您的目标`.html(output)`：

```
<div id="result">...</div> 
```

和

```
$("#result).html(output); 
```

# arrays - 数组的顺序不敏感哈希函数

> ID：13847924
> 
> 赞同：3
> 
> 时间：2012-12-12T20:19:47.137
> 
> 标签：arrays, hash, cryptography, sequence

我正在寻找一个哈希函数，它将为包含相同元素的无序序列产生相同的结果。

例如：

```
Array_1: [a, b, c]
Array_2: [b, a, c]
Array_3: [c, b, a] 
```

散列函数应该为这些数组中的每一个返回相同的结果。

如何做到这一点？

最流行的答案是按某种规则对元素进行排序，然后连接，然后进行散列。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:30:07.513

如果 a,b,c 是数字，您可以求和，然后在总和上构建哈希。你也可以倍增。但要注意零！XOR-ing 数字也是一种方法。

对于非常小的数字，您可以考虑设置由数字索引的位。这意味着构建一个 long（64 位）作为散列的输入只允许 0-63 范围内的元素编号。

你拥有的元素越多，你得到的碰撞就越多。最后，您将具有**m位的****n 个**元素（导致 2^(m*n) 范围）映射到具有**k**位的哈希值。通常 m 和 k 是一个常数，但 n 是变化的。

 ****请注意，通过哈希进行的任何访问都需要测试是否获得正确的元素。一般来说，哈希不是唯一的。

否则对元素进行排序，然后按照建议进行散列

关于 CodesInChaos 的评论：

为了能够省略测试，哈希的位数应该远大于元素位的总和。至少多说 64 位。一般不给出这种情况。

安全哈希/唯一 id 的一种常见情况是 guid。这实际上意味着 128 位。文本字符的随机序列在 20-25 个字符内达到此位数。较长的文本很可能会产生冲突。这是否仍然可以接受取决于用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:17:27.713

```
XOR | Sum | Sum of squares | ... 
```

在哪里 | 表示连接。

或者

```
XOR of hash of elements 
```****

# c# - 如何使用 MVC 4 更有效地使用 HTML 传输 JSON

> ID：13847928
> 
> 赞同：1
> 
> 时间：2012-12-12T20:20:12.160
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-4

我从一个看起来像这样的 MVC 操作返回一个 JSON 结构：

```
[HttpPost]
public ActionResult GetStudents(string name) 
{   
    //
    // Filter list of students...
    //

    return Json(new {
        aaData = students.ToList().Select(s => new [] {
            String.Format(@"<span style='display:none;'>{0}</span>{1}", s.Id, s.StudentNumber),
            String.Format(@"<a href='../../Student/Details/{0}'>{1}</a>", s.Id, s.FullName),
            String.Format(@"<a href='../../Student/Edit/{0}'>Edit</a>", s.Id)
        })
    }, JsonRequestBehavior.DenyGet);
} 
```

生成的 JSON 如下所示：

```
{"aaData":
    [
        ["\u003cspan style=\u0027display:none;\u0027\u003e3\u003c/span\u003e009165",
         "\u003ca href=\u0027../../Student/Details/3\u0027\u003eJohn Smith\u003c/a\u003e",
         "\u003ca href=\u0027../../Student/Edit/3\u0027\u003eEdit\u003c/a\u003e"],

        ... Lots more ...
    ]
} 
```

哪个工作正常。但完整的 JSON 大约为 1.7 MB。我认为如果 JSON 中的 HTML 标记不是全部 unicode 编码的，这可以显着减少。根据[JSON 规范](http://json.org/)，看起来不需要对这些进行编码：

> any-Unicode-character- except-"-or-\-or- control-character

有什么方法可以阻止 .NET 以这种方式写出 JSON，或者有没有其他方法可以减少我需要传输的数据量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:33:44.020

首先要做的是替换 JSON 序列化程序，方法是创建自己的结果类和控制器扩展方法来生成它。

类似于以下内容：

```
public class FastJsonResult : ActionResult // or maybe derive from JsonResult
{
    private object model;

    public FastJsonResult(object model) 
    {
        this.model = model;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        // code to set content type and write serialized response
    }
} 
```

以及控制器扩展方法：

```
public static class JsonControllerExtensions
{
     public static ActionResult FastJson(this Controller controller, object model)
     {
         return new FastJsonResult(model);
     }
} 
```

允许您使用自己的序列化代码，如下所示：

```
// at the end of your controller method:
return new FastJson(model); 
```

您需要插入一个序列化程序，以适当地格式化您的 JSON 响应。我强烈推荐为此使用 ServiceStack.Text（在 NuGet 上），因为它速度极快，易于启动和运行，并且支持最常见的场景。Microsoft 内置产品的另一个流行替代品是 NewtonSoft 的 JsonSerializer（也在 NuGet 上）。

这种方法的好处是您可以更好地控制结果的呈现方式。如果您有大量数据要发送，那么拥有一个快速的序列化器会产生很大的不同。

也就是说，你真的应该只使用 JSON 来通过网络发送数据（而不是标记）。诸如[敲除](http://knockoutjs.com)之类的框架使得对从服务器检索到的 JSON 数据进行客户端渲染变得非常容易。朝这个方向发展应该是您的长期目标，但使用自定义序列化程序对这两种解决方案都有好处。

# javascript - SVG：悬停时显示/隐藏文本或文本区域

> ID：13847931
> 
> 赞同：4
> 
> 时间：2012-12-12T20:20:17.120
> 
> 标签：javascript, jquery, html, svg

我`clipPath`用来对页面上的图像应用不同的“蒙版”效果。

每个图像都有一个可变长度的标题。将鼠标悬停在图像上时，我想在图像顶部显示标题，在鼠标悬停时，我想隐藏标题。由于标题长度不同，我需要将文本适当地换行，以使文本不会超出图像。

我已经尝试过使用`foreignObject`and `textArea`，但我似乎无法让悬停效果正常工作。

我还尝试使用纯 HTML（特别是段落标签）和绝对定位 +`z-index`来定位文本，但文本大小并未相应地随图像大小缩放（因为它不是 SVG 的一部分）。

我在这个项目中使用的是 jQuery，所以如果需要 JS 解决方案，可以使用 jQuery。

这是我正在使用的 HTML（如果需要，还有一个[jsFiddle](http://jsfiddle.net/NXW6C/)）：

```
<div class="featured-image" id="featured-image-one">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100">
    <defs>
      <clipPath id="ellipse">
        <ellipse fill="#ff0000" cx="50" cy="35.5" rx="49.5" ry="35" />
      </clipPath>
      <clipPath id="hexagon">
        <polygon points="25, 0  75, 0 100, 43.30127018922193 75, 86.60254037844386  25, 86.60254037844386  0, 43.30127018922193"/>
      </clipPath>
      <clipPath id="rectangle">
        <rect x="0" y="0" width="100" height="70"></rect>
      </clipPath>
    </defs>
    <g>
      <image preserveAspectRatio="none" x="0" y="0" width="100%" height="100%" xlink:href="http://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Bucephala-albeola-010.jpg/800px-Bucephala-albeola-010.jpg" id="clippy" clip-path="url(#hexagon)" />
      <foreignObject x="10" y="30" width="100" height="100" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
        <body xmlns="http://www.w3.org/1999/xhtml">
          <p style="color: #ffffff; font-size: 5px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        </body>
      </foreignObject>
    </g>
  </svg>
</div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:15:53.257

看看这个：http: [//jsfiddle.net/LgAjd/4/](http://jsfiddle.net/LgAjd/4/)

基本上我只是`id`在你的 foreignObject 中添加了一个并将其`display`设置为 be `none`，因此默认情况下它是不可见的，然后使用 jQuery 事件绑定来处理悬停条件。

Javascript代码：

```
$hoverText = $('#hoverText');
$('body').on('mouseover', '#featured-image-one', function () {
    $hoverText.show();
});
$('body').on('mouseout', '#featured-image-one', function () {
    $hoverText.hide();
}); 
```

# algorithm - 定位边界二维实体

> ID：13847933
> 
> 赞同：4
> 
> 时间：2012-12-12T20:20:20.197
> 
> 标签：algorithm, search, geometry, 2d, polygon

给定一个点和一组任意 2D 实体（圆、多边形、线、折线、圆弧等），是否有人知道现有的策略：

1.  确定该点是否被任何实体组合包围（有界）？我知道对封闭的形状进行“内部”测试很容易，但这并不总是能给我想要的东西——尤其是嵌套或相交的形状。

2.  找到围绕我的点形成闭合多边形的最小（最近？）线/实体集？（想想洪水填充，但不依赖颜色）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T23:18:46.490

我过去曾在商业产品中解决过这个问题。你问过解析曲线，但我会更一般地解决至少两次可微的曲线。将多边形作为一组单独的线段处理。不需要分割曲线，但如果你愿意，你可以稍微调整算法。

此外，您可能希望在 Graphics Gems V 中查看我的论文*Matrix-Based Ellipse Geometry*以找到椭圆之间的交点。

基本思路：

1.  考虑从您的测试点沿 +x 方向发出的一条射线。
2.  现在考虑一只蚂蚁从测试点沿着你的射线行走。
3.  当蚂蚁碰到与其中一条曲线的第一个交点时，它会尽可能向左倾斜，并在该交点处留下一个箭头，指示它选择的方向。（如果没有交点，那么显然该点是没有界的。）
4.  如果它到达曲线的尽头，它会自行翻倍。
5.  如果该点有多条曲线相交，则选择最左侧的曲线。
6.  如果一条或多条曲线实际上与相交处的射线相切，则可以使用更高的导数来决定选择哪条曲线和方向。（这只蚂蚁知道微积分。）
7.  现在当蚂蚁沿着曲线漫步​​时，它总是像上面那样做最大的左转。如果相交处的曲线之间存在相切，则使用更高的导数来确定“最左侧”的那一条。（细节留给蚂蚁）。
8.  在它的旅行中，蚂蚁可能会多次到达与射线的起始交叉点。但是一旦它发现自己朝着箭头的方向前进（它在步骤 3 中留下的那个），它的旅行就完成了，它已经穿过了一个“轮廓”。问题被简化为确定该点是否在该轮廓中。

“轮廓”是一个拓扑实体。它是在“顶点”处连接的“段”的闭合环。

*“段”是轮廓在特定方向上*使用的一段曲线。

“顶点”是段之间的连接。顶点与平面上的 (x, y) 位置相关联，但在同一位置可能有多个顶点，每个顶点对应于在该点相交的轮廓中的每一对线段。蚂蚁遇到的每个曲线端点（支点顶点）或曲线-曲线交点都有一个顶点。

轮廓（在这种情况下）不是几何实体！不要把它想象成飞机上简单的封闭路径。蚂蚁可能会沿着一条线段前进，到达终点，然后按原路返回——这称为“支线”，包括两个轮廓线段，一个用于任一方向。或者它可能沿着曲线段的一个方向行进，沿着其他曲线徘徊一点，然后沿着段的另一个方向返回。

所以即使你的曲线集只有一条从 A 到 B 的线（我假设你没有无限的线）并且你的光线在 P 处击中它，你仍然有轮廓 V0(P)-V1( A)-V2(P)-V3(B)-V0 有 4 段 V0-V1、V1-V2、V2-V3、V3-V0。请注意，V0 和 V2 是不同的顶点，都位于 P 处。

现在测试您的点是否在轮廓中。

找到你的光线（来自你的测试点的任何光线都可以）与轮廓的交点。我们只真正想要与轮廓相交的数量的奇偶校验（偶数或奇数）。如果奇偶校验是奇数，则该点以曲线为界，如果奇偶校验则不是。

因为双重遍历的段对奇偶校验没有任何贡献，我们可以忽略它们。这是因为在双重遍历的线段上总是有偶数个交叉点，因为它们在轮廓中两次。

例子：

考虑这个曲线集。我使用线条，所以我不会太努力：

![曲线集](../Images/2af446e484cb5dc31a4c20e28c9e701c.png)

案例 1 - 该点是无界的。轮廓对曲线段的使用由虚线箭头指示。射线-*轮廓*相交奇偶校验数为偶数。

![无界点](../Images/eef3c5d5e6f020d36dca42295367117f.png)

案例 2 - 点是有界的。射线轮廓相交奇偶校验是奇数。

![有界点](../Images/81934f9ffe82d7e668266a21a8f4dc4a.png)

以下是可能出错的地方：

1.  由于各种数字原因，您找不到轮廓。例如，您可能会错过交点，例如两条曲线几乎与一条曲线相切。您可能会将其视为单个交叉点，但是当您进行射线交叉奇偶校验测试时，您会看到单个交叉点，因此奇偶校验在不应该翻转时翻转。

2.  您可能无法计算足够的导数来做出正确的转弯决策。在解析几何的情况下，绝不应该是这种情况。

3.  您的光线会击中轮廓的顶点（段之间的连接）。（请注意，单个 (x, y) 点可以有多个顶点。每个顶点都必须单独处理。）

在这种情况下，您必须确定顶点的传入和传出段是否在顶点处光线的同一侧。如果它们在同一侧，则奇偶性不受影响。否则奇偶性翻转。如果其中一条曲线在顶点处与射线相切，则可能必须使用更高的导数来确定这一点。

4.  一条线段与您的测试射线共线。这其实是2的一个特例，但是好处理：忽略它。

有很多细节，但你应该能够处理它们。一定要使用空间树来避免计算不必要的交叉点。

第二个问题的答案来自从轮廓中删除任何双重遍历的段。这可能会产生多个子轮廓。其中之一将包含您的观点。

# c# - 调整大小后图像质量很差

> ID：13847935
> 
> 赞同：1
> 
> 时间：2012-12-12T20:20:22.237
> 
> 标签：c#, image-resizing

> **可能重复：**
> [在不损失任何质量的情况下调整图像大小](https://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality)

我正在使用以下方法调整图像大小：

```
public static Bitmap Resize(Image source, int width, int height)
{
    Bitmap bitmap = new Bitmap(width, height);

    using (Graphics graphics = Graphics.FromImage(bitmap))
    {
        graphics.SmoothingMode = SmoothingMode.AntiAlias;
        graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
        graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
        graphics.DrawImage(source, new Rectangle(0, 0, width, height));
    }

    return bitmap;
} 
```

输出图像质量非常糟糕。有没有办法在不影响质量的情况下调整图像大小？

PS：图片源的宽高总是大于宽高参数，并保留宽高比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:23:34.283

取决于图像的大小和*分辨率*。如果你把图像放大，很自然会得到一个不好的结果，你可以在缩小图像时得到同样的坏结果，而不保持它的比例。

一般来说，如果你想拥有可缩放的漂亮图像，请坚持使用 Vector Graphics。换句话说，使用：[元文件](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.metafile.aspx)或一些`SVG`图像库。

# r - 使用 qqmath 或 dotplot 从 lmer（lme4 包）绘制随机效果：如何让它看起来很花哨？

> ID：13847936
> 
> 赞同：37
> 
> 时间：2012-12-12T20:20:21.163
> 
> 标签：r, ggplot2, lme4, random-effects

qqmath 函数使用 lmer 包的输出制作了很棒的随机效应毛毛虫图。也就是说，qqmath 非常擅长绘制分层模型的截距及其在点估计周围的误差。下面是使用 lme4 包中名为 Dyestuff 的内置数据的 lmer 和 qqmath 函数的示例。该代码将使用 ggmath 函数生成层次模型和漂亮的绘图。

```
library("lme4")
data(package = "lme4")

# Dyestuff 
# a balanced one-way classiï¬cation of Yield 
# from samples produced from six Batches

summary(Dyestuff)             

# Batch is an example of a random effect
# Fit 1-way random effects linear model
fit1 <- lmer(Yield ~ 1 + (1|Batch), Dyestuff) 
summary(fit1)
coef(fit1) #intercept for each level in Batch 

# qqplot of the random effects with their variances
qqmath(ranef(fit1, postVar = TRUE), strip = FALSE)$Batch 
```

最后一行代码生成了一个非常漂亮的每个截距图，每个估计值都有误差。但是格式化qqmath函数似乎很困难，我一直在努力格式化绘图。我提出了一些我无法回答的问题，我认为其他人如果使用 lmer/qqmath 组合也可以从中受益：

1.  有没有办法使用上面的 qqmath 函数并添加一些选项，例如使某些点为空与填充，或者不同的点使用不同的颜色？例如，您能否将 Batch 变量的 A、B 和 C 点填满，但其余点为空？
2.  是否可以为每个点添加轴标签（例如，可能沿着顶部或右侧 y 轴）？
3.  我的数据有接近 45 个截距，所以可以在标签之间添加间距，这样它们就不会相互碰撞？主要是，我对区分/标记图表上的点感兴趣，这在 ggmath 函数中似乎很麻烦/不可能。

到目前为止，在 qqmath 函数中添加任何附加选项都会产生错误，如果它是标准图，我不会得到错误，所以我很茫然。

另外，如果您觉得有一个更好的包/功能可以从 lmer 输出中绘制截距，我很想听听！（例如，你能用 dotplot 做第 1-3 点吗？）

**编辑：**如果可以合理格式化，我也愿意接受替代点图。我只是喜欢 ggmath 情节的外观，所以我从一个关于它的问题开始。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-12T19:27:35.077

Didzis的回答很棒！只是为了稍微总结一下，我把它放到了它自己的函数中，它的行为很像`qqmath.ranef.mer()`and `dotplot.ranef.mer()`。除了 Didzis 的回答之外，它还处理具有多个相关随机效应（like `qqmath()`and `dotplot()`do）的模型。比较`qqmath()`：

```
require(lme4)                            ## for lmer(), sleepstudy
require(lattice)                         ## for dotplot()
fit <- lmer(Reaction ~ Days + (Days|Subject), sleepstudy)
ggCaterpillar(ranef(fit, condVar=TRUE))  ## using ggplot2
qqmath(ranef(fit, condVar=TRUE))         ## for comparison 
```

![在此处输入图像描述](../Images/108a4d08753214f64f1dd33ace096d43.png)

比较`dotplot()`：

```
ggCaterpillar(ranef(fit, condVar=TRUE), QQ=FALSE)
dotplot(ranef(fit, condVar=TRUE)) 
```

![在此处输入图像描述](../Images/28ed2cb1f63277175c453d4ae7e82dfc.png)

有时，为随机效应设置不同的尺度可能很有用——这是`dotplot()`强制的。当我试图放松这一点时，我不得不改变刻面（见这个[答案](https://stackoverflow.com/a/3685496)）。

```
ggCaterpillar(ranef(fit, condVar=TRUE), QQ=FALSE, likeDotplot=FALSE) 
```

![在此处输入图像描述](../Images/c44a69301f85149f8878ef5d6b819be3.png)

```
## re = object of class ranef.mer
ggCaterpillar <- function(re, QQ=TRUE, likeDotplot=TRUE) {
    require(ggplot2)
    f <- function(x) {
        pv   <- attr(x, "postVar")
        cols <- 1:(dim(pv)[1])
        se   <- unlist(lapply(cols, function(i) sqrt(pv[i, i, ])))
        ord  <- unlist(lapply(x, order)) + rep((0:(ncol(x) - 1)) * nrow(x), each=nrow(x))
        pDf  <- data.frame(y=unlist(x)[ord],
                           ci=1.96*se[ord],
                           nQQ=rep(qnorm(ppoints(nrow(x))), ncol(x)),
                           ID=factor(rep(rownames(x), ncol(x))[ord], levels=rownames(x)[ord]),
                           ind=gl(ncol(x), nrow(x), labels=names(x)))

        if(QQ) {  ## normal QQ-plot
            p <- ggplot(pDf, aes(nQQ, y))
            p <- p + facet_wrap(~ ind, scales="free")
            p <- p + xlab("Standard normal quantiles") + ylab("Random effect quantiles")
        } else {  ## caterpillar dotplot
            p <- ggplot(pDf, aes(ID, y)) + coord_flip()
            if(likeDotplot) {  ## imitate dotplot() -> same scales for random effects
                p <- p + facet_wrap(~ ind)
            } else {           ## different scales for random effects
                p <- p + facet_grid(ind ~ ., scales="free_y")
            }
            p <- p + xlab("Levels") + ylab("Random effects")
        }

        p <- p + theme(legend.position="none")
        p <- p + geom_hline(yintercept=0)
        p <- p + geom_errorbar(aes(ymin=y-ci, ymax=y+ci), width=0, colour="black")
        p <- p + geom_point(aes(size=1.2), colour="blue") 
        return(p)
    }

    lapply(re, f)
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-17T20:36:32.353

一种可能性是使用库`ggplot2`来绘制类似的图形，然后您可以调整绘图的外观。

首先，`ranef`对象被保存为`randoms`. 然后将截距的方差保存在 object 中`qq`。

```
randoms<-ranef(fit1, postVar = TRUE)
qq <- attr(ranef(fit1, postVar = TRUE)[[1]], "postVar") 
```

对象`rand.interc`仅包含具有级别名称的随机截距。

```
rand.interc<-randoms$Batch 
```

所有对象都放在一个数据框中。对于误差区间`sd.interc`计算为方差的平方根的 2 倍。

```
df<-data.frame(Intercepts=randoms$Batch[,1],
              sd.interc=2*sqrt(qq[,,1:length(qq)]),
              lev.names=rownames(rand.interc)) 
```

如果您需要根据值在图中对截距进行排序，`lev.names`则应重新排序。如果拦截应该按级别名称排序，则可以跳过此行。

```
df$lev.names<-factor(df$lev.names,levels=df$lev.names[order(df$Intercepts)]) 
```

此代码产生情节。现在积分将`shape`根据因子水平而有所不同。

```
library(ggplot2)
p <- ggplot(df,aes(lev.names,Intercepts,shape=lev.names))

#Added horizontal line at y=0, error bars to points and points with size two
p <- p + geom_hline(yintercept=0) +geom_errorbar(aes(ymin=Intercepts-sd.interc, ymax=Intercepts+sd.interc), width=0,color="black") + geom_point(aes(size=2)) 

#Removed legends and with scale_shape_manual point shapes set to 1 and 16
p <- p + guides(size=FALSE,shape=FALSE) + scale_shape_manual(values=c(1,1,1,16,16,16))

#Changed appearance of plot (black and white theme) and x and y axis labels
p <- p + theme_bw() + xlab("Levels") + ylab("")

#Final adjustments of plot
p <- p + theme(axis.text.x=element_text(size=rel(1.2)),
               axis.title.x=element_text(size=rel(1.3)),
               axis.text.y=element_text(size=rel(1.2)),
               panel.grid.minor=element_blank(),
               panel.grid.major.x=element_blank())

#To put levels on y axis you just need to use coord_flip()
p <- p+ coord_flip()
print(p) 
```

![在此处输入图像描述](../Images/9a67dfe6f64a4625326898d074482bc6.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-08-13T14:55:29.723

另一种方法是从每个随机效应的分布中提取模拟值并绘制它们。使用该`merTools`软件包，可以轻松地从一个`lmer`或`glmer`对象获取模拟，并绘制它们。

```
library(lme4); library(merTools)       ## for lmer(), sleepstudy
fit <- lmer(Reaction ~ Days + (Days|Subject), sleepstudy)
randoms <- REsim(fit, n.sims = 500) 
```

`randoms`现在是一个看起来像这样的对象：

```
head(randoms)
groupFctr groupID        term       mean     median       sd
1   Subject     308 (Intercept)   3.083375   2.214805 14.79050
2   Subject     309 (Intercept) -39.382557 -38.607697 12.68987
3   Subject     310 (Intercept) -37.314979 -38.107747 12.53729
4   Subject     330 (Intercept)  22.234687  21.048882 11.51082
5   Subject     331 (Intercept)  21.418040  21.122913 13.17926
6   Subject     332 (Intercept)  11.371621  12.238580 12.65172 
```

它提供了分组因子的名称、我们获得估计值的因子水平、模型中的项以及模拟值的平均值、中位数和标准差。我们可以使用它来生成类似于上面的毛毛虫图：

```
plotREsim(randoms) 
```

产生：

[![随机效应的毛毛虫图](../Images/51478a7fe0406273f0321b661d35ae44.png)](https://i.stack.imgur.com/GOiRu.png)

一个不错的功能是置信区间不与零重叠的值以黑色突出显示。您可以通过使用`level`参数来修改区间的宽度，以`plotREsim`根据您的需要制作更宽或更窄的置信区间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-06T07:39:56.817

获得所需绘图的另一种方法是通过`plot_model()`集成在`sjPlot`包中的命令。优点是该命令返回一个`ggplot`-object，因此有许多选项可以根据需要调整图形。我使示例保持简单，因为有许多选项可以个性化可视化 - 只需检查`?plot_model`所有选项。

```
library(lme4)
library(sjPlot)
#?plot_model

data(Dyestuff, package = "lme4")
summary(Dyestuff)             

fit1 <- lmer(Yield ~ 1 + (1|Batch), Dyestuff) 
summary(fit1)

plot_model(fit1, type="re",
           vline.color="#A9A9A9", dot.size=1.5,
           show.values=T, value.offset=.2) 
```

[![上面给出的示例的输出：](../Images/a035613c17005912083204bf7b9c93a7.png)](https://i.stack.imgur.com/Pxlkx.png)

# ios - 从 GLBuffer 中删除顶点

> ID：13847937
> 
> 赞同：0
> 
> 时间：2012-12-12T20:20:22.690
> 
> 标签：ios, opengl-es

如果我将顶点添加到数组缓冲区，如下所示，我将如何删除最后添加的顶点？

```
// Append vertex to array buffer
static inline void addVertex(NSUInteger *length, NISignaturePoint v) {
    if ((*length) >= maxLength) {
        return;
    }

    GLvoid *data = glMapBufferOES(GL_ARRAY_BUFFER, GL_WRITE_ONLY_OES);
    memcpy(data + sizeof(NISignaturePoint) * (*length), &v, sizeof(NISignaturePoint));
    glUnmapBufferOES(GL_ARRAY_BUFFER);

    (*length)++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:27:50.330

这不是 OpenGL 缓冲区对象的工作方式。glMapBuffer{OES} 为您提供特定大小的快速内存映射，该映射已在使用 glBufferData{OES} 初始化缓冲区对象时定义。您不能只写超出该对象或映射的限制并期望附加数据。您需要调整缓冲区对象的大小以重新初始化它。

此外，OpenGL 不会在“顶点”实体中组织缓冲区对象。它只是无形的数据，你必须用意义来填充（对 glVertexAttribPointer & Co. 进行适当的调用）。

由于对 OpenGL{-ES} 工作原理的误解，您的代码非常错误，甚至无法修复。

# php - 奇怪的 PHP 会话行为

> ID：13847938
> 
> 赞同：0
> 
> 时间：2012-12-12T20:20:23.657
> 
> 标签：php, session

由于某种原因，我在会话方面遇到了一些问题。到目前为止，我从来没有遇到过会话问题。我有三个页面：

```
/index.php
/test/sessions.php
/test/sessions2.php 
```

所有这些都具有相同的代码（/test/sessions.php 还设置了会话值）：

```
<?php
if(!isset($_SESSION)){
    session_start();
}
var_dump($_SESSION);
echo(session_id());
?> 
```

session.php（设置值）：

```
<?php
session_start();
$_SESSION['foo'] = 'bar';
?> 
```

该代码在 /test/ 目录中的页面上工作正常，但在索引页面上却不行。当我导航到索引页面时，它会清除所有会话数据，但就像我说的，注意 /text/ 目录中的页面是错误的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:26:31.050

您的[会话 cookie 路径](http://php.net/manual/en/session.configuration.php#ini.session.cookie-path)似乎是`/test` `.`或`./`。将其设置为`/`可能会解决此问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T20:32:55.837

```
if(!isset($_SESSION)){
    session_start();
} 
```

您的代码在开始会话之前检查 $_SESSION。

必须开始您的会话才能使 $_SESSION 栩栩如生。

会话数据根据您处理会话的方式存储在磁盘或数据库中。

每次启动会话时，都会从存储的数据中创建 $_SESSION 变量。

每次一个php脚本执行完毕，都会将$_SESSION中的数据序列化并写入文件或db...，并关闭变量。

因此，除非您开始会话，否则不会有 $_SESSION。

```
session_start();

var_dump($_SESSION); 
```

这是合适的

# sql - 国名本地化

> ID：13847941
> 
> 赞同：0
> 
> 时间：2012-12-12T20:20:50.353
> 
> 标签：sql, gettext

作为地址的一部分，我存储在我的 SQL 数据库国家代码（例如美国、德国、...）中。然后，我的数据库中有另一个表（有两列），它将国家代码翻译成各个国家的英文名称。

如果我想让网站多语言，我可以扩展这个翻译表，添加除英语以外的其他语言的国家名称。

我想知道是否有另一种不涉及修改数据库的方法，例如使用 gettext 翻译英文国家名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:44:55.857

处理此问题的典型方法是将表结构更改为具有三列，而不是两列：

*   语
*   国家代码
*   全名

每当您查询数据库时，您将提供当前语言。

然后，您必须更改代码以在任何查询中包含附加语言键。

根据您将如何跟踪当前语言，您还可以使用视图或用户定义的函数。

您不想使用自动翻译，因为像“中国”这样的国家名称可能会变成“瓷器”的等价物。

# weka - LibSVM、WEKA 中的“概率。评估分类器：rand”

> ID：13847942
> 
> 赞同：3
> 
> 时间：2012-12-12T20:20:55.703
> 
> 标签：weka, svm, libsvm

我安装了 WEKA 并下载了 wlsvm，将 jars、libsvm.jar 和 wlsvm.jar 添加到 CLASSPATH 中，从而成功地将 LibSVM 集成到 Weka 环境中。我生成了随机数字属性（特征）和分类 - 当然 - 类并尝试运行 LibSVM 但我收到此错误“问题评估分类器：rand”。我不知道为什么会出现此错误，我在互联网上查找它并没有最终得到任何解决方案。你能帮帮我吗？顺便说一句，我对 WEKA、Java 和 LibSVM 还很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:16:40.993

我建议你更新到 3.7 版本的 weka。我和你有同样的问题（也注意到它导致使用可视化工具的那种错误）。我下载了weka 3.7.8，然后使用包管理器安装了libsvm，从那以后它就可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:31:15.957

[LIBSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)是一个很棒的库。然而，根据我的经验，LIBSVM 最好、最新和测试最多的版本是普通的 C++ 版本的 LIBSVM。我建议您尝试下载并测试您在普通 LIBSVM 中生成的随机数据。这甚至不涉及 C++ 编码，您只需生成 LIBSVM 输入格式的训练文件和测试文件。

这样做将使您能够更有效地解决正在发生的事情。如果它不适用于 C++ 版本，那么我们绝对可以检查，如果它确实适用于 C++ 版本，我们可以确定问题是 (1) 与 WEKA 的交互，(2) LIBSVM 中的一个旧错误尚未修复的java，（3）你称之为wlsvm.jar（我不确定它是什么）或这些东西的混合物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T13:01:17.193

我也遇到了这个问题，如果我没猜错，就会抛出这样的异常：

```
java.lang.NoSuchFieldException: rand
    java.lang.Class.getField(Unknown Source)
    weka.classifiers.functions.LibSVM.buildClassifier(LibSVM.java:1618)
    weka.gui.explorer.ClassifierPanel$16.run(ClassifierPanel.java:1409) 
```

所以看起来你的 libsvm 版本太低了，一些文件已经改变了。

# qt - 为什么我的 QGraphicsWidget 在 QDrag 之后会收到它不应该收到的事件？

> ID：13847946
> 
> 赞同：0
> 
> 时间：2012-12-12T20:21:13.160
> 
> 标签：qt, qgraphicsitem

我有一个简单的 QGraphicsWidget，MyGraphicsWidget。这是我的 mouseMoveEvent()，它似乎工作正常：

```
void MyGraphicsWidget::mouseMoveEvent (QGraphicsSceneMouseEvent *event)
{
    QPointF p = event->scenePos() - m_StartPos;
    if(p.manhattanLength() < 20)
        return;
    //omitted drawing a rounded rect on the drag
    QDrag *drag = new QDrag(event->widget());
    drag->start(Qt::MoveAction);
} 
```

场景的 dropEvent() 只是将此小部件移动到其新位置，并且我没有场景本身的按下/移动事件，因此这些应该正确传递给其中的小部件。

但是，一旦拖动完成，下一次鼠标按下将在此小部件上。因此，如果我尝试单击并拖动另一个小部件，尽管我的光标不在此小部件上，但我会意外地拖动这个小部件。我打印了 event->pos() 和 event->scenePos()，两者都报告说光标在它看起来的位置（根本不在小部件上）。如果我在尝试单击并拖动之前单击一次，一切正常。是否有可能我需要在 mouseReleaseEvent() 或我的 mouseMoveEvent() 中实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:15:03.773

它现在正在工作。我很确定这是问题所在：MyGraphicsWidget 上面还有另一个自定义 GraphicsWidget，在它的 mousePressEvent 中，我正在调用 QGraphicsWidget::mousePressEvent(event); 在活动开始时。事件的其余部分从未被触发，这一切都搞砸了。我将该行移到方法的末尾，现在一切似乎都很好。

# python - 如何使用 pyqt4 加载和显示重新缩放的图像

> ID：13847949
> 
> 赞同：2
> 
> 时间：2012-12-12T20:21:15.750
> 
> 标签：python, qt4, pyqt4

[此处](https://stackoverflow.com/questions/2286864/how-can-i-add-a-picture-to-a-qwidget-in-pyqt4)提出了类似的问题，但没有描述如何重新缩放图像。到目前为止，我只找到了[C++](http://qt-project.org/doc/qt-4.8/qpixmap.html#scaled)[规范](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/index.html)，以及. 但后者似乎并没有提到 QPixmap。`QPixmap``pyQT4`

问题：有谁知道如何根据第一个链接中的代码显示完整图像的重新缩放版本，和/或我可以在哪里找到`pyQt4`规格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T20:56:28.030

您可以使用[QPixmap.scaledToHeight](http://doc.qt.io/qt-4.8/qpixmap.html#scaledToHeight)或[QPixmap.scaledToWidth](http://doc.qt.io/qt-4.8/qpixmap.html#scaledToWidth)方法：

```
import sys
from PyQt4 import QtGui
app = QtGui.QApplication(sys.argv)
window = QtGui.QMainWindow()
window.setGeometry(0, 0, 400, 200)
pic = QtGui.QLabel(window)
pic.setGeometry(10, 10, 400, 200)
pixmap = QtGui.QPixmap(FILENAME)
pixmap = pixmap.scaledToHeight(200)
pic.setPixmap(pixmap)

window.show()
sys.exit(app.exec_()) 
```

您可以在此处找到[有关 PyQT 类（包括 QPixmap）的文档](http://doc.qt.io/qt-4.8/classes.html)。

有时当我懒惰不想阅读文档时，我会使用这个：

```
def describe(obj):
    for key in dir(obj):
        try:
            val = getattr(obj, key)
        except AttributeError:
            continue
        if callable(val):
            help(val)
        else:
            print('{k} => {v}'.format(k = key, v = val))
        print('-'*80)

pixmap = QtGui.QPixmap(FILENAME)
describe(pixmap) 
```

它打印大量关于传递给的对象的所有属性的输出`describe`。在这种情况下，您可以通过搜索字符串找到相关方法，`-> QPixmap`因为这些方法返回一个新的`QPixmap`. 我就是这样找到`scaledToHeight`和的`scaledToWidth`。

# c++ - 在 C++ 中打开 HDF5 文件的更好方法

> ID：13847953
> 
> 赞同：10
> 
> 时间：2012-12-12T20:21:38.213
> 
> 标签：c++, inheritance, hdf5

我一直在尝试想出一种方法来解决 HDF5 C++ 绑定的一些缺点。目前，我的代码中充斥着类似于以下内容的 try/catch 块：

```
H5::Exception::dontPrint();
H5::H5File *file = NULL;
try {
    file = new H5::H5File(fname.c_str(), H5F_ACC_RDWR);
} catch(H5::FileIException &file_exists_err) {
    file = new H5::H5File(fname.c_str(), H5F_ACC_TRUNC);
} 
```

这不应该是必要的——我想做的就是打开一个文件进行读/写访问，如果它不存在，就创建它。另一个更棘手的问题是创建一个嵌套组（例如“/parent/group”），其中父组不一定存在。在 Unix/Linux 中，等价于

```
mkdir -p parent/group 
```

但是，在 HDF5 C++ 绑定中，创建其父组不存在的组会引发异常。

由于这些原因，我一直有动力创建一个头文件来处理其中一些常见问题。我的第一个想法是简单地创建一组函数，例如，获取文件名和访问模式并返回 H5::H5File 对象，或者获取组名并返回组对象。但是，我认为这不太理想，因为它使使用此头文件的程序员对返回的对象调用“删除”，即使程序员从未在自己的代码中明确调用“新”。这似乎是在要求内存泄漏。

因此，我的第二个想法是从 H5::H5File 和 H5::H5Group 创建一组派生类，其构造函数在文件尚不存在或组的父组尚不存在时不会引发异常. 我对派生文件类的尝试如下：

```
namespace H5Utils {

class H5File : public H5::H5File {
public:
    H5File(std::string fname);
    ~H5File();
};

}

H5Utils::H5File::H5File(std::string fname)
try : H5::H5File(fname.c_str(), H5F_ACC_RDWR)
{
    std::cerr << "Opened existing file." << std::endl;
} catch(H5::FileIException &file_exists_err) {
    std::cerr << "File does not exist. Creating new file." << std::endl;
    H5::H5File(fname.c_str(), H5F_ACC_TRUNC);
}

H5Utils::H5File::~H5File() { } 
```

我遇到的问题是双重的。首先，构造函数中的 try/catch 块重新抛出由

```
H5::H5File(fname.c_str(), H5F_ACC_RDWR) 
```

当文件不存在时，程序仍然终止。第二个问题是我不确定第二个构造函数，

```
H5::H5File(fname.c_str(), H5F_ACC_TRUNC); 
```

是正确的（即它是否构造父类？）有没有办法让派生类在基类的构造函数中捕获异常，然后为基类调用不同的构造函数？

更一般地说，谁能想到更好/更优雅的方式来处理 HDF5 C++ 绑定的这些缺点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T22:41:05.300

我更喜欢你最初创建一些简单的辅助函数的想法——它会更简单，并且可以最大限度地减少你必须编写和记录的代码量。此外，为了确保正确的内存管理，您可以使用`shared_ptr`.

这是一个与您的初始示例等效的简单包装函数：

```
// a typedef for our managed H5File pointer
typedef std::shared_ptr<H5::H5File> H5FilePtr;

// create or open a file
H5FilePtr create_or_open(const std::string& fname)
{
    H5::Exception::dontPrint();
    H5::H5File* file = 0;

    try {
        file = new H5::H5File(fname.c_str(), H5F_ACC_RDWR);
    } catch(const H5::FileIException&) {
        file = new H5::H5File(fname.c_str(), H5F_ACC_TRUNC);
    }

    return H5FilePtr(file);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-15T22:34:40.277

> 但是，在 HDF5 C++ 绑定中，创建其父组不存在的组会引发异常。

您可以设置链接创建属性列表以[创建缺少的中间组](https://www.hdfgroup.org/HDF5/doc/RM/RM_H5P.html#Property-SetCreateIntermediateGroup)，并避免此异常。例如：

```
#include "hdf5.h"

int main (void){
  hid_t lcpl, file_id, group_id;
  herr_t status;
  unsigned flag=1;

  lcpl = H5Pcreate(H5P_LINK_CREATE);
  status = H5Pset_create_intermediate_group(lcpl, flag);
  file_id = H5Fcreate("nested_groups.h5",  H5F_ACC_TRUNC, H5P_DEFAULT, H5P_DEFAULT);
  group_id = H5Gcreate( file_id, "/foo/bar/bop", lcpl, H5P_DEFAULT, H5P_DEFAULT );

  H5Pclose(lcpl);
  H5Gclose(group_id);
  H5Fclose(file_id);

  return status;
} 
```

# php - 网络服务器上的 cron 作业

> ID：13847959
> 
> 赞同：1
> 
> 时间：2012-12-12T20:22:01.443
> 
> 标签：php, cron

最近几天我研究了 cron 工作。首先我想告诉你我的问题。我想每分钟在我的网络服务器上运行一个 php 脚本而不加载页面。这个 php 脚本通过 yql 插入一些数据。我读到 cron 只是在使用 unix/linux。我的服务器在 unix 上运行（等待它）。我现在可以让我的脚本在服务器端睡觉时运行（关闭计算机）吗？我明白了吗？如果是的话，我还必须知道路径在我的日程安排中的命令部分的样子，因为每个示例的内容都类似于“* */1 * * * /usr/bin/wget [http://www. example.com/cron.php](http://www.example.com/cron.php)"，但是为什么路径中有 /usr/bin/wget （这意味着，这个 cron 只是从我的计算机系统而不是从网络服务器运行）以及如何将我的日程安排在服务器上以及更好的位置。我的服务器有我的 index.php 所在的根 public_html 请给我一个时间表示例以及如何触发我的名为“to_fire.php”的 php 数据，该数据通过 mysql 将数据放在我的数据库中。

我希望你们中的一些人知道我所说的亲身经历究竟是什么意思。我对这个命令部分以及如何让它仅从网络服务器而不是我的计算机系统运行感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:37:26.157

1.  `wget`是用于访问 Web URL 的 unix 命令。`curl`是另一个类似工作的命令。`php path\to\script.php`正如 Gigawatt 所提到的，您也可以使用来运行。他们都没有太大的区别

2.  `* */1 * * *`就是设置cron定时。

3.  `/usr/bin/wget``wget`是您服务器上的位置

4.  是的，一旦设置了 cron，您就可以不理会它。只要服务器还活着，cron 就会按计划运行。您甚至可以设置 cron 向您发送电子邮件，但这不适用于您的情况，因为每分钟运行时间太短。

5.  每分钟运行 cron 似乎并不常见。如果您正在执行实时更新之类的操作，请考虑其他解决方案。

6.  可以在 cPanel 上设置 Cron。

7.  您需要将您的 cron 脚本配置为仅接受来自同一服务器的请求，以避免其他人访问此 URL。

### cron 的一些资源

在 cPanel [http://drupal.org/node/369267中配置 cron 作业](http://drupal.org/node/369267)

使用 cron 备份数据库[http://wiki.lunarpages.com/Backup_Databases_using_a_cron](http://wiki.lunarpages.com/Backup_Databases_using_a_cron)

使用 cron 命令配置 cron 作业[http://drupal.org/node/23714](http://drupal.org/node/23714)

使用 PHP 管理 Cron 作业[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

# php - Sphinx searchd：未能锁定 .spl 文件，没有这样的文件或目录

> ID：13847962
> 
> 赞同：0
> 
> 时间：2012-12-12T20:22:09.103
> 
> 标签：php, permissions, full-text-search, sphinx

我在我的开发环境中使用 sphinx 进行索引，它工作正常。但是当我把它带到服务器上时。我可以建立索引，并且我有搜索索引，但是每次我运行命令时： searchd --config configfile ，它都会给我一个错误：

```
Failed to lock .spl file, no such file or directory. not indexing

Fatal: no valid indexes to serve. 
```

我授予了写入该目录的权限，所以我很确定这不是权限问题。会是什么呢？请帮忙，尝试解决它已经两个星期了，但没有成功。我真的很沮丧。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:55:58.550

Indexer 索引的文件位于 /usr/local/sphinx/var/data。

首先，运行索引器来创建索引文件。如果你已经在下面检查这些：

确保 searchd 在搜索时使用的索引源文件（.spl、.spd、.sph、.spk ... 等）位于那里（/usr/local/sphinx/var/data）

查看您的配置文件的索引器配置部分（相关的）有一行（ path = /usr/local/sphinx2/var/data/srcDeltaUpdate ）或必须是。

# scala - 阿卡杀VS停VS毒丸？

> ID：13847963
> 
> 赞同：221
> 
> 时间：2012-12-12T20:22:11.240
> 
> 标签：scala, akka

Akka 的新手问题 - 我正在阅读 Akka Essentials，有人可以解释 Akka Stop/Poison Pill 与 Kill 之间的区别吗？这本书只提供了一个小解释“杀死是同步的，而毒丸是异步的”。但以什么方式？在此期间调用参与者线程是否锁定？在杀戮、停止后诱发等过程中是否通知了儿童演员？一个概念与另一个概念的示例用法？

非常感谢！

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2012-12-12T20:49:21.433

两者都`stop`将`PoisonPill`终止参与者并停止消息队列。它们会导致actor停止处理消息，向它的所有子节点发送停止调用，等待它们终止，然后调用它的`postStop`钩子。所有进一步的消息都发送到死信邮箱。

不同之处在于在此序列开始之前处理哪些消息。在`stop`调用的情况下，当前正在处理的消息首先完成，所有其他消息都被丢弃。发送 a`PoisonPill`时，这只是队列中的另一条消息，因此序列将在`PoisonPill`收到时开始。队列中所有在它前面的消息将首先被处理。

相比之下，`Kill`消息会导致参与者抛出一个`ActorKilledException`使用普通监督机制处理的消息。因此，这里的行为取决于您在主管策略中定义的内容。默认是停止actor。但是邮箱仍然存在，所以当actor重新启动时，除了导致失败的消息之外，它仍然会保留旧消息。

另请参阅文档中的“停止演员”、“杀死演员”部分：

[http://doc.akka.io/docs/akka/snapshot/scala/actors.html](http://doc.akka.io/docs/akka/snapshot/scala/actors.html)

以及更多关于监管策略的信息：

[http://doc.akka.io/docs/akka/snapshot/scala/fault-tolerance.html](http://doc.akka.io/docs/akka/snapshot/scala/fault-tolerance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-16T11:36:57.720

尽可能使用 PoisonPill。它被放在邮箱上，并像任何其他消息一样被使用。您还可以在演员中使用“context.stop(self)”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:55:10.663

PoisonPill 在处理完所有接收到邮箱的消息后，在 PoisonPill 之前异步停止actor。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T00:32:21.373

您可以同时使用 actor stop 和毒丸来停止对 actor 的处理，并使用 kill 来完全终止 actor。x.stop 是您在 akka 接收方法中进行的调用，只会在调用 postStop 后用新的 actor 替换 actor 状态。X ！PoisonPill 是您传递给 actor 以在 actor 运行时停止处理的方法（推荐）。调用 postStop 后也将替换 actor 状态。x.kill 将终止actor，并将删除actor Path 中的actor，并将整个actor 替换为一个新actor。

# android - 我必须在整个应用程序中使用我的 Android 清单中指定的包名称吗？

> ID：13847964
> 
> 赞同：0
> 
> 时间：2012-12-12T20:22:12.147
> 
> 标签：android, packages, google-play

我在我和朋友用于合资企业的命名空间下开发了一个应用程序。

我已经将该应用程序迁移到我的个人开发者帐户，并且必须继续在清单文件中使用相同的包名称，否则它将在市场上显示为新应用程序等。

在整个应用程序中继续使用该包名称似乎很奇怪（它是在 2010 年初我们第一次开始学习时发布的，我计划的更新将是一个完整的重写），我宁愿使用我的包前缀。

我可以在 AndroidManifest.xml 文件中保留旧的包名称，但在整个应用程序中使用新的包前缀，并在我的清单中明确限定任何`Activity`s、`Service`s 或`Receiver`s 等，还是在我更新应用程序时会导致一些问题？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
--> package="com.ouroldjointsite.theapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application>
        <activity
-->         android:name="uk.co.ataulmunim.theapp.TheAppActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

也就是说，`package`Play Store 唯一会检查应用程序是否相同的属性？我知道我仍然必须使用与以前相同的密钥对其进行签名。

在旁注中，即使它有效，是否不鼓励这样做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:54:54.530

您可以更改 Activity 的包名，但不能更改应用程序的包名。

是的，Activity 的包名可以不同于应用程序的包名。只是当你使用`Android New Project...`向导启动一个新项目时，它只是假设Application的包名将与Activity的包名相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:05:00.513

不，你不必。

需要注意的是，某些服务（例如 Google Cloud Messaging）需要放在您的应用程序包目录中，以 android 应用程序包命名。

但是除了这两个文件之外，在我的项目中，我将所有内容都放在一个`bundle`包中

# javascript - 将元素保存为对象属性是一种好习惯吗？

> ID：13847968
> 
> 赞同：0
> 
> 时间：2012-12-12T20:22:42.273
> 
> 标签：javascript, backbone.js

我正在编写一个小的 JavaScript 框架，以实现类似于骨干网的有趣和可能的实现（因此有标签）。我已经开始将元素保存为对象属性，如下所示。我不确定我是否见过这样做，所以我很好奇这是否会导致任何问题。

同样，如果模块依赖于其他模块，我会在对象顶部以....另一个对象的形式列出这些模块。

我想要一种列出依赖项（页面元素或 JavaScript 模块）并预先检测任何问题的方法。这与依赖注入具有相似（不同）的好处。

[这是此代码审查](https://codereview.stackexchange.com/questions/19550/a-structured-approach-to-development-a-test-object)帖子中的一个特定问题，它进一步解释了框架的工作原理。

```
/*MUserTry
**
**
**         
*/
$A.modelAjax({
    Name:       'MUserTry',
    S:          {
                    DynSma: SDynSma,
                    DynTwe: SDynTwe,
                    DynArc: SDynArc,
                    AniFlipPage: SAniFlipPage,
                    ClientStorage: SClientStorage
                },
    E:          {
                    but: $A('#ut_but')[0]
                },
    J:          {
                    box: $('#ut_box')
                },
    init: function () {
        var pipe = {}, 
            this_hold = this;
        this.J.box.draggable();
        this.E.but.addEventListener("click", function () {
            pipe = $A.definePipe(this_hold.Name);
            $A.ajaxMachine(pipe);
        }, false);
    },
    pre: function (pipe) {
        pipe.page.email = this.e_button.getAttribute('data-email');
        pipe.proceed = true;
    },
    post: function (pipe) {
        this.S.ClientStorage.setAll(pipe.server.smalls);
        this.S.DynSma.run(pipe.server.smalls);
        this.S.DynArc.run(pipe.server.arcmarks);
        this.S.DynTwe.run(pipe.server.tweets);
        this.S.AniFlipPage.run('ma');
    },
    finish: function (pipe) {
        $A.log(pipe);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:31:46.427

好的，首先让我提供强制性的“通过重新发明轮子，你永远不会得到更好的轮子”警告。无论你想要完成什么，如果你使用现有的库，几乎可以肯定你会更成功。即使你有充分的理由自己制作，至少看看现有的库仍然会让你受益匪浅。

但是……也许你只是在玩这个项目，而看其他项目并不好玩，所以你没有做。很公平。

无论如何，如果您确实查看 Backbone，您会发现这种做法是 Backbone View 类的核心。Backbone 中的每个视图都有一个“el”和“$el”属性，它们引用视图的原始 DOM 元素和该元素的 jQuery 包装版本。

Backbone 对此没有真正的性能问题，因为 JS 中的变量/属性只是指针；换句话说，当你将一个对象的属性设置为一个元素时，你并没有复制那个元素，你只是添加了一个对它的引用（换句话说，它更像是一个 A 标签而不是而不是一个全新的文件）。

有一次 Backbone 确实有问题（你的框架也会有问题）是使用过时的引用。换句话说，如果你只是从页面中删除元素 X，浏览器将停止为它使用内存（最终，通过垃圾收集）。但是如果有一个对象指向那个元素，它就不会被垃圾收集，因为任何有引用的东西都不是“垃圾”。

因此，您必须注意的主要事情是确保这些对象：

A）只要他们的元素被删除，或者

`delete obj.reference`B）当他们的元素被删除时摆脱他们的引用（例如）

如果你不这样做，事情可能仍然会正常工作......直到你在一个页面上使用它并且创建/删除了很多元素，此时 Firefox 将开始弹出“这个脚本花费了太长时间快跑，你真的确定要这么做吗？” 消息。

# facebook-graph-api - 使用 facebook php api 将照片离线发布到用户的照片

> ID：13847969
> 
> 赞同：0
> 
> 时间：2012-12-12T20:22:45.157
> 
> 标签：facebook-graph-api

要将照片发布到登录用户的照片，这些是 api 函数参数：

```
$result = $facebook->api('/me/photos/', 'post', $attachment); 
```

我想使用以下方式在离线模式下发布照片：

```
$result = $facebook->api('/'.$user_id.'/photos/', 'post', $attachment); 
```

但这不起作用，因为我认为 user_id 被读取为专辑 ID。

当我有用户 ID 时，发布到用户照片的正确网址是什么？

我在哪里可以找到不同图形操作的所有这些“url”的列表？

注意：用户已授予该应用的发布和离线权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T22:34:01.077

只要令牌处于活动状态，您就可以使用`me`，所以`$result = $facebook->api('/me/photos/', 'post', $attachment);`应该在`offline_access`可能的情况下继续工作。即使现在有了 2 个月的令牌，您也可以`me`再次使用，*只要访问令牌有效*。

# ruby-on-rails - Ruby on Rails - 关联对象的最大数量？

> ID：13847971
> 
> 赞同：4
> 
> 时间：2012-12-12T20:22:50.807
> 
> 标签：ruby-on-rails, max

我需要查询帮助。我有多个食堂，每个食堂都有多个餐点，每餐都有多个 MealPicks。

虽然我不知道这个`MealPick`模型是不是好主意，因为我需要显示今天这顿饭被挑选了多少次，所以我需要时间戳来进行这个查询。

```
class Meal < ActiveRecord::Base
  def todays_picks
    meal_picks.where(["created_at >= ? AND created_at < ?", Date.today.beginning_of_day, Date.today.end_of_day])
  end
end 
```

在我在 Meal 中只有一个 meal_picked_count 计数器之前，我通过 increment_counter 方法递增。

**好的，现在我需要为每个 Canteen 显示拥有最多 MealPicks 的 Meal**，我在控制台中玩过并尝试了类似的东西，`Canteen.find(1).meals.maximum("meal_picks.count")`但这显然不起作用，因为它不是一个列。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:33:16.427

你可以这样做：

```
MealPick.joins(:meal => :canteen)
        .where("canteens.id = ?", 1)
        .order("count_all DESC")
        .group(:meal_id)
        .count 
```

这将返回一个这样的有序哈希：

```
{ 200 => 25 } 
```

`200`餐点编号在哪里`25`，计数在哪里。

***更新***

对于任何感兴趣的人，我开始玩弄这个，看看我是否可以使用 ActiveRecord 的子查询来给我比以前想出的更有意义的信息。这是我所拥有的：

```
class Meal < ActiveRecord::Base
  belongs_to :canteen
  has_many :meal_picks
  attr_accessible :name, :price
  scope :with_grouped_picks, ->() {
    query = <<-QUERY
      INNER JOIN (#{Arel.sql(MealPick.counted_by_meal.to_sql)}) as top_picks 
      ON meals.id = top_picks.meal_id
    QUERY

    joins(query)
  }

  scope :top_picks, with_grouped_picks.order("top_picks.number_of_picks DESC")
  scope :top_pick, top_picks.limit(1)
end

class MealPick < ActiveRecord::Base
  belongs_to :meal
  attr_accessible :user

  scope :counted_by_meal, group(:meal_id).select("meal_id, count(*) as number_of_picks")
  scope :top_picks, counted_by_meal.order("number_of_picks DESC")
  scope :top_pick, counted_by_meal.order("number_of_picks DESC").limit(1)

end

class Canteen < ActiveRecord::Base
  attr_accessible :name
  has_many :meals
  has_many :meal_picks, through: :meals

  def top_picks
    @top_picks ||= meals.top_picks
  end

  def top_pick
    @top_pick ||= top_picks.first
  end
end 
```

这允许我这样做：

```
c = Canteen.first
c.top_picks #Returns their meals ordered by the number of picks
c.top_pick  #Returns the one with the top number of picks 
```

假设我想按选择的数量订购所有餐点。我可以这样做：

```
Meal.includes(:canteen).top_picks #Returns all meals for all canteens ordered by number of picks.
Meal.includes(:canteen).where("canteens.id = ?", some_id).top_picks #Top picks for a particular canteen
Meal.includes(:canteen).where("canteens.location = ?", some_location) #Return top picks for a canteens in a given location 
```

由于我们使用连接、分组和服务器端计数，因此不需要加载整个集合来确定选择计数。这更灵活一点，可能更有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T20:56:05.743

```
canteen.meals.max {|m| m.meal_picked_count} 
```

# ios - 应用上市前如何实现打开AppStore页面？

> ID：13847972
> 
> 赞同：0
> 
> 时间：2012-12-12T20:22:55.937
> 
> 标签：ios, app-store

我在这里找到了以下代码片段：

```
NSURL *url = [NSURL URLWithString:@"itms-apps://itunes.com/apps/???"];
[[UIApplication sharedApplication] openURL:url]; 
```

现在假设应用程序会知道市场上是否有可用的新版本（使用自己的服务器）如​​果我的应用程序尚未上市，如何实现重定向2/显示正确的 appStore 页面。在将其上传到苹果之前，我需要知道该链接。如何知道它将是什么网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:29:53.797

假设您已经拥有开发者帐户，您可以开始应用提交过程。填写所有详细信息等，但不要上传您的二进制文件。

一旦你到达最后，并且准备好上传二进制文件，iTunes Connect 实际上会为你提供你的 iTunes URL。您应该能够在构建应用程序之前将其复制并粘贴到您的应用程序中，然后上传您的最终二进制文件。

或者，您始终可以在自己的一台服务器上使用 URL，然后重定向到 iTunes URL。这样您就可以在应用程序之外进行更新。这实际上是我在 Apple 提前提供 URL 之前所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:33:12.843

> 您必须在 上创建应用记录`iTunes Connect`。只需填写一些虚拟数据即可。一旦你有了应用记录，就会有一个 Apple ID，比如 123456789。

'

> 如果您使用的是 Appirater，那么这是您需要在标题中填写的数字，否则链接（从 appirater 中复制）为

```
itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=APP_ID 
```

其中 APP_ID 是您从 iTunes Connect 获得的号码。

# image - 将图像和文本放在“可滚动框”中以与上下文菜单一起使用

> ID：13847973
> 
> 赞同：2
> 
> 时间：2012-12-12T20:22:57.267
> 
> 标签：image, text, contextmenu

我是 C# 编码的初级人员，在控制台输出中学到了东西。现在我正在尝试更好地理解表单并尝试以 Windows 形式制作应用程序。

我的目标是做一个 foreach(do enumration) 循环从文件中 ping 一些主机的内容。这部分我成功了。

现在我想以下一个布局的形式呈现它。

主机名（文本） ipadress（文本） 我希望该行可以用于上下文菜单。

我尝试在文本框中执行此操作，但没有成功，所以我想在richtextbox 中尝试，但我不确定这是否是正确的选择。有谁知道我必须使用哪种控制来实现我的目标，以及我应该使用哪些方法。

我不是要求给我写整个代码，只是帮助我以正确的方式思考。您的帮助将非常感激。

谢谢。

# silverlight - 图像文件资源到 Silverlight 应用程序中的图像源

> ID：13847975
> 
> 赞同：0
> 
> 时间：2012-12-12T20:23:22.353
> 
> 标签：silverlight

我想要一个列表框，列出我在我的应用程序中作为资源拥有的所有图像，然后在选择更改时更改我的应用程序中的图像源。

需要：枚举所有图像文件，将它们加载到图像源中

在 WPF 中，我可以只使用 System.IO 从目录中获取文件，但在 Silverlight 中我不能这样做。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:06:10.730

不要认为您可以对设置为资源或内容的文件执行此操作。Embedded Resource 是可能的（尽管 Silverlight 不推荐 Embedded Resource。不要认为 Image 控件可以直接访问它们）。请参阅[相关讨论](https://stackoverflow.com/questions/7456609/how-to-enumerate-images-included-as-content-in-the-xap)它建议在构建时[使用 T4创建这样一个列表](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

# c++ - 在 C++ 中声明一个 struct 类型的二维数组

> ID：13847980
> 
> 赞同：0
> 
> 时间：2012-12-12T20:23:41.587
> 
> 标签：c++, struct, multidimensional-array

我声明了一个应该是像素的结构，它有 3 个属性（`x`、`y`位置和`F`强度），如下所示：

```
struct pixel {
    int F,          // intensity from 0-255
    x,              // horizontal component           
    y;              // vertical component
}; 
```

然后我声明了一个像素类型的二维数组（上面的结构），如下所示：

```
int N=100;
pixel image[N][N]; 
```

然后我使用以下循环将值分配给`x`and `y`：

```
int count, k;

for (int i=0 ; i<N ; i++)
    for (int j=0 ; j<N ; j++)
    {
        k = j + i*N;
        image.x[k] = count;
        count++; 
     } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:28:12.220

您可以使用`i`and`j`来索引`image`：

```
 image[i][j].x = count; 
```

我根本不明白你为什么需要`k`和明确的指数计算。编译器会自动为您完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:30:40.470

线

```
image.x[k] = count; 
```

是不正确的。您声明了一个二维像素数组：

```
pixel image[N][N]; 
```

访问数组元素的方法如下：

```
image[i][j].x = count; 
```

您不需要自己计算平面指数 k。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T20:28:04.413

您正在尝试索引结构的字段而不是结构本身，而且您没有将其索引为二维数组。

而不是这样做：

```
image.x[k] 
```

做：

```
image[i][j].x 
```

另外，你的代码编译了吗？一些编译器会拒绝边界是变量的数组声明，即使是 const。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T20:36:22.927

首先，没有定义“k”。因此，它将为 k 使用垃圾值。

此外，对于图像中的点的索引，您必须使用：

```
image[i][j] 
```

因此，您的程序中的更正将是：

```
image[i][j].x = count; 
```

代替`image.x[k] = count;`

# javascript - 何时使用 WinJS.Navigation.state 与选项

> ID：13847992
> 
> 赞同：2
> 
> 时间：2012-12-12T20:25:00.967
> 
> 标签：javascript, windows-8, winjs

我知道我可以`WinJS.Navigation.navigate("/pages/page2/page2.html", someData)`用来导航到传递数据的页面。从目标页面，我可以`someData`通过`options`在 ready 函数中访问或访问`WinJS.Navigation.state`. 我应该选择哪些选项以及何时选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:52:44.560

“返回”时状态会有所不同；这将是您在用户与页面交互时放置在历史信息中的任何状态（滚动、选择、输入的文本等）。

导航到新页面时使用选项；它们是来自其他地方的选项，使您能够确保**最初**选择了正确的东西。

# encryption - 用于配置设置的简单加密库/工具

> ID：13847997
> 
> 赞同：0
> 
> 时间：2012-12-12T20:25:29.303
> 
> 标签：encryption, connection-string, certificate, encryption-asymmetric

我的应用程序将 db 连接字符串存储在一个 xml 配置文件中，该文件存储在源代码控制 ( svn ) 下。

在 prod 中部署时，我的应用程序需要检索加密的字符串并对其进行解密。

执行 ad-hoc 加密的能力应该仅限于 prod 操作组——其他人不应该知道原始 prod db 连接字符串。仅将加密的 prod db 连接字符串签入到源代码控制

该应用程序解密字符串的能力仅限于其在 prod 中的部署。（在 dev/qa 中，配置文件包含非 prod dbs 的连接字符串，这些未加密。）

我想知道是否可以为此目的调整基于公钥/私钥证书的机制？

或者什么是极简设计？

库/工具是否可用于此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:33:52.470

对于 Asp.Net 应用程序，`reg_iis`可以为您加密 web.config 文件的部分内容。

> aspnet_regiis -pef 我的秘密。

[http://odetocode.com/blogs/scott/archive/2006/01/08/encrypting-custom-configuration-sections.aspx](http://odetocode.com/blogs/scott/archive/2006/01/08/encrypting-custom-configuration-sections.aspx)

有一篇关于 Code Project 的好文章概述了如何将相同的机制用于其他类型的 .NET 应用程序：

> ASP.NET 提供了自动加密 web.config 中的部分的可能性。WinForm 应用程序似乎无法为 app.config 执行此操作。这对于一部分来说是正确的：WinForms 不提供配置它的工具。但这是可以完成的。都是.NET。不是吗？那么我们该怎么做呢？

[http://www.codeproject.com/Articles/18209/Encrypting-the-app-config-File-for-Windows-Forms-A](http://www.codeproject.com/Articles/18209/Encrypting-the-app-config-File-for-Windows-Forms-A)

# twitter-bootstrap - bootstrap.js 的 'scroll.scroll-spy.data-api' 事件在哪里触发？

> ID：13847998
> 
> 赞同：1
> 
> 时间：2012-12-12T20:25:31.617
> 
> 标签：twitter-bootstrap

我正在尝试集成 bootstrap.js 和backbone.js。不幸的是，他们对 '#' 资源的共享使用使得一些引导程序的功能无用。因此，我需要复制 bootstrap.js 的 data-spy 插件。该插件侦听“scroll.scroll-spy.data-api”事件并在每次触发时运行一些代码。

```
34 this.$scrollElement = $element.on('scroll.scroll-spy.data-api', process) 
```

即使在搜索了整个引导代码库之后，我似乎也无法找到触发此事件的位置。这是特定于引导程序的事件吗？如果是，它在哪里定义？

这是整个文件的链接： [https ://github.com/twitter/bootstrap/blob/master/js/bootstrap-scrollspy.js](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-scrollspy.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:52:33.373

的值`$element`由[第 31 行](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-scrollspy.js#L31)确定。如果 ScrollSpy 插件要附加到`<body>`，则`window`用作**滚动**事件的发射器。否则，使用它附加到的元素。

该字符串`'scroll.scroll-spy.data-api'`是[标准**滚动**事件](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/scroll)的命名空间版本。有关命名空间事件的更多信息，请参阅[jQuery 参考](http://api.jquery.com/on/#event-names)。