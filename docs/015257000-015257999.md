# StackOverflow 问答 15257000-15257999

# c# - 如何删除预定的 Toast 通知

> ID：15257001
> 
> 赞同：1
> 
> 时间：2013-03-06T20:09:28.177
> 
> 标签：c#, xaml, windows-8

我知道如何从这个示例 [http://code.msdn.microsoft.com/windowsapps/Schedules-Toast-notificatio-457e599b#content](http://code.msdn.microsoft.com/windowsapps/Schedules-Toast-notificatio-457e599b#content)

但现在我想做的是知道如何删除已创建的吐司我尝试了这段代码但它不起作用

```
IReadOnlyList<ScheduledToastNotification> scheduled =
    ToastNotificationManager.CreateToastNotifier().GetScheduledToastNotifications();

foreach (ScheduledToastNotification notify in scheduled)
{
    if (notify.Id == id)
    {
        ToastNotificationManager.CreateToastNotifier().RemoveFromSchedule(notify);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:20:28.287

您可以使用 Clear 方法删除计划的磁贴通知。请参阅[如何从所有计划的磁贴通知中重置 TileUpdateManager？](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/039f8e80-6590-42e6-954b-8407ff382d0f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T13:32:19.797

在[Microsoft 示例](https://docs.microsoft.com/en-us/uwp/api/windows.ui.notifications.toastnotifier.removefromschedule)中，问题在于您创建了多个 toast 通知程序。相反，您应该使用相同的 toast 通知程序来删除您的预定通知。

# ios - 当我不能弱链接时如何测试一个类的存在

> ID：15257002
> 
> 赞同：4
> 
> 时间：2013-03-06T20:09:33.217
> 
> 标签：ios, objective-c

我正在编写一个设计为可重用的类，但我已经包含了对编译时可能并不总是可用的类的调用。

更具体地说，我正在使用 Flurry 分析，并且我想包含对它的调用 - 但不是这个模块可能包含的每个项目都可以访问 Flurry 库 - 我只是希望它不会在这些代码中编译情况。该模块将作为源代码分发，因此只需在编译时进行测试。

到目前为止，我已经尝试过：

```
if([Flurry class]){
    [Flurry logEvent:@"Blah"];
} 
```

这失败了“使用未定义的标识符” - Flurry 没有在任何地方定义，因为没有对库的弱引用

所以接下来尝试：

```
Class flurryClass = NSClassFromString(@"Flurry");
if(flurryClass){
  [flurryClass logEvent:@"Blah"];
} 
```

这失败为“选择器 logEvent 没有已知的类方法”

所以我似乎被卡住了，因为第一种方法依赖于弱链接一个可能无法用于弱链接的库！我假设的第二种方法失败，因为我在当前没有定义的 Class 上调用 Class 方法，所以编译器会抱怨？有没有人能想到的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T20:19:45.323

你必须在整个过程中使用反射。将您的代码更改为：

```
Class flurryClass = NSClassFromString(@"Flurry");
if(flurryClass){
  [flurryClass performSelector:@selector(logEvent:) withObject:@"Blah"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T20:44:16.843

我会避免让您的图书馆在未经他人许可的情况下自动将乱舞事件记录到其他人的帐户中。我会推荐预处理器检查并要求实现者明确启用 Flurry。

```
#if MYLIB_ENABLE_FLURRY

    if([Flurry class]){
        [Flurry logEvent:@"Blah"];
    }

#endif //MYLIB_ENABLE_FLURRY 
```

现在，如果有人想从您的库中添加日志记录，您可以指示他们需要 Flurry 并使用`-DMYLIB_ENABLE_FLURRY=1`或将其添加到其他 C 标志（如果他们直接包含源代码）来编译您的库。

# c# - 当线程文化不是英语时，.NET CookieException“Cookie 格式错误” - 仅在某些环境中

> ID：15257004
> 
> 赞同：2
> 
> 时间：2013-03-06T20:09:36.737
> 
> 标签：c#, asp.net, .net, cookies, currentculture

我正在尝试在调用其他 Web 服务的 ASP.NET 应用程序中进行一些 cookie 管理。我遇到了**只能在某些环境**中重现的错误。我的问题是：

1.  生产和开发之间的差异是否足以导致此问题？
2.  我怎样才能弄清楚生产/开发之间有什么不同？
3.  我可以做些什么来解决这个问题？

以下是我用来重现问题的详细信息。我看到的错误是：

```
Unhandled Exception: System.Net.CookieException: 
An error occurred when parsing the Cookie header for Uri 'http://example.com/'. 
---> System.Net.CookieException: **Cookie format error.**
   at System.Net.CookieContainer.CookieCutter(Uri uri, String headerName, 
         String setCookieHeader, Boolean isThrow)
   --- End of inner exception stack trace ---
   at System.Net.CookieContainer.CookieCutter(Uri uri, String headerName, 
         String setCookieHeader, Boolean isThrow)
   at System.Net.CookieContainer.SetCookies(Uri uri, String cookieHeader)
   at Program.Main() in c:\Sample\Program.cs:line 21
```

我创建了一个重现问题的控制台应用程序（下面的相关部分）。完整代码在[https://compilr.com/adutton/cookiecutterexample/main.cs](https://compilr.com/adutton/cookiecutterexample/main.cs)

```
string[] cultures = new[] { "en-US", "es-MX" };
const string cookieHeader = ".ASPXAUTH=SECURITYINFO; domain=.example.com; "
    + "expires=Mon, 06-Mar-2023 18:36:33 GMT; path=/; HttpOnly";

foreach (string culture in cultures)
{
    Console.WriteLine("CookieCutting with culture: " + culture);
    Thread.CurrentThread.CurrentCulture = new CultureInfo(culture);
    Thread.CurrentThread.CurrentUICulture = new CultureInfo(culture);

    CookieContainer ctr = new CookieContainer();
    // The following line throws an exception
    ctr.SetCookies(new Uri("http://example.com/"), cookieHeader);
}
```

此代码适用于我的开发机器（Windows 7、x64、.NET 4.5.50709），但**不适用于生产**环境（Windows Server 2008 R2 Enterprise、x64、.NET 4.0.30319），其中代码会引发文化异常`es-MX`。

如果我从 cookie 标头中删除日期，异常就会消失，这让我相信这是 cookie 解析器的本地化问题。也许这已在 .NET 4.0 -> 4.5 中修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:21:57.870

我认为问题出在星期几之后的逗号，如下所示：[Help With .NET CookieContainer](https://stackoverflow.com/questions/1834522/help-with-net-cookiecontainer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:08:22.840

正如@nunzabar 指出的那样，问题在于当前文化在星期几中设置逗号的方式。在这种情况下，安装 .NET 4.5 框架导致问题消失。我没有反编译代码来查看 .NET 4.0 和 4.5 之间的差异，但是当我们安装新版本的框架时它已修复。

# angularjs - AngularJS：ng-include 和范围

> ID：15257008
> 
> 赞同：1
> 
> 时间：2013-03-06T20:09:57.477
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

为什么我不能从 ng-include 内部的 html 设置控制器 ExampleCtrl 的 $scope.myProperty 的值。但是，如果我定义 $scope.myObj.myProperty 并且在 html 中我指的是`ng-model="myObj.myProp"`工作正常吗？

例子：

```
<div ng-app="MyApp">
    <div ng-controller='ExampleCtrl'>
        <div ng-include="'#inlcude'"></div>
        <!-- THIS DON'T WORK -->
        <p><b>myProperty:</b>{{myProperty}}</p>
        <!-- THIS WORK -->
        <p><b>myObj.myProperty:</b>{{myObj.myProperty}}</p>
    </div>
</div>    
<!-- INCLUDE HTML -->
<div id='include'>
    <input ng-model='myProperty' type='text' />
    <input ng-model='myObj.myProperty' type='text' />
</div> 
```

我了解 ng-include 创建一个新范围，但是为什么从包含的 html 中我看不到您父范围的简单属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:19:57.133

当输入写入`myProperty`它时（此时）将在子作用域上创建一个属性。此子范围属性隐藏/隐藏同名的父属性。孩子所做的任何更改都将在孩子范围属性上进行。父作用域看不到这个新的子作用域属性——它不知道这个其他属性存在。`{{myProperty}}`插值时它会找到自己的属性。

当另一个输入写入 时`myObj.myProperty`，它会遵循原型链并写入父作用域上的属性。

有关更详细的答案（带有大量图片），请参阅[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

# javascript - 在 PHP 和 Javascript 中检查字符串中的 '

> ID：15257009
> 
> 赞同：0
> 
> 时间：2013-03-06T20:09:59.990
> 
> 标签：javascript, php, html

我正在使用 Javascript 作为中间人从 HTML 向 PHP 发送数据。我想检查一个字符串是否在 Javascript 和 PHP 中包含 ' 因为它会阻止我的 sql 命令工作。我已经尝试了下面的代码，但它不起作用。我该怎么做呢？

```
function CheckQuestionAnswerField($value) {
    $isQAValid = true;

    if($value == "")
        $isQAValid = false;
    if($value == null)
        $isQAValid = false;
    for($LCV=0; $LCV<(count($value)-1); $LCV++) {
        if($value[$LCV] == "'")
            $isQAValid = false;
    }

    return $isQAValid;
} 
```

在上面的代码中 $value 是字符串。如果从函数返回 false，那么我会显示警报。此函数适用于前两个 if 语句，但是，这不适用于 for 循环。问题是什么？

我也想知道如何在 Javascript 中做到这一点。

我还想知道这些实现是否可以检测到“.

* * *

编辑-1

我用下面的代码尝试了 strpos 仍然无法正常工作

```
function CheckQuestionAnswerField($value) {
    $isQAValid = true;

    if($value == "")
        $isQAValid = false;
    if($value == null)
        $isQAValid = false;
    if (strpos($value,"'") == true)
        $isQAValid = false;
    if (strpos($value,'"') !== false)
        $isQAValid = false;

    return $isQAValid;
} 
```

它现在说的一切都是假的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:14:39.173

在 JavaScript 中你会使用[`indexOf`](http://www.w3schools.com/jsref/jsref_indexof.asp)

```
if (-1 !== value.indexOf("'"))
{

} 
```

在 PHP 中你会使用[`strpos`](http://php.net/manual/en/function.strpos.php)

```
if (FALSE !== strpos($value, "'"))
{

} 
```

但是，如果您切换到使用准备好的语句，则不需要这个：请参阅[`PDO`](http://php.net/manual/en/book.pdo.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:14:48.247

绝对逃避您在后端的查询。如果你不这样做，这是一个巨大的安全漏洞。

这个函数是旧的方法（参考了替代方法）： http: [//php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

我也会考虑`htmlentities()`在用户提交的数据上使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T20:14:47.050

首先，您不想只检查该字符是否存在并使该值无效-您应该转义所有查询，以便该值的存在与执行查询无关。然后，如果您出于其他原因仍想禁止此字符，则可以这样做。

其次，您可以使用一次检查`empty()`来检查`""`和`null`。

最后，没有理由循环字符串，您可以使用它来查找字符是否出现 -如果不`strpos`出现，它将返回。`false`

```
function CheckQuestionAnswerField($value) {
    $isQAValid = true;

    if(empty($value) {
       $isQAValid = false;
    } else if ( strpos($value, "'") !== false) {
      $isQAValid = false;
    }

    return $isQAValid;
} 
```

# ember.js - Ember.js：复杂的视图布局，正确的方法是什么？

> ID：15257016
> 
> 赞同：3
> 
> 时间：2013-03-06T20:10:22.703
> 
> 标签：ember.js

我们正在构建允许用户向各种社交媒体发布消息的应用程序。我们的设计师创建了一系列交互，允许用户通过使用滑动面板更改其应用程序中的各种设置。我做了一个快速的屏幕截图来说明：

[http://screencast.com/t/tDlyMud7Yb7e](http://screencast.com/t/tDlyMud7Yb7e)

我的问题是建筑学之一。我不确定是否应该使用视图或控制器（或两者）来存储这些面板将包含的一些方法。这是面板的 HTML。它们当前不在脚本标签或视图中：

```
<div id="panel-account-settings" class="panel closed">
    <div class="panel-inner">
        <a href="#" class="button button-close"><i class="icon-cancel"></i>close</a>
        <h3>Account Settings</h3>
        <a href="#" class="button primary button-ga">Google Analytics</a>
        <a href="#" class="button primary button-link-shortening">Link Shortening</a>
        <a href="/accounts/social/connections/" class="button button-disconnect">Disconnect Account</a>
    </div>
    <div id="panel-google-analytics" class="panel-inner">
        <a href="#" class="button button-back"><i class="icon-arrow-right"></i>back</a>
        <h3>Google Analytics</h3>
        <div class="toggle">
            <label>Off</label>
        </div>
        <p>We <strong>won't</strong> append stuff to your links, so they <strong>won't</strong> be trackable in your Google Analytics account.</p>
        <img src="{{ STATIC_URL }}images/ga-addressbar.png" />
    </div>
    <div id="panel-disconnect" class="panel-inner">
        <a href="#" class="button button-back"><i class="icon-arrow-right"></i>back</a>
        <h3>Disconnect This Account</h3>
        <p>If you disconnect this account you will lose all the metrics we tracked for each message. Are you absolute sure you want to get rid of them?</p>
        <div class="button-group">
            <a href="#" class="button button-disconnect">Disconnect</a>
        </div>
    </div>
</div> 
```

视频中显示的齿轮图标包含在帐户模板中

```
<script type="text/x-handlebars" data-template-name="accounts">
    {{#each account in controller}}
        <div class="avatar-name">
            <p>{{account.name}}</p>
            <p>@{{account.username}}</p>
            <i class="icon-cog" {{action "openPanel" Social.SettingsView account }}></i>
        </div>
    {{/each}}
</script> 
```

它有一个简单的控制器

```
Social.AccountsController = Ember.ArrayController.extend({
    openPanel: function(view,account){
        console.log(view,account);
        $(this).parents(".item-account").addClass("active");
        $("#panel-account-settings").prepareTransition().removeClass("closed");
    }
}); 
```

以及路线和模型。考虑到我想要完成的交互，我的问题是我应该把零件和零件放在哪里？至少我需要传入当前的 Account 模型，以便我知道我将应用更改到哪个帐户。我考虑过创建一个包含另一个视图的 mainPanel 视图......像这样：

```
<script type="text/x-handlebars" data-template-name="panelView">
    <div id="panel-account-settings" class="panel closed">
        {{ partial "panelSettingsView" }}
        {{ partial "panelAnalyticsView" }}
        {{ partial "panelDisconnectView" }}
    </div>
</script> 
```

然后齿轮图标上的操作助手可以传入帐户和所需的视图。但我不确定这是否是正确的方法。我很感激一些意见或建议。谢谢。

**更新 1**

理想情况下，我希望最终通过 AJAX 加载每个面板的内容，但这是需要，而不是需要。

**更新 2**

我尝试创建一个 PanelView ，其中包含要加载的面板的逻辑：

```
Social.PanelView = Ember.View.extend({
    tagName: 'div',
    classNames: ['panel-inner'],
    openPanel: function(view,account){
        console.log(view,account);
    }
}); 
```

但是当我试图从齿轮图标调用它时，我得到了一个错误。这：

```
<i class="icon-cog" {{action openPanel target="Social.PanelView" }}></i> 
```

抛出这个错误：

```
Uncaught Error: assertion failed: The action 'openPanel' did not exist on Social.PanelView 
```

这不是正确的语法吗？

**更新 3**

添加版本信息：

```
DEBUG: Ember.VERSION : 1.0.0-rc.1
DEBUG: Handlebars.VERSION : 1.0.0-rc.3
DEBUG: jQuery.VERSION : 1.9.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:31:52.247

最佳实践是始终将任何与 DOM 或 UI 相关的逻辑放入您的视图中，并将数据表示留给控制器（即，对控制器中“选定”项目的引用是一个常见的例子）。

您的`Social.AccountsController.openPanel`方法具有涉及 DOM 的逻辑，这完全是一个视图问题。一个好的开始是将逻辑移到视图中（`Social. SettingsView`？）。

如果您对目前所拥有的东西有所了解，那么理解您的目标并提供更多建议会更容易一些。

编辑：另一个好的做法是将事物分解成非常小的对象。因此，您可以探索拥有一个`selectedAccount`ObjectController，其内容是当前选择的 Account（及其对应的 View）。

# php - ajax 请求返回 html，而不是实际值 - PHP

> ID：15257018
> 
> 赞同：0
> 
> 时间：2013-03-06T20:10:32.807
> 
> 标签：php, ajax

我正在使用这个简单的`PHP`框架，在与其他人有些不安之后[自定义 PHP](http://www.nathandavison.com/posts/view/11/custom-php-mvc-tutorial-part-1-introduction)

我有以下控制器：

```
<?php

class TestController extends BaseController
{

    public function __construct($action, $urlValues) {
        parent::__construct($action, $urlValues);
    }

    public function deploy_test() {
        echo json_encode("helloworld");
    }
}
?> 
```

该函数由一个`.js`名为的函数激活`test()`：

```
function test()
{

    var data = {
        config   : $("#config").val(),
        machines : $("#machines").val(),
        test     : $("#test").val(),
        product  : $("#product").val(),
    };

    $.post('./index.php/test/deploy_test/', data, 
    function( answer ){
        create_bar();
        console.log( answer );
    });
} 
```

但是，我得到的是`index.php`页面`html`本身，而不是`"helloworld"`预期的字符串。我不知道是怎么回事。有人可以取悦我吗？输出是：

```
<!DOCTYPE html>
<html>
<head>
<title>Deployer</title>
</head>
<body>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:13:53.527

在 JS 中的 POST 中指定返回类型： `dataType: json`

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:29:55.593

您需要在发送之前在服务器端设置正确的标头信息，`json_encode("helloworld")`以便 ajax 在读取答案之前可以预期 json 值。例如第一行可能是：

```
header('Cache-Control: no-cache, must-revalidate'); // no cache
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); // json type 
```

您还需要像 David 建议的那样添加`dataType: json`您的 ajax 请求。

# java - 在 Graphics2D 上调用 drawRect 方法会触发 paintComponent 方法吗？

> ID：15257020
> 
> 赞同：1
> 
> 时间：2013-03-06T20:10:33.530
> 
> 标签：java, swing, jpanel, repaint, paintcomponent

我试图弄清楚我的程序的行为，这是我最好的理论，为什么它会做它在做的事情。我希望这将使用该`rand`变量来决定要绘制哪个形状，但似乎`paintComponent`在计时器触发之间多次调用该方法，导致绘制许多形状，我试图了解原因。

这是代码：

```
public class TestPane extends JPanel {

    private int yPos0;
    private int yPos1;
    private int boundary0=750;
    private ActionEvent ae = null;
    private Graphics g0 = null;
    private int count=1;

    public TestPane(Color foreground){
        setForeground(foreground);
        this.setBackground(Color.BLUE);
        Timer timer = new Timer(3000,new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e){
                ae = e;
                 yPos0 =yPos0+50;
                    repaint();
            }
        });
        timer.start();
    }

    @Override
    public void paintComponent(Graphics g){
             g0 = g;
             super.paintComponent(g);
             createShape(yPos0);
             repaint(); 
    }

    public void createShape(int ypos0){
        //generate random number between 1 and 3 and assign to rand
        int rand = (int)((Math.random()*3)+1);

        System.out.println(rand);
        if(rand==1){
            Graphics2D g2d = (Graphics2D) g0.create();
            g2d.setColor(Color.RED);
            g2d.drawRect(0, ypos0, 200, 50);
        }

        if(rand==2){
            Graphics2D g2d = (Graphics2D) g0.create();
            g2d.setColor(Color.GREEN);
            g2d.drawRect(0, ypos0, 150, 50);
            g2d.drawRect(50, ypos0+50,50,50);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:17:36.343

`paintComponent`被调用这么多次 的原因是你`repaint`在那个方法中调用，这导致它自己被*无限*调用。这不是必需的，因为您已经`repaint`从`Timer`.

# vba - 从一个电子表格中提取数据以填充另一个电子表格上的数据框

> ID：15257021
> 
> 赞同：0
> 
> 时间：2013-03-06T20:10:39.187
> 
> 标签：vba, excel

我主要是在寻找有关如何启动项目的指导。

Sprdsht 1 设置为一个表格，其中行包含该位置的特定数据，列包含参数（即 A:K= 名称、排放数据、型号等）。Sprdsht 2 被构造为具有多个框的表单。我正在尝试将数据从 sprdsht 1 导入到 sprdsht 2，并且想知道是否可以一次只导入一行数据以使用宏或 VBA 完成表单（即 F1:F11）。

如果是这样，代码看起来如何？

此外，使用 excel 是处理此功能的最佳方式还是其他程序（即 Access）会更好地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:29:09.937

以下是众多入门方法之一的示例：

```
Sub CopyInfo()
    Dim wb1 As Workbook
    Dim wb2 As Workbook
    Dim sheet1 As Worksheet
    Dim sheet2 As Worksheet
    Dim rng1 As Range
    Dim rng2 As Range
    Set wb1 = Application.Workbooks("FirstWorkbook.xlsx")
    Set wb2 = Application.Workbooks("OtherWorkbook.xlsx")
    Set sheet1 = wb1.Sheets(1)
    Set sheet2 = wb2.Sheets(1)
    Set rng1 = sheet1.Range("A2:K2", Range("A2:K2").End(xlDown))
    Set rng2 = sheet2.Range("F1:F11")
    For i = 1 To rng1.Rows.Count
        For j = 1 To 11
            rng2(j, 1).Value = rng1(i, j).Value
        Next
        Call FunctionThatSubmitsTheFormInSheet2
    Next
End Sub 
```

# asp.net - 奇怪的#.[some char]添加到Firefox中的页面地址

> ID：15257028
> 
> 赞同：0
> 
> 时间：2013-03-06T20:11:16.300
> 
> 标签：asp.net, .net, http, browser

[Asp.net 网站，.net 框架 4]

我注意到我的网页地址中有一个奇怪的东西，每个新页面都请求页面的地址，加载完成后在地址末尾自动附加类似（#.UTedxFc5stU）之类的东西（也可能导致重定向），这发生在只有 .net framework 4 应用程序，而我的其他应用程序没有使用 3.5 ！

*   这发生在Firefox，仅限chrome，而不是Internet Explorer。

这是一个例子：

[http://egypt.motorsyard.com/cars/used](http://egypt.motorsyard.com/cars/used)，在Firefox中打开它，你会看到这样的东西[http://egypt.motorsyard.com/cars/used#.UTehGVc5stU](http://egypt.motorsyard.com/cars/used#.UTehGVc5stU)

这是什么，我如何阻止它？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:16:59.973

检查您的 webconfig 以获取 url 重写代码。

我认为这是 URL 重定向问题。

**编辑**

如果 URL 中有类似 #.TuomlFaZCSo 的字符，则这些字符是地址栏跟踪代码。它们提供了一种方法来查看有多少人通过从地址栏中复制 URL 的用户访问您的网站。如果您有包含服务名称的字符，例如#.TuomlFaZCSo.facebook，那么这些人是从使用该服务共享的链接返回的。

要使用客户端 API 禁用它们，请执行以下操作：

```
<script type="text/javascript">
var addthis_config = {
data_track_address_bar: false,
data_track_clickback: false 
};
</script> 
```

如果您想使用 Wordpress 插件禁用它们，请在 AddThis 插件设置页面的“高级”选项卡上查找它们各自的复选框。

# python - Python 将 Excel 文件（xls 或 xlsx）与 ODS 相互转换

> ID：15257032
> 
> 赞同：6
> 
> 时间：2013-03-06T20:11:24.880
> 
> 标签：python, excel, xlrd, openoffice-api, ods

我一直在网上寻找可以将 Excel 文件转换为 ODS 格式的 Python 库或工具，但没有找到任何东西。

我需要能够以任何一种格式输入和输出数据。我们不需要担心合并的单元格、公式或任何不简单的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T20:52:34.273

如果你安装了 libreoffice，你可以围绕它的无头模式做一个 python 执行包装器：

```
$ /usr/bin/libreoffice --headless --invisible -convert-to ods /home/cwgem/Downloads/QTL_Sample_data.xls 
convert /home/cwgem/Downloads/QTL_Sample_data.xls -> /home/cwgem/QTL_Sample_data.ods using OpenDocument Spreadsheet Flat XML
$ /usr/bin/libreoffice --headless --invisible -convert-to xls /home/cwgem/QTL_Sample_data.ods 
convert /home/cwgem/QTL_Sample_data.ods -> /home/cwgem/QTL_Sample_data.xls using 
```

这比尝试通过图书馆路线来做要容易一些。

# wcf - 如果服务由于不活动 WCF 服务而中止通道，则安全上下文令牌将无效

> ID：15257034
> 
> 赞同：1
> 
> 时间：2013-03-06T20:11:26.350
> 
> 标签：wcf, web-config

我目前正在尝试使用本地托管的网站访问托管的 WCF 服务，该网站在服务器上成功运行（我能够访问 wsdl 等）。

我收到错误消息：

```
The message could not be processed. This is most likely because the action 'http://tempuri.org/IBetFriendService/SelectCustomerUsernamePasswordLogin' is incorrect or because the message contains an invalid or expired security context token or because there is a mismatch between bindings. The security context token would be invalid if the service aborted the channel due to inactivity. To prevent the service from aborting idle sessions prematurely increase the Receive timeout on the service endpoint's binding. 
```

我已将 receiveTimeout 和 inactivityTimeout 都增加到 12:00:00，但我仍然收到错误消息。

网络配置：

```
<configuration>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IBetFriendService1" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="12:00:00" sendTimeout="00:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="6553600" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="12:30:00"
            enabled="false" />
          <security mode="None">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://bet-friend.org.uk/BetFriendLibrary.BetFriendService.svc"
        binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IBetFriendService1"
        contract="BetFriendServiceReference2.IBetFriendService" name="WSHttpBinding_IBetFriendService1">
        <identity>
          <dns />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

WCF 配置片段：

```
 <system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<services>
  <service name="BetFriendLibrary.BetFriendService">
    <endpoint address="" binding="wsHttpBinding" contract="BetFriendLibrary.IBetFriendService">
      <identity>
        <dns />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://bet-friend.org.uk/BetFriendLibrary.BetFriendService.svc" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="False" />
     </behavior>
   </serviceBehaviors>
 </behaviors>
 </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:21:49.073

我也有同样的问题，一旦删除我的所有引用，然后我将再次创建。代码工作正常..试试你也......祝你好运......

谢谢，

拉梅什·佩里亚萨米

# java - Java-如何使用文档过滤器限制输入数字范围？

> ID：15257039
> 
> 赞同：1
> 
> 时间：2013-03-06T20:11:35.443
> 
> 标签：java

谢谢您的帮助！我正在使用 Documentfilter 来限制输入范围。在我的代码中，我可以将输入限制为十进制。但是我怎样才能限制数字的范围呢？例如，对于 textfield1:1-3，对于 textfield2:10-80？

这是我的代码：

```
 class MyIntFilter2 extends DocumentFilter {

    @Override
    public void insertString(FilterBypass fb, int offset,
            String string, AttributeSet attr)
            throws BadLocationException {
        try {
            if (string.equals(".")
                    && !fb.getDocument()
                            .getText(0, fb.getDocument().getLength())
                            .contains(".")) {
                super.insertString(fb, offset, string, attr);
                return;
            }
            Double.parseDouble(string);
            super.insertString(fb, offset, string, attr);
        } catch (Exception e) {
            Toolkit.getDefaultToolkit().beep();
        }

    }

    @Override
    public void replace(FilterBypass fb, int offset, int length,
            String text, AttributeSet attrs)
            throws BadLocationException {
        try {
            if (text.equals(".")
                    && !fb.getDocument()
                            .getText(0, fb.getDocument().getLength())
                            .contains(".")) {
                super.insertString(fb, offset, text, attrs);
                return;
            }
            Double.parseDouble(text);
            super.replace(fb, offset, length, text, attrs);
        } catch (Exception e) {
            Toolkit.getDefaultToolkit().beep();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:23:27.363

将 解析`String`为后`Double`，添加对 的验证`Double`以确保它在您想要的范围内。如果不是，就直接`return`调用，如果是，调用`super.insert`or `replace`。对于每个范围，您都需要一个`DocumentFilter`或一个在其构造函数中采用该范围的范围。

假设您将最小值和最大值包含在范围内，这样的事情

```
class MyIntFilter2(Double prMin, Double prMax) extends DocumentFilter {
  private Double min;
  private Double max;

...

@Override
public void insertString(FilterBypass fb, int offset,
        String string, AttributeSet attr)
        throws BadLocationException {

 ...

 Double value = Double.parseDouble(string);
 if (value.compareTo(max) <= 0 && value.compareTo(min) >= 0) {
   super.insertString(fb, offset, string, attr);
 } else {
   return;
 } 
```

# java - 需要解释置换算法的差异

> ID：15257043
> 
> 赞同：1
> 
> 时间：2013-03-06T20:11:44.850
> 
> 标签：java, algorithm, complexity-theory, permutation

我目前正在解决一个问题，该问题要求我找到 0、1、2、3、4、5、6、7、8、9 的第百万个字典排列。乍一看，我想到了一个非常粗略的解决方案，其复杂度约为**O(n^3)**

```
 public static String permute(char[] a){
        ArrayList<String> array = new ArrayList<String>(); 
        int counter = 1; 
        for (int i = 0; i < a.length; i++){
            array[counter] += a[i];
            for (int j = 0; j < i; j++){
            array[counter] += a[j];
                for(int k = a.length; k > i; k--){
                array[counter] += a[k];}counter++;}
        }
    } 
```

代码可能并不完美，但想法是选择一个数字，然后移动到数组的末尾。第二个数组创建所选数字后面的数字，第三个数组在它之后创建数字。这似乎是一个糟糕的算法，我记得过去的算法是这样的。

```
 public static HashSet<String> Permute(String toPermute) {
        HashSet<String> set = new HashSet<String>();
        if (toPermute.length() <= 1 )
            set.add(toPermute);
        else {
            for (int i = 0; i < toPermute.length(); i++ )
                for (String s: Permute(toPermute.substring(0,i)+ toPermute.substring(i+1)))
                {
                    set.add(toPermute.substring(i,i+1)+s);}
        }
        return set;
    }

} 
```

问题是这个算法使用无序集，我不知道它如何变得足够有序，让我找到第百万个排列。**除了它可能是O(n^2)**的事实之外，我也不知道它的复杂性，因为它调用自己**n**次然后取消堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:22:18.263

在我看来（1）哪个排列是百万分之一绝对取决于您使用的顺序，并且（2）这种排列是递归的成熟问题。我会把它写成一个递归程序，并为每次迭代增加计数。[那是你的问题吗？我真的没有看到问题...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:23:27.997

关于您上面的代码的一些一般情况：

1.  您应该实现接口而不是具体的类，即`List<String> array = ...`。与您的`Set`.
2.  数组从索引 0 开始，您的计数器从索引 1 开始。

最后，要回答您的问题，有一种蛮力方式和一种更优雅的方式，它在数学中使用了一些原则。看看这个解释这些方法的[网站。](http://www.mathblog.dk/project-euler-24-millionth-lexicographic-permutation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T23:18:41.333

这是一个更有效的解决方案：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class P24 {

    static final int digits[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
    static List<Integer> remainedDigits = new ArrayList(Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9));
    static final int factorials[] = new int[digits.length + 1];
    static final int N = 1000_000;

    static int low = -1;
    static int lowIndex = -1;
    static int highIndex = -1;

    public static void main(String args[]) {
        populateFactorials(digits.length);
        validateN(N);
        identifyMargins();
        int n = N;  // it will be changed

        int fixedDigits = digits.length - highIndex;

        String result = "";
        for (int i = 0; i < fixedDigits; i++) {
            result += remainedDigits.get(0);
            remainedDigits.remove(0);
        }

        for (int i = fixedDigits; i < digits.length; i++) {
            int pos = 0;
            int firstDigit = remainedDigits.get(pos);
            low = factorials[lowIndex];
            while (n - low > 0) {
                pos++;
                n -= low;
            }
            lowIndex--;
            result += remainedDigits.get(pos);
            remainedDigits.remove(pos);
        }

        System.out.println(result);
    }

    private static void validateN(int n) {
        if (n < 0 || n > factorials[factorials.length - 1]) {
            System.out.println("The input number is not valid");
            System.exit(0);
        }
    }

    private static void identifyMargins() {
        for (int i = 0; i < factorials.length - 1; i++) {
            if (factorials[i] <= N && N < factorials[i + 1]) {
                lowIndex = i;
                highIndex = i + 1;
            }
        }
    }

    private static void populateFactorials(int max) {
        for (int i = 0; i <= max; i++) {
            factorials[i] = fact(i);
        }
    }

    private static int fact(int x) {
        if (x == 0 || x == 1) {
            return 1;
        }
        int p = 1;
        for (int i = 2; i <= x; i++) {
            p *= i;
        }
        return p;
    }

} 
```

**时间：305 微秒。**

**解释：**

1.  因为排列的总数`{a1, ..., an}`是`n!`，所以我决定需要一个`factorials`数组。我存储在其中：`{0!, ..., 10!}`.
2.  我确定了这个序列中的数字在哪里，对于我们的例子（N = 1000000），它在`9!`和之间`10!`。如果它低于我添加从数组中获取`9!`的数字填充。`fixedDigits``remainedDigits`
3.  因为数字大于`9!`，所以我数了数我可以从数字中提取多少次`9!`，结果帮助我获得第一个数字。`8!`然后，我对,`7!`等有类似的方法。

上述解释基于以下简单观察。如果我们有一个集合`{a1,...,ai,...,an}`并且我们修复`a1`, ..., `ai`，我们可以获得`(n-i)!`不同的字符串。

* * *

请注意，如果您使用：

```
static List<Integer> remainedDigits = Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9); 
```

您不能从列表中删除元素。`

# php - 警告：为 foreach() 提供的参数无效（已删除 wordpress 菜单）PHP 问题或 WP 问题？

> ID：15257046
> 
> 赞同：0
> 
> 时间：2013-03-06T20:11:51.207
> 
> 标签：php, wordpress

我在我的 WP CMS 中删除了一个菜单。这是页脚中的菜单。

现在在我的网站页脚上，我得到了这个文本。

```
Warning: Invalid argument supplied for foreach() in /home/user/example.net/wp-content/themes/example/sidebar-footerfour.php on line 11 
```

我尝试恢复菜单，但文本仍然存在。

这是我的 WP 编辑器中的代码`sidebarfooterfour`

```
<div class="fwidth185 lefts"><h4>UK Payday    <span> Lenders</span></h4>
    <?php $trusted_loan = wp_get_nav_menu_items('UK Payday Lenders'); $count = 1; ?>
    <ul class="loan_cat">
    <?php foreach ($trusted_loan as $menu_loan) : ?>
        <li><a href="<?php echo $menu_loan->url; ?>"><?php echo $menu_loan->title; ?></a></li>
    <?php endforeach; $trusted_loan=''; ?>
    </ul>
    <h4>Responsible      <span> Lendings</span></h4>
    <?php $trusted_loan = wp_get_nav_menu_items('Responsible Lendings'); $count = 1; ?>
    <ul class="loan_cat">
    <?php foreach ($trusted_loan as $menu_loan) : ?>
        <li><a href="<?php echo $menu_loan->url; ?>"><?php echo $menu_loan->title; ?></a></li>
    <?php endforeach; ?>
    </ul>
</div> 
```

我不知道代码，所以我不知道该怎么做，甚至不知道它是 Wordpress 问题还是 PHP 问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:31:05.213

备份您的文件。之后清除文件并添加以下内容：

```
<div class="fwidth185 lefts">
    <h4>UK Payday    <span> Lenders</span></h4>
    <?php $trusted_loan = wp_get_nav_menu_items('UK Payday Lenders'); $count = 1; ?>
    <ul class="loan_cat">
    <?php foreach ($trusted_loan as $menu_loan) : ?>
        <li><a href="<?php echo $menu_loan->url; ?>"><?php echo $menu_loan->title; ?></a></li>
    <?php endforeach; $trusted_loan=''; ?>
    </ul>
</div> 
```

这将消除错误并删除与您已删除的菜单关联的任何剩余 HTML。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T20:15:19.777

不只是使用`foreach($trusted_loan as $menu_loan)`，而是尝试使用这个结构：

```
foreach($trusted_loan ?: array() as $menu_loan) 
```

（或者，你有 PHP 5.4 或更高版本，使用`$trustedload?:[]`）

这将确保 if`$trusted_loan`未设置或以其他方式为假，您将使用数组并避免错误。

# java - SQLite 类路径问题

> ID：15257047
> 
> 赞同：0
> 
> 时间：2013-03-06T20:11:53.180
> 
> 标签：java, sqlite, classpath

给定

```
 <dependency>
        <groupId>sqlitejdbc</groupId>
        <artifactId>sqlitejdbc</artifactId>
        <version>0.5.6</version>
    </dependency> 
```

运行我的测试时，有些失败

```
java.lang.ClassNotFoundException: org.sqlite.JDBC 
```

指向那条线

```
 con = DriverManager.getConnection("jdbc:sqlite:" + "some_name.db"); 
```

错误突然出现。请问我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:14:47.183

尝试将其添加到您的 pom 中：

```
<dependency>
    <groupId>org.xerial</groupId>
    <artifactId>sqlite-jdbc</artifactId>
    <version>3.7.2</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:27:29.280

对不起大家这个问题是我的错。这就是我让这种情况发生的原因（列出以防其他人落入同一个陷阱）

我做了这个

```
 Class.forName("org.sqlite.JDBC");

    con = DriverManager.getConnection("jdbc:sqlite:" + "unique");
    prep = con.prepareStatement(ANOTHER_SQL);

    Statement statement = con.createStatement();
    statement.executeUpdate("some sql");

    con.setAutoCommit(false); 
```

而不是这个

```
 Class.forName("org.sqlite.JDBC");

    con = DriverManager.getConnection("jdbc:sqlite:" + "unique");

    Statement statement = con.createStatement();
    statement.executeUpdate("some sql");

    con.setAutoCommit(false);

    prep = con.prepareStatement(ANOTHER_SQL); 
```

感谢大家尝试提供帮助。

# jquery - Jquery 将 .header 附加到第 tr th

> ID：15257050
> 
> 赞同：0
> 
> 时间：2013-03-06T20:12:21.203
> 
> 标签：jquery, html-table, traversal

目前有一个 tr.header td 但我需要它在空的 thead tr th

```
$("#new table tr.Header td").each(function(){
  $(this).appendTo("thead tr th");
}); 
```

这实际上有效，但我遇到的问题是 DOM 中存在多个表。我不需要所有标题中的每个标题。我只需要将每个表的 tr.header 附加到 thead tr th。标题 1 将附加到表 1 的标题...等等。

我怎样才能做到这一点？

目前的结果是：

```
<table>
<thead>
 <tr>
  <th>Header 1 Header 2 Header 3 Header 4</th>
 </tr>
</thead>
<tbody><tr><td>
   Row 1
  </td></tr> 
 <tr><td>
   Row 2
  </td></tr> 
 <tr><td>
   Row 3
  </td></tr>
</tbody> 
</table> 

<table>
<thead>
 <tr>
  <th>Header 1 Header 2 Header 3 Header 4</th>
 </tr>
</thead>
<tbody><tr><td>
   Row 1
  </td></tr> 
 <tr><td>
   Row 2
  </td></tr> 
 <tr><td>
   Row 3
  </td></tr>
</tbody> 
</table> 

<table>
<thead>
 <tr>
  <th>Header 1 Header 2 Header 3 Header 4</th>
 </tr>
</thead>
<tbody><tr><td>
   Row 1
  </td></tr> 
 <tr><td>
   Row 2
  </td></tr> 
 <tr><td>
   Row 3
  </td></tr>
</tbody> 
</table> 

<table>
<thead>
 <tr>
  <th>Header 1 Header 2 Header 3 Header 4</th>
 </tr>
</thead>
<tbody><tr><td>
   Row 1
  </td></tr> 
 <tr><td>
   Row 2
  </td></tr> 
 <tr><td>
   Row 3
  </td></tr>
</tbody> 
</table> 
```

没有任何 jQuery 的表都看起来像这样：

```
<table>
<thead>
 <tr>
  <th></th>
 </tr>
</thead>
<tbody><tr class="Header"><td>
   Header 1
  </td></tr>
  <tr><td>
   Row 1
  </td></tr> 
 <tr><td>
   Row 2
  </td></tr> 
 <tr><td>
   Row 3
  </td></tr>
</tbody> 
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:15:24.163

我必须说这是人们在这里问的最不寻常的事情之一，但是你去吧：

```
$("table tr.Header td").each(function(){
  $(this).appendTo($(this).closest('table').find('thead tr th'));
}); 
```

# sql-server-2008 - 在 SQL Server Management Studio 2008 R2 的右侧打开新选项卡

> ID：15257052
> 
> 赞同：12
> 
> 时间：2013-03-06T20:12:22.540
> 
> 标签：sql-server-2008

我必须使用 Sql Server Management Studio 2008 R2。当我打开一个新的查询选项卡时，它会打开到其他选项卡的左侧并将所有打开的选项卡推到右侧（因此每次我打开一个新选项卡时都会改变它们的位置）。这非常令人沮丧，我不太了解这种设计选择。

如何使 SSMS 2008 R2 选项卡的行为“正常”（在右侧打开新选项卡，使现有选项卡保持静止）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-05-19T20:34:58.823

Lemurr 已经回答了它，但只是为了让任何使用 SSMS 2016（4 月预览版）的人都能找到它。微软现在已将其从

*工具 > 选项 > 环境 > 文档 > 在现有选项卡的右侧插入文档*

至

*工具 > 选项 > 环境 > 选项卡和窗口 > 在现有选项卡的右侧插入新选项卡。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T20:15:57.607

如果 UI 和 2012 一样，应该是`Tools > Options > Environment > Documents > Insert documents to the right of existing tabs`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-24T11:54:34.390

对于 SSMS 18，它位于*Environment* > *Tabs And Windows*下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-19T22:33:41.067

对于 SSMS v 17.9.1，可以在工具 > 选项 > 环境中配置此功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-24T11:00:53.227

如果您没有更改布局的任何其他设置，则只需通过转到`Window > Reset Window Layout`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-07T15:05:40.210

我看到新旧版本的 SSMS 的导航选项不同。下面是带有屏幕截图的 SSMS v18.5 导航。

工具 --> 选项（打开选项窗口） --> 环境 --> 选项卡和窗口：在选项卡井部分标题下，选中“在现有选项卡右侧插入新选项卡”旁边的框。

[![标签OpenOnTheRightScreenshot](../Images/5fb7d83b1584ea1d58297a2b94f5f610.png)](https://i.stack.imgur.com/oY0Q1.png)

工具本身的 SSMS 版本的屏幕截图，这是我们正在讨论的，即客户端工具 SSMS，而不是 DB 版本，但我不确定这是否会影响菜单导航的差异。帮助 --> 关于：

[![SSMSv18.5](../Images/b16134cac7e0de0c4b956595e11593e1.png)](https://i.stack.imgur.com/W0RV1.png)

# oauth - 在meteorjs中获取用户关注者

> ID：15257056
> 
> 赞同：0
> 
> 时间：2013-03-06T20:12:40.777
> 
> 标签：oauth, twitter, meteor

我正在尝试为通过我的 meteorjs 应用程序进行身份验证的用户获取关注者。我使用了 {{loginButtons}} 模板并找到了用户令牌的位置。但是我现在必须手动创建我的授权请求，我希望这很容易。但这真的很难，我觉得我在浪费时间试图找出一种方法来创建 oauth_signature..

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:51:03.117

假设您正在谈论的是 Twitter，我也许可以帮助您。我只是设法做你想做的事情。

这段漂亮的代码为 Twitter API 提供了一个客户端：[https](https://github.com/mynetx/codebird-js) ://github.com/mynetx/codebird-js 我个人将它放在`server-folder`我的应用程序中以避免暴露密钥等。

由于`codebird-js`代码使用 XMLHttpRequests 和 node.js 默认情况下不具有此类功能 - 至少在 meteor.js 上下文中 - 您必须自己添加 XHR 功能。

这个 NPM 为我做到了：[https](https://npmjs.org/package/xmlhttprequest) ://npmjs.org/package/xmlhttprequest 但是，由于您无法使用其他 npm 包部署您的流星应用程序，因此我找到了这个解决方案[How can I deploy node modules in a Meteor app on ameteor.com ?](https://stackoverflow.com/questions/10476170/how-can-i-deploy-node-modules-in-a-meteor-app-on-meteor-com) 这建议将其放在公用文件夹中。

最后，我在`codebird-js`下面的行中 添加了这些代码行`var Codebird = function () {`

```
var require = __meteor_bootstrap__.require;
var path = require('path');
var fs = require('fs');
var base = path.resolve('.');
var isBundle = fs.existsSync(base + '/bundle');
var modulePath = base + (isBundle ? '/bundle/static' : '/public') + '/node_modules';
var XMLHttpRequest = require(modulePath + '/xmlhttprequest').XMLHttpRequest; 
```

最后，您必须提供在 dev.twitter.com 生成的令牌，并找到存储在用户集合中的用户令牌。

编辑：

当您拥有上述内容时，您将创建一个新的 Codebird 对象：`var bird = new Codebird();` 然后设置令牌：

```
bird.setToken(USER_ACCESS_TOKEN, USER_ACCESS_TOKEN_SECRET); 
```

并拨打电话：

```
bird.__call('friends/ids', {
   screen_name': SCREEN_NAME,
   user_id: TWITTER_ID
   }, 
   function(reply){
      console.log(reply);
   }); 
```

请注意，上例中的`USER_ACCESS_TOKEN`, `USER_ACCESS_TOKEN_SECRET`, `USER_NAME`&`TWITTER_ID`是占位符。它们都可以在 Meteor 用户集合中找到。

# android - 如何在 Android 中显示密码字段的数字软键盘

> ID：15257058
> 
> 赞同：4
> 
> 时间：2013-03-06T20:12:49.710
> 
> 标签：android, cordova

我正在使用 PhoneGap 为 Android 开发一个移动项目，并使用 Samsung Galaxy S2 Skyrocket, android version 4.0.4 进行测试。现在我有一个只接受数字密码的 html 输入字段，所以首先我像这样设置输入，

`<input type="password" id="Password"/>`
它给了我 Android 中的字母键盘，但我希望显示键盘是数字的。

所以我将我的代码更改为
`<input type="tel" id="Password"/>`并使用 CSS 来屏蔽密码

```
<style type="text/css">
        #Password {
            -webkit-text-security: disc;
        }
</style> 
```

但屏蔽与 type="password" 不同，它会在密码框没有获得焦点时屏蔽密码。如果它正在集中，密码将不会被光盘掩盖，因此会显示出来。

有什么办法可以显示数字键盘并让密码一直被屏蔽？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T21:10:11.870

我解决了这个问题

密码输入标签在这样的 div 中

```
<div id="passwordCell" style="display:inline;">
    <input type="password" pattern="[0-9]*" name="Password" id="Password" placeholder="4 digit numeric only allowed" maxlength="4"/>
</div> 
```

所以我通过以下步骤解决了这个问题：

1.  在 #passwordCell div 中添加另一个输入字段，并给它一个 id，例如 password_mask `<input type="tel" name="password_mask" id="password_mask" placeholder="4 digit numeric only allowed." maxlength="4"/>`

2.  隐藏#Password 输入字段
    `$("#Password").hide();`

3.  将jQuery keyup 事件绑定到#password_mask 输入字段，使其将输入的值传递给#Password 字段，并将#password_mask 中的输入字符替换为*。
    我这样做是因为最后 #Password 中的值将作为用户密码发送到服务器

这是javascript代码，我使用了jQuery

```
$("#passwordCell").html('');
$("#passwordCell").append('<input type="tel" name="password_mask" id="password_mask" placeholder="4 digit numeric only allowed." maxlength="4"/>' +
                            '<input type="password" pattern="[0-9]*" name="Password" id="Password" placeholder="4 digit numeric only allowed" maxlength="4" data-validation-required="true" data-validation-pattern="pin not_empty"/>');
$("#password_mask").textinput();
$("#Password").textinput();
//$("#password_mask").show();
$("#Password").hide();
$("#password_mask").keyup(function() {
    var inputLength = $(this).val().length;
    var passwordLength = $("#Password").val().length;
    if (inputLength > passwordLength) {
        var inputLastChar = $(this).val().charAt(inputLength-1);
        $("#Password").val($("#Password").val() + inputLastChar);
    } else {
        $("#Password").val($("#Password").val().substring(0, $(this).val().length));
    }

    var i = 0;
    var maskPassword = "";
    while (i < $("#password_mask").val().length) {
        maskPassword += "*";
        i++;
    }
    $("#password_mask").val(maskPassword);
});
$("#password_mask").blur(function() {
    $("#Password").focus();
    $("#Password").blur();
}); 
```

# raphael - 如何在 Raphael 的纸坐标中获得事件

> ID：15257059
> 
> 赞同：0
> 
> 时间：2013-03-06T20:12:51.367
> 
> 标签：raphael

我想在 Raphael 的纸坐标中获取鼠标事件的坐标。即使我使用了 setViewBox，我也希望这些是准确的。

请参阅[http://jsfiddle.net/CEnBN/](http://jsfiddle.net/CEnBN/)

下面创建一个 10x10 的绿色框，然后放大 - 该框的中心位于视图的原点。

```
var paper = Raphael(10, 50, 320, 200);

var rect = paper.rect(0, 0, 10, 10);
rect.attr('fill', 'green');

rect.mousedown(function (event, a, b) {
    $('#here').text([a, b]);
    console.log(event);
});

paper.setViewBox(5, 5, 10, 10); 
```

我想收到反映他们在框中位置的点击坐标。IE。它们的范围应为 ([5-10], [5-10])。

* * *

注意：很久以后，我已经迁移到 D3.js - 这通常让我更快乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:55:06.883

已编辑：通过使用鼠标事件的 clientX/Y 进行简化-删除需要获取元素偏移量

这是我想出的。基本上，通过使用纸张的客户端矩形和鼠标事件的 clientX/Y 将鼠标位置更正为相对于纸张。然后将校正后的位置与客户矩形的宽度/高度进行比较，然后按原始纸张尺寸计算结果：

```
var paper = Raphael(10, 50, 320, 200);

var rect = paper.rect(0, 0, 10, 10);
rect.attr('fill', 'green');

rect.mousedown(function (event, a, b) {
    // get bounding rect of the paper
    var bnds = event.target.getBoundingClientRect();

    // adjust mouse x/y
    var mx = event.clientX - bnds.left;
    var my = event.clientY - bnds.top;

    // divide x/y by the bounding w/h to get location %s and apply factor by actual paper w/h
    var fx = mx/bnds.width * rect.attrs.width
    var fy = my/bnds.height * rect.attrs.height

    // cleanup output
    fx = Number(fx).toPrecision(3);
    fy = Number(fy).toPrecision(3);

    $('#here').text('x: ' + fx + ', y: ' + fy);
});

paper.setViewBox(5, 5, 10, 10); 
```

更新的小提琴链接在这里：http: [//jsfiddle.net/CEnBN/3/](http://jsfiddle.net/CEnBN/3/)

鼠标按下功能的更紧凑版本：

```
rect.mousedown(function (event, a, b) {
    var bnds = event.target.getBoundingClientRect();
    var fx = (event.clientX - bnds.left)/bnds.width * rect.attrs.width
    var fy = (event.clientY - bnds.top)/bnds.height * rect.attrs.height

    $('#here').text('x: ' + fx + ', y: ' + fy);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:01:02.627

您需要抵消结果，如下所示：

```
var posx, posy;

var paper = Raphael("canvas", 320, 200);

var rect = paper.rect(0, 0, 10, 10);
rect.attr('fill', 'green');

rect.mousedown(function (e, a, b) {
    posx = e.pageX - $(document).scrollLeft() - $('#canvas').offset().left;
    posy = e.pageY - $(document).scrollTop() - $('#canvas').offset().top;
    $('#here').text([posx, posy]);
    console.log(e);
});

paper.setViewBox(5, 5, 10, 10); 
```

我为 Raphaeljs 添加了一个元素来定位，看看[这个更新到你的 jsfiddle](http://jsfiddle.net/CEnBN/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T11:00:20.920

gthmb 的回答很好，但是漏掉了一个细节——矩形在纸上的位置。此版本仅在矩形位于 (0,0) 位置时才有效。为了也支持它被翻译的情况，将矩形的位置添加到结果中：

```
function mouseEvent_handler(e) {
    var bnds = event.target.getBoundingClientRect();
    var bbox = this.getBBox();
    var fx = (event.clientX - bnds.left)/bnds.width * rect.attrs.width + bbox.x;
    var fy = (event.clientY - bnds.top)/bnds.height * rect.attrs.height + bbox.y;

    $('#here').text('x: ' + fx + ', y: ' + fy);
} 
```

这里是小提琴的修改版本：http: [//jsfiddle.net/zJu8b/1/](http://jsfiddle.net/zJu8b/1/)

# php - PHP preg_match_all 找不到第一个匹配项

> ID：15257066
> 
> 赞同：0
> 
> 时间：2013-03-06T20:13:11.260
> 
> 标签：php, regex, preg-match-all

我正在尝试查找字符串中的所有匹配项。出于某种原因，如果我的匹配位于字符串的开头，则它不会返回该特定匹配。它与索引0有关吗？我还使用 PREG_OFFSET_CAPTURE 来获取索引与匹配项。下面是工作非工作的代码。

```
$text = '[QUOTE]I wonder why[QUOTE]PHP[IMG]hates me[/IMG][/QUOTE][/QUOTE][URL="http://www.bing.com"]Click me![QUOTE]........[/QUOTE]Ok Bai![/URL]';
preg_match_all('#\[QUOTE\]#', $text, $matches, PREG_OFFSET_CAPTURE, PREG_PATTERN_ORDER);
print_r($matches); 
```

结果是：

数组 ( [0] => 数组 ( [0] => 数组 ( [0] => [QUOTE] [1] => 19 ) [1] => 数组 ( [0] => [QUOTE] [1] = > 100 ) ) )

如您所见，它只找到了两个匹配项。如果我在字符串的开头添加一个字符，它将找到所有三个字符。

```
$text = 'a[QUOTE]I wonder why[QUOTE]PHP[IMG]hates me[/IMG][/QUOTE][/QUOTE][URL="http://www.bing.com"]Click me![QUOTE]........[/QUOTE]Ok Bai![/URL]';
preg_match_all('#\[QUOTE\]#', $text, $matches, PREG_OFFSET_CAPTURE, PREG_PATTERN_ORDER);
print_r($matches); 
```

结果是：

数组 ( [0] => 数组 ( [0] => 数组 ( [0] => [QUOTE] [1] => 1 ) [1] => 数组 ( [0] => [QUOTE] [1] = > 20 ) [2] => 数组 ( [0] => [QUOTE] [1] => 101 ) ) )

全部三场比赛。如果有人可以帮助我弄清楚我的 REGEX 是否需要修改，或者是否有一些我不知道的怪癖，我将不胜感激。我已经使用 Python 和 re 库尝试过同样的事情，它返回了我所有的匹配项。我还使用了这个[http://www.regextester.com/](http://www.regextester.com/)，它报告说它在两种情况下都可以工作，并且可以匹配所有内容。我唯一的猜测是与 PREG_OFFSET_CAPTURE 在位置 0 找到匹配项和 0 导致一些问题有关。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:18:11.683

添加多个标志的正确方法是使用管道`|`，因此：

```
preg_match_all('#\[QUOTE\]#', $text, $matches, PREG_OFFSET_CAPTURE | PREG_PATTERN_ORDER); 
```

你`,`之前`PREG_PATTERN_ORDER`的意思是它成为'offset'参数（在字符串中的哪个点开始），并且作为PREG_PATTERN_ORDER==1，它从第二个字符开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:18:19.803

问题出在您的[函数调用](http://php.net/manual/en/function.preg-match-all.php)中：

```
preg_match_all('#\[QUOTE\]#', $text, $matches, PREG_OFFSET_CAPTURE, PREG_PATTERN_ORDER); 
```

第五个参数是偏移量，而不是另一个标志。

# ruby-on-rails - 条件顶级标签 HAML 不使用部分

> ID：15257069
> 
> 赞同：3
> 
> 时间：2013-03-06T20:13:15.957
> 
> 标签：ruby-on-rails, haml

有条件地添加更高级别的 html 元素而不重复内部内容的优雅方法是什么？不使用部分内容（一个文件中的所有内容）如何实现这一点？

例如，假设我有这个内容，并且我想根据某些条件将所有内容包装在一个 div 中，这样 (img, 'some code' x 3) 就不会被重复。

```
- unless p.product_url.nil?
  #myDiv
    %img{src: img_url}
    some code
    some code
    some code
- else
  %img{src: img_url}
  some code
  some code
  some code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T06:03:29.067

```
- content_for :inner_contents do
  %img{src: img_url}
  some code
  some code
  some code

- unless p.product_url.nil?
  #myDiv
    = yield :inner_contents
- else
  = yield :inner_contents 
```

如 Deefour 所述，这是基于[https://stackoverflow.com/a/7240476/605707的。](https://stackoverflow.com/a/7240476/605707)

# javascript - 如何使用 JavaScript 添加虚线下划线

> ID：15257071
> 
> 赞同：1
> 
> 时间：2013-03-06T20:13:22.420
> 
> 标签：javascript, html, css

我有一个具有修改样式的 HTML 文件，以便下划线标记产生虚线。

```
<style type="text/css">
  u {    
     border-bottom: 1px dashed #999;
     text-decoration: none;
  }
</style> 
```

我想要一个按类查找元素并应用此下划线样式的函数。它需要在 JS 函数中，因为下划线仅在某些事件（鼠标悬停和点击）期间发生。我的 javascript 代码会是什么样子？

到目前为止，我有：

```
 function underline(id){
    var elements = document.getElementsByClassName(id);
    for(var i=0; i<elements.length; i++){
        elements[i].style.?????}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:16:48.967

你可以使用这个：

```
element.style.borderBottom = '2px dotted black'; 
```

[查看示例](http://jsfiddle.net/B1KMusic/2mYFK/)

如果你想让“下划线”的宽度与文本的宽度相匹配，你可以添加：

```
element.style.display = 'inline'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:16:40.097

为什么需要通过javascript完成？您可以只使用[css 类选择器](http://www.htmldog.com/guides/cssintermediate/classid/)：

```
.myClass
{
  border-bottom: 1px dashed #999;
  text-decoration: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:18:32.940

仅供参考，`<u>`标签是非语义的。此外，如果您使用 class 来应用样式，您的 css 选择器会更有用：

```
.underline{
    border-bottom: 1px dashed #999;
    text-decoration: none;
} 
```

所以你的html可能是：

```
<p>Blah blah <span class="underline">underline this</span> blah blah.</p> 
```

# node.js - mongoDB + nodeJS：无法保持流游标打开

> ID：15257074
> 
> 赞同：1
> 
> 时间：2013-03-06T20:13:26.970
> 
> 标签：node.js, mongodb, sockjs

对于日志查看器，我必须在 sockJS 套接字上的 mongoDB 集合中写入更新。

根据[这篇文章](https://stackoverflow.com/questions/7372626/how-to-stream-mongodb-query-results-with-nodejs)，我正在使用本机 nodeJS 驱动程序的流光标来执行此操作，但它仅适用于创建流时集合中存在的内容。没有写入任何进一步的更新。

这是我的代码：

```
var server = new mongodb.Server(config.db_host, config.db_port, {});
var DB = new mongodb.Db('myLogs', server, {w:0}).open(function (error, database) {
    if (error) throw error;
    db.logs = database.collection('logs');
});

var stream = db.logs.find({user: sID}, {sort: [['_id', 'asc']]}).stream();

stream.on('error', function (err) {
    socket.write(JSON.stringify({'action': 'log','param': 'log db streaming error'}));
});
stream.on('data', function (doc) {
    socket.write(JSON.stringify({'action': 'log','param': doc.log}));
}); 
```

我究竟做错了什么？这能行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:00:58.080

如果您有一个上限集合，您可以使用[TailableCursor](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)，它可以满足您的需求。标准[CursorStream](http://mongodb.github.com/node-mongodb-native/api-generated/cursorstream.html?highlight=stream#CursorStream)仅返回在调用时匹配的结果`find`（如您所见）。

不过，在 Node.JS 中执行此操作的信息并不丰富。[这](https://stackoverflow.com/questions/5528631/how-to-create-tailable-cursor-in-mongodb-shell)是一个指向正确方向的指针。

虽然我没有测试过这段代码，但它应该如下所示。关键是使用上限集合并将`tailable`and`awaitdata`选项设置为`true`.

```
var stream = db.logs.find({user: sID}, {
    tailable: true,
    awaitdata: true 
    /* other options */
}).stream();

stream.on('data', function (doc) {
    socket.write(JSON.stringify({'action': 'log','param': doc.log}));
}); 
```

# javascript - 缓存 this 选择器 css

> ID：15257075
> 
> 赞同：0
> 
> 时间：2013-03-06T20:13:37.827
> 
> 标签：javascript, jquery, html, css, caching

我正在尝试缓存`this`选择器，但无法使其工作。

```
$(function () {

   var $this = $(this);
    //some code

     $('.collapse').each(function(index) {
       $this.collapse("toggle");
     }); 
```

我在上面做错了什么？

```
$(function () {

   var self = $(this);

   $(document).on('click', '.expand-collapse', function(e) {

     $('.collapse').each(function(index) {
       self.collapse("toggle");
     });

     if self.is('.i .icon-white .icon-plus-sign')) {
        self.toggleClass("is-collapsed")
     }
     else {
         self.toggleClass('is-collapsed');
     } 
    });
}); 
```

我已经更新了上面的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:16:38.467

这实际上没有意义：如果您迭代元素，您不想仅在一个唯一元素上调用该函数。

你在这里没有任何可缓存的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:09:45.963

$(this) 在您定义的全局上下文中没有意义，因为它指的是整个文档。如果要缓存对单击/循环的单个对象的引用，请将变量放在事件处理程序/循环的上下文中。

在您的代码中，就目前而言，似乎没有任何理由“缓存”该引用，因为您可以简单地将当前对象引用为 $(this) 并获得相同的结果（除非您实际上正在尝试保留对整个文档的引用）。

此外，您的变量名称“self”是一个 javascript 词，它传统上指的是当前窗口对象，因此您正在覆盖该引用。我建议将该名称更改为 _self 或其他名称。

# windows - 使用 QT 4 进行快速音频输入的 Windows API 或代码库？

> ID：15257082
> 
> 赞同：0
> 
> 时间：2013-03-06T20:14:19.433
> 
> 标签：windows, qt, audio

我编写了一个免费的软件定义无线电应用程序 SdrDx。Qt 4，在 Windows 下，将音频采样率限制为 48 kHz（！）；我需要至少 192 kHz。经过一年多的努力让 QT 人员继续前进——直到在他们的源代码中找到有问题的硬限制并指出给他们——我已经放弃试图让他们解决这个问题. 所以，除非我能找到可行的方法，否则我将关闭我的 windows 分支。Mac 分支样本最高可达 192 khz，所以没关系……遗憾的是，我将有条件地只为 Windows 分支编译它。在 Qt 环境中，任何人都对任何适用于 XP 及更高版本的东西有任何指示吗？

在这一点上，即使是指向已知速度快的原始 Microsoft 声卡 API 的指针也可能会有所帮助。也许我可以构建一个外部程序来获取声音并通过 TCP 向我发送消息。某物。任何事物。我准备把头发拉出来。

# android - Google Play 如何发送“com.android.vending.INSTALL_REFERRER”广播？

> ID：15257083
> 
> 赞同：0
> 
> 时间：2013-03-06T20:14:22.510
> 
> 标签：android, google-analytics-api

我正在编写 Google Analytics SDK 的自定义实现，用于通过执行以下操作收集活动数据：

*   注册一个接收`com.android.vending.INSTALL_REFERRER`广播的接收器
*   创建一个`BroadcastReceiver`存储引荐 URL 的自定义，然后我将 URL 发送到我的服务。

我理解当您从 Google Play 发送`com.android.vending.INSTALL_REFERRER`意图广播的特殊 Google 广告系列 URL 安装应用程序时的想法。但这是否意味着任何正在收听此广播的应用程序都可以看到我的推荐 URL？我找不到任何关于此的文档...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T15:14:19.097

`com.android.vending.INSTALL_REFERRER`广播只能由安装的应用程序接收。发送广播时，您可以定义目标包。否则，您`BroadcastReceiver`每次安装另一个应用程序时都会启动。

# javascript - 如何每 X 秒自动刷新一次页面标题

> ID：15257085
> 
> 赞同：1
> 
> 时间：2013-03-06T20:14:30.970
> 
> 标签：javascript, ajax, vbulletin

我们的论坛有一个通知系统，将 (#) 附加到页面标题，# 是他们当前拥有的通知数量（消息、喜欢等）。这不是由 AJAX 或任何东西完成的 - 只是使用他们的模板系统调用多个页面的通知 #，如下所示：

```
<title>({vb:raw total_notices}) - Our Site Title</title> 
```

我想让标题每 10 秒左右自动刷新一次以反映最新更新。我已经在我们的页脚模板中尝试过这个（每个页面都加载）：

```
<script type="text/javascript">
setInterval(function() {
        document.title = document.title;
        }, 3000);
 </script> 
```

但它实际上并没有刷新，只是抓取了现有的标题。我知道代码本身正在工作/刷新，因为如果我将其更改为

```
document.title = "Test"; 
```

它将标题更新为“测试”没问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:26:50.047

这很正常，因为这样做`document.title = document.title;`不会向您的论坛服务器发出请求。如果您想刷新您的标题，您必须提出请求。

如果您的页面上有 jquery，您可以这样做：

```
setInterval(function() {
    $.get(document.location.toString()).then(function (data){
       //find and set the title of the page
       document.title = data.match(/<title>(.+)<\/title>/)[1];
    });
}, 3000); 
```

那工作，但这不是一个好主意，因为此代码对您的服务器上的大量请求...

# javascript - jQuery：动画序列图像

> ID：15257089
> 
> 赞同：1
> 
> 时间：2013-03-06T20:14:43.203
> 
> 标签：javascript, jquery, image, animation

所以在过去的几天*里*，我一直在努力让它发挥作用。尽管一些 SO 成员已经帮助了我很多，但我仍然觉得我走错了路，因为我无法让它发挥作用。

**这是一个[小提琴](http://jsfiddle.net/RxLu2/2/)。**

基本上，我想根据滚动位置动态地将类添加/删除`.show`到里面的图像。`.container`在发布的示例中，我只是在尝试向下滚动。
如果您滚动的速度非常轻且缓慢，您会发现它确实有效，但速度太快了——这就是问题所在。
我的想法是定义一个阈值，在某些事情发生之前必须滚动，但不知何故我没有得到想要的结果。

此外，该`scroll`事件似乎在浏览器中不定期触发，所以我不知道如何通过它获得平滑的移动/过渡。我已经看过教程中的一些示例代码，它似乎总是有效！为什么不用我的例子？它与我的 CSS 有关吗？

请帮助我，我现在真的很沮丧。

例如，获取[该教程页面](http://fraser-hart.co.uk/demos/sprite-animation/)并查看源代码。有一个名为的变量`ScrollCount`，每次运行该函数时都会递增。当`ScrollCount`达到 3 时，一些动画内容完成并`ScrollCount`重置为 1。这样，根据评论，每三个像素滚动一次鸟的翅膀就会发生变化。

但是根据对我的代码的观察，这不可能是真的，因为`scroll`触发该函数的事件似乎或多或少地随机触发 - 滚动的速度越快，“跳过”的像素越多 - 至少在我的代码中，所以一定有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:03:55.637

Tying animation elements to the quantity of scroll events is going to give inconsistent results. On the sample [page you linked](http://fraser-hart.co.uk/demos/sprite-animation/), the animation is tied to both absolute scroll position and quantity of scroll events, which can give some strange results.

There's so many different ways to scroll a view, and all of them will produce a different numbers of scroll events and scroll distances.

*   Mouse wheel (affected by system mouse settings, resolution of mouse)
*   Keyboard up and down keys (affected by system key repeat rates)
*   Page up and down (possibly affected by some other settings?)
*   Dragging the scroll bar (affected by all sorts of things)

And then all of these may well behave differently based on the browser.

In short? Tying animation to the *quantity* of scroll events sounds like a bad idea to me. Instead, why not just tie it to the scroll position?

```
function animateHorse() {
    var currentScrollPosition = window.pageYOffset;
    var imageIndex = Math.round(currentScrollPosition / scrollResolution);

    if (imageIndex >= pictureCount) {
        imageIndex = pictureCount - 1; // Select last image
    }

    $("#container img").hide();
    $("#container img").eq(imageIndex).show();
} 
```

[And here's the fiddle.](http://jsfiddle.net/PpCU5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T05:43:30.513

这是工作演示，你可以看到马动画......

```
onload = function startAnimation() {
  var frames = document.getElementById("animation").children;
  var frameCount = frames.length;
  var i = 0;
  setInterval(function() {
    frames[i % frameCount].style.display = "none";
    frames[++i % frameCount].style.display = "block";
  }, 100);
}
```

```
#animation img {
  display: none;
}
#animation img:first-child {
  display: block;
}
```

```
<div id="animation">
  <img src="http://s23.postimage.org/t57meexkb/horse_1.png" class="animated" />
  <img src="http://s23.postimage.org/i86apnasr/horse_2.png" class="animated" />
  <img src="http://s23.postimage.org/6kc8v3lnv/horse_3.png" class="animated" />
  <img src="http://s23.postimage.org/w4ej1j71n/horse_4.png" class="animated" />
  <img src="http://s23.postimage.org/ddclrdch7/horse_5.png" class="animated" />
  <img src="http://s23.postimage.org/nbxkdulwr/horse_6.png" class="animated" />
  <img src="http://s23.postimage.org/phrv8cpd7/horse_7.png" class="animated" />
  <img src="http://s23.postimage.org/n1un88wob/horse_8.png" class="animated" />
  <img src="http://s23.postimage.org/9yz0oz6gb/horse_9.png" class="animated" />
  <img src="http://s23.postimage.org/6gn0sl5kb/horse_10.png" class="animated" />
  <img src="http://s23.postimage.org/vnxwsu8ob/horse_11.png" class="animated" />
  <img src="http://s23.postimage.org/bhuetyd0r/horse_12.png" class="animated" />
  <img src="http://s23.postimage.org/imc82zka3/horse_13.png" class="animated" />
  <img src="http://s23.postimage.org/auvi4fg4r/horse_14.png" class="animated" />
</div>
```

> [http://jsfiddle.net/u20yvyp9/](http://jsfiddle.net/u20yvyp9/)

# jquery - 如何从父节点中提取属性

> ID：15257103
> 
> 赞同：0
> 
> 时间：2013-03-06T20:15:38.257
> 
> 标签：jquery, xml

这是我的 XML 文件的片段

```
<data page="1" totalpages="1" records="10" totalrecords="10">
    <storylistsview>
        <story_id>158</story_id> 
```

我想访问父节点中的记录属性。任何人都可以简单地解释如何做到这一点。我可以很好地访问其余的 xml。

我试过`stage1 = $(xml).attr('records');` 了，我没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:25:05.630

```
$($.parseXML(xml)).find('data').attr('records'); 
```

请参阅工作[jsfiddle](http://jsfiddle.net/AMzUH/2/)。

# mysql - 约束不调用 MySQL 触发器

> ID：15257110
> 
> 赞同：4
> 
> 时间：2013-03-06T20:15:58.823
> 
> 标签：mysql, triggers, constraints

我有两个（InnoDB）表，其中包含 UPDATE、INSERT 和 DELETE 触发器。如果我直接在桌子上工作，它们工作得很好。此外，当我删除 tableA 中的一行时，我有一个外键约束，tableB 中由 tableA.id 引用的所有行也会被删除。这也有效，但问题是：

tableA 上的 DELETE 触发 tableA 的 DELETE 触发器。然后约束删除 tableB 处的行，**但**不调用 tableB 的 DELETE 触发器。为什么？约束不会触发触发器吗？

谢谢。

（触发器是 AFTER DELETE。也尝试使用 BEFORE DELETE 没有成功。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T20:27:58.013

如果删除是由外键引起的，则不会触发触发器。

[从手册](http://dev.mysql.com/doc/refman/5.5/en/stored-program-restrictions.html)

> 触发器当前不被外键操作激活。

# android - Android中Toast中的居中ImageView

> ID：15257113
> 
> 赞同：0
> 
> 时间：2013-03-06T20:16:05.630
> 
> 标签：android, android-layout, alignment, android-imageview, toast

我正在`Webview`为 Android 制作一个简单的应用程序。当没有连接时，我会显示一个自定义的 toast 消息，它将覆盖整个屏幕，但在 toast 内部我想显示一个带有`ImageView`. 问题是吐司覆盖了整个屏幕，因为我使用以下代码来执行此操作：

```
toast.setGravity(Gravity.FILL_HORIZONTAL | Gravity.FILL_VERTICAL, 0, 0); 
```

我怎么能把`ImageView`里面的吐司完全居中？这是`ImageView`在名为的 toast 布局中`toast_custom_layout.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:id="@+id/toast_layout_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:orientation="horizontal"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/logo" 
        android:background="@color/white" />
</LinearLayout> 
```

这是我活动中的代码，将在没有连接时显示吐司：

```
public void onReceivedError(WebView view, int errorCode,String description, String failingUrl) {
    LayoutInflater inflater = getLayoutInflater();

    View layout = inflater.inflate(R.layout.toast_custom_layout,
            (ViewGroup) findViewById(R.id.toast_layout_root));

    Toast toast = new Toast(getApplicationContext());
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);
    toast.show();
    toast.setGravity(Gravity.FILL_HORIZONTAL | Gravity.FILL_VERTICAL, 0, 0);
} 
```

朋友们，我将非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:33:17.360

尝试使用`RelativeLayout`a

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toast_layout_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/logo" 
        android:background="@color/white" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:36:34.173

尝试：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:android1="http://schemas.android.com/apk/res/android"
android:id="@+id/toast_layout_root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white"
android:orientation="horizontal"
android:padding="5dp" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/logo" 
    android:background="@color/white"
    android:gravity="center" />
 </LinearLayout> 
```

相关部分在哪里`android:gravity="center"`

# javascript - 使用 JQuery 显示和隐藏表格

> ID：15257117
> 
> 赞同：0
> 
> 时间：2013-03-06T20:16:11.193
> 
> 标签：javascript, jquery, ajax

我有这个功能来显示或隐藏表格

```
function show_ticket_type(){
if ($("#TicketType").val("select-type")){
       $("#tow_way").hide()
       $("#one_way").hide()
}
else if ($("#TicketType").val("one-way")){
       $("#tow_way").hide()
       $("#one_way").show()     
}
else{
       $("#tow_way").show()
       $("#one_way").hide()     
} 
```

}

桌子是

```
<table width="100%" border="0" id="tow_way">
  <tr>
    <th width="120"> <div align="center"><strong>Airlines</strong></div></th>
    <th width="100"> <div align="center"><strong>Type</strong></div></th>    
    <th width="100"> <div align="center"><strong>From</strong></div></th>
    <th width="100"> <div align="center"><strong>To</strong></div></th>    
    <th width="80"> <div align="center"><strong>Departure</strong></div></th>
    <th width="100"> <div align="center"><strong>Returning</strong></div></th>    
  </tr>
</tbale>
<table width="100%" border="0" id="one_way">
  <tr>
    <th width="120"> <div align="center"><strong>Airlines</strong></div></th>
    <th width="100"> <div align="center"><strong>Type</strong></div></th>    
    <th width="100"> <div align="center"><strong>From</strong></div></th>
    <th width="100"> <div align="center"><strong>To</strong></div></th>    
    <th width="80"> <div align="center"><strong>Departure</strong></div></th>
  </tr>
</tbale> 
```

这是选择值时的选择类型，我们必须调用函数来隐藏或显示表格

```
<select id="TicketType" name="TicketType" onChange="show_ticket_type()">
    <option value="select-type">-- Select --</option>
    <option value="one-way">One Way</option>
    <option value="tow-way">Return</option>
</select> 
```

If I select **One Way** we must hide table **tow_way** and show table **one_way** and when select **Tow way** we must we must hide table **one_way** and show table **tow_way** else we must hide tow table

我的代码中的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:20:40.103

```
$('#TicketType').change(function(){
    $("#two_way").toggle(this.value == "two-way")
    $("#one_way").toggle(this.value == "one-way")
}); 
```

*   修复了 type- `tow`=> `two`，因为拖曳方式听起来太令人毛骨悚然... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:32:04.490

你以为你在这里做什么？

```
$("#TicketType").val("select-type") 
```

您正在尝试设置值而不是读取值。

你应该做`if($("#TicketType").val() === "select-type")`

另外，你应该注意你的拼写:)

# objective-c - 在主线程上更新 NSMenu 时崩溃

> ID：15257119
> 
> 赞同：1
> 
> 时间：2013-03-06T20:16:12.007
> 
> 标签：objective-c, nsthread, nsmenu

我正在尝试以编程方式更新 NSMenu。问题是更新 NSMenu 的代码不在主线程中运行。我最初忘记了这个小细节 - 结果是每当另一个线程尝试更新菜单时我的代码就会崩溃。我试图通过明确地让更新代码在主线程中运行来解决这个问题。

更新菜单的代码都在 AppDelegate 中，看起来像这样：

```
-(void)buildMenu{
    dispatch_block_t codeForExecutionOnMainThread = ^{ 
        //Need to empty menu
        int i=[devicemenu numberOfItems]-7; //7 is the number of permanent menu items.
        while (i-->0)
            [devicemenu removeItemAtIndex:i];

        //Need to iterate through connectedDevices Array
        NSEnumerator *e = [connectedDevices objectEnumerator];
        id device;
        while (device = [e nextObject]){
            [self newMenuItem:[device objectForKey:@"DeviceName"]
                   parentMenu:devicemenu
                   deviceID:[[device objectForKey:@"DeviceID"] unsignedIntValue]];
        }

    };
    if ([NSThread isMainThread]){
        codeForExecutionOnMainThread();
    }
    else{
        dispatch_sync(dispatch_get_main_queue(), codeForExecutionOnMainThread);
    }
} 
```

令人讨厌的是，它只是移动了崩溃。虽然最初的崩溃发生在请求构建菜单的线程上，但它现在发生在主线程上（正如人们所预料的那样）。此外，现在只要单击 NSMenu 就会发生崩溃（以前 NSMenu 显示正常 - 只是无法从中删除条目）。

devicemenu 在 AppDelegate 中声明如下：

```
@interface AppDelegate : NSObject <NSApplicationDelegate,NSUserNotificationCenterDelegate>
{
    IBOutlet NSMenu *devicemenu;
} 
```

devicemenu 的其余部分内置于界面生成器中。

绝对清楚，崩溃不在此代码中。只是如果我从这段代码中删除线程的东西，那么当我单击菜单时不会发生崩溃（相反，当从菜单中删除条目时会发生崩溃）。有时代码也不会崩溃——但在这种情况下 NSMenu 也不起作用。

我得到的崩溃，当它确实崩溃而不是什么都不做时，可以在 Thread 1: 中重现`EXC_BAD_ACCESS`，`objc_msgSend`来自`NSApplicationMain`from `main`。

我知道 - 我只是走了，让问题变得更糟。我觉得我正在朝着正确的方向迈出一步 - 至少菜单的所有内容都在同一个线程中......</p>

我希望这只是一个明显的错误。当 NSMenu 被包裹在一堆线程的东西中时，是什么阻止了它的工作？最后，如果它是相关的，我的应用程序没有窗口 - 它只是菜单，菜单位于菜单栏的右侧。

堆栈跟踪如下：

```
 * thread #1: tid = 0x1d07, 0x96edba87 libobjc.A.dylib`objc_msgSend + 23, stop reason = EXC_BAD_ACCESS (code=2, address=0x11e)
    frame #0: 0x96edba87 libobjc.A.dylib`objc_msgSend + 23
    frame #1: 0x95aa75d4 CoreFoundation`CFStringCreateCopy + 84
    frame #2: 0x965485f4 HIToolbox`_InsertMenuItemTextWithCFString(MenuData*, __CFString const*, unsigned short, unsigned long, unsigned long) + 34
    frame #3: 0x96378924 HIToolbox`InsertMenuItemTextWithCFString + 63
    frame #4: 0x93e6044a AppKit`-[NSCarbonMenuImpl _carbonMenuInsertItem:atCarbonIndex:] + 550
    frame #5: 0x94088e76 AppKit`-[NSCarbonMenuImpl _privatePopulateCarbonMenu] + 237
    frame #6: 0x9408fac8 AppKit`-[NSCarbonMenuImpl _populatePrivatelyIfNecessary] + 67
    frame #7: 0x9408fa73 AppKit`-[NSCarbonMenuImpl _checkoutMenuRefWithToken:creating:populating:] + 330
    frame #8: 0x9411b909 AppKit`-[NSCarbonMenuImpl _maximumSizeForScreen:] + 73
    frame #9: 0x942954a4 AppKit`-[NSMenu size] + 60
    frame #10: 0x94397191 AppKit`+[NSStatusBarButtonCell popupStatusBarMenu:inRect:ofView:withEvent:] + 427
    frame #11: 0x94396d0e AppKit`-[NSStatusBarButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 142
    frame #12: 0x93f50db9 AppKit`-[NSControl mouseDown:] + 867
    frame #13: 0x93f48a21 AppKit`-[NSWindow sendEvent:] + 6968
    frame #14: 0x94397b19 AppKit`-[NSStatusBarWindow sendEvent:] + 75
    frame #15: 0x93f43a0f AppKit`-[NSApplication sendEvent:] + 4278
    frame #16: 0x93e5d72c AppKit`-[NSApplication run] + 951
    frame #17: 0x93e006f6 AppKit`NSApplicationMain + 1053
    frame #18: 0x000042cb DeviceMenu`main(argc=3, argv=0xbffffac0) + 43 at main.m:13 
```

这是菜单被填充的地方。正如我所说，所有这些东西都可以正常工作——只要线程不存在。但是线程需要在那里才能移除设备。最令人沮丧。感谢您抽出时间来看看这个。

```
- (void)newMenuItem:(NSString*)menuName 
     parentMenu:(NSMenu*)parentMenu
       deviceid:(unsigned)deviceid
       parentid:(unsigned)parentid
         fullid:(unsigned)fullid
{
    if (((deviceid&0x00ffffff)==0) && (parentid==0))
    {
        NSMenuItem *newMenu = [[NSMenuItem alloc] initWithTitle:menuName
                                                         action:@selector(deviceClicked:)
                                                  keyEquivalent:@""];
        [newMenu setTarget:self];

        [newMenu setTag:deviceid>>24&0xff];
        [newMenu setRepresentedObject:[NSNumber numberWithUnsignedInt:fullid]];

        [parentMenu insertItem:newMenu atIndex:0];
    }
    else
    {
        //child
        unsigned parentTag=(parentid==0)?(deviceid>>24&0xff):deviceid>>28&0xf;

        unsigned shift=(parentid==0)?8:4;
        unsigned mytag=(deviceid<<shift)>>28;
        bool lastItem = !((deviceid<<shift)<<4);

        if (![[parentMenu itemWithTag:parentTag] hasSubmenu])
        {
            //need to add the submenu here
            NSMenu *submenu = [[NSMenu alloc] init];
            [submenu addItemWithTitle:[[parentMenu itemWithTag:parentTag] title]
                               action:@selector(deviceClicked:)
                        keyEquivalent:@""];

            [[parentMenu itemWithTag:parentTag] setSubmenu:submenu];
        }

        if(lastItem)
        {
            NSMenuItem *newMenu = [[NSMenuItem alloc] initWithTitle:menuName
                                                             action:@selector(deviceClicked:)
                                                      keyEquivalent:@""];
            [newMenu setTarget:self];
            [newMenu setTag:mytag];
            [newMenu setRepresentedObject:[NSNumber numberWithUnsignedInt:fullid]];

            [[[parentMenu itemWithTag:parentTag] submenu] insertItem:newMenu atIndex:1];
        }
        else
        {
            [self newMenuItem:menuName parentMenu:[[parentMenu itemWithTag:parentTag]submenu] deviceid:deviceid<<shift parentid:mytag fullid:fullid];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:43:58.233

感谢@trojanfoe 的帮助和他给我的提示，我自己能够找到（并修复）这个——尽管我仍然不确定发生了什么。

这个问题归结为 connectedDevices 数组的构造。该数组的每个字典中的一项称为 DeviceName，它用于提供菜单的名称。根据一组规则，使用 NSMutableString 构造 DeviceName - 我分配、使用并放入 connectedDevices 数组中的字典中。

我的理解，显然是有缺陷的，是 NSArray 将包含放置在其中的对象的副本。在这种情况下，似乎不是——因为当我释放 NSMutableString 时，它会导致菜单崩溃。如果我不释放它，那么（触摸木头）似乎一切都好。

我无法解释为什么线程代码应该导致这个问题表现出来。它只是表明坠机的位置可能距离爆胎的钉子几英里。

感谢大家帮助解决此问题。

# c - 对“_*”链接器错误的未定义引用

> ID：15257120
> 
> 赞同：0
> 
> 时间：2013-03-06T20:16:15.603
> 
> 标签：c, linker, linker-errors, header-files

我在编译/链接以下 C 代码时遇到问题。链接器抛出如下所示的错误：

```
pso.o:pso.c:(.text+0x41): undefined reference to '_ps'
...
pso.o:pso.c:(.text+0x93): more undefined references to '_ps' follow 
```

这是我第一次为 gcc 编写 C 代码，所以我不确定如何解决这个问题。我假设因为 struct PS 定义了我的头文件，所以它以某种方式没有链接到 pso.c。但是，我确实在该源文件的顶部使用了 #include "ps.h" 语句。

我已经在下面包含了相关的源文件和头文件，以及我正在使用的 make 文件。编写可链接的 C 代码时，我是否缺少一个基本概念？

谢谢！哦，它是一个粒子群优化器，如果你想知道的话:)

main.c 文件：

```
#define MAIN
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
#include "ps.h"

int main(int argc, char *argv[])
{
  int c;
  double test;
  int test_int;

  srand(time(NULL));
  printf("starting pso\n");
  pso();
  printf("finished pso\n");
  return(0);
} 
```

有问题的文件 pso.c：

```
#include<stdio.h>
#include "ps.h"

double it(double C[]);

void pso()
{
    int i;
    int j;
    int k;

    puts("Now in PSO");

    /* Initialize PSO controls */
    psoi();

    /* Initialize particle positions and velocities */
    for (i=0;i<MPART;i++){
        for(j=1;j<MINDV;j++){
            /* positions */
            ps.X[i][j]=(-1+2*random())*ps.bup;

            /* velocities */
            ps.V[i][j] = (-1+2*random())*ps.bup / ps.vred;

            /* Transform */
            ps.ut[j] = (ps.X[i][j] - ps.blo)/(ps.bup - ps.blo) * (ps.bnd_hi[i] - ps.bnd_lo[i]) + ps.bnd_lo[i];
        }

        /* Evaluate Finess */
        ps.fitness = fit(ps.ut);

        /* Update particle best position */
        ps.pbest[i]=ps.fitness;

        /* Update swarm best position */
        if(ps.pbest[i] < ps.sbest){
            for(j=0;j<MINDV;j++){
                ps.g[j]=ps.p[i][j];
            }
            ps.sbest = ps.pbest[i];
        }
    }

    /* Convergenve Loop */

    for(k=2;k<ps.maxk;k++){
        for(i=1;i<MPART;i++){
            for(j=1;j<MINDV;j++){
                /* Velocity Update */
                ps.rp = random();
                ps.rg = random();
                ps.rr = random();
                ps.chi = 0.7298;

                ps.V[i][j] = ps.chi * ( ps.V[i][j] + ps.phi_p*ps.rp*(ps.p[i][j] - ps.X[i][j]) + ps.phi_g*ps.rg*(ps.g[j] - ps.X[i][j]));

                /* Position Update */
                ps.X[i][j] = ps.X[i][j] + ps.V[i][j];
                /* Transform */
                ps.ut[j] = (ps.X[i][j]-ps.blo)/(ps.bup-ps.blo)*(ps.bnd_hi[i]-ps.bnd_lo[i])+ps.bnd_lo[i];
                }

            /* Evaluate Fitness */
            ps.fitness = fit(ps.ut);

            /* Update particle best position */
            if(ps.fitness < ps.pbest[i]){
                for(j=0;j<MINDV;j++){
                    ps.p[i][j]=ps.X[i][j];
                }
                ps.pbest[i]=ps.fitness;
            }

            /* Update swarm best position */
            if(ps.pbest[i] < ps.sbest){
                for(j=0;j<MINDV;j++){
                ps.g[j]=ps.p[i][j];
                }
            ps.sbest = ps.pbest[i];
            printf("%f \n",ps.sbest);
            }
        }

        /* Convergence Criteria */

    }
  /* return(0); */
 } 
```

定义数据结构 PS (ps.h) 的头文件：

```
#ifndef _PS_
#define _PS_
#define MPART 30
#define MINDV 2

typedef struct{
  /* Design Space */
  double X[MPART][MINDV];
  double V[MPART][MINDV];
  double p[MPART][MINDV];
  double u[MINDV];
  double ut[MINDV];
  double sbest;
  double sbest_old;
  double g[MINDV];
  double gt[MINDV];
  double pbest[MPART];
  double pbest_sort[MPART];
  double blo;
  double bup;
  double fitness;
  double maxk;
  double bnd_lo[MINDV];
  double bnd_hi[MINDV];
  /* PSO behavior */
  int psotype;
  double w;
  double phi_p;
  double phi_g;
  double gam;
  double chi;
  double vred;
  double rp;
  double rg;
  double rr;
}PS;

/* Dependent Source File Functions */
extern void pso();
extern double fit(double C[2]);

#ifndef MAIN
extern PS ps;
#endif
#endif 
```

最后，我正在使用的make文件：

```
CC=gcc
CFLAGS= -I.
DEPS = ps.h
OBJ = main.o pso.o psoi.o fit.o

default: program

%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

program: $(OBJ)
    gcc -o $@ $^ $(CFLAGS) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:18:29.227

链接器输出有点混乱，它真的在抱怨`ps`缺少对象的定义。您已声明它`extern`，但从未在任何地方定义它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:19:50.957

您只*声明* `ps`为`extern`，但您从未在任何地方实际*定义*它。写

```
PS ps; 
```

在其中一个 C 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T20:32:45.263

在“ps.h”中，你有这行

```
extern PS ps; 
```

— 但这只是*声明* `ps`（即断言它存在于某处）；它没有提供*定义*（即让它存在于此处）。你应该做的是，第一步，更换

```
#ifndef MAIN
extern PS ps;
#endif 
```

只需

```
extern PS ps; 
```

然后，第二步，进入`pso.c`该文件的顶层并添加

```
PS ps = {}; 
```

（或`PS ps;`，或`extern PS ps = {};`）。如果您的 C 编译器太旧或愚蠢到抱怨空括号，请改写`PS ps = {0};`；`{}`是一种 C++'03 主义，我相信它正在被 C'11 采用，但我对此不是 100% 确定的。

简而言之，关于声明的规则是：如果你提供了一个带有 的初始化器`=`，那么声明必须是一个定义（因为你怎么能在这里初始化变量呢？）。否则，如果您使用`extern`存储类，则它*不是*定义（因为助记符，您是说该变量存在于该文件的*外部）。*否则，它是一个定义（但在 K&R C 中，它是一个[暂定定义](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc03tentative_defn.htm)，许多编译器默认将其放在 BSS 部分中，或者提供一个命令行选项来执行此操作）。

# macos - os x 服务可以提供接口吗？

> ID：15257126
> 
> 赞同：1
> 
> 时间：2013-03-06T20:16:44.750
> 
> 标签：macos, cocoa, service

我想要实现的目标：一项服务将采用由数字组成的选择，显示一个窗口，列出几种货币供用户选择，然后用用户选择的转换货币替换选择。

问题：我几乎可以让一切工作。服务注册正确等等，我可以通过粘贴板将文本返回给调用应用程序，但只有当我从服务调用的方法设置粘贴板内容时。如果我打开一个窗口，然后在注册对象中调用一个方法来返回文本，那么什么也不会发生。

在服务调用的方法中，我实例化了一个窗口控制器并显示窗口。在用户单击窗口中所需的选项后，我调用注册对象中的方法来设置粘贴板上的文本。目前我没有传递任何文本，我只是将粘贴板设置为静态文本。一切正常，除了调用应用程序中没有插入任何内容。但是，如果我从服务请求者调用的方法中调用相同的方法来设置粘贴板，那么文本会正确插入到调用应用程序中。

我已经阅读了我能找到的关于服务的所有内容（包括 Apple 文档），但它们都只处理没有用户界面的服务，或者如果有，界面就在流程的最后。例如，选择可能是一个 URL，并由服务传递给 Safari，比如显示网页。在这些情况下，交互在界面（Safari）处结束。在我的情况下，界面处于流程的中间，我需要将结果返回到原始应用程序。我最初尝试在用户进行选择后在窗口控制器中设置粘贴板，但这没有用。我当时预计，如果我回调注册服务的原始对象并将粘贴板设置在那里，那么它应该可以工作，但到目前为止我还没有

我想我最初的问题是，“这是我应该能够做的事情吗？” 换句话说，可以按照我尝试的方式使用服务。如果答案是肯定的，那么对我的错误所在有什么建议吗？

# java - 将表达式匹配到字符串的末尾

> ID：15257128
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:16:54.623
> 
> 标签：java, regex

我正在尝试匹配一个文件，这个文件可以是任何东西，例如 test.txt。

我正在尝试从 www.example.com/example.txt 中提取文本 example.txt

这是我想出的正则表达式：

```
\\../$
\\. for to match the dot
. for any characters in between 'com' and the forward slash
/$ to march forward slash to the end of the string. 
```

这是获取文件的正确方法吗？

这是我一直在使用的来源：[http ://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)

我也在为我的正则表达式使用 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:35:48.307

您最好为此跳过正则表达式并使用 java 的内置 URL 解析

[http://docs.oracle.com/javase/tutorial/networking/urls/urlInfo.html](http://docs.oracle.com/javase/tutorial/networking/urls/urlInfo.html)

见`.getFile`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:01:23.000

这将从 URL 中获取文件，但不包括常见的尾随元素，如查询字符串（在 ? 之后）或书签（在 # 之后）：

```
/[^/\?#]+(?=($|\?|#))/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:14:04.957

我不太明白你的正则表达式。似乎您对正则表达式语法的理解并不正确。使用您的示例，您可以做的是：

`^.*`以任何东西开头的字符串

`/`后跟一个斜线

`(`（小组开始）

`[^/]*`后面是一堆不是斜线的东西

`)`（小组结束）

`$`到最后

即你可以尝试的正则表达式是`^.*/([^/]*)$`

# bash - 简单的 tmux bash 脚本不起作用

> ID：15257130
> 
> 赞同：10
> 
> 时间：2013-03-06T20:16:59.700
> 
> 标签：bash, tmux

我想让 tmux 打开一个新窗口，然后 cd 进入一个目录，但它不起作用。它只是在我的脚本运行的目录中打开 tmux（即它不执行 cd 命令）。

有人可以告诉我我做错了什么吗？（我使用的是 tmux 1.6）

```
#!/bin/bash                                                                                                                             
tmux start-server
tmux new-session -d -s my_server -n runstuff

tmux send-keys -t my_server:1 "cd /etc"

tmux select-window -t my_server:1
tmux attach-session -t my_server 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T01:05:24.083

我终于让它工作了，使用 Cm 并从 0 开始对窗口进行编号。为了说明目的，我添加了第二个命令。

```
#!/bin/bash                                                                                                                             
tmux start-server
tmux new-session -d -s my_server -n runstuff
tmux new-window -t my_server:1 -n someotherjunk

tmux send-keys -t my_server:0 "cd /etc" C-m
tmux send-keys -t my_server:1 "./yolo" C-m

tmux select-window -t my_server:runstuff
tmux attach-session -t my_server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:24:02.270

`send-keys`模拟在键盘上打字。因此，您还需要发送`Enter`密钥。

```
tmux send-keys -t my_server:1 "cd /etc\n" 
```

# php - 检查 PHP 中是否至少勾选了 1 个复选框

> ID：15257131
> 
> 赞同：1
> 
> 时间：2013-03-06T20:17:00.023
> 
> 标签：php, arrays, post, checkbox

我有 4 个复选框，用户需要勾选 1 才能继续（但可以勾选更多）。所以我做了4个复选框：

```
 I have blue skin
    <input class="cbox" type="checkbox" name="skin" value="Yes" /><br>
    I have blue hair
    <input class="cbox" type="checkbox" name="hair" value="Yes" /><br>
    I have blue eyes
    <input class="cbox" type="checkbox" name="eyes" value="Yes" /><br>
    I have blue teeth
    <input class="cbox" type="checkbox" name="teeth" value="Yes" /><br> 
```

我正在寻找存储这些数据。但首先，我确认至少检查了其中一个。

```
if(isset($_POST['sent']) && !(isset($_POST['skin']) || isset($_POST['hair']) || isset($_POST['eyes']) || isset($_POST['teeth']))) 
```

我不确定这是实现这一目标的最佳方式，因为我想存储所有这些的列表。我认为最好的方法是使用数组。

```
 I have blue skin
    <input class="cbox" type="checkbox" name="blue[]" value="skin" /><br> 
```

并将其存储在已内爆的文本字段中。作为新手，我不确定如何实现这一点，而且我正在阅读的教程有些令人困惑。这样做是否可以让我检查数组是否为空（而不是 4 个单独的 isset？）。我将如何使用 $_POST 处理数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:19:01.067

您可以尝试使用`name="appearance[skin]"`，`name="appearance[hair]"`等等，然后检查
`if(empty($_POST['appearance']))`与否。如果它为空，则没有选中任何复选框。

然后您可以访问`$_POST['appearance']['skin']`等，或使用
`foreach($_POST['appearance'] as $attribute=>$value)`来遍历选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:25:47.780

您可以将所有字段放入一个数组中，然后遍历该数组并设置一个标志：

```
$checkboxes = array('skin', 'hair', 'eyes', 'teeth');

$oneTicked = false;
foreach($checkboxes as $checkbox)
{
    if(!empty($_POST[$checkbox]))
    {
        $oneTicked = true;
        break;
    }
} 
```

然后你可以检查是否`$oneTicked`为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:02:27.850

最后，我做了以下事情（很多事情都让它工作）。

```
I have blue skin
    <input class="cbox" type="checkbox" name="blue[]" value="skin" /><br> 
```

所有 4 使用相同的方法。然后...

```
if(isset($_POST['sent']) && empty($_POST['blue'])) {
 $bluedata = mysql_escape_string(implode(",",$_POST['blue']));
} 
```

然后我将该字符串写入数据库。

希望这可以帮助某人。

# c# - 实体框架 Datagridview 过滤器

> ID：15257132
> 
> 赞同：0
> 
> 时间：2013-03-06T20:17:04.427
> 
> 标签：c#, entity-framework

我是 C# 开发的新手，有一些问题。我希望你能帮忙。

我有 2 个与多对多相关的实体——电影和流派。我需要在 datagridView 中显示所有电影，其中 movies.genres 包含在 listBoxGenres 中选择的类型。

我试试这段代码：

```
moviesDBEntities myContext = new moviesDBEntities();

var myQuery = from movie in myContext.Movies
               where movie.genre.Contains(ListBoxGenres.SelectedItem)
               select movie;

dgvMovies.Datasource = myQuery.ToList(); 
```

问题是收到这样的异常错误：

“无法创建 'System.Object' 类型的常量值。在此上下文中仅支持原始类型（'例如 Int32、String 和 Guid'）。”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:28:56.530

使用 的属性`ListBoxGenres.SelectedItem`，例如：`ListBoxGenres.SelectedItem.Value`

```
var myQuery = from movie in myContext.Movies
              where movie.genre.Contains(ListBoxGenres.SelectedItem.Value)
              select movie; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:29:56.360

见[这里](http://msdn.microsoft.com/en-us/library/bb896317.aspx)。

> 不支持在查询中引用非标量变量，例如实体。执行此类查询时，将引发 NotSupportedException 异常，并显示一条消息，指出“无法创建 EntityType 类型的常量值。在此上下文中仅支持原始类型（'例如 Int32、String 和 Guid'）。”

尝试改写您的查询以使用标量变量（这里我假设 Genre 实体具有 Id 的 PK）：

```
var myQuery = from movie in myContext.Movies
          where movie.genre.Any(g=>g.Id == ((Genre)listBox.SelectedItem).Id)
          select movie; 
```

# r - qplot alpha 值作为向量

> ID：15257133
> 
> 赞同：2
> 
> 时间：2013-03-06T20:17:08.030
> 
> 标签：r, transparency, alpha, ggplot2

我想`qplot`用一个向量（基于绘制的值）设置 a 中一个点的 alpha 值。

```
library(ggplot2)
dsamp <- diamonds[sample(nrow(diamonds), 1000), ]
alpha = rep(.8,nrow(dsamp)); alpha[dsamp$clarity=="I1"] <- 1
qplot(carat, price, data=dsamp, colour=clarity,size=I(4),alpha=alpha) 
```

当我执行上面的代码时，当我创建这样的 alpha 向量时没有区别：

```
alpha = rep(.1,nrow(dsamp)); alpha[dsamp$clarity=="I1"] <- 1 
```

我希望与`dsamp$clarity!="I1"`上面的两个代码一样，这些点的透明度要低一些。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:37:36.193

我会使用`ggplot()`并映射`alpha`到`clarity`. 然后，您可以手动设置`alpha`因子的每个级别所需的值。

```
levels(dsamp$clarity)
[1] "I1"   "SI2"  "SI1"  "VS2"  "VS1"  "VVS2" "VVS1" "IF"
alpha <- c(1, rep(0.25, times=(length(levels(dsamp$clarity))-1)))
names(alpha) <- levels(dsamp$clarity)
alpha
  I1  SI2  SI1  VS2  VS1 VVS2 VVS1   IF 
 0.5  1.0  1.0  1.0  1.0  1.0  1.0  1.0 
```

然后您可以：

```
ggplot(dsamp, aes(carat, price)) + geom_point(aes(alpha=clarity, colour=clarity), size=I(4)) +
  scale_alpha_manual(values=alpha) 
```

据我所知，这给了你你想要的。您显然可以`I1`在创建时设置不同的级别`alpha`。

# sql - Symfony 的教义忽略了我的部分有条款？

> ID：15257134
> 
> 赞同：0
> 
> 时间：2013-03-06T20:17:11.770
> 
> 标签：sql, doctrine, symfony-1.4, having

我有以下代码：

```
$sub_questions_no_restricted = Doctrine_Query::create()
                ->select("q2.id")
                ->from("question q2")
                ->leftJoin("q2.CountryRestrictions cr2")
                ->groupBy("q2.id")
                ->having("count(cr2.country_iso)=0"); 
```

我想得到所有没有国家限制的问题ID

但是 symfony 不会生成正确的 SQL，忽略了 having 子句的一部分。

生成的 DQL 和 SQL 是：

```
DQL=SELECT q2.id FROM question q2 LEFT JOIN q2.CountryRestrictions cr2 GROUP BY q2.id HAVING count(cr2.country_iso)=0
SQL=SELECT q.id AS q__id FROM question q LEFT JOIN country_restriction c ON q.id = c.question_id GROUP BY q.id HAVING count(c.country_iso)=) 
```

SQL 忽略“0”，并添加一个“)”

我做错了什么？它是一个教义问题？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:39:03.500

尝试在有子句的 ) 和 = 之间放置空格。

```
$sub_questions_no_restricted = Doctrine_Query::create()
                ->select("q2.id")
                ->from("question q2")
                ->leftJoin("q2.CountryRestrictions cr2")
                ->groupBy("q2.id")
                ->having("count(cr2.country_iso) = 0"); 
```

# windows - 在 Cairo 下绘制 SVG 和 PNG 输出之间的差异

> ID：15257135
> 
> 赞同：0
> 
> 时间：2013-03-06T20:17:20.807
> 
> 标签：windows, r, graphics, plot, cairo

我正在尝试使用 R 的 Cairo 库创建视觉上相同的图（假设 DPI 相同）。然而，尽管设置相同，但 PNG 和 SVG 输出明显不同。我在 Windows 7 上运行 R 2.15.2。示例和插图如下。

更新：这些看起来更相似，但仍然不同。

```
library( Cairo )
library( lattice )
cars_xyplot = xyplot( speed ~ dist, data = cars )
Cairo( file = 'temp.png', type = 'png', dpi = 120, pointsize = 12, bg = "white", units = "mm", width = 100, height = 100 )
plot( cars_xyplot )
dev.off()
Cairo( file = 'temp.svg', type = 'svg', pointsize = 12, bg = "white", units = "mm", width = 100, height = 100 )
plot( cars_xyplot )
dev.off() 
```

[http://i.minus.com/itsJoNPU2iRZK.svg](http://i.minus.com/itsJoNPU2iRZK.svg)

[http://i.minus.com/ibagje4DmtcA1u.png](http://i.minus.com/ibagje4DmtcA1u.png)

原文：巨大的差异

```
library( Cairo )
library( lattice )
cars_xyplot = xyplot( speed ~ dist, data = cars )
Cairo( file = 'temp.png', type = 'png', dpi = 120, pointsize = 12, bg = "white" )
plot( cars_xyplot )
dev.off()
Cairo( file = 'temp.svg', type = 'svg', dpi = 120, pointsize = 12, bg = "white" )
plot( cars_xyplot )
dev.off() 
```

[http://i.minus.com/ibj8wqtqXsyZqN.svg](http://i.minus.com/ibj8wqtqXsyZqN.svg)

[http://i.minus.com/ibult36ExZJ75o.png](http://i.minus.com/ibult36ExZJ75o.png)

# ios - 根据单元格选择，使用 NSArray 中的选择对象重新加载 UITableView

> ID：15257136
> 
> 赞同：1
> 
> 时间：2013-03-06T20:17:21.337
> 
> 标签：ios, objective-c, uitableview, nsarray

我有一个 ViewController `tableView`，我也有以下`NSArray`调用`dag`：

```
[{"ID":67,"ParentsID":0,"Title":"Products"},
{"ID":68,"ParentsID":67,"Title":"Class A"},
{"ID":69,"ParentsID":67,"Title":"Class B"},
{"ID":70,"ParentsID":68,"Title":"Recurrent"},
{"ID":71,"ParentsID":68,"Title":"Non Recurrent"},
{"ID":72,"ParentsID":70,"Title":"Basic"},
{"ID":73,"ParentsID":70,"Title":"Advanced"},
{"ID":74,"ParentsID":71,"Title":"Incentives"}] 
```

我已经能够使用`tableView`来显示 Key`"ParentsID"`等于的项目的标题`"0"`。换句话说，我正在加载表格：

```
"Products" //from `{"ID":67,"ParentsID":0,"Title":"Products"}`. 
```

现在，当我在 tableView 中选择“Products”行时，我希望 tableView 重新加载并显示`"ParentsID"`等于`"ID"`该“Products”项 (67) 的项。
即：选择“产品”将加载：

```
"Class A"  //from {"ID":68,"ParentsID":67,"Title":"Class A"}, and
"Class B"  //from {"ID":69,"ParentsID":67,"Title":"Class B"}
           //because their ParentsID is equal to the ID of "Products" 
```

然后我希望在选择“A 类”或“B 类”等时继续这种行为。

我怎样才能做到这一点？

我认为我必须实例化一个新的 tableview`didSelectRowAtIndexPath`以作为参考值的 ID，但我不知道该怎么做或者这是否可能。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:49:42.463

以下是使用表格和导航控制器制作逐级层次结构视图的一般方法：

1.  创建一个`UITableViewDataSource`类来存储你的`NSArray`和`int parentId`
2.  将 a 添加`UINavigationController`到要显示层次结构的屏幕
3.  创建`UITableView`为您的表嵌入的控制器
4.  向上述控制器添加一个初始化程序，该控制器采用步骤 1 中定义的数据源
5.  为表项选择事件提供处理程序。

在第 5 步的事件处理程序中，获取当前行的 ID，从第 1 步为该 ID 实例化一个新数据源，然后通过调用第 4 步的初始化程序从第 3 步实例化一个新的视图控制器，并推送新创建的控制器从步骤 2 到导航控制器的堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:44:43.613

`NavigationController`你可以在你的场景中有两个 viewControllers ，`firstViewController`你可以让 UITableView 包含所有产品，当你选择任何产品时，你可以推送一个新视图，这将是你的`secondViewController`，第二个视图也可以有一个`UITableView`或任何东西，具体取决于你的方式想要显示从行中选择的数据。它看起来像这样`firstViewController`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

  SecondViewController  *secondViewController=[[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

  // save the selected Row data and in some string of secondViewController
  secondViewController.dataString=[self.idList objectAtIndex:row]; 

 [[self navigationController] pushViewController:secondViewController animated:YES];

} 
```

# silverlight - 使用反射属性数据的 XAML 绑定

> ID：15257141
> 
> 赞同：0
> 
> 时间：2013-03-06T20:17:30.697
> 
> 标签：silverlight, xaml, reflection, binding

我有一个简单的类，ClassA（下）。是否有可能在我的 XAML 转发器中将反射的属性名称绑定到文本框并能够将复选框 IsChecked 绑定到 bool 属性？所以我的 XAML 可能类似于（这只是伪 xaml，不确定它在语法上是否正确，并假设 ItemsControl 数据上下文是 ClassA）：

```
<ItemsControl>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBox Text="{Binding ??? reflected property name as text, e.g., ClassABool1 ??? }"
            <CheckBox IsChecked="{Binding ??? somehow bind to the actual property ClassABool1 ???, Mode=TwoWay}"
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl>

public sealed class ClassA : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler  PropertyChanged;
    private static ClassA _instance;
    private ClassA() {}

    public static ClassA Instance
    {
        get
        {
            if (_instance == null)
            {
                _instance = new ClassA();
            }

            return _instance;
        }
    }

    private bool _classABool1;
    public bool ClassABool1 { get; set; }

    private bool _classABool2;
    public bool ClassABool2 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:07:13.580

这将几乎完全按照您的描述工作。

创建绑定时（在 XAML 或代码中），您使用字符串定义目标属性来描述相对于数据上下文的路径。

在下面的示例中，如果您将 ClassA 的实例分配给`Content property`ContentControl，则`Data Context`您的 Bindings 将是该实例。

```
<ContentControl Content="An Instance of ClassA">
    <ContentControl.ContentTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBox Text="{Binding ClassABool1}" />

                <CheckBox IsChecked="{Binding ClassABool1, Mode=TwoWay}" />
            </StackPanel>
        </DataTemplate>
    </ContentControl.ContentTemplate>
</ContentControl> 
```

[更多关于数据绑定的信息](http://msdn.microsoft.com/en-gb/library/cc278072%28v=vs.95%29.aspx)

# php - 在篝火中使用 php 从 mysql 填充选择框

> ID：15257142
> 
> 赞同：1
> 
> 时间：2013-03-06T20:17:31.557
> 
> 标签：php, codeigniter

需要帮助将数据从 mysql 填充到 bonfire 中的选择框中。
我有两张桌子，货币和薪水。货币表与薪水表相关（作为外键）。所以我试图在工资表中加载货币符号，但不知何故，代码在 mac 上工作，但在 linux 机器上不工作。
文件：bonfire/modules/salary/views/content/create.php

```
<?php    
$options = array();
$query = $this->db->query("SELECT currency_symbol FROM currency");  
foreach ($query->result_array() as $row) {
   foreach ($row as $key) {
        $options[] = $key;
   }
}
?>

<?php echo form_dropdown('salary_currency', $options, set_value('salary_currency', isset($salary['salary_currency']) ? $salary['salary_currency'] : ''), 'Currency')?> 
```

这是html的td中index.php的代码：
文件路径：bonfire/modules/salary/views/content/index.php

```
<?php    
$query = $this->db->query("SELECT currency_symbol FROM currency");  
$query_result = $query->result_array();
foreach ($query_result as $query_currency_id => $query_currency_symbol ) {
  if($query_currency_id == (integer)($record->salary_currency)){
    foreach ($query_currency_symbol as $salary_currency_id) {
      echo($salary_currency_id);
    }
  }
}
?> 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:28:43.780

谢谢，但在我强制刷新页面后，它似乎可以在 linux 上运行。

# mongodb - Pymongo 中的全文搜索

> ID：15257146
> 
> 赞同：14
> 
> 时间：2013-03-06T20:17:40.447
> 
> 标签：mongodb, pymongo

即将推出的 MongoDB 2.4 支持[全文搜索](http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes)。

我们在 mongo shell 中使用命令执行此操作，例如

```
db.players.runCommand("text", {
    "search": "alice", 
    "project": {"name": 1, "_id": 0}, 
    "limit": 10}) 
```

现在，当将其移植到 pymongo 时，我们必须处理`runCommand`未在 pymongo`Collection`类上定义的事实。我能够弄清楚*真正的*命令是什么，所以这在 shell 中起作用：

```
db.runCommand({
    "text": "players", 
    "search": "alice", 
    "project": {"name": 1, "_id": 0}, 
    "limit": 10}) 
```

这有效。但这并不能完全告诉我如何让它在 pymongo 中工作。我试过：

```
db.command({
    "text":"players", 
    "pipeline": [
        ("search","alice"), ("project",{"name":1,"_id":0}), ("limit",10)
    ]}) 
```

这不起作用（它说“没有指定搜索”）。我也试过：

```
db.command({
    "text": "players", 
    "search": "alice", 
    "project": {"name": 1, "_id": 0}, 
    "limit":10}) 
```

当然失败了：“没有这样的cmd：项目”。

如果我只使用`search`and `limit`，我可以让事情正常工作，例如

```
db.command({
    "text": "players", 
    "search": "alice",
    "limit": 10}) 
```

但我想使用`filter`和`project`pymongo。有没有人使用项目和过滤器进行全文搜索？

旁白：也许有一种从 shell 命令推断 pymongo 命令形状的好方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T08:02:06.480

想通了：pymongo 使用关键字参数作为附加命令参数：

```
db.command("text", "players", 
    search="alice", 
    project={"name": 1, "_id": 0}, 
    limit=10) 
```

奇怪的错误消息“no such cmd: project”的原因是 Python 的字典是无序的，并且`project`key 在传递给 mongo 时恰好是第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T22:47:10.043

另一种解决方案是使用 OrderedDict。假设集合和查询作为变量给出，而附加参数，如限制、投影和其他在 dict 'params' 中给出：

```
params_ord = OrderedDict()
params_ord['text'] = collection
params_ord['search'] = query
for k,v in params.iteritems():
    params_ord[k] = v
db.command(params_ord) 
```

# asp.net - ASP.NET 屏幕截图

> ID：15257152
> 
> 赞同：0
> 
> 时间：2013-03-06T20:17:54.070
> 
> 标签：asp.net, screen, capture

我正在开发 ASP.NET 应用程序（使用最新的 4.0）。我一直想知道是否有一种方法可以捕获用户的屏幕并将其保存到文件夹中以进行错误记录？我可以在每个用户的机器上安装一个 Win-form 并在 ASP.NET 页面出现错误时执行它。请指教。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:10:24.497

理论上可以安装一个浏览器插件，在出错时触发屏幕截图。不过，第一个问题是您需要在错误发生之前进行屏幕截图——要么是一些非常聪明的错误处理，要么是一台时间机器。

但这无论如何都需要您在用户机器上安装软件，从而剥夺您从基于 Web 的应用程序中获得的任何好处。例如，您必须处理所有可能的操作系统/浏览器组合。

获取该屏幕截图的唯一合理方法是显示一条自定义错误消息，要求用户自己手动提供屏幕截图。

# java - 创建一个对时间做出反应的进度条

> ID：15257154
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:17:56.783
> 
> 标签：java

我在 java 中创建了一个 ProgressBar。我可以使用 pb.setValue(i); 设置值 我是一个 int 我无法设置 'i' 的值来增加进度条的值，以便在 10 秒内进度条将在 10 秒内达到 1% 到 100%。我怎样才能做到这一点 ？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:43:28.563

您可以使用[计时器](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.Timer;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TimerTest {
public static void main(String[] args) {

    final JFrame frame = new JFrame();
    final JProgressBar ps = new JProgressBar();
    final Timer timer = new Timer(100, new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            int value = ps.getValue() + 1;
            ps.setValue(value);
        }

    });

    ps.addChangeListener(new ChangeListener() {

        @Override
        public void stateChanged(ChangeEvent e) {
            if (ps.getValue() == 100) {
                timer.stop();
                frame.dispose();
            }
        }
    });
    frame.setSize(600, 400);
    frame.add(ps);
    frame.pack();
    frame.setVisible(true);
    timer.start();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:32:34.513

查看 java 标准库中有特定时间的函数，例如此代码片段。

```
long startTime = System.nanoTime();
methodToTime();
long endTime = System.nanoTime();

long duration = endTime - startTime; 
```

您设置结束和开始时间，使其产生持续时间或 10 或 1 个部分，具体取决于您实现代码的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:40:36.847

您有任意数量的选择，这里有两个。

您可以建立一个每秒计时的计时器，直到计时 10 次，或者您可以计算经过的时间量并根据目标时间经过的时间生成进度值，这将产生更平滑的进度。 .

```
public class ProgressOverTime {

    public static void main(String[] args) {
        new ProgressOverTime();
    }

    public ProgressOverTime() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridwidth = GridBagConstraints.REMAINDER;
                frame.add(new TestPane(), gbc);
                frame.add(new TimeGapPane(), gbc);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JProgressBar pb;
        private int progress;
        private int target = 10;

        public TestPane() {
            setLayout(new GridBagLayout());
            pb = new JProgressBar();
            pb.setMaximum(10);
            add(pb);

            Timer timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    progress++;
                    if (progress > target) {
                        ((Timer)e.getSource()).stop();
                    }
                    pb.setValue(progress);
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

    }

    public class TimeGapPane extends JPanel {

        private JProgressBar pb;
        private long startTime = -1;
        private int target = 10000;

        public TimeGapPane() {
            setLayout(new GridBagLayout());
            pb = new JProgressBar();
            pb.setMaximum(100);
            add(pb);

            Timer timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if (startTime < 0) {
                        startTime = System.currentTimeMillis();
                    }
                    long now = System.currentTimeMillis();
                    long ticks = now - startTime;

                    float progress = (float)ticks / (float)target;
                    if (progress >= 1f) {
                        ((Timer)e.getSource()).stop();
                        progress = 1f;
                    }
                    pb.setValue(Math.round(100f * progress));
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

    }

} 
```

# r - 寻找函数的不动点

> ID：15257155
> 
> 赞同：1
> 
> 时间：2013-03-06T20:17:57.093
> 
> 标签：r, iteration, fixed-point-iteration

我试图找到一个逻辑分布函数的不动点，并确定不同参数值的固定点如何变化。代码如下所示：

```
nfxp.reps <- 0
err <- 10
p <- seq(0, 1, by = 0.0001)
pold <- p
gamma <- 6
k <- 3
while (err > 1E-12) {
  nfxp.reps <- nfxp.reps + 1
  if (nfxp.reps > 999) { 
    stop("The number of NFXP reps needs to be increased. \n")
  } 
  pnew <- plogis(-k + gamma * pold) 
  err <- max(abs(pnew - pold))
  pold <- pnew
} 
```

上面的代码在上面的参数选择中效果很好： gamma 和 k - 找到 3 个固定点，2 个稳定点和 1 个不稳定点（其中 p=0.5）。但是，如果我不按比例更改上述参数，其中中间固定点高于或低于 0.5，例如：

```
gamma<-7
k<-3 
```

循环无法定位中间不动点 p=0.3225（如果 gamma=7，k=3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:55:23.597

我在一个新函数中重新排列了你的代码。

```
p.fixed <- function(p0,tol = 1E-9,max.iter = 100,k=3,gamma=7,verbose=F){
  pold <- p0
  pnew <-  plogis(-k + gamma * pold) 
  iter <- 1
    while ((abs(pnew - pold) > tol) && (iter < max.iter)){
      pold <- pnew
      pnew <- plogis(-k + gamma * pold) 
      iter <- iter + 1
      if(verbose)
         cat("At iteration", iter, "value of p is:", pnew, "\n")
    }
    if (abs(pnew - pold) > tol) {
      cat("Algorithm failed to converge")
      return(NULL)
    }
    else {
      cat("Algorithm converged, in :" ,iter,"iterations \n")
      return(pnew)
    }
} 
```

一些测试：

```
p.fixed(0.2,k=3,gamma=7)
Algorithm converged, in : 30 iterations 
[1] 0.08035782
> p.fixed(0.2,k=5,gamma=5)
Algorithm converged, in : 7 iterations 
[1] 0.006927088
> p.fixed(0.2,k=5,gamma=5,verbose=T)
At iteration 2 value of p is: 0.007318032 
At iteration 3 value of p is: 0.006940548 
At iteration 4 value of p is: 0.006927551 
At iteration 5 value of p is: 0.006927104 
At iteration 6 value of p is: 0.006927089 
At iteration 7 value of p is: 0.006927088 
Algorithm converged, in : 7 iterations 
[1] 0.006927088 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:03:59.483

构造定点迭代无法在您的设置中找到不稳定的平衡，因为它是排斥的。换句话说，除非您从不稳定的平衡开始，否则 nfxp 算法将始终远离它。

另一种方法是使用根求解方法。当然，不能保证会找到所有固定点。这是一个简单的例子：

```
library(rootSolve) # for the uniroot.all function
pfind<-function(k=3,gamma=7) 
{
pdiff <-function(p0) p0-plogis(-k + gamma * p0) 
uniroot.all(p.diff,c(0,1))
}
> fps= pfind()
> fps
[1] 0.08036917 0.32257992 0.97925817 
```

我们可以验证这一点：

```
pseq =seq(0,1,length=100)
plot(x=pseq ,y= plogis(-k + gamma *pseq),type= 'l')
abline(0,1,col='grey')
points(matrix(rep(fps,each=2), ncol=2, byrow=TRUE),pch=19,col='red') 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T18:46:35.820

我不太明白您使用的是哪个发行版；这是我经常使用的定点方法的标准代码，如果需要，我会更改（您必须在 ftn 中填写函数 f(x)；

```
fixed_point <- function(x0, eps = 1e-6, max_iter = 100){
  x.old <- x0
  x.new <- ftn(x.old)
  iter <- 1
  while((abs(x.new-x.old) > eps) && (iter < max_iter){
    x.old <- x.new
    x.new <- ftn(x.old)
    iter <- iter + 1
  }
 if (abs(x.new-x.old) > eps){
  cat("failed to converge\n")
  return(NULL)
 } else {
  return(x.new)
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T08:54:06.197

不知道你到底做错了什么，但我会给你我的代码，它总是可以找到固定点。下面的最后一个函数可用于计算函数 g，其定义为 g(x) = c*ftn(x) + x。

```
fixpt_own <- function(x0, tol = 1e-6, max.iter = 100) {
  xold <- x0
  xnew <- ftn_g(xold)
  iter <- 1
  cat("At iteration 1 value of x is:", xnew, "\n")
  while ((abs(xnew-xold) > tol) && (iter < max.iter)) {
    xold <- xnew;
    xnew <- ftn_g(xold);
    iter <- iter + 1
    cat("At iteration", iter, "value of x is:", xnew, "\n")
  }
  if (abs(xnew-xold) > tol) {
    cat("Algorithm failed to converge\n")
    return(NULL)
  } else {
    cat("Algorithm converged\n")
    return(xnew)
  }
}
fixpt_own(3,1e-6,150)

ftn_g <- function(x){
  c <- 4;
  g <- c*(((1+x)/x - log(x))/(1+x)^2) + x;
  return(g)
} 
```

# mysql - 解释的难以理解的响应以及如何决定在 mysql 中添加索引

> ID：15257163
> 
> 赞同：1
> 
> 时间：2013-03-06T20:18:25.373
> 
> 标签：mysql, sql, performance, optimization, database

我们有一个非常大的数据库，并且用非常简单的术语提出问题，我无法决定是否应该在日期字段上添加索引。

我的查询是：我是否应该在表 A 的日期字段上添加索引，该表非常大且日期（格式：2013-02-26 18:52:23）。以下是我的查询：

```
 SELECT As.id 
      FROM As INNER JOIN A_items ON A_items.A_id = As.id AND A_items.type IN ('BilledItem', 'CustomerItem') 
      WHERE   (As.A_date BETWEEN '2013-01-15 18:52:23' AND '2013-01-30 18:52:23') AND A_items.category_id in ('20219') and A_items.product_id IN ('ACCDYHGYUDZNY7FZ') 
```

现在，当我对此使用解释时，它给了我以下结果：-

```
 *************************** 1\. row ***************************
      id: 1
      select_type: SIMPLE
      table: A_items
      type: ref
      possible_keys: index_A_items_on_A_id,index_A_items_on_product_id,i_type_parent_id_item_type
      key: index_A_items_on_product_id
      key_len: 258
      ref: const
      rows: 221122
      Extra: Using where
      *************************** 2\. row ***************************
      id: 1
      select_type: SIMPLE
      table: As
      type: eq_ref
      possible_keys: PRIMARY
      key: PRIMARY
      key_len: 8
      ref: database.A_items.A_id
      rows: 1
      Extra: Using where
      2 rows in set (0.00 sec) 
```

但是，当我从查询中删除 A_items.product_id IN ('ACCDYHGYUDZNY7FZ') 并运行以下命令时：-

```
 explain
      SELECT As.id 
      FROM As INNER JOIN A_items ON A_items.A_id = As.id AND A_items.type IN ('BilledItem', 'CustomerItem') 
      WHERE   (As.A_date BETWEEN '2013-01-15' AND '2013-01-30') AND A_items.category_id in ('2005') 
```

我得到：-

```
 *************************** 1\. row ***************************
      id: 1
      select_type: SIMPLE
      table: As
      type: ALL
      possible_keys: PRIMARY
      key: NULL
      key_len: NULL
      ref: NULL
      rows: 15427520    <--Notice this big number
      Extra: Using where
      *************************** 2\. row ***************************
      id: 1
      select_type: SIMPLE
      table: A_items
      type: ref
      possible_keys: index_A_items_on_A_id,i_type_parent_id_item_type
      key: index_A_items_on_A_id
      key_len: 8
      ref: database.As.id
      rows: 1
      Extra: Using where
      2 rows in set (0.00 sec) 
```

我的问题是为什么第一个查询中没有显示这么多行以及如何决定是否在日期字段上添加索引？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:09:59.903

这真的取决于你的数据。您能做的最好的事情就是尝试使用该索引。索引是否有帮助取决于查询类型，在这种情况下还取决于日期范围。如果选择的范围相当小，那么 index 应该会有所帮助。但例如，如果表只保存 1 个月的数据，而您选择 20-25 天的数据，优化器可能仍会选择忽略索引。优化器将始终尝试选择将产生较少行的索引（但它并不确切知道 - 这是由索引基数估计的，在某些情况下可能不准确）。

拥有额外的索引不会伤害 SELECT，但是对于每个额外的索引，所有 INSERT 和 UPDATE 都会变慢，因为所有索引也需要更新。因此，如果与选择相比，您对该表执行的插入相对较少，那么您可以拥有这个额外的索引，即使它对这个特定的查询没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:16:48.863

在第一个查询中，您有更多的查询限制，更少的表扫描。这就是为什么行数较少的原因。我认为在日期字段上添加索引应该可以加快查询速度（至少它对我有帮助）。为什么不试试呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:49:45.047

我相信它会选择进行表扫描，在第二种情况下，如果该行数似乎合理地接近您表中的行数。这对我说，日期索引可能会有所帮助，因为它会选择从索引中提取而不是扫描整个表。

# php - mod_rewrite 单个“目录”保留 URL 变量的其余部分

> ID：15257170
> 
> 赞同：0
> 
> 时间：2013-03-06T20:18:40.070
> 
> 标签：php, apache, .htaccess, mod-rewrite

我可以将单个 URL var 别名为目录，然后任何其他 URL 变量都保留在字符串中吗？

示例：如果我有一个联系页面并且想要基于快速 URL 变量交换“关于”选择。

?page=contact => 使用所有默认值加载联系人页面

?page=contact®arding=bug => 使用自动选择的错误报告的相关选择选项加载联系人

```
#Enable rewrite engine
RewriteEngine On
#contact,contact/ -> page=contact
RewriteRule ^contact?$ ?page=contact [L]
RewriteRule ^contact/?$ ?page=contact [L] 
```

这适用于域/联系人/，但如果我添加额外的 URL 变量，即使它们出现在 URL 中，它们也会被删除。

我知道我可以做类似的事情：

```
RewriteRule ^contact/bug/?$ ?page=contact&regarding=bug [L] 
```

但我宁愿让它接受任意数量的标志，以防我想在那里做额外的事情。

我希望能够拥有 domain.com/contact/ 和 domain.com/contact/?regarding=bug

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:39:26.077

附加 QSA 标志是我所追求的。感谢上面的 mario 指出了这一点。

作为参考，代码将是：

```
#Enable rewrite engine
RewriteEngine On
#contact,contact/ -> page=contact
RewriteRule ^contact?$ ?page=contact [L,QSA]
RewriteRule ^contact/?$ ?page=contact [L,QSA] 
```

# javascript - 使用 FileTransfer 在 phonegap 打包的移动应用程序的后台下载文件

> ID：15257174
> 
> 赞同：2
> 
> 时间：2013-03-06T20:18:57.573
> 
> 标签：javascript, jquery, cordova, mobile, download

我已经将我的 jQuery/javascript 应用程序与 Android 的 phonegap 打包在一起，以后计划在 iOS/BlackBerry 上执行此操作。在这个项目中，我从 phonegap API 实现了 FileTransfer.download 函数来从服务器下载文件。该功能成功运行，但它阻止我导航到应用程序中的其他页面，直到下载完成。

也许我在文档中遗漏了一些东西：让 FileTransfer.download 在后台工作以便我可以自由地逐页导航的最佳方法是什么？是否有可能不诉诸特定于设备的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:19:30.110

The solution I'm settling for is creating a plugin to call native code that does the downloading. In Android for example, I can create an AsyncTask to do the downloading in a phonegap plugin. I guess I'll be required to do something similar in iOS/BlackBerry/etc. Still welcoming others' solutions

# asp.net-mvc - 在我的布局上加载菜单部分视图

> ID：15257177
> 
> 赞同：0
> 
> 时间：2013-03-06T20:19:13.470
> 
> 标签：asp.net-mvc, layout, razor, menu, partial-views

我需要/想要加载包含我的菜单的局部视图，菜单是根据 menuController 中的用户角色生成的，结果是包含`<ul> <li>`菜单类型的字符串。

我知道使用`html.raw()`它工作的viewbag使用和传递字符串。但是如何在布局上插入菜单？我应该使用局部视图吗？如何？

我也知道我可以使用 ajax，但我会喜欢同步方法

我正在使用 mvc4 和剃须刀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:48:23.120

最好的墨菲定律，搜索 1 小时，在 stackoverflow 上提问，下一个链接 = 回答大声笑我使用 @html.action

# internet-explorer - VBA - IE GetElementByID 不起作用

> ID：15257179
> 
> 赞同：8
> 
> 时间：2013-03-06T20:19:14.203
> 
> 标签：internet-explorer, vba, vbe

在我认为正确的 ID 标签之后，我在搜索框中输入文本时遇到了一些麻烦。我从页面的源代码中获得了 ID。我以前在其他网站上做过。有人可以帮我吗？还有另一种方法可以做到这一点吗？

```
Sub FileUpload()

Dim IEexp as Object
IEexp.visible = True
IEexp.Navigate ("www.example.com")

'this is where the problem
IEexp.Document.GetElementByID("step1_id_bean_newSupportingDoc_description").Value _ 
= "monthly update"

End Sub 
```

我收到“自动化错误，调用的对象已与其客户端断开连接”

我从中提取 ID 的源代码：

```
<td class="Label">Description</td>
  <td class="Data"><input type="text" name="bean.newSupportingDoc.description" size="60" maxlength="250" value="" id="step1_id_bean_newSupportingDoc_description" class="NoBorder"/>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T12:20:35.547

如果您使用`Set IEexp = New InternetExplorerMedium`，则不必更改 Internet 选项中的设置。它使用中等完整性应用程序设置自动实例化 IE 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:04:02.207

你可以试试

```
Do Until IEexp.readyState = 4
DoEvents
Loop

IEexp.Document.getElementById("username").Value = "Monthly update"

IEexp.Document.getElementById("password").Value = FilePth 
```

# java - 找到兼容的插座

> ID：15257180
> 
> 赞同：1
> 
> 时间：2013-03-06T20:19:13.970
> 
> 标签：java, sockets

我有一个 ArrayList 的套接字。如何从列表中删除变量中的同一个套接字。例如：

```
sockets = new ArrayList<Socket>();
sockets.add(socket);
sockets.add(socket1);
sockets.add(socket2); 
```

现在我想删除它的索引socket1，未知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:34:18.817

假设您有对`Socket`要删除的对象的引用，那么只需调用`remove`您的[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)：

```
sockets.remove(socket1); 
```

这是可行的，因为即使[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)没有实现该`equals`方法，也使用了 Object 类的引用相等性。只要该`Socket`对象在`ArrayList`,`remove`就会删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:14:50.543

这段代码：

```
import java.io.IOException;
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;

public class RemoveSocketFromAList {
   public static void main( String[] args ) throws IOException {
      List< Socket > sockets = new ArrayList<>( 3 );
      Socket google = new Socket( "www.google.com", 80 );
      Socket bing   = new Socket( "www.bing.com"  , 80 );
      Socket yahoo  = new Socket( "www.yahoo.com" , 80 );
      sockets.add( google );
      sockets.add( bing   );
      sockets.add( yahoo  );
      System.out.println( sockets.size());
      sockets.remove( bing );
      System.out.println( sockets.size());
      System.out.println( sockets );
   }
} 
```

输出：

```
3
2
[Socket[addr=www.google.com/74.125.230.243,port=80,localport=62411], Socket[addr=www.yahoo.com/87.248.122.122,port=80,localport=62413]] 
```

`List.remove()`是有效的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T20:31:31.363

虽然你没有完全提供你的代码，但在这里我给你一个例子，如何从下面的数组列表中删除一个项目..

```
// create an empty array list with an initial capacity
    ArrayList<String> arrlist = new ArrayList<String>(5);

    // use add() method to add values in the list
    arrlist.add("A");
    arrlist.add("B");
    arrlist.add("C");
    arrlist.add("D");
    arrlist.add("E");

    System.out.println("Size of list: " + arrlist.size());

    // let us print all the values available in list
    for (String value : arrlist) {
      System.out.println("Value = " + value);
    }  

    // Removes first occurrence of "C"
    arrlist.remove("C");

    System.out.println("Now, Size of list: " + arrlist.size());

    // let us print all the values available in list
    for (String value : arrlist) {
      System.out.println("Value = " + value);
    } 
```

**//另一个例子**

```
ArrayList<String> arlist=new ArrayList<String>();

//<E> it is return type of ArrayList

arlist.add("First Element"); // adding element in ArrayList
arlist.add("Second Element");
arlist.add("Third Element");
arlist.add("forth Element");
arlist.add("fifth Element");

// remove array list element by index number
arlist.remove(3);

// remove ArrayList element by Object value
arlist.remove("fifth Element");

// get elements of ArrayList 
for(int i=0;i<arlist.size();i++)
{
    System.out.println("ArrayList Element "+i+" :"+arlist.get(i));
} 
```

# excel - 使用 VBA 将变量系列添加到图表

> ID：15257183
> 
> 赞同：0
> 
> 时间：2013-03-06T20:19:16.347
> 
> 标签：excel, vba, charts, series

我有一个如下所示的电子表格：

```
A     1/1/2013     100
A     2/1/2013     200
A     3/1/2013     300
B     1/1/2013     150
B     2/1/2013     175
B     3/1/2013     200 
```

三列是固定的，但每个系列（第一列）的条目数会有所不同。

使用 VBA，我想自动将第一列中的每个唯一值作为一个系列添加到散点图上，第二列用于 X 值，第三列用于 Y 值。例如，对于上面的系列 A，我需要动态确定范围 B1:B3 和 C1:C3。

我使用录制的宏生成了将系列添加到图表的代码，所以我真正的障碍是找到每个系列的范围。我需要保留关联的系列名称（第一列），并希望避免使用过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:41:57.363

我最终想到了一个有点迂回的解决方法；这是任何有兴趣的人的代码，适合我原始问题的布局：

```
Sub Example()
    ' Variable Definitions
    Dim y As Integer
    Dim Name(73) As String
    Dim Mins(73) As Integer
    Dim Maxs(73) As Integer

    ' Loop Through Name Column (Series)
    For Each x In Range("A4:A" & Cells(Rows.Count, "A").End(xlUp).Row)

        ' Add Values to Arrays, If Not Preexisting
        If IsInArray(x.Value(), Name) = False Then
            Name(y) = x.Value()
            Mins(y) = x.Row()
            Maxs(y) = x.Row()
            y = y + 1
        Else
            Maxs(y - 1) = x.Row()
        End If

    Next x

    ' Add to Chart
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.SeriesCollection.NewSeries
    ActiveChart.FullSeriesCollection(1).Name = Name(0)
    ActiveChart.FullSeriesCollection(1).XValues = "=Data!$B$" & Mins(0) & ":$B$" & Maxs(0)
    ActiveChart.FullSeriesCollection(1).Values = "=Data!$C$" & Mins(0) & ":$C$" & Maxs(0)
End Sub

' Array Function from @JimmyPena
' http://stackoverflow.com/a/11112305/2141501
Function IsInArray(stringToBeFound As String, arr As Variant) As Boolean
  IsInArray = (UBound(Filter(arr, stringToBeFound)) > -1)
End Function 
```

# jquery - 将插件应用于元素后，使 jQuery 插件方法公开可用

> ID：15257184
> 
> 赞同：0
> 
> 时间：2013-03-06T20:19:16.453
> 
> 标签：jquery, extend, public-method

我正在修改一个现有的 jQuery 插件，该插件当前具有我想公开的私有函数（分配给插件范围内的 var），因此我可以在任意时间从插件外部调用它（以响应 UI 事件， 例如）。

本质上，我希望以下工作：

```
$('.foo').myPlugin(); 
```

...及以后（可能在事件回调中）：

```
$('.foo').publicMethodInsidePlugin(); 
```

甚至：

```
$('.foo').myPlugin.publicMethodInsidePlugin(); 
```

我知道 jQueryUI 有另一种方法，但我希望避免这种情况并保持简单。

## 更新

我*认为*这个插件面临挑战的原因是我试图调用的“私有”函数是`return this.each(function(){})`在插件的一部分中定义的。很难将这个函数拉出来，因为它依赖于许多变量，这些变量本身被定义为`this.each`块范围内的私有变量，大概是因为函数所在的每个元素的值可能不同应用。

## 基本结构

所述插件的基本结构是：

```
(function( $ ){
    $.fn.myPlugin = function(options) {
        var settings = { "variousDefaults" : true }

        return this.each(function(){
            if(options) {
                    $.extend(settings, options);
            };

            var $this               = $(this),
                someOtherVars       = $("span", $this).length; // needs to evaluate on $this

            privateFunc = function privateFunc() {
              // the function that I want to be able to call after the fact...
            };

            // Immediately call that function
            privateFunc();

            $(window).resize(function() {
                privateFunc();
            });
         });
    }
})(jQuery); 
```

我如何重构它以便我可以在事后调用 privateFunc？我愿意创建另一个公共函数，然后调用这个函数，如果这意味着更少的重构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:23:59.953

“jQuery”方式是使用插件构造函数来调用不同的方法，比如各种 API：

```
$('.foo').myPlugin();
$('.foo').myPlugin('someMethod', ['arg1', 'arg2']); 
```

我看到的另一种方法是将 API 存储在对象的数据存储中：

```
$('.foo').myPlugin();
$('.foo').data('myPluginAPI').someMethod('arg1', 'arg2'); 
```

# c# - 在 C# 4.0 中，System.Windows.Window 构造函数不支持任何参数

> ID：15257188
> 
> 赞同：0
> 
> 时间：2013-03-06T20:19:36.480
> 
> 标签：c#, .net, watin, filedialog

我想实施这个建议：[How to test file download with Watin / IE9?](https://stackoverflow.com/questions/7500339/how-to-test-file-download-with-watin-ie9/8532222#8532222)

在项目中，我添加了海报提到的参考资料：

*   UIAutomationClient
*   UIAutomationTypes

但是，Window 没有解决。因此，我添加了以下两个解决 Window 的参考：

*   演示核心
*   演示框架

但是， System.Windows.Window 构造函数不支持任何参数，但海报有一个参数：

```
Window windowMain = new Window(WatiN.Core.Native.Windows.NativeMethods.GetWindow(browser.hWnd, 5)); 
```

海报指出，他们的解决方案适用于我的项目正在使用的 .net 4，它是完整的框架，而不是客户端配置文件。PresentationCore/Framework 的使用是否不正确？我确实尝试了对 System.Windows.Forms 的引用，但 Window 不是它的一个类。

让我非常清楚我正在努力实现的目标，因为我猜这还不够明显。我想按照我的问题第一句的链接中所述实施海报的解决方案。添加对 UIAutomationClient/Types 的引用没有解析 Window 对象。于是，我去framework中寻找Window，在PresentationCore/Framework中找到了。根据我得到的回复，我显然不应该使用 PresentationCore/Framework。所以这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:33:18.360

Pieter Geerkens 回答了这个问题。窗口位于 WatiN.Core.Native.Windows 中。

# c# - 在哪里存储将在我的应用程序中使用的常量对象

> ID：15257193
> 
> 赞同：2
> 
> 时间：2013-03-06T20:19:55.910
> 
> 标签：c#, .net, xml, constants

假设我有一个`item`，它有字段（属性）

1.  地点
2.  平均值
3.  可用性

而且我有 10-15 `items`，我想预定义其值，或者将其写入某处，然后加载到要使用的代码中。

哪个是最好的做法？

这些将是常量，只是启动参数，在应用程序生命周期中不会被修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:31:46.297

`List<Item>`您可以使用此帮助程序类对 XML 文件进行序列化和反序列化：

```
public static class XmlHelper
{
    // Specifies whether XML attributes each appear on their own line
    const bool newLineOnAttributes = false;

    public static bool NewLineOnAttributes { get; set; }
    /// <summary>
    /// Serializes an object to an XML string, using the specified namespaces.
    /// </summary>
    public static string ToXml(object obj, XmlSerializerNamespaces ns)
    {
        Type T = obj.GetType();

        var xs = new XmlSerializer(T);
        var ws = new XmlWriterSettings { Indent = true, NewLineOnAttributes = newLineOnAttributes, OmitXmlDeclaration = true };

        var sb = new StringBuilder();
        using (XmlWriter writer = XmlWriter.Create(sb, ws))
        {
            xs.Serialize(writer, obj, ns);
        }
        return sb.ToString();
    }

    /// <summary>
    /// Serializes an object to an XML string.
    /// </summary>
    public static string ToXml(object obj)
    {
        var ns = new XmlSerializerNamespaces();
        ns.Add("", "");
        return ToXml(obj, ns);
    }

    /// <summary>
    /// Deserializes an object from an XML string.
    /// </summary>
    public static T FromXml<T>(string xml)
    {
        XmlSerializer xs = new XmlSerializer(typeof(T));
        using (StringReader sr = new StringReader(xml))
        {
            return (T)xs.Deserialize(sr);
        }
    }

    /// <summary>
    /// Serializes an object to an XML file.
    /// </summary>
    public static void ToXmlFile(Object obj, string filePath)
    {
        var xs = new XmlSerializer(obj.GetType());
        var ns = new XmlSerializerNamespaces();
        var ws = new XmlWriterSettings { Indent = true, NewLineOnAttributes = NewLineOnAttributes, OmitXmlDeclaration = true };
        ns.Add("", "");

        using (XmlWriter writer = XmlWriter.Create(filePath, ws))
        {
            xs.Serialize(writer, obj);
        }
    }

    /// <summary>
    /// Deserializes an object from an XML file.
    /// </summary>
    public static T FromXmlFile<T>(string filePath)
    {
        StreamReader sr = new StreamReader(filePath);
        try
        {
            var result = FromXml<T>(sr.ReadToEnd());
            return result;
        }
        catch (Exception e)
        {
            throw new Exception(e.InnerException.Message);
        }
        finally
        {
            sr.Close();
        }
    }
} 
```

用法：

```
XmlHelper.ToXmlFile(myList, @"c:\folder\file.xml");

var list = XmlHelper.FromXmlFile<List<Item>>(@"c:\folder\file.xml"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:24:59.977

您的选择将是：

1.  XML - 实际上是您的标签之一
2.  数据库
3.  二进制文件

存储对象并在您的代码中读取它们。

编写 XML 代码示例：

```
public void WriteXML()
{
    Book overview = new Book();
    overview.title = "Serialization Overview";
    System.Xml.Serialization.XmlSerializer writer = 
        new System.Xml.Serialization.XmlSerializer(typeof(Book));

    System.IO.StreamWriter file = new System.IO.StreamWriter(
        @"c:\temp\SerializationOverview.xml");
    writer.Serialize(file, overview);
    file.Close();
} 
```

阅读 XML 代码示例：

```
public void Read(string  fileName)
{
    XDocument doc = XDocument.Load(fileName);

    foreach (XElement el in doc.Root.Elements())
    {
        Console.WriteLine("{0} {1}", el.Name, el.Attribute("id").Value);
        Console.WriteLine("  Attributes:");
        foreach (XAttribute attr in el.Attributes())
            Console.WriteLine("    {0}", attr);
        Console.WriteLine("  Elements:");

        foreach (XElement element in el.Elements())
            Console.WriteLine("    {0}: {1}", element.Name, element.Value);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:57:55.023

[ApplicationSettings](http://msdn.microsoft.com/en-us/library/bb397750.aspx)非常适合启动常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T20:31:57.977

你所描述的听起来像是完美的用例[`T4`](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)

您可以将 T4​​ 模板添加到您的项目中，该模板读取 XML 数据（在 Visual Studio 中的设计时）并使用您的静态内容生成 *.cs 文件。如果您需要修改数据，只需修改 XML 文件并单击`Transform All Templates`解决方案资源管理器中的按钮。

请记住，如果您需要修改这些内容，这将需要您重新编译和重新部署应用程序。如果是这种情况，那么@Mortalus 提供的解决方案是最好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T04:00:00.333

我会使用 web.config 并将其存储在应用程序设置区域中，然后创建一个类来读取这些将其作为列表检索。

这是它在 Web 配置和 C# 代码中的外观。

```
 <appSettings>      
    <add key="location_1" value="123"/>
    <add key="avgValue_1" value="123"/>
    <add key="usability_1" value="123"/>
    <add key="location_2" value="123"/>
    <add key="avgValue_2" value="123"/>
    <add key="usability_2" value="123"/>
    <add key="count" value="2"/>
 </appSettings>

public class SomeClass
{
private string location;
private double avgValue;
private int usability;

public string Location 
{
    get { return location; }
    set { location = value; }
}
public double AvgValue
{
    get { return avgValue; }
    set { avgValue = value; }
}
public int Usability
{
    get { return usability; }
    set { usability = value; }
}
}

public class Config
{
public static List<SomeClass> Items
{
    get
    {
        List<SomeClass> result = new List<SomeClass>();

        for (int i = 1; i <= Convert.ToInt32(WebConfigurationManager.AppSettings["count"]); i++)
        {
            SomeClass sClass = new SomeClass();
            sClass.AvgValue = Convert.ToDouble(WebConfigurationManager.AppSettings["avgValue_" + i.ToString()]);
            sClass.Location = WebConfigurationManager.AppSettings["location_" + i.ToString()];
            sClass.Usability = Convert.ToInt32(WebConfigurationManager.AppSettings["usability_" + i.ToString()]);
        }

        return result;
    }
} 
```

}

# ucma - 在不使用对话窗口扩展的情况下将上下文传递给 lync 客户端

> ID：15257198
> 
> 赞同：0
> 
> 时间：2013-03-06T20:20:12.893
> 
> 标签：ucma

我想将用户的上下文传递给另一个 lync 客户端，以便 lync 用户根据传递的信息进行一些操作。我阅读了邮件文章，发现可以使用 ucma 会话上下文通道。但是使用这种方法我们有实现对话窗口扩展。我不想实现。

请建议不使用对话窗口扩展，如何传递上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:00:25.520

You could perhaps use the subject field.

In our project we have a custom Lync client (UI suppressed) and then the context channels does unfortunately not work so we use the subject field for custom data.

The subject is a string and I think it is limited to something like 1024 characters.

# xcode - 在 Xcode 中的 iOS 应用程序的第五个视图之后返回第一个视图

> ID：15257200
> 
> 赞同：0
> 
> 时间：2013-03-06T20:20:21.580
> 
> 标签：xcode, view, switch-statement, viewcontroller, uiswitch

我对 xcode 相当陌生，正在创建一个具有五个视图（xib 文件）的单视图应用程序。我没有使用导航控制器或情节提要有两个原因。如果我使用 Storyboard，我不得不让我的其他视图成为 UIView 文件。这些没有

```
-(void)viewDidLoad 
```

这使我无法加载我的应用程序中的一些计时器。

我可以使用以下代码从第一页导航到第二页，依此类推，一直到第五页/视图。

```
-(IBAction)pagethree {
    countdown=[[Countdown alloc] initWithNibName:@"Countdown" bundle:nil];
    [self.view addSubview:countdown.view];  
} 
```

但是，当我想从第五个视图返回到第一页时，我遇到了问题。我的第一个视图称为 ViewController。如果我尝试上面的代码，我的应用程序充满了错误。

我也尝试过使用

```
-(IBAction)back {
    [self.view removeFromSuperview]; 
} 
```

但这只是让我回到了一个观点。

我的第五个视图控制器称为 Statistics，第一个称为 ViewController。我可以编写什么代码从最后一个视图返回到第一个视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:51:34.180

首先，要回答你的问题，你需要为每个**addSubview做一个****removeFromSuperview** （或类似的）：你做了。每次您执行 addSubview 时，您都将新屏幕“放在”最后一个屏幕的“顶部”，就像堆栈一样。当您到达第 5 个视图时，您有 4 个其他视图“背后”。（实际上，这并不完全是 addSubview 所做的，但我只是在描述您特定情况下的效果）。

 **但我认为你做错了......你应该阅读更多关于故事板和导航控制器的信息。两者都与 UIViewController 一起使用，并且开箱即用地支持您尝试手动执行的操作。例如，使用导航控制器来推送一个新的视图控制器，你可以这样做：

```
[navigationController pushViewController:viewController animated:YES]; 
```

您可以根据需要多次执行此操作。然后，要返回一次，请执行以下操作：

```
[navigationController popViewControllerAnimated:YES]; 
```

并直接回到第一个：

```
[navigationController popToRootViewControllerAnimated:YES]; 
```

希望这可以帮助。**

# javascript - 在字符串结束脚本部分

> ID：15257201
> 
> 赞同：1
> 
> 时间：2013-03-06T20:20:21.867
> 
> 标签：javascript, jquery

我在尝试使用 JQuery 将字符串附加到 div 时遇到问题。

该字符串将是 HTML，有时用户会在字符串中使用脚本标签。

不幸的是，当浏览器读取`</script>`字符串内部时，它会结束该部分并将以下所有 javascript 打印到浏览器中。显然，我们不希望这样。

有没有办法让浏览器不解析字符串中的任何内容？

这方面的一个示例可能是附加到 div 的 Adsense 广告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:24:04.347

您可以使用反斜杠 ( `\`) 来转义`<script>`关闭标记中的斜杠，这样它就不会关闭实际`<script>`元素：

```
var foo = document.write('<script src="somewhere.js"><\/script>'); 
```

这通常在从具有本地回退的 CDN 加载脚本时使用：

```
<script src="//cdn.example.com/jquery.js"></script>
<script>
    if (!window.jQuery) document.write('<script src="/assets/js/jquery.js"><\/script>');
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:24:09.807

该问题的解决方法是使用：

```
"</scr"  + "ipt>" 
```

丑陋，烦人，但**工作！**

# perl - 将 Perl 脚本转换为 VBA 脚本

> ID：15257204
> 
> 赞同：1
> 
> 时间：2013-03-06T20:20:37.230
> 
> 标签：perl, excel, vba

我有一个可用的 Perl 脚本，我想将它转换为 VBA 以在 Excel 宏中运行，以便可以轻松地将其共享给其他 PC。我有一个驱动 perl 脚本的 shell 脚本（我在其中传递参数）。我使用 Perl 脚本从一个固定宽度的文件（开头是 54,63）读取所有数据行的每个指定列，并将该数据与另一个文件进行比较并打印差异。我会在 Shell 脚本中传递参数，因为`runpro.pl filea.txt fileb.csv > myoutput.txt` 任何帮助都会很棒！特别是如果有人能指出我正确的方向，因为代码相当简单。谢谢！

```
#!/usr/bin/perl
#Perl Script runpro.pl
#***************************************************

use strict;
use warnings;

my ($fa, $fb) = @ARGV;

@ARGV  = $fa;
my %codes;
while(<>) {
 s/[\r\n]+\z//;
 $_ = substr($_, 54, 63);
 s/\s+\z//;
 next if $_ eq "";
 $codes{$_} =1;
}

@ARGV  = $fb;
my %descrip;
while(<>) {
 s/[\r\n]+\z//;
 s/,.*//;
 s/"//g;
 $descrip {$_} = 1 if s/^1234//; 
}

for (sort keys %codes) {$   
print "$_\n" unless ($descrip{$_});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:08:03.347

几点：

1) VBA与 Perl**非常**不同 - 因此，单行的东西在另一个中会很棘手

2）如果您没有在Excel中使用过VBA，我建议您从“录制”宏开始（首先使功能区中的“开发人员”选项卡可见，然后选择“录制宏”，然后开始执行诸如打开文件之类的操作，导入它们（固定宽度）。停止录制后，您将看到执行这些操作的语法 - 这应该会有很大帮助

3）您必须决定如何将参数传递给 VBA - 工作表上的单元格、对话框......没有“从命令行运行 VBA”这样的东西。

我想知道您是否真的需要/想要 VBA，或者您是否最好编译一个独立程序 (.exe)。这意味着要在 PC（Windows）、Mac OS 或两者上运行吗？例如，请参阅[这个较早的问题](https://stackoverflow.com/questions/446685/how-can-i-deploy-a-perl-python-ruby-script-without-installing-an-interpreter)- 也许这就是您真正需要的（如果不是您要求的......）？

# javascript - 仅从网站限制控制器操作

> ID：15257213
> 
> 赞同：2
> 
> 时间：2013-03-06T20:21:30.533
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc

是否可以将我的操作方法的控制器操作访问限制为仅限 AJAX 请求？

我的意思是非 Ajax 请求将被重定向到 404 或抛出错误。如果 JS 在我自己的页面上发出请求，则操作只会返回正确的结果。

我试图谷歌它，但没有找到答案。我了解到我可以为此目的实现自定义过滤器，但也许它已经存在于 MVC 中？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T20:34:03.673

创建自定义操作方法选择器以阻止非 Ajax 调用

```
public class AjaxOnlyAttribute : ActionMethodSelectorAttribute
{
    public override bool IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
    {
        return controllerContext.HttpContext.Request.IsAjaxRequest();
    }
} 
```

您的属性将以经典方式应用

```
[AjaxOnly]
public ActionResult Index()
{ 
```

或者您可以将其应用于您的控制器

```
[AjaxOnly]
public class HomeController : Controller
{ 
```

我不确定我是否会建议您将用户发送到 404，但与往常一样，只有开发人员才能理解他们的要求。因此，我建议您考虑是否要以“更柔和”的方式重定向到警告页面来解决此问题。

# loadrunner - 参数化思考时间 LoadRunner

> ID：15257214
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:21:34.160
> 
> 标签：loadrunner

是否可以参数化脚本的思考时间。当然要考虑到脚本中的所有思考时间都应该是相同的持续时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:11:27.537

所有的思考时间都不应该是固定的。它们应该是自然记录思考时间的变体。您可以在运行时间设置中调整思考时间的使用，以按百分比改变记录值，例如 80-120%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:01:09.777

回答你的问题：是的，这是可能的。

ThinkTime 只是一个浮点数，因此您可以为它使用任何变量。

我个人更喜欢全局调用`tt_general`，我可以根据发生的情况进行更改（如果需要）。当然，脚本中的某些地方必须有不同的值，但如果你愿意，你也可以对它们进行参数化。

还要记住运行时设置的思考时间设置，您可以在其中设置一个随机百分比（例如 50% 到 150%），以在每次使用时改变实际的思考时间。

# sql - SQL：没有分组的汇总

> ID：15257215
> 
> 赞同：2
> 
> 时间：2013-03-06T20:21:36.980
> 
> 标签：sql, rollup

我正在尝试使用 ROLLUP 将小计添加到此代码的输出底部，但无法说明它们不在一个组中。我不想将它们分组，我只想要底部的小计。

```
SELECT Date, HomeTeam, AwayTeam, FTHG, FTAG, FTR, 
CASE WHEN HomeTeam = 'Arsenal' THEN
CASE FTR WHEN 'H' THEN 3 WHEN 'D' THEN 1 WHEN 'A' THEN 0 ELSE 0 END
WHEN AwayTeam = 'Arsenal' THEN
CASE FTR WHEN 'H' THEN 0 WHEN 'D' THEN 1 WHEN 'A' THEN 3 ELSE 0 END
ELSE 0
END
AS Points, CASE WHEN HomeTeam = 'Arsenal' THEN FTHG - FTAG
            WHEN AwayTeam = 'Arsenal' THEN FTAG - FTHG
            ELSE 0
            END AS GD
FROM [Games].[dbo].[Master]
WHERE (HomeTeam = 'Arsenal' OR AwayTeam = 'Arsenal') AND Date < '20121201'
ORDER BY Date DESC 
```

所以像正常的输出一样，但在底部有一行，HomeTeam =“Total”，Points =（点数列的总和），GD =（GD 列的总和）。

```
Date                     HomeTeam         AwayTeam     FTHG  FTAG  FTR  Points GD
-----------------------  ---------------  -----------  ----  ----  ---  ------ --
2012-11-28 00:00:00.000  Everton          Arsenal      1     1     D    1      0
2012-11-24 00:00:00.000  Aston Villa      Arsenal      0     0     D    1      0
2012-11-17 00:00:00.000  Arsenal          Tottenham    5     2     H    3      3
2012-11-10 00:00:00.000  Arsenal          Fulham       3     3     D    1      0
2012-11-03 00:00:00.000  Man Utd          Arsenal      2     1     H    0      -1
2012-10-27 00:00:00.000  Arsenal          QPR          1     0     H    3      1
2012-10-20 00:00:00.000  Norwich City     Arsenal      1     0     H    0      -1
2012-10-06 00:00:00.000  West Ham United  Arsenal      1     3     A    3      2
2012-09-29 00:00:00.000  Arsenal          Chelsea      1     2     A    0      -1
2012-09-23 00:00:00.000  Manchester City  Arsenal      1     1     D    1      0
2012-09-15 00:00:00.000  Arsenal          Southampton  6     1     H    3      5
2012-09-02 00:00:00.000  Liverpool        Arsenal      0     2     A    3      2
2012-08-26 00:00:00.000  Stoke City       Arsenal      0     0     D    1      0
2012-08-18 00:00:00.000  Arsenal          Sunderland   0     0     D    1      0 
```

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:31:50.283

您可以使用[`CROSS APPLY`](http://msdn.microsoft.com/en-us/library/ms175156.aspx "使用应用")来计算`Points`和`GD`。这样您就可以在同一个 SELECT 中引用结果：

```
SELECT
  m.Date,
  m.HomeTeam,
  m.AwayTeam,
  m.FTHG,
  m.FTAG,
  m.FTR,
  x.Points,
  x.GD,
  TotalPoints = SUM(x.Points) OVER (),
  TotalGD     = SUM(x.GD) OVER ()
FROM [Games].[dbo].[Master] AS m
CROSS APPLY (
  SELECT
    Points = CASE
      WHEN m.FTR = 'D' THEN 1
      WHEN m.FTR = 'H' AND m.HomeTeam = 'Arsenal'
        OR m.FTR = 'A' AND m.AwayTeam = 'Arsenal' THEN 3
      ELSE 0
    END,
    GD = CASE m.HomeTeam
      WHEN 'Arsenal'
      THEN m.FTHG - m.FTAG
      ELSE m.FTAG - m.FTHG
    END
) AS x
WHERE (m.HomeTeam = 'Arsenal' OR m.AwayTeam = 'Arsenal') AND m.Date < '20121201'
ORDER BY m.Date DESC
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:27:59.683

您没有说明您使用的是什么版本的 SQL Server，但如果您使用的是 SQL Server 2008+，那么您应该能够使用[`GROUPING SETS`](http://msdn.microsoft.com/en-us/library/bb522495%28v=sql.105%29.aspx)获取汇总行来完成此操作：

```
;with cte as
(
  SELECT Date, 
    HomeTeam, 
    AwayTeam, 
    FTHG, 
    FTAG, 
    FTR, 
    CASE 
      WHEN HomeTeam = 'Arsenal' 
        THEN
          CASE FTR 
            WHEN 'H' THEN 3 
            WHEN 'D' THEN 1 
            WHEN 'A' THEN 0 
            ELSE 0 END
      WHEN AwayTeam = 'Arsenal' 
        THEN
          CASE FTR 
            WHEN 'H' THEN 0 
            WHEN 'D' THEN 1 
            WHEN 'A' 
            THEN 3 
            ELSE 0 END
      ELSE 0
    END AS Points, 
    CASE 
      WHEN HomeTeam = 'Arsenal' THEN FTHG - FTAG
      WHEN AwayTeam = 'Arsenal' THEN FTAG - FTHG
      ELSE 0
    END AS GD
  FROM [Games].[dbo].[Master] 
  WHERE (HomeTeam = 'Arsenal' OR AwayTeam = 'Arsenal') AND Date < '20121201'
)
select 
  coalesce(convert(char(10), date, 120), 'Total')date, 
  coalesce(hometeam, '') hometeam, 
  coalesce(awayteam , '') awayteam, 
  sum(fthg) fthg, 
  sum(ftag) ftag,
  coalesce(ftr, '') ftr,
  sum(points) points,
  sum(gd) gd
from cte
group by grouping sets((date, hometeam, awayteam, ftr), ()) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/50fc4/27)。

如果您运行的是 SQL Server 2005+，那么您还可以使用`ROLLUP()`：

```
;with cte as
(
  SELECT Date, 
    HomeTeam, 
    AwayTeam, 
    FTHG, 
    FTAG, 
    FTR, 
    CASE 
      WHEN HomeTeam = 'Arsenal' 
        THEN
          CASE FTR 
            WHEN 'H' THEN 3 
            WHEN 'D' THEN 1 
            WHEN 'A' THEN 0 
            ELSE 0 END
      WHEN AwayTeam = 'Arsenal' 
        THEN
          CASE FTR 
            WHEN 'H' THEN 0 
            WHEN 'D' THEN 1 
            WHEN 'A' 
            THEN 3 
            ELSE 0 END
      ELSE 0
    END AS Points, 
    CASE 
      WHEN HomeTeam = 'Arsenal' THEN FTHG - FTAG
      WHEN AwayTeam = 'Arsenal' THEN FTAG - FTHG
      ELSE 0
    END AS GD
  FROM games
  WHERE (HomeTeam = 'Arsenal' OR AwayTeam = 'Arsenal') AND Date < '20121201'
)
select 
  coalesce(convert(char(10), date, 120), 'Total')date, 
  coalesce(hometeam, '') hometeam, 
  coalesce(awayteam , '') awayteam, 
  sum(fthg) fthg, 
  sum(ftag) ftag,
  coalesce(ftr, '') ftr,
  sum(points) points,
  sum(gd) gd
from cte
group by rollup((date, hometeam, awayteam, ftr)) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/50fc4/29)

# java - Delphi 中的 fmShareDenyNone FileOpen 语句在 Java 中的等价物是什么？

> ID：15257217
> 
> 赞同：4
> 
> 时间：2013-03-06T20:21:45.970
> 
> 标签：java, delphi

您能否帮助评论一下 Delphi 中以下 fmShareDenyNone FileOpen 语句在 Java 中的等效项？

```
TFileStream.Create(
    'C:\Test.txt', fmOpenRead or fmShareDenyNone); 
```

, where`fmShareDenyNone`在 FileOpen 调用中与 fmOpenReadWrite、fmOpenRead 或 fmOpenWrite 之一一起用于打开文件，以便其他进程也可以读取/写入文件。

目前我正在使用以下语句打开文件进行写入。它给出“java.nio.file.FileSystemException: ... 该文件，因为它正被另一个进程使用。” 如果我打开第二个文件查看器，例如 UltraEdit。

```
BufferedWriter br = java.nio.file.Files.newBufferedWriter(
    java.nio.file.Paths.get("test.txt"), 
    java.nio.charset.Charset.forName("UTF-8"), 
    new java.nio.file.OpenOption[]{java.nio.file.StandardOpenOption.WRITE}
); 
```

PS：我希望有一个内置的等价物（自然是跨平台的）。

非常感谢您的意见！

# iphone - 十六进制 a 到二进制

> ID：15257218
> 
> 赞同：0
> 
> 时间：2013-03-06T20:21:48.130
> 
> 标签：iphone, objective-c, xcode, ipad, hex

我正在尝试将我的十六进制值转换为二进制值，但我面临的问题很小。因为我是新手，试图学习我的错误。

我的代码：

```
NSMutableString *str;
NSString *dd = @"192:168:1:2:0B:2:D:00";    
NSCharacterSet *donotwant1 = [NSCharacterSet characterSetWithCharactersInString:@":""];
dd =[[dd componentsSeparatedByCharactersInSet:donotwant1] componentsJoinedByString:@" "];
NSMutableArray *array = [[dd componentsSeparatedByString:@" "] mutableCopy];

[array removeObjectAtIndex:0];
//NSLog(@"%@",array);

for (int j=0; j<[array count]; j++) {
    NSScanner *scan = [NSScanner scannerWithString:[array objectAtIndex:j]];
    unsigned int i=0;

    if ([scan scanHexInt:&i]) {
        // NSLog(@"numbner is %ustr", i);
    }

    NSInteger theNumber = i;
    str = [NSMutableString string];
    for(NSInteger numberCopy = theNumber; numberCopy > 0; numberCopy >>= 1) {
        // Prepend "0" or "1", depending on the bit
        [str insertString:((numberCopy & 1) ? @"1" : @"0") atIndex:0];

        [array removeObjectAtIndex:j];
        [array  insertObject:str atIndex:j];
    }
}

NSLog(@"Binary version: %@", array); 
```

我越来越

1,1100,11001111,1111,1111,11101111......

在我的代码中 0 值被消除。我想要 8bits like(00000001,00001100 .....) 谁能告诉我原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:26:03.713

当达到最高有效位时，您的算法会停止转换。为什么不强制循环总是执行 8 次？

```
for (int numberCopy = theNumber, int i = 0; i < 8; numberCopy >>= 1, i++) {
    // loop body here
} 
```

顺便说一句，这是一种更简洁/更短/更简单的方法，它不涉及高度多余的复制，并且使用字符而不是字符串对象来实现超高效率（开玩笑，我完全反对微优化，但我觉得插入一个`NSString`before另一个是不必要的，尤其是在位数已知且恒定的情况下）。这也**假设 UTF-8**并利用十六进制和二进制表示具有非常好的关系这一事实，16 是 2 的 4 次方：

```
NSString *dd = @"01:0C:CF:0F:EF:AF:BD:00";

NSArray *bytes = [dd componentsSeparatedByString:@":"];

NSMutableArray *binaries = [NSMutableArray array];

NSString *lookup[256];
lookup['0'] = @"0000";
lookup['1'] = @"0001";
lookup['2'] = @"0010";
lookup['3'] = @"0011";
lookup['4'] = @"0100";
lookup['5'] = @"0101";
lookup['6'] = @"0110";
lookup['7'] = @"0111";
lookup['8'] = @"1000";
lookup['9'] = @"1001";
lookup['A'] = @"1010";
lookup['B'] = @"1011";
lookup['C'] = @"1100";
lookup['D'] = @"1101";
lookup['E'] = @"1110";
lookup['F'] = @"1111";

for (NSString *s in bytes) {
    unichar n1 = [s characterAtIndex:0];
    unichar n0 = [s characterAtIndex:1];
    [binaries addObject:[lookup[n1] stringByAppendingString:lookup[n0]]];
}

NSLog(@"%@", binaries); 
```

# json - 为什么 mongoexport 不能解析这个 JSON 而 mongo 可以？

> ID：15257220
> 
> 赞同：1
> 
> 时间：2013-03-06T20:21:53.023
> 
> 标签：json, mongodb, mongoexport

这是查询：

```
mongoexport --host our.dbhost.com --port 27017 --username peter -p clark --collection sent_mails --db dbname --query '{trigger_id:ObjectId( "50c62e97b9fe6a000200000c"), updated_at: {$lt : ISODate("2013-02-28"), $gte : ISODate("2013-02-01") }}' 
```

当我运行此命令时，我得到：

```
assertion: 10340 Failure parsing JSON string near: , updated_ 
```

有任何想法吗？（我想要与二月份更新的 trigger_id 匹配的所有记录。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:18:53.730

如本期所述：[Mongoexport using $gt and $lt constraints on a date range](https://stackoverflow.com/questions/14758605)，您必须在 mongoexport 中使用 Unix 时间戳进行日期查询

时间戳必须以毫秒为单位

在 bash shell 中调用它看起来像这样：

```
let "date_from=`date --utc --date "2013-02-01" +%s` * 1000"
let "date_to=`date --utc --date "2013-03-01" +%s` * 1000"
mongoexport -d test -c xx --query "{updated_at:{\$gte:new Date($date_from),\$lt:new Date($date_to)}}"> xx.json
> connected to: 127.0.0.1
> exported 1 records 
```

xx 集合包含：

```
> db.xx.find().pretty()
{
    "_id" : ObjectId("5158f670c2293fc7aadd811e"),
    "trigger_id" : ObjectId("50c62e97b9fe6a000200000c"),
    "updated_at" : ISODate("2013-02-11T00:00:00Z")
} 
```

# assembly - nasm 用 printf 显示一个 dword

> ID：15257224
> 
> 赞同：3
> 
> 时间：2013-03-06T20:22:03.613
> 
> 标签：assembly, x86, nasm

这是我的代码（test.asm）

预期“数字 = 1337”

输出：“数字 = 4199373”

问题：我该如何解决它。

意图：对汇编语言的好奇心，而不是作业。

```
; nasm -fwin32 test.asm
; gcc test.obj -o test
    extern _printf
    global _main

    section .text
_main:
    push num
    push msg
    call _printf
    add esp, 8
    ret

msg db 'num = %i', 0xa, 0
num dd 1337 
```

更改`push num` 为`push dword [num]`修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:45:22.507

`push num`推送`num`（类似于`push msg`）的地址，但不推送其中包含的值。

你需要`push dword [num]`。

# javascript - 类似于用于 Javascript Web 应用程序开发的 ASP.net 用户控件？

> ID：15257225
> 
> 赞同：1
> 
> 时间：2013-03-06T20:22:03.793
> 
> 标签：javascript, jquery, asp.net, knockout.js, project-management

我被指派研究一个似乎很容易在 ASP.net、WPF 或 Flash Builder 等平台上实现的 Javascript 解决方案（因为我可以创建单独的组件和控件）。

该项目需要多种类型的文件选择类机制，用于每种独特类型的相关数据，其中许多都需要类自动完成功能、导航类文件层次结构和分页。还有多个选项卡用于管理复杂对象的不同相关数据。

此外，用户必须能够在同一页面上保存和检索所有工作。

这样的要求在一页中需要大量的标记和事件处理代码，这很容易导致超过 1000 多行代码，即使使用 jQuery 和 knockout.js 也是如此。（涉水和维护变得非常乏味。）有没有办法用 HTML 和 JavaScript 创建单独的“页面”，然后在主 HTML 页面上嵌入/引用它们？

这样一个要求如此复杂的项目更适合 Flash Builder 或 Silverlight，还是我们应该坚持使用 Javascript 和 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:00:53.433

我强烈推荐YUI3

YUI3 包含许多功能和小部件，如日历、自动完成、多种类型的数据表（网格）、模板渲染、Ajax 调用（同步和异步）、事件处理程序、面板、手风琴、TabView、路由器等...

看看下面的网址。

[YUI3](http://yuilibrary.com/yui/docs/guides/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:30:29.137

看起来您正在构建单页应用程序。

我建议研究 AngularJS。它允许您包含 HTML 模板并将控制器绑定到它们。

# google-apps-script - Google 电子表格：查找有条件格式的颜色并复制行

> ID：15257229
> 
> 赞同：0
> 
> 时间：2013-03-06T20:22:13.543
> 
> 标签：google-apps-script, google-sheets

我使用文档电子表格来管理项目。每行代表一个任务，日期包含在根据日期接近度有条件地格式化的单个单元格中。

我想搜索该颜色并将出现该彩色单元格的任何行复制到新页面上的一行。

例如。如果今天 = 红色和明天 = 绿色，我希望能够将今天发生的所有任务拉到不同的页面。

这里的任何帮助都会很棒。我很感激这可能是不可能的：<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:47:07.660

这很容易，在这个论坛上搜索应该会给你一些例子......无论如何，这是一种获得它的方法，我选择绿色来测试......你可以轻松更改/组合更多颜色。

```
function copyGreenRows() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = ss.getActiveSheet();
  var colors = sh.getDataRange().getBackgrounds();// get the colors
  var data =  sh.getDataRange().getValues(); // get corresponding data
  var datatoCopy = [];
  Logger.log(colors);
  for(var c in colors){
  var rowcolors = colors[c].toString();
    if(rowcolors.indexOf('#00ff00')!=-1){ // check if this color is in this row
      datatoCopy.push(data[c]);// if so, copy the data to an array
      }
      }
var newsheet = ss.insertSheet().getRange(1,1,datatoCopy.length,datatoCopy[0].length).setValues(datatoCopy);// bulk write to the new sheet
} 
```

**注意：** *要查看主工作表中的颜色，请查看显示脚本中使用的所有单元格颜色代码的记录器。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:24:38.523

尽管我同意上面的帖子，但您执行的工作比您需要的要多，因为数据已经是一个数组。相反，只需将它们从您使用“getValues()”时创建的“数据”数组中删除即可。这应该可以为您节省一些时间，因为您不会创建不需要的数组。

```
function copyGreenRows() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = ss.getActiveSheet();
  var colors = sh.getDataRange().getBackgrounds();// get the colors
  var data =  sh.getDataRange().getValues(); // get corresponding data
  Logger.log(colors);
  for(c=0 ; c< data.length; ++c){
  var rowcolors = colors[c].toString();
    if(rowcolors.indexOf('#00ff00') !=-1){ // check if this color is not present
     continue; //if it is  the color we want move along
      }
else
{
 data.splice(c,1); //Remove it from our array
}
    }
var newsheet = ss.insertSheet().getRange(1,1,data.length,data[0].length).setValues(data);
// bulk write to the new sheet
} 
```

# python - 在分配数据值时避免 for 循环

> ID：15257233
> 
> 赞同：1
> 
> 时间：2013-03-06T20:22:21.610
> 
> 标签：python, numpy

所以这是我之前问题的一个小后续问题：[在多边形内部生成坐标](https://stackoverflow.com/questions/15226755/generate-coordinates-inside-polygon)和我的答案[https://stackoverflow.com/a/15243767/1740928](https://stackoverflow.com/a/15243767/1740928) 事实上，我想将多边形数据合并到常规网格中。因此，我计算了多边形内的几个坐标，并将它们的纬度/经度组合转换为它们各自的网格列/行组合。

目前，行/列信息存储在一个numpy数组中，其行数对应于数据多边形的数量，其列数对应于多边形中的坐标。

整个代码不到一秒钟，但这段代码是目前的瓶颈（大约 7 秒）：

```
for ii in np.arange(len(data)):
    for cc in np.arange(data_lats.shape[1]):
        final_grid[        row[ii,cc], col[ii,cc] ] += data[ii]
        final_grid_counts[ row[ii,cc], col[ii,cc] ] += 1 
```

数组“data”只包含每个多边形（80000）的数据值。数组“row”和“col”包含多边形中坐标的行号和列号（形状：（80000,16））。如您所见，我正在汇总每个网格单元格中的所有数据值并计算匹配数。因此，我知道每个网格单元的平均值，以防不同的多边形相交。不过，这两个 for 循环怎么会花费大约 7 秒呢？你能想出更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:48:50.360

我认为 numpy 应该添加一个 nd-bincount 函数，我有一个来自我前一段时间正在从事的项目的一个项目。

```
import numpy as np

def two_d_bincount(row, col, weights=None, shape=None):
    if shape is None:
        shape = (row.max() + 1, col.max() + 1)
    row = np.asarray(row, 'int')
    col = np.asarray(col, 'int')

    x = np.ravel_multi_index([row, col], shape)
    out = np.bincount(x, weights, minlength=np.prod(shape))
    return out.reshape(shape)

weights = np.column_stack([data] * row.shape[1])
final_grid = two_d_bincount(row.ravel(), col.ravel(), weights.ravel())
final_grid_counts = two_d_bincount(row.ravel(), col.ravel()) 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:47:32.163

我可能不完全理解不同网格的形状，但您可以`cc`使用以下方法消除循环：

```
final_grid = np.empty((nrows,ncols))
for ii in xrange(len(data)):
    final_grid[row[ii,:],col[ii,:]] = data[ii] 
```

这当然假设`final_grid`没有其他信息开始（您递增的计数从零开始）。而且我不确定如何测试它是否有效，不了解您的`row`和`col`数组的工作方式。

# ruby-on-rails - 无法在 RoR 中获取 json 数据

> ID：15257234
> 
> 赞同：0
> 
> 时间：2013-03-06T20:22:38.443
> 
> 标签：ruby-on-rails, ajax, json, ruby-on-rails-3, get

这是我认为我正在向方法发出 ajax get 请求的代码`campaign_creation`

```
$(document).ready(function(){
    $("#submit").click(function(){
        $.get("/configure_campaign/campaign_creation",{category_name: $("#category_name").val()}, function(data){

            $("#category_name").val('');
            $("#form_add_category").css("display","none");
            alert(data.category_name)

        })
    })
}) 
```

这是我的方法代码

```
def campaign_creation
    if(params[:page_id] and params[:page_access_token])

        abcd=params[:page_id].split("_")
        session[:page_id]=abcd[0]
        session[:page_access_token] = params[:page_access_token]

    else

        category=Category.new
        category.category_name=params[:category_name]
        category.page_id=session[:page_id]
        category.save
        @category=Category.find(1)
        @category.to_json

    end
end 
```

我想我应该能够访问`@category`我的可变数据。如果我只是将数据放在我的警报框中，我会得到页面的完整代码，如果`data.category_name`我得到未定义的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:33:52.633

仅从您为操作提供的代码来看，您不会呈现 JSON 响应。您的`campaign_creation`方法将尝试查找`campaign_creation.html.erb`文件并呈现`text/html`响应。

相反，您需要明确告诉 Rails 呈现 JSON 数据以及操作结束并停止处理。

```
render json: @category and return 
```

**现在**，您可以期望`data`Ajax 响应中的变量可以访问`@campaign`'s`:category_name`属性。

# websphere - 在 MQ 中创建非持久订阅者

> ID：15257236
> 
> 赞同：1
> 
> 时间：2013-03-06T20:22:52.293
> 
> 标签：websphere, ibm-mq, publish-subscribe

我正在尝试使用“目标名称”作为本地队列名称创建新订阅者，但为此我需要非持久订阅者。

在 MQ 中创建新订阅者时，使用 MQSC 或 MQ-Explorer，如何使其不耐用？

有没有办法在它被创建后改变它（alter）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:56:01.403

只要创建它们的应用程序处于活动状态，非持久订阅就处于活动状态。一旦应用程序结束或应用程序关闭与队列管理器的连接，这些订阅就会被删除。这意味着只能使用 MQSUB（C 语言）或 Java/C# 中的等效方法以编程方式创建非持久订阅。

不能使用 MQSC 或 MQExplorer 创建非持久订阅。您可以使用 MQSC/MQExplorer 创建持久订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T08:18:18.020

仅当订阅应用程序与队列管理器的连接保持打开时，非持久订阅才存在。当订阅应用程序故意或由于失去连接而与队列管理器断开连接时，订阅将被删除。`DISPLAY SBSTATUS`当连接关闭时，有关订阅的信息将从队列管理器中删除，并且如果您使用该命令显示订阅，则将不再显示。不会有更多消息被放入订阅者队列。

有关更多信息，请参阅[订阅持久性](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.amqnar.doc/ps22060_.htm)

# ruby-on-rails - 为关联表添加 JOIN

> ID：15257237
> 
> 赞同：0
> 
> 时间：2013-03-06T20:22:52.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我的**组织**类看起来像这样：

```
has_many Students 
```

我的**学生**课程如下所示：

```
has_many Klasses
belongs_to Organization 
```

我的**Klass**课程如下所示：

```
some field named : price
scope :top_expensive_classes, joins(:students).order('price DESC')
belongs_to Student 
```

我的查询如下所示：

```
@results = Klass.top_expensive_classes.where(organization_id: params[:id]).limit(RESULT_SET_COUNT) 
```

请注意，它以 Klass 开头，所以这就是问题所在，因为我在 where 类中搜索 organization_id 但它不在 Klass 中，它在 Student 类中，所以我应该在某处引入一个连接来解决这个问题但不能想办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:26:31.850

我认为真正的问题是您的关联可能不正确。

*   一个学生有很多课
*   一个班有很多学生

但你所拥有的是

*   一个学生有很多课
*   一个班级属于一个学生

这并没有真正的意义（至少在我见过的任何情况下课堂和学生互动）。您应该在 和 之间创建多对多关系而不是一对多`Klass`关系`Student`。

```
class Student < ActiveRecord::Base
  has_many :klasses, through: :student_klasses
  has_many :student_klasses
end

class Klass < ActiveRecord::Base
  has_many :students, through: :student_klasses
  has_many :student_klasses
end

class StudentKlass < ActiveRecord::Base
  belongs_to :student
  belongs_to :klass
end 
```

`.joins`一旦你有了这些正确的关联，你需要`:students`从`Klass`类中调用关联。您可以在没有范围的情况下进行操作。

```
Klass.joins(:students).where("students.organization_id = ?", params[:id]).order('price DESC').limit(RESULT_SET_COUNT) 
```

阅读有关 ActiveRecord 查询[的指南。](http://guides.rubyonrails.org/active_record_querying.html#joining-a-single-association)

* * *

这是关联的顺序**无关紧要**的证明*（使用上面的确切模型定义）*。

 **```
irb(main):001:0> s = Student.create(name: "Deefour")
  SQL (3.6ms)  INSERT INTO "students" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 08 Mar 2013 01:33:32 UTC +00:00], ["name", "Deefour"], ["updated_at", Fri, 08 Mar 2013 01:33:32 UTC +00:00]]
=> #<Student id: 1, name: "Deefour", created_at: "2013-03-08 01:33:32", updated_at: "2013-03-08 01:33:32">
irb(main):002:0> kk = []
=> []

irb(main):003:0> kk << Klass.create(title: "Klass 1")
  SQL (0.3ms)  INSERT INTO "klasses" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 08 Mar 2013 01:34:06 UTC +00:00], ["title", "Klass 1"], ["updated_at", Fri, 08 Mar 2013 01:34:06 UTC +00:00]]
=> [#<Klass id: 1, title: "Klass 1", created_at: "2013-03-08 01:34:06", updated_at: "2013-03-08 01:34:06">]

irb(main):004:0> kk << Klass.create(title: "Klass 2")
  SQL (0.3ms)  INSERT INTO "klasses" ("created_at", "title", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 08 Mar 2013 01:34:14 UTC +00:00], ["title", "Klass 2"], ["updated_at", Fri, 08 Mar 2013 01:34:14 UTC +00:00]]
=> [#<Klass id: 1, title: "Klass 1", created_at: "2013-03-08 01:34:06", updated_at: "2013-03-08 01:34:06">, #<Klass id: 2, title: "Klass 2", created_at: "2013-03-08 01:34:14", updated_at: "2013-03-08 01:34:14">]

irb(main):005:0> s.klasses = kk
  Klass Load (0.1ms)  SELECT "klasses".* FROM "klasses" INNER JOIN "student_klasses" ON "klasses"."id" = "student_klasses"."klass_id" WHERE "student_klasses"."student_id" = ?  [["student_id", 1]]
  SQL (0.4ms)  INSERT INTO "student_klasses" ("created_at", "klass_id", "student_id", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Fri, 08 Mar 2013 01:34:29 UTC +00:00], ["klass_id", 1], ["student_id", 1], ["updated_at", Fri, 08 Mar 2013 01:34:29 UTC +00:00]]
  SQL (0.1ms)  INSERT INTO "student_klasses" ("created_at", "klass_id", "student_id", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Fri, 08 Mar 2013 01:34:29 UTC +00:00], ["klass_id", 2], ["student_id", 1], ["updated_at", Fri, 08 Mar 2013 01:34:29 UTC +00:00]]
=> [#<Klass id: 1, title: "Klass 1", created_at: "2013-03-08 01:34:06", updated_at: "2013-03-08 01:34:06">, #<Klass id: 2, title: "Klass 2", created_at: "2013-03-08 01:34:14", updated_at: "2013-03-08 01:34:14">]

irb(main):006:0> Student.first.klasses.map(&:id)
  Student Load (0.2ms)  SELECT "students".* FROM "students" ORDER BY "students"."id" ASC LIMIT 1
  Klass Load (0.1ms)  SELECT "klasses".* FROM "klasses" INNER JOIN "student_klasses" ON "klasses"."id" = "student_klasses"."klass_id" WHERE "student_klasses"."student_id" = ?  [["student_id", 1]]
=> [1, 2] 
```**

# java - 如何在列表中使用 UniqueContraints ?

> ID：15257239
> 
> 赞同：0
> 
> 时间：2013-03-06T20:22:55.960
> 
> 标签：java, jakarta-ee, jpa

我的实体看起来像

```
@Entity

    @Table(uniqueConstraints = @UniqueConstraint(columnNames = {"id", "service_version_id"}))
    public class MarketVersion extends AbstractVersion<MarketVersion> {

        @ManyToOne(cascade = CascadeType.ALL)
        private Market market;

        @OneToOne
        private MarketVersion parentVersion;

        @OneToMany(cascade = CascadeType.MERGE)
        @JoinColumn(name = "services_id", referencedColumnName = "id")
        private List<ServiceVersion> services;
} 
```

和服务看起来像

```
public class ServiceVersion extends AbstractVersion<ServiceVersion> {

    @ManyToOne(cascade = CascadeType.ALL)
    private Service service;
    @OneToOne
    private ServiceVersion parentVersion;
    @Column
    private String description;
    @Column(nullable = false)
    @Enumerated(EnumType.STRING)
    private ServiceImplementations implementation;
} 
```

当我运行它时，我看到

```
[hibernatetool] javax.persistence.PersistenceException: [PersistenceUnit: market] Unable to configure EntityManagerFactory
[hibernatetool] org.hibernate.AnnotationException: Unable to create unique key constraint (id, service_version_id) on table MarketVersion: service_version_id not found 
```

我肯定是新手，我做的不对，但无法理解，请指教

我想要一个对唯一（market_version_id 和 service_version_id）有约束的新表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:31:16.157

您的约束中的列被命名`service_version_id`，而您的实体中的连接列被命名为您在列上加入`services_id`。您需要`service_version_id`在数据库中创建列或将约束列重命名为`services_id`取决于您要实现的目标。

# javascript - 我的 kml 图层正在显示，但它在左侧

> ID：15257241
> 
> 赞同：1
> 
> 时间：2013-03-06T20:23:04.860
> 
> 标签：javascript, google-maps, embed

我试图将我的地图添加到我的网站，到目前为止我得到它来显示我的地图，但它向左偏移了几公里

到目前为止，在左侧标记的工作正在进行中：http: [//www.decking.co.il/indexwip.html#](http://www.decking.co.il/indexwip.html#)

我的谷歌地图站点在正确的位置带有标记：http: [//goo.gl/maps/atvDH](http://goo.gl/maps/atvDH)

```
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false">
</script> <script type="text/javascript">
function initialize() {
var latlng = new google.maps.LatLng(32.147711,34.972229);
var myOptions = {
zoom: 9,
center: latlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
myOptions);
 var ctaLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms?authuser=0&vps=2&ie=UTF8&msa=0&output=kml&msid=211701918214336350936.0004be32c642b750948e4', 
{preserveViewport:true});  
ctaLayer.setMap(map); 
} 
```

请问有人能告诉我我做错了什么吗？我整天都在寻找解决方案，我是否混合了错误的命令？我在某个地方过度复杂了吗？我已经看到有一种方法可以简单地嵌入网页，但我不知道如何使嵌入出现在我正在使用的模板中为其提供的框中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:29:21.440

对我来说，它看起来并不“偏左”。看起来你有一个像[这里讨论](https://stackoverflow.com/questions/13962398/google-maps-api-v3-tools-visual-distortions)的那样的 css 冲突。

# asp.net-mvc - 如何在 Kendo UI asp.net mvc 网格编辑器中指定样式

> ID：15257247
> 
> 赞同：0
> 
> 时间：2013-03-06T20:23:32.220
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

我正在学习一些 Kendo UI 教程，但我的文本框在网格上的外观有问题。我正在关注的演示是[http](http://demos.kendoui.com/web/grid/editing-inline.html) ://demos.kendoui.c​​om/web/grid/editing-inline.html 。

我已经想出了如何在网格中格式化日期并在编辑器中使用日期选择器作为日期。为此，我使用了一个编辑器模板。

我已经为 name 列添加了一个编辑器模板，这样我就可以应用一个 css 类，它看起来更好，但它不能正常工作。当编辑器打开时，文本框中的值是空的（见图）。当然，必须有一种更简单的方法来应用 css 类。

我是否必须为网格中的所有文本框创建编辑器模板？如果是这样，我怎样才能让它在编辑时带来价值？

这是网格的代码：

```
@(Html.Kendo().Grid<Product>()    
.Name("Grid")    
.Columns(columns => {        
    columns.Bound(p => p.Name);
    columns.Bound(p => p.UnitPrice).Width(140);
    columns.Bound(p => p.Units).Width(140);
    columns.Bound(p => p.Discontinued).Width(100);
            columns.Bound(p => p.Date).Width(100).Format("{0:d/M/yyyy}");
    columns.Command(command => { command.Edit(); command.Destroy(); }).Width(200);
})
.ToolBar(toolbar => toolbar.Create())
.Editable(editable => editable.Mode(GridEditMode.InLine))
.Pageable()
.Sortable()
.Scrollable()
.DataSource(dataSource => dataSource        
    .Ajax()                 
    .Events(events => events.Error("error_handler"))
    .Model(model => model.Id(p => p.Id))
    .Create(update => update.Action("EditingInline_Create", "Home"))
    .Read(read => read.Action("EditingInline_Read", "Home"))
    .Update(update => update.Action("EditingInline_Update", "Grid"))
    .Destroy(update => update.Action("EditingInline_Destroy", "Grid"))
) 
```

)

这是名称编辑器模板的代码：

```
@using Kendo.Mvc.UI
@model KendoUiOne.Models.Product

@Html.TextBoxFor(x=>x.Name, new {@class = "k-input k-textbox"}) 
```

![编辑器打开](../Images/5264993c116143bd862ade9a362a5ccf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:04:57.173

问题是传递给编辑器模板的模型不是产品，而只是字符串。这意味着编辑器模板的模型是字符串。您应该将 TextBox 助手声明为模型本身。

编辑器模板应如下所示：

```
@model string

@Html.TextBoxFor(x=>x, new {@class = "k-input k-textbox"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:44:57.087

尝试：

```
@Html.TextBox("Name", Model.Name, new {@class = "k-input k-textbox"}) 
```

或者先尝试使用 HTML 来调试问题，然后恢复为 Html.TextBox 助手：

```
<input type="text" id="Name" value="@Model.Name" class="k-input k-textbox"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:14:17.840

有趣的是，尝试将小部件的名称设置为“名称”，而不是使用 TextBoxFor 助手。

例如

```
@Html.TextBox("Name", new {@class = "k-input k-textbox"}) 
```

# c# - UltraGridBand 的键是如何设置的？

> ID：15257250
> 
> 赞同：0
> 
> 时间：2013-03-06T20:23:38.257
> 
> 标签：c#, winforms, data-binding, infragistics, ultrawingrid

调用[SetDataBinding(object DataSource, string DataMember, bool hideNewColumns)](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGridBase~SetDataBinding%28Object,String,Boolean%29.html)时如何在[UltraGrid](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGrid.html)上设置[Key preoperty](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.2/CLR4.0/html/Infragistics4.Win.UltraWinGrid.v12.2~Infragistics.Win.UltraWinGrid.UltraGridColumn~Key.html)？我怎样才能将它设置为除此之外的东西？`List'1`

我有以下表格和课程：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.ultraGrid2.SetDataBinding(new List<row>(), string.Empty, true);
        this.ultraGrid2.DisplayLayout.ColumnChooserEnabled = DefaultableBoolean.True; 
        // breakpoint on the above line and run the below immediate window code
    }
}

public class row
{
    public string Name { get; set; }
    public string Address { get; set; }
} 
```

设置数据绑定后，下面的代码总是`List'1`在即时窗口中给我：

```
this.ultraGrid2.DisplayLayout.Bands[0].Key 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:35:41.847

在 UltraGridBand 对象上，有一个在数据绑定期间调用的私有方法，称为 InitBandKey，并且在此方法中设置了密钥。

其逻辑类似于以下内容：

```
CurrencyManager cm = (CurrencyManager)this.bindingManager;
if (cm.List is ITypedList) 
{
    newKey = ((ITypedList)cm.List).GetListName(null);
} 
else 
{
  newKey = cm.List.GetType().Name;
} 
```

在您的示例中，您得到的结果是`(new List<row>()).GetType().Name`

您可以定义一个派生自的类，`List<row>`然后该类的名称将成为乐队的关键。例如：

```
public class CustomList:List<row>
{

} 
```

然后，此示例对 SetDataBinding 的更新调用是：

```
this.ultraGrid1.SetDataBinding(new CustomList(), string.Empty, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:09:18.620

尝试`Key`在`Band[0]`设计时设置 。

通常 Band[x].Key 是绑定的 DataTable/DataView 的名称，但如果`List<T>`没有名称可以使用，这可能是由控件自动定义的

# perl - 检索动态哈希的密钥

> ID：15257252
> 
> 赞同：1
> 
> 时间：2013-03-06T20:23:45.790
> 
> 标签：perl

如何从动态哈希中检索“密钥”？

代码示例：

```
sub HASH($){
    my %hash;
    my $pass = shift;
    open (my $file, '<', "infofile") || die "No such file or dir\n";
    %hash=map split, <$file>;
    return $hash{$pass};
} 
```

我的信息文件如下所示：

```
user   passwd
raid   12345 
```

如果找到用户，代码将返回密码。我怎样才能只返回用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:46:04.130

```
sub HASH($){
 my %hash;
 my $pass = shift;
 open (my $file, '<', "infofile") || die "No such file or dir\n";
 %hash=map split, <$file>;
 my ($user,$selecteduser);
  foreach $user (keys %hash){
   $selecteduser = $user if $hash{$user} eq $pass;
  }
 return $selecteduser;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:41:04.130

如果您添加（出于调试目的）哈希的打印，

```
open (my $file, '<', "infofile") || die "No such file or dir\n";
%hash=map split, <$file>;

for (keys %hash) {
  print "$_: $hash{$_}\n";
} 
```

你会看见：

```
raid: 12345
user: passwd 
```

因此，我会争辩说，您的变量`$pass`实际上是用户名，而 a`return $pass;`将返回用户名。我无法想象这是你想要的。另一方面，找到与给定密码对应的用户听起来也不太可能。

# javascript - 迭代拼接多个数组

> ID：15257253
> 
> 赞同：1
> 
> 时间：2013-03-06T20:23:48.557
> 
> 标签：javascript, arrays, splice

迭代拼接多个数组的最快方法是什么——不会对性能造成太大影响？我想它类似于下面的语法，但它并不完全有效。

我想做： Array1 - `remove[0]`， Array2 - `remove[1]`， Array3 - `remove[2]`...等等...

```
for (var i = 0; i < items.length; i++) {
    arr[i] = items.name;
    for(key in arr[i]) {
        var value = arr[i].splice(i, 1);
        console.log(value);
    }
} 
```

![在此处输入图像描述](../Images/3c417d79fa4222045ffcbb65a5dde769.png)

编辑（项目的定义）：

![在此处输入图像描述](../Images/29311351edac0521d2a1f72f41e04dfc.png)

期望的结果（分别删除了第 1、第 2、第 3 项的 3 个数组：

```
[array0]
  [0] United Kingdom
  [1] United States

[array1]
  [0] Canada 
  [1] United States

[array2]
  [0] Canada
  [1] United Kingdom 
```

EDIT2 - 如果您查看以下比较，您可以看到我们是否使用 for 循环将传入的数组推送到组中，结果与 Corey 提供的解决方案相同，但如果我们在这两个上运行拼接方法 -结果非常不同，示例 2 正确拼接 - 示例 1 完全拼接，这就是我感到困惑的地方：

（项目以以下形式出现：）

```
["Canada", "United Kingdom", "United States"] 
["Canada", "United Kingdom", "United States"] 
["Canada", "United Kingdom", "United States"] 

var group = [];

for (var i = 0; i < items.length; i++) {
    group.push(items.name);
}

/*for (var i = 0; i < group.length; i++) {
   group[i].splice(i, 1);
}*/

console.log(group);

var arr1 = ["One", "Two", "Three"];
var arr2 = ["One", "Two", "Three"];
var arr3 = ["One", "Two", "Three"];

var test = [arr1, arr2, arr3];

/*for (var i = 0; i < test.length; i++) {
   test[i].splice(i, 1);
}*/

console.log(test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:32:16.577

如果您的所有数组都在另一个“分组”数组中，您可以遍历该组并将索引用作拼接计数器。就像是：

```
var arr1 = ["One", "Two", "Three"];
var arr2 = ["One", "Two", "Three"];
var arr3 = ["One", "Two", "Three"];

var group = [arr1, arr2, arr3];

for (var i = 0; i<group.length; i++) {
   group[i].splice(i,1);
}

console.log(group);
// Logs: ["Two", "Three"], ["One", "Three"], ["One", "Two"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:29:58.443

如果您不介意使用第三方库，最简单的方法是使用 Underscore.js。我不清楚您是否要选择性地拼接，或者您是否只是想创建一个数组，它是其他数组的联合，或者具有唯一值，或者什么。但他们对所有这些事情都有操作：

[http://underscorejs.org/#union](http://underscorejs.org/#union)

如果您不想将它们带入，那么只需查看 hte 源代码，看看他们是如何做到的。

# matlab - Matlabs 对任何和所有具有空向量的评估给出不同的答案

> ID：15257260
> 
> 赞同：4
> 
> 时间：2013-03-06T20:24:13.180
> 
> 标签：matlab

Any and all on a empty 应该给出相同的答案。然而在这里他们给出了不同的答案，所有的和空的都是真的。谁能解释 matlabs 的这种行为（在 2010a->2012b 版本上测试）。

> >> 任何（[]）
> 
> 答案=
> 
> ```
>  0 
> ```

但

> >> 所有（[]）
> 
> 答案=
> 
> ```
>  1 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:28:33.223

此行为已明确记录：

*   来自[http://www.mathworks.co.uk/help/matlab/ref/any.html](http://www.mathworks.co.uk/help/matlab/ref/any.html)：

    > 如果`A`为空，则`any(A)`返回逻辑`0`( `false`)。

*   来自[http://www.mathworks.co.uk/help/matlab/ref/all.html](http://www.mathworks.co.uk/help/matlab/ref/all.html)：

    > 如果`A`为空，则`all(A)`返回逻辑`1`( `true`)。

我想 的行为`all`有点违反直觉。猜测一下，我会说目的是为了保持以下等价性，以实现对称性：

```
~all(A) == any(~A) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:13:10.497

`any`并且`all`在空数组上绝对不应该给出相同的答案 - MATLAB 的行为既记录在案又是正确的。

`any(A)`意思是“存在一个`A`真实的元素”，换句话说

```
∃x∈A x 为真
```

由于 中没有元素`A`，因此它正确返回`false`。

`all(A)`意思是“对于 中的所有元素`A`，该元素为真”，换句话说

```
∀x∈A x 为真
```

也许这不太直观，但由于 中没有元素`A`，因此该句子为真 - 并且 MATLAB 正确返回`true`。任何关于一阶逻辑的教科书都会证实这一点。

如果您想要 MATLAB 的行为确实看起来确实错误并且与上述情况相矛盾的情况，请尝试

```
>> if [] disp('hello'); else disp('bye'); end
bye 
```

在所有其他情况下，`if X`当`true`的所有元素`X`都为真时。但是当`X`is时`[]`，`if`表现不同。这也有记录。

# session - CakePHP 2.x 会话在本地开发和生产之间的行为不一致

> ID：15257265
> 
> 赞同：1
> 
> 时间：2013-03-06T20:24:36.503
> 
> 标签：session, cakephp, login, cakephp-2.0, cakephp-2.3

我有一个我正在处理的 CakePHP 2.x 站点，该站点按预期在本地运行。登录有效，会话闪存消息有效，等等。当我将代码推送到我的登台/生产服务器时，它正在中断。

登录不再起作用，没有会话闪烁消息出现，一些应该重定向到 /user/login 的控制器操作没有显示任何内容（空文档）等。

我不知道会出现什么问题。根据我遇到的问题和我所做的一些搜索，我相信我已经排除了关闭`?>`纯代码 PHP 文件（控制器）后出现的空格等问题。我正在使用数据库会话，并且我看到在本地实例的数据库中创建了会话记录，但在远程登台/生产实例上却没有。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:12:29.197

在你的 app/Config/core.php 中检查这些东西。

1.  如果您使用**基于 SSL 和非 SSL 的协议**，请确保将 cookie_secure 设置为 false。

    ```
    Configure::write('Session', array(
       'defaults' => 'php',
       'ini' => array(
           'session.cookie_secure' => false
       )
    )); 
    ```

2.  尝试将 Session 的配置从 php defaults 更改为 cake 或 db as

    ```
    Configure::write('Session', array(
        'defaults' => 'php', // change 'php' to 'cake' or 'database'
        'cookie' => 'my_app',
        'timeout' => 4320 //3 days
    )); 
    ```

3.  还尝试将**Session.checkAgent**设置为 false，仅一次以确保它是否是浏览器问题。

4.  尝试更改会话的**Session.name**，默认为“CAKEPHP”

    ```
    Configure::write('Session', array(
        'name' => 'New-Session-name'
        'defaults' => 'php', // change 'php' to 'cake' or 'database'
        'cookie' => 'my_app',
        'timeout' => 4320 //3 days
    )); 
    ```

5.  从 /app/tmp 的所有子目录中删除所有缓存文件

6.  将调试级别设置为 1，以进行缓存刷新。如果您仍然没有看到错误，请尝试在 php.ini 中将 error_reporting 设置为 true。（虽然，这个很明显，我仍然指出它，以防你可能错过了它）

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:01:10.467

我经常遇到的建议之一是确保在纯代码文件中的结束 PHP 标记之后没有空格（或者最好实际上没有结束 PHP 标记）。检查我所有的文件表明情况确实如此。然而，不知何故，我设法在打开 PHP 标记之前放置了一个换行符`AppController.php`，这就是问题所在。我向任何在这件事上浪费时间的人道歉。我只是希望这对将来笨拙地犯同样错误的人有所帮助。

# model - Emberjs 多对一单向关系

> ID：15257266
> 
> 赞同：0
> 
> 时间：2013-03-06T20:24:49.220
> 
> 标签：model, ember.js, relationship, ember-data

Emberjs 是否支持单向关系？考虑一下我想用三个模型存储有关食谱的信息：

*   `Ingredient`
    *   一直存在。给出一个`name`和`description`。
    *   没有任何东西“拥有”一种成分，它们也不应该在新的引用上被复制，或者在引用被破坏时被破坏。他们**只是**。
*   `IngredientAddition`
    *   由一个`Ingredient`和信息何时/谁添加成分和数量组成
    *   许多`IngredientAddition`物品可以使用相同的成分。
*   `Recipe`
    *   由许多`IngredientAddition`对象和辅助信息组成。

据我了解，我的模型如下所示：

```
App.Ingredient = DS.Model.extend({
  name: DS.attr('string'),
  desc: DS.attr('string'),
});
App.IngredientAddition = DS.Model.extend({
  how:  DS.attr('string'),
  qty:  DS.attr('string'),
  recipe: DS.belongsTo('App.Recipe'),
});
App.Recipe = DS.Model.extend({
  desc: DS.attr('string'),
  ingredients: DS.hasMany('App.IngredientAddition'),
}); 
```

`IngredientAddition`但是，这并没有捕捉到和之间的关系`Ingredient`。`DS.hasMany`似乎不合适，因为每个 IngredientAddition 都只有一个`Ingredient`. `DS.belongsTo`是不合适的，因为`Ingredient`生命周期不是由`IngredientAddition`.

我如何捕捉这些信息？我查看了源代码，除了and`ember-data`之外找不到任何关系类型。`hasMany``belongsTo`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:49:38.530

我想你想建立`belongsTo`关系`IngredientAddition`。

```
App.IngredientAddition = DS.Model.extend({
  how:  DS.attr('string'),
  qty:  DS.attr('string'),
  ingredient: DS.belongsTo('App.Ingredient'),
  recipe: DS.belongsTo('App.Recipe'),
}); 
```

这样，`IngredientAddition`就有一个`ingredient_id`指向相关的底层`Ingredient`。`Ingredient`“拥有” an的语义`IngredientAddition`很奇怪，但这是产生您所描述的关系的方式。

# javascript - Javascript 书签无响应

> ID：15257269
> 
> 赞同：1
> 
> 时间：2013-03-06T20:25:01.263
> 
> 标签：javascript, regex, bookmarklet

Javascript新手在这里。创建一个小书签来自动化工作中的简单任务。主要是学习练习。它将扫描 CNN.com 上的成绩单，例如：( [http://transcripts.cnn.com/TRANSCRIPTS/1302/28/acd.01.html](http://transcripts.cnn.com/TRANSCRIPTS/1302/28/acd.01.html) )。它将抓取页面顶部的主要故事、节目嘉宾的姓名和头衔，并对其进行格式化，以便可以将它们复制粘贴到另一个文档中。

我想出了一个简单的版本，其中包括一些 jQuery，它可以抓取副标题，然后使用正则表达式来查找客人的姓名（它还将排除 (begin videoclip) 和 (end videoclip) 之间的所有内容，但我没有还没有走那么远。然后它会提醒他们（最终会在弹出窗口中打印它们，警报只是用于故障排除目的）。

我正在使用[http://benalman.com/code/test/jquery-run-code-bookmarklet/](http://benalman.com/code/test/jquery-run-code-bookmarklet/)创建书签。我的问题是，一旦创建了小书签，它就完全没有响应。单击它，没有任何反应。我试过先最小化代码，但没有结果。我的猜测是 cnn.com 的 javascript 与我的冲突，但我不知道如何解决这个问题。还是我需要包含一些代码来加载和存储当前页面上的文本？这是代码（我已经包含了注释，但是当我使用书签生成器时，我把它们去掉了。）感谢您的帮助！

```
//Grabs the subheading
var leadStories=$(".cnnTransSubHead").text();
//Scans the webpage for guest name and title.  Includes a regular expression to find any
//string that starts with a capital letter, includes a comma, and ends in a colon.  
var scanForGuests=/[A-Z ].+,[A-Z0-9 ].+:/g;
//Joins the array created by scanForGuests with a semicolon instead of a comma
var guests=scanForGuests.join(‘; ‘);
//Creates an alert in the proper format including stories and guests.
alert(“Lead Stories: “ + leadStories + “. ” + guests + “. SEE TRANSCRIPT FIELD FOR FULL TRANSCRIPT.“) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:04:07.723

转到页面。打开开发人员工具（chrome 中的 ctrl+shift+j）并将代码粘贴到控制台中以查看问题所在。

* * *

`$`in来自 jQuery，并且提供的`var leadStories = $(".cnnTransSubHead").text();`链接没有将 jQuery 加载到页面中。

在任何现代浏览器上，您应该能够在没有 jQuery 的情况下获得相同的结果：

```
 var leadStories = document.getElementsByClassName('cnnTransSubHead')
     .map(function(el) { return el.innerText } ); 
```

接下来我们有：

```
var scanForGuests=/[A-Z ].+,[A-Z0-9 ].+:/g;
var guests=scanForGuests.join('; '); 
```

scanForGuests 是一个正则表达式，你从来没有真正将它与任何东西匹配 - 所以`.join()`会抛出一个错误。我不确定您要做什么。您是否尝试扫描页面的全文以查找该正则表达式？在那种情况下，这样的事情将是你最好的选择

```
document.body.innerText.match(scanForGuests); 
```

请记住，虽然`innerText`删除了 html 标记，但它远非完美，其中弹出的内容很大程度上取决于页面的 html 结构。也就是说，在我的快速测试中，它似乎有效。

最后，对于这样的事情，您应该使用[立即调用的函数](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，或者将所有变量粘贴到全局上下文中。

所以把它们放在一起你会得到这样的东西：

```
(function() {
     var leadStories = document.getElementsByClassName('cnnTransSubHead')
         .map(function(el) { return el.innerText } );
    var scanForGuests=/[A-Z ].+,[A-Z0-9 ].+:/g;
    var guests = document.body.innerText.match(scanForGuests).join("; ");
    alert("Leads: " + leadStories + " Guests: " + guests);
})(); 
```

# wpf - 鼠标下直接LogicalTree控件没有VisualTree

> ID：15257270
> 
> 赞同：0
> 
> 时间：2013-03-06T20:25:04.240
> 
> 标签：wpf, mouse, mousedown, visualtreehelper, frameworkelement

这是一个 WPF 应用程序。

我试图直接在鼠标下方进行控制，事实证明这是一种令人惊讶的痛苦。

Mouse.DirectlyOver、InputHitTest 和 VisualTreeHelper.HitTest 都引用了 VISUAL 树。我试图抓住控制本身。

示例：如果我有一个 TextBox 并使用上述任何一个，它将返回一个 TextBoxView 而我想要 TextBox 本身。

这发生在 PreviewLeftButtonDown 事件中。Sender 不是一个选项，因为 Sender 对我来说始终是 ListViewItem。如果我检查 e.OriginalSource 它仍然是 VisualTree 元素而不是实际控件。

如果需要，很乐意进一步解释。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:31:37.087

您只需要沿着可视化树向上走，直到找到您想要的类型。这是一些代码的[链接。](http://www.codeproject.com/Tips/75816/Walk-up-the-Visual-Tree)

这是该链接中的代码

```
// walk up the visual tree to find object of type T, starting from initial object
public static T FindUpVisualTree<T>(DependencyObject initial) where T : DependencyObject
{
    DependencyObject current = initial;

    while (current != null && current.GetType() != typeof(T))
    {
         current = VisualTreeHelper.GetParent(current);
    }
    return current as T;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:59:40.237

向上走可视化树，直到找到`UIElement`：

```
public UIElement FindUIElement(DependencyObject visualTreeNode)
{
    UIElement elem;
    while ((elem = (visualTreeNode as UIElement)) != null)
        visualTreeNode = VisualTreeHelper.GetParent(visualTreeNode);
    return elem;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:53:13.907

我同意 mdm20 的唯一方法`Textbox`是遍历父级。事实上，[这里是几年前提出的同一个问题的链接，](http://social.msdn.microsoft.com/Forums/fi-FI/wpf/thread/efefef84-8139-4726-b174-44bdbe9326d1)答案相同。如果您想限制不必要的树遍历，那么您可以在点击 后停止搜索`ListViewItem`，因为高于该点的任何内容都不是您想要的。

但是，将最后一个链接和[这个链接一起](http://social.msdn.microsoft.com/Forums/en/wpf/thread/1ea114ff-1bb7-48c6-9cd6-04f1d1aa92a7)添加，在我看来，您实际上已经有了答案。如果`TextBoxView`返回 a，那么您就知道点击了一个文本框。您甚至可以缓存`TextBox`通过`HitTestFilterCallBack`潜在的传入，但这更多的是理论并且可能容易出错。但是，沿着这条路走下去，您可以测试`TextBox`通过过滤器的是否是`TextBoxView`

# python - 索引一个numpy数组的中间？

> ID：15257277
> 
> 赞同：18
> 
> 时间：2013-03-06T20:25:40.027
> 
> 标签：python, numpy

要索引 numpy 数组的中点，您可以这样做：

```
x = np.arange(10)
middle = x[len(x)/4:len(x)*3/4] 
```

是否有索引数组中间的简写？例如，`n`or`2n`元素接近`len(x)/2`? 有一个很好的n维版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:30:41.583

正如[cge](https://stackoverflow.com/users/599265/cge)所说，最简单的方法是将其转换为 lambda 函数，如下所示：

```
x = np.arange(10)
middle = lambda x: x[len(x)/4:len(x)*3/4] 
```

或者n维方式是：

```
middle = lambda x: x[[slice(np.floor(d/4.),np.ceil(3*d/4.)) for d in x.shape]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-11T10:19:05.637

迟到了，但对于遇到这个问题的其他人来说：一个更顺畅的方法是使用 numpy 的`take`或`put`.

要解决数组的中间问题，您可以使用`put`单个索引来索引 n 维数组。从数组中获取值也是如此`take`

假设您的数组具有奇数个元素，则数组的中间将是其大小的一半。通过使用整数除法（`//`而不是`/`），您不会在这里遇到任何问题。

```
import numpy as np

arr = np.array([[0, 1, 2],
                [3, 4, 5],
                [6, 7, 8]])

# put a value to the center 
np.put(arr, arr.size // 2, 999)
print(arr)

# take a value from the center
center = np.take(arr, arr.size // 2)
print(center) 
```

# sql - 按月分组数据

> ID：15257292
> 
> 赞同：0
> 
> 时间：2013-03-06T20:26:46.843
> 
> 标签：sql, sql-server, group-by

我想按 YEAR-MONTH 的销售结果分组。我当前的查询结果如下：

```
SELECT Cast(Year(s.datekey) AS VARCHAR(4)) + '-' 
       + Cast(Month(s.datekey) AS VARCHAR(2)) AS Mjesec, 
       e.employeekey, 
       Sum(s.totalcost)                       AS SalesAmount 
FROM   factsales s 
       INNER JOIN dimstore st 
               ON s.storekey = st.storekey 
       INNER JOIN dimemployee e 
               ON e.employeekey = st.storemanager 
WHERE  s.datekey BETWEEN '2007-01-01' AND '2007-01-05' 
GROUP  BY e.employeekey, 
          Cast(Year(s.datekey) AS VARCHAR(4)) + '-' 
          + Cast(Month(s.datekey) AS VARCHAR(2)) 
ORDER  BY employeekey 
```

我想知道是否还有其他更好、更优雅的方法来实现相同的结果？也许，C# 中 DateTime 的更友好格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:30:21.473

做：

```
SELECT CONVERT(CHAR(7),s.DateKey,120) AS Mjesec....
FROM ....
GROUP BY CONVERT(CHAR(7),s.DateKey,120)....
ORDER BY EmployeeKey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:35:45.570

通过使用日期数学来剥离时间比转换为字符串更有效。将特定的字符串格式保留到最后（或者更好的是，在 C# 中使用[`Format()`](http://msdn.microsoft.com/en-us/library/system.string.format%28v=vs.100%29.aspx)）也更有效。

```
;WITH c AS
(
  SELECT m = DATEADD(MONTH, DATEDIFF(MONTH, 0, s.datekey), 0),
   e.employeekey, s.totalcost
  FROM dbo.factsales AS s
  INNER JOIN dbo.dimstore AS st
  ON s.storekey = st.storekey
  INNER JOIN dimemployee AS e
  ON e.employeekey = st.storemanager
  WHERE s.datekey >= '20070101' AND s.datekey < '20070106'
),
d AS
(
  SELECT m, employeekey, SalesAmount = SUM(totalcost)
    FROM c
    GROUP BY m, employeekey
)
SELECT 
  Mjesec = CONVERT(CHAR(7), m, 120), 
  employeekey, 
  SalesAmount
FROM d
ORDER BY employeekey; 
```

如果您可以在您的应用程序中进行格式化，那么您可以将其折叠为：

```
;WITH c AS
(
  SELECT m = DATEADD(MONTH, DATEDIFF(MONTH, 0, s.datekey), 0),
   e.employeekey, s.totalcost
  FROM dbo.factsales AS s
  INNER JOIN dbo.dimstore AS st
  ON s.storekey = st.storekey
  INNER JOIN dimemployee AS e
  ON e.employeekey = st.storemanager
  WHERE s.datekey >= '20070101' AND s.datekey < '20070106'
)
SELECT Mjesec = m, employeekey, SalesAmount = SUM(totalcost)
  FROM c
  GROUP BY m, employeekey
  ORDER BY employeekey; 
```

甚至：

```
 SELECT Mjesec = DATEADD(MONTH, DATEDIFF(MONTH, 0, s.datekey), 0),
   e.employeekey, s.totalcost
  FROM dbo.factsales AS s
  INNER JOIN dbo.dimstore AS st
  ON s.storekey = st.storekey
  INNER JOIN dimemployee AS e
  ON e.employeekey = st.storemanager
  WHERE s.datekey >= '20070101' AND s.datekey < '20070106'
  GROUP BY DATEADD(MONTH, DATEDIFF(MONTH, s.datekey, 0), 0), e.employeekey
  ORDER BY employeekey; 
```

# xml - 是否允许多个 XML 默认命名空间？

> ID：15257299
> 
> 赞同：4
> 
> 时间：2013-03-06T20:27:07.950
> 
> 标签：xml, soap, namespaces

考虑以下 xml

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"  xmlns="mycompany.com.myservice">
<soap:Header>
<To xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://mycompany.com/myservice</To>
<Action xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">mycompany.com/myservice/dosomething</Action>
</soap:Header>
<soap:Body>
<mypayload>hello world</mypayload>
</soap:Body>
</soap:Envelope> 
```

使用多个无别名的默认命名空间是否有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:13:20.303

是的。

[规范](http://www.w3.org/TR/REC-xml-names/#defaulting)中涵盖了您有多个默认命名空间的情况：

> 默认命名空间声明的范围从它出现的开始标记的开头延伸到相应的结束标记的末尾，**不包括任何内部默认命名空间声明的范围**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:09:11.137

是的。

（这就是我要说的，但 StackOverflow 不喜欢简短的答案）。

# entity-framework - 如何在 Application_Start 期间访问 EF 到存储在 App_Data 文件夹中的 SQL Server Compact

> ID：15257300
> 
> 赞同：1
> 
> 时间：2013-03-06T20:27:15.747
> 
> 标签：entity-framework, permissions, sql-server-ce, odata

我有一个基本的 .NET 4 网站。它包含一个实体框架模型，该模型映射到我存储在`App_Data`文件夹中的 SQL Server Compact 数据库。

我已经向网站添加了 OData 服务并公开了实体并且一切正常，我可以发布到我的共享主机并读取/写入数据库而不会出现问题。

`Application_Start`但是，我想在（创建一个小型搜索索引）期间访问我的数据库中的数据。当我在应用程序生命周期的那个时刻创建实体框架上下文的实例时，它会引发一个异常，即它无权访问数据库。它在本地运行良好，只是当我发布到我的共享主机时出现问题。

通常我认为这只是一个直接的权限问题，但 OData 服务工作正常，因此必须使用与在`Application_Start`...中执行的代码不同的权限执行。

有没有人见过这个或有任何想法可能会发生什么？

```
System.UnauthorizedAccessException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
  at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
  at System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32 errorCode)
  at System.Data.SqlServerCe.UnmanagedLibraryHelper..ctor(String fileName)
  at System.Data.SqlServerCe.NativeMethodsHelper..ctor(String modulePath)
  at System.Data.SqlServerCe.NativeMethods.LoadValidLibrary(String modulePath)
  at System.Data.SqlServerCe.NativeMethods.LoadNativeBinariesFromPrivateFolder(String privateInstall)
  at System.Data.SqlServerCe.NativeMethods.LoadNativeBinaries()
  at System.Data.SqlServerCe.SqlCeConnection..ctor()
  at System.Data.SqlServerCe.SqlCeProviderFactory.CreateConnection()
  at System.Data.EntityClient.EntityConnection.GetStoreConnection(DbProviderFactory factory)
  at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
  at System.Data.EntityClient.EntityConnection..ctor(String connectionString)
  at System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString)
  at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
  at LDS.Model1Container..ctor() in *REMOVED*\LDS\Model1.Designer.cs:line 40
  at LDS.Global.BuildIndex() in *REMOVED*\LDS\Global.asax.cs:line 38 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:28:28.553

好的，我想我已经解决了。

当应用程序启动时，它在 NT AUTHORITY\NETWORK SERVICE 帐户下运行。

当一个正常的 web 请求进来时，它使用*\IUSR_*帐户执行。

在我的共享主机上，NETWORK SERVICE 帐户显然没有对 App_Data 文件夹的写入权限，但 IUSR 帐户有。

我认为这回答了为什么会出现问题的问题。

# unit-testing - 一次运行一个测试（顺序不重要）

> ID：15257301
> 
> 赞同：0
> 
> 时间：2013-03-06T20:27:24.363
> 
> 标签：unit-testing, xunit

如何让 xunit 测试运行程序为特定类一次运行一个测试？

顺序并不重要（所有测试都会改变当前的文化）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:08:46.407

我认为唯一简单的解决方案是使用`tearDown`方法来重置文化。

当前的文化是一个全局变量，全局变量始终是单元测试的一个问题。因此，您需要重新启动 VM 以将其重置为每次测试的默认值。虽然没有必要，因为它是线程本地的，如果您可以强制测试框架为每个单元测试跨越一个新线程，它也可以工作。但这都是黑魔法，它使单元测试变得更重。

作为替代方案，您可以重构代码以注入当前的文化持有者。在这种情况下，您可以在单元测试中模拟文化持有者，并通过一个简单的实现将文化保存在全局变量中。

# three.js - projectVector 结果不在 -1 和 1 之间（three.js）

> ID：15257305
> 
> 赞同：2
> 
> 时间：2013-03-06T20:27:29.557
> 
> 标签：three.js, webgl

注意：下面的代码使用 WestLangley 的修复程序进行了更新。

我尝试了几个从 3D 投影到 2D 的示例。但是，当我尝试使用 projectVector 时，结果不在 -1 和 1 之间，因此当我乘以窗口的宽度/高度时，我得到的数字非常大（比我的屏幕分辨率大得多）。希望我的问题很简单。我使用的是three.min.js r56，我的内部窗口尺寸为1366x418。

下面的代码为 3D 点 (1200,625,100) 生成投影 (x,y)：(-7.874704599380493,-13.403168320655823)。我知道我仍然需要将这个结果乘以窗口高度和宽度的一半，但是以像素为单位的结果 (x,y) 离屏幕很远。

```
<html>
<head>
<title>Test</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

<script type="text/javascript" src="three.min.js"></script>
</head>
<body>
<canvas id='container'></canvas>

<script>

    /// GLOBAL VARIABLES
    var camera, scene, renderer, container, projector;

    init();

    function toXYCoord (object) {
        var vector = projector.projectVector(object.position.clone(), camera);
        return vector;
    }

    /// INIT
    function init() {

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(  50, window.innerWidth / window.innerHeight, 0.1, 20000 );
        scene.add(camera);
        camera.position.set(0,-1500,1500);
        camera.lookAt(scene.position);
        camera.updateMatrixWorld();     ///////////////// THIS IS THE FIX
        projector = new THREE.Projector();

        // sphere   
        var sphere = new THREE.Mesh( new THREE.SphereGeometry( 200, 32, 16 ), new THREE.MeshBasicMaterial({ color: 0x000000 }) );
        sphere.position.set(1200,625,100);
        scene.add(sphere);

        container = document.getElementById('container');
        renderer = new THREE.WebGLRenderer( { canvas: container, antialias:true } );
        renderer.setSize( window.innerWidth, window.innerHeight );

        var testVector = toXYCoord(sphere);

        console.log(window.innerWidth + "x" + window.innerHeight);
        console.log("Got: (" + testVector.x + "," + testVector.y + ")");

        renderer.render( scene, camera );
    }

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:10:29.880

渲染器会为您执行一些通常在渲染循环中完成的计算。

They are not being done in your case because you have placed your single call to `render()` as the last line of your script.

You need to place the following line after `camera.lookAt()`:

```
camera.updateMatrixWorld(); 
```

Alternatively, you can move your

```
renderer.render( scene, camera ); 
```

call so it occurs before your call to your `toXYCoord()` function.

# c++ - 如何从一种配置中排除 CMake 目标？

> ID：15257307
> 
> 赞同：4
> 
> 时间：2013-03-06T20:27:37.577
> 
> 标签：c++, visual-c++, cmake

我最近向 CMake 项目添加了一个模块，该模块依赖于我仅针对发布 CRT 编译的库。在 CMakeLists.txt 中看起来像这样：

```
IF(WIN32)
    ADD_LIBRARY(mymodule MODULE ${MY_LIBRARY_FILES})
    TARGET_LINK_LIBRARIES(mymodule libVendor)
    INSTALL(TARGETS mymodule LIBRARY)
ENDIF(WIN32) 
```

如果我尝试使用调试设置在 MSVC 中编译此模块，则编译失败。所以我想要做的就是在调试配置中排除它被编译和安装。在发布配置中，它将照常使用。可以用 CMake 做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-29T14:39:22.633

您还可以做的是在特定配置中从默认构建中排除目标：

```
SET_TARGET_PROPERTIES(mymodule PROPERTIES EXCLUDE_FROM_DEFAULT_BUILD_DEBUG True) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T05:00:03.503

您不能有一个被排除在配置之外的目标，但是您可以有一个由于源代码的条件编译而为空（或几乎为空）的库。您可以使用 target_link_libraries 的“优化”和“调试”关键字以配置特定的方式链接到另一个库。

例如，在您的库源文件中，您可以执行以下操作：

```
#ifdef _DEBUG
// ... Debug code, possibly just a dummy function if necessary, goes here
#else
// ... Release code, the real deal, goes here
#endif 
```

然后，您*可以*通过使用 target_link_libraries 的“优化”关键字来指定仅链接到发布版本中的 libVendor，如下所示：

```
if(WIN32)
  add_library(mymodule ...)
  target_link_libraries(mymodule optimized libVendor)
  install(TARGETS mymodule LIBRARY)
endif() 
```

target_link_libraries[文档](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3atarget_link_libraries)解释了这些关键字的使用，还提到您可以定义 IMPORTED 目标以实现每个配置的效果。但是，为了定义 IMPORTED 目标，库文件必须已经构建，并且您必须指向它们。所以......条件编译可能是做你想做的最简单的方法。

# jquery - 主干模板和 Laravel 表单打开

> ID：15257308
> 
> 赞同：1
> 
> 时间：2013-03-06T20:27:42.103
> 
> 标签：jquery, backbone.js, requirejs, laravel

我只是想到了 Laravel`Form::open()`应该如何使用 Backbone 模板工作。我将创建一个 html 模板并让 text.js 获取内容并在页面上显示。由于我使用 jquery 将这个模板内容附加到页面中，这是一个表单。我很确定如果我放入`Form::open()`模板并稍后将其附加到页面将不起作用，因为 laravel 只读取它并渲染它。然后我有两个与主题相关的问题，以及 laravel 的骨干。

1.  我需要将表单硬编码到 html 模板中吗？以及安静的隐藏输入。我可以有一些代码示例来看看。

2.  如果我构建一个单页 Web 应用程序，由于我有 Backbone 的 html 模板，因此很少使用 laravel 的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:12:09.607

正确，Laravel 仅在 PHP 中的服务器端运行，因此使用 jQuery 注入的 html 将无法在表单打开时工作。因此需要将模板加载到页面中，或者使用 Grunt 或其他工具之一预编译它们。或者将它们放在页面上的脚本标签中。然后使用 underscorejs 用数据编译模板并注入。在这里，您可以通过从页面加载的其他地方获取值并注入到表单中，将 CSRF 令牌传递到 html 表单中。

# javascript - 如何在浏览器的另存为对话框中更改自动填充的文件名？

> ID：15257309
> 
> 赞同：3
> 
> 时间：2013-03-06T20:27:45.640
> 
> 标签：javascript, jquery, html, firefox, web

*封闭系统*的要求：Firefox，仅客户端代码，HTML、CSS 和 JavaScript/Jquery，但没有其他开源库。

需要保存一个完整的网页。内置功能很好用，除了我需要动态设置文件名。

目前，内置的另存为机制使用 html 标题属性填充文件名（在另存为对话框中）。

但是，我需要每次动态填充文件名。（即 File1、File2、File3）——换句话说，我需要通过一些代码在每次保存时设置文件名。

我如何利用浏览器或自己编写它来做到这一点？

谢谢你！

**编辑**

当单击另存为并立即更改标题时，是否有事件注意到？

最坏的情况，我可以实现自己的另存为对话框吗？

**编辑 2**
我看到可以在 IE document.execCommand('SaveAs',) 中调用另存为的命令，在 FF 中是否有等价物？如果我通过java脚本打开另存为对话框，我假设我会更改标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:58:37.133

你不能做这个。它不可编写脚本。文件对话框是浏览器挂钩的操作系统的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-20T23:22:25.140

也许在您保存文件名的数据库中使用自动增量（AI）字段可以解决问题。

1.  `<filename>`为您的数据库表中的文件名创建一个字段。
2.  将其定义为`Not Null (NN)`和作为`Auto Increment (AI)`- 这将在此字段中为每个新记录提供一个值作为运行编号。
3.  在您的 PHP 文件中，在保存之前，在 DB 表中创建一条新记录，然后将自动创建的字段拉出`<filename>`到一个变量 `<$newname>`中。
4.  使用 PHP 保存文件，`<$newname>` 后跟文件扩展名。

*   您提到这是一个封闭系统，但如果您可以设置本地 MySQL 服务器，那么这将起作用。（这也可能对那些碰巧不使用封闭系统的人有所帮助，呵呵……）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T12:36:35.083

尝试使用新的 html5 下载属性：

```
<a href="http://..." donwload="someFilename">Click here</a> 
```

如果在响应头中发送文件名，浏览器会更喜欢它。但如果不是，浏览器将使用下载属性中指定的文件名。

你甚至可以编写一个脚本来自动显示对话框：

```
//create a element
var a = document.createElement('a');
a.appendChild(document.createTextNode('Click here'));
a.href = 'http://some/url';
a.download = 'filename';

//Put filename in clipboard. If download filename is ignored, user can simply paste it
var aux = document.createElement('input');
aux.setAttribute('value', a.download);
document.body.appendChild(aux);
aux.select();
document.execCommand("copy");
document.body.removeChild(aux);

document.body.insertBefore(a, document.body.firstElementChild);
a.dispatchEvent(new MouseEvent('click'));
//Optionally you can remove the link as well (uncomment line bellow)
//document.body.removeChild(a); 
```

# bash - bash脚本中的多个条件变量

> ID：15257313
> 
> 赞同：1
> 
> 时间：2013-03-06T20:27:56.800
> 
> 标签：bash

我需要这样做：

```
if [ $X != "dogs" and "birds" and "dogs" ]
then
    echo "it's is a monkey"
fi 
```

使用 bash 脚本。如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:29:44.750

`&&`您需要将每个选项转换为单独的条件表达式，然后使用(AND) 运算符将它们连接在一起。

```
if [[ $X != dogs && $X != birds && $X != cats ]]; then
  echo "'$X' is not dogs or birds or cats.  It must be monkeys."
fi 
```

您也可以使用 single `[`...来执行此操作`]`，但是您必须为每个比较使用单独的集合并将 and 运算符移到它们之外：

```
if [ "$X" != dogs ] && [ "$X" != birds ] && [ "$X" != cats ]; then
   ...
fi 
```

请注意，您不需要在单字字符串`dogs`（如`$X`没有引号。

此外，不需要像`X`在 shell 脚本中那样使用大写的变量名；这最好保留给来自环境的变量，比如`$PATH`等等`$TERM`。

OR 的 shell 运算符版本是`||`，其工作方式相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:24:31.760

你甚至可以有不同的想法...

```
if ! [[ $X == dogs || $X == birds || $X == cats ]]; then
    echo "'$X' is not dogs or birds or cats... It could be monkeys."
fi 
```

作为思考：

> 它不是狗，也不是猫，也不是鸟

与思考不完全相同

> 它不是……狗或猫或鸟之一。

这使得方法`case`更加明显；好吧，我认为，在这种情况下，正确的做法是：

```
case $X in
    dogs )
        # There may be some part of code
        ;;
    birds )
        # There may be some other part
        ;;
    cats )
        # There is no need to be something at all...
       ;;          
    * )
       echo "'$X' is not dogs or birds or cats... It could be monkeys."
       ;;
esac 
```

或者如果真的不需要处理鸟、猫或狗的情况：

```
case $X in
    dogs|birds|cats ) ;;
    * )
       echo "'$X' is not dogs or birds or cats... It could be monkeys."
       ;;
esac 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T21:55:57.370

我能想到的在 Bash 中避免多次输入 $X 的唯一方法是使用 RegEx：

```
if [[ ! "$X" =~ (dogs|birds|cats) ]]; then
    echo "it's is a monkey"
fi 
```

同样，简而言之：

```
[[ ! "$X" =~ (dogs|birds|cats) ]] && echo "it's is a monkey" 
```

This is helpful when you have very long variables, and/or very short comparisons.

Remember to escape special characters.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:08:40.773

```
X=$1;
if [ "$X" != "dogs" -a "$X" != "birds" -a "$X" != "dogs" ]
then
    echo "it's is a monkey"
fi 
```

最接近你已经拥有的

# c - 我的 C 语法有许多多种选择错误

> ID：15257319
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:05.203
> 
> 标签：c, antlr, grammar, rule

我正在尝试用 Antlwork 编写一个 C 语法，为此我使用了这个[http://stuff.mit.edu/afs/athena/software/antlr_v3.2/examples-v3/java/C/Cg](http://stuff.mit.edu/afs/athena/software/antlr_v3.2/examples-v3/java/C/C.g)我试过的地方通过删除许多我不使用的块和回溯来使其更简单。这就是我所拥有的：[http ://www.archive-host.com/files/1956778/24fe084677d7655eb57ba66e1864081450017dd9/CNew.txt](http://www.archive-host.com/files/1956778/24fe084677d7655eb57ba66e1864081450017dd9/CNew.txt)

然后当我执行 ctrl+D 时，会收到很多警告和错误，如下所示：

```
[21:20:54] warning(200): C:\CNew.g:188:2:  Decision can match input such as "'{' '}'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
[21:20:54] warning(200): C:\CNew.g:210:2: Decision can match input such as "'for' '('" using multiple alternatives: 2, 3
As a result, alternative(s) 3 were disabled for that input
[21:20:54] error(201): C:\CNew.g:210:2: The following alternatives can never be matched: 3

[21:20:54] error(208): C:\CNew.g:250:1: The following token definitions can never be matched because prior tokens match the same input: CHAR 
```

我真的不明白为什么我有所有这些警告，不应该有冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:27:54.553

> 但我仍然有这个错误
> 
> [22:02:55] 错误（208）：C:\Users\Seiya\Desktop\projets\TRAD\Gram\CNew.g:238:1：以下标记定义永远无法匹配，因为之前的标记匹配相同的输入: CONSTANT [22:17:18] 错误(208): CNew.g:251:1: 以下标记定义永远无法匹配，因为先前的标记匹配相同的输入：CHAR [22:17:18] 错误(208) : C:\Users\Seiya\Desktop\projets\TRAD\Gram\CNew.g:251:1：以下标记定义永远无法匹配，因为先前的标记匹配相同的输入：CHAR

这意味着词法分析器永远无法创建标记`CHAR`，`INT`因为其他一些词法分析器规则`CONSTANT`匹配相同的输入。您需要做的是更改`CONSTANT`为解析器规则。

换句话说，改变这两条规则：

```
primary_expression
    : ID
    | CONSTANT
    | '(' expression ')'
    ;

CONSTANT
    :   INT
    |   CHAR
    ; 
```

进入以下：

```
primary_expression
    : ID
    | constant
    | '(' expression ')'
    ;

constant
    :   INT
    |   CHAR
    ; 
```

# php - 为什么我的 k2 项目对象中缺少图像？

> ID：15257320
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:08.610
> 
> 标签：php, oop, joomla, joomla2.5, joomla-k2

感谢您的帮助...我正在开发一个自定义 joomla 组件，该组件将 k2 项拉入其中一个视图...通过包含 k2 内容模块帮助程序然后使用一点代码，我成功地将 k2 项放入我的组件视图中像这样：

```
<?php

$componentParams = JComponentHelper::getParams('com_k2');
$items = modK2ContentHelper::getItems($componentParams);

foreach ($items as $key=>$item): ?>

    <a class="Item_Title" href="<?php echo $item->link; ?>"><?php echo $item->title; ?></a>

<?php endforeach; ?> 
```

除了图像之外，我在 $item 对象中拥有我需要的大部分东西......由于某种原因，对象中没有包含任何图像信息？！所以我无法做我希望的事情并使用这样的东西：

```
<img src="<?php echo $item->image; ?>" /> 
```

这是一个指向 print_r() 的 Pastebin.com 链接；我在 foreach 中的 $item 对象上做了：

[http://pastebin.com/tJRB8wbu](http://pastebin.com/tJRB8wbu)

我什至没有看到 $item->image 可供我使用：-/

如何获取 k2 项目路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:10:38.513

似乎 K2 中的图像与文章的 id 相关联。

你应该尝试这样的事情：

```
$item->image = JPATH_ROOT.'media/k2/items/cache/'.md5("Image".$item->id).'_L.jpg'. 
```

# javascript - ASP.NET 使用 RegisterStartupScript 调用定义的 JS 函数

> ID：15257322
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:14.393
> 
> 标签：javascript, asp.net, function, call, invoke

在 ASP.NET 中，我们使用以下命令调用定义的 js 函数：

```
Page.ClientScript.RegisterStartupScript(GetType(), "", "JSFuncNameHere();", true); 
```

我想知道：

*   为什么没有任何方法，其名称如下： Page.ClientScript.CallJSScript("someJSFunc");
*   为什么上层方法需要反射方法 GetType() ？在运行时没有定义一些东西，是吗？
*   为什么我需要第二个参数`key`？正如我所测试的那样，我可以将其留空并调用现有的 JS 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:00:16.323

*   为什么没有任何方法，其名称如下： Page.ClientScript.CallJSScript("someJSFunc");

可能是因为这是更通用的解决方案，因为只需添加 2 个字符即可获得相同的结果，如果需要，您可以添加参数和其他任何内容。

*   为什么上层方法需要反射方法 GetType() ？在运行时没有定义一些东西，是吗？
*   为什么我需要第二个参数键？正如我所测试的那样，我可以将其留空并调用现有的 JS 函数。

由于这两个相同的原因 - 该方法将检测您是否多次运行相同的脚本，在这种情况下，只需调用一次。这两个参数是它识别重复项的方式——一个键是不够的，因为不同库中的另一个类可能使用相同的键——所以你需要传入你自己类的类型以确保脚本在你想要它。

# c# - 设置自定义用户 Web 控件的标签文本时出现 NullReferenceException

> ID：15257324
> 
> 赞同：1
> 
> 时间：2013-03-06T20:28:19.747
> 
> 标签：c#, asp.net, c#-4.0, custom-controls, nullreferenceexception

我正在尝试将自定义用户 Web 控件的标签文本设置为

```
Email em = new Email(); //Email is the class of the custom user web control
em.setEmail(email);
Panel2.Controls.Add(em); 
```

控件中的`setEmail()`函数将标签的值设置`lblEmail`为

```
public void setEmail(string recEmail)
{
        lblEmail.Text = recEmail;
} 
```

但我收到以下错误： ![在此处输入图像描述](../Images/b784bb3cf2073539120c6ffa317ea429.png)

调试时，我看到它`recEmail`得到了提供的值。但不将其分配给`lblEmail.Text`.

我认为这可能是由于控制注册问题，所以我将其注册为

```
<%@ Register Src="~/Email.ascx" tagname="Email" TagPrefix="uc1" %> 
```

我还尝试在 setEmail() 函数中设置值，如下所示：

```
public void setEmail(string recEmail)
{
        string a=recEmail;
        lblEmail.Text = a;
} 
```

调试时，这表明`a`正在获取值`recEmail`但未分配给`lblEmail.Text`

由于我无法上传整个代码，所以请注意以下几点：

1.  名为 Panel2 的面板位于 UpdatePanel 中，在将电子邮件控件添加到面板后会进行有条件更新。
2.  Email.ascx 文件位于调用它的文件的父文件夹中。表示如果 Email.ascx 位于 A 文件夹中，则调用它的文件位于 A/B 文件夹中。但我不认为这会产生影响。刚才提到给你有关情况的完整信息。

请告诉我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:32:35.293

默认情况下，用户控件的成员在初始化之前为空。并且初始化不会发生在用户控件（和页面，可能还有其他一些类似类型）的构造函数中。它们发生在控件被“加载”到某种上下文中时。

而不是像这样初始化：

```
Email em = new Email(); 
```

看看[方法](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcontrol.aspx)。[_ `LoadControl()`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcontrol.aspx)您应该像这样初始化它：

```
Email em = (Email)LoadControl("Email.ascx"); 
```

这将通过触发其内置页面生命周期事件来初始化用户控件，在该事件中初始化其 UI 控件。

# cs-cart - CS-Cart 行项目存储在哪里？

> ID：15257325
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:20.100
> 
> 标签：cs-cart

我试图找出哪个 CS-Cart 数据库列包含行项目 ID？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:48:20.217

似乎您正在表**cscart_order_details**中寻找列**item_id**

# c++ - 向量元素的清除向量

> ID：15257326
> 
> 赞同：-3
> 
> 时间：2013-03-06T20:28:23.770
> 
> 标签：c++

我有一段代码需要定义`vector`向量。我在循环广告中使用它们每次填充它，代码段如下所示：

```
vector < vector<T> > buckets;

for ( i = 0 -> N) {
  buckets.clear();
  ....
} 
```

我的问题是，即使在对 执行`.clear()`操作之后`bucket`，在下一次迭代中我看到旧值存在，这通常吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:37:13.670

`clear`可能只是将“使用的条目数设置为零”[1]，因此旧条目在向量中仍然可以读取。如果您不使用`size()`获取新大小，而是使用其他方法，则这些值仍然存在。

也有可能`clear`确实完全删除了内容并且不再可访问。在这种情况下，如果您尝试使用某些内容，您的程序将会崩溃。

[1] 是的，如果您想要详细信息，它会“更多”，我正在简化它。例如，它将调用析构函数向量中的元素，但它仍然只是“东西仍然存在”的情况，只是不再被视为有效。

# c# - 使用动态类型的流畅 XML 翻译

> ID：15257327
> 
> 赞同：1
> 
> 时间：2013-03-06T20:28:28.927
> 
> 标签：c#, xml, dynamic

基于 Kevin Hazzard 在此处的帖子；[http://blogs.captechconsulting.com/blog/kevin-hazzard/fluent-xml-parsing-using-cs-dynamic-type-part-1](http://blogs.captechconsulting.com/blog/kevin-hazzard/fluent-xml-parsing-using-cs-dynamic-type-part-1) 我正在尝试使用逻辑。基本上，这应该做的是获取一段 XML 并将其转换为您可以使用的对象。例如说我的 xml 是；

```
<someObject>
    <Name>Timmy</Name>
</someObject> 
```

我希望能够做到；

```
dynamic obj = Converter(xmlText);
string name obj.Name; 
```

经过多次谷歌搜索，我发现了 Kevin 的博客并发布了一个`DynamicXml`应该完成这项工作但我无法让它工作的对象（或者我没有正确使用它）。我对 .NET`Expando`对象的理解是有限的，并且我没有代码示例可以在博客文章中继续。我已将凯文关于该主题的两个帖子整理成一个对象，即；

```
public class DynamicXml : DynamicObject, IEnumerable
{
    private readonly List<XElement> _elements;

    public DynamicXml(string text)
    {
        var doc = XDocument.Parse(text);
        _elements = new List<XElement> { doc.Root };
    }

    protected DynamicXml(XElement element)
    {
        _elements = new List<XElement> { element };
    }

    protected DynamicXml(IEnumerable<XElement> elements)
    {
        _elements = new List<XElement>(elements);
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;

        // handle the Value and Count special cases
        if (binder.Name == "Value")
        {
            result = _elements[0].Value;
        }
        else if (binder.Name == "Count")
        {
            result = _elements.Count;
        }
        else
        {
            // try to find a named attribute first
            var attr = _elements[0].Attribute(XName.Get(binder.Name));
            if (attr != null)
            {
                // if a named attribute was found, return that NON-dynamic object
                result = attr;
            }
            else
            {
                // find the named descendants 
                var items = _elements.Descendants(
                    XName.Get(binder.Name));
                if (items != null && items.Count() > 0)
                {
                    // prepare a new dynamic object with the list of found descendants
                    result = new DynamicXml(items);
                }
            }
        }

        if (result == null)
        {
            // not found, create a new element here 
            _elements[0].AddFirst(new XElement(binder.Name));
            result = new DynamicXml(_elements[0].Descendants().First());
        }
        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        if (binder.Name == "Value")
        {
            /* the Value property is the only one that may be modified. TryGetMember actually
                creates new XML elements in this implementation */
            _elements[0].Value = value.ToString();
            return true;
        }
        return false;
    }

    public override bool TryGetIndex(GetIndexBinder binder, object[] indexes, out object result)
    {
        int ndx = (int)indexes[0];
        result = new DynamicXml(_elements[ndx]);
        return true;
    }

    public IEnumerator GetEnumerator()
    {
        foreach (var element in _elements)
            yield return new DynamicXml(element);
    }
} 
```

我的用法是；

```
dynamic payload = new DynamicXml(PayloadData);
Name = payload.Name;    // error thrown here 
```

例外是；

```
Cannot implicitly convert type 'MyProject.Common.Exchange.DynamicXml' to 'string' 
```

当我检查对象时，它似乎是一个嵌套的系列`DynamicXml`——从代码的内部来看，这似乎是正确的。所以我想知道我实际上是如何获得价值的`Name`？根据博客它应该只是`payload.Name`。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:51:24.367

您错过了一件非常重要的事情：您可以按名称调用节点，但您必须取消引用它的值，因为 getMember 始终返回 DynamicXml 对象。

尝试：

```
payload.Name.Value 
```

# django - ModelForm 和自定义字段

> ID：15257333
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:34.693
> 
> 标签：django, django-forms

我正在使用添加了自定义 CharField 的模型表单。我的问题是，在 POST 请求后访问自定义字段的标准方法是什么？这就是我现在这样做的方式：

```
#inside ModelForm 
date = CharField(label='date', widget=Select(choices=[
        ('', '---------'),
        ('N', 'Never')
    ]))

def __init__(self, *args, **kwargs):
   self.date = args[0]['date'] #custom date CharField
   return super(MyForm, self).__init__(*args, **kwargs)

def save(self, *args, **kwargs):
# processing self.date... 
```

有没有更好的方法来做到这一点？此外，日期字段正在使用选择作为输入数据的来源。我的猜测是，在这个特定实例中选择是正确的，构建一个表和模型，然后使用查询集来检索一些值并没有多大帮助，我猜.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:33:53.627

采用：

```
def __init__(self, *args, **kwargs):
    super(MyForm, self).__init__(*args, **kwargs)
    date = self.fields['date'] 
```

如果选择的值需要可编辑，我会将它们放在单独的模型中并使用 ModelChoiceField。否则，您只需使用静态选择就可以了。

# centos - php-cli 的问题

> ID：15257336
> 
> 赞同：1
> 
> 时间：2013-03-06T20:28:37.377
> 
> 标签：centos, php, php-ini

我的 php-cli 有一些奇怪的问题，在破坏时`php --info`我看到 php 使用`/etc/php.ini`了，而当我更改 php.ini 时出现了一些奇怪的问题，它`php --info`向我显示了不同的设置值。会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:34:29.467

确保该值不会被`/etc/php.d`.

# objective-c - 从 Objective C 调用 Ruby 类/脚本 - MacRuby 是不是矫枉过正？

> ID：15257337
> 
> 赞同：2
> 
> 时间：2013-03-06T20:28:41.957
> 
> 标签：objective-c, ruby, macruby

我想从 Objective C（它是一个 Mac OSX 应用程序）调用某些 Ruby 库（自然语言处理）。但是，我想将大部分编程保留在 Objective C 中，使用 Ruby 仅用于使用 Ruby 中的特定库。

我查看了 MacRuby，似乎我应该在所有应用程序中使用 Ruby 语法，而我宁愿在大多数情况下使用 ObjC 并且只与一两个 ruby​​ 类接口。

我意识到我可以只从命令行调用 ruby​​ 脚本，但某种集成似乎更有用。

所以问题是 - 我可以使用 MacRuby 实现上述流程还是应该研究其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:45:03.000

您可以使用 MacRuby 做到这一点，但我认为它不会比其他选项提供太多好处，除非您需要在两个环境之间进行大量交互。MacRuby 更适合从 Ruby 与 Objective-C 世界进行交互，而不是相反，但它确实允许您在项目中自由混合这两种语言。老实说，最简单的答案就是使用系统 Ruby。如果由于某种原因这不合适，您可以使用 Ruby C API 与 Ruby 代码对话。Programming Ruby 中有一个[例子](http://www.ruby-doc.org/docs/ProgrammingRuby/html/ext_ruby.html#S6)。

# mysql - 使用过滤器加速 mysql 搜索

> ID：15257338
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:42.540
> 
> 标签：mysql

我正在尝试制作一个好的 mysql 查询以尽可能快地进行。

我有一些这样的用户：

```
+-------+-------------+---------------------------------------------------------------+
|id     | name        | params                                                        |
+-------+-------------+---------------------------------------------------------------+
|1      | Joey        | a:3:{s:8:"is_legit";i:1;s:3:"age";i:15;s:9:"registred";i:0;}  |
|2      | Cloe        | a:2:{s:6:"length";i:185;s:9:"registred";i:1;}                 |
|3      | Mark        | a:2:{s:6:"length";i:185;s:11:"valid_email";i:1;}              |
+-------+-------------+---------------------------------------------------------------+ 
```

例如对于乔伊的参数，我制作了一个序列化的

```
array (
"is_legit" => 1,
"age" => 15,
"registred" => 0
) 
```

我有一个过滤器栏，我想知道是否有一种方法可以使查询比简单的查询更快`%LIKE%`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:39:58.333

您最好将架构更改为实体-属性-值模型：
[实体属性值数据库与严格的关系模型电子商务](https://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce-question)

您尝试做的更适合列族存储（如 Cassandra）或文档数据库（如 MongoDB）。

唯一可靠的方法（不更改架构）是进行贪婪搜索，然后实际过滤应用程序逻辑中的精确匹配。

# python-2.7 - Python 2.7 和 Sublime Text 2 安装指南

> ID：15257339
> 
> 赞同：6
> 
> 时间：2013-03-06T20:28:48.530
> 
> 标签：python-2.7, ide, sublimetext2

我是 Sublime Text 2 的新手。基本上我想将 Sublime T2 设置为 Python IDE。

我遇到了关于 Python 和 Sublime T2 的各种问题，但我找不到初学者角度的指南。这是我到目前为止所做的：

1.  安装了 Python。
2.  安装了 Sublime T2。
3.  安装 Sublime 包控制

为了完成 Sublime Python IDE 设置，我应该遵循哪些步骤（例如包安装等）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-13T22:30:35.943

除了包控制之外，我还使用以下包进行 Python 开发：

*   [侧边栏增强功能](https://github.com/titoBouzout/SideBarEnhancements)
*   [所有自动完成](https://github.com/alienhard/SublimeAllAutocomplete)
*   [SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)
*   [GitGutter](https://github.com/jisaacks/GitGutter)
*   [皮林特](https://github.com/biermeester/Pylinter)

我发现*SublimeCodeIntel*和*Pylinter*对于在 Sublime Text 中编写 Python 代码特别有帮助。

除了安装这些包，你还应该调整一些 Sublime 的偏好。例如，Python 对空格可能非常挑剔。因此，我建议在设置 Sublime 如何处理空白时格外小心。我正在使用这些设置（将它们放在*Preferences -> Settings - User*中）：

```
"tab_size": 4,
"translate_tabs_to_spaces": true,
"trim_trailing_white_space_on_save": true,
"ensure_newline_at_eof_on_save": true, 
```

如果你想了解更多，我写了一篇关于为 Python 开发设置 Sublime Text 的博文：[https ://dbader.org/blog/setting-up-sublime-text-for-python-development](https://dbader.org/blog/setting-up-sublime-text-for-python-development)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:33:48.170

您应该能够在`tools`菜单中选择构建系统。

![截屏](../Images/61182043cc64aba1230ac9784915661c.png)

然后，`ctrl`+`B`将为您构建并启动解释器。

编辑：`ctrl`+```也将打开您的控制台，而不构建项目。从那里，您可以使用内置解释器运行 Python 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T19:45:42.033

我在[这里](http://kirang.in/2013/05/04/my-sublime-workflow/)记录了我的 Sublime Text 工作流程。希望这可以帮助。

# java - 无法通过电子邮件意图发送电子邮件

> ID：15257342
> 
> 赞同：0
> 
> 时间：2013-03-06T20:28:54.937
> 
> 标签：java, android, email, android-intent

我之前曾在模拟器上使用我的 GMail 帐户来使用 android 的电子邮件意图。

几周后我回到了我的代码并改变了我以前的模拟器。现在，每当我尝试发送电子邮件时，我都会收到臭名昭著的“没有应用程序可以执行此操作”消息。

我已经通过模拟器浏览器登录了我的 GMail 帐户，但无法从 google play 商店下载 GMail 应用程序（我目前收到一条消息，告诉我我之前没有访问过 google play soptre）。

这是我的电子邮件意图：

```
public void onClick(View sendEmailClick) {

    emailAdd = setEmailAddress.getText().toString();
    emailSub = setEmailSubject.getText().toString();
    emailMess = setEmailMessage.getText().toString();

    Intent sendEmailIntent = new Intent(Intent.ACTION_SEND); 
    sendEmailIntent.setType("message/rfc822");
       sendEmailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] {emailAdd});  
       sendEmailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSub); 
       sendEmailIntent.putExtra(Intent.EXTRA_TEXT, emailMess); 
       startActivity(Intent.createChooser(sendEmailIntent, "Send mail..."));
       finish();

} 
```

如前所述，这是一个非常令人沮丧的问题，我之前已经让这段代码工作过。我必须安装 GMail 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:44:49.530

尝试使用以下代码

```
Intent sendEmailIntent = new Intent(android.content.Intent.ACTION_SEND); 
sendEmailIntent.setType("text/html");
   sendEmailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] {emailAdd});  
   sendEmailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, emailSub); 
   sendEmailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailMess); 
   startActivity(Intent.createChooser(sendEmailIntent, "Send mail...")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:02:58.930

There should be an email app in installed in the emulator.
eg: Gmail.
Try this code:

```
 Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[] { "xxx@gmail.com" });
    i.putExtra(Intent.EXTRA_SUBJECT, "Title");
    String message = "Message";
    i.putExtra(Intent.EXTRA_TEXT, message);
    try {
        startActivity(Intent.createChooser(i, "Title"));
    } catch (android.content.ActivityNotFoundException ex) {
        Toast.makeText(VtuLifeMainActivity.this,
                "There are no email clients installed.", Toast.LENGTH_SHORT)
                .show();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:07:46.027

对于遇到此错误的其他人：

*   单击设置 > 帐户和同步 > 添加帐户。
*   输入您的 Gmail 用户名和密码。
*   点击下一步。
*   将您的服务器设置为 m.google.com。
*   单击下一步，就是这样。

您的应用现在应该将 Gmail 检测为相关的电子邮件应用，以发送您的电子邮件意图。

# c - 如何使用指针读取字符串中间的字符？

> ID：15257349
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:29:11.080
> 
> 标签：c, string, pointers

我已经有一段时间了，真的可以使用一些帮助。我正在制作一个密码程序，其中一个功能测试开头和结尾之间的字符是否有中间大写字母。这是我尝试过的：

```
int hasMiddleUpper(char *pass)   {
  int test=0, testu=0, testl=0, count;
  char c;

  while (c = *pass++)  {
    test++;
  }
  pass = pass - test + 1;

  while (c = *pass++)  {
    if ( isupper( c ))  {
      testu=1;
    }
  }
  pass--;

  while (c = *pass++) {
    if ( isupper(c )) {
      testl=2;
    }
  }
  count = testu + testl;

  if (count==1) {
    return 1;
  }
  else  {
    return 0;
  }

}

int pwstrength( char *pass ) 
{
  int test, test1,test2, test3, result;
  test= hasUpperAndLower( pass );
  test1 = hasAlphaDigits(pass);
  test2 = hasEightOrMore(pass);
  test3 = hasMiddleUpper(pass);
  result = test + test1 + test2 + test3;
  return result;
}

int main( void ) {
  int a;
  char *p= "Pass3wordD";
  a= pwstrength( p );
  printf( "%d \n", a );
  system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:48:11.127

```
int hasMiddleUpper(char *pass)
{
   char c;
   if ( ! (pass && *pass) ) return 0;

   while (c = *(++pass)) // dont test first
   {
      if (isupper(c) && *(pass+1) )  return 1; // only if not the last
   }

   return 0;
} 
```

这是你需要的吗？

但是，你必须使用指针吗？使用索引可能更简单。

# ruby-on-rails - Rails 中的 Omniauth

> ID：15257353
> 
> 赞同：0
> 
> 时间：2013-03-06T20:29:31.557
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authentication

我目前正在使用一个我试图添加身份验证的应用程序。我安装了我的两个 gem`bcrypt-ruby`和`omniauth-identity`. 然后我在我的 config/initializers 文件夹中添加了一个新文件，其中包含这些内容......

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :identity, on_failed_registration: lambda { |env|
    IdentitiesController.action(:new).call(env)
  }

  OmniAuth.config.on_failure = Proc.new { |env|
    OmniAuth::FailureEndpoint.new(env).redirect_to_failure
  }
end 
```

* * *

当我尝试在终端中创建身份模型时，我不断收到此语法错误

```
rails generate model identity name:string email:string password_digest:string

syntax error, unexpected ':', expecting kEND (SyntaxError)
  provider :identity, on_failed_registration: lambda { |env|
                                         ^ 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:34:35.273

您的代码使用 Ruby 1.9 语法，但我的预感是您尝试使用 Ruby 1.8 VM 生成模型。你能运行`ruby --version`并确认吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:36:31.427

代替

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :identity, on_failed_registration: lambda { |env|
    IdentitiesController.action(:new).call(env)
  } 
```

尝试

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :identity, :on_failed_registration => lambda { |env|
    IdentitiesController.action(:new).call(env)
  } 
```

您似乎正在运行 Ruby 1.8。

# javascript - KO：在某些情况下单击事件未触发

> ID：15257354
> 
> 赞同：2
> 
> 时间：2013-03-06T20:29:31.977
> 
> 标签：javascript, html, css, knockout.js

我正在开发一个看起来像一本书的 SPA（单页应用程序）。

在书的一侧，用户可以单击标签以导航到书的不同区域。

选项卡还使用 CSS3 过渡对其应用了过渡效果。

问题是有时，当我单击其中一个选项卡时，我会看到过渡发生（即选项卡更改颜色并向左移动 20 像素）但单击事件未触发，我需要单击 3-4 次才能触发，而在大多数情况下一切正常。

**更新：**

似乎问题出在旋转上（标签旋转 90 度），如果我不旋转它们，一切正常，知道如何克服这个问题吗？

**HTML：**

```
<div class="caspBookTabs">
            <ul data-bind="foreach: tabs">
                <li data-bind="text: chapterName, click: $root.selectTab, attr: { 'data-tabName': chapterName }, activeTab: $root.currentTab"></li>
            </ul>
        </div> 
```

**JS：**

```
self.selectTab = function(chapter, e){
        goToPage({ chapter: chapter.chapterName });
        e.preventDefault();
        // e.stopPropagation();
    }; 
```

**CSS（使用 LESS）：**

```
.caspBookTabs {
    position: absolute;
    top:85px;
    right:-15px;
    width: 150px;
    height: 100%;
    /* iPads (landscape) ----------- */
    @media only screen
    and (min-width : 768px)
    and (max-width : 1024px)
    and (orientation : landscape) {
        top: 75px;
        right:-35px;
    }
    li {
        margin-bottom: 110px;
        height: 33px;
        width: 130px;
        /* iPads (landscape) ----------- */
        @media only screen
        and (min-width : 768px)
        and (max-width : 1024px)
        and (orientation : landscape) {
            margin-bottom: 100px;
        }

        .rotation(90deg);
        display: block;
        background: url('@{caspImgPath}/tabs-i2.png') no-repeat 0 5px;
        text-align: center;
        line-height: 46px;
        /*padding-top: 20px;*/
        color: @tabsColor;
        .font-size(1.4);
        font-weight: bold;
        .transition-property(right);
        position: relative;
        right:0;
        &:hover {
            background-position: 0 -40px;
            cursor: pointer;
        }
        &:active {
            right: 10px;
        }
    }
    .caspActiveTab {
        right: 10px;
        background-position: 0 -40px;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:59:16.463

找到了一个解决方案，不确定它是否是最好的，但这是我唯一的一个，如果您有任何想法，请随时发布其他想法：

经过一些测试后，似乎在使用`rotation`和`transition`在同一个元素上时会出现问题，如果我只使用其中一个元素似乎一切正常。

所以我只是删除了 CSS 过渡，而是使用`jQuery.animate()`.

# mysql - MySQL：带有派生列的可更新视图；“INSTEAD OF UPDATE”触发器的等效功能

> ID：15257355
> 
> 赞同：1
> 
> 时间：2013-03-06T20:29:37.683
> 
> 标签：mysql, sql

我想要一个具有派生列的视图。例如，我有一个包含字段的表：数量和价格。然后，我的视图具有这些字段以及计算字段 Qty*Price。

我正在使用 MySQL。据我了解，如果存在派生表（可更新和可插入视图——http: [//dev.mysql.com/doc/refman/5.0/en/view-updatability. html](http://dev.mysql.com/doc/refman/5.0/en/view-updatability.html) ).

当我使用 sqlite 时，我能够通过创建一个“INSTEAD OF UPDATE”触发器来解决这个问题（例如，查看[这个](https://stackoverflow.com/a/4507202/1029698)stackoverflow 响应）。然而，MySQL 显然不允许这种类型的触发器。（MySQL 触发器语法——http: [//dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)）

有没有其他方法可以让我使用 MySQL 获得这种功能 - 即具有可编辑的派生列的视图？显然，我可以在没有视图的情况下在应用程序端执行此操作，但如果可能的话，我更喜欢在数据库端执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:32:02.723

为什么没有一`subtotal`列，`BEFORE INSERT`并使用`BEFORE UPDATE`触发器将其值设置为 Qty*Price？

# c# - 将 CancellationToken 与异步方法的任务相关联

> ID：15257356
> 
> 赞同：3
> 
> 时间：2013-03-06T20:29:38.383
> 
> 标签：c#, async-await, task-parallel-library, cancellation-token

问题：有没有办法将 a`CancellationToken`与方法`Task`返回的值关联起来`async`？

通常，如果 a与匹配的's一起抛出， a`Task`将最终进入`Canceled`状态。如果它们不匹配，则任务进入状态：`OperationCancelledException``CancellationToken``Task``CancellationToken``Faulted`

```
void WrongCancellationTokenCausesFault()
{
    var cts1 = new CancellationTokenSource();
    var cts2 = new CancellationTokenSource();
    cts2.Cancel();

    // This task will end up in the Faulted state due to the task's CancellationToken
    // not matching the thrown OperationCanceledException's token.
    var task = Task.Run(() => cts2.Token.ThrowIfCancellationRequested(), cts1.Token);  
} 
```

使用`async`/ `await`，我还没有找到设置方法的方法`Task`（`CancellationToken`从而实现相同的功能）。从我的测试来看，似乎*任何* `OperationCancelledException`都会导致该`async`方法进入 Canceled 状态：

```
async Task AsyncMethodWithCancellation(CancellationToken ct)
{
    // If ct is cancelled, this will cause the returned Task to be in the Cancelled state
    ct.ThrowIfCancellationRequested(); 
    await Task.Delay(1);

    // This will cause the returned Task to be in the Cancelled state
    var newCts = new CancellationTokenSource();
    newCts.Cancel();
    newCts.Token.ThrowIfCancellationRequested();
} 
```

有更多的控制权会很好，因为如果我从我的方法调用的`async`方法被取消（并且我不希望取消 - 即它不是 this`Task`的`CancellationToken`），我希望任务进入`Faulted`状态- -不是`Canceled`国家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:39:43.880

我认为该设计适用于常见情况：如果取消任何子操作，则取消会传播到父级（最常见的情况是父级和子级共享取消令牌）。

如果你想要不同的语义，你可以`catch`在`OperationCanceledException`你的`async`方法中抛出一个符合你需要的语义的异常。如果你想重复使用这些语义，一个扩展方法`Task`应该适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-12T08:59:30.270

这是一个在提供参数时`Run`试图模仿该方法行为的方法。仅当 async 方法返回一个任务并且关联的匹配提供的参数时，才能返回的任务。[`Task.Run`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.run)[`CancellationToken`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.cancellationtoken)`Run`[`Canceled`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskstatus)`Canceled``CancellationToken`

```
/// <summary>
/// Invokes an async method (a method implemented with the async keyword), and
/// returns a proxy of the produced async task. In case the async task completes
/// in a Canceled state but the causative CancellationToken is not equal with the
/// cancellationToken argument, the proxy transitions to a Faulted state.
/// In all other cases, the proxy propagates the status of the async task as is.
/// </summary>
public static Task<TResult> Run<TResult>(Func<Task<TResult>> asyncMethod,
    CancellationToken cancellationToken)
{
    return asyncMethod().ContinueWith(t =>
    {
        if (t.IsCanceled)
        {
            try { t.GetAwaiter().GetResult(); }
            catch (Exception ex)
            {
                // In case the async method is canceled with an unknown token, throw
                // the exception. The continuation will complete in a Faulted state.
                if (ex is OperationCanceledException oce &&
                    oce.CancellationToken != cancellationToken) throw;
            }
        }

        return t; // In any other case, propagate the task as is.
    }, default, TaskContinuationOptions.ExecuteSynchronously, TaskScheduler.Default)
    .Unwrap();
} 
```

使用示例：

```
Task<int> task = Run(async () =>
{
    await Task.Delay(1000, new CancellationToken(true));
    return 13;
}, new CancellationToken(false));

try { task.Wait(); } catch { }

Console.WriteLine(task.Status); 
```

输出：

```
Faulted 
```

# css - 多列子导航列表浮动向左调整高度？

> ID：15257359
> 
> 赞同：0
> 
> 时间：2013-03-06T20:29:51.657
> 
> 标签：css

我正在制作一个子菜单，其中包含一个无序列表，其 li 元素向左浮动到两列中。

[http://jsfiddle.net/orvn/mrCxu/](http://jsfiddle.net/orvn/mrCxu/)

当特定列表项的文本比其他项多时，它会换行并占用比预期更多的空间（我同意）。

我似乎无法获得更长的列表项来填充其他两个列表项的空间，因此没有间隙（请参阅链接的 jsfiddle）。

建议？（我对菜单项的顺序不是很特别）

HTML

```
<div id="wrapper">
    <ul>
        <li><a href="">List item one</a></li>
        <li><a href="">List item two</a></li>    
        <li><a href="">List item three is longer</a></li> 
        <li><a href="">List item four</a></li>
        <li><a href="">List item five</a></li>
        <li><a href="">List item six</a></li>
        <li><a href="">List item seven</a></li>
        <li><a href="">List item eight</a></li>
        <li><a href="">List item nine</a></li>
        <li><a href="">List item ten</a></li>
        <li><a href="">List item eleven</a></li>
    </ul>
</div> 
```

CSS

```
#wrapper {width:140px; margin:10px 0 0 10px; padding:0} 
#wrapper ul {list-style-type: none; margin:0; padding:0}
#wrapper ul li {float:left;}
#wrapper ul li a {display:block; height:100%; width:64px; border:1px solid} 
```

# c# - 有没有办法说如果所有条件都为真，否则

> ID：15257361
> 
> 赞同：2
> 
> 时间：2013-03-06T20:29:54.547
> 
> 标签：c#, winforms

Windows 窗体：有没有办法说如果以下所有条件都为真，则“执行此操作”，否则“执行此操作”？我的表单有多个文本框，至少其中一个需要输入一些内容。我在下面的代码检查空文本框，但如果任何文本框为空，则它将条件设置为 false。

```
private void cmdEnter_Click(object sender, EventArgs e)
{
    bool allempty = true;
    foreach (Control d in Controls)
    {
        if (d is TextBox)
        { 
            TextBox textbox = d as TextBox;
            if (textbox.Text == string.Empty)
            {
                allempty = false; 
            }
        }
    }
    if (allempty == false)
    {
        MessageBox.Show("Textboxes are all empty");
    }
    else
    {
        //Data entry code
        MessageBox.Show("Entry Added");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:46:09.973

在 .NET 3.5 或更高版本中，您可以使用 linq 并执行以下操作：

```
 private void cmdEnter_Click(object sender, EventArgs e)
    {
        if (Controls.OfType<TextBox>().All(tb => String.IsNullOrEmpty(tb.Text)))
        {
            MessageBox.Show("Textboxes are all empty");
        }
        else
        {
            MessageBox.Show("Entry Added");
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T20:31:55.683

是的，只需使用LINQ 中的`Any`（或`All`，取决于适合您的）：

```
if(Controls.OfType<TextBox>()
        .Any(textbox => textbox.Text == ""))
    MessageBox.Show("Textboxes are all empty");
else
    MessageBox.Show("Entry Added"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T20:32:04.263

```
if(Controls.OfType<TextBox>().Any(x => x.Text == ""))
    // at least one is empty 
```

尽管从您的变量名称来看，您似乎需要：

```
if(Controls.OfType<TextBox>().Any(x => x.Text != ""))
    // at least one isn't empty 
```

或者：

```
if(Controls.OfType<TextBox>().All(x => x.Text == ""))
    // all are empty 
```

# c# - 无法将类型“字符串”隐式转换为“System.Data.CommandType”

> ID：15257369
> 
> 赞同：1
> 
> 时间：2013-03-06T20:30:25.877
> 
> 标签：c#, ms-access, oledbcommand

我正在看一个网络教程，而讲师说的是我不懂的语言，并且视频没有显示完整的长度。谁能告诉我这条线应该是什么样子......

```
 private void Insertbtn_Click(object sender, EventArgs e)
 {
   OleDbCommand cmd = new OleDbCommand(); // this is good
   cmd.CommandType = CommandType.Text;    // this is good
   cmd.CommandType = "INSERT INTO Students(StudentID, StudentName, StudentCNCI, 
   StudentDOB) Values('" + StudIDTxt.Text + "','" + StudNameTxt.Text + "','" + 
   StudCNCITxt.Text + "','" + StudDOBTxt.Text +")"; *// Need help here pls*
   cmd.Connection=myCon;   
   myCon.Open();
   cmd.ExecuteNonQuery();
   myCon.Close();
 } 
```

我正在开发 VS 2010 C#。使用访问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T20:33:54.100

您应该始终使用*[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*。*[您的代码对SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)*攻击是开放的。

在您的查询中，您应该使用`CommandText`属性，而不是`CommandType`

```
cmd.CommandText = "INSERT INTO Students(StudentID, StudentName, StudentCNCI, 
   StudentDOB) Values(@StudIDTxt, @StudNameTxt, @StudCNCITxt, @StudDOBTxt)";

cmd.Parameters.AddWithValue("@StudIDTxt", StudIDTxt.Text);
cmd.Parameters.AddWithValue("@StudNameTxt", StudNameTxt.Text);
cmd.Parameters.AddWithValue("@StudCNCITxt", StudCNCITxt.Text);
cmd.Parameters.AddWithValue("@StudDOBTxtl", StudDOBTxt.Text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T20:32:21.723

您的：

```
cmd.CommandType = "INSERT INTO Students(StudentID, StudentName, StudentCNCI, 
   StudentDOB) Values('" + StudIDTxt.Text + "','" + StudNameTxt.Text + "','" + 
   StudCNCITxt.Text + "','" + StudDOBTxt.Text +")"; 
```

应该

```
cmd.CommandText = "INSERT INTO Students(StudentID, StudentName, StudentCNCI, 
   StudentDOB) Values('" + StudIDTxt.Text + "','" + StudNameTxt.Text + "','" + 
   StudCNCITxt.Text + "','" + StudDOBTxt.Text +"')"; 
```

你打错字了。

此外，缺少单引号 - ( `StudDOBTxt.Text +")"`) 应该是`StudDOBTxt.Text +"')"`- 这会导致 SQL 服务器端出现语法错误。

至于查询的参数化形式（不受 SQL 注入攻击的形式），它必须使用问号而不是命名参数（当命令类型为文本时，这就是它在 ODBC 中的工作方式），它会是这样的：

```
 cmd.CommandText = @"INSERT INTO Students(StudentID, StudentName, StudentCNCI, StudentDOB) 
                        Values(?,?,?,?)";
   cmd.Parameters.Add(new OleDbParameter("p1", StudIDTxt.Text));
   cmd.Parameters.Add(new OleDbParameter("p2", StudNameTxt.Text));
   cmd.Parameters.Add(new OleDbParameter("p3", StudCNCITxt.Text));
   cmd.Parameters.Add(new OleDbParameter("p4", StudDOBTxt.Text)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T20:32:35.510

```
private void Insertbtn_Click(object sender, EventArgs e)
 {
    OleDbCommand cmd = new OleDbCommand(); // this is good
    cmd.CommandType = CommandType.Text;    // this is good
    cmd.CommandText = "INSERT INTO Students(StudentID, StudentName, StudentCNCI, 
    StudentDOB) Values('" + StudIDTxt.Text + "','" + StudNameTxt.Text + "','" + 
    StudCNCITxt.Text + "','" + StudDOBTxt.Text +")"; *// Need help here pls*
    cmd.Connection=myCon;   
    myCon.Open();
    cmd.ExecuteNonQuery();
    myCon.Close();
  } 
```

**它应该是命令文本而不是命令类型**

# css - Jquery UI 覆盖样式

> ID：15257370
> 
> 赞同：0
> 
> 时间：2013-03-06T20:30:27.680
> 
> 标签：css, jquery-ui, overriding

我正在使用 JQuery UI 1.9.1 自定义 CSS 文件，客户端要求 UI 按钮的活动状态看起来像按钮的悬停状态。我认为它会很简单：

```
 #myId .ui-state-active { css of hover state } 
```

这可行，但显然需要大量 CPU 时间，因为一切都变慢了，而且 CPU 风扇开始非常努力地工作。

有任何想法吗？

编辑：我使用的是按钮组，而不是按钮，但这不会有很大的不同吗？我写按钮时错了。

# android - SQLite 重复行

> ID：15257372
> 
> 赞同：0
> 
> 时间：2013-03-06T20:30:29.997
> 
> 标签：android, database, multithreading, sqlite

我有一张桌子

```
CREATE TABLE rss (_id INTEGER PRIMARY KEY AUTOINCREMENT, title text, body text, img_url text); 
```

我用以下代码编写项目：

```
public void writeRssModel(ArrayList<RssModel> items){
    SQLiteDatabase db = getWritableDatabase();
    for (RssModel model : items){
         try {
             ContentValues cv = new ContentValues();
             cv.put(DBConst.BODY, model.getBody());
             cv.put(DBConst.IMG_URL, model.getImgUrl());
             cv.put(DBConst.TITLE, model.getTitle());
             db.insert(DBConst.TABLE, null, cv);
         }catch (Exception e){
             e.printStackTrace();
         }
     }
} 
```

当我重用此代码时，行重复；我无法删除项目，因为它在后台线程中工作，并且在 UI 线程中，此表上有一个实时光标。我需要更新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:37:17.637

您应该声明`title text unique`并`db.insertWithOnConflict(DBConst.TABLE, null, cv, SQLiteDatabase.CONFLICT_IGNORE);`

# php - PHP中的Xpath内部foreach

> ID：15257373
> 
> 赞同：1
> 
> 时间：2013-03-06T20:30:40.377
> 
> 标签：php, xpath, foreach

我正在尝试在 PHP 中使用 Xpath，但我有一个关于如何在路径中查找标签 (ID) 并检查它是否存在的问题。使用我的代码，我只会在匹配时得到它，但我必须验证并得到它们是否存在或不存在的真假。

Xpath 的 HTML：

```
<map name="Map" id="Map">
  <area shape="poly" id="normal"  coords="181,1283,83,1282,108,177,1124,174,1124,205,1124,213,1126,218,1141,221,1182,224,1204,224,1231,221,1253,218,1265,203,1266,174,2055,171,2055,1092,2002,1077,1935,1057,1920,1052,1904,1051,1901,1043,1893,1036,1874,1034,1861,1030,1829,1025,1802,1022,1785,1021,1765,1020,1741,1018,1723,1022,1720,1026,1714,1029,1713,1035,1715,1041,1713,1049,1616,1047,1509,1047,1436,1048,1417,1049,1386,1049,1318,1048,1304,1047,1300,1048,1288,1052,1278,1049,1247,1047,1177,1049,1135,1048,1069,1047,1047,1046,1000,1047,946,1047,902,1048,842,1048,814,1049,799,1049,778,1049,768,1051,763,1050,742,1048,698,1048,662,1048,573,1101,581,387,575,385,197,386,181,1283" href="#" />
  <area id="excludente" shape="rect" coords="952,491,1494,769" href="#" />
  <area id="excludente" shape="poly" coords="654,599,663,580,669,577,731,578,736,579,739,588,738,599,738,677,734,682,729,684,667,685,662,679,659,668,653,600,653,598" href="#" />
  <area shape="poly" coords="1695,582,1697,579,1700,577,1709,576,1769,576,1771,578,1787,598,1786,605,1770,681,1764,685,1746,684,1705,683,1698,681,1696,675,1695,583" href="#" />
  <area shape="poly" coords="-1,84,2056,78,2055,0,0,0,0,83" href="#" />
</map> 
```

代码：

```
$DOM = new DOMDocument; 
$DOM->loadHTML($conteudo['ambiente']->mapeamento);
$xpath = new DOMXPath($DOM);
$tags = $xpath->query('//area/@shape');

foreach ($tags as $linha => $tag) {
    $ctags = $xpath->query("../@id", $tag);

    //Verify ecah one, not just the founded
    foreach ($ctags as $linha_item2 => $ctag) {
        echo $ctag->nodeValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:36:23.707

`$tag->parentNode->hasAttribute('id')`在形状上使用`$tag`（实际上是一个属性），或者在一个 xpath 中执行：

带id的区域，选择shape属性：

```
//area[@id]/@shape 
```

没有id的区域，选择shape属性：

```
//area[not(@id)]/@shape 
```

一些示例（`->parentNode`属性的 是它所在的实际`<area>`元素）：

```
$tags = $xpath->query('//area/@shape');
foreach ($tags as $linha => $tag) {
    if($tag->parentNode->hasAttribute('id')){
          echo $tag->parentNode->getAttribute('id').PHP_EOL;
    } else {
          echo 'Oh no, I have no ID!'.PHP_EOL;
    }
} 
```

或者：

```
$ids =  $xpath->query('//area[@shape]/@id');
foreach($ids as $id){
        echo $id->nodeValue.PHP_EOL;
} 
```

# javascript - 在 WebStorm 中使用 dojo.require 调试代码

> ID：15257377
> 
> 赞同：2
> 
> 时间：2013-03-06T20:30:47.100
> 
> 标签：javascript, debugging, dojo, remote-debugging, webstorm

我正在尝试使用 WebStorm 6 远程调试 Web 应用程序。该应用程序使用 dojo.require 加载脚本。所有脚本都由浏览器加载，我的应用程序运行良好。

但是，我只能在包含所有 dojo.require 语句的主 Javascript 文件中放置断点。dojo.require 动态加载的脚本不会显示在“脚本”窗口中，并且这些文件中的断点 - 可以理解 - 被忽略。“脚本”窗口仅显示我的主文件和一些 dojo 脚本（bootstrap、base、dojo）。

如何教 WebStorm 将动态加载的 Javascript 视为真实脚本，以便触发其中的断点？

# jquery - jQuery->事件继续

> ID：15257383
> 
> 赞同：0
> 
> 时间：2013-03-06T20:31:10.570
> 
> 标签：jquery

我在这样的按钮上绑定 mousedown：

```
$(".save_btn").bind("mousedown", {PID: ParticipantID}, LicenseCheck); 
```

在 LicenseCheck 函数中，我正在验证一些字段，如果验证失败，我调用 event.preventDefault，调用一个函数以显示错误消息并返回 false；如果验证成功，我返回 true。但事件并没有继续，它几乎就像它只是停止。

```
function LicenseCheck(event) {
    var PID       = event.data.PID;
    var showError = false;
    var c         = null;

    if($.trim($("#lname_"+PID).val()) != "") {
        if($.trim($("#ln_"+PID).val()) == "") {
            showError = true;
            c = $("#ln_"+PID);
        } 
    } else {
        if($.trim($("#lname_"+PID).val()) == "") {
            showError = true;
            c = $("#lname_"+PID);
        } 
    }
    if ($('input[type=radio][name^="lt_'+PID+'"]:checked').length == 0) {
        showError = true;
        c = $('input[type=radio][id^="lt_'+PID+'"]')[0];
    }
    if(showError) {
        ShowFormError(c, PID);
        event.preventDefault;
        return false;
    } else {
        return true;
    }
}

function ShowFormError(control, PID) {
    $parent   = $("#p_div_"+PID);
    var pos   = control.position();
    $arrows   = $("<div>", {"class": "formErrorArrow"})
        .append($("<div>", {"class": "line10", html: '<!-- -->'}))
        .append($("<div>", {"class": "line9", html: '<!-- -->'}))
        .append($("<div>", {"class": "line8", html: '<!-- -->'}))
        .append($("<div>", {"class": "line7", html: '<!-- -->'}))
        .append($("<div>", {"class": "line6", html: '<!-- -->'}))
        .append($("<div>", {"class": "line5", html: '<!-- -->'}))
        .append($("<div>", {"class": "line4", html: '<!-- -->'}))
        .append($("<div>", {"class": "line3", html: '<!-- -->'}))
        .append($("<div>", {"class": "line2", html: '<!-- -->'}))
        .append($("<div>", {"class": "line1", html: '<!-- -->'}));

    $item     = $("<div>",   {"class": "formError hidden", id: "form_error_"+PID})
        .append($("<div>", {"class": "formErrorContent", html: "* This field is required<br>"}))
        .append($arrows);
    $parent.append($item);
    $("#form_error_"+PID).css("top", pos.top-35);
    $("#form_error_"+PID).css("margin-top", 0);
    $("#form_error_"+PID).css("opacity", 0.87);    
    $("#form_error_"+PID).css("left", pos.left+control.width()+-30);
    $("#form_error_"+PID).css("position", "absolute");
    $("#form_error_"+PID).removeClass('hidden');
    $("#form_error_"+PID).bind('click', function() {
        $(this).addClass('hidden');
    });
} 
```

在没有 mousedown 处理程序的情况下单击它时，如何让它继续执行它应该做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:34:33.517

```
$(this).trigger('click'); 
```

在 return true 之前，它就像一个魅力。

# asp.net - 处理无效的视图状态错误

> ID：15257387
> 
> 赞同：3
> 
> 时间：2013-03-06T20:31:19.650
> 
> 标签：asp.net, c#-4.0, iis-7

我们让一些安全/渗透测试人员测试了我们的 ASP.NET 应用程序，他们发现了一些被认为是跨站点脚本漏洞的东西。据我所知，他们似乎通过将文本`<ScRiPt>alert(1)</ScRiPt>`插入到视图状态参数之一来手动操作回发的视图状态。出于某种原因，即使我们在 web.config 中指定了自定义错误处理程序，服务器似乎也忽略了它们，只是返回一个通用错误消息，并逐字显示视图状态。结果，`<ScRiPt>alert(1)</ScRiPt>`在浏览器中运行，导致测试人员将此识别为跨站点脚本问题。无论这是否是一个合法漏洞，我都希望能够正确处理此错误并将其重定向到我们的自定义错误页面之一，或者至少防止服务器像在错误信息。

除了在 IIS 中查看网站的 .NET 错误页面和错误页面之外，我还尝试在 global.asax 的 Application_Error 方法中做一些事情。在那里我可以看到状态代码是 500，WebEventCode 是 System.Web.Management.WebEventCodes.RuntimeErrorViewStateFailure，但我不能在那里执行 Response.Redirect 或 Server.Transfer，因为我得到“无法调用 Response.Redirect在页面回调中。” 例外。我还尝试在 web.config 中将 EnableViewStateMac 设置为 true 并将 ViewStateEncryptionMode 设置为 Always 以查看这是否会改变事情，但我仍然能够重新创建问题。我很感激有人可能有任何见解。

我从服务器返回的错误响应如下所示：

```
0|/*DX*/({'generalError':'Invalid viewstate. \r\n\tClient IP: 127.0.0.1\r\n\tPort: 51510\r\n\tReferer: https://localhost/-mysettings.aspx\r\n\tPath: /Default.aspx\r\n\tUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1\r\n\tViewState: /wEPDwUKMjA1OTAyNzk1MWQYBAUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFjQFQmN0bDAxJG1haW5Db250ZW50JGN0bDAwJGNwQWRtaW5pc3RyYXRpb25TZXR0aW5ncyRidG5DaGFuZ2VQYXNzd29yZAU/Y3RsMDEkbWFpbkNvbnRlbnQkY3RsMDAkY3BBZG1pbmlzdHJhdGlvblNldHRpbmdzJGJ0bkVkaXRQaWN0dXJlBT9jdGwwMSRtYWluQ29udGVudCRjdGwwMCRjcEFkbWluaXN0cmF0aW9uU2V0dGluZ3MkYnRuU2F2ZUNoYW5nZXMFQmN0bDAxJG1haW5Db250ZW50JGN0bDAwJGNwQWRtaW5pc3RyYXRpb<ScRiPt>alert(1)</ScRiPt>25TZXR0aW5ncyRjYlNpdGVDb3VudHJ5JERERAU8Y3RsMDEkbWFpbkNvbnRlbnQkY3RsMDAkY3BBZG1pbmlzdHJhdGlvblNldHRpbmdzJEFTUHhCdXR0b24zBV9jdGwwMSRtYWluQ29udGVudCRjdGwwMCRjcEFkbWluaXN0cmF0aW9uU2V0dGluZ3MkdXNlckFkZHJlc3MkcG5sQWRkcmVzcyRjYlNlYXJjaGFibGVBZGRyZXNzJERERAU8Y3RsMDEkbWFpbkNvbnRlbnQkY3RsMDAkY3BBZG1pbmlzdHJhdGlvblNldHRpbmdzJEFTUHhCdXR0b24yBT9jdGwwMSRtYWluQ29udGVudCRjdGwwMCRjcEFkbWluaXN0cmF0aW9uU2V0dGluZ3Mk...'}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:06:58.417

我能够想出一个可行的解决方案。它并不完美，但可以完成工作并防止 javascript 出现在服务器响应中。我基本上只是清除当前错误并输出我自己的自定义响应。我将以下代码放在 Global.asax 的 Application_Error 方法中：

```
//Handle view state manipulation
HttpApplication httpApp = this.Context.ApplicationInstance;
HttpException httpEx = httpApp.Server.GetLastError() as HttpException;
if (httpEx != null)
{
    if (
        httpEx.WebEventCode == System.Web.Management.WebEventCodes.AuditInvalidViewStateFailure
        ||
        httpEx.WebEventCode == System.Web.Management.WebEventCodes.InvalidViewState
        ||
        httpEx.WebEventCode == System.Web.Management.WebEventCodes.InvalidViewStateMac
        ||
        httpEx.WebEventCode == System.Web.Management.WebEventCodes.RuntimeErrorViewStateFailure
        )
    {
        HttpContext.Current.ClearError();
        Response.Write("Error: An invalid viewstate has been detected (WebEventCode: " + httpEx.WebEventCode.ToString() + ").");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:19:05.330

我们有同样的问题要通过 PCI 测试。

我认为下面的这个链接解决了这个问题，但我不知道如何修复它。 [http://computersecuritywithethicalhacking.blogspot.co.uk/2012/09/stored-xss-via-viewstate-parameter.html](http://computersecuritywithethicalhacking.blogspot.co.uk/2012/09/stored-xss-via-viewstate-parameter.html)

我们使用 IIS 7.5，在我们的网站上，enableviewstate 为 true，enableviewstatemac 为 true。但我不知道如何检查 viewStateEncryptionMode 设置。我不确定视图状态是否已加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:49:25.920

他们操纵页面源以添加然后执行的脚本代码。这不是任何一本书的漏洞（因为该值没有持久化，并且警报仅作为他们行动的直接结果执行——就像他们在攻击自己一样）。没有什么能阻止他们直接在页面中添加该脚本......

至于错误消息，您应该查看`<customErrors mode="On" />`web.config 文件中的设置。[MSDN 参考](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.100%29.aspx)。

如果这没有帮助，另一种选择是清除异常`Application_Error`并抛出通用异常。

# hibernate - 休眠删除不起作用

> ID：15257389
> 
> 赞同：3
> 
> 时间：2013-03-06T20:31:28.903
> 
> 标签：hibernate, session, transactions

我遇到了一个奇怪的情况，休眠删除适用于所有记录，但不适用于 id= `1`。起初，我`getCurrentSession`用于检索活动的休眠会话，但将其更改为手动打开/关闭新会话以进行删除，因为它不起作用。但现在它仍然不起作用。尽管如此，我正在使用交易。

```
@Override
public void delete(Song song) {
    session = sessionFactory.openSession();
    try {
      Transaction tx = session.beginTransaction();
      session.delete(song);
      tx.commit();
    } catch (HibernateException e) {
      System.out.println("notify!");
    }
    session.close();
} 
```

我有5个测试记录。我可以删除 id={2,3,4,5}，但我不能删除 id=1。有任何想法吗？

编辑：[这](https://github.com/tkoomzaaskz/lyricsBase/blob/master/src/main/java/com/blogspot/symfonyworld/lyricsbase/model/Song.java)是我的 Song 实体的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:45:43.157

我注意到的一件事是您将 id`1`默认设置为。即使我不知道这是否真的是你问题的根源（但肯定闻起来像它）。

# c# - 通过 Watin 访问特定框架

> ID：15257398
> 
> 赞同：0
> 
> 时间：2013-03-06T20:31:52.257
> 
> 标签：c#, frame, watin

我正在尝试输入文本，但 Watin 找不到正确的文本框。我认为这是因为它在框架中，而不是在主页上。我使用的 URL 是[https://customerservice.southerncompany.com/NonSecure/LoginFrames.aspx](https://customerservice.southerncompany.com/NonSecure/LoginFrames.aspx)

我已经为这个特定站点找到了一种解决方法，但我需要进入其他站点的框架。这是我试图在这个网站上使用的内容：

```
browser.TextField(Find.ById("ctl00_MainContent_txtUsername")).TypeText("FakeUsername");
browser.TextField(Find.ById("ctl00_MainContent_txtPassword")).TypeText("FakePassword");

browser.Image(Find.ByName("ctl00$MainContent$btnLogin")).Click(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:40:41.277

只需使用此命令获取框架

```
Frame frame = browser.Frame(Find.ByClass("yourClassName")); //or by id or name...
frame.TextField(Find.ById("ctl00_MainContent_txtUsername")).TypeText("FakeUsername");
//and etc... 
```

# java - 如何在 Spring MVC 中将数据存储在数据库中的字段中

> ID：15257412
> 
> 赞同：0
> 
> 时间：2013-03-06T20:32:27.430
> 
> 标签：java, spring, hibernate, logic

我有一个与逻辑相关的问题而不是技术，这是一个场景，（我使用的是 Spring + Hibernate）

我需要从数据库中读取一些数据以在每次获取请求时返回页面，但我认为这里有一些技巧，如果使用某些脚本有人非常频繁地重新加载页面，这将导致对服务器的多次调用，为此我想读取数据并将它们放入全局变量或类变量中，这样做我最终会编写非常奇怪的代码，许多全局变量和愚蠢的方式来给它们初始值，例如变量 user-status 这是我给出的字节类型变量 - 2 作为初始值，这样我的内部逻辑就可以理解数据库中没有为这个变量设置任何值，下面是我的代码

```
 @Controller
    /* @Secured("hasRole('ROLE_USERS')") */
    @RequestMapping("member")
    public class ApplyRoles {

        @Autowired
        private UserInformationForAccessApplication checkUserStatus;

        // we will initialize variables to avoid auto-initialize by constructor
        private byte userStatus = Constant.IntializationOfGlobalVariable.GLOBALINIT,
                requesttype = Constant.IntializationOfGlobalVariable.GLOBALINIT,
                access = Constant.IntializationOfGlobalVariable.GLOBALINIT;

        Map<String, Object> accessnrole;
        Map<String, String> country;
        Map<String, String> roleArray;

        @Autowired
        StudentEnrollmentApplication enrollmentApplication;

        @Autowired
        SystemProperties systemProperties;

        @Autowired
        EmployeeEnrollmentApplicationResume employeeEnrollmentApplicationResume;

        @Autowired
        AccessEnrollmentProcessing accessEnrollmentProcessing;

        private String role = Constant.IntializationOfGlobalVariable.ROLENOTSET,
                fname, lname;

        @RequestMapping(value = "/user", method = RequestMethod.GET)
        public String checkingUserStatus(Model model, HttpSession session,
                Authentication authentication) {

            String sessionemail = "yashprit@gmail.com";// (String) session
            // .getAttribute(Constant.SessionAttributes.LOGGEDINUSER);

            // first check global value, if found set than don't fetch from database
            if (userStatus == Constant.IntializationOfGlobalVariable.GLOBALINIT) {
                // get user status from MySQL Database
                userStatus = checkUserStatus.checkStatus(sessionemail).get(0);
                if (!(userStatus == Constant.UserRoleApplicationStatus.NOTAPPLIED)) {
                    access = checkUserStatus.checkStatus(sessionemail).get(1);
                    model.addAttribute(Constant.SystemName.ACCESS, access);
                }
            }

            if (!(userStatus >= Constant.UserRoleApplicationStatus.NOTAPPLIED || userStatus <= Constant.UserRoleApplicationStatus.REJECTED)) {
                model.addAttribute("error", "User status is not avaible");
                return "redirect:error/pagenotfound";
            } else if (userStatus == Constant.UserRoleApplicationStatus.NOTAPPLIED) {
                if (requesttype == Constant.IntializationOfGlobalVariable.GLOBALINIT) {
                    // get request type from MongoDB database
                    requesttype = checkUserStatus.getRequestType(sessionemail);
                }

                if (!(requesttype == Constant.RequestType.NORMALEBIT || requesttype == Constant.RequestType.INVITEBIT)) {
                    model.addAttribute("error",
                            "Facing Technichal Issue, Please try again");
                    return "redirect:error/pagenotfound";
                }

                if (requesttype == Constant.RequestType.INVITEBIT) {
                    if (!(Byte.parseByte((String) accessnrole
                            .get(Constant.SystemName.ACCESS)) == Constant.Access.USERBIT)) {
                        accessnrole = checkUserStatus
                                .getAccessAndRole(sessionemail);
                    }

                    if (accessnrole.get(Constant.SystemName.ACCESS).equals(
                            Constant.Database.ERRORMESSAGE)
                            || accessnrole.get(Constant.SystemName.ROLE).equals(
                                    Constant.Database.ERRORMESSAGE)) {

                        model.addAttribute("error",
                                "Facing Technichal Issue, Please try again");
                        return "redirect:error/pagenotfound";
                    }

                    model.addAttribute(Constant.SystemName.ACCESSNROLE, accessnrole);
                    model.addAttribute(Constant.SystemName.REQUESTTYPE, requesttype);
                }
            }

            model.addAttribute(Constant.SystemName.USERSTATUS, userStatus);

            return "member/user";

        }
} 
```

to avoid global variable i thought of suing cookies, because I don't want to call database on every page reload in same session, once its loaded for a session than I don't have to call to database.

Anything that can help to to redesign above part of code is much appreciated

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:54:58.567

There are really 2 things that you are considering, and correctly me if I'm wrong, but:

1.  Caching on the server (in your Java application) to avoid doing a database lookup multiple times for the same data.
2.  Avoid the client (browser) from sending multiple requests to the server.

The first can be resolved using caching which is available in spring uses annotations on any given method. The documentation is available [here](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/cache.html).

The second is a bit more tricky and I' leave it for now unless you discover a performance problem. It's again possible to do in Spring and takes advantage of the HTTP protocol and caching controls available in the HTTP header to inform the browser how long to cache responses.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:54:45.963

What you are thinking about is called a "cache". It is a standard Computer Science way of doing things and they have been doing research on how to use caches for as long as there have been computers.

You might want to go do some reading on the subject. I found this one by Googling "cache tutorial java" [http://javalandscape.blogspot.com/2009/01/cachingcaching-algorithms-and-caching.html](http://javalandscape.blogspot.com/2009/01/cachingcaching-algorithms-and-caching.html)

In simplest terms (a one item cache) what you want is to store some data object that you recently took some time to come up with. But you also have to have some sort of identifier so you can tell if the next request is asking for the same data. If it isn't, you have to do all the work over. If it is the same data, you just return it again.

So the algorithm works something like this in this simple case:

```
if (storedData != null && storedRequestInfo == userRequest.requestInfo) {
    return storedData;
}

storedData = youCalculateTheRequestedData();
storedRequestInfo = userRequest.requestInfo;

return storedData; 
```

Its not any real programming language, just something to show you how it works.

The requestInfo is whatever comes in with the request that you use to look up your database stuff. You save it in storedRequestInfo after any calculation.

This shows it as returning some data to the user, that's what is in storedData.

It's a simple, one-element cache.

(To expand on this, you can store the storedRequestInfo and storedData in the session and you end up with one of these stored for each user. You can also use a java Map and store a bunch of storedData. The problem is to decide how to limit your memory use. If you store too many of these for each user, you use up too much memory. So you limit how many each user can have either by size or by count. Then you have to decide which one to delete when it gets too big. In the simple case, you always delete, in essence, the stored one and store a new one.

I noticed your comment. ECache is just a big fancy Map in the terms I used above. I don't know if it's naturally session dependent but it can be made that way by adding the session id to the cache key.)

# c++ - 提升 LNK2019 错误

> ID：15257419
> 
> 赞同：1
> 
> 时间：2013-03-06T20:32:37.337
> 
> 标签：c++, boost, bjam

我使用'5.3.4 Invoke b2'通读了[boost文档](http://www.boost.org/doc/libs/1_53_0/more/getting_started/index.html)，并跟进了论坛帖子，解释了将boost库[链接到头文件和链接器目录](https://stackoverflow.com/questions/2174519/how-to-include-boostthread-in-your-c-project)的细节，在boost帮助'4.1 Build From the Visual Studio IDE'中，并找到了解释[bjam.exe 控件](http://wiki.thedarkmod.com/index.php?title=Compile_the_static_Boost_Libraries_in_Windows)的这个很酷的 boost 相关 wiki 。

放在`#include <boost/thread/thread.hpp>`main.cpp中

而且，我收到此链接器错误，现有的帮助线程已确定问题出在 x64 上：

*   [目录路径和 x32/x64](https://stackoverflow.com/questions/12714660/linker-error-lnk2019-when-linking-boost-1-51-0-dynamically-in-vs2010)
*   [与 Visual Studio 无关](https://stackoverflow.com/questions/4487646/linking-to-boost-through-sconstruct)
*   [未解决](https://groups.google.com/forum/#!msg/mongodb-dev/s2b_aSLm3R4/VqekND9wf6gJ)

错误：

```
error LNK2019: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ) referenced in function "void __cdecl boost::system::`dynamic initializer for 'posix_category''(void)" (??__Eposix_category@system@boost@@YAXXZ)  main.obj

error LNK2019: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ) referenced in function "void __cdecl boost::system::`dynamic initializer for 'native_ecat''(void)" (??__Enative_ecat@system@boost@@YAXXZ)  main.obj 
```

它们是相似的，一些关于`'posix_category'`和一些关于`'native_ecat'`

因此，我尝试构建 x64 boost 库，并发现关于将这些放置在何处的说明相互矛盾：

*   没有说[“x64 用户注意事项：将 address-model=64 选项添加到 bjam（在线程参数之后），以便使用 64 位编译器构建静态库。”](http://wiki.thedarkmod.com/index.php?title=Compile_the_static_Boost_Libraries_in_Windows)
*   找不到链接，但有人说将 x64 库放在 vs2008 垃圾箱中？

另外，我尝试将 vs2008 配置更改回 x32 -> solutionExplorer/solution_properties/configuration_manager/active_solution_platform - Win32，关闭并重新打开 Visual Studio - 将附加目录 C/C++/general 和 Linker/general 重新链接到 Boost/root 和 Boost/stage /lib - 它编译没有错误。

我对 b2 命令的最佳猜测是`--toolset=msvc-9.0 address-model=64 --build-type=complete --stagedir=lib\x64 stage`

请简要说明如何在 VS2008 上构建和安装 x64 版本的 boost。另外，wiki 谈论的发布和调试是什么——它们不在[Boost 调用](http://www.boost.org/boost-build2/doc/html/bbv2/overview/invocation.html)中？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-22T11:03:52.103

使用 C++ 11

它或多或少包含了我想使用的 boost 的所有功能，也可以在 g++ 中编译，而无需弄清楚如何在我的大学服务器上构建 boost 库，然后引用到远程 g++ 构建 - 几乎解决了所有问题

# sql - 搜索其子项满足谓词的父记录

> ID：15257429
> 
> 赞同：2
> 
> 时间：2013-03-06T20:33:17.840
> 
> 标签：sql, sqlite

假设我有一个父子数据库，并且子子保留了发生在父子身上的事情的一种运行记录：

```
create table patient (
   fullname text not null,
   admission_number integer primary key
);

create table history (
   note text not null,
   doctor text not null,
   admission_number integer references patient (admission_number)
); 
```

（只是一个例子，我不是在做医疗应用）。

`history`将有许多相同的记录`admission_number`：

```
admission_number      doctor    note
------------------------------------
3456                  Johnson   Took blood pressure
7828                  Johnson   EKG 120, temp 99.2
3456                  Nichols   Drew blood
9001                  Damien    Discharged patient
7828                  Damien    Discharged patient with Rx 
```

所以，我的问题是，我将如何构建一个查询，让我在注释字段中搜索和/或不搜索`patient`记录，例如，如果我想查找历史记录中包含“血压”和“出院”。

现在我一直在`select`对`history`那个组进行 a `admission_number`，将所有注释与 a 结合起来`group_concat(note)`并在 中进行搜索`having`，因此：

```
select * from history 
  group by admission_number
  having group_concat(note) like '%blood pressure%' 
     and group_concat(note) like '%discharged'; 
```

这行得通，但它使某些详细说明变得非常复杂——例如，我希望能够询问“每个患者的病史包含“血压”并且其与 Damien 医生的病史为“出院”之类的问题，并建立在我的基本查询之上这样的资格非常混乱。

有没有更好的方式来表达我的基本查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:34:29.223

为什么不使用`JOIN`手术？

例如考虑到，患者表包含以下数据：

```
INSERT INTO patient VALUES('Bob', 3456);
INSERT INTO patient VALUES('Mary', 7828);
INSERT INTO patient VALUES('Lucy', 9001); 
```

**运行查询：**

```
SELECT DISTINCT p.fullname, p.admission_number FROM patient p
INNER JOIN history h ON p.admission_number = h.admission_number
WHERE note LIKE '%blood pressure%' OR note LIKE '%Discharged%'; 
```

得到你：

```
fullname = Bob
admission_number = 3456

fullname = Lucy
admission_number = 9001

fullname = Mary
admission_number = 7828 
```

**并运行以下查询：**

```
SELECT DISTINCT p.fullname, p.admission_number FROM patient p
INNER JOIN history h ON p.admission_number = h.admission_number
WHERE note LIKE '%blood pressure%'; 
```

得到你：

```
fullname = Bob
admission_number = 3456 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:30:25.003

我有一些东西——`EXISTS`用来构造这些更干净一些：

```
select * from patients where 
    exists ( 
      select 1 from history where
        history.admission_number == patients.admission_number
        AND
        history.note LIKE '%blood pressure%'
    )
    AND
    exists (
        select 1 from history where
        history.admission_number == patients.admission_number
        AND 
        history.note LIKE '%discharged%'
        AND
        history.doctor == 'Damien'
    ); 
```

这好多了，现在我可以构造非常细粒度的谓词了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T08:13:25.490

这类似于您的`EXISTS`方法，但计算子查询的方式不同。这可能会也可能不会更快，这取决于您的表和索引的组织方式以及查询的选择性。

```
SELECT *
FROM patient
WHERE admission_number IN (SELECT admission_number
                           FROM history
                           WHERE note LIKE '%blood pressure%')
  AND admission_number IN (SELECT admission_number
                           FROM history
                           WHERE note LIKE '%discharged%'
                             AND doctor = 'Damien') 
```

或者，您可以使用[复合子查询](http://sqlite.org/lang_select.html#compound)（计算交集一次可能比`IN`为每条记录执行两次更快）：

```
SELECT *
FROM patient
WHERE admission_number IN (SELECT admission_number
                           FROM history
                           WHERE note LIKE '%blood pressure%'
                           INTERSECT
                           SELECT admission_number
                           FROM history
                           WHERE note LIKE '%discharged%'
                             AND doctor = 'Damien') 
```

# javascript - 3维数组排序Javascript

> ID：15257433
> 
> 赞同：1
> 
> 时间：2013-03-06T20:33:26.267
> 
> 标签：javascript, sorting, multidimensional-array

我已经在这里和其他网站上阅读了几篇关于在多维数组上使用自定义排序函数的帖子，但无法弄清楚如何在这种情况下实现它们......

我正在尝试使用画家算法...

```
face_list[num_face][num_vertex] = [2d_x, 2d_y, z, light_intensity] 
```

如何编写排序函数以使 face_list 按 z 排序？

我试过了

```
a=a[2][2]

b=b[2][2] 
```

对于第三个数组的第三个值，但浏览器不喜欢它。

[num_face] 的序列是我想要改变的。

我已经为此困惑了两天，希望能得到帮助！

谢谢你，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:42:28.510

您可以尝试这种排序方法，是的，它是一个自定义排序功能，但它们很棒。你得到值，在你的情况下是`z`值，并保留每个点的索引列表，然后按`z`.

取自：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort#Example.3A_Sorting_maps](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort#Example.3A_Sorting_maps)

> ```
> // the array to be sorted
> var list = ["Delta", "alpha", "CHARLIE", "bravo"];
> // temporary holder of position and sort-value
> var map = [];
> // container for the resulting order
> var result = [];
> 
> // walk original array to map values and positions
> for (var i=0, length = list.length; i < length; i++) {
>   map.push({    
>     // remember the index within the original array
>     index: i, 
>     // evaluate the value to sort
>     value: list[i].toLowerCase() 
>   });
> }
> 
> // sorting the map containing the reduced values
> map.sort(function(a, b) {
>   return a.value > b.value ? 1 : -1;
> });
> 
> // copy values in right order
> for (var i=0, length = map.length; i < length; i++) {
>   result.push(list[map[i].index]);
> }
> 
> // print sorted list
> print(result); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:27:39.170

这应该让你开始。

（对应的jsBin在这里：http: [//jsbin.com/olegoj/1/edit](http://jsbin.com/olegoj/1/edit) ）

```
// 3D points array.
var points=[];

var Vector=function(x,y,z) {
  this.x=x;
  this.y=y;
  this.z=z;
};

Vector.prototype.toString= function() {
  return (' x: ' + this.x + ' y: ' + this.y  + ' z : ' + this.z);
};

// returns a new vector translatedfrom ampVec * random 
Vector.prototype.createRandomShift= function(ampVec) {
    var thisRandom = Math.random()*0.9+0.1;
  return  new Vector(
      thisRandom*ampVec.x+this.x,
       thisRandom*ampVec.y+this.y,
        thisRandom*ampVec.z+this.z    );
};

var pointCount=20;

var pt = new Vector(Math.random()*100|0, Math.random()*100|0, Math.random()*100|0 );
var ampVec = new Vector(Math.random()*4-2, Math.random()*4-2, Math.random()*4 - 2);
var ampVecAmp = new Vector(Math.random()*2-1, Math.random()*2-1, Math.random()*2-1) ;

// fill the point array.
// based on the current point shifted randomly by ampVec
// ampVec itself is shifted randomly by ampVecAmp 
for(var i=0; i<pointCount; i++) {
   points.push(pt );
   pt=pt.createRandomShift(ampVec);
   ampVec=ampVec.createRandomShift(ampVecAmp);
}

// array of face. a face is an array of 3 point indexes.
var facelist=[];

var faceCount=10, i=faceCount;

// fill the face array
while(i--) {
    var thisFacePoints=[];
    var ip1 = 0;
    // 3 point indexes
    thisFacePoints.push(ip1=Math.random()*pointCount|0);
    thisFacePoints.push(Math.random()*pointCount|0);
    thisFacePoints.push(Math.random()*pointCount|0);
    facelist.push(thisFacePoints);
}

// returns the min z for a face
var minZ=function(f) {
    return Math.min(f[0].z, Math.min(f[1].z, f[2].z));
};

// returns the max z for a face                  
var maxZ=function(f) {
   return Math.max(f[0].z, Math.max(f[1].z, f[2].z));
};

// !!! sort the faces on Z !!!
facelist.sort(function(a,b) {
   if (maxZ(a) < minZ (b)) return 1;  // a fully below b
   if (minZ(b) < minZ(a) ) return -1;  // b fully below a
   // !!!!!!!!!!!!!!!!!!!!!!!!
   // in fact here is the tricky part :
   // here a and b overlap in Z.
  return trickyFaceZSort(a,b); 
 });

 // !!!!!! returns wether face a is < to face b when looking at Z (0,0,1).
//Required : a and b overlaps by Z.
var trickyFaceZSort= function(a,b) {
 // do some checks on projected(xi), projected(yi)  -> return 0 if no overlap
 // then you have the hardest part ahead : x,y and z overlap.
 return 0;
};

// Print sorted faces
for(var i=0; i<facelist.length; i++) {
    var fp=facelist[i];
console.log(' *** face ' + i + ' *** ');
console.log(' ** point 0 ' + points[fp[0]] + ' *** ');
console.log(' ** point 1 ' + points[fp[1]] + ' *** ');
console.log(' ** point 2 ' + points[fp[2]] + ' *** ');  
} 
```

# php - PHP中cURL上的JSON不起作用

> ID：15257434
> 
> 赞同：1
> 
> 时间：2013-03-06T20:33:27.467
> 
> 标签：php, json, curl

我有下面的页面。

页面`json.php`：

```
$json_data = array(
    'first_name' => 'John',
    'last_name'  => 'Doe',
    'birthdate'  => '12/02/1977',
    'files'      => array(
        array(
            'name'   => 'file1.zip',
            'status' => 'good'
        ),
        array(
            'name'   => 'file2.zip',
            'status' => 'good'
        )
    )
);

$url = 'http://localhost/test.php';

$content = json_encode($json_data);

$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTPHEADER,
    array(
        "Content-type: application/json",
        "Content-Length: " . strlen($content)
    )
);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, 'json=' . urlencode($content));
curl_setopt($curl, CURLINFO_HEADER_OUT, true);

$json_response = curl_exec($curl);

$status      = curl_getinfo($curl, CURLINFO_HTTP_CODE);
$header_sent = curl_getinfo($curl, CURLINFO_HEADER_OUT);

curl_close($curl);

echo $header_sent;
echo '<br>';
echo $status;
echo '<br>';
echo $json_response; 
```

页面`test.php`：

```
echo '<pre>';
print_r($_POST);
echo '</pre>'; 
```

当我从浏览器调用 json.php 时，我得到以下结果：

```
POST /json.php HTTP/1.1 Host: localhost Accept: */* Content-type: application/json Content-Length: 150
200

Array
(
) 
```

为什么我看不到我要发送的 POST 字符串？

**编辑：**

如果我不设置`Content-type: application/json`标题（根据@landons 的评论），我会得到以下结果：

```
POST /ddabvd/widendcm/widendcm-finished.php HTTP/1.1 Host: localhost Accept: */* Content-Length: 150 Content-Type: application/x-www-form-urlencoded 
200
Array
(
    [json] => {"first_name":"John","last_name":"Doe","birthdate":"12\/02\/1977","files":[{"name":
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:56:31.643

如果内容类型未设置为从浏览器内部发布表单时使用的两种官方内容类型之一，PHP 不会对 POST 请求使用其内部请求解析。（例如，唯一允许的内容类型是`multipart/form-data`，通常用于文件上传，默认值`application/x-www-form-urlencoded`）。

如果你想使用不同的内容类型，你就得靠你自己了，例如，当你从`php://input`.

事实上，您的内容类型目前是错误的。它不是 application/json，因为数据读取`json={...}`，当被解析为 json 时是不正确的。

# asp.net - 中继器内的 Gridview ondataitembound 网格视图重新绑定

> ID：15257442
> 
> 赞同：0
> 
> 时间：2013-03-06T20:34:05.093
> 
> 标签：asp.net, data-binding, gridview, dataset, repeater

我有一个中继器，它有一个 asp gridview 如下：

```
 <asp:Repeater ID="rep" runat="server" OnItemDataBound="rep_ItemDataBound">
     <ItemTemplate>   
         <asp:GridView ID="grdVw" runat="server" AutoGenerateColumns="False">
             <Columns>  
                 <asp:BoundField DataField="Link" HeaderText="Link" />
             </Columns>
         </asp:GridView>
     </ItemTemplate>
 </asp:Repeater> 
```

然后在页面加载时，我将`datatable`包含 20 行的 a 绑定到此转发器：

这是我的页面加载代码

```
 protected void Page_Load(object sender, EventArgs e){
   //dummy code for testing
            table.Columns.Add("Name");
            table.Columns.Add("Link");

            DataRow row ;
            for (int i = 0; i <20; i++) 
            {
                row = table.NewRow();
                row[0] = "dsadsd";
                row[1] = "text";

                table.Rows.Add(row);
            }

            for (int i = 0; i < 10; i++)
            {
                ds.Tables.Add(table.Copy());
            }
               rep.DataSource = ds;
                rep.DataBind();
} 
```

然后我像这样处理中继器`ItemDataBoundevent`：

```
protected void rep_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item)
        {
            GridView grdVw = e.Item.FindControl("grdVw") as GridView;
            grdVw.DataSource = table;
            grdVw.DataBind();
        }
    } 
```

令人惊讶的是结果是 20 个网格视图！我在想这是`ItemDataBound`因为`table`. 所以在这个处理程序事件中，我绑定了表 20 次，但这在逻辑上是合理的还是我做错了什么？！

我可以很容易地有一个标志来确保数据只绑定到表一次，但是如果我已经将数据集绑定到转发器怎么办？如何处理与网格视图的绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:36:21.057

更改这行代码：

```
rep.DataSource = ds; 
```

对此：

```
rep.DataSource = ds.Tables; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:07:42.317

您可以将转发器与 a 绑定，`dataset`但您需要注意如何处理该集合内的表。

这：

```
rep.DataSource = table;
rep.DataBind(); 
```

应该：

```
rep.DataSource = {Some Dataset with more than one table};
rep.DataBind(); 
```

然后在您的处理程序中：

```
protected void rep_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item)
    {
        GridView grdVw = e.Item.FindControl("grdVw") as GridView;
        //EDIT: my vb was showing.
        grdVw.DataSource = ((DataTable)e.Item.DataItem).Rows;
        grdVw.DataBind();
    }
} 
```

这未经测试，但它应该有点摆弄。您需要知道的是，在转发器中，您需要引用 listItem 的 dataItem 才能获得对表的引用。此外，表不是 iEnumerable，因此请确保您绑定了行对象。

# php - 在 joomla 2.5 注册 xml 的标签旁边添加链接

> ID：15257445
> 
> 赞同：0
> 
> 时间：2013-03-06T20:34:19.710
> 
> 标签：php, xml, joomla

我需要在所有字段的标签（或标签中）旁边添加一个链接。我已经为下面的名称字段放置了我的 xml（将其扩展到其他字段应该很简单）。例如，在名称旁边应该有一个 html 链接。不能让它工作。请帮忙

这是我的xml：

```
<field name="name" type="text"
            description=""
            filter="string"
            label="Full Name"
            message="COM_USERS_REGISTER_NAME_MESSAGE"
            required="true"
            size="30"
                        class="signupbox"

        /> 
```

这是我的registration.php

```
<?php
/**
 * @package     Joomla.Site
 * @subpackage  com_users
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 * @since       1.6
 */

defined('_JEXEC') or die;

JHtml::_('behavior.keepalive');
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.noframes');
?>
<style>.star{display:none;}#recaptcha_table{width: 505px;}input#recaptcha_response_field{;}</style>
<div style="font-size: 22px;margin-bottom:20px;border-bottom: solid 1px #ddd;padding-bottom: 3px;">Create an account at the Homeovitality Store.</div>
<div class="registration<?php echo $this->pageclass_sfx?>">
<?php if ($this->params->get('show_page_heading')) : ?>
    <h1><?php echo $this->escape($this->params->get('page_heading')); ?></h1>
<?php endif; ?>
<div id="signup-form">
    <form id="member-registration" action="<?php echo JRoute::_('index.php?option=com_users&task=registration.register'); ?>" method="post" class="form-validate">
<?php foreach ($this->form->getFieldsets() as $fieldset): // Iterate through the form fieldsets and display each one.?>
    <?php $fields = $this->form->getFieldset($fieldset->name);?>
    <?php if (count($fields)):?>

        <?php if (isset($fieldset->label)):// If the fieldset has a label set, display it as the legend.
        ?>

        <?php endif;?>
            <div>
        <?php foreach($fields as $field):// Iterate through the fields in the set and display them.?>
            <?php if ($field->hidden):// If the field is hidden, just display the input.?>
                <?php echo $field->input;?>
            <?php else:?>
                <div style="margin-bottom:8px;">
                    <?php echo $field->label; ?>    
                </div>
                <div style="margin-bottom:20px;"><?php echo ($field->type!='Spacer') ? $field->input : "&#160;"; ?></div>
            <?php endif;?>
        <?php endforeach;?>
            </div>

    <?php endif;?>
<?php endforeach;?>
        <div id="agree-text">By clicking "Create my account" (below), you signify your agreement to the <a href="/legal/terms-and-conditions" target="_blank">terms & conditions</a>, <a href="/legal/disclaimer" target="_blank">disclaimer</a> and <a href="/legal/privacy-policy" target="_blank">privacy policy</a> (including the use of cookies).</div>

        <div>

<div style="float:left;"><button type="submit" class="validate" id="createmyaccountbuttonbluelarge"></button></div>
            <div style="font-size:12px;display:inline-block;margin-left:20px;padding-top: 9px;float: left;"><a href="/store/index.php?option=com_virtuemart&view=category&virtuemart_category_id=1&Itemid=104">Cancel account creation</a></div>
            <input type="hidden" name="option" value="com_users" />
            <input type="hidden" name="task" value="registration.register" />
            <?php echo JHtml::_('form.token');?>
        </div>
    </form> 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:41:38.200

```
 <div style="margin-bottom:8px;">
                <?php echo $field->label; ?><a href="index.php">Link</a>   
            </div> 
```

您应该能够像上面一样将其添加为这部分代码的一部分。

# silverstripe - 部分缓存成员

> ID：15257446
> 
> 赞同：1
> 
> 时间：2013-03-06T20:34:24.317
> 
> 标签：silverstripe

我正在使用 DataObjectsAsPage 模块。它返回一个 Datalist ($Items) 到循环遍历每个 $Item 的持有者页面。我也在尝试为页面开发部分缓存策略。我在文档中读到不能将缓存块放在循环内，所以在我的 DataObjectsAsPageHolder 页面中，我有以下内容：

```
<% cached 'items', LastEdited, CacheSegment %>
    <% loop $Items %>
        $Me
    <% end_loop %>
<% end_cached %> 
```

我检查了 silverstripe-cache/cache 目录，这似乎正在缓存 $Items 列表。

问题是我已经为每个 $Item 添加了一个 DataExtension，它允许管理员根据 CurrentMember 的组设置是否可以查看 $Item。因此，在每个 $Me 模板中，我都有以下内容：

```
<% if HasAccess %>
<% end_if %> 
```

我有两个问题：

1.  给定上面的缓存键，如果授权成员是第一个查看页面的人，那么页面将被缓存，并且在后续页面查看中将专有材料显示给非成员。

2.  如果我将缓存键调整为以下内容：

    ```
    <% cached 'items', Items.max(Created), CacheSegment unless CurrentMember %>
        <% loop $Items %>
            $Me
        <% end_loop %>
    <% end_cached %> 
    ```

然后每个 $Me 模板中的内容永远不会为成员缓存 - 这是我网站查看者的最大部分。

有没有办法可以缓存成员和非成员的 $Items 列表，并且仍然能够在循环内对 $Item 使用 HasAccess 检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T05:48:46.040

最简单的解决方案可能是将当前成员的 ID 添加到缓存键中。

```
<% cached 'items', LastEdited, CacheSegment, CurrentMember.ID %>
    <% loop $Items %>
        $Me
    <% end_loop %>
<% end_cached %> 
```

但是，这将为每个注册成员唯一地缓存块。为了使缓存更有用，您应该在缓存键中使用当前成员的组。不幸的是，据我所知，没有简单的方法可以为成员获取模板缓存密钥就绪组列表。

解决这个问题的最简单方法可能是`GroupsCacheKey`在你的类中添加一个函数`Page`。这是一个有点肮脏的解决方案，但它应该有效地工作。

```
// Untested function
public function GroupsCacheKey() {
    if ($member = Member::currentUser()) {
        return implode('', $member->Groups()->map('ID', 'ID')->toArray());
    }
    return 'nonmember';
} 
```

然后在您的模板中：

```
<% cached 'items', LastEdited, CacheSegment, GroupsCacheKey %>
    <% loop $Items %>
        $Me
    <% end_loop %>
<% end_cached %> 
```

在某个地方有比这更好的解决方案，但它会起作用。

# hadoop - 带有 zip 输入文件的 Hadoop 流式传输

> ID：15257447
> 
> 赞同：2
> 
> 时间：2013-03-06T20:34:28.013
> 
> 标签：hadoop, zip, hadoop-streaming

我正在尝试运行一个流式作业，其中输入文件是 zip 文件中的 csv。我尝试使用[它](http://cotdp.com/2012/07/hadoop-processing-zip-files-in-mapreduce/)，但它似乎不适用于 CDH4（我收到错误消息`class com.cotdp.hadoop.ZipFileInputFormat not org.apache.hadoop.mapred.InputFormat`）

任何人都知道我可以用于流式传输 zip 文件的输入文件阅读器吗？如果可能的话，我正在寻找一个多文件阅读器（可以给出顶级目录）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:36:13.070

我最终写了[zipstream](https://bitbucket.org/tebeka/zipstream)。

请注意，仅处理 zip 中的第一个文件，稍后我可能会添加对多个文件的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:15:23.363

输入格式有两个 hadoop api。mapred.InputFormat 和 mapreduce.InputFormat。

mapreduce 是较新的 API，如果可以的话，您应该使用它。

我会检查 ZipInputFormat 实际实现的 InputFormat。如果它实现了 mapreduce 版本，您需要将您的工作转移到第二个 API。

一些背景知识：在早期的 Hadoop 版本中，“mapred”被贬低，取而代之的是“mapreduce”，这是一种更新、更快、更清晰的实现。不幸的是，这个新 API 没有包含旧 API 的所有功能，因此在最近的 Hadoop 版本中，“mapred”被恢复，现在有两个 API 基本上做同样的事情。

# backbone.js - Backbone.marionnette - 重新绑定事件与创建新视图

> ID：15257449
> 
> 赞同：6
> 
> 时间：2013-03-06T20:34:31.167
> 
> 标签：backbone.js, marionette, backbone-events

我有一个`Layout`有几个标签的。单击这些选项卡之一将`show`在页面内容中显示适当的复合视图`region`。在不同的选项卡之间来回导航后，我注意到复合视图已经失去了在集合重置和模型更改时呈现的本机绑定。

`_initialEvents`有没有办法在第二次显示视图时重新绑定复合视图中使用的事件，或者我应该在每个`show`选项卡时创建一个新的复合视图？

目前我正在创建我的所有视图`initialize`，`Layout`然后`show`在单击选项卡时与视图一起使用。

```
initialize: function(){
    _.bindAll(this);

    //     Tabs
    this.places_page   = new Places_Layout();
},

show_places_page: function(){

    this.content.show(this.places_page);
    this.places_page.delegateEvents();
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T15:50:28.993

每次从选项卡切换到选项卡时，您不必创建布局/项目/复合/集合视图，相反，您可以按照您的方式将内容保存在变量中，您遇到的问题是变量每次要呈现内容时都会重新声明。解决方案是您必须验证该变量（this.places_page）是否已声明，如果没有将其附加到视图中，因此当您多次调用它时，它将保持相同的布局视图没有任何问题，只需注意在渲染时主视图（包含区域的视图）嵌套的子视图（在区域中）将丢失，直到通过它们进行新的导航。

```
initialize: function(){
    _.bindAll(this);

    // You can asign a diferent variable for each view so when you call show_places_page it will render with the same view.

    if (!this.places_page){
         this.places_page   = new Places_Layout();
    }

    // other tab        
    if (!this.other_page){
         this.other_page   = new OtherPage_Layout();
    }

},

show_places_page: function(){

    this.content.show(this.places_page);
    this.places_page.delegateEvents();
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T19:05:29.957

Marionette(v.1) onwords uses Backbone.BabySitter to manage child views .

In your case you do the same. Just create a containter to store all tab view. Later query the container to return the view you need to display.

```
this.tabViewsContainer = new Backbone.ChildViewContainer();
this.tabViewContainer.add(new CustomView(),'tab1');
this.tabViewContainer.add(new SecondCustomView(),'tab2'); 
```

To Later Show the view just do this

```
var custv = container.findByCustom("tab1");
this.content.show(custv); 
```

In close method your layout view successfully close all view in container

```
this.tabViewsContainer.each(function(view){view.close()}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T01:58:09.153

这听起来对我来说不是最好的方法。

您应该使用布局的区域管理器来显示视图，而不需要您定义的功能。

我会采用这种方法

```
var view = new CustomView();
layout.content.show(view);` 
```

然后稍后：

```
var newView = new SecondCustomView();
layout.content.show(newView); 
```

如果你想继续你正在走的路，那么你最好使用这种方法：

```
initialize: function () {
    _.bindAll(this);
},
show_places_page: function () {
    var placesLayout = new Places_Layout();
    this.content.show(placesLayout);
} 
```

那有意义吗？

如果没有看到更多的结构，很难提出最佳行动方案。

您在其中创建视图是否有原因`initialize`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-23T14:45:42.533

您不应该在初始化中创建所有视图，因为这会导致内存泄漏，这就是您应该动态创建视图的原因。此外，我建议创建一个通用函数来在您的内容区域中显示视图，以提高代码的可重用性。我建议您使用以下解决方案：

```
//define the regions of your layout view
regions: {
  content: '#content'
},
//Maintain a config for the tab content view classes.
contentViews: {
  tab1: Tab1View,
  tab2: Tab2View,
  tab3: Tab3View
},
//keeps all the view instances
viewInstances: {},
/*
 * show tab function is called when you click a tab item.
 * Consider each tab has a attribute for tab name.
 * For example HTML of your one tab is like:
 * <div data-tab-name="tab_name">Tab <tab_name></div> 
 */
showTab: function (e) {
  var tabName = $(e.currentTarget).attr("data-tab-name");
  /*
   * code for showing selected tab goes here...
   */

  //check and create the instance for the content view
  if (!this.viewInstances[tabName]) {
      this.viewInstances[tabName] = new this.contentViews[tabName]();
  }
  //Then here you are actually showing the content view
  this.content.show(this.viewInstances[tabName]);
  this.viewInstances[tabName].delegateEvents(); //this is to rebind events to the view.
} 
```

# c# - 如何在运行时旋转后保存图像？

> ID：15257456
> 
> 赞同：0
> 
> 时间：2013-03-06T20:35:34.010
> 
> 标签：c#, wpf, image, printing, richtextbox

我正在使用 WPF，并且我有一个应用程序，用户将图像文件加载到 a`RichTextBox`中，他们可以旋转图像并打印它。我不确定为什么旋转后的图像在屏幕上显示时不会打印。相反，它会打印原件。我是新手，所以任何帮助将不胜感激！

以下是我的应用程序的代码。单击检索文件时的代码`Button`：

```
private void retrieve_button_Click(object sender, RoutedEventArgs e)
{
  //Retrieve the file or image you are looking for
  OpenFileDialog of = new OpenFileDialog();

  of.Filter = "Formats|*.jpg;*.png;*.bmp;*.gif;*.ico;*.txt|JPG Image|*.jpg|BMP image|*.bmp|PNG image|*.png|GIF Image|*.gif|Icon|*.ico|Text File|*.txt";

        var dialogResult = of.ShowDialog();

        if (dialogResult == System.Windows.Forms.DialogResult.OK)
        {               
                try
                {

                    System.Windows.Controls.RichTextBox myRTB = new System.Windows.Controls.RichTextBox();                                     
                {
                    Run myRun = new Run();

                    System.Windows.Controls.Image MyImage = new System.Windows.Controls.Image();
                    MyImage.Source = new BitmapImage(new Uri(of.FileName, UriKind.RelativeOrAbsolute));

                    InlineUIContainer MyUI = new InlineUIContainer();
                    MyUI.Child = MyImage;

                    rotateright_button.IsEnabled = true;
                    print_button.IsEnabled = true;

                    Paragraph paragraph = new Paragraph();
                    paragraph.Inlines.Add(myRun);
                    paragraph.Inlines.Add(MyUI);

                    FlowDocument document = new FlowDocument(paragraph);
                    richTextBox.Document = document;                       
                }
            }

            catch (ArgumentException)
            {
                System.Windows.Forms.MessageBox.Show("Invalid File");
            }

        }
    } 
```

单击右旋转按钮时，将执行以下代码：

```
 RotateTransform cwRotateTransform;
    private void rotateright_button_Click(object sender, RoutedEventArgs e)
    {
        richTextBox.LayoutTransform = cwRotateTransform;

        if (cwRotateTransform == null)
        {
            cwRotateTransform = new RotateTransform();
        }

        if (cwRotateTransform.Angle == 360)
        {
            cwRotateTransform.Angle = 0;
        }
        else
        {
            cwRotateTransform.Angle += 90;
        }
    } 
```

加载并旋转后`Image`，用户可以使用以下代码进行打印：

```
 private void InvokePrint(object sender, RoutedEventArgs e)
    {
     System.Windows.Controls.PrintDialog printDialog = new System.Windows.Controls.PrintDialog();
        if ((bool)printDialog.ShowDialog().GetValueOrDefault())
        {
            FlowDocument flowDocument = new FlowDocument();

            flowDocument = richTextBox.Document;
            flowDocument.ColumnWidth = printDialog.PrintableAreaWidth;
            flowDocument.PagePadding = new Thickness(65);
            IDocumentPaginatorSource iDocPag = flowDocument;

            printDialog.PrintDocument(iDocPag.DocumentPaginator, "Print Document");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:39:46.783

试试这个（在第一行替换 yourImageControl，指定你想要的 RotateFlipType 并确保引用 System.Drawing dll）：

```
System.Drawing.Bitmap bitmap = BitmapSourceToBitmap((BitmapSource)YourImageControl.Source);
bitmap.RotateFlip(System.Drawing.RotateFlipType.Rotate90FlipNone);

public static System.Drawing.Bitmap BitmapSourceToBitmap(BitmapSource bitmapsource)
{
    System.Drawing.Bitmap bitmap;
    using (MemoryStream outStream = new MemoryStream())
    {
        BitmapEncoder enc = new BmpBitmapEncoder();
        enc.Frames.Add(BitmapFrame.Create(bitmapsource));
        enc.Save(outStream);
        bitmap = new System.Drawing.Bitmap(outStream);
    }
    return bitmap;
} 
```

[转换的另一种选择...](https://stackoverflow.com/a/5709472/1418486)

PS 如果您发布一些代码并告诉我们更多有关[您尝试过](http://whathaveyoutried.com/)的内容，您会在更短的时间内得到更好的答案。

# objective-c - 在objective c / cocos2d中构建一个迷你物理引擎

> ID：15257466
> 
> 赞同：0
> 
> 时间：2013-03-06T20:35:52.020
> 
> 标签：objective-c, cocos2d-iphone, physics-engine

我正在尝试构建一个超级简单的物理引擎，作为一种培训形式，并至少了解创建游戏物理的基础知识。我知道 box2d 和花栗鼠之类的东西提供了更多的可能性。但这不是我现在想要实现的。我想把我的简单代码提升到一个新的水平，并尝试有更现实的行为。我正在尝试遵循这个通用教程[http://www.wildbunny.co.uk/blog/2011/04/06/physics-engines-for-dummies/](http://www.wildbunny.co.uk/blog/2011/04/06/physics-engines-for-dummies/)但语法让我感到困惑，我不完全确定如何应用一些东西。

现在我有一个简单的球类，它是从 CCNode 派生的（使用 cocos2D 框架），该类有它自己的更新方法，使它在随机方向上移动并反弹边缘。

```
-(void) update:(ccTime ) time {
   [self moveCircle:time];
}

- (void) moveCircle: (ccTime) time {
    CGSize screenSize = [[CCDirector sharedDirector]winSize];

    // limit the velocity 

    if (self.vx > maxVel) {
        self.vx = maxVel;
    } else if (self.vx < minVel) {
    self.vx = minVel;
    } else if (self.vy > maxVel){
        self.vy = maxVel;
    } else if (self.vy < minVel){
        self.vy = minVel;
    } else {
        self.vx += accelx;
        self.vy += accely;
    }

    self.position = ccp(self.position.x+(self.vx*time), self.position.y+(self.vy *time));

    // bounce of the edges 

    if (self.position.x > screenSize.width-offset) {
        self.vx *=-1;
        accelx *=-1;
        self.position = ccp(screenSize.width-offset, self.position.y);
    } else if (self.position.x < offset) {
        self.vx *=-1;
        accelx *=-1;
        self.position = ccp(offset, self.position.y);
    } else if (self.position.y < offset) {
        self.vy *=-1;
        accely *=-1;
        self.position = ccp(self.position.x,offset);
    } else if (self.position.y > screenSize.height-offset) {
        self.vy *=-1;
        accely *=-1;    
        self.position = ccp(self.position.x, screenSize.height-offset);
    }
} 
```

在我的主课中，我有一组随机移动的球，我使用以下代码来检测它们之间的碰撞

```
- (void) detectCollision {

for (int i=0;i<[circlesP1 count];i++){
    for (int j=i+1;j<[circlesP1 count];j++){
        if(ccpDistance([[circlesP1 objectAtIndex:i]position],[[circlesP1 objectAtIndex:j]position])<80) {

            P1Circle *circle1 = [circlesP1 objectAtIndex:i];
            [circle1 reverseDirection];
            P1Circle *circle2 = [circlesP1 objectAtIndex:j];
            [circle2 reverseDirection];
        }
    }
} 
```

}

当检测到碰撞时，我的球类中的以下方法被执行

```
- (void) reverseDirection {
    self.vx *=-1;
    accelx *=-1;
    self.vy *=-1;
    accely *=-1;
} 
```

这可行....但它看起来相当笨拙（代码和视觉结果）。我知道要进行更逼真的碰撞，我必须计算**反射向量**。我找到了它的公式。但我不知道如何将它应用到我的球类中。任何有助于改进和开发此代码的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:37:28.320

**给你一些想法。**以减少 CPU 负载。

而不是计算你的距离，这在 CPU 方面可能会花费很多。你可以只测试一个更简单的值

静态内联 BOOL isClose(a,b) return { return ( abs(Xa - Xb) < epsilon || abs(Ya - Yb) < epsilon );}

**另一个改进可能是：**

if isFar(a,b) 在 10 个循环时间内刷新距离。我想没有必要向您展示如何实现 isFar。然后你需要一个数组来存储一种计数器来知道什么时候刷新距离。在时间的每一步，您都会将所有计数器减一。If is close counter=1（在下一步刷新） If is far counter=10

# html - 高度为 100% 且溢出的元素

> ID：15257467
> 
> 赞同：5
> 
> 时间：2013-03-06T20:35:53.263
> 
> 标签：html, css, overflow

我基本上需要实现的是让一个元素（div、span、table 等）消耗其父高度的 100% 并在其内容更高时显示滚动。

问题是，只有 chrome 和 IE in quirks 可以正常工作`height:100%; overflow: auto;`。标准中的 Firefox、Opera 和 IE（任何 IE 7+，任何“标准”）只是忽略溢出并将 html 元素拉伸到父大小以下。如果我设置了固定高度，它可以工作，但在渲染之前我无法确定可用高度，有多个可能的值。

简化示例（[为此使用 jsFiddle](http://jsfiddle.net/KLQEp/)）：

```
<body>
    <div id="parent">
        <table id='container'>
            <tr>
                <td>
                    <div id='element-in-question'>
                        <!--Content long enough to stretch the div-->
                    </div>
                </td>
            </tr>
            <tr>
            <td id='footer-cell'>
                <div id='footer'>I'm footer<div>
            </td>
            </tr>
        </table>
    </div>
</body> 
```

CSS：

```
#parent { height:500px; width:500px; position:absolute; }
#container { height: 100%; width:100%; }
#element-in-question { height:100%; width:100%; overflow: auto; }
#footer-cell { height:30px;}
#footer { height: 30px; } 
```

在真正的应用程序中，所有这些东西都在 iframe 中运行，表格用于渲染页眉和页脚等。请不要建议停止使用表格，它是具有 100 多个需要注意的地方的遗留应用程序。只有 CSS 的解决方案是理想的。

还有一点：它应该在 Chrome、IE10 标准模式下工作。不支持FF、Opera和Safari，IE9及以下处理方式不同。

**更新**：大约有十个不同高度的页脚，理想情况下，解决方案不应依赖于固定的页脚高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:57:58.410

干得好：

[更新了小提琴。](http://jsfiddle.net/KLQEp/7/)

问题是它将`height: 100%;`填充下一个定义的容器。无论出于何种原因，表都不被视为用于该目的的有效容器。所以我们需要做的是利用表格布局的一些古怪之处。

```
position: absolute;
top:5px; left:5px;
right: 5px;
bottom: 40px;
overflow: auto;
border: 1px solid green;
background-color: #eee; 
```

不需要在`td`. 不要问我为什么，也许有人比我更博学。

无论如何，我们可以强制它扩展以填充一定数量的空间，同时仍然允许：

1.  可见的页脚。
2.  存在的填充（即使它在*技术上*不是填充。）
3.  这个解决方案可以在跨浏览器环境中工作。

真的希望这会有所帮助；如果没有，我很乐意再试一次。

* * *

**更新**

您说 javascript 不是您想要的方式，但这里有一个使用 jQuery 的简短解决方案，它实际上可以解决问题：

**[更新小提琴](http://jsfiddle.net/KLQEp/10/)**

```
$('td > div').each(function() {
    var t = $(this);
    var text = t.html();
    t.hide();
    t.height(t.parent().height());
    t.show(text);
}); 
```

**为什么这样有效：**

需要其父级在 100% 高度起作用之前具有定义的`div`高度，但这不是您的选择，因为您已经声明这都是动态内容。没问题。我们只需要 jQuery 将计算出的高度推送到`div`浏览器已经渲染后的高度。很简单，对吧？

嗯，没那么快。Div 并不意味着受表格单元格的限制，至少不理想。我们已经有一些东西可以在 中用作逻辑的、独立的容器`td`，并且如果它已经有大量内容溢出边界，那么它`div`并不关心它的高度是多少。`td`当我们去查询 that 的高度时`td`，不管它*实际上*是什么，它都会报告它比它包含的元素大。`div`因此，如果您在注释掉我们清空`td`.

**那么我们该怎么办？**

好吧，我们从`div`. 现在它只是一个外壳，在任何情况下它都会比它的容器小。这意味着当我们查询它时，它`td`不会~~谎报~~它的大小，因为它自信地包含它的孩子。

一旦我们从 TD 那里得到真相，我们就会告诉`div`它它的父级报告的大小是它需要的大小，并将其内容返回给它。

瞧。你现在有一个`div`真正**尊重它的父母的**人。如果只有真正的孩子那么容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:29:09.100

**HTML表格的基本行为**

[这是一个演示](http://jsfiddle.net/Matt_Coughlin/HUCJm/)，展示了小内容和超大内容如何影响表格的宽度和高度。表格旁边有灰色的标尺，显示表格的预期尺寸。[独立版本的演示](http://fiddle.jshell.net/Matt_Coughlin/HUCJm/show/)。

在表格单元格中滚动超大的可变大小内容似乎在某种程度上垂直工作，而不是水平工作。

对于身高，在不同的浏览器中有 3 种不同的结果：

1.  桌子的整体高度是正确的。Chrome 和 Safari（Webkit 浏览器）会出现这种情况。
2.  内容行占据了整个表格的预期高度，而页脚行为表格增加了额外的高度，导致表格比预期的高一点。Firefox 和 Opera 以及标准模式下的 IE7/8/9/10 会出现这种情况（尽管在 IE 中，页脚单元格甚至高于页脚内容的高度，这会显着增加表格的额外高度）。
3.  内容行的整个高度显示时没有滚动条，导致表格比预期的高得多。IE7/8/9/10 在 Quirks 模式下会出现这种情况。

对于宽度，所有浏览器的结果都与 #3 相当（始终显示完整的内容宽度，没有滚动条）。

**CSS 妥协**

似乎最接近 CSS 解决方案的方法是设置一个固定的高度`#element-in-question`（尽管让它保持可滚动），并允许页脚的高度不同。表格的整体大小会因不同页脚的高度不同而有所不同。如果页脚的高度差很小，或者如果整个表格始终具有相同的高度并不重要，那么这可能是一个合理的折衷方案。

问题中发布的 CSS 看起来类似于以下内容（`#element-in-question`当与平均或最常见的页脚高度相结合时，给出确定为最佳的任何高度）。

```
#parent { width:500px; position:absolute; }
#container { width:100%; }
#element-in-question { height:450px; width:100%; overflow: auto; }
#footer-cell { }
#footer { } 
```

这是问题中发布[的演示的更新版本](http://jsfiddle.net/Matt_Coughlin/WScx8/1/)，使用上面列出的更改（在：IE7/8/9/10 标准和 Quirks 模式、Firefox、Chrome、Safari、Opera 中测试）。如果在旧版本的 IE 中运行 JSFiddle 有困难，请尝试这个[独立版本的演示](http://fiddle.jshell.net/Matt_Coughlin/WScx8/1/show/)。

网站设计似乎超出了 HTML 表格的能力范围。除非可以对设计施加一些限制（例如此处描述的限制），否则看起来这将需要 JavaScript 或 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:47:00.047

我有一个解决方法。`tbody`标签是在 Firefox 中自动添加的，这会导致问题。添加`height:100%`到您的`td`和`height:90%`您的`tbody`. 该`tbody`标签从未存在，因此您应该使用 css 添加它。

`table tbody{height:90%}`

[现场演示](http://jsfiddle.net/KLQEp/6/)

# javascript - JavaScript 历史对象导致 Google Maps API V3 在重新加载时失败

> ID：15257469
> 
> 赞同：1
> 
> 时间：2013-03-06T20:35:57.373
> 
> 标签：javascript, jquery, google-maps-api-3

在我们的网络应用程序上，它显示用户图像列表，您单击图像，它会显示在谷歌地图上显示的地理位置数据。这一切都很好，但为了保持设计简洁明了，我使用了“后退”按钮。该按钮仅包含使用 JavaScript 历史对象“history.go(-1);”。

一旦用户被送回他们的图像列表，一切都很好，他们可以在这个区域使用应用程序的所有功能。此外，如果他们单击之前查看过的图像以外的任何其他图像都可以，图像查看器将初始化，谷歌地图 api 也将初始化。

问题是当他们点击后退图像，然后决定他们不希望实际返回，然后重新访问相同的图像。然后，这将停止 google maps api 的所有初始化。

似乎由于某种原因，使用这种返回方法会导致 initialize(); 在 body="" 中的功能不起作用。但是我被引导相信这不是功能而是身体本身？

我已经阅读了很多关于地图 API V3 的 Google 文档，但围绕这个问题似乎没有太多内容。也许我是目前唯一一个愚蠢到可以解决这个问题的人。

任何人都可以阐明历史对象的内部工作原理，并可能为我指明解决方案的方向。

非常感谢所有回复，

杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:56:22.373

听起来您需要使用 bfcache （后向缓存）事件来调用您的初始化函数。

[https://developer.mozilla.org/en-US/docs/Working_with_BFCache](https://developer.mozilla.org/en-US/docs/Working_with_BFCache)

# android - 在 Android 中使用 getFilesdir 写入文本文件

> ID：15257471
> 
> 赞同：2
> 
> 时间：2013-03-06T20:36:01.673
> 
> 标签：android

我正在使用环境变量将一些数据写入外部存储。它工作正常。我想尝试写入内部存储。使用以下代码时出现错误。

```
public class B{
  public void write(long l){  
  File root = new File(getFilesDir(), "Traces"); 
  File gpxfile = new File(root, "Collection.txt");
  if(gpxfile.exists()){
    FileWriter writer = new FileWriter(gpxfile,true);
    writer.append(Long.toString(l));
    writer.flush();
    writer.close();
        } 
```

我得到的错误是“方法 getFilesDir() 未定义”创建方法 getFilesDir()。我尝试分配上下文。就像是

```
context.getFilesDir() 
```

并定义

```
Context context = MainActivity();% in main activity from where I am calling this writefunction. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:04:38.277

尝试将以下内容添加到清单文件中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

或者它可能是

```
<uses-permission android:name="android.permission.WRITE_INTERNAL_STROAGE"/> 
```

你可以同时检查它们。

# c - 在开罗绘制和定位许多 png 文件

> ID：15257472
> 
> 赞同：0
> 
> 时间：2013-03-06T20:36:02.803
> 
> 标签：c, gtk, cairo

我的程序运行一个带有一堆交互圆圈的物理引擎，我试图在每个圆圈上绘制一个小行星 png 图像。

我知道你可以从一个 png 文件中创建一个表面：

```
cairo_surface_t *image = cairo_image_surface_create_from_png ("image.png"); 
```

我试图弄清楚如何将 png 文件缩放和绘制到正确的尺寸？根据我对 API 的了解，我想我可能需要调用 cairo_image_surface_get_data ()，但我不知道该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:11:07.260

通常，您需要花一些时间阅读[cairo API 文档](http://cairographics.org/manual/index.html)，例如用于扩展您使用`cairo_scale`或`cairo_transform` [继续阅读的内容](http://cairographics.org/manual/cairo-Transformations.html)

因此，在您使用上述功能设置视图矩阵后，您所要做的就是

```
cairo_set_source_surface (cr, surface, x, y);
cairo_paint (cr); 
```

（免费取自[http://zetcode.com/gfx/cairo/cairoimages/](http://zetcode.com/gfx/cairo/cairoimages/)）

# javascript - 如何创建多个 if 和 else？

> ID：15257475
> 
> 赞同：1
> 
> 时间：2013-03-06T20:36:28.547
> 
> 标签：javascript, jquery, if-statement

我是 javascript 新手，当屏幕尺寸缩小到 480 像素时，我有这个 jQuery 替换一张图片。问题是我想添加更多图像来做同样的事情。我要工作的唯一解决方案是一遍又一遍地粘贴代码并用新值替换图像值。那么如何在同一个脚本中创建多个 if 和 else 呢？

```
$(document).ready(function() {  

function imageresize() {  
var contentwidth = $('body').width();  
if ((contentwidth) < '480'){  
$('.spelguide').attr('src','bilder/480/spelguide.jpg');  
} else {  
$('.spelguide').attr('src','bilder/spelguide.jpg');  

}  
}  

imageresize();//Triggers when document first loads      

$(window).bind("resize", function(){//Adjusts image when browser resized  
imageresize();  
});  

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:40:22.787

链接多个 if-else-ifs 的通常模式是做类似的事情

```
if (some_condition) {
  // do stuff
} else if (some_other_condition) {
  // do other stuff
} else if (another_condition) {
  // do another thing
} else {
  //default case
} 
```

这不仅适用于 Javascript。在大多数其他带有 if 语句的编程语言中，它看起来与此类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:39:51.117

你想要 If..Else If..Else 吗？如果是这样[http://www.w3schools.com/js/js_if_else.asp](http://www.w3schools.com/js/js_if_else.asp)给出了一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:48:28.720

忘记用 javascript 做所有这些，让 CSS 完成大部分工作。只需使用 javascript 在 body 上设置一个确定类。

Javascript：

```
$(window).bind("resize", function(){  
   var body = $('body');
   var bodyWidth = body.width();
   body.toggleClass('size-480', bodyWidth < 480);
}); 
```

HTML：

```
 <img src="transparant.gif" class="img-spelguide" /> 
```

CSS：

```
img.img-spelguide {
   width: 400px; /*adjust accordingly*/
   height: 400px; /*adjust accordingly*/
   background: url(bilder/spelguide.jpg) 50% 50% no-repeat;
}

.size-480 img.img-spelguide {
   width: 200px; /*adjust accordingly*/
   height: 200px; /*adjust accordingly*/
   background: url(bilder/480/spelguide.jpg) 50% 50% no-repeat;
} 
```

您仍然可以使用纯 JavaScript 替换大量图像，但 CSS 更适合。

笔记。如果您可以使用@media-queries，请这样做，这是最好的选择，但是如果您需要支持旧版浏览器，则显然媒体查询已经过时 =(

让我们也加入 javascript 解决方案，以取得良好的效果。

HTML：

```
<img src="bilder/spelguide.jpg" data-small="bilder/480/spelguide.jpg" /> 
```

JAVASCRIPT：

```
$(window).bind("resize", function(){  
   var body = $('body');
   var useSmall = body.width() < 480;
   $('img[data-small]').each(function(){
      var img = $(this);
      var big = img.data( 'big') || img.attr('src');
      var small = img.data('small');
      // make sure we have the original (big) src stored.
      img.data( 'big', big );
      img.attr( 'src', useSmall ? small : big );
   });
}); 
```

还有一些优化的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T20:58:45.510

这就是我要做的（假设我正确理解了你的问题）。我想说的简短答案是：**使用“for”循环**。

*   首先，我会给每个图像一个唯一的 id（而不是一个类）：
    *   `<img id="example_img_id1" src="..." />`
*   在我的 JavaScript 中，我将创建一个[JSON 对象](http://json.org)，该对象具有一个 (key : value) 对，用于存储每个图像的 (id : image_name)（见下文）。
*   然后，我将使用迭代 JSON 对象的[for/in 循环。](http://www.w3schools.com/js/js_loop_for.asp)
*   在您的 JSON 对象中，将每个唯一的 img id 添加为键，并将图像的名称添加为值。对您拥有的所有图像执行此操作。

    ```
    // get the width of your body
    var contentwidth = $('body').width();  

    // key: value -----> '#img_id': 'src'
    var imgs = {
        '#example_img_id1' : 'imgname1.jpg',
        '#example_img_id2' : 'imgname2.jpg',
        '#example_img_id3' : 'imgname3.jpg',
        // ...
        '#example_img_idn' : 'imgname4.jpg'
    };

    // iterate over each image and create its new src
    for(var img in imgs) {
        // set the value of your src string
        var src = ''; 

        if(contentwidth < 480) { // if the screen size is less than 480
            src = '/bilder/480/' + imgs.img; // add the "/480/" directory
        } else { // anything 480 and larger
            src = '/bilder/' + imgs.img; // don't add "/480/"
        }

        // for every image in your JSON object (imgs),
        // it will create a jQuery object - $(img) - and
        // update its src attribute based on the screen width.
        $(img).attr('src', src);
    } 
    ```

给猫剥皮的方法不止一种，这绝不是“最好”或“最有效”的方法。希望它至少为您指明了正确的方向。这一切有意义吗？

# actionscript-3 - AS3 播放多种分辨率、资产和布局 iphone 和 ipad 应用程序

> ID：15257482
> 
> 赞同：1
> 
> 时间：2013-03-06T20:36:44.183
> 
> 标签：actionscript-3, air

我正在 AS3/Air 中构建一个应用程序，我想同时针对 iPhone 和 iPad 分辨率。我了解 iPhone 和 iPad 之间的不同纵横比，但是我目前正在构建的应用程序具有不同的布局和略微不同的内容，以适应不同的屏幕尺寸。我目前已经构建了 2 个版本的应用程序，一个用于 iPhone，另一个用于 iPad。所有资产都是在考虑目标平台的情况下创建的，但现在，我想将这 2 个应用程序合并为一个。

我想我会将每个屏幕文件重命名为 iphone_login、ipad_menu、ipad_settings 等，并将它们全部包含在同一个版本中。然后在启动过程中，检查用户使用的设备并设置 iphone_ 或 ipad_ 并同时设置分辨率。

我不喜欢从 iphone 分辨率到 ipad 的黑边，所以我的问题是：

1.  考虑到我想要的结果，我的方法是否合适？
2.  如何确定用户使用什么设备来显示正确的文件、资产和分辨率？

我知道通过添加 2 组资产和 2 组代码文件，应用程序的大小将至少增加一倍，但考虑到设计布局和内容的差异，除了保留 2 个应用程序之外，我没有看到其他解决方案。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:20:58.803

有什么问题？iPad 和 iPhone 有不同的分辨率和 dpi 组合，检查它们并识别当前平台。像这样按类获取所需的视图：

```
public static const PAGE1:String = "page1";
public static const PAGE2:String = "page2";

private static var PHONE_VIEW_NAME_2_CLASS:Dictionary = new Dictionary();
private static var TABLET_VIEW_NAME_2_CLASS:Dictionary = new Dictionary();

public class ViewProvider 
{
    {
        PHONE_VIEW_NAME_2_CLASS[ViewProvider.PAGE1] = Page1PhoneView;
        PHONE_VIEW_NAME_2_CLASS[ViewProvider.PAGE2] = Page2PhoneView;

        TABLET_VIEW_NAME_2_CLASS[ViewProvider.PAGE1] = Page1TabletView;
        TABLET_VIEW_NAME_2_CLASS[ViewProvider.PAGE2] = Page2TabletView;
    }
    public function ViewProvider()
    {
    }

    public static function isTablet():Boolean {
    ...analyze Capabilities.screenResolutionY, Capabilities.screenResolutionX and Capabilities.screenDPI
    }

    public static function getViewClass(name:String):Class
    {
        return isTablet() ? TABLET_VIEW_NAME_2_CLASS[name] : PHONE_VIEW_NAME_2_CLASS[name];
    }

} 
```

在你的程序中

`navigator.pushView(ViewProvider.getViewClass(ViewProvider.PAGE1))`

所有协调的，填充和另一个位置编号，字体大小等都以乘数正确，具体取决于运行时 dpi，以类似方式...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:40:53.310

我正处于类似问题的中间。

我的解决方案是在文件池中以最佳分辨率保存图像，然后在应用程序启动时根据设备缩小它们。您也可以使用非动画矢量资源执行此操作，并将它们放入 bitmapData 对象。

另一种选择是始终将具有所需最大分辨率文件的资产池加载到内存中，并在需要时在运行时缩小它们。如果您将在不同的地方以不同的大小使用一些资产，例如图标，这很有效。

至于代码，您应该找到一种方法来分离管理数据的代码、管理逻辑的代码和“绘制”UI 的代码。这样，您将能够重用两个版本中的大部分代码，但只更改“绘制” UI 的代码。查看 MVC 模式以获取更多信息。

# android - 我的 ProgressBar 在加载我的 WebView 时不会显示，为什么？

> ID：15257483
> 
> 赞同：0
> 
> 时间：2013-03-06T20:36:45.417
> 
> 标签：android, asynchronous, android-asynctask, android-webview, android-progressbar

我创建了一个`WebViewActivity`扩展`Activity`并显示了`WebView`我的应用程序内部，而不是重定向到浏览器。

所以我试图在视图加载时`AsyncTask`显示我的。`ProgressBar`但是进度条根本不显示。这是我正在使用的代码：

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebView;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.app.Activity;

public class WebViewActivity extends Activity {

    WebView webView;
    TextView textView;
    ProgressBar bar;

    private class Async extends AsyncTask<Void, Void, Void> {

        protected Void doInBackground(Void... arg0) {
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            String url = new String(getIntent().getStringExtra("url"));
            webView.getSettings().setLoadWithOverviewMode(true);
            webView.getSettings().setUseWideViewPort(true);
            webView.loadUrl(url);
            textView.setText(getIntent().getStringExtra("title"));
            bar.setVisibility(ProgressBar.INVISIBLE);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_web_view);

        vueText = (TextView) findViewById(R.id.barTitle);
        vueWeb = (WebView) findViewById(R.id.WebView);
        bar = (ProgressBar) findViewById(R.id.progressBar);
        bar.setVisibility(ProgressBar.VISIBLE);
        new Async().execute();
    }
} 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/grayBackground"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/barTitle" />

    <ScrollView
        android:id="@+id/sc1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/barTitle"
        android:fillViewport="true" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <WebView
                android:id="@+id/WebView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView>

    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:visibility="visible" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:41:15.847

`AsyncTask`您应该在方法中执行后台操作（加载 URL）`doInBackground()`。

在`onPostExecute()`UI 线程上调用，因此它会在运行时冻结 UI。

[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)有关详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:42:09.083

您必须`pubishProgress()`在`doInBackground`.

然后覆盖 onProgressUpdate

# xml - 需要帮助来生成 xpath

> ID：15257484
> 
> 赞同：0
> 
> 时间：2013-03-06T20:37:05.527
> 
> 标签：xml, xpath

我需要获取属性的值，该属性位于我知道同一元素中的值的属性后面两个位置。

例如：我知道 typeID="3307" 的属性，它位于 element 中。我需要的属性值是左侧两个位置。我该如何选择？

```
 ...
  <rowset name="skillBonusCollection" key="bonusType" columns="bonusType,bonusValue">
    <row bonusType="damageMultiplierBonus" bonusValue="5"/>
  </rowset>
</row>
<row typeName="Large Hybrid Turret" groupID="255" typeID="3307" published="1"> 
```

再说一次，我如何读取`typeName`只有`typeID=3307`在我手中的属性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:56:13.013

除非你已经知道`@typeID`我认为你做不到的位置。如果你这样做，xpath 将是：

```
//row[@typeID='3307']/@*[position() = $typeIDPosition - 2] 
```

但我认为没有职位会更简单和可读，因为你知道你想要@typeName：

```
//row[@typeID='3307']/@typeName 
```

# javascript - DateJS - this.fecha.getMonthName 不是函数

> ID：15257485
> 
> 赞同：0
> 
> 时间：2013-03-06T20:37:08.870
> 
> 标签：javascript, datejs

伙计们，我正在尝试从 DateJS 对象中获取月份名称。如果我 console.log 对象，我会得到它的所有功能。但是，如果我尝试使用，例如 getMonthName/getDayName/isBefore/isAfter/etc，您会收到一条错误消息，指出该函数不存在。

任何想法？

谢谢！

更新：

这是我的代码：

```
App.Views.DaysTable = Backbone.View.extend({
el: '#dtable',
template: _.template( App.Templates.DaysTable ),
templateTH: _.template( App.Templates.DaysTableTH ),

initialize: function(){
    // Defino la fecha corriente
    this.fecha = Date.today();
    // Defino los eventos de la navegacion
    var that = this;
    $('#prevWeekBtn').on('click', function(){
        that.lessWeek();
    });

    $('#nextWeekBtn').on('click', function(){
        that.plusWeek();
    });

    $('#todayBtn').on('click', function(){
        that.hoy();
    });
},

hoy: function(){
    this.fecha = Date.today();
    this.render();
},

plusWeek: function(){
    this.fecha.add(7).days();
    this.render();
},

lessWeek: function(){
    this.fecha.add(-7).days();
    this.render();
},
//between date
render: function(){

    var date = this.fecha;

    this.$el.html( this.template({ month: this.fecha.getMonthName() }) );
    var a = 1;
    while(a < 8){       
        this.$('tr#days').append( this.templateTH({dayName: date.getDayName(), dayDate: date.toString('dd')}) )
        date.addDays(1);
        a++;
    }

    this.collection.each( function(bed){
        this.fecha.add(-7).days();
        bed.set('fecha', this.fecha);
        var row = new App.Views.BookingsRow({ model: bed })
        this.$('tbody#days').append( row.render().el );
    }, this);

    this.fecha.add(-7).days();
    return this;
    // Muestro los dias en cada habitacion
}
}); 
```

这是错误消息： TypeError: this.fecha.getMonthName is not a function

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:33:54.133

我解决了那个问题。我不得不更改我的代码。事实证明，在最新版本的 DateJS 中，不再有 getMonthName/getDayName。现在，要打印月份名称，请使用：

```
Date.today().toString('MMMM'); 
```

或者一天：

```
Date.today().toString('dddd'); 
```

现在我遇到另一个问题，但我会打开另一个线程。

谢谢！

# reporting-services - 放大时 Reporting Services 图表文本模糊

> ID：15257491
> 
> 赞同：1
> 
> 时间：2013-03-06T20:37:20.807
> 
> 标签：reporting-services

Reporting Services 图表中的文本呈现为图像，而不是在放大时再次呈现。就像表/矩阵中的文本一样。

放大时如何强制它正确渲染并且不模糊文本？

# svn - 我可以查看某人将文件锁定在 svn 中多久了？

> ID：15257495
> 
> 赞同：2
> 
> 时间：2013-03-06T20:37:32.307
> 
> 标签：svn, tortoisesvn

我想知道是否可以看到有人在 Subversion 中锁定文件的时间（如果这很重要，请使用 TortoiseSVN？）？我知道如何查看谁锁定了它，但不确定是否可以查看多长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:42:42.530

*   存储库浏览器在最后一列中显示锁定信息。
*   单击`check repository`按钮后，“检查修改”对话框也会显示锁定信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:52:16.760

在命令行中，`svn info URL`将在文件上创建锁（如果存在）时为您提供。

# ios - 创建 Core Data 托管对象的困难

> ID：15257498
> 
> 赞同：1
> 
> 时间：2013-03-06T20:38:00.293
> 
> 标签：ios, objective-c, core-data, nsmanagedobject

目前我`AUser`在我的 sqlite3 应用程序数据库中看不到任何对象。

这是我必须创建用户的代码。我错过了什么吗？代码没有警告/错误。

```
AUser *user = [NSEntityDescription insertNewObjectForEntityForName:@"AUser" inManagedObjectContext:_managedObjectContext];  // _managedObjectContext is declared elsewhere

user.name = username;  //username is some string declared elsewhere / name is an attribute of AUser 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:40:57.320

您需要对上下文执行保存。

```
NSError* error = nil;
if(![context save:&error]) {        
    // something went wrong
    NSLog(@"Error saving context: %@\n%@", [error localizedDescription], [error userInfo]);
    abort();
} 
```

当您执行保存时，上下文中的数据将保存到持久存储协调器（因此在您的 sql 存储中）。

PS 基于与**@G 的讨论。Shearer**，在生产环境中，如果上下文保存失败，您可以优雅地处理错误。这意味着不使用`abort()`导致应用程序崩溃的调用。

```
NSError* error = nil;
if(![context save:&error]) {        
    // save failed, perform an action like alerting the user, etc.
} else {
    // save success
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T20:40:31.493

创建对象后需要调用 save 。例子：

```
NSError *error;
if ([user.managedObjectContext save:&error]) {
    //Success!
} else {
    //Failure. Check error.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:41:46.000

你需要打电话

```
NSError *error = nil;
[_managedObjectContext save:&error];
if(error != nil) NSLog(@"core data error: %@",[[error userInfo] description]); 
```

在对象被持久化到数据库之前

# python - 三个围绕下划线的python正则表达式

> ID：15257499
> 
> 赞同：1
> 
> 时间：2013-03-06T20:38:00.577
> 
> 标签：python, regex, expression

我正在使用支持 python 正则表达式语法的应用程序帮助某人在工作中重命名一些文件。我尝试了一些在论坛上找到的表达式，例如`^[^_]+(?=_)`下面的 a)，但它不能正常工作，还有一些不能正常工作。所以，我想我应该联系一个真正知道他们在做什么的人。谢谢你的帮助。

a）在第一个表达式中，我必须在第一个下划线之前找到所有字符，如下所示：

```
cannon_mac_23567_prsln_333
jones_james_343342_prsln_333
smith_john_223462_prsln_333 
```

所以，我必须得到大炮、琼斯和史密斯

b）在一个单独的表达式中，我必须找到第一个和第二个下划线之间的所有字符。所以，我需要在上面的示例中找到 mac、james 和 john。

c) 在最后一个表达式中，我必须找到第一个下划线

重命名应用程序的工作方式我必须分三个部分执行这些正则表达式，就像上面一样。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:41:19.237

好吧，您可以完全不使用正则表达式，因为您**知道**分隔符是下划线。

使用**[`str.split`](http://docs.python.org/2/library/stdtypes.html#str.split)**, 和`index`方法。

```
'smith_john_223462_prsln_333'.split('_')[0] //(to extract smith)
'smith_john_223462_prsln_333'.split('_')[1] //(to extract john)
'smith_john_223462_prsln_333'.index('_') //(to get position of first underscore) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:42:32.043

我会使用：

```
1\.  ^([^_]+)_
2\.  _([^_]+)_ 
3\.  ^[^_]_ 
```

使用 re.match，因为它匹配字符串的开头。

*[编辑：正如 Cthulhu 指出的那样，你最好不要为此使用正则表达式，因为使用字符串方法更快更容易]*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:46:40.047

对，我一开始误解了你的问题。虽然`str.split`这肯定是解决这个问题的一种更优雅的方法，但这里有三个正则表达式可以满足您的需求。我不知道你的这个应用程序是否适用于他们。所以把这个和一粒盐一起吃。

请查看[re](http://docs.python.org/2/library/re.html)库和[MatchObject.span()](http://docs.python.org/2/library/re.html#re.MatchObject.span)以获取更多信息。

作为单个正则表达式：

```
import re
line = "cannon_mac_23567_prsln_333"
In [1812]: match = re.match(r"(.+?)(\_)(.+?)\_", line)

In [1813]: match.groups()
Out[1813]: ('cannon', '_', 'mac')

In [1814]: match.span(2)[0] <-- second group, start. The first occurence of _
Out[1814]: 6

In [1815]: line[6]
Out[1815]: '_' 
```

分隔在 a、b、c 中：

A：

```
import re
line = "cannon_mac_23567_prsln_333"
In [1707]: match = re.match(r"(.+?)\_", line)

In [1708]: match.groups()
Out[1708]: ('cannon',) 
```

乙：

```
In [1712]: match = re.match(r".+\_(.+?)\_", line)

In [1713]: match.groups()
Out[1713]: ('prsln',) 
```

c：为了简单起见，最后一个使用 re.search。`MatchObject.span()`返回一个位置元组`(start, end)`

```
In [1763]: match = re.search("\_", line)

In [1764]: match.span()[0]
Out[1764]: 6

In [1765]: line[6]
Out[1765]: '_' 
```

# schema - Google plus 在 wordpress 上提取 Schema 数据？

> ID：15257500
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:02.040
> 
> 标签：schema, facebook-opengraph

因此，我使用开放图形方法从 Wordpress 网站中提取内容，然后可以将其发布在 facebook 上。然而，随着谷歌加上被拉入的内容是扭曲的。它两次引入标题，两次引入内容。所以我选择使用 Schema.org。开放图具有在站点上不可见的元标记，而 Schema 使用常规 html 标记，如下所示：

```
<div itemscope itemtype ="http://schema.org/Movie">
  <h1 itemprop="name">Avatar</h1>
  <span>Director: <span itemprop="director">James Cameron</span> (born August 16, 1954)</span>
  <span itemprop="genre">Science fiction</span>
  <a href="../movies/avatar-theatrical-trailer.html" itemprop="trailer">Trailer</a>
</div> 
```

这显示在我的网站上，所以我添加了“显示：隐藏”的内联样式；到 div。但是，这不起作用。有没有人获得使用 Wordpress 的架构？或者一个更好的问题可能是，有没有人得到开放的图形/模式来与 google plus 一起工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T06:09:33.003

`display: hidden;`不存在。您正在寻找`display: none;`

[http://jsfiddle.net/wgLZL/](http://jsfiddle.net/wgLZL/)

# php - 通过 ajax 调用的长时间运行的 php 脚本（不想等待响应）

> ID：15257502
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:08.670
> 
> 标签：php

我有一个长时间运行的脚本，可以运行一段时间。（它每 5 秒发送一封电子邮件）给许多用户。此脚本是通过 ajax 请求触发的

1.  如果没有收到响应，例如关闭浏览器，脚本会继续运行吗？（看起来确实有，但有什么条件什么时候不会？

2.  睡眠是否计入最大执行时间。（看来这也是假的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:14:55.193

1\. 简短的回答是：视情况而定。事实上，它可以在 PHP 和您使用的 Web 服务器中进行配置。这取决于您使用 PHP 的模式（模块或 CGI 或其他）。不过，您有时可以配置它。php.ini 中有一个选项：

```
/* If enabled, the request will be allowed to complete even if the user aborts
; the request. Consider enabling it if executing long requests, which may end up
; being interrupted by the user or a browser timing out. PHP's default behavior
; is to disable this feature.
; http://php.net/ignore-user-abort
;ignore_user_abort = On*/ 
```

2\. 几乎总是睡眠很重要。有条件，但在这种情况下，不是测量*执行时间，而是测量**执行 cpu 时间*。IIS 确实按应用程序池计算 CPU 使用率，但不确定它如何应用于 PHP 脚本。
确实，PHP 不会杀死现在处于睡眠状态的脚本。这意味着一旦睡眠结束，脚本将被杀死（简单测试：添加`sleep(15);`到您的 php 并将最大执行时间设置为 10。您将收到关于时间限制的错误，但在 15 秒内，而不是在 10 秒内）。
一般来说，你**不能**依赖在脚本中随意使用 sleeps。

您也不应该依赖在 Web 服务器中没有用户（浏览器）的情况下运行的脚本。您显然是在用错误的方法解决问题：您确实应该考虑使用 cron 作业/单独的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:46:40.140

1.  这取决于服务器。一些服务器可以在套接字关闭时终止脚本（这可能会在浏览器关闭时发生），其他服务器可以让脚本执行直到达到超时。

2.  同样，将取决于服务器。我真的可以看到一个实现，查看脚本在 CPU 上加载的时间，然后再一次 - 仅测量脚本启动的时间是一个同样好的方法。这完全取决于制作服务器软件的人的目的。

如果您想要明确的答案，我建议您筛选运行您的脚本的网络服务器和 php 实现的文档。

# sql - sqlite3_analyzer 在 Ubuntu 中不起作用缺少共享对象文件

> ID：15257504
> 
> 赞同：3
> 
> 时间：2013-03-06T20:38:18.067
> 
> 标签：sql, linux, ubuntu, sqlite

我正在了解有关 sqlite3 的更多信息，并尝试使用 sqlite3_analyzer 查看有关我的数据的一堆数据。[问题是当我从https://www.sqlite.org/download.html](https://www.sqlite.org/download.html)下载 sqlite-analyzer-linux-x86-3071502.zip并解压缩这个包然后尝试运行我收到这个错误的程序时：`./sqlite3_analyzer: error while loading shared libraries: libtcl8.6.so: cannot open shared object file: No such file or directory`

有谁知道在哪里可以得到这个 libtcl8.6.so 文件？有谁知道拿到后怎么安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:49:57.713

安装包`tcl8.6`，或下载分析器源代码并在您的发行版中使用 Tcl 版本重新编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T11:11:20.767

我最终从第三方网站（搜索`sqlite-analyzer-linux-x86`）下载了旧版本的 sqlite3_analyzer，该网站没有依赖关系。我不会发布链接，因为我无法确保它们可用并提供与我下载的文件相同的文件。

如果您决定这样做，请务必检查[http://virustotal.com](http://virustotal.com)上的病毒文件！不能相信这些中文文件托管;)

# java - 多对多上的休眠 findByExample

> ID：15257505
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:19.623
> 
> 标签：java, spring, hibernate

我有一些休眠大师的问题

我有 3 张桌子`User`，，，`Car``CarList`

Carlist是多对多

```
user --< carlist >-- car 
```

我正在尝试使用内置的 findByExample 来查询 carlist。

到目前为止，我已经找到了如何在一张桌子上做到这一点，如下所示：

```
List results = session.createCriteria(CarSearchList.class)
    .add(Example.create(instance))
    .createCriteria("car")
    .add(Example.create(instance.getCar()))
    .list(); 
```

但是我怎么能在汽车和用户表上做到这一点呢？我在下面尝试过，但失败了：

```
List results = session.createCriteria(CarSearchList.class)
    .add(Example.create(instance))
    .createCriteria("car")
    .add(Example.create(instance.getCar()))
    .createCriteria("user")
    .add(Example.create(instance.getUser()))
    .list(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:51:20.483

好的，我想出了一种方法：

```
 List results = session.createCriteria(CarSearchList.class)
    .add(Example.create(instance))
    .createAlias("car", "car")
    .createAlias("user", "user")
    .add( Restrictions.eqProperty("car.carId",    "user.userId"))
    .list(); 
```

从手册 17.4\. 我跳过了它。呸！我想知道还有什么其他方法可以做到这一点？

# php - 带有 PHP 生成输入的 JQuery 滑块值

> ID：15257509
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:28.397
> 
> 标签：php, javascript, jquery, jquery-ui, jquery-ui-slider

下面是我的代码，除了将滑块动态链接到每个输入字段外，我一切正常。这是我的[实时页面](http://go3dexpansion.com/showings/generatesim/)

```
<?php $dirname="panos/" ; $images=g lob($dirname. "*.jpg");
foreach($images as $image) {
    $imageName=s ubstr($image, -14); echo '
    <img src="resize.php?w=450&amp;img='.$image. '" />
    <input    id="'.$imageName. '-slider"/>
    <br />
    <div style="width:450px" id="'.$imageName. '" class="slider"></div>
'; } ?>
<script>
    $(function () {
        $(".slider").each(function () {
            $(this).slider({
                value: 0,
                min: 0,
                max: 360,
                step: 1,
                stop: function (event, ui) {
                   var v = $(this).attr('id')
                   var n = $(this).slider('value')
                   $("#" + v + "-slider").val(n);
                   window.alert(v)
               },
               create: function (event, ui) {
                   var v = $(this).attr('name')
                   var n = $(this).slider('value')
                   $("#" + v + "-slider").val('0');
               }
           });
       })
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:59:55.443

FIGURED IT OUT!!! The files that was getting pulled by the PHP had ".jpg" in the middle of it! And even tho it is a valid ID name it ended up messing up the jquery portion of it! I just did this

```
$imageNameLong = substr($image, -14);
$imageName = substr($imageNameLong,0 , -4); 
```

and took off that ".jpg" and now it works flawlessly!!!

# python - Python 字典值

> ID：15257513
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:46.517
> 
> 标签：python, dictionary

嗨，我刚刚开始学习如何编程并拥有一个我需要用 Python 编写的函数，这就是它背后的想法：

它返回`True`if `word`is in the`wordList`并且完全由手中的字母组成。否则，返回`False`。不会改变 hand 或 wordList。

有一个函数可以调用来检查用户想出的单词中字母的频率，并且它被转换为字典，我尝试过各种方式使用 iteritems 但无济于事，我被困在那些词上有重复的字母，当我在用户手中没有该字母的两个条目时，它们将被返回为真。

抱歉，如果不清楚，我两周前才开始。任何指针都会很棒我已经坚持了很长时间！

```
def isValidWord(hand,word,wordList):

    """
    Returns True if word is in the wordList and is entirely

    composed of letters in the hand. Otherwise, returns False.

    Does not mutate hand or wordList.

    word: string
    hand: dictionary (string -> int)
    wordList: list of lowercase strings
    """

    wordC = getFrequencyDict(word)
    handC = dict.copy(hand)
    if word not in wordList:
        return False
    for c in word:
        if c not in hand:
            return False
        for k,v in wordC.iteritems():
            if k in hand and v > 1:
                 handC[k] -= 1 
```

基本上我的下一步是试图弄清楚如何将 word 与具有修正值的 handC 进行比较，并将任何值为 0 的键打折。我认为（希望）这会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:49:55.820

像这样的东西怎么样：

```
def isValidWord(hand, word, word_list):
    if word not in word_list:
        return False
    for c in word:
        if c not in hand:
            return False
    return True 
```

由于字符串是可迭代的，您可以逐个字符地检查。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:56:39.533

没有您的代码，让我看看我是否理解您想要的内容：您正在尝试查看给定的单词是否可以使用 in 中的字母拼写，`hand`就好像用户对 in 中的每个字母都有一个拼字游戏瓷砖一样`hand`，是吗？

就我个人而言，我只是复制`hand`字典，然后允许对副本进行更改。像这样的东西：

```
def is_valid_word(hand, word, wordlist):
    hand_cp = dict(hand)
    for letter in word:
        if hand_cp.get(letter):
            # The letter is in our hand, so "use it up".
            hand_cp[letter] = hand_cp[letter] - 1
        else:
            # The letter isn't in our hand, so the word isn't valid.
            return False

    # If we can make the word, now make sure it's a real word:
    # (If wordlist is long, you might want to sort it and do a real search)
    if word not in wordlist: 
        return False

    # We haven't found any reason to return False, so this is a valid word.
    return True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:43:28.267

python`Counter`类是你的朋友。您可以在[python 2.7 及更高版本](http://docs.python.org/2/library/collections.html#collections.Counter)中执行此操作：

```
from collections import Counter

def is_valid_word(hand, word, word_list):
    letter_leftover = Counter(hand)
    letter_leftover.subtract(Counter(word))
    return word in word_list and all(v >= 0 for v in letter_leftover.values()) 
```

然后：

```
>>> def test():
...     hand = "traipse"
...     word_list = ["all", "the", "words", "in", "English", 
                     "parts", "pines", "partiers"]
...     print is_valid_word(hand, "parts", word_list)
...     print is_valid_word(hand, "pines", word_list)
...     print is_valid_word(hand, "partiers", word_list)
... 
>>> test()
True
False
False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-07T22:44:24.790

这是我的

```
def isValidWord(word, hand, wordList):
    """
    Returns True if word is in the wordList and is entirely
    composed of letters in the hand. Otherwise, returns False.

    Does not mutate hand or wordList.

    word: string
    hand: dictionary (string -> int)
    wordList: list of lowercase strings
    """
    if word in wordList:
        if set(word).issubset(set(hand)):
            return True
        else:
            return False
    else:
        return False 
```

# android - ListFragment - 空列表 TextView 加载。. . 最终

> ID：15257514
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:46.947
> 
> 标签：android, android-listview, android-listfragment, empty-list

我正在使用 a`ListFragment`来显示`ListView`. 问题是`TextView`当列表为空时应该显示的 which 不会立即显示。它以黑屏开始，然后最终将加载填充列表或空列表`TextView`（以先到者为准）。

我知道它`ListFragment`不会`TextView`像 a 那样自动设置空值`ListActivity`，因此我`TextView`使用以下代码手动添加了空值：

```
ListView list = (ListView) getActivity().findViewById(android.R.id.list);
TextView emptyText = (TextView) getActivity().findViewById(android.R.id.empty);
list.setEmptyView(emptyText); 
```

我希望立即显示空视图，然后替换为`ListView`if 和何时填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:38:29.597

原来问题与我`SupportMapFragment`在`ViewPager`. 在非常缓慢地来回滑动视图后，我能够看到列表显示在似乎是黑屏的下方。当上面的评论没有解决问题时，在对 StackOverflow 进行了一些挖掘之后，我发现[了这篇文章](https://stackoverflow.com/questions/13837697/viewpager-with-google-maps-api-v2-mysterious-black-view)。显然`MapFragment`在视图寻呼机中使用 a 会导致一个黑框出现`Fragment`在`ViewPager`.

我不知道为什么一段时间后，黑色工件会消失并被空列表或填充的替换`ListView`。但是，我能够通过在地图顶部放置一个具有透明背景的视图来解决问题，如上面的帖子所建议的那样。一旦黑色伪影被移除，我可以立即看到空列表视图。

# php - 完全不同的项目之间的冲突错误

> ID：15257516
> 
> 赞同：0
> 
> 时间：2013-03-06T20:38:59.873
> 
> 标签：php, cakephp

我创建了一个由 cakephp 提供支持的“电子管/视频网站”。它工作得很好。我将 tube 站点应用程序分叉到一个新项目中，该项目也为视频提供支持，但代码不同。

这样做之后，我开始注意到与当前项目完全无关的错误。例如，我的 Tube 站点将报告一个错误，即找不到 Actors/Actresses 模型，但应用程序中没有任何地方尝试加载该模型。似乎我的项目正在引起相互冲突，好像应该有一些不同的设置来阻止它们共享相似的资源。

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:51:43.457

我最近遇到了同样的问题，即我的实时应用程序代表我的测试应用程序抛出错误，甚至不应该知道彼此的存在。

事实证明，两个项目的缓存前缀相同，因此缓存相互干扰。打开您的`app/Config/core.php`并更改默认值：

```
$prefix = 'myapp_'; 
```

对于一些独特的东西，可能和 一样简单`app1_`，`app2_`只要它们不同。这样做之后，请确保再次清除缓存，以强制重建（只需删除`app/tmp/cache`子文件夹中的文件）。

# c# - 从 WebBrowser 控件拖放图像？

> ID：15257518
> 
> 赞同：0
> 
> 时间：2013-03-06T20:39:05.987
> 
> 标签：c#, .net, vb.net

在传统的网络浏览器（Chrome、IE 等）中，我可以抓取图像并将其拖动到其他位置，并且根据应用程序，我可以拖放图像并且会发生一些事情：它会被显示、打开、保存、等等

在我正在处理的应用程序中，我添加了事件处理程序和代码，以便在将图像拖放到表单上的一个 PictureBox 上时下载和显示图像。效果很好，没有问题。

无论出于何种原因，如果我在 WebBrowser 控件中加载页面，我就无法从加载的页面中拖动图像。起初我以为我可能更改了禁用此功能的控件的属性，但我创建了一个全新的项目，表单上只有一个 WebBrowser，并将其指向几个带有图像的不同页面。即使将它指向一个只有一个 img 标签的本地文件，我也无法让它将图像拖出显示的页面。如果我选择文本，我可以将该文本拖出，但没有图像。

是否有我缺少的属性需要设置才能启用此功能？

在带有 IE 10 和注册表项的 Win 7 x86 上在 .NET 4 中运行，以使 WebBrowser 类使用 IE 10 引擎。（也尝试禁用它并返回默认的 IE 7 引擎）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:58:58.267

仍然没有找到实际问题的答案，但我发现用一个将 href 设置为图像路径的锚来包装我的 img 标签，我现在可以以正常方式拖放该锚。Drop 事件处理程序仍然设法获得一个有效的文件路径，并且我将 WebBrowser 控件的 AllowNavigation 设置为 false 没有问题。几个 CSS 更改，我就完成了。

# unit-testing - 如何创建单元测试类

> ID：15257519
> 
> 赞同：0
> 
> 时间：2013-03-06T20:39:08.687
> 
> 标签：unit-testing, visual-studio-2012

我继承了一个包含 4 个项目的解决方案：前端项目、业务项目、数据项目和一个测试项目。

测试项目相当...假设是空的...现在在我对业务类的一些搜索方法进行了一些更改之后，我想生成一些测试来验证我所做的更改。

所以我的问题是：有没有一种自动的方法来生成一个“空框架测试类”来测试我的实际代码？可能是“右键单击要测试的类，然后单击生成测试类并选择将在其中创建它的项目”之类的东西？！？

细节：

*   我正在使用 VS 2012 Ultimate
*   我正在学习的课程没有测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:17:20.037

有内置功能允许您创建单元测试类。我不确定这是否也可以与 NUnit 结合使用。

反正我从来没用过。我要做的是：

*   在测试项目中添加一个测试类
*   用 [TestFixture] 属性装饰类
*   编写我要测试的第一种方法
*   用 [Test] 属性装饰方法
*   写测试

并开始[TDD 循环](http://agileinaflash.blogspot.nl/2009/02/red-green-refactor.html)。

一个典型的测试类骨架看起来像这样

使用 NUnit.Framework；

```
namespace Tests.Framework
{
    [TestFixture]
    public class SomeClassTests
    {
        [Test]
        public void AMeaningfulTestMethodName()
        {
            // the test
        }
    }
} 
```

我还可以使用[Resharper](http://www.jetbrains.com/resharper/)，以便我可以立即从 Visual Studio 运行测试。

![在此处输入图像描述](../Images/d9ed1dfb91caa6f2ff8b6f1b5ea70daa.png)

由于向项目中添加新的测试夹具对我来说非常简单，因此我认为不需要通过模板添加它。模板最烦人的部分是它们过度生成。模板将生成我并不总是需要的固定装置`[SetUp]`。`[TearDown]`我喜欢尽可能保持课堂整洁。但这是一个品味问题。

如果您愿意，以下是一些可能对您有所帮助的链接：

*   保存您自己的[预定义测试类模板](http://tsells.wordpress.com/2010/02/07/how-to-create-nunit-test-class-for-visual-studio/)
*   想使用visual studio的[内置功能](http://msdn.microsoft.com/en-us/library/dd465183.aspx)
*   按照有关该主题的[msdn 演练](http://msdn.microsoft.com/en-us/library/dd410597%28v=vs.90%29.aspx)

# objective-c - 方法参数没有类型？

> ID：15257520
> 
> 赞同：3
> 
> 时间：2013-03-06T20:39:24.167
> 
> 标签：objective-c

我在这里做了什么？方法参数可以是无类型的吗？

在最近一个运行良好的项目中，该应用程序已经在商店中 - 到目前为止没有问题，我在 .h 文件中执行了以下操作：

```
@property (strong, nonatomic) NSManagedObject          *myPerson;
- (HKPersonPicker*) initWithPerson:person;
- (HKPersonPicker*) initWithPerson:person delegate:(id <HKPersonPickerDelegate>)delegate; 
```

我打算这样做，但没有：

```
- (HKPersonPicker*) initWithPerson:(NSManagedObject*)person;
- (HKPersonPicker*) initWithPerson:(NSManagedObject*)person delegate:(id <HKPersonPickerDelegate>)delegate; 
```

.m 文件的对应部分：

```
- (HKPersonPicker*) initWithPerson:person
{
    self = [super init];
    if(self){
        self.myPerson = person;
    }
    return (self);
}

- (HKPersonPicker*) initWithPerson:person delegate:(id <HKPersonPickerDelegate>)delegate
{
    self = [self initWithPerson:person];
    if(self){
        self.delegate = delegate;
    }
    return (self);
} 
```

如您所见，我没有对这个人对象做任何特别的事情，只是将它分配给属性 myPerson。由于我没有调用任何对象的方法或访问它的数据，编译器不需要知道关于该对象的任何信息。但是从编译器的 ivew 角度来看是什么？输入身份证？只是什么？有没有默认类型？

如你所见，我没有任何真正的问题。我只是好奇。希望这个问题不会违反任何 SO 规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:41:27.427

对于 C，默认类型是`int`，但对于 Objective-C，它是`id`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:42:01.647

方法中缺少类型声明默认为`id`. IIRC，您可以在 Apple 的运行时库中看到大量没有返回类型的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T20:54:50.290

你正在做的事情没有*明确的问题，但同时它也不是真正的犹太洁食。*为了清晰起见，您仍然应该有一个类型声明，并保持良好且一致的类似 Cocoa 的代码样式。

所以它真的应该是这样的：

```
- (GSPersonPicker*) initWithPerson:(id)person; 
```

你真的应该改变属性声明：

```
@property (strong, nonatomic) id *myPerson; 
```

如果这没有改变，那么您的代码就会令人困惑。您知道将要输入的类型。因此，让编译器通过使用类型来帮助您处理有意义的警告/错误。您可能还应该使用“HKPerson”类型或您为实体命名的任何类型，因此编译器认为您不能传入“HKPlace”（它们都是“id”和“NSManagedObject”类型'，这对你没有好处）

更重要的是，除非有理由，否则不应使用动态类型 (id)。编译器可以帮助您。错误和警告是你的朋友，它们告诉你*你*搞砸了，而不是电脑。当你使用 'id' 时，编译器会运行，*哦，任何东西都可以进入这里！！！* 并且它不会检测到您向该方法发送会破坏一切的类型的错误。

现在假设您将使用多态性。IE，让我们为要遵守的多个类声明一个通用协议，它定义了我们的人：

```
@protocol GSPerson
-(NSUInteger)age;
@end 
```

所以现在让我们定义几个类，并让它们订阅协议（胡萝卜降价之间的 GSPerson*正在杀死我 atm lol*）：

```
#import "GSPerson.h"
@interface GSSpecialPerson <GSPerson>
// code
@end

#import "GSPerson.h"
@interface GSWeirdPerson <GSPerson>
// code
@end 
```

然后让我们重新定义我们的方法签名以遵守协议：

```
- (GSPersonPicker*) initWithPerson:(id<GSPerson>)person; 
```

还有我们的财产声明：

```
@property (strong, nonatomic) id <GSPerson> *myPerson; 
```

现在编译器知道我传递给该方法的任何东西都应该符合我上面定义的 GSPerson 协议（即他们需要一个返回人员年龄的方法）。如果我尝试传递任何其他内容，它会抛出编译器警告，这很好。

更好的是，如果多态类缺少所需的方法，它会向它们发出警告。

# mysql - MySQL - 截断日期/时间并相互减去

> ID：15257526
> 
> 赞同：0
> 
> 时间：2013-03-06T20:39:36.457
> 
> 标签：mysql

我有以下查询，它从过期时间中减去原始购买时间以得出天数：

```
select date(expires_dtime) - date(original_purchase_dtime)
from sl_player_subscription
where player_uuid = '9c61411c-54b4-45bd-8d07-264b1c2e4249' 
```

`player_uuid that = '9c61411c-54b4-45bd-8d07-264b1c2e4249'`原始购买时间为`2013-03-06 11:36:46`，过期时间为`2013-04-05 12:36:46.`

我希望输出读取“30”，即购买时间和到期时间之间的天数，但输出是 99。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:42:33.683

您可以使用`DATEDIFF`：

```
SELECT DATEDIFF('2013-04-05 12:36:46', '2013-03-06 11:36:46') 
```

**结果**

```
30
```

使用您的列：

```
SELECT DATEDIFF(expires_dtime, original_purchase_dtime) 
```

[查看演示](http://sqlfiddle.com/#!2/d41d8/8497)

> `DATEDIFF()`返回***expr1 – expr2***，表示为从一个日期到另一个日期的天数。***expr1***和***expr2***是日期或日期和时间表达式。计算中仅使用值的日期部分。

[文档：日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# file-io - 为什么 io:write() 不写入输出文件？

> ID：15257527
> 
> 赞同：0
> 
> 时间：2013-03-06T20:39:36.907
> 
> 标签：file-io, lua

我正在 Lua 中编写一个简短的脚本来复制搜索/替换功能。目标是输入搜索词和替换词，它将梳理给定扩展名的所有文件（尚未输入确定）并将搜索词替换为替换词。

一切似乎都在做它应该做的事情，除了文件实际上并没有被写入。我的 Lua 解释器（我自己在 Pelles-C 中编译）不会抛出任何错误或异常退出；脚本完成就像它工作一样。

起初我没有 i:flush()，但我在读到它应该将任何写入的数据保存到文件后添加它（请参阅[LUA 文档](http://www.lua.org/manual/5.2/manual.html#pdf-io.flush)）。它没有改变任何东西，文件仍然没有被写入。

我*认为*这可能与我打开文件进行编辑的方式有关，因为“w”选项有效（但会覆盖我的测试文件中的所有内容）。

**资源：**

```
io.write("Enter your search term:")
term = io.read()

io.write("Enter your replace term:")
replacement = io.read()

io.stdin:read()

t = {}
for z in io.popen('dir /b /a-d'):lines() do

    if string.match(string.lower(z), "%.txt$")  then
        print(z)
        table.insert(t, z)
    end
end
print("Second loop")

for _, w in pairs(t) do
    print(w)
    i = io.open(w, "r+")
    print(i)

    --i:seek("set", 6)
    --i:write("cheese")
    --i:flush()
    for y in i:lines() do
        print(y)
        p, count = string.gsub(y, term, replacement, 1)
        print(p)

        i:write(p)

        i:flush()
        io.stdin:read()
    end
    i:close()
end 
```

这是我得到的输出（这是我*想要*发生的），但实际上并没有被写入文件：

![误导性输出](../Images/4934adc8b79ad9937f0c6a4996c90ad3.png)

有一次它将输出写入文件，但它只输出到一个文件，然后写入我的脚本崩溃并显示以下消息：`No error`. 行号在该`for y in i:lines() do`行，但我不知道为什么它会在那里中断。我注意到`file:lines()`如果文件本身没有任何内容并给出奇怪/乱码错误，则会中断，但我的文本文件中有东西。

**编辑1**

我尝试在我的 for 循环中这样做：

```
for y in i:lines() do
        print(y)
        p, count = string.gsub(y, term, replacement, 1)
        print(p)

        i:write(p)
        i:seek("set", 3)        --New
        i:write("TESTESTTEST")  --New
        i:flush()
        io.stdin:read()
end 
```

为了看看我是否可以强制它写常规文本。它*确实如此，*但随后它崩溃`No error`并且仍然不写入替换字符串（只是 TESTESTTEST）。我不知道问题可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:54:23.347

我猜，在遍历文件时不能写入文件

```
for y in i:lines() do
   i:write(p)
   i:flush()
end 
```

# php - 是否有用于在数据库中记录错误的 C PHP 扩展？

> ID：15257531
> 
> 赞同：1
> 
> 时间：2013-03-06T20:39:49.077
> 
> 标签：php, php-extension

我知道许多解决方法（例如，读取表单系统日志、自定义错误处理程序），但是否有人花时间编写允许将数据存储到 RDMS 的 C 扩展？

# php - 使用javascript将数据发送到php函数

> ID：15257533
> 
> 赞同：0
> 
> 时间：2013-03-06T20:39:52.173
> 
> 标签：php, javascript, forms, post

我想用 javascript 向 php 函数发送一些数据。我今天早些时候已经[在这里](https://stackoverflow.com/q/15243535/847773)发布了一个关于这个的问题，虽然我没有得到满意的答案，也许没有正确解释自己。

所以我在javascript中有一些变量（我通过一些API得到它）。我想将此变量发送到 php 中的函数。我正在使用 codeigniter，所以我将函数称为（“somecontroller/somefunction”）。

我想通过 post 将数据发送到函数。该函数调用视图并重新加载整个 html。我正在寻找类似发送表格的东西。只有我有 javascript 中的变量。如果没有其他方法，我将使用 jquery 动态创建一个表单，并使用提交按钮上的 .click 方法发送数据。但是有更优雅的解决方案吗？

我知道 ajax，但问题是我不想要异步请求，我只想提交数据，然后加载新的 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:43:50.497

我认为解决此问题的最简单方法是通过查询字符串发送数据，尽管您必须更改目标页面以接受 GET 或 REQUEST 而不仅仅是 POST。

为此，只需：

```
window.location.href = 'somecontroller/somefunction?var1='+var1+'&var2='+var2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:05:31.723

既然你说你正在使用 jQuery：

```
$.post("somecontroller/somefunction", {
    param1: var1,
    param2: var2,
    ...

}, function(result) { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:03:35.470

[查看此链接如何将参数传递给 CodeIgniter 中的控制器方法](http://ellislab.com/codeigniter/user-guide/general/controllers.html#passinguri)。然后只需将用户重定向到此链接。

如果您想通过表单重定向，请将表单的操作设置为您的控制器，然后在 php 中您可以通过`$_GET`或访问表单元素`$_POST`

# python - Django forms.ModelForm、Pylint 和新/旧样式类

> ID：15257534
> 
> 赞同：10
> 
> 时间：2013-03-06T20:39:54.927
> 
> 标签：python, django, pylint

我有一个看起来像这样（简化）的 Django 1.5 表单：

```
class BidForm(forms.ModelForm):
    class Meta:
        fields = (
        )
        model = Bid

    def __init__(self, *args, **kwargs):
        super(BidForm, self).__init__(*args, **kwargs)
        something() 
```

当我对此运行 Pylint 时，我收到此错误：

```
E1002:<line,row>:BidForm.__init__: Use of super on an old style class 
```

我认为这意味着 Django 的 forms.ModelForm 是一个老式类，并且根据[python 文档](http://docs.python.org/2/library/functions.html#super)，我对 super 的调用没有发生，因此是无关的。这是真的？我可以只删除超级调用而没有效果吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T20:43:13.180

不。Pylint，尽管它很棒，但远非万无一失，在这种情况下，它只是弄错了。ModelForm 是一个新的样式类，需要超类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-28T22:57:43.880

此错误/警告与 ModelForm 类无关，与：

```
 class Meta:
        fields = ()
        model = Bid 
```

您只需要抑制警告：

```
 class Meta:  # pylint: disable=C1001
        fields = ()
        model = Bid 
```

# ruby-on-rails - 参数数量错误（0 代表 2..3）

> ID：15257537
> 
> 赞同：2
> 
> 时间：2013-03-06T20:39:58.933
> 
> 标签：ruby-on-rails

我想将作为参数接收的字符串重构为单词数组（使用该`split`方法）。

我的`Test`模型有一个属性，称为`source`.

```
class Test < ActiveRecord::Base
  attr_accessible :source
  serialize :sources, Array
  after_create do
    test.source.split(' ')
  end
end 
```

这将返回一个错误：

> 参数数量错误（0 代表 2..3）

我无法弄清楚 Rails 想要什么论据。

**UPD**

如果我像这样更改我的代码：

```
class Test < ActiveRecord::Base
  attr_accessible :source
  serialize :sources, Array
  def split_this_text(test_id)
    @test = Test.where(:test_id=>test_id)
    @test.source.split(' ')
  end
end 
```

并在 tests_controller/create 中调用方法：

```
 @test.split_this_text(:id) 
```

比我得到这个错误：

```
NoMethodError in TestsController#create

undefined method `split' for #<Arel::Nodes::JoinSource:0x4ddfc60> 
```

**UPD#2**

finally 可以正常工作，但没有任何错误，但表现得像没有任何工作和源通常的字符串（例如`@test.source[0]`返回一个字母）

```
class Test < ActiveRecord::Base
  attr_accessible :source
  serialize :sources, Array
  before_save :split_this_text
  def split_this_text
    self.source.split(' ')
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T19:54:33.160

Rails 以某种方式保留了“test”这个词。

我的模型的属性名称之一是“测试”。当我尝试调用`instance.update_attributes(:test => SOMEVALUE)`时，它会返回与您收到的相同*的“参数数量错误（0 表示 2..3）”*消息。

当我将属性名称从“test”更改为其他名称时，错误消失了。

# doctrine-orm - 如何按 DQL 中的计算值排序

> ID：15257538
> 
> 赞同：17
> 
> 时间：2013-03-06T20:40:03.897
> 
> 标签：doctrine-orm, dql

我正在尝试通过它们是否与我在属性上的原始实体匹配来对查询结果进行排序。我可以使用以下查询在 mySQL 中轻松完成此操作：

```
SELECT * FROM table
ORDER BY prop = 'value' DESC; 
```

但是，在 Doctrine 中，当我尝试以下操作时：

```
// $qb is an instance of query builder
$qb->select('e')
   ->from('Entity', 'e')
   ->orderBy('e.prop = :value', 'DESC')
   ->setParameter('value', 'value');
// grab values 
```

我收到一个 Doctrine 语法错误，“字符串结尾”。我研究过创建一个自定义函数，但这似乎有点矫枉过正。我对 Doctrine 很陌生，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-07T10:56:32.083

从 Doctrine ORM 2.2 开始，您可以使用`HIDDEN`关键字并选择其他字段，在本例中使用[CASE](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#case-expressions)表达式：

```
SELECT
    e,
    CASE WHEN e.prop = :value THEN 1 ELSE 0 END AS HIDDEN sortCondition
FROM
    Entity e
ORDER BY
    sortCondition DESC 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-05-17T12:37:38.370

当我努力弄清楚如何使用 php 语法创建该查询时，这就是我想出的：

```
$value = 'my-value';    
$qb->select('e')
    ->from('Entity', 'e')
    ->addSelect('CASE WHEN e.prop = :value THEN 1 ELSE 0 END AS HIDDEN sortCondition')
    ->setParameter('value', $value)
    ->addOrderBy('sortCondition', 'DESC'); 
```

# azure-media-services - 安全访问 Azure 媒体流的方法

> ID：15257540
> 
> 赞同：2
> 
> 时间：2013-03-06T20:40:10.763
> 
> 标签：azure-media-services

我已将多个视频上传并编码到 Windows Azure 媒体服务。如何为登录到作为 Azure 服务托管的 MVC 4 网站的订阅者提供安全的流式访问？如果他们没有登录，我基本上不希望他们能够观看视频？

（我一直在阅读有关 Azure 媒体服务的信息，但我找不到任何东西，这通常意味着我错过了显而易见的事情！？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T19:50:46.577

现在，您可以将 AES 或 PlayReady 内容保护与 Azure 媒体服务一起使用，通过网络加密您的文件。我们在密钥交付之上提供令牌身份验证，以确保只有您的授权用户才能获得内容。

有关更多信息，请在此处阅读我的博客文章：http: [//azure.microsoft.com/blog/2014/09/10/announcing-public-availability-of-azure-media-services-content-protection-services/](http://azure.microsoft.com/blog/2014/09/10/announcing-public-availability-of-azure-media-services-content-protection-services/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:57:54.617

有几个选项供您选择。目前，您可以使用 PlayReady DRM 加密视频，然后使用第三方提供商（例如 BuyDRM 或 EzDRM）来处理身份验证和 DRM 许可证交付。EzDRM 目前可通过 Azure 商店购买。这将为您的视频提供最高程度的保护。从长远来看，我们正在为不需要 DRM 提供保护的情况寻找更轻量级的身份验证和视频内容保护方法。当 Azure 媒体服务中提供新功能时，我们会将更新发布到[http://social.msdn.microsoft.com/Forums/en-US/MediaServices/ 。](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/)

# c# - 有什么理由更喜欢单精度而不是双精度数据类型？

> ID：15257544
> 
> 赞同：4
> 
> 时间：2013-03-06T20:40:30.150
> 
> 标签：c#, .net

我习惯于选择在保留语义的同时完全表示我的值所需的最小数据类型。我不使用`long`when`int`保证足够。同样适用于`int`vs `short`。

但是对于实数，在 C# 中有常用的`double`-- 并且没有对应的`single`or `float`。我仍然可以使用`System.Single`，但我想知道为什么 C# 没有像他们使用`double`.

相反，有语言关键字`short`, `int`, `long`, `ushort`, `uint`, 和`ulong`。

那么，这是向开发人员发出的信号，即单精度已过时、已弃用，或者不应该以其他方式用于支持`double`or`decimal`吗？

（不用说，单精度的缺点是精度较低。这是众所周知的较小尺寸的权衡，所以我们不要关注这一点。）

**编辑**：抱歉，我错误地认为这`float`不是 C# 中的关键字。但它确实使这个问题变得毫无意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T20:43:56.373

[`float`](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.110%29.aspx)别名代表 .NET数据类型，[`System.Single`](http://msdn.microsoft.com/en-us/library/system.single.aspx)所以我会说它可以安全使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T20:44:17.360

C# 关键字和 .NET 类型名称之间存在以下对应关系：

```
double -  System.Double
float  -  System.Single 
```

因此，在 C# 中，对于所讨论的两种类型中的每一种，都有一个关键字。

我不知道你是如何得到`float`不是 C# 关键字的印象。那当然是。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T20:46:58.217

实际上，单精度浮点有一个“浮点”键。

也不要太确定 short 或 byte 是否比 int 更合适。int 通常是整数的最佳选择，请在此处阅读更多信息：[Why should I use int instead of a byte or short in C#](https://stackoverflow.com/questions/1097467/why-should-i-use-int-instead-of-a-byte-or-short-in-c-sharp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T20:45:16.927

默认情况下，除非另有说明，否则任何类似的文字`2.0`都会自动解释为 a 。与其他浮点表示相比`double`，这可能有助于持续更高的使用率。`double`只是一个旁注。

至于没有*`single`*去，**`float`**关键字转换为`System.Single`类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T20:45:02.350

C# System.Single 别名为 [`float`](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.71%29.aspx)

# ios - 在 iOS 上构建 WebRtc

> ID：15257546
> 
> 赞同：6
> 
> 时间：2013-03-06T20:40:32.633
> 
> 标签：ios, build, webrtc

按照以下说明，我成功地在 MAC 上构建了 WebRTC：[http ://www.webrtc.org/reference/getting-started](http://www.webrtc.org/reference/getting-started)

有没有人在 iOS 上成功构建它？我了解有人（arik）已在 iOS 上成功构建它：[https](https://groups.google.com/forum/#!msg/discuss-webrtc/VJg-fk2-i_0/dtG200DOzsgJ) ://groups.google.com/forum/#!msg/discuss-webrtc/VJg-fk2-i_0/dtG200DOzsgJ但步骤尚不清楚。

有人（在 ios 上构建）可以总结这些步骤，以便将来对每个尝试它的人有用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-16T19:55:11.753

我写了一篇详细的博客文章，其中包含有关如何构建 WebRTC 示例 iOS 应用程序以及如何在 iOS 模拟器或实际 iOS 设备上运行它的所有说明。您可以[在这里](http://ninjanetic.com/how-to-get-started-with-webrtc-and-ios-without-wasting-10-hours-of-your-life/)查看详细信息，这是一个相当漫长的过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T22:47:11.257

是的，为 iOS 编译是一项非常痛苦的任务……尤其是让它在 Xcode 中工作。

这是我为 ios 获取 AppRTC Demo 的尝试

克隆/拉取：[https ://github.com/pristineio/webrtc-build-scripts](https://github.com/pristineio/webrtc-build-scripts)

获取 repo 后，打开 ios 目录中的 xcode 项目。将目标设置为 WebRTC Dance，然后执行。此时，脚本将更新 depot_tools 并完成所有繁琐的工作（拉取、修改、构建），以便 AppRTCDemo 的目标能够解决丢失的文件并执行。

完成后，您可以使用模拟器或真实设备将目标更改为 AppRTC Demo，单击运行，它应该会执行。那里链接的指南中有更详细的信息，自述文件中有更新。

如果您想知道在后台运行了什么，请查看 git repo 的 ios 目录中的 build.sh 文件。当您选择 WebRTC Dance 时，舞蹈功能实际上会为您执行。

描述构建过程并不容易（发生的事情太多了），但是构建脚本 repo 绝对应该为您指明正确的方向并帮助您在 ios 上获得 AppRTCDemo 'just work'

[这里](http://youtu.be/1w95PJLr8V4?t=2m30s)还发布了一个谷歌开发者视频，他们尝试分解构建过程，以便您可以为 ios 构建（youtube 标题具有误导性）。

另外，我刚刚添加了对 ios webrtc 的 cocoapods 支持，将其添加到您的 Podfile，

```
pod "libjingle_peerconnection"

# Add this to the bottom so it won't have issues with active architecture
post_install do |installer_representation|
    installer_representation.project.targets.each do |target|
        target.build_configurations.each do |config|
            config.build_settings['ONLY_ACTIVE_ARCH'] = 'NO'
            config.build_settings['VALID_ARCHS'] = ['armv7', 'i386']
        end
    end
end 
```

并非所有修订都已构建，因此请查看[可用修订的 cocoadocs](http://cocoadocs.org/docsets/libjingle_peerconnection/6802.0/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T20:21:40.037

过去几个月我一直在这个领域工作——iOS 上的 webrtc 并不容易。为了解决这个问题，我添加了一个 github repo，其中包含一个使用 webrtc 的 iOS 应用程序的工作示例。

[https://github.com/gandg/webrtc-ios](https://github.com/gandg/webrtc-ios)

该站点也引用了 google 代码站点，因此它应该是一个有用的起点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-17T11:27:31.260

> 嗯，很久才回复这个帖子。但是，我希望有人可以从中获得更好的直觉。

* * *

我一直在处理 iOS 和 Android 平台的 webrtc 编译过程。如果您有效地遵循每个步骤，则此过程非常简单。要为 iOS 编译库，请按照以下给出的命令并确保您使用*Mac 终端*`only-1`的相同 ( ) 选项卡进行 WebRTC 本机编译设置，如下所示：

 *1.  先决条件
2.  将 Xcode 与命令行链接
3.  设置 depot_tools
4.  获取开发代码
5.  分公司的选择
6.  编译库（iOS 框架）

* * *

## **1.先决条件：**

首先，确保您已经安装了以下内容，如果没有，请使用这些命令来执行此操作：

```
 - sudo add-apt-repository ppa:openjdk-r/ppa
 - sudo apt-get install openjdk-8-jdk
 - sudo apt-get install pkg-config
 - sudo apt-get update 
```

`python==2.7`如果尚未安装，请同时安装。

* * *

## **2\. 将 Xcode 与命令行链接：**

```
- sudo xcode-select -s /Applications/Xcode.app/Contents/Developer

- sudo xcode-select --switch /Library/Developer/CommandLineTools 
```

* * *

## **3\. 设置 Depot_tools：**

```
- git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git

- export PATH="$PATH:${HOME}/depot_tools" 
```

之后，依次开始以下步骤。*根据机器规格*和*互联网速度*，每一步都需要自己的时间，因此请确保每一步都不间断地完成。

## **4.获取代码：**

```
- mkdir webrtc_ios

- cd webrtc_ios

- fetch --nohooks webrtc_ios

- gclient sync 
```

## **5\. 选择分支头：**

```
- cd src

- ./build/install-build-deps.sh

- git checkout origin/master

- git branch 
```

## **6.每次编译：**

确保您在`webrtc_ios/src/`目录中，然后只需运行以下命令：

```
- ./tools_webrtc/ios/build_ios_libs.sh 
```

* * *

事实证明，您最终将编译和构建包含Webrtc 头文件的**WebRtc 框架。**您可以简单地将这个框架拖放到您的 Xcode 生产环境中或直接导入它。

设置好编译环境后，现在每次对本机堆栈进行更改时，只需运行此命令`./tools_webrtc/ios/build_ios_libs.sh`即可生成更新的框架。

如果您最终遇到有关 webrtc 框架编译的问题。请按照以下步骤操作。确保您在此目录中`webrtc_ios/src/`：

```
 - git checkout origin/master

 # To make sure you're using origin/master

 - git branch

 - gclient revert

 - gclient sync

 - ./tools_webrtc/ios/build_ios_libs.sh 
```

希望你能解决你的问题。我总是建议你们，你可以检查一个分支，该分支将在后面`origin/master`并且没有为 iOS 构建 webrtc 框架所必需的所有依赖项和模块。所以，请始终结帐到`branch/head`webrtc 本机堆栈

* * *

现在，如果您尝试使用这两个过程来构建 WebRTC，例如：

1- 使用 Bash 构建工具 ( `./tools_webrtc/ios/build_ios_libs.sh`)

2-使用手动编译

### 例子

```
$ # debug build for 64-bit iOS
$ gn gen out/ios_64 --args='target_os="ios" target_cpu="arm64"'

$ # debug build for simulator
$ gn gen out/ios_sim --args='target_os="ios" target_cpu="x64"' 
```

2.1- 编译 ( `ninja -C out/Debug`)

这两个程序都将起作用。

* * *

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T23:15:24.297

这似乎构建了一些模块：[https ://code.google.com/p/webrtc/issues/detail?id=1421#makechanges](https://code.google.com/p/webrtc/issues/detail?id=1421#makechanges)*

# c++ - 对于将派生类传递到具有基类引用 arg 的函数的这种情况，我是否会被切片？

> ID：15257548
> 
> 赞同：2
> 
> 时间：2013-03-06T20:40:38.013
> 
> 标签：c++

我有以下程序

```
#include <iostream>

class Animal {
public:
    Animal(int age) : age_(age) {}
    virtual ~Animal() {}

    virtual void vocalize() = 0;
    virtual void description() = 0;
protected:
    int age_;
};

class Dog : public Animal {
public:
    Dog(int age, bool bites) : Animal(age), bites_(bites) {}
    virtual ~Dog() {}

    virtual void vocalize() {
        std::cout << "woff" << std::endl;
    }
    virtual void description() {
        std::cout << "Dog" << std::endl;
        std::cout << "age " << age_ << std::endl;
        std::cout << "bites " << bites_ << std::endl;
    }
private:
    bool bites_;

};

class Cat : public Animal {
public:
    Cat(int age, bool likes_tuna) : Animal(age), likes_tuna_(likes_tuna) {}
    virtual ~Cat() {}

    virtual void vocalize() {
        std::cout << "meow" << std::endl;
    }
    virtual void description() {
        std::cout << "Cat" << std::endl;
        std::cout << "age " << age_ << std::endl;
        std::cout << "likes tuna " << likes_tuna_ << std::endl;
    }
private:
    bool likes_tuna_;
};

int doStuff(Animal &animal) {
    animal.description();
    animal.vocalize();
}

int main() {
    Dog d(3, false);
    Cat c(5, true);

    doStuff(d);
    doStuff(c);
} 
```

如您所见，当我调用 doStuff 时，我将派生类传递给绑定到基类引用，然后调用纯虚方法，并由每个派生类重新实现。其中一种方法（描述）使用基类（age_）上的成员变量和派生类（likes_tuna_和bites_）上的变量。我会被切片还是合法？该程序似乎有效，但可能是偶然的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:43:35.033

> 我会被切片还是合法？

**不**，你*不会*在这里切片。

多态性需要引用或指针，在这种情况下，您使用的是前者。没关系。您不是通过值向函数传递参数，而是通过引用传递参数，这就是允许对`Animal`（的参数`doStuff()`）的引用绑定到*实际*类型是 的子类的对象的原因`Animal`。

当您尝试将派生类的实例*复制*到派生类的实例上时，就会发生切片：

```
Animal a; // Pretend Animal is not abstract...
Dog d;
a = d; // Slicing!
Animal& a1 = d; // No slicing!
Animal* pA = &d; // No slicing!
pA = &a1; // No slicing! 
```

# machine-learning - 二进制特征提取

> ID：15257553
> 
> 赞同：1
> 
> 时间：2013-03-06T20:40:53.207
> 
> 标签：machine-learning, nlp, feature-extraction

我是用于自然语言处理目的的特征提取的初学者。我想知道如何使用哈希图来提取文本的特征。如果每个特征都是hashmap中的一个“key”，而它的value就是这个“value”（所有特征都是二进制，0或者1），是不是意味着我需要有n个hashmap（n是文本中的字数)? 因为对于每个单词，我都需要提取特征。

我对吗？

在此先感谢，爱丽丝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:10:52.207

是的，您可以使用哈希映射来实现这一点，但是根据功能的数量和您的内存要求，它可能不是最好或最快的数据结构，它实际上取决于您的域。通常，将特征表示为存在或不存在都会产生较差的结果。更好的方法是在对特征进行加权时使用 TF-IDF。

您正在谈论的方法是“词袋”方法。这是您根据单词边界对文档进行标记并将单词用作特征的地方。作为第一遍，您应该删除停用词（即“a”、“and”、“the”），然后规范化您的数据（即 Now == now == nOw）。然后，您可以执行词干提取以进一步减小向量大小。

现在低估提取特征的一个好方法是查看[MALLET](http://mallet.cs.umass.edu/fst.php)。我有一个非常简单的朴素贝叶斯实现，带有一个用于 RCV-1 的解析器，您可以查看示例[朴素贝叶斯](https://github.com/shanep/NaiveBayes/blob/master/NaiveBayes/src/main/java/edu/boisestate/classify/NaiveBayes.java)

# primefaces - 如何更新 Primefaces 数据表中的特定行

> ID：15257554
> 
> 赞同：7
> 
> 时间：2013-03-06T20:40:53.447
> 
> 标签：primefaces

Primefaces 3.5，Mojarra 2.1.14。这是我的 PF 数据表，它包含一个名为“自动”的不可编辑的布尔列和可编辑的“标签”列：

```
<p:dataTable value="#{bean.contents}" paginator="true" var="row" 
  editable="true" editMode="cell" rows="25" rowsPerPageTemplate="10,25,50" id="list">
    <p:column>
        <f:facet name="header"><h:outputText value="header1" /></f:facet>
        <p:selectBooleanCheckbox value="#{row.automatic}" disabled="true" id="isAutomatic"></p:selectBooleanCheckbox>
    </p:column>
    <p:column>
        <f:facet name="header"><h:outputText value="header2" /></f:facet>
        <p:cellEditor>
            <f:facet name="output">
                <h:outputText value="#{row.label}"></h:outputText>
            </f:facet>
            <f:facet name="input">
                <p:inputText value="#{row.label}"></p:inputText>
            </f:facet>
        </p:cellEditor>
    </p:column>
    <p:ajax event="cellEdit" process="@this" listener="#{myBean.onEditLabel}" update="isAutomatic"/>
</p:dataTable> 
```

单元格编辑事件监听器：

```
public void onEditLabel(CellEditEvent event) {
    Object oldValue = event.getOldValue();
    Object newValue = event.getNewValue();

    if(newValue != null && !newValue.equals(oldValue)) {
        DataTable s = (DataTable) event.getSource();
        MyEntity d = (MyEntity) s.getRowData();
        try {
            d.setAutomatic(false);
            myDAO.save(d);
            addMessage("Change saved!");
        } catch (Exception ex) {
            addErrorMessage("Label could not be saved!");
            getFacesContext().validationFailed();
        }
    }
} 
```

单元格编辑器工作，将数据发送到侦听器，并正确地保存到数据库中。单元格编辑事件侦听器也会清除“自动”标志，并正确地保存到数据库中。问题是客户端上没有更新“自动”复选框。

我也试过

```
 <p:ajax event="cellEdit" process="@this" listener="#{myBean.onEditLabel}" update="list"/> 
```

它正确更新了复选框，但也会导致焦点丢失，并浪费带宽。

触发 cellEdit 事件后，如何仅更新特定单元格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T22:37:46.280

你`p:ajax`的标签`p:dataTable`在某个特定的行或列中没有，所以你很容易更新一些相关的组件ID。您可以借助`RequestContext`更新单元格中的特定组件。因此，从您的方法中删除`update`并将`p:ajax`其添加到您的`onEditLabel`方法中：

```
RequestContext.getCurrentInstance().update(
  s.getClientId(FacesContext.getCurrentInstance()) +
  ":" + event.getRowIndex() +
  ":isAutomatic"
); 
```

如您所见，单元格内组件的 id 在您分配的 id 之前具有行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T19:01:44.787

我相信您可以解决这个问题，而无需知道您要更新的组件的 ID 的详细信息。您可以将其作为参数传递给 bean。

首先，绑定要更新的组件。您实际上并不需要此组件绑定到的 bean。您只需要定义一些值，您可以稍后在 JSF 中使用这些值来识别该组件。所以在你的情况下，你会做这样的事情：

```
<p:selectBooleanCheckbox binding="#{isAutomaticComponent}" value="#{row.automatic}" disabled="true" id="isAutomatic"></p:selectBooleanCheckbox> 
```

现在，在您进行更新时访问该组件。IE：

```
<p:ajax event="cellEdit" process="@this" listener="#{myBean.onEditLabel(isAutomaticComponent.clientId)}" /> 
```

现在，您可以在不知道 ID 内容的情况下从 cellEdit 事件方法更新组件。IE：

```
public void onEditLabel(CellEditEvent event, String idOfComponentToUpdate) {
...
RequestContext.getCurrentInstance().update(idOfComponentToUpdate);
... 
```

# ruby-on-rails - Rails：如何在 Rails 4 中引用 CSS 中的图像

> ID：15257555
> 
> 赞同：211
> 
> 时间：2013-03-06T20:40:55.010
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-4

Heroku 上的 Rails 4 有一个奇怪的问题。编译图像时，它们会添加散列，但 CSS 中对这些文件的引用没有调整正确的名称。这就是我的意思。我有一个名为 logo.png 的文件。然而，当它出现在 heroku 上时，它被视为：

```
/assets/logo-200a00a193ed5e297bb09ddd96afb953.png 
```

但是 CSS 仍然声明：

```
background-image:url("./logo.png"); 
```

结果：图像不显示。有人遇到这个吗？如何解决？

* * *

## 回答 #1

> 赞同：404
> 
> 时间：2013-03-23T20:30:32.813

Sprockets 和 Sass 有[一些漂亮的助手](http://guides.rubyonrails.org/asset_pipeline.html#css-and-sass)可以用来完成工作。如果您的样式表文件扩展名为或， Sprockets*只会*处理这些帮助程序。`.css.scss``.css.sass`

* * *

**图像特定助手：**

```
background-image: image-url("logo.png") 
```

* * *

**不可知论者：**

```
background-image: asset-url("logo.png", image)
background-image: asset-url($asset, $asset-type) 
```

* * *

或者，如果您想将图像数据嵌入到 css 文件中：

```
background-image: asset-data-url("logo.png") 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-10-07T23:17:55.220

不知道为什么，但唯一对我有用的是使用**asset_path** *而不是*image_path **，**即使我的图像位于**assets/images/**目录下：

**例子：**

```
app/assets/images/mypic.png 
```

**在红宝石中：**

```
asset_path('mypic.png') 
```

**在 .scss 中：**

```
url(asset-path('mypic.png')) 
```

* * *

**更新：**

结果发现这些资产助手来自[**sass-rails**](https://github.com/rails/sass-rails) gem（我已经安装在我的项目中）。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-09-24T15:56:20.923

在 Rails 4 中，您可以像这样轻松引用位于文件中的`assets/images/`图像`.SCSS`：

```
.some-div {
  background-image: url(image-path('pretty-background-image.jpg'));
} 
```

* * *

当您以开发模式 ( `localhost:3000`) 启动应用程序时，您应该会看到如下内容：

```
background-image: url("/assets/pretty-background-image.jpg"); 
```

在生产模式下，您的资产将具有缓存助手编号：

```
background-image: url("/assets/pretty-background-image-8b313354987c309e3cd76eabdb376c1e.jpg"); 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-03-23T20:55:46.793

哈希是因为资产管道和服务器优化缓存 [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

尝试这样的事情：

```
 background-image: url(image_path('check.png')); 
```

祝你好运

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-12-19T06:23:57.597

在 CSS 中

```
background: url("/assets/banner.jpg"); 
```

虽然原始路径是 /assets/images/banner.jpg，但按照惯例，您只需在 url 方法中添加 /assets/

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-06-15T16:26:12.310

没有一个答案是关于方式，当我有`.css.erb`扩展名时，如何引用*图像*。对我来说，我也在**生产**和**开发方面**工作过：

[2.3.1 CSS 和 ERB](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)

资产管道自动评估**ERB**。这意味着如果您将 erb 扩展添加到**CSS**资产（例如， ），那么在您的 CSS 规则中可以使用`application.css.erb`类似的助手：`asset_path`

```
.class { background-image: url(<%= asset_path 'image.png' %>) } 
```

这将写入被引用的特定资产的路径。在此示例中，在其中一个资产加载路径中包含图像是有意义的，例如`app/assets/images/image.png`，将在此处引用。如果此图像已`public/assets`作为指纹文件提供，则引用该路径。

如果你想使用数据 URI——一种将图像数据直接嵌入到**CSS**文件中的方法——你可以使用`asset_data_uri`helper.

```
.logo { background: url(<%= asset_data_uri 'logo.png' %>) } 
```

这会将格式正确的数据 URI 插入 CSS 源。

*请注意，结束标签不能是 -%> 样式。*

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-09-24T06:46:22.823

只有这个片段对我不起作用：

```
background-image: url(image_path('transparent_2x2.png')); 
```

但是将 stylename.scss 重命名*为*stylename.css.scss*对*我有帮助。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-09-20T19:18:00.767

几个小时后我发现了什么：

作品：

```
background-image: url(image_path('transparent_2x2.png')); 

// how to add attributes like repeat, center, fixed? 
```

上面的输出类似于：`"/assets/transparent_2x2-ec47061dbe4fb88d51ae1e7f41a146db.png"`

注意前面的**"/"**，**它在引号内**。还要注意您的样式表.css.scss 中的**scss 扩展和 image_path 助手**。该图像位于**app/assets/images 目录**中。

不起作用：

```
background: url(image_path('transparent_2x2.png') repeat center center fixed; 
```

不起作用，无效的属性：

```
background:url(/assets/pretty_photo/default/sprite.png) 2px 1px repeat center fixed; 
```

我最后的手段是将这些放在我的公共 s3 存储桶中并从那里加载，但最终还是有所进展。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-08-05T19:47:58.803

参考[Rails 文档](http://guides.rubyonrails.org/asset_pipeline.html)，我们看到有几种方法可以从 css 链接到图像。只需转到第 2.3.2 节。

首先，确保您的 css 文件具有 .scss 扩展名（如果它是 sass 文件）。

接下来就可以使用ruby的方法了，真的很丑：

```
#logo { background: url(<%= asset_data_uri 'logo.png' %>) } 
```

或者您可以使用更好的特定形式：

```
image-url("rails.png") returns url(/assets/rails.png)
image-path("rails.png") returns "/assets/rails.png" 
```

最后，您可以使用一般形式：

```
asset-url("rails.png") returns url(/assets/rails.png)
asset-path("rails.png") returns "/assets/rails.png" 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-06-22T00:45:06.680

有趣的是，如果我使用“背景图像”，它就不起作用：

```
background-image: url('picture.png'); 
```

但只是“背景”，它确实：

```
background: url('picture.png'); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-25T06:42:29.763

在某些情况下，以下也可以适用

# logo { 背景： url(<%=asset_data_uri 'logo.png' %>) }

来源： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-28T06:22:09.790

在 Rails 5 引导程序 4 中使用 gem 'sass-rails' 时，以下内容对我有用，

在 .scss 文件中：

```
 background-image: url(asset_path("black_left_arrow.svg")); 
```

在视图文件中（例如 .html.slim）：

```
 style=("background-image: url(#{ show_image_path("event_background.png") })"); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-31T19:22:55.077

默认情况下，Rails 4 不会为您的资产提供服务。要启用此功能，您需要进入 config/application.rb 并添加以下行：

```
config.serve_static_assets = true 
```

[https://devcenter.heroku.com/articles/rails-4-asset-pipeline#serve-assets](https://devcenter.heroku.com/articles/rails-4-asset-pipeline#serve-assets)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-03-14T13:50:57.777

这应该让你每次都到达那里。

```
background-image: url(<%= asset_data_uri 'transparent_2x2.png'%>); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-20T22:57:02.013

在 Rails 4 中，只需使用

`.hero { background-image: url("picture.jpg"); }`

只要背景图像位于 app/assets/images 中，就在 style.css 文件中。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-06T21:54:20.477

这对我有用：

```
background: #4C2516 url('imagename.png') repeat-y 0 0; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-22T05:12:03.023

您可以添加到您的 css .erb 扩展名。Ej：style.css.erb

然后你可以放：

```
background: url(<%= asset_path 'logo.png' %>) no-repeat; 
```

# c++ - Windows：让鼠标指针离开屏幕〜1000px

> ID：15257556
> 
> 赞同：2
> 
> 时间：2013-03-06T20:40:54.613
> 
> 标签：c++, windows, virtual, drivers

我想让用户将鼠标指针从物理监视器的右侧移开一段距离（比如每个方向 1000 个像素）。有谁知道如何在 Windows 中执行此操作？

我在[Windows API 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145136%28v=vs.85%29.aspx)中读到，虚拟屏幕的大小是每个方向上所有监视器的最大大小，主监视器的左上角为 0,0（[请参见此处的图片](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145136%28v=vs.85%29.aspx)）。

有没有办法覆盖虚拟屏幕的大小？我认为这将是最简单的方法。

如果不是，我应该使用假的显示驱动程序吗？我是否需要一个驱动程序和两个假硬件实例（一个用于屏幕右侧，另一个用于左侧？

# android - 如何在我的手机上运行简单的安卓应用程序？

> ID：15257565
> 
> 赞同：0
> 
> 时间：2013-03-06T20:41:43.257
> 
> 标签：android, smartphone

我为android编写了一个简单的应用程序，它在我的手机上运行良好，但我想在我的手机上运行它而不将我的手机连接到电脑，我的意思是我想在我的电脑上安装应用程序。我怎样才能做到这一点？另外，如果我想将此应用程序发送给朋友怎么办？我必须将其安装到市场上吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:45:00.230

首次在手机上运行应用程序（从计算机启动）后，在您断开手机与计算机的连接后，它将保持安装状态。

然后您可以从“应用程序”菜单启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T20:47:42.220

您需要做的第一件事是创建一个 .apk 文件。这是一个[关于](https://stackoverflow.com/questions/4600891/how-to-build-apk-file)创建它的问题。

然后，您可以将其放在 Play 商店中，或将 .apk 上传到服务器并使用 URL 下载它。

或者您可以将 .apk 从您的计算机复制到您的手机上，然后单击该文件即可安装。

使用市场以外的任何东西都需要用户“允许来自未知来源的应用程序”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:49:06.007

预装的应用程序位于`/system/app`文件夹中。用户安装的应用程序位于`/data/app`. 我猜你不能访问，除非你有一个根电话。尝试随身携带外部存储卡。

**如果您想访问您的 .apk 文件，只需在下面尝试...**

我假设你正在使用 Eclipse..

在`/bin`您项目的文件夹中，您可以看到`appName.apk`然后将其复制并发送给您的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T20:50:29.543

如果您使用 Eclipse，则需要右键单击项目文件夹。
那里有安卓工具的菜单。
在那里，您必须单击导出（未）签名的应用程序包按钮，然后会打开一个向导，您必须在其中进行一些设置。（我更喜欢信号一）。
在那里您需要创建一个新的密钥库和一个新的证书。你在那里插入什么并不重要。
创建这些文件后，您可以保存“apk”并将其复制到您的设备。
在那里，您只需打开 apk 即可安装该应用程序。
但我不知道如何在您的电脑上安装该应用程序。我只知道您可以运行模拟器并将其安装在那里（bluestack 是模拟器的名称）。

# android - 从服务向活动发送光标

> ID：15257568
> 
> 赞同：0
> 
> 时间：2013-03-06T20:41:54.120
> 
> 标签：android, cursor, parcelable, intentservice

我正在尝试将数据库游标从服务（IntentService）发送到我的活动（实现接收器以捕获来自服务的任何响应）。一旦我从查询中获得数据，`cursor = db.query(DBHelper.DB_BOOKS_TABLE, columns, where, whereArgs, groupBy, having, orderBy);`我想通过接收器将光标从服务发送回他的调用者。但捆绑结构只是让我发送 tical 数据（字符串，整数，这样想）。我知道捆绑包还可以发送可打包对象和可序列化对象。但是我如何将典型的游标转换为可打包或可序列化的游标。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:50:04.393

您实际上不需要使用 a`Bundle`将任何内容从 发送`Service`到`Activity`. 您可以在`Service`. 我在`Service`这里严格地谈论 a 而不是 a `IntentService`，因为我以前没有使用过它们。使用绑定`Service`是相同的，但只需`unbindService()`在完成后调用您的 Activity：

```
private Cursor cursor;
public void initializeCursor() {
    cursor = Cursor();
    //Now the cursor is created. Send a broadcast to the activity that it's done.
    broadcastManager.sendBroadcast("your.package.CURSOR_FINISHED");
} 
```

并有一个`getCursor()`方法`Activity`：

```
public Cursor getCursor() {
    return this.cursor;
} 
```

在`BroadcastReceiver`你的 中`Activity`，抓住这个事件：

```
@Override
public void onReceive(Context context, Intent intent) {
    if(intent.getAction().equals("your.package.CURSOR_FINISHED") {
        Cursor cursor = myService.getCursor();
        unbindService(myServiceConnection);
    }
} 
```

由于您的活动绑定到您的服务，因此您的活动中将有一个可用的服务对象。一旦你得到光标完成的广播，只需终止服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:52:50.977

我选择制作自己的自定义类，它实现了**Parcelable Interface**。因为像[CrossProcessCursor](http://developer.android.com/reference/android/database/CrossProcessCursor.html)这样的 parcelable 游标对我来说是非常陌生的。

在我自己的 ParcelableRow 中，我只是实现了**HashMap**对象。为了不再担心行数或列数，我只需将光标映射到我*自己的 ParcelableRow 对象*。这是mi代码：

```
public class ParcelableRow implements Parcelable {
 private HashMap<String, String> colsMap;

 public static final Parcelable.Creator<ParcelableRow> CREATOR
 = new Parcelable.Creator<ParcelableRow>() {

    @Override
    public ParcelableRow createFromParcel(Parcel source) {
        return new ParcelableRow(source);
    }

    @Override
    public ParcelableRow[] newArray(int size) {
        return new ParcelableRow[size];
    }
};

public ParcelableRow(Parcel in) {
    colsMap = new HashMap<String, String>();
    readFromParcel(in);
}
public ParcelableRow() {
    colsMap = new HashMap<String, String>();
}
@Override
public int describeContents() {
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {

    for(String key: colsMap.keySet()){

        dest.writeString(key);
        dest.writeString(colsMap.get(key));

    }

}
public void readFromParcel(Parcel parcel) {

    int limit = parcel.dataSize();
    parcel.setDataPosition(0);
    for(int i = 0; i < limit; i++){
        colsMap.put(parcel.readString(), parcel.readString());
    }

}

public void addNewCol(String colName, String colValue){
    colsMap.put(colName, colValue);
}
public String getColumnValue(String colName){
    return colsMap.get(colName);
} 
```

感谢@CommonsWare 给了我一个线索。竖起大拇指！。

我希望这对某人有用，我只是花了几天时间试图找到可以满足我需求的东西。[这](http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/)是我使用过的一些代码示例。欢迎提出建议。

**警告**它只让我满意，因为我与时俱进。

继续编码！

# php - PHP从不包含@和#的字符串中删除数字

> ID：15257571
> 
> 赞同：-6
> 
> 时间：2013-03-06T20:42:05.987
> 
> 标签：php, regex

我尝试使用`preg_replace`，但它没有正确工作，因为那些包含 @ 和 # 的变量也被删除了它们的数字......

例如。@cv12--> @cv12 和 cv12-->cv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:47:49.877

虽然问题质量很差：

```
$s = '@vc12'; // or whatever...

// verify # and @ don't exist
if (strpos($s,'@') === false && strpos($s,'#') === false)
{
  // replace all numbers and store result back to variable
  $s = preg_replace('/\d/','',$s);
} 
```

[例子](http://sandbox.onlinephpfunctions.com/code/6f6386b80f1a44b09c0b03b2aed2a3029912cadf)

参考：

*   [`strpos`](http://www.php.net/manual/en/function.strpos.php)（找不到`false`时返回）`$needle`
*   [`preg_replace`](http://php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:48:01.203

您可以使用`$stringCheck = strpos($stringToSearch , $searchPattern );`$searchPattern 将等于 @ 然后使用`if($stringCheck == false) removeNumbers($stringToSearch);`简单的那样。

让我知道这是否有帮助。

# html - HTML/CSS Span 标记导致 Bootstrap 模态页脚按钮降低

> ID：15257572
> 
> 赞同：0
> 
> 时间：2013-03-06T20:42:08.947
> 
> 标签：html, css, twitter-bootstrap, modal-dialog

在我的网站上，我使用 span 标签从 twitter 引导模式显示的页脚左侧拉出一个按钮和一个文本输入，图片将显示这一点。

由于某种原因，左侧的两个按钮低于右侧的两个按钮，我该如何提高左侧的两个？HTML：

CSS：

```
.modal-footer .floatLeft {
    float: left;
} 
```

HTML：

```
<div class="modal-footer">
    <span class="floatLeft">
        <input placeholder="out of" class='changeMaxMark' style='margin-top:9px;'id='maxMarkBox' name='maxMarkBox' type='text'>
        <button  id='changeMaxMark' name='changeMaxMark' class='btn btn-success'> Set All </button>
    </span>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" id="markSave" onClick="togleMarkSave()">Save Changes</button>
</div> 
```

链接到图片 1 ( [http://snag.gy/i5FRT.jpg](http://snag.gy/i5FRT.jpg) ) 链接到图片 2 ( [http://snag.gy/2Y9Q2.jpg](http://snag.gy/2Y9Q2.jpg) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:45:14.913

首先删除跨度。Bootstrap 有特定的 CSS 类来拉东西。`pull-left`我添加到前两个元素中。

编辑后的 ​​HTML 是这样的：

```
<div class="modal-footer">    
    <input placeholder="out of" class='changeMaxMark pull-left' id='maxMarkBox' name='maxMarkBox' type='text'>
    <button  id='changeMaxMark' name='changeMaxMark' class='btn btn-success  pull-left'> Set All </button>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" id="markSave" onClick="togleMarkSave()">Save Changes</button>
</div> 
```

您还可以在输入字段上使用特定样式将 margin-top 向下推 9px，这是不必要的。

不需要自定义 CSS 类或其他标记。

这是工作的[JSFiddle](http://jsfiddle.net/DhE6U/1/)

# .net - 在 VB.NET 中设置数据源

> ID：15257576
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:42:26.453
> 
> 标签：.net, database, vb.net, datasource

```
Dim inc As Integer
Dim MaxRows As Integer
Dim con As New OleDb.OleDbConnection
Dim dbProvider As String
Dim dbSource As String
Dim dA As OleDb.OleDbDataAdapter
Dim dS As New DataSet
Dim SQL As String

Private Sub AbrirToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles AbrirToolStripMenuItem.Click
    Dim strFileName As String
    Dim ClikedOk As Integer

    OpenFD.InitialDirectory = "C:\"
    OpenFD.Title = "Ubica la base de datos"
    OpenFD.Filter = "Agenda|Agenda.mdb"
    OpenFD.ShowDialog()

    If ClikedOk = DialogResult.OK Then
        strFileName = OpenFD.FileName
        dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
        dbSource = "Data Source = Agenda.mdb"

        con.ConnectionString = dbProvider & dbSource
        con.Open()
        SQL = "SELECT * FROM Contactos"
        dA = New OleDb.OleDbDataAdapter(SQL, con)
        dA.Fill(dS, "Agenda")

        con.Close()
        MaxRows = dS.Tables("Agenda").Rows.Count
        inc = -1

    End If
End Sub 
```

我想要做的是：
用户应该按菜单项并选择数据库文件，然后数据源将被定向到用户指向数据库文件的位置。我应该在“dbSource = Data Source = ...”行中输入什么？访问数据库是 .mdb，因为我在使用 .accdb 时遇到了麻烦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:49:30.033

更改此行：

```
dbSource = "Data Source = Agenda.mdb" 
```

对此：

```
dbSource = "Data Source=""" & OpenFD.FileName & """" 
```

这将指向`Data Source`用户选择的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:54:29.977

好吧，你在那里有点麻烦。[Jet 驱动程序是 32 位的，如果您想使用 jet 访问 64 位窗口中的数据库，则需要更新](http://www.connectionstrings.com/Articles/Show/using-jet-in-64-bit-environments)。

您还可以将您的应用程序配置为在 WoW64 模式下运行以使用 32 位驱动程序。

如果你已经做了一些让喷气机工作的事情，那么你可以这样做：

```
dbSource = "Data Source=" & OpenFD.FileName; 
```

如果您不想跳过让 Jet 工作的麻烦，[那么您可以使用 .Net 库](http://www.connectionstrings.com/access#net-framework-data-provider-for-ole-db)通过更改进行连接：

```
dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
dbSource = "Data Source = Agenda.mdb" 
```

到

```
dbProvider = "Driver={Microsoft Access Driver (*.mdb)};"
dbSource = "Dbq=" & "Agenda.mdb;" 
```

祝你好运。

# java - java-如何将多个整数/字符串值作为单个对象传递给函数-并从对象中重建值

> ID：15257578
> 
> 赞同：1
> 
> 时间：2013-03-06T20:42:30.357
> 
> 标签：java, function, parameters

在Java应用程序中，我必须首先将打包为单个对象参数的多个整数/字符串值传递给目标函数，然后目标函数必须正确地从已传递到的对象中重新构造整数/字符串值到它作为输入参数。

这样做的最佳/推荐方式是什么？

目标函数将仅从另一个 java 函数调用（在单独的程序中）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:44:43.863

创建一个用于打包所有参数的新类。在这种情况下，类充当参数的传输对象。例如，不要这样做：

```
void myMethod(int param1, String param2, boolean param3) 
```

做这个：

```
void myMethod(ParamTO param) 
```

并像这样定义一个传输对象：

```
public class ParamTO {
    private int param1;
    private String param2;
    private boolean param3;
    // get/set methods for the attributes
} 
```

“正确地从对象重新构造整数/字符串值”的方法是简单地调用每个属性对应的 get/set 方法。如果事先不知道需要检索的属性，可以使用反射来获取属性的值。

或者，您可以将 a`Map`与参数一起传递，其中键是参数的名称，值是参数的值。当然，您必须将参数转换为适当的类型，或者使用反射：

```
void myMethod(Map<String, Object> params) 
```

# google-app-engine - JDO MakePersistent 覆盖先前的条目

> ID：15257581
> 
> 赞同：0
> 
> 时间：2013-03-06T20:42:37.117
> 
> 标签：google-app-engine, gwt, google-cloud-datastore, jdo, datanucleus

我正在使用 JDO 为 GWT 项目在 GAE 中存储对象。我在创建新对象时遇到问题。我第一次创建对象时效果很好。但是第二次，它用另一个我觉得很奇怪的 Key 值覆盖了前一个。我应该说如果刷新页面我可以创建一个新对象。这是我正在使用的代码。post 参数是一个新对象，我认为数据存储实体上的新 ID 证明了这一点。我不明白我之前创建的对象去了哪里。

```
public static Post addPost(Post post) {
    PersistenceManager pm = PMF.get().getPersistenceManager();
    Transaction tx = pm.currentTransaction();
    try{
        tx.begin();
        post.getTopic().addPost(post);
        pm.makePersistent(post.getTopic());
        pm.detachCopyAll(post.getTopic());
        tx.commit();

    } finally {
        if (tx.isActive())
            tx.rollback();
        pm.close();
    }
    return post;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:44:32.767

建议您注意[对象生命周期状态](http://www.datanucleus.org/products/accessplatform_3_2/jdo/object_lifecycle.html)。根据公开可用的 JDO 规范，将瞬态对象传递给 persist 将使其持久化。您的`Post`类没有显示，也没有显示它在输入时的值或数据存储中的内容，也没有显示日志（它告诉您做了什么 PUT）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:08:19.000

我现在解决了我的问题，它与数据存储没有任何关系。问题是我的主题是从客户那里传递过来的。该主题在页面加载时更新，此后从未更新。因此，我总是将旧主题传递给其中没有新添加帖子的函数。因此，它将“覆盖”主题帖子列表中的前一个元素。我通过在添加新帖子之前在服务器端查找主题来解决这个问题。

# java - Java - 将对象数组的元素转换为 int

> ID：15257585
> 
> 赞同：-2
> 
> 时间：2013-03-06T20:42:59.050
> 
> 标签：java

对于家庭作业，我需要获取数组 acc，它是一个帐号数组，并将其内容与一些用户输入进行比较。将 acc[i] 与 acctNum 进行比较会产生错误。使用 (Integer) 或 (int) 转换为 int 不起作用。

```
private static int printArrayTest(Scanner bleh, Account [] acc)
    {
        int acctNum;    

        System.out.println("Account number: ");
        acctNum = bleh.nextInt();           

        for (int i=0; i<acc.length;i++)
        {
            System.out.println(acc[i]);
            if (acctNum == (Integer) acc[i])
                return acctNum;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:46:25.787

您的数组似乎包含“帐户”对象。您不能将 Account 转换为 int，因为它不是数字。您必须访问 Account 对象的帐号字段，可能类似于：

```
 if (acctNum == acc[i].getAccountNumber()) 
```

您需要在 Account 类中创建一个方法，该方法允许您检索帐号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:02:13.260

您不能将任意类型的对象（例如`Account`）强制转换为任何其他任意类型，例如`Integer`. 强制转换并不意味着对象会自动从一种类型转换为另一种类型。

转换所做的唯一一件事就是告诉编译器它不应该检查你正在转换的对象的类型——它应该假设对象就是你所说的。如果您将`Account`对象强制转换为 an `Integer`，那么您正在做的是告诉编译器该对象是 an`Integer`并且它不应该抱怨它。

但是当你运行程序时，JVM 仍然会检查转换是否有效，换句话说，它会检查你正在转换的对象是否确实是你正在转换的类型。如果不是，`ClassCastException`则抛出 a。这就是您的程序中发生的情况，因为`Account`对象不是`Integer`对象。

解决方案是 Memento Mori 在他的回答中写的：不要强制转换，而是在`Account`对象上调用适当的方法。

# python - 将 URL 字符串分配给 Django 中的变量

> ID：15257588
> 
> 赞同：0
> 
> 时间：2013-03-06T20:43:12.353
> 
> 标签：python, django

据我所知，有两种方法可以在 URL 中使用字符串。通过使用 URLConf 或通过 request.GET.get。

我尝试使用 request.GET.get 方法并尝试在 URL 上的 = 符号后捕获字符串，例如 www.domain.co.uk/macoui=001100

**URLConf**

```
url(r'^macoui=\d{6}$', 'domain.views.output'), 
```

**看法**

```
def output(request):
    if request.method == 'GET':
       request.GET.get('macoui', '')
       return render_to_response('template.html', {'response': '\'%s\' % (macoui)}, context_instance=RequestContext(request)) 
```

当我运行它时，我收到一条错误消息，提示“无需重复”。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:31:24.347

你这里有很多错误。

您已经正确地指出有两种获取参数的方法，然后将它们都混淆了。如果您要匹配 urlconf 中的内容，则不要使用 request.GET 来获取它们。无论如何，`request.GET`仅适用于查询字符串参数 - 即形式的 URL，`www.domain.co.uk/?param=value`其中`?`是必要的部分。

如果您的 URL 真的`www.domain.co.uk/macoui=001100`- 没有`?`- 那么您需要按如下方式修复您的正则表达式：

```
url(r'^macoui=(?P<macaoui>\d{6})$', 'domain.views.output'), 
```

和你的看法如下：

```
def output(request, macaoui): 
```

但是，如果 - 更有可能 - 你的 URL 是`www.domain.co.uk/?macoui=001100`- 带有问号 - 那么你的 URLconf 应该是：

```
url(r'^$', 'domain.views.output'), 
```

你的观点变成：

```
def output(request):
   macaoui = request.GET.get('macoui', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:00:35.697

我相信你在这一行有问题：

```
{'response': '\'%s\' % (macoui)} 
```

当您转义最后一个撇号时，整个字符串永远不会关闭。最好使用其他字符串分隔符：

```
{'response': "'%s'" % (macoui)} 
```

祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T20:51:10.610

你应该简单地做。

```
url(r'^/.*', 'domain.views.output'), 
```

然后使用 URL，www.domain.co.uk/?macoui=001100

您的示例中的 URL 什么不合适，因为请求 uri 上的获取参数 (request.GET) 紧跟在“？”之后

# java - 在 Play Framework 2 (Java) 中将空值绑定到数值字段

> ID：15257591
> 
> 赞同：1
> 
> 时间：2013-03-06T20:43:18.010
> 
> 标签：java, forms, playframework-2.0, databinder

我有一些表单，我希望能够将一些数字字段留空，但我从`Form.bindFromRequest()`. 这似乎是一个常见的要求，但经过数小时的搜索，我找不到任何关于此的文档。不过，我仍然希望我错过了一些明显的东西！

我做了一些挖掘，发现 Play 使用 Spring 的`DataBinder`类来进行实际的绑定。该类非常复杂，允许我为我的字段设置自定义`@InitBinder`活页夹，如果我使用 Spring，我可以向我的控制器添加一个方法，以使用`CustomNumberEditor`. 但是，`Form`除了设置允许的字段外，Play Framework 的对象似乎不允许访问 DataBinder。因此，活页夹尝试将一个空字符串转换为一个长字符串，这给出了一个`NumberFormatException`：

```
Failed to convert property value of type 'java.lang.String' to required type 'long' 
for property 'unitPriceExVAT'; 
nested exception is java.lang.NumberFormatException: For input string: "" 
```

那么，还有其他方法可以让活页夹允许空数字字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:09:31.530

将您的字段声明为`Long`而不是`long`原始类型，空值将被视为`null`.

# android - 安卓蓝牙耳机语音识别

> ID：15257593
> 
> 赞同：0
> 
> 时间：2013-03-06T20:43:26.803
> 
> 标签：android, bluetooth, speech-recognition

我打算使用Android语音识别，但Android只使用设备麦克风，而不是蓝牙。我能做些什么？

bluetooth 和 bluetooth_admin 的权限已设置。

蓝牙耳机已连接并在通话或其他任何情况下都能正常工作。

这是代码：

```
package com.example.test10;

import java.util.ArrayList;
import java.util.List;

import android.media.AudioManager;

import android.os.Bundle;
import android.app.Activity;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothHeadset;
import android.bluetooth.BluetoothProfile;
import android.content.Context;
import android.content.Intent;

import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;

import android.view.View;

import android.widget.Toast;

public class MainActivity extends Activity {
 private static final int REQUEST_CODE = 1234;

protected BluetoothAdapter mBluetoothAdapter;
protected BluetoothHeadset mBluetoothHeadset;
protected BluetoothDevice mConnectedHeadset;

protected AudioManager mAudioManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

public void test(View view)
{
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    if (mBluetoothAdapter != null)
    {
        mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        mAudioManager.startBluetoothSco();
        mBluetoothAdapter.getProfileProxy(this,      mHeadsetProfileListener,BluetoothProfile.HEADSET);

    }
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(
            new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.ACTION_VOICE_SEARCH_HANDS_FREE);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "JArvis.");
    startActivityForResult(intent, REQUEST_CODE);
}

 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
        {

            ArrayList<String> matches = data.getStringArrayListExtra(
                    RecognizerIntent.EXTRA_RESULTS);

            Toast.makeText(this, matches.toString(), 0).show();
        }
        super.onActivityResult(requestCode, resultCode, data);
    }

protected BluetoothProfile.ServiceListener mHeadsetProfileListener = new BluetoothProfile.ServiceListener()
{

    @Override
    public void onServiceDisconnected(int profile)
    {

        mBluetoothHeadset.stopVoiceRecognition(mConnectedHeadset);

        mBluetoothHeadset = null;
    }

    @Override
    public void onServiceConnected(int profile, BluetoothProfile proxy)
    {

        mBluetoothHeadset = (BluetoothHeadset) proxy;

        List<BluetoothDevice> devices = mBluetoothHeadset.getConnectedDevices();
        if (devices.size() > 0)
        {

            mConnectedHeadset = devices.get(0);

            mBluetoothHeadset.startVoiceRecognition(mConnectedHeadset);

        }

    }
};

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:28:37.420

尝试使用 AudioManager.setMode(AudioManager.MODE_IN_CALL);

# javascript - 在javascript中取消绑定点击事件

> ID：15257595
> 
> 赞同：0
> 
> 时间：2013-03-06T20:43:29.057
> 
> 标签：javascript, jquery, ajaxcontroltoolkit

我有一个动态生成的 ul li 列表。我想在单击列表元素时绑定单击事件。由于我使用的是 jquery 1.44，因此我使用了 live()：

```
$(function(){

    $('ul li').live('click', function(){
        alert('click');
    });

    $('ul').delegate('click', 'li', function(){
        alert('click');
    });

}); 
```

这些方法都不起作用，我相信这是因为[Ajax 控件工具包自动完成](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)创建了一个本机 click 方法，它干扰了我的 jquery 方法。我也尝试`unbind('click')`在绑定我的点击事件之前添加，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:45:55.543

由于您使用的是 jQuery 1.44，请使用[`.die()`](http://api.jquery.com/die/)删除绑定事件。

```
$('ul li').die('click'); 
```

# visual-studio-2010 - 将 Nuget 包添加到多项目解决方案模板

> ID：15257596
> 
> 赞同：1
> 
> 时间：2013-03-06T20:43:30.560
> 
> 标签：visual-studio-2010, wizard, nuget-package, project-template

在访问[http://docs.nuget.org/docs/reference/packages-in-visual-studio-templates](http://docs.nuget.org/docs/reference/packages-in-visual-studio-templates)之后， 我能够将 nuGet 包配置为单个项目模板的 VSIX 包的一部分。根据我们的链接需要在项目模板的 VSTEMPLATE 中添加向导扩展元素。

```
 <WizardExtension>
         <Assembly>NuGet.VisualStudio.Interop, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</Assembly>
         <FullClassName>NuGet.VisualStudio.TemplateWizard</FullClassName>

 </WizardExtension> 
```

当我希望将实现 IWizard 接口的自定义向导绑定到项目模板时，问题就开始了。为此，我需要向 GAC 添加一个包含 IWizard 实现的 dll，并将向导扩展元素的 dll 详细信息再次添加到项目模板的 VSTEMPLATE .

所以我想要两者然后我将在项目模板的 VSTEMPLATE 中有如下内容

```
 <WizardExtension>
     <Assembly>NuGet.VisualStudio.Interop, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</Assembly>
<FullClassName>NuGet.VisualStudio.TemplateWizard</FullClassName> 

  <Assembly>XXXXXXX, Version=1.0.0.0, Culture=neutral, PublicKeyToken=96268505a6009a69</Assembly>
  <FullClassName>XXXXXXX.ProjectTemplateWizard</FullClassName>

</WizardExtension> 
```

在上述情况下，模板将仅加载程序集，它不识别第二个程序集。

有没有办法做到这一点。

问候， 库雷希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T14:17:21.537

不要在 1 个扩展向导元素中使用 2 个组件，而是尝试使用 2 个向导扩展元素和一个用于 nuget dll 的单独向导数据元素。

# java - JSON 解析错误。字符串无法转换为 JSONArray

> ID：15257597
> 
> 赞同：-2
> 
> 时间：2013-03-06T20:43:31.407
> 
> 标签：java, php, android, json, parsing

我收到以下错误：

```
Error parsing to json on getJarrayFromString(); org.json.JSONException: Value result of type java.lang.String cannot be converted to JSONArray 
```

我的 JSON 代码如下：

```
public String getJsonFromUrl(String url){

        // to initialise the objects
        InputStream is = null;
        String result = "";

        //making HTTP POST request
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response = httpClient.execute(httpPost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
            Log.e(DEBUG, "Error getJsonFromUrl: " + e.toString());
        }

        // Converting to String
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while((line = reader.readLine()) != null){
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e(DEBUG, "Error converting the response to string getJsonFromUrl: " + e.toString());
        }

        return result;
    }

    /**
     * To convert the string recieved into json object
     * result refers to the string that will be converted
     * @return will return the json array
     */
    public JSONArray getJarrayFromString(String result){
        // Parsing string to JSON Array
        try{
            jarray = new JSONArray("result");                     <---- Error is here
        }catch(JSONException e){
            Log.e(DEBUG, "Error parsing to json on getJarrayFromString(); " + e.toString());
        }

        return jarray;
    } 
```

我的 Java 活动如下：

```
public void onTaskCompleted(String result) {
                        try {  
                            if(result!=""){
                                // the remote php link 
                                // converting the response into json array
                                Log.i(DEBUG, result);
                                jarray = utils.getJarrayFromString(result);

                                // number of rows in total for a query
                                int mysqlSize = (jarray.getJSONObject(0).getInt("numRows"));

                                Log.i(DEBUG, "From " + from + " to " + mysqlSize);

                                // to check if all the rows are parsed from the mysql
                                if(from <= mysqlSize){
                                    int rows;
                                    // to check if there is 0
                                    if(jarray.length()>0){
                                        Log.i(DEBUG, "From " + from + " to " + Math.floor(mysqlSize/nr)*nr);
                                        if(from+5<=Math.floor(mysqlSize/nr)*nr){
                                            rows = jarray.length();
                                        }else{
                                            rows = mysqlSize%nr+1;
                                            Utils.IS_ENDED_PRODUCT_LIST = true;
                                        }
                                        ArrayList<String> list = new ArrayList<String>();
                                        for(int i=1; i<rows; i++){
                                            JSONObject row = jarray.getJSONObject(i);
                                            bid.add(row.getInt("bid"));
                                            bTitle.add(row.getString("bTitle"));
                                            bCode.add(row.getString("bCode"));
                                            bPrice.add(row.getString("bPrice") + "£");
                                            bDescription.add(row.getString("bDescription"));
                                            bModule.add(row.getString("bModule"));
                                            bImage.add(Utils.PATH + row.getString("bImage"));
                                            list.add(row.getString("bImage"));
                                            // to check if an id already exists in the db or to create one if doesn't exist
                                            if(!db.hasIDBooks(row.getInt("bid"))) db.createRowOnBooks(row.getInt("bid"), row.getString("bTitle"), row.getString("bCode"), row.getString("bPrice"), row.getString("bDescription"), row.getString("bModule"), Utils.PATH + row.getString("bImage"), row.getString("bSpecialOffer"), row.getInt("bSpecialDiscount"), row.getString("bDateAdded"));
                                            Log.i(DEBUG, row.getString("bDescription"));
                                        }
                                        new DownloadImages(list, bAdapter).execute();
                                    }
                                }
                                postParameters.removeAll(postParameters);
                            }else{
                                Utils.IS_ENDED_PRODUCT_LIST = true;
                                if(rlLoading.isShown()){
                                    rlLoading.startAnimation(fadeOut());
                                    rlLoading.setVisibility(View.INVISIBLE);
                                }
                            }
                        } catch (Exception e) {  
                            Log.e(DEBUG, "Error at fillProductList(): " + e.toString());  
                        }
                    }
                });
                task.execute();

        }else{
            // if internet connectio is not available
            // then, rows will be fetched from the local sqllite database stored on the android phone
            if(db.size(justdealsDatabase.TABLE_BOOKS) > 0){
                Cursor cursor = db.getBooksRows(justdealsDatabase.TABLE_BOOKS);
                cursor.moveToFirst();
                while(!cursor.isAfterLast()){
                    bid.add(cursor.getInt(cursor.getColumnIndex(justdealsDatabase.KEY_BID)));
                    bTitle.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BTITLE)));
                    bCode.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BCODE)));
                    bPrice.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BPRICE))+ "£");
                    bDescription.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BDESCRIPTION)));
                    bModule.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BMODULE)));
                    bImage.add(cursor.getString(cursor.getColumnIndex(justdealsDatabase.KEY_BIMAGE)));
                    cursor.moveToNext();
                }
                bAdapter.notifyDataSetChanged();
                Utils.IS_ENDED_PRODUCT_LIST = true;
            }
        }
    } 
```

最后，我上面代码的 PHP API 在这里：

```
 <?php
    include("MysqlConnection.php");
    header('Content-Type: application/json');
    $from = $_POST["from"];
    $nr = $_POST["nr"];
    // those variables are for search
    $title = $_POST["title"];
    $code = $_POST["code"];
    $price = $_POST["price"];
    $module = $_POST["module"];
    $order = $_POST["order"];
    $by = $_POST["by"];

    $sql = "SET CHARACTER SET utf8";
    $db->query($sql);

        // if those 2 var are set then we order the query after them
        if(isset($order) && isset($by)){
            $sql .= " ORDER BY `$order` $by LIMIT $from, $nr";
        }else{
            $sql .= "LIMIT $from, $nr";
        }

        $query = $db->query($sql);
        $rows = array();
        $rows[] = array("numRows"=>$db->numRows($query));

        if($db->numRows($query)!=0){
            while($row = mysql_fetch_assoc($query)) {
                $rows[] =  $row;
            }
            echo(json_encode($rows));
        }
    }

    $db->closeConnection();
?> 
```

现在我已经对这个主题进行了广泛的研究，但无法找到上述问题的具体解决方案。

我读过一些帖子，这些帖子可能是在不使用双引号的情况下声明的字符串。这是否意味着存储在 SQL 文件中的值（例如书名、价格等）需要使用双引号而不是单引号？

如果我在 JSONLint 中运行上述代码，则会收到以下错误：

```
Parse error on line 1:

^
Expecting '{', '[' 
```

我尝试使用 ("{result}") 代替 {result) 或 ("result") 但这给了我更多错误。我非常接近让整个应用程序工作，但唯一的问题是将`result`字符串转换为有效的 JSON 数组。

任何想法和建议将不胜感激。

执行 JARRAY= 新 JSONARRAY（结果）后编辑的 LOG CAT 错误；

```
03-06 21:17:31.387: D/AndroidRuntime(818): Shutting down VM
03-06 21:17:31.387: W/dalvikvm(818): threadid=1: thread exiting with uncaught exception (group=0x40014760)
03-06 21:17:31.417: E/AndroidRuntime(818): FATAL EXCEPTION: main
03-06 21:17:31.417: E/AndroidRuntime(818): java.lang.NullPointerException
03-06 21:17:31.417: E/AndroidRuntime(818):  at com.fokrul.justdeals.ActivityTab$ProductsAdapter.getView(ActivityTab.java:1565)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.AbsListView.obtainView(AbsListView.java:1970)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.ListView.makeAndAddView(ListView.java:1756)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.ListView.fillDown(ListView.java:656)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.ListView.fillFromTop(ListView.java:716)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.ListView.layoutChildren(ListView.java:1595)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.AbsListView.onLayout(AbsListView.java:1800)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.View.layout(View.java:9581)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewGroup.layout(ViewGroup.java:3877)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1282)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.view.ViewRoot.handleMessage(ViewRoot.java:2040)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.os.Looper.loop(Looper.java:132)
03-06 21:17:31.417: E/AndroidRuntime(818):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-06 21:17:31.417: E/AndroidRuntime(818):  at java.lang.reflect.Method.invokeNative(Native Method)
03-06 21:17:31.417: E/AndroidRuntime(818):  at java.lang.reflect.Method.invoke(Method.java:491)
03-06 21:17:31.417: E/AndroidRuntime(818):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-06 21:17:31.417: E/AndroidRuntime(818):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-06 21:17:31.417: E/AndroidRuntime(818):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:57:13.943

这部分在这里

```
jarray = new JSONArray("result"); 
```

当然应该阅读

```
jarray = new JSONArray(result); 
```

相反，但我想你已经尝试过了。从解析器错误来看，我假设*结果*根本不包含有效的 JSON 字符串。如果它应该表示一个数组，它必须是这样的（以最简单的形式）：

```
["abc", "def", "ghi"] 
```

当涉及到单引号或双引号时，一些 JSON 解析器很挑剔。但在你的情况下，问题似乎在于括号。您能否使用调试器进入*getJarrayFromString*并检查进入 getJarrayFromString 的结果值是*什么**，*或者至少将原始值打印到控制台？

# java - getResourceAsStream 方法的相对路径

> ID：15257599
> 
> 赞同：0
> 
> 时间：2013-03-06T20:43:36.217
> 
> 标签：java

我有一个通过 ant 构建的 jav aproject。它将类文件写入 output/classes/com/... 路径。我的一个 java 类需要从位于输出文件夹上方一级文件夹中的文件中读取输入流。看起来如果将文件复制到 outptu/classes 下的包文件夹中，它似乎可以工作。但是我不想将我的配置文件放在输出文件夹中，因为它会在我执行 ant clean 时被清理。我希望它在输出文件夹上方的配置文件夹中找到它并加载它。

```
public static final String CONFIG_FILE="/../../../../../../../Config.txt";

public static ConfigObj getConfigObj() throws IOException {

InputStream i=ConfigLoader.class.getResourceAsStream(CONFIG_FILE); 
```

...

我想知道什么时候我想给 raltivepath，它应该是相对的。我试着查了一下，它说相对于类加载器。在这种情况下，类加载器是什么？它是我的 ConfigLoader.class 所在的 output/classes/com....../config 文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:48:58.737

问题是`getResourceAsStream()`只会*从 classpath*加载资源。我猜你只有在你的类路径上，所以如果配置文件在那个目录之外，`output/classes`你将永远无法加载配置文件。`getResourceAsStream()`将 a`File`与指向文件的绝对路径一起使用，或将其放在类路径中。

# javascript - 当键为数字时，用于键/值对的循环

> ID：15257613
> 
> 赞同：1
> 
> 时间：2013-03-06T20:44:29.133
> 
> 标签：javascript, arrays, loops, key, sorting

我刚刚意识到我的整个 Web 应用程序出现故障，它归结为一个正在重新排序我的对象/数组的 for 循环。

我正在通过 AJAX 检索关联数组（对象）。我可以在返回时检查它的结构，它是正确的。例如：

```
48 => Value1
50 => Value2
49 => Value3
51 => Value4 
```

但是，当我遍历它时，for 循环会重新排序对象。这是因为关联键是数字的。它们代表数据库中的数字 ID。我不知道 javascript 会扼杀它们并尝试将它们按数字顺序变成基本的数组键。因此，它吐出为：

```
48 => Value1
49 => Value3
50 => Value2
51 => Value4 
```

如何按构建的顺序循环遍历对象？我必须用字符串作为键来构建对象吗？就像“ID22”替换 22 一样。或者有什么方法可以强制 javascript 以特定顺序循环？

谢谢！马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:49:17.457

无法按特定顺序迭代 JavaScript 对象，因为 JS 对象是无序的。

解决此问题的最佳方法 - 创建 1 个对象和一个数组以保持秩序：

```
var values = {
  48: "Value1"
  50: "Value2"
  49: "Value3"
  51: "Value4"
}
var order = [48, 50, 49, 51] //put proterty id here to keep order eg. [51, 50, 49, 48] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:51:25.333

这只是 Chrome 的一个真正问题，他们有一个错误，但为了内部效率，这是一个“不会修复”。

我发现解决此问题的最佳方法是使用对象进行更改：

```
{
  48: "Value1"
  50: "Value2"
  49: "Value3"
  51: "Value4"
} 
```

改为这样的数组：

```
[
  {id: 48, value: "Value1"},
  {id: 50, value: "Value2"},
  {id: 49, value: "Value3"},
  {id: 51, value: "Value4"}
] 
```

它最终比替代解决方法更干净（正如您最初建议的那样）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:01:28.453

我相信您正在使用[for...in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)来检索您的密钥和价值。

正如上面的链接所说，正如它在[ECMAScript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-12.6.4)中指定的那样，*“枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）没有指定。”*

这意味着，您根本不能依赖您将通过`for…in`or获得的订单`Object.keys`。如果订单对您很重要，您必须将订单的索引存储在某处，并按该属性对数据进行排序。你不能`Object`像这样使用。

# macos - Mac SDK 中这个接口的名称是什么？

> ID：15257614
> 
> 赞同：0
> 
> 时间：2013-03-06T20:44:31.170
> 
> 标签：macos, input, interface, sdk, alert

试图制作一个界面，在几个屏幕上接受用户的一些输入。就像 Dropbox 的设置一样（如下）。谁能告诉我怎么做，或者接口单元叫什么？ ![在此处输入图像描述](../Images/ce6d869abcd0ae2322e2f3a40ba8a37c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:48:00.327

它通常被称为“向导”或“助手”界面。

Cocoa 中没有用于实现这些接口的标准组件，但是有许多可用的库可以实现它，包括[TESetupAssistant](https://github.com/taoeffect/TESetupAssistant)。

# login - 在 Qt 中使用谷歌日历的 webview

> ID：15257622
> 
> 赞同：0
> 
> 时间：2013-03-06T20:44:48.387
> 
> 标签：login, google-calendar-api

如何在 Qt 中将 google 帐户传递给 webview。我已成功将我的应用程序与 oauth 连接以访问 api 谷歌日历（只需要登录一次），但如果没有谷歌的登录提示，我无法在 qwebview 中显示谷歌日历。感谢和抱歉我的英语不好

# jquery - jQuery：在滚动时移动元素，在某个点停止，跨浏览器兼容

> ID：15257623
> 
> 赞同：1
> 
> 时间：2013-03-06T20:44:55.247
> 
> 标签：jquery, scroll, mousewheel

我试图在我的页面上有一个固定元素，当用户滚动时，它会跟随其余的内容。

例如，在 Internet Explorer 上尝试[http://jsfiddle.net/sVzfx/1/](http://jsfiddle.net/sVzfx/1/)，你会看到我的问题（这在 Firefox 上不会发生，只是在 Opera 上做了一些不那么奇怪的事情）。在这个 jsfiddle 中，我使用滚动事件和一行代码来定位浮动元素：

```
$(window).scroll(function() {
    $("#floatingContent").css("top", Math.max(maxTopPosition, startingPoint - $(this).scrollTop()));
}); 
```

（请参阅[在某个点停止固定位置滚动？](https://stackoverflow.com/questions/5902822/stopping-fixed-position-scrolling-at-a-certain-point)为此）

=> 滚动事件发生在滚动内容之后。因此，固定元素会延迟一些......

为了获得最佳用户体验，不存在此类行为至关重要。我的想法是计算*正在*滚动的像素数，在滚动其余内容之前定位元素。我认为用户不会看到这个元素位于其他元素之前，因为它太快了。问题是，我该怎么做？！

我尝试使用鼠标滚轮插件（请参阅[http://brandonaaron.net/code/mousewheel/docs](http://brandonaaron.net/code/mousewheel/docs)）。它使我能够在实际滚动之前做一些事情，而不是确定滚动的像素数......（我认为 deltaY 参数会返回它，但事实并非如此）。

你会怎么办？X（

也许我应该让元素相对并在它到达页面顶部后将其更改为固定......因此忘记在滚动之前移动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:38:51.247

在我想到以相对元素而不是固定元素为基础之后，我想出了这个解决方案。请参阅[http://jsfiddle.net/sVzfx/7/](http://jsfiddle.net/sVzfx/7/)：

```
var fixedElement = false;
var changingMoment = 250; // numbers of pixels from top where we want to fix or unfix
$(window).scroll(function() {
    // floatingContentMark lets us know where the element shall change 
    // from fixed to relative and vice versa
    var distanceFromTop = $("#floatingContentMark").offset().top - $(this).scrollTop();    
    if ((distanceFromTop <= changingMoment && !fixedElement) || 
        (distanceFromTop >= changingMoment && fixedElement)) 
    {    // either we came from top or bottom, same event triggered
         fixedElement = !fixedElement;
         $('#floatingContent').trigger('fixElement');
    }
});

// maybe dispatch in two different handlers, fix and unfix.
$('#floatingContent').bind('fixElement', function() {
    if ($(this).css('position') != 'fixed') {
        $(this).css('position', 'fixed') ;
        $(this).css('top', changingMoment ) ;
    }
    else {
        $(this).css('position', 'relative') ;
        $(this).css('top', 'auto') ;
    }
}) ; 
```

另一个解决方案可能是[http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)

# ruby-on-rails - 活动管理员编辑页面的 URL

> ID：15257637
> 
> 赞同：3
> 
> 时间：2013-03-06T20:45:22.727
> 
> 标签：ruby-on-rails, activeadmin

我正在开发一个使用 Active Admin 管理一些数据的 Rails 应用程序。我的一个观点导出了一个在后端汇总数据的 PDF。我想将 PDF 中的每个条目链接到与该资源关联的 Active Admin 中的“编辑”视图。

我的问题是如何获取模型实例的特定 Active Admin 编辑页面的 URL。我似乎无法使用`rake routes`或使用我在文档中找到的其他方法找到 URL。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T23:56:33.653

对于我使用过 activeadmin 的所有项目，编辑路线一直是`edit_admin_model`，路径看起来像`/admin/model/:id/edit`. 鉴于此，我希望您的应用程序对于`edit_admin_model_url(model_id)`您拥有 ActiveAdmin 文件的每个模型都有一个，您可以在编译 PDF 时在链接帮助程序中使用它。

如果这没有帮助，您可以`rake routes`为我们发布输出吗？

# visual-studio-2010 - 转换可枚举行集合 太短

> ID：15257639
> 
> 赞同：0
> 
> 时间：2013-03-06T20:45:28.460
> 
> 标签：visual-studio-2010, c#-4.0

我有这个错误不能`<short>`在这行代码中隐式地将 Enumerable 行集合转换为短：

```
Month = (from item in query select (short)item.Month); 
```

我想知道为什么以及为什么在查询变量中找不到 distinct() 或 count 方法。

这是我的方法：

```
 public bool IsEnableAccPosting(
      string CompanyCode, DateTime FromDate, DateTime ToDate, out short Month)
 {
     try
     {
         o_dmDebitAccounts = new dmDebitAccounts(sysInfo);

         bool IsEnable = false;

         DataTable dt = o_dmDebitAccounts.GetDebitInterestAccPeriods(CompanyCode);

         var query = from data in dt.AsEnumerable()
                     where data.Field<DateTime>("StartDate") == FromDate && 
                           data.Field<DateTime>("EndDate") == ToDate
                     select new 
                     {
                         Month = Convert.ToInt16(data.Field<short>("Month")),
                         Year = Convert.ToInt16(data.Field<short>("Year"))
                     };

         Month = (from item in query select (short)item.Month); //heres the error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:47:49.563

该字段已在执行该操作的 linq 查询中键入为 Int16。你不需要投射它。

[尝试从此处获取](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2008/04/24/checking-for-empty-enumerablerowcollections-when-using-linq.aspx)的以下代码

```
if (query.Any())
{
    var result = query.First();

    // Console.WriteLine("Results: {0}", result.Month);
    Month = result.Month;

} 
```

# linq - Telerik OpenAccess - 使用非持久属性进行搜索

> ID：15257642
> 
> 赞同：0
> 
> 时间：2013-03-06T20:45:40.117
> 
> 标签：linq, telerik, openaccess

我在一个项目中使用 Telerik OpenAccess 和 SQL Server，我需要能够搜索某人在某个日期的年龄。我遇到的问题是该人的出生日期存储在一个表中，而要比较的日期在另一个表中，这使我无法使用计算列。但是，它们被连接在一起，以便我可以通过在部分类中创建自己的非持久属性来计算年龄，如下所示：

```
public partial class Student
{
    [Telerik.OpenAccess.Transient]
    private int? _ageUponArrival;
    public virtual int? AgeUponArrival
    {
        get
        {
            try
            {
                var dob = DateTime.Parse(this.StudentProfiles.First().Person.YearOfBirth);
                var programStart = (DateTime)(this.StudentPrograms.First().ProgramStart);
                this._ageUponArrival = programStart.Year - dob.Year;
                if (dob > programStart.AddYears(-(int)(this._ageUponArrival)))
                {
                    (this._ageUponArrival)--;
                }
            }
            catch (Exception e)
            {
                this._ageUponArrival = null;
            }

            return _ageUponArrival;
        }
        set { }
    }
} 
```

请忽略这些表的设置有多糟糕，这是我继承的，目前无法更改。这种方法的问题是该属性不可用于使用 Linq 进行搜索。我知道我可以创建一个可以为我执行此操作的视图，但我宁愿不必为此维护视图。有没有办法通过 Telerik 创建一个计算属性，该属性将在 db 服务器上以可搜索的方式计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:55:27.337

在这一点上，这似乎是不可能的。[http://www.telerik.com/community/forums/orm/linq-questions/dynamic-query-with-extended-field.aspx](http://www.telerik.com/community/forums/orm/linq-questions/dynamic-query-with-extended-field.aspx)

# c++ - c ++跳过一个函数？

> ID：15257647
> 
> 赞同：-4
> 
> 时间：2013-03-06T20:45:55.797
> 
> 标签：c++

有人可以帮我弄清楚为什么“Paycheck combineChecks”功能没有做任何事情吗？它只是跳过它。当我运行它时，它会在打印出来后结束，并且不执行任何组合检查功能。我很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:49:11.130

```
Paycheck combineChecks(Paycheck p1, Paycheck p2); 
```

...不是对函数的*调用*，而是[*前向声明*](http://en.wikipedia.org/wiki/Forward_declaration)。

它基本上只是意味着“编译器，假设某处有使用此签名定义的函数，您可以稍后使用”。

编辑：要实际调用该函数，首先需要将两个薪水结合起来，您可以传入，让我们称它们为`paycheck1`and `paycheck2`，然后就可以了；

```
Paycheck combined = combineChecks(paycheck1, paycheck2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T20:50:22.873

```
int main() {
    // ...
    Paycheck combineChecks(Paycheck p1, Paycheck p2); 
```

那里的最后一行代码*声明*了一个调用的函数，该函数`combineChecks`接受两个类型的参数`Paycheck`并按值返回另一个`Paycheck`对象。这**不是**函数的*调用*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T20:48:51.460

这不是调用：

```
 combineChecks(Paycheck p1, Paycheck p2); 
```

但是是函数的重新声明（它已经在上面声明了`main()`）。我不确定建议更改为什么，因为程序中只有一个`Paycheck`名为`pay`的实例，而该函数需要两个。它还返回一个`Paycheck`需要使用的实例。

# android - 如何在广播接收器的帮助下检测来电？

> ID：15257649
> 
> 赞同：2
> 
> 时间：2013-03-06T20:46:04.940
> 
> 标签：android, broadcastreceiver, phone-call

我正在尝试通过广播接收器识别来电。我不能这样做！事实上，我无法“触发”广播！

这是我的代码：

```
activate.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                Toast.makeText(getApplicationContext(),"Clicked",1).show();
                final String BROADCAST_ACTION_NAME = ".BroadcastMM";
                Intent intent = new Intent();  
                intent.setAction(BROADCAST_ACTION_NAME);        
                sendBroadcast(intent); 

            }                                           
            } 
```

我不知道这个“sendBroadcast”是否被触发过！在我的广播接收器文件中：

```
public void onReceive(Context context, Intent intent)
    {
        if(intent.getAction()=="android.intent.action.PHONE_STATE"){
        Toast.makeText(c,"BroadCast fired!",1).show();}
        Bundle extras = intent.getExtras();
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            Toast.makeText(context, "Ringing", 1).show();
        }
} 
```

我的清单文件：

```
<receiver android:name=".BroadcastMM" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" >
                </action>
            </intent-filter>
        </receiver>

 <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

我缺少一些逻辑吗？我对Android很陌生，所以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:53:50.250

```
intent.getAction()=="android.intent.action.PHONE_STATE" 
```

应该

```
TelephonyManager.ACTION_PHONE_STATE_CHANGED.equals(intent.getAction()); 
```

因为这是您比较字符串（与`equals()`）的方式。

此外，您用于广播的代码不应该广播 - 没有任何`".BroadcastMM"`动作。尝试做一个明确的：

```
 Intent intent = new Intent(v.getContext(),BroadcastMM.class);  
 sendBroadcast(intent); 
```

您也可能无法广播`android.intent.action.PHONE_STATE`，因此`if`如果您做出明确的意图，您将不会被执行。

如果您真的想检查您的 BroadcastReceiver 是否正常工作，请将打印输出/Toasts 放在所有 if 之外。然后，一旦您确定 BroadcastReceiver 响应，请进行检查。但请记住，由于您只监听一个 Intent-Filter，因此检查 Intent 是否为`PHONE_STATE`Intent 有点多余。

# winrar - 用于移动压缩和删除文件的批处理脚本

> ID：15257650
> 
> 赞同：0
> 
> 时间：2013-03-06T20:46:07.773
> 
> 标签：winrar

我有一个执行以下操作的批处理脚本

```
@ECHO OFF

REM move files older than 2 days from the incoming directory to the incoming archive directory
robocopy D:\Agentrics\integration\download D:\Agentrics\integration\download\archive /MOV /MINAGE:2

REM Zip files in the Archieve directory that are older than one week
FOR %%A IN (D:\Agentrics\integration\download\archive\*.txt*, D:\Agentrics\integration\download\archive\*.cpi*) DO "C:\Program Files\WinRAR\WinRAR.exe" a -r -to7d D:\Agentrics\integration\download\archive\"%%~nA.zip" "%%A"

REM Delete Original files after they are zipped
forfiles /p D:\Agentrics\integration\download\archive /s /m *.txt* /d -7 /c "cmd /c del /q @path"
forfiles /p D:\Agentrics\integration\download\archive /s /m *.cpi* /d -7 /c "cmd /c del /q @path"

REM Delete files that are older than 6 months from the archive directory
forfiles /p D:\Agentrics\integration\download\archive /s /m *.zip* /d -180 /c "cmd /c del /q @path"
pause 
```

问题 1：当我运行脚本时，我会收到一些文件的 WinRAR 诊断消息。例如，如果传入目录中有不超过两天的文件，我会收到此消息。“WinRAR 诊断消息：没有要添加的文件”。由于此消息，脚本会停止，直到我单击对话框的关闭按钮。我正在使用 WinRAR 的免费版本并且它没有过期

问题 2：我在上面的脚本中有两个单独的命令。一种是压缩一周前的文件，另一种是在压缩后删除原始文件。我如何链接这两个命令，以便如果由于某种原因文件没有被压缩，它们也不应该被删除。或者如果文件没有被压缩，是否有命令来破坏脚本？我只想先压缩文件，然后删除原始文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T15:58:24.037

我建议使用

```
@ECHO OFF

REM Move files older than 2 days from the incoming directory to the incoming archive directory.
robocopy D:\Agentrics\integration\download D:\Agentrics\integration\download\archive /MOV /MINAGE:2

REM Move each file in the archive directory that is older than one week into a ZIP archive.
FOR %%A IN (D:\Agentrics\integration\download\archive\*.txt*, D:\Agentrics\integration\download\archive\*.cpi*) DO "C:\Program Files\WinRAR\WinRAR.exe" m -afzip -ep -inul -to7d -y "D:\Agentrics\integration\download\archive\%%~nA.zip" "%%A"

REM Delete files that are older than 6 months from the archive directory.
forfiles /p D:\Agentrics\integration\download\archive /s /m *.zip* /d -180 /c "cmd /c del /q @path" 
```

整个过程可以通过使用 command 来简化，`m`这意味着*move to archive*而不是 command`a`意味着*add to archive*。**WinRAR**仅在成功压缩后删除文件。

使用 switch会明确`-afzip`通知**WinRAR使用 ZIP 而不是 RAR 压缩。**

该开关`-ep`导致从存档中的文件名中删除路径。

可以使用 switch 抑制任何错误或警告消息的输出`-inul`。此开关主要用于控制台版本`Rar.exe`（不支持 ZIP 压缩），用于输出到 stdout 和 stderr，但也适用于**WinRAR**。在未创建 ZIP 文件时，我从未见过诊断消息来确认使用`WinRAR.exe`4.20 版进行的测试，因为该文件不超过 7 天。我已经看到有关使用`Rar.exe`创建 RAR 存档而不使用的警告`-inul`，但即使不使用 switch 也不需要按键`-y`。

我删除`-r`了此处不需要的递归存档开关，始终仅将 1 个文件移动到 ZIP 存档。

未修改的开关`-to7d`导致仅归档超过 7 天的文件。

最后`-y`添加了一个开关，以在所有查询中假设**是**，尽管我从未在我的测试中看到过一个。

另一个提示：
在 NTFS 分区上，可以在文件夹上设置属性**压缩**，从而自动 ZIP 压缩在该文件夹中复制或创建的所有文件，以节省磁盘存储空间。

# windows - git插件的Jenkins配置

> ID：15257652
> 
> 赞同：13
> 
> 时间：2013-03-06T20:46:11.627
> 
> 标签：windows, jenkins, continuous-integration, build-process

在新的 jenkins 项目中配置 git repo 时出现此错误：

```
Failed to connect to repository : Error performing command:  ls-remote -h file:///c:\Dev\git\rx HEAD 
```

我的 Windows 机器上有一个本地 git repo，从命令提示符克隆相同的路径在同一台机器上工作。我不知道可能是什么问题（git.exe 在系统路径上）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-03T23:12:58.207

**Windows**将 Jenkins 安装为服务。但它在无权访问 GIT 的不同用户权限下运行 Jenkins 服务。您可以通过此链接找到运行 Jenkins 的用户。[http://antagonisticpleiotropy.blogspot.com/2012/08/running-jenkins-in-windows-with-regular.html](http://antagonisticpleiotropy.blogspot.com/2012/08/running-jenkins-in-windows-with-regular.html)

例如。我的 Windows 上的本地用户名是“nathandrewsire”，不包括引号。打开 Windows 服务管理器（cmd 和 c:\services.msc，或使用 Windows 键 + R）。启用登录 > 此帐户：。然后输入 .\username（例如 .\nathandrewsire）。然后重新启动服务，您将可以从 Jenkins 构建访问 GIT。

我还找到了一个 windows shell 命令的片段，它将输出用户来验证它。回声 %PATH% 回声 %USERDOMAIN%\%USERNAME%

[http://antagonisticpleiotropy.blogspot.com/2012/08/running-jenkins-in-windows-with-regular.html](http://antagonisticpleiotropy.blogspot.com/2012/08/running-jenkins-in-windows-with-regular.html)

# **Linux**

如果您使用的是 Linux，则此错误也可能是由于未在 Git 存储库上启用共享造成的。Linux jenkins 用户将无法在其他用户下访问 Git 报告，除非...。 `git --bare init --shared=group` 此外，您的 jenkins 用户和 Git repo 用户必须属于同一组才能访问文件权限。还有其他替代方法，例如弄乱 umasks 和 ACL，但为您的两个用户设置一个 linux 组是最简单的方法。

确保不要使用裸 init 命令覆盖您的 Git 存储库。如果您已经有 Git 存储库，则需要使用共享选项设置/移动到新的存储库。我没有看到将现有存储库转换为**共享**的方法，因为我猜这些文件都需要更新？

注意*** 我使用 VMWare Workstation 共享文件夹在 Windows 客户机上构建。Jenkins 在进入 Git repo 时需要以下格式。

`//vmware-host/Shared Folders/vm-share/ridcyDevelopment.git/`

[无法让 Jenkins 和 Git 玩得很好](https://stackoverflow.com/questions/7410793/unable-to-get-jenkins-and-git-to-play-nice)

# objective-c - UIView 动画后的 CATransform3D 视觉伪影

> ID：15257658
> 
> 赞同：0
> 
> 时间：2013-03-06T20:46:36.907
> 
> 标签：objective-c, core-animation, catransform3d

我在根视图中有一个简单的滚动视图。滚动视图大小占据屏幕的整个宽度/高度。

在我在滚动视图的 x 轴上执行 3d 旋转后，效果很好。屏幕底部有一些奇怪的工件。就像在根视图上克隆的滚动视图一样。

在此处附上屏幕：http: [//imgur.com/WoMRFsx](http://imgur.com/WoMRFsx)

注意屏幕底部附近的蓝色/紫色条纹。

有没有办法摆脱它？它们在制作动画时出现，因此动画后的简单屏幕刷新将不起作用。

**更新代码：**

```
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0f / -500.0f;
CATransform3D translation = CATransform3DTranslate(transform, 0.0, -20.0, 0.0);
CATransform3D finalTransform = CATransform3DRotate(translation, 45.0f, 1.0, 0.0, 0.0);
        [viewImageScroll setClearsContextBeforeDrawing:YES];
[UIView animateWithDuration:3.0f delay:0.
    options:(UIViewAnimationOptionCurveEaseInOut)
    animations:^{
    [viewImageScroll.layer setTransform:finalTransform];
} completion:^(BOOL finished) {
    [viewImageScroll setClearsContextBeforeDrawing:YES];
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = 1.0f / -500.0f;
    CATransform3D flyAway = CATransform3DTranslate(transform, 0., -7000., -10000.0);
    flyAway = CATransform3DRotate(flyAway, 45.0f, 1.0, 0.0, 0.0);

    [UIView animateWithDuration:2.0f delay:0.
    options:(UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionOverrideInheritedCurve)
    animations:^{
        NSLog(@"done");
        [viewImageScroll.layer setTransform:flyAway];
        [viewImageScroll setAlpha:0];
    } completion:^(BOOL finished) {
        NSLog(@"done and done");
        [(X1NavigationController *)self.navigationController popControllerWithTransition:UIViewAnimationTransitionCurlDown];
    }];

}]; 
```

# sql-server - Visual Studio 出错，连接服务器

> ID：15257662
> 
> 赞同：0
> 
> 时间：2013-03-06T20:46:45.043
> 
> 标签：sql-server, visual-studio-2010

我在 Visual Studio 2010、SQL server 2008 中收到此消息

> *与 SQL Server 建立连接时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证名称实例是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：共享内存提供程序，错误 40 - 无法打开与 SQL Server 的连接*

我知道解决方法是从 SQL 配置工具启用端口号 1433，但是当我打开这个工具时，我没有找到任何项目它是空的。

*   系统：windows8, 64bit
*   Visual Studio 2010 专业版

那我该怎么办？

# c# - 验证下拉列表的哪个属性来自模型但从 RenderAction 创建

> ID：15257667
> 
> 赞同：0
> 
> 时间：2013-03-06T20:46:58.540
> 
> 标签：c#, asp.net, asp.net-mvc

我有以下地址 ViewModel：

```
public class AddressViewModel
{
    [StringLength(20, MinimumLength = 2, ErrorMessage = "Country name is too short")]
    public String Country { get; set; }

    public String City { get; set; }
    public String Street { get; set; }
    public String Number { get; set; }
    public String ApartmentBuilding { get; set; }
    public String Sector { get; set; }
} 
```

以及呈现它的视图：

```
<div class="control-group offset2 span6">
    @Html.LabelFor(m => m.Country)
    <div class="controls">
        @{
            var countryCtrlName = Html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName("Country");
            Html.RenderAction("List", "Country", new { ControlName = countryCtrlName });
        }
        @Html.ValidationMessageFor(m => m.Country)
    </div>
</div> 
```

Html.RenderAction("List") 调用一个控制器方法，该方法从数据库中获取所有国家，并使用下拉列表呈现和呈现部分，这是视图：

```
@model IEnumerable<SelectListItem>
@{var controlName = (string)ViewBag.ControlName;}
@Html.DropDownList(controlName, Model, new {@class = ViewBag.CssClass}) 
```

即使我的 DropdownList 控件使用正确的名称呈现并因此在 POST 时映射到正确的 ViewModel，输入控件也没有使用必要的 data-val 属性进行装饰以启用客户端验证（我相信这是因为模型部分是 IEnumerable 而不是包含国家名称的字符串属性。

地址视图模型通过我的应用程序用作许多视图的嵌套属性。关于如何使其验证的任何想法？

**编辑：根据@Robert 的回答更新了 ViewModel：**

public class AddressViewModel { [StringLength(20, MinimumLength = 2, ErrorMessage = "Country name is too short")] public String Country { get; 放; }

```
public String City { get; set; }
public String Street { get; set; }
public String Number { get; set; }
public String ApartmentBuilding { get; set; }
public String Sector { get; set; }

public IEnumerable<CountryViewModel> CountryList {get; set;}

//Constructor to pass the list of countries
public AddressViewModel(IEnumerable<CountryViewModel> countries)
{
    this.CountryList = countries;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:10:06.010

您是否尝试过制作 CountryModel 并有一个单独的控制器来处理您的下拉列表。让控制器返回一个局部视图，您可以将其放在您想要的任何页面上。在 CountryModel 上拥有一个带有 IEnumerable 的属性？

地址视图：

```
@model AddressModel

@Html.Partial("nameOfPartialView", CountryModel) 
```

模型：

```
public class CountryModel
{
    public IEnumerable<Countries> Countries { get; set; }
} 
```

控制器：

```
public ActionResult Countries()
{
    var countries = //get the list from the database
    return PartialView(countries);
} 
```

国家下拉列表的部分视图：

```
@model CountryModel
@{var controlName = (string)ViewBag.ControlName;}
@Html.DropDownListFor(Model => Model.Countries) 
```

接受国家的控制器：

```
public ActionResult GetCountry(int CountryId)
{
     //do something with the selected country
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:08:52.097

我认为您对问题所在是正确的：您没有将带注释的模型传递给局部视图，而是`IEnumerable`将`SelectListItem`. 框架不知道您显示的内容代表什么：它只知道如何称呼它。

我可以看到这样做很方便，但它有点违反 MVC 的精神。在这种情况下，您的“模型”并不是真正的模型，它只是传递标记项列表（列表项）的一种方式。

我会用整体`AddressViewModel`作为你的模型。这样，您将保留数据注释中的信息，这些信息告诉您该属性的要求是什么。

# windows-8 - Windows-8 浏览网址，本地存储

> ID：15257670
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:03.833
> 
> 标签：windows-8, windows-phone

我进行了很多搜索，但没有找到关于 Windows 8、Windows RT 和 Windows Phone 应用程序的本地存储的任何内容。

我想在页面冲浪和搜索网页上显示浏览器。当我找到指定的网页时，我想将 url 存储在设备的本地存储中。

在另一个页面上，我想在列表中显示 URL，以便快速选择并直接浏览 url。我正在使用 Visual Studio 2012 和 vb.net 进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:14:09.223

[开发中心主题使用 Windows 运行时访问应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)很好地介绍了 Windows 应用商店应用程序的本地存储选项

在 Windows 8（Windows Store 应用程序）中，您可以使用[应用程序设置](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#app_settings)（基于注册表）、[本地应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#local_application_data)（基于文件和沙盒）以及它们的[漫游版本](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#roaming_app_data)。

既然您提到了 Windows Phone 8，我将补充一点，虽然为 Windows Phone 提供了相同的 Windows 存储 API，但只有本地应用程序数据可以直接工作。在 Windows Phone 8 中，本地应用程序数据是另一种处理隔离存储的方式。但是，没有内置漫游数据选项。此外，Windows 8 中实现的应用程序设置在 Windows Phone 中不可用，但您可以使用语义等效的[隔离存储设置。](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T06:08:48.303

我已经浏览了网络浏览器的条款和条件，其中明确提到您不能使用网络浏览器进行一般浏览，如果您这样做，您的应用程序将被微软应用商店拒绝 参考请去通过 [http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN6](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN6)

# python - scikit-learn，向矢量化文档集添加特征

> ID：15257674
> 
> 赞同：6
> 
> 时间：2013-03-06T20:47:12.097
> 
> 标签：python, machine-learning, nlp, scikit-learn

我从 scikit-learn 开始，我正在尝试将一组文档转换为可以应用聚类和分类的格式。我已经看到了有关矢量化方法的详细信息，以及用于加载文件和索引它们的词汇表的 tfidf 转换。

但是，我对每个文档都有额外的元数据，例如作者、负责的部门、主题列表等。

如何向向量化函数生成的每个文档向量添加特征？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T21:25:42.600

您可以将`DictVectorizer`用于额外的分类数据，然后使用[scipy.sparse.hstack](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.hstack.html)将它们组合起来。

# mysql - 试图改善 msql 查询输出

> ID：15257675
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:11.720
> 
> 标签：mysql, sql

我在创建查询时遇到问题。以下是我想出的：

```
SELECT sitedata.sitecode       Site, 
       projectdata.startdate   Start, 
       projectdata.enddate     End, 
       resourcedata.firstname  PM_Name, 
       resourcedata.firstname  Lead_Name, 
       rresourcedata.firstname Other_Name 
FROM   projectdata 
       JOIN sitedata 
         ON projectdata.siteid = sitedata.id 
       JOIN resourcedata 
         ON projectdata.pmid = resourcedata.id 
             OR projectdata.leadid = resourcedata.id 
             OR projectdata.otherid = resourcedata.id 
WHERE  startdate = '03/06/2013' 
```

我的查询当前的输出如下：

```
Site   PM_Name   Lead_Name   Other_Name   
ST1    Joe       Joe         Joe
ST1    Jim       Jim         Jim
ST1    Bill      Bill        Bill
ST2    Lee       Lee         Lee
ST2    Jim       Jim         Jim
ST2    Bill      Bill        Bill 
```

下面是我想要得到的输出：

```
Site   PM_Name   Lead_Name    Other_Name   
ST1    Jim       Joe          Bill
ST2    Bill      Lee          Jim 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:00:48.567

您需要 3 个单独的 JOINS：

```
SELECT sitedata.sitecode       Site, 
       projectdata.startdate   Start, 
       projectdata.enddate     End, 
       pm.firstname  PM_Name, 
       ld.firstname  Lead_Name, 
       on.firstname Other_Name 
FROM   projectdata 
       JOIN sitedata ON projectdata.siteid = sitedata.id 
       LEFT JOIN resourcedata pm ON projectdata.pmid = resourcedata.id 
       LEFT JOIN resourcedata ld ON projectdata.leadid = resourcedata.id 
       LEFT JOIN resourcedata on ON projectdata.otherid = resourcedata.id 
WHERE  startdate = '03/06/2013' 
```

我使用 LEFT JOIN 以防某些角色未分配（NULL），如果您确定不是这种情况，您可以继续使用 INNER JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:01:32.357

您需要做的是为您正在寻找的每个名称加入您的资源表 3 次...

```
SELECT 
      sitedata.sitecode       Site, 
      projectdata.startdate   Start, 
      projectdata.enddate     End, 
      PM.firstname  PM_Name, 
      LEAD.firstname  Lead_Name, 
      OTHER.firstname Other_Name 
   FROM   
      projectdata 
         JOIN sitedata 
            ON projectdata.siteid = sitedata.id 
         JOIN resourcedata as PM
            ON projectdata.pmid = PM.id 
         JOIN resourcedata LEAD
            ON projectdata.leadid = LEAD.id 
         JOIN resourcedata OTHER
            ON projectdata.otherid = OTHER.id 
   WHERE  
      startdate = '03/06/2013' 
```

# javascript - 在一个循环中读取和写入 JQuery 语句

> ID：15257676
> 
> 赞同：3
> 
> 时间：2013-03-06T20:47:15.067
> 
> 标签：javascript, jquery

我在一个循环中有以下 jQuery 语句。`#MainContent_gvDemographic`并且`#tblFreez`是一页中的两个表。

```
$("#MainContent_gvDemographic").find(str)
                               .css("height", $("#tblFreez")
                               .find(str)
                               .css("height")) 
```

当循环中有很多步骤时，需要很长时间才能完成。为了解决这个问题，我使用了两个循环，一个用于读取 $("#tblFreez").find(str) 的高度，另一个用于将高度写入`$("#MainContent_gvDemographic").find(str)`，并使用一个数组来携带两者之间的高度数据循环。现在变得更快了。有谁知道为什么这两种解决方案在性能上有如此大的差异？计算复杂度在我看来是一样的。

好的，这是两个完整的版本。原来的：

```
function FixHeight() {
 var rowCount = $('#tblFreez tr').length;

    for (var i = 0; i < rowCount; i++) {
            var str = "";

            if ($.browser.msie) {
                str = "tr:eq(" + i + ") td";
            }
            else {
                str = "tr:eq(" + i + ")";
            }        
           $("#MainContent_gvDemographic").find(str).css("height", $("#tblFreez").find(str).css("height"));               
        } 
```

}

新的：

```
function FixHeight() {
        var rowCount = $('#tblFreez tr').length;
        var hei = new Array();
        for (var i = 0; i < rowCount; i++) {
            var str = "";
            if ($.browser.msie) {
                str = "tr:eq(" + i + ") td";
            }
            else {
                str = "tr:eq(" + i + ")";
            }
            hei[i] = $("#tblFreez").find(str).css("height");
        }
        for (var i = 0; i < rowCount; i++) {
            var str = "";

            if ($.browser.msie) {
                str = "tr:eq(" + i + ") td";
            }
            else {
                str = "tr:eq(" + i + ")";
            }

            $("#MainContent_gvDemographic").find(str).css("height", hei[i]);
        } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:06:08.807

为什么不只使用**一个**循环而不是`for`jQuery `.each()`。我没有测试下面的代码，但应该可以工作。

```
function FixHeight() {
    var $MainContent = $("#MainContent_gvDemographic");
    var $tblFreezRows = $("#tblFreez tr");

    var hei, $row;
    $tblFreezRows.each(function(index, elem){
        $row = $(this);

        if ($.browser.msie) {
            hei = $row.find('td').css("height");
            $MainContent.find("tr:eq(" + index + ") td").css("height", hei);
        }
        else {
            hei = $row.css("height");
            $MainContent.find("tr:eq(" + index + ")").css("height", hei);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:02:38.657

DOM 操作通常是昂贵的操作。

你的第一个版本有大量的 DOM 操作，但你的第二个版本有数量。它看起来像负载与数字。

理想情况下，您的第一个版本应该更快，因为它只是一个循环，并且迭代次数是第二个版本的一半。但并非总是如此。

假设你的内存是 1000M，其中 300M 可以被垃圾收集，这意味着它可以被清理。因此，只要您的内存接近 1000M，操作系统内存模型就会调用垃圾收集器。考虑到这些条件，假设在您的第一个版本中，每 5 次迭代需要 1000M，这最终会调用垃圾收集器来清理或释放资源以供下一次迭代。因此，如果您最终运行 100 次迭代，这等于 100 次迭代 + 20 次 GC 处理。

在第二种情况下，假设需要 50 次迭代才能填满 1000M，因此您最终会调用 4 次 GC 处理，这基本上是 20 次与 4 次在每次迭代之间调用其他进程。

以上只是一个推测，实际的内存模块比我解释的要聪明得多，但这只是为了给出负载与数字的概念。

无论如何..试试下面的代码，看看它是否能解决你的问题，

**在 TR 级别设置高度**

```
var fTable = document.getElementById('#tblFreez');
$("#MainContent_gvDemographic tr").each(function(ridx) {          
      $(this).height($(fTable.rows[ridx]).height());
}); 
```

**在 TD 层设置高度**

```
var fTable = document.getElementById('#tblFreez');
$("#MainContent_gvDemographic tr").each(function(ridx) {
      $(this).find('td').each(function (cidx) {
          $(this).height($(fTable.rows[ridx].cols[cidx]).height());
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:04:12.963

在更改/搜索它们之前尝试分离元素。然后重新附加它们。DOM 操作成本很高。

# php - 当日期为空时不显示 01-01-1970

> ID：15257677
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:16.093
> 
> 标签：php, web-services, validation, date

我正在使用 php 中的 web 服务。下面的一段代码给出了关于日期符号的以下欧洲格式结果： Begindatum : 01-01-2011 Einddatum : 01-01-1970 The einddatum (end date) 出于某种原因设置为 01-01-1970当没有/webservice 值为空时。我希望它在没有给出时保持空，但是如何？

帮助表示赞赏。

问候彼得

```
foreach($array as $k=>$v){
print "
<tr>
      <td>
            <ul>
                <li><b>Begindatum   : " . date("d-m-Y",strtotime($v->Begindatum)) ."</b></li>
                <li><b>Einddatum    : " . date("d-m-Y",strtotime($v->Einddatum)) ."</b></li>
            </ul>
      </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:52:51.280

`strtotime`失败时返回`false`（例如对于空字符串），因此您可以检查：

```
$begin = strtotime($v->Begindatum);
$end = strtotime($v->Einddatum);
...
       // echo a ternary statement
   <li><b>Begindatum : " . ($begin ? date("d-m-Y", $begin) : '') . "</b></li>
   <li><b>Einddatum    : " . ($end ? date("d-m-Y", $end) : '') . "</b></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-17T10:56:38.763

写

*   **Begindatum : " .($v->Begindatum ? date("dmY",strtotime($v->Begindatum)) : '')。***   **Einddatum : " .($v->Einddatum ? date("dmY",strtotime($v->Einddatum)) :'')。**

# c# - 修复了在 xml 中配置位置的文件到对象数组

> ID：15257678
> 
> 赞同：1
> 
> 时间：2013-03-06T20:47:20.793
> 
> 标签：c#, xml, linq, class, configuration

我想将固定长度的文件转换为 C# 对象。例如我有一个固定长度的文件，比如

```
Input File
------------

SAM      DENVER      20
temp     texas       33 
```

这表示名称、地点、年龄、长度为 10 的名称、长度为 10 的地点、长度为 2 的年龄。

现在我正在为输入文件中的位置配置我的 xml

## 配置 XML

```
<Mapping>
<Name StartPosition ="1" Length ="10"></Name>
<Place StartPosition ="11" Length ="10"></Place>
<Age StartPosition ="21" Length ="2"></Age>
</Mapping> 
```

我有一堂课

## 类对象

```
public class InputFileConvertor
{
    public string Name{get;set;}
    public string Place{get;set;}
    public string Age{get;set;}

} 
```

现在我的问题是如何将这个具有 n 条记录的输入固定长度文件转换为 InputFileConvertor 的字符串数组。它应该采用 XML 文件中的所有预配置参数。

注意：我希望以更少的内存消耗尽可能地实现此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:41:23.863

首先，您需要从 xml 文件中加载参数并将它们存储到变量中，例如：

```
int nameStart;
int nameLenght;
int placeStart;
int placeLenght;
..... 
```

阅读您的文件后：

```
List<InputFileConvertor> inputList = new ......
string[] lines =System.IO.File.ReadAllLines(@"C:\Data.txt");

foreach(String line in lines)
{
   InputFileConvertor lineInput = new InputFileConvertor();
   lineInput.Name = line.Substring(nameStart,nameLenght);
   //maybe remove the white spaces with String.Trim() or Regex.Replace(text,@"s","");
   //fill also the other properties

   inputList.Add(lineInput);
} 
```

# wordpress - “Instapress”wordpress 插件小部件（instagram 图片）

> ID：15257680
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:24.247
> 
> 标签：wordpress, plugins, lightbox

我很难在我的 wordpress 网站的侧边栏中显示“Instagram”灯箱（fancybox）。它显示在“固定”位置标题下方。我试图改变 z-index 和定位，但它不起作用。

有什么简单的解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:46:56.090

它对您不起作用，因为您将`#headerFixed`z-index 设置为：

**`1000000`**（说真的？？？客户是按z-index付款的吗？？）

第 174 行：

```
#headerFixed {
    margin: auto;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000000;
} 
```

尝试将其更改为更合理的数字（比如说 50 ）。

因为灯箱在 z-index 1100 附近“播放”，所以应该没问题。

# php - 无法使用 preg_match 提取文本

> ID：15257685
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:31.757
> 
> 标签：php, preg-match

我有这个代码：

```
include('class.pdf2text.php');
$a = new PDF2Text();
$a->setFilename('557270281.pdf');  
$a->decodePDF();

preg_match('/[0-9]{2}\/[0-9]{2}\/[0-9]{4}/', $a->output(), $date);
print_r($date);

preg_match('/bre(.*?)Pro/', $a->output(), $nombre);
print_r($nombre); 
```

我可以提取`$date`但不能提取`$nombre`，因为它得到空结果。我在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)的代码中测试了第二个正则表达式，它可以工作。

如果我将此添加到我的代码中，

```
$n ="Nombre : john smith angola Provincia : MADRID "; 
```

然后将我的代码中的第二个正则表达式更改为，

```
preg_match('/bre(.*?)Pro/', $n, $nombre); 
```

有用。

我怎样才能从中提取它`$a->output()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:08:17.507

Tfe[`/s`修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)用于使`.`匹配换行符：

```
preg_match('/bre(.*?)Pro/s', $a->output(), $nombre); 
```

# android - 无法跨过 Eclipse 中的断点

> ID：15257688
> 
> 赞同：1
> 
> 时间：2013-03-06T20:47:37.020
> 
> 标签：android, eclipse, macos, debugging

我正在使用 Eclipse 为 Android 开发。我的测试平台是使用 4.2.2 的安卓模拟器。每当我在调试中启动程序时，它都会在断点处中断就好了。但是，如果我尝试跨步/进入/退出或继续，它将立即在同一个断点处中断。如，下一行永远不会到达。

但是，如果我关闭断点，它将恢复等等。这是一个非常烦人的解决方法，因为这意味着我必须不断地禁用/重新启用断点。

有没有人见过这种行为，有没有解决办法？

编辑：我在 OSX Lion 上。

编辑 2：一些额外的研究似乎表明它与来自 LogCat 的日志消息有关：

```
03-06 21:47:07.861: D/dalvikvm(1232): threadid=1: still suspended after undo (sc=1 dc=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:18:45.487

我最终能够通过从 Android 的网站下载完整的 ADT 来解决这个问题——我最初分别下载了 Eclipse 和 SDK，因此配置中可能存在一些问题。此外，与 ADT 一起打包的 Eclipse 版本更新（Juno，我使用的是 Helios）。不确定这是否很重要，但如果其他人遇到这种情况可能会很重要。

# android - 使用 Dagger 和 Robolectric 注入服务

> ID：15257695
> 
> 赞同：6
> 
> 时间：2013-03-06T20:47:49.907
> 
> 标签：android, dependency-injection, robolectric, dagger

我正在尝试`TelephonyManager`用 Dagger 注入服务。我正在关注这个[示例](https://github.com/christopherperry/dagger/tree/master/examples/android)。我扩展了`Application`该类以创建图形并定义了包含的`ApplicationModule`位置`ServiceModule`，并且将来将包含其他模块。

**编辑：**

现在系统服务被注入到一个`Activity`没有任何问题的地方。`FinderApplication.inject(this)`我在里面失踪了`Activity`。它有一个注入，但在测试中仍然没有注入`Robolectric`. 我在这篇文章的底部添加了测试用例：

**Edit-2：** `ApplicationModule`删除并创建`BaseActivity`：

```
((FinderApplication) getApplication()).getGraph().inject(this); 
```

关于`onCreate`方法。我得到的错误是：

> 引起：java.lang.NoSuchMethodException: ServiceModule.()

但是如果我定义一个空的构造函数，当需要注入的类时，我会得到一个空指针。

**FinderApplication.java**

```
public class FinderApplication extends Application {
    private ObjectGraph mObjectGraph;

    @Override
    public final void onCreate() {
        super.onCreate();
        mObjectGraph = ObjectGraph.create(new ServiceModule(this));
    }

    public final ObjectGraph getGraph() {
        return mObjectGraph;
    }
} 
```

**服务模块.java**

```
@Module(entryPoints = { SimCardActivity.class, SimService.class })
public class ServiceModule {

    private Context mContext;

    public ServiceModule(Context context) {
        mContext = context;
    }

    @Provides @Singleton
    TelephonyManager provideTelephonyManager(){
        return (TelephonyManager) mContext
            .getSystemService(Context.TELEPHONY_SERVICE);
    }
} 
```

**SimCardActivityTest.java**

```
@RunWith(RobolectricTestRunner.class)
public class SimCardActivityTest { 

    @Before
    public void setUp() throws Exception {
        ObjectGraph.create(new TestModule()).inject(this);;
    }

    @Module(
            includes = ServiceModule.class,
            overrides = true,
            entryPoints = {SimCardActivityTest.class, SimCardActivity.class}
    )
    static class TestModule{
        public static TelephonyManager TELEPHONY_MANAGER = 
            Mockito.mock(TelephonyManager.class);

        @Provides @Singleton
        TelephonyManager provideTelephonyManager(){
            return TELEPHONY_MANAGER;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:15:17.030

正如@AndyDennie 在他的评论中所说，我在测试课上没有进行任何注射。注入被测活动而不是创建它`setUp()`解决了问题。

我当前的测试用例（相关代码）如下所示：

```
@RunWith(RobolectricTestRunner.class)
public class SimCardActivityTest {

    @Inject
    private SimCardActivity mActivity;

    private TelephonyManager mTelephonyManager;

    @Before
    public void setUp() throws Exception {
        ObjectGraph.create(new ServiceModule(Robolectric.application), 
                           new ServiceTestModule()).inject(this);
    }

    @Module(
            includes = {ServiceModule.class },
            overrides = true,
            entryPoints = {SimCardActivity.class, SimCardActivityTest.class}
    )
    static class ServiceTestModule {
        public static TelephonyManager TELEPHONY_MANAGER = 
            Mockito.mock(TelephonyManager.class);

        @Provides
        @Singleton
        TelephonyManager provideTelephonyManager(){
            return TELEPHONY_MANAGER;
        }
    }
} 
```

# reporting-services - SSRS 日期是粗粒度的，我该如何让它允许时间？

> ID：15257698
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:57.653
> 
> 标签：reporting-services, ssrs-2008

似乎在 SSRS 中，标准日期/时间数据类型不允许您像在 SSMS 中那样指定长日期（即 2010-09-30 23:59:00.000 之类的东西。

但奇怪的是，它可以让您指定确切的日期，如下所示：

![在此处输入图像描述](../Images/f0f275d7a85c6923fdb4b1f5077cd9ba.png)

除了它只是浪费时间，所以在这里它给了我 2012 年 10 月 10 日到 2012 年 10 月 10 日（一整天）。但我想要的是 5 分钟的跨度。

谢谢

# c# - 将 CSV 读入内存

> ID：15257699
> 
> 赞同：0
> 
> 时间：2013-03-06T20:47:58.923
> 
> 标签：c#, asp.net

我有一个提交按钮，可打开指向 CSV 文件的链接。该文件当前下载到本地磁盘。我需要在页面上（可能在标签中）显示 CSV 的内容，而无需将 CSV 下载到磁盘。这可能吗？

```
protected void submit(object sender, EventArgs e)
{
    System.Diagnostics.Process.Start(
        "http://download.finance.yahoo.com/d/quotes.csv?s=YHOO+GOOG+MSFT&f=sl1d1t1c1hgvbap2");           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:53:10.953

最简单的解决方案是使用`WebClient.DownloadString("http://server/file.csv")`方法。[MSDN 参考](http://msdn.microsoft.com/en-US/library/system.net.webclient.downloadstring%28v=vs.110%29.aspx)

# c# - 来自模拟器中两个不同应用程序的 httpnotificationchannel 相同 ChannelUri

> ID：15257706
> 
> 赞同：0
> 
> 时间：2013-03-06T20:48:16.703
> 
> 标签：c#, push-notification, windows-phone, mpns

我是 windows phone 开发的新手，已经开始在 Visual Studio 2012 的模拟器中使用推送通知。我们遇到了一个奇怪的问题，我们在 Visual Studio 中有两个应用程序，当我们启动每个应用程序并调用以下命令时：

```
 CurrentChannel = HttpNotificationChannel.Find("ChannelName");

  if (CurrentChannel == null)
  {
    CurrentChannel = new HttpNotificationChannel("ChannelName");
    CurrentChannel.Open();
    CurrentChannel.BindToShellTile();
    CurrentChannel.BindToShellToast();
  } 
```

即使`ChannelName`每个应用程序不同，但它们`CurrentChannel.ChannelUri`是相同的，所以当我们发送推送通知时，它们只会转到一个应用程序。

我确信我们遗漏了一些非常明显的东西或误解了它的工作方式，但任何洞察力都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T15:36:22.750

我想根据您的代码，您没有得到正确的 Uri。尝试侦听 ChannelUriUpdated 事件以获取新的 Uri。

如果您这样做了，也许可以在真实设备上尝试一下，模拟器并不总是足够受信任。

并且推送通知通道 URi 对于设备和应用程序组合是独一无二的，以确保您在这两个应用程序中做出不同的事情。无论如何，这似乎不可能发生。

# windows - 为什么 Apache 将本地服务于 Firefox，而不是 VBScript？

> ID：15257709
> 
> 赞同：1
> 
> 时间：2013-03-06T20:48:35.787
> 
> 标签：windows, apache, vbscript, apache2, localhost

我安装了 Apache 2.2。我可以通过 Firefox 使用 127.0.0.1 或 192.168.1.7 加载本地网页。（我正在加载的网页存储在我的硬盘上。）当我尝试使用 VBScript 访问这些地址时，它不起作用。如果我使用 VBScript 访问网络，它可以正常工作，包括如果我在域名中使用 IP 地址。

这是不适用于本地提供的文件的 VBScript，但可以用于 Internet 上的相同文件。（如果我使用 127.0.0.1 或 192.168.1.7，则会将“错误”写入文件）此脚本将网页上的所有 URL 写入文本文件。

```
Dim fso, outFile
Set fso = CreateObject("Scripting.FileSystemObject")
Set outFile = fso.CreateTextFile("output.txt", True)

'  The Chilkat Spider component/library is free.
set spider = CreateObject("Chilkat.Spider")

spider.Initialize "http://192.168.1.7/index.htm"
spider.AddUnspidered "http://192.168.1.7/index.htm"

success = spider.CrawlNext()

if success then 

For i = 0 To spider.NumOutboundLinks - 1
    outFile.WriteLine(spider.GetOutboundLink(i))
Next

else
    outFile.WriteLine("Error.")
end if 
```

以下是一些 Apache 访问日志。

```
Apache's log, running the VBScript (http://192.168.1.7/index.htm)
... GET /robots.txt HTTP/1.1" 404 208
... GET /index.htm HTTP/1.1" 200 365184
... GET /index.htm HTTP/1.1" 200 365184
Apache's log, loading the same from Firefox
... GET /index.htm HTTP/1.1" 200 365184
... GET /index_files/rsAItRhddGWakWTu2xcFYn5VJXiw_002.txt HTTP/1.1" 200 533363
... (additional accesses, with 200 and then different numbers) 
```

关于这个日志，本地保存的文件是一个谷歌搜索结果页面。（用于测试。我不会将它用于 Google。）VBScript 将在实时互联网版本上运行，而不是在本地提供的副本上运行。Firefox 加载本地提供的文件，它看起来与实时文件相同。

我的防火墙已关闭。阿帕奇 2.2；视窗 XP SP3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:58:24.973

我想您会在对[Apache 500 Error due to User Agent 的响应中找到答案？](https://stackoverflow.com/questions/15514110/apache-500-error-due-to-user-agent). 本质上，Apache 已设置为忽略带有空 UserAgent 字符串的请求。响应是指相关的[UserAgent/.htaccess question](https://stackoverflow.com/questions/11063944/unable-to-submit-feed-in-sites-like-friendfeed-and-feedage)。

另请参阅[如何使用 .htaccess 从您的网站阻止不需要的机器人](http://www.thesitewizard.com/apache/block-bots-with-htaccess.shtml)

# html - CSS：当元素之前有另一个元素时，第一个孩子的意外结果

> ID：15257712
> 
> 赞同：0
> 
> 时间：2013-03-06T20:48:57.240
> 
> 标签：html, css, css-selectors

我正在尝试为除第一个以外的所有段落元素设置 20px 的边距顶部。我有这个代码：

```
 <div>
            <h3>Title</h3>
            <p>Paragraph 1</p>
            <p>Paragraph 2</p>
            <p>Paragraph 3</p>
    </div> 
```

这是我的 CSS：

```
div p{
    margin-top: 20px;
}
div p:first-child{
    margin-top: 0;
} 
```

但这不起作用......我认为这是因为 ，但我无法弄清楚如何解决它......我相信你可以帮助我！如果我搞砸了我的英语，我深表歉意，我希望我说清楚了！

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:21:49.150

要将除第一个之外的一系列此类元素中的所有段落元素设置为 20px 的 margin-top，请使用

```
p + p { margin-top: 20px; } 
```

如果您还希望将`p`序列中第一个元素的边距顶部设置为零，看起来，只需添加

```
p { margin-top: 0; } 
```

具有更具体选择器的规则将覆盖除序列中第一个元素之外的任何元素。

选择器`div p:first-child`不起作用，因为它匹配作为`p`其父元素的第一个子元素和元素的后代的`div`元素。在您的示例中，没有`p`元素是其父元素的第一个子元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:52:19.090

`p`在你的例子中不是第一个孩子，`h3`是。一起去：

```
div h3 + p {
    margin-top: 0;
} 
```

演示：http: [//jsfiddle.net/fSZWU/](http://jsfiddle.net/fSZWU/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T20:58:00.767

**伪类`:first-child`**并不表示该*类型的第一个元素是其 parent 的子元素*。它更确切地说是**其 parent 的第一个子元素**。

我记得一开始也很困惑，因为我在期待`:first-child = first`。@yabol ( `h3 + p`) 提出的解决方案将为您提供 h3 旁边的段落，在您的情况下，它是第一个`<p>`；但要小心，因为通过更改页面结构，您可能会丢失该特定样式。

要准确实现您正在寻找的内容，您必须使用**[CSS3 伪类`:first-of-type`](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-of-type)**。小心支持（仅限 IE9+！）

`[**Try it out yourself!**](http://jsbin.com/ebahac/1/edit)`

# html - 是否有另一种资源可以显示 HTML 元素上所有可能的属性？

> ID：15257714
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:49:00.693
> 
> 标签：html, html5-canvas

我知道我可以直接转到 HTML 规范来查找标签上可以具有的所有属性（根据 html 5 显然排除了自定义属性）。[使用HTML 4.0 规范](http://www.w3.org/TR/REC-html40/index/attributes.html)执行此操作是最简单的（？），但挖掘起来很麻烦。HTML 5 规范也是如此。我想要的是类似于“备忘单”，它在单个页面上显示所有 HTML 元素及其可能的属性。

是否有任何其他资源可以显示给定标签上可以具有的所有属性，但在单个页面上，而无需深入研究或被大量文本和示例轰炸？

**编辑**

我清理了我的问题，以便更直接地了解我正在寻找的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:14:12.497

不！

一个包含所有 html 元素及其属性的列表可能不适合一个页面，甚至 2 个 - 至少不适合人类可读的页面！

**[编辑：更多作弊！...]**

[http://media.smashingmagazine.com/wp-content/uploads/images/html5-cheat-sheet/html5-cheat-sheet.pdf](http://media.smashingmagazine.com/wp-content/uploads/images/html5-cheat-sheet/html5-cheat-sheet.pdf)

这就是你想要的...4 页。

![在此处输入图像描述](../Images/dabd3bc307df27bc424bfebba1984d18.png)

# mysql - 从多个 SELECT 子查询中获取数据以从 MySQL 数据库进行报告

> ID：15257716
> 
> 赞同：20
> 
> 时间：2013-03-06T20:49:05.157
> 
> 标签：mysql, subquery

我试图实现的是创建一个由几个子查询组成的复杂查询。这个想法是让业务人员每周运行一次以提取报告数据。

效果类似于下面的查询，其中来自许多表的所有数据都显示在一个结果中。

```
select * from table1, table2, table3 
```

所以我需要类似的东西，但它不起作用。

```
select 
    (select * from   table1 where ...... ) as table1,
    (select * from   table2 where....... ) as table2 
```

手动，我可以单独运行子查询，然后手动将结果附加到一个大的 Excel 表中。但我想让业务人员更容易做到这一点，并尽量减少错误。

这在 MySQL 中可能吗？

这样做的原因是我正在将旧的 Oracle PIVOT SQL 语句转换为 MySQL 等价语句，并且子查询非常复杂。

如果需要，我可以提供 Oracle SQL。

一如既往地非常感谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-06T21:04:38.477

经过一番折腾：

```
select * from
    (select * from   table1 where survey_user_id=4 ) as T1
    ,
    (select * from   table2 where survey_field_type_id=100 ) as T2
    ,
    (select * from table3  )  as T3 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-06T21:05:49.837

如果我理解正确，你只需要 UNION :D

```
(SELECT column1 AS name1, column2 AS name2 FROM table1 WHERE ...... )
UNION
(SELECT column3 AS name1, column4 AS name2 FROM table2 WHERE ...... )
UNION
.... 
```

正如评论中提到的，列需要具有相同的名称（您可以为其使用别名）并保持相同的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-19T04:28:59.647

```
select main.*,
(select col from tbl1 where tbl1.id=main.id) as col1,
(select col from tbl2 where tbl2.id=main.id) as col2,
(select col from tbl3 where tbl3.id=main.id) as col3
from master as main 
```

# c# - JavaScript 参数的页面函数？

> ID：15257718
> 
> 赞同：0
> 
> 时间：2013-03-06T20:49:11.037
> 
> 标签：c#, asp.net

我的aspx中有这个JS：

```
 var calendar = $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: ''
                },
                defaultView: 'resourceNextWeeks',
                numberOfWeeks: <%# GetNumWeeks() %>,
... 
```

在我页面的cs中：

```
 public string GetNumWeeks()
        {
            return "2";
        } 
```

但它什么也没做...

还有另一种方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:54:25.263

尝试将您的代码更改为：

```
numberOfWeeks: <% =GetNumWeeks() %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:29:36.143

为什么你在后面使用代码。您可以创建另一个函数并简单地调用该函数

```
var calendar = $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: ''
                },
                defaultView: 'resourceNextWeeks',
                numberOfWeeks: GetNumWeeks() ,
...

.
.
.

function GetNumWeeks()
        {
            return "2";
        } 
```

编辑：

或者您可以使用 WebMethod

请看[这个样本：](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

# android - ADT 不会更新到 21.1

> ID：15257726
> 
> 赞同：0
> 
> 时间：2013-03-06T20:49:30.283
> 
> 标签：android, eclipse, adt

我在一月份下载了 ADT。我刚刚将 SDK 更新到最新版本。当我启动 Eclipse 时，它​​收到一条警告说我的 SDK 版本现在需要 ADT 21.1，所以我单击检查更新，但 Eclipse 没有找到任何更新。

现在我的大部分功能不再起作用，并且每当我执行任何操作时都会提示 NullPointerException。

有没有办法强制eclipse更新或下载正确的包并强制更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:51:02.977

*   您是否尝试过首先确保 Android SDK？转到窗口 > Android SDK 管理器。确保所有内容都已更新，然后再次尝试帮助 > 检查更新

*   然后您可以尝试卸载 ADT 插件并重新安装。（[卸载 Android ADT](https://stackoverflow.com/questions/9097163/uninstalling-android-adt)）如果你有问题卸载它，谷歌会提到（[http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)）

*   如果没有正确卸载，那么您可能必须完全卸载并重新安装 Eclipse

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:00:18.147

还要验证您的 Java 版本是否已修补到最新更新。每次更新后重新启动计算机也不是一个坏主意。

# node.js - 在nodejs（windows）中显示正在运行的子进程的输出

> ID：15257729
> 
> 赞同：19
> 
> 时间：2013-03-06T20:49:46.827
> 
> 标签：node.js, exec, child-process

例如，我正在使用以下代码（名为 server.js）在节点（我正在使用 Windows）中运行最基本的 webServer：

```
 var http = require('http');
       http.createServer(function (req, res) {
         res.writeHead(200, {'Content-Type': 'text/plain'});
         res.end('Hello World\n');
       }).listen(1337, '127.0.0.1');
    console.log('Server running at http://127.0.0.1:1337/'); 
```

我想将其作为子进程运行，并通过以下方式成功运行：

```
var exec = require('child_process').exec;
var serv = exec('node server.js', function(error, stdout, stderr){
    console.log('outputs & errors:' + error, stdout, stderr);
}); 
```

但是，一旦我运行第二个文件，我什么也没有收到。没有“输出和错误”，没有“服务器运行在...”。如果我在浏览器中键入 localhost:1337，我会得到“hello world”，所以我知道它正在运行。有没有办法通过管道传输“服务器正在运行......”所以我可以“确定”它正在监听？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-06T21:03:23.810

Exec 将返回`STDOUT`，`STDERR`当孩子完成时，请参阅**[`exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)**. 这就是服务器启动时看不到任何输出的原因。

您想要的是**[`fork`](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)**，它会自动将子进程连接`STDOUT`到`STDERR`您的父进程。如果您的子进程是节点进程，这是首选方式。

如果你想使用 exec 你可以使用子进程的流来获取你的数据，例如：

```
child.stdout.pipe(process.stdout);
child.stderr.pipe(process.stderr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-08T11:49:12.387

```
var child_process = nw.require('child_process');
var spawn = child_process 
```

//以下是在windows上，我将stdout和stderr记录到我的记录器中

```
var proc = spawn('cmd.exe', ['/S', '/C', script_path]);
proc.stdout.on('data', function(data) {
       logger(logtag, 'proc_stdout: ' + data);
});

proc.stderr.on('data', function(data) {
    logger(logtag, 'proc_stderr: ' + data);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-18T18:47:24.663

只需指定您希望子进程继承父进程的 stdio：

```
require('child_process').exec('node server.js', { stdio: 'inherit' }); 
```

# javascript - Javascript 警报消息运行时错误预期对象

> ID：15257735
> 
> 赞同：2
> 
> 时间：2013-03-06T20:50:13.083
> 
> 标签：javascript, runtime, alert

好的..这是一个奇怪的，因为我以前从未见过。我有一个严格来说是服务的应用程序......不涉及浏览器......我想做的就是使用 alert(); 用于调试。唯一的问题是它会导致一个 Object Expected 错误，即使它是一个简单的 alert("Show me!");

请记住...此代码未附加到任何表单或浏览器。那么我错过了什么？我以为我可以随时在 Javascript 中使用警报调用……请各位，帮助一个可怜的程序员！

提前谢谢你，埃里克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-24T00:27:46.317

就像 praneeth 在他的回复中已经建议的那样，这是一个 Windows WScript 的东西，或者更确切地说只是脚本运行的上下文。

这也有效，并不像 praneeth 提供的那样冗长：

```
WScript.Echo("Hello"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-31T03:40:13.827

如果您在 Windows 机器上执行此脚本，您可以在 javascript/Jscript 中执行此操作

Var Shell = new ActiveXObject("WScript.Shell"); Shell.Popup("你的调试信息");

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T21:01:21.743

alert() 方法是 JavaScript 浏览器**Window**对象的方法之一，它显示带有消息和 OK 按钮的警告框。

window 对象表示浏览器中打开的窗口。如果文档包含框架，则浏览器会为 HTML 文档创建一个窗口对象，并为每个框架创建一个额外的窗口对象。

我相信在指定的情况下，错误意味着没有找到 Window 预期的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:05:03.653

你试过`window.alert("show me");`吗？

因为 alert() 是一个 Window 对象方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:39:33.057

如果您没有在浏览器中运行，那么使用该`console.log`方法可能会更好 - 同样，如果没有任何关于您正在执行脚本的环境的详细信息，很难具体告诉您要做什么。

# php - 如何按 SKU 获取产品 url？

> ID：15257738
> 
> 赞同：1
> 
> 时间：2013-03-06T20:50:18.557
> 
> 标签：php, magento

我正在寻找一种通过我输入的 SKU 获取完整产品 URL 的方法。有任何想法吗？我看到了一些代码如何获取用于导出的产品完整 URL ( [http://t3jsot.blogspot.cz/2011/08/magento-export-products-with-full-urls.html](http://t3jsot.blogspot.cz/2011/08/magento-export-products-with-full-urls.html) )

但是如何获取我指定的 SKU 的完整产品 URL？因此，例如，我需要“B004QRKWKQ”SKU 的完整 URL，我得到了它。即时显示相关内容是我系统的一部分。我研究过，失败了。

# jetty - 我在哪里可以找到 jetty-hightide 的 org.mortbay 类？

> ID：15257739
> 
> 赞同：1
> 
> 时间：2013-03-06T20:50:21.343
> 
> 标签：jetty, embedded-jetty

我正在尝试遵循这些[Jetty/Howto/Spring 说明](http://wiki.eclipse.org/Jetty/Howto/Spring)。他们说你必须得到一个码头弹簧模块，它在 Codehaus 的码头高潮包中。我从那里下载了 2 个 jetty-hightide-7.5 zip，它们都不包含任何 org.mortbay... 包。我还有其他地方可以买到它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:28:45.750

我怀疑这些是捆绑在 hightide 发行版中的（它本身在 jetty 9 版本中被取消了）。

[http://repo2.maven.org/maven2/org/mortbay/jetty/jetty-spring/](http://repo2.maven.org/maven2/org/mortbay/jetty/jetty-spring/)

不过，您可以在此处找到每个版本的二进制文件和源代码。

此外，对于 jetty 9，该模块已移至 Eclipse，可在此处找到：

[http://repo2.maven.org/maven2/org/eclipse/jetty/jetty-spring/](http://repo2.maven.org/maven2/org/eclipse/jetty/jetty-spring/)

[编辑] 在这里更新了 jetty-9 的文档：

[http://www.eclipse.org/jetty/documentation/current/frameworks.html#framework-jetty-spring](http://www.eclipse.org/jetty/documentation/current/frameworks.html#framework-jetty-spring)

# database - 如何使用我的 Chrome 扩展程序在某处保存短文本？

> ID：15257740
> 
> 赞同：0
> 
> 时间：2013-03-06T20:50:22.660
> 
> 标签：database, html, google-chrome, google-chrome-extension

我正在编写一个 Chrome 扩展程序，它允许我将网站上的单个单词从一种语言翻译成另一种语言。请参阅下面的代码：

```
    函数getword（信息，标签）{

        console.log("Word " + info.selectionText + " 被点击。");
        chrome.tabs.create({

        //打开一个词典网站             
        网址：“http://pl.bab.la/slownik/polski-angielski/”+ info.selectionText，

        })

    }

    chrome.contextMenus.create({

        title: "翻译：%s",
        上下文：[“选择”]，
        点击：getword，

    });

```

我想保留所有请求单词的列表，以便稍后我可以返回它们并找出我已经记住了多少。你有什么建议？

*   我应该将这些文字保存在硬盘上吗？如果可以，如何使用 JavaScript 或 HTML5 来保存？

*   我应该使用数据库吗？该解决方案使我还可以保留每个单词的搜索次数，并按请求数对它们进行排序

*   （其他解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:58:22.050

请为此使用本地存储。[https://developer.chrome.com/extensions/storage.html](https://developer.chrome.com/extensions/storage.html)

# ruby-on-rails - 是否有必要从 Google Analytics 中过滤掉 New Relic 站点可用性 ping？

> ID：15257743
> 
> 赞同：1
> 
> 时间：2013-03-06T20:50:24.427
> 
> 标签：ruby-on-rails, heroku, google-analytics, newrelic

New Relic 在此处列出了其 User-Agent 标头和 IP 地址：

```
https://newrelic.com/docs/alerts/availability-monitoring 
```

User-Agent 标头是

```
NewRelicPinger/1.0 (your_account_id) 
```

但不幸的是，对于通过给定的用户代理标头简单地过滤 Google Analytics 的方法，我找不到任何共识。所以，我想知道，当 New Relic 设置为检查站点可用性时，是否需要从 GA 结果中阻止 New Relic？我已经过滤了我的 Papertrail 日志，因为每 5-10 秒出现一次请求很烦人。在 Google Analytics 中，我看到一些奇怪的位置结果进来，我认为这可能与 NR 有关，但我不确定。由于我没有找到任何一篇提到这些的文章，我想知道 Google 是否自动知道过滤 NR ping 或其他什么，可能是由于它的 User-Agent 标头。谁知道是否需要手动完成，还是应该将其单独留在 Google Analytics 中？我认为这将非常相关，因为 New Relic 和 GA 在许多 Heroku/Rails 设置中都将与课程相提并论，以及出色的可用性监控功能。

沿着同一条线，有没有人知道在为 GA 帐户设置过滤器时，该过滤器是否以非破坏性方式主动和追溯地应用于所有报告？还是它只是开始以破坏性方式过滤结果（例如，硬过滤结果而不保存过滤/排除的数据）？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:14:10.677

Google Analytics 依靠 Javascript 来收集指标。我很确定 New Relic 用来 ping 您的网站的客户端不会在页面上执行 Javascript，因此 ping 不应该出现在 Google Analytics 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:48:29.723

大多数监控服务不执行javascript，如果New Relic是这种情况，则无需过滤。

要确定 New Relic 是否确实出现在您的 GA 数据中，请使用受众 > 技术 > 浏览器和操作系统报告。Google 分析使用用户代理字符串作为浏览器，因此如果出现问题，您应该会看到 NewRelicPinger 的行项目。

![](../Images/8af9a1dad3f1b4f67c3b1d1a3a8c4015.png)

关于您的过滤器问题，过滤器只会以破坏性的方式向前发展。一旦数据被过滤，就没有办法恢复它，也没有办法过滤掉已经收集的数据（尽管如果需要，通常可以应用高级段）。

# string - Delphi中的自定义排序方法对字符串列表进行排序

> ID：15257746
> 
> 赞同：8
> 
> 时间：2013-03-06T20:50:31.467
> 
> 标签：string, delphi, sorting, delphi-2010

我正在尝试在 Delphi 中对名称如下所示的文件列表（它们存储为字符串列表）进行排序

```
a_1.xml
a_20.xml
a_10.xml
a_2.XML 
```

当我对文件名使用快速排序时`sort`，它对文件名进行如下排序

```
a_1.xml
a_10.xml
a_2.xml
a_20.XML 
```

但是，我希望文件名按以下方式排序

```
a_1.xml
a_2.xml
a_10.xml
a_20.XML 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-06T20:52:36.500

您可以使用 Explorer 使用的相同比较功能，即[`StrCmpLogicalW`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb759947.aspx).

```
function StrCmpLogicalW(psz1, psz2: PWideChar): Integer; stdcall;
  external 'shlwapi.dll';

function StrCmpLogical(const s1, s2: string): Integer;
begin
  Result := StrCmpLogicalW(PChar(s1), PChar(s2));
end; 
```

如果您在`TStringList`实例中有字符串，那么您可以使用它的[`CustomSort`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStringList.CustomSort)方法。这需要这种形式的比较函数：

```
TStringListSortCompare = function(List: TStringList; 
  Index1, Index2: Integer): Integer; 
```

所以，喂`CustomSort`这个函数：

```
function StringListCompareLogical(List: TStringList; 
  Index1, Index2: Integer): Integer;
begin
  Result := StrCmpLogical(List[Index1], List[Index2]);
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T20:58:26.577

根据您的具体情况调整的轻量级解决方案如下：

```
function compare(List: TStringList; Index1, Index2: Integer): Integer;
var
  n1, n2: integer;
begin
  n1 := StrToInt(Copy(List[Index1], 3, Length(List[Index1]) - 6));
  n2 := StrToInt(Copy(List[Index2], 3, Length(List[Index2]) - 6));
  result := n1 - n2;
end;

var
  sl: TStringList;

procedure AddAndSort;
begin
  sl := TStringList.Create;
  sl.Add('a_1.xml');
  sl.Add('a_20.xml');
  sl.Add('a_10.xml');
  sl.Add('a_2.XML');
  sl.CustomSort(compare);
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-26T17:35:25.260

Andreas Rejbrand 的回答是好的。但最好将此比较功能用于一般用途：

```
function compare(List: TStringList; Index1, Index2: Integer): Integer;
begin
  if Length(List[Index1]) = Length(List[Index2]) then
    begin
      if List[Index1] = List[Index2] then
        result := 0
      else
        if List[Index1] < List[Index2] then
          result := -1
        else
          result := 1;
    end
  else
    if Length(List[Index1]) < Length(List[Index2]) then
      result := -1
    else
      result := 1;
end;

//------------------------------------------------------------------

var sl: TStringList;

procedure AddAndSort;
begin
  sl := TStringList.Create;
  sl.Add('a_1.xml');
  sl.Add('a_20.xml');
  sl.Add('a_10.xml');
  sl.Add('a_2.XML');
  sl.CustomSort(compare);
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T20:57:17.107

几年前我在这里写了这个作为[答案](http://www.nldelphi.com/forum/showthread.php?t=33040&highlight=customsort)。它有点冗长，但它可以解决问题。

```
function GTSmartCompare(List: TStringList; Index1, Index2: Integer): Integer;

  procedure ExtractPart(var s: string; out Result: string; out Numbers: Boolean);
  var
    n: integer;
  begin
    Numbers := False;
    n := 1;
    while (s[n] in ['0'..'9']) and (n <= Length(s)) do
      Inc(n);

    { n > 1 if there were digits at the start of the string}
    if n > 1 then
    begin
      Result := Copy(s, 1, n - 1);
      Delete(s, 1, n - 1);
      Numbers := True;
    end
    else
    begin
      { No digits }
      n := 1;
      while (not (s[n] in ['0'..'9']) ) and (n <= Length(s)) do
        Inc(n);

      if n > 1 then
      begin
        Result := Copy(s, 1, n - 1);
        Delete(s, 1, n - 1);
      end
    end;
  end; //ExtractPart()

  function CompareNextPart(var s1, s2: string): Integer;
  var
    n1, n2: Boolean;
    p1, p2: string;
  begin
    { Extract the next part for comparison }
    ExtractPart(s1, p1, n1);
    ExtractPart(s2, p2, n2);

    { Both numbers? The do a numerical comparison, otherwise alfabetical }
    if n1 and n2 then
      Result := StrToInt(p1) - StrToInt(p2)
    else
      Result := StrIComp(PChar(p1), PChar(p2));
  end; //CompareNextPart()

var
  str1, str2, ext1, ext2: string;

begin
  Result := 0;
  { For 'normal' comparison
    str2 := List[Index1];
    str2 := List[Index2];
    For comparing file names }

  ext1 := ExtractFileExt(List[Index1]);
  ext2 := ExtractFileExt(List[Index2]);
  str1 := ChangeFileExt(List[Index1], '');
  str2 := ChangeFileExt(List[Index2], '');

  while (str1 <> '') and (str2 <> '') and (Result = 0) do
    Result := CompareNextPart(str1, str2);

  { Comparing found no numerical differences, so repeat with a 'normal' compare. }

  if Result = 0 then
    Result := StrIComp(PChar(List[Index1]), PChar(List[Index2]));

  { Still no differences? Compare file extensions. }

  if Result = 0 then
    Result := StrIComp(PChar(ext1), PChar(ext2));

end; 
```

[编辑]

但是，当大卫醒着时，为什么还要打扰。:p 在我的辩护中，当时很多人没有 Windows XP，这是引入 StrCmpLogicalW 的版本。

# solr - 从 datase 索引的 solr 二进制文件内容

> ID：15257748
> 
> 赞同：0
> 
> 时间：2013-03-06T20:50:48.700
> 
> 标签：solr

大家好，

我想知道是否有人可以帮我解决这个问题。我是 solr 的新手，我正在尝试索引二进制文件，例如 .pdf、.docx ... 问题是我的 solr 配置索引文件但是当我运行查询时它不显示驻留在文件中的内容.

我使用的是默认的 schema.xml。

对于 data-config.xml 我使用这个配置：

```
<dataConfig>
 <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver"
                     url="jdbc:mysql://localhost:3306/db" 
                     user="Iam" batchSize="-1"/>
 <document>
     <entity name="data" datasource="mysql" recursive="true"
          query="select id, post, guid from posts'"
          >

        <field column="guid" name="content"/>
     </entity>
 </document>
</dataConfig> 
```

在 solrconfig.xml 中：

```
 <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
  </requestHandler>

<requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>
 </lst>
  </requestHandler> 
```

我希望有人能给我一些建议。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:55:26.877

如果您使用 DIH，您可以使用 Tika 集成来索引丰富的内容文档，这些文档可以作为 blob 字段保存在文件系统或数据库中。

Solr 已经通过[TikaEntityProcessor提供了 Tika 和 DIH 的集成](http://wiki.apache.org/solr/TikaEntityProcessor)

集成 - [SOLR-1358](https://issues.apache.org/jira/browse/SOLR-1358)
斑点处理 - [SOLR-1737](https://issues.apache.org/jira/browse/SOLR-1737)

# jquery - jquery mouseneter 和解除绑定

> ID：15257750
> 
> 赞同：0
> 
> 时间：2013-03-06T20:50:56.273
> 
> 标签：jquery, hover, bind, mouseenter, unbind

撞到墙上需要帮助

我正在做一个项目，基本上......当你将鼠标悬停在图像上时，我需要它“暂停”。当鼠标移出时，它会切换回来。

我有这个工作一次......但因为我取消绑定事件，它只工作一次。

能引导我走向正确的方向吗？将不胜感激

这是我的片段：

```
$("#card1").mouseenter(function(){
     $("#overlay1").css("z-index","30").show("slide", { direction: "down" }, 700); 
     $("#pope1").css("z-index","30").hide("slide", { direction: "down" }, 700); 
     $(this).unbind("mouseenter")
});

$("#card1").mouseleave(function(){

     $("#overlay1").css("z-index","30").hide("slide", { direction: "down" }, 700); 
     $("#pope1").css("z-index","30").show("slide", { direction: "down" }, 700); 
     $(this).unbind("mouseleave")

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:10:55.323

在这种情况下，我认为您不一定需要取消绑定任何事件。尝试将您的代码更改为此 jsFiddle 的设置方式：http: [//jsfiddle.net/CMbQB/](http://jsfiddle.net/CMbQB/)

```
$('div').on('mouseover mouseout', function(e){
    if(e.type === "mouseover") {
        //mouse over events
    }
    else if(e.type === "mouseout") {
        //mouse out events
    }
}); 
```

# zooming - 更改缩放时，多边形会变得混乱

> ID：15257752
> 
> 赞同：0
> 
> 时间：2013-03-06T20:51:09.150
> 
> 标签：zooming, polygon, google-fusion-tables

这是仅显示一个多边形的链接。

[https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col1+from+1PdVL8ltzXzHWbZI6MVWNghTz7sh9FKH9hw_YYYM+where+col0+%3D+412&h=false&lat=44.07068786477725&lng=-91.70146332&tmpl=1&43l41&t=z1&=z =2](https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col1+from+1PdVL8ltzXzHWbZI6MVWNghTz7sh9FKH9hw_YYYM+where+col0+%3D+412&h=false&lat=44.07068786477725&lng=-91.70146331134345&z=13&t=1&l=col1&y=2&tmplt=2)

增加缩放将使形状首先消失，然后显示为不同的多边形。

这是几何列的值：

```
<Polygon><outerBoundaryIs><LinearRing><coordinates>-91.7038631654,44.0694374856,0 -91.7055532814,44.0738871339,0 -91.7054979683,44.0739665384,0 -91.7055402916,44.0741115336,0 -91.7056036015,44.0741019279,0 -91.7056387888,44.074121276,0 -91.7057645696,44.0744656962,0 -91.7056251503,44.0745755934,0 -91.7054229212,44.0739915748,0 -91.7037600839,44.0695990536,0 -91.7036568735,44.0695519885,0 -91.7031499848,44.0695794019,0 -91.7031311599,44.0695869489,0 -91.7031138294,44.0695961708,0 -91.7030982784,44.069606916,0 -91.7030847624,44.0696190077,0 -91.7030735039,44.0696322471,0 -91.7030646879,44.0696464165,0 -91.7030584595,44.0696612828,0 -91.7030549211,44.0696766016,0 -91.7030541309,44.0696921209,0 -91.7030561019,44.0697075855,0 -91.7030410581,44.0694768048,0 -91.7038631654,44.0694374856,0</coordinates></LinearRing></outerBoundaryIs></Polygon> 
```

有没有办法纠正这种行为？

波格丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:17:15.217

看起来像 FusionTablesLayer 瓦片生成器的问题。如果我[使用 FusionTables API v1.0 将其导出并将其呈现为原生 Google Maps API v3 多边形](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=44.072353&lng=-91.705089&zoom=16&type=m&tablequery=SELECT%20%20col1%20FROM%20&tableid=1PdVL8ltzXzHWbZI6MVWNghTz7sh9FKH9hw_YYYM&where=col0%20=%20412)，它似乎适用于所有缩放级别。

几个选项：

1.  您可以尝试反转缠绕方向，这在一些奇怪的情况下有所帮助
2.  您可以尝试简化多边形（尽管对我来说似乎很简单），但这在一些奇怪的情况下也有所帮助。

我所指的先前实例在[Fusion Tables User Group](https://groups.google.com/group/fusion-tables-users-group)中进行了讨论，无法通过快速搜索找到它们。

这是[我记得的线程之一](http://groups.google.com/group/fusion-tables-users-group/browse_frm/thread/9e37c4238fd7346/9857a1ac5fc7b426?hl=en&lnk=gst&q=polygons+simplify#9857a1ac5fc7b426)

# version-control - 我应该如何处理 BitBucket 中需要一些调整的拉取请求？

> ID：15257754
> 
> 赞同：10
> 
> 时间：2013-03-06T20:51:10.967
> 
> 标签：version-control, mercurial, open-source, branching-and-merging

有人在 BitBucket 上向我发送了拉取请求。有问题的更改在默认分支上提交。在将其合并之前，我想进行一些调整，但更重要的是，我想发布此更改的预览版本，以便社区对其进行评估，看看他们是否满意。

*理想情况下*，我想将更改拉入主仓库，但*将其放在分支上*。做一些调整。像我对任何其他构建一样标记它，然后发布。但是，这似乎是不可能的：如果我理解正确，分支是“烘焙”的，我无法将更改拉到不同的分支上。这个对吗？

如果是这样，我能做些什么呢？我可以拉动然后将第二个头合并到遗忘中，同时还可以从我拉动的变化中创建一个分支。或者我可以在 fork 上完成这项工作，但这意味着在主 repo 中不会有与此构建相关的标签。或者我应该完全做其他事情吗？

PS 更改本身是高质量的，这*不是*要求原作者改进它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-07T11:19:20.513

这可能会有所帮助：

[http://www.electricmonk.nl/log/2014/03/31/test-a-pull-merge-request-before-accepting-on-bitbucket/](http://www.electricmonk.nl/log/2014/03/31/test-a-pull-merge-request-before-accepting-on-bitbucket/)

基本上，该链接说要执行以下操作：

*   git fetch [https://bitbucket.org/myrepository/master](https://bitbucket.org/myrepository/master) somename
*   git checkout FETCH_HEAD
*   检查代码并测试心脏的内容。
*   （如果代码被接受）， git checkout master
*   git 合并 FETCH_HEAD
*   git 推送

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T01:48:33.067

而不是使用 Bitbucket 的“接受拉取请求”，只需将更改拉入您的本地存储库。您可以使用 rebase 将提交（或一组提交）移动到命名分支。然后只需将更改推送到您的主要 bitbucket 存储库。（并且可能会拒绝 bibucket 拉取请求，并附上评论说更改已推送到主仓库）

例如：

如果你的回购是：bitbucket/ProjectA/MainRepoForProjectA

pullrequest 来自：bitbucket/someuser/MainRepoForProjectA

1.  从 bitbucket/someuser/MainRepoMainRepoForProjectA 拉取
2.  rebase 到新拉取的提交到命名分支。
3.  进行您想要进行的任何额外更改。
4.  推送到 bitbucket/ProjectA/MainRepoMainRepoForProjectA

注意：如果您之前没有使用过 rebase：

1.  在 TortoiseHg 文件 -> 设置 -> 扩展中启用它
2.  更新到您也想移动更改的分支负责人。
3.  右键单击要移动的更改的基础 -> 修改历史记录 -> 变基

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T18:26:11.657

What accepting a pull request does is described in the [docs](https://confluence.atlassian.com/display/BITBUCKET/Working+with+pull+requests); it'll try to merge, and you'll get to solve conflicts. The docs do mention you can set the target branch when creating the pull request. But since your branch didn't exist yet, your contributor couldn't pick it.

So you'll have to pull to your local machine and [move some commits to a new branch in Hg](https://stackoverflow.com/q/14159849/383793) then push to your bitbucket.

Do read the rebase [docs](http://mercurial.selenic.com/wiki/RebaseExtension) because changing history will have consequences for the validity of your contributors repo, he'll have to fork again to be in sync with you again. This can become cumbersome if he already has some more high quality code ready for you.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T12:33:04.773

可以将拉取请求的代码拉取为：

```
git fetch origin refs/pull-requests/$PR_NO/from:$LOCAL_BRANCH 
```

# amazon-web-services - 如何计算映射器/减速器的数量以最大化运行在亚马逊云上的 mahout RecommenderJob 的性能？

> ID：15257759
> 
> 赞同：1
> 
> 时间：2013-03-06T20:51:26.417
> 
> 标签：amazon-web-services, hadoop, mahout, reducers, mapper

根据 Amazon Elastic MapReduce 上使用/可用的实例，计算要使用的正确 hadoop 映射器和缩减器数量的最佳方法是什么？（使用 mahout-core-0.7 发行版的 RecommenderJob）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:27:08.380

通用的 Hadoop 答案适用：

*   让 Hadoop 选择映射器的数量
*   将 reducer 的数量设置为集群中的 reduce 槽数

对于 EMR，查找在您使用的实例类型上默认运行的减速器数量：http: [//docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/HadoopMemoryDe​​fault_AMI2.3.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/HadoopMemoryDefault_AMI2.3.html)

然后乘以您正在使用的工人数量。这是一个非常理想的减速器数量——甚至是它的一小部分。

除非您有特定的理由认为这些不是最佳选择，否则我会同意这一点。

*PS 不要忘记为您的工作人员使用现场实例来节省资金和/或部署更多工作人员。*

*广告*插播：如果您对 Mahout、推荐以及在 EMR 上运行感兴趣，您可能应该关注[Myrrix](http://myrrix.com)。我是创始人，也是您现在运行的一些 Mahout 代码的作者。这是一个“下一代”基于 Hadoop 的推荐产品，除其他外，它已经针对 EMR 进行了很好的优化。

# c# - 在 GridView 中时，oncheckedchanged 未触发 CheckBox

> ID：15257761
> 
> 赞同：0
> 
> 时间：2013-03-06T20:51:31.657
> 
> 标签：c#, asp.net, gridview, oncheckedchanged

我正在尝试为GridView 中的一个`OnCheckedChanged`事件触发事件。`asp:CheckBox`但是当我将它放入 GridView 时，它不会在代码隐藏中触发 OnCheckedChanged。

如果我将相同的复选框放在 gridview 之外，那就太好了。

我尝试将函数设置为 a `RowCommand`，但这也不起作用。

这是我的复选框：

```
<asp:CheckBox ID="HoldBillingCheckBox" runat="server" key='<%# Eval("CustomerItemID") %>' Checked='<%# Eval("HoldBilling") %>' OnCheckedChanged="CustomerItemsGridView_CheckChanged" Enabled="true" EnableViewState="true" AutoPostBack="true"/> 
```

在我看来，这只发生在您尝试用任何视图包装 CheckBox 时。

有没有人有什么建议？我用谷歌搜索了很多不同的解决方案，但似乎没有任何效果（他们主要是告诉我添加`AutoPostBack`为`true`...或 enableviewstate 为真）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:54:24.593

如果您在每次加载页面时重新绑定您的 gridview，那么您正在破坏`CheckChanged`事件的状态。当您重新绑定您的网格时，它会使页面的先前“版本”中的任何控件无效。

您需要添加`if (!IsPostBack)`为条件以防止您的 GridView 重新绑定。

# javascript - 如何将字符串附加到 Javascript 变量

> ID：15257764
> 
> 赞同：-6
> 
> 时间：2013-03-06T20:51:43.633
> 
> 标签：javascript, variables

我有一个 Javascript 变量`var test="hello"`，我想在函数中将前缀“world”添加到变量的字符串中，以便 test="worldhello"。如何在 JavaScript 代码中编写该命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:53:11.950

字符串连接： `test = "world"+test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:53:24.300

```
var test = "hello";
var newStr = "world" + test; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:53:30.617

```
var test = "hello";
test = test + " world"; 
```

或者

```
var world = " world";
var test = "hello" + world; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T20:55:39.520

```
var var2 = "world";
test = "hello "+var2; 
```

在一个函数中

```
function concatenate(str,con){ 
        return str.toString()+con.toString(); //toString() for prevent an int or float sum
 }
var x = concatenate('hello ','world'); //hello world
var y = concatenate(x,"!!!"); //hello world!!! 
```

# android - 如何在运行时检测是否存在横向版本的布局？

> ID：15257766
> 
> 赞同：1
> 
> 时间：2013-03-06T20:51:44.103
> 
> 标签：android, android-layout, android-resources

我到处搜索，根本找不到任何方法：

在我的项目中，我有两个用于布局的资源文件夹：一个称为“layout”，另一个称为“layout-land”。这是根据当前方向为每个 Activity 使用两个独立布局的熟悉方式。问题是我没有为每个 Activity 单独的“layout-land”布局，而且并不是所有的 Activity 甚至都需要不同的横向模式布局。

我所做的是覆盖默认值`onConfigurationChanged`以防止发生方向更改（`configChanges="orientation"`在清单中使用适当的）。每次用户倾斜屏幕时，这让我省去了很多将东西塞进 Bundle 中的麻烦。但是，在某些情况下，我实际上*希望*发生方向变化。每当“layout-land”文件夹中有相应的布局时，我希望方向像往常一样改变。每当没有时，我想`onConfigurationChanged`抑制方向更改事件。

我创建了一个父`BaseActivity`类，它扩展`Activity`并且是我所有活动的基类，并覆盖`onConfigurationChanged`：

```
@Override
public void onConfigurationChanged(android.content.res.Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);

    if(...there is a layout-land version of the current activity's layout...)
    {
        setRequestedOrientation(newConfig.orientation);
    }
    else
    {
        // Do nothing, since raising the orientation change event
        // to change from a portrait layout to the same portrait layout is silly.
    }
} 
```

唯一的障碍是我找不到任何方法来确定我的布局资源是否有布局版。我已经知道当前布局的资源 id（`BaseActivity`通过覆盖在我的班级的其他地方获得`setContentView`），但是布局的横向版本和纵向版本共享相同的 id，我看不到`Resources`对象告诉我哪个简单的方法当我通过 id 向它询问特定资源时它给我的布局版本。必须有办法做到这一点。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:41:59.217

在 layout_land 文件夹的布局中，为最外层的 FrameLayout 添加一个 id = layout_name_of_this_file。例如

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_name_of_this_file"
    ..... 
```

在你的代码中

```
getResources().getIdentifier("layout_name_of_this_file", "id", "com.example....")) = resource id of the button (a pretty long number) 
```

和

```
getResources().getIdentifier("layout_name_of_the_layout_file_exist_in_layout_but_not_in_layout_land", "id", "com.example....")) = 0 
```

因为没有这个id的FrameLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:23:34.647

好吧，所以我找到了一个解决方案，尽管是一个悲惨的、被黑掉的解决方案。我不推荐这个黑客，因为它是由撒旦做的：

`Resources`您可以从 Activity 的方法中获取的对象`getResources()`本身不会告诉您是否存在资源的“布局-土地”版本。但是，您可以通过调用其方法来获取`AssetManager`对象内部使用的对象。`Resources``getAssets()`

该`AssetManager`对象有一个名为 的方法`openNonAssetFd`，它将尝试获取文件夹中特定文件的文件描述符`res`。`FileNotFoundException`不幸的是，即使文件存在，您尝试使用此方法打开的大多数（如果不是全部）内容都会抛出！

因此，例如，如果您有一个名为 的文件`res/layout-land/settings_menu.xml`，那么它会抛出一条`FileNotFoundException`消息：“该文件无法作为文件描述符打开；它可能已被压缩”。这对 Android 人员来说是糟糕的设计，因为从技术上讲，文件就在那里，并且抛出的异常至少应该是不同的类型。

然而，更重要的是，为了检测`layout-land`布局是否存在，我们可以依赖于抛出异常的返回消息的差异。这就是黑客：

如果该文件存在，则异常消息将是“此文件无法作为文件描述符打开；它可能已被压缩”。

如果文件不存在，异常消息将与您传递给`openNonAssetFd`方法的参数相同（即，它将是不存在资源的文件名）。

现在，有了这个，我们可以创建一个这样的方法：

```
protected boolean landscapeLayoutExists(int layoutId)
{
// Since we're always passing in an id of a layout, this will always correspond
// to a layout file in any of the layout folders (either layout, or both layout and layout-land, in my case).
String rawName = this.getResources().getResourceEntryName(layoutId);
String testPath = "res/layout-land/" + rawName + ".xml";

try
{
    this.getResources().getAssets().openNonAssetFd(testPath);
}
catch(Exception ex)
{
    if(ex.getMessage().equals(testPath))
        return false;
    else
        return true;
}   

// Somehow, we managed to grab the file descriptor successfully.  
// In my experience, this cannot happen with layouts, but if it ever does,
// then we definitely know the file exists.
return true;
} 
```

通过使用此方法，我现在可以确定“layout-land”文件夹中是否存在当前活动布局的版本，并采取相应措施。

然而，我对这种方法并不满意，尽管它确实有效（目前，至少在我测试过的 Galaxy S3 上）。如果有人有更好的请告诉我。

# jquery - drupal 6 jquery 模块添加

> ID：15257768
> 
> 赞同：0
> 
> 时间：2013-03-06T20:52:09.947
> 
> 标签：jquery, login, module, drupal-6

这就是模块现在用于登录框的基本切换的内容。

```
 Drupal.logintoboggan_toggleboggan = function() {
  $("#toboggan-login-link").click(
    function () {
      $("#toboggan-login").slideToggle("fast");
      this.blur();
      return false;
    }
  );
}; 
```

这就是我在模块内需要它的作品。我只是想把它移到外面而不修改模块本身。

```
Drupal.logintoboggan_toggleboggan = function() {
  $("#toboggan-login-link").click(
    function () {
      $("#toboggan-login").slideToggle("slow", function() {
         if($(this).css('display') == 'block'){
                 $("#art-main").append('<div class="outer-login"></div>');
                     $(".outer-login").click( function () {
                          $("#toboggan-login").slideToggle("fast");
                          $(this).remove();
                     });
      } else{
          $(".outer-login").remove();
      }
      });

      this.blur();
      return false;
    }
  ); 
```

我曾尝试使用 unset 删除 loggintoboggan.js 文件，但安装的 jquery 更新模块无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:20:45.493

创建一个比模块具有更高权重的自定义`loggintoboggan`模块。这个模块添加了一个 JS 文件，它覆盖了您感兴趣的 JS 函数。关键是确保`loggintoboggan`在更改加载它的 JS 文件之后加载您的自定义 JS 文件。

这就是您的`.install`文件的样子。它确保您的模块在之后被调用`loggintoboggan`

```
/**
* Implementation of hook_enable
* @file your_module_name.install
* @see http://drupal.org/node/110238 (http://drupal.org/node/110238)
*/
function your_module_name_enable {
    // Find out the weight of the logintoboggan module
    $weight = db_result(db_query("SELECT weight FROM {system} WHERE name = '[logintoboggan]'"));

    // Set our module to a weight 1 higher
    db_query("UPDATE {system} SET weight = %d WHERE name = '[your_module_name]'", $weight + 1);
} 
```

你的`.module`文件很简单，只是添加了一个JS文件。

```
/**
* @file your_module_name.module
* @see http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_init/6
*/
function your_module_name_init() {
    drupal_add_js(drupal_get_path('module', 'your_module_name') . '/your_module_name.js');
} 
```

在您的`.js`文件中确保添加覆盖的功能。我不是 JS 大师，但应该遵循这些原则。

```
// Make a backup, maybe we'll need the original implementation
var orig_logintoboggan_toggleboggan = Drupal.logintoboggan_toggleboggan;

// Overwrite the function
Drupal.logintoboggan_toggleboggan = function() {
  // ... new implementation ...
}; 
```

所以你的自定义模块应该有以下结构：

```
cd your_module_name/
.. your_module_name.install
.. your_module_name.module
.. your_module_name.js 
```

清除 Drupal 缓存和浏览器缓存以确保正确加载所有 JS 文件。

# json - Doctrine2、PersistentCollection 和 JMS 序列化器

> ID：15257769
> 
> 赞同：2
> 
> 时间：2013-03-06T20:52:12.107
> 
> 标签：json, doctrine-orm, jmsserializerbundle

我有一个具有 oneToMany 关系的实体，我可以使用获取关联的项目；

```
$this->getQueuedItems() 
```

这将返回*Doctrine\ORM\PersistentCollection*对象，然后我将其传递给[JMS Serializer](http://jmsyst.com/bundles/JMSSerializerBundle#usage)，如下所示；

```
$serializer = $container->get('serializer');
$json = $serializer->serialize($this->getQueuedItems(), 'json'); 
```

但是`$json`使用`var_dump()`结果输出；

> 字符串（2）“[]”

这是错误的。那里有数据，因为如果我做完了`foreach()`，`$this->getQueuedItems()`我就会得到数据。

如何使用 JMS Serializer 将*Doctrine\ORM\PersistentCollection*序列化为 JSON？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T15:53:05.040

PersistentCollection 对象是一个迭代器聚合而不是一个数组。区别在于 Iterator 是一个可以迭代的对象，因此可能包含也可能不包含在任何时候序列化为数组所需的数据。

要将 Collection 序列化为 JSON，请尝试以下操作：

```
$serializer = $container->get('serializer');
$arr        = $this->getQueuedItems()->toArray();
$json       = $serializer->serialize($arr, 'json'); 
```

如果您对键不太在意，也可以使用`getValues`, 而不是`toArray`.

# android - 线性布局的 onclicklistener 问题

> ID：15257770
> 
> 赞同：5
> 
> 时间：2013-03-06T20:52:15.100
> 
> 标签：android, android-linearlayout

为了将图标和文本分组，我将它们分组到一个线性布局中，并为线性布局实现了一个监听器。

```
<LinearLayout
        android:id="@+id/ll0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:orientation="vertical" >
        <ImageButton
            android:id="@+id/imageButton0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/start" />
        <TextView
            android:id="@+id/textView0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Start"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout> 
```

我已经通过以下方式实现了监听器：-

```
l0 = (LinearLayout)findViewById(R.id.ll0);
l0.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {
            //Some Code
        }
    }); 
```

我面临的问题是我点击图标，听众似乎没有回应。当我单击文本视图和图标之间的空间时，侦听器工作。我希望整个部分都是可点击的，而不是在某个特定点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:02:06.520

我认为这`ImageButton`是一个可点击的视图，并且正在捕获点击，阻止 LinearLayout 接收点击事件。尝试添加`android:clickable="false"`到定义`ImageButton`.

但是，更好的答案是使用复合可绘制对象。请参阅[如何使用复合可绘制对象而不是包含 ImageView 和 TextView 的 LinearLayout](https://stackoverflow.com/q/8318765/687315)。基本上，您可以添加`android:drawableTop="@drawable/start"`到定义 the 的 XML 中并完全`TextView`取消and 。然后你只需处理点击。`LinearLayout``ImageButton``TextView`

# css - @font-face 用于远程字体的模糊/粗体/扭曲字形

> ID：15257774
> 
> 赞同：8
> 
> 时间：2013-03-06T20:52:31.210
> 
> 标签：css, firefox, fonts, font-face, chromium

我试图切换到`@font-face`而不是依赖用户来安装字体（准确地说是[Terminus](http://terminus-font.sourceforge.net/)字体，而不是它的[TTF](http://files.ax86.net/terminus-ttf/)版本）。

不幸的是，在处理远程托管文件时，我遇到了一些奇怪的字体“粗体”或“失真”，如下图所示：

![在此处输入图像描述](../Images/22f7bfb02d09534b85a436972800e849.png)

正如你所看到的，由于某种原因，远程获取的字体在 12、14、16、18、20、24 的大小上被扭曲了，而本地字体对它们应用了某种“规范化”，使它们看起来很漂亮和 in-地方。

另一件要提的事情是，我尝试使用[FontSquirrel 的 WebFont Generator](http://www.fontsquirrel.com/tools/webfont-generator)，其中 demo-htmls 屏幕截图分别沿着这些 CSS 代码显示：

```
@font-face {
   font-family: 'terminus_ttfmedium';
   src: url('terminusmedium-4.38-webfont.ttf') format('truetype');
} 
```

和

```
@font-face {
   font-family: 'terminus_ttfmedium';
   src: local('Terminus (TTF)');
} 
```

**Terminus (TTF)**是同一个文件包，只是安装到`/usr/share/fonts/`.

任何见解将不胜感激！

**编辑**：更改 FontSquirrel 高级选项似乎根本无法解决这个问题。

**EDIT2**：我尝试过的所有方法都没有在 Firefox 上工作。此外，我已将一种字体复制到工作目录（与本地使用的相同），通过“url”字段链接它，它仍然保持扭曲。这是徒劳的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T17:28:31.253

我发现在渲染模糊的元素上包含以下内容会有所帮助。

```
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
font-smoothing: antialiased; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:33:57.063

font-squirrel used to have a section with multiple outputs. TTF doesn't work in all versions of browers

```
 src: url('Bevan-webfont.eot?#iefix') format('embedded-opentype'),
     url('Bevan-webfont.woff') format('woff'),
     url('Bevan-webfont.ttf') format('truetype'),
     url('Bevan-webfont.svg#BevanRegular') format('svg'); 
```

they use to have font packs with all these extensions, cant seem to find it on the site anymore.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:29:13.543

我将其添加为答案，因为我没有足够的评论点。但这是一个问题：你在本地安装了 Terminus 吗？如果是这样，请尝试卸载它，看看你得到了什么。

道歉作为答案发表评论......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:15:33.750

其实TTF只接受mozila，字体类型很多，TTF、SVG、WOFF、eot。您必须使用所有字体文件。这是一个很棒的生成字体的工具。

[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

这是一个例子：

```
@font-face {
    font-family: 'YourFontName';
    src: url('gershwinscript.eot');
    src: url('gershwinscript.eot?#iefix') format('embedded-opentype'),
         url('gershwinscript.woff') format('woff'),
         url('gershwinscript.ttf') format('truetype'),
         url('gershwinscript.svg#gershwin_scriptregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我想，这会对你有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T17:02:47.023

无需添加所有 CSS 代码以及使其在多个浏览器中运行所需的所有文件，只需尝试 Google WebFonts。[http://www.google.com/webfonts](http://www.google.com/webfonts)

# php - C2DM和GCM有什么区别

> ID：15257775
> 
> 赞同：3
> 
> 时间：2013-03-06T20:52:31.443
> 
> 标签：php, android, notifications, android-c2dm, google-cloud-messaging

有什么区别，哪个更好？

我计划开发一个 android 应用程序，该应用程序将使用 PHP 将通知从应用程序的一个用户发送到同一应用程序的另一个用户，那么哪个适合开发此应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T20:54:31.517

永远不要再使用 C2DM。它已正式淘汰，取而代之的是 GCM。谷歌可能会在某个时候完全停止支持它。

从实现者的角度来看，差异很小，而且 GCM 实际上更容易集成（一方面，您不需要创建一个虚拟的 Google 帐户）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T20:54:03.940

C2DM -> 旧版本
GCM -> 新版本

你不能再使用C2DM，你必须使用GCM。

# c# - 提交表单时对象丢失

> ID：15257776
> 
> 赞同：0
> 
> 时间：2013-03-06T20:52:32.023
> 
> 标签：c#, asp.net-mvc, razor

在我的 MVC 应用程序中，有一部分用户必须在发送之前查看项目。他必须选择要发送多少个。

这是我写下来的观点：

```
 @model MyApp.Models.ObjInfo

    @{
        ViewBag.Title = "Dispatch Item";
    }

    <h2>Dispatch Item</h2>
    <h3>
        <label>
            For: @Html.DisplayFor(model => model.m_OtherObj.m_Name)
        </label>
    </h3>
    @using (Html.BeginForm())
    {
        <fieldset>
            <legend>OBJ_INFO</legend>
                <table>
                    <tr>
                        <th>Obj Number <br/>
                            Obj Color <br/>
                            Mana Cost <br/>
                            (...)
                        </th>
                        <th>
                            @Html.DisplayFor(model => model.m_OtherObj.m_Name)<br/>
                            @Html.DisplayFor(model => model.m_OtherObj.m_Color)<br/>
(...)
                        </th>
                    </tr>
                </table>
                <p>
                    <span style="font-size: 1.2em">
                        Number In Stock: @Html.DisplayFor(model => model.m_NbStock)<br/>
                        Number already reserved (Ebay Auctions): @Html.DisplayFor(model => model.m_QtyAlreadyReserved)<br/>
                    </span>
                </p>
                <p>
                    Number items to dispatch: <input type="number" min="0" max="99" name="numberSent" value="int" step="0"/>
                </p>
            <input type="submit" value="Save"/>
        </fieldset>
    }
    <span style="color:red; font-size: 1.7em; font-style: italic;">@ViewData["ErrorMessage"]</span>
    @using (Html.BeginForm()) {
        <p>
            @Html.ActionLink("Back to listing", "SearchIndex")
        </p>
    } 
```

反正你懂这个意思。问题是，每次我加载应用程序时，进入这个页面，然后点击“保存”按钮，即使我的方法的签名是好的，该项目也是 NULL：

```
[HttpPost]
public ActionResult DispatchItem(ObjInfo itemToSend, int? numberSent)
{
   if (ModelState.IsValid)
   {
      if (numberSent == null)
      {
         ViewData["ErrorMessage"] = "Please put a value in the 'Number items to dispatch' field. Thank you.";
         return View(itemToSend);
      }

      if (numberSent > itemToSend.m_NbStock)
      {
         ViewData["ErrorMessage"] = m_TooManyItems;
         return View(itemToSend);
      }
   }
   return RedirectToAction("SearchIndex");
 } 
```

所以，正如我所提到的，每次我进入第一行时，对象都是空的。但是第一次加载页面时，也会加载对象并显示正确的信息。

有人可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:56:08.350

该表单实际上没有任何值可以回发到服务器。您包括其中一些：

```
@Html.DisplayFor() 
```

但那些不会创建表单元素。他们只是输出显示的值。您可能还应该为您的模型属性包括其中一些：

```
@Html.HiddenFor() 
```

（确保它们在`form`标签内。）

这将`input`在呈现的 HTML 中创建一些元素，以包含在 POST 中返回到 action 方法。否则，没有任何`input`元素，HTML`form`是空的，没有任何东西可以 POST 到服务器。

# python - 根据前两个字母计数文件

> ID：15257779
> 
> 赞同：0
> 
> 时间：2013-03-06T20:52:38.587
> 
> 标签：python

如果有人可以帮助我，我会很高兴。我对 Python 几乎一无所知，所以请原谅我的幼稚。我花了两天时间阅读这个网站，试图超越我所处的位置。

我写了这段代码（大部分都在这个网站上看到了）：

```
 import os
    path = '/the/path/to/the/I want/to/count'
    file_count = sum((len(f) for _, _,f in os.walk(path)))
    print "Number of files: ",file_count 
```

我得到了我的文件数，但这需要一段时间。有更快的代码吗？它进入了我认为的子目录，因为文件数高于我的预期。

我的最终目标是根据每个文件的前两个字母计算文件数。IE。阿拉巴马州，亚利桑那州，亚利桑那州。我可以举个例子说明我必须为此添加什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:56:34.030

是的，`os.walk()`遍历子目录。

如果您需要按前两个字母分组的计数，我会[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)为此使用一个类：

```
import os
from collections import Counter

path = '/the/path/to/the/I want/to/count'
counts = Counter(fname[:2] for _, _, files in os.walk(path) for fname in files)
for initials, count in counts.most_common():
    print '{}: {:>20}'.format(initials, count) 
```

这将遍历子目录，并收集按遇到的每个文件名的前两个字符分组的计数，然后打印按最常见到最不常见排序的那些计数。

如果*不想*遍历子目录，请[`os.listdir()`](http://docs.python.org/2/library/os.html#os.listdir)改用；它只返回给定目录中的名称（包括文件名和目录名）。然后，您可以使用[`os.path.isfile()`](http://docs.python.org/2/library/os.path.html#os.path.isfile)过滤掉那些只是文件名的名称：

```
counts = Counter(fname[:2] for fname in os.listdir(path) if os.path.isfile(os.path.join(path, fname))) 
```

如果您正在查找具有特定扩展名的文件，请查找该扩展名而不是`isfile()`测试；大概没有子目录会使用相同的扩展名：

```
counts = Counter(fname[:2] for fname in os.listdir(path) if fname.endswith('.pdf')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:00:17.873

你可以试试

```
len(glob.glob('/the/path/to/the/I want/to/count/AL*'))
len(glob.glob('/the/path/to/the/I want/to/count/AR*')) 
```

等等

# intellij-idea - 使用 ABS 和 SlidingMenu 启动时的 Android ClassNotFoundException

> ID：15257791
> 
> 赞同：4
> 
> 时间：2013-03-06T20:53:18.183
> 
> 标签：intellij-idea, actionbarsherlock, classnotfoundexception, slidingmenu

我正在使用 ActionBarSherlock 和 SlidingMenu 库以及 IDE IntelliJ IDEA 启动一个 Android 应用程序。我在包含 2 个库时遇到了很多问题，但最后，尝试了许多不同的项目结构，项目编译没有错误。

但是现在，当我启动我的应用程序时，我有一个 ClassNotFoundException ：

```
03-06 20:21:17.046: ERROR/AndroidRuntime(301): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.istic.tonightsbar/org.istic.tonightsbar.StartActivity}: java.lang.ClassNotFoundException: org.istic.tonightsbar.StartActivity in loader dalvik.system.PathClassLoader[/data/app/org.istic.tonightsbar-1.apk]
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.ClassNotFoundException: org.istic.tonightsbar.StartActivity in loader dalvik.system.PathClassLoader[/data/app/org.istic.tonightsbar-1.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
    ... 11 more 
```

我阅读了很多关于这个错误的主题，但我没有找到 IntelliJ 的任何解决方案。我能解决这个问题吗？

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="org.istic.tonightsbar"
      android:versionCode="1"
      android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>
<application android:label="@string/app_name">
    <activity android:name=".StartActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application>
</manifest> 
```

和 StartActivity.java ：

```
package org.istic.tonightsbar;

import android.os.Bundle;
import com.actionbarsherlock.app.ActionBar;
import com.slidingmenu.lib.SlidingMenu;
import com.slidingmenu.lib.app.SlidingFragmentActivity;

public class StartActivity extends SlidingFragmentActivity {
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_Sherlock);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ActionBar ab = getSupportActionBar();
    ab.setIcon(android.R.drawable.btn_plus);
//ab.setBackgroundDrawable(getResources().getDrawable(R.drawable.background_actionbar));

    // customize the SlidingMenu
    SlidingMenu menu = getSlidingMenu();
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidthRes(R.dimen.shadow_width);
//        menu.setShadowDrawable(R.drawable.shadow);
//        menu.setBehindOffsetRes(R.dimen.actionbar_home_width);
    menu.setFadeEnabled(true);
    menu.setFadeDegree(0.95f);

    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);

}
} 
```

感谢您未来的回答，

艾努尔56

# r - R如何对特定月份的日期进行排序

> ID：15257795
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:53:25.327
> 
> 标签：r, date

如何对 60 年的 10 月至次年 4 月的日期进行排序？我试过

```
seq(from=as.Date("1950-10-1"),to=as.Date("2011-12-31"),by="day") 
```

但不知道如何在 5 月到 9 月之间搭车，感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:05:25.457

```
df <- data.frame(date=seq(from=as.Date("1950-10-1"),to=as.Date("2011-12-31"),by="day"))
df <- within(df, { month  <-  as.numeric(format(date, "%m")) })
q <- with(df, df[month<5 | month>9,])
unique(q$month)
head(q$date) 
```

# c - C - 两个整数值之一的函数值未正确传递

> ID：15257796
> 
> 赞同：0
> 
> 时间：2013-03-06T20:53:26.897
> 
> 标签：c, function, variables, pointers

所以这是代码 - 我知道它有一些简单的问题，但我似乎无法弄清楚。我尝试了不同的数字类型、指针和其他 ish....变量`b`并`c`在函数中具有正确的值`separate()`- 但是当它们被传递给`main()`它们时，它们会以`b = 0`and `c = -471211`（或类似的东西）......

我错过了什么？这是代码：

```
 #include <stdio.h>
    void separate(int a, int b, int c){
      b = a/12;
      c = a%12;   }

   int main(){
     int a = 100
     int b, c;
     separate(a, b, c);
     printf("%i = 12 * %i + %i \n", a, b, c); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:59:03.607

在 C 中，所有函数参数都是按值传递的。因此，修改参数在函数之外没有任何影响。如果要修改函数的参数，必须将指针传递给它：

```
void change_arg(int *arg)
{
    *arg = 42;
}

int arg = 1337;
printf("Before: %d\n", arg);
change_arg(&arg);
printf("Afer: %d\n", arg); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T20:57:39.533

`b`并且`c`没有被初始化。由于您通过复制调用，因此未在函数中设置它们。返回您想要的值或`int*`用于您的参数。

我认为您需要阅读更多有关 C 工作原理的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:04:53.800

重写函数如下

```
void separate(int a, int* pb, int* pc){
  *b = a/12;
  *c = a%12;   } 
```

其中参数`b`和`c`是指向 int 的指针。

然后主要写类似

```
 int a = 100
 int b, c;            
 int *pb, *pc;

 pb=&b;
 pc=&c; 
```

其中变量`pb`和`pc`是指向 int 的指针。使用指令`pb=&b;`，`pc=&c;`您将分配给`pb`的内存位置`b`和`pc`的内存位置`c`。

现在如果你打电话

```
 separate(a, pb, pc);
 printf("%i = 12 * %i + %i \n", a, b, c); 
```

你得到正确的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:03:10.340

在上面的函数中，您通过值传递变量，因此 和 的值`b`在`c`调用 后不会更改`separate()`。它们未初始化，因此它们是随机值。

试试这个：

```
#include <stdio.h>

void separate(int a, int* b, int* c){
    *b = a/12;
    *c = a%12;
}

int main(){
    int a = 100;
    int b, c;
    separate(a, &b, &c);
    printf("%i = 12 * %i + %i \n", a, b, c);
} 
```

这会将地址`b`和地址传递`c`给函数的指针。然后该函数修改地址处的值。

# youtube-api - YouTube 可以直接上传到所有用户的通用帐户吗？

> ID：15257800
> 
> 赞同：4
> 
> 时间：2013-03-06T20:53:47.677
> 
> 标签：youtube-api

是否可以配置 YouTube Direct 以便将视频上传到一个中央帐户而不是单个用户的帐户？我们已经有自己的身份验证流程，不希望客户登录我们的系统，然后再登录 Google 上传视频。

我们可以拥有自己的视频捕获系统，将视频记录到我们的服务器，然后使用标准的 Google API 将它们上传到我们的帐户。当 YouTube Direct 已经完成了我们想要的 95% 时，这感觉就像一个过于复杂的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:50:23.150

YouTube Direct 的设计目的是，人们不会直接上传到版主的频道。他们应该对他们上传的视频负责。只有当版主批准后，它们才会显示在版主的频道上。因此，用户应使用自己的凭据登录和上传。没有解决方法。

# php - 裁剪图像在哪里出错？

> ID：15257801
> 
> 赞同：0
> 
> 时间：2013-03-06T20:53:49.883
> 
> 标签：php, image, crop

*再会。*

*我的裁剪图像有问题。*

**原图：**

![原来的](../Images/53adbe3fd80e4e20e828b10552a44441.png)

**使用代码后，我给出下一张图片：**

![最后的](../Images/7c7a133b89e7591a869ccb4e71259f3f.png)

**裁剪图像的代码：**

```
$pathTemp = '../Images/Temp/';
$path = '../Images/';
$pathCrop = '../Images/Crop/';

if($image=='0'){die('error_image');}
if (!copy($pathTemp.$image, $path.$image)){die('error_image');}

$ext_arr = explode('.',$image);
$ext = $ext_arr[1];

$jpeg_quality = 90;
$src = $pathCrop.$image;

$img_r = imagecreatefromjpeg($src);

$dst_r = imagecreatetruecolor($_POST['w'], $_POST['h']);

imagecopyresized($dst_r,$img_r,0,0,$_POST['x1'],$_POST['y1'],170,110,$_POST['w'],$_POST['h']);

imagejpeg($dst_r,$pathCrop.time().'.jpg',$jpeg_quality); 
```

***请告诉我哪里有错误？***

***为什么我得到坏的最终图像？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:46:24.087

您的脚本有效，我认为您的问题是原始图像的位置。

您的原始图像不应该在`$path`文件夹中吗？您正在`$pathCrop`文件夹中查找它。

```
$src = $pathCrop.$image; 
```

然后`$img_r`是空的，所以当你将它复制到`$dst_r`你有一个黑色的图像。

尝试更换

```
$src = $pathCrop.$image; 
```

经过

```
$src = $path.$image; 
```

# gcc - 配置coreutils时如何指定lib目录

> ID：15257816
> 
> 赞同：-1
> 
> 时间：2013-03-06T20:54:37.853
> 
> 标签：gcc, compilation, gnu-coreutils

我试图弄清楚如何编译 coreutils 8.20（特别是排序）并让它使用我的 64 位库而不是 32 位库。

我的 32 位库位于：/lib

我的 64 位库位于：/lib/64

我将我的 LD_LIBRARY_PATH 设置为 /lib/64 但它仍然从 /lib 加载库，并且配置脚本的命令行选项似乎都没有满足我的需求。

```
#>: ldd ./src/sort
    libgen.so.1 =>   /lib/libgen.so.1
    librt.so.1 =>    /lib/librt.so.1
    libc.so.1 =>     /lib/libc.so.1
    libaio.so.1 =>   /lib/libaio.so.1
    libmd.so.1 =>    /lib/libmd.so.1
    libm.so.2 =>     /lib/libm.so.2
    /platform/SUNW,Sun-Fire-V890/lib/libc_psr.so.1
    /platform/SUNW,Sun-Fire-V890/lib/libmd_psr.so.1
#>: echo $LD_LIBRARY_PATH
/lib/64 
```

当我在以前的 sort 安装（来自 coreutils 8.9）上运行 ldd 时，它使用的是 64 位库：

```
#>: ldd ./sort
    librt.so.1 =>    /lib/64/librt.so.1
    libc.so.1 =>     /lib/64/libc.so.1
    libaio.so.1 =>   /lib/64/libaio.so.1
    libmd.so.1 =>    /lib/64/libmd.so.1
    libm.so.2 =>     /lib/64/libm.so.2
    /platform/SUNW,Sun-Fire-V890/lib/sparcv9/libc_psr.so.1
    /platform/SUNW,Sun-Fire-V890/lib/sparcv9/libmd_psr.so.1 
```

系统信息：SunOS 5.10 Generic_147440-26 sun4u sparc SUNW,Sun-Fire-V890

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:40:54.080

显然我需要将环境/makefile 变量设置为“-m64”

```
./configure --prefix "<ouput_dir>" CXXFLAGS="-m64" CFLAGS="-m64" LDFLAGS="-m64" 
```

我将 Sagar Srivastava 归功于我之前的搜索未找到的帖子中的答案： [How to use "make" to use 64 bit libs because of ELFCLASS64 error](https://stackoverflow.com/questions/1242400/how-to-use-make-to-use-64-bit-libs-because-of-elfclass64-error?rq=1)

# c# - 如何在不使用对话框的情况下将富文本框数据保存到文本文件？

> ID：15257818
> 
> 赞同：0
> 
> 时间：2013-03-06T20:54:47.183
> 
> 标签：c#, .net

我正在编写一个程序，它将记录我的一天过得怎么样（非常类似于日记）。我已经设法让程序在这个阶段做我想做的一切，除了一件事。这是为了自动将富文本框数据保存到带有创建日期和时间的 .txt 文件中。我可以让它保存文件，但如果尚未创建文件夹“记录我的生活文件”，它会将其保存在 TomJ 文件夹中，作为记录我的生活 files.txt，我想要将它保存在文件夹中将我的生活文件记录为（日期 + 时间）.txt。

总结一下我的问题：如何编辑我的代码以自动将 reviewtxtbox 保存在文件夹记录我的生活文件中，名称为日期+时间？

我是一个新手，我只花了大约 6 个小时使用 C#，但我之前做过一些其他的编程工作，所以如果你能简单地解释你的答案，我会很高兴。:) 谢谢我需要编辑的代码如下：

```
//creat directory for folders
if (!Directory.Exists(@"C:\Users\TomJ\Record My Life files")) 
{
}
else
{
    Directory.CreateDirectory(@"C:\Users\TomJ\Record My Life files");
    MessageBox.Show("Directory Created for Diary Entries");
}

private void savebutton_Click_1(object sender, EventArgs e)
{
    try
    {
        string date = datepckr.Text;
        string time = timetxtbox.Text;
        savefile.FileName = date + time;
        savefile.DefaultExt = "*.txt*";
        savefile.Filter = "TEXT Files|*.txt";
        reviewtxtbox.SaveFile(@"C:\Users\TomJ\Record My Life files\", RichTextBoxStreamType.PlainText);
        MessageBox.Show("Your day has been saved!");
    }
    catch(Exception etc)
    {
        MessageBox.Show("An error Ocurred: " + etc.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:13:10.460

看一下 System.IO 命名空间中的 File 类：

[http://msdn.microsoft.com/en-us/library/system.io.file.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

特别是，您可能会发现 File.AppendAllText 或 File.CreateText 很有用。

两者都将完整的文件路径和文件内容作为参数，并假设您的程序对您的文件夹具有写权限，该文件将根据您使用的函数调用附加到、创建或替换。

一个例子是：

```
string folder = @"C:\Users\TomJ\Record My Life files\" 
string fileName = "testFile.txt";  

File.AppendAllText(folder + fileName, "test text to write to the file"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:10:53.940

您可以使用`File.WriteAllText(path, contents)`. 像这样的东西应该工作：

```
//creat directory for folders
if (!Directory.Exists(@"C:\Users\TomJ\Record My Life files")) 
{
}
else
{
   Directory.CreateDirectory(@"C:\Users\TomJ\Record My Life files");
   MessageBox.Show("Directory Created for Diary Entries");
}

private void savebutton_Click_1(object sender, EventArgs e)
{
  try
  {
    string content = new TextRange(reviewtxtbox.Document.ContentStart, reviewtxtbox.Document.ContentEnd).Text;
    string date = datepckr.Text;
    string time = timetxtbox.Text;
    string path = @"C:\Users\TomJ\Record My Life files\" + date + time + ".txt";
    File.WriteAllLines(path,content);
    MessageBox.Show("Your day has been saved!");
  }
  catch(Exception etc)
  {
    MessageBox.Show("An error Ocurred: " + etc.Message);
  }
} 
```

# android - Android清单合并 - 与库项目不同的启动器活动

> ID：15257819
> 
> 赞同：4
> 
> 时间：2013-03-06T20:54:48.590
> 
> 标签：android, merge, android-manifest

我有一个具有以下结构的库项目：

```
 <activity android:name="com.comp.package.activities.A1">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name="com.comp.package.activities.A2">
    </activity>
    <activity android:name="com.comp.package.activities.A3">
    </activity>
    <activity android:name="com.comp.package.activities.A4">
    </activity> 
```

在应用程序项目中，我希望合并的清单是：

```
 <activity android:name="com.comp.package.activities.A2">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name="com.comp.package.activities.A1">
    </activity>
    <activity android:name="com.comp.package.activities.A3">
    </activity>
    <activity android:name="com.comp.package.activities.A4">
    </activity> 
```

是否可以使用清单合并功能来实现这一点？

如果我尝试拥有

```
 <activity android:name="com.comp.package.activities.A2">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity> 
```

在应用程序项目的基本清单文件中，我收到以下错误。

```
 Trying to merge incompatible /manifest/application/activity[@name=com.comp.package.activities.A2] element:
  <activity
      @android:name="com.comp.package.activities.A2">
  --    <intent-filter>
  --        <action
  --            @android:name="android.intent.action.MAIN">
   <activity
      @android:name="com.comp.package.activities.A2">
  ++</activity>
  ++(end reached) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-25T07:18:51.383

将消费 app/lib 中的 AndroidManifest 更改为：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
...
<activity android:name="com.comp.package.activities.A2"> 
```

至：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">
...
<activity android:name="com.comp.package.activities.A2"
    tools:merge="override"> 
```

# java - 如何使用我的库分发 Eclipse 的 API 访问规则？

> ID：15257825
> 
> 赞同：1
> 
> 时间：2013-03-06T20:55:11.453
> 
> 标签：java, eclipse, api

Eclipse 知道您在项目中使用的库的访问规则（哪些包/类可能被调用，哪些会显示错误）。您可以通过项目设置手动定义这些规则，但是对于 JRE 等一些库，Eclipse 似乎已经知道一些访问规则。

它从哪里知道？这些访问规则是否位于 Eclipse 本身的某个地方，或者它们是库的一部分，例如 JRE/lib？

我想通过为其 API 预定义的访问规则来支持我的库的用户，但不知道我可以在哪里指定它们。有人知道吗？

# php - 无法在我的本地主机上执行 PHP

> ID：15257826
> 
> 赞同：0
> 
> 时间：2013-03-06T20:55:14.187
> 
> 标签：php, phpmyadmin

我试图在我的本地主机上执行一个 PHP 脚本，但它显示的是脚本本身而不是执行它。我在 Mac 上使用 XAMPP。任何想法如何解决此问题并查看实际执行而不是脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:58:30.423

很可能，您忘记将 .php 文件与 php 关联。将此添加到您的 apache 配置中：

```
<FilesMatch \.php$>
    SetHandler application/x-httpd-php
</FilesMatch> 
```

并重新启动apache。更多信息，请参阅[官方说明](http://www.php.net/manual/en/install.unix.apache2.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:06:47.820

我不认为问题出在**FileMatch**

如果你去

> `http://localhost`

Xamp 管理面板显示这意味着您可以使用扩展程序。

你开始脚本了吗？：

> `<?php`

您必须将脚本放在标签之间：

```
<?php echo 'HEllo world!' ?> 
```

否则它将被解释为文本，并由客户端处理，如纯 html 而不是服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:07:35.667

在 XAMPP 中，php 模块已经被激活和配置。你可以发布代码吗？如果你去 localhost/ 你会看到这样的东西[吗](http://i.stack.imgur.com/H1yO6.jpg)？你能运行左边的演示吗？

# c++ - 带有计时器的 C++ 程序不工作

> ID：15257831
> 
> 赞同：0
> 
> 时间：2013-03-06T20:55:34.747
> 
> 标签：c++, timer

我用 C++ 编写了一个执行某些任务的程序。用户选择哪些将被完成。首先，程序将执行用户选择的所有任务，但随后它将等待用户指定的时间（以秒为单位）再次执行某个任务；任务可以有不同的等待时间。

在我的计算机上它工作正常，但我把可执行文件给了某人，他告诉我它第一次完成了他选择的任务（他只是选择了要完成的任务 3），但即使在等待时间结束后，它也确实如此没有什么。我不知道问题的根源，它与我使用的相同 .exe 文件在我的计算机上工作正常，行为应该是相同的，但由于某种原因它不是。

我使用了 msvc 2012。是的，用户拥有 Visual C++ Redistributable。

```
#include "stdafx.h"
#include <Windows.h>
#include <iostream>

using namespace std;

int GetLowestWaitingTime(int* a)

int main()
{
    int WaitingTime[3];
    int TimeForTask[3];
    bool task[3];
    int i;

    cout<<"1=yes 0=no. Press enter after you have typed the chosen number" <<endl;

    for(i = 0; i < 3;i++){
        cout<<"Do you want task " <<i+1 <<" to be performed? ";
        cin >> task[i];

        if(task[i])
        {
            cout<<"Enter the waiting time for task " <<i+1 <<" in seconds: ";
            cin >> TimeForTask[i];
        }else{
            TimeForTask[i] = -1;
        }

        WaitingTime[i] = 0;
    }

    while(1)
    {
        for(i = 0; i < 3; i++){
            if(task[i] && WaitingTime[i] == 0)
            {
                //Do task i+1
                WaitingTime[i] = TimeForTask[i];
            }
        }

        SleepTime = GetLowestWaitingTime(WaitingTime);
        SendMessage(HWND_BROADCAST, WM_SYSCOMMAND, SC_MONITORPOWER, (LPARAM) 2); //turn off monitor
        Sleep(SleepTime*1000);

        for(i = 0; i < 3; i++)
        {
            if(WaitingTime[i] != -1){
                WaitingTime[i] -= SleepTime;
            }
        }
    }

    return 0;
}

int GetLowestWaitingTime(int* a)
{
    int l = -2;

    if(a[0] != -1 && ((a[0] < a[1]) || (a[1] == -1))){
        l = a[0];
    }else if(a[1] != -1){
        l = a[1];
    }

    if(l == -2){l = a[2];}else if(l > a[2] && a[2] != -1){l = a[2];}

    return l;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:17:33.073

您将每个索引的 WaitingTime 设置为 0，但您的哨兵是 -1，因此 SleepTime 始终为 0。

为您的 while 循环尝试以下操作：

```
while(1)
{
    for(i = 0; i < 3; i++){
        if(task[i] && WaitingTime[i] == 0)
        {
            //Do task i+1
            WaitingTime[i] = TimeForTask[i];
        }
        else
        {
            WaitingTime[i] = -1;
        }
    }

    SleepTime = GetLowestWaitingTime(WaitingTime);
    SendMessage(HWND_BROADCAST, WM_SYSCOMMAND, SC_MONITORPOWER, (LPARAM) 2); //turn off monitor
    Sleep(SleepTime*1000);

    for(i = 0; i < 3; i++)
    {
        if(WaitingTime[i] != -1){
            WaitingTime[i] -= SleepTime;
        }
    }
} 
```

# java - Mojarra 2.2-快照和文档类型

> ID：15257832
> 
> 赞同：2
> 
> 时间：2013-03-06T20:55:35.363
> 
> 标签：java, html, jsf, mojarra

我决定尝试 JSF 2.2（或者我们目前拥有的），所以我获取了 Mojarra 的最新快照版本并进行了设置。现在我有一个使用漂亮照片的模板。它在 JSF 2.1 上运行良好，但是当我更改为最新的 mojarra 版本时，prettyphoto 窗口没有显示。它让我发疯了几个小时（我的电脑里现在有 2 台 glassfish 服务器，一台使用最新的 mojarra，一台使用稳定版）。在意识到最新的 mojarra 构建没有忽略以`<ui:composition>`.

为了让我的例子更清楚......我有这样的事情：

> *带有**DOCTYPE HTML**和一些 UI:INSERTS 的JSF**主模板***

 **```
<?xml version='1.0' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 
```

* * *

使用 DOCTYPE 组合实现主模板的 JSF 常规页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<?xml version='1.0' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:jsf="http://java.sun.com/jsf"
                template="./WEB-INF/template/MASTERTEMPLATE.xhtml>

                  .....<ui:define /> etc etc....

</ui:composition> 
```

当这个后来的模板客户端被渲染到浏览器时，它会与 doctype composition 一起发送。我认为它应该忽略 ui:composition 之外的所有内容。在稳定的 Mojarra 构建中，Composition DOCTYPE 被忽略并且它输出为html...

我最初怀疑这是一个错误，但也许是故意的？尽管他们应该告诉你这一点，但我已经为此迷失了一整天。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-03T22:34:13.720

我有这个代码

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html" 
        xmlns:f="http://java.sun.com/jsf/core"                
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        template="/template/template.xhtml"> 
```

如果您的模板文件夹在 web-inf 中，请添加此文件夹

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://java.sun.com/jsf/html" 
            xmlns:f="http://java.sun.com/jsf/core"                
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:p="http://primefaces.org/ui"
            template="/WEB-INF/template/template.xhtml"> 
```**

# eclipse - 在 Eclipse 中使用 jsp 模板

> ID：15257835
> 
> 赞同：1
> 
> 时间：2013-03-06T20:55:40.017
> 
> 标签：eclipse, jsp, templates

我有一个使用 Rational Application Developer 构建的 Web 项目。我的大部分页面都是使用模板文件 (jtpl) 构建的。

我将 IDE 切换到 Eclipse Juno，我注意到在 Eclipse 中创建的模板不同。您必须转到首选项并在那里创建一个模板。

我认为语法也不同。我现在在我的 jtpl 文件中的内容是这样的：

```
<%-- tpl:insert attribute="imports" --%>

<%-- /tpl:insert --%> 
```

不确定这是否适用于 Eclipse。

Rational 非常擅长管理模板。第二个我在 jsp 顶部添加 import 语句，rational 为我插入模板中的所有代码（变暗，因此我无法在 jsp 中更改它），我所要做的就是填充我需要的部分。

同样对于 Rational，如果我对模板进行一项更改并保存它，所有使用它的 jsps 都会随着更改而更新。

我的问题是：

1）有没有办法在切换到eclipse时使用当前模板而没有太大的变化？

2）这也很重要，有没有办法在对模板进行更改时使用模板自动更新所有页面？

3) 任何使用 Eclipse 更新模板的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T15:26:03.993

我处于类似情况，在寻找解决方案几天后，我得出结论（基于没有找到任何解决方案），这是“仅限 IBM”的功能。

# c# - 从条件列表中取出 N 项

> ID：15257838
> 
> 赞同：2
> 
> 时间：2013-03-06T20:55:46.950
> 
> 标签：c#, list

我有以下内容：

```
IDictionary<QuestionDuration, Int32> rules = _service.GetRules(); 

List<Question> questions = _service.GetQuestions();

public class Question {
  public QuestionDuration Duration { get; set; }
} 
```

字典值（Int32）是我需要从具有特定持续时间的列表中提取的问题数......所以如果我有字典：

{ { QuestionDuration.M2​​, 5 }, { QuestionDuration.M4, 3 }, { QuestionDuration.M8, 0 }, ...

所以我需要从原始列表中创建一个列表，其中包含 5 个 2 分钟的问题、4 个 3 分钟的问题、0 个 8 分钟的问题等......

我试图为此分组并使用 lambda 表达式，但我无法...

我怎样才能做到这一点？

谢谢你，

米格尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:58:23.830

这将创建`IEnumerable<List<Question>>`（您的规则字典的三个列表）：

```
IDictionary<QuestionDuration, Int32> rules = _service.GetRules();
List<Question> questions = _service.GetQuestions();

var query = from r in rules
            select questions.Where(q => q.Duration == r.Key)
                            .Take(r.Value).ToList(); 
```

**提示：**如果您需要在每个列表中选择随机问题，请在运算符`OrderBy(q => Guid.NewGuid())`之前添加`Take`。或更随机的解决方案：

```
var rand = new Random();
var query = from r in rules
            select questions.Where(q => q.Duration == r.Key)
                            .OrderBy(q => rand.Next())
                            .Take(r.Value).ToList(); 
```

# python - python-sql脚本数据输入

> ID：15257841
> 
> 赞同：0
> 
> 时间：2013-03-06T20:56:00.563
> 
> 标签：python, sql, database, function

我试图运行 python-sql 脚本

我有一个这样的数据库

```
-----------------------------
col1 col2 col3 col4 col5 col6 usern 
```

并且将数据插入其中的python脚本读取

```
l = "111 222 333 444 555 666"
l = l.rstrip()
l = l.split()
cur.execute("INSERT INTO Values VALUES( %s, %s, %s, %s, %s, %s,"uname")",l[0],l[1],l[2],l[3],l[4],l[5] ) 
```

现在这根本不起作用，我不知道如何拆分字符串并根据需要将输入输入到 sql 表中

输出应该是这样的

```
-----------------------------------
col1 col2 col3 col4 col5 col6 usern

111  222  333  444  555  666  uname 
```

有什么建议么 ？我想稍后在循环中运行该 cur.execute 命令以输入多个条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:14:56.670

我认为您传递给 cur.execute() 的值应该是一个元组或列表，而您只是传递这些值。试试这个：

```
 l = "111 222 333 444 555 666" 
 #this splits and creates a list
 vals = l.split()
 sql = """INSERT INTO Values VALUES( %s, %s, %s, %s, %s, %s,\"uname\")"""
 cur.execute(sql, vals) 
```

# algorithm - 位于给定树的多个顶点之间的边

> ID：15257842
> 
> 赞同：0
> 
> 时间：2013-03-06T20:56:02.860
> 
> 标签：algorithm

我有一棵树，有 N 个顶点 v1, v2, v3.... vN 。树挂在顶点 v1 上。现在我在树中选择了一些随机路径。如何知道树中是否有一条边位于所有这些选定的路径上？

编辑-所有路径都是双向的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T06:24:14.800

正如 G. Bach 所建议的，您遍历每条路径，并在此过程中为每条边记录它包含在路径中的次数。最后，您可以迭代边缘集，并且与路径数具有相同计数的边缘（或边缘）将是位于所有选定路径上的边缘。

由于一棵树中确实有`n-1`边，所以这个算法是`O(n)`，我猜它已经是最有效的了。

# java - 将 SQL Server Varbinary 数据类型解码为 Java 字符串

> ID：15257844
> 
> 赞同：1
> 
> 时间：2013-03-06T20:56:11.770
> 
> 标签：java, sql-server, hibernate, varbinary

试图绕过 Java 中的 Jboss Hibernate 问题，您无法处理来自存储过程的 Nvarchar SQL Server 数据类型。由于我们存储多字节字符，我无法将数据类型转换或转换为 varchar，因此，数据类型是必须的。但是，我能够在存储过程中将类型转换为 varbinary 并在 Java 中解码

SQL Server 过程：

```
Convert(varbinary, Tile)  AS Title 
```

在 Java 端，我读取了结果集和字段，现在编码为

> **更新为实际编码：**

```
0x440065007300690067006E0020002600200050006C0061006E006E006900 
```

我尝试将此字节数组解析为字符串，如下所示：

```
 byte[] bytes = (byte[]) dataField[0]; 

            try {

                String varbinaryString = new String(bytes, "UTF-8");
                System.out.println(varbinaryString);

            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

结果几乎是来自 Title 字段的预期解码字符串，只是，它以这种方式解码：

```
D e s i g n  &  P l a n n i 
```

而不是直接输出

```
Design & Planning Director 
```

任何人都可以帮助我解决 Java 解码 SQL Server varbinary 数据类型的困境吗？

提前感谢您的帮助或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:52:34.900

使用 Spring 和 JPA，我无法执行其他建议来扩展 Hibernate Sql Dialect 类，但是，如果您使用的是 hibernate cfg，这是一个很好的解决方案。我在正确的轨道上，但你必须记住不要将 varbinary 限制为 navarchar 的继承长度，即。nvarchar(30)。

```
Convert(varbinary(max), Tile)  AS Title 
```

这将返回整个编码字符串。最后，我试图解码 UTF-8，虽然它主要是反复试验，但 varbinary 编码为 UTF-16。

```
s = new String(bytes, "UTF-16LE"); 
```

# c# - Visual Studio 图表线低于零

> ID：15257845
> 
> 赞同：1
> 
> 时间：2013-03-06T20:56:12.143
> 
> 标签：c#, winforms, charts

这是我有的图表![在此处输入图像描述](../Images/97d420676a28ad6b0e597b51faad6479.png)

我用这段代码打印它：

```
 try
        {
            sqlConnection.Open();

            MySqlDataReader sqlReader = sqlCommand.ExecuteReader();

            if (sqlReader.HasRows)
            {
                while (sqlReader.Read())
                {
                    string Sum = sqlReader["Sum"].ToString();
                    if (Sum.Contains(",")) Sum = Sum.Replace(",", ".");

                    chart1.Series["Series1"].Points.AddY(Sum);
                    chart1.ChartAreas["ChartArea1"].AxisX.CustomLabels.Add(i + 0.5, i + 1.5, sqlReader["Year"].ToString() + '\'' + sqlReader["Month"].ToString() + '\'' + sqlReader["Day"].ToString());

                    chart1.Series["Series1"].IsValueShownAsLabel = true;
                    i++;
                }
            }
        } 
```

我很感兴趣，如果点低于零，是否可以改变线条颜色？例如，如果高于 0 的线是绿色的，如果低于 - 红色？

更新：不是整条线！仅上/下部分！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:19:07.813

[我在这里](https://stackoverflow.com/questions/12162013/mschart-line-graph-with-dashed-style-and-large-amount-of-data-points/12177555#12177555)回答了我自己关于接管 MSChart 绘图的问题（以使线条样式真正起作用）。如果 y 小于 0，则修改代码以更改颜色将相当简单:)

# jquery - Jquery循环遍历表以查找特定的TD

> ID：15257852
> 
> 赞同：1
> 
> 时间：2013-03-06T20:56:35.493
> 
> 标签：jquery, html

我希望遍历表格并为每个负值的 TD 着色。现在它为整行着色，我可以更改什么来修复它？

[http://jsfiddle.net/LEnRj/](http://jsfiddle.net/LEnRj/)

## jQuery

```
$('.my-table tr').each(function(index, tr) {
    var lines = $('td', tr).map(function(index, td) {
        return $(td).text();    
    });

    if( lines[1] < 0 ) {
         $(this).css('background-color', 'red');
    }   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:58:24.640

伙计，它是 jQuery，*少写多做*：

```
$('.my-table td').filter(function() {
    return parseFloat($.trim(this.innerHTML)) < 0;
}).css('background-color', 'red'); 
```

[**固定小提琴**](http://jsfiddle.net/LEnRj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:00:48.150

```
$('.my-table tr').each(function(index, tr) {
    var lines = $('td', tr).map(function(index, td) {
        if ( $(td).text() < 0 ) $(td).css('background-color', 'red')  #de  Fixed.
        return $(td).text();
    });
}) 
```

优化版：

```
$('.my-table tr td').each(function(index, td) {
    if ( $(td).text() < 0 ) {
        $(td).css('background-color', 'red')
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T20:59:10.387

您正在将 css 应用于`<tr>`. 您只想将其应用于`<td>`具有负值的值。

# java - Antlr 构造函数 LogicLexer(ANTLRStringStream) 在 eclispe 中未定义

> ID：15257856
> 
> 赞同：1
> 
> 时间：2013-03-06T20:56:43.470
> 
> 标签：java, antlr

我正在尝试使用 Antlr 4.0 版解析逻辑表达式并生成树来评估表达式。

我运行了 antlr 工具并生成了解析器和词法分析器，但是当我将生成的文件放入项目中时，出现以下错误：“构造函数 LogicLexer(ANTLRStringStream) 未定义”和“构造函数 CommonTokenStream(LogicLexer) 未定义”。

代码如下：

```
LogicLexer lexer = new LogicLexer(new ANTLRStringStream(expression));
LogicParser parser = new LogicParser(new CommonTokenStream(lexer));
CommonTree tree = (CommonTree)parser.parse().getTree(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:05:44.317

看起来您正在使用 v3 语法和 v4 工具来生成词法分析器和解析器类。ANTLR 4 不像 v3 那样支持树重写运算符。

API 也发生了变化（`ANTLRStringStream`不再存在），因此应该如下所示：

```
LogicLexer lexer = new LogicLexer(new ANTLRInputStream(expression));
LogicParser parser = new LogicParser(new CommonTokenStream(lexer));
ParseTree tree = parser.parse(); 
```

有关如何遍历生成的解析树的完整演示，请参阅：[ANTLR 4 tree injection/rewrite operator](https://stackoverflow.com/questions/14565794/antlr-4-tree-inject-rewrite-operator)

# android - 合并两个数组列表

> ID：15257864
> 
> 赞同：-4
> 
> 时间：2013-03-06T20:57:07.450
> 
> 标签：android, arraylist, android-listview

请帮忙

我有两个字符串数组列表，一个带有名字，一个带有姓氏。

FirstNameList 具有以下值：

*   鲍勃
*   格雷格
*   艾米

并且 LastNameList 具有以下值：

*   史密斯
*   琼斯
*   棕色的

* * *

我知道如何制作第三个数组列表，它在列表视图中一个接一个地“附加”一个数组列表，所以我得到：

*   鲍勃
*   格雷格
*   艾米
*   史密斯
*   琼斯
*   棕色的

我想做的是制作第三个数组列表，将它们“集成”到列表视图中的单行中，所以我得到：

*   鲍勃·史密斯
*   格雷格·琼斯
*   艾米布朗

我该怎么做呢？你能给我一个代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:01:28.300

假设列表大小相同...

```
for(int i=0;i<firstNames.size();i++)
    fullNames.add(firstNames.get(i) + " " + lastNames.get(i)); 
```

我不会过多地讨论其他改进，但你真的应该考虑一个`People`对象，或者避免这种情况的*东西。*它完全依赖于大小相同且顺序正确的列表。

# c# - 将服务安装为 x64

> ID：15257865
> 
> 赞同：5
> 
> 时间：2013-03-06T20:57:10.077
> 
> 标签：c#, visual-studio-2010, exception, windows-installer

我使用 Visual Studio 2010 在 64 位系统上开发了一项服务。该服务只是一个框架，可以访问辅助库中的 Start 和 Stop 方法。该库访问 64 位 COM 对象，并且必须构建为 x64。COM 对象是一个 dll，它作为 x64 单独构建并在 64 位环境中测试。我有一个安装程序，它设置项目并通过自定义操作安装服务。

我使用绕过服务的测试应用程序调试代码，因此我可以确认服务正在访问的库工作正常。

我遇到的问题是安装时出现 BadImageFormatException 。我正在使用目标平台为 x64 的安装程序。如果我将所有内容构建为 x64，我会收到以下消息：

```
Error 1001\. Exception occured while initializing the installation: System.BadImageFormatException. Could not load file or assembly... or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

如果我将服务设置为任何 CPU，则安装工作正常，服务可以访问库，但找不到 COM 对象。如果我删除安装服务的自定义操作，安装也将起作用。如果我尝试使用 installutil 手动安装服务，我会收到与上面相同的错误消息。

下面是我在服务中使用的库的列表。

```
using System;
using System.Diagnostics;
using System.ServiceProcess;
using System.Text;
using System.Threading;
using MAPIMail;
using MAPIMail.Logging; 
```

请注意，MAPIMail 项目正在构建为 x64。

有没有人知道为什么当它在 x64 系统上安装为 Any CPU 时，我不能将服务专门安装为 x64。我很感激任何和所有的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:22:13.807

我尝试了 Alex 和 Jacob Seleznev 的解决方案，它们都有效。我发现来自 Jacob 的[链接](https://stackoverflow.com/questions/5475820/system-badimageformatexception-when-installing-program-from-vs2010-installer-pro)的 Greg Sansom 的第二个答案提供了最佳解决方案。为了帮助其他人，我在下面复制了他的答案：

> 如果您的安装程序正在安装 64 位 dll，则可能会发生这种情况。以下是从 MSDN 复制的：
> 
> 如果将 64 位托管自定义操作添加到安装项目，Visual Studio 生成过程会将 32 位版本的 InstallUtilLib.dll 作为 InstallUtil 嵌入到 MSI 中。反过来，加载 32 位 .NET Framework 以运行 64 位托管自定义操作并导致 BadImageFormatException 异常。
> 
> 对于解决方法，请将 32 位 InstallUtilLib.dll 替换为 64 位版本。
> 
> ```
> 1\. Open the resulting .msi in Orca from the Windows Installer SDK.
> 2\. Select the Binary table.
> 3\. Double click the cell [Binary Data] for the record InstallUtil.
> 4\. Make sure "Read binary from filename" is selected and click the Browse button.
> 5\. Browse to %WINDIR%\Microsoft.NET\Framework64\v2.0.50727.
> 6\. The Framework64 directory is only installed on 64-bit platforms and corresponds to the 64-bit processor type.
> 7\. Select InstallUtilLib.dll.
> 8\. Click the Open button.
> 9\. Click the OK button. 
> ```
> 
> share|edit|flag 于 2011 年 7 月 23 日 3:09 回答 Greg Sansom 6,5781335

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T21:23:45.330

我的猜测是您正在使用只能安装为 32 位的 32 位 InstallUtil，您需要使用 64 位 Installutil，如此[处所述](http://msdn.microsoft.com/en-us/library/50614e95.aspx)

# css - 菜单下拉菜单显示在错误的位置

> ID：15257869
> 
> 赞同：1
> 
> 时间：2013-03-06T20:57:24.873
> 
> 标签：css, wordpress, menu, navigation

我已经吹了5个小时了。

还有第二个菜单。当您将鼠标悬停在某个项目上时，下拉菜单位于错误的位置。

请帮忙。

这是CSS。

```
/* MY RIGGING MENU*/
#menu-rigging-menu {
border-bottom: 5px solid #EDEDED;
display:inline-block !important;  
text-align:left;
width: 100%;
list-style: none;
}
#menu-rigging-menu ul {
margin:0;
text-indent:0;
}

#menu-rigging-menu a li, #menu-rigging-menu a  {
display: inline-block;
text-decoration: none;
float: left;
background: #ededed;
margin: 0px 10px; 
}
#menu-rigging-menu li a {
color: #000000;
line-height: 38px;
padding: 0 10px;
}

#menu-rigging-menu li a:hover {
  color: red;
}
#menu-rigging-menu li {
margin: 0 2.85714rem 0 0;
position: relative;
list-style: none outside none;
}
#menu-rigging-menu li ul {
display: none;
position: absolute;
top: 43px;
z-index: 1;
margin:0;
padding:0;
 }
 #menu-rigging-menu li ul ul {
left: 100%;
  top: 0;
 }

#menu-rigging-menu li:hover > ul {
border-left: 0 none;
display: inline-block;
 }

 #menu-rigging-menu ul li a {
background: none repeat scroll 0 0 #EFEFEF;
border-bottom: 1px solid #EDEDED;
display: block;
font-size: 0.785714rem;
line-height: 2.18182;
padding: 0.571429rem 0.714286rem;
white-space: normal;
width: 12.8571rem;
/*  position:relative;  */
}

#menu-rigging-menu li ul li a:hover {
background: none repeat scroll 0 0 #E3E3E3;
  color: #444444;
}
#menu-rigging-menu .current-menu-item > a, #menu-rigging-menu .current-
menu-ancestor      >     a, #menu-rigging-menu .current_page_item > a, #menu-
rigging-menu .current_page_ancestor > a {
color: #636363;
font-weight: bold;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:27:46.863

1-似乎您的菜单项没有被 CSS 解析器解释为并排水平对齐。通常列表项显示在彼此下方。不管是什么原因，让它们向左浮动以修复子菜单相对于父菜单项的定位。

```
#menu-rigging-menu > li {
    float: left;
} 
```

2-您应该指定`left`子菜单的位置属性，以便它们与父菜单项正确左对齐。

```
#menu-rigging-menu > li ul {
    left: 0;
} 
```

这应该让你走上正确的轨道。

**更新：）**

要在子菜单上保持悬停效果，请尝试将具有以下选择器**#menu-rigging-menu li:hover > ul**的 CSS 代码块更改为：

```
#menu-rigging-menu li:hover > ul,
#menu-rigging-menu li > ul:hover {
    border-left: 0 none;
    display: inline-block;
} 
```

# android - 安卓数一下有多少cpu在线？

> ID：15257870
> 
> 赞同：1
> 
> 时间：2013-03-06T20:57:35.543
> 
> 标签：android, kernel, cpu, core

我将如何确定有多少 CPU 在线？我有一个处理程序每​​ 1000 毫秒运行一次，读取当前频率，我还想确定有多少核心在线。

我一直在查看目录“/sys/devices/system/cpu/”。我监控了“/sys/devices/system/cpu/cpu1/online”，它始终为 1，我监控了 /cpu0/online，它也始终为 1。

此信息是内核/设备特定的吗？如何以适用于所有设备的方式找到在线的核心数量？

编辑： Runtime.availableProcessors() 似乎工作得很好，我仍然想知道是否有一个系统文件告诉你核心是否打开/关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:05:05.790

我在我尝试过的设备上使用[availableProcessors()取得了成功。](http://developer.android.com/reference/java/lang/Runtime.html#availableProcessors%28%29)[官方 Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#availableProcessors%28%29)中提供了对该函数的更详细描述。[此论坛帖子](http://makingmoneywithandroid.com/forum/showthread.php?tid=298&pid=1663#pid1663)中描述了另一种可能的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T21:18:53.063

```
 /**
 * 
 * @return integer Array with 4 elements: user, system, idle and other cpu
 * usage in percentage. You can handle from here what you want. 
 * For example if you only want active CPUs add simple if statement >0 for usage
 */

private int[] getCpuUsageStatistic() {

String tempString = executeTop();

tempString = tempString.replaceAll(",", "");
tempString = tempString.replaceAll("User", "");
tempString = tempString.replaceAll("System", "");
tempString = tempString.replaceAll("IOW", "");
tempString = tempString.replaceAll("IRQ", "");
tempString = tempString.replaceAll("%", "");
for (int i = 0; i < 10; i++) {
    tempString = tempString.replaceAll("  ", " ");
}
tempString = tempString.trim();
String[] myString = tempString.split(" ");
int[] cpuUsageAsInt = new int[myString.length];
for (int i = 0; i < myString.length; i++) {
    myString[i] = myString[i].trim();
    cpuUsageAsInt[i] = Integer.parseInt(myString[i]);
}
return cpuUsageAsInt;
}

private String executeTop() {
java.lang.Process p = null;
BufferedReader in = null;
String returnString = null;
try {
    p = Runtime.getRuntime().exec("top -n 1");
    in = new BufferedReader(new InputStreamReader(p.getInputStream()));
    while (returnString == null || returnString.contentEquals("")) {
        returnString = in.readLine();
    }
} catch (IOException e) {
    Log.e("executeTop", "error in getting first line of top");
    e.printStackTrace();
} finally {
    try {
        in.close();
        p.destroy();
    } catch (IOException e) {
        Log.e("executeTop",
                "error in closing and destroying top process");
        e.printStackTrace();
    }
}
return returnString;
} 
```

# c# - 委托组合不当行为

> ID：15257873
> 
> 赞同：2
> 
> 时间：2013-03-06T20:57:39.130
> 
> 标签：c#, delegates

给出以下代码：

```
List<string> aux = new List<string>();

aux.Add("a");
aux.Add("ab");
aux.Add("ac");
aux.Add("abc");
aux.Add("b");
aux.Add("bc");
aux.Add("c");
aux.Add("e");
aux.Add("f");

Func<string, bool> searchForA = (f => f.Contains("a"));
Func<string, bool> searchForC = (f => f.Contains("c"));
Func<string, bool> searchForF = (f => f.Contains("f")); 
```

有人可以向我解释为什么这个电话

```
aux.Where(searchForA + searchForF + searchForC).ToList(); 
```

返回 "ac"、"abc"、"bc" 和 "c"，结果与

```
aux.Where(searchForC).ToList(); 
```

我的意思是，第一个查询中的“a”、“ab”和“F”在哪里？

编辑：我使用了委托组合，因为我想动态定义搜索模式！

EDIT2：对新的示例代码进行主要编辑检查，这是我试图解决的问题

```
string[] searchFor = "a c f".Split(' ');

Func<string, bool>[] delegates = new Func<string, bool>[searchFor.Length];
for (int i = 0; i < searchFor.Length; i++)
{
    string search = searchFor[i]; // Make sure the lambda does not capture a loop variable!
    delegates[i] = new Func<string, bool>(f => f.Contains(search));
}

List<string> aux = new List<string>(); 
aux.Add("a");
aux.Add("ab");
aux.Add("ac");
aux.Add("abc");
aux.Add("b");
aux.Add("bc");
aux.Add("c");
aux.Add("e");
aux.Add("f");

List<string> result = aux.Where((Func<string, bool>)Delegate.Combine(delegates)).ToList(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T21:07:07.463

调用两个非 void 返回委托的组合具有“调用第一个，丢弃结果，调用第二个，返回结果”的语义。它没有语义“`or`如果它们碰巧返回则调用它们和结果`bool`”。请记住，委托组合必须适用于任何委托类型；为什么运行时应该`or`为返回布尔的委托选择语义而不是`and`语义？对于返回`string`、连接字符串的委托，它应该做什么？如果你结合`int`返回的代表，它应该添加数字吗？

组合结果的问题无法以一致的方式解决，因此选择是忽略除最后一个之外的所有结果。

如果您想将`or`两个谓词放在一起，那么您可以自己轻松地做到这一点。这是一个方便的扩展方法：

```
static Func<T, bool> Or<T>(this Func<T, bool> f1, Func<T, bool> f2)
{ return t => f1(t) || f2(t); } 
```

现在你可以说

```
...Where(searchForA.Or(searchForC).Or(searchForF))... 
```

您还可以将其扩展到多个代表：

```
static Func<T, bool> OrMany<T>(params Func<T, bool>[] fs)
{ 
    Func<T, bool> result = t => false;
    foreach(Func<T, bool> f in fs)
        result = result.Or(f);
    return result;
} 
```

现在您可以使用“扩展表单”和代表列表：

```
...Where(OrMany(searchForA, searchForC, searchForf))... 
```

或带有代表数组的“未扩展形式”：

```
Func<string, bool>[] delegates = whatever;
...Where(OrMany(delegates))... 
```

# asp.net-mvc - IIS 7.5 提示输入用户名和密码

> ID：15257880
> 
> 赞同：8
> 
> 时间：2013-03-06T20:58:08.710
> 
> 标签：asp.net-mvc, iis, iis-7.5

我们的应用程序配置为使用表单身份验证，并且在大多数机器上运行良好。但是，我在我们的一个开发人员工作站上的开发环境存在问题。当我转到应用程序的 URL 之一时，如下所示：

[http://iweb.local/reports/](http://iweb.local/reports/)

IIS 提示我输入密码，如下所示：

![IIS 提示输入用户名和密码](../Images/fdd69a207eb5309de5c3eeaae8caa1cc.png)

*（该名称`iweb.local`在 hosts 文件中设置为指向 127.0.0.1。本质上它是 localhost 的别名。我们将 IIS 站点配置为使用主机标头，因此我们将来可能支持多个应用程序。）*

如果我访问应用程序中的大多数其他 URL，例如[http://iweb.local/](http://iweb.local/) ，系统不会提示我输入密码。并且在任何其他开发人员机器上使用完全相同的代码库时，都不会提示我输入密码。只有这台机器有问题。这使我有理由相信这不是编码问题。

我尝试过的事情：

*   使用不同的 Web 浏览器进行测试。在出现问题的机器上，无论我使用什么浏览器都会出现问题。我在 FireFox 和 IE9 中得到相同的提示。
*   在其他开发人员机器上进行测试。这些问题不会发生。它只发生在单个开发人员框中。
*   将代码和资产从 复制`~/Areas/Reports`到`~/Areas/ReportsTest`中，并进行适当的重构，然后加载`http://iweb.local/reportstest/`. 这样可行; 浏览器不再提示输入用户名和密码。但是，更改 URL 不是我们的应用程序的选项。
*   检查 IIS 身份验证配置。启用匿名身份验证和表单身份验证。其他一切都被禁用。这在所有开发人员机器上都是相同的，包括可以工作的机器和不能工作的机器。
*   检查事件日志。IIS 没有将任何内容记录到事件日志中。
*   检查 IIS 日志。日志包含成功请求的条目（例如当我打开时`http://iweb.local`），但它不会记录任何提示用户输入密码的请求的任何内容。
*   使用 FireBug 检查请求和响应标头。对于对任一 URL 的请求，请求标头似乎相同。的响应标头`http://iweb.local/reports`有`WWW-Authenticate`:`Negotiate`和`NTLM`. 由此，我已经确认 IIS 正在引导浏览器提示输入密码。但我并没有更接近理解为什么。
*   关闭 IIS，将万维网发布服务设置为手动启动类型，使其不会自动启动，然后重新启动计算机。然后我检查是否有任何请求`http://iweb.local`或`http://iweb.local/reports/`正在响应请求。两者都不是，确认是 IIS 正在处理请求。
*   停止 IIS，从开发人员的硬盘中删除整个项目，然后从源代码管理中检索它。我的想法是，这可能是其中一个文件夹的权限问题（尽管我不明白这是怎么回事，因为这是一个 MVC 应用程序）并且通过此过程将确保所有文件夹都具有正确的权限。但这并没有改变什么。
*   完全卸载IIS，重启电脑，重新安装IIS。这也不起作用。

我没主意了。我在这个开发人员框中找不到与其他开发人员框配置不同的任何内容。

所以：**有没有人知道一种方法可以启用更深层次的日志记录或跟踪以找出 IIS 要求输入密码的原因？谁能想到任何可能导致我尚未寻找的原因？**

这是一个在 64 位环境中的 IIS 7.5 上运行的 ASP.NET MVC 3 应用程序。URL的`reports`一部分被配置为 MVC 区域。

**更新**

在我的 Web.config 文件中，这是在违规机器上设置身份验证模式的方式。

```
<authentication mode="Forms">
    <forms loginUrl="~/account/login" timeout="2880" />
</authentication> 
```

报告区域的 Web.config 文件中没有`<authentication>`元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-09T05:32:20.350

如果应用程序中有一个名为“Reports”的文件夹，并且服务器上安装了 SQL Server Reporting Services，则同样名为“Reports”的 Reporting Services 虚拟目录文件夹将与应用程序“Reports”文件夹发生冲突。要修复此问题，请打开 Reporting Services 配置管理器（开始->所有程序->MS SQL Server->配置工具-> Reporting Services 配置管理器）并将虚拟目录从“报告”更改为任何其他名称（“TestReports”）左侧菜单中的“报表管理器 URL”。

这将解决 IIS 身份验证问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:26:18.743

使用 fiddler 或 IE9 中的开发工具来观察请求。然后，这将显示标题中导致弹出的内容。它可能是基本身份验证，也可能是浏览器无法满足请求的 NT 身份验证。由于它已本地化到一台机器，请检查 IIS 是否配置为仅匿名并检查所请求文件的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-17T06:29:59.387

在位置栏中，键入 about:config，然后按 Enter。

about:config "这可能会使您的保修失效！" 可能会出现警告页面。单击我会小心的，我保证！，继续到 about:config 页面。

在 about:config 页面中，搜索首选项 network.automatic-ntlm-auth.trusted-uris，然后双击它。在出现的提示中，键入您要允许的服务器列表，以逗号和空格分隔。例如，如果您想允许[http://myinternalserver](http://myinternalserver)和[http://anotherinternalserver](http://anotherinternalserver)，您可以输入 myinternalserver, anotherinternalserver。按确定。

# php - 从阿拉伯字符串 Php 中获取最后一个字母

> ID：15257884
> 
> 赞同：2
> 
> 时间：2013-03-06T20:58:19.347
> 
> 标签：php, string, utf-8, arabic

我已经使用阿拉伯字符有一段时间了。看这个：

```
$string = "السلام"; 
```

打印时完美运行。

但。我想得到最后一个字母“م”。我试过了

```
$string[strlen($string]-1)]; 
```

也尝试过子字符串。

得到这个输出：</p>

已解决：忘记添加：mb_internal_encoding("UTF-8"); 非常感谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:59:28.820

您正在尝试对多字节字符串（utf-8？-16？）使用字节类型操作，您需要使用 mb_*() 函数来处理多字节字符串： http: [//php.net /mb_substr](http://php.net/mb_substr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T21:03:26.573

尝试这个：

```
<?php
mb_internal_encoding("UTF-8");
$string = "السلام";
echo mb_substr($string, -1);
?> 
```

您的代码也不正确（存在语法错误）：

```
$string[strlen($string]-1)];
                      ^--should be )

$string[strlen($string)-1)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T20:59:36.867

您应该使用[`mb_strlen`](http://www.php.net/manual/en/function.mb-strlen.php)多字节字符串。这些字符占用超过一个字节，因此当您使用本机非 mb 函数获取它们时，您只占用字符的一部分，这通常是一些乱码。[`mb_*`](http://php.net/manual/en/book.mbstring.php)函数会解决这个问题。

# matlab - 将逗号分隔的 .csv 数据从 Web 源存储到 matlab 中的矩阵中

> ID：15257887
> 
> 赞同：2
> 
> 时间：2013-03-06T20:58:24.250
> 
> 标签：matlab, csv, web, store, live

我正在尝试下载此逗号分隔的信息并将其保存，以便可以将其存储为矩阵，然后可以对其进行访问。到目前为止，我有代码，我认为应该将信息存储在一个名为 test.csv 的文件中，但我不确定：

```
>> urlwrite('http://xweb.geos.ed.ac.uk/~weather/jcmb_ws/JCMB_2013_Mar.csv','test.csv');

d = csvread('test.csv');

??? Error using ==> dlmread at 145
Mismatch between file and format string.
Trouble reading number from file (row 1, field 1) ==> date-
Error in ==> csvread at 50
    m=dlmread(filename, ',', r, c); 
```

我收到上述错误。它使用 urlread 读取数据。有谁知道正确的语法应该是什么以及如何将其存储为矩阵？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:52:32.990

您可以直接从 Web 获取数据，而无需使用 URLREAD 保存到文件：

```
webdata = urlread('http://xweb.geos.ed.ac.uk/~weather/jcmb_ws/JCMB_2013_Mar.csv'); 
```

这会将整个文件作为一个字符串提供给您，其中行由 '\n' 分隔。您可以通过多种方式处理它。例如：

```
tmp = textscan(webdata,['%s',repmat('%f',1,8)],'delimiter',',','headerlines',1);
date = tmp{1};
data = horzcat(tmp{2:end}); 
```

要获取列标题，您可以执行以下操作，例如：

```
colheader = textscan(webdata,'%s',1,'delimiter','\n'); 
colheader = regexp(colheader{:},',','split');
colheader = colheader{:}; 
```

您还可以将数据转换为结构：

```
Data = cell2struct(tmp, genvarname(colheader),2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:16:21.057

你的问题就在这里：

```
Trouble reading number from file (row 1, field 1) ==> date- 
```

Matlab 说它在第一个单元格中遇到了“日期-”。我猜你有一两行标题。您可以签入文件并调用

```
d = csvread('test.csv',ROW); 
```

其中`ROW`是实际数据开始的行数（标题行数 + 1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:05:25.887

尝试使用[readtext.m](http://www.mathworks.com/matlabcentral/fileexchange/10946)。那是一个几乎可以读取任何文本文件的程序。您的数据中的问题可能是：它们没有统一的分隔符，即某处两列由 分隔`tab`，某处由分隔`comma`。

该操作可以这样进行：

```
urlwrite('http://xweb.geos.ed.ac.uk/~weather/jcmb_ws/JCMB_2013_Mar.csv','test.csv');
data= readtext('test.csv'); 
```

它应该工作。

# mysql - 我应该在表中创建一个新字段还是只选择第二个表的 MAX

> ID：15257889
> 
> 赞同：0
> 
> 时间：2013-03-06T20:58:26.770
> 
> 标签：mysql, join

[在这个问题上](https://stackoverflow.com/q/15249486/1624960)，我收到了一个很好的答案。我现在想知道是否有可能更好的结构。

我有两张桌子。

```
Projects : id, title
Status : project_id, status_id, created(DATETIME) 
```

在获取我的项目状态的那一刻，我获取项目 ID 并根据项目 ID 从状态表中拉出最新的行。要获得这一最新行是相当麻烦的。

我应该将架构更改为此吗？

```
Projects : id, title, current_status_id(FK)
Status : id(PK), project_id, status_id, created(DATETIME) 
```

然后我可以用 FK 加入表格并获得我想要的行而不寻找最新的？

**编辑**：

所以我想要这样的东西

```
SELECT * FROM projects
LEFT JOIN status on projects.id = status.project_id
WHERE projects.id = 1 
```

但我只想要状态表中的最新记录。

**编辑 2**：

所以我想要这样的东西

```
SELECT * FROM projects
LEFT JOIN status on projects.id = status.project_id 
```

但是对于每个返回的项目，只能从 status 中获取该 project_id 的最新状态记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:01:06.937

这怎么麻烦？

```
SELECT project_id, status_id, created 
FROM Status 
WHERE project_id = the-id
ORDER BY created DESC
LIMIT 1; 
```

或者，如果您需要多个项目的列表：

```
SELECT a.project_id, a.status_id, a.created 
FROM Status a
LEFT JOIN Status b
ON a.project_id = b.project_id
AND b.created > a.created
WHERE a.project_id IN(id1, id2, id3) AND b.project_id IS NULL; 
```

因此，使用项目数据：

```
SELECT Projects.*, Status.*
FROM Projects
LEFT JOIN Status 
ON Status.project_id = Projects.id
WHERE Projects.id = the-id
ORDER BY Status.created DESC
LIMIT 1; 
```

或者：

```
SELECT Projects.*, Status.*
FROM Projects
LEFT JOIN Status a
ON a.project_id = Projects.id
LEFT JOIN Status b
ON a.project_id = b.project_id
AND b.created > a.created
WHERE b.project_id IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:04:26.067

这是一种方法。

您甚至可能不需要 current_status 字段成为 FK；为什么不只存储价值？否则，您可能会遇到奇怪的循环引用。

另一种方法是存储状态档案，与项目表分开。每次状态更改时，将当前状态插入存档表，并更改 projects.status 值。

# sublimetext2 - Sublime Text 找不到 gcc 编译器

> ID：15257892
> 
> 赞同：0
> 
> 时间：2013-03-06T20:58:27.277
> 
> 标签：sublimetext2, sublimetext

我正在尝试从 Sublime Text 2 运行 Make，但出现错误：

```
make: arm-none-eabi-gcc: No such file or directory 
```

这只发生在 Sublime Text 中，当我从终端运行时，一切正常。

我已经设置了 .bash_profile

```
export PATH="~/arm-cs-tools/bin:$PATH" 
```

……但还是没有办法？如何让 ST 解析 $PATH 环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:04:27.643

来自[非官方的崇高文档](http://docs.sublimetext.info/en/latest/reference/build_systems.html#troubleshooting-build-systems)：

> 在某些操作系统上，PATH 的值会因终端窗口和图形应用程序而异。因此，即使您在构建系统中使用的命令在命令行中运行，它也可能无法在 Sublime Text 中运行。这是由于 shell 中的用户配置文件。
> 
> 要解决此问题，请确保您设置了所需的 PATH，以便 Sublime Text 等图形应用程序可以找到它。有关详细信息，请参阅下面的链接。
> 
> 或者，您可以使用 .sublime-build 文件中的路径元素来覆盖 PATH > 用于定位 cmd 中指定的可执行文件。只要您的构建系统正在运行，PATH 的这个新值就会生效。之后，旧的 PATH 将被恢复。

请注意，虽然此文档适用于 v1 并且已弃用，但官方文档[在此处直接引用了此段落](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)

因此，您应该能够在 .sublime-build 文件中定义自定义路径。使用`path`选项

# java - 单击按钮时通过代码放大android中的edittext

> ID：15257895
> 
> 赞同：1
> 
> 时间：2013-03-06T20:58:36.637
> 
> 标签：java, android, textview

我想知道是否可以将 android 中的 EditText 从 0 放大到填充其父级。我尝试了几件事，但目前我有 LinearLayout 并且 EditText 是通过代码添加的：

```
 <LinearLayout
        android:id="@+id/ll_buscarenlace"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="0.8"
        android:gravity="right" > 
```

-

```
EditText et = (EditText) new EditText(this.act);
LinearLayout ll = (LinearLayout) this.act.findViewById(R.id.ll_buscarenlace);

    et.setWidth(0);
    ll.addView(et);

    for (int i=0; i<=ll.getWidth(); i++){
        et.setWidth(i);
        Thread.sleep(50);

    } 
```

但这是我尝试做的许多事情之一。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:30:07.960

通过“使其从零变为填充父级”，您的意思是您希望它最初是不可见的，然后在单击按钮时变得可见？

如果是这样，您不需要在布局文件集中进行任何调整大小`android:layout_width="fill_parent"`并使用`android:visibility="gone"`.

然后，在按钮上的 onClickListener 中，您可以调用`et.setVisible(Visibility.VISIBLE)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T22:41:06.830

一个可能的解决方案：ScaleAnimation。

```
EditText editText = (EditText) findViewById(R.id.editText1);

Animation scaleAnimation = new ScaleAnimation(0, 1, 1, 1);
scaleAnimation.setDuration(750);
editText.startAnimation(scaleAnimation); 
```

不完全是您正在寻找的东西，因为它可以*扩展*而不是扩展，但它可能会有所帮助。效果也不错。

# sql - 重复的电话号码

> ID：15257901
> 
> 赞同：-5
> 
> 时间：2013-03-06T20:58:50.973
> 
> 标签：sql, sql-server-2008-r2, duplicate-data

由于糟糕的数据录入政策，同一客户有很多重复的电话号码。我需要编写一个查询，列出所有具有相同电话号码的客户。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:21:15.280

```
;WITH dupes AS
(
  SELECT Phone_Number
  FROM dbo.Customer_Table
  GROUP BY Phone_Number
  HAVING COUNT(*) > 1
)
SELECT c.Customer_Name, dupes.Phone_Number
  FROM dupes 
  INNER JOIN dbo.Customer_Table AS c
  ON dupes.Phone_Number = c.Phone_Number; 
```

# sql - 使用 MAX 的 SQL 更新查询

> ID：15257902
> 
> 赞同：0
> 
> 时间：2013-03-06T20:58:51.197
> 
> 标签：sql, sql-server, sql-update

我在这里看不到任何对我来说真正相同的东西，尽管可能只是我很久没有做 sql 了。

所以我有一个主表TestTempGeneralInfo 和一个dail TestTaskGeneralInfo。我可以使用这个查询：

```
SELECT testtempgeneralinfo.issueid, 
       Max(testtaskgeneralinfo.effectivetime) 
FROM   testtaskgeneralinfo 
       INNER JOIN testtempgeneralinfo 
               ON testtaskgeneralinfo.testtemplateid = 
                  testtempgeneralinfo.issueid 
WHERE  testtempgeneralinfo.projectid = 150 
GROUP  BY testtempgeneralinfo.issueid 
```

查看TestTaskGeneralInfo 表有效时间的MAX。

但我正在努力编写一个查询来更新同一列TestTempGeneralInfo。任何人都可以帮忙吗？希望这不是一个愚蠢的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:09:46.107

有几种不同的方法可以做到这一点，但对您来说最简单的方法可能是只获取上面的查询并将其转换为公共表表达式，然后将更新语句加入 CTE：

```
 ;WITH MaxDate AS
    ( SELECT testtemplateid, Max(effectivetime) as MaxEffectiveTime
      FROM testtaskgeneralinfo
      GROUP BY testtemplateid)
    UPDATE testtempgeneralinfo 
    SET effectivetime = MaxEffectiveTime
    FROM   MaxDate 
    INNER JOIN testtempgeneralinfo 
           ON MaxDate.testtemplateid = testtempgeneralinfo.issueid 
    WHERE  testtempgeneralinfo.projectid = 150 
```

编辑：对不起，那里有一点复制/粘贴错误。但以上假设您想用最近的 testtaskgeneralinfo 的有效时间来更新 testtempgeneralinfo 的有效时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:11:03.190

我不确定我是否理解你的问题。我的理解是：

*“鉴于上述查询，我​​如何用新值更新包含最大有效时间的行？”*

假设 issueid 是您的主键，答案将是这样的：

```
update testtempgeneralinfo
set
  effectivetime = getdate()  --columns and values will vary...
where issueid = (
  SELECT top 1 testtempgeneralinfo.issueid
  FROM
    testtaskgeneralinfo 
    INNER JOIN
    testtempgeneralinfo 
    ON testtaskgeneralinfo.testtemplateid = testtempgeneralinfo.issueid 
    WHERE testtempgeneralinfo.projectid = 150 
    order by
      testtaskgeneralinfo.effectivetime desc
  ); 
```

# php - 如何确定 PHP 中闭包/匿名函数的参数数量

> ID：15257906
> 
> 赞同：6
> 
> 时间：2013-03-06T20:59:08.507
> 
> 标签：php, closures, anonymous-function

如何确定声明闭包以在闭包外部使用的参数数量？例如：

```
$myClosure = function($arg1, $arg2, $arg3){

}

$numArgs = someMagicalFunction($myClosure);
echo("that closure expects $numArgs arguments"); 
```

有什么功能可以满足我的需要吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T21:01:08.153

使用反射。见这篇文章： http: [//www.bossduck.com/2009/07/php-5-3-closures-and-reflection/](http://www.bossduck.com/2009/07/php-5-3-closures-and-reflection/)

```
$func = function($one, $two = 'test') {
    echo 'test function ran'.PHP_EOL;
};
$info = new ReflectionFunction($func);
var_dump(
    $info->getName(), 
    $info->getNumberOfParameters(), 
    $info->getNumberOfRequiredParameters()
); 
```

返回：

```
string(9) "{closure}"
int(2)
int(1) 
```

# jquery - Keypress() 在 IE 9 中不起作用

> ID：15257909
> 
> 赞同：0
> 
> 时间：2013-03-06T20:59:12.083
> 
> 标签：jquery, internet-explorer, internet-explorer-9, keypress

我的 jQuery 代码不能在 IE 9 中运行，但在 IE7、IE8、Chrome、FF 中运行良好。

这是我的代码：

```
$(document).keypress(function(){
        window.clearTimeout();
        window.setTimeout(function() {
            //Do something...
            return false;
        }, 800);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:03:33.837

换成keydown试试，和电脑不一样，但应该能达到一样的效果

从一个教程：

> 为了了解 keydown 和 keypress 之间的区别，了解“字符”和“键”之间的区别很有用。“键”是计算机键盘上的物理按钮，而“字符”是通过按下按钮键入的符号。理论上，keydown 和 keyup 事件代表按键被按下或释放，而 keypress 事件代表一个字符被输入。该理论的实现在所有浏览器中并不相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:05:09.543

删除`window.clearTimeout()`或给它一个参数。IE9[错误地需要](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-cleartimeout)它。

```
$(document).keypress(function(){
    //window.clearTimeout();
    window.setTimeout(function() {
        alert("Worky!");
        return false;
    }, 800);
}); 
```

[http://jsfiddle.net/Hztuv/1/](http://jsfiddle.net/Hztuv/1/)

或者

```
var timeout;
$(document).keypress(function(){
    window.clearTimeout(timeout);
    timeout = window.setTimeout(function() {
        alert("Worky!");
        return false;
    }, 800);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:06:14.373

根据[this](https://stackoverflow.com/questions/492865/jquery-keypress-event-not-firing)最好使用`keydown()`而不是`keypress()`在IE上

# ios - CCScene addChild 过渡

> ID：15257910
> 
> 赞同：1
> 
> 时间：2013-03-06T20:59:21.183
> 
> 标签：ios, objective-c, cocos2d-iphone

我有一个 CCScene，我正在通过 addChild 向它添加一个 CCLayer：

```
[self addChild:helloWorldLayer]; 
```

有没有办法通过类似于你如何做到这一点的过渡来添加这个孩子？

```
[CCTransitionFade transitionWithDuration:1.00f scene:[HelloWorldScene scene]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:04:50.423

试试这个：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[HelloWorldScene scene] withColor:ccWHITE]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:48:13.797

大多数转换使用[常规 CCAction](http://www.cocos2d-iphone.org/api-ref/2.1.0/interface_c_c_action_interval.html)来执行其工作。要淡入图层，请使用 CCFade 操作。

缺点：并非所有转换都由操作支持，并且操作在层上的工作方式可能与在转换中不同。如果有疑问，请查看转换类的代码以了解它使用哪个动作以及如何使用它。

# javascript - 在 javascript 中创建一个 ISO 日期对象

> ID：15257911
> 
> 赞同：66
> 
> 时间：2013-03-06T20:59:21.493
> 
> 标签：javascript, node.js, mongodb, coffeescript

我有一个 mongo 数据库设置。在 mongoDb 中创建一个新的日期对象以 ISO 格式创建一个日期对象，例如：`ISODate("2012-07-14T00:00:00Z")`

我正在使用 node.js 连接到 mongo 数据库并查询数据库。当我在 javascript 中创建一个新的日期对象 ( `new Date()`) 时，它会创建一个 javascript 日期对象，例如：`Wed Mar 06 2013 14:49:51 GMT-0600 (CST)`

有没有办法在 javascript 中创建 ISO 日期对象，以便我可以将对象直接发送到 mongoDb 并执行日期查询

我能够在 mongoDb 中执行以下查询

```
db.schedule_collection.find({
  start_date: { '$gte': new Date(2012, 01, 03, 8, 30) }
}) 
```

但是当我从节点发送 javascript 日期对象时无法执行

mongodb 食谱提供了一个 python 示例来使用 datetime 模块查询 mongo 数据库，但没有提供任何使用 javascript 的示例。

任何帮助表示赞赏。提前谢谢你

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-06T21:01:59.797

尝试使用[ISO 字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Example.3A_ISO_8601_formatted_dates)

```
var isodate = new Date().toISOString() 
```

另请参阅：[MDN 上的方法定义](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-17T15:39:28.413

试试下面：

```
var temp_datetime_obj = new Date();

collection.find({
    start_date:{
        $gte: new Date(temp_datetime_obj.toISOString())
    }
}).toArray(function(err, items) { 
    /* you can console.log here */ 
}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-03-23T22:09:26.350

在节点中，Mongo 驱动程序会给你一个 ISO 字符串，而不是对象。（例如：）`Mon Nov 24 2014 01:30:34 GMT-0800 (PST)`因此，只需通过以下方式将其转换为 js 日期：`new Date(ISOString);`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-10-11T21:25:49.627

这对我有用：

```
var start = new Date("2020-10-15T00:00:00.000+0000");
 //or
start = new date("2020-10-15T00:00:00.000Z");

collection.find({
    start_date:{
        $gte: start
    }
})...etc
```

new Date(2020,9,15,0,0,0,0) 可能导致错误的日期：我的意思是非 ISO 格式（请记住 javascript 从 0 到 11 计算月份，所以 10 月份是 9）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-25T20:04:33.013

我解决了这个问题，在 node.js 中实例化一个新的 Date 对象：...

在 Javascript 中，将 Date().toISOString() 发送到 nodejs:...

```
var start_date = new Date(2012, 01, 03, 8, 30);

$.ajax({
    type: 'POST',
    data: { start_date: start_date.toISOString() },
    url: '/queryScheduleCollection',
    dataType: 'JSON'
}).done(function( response ) { ... }); 
```

然后使用 ISOString 在 nodejs 中创建一个新的 Date 对象：..

```
exports.queryScheduleCollection = function(db){
    return function(req, res){

        var start_date = new Date(req.body.start_date);

        db.collection('schedule_collection').find(
            { start_date: { $gte: start_date } }
        ).toArray( function (err,d){
            ...
            res.json(d)
        })
    }
}; 
```

注意：我使用的是 Express 和 Mongoskin。

# php - 带中断的简单 php 搜索表单

> ID：15257912
> 
> 赞同：0
> 
> 时间：2013-03-06T20:59:24.923
> 
> 标签：php, for-loop, while-loop, break

我有一个用于搜索和比较结果的简单系统。

在这种情况下，我会得到 2 个结果，一个是好的，一个是坏的。

为此，我使用以下代码：

```
for ($i=0;$i<sizeof("search.txt");$i++)
{

    if ($_REQUEST['search']=="ok" && $_REQUEST['car']=="")
    {
        print "ok";
        break;
        /// show results;
    }

    if ($_REQUEST['search']=="ok" && $_REQUEST['car']=="" && $_REQUEST['city']=="")
    {
        print "ok";
        break;
        /// show results;
    }
} 
```

问题是结果是否必须显示2个结果，“break”行停止循环，但如果我不放break，它会显示其他条件“if”的结果，我放了一个简单的例子，因为在这个循环中我有很多条件“如果”，因此我需要在每种情况下显示所有结果并为每个条件中断，但是将循环中断并让我继续循环

我的问题是我是否可以使用 break 或需要使用其他功能让我这样做，因为我需要这样做

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:03:13.260

`break`适用于 case 语句和循环。由于您没有使用案例，因此`break`会破坏 foreach。您可能希望`continue`继续进行下一次迭代。

例如

```
for(...) {
   if (something) {
      ...
      continue; // "break" this loop iteration and move on to the next one.
   }
   if (something else) {
       ...
       break; // kills the foreach and moves down to the "stuff after loop" below.
   } 
   switch (this_and_that) {
      case 'a': ...; break; // breaks out of the switch and moves to "stuff after switch"
      case 'b': ...; break; // ditto
   }
   ... stuff after switch ...
}

... stuff after loop ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:04:28.273

我会这样：

```
if ($_REQUEST['search']=="ok" && $_REQUEST['car']=="")
{
print "ok";
   if ($_REQUEST['city']=="")
   {
   break;
   }
break;
} 
```

因为一旦第一个 if 语句为真，第二个将只需要 'city' 为真。

# salesforce - 获取记录状态计数的更有效方法

> ID：15257921
> 
> 赞同：0
> 
> 时间：2013-03-06T20:59:47.237
> 
> 标签：salesforce, apex-code, visualforce

我有一个使用standardSetController 进行分页的visualforce 页面。在页面上，我还添加了按状态过滤...即新建、工作、关闭等。现在，我正在为每个状态值执行 count() 以在页面上显示状态计数，但是需要对每个状态进行查询，效率低下。我想以更有效的方式获取状态计数。

这是我的控制器：

```
public with sharing class myController {

public ApexPages.StandardSetController setCtrl{get; set;}
public String projId { get; set; }
public String clientName { get; set; }
private List<Ticket__c> TicketList = new List<Ticket__c>();

public myController()
{
    projId = ApexPages.currentPage().getParameters().get('id');
    clientName = [Select Client__r.Name From Project__c Where Id =: projId].Client__r.Name;
    setCtrl = new ApexPages.StandardSetController(Database.getQueryLocator([select Ticket_Number__c, Name, Status__c, Description__c, Description_of_Resolution__c, CreatedDate from Ticket__c Where Project__c =: projId ORDER BY CreatedDate DESC]));
    ticketList = (List<Ticket__c>)setCtrl.getRecords();
    setCtrl.setPageSize(5);
}

public Integer getNewStatusCount() {
    return [select count() from Ticket__c Where Project__c =: projId and status__c = 'New'];
}

public Integer getWorkingStatusCount() {
    return [select count() from Ticket__c Where Project__c =: projId and status__c = 'Working'];
}

public Integer getResolvedStatusCount() {
    return [select count() from Ticket__c Where Project__c =: projId and status__c = 'Resolved'];
}

public Integer getClosedStatusCount() {
    return [select count() from Ticket__c Where Project__c =: projId and status__c = 'Closed'];
}

public Integer getCancelledStatusCount() {
    return [select count() from Ticket__c Where Project__c =: projId and status__c = 'Cancelled'];
}

public Integer getReopenedStatusCount() {
    return [select count() from Ticket__c Where Project__c =: projId and status__c = 'Reopened'];
}

public Boolean hasNext {
    get {
        return setCtrl.getHasNext();
    }
}

public Boolean hasPrevious {
    get {
        return setCtrl.getHasPrevious();
    }
    set;
}

public Integer pageNumber {
    get {
        return setCtrl.getPageNumber();
    }
    set;
}

public Integer totalPages {
    get {
        totalPages = math.ceil((Double)setCtrl.getResultSize() / setCtrl.getPageSize()).intValue();
        return totalPages;
    }
    set;
}

public void first() {
    setCtrl.first();
}

public void last() {
    setCtrl.last();
}

public void previous() {
    setCtrl.previous();
}

public void next() {
    setCtrl.next();
}

public List<Ticket__c> getTickets()
{
    return (List<Ticket__c>)setCtrl.getRecords();
}

public void filterStatus() {
    string myParam = apexpages.currentpage().getparameters().get('myParam');
    setCtrl = new ApexPages.StandardSetController(Database.getQueryLocator([select Ticket_Number__c, Name, Status__c, Description__c, Description_of_Resolution__c, CreatedDate from Ticket__c Where Project__c =: projId AND Status__c =: myParam ORDER BY CreatedDate DESC]));
    setCtrl.setPageSize(5);
}
} 
```

这是VF代码：

```
 <div class="contact-form">

                    <apex:outputPanel id="contactForm">
                        <apex:form >
                            <ul class="filteredView">
                                <li>
                                    <apex:outputLink value="/tickets?id={!projId}">View All</apex:outputLink>
                                </li>
                                <li>
                                    ({!NewStatusCount})
                                    <apex:commandLink action="{!filterStatus}" value=" New" rerender="contactForm">
                                        <apex:param name="myParam" value="New"/>
                                    </apex:commandLink>
                                </li>
                                <li>
                                    ({!WorkingStatusCount})
                                    <apex:commandLink action="{!filterStatus}" value=" Working" rerender="contactForm">
                                        <apex:param name="myParam" value="Working"/>
                                    </apex:commandLink>
                                </li>
                                <li>
                                    ({!ResolvedStatusCount})
                                    <apex:commandLink action="{!filterStatus}" value=" Resolved" rerender="contactForm">
                                        <apex:param name="myParam" value="Resolved"/>
                                    </apex:commandLink>
                                </li>
                                <li>
                                    ({!ClosedStatusCount})
                                    <apex:commandLink action="{!filterStatus}" value=" Closed" rerender="contactForm">
                                        <apex:param name="myParam" value="Closed"/>
                                    </apex:commandLink>
                                </li>
                                <li>
                                    ({!CancelledStatusCount})
                                    <apex:commandLink action="{!filterStatus}" value=" Cancelled" rerender="contactForm">
                                        <apex:param name="myParam" value="Cancelled"/>
                                    </apex:commandLink>
                                </li>
                                <li id="last">
                                    ({!ReopenedStatusCount})
                                    <apex:commandLink action="{!filterStatus}" value=" Reopened" rerender="contactForm">
                                        <apex:param name="myParam" value="Reopened"/>
                                    </apex:commandLink>
                                </li>
                            </ul>
                            <h5>
                                TICKETS
                            </h5> 
                            <table width="95%" border="1" cellpadding="5">
                                <tr align="left">
                                    <th style="width:25px;">Ticket#</th>
                                    <th style="width:200px;">Subject</th>
                                    <th>Description</th>
                                    <th style="width:50px;">Status</th>
                                    <th style="width:75px;"></th>
                                </tr>
                                <apex:repeat value="{!tickets}" var="ticket">
                                    <tr>
                                        <td>{!ticket.Ticket_Number__c}</td>
                                        <td>{!ticket.Name}</td>
                                        <td>{!ticket.Description__c}</td>
                                        <td>{!ticket.Status__c}</td>
                                        <td><apex:outputLink value="/detail?id={!projId}&ticketId={!ticket.Id}">View Details</apex:outputLink></td>
                                    </tr>
                                </apex:repeat>
                            </table>
                            <apex:outputPanel rendered="{!(tickets.empty == false)}" styleClass="pagination" >
                                <ul>
                                    <li><apex:commandLink id="first" value="First" action="{!first}" rendered="{!hasPrevious}" /></li>
                                    <li><apex:commandLink id="prev" value="Prev" action="{!previous}" rendered="{!hasPrevious}" /></li>
                                    <li><apex:commandLink id="next" value="Next" action="{!next}" rendered="{!hasNext}" /></li>
                                    <li><apex:commandLink id="last" value="Last" action="{!last}" rendered="{!hasNext}" /></li>
                                    <li><apex:outputText value="Page {!pageNumber} of {!totalPages}" /></li>
                                </ul>
                            </apex:outputPanel>
                        </apex:form>
                    </apex:outputPanel>                     
                </div>
        </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:07:05.393

您可以在单个 SOQL 查询中获取所有状态的每个状态的计数

```
[select status__c, count(id) from Ticket__c Where Project__c =: projId group by status__c] 
```

然后，您可以通过现有的 getter 公开结果，公开查询结果并通过转发器将它们绑定到 UI。

# gwt - 在 HeaderPanel 中使用 DataGrid

> ID：15257922
> 
> 赞同：0
> 
> 时间：2013-03-06T20:59:51.550
> 
> 标签：gwt, uibinder

**编辑**

*由于没有人回答我最初的问题，我认为除了对我如何*尝试实现目标的现有描述之外，还值得添加对*我*试图完成的目标的描述：

 *我的目标是创建一个`DataGrid`将根据其容器大小的任何变化调整大小。这并不难做到，但我还有一个额外的要求，就是在;`Panel`的上方和下方都有小部件。`DataGrid`这两个`Panel`小部件将包含大小固定的小部件（例如，一排按钮或文本输入小部件）。我的期望是 a`HeaderPanel`非常适合这个，但这似乎不起作用（如下面的原始问题所示）。所以......我最初的问题（“为什么这不起作用”）的替代方案是：实现这个要求的最佳方法是什么？

**我原来的问题：**

我在 a`DataGrid`的内容区域中有 a `HeaderPanel`，但未显示其中的详细信息行`DataGrid`（但是显示了`DataGrid`列标题）。`DataGrid`在 a的内容区域中使用 a 是否有问题`HeaderPanel`？或者这是对小部件的简单滥用？我正在添加`HeaderPanel`，`RootLayoutPanel`它应该提供必要的调整大小通知（我认为）。这是我的 UiBinder 代码：

```
<ui:UiBinder
  xmlns:ui='urn:ui:com.google.gwt.uibinder'
  xmlns:g='urn:import:com.google.gwt.user.client.ui'
  xmlns:c='urn:import:com.google.gwt.user.cellview.client'>
  <g:HeaderPanel>
    <g:SimplePanel/>
    <g:ResizeLayoutPanel>
      <c:DataGrid ui:field='dataGrid'/>
    </g:ResizeLayoutPanel>
    <g:HorizontalPanel>
      <g:Button
        ui:field='addRecordButton'
        text='Add Record'/>
      <g:Label ui:field='numberOfRecordsLabel'/>
    </g:HorizontalPanel>
  </g:HeaderPanel>
</ui:UiBinder> 
```

这是Java代码：

```
public class TempGWT implements EntryPoint {

@UiField
Button                    addRecordButton;
@UiField
DataGrid<Record>          dataGrid;
@UiField
Label                     numberOfRecordsLabel;

private ArrayList<Record> _recordList;

interface TempGWTBinder extends UiBinder<Widget, TempGWT> {
}

private static class Record {
private String _field1;
}

@Override
public void onModuleLoad() {
  _recordList = new ArrayList<Record>();
  TempGWTBinder binder = GWT.create(TempGWTBinder.class);
  Widget widget = binder.createAndBindUi(this);
  Column<Record, String> field1Column = new Column<Record, String>(new TextInputCell()) {
    @Override
    public String getValue(final Record record) {
      return record._field1;
    }
  };
  dataGrid.addColumn(field1Column, "Field 1");
  RootLayoutPanel.get().add(widget);
}

@UiHandler("addRecordButton")
public void onAddRecordButtonClick(final ClickEvent event) {
  Record record = new Record();
  record._field1 = "Record " + (_recordList.size() + 1);
  _recordList.add(record);
  dataGrid.setRowData(_recordList);
  numberOfRecordsLabel.setText("Records:" + _recordList.size());
}

} 
```

我试图跟踪执行，虽然我不确定，但当我更改浏览器窗口的大小并且“调整大小”请求被接收到时，看起来好像发生了以下情况`DataGrid`（我已经跳过了一些“不重要”的方法）：

```
 DataGrid#onResize
  HeaderPanel#forceLayout
  ScrollPanel#onResize 
```

该`DataGrid`对象包含 a ，其中包含和 a`HeaderPanel`的标题。我不知道这是否是问题的关键，但是's中的包含一个对象，并且没有实现; 该方法仅在子级实现时将调整大小发送给其子级。`DataGrid``ScrollPanel``ScrollPanel``DataGrid``HeaderPanel``DataGrid$TableWidget``TableWidget``RequiresResize``ScrollPanel#onResize``RequiresResize`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:17:20.090

[GWT 开发人员指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)部分`Tables and Frames`清楚地表明我只需要为 DataGrid 使用 100% 的宽度/高度！像这样：

```
 <c:DataGrid
    ui:field='dataGrid'
    width='100%'
    height='100%'/> 
```*

# twitter-bootstrap - Yii 框架引导程序 - 获取启用 TbEditableColumn 的属性以使用表达式而不是布尔值

> ID：15257923
> 
> 赞同：1
> 
> 时间：2013-03-06T20:59:54.900
> 
> 标签：twitter-bootstrap, yii

有没有办法让`TbEditableColumn`启用的属性使用表达式而不是布尔值（即：true）

以下是我正在尝试做的一个示例：

```
array(
  'class' => 'bootstrap.widgets.TbEditableColumn',
  'name' => 'description',

  'editable' => array(
       'type' => 'textarea',
   'url' => $this->createUrl('classification/update'),
   'placement' => 'top',
       'enabled' => '($data->status > 0) ? true : false;',
  )
), 
```

应该注意的是，这适用于使用时可用的可见属性`bootstrap.widgets.TbButtonColumn`，如下所示：

```
array(
'class' => 'bootstrap.widgets.TbButtonColumn',
'deleteConfirmation' => 'Are you sure you wish to delete this classification?',
'template' => '{delete}',

'buttons'=>array(
    'delete' => array(
    'visible' => '($data->status > 0) ? true : false;',
)
), 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T15:09:04.733

确保您没有设置列的“值” - 在[此处](https://github.com/clevertech/YiiBooster/blob/master/src/widgets/TbEditableColumn.php)阅读代码：您是否尝试过使用 'apply'=>true 而不是启用？

# java - 如何重构使用“策略”的大类？

> ID：15257926
> 
> 赞同：3
> 
> 时间：2013-03-06T21:00:09.830
> 
> 标签：java, design-patterns, refactoring, strategy-pattern

## 问题

我有一个大类（大约 1500 LOC），它使用不同的“策略”将数据从一个对象转换为另一个对象。我这里有那个类的代表：

```
public class FooService implements FooProcessing {
    FooRequestTransformer fooRequestTransformer;
    AnotherService anotherService;
    InstanceVar1 iVar1;
    InstanceVar2 iVar2;    
... 
```

这个类使用了一个接口（类外部）：

```
interface TransformerStrategy {
    public FooRequest transform(FooResponse response);
} 
```

哪个被传递到这个方法中（在 FooService 类中）：

```
private FooResponse getResponse(FooResponse fooResponse, TransformerStrategy transformerStrategy) {
    FooRequest fooRequest = transformerStrategy.transform();
    fooResponse = anotherService.bar(fooRequest); 
    return fooResponse;
} 
```

入口点在这里，它使用该`getResponse()`方法并`TransformerStrategy`匿名创建：

```
public List<Foo> getFooForSomeFlow1(Param1 param1, Param2 param2, ...){
    FooResponse fooResponse = anotherService.baz(fooRequest);

    TransformerStrategy myTransformerStrategy = new TransformerStrategy() {
        public FooRequest transform(FooResponse fooResponse) {
            fooRequestTransformer.transform(param1, param2, iVar1, iVar2) 
        }
    }

    FooResponse fooResponse = getResponse(fooResponse, myTransformerStrategy);
    ...//other code
} 
```

现在的问题是：有*几种*方法，如`getFooForSomeFlow1()`(inside `FooService`)，它们都有自己的匿名实现，`TransformerStrategy`随后调用`getResponse()`。正如您可以想象的那样，这非常混乱，并且在您调试时令人困惑（即您正在进入`getResponse()`，然后突然又回到了`getFooForSomeFlow1()`）

## 可能的解决方案

一种可能的解决方案（想到的）是将这些不同的策略组织成一个“提供者”类，该类将以某种方式将它们组合在一起。奇怪的是，这个类*已经包含*了这种类型的 Provider 类：

```
protected class StrategyProvider {
    public ABCTransformerStrategy newABCTransformerStrategy(FooRequestTransformer transformer, Param1 param1, Param2 param2) {
        return new ABCTransformerStrategy(transformer, param1, param2);
    }
}

protected class ABCTransformerStategy implements TransformerStrategy {
    protected FooRequestTransformer transformer;
    protected Param1 param1; 
    protected Param2 param2;

    //...constructor here

    //...overridden transform method as above
} 
```

在其中一条评论中说，“出于测试目的，将匿名类转换为内部类”。然而，他们只改变了*其中一个*人，而留下了其余的人。所以就像他们开始重构过程并在中间停止。

所以，我想我可以完成重构并将所有匿名类移动到内部类，然后最终将这些类移出`StrategyProvider`到外部类。问题是“将匿名转换为内部”增加了更多样板文件（见`ABCTransformerStrategy`上文；我必须将所有数据传递给构造函数），我不确定通过这个重构过程可以获得多少。

我有两个问题：

1.  我应该继续这种方法吗？
2.  或者是否有另一种我可以应用的设计模式更合适并真正简化此代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:14:33.873

根据您提供的代码示例，它表面上很复杂。为什么不简单

```
public List<Foo> getFooForSomeFlow1(Param1 param1, Param2 param2, ...)
{
    FooResponse fooResponse = anotherService.baz(fooRequest);

    FooRequest  fooRequest = fooRequestTransformer
                                 .transform(param1, param2, iVar1, iVar2); 

    FooResponse fooResponse2 = anotherService.bar(fooRequest);
    ...//other code
} 
```

除非还有其他事情你没有向我们展示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:12:01.503

您的提供者类实际上是一个[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，这正是我要建议的。

通过将逻辑移出`getFooForSomeFlow1`和类似的方法，您创建了非常松散耦合的代码，这始终是可取的。

只是出于个人喜好，我会有一种方法，用于返回实例，该方法将`int`值作为鉴别器。这些 int 可以是提供程序类中的静态最终变量，例如：

```
public static final int ABCTransformerStrategy = 1; 
```

此外，通过将 Factory 类设为 Abstract，您将无需在每次需要使用该类时实例化该类，从而使代码更加简洁。

**编辑**

正如所建议的，使用`Enum`是将值转换为它们所代表的具体类的一种更可取且语义正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:22:17.930

将每个方法转换为它自己的类（[方法对象模式](http://sourcemaking.com/implementation-patterns/method-object)，即方法即对象），这与原始重构的去向类似。如果您需要集中访问所有这些方法 - 作为对象，请实现一个[抽象工厂](https://en.wikipedia.org/wiki/Abstract_factory_pattern)。根据您的描述，听起来您正在从一种类型转换为另一种类型，因此请让抽象工厂接受两个`Class`参数并将类组合的适当方法作为对象实例返回给调用者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:11:40.537

我尝试了不可靠的方法并在该方法上尝试了“内联方法” `getResponse()`，但它内联了一些重复的代码（这就是我们`getResponse()`首先将重复的代码提取到其中的原因）。我应该在我的问题中澄清说，其中的代码`getResponse()`比我展示的要多。
至于制作工厂，我无法证明在类中引入更多样板和 LOC 是合理的，特别是因为我必须将大量数据传递给工厂方法和/或内部类。

我们所做的是，我们用这样的方法包装了匿名内部类：

```
private TransformerStrategy createTransformerStrategyWithABCValues(Param1 param1, Param2 param2, IVar ivar, IVar1 ivar2) {
    return new TransformerStrategy() {
        public FooRequest transform(FooResponse response) {
            return FooRequestTransformer.transform(
                    param1,
                    param2,
                    iVar1,
                    iVar2);
        }
    };
} 
```

现在调用方法如下所示：

```
public List<Foo> getFooForSomeFlow1(Param1 param1, Param2 param2, ...){
    FooResponse fooResponse = anotherService.baz(fooRequest);
    TransformerStrategy myTransformerStrategy = createTransformerStrategyWithABCValues(param2, param2, iVar1, iVar2);
    FooResponse fooResponse = getResponse(fooResponse, myTransformerStrategy);
    ...//other code
} 
```

在这样做的过程中，我们发现 5 个策略有一些重复，因此我们能够将其缩减为 3 个策略。我们摆脱了 StrategyProvider 类以及提供的内部类。

使用这种方法，现在调试/维护变得更容易了，并且我们能够从代码中减少相当多的重复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:10:56.420

如果你想提供一堆相关的对象，你总是可以使用`Abstract Factory`. 它不是一个简单的设计模式，但却是最适合你的。

看看这个：[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

# javascript - BxSlider maxslide 和 minslide

> ID：15257927
> 
> 赞同：0
> 
> 时间：2013-03-06T21:00:15.000
> 
> 标签：javascript, jquery, bxslider

所以基本上，我使用的是带有 27 个缩略图的 BxSlider，每个缩略图上都加载了一个灯箱，因此您可以检查每个图像。

事情是，当我用这个加载脚本时：

```
$('ul#items').bxSlider({
          minSlides: 5,
          maxSlides: 5,
          slideWidth: '920px'
        }); 
```

我被迫在滑块的每一页上获得 5 个缩略图。所以在最后一页，我的最后 3 个缩略图是前 3 个重复的。

我尝试使用它来解决我的问题，

```
$('ul#items').bxSlider({
          minSlides: 1,
          maxSlides: 5,
          slideWidth: '920px'
        }); 
```

但似乎如果您输入 1 作为 minSlides，脚本将只放置 1（这为您提供 27 页 1 个缩略图）每页幻灯片，即使您指定每张幻灯片最多 5 个。

有什么办法可以解决这个问题？多谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-12T00:51:40.017

如果您查看[示例 3](http://bxslider.com/examples/carousel-demystified#example3)，它描述了您遇到的问题。因为 slideWidth 属性设置为大于容器，它默认为 minSlide 属性以允许幻灯片缩放。

> “这里我们故意设置了一个大于可用空间的 slideWidth。在这种情况下，滑块默认为 minSlide 值，并适当地缩放。” - bxslider 示例 3 说明

要获得所需的效果，您应该将 max-width 值设置为 slideWidth 属性。这样，屏幕将允许您在视口允许的情况下在 minSlide 和 maxSlide 之间切换。[您可以在示例 4](http://bxslider.com/examples/carousel-demystified#example4)中看到这一点。

我希望这会有所帮助，因为我花了一段时间才自己弄清楚。

```
$('ul#items').bxSlider({
    slideWidth: 200,
    minSlides: 1,
    maxSlides: 5,
    slideMargin: 10
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:11:58.623

尝试这个

```
$('ul#items').bxSlider({
          minSlides: 1,
          maxSlides: 5,
          slideWidth: '920px',
          infiniteLoop: false
        }); 
```

# wordpress - 在部署到 Azure 的 WordPress 上重置密码

> ID：15257930
> 
> 赞同：2
> 
> 时间：2013-03-06T21:00:16.460
> 
> 标签：wordpress, azure, smtp

我使用库在 Windows Azure 上创建了一个 WordPress 站点。

我了解 Azure 站点没有 SMTP 功能。

如果无法发送电子邮件，如何在 WordPress 网站上重置密码？我知道我可以在 WordPress 设置中和/或使用 WordPress 插件指定 SMTP 服务器（如 Gmail）。但我必须能够登录才能做到这一点。

由于缺少密码重置选项，从图库中安装的 WordPress 站点似乎无法完全正常运行。还有其他我想念的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:08:02.177

如果您只需要访问您的 wordpress 管理 - 这样您就可以安装额外的插件来为您提供您缺少的选项，那么您可以直接在数据库中更新您的密码。
请参阅此 codex 页面：
[http](http://codex.wordpress.org/Resetting_Your_Password#Through_MySQL_Command_Line)
://codex.wordpress.org/Resetting_Your_Password#Through_MySQL_Command_Line 从 MySQL 5.x 版开始，您还可以运行以下命令：

```
"UPDATE (name-of-table-you-found) SET user_pass = MD5('"(new-password)"') WHERE ID = (id#-of-account-you-are-reseting-password-for);" (actually changes the password) 
```

此页面还有一些关于 azure 和发送电子邮件的信息：
[如何在 windows Azure 上使用 PHP 发送电子邮件？](https://stackoverflow.com/questions/10582492/how-can-i-send-an-email-using-php-at-windows-azure)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:03:46.843

实际上，您可以通过添加用于配置 SMTP 服务的插件，在 Azure 中的 WordPress 上使用 SMTP。这是您可以找到的两个插件。我个人已经测试了 configure-smtp 并且工作得很好。试一试并留下反馈。

[http://wordpress.org/extend/plugins/configure-smtp/](http://wordpress.org/extend/plugins/configure-smtp/)

[http://wordpress.org/extend/plugins/wp-mail-smtp/](http://wordpress.org/extend/plugins/wp-mail-smtp/)

# javascript - 使用 jQuery 循环生成 HTML

> ID：15257932
> 
> 赞同：0
> 
> 时间：2013-03-06T21:00:26.770
> 
> 标签：javascript, jquery

我知道如果我想将事件绑定到生成的 HTML，我需要使用类似的东西`.on()`，但我只在绑定事件时使用它`.click().`

我正在创建一个应用颜色列表的网络应用程序。颜色是从 JSON 文件生成的。获取后，我将其添加到页面中，并在属性中包含某些信息。我想对新生成的 HTML 做一些事情，即列表元素。但是`console.log()`向我展示的是 parent 中没有任何内容`ul`。即使在页面上我看到了新添加的内容。

这是基于它的整个代码。

```
var setColors = function(){

    getColors = function(){
        $.getJSON('js/colors.json', function(colors) {
                $.each(colors, function(i, colors) {
                //console.log(colors);
                    $('<li>', {
                        text: colors['color'],
                        'name' : colors['color'],
                        'data-hex' : colors['hex'],
                        'data-var' : colors['var']
                    }).appendTo('#picker');
                })
        });

        addColors();
    }

    addColors = function(){
        var el = $('#picker').children;
        $(el).each(function(){
            console.log($(this));
        });
    }

    return getColors();
}

$(function(){

    setColors();

}); 
```

addColors() 是我遇到问题的地方。错误说'未捕获`TypeError: Cannot read property 'firstChild'`空值。如何使用新生成的 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:01:26.853

您在 children 方法中缺少括号：

```
var el = $('#picker').children(); 
```

此外，如果您希望在新生成的 html 上执行 addColor 方法，则必须在生成 html 后从`getJSON`回调方法中添加对它的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:09:14.267

```
addColors = function(){
    var el = $('#picker').children;
    $(el).each(function(){
        console.log($(this));
    });
} 
```

几个问题：

1.  缺端半色
2.  缺少括号`.children()`
3.  children() 返回一个 jQuery 对象，不需要`$(el)`

更新：

```
window.addColors = function(){
    var $el = $('#picker').children();
    $el.each(function(){
        // do stuff here, but could attach each() to above, after children()
    });
}; 
```

# python - setup.py 中 Babel 的 message_extractors 配置：元组中的第三个参数

> ID：15257933
> 
> 赞同：2
> 
> 时间：2013-03-06T21:00:28.707
> 
> 标签：python, gettext, python-babel

我想开始在我的 Python 项目中使用[Babel 。](http://babel.edgewall.org/)`setup.py`根据文档，我有以下内容：

```
setup(
    ...
    message_extractors = {'my_project': [('**.py', 'lingua_python', None),
    ]},
    ... 
```

一切正常。现在我想知道第三个参数（设置为`None`）是什么意思以及我可以传入什么（只是为了了解它）。我查看了[Babel 文档](http://babel.edgewall.org/wiki/Documentation/0.9/setup.html#extract-messages)，但找不到任何东西，但我在 Babel 的[Mako 文档](http://docs.makotemplates.org/en/latest/usage.html?highlight=translation#babel)中看到了这一点：

```
# Extraction from Python source files

[python: myproj/**.py]

# Extraction from Mako templates

[mako: myproj/templates/**.html]
input_encoding = utf-8 
```

我想知道：这个`input_encoding`选项看起来像是你可以通过那里的东西。由于我在所有 Python、我的模板等中使用 Unicode 和 UTF-8。我认为这可能是一个需要指定的有效选项（也许这是一个隐含的假设，我不知道）。

所以现在我正在寻找记录这种行为的东西，但即使是我发现的 Babel 文档的一部分也没有说明第三个参数是什么。

请通过分享一些详细解释这一点的有用链接来启发我。先感谢您。

**更新**：我发现最后一个参数似乎是一个`dict`选项，可能传递给扩展（例如`mako`）。当我将最后一个参数设置为`None`抱怨消失时。因此，虽然这似乎是答案，但我仍在寻找有关此的文档。`{'input_encoding': 'utf-8'}``mako.exceptions.CompileException``Unicode decode operation of encoding 'ascii' failed`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:11:55.680

第三个参数是选项映射。

这可以包含将传递给提取器方法的任意关键字参数。这完全取决于提取器方法将接受哪些关键字参数。

`options`提取器在调用时将这些选项作为最后一个参数传递，通常在方法签名中调用。Mako [Babel 插件](http://www.makotemplates.org/trac/browser/mako/ext/babelplugin.py#L13)支持，例如。前者似乎是后者参数的遗留拼写，仅在未指定时使用。`encoding``input_encoding``input_encoding`

因此，每个 Babel 插件都需要单独记录支持的选项，Babel 项目没有设置限制，也不会知道每个插件支持的细节。

Mako 提取器的详细信息记录在[Common Framework Integrations 部分](http://docs.makotemplates.org/en/latest/usage.html#babel)：

> Mako 提取器支持`input_encoding`指定模板编码的可选参数（与[`Template`](http://docs.makotemplates.org/en/latest/usage.html?highlight=babel#mako.template.Template)/[`TemplateLookup`](http://docs.makotemplates.org/en/latest/usage.html?highlight=babel#mako.lookup.TemplateLookup)的`input_encoding`参数相同）。

# python - Python线程给出全局名称未定义错误

> ID：15257936
> 
> 赞同：4
> 
> 时间：2013-03-06T21:00:37.660
> 
> 标签：python, multithreading, sockets, raspberry-pi

以下代码给出了全局名称未定义错误，但据我所见，名称*已*定义。我是 Python 新手，这是范围问题吗？

```
import os, socket
from threading import Thread

class serv:
    def __init__(self):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        self.socket.bind(('', 443))

    def run(self):
        self.socket.listen(10)
        print "Listening"
        self.conn, self.addr = self.socket.accept()
        try:
            Thread(target=clientThread, args=(self.conn,)).start()
        except Exception, errtxt:
            print errtxt

    def exit(self):
        print "Disconnected"
        self.conn.close()

    def clientThread(conn):
        print "Connected"
        while 1:
            conn.send("Hello, worlds!\n")

S = serv()
S.run() 
```

具体错误是

```
global name 'clientThread' is not defined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T21:01:54.990

你应该使用

```
self.clientThread 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:17:37.733

我会做出这些改变：

(1) 传递`self`给`self.clientThread`

```
def run(self):
    self.socket.listen(10)
    print "Listening"
    self.conn, self.addr = self.socket.accept()
    try:
        Thread(target=self.clientThread, args=(self,)).start()
    except Exception, errtxt:
        print errtxt 
```

(2) 参考`self`文献`clientThread`

```
def clientThread(self):
    print "Connected"
    while 1:
        self.conn.send("Hello, worlds!\n") 
```

另一种可能性是让您的对象派生自`threading.Thread`而不是拥有一个线程。然后你的代码看起来更像这样：

```
import os, socket
from threading import Thread

class serv(Thread):
    def __init__(self):
        super(serv, self).__init__()
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        self.socket.bind(('', 443))

    def run(self):
        self.socket.listen(10)
        print "Listening"
        self.conn, self.addr = self.socket.accept()
        try:
            print "Connected"
            while 1:
                self.conn.send("Hello, worlds!\n")
        except Exception, errtxt:
            print errtxt

    def exit(self):
        print "Disconnected"
        self.conn.close()

S = serv()
S.start() 
```

# java - 进行外部流程调用时的设计优化

> ID：15257937
> 
> 赞同：1
> 
> 时间：2013-03-06T21:00:39.937
> 
> 标签：java, linux, oop, design-patterns, processbuilder

我需要从 java 进程调用外部进程/脚本/cli 命令。
由于这些调用会很多，有些会返回运行的进程/脚本的结果，而其他人只会运行它，我想知道是否：

1.  有一个围绕 Java 构建的标准设计，`ProcessBuilder` 这样我就不会分散在代码调用`ProcessBuilder` 中
2.  我可以做哪些优化？例如，从文件中读取所有 cli 命令而不是像 `final String`在代码中那样保留它们是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:24:48.020

你的问题有点模糊，无法写出准确的答案，但我有一些建议：

*   Shell 旨在链接命令（管道、等待等）并编写一些逻辑代码。Shell 被解释并且很容易更新，但必须保持简单。它们可能是您系统的基本组成部分。
*   编写自己的`launch`方法来启动进程并捕获 stdout 和 stderr（在两个线程中），以编写驱动程序的日志。
*   设计一个 XML 文件以声明方式指定：
    *   进程路径，它们的参数（静态参数）
    *   作业之间的并行性和同步性
*   用Java写一个模型来反映XML流程模型（JAXB可能是一个解决方案）
*   为模型添加等待一组作业的能力
*   向模型添加修饰符以动态更改参数的值

如果我尝试对您的问题进行分类，我认为主要是在*Control flow*。

要解决一个大问题，您可以使用并行性：同时启动多个进程并等待所有进程终止：这是一个*集合*或*连接*阶段。也许您可以向另一台联网的计算机启动远程命令。

如何在 XML 文件中指定并行性的一个很好的例子是[ANT 构建文件](http://ant.apache.org/manual/Tasks/parallel.html)：

```
<parallel>
  <wlrun ... >
  <sequential>
    <sleep seconds="30"/>
    <junit fork="true" forkmode="once" ... >
    <wlstop/>
  </sequential>
</parallel> 
```

我可以建议您在不编程的情况下使用 ANT 来解决您的问题吗？

用纸和笔画一幅希望执行的图可能会有所帮助...... ;-)

几个图形应用程序可能有助于绘制控制流的逻辑图。完成后，在此处发布，您将获得更准确的答案，我希望...

# php - 如何在 cakephp 2.3 中向客户端返回 ajax 请求响应（数据）

> ID：15257938
> 
> 赞同：0
> 
> 时间：2013-03-06T21:00:41.627
> 
> 标签：php, jquery, ajax, cakephp, cakephp-2.3

我正在尝试在 cakephp 2.3 中使用 ajax 添加到数据库，但不知道如何设置响应，而是向用户提供我将使用的其他数据

```
$this->set() 
```

对于正常请求，查看文件：

```
 echo $this->Form->create(); echo $this->Form->input('name');
    echo $this->Form->input('email');
    echo $this->Form->input('phone');
    echo $this->Form->input('message');
echo $this->Js->submit('Send Enquiry', array(
    'before' => $this->Js->get('#sending')->effect('fadeIn'),
    'success' => $this->Js->get('#sending')->effect('fadeOut'),
             'update' => '#success',
              'async' => true
               ));echo $this->Form->end();?> 
```

控制器功能是：

```
public function add() {
    if ($this->request->is('post')) {
        $this->Contact->create();
        if ($this->Contact->save($this->request->data)) {

            if($this->request->isAjax()){
                $this->autoRender = false;  
                echo 'successful';
                }else{
            $this->Session->setFlash(__('The contact has been saved'));
            $this->redirect(array('action' => 'index'));
                }
        } else {
            $this->Session->setFlash(__('The contact could not be saved. Please, try again.'));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:15:37.797

抱歉，如果我的问题措辞有误，但我找到了问题的解决方案，我使用下面的代码片段来获取验证错误。

```
if($this->request->isAjax()){

        $this->autoRender = false;      
        if($this->Contact->validates()){

        }else{
        $error = implode($this->Contact->validationErrors;
        echo $error;

            }
        } 
```

一样的感谢

# c# - 检查验证期间是否有任何错误

> ID：15257940
> 
> 赞同：-5
> 
> 时间：2013-03-06T21:00:42.460
> 
> 标签：c#, winforms, validation

我正在尝试学习 C#，目前正在做一些基本的验证工作。

所以，我正在使用 errorProvider 控件，但是当我在表单中按下 OK 按钮时，表单只是提交。是的，错误图标出现在它们应该出现的位置（验证有效），但我如何检查是否确实存在任何错误，以便阻止提交表单？请尽量对新手友好，我几乎不懂任何 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:03:31.347

如果您使用错误提供程序并处理 onvalidating，它应该如下所示：

```
 private void textBox1_Validating(object sender, CancelEventArgs e)
    {
        TextBox tb = sender as TextBox;
        if (tb.Text.Length > 0)
        {
            e.Cancel = true;
            errorProvider1.SetError(tb, "Please leave this textbox blank!");
        }
        else
        {
            errorProvider1.SetError(tb, "");
        }
    } 
```

这将阻止您单击关闭控件

或者，像这样实现 ok 按钮单击处理程序：

```
 private void OkBtn_Click(object sender, EventArgs e)
    {
        if (!Validate())
        {
            DialogResult = System.Windows.Forms.DialogResult.None;
        }

    } 
```

“DialogResult = none”业务是阻止表单关闭的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:02:50.677

有多种验证方式。请阅读本文开始，许多问题将消失[http://msdn.microsoft.com/en-us/library/debza5t0%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/debza5t0%28v=vs.100%29.aspx)

# qt - 在 QML 中为其他 QML 文件声明全局属性

> ID：15257946
> 
> 赞同：34
> 
> 时间：2013-03-06T21:00:49.213
> 
> 标签：qt, variables, scope, qml, global-variables

我想在配置文件中声明一个全局属性并在其他文件中使用它。例如声明`mainbg`：

**样式.qml**：

```
property color mainbg: 'red' 
```

并在其他 QML 文件（如`view.qml`和`main.qml`）中使用它。我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-08-04T16:59:20.377

使用 QML 单例。

请参考[本页](https://wiki.qt.io/Qml_Styling)上的“方法 2” ——丑陋[的 QTBUG-34418](https://bugreports.qt.io/browse/QTBUG-34418)评论是我的。

这些是您需要的部分：

**样式.qml**

```
pragma Singleton
import QtQuick 2.0
QtObject {
    property color mainbg: 'red'
} 
```

* * *

**qmldir**

此文件必须与单例 .qml 文件（`Style.qml`在我们的示例中）位于同一文件夹中，或者您必须提供它的相对路径。`qmldir`可能还需要包含在 .qrc 资源文件中。更多关于 qmldir 文件的信息可以在[这里](http://doc.qt.io/qt-5/qtqml-modules-qmldir.html)找到。

```
# qmldir
singleton Style Style.qml 
```

* * *

**如何参考**

```
import QtQuick 2.0
import "."  // this is needed when referencing singleton object from same folder
Rectangle {
    color: Style.mainbg  // <- there it is!!!
    width: 240; height 160
} 
```

这种方法从 Qt5.0 开始可用。`import`即使在同一文件夹中引用 QML 单例，您也需要一个文件夹语句。如果是同一个文件夹，请使用：`import "."`这是我在 qt-project 页面上记录的错误（请参阅 QTBUG-34418，单例需要显式导入才能加载 qmldir 文件）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-27T12:27:07.313

基本上，如果您不需要属性绑定（如果您的值是一个常量并且不需要在更改时通知），您可以在 Javascript 共享库中定义它，如下所示：

```
// MyConstants.js
.pragma library
var mainbg = "red"; 
```

并像这样在 QML 中使用它：

```
import "MyConstants.js" as Constants

Rectangle {
     color: Constants.mainbg;
} 
```

但这不好的一面是： - 没有强类型（JS 并不真正了解类型），所以即使它不是颜色，你也可以放置任何东西。- 如果您更改`mainbg`，使用它的项目将不会收到更改通知并保留旧值

因此，如果您需要类型检查和绑定/更改通知，只需在 main.qml 中将您的属性声明为根对象的成员，并且可以从 QML 应用程序中的任何地方访问它，因为该属性实际上是直接注册的到 Qml Context 对象中，根据定义，它是全局的。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-07T07:42:17.903

您可以创建一个 js 文件并将其导入到所有必须使用此属性的文件中。

.js 文件：

```
//Note: you only need '.pragma library' if you are planning to
//change this variable from multiple qml files
.pragma library
var globalVariable = 20; 
```

qml 文件：

```
import "test.js" as Global

Rectangle {
  id: main
  width: 300; height: 400

  Component.onCompleted: {
    console.log( Global.globalVariable)
    //you can also change it
    Global.globalVariable = 5
  }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-17T11:51:02.050

添加一些有助于@pixelgrease 答案，我发现了另一种不需要路径 relative 的技术`import "."`，解决了错误[QTBUG-34418](https://bugreports.qt.io/browse/QTBUG-34418)。这很有用，尤其是当一个`qmldir`单例类位于与使用单例的 qml 文件不同的位置时。该技术需要在树结构中定义一个适当的模块：然后通过将模块的父路径添加到 QML 引擎来解析模块，使用`QmlEngine::addImportPath(moduleParentPath)`. 例如：

```
qml/
├── <ModuleName>/
│ ├── <ClassName>.qml
│ ├── qmldir 
```

在 main.cpp 中你有：

```
QQmlApplicationEngine engine;
engine.addImportPath("qrc:/qml");    // Can be any directory
engine.load("qrc:/qml/main.qml"); 
```

如果你使用资源，qml.qrc：

```
<RCC>
 <qresource prefix="/">
      (...)
 <file>qml/main.qml</file>
 <file>qml/MySingletons/MySingleton.qml</file>
 <file>qml/MySingletons/qmldir</file>
 </qresource>
</RCC> 
```

在 qmldir 中：

```
module MySingletons
singleton MySingleton 1.0 MySingleton.qml 
```

在 main.qml 或其他目录中的任何其他 qml 文件中：

```
import MySingletons 1.0 
```

Then you use MySingleton class as usual. I attached the example MySingletonWithModule.7z to bug [QTBUG-34418](https://bugreports.qt.io/browse/QTBUG-34418) for reference.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-22T04:46:19.983

在 main 中添加此属性，您可以在任何 qml 中访问它，这可能不是正确的方法，但这是有效的。

或者，如果您想对属性进行分组，请将它们添加到 qml 中，在 main 中包含该 qml 并提供一个 id，现在您可以使用该 id 访问此属性

main.qml

```
 Item{
 width:10
 height:10

 Model{
 id:globdldata
 }

 } 
```

模型.qml

```
Item {

property color mainbg: 'red'

} 
```

您可以在任何地方使用 globdldata.mainbg

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-07T16:45:16.133

您始终可以创建一个新的 QML 对象文件，其中包含您希望跨 qml 文件共享的属性。只需以与任何 QML 对象相同的方式导入它，您就可以访问属性。现在，如果您希望能够修改这些属性并在实例之间共享更改，事情会变得更加棘手，您很可能需要使用 .pragma 库 js 文件的某种解决方案。除非您想编写某种 C++ 替代方案。

# windows-7 - 从 Visual Studio 2012 中删除窗口阴影/发光

> ID：15257955
> 
> 赞同：8
> 
> 时间：2013-03-06T21:01:19.423
> 
> 标签：windows-7, visual-studio-2012

我正在使用 Window 7。我已经从我的窗口中删除了阴影，但 Visual Studio 2012 似乎忽略了该设置并绘制了阴影（或发光）。有没有办法去除那个阴影/发光？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T19:38:49.087

从[这里](http://blogs.msdn.com/b/zainnab/archive/2010/06/22/improving-performance-by-changing-the-visual-experience-vstipenv0017.aspx)：

> 在某些情况下，您可以通过更改您的视觉体验来提高您的 Visual Studio 性能。要更改这些设置，只需转到工具 -> 选项 -> 环境 -> 常规 -> 视觉体验：

取消勾选“启用丰富的客户端视觉体验”，阴影应该会消失。

# python - 鼻子测试的错误？使用 autospec=True 添加新案例将需要 15 秒

> ID：15257964
> 
> 赞同：1
> 
> 时间：2013-03-06T21:01:49.620
> 
> 标签：python, unit-testing, nosetests

[http://lists.idyll.org/pipermail/testing-in-python/2013-March/005467.html](http://lists.idyll.org/pipermail/testing-in-python/2013-March/005467.html)

我昨天发了这个。我并不是要仓促复制。但我想尽快解决这个问题。同时我会测试各个测试模块。此外，通常而言，stackoverflow 的用户数比邮件列表多。

这是回购： [https ://bitbucket.org/yeukhon/bitbucket-python-api/src/18ddb36b9c7c7297398a6e97b889ddfc9b5e5ae8/tests/small?at=default](https://bitbucket.org/yeukhon/bitbucket-python-api/src/18ddb36b9c7c7297398a6e97b889ddfc9b5e5ae8/tests/small?at=default)

我有一个基本单元测试类`base.py`。对于`test_bitbucket.py`，我从基本单元测试类继承。我想添加新的测试用例和类`test_bitbucket.py`在这样做时，我发现了性能问题。

我`nosetests`在测试/小范围内运行，我得到了这些混合结果

```
Ran 18 tests in 14.523s        - autospec=True and test_account_creation
exists

Ran 18 tests in 0.621s         - autospec=False and test_account_creation exists

Ran 17 tests in 1.081s         - autospec=True and test_account_creation is
commented out

Ran 17 tests in 0.090s         - autospec=False, and test_account_creation
commented out 
```

我知道 requests 是一个很大的库，但是性能的影响是疯狂的，分别从 1.1s 到 14.5s 有和没有新的测试类。

有趣的是，如果我们`test_bitbucket.py`单独运行。

```
(bbpy)yeukhon at yeukhon-P5E-VM-DO:~/hg/bitbucket-python-api/tests/small$
nosetests test_bitbucket.py
...
----------------------------------------------------------------------
Ran 3 tests in 0.090s

OK 
```

开启/不开启 autospec 几乎相同。

任何想法？我对nosetests内部的了解不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:46:59.207

这是一种猜测，因为我不知道您的请求代码做了什么......

模拟[*autospec*](http://www.voidspace.org.uk/python/mock/helpers.html#auto-speccing)[参数](http://www.voidspace.org.uk/python/mock/helpers.html#auto-speccing)用于创建与模拟对象具有相同签名的模拟[。](http://www.voidspace.org.uk/python/mock/helpers.html#auto-speccing)*为了设置它，[create_autospec() 函数](http://www.voidspace.org.uk/python/mock/helpers.html#mock.create_autospec)必须对被替换的对象进行一些严肃的递归内省。我猜这个过程对于您的请求库来说很慢。*

 *首先要考虑的是为什么要进行自动检测？您是否担心对模拟对象的调用没有正确的签名？这是一个合理的防范措施，但我认为这不值得被罚 15 秒！

仅对部分请求进行自动指定是否可行？例如：

```
cls.req_pt = patch(cls.mod_name + '.requests')
cls.requests = cls.req_pt.start()

cls.rim_pt = patch(cls.mod_name + '.requests.really_important_method', autospec=True)
cls.rim = cls.req_pt.start() 
```

要尝试的另一件事是`instance=True`在补丁构造函数中设置：

```
cls.req_pt = patch(cls.mod_name + '.requests', autospec=True, instance=True)
cls.requests = cls.req_pt.start() 
```

从我对 mock.py 的阅读来看，这似乎应该限制对 create_autospec() 的递归调用。当然，它**会**改变模拟的行为，所以我会仔细测试它以确保它符合您的期望。*

# ruby-on-rails - 使用 Rails 不显眼的 javascript 为列表中的每个元素呈现部分内容

> ID：15257965
> 
> 赞同：0
> 
> 时间：2013-03-06T21:01:50.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, unobtrusive-javascript

我的控制器返回一个用户列表并呈现一个 javascript 文件（不显眼的 javascript）。我想遍历该用户列表并将每个用户的部分呈现到 div 中。我有以下代码：

看法：

```
<div id="searched-users-div"></div> 
```

从控制器返回的 .js 文件

```
$('#searched-users-div').html(
    "<%= 
        if @searched_users and @searched_users.length > 0
            @searched_users.each do |user|
                escape_javascript(render(:partial => "shared/user_block", :locals => { :user => user }))
            end
        end
    %>"); 
```

将其打印到 div：

```
[#<User id: 1, name:...>] 
```

这似乎不起作用。它似乎只是在 div 内将数组打印为纯文本，没有 html 或任何内容。有没有办法遍历 @searched_users 数组并为每个数组呈现一个部分？

或者我应该只创建一个接受 searched_users 数组的新部分，并在其中循环遍历它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T21:11:45.733

删除嵌入 ruby​​ 标记前后的引号（`"<%=`并且`%>"`应该是`<%=`and `%>`）。并使用`map`with`join`连接多个渲染：

```
$('#searched-users-div').html(
    <%= j(if @searched_users
            @searched_users.map do |user|
              render(:partial => "shared/user_block", :locals => { :user => user })
            end.join("\n")
          else
            ''
          end) %>); 
```

# arrays - AS3 在不知道其索引的情况下从 Array 中间移除对象

> ID：15257969
> 
> 赞同：0
> 
> 时间：2013-03-06T21:02:07.077
> 
> 标签：arrays, actionscript-3

我有以下代码。在 onClientClose 方法中，如果它已关闭，我想从 _clientSockets 数组中删除 _socketServicer 实例。如果我不知道它的索引，如何引用数组中的 _socketServicer 实例？

```
public function connectHandler(event:ServerSocketConnectEvent):void {                            _socketServicer=new SocketService(event.socket, this,log);
            _socketServicer.addEventListener(Event.CLOSE, onClientClose);
            _clientSockets.push(_socketServicer); //maintain a reference to prevent premature garbage collection
        }

        private function onClientClose(event:Event):void {
            //Nullify references to closed sockets
            for each (var servicer:SocketService in _clientSockets) {
                if (servicer.closed)
                    servicer=null;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:08:35.307

您可以使用[`.indexOf()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#indexOf%28%29)：

```
clientSockets[ clientSockets.indexOf(servicer) ]; 
```

# r - 为什么长度函数在 R 中不能正确工作？

> ID：15257972
> 
> 赞同：3
> 
> 时间：2013-03-06T21:02:24.927
> 
> 标签：r

以下 R 代码给出了小型车。但是长度函数返回 6 而不是 13。这是为什么呢？

```
> fuel.frame[fuel.frame$Type=="Small",]            

            row.names Weight  Disp. Mileage     Fuel  Type
1      Eagle.Summit.4     30   0.97      33 3.030303 Small
2       Ford.Escort.4     28 114.00      33 3.030303 Small
3      Ford.Festiva.4     23   0.81      37 2.702703 Small
4       Honda.Civic.4     27   0.91      32 3.125000 Small
5     Mazda.Protege.4     29 113.00      32 3.125000 Small
6    Mercury.Tracer.4     27   0.97      26 3.846154 Small
7     Nissan.Sentra.4     27   0.97      33 3.030303 Small
8    Pontiac.LeMans.4     28   0.98      28 3.571429 Small
9     Subaru.Loyale.4     27 109.00      25 4.000000 Small
10     Subaru.Justy.3     24   0.73      34 2.941176 Small
11   Toyota.Corolla.4     28   0.97      29 3.448276 Small
12    Toyota.Tercel.4     25   0.89      35 2.857143 Small
13 Volkswagen.Jetta.4     28 109.00      26 3.846154 Small

> length(fuel.frame[fuel.frame$Type=="Small",])

[1] 6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T21:03:53.483

`length`在这种情况下给出数据框中的列数. 您可以改为使用`nrow`or`ncol`来分别获取行数或列数：

```
nrow(fuel.frame[fuel.frame$Type=="Small",]) 
```

另一个使用 iris 数据集的例子：

```
> d = head(iris)
> d
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa
> nrow(d)
[1] 6
> ncol(d)
[1] 5
> dim(d)
[1] 6 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T21:08:08.977

我认为对你得到你的结果做一些解释可能会有所帮助。你问的是 data.frame 的长度而不是向量。由于 data.frame 有 6 列可以解释您的结果。

这特别要求向量：

```
length(fuel.frame$Type[fuel.frame$Type=="Small"]) 
```

这也是：

```
length(fuel.frame[fuel.frame$Type=="Small",][,1]) 
```

或使用`nrow`而不是`length`如已经建议的那样。

# perl - AA 和丹麦排序规则是什么？

> ID：15257974
> 
> 赞同：2
> 
> 时间：2013-03-06T21:02:36.613
> 
> 标签：perl, multilingual, collation

我有以下 Perl 脚本，旨在以丹麦语显示排序规则。

```
#!/usr/local/ActivePerl-5.16/bin/perl

use 5.014_001;
use utf8;
use Unicode::Collate;
use strict;
use warnings;
use Carp;
use Data::Dump;
use Encode qw( encode_utf8 );
use Unicode::Collate::Locale;

binmode STDOUT, ':encoding(UTF-8)';

my @words =("AAI Document Type", "Apple", "Zebra");

my $coll = Unicode::Collate::Locale->new(locale => "da");

my @result = $coll->sort(@words);

foreach my $item (@result){
print $item, "\n";
} 
```

它输出

```
Apple
Zebra
AAI Document Type 
```

为什么“AAI 文档类型”会走到最后？似乎有一些关于“AA”的东西触发了这种行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:37:39.943

`AA`在丹麦语中被视为单个字母，也写为`Å`.

详情[在这里](http://en.wikipedia.org/wiki/Danish_and_Norwegian_alphabet#History)。

显然，在 like 的缩写中`AAI`，将`AA`as 视为`Å`不合适（它实际上是两个`A`字符）。我想避免这种情况的方法是使用不同的排序规则。

# android - Logcat 显示“正在关闭 VM”

> ID：15257976
> 
> 赞同：4
> 
> 时间：2013-03-06T21:02:39.490
> 
> 标签：android, sockets, android-logcat

我正在尝试连接到服务器并打印响应。
奇怪的是，当我单击活动中启动连接的按钮时，
它会立即强制关闭。
查看后`logcat`，我看到的是 VM 正在关闭。
我确实看到似乎有人看到了和我类似的问题：
[Android 中的 logcat 显示只是关闭了 VM？](https://stackoverflow.com/questions/13579284/the-logcat-in-android-shows-simply-shutting-down-the-vm)
不幸的是，我认为这个问题并没有真正得到解答，这让我很困惑。

堆栈跟踪：

```
03-06 20:12:47.012: I/System.out(2757): I'm in main
03-06 20:12:48.092: D/gralloc_goldfish(2757): Emulator without GPU emulation detected.
03-06 20:13:03.462: I/System.out(2757): I'm at quote viewer
03-06 20:13:04.291: I/Choreographer(2757): Skipped 32 frames!  The application may be doing too much work on its main thread.
03-06 20:13:09.881: D/AndroidRuntime(2757): Shutting down VM
03-06 20:13:09.881: W/dalvikvm(2757): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-06 20:13:09.901: D/dalvikvm(2757): GC_CONCURRENT freed 130K, 9% free 2652K/2888K, paused 80ms+5ms, total 222ms
03-06 20:13:09.941: E/AndroidRuntime(2757): FATAL EXCEPTION: main
03-06 20:13:09.941: E/AndroidRuntime(2757): java.lang.IllegalStateException: Could not execute method of the activity 
```

第 3 行（“我在报价查看器”）是我在 QuoteViewerActivity 中的部分，其中我有一个按钮，按下时连接到服务器。
下面的 QuoteViewerActivity 代码：

```
package com.pheno.networkprogrammingiphenoexercise;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

import java.io.BufferedReader;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

public class QuoteViewerActivity extends Activity {
    private String mHost = "ota.iambic.com";
    private int mPort = 17;
    private TextView mQuote1, mQuote2, mQuote3;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        System.out.println("I'm at quote viewer");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_quote_viewer);
        mQuote1 = (TextView)findViewById(R.id.quote1);
        mQuote2 = (TextView)findViewById(R.id.quote2);
        mQuote3 = (TextView)findViewById(R.id.quote3);
    }

    public void showQuotes(View clickedButton) {

        try {
            TextView[] quoteArray = {mQuote1, mQuote2, mQuote3};
            for(int i = 0; i < 3; i++) {
                Socket socket = new Socket(mHost, mPort);
                System.out.println("Get Socket");
                BufferedReader in = SocketUtils.getReader(socket);
                String quoteResult = in.readLine();
                System.out.println(quoteResult);
                quoteArray[i].setText(quoteResult);
                socket.close();
            }
        } catch(UnknownHostException uhe) {
            mQuote1.setText("Unknown host: " + mHost);
            //uhe.printStackTrace();
            Log.e("pheno", "What happened", uhe);
        } catch(IOException ioe) {
            mQuote1.setText("IOException: " + ioe);
            Log.e("pheno", "What happened", ioe);
        }
    }
} 
```

任何帮助或建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:16:58.557

我不能确定为什么模拟器会显示这个*确切的*错误，但我确实知道你正在做的事情在 4.0 之前的设备（和模拟器）中非常不受欢迎，并且通常在 4.0+ 设备中被禁止。也就是说，您应该始终在单独的线程上进行任何网络调用。正确的方法是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

这些对象非常丑陋，但也是确保您不占用 UI 线程的最佳方式。UI 线程是你的`showQuotes`方法当前正在运行的线程，Android 期望这个线程只做一些简短的事情。如果它开始排队太多事件，Android 4.0+ 将使应用程序崩溃。我认为在 4.0 之前它似乎只是被冻结了（我猜这基本上正是你想要它做的事情），但我不会指望它。

所以，对于 AsyncTask，你可以这样写：

```
AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>()
{
String someData = "";

@Override
protected Void doInBackground(Void... unused)
{
    // Here, do your networking stuff, but don't access
    // UI elements (such as whatever.setText).

    someData = getStuffFromSocketsBlahBlah();

    // This method is called from a different (non-UI thread) automatically
    // shortly after you call task.execute()
}

@Override
protected void onPostExecute(Void unused)
{
    // This will get called from the main (UI thread)  shortly after doInBackground returns.
    // Here it is okay to access UI elements but not to do any serious work
    // or blocking network calls (such as socket.read, etc.)

    someTextView.setText(someData);
}

};

task.execute(null, null, null); 
```

你必须做这样的事情很糟糕，因为与编写桌面应用程序相比它是违反直觉的，但问题是Android必须同时运行多个应用程序并且能够在任何时候快速挂起你的应用程序另一个应用程序出现在前台（这允许 Android 执行“多任务”而不会耗尽电池电量），这就是为什么您的 UI 线程总是或多或少地可用于传入事件的原因。

# javascript - this.fireEvent 不工作 extjs3

> ID：15257978
> 
> 赞同：1
> 
> 时间：2013-03-06T21:02:46.560
> 
> 标签：javascript, extjs, extjs3

我正在使用 extjs 3 构建自己的课程（许可证问题）

```
Ext.ux.MyClass = Ext.extend(Ext.Container, {

       initComponent: function() {       
                this.button = new Ext.Button({
                                       scope:this,
                                       text:'my button', 
                                       handler: function() {
                                                     alert(0);
                                                     this.fireEvent('myevent');
                                       }
                });

                this.addEvents('myevent');
       }    
});

//in the code:

var obj = new Ext.ux.MyClass(...);

obj.on('myevent', function () {alert(1);}); 
```

事件未触发代码未给出错误我可以看到 Alert(0) 但不是 Alert(1)；

我尝试了监听器，但也没有工作，this.fireEvent 返回 true。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:30:21.117

您使用的是哪个版本的 ExtJS 3？3.0、3.1 还是 3.4？

如果它是 3.4，那么它似乎对我有用。我添加了一些额外的代码只是为了让按钮呈现，但对我来说似乎没问题。

我使用的最终代码是：

```
Ext.onReady(function(){

    Ext.ux.MyClass = Ext.extend(Ext.Container, {
        initComponent: function() {
            this.button = new Ext.Button(
            {
                renderTo: document.body,
                scope:this,
                text:'my button', 
                handler: function() {
                    alert(0);
                    this.fireEvent('myevent');
                }
            });

            this.addEvents('myevent');
        }

    });

    var obj = new Ext.ux.MyClass();

    obj.on('myevent', function () {alert(1);});
}); 
```

在这里查看 jsfiddle：http: [//jsfiddle.net/J9YcL/](http://jsfiddle.net/J9YcL/)

如果这有什么不同，我正在 Chrome 中运行。

# ms-access - 使用vba更改access 2007中的字段名称

> ID：15257985
> 
> 赞同：1
> 
> 时间：2013-03-06T21:03:10.427
> 
> 标签：ms-access, vba

我每月从外部公司收到数据，需要将字段名称更改为序号。示例合同 11 15 17 到 1 2 3\. 我正在尝试使用以下代码，但收到一个错误，我无法在“fld.Name = (n) + 1”处多次定义该字段。我该如何纠正？

```
Function ChangeFieldName()

Dim db As DAO.Database
Dim tbl As DAO.TableDef
Dim fld As DAO.Field
Dim n As Integer

Set db = CurrentDb
Set tbl = db.TableDefs("tdf1")

On Error Resume Next

n = 0
For Each fld In tbl.Fields
    fld.Name = (n) + 1
Next fld

Set fld = Nothing
Set tbl = Nothing
Set db = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:10:49.247

该代码尝试将每个字段重命名为`n + 1`，但由于`n`从未递增，它实际上尝试将每个字段重命名为`1`。以下更改*可能*会满足您的需求。

```
n = 1
For Each fld In tbl.Fields
    fld.Name = n
    n = n + 1
Next fld 
```

但是，使用该方法还应考虑其他一些问题。`For Each`循环遍历基于 的字段`fld.OrdinalPosition`。如果您的编号字段名称未按您期望的顺序定义，您将遇到问题。例如，这些字段按`OrdinalPostion`顺序排列：11；15; 2\. 在这种情况下，11 将被重命名为 1，但代码在尝试将 15 重命名为 2 时会抛出错误。

此外，该代码将尝试将*每个*字段重命名为一个数字。如果表只包含编号的字段名称，那可能不是问题。但是，如果该表还包含您希望保留的其他字段名称，那么您还有更多工作要做。

一个小问题`fld.Name`是文本类型。当您尝试将字段重命名为数字时，Access 实际上使用数字的等效字符串。这可能很好，但我更愿意自己将数字显式转换为字符串。

```
fld.Name = CStr(n) 
```

最后请重新考虑这个...

```
On Error Resume Next 
```

这指示 Access 静默忽略所有错误。我认为您应该摆脱它并添加适当的错误处理程序代码块。

# php - PHP/MYSQL 选择单个对象返回列名而不是值

> ID：15257992
> 
> 赞同：0
> 
> 时间：2013-03-06T21:03:26.473
> 
> 标签：php, mysql

我不知道为什么，但是当我运行这个脚本时，它只显示`$row[0]`列而不是我放入的任何其他列。

```
$mlsnum = mysql_real_escape_string($_GET['mlsnum']);

$link = mysql_connect('localhost','user','password');
mysql_select_db('singleprop', $link);

$query = "SELECT 'MSTLISTPRC' FROM jos_mls WHERE MSTMLSNO = '".$mlsnum."';";

$return = mysql_query($query);

$result = mysql_fetch_array($return);

$price = $result['MSTLISTPRC'];

echo $price; 
```

它不是回显符合条件的列的值，而是回显`WHERE`列名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:04:09.040

去掉单引号。它们表示文字字符串。

```
SELECT MSTLISTPRC ... 
```

> 字符串是由单引号 (“<code>'”) 或双引号 (“<code>”) 字符括起来的字节或字符序列。示例：
> 
> `'a string'`
> 
> `"another string"`

[文档](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

您还需要使用关联数组来调用列名：

```
$result = mysql_fetch_assoc($return); 
```

另外，请停止使用`mysql_`功能。它们不再被维护[并被正式弃用](http://j.mp/XqV7Lp)。看到[**红框**](http://j.mp/Te9zIL)了吗？改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:04:33.373

删除 'MSTLISTPRC' 周围的引号 = 问题已解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:05:46.477

对于选择列，您不使用引号。我们使用“`”字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:07:39.230

更改 $query = "SELECT 'MSTLISTPRC' FROM jos_mls WHERE MSTMLSNO = '".$mlsnum."';"; 到 $query = "SELECT `MSTLISTPRC` FROM jos_mls WHERE MSTMLSNO = '".$mlsnum."';";

# iphone - 设备上的 iPhone 分段错误和崩溃

> ID：15257997
> 
> 赞同：0
> 
> 时间：2013-03-06T21:03:48.483
> 
> 标签：iphone, ios, xcode, ipad, fault

我最新的 iPhone/iPad 应用程序在模拟器上运行良好。在 iPad 上，它可以正常工作一段时间，但随后崩溃。控制台显示这是由于我假设由于向僵尸发送消息而发生的分段错误。由于这仅在实际设备上发生，因此我无法使用 NSZombieEnabled/Instruments。

在实际设备上没有仪器/僵尸检测的情况下，我有哪些调试选项？

代码审查 - 已完成，没有发现任何明显的东西 发表评论并跟进僵尸的缩小范围 - 进行中

我还可以做些什么？任何建议将不胜感激。

我确实浏览了过去的问题，但没有太多选择。如果这个问题已经得到解答，我提前道歉，*但*如果你能分享链接或提供指导，我将不胜感激。

RS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:08:04.360

查看这篇文章以了解如何打开 Zombie 对象。

[https://stackoverflow.com/a/4917557/613156](https://stackoverflow.com/a/4917557/613156)

您可以通过诊断面板将其打开，它将在您的设备上运行。

# android - 通过 Google Checkout API 以美元检索海外订单金额

> ID：15257999
> 
> 赞同：1
> 
> 时间：2013-03-06T21:04:05.607
> 
> 标签：android, google-play, google-checkout, sales-analytics, store-reports

我在 Google Play 上支付了 Android 应用程序。我正在使用 Google Checkout XML API（特别是通知历史）来检索订单详细信息。我在美国，我的一些客户不在。对于海外订单，Google Checkout API 以本国货币返回订单金额，而不是美元，也不提供汇率。

另一方面，在 Google Checkout 网站上，我可以在订单详细信息中看到美元收入金额，它与最终付款完美匹配。他们以本国货币显示订单总额，然后是费用，然后是我的利润——首先是本国货币，然后是美元。

恐怕如果我使用本国货币并采用其中一种公开可用的汇率，美元金额将与谷歌的金额不符。并且不可能与最终支付达成和解。

我已将通知 API 版本设置为 2.5。我正在检索订单的所有可能通知。我看不到美元金额，也没有汇率。

没有抓取 Google Checkout 网络用户界面，有什么想法吗？

[链接：其他人承认问题。](http://blog.rectangularsoftware.com/2013/01/improved-order-reconciliation-in-appmonger-2-3-1/)

编辑：实际上，我将 Checkout 屏幕抓取作为临时解决方案。然后他们推出了新的钱包商家页面，它对抓取变得不那么友好了:(