# StackOverflow 问答 15768000-15768999

# scala - sbt 组装安装

> ID：15768003
> 
> 赞同：6
> 
> 时间：2013-04-02T15:24:55.677
> 
> 标签：scala, sbt, sbt-assembly

我正在尝试使用 sbt-assembly，但无法安装它。

我从自述文件中逐字添加了 project/plugins.sbt 和依赖项：

> addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.8.7")

然后我添加了一个 build.sbt 文件，其中包含自述文件所说的内容：

> import AssemblyKeys._ // 把它放在文件的顶部
> 
> 装配设置

启动 sbt 时出现此错误：

[错误] /Users/me/git/stest/project/Build.scala:29: not found: value assemblySettings [error] .settings(assemblySettings: _*) [error] ^ [error] 发现一个错误 [error] ( compile:compile) 编译失败

我回去尝试了另一个我在另一个 stackoverflow 帖子中看到的替代方法：

> 序列（装配设置：_*）

同样的问题。有任何想法吗？（斯卡拉 2.10.0）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:25:00.583

插件的作者在这里。你说你把 build.sbt 说的完全一样，但错误来自 build.scala。*.sbt 文件会自动导入一些东西，因此您必须为 build.scala 手动导入它们。

有关完整配置，请参阅[https://github.com/eed3si9n/sbt-assembly-full-config-sample/blob/master/project/builds.scala](https://github.com/eed3si9n/sbt-assembly-full-config-sample/blob/master/project/builds.scala)。

# java - 打包自述文件和许可证文件

> ID：15768004
> 
> 赞同：0
> 
> 时间：2013-04-02T15:24:58.167
> 
> 标签：java, ant

我有一个 ANT 构建脚本，它会自动从我的代码创建一个 jar，然后压缩它加上 java 文档、源文件、外部库依赖项、许可证和自述文件，然后将创建的 zip 推送到网站目录供用户下载。

现在，我的许可证文件是字面意思`LICENSE`和自述文件是`README`，都没有文件扩展名。

当文件没有扩展名并且不知道如何处理它时，Windows 机器似乎吓坏了。更糟糕的是，我注意到 Windows 上的内置程序记事本不尊重我的文件的行尾字符，所以它都混杂成一行。Notepad++ 和其他的没有问题，在 linux 和 mac 上这个问题真的不存在。

把我们带到这个问题上。出于法律和/或可用性原因，这些文件名的建议是什么 - 扩展名（例如 .txt 或 .md 或 .rtf）或无扩展名。我不确定“普通乔”用户无法轻松打开许可证的合法性，因此可能会声称它没有合理地显示或提供（因此可能会发生违反许可证的情况）。然而，我发现不得不改变我的常规项目结构（以及我如何习惯事物）只是为了让 windows 表现得像它应该的那样令人沮丧。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:37:24.620

如果您打算为您的许可证和自述文件添加扩展名，我建议您`txt`，因为它们是纯文本文件（我想）。

看看[Windows vx。Unix 文件结尾](http://www.cs.toronto.edu/~krueger/csc209h/tut/line-endings.html)。一些编辑器足够聪明，可以检测到它。记事本不是。

**更新**

有关如何为您的软件添加许可证的信息，请参阅如何[为您自己的软件使用 GNU 许可证](http://www.gnu.org/licenses/gpl-howto.html)获得一些提示。

# javascript - 如何使用 jquery 每个函数迭代 websql 结果集？

> ID：15768006
> 
> 赞同：2
> 
> 时间：2013-04-02T15:24:59.270
> 
> 标签：javascript, jquery, html

我正在使用 for 循环迭代 websql 结果集。我想将结果集迭代到 Jquery 每个函数中。

```
 WebDB.transaction(function (transaction) {
   transaction.executeSql(SELECT Name FROM User, [],function(transaction,result){
            for(var i=0;i<result.rows.length;i++)
            {
               alert(result.rows.item(i).Name);
            }
     });
 }); 
```

有可能变成那样吗？

# ruby-on-rails - 在 Rails 中使用 has_many 和 belongs_to 创建关联

> ID：15768007
> 
> 赞同：1
> 
> 时间：2013-04-02T15:24:59.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我知道已经有很多关于此的主题，但我找不到任何我正在尝试做的事情。我只是在学习 Rails，虽然我知道这可能是一个非常简单的解决方法，但我很难过。

我正在创建一个“时间轴”网站。我设置了用户帐户，用户可以创建时间线。但是，我需要做的是将多个时间线“事件”（要进入时间线的项目，这些模型称为事件）与每个时间线（其模型称为 Timeline_Object）相关联。更简单地说——一个用户有多个时间线，一个时间线有多个事件。

问题是我无法使用时间线正确设置事件。我认为用户和时间线之间的关联设置正确，但我不完全确定如何找出问题所在。这是我的模型：

```
class User < ActiveRecord::Base

  has_many :timeline_objects

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, 
  :remember_me, :user_name

end

class TimelineObject < ActiveRecord::Base

    belongs_to :user

    attr_accessible :title, :user_id

    has_many :events    

end

class Event < ActiveRecord::Base
    belongs_to :timeline_object

    attr_accessible :date, :description, :time, :title, :image, 
    :image_width, :image_height, :timeline_objects
    has_attached_file :image, :styles => { :large => "500x500>", :medium => "400x400#", :thumb => "100x100>" }
    after_post_process :save_image_dimensions

    validates :title, presence: true
    validates :image, presence: true
    validates :time, presence: true
    validates :date, presence: true 

  def save_image_dimensions
    geo = Paperclip::Geometry.from_file(image.queued_for_write[:original])
    self.image_width = geo.width
    self.image_height = geo.height
  end
end 
```

在运行一些迁移以在数据库中设置密钥之后，我的架构如下所示：

```
ActiveRecord::Schema.define(:version => 20130402144923) do

  create_table "events", :force => true do |t|
    t.string   "title"
    t.string   "description"
    t.string   "date"
    t.string   "time"
    t.datetime "created_at",         :null => false
    t.datetime "updated_at",         :null => false
    t.string   "image_file_name"
    t.string   "image_content_type"
    t.integer  "image_file_size"
    t.datetime "image_updated_at"
    t.integer  "image_height"
    t.integer  "image_width"
    t.integer  "timeline_objects"
  end

  add_index "events", ["timeline_objects"], :name => "index_events_on_timeline_objects"

  create_table "timeline_objects", :force => true do |t|
    t.string   "title"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "user_id"
  end

  add_index "timeline_objects", ["user_id"], :name => "index_timeline_objects_on_user_id"

  create_table "users", :force => true do |t|
    t.string   "user_name"
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true

end 
```

当我去显示时间线时（此时应该显示所有事件），我尝试通过它们循环

```
<% @timeline_object.events.each do |event| %> 
```

那行代码会产生这个错误：

```
SQLite3::SQLException: no such column: events.timeline_object_id: SELECT "events".* FROM "events"  WHERE "events"."timeline_object_id" = 4 
```

所以我意识到这意味着我在我的数据库中遗漏了一些东西，但我不确定我应该更改/添加什么以使其全部正常工作。

如果您需要任何其他信息/代码，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:31:17.473

在您的事件模式中，您有：

```
t.integer  "timeline_objects" 
```

但是，它应该是：

```
t.integer  "timeline_object_id" 
```

运行一个新的迁移来修复它：

```
rename_column :events, :timeline_objects, :timeline_object_id 
```

由于每个事件都属于一个 TimelineObject，因此它需要一个列来标识与其关联的对象的 id。

# java - Java中的字节缓冲区

> ID：15768008
> 
> 赞同：0
> 
> 时间：2013-04-02T15:25:02.310
> 
> 标签：java, udp, bytebuffer

我通过 UDP 发送长号码。

```
 LinkedQueue Q = new LinkedQueue<ByteBuffer>();
    while (this._run) {
    udp_socket.receive(packet);
      if (packet.getLength() > 0) {
       ByteBuffer bb = ByteBuffer.wrap(buf, 0, packet.getLength());     
               Q.add(bb);
          }
    } 
```

//udp 关闭。我从队列中删除数据，但所有 ByteBuffers 都具有相同的值。

```
 while(!Q.isEmpty){
      ByteBuffer b = Q.remove();
      b.getLong();//same value
    } 
```

为什么我收到相同的价值？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:33:29.510

您的字节缓冲区是否仅包含一个`long`？

可能不是，我的猜测是你放太多了，只放了一个`long`。这就是为什么它在第一个`sizeof(long)`字节上为您提供相同的值。

您需要做的是继续调用 .getLong() 直到到达缓冲区的末尾。

[请参阅文档。](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#getLong%28%29)

# java - 奇怪的现象：Java/Swing 操作导致本地库 (JNA) 中的访问冲突

> ID：15768011
> 
> 赞同：2
> 
> 时间：2013-04-02T15:25:05.517
> 
> 标签：java, swing, access-violation, jna

问候开发者！

由于 SO 几乎总是对我的编程问题有所帮助，因此我决定注册并尝试解决我最近遇到的问题。这真是一个我和我的同事都无法弄清楚的奇怪现象。很抱歉，我无法提供工作示例，但该项目的分解方式很复杂，并且需要特定的硬件才能正常运行。所以我会尽力解释。

我们项目的基础是一个本地库（在本例中为 32 位 Windows C-DLL），用于通过 Java 应用程序 ( [JNA](http://jna.java.net/ "JNA 主页") ) 访问项目特定的硬件。目的是在 Swing UI 中管理和显示硬件的专有文件系统（通过 USB 连接）。这对我们来说是一个非常常见的项目配置，因为我们在 Java 应用程序中集成了很多本机库和驱动程序。

**摘要：**用于枚举设备的单元测试工作正常。本机库的一个模块分配内存并用结构填充它，每个结构都包含连接设备的信息。这不是好的做法，但由于我们对这部分没有任何影响，所以我们必须接受它。我在 Java/JNA 中映射了这个结构，调用原生函数，将结构内容复制到 Java 传输类并在控制台中打印。工作得很好。

现在，如果在枚举设备时有激活的 UI 操作，本机库会因访问冲突而崩溃。即使这个 UI 操作与库无关。JNA 错误消息显示一个 EXCEPTION_ACCESS_VIOLATION (0xc0000005)，SO 研究显示为无效/空内存。

有没有人遇到过这样的问题？我们当然从来没有这样做过。我花了几天时间将错误源缩小到这部分代码。涉及本机库时，调试并不容易。是否可能存在JVM内存并发问题？由于本机库自己分配内存而 JVM 对此一无所知 - 所以 JVM 会尝试在已使用的内存中为新的 Swing 组件分配内存？

**代码：** 以下代码片段来自我的单元测试，尽可能分解。预期的顺序很明显：从根节点中删除节点，加载连接的设备并将这些设备添加为新节点。此代码因访问冲突而崩溃，但不是在本机调用时崩溃 - 只要我访问树组件，它就会崩溃。

```
 public void loadDevices(){
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                rootNode.removeAllChildren();
                rootNode.add(new LoadingNode());
                tree.expandPath(new TreePath(rootNode));
            }
        });

        final List<Device> devices = lib.loadDevices(); // wrapped native call

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                rootNode.removeAllChildren();
                if(!devices.isEmpty()){
                    for (Device dev : devices ) {
                        DevNode node = new DevNode(dev);
                        rootNode.add(node);
                    }
                }
            }
         });
     } 
```

注意：*DevNode*不包含任何原生数据，每个原生结构的内容都被复制到一个 Java 传输对象中。GC 在尝试移动对象数据时应该不会出现问题，因为所有非托管代码都在*lib#loadDevices()*方法中本地处理。

当我完全删除对*SwingUtilities*的调用并将生成的设备信息打印到控制台而不是创建节点时，这部分工作正常。一旦我尝试访问*JTree*或*TreeModel*成员，代码就会崩溃。如果我在调用*SwingUtitilies#invokeLater()*或在同一个线程中执行此操作，它不会发生。

我知道这是一个非常具体的问题，几乎没有人会感兴趣（这使得在 SO/Google 中搜索解决方案变得非常困难）。但也许我很幸运，有人已经遇到过这个问题。

这么长的
xander

**编辑：**最初这段代码被包装在一个工作线程中，导致相同的结果。这只是我的单元测试的一个片段。

**编辑2：**对不起，我似乎没有让自己足够清楚或忘记在这里提到一些重要的事情。对树或其模型的访问不一定与本机库有关。再看一下代码：第一次调用 invokeLater 只是从树中删除节点。即使我删除了对 invokeLater 的第二次调用，本机库也会崩溃！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:35:37.663

```
final List<Device> devices = lib.loadDevices(); 
```

*   （假设您的代码使用 JNA 能够单独返回每个节点或`List<Device>'s`在结束时返回一次集合）应该从工作线程调用，例如 Runnable#Thread 或 SwingWorker

*   工作线程的所有输出都直接添加到 DefaultTreeModel（或通过创建新的 MutableTreeNode）应包装到 invokeLater

*   如果不发布[SSCCE](http://sscce.org/)（`List<Device>'s`可能是 USB 端口列表），不知道会发生什么，简短、可运行、可编译，仅关于 JTree，是模型和 JNI/JNA ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:28:37.240

在我了解到这一点之前，我在 JTree 上遇到了很多困难：

在 JTree 上，不应编辑节点本身，而应使用 DefaultTreeModel 上提供的方法：

```
setRoot(TreeNode root) 
removeNodeFromParent(MutableTreeNode node) 
insertNodeInto(MutableTreeNode newChild, MutableTreeNode parent, int index) 
```

编辑节点本身可能（迟早会）导致奇怪的行为。

这当然是在您使用 DefaultTreeModel 和 MutableTreeNode 时。我强烈建议这样做，因为我已经看到了 TreeModel 的许多错误实现。

# c# - 从 C# 中的另一个表单更新组合框

> ID：15768012
> 
> 赞同：1
> 
> 时间：2013-04-02T15:25:06.743
> 
> 标签：c#

我想从另一个表单更新主表单的组合框这是我的主表单组合框更新代码，它位于 form_load

```
public void main_Load(object sender, EventArgs e)
{
    try
    {
        OleDbDataAdapter db = new OleDbDataAdapter("select * from category", con);
        ds_cmbGroup.Clear();
        cmbGroup.DataSource = null;
        db.Fill(ds_cmbGroup, "t1");
        cmbGroup.DisplayMember = "catname";
        cmbGroup.ValueMember = "catcode";
        cmbGroup.DataSource = ds_cmbGroup.Tables["t1"];
    }
    catch (Exception ex)
    {
    }
} 
```

当我以自己的形式调用此方法时，它可以正确运行。这是调用它的代码：

```
main_Load(this, null); 
```

但是当我从另一种形式调用它时，（尽管数据集更新没有问题）它不会改变组合框（cmbGroup）的内容，这是从第二种形式加载 main_Load 方法的代码：

```
main Main = new main();
Main.main_Load(this, null); 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:30:12.527

问题是您没有引用主表单的当前实例，而是创建了一个新实例，在第二种表单上尝试：

```
 Main  obj = (Main)Application.OpenForms["Main"]; 
```

然后`obj`用来指代`main Form`

# c++ - 使用 find 搜索字符串中是否存在空格

> ID：15768015
> 
> 赞同：1
> 
> 时间：2013-04-02T15:25:27.033
> 
> 标签：c++

我有以下代码

```
std::string t = "11:05:47"  (No spaces inside) 
```

我想检查它是否有一个空白空间（它没有）所以我正在使用

```
 unsigned present = t.find(" ");
       if (present!=std::string::npos)
       {
             //Ends up in here
       } 
```

代码似乎认为字符串中有一个空格关于我可能做错的任何建议

以下是目前的结果 = 4294967295 t = 11:15:36

是否有可以帮助我做到这一点的 boost 库？有什么建议么 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T15:36:08.810

不要使用`unsigned`. [`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)返回 a `std::string::size_type`，通常是`size_t`.

```
std::string::size_type present = t.find(" ");
if (present!=std::string::npos) {

} 
```

正如其他人所指出的，您可以使用 C++11`auto`让编译器推断出`present`应该是什么类型：

```
auto present = t.find(" "); 
```

# html - CSS：元素的大小在 Chrome 中以一种非常奇怪的方式变化

> ID：15768017
> 
> 赞同：0
> 
> 时间：2013-04-02T15:25:32.657
> 
> 标签：html, css, google-chrome

我遇到了仅在 Google Chrome 中才注意到的奇怪问题：通过开发人员工具检查元素大小（图像、内表）时会发生变化。

**重现步骤：**

1.  打开 Chrome 开发者工具。
2.  开放元素
3.  从元素层次结构中选择包含表 table#inner 的任何元素

**结果**：元素在每次选择时都会增加大小（意味着元素），直到达到指定的大小

**链接的问题**：table#inner 必须更改自己的大小，因为 table#outer td 元素的大小，但它没有

代码示例： **page.jsp**

```
<div id="outer_div">
<table id="outer">
  <tr>
    <td>
    </td>
    <td>
      <table id="inner">
        ......
      </table>
    </td>
  </tr>
</table>
</div> 
```

**样式.css**

```
#inner {
  width: auto; // or 100%;
} 
```

与：300px；工作正常）

PS 在 Firefox 中一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:06:02.003

如果你的意思是#inner 应该占据#outer 的大小，那么，

```
#inner {
    min-width:100%;
} 
```

或者

```
#inner {
    width:100%;
} 
```

# c# - DLL 位于不同目录时如何添加项目引用

> ID：15768018
> 
> 赞同：2
> 
> 时间：2013-04-02T15:25:33.793
> 
> 标签：c#, dll, visual-studio-2012

我正在设置一个引用 DLL 的项目，当最终安装应用程序时，这些 DLL 将位于与我正在构建的库不同的文件夹中。这意味着应用程序目录将包含所有可执行文件，并且在子文件夹中将是我现在正在构建的库（实际上很多）。

我的问题是，当我指向新库项目中的引用时，这似乎强制假设引用将出现在与库相同的目录中，这意味着我之前提到的子文件夹。但实际上，并非如此。它将被安装到主应用程序文件夹中，因为它是应用程序本身的一部分。

所以现在可能很清楚我在说什么。如何在项目中进行引用，导致库在执行时在层次结构中查找文件一个文件夹？我通过手动编辑 *.proj 文件来完成此操作，但这看起来很混乱，并且是潜在错误的根源。更不用说我必须做大约160个。这是很多工作。

是否有一种纯粹的 Visual Studio 界面方式来指向参考？顺便说一句，我不能依赖 GAC 或任何类似的东西。我必须指出我自己的参考资料集合，这些参考资料只是在我从中提取的文件夹中。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:40:53.480

您可以在初始化期间订阅 AssemblyResolve（exe 的 Main/Web 应用程序的 Application_Start 等）并在您想要的任何路径中手动搜索，如下所示：

```
 AppDomain.CurrentDomain.AssemblyResolve += (s, e) =>
    {
        var basePath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        var files = Directory.GetFiles(basePath, e.Name + ".dll", SearchOption.AllDirectories);
        return files.Length == 1 ? Assembly.LoadFile(files[0]) : null;
    }; 
```

# c# - IIS 7 - 身份验证

> ID：15768025
> 
> 赞同：1
> 
> 时间：2013-04-02T15:25:46.640
> 
> 标签：c#, asp.net, authentication, iis

我有一个关于 IIS 7 身份验证的问题。我希望我的应用程序显示 Windows 用户名。可能吗？如果是我怎么能做到这一点？

```
<identity impersonate="false"/>
<authorization>
<deny users="?"/>
</authorization>
<authentication mode="Windows"/> 
```

要显示我使用的用户名：

```
Label1.Text = (Environment.UserName);
Label2.Text = (Page.User.Identity.Name);
Label3.Text =(Request.LogonUserIdentity.Name.Substring(Request.LogonUserIdentity.Name.LastIndexOf(@"\") + 1));
Label4.Text = (System.Security.Principal.WindowsIdentity.GetCurrent().Name);
Label5.Text = (System.Web.HttpContext.Current.User.Identity.Name);
Label6.Text = Request.ServerVariables["LOGON_USER"]; 
```

以上都行不通...

我的 IIS 设置：启用 Asp.net 模拟，启用 Windows 身份验证...

有人看到问题了吗？

非常感谢和问候！

已编辑：我忘了补充一点，我不希望用户被提示输入任何凭据。我希望用户名自动显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:34:25.647

查看[asp.net 中身份 impersonate="true" 时如何获取 Windows 用户名？](https://stackoverflow.com/questions/1267071/how-to-get-windows-user-name-when-identity-impersonate-true-in-asp-net)和[IIS7：像在 IIS6 中一样设置集成 Windows 身份验证](https://stackoverflow.com/questions/436169/iis7-setup-integrated-windows-authentication-like-in-iis6)。

基本上，仔细检查以确保您的应用程序配置正确，并仔细检查您是否在 IIS 中安装了 Windows 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:14:51.193

为此，必须正确配置浏览器和服务器。请注意，Windows 身份验证不是标准的 HTTP 身份验证方法，它特定于 IE 和 IIS（Firefox 也可以通过额外设置支持它），因此您必须确保您的 IE 浏览器配置为将域用户凭据发送到IIS 服务器。你的服务器配置看起来不错，模仿是真的。检查您的IE浏览器，确保您在IE中输入的http地址不是internet域的一部分，它必须是intranet域的一部分，只有在intranet域中IE和IIS才能支持集成Windows身份验证

# java - 从一组数字中生成 3 个唯一数字

> ID：15768042
> 
> 赞同：-4
> 
> 时间：2013-04-02T15:26:57.530
> 
> 标签：java, random

我正在做一个项目，使游戏板的三个空间与其他空间不同（+1、+2、-1）我需要将这些值添加到存储在 ArrayList 索引处的变量中。我可以找到一些东西来生成索引的数字，但我不知道如何确保它们处于唯一索引处。（它不能将所有三个值放在一个空格中）

如何在 0 到 16 范围内创建三个唯一的随机索引？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:33:01.340

将所有可能的数字放在一个列表中 - 将它们随机排列并取前三个：

```
public class Test {
  public void test() {
    System.out.println("Hello");
    List<Integer> numbers = new ArrayList<Integer>(Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16));
    Collections.shuffle(numbers);
    System.out.println(numbers);
  }

  public static void main(String args[]) {
    new Test().test();
  }
} 
```

打印

```
[5, 12, 4, 7, 2, 11, 14, 9, 3, 0, 15, 8, 1, 10, 13, 16, 6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:28:42.760

试试这个从给定数字列表中生成唯一的随机数。

1.  生成所有可能值的列表。
2.  使用 Collections 中的 shuffle 方法对其进行随机播放`Collections.shuffle(list);`
3.  通过在每个步骤中迭代获取项目。

# javascript - 使用 AJAX 加载 GZIP JSON 文件

> ID：15768047
> 
> 赞同：3
> 
> 时间：2013-04-02T15:27:00.057
> 
> 标签：javascript, ajax, json, gzip

我使用以下算法压缩了 json 文件（来自： [java gzip can't keep original file's extension name](https://stackoverflow.com/questions/7564138/java-gzip-cant-keep-original-files-extension-name)）

```
private static boolean compress(String inputFileName, String targetFileName){
         boolean compressResult=true;
         int BUFFER = 1024*4;
         byte[] B_ARRAY = new byte[BUFFER]; 
         FileInputStream fins=null;
         FileOutputStream fout=null;
         GZIPOutputStream zout=null;
         try{
             File srcFile=new File(inputFileName);
             fins=new FileInputStream (srcFile);
             File tatgetFile=new File(targetFileName);
             fout = new FileOutputStream(tatgetFile);
             zout = new GZIPOutputStream(fout);
             int number = 0; 
             while((number = fins.read(B_ARRAY, 0, BUFFER)) != -1){
                 zout.write(B_ARRAY, 0, number);  
             }
         }catch(Exception e){
             e.printStackTrace();
             compressResult=false;
         }finally{
             try {
                zout.close();
                fout.close();
                fins.close();
            } catch (IOException e) {
                e.printStackTrace();
                compressResult=false;
            }
         }
         return compressResult;
    } 
```

我正在返回 JSON

```
response.setHeader("Content-Type", "application/json");
response.setHeader("Content-Encoding", "gzip");
response.setHeader("Vary", "Accept-Encoding");
response.setContentType("application/json");
response.setHeader("Content-Disposition","gzip");
response.sendRedirect(filePathurl); 
```

或者

```
request.getRequestDispatcher(filePathurl).forward(request, response); 
```

尝试使用 AJAX 代码访问 JSON 对象，如下所示：

```
$.ajax({
    type : 'GET',
    url : url,
    headers : {'Accept-Encoding' : 'gzip'},
    dataType : 'text', 
```

我看到的输出是二进制数据，而不是解压缩的 JSON 字符串。关于如何使这项工作的任何建议？请注意，我使用的浏览器（IE、Chrome、FF）支持 gzip，因为我所有由 Apache gzip 压缩的静态内容都正确呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:33:16.657

通过使用：

```
response.sendRedirect(filePathurl); 
```

您正在创建另一个请求/响应。您定义的标头不再与实际发送的文件相关联。

您需要加载文件并将其流式传输到相同的响应中，而不是发送重定向。

使用 Fiddler 或其他请求查看器查看此内容。

# asp.net-mvc - 编辑器模板未选择值正确值

> ID：15768054
> 
> 赞同：1
> 
> 时间：2013-04-02T15:27:30.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, kendo-ui, mvc-editor-templates

我有一个剑道网格，每行都有一个自定义编辑按钮。当用户单击编辑按钮时，将打开一个模式窗口，用户可以在其中编辑信息并保存更改。

我添加了一个编辑器模板来显示状态缩写的下拉列表。

StatesEditor.cshtml

```
@(Html.Kendo().DropDownList()
.Name("State") 
.DataValueField("StateID") 
.DataTextField("ShortName") 
.BindTo((System.Collections.IEnumerable)ViewData["states"])) 
```

在我打开模态窗口之前，它会填充到我的控制器中：

```
public ActionResult OpenEditor([DataSourceRequest] DataSourceRequest request, int? addressId)
    {
        var address = db.Address.Where(x => x.AddressId == addressId).FirstOrDefault();
        // code where I convert the address to an AddressMetadata
        // ...
        // ...

        ViewData["states"] = ACore.Methods.ViewDataPopulation.PopuldateStates();

        return PartialView("~/Views/System/Addresses/AddressEditorPopup.cshtml", addr);
    } 
```

在我看来我有

```
@Html.EditorFor(model => model.State) 
```

这是我的模型：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;

namespace ACore.Models
{
    [MetadataType(typeof(AddressMetadata))]
    public partial class Address
    {
    }

    public class AddressMetadata
    {   
        public int AddressID { get; set; }

        public string Street1 { get; set; }
        public string Street2 { get; set; }
        public string City { get; set; }

        [UIHint("StatesEditor")]
        public State State { get; set; }

        public string ZipCode { get; set; }
    }
} 
```

这是我的国家模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace ACore.Models
{
    public class State
    {
        public int Id { get; set; }
        public string ShortName { get; set; }
    }
} 
```

下拉列表正在填充状态列表，但它设置为“AK”，即列表中的第一个状态。我将我的视图传递给状态为 ID 为 41 且 ShortName 为“SC”的状态模型的模型。

如何将我的下拉列表设置为我传入的状态？

更新：

我不知道这是否是正确的方法，但这就是我修复它的方法。只需添加 SelectedIndex 即可解决问题，但我在 DropDownList 上方添加了代码，因此我可以在未传入 Id 的其他地方使用此编辑器。

```
@model ACore.Models.State
@{
    var modelId = 0;
}
@if (Model != null)
{
    modelId = Model.Id - 1;
}

@(Html.Kendo().DropDownList()
    .Name("State")
    .DataValueField("StateID")
    .DataTextField("ShortName")
    .SelectedIndex(modelId)
    .BindTo((System.Collections.IEnumerable)ViewData["states"])
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:51:26.407

我已经在上面更新的评论中回答了我的问题。我仍然想知道这是否是推荐的方法。

```
@model ACore.Models.State
@{
    var modelId = 0;
}
@if (Model != null)
{
    modelId = Model.Id - 1;
}

@(Html.Kendo().DropDownList()
    .Name("State")
    .DataValueField("StateID")
    .DataTextField("ShortName")
    .SelectedIndex(modelId)
    .BindTo((System.Collections.IEnumerable)ViewData["states"])
) 
```

# linq - Linq 查询具有两个分组的子查询，一个是平均值，一个是最大值

> ID：15768055
> 
> 赞同：0
> 
> 时间：2013-04-02T15:27:36.483
> 
> 标签：linq

我有一个父表 parentTable，它在 childTable 中可能有也可能没有子级。我希望获得任何给定父母的孩子的平均完成百分比，以及他们存在的孩子的 MAX（到期）（日期）。我的 SQL 是这样的：

```
SELECT parentRecord_id, assigned_to,
    (SELECT avg(complete) 
    FROM childTable
    WHERE parent_id = parentRecord_id
    and deleted IS NULL
    GROUP BY parent_id),
    (SELECT max(due) 
    FROM childTable
    WHERE parent_id = parentRecord_id
    and deleted IS NULL
    GROUP BY parent_id
    )
FROM parentTable s
WHERE s.deleted IS NULL and assigned_to IS NOT NULL 
```

我的结果集为我提供了平均值和最大值的正确值或空值的行。在这种情况下，我必须进行后续处理，因此如果我正在通过 DataTable 行执行 foreach，我可以忽略空值。但是，我试图在 Linq 中执行此操作，但无法弄清楚如何避免 System.InvalidOperationException 在 Linq 尝试将 null 转换为 double 的情况下。这是我到目前为止所尝试的。

```
var query8 = from s in db.parentTable
    where s.deleted == null
    select new
        {
            ID = s.assigned_to,
            Average =
                ((from t in db.childTable
                      where t.parent_id == s.strategy_id
                      group t by new { t.parent_id } into g
                      select new
                          {
                             a0 = g.Average(f0 => f0.complete )
                          }).FirstOrDefault().a0) 
                       };
foreach (var itm in query8)
    {
        Console.WriteLine(String.Format("User id:{0}, Average: {1}", itm.ID, itm.Average));
    } 
```

这是我的问题。如何让查询处理那些平均完成或最大到期（日期）为空的返回行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:52:17.107

感谢所有回复的人。

我无法通过基本查询解决空匿名问题，但是向 childTable 添加连接消除了空值。

另一种解决方案是在 g.DefaultIfEmpty 子句中使用 from x 。

```
var query8 =
    from st in db.tableParent
    select new { Ass = st.assigned_to ,
        Avg = 
        (from ta in db.tableChild
         group ta by ta.parent_id into g
         from x in g.DefaultIfEmpty()
         select g.Average((f0=>f0.complete))).FirstOrDefault()
     }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:36:06.193

您可以过滤掉值为空的记录（通过另一个条件），或者如果您想包含它们，请执行以下操作：

```
a0 = g.Average(f0 => f0.complete.HasValue? f0.complete: 0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:36:30.437

在调用 Average/Max 之前，我会将列表转换为可为空的 double，如下所示：

```
var query8 = 
    from s in db.parentTable          
    where s.deleted == null
    select new
    {
      ID = s.assigned_to,
      Average =
        from t in db.childTable
        where t.parent_id == s.strategy_id
        group t by t.parent_id into g
        select g.Cast<double?>().Average(f0 => f0.complete)
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:38:31.623

假设 complete 是 Nullable，您应该能够：

```
var query8 = from s in db.parentTable
    where s.deleted == null
    select new
        {
            ID = s.assigned_to,
            Average =
                ((from t in db.childTable
                      where t.parent_id == s.strategy_id
                         && s.complete.HasValue()
                      group t by new { t.parent_id } into g
                      select new
                          {
                             a0 = g.Average(f0 => f0.complete )
                          }).FirstOrDefault().a0) 
                       }; 
```

# sql - 使用 sql 查询指定存储过程参数

> ID：15768059
> 
> 赞同：0
> 
> 时间：2013-04-02T15:27:50.947
> 
> 标签：sql, sql-server-2008, select, stored-procedures

让我先说我对 SQL 不是很了解，这使得寻找答案变得困难。我可能使用了错误的“措辞”。

给定以下查询以执行存储过程：

```
USE MyDB
SET NOCOUNT ON
    EXECUTE dbo.adm_ExecuteProcedure
        @installationID           = 12345,
        @monthOf                  = '03/01/2013'
GO 
```

可以用`select`语句动态查找12345吗？以下不起作用，但这是我想要做的。

```
USE MyDB
SET NOCOUNT ON
    EXECUTE dbo.adm_ExecuteProcedure
        @installationID           = (select id from installs where name = 'foo'),
        @monthOf                  = '03/01/2013'
GO 
```

我无权编辑存储过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:30:22.283

```
declare @id int;

select  @id = id 
from    installs 
where   name = 'foo';

EXECUTE dbo.adm_ExecuteProcedure
    @installationID           = @id,
    @monthOf                  = '03/01/2013'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:29:55.673

好吧，你可以这样做，但是在调用存储过程的代码中......甚至在存储过程的任何查询中，在这种情况下你根本不需要参数......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:30:50.337

尝试将其存储在变量中（语法取决于您的数据库系统）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:31:30.350

您可以做的是声明变量并从您的选择语句中选择该变量中的installationId，然后在执行存储过程时使用该变量。懂了没。

# drupal - Drupal 6 - 电子邮件通讯模块 - 附加节点/故事内容，邮件收集发送到访问被拒绝页面

> ID：15768061
> 
> 赞同：1
> 
> 时间：2013-04-02T15:28:03.523
> 
> 标签：drupal, drupal-nodes

我很难在我的 Drupal 6 站点中使用这个模块。由于我下载并安装了所需的模块，例如：

**电子邮件通讯**，

退回的电子邮件，

递送，

HTML 到文本，

身份哈希，

出版物，

日程，

订阅会员，

订阅，

订阅 Silverlight，

模板，

我在解决一些问题时遇到了问题，电子通讯发送的邮件中包含适当的令牌信息，但它没有附加任何节点或故事信息。我已确保选择了内容类型中的发布选项（**默认选中**）并遵循 readme.txt 中描述的说明，但没有任何反应。我只收到带有令牌信息的测试电子邮件。还有**其他事情**，当我使用收集邮件选项块设置块时，会按预期显示，但是当我在提交后输入特定的电子邮件地址时，页面会重新加载以访问被拒绝的页面。

我更像是设计师而不是开发人员，所以我可以使用一些帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:33:55.637

使用此模块[drupal.org/project/simplenews_content_selection](http://drupal.org/project/simplenews_content_selection)选择特定内容，您可以选择任意数量的内容

要自动发送，请使用以下模块

[http://drupal.org/project/simplenews_scheduler](http://drupal.org/project/simplenews_scheduler)下载并安装模块，选择合适的设置，见下图

![在此处输入图像描述](https://i.stack.imgur.com/vKNaa.png)

# vb.net - vb.net 文本框/richtextbox GetPreferredSize 不起作用

> ID：15768062
> 
> 赞同：0
> 
> 时间：2013-04-02T15:28:06.870
> 
> 标签：vb.net, winforms, richtextbox

我有一个 winforms RichTextBox 和 TextBox（两者都尝试）。当我输入文本时，我希望该框垂直变大（或垂直变小），以便所有文本都可见。

我在 RichTextBox TextChanged 事件中使用以下代码：

```
RTB.Height = RTB.GetPreferredSize(New Size(RTB.Width, 0)).Height 
```

此代码在大多数情况下都有效，除了一个 - 当您输入一个大于框宽度的单词（不带空格）时。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:26:03.013

已经在 Stackoverflow 上找到了以下答案！只需要更好地搜索...

```
Private Sub rtb_ContentsResized(ByVal sender As Object, ByVal e As System.Windows.Forms.ContentsResizedEventArgs) Handles txtQuestion.ContentsResized
    Dim h = e.NewRectangle.Height, w = e.NewRectangle.Width
    h = Math.Max(h, sender.Font.Height)
    h = Math.Min(h, Me.ClientSize.Height - 10 - sender.Top)
    h += sender.Height - sender.ClientSize.Height + 1
    sender.Height = h
End Sub 
```

从

[在 RichTextBox 控件中测量字符串](https://stackoverflow.com/questions/2364970/measure-string-inside-richtextbox-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:10:57.903

尝试使用 RTB 最小和最大尺寸属性。

听起来像设置最大宽度可能会解决您的问题。

# openstack - Cloud Foundry - 在虚拟机中安装 Micro Bosh (OpenStack)

> ID：15768064
> 
> 赞同：0
> 
> 时间：2013-04-02T15:28:12.203
> 
> 标签：openstack, cloud-foundry, cf-bosh

我已按照[http://cloudfoundry.github.com/docs/running/deploying-cf/openstack/install_microbosh_openstack.html](http://cloudfoundry.github.com/docs/running/deploying-cf/openstack/install_microbosh_openstack.html)上的说明在 VM 中安装 micro bosh。

我对 micro_bosh.yml 有点困惑：

```
name: microbosh-openstack

env:
 bosh:
    password: $6$u/dxDdk4Z4Q3$MRHBPQRsU83i18FRB6CdLX0KdZtT2ZZV7BLXLFwa5tyVZbWp72v2wp.ytmY3KyBZzmdkPgx9D3j3oHaDZxe6F.

 level: DEBUG

network:
 name: default
 type: dynamic
 label: private
 ip: 192.168.22.34

resources:
 persistent_disk: 4096
 cloud_properties:
    instance_type: m1.small

cloud:
  plugin: openstack
  properties:
   openstack:
       auth_url: http://10.0.0.2:5000/v2.0/tokens
       username: admin
       api_key: f00bar
       tenant: admin
       default_key_name: admin-keypair
       default_security_groups: ["default"]
       private_key: /root/.ssh/admin-keypair.pem 
```

api_key 是做什么用的？我不明白这个键的含义。和默认键名？

有人可以更好地解释这个配置选项吗？

谢谢

布鲁诺

**编辑**

这个问题的答案可以在这里找到： [https://github.com/drnic/bosh-getting-started/blob/master/create-a-bosh/creating-a-micro-bosh-from-stemcell-openstack。 MD](https://github.com/drnic/bosh-getting-started/blob/master/create-a-bosh/creating-a-micro-bosh-from-stemcell-openstack.md)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:51:06.520

```
http://10.0.0.2:5000/v2.0/tokens 
```

可能是指 Keystone 服务 API。

此 API 向您验证 OpenStack 的 keystone 身份服务。所有 REST API 服务都在目录服务中进行编目。此外，所有 OpenStack 都依赖于 keystone 来验证所有 API 查询。

对我来说，对 bosh 属性“api_key”一无所知需要更好的上下文。

通常，OpenStack 在其自己的 API 身份验证概念中不需要 API 密钥。

更多关于 openstack api 身份验证的信息：

[http://docs.openstack.org/api/quick-start/content/index.html#Getting-Credentials-a00665](http://docs.openstack.org/api/quick-start/content/index.html#Getting-Credentials-a00665)

然而，有一个与 EC2 密钥相关的 API 密钥的概念。这些可以使用此查询生成：

```
keystone ec2-credentials-create 
```

我的猜测是这就是它所需要的。

那里有更多选择：

凭证可以在使用 nova-manage project zipfile 命令为您的 Openstack 项目生成的 novarc 文件中。这也可以从地平线界面获得。

或者，它可以引用提供者特定的 API 密钥，例如机架空间（我对此表示怀疑）：

[http://docs.rackspace.com/servers/api/v2/cs-devguide/content/curl_auth.html](http://docs.rackspace.com/servers/api/v2/cs-devguide/content/curl_auth.html)

'default_key_name' 可能是指之前在 openstack 中注册的密钥对的名称。这将是一个可以在实例运行时注入到图像中的密钥对。它应该对应于 .pem 文件名。密钥需要对您在配置中选择的用户和租户可用。

在此处查看密钥对创建/使用示例：

[http://docs.openstack.org/developer/nova/runnova/managing.instances.html](http://docs.openstack.org/developer/nova/runnova/managing.instances.html)

尽力而为的人。希望能给你你所需要的。

# python - 在 Python 上阅读钢琴音符

> ID：15768066
> 
> 赞同：9
> 
> 时间：2013-04-02T15:28:19.137
> 
> 标签：python, keyboard, pygame, midi, piano

我想用我的 RPi 收听在 Debian 上运行的带有我的 midi 输出设备（钢琴）的端口。我查看了 pygame.midi，我设法监听了端口，但不知何故无法提取所有 midi 信息。请在下面找到代码[编辑的代码片段]

编辑：已修复，非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-18T09:21:57.390

首先，您需要找出您的键盘在 pygame 中的设备 ID。我写了这个小函数来找出：

```
import pygame.midi

def print_devices():
    for n in range(pygame.midi.get_count()):
        print (n,pygame.midi.get_device_info(n))

if __name__ == '__main__':
    pygame.midi.init()
    print_devices() 
```

它看起来像这样：

```
(0, ('MMSystem', 'Microsoft MIDI Mapper', 0, 1, 0))
(1, ('MMSystem', '6- Saffire 6USB', 1, 0, 0))
(2, ('MMSystem', 'MK-249C USB MIDI keyboard', 1, 0, 0))
(3, ('MMSystem', 'Microsoft GS Wavetable Synth', 0, 1, 0)) 
```

从 pygame 手册中，您可以了解到此信息元组中的第一个 One 将此设备确定为合适的输入设备。所以让我们在一个无限循环中从中读取一些数据：

```
def readInput(input_device):
    while True:
        if input_device.poll():
            event = input_device.read(1)
            print (event)

if __name__ == '__main__':
    pygame.midi.init()
    my_input = pygame.midi.Input(2) #only in my case the id is 2
    readInput(my_input) 
```

这表明：

```
[[[144, 24, 120, 0], 1321]] 
```

我们有一个包含 2 个项目的列表：

*   midi数据列表和
*   时间戳

第二个值是您感兴趣的值。因此我们将其打印为注释：

```
def number_to_note(number):
    notes = ['c', 'c#', 'd', 'd#', 'e', 'f', 'f#', 'g', 'g#', 'a', 'a#', 'b']
    return notes[number%12]

def readInput(input_device):
    while True:
        if input_device.poll():
            event = input_device.read(1)[0]
            data = event[0]
            timestamp = event[1]
            note_number = data[1]
            velocity = data[2]
            print (number_to_note(note_number), velocity) 
```

我希望这会有所帮助。这是我的第一个答案，我希望它不会太长。:)

# shell - 如果 VPN 断开连接，则停止整个流量 - 禁用网络（Shell 脚本）

> ID：15768078
> 
> 赞同：1
> 
> 时间：2013-04-02T15:28:53.043
> 
> 标签：shell, connection, vpn

你好 stackoverflow 成员，我需要一个 Shell 脚本来检查 VPN 连接是否被更改。如果它被更改（vpn 断开连接），网络将被禁用并且没有数据可以出去。因此不会有IP泄漏。我已经检查了很多站点，并且发现了一个有趣的 python 脚本。这里是：

```
#!/usr/bin/env python

#
# licensed under GNU General Public License version 2
#

import sys
import traceback

import gobject

import dbus
import dbus.decorators
import dbus.mainloop.glib

import os

def catchall_signal_handler(*args, **kwargs):
    print ("Caught signal: "+ kwargs['member'])
    if args[0] >= 6: #vpn disconnect (6) or failure (7)
        print ("Killing internet connection...")
    #set eth0 to your network adapter
        os.system('ifconfig eth0 down')
    #if you are using python 3 no raw_input() exists so use input()
    raw_input("Press Enter to enable your network adapter...")
    #set eth0 to your network adapter
    os.system('ifconfig eth0 up')
     print ("Your network adapter has been enabled.")   

if __name__ == '__main__':
    dbus.mainloop.glib.DBusGMainLoop(set_as_default=True)
    print ("Monitoring your VPN connection...")
    bus = dbus.SystemBus()

    #lets make a catchall
    bus.add_signal_receiver(catchall_signal_handler, signal_name='VpnStateChanged', interface_keyword='dbus_interface', member_keyword='member')

    loop = gobject.MainLoop()
    loop.run() 
```

问题是，它似乎只工作了 1 次。这真的很奇怪。所以，作为专家，我问你问题可能出在哪里。如果有人也有另一个更优化的脚本，我将不胜感激！

提前致谢！

亲切的问候，

# java - 在 jython 中使用 mapi 发送邮件

> ID：15768085
> 
> 赞同：2
> 
> 时间：2013-04-02T15:29:10.460
> 
> 标签：java, python, winapi, jython, mapi

我正在尝试`pywin`在 `jython`应用程序中使用 Outlook 发送带有附件的电子邮件。

Pywin 需要一个 win32 环境，但由于我们在 java 中并且函数 sys.platform 返回“java1.6”，所以一切都无法正常工作。

我应该使用`JMapi`而不是`pywin`吗？如果答案是肯定的，我在哪里可以找到一些例子？谢谢你。

抱歉编辑：我们正在使用`python 2.5`, `Java 1.6`，而操作系统是`Windows XP SP 3`.

哎呀，我是个白痴。我不能使用 smtplib，因为用户希望在发送电子邮件之前查看 Outlook 中的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:11:40.987

那时您需要使用`mailto:`超链接和[Desktop.mail(URI)](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#mail%28java.net.URI%29)方法来调用正确的电子邮件编辑器。根据[Wikiepdia](http://en.wikipedia.org/wiki/Mailto)，URL 方案允许您添加主题正文等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:41:23.933

一个简单的谷歌搜索提供了[这个](http://www.jython.org/docs/_sources/library/email-examples.txt)和[这个](http://www.jython.org/docs/library/smtplib.html)......我不认为这些例子是 pywin 或 JMapi 特定的......

# mercurialeclipse - Mercurial 在我的路径中找不到编辑器

> ID：15768086
> 
> 赞同：0
> 
> 时间：2013-04-02T15:29:10.773
> 
> 标签：mercurialeclipse

我快疯了。。同样的错误，在我的路径中找不到编辑器记事本，使用 Eclipse 使用 mercurial。但在我的路径中有记事本的目录。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:44:33.537

这可能与以下内容相同：[Mercurial Eclipse 错误](https://stackoverflow.com/questions/4989660/mercurial-eclipse-error)

通常这是由您的 PATH 环境变量以某种方式损坏引起的，可以通过对其进行单个字符更改，按确定，然后恢复更改来修复。

# sql - 使用字符串数据类型的日期值执行日期范围的可能性有多大？

> ID：15768091
> 
> 赞同：0
> 
> 时间：2013-04-02T15:29:21.873
> 
> 标签：sql, sql-server

我被迫使用存储为字符串的日期值。

例如，

```
Fieldname: claimsDate
data Type: nvarchar 
```

这些值以 的格式存储`mmddyy`。

`E.G; 022413`.

我已经设法使用以下查询将其转换为 2013 年 2 月 24 日。

```
select (left(claimsdate,2)  + '/' + substring(claimsdate,3,2) + '/' + case when cast(right(claimsdate,2) as int) >= 70 then '19' else '20' end + right(claimsdate,2)) claimsdate
from tblTable 
```

现在的问题是我们无法使用该代码执行日期范围检查。

我试过这样使用它：

```
select (left(claimsdate,2)  + '/' + substring(claimsdate,3,2) + '/' + case when cast(right(claimsdate,2) as int) >= 70 then '19' else '20' end + right(claimsdate,2)) claimsdate
from tblTable 
where (left(claimsdate,2)  + '/' + substring(claimsdate,3,2) + '/' + case when cast(right(claimsdate,2) as int) >= 70 then '19' else '20' end + right(claimsdate,2))
between '03/01/2007' and '12/31/2007' 
```

这没有给我我正在寻找的范围。它只是任意显示日期。

是否可以操作用于日期范围检查的代码？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:31:58.967

在 sql 中使用日期时间转换。此链接向您展示完整示例[http://www.sqlusa.com/bestpractices/datetimeconversion/](http://www.sqlusa.com/bestpractices/datetimeconversion/)

```
select (left(claimsdate,2)  + '/' + substring(claimsdate,3,2) + '/' + case when cast(right(claimsdate,2) as int) >= 70 then '19' else '20' end + right(claimsdate,2)) claimsdate
from tblTable 
where  cast(((case when cast(right(claimsdate,2) as int) >= 70 then '19' else '20' end + right(claimsdate,2) + '-' + left(claimsdate,2)  + '-' + substring(claimsdate,3,2))) as datetime)
between @fromDate and @endDate 
```

使用 @fromDate 和 @endDate 是日期时间变量

我希望这能满足你的需要

# php - PHP PDF 函数

> ID：15768092
> 
> 赞同：3
> 
> 时间：2013-04-02T15:29:22.797
> 
> 标签：php, pdf

如何使用[PHP](http://en.wikipedia.org/wiki/PHP)生成 PDF 文件。**php.net**说需要安装**pdflib**`new_pdf ()`才能使用.

但是，**pdflib**不是免费的，精简版不允许用于商业用途。我很困惑。我原以为 PHP 会有一些内置功能来创建 PDF 文件。

由于我不想使用**fpdf**等库，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:33:15.637

您应该尝试以下方法。它们是一些用于[PDF文档的有用](http://en.wikipedia.org/wiki/Portable_Document_Format)[PHP](http://en.wikipedia.org/wiki/PHP)库：

*   [TCPDF](http://www.tcpdf.org/)

*   [mPDF](http://www.mpdf1.com/mpdf/)

*   [DOM PDF](https://github.com/dompdf/dompdf)

请参阅 Stack Overflow 问题*[Generate PDF from HTML PHP](https://stackoverflow.com/a/14444879/1435800)* and *[How to generate PDF files with PHP?](https://stackoverflow.com/questions/323269/how-to-generate-pdfs-with-php?rq=1)* .

这是您感觉更舒适的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:35:34.040

如果您不想使用 pdflib，则必须使用另一个第三方库。

Zend 提供了一个作为[Zend 框架](http://en.wikipedia.org/wiki/Zend_Framework)的一部分。但我们用于各种目的的是：

*   [DomPDF](https://github.com/dompdf/dompdf)非常适合获取[HTML](http://en.wikipedia.org/wiki/HTML)和生成 PDF 文件
*   [tcPDF](http://www.tcpdf.org/)是一种更加基于类的绘图风格方法，但它工作得很好并且提供了大量的控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:36:00.113

PHP 没有任何内置函数，因此您必须使用库。**[TCPDF](http://www.tcpdf.org/)**是最简单的模块，而且是免费的。

# c# - 如何禁用单个类的默认 Castle 拦截器？

> ID：15768095
> 
> 赞同：3
> 
> 时间：2013-04-02T15:29:39.620
> 
> 标签：c#, castle-windsor, interceptor, castle

在我正在开发的应用程序中，我们使用 Castle Windsor 的一些 AOP 工具，主要用于记录方法进入/退出点和时间，以进行调试/性能分析。这很好用，除了因为我们在整个容器中使用默认拦截器，它适用于所有内容，包括 Logging 类，因此日志最终会被解释它如何进入和退出日志写入方法的消息堵塞。

在其他类上，我可以使用自定义 IInterceptorSelector 以及`Intercept`类上的属性来覆盖默认值，但是查看 Castle 文档我看不到任何等效`DoNotIntercept`类型的属性。我为我的日志记录类创建了一个 NullInterceptorSelector，它返回一个空列表，但这似乎是一种疯狂的解决方法，我相信必须有更好的方法来做到这一点 - 任何人都可以建议如何？

编辑：拦截器列表也是累积的，所以我的 NullInterceptorSelector 实际上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T16:03:05.113

简单的解决方案显然是不使用拦截器连接设施......但如果由于某种原因这不可能，您可以像您自己建议的那样使用 InterceptorSelector 。

类的目的`IInterceptorSelector`是提供一个扩展点，允许代理根据每个方法选择特定的拦截器。

您的注册将如下所示：

```
container.Register(Component.For<IInterface>()
         .ImplementedBy<Component>()
         .Interceptors(InterceptorReference.ForType<LoggingInterceptor>()).SelectedWith(new ExampleInterceptionSelector()).Anywhere); 
```

的准系统实现`ExampleInterceptionSelector`如下所示：

```
public class ExampleInterceptionSelector : IInterceptorSelector
{
    public IInterceptor[] SelectInterceptors(Type type, MethodInfo method, IInterceptor[] interceptors)
    {
        return new IInterceptor[];
    }
} 
```

但更好的解决方案是不将拦截器连接到不需要它们的组件。

# php - 图像中 div 内的标签大于 div 大小

> ID：15768096
> 
> 赞同：1
> 
> 时间：2013-04-02T15:29:40.493
> 
> 标签：php, javascript, css, wordpress

嗨，我只在 wordpress 的一篇文章中遇到了问题。

标记中的标记大于 div 的实际大小。因为这个用户无法区分不同的帖子。请检查图像 ![在此处输入图像描述](https://i.stack.imgur.com/RtgYh.png)

这是您可以检查的链接。

[关联](http://bgp.shop-the-rock.ca/category/general/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:36:02.837

图像向左浮动，因此它的父 DIV“.entry-summary”需要扩展以容纳浮动元素。

为此，您需要将“溢出：隐藏”添加到“.entry-summary”。

```
.entry-summary {
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:39:56.060

你可以试试：

```
#div img{min-width:100%;height:auto} 
```

这将保持纵横比，除非你想在溢出时切断

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:50:49.547

您可以`float: left`在内容中添加一个，如下所示：

```
.entry-content, .entry-summary {
margin: 1.5em 0 0 0;
text-align: justify;
width: 735px;
float: left;
} 
```

这将导致`div`围绕其所有内容伸展:)

# r - ggplot2 和 cumsum()

> ID：15768099
> 
> 赞同：7
> 
> 时间：2013-04-02T15:29:51.260
> 
> 标签：r, ggplot2, cumsum

我有一组 UNIX 时间戳和 URI，我正在尝试绘制每个 URI 的请求的累积计数。我设法使用一个虚拟列一次为一个 URI 做到这一点：

```
x.df$count <- apply(x.df,1,function(row) 1) # Create a dummy column for cumsum
x.df <- x.df[order(x.df$time, decreasing=FALSE),] # Sort
ggplot(x.df, aes(x=time, y=cumsum(count))) + geom_line() 
```

但是，在我的情况下，这将产生大约 30 个图。

ggplot2 确实允许您将多条线绘制成一个图（我从[这里](https://stackoverflow.com/questions/3777174/plotting-two-variables-as-lines-using-ggplot2)复制了这段代码）：

```
ggplot(data=test_data_long, aes(x=date, y=value, colour=variable)) +
    geom_line() 
```

问题是，这种方式`cumsum()`会一直依赖。

有人有想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:54:07.560

这是一个测试数据，它首先使用`plyr`'s`transform`来计算累积和，然后使用该数据来绘制`ggplot2`：

```
set.seed(45)
DF <- data.frame(grp = factor(rep(1:5, each=10)), x=rep(1:10, 5))
DF <- transform(DF, y=runif(nrow(DF)))

# use plyr to calculate cumsum per group of x
require(plyr)
DF.t <- ddply(DF, .(grp), transform, cy = cumsum(y))

# plot
require(ggplot2)
ggplot(DF.t, aes(x=x, y=cy, colour=grp, group=grp)) + geom_line() 
```

![在此处输入图像描述](https://i.stack.imgur.com/Ahj68.png)

# jquery - 将jQuery函数应用于具有相同类名的多个元素？

> ID：15768103
> 
> 赞同：1
> 
> 时间：2013-04-02T15:30:00.727
> 
> 标签：jquery

我在这里有一个 jsfiddle：http: [//jsfiddle.net/biggest/3hjNc/58/](http://jsfiddle.net/biggest/3hjNc/58/)

我已经建立了一个相当不错的滚动表。但如果我有两个或更多这样的表，我构建的 jQuery 函数似乎只适用于第一个。我如何让它循环遍历每个表，而不向每个表添加任何类型的“id”。我已经尝试了“each”和“find”的各种组合，我很确定它会涉及到，以及某种`$(this)`，但我很确定我在某个地方弄乱了语法。我尝试的每一次尝试要么彻底失败，要么只适用于第一张桌子。

这可能很明显，但为了清楚起见 - 因为它是一个滚动表，它实际上由几个表组合在一起显示为一个表。 `.tablesContainer`= 一个包含所有内容的 div，可能应该是 $(this) 目标，这是我的猜测。表结构的其余部分应在上面的 jsfiddle 中看到。

这是我的所有 jquery 将所有内容放入函数然后在底部调用它们。每当函数运行`headerResize()`结束时，都会调用该函数。`tableSize()`

```
$(document).ready(function(){
/****Table Functionality****/
    /*** Gives Header Cells equal width to Body Cells ***/
    /*--------------------------------------------------*/
    var $tableBodyScrollCell = $('.tableScroller tbody tr:first td');
    var $headerA = $('.headerScroller a');
    function headerResize(){
        $tableBodyScrollCell.each(function(index){
            $headerA.eq(index).width($(this).width());
        });
    }
    /*--------------------------------------------------*/
    /*** Changes height to equal viewerPort on big tables ***/
    var viewportHeight = window.innerHeight ? window.innerHeight : $(window).height();
    var $tablesContainerWidth = $('.tablesContainer').width();
    var $tableScroll = $('.tableScroller');
    var $headerHeight = $('.headerScroller').height();
    var $tableScrollTHeight = $('.tableScroller .table').height();
    var $tableScrollTWidth = $('.tableScroller .table').width();
    var $actionScroll = $('.actionScroller');
    var $topSectionHeight = $('#topSection').height();
    var $actnScrollDefaultW = Number(100);
    function tableSize(){  //17px difference to compensate for scrollbar
        if ($tableScrollTHeight > (viewportHeight-$topSectionHeight) - $headerHeight){
            if ($tableScrollTWidth == $tablesContainerWidth){
                $tableScroll.height((viewportHeight-$topSectionHeight) - $headerHeight) - 17;
            }
            else{
                $tableScroll.height((viewportHeight-$topSectionHeight) - $headerHeight);
            }
            $actionScroll.height((viewportHeight-$topSectionHeight) - $headerHeight - 17);
            $actionScroll.width($actnScrollDefaultW);
        }
        else{
            if ($tableScrollTWidth == $tablesContainerWidth){
                //alert("tableScrollTWidth = 100%");
                $tableScroll.height($tableScrollTHeight);
            }
            else{
                $tableScroll.height($tableScrollTHeight + 17);
            }
            $actionScroll.height($tableScrollTHeight);
            $actionScroll.width($actnScrollDefaultW + 17);
        }
        if ($tableScrollTHeight > $tableScroll.height() && $tableScrollTWidth == $tablesContainerWidth){//If there is a vertical scroll but NO Horizontal scroll
            $actionScroll.height($tableScroll.height());
        }
        $('.actionHead').width($('.actionScroller').width());
        headerResize();
    }
    /*--------------------------------------------------*/
    /*** Scrolls the table Header and Fixed column ***/
    $tableScroll.scroll(function(){         
        scrollHandler('tableScroller');
    });
    function scrollHandler(scrollContainer) {
        $('.headerScroller')[0].scrollLeft = $('.tableScroller')[0].scrollLeft;
        $('.actionScroller')[0].scrollTop = $('.tableScroller')[0].scrollTop;
    }
    /*--------------------------------------------------*/
    /*** runs functions ***/
    if ($(".tablesContainer").length == 0) {
        //Do nothing!!!
    }
    else{
        tableSize();
        $(window).resize(tableSize)
    }
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:54:55.530

我还没有解决所有问题（还没有！）但发现了一些改进：

```
function scrollHandler(scrollContainer) {
    $('.headerScroller')[0].scrollLeft = $('.tableScroller')[0].scrollLeft;
    $('.actionScroller')[0].scrollTop = $('.tableScroller')[0].scrollTop;
    $('.headerScroller')[1].scrollLeft = $('.tableScroller')[1].scrollLeft;
    $('.actionScroller')[1].scrollTop = $('.tableScroller')[1].scrollTop;
} 
```

你以前只使用索引`0`，所以你只改变了第一个表，现在第二个表标题滚动。

我认为另一个问题在这里：

```
var $tableBodyScrollCell = $('.tableScroller tbody tr:first td'); 
```

我认为，`:first`它只选择了第一张桌子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:01:28.227

我想我已经把你整理好了。

您的小提琴第 8 行的选择器应为：

```
 var $tableBodyScrollCell = $('.tableScroller tbody tr:first-child td'); 
```

相关的 jQuery 文档可以在这里找到[http://api.jquery.com/first-child-selector/](http://api.jquery.com/first-child-selector/)。关键的要点是 :first 将您限制为一个 tr，而 :first-child 为每个父母提供一个。

在第 59-62 行的 scrollHandler 函数中，您需要遍历`.headerScroller`元素，例如：

```
function scrollHandler(scrollContainer) {
    $('.headerScroller').each(function(i) {
      $('.headerScroller')[i].scrollLeft = $('.tableScroller')[i].scrollLeft;
      $('.actionScroller')[i].scrollTop = $('.tableScroller')[i].scrollTop;
    });
 } 
```

# jquery - jQuery/CSS - 分段控制

> ID：15768104
> 
> 赞同：1
> 
> 时间：2013-04-02T15:30:02.020
> 
> 标签：jquery, css

我[在 Javascript 中的 Segmented Control 上](https://stackoverflow.com/questions/6702985/segmented-control-in-javascript)找到了一篇很棒的帖子，其中提到了创建分段控件的绝佳解决方案，小提琴在这里：http: [//jsfiddle.net/LdZk8/1/](http://jsfiddle.net/LdZk8/1/)

jquery 很短，非常棒：

```
$("ul.buttonGroup").click(function (event) {
    $("li", this)
    .removeClass("selected")
    .filter(event.target)
    .addClass("selected");
}); 
```

我的问题是这在 safari 和 chrome 中运行良好，但在 Firefox 中无法正确渲染。只需在 Firefox 中查看小提琴并点击运行，您就会看到。

有谁知道我该如何纠正这个？我相信它与 CSS 相关，也许 webkit 元素被忽略了，但我不确定如何为 FF 解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:31:21.997

它只在 Chrome/Safari 中运行良好，因为您包含`-webkit-`了浏览器效果，而不是`-moz-`,`ms`和一般等价物，您需要在 Firefox 和 IE 中获得相同的效果。

例如，当您包含[-webkit-box-flex](http://css-infos.net/property/-webkit-box-flex)时，您还需要包含[-moz-box-flex](https://developer.mozilla.org/en-US/docs/CSS/-moz-box-flex)以与 Firefox 兼容。

一些有用的链接：

**[Mozilla Developer](https://developer.mozilla.org/en-US/)** - 查找各种 CSS3 属性的定义/语法。

**[ColorZilla](http://www.colorzilla.com/gradient-editor/)** - 通过简单地粘贴 webkit 版本来获得其他浏览器的等效语法。

# php - 转换为 int php

> ID：15768106
> 
> 赞同：-2
> 
> 时间：2013-04-02T15:30:04.847
> 
> 标签：php, file-io, twitter, converter

我使用 php 编程从 txt 文件中获取信息，如下所示：

```
< n >1< /n >< fr >2,3,4,5,6,7,8< /fr >< fo >9,10,11,12< /fo > 
```

在标签之间`< n >` 我可以通过使用 preg_match 获得数字 1

```
$users = preg_match_all("/<".$tag.">[^<]*(.*?)<\/$tag>/si", $content, $matches,PREG_PATTERN_ORDER); 
```

所以数据存储在 $user[0] 对吗？

当我将 $user[0] 转换为整数时，它变成 0 ！！！

你能帮我解决这个问题吗

我想将其转换并插入数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:36:52.463

数据存储在多维数组`$matches`中。In`$users`将是“完整模式匹配的数量（可能为零），如果发生错误，则为 FALSE。” 请参阅文档[http://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php)

# r - 如何在 R 中替换“意外的转义字符”

> ID：15768116
> 
> 赞同：5
> 
> 时间：2013-04-02T15:30:26.673
> 
> 标签：r, facebook-graph-api, gsub, rjsonio, rjson

当我尝试从 Facebook URL 中的字符对象解析 JSON 时，出现“fromJSON(data) 中的错误：pos 130 处的意外转义字符 '\o'”。看一下这个：

```
library(RCurl)
library(rjson)
data <- getURL("https://graph.facebook.com/search?q=multishow&type=post&limit=1500", cainfo="cacert.perm")
fbData <- fromJSON(data)
Error in fromJSON(data) : unexpected escaped character '\o' at pos 130

#with RSONIO also error
> fbData <- fromJSON(data)
Erro em fromJSON(content, handler, default.size, depth, allowComments,  : 
invalid JSON input 
```

在我尝试解析 JSON 之前，有没有办法替换这个 '\o' 字符？我尝试了 gsub 但它没有用（或者我做错了什么）。

```
datafixed <- gsub('\o',' ',data)
Error: '\o' is an unrecognized escape sequence in string starting with "\o" 
```

有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:35:06.817

你需要`\`在你的模式中逃脱。

尝试

```
gsub('\\o',' ',data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T08:43:56.877

你可以做

```
fbData <- fromJSON(data,unexpected.escape = "keep") 
```

你会看到一个警告

```
Warning message:
In fromJSON(individual_page, unexpected.escape = "keep") :
unexpected escaped character '\m' at pos 10\. Keeping value. 
```

如果你愿意，你可以使用

```
suppressWarnings(fromJSON(data,unexpected.escape = "keep")) 
```

unexpected.escape ：更改了对意外转义字符的处理。处理值应该是“error”、“skip”或“keep”之一；对意外字符发出错误、跳过字符或保留字符

你可以在这里找到更多细节 - [http://cran.r-project.org/web/packages/rjson/rjson.pdf](http://cran.r-project.org/web/packages/rjson/rjson.pdf)

# facebook - Facebook 开发者帐户最佳实践

> ID：15768117
> 
> 赞同：37
> 
> 时间：2013-04-02T15:30:34.890
> 
> 标签：facebook

在我的公司，我们需要创建一个 Facebook 开发者帐户，但如果不提供实际个人帐户（即我的个人帐户或其他员工的个人帐户）的详细信息，我们似乎无法做到这一点。使用个人帐户没有多大意义（如果该人离开公司怎么办？如果帐户持有人不希望其他开发人员访问他们的个人帐户怎么办？等等）虽然我知道最高法院认为公司是那些感觉很奇怪创建一个与公司关联的假帐户的人。

在这种情况下，人们一般会怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-03T07:39:01.330

只有个人帐户才能成为 Facebook 开发者。每个开发人员都应该验证他们的个人帐户，然后将其添加为您的应用程序的开发人员或管理员。

如果有人离开您的公司，您只需将其从应用管理员/开发人员中删除即可。

两者都可以通过使用组来简化。

# docker - docker：net：没有这样的接口

> ID：15768121
> 
> 赞同：4
> 
> 时间：2013-04-02T15:30:47.347
> 
> 标签：docker

我刚刚在 Fedora 18 系统上安装了 docker：

```
Linux draco 3.8.4-202.fc18.x86_64 #1 SMP Thu Mar 21 17:02:20 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

[mike@draco docker-master]$ sudo ./docker run -i -t base /bin/bash
2013/04/02 08:24:59 net: no such interface 
```

谁能告诉我这里缺少什么？lxc 以及 lxc-libs 和 lxc-templates 已安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:44:33.260

您需要一个配置了名称的网桥`lxcbr0`。

为此，您可以运行（以 root 身份）：

```
brctl addbr lxcbr0
ifconfig lxcbr0 10.65.41.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:52:05.513

这通常意味着您没有正确设置 aufs。

有关更多信息，请参阅[https://github.com/dotcloud/docker/issues/183](https://github.com/dotcloud/docker/issues/183)。

# codeigniter - Codeigniter 库与核心类

> ID：15768122
> 
> 赞同：0
> 
> 时间：2013-04-02T15:30:50.030
> 
> 标签：codeigniter, codeigniter-2

我需要创建一些几乎所有控制器都会使用的功能。

所以我需要创建一个自定义类。现在我做这个作为核心课程吗？还是作为图书馆？这些有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:46:14.887

当我想在项目范围内更改某个核心类的某些行为时，我会使用核心类覆盖技术。一个很好的例子是在 /core/MY_Model 中使用[Jamie Rumbelow 的模型类。](https://github.com/jamierumbelow/codeigniter-base-model)

对于将在每个控制器中使用的功能，我构建了一个库来执行这些功能并自动加载它，然后根据需要从该库中调用这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:46:34.333

你想要一个库就是你正在开发一个类。对于简单的函数，创建一个助手。如果您正在开发与数据库交互的功能，请创建一个模型。

在您的应用程序文件夹中添加您的自定义助手和库。

# objective-c - 无法插入操作连接：找不到有关 XMTAppDelegate 类的任何信息

> ID：15768124
> 
> 赞同：3
> 
> 时间：2013-04-02T15:30:53.097
> 
> 标签：objective-c, xcode4.5

不久前，我使用 Xcode 为 Mac 创建了一个 RPN 计算器。我曾经使用过 builder 并且能够使用 IBOutlets 和 IBActions。现在，当我尝试添加 IBOutlet 或 IBAction 时，我收到以下消息：

```
Could not insert action connection: could not find any information about the class XMTAppDelegate 
```

我对 IBOutlets 的解决方法是自己创建它们，然后连接它们。不幸的是，这不适用于 IBActions。所以，我的问题是：如何阻止 Xcode 给我这个消息。我读过有类似问题的人提出的其他问题，但没有一个解决方案有效。我已删除派生数据文件夹。我已经重新安装了 Xcode。没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:21:36.883

尝试清理您的项目并重新启动 Xcode。
如果仍然无法连接，请按照`Utilities`Xcode 的导航视图，在该`Target membership`部分中，**取消选中并选中**复选框，它将起作用。也许您应该在取消选中后重建项目。

# android - 编辑 Tabview 背景颜色

> ID：15768125
> 
> 赞同：1
> 
> 时间：2013-04-02T15:30:53.610
> 
> 标签：android

我应该如何更改 android TabActivity 中选项卡的背景颜色这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); // Resource object to get Drawables
    final TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, ArtistsActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("artists").setIndicator("Artists",
                      res.getDrawable(R.drawable.ic_tab_artists))
                  .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, AlbumsActivity.class);
    spec = tabHost.newTabSpec("albums").setIndicator("Albums",
                      res.getDrawable(R.drawable.ic_tab_albums))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, SongsActivity.class);
    spec = tabHost.newTabSpec("songs").setIndicator("Songs",
                      res.getDrawable(R.drawable.ic_tab_songs))
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.getTabWidget().setBackgroundColor(Color.BLUE);
    tabHost.setCurrentTab(0);

} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:45:18.147

如果我理解正确并且您想更改标签主机的颜色，而不是点击标签时加载的视图，您可以这样做

```
tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.RED); 
```

# azure - 2个云服务之间的通信

> ID：15768126
> 
> 赞同：2
> 
> 时间：2013-04-02T15:30:54.990
> 
> 标签：azure, internal, endpoint

我是 Windows azure 云服务的新手，我想知道是否可以通过内部端点允许 2 个不同云服务中的 2 个角色之间进行通信？

我有一个小的 HttpModule，它的作用是“调度员”。此 HttpModule 托管在云服务中，并在 http 端点（Web 角色）上接收来自 Internet 的请求。

然后，我有第二个云服务，它托管一个 REST 服务（也是 Web 角色）。我希望 httpModule 通过内部端点将传入请求转发到 REST 服务。

是否有可能做到这一点（如果是，怎么做？）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:48:35.957

有几种方法可以做到这一点。

确保两个部署都属于同一个订阅 创建一个关联组 创建一个 Vnet 将这两个服务添加到该组。

这里的描述很好：http: [//michaelwasham.com/2012/08/06/connecting-web-or-worker-roles-to-a-simple-virtual-network-in-windows-azure/](http://michaelwasham.com/2012/08/06/connecting-web-or-worker-roles-to-a-simple-virtual-network-in-windows-azure/)

请注意，这只有在两个服务都托管在同一区域时才有效。如果您需要有多个区域（例如，每个区域都有一个侦听器，但只有一个工作人员），这将行不通。为此，您需要使用 Azure 服务总线或通过 VIP 连接。

# python-3.x - PyGObject：设置 ComboBoxText 的活动文本

> ID：15768128
> 
> 赞同：0
> 
> 时间：2013-04-02T15:31:01.037
> 
> 标签：python-3.x, pygobject

如何设置 ComboBoxText 的活动文本（带条目）？

文档中没有这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:21:59.393

那这个呢：

```
#-*- coding: UTF-8 -*-
from gi.repository import Gtk

class App(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title='ComboBoxEntry Test')

        model = Gtk.ListStore(str, str)
        for i in [['One', '1'], ['Two', '2'], ['Three', '3'], ['Four', '4']]:
            model.append(i)

        combo = Gtk.ComboBoxText.new_with_entry()
        combo.set_model(model)

        #combo.set_active(0)
        combo.get_child().set_text('Five')

        self.add(combo)

win = App()
win.connect('delete-event', Gtk.main_quit)
win.show_all()
Gtk.main() 
```

# visual-studio - 为什么 Visual Studio 的 Windows 窗体设计器停止工作？

> ID：15768131
> 
> 赞同：2
> 
> 时间：2013-04-02T15:31:05.610
> 
> 标签：visual-studio, visual-studio-2008, c++-cli, windows-forms-designer

我正在通过将业务逻辑与 GUI 分离来清理旧的 C++-CLI 软件。尽管我已经单独留下了 windows 窗体设计器代码，但它现在不会显示我的窗体，而是引发异常：

```
Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED)) 
```

调用堆栈如下所示：

```
at EnvDTE.CodeFunction.GetStartPoint(vsCMPart Part)
at Microsoft.VisualC.CppCodeParser.OnMethodPopulateStatements(Object sender, EventArgs e)
at System.CodeDom.CodeMemberMethod.get_Statements()
at System.ComponentModel.Design.Serialization.TypeCodeDomSerializer.Deserialize(IDesignerSerializationManager manager, CodeTypeDeclaration declaration)
at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
at System.ComponentModel.Design.Serialization.BasicDesignerLoader.BeginLoad(IDesignerLoaderHost host) 
```

...都不是我的代码。我可能打扰了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:58:00.030

根据调用堆栈，WinForms 设计器似乎在试图读取`InitializeComponents`生成文件中方法内的代码时感到窒息。实际的错误方是 C++ 代码模型实现。

这里最有可能发生的是方法中的特定语句导致代码模型在此处出错。我将首先注释掉整个方法，验证是否可以解决问题，然后慢慢取消注释部分，直到找到有问题的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T19:06:08.603

检查函数中是否没有您自己的代码。我`InitializeComponent()`替换了它，它现在可以正常工作了）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T16:05:16.873

我用谷歌搜索了这个错误，有几个线程引用了各种不同的应用程序，这些应用程序都会产生这个错误：

[http://forums.iis.net/t/1148764.aspx/1](http://forums.iis.net/t/1148764.aspx/1) 和 [http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/11e91d76-f5f3-45c3-b3f6-30c1e4121b9f/](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/11e91d76-f5f3-45c3-b3f6-30c1e4121b9f/)

只有两个

此错误的主要原因似乎是用户或进程试图访问、运行或写入它无权访问的内容。

您是否尝试过以管理员身份运行应用程序？

如果这不起作用，请确保项目文件夹和应用程序文件夹都在同一个分区上，因为这会影响权限。

自从安装了该应用程序以来，您还没有升级您的操作系统？如果是这样，您的 GUID 可能与应用程序上存储的 GUID 不匹配，这可能导致错误卸载/重新安装将解决此问题。

希望有帮助

# python - Python - 将变量批量提升到父范围

> ID：15768136
> 
> 赞同：0
> 
> 时间：2013-04-02T15:31:16.443
> 
> 标签：python, python-2.7

在 python 2.7 中，我想运行：

$ ./script.py 初始化参数.py

这是向 script.py 提供参数文件的技巧，因为 initparms.py 包含几个 python 变量，例如

```
Ldir =   '/home/marzipan/jelly'
LMaps = True
# etc. 
```

script.py 包含：

```
X = __import__(sys.argv[1])
Ldir = X.Ldir
LMaps = X.Lmaps
# etc. 
```

我想对 X 中的变量进行批量提升，以便它们可用于 script.py，而无需手动拼写代码中的每个变量。

像

```
import __import__(sys.argv[1]) 
```

或者

```
from sys.argv[1] import * 
```

不工作。可能差不多了……有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:34:54.977

您可以使用[`execfile`](http://docs.python.org/2/library/functions.html#execfile)：

```
execfile(sys.argv[1]) 
```

当然，通常的警告与`exec`或`eval`适用（您的脚本无法知道它是否正在运行受信任或不受信任的代码）。

我的建议是不要做你正在做的事情，而是`configparser`在那里使用和处理配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:52:37.183

这是一个单行：

```
globals().update(__import__(sys.argv[1]).__dict__) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:50:10.670

你可以这样做：

```
import os
import imp
import sys

try:
    module_name = sys.argv[1]
    module_info = imp.find_module(module_name, [os.path.abspath(os.path.dirname(__file__))] + sys.path)
    module_properties = imp.load_module(module_name, *module_info)
except ImportError:
    pass
else:
    try:
        attrlist = module_properties.__all__
    except AttributeError:
        attrlist = dir(module_properties)
    for attr in attrlist:
        if attr.startswith('__'):
            continue
        globals()[attr] = getattr(module_properties, attr) 
```

有点复杂，但可以完成工作。

# node.js - 为什么 node.js 快速会话在 Chrome 中正常工作，但在 IE 10 中不正常

> ID：15768141
> 
> 赞同：1
> 
> 时间：2013-04-02T15:31:21.340
> 
> 标签：node.js, session, express, csrf

我将会话存储在 MongoDB 中，使用 ('connect-mongo')(express)

当我使用 chrome 浏览器时：在 mongoDB 中只创建了一个带有 id 和 coockie 信息的会话。

当我使用 IE10 时：在 mongoDB 中创建了 7 个带有 id 和 coockies 的会话。

使用 req.session._csrf 时，连接 _csrf 在 IE10 中也不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:28:44.307

解决了。问题是使用 Cloud9 在线文本板启动我的节点项目的原因，它使用 8080 端口和代理。所以 IE 10 在这种情况下会打开几个会话。在我尝试在 80 端口上的本地计算机上启动后，一切正常。

# ios - iOS 应用 SSL 握手失败

> ID：15768143
> 
> 赞同：39
> 
> 时间：2013-04-02T15:31:26.117
> 
> 标签：ios, ssl, https

我正在制作一个应用程序，通过在 post 方法中传递登录凭据来通过 HTTPS 登录到 aspx 网站。使用 Charles Proxy 检查响应时，我可以看到来自 seal.verisign.com 的 SSL Handshake failed 错误，然后我被带回登录页面。我不确定我需要做什么来解决这个问题。

我正在 iPhone 模拟器中对此进行测试。

我无权访问服务器实现。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2017-05-08T13:53:59.260

在 iOS >= 10.3 上，安装 Charles Proxy 证书后（根据 @ashish-verma 的出色回答），您还需要通过*Settings* -> *General* -> *About* -> *Certificate Trust Settings*启用它：

[![在 iOS 10.3 及更高版本上启用 SSL 根证书](https://i.stack.imgur.com/hc4n3.png)](https://i.stack.imgur.com/hc4n3.png)

此处的完整设置：http: [//www.devsbedevin.net/debugging-ios-ssl-traffic/](http://www.devsbedevin.net/debugging-ios-ssl-traffic/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-05-03T23:48:02.530

如果安装证书仍然对您没有帮助，则可能是由于 SSL Pinning。

来自 charlesproxy.com：

> SSL Pinning 请注意，某些应用程序实施 SSL 证书锁定，这意味着它们专门验证根证书。因为应用程序本身正在验证根证书，所以它不会接受 Charles 的证书并且连接会失败。如果您已成功安装 Charles 根 SSL 证书，并且可以在 Safari 中使用 SSL 代理浏览 SSL 网站，但应用程序失败，**则可能是 SSL Pinning 问题**。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-22T22:42:21.183

也许在实际设备上进行测试会提供更多洞察力？

在查尔斯做到这一点：

1.  转到代理：代理设置...
2.  代理选项卡：在 HTTP 代理端口：字段中输入“8888”
3.  SSL 选项卡：确保“启用 SSL 代理”已打开

在您的开发机器上：

1.  转到系统偏好设置：网络：Wifi：高级：TCP/IP 选项卡：记下 IPV4 地址：（即 10.0.1.101）

在您的设备上：

1.  从您的设备转到[http://charlesproxy.com/charles.crt](http://charlesproxy.com/charles.crt)并下载 Charles SSL 证书
2.  好的证书是受信任的（完成后请务必禁用或删除它）
3.  转到设置应用程序： Wifi：为您的网络选择详细的披露按钮（带有白色箭头的蓝色圆形按钮）
4.  在 HTTP 代理下，选择“手动”
5.  在“服务器”字段中输入步骤（开发机器 1.）中的地址，以及步骤（查尔斯 2.）中的端口号

最后：

1.  重启查尔斯
2.  在您的 iDevice 上运行 Safari 进行测试。这应该会提示 Charles 显示一个对话框来允许或拒绝 SSL 代理。显然允许，你应该很高兴。

查尔斯网站上的更多信息：http: [//www.charlesproxy.com/documentation/proxying/ssl-proxying/](http://www.charlesproxy.com/documentation/proxying/ssl-proxying/)

另外，您是否收到对 connection:(NSURLConnection*)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge*)challenge 方法的响应？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-27T14:00:53.587

您需要安装 SSL 证书才能解决此问题。

按着这些次序

1.  **在iOS****模拟器**上打开**Safari**浏览器

*****   在地址栏中输入“ **www.charlesproxy.com/getssl”**

    *   安装**SSL**证书*   重启**Charles 代理******

 ***** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T15:42:42.877

服务器可能没有您正在使用的 url 的有效证书。你检查了吗？

如果您使用浏览器尝试该 url，它会给您一个警告吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-26T14:22:05.620

如果在模拟器上运行，只需重启 Charles Proxy 和模拟器，确保 Charles Proxy 先启动

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-13T05:36:09.473

删除所有旧用户凭据，然后重新安装新的 ssl 证书。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-29T03:04:19.137

您必须在移动设备上安装 SSL 证书。

在线搜索如何为 Charles Proxy 安装 SSL 证书。****

# qt - Qt 子类化和“连接调用没有匹配功能”

> ID：15768144
> 
> 赞同：3
> 
> 时间：2013-04-02T15:31:29.593
> 
> 标签：qt, compilation, subclass, connect

我正在尝试封装表视图行为，并从将表视图标题信号连接到子类中定义的表视图槽开始。我可以在没有子类化的情况下获得我正在寻找的行为，但这违背了目的。当我尝试子类化时，我得到了可怕的“没有匹配的函数调用来连接。所有组件最终都是 QObjects，所以我不认为这是问题所在。（但是，再一次，也许这就是问题所在。）现在我正在连接到“hideColumn()”，但我最终想连接到我自己的插槽（例如“my_sectionClicked(int)”。

下面的代码取自 Jasmin Blanchette 和 Mark Summerfield 的“使用 Qt 4 进行 C++ GUI 编程”的源代码，但我添加的“MyTableView”除外。

MyTableView.h

```
#ifndef MYTABLEVIEW_HPP
#define MYTABLEVIEW_HPP

#include <QTableView>

class MyTableView : public QTableView
{
    Q_OBJECT

public:
    explicit MyTableView(QWidget *parent = 0);

public slots:
    void my_sectionClicked(int logicalIndex);

private slots:

public:

private:
    QHeaderView *m_rowHeader;

};

#endif // MYTABLEVIEW_HPP 
```

MyTableView.cpp

```
// Qt Includes
#include <QDebug>
#include <QMenu>

// Local Includes
#include "MyTableView.h"

MyTableView::MyTableView(QWidget *parent) : QTableView(parent)
{
    m_rowHeader = horizontalHeader();
    connect(m_rowHeader, SIGNAL(sectionClicked(int)), this, SLOT(hideColumn(int)));
}

void MyTableView::my_sectionClicked(int logicalIndex)
{
    qDebug().nospace() << "Column " << logicalIndex << " selected." << "\n";
} 
```

货币模型.h

```
#ifndef CURRENCYMODEL_H
#define CURRENCYMODEL_H

#include <QAbstractTableModel>
#include <QMap>

class CurrencyModel : public QAbstractTableModel
{
public:
    CurrencyModel(QObject *parent = 0);

    void setCurrencyMap(const QMap<QString, double> &map);
    int rowCount(const QModelIndex &parent) const;
    int columnCount(const QModelIndex &parent) const;
    QVariant data(const QModelIndex &index, int role) const;
    QVariant headerData(int section, Qt::Orientation orientation,
        int role) const;

private:
    QString currencyAt(int offset) const;

    QMap<QString, double> currencyMap;
};

#endif 
```

货币模型.cpp

```
#include <QtCore>

#include "currencymodel.h"

CurrencyModel::CurrencyModel(QObject *parent)
    : QAbstractTableModel(parent)
{
}

void CurrencyModel::setCurrencyMap(const QMap<QString, double> &map)
{
    currencyMap = map;
    reset(); // Forces views to refresh data 
}

int CurrencyModel::rowCount(const QModelIndex & /* parent */) const
{
    return currencyMap.count();
}

int CurrencyModel::columnCount(const QModelIndex & /* parent */) const
{
    return currencyMap.count();
}

QVariant CurrencyModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();

    if (role == Qt::TextAlignmentRole)
    {
        return int(Qt::AlignRight | Qt::AlignVCenter);
    }
    else if (role == Qt::DisplayRole)
    {
        QString rowCurrency = currencyAt(index.row());
        QString columnCurrency = currencyAt(index.column());

        if (currencyMap.value(rowCurrency) == 0.0)
            return "####";

        double amount = currencyMap.value(columnCurrency)
                    / currencyMap.value(rowCurrency);

        return QString("%1").arg(amount, 0, 'f', 4);
    }

    return QVariant();
}

QVariant CurrencyModel::headerData(int section,
    Qt::Orientation /* orientation */,
    int role) const
{
    if (role != Qt::DisplayRole)
        return QVariant();
    return currencyAt(section);
}

QString CurrencyModel::currencyAt(int offset) const
{
    return (currencyMap.begin() + offset).key();
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtGui>

#include "MyTableView.h"
#include "currencymodel.h"

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    MainWindow();

protected:

private slots:
    void on_sectionClicked(int locicalIndex);

private:
    QMap<QString, double> currencyMap;
    CurrencyModel currencyModel;
    QTableView tableView;
    QHeaderView *m_rowHeader;
};

#endif 
```

主窗口.cpp

```
#include <iostream>
#include "mainwindow.h"

MainWindow::MainWindow()
{
    currencyMap.insert("AUD", 1.3259);
    currencyMap.insert("CHF", 1.2970);
    currencyMap.insert("CZK", 24.510);
    currencyMap.insert("DKK", 6.2168);
    currencyMap.insert("EUR", 0.8333);
    currencyMap.insert("GBP", 0.5661);
    currencyMap.insert("HKD", 7.7562);
    currencyMap.insert("JPY", 112.92);
    currencyMap.insert("NOK", 6.5200);
    currencyMap.insert("NZD", 1.4697);
    currencyMap.insert("SEK", 7.8180);
    currencyMap.insert("SGD", 1.6901);
    currencyMap.insert("USD", 1.0000);

    currencyModel.setCurrencyMap(currencyMap);

    /*
    THIS WORKS!!!

    m_rowHeader = tableView.horizontalHeader();
    connect(m_rowHeader, SIGNAL(sectionClicked(int)),
        &(tableView), SLOT(hideColumn(int)));
    */

    tableView.setModel(&currencyModel);
    tableView.setAlternatingRowColors(true);

    tableView.setWindowTitle(QObject::tr("Currencies"));
    tableView.show();
}

void MainWindow::on_sectionClicked(int logicalIndex)
{
    qDebug().nospace() << "Column " << logicalIndex << " selected." << "\n";
} 
```

主文件

```
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MainWindow mainWin;
    return app.exec();
} 
```

我得到的错误是：

```
g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/default -I. -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtGui -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include -I. -I. -o MyTableView.o MyTableView.cpp
MyTableView.cpp: In constructor ‘MyTableView::MyTableView(QWidget*)’:
MyTableView.cpp:11: error: no matching function for call to ‘MyTableView::connect(QHeaderView*&, const char [21], MyTableView* const, const char [17])’
/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qobject.h:204: note: candidates are: static bool QObject::connect(const QObject*, const char*, const QObject*, const char*, Qt::ConnectionType)
/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qobject.h:217: note:                 static bool QObject::connect(const QObject*, const QMetaMethod&, const QObject*, const QMetaMethod&, Qt::ConnectionType)
/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore/qobject.h:337: note:                 bool QObject::connect(const QObject*, const char*, const char*, Qt::ConnectionType) const
make: *** [MyTableView.o] Error 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T16:52:13.677

这种问题通常是在你传递一个已经被前向声明的类时引起的，但不是`#include`'d

在您的情况下`#include <QHeaderView>`，您的 MyTableView.cpp 文件中可能需要一个。

问题是您可以传递指向已前向声明的对象的指针，但编译器不知道您的类最终派生自，因此在调用函数时`QObject`不允许将子类指针用作指针.`QObject``connect()`

# ruby-on-rails - RVM 版本 [1.19.1] 需要更改 .rvmrc 文件

> ID：15768145
> 
> 赞同：7
> 
> 时间：2013-04-02T15:31:29.913
> 
> 标签：ruby-on-rails, ruby, rvm

消息：

```
You are using '.rvmrc', it requires trusting, it is slower and it is not compatible with other ruby managers,
you can switch to '.ruby-version' using 'rvm rvmrc to [.]ruby-version'
or ignore this warnings with 'rvm rvmrc warning ignore /Users/wadawadabingbang/Sites/my_amazing_fn_website/.rvmrc',
'.rvmrc' will continue to be the default project file in RVM 1 and RVM 2,
to ignore the warning for all files run 'rvm rvmrc warning ignore all.rvmrcs'. 
```

我应该执行什么命令？

我的红宝石版本是`ruby-1.9.3-p385`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:23:11.710

如果您不想更改您`.rvmrc`运行的所有项目中的文件（如 Yule 所说）`rvm rvmrc warning ignore all.rvmrcs`。它将忽略您所有项目的此警告消息

如果您不想`.rvmrc`仅为此项目更改文件，请运行`rvm rvmrc warning ignore /Users/wadawadabingbang/Sites/my_amazing_fn_website/.rvmrc`

但是，此消息建议将您`.rvmrc`移至新系统。为此，您只需`.ruby-version`在 : 中使用您的 ruby​​ 版本创建`1.9.3-p385`并删除 .rvmrc。就是这样。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T12:34:33.277

我将 .rvmrc 重命名为 .ruby-version 并更改了内容

从

```
rvm_trust_rvmrcs_flag=1
rvm use ruby-2.0.0-p0@MYGEMSET --create 
```

到

```
ruby-2.0.0-p0@MYGEMSET 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T07:21:14.437

应该工作后

> `rvm get head`

它对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T00:55:30.850

这类似于[CupraR_On_Rails](https://stackoverflow.com/users/1242752/cuprar-on-rails)的答案，但您不必输入目录的名称。我在我的`.profile`调用中设置了一个别名`rvm_trust`来为我运行它。

```
rvm rvmrc warning ignore `pwd`/.rvmrc 
```

# c# - 如何转换可能为空的布尔值

> ID：15768147
> 
> 赞同：1
> 
> 时间：2013-04-02T15:31:36.673
> 
> 标签：c#, .net

我正在从数据库中提取数据，然后检查它是否为真，如果是，我选中复选框。问题是变量可能为空，然后抛出错误“System.InvalidCastException：指定的转换无效。”

有任何想法吗？下面是运行良好的代码，除非它得到一个空字段。

```
if ((bool)myReader["Analytics"] == true) Analytics.Checked = true; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:33:16.710

可以使用的[`IsDBNull`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)方法`DataReader`。

```
if (!myReader.IsDBNull(myReader.GetOrdinal("Analytics")))
{
  //not null. do your casting now.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:34:35.820

“空”值作为 DBNull.Value 返回，因此您可以执行以下操作：

```
if(myReader["Analytics"]!=DBNull.Value)
   Analytics.Checked = (bool)myReader["Analytics"]; 
```

只要数据库中的列是类型`bit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:34:05.093

试试这样：

```
var column = reader.GetOrdinal("Analytics");
if (!myReader.IsBDNull(column))
{
    Analytics.Checked = myReader.GetBoolean(column);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:34:57.663

```
 object nullable=null;
        var result = (bool?)nullable;
        if(result.HasValue) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:35:59.117

试试这个;

```
Analytics.Checked = (myReader["Analytics"] == "" || (bool)myReader["Analytics"] ==  false) ? false : true ); 
```

# visual-studio-2012 - 将代码文件映射到建模项目的层图时，Visual Studio 2012 崩溃

> ID：15768149
> 
> 赞同：1
> 
> 时间：2013-04-02T15:31:39.897
> 
> 标签：visual-studio-2012, crash, mapping, layer, modeling

我有一个包含 ASP 类和 ASP.NET 页面的 Web 应用程序。此 Web 应用程序受 TFS 源代码控制我创建了另一个当前不受源代码控制的建模**项目**。在建模项目中，我创建了一个层图。然后，我将 Web 应用程序作为项目添加到此解决方案中。然后我打开 Architecture Explorer 并使用解决方案视图查看 Web 应用程序文件。我按 .aspx 过滤并尝试将 .aspx(s) 拖到图表上的其中一个图层。起初它看起来很有效，一个计数器显示了项目的数量。

但随后 Visual Studio 崩溃并出现以下错误。（注意：我什至尝试了一个文件并得到相同的结果。）有没有人对如何解决这个问题有任何想法？

日志名称：应用程序

来源：.NET 运行时

日期：2013 年 4 月 2 日上午 8:07:31

事件编号：1026

任务类别：无级别：错误

关键词：经典

用户：N/A 描述：应用程序：devenv.exe

框架版本：v4.0.30319

说明：进程因未处理的异常而终止。

异常信息：System.Reflection.TargetInvocationException

# boost - 找不到与 Boost 线程链接的标志

> ID：15768150
> 
> 赞同：2
> 
> 时间：2013-04-02T15:31:46.287
> 
> 标签：boost, linker, makefile, configure, autoconf

我正在尝试编译一个需要提升的库。我能够让它在 ubuntu 上运行，但我不明白为什么 ./configure 在 Mac OS X 上找不到 boost_thread。Boost .hpp 位于 /usr/local/include/boost 和 .dylib 和 .a位于 /usr/local/lib

这是配置的日志文件：http: [//pastebin.com/KKqareyT](http://pastebin.com/KKqareyT)

你有什么主意吗 ？

# backbone.js - 骨干点击事件绑定未绑定到 DOM 元素

> ID：15768152
> 
> 赞同：2
> 
> 时间：2013-04-02T15:31:53.250
> 
> 标签：backbone.js, requirejs, underscore.js

我有这些称为节拍的 div，我想在单击它们时进行注册。但是，我似乎根本无法让他们注册点击，无论是通过点击它们，还是在控制台中的特定 div 上调用 JQuery click 事件。无论哪种方式，都没有注册。

measureView.js 创建这个 beatView，它在父度量中创建一个节拍。

beatView.js：

```
//filename: views/beats/beatView.js
/*  This is the view for a single beat, which is contained in a measure view. */
define([ 'jquery', 'underscore',      'backbone',      'backbone/models/beat',      'text!backbone/templates/measures/audioMeasures.html',      'text!backbone/templates/beats/linearBarBeats.html',      'text!backbone/templates/beats/linearBarSVGBeats.html',      'text!backbone/templates/beats/circularPieBeats.html',      'app/dispatch',      'app/log'
], function($, _, Backbone, BeatModel, audioMeasuresTemplate, linearBarBeatsTemplate, linearBarSVGBeatsTemplate, circularPieBeatsTemplate, dispatch, log){
  return Backbone.View.extend({
    //registering backbone's click event to our toggle() function.
    events : {
      'click' : 'toggle'
    },

    //The constructor takes options because these views are created by measuresView objects.
    initialize: function(options){
      if (options) {
        console.log('options :');
        console.warn(options);
        this.model = options.model;
        // this.parentEl should be measure.cid
        this.measureBeatHolder = options.parentElHolder;
      } else {
        console.log('never really getting here');
        this.model = new BeatModel;
      }    
      this.render();
    },

    //We use css classes to control the color of the beat. A beat is essentially an empty div.
    render: function(toggle){
      var state = this.getSelectionBooleanCSS();
      if (toggle) {
        $('#beat'+toggle).removeClass(state);
        $('#beat'+toggle).addClass(this.switchSelectionBooleanValue());
      } else {
        var compiledTemplate = _.template(this.representations[this.currentBeatRepresentation], {beat: this.model, beatAngle: this.beatAngle, state: state});
        $(this.measureBeatHolder).append( compiledTemplate );
        return this;
      }
    },

    getSelectionBooleanCSS: function(){
      if (this.model.get("selected")) {
        return "ON";
      } else {
        return "OFF";
      }
    },

    switchSelectionBooleanValue: function(){
      if (this.model.get('selected') == true) {
        this.model.set('selected', "false");
      } else {
        this.model.set('selected', "true");
      }
      return this.model.get('selected');
    },

    /*
      This is called when a beat is clicked.
      It does a number of things:
      1\. toggles the model's selected field.
      2\. re-renders the beat.
      3\. prints a console message.
      4\. tells log to send a log of the click event.
      5\. triggers a beatClicked event.
    */

    toggle: function(){
      console.log('getting to toggle function');
      var selectedBool = this.model.get("selected");
      this.model.set("selected", !selectedBool);
      var newBool = this.model.get("selected");
      this.render(this.model.cid);
      dispatch.trigger('beatClicked.event');
    }
  });
}); 
```

供参考：

拍子型号：

```
//filename: models/beat.js
/*
  This is the beat model.
  It only knows about whether or not it
  is selected.
*/
define([
  'underscore',
  'backbone'
], function(_, Backbone) {
  var beatModel = Backbone.Model.extend({
    defaults: {
      selected: false,
      state: 'OFF'
    },
    initialize: function(){
    },
    getStyleClass: function() {
      if (this.selected) {
        return 'ON';
      }
      else {
        return 'OFF';
      }
    }
  });

  return beatModel;
}); 
```

测量模型：

```
//filename: models/measure.js
/*
  This is the measure model.
  A component has a collection of these models.
  these models have a collection of beats.
*/
define([
  'underscore',
  'backbone',
  'backbone/collections/beats'
], function(_, Backbone, beatsCollection) {
  var measureModel = Backbone.Model.extend({
    defaults: {
      label: '0/4',
      beats: beatsCollection,
      numberOfBeats: 0,
      divisions: 8
    },
    initialize: function(){     
    }

  });

  return measureModel;
}); 
```

测量视图.js：

```
// Filename: views/measures/measuresView.js
/*
  This is the MeasuresView.

  This is contained in a ComponentsView.
*/
define([
  'jquery',
  'underscore',
  'backbone',
  'backbone/collections/measures',
  'backbone/collections/beats',
  'backbone/models/measure',
  'backbone/views/beats/beatView',
  'text!backbone/templates/measures/audioMeasures.html',
  'text!backbone/templates/measures/linearBarMeasures.html',
  'text!backbone/templates/measures/linearBarSVGMeasures.html',
  'text!backbone/templates/measures/circularPieMeasures.html',
  'app/dispatch',
  'app/state',
  'app/log'
], function($, _, Backbone, MeasureModel, BeatsCollection, MeasuresCollection, beatView, audioMeasuresTemplate, linearBarMeasuresTemplate, linearBarSVGMeasuresTemplate, circularPieMeasuresTemplate, dispatch, state, log){
  return Backbone.View.extend({
    // el: $('.component'),

    // The different representations
    representations: {
      "audio": audioMeasuresTemplate,
      "linear-bar": linearBarMeasuresTemplate,
      "linear-bar-svg": linearBarSVGMeasuresTemplate,
      "circular-pie": circularPieMeasuresTemplate
    },

    currentMeasureRepresentation: 'linear-bar',

    //registering click events to add and remove measures.
    events : {
      'click .addMeasure' : 'add',
      'click .delete' : 'remove'
    },

    initialize: function(options){
      //if we're being created by a componentView, we are
      //passed in options. Otherwise we create a single
      //measure and add it to our collection.
      if (options) {
        this.measuresCollection = options.collection;
        this.parent = options.parent;
        this.el = options.el;
      }
      // else {
      //   this.measure = new BeatsCollection;

      //   for (var i = 0; i < 4; i++) {
      //     this.measure.add();
      //   }

      //   this.measuresCollection = new MeasuresCollection;
      //   this.measuresCollection.add({beats: this.measure});
      // }

      if (options["template-key"]) {
        this.currentBeatRepresentation = options["template-key"];
      }

      //registering a callback for signatureChange events.
      dispatch.on('signatureChange.event', this.reconfigure, this);
      //Dispatch listeners
      dispatch.on('measureRepresentation.event', this.changeMeasureRepresentation, this);

      this.render();

      //Determines the intial beat width based on the global signature. Has to be below this.render()
      this.calcBeatWidth(this.parent.get('signature'));
    },

    changeMeasureRepresentation: function(representation) {
      this.currentMeasureRepresentation = representation;
      this.render();      
    },

    render: function(){
      $(this.el).html('<div class="addMeasure">+</div>');
      var measureCount = 1;
      //we create a BeatsView for each measure.
      _.each(this.measuresCollection.models, function(measure) {
        // when representation button changes, the current representation template will get updated
        var compiledTemplate = _.template( this.representations[this.currentMeasureRepresentation], {measure: measure, beatHolder:"beatHolder"+measure.cid, measureCount:measureCount, measureAngle: 360.0 } );
        $(this.el).find('.addMeasure').before( compiledTemplate );
          console.log('measure beats: ');
          console.warn(measure.get('beats').models);
            _.each(measure.get('beats').models, function(beat) {
              // console.warn("#beat"+beat.cid.toString());
              new beatView({model:beat, parentElHolder:'#beatHolder'+measure.cid, parentCID:measure.cid, singleBeat:"#beat"+beat.cid});
            }, this);
        measureCount ++;
      }, this);
      return this;
    },

    /*
      This is called when the user clicks on the plus to add a new measure.

      It creates a new measure and adds it to the component.
      It generates a string representing the id of the measure and the ids of
      its beats and logs the creation.

      Lastly, it triggers a stopRequest, because we can't continue playing until
      all the durations get recalculated to reflect this new measure.
    */
    add: function(){
        console.log('add measure');
        var newMeasure = new BeatsCollection;

        for (var i = 0; i < this.parent.get('signature'); i++) {
          newMeasure.add();
        }

        this.measuresCollection.add({beats: newMeasure});

        //Logging
        name = 'measure' + _.last(this.measuresCollection.models).cid + '.';
        _.each(newMeasure.models, function(beats) {
          name = name + 'beat'+ beats.cid + '.';
        }, this);
        log.sendLog([[3, "Added a measure: "+name]]);

        //Render
        this.render();
        //Dispatch
        dispatch.trigger('stopRequest.event', 'off');
    },

    /*
      This is called when the user clicks on the minus to remove a measure.
    */
    remove: function(ev){
      if ($('#measure'+this.measuresCollection.models[0].cid).parent()) {
        //removing the last measure isn't allowed.
        if(this.measuresCollection.models.length == 1) {
          console.log('Can\'t remove the last measure!');
          return;
        }
        console.log('remove measure');

        //we remove the measure and get its model.
        var model = this.measuresCollection.get($(ev.target).parents('.measure').attr('id').replace('measure',''));
        this.measuresCollection.remove(model);

        //send a log event showing the removal.
        log.sendLog([[3, "Removed a measure: measure"+model.cid]]);

        //re-render the view.
        this.render();

        //trigger a stop request to stop playback.
        dispatch.trigger('stopRequest.event', 'off');
        dispatch.trigger('signatureChange.event', this.parent.get('signature'));
      }
    },
    // This is triggered by signatureChange events.
    reconfigure: function(signature) {
      console.log('MeasureView.reconfigure(signature) : signature=' +signature);
      /* if the containing component is selected, this
         triggers a request event to stop the sound.

         Then this destroys the beat collection and creates
         a new collection with the number of beats specified
         by the signature parameter.
      */
      if ($(this.parent).hasClass('selected')) {
        dispatch.trigger('stopRequest.event', 'off');
        this.measure.reset();

        for (var i = 0; i < signature; i++) {
          this.measure.add();
        }
        //re-render the view.
        this.render();

        //recalculate the widths for each beat.
        this.calcBeatWidth(signature);
        dispatch.trigger('signatureChange.event', this.parent.get('signature'));

      }
    },

    //This determines the width of each beat based on the
    //number of beats per measure or 'signature'.
    calcBeatWidth: function(signature) {
      if ($(this.el).hasClass('selected')) {
        var px = 100/$('.measure').css('width').replace(/[^-\d\.]/g, '');
        var beatWidth = (100 - ((signature*1+1)*px))/signature;

        $(this.el).children('.beat').css({
          'width' : beatWidth+'%'
        });
      }
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:56:01.773

Backbone 获取您的`events`对象并将所有这些事件类型和选择器委托给视图的`el`. 您希望事件注册的任何 HTML 都需要插入到视图中`el`，并且`el`需要插入到页面中。

通常我这样设置我的视图：

```
var myView = Backbone.View.extend({

  id: 'myView',

  events: {
    'click li' : 'myEventCallback'
  },

  initialize: function() {

    $('body').append(this.el); //el on the page now
    this.render(); //fills up el with useful markup
  },

  render: function() {
    //fills el with useful markup from a template
    this.el.html( JST['myTemplate' ]() ); 
  },

  myEventCallback: function() {
    //code for handling click events on the li's inside the el of this view
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:12:51.903

感谢@AlexMcp 和@PaulHoenecke 的贡献。

我最终通过渲染中的 JQuery 代理函数将上下文传递给自身

```
 // add click handler to this beat
    $("#beat"+this.model.cid).click($.proxy(this.toggle, this)); 
```

完整的 beatView.js 文件：

```
//filename: views/beats/beatView.js
/*
  This is the view for a single beat, which
  is contained in a measure view.
*/
define([
  'jquery',
  'underscore',
  'backbone',
  'backbone/models/beat',
  'text!backbone/templates/measures/audioMeasures.html',
  'text!backbone/templates/beats/linearBarBeats.html',
  'text!backbone/templates/beats/linearBarSVGBeats.html',
  'text!backbone/templates/beats/circularPieBeats.html',
  'app/dispatch',
  'app/log'
], function($, _, Backbone, BeatModel, audioMeasuresTemplate, linearBarBeatsTemplate, linearBarSVGBeatsTemplate, circularPieBeatsTemplate, dispatch, log){
  return Backbone.View.extend({

    /* TODO still issues with this
      el: '.beat',
      registering backbone's click event to our toggle() function.
       events : {
         'click' : 'toggle'
       },
    */

    // The different representations
    representations: {
      "audio": audioMeasuresTemplate,
      "linear-bar": linearBarBeatsTemplate,
      "linear-bar-svg": linearBarSVGBeatsTemplate,
      "circular-pie": circularPieBeatsTemplate
    },
    currentBeatRepresentation: 'linear-bar',
    beatAngle: 90,

    //The constructor takes options because these views are created
    //by measuresView objects.
    initialize: function(options){
      if (options) {
        // TODO: need to take in an option about currentBeatRep
        // TODO: maybe need to respond to a representation changed event (change this.currentBeatRepresentation and rerender)

        console.log('options :');
        console.warn(options);
        this.model = options.model;

        // this is the html element into which this class should render its template
        this.measureBeatHolder = options.parentElHolder;
        this.el = options.singleBeat;
        this.parent = options.parent;
      } else {
        console.error('should not be in here!');
        this.model = new BeatModel;
      }
      this.render();
    },

    //We use css classes to control the color of the beat.
    //A beat is essentially an empty div.
    render: function(toggle){
      // the current state of the beat (is it ON or OFF?)
      var state = this.getSelectionBooleanCSS();

      // if render is being called from the toggle function, we may want to do something different
      if (toggle) {
        $('#beat'+toggle).toggleClass("ON");
        $('#beat'+toggle).toggleClass("OFF");
      } else {
        // this is reached during the initial rendering of the page

        // compile the template for this beat (respect the current representation)
        var compiledTemplate = _.template(this.representations[this.currentBeatRepresentation], {beat: this.model, beatAngle: this.beatAngle, state: state});
        // append the compiled template to the measureBeatHolder
        $(this.measureBeatHolder).append( compiledTemplate );
        // add click handler to this beat
        $("#beat"+this.model.cid).click($.proxy(this.toggle, this));
        // $(this.parentEl).append(compiledTemplate);
        return this;
      }
    },

    getSelectionBooleanCSS: function(){
      if (this.model.get("selected")) {
        return "ON";
      } else {
        return "OFF";
      }
    },

    /*
      This is called when a beat is clicked.
      It does a number of things:
      1\. toggles the model's selected field.
      2\. re-renders the beat.
      3\. prints a console message.
      4\. tells log to send a log of the click event.
      5\. triggers a beatClicked event.
    */
    toggle: function(){
      //switch the selected boolean value on the model
      this.model.set('selected', !this.model.get('selected'));
      //re-render it, passing the clicked beat to render()
      this.render(this.model.cid);
      // log.sendLog([[1, "beat" + this.model.cid + " toggled: "+!bool]]);
      dispatch.trigger('beatClicked.event');
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T22:27:44.203

实际上...您需要做的就是在视图的初始化函数中定义事件。

# php - 如何阻止 div 自动滚动到底部

> ID：15768156
> 
> 赞同：1
> 
> 时间：2013-04-02T15:32:01.443
> 
> 标签：php, javascript, ajax

大家好，我一直在寻找代码来阻止 POS 中的某个部分在我向上滚动到顶部时跳到底部。我已经尝试了一些 Javascript 代码的变体，但我能做到的大多数是跳回，但距离分隔线的末尾只有几行。这是我开始使用的代码，一直到底部。当它每 2 秒刷新一次 div 时，它会执行此操作。

```
function at_Ticket_ScrollBottom()
{
  var objDiv = document.getElementById("cartTicket");
  objDiv.scrollTop = objDiv.scrollHeight;
} 
```

我使用的第二个代码是：

```
function at_Ticket_ScrollBottom()
{
   var objDiv = document.getElementById("cartTicket");
   objDiv.scrollTop = objDiv.offsetHeight;
} 
```

第二个代码向下跳，但距底部几行。我正在努力使它保持在您突出显示的行上，无论它是 div 中的哪个。

我正在为这个基于 Web 的销售点系统使用 PHP、Javascript 和 ajax。如果您有任何很棒的想法，那么我已经苦苦挣扎了大约一周，而我得到的最接近的是我发布的第二个代码。大多数人问如何自动滚动到底部，所以到目前为止我还没有找到很多。

这是一个动态 div，此页面上没有任何移动，但此 div 可以填充食品订单。这些订单填充一个 div 并在输入足够多时使其可滚动。它每 2 秒刷新一次，以查看是否对任何订单进行了新订单或更改。当刷新发生时，它会滚动回票证的底部。我需要它停止进入底部，因为您永远没有足够的时间在刷新时间内选择并更改票证顶部的项目。

# c# - 调用 someURL.xml 并启动 aspx 方法

> ID：15768158
> 
> 赞同：1
> 
> 时间：2013-04-02T15:32:08.790
> 
> 标签：c#, asp.net, xml

我需要调用 someURL.xml 并且响应应该由 aspx 自动生成 xml 。问题是我无法更改呼叫，因为它是由设备自动完成的。我正在寻找如何调用 someURL.xml 而不是 someURL.aspx 并开始生成该 xml 但没有任何成功..？这甚至可能吗？如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:24:18.887

假设您使用的 IIS 至少为 7，并且有一个 HttpHandler ( `.ashx`and `.ashx.cs`) 来生成您的 Xml（假设它的全名是`YourNameSpace.YourHandler`），您可以在 web.config 中使用以下设置：

```
 <system.webServer>
    .
    .
    .
    <handlers>
      <remove name="xmlHdlr"/>
      <add  name="xmlHdlr"   verb="GET" path="*.xml" type="YourNameSpace.YourHandler" /> 
    .
    . 
```

这样，所有 GET 查询`.xml`都将由您的处理程序处理。我假设您将在处理程序`ProcessRequest`方法中解析 url 或请求参数以输出不同的 xml 文档。

# facebook-graph-api - 如何在不迭代帐户列表的情况下获取 facebook 页面访问令牌？

> ID：15768159
> 
> 赞同：0
> 
> 时间：2013-04-02T15:32:09.017
> 
> 标签：facebook-graph-api

Facebook记录了如何通过调用 Graph API 来获取所有 fb 帐户的列表[来获取页面访问令牌。](https://developers.facebook.com/docs/howtos/login/login-as-page/)这是通过向以下位置发出 GET 请求来完成的：

```
https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN 
```

但是，这会返回一个帐户*列表*：

```
{
  "data": [
    {
      "name": "PAGE_TITLE", 
      "access_token": "PAGE_ACCESS_TOKEN", 
      "category": "PAGE_CATEGORY", 
      "id": "PAGE_ID"
    }, 
    {
      "name": "PAGE_TITLE", 
      "access_token": "PAGE_ACCESS_TOKEN", 
      "category": "PAGE_CATEGORY", 
      "id": "PAGE_ID"
    }, 
    ...
 ]
} 
```

我有我想要的页面的 fb id。与其在列表中查找匹配的 id，不如直接调用 Graph API 来获取数据块？我的最终目标是检索页面访问令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:49:52.820

这样做，只需更改 PAGE_ID 和 USER_ACCESS_TOKEN

[https://graph.facebook.com/PAGE_ID?fields=access_token&access_token=USER_ACCESS_TOKEN](https://graph.facebook.com/PAGE_ID?fields=access_token&access_token=USER_ACCESS_TOKEN)

# mysql - 将列作为分隔列表加入 MySQL 查询

> ID：15768168
> 
> 赞同：0
> 
> 时间：2013-04-02T15:32:27.883
> 
> 标签：mysql, sql

我在 MySQL 中有一个如下所示的表：

```
date      | name    | status
03-13-2014,Bob Jones,Pending
03-13-2014,George Manuel,Pending
03-13-2014,Tom Grables,Pending
03-13-2014,Frankie Avalon,Approved
03-13-2014,Robert Garcia,Approved
03-14-2014,John Doe,Pending
03-14-2014,John Die,Approved
03-14-2014,John Zoe,Approved 
```

我要做的是获取所有表示已批准的行的日期、名称和状态。但是，我还想以这样一种方式加入此查询，即我抓取的每一行还有一个分号分隔的列表，其中包含状态为待处理且与已批准同一天的人的姓名。因此，我的查询的输出将如下所示：

```
03-13-2014,Frankie Avalon,Approved,Bob Jones;George Manuel;Tom Grables
03-13-2014,Robert Garcia,Approved,Bob Jones;George Manuel;Tom Grables 
```

请注意，我抓取了 03-13-2014 的已批准请求，并将状态为待处理且日期与已批准请求匹配的请求添加为列。我一直在搞砸加入声明，并完成了我的谷歌作业，但还没有找到一种方法来做到这一点。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:34:30.173

调查[`group_concat()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT
    GROUP_CONCAT('name` SEPARATOR ',') as NameList
FROM
    `tablename`
GROUP BY
    `date` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:41:04.273

我认为这是您想要的逻辑：

```
 select `date`,
         group_concat( (case when status = 'Approved' then name end) separator ';') as Approveds,
         group_concat( (case when status = 'Pending' then name end) separator ';') as Pendings
 from t
 group by `date`; 
```

如果您确实希望*仅*在没有批准的日期等待，那么您需要一个额外的过滤器：

```
 select `date`,
         group_concat( (case when status = 'Approved' then name end) separator ';') as Approveds,
         group_concat( (case when status = 'Pending' then name end) separator ';') as Pendings
 from t
 group by `date`
 having `date` in (select `date` from t where status = 'Approved') 
```

# typo3 - TYPO3 受限页面可从 url 访问

> ID：15768169
> 
> 赞同：0
> 
> 时间：2013-04-02T15:32:30.687
> 
> 标签：typo3

我正在使用 TYPO3，并且我有会员限制区。

如果**客人**知道成员区域中受限页面的 URL，他就能够看到其内容。这不是应该的方式。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:07:51.010

如果您有一个受限区域，您应该至少创建一个**FE 用户组**，并且该用户组应该在您的仅限会员页面的**访问选项卡中分配。**如果您希望此页面的子页面也受到限制，则必须在该选项卡上设置**扩展至子页面**复选框。

# c# - AD 主体组计数错误

> ID：15768172
> 
> 赞同：2
> 
> 时间：2013-04-02T15:32:55.510
> 
> 标签：c#, active-directory

我正在使用 C# 为用户提取活动目录组。出于某种原因，该应用程序在以下代码段中为一位用户引发了错误

```
PrincipalSearchResult<Principal> groups = user.GetGroups();
int total = groups.Count(); 
```

错误：

> 指数超出范围。必须是非负数且小于集合的大小。
> 参数名称：索引

我以前从未见过一种`Count()`方法抛出这种错误。

# c# - 绑定命令未执行

> ID：15768173
> 
> 赞同：0
> 
> 时间：2013-04-02T15:32:56.320
> 
> 标签：c#, wpf, mvvm

我的自定义命令没有被执行：

XAML：

```
<Button Command="{Binding NewServer}" Content="Save" /> 
```

XAML 背后的代码：

```
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();

        DataContext = new ServerViewModel();
    }
} 
```

服务器视图模型：

```
public class ServerViewModel : DependencyObject {
    public ICommand NewServer;

    private readonly Dispatcher _currentDispatcher;

    public ServerViewModel() {
        NewServer = new NewServerCommand(this);
        _currentDispatcher = Dispatcher.CurrentDispatcher;
    }

    public void SaveNewServers() {
        throw new NotImplementedException("jhbvj");
    }
} 
```

新服务器命令：

```
public class NewServerCommand : ICommand {
    public event EventHandler CanExecuteChanged {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }
    private readonly ServerViewModel _vm;

    public NewServerCommand(ServerViewModel vm) {
        _vm = vm;
    }

    public bool CanExecute(object parameter) {
        Dispatcher _currentDispatcher = Dispatcher.CurrentDispatcher;
        Action dispatchAction = () => MessageBox.Show("asd");
        _currentDispatcher.BeginInvoke(dispatchAction);

        return true;
    }

    public void Execute(object parameter) {
        _vm.SaveNewServers();
    }
} 
```

CanExecute 和 Execute 都没有被调用。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:34:52.017

```
public ICommand NewServer; 
```

是一个字段。WPF 不支持绑定到字段。只有属性。将其更改为

```
public ICommand NewServer {get;set;} 
```

# javascript - 可以从 iframe 调用的图片查看器？

> ID：15768177
> 
> 赞同：0
> 
> 时间：2013-04-02T15:33:10.073
> 
> 标签：javascript, jquery, facebook, iframe

我试图为这个问题找到一个解决方案已经有一段时间了，我想我会翻身:)

那么是否有`jquery`一个图片查看器的解决方案可以在运行在`iframe`.

问题是（我可以看到）它们都在 body 元素上附加功能，但`Facebook`正在阻止这种情况发生。

# .net - Visual Studio 2012 设计器异常

> ID：15768182
> 
> 赞同：0
> 
> 时间：2013-04-02T15:33:19.923
> 
> 标签：.net, visual-studio

出于某种原因，在设计时尝试打开/编辑表单时出现异常。（出现典型的“忽略并继续”异常对话框）

这是场景。我在同一个解决方案中有一个项目 dll 库以及另一个 WindowsForm 项目。参考文献是正确的（至少我很确定它们是正确的）。

当我将构建配置设置为 x64 时，在使用引用库中的任何控件打开表单时出现设计时异常。两个项目都设置为 x64，我在配置中验证了两个项目的平台时间。

当我将构建配置设置为任何 CPU 时，一切都很好。

当我将构建配置设置为 x86 时，一切都很好。

我可以调试任何配置并且 WindowsForm 项目运行良好。

在 x64 平台配置上，设计时 GUI 是否存在一些问题？

**异常详情：**

> “找不到类型 SimGenGpsSyncLib.Controls.ClockControl”。请确保引用了包含此类型的程序集。如果此类型是您的开发项目的一部分，请确保已使用当前平台或任何 CPU 的设置成功构建项目。
> 
> 此错误的实例 (1) 1\. 没有关于此错误的错误行信息的堆栈跟踪。

注意：SimGenGpsSyncLib 显然是拥有控制权的库。该项目被正确引用，因为只需将配置平台更改为 x86 或任何 CPU 将允许对包含控件的表单进行设计时编辑。

该控件是一个 UserControl 并被拖放到窗体上。

# java - 声明双重错误

> ID：15768194
> 
> 赞同：-9
> 
> 时间：2013-04-02T15:33:42.823
> 
> 标签：java

我有代码：

```
double myVar = 4000000; 
```

然而java返回一个值说：“令牌上的语法错误“；”，{在这个令牌之后是预期的”

建议？

干杯!

完整代码：

```
public class FibonacciSum {

double a = 1;
double b = 1;

double sum = 0;
double evenSum = 0;

double target = 4000000; 

while(sum < target) {

    sum = a + b;
    a = b;
    b = sum;

    if(sum % 2 == 0)
        evenSum += sum;

}

System.out.println(evenSum);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:35:14.663

什么是代码上下文？

很可能，你把这条线放到了一个不合适的地方，例如*没有*放到一个方法中。该行应该存在于一个方法或至少一个类定义中。

独立，这不是有效的Java！不过，您可能可以在 bean shell 中使用它。

**编辑后更新：您的代码缺少*方法*！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:37:24.720

你没有方法体。您正在尝试直接在类中运行代码。

将代码包装在 main 方法中：

```
public class FibonacciSum {

    public static void main(String...args) {
        double a = 1;
        double b = 1;

        double sum = 0;
        double evenSum = 0;

        double target = 4000000; 

        while(sum < target) {

            sum = a + b;
            a = b;
            b = sum;

           if(sum % 2 == 0)
           evenSum += sum;

        }

        System.out.println(evenSum);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:47:54.060

无需创建一个类，只需将其放在您的 main 方法中即可。

```
public class FibonacciSum {
    public static void main(String[] args) {
        double a = 1;
        double b = 1;
        double sum = 0;
        double evenSum = 0;
        double target = 4000000; 
        while(sum < target) {
            sum = a + b;
            a = b;
            b = sum;
            if(sum % 2 == 0)
                evenSum += sum;
        }
        System.out.println(evenSum);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:36:48.403

我已经测试了你的代码

```
class Tester
{
    public static void main(String[] args) {
        double myVar = 4000000;
        System.out.println(myVar);
    }
} 
```

输出为 4000000.0

# git - Git 跟踪对外部项目的更改

> ID：15768198
> 
> 赞同：0
> 
> 时间：2013-04-02T15:33:55.840
> 
> 标签：git

我的项目具有以下结构。

```
- src/
 - .gitignore
 - lib
    - liba
    - libb
    - lib
    - libd 
```

在我的 。`gitignore`，我要求忽略`lib`文件夹。假设`lib`包含外部库，如 jquery、jqueryui 等，它们有自己的生命周期。不幸的是，我使用的工具需要`lib`在我的`src`文件夹中。现在，我需要对`liba`. 我不想跟踪 lib 中的所有外部项目（liba 除外），但需要将我的更改保存到 liba。如果我从 .gitignore 中删除 lib，则会导致跟踪 lib 中的项目。可能我只能在 .gitignore （选项1）中排除一个项目，或者 git submodule 可能是答案。option1 需要排除我`lib`将来可能添加的任何库，而不是每次都手动将其添加到 .gitignore。我阅读了有关子模块的信息，但不确定在我的情况下是否可行，因为外部仓库在我的 src 中。

实现这一目标的最佳方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:18:34.217

如果你想忽略`lib`，除了`lib/liba`，你可以`.gitignore`这样构建：

```
/lib
!/lib/liba 
```

这基本上是说忽略`lib`除`lib/liba`. 如果您只想跟踪几个文件（例如`*.h`文件）`lib/liba`，您可以更进一步：

```
/lib
!/lib/liba/*.h 
```

虽然这不会捕获`lib/liba`. 为此，您可能需要`.gitignore`在`lib/liba/.gitignore`. 然后你的 main`.gitignore`就像第一个例子一样，你`lib/liba/.gitignore`会说：

```
*
!*.h 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:50:29.823

您可以使用`git add -f`显式添加忽略的项目。这样你就可以让你的 .gitignore 保持原样，但仍然可以跟踪 lib/liba。

# eclipse - 如何读取 PyDev 环境变量中指定的文件

> ID：15768202
> 
> 赞同：0
> 
> 时间：2013-04-02T15:34:23.517
> 
> 标签：eclipse, file-io, pydev

我的 Project Euler 设置是一个 PyDev 项目，我在两台不同的计算机上工作（一台是 Mac，另一台是 Windows 7）。项目的文件结构如下所示：

```
PROJECT_LOC/
  unsolved/
    The .py files for the problems I haven't solved
  solved/
    Problems_001_025/
      .py files for problems 1-25
  ... etc ...
  texts/
    Any input files provided by Project Euler (e.g., Problem 22) 
```

每个文件都以模式`Problem###.py`或`Problem###.txt`.

一旦我解决了一个问题，我将它从`unsolved`中的正确目录移动`solved`，这就是我的困难所在：

给定输入问题，说`Problem022.py`：

```
for line in open("../texts/Problem022.txt"):
    # read file in
# code to solve the problem 
```

由于我不久前解决了问题 22，因此我将其`PROJECT_LOC/unsolved/`从`PROJECT_LOC/solved/Problems_001_025/`. 现在，（毫不奇怪）当我尝试再次运行它时，它给了我一个 no such file 错误。

那么，*在不*改变我的文件结构的情况下，有没有办法让我从我在项目目录中的任何位置访问输入文本文件？

我在想我可以做类似的事情`open(${PROJECT_LOC}/texts)`，但我不知道如何`PROJECT_LOC`在运行时从 Eclipse 获取，并让它在 Windows 和 OS X 上运行。我玩过[这个人在他的问题中所做的事情](https://stackoverflow.com/questions/4800512/use-environment-variable-in-pydev-eclipse-project-file "在 PyDev Eclipse 项目文件中使用环境变量")，但不能让它为我工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:36:57.187

我想到了...

`${PROJECT_LOC:texts}/`我使用Eclipse 首选项中的值向解释器添加了一个环境变量。我现在可以使用`os.environ["PROJECT_EULER_TEXT_FILES"]`来拉取输入的位置。

# asp.net-mvc-4 - .NET 4.5 中未调用 HttpModule

> ID：15768203
> 
> 赞同：22
> 
> 时间：2013-04-02T15:34:23.970
> 
> 标签：asp.net-mvc-4, visual-studio-2012, httpmodule

刚刚花了很多时间筛选关于这个问题的相互矛盾的建议，并认为我会发布我的解决方案。

我的环境是 .NET 4.5，Visual Studio 2012，在 MVC 4 应用程序上工作。我像过去一样创建了一个 Http 模块，并将其添加到 Web.config 中，如下所示：

```
<configuration>
 <system.web>
  <httpModules>
   <add name="MyModule" type="Services.MyModule, Services" />
  </httpModules>
 </system.web>
</configuration> 
```

但是，应用程序从未调用模块的 Init()。最终，我发现模块应该改为 inside `<system.webServer>`，元素命名`<modules>`为`<httpModules>`，如下所示：

```
<configuration>
 <system.webServer>
  <modules>
   <add name="MyModule" type="MyModule" type="Services.MyModule, Services" />
  </modules>
 </system.webServer>
</configuration> 
```

重新运行应用程序，它按预期调用了 Init()。FWIW，带有方向的页面在这里：http: [//msdn.microsoft.com/en-us/library/ms227673.aspx](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

高温高压

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-26T04:53:34.500

`<system.web>`适用于 IIS 6 及以下（包括 Cassini），`<system.webServer>`适用于 IIS 7 及以上。我通常将两者都放入 - 以防万一 - 然后将此节点添加到`<system.webServer>`它不会对冗余造成影响：

```
<validation validateIntegratedModeConfiguration="false" /> 
```

# cobol - 使用数组按顺序打印记录

> ID：15768206
> 
> 赞同：2
> 
> 时间：2013-04-02T15:34:25.623
> 
> 标签：cobol

我想知道我想做的事情是否可以在 COBOL 中完成。我正在尝试从一个无序的文件中读取医院和患者数据。我将使用数组以某种方式对传入的数据进行排序，而不是使用排序（就像每个人在现实生活中一样）。最后，我应该将报告打印到按医院编号分组的另一个文件中。

所以，

```
Hospital #
patient 018
patient 020

total for hospital #

Hospital #
patient 011
patient 009

total for hospital # 
```

所有这些医院的人数都在 1 到 30 之间，患者人数在 1 到 20 之间。我很清楚该怎么做以及如何总结患者余额，但你觉得这样去做怎么样：

将数据读入数组（这显然不止一维）。此时数据在数组中未排序。我认为它是否在数组中排序并不重要，只要它出现在排序的报告中即可。这听起来对吗？是的，这是一个任务。任何提示或建议，可以在不给出答案的情况下提供的反馈？

编辑：好的，所以我尝试创建一个二维类型数组，其中包含完成工作所需的字段（hos num、pat name、pat num、pat amnt）。当然，我想将每个患者的数量添加到医院小计的运行总计中。

这是我的数组：

```
01  HospArray value spaces.
       05  hosnum   occurs 30 times indexed by subsa.
         07  patnum   occurs 20 times indexed by subsb.
           10  patname  PIC X(20).
           10  patamt   PIC 9(7)v99.
         07  hossubtotal  PIC 9(7)v99. 
```

在读取文件并将其移动到我的工作存储字段时，我尝试执行两个执行不同的循环，如下所示：

```
 perform varying subsa from 1 by 1 until subsa > 30
             move hos-num-ws to hosnum (subsa)
          perform varying subsb from 1 by 1 until subsb > 20

               move pat-name-ws to patname(subsa, subsb)
               move pat-amnt-od-ws to patamt(subsa, subsb)
               add  patamt(subsa, subsb) to hossubtotal (suba)

          end-perform
       end-perform 
```

由于某种原因，这将无法编译，并给出以下错误：意外添加，我不确定为什么。我正在使用 openCobol。我没有很多经验，所以我不确定为什么不编译。我仍然不确定我是否朝着正确的方向前进。我知道我想说，为什么计数是在给定的医院号码上将患者数据移动到变量中，然后我应该知道当前医院号码何时完成。输出医院小计，然后再次重复该过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:01:17.347

“所有这些医院的人数都在 1 到 30 之间，患者人数在 1 到 20 之间”

因此，将这些值用作表中的“下标”。第一级的医院编号（1 到 30），第二级的患者编号（1 到 20）。一切都预先设置为空间。

当你列出来的时候，列出不是空格的医院（当时下标的值可以告诉你哪个，或者存储医院）和他们所有的不是空格的病人。

但是，您的样本输出中的患者“有点超出”1-20 :-)

编辑：

您的代码有几处问题。

加载表格时，您一次只会添加一个医院/患者组合。

从表中提取数据时，您将“循环”通过它。

您将医院编号移至表中，但将其移至组级别，因此将删除该条目下的任何内容。

我已经在评论中提到了错字。当您收到这样的编译消息时，您必须使用“好吧，这条线或这条线上方有问题”。

您在没有将起始值设置为零的情况下进行运行总计。

您不需要在进行过程中进行汇总，您可以在列出数据时进行。

其他几件事。您将索引称为“subsa”和“subsb”。这既没有“意义”又令人困惑（它们是索引，下标略有不同）。

你应该与缩写保持一致。您应该努力获得有意义的数据名称。

这是一些示例片段。我花*了一些*时间来命名和格式化。您可能认为这似乎需要付出很多努力，但这就是您的编辑器的能力所在。我没有多次输入任何长名称，但我敢打赌，您输入了每个短名称。

```
 01  HospArray value spaces.
       05  FILLER occurs 30 times 
                      indexed by I-Hospital-Entry.
           10  HA-Hospital-Entry.
               15  HA-Hospital-Number      pic xx. 
                   88  HA-hospital-not-present
                                           VALUE SPACE.
               15  FILLER occurs 20 times
                          indexed by I-Patient-Entry.
                   20  HA-Patient-Entry.
                       25  HA-Patient-Number         pic xx.
                           88  HA-Patient-not-present
                                           VALUE SPACE.
                       25  HA-Patient-Name           PIC X(20).
                       25  HA-Patient-Payment-Amount PIC 9(7)v99.
   01  Hospital-Sub-Total                            PIC 9(7)v99.
   01  W-Patient-Name                                pic x(20).
   01  Patient-Payment-Amount                        pic 9(7)v99.
   01  Hospital-Number.
       05  Hospital-Number-N                         pic 99.
   01  Patient-Number.
       ...
       SET I-Hospital-Entry         TO Hospital-Number-N
       SET I-Patient-Entry          TO Patient-Number-N 
       MOVE Hospital-Number         TO HA-Hospital-Number 
                                        ( I-Hospital-Entry )
       MOVE Patient-Number          TO HA-Patient-Number 
                                        ( I-Hospital-Entry 
                                           I-Patient-Entry )
       MOVE W-Patient-Name          TO HA-Patient-Name
                                        ( I-Hospital-Entry 
                                           I-Patient-Entry )
       MOVE Patient-Payment-Amount  TO HA-Patient-Payment-Amount
                                        ( I-Hospital-Entry 
                                           I-Patient-Entry )
       ...
       to output the results
       PERFORM                      LIST-PATIENTS-BY-HOSPITAL

       GOBACK
       .
   LIST-PATIENTS-BY-HOSPITAL.

       perform 
         varying I-Hospital-Entry 
           from 1 by 1 
           until I-Hospital-Entry > 30
           IF HA-hospital-not-present ( I-Hospital-Entry ) 
               CONTINUE
           ELSE
               PERFORM              LIST-PATIENTS
               DISPLAY Hospital-Sub-Total
           END-IF
           move HA-Hospital-Number 
                 ( I-Hospital-Entry ) 
                                    TO Hospital-Number
       end-perform
       .
   LIST-PATIENTS.
       perform 
         varying I-Patient-Entry 
           from 1 by 1 
           until I-Patient-Entry > 20
           IF HA-hospital-not-present ( I-Hospital-Entry ) 
               CONTINUE
           ELSE
               PERFORM              PATIENT-DETAILS
           END-IF
           DISPLAY Hospital-Sub-Total
       end-perform
       .
   PATIENT-DETAILS.
       move HA-Patient-Name 
             ( I-Hospital-Entry 
                I-Patient-Entry )   TO W-Patient-Name 
       move HA-Patient-Payment-Amount
             ( I-Hospital-Entry 
                I-Patient-Entry )   TO Patient-Payment-Amount 
       add Patient-Payment-Amount   TO Hospital-Sub-Total
       the "target" fields here can be in a formatted line for printing/DISPLAYing.
       . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:38:18.257

您提供的示例患者编号超出了 1 到 20 的范围。我猜你的意思是说每家医院有 1 到 20 名患者，而不是说患者人数在 1 到 20 之间。

我还认为您的陈述：“以某种方式对进来的数据进行排序”是这里的真正目标。

输入文件中的数据未排序，但您需要对其进行排序。有几种方法可以做到这一点：

*   将所有数据读入表中，然后使用外部 SORT 程序或您自己编写的内部排序（例如冒泡排序或类似的东西）对表进行排序。走这条路线将涉及进行两种排序，一种用于表格的每个维度（例如，按医院排序，然后按医院内的患者）

*   读取一条记录并将其添加到表中，以便始终对表进行排序。这意味着能够在表的顶部、表中的两个现有项目之间或表的末尾插入一个新项目。同样，这将是一个二维过程：添加医院，在医院内添加患者

*   比尔伍德格建议的方法只有在医院和患者人数在非常小的范围内时才会有效（正如您所建议的那样）。

无论如何，你现在有三个建议要跟进。由于这是一项家庭作业，我会根据围绕该作业教授的课程材料来选择。如果强调内部/外部排序，则走排序路线。如果多维表声明和操作是最近的主题，那么构建并保持表排序。如果出现散列，请考虑比尔的建议。

# javascript - 在页面开始加载之前向 javascript 的 Window 对象添加方法

> ID：15768217
> 
> 赞同：0
> 
> 时间：2013-04-02T15:34:59.047
> 
> 标签：javascript

是否可以在请求的页面开始加载之前向动态创建的 iframe 的 Window 对象添加方法？我希望这样做`iframe.contentWindow.myMethod = function() { }`，但是 iframe.contentWindow 在页面加载之前为 NULL。

我可以在 onload 事件触发时添加该方法，但是某些页面对我正在添加的方法进行内联调用。由于浏览器在收到“方法不存在”时执行代码，因此会引发错误。

我希望有一点我可以在创建窗口对象后立即访问它，然后再下载和处理内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:37:05.250

> 我希望有一点我可以在创建窗口对象后立即访问它，然后再下载和处理内容？

我非常怀疑是否存在。也许您可以修改正在加载的页面，以便它们调用父窗口中的方法，您知道您已经定义了该方法。例如，而不是他们这样做：

```
someMethod("some arg"); 
```

他们会做的

```
parent.someMethod("some arg"); 
```

...`someMethod`打开窗口中的全局函数在哪里。

[实例](http://jsbin.com/anahic/1)| [来源](http://jsbin.com/anahic/1/edit)| [iframe 的来源](http://jsbin.com/egucij/1/edit)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T15:37:14.747

您无法在页面*开始*加载之前对其进行修改 - 没有什么可修改的。您可以在加载*时*`<script>`对其进行修改 - 使用顶部的标签`<head>`直接执行，而不是等到`onload`. 不过，这大约是你能做到的最快的时间。

# javascript - 从 Controller 使用 EmberJS transitionToRoute 时，如何更正 URL 路径中的 [object%20Object]？

> ID：15768218
> 
> 赞同：0
> 
> 时间：2013-04-02T15:35:03.457
> 
> 标签：javascript, ember.js

我正在尝试在模板中设置一个操作，以使用在客户端执行的 json / 和 js 的组合，将用户转换到基于动态生成的导航栏的另一条路线。我已经设法配置我的应用程序，以便我可以生成正常工作的常规路径，但我想使用转换来避免额外的页面加载。

（希望）必要信息的要点是：

[https://gist.github.com/rjfranco/5289201](https://gist.github.com/rjfranco/5289201)

JS：

```
App.Router.map ->
  @route 'index', {path: "/#{short_name}"}
  @route 'customList', {path: "/#{short_name}/custom-list/:list_name"}
  @route 'multiLevelList', {path: "/#{short_name}/multi-level-list/:list_name/:list_level"}

App.EventController = Em.ObjectController.extend
  goTo: (navbar_icon) ->
    @transitionToRoute navbar_icon.route, navbar_icon.context

# Sample passed navbar_icon
navbar_icon =
  img_src: '/somesource_or_another.jpg'
  display_name: 'My Link Name!'
  route: 'customList'
  context: {list_name: 'Exhibitors'} 
```

模板：

```
{{#each controller.navbarIcons}}
  <li><a {{action goTo this}}><img {{bindAttr src="image_src"}} width="36" height="36" />{{display_name}}</a></li>
{{/each}} 
```

预期的页面实际上加载良好，但应用程序转换到的 url 不正确，刷新会破坏应用程序。

我期待一个类似于以下内容的 URL：`/ruhaha/custom-list/Exhibitors`
我最终得到一个类似的 URL：`/ruhaha/custom-list/[object%20Object]`

**轻微更新：** 我发现我可以在应用程序上滥用几种方法来产生我想要的结果：

App.handleURL('/ruhaha/custom-list/Exhibitors')
App.Router.router.replaceURL('/ruhaha/custom-list/Exhibitors')

这实际上会触发路由，并替换 url，从而有效地将我的应用程序转换到我想要的状态，而无需页面请求。尽管这可行，但我很确定这是处理此问题的错误方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:54:23.267

我最终通过在我的路由中指定一个刚刚返回我期望的参数的序列化方法解决了这个问题（在 freenode 上的 nerdyworm 的帮助下）：

```
App.CustomListRoute = Em.Route.extend
  serialize: (params) ->
    params 
```

# android - 不幸的是，项目已停止 - 错误

> ID：15768221
> 
> 赞同：1
> 
> 时间：2013-04-02T15:35:08.893
> 
> 标签：android, android-layout, android-button

我是 Java 和所有这类东西的新手，我不知道（即使在看了数百个教程和数百个阅读教程之后）我做错了什么。

好吧，我想制作一个应用程序，它可以对我所有的衣服进行分类。

我已经制作了 4 个 imageButtons，一个会导致一个新的活动（文件存在）和 3 个空的。 ![在此处输入图像描述](https://i.stack.imgur.com/RxilG.jpg)

我想在模拟器上试用 imageButton1，但每次打开应用程序时都会显示一个空白页面，几秒钟后它会崩溃（“不幸的是应用程序已停止”）。有时甚至 Launcher 也会停止。

你知道，我做错了什么吗？

这是我的主要 xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@dimen/activity_horizontal_margin"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="324dp"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/imageButton1"
                android:layout_width="130dp"
                android:layout_height="127dp"
                android:layout_weight="1"
                android:scaleType="centerCrop"
                android:src="@drawable/view" android:contentDescription="@string/todo"/>

            <ImageButton
                android:id="@+id/imageButton2"
                android:layout_width="117dp"
                android:layout_height="122dp"
                android:layout_weight="1"
                android:scaleType="centerCrop"
                android:src="@drawable/wishlist" />
        </LinearLayout>

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.74" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="       My Closet"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#610B5E" />

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/_wishlist"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#610B5E" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageButton
                    android:id="@+id/imageButton3"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:scaleType="centerCrop"
                    android:src="@drawable/calculator" />

                <ImageButton
                    android:id="@+id/imageButton4"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:scaleType="centerCrop"
                    android:src="@drawable/laundry" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="      Calculator"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#610B5E" />

                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="           Laundry"
                    android:textAppearance="?android:attr/textAppearanceLarge"
                    android:textColor="#610B5E" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

            </TableRow>

        </TableLayout>
    </LinearLayout>

</RelativeLayout> 
```

还有我的日志：

```
04-02 14:56:01.615: E/Trace(691): error opening trace file: No such file or directory (2)
04-02 14:56:02.655: D/AndroidRuntime(691): Shutting down VM
04-02 14:56:02.655: W/dalvikvm(691): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
04-02 14:56:02.696: E/AndroidRuntime(691): FATAL EXCEPTION: main
04-02 14:56:02.696: E/AndroidRuntime(691): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.blogspot.ladyricecake.www/com.blogspot.ladyricecake.www.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.os.Looper.loop(Looper.java:137)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-02 14:56:02.696: E/AndroidRuntime(691):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 14:56:02.696: E/AndroidRuntime(691):  at java.lang.reflect.Method.invoke(Method.java:511)
04-02 14:56:02.696: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-02 14:56:02.696: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-02 14:56:02.696: E/AndroidRuntime(691):  at dalvik.system.NativeStart.main(Native Method)
04-02 14:56:02.696: E/AndroidRuntime(691): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
04-02 14:56:02.696: E/AndroidRuntime(691):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-02 14:56:02.696: E/AndroidRuntime(691):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.Activity.setContentView(Activity.java:1867)
04-02 14:56:02.696: E/AndroidRuntime(691):  at com.blogspot.ladyricecake.www.MainActivity.onCreate(MainActivity.java:16)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.Activity.performCreate(Activity.java:5008)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-02 14:56:02.696: E/AndroidRuntime(691):  ... 11 more
04-02 14:56:02.696: E/AndroidRuntime(691): Caused by: java.lang.reflect.InvocationTargetException
04-02 14:56:02.696: E/AndroidRuntime(691):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-02 14:56:02.696: E/AndroidRuntime(691):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
04-02 14:56:02.696: E/AndroidRuntime(691):  ... 23 more
04-02 14:56:02.696: E/AndroidRuntime(691): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x5/d=0x1001 a=2 r=0x7f040000}
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.content.res.Resources.loadDrawable(Resources.java:1892)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.View.<init>(View.java:3336)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.View.<init>(View.java:3273)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.view.ViewGroup.<init>(ViewGroup.java:421)
04-02 14:56:02.696: E/AndroidRuntime(691):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:184)
04-02 14:56:02.696: E/AndroidRuntime(691):  ... 26 more
04-02 14:56:07.945: I/Process(691): Sending signal. PID: 691 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:38:55.163

最低的`Caused by`写着：

```
android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x5/d=0x1001 a=2 r=0x7f040000} 
```

这将我带到您的RelativeLayout。您已将尺寸指定为`background`，它需要一个 Drawable：

 ~~~~```
android:background="@dimen/activity_horizontal_margin" 
```~~~~

# php - 和标签覆盖

> ID：15768225
> 
> 赞同：2
> 
> 时间：2013-04-02T15:35:31.290
> 
> 标签：php, html, html-table, pre

有什么原因`<tr>`和`<td>`标签可以在`<pre>`标签内工作吗？

我正在使用`<pre>`标签在网站上显示一些 PHP 代码，代码中包含 html 标签的各种实例，`<tr>`并且`<td>`这些实例从标签中跳出`<pre>`并在底部执行。他们为什么要这样做？？

它们包含在`echo`"" 和 '' 之后和内部，并且两者的执行方式相同。我的 CSS 中没有`pre`，并且在网上找不到任何类似的问题。

例子：

```
echo '<table border="1">';
echo "<tr><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td></tr>";
while($info = mysql_fetch_array($data)){
echo "<tr>";
echo "<td>" . $info['a'] . "</td>";
echo "<td>" . $info['b'] . "</td>"; 
echo "<td>" . $info['c'] . "</td>";
echo "<td>" . $info['d'] . "</td>";
echo "<td>" . $info['e'] . "</td>";
echo "</tr>";
};
echo "</table>"; 
```

我试过使用`print`，没有变化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:36:35.637

您必须将`<`and编码`>`为 HTML 实体。

[https://mothereff.in/html-entities](https://mothereff.in/html-entities)

[https://html.spec.whatwg.org/multipage/named-characters.html#named-character-references](https://html.spec.whatwg.org/multipage/named-characters.html#named-character-references)

如此，`<`将会如此`&lt;``>``&gt;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:56:58.640

我认为`<pre>`标签的具体用途是显示元素的本来面目，即使是非`&nbsp;`多个空格也会显示，也不会显示键盘的断线*（非`<br />`标签）*，而不是让 HTML 标签失败。您可以使用此格式`&lt;tag>`使标记失败。但我不知道`<pre>`PHP 代码是否会失败。

# php - 在 CodeIgniter 和 Hostgator 中运行 cron 作业

> ID：15768231
> 
> 赞同：2
> 
> 时间：2013-04-02T15:35:53.847
> 
> 标签：php, codeigniter, cron, command-line-interface

我正在尝试在 codeigniter 和 hostgator 中运行以下 cron 作业

```
/usr/bin/php /home/username/public_html/index.php cronjob contact martin 
```

但没有任何反应，我收到以下电子邮件：

```
<h4>A PHP Error was encountered</h4>

<p>Severity: Notice</p>
<p>Message:  Undefined index:  REMOTE_ADDR</p>
<p>Filename: core/Input.php</p>
<p>Line Number: 351</p>

<p>Severity: Warning</p>
<p>Message:  Cannot modify header information - headers already sent by (output started at /home/iglesias/public_html/mysite.com/system/core/Exceptions.php:185)</p>
<p>Filename: libraries/Session.php</p>
<p>Line Number: 675</p> 
```

我的控制器如下（只是发送电子邮件进行测试）。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Cronjob extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->cron();
}

function cron()
{
    if(!$this->input->is_cli_request())
    {               
        die();
    }
}

function contact($name)
{
    $this->load->library('email');
    $config['mailtype'] = 'html';
    $this->email->initialize($config);

    $this->email->from('test@gmail.com', $name);
    $this->email->to('test2@gmail.com');
    $this->email->subject('test');
    $this->email->message('test sent');             
    $this->email->send();
}
} 
```

难道我做错了什么？我将衷心感谢您的帮助。

当从 URL 调用时，我更改了 .htaccess 以删除 index.php，我不知道这是否有关系。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-17T14:50:04.517

我的答案是很久以后才出现的，但它可以帮助其他人。这个错误显然是众所周知的，但只有一个快速修复它：[http](http://ellislab.com/forums/viewthread/227672/) ://ellislab.com/forums/viewthread/227672/ 它说它发生在你自动加载会话库时，它调用 CI_Input::ip_address()未初始化或类似的东西。快速修复在输入类中（core/Input.php Line 351 (CI 2.1.2)）：

```
$this->ip_address = $_SERVER['REMOTE_ADDR']; 
```

变得 ：

```
if(isset($_SERVER['REMOTE_ADDR']))
   $this->ip_address = $_SERVER['REMOTE_ADDR'];
else
   $this->ip_address = '0.0.0.0'; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:46:50.093

您是否在 config/routes.php 中设置了正确的路由？尝试从您的浏览器运行脚本（或注释掉执行部分）以确保它可以通过您当前的路由/htaccess 设置访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:48:42.670

检查 Hostgator 是否将 Apache 作为 Fast-CGI 而不是模块运行。如果是这种情况，PHP 的运行路径可能与您使用的不同。

如果您检查 phpinfo，您可能会看到相关信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T11:57:13.690

@mariek 的好回答

但是我们也可以通过`@`在语法前使用符号来做到这一点。

所以只是在“core/Input.php”第 352 行（CI 版本 2.2.2）中做了一点改动

`$this->ip_address = $_SERVER['REMOTE_ADDR'];`

到

`$this->ip_address = @$_SERVER['REMOTE_ADDR'];`

并完成。

# javascript - 尝试使用基本的 Javascript 为 div 设置动画并使其变大但使其平稳增长

> ID：15768242
> 
> 赞同：0
> 
> 时间：2013-04-02T15:36:18.210
> 
> 标签：javascript, animation

所以这是我的代码

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
    #box {
        width: 300px;
        height: 300px;
        background-color: blue;
    }
    </style>
</head>
<body>
    <div id="box"></div>
</body>
<script src="main.js"></script>
</html> 
```

javascript

```
var box = document.getElementById('box');

function changeColor() {
    box.style.width = "600px";
    box.style.height = "600px";
    box.style.background = "red";
}

box.onclick = setInterval(changeColor, 5000); 
```

如您所见，它在一瞬间发生了变化。我有盒子改变大小和颜色，但我希望它逐渐做到这一点。我知道它在 Jquery 中很容易，但我正在努力提高我在 Javascript 中的技能，任何建议都会有所帮助，谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:01:42.500

javascript动画背后的基本前提是递归。动画元素需要有“帧”，单帧需要超时，直到它进入下一个序列，这就是为什么递归是有益的。

注意：这个函数不会停止 div 的动画，你需要输入条件代码来停止 setTimeout() 的设置。

```
function moveEl(el)
{
    var left = parseInt(el.style.left) || 0;

    el.style.position = 'relative';
    el.style.left = (left + 1) + 'px';

    // Recursive timeout to move the element left 1px every 20ms
    setTimeout(function(){
        moveEl(el);
    }, 20);
}

var el = document.getElementById('box');

// Start the animation
moveEl(el); 
```

[jsFiddle 示例](http://jsfiddle.net/MvKkj/2)

这应该可以帮助您编写一些自定义动画代码，尽管我会将其视为学习练习。jQuery 的动画技术非常强大，跨浏览器兼容，并且比我拼凑起来实现相同效果的任何自定义代码更有用。

颜色之间的动画：

在颜色之间平滑动画有点棘手，如果使用上述技术，需要在两种颜色之间加载十六进制颜色代码才能从一种颜色平滑过渡到另一种颜色。幸运的是，在现代浏览器中，您可以将一个元素的不透明度动画化为零，而下方元素的纯色看起来好像一个元素已动画化。再次，jQuery 有多种方式来支持 IE7 和 IE8 等及其`fadeIn()`功能`fadeOut()`。

# java - 当在本地不存在类文件的地方下载对象时，RMI 如何定位类？

> ID：15768244
> 
> 赞同：0
> 
> 时间：2013-04-02T15:36:22.823
> 
> 标签：java, rmi

我正在努力理解 RMI 如何在本地不存在类文件的地方下载对象时定位类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:44:26.223

RMI 可以通信对象*和它们的类*。

如果某个类在本地代码库中不可用，则可以从 URL 下载它，并由特殊的类加载器加载。

[有关RMI 代码下载](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/codebase.html)，请参阅本教程。

# c# - 模拟对象列表

> ID：15768249
> 
> 赞同：3
> 
> 时间：2013-04-02T15:36:31.833
> 
> 标签：c#, unit-testing, moq

我正在学习如何编写单元测试并且有点坚持使用 Mocks。我正在使用 Moq 进行模拟。我正在使用 VS 2012 附带的内置测试框架。如果这样更好（并且可以解决我的问题），我可以切换到 NUnit。我有一个工作模式设置单元。我正在测试的方法是重置用户密码。我告诉 Moq 根据我正在测试的方法中调用的唯一代码返回用户列表：

```
var mock = new Mock<IUnitOfWork>();
        mock.Setup(u => u.UserRepository.Get(t => t.PassResetCode.Equals("test1"), null, "")).Returns(
            new List<User>
        {
            new User { UserId = 4, FirstName = "Test4", LastName = "LastName", Email = "test4@test.com", Salt = salt, Password = pass, AccountConfirmed = true, PassResetCode = "test1", PassResetExpire = new Nullable<DateTime>(DateTime.Now.Add(ts)) },                
        }); 
```

在我正在测试的方法中，它调用以下内容：

```
var users = unitOfWork.UserRepository.Get(u => u.PassResetCode.Equals(code)); 
```

据我所知，它没有返回我在此处的测试中创建的用户列表。我是否也需要模拟工作单元类中的存储库？或者只是模拟工作单元界面就足够了？如果有帮助，我可以发布更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:44:04.480

您的存储库接受委托，并且您正在设置期望特定委托的期望`t => t.PassResetCode.Equals("test1")`。我认为 mock inside 会将传递的谓词与这个委托进行比较。不同的委托实例不会以 99.99% 的概率匹配。您可能应该避免在此特定期望中为谓词设置特定约束并`It.IsAny<>()`改为使用。

```
var mock = new Mock<IUnitOfWork>();
mock.Setup(It.IsAny<Func<User, bool>>(), null, ""), ...).Returns(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:40:58.493

```
var mock = new Mock<IUnitOfWork>();
        mock.Setup(u => u.UserRepository.Get("test1", null, "")).Returns(
            new List<User>
        {
            new User { UserId = 4, FirstName = "Test4", LastName = "LastName", Email = "test4@test.com", Salt = salt, Password = pass, AccountConfirmed = true, PassResetCode = "test1", PassResetExpire = new Nullable<DateTime>(DateTime.Now.Add(ts)) },                
        }); 
```

您必须确保您传递的正是这些参数。或者，您可以将语法`It.IsAny<TYPE>()`用于您不关心的任何参数。或者您可以`It.Is<TYPE>(condition)`检查参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:42:39.460

假设您使用的是[Moq](https://code.google.com/p/moq/)，问题是 setup 方法不能处理这样的 lambdas。您需要使用`It.IsAny<Func<T, bool>> ()`作为您的第一个参数。

# wordpress - Magento/WHMCS 的 Wordpress 查询返回错误结果

> ID：15768256
> 
> 赞同：1
> 
> 时间：2013-04-02T15:36:47.257
> 
> 标签：wordpress, magento, whmcs

我正在尝试在网站的页脚列中显示来自 WordPress 中特定类别的帖子。除非页脚显示在 WHMCS 或 Magento 中集成的页面上，否则它工作正常。出于某种原因，在这些应用程序中的那些页面上，它仍然显示博客文章列，但不是返回指定类别中的最后 X # 篇文章，而是返回 X # 次的最后一篇文章。

例如，这是从特定类别中提取的独立 Wordpress 博客专栏：

[http://www.thinkshovels.com/includes/latest_work.php](http://www.thinkshovels.com/includes/latest_work.php)

这正是我们希望在整个站点中显示的内容，但是如果您访问[http://www.thinkshovels.com/service/](http://www.thinkshovels.com/service/)，您会看到中间列没有显示该信息。

这是查询wordpress的代码：

> 定义（'WP_USE_THEMES'，假）；要求（'/home/shovels/public_html/blog/wp-load.php'）；
> 
> ```
> $qarray = array('cat' => '5', 'posts_per_page' => 4);
> query_posts($qarray); 
> ```
> 
> while (have_posts()): the_post();
> 
> $args = array('post_type' => 'attachment', 'numberposts' => -1, 'post_status' => null, 'post_parent' => $post->ID );

我不确定我是否在这里做错了什么，或者是否有更好的方法来解决这个问题，但似乎 WHMCS 和 Magento 打破了这些查询。

任何提示/建议表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:00:33.303

而不是`query_posts`尝试使用`get_posts`来代替。

根据[Developer.WordPress.com](http://developer.wordpress.com/2012/05/14/querying-posts-without-query_posts/)的文章，您应该避免使用 query_posts。

# c# - 使用 where 子句从数据表中获取特定值

> ID：15768259
> 
> 赞同：1
> 
> 时间：2013-04-02T15:36:50.403
> 
> 标签：c#, linq, datatable, where, datarow

我想从`query`一个特定的值`DataTable`。

假设我有一个`DataTable`包含 2 列的内容：

*   ID
*   项目名称

现在我想做的就像我会用mysql做的那样：`SELECT * FROM "DataTable" WHERE item_name = 'MyItemName'`

然后获取属于那个'item_name'的id ...

```
int blah;
while (MyReader.Read())
{
    blah = MyReader.GetInt32("id");
} 
```

**现在：我怎样才能做到这一点`DataTable`？**

我有一个片段，但我似乎无法在消息框中显示返回的值：

```
string test = Item1txt.Text;

var query = producten.Rows.Cast<DataRow>().Where(x => x.Field<string>("item_name") == test);
foreach (var st in query)
{
    MessageBox.Show(st.ToString());
    // how can i show the id that belongs to "test" ?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:40:12.413

`query`将是一个`IQueryable<DataRow>`，所以`st`将是一个`DataRow`。试试这个：

```
foreach (var st in query)
{
    MessageBox.Show(st.Field<int>("id").ToString());
} 
```

或者，如果您知道只有 item 带有 that `item_name`，这里有一个替代版本，它基本上做同样的事情，但可能更容易理解：

```
var st = producten.Rows.Cast<DataRow>().FirstOrDefault(x => x.Field<string>("item_name") == test);
if(item != null)
{
    MessageBox.Show(st.Field<int>("id").ToString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:49:43.403

您可以直接在数据表上使用 linq，而`Rows`无需`Cast`.

```
var query = producten.AsEnumerable().Where(x => x.Field<string>("item_name") == test);
foreach (var st in query)
{
    MessageBox.Show(st.Field<int>("id"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:39:16.190

我通常使用数据表的默认视图的 Rowfilter 属性，但我必须承认我自己从未做过 LINQ，所以现在可能有更好的方法......

# opencv - 使用 cvQueryFrame() 捕获图像数据时获得最大分辨率

> ID：15768260
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:36:50.687
> 
> 标签：opencv, video-capture, image-capture

我使用 OpenCV 和这段代码（仅相关片段）从高清摄像头捕获一些图像数据：

```
data->capture =cvCaptureFromCAM(data->config.device); // open the device
...
IplImage *grabFrame=cvQueryFrame(data->capture); 
```

使用此代码，我总是得到一个大小为 640x480 的grabFrame，而相机支持 1920x1080。当我在初始化后做类似的事情时：

```
cvSetCaptureProperty(data->capture,CV_CAP_PROP_FRAME_WIDTH,1920);
cvSetCaptureProperty(data->capture,CV_CAP_PROP_FRAME_HEIGHT,1080); 
```

我得到了真正的高清分辨率的结果——但图像模糊，这意味着它只能从 640x480 放大到高清分辨率。那么：如何强制 OpenCV 真正使用填充原生分辨率？

它似乎不是驱动程序/硬件问题，因为它发生在 Windows 和 Linux 上 - 当我在这些系统上尝试任何其他应用程序时，我得到了预期的完整的本机分辨率。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:46:57.910

`1.`来自（旧）opencv C 文档：

```
The function cvSetCaptureProperty() sets the specified property of video capturing.     
Currently the function supports only video files: CV_CAP_PROP_POS_MSEC, CV_CAP_PROP_POS_FRAMES, CV_CAP_PROP_POS_AVI_RATIO. 
```

`2.`您可以尝试使用 openNI 编译 opencv，因为`VideoCapture`类使用它来设置捕获设备选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T10:41:21.633

它帮助了我：

```
static const int MAX_WIDTH_RESOLUTION = 7680;
static const int MAX_HEIGHT_RESOLUTION = 4800;

cvCreateCameraCapture(...);
cvSetCaptureProperty(pCam, CV_CAP_PROP_FRAME_WIDTH, MAX_WIDTH_RESOLUTION);
cvSetCaptureProperty(pCam, CV_CAP_PROP_FRAME_HEIGHT, MAX_HEIGHT_RESOLUTION);
cvQueryFrame(...); 
```

使用两个不同的网络摄像头，我有 1900x1080 和 1280x960 帧。

# mysql - ON DELETE CASCADE 不起作用

> ID：15768262
> 
> 赞同：0
> 
> 时间：2013-04-02T15:36:53.310
> 
> 标签：mysql, cascade

我在 MySql 数据库中创建了两个表：

```
create table scope (
    name_scope varchar(50) not null primary key,
    description varchar(100)
);

create table value_scope (
    id_value int not null primary key AUTO_INCREMENT,
    name_scope    varchar(50) not null,
    value varchar(100) not null, 
    foreign key (name_scope) references scope(name_scope) ON DELETE CASCADE
); 
```

一个范围可以有多个值。当我删除范围时；我希望它各自的值也会被删除，但什么也没有发生。我尝试以相反的方式进行，但范围仍然存在。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T10:12:09.303

MyISAM 不支持参照完整性。请改用 InnoDB。

# c# - 将员工分成每周轮班（4 周），每周唯一

> ID：15768265
> 
> 赞同：3
> 
> 时间：2013-04-02T15:37:08.623
> 
> 标签：c#, asp.net-mvc, collections

几天来，我一直在为一个要求而苦苦挣扎，我认为我正在使它变得比现在更难。我想制作某种流体旋转/移位系统。这应该是一个向导/随机器功能，只是为了帮助用户创建一个“一次性”时间表（设施管理）。我想让它尽可能通用。

X 员工数量

X 每日轮班数量（例如早上、午餐、晚上和晚上）

X 周期数（例如 4 周 - 周期为一周）

这将导致以下设置：

**第 1 周**：早上 (*)、午餐、晚上和晚上

**第 2 周**：早上、午餐 (*)、晚上和晚上

**第 3 周**：早上、午餐、晚上 (*) 和晚上

**第 4 周**：早上、午餐、晚上和晚上 (*)

每个员工每周都必须轮班，但接下来的几周轮班不得相同。我可以要求应该有足够的员工来填补所有星期的每个班次。每次执行的结果应该是随机的。

例子：

如果我有 8 名员工，每周轮班 4 次。每班每周至少应有 2 名员工。

如果我每周有 4 名员工和 4 个班次。每周每班至少应有 1 名员工。

员工数量必须始终等于或大于轮班数量。

是否有任何“剩余”这没关系，当员工数量与轮班数量不匹配时，用户必须定义​​更多轮班或员工。

示例可以在这里看到：http: [//v2.iclean.dk/shifts](http://v2.iclean.dk/shifts?name=Fred)

我有以下代码：

**课程**

```
[DebuggerDisplay("ID: {ID}, Name: {Name}")]
public class Staff
{
    public Staff(int id, string name)
    {
        ID = id;
        Name = name;
        Schedulers = new List<StaffScheduler>();
    }
    public int ID { get; set; }
    public string Name { get; set; }
    public List<StaffScheduler> Schedulers { get; set; }
}
public class StaffMap
{
    public StaffMap(Staff staff, StaffScheduler scheduler)
    {
        Staff = staff;
        Scheduler = scheduler;
    }
    public Staff Staff { get; set; }
    public StaffScheduler Scheduler { get; set; }
}

[DebuggerDisplay("ID: {ID}, Name: {Name}")]
public class StaffScheduler
{
    public StaffScheduler(int id, string name)
    {
        ID = id;
        Name = name;
    }

    public int ID { get; set; }
    public string Name { get; set; }
}

[DebuggerDisplay("Name: {Name}, Start: {DateStart}, End: {DateEnd}")]
public class DateRangeShift
{
    public DateRangeShift()
    {
        Staff = new List<StaffMap>();
    }
    public DateRangeShift(string name, DateTime start, DateTime end)
        : this()
    {
        Name = name;
        DateStart = start;
        DateEnd = new DateTime(end.Year, end.Month, end.Day, 23, 59, 59);
    }

    public string Name { get; set; }
    public DateTime DateStart { get; set; }
    public DateTime DateEnd { get; set; }

    public List<StaffMap> Staff { get; set; }
} 
```

**MVC 控制器代码**

```
private readonly int SHIFTS_MAX_SHUFFLE_RETRIES = 50;

public ActionResult Index()
{
    var dailySchedules = new List<StaffScheduler>() { 
        new StaffScheduler(1, "Morning"), 
        new StaffScheduler(2, "Lunch"), 
        new StaffScheduler(3, "Evening"), 
        new StaffScheduler(4, "Night")
    };

    List<DateRangeShift> shiftList = new List<DateRangeShift>();
    shiftList.Add(new DateRangeShift("Week 1", new DateTime(2013, 3, 4), new DateTime(2013, 3, 10)));
    shiftList.Add(new DateRangeShift("Week 2", new DateTime(2013, 3, 11), new DateTime(2013, 3, 17)));
    shiftList.Add(new DateRangeShift("Week 3", new DateTime(2013, 3, 18), new DateTime(2013, 3, 24)));
    shiftList.Add(new DateRangeShift("Week 4", new DateTime(2013, 3, 25), new DateTime(2013, 3, 31)));

    List<Staff> staffList = new List<Staff>();
    staffList.Add(new Staff(1, "Fred Smith"));
    staffList.Add(new Staff(2, "Charlie Brown"));
    staffList.Add(new Staff(3, "Samantha Green"));
    staffList.Add(new Staff(4, "Bash Malik"));
    staffList.Add(new Staff(5, "Bryan Griffiths"));
    staffList.Add(new Staff(6, "Akaash Patel"));
    staffList.Add(new Staff(7, "Kang-Hyun Kim"));
    staffList.Add(new Staff(8, "Pedro Morales"));

    var shiftSegmentSize = (int)Math.Floor((double)staffList.Count / (double)dailySchedules.Count)

    int shuffleCount = 0;
    bool shuffleMatchedSize = true;
    do
    {
        shiftList.ForEach(e => e.Staff.Clear());
        shuffleMatchedSize = true;

        foreach (var shift in shiftList)
        {
            foreach (var scheduler in dailySchedules)
            {
                var schedulerEmployees = staffList.OrderByDescending(e => e.Schedulers.Count()).ThenBy(e => Guid.NewGuid()).Where(e => !shiftList.Any(sl => sl.Staff.Any(s => s.Scheduler.ID == scheduler.ID && s.Staff.ID == e.ID)) && !shift.Staff.Any(s => s.Staff.ID == e.ID)).Take(shiftSegmentSize).ToList();
                if (schedulerEmployees.Count < shiftSegmentSize)
                {
                    shuffleMatchedSize = false;
                    shuffleCount++;
                    break;
                }

                while (schedulerEmployees.Count > 0)
                {
                    var staffSelector = schedulerEmployees.FirstOrDefault();

                    var staff = staffList.FirstOrDefault(e => e.ID == staffSelector.ID);
                    staff.Schedulers.Add(scheduler);

                    shift.Staff.Add(new StaffMap(staff, scheduler));

                    schedulerEmployees.Remove(staffSelector);
                }
            }
            if (!shuffleMatchedSize)
                break;
        }

    } while (!shuffleMatchedSize && shuffleCount < SHIFTS_MAX_SHUFFLE_RETRIES);

    ViewData["Iterations"] = shuffleCount;

    return View(shiftList);
} 
```

但是因为我按分配给员工的班次数量排序，然后随机排序..我有一个重试，直到我得到一分钟。员工/班次匹配。

```
<h2>Week 1 <span>(04-03-2013 - 10-03-2013)</span></h2>
<table>
    <tr>
        <td>Morning</td>
        <td>Akaash Patel, Bash Malik</td>
    </tr>
    <tr>
        <td>Lunch</td>
        <td>Fred Smith, Kang-Hyun Kim</td>
    </tr>
    <tr>
        <td>Evening</td>
        <td>Charlie Brown, Samantha Green</td>
    </tr>
    <tr>
        <td>Night</td>
        <td>Bryan Griffiths, Pedro Morales</td>
    </tr>
</table>
<h2>Week 2 <span>(11-03-2013 - 17-03-2013)</span></h2>
<table>
    <tr>
        <td>Morning</td>
        <td>Fred Smith, Kang-Hyun Kim</td>
    </tr>
    <tr>
        <td>Lunch</td>
        <td>Akaash Patel, Bash Malik</td>
    </tr>
    <tr>
        <td>Evening</td>
        <td>Bryan Griffiths, Pedro Morales</td>
    </tr>
    <tr>
        <td>Night</td>
        <td>Charlie Brown, Samantha Green</td>
    </tr>
</table>
<h2>Week 3 <span>(18-03-2013 - 24-03-2013)</span></h2>
<table>
    <tr>
        <td>Morning</td>
        <td>Charlie Brown, Samantha Green</td>
    </tr>
    <tr>
        <td>Lunch</td>
        <td>Bryan Griffiths, Pedro Morales</td>
    </tr>
    <tr>
        <td>Evening</td>
        <td>Akaash Patel, Fred Smith</td>
    </tr>
    <tr>
        <td>Night</td>
        <td>Bash Malik, Kang-Hyun Kim</td>
    </tr>
</table>
<h2>Week 4 <span>(25-03-2013 - 31-03-2013)</span></h2>
<table>
    <tr>
        <td>Morning</td>
        <td>Bryan Griffiths, Pedro Morales</td>
    </tr>
    <tr>
        <td>Lunch</td>
        <td>Charlie Brown, Samantha Green</td>
    </tr>
    <tr>
        <td>Evening</td>
        <td>Bash Malik, Kang-Hyun Kim</td>
    </tr>
    <tr>
        <td>Night</td>
        <td>Akaash Patel, Fred Smith</td>
    </tr>
</table> 
```

我无法理解如何做到这一点。希望有人可以指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:58:15.757

我认为这对你有用：

```
 int maxLength = Math.Max(shiftList.Count, dailySchedules.Count);

        var shiftSegmentSize = staffList.Count / maxLength;

        var schedulerEmployees = staffList.OrderBy(e => Guid.NewGuid()) 
                                          .Take(shiftSegmentSize * maxLength) 
                                          .ToArray(); //

        for (int k = 0; k < shiftList.Count; k++)
        {
            for (int j = 0; j < dailySchedules.Count; j++)
            {
                int staffindex = (maxLength + j - k) % maxLength;

                for (int i = 0; i < shiftSegmentSize; i++)
                {
                    schedulerEmployees[staffindex + (i * maxLength)].Schedulers.Add(dailySchedules[j]);
                    shiftList[k].Staff.Add(new StaffMap(schedulerEmployees[staffindex + i * maxLength], dailySchedules[j]));
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:08:30.477

我在这里玩你的代码，我认为现在是正确的：

```
 var dailySchedules = new List<StaffScheduler>() { 
            new StaffScheduler(1, "Morning"), 
            new StaffScheduler(2, "Lunch"), 
            new StaffScheduler(3, "Evening"), 
            new StaffScheduler(4, "Night")
        };

        List<DateRangeShift> shiftList = new List<DateRangeShift>();
        shiftList.Add(new DateRangeShift("Week 1", new DateTime(2013, 3, 4), new DateTime(2013, 3, 10)));
        shiftList.Add(new DateRangeShift("Week 2", new DateTime(2013, 3, 11), new DateTime(2013, 3, 17)));
        shiftList.Add(new DateRangeShift("Week 3", new DateTime(2013, 3, 18), new DateTime(2013, 3, 24)));
        shiftList.Add(new DateRangeShift("Week 4", new DateTime(2013, 3, 25), new DateTime(2013, 3, 31)));

        List<Staff> staffList = new List<Staff>();
        staffList.Add(new Staff(1, "Fred Smith"));
        staffList.Add(new Staff(2, "Charlie Brown"));
        staffList.Add(new Staff(3, "Samantha Green"));
        staffList.Add(new Staff(4, "Bash Malik"));
        staffList.Add(new Staff(5, "Bryan Griffiths"));
        staffList.Add(new Staff(6, "Akaash Patel"));
        staffList.Add(new Staff(7, "Kang-Hyun Kim"));
        staffList.Add(new Staff(8, "Pedro Morales"));

        var shiftSegmentSize = (int)Math.Floor((double)staffList.Count / (double)dailySchedules.Count);

        Dictionary<StaffScheduler, Staff[]> map = new Dictionary<StaffScheduler, Staff[]>();

        foreach (var schedule in dailySchedules)
        {
            map.Add(schedule, staffList.ToArray());
        }

        Random r = new Random();

        foreach (var shift in shiftList)
        {
            shift.Staff = new List<StaffMap>();

            foreach(var schedule in dailySchedules)
            {
                int randomStaff_Index = r.Next(map[schedule].Length);

                Staff randStaff = map[schedule][randomStaff_Index];

                map[schedule] = map[schedule].Where(x => x != randStaff).ToArray();

                shift.Staff.Add(new StaffMap(randStaff, schedule));
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-24T16:10:34.770

最终结果变成：

**楷模：**

```
[DebuggerDisplay("ID: {ID}, Name: {Name}")]
public class Employee
{
    public Employee(string name)
    {
        Name = name;
        Schedules = new List<Schedule>();
    }
    public string Name { get; set; }
    public List<Schedule> Schedules { get; set; }
}
public class EmployeeSchedule
{
    public EmployeeSchedule(Employee employee, Schedule schedule)
    {
        Employee = employee;
        Schedule = schedule;
    }
    public Employee Employee { get; set; }
    public Schedule Schedule { get; set; }
}

[DebuggerDisplay("ID: {ID}, Name: {Name}")]
public class Schedule
{
    public Schedule(string name)
    {
        Name = name;
    }

    public string Name { get; set; }
}

[DebuggerDisplay("Name: {Name}, Start: {DateStart}, End: {DateEnd}")]
public class Shift
{
    public Shift()
    {
        EmployeeSchedules = new List<EmployeeSchedule>();
    }
    public Shift(string name, DateTime start, DateTime end) : this()
    {
        Name = name;
        DateStart = start.Date;
        DateEnd = new DateTime(end.Year, end.Month, end.Day, 23, 59, 59, 999);
    }

    public string Name { get; set; }
    public DateTime DateStart { get; set; }
    public DateTime DateEnd { get; set; }
    public List<EmployeeSchedule> EmployeeSchedules { get; set; }
} 
```

**控制台应用程序代码：**

```
class Program
{
    static void Main(string[] args)
    {
        var schedules = new List<Schedule>();
        schedules.Add(new Schedule("Morning"));
        schedules.Add(new Schedule("Lunch"));
        schedules.Add(new Schedule("Evening"));
        schedules.Add(new Schedule("Night"));

        var shifts = new List<Shift>();
        shifts.Add(new Shift("Week 1", new DateTime(2013, 3, 4), new DateTime(2013, 3, 10)));
        shifts.Add(new Shift("Week 2", new DateTime(2013, 3, 11), new DateTime(2013, 3, 17)));
        shifts.Add(new Shift("Week 3", new DateTime(2013, 3, 18), new DateTime(2013, 3, 24)));
        shifts.Add(new Shift("Week 4", new DateTime(2013, 3, 25), new DateTime(2013, 3, 31)));

        var employees = new List<Employee>();
        employees.Add(new Employee("Fred Smith"));
        employees.Add(new Employee("Charlie Brown"));
        employees.Add(new Employee("Samantha Green"));
        employees.Add(new Employee("Bash Malik"));
        employees.Add(new Employee("Bryan Griffiths"));
        employees.Add(new Employee("Akaash Patel"));
        employees.Add(new Employee("Kang-Hyun Kim"));
        employees.Add(new Employee("Pedro Morales"));

        ShuffleEmployees(ref shifts, schedules, employees);

        var scheduleNameMaxLength = schedules.Max(e => e.Name.Length);
        foreach (var shift in shifts)
        {
            Console.WriteLine($"{shift.Name} ({shift.DateStart:D} - {shift.DateEnd:D})");
            foreach (var map in shift.EmployeeSchedules)
            {
                Console.WriteLine($"- {map.Schedule.Name.PadRight(scheduleNameMaxLength + 1, ' ')}: {map.Employee.Name}");
            }
            Console.WriteLine();
        }

        Console.WriteLine("Press any key to continue ...");
        Console.ReadKey();
    }

    static void ShuffleEmployees(ref List<Shift> shifts, List<Schedule> schedules, List<Employee> employees)
    {
        var maxLength = Math.Max(shifts.Count, schedules.Count);
        var shiftSegmentSize = (employees.Count / maxLength);
        var employeeList = employees.OrderBy(e => Guid.NewGuid()).Take(shiftSegmentSize * maxLength).ToArray();

        var shiftsCount = shifts.Count;
        var schedulesCount = schedules.Count;

        for (int shiftIndex = 0; shiftIndex < shiftsCount; shiftIndex++)
        {
            for (int scheduleIndex = 0; scheduleIndex < schedulesCount; scheduleIndex++)
            {
                var employeeIndex = (maxLength + scheduleIndex - shiftIndex) % maxLength;
                for (int segment = 0; segment < shiftSegmentSize; segment++)
                {
                    employeeList[employeeIndex + (segment * maxLength)].Schedules.Add(schedules[scheduleIndex]);
                    shifts[shiftIndex].EmployeeSchedules.Add(new EmployeeSchedule(employeeList[employeeIndex + segment * maxLength], schedules[scheduleIndex]));
                }
            }
        }
    }
} 
```

# httpwebrequest - 几次调用后的 HttpWebRequest 超时问题

> ID：15768270
> 
> 赞同：0
> 
> 时间：2013-04-02T15:37:17.517
> 
> 标签：httpwebrequest, fiddler, timeoutexception

下面的代码在几次调用（5 或 10 次调用）后引发超时异常，当我在我的机器上运行提琴手时它总是可以正常工作。我在这里读到了一些答案，如果它在提琴手打开时工作，那么这意味着它可能是一个代理问题，但它有时是如何工作的？我尝试设置超过默认值的超时值，但仍然失败。

```
 HttpWebRequest requiredRequest = CreateRequestWithEmptyBody(url);            
        requiredRequest.ContentType = "application/xml";

            try
            {
                requestStream = requiredRequest.GetRequestStream();
                requestStream.Write(requestBodyData, offset: 0, count: requestBodyData.Length);
                requestStream.Flush();
            }
            catch (WebException exc)
            {

            }
            finally
            {
                requestStream.Close();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:27:28.957

通常，这意味着您忘记调用`.Close()`从 HttpWebRequest 对象中提取的 HTTPResponseStream。

我在这里讨论这个：[http ://www.telerik.com/automated-testing-tools/blog/eric-lawrence/13-02-28/help-running-fiddler-fixes-my-app.aspx](http://www.telerik.com/automated-testing-tools/blog/eric-lawrence/13-02-28/help-running-fiddler-fixes-my-app.aspx)

# ios - 设置 UINavigationController 的 contentSizeForViewInPopover 属性似乎失败

> ID：15768275
> 
> 赞同：1
> 
> 时间：2013-04-02T15:37:29.980
> 
> 标签：ios, properties, uinavigationcontroller, popover, contentsize

如以下代码所示，设置 UINavigationController 对象的 contentSizeForViewInPopover 属性似乎失败。这种行为是否符合预期？我犯了一些错误吗？谢谢。

（使用 XCode 4.6，Mac OS X v 10.7.5）

```
// Make a plain view controller.
UIViewController * root = [[UIViewController alloc] init];

// Make a navigation controller whose root view is the plain
// view controller from above.
UINavigationController * nav =
    [[UINavigationController alloc] initWithRootViewController: root];

// Set the content size for popover to 100 x 100.
nav.contentSizeForViewInPopover = CGSizeMake(100, 100);

// Print out the property that we just set.
NSLog (@"size = (%f, %f)",
       nav.contentSizeForViewInPopover.width,
       nav.contentSizeForViewInPopover.height);

// It prints: size = (320.000000, 1144.000000) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:42:17.317

更改`contentSizeForViewInPopover`导航控制器不是一个好主意。`root`改为打开它。`UINavigationController`通过添加其导航栏所需的大小，自动从其当前控制器计算其大小。

# php - 回声里面的printf

> ID：15768276
> 
> 赞同：2
> 
> 时间：2013-04-02T15:37:29.997
> 
> 标签：php

如何在 echo 中插入 printf 注释？在过去的一个小时里，我一直在试图弄清楚，我尝试的一切都会导致不同的错误。

下面是我尝试过的最后一个版本的代码。

```
<?php
$i = 0;
do {
    echo "<li><a class=\"th radius\" href=\"img/coolstuff/" . printf("%03d", $i); . ".jpg\"><img src=\"img/coolstuff/" . printf("%03d", $i); . ".jpg\"></a></li>";
    $i++;
} while ($i < 282);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:39:26.470

删除`;`之前的`.`，否则您将终止该语句。

此外，`printf`直接输出字符串，这将使其出现在输出字符串的*开头*。你想要`sprintf`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:39:30.940

改为使用[`sprintf()`](http://php.net/sprintf)。它返回格式化的字符串而不是输出它。

另外，正如@Kolink 提到的，删除分号，所以你的回声看起来像这样：

```
echo "<li><a class=\"th radius\" href=\"img/coolstuff/" . sprintf("%03d", $i) . ".jpg\"><img src=\"img/coolstuff/" . sprintf("%03d", $i) . ".jpg\"></a></li>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:39:37.833

这样做：

```
echo "<li><a class=\"th radius\" href=\"img/coolstuff/" , printf("%03d", $i); 
```

注意逗号`,`而不是点`.`。

当使用逗号和`echo`语句时，像上面一样，首先评估每个部分。至少根据[这个公认的答案。](https://stackoverflow.com/questions/4393411/what-does-comma-in-echo-statement-signify)

# jquery - 我不能使用 $.uniform.update(); 我项目中的下拉列表

> ID：15768277
> 
> 赞同：0
> 
> 时间：2013-04-02T15:37:35.033
> 
> 标签：jquery, select, uniform

我在我的网站上使用 jQuery Uniform。某些选择被阻止，如果我在第一个选择中选择任何一个选项，第二个会自动解锁。问题是制服并没有改变被释放的选择的外观，在视觉上它仍然处于非活动状态。请参阅网站上的示例：[www.cataplanos.com.br](http://www.cataplanos.com.br) 在“Incluir Dependentes？”中，选择“Sim”> 在“Dependente 1”中选择任何值以启用下一个选择“Dependente 2”。

我的代码：

```
$(document).ready(function () {
        $(function () {
            $("select").uniform();
        });
    }); 
```

我试着用这个：

```
$(document).ready(function () {
        $(function () {
            $("select").uniform();
        });

        $.uniform.update();
    }); 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T15:14:03.063

更改完成后只需更新所需的元素。

从[文档](http://uniformjs.com/#docs)中：

```
$.uniform.update([elem/selector string]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T11:03:02.120

```
 jQuery('.ClassName').uniform(); 
```

# delphi - 使用 .AsString 还是 .Text？

> ID：15768278
> 
> 赞同：8
> 
> 时间：2013-04-02T15:37:35.810
> 
> 标签：delphi, delphi-5

我刚刚看到他们使用的一些代码（D5）......

```
aStr:=tblAcct.FieldByName('Name').Text; 
```

它似乎工作正常，但我一直使用...

```
aStr:=tblAcct.FieldByName('Name').AsString; 
```

我在加载 TMemo 时都使用过，但似乎没有区别。

```
aMemo.Lines.Text:=tblAcct.FieldByName('History').Text;
aMemo.Lines.Text:=tblAcct.FieldByName('History').AsString; 
```

有没有理由我应该使用一个而不是另一个？如果有，是哪一个？

实际上对于 TMemo，我通常使用...

```
aMemo.Lines.Assign(tblAcct.FieldByName('History')) 
```

这似乎也很好。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T16:04:21.463

该[`Text`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TField.Text)属性旨在用于获取 DataAware 控件中正在编辑的字段的文本表示，与[`DisplayText`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TField.DisplayText)为您提供字符串以向用户表示值的属性相反（它可能包含标点符号或其他普通*装饰*价值）。

> 包含当字段处于编辑模式时在数据感知控件中显示的字符串

一个典型的例子是`Currency`属性设置为的 TFloatField `True`。为`DisplayText`您提供一个字符串，其数字包含逗号（如果需要）、小数分隔符和货币符号。该`Text`属性为您提供了一个不带逗号或货币符号的字符串。

```
begin
  MyFloatField.Currency := True;
  MyFloatField.AsFloat := 1234.56;
  A := MyFloatField.Text; //'1234.56'
  B := MyFloatField.DisplayText; //'$1,234.56', depends on your locale
end; 
```

以上两个属性都可以自定义编写[`OnGetText`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TField.OnGetText)事件处理程序，您可以在其中编写自定义逻辑*将*值转换为字符串表示形式。该`DisplayText`参数指示想要的字符串是否用于表示编辑值。

另一方面，该`AsString`属性在基本数据类型和字符串之间使用更简单的转换。每个 TField 后代使用 RTL 中的函数实现虚拟 GetAsString 方法来执行该表示。在 TFloatField 示例之后，此类调用[`FloatToStr()`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.FloatToStr)就是为了这个目的。

综上所述，您的问题的**答案是**：如果没有 OnGetText 事件处理程序，则`AsString`返回与属性相同的字符串`Text`，但如果有事件处理程序或非标准 TField 后代，则可能会有所不同。

我不知道什么更适合您，因为它取决于返回值的预期用途，但如果您使用它在 UI 中向用户显示值（如您的代码示例），我建议您使用 DisplayText 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:57:09.823

`AsString`包含字段的值作为字符串。

`Text`包含当字段处于编辑模式时要在数据感知控件中显示的字符串。

所以在你的情况下，我认为你应该使用 AsString。

# php - 如何从服务器检索视频并点击播放？

> ID：15768279
> 
> 赞同：0
> 
> 时间：2013-04-02T15:37:44.767
> 
> 标签：php, html, html5-video

我正在做一个教程网站项目。在此，我在右侧有一个视频播放器，在页面左侧有一个垂直菜单。我有很多视频要放入。我正在尝试在同一页面的同一视频播放器中播放视频。如何从数据库中检索视频并从菜单中单击播放？

我正在为视频播放器使用视频标签。我还想在页面的视频播放器底部显示视频名称，每个视频都会更改。喜欢 youtube 网站！我正在使用 Wamp 本地服务器。以下是单个静态视频和视频名称的代码。

```
<div class="video" align="right"><video id="movie" class="video" width="800" height="520" title="franklin" data-uid="movie" controls poster="images/LMS.JPG"><source src="videos/Learning Management System.mp4" /></video></div>

<div id="video_heading"><p><b>Introduction to Learning Management System</b></p></div> 
```

如何利用数据库系统使用 PHP 检索视频和视频名称。请帮忙。我迫切需要某人的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:53:57.837

使用[AJAX](https://developer.mozilla.org/en-US/docs/AJAX)从 JavaScript 向您的服务器发送一个请求，以[从数据库中检索正确的视频信息，](http://php.net/manual/en/book.pdo.php)并以您可以使用的格式返回它，例如[JSON](http://php.net/manual/en/function.json-encode.php)。然后，使用响应数据，相应地[更新您的视频对象](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)和[其他 DOM 元素](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)。

# java - 问题绘制 BufferedImage

> ID：15768285
> 
> 赞同：0
> 
> 时间：2013-04-02T15:38:21.007
> 
> 标签：java, swing, jpanel, bufferedimage, paintcomponent

我正在开发一个程序，它将图像文件夹读取到 JList 中，并且在 JList 中选择的图片将被绘制到 JPanel 中。我有两个类：`ImageViewerPanel`，它创建面板来显示所选图片。然后我`ImageViewerUI`将绘制 JList，并将`ImageViewerPanel`其添加到`ImageViewerUI`类中。这是该`ImageViewerPanel`课程的相关代码。

```
public ImageViewerPanel() {
    initComponents();
}

public void setImage(BufferedImage image) {
    this.image = image;
    repaint();
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    if (scaled == false) {
        g.drawImage(image, 0, 0, null);
    }else if(scaled == true) {
        g.drawImage(image, 0, 0, 80, 80, null);
    } 
```

`ImageViewerUI`这是使用图像刷新面板的类中的代码：

```
 ImageViewerPanel imagePanel = new ImageViewerPanel();
    BufferedImage displayedImage;
    BufferedImage originalImage;

public ImageViewerUI() {
    initComponents();
    loadListWithImageFilenames();
    updateImagePanel();
    updateThumbnailImagePanel();
}

public final void updateImagePanel() {
    try {
        String currFile = (String) ("Images/" + imageList.getSelectedValue());
        displayedImage = ImageIO.read(new File(currFile));
        imagePanel.setImage(displayedImage);
    } catch (IOException ex) {
        Logger.getLogger(ImageViewerUI.class.getName()).log(Level.SEVERE, null, ex);
    }

public final void updateThumbnailImagePanel() {
    try {
        String currFile = (String) ("Images/" + imageList.getSelectedValue());
        originalImage = ImageIO.read(new File(currFile));
        imagePanel.setScaled(true);
        imagePanel.setImage(originalImage);
        imageViewerPanel1.add(imagePanel);
        imagePanel.repaint();
    } catch (IOException ex) {
        Logger.getLogger(ImageViewerUI.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

我遇到的问题是图像没有显示在面板中。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:05:34.463

```
imageViewerPanel1.add(imagePanel);
imagePanel.repaint(); 
```

当您将组件添加到可见 GUI 时，代码应该是：

```
imageViewerPanel1.add(imagePanel);
//imagePanel.repaint();
imageViewerPanel1.revalidate();
imageViewerPanel1.repaint(); 
```

所有组件都以 (0, 0) 的大小创建，因此没有可绘制的内容。revalidate() 调用布局管理器，后者又为组件提供大小。

如上所述，您还需要覆盖 imagePanel 的 getPreferredSize() 方法，以便布局管理器可以确定面板的正确大小。

# json - 许可 Netonsoft,Json 解析

> ID：15768286
> 
> 赞同：0
> 
> 时间：2013-04-02T15:38:30.773
> 
> 标签：json, parsing, json.net

我正在尝试使用 Newtonsoft.Json 检索许可字典。基本上，我的工具正在做的是当它有一个像这样的输入时

```
string jsonText = 
@"{
    "key1" : "val1",
    "key2" : "val2",
    "inconsistency",
    "key3" : "val3"
  }"; 
```

但是，那

```
JObject.Parse(jsonText); 
```

命令会抛出一个 JsonReaderException 因为我的 Json 不正确。

我想要某种方法

```
public JObject PermissiveParse(jsonText) 
```

这将返回一个带有 3 个有效 JToken 的 JObject。（跳过无效的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:24:10.917

> 恐怕这是典型的“垃圾进，垃圾出”的情况。JSON 无效，因此您无法正确解析它。你只能猜测它的含义。现在，我们人类可以很好地猜测出我们的意图（显然），但在解析器级别上要困难得多。
> 
> 如果你知道你一直得到这个 invalid `jsonText`，你可以在反序列化之前预处理字符串，但真正的修复必须是无效数据的来源。

[https://stackoverflow.com/a/5142168/393487](https://stackoverflow.com/a/5142168/393487)

# javascript - 如何在优化文件之外实例化 requirejs 中的优化模块？

> ID：15768288
> 
> 赞同：2
> 
> 时间：2013-04-02T15:38:32.170
> 
> 标签：javascript, requirejs, r.js

在我的 require.config 中，我为我经常使用的几个路径创建了简写：

```
require.config({
    paths: {
        text: 'components/requirejs-text/text',
        url: 'config/url',
        List: 'modules/List/main'
        ... 
```

然后在各个页面上（在单独的脚本文件中），我实例化一个这样的模块：

```
require(['List'], function(List){ new List; }); 
```

我的计划是将所有文件优化为一个文件，像我的示例中那样需要并实例化一个模块，但是由于 require.config 的路径不再真正相关（因为我现在只有 main.build.js）**怎么能我实例化我的模块**？

**更新：让我改写一下：**

我正在尝试在优化的构建脚本之外实例化一个模块，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:48:19.537

将您的配置移动到库之后的单独位置（在头部内联或在 JS 文件中）`require.js`。现在您可以在将来加载任何模块，并且无论首先加载哪些模块，它们都将能够读取配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:22:06.617

无论您想在哪里包含`List`模块，只需创建一个指向优化文件的新路径配置。

```
require.config({
    paths: {
        'List': 'js/myApp' 
    }
});
require(['List'], function(List) {
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:43:53.173

我认为，我们有一个名为 appInit.js 的文件，它会实例化我们的应用程序，因此之后所有其他模块都应根据要求实例化，而且从每个 module.js 实例化模块也不是一个好习惯，

考虑应用程序的单个实例，所有其他实例都应与此应用程序相关，如组件、服务等，

每个开发人员都有自己的编码风格，选择你喜欢的风格吧..

如果您担心模块的路径，那么在构建之后不要担心路径只是模块的名称，它应该可以工作，但动态加载或创建的模块将不再工作。

# c# - XML 反序列化后返回的单个节点

> ID：15768290
> 
> 赞同：0
> 
> 时间：2013-04-02T15:38:36.703
> 
> 标签：c#, .net, xml-serialization

**我有以下xml结构**

```
<root>
 <title>List</title>
 <units>Total Units: 79.0</units>
 <sesgrps>
   <sesgrp>
     <classes>
       <class>
         <subj_area_name>C# language</subj_area_name>
         <class_name>C# Class</class_name>
       </class>
       <class>
         <subj_area_name>VB language</subj_area_name>
         <class_name>VB Class</class_name>
       </class>
       <class>
         <subj_area_name>F# language</subj_area_name>
         <class_name>F# Class</class_name>
       </class>
     </classes>
   </sesgrp>
</sesgrps> 
```

**为此，我创建了如下类：**

```
[Serializable]
[XmlRoot("root")]
public class Data
{
    [XmlElement("title")]
    public string Title { get; set; }

    [XmlElement("units")]
    public string Units { get; set; }

    [XmlArray("sesgrps")]
    [XmlArrayItem("sesgrp")]
    public List<SessionGroup> SessionGroups { get; set; }
}

[Serializable]
public class SessionGroup
{
    [XmlArray("classes")]
    [XmlArrayItem("class")]
    public List<Class> Classes { get; set; }
}

[Serializable]
public class Class
{
   .....................
   .....................
} 
```

当我**反序列**化时，我只**得到一个 Class 项目而不是**Classes 集合中的 3 个类项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:08:42.340

我刚刚尝试了以下代码：

```
var file = new FileStream("Input.txt", FileMode.Open);

var serializer = new XmlSerializer(typeof(Data));
var item = (Data)serializer.Deserialize(file); 
```

使用您的输入 XML 数据和以下`Class`类声明：

```
[Serializable]
public class Class
{
    [XmlElement("subj_area_name")]
    public string Area { get; set; }

    [XmlElement("class_name")]
    public string Name { get; set; }
} 
```

一切都很好。结果项有 1 个带有属性的`SessionGroup`实例`SessionGroups`，其中包含 3 个属性`Class`内的对象`Classes`：

![在此处输入图像描述](https://i.stack.imgur.com/Wz268.png)

所以我不得不说 -`XmlSerializer`或者类声明在这里不是问题。

# objective-c - 旋转一个 UIView 会导致另一个 UIView 被推离屏幕

> ID：15768291
> 
> 赞同：0
> 
> 时间：2013-04-02T15:38:38.100
> 
> 标签：objective-c, xcode, uiview, iad

我有一个 ViewController，其中包含几个 UILabel、一个 UIImageView 和一个 ADBannerView。有两个相关的动作：UIImageView 根据用户手持设备的角度旋转，ADBannerView 根据是否有 iAD 显示滑入视图。

如果 UIImageView 是静止的，则 ADBannerView 会正确滑入视图。但是，一旦 UIImageView 开始旋转，ADBannerView 就会消失。AFAIK 这两种观点是完全独立的。

```
- (void) updateFloatingBar
{

    double angleToUpright = [self calculateAngleToUpright];
    double newAngle = angleToUpright - self.currentAngle;
    [self.FloatingBarImageView setTransform:CGAffineTransformMakeRotation(newAngle*(CGFloat)(M_PI/180))];

}

- (void) hideAd
{
    NSLog(@"Ad Hidden");
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.adBannerView cache:YES];
    self.adBannerView.frame = CGRectMake(0,self.view.bounds.size.height + 50,50,320);
    [UIView commitAnimations];
}

- (void) showAd
{
    NSLog(@"Ad Shown");
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.compassADBannerView cache:YES];
    self.compassADBannerView.frame = CGRectMake(0,self.view.bounds.size.height - 50,50,320);
    [UIView commitAnimations];
} 
```

同样，第一种方法可以正常工作，它还具有将 showAd 放置的 adBannerView 推到屏幕外的次要效果：

# shell - SunOS 上的 scp 递归目录

> ID：15768292
> 
> 赞同：0
> 
> 时间：2013-04-02T15:38:38.710
> 
> 标签：shell, sunos

我遇到了一个关于 SCP（以及 rsync）的小问题。我需要将某些文件从服务器 A（运行 SunOS 5.8）复制到服务器 B（运行 SunOS 5.10）。

首先，我通过 ssh 获取文件列表（数百个）并找到

```
FILES=`ssh user@remote find ./ -name "*.sh" -o -name "*.cbs" -print`
scp -r user@remote:"$FILES" /u01/appl/somedir/ 
```

我的问题是，我想复制具有相对路径的文件，例如 product/11/ora/clean.sh 创建目录结构（结果有 /u01/appl/somedir/product/11/ora/clean.sh ）。目前我只能下载文件并且没有创建目录。如您所见，我`-r`在 scp 中使用了标志。

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:49:29.527

我认为更简单的方法是`tar`发送文件然后发送它们......

```
FILES=`tar cvf files.tgz `find ./ -name "*.sh" -print``
scp user@remote:/home/user $FILES 
```

这保留了所有目录结构。

# c# - IntPtr 允许从 ulong 到 long 的隐式转换

> ID：15768294
> 
> 赞同：7
> 
> 时间：2013-04-02T15:38:45.837
> 
> 标签：c#, intptr

```
class A
{
    public static explicit operator A(long mm)
    {
        return null;
    }
}
UInt64 ul = UInt64.MaxValue;
IntPtr ptr = (IntPtr)ul;//no error
A a = (A)ul;//Cannot convert type 'ulong' to 'A' 
```

为什么 IntPtr 允许这种行为？

以下是 IL 代码：

```
.entrypoint
.maxstack 1
.locals init (
    [0] uint64 ul,
    [1] native int ptr)
L_0000: nop 
L_0001: ldc.i4.m1 
L_0002: conv.i8 
L_0003: stloc.0 
L_0004: ldloc.0 
L_0005: call native int [mscorlib]System.IntPtr::op_Explicit(int64)
L_000a: stloc.1 
L_000b: ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:39:53.273

我同意这看起来有点奇怪，所以我进行了几次测试。

### 测试#1：做一个 ulong 和一个 long 的演员表

```
ulong ul = UInt64.MaxValue;
long l = Int64.MaxValue;
IntPtr ulptr = (IntPtr)ul;
IntPtr lptr = (IntPtr)l; 
```

因为`IntPtr`演员表声明它可能会抛出一个`OverflowException`，所以我期待 `(IntPtr)ul`演员表抛出一个异常。它没。想象一下，当`(IntPtr)l`演员抛出一个`OverflowException`. 调查这个，我看到我的项目被设置为编译`x86`，所以现在这个异常是有意义的——`Int64.MaxValue`太大而不能适应 32 位的`IntPtr`.

### 测试#2：`checked`在相同的代码周围放置一个块。

现在，我真的希望`(IntPtr)ul`演员会抛出异常，而且确实如此。

这让我想知道第一个演员发生了什么。在未经检查的代码上使用`ildasm`会导致以下结果：

```
IL_0000:  nop
IL_0001:  ldc.i4.m1
IL_0002:  conv.i8
IL_0003:  stloc.0
IL_0004:  ldc.i8     0x7fffffffffffffff
IL_000d:  stloc.1
IL_000e:  ldloc.0
IL_000f:  call       native int [mscorlib]System.IntPtr::op_Explicit(int64)
IL_0014:  stloc.2
IL_0015:  ldloc.1
IL_0016:  call       native int [mscorlib]System.IntPtr::op_Explicit(int64) 
```

所以 -1 被放入堆栈并转换为 an `int64`，但没有从 unsigned 到有符号的额外转换`int64`。

`checked`版本略有不同：

```
IL_0000:  nop
IL_0001:  nop
IL_0002:  ldc.i4.m1
IL_0003:  conv.i8
IL_0004:  stloc.0
IL_0005:  ldc.i8     0x7fffffffffffffff
IL_000e:  stloc.1
IL_000f:  ldloc.0
IL_0010:  conv.ovf.i8.un
IL_0011:  call       native int [mscorlib]System.IntPtr::op_Explicit(int64)
IL_0016:  stloc.2
IL_0017:  ldloc.1
IL_0018:  call       native int [mscorlib]System.IntPtr::op_Explicit(int64) 
```

现在有一个从无符号到有符号的转换，这在溢出的情况下是必要的。

不幸的是，这并不能回答最初的问题。

**更新：**我删除了答案中不正确的部分，因此没有留下任何实际答案。但是，我希望它会有所帮助，因此我没有删除整个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:44:12.887

`IntPtr`和`UIntPtr`类型只是一个地址的托管表示，它本身就是一个数字。因此，它提供了逻辑数字值和相同有符号/无符号值之间的转换。

在这种情况下`UIntPtr`是无符号的，因此只提供到无符号数值的转换，如`ulong`. `A`这与接受`long`（有符号）值 的显式运算符不兼容。

您需要为from添加额外的运算符`ulong`或进行显式转换`long``UIntPtr`

```
A a = (A)(long)ul; 
```

# javascript - 为什么触发复选框时“已检查”属性不正确？

> ID：15768296
> 
> 赞同：7
> 
> 时间：2013-04-02T15:38:50.100
> 
> 标签：javascript, jquery, html, checkbox

在下面使用 jQuery 的代码中：

```
$("input").change(function(evt) {
  console.log("change event handler invoked", evt);
  console.log($("input").is(':checked'));
  console.log($("input").attr("checked"));
  console.log($("input").prop("checked"));
});

$("input").trigger("click");
$("input").trigger("click");
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<input id="the-input" type="checkbox">
```

`is(':checked')`and都可以显示为`prop("checked")`真，但 `attr("checked") 将显示未定义。我以为他们应该是一样的？（即使我们手动点击复选框，也是一样的效果）。

另外，如果我`checked`在 HTML 中设置，以便默认选中复选框（[http://jsfiddle.net/UcGyM/1/](http://jsfiddle.net/UcGyM/1/)），现在`attr("checked")`将打印出`checked`两个触发，所以它无法判断是否是否检查过——这是为什么呢？（奇怪的是两个都显示`checked`，但是`$("input").attr("checked", true);`or`$("input").attr("checked", false);`可以打开或关闭。）

一个相关的问题是，如果我们要坚持使用`attr("checked")`，这是否意味着在 HTML 中，它必须具有`checked`属性：`<input type="checkbox" checked>`，如果是，它如何指定属性但默认为关闭？（因为`checked="false"`or or `checked=""`or `checked="0"`will not make it unchecked by default.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:43:03.490

不，它们不一样。 `.attr`是 DOM 属性。如果`checked`元素是

```
<input type=checkbox checked> 
```

它是单击时更改的*属性。*

至于您的相关问题，`checked`is 是一个布尔属性，因此无法指定元素在具有 checked 属性时不被检查。

`attr`我不知道当[jQuery API 本身说这是不正确的 jQuery 1.6](http://api.jquery.com/attr/)时，你为什么要坚持使用

# c# - 是否可以阻止 Silverlight DatePicker 控件的日历关闭日期选择？

> ID：15768297
> 
> 赞同：0
> 
> 时间：2013-04-02T15:38:51.963
> 
> 标签：c#, silverlight, datepicker

[日期选择器 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker%28v=vs.95%29.aspx)

在日历中选择日期（通过单击 CalendarDayButton）时，日历弹出窗口会自动关闭。是否可以在不编辑控件本身的源代码的情况下防止这种行为？（一个 ControlTemplate 就可以了）。

我可以更改 CalendarDayButton 样式和控制模板，但我看不到任何可以帮助我的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:06:16.410

我不相信你会有任何改变这种行为的运气。导致 Datepicker 关闭的代码似乎在这里（我从[Silverlight Toolkit](http://silverlight.codeplex.com/SourceControl/changeset/view/80285#780085)中查看了 Datepicker 的来源，Release -> Silverlight 4 -> Source -> Controls -> DatePicker）

```
private void Calendar_DayButtonMouseUp(object sender, MouseButtonEventArgs e)
        {
            this.Focus();
            this.IsDropDownOpen = false;
            _calendar.ReleaseMouseCapture();
        } 
```

它也在这里关闭：

```
private void Calendar_KeyDown(object sender, KeyEventArgs e)
        {
            Calendar c = sender as Calendar;
            Debug.Assert(c != null, "The Calendar should not be null!");

            if (!e.Handled && (e.Key == Key.Enter || e.Key == Key.Space || e.Key == Key.Escape) && c.DisplayMode == CalendarMode.Month)
            {
                this.Focus();
                this.IsDropDownOpen = false;

                if (e.Key == Key.Escape)
                {
                    this.SelectedDate = this._onOpenSelectedDate;
                }
            }
        } 
```

这两个处理程序都添加到私有方法中`private void InitializeCalendar`，并且日历对象本身被声明为私有（`private Calendar _calendar`）。

# php - 访问未定义的数组索引导致的内存泄漏

> ID：15768298
> 
> 赞同：4
> 
> 时间：2013-04-02T15:38:51.947
> 
> 标签：php, arrays, memory

我有一个脚本，它分析 XML 数据并用信息填充相同的数组。

对于一些（巨大的）输入，脚本崩溃了。

有一个 foreach 循环运行大约 180 次没有问题（迭代 180 中的 memory_get_usage() 大约 20 MB，每个循环增加大约 0.1 MB）

然后，每个新循环都会发生内存使用量翻倍的情况。

通过使用大量日志记录，我能够在 foreach 中将问题跟踪到以下行。

$fu = $f['单位']

`$f`具有以下结构：

```
array (
  'name' => 'Test',
  'value' => '4',
  'unit' => 'min-1',
) 
```

但在某些（许多）情况下（但也是在第 180 次迭代之前），`unit`数组中不存在密钥。

我能够通过将行替换为：

```
$fu = (isset($f['unit']) ? $f['unit'] : ''); 
```

然后迭代运行直到完成（总共 370 次迭代）。

这些现象有什么解释吗？

PHP 版本：带有 Suhosin-Patch 的 PHP 5.3.3-1ubuntu9.10（旧...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:13:16.843

您的问题可能来自 PHP 错误处理程序，而不是来自您的实际循环。

就像您说的那样，并非每个“单元”键都存在，因此会引发错误（或异常，取决于您的错误处理程序）。这可能还包括堆栈跟踪和进一步的调试信息，具体取决于您安装的扩展（xdebug？）。

两者都会消耗内存。

在使用它之前检查变量是否存在总是一个好习惯。始终在您的开发系统中启用 E_NOTICE 错误以查看任何此类问题。

# javascript - Javascript中的HTML编码和C#中的解码

> ID：15768302
> 
> 赞同：1
> 
> 时间：2013-04-02T15:39:12.490
> 
> 标签：javascript, asp.net-mvc-3

我正在尝试对我的 js 文件中的中文字符进行 html 编码，它返回了一些无效字符。

```
My text :    奥妙 全自动洁彩深层洁净洗衣液3kg
My html encode:  kgoxAyM2tn
My htmldecoded term: �1#6 
```

我的代码：

```
 // TODO get the ID of the select so that we can add this as a new dependency
                    var searchKeyword = $('#txtBox' + id).val();
                    var pId =  $('#SearchTerm_ > option:selected').attr("value");
                    var encodedSearchTerm = Encode(searchKeyword);
                    if (!(searchKeyword)) {
                        return false;
                    } else if (pId <= 0) {
                        return false;
                    }

     function Encode(urlFragment) {
     urlFragment = $.base64.encode(urlFragment);
     return urlFragment;
  }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:30:13.067

发布作为答案：

这个进行编码的 jfiddle 会让你到达你需要的地方：

[http://jsfiddle.net/gabrieleromanato/qAGHT/](http://jsfiddle.net/gabrieleromanato/qAGHT/)

```
var Base64 = {

_keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

encode: function(input) {
    var output = "";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    input = Base64._utf8_encode(input);

    while (i < input.length) {

        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;

        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
            enc4 = 64;
        }

        output = output + this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) + this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

    }

    return output;
},

decode: function(input) {
    var output = "";
    var chr1, chr2, chr3;
    var enc1, enc2, enc3, enc4;
    var i = 0;

    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

    while (i < input.length) {

        enc1 = this._keyStr.indexOf(input.charAt(i++));
        enc2 = this._keyStr.indexOf(input.charAt(i++));
        enc3 = this._keyStr.indexOf(input.charAt(i++));
        enc4 = this._keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
            output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
            output = output + String.fromCharCode(chr3);
        }

    }

    output = Base64._utf8_decode(output);

    return output;

},

_utf8_encode: function(string) {
    string = string.replace(/\r\n/g, "\n");
    var utftext = "";

    for (var n = 0; n < string.length; n++) {

        var c = string.charCodeAt(n);

        if (c < 128) {
            utftext += String.fromCharCode(c);
        }
        else if ((c > 127) && (c < 2048)) {
            utftext += String.fromCharCode((c >> 6) | 192);
            utftext += String.fromCharCode((c & 63) | 128);
        }
        else {
            utftext += String.fromCharCode((c >> 12) | 224);
            utftext += String.fromCharCode(((c >> 6) & 63) | 128);
            utftext += String.fromCharCode((c & 63) | 128);
        }

    }

    return utftext;
},

_utf8_decode: function(utftext) {
    var string = "";
    var i = 0;
    var c = c1 = c2 = 0;

    while (i < utftext.length) {

        c = utftext.charCodeAt(i);

        if (c < 128) {
            string += String.fromCharCode(c);
            i++;
        }
        else if ((c > 191) && (c < 224)) {
            c2 = utftext.charCodeAt(i + 1);
            string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
            i += 2;
        }
        else {
            c2 = utftext.charCodeAt(i + 1);
            c3 = utftext.charCodeAt(i + 2);
            string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
            i += 3;
        }

    }

    return string;
}

}

var encode = document.getElementById('encode'),
decode = document.getElementById('decode'),
output = document.getElementById('output'),
input = document.getElementById('input');

encode.onclick = function() {
output.innerHTML = Base64.encode(input.value);
}

decode.onclick = function() {
var $str = output.innerHTML;
output.innerHTML = Base64.decode($str);
} 
```

JavaScript 可用于使用 MIME base64 编码/解码数据，并且与 UTF-8 编码完全兼容。

# php - 将类的实例分配给php中的新对象

> ID：15768305
> 
> 赞同：4
> 
> 时间：2013-04-02T15:39:17.517
> 
> 标签：php

以下是**[手册](http://php.net/manual/en/language.oop5.basic.php)**中的示例：

```
<?php

    $instance = new SimpleClass();
    $assigned   =  $instance;
    $reference  =& $instance;

    $instance->var = '$assigned will have this value';
    $instance = null; // $instance and $reference become null

    var_dump($instance);
    var_dump($reference);
    var_dump($assigned);
 ?> 
```

我无法理解结果：

```
NULL
NULL
object(SimpleClass)#1 (1) {
   ["var"]=>
     string(30) "$assigned will have this value"
} 
```

任何人都可以告诉我答案，我认为这三个 var 指向同一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:44:49.670

```
$instance = new SimpleClass(); // create instance
$assigned   =  $instance; // assign *identifier* to $assigned
$reference  =& $instance; // assign *reference* to $reference 

$instance->var = '$assigned will have this value';
$instance = null; // change $instance to null (as well as any variables that reference same) 
```

通过引用和标识符分配是不同的。从手册：

> 常被提及的 PHP5 OOP 的关键点之一是“对象默认通过引用传递”。这并不完全正确。本节通过一些例子来纠正这种普遍的想法。
> 
> PHP 引用是一个别名，它允许两个不同的变量写入相同的值。从 PHP5 开始，对象变量不再包含对象本身作为值。它只包含一个对象标识符，允许对象访问者找到实际对象。当一个对象通过参数发送、返回或分配给另一个变量时，不同的变量不是别名：它们持有标识符的副本，它指向同一个对象。

查看[此答案](https://stackoverflow.com/questions/9331519/php-object-by-reference-in-php5/9332219#9332219)以获取更多信息。

# ios - 有什么方法可以自定义 iOS 键盘以仅显示麦克风按钮？

> ID：15768306
> 
> 赞同：3
> 
> 时间：2013-04-02T15:39:18.960
> 
> 标签：ios, keyboard, microphone

我一直在问是否可以创建一个除了麦克风按钮（标准文本键盘左下角）之外什么都没有的自定义 iOS 键盘，并且仍然可以获得麦克风功能。这主要是针对仅语音条目（结果文本将在其他地方处理）。

是的，这是一个奇怪的问题...

# javascript - 在javascript中为变量添加属性

> ID：15768307
> 
> 赞同：0
> 
> 时间：2013-04-02T15:39:19.407
> 
> 标签：javascript

考虑以下代码：

```
var str = "abc";
 str.foo = 123;  // write - ignored
123
 str.foo  // read
undefined 
```

为什么我会不确定？该属性不应该输出`123`吗？它输出未定义的原因是什么？

既然`var str`是字符串，为什么属性不显示第二次？

我们不能向字符串添加属性和方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:41:57.127

您将 str 定义为 a `string`，而不是 a `object`。也许你打算做这样的事情：

```
var o = {};
o.str = "abc";
o.foo = 123; 
```

有关详细信息，请参阅此问题的选定答案：

[为什么我不能在 javascript 中向字符串对象添加属性？](https://stackoverflow.com/questions/5201138/why-cant-i-add-properties-to-a-string-object-in-javascript)

# facebook-graph-api - 服务器被 Facebook 列入黑名单？

> ID：15768314
> 
> 赞同：1
> 
> 时间：2013-04-02T15:39:43.660
> 
> 标签：facebook-graph-api, blacklist

昨天我们在我们的网站上安装了一个新插件，以允许我们的帖子自动发布到我们的 Facebook 页面。好吧，星期一的一大早，一些测试代码被留在里面，在大约一个小时内调用了几千次。24 小时后，Facebook 仍然返回：

```
{"error":{"message":"(#1) An error occured while creating the share","type":"OAuthException","code":1}} 
```

帖子将转到 {page_id}/feed 并使用扩展的 access_token，它不会对页面过期。

我知道这与服务器的 IP 有关，因为我可以通过 curl 在我们的其他服务器上执行帖子而没有问题（只需复制和粘贴 curl 参数）。所以我想知道是否有人以前经历过这种情况，是否有政策将您的服务器从黑名单中删除，还是只是等待它类型的东西？

蒂亚！

# javascript - CSS3：如何同时旋转和缩放图像？

> ID：15768315
> 
> 赞同：49
> 
> 时间：2013-04-02T15:39:43.793
> 
> 标签：javascript, jquery, css, css-transforms

我很困惑。为什么我不能同时使用缩放和旋转？我试过这个，但它不起作用：

```
.rotate-img{
    -webkit-transform:scale(2,2);
    -webkit-transform:rotate(90deg);
    margin-left:20%;
    margin-top:10%;
} 
```

我尝试了 jQuery，但都不起作用：

```
<style>
.zoom{
        -webkit-transform:scale(2,2);
        margin-left:20%;
        margin-top:10%;
    }
</style>
<script>

    $(document).ready(function(){
        $("img").dblclick(function(){

            $(this).addClass("zoom");

            $(this).contextmenu(function(){
                $(this).css("-webkit-transform","rotate(90deg)");
                return false;
            })
        });
    })

    </script> 
```

我怎么能缩放一个img，当我点击右键然后旋转90度。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-02T15:45:53.933

`transform`您可以使用带有`rotate(**deg)`值的属性旋转带有 CSS 的图像

```
.rotate-img {
    -webkit-transform : rotate(90deg) scale(0.2); /* Chrome, Opera 15+, Safari 3.1+ */
    -ms-transform     : rotate(90deg) scale(0.2); /* IE 9 */
    transform         : rotate(90deg) scale(0.2); /* Firefox 16+, IE 10+, Opera */
    left : -200px;
    position: relative;
}
```

```
<img class="rotate-img" src="https://appharbor.com/assets/images/stackoverflow-logo.png" />
```

在多行上应用`transform`时，它就像任何其他 CSS 属性一样，并且会被覆盖，因此只使用最后一行，就像这样：

```
.myclass {
    top: 100px;
    top: 400px;
} 
```

只有最后一个适用，因此您需要将所有转换放在一个中`transform`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-27T21:47:13.307

好吧，建立在 adeneo 的答案之上，其中包括所有能够[CSS transform](http://caniuse.com/#search=transform)的浏览器。

```
.rotate-img {
    -webkit-transform: rotate(90deg) scale(2.2); /* Chrome 4+, Op 15+, Saf 3.1, iOS Saf 3.2+ */
       -moz-transform: rotate(90deg) scale(2.2); /* Fx 3.5-15 */
        -ms-transform: rotate(90deg) scale(2.2); /* IE 9 */
         -o-transform: rotate(90deg) scale(2.2); /* Op 10.5-12 */
            transform: rotate(90deg) scale(2.2); /* Fx 16+, IE 10+ */
    margin: 10% 0 0 20%;
} 
```

请参阅扩展的[JS Fiddle](http://jsfiddle.net/Volker_E/5eFWQ/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-12-08T10:21:35.053

你不需要单独编写代码来使用旋转和缩放你可以使用它看起来像这样：

变换：缩放（1.3）旋转（7度）；

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-09T10:06:22.473

您可以同时缩放和旋转，但您必须在同一行上进行，否则您会用新值覆盖 prievius 值。

```
let htmlElement = document.getElementById("rotate-img");
let scaleX = -0.3;
let scaleY =  0.2;
let angle  =  45 ;

// NOTICE!! THE BACK-TICKS, not regular quotes. Will decode variables inside before printing.

// Code for Safari
htmlElement.style.WebkitTransform = `scale( ${scaleX}, ${scaleY} ) rotate( ${angle}deg )`; 

// Code for IE9
htmlElement.style.msTransform = `scale( ${scaleX}, ${scaleY} ) rotate( ${angle}deg )`; 

// Standard syntax
htmlElement.style.transform = `scale( ${scaleX}, ${scaleY} ) rotate( ${angle}deg )`; 
```

```
<img id="rotate-img" src="https://appharbor.com/assets/images/stackoverflow-logo.png" />
```

另请注意，该元素上的任何现有样式都将被覆盖，除非您先将该样式保存到（字符串）变量中，然后将新样式添加（附加或连接）到该保存的变量中，然后将整个变量添加回html元素。

# emacs - 当缓冲区为只读时定义键

> ID：15768316
> 
> 赞同：5
> 
> 时间：2013-04-02T15:39:48.630
> 
> 标签：emacs, dot-emacs

当我的缓冲区是只读的（是的，我很懒）时，我试图以与“Cn”和“Cp”相同的方式使用键“n”和“p”。

我在我的 .emacs 文件中使用此代码：

```
(when buffer-read-only (local-set-key "n" 'next-line))
(when buffer-read-only (local-set-key "p" 'previous-line)) 
```

当缓冲区自动设置为只读时（即像在 w3m 中一样），这是有效的，但是当我运行 Cx Cq（切换只读）时，它似乎不起作用。它一直在说

```
Buffer is read-only: #<buffer buffername> 
```

而且我不知道这会如何工作......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:48:28.633

您的键定义在加载期间进行评估`.emacs`，而您希望在每次访问只读文件时评估它们，并且每次`toggle-read-only`执行。此外，每当缓冲区再次变为可读写时，您都希望它们*撤消。*

`view-mode`您可以利用 Emacs 已经支持在只读缓冲区中自动激活这一事实，而不是实现所有这些。您需要做的就是启用该功能，并在以下位置定义您的密钥`view-mode-map`：

```
(setq view-read-only t)     ; enter view-mode for read-only files
(define-key view-mode-map "n" 'next-line)
(define-key view-mode-map "p" 'previous-line) 
```

# entity-framework - 通过实体框架更新时自动生成的 Guid Id 为空

> ID：15768321
> 
> 赞同：2
> 
> 时间：2013-04-02T15:40:01.400
> 
> 标签：entity-framework, guid

为了尝试隔离错误的来源，我构建了以下内容：

SQL Server 表：

```
 CREATE TABLE [dbo].[Names]
  ([Key] [uniqueidentifier] NOT NULL,
   [Name] [nvarchar](50) NULL,  
   CONSTRAINT [PK_Names] PRIMARY KEY CLUSTERED ([Key] ASC)
  )
 GO

 ALTER TABLE [dbo].[Names] ADD CONSTRAINT [DF_Names_Key] DEFAULT (newid()) FOR [Key] 
```

当我通过 SQL Server Management Studio 向该表添加行时，guid 会按预期获得一个值。

然后我用这个表创建了一个 EF 模型，这生成了以下代码：

```
/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmEntityTypeAttribute(NamespaceName="Model1", Name="Names")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Names : EntityObject
{
    #region Factory Method

    /// <summary>
    /// Create a new Names object.
    /// </summary>
    /// <param name="key">Initial value of the Key property.</param>
    public static Names CreateNames(global::System.Guid key)
    {
        Names names = new Names();
        names.Key = key;
        return names;
    }

    #endregion

    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Guid Key
    {
        get
        {
            return _Key;
        }
        set
        {
            if (_Key != value)
            {
                OnKeyChanging(value);
                ReportPropertyChanging("Key");
                _Key = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("Key");
                OnKeyChanged();
            }
        }
    }
    private global::System.Guid _Key;
    partial void OnKeyChanging(global::System.Guid value);
    partial void OnKeyChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String Name
    {
        get
        {
            return _Name;
        }
        set
        {
            OnNameChanging(value);
            ReportPropertyChanging("Name");
            _Name = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("Name");
            OnNameChanged();
        }
    }
    private global::System.String _Name;
    partial void OnNameChanging(global::System.String value);
    partial void OnNameChanged(); 
```

然后我创建了一个测试来向表中添加数据：

```
 [TestMethod]
    public void WriteTestMethod1()
    {
        using (Model1Container context = new Model1Container())
        {
            Names n = new Names();
            n.Name = "T2";

            context.Names.AddObject(n);
            context.SaveChanges();
        }

    } 
```

结果是插入了行，但 Guid 为空（全为零）

为什么会这样？EF 可以与数据库生成的 Guid 一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-07T16:38:22.020

这是旧的，但无论如何这是一个答案，因为它仍然相关。

*   您的测试代码创建一个实例`class Names`并为该`Name`属性分配一个值。
*   您没有明确地将任何内容分配给 Key 属性。Key 属性是 Guid 类型，它是一个结构（值类型），而不是一个类（引用类型），所以它永远不能为空，并且总是有一个值，如果只是默认值的话。Guid 的未初始化默认值是全零字段。
*   当您添加/保留此实体实例时，EF 会为这两个字段生成一个 INSERT，因为这两个字段都存在值。
*   未使用架构中定义的默认值表达式，因为在客户端的 INSERT 语句中提供了值。

您可以通过将 Key 字段定义为可为空来获取服务器生成的 uid 值，这将对应于 C# 中的字段类型`Guid?`（而不是`Guid`）。然后，您可以允许 Key 值在您的代码中保持为空，并且将使用服务器定义的默认表达式。

但是，如果此字段是您的主键，则可为空的字段可能不是您所需要的。当我处于这种情况时，我使用一个构造函数来设置 Guid 值（是的，在客户端），而不是允许它采用默认值。

# php - 从变量中修剪文本“th_”并将结果保存到新变量？

> ID：15768324
> 
> 赞同：1
> 
> 时间：2013-04-02T15:40:14.123
> 
> 标签：php

我的问题既快速又简单。

我正在创建一个画廊，我正在使用 glob 从目录中获取我的全尺寸图像和缩略图。

我的缩略图图像的路径有一个变量：`images/photo-strip/thumb/*.jpg`

我正在减少使用路径并将其保存`images/photo-strip/thumb/*.jpg`到`*.jpg``basename()``$filename`

然后我重新构建完整尺寸图像的路径，如下所示：`$pathToFull = 'images/photo-strip/' . $filename;`

我在拇指文件夹中的文件命名如下：`th_*.jpg`全尺寸图像是`*.jpg`（完全匹配但没有 th）。

然后，我有一个回显，将 HTML 放入标签中，缩略图路径位于`<img>`标签中，完整尺寸路径位于`<a>`标签中。

问题是我的全尺寸图像的路径是错误的，因为图像文件名中的 th_ 。

**有没有办法修剪`th_`from`$filename`并将其保存为类似的东西，`$full_filename`以便我可以更正全尺寸图像的文件名？**

我可以轻松地重命名缩略图图像以排除 th_ 这将解决我的问题，但我更愿意保留文件名原样。

**编辑：**

我正在使用 BCMCFC 的方法，因为它摆脱了我不必拥有的两行代码。

感谢您的快速答复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:42:19.683

只需使用[str_replace](http://php.net/manual/en/function.str-replace.php)函数将“th_”替换为空字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:42:37.703

再看不过`$full_filename = substr($filename,3);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:44:20.327

听起来您可以将过程简化如下，而不是重建路径：

```
$img = str_replace('images/photo-strip/thumb/th_', 'images/photo-strip/', $originalImage); 
```

要不就：

```
$img = str_replace('thumb/th_', '', $originalImage); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T15:52:44.170

这将是最优雅的方式：-

```
$filename = 'th_myimage.jpg';
$pathToFull = 'images/photo-strip/' . preg_replace('/^(th_)?/', '', $filename);
// $filename would be 'myimage.jpg' 
```

如果它位于字符串的开头，则此正则表达式模式将**仅**替换第一次出现的和。`th_`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:45:12.537

这具有批量重命名目录中文件的实现。

[批量重命名文件夹中的文件 - PHP](https://stackoverflow.com/questions/4993590/bulk-rename-files-in-a-folder-php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T15:50:46.487

您可以使用“explode”将“_”字符上的字符串拆分为一个数组，然后获取该数组的后一个元素。

```
$myarray = explode("_", $filename);
if(count($myarray)>1){
    $full_filename = $myarray[1];
} 
```

# c++ - 我可以使用 xbuild 在 Linux 上编译 Visual C++ 项目吗？

> ID：15768327
> 
> 赞同：3
> 
> 时间：2013-04-02T15:40:17.460
> 
> 标签：c++, linux, gcc, mono, xbuild

我有一个使用 Visual C++ 2008 和 Debian Linux 在 Windows 上编译的现有项目。该项目使用标准的 Visual C++`.vcproj`文件，以及一些`.cpp`和`.h`文件。它不依赖于任何 Windows 特定的东西。只是普通的 C++。

它在 Linux 上编译和运行良好，使用*自制工具*读取`.vcproj`文件以生成`Makefile`用于`make`编译和链接所有文件的`g++`.

问题是在 Visual C++ 2010（和 2012）中，项目文件的格式发生了变化。连名字都从`.vcproj`改为`.vcxproj`。我*的自制工具*无法读取这个新项目文件来生成`Makefile`.

我没有升级*自制工具*来支持新的项目文件，而是想知道是否`xbuild`能够编译我的 Linux 可执行文件？

我首先尝试编译我自己的（VC++2008）项目，但`xbuild`抱怨我的项目`is a VS2003 project, which is not supported by xbuild.`但是当谷歌搜索这个问题时，我发现它`xbuild`应该支持 VS2005 项目文件。也有一些参考来`mdtool`支持这些旧的项目文件，不过我现在好像已经集成进去`xbuild`了。

此外，我尝试编译从 MSDN 站点获得的 Visual C++ 2010 示例 (HuoChess)。结果是

```
/Microsoft.Cpp.Default.props: Project file could not be imported, it was being
imported by [...] /HuoChessConsole/HuoChessConsole.vcxproj: Imported project:
"//Microsoft.Cpp.Default.props" does not exist.` 
```

现在，看起来项目文件需要一些*Microsoft*为编译器定义的*规则。*`Cpp`我应该伪造这些定义来`gcc`代替使用吗？我怎样才能做到这一点？

我想做的事有可能`xbuild`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-07T07:34:04.673

有一个项目[GCCBuild](https://github.com/roozbehid/GCCBuild)，您可以使用它在 Linux 中构建 vcxproj 项目。它只是使用相同的 vcxproj，但使用 GCC 来编译和构建。那里也有很多例子。

PS。我是那个项目的作者。

# asp.net - 如何获取 Crystal Reports .NET 报表中的页数

> ID：15768328
> 
> 赞同：2
> 
> 时间：2013-04-02T15:40:18.067
> 
> 标签：asp.net, crystal-reports-2010

我有一个 Web 应用程序，我在其中呈现一个或多个 Crystal Reports，然后将它们合并到一个 PDF 中。我想做的是从一个 CrystalDecisions.CrystalReports.Engine.ReportDocument 对象获取页数，然后将该值设置为后续 ReportDocuments 中的参数，以便继续正确地进行页码编号。ReportDocument 类是否公开了获取页数的方法？如果没有，还有其他方法吗？

我没有使用 Crystal Report Viewer。

我正在为 Visual Studio 2010 和 C# .NET 4 使用 CrystalReports。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:15:35.613

我的解决方案是使用下面的代码：

```
reportDocument.FormatEngine.GetLastPageNumber(new CrystalDecisions.Shared.ReportPageRequestContext()); 
```

Intellisense 不会获取 ReportDocument 的“FormatEngine”属性，因此您需要手动键入它，然后 Intellisense 将显示“GetLastPageNumber”方法，您可以从那里开始。

我以前见过这种解决方案，但由于缺乏 Intellisense 支持，我认为可能是我使用了错误版本的 Crystal Report 对象来利用“FormatEngine”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T09:48:43.703

**CrystalDecisions 的TotalPageCount**属性将解决该问题。

# json - 如何同时更新 Highcharts 中的多个系列

> ID：15768329
> 
> 赞同：0
> 
> 时间：2013-04-02T15:40:17.930
> 
> 标签：json, dynamic, highcharts, series

我正在使用 Highcharts 在单个图表上绘制多个系列。系列数据是从包含 JSON 格式数据的文件中读取的。该文件将每隔几秒钟更新一次新数据，并且我有一个重新读取文件的功能。这是文件中的数据：

```
[{"name": "series1", "data": [[1,109],[2,313],[3,192]]},{"name": "series2", "data": [[1,111],[2,112],[3,777]]}] 
```

我得到的代码是：

```
//Read JSON data from a file
$(function () {

    function getSeriesData(file) {
        var data = null;
        $.ajax({
        async: false,
            cache: false,
        url: file,
            method: 'GET',
            dataType: 'json',
            success: function(datasets){
                data = datasets;
            },
            error: function(error,text,http){
                alert("Error retrieving " + url + ".");
            }
        });  

        return data;
    }

    var graphData = getSeriesData("seriesData.json");

    var graphOptions = {
            chart: {
             type: 'line',
             renderTo: "container",
         },
         series: graphData
    };

    var graph = new Highcharts.Chart(graphOptions);

    var updateInterval = 1000 * 5;  // 5 seconds

    function update() {
        //Need to refresh series data here.
                    //Something like:
            graph.series = getSeriesData("series.json");
            graph.redraw();
            setTimeout(update, updateInterval);
    }

    update();}); 
```

查看文档似乎没有办法使用我的 getSeriesData 函数重新读取文件同时再次设置所有系列数据。这里和其他地方的大多数示例都可以通过 series[] 数组来设置单个系列的数据。但这不是我要找的。也许我必须重做代码才能这样做，但我想我会先在这里检查一下，希望有更简单的方法！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:35:15.193

我看不到一个电话就能完成所有系列的方法。我可以看到两个选项。

如果系列的数量是固定的，您可以在重绘选项设置为 false 的情况下调用 series.setData 对它们进行迭代，然后调用 redraw()。

如果系列的数量可能发生变化，您将不得不遍历 chart.series 调用 remove，然后遍历您的系列数组调用 chart.addSeries。

# memory-leaks - Groovy Mixin 使用内存泄漏

> ID：15768330
> 
> 赞同：2
> 
> 时间：2013-04-02T15:40:28.777
> 
> 标签：memory-leaks, groovy, mixins

我正在使用 Groovy 1.7.6，我们有一个使用基本 mixin 的类（为此目的在下面进行了简化）：

```
class MixinClass {
    def self
    def init(me){
        this.self = me
    }
} 
```

我将此mixin添加到另一个类（也简化了），如下所示：

```
@Mixin(MixinClass)
class FunctionEntry  {

    def FunctionEntry(){
        init(this)
    }

.. 
```

以上基本上只是将 FunctionEntry 类的实例的引用传递给@mixin 以供参考（尽管这可能是任何数据）

如果我现在运行一个测试，并循环调用数千次，`new FunctionEntry()` 我最终会得到一个 Heap OOM 错误（注意，循环实际上只是实例化了对象，它不会将它存储在任何地方）。

调试了堆后，我发现问题是`MixinInMetaClass`- 我的结论是，即使我丢弃了对象实例， MixinInMetaClass 仍在保留数据而不被收集。

有没有人遇到过这个问题？这是一个已知的 Groovy 1.7.6 问题吗？我的印象是 Mixin 可以保持状态，但是这个证据似乎表明 MixinInMetaClass 每次我创建一个对象时都在锁定对象数据。

# email - 经典 ASP 电子邮件不适用于 Outlook SMTP 中继

> ID：15768332
> 
> 赞同：1
> 
> 时间：2013-04-02T15:40:41.070
> 
> 标签：email, asp-classic, smtp, office365

我正在尝试让经典的 ASP 页面与 Outlook（Microsoft Web 电子邮件）SMTP 中继一起使用。我收到以下错误：

```
CDO.Message.1 error '80040213'
The transport failed to connect to the server. 
```

我的代码看起来像

```
dim objEmail                
Set objEmail = Server.CreateObject("cdo.message") 
objEmail.To = list
objEmail.From = "xyz@abc.com"  
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = smtpServer
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = username
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = password
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = 1
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 587
objEmail.Configuration.Fields.Update
objEmail.Send 
```

我用 GMAIL 进行了测试，这个东西片段可以很好地使用它。我想我在 Outlook SMTP 的配置中遗漏了一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:52:59.500

这是一个确实有效的示例。确保你使用的账户有邮箱，并且发件人地址确实是账户地址。

```
 ServicePointManager.ServerCertificateValidationCallback = (sender, certificate, chain, sslPolicyErrors) => true;

        var msg = new MailMessage();
        msg.Subject = "Hello";
        msg.Body = "Hello Sir";
        msg.From = new MailAddress("no.reply@contoso.com");
        msg.To.Add("user@contoso.com");

        var client = new SmtpClient("smtp.outlook.office365.com");
        client.Port = 587;
        client.Credentials = new NetworkCredential("no.reply@contoso.com", "******");
        client.EnableSsl = true;

        client.Send(msg); 
```

# java - 如何从不同的 jar 文件中调用类？

> ID：15768333
> 
> 赞同：0
> 
> 时间：2013-04-02T15:40:47.727
> 
> 标签：java, methods, jar

如果我有一个包含多个 jar 的程序，我如何调用另一个 jar 中的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:43:49.917

在您的项目类路径中添加 jar 并在您的代码中导入该类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:44:25.363

你需要将你的应用程序与 jars 一起编译，然后简单地导入你要在代码中实例化的类。

`javac`在类路径中查找正在导入的类，检查`-cp`选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:44:58.103

我不确定你在问什么。如果您希望使用多个 jar 中的类，只需将所有 jar 放在应用程序的类路径中。如果您遇到包命名冲突（即您有一个类被多个 jar 加载），那么您可能需要编写自己的类加载器来解决这个问题。

# sql - SQL STATE 37000 [Microsoft][ODBC Microsoft Access Driver] 语法错误或访问冲突

> ID：15768334
> 
> 赞同：1
> 
> 时间：2013-04-02T15:40:51.830
> 
> 标签：sql, odbc, powerbuilder

再会！

我收到此错误：

SQL STATE 37000 [Microsoft][ODBC Microsoft Access Driver] 尝试在 Powerscript 上运行嵌入式 SQL 语句时出现语法错误或访问冲突。

我正在使用 MsSQL Server 2008 和 PowerBuilder 10.5，操作系统是 Windows 7。我能够确定导致问题的查询之一：

```
SELECT top 1 CONVERT(DATETIME,:ls_datetime)
into :ldtme_datetime
from employee_information
USING SQLCA;

if SQLCA.SQLCODE = -1 then
    Messagebox('SQL ERROR',SQLCA.SQLERRTEXT)
    return -1 
end if 
```

`datetime()`通过使用PowerBuilder的功能，我能够想出一个解决方案。但是程序的其他部分导致了这种情况，我很难确定程序的哪一部分导致了这种情况。我觉得这很奇怪，因为我在这里运行相同的脚本`dev-pc`完全没有问题，但是当尝试在我的客户端工作站上运行程序时，我收到了这个错误。我没有发现工作站和我的`dev-pc`. 我也尝试按照[此处](http://msdn.microsoft.com/en-us/library/aa269541%28v=vs.60%29.aspx)的说明进行操作，但问题仍然存在。

更新：我能够识别导致问题的其他脚本：

```
/////////////////////////////////////////////////////////////////////////////
//  f_datediff
//  Computes the time difference (in number of minutes) between adtme_datefrom and adtme_dateto
////////////////////////////

decimal ld_time_diff

SELECT top 1 DATEDIFF(MINUTE,:adtme_datefrom,:adtme_dateto)
into :ld_time_diff
FROM EMPLOYEE_INFORMATION
USING SQLCA;

    if SQLCA.SQLCODE = -1 then
        Messagebox('SQL ERROR',SQLCA.SQLERRTEXT)
        return -1
    end if

return ld_time_diff 
```

似乎传递日期时间变量会导致上述错误。其他脚本工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T11:47:59.683

*   创建一个事务用户对象继承 trom 事务。
*   将逻辑放在对象的 sqlpreview 中，以捕获并记录发送到数据库的 sql 语句。
*   实例化它，连接到数据库，并在您的嵌入式 sql 中使用它。
*   假设用户收到错误，您可以检查发送到数据库的内容并从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T10:13:53.620

第一条语句中的错误应该是 CONVERT 函数的第二个参数。它的类型不是字符串，它的类型是有效的表达式 [https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql](https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql)

所以我希望你的

```
CONVERT(DATETIME,:ls_datetime) 
```

将评估为

```
CONVERT(DATETIME, 'ls_datetime') 
```

但应该是

```
CONVERT(DATETIME, DateTimeColumn) 
```

第二条语句中的错误可能是您提供了错误的日期时间格式。所以请检查您使用此功能时是否仍然出现错误 [https://docs.microsoft.com/en-us/sql/t-sql/statements/set-dateformat-transact-sql](https://docs.microsoft.com/en-us/sql/t-sql/statements/set-dateformat-transact-sql)

使用您使用的正确日期时间格式

# jquery - Jquery Validation - 如何验证动态表单？

> ID：15768335
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:40:52.533
> 
> 标签：jquery, jquery-validate, dynamic-forms

我是 Jquery 验证的新手（[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)）

我有一个动态表格。我需要知道是否可以验证这样的表单：

```
<form ...>
<div class="multi-city">                        
    <div class="controls visible">
        <label for="id_form-0-city_input">City</label>
        <input type="text" name="form-0-city_input" class="city-input ui-autocomplete-input" id="id_form-0-city_input" autocomplete="off">
        <p style=""><a href="#" class="delete">Remove</a></p>
    </div>
    <input type="hidden" id="id_form-0-city" name="form-0-city">

    <div class="controls visible">
        <label for="id_form-1-city_input">City</label>
        <input type="text" name="form-1-city_input" class="city-input ui-autocomplete-input" id="id_form-1-city_input" autocomplete="off">
        <p style=""><a href="#" class="delete">Remove</a></p>
    </div>
    <input type="hidden" id="id_form-1-city" name="form-1-city">

    <div class="controls hidden">
        <label for="id_form-2-city_input">City</label>
        <input type="text" name="form-2-city_input" class="city-input ui-autocomplete-input" id="id_form-2-city_input" autocomplete="off">
        <p style=""><a href="#" class="delete">Remove</a></p>
    </div>                                    
</div>
</form> 
```

基本上我需要验证“.controls.visible”。通过代码：

```
$('.multi-city .controls.visible') 
```

我应该使用什么策略来验证这个动态字段？

有任何想法吗？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:59:36.000

不完全确定你在问什么。 *默认情况下*，此插件将简单地忽略任何隐藏字段。如果这些字段没有真正“隐藏”，那么您需要在创建或“删除”（隐藏？）这些字段时动态编辑规则。进行这种操作的唯一方法是使用插件中已经内置的方法......

*   `rules('add')`
*   `rules('remove')`

请参阅所有文档： http: [//docs.jquery.com/Plugins/Validation#Plugin_methods](http://docs.jquery.com/Plugins/Validation#Plugin_methods)

* * *

要将规则添加到动态添加的字段，您将在创建字段后立即使用[该`rules('add')`方法。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

```
$('[name="Field2"]').rules('add', {
    required:true,
    messages: {
        required: "Custom message."
    }
}); 
```

或者一次对于许多新字段，使用“开始于”选择器和`.each`...

```
$('[name^="Field"]').each(function() {
    $(this).rules('add', {
        required:true,
        messages: {
            required: "Custom message."
        }
    });
}); 
```

此方法的简单演示：http: [//jsfiddle.net/xCY4T/1/](http://jsfiddle.net/xCY4T/1/)

* * *

另一种方法是使用[addClassRules 方法](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules#namerules)*创建*一个。 `class`

```
$.validator.addClassRules("MyRule", {
    required: true
}); 
```

然后，当您创建新字段时，请确保它们每个都包含 a`class="MyRule"`和一个唯一`name`的 ，当然。

```
<input type="text" name="Field1" class="MyRule" />
<input type="text" name="Field2" class="MyRule" /> 
```

这种方法非常简单，但我看不出有办法覆盖默认消息。

简单演示：http: [//jsfiddle.net/xCY4T/3/](http://jsfiddle.net/xCY4T/3/)

# database - 从 phpmyadmin 导出数据库

> ID：15768337
> 
> 赞同：0
> 
> 时间：2013-04-02T15:40:54.603
> 
> 标签：database, phpmyadmin, export

当我从 phpmyadmin 以 CSV 格式导出数据库时，所有字段都存储在第一列中吗？如何将它们分别放在不同的列中？我试过 FIELDS ESCAPED BY 和 LINES TERMINATED BY \r\n 但没有用谢谢

# symfony - 不同路径下的 Symfony2 资产

> ID：15768341
> 
> 赞同：1
> 
> 时间：2013-04-02T15:41:01.927
> 
> 标签：symfony, assetic

我正在开发一个 Symfony2 应用程序来替换一个非常大的遗留系统。在过渡期间，有时 Symfony2 应用程序和旧版应用程序将同时运行，并且根据您点击 Varnish 的 URI 将请求定向到适当的服务器。目前，这两个应用程序都将它们的资产放在下面`/css/`，`/js/`这会给我们带来问题。

为了解决这个问题，我想更改 Symfony 资产的路由路径，以便它们在`domain.com/symfony/css`例如下解析。有没有办法做到这一点`app_config.yml`？

我已经尝试使用文档中描述的这种技术在每个资产的基础上执行此操作：http: [//symfony.com/doc/master/cookbook/assetic/asset_management.html#controlling-the-url-used](http://symfony.com/doc/master/cookbook/assetic/asset_management.html#controlling-the-url-used)。问题是我必须找到每个样式表和 javascript 块并手动指定 URI。我也遇到了问题，每次添加新文件时 URI 都会生成更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:45:24.280

您可以设置自定义 url 用于模板中的输出，使用..

```
{% javascripts '@AcmeBundle/Resources/public/js/*' output='symfony/js/main.js' %}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

来自：[http ://symfony.com/doc/2.1/cookbook/assetic/asset_management.html#controlling-the-url-used](http://symfony.com/doc/2.1/cookbook/assetic/asset_management.html#controlling-the-url-used)

# c# - 不允许使用 GET 405 方法

> ID：15768345
> 
> 赞同：0
> 
> 时间：2013-04-02T15:41:08.587
> 
> 标签：c#, jquery, json, web-services, asp.net-web-api

这是我调用 web api 的 jquery 代码

```
var request = {
    RequestId: "123",
    DeviceId: "ACU-B2-01-R1",
    AccessType: "Unlock",
    LoginId: "tester",
    Password: "tester"
};

$.ajax({
    url: 'http://localhost:55208/api/accesspanel',
    type: 'POST',
    data: JSON.stringify(request),
    dataType: 'jsonp',
    contentType: "application/json;charset=utf-8",
    success: function (data) {
        alert("success");
        alert(JSON.stringify(data));
    },
    error: function (x, y, z) {
        alert(x + '\n' + y + '\n' + z);
    }
}); 
```

当我运行这段代码时，什么也没有发生。成功和错误块都不会被触发。在chrome的调试控制台中检查后，这是错误记录：

```
GET http://localhost:55208/api/accesspanel?callback=jQuery18203847100134007633_…22,%22LoginId%22:%22tester%22,%22Password%22:%22tester%22}&_=1364916423737 405 (Method Not Allowed) 
    send jquery.min.js:2
    p.extend.ajax jquery.min.js:2
    (anonymous function) 
```

但是，我可以使用 C# 代码成功调用我的 web api 方法，如下所示：

```
 using (var client = new HttpClient())
    {
        client.BaseAddress = new Uri("http://localhost:55208/");

        var request = new DeviceAccessRequest
        {
            RequestId = Guid.NewGuid().ToString(),
            DeviceId = "ACU/B2/01/R1",
            AccessType ="Unlock",
            LoginId = "tester",
            Password = "tester" ,                    
        };
        var response = client.PostAsJsonAsync("api/accesspanel", request).Result;
        if (response.IsSuccessStatusCode)
        {
            var deviceAccessResponse = response.Content.ReadAsAsync<DeviceAccessResponse>().Result;

        }
    } 
```

这是我的网络 api 方法：

```
 [HttpPost]
    public HttpResponseMessage PostDeviceControl(DeviceAccessRequest deviceAccessRequest)
    {

        var deviceAccessResponse = new DeviceAccessResponse(deviceAccessRequest.RequestId)
            {
                Status = "OK"
            };
        var response = Request.CreateResponse<DeviceAccessResponse>(HttpStatusCode.OK, deviceAccessResponse);
        return response;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:42:49.137

您在控制台中看到 GET 请求的原因是因为您指定`dataType: 'jsonp'`了仅适用于 GET 请求（原因是 jQuery 将其转换为`<script>`指向您指定的 url 的标记）。如果您想使用 GET 以外的其他动词进行跨域 AJAX，则不能使用 JSONP。如果您需要使用其他动词（例如 POST 在您的情况下），您有 2 个选项：

*   [`CORS`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing). 看看[`following video`](http://channel9.msdn.com/Shows/Web+Camps+TV/ASPNET-Web-API-and-CORS-Support)它说明了如何在 Web API 上启用 CORS。显然，要使您的客户端浏览器正常工作，您需要 tio 支持它
*   您域上的服务器端网桥。这里的想法是在托管您的 javascript 代码的域上放置一些服务器端脚本，该脚本会将 HTTP 请求发送到 API 并将响应返回给客户端。然后您将向您自己的域发送一个常规的 AJAX POST 请求

# sql - 上一个和下一个网关未正确显示

> ID：15768350
> 
> 赞同：0
> 
> 时间：2013-04-02T15:41:23.673
> 
> 标签：sql, sql-server, common-table-expression

您好我有以下查询，这是一个显示 1 个项目的下一个网关信息的查询。但我想将此作为 CTE 加入另一个查询，但我需要更改此 [Gateway].[ProjectFk]=744 因为 744 仅适用于 1 行，每行都有不同的 ProjectFk，我可以给一个参数CTE？

```
SELECT [Gateway].[ProjectFk],[GatewayTitle].[Title],[Gat_Date],[GatewayStatus].[Title]
FROM [LocalGTPDatabase].[dbo].[Gateway]
LEFT JOIN [LocalGTPDatabase].[dbo].[GatewayTitle] ON [GatewayTitle].[ID]=[Gateway].[Gat_TitleFk]
LEFT JOIN [LocalGTPDatabase].[dbo].[GatewayStatus] ON [GatewayStatus].[ID]=[Gateway].[Gat_StatusFk]
LEFT JOIN [LocalGTPDatabase].[dbo].[Project] ON [Project].[ID]=[Gateway].[ProjectFk]
WHERE [GatewayStatus].[Title]='Target' and [Gateway].[ProjectFk]=744
order by CONVERT(DATETIME, CASE WHEN ISDATE([Gat_Date]) = 1 THEN [Gat_Date] END) asc 
```

但是当我将此查询与其他信息结合使用时，它没有显示数据，它有时会显示但没有我想要的那么多，我想用他们的网关获取我的所有项目：

```
 WITH

 /****** Next Gateway  ******/
MyCTE10 (ProjectFk, nextGatTitle, nextGatDate, nextGatStatus)as
(SELECT TOP 1 [Gateway].[ProjectFk],[GatewayTitle].[Title],[Gat_Date],[GatewayStatus].[Title]
FROM [LocalGTPDatabase].[dbo].[Gateway]
LEFT JOIN [LocalGTPDatabase].[dbo].[GatewayTitle] ON [GatewayTitle].[ID]=[Gateway].[Gat_TitleFk]
LEFT JOIN [LocalGTPDatabase].[dbo].[GatewayStatus] ON [GatewayStatus].[ID]=[Gateway].[Gat_StatusFk]
LEFT JOIN [LocalGTPDatabase].[dbo].[Project] ON [Project].[ID]=[Gateway].[ProjectFk]
WHERE [GatewayStatus].[Title]='Target'
order by CONVERT(DATETIME, CASE WHEN ISDATE([Gat_Date]) = 1 THEN [Gat_Date] END) asc ) ,

    /****** Get all the links between projects and teams ******/
SELECT [LinkProject-Area].[ID] as [Link_ID],[LinkProject-Area].[ProjectFk] as [Project_ID],[Project].[GTDSnr]    as [Proj_No],[Project].[Title]   
, [MyCTE10].[nextGatTitle] as [Next Gateway], [MyCTE10].[nextGatDate] as [Next Gateway Date],     [MyCTE10].[nextGatStatus] as [Next Gateway Status]
FROM [LocalGTPDatabase].[dbo].[LinkProject-Area]
LEFT JOIN [MyCTE10] ON [MyCTE10].ProjectFk = [LinkProject-Area].[ProjectFk]
WHERE [Project].[ID]>0
order by [Proj_No],[hasLead] desc 
```

我究竟做错了什么？是因为有限制，但我该如何克服这个问题？我在我的 CTE 中选择项目的所有网关，然后我只收集第一个，当我单独执行此操作时，我可以添加一个 WHERE [ProjectFk] 并获得该项目的所有网关，如果我限制它我可以得到我需要的那个，但是因为我得到了我所有的项目，所以我需要从查询的那一部分中删除 where projectFk=something 并将其加入到 projectFk 中，但现在它不仅显示 2 个日期 1 用于下一个由于限制，网关和最后一个网关为 1，...

**解决了它：我认为您不能为此使用 CTE，但您必须使用用户定义的函数/将第一个查询放在 projectFk 是参数的函数中：然后像这样加入它们：OUTER APPLY dbo.LastGatewayAll( [LinkProject-Area].[ProjectFk]) AS subLastGateWays 这将使您有可能获得如下数据：subLastGateWays.[gateway] as [Last GW],subLastGateWays.[status] as [Last GW Status],subLastGateWays。 [Gat_Date] 作为 [Last GW Date] 我希望这篇文章能更清楚地说明我想要做什么......**

# drop-down-menu - selenium - 如何使用选择下拉菜单进行编程

> ID：15768352
> 
> 赞同：0
> 
> 时间：2013-04-02T15:41:24.130
> 
> 标签：drop-down-menu, selenium, keypress

我想模拟用户点击文本字段，使用下拉菜单并选择一个项目。

我可以让他们在现场和下拉列表中使用：

```
click    //input[@id='select_students']
keyPress //input[@id='select_student']   \40 
```

但我似乎无法在下拉列表中“挑选”一个项目。

我尝试使用`keyPress`with`Keys.ENTER`作为值，但我被迫输入一个目标（这是 Firefox 中的 selenium IDE），我不知道该使用什么作为目标。

无论目标是否可用，我都可以使用按 Enter 键的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:57:11.510

以下逻辑可能对您有用。

```
click  css=select[id="select_students"]
select css=select[id="select_students"]   label=student10
click  css=option[value="student10"] 
```

# c - 进程返回 -1073741819 (0xc0000005) 代码::Blocks

> ID：15768355
> 
> 赞同：3
> 
> 时间：2013-04-02T15:41:30.697
> 
> 标签：c, codeblocks

我对使用 Code::Blocks（版本 12.11）进行 C 编程有点陌生，这学期从我的大学开始，但我做到了。

我最近在课堂上学习了指针、内存分配和动态数组（没有一个是我的强项），并将它们合并到我的程序中（并且它可以编译）

现在问题来了，当我运行程序并转到菜单 - > 添加产品时，程序在我输入价格时终止，我收到“进程返回 -1073741819 (0xc0000005)”。我做了一些研究，发现这是访问冲突，但我真的不明白如何纠正它。

问候

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define maxCharName 64
#define maxCharUserPass 8
#define maxCharId 5

// Product Structure
typedef struct{
    char name[maxCharName];
    char idCode[maxCharId];
    float price;
    float stock;
}product;

// DataBase of Products
typedef struct{
    int sizeT;
    product *array;
} TProducts;

TProducts a;

// Press any Key on the Keyboard to Proceed
void pressKeyToContinue(){
    puts("\n\n\n     Please Press any Key to Continue...");
    getchar();
}

// Start Page
void startPage(){
    puts("\n\n\n                      -- Welcome to WeePro Manager --\n\n");
    puts("                             -- Version 1.0 --\n\n\n\n");
    puts("                    -- Developped By: Nick --");

    pressKeyToContinue();
    system("cls");
    }

// Program Terminator
void shutdown(){
    puts("\n\n\n      Good-Bye");
    pressKeyToContinue();               // Awaits User Input
    exit(0);
}

// Asks User Information for Verification
int userLogin(){
    char userName[maxCharUserPass] = "WPuser";
    char inputUserName[maxCharUserPass];

    char passWord[maxCharUserPass] = "12345";
    char inputPassWord[maxCharUserPass];

    printf("Username?     ");
    scanf("%s",inputUserName); fflush(stdin);

    printf("Password?     ");
    scanf("%s", inputPassWord); fflush(stdin);

    system("cls");

    if((strcmp(userName, inputUserName) == 0)&&(strcmp(passWord, inputPassWord) == 0)){
        return 1;
    }else{ return 0;}
}

// Lists All Products With their Respective Information
void listAll(){
    int idx = 0;
    puts("List:");
    while((idx < a.sizeT)&&(a.array[idx].name != NULL)){
        printf(":::%s ( id: %s )", a.array[idx].name, a.array[idx].idCode);
        printf("Price: %6.2f eur/g", a.array[idx].price);
        printf("Stock: %6.2f g", a.array[idx].stock);

        idx++;
    }

    pressKeyToContinue();
    system("cls");
}

// Input Product ID Code
char* inputIdCode(){
    char* tempIdCode;
    puts("ID Code?");
    scanf("%s", tempIdCode);

    system("cls");
    return tempIdCode;
}

// Search By ID Code
int searchIdCode(){
    int idx = 0;
    char* tempIdCode;
    tempIdCode = inputIdCode();
    do{
        if(strcmp(a.array[idx].idCode, tempIdCode) == 0){
            return idx;
        }else{
            idx++;
        }
    }while(idx < a.sizeT);

    puts("No Product With Such an ID Code!");
    return -1;
}

// Input Product Name
char *inputProductName(int length){
    char name[maxCharName];

    puts("Product Name?");
    scanf("%s", name); fflush(stdin);

    system("cls");
    return name;
}

// Input Product Price
float inputProductPrice(int length){
    float price;

    puts("Product Price?");
    scanf("%f", price); fflush(stdin);

    system("cls");
    return price;
}

// Input Product Stock
float inputProductQuantity(int length){
    float quantity;

    puts("Product Stock?");
    scanf("%f", quantity); fflush(stdin);

    system("cls");
    return quantity;
}

/////////////////
// Add Product //
/////////////////

// New Product Adder
void addProduct(){
    char* tempStr;
    float temp;

    if(a.sizeT == 0){
        a.sizeT = 1;
        a.array = (product*)malloc((a.sizeT)*sizeof(product));
    }else{
        a.sizeT++;
        a.array = (product*)realloc(a.array, (a.sizeT)*sizeof(product));
    }

    tempStr = inputProductName(a.sizeT);
    strcpy(a.array[a.sizeT].name, tempStr);
    temp = inputProductPrice(a.sizeT);
    temp = inputProductQuantity(a.sizeT);

    system("cls");
}

void transaction(){}

////////////////////
// Delete Product //
////////////////////

// Delete Product
void deleteProduct(){
    int idx, idxPro;
    char* tempIdCode;

    puts("Delete Which Product?\n");
    tempIdCode = inputIdCode();
    idxPro = searchIdCode(tempIdCode);

    idx = idxPro + 1;
    while(idx < a.sizeT){
        a.array[idx] = a.array[idx+1];
        idx++;
    }
    a.array = realloc(a.array, (a.sizeT-1)*sizeof(product));
}

//Product Information Modifier
void modifyProduct(){
    char choice;
    int tabLength;
    do{
        puts("Modify What?\n");
        puts("   -> [N]ame\n");
        puts("   -> [P]rice\n");
        puts("   -> [S]tock\n\n");
        puts("   -> [R]eturn to Previous Menu");                    // Prints the Menus' Options

        scanf("%c", &choice);
        choice = toupper(choice);                               // Save Users' Choice And Up Case
        fflush(stdin);

        switch(choice){
            case 'N':
                    system("cls");
                    tabLength = searchIdCode();
                    inputProductName(tabLength);
                    break;
            case 'P':
                    system("cls");
                    tabLength = searchIdCode();
                    inputProductPrice(tabLength);
                    break;
            case 'S':
                    system("cls");
                    tabLength = searchIdCode();
                    inputProductQuantity(tabLength);
                    break;
            case 'R':
                    system("cls");
                    returnToMenu2();
                    break;
            default:
                puts("Something Went Wrong!\n");
                pressKeyToContinue();
                system("cls");
        }

    }while(choice != 'o');
}

// Sub-Menu Interface
void menu(){
    char choice;
    do{
        puts("Please Make Your Selection.\n");
        puts("   -> [A]dd a New Product\n");
        puts("   -> [M]odify a Product\n");
        puts("   -> [D]elete a Product\n\n");
        puts("   -> [R]eturn to Main Menu");                    // Prints the Menus' Options

        scanf("%c", &choice); fflush(stdin);
        choice = toupper(choice);                               // Save Users' Choice And Up Case

        switch(choice){
            case 'A':
                    system("cls");
                    addProduct();
                    break;
            case 'M':
                    system("cls");
                    modifyProduct();
                    break;
            case 'D':
                    system("cls");
                    deleteProduct();
                    break;
            case 'R':
                    system("cls");
                    returnToMenu1();
                    break;
            default:
                    puts("Something Went Wrong!\n");
                    pressKeyToContinue();
                    system("cls");
        }
    }while(choice != 'o');
}

// Return To Ma

> Blockquote

in Menu
void returnToMenu2(){
    menu();
}

// Main Menu
void controlPanel(){
    char choice;
    do{
        puts("Please Make Your Selection.\n");
        puts("   -> [T]ransaction\n");
        puts("   -> [M]enu\n");
        puts("   -> [L]ist\n");
        puts("   -> [S]hutdown");                                        // Prints the Panels' Options

        scanf("%c", &choice); fflush(stdin);
        choice = toupper(choice);                                   // Save Users' Choice And Up Case

        switch(choice){
            case 'T':
                    system("cls");
                    transaction();
                    break;
            case 'M':
                    system("cls");
                    menu();
                    break;
            case 'L':
                    system("cls");
                    listAll();
                    break;
            case 'S':
                    system("cls");
                    shutdown();
                    break;
            default:
                    puts("Something Went Wrong!\n");
                    pressKeyToContinue();
                    system("cls");
        }
    }while(choice != 'o');
}

// Return To Main Menu
void returnToMenu1(){
    controlPanel();
}

int main(){
    int loginSuccess=1;

    //loginSuccess = userLogin();

    switch(loginSuccess){
    case 0:
        shutdown();
        break;

    case 1:
        startPage();
        controlPanel();
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T15:45:24.860

正在尝试通过未初始化的指针写入随机内存`tempIdCode`：

```
char* inputIdCode(){
    char* tempIdCode;
    puts("ID Code?");
    scanf("%s", tempIdCode);

    system("cls");
    return tempIdCode;
} 
```

`tempIdCode`在尝试写入之前，您需要为其分配内存。您必须`malloc()`在此处使用（而不是返回本地数组的地址）：

```
char* tempIdCode = malloc(20);
if (tempIdCode)
{
    /* The format specifier "%19s" instructs scanf()
       to read at most 19 characters, one less than
       allocated to allow for terminating null character
       written by scanf(), to prevent potential buffer
       overrun. */
    scanf("%19s", tempIdCode);
} 
```

函数的调用者必须显式检查返回`NULL`指针。调用者还必须`free()`分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:23:53.877

这是一个杀手：

```
// Input Product Name
char *inputProductName(int length){
  char name[maxCharName];

  puts("Product Name?");
  scanf("%s", name); fflush(stdin);

  system("cls");
  return name;
} 
```

此函数返回的引用指向堆栈上已释放的内存块，`char name`只有当程序在函数`name`中声明时才有效。

离开函数时`name`会自动释放，因此对函数结果的任何取消引用都会导致 UB，因为它很可能会访问未分配的内存。

为了解决这个问题，您可能希望传入一个缓冲区，将数据读入：

```
// Input Product Name
char * inputProductName(int length, char * name){
  puts("Product Name?");
  scanf("%s", name); fflush(stdin);

  system("cls");
  return name;
} 
```

并这样称呼它：

```
// New Product Adder
void addProduct(){
  char* tempStr;
  float temp;

  if(a.sizeT == 0){
    a.array = malloc((a.sizeT)*sizeof(product));
  }else{
    a.array = realloc(a.array, (a.sizeT)*sizeof(product));
  }

  a.sizeT++;

  inputProductName(a.sizeT, a.array[a.sizeT].name);

  ... 
```

# c# - 如何让 Roslyn 正确格式化 XML 文档注释？

> ID：15768358
> 
> 赞同：3
> 
> 时间：2013-04-02T15:41:53.453
> 
> 标签：c#, roslyn

我正在使用 a`SyntaxRewriter`将类从旧库转换为新库，这基本上需要查找具有给定属性的类，然后重写遵循特定约定的属性。重写器的一般骨架如下：

```
class PropertyConverter : SyntaxRewriter
{
    public override SyntaxNode VisitPropertyDeclaration(PropertyDeclarationSyntax node)
    {
        if (!MeetsUpdateCriteria(node)) return base.VisitPropertyDeclaration(node);

        // these implementations simply return a string
        var name = FigureOutName(node.Identifier);
        var propertyType = FigureOutType(node.Type);

        var getter = Syntax.ParseExpression("this.GetValue<" + propertyType + ">(" + name + ")");
        var setter = Syntax.ParseExpression("this.SetValue(" + name + ", value)");

        return node.WithType(propertyType)
                   .WithAccessorList(
            Syntax.AccessorList(Syntax.List(
                Syntax.AccessorDeclaration(
                    SyntaxKind.GetAccessorDeclaration,
                    Syntax.Block(Syntax.ReturnStatement(getter))),
                Syntax.AccessorDeclaration(
                    SyntaxKind.SetAccessorDeclaration,
                    Syntax.Block(Syntax.ExpressionStatement(setter)))))));
    }
} 
```

这个转换器的结果是一个具有更新属性的类，它在以下代码中输出：

```
// IDocument csfile <- from a project in a Workspace
var tree = csfile.GetSyntaxTree();
var root = new PropertyConverter().Visit((SyntaxNode)tree.GetRoot())
                                  .NormalizeWhitespace(); // problem!

File.WriteAllText(Path.GetFileName(csfile.FilePath), root.ToFullString()); 
```

此时代码在语法上都是正确的，并且输出的语法树是正确的。我唯一的抱怨是 XML 文档注释周围的空格根本不正确：

```
/// <summary>
        /// Gets or sets the thickness (TH).
        /// </summary>
public float Thickness
{
    get
    {
        return this.GetValue<float>(TH);
    }

    set
    {
        this.SetValue(TH, value);
    }
} 
```

注意所有多余的缩进。此外，间距也以其他方式损坏，尤其是在方法文档中：

```
/// <summary>
        /// Initializes a new instance of the <see cref = "X"/> class.
        /// </summary>
        /// <param name = "innerRadius">Inner radius of the X.</param>
        /// <param name = "thickness">Thickness of the X.</param> 
```

我已经验证了输入树没有遇到这些缩进问题，并且我还验证了该树在调用之前没有遇到这些缩进问题`NormalizeWhitespace`。我也试过`elasticTrivia: true`了，也没有任何运气。

那么如何让 Roslyn 以一致的方式规范化空白呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:46:25.870

我认为这可能是 Roslyn 中的一个错误。但是，一般来说，我建议使用`Format`包含在 Roslyn.Services.dll 中的 SyntaxNode 上的扩展方法（添加一个`using Roslyn.Services;`）。

`NormalizeWhitespace`是一个非常蛮力的系统，其设计主要是为了确保代码可以往返。Roslyn.Services 层中存在的格式化代码更灵活一些，并且包含了 Visual Studio`Format Document`命令的许多行为。

# java - 在java中使用二叉搜索树的地址簿

> ID：15768359
> 
> 赞同：-2
> 
> 时间：2013-04-02T15:41:54.350
> 
> 标签：java

您好，我正在用 java 编写地址簿应用程序，并且我已经编写了整个程序。唯一的问题是它没有按预期工作并且代码中没有错误，所以我无法对其进行故障排除。任何帮助将不胜感激。

编辑：这不是一个重复的问题，因为这包括所有方法。另一个没有主要方法并且不完整，由于它已关闭，我被迫提出一个新问题。说得通？

```
package com.addressbook;

public abstract class KeyedItem<KT extends Comparable<? super KT>> {
private KT searchKey;

public KeyedItem(KT key){
    searchKey = key;
}

public KT getKey(){
    return searchKey;
}
}

package com.addressbook;

public class People extends KeyedItem<String> {
private String address;
private String phone;

public People(String n, String a, String p){
    super(n);
    this.address = a;
    this.phone = p;
}

public void setAddress(String a){
    address = a;
}

public void setPhone(String p){
    phone = p;
}

public String toString(){
    return "Name:" + getKey() + "\nAddress:" + address + "\nPhone:" + phone;
}

public String getTheKey(){
    return getKey();
}
}

package com.addressbook;

public class BinaryNode{
// Friendly data; accessible by other package routines
private People people;      // The data in the node
private BinaryNode left;     // Left child
private BinaryNode right;    // Right child
// Constructors

public BinaryNode(People pe, BinaryNode l, BinaryNode r) {
    people = pe;
    left = l;
    right = r;
}

public BinaryNode(People pe) {
    people = pe;
    left = right = null;
}

public void setData(People p){
    people = p;
}

public String getSearch(){
    return people.getTheKey();
}

public People getData(){
    return people;
}

public BinaryNode getLeft(){
    return left;
}

public BinaryNode getRight(){
    return right;
}
}

package com.addressbook;

import com.addressbook.People;
import com.addressbook.BinaryNode;

public class AddressBook {
private BinaryNode root;

public AddressBook() {
    super();
}

public AddressBook(People p) {
    super();
    root = new BinaryNode(p);
}

public void insert(People p){
    insert(p, root);
}

public People get(String key) {
    BinaryNode node = root;
    while (node != null) {
        if (key.compareTo(node.getSearch()) == 0) {
            return node.getData();
        }
        if (key.compareTo(node.getSearch()) < 0) {
            node = node.getLeft();
        } else {
            node = node.getRight();
        }
    }
    return null;
}

protected BinaryNode insert(People p, BinaryNode node) {
    if (node == null) {
        return new BinaryNode(p);
    }
    if (p.getTheKey().compareTo(node.getSearch()) == 0) {
        return new BinaryNode(p, node.getLeft(), node.getRight());
    } else {
        if (p.getTheKey().compareTo(node.getSearch()) < 0) {    // add to left subtree
            insert(p, node.getLeft());
        } else {                                                // add to right subtree
            insert(p, node.getRight());
        }
    }
    return node;
}

public void remove(String key) {
    remove(key, root);
}

protected BinaryNode remove(String k, BinaryNode node) {
    if (node == null) { // key not in tree
        return null;
    }
    if (k.compareTo(node.getSearch()) == 0) { // remove this node
        if (node.getLeft() == null) { // replace this node with right child
            return node.getRight();
        } else if (node.getRight() == null) { // replace with left child
            return node.getLeft();
        } else {
            // replace the value in this node with the value in the
            // rightmost node of the left subtree
            node = getRightmost(node.getLeft());
            // now remove the rightmost node in the left subtree,
            // by calling "remove" recursively
            remove(node.getSearch(), node.getLeft());
            // return node;  -- done below
        }
    } else {        // remove from left or right subtree
        if (k.compareTo(node.getSearch()) < 0) {
            // remove from left subtree
            remove(k, node.getLeft());
        } else {        // remove from right subtree
            remove(k, node.getRight());
        }
    }
    return node;
}

protected BinaryNode getRightmost(BinaryNode node) {
    assert(node != null);
    BinaryNode right = node.getRight();
    if (right == null) {
        return node;
    } else {
        return getRightmost(right);
    }
}

protected String toString(BinaryNode node) {
    if (node == null) {
        return "";
    }
    return node.getData().toString() + "(" + toString(node.getLeft()) + ", " +
        toString(node.getRight()) + ")";
}

public static void main(String[] arguments) {
    AddressBook tree = new AddressBook();

    People p1 = new People("person 1", "adresa 1", "404040404");
    People p2 = new People("person 2", "adresa 2", "4040434345");
    People p3 = new People("person 3", "adresa 3", "346363463");
    People p4 = new People("person 4", "adresa 4", "435346346");
    People p5 = new People("person 5", "adresa 5", "4363907402");

    tree.insert(p1);
    tree.insert(p2);
    tree.insert(p3);
    tree.insert(p4);
    tree.insert(p5);

    System.out.println(tree.get("person 1"));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:06:13.357

一方面：

```
public void insert(People p){
    insert(p, root);
} 
```

但该方法以

```
protected BinaryNode insert(People p, BinaryNode node) {
    if (node == null) {
        return new BinaryNode(p);
    } 
```

这意味着，同时考虑这两个部分，你总是忽略新的根，因此你的树永远不会填满。试试这个：

```
public void insert(People p){
    root = insert(p, root);
} 
```

以同样的方式，你也忽略了`insert`inside的返回值`insert`。您应该以类似的方式处理它们。

# iphone - iOS 企业分发 MDM 与 OTA

> ID：15768363
> 
> 赞同：5
> 
> 时间：2013-04-02T15:42:02.533
> 
> 标签：iphone, ios, distribution, enterprise

我们必须为员工部署一个企业 ios 应用程序。我遇到了多种方法（[http://www.apple.com/business/accelerator/deploy/app-distribution.html](http://www.apple.com/business/accelerator/deploy/app-distribution.html)）。

MDM 或 Over the Air（设置您自己的服务器进行分发）都适合我们的需要。我们必须在这两者之间做出选择。我想知道 .....

1.  分发 ios 企业应用程序的最佳 MDM 工具是什么？
2.  与直接 OTA 相比，使用 MDM 工具有哪些优势

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:58:13.857

这在很大程度上取决于您计划部署到的设备数量以及您是否想要对设备进行某种“控制”。如果您不太关心获取车队中每个设备的状态（离线、在线、合规等）或控制安全设置、电子邮件设置等，我会说完全跳过 MDM。您可以轻松地通过 HTML、CSS、JS 等设置登录页面（也就是 App Store），然后让您的用户点击它来使用该应用程序。

如上所述，如果您确实想做一些事情，例如查看哪些设备在线/离线，向它们推送特定的安全规则，设置 Exchange 帐户，远程擦除设备等，然后肯定使用 MDM 运行。

答案实际上取决于您的环境、您希望完成的任务以及您在截止日期前还有多长时间。

关于“工具”，每个人都在使用 Apple 制定的同一组 MDM 规则——解决方案的核心完全取决于 MDM 提供商如何实现 MDM 功能。我建议您研究 AirWatch 或 MobileIron，但要了解两者通常都需要一些启动时间。如果您需要快速解决方案，请尝试他们的 SAAS 模型之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-20T11:25:51.013

> 分发 ios 企业应用程序的最佳 MDM 工具是什么？

不同的人对 MDM 有不同的想法和期望。因此，“最佳 MDM 工具”对于不同的用户来说是不同的。

我建议您参考任何在线文章（请注意，其中有付费文章）或功能比较图表，例如：

*   [企业 iOS](http://www.enterpriseios.com/wiki/Comparison_MDM_Providers)（这些天似乎已经关闭）或
*   [MDM 社区](http://www.mobiledevicemanagement.io/mobile-device-management-comparison/)

找到最适合您的版本并索要演示版本。他们中的大多数都有 30 天的全功能演示，而有些有 14 天或 15 天的演示。

> 与直接 OTA 相比，使用 MDM 工具有哪些优势？

如果要安装应用程序的设备更多，那么我建议使用 MDM 软件，因为您可以将应用程序批量推送到具有 MDM 的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:50:09.560

看看[这个列表](http://www.zdnet.com/blog/consumerization/10-byod-mobile-device-management-suites-you-need-to-know/422)。

OTA 易于设置，但难以“管理”。如果您需要进行任何类型的版本控制或资产管理，MDM 是您的最佳选择。另一种方法是通过应用程序本身的代码添加它。

# javascript - 从 SSL iframe 到父级的 onclick 链接？

> ID：15768368
> 
> 赞同：0
> 
> 时间：2013-04-02T15:42:13.403
> 
> 标签：javascript, iframe, ssl, lightbox

我遇到了一个问题。我有一个灯箱，其中一个页面打开一个 iframe，其中包含不同域上的 SSL 页面（用于信用卡处理）。交易完成后，将显示一个链接。我需要这个链接才能从 iframe 中跳出到灯箱中。

很简单，我想。但是 using`parent.document.location='';`给了我`Error: Permission denied to access property 'document'`， using `parent.location.href`of`window.parent.location.href`给了我`NS_ERROR_DOM_PROP_ACCESS_DENIED: Access to property denied`，显然`top.location.href`也打破了灯箱。我想过自动打破链接中的页面，但我不知道如何在不打破灯箱的情况下做到这一点。我用谷歌搜索了它，但网络似乎以`top.loc...`答案为主。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:46:29.213

执行此操作的通常模式是，您在调用该服务时为支付失败、成功等情况向第三个服务提供商（信用卡支付）提供不同的 URL。

出于安全原因，我认为您不能通过 javascript 在来自不同域的帧之间进行交互

# javascript - 自定义 XMLHttpRequest.prototype.open

> ID：15768369
> 
> 赞同：5
> 
> 时间：2013-04-02T15:42:13.740
> 
> 标签：javascript, jquery, ajax, xmlhttprequest

```
var open = XMLHttpRequest.prototype.open;

XMLHttpRequest.prototype.open = function(method, uri, async, user, pass) {
    this.addEventListener("readystatechange", function(event) {  
    if(this.readyState == 4){
       var self = this;
       var response = {
         method: method,
         uri: uri,
         responseText: self.responseText
      };
      console.log(response);  
    } else {
        console.log(this.readyState);
    }
    }, false);
  open.call(this, method, uri, async, user, pass);
}; 
```

我正在尝试在发送 XHR 之前收听它们。方法中类似于 jQuery 的[beforeSend](http://api.jquery.com/jQuery.ajax/)的东西`$.ajax`。

我的目标是在发送所有 XHR 之前收听它们。我想最接近的事情是检查上面是否`this.readyState === 1`？

上面的代码会因为我使用原型而导致任何 ajax 库（如 jQuery）发生故障`XMLHttpRequest`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:56:59.520

> 我正在尝试在发送 XHR 之前收听它们。

然后尝试欺骗`send()`方法，而不是方法`open()`。

> 上面的代码会因为我在 XMLHttpRequest 上使用原型而导致任何 ajax 库（如 jQuery）发生故障吗？

不，不是。仅有的，

*   它在那些库选择不使用的地方不起作用`XMLHttpRequest`（尤其是 IE）
*   …如果浏览器不支持该`XMLHttpRequest`对象（或不支持访问或修改其原型） ，甚至会失败
*   libs 可能能够通过在您可以之前取消引用函数来解决您的欺骗问题（尽管我不知道任何常见的库）
*   您的代码使用固定数量的参数调用本机方法，不确定这是否会影响任何内容，并且它不会重新返回结果（即使我们知道它是`undefined`）。要 100% 确定，请使用`return open.apply(this, arguments);`.

# java - 全文搜索 api 不适用于 objectify java：index.put() throwing nosuchmethod

> ID：15768371
> 
> 赞同：1
> 
> 时间：2013-04-02T15:42:19.060
> 
> 标签：java, google-app-engine, full-text-search, objectify

这是 search api java 的简单代码，只创建一个文档并添加到索引中

我们正在使用 app engine java sdk 1.7.6 和 objectify4.0 beta 1

在线部署时相同的代码有效，但在本地主机上无效

```
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.search.Document;
import com.google.appengine.api.search.Field;
import com.google.appengine.api.search.Index; 
import com.google.appengine.api.search.IndexSpec;
import com.google.appengine.api.search.PutException;
import com.google.appengine.api.search.Results;
import com.google.appengine.api.search.ScoredDocument;
import com.google.appengine.api.search.SearchException;
import com.google.appengine.api.search.SearchService;
import com.google.appengine.api.search.SearchServiceFactory;
import com.google.appengine.api.search.StatusCode;

public class Search extends HttpServlet{ 
/**
 * 
 */
private static final long serialVersionUID = 1L;

public void doGet(HttpServletRequest req, HttpServletResponse res)
        throws IOException, ServletException {

    res.setContentType("text/html");
    PrintWriter out = res.getWriter();

    String query=req.getParameter("query");
    out.println("<h1> this is the search query is="+query+"</h1>");

     SearchService searchService = SearchServiceFactory.getSearchService();
     Index indexe = searchService.getIndex(
              IndexSpec.newBuilder().setName("indexName").build());

    Document doc = Document.newBuilder()
            .setId("docid")
            .addField(Field.newBuilder().setName("id").setNumber(111.1))
            .addField(Field.newBuilder().setName("info").setText("hello"))
            .addField(Field.newBuilder().setName("service").setText("hello is the")).build();

     try {
        // Put the document.
            // here  nosuchmethod error comnes
        indexe.put(doc);

    } catch (PutException e) {
        if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
            // retry putting the document

        }
    }

    try {
        // Query the index.
        Results<ScoredDocument> results = indexe.search("service name:"+query);

        for (ScoredDocument document : results) {

            // Use the document for display.
            List<Field>rs=  document.getExpressions();
            int t=0;
            while(t<rs.size())
            {
                Field f=rs.get(t);
                out.println(f.getText());
                t++;
            }
        }
    } catch (SearchException e) {
        if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
            // retry
        }
    }

}
} 
```

问题是何时将文档放入索引中。这是引发 NoSuchMethod 错误的块。

```
 try {
        // Put the document.
            // here  nosuchmethod error comnes
        indexe.put(doc);

    } catch (PutException e) {
        if (StatusCode.TRANSIENT_ERROR.equals(e.getOperationResult().getCode())) {
            // retry putting the document

        }
    } 
```

下面是 Index.put() 方法返回的错误

```
HTTP ERROR 500

Problem accessing /Search. Reason:

com.google.appengine.api.search.Index.put([Lcom/google/appengine/api/search/Document;)
Lcom/ google/appengine/api/search/PutResponse;
Caused by:java.lang.NoSuchMethodError:                                                                          com.google.appengine.api.search.Index.put([Lcom/google/appengine/api/search/
    Document;Lcom/google/appengine/api/search/PutResponse;
at microService.Search.doGet(Search.java:77)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.googlecode.objectify.cache.AsyncCacheFilter.doFilter(AsyncCacheFilter.java:59)
at com.googlecode.objectify.ObjectifyFilter.doFilter(ObjectifyFilter.java:49)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T17:19:53.490

我也遇到了同样的问题。问题不在于对象化，而在于库中 jar 的版本冲突。因此，引发了 No such method 错误。如果您在库中有不同版本的相同 jar，只需删除您不使用的那个。我在 lib 文件夹中有两个版本的 appengine-api-sdk，删除一个我没有使用的版本解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T22:07:18.580

这是一个优秀的谷歌应用引擎全文搜索框架。该框架使将 POJO 转换为可搜索文档变得简单。

[http://www.vidolima.com/projects/doco/](http://www.vidolima.com/projects/doco/)

# algorithm - 带移动的垃圾箱包装

> ID：15768377
> 
> 赞同：2
> 
> 时间：2013-04-02T15:42:30.600
> 
> 标签：algorithm, bin-packing

我有一个矩形，需要在其中动态放置和删除较小的矩形。这基本上是垃圾箱包装问题，但也允许物品移除。

由于成本原因，我无法在每次删除后重新创建所有内容（这会使复杂性呈指数级增长）：我需要动态添加和删除矩形。此外，移动已经放置的矩形并不简单（因此我会避免它），尤其是移动放置在给定矩形之后的所有矩形不是一个选项。

我需要一个 C++ 实现，但如果它不可用，只需一个算法就可以了。

# android - 注册为音乐播放器

> ID：15768379
> 
> 赞同：11
> 
> 时间：2013-04-02T15:42:38.027
> 
> 标签：android, audio, android-manifest, intentfilter, file-association

我想在我尝试打开音频文件（即从文件浏览器或 gmail 附件）时弹出的播放器列表中看到我的应用程序（“使用...继续操作”）。以下是我为 MainActivity 尝试过的意图过滤器：

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.MUSIC_PLAYER" />
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.CATEGORY_APP_MUSIC" />
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <data android:mimeType="audio/mpeg" />
    </intent-filter> 
```

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T15:58:25.130

您总是需要 a `<category>`on an ，因为used with`<activity>` `<intent-filter>`上总是至少有一个类别。`Intent``startActivity()`

以下是[AOSP 音乐](https://github.com/android/platform_packages_apps_music)应用程序的[用途](https://github.com/android/platform_packages_apps_music/blob/master/AndroidManifest.xml)：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="file"/>
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" />
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter>
        <intent-filter
            android:priority="-1">
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="content" />
            <data android:mimeType="audio/*"/>
            <data android:mimeType="application/ogg"/>
            <data android:mimeType="application/x-ogg"/>
            <data android:mimeType="application/itunes"/>
        </intent-filter> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-18T15:20:01.060

这对我有用：

安卓清单：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:scheme="file" android:pathPattern=".*mp3" android:mimeType="audio/mpeg" />
 </intent-filter> 
```

主要活动：

```
 @Override
    protected void onCreate(Bundle savedInstanceState)
    {  

    if (Intent.ACTION_VIEW.equals(getIntent().getAction()))
    {
        File file = new File(getIntent().getData().getPath());

       // do what you want with the file...       
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T14:45:19.870

这对我有用

```
<intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="content"/>
    <data android:scheme="file"/>
    <data android:mimeType="application/x-flac"/>
    <data android:mimeType="audio/*"/>
    <data android:mimeType="application/ogg"/>
    <data android:mimeType="application/x-ogg"/>
    <data android:mimeType="application/itunes"/>
</intent-filter> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-25T14:56:10.070

CommonsWare 关于 Manifest 的回答很好，而且很有效。

“但是当我选择歌曲并从列表中选择我的应用程序时，它成功打开了我的应用程序但没有播放所选歌曲。该怎么办？？”

如果您的应用不在后台，您可以在 OnCreate 活动中执行

```
 Uri data = getIntent().getData()
 if (data!=null){/*use this Uri like you want*/} 
```

如果您的应用程序在后台，您必须拦截的 Intent 将通过您必须覆盖的 onNewIntent() 方法。

这是一个完整的代码示例：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /*...*/
    interceptExternalIntentAndPlaySongFromUri(getIntent());
}

@Override
protected void onNewIntent(Intent intent) {
    interceptExternalIntentAndPlaySongFromUri(intent);
}

private boolean interceptExternalIntentAndPlaySongFromUri(Intent intent){
    Uri data = intent.getData();
    if (data != null && intent.getAction() != null && 
intent.getAction().equals(Intent.ACTION_VIEW)){      
        String scheme = data.getScheme();
        String filename = "";
        if ("file".equals(scheme)) {
            filename = data.getPath();
        } else {
            filename = data.toString();
        }
        player.setDataSource(filename);
        setIntent(new Intent());        //this is to remove the last intent 
//without the above line, last request is reloaded when the user open another app 
//and return in this
        return true;        //has intercepted an external intent. so you can load this uri.
    }
    return false;           //has not intent to intercept
} 
```

# crystal-reports - 在水晶报表中使用图像缩放器

> ID：15768385
> 
> 赞同：1
> 
> 时间：2013-04-02T15:42:42.990
> 
> 标签：crystal-reports, imageresizer

任何人都知道如何或为什么`ImageResizer`不会在水晶报告中工作？

如果将 URL 粘贴 `xxxx.jpg.ashx?width=50`到浏览器中，效果很好。

在水晶报告中用作图像位置时，完全相同的路径不会显示任何内容（删除`.ashx?width=50`它，它会立即再次起作用）。因此，就好像从水晶报告查看器调用图像调整器时无法执行？（我不明白为什么，因为我们已经验证任何用户，即使没有经过身份验证，也可以通过浏览器访问路径）

水晶报表 2008，版本 12.2.0.290

在诊断问题方面，简而言之，涉及图像大小调整过程（通过在 URL 末尾包含 .ashx?width=50 ）是唯一阻止图像显示的事情。而这只发生在水晶中。浏览器可以很好地处理 URL。

更新：没有 .ashx 的测试也被证明是行不通的。.jpg 后的 ?width=50 足以让水晶只显示空白。（没有错误，只是没有图像）

更新：使用 &format=png 或 &format=jpg 进行测试也不起作用（水晶中的空白，在浏览器中完美运行）

最后更新：我们最终将图像大小调整软件放在一个独立的（曾经是文件管理器框）上，远离我们的 web.config、权限和 Web 服务器，然后水晶开始渲染图像就好了。所以我们从来没有真正弄清楚为什么当 re-sizer 软件加载到我们的 IIS web 服务器\intranet 上时，水晶无法渲染图像.....（可能是由于打开了集成的 windows 身份验证，即使我们授予了对文件夹的访问权限图像在）......但是当我们绕过所有这些东西时它确实开始工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:52:20.920

我建议尝试另一种 URL 语法来确定 Crystal Reports 是否只是对查询字符串过敏。

1.  试试[FolderResizeSyntax 插件](http://imageresizing.net/plugins/folderresizesyntax)“folder/resize(50,50)/image.jpg
2.  试试[CloudFront 插件](http://imageresizing.net/plugins/cloudfront)：“folder/image.jpg;width=50”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T21:12:30.620

最后更新：我们最终将图像大小调整软件放在一个独立的（曾经是文件管理器框）上，远离我们的 web.config、权限和 Web 服务器，然后水晶开始渲染图像就好了。所以我们从来没有真正弄清楚为什么在我们的 IIS Web 服务器\内联网上加载 re-sizer 软件时，水晶无法渲染图像.....（可能是由于打开了集成的 Windows 身份验证，即使我们授予了对文件夹的访问权限图像在）......但是当我们绕过所有这些东西时它确实开始工作得很好。

# sql - find_each 和 finder_sql 不能互相配合？

> ID：15768387
> 
> 赞同：0
> 
> 时间：2013-04-02T15:42:51.793
> 
> 标签：sql, ruby-on-rails-3

find_each 似乎不能很好地处理使用 finder_sql 的 ActiveRecord 关系。以前有没有人处理过这个问题？例如：

```
class User < ActiveRecord::Base
  has_many :games, :dependent => :destroy,
           :finder_sql =>
              proc {"SELECT * FROM games WHERE player_0_id = #{id} OR player_1_id = #{id}"}
end

class Game < ActiveRecord::Base
  belongs_to :player_0, :class_name => "User", :foreign_key => "player_0_id", :inverse_of => :games
  belongs_to :player_1, :class_name => "User", :foreign_key => "player_1_id", :inverse_of => :games
end 
```

调用 @user.games.each 可以正常工作，并遍历我们关心的所有游戏。但是调用 @user.games.find_each 会导致：

```
ActiveRecord::StatementInvalid:
   SQLite3::SQLException: no such column: games.user_id: SELECT  "games".* FROM "games"  WHERE "games"."user_id" = 2 AND ("games"."id" >= 0) ORDER BY "games"."id" ASC LIMIT 1000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:37:42.783

看看[http://compositekeys.rubyforge.org/](http://compositekeys.rubyforge.org/)来解决给定的问题。

# cordova - PhoneGap 2.5 FileTransfer.download 回调不会触发

> ID：15768392
> 
> 赞同：1
> 
> 时间：2013-04-02T15:43:04.777
> 
> 标签：cordova, jquery-mobile, download, file-transfer

我对为什么这不起作用感到困惑。我的代码如下。我进行了 FileTranser.download() 调用，但从未达到成功或失败功能。我可以看到进度 console.logs 甚至达到 1。我还可以看到调试消息，说明文件已成功从 CDVDelegate 类传输。在我的 iPad 模拟器中，我什至可以看到文件已创建。我只是无法让我的成功处理程序触发。

我只能在 PhoneGap 1.8 左右找到提到这个问题。这仍然是一个悬而未决的问题还是我持有错误？

谢谢

```
var fileName ='my-file.pdf';
var ft = new FileTransfer();
var docPath = localStorage.getItem(CONSTANTS_LOCALSTORAGE_LOCAL_FILE_PATH);
var encodeduri = encodeURI(CONSTANTS_WEBAPI + 'Documents/GetDocument?DocFilename=' +fileName + '&DocumentType=' + documentType);
console.log(encodeduri);

ft.onprogress = function(progressEvent) {
if (progressEvent.lengthComputable) {
  console.log('download progress: '+(progressEvent.loaded / progressEvent.total));
} };

ft.download(
  encodeduri,
  docPath+"/"+fileName,
  function(entry){
    //------ Never reaches this
    console.log('download ok: '+entry.fullPath
    onSuccessCallback(entry);
  },
  function(error) {
        //-------or this
        alert("download error source " + error.source);
        alert("download error target " + error.target);
        alert("upload error code" + error.code);
        onFailCallback(error);
    }, 
  false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T18:01:16.783

万一有人遇到这个问题，我通过从设备中删除应用程序并刷新 Xcode 项目来修复它。

# mongodb - 如何在 MongoDB 数组中切换标签？

> ID：15768394
> 
> 赞同：5
> 
> 时间：2013-04-02T15:43:30.773
> 
> 标签：mongodb

使用这样的架构：

```
{
        "_id" : ObjectId("513fe2b85b51eafc15000023"),
        "tags" : [
                "House",
                "Red"
        ]
} 
```

您将如何执行以下操作：

如果标签存在删除它，如果它不存在添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:47:46.753

运算符[`$addToSet`](https://docs.mongodb.org/manual/reference/operator/update/addToSet/)和[`$pull`](https://docs.mongodb.org/manual/reference/operator/update/pull/)。`$addToSet`如果标签不存在，只会添加标签。`$pull`将删除标签的所有实例。

正如@assylias 所提到的，您可以使用`_id`推定构建一个完整的更新命令，或者结合`{tags: tagInQuestion}`仅对具有`tagInQuestion`等的文档进行操作。

# c# - 将项目添加到 DataGridViewComboBoxColumn

> ID：15768403
> 
> 赞同：3
> 
> 时间：2013-04-02T15:43:53.470
> 
> 标签：c#, winforms, datagridview, datagridviewcombobox

我有一个 DataGridView，我将一列更改为 DataGridViewComboBoxColumn。而且我可以编辑项目以将一些数据放入其中并且它可以工作。

但我想将项目放入程序中，因此，我尝试使用 dataGridView1.Columns["drop_column"]。但它没有 Items

我找到了这篇文章，但它是创建一个新列，但我已经有一个列[Add items to DataGridViewComboBoxColumn in DataGridView during runtime](https://stackoverflow.com/questions/1357389/add-items-to-datagridviewcomboboxcolumn-in-datagridview-during-runtime)。

更新：感谢 Ginosaji 和 Dona，我添加了演员表，现在可以使用了。

```
((DataGridViewComboBoxColumn)dataGridView1.Columns["drop_column"]).Items.Add("1");
((DataGridViewComboBoxColumn)dataGridView1.Columns["drop_column"]).Items.Add("2");
((DataGridViewComboBoxColumn)dataGridView1.Columns["drop_column"]).Items.Add("3"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:50:11.130

这是一个例子：

```
DataGridViewComboBoxCell CBCell = new DataGridViewComboBoxCell();

CBCell = DataGridView1.Rows(0).Cells("Your column name");
CBCell.Items.Add("Your item here"); 
```

# c++ - float 的长度在 32 和 40 位之间变化

> ID：15768405
> 
> 赞同：26
> 
> 时间：2013-04-02T15:43:55.777
> 
> 标签：c++, c, visual-studio-2010

`float`将值导出到文件时遇到了一个奇怪的问题。我希望每个浮点数都具有相同的长度（显然），但我的程序有时将其导出为 32 位数，有时导出为 40 位数。仍然显示此行为的程序的最小工作示例是：

```
#include <stdio.h>

const char* fileName = "C:/Users/Path/To/TestFile.txt";
float array [5];

int main(int argc, char* argv [])
{
    float temp1 = 1.63006e-33f;
    float temp2 = 1.55949e-32f;

    array[0] = temp1;
    array[1] = temp2;
    array[2] = temp1;
    array[3] = temp2;
    array[4] = temp2;

    FILE* outputFile;
    if (!fopen_s(&outputFile, fileName, "w")) 
    {
        fwrite(array, 5 * sizeof(float), 1, outputFile);
        fclose(outputFile);
    }

     return true;
} 
```

我希望输出文件正好包含 20（5 乘以 4）字节，每四个字节代表一个浮点数。但是，我明白了：

```
 8b 6b 07 09      // this is indeed 1.63006e-33f 
 5b f2 a1 0d 0a   // I don't know what this is but it's a byte too long
 8b 6b 07 09      
 5b f2 a1 0d 0a   
 5b f2 a1 0d 0a 
```

所以float`temp2`需要5个字节而不是4个字节，他文件的总长度是23。这怎么可能？！这个数字并没有小到低于正常数字，我想不出任何其他原因会导致大小有所不同。

我在 64 位 Windows 7 系统上使用 MSVC 2010 编译器。

**注意：** *我已经在这里问了一个非常相似的问题，但是当我意识到问题更普遍时，我决定以更简洁的方式重新发布。* [QDataStream 有时使用 32 位，有时使用 40 位浮点数](https://stackoverflow.com/questions/15704276/qdatastream-uses-sometimes-32-bit-and-sometimes-40-bit-floats)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-02T15:47:37.627

问题是在 Windows 上，您必须区分文本文件和二进制文件。您将文件作为文本打开，这意味着`0d`（回车）在每次`0a`写入（换行）之前插入。像这样打开文件：

```
if (!fopen_s(&outputFile, fileName, "wb")) 
```

其余的和以前一样，它应该可以工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T15:48:48.760

你不是在写文字；您正在编写二进制数据...但是，您的文件已打开以*写入文本*( `"w"`) 而不是*写入二进制*( `"wb"`)。因此，`fwrite()`正在翻译`'\n'`为`"\r\n"`。

改变这个：

```
if (!fopen_s(&outputFile, fileName, "w")) 
```

对此：

```
if (!fopen_s(&outputFile, fileName, "wb")) 
```

在`"wb"`中，`b`代表二进制模式。

# json - twitter bootstrap ajax 下拉菜单

> ID：15768406
> 
> 赞同：2
> 
> 时间：2013-04-02T15:43:56.067
> 
> 标签：json, jquery, twitter-bootstrap, mustache

我正在尝试使用 twitter bootstrap 构建动态菜单。这个想法是加载一个包含菜单项的 json 文件：

```
// test.json

{
"children": [
    {
    "text": "Item1",
    "children": [
        {"text": "Item11", "link": "/link11"},
        {"text": "Item12", "link":"/link12"},
        {"text": "Item13", "children": [
            {"text": "Item131", "link":"/link131"},
            {"text": "Item132", "link":"/link132"}
        ]},
        {"text": "Item14", "link":"/link13"}
    ]},
    {
    "text": "Item2",
    "children": [
        {"text": "Item21", "link":"/link21"},
        {"text": "Item22", "link":"/link22"}
    ]},
    {
    "text": "Item3"
    }
]
} 
```

这可以在 Twitter 引导程序中静态呈现：

```
// index.html

<!DOCTYPE html>
<html lang="en">
<head>
   <title>Test</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
</head>
<body>
<div class="navbar">
    <div class="navbar-inner" id ="navbar-inner-main">
        <div class="container">
            <div class="nav-collapse collapse navbar-responsive-collapse">
                <ul class="nav">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Item1</a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/link11">Item11</a>
                            </li>
                            <li>
                                <a href="/link12">Item12</a>
                            </li>
                            <li class="dropdown-submenu">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Item13</a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="/link131">Item131</a>
                                    </li>
                                    <li>
                                        <a href="/link132">Item132</a>
                                    </li>   
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Item2</a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/link21">Item21</a>
                            </li>
                            <li>
                                <a href="/link22">Item22</a>
                            </li>   
                        </ul>
                    </li>
                    <li>
                        <a href="#">Item3</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>     
<script src="http://code.jquery.com/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script> 
```

我想在 index.html 中添加这样的函数：

```
<script type="text/javascript">
    $(document).ready(function () {
      $.getJSON('ajax/test.json', function(data) {
      // get json, parse it and append to .nav
      });     
});
</script> 
```

我认为将 json 解析为无序列表的最佳方法是使用模板。我尝试了[纯](http://beebole.com/pure/) 和[小胡子](https://github.com/janl/mustache.js)，但没有成功。问题是由于下拉子菜单类使递归方法不一致。

你有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T13:55:32.613

我有类似的问题。这是解决方案：

我的 JSON

```
[{
"name": "Cars",
"url": "#",
"parent_id": "-1",
"id": "1"
 }, {
"name": "Toyota",
"url": "#",
"parent_id": "1",
"id": "2"
    }, {
"name": "Corolla",
"url": "#",
"parent_id": "2",
"id": "3"
 }, {
"name": "2013",
"url": "#",
"parent_id": "3",
"id": "4"
    },
... 
```

这是使用引导类生成下拉列表的 JS

```
//load JSON file
$.getJSON('menu.json', function(data) {
//build menu
var builddata = function () {
var source = [];
var items = [];
for (i = 0; i < data.length; i++) {
    var item = data[i];
    var label = item["name"];
    var parentid = item["parent_id"];
    var id = item["id"];
    var url = item["url"];

    if (items[parentid]) {
        var item = { parentid: parentid, label: label, url: url, item: item };
        if (!items[parentid].items) {
            items[parentid].items = [];
        }
        items[parentid].items[items[parentid].items.length] = item;
        items[id] = item;
    }
    else {
        items[id] = { parentid: parentid, label: label, url: url, item: item };
        source[id] = items[id];
    }
}
return source;
}

var buildUL = function (parent, items) {
$.each(items, function () {
    if (this.label) {
        var li = $("<li class='js-menu'>" + "<a href='"+ this.url +"'>" + this.label + "      </a></li>");
        li.appendTo(parent);
        if (this.items && this.items.length > 0) {
            var ul = $("<ul class='dropdown-menu js-menu'></ul>");
            ul.appendTo(li);
            buildUL(ul, this.items);
        }
    }
});
}
var source = builddata();
var ul = $(".json-menu");
ul.appendTo(".json-menu");
buildUL(ul, source);
//add bootstrap classes
if ($(".json-menu>li:has(ul.js-menu)"))
{
$(".json-menu>li.js-menu").addClass('dropdown-submenu');
}
if ($(".json-menu>li>ul.js-menu>li:has(> ul.js-menu)"))
{
$(".json-menu>li>ul.js-menu li ").addClass('dropdown-submenu');
}
$("ul.js-menu").find("li:not(:has(> ul.js-menu))").removeClass("dropdown-submenu");
}); 
```

所以你只需要在'dropdown' bootsrap 类附近添加'json-menu' 类

```
<ul class="dropdown-menu json-menu">
</ul> 
```

[你可以在这里](http://mityalebedev.github.io/jbdm/)看到活的例子

# mongodb - 为什么不用 B+-Tree MongoDB

> ID：15768409
> 
> 赞同：8
> 
> 时间：2013-04-02T15:44:04.910
> 
> 标签：mongodb, geospatial, b-tree, spatial-index

有谁知道为什么 MongoDB 使用 B-Tree 而不是 B+-Tree？

据我所知，大多数 DBMS 使用 B+-Tree。MongoDB使用B-Tree有什么特别的原因吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-07-22T08:37:01.100

当我学习 B/B+ 时，这个问题让我很困惑。现在我得到了一些答案：

1.  mysql 是一个关系数据库，而 mongo 不是。这意味着我们在mysql中进行了更多的范围操作（例如`select * from xx where id > 23`）。所以B+树的优势并不明显。
2.  B 树的最佳搜索时间是 O(1)，而 B+ 总是 O(log n)。因此，当搜索一些“热门”数据时。B树有更好的性能。（但是如果你在使用B树的时候总是搜索叶子中的数据，它会占用更多的磁盘IO时间，所以它可能性能不佳。）

在我看来，这取决于mongo如何实现的细节。但我不是Mongo开发人员。:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-15T09:08:49.493

MongoDB 使用 B+ by WiredTiger 默认存储引擎。

1、https://docs.mongodb.com/manual/core/wiredtiger/

从 MongoDB 3.2 开始，WiredTiger 存储引擎是默认存储引擎。

2、http://source.wiredtiger.com/3.2.1/tune_page_size_and_comp.html

WiredTiger 使用称为 B-Tree（具体为 B+ 树）的数据结构在内存中维护表的数据，将 B-Tree 的节点称为页。内部页面只携带密钥。叶页存储键和值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T18:10:31.747

据我所知，MongoDB 将索引存储为存储数据的同一文件的一部分。所以B树更好！B+ 树只在叶子中存储数据。

# list - VBA通过分隔符转置列向量并包含空字符串

> ID：15768415
> 
> 赞同：0
> 
> 时间：2013-04-02T15:44:23.143
> 
> 标签：list, vba, sorting, optimization, excel

下面是我的数据示例（列向量）：

姓名

一个

乙

C

一个

乙

C

[空白单元格]

乙

C

姓名

一个

乙

C

请注意，我文档中的 [空白单元格] 实际上只是一个空白单元格，没有公式数据等。

最终，我只需要转置由 NAME 分隔的数据。NAME 单元格是唯一具有以下内容的单元格：

```
Left(rngCell.Value, 2) = Left(StrConv(rngCell.Value, vbUpperCase), 2) 
```

我的代码正在破坏我的转置并为所有 NAME 和所有 [空白单元格] 创建一个新行。

我试图得到：

```
NAME A B C A B C   B C

NAME A B C A B C A B C

NAME A B C   B C   B C 
```

但我的代码正在返回：

```
NAME A B C A B C

B C

NAME A B C A B C A B C

NAME A B C

B C

B C 
```

这是我正在使用的代码：

```
Sub Dataclean()

Dim lngRowLast As Long, _
lngRowPaste As Long, _
lngColOffset As Long
Dim rngCell As Range, _
rngDataSet As Range
Dim strSourceTab As String, _
strOutputTab As String

 'Tab name containing source data.  Change to suit.
strSourceTab = "sheet2pull"
 'Tab name for data output.  Change to suit.
strOutputTab = "transposed"

lngRowLast = Sheets(strSourceTab).Cells(Rows.Count, "A").End(xlUp).Row

 'Assumes the original dataset is in Column A and starts at Row 1\.  Change to suit.
Set rngDataSet = Sheets(strSourceTab).Range("A1:A" & lngRowLast)

Application.ScreenUpdating = False

For Each rngCell In rngDataSet

    If Left(rngCell.Value, 2) = Left(StrConv(rngCell.Value, vbUpperCase), 2) Then
        If lngRowPaste = 0 And lngColOffset = 0 Then
            lngRowPaste = 1
            lngColOffset = 1
        Else
            lngRowPaste = lngRowPaste + 1
            lngColOffset = 1
        End If
    ElseIf lngRowPaste = 0 And lngColOffset = 0 Then
        lngRowPaste = 1
        lngColOffset = 1
    End If

    Sheets(strOutputTab).Cells(lngRowPaste, lngColOffset).Value = rngCell.Value
    lngColOffset = lngColOffset + 1

Next rngCell

Application.ScreenUpdating = True

End Sub 
```

如果我不清楚或感到困惑，请告诉我。我试图尽可能明确，但通常很难解释！太感谢了。

我对VBA有点陌生，但正在学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:31:34.587

你的错误是当第一个 if 比较空白时。这将始终正确，因为空格和大写空格 a 是相等的。将您的第一个 if 替换为以下内容。

```
If Left(rngCell.Value, 2) = Left(StrConv(rngCell.Value, vbUpperCase), 2) And _
    Not IsBlank(rngCell.Value) Then 
```

# css - div布局；将 div 添加到标题后的侧边栏移动器

> ID：15768416
> 
> 赞同：0
> 
> 时间：2013-04-02T15:44:21.627
> 
> 标签：css, html

试图掌握布局我试图获得一个全宽的标题，标题内部是一个左侧边栏和一个右侧边栏。正文分为 5 个部分全宽，左右侧边栏，3 列居中内容，页脚将与页眉相同。侧边栏的宽度是固定的，因此中心内容将根据屏幕大小进行压缩或扩展。我已经尝试了很多方法来实现这一点，但都失败了！我的最佳尝试如下，当我添加“注释”代码时，它会按我的意图添加左侧标题边栏，但将左侧边栏移动到中心部分，左侧边栏应该是现在的中心部分。

我想我很接近但缺少一些东西。有人可以指出我正确的方向吗？

html

```
<body> 
<div class="container">
    <div class="header">
        <!--<div class="headerleft">
            <div class="headerleftcon">leftcon</div>
            </div>-->
        <div class="header-content">Header
        </div>
    </div> 
    <div class="body">body
        <div class="left-sidebar">
            <div class="left-content">left sidebar</div>
        </div>
        <div class="right-sidebar">
            <div class="right-content">right sidebar</div>
        </div>
        <div class="content">Content
        <div class="left-col">
            <div class="left-colcontent">left col</div>
        </div>
        <div class="right-col">
            <div class="right-colcontent">right col</div>
        </div>
        </div>
    </div> 
    <div class="footer">
        <div class="footer-content">Footer</div>
    </div>
</div> 
</body> 
```

CSS

```
html, body {
 height: 100%;
 width: 100%;
 padding: 0px;
 margin: 0px;}
.header, .footer{
 height: 80px;
 background-color: #EFEFEF;
 position: relative;}
.header-content{
 padding: 20px;
 text-align: center;}
/*.headerleft{
 height: 100%;
 background-color: red;
 width: 200px;
 float: left;}
.headerleftcon{
 padding: 0px 0px 0px 0px;}*/
.footer-content{
 padding: 20px;
 text-align: center;}
.container{
 height: 100%;}
.body{
 height: 100%;
 margin-top: -80px;
 margin-bottom: -80px;
 background-color: #C7DFFA;} 
.content{
 padding: 0px 0px 0px 0px;}
.left-sidebar{
 height: 100%;
 background-color: gray;
 width: 200px;
 float: left;} 
.right-sidebar{
 height: 100%;
 background-color: gray;
 width: 200px;
 float: right;}
.right-col{
 height: 500px;
 background-color: blue;
 width: 150px;
 float: right;} 
.left-col{
 height:500px;
 background-color: blue;
 width: 150px;
 float: left;} 
.left-content{
 padding: 100px 10px 100px 10px;
 margin: }
.left-colcontent{
 padding: 100px 10px 100px 10px;} 
.right-content{
 padding: 100px 10px 100px 10px;
 text-align: right;}
.right-colcontent{
 padding: 100px 10px 100px 10px;
 text-align: right; 
```

[JSFiddle](http://jsfiddle.net/J3yuJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:57:34.267

请看看这个 jsfiddle：http: [//jsfiddle.net/Ab2LT/](http://jsfiddle.net/Ab2LT/)

我不确定这是否是您所期望的结果。我 `<div style="clear:both"></div>`在 div 标题的末尾添加了一个以清除浮动的元素。

# r - 根据其他列的条件将数值替换为 NA：

> ID：15768417
> 
> 赞同：1
> 
> 时间：2013-04-02T15:44:25.137
> 
> 标签：r, data.table

我是 data.table 包的新手，请执行我的简单问题。我有一个看起来像 DT 的数据集

```
DT <- data.table(a = sample(c("C","M","Y","K"),  100, rep=TRUE),
                   b = sample(c("A","S"),  100, rep=TRUE),
                   f = round(rnorm(n=100, mean=.90, sd=.08),digits = 2) ); DT 
```

如果满足特定条件，我想用 NA 替换 f 列中的任何值。例如，`0.85 > f > 0.90`我将有以下条件：

```
DT$a == "C" & DT$b == "S" & DT$f < .85| DT$a == "C" & DT$b == "S" & DT$f >.90 
```

我还想为 a 和 b 列中的每个分类变量设置不同的条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:56:23.337

使用您声明的条件，但没有`DT$`将您的子集`data.table`用于满足条件的条目，然后您可以使用该字段通过使用运算符的引用`j`分配 NA 值。那是，`f``:=`

```
DT[a == "C" & b == "S" & f < .85 | a == "C" & b == "S" & f >.90, f := NA]
which(is.na(DT$f))
# [1]  3 16 31 89 
```

**编辑：**在 OP 的评论和@Joshua 的好建议之后：

```
`%between%` <- function(x, vals) { x >= vals[1] & x <= vals[2]}
`%nbetween%` <- Negate(`%between%`)
DT[a %in% c("C", "M", "Y", "K") & b == "S" & f %nbetween% c(0.85, 0.90), f := NA] 
```

`%nbetween%`这是对的否定`%between%`将给出所需的结果（f < 0.85 和 f > 0.90）。还要注意使用`%in%`来检查多个值`a`

**编辑 2：**在 OP 完全重写之后，恐怕您无能为力，除了 group b == "A", b == "S"。

```
`%nbetween%` <- Negate(`%between%`)
DT[a == "M" & b %in% c("A", "S") & f %nbetween% c(.85, .90), f := NA]
DT[a == "Y" & b %in% c("A", "S") & f %nbetween% c(.95, .90), f := NA]
DT[a == "K" & b %in% c("A", "S") & f %nbetween% c(.95, 1.10), f := NA] 
```

# android - 在状态栏中发送新通知时如何打开屏幕？

> ID：15768419
> 
> 赞同：2
> 
> 时间：2013-04-02T15:44:25.513
> 
> 标签：android, broadcastreceiver, alarmmanager

这是我设置通知的代码，它可以工作：

```
@Override
    public void onReceive(Context context, Intent intent) {

        category = (String) intent.getExtras().get("CATEGORY");
        notes = (String) intent.getExtras().get("NOTES");

        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
                new Intent(context, MainActivity.class), 0);

        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                context).setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle(category).setContentText(notes);

        mBuilder.setContentIntent(contentIntent);
        mBuilder.setDefaults(Notification.DEFAULT_SOUND);
        mBuilder.setAutoCancel(true);

        NotificationManager mNotificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.notify(1, mBuilder.build());       
    } 
```

这是来自我的 BroadcastReceiver 的代码片段。每当调用此 BroadcastReceiver 时，它都会在状态栏中显示通知。在调试过程中，我注意到当屏幕关闭并发出新通知时，屏幕不会打开。有没有办法做到这一点？每当发出新通知并且屏幕关闭时，它应该打开一段时间。模拟接收新短信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-15T09:53:10.883

尝试这个：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "My Tag");
wl.acquire(3000);
wl.release(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-27T19:21:06.477

```
createNotification(); //your implementation
PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
boolean isScreenOn = Build.VERSION.SDK_INT >= 20 ? pm.isInteractive() : pm.isScreenOn(); // check if screen is on
if (!isScreenOn) {
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "myApp:notificationLock");
    wl.acquire(3000); //set your time in milliseconds
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T18:11:09.913

实际上，如果您只想在收到通知时激活屏幕，请在创建通知后使用此代码：

```
PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "Tag");
wakeLock.acquire();
wakeLock.release(); 
```

# c# - foreach 语句不能对 System.Windows.Controls.Textbox 类型的变量进行操作

> ID：15768424
> 
> 赞同：0
> 
> 时间：2013-04-02T15:44:41.753
> 
> 标签：c#, wpf, foreach, wpf-controls

这是我得到的错误-'foreach 语句不能对 System.Windows.Controls.Textbox 类型的变量进行操作，因为 System.Windows.Controls.Textbox 不包含 GetEnumerator 的公共定义。

我的代码：

```
private void btnSendEmail_Click_1(object sender, RoutedEventArgs e)
        {
            MailMessage message = new MailMessage();
            message.From = new MailAddress(txtEmail.Text);
            message.Subject = txtSubject.Text;
            message.Body = txtBody.Text;
            foreach (string s in txtEmailAddresses)
            {
                message.To.Add(s);
            }

            SmtpClient client = new SmtpClient();
            client.Credentials = new NetworkCredential();
        } 
```

'foreach' 上有一条红色波浪下划线，带有该错误。文本框应该是一个多行文本框。使用 winForms 这很容易。我可以转到属性窗口并将多行属性设置为true，然后它就可以正常工作，只要用户输入的地址用分号分隔即可。但是，winforms 中需要 2 秒的所有内容在 WPF 中都是一个大问题，所以我在 WPF 文本框中遇到了这个错误。有谁知道我为什么会收到这个错误以及如何处理它？这也是我的 xaml，以防我缺少一些需要在文本框上设置以使其成为多行或其他内容的属性。

```
<Label Content="Recipients:"
               HorizontalAlignment="Left"
               Margin="26,10,0,0"
               VerticalAlignment="Top" />
        <Label Content="Subject:"
               HorizontalAlignment="Left"
               Margin="26,114,0,0"
               VerticalAlignment="Top" />
        <TextBox x:Name="txtEmailAddresses"
                 HorizontalAlignment="Left"
                 Height="73"
                 Margin="26,36,0,0"
                 TextWrapping="Wrap"
                 VerticalAlignment="Top"
                 Width="278"
                 ToolTip="When providing multiple email addresses, separate them with a semi colon" />
        <TextBox x:Name="txtSubject"
                 HorizontalAlignment="Left"
                 Height="23"
                 Margin="81,117,0,0"
                 TextWrapping="Wrap"
                 VerticalAlignment="Top"
                 Width="223" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:47:15.880

嗯，是的……`txtEmailAddresses`是一个`TextBox`。在 Windows 窗体*和*WPF 中，您都不能遍历`TextBox`. 您需要*从*该控件中获取文本。在 Windows 窗体中，您可以使用`TextBox.Lines`- 但您仍然不能*只*遍历文本框。

的文档提供[`TextBox.LineCount`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.linecount.aspx)了一些示例代码，说明如何遍历 WPF 中的行`TextBox`，尽管我会稍微修改它以使用 a `List<string>`，可能作为扩展方法：

```
private static List<string> GetLines(this TextBox textBox)
{
    List<string> lines = new List<string>();

    // lineCount may be -1 if TextBox layout info is not up-to-date.
    int lineCount = textBox.LineCount;

    for (int line = 0; line < lineCount; line++)
    {
        lines.Add(textBox.GetLineText(line));
    }
    return lines;
} 
```

（当然，您可以使用迭代器块返回 an `IEnumerable<string>`，但您需要确保在迭代控件时没有更改控件中的数据。）

但是，鉴于您的工具提示，您*真正*需要的只是：

```
string[] addresses = txtEmailAddresses.Text.Split(';'); 
```

（基本上，如果您将其设为多行，则使用第一个代码；如果您使用分号分隔的地址，则使用第二位。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:50:55.010

由于您的工具提示指出：

> 提供多个电子邮件地址时，用分号隔开

似乎文本框有一堆分号分隔的值。您需要首先从文本框中获取文本，然后将该单个字符串分解为多个字符串，然后才能获得一系列可以执行的操作`foreach`：

```
foreach (string s in txtEmailAddresses.Text.Split(';'))
{
    message.To.Add(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:51:31.747

您当然不能遍历单个`TextBox`，并且多行`TextBox`似乎只是对象上设置的属性，而不是子类。`Text`除了读取对象的字段`TextBox`并根据分号和/或换行符将其拆分为子字符串之外，我不确定如何做到这一点。然后您可以遍历拆分集合并执行您正在寻找的操作。

# java - JPA Query 选择带计数的多对一查询

> ID：15768429
> 
> 赞同：4
> 
> 时间：2013-04-02T15:44:49.853
> 
> 标签：java, jpa, playframework-1.x

因此，我正在尝试基于以下类（稍微简化一点）编写一个 JPA 查询，该查询将产生以下结果：

所以我有两个对象：Thing 和 Person。一个人可以持有对单个事物的引用。以下是类的简化版本：

```
public class Thing {
    @Id
    public Long id;
    public String name;
    public String description;
}

public class Person {
    @Id
    public Long id;
    public String firstname;
    public String lastname;
    @ManyToOne
    public Thing thing;
} 
```

我正在尝试编写一个 JPA 查询，它将为我提供每个 Thing 对象的所有详细信息以及 Person 对象引用 Thing 对象的次数。请注意，Person 的 Thing 值可能为 null。此外，Thing 对象可能根本不会被任何 Person 对象引用，但仍应列出。

所以给定下表：

```
Thing Table
| id | name | description |
|  1 | thg1 | a thing     |
|  2 | thg2 | another one |
|  3 | thg3 | one more    |

Person Table
| id | firstname | lastname | thing |
|  1 | John      | Smith    |     1 |
|  2 | Simon     | Doe      |     3 |
|  3 | Anne      | Simmons  |     1 |
|  4 | Jessie    | Smith    |     1 |
|  5 | Adam      | Doe      |     3 |
|  6 | Phil      | Murray   |  null | 
```

我最终会得到如下结果：

```
| id | name | description | amount |
|  1 | thg1 | a thing     |      3 |
|  2 | thg2 | another one |      2 |
|  3 | thg3 | one more    |      0 | 
```

我将如何编写该 JPA 查询？（如果有什么不同，我使用的是 Play Framework 1.2.5）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:06:30.390

它应该是这样的：

```
select t.id, t.name, t.description, count(p) as amount
         from Person as p right join p.thing as t group by t.id 
```

不寻常的“右连接”的原因是 JPA 查询需要查询类之间的映射，而您只有一个 from `Person`to `Thing`。

如果您有从`Thing`to的映射`Person`：

```
class Thing {
    ...
    @OneToMany
    Set<Person> persons;
} 
```

您可以使用经典的“左连接”：

```
select t.id, t.name, t.description, count(p) as amount
             from Thing as t left join t.persons as p group by t.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:08:42.313

好的，如果我正在编写纯 JPQL 并设置实体关系，那么我会这样：

```
public class Thing {
    @Id
    public Long id;
    public String name;
    public String description;
    @OneToMany
    public Collection<Person> personList;

}

public class Person {
    @Id
    public Long id;
    public String firstname;
    public String lastname;
} 
```

**询问：**

```
SELECT t from Thing {WHERE watever condition you may have} 
```

迭代：

```
Collection<Thing> thingList = query.getResultList();

System.out.println("| id | name | description | amount |");
for(Thing thing:thingList){
System.out.format("|  %s | %s | %s    |      %s |%n", thing.getId(), thing.getName(), thing.getDescription(), thing.getPersonList().size());
} 
```

# android - 使用 Google Maps Android API v2 时出现错误签名无效。成立：

> ID：15768434
> 
> 赞同：3
> 
> 时间：2013-04-02T15:45:09.837
> 
> 标签：android, xml, google-maps, exception, google-maps-android-api-2

我正在创建示例应用程序以使用 Google Maps Android API v2。

**我试过 Samsung Galaxy Ace GT-S5830i**，但我看到的不是 Map

![在此处输入图像描述](https://i.stack.imgur.com/W1j5E.png)

而logcat是

```
 Signature not valid.  Found: 
 MIIDDTCCAfWgAwIBAgIEEhX+gTANBgkqhkiG9w0BAQsFADA3MQswCQYDVQQGEwJVUzEQMA4GA1UE
 ChMHQW5kcm9pZDEWMBQGA1UEAxMNQW5kcm9pZCBEZWJ1ZzAeFw0xMzAyMjUxMTEwNDRaFw00MzAy
 MTgxMTEwNDRaMDcxCzAJBgNVBAYTAlVTMRAwDgYDVQQKEwdBbmRyb2lkMRYwFAYDVQQDEw1BbmRy
 b2lkIERlYnVnMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApqChoDnHsDfsxa7n2Kv9
 2av0G0tm+kS1uP4T6fA8cO6jB3qB5EHFR6+5UO+k4laHW2WzOJbyhhtFE5eOTS4Zt5qo4FX/hsc/
 Zi7dDX/Y13b+4qajhLoGYqVjM00eQc2qF58TTnbQ3lTERxaofYL2qI3j2KcVODFMksinL9lt3RTD
 V3MXy7KDLcuSvoVZxXn1L0O9rkTbZicmleK4wLDzI+lTpuXngAuQ4MBH1wEWwqMhJg6/J06t5axU
 ea2UVv7ZtYg8KPMEiQEApCbdAHtQsmqcsEQZtJAqFtj7KEQ7wTSgnpDRix4N5C9QlwUtKSlOCIlk
 ueUPVBypKf/SWIgF6QIDAQABoyEwHzAdBgNVHQ4EFgQURyMuspjlLaDj8LhEb5UyYqQgWQYwDQYJ
 KoZIhvcNAQELBQADggEBAA9IXLEAQTD+VEt9l8JQDEOFv8WqIdQisvmJCfJjN98faarvf6RRA+v3
 HF2VFlZPaUu/HBeOH8MI7u+gNuRtZGYWn1eC/qfP0W31MQoNaN4ocsF+tL9INzpd89/u6Ya5Kove
 r0E0tpJFBgdtDPYcPBjQ6tYAqmhnmPIJftGHLNQbil4ocK/PkqgxGlwQN7WrCNjDewb0twz7hZBx
 Ig4OsnfdgPTYGlR+LyTzUd9/KyqaLHivRAI+y/xGDz6lOfGH7bDOPi/hDm0bkhC1y1J7L9+FiGWb
 dmi+Co9Jlf1f3vyTtD7kr3h0K0C3MsNWtybVqmVvgImoLt/lPbjNJahVrds=
 Google Play services signature invalid.
 Can't open keycharmap file
 Error loading keycharmap file
 Using default keymap 
```

我的清单代码

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<permission
    android:name="com.example.testmap.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.testmap.permission.MAPS_RECEIVE" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<permission
    android:name="com.example.testmap.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyDTsWrO0j24sbp4E5qhoHhd6nyOQM5lErc" />

    <activity
        android:name="com.example.testmap.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我的 xml 文件代码

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fragment
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

我的活动代码

```
package com.example.testmap;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.final_main);

    GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
    //map.getMinZoomLevel();
}
} 
```

单击确定按钮可以使用 Logcat 强制关闭

```
 FATAL EXCEPTION: main
 java.lang.NullPointerException
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1374)
at android.app.Activity.startActivityForResult(Activity.java:2827)
at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:817)
at android.app.Activity.startActivity(Activity.java:2933)
at com.google.android.gms.internal.e$2.onClick(Unknown Source)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

此外，当我取消注释最后一行`map.getMinZoomLevel();`时，我在该行上得到空指针异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-10T08:44:34.907

检查您是否为 gradle 启用了离线工作：转到文件 > 设置 > Gradle

如果选中，请取消选择脱机工作。

然后确认您是否在项目级别 build.gradle: classpath 'com.google.gms:google-services:2.1.0' 中提到了最新版本的 google 服务作为依赖项

您可以在这里找到最新版本：[https ://jcenter.bintray.com/com/android/tools/build/gradle/](https://jcenter.bintray.com/com/android/tools/build/gradle/)

gradle 同步完成后清理并构建项目。ou这些步骤解决了我在谷歌地图上遇到的类似问题**，也解决了你提到的第一个错误** `Signature Not Valid`

如果您的设备在 Android M 上运行，您可能需要在[此](https://stackoverflow.com/a/33579371/2115117)答案之后验证您的位置访问代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T15:52:54.600

我也遇到了同样的异常，我修复了它。

注意：我正在研究谷歌分析并且遇到了这个异常。但是我的应用程序没有崩溃，我在日志中得到了这个。你也可以试试这个解决方案。

将此添加到项目级别的 gradle 文件中。

```
classpath 'com.google.gms:google-services:2.1.0' 
```

而这个用于模块级 gradle 文件。

```
compile 'com.google.android.gms:play-services:8.4.0' 
```

并在模块级 gradle 文件的文件末尾（最后一行）移动 `below plugin。

```
apply plugin: 'com.google.gms.google-services' 
```

# php - 作为 GET 参数传递的 URL 在集成 mTurk API 时给出 403 禁止

> ID：15768436
> 
> 赞同：1
> 
> 时间：2013-04-02T15:45:17.227
> 
> 标签：php, apache, amazon-web-services, mechanicalturk

我正在尝试将 mTurk API 集成到我的一个站点中。我正在创建 HIT 并使用 EXTERNAL QUESTION，传递托管在我的服务器上的自定义 PHP 网页。示例 - [http://abc.com/submitanswer.php?var1=testname](http://abc.com/submitanswer.php?var1=testname)

现在，在 mTruk 站点上，用户完成任务后，当用户想要将完成的工作提交到我的站点时，mTurk 会调用我在 EXTERNAL QUESTION 参数中提供的 url。此外，它在 url 中增加了一个参数 - “turkSubmitTo= [https://workersandbox.mturk.com](https://workersandbox.mturk.com) ”。

因此，当对页面发出请求时，它会产生问题并给出 403 - Forbidden。如果我直接调用这个 url，那么即使它给出了同样的错误。但是，如果我更改 GET para - turkSubmitTo 值中的任何文本，例如：从或删除“：”中删除“h”或此类更改，浏览器会很好地显示页面，而不会出现任何错误..

想尽办法想尽办法，现在什么都没有了！

需要帮忙 ！！！

谢谢 ！

瓦舍什..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-09T20:17:00.070

这是一个 mod_security 问题。如果您使用托管服务提供商，您可以要求他们为您提供例外情况。如果是本地的，你可能必须自己做。

# ffmpeg - 使用 ffmpeg 将 h.264 avi 容器转换为 mp4

> ID：15768439
> 
> 赞同：8
> 
> 时间：2013-04-02T15:45:18.210
> 
> 标签：ffmpeg

我想将我的 h.264 avi 容器转换为带有 ffmpeg 的 mp4 容器。我发现这很有效：

```
./ffmpeg -i myfile.avi -vcodec copy myfile.mp4
ffmpeg version N-51169-gcedf276 Copyright (c) 2000-2013 the FFmpeg developers
  built on Mar 21 2013 05:12:00 with gcc 4.6 (Debian 4.6.3-1)
  configuration: --prefix=/root/ffmpeg-static/32bit --arch=x86_32 --extra-cflags='-m32 -I/root/ffmpeg-static/32bit/include -static' --extra-ldflags='-m32 -L/root/ffmpeg-static/32bit/lib -static' --extra-libs='-lxml2 -lexpat -lfreetype' --enable-static --disable-shared --disable-ffserver --disable-doc --enable-bzlib --enable-zlib --enable-postproc --enable-runtime-cpudetect --enable-libx264 --enable-gpl --enable-libtheora --enable-libvorbis --enable-libmp3lame --enable-gray --enable-libass --enable-libfreetype --enable-libopenjpeg --enable-libspeex --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-version3 --enable-libvpx
  libavutil      52\. 22.100 / 52\. 22.100
  libavcodec     55\.  1.100 / 55\.  1.100
  libavformat    55\.  0.100 / 55\.  0.100
  libavdevice    55\.  0.100 / 55\.  0.100
  libavfilter     3\. 48.100 /  3\. 48.100
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
[avi @ 0x9fff660] non-interleaved AVI
Guessed Channel Layout for  Input Stream #0.1 : mono
Input #0, avi, from 'myfile.avi':
  Metadata:
    encoder         : Lavf52.64.2
  Duration: 00:00:10.40, start: 0.000000, bitrate: 409 kb/s
    Stream #0:0: Video: h264 (Baseline) (H264 / 0x34363248), yuvj420p, 640x480, 10 fps, 10 tbr, 10 tbn, 30 tbc
    Stream #0:1: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, mono, s16, 128 kb/s
Output #0, mp4, to 'myfile.mp4':
  Metadata:
    encoder         : Lavf55.0.100
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuvj420p, 640x480, q=2-31, 10 fps, 10240 tbn, 10 tbc
    Stream #0:1: Audio: aac ([64][0][0][0] / 0x0040), 8000 Hz, mono, s16, 128 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (copy)
  Stream #0:1 -> #0:1 (pcm_s16le -> libvo_aacenc)
Press [q] to stop, [?] for help
[mp4 @ 0xa006ea0] pts has no value
    Last message repeated 100 times
frame=  101 fps=0.0 q=-1.0 Lsize=     350kB time=00:00:11.06 bitrate= 259.3kbits/s
video:332kB audio:15kB subtitle:0 global headers:0kB muxing overhead 0.926809% 
```

这会生成一个我可以使用 HTML5 视频播放器播放的文件，但对于旧版浏览器，我想使用 Flash 播放器 (Flowplayer)。该文件不能与 Flowplayer 一起播放，实际上它会导致它崩溃。

但是，如果我使用：

```
./ffmpeg -i myfile.avi myfile2.mp4
ffmpeg version N-51169-gcedf276 Copyright (c) 2000-2013 the FFmpeg developers
  built on Mar 21 2013 05:12:00 with gcc 4.6 (Debian 4.6.3-1)
  configuration: --prefix=/root/ffmpeg-static/32bit --arch=x86_32 --extra-cflags='-m32 -I/root/ffmpeg-static/32bit/include -static' --extra-ldflags='-m32 -L/root/ffmpeg-static/32bit/lib -static' --extra-libs='-lxml2 -lexpat -lfreetype' --enable-static --disable-shared --disable-ffserver --disable-doc --enable-bzlib --enable-zlib --enable-postproc --enable-runtime-cpudetect --enable-libx264 --enable-gpl --enable-libtheora --enable-libvorbis --enable-libmp3lame --enable-gray --enable-libass --enable-libfreetype --enable-libopenjpeg --enable-libspeex --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-version3 --enable-libvpx
  libavutil      52\. 22.100 / 52\. 22.100
  libavcodec     55\.  1.100 / 55\.  1.100
  libavformat    55\.  0.100 / 55\.  0.100
  libavdevice    55\.  0.100 / 55\.  0.100
  libavfilter     3\. 48.100 /  3\. 48.100
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
[avi @ 0x9b02660] non-interleaved AVI
Guessed Channel Layout for  Input Stream #0.1 : mono
Input #0, avi, from 'myfile.avi':
  Metadata:
    encoder         : Lavf52.64.2
  Duration: 00:00:10.40, start: 0.000000, bitrate: 409 kb/s
    Stream #0:0: Video: h264 (Baseline) (H264 / 0x34363248), yuvj420p, 640x480, 10 fps, 10 tbr, 10 tbn, 30 tbc
    Stream #0:1: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, mono, s16, 128 kb/s
No pixel format specified, yuvj420p for H.264 encoding chosen.
Use -pix_fmt yuv420p for compatibility with outdated media players.
[libx264 @ 0x9b065a0] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.1 Cache64
[libx264 @ 0x9b065a0] profile High, level 2.2
[libx264 @ 0x9b065a0] 264 - core 129 r2230 1cffe9f - H.264/MPEG-4 AVC codec - Copyleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=1 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=10 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'myfile2.mp4':
  Metadata:
    encoder         : Lavf55.0.100
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuvj420p, 640x480, q=-1--1, 10240 tbn, 10 tbc
    Stream #0:1: Audio: aac ([64][0][0][0] / 0x0040), 8000 Hz, mono, s16, 128 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
  Stream #0:1 -> #0:1 (pcm_s16le -> libvo_aacenc)
Press [q] to stop, [?] for help
frame=   47 fps=0.0 q=25.0 size=      21kB time=00:00:04.40 bitrate=  39.9kbits/s dup=3 dropframe=   59 fps= 56 q=25.0 size=      56kB time=00:00:05.68 bitrate=  80.2kbits/s dup=3 dropframe=   71 fps= 45 q=25.0 size=      89kB time=00:00:06.84 bitrate= 106.9kbits/s dup=3 dropframe=   83 fps= 40 q=25.0 size=     124kB time=00:00:08.12 bitrate= 124.9kbits/s dup=3 dropframe=   94 fps= 36 q=25.0 size=     157kB time=00:00:09.14 bitrate= 140.4kbits/s dup=4 dropframe=  105 fps= 23 q=25.0 Lsize=     309kB time=00:00:11.06 bitrate= 228.8kbits/s dup=4 drop=0
video:291kB audio:15kB subtitle:0 global headers:0kB muxing overhead 1.108651%
[libx264 @ 0x9b065a0] frame I:1     Avg QP:17.65  size: 12772
[libx264 @ 0x9b065a0] frame P:94    Avg QP:19.46  size:  2868
[libx264 @ 0x9b065a0] frame B:10    Avg QP:21.58  size:  1464
[libx264 @ 0x9b065a0] consecutive B-frames: 82.9% 13.3%  0.0%  3.8%
[libx264 @ 0x9b065a0] mb I  I16..4: 16.6% 66.3% 17.1%
[libx264 @ 0x9b065a0] mb P  I16..4:  4.2%  6.3%  0.5%  P16..4: 27.0%  9.5%  5.1%  0.0%  0.0%    skip:47.4%
[libx264 @ 0x9b065a0] mb B  I16..4:  0.8%  1.0%  0.0%  B16..8: 39.1%  4.6%  0.5%  direct: 2.4%  skip:51.7%  L0:39.8% L1:56.4% BI: 3.9%
[libx264 @ 0x9b065a0] 8x8 transform intra:58.0% inter:74.7%
[libx264 @ 0x9b065a0] coded y,uvDC,uvAC intra: 47.3% 0.0% 0.0% inter: 16.6% 0.0% 0.0%
[libx264 @ 0x9b065a0] i16 v,h,dc,p: 29% 19% 10% 42%
[libx264 @ 0x9b065a0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 31% 21% 29%  2%  3%  4%  4%  3%  3%
[libx264 @ 0x9b065a0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 39% 28% 18%  2%  3%  3%  3%  2%  2%
[libx264 @ 0x9b065a0] i8c dc,h,v,p: 100%  0%  0%  0%
[libx264 @ 0x9b065a0] Weighted P-Frames: Y:5.3% UV:0.0%
[libx264 @ 0x9b065a0] ref P L0: 67.9% 12.0% 12.6%  6.8%  0.6%
[libx264 @ 0x9b065a0] ref B L0: 76.9% 23.1%
[libx264 @ 0x9b065a0] ref B L1: 99.7%  0.3%
[libx264 @ 0x9b065a0] kb/s:226.31 
```

这很好用。但是时间完全不同，更不用说 CPU 周期了。第一个命令以毫秒为单位，而第二个命令可能需要相当长的时间（约 5-40 秒）。

有没有另一种方法可以快速将 avi 转换为 mp4 容器？理想情况下，通过重新混合而不是重新编码。

**编辑**

我现在正在使用它，我发现它是重新编码最快的。但我又不想这样做。我只想重新混合代码。

`ffmpeg -loglevel quiet -i myfile.avi -vcodec libx264 -profile:v baseline -preset ultrafast myfile.mp4`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T01:15:11.507

我不会做与你已经做的不同的事情。我尝试在 OS X 10.7 上使用 ffmpeg-1.2 重新混合文件：

```
ffmpeg --info
ffmpeg version 1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Apr  8 2013 02:39:03 with Apple LLVM version 4.2 (clang-425.0.27) (based on LLVM 3.2svn) 
```

我试过你的命令并明确

```
ffmpeg -i myfile.avi -vcodec copy -acodec copy out.mp4 
```

但我总是遇到以下错误：

```
ffmpeg -i myfile.avi -vcodec copy -acodec copy out.mp4
ffmpeg version 1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Apr  8 2013 02:39:03 with Apple LLVM version 4.2 (clang-425.0.27) (based on LLVM 3.2svn)
  configuration: --prefix=/usr/local/Cellar/ffmpeg/1.2 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --enable-avresample --enable-vda --cc=cc --host-cflags= --host-ldflags= --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid
  libavutil      52\. 18.100 / 52\. 18.100
  libavcodec     54\. 92.100 / 54\. 92.100
  libavformat    54\. 63.104 / 54\. 63.104
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 42.103 /  3\. 42.103
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
[avi @ 0x7f9ef981ae00] non-interleaved AVI
Guessed Channel Layout for  Input Stream #0.1 : mono
Input #0, avi, from 'myfile.avi':
  Metadata:
    encoder         : Lavf52.64.2
  Duration: 00:00:10.40, start: 0.000000, bitrate: 409 kb/s
    Stream #0:0: Video: h264 (Baseline) (H264 / 0x34363248), yuvj420p, 640x480, 10 fps, 10 tbr, 10 tbn, 30 tbc
    Stream #0:1: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, mono, s16, 128 kb/s
[mp4 @ 0x7f9ef991ac00] Tag [1][0][0][0]/0x00000001 incompatible with output codec id '65536' ([0][0][0][0])
Output #0, mp4, to 'out.mp4':
  Metadata:
    encoder         : Lavf52.64.2
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuvj420p, 640x480, q=2-31, 10 fps, 90k tbn, 10 tbc
    Stream #0:1: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 8000 Hz, mono, 128 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (copy)
  Stream #0:1 -> #0:1 (copy)
Could not write header for output file #0 (incorrect codec parameters ?): Invalid data found when processing input 
```

所以我对错误号进行了快速研究，发现 pcm_s16le 与 mp4 不兼容。请参阅 ffmpeg 跟踪器上的此[错误报告](https://ffmpeg.org/trac/ffmpeg/ticket/1489)。

这可能会解释您的两个命令的不同结果 - 尽管奇怪的是它没有在您的情况下产生错误（旧的 ffmpeg 快照？）。

所以我想解决方案可能/将是从一开始就提供不同的音频编解码器，或者将音轨转换为不同的编解码器。作为一个快速测试，我尝试了：

```
ffmpeg -i myfile.avi -vcodec copy -acodec mp2 out.mp4 
```

输出文件立即写入磁盘 - 没有产生错误。不幸的是，我无法使用 Flash 播放器验证结果。

# python - Python处理for循环进行比较

> ID：15768440
> 
> 赞同：2
> 
> 时间：2013-04-02T15:45:18.733
> 
> 标签：python

我需要比较 2 个相似模式的表并有 2 个生成器对象。我如何在 Python 中逐行比较这 2 个生成器。需要实现文件比较逻辑，

```
If generator-object-1 =  generator-object-1:
        then read-next-row-generator-object-1,read-next-row-generator-object-1
elif generator-object-1 >  generator-object-2:
        then read-next-row-generator-object-2
elif generator-object-1 <  generator-object-2
        then read-next-row-generator-object-1 
```

在 Python 中有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:54:03.077

我过去用过这个：

```
import operator

def mergeiter(*iterables, **kwargs):
    """Given a set of sorted iterables, yield the next value in merged order"""
    iterables = [iter(it) for it in iterables]
    iterables = {i: [next(it), i, it] for i, it in enumerate(iterables)}
    if 'key' not in kwargs:
        key = operator.itemgetter(0)
    else:
        key = lambda item, key=kwargs['key']: key(item[0])

    while True:
        value, i, it = min(iterables.values(), key=key)
        yield value
        try:
            iterables[i][0] = next(it)
        except StopIteration:
            del iterables[i]
            if not iterables:
                raise 
```

这将按排序顺序列出给定迭代中的项目，前提是输入迭代本身已经排序。

上面的生成器将以与伪代码相同的顺序迭代您的两个生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:52:35.967

真的没有太多更好的方法了...

```
go1 = next(generator1)
go2 = next(generator2)

try:
    while True
        if go1 == go2:
           go1 = next(generator1)
           go2 = next(generator2)
        elif go1 > go2:
           go2 = next(generator2)
        elif go1 < go2:
           go1 = next(generator1)
except StopIteration
    pass #Done now ... 
```

当然，您在这里描述的实际上是合并排序的合并阶段（或者至少看起来是这样）-尽管在一个生成器耗尽后您不会产生其余的对象。CPython 的内置排序非常类似于合并（Tim-sort 是插入排序和合并排序的混合体）。所以，在这种情况下，如果你不介意最后有一个列表，你可以这样做：

```
import itertools as it
sorted(it.chain(generator1,generator2)) 
```

鲍勃是你的叔叔。

# blackberry - 如何使我的黑莓应用程序可下载？

> ID：15768442
> 
> 赞同：0
> 
> 时间：2013-04-02T15:45:25.827
> 
> 标签：blackberry, blackberry-jde

我有一个简单的“hello world”黑莓应用程序。我想将我的编译文件（.jad、.jar 或 .cod）放到我的 Web 服务器上，让我的黑莓用户下载我的应用程序。

我尝试使用 .jad 文件进行下载。但是，当我单击该按钮时，黑莓设备会逐行显示 .jad 文件的内容，但没有任何反应。

简而言之，我想在我的页面上放置一个链接，当用户点击它时，我的应用程序将被下载到他/她的设备上。

我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:32:27.477

您的 Web 服务器必须对 JAD 和 COD 文件应用适当的 MIME 类型。

*   JAD = 文本/vnd.sun.j2me.app-descriptor
*   COD = 应用程序/vnd.rim.cod

有关如何为提供的文件指定 MIME 类型的信息，请参阅您的 Web 服务器文档。很多时候，您可以使用 .htaccess 文件执行此操作。

# android - Android - 从 URL 下载 HTML 文件

> ID：15768443
> 
> 赞同：1
> 
> 时间：2013-04-02T15:45:26.253
> 
> 标签：android, html, download, android-download-manager

我正在构建一个应该下载（以及稍后）显示 html 文件的应用程序。

我*不需要*担心像`CSS/JS`.

我通过其`URL`（例如[http://www.noodle.com/index.html](http://www.noodle.com/index.html)）将文件排入 Android Donwload 管理器，但下载总是失败。

任何想法如何获取文件？或者如何说服经理正确下载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:54:13.317

你可以利用Android提供的HTTPClient来使用它

有关如何将其保存到文件的更多详细信息，请参阅如何 [在 Android 中使用简单 HTTP 客户端？](https://stackoverflow.com/questions/4457492/simple-http-example-in-android)

# linq - 你如何手动构造一个 lambda 表达式？

> ID：15768446
> 
> 赞同：2
> 
> 时间：2013-04-02T15:45:35.330
> 
> 标签：linq, lambda, linq-to-entities, expression

我正在使用 ASP.NET Web API 和 Entity Framework 5 以及 LINQ to Entities 设计一个应用程序。Web API 不直接提供实体，它将它们转换为一组与我的实体相似但不相同的数据传输对象。该 API 最初将由 Silverlight 应用程序使用，但我将不得不支持非 .NET 客户端（例如 iOS 应用程序）。我还想让客户端能够针对 API 运行一组强大的查询。

这些要求促使我考虑查询对象模式。本质上，我想在客户端创建一个本地查询对象，将其发布到 Web API，并将查询对象转换为我可以在 LINQ to Entities 中使用的 lambda 表达式。最后一部分是让我绊倒的地方。

从一个简单的比较查询开始，我希望能够在运行时将如下所示的对象转换为 lambda 表达式。

```
public enum QueryOperator
{
    None = 0,
    GreaterThan,
    GreaterThanOrEqualTo,
    EqualTo,
    NotEqualTo,
    LessThanOrEqualTo,
    LessThan
}

public class SimpleQuery<T>
{
    public SimpleQuery()
    {
        this.Field = null;
        this.Operator = QueryOperator.None;
        this.Value = null;
    }

    public string Field { get; set; }
    public QueryOperator Operator { get; set; }
    public object Value { get; set; }

    public IEnumerable<T> Execute(IQueryable<T> queryTarget)
    {
        // ????
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:50:20.243

过去我不得不做这样的事情。这是我想出的：

```
public IEnumerable<T> Execute(IQueryable<T> queryTarget)
{
    return queryTarget.Where(this.GetWhereExpression<T>());
}

private Expression<Func<T, bool>> GetWhereExpression<T>()
{
    var param = Expression.Parameter(typeof(T), "x");
    var prop = Expression.Property(param, this.Field);
    var value = Expression.Constant(this.Value, prop.Type);
    Expression compare = null;
    switch(this.Operator) 
    {
        case QueryOperator.EqualTo:
            compare = Expression.Equal(prop, value);
            break;
        ...
    }

    return Expression.Lambda(compare, param);
} 
```

# c# - MVC自定义非模型对象验证？

> ID：15768448
> 
> 赞同：1
> 
> 时间：2013-04-02T15:45:38.983
> 
> 标签：c#, asp.net-mvc, validation

我有一个特殊的场景，我需要验证一个不是我的模型的对象并从中获取所有 ValidationResult 对象。

所以我的控制器里面有这样的东西......

```
public virtual ActionResult(MyObject postData)
{
    ICollection someCollection = DoSomething(postData);

    foreach(Thing t in someCollection)
    {
         // validate t and get any ValidationResult objects
         // put the validation results in the object property.
         // this call isn't real by the way
         t.ValidationResults = t.Validate();
    }
    ...
} 
```

我正在验证的不是我的模型，而是基于我提供的 postdata 我需要验证集合，并且验证失败的地方我计划在集合中呈现失败的对象。

有什么想法可以得到我想要的 ValidationResult 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:04:03.800

您可以将它们存储在`ValidationResults`中`ViewBag`，然后从那里渲染它们：

```
var list = new List<ValidationResult>();
foreach (Thing t in someCollection)
{
    t.ValidationResults = t.Validate();
    list.AddRange(t.ValidationResults);
}
ViewBag.ValidationResults = list; 
```

现在，很多代码都做了很多假设，因为你没有提供很多信息。但无论哪种方式，将这些结果放入一个整体列表并将它们设置在`ViewBag`. 然后，您可以`ViewBag`在视图中利用：

```
@foreach (ValidationResult r in ViewBag.ValidationResults)
{
   <!-- render some HTML here  with the r variable -->
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:39:51.847

这篇关于[使用数据注释进行手动验证的](http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx)文章可能会为您提供所需的内容。

# quickblox - QuickBlox iOS SDK (v1.5.1) 上的编译错误

> ID：15768449
> 
> 赞同：2
> 
> 时间：2013-04-02T15:45:40.713
> 
> 标签：quickblox

下载最新的 QuickBlox iOS SDK (v1.5.1) 并尝试编译和运行示例聊天示例，编译失败并出现多个问题。我假设 Sample Chat 项目（称为 supersimple）可以开箱即用，但不幸的是没有......

问题#1：ld：找不到-lxml2 clang的库：错误：链接器命令失败，退出代码为1（使用-v查看调用）

问题 #2：致命错误：文件 '//quickblox-ios-sdk-master-1.5.1/sample-chat/../Framework/Quickblox.framework/Headers/RatingsService/RatingsServiceFramework.h' 自预编译后已被修改标头已建

对于问题 #2，我确实尝试过清理构建文件夹（option+shift+cmd+K）并重新构建，但没有成功。

我在 Mac OSX 10.8.3 上使用 XCode 4.6.1。

# vim - 在 vim 中，输入被映射到一个 ctrl 键自定义键映射

> ID：15768450
> 
> 赞同：4
> 
> 时间：2013-04-02T15:45:46.030
> 
> 标签：vim, mapping

我在 vim 中使用 ctrl 键的键盘映射遇到一些奇怪的行为。我猜这有一个简单的原因和解决方案，但我只是看不到它。

在编辑重组文本的过程中，我发现自己在输入类似的东西

```
:math:`x` 
```

通常（这个 :math: 角色将导致刻度内的任何内容在例如乳胶输出中被排版为数学）。

我想将一个像`m`输入：math:`` 的键映射到文本中，并将光标定位在刻度内。

我已经做到了

```
map m i:math:``ha 
```

这似乎工作正常。

但是，我希望能够在插入模式下使用此地图。为此，我认为使用`ctrl`+`m`是最好的。我弄完了

```
imap <c-m> :math:``ha 
```

`ctrl`虽然正确输入 :math:`` 并在我执行+时将光标定位在刻度内`m`，但问题在于，在此之后，每次我在插入模式下按下时，它都会运行与我键入+`enter`相同的命令。换句话说，以插入模式输入现在似乎映射到`ctrl``m`

```
:math:``ha 
```

也是。

似乎这绝对与使用`ctrl`密钥有关。`F5`如果我按如下方式绑定例如密钥

```
imap <F5> :math:``ha 
```

一切安好。

我可以使用 eg`F5`键并为自己省去更多麻烦，但我想知道发生了什么以供将来参考。

`ctrl`在我缺少的键映射中使用键有什么基本的吗？

谢谢你，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T16:00:53.843

您必须为映射使用不同的控制组合，例如`<C-g>`.

由于键盘输入在内部处理的方式，不幸的是，如果没有这些副作用，即使在 GVIM 中，今天通常也无法做到这一点。某些组合键，如`Ctrl`+ 非字母无法映射，`Ctrl`+ 字母与`Ctrl`+ `Shift`+ 字母无法区分。（除非您的终端为它发送一个独特的*termcap*代码，而大多数人不会。）这也适用于`<Tab>`/ `<C-I>`，`<CR>`/ `<C-M>`/ `<Esc>`/`<C-[>`等。（唯一的例外是`<BS>`/ `<C-H>`。）这是一个已知的痛点，也是各种讨论的主题在 vim_dev 和 #vim IRC 频道上。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:55:52.757

如果你做一个

```
:h keycodes 
```

你会看见：

```
notation    meaning         equivalent  decimal value(s)    ~
-----------------------------------------------------------------------
....

<CR>        carriage return     CTRL-M   13 *carriage-return*
<Return>    same as <CR>                *<Return>*
<Enter>     same as <CR>                *<Enter>* 
```

所以它告诉我们，`<c-m>`与`<Enter>`（相同的键码 13）相同

你也可以在你的shell中测试，例如，输入`ls`然后`<c-m>`而不是`<Enter>`

# objective-c - 如何在 iPhone 的 WebView 中获取加载的 HTML 页面的内容

> ID：15768451
> 
> 赞同：0
> 
> 时间：2013-04-02T15:45:48.567
> 
> 标签：objective-c, parsing, uiwebview

我有一个应用程序，我必须在其中获取 LOADED webView 的数据，我怎样才能得到它？让我详细解释一下：

1）我有一个链接“www.google.com”

2）我输入了关键字“问题”并生成了一个链接，例如 [https://www.google.co.in/#hl=en&sclient=psy-ab&q=%@&oq=question&gs_l=serp.3..0i10l4.90108.93059 .2.93802.10.8.2.0.0.0.171.1173.0j8.8.0...0.0...1c.1.8.psy-ab.6SJ9cs6717Q&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=27feaf18f129334d&biw=1901&bih=383](https://www.google.co.in/#hl=en&sclient=psy-ab&q=%@&oq=question&gs_l=serp.3..0i10l4.90108.93059.2.93802.10.8.2.0.0.0.171.1173.0j8.8.0...0.0...1c.1.8.psy-ab.6SJ9cs6717Q&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=27feaf18f129334d&biw=1901&bih=383)

3) 使用上述 URL 创建请求后，我在 WebView 中打开。

```
 NSString * urlStr = [NSString stringWithFormat:@"https://www.google.co.in/#hl=en&sclient=psy-ab&q=%@&oq=question&gs_l=serp.3..0i10l4.90108.93059.2.93802.10.8.2.0.0.0.171.1173.0j8.8.0...0.0...1c.1.8.psy-ab.6SJ9cs6717Q&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=27feaf18f129334d&biw=1901&bih=383"];
        NSURL * gotoUrl = [NSURL URLWithString:urlStr];
        NSURLRequest * requestP = [NSURLRequest requestWithURL:gotoUrl cachePolicy:NSURLCacheStorageAllowed timeoutInterval:60];
         [webVw loadRequest:requestP]; 
```

4）我得到了一些搜索结果，加载到 webView 中，

5) 现在我想解析这些结果以获得结果链接、描述等....

如何获取加载到 WebView 中的数据？请提出正确的方法，我是通过 Google 搜索 API 完成的，它接受关键字并给出响应，然后我通过通用可用方法对其进行解析。所以，请提出一些不同的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T08:44:22.177

这是我设法解决问题的方法，可能对寻找它的人有所帮助。

```
searchResultsArray = [[NSMutableArray alloc]init];
                NSString *html = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('ires').innerHTML"];             
                NSLog(@"html:%@",html);
                NSData *data = [html dataUsingEncoding:NSUTF8StringEncoding];
                TFHpple * doc       = [[TFHpple alloc] initWithHTMLData:data];
                NSArray * elements = [doc searchWithXPathQuery:@"//ol[@id='rso']/li[@class='g']"];
                if ([nextPageLinkArray count] == 0 || (current_page !=0 && current_page == [nextPageLinkArray count]-1))
                {                      
                    NSString *htmlLinks = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('nav').innerHTML"];                        
                    NSLog(@"htmlLinks:%@",htmlLinks);
                    NSData *dataLinks = [htmlLinks dataUsingEncoding:NSUTF8StringEncoding];
                    TFHpple * docLinks       = [[TFHpple alloc] initWithHTMLData:dataLinks];
                    NSArray * linksArr = [docLinks searchWithXPathQuery:@"//tbody/tr/td/a[@class='fl']"];
                    NSLog(@"cnt:%d", [linksArr count]);
                    for (int i=0; i<[linksArr count]; i++)
                    {
                        NSMutableDictionary * temPdict = [[NSMutableDictionary alloc]init];                                                    
                        TFHppleElement * element3 = [linksArr objectAtIndex:i];
                        NSString * url = [element3 objectForKey:@"href"];
                        [temPdict setValue:url forKey:@"next_url"];

                        NSString * pageNo = [element3 text];
                        [temPdict setValue:pageNo forKey:@"page_no"];
                        [nextPageLinkArray addObject:temPdict];
                    }

                }
                NSLog(@"nextPageLinks:%@",nextPageLinkArray);
                [searchResultsArray removeAllObjects];
                for (int i=0; i<[elements count]; i++)
                {
                    NSMutableDictionary * temPdict = [[NSMutableDictionary alloc]init];

                    TFHppleElement * element = [elements objectAtIndex:i];
                    NSArray * childerens_VSC = [element childrenWithClassName:@"vsc"];
                    if ([childerens_VSC count]==0)
                    {
                        continue;
                    }

                    TFHppleElement * element1 = [childerens_VSC objectAtIndex:0];
                    NSArray * childerens_R = [element1 childrenWithClassName:@"r"];
                    //NSLog(@"childrenArr:%@",childrenArr);

                    TFHppleElement * element2 = [childerens_R objectAtIndex:0];
                    NSArray * childerens_L = [element2 childrenWithClassName:@"l"];
                    //NSLog(@"childrenArr1:%@",childrenArr1);

                    TFHppleElement * element3 = [childerens_L objectAtIndex:0];

                    NSString * url = [element3 objectForKey:@"href"];
                    [temPdict setValue:url forKey:@"url"];

                    //cite
                    NSArray * childrens_S = [element1 childrenWithClassName:@"s"];
                    TFHppleElement * element5 = [childrens_S objectAtIndex:0];
                    NSArray * childrens_F_KV = [element5 childrenWithClassName:@"f kv"];

                    TFHppleElement * element6 = [childrens_F_KV objectAtIndex:0];
                    NSArray * arr = [element6 childrenWithTagName:@"cite"];
                    TFHppleElement * element7 = [arr objectAtIndex:0];
                    NSString * cite = [element7 text];
                    NSLog(@"cite:%@",cite);
                    [temPdict setValue:cite forKey:@"cite"];
                    [searchResultsArray addObject:temPdict];
                }

                NSLog(@"searchResults:%@",searchResultsArray); 
```

# user-interface - Carrot2 圆图

> ID：15768456
> 
> 赞同：0
> 
> 时间：2013-04-02T15:46:03.697
> 
> 标签：user-interface, charts

任何人都知道如何创建像[carrto2 中使用的圆图？](http://search.carrot2.org/stable/search?query=www.yahoo.com&results=100&source=web&algorithm=lingo&view=circles&skin=fancy-compact&EToolsDocumentSource.language=ALL&EToolsDocumentSource.country=ALL&EToolsDocumentSource.safeSearch=false)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T00:43:37.660

mbostock [/d3 库](https://github.com/mbostock/d3/wiki/Gallery)对 Carrot2 输出具有良好的可视化效果。

Carrot2 的这个[carrot2-rb](https://github.com/ankane/carrot2-rb) ruby​​ 客户端返回一个带有 clusters 数组的对象。分数和短语属性可用于简单的圆环图。

像flare.json这样的树结构可以实现更多动态的可视化，比如可扩展的树状图。

这是一个基于 Carrot2 结果的可[缩放轮。](http://codepen.io/mikefab/pen/wosqD)

这是我编写的使用文档元素创建flare.json 的coffeescript 代码。

```
clusters = [{"id":0,"size":3,"phrases":["Coupon"],"score":0.06441151442396735,"documents":["0","1","2"],"attributes":{"score":0.06441151442396735}},{"id":1,"size":2,"phrases":["Exclusive"],"score":0.7044284368639101,"documents":["0","1"],"attributes":{"score":0.7044284368639101}},{"id":2,"size":1,"phrases":["Other Topics"],"score":0.0,"documents":["3"],"attributes":{"other-topics":true,"score":0.0}}]

flare = get_flare clusters

get_children = (index, index2, clusters, documents) ->unless index == (clusters.length - 1)    # If not last cluster
  orphans = {'name': ''}
  intr    = _.intersection(documents, clusters[index2].documents);    

  if intr.length > 0    # continue drilling
    if index2 < (clusters.length - 1)    # Up until last element.
       # Get next layer of orphans
      orphan_docs = _.difference(intr, clusters[index2 + 1].documents)
      if orphan_docs.length > 0
        orphans = {'name': orphan_docs, 'size': orphan_docs.length}

      if _.intersection(intr, clusters[index2 + 1].documents).length > 0
        return [orphans, {'name': clusters[index2+1].phrases[0], 'children': get_children(index, (index2 + 1), clusters, intr)}]
      else 
        return [orphans]
    else
      # At second to last cluster, so terminate here
      return [{'name': inter}]  
  else                                # No intersection, so return bundle of current documents.
    return [{'name': documents}]  

  return [{'name': _.intersection(clusters[index].documents, clusters[index2].documents)}]

get_flare = (clusters) ->
  # Make root object
  flare =
    name: "root"
    children: []

  children = flare.children
  _.each(clusters[0..(clusters.length - 2)], (cluster, index) ->   # All clusters but the last. (It has already been compared to previous ones)
    #All documents for all remaining clusters in array
    remaining_documents =  _.flatten(_.map clusters[(index + 1)..clusters.length], (c) ->
      c.documents
    )

    root_child = {'name':  cluster.phrases[0], 'children': []}

    # Get first layer of orphans
    orphan_docs = _.difference(cluster.documents, remaining_documents)

    if orphan_docs.length > 0
      root_child.children.push {'name': orphan_docs, size: orphan_docs.length}

    for index2 in [(index + 1)..(clusters.length - 1)] by 1
      if _.intersection(cluster.documents, clusters[index2].documents).length > 0
        root_child.children.push {'name': clusters[index2].phrases[0], 'children': get_children(index, (index2), clusters, cluster.documents)}

    children.push root_child
  )  
  flare 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T09:43:08.233

你可以购买他们的 Circles Javascript 组件：[http ://carrotsearch.com/circles-overview](http://carrotsearch.com/circles-overview)

# python - 在 Eclipse 中导入同名包时出现导入错误

> ID：15768457
> 
> 赞同：4
> 
> 时间：2013-04-02T15:46:05.417
> 
> 标签：python, eclipse, import, pydev

我在 Eclipse 中打开了一个 pydev 项目。

项目的包嵌套如下：

```
my-package:
    my-sub-package:
        foo 
```

在这个项目中，我正在使用我创建的另一个项目的导入。另一个项目的嵌套是：

```
my-package:
    my-sub-package:
        bar 
```

因此，两个主要包具有相同的名称。

尝试导入时： `from my-package.my-sub-package import bar`我得到`ImportError: No module named bar`.

我猜这是因为 eclipse 在当前项目中搜索，当它没有找到时`bar`，它不会在 dist-utils 中寻找它（我 pip 安装了我试图从中导入的项目）。

（当尝试从从同一位置打开的常规 python 执行相同的导入时，导入工作得非常好 - 所以它是 eclipse 中的东西）。

有没有办法告诉 eclipse 继续在 pythonpath 中的所有文件夹中搜索模块（这样它就可以到达 dist-utils），即使包具有相同的名称并且在当前项目中找不到正确的包?

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:41:40.207

你到底是从哪里运行常规 python 的？如果你有

```
src-root:
    my-package:
        __init__.py
        my-sub-package:
            __init__.py
            foo.py 
```

并且您从 src-root 中运行常规 python，那么您将得到相同的结果，即它不会工作，但如果您在其他任何地方运行它，它可能会像您说的那样工作。

如果您无法重命名任何包，唯一的办法是从 Eclipse PyDev 选项中的“源文件夹”中删除当前的 scr-root，但这并不意味着您将永远不会再次访问 foo my-package。请参阅[http://docs.python.org/2/library/sys.html#sys.path](http://docs.python.org/2/library/sys.html#sys.path)

# android - Android：使用 XML 显示多个图像

> ID：15768458
> 
> 赞同：2
> 
> 时间：2013-04-02T15:46:12.073
> 
> 标签：android, android-layout, android-image

我有一张分为 9 个部分的图片，我需要将其显示为一个重建图像。我使用这个 XML 来显示前 6 个部分，第一行看起来很好，3 个图像连续并填充了水平空间，但第二行有较小的图像，由间隙分隔。我不明白为什么即使使用相同的 XML 指令，第二行看起来也与第一行有很大不同。

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/game"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

    <TableRow>       
        <ImageView
            android:id="@+id/zero"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/picTile"
            android:src="@drawable/washington0" >
        </ImageView>

        <ImageView
            android:id="@+id/one"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/picTile"
            android:src="@drawable/washington1" >
        </ImageView>

        <ImageView
            android:id="@+id/two"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/picTile"
            android:src="@drawable/washington2" >
        </ImageView>
    </TableRow>

    <TableRow>
        <ImageView
            android:id="@+id/three"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/picTile"
            android:src="@drawable/washington3" >
        </ImageView>

        <ImageView
            android:id="@+id/four"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/picTile"
            android:src="@drawable/washington4" >
        </ImageView>

        <ImageView
            android:id="@+id/five"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/picTile"
            android:src="@drawable/washington5" >
        </ImageView>
    </TableRow>

</TableLayout> 
```

# graphics - 有没有广泛使用硬件加速的 Dart 图形库？

> ID：15768461
> 
> 赞同：4
> 
> 时间：2013-04-02T15:46:28.507
> 
> 标签：graphics, three.js, dart, hardware-acceleration

我正在用 Dart 创建一个游戏，我非常喜欢 Three.dart 的外观。但是，我查看了它的来源，我无法弄清楚它使用了多少硬件加速，如果有的话。我的游戏对图形要求很高。有没有广泛使用硬件加速的 Dart 图形库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T16:20:05.347

尽管 Spectre 仍在开发中，但它可能对您有用。Spectre 是一个现代图形 API，它包装了 WebGL 并在顶部提供了功能。它只使用硬件加速。

请务必使用最新的 Git：[https ://github.com/johnmccutchan/spectre](https://github.com/johnmccutchan/spectre)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-09T07:45:14.957

如果您使用 WebGLRenderer（而不是大多数示例中的 CanvasRenderer）， Three.dart 将受益于通过 WebGL 进行的硬件加速。Three.dart 支持更高级别的场景图，包括立方体和球体。

但是，WebGLRenderer 的实现还不是很成熟 AFAICT： [https ://github.com/threeDart/three.dart/issues/65](https://github.com/threeDart/three.dart/issues/65)

# eclipse - Eclipse GDB 使用不正确的全名

> ID：15768463
> 
> 赞同：0
> 
> 时间：2013-04-02T15:46:29.920
> 
> 标签：eclipse, gdb, eclipse-cdt

我正在使用带有 CDT 的 Eclipse。我有一个包含许多可执行文件的项目。它是 makefile 驱动的，因此所有可执行文件都正确构建。

无论如何，当我启动调试会话时，GDB 被指向错误的 main.cpp 并且在该文件的范围内调试实际上毫无价值。所有其他后续文件都可以。

这是它选择的错误路径：

```
(gdb) 
72-break-insert -t main
72^done,bkpt={number="5",type="breakpoint",disp="del",enabled="y",addr="0x080931fa",func="main(int, char**)",file="src/main.cpp",fullname="D:\\app\\src\\main.cpp",line="10",times="0",original-location="main"} 
```

但是，它应该使用这个文件（但错误）：

```
(gdb) 
89-break-insert D:/unittests/src/main.cpp:12
89^error,msg="No source file named D:/unittests/src/main.cpp." 
```

因为这两个文件都包含一个 main()，IDE 会抓取它找到的第一个文件，因为符号与函数签名匹配。有没有办法解决这个问题而不必将项目分成多个项目？

# api - 迁移到 Fusion Tables API v1.0 的指南

> ID：15768466
> 
> 赞同：0
> 
> 时间：2013-04-02T15:46:42.810
> 
> 标签：api, google-fusion-tables

随着 Fusion Tables SQL API 即将弃用，我想确保我的应用程序继续按预期运行。

我使用 Google Visualization api 来可视化和查询 Fusion 表，如下所示：

1.  可视化地图：

    ```
    map = new google.maps.Map(document.getElementById("map_canvas"),    myOptions);  
    layer = new google.maps.FusionTablesLayer({
        query: {
            select : 'Latitude',
            from : table
        }
    });

    layer.setMap(map); 
    ```

2.  查询融合表：

    ```
    var query = "SELECT * FROM " + tableid;
    query = encodeURIComponent(query);
    var gvizQuery = new google.visualization.Query(
        'http://www.google.com/fusiontables/gvizdata?tq=' + query); 
    ```

我的问题是，我必须更改哪些 URL 端点才能确保我的应用程序继续工作？

我非常感谢有关此主题的一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:17:14.543

只有 Fusion Tables API 发生了变化，请参阅[迁移指南](https://developers.google.com/fusiontables/docs/v1/migration_guide)了解详细信息。

1.  为了可视化您使用 FusionTablesLayer 的地图，您没有 API 端点，只需确保使用加密的表 ID。

2.  在这里，您使用 Google Visualization API，它没有改变。但是，如果您使用 Google Visualization API 来获取数据（而不是可视化数据），您应该考虑[改用 Fusion Tables API](https://developers.google.com/fusiontables/docs/v1/getting_started)。

# html - 打印内容 html, perl

> ID：15768467
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:46:44.320
> 
> 标签：html, perl

我正在做 perl 编程。我正在打开.html 的输入。我想将`<P>`标签的内容复制到变量中，这样我就可以只使用内容并对内容进行一些更改

下面是我的代码

```
use utf8;
package MyParser;
use base qw(HTML::Parser);

$lines = <INPUT>;
my $parser = MyParser->new;
$parser->parse( $lines );
print $lines; 
```

但它只打印（！DOCTYPE html PUBLIC ......）有人知道怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:09:59.250

考虑使用[HTML::TokeParser::Simple](http://search.cpan.org/perldoc/HTML%3a%3aTokeParser%3a%3aSimple)对 HTML 文档进行简单的流解析。

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::TokeParser::Simple;

my $parser = HTML::TokeParser::Simple->new(...);

while (my $tag = $parser->get_tag('p')) {
    print $parser->get_trimmed_text('/p'), "\n";
} 
```

如果您希望查询和更改整个文档树，[HTML::TreeBuilder](http://search.cpan.org/perldoc/HTML%3a%3aTreeBuilder)将为您提供[HTML::Tree](http://search.cpan.org/perldoc/HTML%3a%3aTree)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:49:52.183

我强烈建议使用解析器（[HTML::Parser](http://search.cpan.org/perldoc?HTML%3a%3aParser)），并避免使用正则表达式来执行此类操作系统任务

# openldap - ldap_bind：再次无效的凭据（49）

> ID：15768473
> 
> 赞同：3
> 
> 时间：2013-04-02T15:46:53.793
> 
> 标签：openldap

我已经搜索了有关此消息的多个帖子，但当我尝试执行“ldapsearch”时仍然收到错误消息

我已将 slapd.conf 更改为使用纯文本密码，但仍然出现错误。我还确保文件中没有空格。日志文件显示并且 iptables 已关闭。我试图遵循 LDAP 设置

```
"http://www.itmanx.com/kb/centos63-openldap-phpldapadmin".  

conn=1001 fd=15 ACCEPT from IP=[::1]:54486 (IP=[::]:389)
conn=1001 op=0 BIND dn="cn=Manager,dc=domain,dc=local,dc=pt" method=128
conn=1001 op=0 RESULT tag=97 err=49 text=
conn=1001 fd=15 closed (connection lost) 
```

我的服务器正在运行 Centos 6.4 64。

以下是我正在使用的命令

```
"ldapsearch -x -D cn=Manager,dc=domain,dc=local,dc=pt -w abc" 
```

我的 slapd.conf 文件

```
database        bdb
suffix          "dc=domain,dc=local"
checkpoint      1024 15
rootdn          "cn=Manager,dc=domain,dc=local"
rootpw                  abc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:46:55.597

您需要生成您的密码，如下所示 -

slappasswd -h {CLEARTEXT}

输入密码 - abc

进行搜索 -

ldapsearch -x -h ipaddress(提及ip地址) -D "cn=Manager,dc=domain,dc=local" -W

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T23:21:16.223

在搜索中，您尝试绑定为：

```
cn=Manager,dc=domain,dc=local,dc=pt 
```

但在配置中，rootdn 是：

```
cn=Manager,dc=domain,dc=local 
```

这当然是“无效的凭证”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T01:35:40.007

您绑定为 rootdn，即 DIT 的“root 帐户”。在这种情况下，此帐户的密码是**基于配置的**。虽然“abc”是*配置*的密码，但它可能不是*加载*的密码。

恰当的例子：有人进入 slapd.conf 文件并将 rootdn 密码从“xyz”更改为“abc”，但忽略了重新启动 OpenLDAP 守护程序。这里会发生的是，在进程重新启动之前，“abc”将无法工作，因此 OpenLDAP 守护程序将继续使用“xyz”的旧密码。

我希望这有帮助...

最大限度

# php - 编写 SQL 语句以推送此数组的数据行的正确方法是什么？

> ID：15768474
> 
> 赞同：0
> 
> 时间：2013-04-02T15:46:54.023
> 
> 标签：php, mysql, arrays

我正在尝试使用 foreach() 将数组数据推送到 MySQL 数据库。我是 PHP 和 mysql 的新手，所以一直在将这些数据从 Ajax 脚本解析为 PHP，现在只需要操作数据。

将此数据推送到 SQL 以使数组中的每个数据集进入单独的行的正确语法是什么？

我正在尝试使用foreach，但复杂性是数组本身的大小可以改变，第二个复杂性是数据本身可能会被刷新（即新的一天相同的id新值），所以我想构建一些更新信息的智能不仅仅是附加；并将旧数据备份到另一个表。

这个语法正确吗？

```
$sql = "INSERT INTO table1 (col1, col2) VALUES ";
foreach($rows as $i=>$row) {
    if ($i>0) {
        $sql .= sprintf(",(%s,%s)", $row["col1_value"], $row["col2_value"]);
    } else {
        $sql .= sprintf("(%s,%s)", $row["col1_value"], $row["col2_value"]);
    }
}
mysql_query($sql); 
```

数组中的数据如下 - 这只是多维数组的一部分，但我已经弄清楚如何根据需要操作数组的其余部分。

我需要做的唯一另一件事是找出一种方法来获取坐标字段并按如下方式操作它

从坐标中提取 x & y 数据 Multiple x & y by 600/386 反转 x & y 并取每个坐标的第一个数字以创建新值 y[1]x[1]。

为此，我仅在第一个数据集上进行了尝试，如下所示，但我对 PHP 的数据处理经验不足。很确定是错的。

```
$testcoords = $_POST['data'][0]['coords'];
list($x,$y) = explode(“:”,str_replace(“’”,“”,$testcoords));
$xtrans = number_format($x*600/386,$decimals=null);
$ytrans = number_format($y*600/386,$decimals=null);
$cont = “C”.$ytrans[0].$xtrans[0] 
```

总结一下，三个问题

1.  如何将数据传输到表中，在 [data] 数组中包含每个单独数据集的行？
2.  如何覆盖和归档表中的任何现有值，而不是简单地连接？
3.  我如何操作一个特定的字符串以返回上面定义的自定义变量？

    ```
    [data_type] => city
    [data] => Array
        (
            [0] => Array
                (
                    [id] => 16515340
                    [owner_id] => 3475
                    [owner] => Player1
                    [coords] => '268:252
                    [name] => AC2013
                    [score] => 11863
                    [city_type] => castle
                    [location] => land
                )

            [1] => Array
                (
                    [id] => 16515335
                    [owner_id] => 3475
                    [owner] => Player1
                    [coords] => '263:252
                    [name] => AC2013
                    [score] => 7
                    [city_type] => castle
                    [location] => water
                )

            [2] => Array
                (
                    [id] => 17891610
                    [owner_id] => 3523
                    [owner] => Player2
                    [coords] => '282:273
                    [name] => City of Repoman9900
                    [score] => 1978
                    [city_type] => castle
                    [location] => water
                )

            [3] => Array
                (
                    [id] => 10616856
                    [owner_id] => 73
                    [owner] => Player2
                    [coords] => '024:162
                    [name] => 1killer
                    [score] => 1308
                    [city_type] => castle
                    [location] => water
                )

            [4] => Array
                (
                    [id] => 10813465
                    [owner_id] => 2862
                    [owner] => Player3
                    [coords] => '025:165
                    [name] => City of vuvuzea991
                    [score] => 1091
                    [city_type] => castle
                    [location] => land
                )

            [5] => Array
                (
                    [id] => 17367317
                    [owner_id] => 84
                    [owner] => Player4
                    [coords] => '277:265
                    [name] => Dreadland
                    [score] => 776
                    [city_type] => castle
                    [location] => water
                )

            [6] => Array
                (
                    [id] => 2162850
                    [owner_id] => 2989
                    [owner] => Player5
                    [coords] => '162:033
                    [name] => City of Dinoeyez
                    [score] => 157
                    [city_type] => castle
                    [location] => water
                )

            [7] => Array
                (
                    [id] => 2818192
                    [owner_id] => 556
                    [owner] => Player6
                    [coords] => '144:043
                    [name] => City of wildfire123
                    [score] => 7
                    [city_type] => castle
                    [location] => water
                )

        )

    [sender] => Array
        (
            [world] => Array
                (
                    [id] => 232
                    [name] => Server 4 
                    [number] => NaN
                )

            [alliance] => Array
                (
                    [id] => 2
                    [name] => Alliance2
                )

            [player] => Array
                (
                    [id] => 98
                    [name] => SuperUser
                )

            [browser] => Array
                (
                    [type] => Chrome
                    [version] => 25.0.1364.160
                )

            [aix_version] => 1.00
        ) 
    ```

    )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:53:04.553

我看到的问题：

```
foreach($rows as $i=>$row) {
      $sql = "INSERT INTO table1 (col1, col2) VALUES ";  //reinitialize here.
      if ($i>0) {  //Why have the if statement, the results of the conditions are the same.
        $sql .= sprintf("('%s','%s')", $row["col1_value"], $row["col2_value"]);  //add quotation marks for string values, remove the comma.
      } else {
        $sql .= sprintf("(%s,%s)", $row["col1_value"], $row["col2_value"]);
      }
      mysql_query($sql); //execute the statement here.
   } 
```

您的其他问题：

> 如何覆盖和归档表中的任何现有值，而不是简单地连接？

为了覆盖你做一个更新语句，MySql 网站给出了语法提示。

要存档，您需要创建一个存档表，该表几乎是正在存档的表的副本，并插入/更新该表。

在这种情况下，我不确定您所说的连接是什么意思，它并不真正适用于规范化的数据库。

> 我如何操作一个特定的字符串以返回上面定义的自定义变量？

啊要跳过那个，在一个帖子中问很多。

# regex - 这个正则表达式效率低下。为什么它会使 Sublime Text 2 的堆栈崩溃？

> ID：15768476
> 
> 赞同：2
> 
> 时间：2013-04-02T15:46:59.570
> 
> 标签：regex, lookahead

回答：

此正则表达式有效：

```
<item>(?:(?!</item>).|\n)*?(?:(?=201[0-3]</pubDate>))(?:(?!</item>).|\n)*?</item> 
```

而这个使堆栈崩溃：

```
<item>(?:(?!</item>).|\n)*(?:(?=201[0-3]</pubDate>))(?:(?!</item>).|\n)*</item> 
```

这也有效，没有前瞻：

```
(?s)<item>.*?201[0-3]</pubDate>.*?</item> 
```

原始问题：

我在 Sublime Text 2 中有一个 XML 文件（下面的示例）。我想找到从 2010 年到 2013 年`<item`包含 > 元素的所有 > 元素。`<pubDate`

上面的正则表达式工作正常，但是当我找到所有（文件大约 1MB，大约有 120 个匹配项）时，ST2 的堆栈空间不足。

上面潜伏着什么可怕的低效率？

示例 XML：

```
<?xml version="1.0" encoding="utf-8"?>
    <channel>
        <item>
            <title>This will match</title>
            <link>http://gcanyon.posterous.com/</link>
            <pubDate>Sat Mar 10 10:22:00 -0800 2012</pubDate>
            <dc:creator><![CDATA[Geoff Canyon]]></dc:creator>
        </item>
        <item>
            <title>This won't</title>
            <link>http://gcanyon.posterous.com/</link>
            <pubDate>Tue Jun 30 05:01:32 -0700 2009</pubDate>
            <dc:creator><![CDATA[Geoff Canyon]]></dc:creator>
        </item>
    </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:54:36.820

贪婪的正则表达式。例如：

```
(?:(?!</item>).|\n)* 
```

会一直走到下一个`</item>`，而这不是您想要的，我假设您只是不希望它走得更远。

[你应该在懒惰的经营者身上](http://www.regular-expressions.info/repeat.html)找到快乐。

PS：抱歉，我没有足够的时间来更深入地研究您的正则表达式。希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:53:18.677

我认为你有两个问题。一个是你的整个方法（**如果你只是想要我的真正建议，所以跳到底部**），但看起来另一个是[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。

## 为什么这是破坏

如果我们稍微简化您的模式，可以归结为：

```
{a}{x*}{x*}{b} 
```

注意到两者`x*`紧挨着吗？是的，`(?=y)`它们之间有一个，但让我们暂时忽略它，因为我认为引擎没有有效地使用它来限制它正在做的工作量。假设您有一个类似的字符串，`axxxxxxxb`并且您希望将其与模式匹配。由于有两个`x*`令牌彼此相邻，因此引擎无法轻松判断一组结束和另一组开始的位置。所以它试图把它们都放在第一个`{x*}`桶里，因为它`*`是贪婪的：

```
{a}{xxxxxxx}{}{b} 
```

太好了，对吧？它匹配，所以我们可以继续前进。但考虑类似`axxxxxxQxb`. 这在第一次传递时不匹配，因此引擎必须继续尝试排列：

```
{a}{xxxxxxx}{}{Q} #nope
{a}{xxxxxx}{x}{Q} #nope
{a}{xxxxx}{xx}{Q} #nope
... 
```

最终，这需要很长时间，它会炸毁你的筹码。

## 改进正则表达式

那么如何解决呢？嗯，有这个：

```
(?:(?=201[0-3]</pubDate>)) 
```

我认为如果它是一个肯定的标记，而不是一个前瞻，引擎会做得更好。无论如何，它不需要是超前的。你可以使用它（有或没有`\s*`）：

```
201[0-3]\s*</pubDate> 
```

`(?:(?!</item>).)*`后面是多余的；你应该只需要一个懒惰的`.*?`.

此外，您可以使用 Multiline 选项来`.`匹配换行符，但我不确定这是否会对速度/执行产生任何影响。不过，写起来会更短。

整个事情看起来像：

```
<item>(?:(?!</item>).)*?201[0-3]</pubDate>.*?</item>  #plus the /m flag 
```

## 真正的解决方案

但我认为真正的问题是你[完全使用了正则表达式](https://stackoverflow.com/q/1732348/399649)。这看起来像 XML。为什么不使用 XML 解析器？如果您使用的是 .NET，则 LINQ to XML 非常适合您所描述的确切工作，包括有关嵌套`pubdate`. 应该比正则表达式更容易和更有效。

# r - 如何根据 R 中的日期时间文件名选择文件？

> ID：15768478
> 
> 赞同：0
> 
> 时间：2013-04-02T15:47:12.563
> 
> 标签：r, filenames

我有一组具有以下名称的文件：

```
lineal_fit_coef_yymmddhhmmss.csv 
```

我只想选择那些在我开始日期之前的文件；在我的开始日期和结束日期之间；就在我的结束日期之后。

你会如何在 R 中做到这一点？我一直在考虑它，但我没有办法做到这一点。使用 list.files？但是您将如何在文件名中引入有关中间日期的条件？

例如，我有文件：

```
lineal_fit_coef_130220183448.csv

lineal_fit_coef_130223113802.csv

lineal_fit_coef_130226043153.csv

lineal_fit_coef_130306094439.csv

lineal_fit_coef_130307094011.csv 
```

我的开始日期是：`130223193927`我的结束日期是`130227122246`.

我只想选择这三个文件：

```
lineal_fit_coef_130223113802.csv

lineal_fit_coef_130226043153.csv

lineal_fit_coef_130306094439.csv 
```

我希望你能以某种方式帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:06:21.420

如何使用**dir**获取文件名列表。**使用substr**提取字符串的适当部分，使用**as.numeric**将它们强制为数字，最后使用**<**进行比较以选择要使用的文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:57:43.683

我认为您正在寻找功能“file.info”

在您的 csv 文件上使用它并将您的选择应用于 mtime 列

```
files = list.files(pattern="csv$")
finfo = file.info(files)
finfo$mtime 
```

如果您想做同样的事情但在文件名中使用时间，首先您必须将它们转换为日期，然后您可以执行您的选择。

```
#extract the part o the filename that holds the date
chardates = gsub(x=files, pattern = ".*_.*_.*_(.*).csv", replace="\\1")
#convert it to a real R Date
dates = strptime(chardates, format="%y%m%d%H%M%S")
#perform your selection
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:04:45.007

您可以编写自定义函数，如下所示

```
list.files.by.date <- function(from,to,...) {
  filelist <- list.files(...)
  timestamps <- as.POSIXct(gsub('.*([0-9]{12})+.*','\\1',filelist), format='%y%m%d%H%S', tz='GMT' )
  fromtime <- as.POSIXct(from,, format='%y%m%d%H%S', tz='GMT' )
  totime <- as.POSIXct(to,, format='%y%m%d%H%S', tz='GMT' )
  return(filelist[timestamps >= fromtime & timestamps <= totime])
} 
```

`from`这将允许您获取文件名中“时间戳”位于和`to`参数定义的范围内的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:10:24.873

您需要使用`list.files()`，将日期提取为字符串并转换为 POSIXct。以下是获取日期的方法：

```
fileDates <- as.POSIXct(substr(list.files(pattern="lineal_fit_coef_[0-9]*\\.csv"),17,28), format="%y%m%d%H%M%S") 
```

然后您可以将这些与您的开始日期和结束日期进行比较，并将结果用作*索引向量*`list.files()`：

```
startingDate <- as.POSIXct("130223193927", format="%y%m%d%H%M%S")
endingDate <- as.POSIXct("130227122246", format="%y%m%d%H%M%S")

list.files(pattern="lineal_fit_coef_[0-9]*\\.csv")[fileDates >= startingDate & fileDates <= endingDate] 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T17:20:06.313

试试这个（仅适用于特定情况）：

```
files <- c('lineal_fit_coef_130220183448.csv','lineal_fit_coef_130223113802.csv','lineal_fit_coef_130226043153.csv','lineal_fit_coef_130306094439.csv','lineal_fit_coef_130307094011.csv')
filesDATE <- as.double(gsub('[^0-9]', '', files))

files[filesDATE >= 130223193927 & filesDATE <= 130227122246] 
```

（你的例子是正确的？我得到了不同的值）

# xtext - 用 XText 编写的语法的等效 BNF 语法

> ID：15768481
> 
> 赞同：1
> 
> 时间：2013-04-02T15:47:22.767
> 
> 标签：xtext

在我目前的项目中，我用 Xtext 编写了具有很好功能的语法。例如，我的语法代码片段

```
Device:
     deviceName =  ID ':'

     ('region' ':' ( deviceRegions += DeviceRegions)+ )* ;

DeviceRegions:
     regionLabel = [RegionLabel] ';'  
     // It stores a List of  regionLabel functionalities
;

RegionLabel: name = ID ; 
```

使用上述语法，我编写了以下高级规范：

```
 DeviceOne : 
         region : 
              Room ;
              Floor ;
              Building; 
    DeviceTwo: 
         region : 
              Room ;
              Floor ;
              Building; 
```

我希望看到用 xText 编写的等效 BNF 语法。例如，等效语法如下：

```
Device = ID ':'
     ( 'region' ':'  (deviceRegions = DeviceRegions)+)*  ;

 DeviceRegions : 
       regionLabel = RegionLabel ';'  ;

 RegionLabel = 'room' | 'Floor' | 'Building' ;

  ID  = 'A'..'Z' ('a' ..'z' | 'A' ..'Z')* ; 
```

我的问题是“有什么方法可以将 xText 书面语法转换为等值 BNF 语法，还是我应该手动进行？

我知道 xText 语法很容易学习和编写。但是，我有 BNF 语法的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:11:21.283

需要对文档做同样的事情（使用铁路图可视化 xText 语法），第一次手工做，但是随着语法的发展变得无聊，找到了两篇有用的文章：简单的解决方案 - [http://fornax-sculptor.blogspot。 nl/2010/05/generating-syntaxrailroad-diagrams-from.html](http://fornax-sculptor.blogspot.nl/2010/05/generating-syntaxrailroad-diagrams-from.html) 一个更可靠的[http://xtexterience.wordpress.com/2011/05/13/an-ebnf-grammar-in-xtext/](http://xtexterience.wordpress.com/2011/05/13/an-ebnf-grammar-in-xtext/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:09:14.680

请注意，不可能从 Xtext 语法生成“等效”EBNF。Xtext 语法支持交叉引用的概念，您不引用生产规则而是生产实例。这不能在 EBNF 中表达。无论如何，可以编写一个生成器片段，从 Xtext 语法产生输出，例如 Antlr 语法就是这样创建的。查看文档以了解更多信息。

# python - 如何在python中获得小数精度？

> ID：15768483
> 
> 赞同：3
> 
> 时间：2013-04-02T15:47:28.047
> 
> 标签：python, floating-point

情况如下：

*   我正在编写一个单元测试并比较精确`NUMERIC`的货币`PostgreSQL``(10, 2)`

我`test`的断言为

```
self.assertEquals(Decimal(89.12), user_two_transactions[0].amount) 
```

我失败了

```
AssertionError: Decimal('89.1200000000000045474735088646411895751953125') != Decimal('89.12') 
```

如何使其更精确并确保金额正确保存在数据库中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T15:49:02.503

用字符串初始化 Decimal：

```
Decimal('89.12') 
```

如您所见，89.12 不能完全表示为浮点数。

[十进制施工文件。](http://docs.python.org/2/library/decimal.html#decimal.Decimal)

你的另一个选择是一个`(sign, digits, exponent)`元组：

```
In [3]: Decimal((0, (8, 9, 1, 2), -2))
Out[3]: Decimal('89.12') 
```

但请不要在没有充分理由的情况下这样做:)

# sql - 如何从以 BLOB 格式存储的 XML 文件生成表？

> ID：15768485
> 
> 赞同：0
> 
> 时间：2013-04-02T15:47:33.847
> 
> 标签：sql, oracle, oracle11gr2

我需要使用 SQL 查询（Oracle 11g R2）生成一个从 XML 文件（以 BLOB 格式存储）填充的表。该表应包含每个学生一行。

当我尝试使用以下语法时：

```
select x.*
from XMLTABLE('/XML/highschool/class/student' passing (SELECT XML_CONTENT
   FROM T_FILES
   WHERE ID_FILE = 1)
   columns seq for ordinality,
   STUDENT_NAME Varchar2(500) PATH 'cd[@name=''STUDENT_NAME'']@data'
)
as x; 
```

我得到错误

```
19109\. 00000 -  "RETURNING keyword expected"
*Cause:    The keyword RETURNING was missing.
*Action:   Specify the RETURNING keyword. 
```

我尝试使用 dbms_xmlgen.getxmltype 和其他一些解决方案但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:09:17.323

您的 XPATH 已损坏。

利用：

```
PATH 'cd[@name="STUDENT_NAME"]/@data' 
```

例如：

```
SQL> create table T_FILES
  2  (XML_CONTENT xmltype, ID_FILE number);

Table created.

SQL> insert into t_files values (
  2  xmltype('<XML>
  3    <highschool>
  4      <class>
  5        <user>
  6          <cd name="STUDENT_NAME" data="foo"/>
  7        </user>
  8        <user>
  9          <cd name="STUDENT_NAME" data="foo2"/>
 10        </user>
 11      </class>
 12    </highschool>
 13  </XML>'), 1);

1 row created.

SQL> commit;

Commit complete.

SQL> select /*+ cursor_sharing_exact */ a.*
 2  from XMLTABLE('/XML/highschool/class/user' PASSING  (SELECT XML_CONTENT
 3     FROM T_FILES
 4     WHERE ID_FILE = 1)
 5               columns
 6               seq for ordinality,
 7               STUDENT_NAME Varchar2(500) PATH 'cd[@name="STUDENT_NAME"]/@data'
 8       )  a;

      SEQ STUDENT_NAME
--------- --------------------
        1 foo
        2 foo2 
```

对比

```
SQL>  select /*+ cursor_sharing_exact */ a.*
  2  from XMLTABLE('/XML/highschool/class/user' PASSING  (SELECT XML_CONTENT
  3     FROM T_FILES
  4     WHERE ID_FILE = 1)
  5               columns
  6               seq for ordinality,
  7               STUDENT_NAME Varchar2(500) PATH 'cd[@name=''STUDENT_NAME'']@data'
  8       )  a;
from XMLTABLE('/XML/highschool/class/user' PASSING  (SELECT XML_CONTENT 
```

尽管您使用的语法仅在您的基表中有一行的情况下才有效`ID_FILE`。如果不是，那么您必须将表放在`xmltable`定义之外，例如：

```
select /*+ cursor_sharing_exact */ a.*
from T_FILES t,
     XMLTABLE('/XML/highschool/class/user' PASSING  t.XML_CONTENT
             columns
             seq for ordinality,
             STUDENT_NAME Varchar2(500) PATH 'cd[@name="STUDENT_NAME"]/@data'
     )  a
WHERE t.ID_FILE = 1; 
```

如果您已将 XML 放入 BLOB 中并且没有从 blob 存储为 XMLTYPE，则在选择中转换：

```
select /*+ cursor_sharing_exact */ a.*
from XMLTABLE('/XML/highschool/class/user' PASSING  
             (SELECT xmltype.createxml(XML_CONTENT, NLS_CHARSET_ID('UTF8'), null)
                FROM T_FILES
               WHERE ID_FILE = 1)
             columns
             STUDENT_NAME Varchar2(500) PATH 'cd[@name="STUDENT_NAME"]/@data'
     )  a; 
```

IE。`xmltype.createxml(XML_CONTENT, NLS_CHARSET_ID('UTF8'), null)`. 根据需要更改字符集。

# ios - CoreData：按类别集中的索引对项目进行排序

> ID：15768491
> 
> 赞同：3
> 
> 时间：2013-04-02T15:47:50.723
> 
> 标签：ios, sorting, core-data

我有一个简单的目录管理器功能，其中包含类别中的项目，除了一个项目可以在多个类别中。

**项目**具有“父母”键，即父类别的 NSSet

**类别**有“项目”键，它是其子项目的 NSOrderedSet

我正在使用`NSFetchedResultController`它的代表来用物品填满我的桌子

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Item" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

fetchRequest.predicate = [NSPredicate predicateWithFormat:@"(ANY parents == %@)", self.category];

[fetchRequest setFetchBatchSize:30];
[fetchRequest setSortDescriptors:@[????????];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
} 
```

所以使用这段代码我可以得到 self.category 中的项目列表

在我的 UI 中，我有`Drag and Drop`功能。所以我可以在类别内移动项目。

**我的问题：** Category1 和 Category2 都包含对相同项目 Item1 和 Item2 的引用。我需要在 Category1 中有 Item1、Item2 的订单，在 Category2 中有 Item2、Item1 的订单。这就是为什么我将 category.items 属性设置为`NSOrderedSet`.

但我只是不能按它们在 category.items 中的索引对项目进行排序

我尝试在排序描述符中使用块 - 没用，我尝试在排序描述符中使用选择器 - 没用，我尝试对排序描述符进行子类化 - 以某种方式工作，但在我更改它们的索引时不更新项目类别.项目。
在我的 NSSortDescriptorSubclass 中像这样：

`- (NSComparisonResult)compareObject:(Item*)object1 toObject:(Item*)object2 {`

 ````
int index1 = [self.category.items indexOfObject:object1];
int index2 = [self.category.items indexOfObject:object2];

if (index1 > index2) {
    return NSOrderedDescending;
} else if (index1 < index2) {
    return NSOrderedAscending;
}

return NSOrderedSame; 
```` 

`}` 但是如果我在 Category.items 中更改订单，项目订单将不会在我的 UI 中更新

所以请帮我按照 category.items 集中的索引对项目进行排序。也许有一种方法可以通过一些键、运算符、表达式或其他任何东西来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:51:01.310

我建议您不要使用有序对多关系。似乎它们并没有真正按预期工作，也不符合您的需求。

相反，您需要引入自己的属性来进行排序。你可以有一个实体，它与 和以及一个属性`categoryItem`都具有一对一关系。`Category``Item``sequence`

在您的 FRC 中，您获取`categoryItem`实体并在显示时仅用于`categoryItem.item`访问项目的属性。当您重新排序（例如通过拖放）时，您必须重新编号所有`categoryItem`s 并分配正确的序列号。

- 编辑 -

要在项目的某些细节发生更改时将其标记`categoryItem`为“脏”：您可以实现如下所示的`markDirty`方法`categoryItem`：

```
// CategoryItem.m
-(void)markDirty {
    [self willChangeValueForKey:@"sequence"];
    [self didChangeValueForKey:@"sequence"];
}

// EditItemController.m
item.attribute = newAttribute; 
for (CategoryItem *i in item.categoryItems) { [i markDirty]; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:15:13.943

Core Data 中的一对多关系是`NSSet`s，而不是`NSOrderedSet`s。由于这个原因，类别中的项目的索引不会被保存。您可以将另一个实体添加到您的核心数据模型中，称为`IndexValue`. `IndexValue`将有两个属性，`categoryId`或者`categoryName`（无论哪个有意义）然后`categoryIndex`. `Item`然后将与该实体具有一对多的关系（以及一对一的反向关系，因为不需要重用这些实体，它们应该是唯一的）。对于其中的每`Category`一个，`Item`都会`IndexValue`创建一个。

**编辑：**似乎添加了一个有序属性以支持[OS X 10.7 和 iOS 5](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/index.html)`NSOrderedSet`中的一对多关系。这必须是您的目标和使用。关于这个特性的文档很少，但是在获取关系时应该保持顺序而不需要使用s。至于更改顺序，我不确定这是如何支持的。与我概述的上述方法相比，使用此方法[对大量数据的性能较低。](https://stackoverflow.com/a/7354522/387576)`NSSortDescriptor`

# mysql - PhpMyAdmin 合并两个表

> ID：15768497
> 
> 赞同：0
> 
> 时间：2013-04-02T15:48:27.523
> 
> 标签：mysql, join, merge, phpmyadmin

我有表一和表二。表一有 zoe 和 clo 列，但表二有 oez 和 olc，它就像这样 zoe=oez 和 cloe=olc 我怎样才能合并它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:25:08.160

我不确定这是否是您要查找的内容，但使用`union all`可以将结果合并为单个表。但是，如果这将是一个永久表，则您必须创建一个新的主键。

```
Select a.id as id, a.value as value
From a
UNION ALL
Select b.id1 as id, b.value1 as value
From b
Group by id, value 
```

例子：

[http://www.sqlfiddle.com/#!2/093e1/4](http://www.sqlfiddle.com/#!2/093e1/4)

# python - 从谷歌学者中提取文本

> ID：15768499
> 
> 赞同：0
> 
> 时间：2013-04-02T15:48:33.360
> 
> 标签：python, text-mining, google-scholar

我正在尝试从谷歌学者为特定查询提供的测试片段中提取文本。文本片段是指标题下方的文本（黑色字母）。目前我正在尝试使用python从html文件中提取它，但它包含很多额外的测试，例如

**`/div><div class="gs_fl"`**...ETC。

有没有一种简单的方法或一些代码可以帮助我在没有这些冗余文本的情况下获取文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:18:02.130

你需要一个 html 解析器：

```
import lxml.html

doc = lxml.html.fromstring(html)
text = doc.xpath('//div[@class="gs_fl"]').text_content() 
```

您可以使用“pip install lxml”安装 lxml，但您需要构建它的依赖项，并且详细信息会根据您的平台而有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-23T13:19:10.637

旧的，但现在可能是一个相关的问题。使用[SelectorGadgets](https://selectorgadget.com/)轻松抓取 CSS 选择器。确保您使用的是代理，否则即使您尝试通过`selenium`.

在线 IDE 中的代码和[完整示例：](https://replit.com/@DimitryZub1/Scrape-Google-Scholar-Python-SerpApi#main.py)

```
from bs4 import BeautifulSoup
import requests, lxml, os

headers = {
    'User-agent':
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.19582"
}

proxies = {
  'http': os.getenv('HTTP_PROXY')
}

html = requests.get('https://scholar.google.com/scholar?hl=en&as_sdt=0%2C5&q=samsung&oq=', headers=headers, proxies=proxies).text
soup = BeautifulSoup(html, 'lxml')

for result in soup.select('.gs_ri'):
  snippet = result.select_one('.gs_rs').text
  print(f"Snippet: {snippet}") 
```

部分输出：

```
Snippet: Purpose–Extensive research has shown that country‐of‐origin (COO) information significantly affects product evaluations and buying behavior. Yet recently, a competing perspective has emerged suggesting that COO effects have been inflated in prior research … 
```

* * *

或者，您可以使用来自 SerpApi 的 Google Scholar Organic Search Results API。这是一个付费 API，可免费试用 5,000 次搜索。

本质上，它和上面的脚本做同样的事情，除了你不需要考虑如何解决验证码或找到一个好的代理（代理）。

要集成的代码：

```
from serpapi import GoogleSearch
import os

params = {
  "api_key": os.getenv("API_KEY"),
  "engine": "google_scholar",
  "q": "samsung",
}

search = GoogleSearch(params)
results = search.get_dict()

for result in results['organic_results']:
  print(f"Snippet: {result['snippet']}") 
```

部分输出：

```
Snippet: Purpose–Extensive research has shown that country‐of‐origin (COO) information significantly affects product evaluations and buying behavior. Yet recently, a competing perspective has emerged suggesting that COO effects have been inflated in prior research … 
```

> 免责声明，我为 SerpApi 工作。

# ruby-on-rails - RAILS 或在 if 语句中

> ID：15768500
> 
> 赞同：0
> 
> 时间：2013-04-02T15:48:33.787
> 
> 标签：ruby-on-rails

我不确定如何在视图 IF 语句中使用 OR。

这不起作用：

```
<% if current_user.employee.emptype.typename == "ADMIN" or "TECH" %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:51:33.917

写这样的东西：

```
<% if current_user.employee.emptype.typename == "ADMIN" || current_user.employee.emptype.typename == "TECH" %> 
```

或更好

```
<% if ['TECH', 'ADMIN'].include?(current_user.employee.emptype.typename) %> 
```

请注意 OR 和 AND 关键字，它们的运算符优先级与`&&`and不同`||`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:53:53.693

您可以通过以下两种方式之一执行此操作。我更喜欢第一种方法。

```
<% if current_user.employee.emptype.typename.in?(["ADMIN", "TECH"]) %> 
```

...或者...

```
<% if current_user.employee.emptype.typename == "ADMIN" || current_user.employee.emptype.typename == "TECH" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:55:16.630

那是行不通的，它与视图无关。在 Ruby 中，所有字符串都`true`在 if 语句中求值。

您必须根据类型名称检查这两个值，如下所示：

```
if current_user.employee.emptype.type_name == "ADMIN" || current_user.employee.emptype.type_name == "TECH" 
```

或检查它是否包含在有效类型的数组中：

```
if ["ADMIN", "TECH"].include?(current_user.employee.emptype.type_name) 
```

另请参阅[本文](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)以比较 Ruby 中的`||`和`or`。

# jwplayer - rtmpe url 在具有 akamai 安全流的 jwplayer 中不起作用

> ID：15768501
> 
> 赞同：2
> 
> 时间：2013-04-02T15:48:36.100
> 
> 标签：jwplayer

我参与了一个项目，该项目涉及从 Akamai 安全地流式传输按需流，这需要生成身份验证令牌并将几个参数传递给连接方法（auth=、aifp= 和 slist=）。

我们尝试将其作为 url 参数（例如 rtmp://mystream.com/ondemand?auth=giantokenhere&aifp=1234&slist=video/awesome）正常地传递给 akamai/rtmpe 插件。

我们已经使用 Akamai 测试实用程序测试了一个 url，但 JWPlayer 似乎无法正常工作。有谁知道 JWPlayer 是否支持 Akamai 风格的安全流式传输？

Secure Streaming Plugin 似乎不支持它。

这是一个示例 akamai rtmpe url

rtmpe://cp145966.edgefcs.net/ondemand/mp4:mlibs/dev/CT2049_TotalVideo_FULL_G010002923399A_PulcinoPio_PuiulPiu_PuiulPiu.mp4?auth=daEbAbJdMafaCb3c7cubrb7cWahdQaYckax-brwVI8-b4-7wsXzkFjIIOFLs&aifp=v001&slist=mlibs/dev/CT2049_TotalVideo_FULL_G010002923399A_PulcinoPio_PuiulPiu_PuiulPiu

我的 jwplayer 设置：

```
 jwplayer("container").setup({
        flashplayer :  "/teams/web/jwplayer/jwplayer.flash.swf",
        file : mlibs/dev/CT2049_TotalVideo_FULL_G010002923399A_PulcinoPio_PuiulPiu_PuiulPiu.mp4?auth=daEbAbJdMafaCb3c7cubrb7cWahdQaYckax-brwVI8-b4-7wsXzkFjIIOFLs&aifp=v001&slist=mlibs/dev/CT2049_TotalVideo_FULL_G010002923399A_PulcinoPio_PuiulPiu_PuiulPiu,
        streamer : rtmpe://cp145966.edgefcs.net/ondemand,
        provider : "/teams/web/jwplayer/AkamaiAdvancedJWStreamProvider.swf",
        type:"mp4",
        primary: "flash",
        height:"362",
        width:"600" 
```

});

我是否必须在此处设置提供程序。此外，令牌应该是文件参数的一部分，或者它应该在 connectAuthParams:'connectionAuthToken', streamAuthParams:'auth=livestreamAuthToken'

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:35:04.230

如果您使用的是 JW6，我相信设置只需要如下所示：

```
 jwplayer("container").setup({
        file : "rtmpe://cp145966.edgefcs.net/ondemand/mp4:mlibs/dev/CT2049_TotalVideo_FULL_G010002923399A_PulcinoPio_PuiulPiu_PuiulPiu.mp4?auth=daEbAbJdMafaCb3c7cubrb7cWahdQaYckax-brwVI8-b4-7wsXzkFjIIOFLs&aifp=v001&slist=mlibs/dev/CT2049_TotalVideo_FULL_G010002923399A_PulcinoPio_PuiulPiu_PuiulPiu",
        primary: "flash",
        height:"362",
        width:"600"
}); 
```

# mysql - mysqldump vs select into outfile

> ID：15768502
> 
> 赞同：4
> 
> 时间：2013-04-02T15:48:37.087
> 
> 标签：mysql

我在 mysql 中使用 select * into outfile 选项将数据备份到制表符分隔格式的文本文件中。我针对每个表调用此语句。

我使用 load data infile 将每个表的数据导入到 mysql 中。

执行此操作时，我尚未执行任何锁定或禁用键

现在我面临一些问题：

1.  虽然它正在备份另一个，但更新和选择变得越来越慢。
2.  为大表导入数据需要太多时间。

如何改进解决上述问题的方法？

mysqldump 是一个选项吗？我看到它使用插入语句，所以在我尝试之前，我想请求建议。

在每次“加载数据”之前使用锁定和禁用密钥是否会提高导入速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T12:22:13.663

如果您有很多数据库/表，那么使用 mysqldump 肯定会容易得多，因为您只需要为每个数据库运行一次（或者甚至为所有数据库运行一次，如果您对系统进行完整备份） . 此外，它还具有备份表结构的优点（仅使用 select * 无法做到这一点）。

速度可能相似，但最好同时测试两者，看看哪一个最适合您的情况。

[这里](http://forums.mysql.com/read.php?24,433687,433735#msg-433735)有人测试了这些选项，在他的情况下 mysqldump 被证明更快。但同样，YMMV。

如果您关心速度，还请查看 mysqldump/mysqlimport 组合。正如[这里提到的](http://dev.mysql.com/doc/refman/5.5/en/copying-databases.html)，它比单独使用 mysqldump 更快。

至于锁和禁用钥匙，我不确定，所以我会让其他人回答那部分:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-28T21:20:35.833

如果您希望数据备份*保持一致*，则使用 mysqldump 很重要。也就是说，从所有表中转储的数据代表同一时刻。

如果您一张一张转储表，它们将不同步，因此您可能拥有一个表的数据，这些数据引用了另一个表中未包含在第二个表的备份中的行。当你恢复时，它不会很漂亮。

为了性能，我正在使用：

```
mysqldump --single-transaction --tab mydatabase 
```

这为每个表转储，一个用于表定义的 .sql 文件和一个用于数据的 .txt 文件。

然后当我导入时，我运行 .sql 文件来定义表：

```
mysqladmin create mydatabase
cat *.sql | mysql mydatabase 
```

然后我导入所有数据文件：

```
mysqlimport --local --use-threads=4  mydatabase  *.txt 
```

一般来说，运行 mysqlimport 比运行 mysqldump 默认输出的插入语句要快。只要您有空闲的 CPU 资源，使用多线程运行 mysqlimport 也应该更快。

还原时使用锁无助于提高性能。

禁用键旨在将索引创建推迟到数据完全加载并重新启用键之后，但这仅有助于 MyISAM 表中的非唯一索引。但是你不应该使用 MyISAM 表。

有关更多信息，请阅读：

*   [https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html](https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html)
*   [https://dev.mysql.com/doc/refman/5.7/en/mysqlimport.html](https://dev.mysql.com/doc/refman/5.7/en/mysqlimport.html)

# ios - 杂志应用程序的自动更新处理，每年有 2 期

> ID：15768503
> 
> 赞同：2
> 
> 时间：2013-04-02T15:48:37.337
> 
> 标签：ios, in-app-purchase

我有一个杂志应用程序，想实现自动更新订阅。每年发布**2期。**第一期在**四月**发行，第二期在半年后的**十月**发行。

如果我实施一年订阅，我该如何处理订阅？

**这是我的问题：**

第一：用户在 8 月订阅并获得 4 月刊。然后在 10 月份，用户收到了 10 月份的问题。明年 4 月，用户仍有有效订阅，但不应收到 4 月刊，因为他的订阅将于 8 月结束。如果他续订订阅，他只会收到新的四月刊。

**我的第二个问题是：**我不知道用户是否在 8 月之前续订订阅，并且无法在 4 月交付新版本。

我希望你能理解所描述的问题，并有一些提示让我朝着正确的方向前进。

# python - 使用带有 Python 3.3 的 urllib 的简单 POST

> ID：15768504
> 
> 赞同：1
> 
> 时间：2013-04-02T15:48:38.123
> 
> 标签：python, post, urllib, python-3.3

我正在参加一个哈希破坏竞赛，我正在尝试自动将字符串发布到 html 表单并获取哈希分数。到目前为止，我已经设法将 SOMETHING 发布到 url，但它不是我期望的确切字符串，因此哈希返回的值与手动输入字符串所获得的值相差甚远。

```
import urllib.parse, urllib.request

url = "http://almamater.xkcd.com/?edu=una.edu"
data = "test".encode("ascii")
header = {"Content-Type":"application/octet-stream"}
req = urllib.request.Request(url, data, header)
f = urllib.request.urlopen(req)
print(f.read())
#parse f to pull out hash 
```

我从该站点获得以下哈希：

```
0fff9563bb3279289227ac77d319b6fff8d7e9f09da1247b72a0a265cd6d2a62645ad547ed8193db48cff847c06494a03f55666d3b47eb4c20456c9373c86297d630d5578ebd34cb40991578f9f52b18003efa35d3da6553ff35db91b81ab890bec1b189b7f52cb2a783ebb7d823d725b0b4a71f6824e88f68f982eefc6d19c6 
```

这与我的预期有很大不同，如果你在表格中输入“test”（不带引号），你会得到：

```
e21091dbb0d61bc93db4d1f278a04fe1a51165fb7262c7da31f886ae09ff3e04c41483c500db2792c59742958d8f7f39fe4f4f2cdc7940b7b25e3289b89d344e06f76305b9de525933b5df5dae2a37388f82cf76374fe363587acfb49b9d2c8fc131ef4a32c762be083b07330989b298d60e312f56a6b8a4c0f53c9b59864fb7 
```

显然，代码并没有做我期望它做的事情。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:01:39.763

当您提交表单数据时，它还包含字段名称，因此当您提交“test”时，提交的数据实际上看起来像“hashable=test”。尝试像这样更改您的数据：

```
data = "hashable=test".encode("ascii") 
```

或者：

```
data = urllib.parse.urlencode({'hashable': 'test'}) 
```

# dns - Plesk 是否保存有关使用的 cms 的统计信息？

> ID：15768506
> 
> 赞同：0
> 
> 时间：2013-04-02T15:48:44.040
> 
> 标签：dns, content-management-system, plesk

我有一个托管许多域的服务器。Plesk 是否有某种统计数据，可以让我查看每个域在 CMS 等方面的内容，还是我必须通过每个单独的域才能找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:17:09.803

使用 Plesk，无法知道您的客户帐户上安装了哪个 CMS。您需要迭代每个域并查看分期付款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:03:55.310

如果您谈论的是从 APS 目录安装在域上的应用程序，那么在 Plesk 11 的服务器设置中有一个页面：服务器 > 应用程序和数据库 > 应用程序库。显然，用户手动安装的自定义应用程序没有统计数据。

但是为什么你需要这些信息？最终目标是什么？

# linux - Oracle 表转 SAS 数据集

> ID：15768509
> 
> 赞同：0
> 
> 时间：2013-04-02T15:48:59.113
> 
> 标签：linux, oracle, sas

我在将大型 Oracle 表转换为 SAS 数据集时遇到问题。我早些时候这样做了，并且该方法有效。但是，这一次，它给了我以下错误消息。

```
SAS code:

option compress = yes;
libname sasdata ".";
libname myora oracle user=scott password=tiger path=XYZDATA ;
data sasdata.expt_tabl;
   set myora.expt_tabl;
run;

Log file:

You are running SAS 9\. Some SAS 8 files will be automatically converted
by the V9 engine; others are incompatible.  Please see
http://support.sas.com/rnd/migration/planning/platform/64bit.html

PROC MIGRATE will preserve current SAS file attributes and is
recommended for converting all your SAS libraries from any
SAS 8 release to SAS 9\.  For details and examples, please see
http://support.sas.com/rnd/migration/index.html

This message is contained in the SAS news file, and is presented upon
initialization.  Edit the file "news" in the "misc/base" directory to
display site-specific news and information in the program log.
The command line option "-nonews" will prevent this display.

NOTE: SAS initialization used:
      real time           1.63 seconds
      cpu time            0.03 seconds

1          option compress = yes;
2          libname sasdata ".";
NOTE: Libref SASDATA was successfully assigned as follows:
      Engine:        V9
      Physical Name: /******/dibyendu
3          libname myora oracle user=scott password=XXXXXXXXXX path=XYZDATA ;
NOTE: Libref MYORA was successfully assigned as follows:
      Engine:        ORACLE
      Physical Name: XYZDATA
4          data sasdata.expt_tabl;
5             set myora.expt_tabl;
6          run;

NOTE: There were 6422133 observations read from the data set MYORA.EXPT_TABL.DATA.
ERROR: Expecting page 1, got page -1 instead.
ERROR: Page validation error while reading SASDATA.EXPT_TABL.DATA.
ERROR: Expecting page 1, got page -1 instead.
ERROR: Page validation error while reading SASDATA.EXPT_TABL.DATA.
ERROR: File SASDATA.EXPT_TABL.DATA is damaged. I/O processing did not complete.
NOTE: The data set SASDATA.EXPT_TABL.DATA has 6422133 observations and 49 variables.
ERROR: Expecting page 1, got page -1 instead.
ERROR: Page validation error while reading SASDATA.EXPT_TABL.DATA
ERROR: Expecting page 1, got page -1 instead.
ERROR: Page validation error while reading SASDATA.EXPT_TABL.DATA.
ERROR: Expecting page 1, got page -1 instead.
2                                                          The SAS System                                21:40 Monday, April 1, 2013

ERROR: Page validation error while reading SASDATA.EXPT_TABL.DATA.
ERROR: Expecting page 1, got page -1 instead.
ERROR: Page validation error while reading SASDATA.EXPT_TABL.DATA.
NOTE: Compressing data set SASDATA.EXPT_TABL.DATA decreased size by 78.88 percent.
      Compressed is 37681 pages; un-compressed would require 178393 pages.
ERROR: File SASDATA.EXPT_TABL.DATA is damaged. I/O processing did not complete.
NOTE: SAS set option OBS=0 and will continue to check statements. This might cause NOTE: No observations in data set.
NOTE: DATA statement used (Total process time):
      real time           8:55.98
      cpu time            1:39.33

7

ERROR: Errors printed on pages 1,2.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           8:58.67
      cpu time            1:39.40 
```

这是在 RH Linux 服务器上运行的。

任何建议将不胜感激。

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:38:28.523

这听起来像是您服务器上的空间问题。您的默认目录中的文件系统有多大（根据您的`libname sasdata '.';`声明）？使用 Oracle 表引用上的数据集选项`obs=1`创建一个包含一行的新 SAS 数据集并检查变量。

```
data sasdata.dummy_test;
     set myora.expt_tabl(obs=1);
run; 
```

也许有非常大的 VARCHAR 或 BLOB 列占用了太多空间。请记住，SAS 没有 VARCHAR 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:30:29.517

虽然我不完全确定，但我相信主要问题是我最初试图在目录中创建/写入数据集，这在某种（？）意义上受到限制。这间接造成了麻烦，因为创建的数据集有缺陷。当我在其他地方创建它时，没关系。

谢谢和问候， Dibyendu

# android - 未创建 SQLite 数据库

> ID：15768513
> 
> 赞同：1
> 
> 时间：2013-04-02T15:49:08.660
> 
> 标签：android, database-design, android-sqlite

此代码没有创建我的数据库。我想在创建表时创建一个带有一些默认值的预填充表。虽然执行时没有错误。有什么帮助吗？

数据库助手代码：

```
public class DatabaseHelper extends SQLiteOpenHelper {

public static String dbName = "whatever.db";
public static int dbVersion = 2; 

public DatabaseHelper(Context context) {
    super(context, dbName, null, dbVersion);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String createTable = "CREATE TABLE smart (UID INTEGER PRIMARY KEY, NAME TEXT);";
    db.execSQL(createTable);
    ContentValues cv = new ContentValues();
    cv.put("UID", 9);
    cv.put("NAME", "clear");
    db.insert("smart", null, cv);
    db.close();

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS smart");

}

} 
```

主要活动代码：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    DatabaseHelper dbHelper = new DatabaseHelper(this);
    dbHelper.close();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:25:16.483

试试这个代码

在您的 DatabaseHelper 中：

```
public static String dbName = "whatever.db";
public static int dbVersion = 2;

public DatabaseHelper(Context context) {
    super(context, dbName, null, dbVersion);
}

@Override
public void onCreate(SQLiteDatabase db) 
{
    String createTable = "CREATE TABLE smart (UID INTEGER PRIMARY KEY, NAME TEXT);";
    db.execSQL(createTable);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
    db.execSQL("DROP TABLE IF EXISTS smart");

} 
```

在您的活动中：

```
 DatabaseHelper helper = new DatabaseHelper(MainActivity.this);
    SQLiteDatabase myDB = helper.getWritableDatabase();

    ContentValues cv = new ContentValues();
    cv.put("UID", 9);
    cv.put("NAME", "clear");
    myDB.insert("smart", null, cv);
    myDB.close(); 
```

或在数据库助手中添加此方法：

```
 public void save(int yourUID, String yourText)
{
    SQLiteDatabase myDB = this.getWritableDatabase();
    ContentValues cv = new ContentValues();

    cv.put("UID", yourUID);
    cv.put("NAME", yourText);
    myDB.insert("smart", null, cv);
    myDB.close();
} 
```

然后在您的活动中编码：

```
 DatabaseHelper helper = new DatabaseHelper(MainActivity.this);
    helper.save(12, "Clear"); 
```

我希望，我帮助了你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:09:08.643

不使用 sqliteopenhelper 试试这个

在你的活动课上

```
private SqliteDatabase Dbname;
Dbname =  this.openOrCreateDatabase(YourDbname, MODE_PRIVATE, null);//inside oncreate()

String createTable = "CREATE TABLE smart (UID INTEGER PRIMARY KEY, NAME TEXT);";
db.execSQL(createTable); 

ContentValues cv = new ContentValues();
cv.put("UID", 9);
cv.put("NAME", "clear");

db.insert("smart", null, cv);
db.close(); 
```

# android - 使用原始名称和类型将图像资源从资源复制到android中的存储

> ID：15768514
> 
> 赞同：1
> 
> 时间：2013-04-02T15:49:11.527
> 
> 标签：android

我的 android 应用程序的资源文件夹中有许多图像。我想将文件从资源文件夹复制到存储并保持其原始图像类型（位图、jpg、png 等）我还想拥有原始文件名。

我正在尝试做一些类似的事情......

```
public static void CopyImagesFromResourceToStorage(Context c,int[] resources,String path)
    {
        File dir = new File(path);

        for(int i=0;i<resources.length;i++)
        {
            File file = new File(path+"???Filename???");
            Bitmap bm = BitmapFactory.decodeResource(c.getResources(), resources[i]);

            //Copy Bitmap to the file here...   
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:28:00.353

要获取文件名，我会使用一个额外的参数，即原始路径。您可以遍历原始目录中的所有文件以获取文件名。如果您有文件名，则可以使用评论中提到的链接之一...

这将是您的最终解决方案（未经测试）：

```
public static void CopyImagesFromResourceToStorage(Context c,int[] resources,String path, String originalpath)
{
    // Get the directory of your original files
    File dir = new File(originalpath);

    // List all files in that directory
    File[] files = dir.listFiles();
    // Loop through all the files in your original directory
    for(File original: files)
    {
        // Create a filename: <target_directory> + original.getName();
        String filename = path + "\\" + original.getName();
        Bitmap bm = BitmapFactory.decodeResource(c.getResources(), resources[i]);
        try {
           FileOutputStream out = new FileOutputStream(filename);
           bmp.compress(Bitmap.CompressFormat.PNG, 90, out);
        } catch (Exception e) {
           e.printStackTrace();
        }

    }
} 
```

请务必关闭 FileOutputStream，并进行一些额外检查以查看 File[] 文件实际上是保存文件而不是目录。

**注意**：如果你真的使用资源文件夹，你也可以使用这样的东西：

```
Field[] drawables = android.R.drawable.class.getFields();
for (Field f : drawables) {
    try {
        System.out.println("R.drawable." + f.getName());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

循环资源

# java - 为什么关闭 JSCH 通道后 SFTP 连接仍然存在？

> ID：15768516
> 
> 赞同：13
> 
> 时间：2013-04-02T15:49:16.063
> 
> 标签：java, sftp, jsch

当下面的代码完成运行后，会`netstat -a|grep sftp`显示一个打开的 SFTP 连接。它还在 JProfiler 中显示为打开的连接。

`channel.isConnected()`在*finally*块中打印*false*。任何想法为什么连接没有被关闭，因为我不知所措？

```
public static void clean() {
    com.jcraft.jsch.ChannelSftp channel = null;
    try {
        channel = Helper.openNewTLSftpChannel();
        channel.connect();
        channel.cd(remoteFileDirectory);

        List<ChannelSftp.LsEntry> list = channel.ls("*." + fileType);
        for (ChannelSftp.LsEntry file : list) {
            String fileName = file.getFilename();
            DateTime fileDate = new DateTime(parseDateFromFileName(fileName));

            //if this file is older than the cutoff date, delete from the SFTP share
            if (fileDate.compareTo(cleanupCutoffdate) < 0) {
                channel.rm(fileName);
            }
        }
    } catch (Exception exception) {
        exception.printStackTrace();
    } finally {
        if (channel != null) {
            channel.disconnect();
            System.out.println(channel.isConnected());
        }
    }
} 
```

* * *

在下面添加`openNewTLSftpChannel()`：

```
public static ChannelSftp openNewSftpChannel(String privateKeyFileName, String password, String username, String host, int port)
        throws ConfigurationErrorException {

    JSch jsch = new JSch();
    File sftpPrivateFile = new File(privateKeyFileName);
    Channel channel;
    try {
        if (!sftpPrivateFile.canRead()) {
            throw new ConfigurationErrorException("File access error: " + sftpPrivateFile.getAbsolutePath());
        }
        jsch.addIdentity(sftpPrivateFile.getAbsolutePath(), password);
        Session session = jsch.getSession(username, host, port);
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        channel = session.openChannel("sftp");
    } catch (JSchException jschException) {
        throw new ConfigurationErrorException("File access error: " + sftpPrivateFile.getAbsolutePath());
    }
    return (ChannelSftp) channel;
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T19:03:51.177

如果您查看 SFTP 的 JSCH[示例](http://www.jcraft.com/jsch/examples/Sftp.java.html)，您将看到会话是如何终止的：

```
//setup Session here 
...
session.connect();
...

Channel channel = session.openChannel("sftp");
channel.connect();
ChannelSftp sftpChannel = (ChannelSftp) channel;

...run sftp logic...

//close sessions here
sftpChannel.exit();
session.disconnect(); 
```

您会注意到连接和断开有两个部分；Session 对象和 Channel 对象。

在我的代码中，我使用 Session 对象来设置我的身份验证信息，并使用 Channel 对象来执行我需要的 sftp 命令。

在您的实例中，您在 openNewSftpChannel 方法中创建 Session 对象，但它永远不会关闭，因此您的会话保持活动状态。

有关更多上下文，请查看示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T21:00:54.483

Robert H 是正确的，您需要退出频道并断开会话。我想补充一点，即使通道已关闭，会话仍然存在。由于您在方法内的 try 块中创建会话，因此您似乎丢失了会话，但您可以在 sftpChannel 通道上使用“getSession”将其取回。

您可以将 finally 块更改为：

```
} finally {
    if (channel != null) {
        Session session = channel.getSession();
        channel.disconnect();
        session.disconnect();
        System.out.println(channel.isConnected());
    }
} 
```

# angularjs - 如果嵌入的内容为空，如何隐藏元素？

> ID：15768517
> 
> 赞同：10
> 
> 时间：2013-04-02T15:49:17.073
> 
> 标签：angularjs, angularjs-directive, transclusion

我创建了一个非常简单的指令，它显示一个键/值对。如果嵌入的内容为空（零长度或只是空格），我希望能够自动隐藏元素。

我无法弄清楚如何访问从指令中嵌入的内容。

```
app.directive('pair', function($compile) {
  return {
    replace: true,
    restrict: 'E',
    scope: {
      label: '@'
    },
    transclude: true,
    template: "<div><span>{{label}}</span><span ng-transclude></span></div>"
  }
}); 
```

例如，我希望显示以下元素。

```
<pair label="My Label">Hi there</pair> 
```

但是接下来的两个元素应该被隐藏，因为它们不包含任何文本内容。

```
<pair label="My Label"></pair>
<pair label="My Label"><i></i></pair> 
```

我是 Angular 的新手，所以可能有一种开箱即用的好方法来处理这类事情。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T17:20:19.483

这是一种`ng-show`在模板上使用并在`compile transcludeFn`检查嵌入的 html 是否具有文本长度的方法。

如果没有将文本长度`ng-show`设置为隐藏

```
app.directive('pair', function($timeout) {
  return {
    replace: true,
    restrict: 'E',
    scope: {
      label: '@'
    },
    transclude: true,
    template: "<div ng-show='1'><span>{{label}} </span><span ng-transclude></span></div>",
    compile: function(elem, attrs, transcludeFn) {
            transcludeFn(elem, function(clone) { 
              /* clone is element containing html that will be transcludded*/
               var show=clone.text().length?'1':'0'
                attrs.ngShow=show;
            });
        }
  }
}); 
```

[Plunker 演示](http://plnkr.co/edit/XNOOQiWcecFngH8ykeT0?p=preview)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-22T01:41:56.907

也许有点晚了，但您也可以考虑使用 CSS 伪类 :empty。所以，这会工作（IE9+）

```
.trancluded-item:empty {
  display: none;
} 
```

该元素仍将在 dom 中注册，但将为空且不可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T18:43:28.217

之前提供的答案很有帮助，但并没有完美地解决我的情况，因此我通过创建单独的指令提出了不同的解决方案。

创建一个基于属性的指令（即`restrict: 'A'`），它只检查元素的所有子节点上是否有任何文本。

```
function hideEmpty() {
    return {
        restrict: 'A',
        link: function (scope, element, attr) {
            let hasText = false;

            // Only checks 1 level deep; can be optimized
            element.children().forEach((child) => {
                hasText = hasText || !!child.text().trim().length;
            });

            if (!hasText) {
                element.attr('style', 'display: none;');
            }
        }
    };
 }

angular
    .module('directives.hideEmpty', [])
    .directive('hideEmpty', hideEmpty); 
```

如果您只想检查主要元素：

```
link: function (scope, element, attr) {
    if (!element.text().trim().length) {
        element.attr('style', 'display: none;');
    }
} 
```

为了解决我的问题，我只需要检查是否有任何子节点：

```
link: function (scope, element, attr) {
    if (!element.children().length) {
        element.attr('style', 'display: none;');
    }
} 
```

YMMV

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-01T11:19:39.457

如果你不想每次都使用 ng-show，你可以创建一个指令来自动完成：

```
.directive('hideEmpty', ['$timeout', function($timeout) {

    return {
        restrict: 'A',

        link: {
            post: function (scope, elem, attrs) {
                $timeout(function() {
                    if (!elem.html().trim().length) {
                        elem.hide();
                    }
                });
            }
        }
    };

}]); 
```

然后你可以将它应用到任何元素上。在您的情况下，它将是：

```
<span hide-empty>{{label}}</span> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:04:32.063

我对 transclude 不是很熟悉，所以不确定它是否有帮助。

但是在指令代码中检查空内容的一种方法是使用 iElement.text() 或 iElement.context 对象，然后将其隐藏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-08T20:57:56.503

我这样做了，使用controllerAs。

/* 内部指令 */

```
 controllerAs: "my",
controller: function ($scope, $element, $attrs, $transclude) {
//whatever controller does
},
         compile: function(elem, attrs, transcludeFn) {
                    var self = this;
                    transcludeFn(elem, function(clone) {
                        /* clone is element containing html that will be transcluded*/
                        var showTransclude = clone.text().trim().length ? true : false;
                        /* I set a property on my controller's prototype indicating whether or not to show the div that is ng-transclude in my template */
                        self.controller.prototype.showTransclude = showTransclude;
                    });
                } 
```

/* 内部模板 */

```
<div ng-if="my.showTransclude" ng-transclude class="tilegroup-header-trans"></div> 
```

# javascript - 如何用JS生成HTML并让谷歌检测

> ID：15768519
> 
> 赞同：0
> 
> 时间：2013-04-02T15:49:24.503
> 
> 标签：javascript, html, dynamic, seo

我有一堆生成一些随机文本的数组（这些数组填充了使用 AJAX 从数据库中提取的数据），谷歌或任何其他搜索引擎有什么方法能够检测到这些内容并被索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:05:43.777

[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

使用 Google 的 hashbang url，并使用[PhantomJS](http://phantomjs.org/)获取渲染 DOM 的快照并提供渲染页面。

像[https://github.com/ekesken/crawlajax](https://github.com/ekesken/crawlajax)这样的东西可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:52:12.317

您将需要生成此内容`Server-side`- 使用 PHP 或其他一些服务器端语言。代码在加载到客户端机器之前需要成为页面的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:51:00.480

无法索引 Javascript 生成的内容：机器人没有 javascript，它们根本看不到此内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:53:53.260

由于许多搜索引擎都关注高质量的内容（尤其是最近的更新，例如谷歌），我认为随机生成的内容实际上会违反搜索引擎提供的指导方针

[http://googlewebmastercentral.blogspot.co.uk/2011/05/more-guidance-on-building-high-quality.html](http://googlewebmastercentral.blogspot.co.uk/2011/05/more-guidance-on-building-high-quality.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:53:53.850

嗯，不是真的。我能立即想到的唯一解决方案是使用 Node.JS 或 PHP 之类的语言来执行此服务器端。

以下是您在 PHP 中的操作方式：

```
$array = array("value 1", "value 2", "value 3", "value 4", "value 5");
echo array_rand($array, 1); 
```

# c# - Windows 应用商店应用标准样式与 Windows 应用商店应用字体指南

> ID：15768524
> 
> 赞同：2
> 
> 时间：2013-04-02T15:49:36.093
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-store-apps

我正在开发我的第一个 Windows 商店应用程序，但我遇到了样式问题。VS 2012 中的任何新的 Windows 商店应用程序项目都有一个 StandardStyles.xaml 资源字典。此资源字典包含所有文本块控件的许多样式，但此样式与[Windows Store App Guidelines For Fonts](http://msdn.microsoft.com/en-us/library/windows/apps/hh700394.aspx)中的样式不一致。例如 - HeaderTextStyle 是 StandardStyles.xaml 中页眉的样式，它有一个值 = 56 的 FontSize 设置器；- 在 Windows Store App Guidelines for Font 中，页眉的 FontSize 属性值等于 42

什么是正确的选择？

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:38:40.403

这是单位的问题。它是 42pt 字体，即 56 像素。

这是一篇可能有帮助的博客文章：[http ://w8isms.blogspot.com/2012/06/metro-fonts-points-pixels.html](http://w8isms.blogspot.com/2012/06/metro-fonts-points-pixels.html)

# r - coxph 对象中的脆弱性估计

> ID：15768526
> 
> 赞同：1
> 
> 时间：2013-04-02T15:49:49.577
> 
> 标签：r, survival-analysis, random-effects

如果使用 obj=coxph(... + frailty(id) )，则该对象还返回每个个体的 (log)frailty 估计值，可以使用 obj$frail 提取。

有谁知道这些估计是如何获得的？它们是经验贝叶斯估计吗？

谢谢！

西奥多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:20:43.727

`frailty`可以在页面中看到默认分布为`?frailty`“gamma”。如果您查看 frailty 函数（未隐藏），您会发现它只是将分布的名称粘贴到“frailty”上。并用于`get()`检索正确的功能。因此，请查看`frailty.gamma`（也未隐藏）以找到您问题的答案。再次查看帮助页面，您可以看到我应该能够在不查看代码的情况下弄清楚所有这些，因为它就在页面的顶部。但是 R 有很多获取知识的途径。（估计是 ML，而不是“经验贝叶斯”。）

帮助页面向我建议，作者 (Therneau) 希望您咨询 Therneau 和 Grambsch，以获取阅读代码时不明显的更多细节。如果您正在认真研究 R 中的生存模型，那么这是一本非常有用的书。这对于理解“生存”包的基础非常清晰和有帮助。

# magento - Magento 翻译不起作用

> ID：15768531
> 
> 赞同：0
> 
> 时间：2013-04-02T15:50:10.613
> 
> 标签：magento, magento-1.7

我有一个很奇怪的问题。我发现我的 Magento 翻译的某些部分无法正常工作。我在正确的文件夹下有 .csv 翻译文件，并且我已经为我的语言翻译了所有字段。

我看到商店 90% 的内容都已翻译，但有些部分无法正常工作。在示例中，大多数结帐过程都被翻译，但句子“优惠券无效”不生效。

以前有人遇到过这个问题吗？有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:07:40.787

与此有关的几件事...首先，众所周知，内联翻译在翻译 100% 的内容时存在问题。还要确保您尝试使用 CSV 翻译的内容不存在内联翻译。确保`Configuration > Cache Management`在管理后端刷新翻译缓存（随后，如果您使用块缓存或整页缓存，也请刷新它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:00:57.587

翻译使用以下内容： 1\. 模块名称和语言来决定使用哪个 .csv 文件和文件夹。

1.  如其他帖子中所述，翻译可能来自缓存块或 FPC。

2.  Transalation 字符串与 csv 中的字符串匹配，字符串中的任何差异都可能导致值不显示。

建议的解决方案：确保正在生成的字符串是哪个块或 .phtml 并检查其模块 xml 文件是否有类似的内容，因为这会告诉 Magento 使用哪个模块转换文件。

还检查模块 xml 文件中的翻译节点。与此类似的东西

```
<translate>
            <modules>
                <Phoenix_Moneybookers>
                    <files>
                        <default>Phoenix_Moneybookers.csv</default>
                    </files>
                </Phoenix_Moneybookers>
            </modules>
</translate> 
```

# c - 为什么我从不同的 skein hash API 得到不同的结果？

> ID：15768536
> 
> 赞同：2
> 
> 时间：2013-04-02T15:50:15.873
> 
> 标签：c, cryptography, skein

我试过几个。Python的pyskein；我在某处网上找到的 javascript 绞纱计算器；用于 xkcd 的愚人节漫画的绞纱计算器对于给定的输入都给出相同的输出。

[但是当我在这里](http://www.skein-hash.info/downloads)下载参考 C 源代码的 1.3 版时，我得到了不同的结果。最糟糕的是，我从 C API 获得的结果与源代码附带的“已知答案测试”示例完全匹配，所以我认为我使用它是正确的。

我的 C 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include "SHA3api_ref.h"

int main(int argc, const char * argv[])
{
    const int BITS = 256; // length of hash in bits
    const int LENGTH = 32; // length of data in bits
    BitSequence *hashval = calloc(BITS/8, 1);
    const BitSequence content[] = {0xC1, 0xEC, 0xFD, 0xFC};

    Hash(BITS, content, LENGTH, hashval);

    for (int i = 0; i < BITS/8; i++) {
        printf("%02X", hashval[i]);
    }
    return 0;
} 
```

结果十六进制：2638B1711F1346D08BF02B5D1A575CD924140A608512AF5B8E4475632599A896

相同数据上相同哈希的 Python 代码：

```
import skein
print( skein.skein256(bytes([0xC1, 0xEC, 0xFD, 0xFC])).hexdigest() ) 
```

结果十六进制：07e785ce898fa5cfa22e15294481717935923985ea90f67fc65cb5b3cb718190

`KAT_MCT/ShortMsgKAT_256.txt`请注意，根据代码随附的文件，C 答案是预期的答案。但是 pyskein 给出的结果似乎其他所有人都同意是正确的。我错过了什么？

# jquery - 如何使用 jquery 从表单中删除空输入字段以使用序列化？

> ID：15768538
> 
> 赞同：0
> 
> 时间：2013-04-02T15:50:24.907
> 
> 标签：jquery, forms, serialization, input

```
$('#mybutton').click(function(){
var form = $(this).parents('form:first');
var values = form.serialize();

//do some ajax calls
}) 
```

现在我想做这样的事情

```
$("#myForm :input[value]").serialize() on the parent form 
```

但我找不到办法做到这一点。我猜我必须使用 .find()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:58:35.013

不确定我明白了，但上下文选择器是 的快捷方式`find()`，`this.form`应该是父表单？

```
$(":input[value!='']", this.form).serialize() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:08:52.287

你会做

```
var values = $(this).parents('form:first').find(":input[value][value!='']").serialize(); 
```

或者在你的第二种情况下，

```
var values = $("#myForm :input[value][value!='']").serialize(); 
```

有关更多详细信息，请参阅相关问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:43:32.910

我不知道问题是什么但是

```
$(":input[value!='']", this.form).serialize() 
```

对我不起作用，我不确定它的作用，因为它似乎只过滤默认值我花了太多时间让它工作并最终手动过滤输入

```
var data={};
var formData = form.serializeArray();
$.each(formData, function (index, value) {
    var data_name = formData[index].name;
    var data_value = formData[index].value;
    if (data_value !== "") {
        data[data_name] = data_value;
    }
}); 
```

# ruby-on-rails - Ruby on rails：需要帮助将来自两个不同循环和两个不同部分的视图格式化为一个视图

> ID：15768542
> 
> 赞同：0
> 
> 时间：2013-04-02T15:50:44.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

以下是我在两个部分中的两个循环

**循环 1 和部分 1**

```
<%@loop1.map do |p| %> 
<li>
    <%= image_tag p.product.image.url, :size=>"400x250"%>
    <br \>
    <p><%=p.product.text%></p>
    <div class="pull-right">From: <u><%=p.product.user%></u></div>
    <%end%>
</li>
<%end%> 
```

**循环 2 和部分 2**

```
<%@loop2.map do |p| %> 
<li>
    <%= image_tag p.product2.image.url, :size=>"400x250"%>
    <br \>
    <p><%=p.product2.text%></p>
    <div class="pull-right">From: <u><%=p.product2.user%></u></div>
    <%end%>
</li>
<%end%> 
```

现在，由于我在 index.html.erb 文件上使用 ajax，我将下面的两个 div 替换为上面呈现的数据

```
<div class="loop1_results"></div>
<div class="loop2_results"></div> 
```

所以现在发生的事情是`set of loop1 results`先来后到`set of loop2 results`。我想要做的是交替显示的顺序。所以它会显示 loop1 块，然后是 loop2 块，依此类推。

我该怎么做 ？

任何建议或帮助表示赞赏。如果这可以通过一个部分来完成，我该怎么做？

**更新： Loop1 和 loop2 是数组，大小不同。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:28:53.557

如果您使用 Ajax，您可能有一个 .js.erb（或带有 Coffee）；在 Javascript 文件中，您可以选择加载数据的位置，例如，您可能有：

```
$(".loop1_results").html("<%= render :partial => @partial1 %>");
$(".loop2_results").html("<%= render :partial => @partial2 %>"); 
```

在动作中，您可以使用“随机”功能选择名称保存`@partial1`在`@partial2`

还！我忘了你有不同的属性，你可以传递额外的变量来指定你需要哪个变量，或者你可以在集合之间创建通用方法来获取数据

**更新**

psharma 你有以下代码：

```
$("div. loop1_results").append("<%= escape_javascript (render :partial => 'loop1') %>");
$("div. loop1_results").append("<%= escape_javascript (render :partial => 'loop2') %>"); 
```

现在，代替渲染“loop1”和“loop2”，您将使用我之前展示的变量@partial1 和@partial2；此变量将包含“loop1”和“loop2”，但您保存在这些变量中的值将由“随机”函数选择，例如（这是一个虚拟示例，请更好地理解这个）：

```
if (rand()*10).to_i%2 == 0
   @partial1 = 'loop1'
   @partial2 = 'loop2'
else
   @partial1 = 'loop2'
   @partial2 = 'loop1'
end 
```

更新#2

psharma 我想我理解你，我认为最好的方法是将两个集合统一为一个集合，并且只有一个部分。你说这两个集合都来自不同的表（模型），所以为了只有一个部分你可以做的是创建一个`get_product`在模型内部调用的方法`p`，在这里选择如果你得到`product1`or `product2`。

现在，您可以统一这两个集合，但不能简单地做`@loop1 + @loop2`; 你可以做的是这样的（我还没有测试过，也请让这个更好，呵呵）：

```
@data = []
total = @loop1.count + @loop2.count - 1
for i in 0..total
  if (i%2 == 0 || @loop2.empty?) && !@loop1.empty?
      @data << @loop1.pop
  elsif !@loop2.empty?
      @data << @loop2.pop 
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:34:29.833

假设`@loop1`和`@loop2`大小相同，您可以使用以下代码解决给定问题：

```
<% (0..@loop1.size - 1).each do |i| %>

<% p = @loop1[i] %>
<li>
    <%= image_tag p.product.image.url, :size=>"400x250"%>
    <br \>
    <p><%=p.product.text%></p>
    <div class="pull-right">From: <u><%=p.product.user%></u></div>
    <%end%>
</li>

<% p = @loop2[i] %>
<li>
    <%= image_tag p.product2.image.url, :size=>"400x250"%>
    <br \>
    <p><%=p.product2.text%></p>
    <div class="pull-right">From: <u><%=p.product2.user%></u></div>
    <%end%>
</li>

<%end%> 
```

在不了解您的数据结构的情况下，我无法为您提供更清洁的解决方案。

# windows-services - 您可以从 .Net 应用程序中安装 NserviceBus Windows 服务吗？

> ID：15768543
> 
> 赞同：1
> 
> 时间：2013-04-02T15:50:46.190
> 
> 标签：windows-services, nservicebus

现在我们使用一个看起来像这样的 .bat 文件安装我们的 NserviceBus：

NServiceBus.Host.exe /install /serviceName:"Cool Service" /displayName:"Cool Service Name" /description:"Cool Servcie Desc" /username:"Skroob" /password:"1234" NServiceBus.Production pause

我想知道是否可以使用 .Net 应用程序安装该服务。我查看了 TopShelf 和 ServiceController 命名空间，但我似乎无法弄清楚如何使其工作。

# matlab - MATLAB：将 uipanel 的内容打印到 PNG 图像

> ID：15768545
> 
> 赞同：2
> 
> 时间：2013-04-02T15:50:47.637
> 
> 标签：matlab, matlab-figure

我不知道如何在 MATLAB 中完成以下操作。我有一个看起来像这样的图：

![在此处输入图像描述](https://i.stack.imgur.com/aUBIg.png)

* * *

在图中，我有一个带有许多子图的面板和一个允许我查看面板的一部分的滚动条。

我想将面板的**全部**内容保存到 PNG 图像文件（不仅仅是可见部分），即我想要一个高矩形文件，并且不需要滚动。

生成图的代码如下：

```
function draw(obj)
       figure;
       panel1 = uipanel('Parent',1);
       panel2 = uipanel('Parent',panel1);
       panelheight = obj.nIterations / 2;
       set(panel1,'Position',[0 0 0.97 1]);
       set(panel2,'Position',[0 1-panelheight 1 panelheight]); %%
       nPlot = 1;
       for i=1:obj.nIterations
            models = obj.iterations{i};
            for nModel=1:length(models)
                subplot(obj.nIterations,length(models)*2,nPlot);
                nPlot = nPlot + 1;
                drawTransitions(models{nModel});
                set(gca,'Parent',panel2);
                subplot(obj.nIterations,length(models)*2,nPlot);
                nPlot = nPlot + 1;
                drawRewards(models{nModel});
                set(gca,'Parent',panel2);
            end
       end
       s = uicontrol('Style','Slider','Parent',1,...
        'Units','normalized','Position',[0.97 0 0.03 1],...
        'Value',1,'Callback',{@slider_callback1,panel2,panelheight});
end 
```

我尝试了以下方法，但没有成功。

1.  该`saveas`功能可以保存整个图形，而不仅仅是面板。此外，它会剪辑面板的不可见部分。
2.  `export_fig(panel2.'file.png')`只给出一个纯灰色图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T19:37:49.360

*   您可以摆脱 ui 元素，只需使用所有子图制作一个图形，然后使用 eg 导出该图形`print -dpng ...`。

*   `saveas`将句柄作为第一个参数。也许这不必是图形或模型句柄，但可以是对面板内容的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T05:48:13.890

为什么不滚动面板并抓取框架并将它们连接在一起？这是一些基本上可以做到这一点的代码。我会发布图片，但我想我没有足够的积分。您可能需要摆弄滚动，并且可能使滑块不可见，但它可以工作。

```
function printPanel(pnl,filename)

fig  = figure(ancestor(pnl,'figure'));

pnl_units = get(pnl,'units');
fig_units = get(fig,'units');

set(pnl,'units','pixels')
set(fig,'units','pixels')

pnl_rect = getpixelposition(pnl);
fig_rect = getpixelposition(fig);

pnl_height = pnl_rect(4);
fig_height = fig_rect(4);

pnl_rect(2) = -pnl_height;
set(pnl,'position',pnl_rect)

N = ceil(pnl_height/fig_height);

CDATA = cell(N,1);

for i = 1:N
    F = getframe(fig);
    CDATA{i} = F.cdata;
    pnl_rect(2) = pnl_rect(2)+fig_height;
    set(pnl,'position',pnl_rect)
    drawnow
end

set(pnl,'units',pnl_units)
set(fig,'units',fig_units)

imwrite(cat(1,CDATA{:}),filename)
end 
```

# objective-c - 如何在 Objective-c 中获取当前颜色配置文件的文件名（icc 文件名）

> ID：15768549
> 
> 赞同：2
> 
> 时间：2013-04-02T15:50:54.927
> 
> 标签：objective-c, opengl, color-profile

我想知道给定屏幕使用什么颜色配置文件来保存记录。
基本上我在混合的 Objective-C/cocoa 和 C 应用程序中使用 MacOSX 上的 OpenGL，并渲染一些显示在投影仪、CRT 或 LCD 上的几何形状，并且由于校准非常重要，我需要记录什么颜色配置文件每次都在使用，

获取当前配置文件名称的任何方式，无论是使用 Objective-c 框架，还是使用 OpenGL 或任何其他方式，shell 脚本，苹果脚本......

# c - 如何将字符串化二进制（“1”和“0”的字符串）转换为相应的字符字符串

> ID：15768554
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:51:18.903
> 
> 标签：c, string, binary, arduino, ascii

给定一个字符串化的二进制表示，我想将它转换回真正的二进制，它将被视为字符。例如，字符串`01000001 01000010 01000011 01000001`应转换为“ABCA”，因为 'A' 的 ASCII 为 65，即二进制`01000001`，依此类推。

反方向转换的函数如下：

```
String getBinary(String str) {
    String message = str;
    int length = message.length();
    String binaryNumber = "";

    for(int i = 0; i <= length; i++) {
        char c = message.charAt(i);
        binaryNumber = binaryNumber + String(c, BIN) + " ";
    }

    return binaryNumber;
} 
```

我从 C++、C 和 Java 中尝试了很多东西（并将其转换为“Arduino 代码”），但似乎没有任何效果。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:43:11.953

我认为这应该可行，但老实说，我还没有测试过：

```
String debinaryStringify(String source) {
    String result = "";
    int idxStart = 0;
    do {
        char val = 0;
        for (int i=0; i<8; i++) {
            val += ((source.charAt(idxStart+i) == '1') << (7-i)); // Trick: Assignment of an evaluation result
        }
        result.concat(val);
        idxStart = source.indexOf(' ') + 1;
    } while ( (idxStart > 0) && (idxStart < source.length() - 7) );
    return result;
} 
```

# sql - 必须在存储过程中声明标量变量“@bit”作为输出参数

> ID：15768555
> 
> 赞同：2
> 
> 时间：2013-04-02T15:51:20.410
> 
> 标签：sql, sql-server, database, tsql

我有这个过程，但是当它完美运行时，没有两个 if 设置输出参数@bit。当我尝试执行 proc p3 时，出现以下错误

`Must declare the scalar variable "@bit".`

这是代码

```
create proc p3 @codP int, @codM int, @dela datetime, @panala datetime, @pret smallint, @bit bit output
as
begin
    declare @val smallint
    set @val = (select COUNT(*)
                from OferteSpeciale as OS
                where OS.codP = @codP and OS.codM = @codM and 
                        ((@panala >= OS.dela and @panala <= OS.panala)
                        or (@dela >= OS.dela and @dela <= OS.panala) or
                        (@dela <= OS.dela and @panala >= OS.panala)))
    print @val
    if (@val = 0)
        begin
            insert into OferteSpeciale (codP,codM,dela,panala,pret) values (@codP,@codM,@dela,@panala,@pret)
            declare @others smallint
            set @others = (select COUNT(*)
                         from Cataloage as c, OferteSpeciale as os
                         where ((c.codM = @codM and c.codP = @codP and c.pret < @pret) or
                            (os.codM = @codM and os.codP = @codP and os.pret < @pret)))
            if (@others > 0)
              set @bit = 0
            else
              set @bit = 1
        end
    else
      RAISERROR 50001 'There is already a special offer for that product, in that shop, between that dates'
end
declare @bit bit
exec p3 1, 3, '2013-04-15', '2013-04-15', 25, @bit output 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:58:42.757

就像一个快速的答案一样，在声明存储的过程后，您会丢失一个“GO”，如果我按照您提供的方式尝试运行它，我会得到一个不同的错误，如果我添加一个 GO 以将声明与执行分开，该错误就会消失。

```
end
GO
declare @bit bit
exec p3 1, 3, '2013-04-15', '2013-04-15', 25, @bit output 
```

显然我必须删除存储过程的内容，因为我的数据库中没有这些对象，但问题似乎与“@Bit”有关

# java - 从另一个线程访问 servlet 范围的 bean

> ID：15768556
> 
> 赞同：0
> 
> 时间：2013-04-02T15:51:30.217
> 
> 标签：java, spring, servlets, thread-safety

我正在使用“[访问线程内的范围代理bean](https://stackoverflow.com/questions/1528444/accessing-scoped-proxy-beans-within-threads-of) ”答案中的方法。但是我看到涉及`RequestAttributes`对象的罕见死锁。死锁的主要原因是`synchronized (this.sessionAttributesToUpdate)`对象中的语句和servlet session hash-map之间。通常为每个请求创建对象的实例，因此它们不会发生冲突，但是如果我将对象传递给另一个线程以使用会话 bean，则会使用相同的对象，并且有时会导致死锁。

如果当前的 http 请求没有完成，而另一个线程开始使用通过 传递的会话 bean，则会发生死锁`RequestContextHolder.setRequestAttributes`。

我认为这个人提到了同样的问题，但他的问题没有得到解答：[Session scoped bean遇到 deadlock](http://forum.springsource.org/showthread.php?115248-Session-scoped-bean-encountering-deadlock)。

那么，任何想法如何避免僵局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:00:20.040

考虑到目标是在用户浏览页面时在后台计算某些内容，这是一个提供替代解决方案的答案。

[可能性1：创建一个带有@Async（ http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html) ）注释的处理方法的服务bean，它返回一个Future中的计算结果目的。将 Future 对象存储在会话中。如果任务完成，则通过 Future 对象访问后续请求中的结果。如果要在任务完成之前销毁会话，请通过 Future.cancel 取消任务。

可能性 2：看看 Spring 3.2 和 Servlet 3.0 异步处理的新特性是否可以帮助您： [http ://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html #mvc-ann-async](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-async)

可能性 3：模拟一个任务队列。创建一个单例服务，可以将对象放入像 ConcurrentMap 这样的结构中，其中键是一些作业 ID（您可以将键存储到会话中）并评估后台处理的结果。然后后台线程将在那里存储对象（这可能并不比直接访问会话好多少，但您可以确保它是线程安全的）。

# c++ - HashTable（搜索功能）

> ID：15768561
> 
> 赞同：-2
> 
> 时间：2013-04-02T15:51:43.290
> 
> 标签：c++

```
#include <iostream>
#include <cstring>
#include <vector>
#include "list.cpp"
#include <cmath>

using namespace std;

struct HashEntry{
   int key;
   List<string> list;
   HashEntry(int k)
   {        
         key=k;
   } 
}; 

class Hash{
  private:
         HashEntry *Table[100];
         int a;
  public:
         Hash(int A);
         void insert(string word);
         void Lookup(string word);
};    

Hash::Hash(int A)
{
    a=A;
}         

void Hash::insert(string word)
{
   int c=0;
   for (int i=0;i<word.size();i++)
   {                                 
       int b=(int)((a^i)*(word[i]));
       c+=b;
   }
   c%=100;
   List<string> list;
   if (Table[c-1]==NULL)     //if the respective bucket doesnot have any string
   Table[c-1]=new HashEntry(c-1);

   Table[c-1]->list.insertAtTail(word);
}                  

void Hash::Lookup(string word)
{
   int c=0;
   for (int i=0;i<word.size();i++)
   {                                 
     int b=(int)((a^i)*(word[i]));
     c+=b;
   }
   cout<<"one"<<endl;
   c%=100;
   Table[c-1]->list.searchFor(word);
   cout<<"two"<<endl;
} 
```

我正在使用单独的链接制作一个哈希表。我的哈希函数正在使用一个常数“a”制作一个多项式方程，其功率随着单词中字母的索引而增加。（a^0xb+a^1xb+a^ 2xb+...) ，其中 b 是正在散列的单词中的一个字母，然后我取 mod(100) 的最终答案。我面临的问题是查找函数。当我测试查找函数时，searchFor () 作为部分链接列表类的一部分的函数不起作用，尽管它本身可以正常工作，并且在我用来调试的 cout<<"one" 之后出现分段错误。我很抱歉打扰，但我只是无法理解这里的问题。链表类文件在下面。我只是粘贴我遇到问题的函数

```
#ifndef __LIST_H
#define __LIST_H
#include <cstdlib>
#include <iostream>
#include <vector>
using namespace std;
/* This class just holds a single data item. */
template <class T>
struct ListItem
{
   vector<string> words;
   T value;
   ListItem<T> *next;
   ListItem<T> *prev;

   ListItem(T theVal)
   {
       this->value = theVal;
       this->next = NULL;
       this->prev = NULL;
   }
};

/* This is the generic List class */
template <class T>
class List
 {
 ListItem<T> *head;

 public:
  // Constructor
  List();

  // Copy Constructor
  List(const List<T>& otherList);

  // Destructor
  ~List();

  // Insertion Functions
  void insertAtHead(T item);
  void insertAtTail(T item);
  void insertAfter(T toInsert, T afterWhat);
  void insertSorted(T item);
  void printList();
  // Lookup Functions
  ListItem<T> *getHead();
  ListItem<T> *getTail();
  void *searchFor(T item);

  // Deletion Functions
  void deleteElement(T item);
  void deleteHead();
  void deleteTail();

  // Utility Functions
  int length();
};

#endif

template <class T>
void List<T>::searchFor(T item)
{    
 ListItem<T> *temp=head;
 if (temp!=NULL)
 {
    while (temp->next!=NULL)
    {
         T sample=temp->value;
         if (sample==item)
         {      
             cout<<"String found";   
             return;
         }
         temp=temp->next;
    }
    T s=temp->value;
    if (s==item)
    {
       cout<<"String found";        
       return;
    }
  }                   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:28:08.583

除了我上面的评论，它导致您找到您遇到的错误之一，我将添加以下内容：

你崩溃的原因是你的`Hash`班级对哈希表管理不善。首先，分配一个包含 100 个`HashEntry`指针的数组：

```
HashEntry *Table[100]; 
```

请注意，您从未将这些指针设置为任何东西 - 所以它们指向谁知道什么。也许他们会靠运气指向 NULL，但这种可能性微乎其微——你赢得彩票的可能性要大得多。所以，你正在访问一些随机内存——这很**糟糕**。

解决方案是将每个条目设置为`NULL`在构造函数中显式使用循环。您还需要一个析构函数来释放任何已分配的条目，这样您就可以`delete`做到并且不会泄漏内存，因为泄漏是不好的。

但一个有趣的问题是，它为什么会这样呢？为什么不简单地声明这样的存储桶：

```
HashEntry Table[100]; 
```

这样，您的所有存储桶都被分配为`Hash`对象的一部分，您不必担心动态分配和释放存储桶、检查指针`NULL`等。

这样做的一个问题是您的`HashEntry`构造函数需要一个`int`参数。目前还不清楚为什么这个论点是必要的。我认为您不需要它，您可以将其删除。

这一更改将大大简化您的代码并消除三个错误和崩溃*。*

# r - CLUTO 文档术语矩阵到 tm DocumentTermMatrix

> ID：15768562
> 
> 赞同：0
> 
> 时间：2013-04-02T14:55:12.477
> 
> 标签：r, text-mining, tm, cluto

我有一个 cluto 格式的文档术语矩阵：

```
#Document #Term #TotalItem
term-x weight-x term-y weight-y (for only nonzeros terms, a row per document) 
```

我想从这个文件创建 DocumentTermMatrix(tm package) 而不是语料库，这可能吗？

```
Cluto File:
2 3 3
1 3 3 4
2 8

Row File:
car
plane

Column File:
x
y
z 
```

解决方案：

```
dtm = as.DocumentTermMatrix(read_stm_CLUTO(file), weightTf);
rows <- scan("rows.txt", what="", sep="\n");
columns <- scan("columns.txt", what="", sep="\n");

dtm$dimnames = list(rows,columns); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:38:40.937

这应该这样做：

```
require(slam)
as.DocumentTermMatrix(read_stm_CLUTO(file), weightTf) 
```

如果您可以链接到您的 CLUTO 文件或将其摘录添加到您的 Q 中，我们可以查看行名和列名。

帽子提示：[https ://r-forge.r-project.org/scm/viewvc.php/pkg/R/foreign.R?root=tm&view=diff&r1=1127&r2=1127&diff_format=s](https://r-forge.r-project.org/scm/viewvc.php/pkg/R/foreign.R?root=tm&view=diff&r1=1127&r2=1127&diff_format=s)

# jsf-2 - 试图从 JSF 应用程序中的 JSTL 库中查找 c:out 标记

> ID：15768567
> 
> 赞同：4
> 
> 时间：2013-04-02T15:51:54.580
> 
> 标签：jsf-2, jstl, el

我正在使用 JSTL 构建一个动态表，并希望利用 c:out 标签来帮助构建一些表达式，但我无法在其他 JSTL 核心标签中找到该标签。

我正在使用以下命名空间：

```
xmlns:c="http://java.sun.com/jsp/jstl/core" 
```

并确保我的 web.xml 文件设置为使用此处找到的 2.5 规范 [https://stackoverflow.com/tags/jstl/info](https://stackoverflow.com/tags/jstl/info)

但仍然只能找到 catch、choose、forEach、if、else、set 和 when。

此外，我也尝试导入 JSTL 1.2.1.jar 库，但没有成功。

那么，我应该在 JSF2 中使用 c:out 标签吗？如果是这样，我错过了哪些步骤？

问候，

麦克风

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T15:54:31.523

在[JSF2 Facelets](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)`<c:out>`中确实不可用。无论如何，您在 JSF2 Facelets 中都不需要它。只需使用 JSF 等效项，`<h:outputText>`

```
<h:outputText value="#{bean.text}" /> 
```

甚至更好，只需将 EL 放在模板文本中，

```
#{bean.text} 
```

如果这是您唯一关心的问题，它将已经被隐式 XML 转义（并且在旧 JSP2 时代实际上是使用的唯一原因`<c:out>`；在 JSP1 中，为了在模板文本中将 bean 属性显示为 EL，该标记是强制​​性的。 JSP1 中支持）。与那些标准的`<c:out>`JSF2 Facelets 方式相比，它没有提供额外的优势，这就是为什么从 Facelets 的 JSTL 子集中删除它的原因。

### 也可以看看：

*   [是否建议对所有内容都使用 h:outputText ？](https://stackoverflow.com/questions/5539894/is-it-suggested-to-use-houtputtext-for-everything/5540859#5540859)

# java - 捕获 Hibernate OptimisticLockException 失败

> ID：15768568
> 
> 赞同：0
> 
> 时间：2013-04-02T15:52:01.600
> 
> 标签：java, hibernate, jakarta-ee, jpa, ejb

我将 EJB 3 与 Hibernate 一起使用。我有一个无状态会话 Bean。该 bean 中有一个方法 deleteItem。

当客户端调用 deleteItem 方法时，删除发生没有任何问题。但是，如果我尝试使用 for 循环调用 deleteItem 方法并将该循环的限制设置为 5-10 次，那么有时删除会失败。但不总是。

删除操作实际上是从 2 个表中删除数据。子表和父表。每个 Delete 都是通过执行刷新操作来提交的。

正如我已经提到的，如果我一个一个地执行删除，那么就不会发生问题，只有当我尝试同时运行它时才会发生。我得到的例外如下

```
Caused by: java.sql.BatchUpdateException: Cannot delete or update a parent row: a foreign key
constraint fails (`functionTest/MotherTable`, CONSTRAINT `FKBC6CB0E6D5545EFD` FOREIGN KEY
(`MotherTable_FieldId`) REFERENCES `ChildTable` (`childTableId`)) 
```

这里没有办法发生并发删除操作。并且项目删除与其他项目删除操作无关。因此，如果仍然发生并发，同时删除多个项目不会有问题。

所以，我做出了一个决定——“可能是客户端在多线程中访问同一个 Bean 实例”。在这种情况下，两个线程将相同的实体管理器状态保持在不同的状态。当另一个尚未完成子项的删除时，一个尝试刷新持久性上下文。此时发生了 BatchUpdateException。- 这是我的观察。我不是 100% 确定的。

所以为了克服这种情况，我选择了乐观锁定。我在母表中创建了版本列。现在我得到了 OptimisticLockException 。但我无法捕捉到异常。下面是我用来捕获 OptimisticLockException 的代码。

```
private boolean deleteItem(Item itemId) {

           Item item= getItem(itemId);
       removeChildTableData(item);
       mEm.remove(item);

    try
            {
       mEm.flush();
    }
    catch (OptimisticLockException  e) 
            {
         try {
            Thread.sleep(1000);
             } 
                     catch (InterruptedException e1) {
            e1.printStackTrace();
         }
       deleteItem(itemId);

        }
    catch(Exception ex)
                 {

        if (ex.getCause() instanceof OptimisticLockException) 
                     {
                       try {
                            Thread.sleep(1000);
                           } catch (InterruptedException x) {
                           }
                     deleteItem(itemId);

                     }

      }

    return true;
   } 
```

所以我的目标是捕获 OptimisticLockException 并再次重新执行删除操作。我检查了异常类名称，它是 EntityNotFound。但我看到在堆栈跟踪中我得到了 OptimisticLockException 和 StaleObjectStateException。

那么，有人可以指导我如何捕捉这个 OptimisticLockException 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:23:04.527

你不应该。对JB所说的也+1。这个例外试图告诉你一些事情。您正在尝试删除外键关系的父行，而孩子仍在引用它。什么是父母和孩子？好：

```
a foreign key constraint fails (`functionTest/MotherTable`, CONSTRAINT `FKBC6CB0E6D5545EFD` FOREIGN KEY (`MotherTable_FieldId`) REFERENCES `ChildTable` (`childTableId`)) 
```

所以 MotherTable.MotherTableFieldId 引用 ChildTable.childTableId。你试图删除一个孩子，而它的母亲仍然指向它。那是行不通的。

不过，我很好奇你为什么会有这种关系。您的模型看起来像这样：

```
@Entity
@Table(name="MotherTable")
class Mother {
  @Id
  Long id;
  @ManyToOne
  @JoinColumn(name="MotherTable_FieldId")
  Child child;
}

@Entity
@Table(name="ChildTable"
class Child {
  @Id
  @Column(name="childTableId")
  Long id; 
  @OneToMany(mappedBy="child")
  Set<Mother> mothers;
} 
```

这很奇怪，因为现在你的孩子可以有很多妈妈。也许你想要这个：

```
@Entity
class Mother {
  @Id
  Long id;
  @OneToMany(mappedBy="mother")
  Set<Child> children;
}

@Entity
class Child {
  @Id
  Long id; 
  @ManyToOne
  @JoinColumn(name="mother_id")
  Mother mother;
} 
```

在这种情况下，您的 DAO 方法将如下所示：

```
@Transactional
public void deleteFamily(Mother mother) {
  for (Child c: mother.getChildren()) {
    em.remove(c);
  }
  em.remove(mother);
} 
```

您还可以使用级联：

```
@Entity
class Mother {
  @Id
  Long id;
  @OneToMany(mappedBy="mother", cascading=CascadeType.ALL)
  Set<Child> children;
} 
```

这将 DAO 方法简化为：

```
@Transactional
public void deleteFamily(Mother mother) {
  em.remove(mother);
} 
```

乃至：

```
@Entity
class Mother {
  @Id
  Long id;
  @OneToMany(mappedBy="mother", cascading=CascadeType.ALL, orphanRemoval=true)
  Set<Child> children;
} 
```

现在你不必`em.remove()`孩子：

```
@Transactional
public void deleteChild(Child child) {
  Mother m = child.getMother();
  m.getChildren().remove(child);
} 
```

此外，您不应该尝试使用 提交事务`em.flush()`，这在几个方面是错误的：

1.  事务提交与`em.getTransaction().commit()`
2.  想想你想要做什么：deleteFamily 应该在一个事务中发生吗？是的？然后以这种方式实现它。删除子项后不要尝试进行部分提交。
3.  让其他人为您管理交易会更方便。只需将方法标记为 @Transactional 并让您的 JTA 框架处理细节。
4.  无论如何，DAO 方法甚至都不应该尝试进行交易。想一想：您可能希望稍后实现一个使用多种 DAO 方法的服务。如果他们每个人都试图在单独的事务中提交自己，则 toto 中的服务调用不能是事务。那很糟。因此，如果您想重用您的 DAO 方法，请将事务性内容拉到它们上方的单独层中。

# forms - Google Script - 根据回复将新提交内容移至另一张工作表

> ID：15768569
> 
> 赞同：3
> 
> 时间：2013-04-02T15:52:01.840
> 
> 标签：forms, triggers, google-apps-script, google-sheets, onsubmit

我正在尝试创建一个脚本，该脚本将采用新的表单响应并根据提交的信息将其移动到另一个工作表。例如，假设表单有两个答案选项 A、B。电子表格有三张表；表格回复，表格 A，表格 B。如果有人提交表格并选择 A，我需要将该新行从“表格回复”移动到“表格 A”。我发现别人的脚本正是这样做的，但使用了 OnEdit 函数。当提交新的表单响应时，我无法弄清楚如何修改此脚本以使其正常工作。

```
function onEdit(event) {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var s = event.source.getActiveSheet();
var r = event.source.getActiveRange();

if(s.getName() == "Form Responses" && r.getColumn() == 2 && r.getValue() == "A") {
var row = r.getRow();
var numColumns = s.getLastColumn();
var targetSheet = ss.getSheetByName("Sheet A");
var target = targetSheet.getRange(targetSheet.getLastRow() + 1, 1);
s.getRange(row, 1, 1, numColumns).moveTo(target);
s.deleteRow(row);
  }
} 
```

我使用了可安装的触发器并用 onFormSubmit 替换了 OnEdit 函数，但这不起作用。如果有人可以帮助我，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:52:02.820

我有一个收集表单提交的电子表格，然后有额外的表格根据答案过滤掉这些提交。所有这些都只是公式。这也能解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T23:59:48.287

在比较变量时尝试一些不那么广泛的东西，例如，提交提交的工作表是一个常量并且已经是地址。

```
function formSubmission() {
 var s = SpreadsheetApp.getActiveSheet();
 var data = range.getValues(); // range is a constant that always contains the submitted answers
 var numCol = range.getLastColumn();
 var row = s.getActiveRow;
 var targetinfo = s.getRange(row,(Yourcolumn#here).getValue);
    if(targetinfo() == "Desired Sheet Name") {
      var targetSheet = ss.getSheetByName("Sheet A");
      var targetrow = targetSheet.getLastrow()+1);
      var Targetcol = numCol();
      targetSheet.getRange(targetrow,1,1,Targetcol).setValues(data);
     }
  } 
```

我没有对此进行测试，但希望它有助于在我最近发现的开发人员指南中查找[事件对象](https://developers.google.com/apps-script/guides/triggers/events)，并且它澄清了很多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-15T17:42:47.410

可以通过以下方式设置触发器：[![在此处输入图像描述](https://i.stack.imgur.com/oX6wq.png)](https://i.stack.imgur.com/oX6wq.png) 然后设置它：[![在此处输入图像描述](https://i.stack.imgur.com/WYmyA.png)](https://i.stack.imgur.com/WYmyA.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T13:08:40.720

为了实现你想要的，你需要：

1.  创建一个函数`write_to_new_sheet`，每当新的响应到达表单时，我们将在触发器函数中使用该函数。此函数将表单响应作为事件对象`e`：

```
function write_to_new_sheet(e){
  let responses = e.response.getItemResponses()
  let new_row = get_new_response_data_as_row(responses)
  let sheet_to_write = SpreadsheetApp.openById('your spreadsheet id').getSheetByName('sheet A') // or 'sheet B', you can set this dynamically by checking the new_row, corresponding to the response as a gsheet row
  write_values_in_first_row(sheet_to_write, new_row)
} 
```

这是辅助功能`write_to_new_sheet`：

```
function get_new_response_data_as_row(responses){
  let new_row = []
  responses.forEach(response => {
     new_row.push(response.getResponse())
  })
  return new_row
} 
```

```
function write_values_in_first_row(sheet, new_row_values){
  let row_to_write_from = 2 // assuming you have a header
  let sheet_with_new_row = sheet.insertRowBefore(row_to_write_from)
  let number_of_rows = 1
  let number_of_columns = new_row_values.length
  let range = sheet_with_new_row.getRange(row_to_write_from, 1, number_of_rows, number_of_columns)
  let results =range.setValues([new_row_values])
  return new_row_values
} 
```

2.  设置一个可安装的触发器，该触发器在您向表单提交新响应时起作用：

```
function setup_write_to_new_sheet_on_form_submit(){
  ScriptApp.newTrigger('write_to_new_sheet')
  .forForm('your form id goes here')
  .onFormSubmit()
  .create();
} 
```

3.  运行上述函数**一次**，设置触发器。
4.  尝试在表单上提交新的回复，并检查您希望写入的表单中的更改。

# javascript - Magento 产品页面加载在底部而不是顶部

> ID：15768571
> 
> 赞同：0
> 
> 时间：2013-04-02T15:52:08.230
> 
> 标签：javascript, jquery, ajax, magento, magento-1.7

当产品页面加载到本网站[http://www.gmsuppliesltd.co.uk/](http://www.gmsuppliesltd.co.uk/)

他们似乎在底部加载，我似乎找不到问题，有人可以帮忙吗？

在任何产品页面上它加载在页面底部，而不是顶部，所以当你第一次点击产品页面时你看不到图片等

# javascript - 创建 Span 数组的函数总是返回 Undefined

> ID：15768573
> 
> 赞同：0
> 
> 时间：2013-04-02T15:52:12.007
> 
> 标签：javascript, android-webview

我有一个方法，它返回给定 id 模式的跨度数组。当我通过在函数末尾打印出数组的值进行测试时，确实创建了该数组，并且所有正确的元素似乎都在其中。

这是功能：

```
function getAllSpansForID(sectionID) {
    var foundAllSpans = false,
        i = 1,
        spanID,
        span,
        spanArray = new Array();

    /* Keep looking until we found all the selection spans.*/

    while (!foundAllSpans) {
        spanID = sectionID + "-" + i;
        span = document.getElementById(spanID);

        /* 
        If we didn't get a span we can assume there are no more to find. 
        We are done with this loop.
        */
        if (span == null) {
            foundAllSpans = true;
            console.log("Found all spans.");
        }

        /* 
        Else, add the span to the array we are going to return.
        */
        else {
            spanArray[i-1] = span;
            i++;
        }
    }

    console.log("returning spanArray.length: " + spanArray.length);
    for (i = 0; i < spanArray.length; i++) {
        console.log("spanArray[i].id: " + spanArray[i].id);
        console.log("spanArray[i].outerHTML: " + spanArray[i].outerHTML);
    }

    return spanArray;
} 
```

**我的问题是，每当我调用这个函数时，返回的值总是未定义的。**

这段代码：

```
var spansArray = getAllSpansForID(verseID),
length = spansArray.length; 
```

总是产生这个错误：

```
Uncaught ReferenceError: spansArrray is not defined 
```

由于范围界定问题，我在使用 returnign 数组的 SO 上发现了许多类似的问题，但没有一个与我的确切情况相匹配。我曾尝试更改此方法，包括使用`spanArray.push(span)`, 并`spanArray.push.apply(spanArray, span)`添加我的跨度，但无济于事。我没主意了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:44:07.690

在错误消息中，我可以发现`r`太多：

```
Uncaught ReferenceError: spansArrray is not defined
                               ^^^ 
```

似乎是另一个错字，不是在您在此处发布的代码中，而是在您执行的代码中……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:13:39.267

改成：

```
var spansArray = getAllSpansForID(verseID);
var length = spansArray.length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:23:36.040

***哦！***

正如您从我的错误消息中看到的那样，`spansArrray`(3 r's) 是未定义的。我定义了`spansArray`（2 r's）。我修好了，一切正常。只是一个错字......

我没有`length = spansArray.length;` 直接从代码中提取，而是直接写出来，所以这里发布的代码不会失败。

对不起大家。我同样感谢所有的帮助！！！

# date - 如何在 MS Word 字段中显示上个月？

> ID：15768576
> 
> 赞同：3
> 
> 时间：2013-04-02T15:52:23.447
> 
> 标签：date, ms-word, fieldcodes, word-field

我想了解如何在 Word 2003 文档中显示当前月份之前的月份名称。我一遍又一遍地尝试按照我在下面的链接上找到的说明进行操作，但无论我尝试什么，我都会遇到几个错误之一，一些关于我不理解的语法或图片切换的错误。我尝试过搜索，但我想我只是不知道如何将代码实际放入 MS Word。有人愿意帮助我从您的论坛中获取此代码并将其输入到我的文档中吗？

谢谢！

[如何在 Microsoft Word 字段中显示下个月？](https://stackoverflow.com/questions/3775872/how-do-i-display-the-next-month-is-an-ms-word-field)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T21:35:30.320

字段编码的问题在于存在许多与语言环境相关的依赖项。这可能是您无法在您提到的链接中提出建议的原因之一。另一个原因是那里的一个建议不可能奏效:-)

我建议您尝试在文档中插入以下嵌套字段，看看是否有效：

{ 报价 "2013-{ = { 日期 \@M } - 1 \#00;;'12' }-01" \@MMMM }

一些注意事项： - 使用 ctrl-F9 插入一对特殊的字段代码大括号 {}（您不能只在键盘上键入它们） - 您可以使用 alt 在“字段代码视图”和“字段结果视图”之间切换-F9。您可能需要在继续操作时执行此操作 - 这些字段不会自动更新。要确保结果是当前日期，请选择嵌套字段并单击 F9

要插入嵌套字段： - 单击 F9。你应该看到 { }

*   在大括号之间单击，然后输入 QUOTE "2013--01" \@MMMM

所以你看到 { QUOTE "2013--01" \@MMMM }

在两个“--”之间单击，然后再次单击 ctrl-F9，您会看到 { QUOTE "2013-{ }-01" \@MMMM }

点击新的 { } 并输入 = - 1 \#0;;'12'

所以你看到 { QUOTE "2013-{ = - 1 \#00;;'12' }-01" \@MMMM }

点击 '=' 并再次点击 ctrl-F9 这样你就会看到 { QUOTE "2013-{ = { } - 1 \#0;;'12' }-01" \@MMMM }

在新的 { } 之间单击并输入 DATE \@M

所以你会看到 { QUOTE "2013-{ = { DATE \@M } - 1 \#00;;'12' }-01" \@MMMM }

然后选择嵌套字段 clcik F9，并根据需要单击 alt-F9 以显示结果。

这种方法可能与您以前看到的不同，因为

*   它不使用嵌套的 IF 来生成正确的月份
*   它使用 YYYY-MM-DD 格式生成可用于提取月份名称的日期。这是因为使用诸如 DD/MM/YYYY 之类的格式取决于语言环境（即，如果日期格式为 DD/MM/YYYY，它们可能会起作用，但如果是 MM/DD/YYYY，则它们可能会起作用。据我所知，YYYY-MM- DD 是独立于语言环境的，或者是独立于语言环境的。

# openssl - Openssl 自签名证书使用时区 UTC 偏移量获取“有效日期”

> ID：15768578
> 
> 赞同：0
> 
> 时间：2013-04-02T15:52:26.413
> 
> 标签：openssl, ssl-certificate

我使用 openssl commad 创建了一个测试自签名证书： openssl req -x509 -days 365 -in xxx.csr -key xxx.key -out xxx.crt 证书的有效期为 365 天。但是在上午 10:04 执行此命令的时间（时区为 GMT+5.30）

现在，当我将此证书用作网络服务器 SSL 证书时，我收到错误消息“此网站提供的安全证书已过期或尚未生效”。

在证书中，它的“生效日期”是 3:34 pm 。似乎将时区 UTC 间隔添加到当前时间。

有什么线索吗？

# ios - 缺少 iOS Dist 证书的私钥

> ID：15768592
> 
> 赞同：3
> 
> 时间：2013-04-02T15:53:15.483
> 
> 标签：ios, app-store

我找到了很多关于这方面的信息，但没有什么能对我的情况有帮助。几周前我的硬盘丢失了。我已经购买并配置了一个新系统，但现在我必须在应用商店中放置一个新版本的应用。我重新下载了 3 个证书，包括分发证书和分发配置文件，但 XCode 报告我的分发配置文件无效（特别是“找不到有效的签名身份”）。

经过大量搜索和阅读，问题似乎是缺少私钥，但我不知道如何纠正。我确实有旧机器的最近（SuperDuper）备份，但打开旧的钥匙串访问应用程序只会显示我当前机器上的内容（或者看起来 - 我没有看到任何不同）。那将是我检索旧密钥的唯一窗口。同样打开 XCode 的旧副本并查看它的 Organizer。

如果我尝试撤销我现有的分发证书，我会收到警告，我所有现有的应用程序（所有应用程序都使用该证书签名）将停止运行。我绝对不想那样。

我在这里有什么选择吗？诚然，Apple 的证书和配置文件系统让我感到困惑，所以我希望有某种方法可以重新建立与我的分发密钥的联系或创建新证书，而无需完全清理已经存在的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:55:04.723

打开旧的钥匙串访问应用程序不起作用，因为它从运行它的计算加载所有数据。您需要做的是获取旧的 .keychain 文件并使用 Keychain Access 打开它。

在您的备份中，找到`/Users/USER_NAME/Library/Keychains/login.keychain`并制作一份副本。接下来，您需要将其重命名为其他名称，`oldlogin.keychain`以防止它与您的新登录钥匙串发生冲突。然后只需双击`oldlogin.keychain`打开它钥匙串访问。它可能会要求您输入密码以访问钥匙串，它应该是您丢失硬盘之前的登录密码。解锁后，您可以拖动任何您想要的内容`oldlogin`，`login`包括私钥。

# c# - 如何格式化存储过程以映射到 EF 对象和自定义数据

> ID：15768596
> 
> 赞同：2
> 
> 时间：2013-04-02T15:53:21.943
> 
> 标签：c#, sql, sql-server, entity-framework, tsql

如何将存储过程绑定到包含的对象

```
public class Info
{
   public string PupilFirstName // (just a string),
   public string PupilLastName // (just a string)
   public Teacher Teacher // (EF object)
} 
```

所以我的存储过程是：

```
select Teacher.*, Pupil.FirstName PupilFirstName, Pupil.LastName PupilLastName 
from Pupil
join Teacher on Teacher.Id = Pupil.TeacherId 
```

虽然它不起作用，但可能我需要更改存储过程，但我不知道如何。请帮忙。

* * *

更新：让我尝试更详细地解释一下：我希望存储过程将绑定在具有复杂类型和实体类型的行上，因此结果将是：字符串、字符串、域对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:27:17.473

EF 不支持绑定嵌套实体。它仅绑定单个实体级别。此外，如果您将`Info`其用作映射的复杂对象，则它不能包含对实体的引用 - 这也是不支持的，因为复杂对象可以用作实体的成员，反之亦然。

您需要展平您的`Info`（使其包含 的所有成员），并且您的存储过程必须返回与您的类`Teacher`中的属性同名的列。`Info`

# php - Javascript：递归 AJAX 回调和最大嵌套级别

> ID：15768598
> 
> 赞同：1
> 
> 时间：2013-04-02T15:53:28.560
> 
> 标签：php, javascript, ajax, recursion

我有理解问题，为什么我的代码可以正常工作:)

这是我的代码的一部分：

```
function updateForNextLecturer(current_id, all_lecturers, progressbar)
{
    $.getJSON(
        '/' + root + 'custom/ajax/update_timetable_lecturer.php?id=' + all_lecturers[current_id],
        function(data)
        {
            if (data.successfull == 0) {
                $.stickr({note: "Error occurred.", className: "classic error"});
                throw new Error("error");
            }

            else {
                percent = Math.round((current_id + 1) * 100.0 / all_lecturers.length);
                progressbar.progressbar({value: percent});

                if (current_id + 1 < all_lecturers.length)
                    updateForNextLecturer(current_id + 1, all_lecturers, progressbar);
                else 
                    $.stickr({note: "Success", className: "classic"});
            }
        }
    );
} 
```

此代码是更新所有讲师的时间表所必需的。请求是异步的，并且一个接一个地进行，因此网络服务器负载不重。

为了使请求一个接一个地进行，我需要使用递归回调（我想这是唯一的解决方案）。问题是 - 为什么它可以正常工作，难道没有像 PHP 那样的最大嵌套级别吗？在 PHP 中，您可能会收到以下错误

```
Fatal error: Maximum function nesting level of '100' reached, aborting! 
```

我用数千个请求测试了这个函数，所以嵌套级别大约是数千个，但没有发生错误。那是因为 JavaScript 中根本没有嵌套限制，还是因为我什么都不懂？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:02:06.197

它不是真正的递归。`updateForNextLecturer`之后会退出`$.getJSON`。请求完成后，您的匿名函数将被调用。这发生在处理所有事件的主循环中，包括匿名回调函数的执行。

因此，在给定时间最多`updateForNextLecturer`运行一个，并且根本没有嵌套函数调用，除了`$.getJSON`.

这就是异步 JavaScript 的强大之处。当他们准备好时，事情可能会发生。

## 奔跑的孩子类比

假设您有两个孩子，Ulec 和 Jason。你给两个任务：

*   Ulec 给了 Jason 一些他想查询的信息
*   杰森准备好后将信息告诉了乌莱克。

现在 Ulec 开始他的任务。他给了杰森他的工作，杰森跑了。Ulec 没有等待任何事情，Ulec 已经完成了他的工作，只是坐在那里，欣赏他的环境。他根本不工作。与此同时，Jason 获得了所有需要的信息，并将其与邮件一起发送回 Ulec。杰森也完成了他的工作。

过了一会儿，Ulec 收到邮件并给了 Jason 另一份工作，直到他不再为 Jason 提供另一份工作。

在这个例子中，Ulec 是`updateForNextLecturer`，而 Jason 是`$.getJSON`。邮件实际上是 ajax 请求成功后的一小段等待时间，即主循环中的事件处理。

这与递归调用有很大不同。在这种情况下，Ulec 会给自己一份工作，或者克隆自己给自己一份工作。但是克隆不会持续太久，记住他需要做的所有工作也不会起作用。

# php - 使用 pods 框架查找记录时如何在 where 参数中使用关系？

> ID：15768601
> 
> 赞同：0
> 
> 时间：2013-04-02T15:53:36.563
> 
> 标签：php, mysql, wordpress, podscms

我的问题与 wordpress 网站的 pods 框架插件有关。我正在使用 pods 2.2 版，并且在 find() 函数中的 where 参数遇到问题。

如果我是第一个遇到这个问题的人，我会感到惊讶，但我进行了广泛的搜索，但没有找到任何人提供答案（或那个问题）。

无论如何，我将举一个例子来突出我的问题。

假设我有一个 Bands Pod 和一个 Records Pod，这两个 Pod 之间存在双向多选关系（即 n 到 n 关系）。因此，一个乐队可以有许多唱片，而一个唱片可以有多个乐队。此外，字段 BandsPod('records') 和 RecordsPod('bands') 之间存在关系。

现在，我可以像这样检索记录窗格中的所有记录（注意注释掉的位置）：

```
$pods = pods('records');

$params = array(
                'select' => 't.*',
                'limit' => -1
                //,'where' => '???'
               );
$pods->find($params); 
```

然后对它们做任何我想做的事情，例如 template()、fetch() 等。

当我想按波段过滤时，我的麻烦就出现了。如果我想按 id 为 1 的波段检索所有记录，我的 where 语句应该是什么？

我的观点是它应该是这样的：

```
$params = array(
                'select' => 't.*',
                'limit' => -1,
                'where' => '1 IN bands.id'
               );
$pods->find($params); 
```

但是，这不起作用（不是我特别期望的）。

还希望知道这将如何用于通过多个频带进行过滤。例如

```
'where' => '(1, 2) IN bands.id' 
```

正如我之前所说，我一直在努力让它工作一段时间，但并没有什么快乐。我设法让它工作，但以一种非常丑陋的方式。IE

1.  从 Bands Pod 中获取具有相关乐队 ID 的乐队，
2.  从 band pod 记录字段中收集所有记录的 id，
3.  为 Records Pod 编写参数
4.  使用 where 语句中的 id 来检查它们是否与 t.id 匹配，
5.  $pods->find(); //其中 $pods=pods('records');

提前感谢您花时间阅读本文以及您可能提供的任何答案。

干杯，乔

注意我知道 filters() 函数，它并没有做我所追求的。我想要专门针对 where 语句的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:20:46.423

你会想要：

```
'where' => 'bands.id IN ( 1, 2 )' 
```

如果您的乐队是自定义帖子类型，它将是：

```
'where' => 'bands.ID IN ( 1, 2 )' 
```

# windows-phone-7.1 - 如何向 LongListSelector wp7 添加轻弹手势

> ID：15768602
> 
> 赞同：0
> 
> 时间：2013-04-02T15:53:39.243
> 
> 标签：windows-phone-7.1, silverlight-toolkit, longlistselector

我有一个 LongListSelector，我想给它添加一个 Flick 手势。我想模仿 iOS 滑动删除操作。

我只设法将 Flick 事件添加到整个 LongListSelector，但我无法获得事件发生的项目。

**更新**

如果有人需要，我是这样做的：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="dataTemplate" >
        <Grid x:Name="Main" Margin="0,0,0,5" VerticalAlignment="Center" Tag="{Binding}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <toolkit:GestureService.GestureListener>
                <toolkit:GestureListener Flick="GestureListener_Flick"/>
            </toolkit:GestureService.GestureListener>

            <StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Stretch">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,0">
                    <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <TextBlock Text="{Binding name}"  TextTrimming="WordEllipsis" Style="{StaticResource PhoneTextNormalStyle}" FontSize="28" HorizontalAlignment="Stretch"/>
                        <TextBlock Text="{Binding description}" MaxWidth="420" TextWrapping="Wrap" Margin="12,0" Style="{StaticResource PhoneTextSubtleStyle}" HorizontalAlignment="Stretch"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
            <StackPanel Grid.Column="1" x:Name="LeftPanel" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Name="deleteBtn" Visibility="{Binding showDelete, Converter={StaticResource VisibilityConverter}}" Content="Delete" HorizontalAlignment="Right" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources>

<toolkit:LongListSelector Grid.Row="0" HorizontalAlignment="Stretch" x:Name="data" Background="Transparent"
    GroupHeaderTemplate="{StaticResource groupHeader}"
    GroupItemTemplate="{StaticResource itemHeader}"
    ItemTemplate="{StaticResource meetingItemTemplate}">
</toolkit:LongListSelector> 
```

并在代码中将 LongListSelector 绑定到您想要的任何内容。

# version-control - 如何使用 Mercurial 导出选定变更集的报告？

> ID：15768611
> 
> 赞同：0
> 
> 时间：2013-04-02T15:54:05.130
> 
> 标签：version-control, mercurial, report

我想以类似“报告”的格式导出变更集列表，其中作者、评论和文件已更改（只是文件名，而不是内容）。

我在 Windows 上使用 TortoiseHg。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:36:57.617

你想要什么样的格式？`hg log`与模板一起使用。Mercurial 为自定义输出提供了广泛的支持，并且在 Mercurial 书中有很好的[记录。](http://hgbook.red-bean.com/read/customizing-the-output-of-mercurial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:39:52.853

所以我用 Powershell 解决了这个问题（和许多其他问题一样）。我根据 Mercurial 可以导出的补丁文件生成了一份 HTML 报告。

它当然不是完美的，但它工作得很好。典型的免责声明适用，使用此功能需您自担风险，如果您运行此功能等，我概不负责。

这是代码：

```
function Generate-PatchReport([string]$loc)
{
    $patchFiles = ls $loc -Filter "*.patch"

    $html = @()
    $html += "<html><head><title>Diff Report</title><style type=`"text/css`">body,table{font-family:Verdana;font-size:10pt}
table{border-collapse:collapse;margin:10px}
p{margin:0}
thead{font-weight:700}
td{border:1px solid gray;padding:5px}
.bin{background-color:#eee}
.add{background-color:#dfd}
.chg{background-color:#ffd}
.rem{background-color:#fdd}
hr{height:1px;background-color:#999;border:none;margin-top:15px;margin-bottom:15px}</style></head><body>"

    foreach($patch in $patchFiles)
    {
        $lines = gc $patch.FullName;

        # Get checkin notes
        $null, $null, $username = $lines[1].Split(' ')
        $datestamp = $lines[2].Split(' ')[2]

        $date = Get-Date -Year 1970 -Month 1 -Day 1 -Minute 0 -Hour 0 -Second 0 -Millisecond 0
        $date = $date.AddSeconds($datestamp)

        foreach($l in $lines)
        {
            if(!$l.StartsWith('#'))
            {
                $note = $l
                break;
            }
        }

        $html += '<p><strong>Note:</strong> ' + $note + '</p>'
        $html += "<p><strong>User:</strong> $username</p>"
        $html += "<p><strong>Timestamp:</strong> $($date.ToString("MM/dd/yyyy hh:mm tt")) UTC</p>"

        # Generate file reports
        $html += "<table><thead><td>Operation</td><td>File</td></thead>"
        for($i = 0; $i -lt $lines.Length; $i++)
        {
            if($lines[$i].StartsWith('diff'))
            {
                $html += "<tr>"
                $null, $null, $null, $null, $null, $filename = $lines[$i].Split(' ')

                if($lines[$i+1].Contains('Binary file'))
                {
                    $html += '<td class="bin">% Binary</td>'
                }
                elseif($lines[$i+1].Contains('/dev/null'))
                {
                    $html += '<td class="add">+ Add</td>'
                }
                elseif($lines[$i+2].Contains('/dev/null'))
                {
                    $html += '<td class="rem">- Remove</td>'
                }
                else
                {
                    $html += '<td class="chg">&bull; Change</td>'
                }
                $html += "<td>$filename</td>"
                $html += "</tr>"
            }
        }

        $html += "</table><hr />"
    }

    # Finalize HTML
    $html += "</body></html>"

    # Write the file to the same folder
    sc $html -Path ([System.IO.Path]::Combine($loc, "PatchReport.html"))
} 
```

# entity-framework - 实体框架 - 使用复合键和主键连接表

> ID：15768619
> 
> 赞同：0
> 
> 时间：2013-04-02T15:54:24.307
> 
> 标签：entity-framework, join, key, entity, composite

我正在为实体框架处理连接表的方式而苦苦挣扎，特别是因为实体框架要求连接表具有一个复合键，该组合键由我想要保持关系的两个相关实体上的主键组成。这里的问题是，可以这么说，我需要保持与关系的关系。

这可能是我的数据库设计的问题，或者同样是由于我对 EF 缺乏了解。最好通过示例来说明（见下文）；

我有三个表，每个表都有一个主键：-

```
Table : DispatchChannel
{ *DispatchChannelID integer }

Table : Format
{ *FormatID integer }

Table : EventType
{ *EventTypeID integer } 
```

EventTypes 和 DispatchChannels 之间的关系保存在 EventTypeDispatchChannels 中（见下文），因为它只包含一个复合键，它不会被拉入我们的模型，而实体框架负责维护这种关系。

```
Table : EventTypeDispatchChannels
{ EventTypeID integer, DispatchChannelID integer
} 
```

我的问题现在出现了，因为对于 EventTypeID 和 DispatchChannelID 的每个组合，我想保存一个可用格式的列表，如果我的 EventTypeDispatchChannels 表有一个主键，这将很容易，因此我的另一个连接表看起来像这样；

```
Table : EventTypeDispatchChannelFormats
{ EventTypeDispatchChannelID integer, FormatID integer
} 
```

EventTypeDispatchChannels 上缺少主键是我努力完成这项工作的地方，但是如果我有键，那么实体框架不再将其视为链接实体。

我对 C# 比较陌生，所以如果我没有很好地解释这一点，我深表歉意，但任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:54:36.610

当您想赋予关联一个比两个类之间的字符串更重要的角色时，该关联就成为您领域的一等公民，并且有理由使其成为类模型的一部分。这也是不可避免的，但这是次要的。

所以你应该映射`EventTypeDispatchChannels`到一个类。除了两个外键之外，该表还可以有自己的简单主键。简单的 PK 可能更容易，因此您的表`Format`可以使用简单的外键来`EventTypeDispatchChannels`进行一对多关联。

您将失去多对多功能来简单地解决`dispatchChannel.Events`。相反，你必须做

```
db.DispatchChannels.Where(d => d.DispatchChannelID == 1)
                   .SelectMany(d => d.EventTypeDispatchChannels)
                   .Select(ed => ed.Event) 
```

另一方面，您可以通过创建一个`EventTypeDispatchChannel`并设置其原始外键值来创建关联。与透明联结表的多对多关联只能通过将对象添加到集合来设置（添加`Event`to `dispatchChannel.Events`）。这意味着必须加载集合并且您需要一个`Event`对象，这在数据库往返中更昂贵。

# php - 在提交表单之前获取复选框值

> ID：15768620
> 
> 赞同：3
> 
> 时间：2013-04-02T15:54:27.430
> 
> 标签：php, jquery

我有以下循环，它显示了一个复选框以及一个答案（从 Wordpress 中获取）：

```
$counter = 1; 
foreach ($rows as $row){ ?>
   <input type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
   <?php echo $row['answer'];
} ?> 
```

这是一个更大的循环的一部分，该循环遍历一组问题，并且对于每个问题，它都会遍历答案（上面的代码）。

**在提交表单之前，如何获取用户已选中的复选框并在 div 中显示值？**

我知道我可以使用以下内容来检查复选框是否被选中：

```
$('form #mycheckbox').is(':checked'); 
```

我不知道从哪里开始循环！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:03:14.907

您可以使用选择器[`:checked`](http://api.jquery.com/checked-selector/)

```
$.each("#mycheckbox:checked", function() {
    $("div").append(this.val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:37:32.987

您提供的循环发生在服务器端，因为它是 php 代码。**当您不想在提交前**验证表单时，您必须在客户端进行验证，即使用 javascript。

因此，您不会使用相同的循环，而是创建一个在任何复选框更改时运行的新循环。

我建议您`class='cb_answer'`在 php 循环中的复选框（如 ）中添加一个类名。这将帮助您在进行验证时安全地选择特定的复选框。

这是一个脚本片段，每次更改任何复选框时，都会将选定复选框的值添加到 div。在之前添加这个`</body>`。可能需要对其进行修改以满足您的需求。

```
<script>
    // make sure jQuery is loaded...
    $(documet).ready( {
        // when checkboxes are changed...
        $('.cb_answer').on('change', function() {
             // clear preview div...
             $('#answers_preview').html('');
             // loop - all checked checkboxes...
             $('.cb_answer:checked').each(function() {
                 // add checkbox value to preview div...
                 $('#answers_preview').append(this.val());
             });
        });
    });
</script> 
```

假设`id='answers_preview'`div 预览答案和`class='cb_answer'`复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:02:51.563

您可以执行以下操作：

```
var divContent = "";
$("form input[type=checkbox]:checked").each(function() {
   divContent += this.value + "<br/>";
});
$("div").html(divContent); 
```

我不完全清楚何时应该执行此操作。从您的问题看来，当用户单击提交按钮时应该会发生这种情况，在这种情况下，您只需将该代码放入`$("form").submit(function(){...});`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:03:00.347

```
var boxes = $('input[type="checkbox"][name^="answer"]');

$('#myDiv').empty();

boxes.on('change', function() {
    boxes.filter(':checked').each(function(i, box) {
        $('#myDiv').append(box.value);
    });
}); 
```

获取所有匹配的复选框，并且每当其中一个复选框更改时，使用复选框的值更新 div。

# java - 当滚动条不可见时创建一个最大尺寸的按钮

> ID：15768625
> 
> 赞同：0
> 
> 时间：2013-04-02T15:54:39.463
> 
> 标签：java, swing, jbutton, jscrollpane

我正在尝试创建非常简单的类。目标是在滚动条不可见时创建一个最大尺寸的按钮。我的代码不起作用。即使滚动条不可见，条件 pane.getVerticalScrollBar().isVisible() 也会返回 true。我想知道为什么以及如何解决它？

```
import java.awt.BorderLayout;
import java.io.UnsupportedEncodingException;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Main {

public static void main(String[] args) throws UnsupportedEncodingException {
    JFrame frame = new JFrame();
    final JButton button = new JButton("Hello");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel panel = new JPanel(new BorderLayout());
    final JPanel buttons = new JPanel();
    buttons.add(button);
    buttons.revalidate();
    final JScrollPane pane = new JScrollPane(buttons);
    pane.getViewport().addChangeListener(new ChangeListener() {

        @Override
        public void stateChanged(ChangeEvent e) {
            System.out.println("*******************************************************************");
            System.out.println("Vertical visible? " + pane.getVerticalScrollBar().isVisible());
            System.out.println("Horizontal visible? " + pane.getHorizontalScrollBar().isVisible());
            if (!pane.getVerticalScrollBar().isVisible() && !pane.getHorizontalScrollBar().isVisible()) {
                button.setSize(button.getWidth() + 1, button.getHeight() + 1);
                buttons.revalidate();
                pane.revalidate();
            } else {
                button.setSize(button.getWidth() - 1, button.getHeight() - 1);
                buttons.revalidate();
                pane.revalidate();
                pane.getViewport().removeChangeListener(this);
            }
        }
    });
    panel.add(pane);
    frame.setContentPane(panel);
    frame.setSize(300, 200);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:16:58.700

不要玩设置大小的方法。

如果您希望按钮占据所有可用空间，请使用：

```
frame.add(button); // height/width will be max
frame.add(button, BorderLayout.SOUTH); // only width will be max 
```

让布局管理器为您完成这项工作。

编辑：

> 我有另一个在标签中缩放 img 的类，我想找到缩放的最佳值以使其尽可能最大化

创建自定义面板并以面板大小动态绘制图像。然后它将根据可用空间自动缩放。

请参阅[背景面板](http://tips4java.wordpress.com/2008/10/12/background-panel/)作为此方法的示例。

# asp.net-mvc-3 - 创建不影响会话超时的操作

> ID：15768628
> 
> 赞同：3
> 
> 时间：2013-04-02T15:54:51.393
> 
> 标签：asp.net-mvc-3, session, session-timeout

在我的 ASP.NET MVC 3 应用程序中，我有一个计时器，它每隔一段时间执行一个控制器操作。这样我的会话永远不会超时......

我不希望此操作在每次执行时都重置会话计时器。我试图通过创建`[AllowAnonymous]`像这个链接这样的自定义属性来做到这一点

[http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

但是这样一来，任何用户都可以在不登录的情况下访问此操作，这不是我想要的。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:20:27.517

您可以在 web.config 中禁用会话的滑动到期：

```
<forms slidingExpiration="false" loginUrl="~/Account/LogOn" timeout="2800" /> 
```

这样，表单身份验证 cookie 将不会被更新，并且票证将仅在固定的时间内有效。

如果您只想为某些请求禁用滑动到期，您可以查看[`following answer`](https://stackoverflow.com/a/4722128/29407). 这有点 hacky，因为票证续订代码深埋在 FormsAuthenticationModule 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:49:51.287

如何创建一个通过子域访问的不同应用程序？我认为这不仅是最简单而且最干净的方法。

如果您使用任何其他方式并且其他开发人员稍后需要支持它，那么根据解决方案的复杂性，如果他们需要以某种方式对其进行更改，那么这样做的成本可能会更高。

# javascript - ExtJS - 编辑行调用函数时的更新按钮

> ID：15768629
> 
> 赞同：1
> 
> 时间：2013-04-02T15:54:51.750
> 
> 标签：javascript, extjs

我在 ExtJS 4 和[Ext.grid.plugin.RowEditing](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.RowEditing)插件中使用网格面板。

我正在寻找一种方法来调用我将在编辑行后单击更新按钮时编写的函数。

有没有办法让标准更新按钮触发自定义功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:03:42.023

单击更新意味着您正在编辑它。因此，您可以根据您的要求执行“编辑”相关事件。

```
grid.on('edit', function(editor, e) {
    // call your function here
}); 
```

参考 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.Editing-event-edit](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.Editing-event-edit)

# active-directory - 脚本导出所有 AD 用户 vcard 的方法

> ID：15768631
> 
> 赞同：1
> 
> 时间：2013-04-02T15:54:59.900
> 
> 标签：active-directory, export, vcf-vcard

我正在寻找一种简单的方法将所有活动目录用户信息导出到每个人的唯一 vcard 中。有一些信息我想从电子名片中删除，例如家庭电话和紧急联系人。我环顾了网络，并没有找到任何东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:19:00.070

我怀疑会有一个非常简单的方法。最终，您需要

1.  枚举您的所有用户（或因此的子集）
2.  迭代生成的用户列表
3.  将每个用户的数据导出到 VCard

对于搜索和迭代部分，您可以使用 a`PrincipalSearcher`进行搜索：

```
// create your domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
   // define a "query-by-example" principal - here, we search for a UserPrincipal 
   // this "QBE" user would give you the ability to further limit what you get back
   // as results from the searcher
   UserPrincipal qbeUser = new UserPrincipal(ctx);

   // create your principal searcher passing in the QBE principal    
   PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

   // find all matches
   foreach(var found in srch.FindAll())
   {
       UserPrincipal foundUser = found as UserPrincipal;

       if(foundUser != null)
       {
          ExportToVCard(foundUser);
       }
   }
} 
```

现在剩下要做的就是创建`ExportToVCard`函数 :-) 请参阅[此博客文章，其中包含代码示例和更多链接](http://smartdev.wordpress.com/2009/04/06/how-to-generate-a-vcard-file/)以获取帮助。

如果您还没有 - 绝对阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:58:02.933

如果您只想要数据本身，我会看看 Softerra 的免费 LDAP 浏览器，[在此处找到](http://www.ldapbrowser.com/download.htm)。

为您的目录服务器设置配置文件 - 一旦它在浏览器中连接，您将看到在初始设置期间提供的 BaseDN 的默认架构。在服务器图标上，右键单击，然后单击“导出数据”。

![在此处输入图像描述](https://i.stack.imgur.com/34iMH.png)

导出向导将引导您完成大部分过程，但重要的部分是第 3 步。如果您想查找所有用户，只需将您的搜索过滤器设置为`(objectClass=user)`，确保您的搜索范围是子树，然后编辑您需要的属性想回来。

您必须将结果处理到 VCards 中，但这是获取您想要的所有用户和属性的最简单/最快的方法。

# c++ - 从二叉树中删除节点没有父访问

> ID：15768633
> 
> 赞同：0
> 
> 时间：2013-04-02T15:55:06.033
> 
> 标签：c++, binary-tree, parent

我正在做一个类项目，我们从无法访问父节点或根节点的二叉树中“删除”一个节点。我们展示的方法就是用树上的下一个节点覆盖旧节点。我遇到的问题是当它在树中的最后一个节点（在它之后的右边或左边都没有）时，我不能用下一个节点覆盖它，所以我删除它，留下一个空指针。我尝试将值设为 0（或 null），但它会引发错误，指出该值不能为 null。如果您知道如何做到这一点，您的建议将不胜感激。

```
template< typename T >
inline void Node< T >::delete_node( Node< T > *&p )
{
    cerr<< "delete node" << endl;
    if(p->left() == 0 && p->right() == 0)
    {
        delete p;
    }
    else if (p->left() == 0)//delete p and make the parent point to the right
    {
        //delete p;
        Node< T > *right = p->right();
        p->value(right->value());
        p->left(right->left());
        p->right(right->right());
    }
    else if (p->right() == 0)//delete p ad make the parent move to the left
    {
        //delete p;
        Node< T > *left = p->left();
        p->value(left->value());
        p->left(left->left());
        p->right(left->right());
    }
    else //delete p and go to the right then all the way to the left and attach the other side there.
    {
        Node< T > *tmp = p->left();
        Node< T > *find = p->right();
        Node< T > *right = p->right();

        while(find->left() != 0)
        {
            find = find->left();
        }
        find->left(tmp);

        p->value(right->value());
        p->right(right->right());
        p->left(right->left());
    }
} 
```

# php - 简单 PHP 网络爬虫中的 HTTP 500 错误

> ID：15768635
> 
> 赞同：2
> 
> 时间：2013-04-02T15:55:11.583
> 
> 标签：php, web-crawler

我正在尝试运行一个指向一个 url 的网络爬虫，它没有链接，代码看起来不错；但是，我收到一个 http 500 错误。

它对爬取的内容所做的只是回显它。

知道为什么吗？

```
<?php
error_reporting( E_ERROR );

define( "CRAWL_LIMIT_PER_DOMAIN", 50 );

$domains = array();

$urls = array();

function crawl( $url )
{
    global $domains, $urls;
    $parse = parse_url( $url );
    $domains[ $parse['host'] ]++;
    $urls[] = $url;

    $content = file_get_contents( $url );
    if ( $content === FALSE ){
        echo "Error: No content";
        return;
}

    $content = stristr( $content, "body" );
    preg_match_all( '/http:\/\/[^ "\']+/', $content, $matches );

    // do something with content.
    echo $content;

    foreach( $matches[0] as $crawled_url ) {
        $parse = parse_url( $crawled_url );
        if ( count( $domains[ $parse['host'] ] ) < CRAWL_LIMIT_PER_DOMAIN && !in_array( $crawled_url, $urls ) ) {
            sleep( 1 );
            crawl( $crawled_url );
        }
    }
}

crawl(http://the-irf.com/hello/hello6.html);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:56:56.910

代替：

```
crawl(http://the-irf.com/hello/hello6.html); 
```

和：

```
crawl('http://the-irf.com/hello/hello6.html'); 
```

URL 是一个文本字符串，因此必须用引号引起来。

关于[stristr](http://php.net/stristr)的问题：

> 返回从第一次出现 needle 到结束的所有 haystack。

所以，你的代码：

```
$content = stristr( $content, "body" ); 
```

将返回`$content`从 开始并包括第一次出现的所有`body`.

# c# - windows phone 中的递增计时器

> ID：15768640
> 
> 赞同：1
> 
> 时间：2013-04-02T15:55:43.810
> 
> 标签：c#, timer, windows-phone

我在 Windows 手机上制作计时器应用程序时遇到问题。我将文本框设置为 00:00:00 并且我试图每秒增加一次，但在第一秒之后它不会再做任何事情了。我相信这是一个简单的解决方法，并且非常感谢任何帮助。谢谢

> 公共 MainPage() { InitializeComponent();

```
 DispatcherTimer timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(1);
        timer.Tick += OnTimerTick;
        timer.Start();
    }

    void OnTimerTick(object sender, EventArgs args)
    {
        txtTimer.Text = DateTime.Now.ToString();
    }

    private void btnStartClick(object sender, EventArgs e)
    {

        DispatcherTimer timer = new DispatcherTimer();

        timer.Tick +=
            delegate(object s, EventArgs args)
            {
                TimeSpan time = new TimeSpan(0);
                time += TimeSpan.FromSeconds(1);                   
                this.timenow.Text = string.Format("{0:D2}:{1:D2}:{2:D2}", time.Hours, time.Minutes, time.Seconds);
            };

        timer.Interval = new TimeSpan(0, 0, 1); 
        timer.Start();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:59:30.393

```
 TimeSpan time = new TimeSpan(0);
            time += TimeSpan.FromSeconds(1);                   
            this.timenow.Text = string.Format("{0:D2}:{1:D2}:{2:D2}", time.Hours, time.Minutes, time.Seconds); 
```

`time`每次计时器滴答时都会创建该变量。因此，每次您将一秒添加到零时间跨度。您需要从委托中提取它。通常，您会将其设为类字段。

# java - 在 java 中的 try-catch 块之后使用“finally”有什么好处？

> ID：15768645
> 
> 赞同：45
> 
> 时间：2013-04-02T15:56:10.683
> 
> 标签：java, try-catch, finally

“finally”块总是在 try-catch 结束时执行，无论是否发生异常。但也总是执行 try-catch 之外和之后的每一行代码。那么，为什么要使用 finally 语句呢？

例子：

```
try {
    //code...
} catch (Exception e) {
    //code...
} finally {
    System.out.println("This line is always printed");
}
System.out.println("Also this line is always printed !! So why to use 'finally'?? "); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T15:57:14.703

最有用的情况是当您需要释放一些资源时：

```
InputStream is = ...
try {
    //code...
} catch (Exception e) {
    //code...
} finally {
    is.close();
} 
```

更一般地说，当你想确保你的代码在最后执行时使用它，即使在执行期间出现异常：

```
long startTime = System.currentTimeMillis();
try {
    //code...
} catch (Exception e) {
    //code...
} finally {
    long endTime = System.currentTimeMillis();
    System.out.println("Operation took " + (endTime-startTime) + " ms");
} 
```

**始终**`finally`执行此块的想法是，整个块之后的第一行并非如此

 ***   如果`catch`方块让一些可投掷的传球
*   如果它重新抛出异常，这是非常频繁的

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T16:02:21.640

最后一个`System.out.println`（在finally 块之后）只有在try 块中抛出的异常被catch 块实际捕获并且执行没有被return 语句中断时才会运行。

在您的示例中，finally 块将始终运行，但如果`Error`在 try 块中抛出 no（它不会被捕获），如果`Throwable`在 catch 块中抛出 no 并且没有其他语句，这将中断执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-02T15:58:47.357

> 但也总是执行 try-catch 之外和之后的每一行代码。

好吧，并非总是如此。例如，我们可以 throw`Error`不是Exceptionuon 的子类型，而是 Throwable，这样它就不会被`catch(Exception e) {..}`. 在这种情况下，块之前`try`的块会将控制流移出方法相应的`finally`部分将被调用，但它*之后*的代码不会。

看看这段代码

```
public static void main(String[] args) {
    try{
        //...
        throw new Error("something went terribly wrong");
    } catch (Exception e) {//will NOT catch Error
        e.printStackTrace();
    } finally{//this will be invoked regardless of what happens in try,              
        System.out.println("finally block");
    }

    //if Error will be thrown in above `try` it will move flow of control 
    //from this method, which will prevent it from reaching 
    //this place and executing code after this comment
    System.out.println("after finally... may not be executed");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T16:00:18.813

> finally 块是防止资源泄漏的关键工具。关闭文件或以其他方式恢复资源时，将代码放在 finally 块中以确保始终恢复资源。
> 
> 但是 finally 不仅仅对异常处理有用——它允许程序员避免清理代码被 return、continue 或 break 意外绕过。将清理代码放在 finally 块中始终是一个好习惯，即使没有预料到异常也是如此。

更多[在这里](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-02T15:58:33.603

假设您正在写入文件，突然它会创建一个异常，即您如何关闭文件。然后最终帮助您，并且对于数据库事务 finally 块有很大帮助

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-02T15:57:23.883

finally 块的唯一目的是**关闭**您在 try 块中打开的资源。资源可以是数据库连接、文件写入/读取等：

```
Connection conn= null;
try {
 conn= get the db conn;
//do some DML/DDL
}
catch(SQLException ex) {

}
finally {
conn.close();
} 
```**

# python - Python 排序顺序 unicode/ansi 不同

> ID：15768649
> 
> 赞同：2
> 
> 时间：2013-04-02T15:56:21.457
> 
> 标签：python, python-2.7, localization

我得到了这种奇怪的行为：

```
>>> locale.setlocale(locale.LC_ALL, 'de_DE.utf-8')
'de_DE.utf-8'
>>> sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], cmp=locale.strcoll)
[u'a', u'<NULL', u'<NULL>', u'NULL', u'NULL>']
>>> sorted(['<NULL', 'NULL>', '<NULL>', 'NULL', 'a'], cmp=locale.strcoll)
['a', 'NULL', 'NULL>', '<NULL', '<NULL>'] 
```

虽然可以在“a”之后对“<NULL”进行排序，但令我困扰的是，对于 unicode“<NULL”<“NULL”而 ANSI“NULL”<“<NULL”，尽管排序规则是相同的。

有没有办法解决这个问题？

更新：PyICU 给出的结果与上述两个不同。

```
>>> import PyICU
collator = PyICU.Collator.createInstance(PyICU.Locale('de_DE.UTF-8'))
>>> sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], cmp=collator.compare)
[u'<NULL', u'<NULL>', u'a', u'NULL', u'NULL>'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:57:54.093

一种解决方法是始终使用 unicode（或字节字符串）作为键：

```
import locale
from functools import cmp_to_key

@cmp_to_key
def strcoll(a, b):
    if isinstance(a, str):
        a = a.decode('utf-8')
    if isinstance(b, str):
        b = b.decode('utf-8')
    return locale.strcoll(a, b) 
```

那么以下应该给出相同的输出：

```
sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], key=strcoll)
sorted(['<NULL', 'NULL>', '<NULL>', 'NULL', 'a'], key=strcoll) 
```

我会使用`key`而不是`cmp`因为它更便携。

一种更简单的方法是简单地将所有字符串明确地保留为 unicodes/bytes：

```
def to_unicode(s):
    return s.decode('utf-8') if isinstance(s, str) else s

the_list = [...]
the_list = [to_unicode(elem) for elem in the_list] 
```

`str`这种方法的优点是在and之间进行一次转换`unicode`，而另一种方法在每次比较时进行转换（即使使用`key`and `cmp_to_key`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:29:24.940

解决方法是使用 de_DE.utf-8 以外的德语语言环境。有趣的是，它适用于例如 de_AT.utf-8。

```
>>> locale.setlocale(locale.LC_ALL, 'en_US.utf-8')
'en_US.utf-8'
>>> sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], cmp=locale.strcoll)
[u'a', u'NULL', u'<NULL', u'<NULL>', u'NULL>']
>>> locale.setlocale(locale.LC_ALL, 'de_AT.utf-8')
'de_AT.utf-8'
>>> sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], cmp=locale.strcoll)
[u'a', u'NULL', u'<NULL', u'<NULL>', u'NULL>']
>>> locale.setlocale(locale.LC_ALL, 'de_CH.utf-8')
'de_CH.utf-8'
>>> sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], cmp=locale.strcoll)
[u'a', u'NULL', u'<NULL', u'<NULL>', u'NULL>'] 
```

但：

```
>>> locale.setlocale(locale.LC_ALL, 'de_DE.utf-8')
'de_DE.utf-8'
>>> sorted([u'<NULL', u'NULL>', u'<NULL>', u'NULL', u'a'], cmp=locale.strcoll)
[u'a', u'<NULL', u'<NULL>', u'NULL', u'NULL>'] 
```

我猜，这将其缩小为某些 Linux 系统上德语主要语言环境的错误。

# opencv - 使用 OpenCV 生成鸟瞰图/俯视图

> ID：15768651
> 
> 赞同：7
> 
> 时间：2013-04-02T15:56:28.040
> 
> 标签：opencv, image-processing

我正在尝试从图像中生成鸟瞰图。对于相机内在函数和失真，我使用的是从驾驶模拟器中检索到的硬编码值，该驾驶模拟器的屋顶上安装了相机。

代码的基础来自“Learning OpenCV Computer Vision with the OpenCV Library”，第 409 页。

当我在包含每行 3 个内角和每列 4 个内角的棋盘的图像上运行代码时，我的鸟瞰图是颠倒的。我需要图像正确地变成鸟瞰图，这是正面朝上的，因为我需要另一个函数调用的单应矩阵。

这是输入和输出图像，以及我正在使用的代码：

**输入图像：** ![在此处输入图像描述](https://i.stack.imgur.com/YBr5y.png)

**检测到的角落：** ![在此处输入图像描述](https://i.stack.imgur.com/Qglzl.jpg)

**输出图像/鸟瞰图（倒置！）：** ![在此处输入图像描述](https://i.stack.imgur.com/g5JHo.jpg)

编码：

```
#include <highgui.h>
#include <cv.h>
#include <cxcore.h>
#include <math.h>
#include <vector>
#include <stdio.h>

#include <iostream>

using namespace cv;
using namespace std;

int main(int argc, char* argv[]) {

if(argc != 4) return -1;
    // INPUT PARAMETERS:
    //
    int board_w = atoi(argv[1]); //inner corners per row
    int board_h = atoi(argv[2]); //inner corners per column
    int board_n = board_w * board_h;
    CvSize board_sz = cvSize( board_w, board_h );

    //Hard coded intrinsics for the camera  
    Mat intrinsicMat = (Mat_<double>(3, 3) <<
        418.7490, 0., 236.8528,
        0.,558.6650,322.7346,
        0., 0., 1.);      

    //Hard coded distortions for the camera 
    CvMat* distortion = cvCreateMat(1, 4, CV_32F);
    cvmSet(distortion, 0, 0, -0.0019);
    cvmSet(distortion, 0, 1, 0.0161);
    cvmSet(distortion, 0, 2, 0.0011);
    cvmSet(distortion, 0, 3, -0.0016);

    IplImage* image = 0;
    IplImage* gray_image = 0;

    if( (image = cvLoadImage(argv[3])) == 0 ) {
        printf("Error: Couldn’t load %s\n",argv[3]);
        return -1;
    }

    gray_image = cvCreateImage( cvGetSize(image), 8, 1 );
    cvCvtColor(image, gray_image, CV_BGR2GRAY );
    // UNDISTORT OUR IMAGE
    //
    IplImage* mapx = cvCreateImage( cvGetSize(image), IPL_DEPTH_32F, 1 );
    IplImage* mapy = cvCreateImage( cvGetSize(image), IPL_DEPTH_32F, 1 );

    CvMat intrinsic (intrinsicMat);

    //This initializes rectification matrices
    //
    cvInitUndistortMap(
        &intrinsic,
        distortion,
        mapx,
        mapy
    );

    IplImage *t = cvCloneImage(image);
    // Rectify our image
    //

    cvRemap( t, image, mapx, mapy );
    // GET THE CHESSBOARD ON THE PLANE
    //

    cvNamedWindow("Chessboard");
    CvPoint2D32f* corners = new CvPoint2D32f[ board_n ];
    int corner_count = 0;
    int found = cvFindChessboardCorners(
        image,
        board_sz,
        corners,
        &corner_count,
        CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS
    );
    if(!found){
        printf("Couldn’t aquire chessboard on %s, "
        "only found %d of %d corners\n",
        argv[3],corner_count,board_n
    );
    return -1;
    }
    //Get Subpixel accuracy on those corners:
    cvFindCornerSubPix(
        gray_image,
        corners,
        corner_count,
        cvSize(11,11),
        cvSize(-1,-1),
        cvTermCriteria( CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 30, 0.1 )
    );

    //GET THE IMAGE AND OBJECT POINTS:
    // We will choose chessboard object points as (r,c):
    // (0,0), (board_w-1,0), (0,board_h-1), (board_w-1,board_h-1).
    //

    CvPoint2D32f objPts[4], imgPts[4];
    imgPts[0] = corners[0];
    imgPts[1] = corners[board_w-1];
    imgPts[2] = corners[(board_h-1)*board_w];
    imgPts[3] = corners[(board_h-1)*board_w + board_w-1];

    objPts[0].x = 0; objPts[0].y = 0;
    objPts[1].x = board_w -1; objPts[1].y = 0;
    objPts[2].x = 0; objPts[2].y = board_h -1;
    objPts[3].x = board_w -1; objPts[3].y = board_h -1;

    // DRAW THE POINTS in order: B,G,R,YELLOW
    //
    cvCircle( image, cvPointFrom32f(imgPts[0]), 9, CV_RGB(0,0,255), 3); //blue
    cvCircle( image, cvPointFrom32f(imgPts[1]), 9, CV_RGB(0,255,0), 3); //green
    cvCircle( image, cvPointFrom32f(imgPts[2]), 9, CV_RGB(255,0,0), 3); //red
    cvCircle( image, cvPointFrom32f(imgPts[3]), 9, CV_RGB(255,255,0), 3); //yellow
    // DRAW THE FOUND CHESSBOARD
    //

    cvDrawChessboardCorners(
        image,
        board_sz,
        corners,
        corner_count,
        found
    ); 
    cvShowImage( "Chessboard", image );
    // FIND THE HOMOGRAPHY
    //
    CvMat *H = cvCreateMat( 3, 3, CV_32F);
    cvGetPerspectiveTransform( objPts, imgPts, H);
    Mat homography = H;
    cvSave("Homography.xml",H); //We can reuse H for the same camera mounting

    /**********************GENERATING 3X4 MATRIX***************************/

    // LET THE USER ADJUST THE Z HEIGHT OF THE VIEW
    //
    float Z = 23;
    int key = 0;
    IplImage *birds_image = cvCloneImage(image);
    cvNamedWindow("Birds_Eye");
    // LOOP TO ALLOW USER TO PLAY WITH HEIGHT:
    //
    // escape key stops
    //
    while(key != 27) {
        // Set the height
        //
        CV_MAT_ELEM(*H,float,2,2) = Z;
        // COMPUTE THE FRONTAL PARALLEL OR BIRD’S-EYE VIEW:
        // USING HOMOGRAPHY TO REMAP THE VIEW
        //
    cvWarpPerspective(
    image,
    birds_image,
    H,
    CV_INTER_LINEAR | CV_WARP_INVERSE_MAP | CV_WARP_FILL_OUTLIERS
    );
    cvShowImage( "Birds_Eye", birds_image );
    imwrite("/home/lee/bird.jpg", birds_image);

    key = cvWaitKey();
    if(key == 'u') Z += 0.5;
    if(key == 'd') Z -= 0.5;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T17:10:52.047

单应性结果似乎是正确的。由于您将相机的 z 轴映射为世界的 y 轴，因此鸟瞰 (BEV) 重映射生成的图像是颠倒的。

如果您确实需要 BEV 图像作为相机镜头，您可以使用 H 作为 H = Ty * Rx * H，其中 R 是围绕 x 轴旋转 180 度，T 是 y 轴的平移，H 是您的原始单应性。由于您的旋转将旧 BEV 重新映射到 y 轴的负侧，因此需要进行平移。

# ubuntu - 监控锁定解锁屏幕 - Shell 脚本

> ID：15768653
> 
> 赞同：1
> 
> 时间：2013-04-02T15:56:31.913
> 
> 标签：ubuntu, locking, screen

我制作了脚本来监控该工作人员实际使用 PC 的时间，在 2 分钟不活动后将其锁定屏幕。

```
#!/usr/bin/env bash   
day=$(date +"%d-%m-%Y")    
dbus-monitor --session "type='signal',interface='org.gnome.ScreenSaver',member='ActiveChanged'" | while read line ; do

if [ x"$(echo "$line" | grep 'boolean true')" != x ] ; 
then
echo "lock#$(date +%R)" >> /home/user/.worklog/work.$day
fi

if [ x"$(echo "$line" | grep 'boolean false')" != x ] ; 
then
echo "unlock#$(date +%R)" >> /home/user/.worklog/work.$day
fi
done 
```

我的问题是：

当我监控 Ubuntu 12.04 时，输出为：

```
lock#10:56
unlock#10:56
lock#11:00
unlock#11:32
lock#11:44
unlock#13:01
lock#13:10 
```

但是，当我监控 Ubuntu 12.10 时，输出是：

```
unlock#08:24
lock#08:45
unlock#08:45
lock#08:55
lock#09:13
unlock#09:13
unlock#09:13
lock#10:38
lock#10:39
unlock#10:39
unlock#10:39
lock#10:52
unlock#10:52
lock#11:03 
```

有人知道如何解决吗？

# c# - 通用函数的委托

> ID：15768656
> 
> 赞同：2
> 
> 时间：2013-04-02T15:56:47.783
> 
> 标签：c#, .net, generics, delegates

我可以创建一个这样的委托吗？

```
// here I have delegate
delegate ... MyDel ...

MyDel del = SomeMethod; // or even lambda?
int number = del<int>(...); 
```

作为一个想法，这可能是一个重复的问题，但我指的是这个->

```
int n = del<int>(...); 
```

那么，委托可以是通用函数吗？如果不是（我很确定它不能），为什么要这样实现？在什么情况下会出现问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:08:09.407

不，委托实例不能指向开放的泛型方法。

我只能推测为什么会这样，但我认为这种语言功能的成本不会超过它的好处，因为它可能不会经常使用。请参阅 Eric Lippert 的回答[，](https://stackoverflow.com/a/2806990)了解功能如何进入 C#。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:53:22.327

代表不允许此类功能；为此，您需要定义一个接口；一些例子：

```
interface IActOnAnything
{
  void Invoke<T>(T it)
}
interface IActOnAnything<TP1>
{
  void Invoke<T>(T it, TP1 p1)
}
interface IActOnAnythingByRef
{
  void Invoke<T>(ref T it)
} 
```

不幸的是，没有语言支持来促进此类接口的实现。如果一个类只需要定义一个实现接口的函数，则可以简单地在类级别声明实现。否则，可能应该为每个实现声明一个嵌套的私有类，该类实现接口并保存其父类型的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:00:14.623

是的，这是可能的，比如**Func**，**Action**，你也可以自己制作：

```
delegate TOutput MyDelegate<TInput,TOutput>(TInput input);

MyDelegate<string, int> myDelegate = input=>input.Length; 
```

你也可以这样做：

```
int n = new MyDelegate<string, int>(input => input.Length)("MY STRING"); //n=9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:00:51.503

是的，有可能：

```
public delegate int Test<T>(T input) where T : struct;

public static event Test<int> TestEvent;

static void Main(string[] args)
{
    var n = TestEvent(5);
} 
```

# expression - 从访问表达式中的小数中提取整数

> ID：15768660
> 
> 赞同：1
> 
> 时间：2013-04-02T15:56:59.427
> 
> 标签：expression, ms-access-2010

我无法从 Access 中表达式生成器的数字字段中提取整数。

这是我认为可行的方法：

```
Left([NumField],InStr(1,[NumField],".")-1) 
```

这不起作用。运行查询后，我会弹出一个消息框，说明“无效的呼叫过程”

表达式前的字段 = 1.4

表达式后面的字段 = 1

因此取整数并提取它。当然，整数可以是 3、30 或 300。长度将始终不同，因此您不能使用长度为 1 的 trim left。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:07:09.677

您似乎将数值视为字符串以提取整数部分。建议您考虑使用该`Int()`功能。

```
Int([NumField]) 
```

还有一个相关的功能，`Fix()`。从访问帮助主题：

*Int 和 Fix 的区别在于，如果 number 为负数，Int 返回小于等于 number 的第一个负整数，而 Fix 返回大于等于 number 的第一个负整数。例如，Int 将 -8.4 转换为 -9，Fix 将 -8.4 转换为 -8。*

我假设您想要查询返回的*数字*。如果您实际上希望将数字作为字符串，则可以使用`CStr(Int([NumField]))`or `Format(Int([NumField]), "#")`。

# java - arraylist.contains(string) 不评估字符串

> ID：15768662
> 
> 赞同：0
> 
> 时间：2013-04-02T15:57:07.323
> 
> 标签：java, string, arraylist, contains, evaluate

奇怪的是，我有一种使用 ArrayList.contains(Object o) 的感觉在这里遗漏了一些东西，但它现在没有出现在我身上，有人能指出我正确的方向吗？

我有两个包含值列表的 ArrayList。我想比较它们并获取文件中匹配项的数量，所以我这样做了：

```
ArrayList<String> policyNumbersBene = new ArrayList<String>();
policyNumbersBene.add("YOOHOO");
ArrayList<String> policyNumberDly = new ArrayList<String>();
policyNumberDly.add("YOOHOO");

int count = 0;
for (String policyNumber : policyNumbersBene) { // compare 2 arraylists to each other.
    count += (policyNumberDly.contains(policyNumber) ? count : 0;
}
'SYSO'(count); 
```

我相信我应该在计数器的输出中得到 1，但我每次都得到 0。当我在那里打开一个调试器时，我可以看到数组中的值列表，并且在那里看到“YOOHOO”。有人可以指出我做错了什么吗？我觉得像一个完整的java新手问这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:59:35.173

当你执行这一行时，你`count`会`0`得到`0 + 0`

```
count += (policyNumberDly.contains(policyNumber)) ? count : 0; 
```

使固定：

```
count += (policyNumberDly.contains(policyNumber)) ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:02:45.707

我建议，如果您需要调用方法 contains，请使用 an`LinkedHashset`而不是`ArrayList`.

调用将在恒定时间内进行，而不是 O(n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:03:01.203

```
 System.out.println(policyNumberDly.contains(policyNumber) ? 1 :0); 
```

它打印 1 所以状态 count=1;

# dart - 自动修复所有丢失的分号。（飞镖编辑器）

> ID：15768667
> 
> 赞同：2
> 
> 时间：2013-04-02T15:57:22.620
> 
> 标签：dart, dart-editor

是否可以在 Dart 编辑器中自动修复所有丢失的分号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:50:21.190

目前还没有，但我们正在努力将这个和其他格式化功能引入编辑器和命令行。敬请关注！

# database - Windows Phone 和 Windows 8 Modern 应用程序的数据层抽象？

> ID：15768669
> 
> 赞同：2
> 
> 时间：2013-04-02T15:57:25.423
> 
> 标签：database, windows-phone, windows-store-apps, abstraction

我正在尝试将我的 WP 应用程序移植到 Windows 8，同时维护可移植模型和视图模型类。但是，我的应用程序使用 SQLCE for Windows Phone 7，因此我的原始模型类都装饰有用于映射到 SQLCE 表的属性。由于 SQLCE 不适用于 WinRT 应用程序，我想抽象数据访问，以便我可以继续在手机上使用 SQLCE，但在 Windows 8 上使用 SQLite。

有没有人想出一个理智的、工作的抽象层，它不会消除使用的能力`IQueryable`？同样，任何人都成功地在 Windows Phone 上为 SQLCE 使用 XML 映射而不是属性映射？如果我不必在模型类和 DAL 类似物之间手动转换，那就太好了。

（我在博客上对此[有点抱怨](http://chris.charabaruk.com/2013/04/sharing-models-between-windows-phone-and-windows-8-an-exercise-in-futility/)，这可能有助于为我的问题提供更多背景信息。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:08:30.870

我已经确定为可移植代码（视图模型、帮助程序等）提供每个平台的“核心”程序集，以及平台特定的核心程序集引用的每个数据库/后备存储（SqlCe、Sqlite 等）的单独程序集似乎工作。这意味着我的模型类仍然在 DAL 程序集中定义，但我至少可以提供一个简单的通用接口（不幸的是，由于 DAL 模型类，在每个 DAL 程序集中定义）仍然为我提供 IQueryable 支持。

由于 Visual Studio 中的“复制为链接”，设置核心程序集并确保每个 DAL 程序集的公共数据库服务接口相同非常容易。我`#ifdef`什至可以重用许多 DAL 模型类文件并有条件地编译属性、特定于数据库的代码等，这使我也可以为它们使用“复制为链接”。

```
public interface IDataService
{
    IQueryable<ModelType1> ModelType1 { get; }
    IQueryable<ModelType2> ModelType2 { get; }

    void AddModelType1(ModelType1 item);
    void RemoveModelType1(ModelType1 item);

    void AddModelType2(ModelType2 item);
    void RemoveModelType2(ModelType2 item);

    void CreateDatabase();
    void ResetDatabase();
} 
```

生成的引用映射有点像这样：

```
System.Data.Linq -> App.Data.SqlCe -> App.Core.WP -> App.WP
                        /                /
             (some shared code)  (all shared code)
                      /                /
Sqlite -> App.Data.Sqlite -> App.Core.Win8 -> App.Win8 
```

它远没有我想要的那么干净，但至少它似乎有效。

# javascript - 创建自定义颜色集 TinyMCE

> ID：15768671
> 
> 赞同：2
> 
> 时间：2013-04-02T15:57:32.070
> 
> 标签：javascript, tinymce, color-picker

我已经能够为 TinyMCE 创建自己的字体颜色选择器，但是调色板链接到原始颜色选择器。我想要做的是让我的自定义颜色选择器完全独立于原始颜色选择器（所以我可以同时显示两者）。这是我当前的代码，这是可行的，但是两个按钮的调色板是相同的：

```
tinymce.create('tinymce.plugins.ExamplePlugin', {
        createControl: function(n, cm) 
            {
                switch(n)
                {
                case "universityColors":
                   var o = {};
                   ed=tinyMCE.activeEditor;
                   o.scriptURL = ed.baseURI.getURI();
                   o['class'] = 'mce_forecolor';
                   o.title='University Font Colors';
                   o.scope=this;
                   o.image = '<?php echo $university->getDto()->getIcoFile();?>',
                   o.onclick = function (color) { ed.execCommand('Forecolor', false, color);/*this.cs.showMenu(); if (this.o.onClick) this.o.onClick(c);*/};
                   o.onselect = function (color) {
                       console.log('selected',color); /*this.color=this.o.color=c; if (this.o.onSelect) this.o.onSelect(c);*/

                       // execute the same command that the regular forecolor plugin uses (choosen theme needs to be advanced! in order to work)
                       ed.execCommand('ForeColor', false, color);
                   };
                   // limit the colors using own setting
                   if (v = ed.getParam('theme_advanced_text_colors')) o.colors = v;

                    var mcsb = cm.createColorSplitButton('universityColors', o);

                    // return the new ColorSplitButton instance
                    return mcsb;
                }
                return null;
            }
       });
    tinymce.PluginManager.add('universityColorPicker', tinymce.plugins.ExamplePlugin);
    tinyMCE.init({
        mode: "specific_textareas",
        editor_selector: "tinyMCE",
        theme : "advanced",
        plugins : "emotions,spellchecker,advhr,insertdatetime,preview, -universityColorPicker", 

         // Theme options - button# indicated the row# only
        theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
        theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,code,preview,|,forecolor,backcolor, universityColors",
        theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",      
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
        theme_advanced_text_colors :"<?php echo implode(',', $university->getDto()->getColors());?>" // example

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:00:28.093

要应用自定义字体，请参阅此小提琴： http: [//fiddle.tinymce.com/jYcaab/2](http://fiddle.tinymce.com/jYcaab/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:19:27.557

在阅读了正在发生的事情之后，这实际上非常容易。所有需要做的就是改变这一行：

```
 if (v = ed.getParam('theme_advanced_text_colors')) o.colors = v; 
```

如果 (v = ed.getParam('custom_colors')) o.colors = v;

`custom_colors`然后在 init 方法中添加 add定义。

# c - 为什么这是冲突的类型声明？

> ID：15768672
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:57:34.073
> 
> 标签：c

我有如下编译问题。头文件`abc.h`包含在`abc.c`.

在头文件中，我有这个

```
extern char **foo; 
```

在源文件中，我有这个

```
char *foo[] = { ".mp3", ".mp4" }; 
```

然而我从 GCC 得到一个编译错误：

```
abc.c:23:7: error: conflicting types for ‘foo’
In file included from abc.c:18:0:
abc.h:64:15: note: previous declaration of ‘foo’ was here 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:58:33.693

一个是指针数组，另一个是指向指针的指针。非常不同的对象。尝试将其声明为数组：

```
extern char *foo[]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:22:18.280

`extern char[]`并且`extern char *`是两个不同的

而对于**extern**声明应该与一个定义相匹配。

```
extern char **foo; 
```

**火柴**

```
char **foo; 
```

**不匹配**

```
char *foo[]; 
```

**一样**

```
extern char *foo[];  /* matches */  
char *foo[]; 
```

# php - 爬虫将参数从 url 添加到链接

> ID：15768677
> 
> 赞同：2
> 
> 时间：2013-04-02T15:57:48.503
> 
> 标签：php, http, parameters, apache2, web-crawler

我尝试了两种不同的网络爬虫（Sistrix 和[http://ssitemap.com](http://ssitemap.com)）。两个爬虫都会报告有关重复内容的错误，例如`/`和`/?katID=12`.

事实证明，如果爬虫调用`/projekte/index.php?katID=12`它找到的 url`<a href="/">Home</a>`并将其作为链接添加到`/?katID=12`. 看起来来自 url 的参数`?katID=12`被添加到页面上没有参数的每个链接。

如果我使用浏览器或 wget，我会看到我`/`想要的简单 html 链接。

我做错什么了吗？服务器配置？

这是爬虫中的错误还是功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:48:42.240

我添加`<link rel="canonical" href="...">`到每个页面以帮助爬虫识别相同的页面。

另请参阅[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

# android - Android参数化sql查询不起作用

> ID：15768678
> 
> 赞同：3
> 
> 时间：2013-04-02T15:57:48.773
> 
> 标签：android, sqlite

如果我将一个数字硬编码到 where 部分，我会得到我期望的行

```
Cursor cursor = db.query( tableName, 
new String[] {colID, colString, colNumber },  
colNumber + "=14", 
null, 
null, null, null, null); 
```

如果我将数字作为参数输入，则不会返回任何行。

```
Cursor cursor = db.query( tableName, 
new String[] {colID, colString, colNumber },  
colNumber + "=?", 
new String[] { String.valueOf(14) }, 
null, null, null, null); 
```

在第二种情况下我做错了什么？

创建表语句：

```
db.execSQL("CREATE TABLE "
        + otherTableName + " ("
        + otherTableID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
        + otherTableString + " TEXT"
        + ");");

db.execSQL("CREATE TABLE "
        + tableName + " ("
        + colID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
        + colString + " TEXT, "
        + colNumber + " REFERENCES "
        + otherTableName + "(" + otherTableID
            + "));"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:29:40.470

我认为这个问题是你的第二个 DML 语句，更准确的是你的外键声明。我认为应该是：

```
db.execSQL("CREATE TABLE "
        + tableName + " ("
        + colID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
        + colString + " TEXT, "
        + colNumber + " INTEGER, "
        + " FOREIGN KEY (" + colNumber + ") REFERENCES "
        + otherTableName + "(" + otherTableID
            + "));"); 
```

我无法解释为什么它不起作用的其他原因。你的陈述是平等的，除了一个使用核心价值和第二个占位符。可能您在 tableName 表上尝试了参数化语句，我认为您错误地声明了 FK，这就是您得到任何行的原因。

占位符基于[SQLite 的类型亲和性工作](http://www.sqlite.org/datatype3.html#affinity)

如果您将列定义为`TEXT`，则会替换占位符并将值比较为`col = 'value'`。如果您将列定义为`INTEGER`，则会替换占位符并将值比较为`col = value`。但是在您的第二个 DML 语句中，您没有指定列的数据类型，只是它在某处引用了某个列。

# python - NLTK 正则表达式和 CFG

> ID：15768680
> 
> 赞同：3
> 
> 时间：2013-04-02T15:57:53.073
> 
> 标签：python, regex, nlp, nltk, context-free-grammar

NLTK 的文档所举例的“正则表达式”和来自相同的 CFG 之间是否存在实际的权力差异？肯定应该有，因为有不规则的上下文无关语言，但我找不到 CFG 方法胜过正则表达式的具体示例。

[http://nltk.org/book/ch07.html](http://nltk.org/book/ch07.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T17:14:19.267

从 RegexpParser 的文档中：

> 子句的模式按顺序执行。较早的模式可能会引入阻止稍后模式执行的块边界。有时，单个模式将匹配输入的多个重叠范围。与更普遍的正则表达式替换一样，分块器将识别可能的第一个匹配项，然后在该匹配项结束后继续寻找匹配项。
> 
> 语法的子句也是按顺序执行的。级联块解析器是具有多个子句的解析器。该块解析器创建的解析树的最大深度与语法中的子句数相同。

也就是说，每个子句/模式都执行*一次*。因此，一旦您需要后一个子句的输出与前一个子句匹配，您就会遇到麻烦。

一个实际的例子是，可以将本身可能是一个完整句子的东西用作更大句子中的子句的方式：

> 猫发出咕噜咕噜的叫声。
> 
> 他听到猫发出咕噜声。
> 
> 她看到他听到猫发出咕噜咕噜的声音。

正如我们从上面的文档中所读到的，当您构造 RegexpParser 时，您正在为此类句子的“深度”设置任意限制。上下文无关语法没有“递归限制”。

文档提到您可以使用循环来减轻这种情况——如果您通过合适的语法运行两到三或四次，您可以获得更深入的解析。您可以添加外部逻辑来多次循环您的语法，或者直到无法解析更多内容。

但是，正如文档还指出的那样，此解析器的基本方法仍然是“贪婪的”。对于固定或可变数量的步骤，它会这样进行：

*   一步完成尽可能多的分块。
*   使用上一步的输出作为下一步的输入，然后重复。

这是幼稚的，因为如果早期步骤出错，这将破坏整个解析。

想一个“花园小径句”：

> 马跑过谷仓跌倒了。

还有一个类似的字符串，但完全不同的句子：

> 那匹马跑过谷仓。

构建一个解析这两个句子的 RegexpParser 可能会很困难，因为该方法依赖于正确的初始分块。一个正确的初始分块可能是另一个不正确的初始分块，但是在解析逻辑处于后期阶段之前，您无法知道“您在哪个句子中”。

例如，如果“谷仓倒塌”在早期被分块，解析将失败。

当你最终得到一个“糟糕”的解析时，你可以添加外部逻辑来回溯，看看你是否能找到一个更好的。但是，我想您会发现，解析算法的更多重要部分在您的外部逻辑中，而不是在 RegexpParser 中。

# compass-sass - 使用 `@import "compass/css3"` 而不是 `@import "compass/css3/border-radius"` 会受到惩罚吗？

> ID：15768681
> 
> 赞同：0
> 
> 时间：2013-04-02T15:57:53.347
> 
> 标签：compass-sass

我有一个 sass 文件

```
@import "compass/css3/border-radius";
@import "compass/css3/box-shadow"; 
```

我刚刚发现用

```
@import "compass/css3"; 
```

也有效。

有什么理由不使用后一种形式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:07:02.120

除非 import 引入了 mixins 以外的东西，否则唯一的开销将是在编译时，此时 sass 编译器必须跟踪更多的 mixins ——但计算机擅长这种事情，所以我不会出汗.

需要注意的是`@import "compass/reset";`，它会导入大量的重置样式。这也不会对性能产生太大影响，但它确实会在样式表中添加样式，从而改变输出。`.scss`样式会在您导入的位置插入，因此在稍后在文件中导入任何不是 mixin 的内容时要小心，因为[稍后的等特异性 CSS 规则胜过之前的规则](http://www.w3.org/TR/CSS21/cascade.html#cascading-order)。

但与往常一样，真正的答案是尝试`.scss`使用导入的最小文件，看看另一端会出现什么 CSS。最后，那个 CSS 就是你给浏览器的东西。确保它是犹太洁食！

# assembly - 带 JOS 的 A20 线

> ID：15768683
> 
> 赞同：0
> 
> 时间：2013-04-02T15:58:01.550
> 
> 标签：assembly, x86, bootloader, gdt

下面的代码片段是为 JOS 启用 A20。它有一个让我感到困惑的问题。“$0xdf”是一个命令，而不是数据。它应该输出到端口 0x64，这是命令端口。实际上，它的端口是0x60，也就是数据端口。在这里，存在两种方法（方法 3.1 和方法 3.2）： [http ://www.brokenthorn.com/Resources/OSDev9.html](http://www.brokenthorn.com/Resources/OSDev9.html)

所以，我的问题是：为什么最后要移植到 0x60 (outb %al, %0x60) ？

```
seta20.1:
  inb     $0x64,%al               # Wait for not busy
  testb   $0x2,%al
  jnz     seta20.1

  movb    $0xd1,%al               # 0xd1 -> port 0x64
  outb    %al,$0x64                                                                                

seta20.2:
  inb     $0x64,%al               # Wait for not busy
  testb   $0x2,%al
  jnz     seta20.2

  movb    $0xdf,%al               # 0xdf -> port 0x60
  outb    %al,$0x60 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:49:04.127

这似乎是一个标准程序。正如我在评论中所说，端口 0x60 与键盘相关。但这不是它的唯一功能。

## 经典 A20 控制，通过键盘控制器

> 键盘控制器的输出端口具有多种功能。位 0 用于复位 CPU（进入实模式） - 位 0 为 0 时发生复位。位 1 用于控制 A20 - 位 1 为 1 时启用，位 1 为 0 时禁用。 一组键盘控制器的输出端口，首先将 0xd1 写入端口 0x64，并将输出端口的所需值写入端口 0x60。人们通常会看到用于禁用/启用 A20 的值 0xdd 和 0xdf。因此：

```
call    empty_8042
mov     al,#0xd1                ! command write
out     #0x64,al
call    empty_8042
mov     al,#0xdf                ! A20 on
out     #0x60,al
call    empty_8042 
```

*资料来源：* [*A20——过去的痛苦*](http://www.win.tue.nl/~aeb/linux/kbd/A20.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-28T20:50:30.093

要向 PS/2 控制器发送命令，只需将命令字节写入 IO 端口 0x64。如果有“下一个字节”，则需要在确保控制器已准备好之后将下一个字节写入 IO 端口 0x60（通过确保状态寄存器的第 1 位被清除）。

因此，在将 0xd1 发送到端口 0x64 后，命令 0xdf 将发送到端口 0x60，从而启用 A20。

如果有响应字节，则需要在确定响应字节已到达（通过确保设置状态寄存器的位 0）后从 IO 端口 0x60 读取响应字节。

来源：[PS/2_Controller - osdev wiki](http://wiki.osdev.org/%228042%22_PS/2_Controller)

# android - androidannotations2.7.1 - AndroidManifest.xml 文件包含原始组件

> ID：15768684
> 
> 赞同：2
> 
> 时间：2013-04-02T15:58:05.147
> 
> 标签：android, android-annotations

我在配置[androidannotation](https://github.com/excilys/androidannotations)时遇到问题，刚刚下载了 androidannotations-bundle-2.7.1.zip。

我有一个使用 @EActivity 注释的 LoginActivity 并且在构建之后我遇到了以下错误：

```
The AndroidManifest.xml file contains the original component, and not the AndroidAnnotations generated component. Please register LoginActivity_ instead of LoginActivity 
```

Eclipse：3.7.2 我附上了一些可能相关的图像。如果您需要其他任何东西，请告诉我。

![注释处理-1](https://i.stack.imgur.com/r4nt2.png) ![注释处理-2](https://i.stack.imgur.com/eWZKl.png) ![Java 构建路径](https://i.stack.imgur.com/kZSFK.png) ![支持 Java-6](https://i.stack.imgur.com/K1IH5.png)

那么这个版本有什么问题（真的很怀疑），还是我的配置有问题（很可能）？

谢谢！

PS我知道这个[类似的问题](https://code.google.com/p/androidannotations/issues/detail?id=89)，但我相信我把罐子放对了。！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T07:21:58.297

问题是创建这个线程的yoyo（我！）不知道如何使用AndroidAnnotations。如果他花更多的精力研究它是如何工作的，他就会找到[这篇文章](https://github.com/excilys/androidannotations/wiki/HowItWorks)。

所以解决方案很简单，并在错误中描述，只需在清单中添加“_”：

```
<activity android:name=".activities.LoginActivity_" 
```

# c# - 什么是 C# 中的列表，它是如何工作的？

> ID：15768685
> 
> 赞同：2
> 
> 时间：2013-04-02T15:58:11.920
> 
> 标签：c#

如果我在网上搜索“c++ 列表”，我会很好地总结 c++ 中的列表如何工作，以及它的优点/缺点等。但是我在 C# 中找不到相同的。据我所知，名单并没有说明它是如何实现的，而且它在语言中的实际情况可能会有很大差异。

我需要将大量包含大量数据的文件加载到一个数组中，以便快速随机访问所有数据。但是它的数据太多，c# 找不到足够大的连续内存块。所以我打算创建一个包含许多数组并作为一个数组的抽象。它将有一个索引器属性，可以查看有关访问正确数组的信息。

但是后来我想，这不是列表在 c# 中的实际工作方式吗？我所知道的关于 c# 中列表的所有信息，或者至少认为，它们不像链表那样工作，在链表中无法访问随机元素，只能从前一个元素或可能从它后面的元素访问。

我能得到关于这件事的一些细节吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T16:04:47.667

要回答您的初始查询 - **'List' 由 c# 中的数组支持**

来自 MSDN：

[http://msdn.microsoft.com/en-us/library/ms379570(v=vs.80).aspx#datastructures20_1_topic5](http://msdn.microsoft.com/en-us/library/ms379570(v=vs.80).aspx#datastructures20_1_topic5)

List 是“**一个同构的、自修正维度的数组**”

这篇文章非常好，也许你正在寻找什么。

**Imp：** c# 中的 List 由数组支持，因此理论上的大小限制将是支持它的数组的限制。此外，在使用列表时，如果您确定要将其增长到一定大小，那么将初始容量设置为足够大以优化性能将是一个好主意。

但我觉得“列表”不是您在这里寻找的解决方案。

**建议：**也许如果您对文件大小有限制，您也许可以使用字典，将文件键入其内容，并使用规范文件路径作为密钥，并将内容存储在列表中。这也许对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:03:25.523

我认为这是一个非常好的定义，简而言之，来自 C# 5.0

> 在内部，List 和 ArrayList 通过维护一个内部对象数组来工作，在达到容量时替换为更大的数组。追加元素是有效的（因为末尾通常有一个空闲槽），但插入元素可能会很慢（因为必须移动插入点之后的所有元素以形成空闲槽）。与数组一样，如果在已排序的列表上使用 BinarySearch 方法，则搜索是有效的，但在其他方面效率低下，因为必须单独检查每个项目。

# asp.net - 检查用户是否输入了至少一个值 - .Net 验证控件

> ID：15768686
> 
> 赞同：0
> 
> 时间：2013-04-02T15:58:16.167
> 
> 标签：asp.net, validation

我在 ASP.NET 页面中有几个文本框，用户应该在页面提交之前至少在其中一个字段中输入一个值。我们有一个自定义验证器，如果用户通过将所有字段保留为空来点击提交，则会引发错误。

我需要用其他内置的 .Net 验证控件替换自定义验证器，我想知道是否有办法实现相同的效果。由于某些安全原因，不能选择使用 javascript。

这是我的customValidator：

```
<asp:customvalidator id="cvSearchCriteria" runat="server" ErrorMessage="Must enter at least one search criteria."></asp:customvalidator> 
```

代码背后：

```
If txtLastName.Text = "" And txtFirstName.Text = "" And txtMiddleInitial.Text = "" _ And ssnTxt.Text = ""
Then cvSearchCriteria.IsValid = False 
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:01:48.017

好吧，答案就在问题中，这是自定义验证器的典型用法……据我所知，.NET 中没有 OOTB 多字段验证器

# ios - Cocos2d 2.0：CC_ENABLE_GL_STATE_CACHE的含义和用法

> ID：15768687
> 
> 赞同：4
> 
> 时间：2013-04-02T15:58:21.593
> 
> 标签：ios, opengl-es, cocos2d-iphone, memcached

我想知道什么时候[应该](http://www.cocos2d-iphone.org/forum/topic/28610)启用**CC_ENABLE_GL_STATE_CACHE**以及使用它有什么限制。我发现一些[帖子](http://www.cocos2d-iphone.org/forum/topic/48831)表明某些设备上的某些 OpenGL 操作存在潜在问题

编辑：这就是我从配置文件中读取的内容。禁用此功能的主要原因是如果我使用以前的代码使用 OpenGL 1.x ES 函数，因此，使用 OpenGL 2.0 ES 从头开始​​这个项目应该没问题。

```
/** @def CC_ENABLE_GL_STATE_CACHE
 If enabled, cocos2d will maintain an OpenGL state cache internally to avoid unnecessary switches.
 In order to use them, you have to use the following functions, insead of the the GL ones:
    - ccGLUseProgram() instead of glUseProgram()
    - ccGLDeleteProgram() instead of glDeleteProgram()
    - ccGLBlendFunc() instead of glBlendFunc()

 If this functionality is disabled, then ccGLUseProgram(), ccGLDeleteProgram(), ccGLBlendFunc() will call the GL ones, without using the cache.

 It is recommened to enable it whenever possible to improve speed.
 If you are migrating your code from GL ES 1.1, then keep it disabled. Once all your code works as expected, turn it on.

 Default value: Disabled by default

 @since v2.0.0
 */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:14:17.857

它应该默认启用。

我知道默认情况下未启用的唯一原因是您所说的：向后兼容性。但是由于你不应该在 cocos2d 2.0 中使用 GL ES 1.1 函数，这可能只适用于从 cocos2d 1.x 升级到 2.x 并逐渐将他们的 GL ES 1.1 代码迁移到 2.0 的人——尽管你必须改变大部分，在这种情况下，如果不是所有自定义 GL 代码。

自 2012 年 10 月（在 KT 发布之前）以来，我在[KoboldTouch](http://www.learn-cocos2d.com/store/koboldtouch)中启用了状态缓存，它没有给我造成任何问题，也没有任何使用 KT 的人报告与状态缓存相关的问题。

# java - HashMap 内部使用 LinkedList

> ID：15768695
> 
> 赞同：15
> 
> 时间：2013-04-02T15:59:15.040
> 
> 标签：java, hashmap

```
public V get(Object key) {
if (key == null)
    return getForNullKey();
    int hash = hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash && ((k = e.key) == key || key.equals(k)))
            return e.value;
    }
    return null;
} 
```

我所知道的是，如果你想从中获取一个对象`HashMap`，首先它会根据哈希码/哈希值搜索哈希桶，然后遍历该哈希桶`LinkedList`（假设差异对象具有相同的哈希码，因此在相同的哈希桶）。

但是在查看上面的代码之后，我无法理解它何时迭代 LinekedList（以及 LinkedList 在哪里）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T16:02:07.297

桶*是*有效的链表。该`table`数组是一个`Entry`元素数组，每个元素`Entry`都是一个链表，因为每个条目都知道列表中的下一个元素，直到`next`引用为空时到达末尾。您显示的`for`循环遍历链表。

它不是 a `LinkedList`-`java.util.LinkedList`它是一个单独的（更简单的）实现，仅用于地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T16:04:26.743

它确实使用链表，但不使用`java.util.LinkedList`类。

基本上`e.next`是您正在寻找的东西。每个条目都有一个对桶中下一个条目的引用——它是一个链表实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-24T19:26:12.503

`e.next`就是你要找的。每个条目都有对桶中下一个条目的引用；这是一个链表实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T13:35:27.210

桶是链表。
表是一个数组，它在数组的元素处存储第一个条目（链表）的地址。
说在表数组的位置0，需要存储两个条目对象，然后表[0]将存储条目1（链表）的地址，条目1将存储条目2的地址。For 循环有助于遍历这些入口对象。
`table[0] --> entry1 --> entry2 --> null // Hence output is entry2 of get().`

但是自从 Java 8 以来，世界发生了变化，因为树用于存储条目对象。

# google-app-engine - 如何在 GAE/J 上带有 JDO 的列表中的键为空时捕获 NPE

> ID：15768699
> 
> 赞同：0
> 
> 时间：2013-04-02T15:59:24.067
> 
> 标签：google-app-engine, jdo

访问定义如下的字段时，我在 App Engine 上遇到以下异常

```
@Persistent(mappedBy = "shelf")
@Element(dependent = "true")
private List<ShelfData> shelfData = new ArrayList<ShelfData>(); 
```

我通过查看[代码](https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/datastore/AsyncDatastoreServiceImpl.java "编码")推测列表中有一个项目为空。我不知道它是如何到达那里的，因为我所有的插入都包含在事务中。但是，我真正想做的是捕获错误（并忽略它，甚至删除有问题的项目）。

```
Uncaught exception from servlet

java.lang.NullPointerException
    at com.google.appengine.api.datastore.AsyncDatastoreServiceImpl.doBatchGetBySize(AsyncDatastoreServiceImpl.java:306)
    at com.google.appengine.api.datastore.AsyncDatastoreServiceImpl.get(AsyncDatastoreServiceImpl.java:275)
    at com.google.appengine.api.datastore.DatastoreServiceImpl$1.runInternal(DatastoreServiceImpl.java:68)
    at com.google.appengine.api.datastore.DatastoreServiceImpl$1.runInternal(DatastoreServiceImpl.java:65)
    at com.google.appengine.api.datastore.TransactionRunner.runInTransaction(TransactionRunner.java:29)
    at com.google.appengine.api.datastore.DatastoreServiceImpl.get(DatastoreServiceImpl.java:65)
    at com.google.appengine.datanucleus.WrappedDatastoreService.get(WrappedDatastoreService.java:80)
    at com.google.appengine.datanucleus.FetchFieldManager.getCollectionFromDatastoreObject(FetchFieldManager.java:666)
    at com.google.appengine.datanucleus.FetchFieldManager.fetchRelationField(FetchFieldManager.java:483)
    at com.google.appengine.datanucleus.FetchFieldManager.fetchObjectField(FetchFieldManager.java:405)
    at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2353)
    at com.myapp.model.Shelf.jdoReplaceField(Shelf.java)
    at com.myapp.model.Shelf.jdoReplaceFields(Shelf.java)
    at org.datanucleus.state.JDOStateManager.replaceFields(JDOStateManager.java:1935)
    at org.datanucleus.state.JDOStateManager.replaceFields(JDOStateManager.java:1962)
    at com.google.appengine.datanucleus.DatastorePersistenceHandler.fetchObject(DatastorePersistenceHandler.java:567)
    at org.datanucleus.state.JDOStateManager.loadFieldsFromDatastore(JDOStateManager.java:1638)
    at org.datanucleus.state.JDOStateManager.loadSpecifiedFields(JDOStateManager.java:1240)
    at org.datanucleus.state.JDOStateManager.isLoaded(JDOStateManager.java:1728)
    at com.myapp.model.Shelf.jdoGetshelfData(Shelf.java)
    at com.myapp.model.Shelf.getShelfData(Shelf.java:137)
    ... 
```

修复数据显然是最终的计划，但我不确定如何去做，因为一旦我访问该字段，它就会抛出这个错误。

# mysql - 重命名 Root @本地主机用户名 mySQL

> ID：15768704
> 
> 赞同：11
> 
> 时间：2013-04-02T15:59:52.593
> 
> 标签：mysql

我正在尝试将根用户名重命名为其他名称，我正在使用以下代码，但是，我收到一个错误:(

```
RENAME USER 'root'@'localhost' TO 'chosenName'@'localhost'; 
```

我收到以下错误...

```
ERROR 1396 (HY000) : Operation RENAME USER failed for 'root'@'localhost' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T16:03:39.180

试试这个

```
UPDATE mysql.user set user = <newrootname> where user = 'root';
FLUSH privileges; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-11T20:21:32.103

试试这个它肯定会起作用，但只是确保语法没有错误

```
mysql> use mysql;
mysql> update user set user="new_user" where user="root";
mysql> flush privileges; 
```

# java - JComboBox中JButton中的按下效果

> ID：15768709
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:00:04.757
> 
> 标签：java, swing, jbutton, jcombobox

当我在 JComboBox 中按下 JButton 时，按下效果不可见。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:42:01.907

如果您指的是箭头按钮，则可以在相应的 UI 类中覆盖 createArrowButton。

对于这样的基本用户界面：

```
 public class MyComboBoxUI extends BasicComboBoxUI
{

    @Override
    protected JButton createArrowButton()
    {
        try
        {
            final JButton button = new JButton();
            //do whatever you like with the button
        }
        catch (final Exception e)
        {
            return super.createArrowButton();
        }
    }
 } 
```

然后使用 yourComboBox.setUI(new MyComboBoxUI());

# javascript - Dynamics CRM 2011 传递数组作为参数

> ID：15768710
> 
> 赞同：2
> 
> 时间：2013-04-02T16:00:14.137
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

我尝试将参数设置为：

```
array("item1","item2","item3") 
```

以及：

```
new array("item1","item2","item3") 
```

以及：

```
var Labels = new array("item1","item2","item3") 
```

![在此处输入图像描述](https://i.stack.imgur.com/8xYcv.png)

但我似乎无法将数组传递给以下函数：

```
function BoldLabel(Labels) {
  var length = Labels.length;
  var element = null;
  for (var i = 0; i < length; i++) {
    element = Labels[i];
    document.getElementById(element).style.fontWeight="bolder";
    document.getElementById(element).style.fontSize="13px";
  }
} 
```

我不断收到“数组未定义”错误。我确信我在某处看到了这个，但再也找不到这个例子了。问题是我希望能够重用此代码，因此仅传递我想要加粗的项目数组比将代码剪切并粘贴到新函数并单独写入每个标签名称更容易，例如

```
document.getElementById("new_pricingsubtotal_c").style.fontWeight="bolder";
document.getElementById("new_pricingsubtotal_c").style.fontSize="13px";
document.getElementById("new_pricingsubtotal1_c").style.fontWeight="bolder";
document.getElementById("new_pricingsubtotal1_c").style.fontSize="13px";
document.getElementById("new_lineitemtotal_c").style.fontWeight="bolder";
document.getElementById("new_lineitemtotal_c").style.fontSize="13px";
document.getElementById("new_trucktotalcost_c").style.fontWeight="bolder";
document.getElementById("new_trucktotalcost_c").style.fontSize="13px"; 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:05:39.760

你试过`Array`（而不是`array`）？此外，您可以尝试使用数组文字，例如：`var myarray=["item1", "item2", "item3"]`

# asp.net-mvc - ASP.NET MVC 进度指示器

> ID：15768715
> 
> 赞同：1
> 
> 时间：2013-04-02T16:00:32.700
> 
> 标签：asp.net-mvc, progress

我应该如何为正在导入数据的进程实现进度指示器 gif。

点击按钮，用户浏览输入文件，选择并点击上传按钮。单击上传按钮时，应显示进度指示器 gif。如果文件路径为空，则进度指示器不应启动。是否可以禁用页面。我正在使用 asp.net mvc 3

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:28:31.810

除非您使用 Ajax，否则实际上不可能做到这一点。如果这样做，那么您可以在开始 ajax 调用之前简单地显示动画 gif，然后在成功时将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T16:14:13.493

看这个：

[ASP.Net MVC 加载进度指示器](https://stackoverflow.com/questions/287014/asp-net-mvc-loading-in-progress-indicator)

这个想法很简单：用gif创建一个div，在大进程上显示div，然后隐藏div。

# mysql - 带有两个子查询的 concat 中的 SQL 错误

> ID：15768720
> 
> 赞同：1
> 
> 时间：2013-04-02T16:00:50.570
> 
> 标签：mysql, sql, concat

我正在尝试这段代码。但是我收到语法错误。正确的方法是什么？

```
UPDATE Classificacao AS C
SET C.ClassificacaoCPV_id = (
    SELECT CONCAT(
      SELECT ClassificacaoCPV FROM Classificacao, 
      SELECT substring_index(`ClassificacaoCPV_id`,'|',-1) FROM Classificacao)
 ) 
```

> 错误：SQL 错误 (1064)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以
> 在第 4 行的 'SELECT C.ClassificacaoCPV FROM Classificacao, SELECT substring_index(`Class'附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:26:58.823

我可以从中得出的是，您要创建一个 ClassificatiocaoCPV_id，它是 ClassificatiocaoCPV 和现有 ClassificatiocaoCPV_id 的一部分的串联。

```
UPDATE Classificacao
   SET ClassificacaoCPV_id = 
          CONCAT(ClassificacaoCPV, substring_index(ClassificacaoCPV_id,'|',-1)) 
```

在飞行中执行此操作有点危险。您的假设只会起作用一次，然后您可能`ClassificacaoCPV_id`再次拉动柱子时运气不佳。给您的一些建议： 1) 运行以下查询并确保结果是您所期望的，然后再更新您也从中提取数据的列。2) 添加一个额外的列，例如`ClassificacaoCPV_id_new`新的 ID 列，而不是更新您从中提取部分数据的列。

`select CONCAT(C.ClassificacaoCPV, substring_index(ClassificacaoCPV_id, '|',-1) from ClassificacaoCPV`

记得测量两次，因为你只能切割一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:10:02.093

子查询需要额外的括号：

```
UPDATE Classificacao AS C
SET C.ClassificacaoCPV_id = (
    SELECT CONCAT(
      (SELECT ClassificacaoCPV FROM Classificaca o), 
      (SELECT substring_index(`ClassificacaoCPV_id`,'|',-1) )
    FROM Classificacao)
 ) 
```

这假设每个子查询返回一个值。您可能需要`group_concat()`用于此查询。

# java - java中的Jframe与Eclipse不显示

> ID：15768722
> 
> 赞同：0
> 
> 时间：2013-04-02T16:00:52.850
> 
> 标签：java, eclipse, swing, jframe

我遇到了 Eclipse 的问题，它没有从我计算机上的 java 代码打开 JFrame，但它在我朋友的计算机上工作，我该怎么办？（它也没有显示任何错误）

这是创建 JFrame 的文件：

```
package frame;

import java.awt.BorderLayout;
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;
import javax.swing.Timer;

import java.util.ArrayList;

import javax.swing.*;

public class Design implements KeyListener {

    private JFrame mainFrame;
    private Theme theme;
    private ImageMario mario;
    boolean right=false;
    boolean left=false;
    boolean up=false;
    boolean down=false;
    private ArrayList<String> keys = new ArrayList<String>();
    public int counterLoads;
    private ArrayList<Integer> relief;
    private Timer timer;

    public Design(ArrayList<Integer> rel, int minutes){
        this.timer = new Timer(minutes*60000, new TimeEnd(this));
        this.relief =rel;
        this.mario = new ImageMario(100,770, this.relief);
        this.mainFrame = new JFrame("Super Mario Bros");
        this.mainFrame.setFocusable(true);
        this.mainFrame.addKeyListener(this);
        this.theme = new Theme(relief, 3000);
        this.theme.setLayout(new BorderLayout());
        this.mainFrame.setContentPane(this.theme);
        this.mainFrame.getContentPane().add(this.mario);
        this.mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.mainFrame.setSize(1440, 830);;
        this.mainFrame.setVisible(true);

    }    
} 
```

这是主要功能所在的文件：

```
import java.util.ArrayList;

import frame.Design;
import frame.ImageRelief;

public class SuperMarioBros{

public static void main(String[] args){
    ImageRelief r = new ImageRelief(3000);
    ArrayList<Integer> relief = r.generateRelief();
    new Design(relief, 3);  
}
} 
```

这是主题文件：

```
package frame;

import java.awt.*;

import java.awt.Image;
import java.util.ArrayList;

import javax.swing.*;

public class Theme extends JPanel {

private ArrayList<Integer> rel;
private int km;
private Image img = new ImageIcon(this.getClass().getResource("/Images/ground.png")).getImage();
private Image bg = new ImageIcon(this.getClass().getResource("/Images/background.jpg")).getImage();

public Theme(ArrayList<Integer> r, int k){
    this.rel = r;
    this.km = k;

    }

    public void paintComponent(Graphics g) {
        int i=0;
        g.drawImage(this.bg, 0, 0, getWidth(), getHeight(), this);
        while (i < this.km){
        g.drawImage(this.img, i, this.rel.get(i/100), 100, 220, this);
        i +=100;
        }
    }
} 
```

谢谢 ！

# ios - iOS 上的 HTML5 画布滚动

> ID：15768724
> 
> 赞同：1
> 
> 时间：2013-04-02T16:00:55.920
> 
> 标签：ios, html, canvas, touch

我正在使用 canvas 元素编写一个 HTML5 页面，它允许用户使用触摸 API 用手指滚动大图像。我想防止用户滚动到图像的右下边缘之外。换句话说，我希望在用户到达图像的右边缘或下边缘时停止滚动。我已经计算出了这样做的计算，并让它按照我想要使用常规网络浏览器的方式工作。我遇到的问题是，在 iOS 上，操作系统会使用像素采样自动缩小大图像，而这种自动缩放会干扰我了解缩小图像边界的能力。我需要的是一种可靠的方法来了解图像的真实尺寸，无论 iOS 是否将其缩小。到目前为止，我一直无法找到这一点。谁能帮助我如何确定这一点？我真的不在乎 iOS 是否缩小了它，但我需要知道缩小图像的尺寸，这样我才能知道何时阻止用户滚动超出图像的边缘。

# javascript - 什么时候可以在 JavaScript 中使用 ==？

> ID：15768729
> 
> 赞同：7
> 
> 时间：2013-04-02T16:01:06.117
> 
> 标签：javascript, operators, equality

来自：[http ://www.2ality.com/2011/12/strict-equality-exemptions.html](http://www.2ality.com/2011/12/strict-equality-exemptions.html)

> JavaScript 有两个运算符用于确定两个值是否相等：
> 
> *   严格相等运算符 === 仅考虑具有相同类型的相等值。
> *   “正常”（或宽松）相等运算符 == 在比较严格相等之前尝试转换不同类型的值。
> 
> 给 JavaScript 初学者的建议是完全忘记 == 并始终使用 ===。

但是不使用 == 运算符的原因是什么？会不会带来安全风险？

但是使用 typeof 运算符我们可以确定结果将是一个字符串。然后 == 可以安全使用，因为我们可以确定它不会执行任何转换恶作剧：

```
if (typeof x == "function") {
    ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T16:03:55.057

当`==`代码对引擎盖下发生的隐式转换感到满意时，可以使用操作符。这个过程虽然有时与直觉相反，但定义明确。

但是，我仍然绝对会`===`在您提供的示例中使用。当预计不会发生转换时，使用`==`会给读者带来混乱。它说“我期望转换”，而实际上不会发生转换。您应该使用满足您正在寻找的条件的最具体的运算符

```
if (typeof x === "function") { 
  ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T16:08:47.993

如果您确定它不会按照您的示例执行任何“转换恶作剧”，那么**是的，您仍然应该使用`===`**，因为您将节省解析器必须确定是否需要执行转换。所以你会得到更好的表现。（边缘，但仍然）

这与安全无关；它是关于性能和以正确的方式做事的。

唯一应该使用双等号的地方是你事先知道你肯定想要使用 javascript 的隐式类型转换。例如，如果您想检查输入字段的数值（可能是字符串），可能就是这种情况。但即便如此，在很多情况下，最好先手动转换值。

简而言之，`===`除非您确定需要`==`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:20:50.393

当我最初阅读您的问题时，我想到了两种情况：

1.  将用户输入的值与整数进行比较时
2.  将对象与 null 或 undefined 进行比较时，因为 null 不明确等于 undefined

但是我做了一些阅读，发现了[这个](http://www.2ality.com/2011/12/strict-equality-exemptions.html)，这是一个非常有力的理由，永远不要使用 ==。我想这取决于你的意图，如果你想要一个快速（并且可以说是讨厌的）包罗万象然后使用 ==，但它可能更好的做法（和一些额外的工作）来实现显式比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:05:35.570

如果它们都是字符串，你没有理由**不**使用 ===。

== 不被推荐，因为你可能会忘记在那种场景中使用'typeof'，或者你可能根本没有意识到类型不能'自然'比较......当然你仍然可以使用它，但你真的应该只在你真的**需要**比较不同类型并了解这些类型的结果何时为真/假时才使用它

# java - 归并排序算法无限循环

> ID：15768730
> 
> 赞同：1
> 
> 时间：2013-04-02T16:01:07.783
> 
> 标签：java, infinite-loop, mergesort

我正在尝试创建一个合并排序算法，但是当我对分解的数组进行排序时，我进入了一个无限循环，主要问题发生在下面的合并方法中。在此先感谢您的帮助。

```
public static void mergeSort(double[] arr)
{
    int count = n;
    long startTime = System.currentTimeMillis();
    int mid = arr.length;
    if(arr.length > 1)
    {
        mid = arr.length/2;
    }
    else
    {
        return;
    }

    double[] a = new double[mid];
    double[] b = new double[arr.length-mid];

    for(int i = 0; i < a.length; i++)
    {
        a[i] = arr[i];
        System.out.println("A = " + a[i]);
        count++;
    }
    for(int i = 0; i < b.length; i++)
    {
        b[i] = arr[i+mid];
        System.out.println("B = " + b[i]);
        count++;
    }

    mergeSort(a);
    mergeSort(b);
    merge(arr, a, b);
}

public static void merge(double[] arr, double[] a, double [] b)
{
    int elem = a.length + b.length;
    int i,j,k;
    i = j = k = 0;
    while(i < elem )
    {
        if((j < a.length) && (k < b.length))
        {
            if(a[j] < b[k])
            {
                arr[i] = a[k];
                i++;
                j++;
            }
            else
            {
                arr[i] = b[k];
                i++;
                k++;
            }
        }
        else
        {
            if(j >= a.length)
            {
                while(k < b.length)
                {
                    arr[i] = b[k];
                    i++;
                    k++;
                }
            }
            if(k >= b.length)
            {
                while(j >= a.length)
                {
                    arr[i] = a[j];
                    j++;
                    i++;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:14:42.037

```
while(j >= a.length)
{
    arr[i] = a[j];
    j++;
    i++;
} 
```

我想知道这里发生了什么......

当 j>=a.length 时，做点什么，让 j 变大……你预计这会在什么时候结束？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:18:03.297

如果`j`大于 a.length 开始（可能是），那么就是你的无限循环。

```
while(j >= a.length)
            {
                arr[i] = a[j];
                j++;
                i++;
            } 
```

# networking - NAT 或代理如何对传入的 TCP SYN 数据包作出反应？

> ID：15768731
> 
> 赞同：0
> 
> 时间：2013-04-02T16:01:10.543
> 
> 标签：networking, tcp, proxy, nat

在某些消息传递系统中，两个消息传递客户端在聊天或语音通话中直接相互发送/接收数据包。我认为基本机制是（例如 TCP）：这些客户端程序打开一个侦听 TCP 套接字并告诉消息/协调服务器他们的 IP/PORT 对。然后客户端程序从消息/协调服务器检索另一端的 IP/PORT。然后其中一个（假设 A）与另一个（假设 B）使用检索到的 B 的 IP/PORT 对启动 TCP。

当被动客户端 B（等待 TCP SYN 数据包）不在 NAT 或代理之后，这很好。但如果 B 在 NAT 或代理之后，那么 IP/PORT 对实际上是 NAT 或代理的公共网络接口。

所以我的问题是，当 NAT 或代理收到 TCP SYN 时，它的反应是什么？他们如何将 TCP SYN 中继到其后面的相应主机/进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:59:33.083

我怀疑您最初的假设是否正确。更有可能的是，它们都打开了与服务器的活动连接，并且服务器在它们之间路由数据。它更简单，您描述的问题消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T16:22:34.163

这个问题显然是很久以前提出的，但仍然......

聊天和语音/视频通话的处理方式通常完全不同。在聊天的情况下，您可能会使用 XMPP 协议，两端都将连接到服务器并通过它交换数据。XMPP 驻留在第 4 层的 TCP 上，因为在这种情况下，可靠性比延迟优先级更高。由于客户端是打开和维护连接的客户端，因此在这种情况下您不会遇到 NAT 问题。

另一方面，语音/视频通话要复杂一些，因此您通常需要：

*   信令部分，您可以在其中协商设置呼叫所需的网络（IP 地址和端口）和编解码器详细信息（称为 SDP - 会话描述协议）
*   媒体部分，您可以在其中有效地在 2 个通话方之间交换语音/视频内容。

信令通常通过 TCP 使用一些更高层的协议，如 SIP（​​会话发起协议）。这种通信将通过服务器。媒体使用 RTP（实时传输协议）等更高层协议通过 UDP，这部分通信通常是点对点的。单个 UDP 端口可用于传输和接收一个语音/视频通道的流量。此外，您可能希望在通话到位时获得有关通话质量的信息，因此您可以例如减少使用的带宽以避免/减少数据包丢失。为此，您将使用诸如 RTCP（实时传输控制协议）之类的协议。在这种情况下，NAT 穿越至关重要！由于两个客户端都不知道他们的公共 IP 地址，您需要一个位于您的内部网络（在公共互联网上）的服务器，它可以告诉“从外部如何看到您”，即在 NAT 后面。在例如 WebRTC 世界中，该服务器知道 ICE。在对等方发现它是如何从互联网上看到的之后，它将把该信息放在信令消息的 SDP 片段中，以便另一端可以通过互联网到达它。请记住，执行 NAT 的路由器可能还需要一些额外的设置来跟踪正在使用的语音/视频 UDP 端口（将来自 Internet 的流量 NAT 回传给您）。我会将该信息放在信令消息的 SDP 片段中，以便另一端可以通过互联网到达它。请记住，执行 NAT 的路由器可能还需要一些额外的设置来跟踪正在使用的语音/视频 UDP 端口（将来自 Internet 的流量 NAT 回传给您）。我会将该信息放在信令消息的 SDP 片段中，以便另一端可以通过互联网到达它。请记住，执行 NAT 的路由器可能还需要一些额外的设置来跟踪正在使用的语音/视频 UDP 端口（将来自 Internet 的流量 NAT 回传给您）。

最后，在这些情况下还使用了其他解决方案，但这取决于您的设置。如果您正在为最终用户编写软件，那么前面的解释将适用。但是，如果您正在为企业市场编写软件，那么在您的企业网络边界添加额外服务器（称为 EDGE）等解决方案将是一种常见的方法。

我可以写几个小时，但这应该足以开始...... :)

# php - 如何在数据库中添加超链接

> ID：15768732
> 
> 赞同：0
> 
> 时间：2013-04-02T16:01:13.370
> 
> 标签：php, javascript, jquery, html, mysql

我有一个 Textarea 框，它 onSubmit 将数据发送到数据库。我可能在某些输入中有超链接，当我加载数据时，我希望链接显示为超链接而不是常规文本。

我想我会尝试使用 strpos 来尝试查找所有 HTTP 实例，但是然后使用 trim 甚至可能会爆炸会变得太混乱。

```
if (strpos($data[$i], 'http:') !== false) { } 
```

我知道我可以`<a href="link.html">Link</a>`在我的文本区域中添加，当它被拉出数据库时，它将充当链接。但是，这有一个问题，如果我想再次编辑此数据，它会在链接旁边添加斜杠`<a href="\link.html\">Link</a>`。链接仍然有效，但它只是数据库中我不需要的额外字符。如果我编辑大约 10 次，它将在数据库中添加 20 个斜杠。

任何帮助我走上正轨的帮助或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:04:29.740

在您的应用程序和数据库之间的某个时刻，您正在转义正在发送的字符串。当数据从数据库中提取出来时，请尝试使用[`stripslashes()`](http://php.net/manual/en/function.stripslashes.php)它。

# java - 每个模块的 Maven java 版本

> ID：15768734
> 
> 赞同：0
> 
> 时间：2013-04-02T16:01:22.483
> 
> 标签：java, eclipse, maven, intellij-idea

想要将 java 7 编译的模块添加到现有的 java 6 编译的 maven 项目中。

任何人都知道这个项目结构是否支持：

1) Maven
2) Intellij Idea
3) Eclipse

任何其他想法为什么应该（或不应该）这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:35:05.277

是的，这是支持的。对于每个模块，在 Maven 中，您需要指定正确的编译器源和目标版本。当您将其导入 IntelliJ 时，它会知道。我相信 Eclipse 也会解决这个问题。

# java - 按日期订购。比较器。爪哇

> ID：15768735
> 
> 赞同：4
> 
> 时间：2013-04-02T16:01:26.003
> 
> 标签：java, arguments, comparator

取自[本](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)java 教程的下一个片段将第二个参数对象与第一个参数对象进行比较，而不是反之亦然。*hireDate() 方法返回一个 Date 对象，表示该特定员工的雇用日期。

```
import java.util.*;
public class EmpSort {
    static final Comparator<Employee> SENIORITY_ORDER = 
                                        new Comparator<Employee>() {
            public int compare(Employee e1, Employee e2) {
                return e2.hireDate().compareTo(e1.hireDate());
            }
    }; 
```

这里是java教程解释：

> 请注意，比较器将其第二个参数的雇用日期传递给其第一个参数，而不是反之。原因是最近聘用的员工资历最低；按雇用日期的顺序排序将使列表以相反的资历顺序排列。

我仍然不明白为什么通过反转 e1 和 e2`compareTo`应该可以解决问题。

有什么进一步的说明吗？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T16:22:52.630

如果要更改排序顺序，请使用：

```
Collections.sort(list, Collections.reverseOrder(comparator)); 
```

不要玩比较器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T16:16:54.837

日期的自然顺序（由 定义`compareTo`）是较晚的日期“大于”较早的日期。对于资历，在那里待得越久的人资历越高，也就是说，您希望*较早的*开始日期表示比较晚的人资历更高。

由于合同`Comparator`规定如果`compare(a,b) != 0`then `compare(a,b)`and`compare(b,a)`必须具有相反的符号，您有两种选择来实现`a`and的反向排序比较`b`- 要么返回，`-(a.compareTo(b))`要么`b.compareTo(a)`- 它们保证具有相同的符号。

它们不一定具有相同的*值*，但对于比较器结果而言，唯一重要的是它们是`>`0`<`还是`==`0 - 虽然许多示例使用`-1`，`0`并且`+1`具有正确符号的任何值都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:04:56.130

如果、或，比较器的`compare`方法期望返回 -1、0 或 1 。因此，如果您得到的最终订单与期望的相反，只需反转 a 和 b 即可解决问题。`e1<e2``e1==e2``e1>e2`

# python - 从 OSX 上插入的设备获取 USB 设备串行

> ID：15768737
> 
> 赞同：5
> 
> 时间：2013-04-02T16:01:34.000
> 
> 标签：python, macos, usb, pyobjc

我在 Lion 和 NSNotification 中心使用 Python 2.7 和 pyobjc 来监控任何插入的 USB 卷。这工作正常。

我也有一些想法如何获取设备的序列号，但这些只涉及解析所有 USB 设备。我只想专门查询插入的设备（创建通知的设备），而不是检查整个 USB 设备列表。

如何实现？传递给我的处理程序函数的`NSNotification`对象没有那种信息，而且我无法使用`NSNotification`对象提供的信息找到任何有关执行上述操作的信息。

我已经尝试过 DBus（就像我在 Linux 上所做的那样），但我没有太多运气让它在 OSX 上可靠地工作。

# c# - 如何获取 WinPhone WebClient 返回的 HTTP 状态码？

> ID：15768738
> 
> 赞同：1
> 
> 时间：2013-04-02T16:01:34.707
> 
> 标签：c#, http, windows-phone-8, windows-phone, webclient

我需要向 HTTP 服务器发送一段文本。我需要相当确定地知道已成功发送，而不是发送到强制门户或类似的门户。由于 HTTP 服务器的一些限制，我最好的方法是确保返回的 HTTP 状态码是 200。

如何获取服务器返回的 HTTP 状态码？

这是我当前的代码：

```
 WebClient client = new WebClient();
        client.Headers["Content-Type"] = "text/xml";
        client.Encoding = Encoding.UTF8;
        bool? result=null;
        try
        {
            client.UploadStringAsync(server, "POST", data);
            client.UploadStringCompleted += (s, e) =>
                {
                    result=e.Error == null;
                };
        }
        catch { } 
```

当前`e.Error`将在服务器返回 400-500 错误代码时设置，但如果服务器返回 300 系列 HTTP 状态代码则不设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:39:30.663

我没有机会测试这段代码，但是，它可能会给你一两个想法：

```
 string data;

        var request = HttpWebRequest.Create("http://yourserver") as HttpWebRequest;
        request.Accept = "text/xml";
        request.Headers.Add("Accept-Charset", "utf-8");

        try
        {
            var response = await Task.Factory.FromAsync<WebResponse>(request.BeginGetResponse, request.EndGetResponse, null);

            // do something with your data, e.g. read it, deserialize it
            using (var responseStream = response.GetResponseStream())
            {
                using (var reader = new StreamReader(responseStream))
                {
                    data = reader.ReadToEnd();
                }
                // ....
            }

            var somethingInteresting = response as HttpWebResponse;
            Debug.WriteLine("Status is {0}", somethingInteresting.StatusCode);
        }
        catch (WebException ex)
        {
            var errorResponse = ex.Response as HttpWebResponse;
            var errorHttpStatusCode = errorResponse.StatusCode;

            Debug.WriteLine("Here's your error Http status: {0}", ex.Status);
        } 
```

# php - 使用内部用户定义函数的 ob_start() 出错

> ID：15768743
> 
> 赞同：0
> 
> 时间：2013-04-02T16:01:46.830
> 
> 标签：php, web, buffer

```
function d() {
            return "from d output\n";

        }
        ob_start();
        //var_dump("any thing\n");
        d();
        $a= ob_get_clean();
        echo "$a"; 
```

我开始在 php 中做事。我已经使用了这段代码，但在这种情况下，浏览器不会打印任何输出。但是每当我`var_dump("anything\n");`在两个`ob_`块中使用代码时，我都会得到输出。`var_dump()`我的问题是在这种情况下，我的手写函数的输出和我的手写函数有什么区别`d()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:04:10.807

改变这个：

```
d(); 
```

...进入这个：

```
echo d(); 
```

调用函数不会自动打印其返回值。或者，如果你想模仿`var_dump()`的行为：

```
function d() {
    echo "from d output\n";
} 
```

# php - 将 PHP 变量发送到更多页面

> ID：15768745
> 
> 赞同：-2
> 
> 时间：2013-04-02T16:01:56.733
> 
> 标签：php, javascript, jquery, html, ajax

我有个问题。我将变量**c_prot**发送到页面**parsing.php**。它有效，但我需要同时将**c_prot**发送到 page **chart.php**但它不起作用。如果你解决了类似的问题或者你知道怎么做，如果你能帮助我，我将非常感激。

非常感谢！：）

这是我的代码：

```
<script type="text/javascript">  
$(document).ready(function()
{
$('#generuj').submit(function()
{
    $.post('parsing.php',
    {
        c_prot : $('select#protokoly option:selected').val()
    },
    function(data)
    {
        if(data == 'no')
        {
            $('#refresh').html('Chyba')
        }
        else
        {
            $('#refresh').html(data);  //  START
            $('chart_plot').click(function() 
                      {
                        document.location.reload();
                      });

                   //END
        }
    });

    $.post('chart.php',
    {
    c_prot : $('select#protokoly option:selected').val() 
    });
    return false;   
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:10:09.257

由于您使用位置刷新，您的页面可能会丢弃从chart.php 返回的任何内容。试试这个：

```
$.post('parsing.php',
{
    c_prot : $('select#protokoly option:selected').val()
},
function(data)
{
    $.post('chart.php',
    {
        c_prot : $('select#protokoly option:selected').val()
    }).done(function(){
       if(data == 'no')
       {
           $('#refresh').html('Chyba')
       }
       else
       {
           $('#refresh').html(data);  //  START
           $('chart_plot').click(function() 
                     {
                       document.location.reload();
                     });

                  //END
       }
    });
}); 
```

这样，当您收到第一个帖子的回复时，您正在调用您的第二个帖子，但在您刷新页面之前。

# javascript - rails respond_to 究竟是如何工作的？

> ID：15768747
> 
> 赞同：1
> 
> 时间：2013-04-02T16:01:59.190
> 
> 标签：javascript, ruby-on-rails, ajax

我目前正在构建一个需要远程表单的应用程序，我发现我从来没有真正理解过 Rails 是如何`respond_to`工作的。

例如，我在视图中有以下代码

```
<%= form_tag ..., :remote => true %>
<%= submit_tag "submit" %>
<% end %> 
```

而且我有一个名为 javascript 的部分`_home.js.erb`，假设相关的操作是命名的`home`。

我明白，如果我的控制器中有以下代码：

```
def home
    # ...
    respond_to do |format|
        format.html
        format.js { render :partial => 'home' }
    end
end 
```

`_home.js.erb`这将在按下表单的提交按钮时执行 javascript 。但是，按下提交按钮时究竟发生了什么？rails 究竟是如何知道是`respond_to`html 还是 javascript？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:21:49.957

如果标头表明它是类型的，则 Responder 对象呈现[内容](https://github.com/rails/rails/blob/82a8698e564e5c27ac3516f0b44449a74b4389be/actionpack/lib/action_controller/metal/responder.rb#L212)

*   html
*   js

否则，调用一个魔术方法，该方法调用作为响应类型名称的 object.method（例如`csv`）

这要求将这样的方法定义为响应类型的处理程序。 [此处回答了有关如何创建自定义响应者的很好的讨论](https://stackoverflow.com/questions/5182344/rails-3-how-to-respond-with-csv-without-having-a-template-file)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:25:12.943

在选项哈希中，`remote: true`请求 Rails 使用 javascript 响应。

如果您有一个网络检查器，您可以查看您的网络选项卡，提交表单，然后您可以在 http 请求标头中看到 post 请求在接受字段中请求 javascript。如果您在选项哈希中没有远程标记，则您的表单提交将请求 html。

此外，如果您在项目目录中执行 rake 路由，您会看到几乎每条路由都以 .:format 关键字结尾，该关键字`/posts(.:format)`允许您的控制器响应用户可能在特定控制器中定义的多种格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:17:11.460

提交按钮发布带有某些标题/哑剧集的表单。`respond_to`根据请求的内容类型、动词和资源状态决定如何操作。

有关详细信息，请参见此处：[ActionController::Responder < Object](http://api.rubyonrails.org/classes/ActionController/Responder.html)

# java - 如何通过 JNI 分享进度更新？

> ID：15768748
> 
> 赞同：2
> 
> 时间：2013-04-02T16:02:00.890
> 
> 标签：java, c++, multithreading, java-native-interface, shared-memory

如何在 Java 中显示用 C++ 完成的计算的进度？

java应用程序通过JNI调用一个C++方法，我怎么能`double progress;`在java应用程序和C++方法之间共享一个？

我真的不知道在 JNI 中是如何处理多线程的。

此外，目标平台是 Windows 和 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:23:22.367

有多种方法可以报告从本机端到 Java 的进度。

一种是通过 JNI 从 C++ 调用 Java 对象上的方法。您可以在 C++ 计算方法本身或其他方法中传递对象。

另一种是与直接 ByteBuffer 共享内存区域。在 Java 中，调用[ByteBuffer.allocateDirect()](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#allocateDirect%28int%29)来创建缓冲区。将缓冲区传递给 C++，然后使用[GetDirectBufferAddress()](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#get_direct_buffer_address)获取其内存地址。在 C++ 中，直接写入缓冲区。在 Java 中，轮询更改。

# iphone - 如何正确停止当前运行的 xCode 项目？

> ID：15768750
> 
> 赞同：6
> 
> 时间：2013-04-02T16:02:06.603
> 
> 标签：iphone, ios, xcode, ipad, termination

这听起来像是一个愚蠢的问题，但是随着 iOS 6 viewDidUnload 不再被调用，我对如何正确终止当前正在开发设备上使用 xCode 调试的 iOS 应用程序很感兴趣。按下下方的停止按钮是否足够？

![在此处输入图像描述](https://i.stack.imgur.com/dGuvJ.png)

**当我按下那个按钮时究竟会发生什么？**这是否相当于向应用程序发送停止信号，立即终止应用程序？**是否调用了任何 dealloc 代码？**我问的原因是，在使用启动/停止进行重复调试后，我遇到了一个问题，我的应用程序似乎存在随机内存问题（分析时未检测到泄漏）。

感谢您的想法！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T16:07:58.800

点击停止会立即杀死应用程序。没有调用 dealloc 或其他代码（**特别是没有任何可能保存数据的应用程序委托方法**），该过程刚刚终止。然后释放该进程使用的所有内存，当您重新开始时，您将从头开始。

这不太可能是“随机记忆”问题的原因。如果您可以提供有关您正在经历的症状的更多详细信息，那么可能还有更多要说的。

模拟用户可能会做什么的最好方法是点击主页按钮，*然后*停止该过程。这不会终止您的应用程序，但无论如何您应该在进入后台时处理所有必要的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T16:32:11.607

`ApplicationWillTerminate`一旦应用程序正确终止，就会被调用。如果单击停止按钮，您的应用程序将被终止，并且在这种情况下您可能不会跟踪任何方法调用。由于没有`viewDidUnload`或`dealloc`方法，但是您可以在不调用 super的情况下`UIViewController`定义自己的方法。`dealloc``dealloc`

你可以看看[Application life Cycle](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheAppLifeCycle/TheAppLifeCycle.html)。它可能会回答很多问题。

# google-chrome-extension - Chrome 扩展 $.ajaxSetup 等效于 chrome.extension.sendRequest

> ID：15768753
> 
> 赞同：0
> 
> 时间：2013-04-02T16:02:09.250
> 
> 标签：google-chrome-extension

chrome 的 chrome.extension.sendRequest 是否能够像 $.ajaxSetup 那样使用不同的值来处理请求或响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:34:13.203

不，它没有。

无论如何 using`sendRequest`已被弃用并被`sendMessage`. 许多人混淆了chrome 扩展和[xhr 请求之间的](https://developer.chrome.com/extensions/xhr.html)[消息传递](https://developer.chrome.com/extensions/messaging.html)。

# java - 64 位 Java 和 64 位访问

> ID：15768754
> 
> 赞同：0
> 
> 时间：2013-04-02T16:02:09.727
> 
> 标签：java, database, netbeans, 32bit-64bit

我正在使用安装在 Windows 7 64 位机器上的 Netbeans 32 位和 32 位 Java。

我也在使用 Office 2010 64 位。

我的问题是，每次我尝试将 Access 数据库连接到我的项目时，都会出现以下错误：

java.sql.SQLException: [Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

java.lang.NullPointerException

这是我的代码：

```
 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String SourceURL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb,*.accdb)};DBQ=" 
                + new File("Argos.accdb").getAbsolutePath() + ";";

        Argos = DriverManager.getConnection(SourceURL, "admin",""); 
```

我曾尝试在 Netbeans 中使用 64 位 Java，但出现同样的错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T19:23:12.307

我有同样的问题。但是我有 64 位 win 8 和 32 位 office 即时通讯使用 jdk 32 位和在 net beans 中它可以工作但是当我使用可执行 jar

# vba - 在电子邮件对话正文中检测新消息的结尾

> ID：15768756
> 
> 赞同：5
> 
> 时间：2013-04-02T16:02:12.927
> 
> 标签：vba, outlook, outlook-2010

当一条消息被回复或转发时，前一个线程会被附加到您的新邮件中，方法是在它前面放置 ie ----Original Message---- 。

Outlook 对 tekst 邮件执行相同的操作，但对于 HTML 邮件，它会显示一行，后跟 From:..

由于 Outlook 在这些消息之间显示了一条线，我相信可以使用 VBA 减去这些消息。但是如何？

目标：当用户发送邮件（Application_ItemSend）时，我想扫描邮件中的某些单词。但我不在乎它是否出现在以前的消息中，我只想扫描新输入的消息。

下面的示例将在 Outlook 中以文本形式回复电子邮件时起作用（并且 Outlook 是英文的！）。但它在发送 HTML 电子邮件时不起作用。

```
Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)
  Dim EndOfMsg As Integer
  Dim myMsg as String

  EndOfMsg = InStr(Item.Body, "-----Original Message-----")
  If EndOfMsg = 0 Then 
    myMsg = Item.Body
  Else 
    myMsg = Left(Item.Body, EndOfMsg)
  End If

  MsgBox myMsg
End Sub 
```

所以我需要一些“令牌”来分裂，正确..但是这个令牌是什么？myMsg 和旧的 msg 之间只有一个 double `vbCrLf`。就像我在消息中输入新行时一样.. 没有什么独特的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:16:51.320

答案取决于用户是发送 HTML 电子邮件还是富文本电子邮件。（这通常取决于他们是用 HTML 还是 RTF 回复/转发消息，除非他们手动更改格式。）

在任何一种情况下，您都需要寻找一种模式来指示您感兴趣的消息的结尾，然后停在那里。用于`Instr()`确定您需要停止的位置。然后，当您解析文本以查找“某些单词”时，请跟踪您已阅读的字符数并在到达标记时停止。

**富文本**

查找`Item.Body`“^p^p_ ***_* __ *_* __ *_* __ *_* _ *_* __ *_* __ *_* __ *_* ___** ^p”。

那是 2 个 VbCrLf 实例，46 个 Chr(95) 实例，一个空格，然后是另一个 VbCrLf 实例。

**HTML**

在`Item.Body`中，记号是“^p  **_**  ^p”。

那是一个 VbCrLf、2 个空格、5 个 Chr(95) 实例、另外 2 个空格和另一个 VbCrLf。

在`Item.HTMLBody`中，令牌是

```
<DIV dir=ltr lang=en-us class=OutlookMessageHeader align=left>
<HR tabIndex=-1> 
```

该标记在其前面、两行之间和末尾都有一个 VbCrLf。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-30T08:50:08.543

您可以创建一个消息数组，如下所示：

```
Dim arr() As String

arr() = Split(Item.Body, "From:") 
```

然后遍历消息：

```
Dim varElement as variant

for each varElement in arr()

next varElement 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:54:48.740

What about changing your `InStr` function to `EndOfMsg = InStr(1, Item.Body, "From:")`?

# python - 如何在python中构造一组列表项？

> ID：15768757
> 
> 赞同：234
> 
> 时间：2013-04-02T16:02:12.780
> 
> 标签：python, list, set

我`list`在 python 中有一个文件名，我想`set`从所有文件名中构造一个。

```
filelist=[]
for filename in filelist:
    set(filename) 
```

这似乎不起作用。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：415
> 
> 时间：2013-04-02T16:02:53.770

如果你有一个可散列对象列表（文件名可能是字符串，所以它们应该计算在内）：

```
lst = ['foo.py', 'bar.py', 'baz.py', 'qux.py', Ellipsis] 
```

您可以直接构造集合：

```
s = set(lst) 
```

事实上，*任何可迭代对象*`set`都会以这种方式工作！ （鸭子打字不是很好吗？）

 ** * *

如果你想迭代地做：

```
s = set()
for item in iterable:
    s.add(item) 
```

但很少需要这样做。我只提到它是因为该`set.add`方法非常有用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-02T16:14:50.193

最直接的解决办法是这样的：

```
s = set(filelist) 
```

原始代码中的问题是未将值分配给*set*。这是您的代码的固定版本：

```
s = set()
for filename in filelist:
    s.add(filename)
print(s) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-11-15T17:03:29.770

你可以做

```
my_set = set(my_list) 
```

或者，在 Python 3 中，

```
my_set = {*my_list} 
```

从列表中创建一个集合。相反，你也可以这样做

```
my_list = list(my_set) 
```

或者，在 Python 3 中，

```
my_list = [*my_set] 
```

从集合中创建列表。

请注意，将列表转换为集合时，列表中元素的顺序通常会丢失，因为集合本质上是无序的。（不过，CPython 中的一个例外似乎是列表仅包含非负整数，但我认为这是 CPython 中集合实现的结果，并且这种行为可能因不同的 Python 实现而异。）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-26T11:33:44.110

这是另一个解决方案：

```
>>>list1=["C:\\","D:\\","E:\\","C:\\"]
>>>set1=set(list1)
>>>set1
set(['E:\\', 'D:\\', 'C:\\']) 
```

在这段代码中，我使用 set 方法将其转换为集合，然后从列表中删除所有重复值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-20T08:08:44.483

简单地说：

```
new_list = set(your_list) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-06T15:38:13.983

一种以迭代方式构造集合的通用方法，如下所示：

```
aset = {e for e in alist} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-05T06:12:05.087

您还可以使用列表推导来创建集合。

```
s = {i for i in range(5)} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-01T02:54:52.933

以上所有答案都是正确的，但是如果您想保留列表的顺序，则需要按照以下步骤进行

```
list(dict.fromkeys(your_list)) 
```*

# marklogic - Marklogic：元素范围索引 VS 元素词词典

> ID：15768758
> 
> 赞同：2
> 
> 时间：2013-04-02T16:02:13.590
> 
> 标签：marklogic

我有一个包含文本值的元素，我需要能够从 GUI 应用程序中搜索其中的文本内容。我正在阅读 ML 5.0 文档，发现我可以在此元素上使用元素范围索引或元素词词典。考虑到我需要使用的事实，我想现在应该使用哪一个

1.  搜索包含此元素的 1000 万份文档
2.  快速搜索
3.  利用`cts:element-word-query`
4.  在我正在搜索的地方使用搜索选项`starts-with`并包含选项。

感谢任何帮助。

哈利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:33:53.457

不需要额外的范围索引或词典。`cts:element-word-query`使用通用索引搜索元素文本。最有效的方法是“快速元素词搜索”，在创建新数据库时默认启用。

进一步阅读：

[http://docs.marklogic.com/guide/search-dev](http://docs.marklogic.com/guide/search-dev)

[http://docs.marklogic.com/guide/admin/text_index](http://docs.marklogic.com/guide/admin/text_index)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:10:07.093

`element range index`an和 an之间的一个显着区别`element word lexicon`是，`range index`将存储元素的字符串值`("search terms")`，而`word lexicon`将存储单个单词标记`("search", "terms")`。每个都促进不同类型的查询。

如果您发布有关如何搜索元素的更详细示例，则更容易为查询/词典策略提出建议。

# entity-framework - 首先在实体框架代码中检索子记录

> ID：15768761
> 
> 赞同：0
> 
> 时间：2013-04-02T16:02:17.103
> 
> 标签：entity-framework, ef-code-first

我有一个具有所有常见操作的通用存储库。我有两张表客户和地址。客户中引用了地址

```
public IEnumerable<TEntity> GetAll() 
  {
      return context.Set<TEntity>();
  } 
```

下面是我的仓库

```
Repository<Customer> customerRepostitory = new Repository<Customer>();

var cusotomerList = customerRepostitory.GetAll(); 
```

上面的行只是返回客户列表，它不包括地址详细信息。当我调用父记录时，您能建议检索子记录的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:28:42.180

如果是虚拟的，你就会发现延迟加载，这是处理子记录的一种方式。您应该阅读其他方式/策略：[急切加载和显式加载](http://msdn.microsoft.com/en-us/data/jj574232.aspx)，以发现哪种方式/最适合您的情况。

# asp.net - 如何跟踪服务器上文件的下载完成时间？

> ID：15768767
> 
> 赞同：0
> 
> 时间：2013-04-02T16:02:39.040
> 
> 标签：asp.net, iis-7, download

我想在客户端机器上开始和完成下载时记录 Web 服务器上的时间？这可能吗 ？我正在使用 IIS 7。我尝试将这个[http://jqueryfiledownload.apphb.com/](http://jqueryfiledownload.apphb.com/) 与 PHP 脚本一起使用，但没有成功。请为此建议一个适当的程序..

谢谢...

# node.js - ReferenceError: ExtRemote 未定义 Ext.direct.Manager.addProvider(ExtRemote.REMOTING_API);

> ID：15768769
> 
> 赞同：1
> 
> 时间：2013-04-02T16:02:40.423
> 
> 标签：node.js, ext-direct

js，并愿意学习使用 extdirect 我遵循了节点模块中包含的文档和此页面：npmjs.org/package/extdirect，它们完全相同，当我将 firefox 指向 index.html 时，我得到了这个错误在我的 app.js 第 6 行：

ReferenceError：未定义 ExtRemote

Ext.direct.Manager.addProvider(ExtRemote.REMOTING_API);

不幸的是，在互联网上我没有找到很多示例或资源来学习如何将 extdirect 与 node.js 一起使用，所以现在我被卡住了，你能通过教程示例等为我指出正确的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T06:33:26.187

After reading [extdirect](https://npmjs.org/package/extdirect) documentation and a somewhat related [thread](http://www.sencha.com/forum/showthread.php?243355-Ext-Direct-resource-assumes-static-api) I recognized the definition ExtRemote.REMOTING_API comes from the server at /directapi wwhich serves something like

```
Ext.ns("ExtRemote");ExtRemote.REMOTING_API={"url":"http://... 
```

hence what needs to be in index.html, maybe should be emphasized better in documentation, is a script import like

```
<script src="/directapi"></script> 
```

In Sencha Architect that can be added to a project's Resources as a JS Resource.

That took care of the ReferenceError: ExtRemote is not defined.

# jax-ws - 使用 javax.xml.ws.Endpoint 时出现 ClassNotFoundException: com.sun.net.httpserver.HttpServer

> ID：15768770
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:02:40.720
> 
> 标签：jax-ws, java-7

我尝试使用“javax.xml.ws.Endpoint;” 像这样发布一些 WS：

`Endpoint.publish("http://localhost:8080/ServiceWS", new ServiceWS());`

但是，我在服务器启动时不断收到“ClassNotFoundException：com.sun.net.httpserver.HttpServer”。使用 JDK1.7 和 JBoss 7.1.0。AFAIk HttpServer 是 JavaSE 的一部分，那么可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:26:55.703

> [将JAX-WS 2.x](https://jax-ws.dev.java.net/)作为 Java SE 6.0/7.0 的一部分而不是 Java EE 5/6 的一个理由是，使用 JAX-WS 2.x 交付 Web 服务不需要 servlet 或 EJB 容器。
> 
> 在不需要商业 HTTP 服务器和 servlet 或 EJB 容器的全部功能的用例中，Endpoint 类为严格控制环境中的软件或系统中的组件提供了一种方便的机制，以便通过 Web 服务轻松进行通信。该机制的第二个用途是原型化和开发最终部署在 Java EE 容器中的生产 Web 服务。

[*没有 Java EE 容器的 JAX-WS Web 服务*](http://today.java.net/pub/a/today/2007/07/03/jax-ws-web-services-without-ee-containers.html)

如果您已经有一个带有`@WebService`注释的类，则不需要`publish`在单例 bean 中调用该方法。JBoss 在部署期间扫描应用程序的注释，如果没有错误，则发布 Web 服务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T09:58:52.077

**已解决**：我的项目设置中有一个小错误。通过从部署程序集中删除 jaxws-rt.jar 来解决。

# java - 自定义视图组中的子视图不遵循边界

> ID：15768774
> 
> 赞同：2
> 
> 时间：2013-04-02T16:02:47.850
> 
> 标签：java, android, android-layout

我正在创建一个自定义布局（视图组子类），它将自身划分为单元格，然后根据其单元格位置和单元格宽度/高度定位子布局。

把它想象成小部件的组织方式。

我添加了一堆具有不同背景颜色的框架布局，它们似乎定位正确。但是，当我放入一个 textview 时，它会在垂直方向上扩展得远远超出该范围，并在水平方向上保持固定宽度。这个位置虽然工作正常。

代码：

```
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;

public class DynamicLayout extends ViewGroup {

int numCellsX = 6, numCellsY = 8;
int cellSize;

int blockMap[];

public DynamicLayout(Context context) {
    super(context);

    init();
}

public DynamicLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public DynamicLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

private void init()
{
    blockMap = new int[numCellsX * numCellsY];
    clearBlockMap();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    cellSize = getMeasuredWidth() / numCellsX;

    int specWidth = MeasureSpec.getSize(widthMeasureSpec);
    int specHeight = MeasureSpec.getSize(heightMeasureSpec);

    this.setMeasuredDimension(specWidth, specHeight);

    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    if (getChildCount() > 0) {
        int wspec = MeasureSpec.makeMeasureSpec(getMeasuredWidth()
                / getChildCount(), MeasureSpec.EXACTLY);
        int hspec = MeasureSpec.makeMeasureSpec(getMeasuredHeight(),
                MeasureSpec.EXACTLY);
        for (int i = 0; i < getChildCount(); i++) {
            View v = getChildAt(i);
            v.measure(wspec, hspec);
        }
    }
    Log.i("DYNA", "Measured");
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    Log.i("DYNA", "On Layout");

    clearBlockMap();

    for (int i = 0; i < getChildCount(); i++) {
        View v = getChildAt(i);

        if (v instanceof DynaServiceView) {
            DynaServiceView serviceView = (DynaServiceView) v;

            if (serviceView.getVisibility() == GONE) 
                continue;

            int x = serviceView.getXPos();
            int y = serviceView.getYPos();
            int width = serviceView.getXCells();
            int height = serviceView.getYCells();

            //Is the thing too big?
            if (width > numCellsX)
            {
                Log.i("DYNA", "Warning, service too big, shrinking to size");
                width = numCellsX;
                serviceView.setWidth(width);
            }

            //Is there space?
            if (checkBlockMap(x, y, width, height))
            {
                Log.i("DYNA", "Found collision at child " + i +", resolving...");
                //Find somewhere to put this
                boolean foundSpot = false;
                for (int j = y; j <= numCellsY - height; j++)
                {
                    for (int k = x; k <= numCellsX - width; k++)
                    {
                        if (!checkBlockMap(k, j, width, height))
                        {
                            x = k;
                            y = j;                              
                            foundSpot = true;
                            break;
                        }
                    }

                    if (foundSpot)
                        break;
                }

                if (!foundSpot)                 
                    Log.i("DYNA", "No spot for child at: " + i + ", skipping!");
                else
                    Log.i("DYNA", "Resolved! New X/Y: " + x + ", " + y);
            }

            setBlockMap(x, y, width, height);

            //Has spot now, set layout
            serviceView.layout(l + (x * cellSize), t + (y * cellSize), (x * cellSize)
                    + (width * cellSize), (y * cellSize)
                    + (height * cellSize));
        }

    }       
}

private boolean checkBlockMap(int x, int y, int width, int height)
{
    for (int  j= y; j < y + height; j++)
    {
        for (int k = x; k < x + width; k++)                     
            if (blockMap[(j * numCellsX) + k] == 1)
                return true;
    }
    return false;
}

private void setBlockMap(int x, int y, int width, int height)
{
    for (int  j= y; j < y + height; j++)
    {
        for (int k = x; k < x + width; k++)                     
            blockMap[(j * numCellsX) + k] = 1;
    }
}

private void clearBlockMap()
{
    for (int i = 0; i < blockMap.length;i++)
        blockMap[i] = 0;
}
} 
```

这是解释问题的图片。在右侧，您可以看到布局的边框正确排列，但在左侧，子文本视图显然没有跟随它。

![在此处输入图像描述](https://i.stack.imgur.com/t0dMK.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:24:47.637

发现问题.... onMeasure 设置不正确。愚蠢的错误。

# c# - tostring("000.0") 生成错误值

> ID：15768776
> 
> 赞同：3
> 
> 时间：2013-04-02T16:02:50.560
> 
> 标签：c#, string, tostring

在我的 c# 控制台应用程序中，我想将双变量转换为字符串类型。但生成的字符串变量应该在小数点左边至少有 3 位，在小数点右边至少有 1 位。示例：3.4569 应转换为“003.4”

它适用于上述示例，但会为以下转换引发错误结果。

```
 double Num = Math.Pow((3 + Math.Sqrt(5)), N); //6578336356630531.0 for N=22
 string StringNum = Num .ToString("000.0"); 
```

结果..

```
 StringNum ="6578336356630530.0"; 
```

但它会..

```
 StringNum ="6578336356630531.0"; 
```

我如何获得这些类型数字的确切字符串值？

```
 //decimal Num=Convert.ToDecimal (Math.Pow((3 + Math.Sqrt(5)), N));
 //this conversion also looses original value 
```

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:06:53.637

问题是您存储的值*恰好*是`6578336356630531`. 没有`double`更接近 6578336356630530 的值。因此，对于执行时存在的数据，输出是正确的。

从[文档中](http://msdn.microsoft.com/en-us/library/system.double.aspx)：

> 所有浮点数也有有限数量的有效数字，这也决定了浮点值接近实数的准确度。Double 值具有最多 15 个十进制数字的精度，尽管内部维护最多 17 个数字。

你在争论第 16 位数字。

我有一个[方便的类](http://yoda.arachsys.com/csharp/DoubleConverter.cs)，可以让你看到 any 的*确切*值`double`。

如果您需要比这更高的精度，请使用`decimal`而不是`double`. 请注意，它的*范围*`decimal`更小，但精度更高。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:07:28.113

可以用小数吗？

```
decimal Num = 6578336356630531.0M;
string StringNum = Num .ToString("000.0"); 
```

`double`是一个近似精度的浮点数。[看这里。](http://msdn.microsoft.com/en-us/library/system.double%28v=vs.90%29.aspx)

文章摘录：

> 浮点值和精度损失
> 
> 请记住，浮点数只能逼近十进制数，并且浮点数的精度决定了该数字逼近十进制数的准确度。默认情况下，Double 值包含 15 位精度的十进制数字，但内部维护最多 17 位数字。浮点数的精度有几个后果： 两个浮点数在特定精度下看起来相等，因为它们的最低有效数字不同，所以比较可能不相等。如果使用十进制数，使用浮点数的数学或比较运算可能不会产生相同的结果，因为浮点数可能不完全接近十进制数。如果涉及浮点数，则值可能不会往返。如果一个操作将原始浮点数转换为另一种形式，则称一个值往返，逆运算将转换后的形式转换回浮点数，并且最终的浮点数等于原始浮点数数字。往返可能会失败，因为在转换中丢失或更改了一个或多个最低有效数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:06:46.907

使用`decimal`代替，`double`一切都会好起来的：

```
decimal Num = 6578336356630531.0m;
string StringNum = Num.ToString("000.0"); 
```

这个问题与双值表示和精度有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:06:50.470

`double`无法存储这么多的精度。`decimal`如果这是您想要的行为，请使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:07:12.550

您似乎找到了一个浮点数无法正确表示的数字。

尝试使用小数：

```
decimal Num = 6578336356630531.0m;
string StringNum = Num.ToString("###.0"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T16:13:50.670

没有双精度四舍五入的最大整数是 2^53 - 1，大约是 9e15，但你有 6e15，它可能会被精确地表示，但不一定。你运气不好（通常是运气不好；处理它）。如果你想活得没有这些惊喜，你必须在 c# 中使用十进制类型。*

# android - 微调行可触摸区域仅是文本

> ID：15768785
> 
> 赞同：0
> 
> 时间：2013-04-02T16:03:15.090
> 
> 标签：android, android-spinner, selecteditem

在我的 Android 应用程序中，我在 ActionbarSherlock 中有一个微调器：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_left_spinner"
        android:actionViewClass="android.widget.Spinner"
        android:showAsAction="always"/>
</menu> 
```

它填充得很好，但只有微调器行的文本部分，而不是空白部分，是可触摸的并响应`onItemSelected`事件。

我似乎无法弄清楚如何跨越 apinner 项目的整个宽度以使其可触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:11:05.677

没关系。我在微调器 XML 中有一个`wrap_content`而不是设置...`fill_parent`

# javascript - 插入的 DOM 节点的类没有被传递

> ID：15768787
> 
> 赞同：0
> 
> 时间：2013-04-02T16:03:27.007
> 
> 标签：javascript, jquery, dom, comparison

我有以下代码来侦听插入的 DOM 节点

```
$('#box').on('DOMNodeInserted', function(e) {
    var news = e.target.className.split(" ");
    if (news[news.length-1].indexOf("today")){ 
        //do something                     
    }
}); 
```

当插入一个节点时，上面的代码应该检查该类以查看它是否具有字符串“today”。插入的html的结构是这样的……

```
<div class="posts news today"> 
```

如果它有“今天”，它应该“做某事”

问题是由于某种原因，上面的函数显示插入的节点有一个类

```
"" 
```

即使插入的元素是

```
<div class="posts news today"> 
```

但是，已经存在的元素显示了正确的类

```
posts news today 
```

问题出在这段代码的某个地方，但我不确定为什么插入的节点会被解释为没有类，而现有节点有。

为了澄清，这段代码

```
$('#box').on('DOMNodeInserted', function(e) {
    var news = e.target.className;
    console.log(news);
}); 
```

为页面加载时已存在的元素输出正确的类名，但为插入的元素显示“”。如上所述，插入的元素包含正确的类信息，只是没有被上面的代码解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:06:24.677

无论如何，您都在使用 jQuery —— 为什么不到处使用它呢？

```
if ($(e.target).hasClass('today')) {
   // ...
} 
```

[http://api.jquery.com/hasClass](http://api.jquery.com/hasClass)

# php - php的制作和分发工具

> ID：15768788
> 
> 赞同：0
> 
> 时间：2013-04-02T16:03:28.867
> 
> 标签：php, makefile, phpunit, build-automation, simpletest

我看过一些问题，但没有一个能真正回答我的想法；所有开发人员都在使用一个或另一个框架，但没有人开始他们自己的东西，否则他们会有同样的问题：

我在服务器上有一些 php 类，比如 A.php、B.php 和 C.php 准备分发给我的用户，采用以下树结构：

```
 /
 |-dir-1
 |  |-A.php
 |  |-B.php
 |
 |-dir-2
    |-C.php 
```

**开发人员构建了扩展**上述树应用程序的D.php 和 E.php ，然后，他打算将这些分发给已经拥有基本类的其他用户。

我的问题是：我们是否可以使用一个简单的工具在现有树上制作项目，提取和打包项目文件并分发给用户**，而无需安装**大量的 pear this 和 pear that？

如果有这样的工具，我可以使用它去中心化，即每个开发人员在现有树（应用程序）之上构建一个副本，其副本已经位于开发人员家中吗？（是的，每个开发人员都在自己的副本上工作！）

一个类似的**测试套件**答案将不胜感激（我倾向于[SimpleTest](http://www.simpletest.org/)）。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:55:39.673

您是否尝试过使用 GIT 或 SVN 等版本控制系统？

# search - TextField Corona (lua) 发送字符

> ID：15768790
> 
> 赞同：0
> 
> 时间：2013-04-02T16:03:32.037
> 
> 标签：search, lua, coronasdk

我想知道如何实现一个“搜索栏”，用户在其中编写文本，并且在用户单击按钮搜索或按 Enter 后将发送此信息。

```
local campoBusqueda = native.newTextField( 50, 50, 300, 25 , onButtonRelease ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:42:02.270

这应该会有所帮助： http: [//www.coronalabs.com/blog/2012/02/07/tutorial-text-input-with-native-ui/](http://www.coronalabs.com/blog/2012/02/07/tutorial-text-input-with-native-ui/)

该信息将在提交的事件上提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T04:35:26.707

我正在为您提供我在代码中使用的代码，但您可以根据需要使用此代码 -

本地函数 fieldHandler( 事件 )

如果（“开始”== event.phase）那么

```
 -- This is the "keyboard has appeared" event
   -- In some cases you may want to adjust the interface when the keyboard appears. 
```

elseif ( "结束" == event.phase ) 然后

```
 -- This event is called when the user stops editing a field: for example, when they touch a different field 
```

elseif ( "提交" == event.phase ) 然后

```
 -- This event occurs when the user presses the "return" key (if available) on the onscreen keyboard
     -- Hide keyboard
     native.setKeyboardFocus( nil )
 end 
```

结尾

textField = native.newTextField( 75, 150, 165, 30, fieldHandler )

textField.font = native.newFont(native.systemFontBold, 24)

textField.inputType = "名称"

组：插入（文本字段）

我希望，它会帮助你..

# javascript - Mootools onClick 发送对象

> ID：15768792
> 
> 赞同：0
> 
> 时间：2013-04-02T16:03:35.047
> 
> 标签：javascript, mootools

我正在尝试将一个对象从它自己的对象发送到另一个对象。

```
var Tile = new Class({
    initialize : function(){
        this.inner = new Element(...);
        this.inner.addEvent('click', function() {
            popup.open(this);
        });
    }
}); 
```

如果我从 Tile out op Popup 警告任何成员变量，它会警告“未定义”。我究竟做错了什么？

```
var Popup = new Class({
    initialize : function(){
    },
    open : function(tile) {
        alert(tile.width);
    }
}); 
```

亲切的问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:17:37.480

当您传递`this`给`popup`对象时，您正在传递元素本身（我相信这是您的意图）。但是，默认情况下，元素没有名为`width`.

也许您正在寻找`getSize();`？这将返回一个具有两个属性的对象（`x`和`y`），分别对应于元素的宽度和高度。

我已将您的代码近似为以下 jsFiddle，试一试：http: [//jsfiddle.net/g4SmJ/](http://jsfiddle.net/g4SmJ/)

作为参考，这里是新的`Popup`类代码：

```
var Popup = new Class({
    initialize : function(){
    },
    open : function(tile) {
        size = tile.getSize();
        console.log(size);    // console.log provides a nicer interface for debugging, you can pass objects into it! Use the Chrome Inspector or Firebug to see its output.
        alert(size.x);
    }
}); 
```

* * *

回应您的评论：

> 哦，我并不是要提醒doms宽度，对此感到抱歉。我发布的是完整对象中的较小代码。Width 实际上是 Tiles 中定义的成员，我想从 Popup 中提醒

在这种情况下，当您向 发送调用时`.open();`，您传入`this`了函数调用，但*没有传递`Tile`对象*！相反，您传递了`inner`您创建的元素。

如此重写`Tile`：

```
var Tile = new Class({
    initialize : function(){
        var self = this;
        this.inner = new Element(...);
        this.inner.addEvent('click', function() {
            popup.open(self);
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:45:53.087

我猜你正在寻找发送`Tile`实例。像上面的答案一样 - 当您发送`this`inside`addEvent`方法时，您发送的是调用事件的元素本身：在您的情况下，您发送的是 inner 实例，因为您在其上定义了 onclick。

如果您想发送 tile 实例，您有 2 个选项：

1) 绑定到函数 this - 意味着将您所在的当前范围（Tile）“连接”到事件中：

```
var Tile = new Class({
    initialize : function(){
        this.inner = new Element(...);
        this.inner.addEvent('click', function() {
            popup.open(this); // <- now this is 'Tile' instance 
        }.bind(this)); //bind this to click
    }
}); 
```

2）将实例保存在函数范围之外并在内部使用：

```
var Tile = new Class({
    initialize : function(){
        this.inner = new Element(...);
        var self = this; //save the this to var 'self'
        this.inner.addEvent('click', function() {
            popup.open(self); //use self which holds the Tile instance
        });
    }
}); 
```

# html - CSS中的垂直浮动元素？

> ID：15768794
> 
> 赞同：4
> 
> 时间：2013-04-02T16:03:40.457
> 
> 标签：html, css, html-lists, floating

这张图片中描述的我的问题有什么解决方案吗？

![http://i.imgur.com/6uhxlNm.png](https://i.stack.imgur.com/eLyU6.png)

我有一个固定高度的 DIV 标签。在这个元素中，我有一个列表。这个列表应该像列一样浮动。列表元素具有固定宽度。如果 Div-Tag 中有“太多”元素，它应该水平滚动。列和元素的数量不固定。它也应该在旧浏览器中工作。

HTML/CSS 有什么解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T16:13:20.560

您可以使用`columns`和相关的 CSS3 属性：

这是小提琴：http: [//jsfiddle.net/DELL7/5/](http://jsfiddle.net/DeLL7/5/)

针对非固定列数和固定容器高度进行了更新。但是，对于较旧的浏览器，您可能不走运，而不必“手动”排列这些框。

# c++ - 用等高线分隔车道

> ID：15768796
> 
> 赞同：2
> 
> 时间：2013-04-02T16:03:43.347
> 
> 标签：c++, opencv, image-processing, contour

我在 C++ 的 Open-CV 中使用 Contours，我想用它来检测车道。基本上我使用轮廓来检测车道和形状，并通过在之前放置过滤器来计算我想要的实际线条。现在我想将它们组合在一起，所以我知道这些线一起构成一条车道，而其他线构成另一条车道，依此类推。

我已经尝试用轮廓之间的距离来解决这个问题，但它不能完全工作，有很多情况下距离不能给出正确的结果。

所以我想知道是否有人知道如何提高效率。

![在此处输入图像描述](https://i.stack.imgur.com/bKQgo.png)

所以我想知道 {0,1,3,4,5,7} 正在一起形成一条车道。{2,6} 和 {8} 相同。

提前致谢

# boost - 是否有 64 位版本的 boost::hash_value

> ID：15768798
> 
> 赞同：3
> 
> 时间：2013-04-02T16:04:02.150
> 
> 标签：boost, hash-function

看起来[这里](http://www.boost.org/doc/libs/1_35_0/boost/functional/hash/hash.hpp)boost::hash_value 总是返回一个 size_t 值。

boost 也有 64 位散列函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:54:10.913

我所知道的所有散列例程（`boost::hash`和`std::hash1`in `C++11`）都将事物散列到一个`size_t`值。

`size_t`(like )的表示`int`因平台而异。

在一般情况下，您的问题的答案是否定的 - 没有 64 位版本的`boost::hash_value`.

如果您在`size_t`64 位数量（例如`x86_64`）的平台上运行，那么是的，`boost::hash_value`将是 64 位。

# grails - Grails Spring Security ACL 域对象方法安全

> ID：15768799
> 
> 赞同：1
> 
> 时间：2013-04-02T16:04:02.397
> 
> 标签：grails, spring-security, acl, domain-object

我的问题是：是否可以保护域对象方法甚至像 findByName 这样的动态方法？

它在服务方法上工作得很好，但我不能让它在域实例方法或域静态方法上工作。

```
class Dummy {
    string name

    @PostFilter("hasPermission(filterObject, read)")
    static List<Dummy> listDummies(){
        Dummy.list();
    }
} 
```

当从控制器调用时，listDummies 会返回所有虚拟对象，即使没有用户连接也是如此。

我该怎么做才能使它起作用？

提前感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:37:59.313

不，这是不可能的。注释通过触发围绕您正在调用的类实例创建代理来工作。这对于 Grails 服务来说是最方便的，因为它们会自动注册为 Spring bean，因此会检测到注释并进行代理。您在代理上进行方法调用，它会执行 ACL 检查，并且只有在允许访问时才调用真实方法。

但是对于静态方法、动态 Groovy 方法或未注册为 Spring bean 的类中的方法，这种代理不会发生。对于此示例，创建一个带注释的服务方法。您仍然可以将所有代码留在域类中，甚至使用动态查找器，但重要的是访问是通过代理服务完成的。一旦进行了检查，您就可以随心所欲地实现逻辑。

# android - 在启动时为 appwidgets 注册内容观察器

> ID：15768800
> 
> 赞同：2
> 
> 时间：2013-04-02T16:04:03.313
> 
> 标签：android, boot, reboot, contentobserver, android-appwidget

`ContentObserver`当用户将我的 appwidget 添加到主屏幕时，我正在注册。预期的行为是对 my 中基础数据的更改`ContentProvider`将触发我的 appwidget 进行更新。问题是如果用户然后重新启动设备，我就不再`ContentObserver`注册了。

Android 的 AppWidget 框架似乎没有提供任何挂钩来在设备启动后进行任何类型的设置，因此我无法`ContentObserver`在数据上注册另一个。我能想到的唯一解决方案是创建一个在清单中注册的 BroadcastReceiver，它接收 BOOT_COMPLETED 操作。我希望不必这样做。

是否有任何方法可以在启动后注册 ContentObserver（或进行与 AppWidgets 相关的任何其他设置），以便现有的 appwidgets 在设备重新启动后继续正常运行？（如果可能的话，在某个地方有这样的样本吗？）

**编辑**：

它在启动后出现，我的 AppWidgetProvider 正在被调用，并且 onEnabled 和 onUpdate 回调都发生了。它启动我的 AppWidgetService 并创建一个 RemoteViewsFactory ——此时我应该注册一个 ContentObserver。

但是，无论出于何种原因，当我的 ContentProvider 中的数据发生更改时，ContentObserver 都不会触发。我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:41:40.213

**编辑**

这个答案有点过时了。仅仅为了持有一个 ContentObserver 而制作一个服务有点笨拙，用户可能会觉得奇怪的是，一个应用程序在不理解为什么的情况下保留了一个服务。操作系统也可以终止服务，这使您没有 ContentObserver。

当数据更改时，最好自己强制刷新您的应用程序小部件。Google 在他们的 iosched 应用程序中也这样做：

```
// Widgets can't register content observers so we refresh widgets separately.
context.sendBroadcast(ScheduleWidgetProvider.getRefreshBroadcastIntent(context, false)); 
```

来源：[ScheduleProvider](https://github.com/google/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/provider/ScheduleProvider.java#L573) [ScheduleWidgetProvider](https://github.com/google/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/appwidget/ScheduleWidgetProvider.java#L49)

**原始答案**

我通过创建一个新的服务类解决了我自己的问题。我在 AppWidgetProvider 的`onEnabled()`回调中启动服务并在回调中停止服务`onDisabled()`。内容观察者在 Service 中`onCreate()`注册，在`onDestroy`.

这种方法可以让我的所有 appwidgets 在底层数据发生变化时更新，并通过设备重启工作。

# php - PHP如何处理对象

> ID：15768806
> 
> 赞同：-4
> 
> 时间：2013-04-02T16:04:14.817
> 
> 标签：php, arrays, oop, class, object

我有一个名为 user 的类。我创建了该类的一个实例以便能够处理它。这个类有一个叫做 login 的函数，它就是这样做的。它让用户登录。我这样称呼它：

```
$user = new user();
$user -> logIn(); 
```

稍后在另一个文件中，我希望能够再次对该对象执行某些操作。我的第一个想法是“嘿，让它全球化，过上幸福的生活”，但后来我突然想到，现在如果第二个用户出现并登录，他们将使用同一个对象 - 导致混乱。由于我在大学学习 Java，然后我考虑使用 HashMap 样式的数组来保存用户的会话 id 和他的对象。在 PHP 中，它看起来像这样：

```
$users = array[ session_id1 => user1object,
                session_id2 => user2object
         ] 
```

使用 session_id 我可以随时跟踪用户的对象（至少只要他登录）。 **现在我的问题是：**这是最好的方法吗？我是否忽略了某些东西？

现在退一步：假设这是要走的路，我还有另一个问题：我正在创建对象，调用它的登录函数。现在，如果用户成功登录，我就在用户对象中的登录功能中。如何将该对象存储到我的数组中（例如 HashMap 样式）。

非常感谢， Stiller_leser

我找到了这两个问题，但他们没有回答我自己的问题： [oop - PHP 如何跟踪创建的对象](https://stackoverflow.com/questions/2409374/how-does-php-track-created-objects) [PHP、OOP、创建对象（关闭）](https://stackoverflow.com/questions/10878407/php-oop-creating-an-object?rq=1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:11:41.347

这个假设是错误的：

> 我的第一个想法是“嘿，让它全球化，过上幸福的生活”，但后来我突然想到，现在如果第二个用户出现并登录，他们将使用同一个对象 - 导致混乱。

不同的用户不会访问同一个对象。所以回答你的问题：不，这不是最好的方法 - 你不需要制作一个数组来跟踪不同用户的对象......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:42:30.653

当两个用户在服务器上运行相同的脚本时，变量不会干扰。这是因为变量的内存仅在脚本执行期间分配。每次用户调用 PHP 脚本时，服务器都会分配新的内存，脚本执行后，内存会再次被释放。

这意味着，调用同一个脚本的两个用户会有不同的用户对象，但是如果一个用户调用了两次脚本，他也会有两个不同的用户对象，因为服务器分配了两个不同的内存“集”并**独立处理它们每个脚本执行**。

如果您想实现用户对象在脚本调用之间保持不变并且每个用户都有自己的用户对象，那么您应该查看[会话](http://www.php.net/manual/en/book.session.php)和可选的[序列化](http://www.php.net/manual/en/function.serialize.php)。会话大致以这种方式工作：

当用户第一次访问服务器时，他会获得一个唯一的标识符，并且正在服务器上创建一个文件。该文件包含会话变量。在这些会话变量中，您可以存储任何您想要的内容（例如您的用户对象）。

下次用户调用脚本时，该文件中的变量会再次加载，您可以重复使用它们。

# php - 动态限制用户可以选中的复选框数量

> ID：15768826
> 
> 赞同：1
> 
> 时间：2013-04-02T16:05:17.703
> 
> 标签：php, jquery

我创建了一个测试和回答系统。每个问题可以有一个或多个答案，例如“请标记 1 个答案”、“请标记 3 个答案”等。

是否可以根据此限制用户可以检查的复选框数量？如果问题需要 1 个答案，那么他们只能选中 1 个复选框。

```
<?php foreach ($rows as $row){ ?>
   <input type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
   <?php echo $row['answer']; ?>
<?php } ?> 
```

它循环遍历并提取每个答案，每个问题所需的答案数量是动态的，并由该字段控制（可以是 1、2、3 等）：

```
<?php echo $repeater_row['required_answers']; ?> 
```

* * *

使用下面的 jquery，虽然这不是动态的：

```
$(document).ready(function () {
    if ($("input:checkbox:checked").length >= 3) {
        $("input:checkbox").not(":checked").attr("disabled", 3);
    }
    $("input:checkbox").click(function () {
        var bol = $("input:checkbox:checked").length >= 3;
        $("input:checkbox").not(":checked").attr("disabled", bol);
    });
}); 
```

**我怎样才能动态地做到这一点？每个问题都有以集合命名的答案，所以第一个问题有一个答案集，用他们的输入命名`name="answer1[]"`，第二个问题有一个答案集`name="answer2[]"`，依此类推。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:33:27.377

我会将每组答案包装在一个带有 max-answers 属性的 div 中，并在您的 javascript 中使用该属性值。

这是一个工作小提琴：http: [//jsfiddle.net/pVA3d/4/](http://jsfiddle.net/pVA3d/4/)

我的 HTML

```
<div class="question" data-max-answers="2">
    Here's a question with up to two answers: <br>
    <input type="checkbox" name="answer1[]" value="A"> A <br>
    <input type="checkbox" name="answer1[]" value="B"> B <br>
    <input type="checkbox" name="answer1[]" value="C"> C <br>
    <input type="checkbox" name="answer1[]" value="D"> D <br>
</div>
<div class="question" data-max-answers="4">
    Here's a question with up to 4! <br>
    <input type="checkbox" name="answer2[]" value="A"> A <br>
    <input type="checkbox" name="answer2[]" value="B"> B <br>
    <input type="checkbox" name="answer2[]" value="C"> C <br>
    <input type="checkbox" name="answer2[]" value="D"> D <br>
    <input type="checkbox" name="answer2[]" value="E"> E <br>
    <input type="checkbox" name="answer2[]" value="F"> F <br>
</div> 
```

我的 JavaScript

```
$(document).ready(function () {
    $("input[type=checkbox]").click(function (e) {
        if ($(e.currentTarget).closest("div.question").length > 0) {
            toggleInputs($(e.currentTarget).closest("div.question")[0]);        
        }
    });
});

function toggleInputs(questionElement) {
    if ($(questionElement).data('max-answers') == undefined) {
        return true;
    } else {
        maxAnswers = parseInt($(questionElement).data('max-answers'), 10); 
        if ($(questionElement).find(":checked").length >= maxAnswers) {
            $(questionElement).find(":not(:checked)").attr("disabled", true);
        } else {
            $(questionElement).find("input[type=checkbox]").attr("disabled", false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:29:58.683

您可以使用该`name`属性`checked`来获取选中的复选框的数量：

```
$('input:checkbox[name="some_name"]').click(function () {
    // get count of checked with the same name
    var name = $(this).attr("name");
    var countLength = $(':checkbox[name="' + name + '"]:checked') 

    if(countLength > 3){
       // too many checked
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:35:06.433

您的表单中应该有一个隐藏字段，例如`boxnum`：

```
<input type="checkbox" name="answer<?php echo $counter; ?>[]" 
        id="answer<?php echo $counter; ?>[]" 
        value="<?php echo the_sub_field('answer'); ?>" />
<input type="hidden" name="boxnum" 
       id="q1boxnum" value="<?php echo $repeater_row['required_answers']; ?>" /> 
```

然后，使用 jQuery，

```
$("input:checkbox").on('click', function(){
  var numboxesallowed =$(#q1boxnum).val();

  $("input:checkbox").each(function(){
       if($(this).attr('checked', true)){
          numboxesallowed = numboxesallowed -1;
  }
  if(numboxesallowed < 0) {
   alert('you checked too many boxes!');
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-28T09:21:34.893

```
$(document).ready(function()
{
    var limit = 5; // define the limit.
    $('#divID').on('change', '.select_max', function(){ // div in which you will be displaying your data.
      if($('.select_max:checked').length >= limit){ // condition to check the limit you specified
      alert('Limit to select your list has exceeded.');
      this.checked = false; // return false if limit exceeded. 
      }
  });
}); 
```

# jquery - JQuery - 带有 Firefox 的 Buggy 幻灯片

> ID：15768828
> 
> 赞同：4
> 
> 时间：2013-04-02T16:05:18.663
> 
> 标签：jquery, firefox, slide

我对 FireFox 中的 jQuery 切换效果有疑问。

这是我的代码：

```
$(document).ready(function() {
    $(".cube").click( function(){
        $(".cube").toggle( "slide", {easing:'easeInExpo', direction: 'left'}, 500, function(){
            $(".cube").toggle("slide", {easing:'easeOutExpo', direction: 'right'}, 500);
        });
    });
}); 
```

你可以[在这里检查问题](http://jsfiddle.net/7EJGP/2/)。

在 IE9 和 Chrome 中，立方体的动画效果很好，但在 Firefox 中，请自行查看。首先，该块在没有过渡的情况下向左移动，然后过渡开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T11:03:47.603

这可以通过自己为“立方体”设置动画来解决。

首先，您需要计算行进的像素数量：

```
pixelToTravel = parseInt($cube.css('marginLeft')) + $cube.position().left + $cube.outerWidth(); 
```

然后为“立方体”设置动画：

```
$cube.click(function(){
    $(this).animate({ right: pixelToTravel }, 500, 'easeInExpo', function(){
        $(this)
            .css({ 'right': 'initial', 'left': pixelToTravel })
            .animate({ left: 0 }, 500, 'easeOutExpo', function() {
                $(this).css('left', 'initial');
            });
     });
}); 
```

[你可以在这里](http://jsfiddle.net/7EJGP/27/)找到工作演示

# mysql - MySQL 分区修剪 PARTITION BY LIST

> ID：15768829
> 
> 赞同：2
> 
> 时间：2013-04-02T16:05:20.843
> 
> 标签：mysql, partitioning, pruning

我创建了一个 MySQL 表，它按日期列的月份进行分区，如下所示：

```
CREATE TABLE `my_big_table` (
  `some_id` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  `some_value` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `some_other_value` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `time` datetime NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci
PARTITION BY LIST(MONTH(time))
(PARTITION p1 VALUES IN (1) ENGINE = MyISAM,
 PARTITION p2 VALUES IN (2) ENGINE = MyISAM,
 PARTITION p3 VALUES IN (3) ENGINE = MyISAM,
 PARTITION p4 VALUES IN (4) ENGINE = MyISAM,
 PARTITION p5 VALUES IN (5) ENGINE = MyISAM,
 PARTITION p6 VALUES IN (6) ENGINE = MyISAM,
 PARTITION p7 VALUES IN (7) ENGINE = MyISAM,
 PARTITION p8 VALUES IN (8) ENGINE = MyISAM,
 PARTITION p9 VALUES IN (9) ENGINE = MyISAM,
 PARTITION p10 VALUES IN (10) ENGINE = MyISAM,
 PARTITION p11 VALUES IN (11) ENGINE = MyISAM,
 PARTITION p12 VALUES IN (12) ENGINE = MyISAM) 
```

现在，当我跑步时

```
explain partitions select * from my_big_table where month(time) = 2 limit 10; 
```

我得到输出：

```
id  select_type table       partitions              type    possible_keys   key key_len ref rows        Extra
1   SIMPLE      my_big_table    p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12  ALL NULL        NULL    NULL    NULL    10762868    "Using where" 
```

所以显然所有的分区都被读取了，我想知道为什么。引擎不应该足够聪明地找出匹配值只能在分区*p2*中找到吗？对于基于日期的查询，我得到相同的输出，例如

```
explain partitions select * from my_big_table where date(time) = '2013-02-01' limit 10; 
```

有什么线索吗？

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-26T04:51:43.633

除此以外的所有口味`PARTITION BY RANGE`都是无用的。当您有多个值（如您所见）时尤其如此。

相反，考虑`PARTITION BY RANGE(TO_DAYS(time))`和使用`WHERE time >= '2014-02-01' AND time < '2014-02-01' + INTERVAL 7 MONTH`（以扫描一个月为例）。不要使用. *_*`MONTH(time)`

[更多讨论](http://mysql.rjweb.org/doc.php/partitionmaint)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:18:13.343

好的，经过更多的谷歌搜索和更多
的试验和错误：问题似乎与我查询的 where 子句中的月份（...）或日期（...）语句有关。查询

```
explain partitions select * from my_big_table where time = '2013-02-01 00:00:00' limit 10; 
```

仅按预期扫描分区*p2 。*因此，似乎分区修剪仅在分区列的原始值是 where 子句的一部分时才有效。

干杯，亚历克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T18:49:03.033

你永远不应该对表值使用函数`month(time) = 2`，MySQL 将始终调查此类查询的所有值（即全表扫描）。

通常，您会发现这种与未使用索引相关的“问题”，但分区修剪也是如此。

# c# - 查找作为字典的对象的属性，其键为特定类型

> ID：15768830
> 
> 赞同：0
> 
> 时间：2013-04-02T16:05:25.077
> 
> 标签：c#, .net, reflection

我需要编写一个通用类型 T 的扩展方法，它遍历对象的所有属性并对那些值为 t 类型的字典做一些事情：

```
public static T DoDictionaries<T,t>(T source, Func<t,t> cleanUpper)
{

 Type objectType = typeof(T);
 List<PropertyInfo> properties = objectType.GetProperties().ToList();
 properties.Each(prop=>
      {
        if (typeof(Dictionary<????, t>).IsAssignableFrom(prop.PropertyType))
           {
                Dictionary<????, t> newDictionary = dictionary
                     .ToDictionary(kvp => kvp.Key, kvp => cleanUpper(dictionary[kvp.Key]));
                prop.SetValue(source, newDictionary);
           }
      });
 return source;
} 
```

我不能对字典键的类型使用另一种通用类型“k”，因为在一个对象中可以有许多具有各种键类型的字典。显然，必须做一些不同的事情而不是上面的代码。我只是不知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:29:11.007

```
public static TSource DoDictionaries<TSource, TValue>(TSource source, Func<TValue, TValue> cleanUpper)
    {
        Type type = typeof(TSource);

        PropertyInfo[] propertyInfos = type
            .GetProperties()
            .Where(info => info.PropertyType.IsGenericType &&
                           info.PropertyType.GetGenericTypeDefinition() == typeof (Dictionary<,>) &&
                           info.PropertyType.GetGenericArguments()[1] == typeof (TValue))
            .ToArray();

        foreach (var propertyInfo in propertyInfos)
        {
            var dict = (IDictionary)propertyInfo.GetValue(source, null);
            var newDict = (IDictionary)Activator.CreateInstance(propertyInfo.PropertyType);
            foreach (var key in dict.Keys)
            {
                newDict[key] = cleanUpper((TValue)dict[key]);
            }
            propertyInfo.SetValue(source, newDict, null);
        }

        return source;
    } 
```

# c++ - 布尔函数作为输入参数

> ID：15768832
> 
> 赞同：3
> 
> 时间：2013-04-02T16:05:30.140
> 
> 标签：c++, c++11, lambda, signature

我想编写一个执行某些操作的方法，直到终止标准变为真。这个终止标准应该由用户给出，它可以是任何标准。

我正在考虑将返回类型为 boolean（可能是闭包）的函数传递给该方法，并将其作为 while 循环的条件调用。

在 Python 中，这将是

```
class Example:

    def doSomething(self, amIDone):
        while not amIDone():
            something()
        return 
```

如何在 C++11 中表达这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T16:09:42.597

您可以将您的函数设为模板，并让它接受任何返回`bool`. 例如：

```
template<typename P>
void doSomething(P&& p)
{
    while (p())
    {
        something();
    }
} 
```

这就是您可以通过传递 lambda 来调用它的方式，例如：

```
int main()
{
    // Possibly pass a more clever lambda here...
    doSomething([] () { return true; });
} 
```

当然，您可以传递一个常规函子而不是 lambda：

```
struct my_functor
{
    // Possibly write a more clever call operator here...
    bool operator () ()
    {
        return true;
    }
};

int main()
{
    doSomething(my_functor());
} 
```

函数指针也是一种选择：

```
// Possibly use a more clever function than this one...
bool my_predicate()
{
    return true;
}

int main()
{
    doSomething(my_predicate);
} 
```

如果你有理由不让你的函数成为模板（例如，因为它是`virtual`某个类的成员函数），你可以使用`std::function`：

```
void doSomething(std::function<bool()> p)
{
    while (p())
    {
        something();
    }
} 
```

`std::function`上面的所有示例都[可以](http://www.drdobbs.com/cpp/efficient-use-of-lambda-expressions-and/232500059)与 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T16:09:24.600

您可以使用标题来执行此`std::function`操作`<functional>`。

谓词如下所示：

```
bool predicate()
{
    ...
    return false;
} 
```

这是您使用谓词函子的课程

```
struct A
{
    void test (std::function<bool(void)> func)
    {
        while( func() )
        {   
            perform();
        }
    }
} 
```

你可以这样称呼它：

```
A a;
a.test(predicate); 
```

在本例中，我将函数`bool predicate()`作为谓词。但是 lambda 函数或定义类`bool operator()`的工作方式相同。

# android - 在android webview中全屏播放HTML5视频

> ID：15768837
> 
> 赞同：101
> 
> 时间：2013-04-02T16:05:35.090
> 
> 标签：android, android-webview, html5-video

好吧，我已经搜索了几天，如何在 android WebView 上以全屏模式显示 HTML5 视频。

我设法在我的 webview 上播放 HTML5 视频。在全屏模式下显示视频时会出现问题。

我发现，android 有两种处理 <video> 标签的方法：

1.  **在 android 版本 <= 2.3.3**上， onShowCustomView 方法被触发，我可以拥有 VideoView 实例，并在视频完成时设置侦听器，设置控制器等。到目前为止一切都很好。

2.  **在 ICS（可能是 3.0 及更高版本）**上，看起来 <video> 以不同的方式处理。播放 HTML5 视频时，onShowCustomView 不会在正常模式下被调用 - 看起来 WebView 中有一个内部业务播放视频，并且显示了 <video> 标签中定义的所有控件 - 我无法以任何方式访问它。实际上，如果视频以正常模式播放，这没问题，因为控件在那里并且正在工作。

这导致我遇到了一个大问题：当以全屏模式显示视频时，正在调用 onShowCustomView - 但在 ICS 上，“view”参数不是 VideoView 的实例。

我设法发现该实例是 VideoSurfaceView 的实例，它是 HTML5VideoFullScreen 类的私有内部类。我们可以访问这个内部类的唯一方法是通过反射。

在查看了这个类的 GrepCode 之后，我了解到与 VideoView 不同，HTML5VideoFullScreen$VideoSurfaceView 不包含可以监听其事件或访问其控件的 MediaPlayer 实例。我唯一能做的就是把这个 VideoSurfaceView 按原样放在一个全屏布局中而不控制它。

底线 - 当全屏显示视频时，我不知道视频何时结束，它的控件没有显示 - 这很可悲。我无法获得关闭全屏的触发器。

我尝试了一些不成功的解决方法：

1.  反思：我试图从内部类 VideoSurfaceView 访问包含 MediaPlayer 成员的 HTML5VideoFullScreen 实例。我没有设法得到它，我不确定这是否可能（ViewSurfaceView 不包含其所有者的实例）。

2.  通过 Javascript 注册视频事件（例如，onended），并通过 JavascriptInterface 在 JAVA 中处理我需要的内容：我发现这个解决方案不可靠，因为在这样做时我遇到了另一个问题：<video> 标签可以嵌套在一个 . iframe 源不是我的，我无法获取它的内容（getElementById 或 getElementsByTagName[i] 为空值）——这意味着我无法访问 iframe 内的 <video> 元素。

我仍在寻找解决方案，关于这个问题的文章很少。有没有人设法解决它？帮助将不胜感激！

**VideoView**类：[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/widget/VideoView.java/)（有 MediaPlayer）

**HTML5VideoFullScreen$VideoSurfaceView**类：[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/webkit/HTML5VideoFullScreen.java)（没有 MediaPlayer）

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-04-23T21:31:46.653

# *编辑 2014/10：应大众需求，我正在维护并将其移至 GitHub。请检查[cprcrack/VideoEnabledWebView](https://github.com/cprcrack/VideoEnabledWebView)以获取最新版本。将保留此答案仅供参考。*

*编辑 2014/01：改进了示例用法，包括 nonVideoLayout、videoLayout 和 videoLoading 视图，供那些请求更多示例代码以便更好地理解的用户使用。*

*编辑 2013/12：一些与 Sony Xperia 设备兼容性相关的错误修复，但实际上影响了所有设备。*

*编辑 2013/11：在带有新 Chromium webview 的 Android 4.4 KitKat（API 级别 19）发布后，我不得不再次努力工作。进行了几项改进。您应该更新到这个新版本。[我在WTFPL](http://www.wtfpl.net/)下发布此源。*

*编辑 2013/04：经过 1 周的努力，我终于实现了我需要的一切。我认为我创建的这两个通用类可以解决你所有的问题。*

`VideoEnabledWebChromeClient`如果您不需要`VideoEnabledWebView`添加的功能，可以单独使用。但`VideoEnabledWebView`必须始终依赖一个`VideoEnabledWebChromeClient`。**请仔细阅读这两个班级的*所有*评论。**

## VideoEnabledWebChromeClient 类

```
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnErrorListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.webkit.WebChromeClient;
import android.widget.FrameLayout;

/**
 * This class serves as a WebChromeClient to be set to a WebView, allowing it to play video.
 * Video will play differently depending on target API level (in-line, fullscreen, or both).
 *
 * It has been tested with the following video classes:
 * - android.widget.VideoView (typically API level <11)
 * - android.webkit.HTML5VideoFullScreen$VideoSurfaceView/VideoTextureView (typically API level 11-18)
 * - com.android.org.chromium.content.browser.ContentVideoView$VideoSurfaceView (typically API level 19+)
 * 
 * Important notes:
 * - For API level 11+, android:hardwareAccelerated="true" must be set in the application manifest.
 * - The invoking activity must call VideoEnabledWebChromeClient's onBackPressed() inside of its own onBackPressed().
 * - Tested in Android API levels 8-19\. Only tested on http://m.youtube.com.
 *
 * @author Cristian Perez (http://cpr.name)
 *
 */
public class VideoEnabledWebChromeClient extends WebChromeClient implements OnPreparedListener, OnCompletionListener, OnErrorListener
{
    public interface ToggledFullscreenCallback
    {
        public void toggledFullscreen(boolean fullscreen);
    }

    private View activityNonVideoView;
    private ViewGroup activityVideoView;
    private View loadingView;
    private VideoEnabledWebView webView;

    private boolean isVideoFullscreen; // Indicates if the video is being displayed using a custom view (typically full-screen)
    private FrameLayout videoViewContainer;
    private CustomViewCallback videoViewCallback;

    private ToggledFullscreenCallback toggledFullscreenCallback;

    /**
     * Never use this constructor alone.
     * This constructor allows this class to be defined as an inline inner class in which the user can override methods
     */
    @SuppressWarnings("unused")
    public VideoEnabledWebChromeClient()
    {
    }

    /**
     * Builds a video enabled WebChromeClient.
     * @param activityNonVideoView A View in the activity's layout that contains every other view that should be hidden when the video goes full-screen.
     * @param activityVideoView A ViewGroup in the activity's layout that will display the video. Typically you would like this to fill the whole layout.
     */
    @SuppressWarnings("unused")
    public VideoEnabledWebChromeClient(View activityNonVideoView, ViewGroup activityVideoView)
    {
        this.activityNonVideoView = activityNonVideoView;
        this.activityVideoView = activityVideoView;
        this.loadingView = null;
        this.webView = null;
        this.isVideoFullscreen = false;
    }

    /**
     * Builds a video enabled WebChromeClient.
     * @param activityNonVideoView A View in the activity's layout that contains every other view that should be hidden when the video goes full-screen.
     * @param activityVideoView A ViewGroup in the activity's layout that will display the video. Typically you would like this to fill the whole layout.
     * @param loadingView A View to be shown while the video is loading (typically only used in API level <11). Must be already inflated and without a parent view.
     */
    @SuppressWarnings("unused")
    public VideoEnabledWebChromeClient(View activityNonVideoView, ViewGroup activityVideoView, View loadingView)
    {
        this.activityNonVideoView = activityNonVideoView;
        this.activityVideoView = activityVideoView;
        this.loadingView = loadingView;
        this.webView = null;
        this.isVideoFullscreen = false;
    }

    /**
     * Builds a video enabled WebChromeClient.
     * @param activityNonVideoView A View in the activity's layout that contains every other view that should be hidden when the video goes full-screen.
     * @param activityVideoView A ViewGroup in the activity's layout that will display the video. Typically you would like this to fill the whole layout.
     * @param loadingView A View to be shown while the video is loading (typically only used in API level <11). Must be already inflated and without a parent view.
     * @param webView The owner VideoEnabledWebView. Passing it will enable the VideoEnabledWebChromeClient to detect the HTML5 video ended event and exit full-screen.
     * Note: The web page must only contain one video tag in order for the HTML5 video ended event to work. This could be improved if needed (see Javascript code).
     */
    public VideoEnabledWebChromeClient(View activityNonVideoView, ViewGroup activityVideoView, View loadingView, VideoEnabledWebView webView)
    {
        this.activityNonVideoView = activityNonVideoView;
        this.activityVideoView = activityVideoView;
        this.loadingView = loadingView;
        this.webView = webView;
        this.isVideoFullscreen = false;
    }

    /**
     * Indicates if the video is being displayed using a custom view (typically full-screen)
     * @return true it the video is being displayed using a custom view (typically full-screen)
     */
    public boolean isVideoFullscreen()
    {
        return isVideoFullscreen;
    }

    /**
     * Set a callback that will be fired when the video starts or finishes displaying using a custom view (typically full-screen)
     * @param callback A VideoEnabledWebChromeClient.ToggledFullscreenCallback callback
     */
    public void setOnToggledFullscreen(ToggledFullscreenCallback callback)
    {
        this.toggledFullscreenCallback = callback;
    }

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback)
    {
        if (view instanceof FrameLayout)
        {
            // A video wants to be shown
            FrameLayout frameLayout = (FrameLayout) view;
            View focusedChild = frameLayout.getFocusedChild();

            // Save video related variables
            this.isVideoFullscreen = true;
            this.videoViewContainer = frameLayout;
            this.videoViewCallback = callback;

            // Hide the non-video view, add the video view, and show it
            activityNonVideoView.setVisibility(View.INVISIBLE);
            activityVideoView.addView(videoViewContainer, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
            activityVideoView.setVisibility(View.VISIBLE);

            if (focusedChild instanceof android.widget.VideoView)
            {
                // android.widget.VideoView (typically API level <11)
                android.widget.VideoView videoView = (android.widget.VideoView) focusedChild;

                // Handle all the required events
                videoView.setOnPreparedListener(this);
                videoView.setOnCompletionListener(this);
                videoView.setOnErrorListener(this);
            }
            else
            {
                // Other classes, including:
                // - android.webkit.HTML5VideoFullScreen$VideoSurfaceView, which inherits from android.view.SurfaceView (typically API level 11-18)
                // - android.webkit.HTML5VideoFullScreen$VideoTextureView, which inherits from android.view.TextureView (typically API level 11-18)
                // - com.android.org.chromium.content.browser.ContentVideoView$VideoSurfaceView, which inherits from android.view.SurfaceView (typically API level 19+)

                // Handle HTML5 video ended event only if the class is a SurfaceView
                // Test case: TextureView of Sony Xperia T API level 16 doesn't work fullscreen when loading the javascript below
                if (webView != null && webView.getSettings().getJavaScriptEnabled() && focusedChild instanceof SurfaceView)
                {
                    // Run javascript code that detects the video end and notifies the Javascript interface
                    String js = "javascript:";
                    js += "var _ytrp_html5_video_last;";
                    js += "var _ytrp_html5_video = document.getElementsByTagName('video')[0];";
                    js += "if (_ytrp_html5_video != undefined && _ytrp_html5_video != _ytrp_html5_video_last) {";
                    {
                        js += "_ytrp_html5_video_last = _ytrp_html5_video;";
                        js += "function _ytrp_html5_video_ended() {";
                        {
                            js += "_VideoEnabledWebView.notifyVideoEnd();"; // Must match Javascript interface name and method of VideoEnableWebView
                        }
                        js += "}";
                        js += "_ytrp_html5_video.addEventListener('ended', _ytrp_html5_video_ended);";
                    }
                    js += "}";
                    webView.loadUrl(js);
                }
            }

            // Notify full-screen change
            if (toggledFullscreenCallback != null)
            {
                toggledFullscreenCallback.toggledFullscreen(true);
            }
        }
    }

    @Override @SuppressWarnings("deprecation")
    public void onShowCustomView(View view, int requestedOrientation, CustomViewCallback callback) // Available in API level 14+, deprecated in API level 18+
    {
        onShowCustomView(view, callback);
    }

    @Override
    public void onHideCustomView()
    {
        // This method should be manually called on video end in all cases because it's not always called automatically.
        // This method must be manually called on back key press (from this class' onBackPressed() method).

        if (isVideoFullscreen)
        {
            // Hide the video view, remove it, and show the non-video view
            activityVideoView.setVisibility(View.INVISIBLE);
            activityVideoView.removeView(videoViewContainer);
            activityNonVideoView.setVisibility(View.VISIBLE);

            // Call back (only in API level <19, because in API level 19+ with chromium webview it crashes)
            if (videoViewCallback != null && !videoViewCallback.getClass().getName().contains(".chromium."))
            {
                videoViewCallback.onCustomViewHidden();
            }

            // Reset video related variables
            isVideoFullscreen = false;
            videoViewContainer = null;
            videoViewCallback = null;

            // Notify full-screen change
            if (toggledFullscreenCallback != null)
            {
                toggledFullscreenCallback.toggledFullscreen(false);
            }
        }
    }

    @Override
    public View getVideoLoadingProgressView() // Video will start loading
    {
        if (loadingView != null)
        {
            loadingView.setVisibility(View.VISIBLE);
            return loadingView;
        }
        else
        {
            return super.getVideoLoadingProgressView();
        }
    }

    @Override
    public void onPrepared(MediaPlayer mp) // Video will start playing, only called in the case of android.widget.VideoView (typically API level <11)
    {
        if (loadingView != null)
        {
            loadingView.setVisibility(View.GONE);
        }
    }

    @Override
    public void onCompletion(MediaPlayer mp) // Video finished playing, only called in the case of android.widget.VideoView (typically API level <11)
    {
        onHideCustomView();
    }

    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) // Error while playing video, only called in the case of android.widget.VideoView (typically API level <11)
    {
        return false; // By returning false, onCompletion() will be called
    }

    /**
     * Notifies the class that the back key has been pressed by the user.
     * This must be called from the Activity's onBackPressed(), and if it returns false, the activity itself should handle it. Otherwise don't do anything.
     * @return Returns true if the event was handled, and false if was not (video view is not visible)
     */
    public boolean onBackPressed()
    {
        if (isVideoFullscreen)
        {
            onHideCustomView();
            return true;
        }
        else
        {
            return false;
        }
    }

} 
```

## VideoEnabledWebView 类

```
import android.annotation.SuppressLint;
import android.content.Context;
import android.os.Handler;
import android.os.Looper;
import android.util.AttributeSet;
import android.webkit.WebChromeClient;
import android.webkit.WebView;

import java.util.Map;

/**
 * This class serves as a WebView to be used in conjunction with a VideoEnabledWebChromeClient.
 * It makes possible:
 * - To detect the HTML5 video ended event so that the VideoEnabledWebChromeClient can exit full-screen.
 * 
 * Important notes:
 * - Javascript is enabled by default and must not be disabled with getSettings().setJavaScriptEnabled(false).
 * - setWebChromeClient() must be called before any loadData(), loadDataWithBaseURL() or loadUrl() method.
 *
 * @author Cristian Perez (http://cpr.name)
 *
 */
public class VideoEnabledWebView extends WebView
{
    public class JavascriptInterface
    {
        @android.webkit.JavascriptInterface
        public void notifyVideoEnd() // Must match Javascript interface method of VideoEnabledWebChromeClient
        {
            // This code is not executed in the UI thread, so we must force that to happen
            new Handler(Looper.getMainLooper()).post(new Runnable()
            {
                @Override
                public void run()
                {
                    if (videoEnabledWebChromeClient != null)
                    {
                        videoEnabledWebChromeClient.onHideCustomView();
                    }
                }
            });
        }
    }

    private VideoEnabledWebChromeClient videoEnabledWebChromeClient;
    private boolean addedJavascriptInterface;

    public VideoEnabledWebView(Context context)
    {
        super(context);
        addedJavascriptInterface = false;
    }

    @SuppressWarnings("unused")
    public VideoEnabledWebView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        addedJavascriptInterface = false;
    }

    @SuppressWarnings("unused")
    public VideoEnabledWebView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        addedJavascriptInterface = false;
    }

    /**
     * Indicates if the video is being displayed using a custom view (typically full-screen)
     * @return true it the video is being displayed using a custom view (typically full-screen)
     */
    public boolean isVideoFullscreen()
    {
        return videoEnabledWebChromeClient != null && videoEnabledWebChromeClient.isVideoFullscreen();
    }

    /**
     * Pass only a VideoEnabledWebChromeClient instance.
     */
    @Override @SuppressLint("SetJavaScriptEnabled")
    public void setWebChromeClient(WebChromeClient client)
    {
        getSettings().setJavaScriptEnabled(true);

        if (client instanceof VideoEnabledWebChromeClient)
        {
            this.videoEnabledWebChromeClient = (VideoEnabledWebChromeClient) client;
        }

        super.setWebChromeClient(client);
    }

    @Override
    public void loadData(String data, String mimeType, String encoding)
    {
        addJavascriptInterface();
        super.loadData(data, mimeType, encoding);
    }

    @Override
    public void loadDataWithBaseURL(String baseUrl, String data, String mimeType, String encoding, String historyUrl)
    {
        addJavascriptInterface();
        super.loadDataWithBaseURL(baseUrl, data, mimeType, encoding, historyUrl);
    }

    @Override
    public void loadUrl(String url)
    {
        addJavascriptInterface();
        super.loadUrl(url);
    }

    @Override
    public void loadUrl(String url, Map<String, String> additionalHttpHeaders)
    {
        addJavascriptInterface();
        super.loadUrl(url, additionalHttpHeaders);
    }

    private void addJavascriptInterface()
    {
        if (!addedJavascriptInterface)
        {
            // Add javascript interface to be called when the video ends (must be done before page load)
            addJavascriptInterface(new JavascriptInterface(), "_VideoEnabledWebView"); // Must match Javascript interface name of VideoEnabledWebChromeClient

            addedJavascriptInterface = true;
        }
    }

} 
```

## 示例用法：

主布局*activity_main.xml*，我们在其中放置了 VideoEnabledWebView 和其他使用的视图：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <!-- View that will be hidden when video goes fullscreen -->
    <RelativeLayout
        android:id="@+id/nonVideoLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <your.package.VideoEnabledWebView
            android:id="@+id/webView"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

    </RelativeLayout>   

    <!-- View where the video will be shown when video goes fullscreen -->
    <RelativeLayout
        android:id="@+id/videoLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <!-- View that will be shown while the fullscreen video loads (maybe include a spinner and a "Loading..." message) -->
        <View
            android:id="@+id/videoLoading"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:visibility="invisible" />

    </RelativeLayout>

</RelativeLayout> 
```

Activity 的*onCreate()*，我们在其中初始化它：

```
private VideoEnabledWebView webView;
private VideoEnabledWebChromeClient webChromeClient;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    // Set layout
    setContentView(R.layout.activity_main);

    // Save the web view
    webView = (VideoEnabledWebView) findViewById(R.id.webView);

    // Initialize the VideoEnabledWebChromeClient and set event handlers
    View nonVideoLayout = findViewById(R.id.nonVideoLayout); // Your own view, read class comments
    ViewGroup videoLayout = (ViewGroup) findViewById(R.id.videoLayout); // Your own view, read class comments
    View loadingView = getLayoutInflater().inflate(R.layout.view_loading_video, null); // Your own view, read class comments
    webChromeClient = new VideoEnabledWebChromeClient(nonVideoLayout, videoLayout, loadingView, webView) // See all available constructors...
    {
        // Subscribe to standard events, such as onProgressChanged()...
        @Override
        public void onProgressChanged(WebView view, int progress)
        {
            // Your code...
        }
    };
    webChromeClient.setOnToggledFullscreen(new VideoEnabledWebChromeClient.ToggledFullscreenCallback()
    {
        @Override
        public void toggledFullscreen(boolean fullscreen)
        {
            // Your code to handle the full-screen change, for example showing and hiding the title bar. Example:
            if (fullscreen)
            {
                WindowManager.LayoutParams attrs = getWindow().getAttributes();
                attrs.flags |= WindowManager.LayoutParams.FLAG_FULLSCREEN;
                attrs.flags |= WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON;
                getWindow().setAttributes(attrs);
                if (android.os.Build.VERSION.SDK_INT >= 14)
                {
                    getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
                }
            }
            else
            {
                WindowManager.LayoutParams attrs = getWindow().getAttributes();
                attrs.flags &= ~WindowManager.LayoutParams.FLAG_FULLSCREEN;
                attrs.flags &= ~WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON;
                getWindow().setAttributes(attrs);
                if (android.os.Build.VERSION.SDK_INT >= 14)
                {
                    getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
                }
            }

        }
    });
    webView.setWebChromeClient(webChromeClient);

    // Navigate everywhere you want, this classes have only been tested on YouTube's mobile site
    webView.loadUrl("http://m.youtube.com");
} 
```

并且不要忘记调用*onBackPressed()*：

```
@Override
public void onBackPressed()
{
    // Notify the VideoEnabledWebChromeClient, and handle it ourselves if it doesn't handle it
    if (!webChromeClient.onBackPressed())
    {
        if (webView.canGoBack())
        {
            webView.goBack();
        }
        else
        {
            // Close app (presumably)
            super.onBackPressed();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2019-05-17T12:56:01.777

**在Android 9.0**版本上测试

没有一个答案对我有用。这是最后的工作

```
import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;
import android.widget.ProgressBar;

public class MainActivity extends AppCompatActivity {

    WebView mWebView;

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mWebView = (WebView) findViewById(R.id.webView);

        mWebView.setWebViewClient(new WebViewClient());
        mWebView.setWebChromeClient(new MyChrome());
        WebSettings webSettings = mWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setAllowFileAccess(true);
        webSettings.setAppCacheEnabled(true);

       if (savedInstanceState == null) {
          mWebView.loadUrl("https://www.youtube.com/");
       }

    }

    private class MyChrome extends WebChromeClient {

        private View mCustomView;
        private WebChromeClient.CustomViewCallback mCustomViewCallback;
        protected FrameLayout mFullscreenContainer;
        private int mOriginalOrientation;
        private int mOriginalSystemUiVisibility;

        MyChrome() {}

        public Bitmap getDefaultVideoPoster()
        {
            if (mCustomView == null) {
                return null;
            }
            return BitmapFactory.decodeResource(getApplicationContext().getResources(), 2130837573);
        }

        public void onHideCustomView()
        {
            ((FrameLayout)getWindow().getDecorView()).removeView(this.mCustomView);
            this.mCustomView = null;
            getWindow().getDecorView().setSystemUiVisibility(this.mOriginalSystemUiVisibility);
            setRequestedOrientation(this.mOriginalOrientation);
            this.mCustomViewCallback.onCustomViewHidden();
            this.mCustomViewCallback = null;
        }

        public void onShowCustomView(View paramView, WebChromeClient.CustomViewCallback paramCustomViewCallback)
        {
            if (this.mCustomView != null)
            {
                onHideCustomView();
                return;
            }
            this.mCustomView = paramView;
            this.mOriginalSystemUiVisibility = getWindow().getDecorView().getSystemUiVisibility();
            this.mOriginalOrientation = getRequestedOrientation();
            this.mCustomViewCallback = paramCustomViewCallback;
            ((FrameLayout)getWindow().getDecorView()).addView(this.mCustomView, new FrameLayout.LayoutParams(-1, -1));
            getWindow().getDecorView().setSystemUiVisibility(3846 | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);
        }
    }

 @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        mWebView.saveState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        mWebView.restoreState(savedInstanceState);
    }
} 
```

在**AndroidManifest.xml中**

```
<activity
  android:name=".MainActivity"
  android:configChanges="orientation|screenSize" /> 
```

源[怪物技术](https://www.monstertechnocodes.com/2018/07/how-to-enable-fullscreen-mode-in-any.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T02:14:05.703

***编辑：请参阅[我的其他答案](https://stackoverflow.com/a/16179544/423171 "我的另一个答案")，因为您现在可能不需要这个。***

正如您所说，在 API 级别 11+ 中，通过了 HTML5VideoFullScreen$VideoSurfaceView。但是，当您说“它没有 MediaPlayer”时，我认为您是不对的。

**这是使用反射**从 HTML5VideoFullScreen$VideoSurfaceView 实例到达 MediaPlayer 实例的方法：

```
@SuppressWarnings("rawtypes")
Class c1 = Class.forName("android.webkit.HTML5VideoFullScreen$VideoSurfaceView");
Field f1 = c1.getDeclaredField("this$0");
f1.setAccessible(true);

@SuppressWarnings("rawtypes")
Class c2 = f1.getType().getSuperclass();
Field f2 = c2.getDeclaredField("mPlayer");
f2.setAccessible(true);

Object ___html5VideoViewInstance = f1.get(focusedChild); // Look at the code in my other answer to this same question to see whats focusedChild

Object ___mpInstance = f2.get(___html5VideoViewInstance); // This is the MediaPlayer instance. 
```

因此，现在您可以像这样设置 MediaPlayer 实例的 onCompletion 侦听器：

```
OnCompletionListener ocl = new OnCompletionListener()
{
    @Override
    public void onCompletion(MediaPlayer mp)
    {
        // Do stuff
    }
};

Method m1 = f2.getType().getMethod("setOnCompletionListener", new Class[] { Class.forName("android.media.MediaPlayer$OnCompletionListener") });
m1.invoke(___mpInstance, ocl); 
```

代码没有失败，但我不完全确定是否真的会调用 onCompletion 侦听器，或者它是否对您的情况有用。但以防万一有人想尝试一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T18:47:18.390

非常感谢你的那堂课，克里斯蒂安。

我对其进行了微调，以便自定义加载视图是可选的，如下所示：

```
 @Override
    public View getVideoLoadingProgressView() // Video will start loading, only called in the case of VideoView (typically API level 10-)
    {
        if (loadingView == null)
        {
            return super.getVideoLoadingProgressView();
        }
        else
        {
            loadingView.setVisibility(View.VISIBLE);
            return loadingView;
        }
    } 
```

我还添加了一个只接受两个参数的新构造函数。无论如何，如果您不需要加载视图，只需稍微简化一下。再次感谢您提供这个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-14T14:26:25.653

刚设置
`mWebView.setWebChromeClient(new WebChromeClient());`

和视频播放通常不需要任何自定义视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T23:49:32.157

这很棒。但是，如果您希望您的网站链接在应用程序本身中打开，请在您的 ExampleActivity.java 中添加以下代码：

```
webView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().endsWith("yourwebsite.com")) {
                return false;
            }

            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            view.getContext().startActivity(intent);
            return true;
        }
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-27T20:15:44.067

Cprcrack 的答案非常适用于 API 级别 19 及以下。只需对 cprcrack 进行少量添加即可`onShowCustomView`使其在 API 级别 21+ 上运行

```
if (Build.VERSION.SDK_INT >= 21) {
      videoViewContainer.setBackgroundColor(Color.BLACK);
      ((ViewGroup) webView.getParent()).addView(videoViewContainer);
      webView.scrollTo(0,0);  // centers full screen view 
} else {
      activityNonVideoView.setVisibility(View.INVISIBLE);
      ViewGroup.LayoutParams vg = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                    ViewGroup.LayoutParams.MATCH_PARENT);
      activityVideoView.addView(videoViewContainer,vg);
      activityVideoView.setVisibility(View.VISIBLE);
} 
```

您还需要反映变化`onHideCustomView`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-22T23:14:05.427

似乎在棒棒糖及更高版本（或者可能只是不同的 WebView 版本）中，调用`cprcrack's` `onHideCustomView()`方法不起作用。如果从退出全屏按钮调用它可以工作，但是当您专门调用该方法时，它只会退出全屏但`webView`保持空白。一种解决方法是简单地将这些代码行添加到`onHideCustomView()`：

```
String js = "javascript:";
js += "var _ytrp_html5_video = document.getElementsByTagName('video')[0];";
js += "_ytrp_html5_video.webkitExitFullscreen();";
webView.loadUrl(js); 
```

这将通知 webView 全屏已退出。

# performance - redis哈希性能怎么样

> ID：15768840
> 
> 赞同：4
> 
> 时间：2013-04-02T16:05:40.733
> 
> 标签：performance, hash, redis

我有一个有 20 个字段的对象 A，我有 100 万个对象 A 实例。

我想将它们存储在 Redis 中，每次都必须检索 100 多个实例。

现在，我有两个解决方案

1.  在json中序列化对象A的实例，并存储它使用`SET key json`
2.  将每个字段存储到一个哈希字段中，每个实例对应一个哈希映射。正如我之前所说，我每次都必须检索 100 多个实例。所以如果我使用redis hash，我必须调用数百个管道`HGETALL key`，它会很慢。所以我想知道我是否可以通过使用哈希来提高速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:54:34.747

这将取决于几件事：

1.  你的 Redis 服务器有多少 RAM 可用
2.  您要存储多少个对象
3.  序列化对象的大小及其字段

存储序列化对象将占用更多空间，因为您将所有额外的语言特定信息与原始数据一起存储。如果您的 RAM 不足或必须存储大量对象，最好将所有这些数据存储在哈希中。由于您有 100 万行，因此使用散列可能会节省相当多的空间。

我最近遇到了一个非常相似的问题。起初我尝试将序列化的对象存储在 Redis DB 中，但我必须存储超过 500 万个对象，并且每个对象都包含很多我不需要存储在 DB 中的多余数据。这导致了膨胀的 DB 大小并浪费了大量的 RAM。

您的要求可能与我的要求有很大不同，因此最好自己进行基准测试。尝试序列化一个对象，看看结果有多大。将其与键总和的大小进行比较，并比较两者之间的大小差异。如果序列化的对象不大，最好只进行序列化。记住反序列化不是一个微不足道的操作也很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-16T14:55:23.820

字符串和哈希是非常不同的数据类型，它们都有优点和缺点。在你暴露的情况下，你错过了一些非常重要的事情；例如：

*   你打算多久写一次密钥？
*   您是否需要检索 100 个项目来聚合它们？在这种情况下，用聚合值存储散列是没有意义的，所以检索只进行一次？
*   这是一个重写入还是重读应用程序？
*   你需要原子地写吗？换句话说，2 个同时请求可以更新 Redis 中的相同值吗？如果是这样，您将如何保证存储 JSON 字符串不会导致竞争条件？

仅根据性能做出决定并不是一个好主意，您可能会遗漏一些其他重要方面，例如完整性、可伸缩性和可维护性。

# asp.net - 不同应用层之间如何交互？

> ID：15768842
> 
> 赞同：0
> 
> 时间：2013-04-02T16:05:44.423
> 
> 标签：asp.net, visa

首先，我现在很困惑，可能无法正确解释自己。让我尝试。我有一个业务层类，其中包含从 UI 层 aspx 页面调用的所有方法。通常如果一个方法抛出异常，我会在 UI 层捕获它并显示一条消息。如果没有，有时我会抓住业务层并仅记录错误。现在我创建了第三个项目/层，它将与外部 api（如 VISA）交互，我将从业务层方法中调用它的方法。api调用后，我返回一个包含json响应、错误代码和描述等的对象。如果出现错误（异常），我需要向用户显示消息。我怎么能在业务层做到这一点（最好的方法。我可以在成功的情况下返回错误字符串或空字符串）？或者我必须从 UI 层调用 api？这是一个将由 api 层发送的响应对象。我将显示错误或根据其内容继续。

```
public class ResponseContainer
{
    public bool Success { get; set; }
    public string JSONString { get; set; }
    public string ErrorCode { get; set; }
    public string ErrorDescription { get; set; }
    public bool? isVISAError { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:16:42.210

由于没有人能够指导我，这就是我所做的。我做了2个自定义异常类。业务和sql异常。在业务层捕获 sql 异常并抛出新的业务异常。所有业务异常都被 UI 层的调用事件捕获。在签证错误的情况下，我抛出了一个带有描述和捕获的新业务异常，并显示在简单的标签字段上。通过这个，我不必更改我的代码流程或检查我的任何函数的返回值。
我希望这对少数人有帮助，如果有人有更好的解决方案，请告诉我

# c - 是否可以在控制台中多次输入数字或字符串或其他任何计算？

> ID：15768843
> 
> 赞同：-3
> 
> 时间：2013-04-02T16:05:49.120
> 
> 标签：c

**是否可以在控制台中多次输入数字或字符串或任何内容（不止一次计算？）** 我的意思是，如果我让计算总和并输入 2 位数字，它会给我一个答案，但问题是问相同打开的控制台 2 次或 3 次或更多次在不关闭控制台的情况下执行相同的操作？

```
 #include <stdio.h> 
  main() 
  { 
      char ch; 
      printf("Enter a character\n"); 
      scanf("%c", &ch); 
      if (ch == \'a\' || ch == \'A\' || ch == \'e\' || ch == \'E\' || ch == \'i\' || ch == \'I\' || ch ==\'o\' || ch==\'O\' || ch == \'u\' || ch == \'U\') 
          printf("%c is a vowel.\n", ch); 
      else 
          printf("%c is not a vowel.\n", ch); 
      return 0; 
  } 
```

例如这里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:15:38.867

除非我完全没有抓住重点......你要问的是编程的基本构建块。如果您想获取用户输入以供以后使用，请将其存储在变量中；如果你想一遍又一遍地做同样的事情，你可以使用循环：

```
int main()
{
    int a, b;
    char again = 'y';
    while(again == 'y'){        // loop until the user is done.
        printf("give me numbers\n");
        scanf("%d %d", &a, &b);
        printf("%d + %d = %d\n", a, b, a+b);
        printf("go again? (y/n)");
        scanf(" %c", &again);      // store the input from the user, should we do it again?
    }
    return 0;
} 
```

所以这样一个程序的输出会是这样的：

```
give me numbers
1 2
1 + 2 = 3
go again? (y/n)y
give me numbers
3 4
3 + 4 = 7
go again? (y/n) 
```

这是一种循环，有很多[循环结构](http://www.cprogramming.com/tutorial/c/lesson3.html)。

# zend-framework - 如何使用 Zend_View_Helper 导航链接

> ID：15768850
> 
> 赞同：2
> 
> 时间：2013-04-02T16:06:03.720
> 
> 标签：zend-framework, hyperlink

我想在我的网站模板中添加分页。我的网站在 Zend Framework 上。我发现我可以使用 Zend_View_Helper Navigation Links 和示例

```
Render only start, next, and prev:
$helper->setRenderFlag(Zend_View_Helper_Navigation_Links::RENDER_START |
                       Zend_View_Helper_Navigation_Links::RENDER_NEXT |
                       Zend_View_Helper_Navigation_Links::RENDER_PREV); 
```

但问题是我无法理解如何使用它。有人可以给我一个例子或一个小的解释我需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:08:14.323

我建议您宁愿查看 Zend Framework 的分页：

[http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html](http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html)

如果您正在寻找一种逐步浏览数据集的方法，这将比导航助手更能帮助您。

编辑：评论后-您必须将相关的“rel”或“rev”添加到容器中，即，

```
$container = new Zend_Navigation(array(
    array(
        'label' => 'Relations using strings',
        'rel'   => array(
            'next' => 'http://www.example.org/'
        ),
        'rev'   => array(
            'prev' => 'http://www.example.net/'
        )
    ),
); 
```

然后在视图中：

```
<?php echo $this->view->navigation()->links(); ?> 
```

希望这会更好。

# r - 如何使用线性模型按因子级别获取系数？

> ID：15768856
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:17.940
> 
> 标签：r, excel, statistics, linear-regression, forecasting

我正在分析来自太阳能发电厂的数据。我想在以后的每一天每小时调整估计的生产工厂，可以得到的数据是未来三天的天气预报，这样你就知道明天会是什么日子（1到5，1晴天和 5 天多云）。

所以想法是将容量乘以一个因子，所以这是对将发生的情况的估计，不会偏离实际测量。

我想通过使用一天的变量类型作为一个因素来建立一个线性模型。可能是近似真实生产的最佳方式。

今天的标准是：

*   日型1，生产能力*1
*   日型2，生产能力*0.7
*   日型3，生产能力*0.4
*   日型4，生产能力*0.15
*   日型5，生产能力*0

我对这些系数进行了研究，工厂的产量被低估了，这意味着实际上产生了更多的能量，几乎 50%。使用 excel 的求解器找到我得到的系数：

*   1.6
*   1.2
*   0.9
*   0.65
*   0.5

麻烦的是，这仅适用于这种特殊的数据情况，我无法一概而论，因为我想制作模型）。

[数据](https://www.dropbox.com/s/uds1nl62670pd0i/zcinco.txt)

这是我申请的：

```
data <-read.table ("zcinco.txt", dec = ",", header = TRUE)
head (data)

model <- lm (data [-1.2] ~ embed (data [, 2], 2) [, 2] + as.factor (data [-1.3]) + data [1, 4])

head (cbind (matrix (predict (model)), data [-1.2]))
summary (model)

 Call:
lm(formula = data[-1, 2] ~ embed(data[, 2], 2)[, 2] + as.factor(data[-1, 
    3]) + data[-1, 4])

Residuals:
      Min        1Q    Median        3Q       Max 
-0.054966 -0.009518 -0.000855  0.010966  0.039100 

Coefficients:
                           Estimate Std. Error t value Pr(>|t|)    
(Intercept)               2.528e-06  1.456e-03   0.002   0.9986    
embed(data[, 2], 2)[, 2]  3.870e-01  2.969e-02  13.036  < 2e-16 ***
as.factor(data[-1, 3])2  -2.630e-03  1.407e-03  -1.869   0.0621 .  
as.factor(data[-1, 3])3   1.690e-03  2.371e-03   0.713   0.4762    
as.factor(data[-1, 3])4  -1.855e-02  2.251e-03  -8.241 1.07e-15 ***
as.factor(data[-1, 3])5  -1.790e-02  2.660e-03  -6.727 4.06e-11 ***
data[-1, 4]               8.930e-01  4.823e-02  18.517  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.01482 on 600 degrees of freedom
Multiple R-squared: 0.795,  Adjusted R-squared: 0.793 
F-statistic: 387.9 on 6 and 600 DF,  p-value: < 2.2e-16 
```

基地说明。

tiempo / 真实 / Tipo / capacidad

*   Tiempo：表示进行观察的时间。
*   实际测量表明实际的能源生产。
*   Tipo：表示观察日的类型（1 到 5）。
*   Capacidad：计划估计产能的百分比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:28:52.447

我会建议这样的事情：

```
m2 <- lm(data[-1, 2] ~ embed(data[, 2], 2)[, 2]:as.factor(data[-1, 3]) + data[-1, 4]) 
```

尽管我不确定您为什么忽略第一行以及嵌入用法。

# javascript - 将类型化数组作为任何 [] 传递？

> ID：15768857
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:18.167
> 
> 标签：javascript, knockout.js, typescript

为什么我不能将类型化数组传递给一个函数/构造函数，它需要一个`any[]`?

```
typedArray = new MyType[ ... ];
items = new ko.observableArray(typedArray); 
```

给我错误：

> 提供的参数与调用目标的任何签名都不匹配

`ko.observableArray`定义为：

```
interface KnockoutStatic 
{
    observableArray: KnockoutObservableArrayStatic;
}

interface KnockoutObservableArrayStatic
{
    new(value: any[]): KnockoutObservableArray;
}

declare var ko: KnockoutStatic; 
```

我如何通过我`MyType[]`的身份`any[]`？这是协方差的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:15:17.700

```
typedArray = new MyType[ ... ]; 
```

这不是在 JavaScript 或 TypeScript 中创建新数组的方式（在 0.9.0 中，这将是空数组情况下的语法错误）。你应该能够写：

```
typedArray = [ ... ]; 
```

并让编译器正确地将类型推断为`MyType[]`. 如果需要，您可以添加类型注释：

```
typedArray = <MyType[]>[ ... ]; 
```

# vim - 在 Vim 中切换回最后一个窗口的快捷方式？

> ID：15768860
> 
> 赞同：21
> 
> 时间：2013-04-02T16:06:23.727
> 
> 标签：vim

`Ctrl``w``1``w`切换到第一个窗口。

如果目前我经常在几个窗口中的两个窗口中进行编辑，那么切换回最后一个活动窗口的快捷方式将是完美的。

有这样的捷径吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-02T16:12:20.473

你试过了吗

```
<c-w><c-p> 
```

?

来自帮助：

```
CTRL-W p                    *CTRL-W_p* *CTRL-W_CTRL-P*
CTRL-W CTRL-P   Go to previous (last accessed) window.

                        *CTRL-W_P* *E441*
CTRL-W P    Go to preview window.  When there is no preview window this is
        an error.
        {not available when compiled without the |+quickfix| feature} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T16:23:32.947

正如肯特所说 `<c-w><c-p>`，将去上一个

您还可以使用方向 h、j、k 和 l 在窗口之间导航

```
<c-w><c-h>
<c-w><c-j>
<c-w><c-k>
<c-w><c-l> 
```

`<number><c-w><c-w>`将导航到特定窗口

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-02T16:37:57.563

您可以构建自己的短映射；Vim 在这方面是无限灵活的。例如，许多人发现这些很有用：

```
:noremap <C-j> <C-w>j
:noremap <C-k> <C-w>k
:noremap <C-h> <C-w>h
:noremap <C-l> <C-w>l 
```

此外，学习如何查找命令和导航内置的`:help`; 它很全面，并提供了许多提示。你不会像其他编辑器那样快速学习 Vim，但如果你致力于持续学习，它将证明是一个非常强大和高效的编辑器。

# c# - 在 Silverlight 应用程序顶部放置一个 HTML 控件并使其随应用程序一起滚动

> ID：15768863
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:35.903
> 
> 标签：c#, html, css, silverlight, layout

   我有一个全屏的 Silverlight 应用程序 (VS2010/C#)。
   我还有一个位于 Silverlight 应用程序之上的 html 控件。

   当浏览器窗口最大化时，位置是正确的。但是，当我将窗口恢复到较小的尺寸时，我会得到 silverlight 应用程序的滚动条（如预期的那样）。当我向下滚动时，我的 html 不会滚动并且相对于其窗口位置保持浮动。我希望 html 与 silverlight 应用程序一起滚动。如何才能做到这一点？

   出于业务流程的原因，我无法将 html 放入 silverlight 应用程序中。

这是我的**样式表**

```
<style type="text/css">
    html, body
    {
        height: 100%;
        overflow: auto;
    }
    body
    {
        padding: 0;
        margin: 0;
    }
    #silverlightControlHost
    {
        height: 100%;
        text-align: center;
        position: absolute;
        width: 100%;
        left: 0px;
        top: 0px;
    }
    #contentDiv
    {
        position: absolute;
        top: 15px;
        right: 30px;
        display: inline;
        z-index: 20000;
    }
</style> 
```

这是我的**html代码**

```
<form id="form1" runat="server" style="height:100%">
    <div runat="server" id="contentDiv">
        --HTML CONTROLS
    </div>
    <div id="silverlightControlHost">
        <object id="silverlightControl" data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
              <param name="windowless" value="true"/>
              <param name="enablehtmlaccess" value="true" />
      <param name="onError" value="onSilverlightError" />
      <param name="background" value="white" />
      <param name="minRuntimeVersion" value="4.0.50826.0" />
      <param name="autoUpgrade" value="true" />
      <a href="http://www.microsoft.com/GETSILVERLIGHT" style="text-decoration:none">
           <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
      </a>
    </object>
        <iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe>
    </div>
</form> 
```

   预先感谢您在此提供的任何帮助。

   我觉得出现的滚动条属于 silverlight 应用程序，这就是为什么滚动 html 内容时似乎浮动，但我一直无法证实这一理论。

**~~~编辑~~~**

   已确认滚动条属于 Silverlight 实例。为了确认这一点，我通过在 CSS 中设置一个大的“LEFT”和“TOP”属性将我的 html 控件位置设置为最右边和最底部。
   此时，浏览器和 Silverlight 应用程序在调整大小时都会出现滚动条。浏览器和 silverlight 应用程序的滚动条是不同的样式。
   重置 LEFT 和 TOP 属性并重现原始问题后，出现的滚动条与 Silverlight 应用程序具有相同的样式，而不是窗口。因此，所有滚动都发生在 Silverlight 应用程序本身上。

   向前推进的解决方案可能是打破业务流程并将 html 嵌入到 Silverlight 中。如果有人能想出一种不同的方法来实现这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:02:08.553

通过捕获滚动事件，我能够调整控件的顶部属性并允许滚动效果。这是解决方案的基础。

注意：svMainViewer是MainShell.xaml页面中的滚动View

**C# MainShell.xaml.cs 代码**

```
public partial class MainShell : UserControl
{
    #region Private Variables
    private double svHorizontalOffset;
    private double svVerticalOffset;
    #endregion

    #region Constants
    const string JAVASCRIPT_FUNCTION_VERTICALOFFSETCHANGED = "SilverlightScrollViewerVerticalOffest";
    const string JAVASCRIPT_FUNCTION_HORIZONTALOFFSETCHANGED = "SilverlightScrollViewerHorizontalOffest";
    #endregion
    public MainShell(IUnityContainer container)
    {
        InitializeComponent();

        #region Code required registering scroll bar offset notifications
        NotificationHelper.RegisterForNotification("HorizontalOffset", svMainShell, OnHorizontalOffsetChanged);
        NotificationHelper.RegisterForNotification("VerticalOffset", svMainShell, OnVerticalOffsetChanged);
        #endregion
    }

    #region Methods using dependency properties
    public void OnHorizontalOffsetChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        svHorizontalOffset = double.Parse(e.NewValue.ToString());
        System.Windows.Browser.HtmlPage.Window.Invoke(JAVASCRIPT_FUNCTION_HORIZONTALOFFSETCHANGED, svHorizontalOffset);
    }

    public void OnVerticalOffsetChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        svVerticalOffset = double.Parse(e.NewValue.ToString());
        System.Windows.Browser.HtmlPage.Window.Invoke(JAVASCRIPT_FUNCTION_VERTICALOFFSETCHANGED, svVerticalOffset);
    }
    #endregion

}

public class NotificationHelper
{
    public static void RegisterForNotification(string property, FrameworkElement frameworkElement, PropertyChangedCallback OnCallBack)
    {
        Binding binding = new Binding(property)
        {
            Source = frameworkElement
        };

        var dependencyproperty = System.Windows.DependencyProperty.RegisterAttached("ListenAttached" + property,
                                 typeof(object), typeof(UserControl), new System.Windows.PropertyMetadata(OnCallBack));

        frameworkElement.SetBinding(dependencyproperty, binding);
    }
} 
```

**Javascript 代码片段**

```
function SilverlightScrollViewerVerticalOffest(offset) 
{
        contentDivElement = document.getElementById("contentDiv");
        if (contentDivElement != null && contentDivElement.style.display != 'none') 
        {
            contentDivElementTop = 15 - offset;
            contentDivElementTop += 'px';
            contentDivElement .style.top = contentDivElementTop ;
        }
} 
```

[您可以在 Weareon 的博客http://blog.weareon.net/scrollviewer-scroll-change-event-in-silverlight/](http://blog.weareon.net/scrollviewer-scroll-change-event-in-silverlight/)上找到有关我实现的代码的更多详细信息

# html - 如果图像大于 div，则强制占据 div

> ID：15768864
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:37.627
> 
> 标签：html, css, background

我有一个页脚菜单，其背景是图像。

我想显示所有图像（免费图像比 div 大 2000x168）。我将宽度设置为 100%，但似乎没有显示整个图像，它只显示我的屏幕大小

如何显示完整的图像，而不仅仅是我能够在屏幕上看到的部分？

这是一个[小提琴](http://jsfiddle.net/e5Vv5/)

```
#bottomnav{
    width:100%;
    height:50px;
   background: no-repeat url(http://eurekavi.com/barraroja.png) /*repeat 0 0*/;
    position:absolute;
    bottom:0px;

} 
```

图像应该看起来像![这](https://i.stack.imgur.com/vsRU8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:13:41.090

在这里，试试这个：

```
 #bottomnav
    {
    width:100%;
    height:50px;
    background: no-repeat url(http://eurekavi.com/barraroja.png);
    background-size:100% 100%;
    } 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:17:58.090

您可以使用 CSS3 中的 background-size 属性。

```
#bottomnav{
    width:100%;
    height:50px;
    background:url(http://yoururl.com/image.png) no-repeat;
    background-size:100% auto;
} 
```

这将起作用，但仅适用于支持 CSS3 的浏览器。在这个例子中，图像的高度会根据分辨率自动调整。如果您想将其保持在预定的大小，您应该尝试这样的事情。

```
background-size:width height; 
```

在此设置您的宽度以 % 或 px 为单位，或者您可以使用 100% 作为上述帖子中提到的两者。它会起作用的。你也可以使用这个参数 background-position:center; 这将使图像居中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:18:04.420

取决于你想要什么：

```
#bottomnav{
    width:600px;
    height:50px;
    background:#F00;
    position:absolute;
    bottom:0px;
    background: no-repeat url(http://eurekavi.com/barraroja.png) top center;
    background-size: contain;
} 
```

您可以将背景居中以避免左右两侧出现不平衡的黑色区域。

参考：[http ://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

# php - 从mysql获取第二行的输出

> ID：15768867
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:44.570
> 
> 标签：php, mysql

嗨，我有这个 mysql 语句没有限制，所以它将按升序获得第一行，但我也想获得第二行的标题

```
 $res = mysql_query("select * from tas where id='{$m_id}' "); 
```

之后，我可以毫无问题地获取并获得第一个输出，之前我需要获取 id，所以我使用了这个

```
 $nidf=$m_id-1; 
```

但现在我需要以前 id.table 的标题是否包含 id、title、views 等。我知道它可以通过这个查询轻松完成

```
 $res2 = mysql_query("select * from tas where id='{$nidf}' "); 
```

但我不想执行第二个 syl 查询，我想了解如何在不使用上述查询的情况下完成

我不能不使用，因为我只需要第二个标题和我只需要第一行的其余部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:08:43.883

```
SELECT *
FROM tas
WHERE id <= $m_id
ORDER BY id DESC
LIMIT 2 
```

获取具有您指定 ID **OR* LESS**的所有行，按该 ID 降序排列，然后仅返回该有序集中的前 2 行。这将是您想要的 $m_id，以及下一个立即较低的 id。

# java - 我们可以将 printwriter 与 Apache poi 工作表一起使用吗

> ID：15768869
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:48.563
> 
> 标签：java, excel, jakarta-ee, csv, apache-poi

我正在创建一个工作簿并尝试下载它。当我使用 workbook.write(outputstream) 时，我面临的问题似乎 outputstream 和 printwriter 不能一起工作，这为我创建了一个响应已经提交的异常。您能否让我知道我们是否有任何方法可以使用 printwriter 编写此内容，所以我会从已经提交异常的响应中出来。

pRes.setContentType(MS_EXCEL); pRes.setHeader（内容，文件名）；

```
 outputStream = pRes.getOutputStream();
        workbook.write(outputStream); 
```

我得到的例外是，

java.lang.IllegalStateException: getOutputStream() 已经在 org.apache.catalina.connector.Response.getWriter(Response.java:619) 在 org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade. java:198) 在 org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125) 在 org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118) 在 org.apache.jasper.runtime .JspWriterImpl.flush(JspWriterImpl.java:173)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:26:08.877

由于您是从 jsp 调用的，因此您需要将其添加`<%@ page trimDirectiveWhitespaces="true" %>`到页面中以阻止空格与您的输出流混淆。

# java - 在不使用额外缓冲区的情况下删除重复项

> ID：15768872
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:50.777
> 
> 标签：java, duplicate-removal

我编写了一个简单的程序来从字符串中删除重复项，而无需使用任何额外的缓冲区。有人可以告诉我这是否是一个好的解决方案吗？我只想知道是否有比以下解决方案更好的其他解决方案..

编辑：如果我传入“跟进”作为输入，我应该取回唯一的字符串“FW UP”

```
 public static void removeDuplicateString(String input) {
        String value1 = input;
        String value2 = input;
        String finalValue = "";
        int count = 0;
        char char1;
        char char2;
        for (int i = 0; i < value1.length(); i++) {
            char1 = value1.charAt(i);
            for (int j = 0; j < value2.length(); j++) {
                char2 = value2.charAt(j);
                if (char1 == char2) {
                    count++;
                }
            }
            if (count > 1) {
                //System.out.println(i);
            } else {
                finalValue = finalValue + char1;
            }

            count = 0;
        }
        System.out.println(finalValue);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:26:13.073

如何使用这样的基于正则表达式的正则表达式从给定的字符串中删除重复字符：

```
String nonDup = input.replaceAll("(.)(?=.*?\\1)", ""); 
```

### 现场演示：http: [//ideone.com/W7EaPq](http://ideone.com/W7EaPq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:23:02.817

您的解决方案有效。

另一种解决方案：

```
public static void removeDuplicateString2(String input) {
    wh:
    while(true)
    {
        for(char c : input.toCharArray())
        {
            if(input.contains("" + c + c))
            {
                input = input.replaceAll("["+ c +"]" + "["+ c +"]", "");
                continue wh;
            }
        }
        break;
    }

    System.out.println(input);
} 
```

丑陋但有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:14:25.703

你可以试试这个：

```
public String removeDuplicateChars(String inputString) {
        if (inputString.length() <= 1 ) {
            return inputString;
        }
        if(inputString.substring(1, 2).equals(inputString.substring(0, 1)) ) {
            return removeDuplicateChars(inputString.substring(1));
        } else {
            return inputString.substring(0, 1) + removeDuplicateChars(inputString.substring(1));
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:16:07.923

public 你可以试试这个：

```
 public static void removeDuplicateString(String input) {
        char[] ch = input.toCharArray();
        char[] copy = new char[ch.length];
        char[] avoid = new char[ch.length];
        int counter = 0,count=0;
        for (int i = 0 ; i < ch.length; i++)
        {
            char cch = ch[i];
            boolean duplicate = false;
            if (input.indexOf(cch)==i && input.indexOf(cch,i+1)==-1)
            {
                for (int j = 0 ; j <=count ; j++)
                {
                    if (avoid[i]==cch)
                    {
                        duplicate = true;
                        break;
                    }
                }
                if (!duplicate)
                {
                    copy[counter] = cch;
                    counter++;
                }
            }
            else
            {
                avoid[count] = cch;
                count++;
            }
        }
        String finalString = new String(copy,0,counter);
        System.out.println(finalString);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-23T02:10:39.027

您可以使用“Mergesort”或“Quicksort”（假设您可以在排序时使用临时数组来分配数据，则需要额外的“O(n)”空间来执行此操作）。

对数组进行排序后，您可以简单地遍历数组，将一个元素与以下元素进行比较，每次发现给定元素等于同一个元素时，将元素向后移动一个位置。

通过这样做，你有：

*   O(N LOG N) 因为排序
*   O(N) 遍历所有元素
*   O(M) 向后移动元素

根据重复的数量，此代码可能会变得非常慢，因为向后移动元素以擦除重复的成本。

# android - 在 TextView 中覆盖 onDraw 导致 ListView 出现问题

> ID：15768875
> 
> 赞同：0
> 
> 时间：2013-04-02T16:06:53.233
> 
> 标签：android, listview, canvas, textview, actionbarsherlock

我正在尝试通过在扩展 TextView 的类中覆盖 onDraw 来旋转 TextView：

```
 // Rotation value 
private float rotation = 0;
@Override
public void onDraw(Canvas canvas) {
    if (rotation!=0) { 
        canvas.rotate(rotation, (getWidth()/2), (getHeight()/2));
        canvas.clipRect(0, 0, getWidth(), getHeight(), android.graphics.Region.Op.REPLACE);
    }
    super.onDraw(canvas);
} 
```

它运行良好，但是当我在带有 SherlockActionBar 的 ListView 中使用它时，我的问题就开始了。在 ListView 的 ArrayAdapter 的 getView 中，我正在创建一个新的扩展 TextView：

```
 TextViewPlus month = (TextViewPlus) rowView.findViewById(R.id.month);
month.setTextRotation(-90);
month.setText("MAR"); 
```

TextView 可以很好地旋转，但是当我滚动 ListView 时，它会覆盖 ActionBar！好像是在上面留下痕迹啊！

![滚动时叠加](https://i.stack.imgur.com/Va16t.png)

这是为什么？我该如何解决？

# c# - 在 html 属性中使用枚举值

> ID：15768876
> 
> 赞同：1
> 
> 时间：2013-04-02T16:06:56.023
> 
> 标签：c#, asp.net

有人可以告诉我为什么这不起作用，因为我迷路了，对 C# 来说有点新并且来自 php 环境

```
<asp:ListItem Value="<%:(int)Student.Classes.Enum.Enum.gender.male%>">Male</asp:ListItem> 
```

但是如果我在外面使用这个确切的代码，它就完美了，例如

```
I am <%:(int)Student.Classes.Enum.Enum.gender.male%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:21:12.220

正如建议的那样，您应该使用 .NET MVC 而不是 webforms，因此您应该使用 .NET MVC 而不是在`<asp:ListBox>`此处`@Html.DropDownList` 了解更多信息：http: [//agilewarrior.wordpress.com/2012/12/13/how-to-simple- html-dropdownlistfor-mvc-net/](http://agilewarrior.wordpress.com/2012/12/13/how-to-simple-html-dropdownlistfor-mvc-net/)

您的下拉/列表框代码将是：

```
@Html.DropDownList("StudentGender",
    new List<SelectListItem>() {  
        new SelectListItem(){ Text="Male",Value=Student.Classes.Enum.Enum.gender.male.ToString() },
        new SelectListItem(){ Text="Female",Value=Student.Classes.Enum.Enum.gender.female.ToString() }
    }, new { @class = "input-medium", size="6", multiple="multiple" } ) 
```

您仍然可以将 ASPX 用于 .NET MVC 中的渲染引擎，在这种情况下您可以使用：

```
<%: Html.DropDownList(...) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:30:52.850

我对这种事情有点生疏，@chris 是对的，如果你从 C# 等开始，就进入 MVC。ASP.Net 将在 5-10 年内消亡。

无论如何，我假设你有这样的东西：

```
<asp:ListBox runat="server" Id="listBox">
</asp:ListBox> 
```

你可能想在代码中设置它：

```
public Page_Load()
{
    listBox.DataSource = Enum.GetValues(typeof(Student.Classes.Enum.Enum.gender));
    listBox.DataBind();
} 
```

# c# - 在网站链接上打开本地驱动器单击

> ID：15768877
> 
> 赞同：0
> 
> 时间：2013-04-02T16:07:02.500
> 
> 标签：c#

是否可以在网站链接单击时打开本地驱动器？例如，如果我有一个名为 ArtWork 的链接。当用户单击此链接时，我应该在后面的代码中打开 D:/ArtWork 。这是在 VS 2005 的 Asp.Net 中使用 C#。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:09:53.277

问题是您所说的“打开 D:\ArtWork”是什么意思。

如果您想对文件做一些事情（不仅仅是上传）：

在支持它的浏览器中，您可以使用[File API](http://www.html5rocks.com/en/features/file_access)。

> HTML5 提供了非常强大的 API 来与二进制数据和用户的本地文件系统进行交互。文件 API 使 Web 应用程序能够执行诸如同步读取文件、创建任意 Blob、将文件写入临时位置、递归读取文件目录、执行文件从桌面拖放到浏览器以及上传等操作的能力使用 XMLHttpRequest2 的二进制数据。

如果您希望允许用户从文件夹中选择一个文件并上传它：

> 自从 Microsoft ASP.NET 在 1.0 版中引入以来，就有了构建能够将文件上传到托管服务器的 Web 应用程序的内置方法。这是通过使用 File Field HTML 服务器控件完成的。

[http://msdn.microsoft.com/en-us/library/aa479405.aspx](http://msdn.microsoft.com/en-us/library/aa479405.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:16:34.527

通常，这不会起作用，因为大多数浏览器拒绝打开锚点 ( `<a>`)，`href="file://..."`这是您可以打开用户本地硬盘驱动器并将其指向`D:\ArtWork`目录的唯一方法。

[这是一个类似的问题](https://stackoverflow.com/questions/5317834/workaround-for-href-file-in-firefox)。

# c# - Windows 8 - 在被拒绝后请求相机权限

> ID：15768879
> 
> 赞同：5
> 
> 时间：2013-04-02T16:07:03.483
> 
> 标签：c#, windows-8, microsoft-metro

我正在编写一个需要使用相机的应用程序。第一次执行此操作时，它会询问用户使用相机的权限。

如果他们单击“阻止”，是否仍然通过应用程序重新请求该权限？还是他们必须卸载并重新安装应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T16:15:49.927

根据[指南](http://msdn.microsoft.com/en-gb/library/windows/apps/hh768223.aspx#what_if_access_to_a_device_is_turned_off_)，您的应用程序应该告诉他们如何重新打开该功能，而不是强制显示权限窗口。

> 您的应用应告知用户该功能已关闭，并且他们可以使用应用的设置启用该功能。
> 
> “您当前已关闭。要更改您的设置，请打开设置超级按钮并点击权限。然后再次开始使用。”

并从附加指南列表中：

> 不要以编程方式尝试在“设置”超级按钮中启动“权限”页面

因此，只需显示一条消息，说明如果他们想使用该功能，如何重新启用权限。用户无需卸载并重新安装应用程序即可更改其权限。

# c++ - 比较字符串时 QtTest 失败，即使它们相同？C++

> ID：15768885
> 
> 赞同：1
> 
> 时间：2013-04-02T16:07:24.750
> 
> 标签：c++, qt, qttest

我有一个比较两个字符串值的 QtTest：

```
 // This definitely returns "5/6" 
 std::string actual_value = simple(actual);

 // Sets a string to the expected value
 std::string expected_value = "5/6"; 
```

然后是 QCOMPARE：

```
QCOMPARE(QString(actual_value.c_str()), QString(expected_value.c_str()));

/* I'm Aware this could just be the code below (but this doesnt print values to
console so i can check they are actually the same)  */
QCOMPARE(actual_value, expected_value) 
```

我得到了错误：（我把两者都发布了，所以很明显它不仅仅是 QString 失败了，所以下面是使用 QString 来显示值的 QCOMPARE）

```
FAIL!  : TestFraction::testFraction() Compared values are not the same
Actual   (QString(actual_value.c_str())): 5/6

Expected (QString(expected_value.c_str())): 5/6 
```

这是正常的 QCOMPARE 错误消息：

```
FAIL!  : TestFraction::testFraction() Compared values are not the same 
```

这背后显然有其他代码，但我现在没有发布它，因为我认为它不是特别相关，但询问是否有你想知道的东西，据我所知，这个测试应该通过，但也许有一些我不知道比较字符串的东西（除非您使用模糊比较，否则比较双打如何失败）

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:13:37.333

您的实际字符串有一个换行符。因此比较失败。

# php - 一列多参数值--一次查询

> ID：15768887
> 
> 赞同：1
> 
> 时间：2013-04-02T16:07:29.923
> 
> 标签：php, mysql

我有一张属于不同的对应鞋类类别的鞋类样式表。我要做的是列出不同（单独）类别下的样式。

可用于凉鞋的款式有： 人字拖幻灯片

可用于鞋子的款式有： 运动系带乐福鞋 莫卡辛

正如您在下面看到的，现在，我只是用不同的 TYPEID 重申我的查询。

是否有一种更高效的代码方式只需一个查询就可以做到这一点？

正如我的问题标题所述：我可以在一列值中执行多个参数 - 一个查询吗？

在此先感谢，珍

```
+--------+---------+
| typeid | type    |
+--------+---------+
|      1 | Shoes   |
|      2 | Boots   |
|      3 | Sandals |
+--------+---------+

+---------+--------+------------+
| styleid | typeid | style      |
+---------+--------+------------+
|       1 |      1 | Athletic   |
|       2 |      1 | Lace-up    |
|       3 |      1 | Loafers    |
|       4 |      1 | Moccasins  |
|       5 |      2 | Combat     |
|       6 |      2 | Hiking     |
|       7 |      2 | Riding     |
|       8 |      3 | Flip Flops |
|       9 |      3 | Slide      |
+---------+--------+------------+ 
```

Styles_in_Cat.php

```
echo " Styles available for SANDALS are: <br/>";

$query="SELECT DISTINCT style, style.typeid, type 
FROM style, type
WHERE style.typeid=3
AND style.typeid=type.typeid";
if ($result = mysqli_query($con,$query))
 {
    while ($row = mysqli_fetch_assoc($result))    
      {        
          $style = $row['style'];
          $typeid = $row['typeid'];
          $type = $row['type'];

          echo " $style <br/>" ;
      }
 }

echo " Styles available for SHOES are: <br/>";

$query="SELECT DISTINCT style, style.typeid, type
FROM style, type
WHERE style.typeid=1
AND style.typeid=type.typeid";
if ($result = mysqli_query($con,$query))
 {
    while ($row = mysqli_fetch_assoc($result))    
      {        
          $style = $row['style'];
          $typeid = $row['typeid'];
          $type = $row['type'];

          echo " $style <br/>" ;
      }
 } 
```

更新：我想我快到了。我把它们放在一个 foreach 循环中并得到：

靴子 - 战斗靴 - 远足靴 - 骑行凉鞋 - 人字拖凉鞋 - 拖鞋 - 运动鞋 - 系带鞋 - 乐福鞋 - 莫卡辛

现在只需要尝试将它们分开并显示在不同的标题下，例如“可用于 SHOES 的样式是：”

更新 2：

在过去的 4 个小时里，我一直在尝试将结果放入数组中，但到目前为止还没有成功:(。

我得到了这个结果（如 xpy 所建议的那样）：

```
SELECT DISTINCT type, style.typeid, style FROM style, type
WHERE style.typeid IN ( 1,3)
AND style.typeid=type.typeid
+---------+--------+------------+
| type    | typeid | style      |
+---------+--------+------------+
| Shoes   |      1 | Athletic   |
| Shoes   |      1 | Lace-up    |
| Shoes   |      1 | Loafers    |
| Shoes   |      1 | Moccasins  |
| Sandals |      3 | Flip Flops |
| Sandals |      3 | Slide      |
+---------+--------+------------+ 
```

但我想做的是控制出现哪种类型（即使 WHERE CLAUSE 声明 1、3、5（typeid）——也许我只想显示 1 和 3）。

我已经阅读了一些主题，但它们的结果与我相同。

stackoverflow.com/questions/3936073/mysql-php-selecting-only-unique-values-from-multiple-columns-and-put-them-into-s?rq=1

stackoverflow.com/questions/5345011/fetch-all-ids-and-put-them-into-an-array-in-php

我希望我问的问题是正确的。我知道我可能听起来很迷茫，因为我是。

基本上我试图理解 xpy 所说的：“你可以将它们分开，你可以通过它们的 typeid 来识别它们。” “您必须将结果放入单独的数组中，每种类型都有一个，或者放入一个多维数组中，每种类型都有一个索引，当然您必须检查结果，然后将其放入特定的数组中。”

所以我的浏览器视图看起来像：

我们提供的鞋子款式：运动系带乐福鞋

我们提供的靴子款式：战斗远足骑行

我可以坚持我最初的（第一个问题），但作为一个编程新手，我真的很想学习。

再次感谢。仁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:51:26.257

你必须使用 GROUP BY

就像是

```
SELECT style.style, type FROM style, type where type.typeid=style.typeid
GROUP BY type, style 
```

你应该有一个类似的结果集

```
Shoes   Athletic
Shoes   Lace-up
Shoes   Loafers
Shoes   Moccasins
Boots   Combat 
```

..

只需循环'直到类型更改以读取所有不同的样式。这样，您可以通过一个查询读取所有样式和类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:25:36.733

你可以试试：

```
SELECT DISTINCT style, style.typeid, type 
FROM style, type
WHERE style.typeid IN (1,3)
AND style.typeid=type.typeid 
```

这将为您提供两者的所有行`shoes`，`sandals` **但是**由于`DISTINCT`您将无法确定一种样式是否是它们两者的共同样式（如果它曾经是一种）。

# java - 实例化特定类时正确处理强制转换

> ID：15768888
> 
> 赞同：0
> 
> 时间：2013-04-02T16:07:31.520
> 
> 标签：java, generics

我有一个看起来（原则上）像这样的函数

```
public <T extends Listener> T createListener(Class<T> clazz) {
  if (clazz == SpecificListener.class) {
    return (T) new SpecificListener();
  }
  // more instantiations here
} 
```

特定侦听器是接口侦听器的实现。此代码有效，但 return 语句会未经检查地转换为 T。

有没有更好的方法来编写这个而不进行未经检查的转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:08:57.770

检查的转换将是`clazz.cast(new SpecificListener())`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:09:51.710

是的，您可以使用[Class#cast(Object obj)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)方法。

```
public <T extends Listener> T createListener(Class<T> clazz) {
  if (clazz == SpecificListener.class) {
    return clazz.cast(new SpecificListener());
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:13:20.570

如果您可以实例化的所有侦听器都提供了一个空构造函数，您可以*简单地*尝试：

```
public <T extends Listener> T createListener(Class<T> clazz)
throws InstantiationException, IllegalAccessException {
    return clazz.newInstance();
} 
```

# ios - 如何在导航栏标题中显示行数？(iOS)

> ID：15768889
> 
> 赞同：-4
> 
> 时间：2013-04-02T16:07:40.307
> 
> 标签：ios, uitableview, uinavigationbar

我试图找到答案，但我没有找到任何答案。请帮助我在 uinavigationbar 的标题中显示行数，就像在注释中一样

![在此处输入图像描述](https://i.stack.imgur.com/9eE9G.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:13:53.263

就像将标题设置为类似的东西一样简单

```
self.title = [NSString stringWithFormat:@"Notes (%i)", self.notes.count]; 
```

假设这`notes`是您存储`Note`元素的数组。

# java - java多线程web服务中的同步和维护操作顺序

> ID：15768892
> 
> 赞同：0
> 
> 时间：2013-04-02T16:07:42.337
> 
> 标签：java, mysql, multithreading, web-services, synchronization

我的 java web 服务提供了许多方法，每个方法在调用时都会启动一个不同的线程（操作包括 mysql 数据库调用）。我想确保操作按照它们被调用的顺序执行，所以没有线程会抢在另一个之前完成，有效地同步访问 Web 服务。

实现这一点的最佳方法是什么？有没有更聪明的方法来做到这一点？我可以使用任何工具/预制解决方案/库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:21:57.300

我们已经使用 SingleThreadExecutor 实现了这个东西。您可以将所有请求提交给 SingleThreadExecutor，它会以正确的顺序依次执行它们。

因此，您的每个方法都应该生成一个可以使用 SingleThreadExecutor 执行的新线程。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:17:38.670

如果您确实需要按调用的确切顺序执行服务，一次一个，那么实现此目的的最简单方法是使用队列。每个 Web 服务在队列上排队一个“命令模式”对象，队列由读取命令并执行它们的单个线程处理，然后将结果返回给最初排队请求的等待线程。

在此之前，我会重新检查您的设计，因为此要求将阻止您的应用程序扩展到大量请求。

# github - 无法将成员添加到 GitHub

> ID：15768895
> 
> 赞同：-1
> 
> 时间：2013-04-02T16:07:48.817
> 
> 标签：github

我正在尝试向 GitHub 中的现有团队添加新成员。我要添加的新员工昨天创建了他的 GitHub 帐户。当我输入他的 GitHub 帐户 ID 以将他添加为成员时，他的 GitHub ID 不会填充在预读列表中。

我创建了一个新的测试帐户，我立即能够在成员列表中看到该帐户。

测试账户和新员工创建的账户没有区别。

谁能告诉我是什么原因导致这个新成员没有出现在 GitHub 的前瞻列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:11:38.323

这件事上周发生在我们身上。用户需要首先验证他们的 GitHub 帐户电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T18:50:18.437

要求用户登录 github 并保持会话处于活动状态，然后尝试将用户添加到团队中。这对我有用。

# java - 出现错误，但我不确定它们的含义

> ID：15768896
> 
> 赞同：0
> 
> 时间：2013-04-02T16:07:53.357
> 
> 标签：java, compiler-errors

我正在尝试编译一个程序，但我不断收到一些以前从未见过的错误。这是我的程序：

```
import java.util.Scanner;
import java.io.FileReader; 
import java.io.*;

public class Project1
{
  public static void main (String [] args) throws FileNotFoundException
  {
    Scanner inFile = new Scanner(new FileReader("artists.txt") ); //read from file
    Scanner console new Scanner(System.in); //read from user input 

int sum = 0; //sum of revenue
String artist; //user input
int revenue = 0; //store yearly revenue

System.out.println("Please enter the name of a band/artist: ");
artist = console.next();   

String[] tokens = artist.split(" "); 

while(inFile.hasNext() )
{
  if (tokens == inFile.hasNext() )
  {  
    if (inFile.Next == (2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012) );
    {
      if (inFile.hasNext() )
      {
        revenue = inFile.nextInt();
        sum += revenue;
        System.out.print("sum");
      }
    }
  }
}

inFile.close(); 
```

我得到的错误如下：

```
Error: Syntax error, insert ";" to complete LocalVariableDeclarationStatement [Line 13]
Error: Syntax error on token "==", Name expected after this token [Line 30] 
```

如果有人碰巧看到任何其他错误，请随时指出。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:10:31.173

你在这里错过了一个任务：

```
Scanner console new Scanner(System.in); 
```

和这个：

```
if (inFile.Next == (2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012) ); 
```

（撇开结尾的分号）

不是我在 Java 中能认出的任何东西。我会将其分解为更小的单元，并尝试让小组件一次运行一个，否则很容易将自己与大量编译器错误混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:10:23.050

您缺少一个赋值运算符`=`：

```
Scanner console = new Scanner(System.in); 
```

您将无法执行此操作：

```
if (inFile.Next == (2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012) ); 
```

我猜你想要：

```
if (revenue == 2005 || revenue == 2006 || ...)) {
   sum += revenue;
} 
```

或者干脆

```
 if (revenue >= 2005 && revenue <= 2012) { 
```

# c# - 实体框架 - 带有基于 NULLABLE 参数的 WHERE 子句的 LINQ 语句

> ID：15768900
> 
> 赞同：3
> 
> 时间：2013-04-02T16:08:09.053
> 
> 标签：c#, linq, entity-framework

我有一个返回语言列表的方法。它有一个可以为 null 的 languageId 参数。如果通过，则该方法返回该语言，否则返回语言列表。

我想知道我是否可以将这段代码简化为在一个语句中包含一个 select 和 where 子句。

```
public List<Language> GetLanguageList(LanguageMapper ctx, int? languageId)
{

    List<Language> languages = ctx.LANGUAGELIST
                                    .Select(e => new Language()
                                    {
                                        LanguageId = e.LANGUAGEID,
                                        LanguageName = e.LANGUAGE
                                    })
                                    .ToList();                    
    if (languageId.HasValue)
    {
        languages = languages.Where(x => x.LanguageId == languageId).ToList();
    }

    return languages;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:11:04.847

只需在`.Where`之前执行`.Select`，如下所示：

```
public List<Language> GetLanguageList(LanguageMapper ctx, int? languageId)
{
    var query = ctx.LANGUAGELIST.AsQueryable();
    if (languageId.HasValue)
    {
        query = query.Where(x => x.LanguageId == languageId.Value);
    }

    List<Language> languages = query.Select(e => new Language()
                                    {
                                        LanguageId = e.LANGUAGEID,
                                        LanguageName = e.LANGUAGE
                                    })
                                    .ToList();                    
    return languages;
} 
```

通过`IQueryable<Language>`以这种方式使用，您可以确保只对数据库进行一次调用，而不管传递给此方法的参数是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T16:14:13.227

您可以`HasValue`在 where 子句中包含检查：

```
public List<Language> GetLanguageList(LanguageMapper ctx, int? languageId)
{

    List<Language> languages = ctx.LANGUAGELIST
                                    .Where(e => !languageId.HasValue || e.LanguageId == languageId)
                                    .Select(e => new Language()
                                    {
                                        LanguageId = e.LANGUAGEID,
                                        LanguageName = e.LANGUAGE
                                    })
                                    .ToList();                    

    return languages;

} 
```

注意：pswg 的答案将导致`languageId`在这个特定示例中为 null 的实例中更清洁、更高效的 sql，但值得一看的是，此选项可用于更复杂的示例。

# ruby - 我们可以通过在 Ruby 中使用其对应的符号来打印局部变量的值吗？

> ID：15768904
> 
> 赞同：4
> 
> 时间：2013-04-02T16:08:19.630
> 
> 标签：ruby

这只是演示代码：

我在下面说局部变量。现在该`local_variables`方法将列出它们。

```
name = "john"
sex = "M"
age = 20
dob = "12/12/1998"

p local_variables #[:name, :sex, :age, :dob] 
```

我们可以使用这些符号来打印它们被分配的值吗？

举个例子：

```
p name #"john" 
```

但我正在尝试检查是否使用相同的值“john” `:name`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:09:26.790

使用`eval`.

```
eval("name") # "john" 
```

# grails - Netty 异常未正确捕获

> ID：15768908
> 
> 赞同：0
> 
> 时间：2013-04-02T16:08:29.740
> 
> 标签：grails, elasticsearch, netty

大家好，我正在尝试构建一个搜索引擎来搜索 ES 以查找匹配项，该界面有一个动态的点击计数器，每次按键后都会更新，我正在寻找一种方法来验证、解决或捕获异常当用户使用双引号搜索时抛出，例如：

```
a >> 4500 hits
ab >> 1200 hits
ab" >> massive stack trace
ab"c"> 250 hits 
```

堆栈：

```
2013-04-02 16:41:42,703 [New I/O  worker #1] WARN  transport.netty  - [Jekyll] Exception caught on netty layer [[id: 0x0106148c, /xxx.xxx.xxx.xxx:xxxx => /xxx.xxx.xxx.xxx:xxxx]]
java.lang.ArrayIndexOutOfBoundsException: 54
    at org.elasticsearch.common.Unicode.UTF8toUTF16(Unicode.java:190)
    at org.elasticsearch.common.Unicode.unsafeFromBytesAsUtf16(Unicode.java:106)
    at org.elasticsearch.common.Unicode.fromBytes(Unicode.java:80)
    at org.elasticsearch.common.Unicode.fromBytes(Unicode.java:73)
    at org.elasticsearch.action.count.CountRequest.toString(CountRequest.java:334)
    at java.lang.String.valueOf(String.java:2854)
    at java.lang.StringBuilder.append(StringBuilder.java:128)
    at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction.onOperation(TransportBroadcastOperationAction.java:306)
    at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction$3.handleException(TransportBroadcastOperationAction.java:263)
    at org.elasticsearch.transport.netty.MessageChannelHandler.handleException(MessageChannelHandler.java:287)
    at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:278)
    at org.elasticsearch.transport.netty.MessageChannelHandler.process(MessageChannelHandler.java:230)
    at org.elasticsearch.transport.netty.MessageChannelHandler.callDecode(MessageChannelHandler.java:141)
    at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:93)
    at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
    at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
    at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
2013-04-02 16:41:42,705 [New I/O  worker #2] WARN  transport.netty  - [Jekyll] Exception caught on netty layer [[id: 0x02474fc7, /xxx.xxx.xxx.xxx:xxxx => /xxx.xxx.xxx.xxx:xxxx]] ... etc 
```

有什么建议么？请询问您是否需要任何其他信息。

未能捕获异常的 Try/Catch 块：

```
def query_str = buildQuery(params)
log.debug("count query: ${query_str}");
log.debug("enter try:");
try{      
  def search = esclient.count {
    indices "something"
    types "somethingelse"
    query {
      query_string (query: query_str)
    }
  }
}
catch ( Exception e ) {
  log.error("The Query is invalid!");
  result.hits = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:52:37.457

这看起来像是在 v0.19.9 中修复的错误。从 v0.19.9 开始，elasticsearch 应该返回更合理的错误消息。

# postgresql - 通过另一台服务器中继 PostgreSQL 连接

> ID：15768913
> 
> 赞同：20
> 
> 时间：2013-04-02T16:08:36.917
> 
> 标签：postgresql, proxy

我在远程服务器上使用 PostgreSQL 数据库，防火墙非常严格，只允许来自我们的网络服务器的连接。这使得在我自己的工作站上开发东西变得非常困难，因为我无法直接连接到该服务器来测试我的代码。

我想做的是在我们的网络服务器上设置某种代理，它只是将所有查询发送到防火墙服务器。然后我可以从我的工作站使用我们的服务器来测试我的代码。任何想法如何做到这一点或解决我的问题的其他方法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-02T16:16:40.680

使用 ssh 并创建一个本地隧道，类似这样（仅当您在 Web 服务器上运行 ssh 守护程序时才有效）

```
ssh user@webserver.com -CNL localhost:5432:192.168.1.128:5432 
```

以上将监听 localhost 上的 5432（postgres 端口），并通过 Web 服务器将所有流量转发到远程机器。

正如 Ricky Han 在下面提到的，您需要将地址**192.168.1.128**更改为您的 PostgreSQL 服务器的地址。

显然，您还需要更改 webserver.com 的名称！:-)

# ssh - 通过 SCP 将文件下载到本地计算机，同时 ssh 连接到远程计算机

> ID：15768917
> 
> 赞同：28
> 
> 时间：2013-04-02T16:08:39.180
> 
> 标签：ssh, terminal

在通过 SSH 连接时尝试从远程计算机下载文件时，我不断收到错误消息。

我正在使用 Mac 并通过终端连接。

我输入以下内容：

```
scp username@host : /path/to/hosts/file/host_file.txt ~/desktop 
```

然后我输入我的密码并收到以下错误：

```
scp: .: not a regular file
cp: cannot create regular file '/host_file.txt': permission denied
/directory/user/desktop: no such file or directory 
```

有什么帮助吗？

它似乎正在尝试将其保存到远程系统上的目录中，但我不确定。

**更新：

我删除了 : 两侧的空间，现在似乎可以下载，但我的桌面上看不到任何内容。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-02T16:10:34.527

代替

```
scp username@host : /path/to/hosts/file/host_file.txt ~/desktop 
```

删除`:`.

```
scp username@host:/path/to/hosts/file/host_file.txt ~/desktop 
```

* * *

**编辑：**

> 在通过 SSH 连接时尝试从远程计算机下载文件时，我不断收到错误消息。

**当您已经 sshed 到服务器时，您不应该运行 scp 命令**--- 这只是将文件从服务器下载......到服务器。

您应该直接从您的 mac 运行 scp 命令。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-02T16:10:36.983

去掉两边的空格`:`

```
scp username@host:/path/to/hosts/file/host_file.txt ~/desktop 
```

（要 100% 清楚，我的意思是删除冒号字符两侧的空格）

# ms-word - VSTO 2010 - Word - 动态加载 dotx 插件而不锁定

> ID：15768925
> 
> 赞同：0
> 
> 时间：2013-04-02T16:09:00.610
> 
> 标签：ms-word, vsto

我正在编写 Word 2010 VSTO 应用程序加载项。我们正在动态加载一个 dotx 模板文件，如下所示：

`word.AddIns.Add("C:\myTemplate.dotx", true);`

以上对一个用户来说工作正常，但是当另一个用户调用代码时，我们会得到一个“正在使用的文件”Word对话框，提示用户如何打开文档。

我们如何以只读方式打开 dotx 文件以避免出现此对话框？

对于背景信息，我们正在使用来自 dotx 的 BuildingBlocks。

谢谢思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:04:17.233

我们可以通过简单地执行以下操作将模板设为只读并读取构建块：

```
Document document = word.Documents.Open("C:\myTemplate.dotx", false, true);
Template template = document.get_AttachedTemplate();

var blockCount = template.BuildingBlockEntries.Count;
var firstBlock = template.BuildingBlockEntries.Item(1); 
```

# java - 使用 Log4j 捕获异常

> ID：15768933
> 
> 赞同：1
> 
> 时间：2013-04-02T16:09:26.940
> 
> 标签：java, eclipse, google-app-engine, exception, dashboard

异常的 log4j.category.DataNucleus 是什么？因此，我试图将 Log4j 与 Google App Engine 一起使用，但是在测试期间，Lo4j 没有拾取异常（它们被仪表板拾取）。

我也希望所有的错误都被拾起。所以我把它添加到主类中。这会发现所有错误，包括命运吗？

```
 logger.fatal ("App Error"); 
```

好的，所以我尝试了这个：

```
 }
     catch(Exception e) {
            logger.warn("Log4j has caught n exception!", e);
            e.printStackTrace();
        } 
```

然而，异常显示在仪表板中，但不是 log4j 正在接收它，因为它没有给我“Log4j 已捕获 n 异常！”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:45:19.560

**异常的 log4j.category.DataNucleus 是什么？**

```
log4j.logger.DataNucleus 
```

**一般的**

我不使用 Eclise 也不使用 Log4J（当然，DataNucleus 使用它除外）。我的日志配置文件中有以下内容。

**log4j.properties**

```
log4j.appender.A1 = org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout = org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern = %d{HH:mm:ss,SSS} (%t) %-5p [%c] - %m%n

[...]

# Tighten logging on the DataNucleus categories to WARN.
# This DataNucleus logging configuration appears redundant; in production,
# DataNucleus uses Java logging instead.
log4j.logger.DataNucleus                 = WARN, A1
log4j.logger.DataNucleus.JDO             = WARN, A1
log4j.logger.DataNucleus.Persistence     = WARN, A1
log4j.logger.DataNucleus.Query           = WARN, A1
log4j.logger.DataNucleus.Lifecycle       = WARN, A1
log4j.logger.DataNucleus.Cache           = WARN, A1
log4j.logger.DataNucleus.MetaData        = WARN, A1
log4j.logger.DataNucleus.Management      = WARN, A1
log4j.logger.DataNucleus.General         = WARN, A1
log4j.logger.DataNucleus.Connection      = WARN, A1
log4j.logger.DataNucleus.Transaction     = WARN, A1
log4j.logger.DataNucleus.Datastore       = WARN, A1
log4j.logger.DataNucleus.ClassLoading    = WARN, A1
log4j.logger.DataNucleus.Plugin          = WARN, A1
log4j.logger.DataNucleus.ValueGeneration = WARN, A1
log4j.logger.DataNucleus.Enhancer        = WARN, A1
log4j.logger.DataNucleus.SchemaTool      = WARN, A1 
```

**日志记录属性**

```
handlers = java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = ALL
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

[...]

# Set the default logging level for ORM, specifically, to WARNING
DataNucleus.level                 = WARNING
DataNucleus.JDO.level             = WARNING
DataNucleus.Persistence.level     = WARNING
DataNucleus.Query.level           = WARNING
DataNucleus.Lifecycle.level       = WARNING
DataNucleus.Cache.level           = WARNING
DataNucleus.MetaData.level        = WARNING
DataNucleus.Management.level      = WARNING
DataNucleus.General.level         = WARNING
DataNucleus.Connection.level      = WARNING
DataNucleus.Transaction.level     = WARNING
DataNucleus.Datastore.level       = WARNING
DataNucleus.ClassLoading.level    = WARNING
DataNucleus.Plugin.level          = WARNING
DataNucleus.ValueGeneration.level = WARNING
DataNucleus.Enhancer.level        = WARNING
DataNucleus.SchemaTool.level      = WARNING 
```

**logger.fatal（“应用程序错误”）；**

我从未编写过 Log4J。这个命令是否不只是记录`"App Error"`致命级别的文本条目？

享受？

# android - 如何为自定义 listView 项的单独部分设置 onClickListener？[安卓]

> ID：15768939
> 
> 赞同：5
> 
> 时间：2013-04-02T16:09:45.607
> 
> 标签：android, listview, onclicklistener

我已经为我的 android 应用程序制作了一个自定义 listView，但我在为项目的不同部分创建单独的 onClickListeners 时遇到问题。我的项目有图片和文字。我想要的是根据点击了哪些活动来开始不同的活动。

该 onClick() 方法应该启动一个活动，这使得无法在我的 DataBinder 类的 getView() 方法中定义。（DataBinder 使用自定义布局填充我的 listView）

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T16:18:06.563

在您的自定义`ListAdapter's` `getView`方法中，您应该添加`onClickListeners`到要对点击采取行动的不同子视图。

关于如何实现该`getView`方法的示例：

```
class CustomListAdapter extends ArrayAdapter<String> implements OnClickListener {

    public CustomListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;

        TextView tv = (TextView) v.findViewById(R.id.textView1);
        tv.setOnClickListener(this);

        ImageView iv = (ImageView) v.findViewById(R.id.imageView1);
        iv.setOnClickListener(this);

        return super.getView(position, convertView, parent);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.textView1:
            // Do stuff accordingly...
            break;
        case R.id.imageView1:
            // Do stuff when imageView1 is clicked...
        default:
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:16:42.757

在列表项中为 the和 the定义单独`onClick()`的方法并非不可能。这正是您必须做的，而不是为您的.`ImageView``TextView``onClick()``ListView`

`onClick()`在您的适配器中`getView()`为每个项目实现方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:18:32.457

一种选择是为单独的元素包含一个 onClick 方法。假设您已经在 XML 中构建了自定义行，很容易在 onClick 字段中添加一个方法，将该元素（例如图像）设置为允许点击（如果还没有的话）并在您的类中定义该方法. 然后，如果该*行*被点击，listview 点击处理程序触发，但如果元素被点击（图像），那么它自己的 onClick 方法被触发。

# php - 如何将数组从php中的多维关联转换为一维？

> ID：15768940
> 
> 赞同：0
> 
> 时间：2013-04-02T16:09:45.753
> 
> 标签：php, multidimensional-array

我有以下数组：

```
Array
(
    [14] => Array
        (
            [nid] => 30698
            [changed] => 15
        )

    [13] => Array
        (
            [nid] => 30697
            [changed] => 14
        )

    [12] => Array
        (
            [nid] => 30601
            [changed] => 13
        )

    [11] => Array
        (
            [nid] => 30807
            [changed] => 12
        )

    [10] => Array
        (
            [nid] => 30806
            [changed] => 11
        )

    [9] => Array
        (
            [nid] => 30808
            [changed] => 10
        )

    [8] => Array
        (
            [nid] => 30826
            [changed] => 9
        )

    [7] => Array
        (
            [nid] => 30828
            [changed] => 8
        )

    [6] => Array
        (
            [nid] => 30839
            [changed] => 7
        )

    [5] => Array
        (
            [nid] => 30838
            [changed] => 6
        )

    [4] => Array
        (
            [nid] => 30837
            [changed] => 5
        )

    [3] => Array
        (
            [nid] => 30831
            [changed] => 4
        )

    [2] => Array
        (
            [nid] => 30830
            [changed] => 3
        )

    [1] => Array
        (
            [nid] => 30827
            [changed] => 2
        )

    [0] => Array
        (
            [nid] => 30832
            [changed] => 1
        )

) 
```

我想像这样隐藏它：

大批

```
(
    [14] => [changed] => 15

    [13] => [changed] => 14

    [12] => [changed] => 13

    [11] => [changed] => 12

    [10] => [changed] => 11

    [9] => [changed] => 10

    [8] => [changed] => 9

    [7] => [changed] => 8

    [6] => [changed] => 7

    [5] => [changed] => 6

    [4] => [changed] => 5

    [3] => [changed] => 4

    [2] => [changed] => 3

    [1] => [changed] => 2

    [0] => [changed] => 1

) 
```

我能为此做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:14:04.983

您可以简单地通过一个`array_map()`函数运行它以去除该`nid`值。

```
$result_array = array_map(function ($item) {
    unset $item['nid'];
    return $item;
}, $input_array); 
```

# ruby-on-rails - 捆绑安装后未加载 twitter gem

> ID：15768945
> 
> 赞同：0
> 
> 时间：2013-04-02T16:09:53.420
> 
> 标签：ruby-on-rails, ruby, rubygems, twitter-gem

我是 Rails 新手，我正在尝试使用 twitter gem 制作应用程序。

这是我的gemfile： `gem "twitter", "~> 4.6.2" gem "faraday", "~> 0.8" gem "multi_json", "~> 1" gem "simple_oauth", "~> 0.2.0"`
我已经安装了bundle，但是在尝试启动它时仍然出现错误，无法加载此类文件--twitter app/controllers/start_controller.rb:2:in `' 加载以下内容时发生此错误文件：推特

该错误无法帮助我找到缺少的内容。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:22:25.907

我会尝试重新启动服务器。安装gem后必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:28:24.427

正确检查您的 gemfile。可能存在某种语法错误。

# highcharts - Highcharts 可以对工具提示框中的图例列表进行排序吗？

> ID：15768946
> 
> 赞同：0
> 
> 时间：2013-04-02T16:09:56.090
> 
> 标签：highcharts

我正在使用 Highcharts 来显示统计数据。

如下图所示，是否可以重新排序图例列表？

![在此处输入图像描述](https://i.stack.imgur.com/tR8Xw.png)

我试图对图表本身进行排序，但由于它的数据结构，它看起来非常棘手。

换句话说，这种方法是按顺序显示数据的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:53:58.037

这是一个很好的例子，它根据 y 值对工具提示进行排序：[want to sort highcharts tooltip results](https://stackoverflow.com/questions/6867607/want-to-sort-highcharts-tooltip-results)

如果您想按国家/地区名称对它们进行排序，您可以为每个系列指定一个名称或 ID，然后根据工具提示格式化程序中的给定名称或 ID 对图表进行排序

您可以在添加系列时提供 id、名称，例如：

```
 chart.addSeries({
                name: your name,
                data: your data,
                id: your id,
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:06:14.083

工具提示中的系列列表与系列顺序相同。如果您想准备自己的工具提示内容，可以使用格式化程序： http: [//api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

# visual-studio-2010 - 如何识别损坏的 Visual Studio 2010 .sln 文件中的特定错误

> ID：15768949
> 
> 赞同：1
> 
> 时间：2013-04-02T16:10:00.650
> 
> 标签：visual-studio-2010, corrupt

我一直在为一个复杂的解决方案编辑我的 VS 解决方案文件，在解决方案文件夹的级别中有许多项目。我一直在更改项目的目录结构并手动更新解决方案文件。我在某个地方犯了一个错误，现在当我尝试在 Visual Studio 中加载它时，我收到一条错误消息：

> 所选文件是解决方案文件，但似乎已损坏且无法打开

其次是另一个：

> 该系统找不到指定的文件

有什么方法可以找出特别是哪个文件导致了问题？我确信我可以手动修复错误 - 毕竟它是基于文本的文件格式 - 只要我知道从哪里开始查找。

# cuda - 如何指定向量的范围？

> ID：15768951
> 
> 赞同：-3
> 
> 时间：2013-04-02T16:10:05.647
> 
> 标签：cuda

我创建了两个这样的向量

```
thrust::host_vector<int> A(count);
thrust::generate(A.begin(),A.end(),rand);

thrust::host_vector<int> B(count);
thrust::generate(B.begin(),B.end(),rand); 
```

count 指定向量的大小是吗？我想用 0 100 个随机数填充这个向量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:54:55.093

构造函数中的 count 参数`host_vector`是向量的大小。请参阅[`host_vector`](http://docs.thrust.googlecode.com/hg/classthrust_1_1host__vector.html)文档。

根据[`generate`](http://docs.thrust.googlecode.com/hg/group__transformations.html#gaa6d990b511b9a2d92599d35bd58e7e9f)推力文件

> `generate`将调用的结果（`gen`一个不带参数的函数对象）分配给范围 [first,last) 中的每个元素。

因此，创建没有参数的随机函数

```
int rand_from_0_to_100_gen(void)
{
     return rand() % 100;
} 
```

并在`thrust::generate`函数中使用

```
thrust::generate(A.begin(),A.end(),rand_from_0_to_100_gen); 
```

# php - Symfony2 - 将一个表单绑定到多个对象

> ID：15768959
> 
> 赞同：2
> 
> 时间：2013-04-02T16:10:19.687
> 
> 标签：php, symfony

我目前正在创建一个表单，类似于：

```
$myDto = // ... etc - I am not using Doctrine

$form = $this->createForm(new DtoType(), $myDto);
$form->bind($request); 
```

这些值绑定到表单并最终分配给 $myDto。没关系。

我想在我的表单**中为不同的对象**添加几个额外的字段。

我可以创建一个包含它们的“复合”类型 - 我可以称它为`CompositeFormType`包含`DtoType`（原始表单）和`ActionsType`（新字段），有点像这里描述的[http://symfony.com/doc/current/book/ forms.html#embedded-forms](http://symfony.com/doc/current/book/forms.html#embedded-forms)。

如果这是最好的方法，那么一旦我创建了这个`CompositeFormType`，我将如何将值输入/输出表单？我会将什么传递给“createForm”？例如：

```
$myDto =   // ... etc
$actions = // ... etc

$form = $this->createForm(new CompositeFormType(), ???);

                  //                     What here? ^
                  //
                  // I want both 'actions' and 'myDto' to be populated by
                  // the child types? How?

$form->bind($request); 
```

...还是我应该以完全不同的方式来做？提前感谢您的指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:17:14.700

您可以创建一个拥有两个对象作为属性的新类，并将此类的实例传递给此复合表单。

# go - 没有 goroutines 覆盖的 Go lang 全局变量

> ID：15768970
> 
> 赞同：7
> 
> 时间：2013-04-02T16:10:46.987
> 
> 标签：go, concurrency

我正在用 Go 编写一个 CMS，并且有一个会话类型（用户 ID、要呈现的页面内容等）。理想情况下，我希望该类型成为全局变量，因此我不必通过所有嵌套函数传播它，但是拥有这样的全局变量显然意味着每个新会话都会覆盖它的前任，这不必要说，将是史诗般的失败。

一些语言提供了一种在线程内保存全局变量的方法（即，该全局变量的值在该线程内被沙箱化）。虽然我知道 Goroutine 不是线程，但我只是想知道是否有类似的方法可供我使用，或者我是否必须通过各种嵌套例程向下传递会话类型的本地指针。

我猜频道不会这样做？据我所知（如果我在这里错了，请纠正我），但它们基本上只是一种共享全局变量的安全方式？

编辑：我忘记了这个问题！无论如何，任何好奇的人的更新。这个问题是我刚接触 Go 时写的，CMS 基本上是我的第一个项目。我来自熟悉 POSIX 线程的 C 背景，但我很快意识到更好的方法是在模式功能设计中编写代码，会话对象作为函数参数中的指针向下传递。这为我提供了我所追求的上下文相关的本地范围，同时也最大限度地减少了我正在复制的数据量。然而，作为一个有 7 年历史的项目，也是我开始过渡到 Go 的一个项目，可以公平地说，该项目无论如何都可以进行重大重写，因为犯了很多错误。不过，这是另一天的担忧——目前它有效，而且我还有足够多的其他项目在进行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-13T16:03:08.003

你会想要使用类似的东西`Context`：

[http://blog.golang.org/context](http://blog.golang.org/context)

`Context`基本上，该模式是为您想做的每件独特的事情创建一个。（在您的情况下是一个 Web 请求。）用于`context.WithValue`在上下文中嵌入多个变量。然后总是将它作为第一个参数传递给在其他 goroutine 中做进一步工作的其他方法。

`context.Value`从上下文中获取所需的变量是从任何 goroutine中调用的问题。从上面的链接：

> A`Context`对于多个 goroutine 同时使用是安全的。代码可以将单个传递`Context`给任意数量的 goroutine 并取消它`Context`以向所有 goroutine 发出信号。

我有一个实现，我明确地将变量作为方法参数发送，我发现使用上下文嵌入这些变量可以显着清理我的代码。

使用 a`Context`也有帮助，因为它提供了通过使用通道、`select`和称为“完成通道”的概念来结束长时间运行的任务的方法。请参阅这篇文章以获得出色的基本审查和实施：

[http://blog.golang.org/pipelines](http://blog.golang.org/pipelines)

我建议先阅读管道文章，以了解如何管理 goroutine 之间的通信，然后阅读上下文文章，以更好地了解如何升级并开始嵌入变量以进行传递。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:50:07.387

如果您有多个用户，那么您是否不需要每个连接的信息？所以我认为每个连接的用户都有一个结构。在设置工作 goroutine 或通过通道传递指针时，将指针传递给该结构将是惯用的 Go。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:47:24.247

不要使用全局变量。使用 Go goroutine-local 变量。

> [go-routine ID..](https://groups.google.com/d/msg/golang-nuts/lGtALXDJQIE/rOw6fzEmEoMJ)
> 
> 已经有 goroutine-local 变量：它们被称为函数参数、函数返回值和局部变量。
> 
> 拉斯

# javascript - HTML - 更改选择标签上的最大行数

> ID：15768972
> 
> 赞同：27
> 
> 时间：2013-04-02T16:10:52.627
> 
> 标签：javascript, html, select

那么如何更改应显示多个启用的选择标记的行数：

```
<select multiple="multiple">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
</select> 
```

这只会显示前四个选项我如何显示第五个而不必滚动？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-04-02T16:13:03.557

使用`size`属性：

```
<select size="5" multiple name="whatever"> 
```

参考：

*   [`<select>`元素](https://developer.mozilla.org/en-US/docs/HTML/Element/select)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T16:21:10.593

您可以使用 CSS 来指定确切的高度，但由于选择的呈现不同，这可能不会在所有浏览器中呈现完全相同：

```
<select multiple="multiple" style="height: 24pt">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
</select> 
```

小提琴：http: [//jsfiddle.net/24Myw/](http://jsfiddle.net/24Myw/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T16:17:06.510

```
<select size="any number" name="#" id="#">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
</select> 
```

它运作良好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T10:53:39.283

这里有更多使用 JavaScript 的动态解决方案：

```
// put your select into a variable for faster reference.
var mySelect = document.getElementById("my_select");
//decide on the maximum number of options you want displayed and store it in a variable.
//that makes it easier to change if you change your mind on the max or if you want a more dynamic max.
var maxOptions = 5;
// if you have maxOptions or fewer options.
if(mySelect.options.length <= maxOptions){ 
    //set your select size to your option length.
    mySelect.size = mySelect.options.length; 
}else{
    // if you have more than maxOptions options, set your select size to maxOptions.
    mySelect.size = maxOptions;
} 
```

**注意！**请注意，“多个”属性不仅显示多于 1 个选项，它还使您能够选择多个选项！

# css - 在同一个 CSS 文件中使用两个主体

> ID：15768974
> 
> 赞同：2
> 
> 时间：2013-04-02T16:10:59.610
> 
> 标签：css

我有一个像下面这样的CSS，

```
@media screen {
    .page{}
}
@media print {
    .page {}
}

body
{
    background-color:#ffffe0;
    margin-left:20px;
    margin-top:50px;
    margin-bottom:50px;
}

select
{
    font-size     : 24pt; font-family: 'MS UI Gothic' ; 
} 
```

我想使用相同的 CSS，但只需要更改正文中的值。值是

```
body
{
    background-color:#ffffe0;
    margin-left:5px;
    margin-top:0px;
    margin-bottom:0px;
} 
```

我尝试添加这样的新课程。这是正确的吗 ？或者我们如何为不同的类使用两个不同的主体。请任何人告诉我。

我试过这样

```
@media screen {
        .page{}
    }
    @media print {
        .page {}
    }

    body
    {
        background-color:#ffffe0;
        margin-left:20px;
        margin-top:50px;
        margin-bottom:50px;
    }

    select
    {
        font-size     : 24pt; font-family: 'MS UI Gothic' ; 
    }

@media screen2 {
        .page2{}
    }
    @media print2 {
        .page2 {}
    }

    body
    {
        background-color:#ffffe0;
        margin-left:20px;
        margin-top:50px;
        margin-bottom:50px;
    }

    select
    {
        font-size     : 24pt; font-family: 'MS UI Gothic' ; 
    } 
```

但每次它只是服用第一具尸体而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:12:54.477

至于`body`选择器，它们都适用于同一个元素，因此只能使用一个。如果要更改 body 的样式，请更改现有选择器的属性。如果您想根据某种逻辑在两者之间切换，请为`<body>`元素提供一个 ID 或类并将其添加到选择器中，以便您可以选择应用哪一个。

此外，screen2 和 print2 不是有效的媒体选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:46:45.180

好的，这是第一部分。正如@Adrian 所说，一个页面只能有一个正文元素。其次，@media 和@print 分别对应于普通屏幕（例如台式机、笔记本电脑等）和打印（例如，当您单击打印按钮时）。所以，你需要做的很简单。要么将正文标签放在所有其他媒体查询之外。

```
body {
background-color:#ffffe0;
margin-left:20px;
margin-top:50px;
margin-bottom:50px;
}

@media screen {
.page{}

rest of your styles and classes...

}
@media print {
body {
background-color:#ffffe0;
margin-left:5px;
margin-top:0px;
margin-bottom:0px;
}
.page {}

rest of your styles and classes...

}
and so on... 
```

或者

做这个...

```
@media screen {
body {
background-color:#ffffe0;
margin-left:20px;
margin-top:50px;
margin-bottom:50px;
}
.page{}
}
@media print {
body {
background-color:#ffffe0;
margin-left:5px;
margin-top:0px;
margin-bottom:0px;
}
.page {}
} 
```

但是，您应该注意，打印类型 css 仅在您打印出来时可见。它将在主站点显示中不可见。

# security - 每个人的 Java EE 权限约束

> ID：15768978
> 
> 赞同：0
> 
> 时间：2013-04-02T16:11:26.537
> 
> 标签：security, jakarta-ee

我是 Java EE 的新手，我正在尝试弄清楚如何为每个人提供对特定资源的访问。我尝试了以下示例，因为它看起来很简单，但它仍然使我进入我在`web.xml`.

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Everywhere</web-resource-name>
        <description>Allow every one to access everything</description>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

当我换掉`/bogus`不匹配的 url 模式时，登录表单不会加载。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:44:50.823

仅在 Java EE 7 中添加了“*”角色，其语义为“任何角色中的任何用户”（即使是没有角色的用户）。

由于 Java EE 7 尚未正式发布，您运行 Java EE 6 或更低版本的可能性很高。

GlassFish 4（它实现了 Java EE 7）很快就会发布（估计：最多几周，也许更早）。如果您只是为自己学习，您可以选择立即从 GlassFish 4 开始，“*”角色确实应该可以工作。

# magento - Magento 产品导出在 Product.php 行 1766 中创建“未定义偏移”错误

> ID：15768979
> 
> 赞同：3
> 
> 时间：2013-04-02T16:11:26.480
> 
> 标签：magento, magento-1.5

当我尝试将我的产品导出为 CSV 时，我收到 500 内部服务器错误。系统日志告诉我：

> ERR (3)：注意：未定义的偏移量：1766 在 /chroot/home/mydomain.com/html/app/code/core/Mage/ImportExport/Model/Export/Entity/Product.php 行 657

知道可能导致此错误的原因是什么吗？感谢所有建议。我正在运行 Magento 1.5.1

# dynamics-crm-2011 - CRM 2011 案例队列审计历史

> ID：15768980
> 
> 赞同：3
> 
> 时间：2013-04-02T16:11:32.657
> 
> 标签：dynamics-crm-2011

我想审核“案例”队列历史记录。我们可以审计字段历史，但不能审计关系实体。因此，如果案例被分配到队列“Queue1”，几天后，如果案例被分配到另一个队列“Queue2”。那么我们如何跟踪该案例的队列历史，例如它在 Queue1 和 queue2 中停留的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:32:42.563

如果我们为 Queueitem 启用审计，我们可以通过以下方式查看审计历史。

查看案例审核历史记录。

案例 > QueueItemDetails（功能区）> 审核历史记录。

数据库表：审计查询：SELECT * FROM audit WHERE objectid LIKE ''

# jquery - 如何将点击处理程序附加到稍后添加的内容 - J Query

> ID：15768984
> 
> 赞同：0
> 
> 时间：2013-04-02T16:11:51.597
> 
> 标签：jquery, dynamic

我有看起来像的 HTML。

```
<ul>
     <li>
        <a id="MP0003631" class="pheno" href="#">nervous system phenotype</a>
    </li>
<ul> 
```

单击后，JQuery 如下所示：

```
$(".pheno").on("click", function(){
var id = $(this).attr("id");

$.ajax({
    type: "POST",
    url: "treescript.php",
    data: { pheno: id}
    }).done(function( msg ) {
     $('#'+id).after("<br>"+msg+"");
     alert(id);
    });

}); 
```

将创建如下所示的 HTML：

```
<ul>
   <li>
      <a id="MP0003631" class="pheno" href="#">nervous system phenotype</a>
   <ul>
       <li>
            <a id="MP0003632" class="pheno" href="#">abnormal nervous system morphology</a>
       </li>
        <li>
            <a id="MP0003633" class="pheno" href="#">abnormal nervous system physiology</a>
        </li>
   </ul>
   </li>
</ul> 
```

问题是，正在创建的内容没有被 JQuery 识别。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:13:17.213

您可以在委托模式下使用 jQuery 的[on()](http://api.jquery.com/on/)来附加到稍后添加的与您的选择器匹配的任何元素。

```
$("#dataTable tbody").on("click", "tr", function(event){
    alert($(this).text());
}); 
```

以上匹配任何`tr`动态添加的`#dataTable tbody`内容（在执行上述代码时必须存在）。

您也可以使用表格

```
$(document).on("click", "tr", function(event){
    alert($(this).text());
}); 
```

将点击处理程序添加到稍后在文档中的任何位置添加*的任何内容。* `tr`

# java - 使用 Robotium 模拟 Spring Android

> ID：15768986
> 
> 赞同：2
> 
> 时间：2013-04-02T16:12:00.500
> 
> 标签：java, android, spring, spring-mvc, robotium

我正在尝试将 Robotium 与我自己的项目一起使用，但问题是它不断使用 spring 为 android 进行 REST 调用。只有少数是网络独立的。我知道我应该制作模拟对象或模拟服务器，但我不知道如何指定 spring for android 如何模拟这些调用

我应该如何嘲笑他们？

谢谢！

# php - WordPress + jQuery + PHP + MySQL：根据总数减去上传限制

> ID：15768988
> 
> 赞同：1
> 
> 时间：2013-04-02T16:12:09.380
> 
> 标签：php, jquery, mysql, wordpress

我为 WordPress 网站构建了简单的评论媒体系统。我正在限制通过 jQuery 上传的数量，当用户达到限制时，按钮将状态更改为禁用。假设 4 张图像是限制。

我创建了名为`wp_review_media`并使用钩子插入数据的自定义表`id`, `post_id`, `user_id`, `image_name`,`status`

![数据库映像](https://i.stack.imgur.com/v1Jlv.jpg)

目前系统不会检查用户是否已经发布了数量有限的图片，并且每次访问都允许再次添加图片。现在在这里我想限制并计算每次用户单击`add more`按钮时剩余多少上传限制。第一次用户可以使用当前的 jQuery 限制，因为该用户的数据库中没有记录。但是一旦他提交了表单，它就应该检查用户过去上传了多少张图片。

我已经做了所有事情，但坚持使用这个计数系统来检查数据库。这是我写的所有代码。

**上传表格：**

```
<form id="file-upload" action="" method="POST" enctype="multipart/form-data">
    <div id="image-uploader-box" class="group">           
        <div id="forms" class="add-photo-fields">                    
            <input type="button" id="add-photo-button" class="add-photo-button" value="Add Photo"/>
            <input type="submit" value="Upload" />
        </div>
    </div> 
</form> 
```

**WP 本地化脚本：**

```
if(!is_admin()){   
    $photo_num = ($rm_options['max_image_count'] - 1); // Here you fetch the option data.    
    // Enqueue your script
    wp_enqueue_script( 'rm-javascript', RM_URL.'js/rm-scripts.js', array('jquery'), 1, true );   
    // Set the data you want to pass to your script here
    $data = array( 'photo_button_cnt' => $photo_num );    
    // Localize the script, the 'photo_button_cnt' value will now be accessible as a property in the global 'add_photo_button' object.
    wp_localize_script( 'rm-javascript', 'add_photo_button', $data );
} 
```

**jQuery代码：**

```
jQuery(document).ready(function(){

    $cnt = 0;

    jQuery('#add-photo-button').click(function(){    

    if($cnt == add_photo_button.photo_button_cnt ){ 
        jQuery('#add-photo-button').prop('disabled', true);
        jQuery('#add-photo-button').addClass('disabled');
    }
    $cnt++;
        var current_count = jQuery('input[type="file"]').length;
        //var next_count = current_count + 1;

        jQuery('#file-upload').prepend('<p><input type="file" name="photo[]" /></p>');    

    });

}); 
```

**图像计数方法：**

```
public function user_image_count()
{
    global $wpdb, $post, $current_user;
    get_currentuserinfo();
    $image_count = $wpdb->get_var("SELECT COUNT(user_id) AS total_images FROM {$wpdb->prefix}review_media WHERE post_id=$post->ID AND user_id=$current_user->ID GROUP BY post_id");

    return $image_count;        
} 
```

我希望这将是我正在寻找的帮助的足够信息。如果您需要任何进一步的信息，请告诉我。

万亿谢谢:)

# uiviewcontroller - 如何设置 UIBarButtonItem 以触发 ios 中的操作

> ID：15768990
> 
> 赞同：1
> 
> 时间：2013-04-02T16:12:11.377
> 
> 标签：uiviewcontroller, uinavigationcontroller, uibarbuttonitem

我正在努力研究如何让我`UIBarButtonItem`命名的“家”回到我的第一个初始状态`ViewController`。

我已经在我的中实现了我的`viewDidLoad`按钮`ViewControllerSecond`：

```
@property (nonatomic, weak) UIBarButtonItem *homeProperty;

//  Create a home button
UIBarButtonItem *homeButton = [[UIBarButtonItem alloc] initWithTitle:@"Home" style:UIBarButtonItemStylePlain target:self action:@selector(homeProperty)];
[self.navigationItem setLeftBarButtonItem:homeButton animated:NO]; 
```

我需要为此创建一个 IBAction 方法吗？此外，是否`UIBarButtonItem`以正确的方法实施`viewDidLoad`

所以总而言之，我需要能够回到`ViewController`从`ViewControllerSecond`但我不知道如何做到这一点。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:17:00.637

你如何将第二个视图控制器添加到第一个？你打电话`pushViewController`还是`presentModalViewController`？如果您使用的是 UINavigationController，调用`pushViewController`应该会自动在导航栏上为您创建后退按钮。使用 Master-Detail Application 在 XCode 中创建一个新项目，也可以查看 UINavigationController 应该如何工作的示例。

# ubuntu - ZeroMQ Java 示例在 Ubuntu 12 上挂起

> ID：15768991
> 
> 赞同：2
> 
> 时间：2013-04-02T16:12:15.850
> 
> 标签：ubuntu, zeromq, ubuntu-12.10, jzmq

我正在尝试使用 Java 示例在 Ubuntu 上使用 ZeroMQ 进行编程。我已经成功构建了 ZeroMq 核心和 Java 绑定，但是尝试运行简单的示例，它只是无限期地挂起。

这是我到目前为止所做的，顺便说一句，我正在使用`JDK/JRE 1.7`,`ZeroMQ 3.2.2`和`Ubuntu 12.10 64-bit`

**构建 ZeroMQ 核心库**

我从这里下载了核心 ZeroMQ 3.2.2 POSIX tarball ，根据[这里的](http://download.zeromq.org/zeromq-3.2.2.tar.gz)[说明](http://www.zeromq.org/area%3adownload)提取和构建。配置、制作和安装一切顺利，没有错误，我还运行`ldconfig`以下`make`更新系统库缓存。快速浏览一下，`/usr/local/lib`核心库似乎已经正确构建......

```
usr1@ubuntu:/usr/local/lib$ ls -ltr *.so
lrwxrwxrwx 1 root dev 15 Apr  1 19:31 libzmq.so -> libzmq.so.3.0.0
lrwxrwxrwx 1 root dev 16 Apr  1 20:14 libjzmq.so -> libjzmq.so.0.0.0 
```

**构建 JZMQ Java 绑定**

[从这里](http://github.com/zeromq/jzmq)下载 Java 绑定源，配置，运行 make；一切看起来都不错。这会创建`zmq.jar`和`zmq-perf.jar`; 再次运行`ldconfig`以更新库缓存；将罐子移到`/usr/local/share/java`...

```
usr1@ubuntu:/usr/local/share/java$ ls -ltr
-rw-r--r-- 1 usr1 usr1 40507 Apr  1 20:14 zmq.jar
-rw-rw-r-- 1 usr1 usr1  4809 Apr  2 08:41 zmq-perf.jar 
```

**运行示例`local_lat`**

我为我的环境使用以下设置运行了[此处](http://www.zeromq.org/bindings%3ajava)`local_lat`详述的示例...

```
java -Djava.library.path=/usr/local/lib -classpath /usr/local/share/java/zmq-perf.jar:/usr/local/share/java/zmq.jar local_lat tcp://127.0.0.1:5555 1 100 
```

得到`UnsatisfiedLinkError`；只需登录和退出即可解决此问题。再次运行，它只是挂起，没有错误，nata，zilch。我从上面删除了参数`100`并从中获取了使用消息`local_lat`，所以我知道它正在查找 zmq jar 文件，因为`local_lat`类驻留在`zmq-perf.jar`. 使用上述命令再次运行，它只是挂起；没有错误，什么都没有。有点失望，因为要完成所有的工作需要做很多工作。

**更新**

见下文，原来这是我测试方式的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:18:42.537

好的，事实证明我所做的一切都是正确的。核心库和Java绑定已成功构建和安装，问题是示例......

```
java -Djava.library.path=/usr/local/lib -classpath /usr/local/share/java/zmq-perf.jar:/usr/local/share/java/zmq.jar local_lat tcp://127.0.0.1:5555 1 100 
```

该`local_lat`程序不是Hello World测试，我以为是，在[jzmq](http://www.zeromq.org/bindings%3ajava)网站上有点误导，上面是命令行示例，不是测试安装的示例，通过查看代码证实了这一点`local_lat`；它什么也不做，当然也不输出任何东西，这就是为什么它似乎只是挂起的原因。

我用这段[代码](http://zguide.zeromq.org/java%3aasyncsrv)测试了ZeroMq ，下载并javac'ed它，使用上面的命令运行它。

# php - 使用 jQuery 的 'load()' 使用内部 PHP 包含函数加载外部 PHP 文件

> ID：15768995
> 
> 赞同：1
> 
> 时间：2013-04-02T16:12:32.317
> 
> 标签：php, jquery, jquery-load

我有一个正在开发的网站，其中包含“新闻”部分和“旧新闻”部分。新闻单独存储在外部[PHP](http://en.wikipedia.org/wiki/PHP)文件中，这些文件由服务器通过 PHP 加载（服务器计算 PHP 文件的数量并显示最后一个 - 当前新闻 - 在“新闻”部分中，所有其他文件在“旧新闻”栏目：

```
<!-- ####### NEWS ####### -->

<div id="news">
    <h2>NEWS</h2>

    <div>
        <a id="showoldnews" href="#news">OLDER</a>
    </div>

    <?php $directory = "assets/news/"; if (glob($directory . "*.php") != false) { $newscount = count(glob($directory . "*.php")); } else {} ?>

    <?php include('assets/news/news' . $newscount . '.php'); ?>

    <!-- ####### OLDER NEWS ####### -->

    <div id="oldnews">
        <h2>OLDER NEWS</h2>

        <?php
            $newscount = $newscount-1;
            while ($newscount>0) {
                include('assets/news/news' . $newscount .'.php');
                --$newscount;
            }
        ?>
    </div> 
```

“旧新闻”部分最初是隐藏的，仅由 jQuery 触发器可见：

```
// Show old NEWS
$('a#showoldnews').click(function () {
    $('#oldnews').show(400);
}); 
```

但我预计长期存在问题：由于首先加载所有新闻，这意味着随着越来越多的新闻出现，网站的加载速度将变慢。即使它是“可接受的”，它仍然不是理想的解决方案。

我正在考虑使用`jQuery.load()`加载外部 PHP 文件，然后仅在用户要求时加载旧新闻。

问题是我不知道是否可以`jQuery.load()`在用户单击链接后使用加载以下脚本：

```
<?php
    $directory = "assets/news/";
    if (glob($directory . "*.php") != false) {
        $newscount = count(glob($directory . "*.php"));
    }
    else {
    }
?>
<?php
    include('assets/news/news' . $newscount . '.php');
?> 
```

这种方法可以接受吗？我试过了，但它根本不起作用（我可以使用该`load()`函数加载静态内容，但我无法让服务器处理PHP脚本。我不知道是否可以让服务器处理PHP 代码，因为 PHP 处理是在网站开始加载之前在服务器端完成的……事实并非如此。

更新#1

我有以下从服务器加载“load.php”文件的内容：

```
<script type="text/javascript">
    $('#oldnews').load('load.php');
</script> 
```

load.php 文件的内容是：

```
<div class="section" id="oldnews">
    <h2>OLDER NEWS</h2>

    <div class="topLink">
        <a href="#">TOP</a>
    </div>

    <div class="topLink2">
        <a id="hideoldnews" href="#news">HIDE</a>
    </div>

    <?php
        $newscount = $newscount-1;
        while ($newscount>0) {
            include('assets/news/news' . $newscount .'.php');
            --$newscount;
        }
    ?>
</div> 
```

“TOP”和“HIDE”链接出现没有任何问题。但是，PHP 块似乎根本没有被处理......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:37:42.680

PHP***可以***在 jQuery 抓取内容之前运行...这是我设置和测试的内容...

### 测试.html

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/JavaScript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    </head>

    <body>
        <div id="feeds"><b>45</b> feeds found.</div>
        <script type="text/JavaScript">
            $("#feeds").load("go.php");
        </script>
    </body>
</html> 
```

### 去.php

```
<?php
    echo 'Hi';
?> 
```

结果是`#feeds` `.innerHTML`“嗨”......我希望在复制情况时获得更多信息/代码。[查看jQuery 加载 API 文档](http://api.jquery.com/load/)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T10:58:47.687

正如@joseph 所说的正确并帮助了我，但在我的情况下，我想隐藏外部 Php 文件的内容，
下面是对我有帮助的代码更改！

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/JavaScript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    </head>

    <body>
    <b>Db file result</b>
        <div id="feeds" hidden=""></div>
        <script type="text/JavaScript">
            $("#feeds").load("db.php");
        </script>
    </body>
</html> 
```

我的 PHP 文件有数据库连接，所以我不得不隐藏它， *db.php*

```
<?php

session_start();

$db = pg_connect("host=ec2-xxx-x0-xxx-xx.compute-1.amazonaws.com port=5432 dbname=dxxxxxxxxx user=vxxxxxxxxxx password=1xxxxxxxxxxxxxxxxxxxxxxxxxxxxd");
 pg_select($db, 'post_log', $_POST);

 $query=pg_query("(SELECT id,name, FROM organization WHERE is_active = 'true' AND account_token = '".$_SESSION['account_token']."');

 $json=array();
while ($student = pg_fetch_array($query)) {
    $json[$student["is_user"]."-".$student["id"]] = $student["name"]."-".$student['pan'];
}

$textval = json_encode($json);
$foo = "var peoplenames=" . $textval;

file_put_contents('autocomplete-Files/'.$_SESSION['account_token'].'.js', $foo);

echo "<script>location='filename.php'</script>";

?> 
```