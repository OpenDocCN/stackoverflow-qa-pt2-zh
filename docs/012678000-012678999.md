# StackOverflow 问答 12678000-12678999

# css - 它不会覆盖类

> ID：12678001
> 
> 赞同：1
> 
> 时间：2012-10-01T17:24:10.420
> 
> 标签：css

如果用户没有正确输入字段，它将显示带有`class="ErrorInput"`和的错误消息`class="TextError"`。

我在`ErrorInput`类中遇到问题，当它已在 html 标记中定义时 - 它不会覆盖默认输入类。

**HTML**：

```
<li>
  <label>First Name</label>
   <input type="text" value="" class="ErrorInput" name="firstname">
   <div class="TextError">Please enter First Name</div>  
</li>
<li>
   <label>Second Name</label>
   <input type="text" value="Gates" name="secondname">
</li> 
```

CSS：

```
.FormStyle .ErrorInput {
    border: #AD2930;
}

.FormStyle input[type=text], .FormStyle textarea {
    padding: 3px;
    display: inline-block;
    width: 290px;
    border: 1px solid #BDC7D8;
    margin: 0;
    font-size: 12px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:32:15.343

您正在`border-colour`为两者中的输入定义`.FormStyle .ErrorInput`和`.FormStyle input[type=text]`

`.FormStyle input[type=text]`比 更具体，`.FormStyle .ErrorInput`应用`#BDC7D8`颜色。

您需要使第一个 CSS 选择器更具体，以覆盖第二种颜色：

```
.FormStyle input[type=text].ErrorInput {
    border-color: #AD2930;
} 
```

在此处了解有关特异性的更多信息：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:32:41.863

您需要正确指定边框：

```
.FormStyle .ErrorInput {
    border: 1px solid #AD2930;
} 
```

而且这个css部分必须放在输入样式**之后**

# javascript - JavaScript 闭包内存效率高吗？

> ID：12678003
> 
> 赞同：4
> 
> 时间：2012-10-01T17:24:26.893
> 
> 标签：javascript, memory, memory-leaks, closures

我想更好地理解 JavaScript 闭包对内存的影响：

```
function fee(arg){

  function figh(){
    //some code
     fum(passOnSomeARG)
  }     

  function fo(y){
    //some calculations with y
  }

  function fum(x){
    //some code
     fo(x)
  }

  figh()
} 
```

在上面的示例中，每次调用“fee()”时，内部函数是否会重新读入内存？如果是这样，这有效吗？如果没有，那么发生了什么？

旁注：fee() 可能会被连续调用很多次（循环或鼠标事件 onmousemove）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:27:32.370

我想是的，是的。这样做会更有效率：

```
(function() {
    var figh = function() {
        // some code
        fum(passOnSomeARG);
    };
    var fo = function(y) {
        // some calculations with y
    };
    var fum = function(x) {
        // some code
        fo(x);
    };
    window.fee = function(arg) {
        figh();
    };
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:05:59.740

考虑这段代码：

```
function foo(){
  function local(){ ... local code ... }     
  local();
} 
```

在引擎盖下 JS VM 将 foo() 的主体翻译成这个序列（伪代码）：

```
var local = new Function({bytecode: local code});
local(); 
```

因此，每次调用 foo 时都会分配一个函数的新实例。通常函数实例是相对较小的对象，无论它的主体有多大。但是仍然 - 分配发生并且堆管理器将忙于收集每次 foo() 调用后留下的垃圾。

# c# - 如何将两个图像叠加在一起

> ID：12678006
> 
> 赞同：0
> 
> 时间：2012-10-01T17:24:33.740
> 
> 标签：c#, winforms, image, bitmap

> **可能重复：**
> [将两张图片合并为一张新图片](https://stackoverflow.com/questions/7206510/combine-two-images-into-one-new-image)

我有创建 2 个图像的 ac# 代码；现在我想通过将第一张图片放在第二张图片上方来加入他们？

这是我到目前为止所做的：

```
 var myBitmap = new Bitmap(longestLine * 40, 40);
        var g = Graphics.FromImage(myBitmap);
        g.Clear(Color.White);
        var strFormat = new StringFormat { Alignment = StringAlignment.Center };
        g.DrawString(FirstLine, new Font("Free 3 of 9", 40), Brushes.Black, new RectangleF(0, 0, longestLine * 40, totalLines * 40), strFormat);

        var myBitmap2 = new Bitmap(longestLine * 40, 40);
        var g2 = Graphics.FromImage(myBitmap2);
        g2.Clear(Color.White);
        var strFormat2 = new StringFormat { Alignment = StringAlignment.Center };
        g2.DrawString(SecondLine, new Font("Free 3 of 9", 40), Brushes.Black, new RectangleF(0, 0, longestLine * 40, totalLines * 40), strFormat); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:48:54.317

[将两个图像合并为一个新图像](https://stackoverflow.com/questions/7206510/combine-two-images-into-one-new-image)用于并排添加两个位图。我自己用过它，它似乎工作得很好。

# sql - IF EXIST Drop Table in View 导致关键字“IF”附近的语法不正确。信息

> ID：12678010
> 
> 赞同：0
> 
> 时间：2012-10-01T17:24:46.233
> 
> 标签：sql, sql-server, tsql

在我看来，以下代码在 **关键字“IF”附近产生错误消息 Incorrect syntax**

```
ALTER VIEW [dbo].[IDW_vwGetProductOutPut] 
AS  
IF EXISTS
( SELECT * FROM tempdb.dbo.sysobjects 
  WHERE ID = OBJECT_ID(N'tempdb..#TempPackaging')) 
BEGIN
    DROP TABLE #TempPackaging 
END  . . . . . .     

--code to create temp table goes here . .  and so on 
```

请问我该如何编码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T17:33:32.347

[视图](http://msdn.microsoft.com/en-us/library/ms187956.aspx)只能包含SELECT 语句，您拥有的更像是[存储过程](http://msdn.microsoft.com/en-us/library/ms187926.aspx)。

```
CREATE PROC [dbo].[IDW_spGetProductOutPut] 
AS  
IF EXISTS
( SELECT * FROM tempdb.dbo.sysobjects 
  WHERE ID = OBJECT_ID(N'tempdb..#TempPackaging')) 
BEGIN
    DROP TABLE #TempPackaging 
END  . . . . . .     

--code to create temp table goes here . .  and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:36:38.777

我不相信 SQL Server 提供此功能。作为一种解决方法，您可能希望在存储过程中执行您的逻辑。

# c# - Task.WhenAny 和未观察到的异常

> ID：12678013
> 
> 赞同：25
> 
> 时间：2012-10-01T17:24:59.650
> 
> 标签：c#, .net, task-parallel-library, .net-4.5, async-await

假设我有三个任务，`a`，`b`和`c`。这三个都保证在 1 到 5 秒之间的随机时间抛出异常。然后我编写以下代码：

```
await Task.WhenAny(a, b, c); 
```

这最终会从首先出现的任务故障中引发异常。因为这里没有`try...catch`，所以这个异常会冒泡到我的代码中的其他地方。

当剩下的两个任务抛出异常时会发生什么？这些未观察到的异常，不就是会导致整个进程被杀死吗？这是否意味着唯一的使用方法`WhenAny`是在一个`try...catch`块内，然后在继续之前以某种方式观察剩余的两个任务？

**跟进：**我希望答案适用于带有异步目标包的.NET 4.5*和*`TaskEx.WhenAny`.NET 4.0（尽管在这种情况下显然使用）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-01T17:56:34.743

> 当剩下的两个任务抛出异常时会发生什么？

这些`Task`s 将在故障状态下完成。

> 这些未观察到的异常，不就是会导致整个进程被杀死吗？

不再。

在 .NET 4.0 中，`Task`析构函数会将其未观察到的异常传递给[`TaskScheduler.UnobservedTaskException`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.unobservedtaskexception.aspx)，如果未处理，它将终止进程。

在 .NET 4.5 中，此[行为已更改](http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/10217876.aspx)。现在，未观察到的异常被传递给`TaskScheduler.UnobservedTaskException`，但如果未处理，它们将被忽略。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T17:48:22.037

是的，剩余的任务异常没有被观察到。在 .NET 4.5 之前，您有义务观察它们（不确定 .NET 4.5 的情况如何，但它发生了变化）。

我通常为自己编写一个辅助方法来完成这些即发即弃的任务：

```
 public static void IgnoreUnobservedExceptions(this Task task)
    {
        if (task.IsCompleted)
        {
            if (task.IsFaulted)
            {
                var dummy = task.Exception;
            }
            return;
        }

        task.ContinueWith(t =>
            {
                var dummy = t.Exception;
            }, TaskContinuationOptions.OnlyOnFaulted | TaskContinuationOptions.ExecuteSynchronously);
    } 
```

您可能希望包括登录生产应用程序。

# ruby-on-rails - 根据标签显示自定义内容 - 充当可标记

> ID：12678014
> 
> 赞同：0
> 
> 时间：2012-10-01T17:25:00.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, acts-as-taggable-on

我只是在我的博客模型上实现了acts-as-taggable-on。工作很棒。

访问者可以根据标签过滤博客文章。所以在我的索引博客上有一个带有一堆标签（链接）的标签云。网址是 domain.com/tag/greatbars 等

问题：如何根据过滤后的标签在索引顶部放置一些独特的内容？

示例：博客帖子按“greatbars”过滤 h1：帖子按“标记名”过滤 h2：下面您会看到阿姆斯特丹地区的一些很棒的酒吧。看看这个。p: 等等等等

基于过滤标签的博客列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:35:09.167

呈现索引的操作大概将过滤后的标签作为参数。您可以将该标记保存为实例变量，然后如果该变量具有特定值，则在索引视图中显示某些内容。基本示例：

控制器

```
 def index
    @tag = Tag.find_by_name(params[:tag])
    @posts = Post.tagged_with(@tag)
  end 
```

看法

```
 <% case @tag.name %>
  <% when 'bars' %>
    <%= render :partial => 'posts/bars')
  <% when 'foos' %>
    <%= render :partial => 'posts/foo_stuff')
  # as many other cases as you wish
  <% else %>
    <%= render :partial => 'posts/default')
  <% end %>
# rest of existing index view 
```

# android - 如何知道 Parcelable 上剩余数据的数据类型？

> ID：12678016
> 
> 赞同：1
> 
> 时间：2012-10-01T17:25:04.027
> 
> 标签：android, serialization, android-intent, xsd, parcelable

我正在实现一种 XSD 对象到 Android 上的 Parcelable 之间的映射。一切都很好，除非我有一个更复杂的 xsd 元素，其中包含一个可选元素（minOccurs='0' maxOccurs='1'）。

我需要使用以下格式编写我的 bean 构造函数：

```
private Bean (Parcel in) {
    super();
    this.setId(in.readInd());
    this.setComplexData((ComplexClass) in.readParcelable(ComplexClass.class
            .getClassLoader()));
    this.setComplexData2((ComplexClass2) in.readParcelable(ComplexClass2.class
            .getClassLoader()));

} 
```

但是这两个复杂的数据都是可选的。

当我只有一个可选数据时，我正在使用：

```
 if(in.dataAvail() >0)
                this.setComplexData((ComplexClass) in.readParcelable(ComplexClass.class
            .getClassLoader())); 
```

但如果两者都是可选的，我不能这样做。因此，我想知道是否有某种方法可以识别包裹内的对象是什么，某种方法可以检查类签名？从这个意义上说，我可以检查数据是 ComplexClass1 还是 2 并进行读取。

# c - 使用 mutex_lock、cond_wait 的 C pthread 编程（计算素数）

> ID：12678024
> 
> 赞同：0
> 
> 时间：2012-10-01T17:25:30.503
> 
> 标签：c, pthreads

我想制作一个程序来计算某些数字之间的素数。我做了一个循环队列来保存素数。所以基本上，2个线程在循环队列中找到素数并入队，1个线程取出素数并计算它们。从我的代码中，get_prime() 和 get_prime2() 执行入队操作，而 consumer() 执行取出操作。问题是，它没有正确计算素数。我认为，在进行中，即使队列已满，入队线程之一也会尝试将素数放入队列中，这样素数就不会放入队列中并且它被遗漏了。

```
#include <stdio.h>
#include <pthread.h>
#include <math.h>

//queue size
#define QUEUESIZE 1

//a node in a queue
typedef struct queue{
    int element[QUEUESIZE+1];
    int front;
    int rear;
    int count;
}queue;

//make a queue
queue q;

pthread_mutex_t mutex_lock;
pthread_cond_t p_cond = PTHREAD_COND_INITIALIZER;
pthread_cond_t c_cond = PTHREAD_COND_INITIALIZER;

//prime count
int count=0;

//prototype
void init_queue(queue *q);
int enqueue(queue *q, int x);
int dequeue(queue *q);
int q_empty(queue *q);
int q_full(queue *q);
void *get_prime();
void *get_prime2();
void *consumer();

int main(int argc, const char * argv[])
{
    pthread_t p_thread[2]; //producer thread
    pthread_t c_thread;  //consumer thread
    int status;

    init_queue(&q);

    pthread_mutex_init(&mutex_lock, NULL);
    pthread_cond_init(&p_cond, NULL);
    pthread_cond_init(&c_cond, NULL);
    pthread_create(&p_thread[0], NULL, get_prime, (void*)NULL);
    pthread_create(&p_thread[1], NULL, get_prime2, (void*)NULL);
    pthread_create(&c_thread, NULL, consumer, (void*)NULL);
    pthread_join(p_thread[0], (void **)&status);
    pthread_join(p_thread[1], (void **)&status);
    pthread_join(c_thread, (void **)&status);

    printf("\nThe number of prime numbers between 1~100000: %d\n", count);

    return 0;
}

//queue initialization
void init_queue(queue *q)
{
    q->front = 0;
    q->rear = QUEUESIZE-1;
    q->count = 0;
}

int enqueue(queue *q, int x)
{
    if(q_full(q))
    {
        return -1;
    }
    else{
        q->rear = (q->rear+1) % QUEUESIZE;
        q->element[q->rear] = x;
        q->count = q->count + 1;
        return 0;
    }
}

int dequeue(queue *q)
{
int x;

if(q_empty(q))
{
    return -1;
}
else
{
    x = q->element[q->front];
    q->front = (q->front+1) % QUEUESIZE;
    q->count = q->count - 1;
}

return x;
}

int q_empty(queue *q)
{
if(q->count <= 0)
    return 1;
else
    return 0;
}

int q_full(queue *q)
{
if(q->count >=QUEUESIZE)
    return 1;
else
    return 0;
}

void *get_prime()
{
int i, j; //loop counter
int temp = 0;

for(i=2; i<50; i++)
{
    for(j=2; j<=sqrt(i); j++)
    {
        if(i%j==0){
            temp++;
            break;
        }
    }
    if(temp==0)
    {
        pthread_mutex_lock(&mutex_lock);

        if(enqueue(&q, i)==-1) //queue full condition
        {
            pthread_cond_wait(&p_cond, &mutex_lock);
            enqueue(&q, i);
            printf("%d\t", i);
        }
        else
            printf("%d\t", i);
        pthread_cond_signal(&c_cond);

        pthread_mutex_unlock(&mutex_lock);
    }
    temp=0;
}
}
void *get_prime2()
{
int i, j; //loop counter
int temp = 0;

for(i=50; i<100; i++)
{
    for(j=2; j<=sqrt(i); j++)
    {
        if(i%j==0){
            temp++;
            break;
        }
    }
    if(temp==0)
    {
        pthread_mutex_lock(&mutex_lock);

        if(enqueue(&q, i)==-1) //queue full condition
        {
            pthread_cond_wait(&p_cond, &mutex_lock);
            enqueue(&q, i);
            printf("%d\t", i);
        }
        else
            printf("%d\t", i);
        pthread_cond_signal(&c_cond);

        pthread_mutex_unlock(&mutex_lock);
    }
    temp=0;
}
}

void *consumer()
{
int isempty;

while(1)
{
    pthread_mutex_lock(&mutex_lock);
    isempty = dequeue(&q);

    if(isempty != -1){
        count++;
    }
    else
        pthread_cond_wait(&c_cond, &mutex_lock);
    pthread_cond_signal(&p_cond);
    pthread_mutex_unlock(&mutex_lock);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:45:08.903

所以这是我新的更正代码，谢谢

```
void *get_prime2()
{
    int i, j; //loop counter
    int temp = 0;

    for(i=50000; i<100000; i++)
    {
        for(j=2; j<=sqrt(i); j++)
        {
            if(i%j==0){
                temp++;
                break;
            }
        }

        if(temp==0)
        {
            pthread_mutex_lock(&mutex_lock);

            while(1)
            {
                if(enqueue(&q, i) == -1)
                    pthread_cond_wait(&p_cond, &mutex_lock);
                else
                {
                    break;
                }
            }

            pthread_cond_signal(&c_cond);
            pthread_mutex_unlock(&mutex_lock);
        }
        temp=0;
    }
}

void *consumer()
{
    int isempty;

    while(1)
    {
        pthread_mutex_lock(&mutex_lock);
        isempty = dequeue(&q);

        if(isempty != -1){
            count++;
        } else {
            pthread_cond_wait(&c_cond, &mutex_lock);
        }

        pthread_cond_signal(&p_cond);
        pthread_mutex_unlock(&mutex_lock);
    }
} 
```

# javascript - 将数字与数字作为字符串进行比较

> ID：12678030
> 
> 赞同：1
> 
> 时间：2012-10-01T17:25:48.407
> 
> 标签：javascript, coffeescript

我试图弄清楚为什么我的 CoffeeScript 代码不起作用：

**HTML：**

```
<a data-id="5">Click me</a> 
```

**咖啡脚本：**

```
id = $('a').attr('data-id')
console.log id == 5 
```

问题是从中返回的数字`attr('data-id')`是一个字符串，并且将其与实际数字进行比较会导致比较失败。我应该做些什么不同的事情，以便我可以轻松地比较数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T17:31:59.257

您可以使用[parseFloat](http://www.devguru.com/technologies/javascript/11464.asp)或[parseInt](http://www.devguru.com/technologies/javascript/11465.asp)方法，还可以查看尝试将属性内容转换为适当数据类型的 jQuery[数据方法](http://api.jquery.com/data/)`data-`

```
id = $('a').data('id')
console.log id == 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:28:03.260

与您在 Javascript 中所做的相同

```
id = '5'
console.log parseInt(id, 10) == 5 # parseInt() parses a string as an integer
console.log +id == 5              # + prefix is an "interpret as number" shorthand
console.log id == 5.toString()    # Or convert the other number to a string 
```

[在这里运行，所有报告`true`](http://coffeescript.org/#try%3a%20%20%20%20id%20%3D%20%275%27%0A%20%20%20%20console.log%20parseInt%28id%2C%2010%29%20%3D%3D%205%0A%20%20%20%20console.log%20%2Bid%20%3D%3D%205%0A%20%20%20%20console.log%20id%20%3D%3D%205.toString%28%29)

# c# - 到可能未创建的 WPF MVVM 窗口的全局消息

> ID：12678031
> 
> 赞同：0
> 
> 时间：2012-10-01T17:25:48.503
> 
> 标签：c#, .net, wpf, mvvm, .net-3.5

我有一个实现 MVVM 模式的 WPF 窗口。该窗口显示用户应该从中选择的可用麦克风列表。然后将选定的麦克风存储在我们的存储库中。所有这一切都很好，但这**是问题所在**。当您插入新麦克风时，主窗口会启动，并显示一条消息，例如：“插入了新设备，您要选择它吗”。如果他们单击此消息，则应该会弹出选择窗口，其中包含已选择的新设备。但是，我试图将 UI 保持为真正的 MVVM 模式，xaml 后面没有代码。以下是我想到的一些选项，但不确定是否有“正确”的方法来做到这一点。

*   有一个通用的全局动作控制器，它将被传递到 ViewModel。然后 ViewModel 可以订阅一个事件，例如`SelectionChangedEvent`
    *   这样做的问题是窗口（以及视图模型）可能尚未打开，因此消息会丢失。
*   使用上面的选项，但是让动作控制器总是首先加载窗口。这将解决 ViewModel 不可用的问题。
*   其他一些我没有想到的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:08:14.943

事件聚合器模式通常用于启用视图模型之间的间接通信。关于这个主题有很多很好的链接。我喜欢[Jeremy Miller 的脑残，](http://codebetter.com/jeremymiller/2009/07/22/braindump-on-the-event-aggregator-pattern/)但它需要一些背景阅读才能完全理解。

事件聚合器的基本要点是它充当一种消息总线，任何人都可以注册以接收消息通知，并且任何人都可以将消息发布到 EA。在您的特定情况下，将有 3 条注意消息：

1.  添加了新设备
2.  请求设备选择
3.  选择的设备

您的主窗口将发布新设备添加消息。（或者它可以跳过发布并仅触发请求设备选择消息，RDS 消息上的属性之一可能是默认选择）。请求设备选择应该会显示设备选择对话框。当用户选择设备时，它会触发 Device Selected 消息（其中应包含有关所选设备的信息）。

有兴趣知道已选择新设备的人将注册该事件并做出相应的响应。

# php - PHP中的计数器变量

> ID：12678033
> 
> 赞同：0
> 
> 时间：2012-10-01T17:25:57.610
> 
> 标签：php, html

> **可能重复：**
> [变量总是重置](https://stackoverflow.com/questions/12677489/variable-always-resetting)

所以我对 html 或 php 不太熟悉，但是我一直在开发像 mastermind 这样的游戏，我的代码一直存在的一个问题是变量 $attempts 似乎总是重置，所以它的价值总是1。有没有办法解决这个问题？我的大部分代码都在这里：

```
<?php
$showtable = false;
$showform = false;
$showstart= true;
$process = false;
$black = 0;
$white = 0;
$answer = array(1,2,3,4);
$tries = array();
$attempts = 0;

if (isset($_POST['started']))
{
    $showform = true;
    $showstart = false;
}

if (isset($_POST['guessed']))
{
    $process = true;
}

if ($showstart == true)
{
    echo"
    <form action='' method='post'>
    <input type='submit' value='Start' name='start' />
    <input type='hidden' value='started' name='started'/>
    </form><Br /><br />
    ";
}

if ($showform == true)
{
    echo"
    <h3>Your guess:</h3>
    <form action='gogo.php' method='post'>
    <input type='text' placeholder='Your guess' maxlength='4' value='' name='guess' />
    <input type='submit' value='guess' name='submitt' />
    <input type='hidden' value='started' name='started' />
    <input type='hidden' value='guessed' name='guessed' />
    </form><Br /><br />
    ";
}

if ($process == true)
{
    $attempts += 1;
    $guess = str_split($_POST['guess']);
    if ($guess == $answer)
    {
        $black = 4;
    } else
    {
        for ($i=0;$i<4;$i++)
        {
            if ($guess[$i] == $answer[$i])
            {
                $black += 1;
                $white -= 1;
            }
        }
        $result = array();
        foreach ($guess as $val)
        {
            if (($key = array_search($val, $answer))!==false)
            {
                $result[] = $val;
                unset($answer[$key]);
            }
        }
        $count = count($result);
        $white = $white + $count;
    }
}
$chance = implode(" ",$guess);
$try = $attempts.".".$chance.".".$white.".".$black;
array_push($tries, $try);
$showtable = true;

if ($showtable == true)
{
    echo"
    <table border='2' cellpadding='10'>
    <Tr><Td>Attempt:</td><td>Number guessed:</td><td>White:</td><Td>Black:</td></tr>
    ";
    for ($i=0;$i<$attempts;$i++)
    {
        $split = explode(".",$tries[$i]);
        echo"
        <tr><td>".$split[0]."</td><td>".$split[1]."</td><td>".$split[2]."</td>    <td>".$split[3]."</td></tr>
        ";
    }
    echo"
    </table>
    ";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:29:41.200

在代码开始时，您将变量初始化为零，因此每次运行代码（即每次进行移动）时，变量都会“重置”。

您应该以某种方式保存变量，无论是使用数据库还是使用`$_SESSION`变量。但请注意，您必须添加检查以确保发送的`$_POST`内容与您在游戏中此时的预期一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:30:22.573

这是因为每次您点击页面时，您都会在开始时设置`$attempts`为`0`，并且您只会将其增加 1。因为您没有提交（然后使用）`$attempts`表单中的值（隐藏字段或否则），您没有任何方法可以在请求之间保留该值。请记住，每次访问页面时，脚本都会从头开始。除非您将内容存储在会话或数据库中，或者使用表单或查询字符串参数来保存数据的状态，否则每次都希望重新开始。

# ios - MPMoviePlayerController 起始图像

> ID：12678035
> 
> 赞同：8
> 
> 时间：2012-10-01T17:26:05.183
> 
> 标签：ios, mpmovieplayercontroller

在我的应用程序中，我创建的实例`MPMoviePlayerController`一开始是一个黑匣子，看起来像这样（因为视频一开始是黑色并淡入）：

![在此处输入图像描述](../Images/1959b5ba05a466a689e995076d9ddc1d.png)

但是，我正在设想像这样更用户友好的东西，带有缩略图，如下例所示：

![在此处输入图像描述](../Images/918f3bfac85c2e0e66b2f7723162c3c7.png)

这是我创建的模型，但相机胶卷中的视频和消息应用程序中发送的视频使用该播放箭头。我需要实现什么类才能使用股票 iOS 播放箭头？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T15:33:57.707

这看起来像 的`thumbnailImageAtTime:timeOption:`方法`MPMoviePlayerController`，您应该输入要检索缩略图并使用该图像`UIImageView`在视频顶部显示的时间。

获得缩略图后，您将创建一个`UIImageView`并将图像设置为缩略图，并确保您设置`userInteractionsEnabled`为`YES`. 确保将此图像视图的框架设置为覆盖电影播放器​​。

现在您可以`UITapGestureRecognizer`在该图像视图上创建一个将触发一个方法的视图。这个方法然后调用`play`你的`MPMoviePlayerController`对象的方法。

```
-(void)viewDidLoad{
    [...]

    UIImage *thumbnail = [moviePlayer thumbnailImageAtTime:5.0 
                                                timeOption:MPMovieTimeOptionNearestKeyFrame];

    UIImageView *iv = [[UIImageView alloc] initWithImage:thumbnail];
    iv.userInteractionEnabled = YES;
    iv.frame = moviePlayer.frame;
    [self.view addSubview:iv];
    [iv release];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    tap.numberOfTapsRequired = 1;
    [iv addGestureRecognizer:tap];
    [tap release];

    [...]
}

- (void)handleTap:(UITapGestureRecognizer *)gesture{
    iv.hidden = YES;
    [moviePlayer play];
} 
```

请注意，如果您想要播放按钮，然后在 Photoshop 中创建一个播放按钮，并将其添加到缩略图图像视图的顶部，将手势识别器附加到该图像视图，并确保在开始播放视频时隐藏两个图像视图。

您可以使用 a `UIButton`else 将图像设置为播放图像，那么您根本不需要 a `UIGestureRecognizer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:46:06.020

您将通过将视频嵌入`<video>`Web 视图中的 HTML 5 标记来获得此箭头。

对于实际实现，请参阅类似这样的答案[Play embedded video in UIWebView with HTML5](https://stackoverflow.com/questions/11115937/play-embedded-video-in-uiwebview-with-html5)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:17:52.447

只使用 UIButton 怎么样？它可以有一个漂亮的背景图像，单击它，然后将其移动到电影播放器​​的后面，或者甚至删除按钮。即使在代码中也很容易添加

# r - 将样条曲线拟合到凌乱的曲线

> ID：12678036
> 
> 赞同：0
> 
> 时间：2012-10-01T17:26:05.547
> 
> 标签：r, regression, spline, gam, mgcv

我权衡了点不完全平滑的模拟生成的曲线。我想拟合样条曲线并计算最大值。由于点的锯齿状特性，尤其是在峰值附近，将样条曲线拟合到整个曲线是没有意义的。相反，我想丢弃曲线的大多数（不是全部）无信息部分（其中点不是均匀地增加/减少），以便我可以拟合更好的样条曲线。

这里有 3 条示例曲线。

```
structure(list(x = c(0.01, 0.0615789473684211, 0.113157894736842, 
0.164736842105263, 0.216315789473684, 0.267894736842105, 0.319473684210526, 
0.371052631578947, 0.422631578947368, 0.474210526315789, 0.52578947368421, 
0.577368421052632, 0.628947368421053, 0.680526315789474, 0.732105263157895, 
0.783684210526316, 0.835263157894737, 0.886842105263158, 0.938421052631579, 
0.99), y = c(0.67455086336912, 0.798345993110331, 0.842040269562323, 
0.876826597424532, 0.903925678739277, 0.922394814941881, 0.937688904117379, 
0.952464844120848, 0.959010185199922, 0.960880828342136, 0.968131047741576, 
0.967998560989975, 0.963479216138144, 0.947228114551568, 0.930237609460854, 
0.900655040504384, 0.849692079994379, 0.793895388319592, 0.715064370596625, 
0.586048018267692)), .Names = c("x", "y"), row.names = c(NA, 
-20L), class = "data.frame")

structure(list(x = c(0.01, 0.0615789473684211, 0.113157894736842, 
0.164736842105263, 0.216315789473684, 0.267894736842105, 0.319473684210526, 
0.371052631578947, 0.422631578947368, 0.474210526315789, 0.52578947368421, 
0.577368421052632, 0.628947368421053, 0.680526315789474, 0.732105263157895, 
0.783684210526316, 0.835263157894737, 0.886842105263158, 0.938421052631579, 
0.99), y = c(0.471958752798607, 0.703622592901373, 0.75810009343474, 
0.804310552037636, 0.833980459996575, 0.858824563652134, 0.880427517647614, 
0.898865451764142, 0.91097315832838, 0.926239088224158, 0.933622984262967, 
0.940626455467701, 0.944787886406163, 0.940076642124325, 0.938416888413051, 
0.918335717622263, 0.886320360986925, 0.84476577117581, 0.782884400269357, 
0.680906832291339)), .Names = c("x", "y"), row.names = c(NA, 
-20L), class = "data.frame")

structure(list(x = c(0.01, 0.0615789473684211, 0.113157894736842, 
0.164736842105263, 0.216315789473684, 0.267894736842105, 0.319473684210526, 
0.371052631578947, 0.422631578947368, 0.474210526315789, 0.52578947368421, 
0.577368421052632, 0.628947368421053, 0.680526315789474, 0.732105263157895, 
0.783684210526316, 0.835263157894737, 0.886842105263158, 0.938421052631579, 
0.99), y = c(0.92758700570137, 1.01008397567002, 1.06088676091004, 
1.10000024909512, 1.13048775170492, 1.15176599158524, 1.17517328999588, 
1.17489937140761, 1.22188964933233, 1.2073639239554, 1.1686005354797, 
1.15073969246578, 1.22855065420885, 1.30756438989448, 1.27583479809645, 
1.22221301838554, 1.15463640322463, 1.08629005387455, 1.00778694924309, 
0.917029835140733)), .Names = c("x", "y"), row.names = c(NA, 
-20L), class = "data.frame") 
```

这是我的`spline`功能。

```
library(mgcv)
cspline <- function(data) {
m <- data$x
lambda <- data$y
m1 <- mgcv::gam(lambda ~ s(m, fx = FALSE, k=-1, bs = "cr"))
predm <- predict(m1, data.frame(m = seq(0.01, 0.99, length = 100000)), se=TRUE)$fit
pm <- seq(0.01, 0.99, length = 100000)
maxy <- max(predm)
maxx <- pm[which(predm == max(predm))]
return(list(maxx, maxy))
} 
```

任何人都可以提出一种算法或想法，使我能够专注于曲线中点变化更多的部分，并仅将样条拟合到那些（并丢弃峰值两侧没有贡献的其他点更多信息）？

# objective-c - 修改 NSDateFormatter 样式？

> ID：12678038
> 
> 赞同：0
> 
> 时间：2012-10-01T17:26:11.087
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

您能否推荐一个解决方案，如何`NSDateFormatter`使用简单`NSString`格式（即 HHMMYY 等）实现这样的格式。预定义的样式几乎符合我的要求，但也差不多。

我需要这种格式：

```
15 Aug 12

27 Apr 11

31 Jun 12 
```

如果不可能，我应该使用类方法`dateFormatFromTemplate:options:locale:`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:28:57.753

查看`-setDateFormat`文档中的方法，并使用您希望从以下指南转换日期的日期格式。

指南：[http ://unicode.org/reports/tr35/tr35-6.html#Date%5FFormat%5FPatterns](http://unicode.org/reports/tr35/tr35-6.html#Date%5FFormat%5FPatterns)

文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

使用上述指南，您应该能够使用以下代码来转换日期。

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd MMM yy"];
NSString *dateString = [dateFormat stringFromDate:today];
NSLog(@"date: %@", dateString);
[dateFormat release]; 
```

# php - 类函数中声明的全局在包含文件中不可用？

> ID：12678039
> 
> 赞同：3
> 
> 时间：2012-10-01T17:26:13.977
> 
> 标签：php, global-variables

采取以下 php 类：

```
 class test
 {
    function do_it_to_it(){
        global $path;

        if(somecondition){
           $path = 'path/to/goodies';
           require_once('some_file');
        }
    }
 } 
```

“some_file”的内容如下：

```
global $path;
define('GOODIEPATH', $path); 
```

现在我打电话：

```
$t1 = new test();
$t1->do_it_to_it(); 
```

“some_file”中的 $path 将为空，而不是“path/to/goodies”。我有一种感觉，这是因为 $path 要么由于某种原因被第二个“全局 $path”覆盖，要么因为某种类型的全局范围问题。我在这里想念什么？

PS - 我比任何人都更讨厌全局变量，但在这种情况下我无法在不破坏遗留代码的情况下修复它。

**编辑**：我已经修改了`test`上面的类以显示`if`真实代码中存在的语句。我似乎通过在语句中移动`global`语句来解决问题`if`，如下所示：

```
class test
{
   function do_it_to_it(){

     if(somecondition){
        global $path;
        $path = 'path/to/goodies';
        require_once('some_file');
     }
   }
} 
```

知道为什么这似乎可以解决它吗？该`if`语句导致原始`global`声明以某种方式超出范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:55:28.873

我总是建议在代码的零级上定义全局变量，例如在单独的文件中，并将该文件包含在所有源中。

# apache-camel - 在 DefaultCamelContext.start() 上引起的 StackOverflowException，似乎是由骆驼进入无限循环引起的

> ID：12678040
> 
> 赞同：4
> 
> 时间：2012-10-01T17:26:27.377
> 
> 标签：apache-camel, stack-overflow

我已经搜索过这个并且还没有找到这个问题。我正在创建一个骆驼路线，它监视 shapefile (.shp) 的文件夹。下面的代码是实现骆驼路线的代码。

```
final String filePath = settings.getSetting(GMTI_VOCAB.SHAPEFILE_PATH);
logger.debug("filePath={}", filePath);
final File file = new File(filePath);
if (file.mkdir())
{
  logger.warn("Shapefile path did not exist. Creating directory.");
}

logger.debug("Creating file route.");
context.addRoutes(new RouteBuilder()
{

    @Override
    public void configure() throws Exception
    {
        String path = String.format("file://%s?noop=true&include=.*shp$", file.getAbsolutePath());
        logger.debug("Route is: {}", path);
        from(path).bean(this, "process(${file:path})");
    }
 });
 logger.debug("Starting context");
 context.start();
 logger.info("Communicator started!"); 
```

目前返回的文件路径只是“shapefile”，导致 file.getAbsolutePath() 返回“C:\Users\medderssc\gmti_intestor\shapefiles”。返回的结果路径是

```
from("file://C:\Users\medderssc\gmti_intestor\shapefiles?noop=true&include=.*shp$").bean(this, "process(${file:path})"); 
```

context 是一个 DefaultCamelContext，camel 是通过 maven 导入的，在 POM 中有以下条目：

```
 <dependency>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-core</artifactId>
        <version>2.10.0</version>
    </dependency> 
```

“通讯器启动”永远不会输出，程序在此之前崩溃，告诉我在 context.start() 期间发生错误。下面的堆栈跟踪显示了 StackOverflowException。请注意堆栈本身重复了几次，这意味着骆驼本身正在以某种方式进入某种无限递归循环。除了发布的代码之外，没有进一步的骆驼配置。任何人都可以帮忙吗？下面的异常堆栈：

> 2012 年 10 月 1 日上午 9:33:50 com.saic.ogc.client.BaseClient createMessageFactory 信息：默认为内置消息工厂... 2012 年 10 月 1 日上午 9:33:50 com.saic.ogc.client。 BaseClient initTemplate INFO：设置拦截器！线程“主”java.lang.StackOverflowError 中的异常
> 
> > ```
> > at org.apache.camel.model.RouteDefinition.toString(RouteDefinition.java:119)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RoutesDefinition.toString(RoutesDefinition.java:60)
> > at org.apache.camel.builder.RouteBuilder.toString(RouteBuilder.java:58)
> > at org.apache.camel.model.BeanDefinition.description(BeanDefinition.java:81)
> > at org.apache.camel.model.BeanDefinition.toString(BeanDefinition.java:70)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RouteDefinition.toString(RouteDefinition.java:119)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RoutesDefinition.toString(RoutesDefinition.java:60)
> > at org.apache.camel.builder.RouteBuilder.toString(RouteBuilder.java:58)
> > at org.apache.camel.model.BeanDefinition.description(BeanDefinition.java:81)
> > at org.apache.camel.model.BeanDefinition.toString(BeanDefinition.java:70)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RouteDefinition.toString(RouteDefinition.java:119)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RoutesDefinition.toString(RoutesDefinition.java:60)
> > at org.apache.camel.builder.RouteBuilder.toString(RouteBuilder.java:58)
> > at org.apache.camel.model.BeanDefinition.description(BeanDefinition.java:81)
> > at org.apache.camel.model.BeanDefinition.toString(BeanDefinition.java:70)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RouteDefinition.toString(RouteDefinition.java:119)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at org.apache.camel.model.RoutesDefinition.toString(RoutesDefinition.java:60)
> > at org.apache.camel.builder.RouteBuilder.toString(RouteBuilder.java:58)
> > at org.apache.camel.model.BeanDefinition.description(BeanDefinition.java:81)
> > at org.apache.camel.model.BeanDefinition.toString(BeanDefinition.java:70)
> > at java.lang.String.valueOf(Unknown Source)
> > at java.lang.StringBuilder.append(Unknown Source)
> > at java.util.AbstractCollection.toString(Unknown Source)
> > at java.lang.String.valueOf(Unknown Source) 
> > ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:03:47.827

乍一看，问题似乎是您`.bean(this,...)`指的是匿名类（`new RouteBuilder()`），并将尝试运行`configure()`（因此递归/sfo）...尝试为您的 bean/process() 方法使用单独的类.. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:32:13.887

I had a similar problem. I had a RouteBuilder which implemented Processor (because I was being lazy). Turns out that this caused infinite recursion. The fix was to move the implementation of process(...) to it's own class.

# android - 如何忽略 android 的 emma 代码覆盖率中的包？

> ID：12678043
> 
> 赞同：2
> 
> 时间：2012-10-01T17:26:54.097
> 
> 标签：android, jenkins, emma

我有一个这样的项目：

*   MyLibrary（其他项目使用的库代码）
*   MyLibraryTest（MyLibrary 的单元测试）
*   MyService（应用程序，在 project.properties 中引用 MyLibrary）
*   MyServiceTest（MyLibrary 的单元测试）

我想为 MyLibrary 和 MyService 生成代码覆盖率报告，我可以这样做。但是，MyServiceTest 的报告包括 MyLibrary 中的包（未经测试，因此不应该存在）。同样，MyLibraryTest 的报告显示 MyService 的覆盖范围，因为 MyService 是检测的应用程序。

我可以添加`<property name="emma.filter" value="-com.my.library.package.*" />`到 MyLibrary 的 build.xml 并阻止这些行显示在 MyServiceTest 的报告中。不幸的是，它也阻止了 MyLibraryTest 中的行。

如何设置 build.xml 过滤器，以便只有库中的包显示在 MyLibraryTest 的 emma 报告中，而只有 MyService 的包显示在 MyServiceTest 的报告中？

# java - 使用多线程的面向对象的矩阵乘法

> ID：12678052
> 
> 赞同：1
> 
> 时间：2012-10-01T17:27:19.343
> 
> 标签：java, oop, matrix

我需要使用 OO 原则设计一个多线程矩阵乘法。下面是我想出的课程大纲。

```
class matrix{

}

class matrixThread implements runnable{

} 
```

矩阵类将保存实际的矩阵。在这个应用程序中需要有 3 个矩阵，所以我必须创建其中的三个。而且我需要使用 4 个线程将它们相乘。所以我创建了 4 个 matrixThread 对象并使用 run 方法中的实际矩阵乘法代码调用 .start 方法。

有人可以评论我的方法。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:50:27.807

您的方法应该是复制一个已经有效的解决方案。矩阵乘法是一个很好理解的问题，获得最佳性能（这使得使用多个线程值得做）有点棘手，只需使用现有的解决方案就可以省去一些麻烦。如果你只是尝试一些应该工作的东西，如果你不仔细测试，你会发现它比使用一个线程慢。（因为您需要注意创建的线程数以及缓存的使用方式）

# ruby-on-rails - 如何通过范围关联访问集合？

> ID：12678055
> 
> 赞同：0
> 
> 时间：2012-10-01T17:27:35.897
> 
> 标签：ruby-on-rails, activerecord

```
class User < ActiveRecord::Base
    has_many :assignments
    has_many :projects, through: :assignments
end

class Project < ActiveRecord::Base
    has_many :assignments
    has_many :users, through: :assignments
end

class Assignment < ActiveRecord::Base
    belongs_to :user
    belongs_to :project
    scope :current_assignments, where(...)
end 
```

我想获取当前分配给当前用户的所有项目。就像是：

```
current_user.current_assigned_projects 
```

但现在，我必须这样做：

```
current_user.assignments.current_assignments.map{ |a| a.project }.uniq 
```

或者

```
Project.includes(:users, :assignments).where('assignments.status' => 1, 'users.id' => current_user.id) 
```

有什么漂亮的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:55:22.667

就像是

```
class User < ActiveRecord::Base
   has_many :assignments
   has_many :projects, through: :assignments
   has_many :current_projects, conditions: 'assignments.status = 1', through: :assignments
end 
```

应该管用。或者至少我希望如此；）

# php - 在基本的 mysql 搜索引擎中按相关性排序

> ID：12678058
> 
> 赞同：1
> 
> 时间：2012-10-01T17:27:40.363
> 
> 标签：php, mysql, ranking, relevance

我在mysql中有一张表。它包含大约一百个网站的链接、标题、描述和关键字。并非每个网站都有关键字字段。我在自己编写的网络爬虫上爬取了 Apple.com，并为大多数苹果网站编制了索引。

我将表格链接到我的搜索引擎，但我遇到了问题。我使用的代码没有按相关性排序。我的意思是，如果用户在搜索引擎中输入“Apple”，它将返回相当随机的结果。如果我输入“购买 ipad”，ipad 会出现，而不是苹果商店。我希望查询扫描所有字段以查看每个用户输入在该字段中的次数，然后按最相关排名。*如果发生冲突，则较高的 id 获胜...基本上。

顺便说一句，如果我输入 iphone 或 ipad，就会显示正确的结果。我有两个不同的查询，分别用于单独和组合的术语，并且很想知道如何将它们混合在一起以获得 1 个查询。

```
 Terms together:
   $query = " SELECT * FROM scan WHERE ";
   $terms = array_map('mysql_real_escape_string', $terms);
   $i = 0;
   foreach ($terms as $each) {
   if ($i++ !== 0) {
   $query .= "AND";   
   }
   $query.= "Match(title, description, keywords, link) Against ('".implode(' ', $terms )." in boolean mode);

     }

       Terms Seperate
       $query = " SELECT * FROM scan WHERE ";
   $terms = array_map('mysql_real_escape_string', $terms);
   $i = 0;
   foreach ($terms as $each) {
   if ($i++ !== 0) {
   $query .= "or";
   }
   $query.= "Match(title, description, keywords, link) Against ('".implode(' ', $terms )." in boolean mode);

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-13T21:41:11.963

您需要为 MATCH 语句使用别名。

```
Select *, MATCH(tags) AGAINST ('search query' IN BOOLEAN MODE) as relevance
from scan HAVING relevance >0 ORDERY BY relevance DESC 
```

# asp.net - ASP.NET 调试 - 表单提交的值和查询字符串

> ID：12678064
> 
> 赞同：1
> 
> 时间：2012-10-01T17:28:06.807
> 
> 标签：asp.net

我一直在对 ASP 进行分类，并且对 ASP.NET 很陌生。在经典的 ASP 中，我通常是 response.write 所有提交的值，确保我能够捕获正确的值，将这些值放入 SQL 字符串中，然后 response.write 在插入 SQL Server 之前写入 SQL 字符串。这有助于在出现“SqlException”错误时进行故障排除，我只需在 Server Management Studio 中复制/粘贴整个查询字符串并运行它。

我想知道 ASP.NET 中是否有任何选项可以像经典 ASP 一样执行类似的操作。在 ASP.Net 中，它显示了一些错误，但没有显示我提交的值。例如，“[SqlException (0x80131904): Incorrect syntax near ']'”，我在代码中查看后知道查询中的问题在哪里，但我想将整个查询字符串（提交的值）写在屏幕上所以我可以在 SQL Server Management Studio 中复制/粘贴它，以便更轻松地对其进行故障排除。

对于像我这样的新手来说，调试错误/问题非常重要。如果在 ASP.Net 中没有像我上面描述的选项，请告知其他替代选项（如果您知道的话）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:48:04.297

在 ASP.NET 世界中，我使用 Visual Studio 功能在引发异常时中断。我只是获取在该行中执行的查询并将其粘贴到 SQL Server Management Studio 中。

即使处理了异常，也要在异常行中断，请按照说明进行操作

1.  转到调试菜单并选择异常
2.  在例外窗口中，请选中 CLR 例外行中的所有复选框。

由于您使用的是 SQL Server，因此您还可以使用 SQL Server 探查器来捕获查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:51:19.380

在 Microsoft IDE（至少是 Visual Studio）中，您可以单击左边距（如果您打开了行号，则在行号旁边）并设置断点。您可以通过点击绿色箭头（开始调试）或点击我认为是 F5 来测试您的代码。

当您在调试时遇到断点时，代码会停止执行，您可以将鼠标悬停在变量上（如 SQL 语句）并确保它是您所期望的。

您还可以使用 @Page 指令中的 Trace="True" 在您的页面中打开跟踪，并使用 Trace.Warn 在跟踪数据中呈现您的变量。（除了您要查找的内容之外，这还为您提供了大量其他数据）

# opencl - clEnqueueWriteBuffer 到底是做什么的？

> ID：12678066
> 
> 赞同：3
> 
> 时间：2012-10-01T17:28:09.357
> 
> 标签：opencl

在尝试提高某些 OpenCL 计算的性能时，我在 clEnqueueWriteBuffer 调用和紧随其后的 clEnqueueNDRangeKernel（取决于之前的数据传输）上使用了 OpenCL 运行时的分析功能：

```
clEnqueueWriteBuffer(cmdq, cl_buf, CL_FALSE, 0, size, data, 0, NULL, &write_ev);
clEnqueueNDRangeKernel(cmdq, ker_with_cl_buf_as_input_param, 2, NULL,
    work_sze, local_sze, 1, &write_ev, &ker_ev); 
```

这是 clGetEventProfilingInfo 返回的内容（我减去了初始时间并转换为微秒）：

```
 QUEUED   SUBMIT    START      END   END-START
write_ev        0  113.952  120.448  211.136      90.688
ker_ev    130.016  132.608  217.280  515.200     297.920 
```

我的问题是：

1.  为什么 clEnqueueWriteBuffer 在内存传输开始或提交之前没有返回？
2.  更重要的是，为什么实际提交转账需要这么长时间？？？

在我看来，只要内存传输可以立即开始，就可以获得 22% 的性能。clEnqueueWriteBuffer 在实际进行传输之前是否将数据复制到另一个主机内存区域？

附加信息：

我在 Tesla M2090 GPU 上使用 cuda 4.1 框架。

缓冲区是先前使用以下方法创建的：

```
cl_buf = clCreateBuffer(my_context, CL_MEM_READ_ONLY, size, NULL, NULL); 
```

编辑： clEnqueueReadBuffer 没有表现出这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:51:56.583

您可以尝试使用[NVidia OpenCL 最佳实践指南](http://www.nvidia.com/content/cudazone/CUDABrowser/downloads/papers/NVIDIA_OpenCL_BestPracticesGuide.pdf)第 3.1.1 节中所述的固定内存。

他们没有提到在使用可分页内存的情况下是否执行复制，但它可能会发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:20:45.577

写入应该在开始异步复制之前进行一些检查。此检查包括参数中的有效缓冲区类型、缓冲区未对齐、要写入的缓冲区分配等。

在 clEnqueueWriteBuffer 函数中，只有数据的原始副本是异步的，但准备工作不是。

# gcc - 将警告“从整数生成指针而不进行强制转换”作为错误

> ID：12678067
> 
> 赞同：4
> 
> 时间：2012-10-01T17:28:09.217
> 
> 标签：gcc, gcc-warning

我正在尝试将警告“警告：传递 'func' 的参数 1 使指针从不进行强制转换的整数”作为错误，但找不到选项的名称。

我已经尝试了所有警告

```
gcc -Q --help=warnings | grep enabled 
```

尝试执行 -Werror=XXXX 和列表中的选项名称，

甚至尝试禁用警告-Wno-XXXX，但无法禁用。

有人知道这个特定警告的选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T20:14:09.950

我也想知道它，所以我检查了 gcc 源代码（4.8.1）。在 c-typeck.c 中有以下代码发出警告：

```
 WARN_FOR_ASSIGNMENT (location, 0,
                         G_("passing argument %d of %qE makes "
                            "pointer from integer without a cast"),
                         G_("assignment makes pointer from integer "
                            "without a cast"),
                         G_("initialization makes pointer from "
                            "integer without a cast"),
                         G_("return makes pointer from integer "
                            "without a cast")); 
```

看到`0`第二个参数`WAIT_FOR_ASSIGNMENT`? 通常，这是诊断选项之一的标志。然而，在这种情况下它是零，所以我担心这意味着错误不能被专门制作为错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:02:18.517

正如 gcc 手册所述

> -Werror= 将指定的警告变成错误。附加了警告的说明符，例如 -Werror=switch 将 -Wswitch 控制的警告转换为错误。此开关采用否定形式，用于对特定警告否定 -Werror，例如 -Wno-error=switch 使 -Wswitch 警告不是错误，即使 -Werror 生效。您可以使用 -fdiagnostics-show-option 选项使用控制它的选项修改每个可控警告，以确定使用此选项的内容。

应使用 -fdiagnostics-show-option 开关报告任何受支持的选项。

如果你幸运的话，你的 gcc 版本可能会让你有选择地将警告变成错误的可能性。我使用的版本肯定没有，所以要么使用

> -Werror 将所有警告变成错误。

或者

> -pedantic-errors 与 -pedantic 类似，只是产生错误而不是警告。

可能是让 gcc 发出错误的唯一可能性。

# c# - 如何关闭当前表单并同时打开另一个表单

> ID：12678071
> 
> 赞同：0
> 
> 时间：2012-10-01T17:28:31.783
> 
> 标签：c#, winforms

我必须在我的项目中形成一个表单来连接，当用户和密码为真时我想要的主表单关闭当前登录表单并打开主表单，我创建了检查用户名和密码是否的代码是真的，如果检查是真的，我使用了一个 IF 语句，但问题是当我按下连接按钮时，两个表单都消失了这是我尝试使用的代码：

```
if (allowCnx)
{
    Form1 mainForm = new Form1();
    mainForm.Show();
    this.Close();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:31:32.697

这里可能的问题是您可能将登录表单设置为主表单（或在启动时运行的表单）。当该表单关闭时，整个应用程序都会关闭。

有很多解决方案，但我建议的一个是确保将`Form1`其设置为实际的启动表单，然后在它的表单加载方法中具有如下内容：

```
Hide();
LoginForm otherForm = new LoginForm();
otherForm.ShowDialog();
if(otherForm.Success)
{
    Show();
}
else
{
    Close();
} 
```

# java - 未指定列/属性名称的 JSP 显示标记

> ID：12678073
> 
> 赞同：0
> 
> 时间：2012-10-01T17:28:43.600
> 
> 标签：java, jsp, displaytag

假设您不知道此表中的列名，但想在其中显示所有列和值。有没有办法在不指定属性名称的情况下使用显示标签？

```
<display:column property="column_name" title="Column Name"/> 
```

我通常这样做，但这需要属性名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:10:37.363

您是否正在寻找类似这种[最简单案例，无列](http://www.displaytag.org/10/tut_basic.html)的内容？

# php - 验证时未定义的索引错误 - PHP

> ID：12678079
> 
> 赞同：-1
> 
> 时间：2012-10-01T17:29:18.870
> 
> 标签：php

嗨，首先让我告诉你我在这里发布我的代码的“摘要”不是因为我没有尝试解决我的问题或者我很懒惰。由于我对 PHP 的了解很少，现在努力破解错误 3.5 小时！

如果有人能指出为什么会发生此错误，我将不胜感激。该错误在第 4 行中显示未定义的错误。

```
 <?php 
    function validate(&$x,&$y)
    {if(isset($_POST['sub1']))
        {if($_POST['optMe'] == "") {echo "Empty dropdown"; return false;}}
    }
    function display($x,$y)
    {
    ?>
    <html>
    <head><title></title></head>
    <body>
    <form method="POST">
      <table id="tab2" border="1">
      <tr><td>
            <select id="optMe">
            <option value=""></option>
            <option value="one">one</option>
            <option value="two">two</option>
            </select>
      </td>
      <td><input type="submit" id="sub1" name="sub1" value="Click here"></td>
      </tr> 
      </table>
    </form>
    <form method="POST">
      <table id="tab2" border="1">
      <tr>
        <td><input type="text"></td>
        <td><input type="submit" id="send" name="send" value="send now"></td>
      </tr>     
      </table>
    </form>
    </body>
    </html>
    <?php
    }
    function process($x)
    {
    // I will add my code here to print something.
    }
    if ($_SERVER['REQUEST_METHOD'] == 'POST')
        {$formValues = $_POST;$formErrors = array();
        if (!validate($formValues, $formErrors))
        display($formValues, $formErrors);
        else
        process($formValues);
        }
        else
        display(null, null);
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:32:42.367

你`<select>`没有`name`属性，所以它没有被发送，所以`$_POST['optMe']`不存在，所以你得到一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:32:53.987

您没有为表单字段提供名称属性：

```
<select id="optMe"> 
```

应该：

```
<select name="optMe" id="optMe"> 
```

# maven - Maven web 项目 groupId 路径丢失

> ID：12678081
> 
> 赞同：0
> 
> 时间：2012-10-01T17:29:21.207
> 
> 标签：maven

我正在通过运行以下命令创建 Maven Web 项目：

`mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-webpp -DarchetypeArtifactId=maven-archetype-webapp`

此命令创建 my-webapp/src/main/resources 和 my-webapp/src/main/webapp 文件夹。但是 groupId 路径：com.mycompany.app 丢失了。

行为正常还是我错过了做某事？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:48:26.743

这只是一种正常行为。打开您创建的 pom.xml 以查看组 ID 详细信息。

当您将项目上传到存储库时，它非常有用。Group Id 主要用于区分您的项目与存储库中的其他项目。

请阅读[http://maven.apache.org/pom.html#Maven_Coordinates](http://maven.apache.org/pom.html#Maven_Coordinates)

# java - 使用 @Parameters 的 Junit 来测试文件中的数据

> ID：12678082
> 
> 赞同：4
> 
> 时间：2012-10-01T17:29:29.887
> 
> 标签：java, oracle, junit

我正在尝试从文件中读取数据并使用这些数据来测试 procs。甚至要测试的 proc 也是根据文件的内容确定的。

Sample.txt 是我从中读取数据的文件，该文件包含以下数据

```
testproc=sample_check('N')
output=yes
type=function
testproc=sample_check('N')
output=yes
type=function
testproc=sample_check('N')
output=yes
type=function 
```

下面的程序尝试读取文件并将其内容填充到二维字符串数组中。

```
@RunWith(value = Parameterized.class)
public class Testdata extends Testdb {

    public String expected;
    public String actual;

    @Parameters
    public static Collection<String[]> getTestParameters() {
        String param[][] = new String [3][3];
        String temp[] = new String [3];
        int i = 0;
        int j = 0;
        try{
            BufferedReader br = new BufferedReader(new FileReader("sample.txt"));
            String strLine;
            String methodkey       = "testproc";
            String methodtypekey   = "type";
            String methodoutputkey = "output";
            String method = "";
            String methodtype = "";
            String methodoutput = "";

            //Read File Line By Line
            while ((strLine = br.readLine()) != null)
            {
                StringTokenizer st = new StringTokenizer(strLine, "=");
                while(st.hasMoreTokens())
                {
                    String key = st.nextToken();
                    String val = st.nextToken();
                    if (key.trim().equalsIgnoreCase(methodkey))
                    {
                        method = val.trim();
                        temp[j] = "SELECT " + method + " FROM dual";
                        j++;
                    }
                    else if (key.trim().equalsIgnoreCase(methodoutputkey))
                    {
                        methodoutput = val.trim();
                        temp[j] = methodoutput;
                        j++;
                    }
                    else if (key.trim().equalsIgnoreCase(methodtypekey))
                    {
                        methodtype = val.trim();
                        if (methodtype.trim().equalsIgnoreCase("function"))
                        {
                            System.out.println(i + " " + method);
                            param[i] = temp;
                            i++;
                            j = 0;
                        }
                    }
                }

            }
        }
        catch (Exception e){//Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }

        return Arrays.asList(param)           ;
    }

    public Testdata(String[] par) {
        this.expected = par[0];
        this.actual = par[1];
    }

    @Test
    public void test_file_data() //throws java.io.IOException
    {
        testString("Output should be"+expected , expected, actual);
    }

} 
```

我收到一个错误 java.lang.IllegalArgumentException: wrong number of arguments

testString 是一种连接数据库以检查实际值是否与预期结果相符的方法。这需要两个字符串值作为参数。

我的问题是 return Arrays.asList(param) 和方法 public Testdata(String[] par) 应该如何？

我使用它进行了测试，它工作正常，但由于我从文件中读取，我想使用一个需要使用 return Arrays.asList 返回的数组

```
return Arrays.asList(new String[][]{
            { "yes", "SELECT sample_check('N') FROM dual"},
            { "yes", "SELECT sample_check('N') FROM dual"},
            { "yes", "SELECT sample_check('N') FROM dual"}
    })           ;
}

public Testdata(String expected,
                           String actual) {
    this.expected = expected;
    this.actual = actual;
} 
```

关于让它工作的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:33:20.960

你的构造函数是错误的。您需要与您的项目相同数量的参数`String[]`

```
public Testdata(String[] par) {
    this.expected = par[0];
    this.actual = par[1];
} 
```

这应该是：

```
public Testdata(String expected, String actual, String somethingElse) {
    this.expected = expected;
    this.actual = actual;
} 
```

请参阅[参数化的 javadoc](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runners/Parameterized.html)：

> 例如，要测试斐波那契函数，请编写：

```
@RunWith(Parameterized.class)
public class FibonacciTest {
    @Parameters
    public static List<Object[]> data() {
        return Arrays.asList(new Object[][] {
                { 0, 0 }, { 1, 1 }, { 2, 1 }, { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 }
        });
    }

    private int fInput;
    private int fExpected;

    public FibonacciTest(int input, int expected) {
        fInput= input;
        fExpected= expected;
    }

    @Test
    public void test() {
        assertEquals(fExpected, Fibonacci.compute(fInput));
    }
} 
```

> FibonacciTest 的每个实例都将使用两个参数的构造函数和 @Parameters 方法中的数据值来构造。

# r - 如何做长度为5的运行中位数

> ID：12678086
> 
> 赞同：0
> 
> 时间：2012-10-01T17:29:51.570
> 
> 标签：r

如何计算长度为 5 的运行中位数？我尝试了该`smooth`功能，但它只运行长度为 3 的中位数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T17:40:58.347

尝试这个。

```
library(zoo)
x <- 1:100
rollmedian(x,5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-31T15:11:24.903

`stats`对于那些不想安装其他软件包的人，在来自软件包的基础 R中：

```
runmed(1:100, 5) 
```

该参数`endrule`允许控制开始值和结束值的策略。

```
runmed(1:10, 5, endrule = "keep")
> [1]  1  2  3  4  5  6  7  8  9 10

runmed(1:10, 5, endrule = "constant")
> [1] 3 3 3 4 5 6 7 8 8 8

runmed(1:10, 5, endrule = "median")
> [1]  1  2  3  4  5  6  7  8  9 10 
```

# vhdl - 是否可以在 ModelSim 中编写仿真验证程序？

> ID：12678087
> 
> 赞同：0
> 
> 时间：2012-10-01T17:29:53.407
> 
> 标签：vhdl, hdl, modelsim

我正在使用[ModelSim](http://www.model.com)来设计和模拟 CPU 架构。对于像我这样了解这一点的人，您可能也知道，在尝试处理您面前的所有这些信号时，验证仿真数据确实很困难。

有没有办法自动运行模拟并执行一些验证程序，以查看我获得的数据是否正确？

例如，我有一个组件，当被一个信号刺激时，在下一个时钟，它会返回否定的信号。我想验证这一点。如何？（当然无需手动检查屏幕上的信号）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T17:54:51.030

是的，这被称为*自检测试台*。这个想法是编写一个新的 VHDL 文件，在其中实例化要测试的组件，将激励应用于组件并使用*断言*验证输出。做到这一点的基本方法是使用*assert*语句，如下所示：

```
assert my_signal = x"3456" report "my_signal has the wrong value!" severity ERROR; 
```

还可以尝试查看 PSL，这是另一种用于验证 VHDL 代码行为的语言。Modelsim 支持 VHDL 断言和 PSL。

# performance - 哈希函数的改进

> ID：12678088
> 
> 赞同：2
> 
> 时间：2012-10-01T17:29:54.110
> 
> 标签：performance, actionscript-3, hash, vector, spatial

它是关于 2d 的空间散列...（请原谅我说的不是空间散列）
我们将 x 和 y 坐标转换为表示存储桶（组）的数组中的索引。
我读过和我自己使用的所有论文/文章：
`int grid_cell = x/cell_size + y/cell_size*width;`

**在 AS3 中，预先计算每个 x 和 y 的索引并将结果存储在 2 个向量中是否更有效**，例如*xMap:Vector.<int> contains x/cell_size和 yMap:Vector.<int> y/cell_size*width*然后使用以下方法检索它：
`int grid_cell = xMap[x] + yMap[y]; // grid being the array of buckets`

**简而言之：**从向量中检索项目是否比AS3中的*y/cell_size*width等计算更快？*
我自己的基准测试结果波动很大，由我来决定，这是一个性能关键的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:27:02.747

除非向量真的非常大，否则查找值会比计算值更快。

# c# - 导出到 excel 生成零 (0) 字节文件

> ID：12678090
> 
> 赞同：0
> 
> 时间：2012-10-01T17:30:03.803
> 
> 标签：c#, asp.net, export-to-excel

我已经编写了一个函数来将网格数据导出到 excel 中。当网格有大约 1600 行时，导出函数正在生成 0byte 文件。但是当行数较少时，它可以正常工作。我的导出代码如下。我没有得到如何/什么调试！这是因为响应流大小吗？有人可以告诉我一种方法，如何解决这个问题。

```
 Response.Clear();
       Response.AddHeader("content-disposition", "attachment; filename=" + "FileName" + ".xls");
       Response.Charset = "";          
       Response.Cache.SetCacheability(HttpCacheability.NoCache);
       Response.ContentType = "application/vnd.xls";
       System.IO.StringWriter stringWrite = new System.IO.StringWriter();
       System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
       grdMain.RenderControl(htmlWrite);

       Response.Write(stringWrite.ToString());
       Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:35:59.440

尝试这个：

```
Response.Write(stringWrite.ToString());
Response.Flush();
Response.End(); 
```

# asp.net - TinyMCE 允许多种上传大小

> ID：12678093
> 
> 赞同：1
> 
> 时间：2012-10-01T17:30:16.893
> 
> 标签：asp.net, tinymce

我工作的公司正在.NET 环境中运行 TinyMCE，供我们的商家上传文件。目前，页面上加载的最大上传大小变量设置为 25mb，但我知道根据商家的包裹类型，这可能会有所不同。我知道它在配置文件中的设置位置，只是想知道以条件方式设置此值的最佳方法是什么。

# ruby - 具有 em-synchrony 和 PubSub 问题的 Ruby Redis

> ID：12678094
> 
> 赞同：2
> 
> 时间：2012-10-01T17:30:18.173
> 
> 标签：ruby, asynchronous, redis, eventmachine

我正在将 Cramp 框架与 Redis gem 和 em-synchrony 以及 WebSockets 一起使用来构建与聊天相关的 Web 应用程序，但遇到了一些问题。

考虑以下代码：

```
class DrawingAction < Cramp::Action
  use_fiber_pool

  self.transport = :websocket

  on_start :user_joined
  on_data :message_received
  on_finish :user_left

  def user_joined
    # Create pub/sub clients for the user who just joined
    initialize_pub_sub
  end

 def initialize_pub_sub
   @@redis_client ||= Redis.new(:driver => :synchrony)

   @publisher ||= Redis.new(:driver => :synchrony)
   @subscriber ||= Redis.new(:driver => :synchrony)
 end

def handle_join(join_data)
  room_name = join_data[:room_name]

  @subscriber.subscribe(room_name) do |on|
    on.message do |channel, message|
      render message
    end
  end

  puts "fetching history items"
  history_items = history_for_room(room_name)
  render "{ \"history\": true, \"time:\": #{Time.now.to_f}, \"data\": [#{history_items.join(',')}] }"
end 
```

`handle_join`正在从`on_message`我的 Cramp 操作的事件处理程序中调用，因为 cramp 支持同步和光纤，在客户端加入频道后，@subscriber.subscribe 块像它应该的那样以非阻塞方式运行，这意味着它接受在 pubsub 上获取的消息通道，并且不会阻止进程中的其他所有内容（应用程序没有被阻止），但它不会移动到下一行（`puts "fetching history items"`），这对我来说是一个主要问题，有没有人暗示可以做什么纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:49:58.157

我没有发现 Cramp 这么有用，可以使用普通的 Sinatra，[这里](https://gist.github.com/3377714)有一个例子。考虑添加`rack-fiber_pool`到混合物中。同步适配器不能用于相同的目的（[示例](https://gist.github.com/3217183)）。

# php - 使用 .load 的 JQuery Mobile 动态页面让我必须刷新才能看到内容

> ID：12678098
> 
> 赞同：1
> 
> 时间：2012-10-01T17:30:30.497
> 
> 标签：php, jquery-mobile

我正在尝试跨域加载页面内容并将结果加载到 div 中。当我第一次访问该页面时，没有加载任何内容。当我刷新时，无论我查看哪篇文章，它都可以正常工作并且每次我访问该页面时都可以正常工作。我需要在 DOM 完全加载后找到一种方法来进行加载吗？

像这样的链接：/news_item.php?article_id=4379

---- news_item.php -----

```
 $(document).bind('pageinit', function(){
   $.mobile.ajaxEnabled = false; 
   $("#gametime").load('proxy.php?url=http://www.newsdomain.com/news/icehogs/?article_id=<?php echo $_REQUEST["article_id"] ?>  .article', function () {

     $("#gametime a").replaceWith( function() { return $(this).text(); });
     $("#gametime .links").replaceWith('');
     $("#gametime .social").replaceWith('');

 });

}); 
```

----- proxy.php ------

```
<?php echo file_get_contents($_GET['url']);?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:06:15.563

将您的 javascript 文件放在页面 div 中，例如：

```
<div id="pageid" data-role="page">  
    <script src="javascriptfilename"></script>
    <div data-role="content"></div> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:35:41.847

是的，您可以，将您的代码放入`$(function(){});`事件中。

# python - 阿克曼函数理解

> ID：12678099
> 
> 赞同：10
> 
> 时间：2012-10-01T17:30:35.970
> 
> 标签：python, function, recursion

我发现很难理解阿克曼函数是如何工作的。我认为我对递归的理解有缺陷？

这是Python中的代码：

```
 def naive_ackermann(m, n):
    global calls
    calls += 1
    if m == 0:
        return n + 1
    elif n == 0:
        return naive_ackermann(m - 1, 1)
    else:
        return naive_ackermann(m - 1, naive_ackermann(m, n - 1)) 
```

如果我执行 naive_ackermann(3,4) 的函数调用，我如何以及为什么最终得到 125？

评论将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T18:13:08.553

**A(3,4)**的计算并不像最初从参数的小值中看到的那样简单或短。Ackermann 函数的复杂性（迭代步数）随其参数增长得非常快，计算结果也是如此。

[这是来自Wikipedia](http://en.wikipedia.org/wiki/Ackermann_function)的 Ackermann 函数的定义：

![在此处输入图像描述](../Images/423a6153480b02ae760d7444ab1e7730.png)

正如你所看到的，在每次迭代中，**m**的值都会减小，直到它在最后一步达到**0 ，此时****n** (+1) 的最终值会给你答案。因此，对于答案，您只需要跟踪递归迭代中**n**的变化情况。关于 Ackermann 函数增长如此迅速的原因，您可以查看 wiki 的[**这个**](http://en.wikipedia.org/wiki/Ackermann_function#Expansion)小节。

正如 Joran Beasley 已经提到的，**A(3,4)**确实是 125，正如维基百科中所写的那样。然而，得到这个结果的过程并不是很短。事实上，正如我发现的那样，需要通过递归**315** Ackermann 函数值来计算*A(3,4)*，所需的迭代次数大致与此成正比。

如果您仍希望可视化如何得出此结果，您可以查看[**此页面**](http://www.gfredericks.com/sandbox/arith/ackermann)，该页面为每个递归步骤的计算提供动画。但请注意，*A(3,4)*将永远完成此处的动画，但至少您可能会通过较小的参数对这个过程有所了解。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-01T18:30:24.617

这是一个打印解释的版本：

```
def A(m, n, s="%s"):
    print s % ("A(%d,%d)" % (m, n))
    if m == 0:
        return n + 1
    if n == 0:
        return A(m - 1, 1, s)
    n2 = A(m, n - 1, s % ("A(%d,%%s)" % (m - 1)))
    return A(m - 1, n2, s)

print A(2,2) 
```

使用参数 2,2 的输出是这样的。（使用 3,4 已经有点太多了）

```
A(2,2)
A(1,A(2,1))
A(1,A(1,A(2,0)))
A(1,A(1,A(1,1)))
A(1,A(1,A(0,A(1,0))))
A(1,A(1,A(0,A(0,1))))
A(1,A(1,A(0,2)))
A(1,A(1,3))
A(1,A(0,A(1,2)))
A(1,A(0,A(0,A(1,1))))
A(1,A(0,A(0,A(0,A(1,0)))))
A(1,A(0,A(0,A(0,A(0,1)))))
A(1,A(0,A(0,A(0,2))))
A(1,A(0,A(0,3)))
A(1,A(0,4))
A(1,5)
A(0,A(1,4))
A(0,A(0,A(1,3)))
A(0,A(0,A(0,A(1,2))))
A(0,A(0,A(0,A(0,A(1,1)))))
A(0,A(0,A(0,A(0,A(0,A(1,0))))))
A(0,A(0,A(0,A(0,A(0,A(0,1))))))
A(0,A(0,A(0,A(0,A(0,2)))))
A(0,A(0,A(0,A(0,3))))
A(0,A(0,A(0,4)))
A(0,A(0,5))
A(0,6)
7 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T17:36:34.830

```
ackerman(3,4) 

=ackerman(2,ackerman(3,3)) = ackerman(2,61)    #ackerman(3,3) = 61 ...
=ackerman(1,ackerman(2,60)) = ackerman (1,123)  #ackerman(2,60) = 123...
=ackerman(0,ackerman(1,122)) = ackerman (0,124)  #ackerman(1,122) = 124...
= 124+1 = 125 
```

在此处查看[http://goo.gl/jDDEA](http://goo.gl/jDDEA) 进行可视化`ackerman(2,3)` （可视化 3,4 太长了）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-27T17:58:29.863

```
def ackermann(m,n):
    """computes the value of the Ackermann function for the input integers m and n.
       the Ackermann function being:
       A(m,n)=n+1               if m=0
             =A(m-1,1)          if m>0 and n=1
             =A(m-1,A(m,n-1)    if m>0 and n>0"""
    if m==0:
        print (n+1)
        return n+1
    elif m>0 and n==0:
        print ("ackermann(",m-1,",",1,")")                                          #just 2 chk intrmdt val. and no. of steps invlvd.can be dltd if necessary
        return ackermann(m-1,1)
    elif m>0 and n>0:
        print ("Ackermann(",m-1,",","Ackermann(",m,",",n-1,")",")")                  #just 2 chk intrmdt val. and no. of steps invlvd.can be dltd if necessary
        return ackermann(m-1,ackermann(m,n-1)) 
```

只需对您的代码进行简单修改，以便程序打印每个步骤而不仅仅是结果。代码应该看起来有点像本页末尾的内容。运行它，（可能需要几秒钟），然后您就会了解如何计算 Ackermann 函数。

# javascript - 自动设备/用户识别

> ID：12678101
> 
> 赞同：0
> 
> 时间：2012-10-01T17:30:51.820
> 
> 标签：javascript, user-identification

我需要开发一个网页，它会自动识别“授权用户”，并且只有在完成肯定识别后才会继续。因为它是手机，我不想要任何“标准”的登录页面。出于某种原因，我不想要任何 cookie。因此，我正在考虑一个本地文件，授权用户将其复制到本地存储上，JavaScript 验证该文件并将请求发送回服务器。不幸的是，我还没有发现任何这样的可能性。所以，我在考虑本地 JS 文件，初始页面会重定向到本地文件，如果存在，它将 Web 浏览器重定向到适当的服务器位置。不幸的是，我发现一篇文章说出于安全原因，无法在 http:// 和 file:// 之间进行重定向。你们中有人知道如何进行识别任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:58:35.493

按照您的方法（不使用 cookie，使用文件进行身份验证），用户可以在他的手机中选择一个文件，然后您可以生成该文件的哈希值并与设备的签名一起存储在您的服务器中。

然后你可以：

1.  让用户*完全*选择（例如，如果它是一个，则不能编辑`.txt`）相同的文件进行登录。
2.  只要文件存在且哈希正确，就自动登录用户。

无需 cookie、创建用户/通行证或上传文件。

有用的网址：

*   [如何在移动设备上为大文件获取快速文件哈希算法](https://stackoverflow.com/questions/9270819/how-to-get-a-fast-file-hashing-algorithm-for-large-files-on-a-mobile-device)
*   [Android，从文件中计算 SHA-1 哈希，最快的算法](https://stackoverflow.com/questions/5564643/android-calculating-sha-1-hash-from-file-fastest-algorithm)
*   [在 Android/Java 和 C# 中计算 SHA256 哈希](https://stackoverflow.com/questions/9661008/compute-sha256-hash-in-android-java-and-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:49:34.870

查看 Mozilla 的[角色](https://login.persona.org/about)。我相信它基于 BrowserID。

# ruby-on-rails-3 - 存在，PubNub + Ruby

> ID：12678102
> 
> 赞同：0
> 
> 时间：2012-10-01T17:30:53.097
> 
> 标签：ruby-on-rails-3, pubnub

我正在尝试使用 PubNub 的存在功能并将接收到的信息作为普通消息转发回来。下面是我的订阅功能，它工作正常，我的 here_now 没有给我任何东西。我想我想知道它们是如何以及为什么不同的。正确实施的指针也很有价值。

```
pubnub.here_now({
  'channel'  => @channel, 
  'callback' => lambda do |x|
## Relay Message
   sendMessage(x)
return true
end
})

pubnub.subscribe({
  'channel'  => @channel, 
  'callback' => lambda do |message|
## Relay Message
   sendMessage(message)        
return true
end
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:54:04.390

对于您提供的非常简单的测试，您需要先在一个 ruby​​ 脚本中运行订阅，然后在 here_now 脚本中单独运行发布脚本。

# java - 带有语法高亮和行号的文本编辑器？

> ID：12678104
> 
> 赞同：6
> 
> 时间：2012-10-01T17:31:01.910
> 
> 标签：java, swing, syntax-highlighting, jeditorpane, line-numbers

即使对于一个团队项目来说，这也有点挑战性，更不用说单人实现了，但我试图用`JEditorPane`. 我偶然发现了[**这个**](http://ostermiller.org/syntax/editor.html)已经停产的东西，我很难理解里面的所有 lexer 文件和 .lex 的东西。我什至在一些博客中发现这个项目后来被其他团队接手，但又一次停止了。我不需要它太花哨，比如有代码折叠和东西（即使我很想知道如何做到这一点），但我至少需要一个**基本的语法突出显示**和几乎很多**行号**例如，在最左侧，就像 Notepad++ 一样。请记住，我只需要它来突出显示 Java 源代码，至少现在是这样。

我正在寻找的要么是一个教程，一个有据可查的示例和示例代码，一个预制的包，甚至是 NetBeans 的工具都可以做到这一点，我不需要从头开始编写的源代码，我只需要一个可以使用的实现。提前致谢！

PS这不会是商业的或太大的，不要问我为什么要在有这么多编程编辑器的情况下重新发明轮子，我正在学习，这对我来说是一个很好的练习！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T03:18:49.167

[RSyntaxTextArea](http://bobbylight.github.io/RSyntaxTextArea/)已获得 BSD 许可并支持您的要求，以及代码折叠等。使用非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-30T02:51:04.260

好吧，我从事过一个类似的项目，这就是我想出的。就行号而言，我使用了附加到实际文本窗格的滚动窗格。然后滚动窗格使用以下代码更改数字：

```
public class LineNumberingTextArea extends JTextArea
{
private JTextPane textArea;

/**
 * This is the contructor that creates the LinNumbering TextArea.
 *
 * @param textArea The textArea that we will be modifying to add the 
 * line numbers to it.
 */
public LineNumberingTextArea(JTextPane textArea)
{
    this.textArea = textArea;
    setBackground(Color.BLACK);
    textArea.setFont(new Font("Consolas", Font.BOLD, 14));
    setEditable(false);
}

/**
 * This method will update the line numbers.
 */
public void updateLineNumbers()
{
    String lineNumbersText = getLineNumbersText();
    setText(lineNumbersText);
}

/**
 * This method will set the line numbers to show up on the JTextPane.
 *
 * @return This method will return a String which will be added to the 
 * the lineNumbering area in the JTextPane.
 */
private String getLineNumbersText()
{
    int counter = 0;
    int caretPosition = textArea.getDocument().getLength();
    Element root = textArea.getDocument().getDefaultRootElement();
    StringBuilder lineNumbersTextBuilder = new StringBuilder();
    lineNumbersTextBuilder.append("1").append(System.lineSeparator());

    for (int elementIndex = 2; elementIndex < root.getElementIndex(caretPosition) +2; 
        elementIndex++)
    {
        lineNumbersTextBuilder.append(elementIndex).append(System.lineSeparator());
    }
    return lineNumbersTextBuilder.toString();
}
} 
```

语法高亮不是一件容易的事，但我开始的目的是能够根据一些包含某种语言的所有关键字的文本文件来搜索字符串。基本上基于文件的扩展名，该函数将找到正确的文件并在该文件中查找包含在文本区域中的单词。

# common-lisp - 如何使用包含 & 符号的 cxml 和 stp 解析 XML

> ID：12678106
> 
> 赞同：0
> 
> 时间：2012-10-01T17:31:14.177
> 
> 标签：common-lisp, stp

我想解析以下 XML 代码：

```
(cxml:parse "<BEGIN><URL>www.some.de/url?some=data&bad=stuff</URL></BEGIN>" (stp:make-builder)) 
```

这导致

```
 #<CXML:WELL-FORMEDNESS-VIOLATION "~A" {1003C5E163}> 
```

因为 '&' 是一个 XML 特殊字符。但如果我`&amp;?`改用，结果是：

```
(cxml:parse "<BEGIN><URL>www.some.de/url?some=data&amp;bad=stuff</URL></BEGIN>" (stp:make-builder))
=>#.(CXML-STP-IMPL::DOCUMENT
   :CHILDREN '(#.(CXML-STP:ELEMENT
                  #| :PARENT of type DOCUMENT |#
                  :CHILDREN '(#.(CXML-STP:ELEMENT
                                 #| :PARENT of type ELEMENT |#
                                 :CHILDREN '(#.(CXML-STP:TEXT
                                                #| :PARENT of type ELEMENT |#
                                                :DATA "www.some.de/url?some=data")
                                             #.(CXML-STP:TEXT
                                                #| :PARENT of type ELEMENT |#
                                                :DATA "&")
                                             #.(CXML-STP:TEXT
                                                #| :PARENT of type ELEMENT |#
                                                :DATA "bad=stuff"))
                                 :LOCAL-NAME "URL"))
                  :LOCAL-NAME "BEGIN"))) 
```

这不完全是我所期望的，因为应该只有一个 CXML-STP:TEXT 子节点的 DATA "www.some.de/url?some=data&bad=stuff"

我该如何解决这个错误（？）行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:02:03.467

这种行为虽然不是很方便，但实际上也存在于许多其他 XML 解析器中。可能它的原因是能够解析任意 XML 实体并将一些用户定义的规则应用于它们。虽然，它可能只是解析器实现的副产品。我还没有找到。

对于解析器的 SAX 变体，我采用了以下方法：

```
(defclass my-sax (sax:sax-parser-mixin)
  ((title :accessor title :initform nil)
   (tag :accessor tag :initform nil)
   (text :accessor text :initform "")))

(defmethod sax:start-element ((sax my-sax) namespace-uri local-name
                              qname attributes)
  (with-slots (tag tagcount text) sax
              (setf tag local-name
                    text "")))

(defmethod sax:characters ((sax my-sax) data)
  (with-slots (title tag text) sax
    (switch (tag :test 'string=)
      ("text"  (setf text (conatenate 'string text data)))
      ("title" (setf title data)))))

(defmethod sax:end-element ((sax my-sax) namespace-uri local-name qname)
  (with-slots (title tag text) sax
    (when (string= "text" local-name)
      ;; process (text sax)
    ))) 
```

即我收集文本`sax:characters`并在`sax:end-element`. `text`在 STP 中，您可能只需连接相邻元素即可更轻松地摆脱困境。

# c++ - 我可以告诉解决方案如何使用 C 编写此格式化数据

> ID：12678112
> 
> 赞同：0
> 
> 时间：2012-10-01T17:31:55.220
> 
> 标签：c++, c, visual-studio-2010, visual-c++

我必须将我从服务器接收的二进制数据写入二进制文件，所以我编写了以下函数：-

```
int WriteToDataFile1(char buf[])
{
    char szDate[12];
    char szTime[12];
    char buf_buff[2500];
    _strdate( szDate );
    _strtime( szTime );
    memset(buf_buf, 0, sizeof(buf_buff));
    FILE* log = fopen(BufferFilePath11, "a+");
    if (log == NULL)
        return -1;
    fwrite(buf,1,135,log); //working fine
    fclose(log);
    return 0;
} 
```

我遇到了两个问题：- 1）我必须编写像 DATE::TIME::DATA IS::DATA 这样的二进制数据。我无法执行以下操作：-

```
sprintf(buf_buf,"%s::%s::DATA IS::", szDate, szTime,buf); 
```

因为 sprintf 将在遇到“buf”中的空字符时终止。服务器总是有 135 字节的数据，但有时第 17 字节或其他字节有空字符，因此 sprintf 将终止字符串，我不会写入完整的二进制数据。我的第二个问题是 fwrite 我的数据是一行，即使第二次 WriteToDataFile1() 函数，而我应该写在第二行我可以告诉解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:36:50.963

您的第一个问题（无法使用 sprintf）不是问题，它按预期工作。您不能使用 sprintf 将二进制数据放入缓冲区。您需要以另一种方式将数据放在那里（可能使用 memcpy）。

至于你的第二个问题，数据是“一行”——你说你正在写一个二进制文件；有零线。如果你想写一个行终止字符（\n、\r 等），那么你可以在你写的其他数据之后把它写出来。

# actionscript-3 - 如何在 As3 中禁用 ScrollPane 的鼠标滚轮滚动？

> ID：12678114
> 
> 赞同：1
> 
> 时间：2012-10-01T17:32:03.133
> 
> 标签：actionscript-3, scrollpane

我正在使用 ScrollPane 选项来禁用垂直条的滚轮滚动功能。试过了`myScrollPane.mouseEnabled = false;`，`myScrollPane.mouseWheelEnabled = false;`没有运气。此外，`myScrollPane.verticalLineScrollSize = 0;`似乎也没有达到预期的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:09:57.883

Okkkk 这应该是你要找的！

```
myScrollPane.addEventListener(MouseEvent.MOUSE_WHEEL, disableScroll, true);
function disableScroll(e:MouseEvent):void
{
    e.stopPropagation();
} 
```

# iphone - 有没有办法在运行时检索应用程序的捆绑种子 ID？

> ID：12678120
> 
> 赞同：1
> 
> 时间：2012-10-01T17:32:27.123
> 
> 标签：iphone, app-store, bundle, nsbundle

我正在开发两个使用钥匙串在它们之间共享数据的应用程序，目前这需要硬编码捆绑种子 ID 才能访问钥匙串。但是，这很脆弱，因为种子会根据应用程序的签名方式而变化。有没有办法在运行时确定种子 ID？

# php - 将 html 图像数据 url 转换为托管图像

> ID：12678121
> 
> 赞同：0
> 
> 时间：2012-10-01T17:32:28.543
> 
> 标签：php, html

我有一个页面，它从快照工具生成图像数据 url，并通过 PHP 将生成的字符串插入 MySQL 数据库。稍后，我有一个页面可以获取并使用这些图像。这很好，除非我需要将生成的 html 保存到我的服务器以进行一些后期处理，并且图像数据 url 的长度让我头疼，并使 html 文件超过 8 到 10 MB，这会减慢整个过程。图像看起来像这样：

```
<img src="data:image/png:base64,iVBORw0K43+gAA4u..."> 
```

有一个非常长的字符串使得生成的 html 非常大。有没有办法将它作为 png 在我的服务器上托管，所以链接是一个正常的图像？像这样的东西：

```
<img src="http://www.mysite.com/image1.png"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:46:26.703

将base64转换为原始图像怎么样，您要做的是将图像作为实际文件保存到服务器。

**php将base64数据转换为图像**

```
 function toImage($base_code){
    $img_file = imagecreatefromstring(base64_decode($base_code));
    imagejpeg($img_file, 'new.jpg');
} 
```

**调用函数**

```
echo toImage($encoded_image); 
```

确保只传递 base64 编码的字符串而不传递图像标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:36:42.380

您可以将文件保存在其他地方，但我的猜测是您需要图像存在于数据库中。如果您将文件保存在其他地方，您的磁盘需求就会增加一倍。

在任何情况下，对此的一般解决方法是将该图像字符串保存到磁盘，并在您的数据库中跟踪路径。然后，当您生成 HTML 时，您将使用 DB 中的路径，而不是 DB 中的二进制数据。

# objective-c - 检查 NSArray 值

> ID：12678122
> 
> 赞同：0
> 
> 时间：2012-10-01T17:32:33.580
> 
> 标签：objective-c, arrays, if-statement

我有一个 NSArray（RSIatAddr），我想检查给定索引处的对象是否 = 0（或其他任意常量），但以下代码没有给我任何警告/错误；但抛出异常

```
if ([[RSIatAddr objectAtIndex:j] isEqualToNumber:nil]) {
    [sumRSI addObject:[NSNumber numberWithInt:[[RSIatAddr objectAtIndex:j]intValue]*
    [[sumRSI objectAtIndex:j] intValue]]]; } 
```

我得到的错误：

```
2012-10-02 00:42:00.266 NetSearch+DetectLocation[3741:707] 
*** Terminating app due to uncaught exception 
'NSInvalidArgumentException', reason: '-[__NSCFNumber compare:]: nil argument' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:37:29.553

`isEqualToNumber:`将 a`NSNumber`作为参数，而不是您传递的整数。

您正在使用的整数`0`恰好是 的值`nil`，但任何整数都极不可能成为 a 的有效指针值`NSNumber`，因此也会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:37:15.860

如果没有看到实际填充您的数组的代码，则该数组可能持有与您预期不同的类型。尝试在该行代码之前设置一个断点，然后键入“po [[RSIatAddr objectAtIndex:j] class]”并查看实际存在的内容，然后您也可以在调试窗口中尝试您的 isEqualToNumber 以查看是否成功。

我刚刚在一个新的 iOS 应用程序的 AppDelegate 中实现了这个，它可以工作：

```
NSArray *array = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:0], [NSNumber numberWithInt:1], nil];
NSLog(@"%@", array);

for (NSNumber *num in array) {
    if ([num isEqualToNumber:[NSNumber numberWithInt:0]]) {
        NSLog(@"Equal");
    } else {
        NSLog(@"Not Equal");
    }
} 
```

# php - 从启动页面 magento 重定向到主页

> ID：12678123
> 
> 赞同：0
> 
> 时间：2012-10-01T17:32:34.583
> 
> 标签：php, magento, redirect

我正在尝试从启动（年龄验证）页面重定向到我的主页，它只是不断弹出相同的年龄验证页面。

我在根文件夹中有ageVerify.php 脚本，在我的模板文件页面顶部有另一个脚本。在有人点击“是的，我 18 岁”后，我只需要找到正确的文件结构格式即可重定向

下面的代码在添加到我的 column1.phtml 文件顶部时不起作用 - 它只是不断返回并调用 verify.php 脚本。任何想法都会非常有帮助！

```
<?php

function verified()
{
    $redirect_url='http://www.johnsoncreeksmokejuice.com.vhost.zerolag.com/verify.php';
    $expires=-1;
    session_start();

    $validated=false; 

    if (!empty($_COOKIE["verified"])) {
        $validated=true;
    }
    if (!$validated && isset($_SESSION['verified'])) {
        $validated=true;
    }
    if (is_numeric($expires) && $expires==-1 && !isset($_SESSION['verified'])) {
        $validated=false;
    }
    if ($validated) {
        return;
    }
    else {
        $redirect_url=$redirect_url."?return=index.php&x=".$expires;
        Header('Location: '.$redirect_url);
        exit(0);
    }
}

verified();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:26:03.160

如果 $_SESSION 没有设置总是会评估这个

```
 if (is_numeric($expires) && $expires==-1 && !isset($_SESSION['verified'])) {
        $validated=false;
    } 
```

只需修复它，应该可以工作。假设其他一切都很好，我会更换

```
if (!empty($_COOKIE["verified"])) {
        $validated=true;
    }
    if (!$validated && isset($_SESSION['verified'])) {
        $validated=true;
    }
    if (is_numeric($expires) && $expires==-1 && !isset($_SESSION['verified'])) {
        $validated=false;
    } 
```

经过：

```
if ( (isset($_COOKIE["verified"] && !empty($_COOKIE["verified"])) OR isset($_SESSION['verified']) ) {
    $validated=true;
} 
```

因此，如果用户有一个非空的“已验证”cookie 或“已验证”会话集，则假定他已通过验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:20:08.150

选择使用 javascript 替代方案。对我来说更容易解决：

```
function writeCookie(key,value,days) {
    if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = key+"="+value+expires+"; path=/";
}

function readCookie(key) {
    var nameEQ = key + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function ageGate() {
    var monthDays = {
        1: 31,
        2: 29,
        3: 31,
        4: 30,
        5: 31,
        6: 30,
        7: 31,
        8: 31,
        9: 30,
        10: 31,
        11: 30,
        12: 31
    };

    var months = {
        1: 'January',
        2: 'February',
        3: 'March',
        4: 'April',
        5: 'May',
        6: 'June',
        7: 'July',
        8: 'August',
        9: 'September',
        10: 'October',
        11: 'November',
        12: 'December'
    };

    var monthOptions = [];
    var dayOptions = {};
    var yearOptions = [];

    for (var month in monthDays) {
        var days = monthDays[month];
        monthOptions.push('<option value="' + month + '">' + months[month] + '</option>');
        dayOptions[month] = [];
        for (var i=1; i <= days; i++) {
            var day = i;
            dayOptions[month].push('<option value="' + day + '">' + day + '</option>');
        }
    }

    var currentYear = new Date();
    currentYear = currentYear.getFullYear();

    var startYear = currentYear - 120;

    for (var y=currentYear; y > startYear; y--) {
        yearOptions.push('<option value="' + y + '">' + y + '</option>');
    }

    $s(document).ready(function(){
        var monthHtml = '';
        for (var j=0; j < monthOptions.length; j++) {
            var html = monthOptions[j];
            monthHtml += html;
        }

        $s('#ageMonth').html(monthHtml);

        var yearHtml = '';
        for (var i=0; i < yearOptions.length; i++) {
            yearHtml += yearOptions[i];
        }

        $s('#ageYear').html(yearHtml);

        $s('#ageMonth').bind('change', function(){
            var dayHtml = '';
            var month = $s(this).val();

            for (var i=0; i < dayOptions[month].length; i++) {
                dayHtml += dayOptions[month][i];
            }

            $s('#ageDay').html(dayHtml);
        });

        $s('#ageEnterSite').click(function(e){
            e.preventDefault();
            var date = new Date();
            date.setMonth($s('#ageMonth').val() - 1);
            date.setDate($s('#ageDay').val());
            date.setYear($s('#ageYear').val());

            var maxDate = new Date();
            // alert(maxDate.getFullYear());

            maxDate.setYear(maxDate.getFullYear() - 18);

            if (date <= maxDate) {
                writeCookie('jcsj_age_verified', '1', 30);
                $s('#age-gate').fadeOut(function(){
                    $s(this).remove();
                    $s('body').removeClass('age-gate-visible');
                });
            }
            else {
                window.location.href = 'http://google.com';
            }

        });

        $s('#ageMonth').change(); // load default month
        // $s('#ageDay').prop('disabled', true);
        setTimeout(function(){
            $s('body').addClass('age-gate-visible');
            $s('#age-gate').fadeIn();
        }, 200);
    });
}

if (readCookie('jcsj_age_verified')) {

} else {
    ageGate();
}

</script> 
```

# iphone - 为新的 Facebook iOS 5 应用寻找 URL 方案 (fb://) 以直接打开图像

> ID：12678136
> 
> 赞同：5
> 
> 时间：2012-10-01T17:34:02.160
> 
> 标签：iphone, facebook, facebook-graph-api, ios5, ios6

将 Facebook 应用程序打开到特定帖子的旧 URL 方案不适用于该应用程序的最新 iOS 版本（2012 年 8 月发布）。

在新方案下，我已经弄清楚如何使用 fb://event/eventID 直接访问事件，并且可以通过 fb://profile/postID 访问用户的帖子。

但是，如果我知道 photoID，如何直接访问照片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:39:43.300

从二进制文件中可以看出，只有以下 URL 被识别：

```
fb://作曲家?%@
fb://个人资料
fb://profile?id=%@
fb://album?id=%@
fb://照片？%@
fb://故事？%@
FB：//消息？
fb://photo?id=%@
fb://story?id=%@

```

试试 fb://photo?id=..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-10T16:55:37.477

这是您需要的代码。

```
fb://photo?id='photoid'&set=a.'albumid.fbid' 
```

# c++ - 在抛出 'std::out_of_range' what(): basic_string::erase 的实例后调用终止

> ID：12678137
> 
> 赞同：1
> 
> 时间：2012-10-01T17:34:02.597
> 
> 标签：c++, erase, outofrangeexception, stdstring

```
string Farfallino::decode(string buff) {

string stringa;
size_t pos;

while(1) {
    while(pos = (buff.find("afa"))) {
        buff.erase(pos, 3);
        buff.insert(pos, "a");
    }
    while(pos = (buff.find("efe"))) {
        buff.erase(pos, 3);
        buff.insert(pos, "e");
    }
    while(pos = (buff.find("ifi"))) {
        buff.erase(pos, 3);
        buff.insert(pos, "i");
    }
    while(pos = (buff.find("ofo"))) {
        buff.erase(pos, 3);
        buff.insert(pos, "o");
    }
    while(pos = (buff.find("ufu"))) {
        buff.erase(pos, 3);
        buff.insert(pos, "u");
    }
}

return stringa;
} 
```

我试图擦除传递给函数的字符串中的每个“afa”“efe”“ifi”“ofo”和“ufu”，但它给了我这个错误。我不知道我在做什么错..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:35:21.613

它应该是这样的：

```
while ((pos = buff.find("x")) != std::string::npos)
{
    // ...
} 
```

“未找到”通过返回`npos`而不是零来表示。零只是第一个字符。

# javascript - Ext JS 3.3 一次编辑多行

> ID：12678138
> 
> 赞同：1
> 
> 时间：2012-10-01T17:34:14.207
> 
> 标签：javascript, extjs

我们在 TabPanel 中使用 EditorGridPanel 填充了一些记录。

目前记录可以一一修改和保存。我正在寻找最好的方法来提供同时编辑多个记录的能力。

这是我的方法和挑战。

-用户选择多条记录

-提供一个按钮，用于取消隐藏带有要修改的字段的 FormPanel。（这可以在同一个选项卡中完成，也可以打开一个新选项卡）

- 用户更改所需元素并单击保存。

- 更改的元素会在所有选定的行中更新。

**挑战：**

-我正在使用 Ext JS 3.3.1 库。

- 无法弄清楚如何将数据从新表单传递到第一个选项卡上的记录

-尝试在同一网格上创建一个空白记录。更新它将更新所有选定的记录。

如果可以分享更多的想法/指针，那就太好了。

**抱歉**，我没有在代码方面提供更多信息。但是希望我已经解释了这个问题。我可以根据需要提供更具体的信息。图像本来更容易描述，但无法附加

# powershell-2.0 - 我可以运行 powershell psexec 调用来运行位于映射网络驱动器上的批处理文件吗？

> ID：12678143
> 
> 赞同：0
> 
> 时间：2012-10-01T17:34:29.557
> 
> 标签：powershell-2.0, psexec, mapped-drive

从计算机 A，我想调用计算机 B 上的批处理文件。通常，我使用 psexec 来执行此操作。但是，在这种情况下，计算机 B 上的批处理文件位于计算机 B 上名为“J:”的映射网络驱动器上。

有没有办法让这样的命令起作用？

```
psexec \\computerB J:\MyBatchFile.bat 
```

现在，它回到我身边并抱怨J：不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:28:00.023

用户不存在 J，因为驱动器在用户交互登录时被映射。没有真正登录到系统，没有驱动器映射。

正如建议的那样，您可以尝试 J 的 UNC 路径，但这可能行不通。PowerShell 远程处理（使用 psexec 的替代方法）具有“单跳”限制 - 如果您在工作站上执行命令以调用远程系统上的命令，然后尝试从该远程系统访问非本地资源，您将被拒绝。

有什么方法可以从计算机 A 执行该 BAT 文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:52:46.513

Use -e to load the profile, then the mapped drive should be there.

psexec \remotemachine -u [domain\username] -p [password] -e j:\whatevercmmand.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:52:55.937

我会尝试使用`J:`映射到的 UNC 路径。您可能可以使用一些`net use`技巧来确保`J:`可用。

# asp.net - ajax面板中的asp.net listview在数据绑定后不刷新

> ID：12678145
> 
> 赞同：0
> 
> 时间：2012-10-01T17:34:40.477
> 
> 标签：asp.net, ajax, listview, updatepanel

在更新面板中更新列表视图的数据绑定时遇到问题。listview 是做一个数据绑定并返回一些用户名。我已经通过从一个 asp 按钮触发它来测试数据绑定，它就像这样工作得很好。

```
protected void getFacebookFriends(object sender, EventArgs e)
    {
        List<testResult> getFriends = (from i in lqDataContext.test(base.UserId) select i).ToList();
        lvFacebookFriends.DataSource = getFriends;
        lvFacebookFriends.DataBind();

    } 
```

当我尝试通过 ajax 使用

```
<telerik:RadAjaxPanel ID="updateFriends" runat="server" OnAjaxRequest="updateFriends_AjaxRequest">

 function invokeAjaxRequest() {
        $find("<%= updateFriends.ClientID%>").ajaxRequestWithTarget("<%= updateFriends.UniqueID %>", 97);
    } 
```

protected void updateFriends_AjaxRequest(object sender, AjaxRequestEventArgs e) { List getFriends = (from i in lqDataContext.test(base.UserId) select i).ToList(); lvFacebookFriends.DataSource = getFriends; lvFacebookFriends.DataBind(); updateFriends.EnableAJAX = false; }

我可以在调试中看到我通过 updateFriends_AjaxRequest 没有错误，但 ui 没有改变。

感谢您帮助我理解这一点。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:50:04.957

只需将其包装在常规更新面板中即可。回发将被捕获，并且列表视图将使用新信息异步重新呈现。

# python - 从文件中读取行，处理它，然后删除它

> ID：12678146
> 
> 赞同：3
> 
> 时间：2012-10-01T17:34:42.067
> 
> 标签：python, readline

我有一个 22mb 的文本文件，其中包含一个数字列表（每行 1 个数字）。我试图让 python 读取数字，处理数字并将结果写入另一个文件。所有这些都有效，但如果我必须停止程序，它会从头开始。起初我尝试使用 mysql 数据库，但它太慢了。以这种方式处理的数字大约是我的 4 倍。我希望能够在处理完号码后删除该行。

```
with open('list.txt', 'r') as file:
for line in file:
    filename = line.rstrip('\n') + ".txt"
    if os.path.isfile(filename):
        print "File", filename, "exists, skipping!"
    else:
        #process number and write file
    #(need code to delete current line here) 
```

正如您所看到的，每次重新启动时，它都必须在硬盘驱动器中搜索文件名，以确保它到达它离开的位置。对于 150 万个数字，这可能需要一段时间。我找到了一个 truncate 的例子，但它没有用。

是否有任何类似于 python 的 array_shift (PHP) 的命令可以处理文本文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T18:01:59.920

我会使用标记文件来保留处理的最后一行的编号，而不是重写输入文件：

```
start_from = 0

try:
    with open('last_line.txt', 'r') as llf: start_from = int(llf.read())
except:
    pass

with open('list.txt', 'r') as file:
    for i, line in enumerate(file):
        if i < start_from: continue

        filename = line.rstrip('\n') + ".txt"
        if os.path.isfile(filename):
            print "File", filename, "exists, skipping!"
        else:
            pass
        with open('last_line.txt', 'w') as outfile: outfile.write(str(i)) 
```

此代码首先检查文件 last_line.txt 并尝试从中读取一个数字。该数字是在上一次尝试期间处理的行数。然后它只是跳过所需的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:23:50.630

读取数据文件不应该成为瓶颈。以下代码在我的机器上大约 0.2 秒内读取了 36 MB、697997 行的文本文件：

```
import time

start = time.clock()
with open('procmail.log', 'r') as f:
    lines = f.readlines()
end = time.clock()
print 'Readlines time:', end-start 
```

因为它产生了以下结果：

```
Readlines time: 0.1953125 
```

请注意，此代码一次生成行列表。

要知道您去过哪里，只需将您已处理的行数写入文件即可。然后，如果您想再试一次，请阅读所有行并跳过您已经完成的行：

```
import os

# Raad the data file
with open('list.txt', 'r') as f:
    lines = f.readlines()

skip = 0
try:
    # Did we try earlier? if so, skip what has already been processed
    with open('lineno.txt', 'r') as lf:
        skip = int(lf.read()) # this should only be one number.
        del lines[:skip] # Remove already processed lines from the list.
except:
    pass

with open('lineno.txt', 'w+') as lf:
    for n, line in enumerate(lines):
        # Do your processing here.
        lf.seek(0) # go to beginning of lf
        lf.write(str(n+skip)+'\n') # write the line number
        lf.flush()
        os.fsync() # flush and fsync make sure the lf file is written. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:10:10.793

我使用 Redis 来做类似的事情。安装redis，然后安装pyredis，你可以在内存中拥有一个持久化的集合。然后你可以这样做：

```
r = redis.StrictRedis('localhost')
with open('list.txt', 'r') as file:
    for line in file:
        if r.sismember('done', line):
            continue
        else:
            #process number and write file
            r.sadd('done', line) 
```

如果您不想安装 Redis，您也可以使用 shelve 模块，确保使用 writeback=False 选项打开它。不过我真的推荐 Redis，它让这样的事情变得容易多了。

# iphone - phonegap - webViewDidFinishLoad 没有被调用

> ID：12678147
> 
> 赞同：3
> 
> 时间：2012-10-01T17:34:45.610
> 
> 标签：iphone, ios, cordova, uiwebview

我正在使用Phonegap2.1。我的 AppDelegate.m 文件中有 webViewDidFinishLoad 方法。在以前的 phonegap 版本中，它曾经被自己调用。现在，它根本没有被调用。我需要在某处分配代表吗？

```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView 
{
if(self.invokeString)
{
    // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
    NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
    [theWebView stringByEvaluatingJavaScriptFromString:jsString];
}
// Black base color for background matches the native apps
theWebView.backgroundColor = [UIColor blackColor];

return [ self.viewController webViewDidFinishLoad:theWebView ];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:35:53.823

当您升级到 2.1.0 时，建议您注释掉所有该部分，因为它已被弃用。在使用cordova 2.1.0 时，您提供的代码实际上对您没有任何帮助，因此如果您将其注释掉，您的应用程序应该可以正常工作。

[http://iphonedevlog.wordpress.com/2012/09/24/phonegap-2-1-0-in-mac-os-x-mountain-lion-10-8-from-download-to-ios-app-店铺/](http://iphonedevlog.wordpress.com/2012/09/24/phonegap-2-1-0-in-mac-os-x-mountain-lion-10-8-from-download-to-ios-app-store/)

```
 #pragma UIWebDelegate implementation
    /*
    - (void) webViewDidFinishLoad:(UIWebView*) theWebView
    {
    // only valid if ___PROJECTNAME__-Info.plist specifies a protocol to handle
    if (self.invokeString)
    {
    // this is passed before the deviceready event is fired, so you can access it in js when you receive        deviceready
    NSLog(@"DEPRECATED: window.invokeString - use the window.handleOpenURL(url) function instead, which is    always called when the app is launched through a custom scheme url.");
    NSString* jsString = [NSString stringWithFormat:@"var invokeString = \"%@\";", self.invokeString];
    [theWebView stringByEvaluatingJavaScriptFromString:jsString];
    }

   // Black base color for background matches the native apps
   theWebView.backgroundColor = [UIColor blackColor];

  return [super webViewDidFinishLoad:theWebView];
  }*/ 
```

保留此部分未注释会给出以下警告：

```
 Classes/MainViewController.m:133:11: 'invokeString' is deprecated
 Classes/MainViewController.m:137:86: 'invokeString' is deprecated 
```

您的应用程序将运行良好，但发布带有警告的产品并不理想。

除非你故意不把你的代码放给全世界看

[CB-853] 弃用`window.invokeString`-`window.handleOpenURL(url)`改为使用

[http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201207.mbox/%3C20120716205424.998B414A2D@tyr.zones.apache.org%3E](http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201207.mbox/%3C20120716205424.998B414A2D@tyr.zones.apache.org%3E)

# java - 更改鼠标光标悬停在 JTree 中的节点上

> ID：12678152
> 
> 赞同：4
> 
> 时间：2012-10-01T17:35:06.760
> 
> 标签：java, swing, applet, jtree, treenode

我正在创建一个 JTree 并添加一些执行以下操作的节点：

```
DefaultMutableTreeNode top = new DefaultMutableTreeNode("The Java Series");
tree = new JTree(top);
...
DefaultMutableTreeNode node = new DefaultMutableTreeNode("<html><a href=\"    \">"+code+"</a>  "+description+"</html>");
top.add(node);
... 
```

现在我在节点上添加了一个“addMouseMotionListener”，这没问题。我的问题是，每当我将鼠标悬停在节点的任何部分上时，鼠标光标都会发生变化。我真正想要的是仅在将鼠标悬停在节点的 HTML 超链接文本部分上时更改鼠标光标

```
 "<a href=\"\">"+code+"</a>" 
```

而不是描述。

那么有没有办法让鼠标光标仅在悬停在节点的某些部分时才发生变化？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:44:44.073

好的，我花了一段时间，但我在评论中描述的似乎有效。可能还有其他/更好的方法，我很想阅读它，但到目前为止，这就是我所发现的。

这个想法是：

1.  我使用 JEditorPane 作为 TreeCellRenderer
2.  我听鼠标移动（而且，作为鼠标点击的奖励）
3.  对于每个事件，我为悬停的单元格重新创建渲染器
4.  我将事件转换为组件坐标
5.  我使用 viewToModel 来查找我是否正在悬停锚元素
6.  我相应地更改光标。

这是代码，作为奖励，您还可以获得有效的超链接！

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Cursor;
import java.awt.Desktop;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.AttributeSet;
import javax.swing.text.Element;
import javax.swing.text.html.HTML;
import javax.swing.text.html.HTMLDocument;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeCellRenderer;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

public class TestTreeHyperlinks {

    private final class HyperlinkMouseListener extends MouseAdapter {
        private final JTree tree;

        private HyperlinkMouseListener(JTree tree) {
            this.tree = tree;
        }

        @Override
        public void mouseExited(MouseEvent e) {
            tree.setCursor(Cursor.getDefaultCursor());
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            Element h = getHyperlinkElement(e);
            if (h != null) {
                Object attribute = h.getAttributes().getAttribute(HTML.Tag.A);
                if (attribute instanceof AttributeSet) {
                    AttributeSet set = (AttributeSet) attribute;
                    String href = (String) set.getAttribute(HTML.Attribute.HREF);
                    if (href != null) {
                        try {
                            Desktop.getDesktop().browse(new URI(href));
                        } catch (IOException e1) {
                            e1.printStackTrace();
                        } catch (URISyntaxException e1) {
                            e1.printStackTrace();
                        }
                    }
                }
            }
        }

        @Override
        public void mouseMoved(MouseEvent event) {
            boolean isHyperlink = isHyperlink(event);
            if (isHyperlink) {
                tree.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
            } else {
                tree.setCursor(Cursor.getDefaultCursor());
            }

        }

        private boolean isHyperlink(MouseEvent event) {
            return getHyperlinkElement(event) != null;
        }

        private Element getHyperlinkElement(MouseEvent event) {
            Point p = event.getPoint();
            int selRow = tree.getRowForLocation(p.x, p.y);
            TreeCellRenderer r = tree.getCellRenderer();
            if (selRow != -1 && r != null) {
                TreePath path = tree.getPathForRow(selRow);
                Object lastPath = path.getLastPathComponent();
                Component rComponent = r.getTreeCellRendererComponent(tree, lastPath, tree.isRowSelected(selRow), tree.isExpanded(selRow),
                        tree.getModel().isLeaf(lastPath), selRow, true);
                if (rComponent instanceof JEditorPane) {
                    Rectangle pathBounds = tree.getPathBounds(path);
                    JEditorPane editor = (JEditorPane) rComponent;
                    editor.setBounds(tree.getRowBounds(selRow));
                    p.translate(-pathBounds.x, -pathBounds.y);
                    int pos = editor.getUI().viewToModel(editor, p);
                    if (pos >= 0 && editor.getDocument() instanceof HTMLDocument) {
                        HTMLDocument hdoc = (HTMLDocument) editor.getDocument();
                        Element elem = hdoc.getCharacterElement(pos);
                        if (elem.getAttributes().getAttribute(HTML.Tag.A) != null) {
                            return elem;
                        }
                    }
                }
            }
            return null;
        }
    }

    @SuppressWarnings("serial")
    public class MyTreeCellRenderer extends DefaultTreeCellRenderer implements TreeCellRenderer {

        private JEditorPane editorPane;

        public MyTreeCellRenderer() {
            editorPane = new JEditorPane("text/html", null);
        }

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row,
                boolean hasFocus) {
            Component c = super.getTreeCellRendererComponent(tree, value, selected, expanded, leaf, row, hasFocus);
            if (c instanceof JLabel) {
                JLabel label = (JLabel) c;
                editorPane.setText(label.getText());
                editorPane.setToolTipText(label.getToolTipText());
                editorPane.setOpaque(label.isOpaque());
                editorPane.setBackground(label.getBackground());
                editorPane.setBorder(label.getBorder());
            }
            return editorPane;
        }
    }

    protected void initUI() {
        final JTree tree = new JTree(getTreeModel());
        tree.setCellRenderer(new MyTreeCellRenderer());
        HyperlinkMouseListener listener = new HyperlinkMouseListener(tree);
        tree.addMouseListener(listener);
        tree.addMouseMotionListener(listener);
        JFrame f = new JFrame(TestTreeHyperlinks.class.getSimpleName());
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(tree), BorderLayout.CENTER);
        f.pack();
        f.setSize(f.getWidth() + 100, f.getHeight() + 100);
        f.setVisible(true);

    }

    private TreeModel getTreeModel() {
        return new DefaultTreeModel(
                getNodes(new DefaultMutableTreeNode("<html>Root <a href=\"http://www.google.be\">Google</a></html>"), 5));
    }

    private TreeNode getNodes(DefaultMutableTreeNode parent, int i) {
        if (i > 0) {
            for (int j = 0; j < 5; j++) {
                DefaultMutableTreeNode newChild = new DefaultMutableTreeNode(
                        "<html>Node "
                                + (j + 1)
                                + " <a href=\"http://www.stackoverflow.com\">a link to stackoverflow</a></html> and some more text not in an hyperlink");
                getNodes(newChild, i - 1);
                parent.add(newChild);
            }
        }
        return parent;
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTreeHyperlinks().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-15T21:44:40.580

此代码有效：

```
 tree_object.addMouseMotionListener(new MouseMotionListener() {

            @Override
            public void mouseDragged(MouseEvent e) {

            }

            @Override
            public void mouseMoved(MouseEvent e) {
                TreePath tp = ((JTree)e.getSource()).getPathForLocation(e.getX(), e.getY());

                if(tp != null)
                {
                    ((JTree)e.getSource()).setCursor(new Cursor(Cursor.HAND_CURSOR));
                }
                else
                {
                    ((JTree)e.getSource()).setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
                }
            }
     }); 
```

# jquery - 导致 jquery 对话框不显示

> ID：12678156
> 
> 赞同：1
> 
> 时间：2012-10-01T17:35:25.750
> 
> 标签：jquery, css, jquery-ui

我正在使用这个文档类型（DOCTYPE html PUBLIC“-//W3C//Dtd html 4.0 transitional//EN”）和下面的css来冻结ASP.NET gridview中的前4列和标题行（“冻结窗格的方式” " 在 Excel 中工作）。它适用于我所有用户专门使用的 IE8。问题是这个 doctype 导致 IE8 上不显示 jquery 模式对话框。屏幕变灰请注意，但对话框不显示。（该页面没有任何其他可能干扰对话框的 CSS）

```
.Freezing
{
position:relative ;
top: expression(this.offsetParent.scrollTop);
z-index: 10;  
}  

.FreezingCol 
{ 
    z-index: 1; 
    left: expression( 
    document.getElementById("freezingDiv").scrollLeft); 
    position: relative; 
} 
```

现在，当我将 doctype 更改为严格甚至这个时（DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">） ，jquery 对话框有效，但列冻结在 IE8 中停止工作。

仅供参考，该对话框适用于其他浏览器。

在对话框定义下面添加代码会使对话框在灰色区域结束后显示在页面底部（不是屏幕），这不好。它应该显示在屏幕中央。

```
open: function(event, ui) {
$(this).parent().css('position', 'fixed'); //d
} 
```

我有点知道 doctype transitional = quirks 模式，但需要将它用于 IE 中的列和标题冻结。不过我猜我可以在 jquery-ui.css 的对话框部分进行一些更改，以使其与 doctype 过渡模式一起使用。我不是 CSS 专家。我已经尝试过的事情是删除“溢出：隐藏；” 并指定“高度：300px；” 在 .ui 对话框内容中。没有帮助，但我愿意结合其他东西再试一次。

TIA 致所有专家。

```
* jQuery UI Dialog 1.8.24
*
* Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* http://docs.jquery.com/UI/Dialog#theming
*/

.ui-dialog { position: absolute; padding: .2em; width: 300px; overflow: hidden; }

.ui-dialog .ui-dialog-titlebar { padding: .4em 1em; position: relative;  }

.ui-dialog .ui-dialog-title { float: left; margin: .1em 16px .1em 0; } 

.ui-dialog .ui-dialog-titlebar-close { position: absolute; right: .3em; top: 50%; width: 19px; margin: -10px 0 0 0; padding: 1px; height: 18px; }

.ui-dialog .ui-dialog-titlebar-close span { display: block; margin: 1px; }

.ui-dialog .ui-dialog-titlebar-close:hover, .ui-dialog .ui-dialog-titlebar-close:focus { padding: 0; }

.ui-dialog .ui-dialog-content { position: relative; border: 0; padding: .5em 1em; background: none; overflow: auto; zoom: 1; }

.ui-dialog .ui-dialog-buttonpane { text-align: left; border-width: 1px 0 0 0; background-image: none; margin: .5em 0 0 0; padding: .3em 1em .5em .4em; }

.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset { float: right; }

.ui-dialog .ui-dialog-buttonpane button { margin: .5em .4em .5em 0; cursor: pointer; }

.ui-dialog .ui-resizable-se { width: 14px; height: 14px; right: 3px; bottom: 3px; }

.ui-draggable .ui-dialog-titlebar { cursor: move; } 
```

# python - 在管理界面中捕获未更改的模型对象

> ID：12678159
> 
> 赞同：0
> 
> 时间：2012-10-01T17:35:48.853
> 
> 标签：python, django, django-models, django-admin

我有模型`Car`，`Seat`并且`Seat`有一个外键`Car`。

在模型.py 中：

```
class Car(models.Model):
    # ...

class Seat(models.Model):
    car = models.ForeignKey(Car)
    # ... 
```

在管理界面中，可以在添加/更改汽车时将座位添加到汽车（使用内联字段）。

在 admin.py 中：

```
class CarAdmin(admin.ModelAdmin):
    # ...
    inlines = [SeatInline]

class SeatInline(admin.StackedInline):
    model = Seat
    extra = 1 
```

当用户通过添加/更改/删除汽车或添加/更改/删除座位时`CarAdmin`，我需要记录他所做的事情，因此需要特别比较更改前后的所有座位。

问题是：

如何获取两个座位对象列表`seats_before`并`seats_after`进行比较？这需要在我可以访问的地方完成`request.user`。

我试图在 中这样做`save_formset()`，但没有奏效。问题之一：要获取`seats_after`，显然只能获取已修改的席位列表，即无法区分未更改的席位和已删除的席位。

```
def save_formset(self, request, form, formset, change):

    # ...
    instances = formset.save(commit=False)
    seats_after = []
    for instance in instances:
        if isinstance(instance, Seat):
            seats_after.append(instance) # Unchanged seats are not added here
    # ... 
```

我也很难进入`seats_before`这个功能。

编辑：

按照 defuz 的建议，我尝试了这段代码：

```
def save_related(self, request, form, formsets, change):

    car_before = form.save(commit=False)
    seats_before = car_before.seats_set.all()

    form.save_m2m()

    seats_after = []
    for formset in formsets:
        instances = formset.save()
        for instance in instances:
            if isinstance(instance, Seat):
                seats_after.append(instance) 
```

在这个例子中，有两个问题：

1.  `seats_before`似乎包含新座位而不是旧座位，就像保存表单时保存了相关对象一样。

2.  `seats_after`仅包含更改/添加的座位。不会出现未更改和已删除的席位（我希望包括未更改的席位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:46:46.253

使用[ModelAdmin.save_related:](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_related)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:01:25.393

Django 信号可能是您正在寻找的。 [https://docs.djangoproject.com/en/dev/ref/signals/](https://docs.djangoproject.com/en/dev/ref/signals/)

# many-to-many - 通过添加到实体列表来持久化多对多实体

> ID：12678161
> 
> 赞同：0
> 
> 时间：2012-10-01T17:35:55.110
> 
> 标签：many-to-many, openjpa, persist

我正在获取实体列表并尝试向其中添加更多值并将它们持久保存到数据库中...我在这样做时遇到了一些问题...这是我到目前为止所拥有的...

```
Provider prov = emf.find(Provider.class, new Long(ID)); 
```

该实体具有我要添加的多对多关系

```
List<Organization> orgList = new ArrayList<Organization>();
...
orgList = prov.getOrganizationList(); 
```

所以我现在有了与该实体关联的实体列表。
我搜索一些要添加的实体并将它们放在 orgList 中......

```
List<Organization> updatedListofOrgss = emf.createNamedQuery("getOrganizationByOrganizationIds").setParameter("organizationIds", AddThese).getResultList();
List<Organization> deleteListOfOrgs = emf.createNamedQuery("getOrganizationByOrganizationIds").setParameter("organizationIds", DeleteThese).getResultList();
orgList.addAll(updatedListofOrgss);
orgList.removeAll(deleteListOfOrgs); 
```

如您所见，我还有一个要删除的删除节点列表。我在某处听说您不需要对此类操作调用persist，并且JPA 将自动保留。好吧，它似乎不是那样工作的。你能以这种方式坚持下去，还是我必须通过链接表实体，然后以这种方式添加这些值？

```
public class Provider implements Serializable {
@Id
@Column(name="RESOURCE_ID")
private long resourceId;
    ...
    @ManyToMany(fetch=FetchType.EAGER)
@JoinTable(name="DIST_LIST_PERMISSION", 
        joinColumns=@JoinColumn(name="RESOURCE_ID"),
        inverseJoinColumns=@JoinColumn(name="ORGANIZATION_ID"))
private List<Organization> organizationList;
    ...//getters and setters.
} 
```

将组织和提供者链接在一起的链接表...

```
public class DistListPermission implements Serializable {
@Id
@Column(name="DIST_LIST_PERMISSION_ID")
private long distListPermissionId;

@Column(name="ORGANIZATION_ID")
private BigDecimal organizationId;

    @Column(name="RESOURCE_ID")
private Long resourceId;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:40:16.670

问题是您在 @ManyToMany 注释上缺少级联规范。@ManyToMany 的默认级联类型是无级联类型，因此不会保留对集合的任何更改。您还需要添加 @ElementDependent 注释以确保从集合中删除的任何对象都将从数据库中删除。因此，您可以按如下方式更改您的 Provider 实现：

```
@ManyToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
@ElementDependent
@JoinTable(name="DIST_LIST_PERMISSION", 
    joinColumns=@JoinColumn(name="RESOURCE_ID"),
    inverseJoinColumns=@JoinColumn(name="ORGANIZATION_ID"))
private List<Organization> organizationList; 
```

由于您的 Provider 类是托管的，因此您不需要合并实体；提交事务时，更改应自动生效。

# ios - 捆绑免费应用程序的显示名称，可以升级到完整版

> ID：12678162
> 
> 赞同：0
> 
> 时间：2012-10-01T17:36:01.943
> 
> 标签：ios, icons

我已经在 Appstore 上有一个应用程序，假设它叫做“MyApp”，我现在正在创建一个名为“MyApp Free”的免费/精简版。

MyApp Free 将有一个应用内升级购买选项，这将使其像 MyApp 一样功能齐全。

问题是，由于我们无法动态更改捆绑包显示名称，因此在用户升级后，它将继续被称为“MyApp Free”，并在用户设备上显示图标。这是不可取的。

所以我可以将捆绑显示名称设置为 MyApp，即使它在 Appstore 上称为 MyApp Free。还要考虑我已经有一个名为 MyApp 的应用程序。

我已经搜索了很多帖子，但需要弄清楚 Apple 是否会让我摆脱显示名称的“免费”位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:36:27.977

是的，这是可能的。

Apple 并不太关心 Bindle 显示名称。我的设置与您的完全相同，并且在 AppStore 上。（我的两个应用程序的 Bundle 显示名称都是 MyApp，甚至一个的 Bundle ID 是 MyApp，另一个是 MyAppLite，从 Lite 到 Full 的应用内购买具有相同的升级路径可能性）

警告！

但请注意不要在构建设置中更改产品名称！！！只需将删除 ${PRODUCT_NAME} 的 plist 文件中的 Bundle 显示名称更改为所需的新 Bundle 显示名称。如果您不小心更改了产品名称，这也可能会更改捆绑名称，因为默认情况下使用相同的 ${PRODUCT_NAME}。

如果您不够在意，这将导致用户无法升级，因为他们设备中的应用名称会有所不同！这可能会导致 AppStore 出现混乱的情况，因为新用户会同时使用新的 Bundle/App 名称下载您的新应用程序，因此您必须为用户组的新升级做出痛苦的决定你喜欢支持，因为两者都是不可能的。

# windows - 如何自动更改文件内容？

> ID：12678165
> 
> 赞同：1
> 
> 时间：2012-10-01T17:36:26.030
> 
> 标签：windows, linux, macos, file, filesystems

我得到一个二进制文件（认为它很大）和几个二进制 blob，我应该在文件中间的某个地方插入/替换它们（偏移量是已知的）。

同时用户可以访问该文件，因此我必须“一无所有”，如果她在我更新所有内容之前打开它，则用户拥有该文件的旧版本，或者如果我成功，她拥有一个新版本。

我对 Linux、Windows 和 OS X 的解决方案很感兴趣。当然，实现可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:26:39.780

对于 Linux：

*   在临时文件上做所有事情。
*   `fsync()`临时文件。
*   `rename()`临时文件到真实文件。

这个成语称为 atomic-rename。

# php - 通过多个表单输入的 PHP 数组

> ID：12678175
> 
> 赞同：1
> 
> 时间：2012-10-01T17:37:03.567
> 
> 标签：php, mysql, arrays, forms, loops

我有以下代码：

```
$query = "SELECT * FROM items WHERE SUBSTRING(item_no, 1, ".$length.") BETWEEN 
'".$from_new."' AND '".$to_new."' ORDER BY item_no Desc";
$result = mysql_query($query);

$dd=array();
$ii=array();
$qq=array();
$aa=array();

if(mysql_num_rows($result)>0){
$num = mysql_num_rows($result);
?>

<form method="post" action="final_group_items.php">

<?php
echo "<table>";
for($i=0;$i<$num;$i++){
$row = mysql_fetch_array($result);
echo "<tr><td align=center>"; ?>

<input disabled  maxlength="2" type="text"
name="ii[]" value="<?php echo strtoupper($row['item_no']); ?>"><?php echo 
"</td><td align=center>";?> 

<input disabled maxlength="2" type="text" 
name="qq[]" value="<?php echo $row['qty'];?>"> 

<?php echo "</td><td align=center>"; ?> 

<input disabled maxlength="2" type="text" 
name="aa[]" value="<?php echo $row['actual_price'];?>"> 

<?php echo "</td><td align=center>";?>

<input required maxlength="2" type="text" name="dd[]" value="<?php echo 
$row['discount_price']; ?>">
<?php
echo "</td><tr>";
}   
echo "</table>";
?>

<input type="submit" value="Change Values">
</form> 
```

现在，当我单击提交时，它将打开 final_group_items.php，其中包含以下测试代码，以确保所有数组 (ii,qq,dd,aa) 不为空：

```
if(empty($_POST['qq']))
   {
     echo "No value inside";
     return false;

   }
   foreach($_POST['qq'] as $test)
   {
     echo $test;
   }
   return true; 
```

因此，通过测试所有数组，唯一有效的是 $_POST['dd']...Others 输出“内部没有价值”，我真的不知道如何或为什么？当我有多个具有唯一数组和值的字段时，我应该怎么做。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:39:48.880

这：

```
<input disabled maxlength="2" type="text" name="qq[]" value="<?php echo $row['qty'];?>"> 
```

甚至会阻止浏览器在表单提交时发布该字段，因为`disabled`获取`"disabled"`.

应删除该属性：

```
<input maxlength="2" type="text" name="qq[]" value="<?php echo $row['qty'];?>"> 
```

# php - 如何从 PHP 创建 GEXF？

> ID：12678177
> 
> 赞同：0
> 
> 时间：2012-10-01T17:37:14.717
> 
> 标签：php, xml, graph

我需要从 PHP 中的节点数组自动创建 GEXF ( [http://gexf.net ) XML 文件。](http://gexf.net)

我用谷歌搜索了这个主题，但找不到任何有用的东西。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:12:01.547

这是我对此的看法。几个小时后，我搞定了。此示例也支持 viz: 命名空间，因此您可以使用更详细的节点元素和放置。

```
// Construct DOM elements
$xml = new DomDocument('1.0', 'UTF-8');
$xml->formatOutput = true;
$gexf = $xml->createElementNS(null, 'gexf');
$gexf = $xml->appendChild($gexf);

// Assign namespaces for GexF with VIZ :)
$gexf->setAttribute('xmlns:viz', 'http://www.gexf.net/1.1draft/viz'); // Skip if you dont need viz!
$gexf->setAttributeNS('http://www.w3.org/2000/xmlns/' ,'xmlns:xsi', 'http://www.w3.org/2001/XMLSchema-instance');
$gexf->setAttributeNS('http://www.w3.org/2001/XMLSchema-instance', 'schemaLocation', 'http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd');

// Add Meta data
$meta = $gexf->appendChild($xml->createElement('meta'));
$meta->setAttribute('lastmodifieddate', date('Y-m-d'));
$meta->appendChild($xml->createElement('creator', 'PHP GEXF Generator v0.1'));
$meta->appendChild($xml->createElement('description', 'by me etc'));

// Add Graph data!
$graph = $gexf->appendChild($xml->createElement('graph'));
$nodes = $graph->appendChild($xml->createElement('nodes'));
$edges = $graph->appendChild($xml->createElement('edges'));

    // Add Node!
    $node = $xml->createElement('node');
    $node->setAttribute('id', '1');
    $node->setAttribute('label', 'Hello world!');

        // Set color for node
        $color = $xml->createElement('viz:color');
        $color->setAttribute('r', '1');
        $color->setAttribute('g', '1');
        $color->setAttribute('b', '1');
        $node->appendChild($color);

        // Set position for node
        $position = $xml->createElement('viz:position');
        $position->setAttribute('x', '1');
        $position->setAttribute('y', '1');
        $position->setAttribute('z', '1');
        $node->appendChild($position);

        // Set size for node
        $size = $xml->createElement('viz:size');
        $size->setAttribute('value', '1');
        $node->appendChild($size);

        // Set shape for node
        $shape = $xml->createElement('viz:shape');
        $shape->setAttribute('value', 'disc');
        $node->appendChild($shape);

    // Add Edge (assuming there is a node with id 2 as well!)
    $edge = $xml->createElement('edge');
    $edge->setAttribute('source', '1');
    $edge->setAttribute('target', '2');     

// Commit node & edge changes to nodes!
$edges->appendChild($edge);
$nodes->appendChild($node);

    // Serve file as XML (prompt for download, remove if unnecessary)
    header('Content-type: "text/xml"; charset="utf8"');
    header('Content-disposition: attachment; filename="internet.gexf"');

// Show results!
echo $xml->saveXML(); 
```

吃掉你的心！请随时将您的项目结果通过电子邮件发送给我，我很好奇。

# android-layout - 硬编码字符串“Button”，应该使用@string资源

> ID：12678181
> 
> 赞同：11
> 
> 时间：2012-10-01T17:37:28.403
> 
> 标签：android-layout, android-activity

我是 Android 应用程序开发和使用 Java 语言的新手。我的问题是每次我制作 TextView 或 Button 时都会出现一个三角形，其下方带有感叹号。当我点击它时，我看到一条消息说：

> 硬编码字符串“Button”，应该使用@string资源

我有两个活动，在我的主要活动中有一个按钮，当您单击它时，您将进入第二个活动。但是当我去我`main.java`的为按钮制作代码时。总是有上面显示的错误。我认为 eclipse 找不到我的按钮的 id 和我的 TextView 相同的 ID，它们有相同的错误消息。

这是我制作的代码：

```
Button b = FindViewById(R.id.button1); 
```

我还补充说：

```
Button b = (Button) FindViewById(R.id.button1); 
```

我正在使用最新的 eclipse 经典和 ADT 八月刊。该平台是 Android 4.1 API 16。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T17:41:27.777

您不应该使用字符串资源（即 strings.xml 中的字符串）对小部件上的“文本”进行硬编码来设置文本。在 strings.xml 中声明要显示为字符串的“文本”，并在布局文件中使用 @string/your_string_name 访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T14:37:05.093

![Main.xml 文件（与主要活动相关的 xml 文件）](../Images/9a959710f9b479fd936ae62b08deae40.png)

请注意按钮的 id，它以红色四舍五入。当您想在方法中调用它时，您必须使用此 id，例如

```
Button b = (Button) FindViewById(R.id.button1); 
```

此外，检查您的图形布局是否与我提供的图像匹配。

![Main.xml 文件的图形视图](../Images/b7cffe431c56fc17d26ee459d39b3507.png)

只需使用这些更改再次尝试您的代码。您的 main.java 看起来像这样。

![Main.java 文件](../Images/c954b8d59949fc0dee45b4bd5ebea18d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-03T20:32:42.697

我也是新手，但我相信我明白了。所以基本上这里发生了什么，java希望你把你的硬代码放在string.xml中。这样在访问它时，您将使用以下给定的方法：

![前](../Images/a8a9765cf3174c70f7e73badc264ffa6.png).

但这是应该的。让我们从 string.xml 开始

![在 string.xml 中创建像这样的相同元素](../Images/2da648e88cbd568b25c4c5d5b0c9faf0.png)

然后回到你的activity_main.xml

![以这种方式引用创建的元素](../Images/bcaffb47c87a3a84acc6dcbfe5ce9840.png)

# python - 多个查询与手动排序一个大查询（AppEngine NDB）

> ID：12678184
> 
> 赞同：3
> 
> 时间：2012-10-01T17:37:38.120
> 
> 标签：python, google-app-engine, app-engine-ndb

对于像这样的模型：

```
class Thing(ndb.Model):
    visible = ndb.BooleanProperty()
    made_by = ndb.KeyProperty(kind=User)
    belongs_to = ndb.KeyProperty(kind=AnotherThing) 
```

本质上执行“或”查询，但比较不同的属性，所以我不能使用内置的 OR... 我想获取所有`Thing`（属于特定的`AnotherThing`）已经`visible`设置为`True`或`visible`现在是当前用户的用户`False`。`made_by`

这对数据存储的要求会更低（即财务成本更低）：

1.  查询以获取所有内容，即： `Thing.query(Thing.belongs_to == some_thing.key)`并遍历结果，存储可见的以及不可见但由当前用户制作的结果？

2.  查询以获取可见的，即：`Thing.query(Thing.belongs_to == some_thing.key, Thing.visible == "True")`并单独查询以获取当前用户不可见的，即：`Thing.query(Thing.belongs_to == some_thing.key, Thing.visible == "False", Thing.made_by = current_user)`？

数字 1\. 会得到许多不需要的结果，例如`Thing`其他用户的不可见 s - 我认为这是对数据存储的多次读取？2.虽然是两个完整的查询，这也可能是不必要的繁重，对吧？我仍在尝试找出与数据库的何种交互会导致何种成本。

我在必要时使用 ndb、tasklet 和 memcache，以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:15:33.710

出于两个原因，第二名将在财务上减少。首先，您为每次读取数据存储和查询中返回的每个实体付费，因此您将为第一个读取所有数据和查询所有数据的实体支付更多费用。第二种方式，你只需为你需要的东西付费。

其次，您还需要为后端或前端时间付费，并且您将使用时间来迭代第一种方法中的所有结果，而第二种方法则不需要花费任何时间。

我看不出第一个选项更好的方法。（也许如果你只有几个实体？？）

要了解读取和查询的成本，请向下滚动一点： [https ://developers.google.com/appengine/docs/billing](https://developers.google.com/appengine/docs/billing)

您将看到 Read、Writes 和 Smalls 是如何为读取、写入和查询相加的。

我也将只查询当前用户拥有的那些，而不是可见 = false 和所有者 = 当前，这样你就不需要一个可以节省一些时间的复合索引。您还可以使部分索引可见，这也节省了一些空间（仅在为 true 时对其进行索引，假设您永远不需要查询 false 索引）。您需要做一些工作来删除重复项，但这可能还不错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:48:49.513

您可能最好使用真实数据对这两种情况进行基准测试。很难在抽象中确定这样的事情，因为有许多细微之处可能会影响整体性能。

我希望选项2会更好。加载大量您不关心的对象只会给数据存储带来沉重的负担，我认为额外的查询无法与之相提并论。当然，这取决于有多少额外的东西，等等。

# css - 如果通过 CSS 设置多个光标，浏览器如何确定使用哪个光标？

> ID：12678185
> 
> 赞同：1
> 
> 时间：2012-10-01T17:37:37.777
> 
> 标签：css

我在这里创建了一个小提琴：http: [//jsfiddle.net/frgj2/](http://jsfiddle.net/frgj2/)

在其中，您会看到两个 div，每个 div 都包含另一个 div。一种是外有`{ cursor: pointer; }`，内有`{ cursor: wait; }`。另一个 div 则相反。

在 Chrome 中（至少，还没有测试过其他的），显示的光标是内部 div 上的光标。

我找不到任何文档来解释这是如何确定的，或者是否可以覆盖此行为。任何人都可以对此有所了解吗？

如果有对此的 JavaScript 解决方案，我会对此持开放态度。

## 更新

我在外部 DIV 中添加了一些文本。当您将鼠标悬停在上面时，它会显示“正确”光标。 [http://jsfiddle.net/frgj2/2](http://jsfiddle.net/frgj2/2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:42:26.767

我的猜测是，无论哪个`<div>`“在顶部”，浏览器都将选择显示光标（即浏览器将显示鼠标指针“打开”或“上方”的任何元素的光标）。

如果您希望内部和外部 div 具有相同的光标而不单独设置，那么您可以在外部 div 上设置一次光标，然后应用`cursor: inherit`到内部 div。

例子：

```
<style type="text/css">
    .foo { cursor: wait; }
    .foo * { cursor: inherit; }
    /* or if it really only needs to be the inner divs */
    . foo div { cursor: inherit; }
</style>

<div class="foo">
    <div class="bar">Message</div>
</div> 
```

注意：`cursor: inherit`应该适用于所有现代浏览器（Chrome 1.0+、Firefox 1.0+、Opera 9.0+、Safari 1.2+ 和 IE 8.0+）。

**[兼容性信息的来源](https://developer.mozilla.org/en-US/docs/CSS/cursor)**。

# java - 使用 setenv.sh 为项目设置类路径

> ID：12678187
> 
> 赞同：1
> 
> 时间：2012-10-01T17:37:44.097
> 
> 标签：java, linux, ubuntu, centos, redhat

我想写一个 sh 文件来在 Linux 中设置类路径。

我尝试使用：

```
export ClASSPATH=$CLASSPATH:$ABC_HOME 
```

但是，当我运行 .sh 文件时，它没有设置类路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:44:35.203

执行 bash 脚本只会设置子进程的环境。“源”命令可能会做你想做的事......

[https://askubuntu.com/questions/53177/bash-script-to-set-environment-variables-not-working](https://askubuntu.com/questions/53177/bash-script-to-set-environment-variables-not-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:40:09.213

你应该让它成为一个shell函数，或者`source`它。因为环境变量是 shell 的本地变量（通过调用你的 shell 脚本开始的那个）。

请阅读[高级 bash 脚本指南](http://tldp.org/LDP/abs/html/)。另请参阅对类似问题的[此答案。](https://stackoverflow.com/a/12650667/841108)

# jquery - 粘性消息如何在 10 秒后自动关闭

> ID：12678192
> 
> 赞同：0
> 
> 时间：2012-10-01T17:38:23.923
> 
> 标签：jquery, css, hover

好吧，我知道如何显示可关闭的置顶消息，但我想知道如何让它在 10 秒后关闭，并显示 10 秒计数器……以及如何赋予它悬停效果……这是我的可关闭置顶留言，仅供参考

```
<script>
function closeBox(toClose) {
    document.getElementById(toClose).style.display = "none";setCookie(toClose,closed", 20);}

function setCookie(cName, value, expiredays) {var expDate = new Date();expDate.setDate(expDate.getDate()+expiredays);document.cookie=cName + "=" + escape(value) + ";expires=" + expDate.toGMTString();}

    function loadMsg(msgClass) {msg = document.getElementsByTagName("div");for (i=0; i<msg.length; i++){if(msg[i].className == msgClass) {if(document.cookie.indexOf(msg[i].id) == -1) {msg[i].style.display = "block";}}}}

    window.onload=function(){loadMsg('msgbox'); }
</script>

    http://kownleg.blogspot.com
    <style>
    div.guestwarn {
    background:#000000;
    color:#FFFFFF;
    max-width:280px;min-height:18px;padding:0 5px 3px;position:fixed;right: 2%;
        top: 50%;padding: 10px 15px;position: fixed;z-index: 10;font-size:12px;-moz-border-radius: 8px; -webkit-border-radius: 8px;  filter:alpha(opacity=88);
        -moz-opacity:.88; opacity:.88; -moz-box-shadow:5px 5px 5px #191919; -webkit-box-shadow:5px 5px 5px #191919; box-shadow:5px 5px 5px #191919;
    }
    .close {float: right;background: transparent url(http://1.bp.blogspot.com/-hMdL9UJje_c/UA7nJADBTSI/AAAAAAAAABU/S5zftNPRxfs/s1600/close.png);width: 22px;height: 22px;}
     </style> 

 <div id="message-1" class="msgbox" style="display: none;">
    <div class="guestwarn"><a href="#" class="close" onclick="closeBox('message-1');   return false;" title=""></a>
**My Sticky Text Is Here**
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:49:01.707

已经有很多为此构建的插件，我更喜欢[Purr](http://kitchen.net-perspective.com/open-source/purr/)，另一个我知道的是[jQuery Growl](http://www.fragmentedcode.com/jquery-growl/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:08:08.233

您可以使用 jquery`delay()`函数简单地执行此操作。

```
$("#message-1").live("click",function(){
        $(".guestwarn").show('slow');
        // show the counter
         $(".guestwarn").delay(10000).hide("slow");
          return false;
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:44:34.263

在脚本末尾添加这一行：

```
setTimeout(function(){closeBox('message-1')}, 10000); 
```

# image - 将图像添加到特定位置的按钮JavaFX

> ID：12678197
> 
> 赞同：16
> 
> 时间：2012-10-01T17:38:46.203
> 
> 标签：image, button, javafx

当我将图像和文本添加到按钮时，默认情况下元素是水平设置的。如何更改此行为以获取图像下的文本？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-01T18:24:14.533

在按钮上设置[contentDisplayProperty 。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#contentDisplayProperty)

```
button.setContentDisplay(ContentDisplay.TOP); 
```

这是一个可执行的示例：

```
import javafx.application.Application;
import javafx.event.*;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class ButtonGraphicTest extends Application {
  @Override public void start(final Stage stage) throws Exception {
    final Label response = new Label();
    final ImageView imageView = new ImageView(
      new Image("http://icons.iconarchive.com/icons/eponas-deeway/colobrush/128/heart-2-icon.png")
    );
    final Button button = new Button("I love you", imageView);
    button.setStyle("-fx-base: coral;");
    button.setContentDisplay(ContentDisplay.TOP);
    button.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        response.setText("I love you too!");
      }
    });

    final VBox layout = new VBox(10);
    layout.setAlignment(Pos.CENTER);
    layout.getChildren().addAll(button, response);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10; -fx-font-size: 20;");
    stage.setScene(new Scene(layout));
    stage.show();
  }
  public static void main(String[] args) { launch(args); }
}
// icon license: (creative commons with attribution) http://creativecommons.org/licenses/by-nc-nd/3.0/
// icon artist attribution page: (eponas-deeway) http://eponas-deeway.deviantart.com/gallery/#/d1s7uih 
```

![示例程序输出](../Images/632b40455dc4bf290b25984716713d3f.png)

# php - 用于网站导航的 PHP 循环/条件建议？

> ID：12678198
> 
> 赞同：-1
> 
> 时间：2012-10-01T17:38:47.403
> 
> 标签：php, oracle

编写我的第一个 php 应用程序。我被困在如何添加循环或条件语句...我正在从 Oracle 数据库查询添加我的站点导航...主要和辅助导航...我在我的代码中注意到我需要一个if 或 while 语句来决定是否写入**ul**标签。当我在主导航下有辅助导航时，我只希望编写**ul class = sub标签和后续的****li列表。**有什么建议可以为我指明正确的方向吗？提前致谢...

`

```
 $t1_query = "SELECT * FROM PLUS_NAV_T1 ORDER BY POSITION ASC";
        $t1_parse = oci_parse($sm_conn, $t1_query);
        oci_execute ($t1_parse);
        /* Add query error catch*/

        while ($t1_row = oci_fetch_array($t1_parse, OCI_ASSOC)) {
            echo "<li><a href=\"#\" title=\"\" class=\"exp\"><span>{$t1_row["T1_NAME"]}</span></a>";

                $t2_query = "SELECT * FROM PLUS_NAV_T2 WHERE T1_ID_FK = {$t1_row["ID_PK"]} ORDER BY POSITION ASC ";
                $t2_parse = oci_parse($sm_conn, $t2_query);
                oci_execute ($t2_parse);
                /* Add query error catch*/

                /*Need a conditional here so ul tag is only written when the primary nav has secondary nav*/
                    echo "<ul class=\"sub\">";
                    while ($t2_row = oci_fetch_array($t2_parse, OCI_ASSOC)) {
                        echo "<li><a href=\"#\" title=\"\" style=\"color\">{$t2_row["T2_NAME"]}</a></li>";
                    }
                    echo "</ul>";

            echo "</li>";
        } 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:57:49.740

我不熟悉 Oracle 驱动程序，但您可能需要该[`oci_num_rows()`](http://us.php.net/manual/en/function.oci-num-rows.php)功能。发出第二个查询后，您应该能够调用该函数，并检查它是否返回非零值：

```
if (oci_num_rows($t2_parse)) {
    // your code to output the UL
} 
```

实际上，您可能还应该验证 oci_execute() 返回 true，所以可能类似于：

```
if (oci_execute($t2_parse) && oci_num_rows($t2_parse)) {
    // ...
} 
```

# php - 在mysql php webservice中搜索

> ID：12678203
> 
> 赞同：0
> 
> 时间：2012-10-01T17:39:17.747
> 
> 标签：php, mysql, objective-c

我试图在我的应用程序中创建一个搜索功能，使用 AFNetworking 但是当它找不到任何东西时，除非我输入孔名称......

我在我的网络服务中的功能；

```
function streamSearch($name) {

    $result = query("SELECT name, email, IdPhoto  FROM users WHERE name LIKE '%", $name);

if (!$result['error']) {
    print json_encode($result);
} else {
    errorJson('search is broken');
}
} 
```

在我的 ios 我这样做：

```
[[API sharedInstance] commandWithParams:[NSMutableDictionary dictionaryWithObjectsAndKeys:@"streamSearch", @"command",theSearchBar.text, @"name", nil] onCompletion:^(NSDictionary *json) {
            //got stream
            NSDictionary *user = [json objectForKey:@"result"]; 
```

你能帮我吗，我需要它来找到所有有我输入的字母的用户....

后台查询：

```
function query() {
global $link;
$debug = false;

//get the sql query
$args = func_get_args();
$sql = array_shift($args);

//secure the input
for ($i=0;$i<count($args);$i++) {
    $args[$i] = urldecode($args[$i]);
    $args[$i] = mysqli_real_escape_string($link, $args[$i]);
}

//build the final query
$sql = vsprintf($sql, $args);

if ($debug) print $sql;

//execute and fetch the results
$result = mysqli_query($link, $sql);
if (mysqli_errno($link)==0 && $result) {

    $rows = array();

    if ($result!==true)
    while ($d = mysqli_fetch_assoc($result)) {
        array_push($rows,$d);
    }

    //return json
    return array('result'=>$rows);

} else {

    //error
    return array('error'=>'Database error');
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:23:12.813

代码可能应该如下所示：

```
$result = query("SELECT name, email, IdPhoto  FROM users WHERE name LIKE '%s%%'", $name); 
```

如果是“测试”，则充当“LIKE 'test%'” `$name`。

该`query()`函数的行为就像应该将`printf()`a编码为，并使用 传递字符串参数。`'%'``'%%'``'%s'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:43:08.043

如果这是您的代码的复制/粘贴，那么您在 SQL 语句中的 % 之后缺少一个结束引号。

# python - 如何删除符号链接以及源目录

> ID：12678205
> 
> 赞同：3
> 
> 时间：2012-10-01T17:39:25.087
> 
> 标签：python, shell, directory

我想删除符号链接以及源目录。

例如 -

```
ls -lrt
testsymlink -> /user/temp/testdir 
```

我想同时删除`testsymlink`和`/user/temp/testdir`。考虑到我知道唯一的符号链接名称。

任何带有 python 的实用程序都会做得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:44:08.947

您可以使用 的结果`os.path.realpath`来检测和删除符号链接目标。例子：

```
import os

# ./foo -> ./bar
filepath = "./foo"

if (os.path.realpath(filepath) != filepath):
    targetpath = os.path.realpath(filepath)

os.remove(filepath)
if (targetpath):
     os.remove(targetpath) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T17:46:26.157

编辑：我没有看到你想要 python 中的解决方案：这都只在 unix shell 中相关。尽管您*可以*将以下两个命令包装在一个`os.system()`电话中，但我强烈建议您遵循 Tim 的回答。

要获取符号链接指向的对象的路径，您可以使用`readlink`：

```
$ readlink testsymlink
/user/temp/testdir 
```

要删除符号链接指向的对象，您可以将输出传递`readlink`给`rm`：

```
$ rm -r `readlink testsymlink` 
```

反引号导致它们内部的命令运行，然后用它自己的输出替换。最后，要删除符号链接本身，我们只需运行：

```
$ rm testsymlink 
```

# sql - 更改 SQL 表以添加列

> ID：12678208
> 
> 赞同：2
> 
> 时间：2012-10-01T17:39:35.330
> 
> 标签：sql, sql-server, database

我目前有一个有四列的表 - 我想添加第五列但遇到了一些麻烦。

我在 sql server studio management 2008 中打开表，然后添加列信息，如下所示：

```
CREATE TABLE [dbo].[Case]
(
    CaseId                  UNIQUEIDENTIFIER DEFAULT (newid()) NOT NULL,
    CaseNumber              NVARCHAR(50) NOT NULL,
    CourtId                 INT NOT NULL,
    DateOpened              DATETIME NOT NULL,
) 
```

我的补充：

```
CREATE TABLE [dbo].[Case]
(
    CaseId                  UNIQUEIDENTIFIER DEFAULT (newid()) NOT NULL,
    CaseNumber              NVARCHAR(50) NOT NULL,
    CaseName                NVARCHAR(50),
    CourtId                 INT NOT NULL,
    DateOpened              DATETIME NOT NULL,
) 
```

添加 CaseName 列后，我尝试在 Management Studio 中执行该表，但收到错误消息“数据库中已有一个名为 'Case' 的对象。” 我尝试保存然后构建我的数据库，希望能添加该列，但没有成功。我尝试了一个新查询并编写了 'Alter table "case" add CaseName nvarchar(50) 但再次没有运气。它表明该文件已随新列更改，因为我保存了它，但是在构建了我的整个数据库之后，它没有进行任何更改。任何有用的提示都会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T17:44:46.877

你想`ALTER`，如下：

```
ALTER TABLE [dbo].[Case] ADD CaseName NVARCHAR(50) 
```

更好的是，您可以先检查该列的存在：

```
if not exists (SELECT 1 FROM sysobjects INNER JOIN syscolumns ON 
    sysobjects.id = syscolumns.id 
    WHERE sysobjects.name = N'Case' AND syscolumns.name = N'CaseName')
ALTER TABLE [dbo].[Case] ADD CaseName NVARCHAR(50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:42:03.550

使用`Alter table`语句而不是`Create`

如果`Alter`由于某种原因无法使语句正常工作，您也可以`drop`使用现有表和`create`带有新字段的新表，但所有现有行都将丢失。

如果您使用的是 SSMS，则可以`Design`使用表而不是`Edit`添加列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:45:47.517

你应该试试这个

```
 ALTER TABLE [dbo].[Case]

    ADD CaseName NVARCHAR(50) 
```

您正在尝试创建另一个表`Case`，但一个已经存在，这就是您遇到错误的原因。当你想编辑一个表时，你必须使用`Alter table`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T19:50:24.860

`ALTER`是你需要调查的 ( `F1`)

另一种选择是。
创建一个新表

```
CREATE TABLE [dbo].[Case2]
(
    CaseId                  UNIQUEIDENTIFIER DEFAULT (newid()) NOT NULL,
    CaseNumber              NVARCHAR(50) NOT NULL,
    CourtId                 INT NOT NULL,
    DateOpened              DATETIME NOT NULL,
newcolumn               INT NULL    
) 
```

将现有表中的数据移动到新表中

```
INSERT INTO [dbo].[Case2]
SELECT * FROM [dbo].[Case] 
```

然后

```
DROP TABLE [dbo].[Case] 
```

然后在管理工作室中右键单击“Case2”并将其重命名为“Case”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-13T12:01:16.833

我建议在添加之前检查列是否存在，这在使用迁移脚本时尤其重要。

以下是我通常的做法：

```
IF NOT EXISTS(SELECT * FROM sys.columns  WHERE Name = N'ColumnName' AND Object_ID = Object_ID(N'TableName'))
BEGIN
    ALTER TABLE [dbo].TableName ADD ColumnName NVARCHAR(512) null
END 
```

# gwt - GWT：如何反转按钮的垂直面板

> ID：12678210
> 
> 赞同：0
> 
> 时间：2012-10-01T17:39:52.897
> 
> 标签：gwt, user-interface

我有一个包含一组按钮的垂直面板。单击基本按钮时，面板会展开并显示作为垂直面板一部分的一组按钮。由于此基本按钮位于 hte UI 的底部，因此我对 CSS 进行了更改，以使展开的按钮看起来向上流动而不是向下流动。然而，看起来好像页面在展开状态下向下展开，这导致在页面上添加滚动，这是完全不希望的。

有没有办法将按钮添加到垂直面板上，而不是向下构建（倒置）？如果可能的话，我真的希望不必以不同的顺序添加按钮，然后再次使用 CSS。谢谢你的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:10:08.210

据`just invert the direction`我了解，您希望按钮面板浮动在现有页面的顶部并不容易。网页遵循流程结构，除非您指定，否则不要堆叠。

您可能必须将整个布局更改为绝对面板，或使用 CSS（正如您所说您不想这样做，但这绝对比前一种更容易），以便您可以将面板放置在任何您想要的位置。

CSS：

```
.button-panel{
    clip: rect(auto, auto, auto, auto);
    position: absolute;
    left: 100px;
    top: 319px;
    overflow: visible;
} 
```

爪哇：

```
YourVerticalPanel.addStyleName("button-panel"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:35:32.120

VerticalPanel 是您布局的错误小部件。您应该使用 PopupPanel 和一个非常简单的 CSS。当用户按下按钮时，您通过调用 .showRelativeTo() 方法显示此 PopupPanel。它会为你做所有的计算，它会根据浏览器窗口的大小和按钮的位置向下或向上显示。

在 PopupPanel 中添加一个 FlowPanel，然后将按钮添加到此 FlowPanel。将此样式应用于 FlowPanel：

```
.menu {
    width: 100px;
}
.menu input {
    float: left;
    margin-top: 10px;
    width: 100px;
} 
```

# c++ - 迭代器使用的编译时间验证？

> ID：12678214
> 
> 赞同：1
> 
> 时间：2012-10-01T17:40:12.420
> 
> 标签：c++, visual-studio-2010, c++11, iterator, erase

我有以下粗心的 C++ 代码，它在 VC10 下可以顺利编译，但在运行时却惨遭失败。我想知道是否有办法在编译时验证这种错误？

```
#include "stdafx.h"
#include <set>

void minus(std::set<int>& lhs, const std::set<int>& rhs)
{
    for ( auto i = rhs.cbegin(); i != rhs.cend(); ++i )
    {
        lhs.erase(i); // !!! while I meant "*i" !!!
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    int v_lhs[] = {0,1,2,3,4,5};
    std::set<int> s_lhs(&v_lhs[0], &v_lhs[sizeof(v_lhs) / sizeof(int)]);

    int v_rhs[] = {1,3,5};
    std::set<int> s_rhs(&v_rhs[0], &v_rhs[sizeof(v_rhs) / sizeof(int)]);

    minus(s_lhs, s_rhs);
    return 0;
} 
```

请注意，我完全意识到 C++11（VC10 早期部分采用）已经纠正了“擦除”实际上采用“const_iterator”的行为。

提前感谢您提供任何有价值的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:31:57.507

C++ 不是一种读心语言。它所知道的只是类型。它知道`erase`需要一个迭代器。它知道这`i`是一个相同类型的迭代器。因此，就 C++ 的编译器规则而言，调用`erase(i)`.

编译器无法知道您要做*什么*。编译器也没有办法知道 的内容*不*`i`适合`erase`. 你最好的选择是尽量避免错误。基于范围的`for`（或使用`std::for_each`）会在这里为您提供帮助，因为它们都隐藏了迭代器。

# java - 数据结构的多态性

> ID：12678215
> 
> 赞同：0
> 
> 时间：2012-10-01T17:40:20.150
> 
> 标签：java, arraylist, polymorphism

> **可能的重复：**
> [实现和集合](https://stackoverflow.com/questions/7098402/implementations-and-collections)

我的超级课是考试。我的子类之一是分析。

这在我的 ide 中是有效的

```
Exam object = new Analytical(); 
```

然而事实并非如此。

```
ArrayList<Exam> object = new ArrayList<Analytical>(); 
```

错误是从新到语句的结尾，它说“将对象类型更改为 ArrayList。所以我的问题是如何正确利用这种数据结构的多态性。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:43:11.193

泛型类型声明的两侧不能有不同的参数化类型。

所以，你必须在两边使用相同的类型..

它应该是： -

```
ArrayList<? extends Exam> object = new ArrayList<Analytical>(); 
```

或者

```
ArrayList<Exam> object = new ArrayList<Exam>(); 
```

或者

```
ArrayList<? extends Exam> object = new ArrayList<Exam>(); 
```

多态性，不适用于参数化类型..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:55:35.353

`Collections`仅在time 期间而不是在 期间**检查**，因此已采取此措施，因此**错误的类型不会进入集合**...`Compilation``Runtime`

 **`ArrayList<? extends Exam> object = new ArrayList<Analytical>();`

或者

`ArrayList<? extends Exam> object = new ArrayList<Exam>();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:42:28.760

您需要将其更改为：

```
ArrayList<? extends Exam> object = new ArrayList<Exam>(); 
```

[泛型](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)中的继承与我们通常的理解没有什么不同。**

# hadoop - EC2 上的 Cloudera CDH

> ID：12678217
> 
> 赞同：0
> 
> 时间：2012-10-01T17:40:24.767
> 
> 标签：hadoop, amazon-ec2, cloudera

我是 aws 新手，我正在尝试通过 Cloudera 的 AMI 在 EC2 上运行 Hadoop。我安装了 AMI，下载了 cloudera-haddop-for-ec2-tools，现在我正在尝试配置

```
haddop-ec2-env.sh 
```

它要求以下内容：

```
AWS_ACCOUNT_ID
AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY
EC2_KEYDIR
PRIVATE_KEY_PATH 
```

运行时：

```
./hadoop-ec2 launch-cluster my-cluster 10 
```

我越来越

```
AWS was not able to validate the provided access credentials 
```

首先，我有自己帐户的前 3 个属性。这是一个公司帐户，我收到一封电子邮件，其中包含我的电子邮件的访问密钥 ID 和秘密访问密钥。我的帐户是否可能没有适当的权限来执行此处所需的操作。究竟为什么这个脚本需要我的凭据？它需要做什么？

其次，EC2 密钥目录在哪里？我已经上传了亚马逊为我创建的 key.pem 文件，并将其硬编码到 PRIVATE_KEY_PATH 和 .pem 文件上的 chmod 400 中。这是该脚本需要的正确密钥吗？

任何帮助表示赞赏？

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:52:54.920

cloudera ec2 工具严重依赖 amazon ec2 api 工具。因此，您必须执行以下操作：

[1) 从http://aws.amazon.com/developertools/351](http://aws.amazon.com/developertools/351)下载 amazon ec2 api 工具

[2) 从http://cloudera-packages.s3.amazonaws.com/cloudera-for-hadoop-on-ec2-0.3.0.tar.gz](http://cloudera-packages.s3.amazonaws.com/cloudera-for-hadoop-on-ec2-0.3.0.tar.gz)下载 cloudera ec2 工具

3) 设置以下环境变量**我只给出基于 Unix 的示例**

```
export EC2_HOME=<path-to-tools-from-step-1>
export $PATH=$PATH:$EC2_HOME/bin
export $PATH=$PATH:<path-to-cloudera-ec2-tools>/bin
export EC2_PRIVATE_KEY=<path-to-private-key.pem>
export EC2_CERT=<path-to-cert.pem> 
```

4) 在 cloudera-ec2-tools/bin 中设置以下变量

```
AWS_ACCOUNT_ID=<amazon-acct-id>
AWS_ACCESS_KEY_ID=<amazon-access-key>
AWS_SECRET_ACCESS_KEY=<amazon-secret-key>
EC2_KEYDIR=<dir-where-the-ec2-private-key-and-ec2-cert-are>
KEY_NAME=<name-of-ec2-private-key> 
```

然后运行

```
$ hadoop-ec2 launch-cluster my-hadoop-cluster 10 
```

这将创建一个名为“my-hadoop”的hadoop集群，在多台ec2机器上有10个节点

# ruby - Ruby 1.8 和 Ruby 1.9 中 `Array#to_s` 的区别

> ID：12678218
> 
> 赞同：3
> 
> 时间：2012-10-01T17:40:39.773
> 
> 标签：ruby, arrays, ruby-1.9, ruby-1.8

> **可能重复：**
> [Ruby 1.9 Array.to_s 的行为不同？](https://stackoverflow.com/questions/3960392/ruby-1-9-array-to-s-behaves-differently)

我想知道是否有人能告诉我 Ruby 1.8.7 和 Ruby 1.9.3 之间发生了什么变化。我在下面列出了一个示例，它在 2 个版本中的行为完全不同，但根据 Ruby 文档，这些版本之间似乎没有任何变化。

红宝石 1.8

```
number = '123-45-6789' 
# => "123-45-6789"
number.scan(/[0-9]/)
# => ["1", "2", "3", "4", "5", "6", "7", "8", "9"]
number.scan(/[0-9]/).to_s
# => "123456789" 
```

红宝石 1.9

```
number = '123-45-6789'
# => "123-45-6789" 
number.scan(/[0-9]/)
# => ["1", "2", "3", "4", "5", "6", "7", "8", "9"]    
number.scan(/[0-9]/).to_s
# => "[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]" 
```

并不是真的在寻找一种不同的方法来做到这一点，只是好奇两个版本之间发生了什么变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:09:08.227

以下是 Ruby 源代码中的实际内容：

1.8.7：

```
rb_ary_to_s(ary)
    VALUE ary;
{
    if (RARRAY(ary)->len == 0) return rb_str_new(0, 0);
    return rb_ary_join(ary, rb_output_fs);
} 
```

换句话说，在 1.8.7 中，`to_s`调用`join`.

1.9.3：

```
rb_ary_inspect(VALUE ary)
{
    if (RARRAY_LEN(ary) == 0) return rb_usascii_str_new2("[]");
    return rb_exec_recursive(inspect_ary, ary, 0);
}

VALUE
rb_ary_to_s(VALUE ary)
{
    return rb_ary_inspect(ary);
} 
```

换句话说，在 1.9.3 中，`to_s`委托给`inspect`.

注意：将来，如果您想知道在两个版本之间观察到的差异，您可以尝试查看源代码。很容易从这里拉下来：[https ://github.com/ruby/ruby](https://github.com/ruby/ruby)

当然，并不是所有的东西都在那里很容易找到，但是如果你四处搜索一下，你通常可以找到好的线索。在这种情况下，`array.c`有你正在寻找的东西。

`git checkout ruby_1_8_7`然后您可以通过发出和在版本之间来回切换`git checkout ruby_1_9_3`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:49:33.233

已`to_s`更改为实际执行将对象转换为字符串应该执行的操作。

考虑 1.8 的实现...

1.  当您将 to`to_s`方法发送到数组对象时，它实际上是`array_object.join('').to_s`. 这个恕我直言做得太多了。
2.  此实现也歪曲了数组对象。该`to_s`方法主要与该`inspect`方法密切相关（如果我错了，请纠正我，因为我在这里工作不正常）。如果您应该在`to_s`这里查看方法的输出，您将无法判断该对象是否属于`Array`,`String`或`Fixnum`类。

进入 1.9 实现...

1.  输出的结构清楚地表明对象是一个数组。

话虽如此，我认为这是 Ruby 团队的 UX 设计决定……因为`to_s`1.8 版本的速度要快得多！

考虑这个微基准...

```
OS_X_Terminal $> time ruby -e "(1..1000000).to_a.map(&:to_s).to_s"

| Ruby Version | average runtime |
|    1.9.3     |      1.678      |
|    1.9.2     |      1.817      |
|    1.8.7     |      1.106      | 
```

这就是我到目前为止所拥有的。随时欢迎评论（：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:18:17.287

看起来 ruby​​ 在做什么方面变得更聪明了`.to_s`。它曾经很愚蠢，出于某种原因并排列出了数组中的所有条目。在 ruby​​ 1.9 中，它接受数组并将其转换为字符串。那是一种更聪明的处理方式`.to_s`。

# jquery - 限制对颜色框的页面访问

> ID：12678220
> 
> 赞同：1
> 
> 时间：2012-10-01T17:40:57.770
> 
> 标签：jquery, modal-dialog, colorbox

我有一个建立在独立 PHP 页面上的表单，但我只希望在通过 jQuery Colorbox 请求该页面时访问该页面。

您可以在此处查看相关网站：http: [//tinyurl.com/96uhuer](http://tinyurl.com/96uhuer)

当用户单击“立即向我们发送电子邮件”按钮之一时，表单会在 Colorbox 中弹出。但是，作为示例，用户可以右键单击按钮并选择“在新选项卡中打开”，这将打开表单的独立页面。

如果有人对如何解决此问题有任何想法，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:51:14.433

通常在这种情况下，如果您不打算以任何方式将其用作独立页面，则不要将其设为单独页面。查看[ColorBox 演示](http://www.jacklmoore.com/colorbox/example1/)，尤其是*Inline HTML*示例。

您会注意到该链接不包含指向单独页面的链接，而是包含指向同一页面上的元素的链接（内联）。这是你应该追求的。

如果您使用内联方法，如果用户决定在新选项卡上打开链接，它将显示他们所在的同一页面，而不是您的电子邮件表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:18:47.227

用户也可以单击鼠标中心按钮等。最简单的解决方案是删除链接，然后您可以像这样打开对话框：

```
$.colorbox({href:'http://www.formurl.com/form.php'}) 
```

此解决方案展示了硬编码链接，但您可以创建 css `class`，`data-attribute`然后在`click`事件中阅读它。

# c# - 2 年范围的下拉列表

> ID：12678222
> 
> 赞同：3
> 
> 时间：2012-10-01T17:41:00.477
> 
> 标签：c#, asp.net, webforms, viewstate

我被一个问题困住了，我真的没想到会被耽搁这么多小时，这让我发疯

如标题中所述，我需要两个 DropDownLists，其中 ToYears 列表的值从 FromYear 的选择开始：

***FromYear***
2000
2001
**2002**
2003
2004

***2002***
**年**
2003
年 2004 年

所以我尝试使用 2 < *asp:dropdownlist* > 并在 FromYear 的 SelectedIndexEvent 期间更改选定的 ToYear ，但这会触发选定的 FromYear 事件，并且它不会再次触发。

现在我从 Ajax Control Toolkit 中找到了[CascadingDropDown](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)，并认为这可能是件好事。但我不想调用网络服务，而是想在实际页面后面的代码中使用方法。

回发后还应记住选择 - 年份范围根据后面代码中的属性而变化。

我在某处读到自动回发不适用于 CascadingDropDown。

您认为最优雅、最简单的解决方案是什么？

非常感谢您提前。

编辑：我将发布我的帖子的一些部分 - 希望对标记有所帮助：

```
 <asp:DropDownList AutoPostBack="True" ID="DropDownFromYear" runat="server"     OnSelectedIndexChanged="FromYearChanged" />
    <asp:Label ID="UntilLabel" runat="server" Text=" until " />
    <asp:UpdatePanel ID="ToYearUpdatePanel" runat="server" style="display: inline-block;">
        <ContentTemplate>
            <asp:DropDownList AutoPostBack="true" ID="DropDownToYear" runat="server" OnSelectedIndexChanged="ToYearChanged" />
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="DropDownFromYear" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel> 
```

CodeBehind（从 OnInit 调用）：

```
 private void InitializeDropDownYears()
    {

        //Calculate the YearMin YearMax Properties
        CalculateYearMinMax();

        int adaptedFromYear = 0, adaptedToYear = 0;

        //get the previously selected Years
        if (DropDownToYear.SelectedItem != null) adaptedToYear = int.Parse(DropDownToYear.SelectedValue);
        if (DropDownFromYear.SelectedItem != null) adaptedFromYear = int.Parse(DropDownFromYear.SelectedValue);

        //check the minimum year constraints 2005 was selected but minYear is 2010 -> adpated is set to 2010
        if (YearMin > adaptedFromYear || adaptedFromYear == 0) adaptedFromYear = YearMin;
        if (YearMax < adaptedToYear || adaptedToYear == 0) adaptedToYear = YearMax;

        //check the 5 year range constraint
        if ((YearMax - YearMin) > 5)
        {
            adaptedFromYear = DateTime.Now.Year - 2;
            adaptedToYear = DateTime.Now.Year + 2;
        }

        Dictionary<string, string> toYears = new Dictionary<string, string>();
        Dictionary<string, string> fromYears = new Dictionary<string, string>();

        for (int tempYear = YearMin; tempYear <= YearMax; tempYear++)
        {
            fromYears.Add(tempYear.ToString(), tempYear.ToString());
            if (tempYear >= adaptedFromYear)
            {
                toYears.Add(tempYear.ToString(), tempYear.ToString());
            }
        }

        DropDownFromYear.DataSource = fromYears;
        DropDownFromYear.DataValueField = "Key";
        DropDownFromYear.DataTextField = "Value";
        DropDownFromYear.SelectedValue = adaptedFromYear.ToString();
        DropDownFromYear.DataBind();

        DropDownToYear.DataSource = toYears;
        DropDownToYear.DataValueField = "Key";
        DropDownToYear.DataTextField = "Value";
        DropDownToYear.SelectedValue = adaptedToYear.ToString();
        DropDownToYear.DataBind();
        if(!IsPostBack)
        {
            SelectedFromYear = adaptedFromYear;
            SelectedToYear = adaptedToYear;
        }
    }

    private void CalculateYearMinMax()
    {
        IList<Task> taskList = CurrentLicense.TaskList;

        List<DateTime> startDates = taskList.Select(task => task.StartDate).ToList();
        YearMin = startDates.Min(date => date).Year;

        List<DateTime> endDates = taskList.Select(task => task.EndDate).ToList();
        YearMax = endDates.Max(date => date).Year;
    } 
```

事件处理程序：

```
 protected void FromYearChanged(object sender, EventArgs e)
    {
        SelectedFromYear = int.Parse(DropDownToYear.SelectedValue);
        SelectedToYear = int.Parse(DropDownFromYear.SelectedValue);
        if (SelectedFromYear > SelectedToYear)
        {
            SelectedToYear = SelectedFromYear;
        }
        UpdateGanttTables();
    }

    protected void ToYearChanged(object sender, EventArgs e)
    {
        SelectedFromYear = int.Parse(DropDownToYear.SelectedValue);
        SelectedToYear = int.Parse(DropDownFromYear.SelectedValue);
        UpdateGanttTables();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:47:40.480

填充`DropDownList`控制听起来很容易对吧？它是，当您使用 ASP.NET WebForms 的默认行为时。但是，当您想要获得特定功能时，您可能会遇到几个问题，例如，在 WebForms 中，尝试`DropDownLists`使用 AJAX 填充（这真的很痛苦，我找到的唯一解决方案是禁用页面上的安全检查`<%@ Page EnableEventValidation="false"`）

以供参考：

[如何填写 asp:DropDown 客户端？](https://stackoverflow.com/q/11252471/1268570)

由于您使用的是 WebForms 可能最好的方法是使用总`UpdatePanel`

例子：

### 结果

![在此处输入图像描述](../Images/34a2d78c26736db34d07467d1ab82c4d.png)

### ASPX 标记

```
 <asp:ScriptManager runat="server" ID="sm" />
    <asp:UpdateProgress runat="server" AssociatedUpdatePanelID="updatePanel" DisplayAfter="0" DynamicLayout="true">
        <ProgressTemplate>
            Working...
        </ProgressTemplate>
    </asp:UpdateProgress>
    <asp:UpdatePanel runat="server" ID="updatePanel">
        <ContentTemplate>
            <div>
                <asp:Label ID="Label1" Text="From" runat="server" AssociatedControlID="from" />
            </div>
            <div>
                <asp:DropDownList runat="server" ID="from" AutoPostBack="true" CausesValidation="false" OnSelectedIndexChanged="from_SelectedIndexChanged">
                </asp:DropDownList>
            </div>
            <div>
                <asp:Label ID="Label2" Text="To" runat="server" AssociatedControlID="to" />
            </div>
            <div>
                <asp:DropDownList runat="server" ID="to" />
            </div>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

### 后面的页面代码

```
 private const int MaxYear = 2030;
    private const int MinYear = 1959;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            var fromRange = Enumerable.Range(MinYear, MaxYear - MinYear);

            this.from.DataSource = fromRange;
            this.from.DataBind();
        }
    }

    protected void from_SelectedIndexChanged(object sender, EventArgs e)
    {
        var selectedYear = Convert.ToInt32(this.from.SelectedValue);
        var toRange = Enumerable.Range(selectedYear, MaxYear - selectedYear);

        this.to.DataSource = toRange;
        this.to.DataBind();
    } 
```

[我刚刚将此示例上传到我的 GitHub 以供参考](https://github.com/jupaol/SO-Answers/blob/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/DataBinding/ForDropDownList/LinkingTwoDropDownLists.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:28:17.883

最后，我想通了并得到了-我认为这是一个不错的解决方案，因为它使我能够：

*   最初用数据填充两个 DDL
*   在两个 DDL 中预选项目
*   仍然在页面上使用 EnableEventValidation="true"
*   我可以通过简单地调用 DataBind() 来更新 DDL；在他们

与我之前的方法的主要区别在于，我在 DDL 的 OnDataBinding 事件期间填充了数据。因此，当我在 PageLoad 期间执行 DataBind() 时，它会自动发生。我首先要确保的唯一一件事是填写包含我的信息的字典。

如果我想从 FromYearsDDL 的 selectionChangeEvent 更新 ToYearsDDL，我只需更新 ToYearsDDL 的数据并调用 ToYearsDDL.DataBind();

希望这可以帮助遇到同一堵墙的其他人！

标记来了：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="LinkedDropDownsBound.aspx.cs"
    Inherits="ASP.Net_Spielwiese.LinkedDropDownsBound"  EnableEventValidation="true" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:UpdatePanel runat="server" ID="updatePanel">
            <ContentTemplate>
                <div>
                    <asp:Label ID="FromLabel" Text="From" Enabled="false" runat="server"  />
                </div>
                <div>
                    <asp:DropDownList runat="server" ID="FromYearsDDL" AutoPostBack="true" CausesValidation="false" OnDataBinding="DDLFromDataBind"
                        OnSelectedIndexChanged="DDLFromSelectedIndexChanged">
                    </asp:DropDownList>
                </div>
                <div>
                    <asp:Label ID="ToLabel" Text="To" Enabled="false" runat="server" />
                </div>
                <div>
                    <asp:DropDownList runat="server" ID="ToYearsDDL" AutoPostBack="true" CausesValidation="false" OnDataBinding="DDLToDataBind"
                        OnSelectedIndexChanged="DDLToSelectedIndexChanged"/>
                </div>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

这是后面的代码：

```
public partial class LinkedDropDownsBound : System.Web.UI.Page
{
    public Dictionary<String, Boolean> FromYears
    {
        get
        {
            if (ViewState["FromYears"] == null)
            {
                ViewState["FromYears"] = new Dictionary<String, Boolean>();
            }
            return ViewState["FromYears"] as Dictionary<String, Boolean>;
        }
        set
        {
            ViewState["FromYears"] = value;
        }
    }
    public Dictionary<String, Boolean> ToYears
    {
        get
        {
            if (ViewState["ToYears"] == null)
            {
                ViewState["ToYears"] = new Dictionary<String, Boolean>();
            }
            return ViewState["ToYears"] as Dictionary<String, Boolean>;
        }
        set
        {
            ViewState["ToYears"] = value;
        }
    }

    public int MinYear = 1975;
    public int MaxYear = 2015;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            InitFromYears();
            InitToYears();
            DataBind();
        }
    }

    private void InitFromYears()
    {
        FromYears = new Dictionary<string, bool>();
        IEnumerable<int> fromRange = Enumerable.Range(MinYear, MaxYear - MinYear);

        foreach (var fromYear in fromRange)
        {
            FromYears.Add(fromYear.ToString(), fromYear == (DateTime.Now.Year - 2));
        }
    }

    private void InitToYears()
    {
        ToYears = new Dictionary<string, bool>();
        //get the selected FromYear Value
        int minToYear = Convert.ToInt32(FromYears.FirstOrDefault(dict => dict.Value).Key);
        //make sure ToYears is at least FromYears
        if (minToYear < Convert.ToInt32(FromYears.Min(k => k.Key)))
        {
            minToYear = Convert.ToInt32(FromYears.Min(k => k.Key));
        }
        IEnumerable<int> toRange = Enumerable.Range(minToYear, MaxYear - minToYear);
        foreach (var toYear in toRange)
        {
            ToYears.Add(toYear.ToString(), toYear == (DateTime.Now.Year + 2));
        }
    }

    protected void DDLFromDataBind(object sender, EventArgs e)
    {
        FromYearsDDL.DataSource = FromYears;
        FromYearsDDL.DataValueField = "Key";
        FromYearsDDL.DataTextField = "Key";
        FromYearsDDL.SelectedValue = FromYears.FirstOrDefault(y => y.Value).Key;
    }

    protected void DDLFromSelectedIndexChanged(object sender, EventArgs e)
    {
        //update the FromYear Dictionary
        var tempDictionary = FromYears.ToDictionary(fromYear => fromYear.Key, fromYear => fromYear.Key.Equals(FromYearsDDL.SelectedValue));
        FromYears = tempDictionary;

        //Call Bind on the ToYear DDL
        ToYearsDDL.DataBind();

        //do my other update stuff here
        FromLabel.Text = FromYearsDDL.SelectedValue;
        ToLabel.Text = ToYearsDDL.SelectedValue;
    }

    protected void DDLToSelectedIndexChanged(object sender, EventArgs e)
    {
        //do my other update stuff here
        FromLabel.Text = FromYearsDDL.SelectedValue;
        ToLabel.Text = ToYearsDDL.SelectedValue;
    }

    protected void DDLToDataBind(object sender, EventArgs e)
    {
        InitToYears();
        ToYearsDDL.DataSource = ToYears;
        ToYearsDDL.DataValueField = "Key";
        ToYearsDDL.DataTextField = "Key";
        ToYearsDDL.SelectedValue = ToYears.FirstOrDefault(y => y.Value).Key;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T15:00:56.347

这是 HTML 页面

在c#页面后面的代码中

```
private void BindYearDropdown()
        {
            int year;

            for (year = DateTime.Now.Year; year >= 2010 ; year--)
            {
                DDLYear.Items.Add(year.ToString());
            }
        } 
```

上面的代码适用于 Years Back 病房

# ruby-on-rails - Webistrano 卡在 deploy:update_code

> ID：12678224
> 
> 赞同：0
> 
> 时间：2012-10-01T17:41:09.867
> 
> 标签：ruby-on-rails, deployment, capistrano, webistrano

我一直在尝试在我们的一台服务器上设置 webistrano。一切都很顺利，直到我尝试部署我的设置。Webistrano 目前设置在测试服务器上，所以我希望它部署到 127.0.0.1

配置包含有效用户 webistrano，应该有权访问 /home/webistrano/.subversion/servers

该用户的密码正确。有人可以阐明它可能出了什么问题吗？

```
*** SSH options: setting ssh_port to: 22
*** LOCAL SCM ERROR: svn: warning: Can't open file '/home/webistrano/.subversion/servers': Permission denied
  * executing `deploy'
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
  * executing "svn checkout -q --username webistrano --password XXXXXXXX --no-auth-cache  -r27687 http://server.com/repos/server/clients/site/trunk     /var/www/vhosts/server.com/releases/20121001183038 && (echo 27687 > /var/www/vhosts/server.com/releases/20121001183038/REVISION)"
    servers: ["127.0.0.1"]
*** [deploy:update_code] rolling back
  * executing "rm -rf /var/www/vhosts/server.com/releases/20121001183038; true"
servers: ["127.0.0.1"]
 ** [deploy:update_code] exception while rolling back: Capistrano::ConnectionError, connection failed for: 127.0.0.1 (Errno::EACCES: Permission denied - connect(2))
*** connection failed for: 127.0.0.1 (Errno::EACCES: Permission denied - connect(2)) 
```

`puts system('id')`使用in`deployer.rb`返回调试

```
uid=500(webistrano) gid=500(webistrano) groups=500(webistrano) context=unconfined_u:system_r:httpd_t:s0 
```

并`ls -all /home/webistrano`返回：

`drwxrwxr-x. 3 webistrano webistrano 4096 Sep 27 16:59 .subversion`

ls -all /home/webistrano/.subversion 返回：

```
drwxrwxr-x. 3 webistrano webistrano 4096 Oct  1 20:02 .
drwx------. 4 webistrano webistrano 4096 Oct  1 22:14 ..
drwx------. 6 webistrano webistrano 4096 Sep 27 16:59 auth
-rw-rw-r--. 1 webistrano webistrano 6866 Sep 27 16:59 config
-rw-rw-r--. 1 webistrano webistrano 4276 Sep 27 16:59 README.txt
-rw-rw-r--. 1 webistrano webistrano 7674 Oct  1 20:02 servers 
```

这表明每个人都应该完全可读服务器？这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:23:30.597

事实证明这是Passenger的问题。Phusion Passenger 应该以拥有 conf/environment.conf（在我的例子中是 webistrano）的用户身份运行。显示用户 id 也显示 webistrano，但如果我将其更改为以无人身份运行，svn 错误将停止出现。我无法 svn 导出代码，可能是因为没有人没有主目录。

我最终通过**mongrel**运行 webistrano ，并通过以下方式启动它：

```
$ su - webistrano 
```

确保加载了正确的家庭环境并且所有权限都正确。它现在完美无缺。希望这可以帮助某人

# c++ - 射线与球体相交的相交问题

> ID：12678225
> 
> 赞同：2
> 
> 时间：2012-10-01T17:41:10.803
> 
> 标签：c++, geometry, intersection, raytracing

我正在编写一个简单的光线追踪器，为了保持简单，我决定在我的场景中只使用球体。我现在处于一个阶段，我只想确认我的光线是否正确地与场景中的球体相交，仅此而已。我创建了一个 Ray 和 Sphere 类，然后在我的主文件中创建了一个函数，该函数遍历每个像素以查看是否存在交叉点（相关代码将在下面发布）。问题是与球体的整个交叉点表现得相当奇怪。如果我创建一个中心为 (0, 0, -20) 且半径为 1 的球体，那么我只会得到一个交点，该交点始终位于我的图像的第一个像素（左上角）。一旦我到达 15 的半径，我会突然在左上角区域看到三个交叉点。

我怀疑我的射线球相交代码在这里可能有问题，但是通过查看它并通过网络查看更多信息，大多数解决方案都描述了我使用的相同方法，所以我认为它不应该（！）有问题这里。所以......我不确定我做错了什么，它可能是我的交集代码，也可能是其他导致问题的东西。我似乎无法找到它。给球体和光线赋值时，我想错了吗？下面是相关代码

**球体类：**

```
Sphere::Sphere(glm::vec3 center, float radius) 
: m_center(center), m_radius(radius), m_radiusSquared(radius*radius)
{
}

//Sphere-ray intersection. Equation: (P-C)^2 - R^2 = 0, P = o+t*d
//(P-C)^2 - R^2 => (o+t*d-C)^2-R^2 => o^2+(td)^2+C^2+2td(o-C)-2oC-R^2
//=> at^2+bt+c, a = d*d, b = 2d(o-C), c = (o-C)^2-R^2
//o = ray origin, d = ray direction, C = sphere center, R = sphere radius
bool Sphere::intersection(Ray& ray) const
{
    //Squared distance between ray origin and sphere center
    float squaredDist = glm::dot(ray.origin()-m_center, ray.origin()-m_center);

    //If the distance is less than the squared radius of the sphere...
    if(squaredDist <= m_radiusSquared)
    {
        //Point is in sphere, consider as no intersection existing
        //std::cout << "Point inside sphere..." << std::endl;
        return false;
    }

    //Will hold solution to quadratic equation
    float t0, t1;

    //Calculating the coefficients of the quadratic equation
    float a = glm::dot(ray.direction(),ray.direction()); // a = d*d
    float b = 2.0f*glm::dot(ray.direction(),ray.origin()-m_center); // b = 2d(o-C)
    float c = glm::dot(ray.origin()-m_center, ray.origin()-m_center) - m_radiusSquared; // c = (o-C)^2-R^2

    //Calculate discriminant
    float disc = (b*b)-(4.0f*a*c);

    if(disc < 0) //If discriminant is negative no intersection happens
    {
        //std::cout << "No intersection with sphere..." << std::endl;
        return false;
    }
    else //If discriminant is positive one or two intersections (two solutions) exists
    {
        float sqrt_disc = glm::sqrt(disc);
        t0 = (-b - sqrt_disc) / (2.0f * a);
        t1 = (-b + sqrt_disc) / (2.0f * a);
    }

    //If the second intersection has a negative value then the intersections
    //happen behind the ray origin which is not considered. Otherwise t0 is
    //the intersection to be considered
    if(t1<0)
    {
        //std::cout << "No intersection with sphere..." << std::endl;
        return false;
    }
    else
    {
        //std::cout << "Intersection with sphere..." << std::endl;
        return true;
    }
} 
```

**程序：**

```
#include "Sphere.h"
#include "Ray.h"

void renderScene(const Sphere& s);

const int imageWidth = 400;
const int imageHeight = 400;

int main()
{
    //Create sphere with center in (0, 0, -20) and with radius 10
    Sphere testSphere(glm::vec3(0.0f, 0.0f, -20.0f), 10.0f);

    renderScene(testSphere);

    return 0;
}

//Shoots rays through each pixel and check if there's an intersection with
//a given sphere. If an intersection exists then the counter is increased.
void renderScene(const Sphere& s)
{
    //Ray r(origin, direction)
    Ray r(glm::vec3(0.0f), glm::vec3(0.0f));

    //Will hold the total amount of intersections
    int counter = 0;

    //Loops through each pixel...
    for(int y=0; y<imageHeight; y++)
    {
        for(int x=0; x<imageWidth; x++)
        {
            //Change ray direction for each pixel being processed
            r.setDirection(glm::vec3(((x-imageWidth/2)/(float)imageWidth), ((imageHeight/2-y)/(float)imageHeight), -1.0f));

            //If current ray intersects sphere...
            if(s.intersection(r))
            {
                //Increase counter
                counter++;
            }
        }
    }

    std::cout << counter << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:54:13.683

`t1`在这种情况下，您对二次方程的第二个解 ( ) 是错误的`disc > 0`，您需要以下内容：

```
float sqrt_disc = glm::sqrt(disc);
t0 = (-b - sqrt_disc) / (2 * a);
t1 = (-b + sqrt_disc) / (2 * a); 
```

我认为最好以这种形式写出方程，而不是将除以 2 变成乘以 0.5，因为代码越像数学，就越容易检查。

其他一些小评论：

1.  重用名称似乎令人困惑`disc`，`sqrt(disc)`所以我在上面使用了一个新的变量名称。

2.  您不需要测试`t0 > t1`，因为您知道`a`和`sqrt_disc`都是正数，因此`t1`总是大于`t0`。

3.  如果光线原点在球体内，则可能为`t0`负也可能为`t1`正。你似乎没有处理这个案子。

4.  不需要特殊情况`disc == 0`，因为一般情况计算的值与特殊情况相同。（并且您拥有的特殊情况越少，检查代码就越容易。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:35:03.700

如果我正确理解您的代码，您可能想尝试：

```
r.setDirection(glm::vec3(((x-imageWidth/2)/(float)imageWidth),
                         ((imageHeight/2-y)/(float)imageHeight),
                         -1.0f)); 
```

现在，您已将相机放置在距离屏幕一单位的位置，但光线可以向右和向下拍摄多达 400 个单位。这是一个非常广阔的视野。而且，你的光线只扫过一个八分之一的空间。这就是为什么您只能在屏幕的左上角获得少量像素的原因。我上面写的代码应该可以纠正这个问题。

# c# - 面板的动态名称

> ID：12678228
> 
> 赞同：1
> 
> 时间：2012-10-01T17:41:32.363
> 
> 标签：c#, winforms, dynamic, label, panel

我正在开发一个应该与多个用户一起使用的程序。我正在从数据库中获取用户。到目前为止，一切都很好...

我正在向表单动态添加一个面板，该面板将保存一些数据。我正在使用这段代码来实现这一点：

```
string panel_name = "email_in_" + user_credentials[counter_snel][0];
Panel new_user_panel = new Panel();
new_user_panel.AutoSize = true;
new_user_panel.Dock = System.Windows.Forms.DockStyle.Fill;
new_user_panel.Location = new System.Drawing.Point(0, 0);
new_user_panel.Name = panel_name;
new_user_panel.Visible = false;

Label new_item = new Label();
new_item.AutoSize = true;
new_item.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;
string new_item_text = string.Format("{0,0}\n{1,0}\n{2,0}", user_credentials[counter_snel][1], user_credentials[counter_snel][2],user_credentials[counter_snel][9]);
new_item.Text = new_item_text;
splitContainer2.panel_name.Controls.Add(new_item); 
```

您可能会注意到，这行代码不起作用：

```
splitContainer2.panel_name.Controls.Add(new_item); 
```

我怎样才能做到这一点，所以当我想让面板 email_in_1 可见时，我可以使用它，并使 email_in_8 不可见？

### ### 编辑 1 ###

代码现在看起来像这样：

```
string panel_name = "email_in_" + user_credentials[counter_snel][0];
Panel new_user_panel = new Panel();
new_user_panel.AutoSize = true;
new_user_panel.Dock = System.Windows.Forms.DockStyle.Fill;
new_user_panel.Location = new System.Drawing.Point(0, 0);
new_user_panel.Name = panel_name;
new_user_panel.Visible = true;
user_email_in_panels.Add(new_user_panel);
splitContainer2.Panel1.Controls.Add(new_user_panel);

Label new_item = new Label();
new_item.AutoSize = true;
new_item.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;
string new_item_text = string.Format("{0,0}\n{1,0}\n{2,0}", user_credentials[counter_snel][1], user_credentials[counter_snel][2],user_credentials[counter_snel][9]);
new_item.Text = new_item_text;
int aantal_panels = 0;
foreach (Panel panel in user_email_in_panels) {
        aantal_panels++;
}
int counter_1 = 0;
foreach (Panel panel in user_email_in_panels) {
        if(counter_1 == (aantal_panels -1)){
               MessageBox.Show("We are here");
               panel.Controls.Add(new_item);
               splitContainer1.Panel1.Controls.Add(panel);
        }
        counter_1++;
} 
```

但不知何故，我没有看到表格中显示的任何标签......我错过了什么吗？显示了带有 We are Here 文本的消息框，所以它出现在 add 语句中......

除了我的第一个问题，我还有另一个问题。我的问题是，我怎样才能使列表的计数器更好？

### ### 为肖恩·沃恩编辑

我已将其更新为：

```
public class MyPanelClass {
    public string Name {
        get;
        set;
    }

    public bool Visible {
        get;
        set;
    }

    public string YourLabelsText {
        get;
        set;
    }
}

Label new_item = new Label();
new_item.AutoSize = true;
new_item.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;
string new_item_text = string.Format("{0,0}\n{1,0}\n{2,0}", user_credentials[counter_snel][1], user_credentials[counter_snel][2], user_credentials[counter_snel][9]);
new_item.Text = new_item_text;

Panel base_panel = new Panel();    //this is your base panel, you don't need to add this line of code because Visual Studio will do that for you.
List<MyPanelClass> myPanelList = new List<MyPanelClass>();    //this will keep records of all of your panels.

MyPanelClass panel_name = new MyPanelClass();
panel_name.Name = "email_in_" + user_credentials[counter_snel][0]; ;
panel_name.Visible = true;
panel_name.YourLabelsText = string.Format("{0,0}\n{1,0}\n{2,0}", user_credentials[counter_snel][1], user_credentials[counter_snel][2], user_credentials[counter_snel][9]);

//Now add the new created panel to the list.
myPanelList.Add(panel_name);

base_panel.Name = myPanelList[counter_snel].Name;
base_panel.Visible = myPanelList[counter_snel].Visible; //You probably don't need this because base_panel will always be visible
new_item.Text = myPanelList[counter_snel].YourLabelsText; 
```

但我还是什么都没看到……它在公共空间中执行有关系吗？？？我不这么认为，但它想消除所有的可能性......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:49:20.617

使用`List`将跟踪所有面板的。

```
List<Panel> myPanels = new List<Panel>(); 
```

每当您需要添加面板时，请执行以下操作：

```
mypanels.Add(yourPanel); 
```

现在，对于另一个问题，创建一个这样的函数：

```
private void HideAllOtherPanels(List<Panel> panelList, Int index /*the index of the panel you want to show*/)
{
    foreach(Panel panel in panelList)
        if(panel.Visible) panel.Hide();

    panelList[index].Show();
} 
```

我看到您正在创建很多新面板。我的建议，不要那样做，你会给系统带来很多负担。

而是上课。

```
public class MyPanelClass
{
    public string Name
    {
        get; set;
    }

    public bool Visible
    {
        get; set;
    }

    public string YourLabelsText
    {
        get; set;
    }
} 
```

创建类后，在您的表单上创建一个 base_panel，它将根据您的意图更改其内容。然后，您需要做的就是更改面板的内容，而不是创建一个新的面板。将其他面板数据存储在`List<MyPanelClass>`.

所以你会这样做：

```
Panel base_panel = new Panel();    //this is your base panel, you don't need to add this line of code because Visual Studio will do that for you.
List<MyPanelClass> myPanelList = new List<MyPanelClass>();    //this will keep records of all of your panels.

MyPanelClass panel_name = new MyClassPanel();
panel_name.Name = "email_in_" + user_credentials[counter_snel][0];;
panel_name.Visible = false;
panel_name.YourLabelsText = string.Format("{0,0}\n{1,0}\n{2,0}", user_credentials[counter_snel][1], user_credentials[counter_snel][2],user_credentials[counter_snel][9]);

//Now add the new created panel to the list.
myPanelList.Add(panel_name); 
```

现在，每当您需要激活存储的面板时，只需执行以下操作：

```
base_panel.Name = myPanelList[yourPanelsIndex].Name;
base_panel.Visible = myPanelList[yourPanelsIndex].Visible; //You probably don't need this because base_panel will always be visible
yourLabel.Text = myPanelList[yourPanelsIndex].YourLabelsText; 
```

这段代码在机器上的体积要小得多，而且也很容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:59:43.043

我会尝试这样的事情来添加一个项目。

```
var panel = splitContainer2.Controls.FirstOrDefault(p => p is Panel && ((Panel)p).Name == panel_name);
if(panel != nul) 
{
    panel.Controls.Add(new_item);
} 
```

要隐藏给定的特定面板`panel_name`：

```
foreach(var control in splitContainer2.Controls)
{
    if(control is Panel)
    {
        ((Panel)control).Visible = ((Panel)control).Name == panel_name;
    }
} 
```

# macos - 如何在 NASM 中打印 argv[0]？

> ID：12678230
> 
> 赞同：3
> 
> 时间：2012-10-01T17:42:00.367
> 
> 标签：macos, assembly, nasm, argv

我想存储`argv[0]`在一个寄存器中然后打印它，但是当我运行我的汇编程序时我遇到了一个段错误。

痕迹：

```
$ nasm -f macho -o scriptname.o --prefix _ scriptname.asm
$ ld -o scriptname scriptname.o -arch i386 -lc -macosx_version_min 10.6 -e _start -no_pie
$ ./scriptname
Segmentation fault: 11 
```

脚本名.asm：

```
[bits 32]

section .data

program: db "Program: %s", 0

section .text

global start
extern printf
extern exit

start:

; skip argc
add esp, 4

; ebx := argv[0]
pop ebx

push ebx
push program
call printf
add esp, 8

push 0
call exit 
```

眼镜：

*   ld 64-134.9
*   NASM 0.98.40
*   Xcode 4.5
*   Mac OS X 10.8.2
*   MacBook Pro 2009

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:21:39.593

分段错误来自**错误的堆栈对齐**( `misaligned_stack_error`)。
当您遇到此类问题时，请始终**尝试使用 GDB 运行您的程序**。它通常会为您提供更多信息。

但是要恢复，当您从 C 库中调用函数时，堆栈需要在**16 字节边界**上对齐。
这是**Mac OS X 32 位 ABI**的要求（注意这也是 64 位 ABI 的情况，它使用 SYS V 调用约定）。

所以这是你的程序的一个工作版本，它将打印可执行文件的名称，以及 CLI 参数的数量（解释就在后面）：

```
[bits 32]

section .data

    hello db "Program name: %s (%i CLI args)", 10, 0

section .text

global start
extern _exit
extern _printf

start:

    ; Store 'argc' into EAX
    pop     eax

    ; Store 'argv' into EBX
    pop     ebx

    ; Align stack on a 16 bytes boundary,
    ; as we'll use C library functions
    mov     ebp,                esp
    and     esp,                0xFFFFFFF0

    ; Stack space for local variables
    ; A little more space than needed, but that will
    ; ensure the stack is still aligned
    sub     esp,                16

    ; Call 'printf': printf( hello, ebx, eax );
    mov     dword[ esp ],       hello
    mov     dword[ esp + 4 ],   ebx
    mov     dword[ esp + 8 ],   eax
    call   _printf

    ; Call 'exit': exit( 0 );
    mov     dword[ esp ],       0
    call   _exit 
```

编译它使用：

```
nasm -f macho -o test.o test.asm
ld -o test test.o -arch i386 -lc -macosx_version_min 10.6 
```

**解释：**

我们首先在一些寄存器中存储`argc`和：`argv`

```
 pop     eax
    pop     ebx 
```

然后我们在 16 字节边界上对齐堆栈：

```
 mov     ebp,                esp
    and     esp,                0xFFFFFFF0 
```

在为局部变量创建空间时`start`，假设您**保持堆栈对齐**，您只能在开始时执行此操作一次。

然后我们为局部变量创建必要的空间，**确保堆栈保持对齐。**
在这里，我们只需要 3 个堆栈参数的空间，但我们为 4 个创建空间，以保持堆栈对齐。

```
 sub     esp,                16 
```

然后，您可以在该空间上移动值，为调用准备参数：

```
 mov     dword[ esp ],       hello
    mov     dword[ esp + 4 ],   ebx
    mov     dword[ esp + 8 ],   eax 
```

然后只需调用 C 库函数，就可以了。

请注意，您还可以在[此答案 (x86 Assembly on a Mac)](https://stackoverflow.com/a/357113/182676)中找到一些有用的信息。

# opencl - 停止失控的 OpenCL 内核

> ID：12678234
> 
> 赞同：1
> 
> 时间：2012-10-01T17:42:06.480
> 
> 标签：opencl

我不小心写了一个永远不会在内核中中断的while循环，然后我将它发送到了GPU。30 秒后，我的屏幕开始闪烁，我意识到我做了什么并强行终止了应用程序。问题是我必须在之后关闭计算机以确保内核已经消失。因此我的问题是：

1.  如果我强制终止程序（启动内核的程序）而不释放 GPU 资源（释放缓冲区、队列、内核、CL.destroying），内核还会运行吗？
2.  如果它们仍在运行，我可以做些什么来阻止它们吗？比如说，释放资源，我再也没有办法处理了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:16:26.970

如果您使用的是 NVIDIA 卡，则通过终止应用程序，您最终将释放卡上的资源以使其再次运行。这是因为 NVIDIA 在设备上有一个看门狗监视器（您可以将其[关闭](https://stackoverflow.com/questions/497685/how-do-you-get-around-the-maximum-cuda-run-time)）。

如果您使用的是 AMD 卡，那么您就不走运了，AFAIK 每次崩溃后都必须重新启动机器。

# ios - UI 按钮图像粘贴 iOS 6

> ID：12678235
> 
> 赞同：0
> 
> 时间：2012-10-01T17:42:12.300
> 
> 标签：ios, ios5, user-interface, uibutton, ios6

我有一个推特按钮的方法

```
 -(IBAction)tweetThis:(id ) sender{

    if ([sender isSelected]) {
        [sender setImage:[UIImage imageNamed:@"TwitterButtonBlue.png"] forState:UIControlStateNormal];
        [sender setSelected:NO];
    }
    else {
        [sender setImage:[UIImage imageNamed:@"TwitterButtonBlack.png"] forState:UIControlStateSelected];
        [sender setSelected:YES];}

    } 
```

在模拟器中，当我点击按钮（我在 IB 中作为内部修饰）时，按钮单击并更改为图像，但它不会返回到原始按钮图像，因此例如 blue.png 变为黑色。 png 但保持黑色并且不会变回蓝色。无论如何我可以解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:44:19.763

如果我理解正确，您只是想在点击按钮时更改按钮图像。如果是这样，您可以像这样简单地配置按钮（在 viewDidLoad 或界面构建器中）：

```
[button setImage:[UIImage imageNamed:@"TwitterButtonBlue.png"] forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:@"TwitterButtonBlack.png"] forState:UIControlStateSelected]; 
```

UIButton 将为您处理图像切换。

# c++ - 是矢量 违反容器要求？

> ID：12678236
> 
> 赞同：4
> 
> 时间：2012-10-01T17:42:20.750
> 
> 标签：c++, language-lawyer

23.2 中的C++ 标准草案[n3242](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)在包含容器要求的表中指出，`X::reference`容器包含`T`必须是`lvalue T`. 然而，for`vector<bool>`是`vector<bool>::reference`另一个类，它是用于访问存储在向量中的各个字节位的代理。

这是否意味着标准`std::vector`中定义的类模板规范`T = bool`无法满足容器要求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T17:44:36.410

> 这是否意味着标准`std::vector`中定义的类模板规范`T = bool`无法满足容器要求？

是的。

同样，它的迭代器也不是真正的随机访问迭代器，因为会`operator*`产生一个代理对象。

`vector<bool>`是一个烂摊子。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T17:45:06.183

是的，正如[这里](http://www.gotw.ca/gotw/050.htm)所说的，有一个很好的解释。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T17:47:40.120

是的，`vector<bool>`不符合容器要求。它没有声称，尽管有相当明确的含义。问题是，容器“需求”不是任何形式意义上的需求。标准库中没有任何内容需要满足容器要求的类型。相反，“要求”是描述性的：每个容器的文档都可以说（就像 文档一样`vector<bool>`）“这个容器满足容器要求，除了……”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T17:54:49.280

是的，确实如此。首先，它使用代理对象`vector <bool>::reference`，它实际上不是一个引用，而只是看起来相同（它是一个类）。其次，它具有其他向量所没有的**flip()方法。**此外，与所有其他向量不同，它不支持转换为类 C 数组：`&vec[0]`.

因此，实际上**vector< bool>**不是向量，但看起来像 vector ，它的数据不是**bool**，但看起来像**bool**。这个容器在世界范围内被认为是“标准化但失败的东西”。

# jquery - Google 地图不会加载到 SharePoint 2010 Web 部件上

> ID：12678237
> 
> 赞同：0
> 
> 时间：2012-10-01T17:42:23.300
> 
> 标签：jquery, google-maps-api-3, sharepoint-2010

我有一个 Web 部件，它将获取位置，然后在 Google 地图上显示标记。现在我只是想在页面上显示一张地图，但这甚至不起作用。这是我放入 aspx 文件的代码：

```
 <div id="LocationWebPart">
    <h3>Locations:</h3>
    <hr />
    <div id="LocationMap" style="width:250px;height:300;"></div>
    <div id="locations">
    </div>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script src="/_layouts/website/scripts/gmap3.min.js" type="text/javascript" ></script>
    <script type="text/JavaScript">
        $(document).ready(function () {
            $('#LocationMap').gmap3( {
            actions: 'init',
            options: {
                center: [41.896254, -86.621529],
                zoom: 11
                }
            });
        });
</script> 
</div> 
```

当我在 test.html 中运行它时，它工作正常。Firebug 还显示 gmap3.min.js 脚本在那里。

此外，替换`$(document).ready()`为`_spBodyOnLoadFunctionNames.push()`也无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:56:44.657

我找到了答案。`px`后面的我忘记了`height:300;">`

# javascript - 浮线干扰mousemove功能

> ID：12678240
> 
> 赞同：2
> 
> 时间：2012-10-01T17:42:28.730
> 
> 标签：javascript, svg, d3.js

我对 d3.js 智慧的追求仍在继续！

这一次，我添加了一条在垂直方向上悬停的引导线，作为靠近指针的工具。问题是该线干扰了 mousemove 函数，因为它在图形的其余部分之上添加了一个额外的层，这使得代码在突然的指针移动时运行 mouseout 事件。有解决方案吗？

我以以下方式实现了该功能：

```
svg.on("mousemove", function(d) {
    svg.select(".guideline").remove();
    //svg.select(".valuelabel").remove();

    svg.append("line")
        .attr("class", "guideline")
        .attr("x1", d3.mouse(this)[0]-3)
        .attr("x2", d3.mouse(this)[0]-3)
        .attr("y1", margin[0])
        .attr("y2", height+margin[0])
        .attr("opacity", originOpacity)
        .attr("stroke", "#333");

}); 
```

作为一个令人不安的事件的例子：

```
//Highlight each stack when hovering, and calculate y value for legend
stacks.on("mousemove", function(d) {
    svg.select(".label").remove();  

    //Calculate the closest index when hovering
    var perValue = width / data[0].data.length;
    var index = Math.ceil((d3.mouse(this)[0]-margin[3]) / perValue - 0.5);
    chart.selectAll(".valuelabel").each(function(data) { 
        if (data.name == d.name) { 
            d3.select(this).text(Math.round(data.data[index].y) + "%");
        } 
    });

    d3.select(this).attr("opacity", "1");
    svg.selectAll("." + d3.select(this).attr("class")).attr("opacity", "1");

    svg.append("text")
        .attr("class", "label")
        .attr("width", "100px")
        .attr("height", "20px")
        .attr("x", d3.mouse(this)[0] + 40)
        .attr("y", d3.mouse(this)[1] - 5)
        .text(d.group + ": " + d.name);
});
stacks.on("mouseout", function(d) {
    groups.selectAll("." + d.name).text(d.name);
    svg.select(".label").remove();
    svg.selectAll("." + d3.select(this).attr("class")).attr("opacity", originOpacity);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:49:36.893

看起来您不希望在指南上出现[指针事件](http://www.w3.org/TR/SVG/interact.html#PointerEventsProperty)。

# .net - 检索 Post 参数和值 MVC3

> ID：12678241
> 
> 赞同：2
> 
> 时间：2012-10-01T17:42:32.007
> 
> 标签：.net, asp.net-mvc-3

如何在 MVC 中的操作中获取客户端发送的 Post 参数及其值？我不想在与客户端发送的 JSON 结构相匹配的操作方法中添加参数。我想使用 Request 或任何其他公开此信息的属性。

例如，如果操作是：

```
public ActionResult Index() 
```

我不想写这样的东西来达到结果：

```
public ActionResult Index(MyObject object) 
```

其中 MyObject 是与客户端发送的 JSON 匹配的类我想导航请求或请求中发送的原始文本以获取此信息

重要提示：我通过 AJAX 执行 HttpPost 请求，我没有提交表单。

使用 Request.InputStream 适用于提交帖子，但不适用于 Ajax。代码是：

```
var input = new StreamReader(Request.InputStream).ReadToEnd(); 
```

在 Ajax 的情况下，InputStream 是空的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:00:46.627

我在正确的轨道上，但缺少一些东西。此代码有效

```
Request.InputStream.Position = 0;
var input = new StreamReader(Request.InputStream).ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:44:40.070

您仍然可以访问`Request.Form`MVC 操作中的对象。

```
Request.Form["name"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T14:42:57.950

我参加聚会有点晚了，但我将提供一个替代方案，允许您使用 Ajax 帖子/表单访问 Request.Form。这在 MVC 4 和 jQuery 1.9.1 中进行了测试。

如果控制器的 Request.Form 没有为您的 Ajax 帖子填充，可能是因为您手动序列化数据并将数据发送到 contentType 为的控制器`application/json`（常见场景）。

这是一个**不会**在控制器上填充 Request.Form 的 jQuery.ajax 示例。

```
 // JSON serialized form data.
    var data = {"id" : "1234", "name" : "Dave"};

    $.ajax({
        type: "POST",
        url: serviceUrl,
        contentType: "application/json",
        dataType: "json",
        data: JSON.stringify(data || {}),
        success: function () { }
    }); 
```

更改 contentType 将导致控制器像提交表单一样处理帖子。

```
 // Form encoded data.  See jQuery.serialize().
    var data = "id=1234&name=Dave";

    $.ajax({
        type: "POST",
        url: serviceUrl,
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        dataType: "json",
        data: data,
        success: function () { }
    }); 
```

您也可以将 contentType 保留为未定义，因为`application/x-www-form-urlencoded; charset=UTF-8`它是 jQuery 的默认值。

我会注意到我只使用[$.ajax](http://api.jquery.com/jQuery.ajax/)来更好地说明正在发生的事情。您也可以使用[$.post](http://api.jquery.com/jQuery.post/)，尽管您仍然需要发送表单编码数据

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T20:00:33.883

您可以使用`Request.InputStream`直接访问帖子数据。看这里：

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.inputstream.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.inputstream.aspx)

但是，如果您主要关心的是跳过其中的“模型”部分，那么使用 MVC 没有多大意义。希望这会有所帮助。

# c# - 尝试运行无限循环线程时 WPF UI 挂起

> ID：12678244
> 
> 赞同：1
> 
> 时间：2012-10-01T17:42:38.667
> 
> 标签：c#, wpf, multithreading

所以我的问题是，当我为我的 wpf 应用程序设置一个无限线程时，ui 挂起，但这当然不是我对多线程应用程序的期望。

这是我的代码

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        System.Threading.Thread thread = new System.Threading.Thread(
            new System.Threading.ThreadStart(
                delegate
                {
                    Dispatcher.Invoke(DispatcherPriority.Normal,
                        new Action<Polyline>(ChangePoints), polyline);
                }));
        thread.Start();
    }

    private void ChangePoints(Polyline p)
    {
        while (true)
        {
            Random random = new Random();
            p.Points.Clear();
            for (int i = 0; i < 500; i += 10)
            {
                p.Points.Add(new Point(i, random.Next(1, 300)));
            }
        }
    }
}

<Window x:Class="ClientSide.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="300" Width="500">
    <Canvas x:Name="canvas" Background="#00FFFFFF">
        <Polyline x:Name="polyline" Stroke="DarkGreen" StrokeThickness="3" />
    </Canvas>
</Window> 
```

你们能告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:44:54.093

> 你们能告诉我这里有什么问题吗？

您创建一个新线程，然后立即使用 Dispatcher 将线程的工作编组到 UI 线程。这将导致它在 UI 线程上完全运行。

由于您正在执行无限循环，这会导致它无限期地锁定 UI 线程。

要更正，您需要切换逻辑。不要将调用编组回整个方法的 UI 线程，而是构建点，并仅编组您`p.Points`在循环中设置的调用。您可能还需要在其中创建某种形式的延迟，因为它会尽可能快地运行（给定当前代码），这可能会使 UI 无响应。

尝试以下操作：

```
public MainWindow()
{
    InitializeComponent();
    System.Threading.Thread thread = new System.Threading.Thread(
        new Action(() => ChangePoints(polyline)));
    thread.Start();
}

private void ChangePoints(Polyline p)
{
    // Create once and reuse
    Random random = new Random();

    while (true)
    {
        PointCollection points = new PointCollection();
        for (int i = 0; i < 500; i += 10)
        {
            points.Add(new Point(i, random.Next(1, 300)));
        }

        // Now marshal back to the UI thread here...
        Dispatcher.Invoke(DispatcherPriority.Normal, 
            new Action( () => p.Points = points));

        // Optionally delay a bit here...
        Thread.Sleep(250);
    }
} 
```

# sql - 加入两个表，然后加入第三个表

> ID：12678250
> 
> 赞同：5
> 
> 时间：2012-10-01T17:44:01.197
> 
> 标签：sql, database

我有一个 SQL 查询，我想将两个表连接起来，然后使用该连接表连接第三个表。我尝试用谷歌搜索如何做到这一点，但措辞很尴尬，没有发现任何用处。这是我尝试使用的代码：

```
SELECT t.id AS ID
, a.id AS ActivityID
, t.ProjectType AS ProjectType
, t.Tier1Mission AS Mission
, m.id ASMissionID
, m.name AS MissionName
, t.Tier2Activity AS Activity
, a.name AS ActivityName
, t.Tier3Project AS Project
FROM tActivity a
 INNER JOIN 
 (SELECT id, name FROM tMission) m
 ON tActivity.missionId = MissionID
 LEFT OUTER JOIN
 (SELECT *
  FROM tTaxonomy
  WHERE Tier1Mission = m.name AND Tier2Activity = a.name) 
```

编辑：我遇到的主要问题是 tActivity 表的条目具有相同的“名称”但引用不同的 MissionId。连接所有表很容易，但需要有正确的 MissionID，关系保存在第三个表“tTaxonomy”中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:46:39.373

您几乎拥有它，但需要一个别名和一个`ON`子句来为子句的第二个连接插入`WHERE`。此外，在您的第一`ON`个子句中，使用表别名`a`而不是原始名称。

```
SELECT t.id AS ID
, a.id AS ActivityID
, t.ProjectType AS ProjectType
, t.Tier1Mission AS Mission
, m.id ASMissionID
, m.name AS MissionName
, t.Tier2Activity AS Activity
, a.name AS ActivityName
, t.Tier3Project AS Project
FROM 
  tActivity a
  INNER JOIN 
   (SELECT id, name FROM tMission) m
     ON a.missionId = m.id
  LEFT OUTER JOIN
   (SELECT *
     FROM tTaxonomy
   ) t ON t.Tier1Mission = m.name AND t.Tier2Activity = a.name 
```

**但是，仔细看一下，我看不到任何需要使用连接子查询的东西。子查询中没有聚合或限制使它们成为必要。您可以只使用普通的表连接：**

```
SELECT t.id AS ID
, a.id AS ActivityID
, t.ProjectType AS ProjectType
, t.Tier1Mission AS Mission
, m.id ASMissionID
, m.name AS MissionName
, t.Tier2Activity AS Activity
, a.name AS ActivityName
, t.Tier3Project AS Project
FROM
  tActivity a
  INNER JOIN tMission m ON a.missionId = m.id
  LEFT JOIN tTaxonomy t ON t.Tier1Mission = m.name AND t.Tier2Activity = a.name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:46:55.717

```
select t.id as ID,
    a.id as ActivityID,
    t.ProjectType as ProjectType,
    t.Tier1Mission as Mission,
    m.id ASMissionID,
    m.name as MissionName,
    t.Tier2Activity as Activity,
    a.name as ActivityName,
    t.Tier3Project as Project
from tActivity a
inner join tMission m on a.missionId = m.MissionID
left outer join tTaxonomy t on t.Tier1Mission = m.name and t.Tier2Activity = a.name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:46:48.700

看起来你很接近，你`JOIN`在最后一个错误的地方有语法`JOIN`：

```
SELECT t.id AS ID
    , a.id AS ActivityID
    , t.ProjectType AS ProjectType
    , t.Tier1Mission AS Mission
    , m.id ASMissionID
    , m.name AS MissionName
    , t.Tier2Activity AS Activity
    , a.name AS ActivityName
    , t.Tier3Project AS Project
FROM tActivity a
INNER JOIN 
(
    SELECT id, name 
    FROM tMission
) m
 ON a.missionId = MissionID
LEFT OUTER JOIN
(
    SELECT *
    FROM tTaxonomy
) t
    on m.name = t.Tier1Mission
    AND a.name = t.Tier2Activity 
```

甚至：

```
SELECT t.id AS ID
    , a.id AS ActivityID
    , t.ProjectType AS ProjectType
    , t.Tier1Mission AS Mission
    , m.id ASMissionID
    , m.name AS MissionName
    , t.Tier2Activity AS Activity
    , a.name AS ActivityName
    , t.Tier3Project AS Project
FROM tActivity a
INNER JOIN tMission m
    ON a.missionId = MissionID
LEFT OUTER JOIN tTaxonomy t
    on m.name = t.Tier1Mission
    AND a.name = t.Tier2Activity 
```

# amazon - Amazon Security Token Service 增加了哪些价值？

> ID：12678251
> 
> 赞同：0
> 
> 时间：2012-10-01T17:44:04.500
> 
> 标签：amazon, sts-securitytokenservice

我正在阅读 AWS STS 页面，该页面描述了 AWS STS 如何帮助避免在应用程序中保存 AWS 凭证，以及它最终的方式——在我看来——是它通过拥有一个 TVM IAM 账户来解决问题，但不幸的是留下了问题'在没有任何答案的情况下存储 TVM IAM 凭证。

这是“使用令牌自动售货机验证 AWS 移动应用程序用户”的页面：http: [//aws.amazon.com/articles/4611615499399490](http://aws.amazon.com/articles/4611615499399490)

最重要的是，我真的不确定 STS 如何解决并帮助解决这些问题：
1）除了在应用程序中之外，TVM IAM 帐户凭证存储在哪里？

2）如果我可以窃取 TVM IAM，STS 比首先拥有特定服务的受限 IAM 帐户更安全吗？

3) 如果我出于安全原因更改了 TVM IAM 账户凭证，STS 如何防止我再次重新部署应用程序？

我真的很困惑，添加令牌层确实有助于不将凭证放入应用程序，甚至不会为现有的 IAM 系统增加价值。我必须明显地遗漏一些东西。

任何帮助，请？
Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T05:08:37.067

AWS 密钥存储在自动售货机服务器上，而不是您的客户端应用程序中。因此，客户端应用程序仅存储从 TVM 服务器请求的临时凭证，该凭证在设定的时间内有效。如果您更改帐户凭据，客户端只需要从 TVM 请求一个新令牌；无需重新部署客户端应用程序。

# json - RestKit mapKeyOfNestedDictionaryToAttribute 与数组

> ID：12678254
> 
> 赞同：1
> 
> 时间：2012-10-01T17:44:15.880
> 
> 标签：json, restkit

我有一个 JSON 响应，看起来像下面的示例。我添加了一些评论`//`来强调我的问题。

我不知道如何`RKObjectMapping`结合数组作为值来构建动态键（“FieldNameA”、“FieldNameB” - 这可能是任何东西）。数组的每一项都是一个类型`FieldResult`。

[我已经在这里](https://stackoverflow.com/questions/8056807/restkit-how-to-make-a-mapping-for-varying-key-names)学习了如何处理不同的键名，但我不知道如何正确映射数组项类型。

```
{
    "result": {
        "status": "FAILURE",
        "details": {
            "FieldNameA": [ // dynamic key name here, array of objects as a value
                {
                    "details": {
                        "errorName": "InvalidField",
                        "errorNumber": 123
                        },
                    "status": "FAILURE"
                }
            ],
            "FieldNameB": [ // multiple values in this array, all of same type FieldResult
                {
                    "details": {
                        "errorName": "UpdateRequired",
                        "errorNumber": 321
                        },
                    "status": "UPDATE_REQUIRED",
                    "suggestion": {
                        "update": "UpdatedInputValue"
                    }
                },
                {
                    "details": {
                        "errorName": "TooShort",
                        "errorNumber": 1
                    },
                    "status": "FAILURE"
                }
            ]
        }
    }
} 
```

任何帮助表示赞赏！

# jquery - jQuery Masonry：对图像进行排序

> ID：12678256
> 
> 赞同：1
> 
> 时间：2012-10-01T17:44:32.223
> 
> 标签：jquery, image, sorting, jquery-masonry

我正在使用 jQuery Masonry 来对齐我网站上的图像。所有图像具有相同的宽度但不同的高度。根据加载它们的顺序，它们被放置，很奇怪。

这就是我得到的：

![我得到了什么](../Images/bcd8c4314015f83d4be5793aa088d7ce.png)

这就是我想要的：

![我想要的是](../Images/93991915d0e71e29df1455b5da4f16cb.png)

这是我应该用 jQuery 解决的问题，还是以某种方式改变它们从服务器加载的顺序？那怎么办？

到目前为止的代码：

```
var $container = $('#imageAlbum');

$container.imagesLoaded( function(){
  $container.masonry({
      itemSelector : '.image'
      columnWidth: 230;
  });

}); 
```

图像的 CSS

```
.image{
     margin: 10px;
     float: left;
     width: 230px;
} 
```

**添加**

做了一个jsFiddle：http: [//jsfiddle.net/DXCDv/2/](http://jsfiddle.net/DXCDv/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:02:32.060

典型问题，典型解决[方案](https://stackoverflow.com/a/10084453/963514)。如果您共享您的开发 jsfiddle、jsbin 或在线沙箱，调试会更容易。

**更新**您只是忘记指定高度。砌体需要宽度和高度。请参阅[更改的小提琴](http://jsfiddle.net/VM3Rg/)。如果您打算动态加载图像，则需要使用[imagesLoaded 方法，该方法在图像加载](http://masonry.desandro.com/demos/images.html)*后*触发 Masonry ，并且插件*知道它们的宽度和高度*以正确布局。

# groovy - 如何对采用闭包的 Groovy 方法进行元分类？

> ID：12678264
> 
> 赞同：0
> 
> 时间：2012-10-01T17:44:46.153
> 
> 标签：groovy, metaclass

一个元类如何成为一个接受对象和闭包的方法？

具体来说，

```
public void eachRow(GString gstring, Closure closure) 
```

我想 metaClass eachRow() 以便它打印 gstring 参数，并忽略闭包。目标是创建一个应用程序，当传递某个参数时，它会使用 groovy.sql.Sql 执行某种“空运行”执行，而不是执行查询，它只是打印它通常会执行的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:01:33.057

所以我认为我的问题不是我如何定义方法，而是我是什么（或没有返回）。这似乎工作......

```
sql.metaClass.eachRow = { String qry, Closure c ->
    println qry
    new GroovyRowResult([:]) // I was returning null, adding this fixed me.
} 
```

# mysql - 使用用户子类别限制 MySQL 中结果的最佳方法

> ID：12678270
> 
> 赞同：0
> 
> 时间：2012-10-01T17:45:06.370
> 
> 标签：mysql

我试图从根本上解决以下问题：

1) 查找系统中只有 programID 1 的所有用户。

2) 查找系统中所有具有 programID 1 和任何其他活动程序的用户。

我的表格结构（简单来说如下）：

## 用户

```
userID  | Name
================
1       | John Smith
2       | Lewis Black
3       | Mickey Mantle
4       | Babe Ruth
5       | Tommy Bahama 
```

## 计划

```
ID | userID | plan | status
---------------------------
1  |  1     | 1    | 1
2  |  1     | 2    | 1
3  |  1     | 3    | 1
4  |  2     | 1    | 1
5  |  2     | 3    | 1
6  |  3     | 1    | 0
7  |  3     | 2    | 1
8  |  3     | 3    | 1
9  |  3     | 4    | 1
10 |  4     | 2    | 1
11 |  4     | 4    | 1
12 |  5     | 1    | 1 
```

我知道我可以通过以下方式轻松找到所有具有特定计划的成员：

```
SELECT * FROM users a JOIN plans b ON (a.userID = b.userID) WHERE b.plan = 1 AND b.status = 1 
```

但这只会告诉我哪些用户有“活动”计划 1。

我怎样才能知道谁只有计划 1（在这种情况下只有用户 ID 5）以及如何知道谁有计划 1 和任何其他**活动**计划？

更新：这不是要计数，我实际上需要原始成员信息，包括他们拥有的所有计划，因此 COUNT(*) 响应可能不是我想要实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:26:37.117

好的...，您已经提到您不希望计算特定用户持有的其他计划，但根据您的要求，您可以获得最佳输出，例如，

这么多用户的计划 1 处于活动状态，这是他除计划 1 之外的其他活动计划的计数。

```
SELECT u.userID,
   u.Name,
   p.Id AS Plan1ActiveId,
   (SELECT COUNT(*) FROM plans sub where sub.userID = u.userID and sub.plan <> 1 and sub.status = 1) AS OtherActivePlanCount
FROM users u JOIN plans p ON (u.userID = p.userID) 
where p.plan = 1 AND p.status = 1; 
```

或者，如果您想深入了解计划的详细信息，则需要应用第二个查询来为您带来其他计划的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:27:12.237

好吧，您可以将 COUNT 与 GROUP BY 和 HAVING 子句结合使用。

例如：

`SELECT * FROM users a JOIN plans b ON (a.userID = b.userID) GROUP BY b.user_ID HAVING COUNT(*) = 1 AND b.plan = 1`

这将按用户 ID 对行进行分组，并且仅包括计数 = 1 的行（计划表中只有 1 行）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T21:35:46.263

注意 - 我最终简化了我脑海中的整体概念。我只是对我知道的所有成员进行了子选择，这些成员有我正在寻找的目标。然后，我对所有计划的成员进行了总体选择，这些成员的 ID 在或不在已知 ID 的子选择中）。

经过测试，这比建议更容易使用资源，但感谢您的帮助。

# c++ - win32 消息循环 - 我应该中断还是返回？

> ID：12678272
> 
> 赞同：0
> 
> 时间：2012-10-01T17:45:15.017
> 
> 标签：c++, visual-c++

我想知道 Windows 消息循环的正确返回值是什么。到目前为止，我已经使用了以下内容：

```
case WM_LBUTTONDOWN: // left mouse button pressed.
    if (condition == true )
    {
        do_something();
    }
break; 
```

但我也看到了类似的东西：

```
if (IDC_BUTTON == LOWORD(wParam) && BN_CLICKED == HIWORD(wParam))
{
    do_something();
    return true;
}
break; 
```

哪一个是正确的？我应该`return true`吗？或者我应该`break?`有关系吗？

**编辑**这是否取决于我是在与按钮按下还是鼠标移动进行交互？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:12:31.863

返回值记录在 MSDN 上，作为每条消息的文档的一部分。例如，[WM_LBUTTONDOWN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645607%28v=vs.85%29.aspx)的文档指出

> 如果应用程序处理此消息，它应该返回零。

对于其他消息，返回值可能更有意义。您应该始终阅读文档，永远不要猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:35:26.660

是您`break`还是`return`取决于上下文 - 即您在处理此消息**后希望做什么。**如果您无事可做 - 您可以立即返回。

但是，当您确实从消息循环中返回时 - 请确保您`return 0;`
根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645607%28v=vs.85%29.aspx)：`If an application processes this message, it should return zero`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:12:04.047

如果您使用 break，您的执行将保留在当前函数中。它允许您设置结果变量并在返回之前统一执行一些操作。但是，如果您返回，您的执行将到达调用函数，并且不会继续执行您在当前函数中进一步执行的任何操作。所以没有正确的变体 - 由您决定使用什么：`break`或`return`. 这取决于您自己的设计。

例如：

```
bool result;

switch(msg)
{
case WM_LBUTTONDOWN:
    //do smth...
    result=true;
    break;//execution goes to (3)
case WM_MOUSEMOVE:
    //actions...
    result=true;
    break;//execution goes to (3)
case WM_RBUTTONDOWN:
    //some code...
    //no break here! execution continues to the next event
case WM_MWHEELUP:
    //if WM_RBUTTONDOWN occured, execution continues to here and goes on
    result=false;//maybe you need false here, I dont know
    break;//processing WM_RBUTTONDOWN will stop only here, as well as processing WM_MWHEELUP
case WM_USER1:
    //lines of code....
    return true;//do not perform final actions starting from (3), but end up with this function immideately
default:
    result=false;    
}

// (3)
//perform some final actions...

return result; 
```

它不取决于您正在与之交互的事件。

# sql - 如何在一段时间内对数量进行分组

> ID：12678275
> 
> 赞同：1
> 
> 时间：2012-10-01T17:45:23.973
> 
> 标签：sql

我试图对时间或期间的数量进行分组，我有下一张表

销售 SALES_DATE SALES_ITEM SALES_QUANTITY

我正在做的查询是

```
SELECT DATE,ITEM,SUM(QUANTITY) 
FROM SALES 
WHERE DATE BETWEEN "DATE1" AND "DATE2"; 
```

问题是我不需要显示日期，如果我查找 10 月的销售额，它应该出现 10 月的总和而不显示日期......非常感谢您的帮助

示例：我得到什么...

```
DATE         ITEM               SALES
2012-06-12   14152              7
2012-06-14   14152              15
2012-06-16   14157              25 
```

我需要什么：在06-12和06-16之间查询

```
ITEM         SALES
14152        22
14157        25 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:06:22.743

如果您想要按月计算总和，您可以将其包含在按表达式分组中。这是一种方法：

```
SELECT extract(year from DATE) as yr, extract(month from date) as mon, ITEM, SUM(QUANTITY) 
FROM SALES 
WHERE DATE BETWEEN "DATE1" AND "DATE2"
group by extract(year from DATE), extract(month from date)
order by 1, 2 
```

虽然`extract`是标准 SQL，但并非所有数据库都支持它。例如，您可以`to_char(date, 'YYYY-MM')`在 Oracle 或`datepart(month, date)`SQL Server 中使用。

# math - 在什么情况下需要多项式的泰勒级数？

> ID：12678277
> 
> 赞同：2
> 
> 时间：2012-10-01T17:45:48.157
> 
> 标签：math, approximation, taylor-series

我很难理解为什么将泰勒级数用于函数以获得函数的近似值而不是仅在编程时使用函数本身会很有用。如果我可以告诉我的计算机计算 e^(.1) 并且它会给我一个精确的值，我为什么要取一个近似值呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:00:56.640

泰勒级数一般不用于逼近函数。通常，使用某种形式的极小极大多项式。

泰勒级数收敛缓慢（需要许多项才能获得所需的精度）并且效率低下（它们在它们的中心点附近更准确，而远离它的点更不准确）。泰勒级数的最大用途可能是在数学课和论文中，它们对于检查函数的性质和学习微积分很有用。

为了逼近函数，经常使用极小极大多项式。极小极大多项式在特定情况下具有最小可能的最大误差（函数要逼近的区间，多项式可用的度数）。通常没有解析解来寻找极小极大多项式。使用[Remez 算法](http://en.wikipedia.org/wiki/Remez_algorithm)以数字方式找到它们。可以定制极小极大多项式以满足特定需求，例如最小化相对误差或绝对误差、在特定区间内逼近函数等。Minimax 多项式需要比泰勒级数更少的项来获得可接受的结果，并且它们在区间内“传播”误差，而不是在中心更好而在末端更差。

当您调用该`exp`函数来计算 e ^x时，您可能正在使用一个极小极大多项式，因为有人已经为您完成了这项工作并构建了一个计算多项式的库例程。在大多数情况下，算术计算机处理器能做的只有加法、减法、乘法和除法。因此，必须从这些操作中构造其他功能。前三个为您提供多项式，多项式足以逼近许多函数，例如正弦、余弦、对数和取幂（还有一些将事物移入和移出浮点值的指数字段的额外操作）。除法添加有理函数，这对于反正切等函数很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T17:08:01.480

For two reasons. First and foremost - most processors do not have hardware implementations of complex operations like exponentials, logarithms, etc... In such cases the programming language may provide a library function for computing those - in other words, someone used a taylor series or other approximation for you.

Second, you may have a function that not even the language supports.

I recently wanted to use lookup tables with interpolation to get an angle and then compute the sin() and cos() of that angle. Trouble is that it's a DSP with no floating point and no trigonometric functions so those two functions are really slow (software implementation). Instead I put sin(x) in the table instead of x and then used the taylor series for y=sqrt(1-x*x) to compute the cos(x) from that. This taylor series is accurate over the range I needed with only 5 terms (denominators are all powers of two!) and can be implemented in fixed point using plain C and generates code that is faster than any other approach I could think of.

# sorting - AWK——如何进行选择性多列排序？

> ID：12678278
> 
> 赞同：4
> 
> 时间：2012-10-01T17:45:50.753
> 
> 标签：sorting, awk, multiple-columns

在 awk 中，我该怎么做：

输入：

```
1  a  f  1  12  v  
2  b  g  2  10  w  
3  c  h  3  19  x  
4  d  i  4  15  y  
5  e  j  5  11  z 
```

所需的输出，通过在 处对数值进行排序`$5`：

```
1  a  f  2  10  w  
2  b  g  5  11  z  
3  c  h  1  12  v  
4  d  i  4  15  y  
5  e  j  3  19  x 
```

**请注意**，排序应该**只**影响`$4`、`$5`和`$6`（基于 的值`$5`），其中表的前一部分保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:51:34.313

这可以在多个步骤的帮助下完成[`paste`](https://www.gnu.org/software/coreutils/manual/html_node/paste-invocation.html)：

```
$ gawk '{print $1, $2, $3}' in.txt > a.txt
$ gawk '{print $4, $5, $6}' in.txt | sort -k 2 -n b.txt > b.txt
$ paste -d' ' a.txt b.txt
1 a f 2 10 w
2 b g 5 11 z
3 c h 1 12 v
4 d i 4 15 y
5 e j 3 19 x 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T01:07:46.493

就个人而言，我发现使用`awk`安全地对列数组进行排序相当棘手，因为您通常需要保存和排序重复的键。如果您需要有选择地对一组列进行排序，我会`paste`寻求一些帮助：

```
paste -d ' ' <(awk '{ print $1, $2, $3 }' file.txt) <(awk '{ print $4, $5, $6 | "sort -k 2" }' file.txt) 
```

结果：

```
1 a f 2 10 w
2 b g 5 11 z
3 c h 1 12 v
4 d i 4 15 y
5 e j 3 19 x 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T14:06:01.527

这*可以*在 pure 中完成`awk`，但正如@steve 所说，这并不理想。 `gawk`排序功能有限，`awk`根本没有内置排序。也就是说，这是一个使用比较函数的（相当骇人听闻的）解决方案`gawk`：

```
[ghoti@pc ~/tmp3]$ cat text 
1  a  f  1  12  v  
2  b  g  2  10  w  
3  c  h  3  19  x  
4  d  i  4  15  y  
5  e  j  5  11  z  
[ghoti@pc ~/tmp3]$ cat doit.gawk 
### Function to be called by asort().
function cmp(i1,v1,i2,v2) {
  split(v1,a1); split(v2,a2);
  if (a1[2]>a2[2])      { return 1; }
  else if (a1[2]<a2[2]) { return -1; }
  else                  { return 0; }
}

### Left-hand-side and right-hand-side, are sorted differently.
{
  lhs[NR]=sprintf("%s %s %s",$1,$2,$3);
  rhs[NR]=sprintf("%s %s %s",$4,$5,$6);
}

END {
  asort(rhs,sorted,"cmp");    ### This calls the function we defined, above.
  for (i=1;i<=NR;i++) {       ### Step through the arrays and reassemble.
    printf("%s %s\n",lhs[i],sorted[i]);
  }
}    
[ghoti@pc ~/tmp3]$ gawk -f doit.gawk text 
1 a f 2 10 w
2 b g 5 11 z
3 c h 1 12 v
4 d i 4 15 y
5 e j 3 19 x
[ghoti@pc ~/tmp3]$ 
```

这会将整个输入文件保存在数组中，以便在排序后重新组合行。如果您的输入是数百万行，这可能会有问题。

请注意，您可能希望使用`printf`and`sprintf`函数来设置适当的输出字段分隔符。

`asort()`您可以在 gawk 手册页中找到有关使用 with 函数的文档；寻找`PROCINFO["sorted_in"]`。

# maven - Eclipse 中 PAC 的 maven m2e 代理连接问题；如何调试？

> ID：12678280
> 
> 赞同：0
> 
> 时间：2012-10-01T17:45:51.520
> 
> 标签：maven, maven-3, m2e

我得到了 Eclipse EE，发现它没有 maven/m2e，所以我安装了 m2e。
然后我设置项目并使用 pom.xml 我开​​始遇到所有有趣的错误，例如：

无法计算构建计划：插件....，
*_* _ 或其依赖项之一无法解析：无法读取 .... 的工件描述符，
传输失败.....

由于我在公司环境中，因此我找到了 IE 设置并找到 PAC（代理自动配置）脚本。然后我将这些值输入到我的 settings.xml 区域中。
我什至尝试了一些开发者分享的想法，比如删除 .lastupdated 文件和删除目录。
尽管它完全违背了 maven 的整个想法，但我正在考虑从另一台机器的存储库中转移我所有的 .jar 和 .pom 文件。

还没有快乐。还是有问题，我只是还不知道是什么。如果有任何可用的东西来发现问题所在，我真的需要一些调试或日志记录或 ping 测试。

我在 Maven 和 Proxy 上找到了一些很棒的帖子。关键字：maven、m2e、'failed to transfer'、pom.xml、settings、proxy等 也不能通过proxy下载maven依赖 [http://jira.codehaus.org/browse/MNG-5237](http://jira.codehaus.org/browse/MNG-5237) 看完这篇，不是知道我的公司是否使用 NTLM，我放入 wagon 轻量级 jar 并在 pom.xml 中引用它 我怎么知道，如果我最终需要这个？我应该把 .jar 文件放在哪里？在用户存储库区域中，还是在 maven 运行时 \jars\ 目录的深处？

一路上，也出现了一些问题。
（供参考，我在WinXP上）

仅使用 m2e，我是否需要定义 $M2_HOME ？我想不是，因为我不知道那会在哪里。
相关：使用 m2e，我会有一个全局 settings.xml 吗？

${user.home}.m2/repository 是否应该在本地 settings.xml 中被引用（并且取消注释）？

作为命令行 maven 的替代品，Eclise 'Run Configurations' 真的可以完全替代吗？我知道你使用的对话框有一个空的目标列表，什么时候应该填充它，但你总是可以输入 What about using 'mvn -X' 或者任何其他很酷的 maven 命令，比如向你展示的那个所有的传递依赖。

仍在搜索，但提前感谢任何可以帮助解决这些代理问题的人。

# sql - 命名连接表

> ID：12678284
> 
> 赞同：0
> 
> 时间：2012-10-01T17:46:01.050
> 
> 标签：sql, database, coding-style

我遵循这种风格：表格以单数名词命名。那么你会如何命名一个连接表呢？你会保留命名，比如`question_test`它是两个表吗？`test``question`

您是否会添加类似的内容，以便以后在“正常”表中需要它`_join`时不会使用它？`question_test`那么`question_test_join`？

最后一个问题是保持连接表中的名称按字母顺序排序是否是一种约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:15:14.263

我将关系表命名为`question_test`并且不期望存在其他具有相同名称的表，但与应用程序中的域对象发生的`test`表或表没有关系。`question`在我们关于请求跟踪系统的应用程序中的类似情况下，我们以这种方式命名关系表。

# xslt - 匹配从 XSLT 中的类型继承的节点

> ID：12678285
> 
> 赞同：3
> 
> 时间：2012-10-01T17:46:07.763
> 
> 标签：xslt, inheritance, xsd, xslt-2.0, extend

我们有一个 XSD，它定义了以下内容：

```
<xsd:element name="Product" type="cm:Product" abstract="true" />
<xsd:complexType name="Product" abstract="true">
    <xsd:sequence>
        <xsd:element name="name" type="xsd:string" minOccurs="0" />
        <!-- Other common elements -->
    </xsd:sequence>
</xsd:complexType>

<xsd:element name="Subscription" type="cm:Subscription" />
<xsd:complexType name="Subscription">
    <xsd:complexContent>
        <xsd:extension base="cm:Product">
            <xsd:sequence>
                <!-- Subscription specific elements -->
            </xsd:sequence>
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType> 
```

我需要创建一个 XSLT，它采用产品名称和其他一些内容并将其转换为 Web 服务请求。问题是我真的不知道顶部元素是否真的说`cm:Product`，`cm:Subscription`或者完全不同的东西（但它扩展了 cm:Product）。

有没有办法我可以以某种方式编写一个匹配`cm:Product`元素和所有扩展元素的模板`cm:Product`？

* * *

**简单示例输入**

```
<Subscription xmlns="http://schema"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <name>Basis</name>
</Subscription> 
```

**到目前为止我所拥有的**

```
<xsl:stylesheet version="2.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:cm="http://schema" 
    exclude-result-prefixes="cm">

    <xsl:param name="processID" />

    <xsl:template match="/">
        <xsl:element name="RequestElement">
            <xsl:element name="processId">
                <xsl:value-of select="$processID" />
            </xsl:element>
            <xsl:apply-templates />
        </xsl:element>
    </xsl:template>

    <xsl:template match="cm:Product/cm:name">
        <xsl:element name="name">
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>

    <xsl:template match="text()" />

</xsl:stylesheet> 
```

如果我更改`cm:Product`为`cm:Subscription`，这在我的特定输入 xml 中有效，但问题是我不知道它实际上是 cm:Subscription。我所“知道”的是它是一个扩展的元素`cm:Product`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:13:22.363

```
<xsl:template match="element(*, cm:Product)/cm:name"> 
```

应该这样做，但你需要添加一个合适的顶级

```
<xsl:import-schema namespace="https://schema" schema-location="....." /> 
```

当然它要求你的处理器是模式感知的。

# jquery - 用于图像的 jQuery“手工具”仿真（只需指出我正确的方向）

> ID：12678286
> 
> 赞同：0
> 
> 时间：2012-10-01T17:46:16.153
> 
> 标签：jquery, html, css, image, web

我一直在谷歌搜索，但找不到我要找的东西。我真的不知道这会叫什么，所以我会尽力描述它。我正在寻找一种在各种图像编辑器中模拟“手动工具”的方法。我想在 500x500 的 div 中居中放置一个大图像（比如 1024x1024）。然后，用户可以使用手动工具“抓取”图像并在其周围滚动（想想谷歌地图，但只有一张大图像）。有谁知道可以帮助我的教程或插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:51:35.157

您可以使用的提示：

1.  外部`DIV`或视口需要具有`position: relative;`和`overflow: hidden;`

2.  内部`IMG`（你想用鼠标拖动和移动的那个）需要有`position: absolute;`

3.  移动/平移逻辑如下：

    *   当用户在您的 IMG 上按下鼠标时 - 设置一个指示移动正在进行的标志

    *   当用户将鼠标移到文档上时 - 如果设置了移动标志，则根据从接收到的事件对象获得的 x 和 y 坐标更新 IMG 的位置（通过更改 is style.left 和 style.top 属性）在回调中

    *   当用户按下或离开鼠标按钮时 - 将移动标志设置为 false

这是一个非常有问题的**小提琴**，您可以作为*开始*使用：http : [//jsfiddle.net/SPXmB/1/](http://jsfiddle.net/SPXmB/1/)

# objective-c - Objective-C：添加延迟

> ID：12678287
> 
> 赞同：0
> 
> 时间：2012-10-01T17:46:18.087
> 
> 标签：objective-c, delay

我正在尝试为我的应用程序添加一个短暂的延迟。它只是闪屏淡出，所以它不会影响应用程序中的任何其他功能（因为没有其他东西正在运行）。我尝试了各种方法都没有成功。（这发生在 viewController 的 viewDidLoad 中）：

C's sleep: ... //添加启动画面 [self.view addSubview:splashScreen];

```
sleep(3);
[self fadeOut:splashScreen]; 
```

NSObject 的 performSelector（认为这会起作用，因为 UIViewController 不是从 NSObject 继承的吗？）

```
[self performSelector:@selector(fadeOut:) afterDelay:3]; 
```

NSTimeInterval：

```
 //wait 3 seconds
NSTimeInterval theTimeInterval = 3;
[self fadeOut:splashScreen withADelayOf:&theTimeInterval]; 
```

这是淡出（编写用于 NSTimeInterval 示例）

```
- (void) fadeOut:(UIView *)viewToToggle withADelayOf:(NSTimeInterval* ) animDelay {

[UIView setAnimationDelay:*animDelay];

[UIView animateWithDuration:0.25 animations:^{
    viewToToggle.alpha = 0.0;
}];

} 
```

我得到了 fadeOut 但没有延迟。有人可以将我推向正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:48:36.200

你可以试试 dispatch_after 或 animateWithDuration:delay:options:animations:completion:

```
double delayInSeconds = 0.5;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
   //yourcode
}); 
```

或者

```
[UIView animateWithDuration:0.175 delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
        //your code
    }completion:^(BOOL completed){
        //animation completion execution
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:49:58.880

如果您想以一些延迟为视图的某些属性设置动画，则应该依赖此方法：

```
+(void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion 
```

[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)查看参考文档。

所以你的代码可能是这样的：

```
[UIView animateWithDuration:0.25 delay:3.0 options: UIViewAnimationOptionCurveLinear animations:^{
    viewToToggle.alpha = 0.0;
} completion: nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:24:42.983

Tiguero 和 J2TheC 都为我指明了我需要去的确切方向：

这是我在其他人需要帮助时使用的代码：

```
//add the splash screen
[self.view addSubview:splashScreen];

//fade it out with a delay
[UIView animateWithDuration:0.75 delay:3.0 options:UIViewAnimationOptionCurveEaseIn
    animations:^{
        splashScreen.alpha = 0.0;
    }
    completion:^ (BOOL finished) {
        //do something on end
}]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T18:32:32.153

做一件事：在 Appdelegate 和 didfinishLunching 中创建一个 uiimageview 引用：//此处不要将主视图控制器分配给 windwo。

```
{
img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"splash.png"]];

img.frame = CGRectMake(0, 0, 320, 480);

[self.window addSubview:img];

[NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(removeSplash) userInfo:nil repeats:NO];
[self.window makeKeyAndVisible];

}

- (void)removeSplash{

    [img removerFromSuperview];
    self.window.rootViewController = self.viewController;

 } 
```

# android - 微调器 onClick 调用的 DatePickerDialog

> ID：12678288
> 
> 赞同：3
> 
> 时间：2012-10-01T17:46:22.303
> 
> 标签：android, dialog, datepicker, spinner, android-spinner

我在软或谷歌上找不到任何东西！所以我需要你的帮助！我喜欢点击我的（空的）微调器，所以我会显示一个日期或时间选择器对话框。我找不到任何处理方法。这些是我现在的片段。：

只是我的两个对象：

```
DatePickerDialog dDialog = new DatePickerDialog(this, (OnDateSetListener) this, 2012, 3, 3);

        Spinner dSpinner = (Spinner) findViewById(R.id.spinner1); 
```

xml:

```
 <Spinner
    android:id="@+id/spinner1"
    android:spinnerMode="dialog"
    android:prompt="@string/hint_date"
    android:layout_marginTop="40dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"> 
```

也许你知道如何处理它。我想通过 onClick 选择一个日期，调用选择器（微调器有什么不可能的？！）我也尝试了 onclicklisteners。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:37:27.483

该`spinnerMode`属性不是您要查找的。为了显示`DatePickerDialog`当用户单击时，`Spinner`您必须创建一个自定义`Spinner`小部件并覆盖`performClick`负责显示具有 的`Spinner`值的默认对话框的方法。下面是一个例子：

```
public class CustomSpinnerDialog extends Spinner {

        // implement all the constructors   

    @Override
    public boolean performClick() {
        DatePickerDialog dDialog = new DatePickerDialog(getContext(),
                new OnDateSetListener() {

                    @Override
                    public void onDateSet(DatePicker view, int year,
                            int monthOfYear, int dayOfMonth) {
                        Toast.makeText(getContext(), "Something",
                                Toast.LENGTH_SHORT).show();

                    }
                }, 2012, 3, 3);
        dDialog.show();
        return false;
    }

} 
```

然后你所要做的就是`Spinner`在你的布局中使用这个自定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T07:31:06.300

更好的方法是通过在 Stock Contacts 应用程序编辑联系人屏幕中将按钮屏蔽为 Spinner 样式。

```
 <Button
        android:id="@+id/date_view"
        style="?android:attr/spinnerStyle"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:paddingLeft="12dip"
        android:paddingStart="12dip" /> 
```

# c# - 为什么这种具有类型约束的泛型方法无法编译？

> ID：12678291
> 
> 赞同：2
> 
> 时间：2012-10-01T17:46:35.923
> 
> 标签：c#, c#-4.0, generics, compilation

我想知道为什么下面的泛型方法不能编译（C# 4.0）。我的同事和我都无法弄清楚。

编译器抱怨`this`which is a`SelectableRowBase`不能转换为 a `TItem`，它被限制为从`SelectableRowBase`. 如果我进行显式转换，一切正常（这就是我在源代码管理中检查的内容），但我想知道编译器为什么在这里抱怨。

那是编译器错误吗？我错过了什么吗？

```
public class SelectableRowBase
{
    public void AddToSelectedListWhenIsSelectedChanges<TItem>
            (ObservableCollection<TItem> selectedList)

        where TItem : SelectableRowBase
    {
        // Causes error:
        // The best overloaded method match for 
        //     'System.Collections.ObjectModel.Collection<TItem>.Add(TItem)'
        //      has some invalid arguments
        // Argument 1: cannot convert from SelectableRowBase' to 'TItem'
        Action actionOnSelected = () => selectedList.Add(this);
        Action actionOnDeselected = () => selectedList.Remove(this);

        // Compiles and works fine
        // only difference is the explicit cast
        Action actionOnSelected = () => selectedList.Add((TItem)this);
        Action actionOnDeselected = () => selectedList.Remove((TItem)this);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:49:29.430

它不工作是完全合理的。

您正在尝试将*基*类型的实例添加到潜在*派生*类型的集合中。

这就像试图写：

```
List<string> strings = new List<string>();
strings.Add(new object()); 
```

这将违反类型安全。

基本上，绝对不能保证它`this`是`TItem`. 这*可能*就是演员编译的原因 - 但同样可能不是。这种转换是一个*非常糟糕*的主意——它将类型安全留给执行时间，这与泛型的目的相反。

# sql-server-2008 - 在 SQL Server 中的存储过程中获得一行的平均值

> ID：12678292
> 
> 赞同：0
> 
> 时间：2012-10-01T17:46:37.390
> 
> 标签：sql-server-2008, tsql, stored-procedures

我在 SQL Server 中有一个存储过程，它返回一些列的平均值，如下所示：

```
ALTER PROCEDURE [dbo].[Financial] 
AS
BEGIN
    SELECT 
        avg([aa ]) as 'aaa',
        avg([bb]) as 'bbb',
        avg([cc ]) as 'ccc',
        avg([dd]) as 'ddd',
        avg([ee]) as 'eee',
        avg([ ff]) as 'fff'
    FROM [FIN]
END 
```

现在我的问题是我想得到这个过程结果的平均值，我的意思是这个当前过程给了我一行它包含某列的平均值。现在我想要这一行的平均值！我能做些什么？

让我解释一下上述过程的结果可能是：

```
4,7,8,9,6 
```

接下来我想要平均值

```
4,7,8,9,6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:31:32.200

处理 NULL 值是一件很痛苦的事情。如果列中的所有值都可以为 NULL，则以下将计算平均值：

```
SELECT aaa, bbb, ccc, ddd, eee, fff,
    ((coalesce(aaa, 0) + coalesce(bbb, 0) + coalesce(ccc, 0) + coalesce(ddd, 0) +
      coalesce(eee, 0) + coalesce(fff, 0)) /
     ((case when aaa is null then 0.0 else 1.0 end) +
      (case when bbb is null then 0.0 else 1.0 end) +
      (case when ccc is null then 0.0 else 1.0 end) +
      (case when ddd is null then 0.0 else 1.0 end) +
      (case when eee is null then 0.0 else 1.0 end) +
      (case when fff is null then 0.0 else 1.0 end)
     )
    ) AS Average
FROM (
    SELECT 
        avg([aa ]) as 'aaa',
        avg([bb]) as 'bbb',
        avg([cc ]) as 'ccc',
        avg([dd]) as 'ddd',
        avg([ee]) as 'eee',
        avg([ ff]) as 'fff'
    FROM [FIN]
) AS Averages 
```

# html5-canvas - Three.js 不渲染

> ID：12678301
> 
> 赞同：2
> 
> 时间：2012-10-01T17:46:57.140
> 
> 标签：html5-canvas, three.js, render

我正在使用下面的代码来渲染一个 Blender 模型（默认的立方体模型刚刚开始）并且没有显示任何内容：

```
<html>
    <head>
        <title>Test page for the </title>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    </head>
    <body>
        <div id="container"></div>
        <script src="src/three.min.js"></script>
        <script src="src/Stats.js"></script>
        <script>
        var camera, scene, renderer, loader;
            init();
            render();
            function init(){

                var container = document.getElementById('container');

                camera = new THREE.PerspectiveCamera(10, window.innerWidth/window.innerHeight, 1, 500);
                camera.position.y = 100;
                camera.position.z = 100;

                controls = new THREE.TrackballControls( camera );

                scene = new THREE.Scene();

                loader = new THREE.JSONLoader();
                loader.load('obj/one.js', function (geometry){
                    mesh = new THREE.Mesh( geometry, new THREE.MeshNormalMaterial({overdraw: true}));
                    scene.add(mesh);
                });

                renderer = new THREE.CanvasRenderer();
                renderer.setSize(window.innerWidth, window.innerHeight);
                container.appendChild(renderer.domElement);

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function render(){
                renderer.render(scene, camera);
                controls.update();
                stats.update();
            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

        </script>
    </body>
</html> 
```

一切都正确放置在他们的路径中，我得到的只是一个空白屏幕。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:14:04.560

这是因为您没有制作动画。collada 加载器是一个回调函数，因此它会在初始页面渲染后完成加载，然后将对象添加到场景中。由于没有动画循环，一旦模型完成加载，页面将永远不会重绘。

# uiwebview - uiwebview webthread 崩溃

> ID：12678302
> 
> 赞同：1
> 
> 时间：2012-10-01T17:47:04.877
> 
> 标签：uiwebview, ios6

我的带有 UIWebView 的应用程序崩溃了很多。崩溃通常略有不同，但始终是具有类似堆栈跟踪的“WebThread”崩溃。

我发现[了这个](https://stackoverflow.com/questions/8100285/ios-uiwebview-crash-in-webthread)问题，但我不认为这是我的情况，我有 iOS 6 并且我没有加载 Office 文档。我正在使用 websocket 向服务器发送消息，并使用 ajax commet 从服务器接收消息。

当我开始连接时，总是会发生崩溃。

```
Date/Time:       2012-10-01 14:18:07.184 -0300
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000054
Crashed Thread:  4

Thread 4 name:  WebThread
Thread 4 Crashed:
0   WebCore                         0x35f1b9a0 WebCore::RootInlineBox::ascentAndDescentForBox(WebCore::InlineBox*, WTF::HashMap<WebCore::InlineTextBox const*, std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow>, WTF::PtrHash<WebCore::InlineTextBox const*>, WTF::HashTraits<WebCore::InlineTextBox const*>, WTF::HashTraits<std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow> > >&, int&, int&, bool&, bool&) const + 1344
1   WebCore                         0x35f1b1a4 WebCore::InlineFlowBox::computeLogicalBoxHeights(WebCore::RootInlineBox*, int&, int&, int&, int&, bool&, bool&, bool, WTF::HashMap<WebCore::InlineTextBox const*, std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow>, WTF::PtrHash<WebCore::InlineTextBox const*>, WTF::HashTraits<WebCore::InlineTextBox const*>, WTF::HashTraits<std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow> > >&, WebCore::FontBaseline, WebCore::VerticalPositionCache&) + 80
2   WebCore                         0x35f1ade4 WebCore::RootInlineBox::alignBoxesInBlockDirection(int, WTF::HashMap<WebCore::InlineTextBox const*, std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow>, WTF::PtrHash<WebCore::InlineTextBox const*>, WTF::HashTraits<WebCore::InlineTextBox const*>, WTF::HashTraits<std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow> > >&, WebCore::VerticalPositionCache&) + 124
3   WebCore                         0x35f1acc2 WebCore::RenderBlock::computeBlockDirectionPositionsForLine(WebCore::RootInlineBox*, WebCore::BidiRun*, WTF::HashMap<WebCore::InlineTextBox const*, std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow>, WTF::PtrHash<WebCore::InlineTextBox const*>, WTF::HashTraits<WebCore::InlineTextBox const*>, WTF::HashTraits<std::__1::pair<WTF::Vector<WebCore::SimpleFontData const*, 0ul>, WebCore::GlyphOverflow> > >&, WebCore::VerticalPositionCache&) + 54
4   WebCore                         0x35f18846 WebCore::RenderBlock::createLineBoxesFromBidiRuns(WebCore::BidiRunList<WebCore::BidiRun>&, WebCore::InlineIterator const&, WebCore::LineInfo&, WebCore::VerticalPositionCache&, WebCore::BidiRun*) + 162
5   WebCore                         0x35f0e30c WebCore::RenderBlock::layoutRunsAndFloatsInRange(WebCore::LineLayoutState&, WebCore::BidiResolver<WebCore::InlineIterator, WebCore::BidiRun>&, WebCore::InlineIterator const&, WebCore::BidiStatus const&, unsigned int) + 2048
6   WebCore                         0x35f0cf00 WebCore::RenderBlock::layoutRunsAndFloats(WebCore::LineLayoutState&, bool) + 724
7   WebCore                         0x35e4b562 WebCore::RenderBlock::layoutInlineChildren(bool, int&, int&) + 986
8   WebCore                         0x35e46390 WebCore::RenderBlock::layoutBlock(bool, int) + 1132
9   WebCore                         0x35e45c22 WebCore::RenderBlock::layout() + 38
10  WebCore                         0x35e48cbc WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 556
11  WebCore                         0x35e47f2c WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 528
12  WebCore                         0x35e463a0 WebCore::RenderBlock::layoutBlock(bool, int) + 1148
13  WebCore                         0x35e45c22 WebCore::RenderBlock::layout() + 38
14  WebCore                         0x35e48cbc WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 556
15  WebCore                         0x35e47f2c WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 528
16  WebCore                         0x35e463a0 WebCore::RenderBlock::layoutBlock(bool, int) + 1148
17  WebCore                         0x35e45c22 WebCore::RenderBlock::layout() + 38
18  WebCore                         0x35e45aae WebCore::RenderView::layout() + 478
19  WebCore                         0x35e404b2 WebCore::FrameView::layout(bool) + 1554
20  WebCore                         0x35e782c6 WebCore::ThreadTimers::sharedTimerFiredInternal() + 134
21  WebCore                         0x35e7820a WebCore::timerFired(__CFRunLoopTimer*, void*) + 62
22  CoreFoundation                  0x39a615dc __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 12
23  CoreFoundation                  0x39a6128c __CFRunLoopDoTimer + 268
24  CoreFoundation                  0x39a5fefc __CFRunLoopRun + 1228
25  CoreFoundation                  0x399d2eb8 CFRunLoopRunSpecific + 352
26  CoreFoundation                  0x399d2d44 CFRunLoopRunInMode + 100
27  WebCore                         0x35de4a70 RunWebThread(void*) + 440
28  libsystem_c.dylib               0x33e4730e _pthread_start + 306
29  libsystem_c.dylib               0x33e471d4 thread_start + 4 
```

...

```
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x000000a4
Crashed Thread:  2

Thread 2 name:  WebThread
Thread 2 Crashed:
0   WebCore                         0x35ae72f6 WebCore::requiresLineBox(WebCore::InlineIterator const&, WebCore::LineInfo const&, WebCore::WhitespacePosition) + 30
1   WebCore                         0x35ae7286 WebCore::RenderBlock::LineBreaker::skipLeadingWhitespace(WebCore::BidiResolver<WebCore::InlineIterator, WebCore::BidiRun>&, WebCore::LineInfo&, WebCore::RenderBlock::FloatingObject*, WebCore::LineWidth&) + 162
2   WebCore                         0x35ae476e WebCore::RenderBlock::LineBreaker::nextLineBreak(WebCore::BidiResolver<WebCore::InlineIterator, WebCore::BidiRun>&, WebCore::LineInfo&, std::__1::pair<WebCore::RenderText*, WebCore::LazyLineBreakIterator>&, WebCore::RenderBlock::FloatingObject*, unsigned int) + 158
3   WebCore                         0x35ae45de WebCore::RenderBlock::layoutRunsAndFloatsInRange(WebCore::LineLayoutState&, WebCore::BidiResolver<WebCore::InlineIterator, WebCore::BidiRun>&, WebCore::InlineIterator const&, WebCore::BidiStatus const&, unsigned int) + 2770
4   WebCore                         0x35ae2f00 WebCore::RenderBlock::layoutRunsAndFloats(WebCore::LineLayoutState&, bool) + 724
5   WebCore                         0x35a21562 WebCore::RenderBlock::layoutInlineChildren(bool, int&, int&) + 986
6   WebCore                         0x35a1c390 WebCore::RenderBlock::layoutBlock(bool, int) + 1132
7   WebCore                         0x35a1bc22 WebCore::RenderBlock::layout() + 38
8   WebCore                         0x35a1ecbc WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 556
9   WebCore                         0x35a1df2c WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 528
10  WebCore                         0x35a1c3a0 WebCore::RenderBlock::layoutBlock(bool, int) + 1148
11  WebCore                         0x35a1bc22 WebCore::RenderBlock::layout() + 38
12  WebCore                         0x35a1ecbc WebCore::RenderBlock::layoutBlockChild(WebCore::RenderBox*, WebCore::RenderBlock::MarginInfo&, int&, int&) + 556
13  WebCore                         0x35a1df2c WebCore::RenderBlock::layoutBlockChildren(bool, int&) + 528
14  WebCore                         0x35a1c3a0 WebCore::RenderBlock::layoutBlock(bool, int) + 1148
15  WebCore                         0x35a1bc22 WebCore::RenderBlock::layout() + 38
16  WebCore                         0x35a1baae WebCore::RenderView::layout() + 478
17  WebCore                         0x35a164b2 WebCore::FrameView::layout(bool) + 1554
18  WebCore                         0x35a4e2c6 WebCore::ThreadTimers::sharedTimerFiredInternal() + 134
19  WebCore                         0x35a4e20a WebCore::timerFired(__CFRunLoopTimer*, void*) + 62
20  CoreFoundation                  0x396375dc __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 12
21  CoreFoundation                  0x3963728c __CFRunLoopDoTimer + 268
22  CoreFoundation                  0x39635efc __CFRunLoopRun + 1228
23  CoreFoundation                  0x395a8eb8 CFRunLoopRunSpecific + 352
24  CoreFoundation                  0x395a8d44 CFRunLoopRunInMode + 100
25  WebCore                         0x359baa70 RunWebThread(void*) + 440
26  libsystem_c.dylib               0x33a1d30e _pthread_start + 306
27  libsystem_c.dylib               0x33a1d1d4 thread_start + 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:54:45.277

我修复了这个错误，我像[这样](https://stackoverflow.com/questions/6508313/javascript-console-log-in-an-ios-uiwebview)向可可发送 javascript 日志，我通过删除它来修复这些崩溃。

实际上，这对于 iOS 6 来说不再是必需的了，因为现在可以使用 MAC OX safari 调试 javascript =)

# c# - 静态属性和单例有什么区别？

> ID：12678305
> 
> 赞同：8
> 
> 时间：2012-10-01T17:47:20.570
> 
> 标签：c#, design-patterns

用 C# 实现的单例可能是这样的：

```
public class Singleton
{
   private static Singleton instance;

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new Singleton();
         }
         return instance;
      }
   }
} 
```

如果我使用静态来实现它，例如：

```
public static class Globals{
  public static Singleton Instance = new Singleton();
} 
```

这样，app 也应该只获取整个应用程序的一个实例。那么这两种方法有什么区别呢？为什么不直接使用静态成员（更简单直接）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T17:50:32.953

如果您使用第二种方法：

```
public static class Globals{
  public static Singleton Instance = new Singleton();
} 
```

没有什么可以阻止某人这样做：

```
Singleton anotherInstance = new Singleton(); // Violates singleton rules 
```

您也不会获得与第一个版本（尝试）实现的相同的延迟初始化，而且您使用的是公共字段，如果您需要更改值时发生的情况，这将不允许您在未来获得相同的灵活性被提取。

请注意，.NET 4 提供了一种更好的方法来制作单例：

```
public class Singleton
{
   private static readonly Lazy<Singleton> instance = new Lazy<Singleton>( ()=> new Singleton());

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         return instance.Value;
      }
   }
} 
```

这很好，因为它完全惰性**且**完全线程安全，但也很简单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T17:58:04.977

以下是 static 和 Singleton 之间的一些区别：

1.  单例是一种模式，而静态是一个关键字。
2.  单例类可以有静态和非静态方法，但静态类只能有静态成员和方法。
3.  我们可以在单例类中实现接口，但在静态类中我们不能实现接口。
4.  我们可以扩展Singleton 类，而我们不能扩展静态类，即Singleton 类可以派生自任何类型的类。

更多[静态与单例](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)

# android - android中webview中的滚动按钮

> ID：12678310
> 
> 赞同：0
> 
> 时间：2012-10-01T17:47:45.113
> 
> 标签：android, webview

嗨，正如您在图像中看到的滚动条。我想在 web 视图中实现这一功能，我如何在 web 视图中开发此功能。谢谢你 。![在此处输入图像描述](../Images/86258306424cc19943e4fb3fb332c716.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:15:43.297

这是使用 s 在[`ListView`s](http://developer.android.com/reference/android/widget/ListView.html)[`.setFastScrollEnabled(true);`](http://developer.android.com/reference/android/widget/AbsListView.html#setFastScrollEnabled(boolean))上完成的。

但是，不支持它`WebView`。这意味着您必须创建自己的`View`覆盖，`WebView`并在其中包含一些项目，以[滚动您`WebView`](https://stackoverflow.com/questions/2238938/how-to-programmatically-scroll-android-webview)的[`OnTouchListener`](http://developer.android.com/reference/android/view/View.OnTouchListener.html)' 事件。

# android - 筛选列表视图

> ID：12678316
> 
> 赞同：2
> 
> 时间：2012-10-01T17:48:06.967
> 
> 标签：android, listview, filter

这是我的过滤器的代码：

```
private class NameFilter extends Filter {

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        // NOTE: this function is *always* called from a background thread,
        // and
        // not the UI thread.
        constraint = constraint.toString().toLowerCase();
        FilterResults result = new FilterResults();
        if (constraint != null && constraint.toString().length() > 0) {
            ArrayList<Place> filt = new ArrayList<Place>();
            ArrayList<Place> lItems = new ArrayList<Place>();
            synchronized (this) {
                lItems.addAll(objects);
            }
            for (int i = 0, l = lItems.size(); i < l; i++) {
                Place m = lItems.get(i);
                if (m.getName().toLowerCase().contains(constraint))
                    filt.add(m);
            }
            result.count = filt.size();
            result.values = filt;
        } 
        else {
            synchronized (this) {
                result.values = objects;
                result.count = objects.size();
            }
        }
        return result;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        // NOTE: this function is *always* called from the UI thread.
        filtered = (ArrayList<Place>) results.values;
        notifyDataSetChanged();
        clear();
        for (int i = 0, l = filtered.size(); i < l; i++)
            add(filtered.get(i));
        notifyDataSetInvalidated();
    }

} 
```

这是我的活动代码：

```
lvPlace = (ListView) findViewById(R.id.listView1);

    final ArrayList<Place> searchResults = GetSearchResults();

    filterEditText = (EditText) findViewById(R.id.filter_text);
    filterEditText.addTextChangedListener(filterTextWatcher);

    adapter = new PlaceAdapter(this, 0, searchResults);

    lvPlace.setAdapter(adapter);
    lvPlace.requestFocus();
    lvPlace.setTextFilterEnabled(true);

private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (adapter != null) {
            adapter.getFilter().filter(s.toString().toLowerCase());
            filterEditText.getText().toString();
        } else {
            Log.d("filter", "no filter availible");
        }
    }

};

@Override
protected void onDestroy() {
    super.onDestroy();
    filterEditText.removeTextChangedListener(filterTextWatcher);
} 
```

我已经为此苦苦挣扎了一段时间，因为当我在搜索框中输入内容时它工作正常，但是一旦我从搜索字段中删除了文本，列表就不会返回到初始状态。请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:02:35.723

`publishResults`在你的方法中试试这个：

```
protected void publishResults(CharSequence constraint,FilterResults results)
{   
    filtered.clear();
    filtered = (ArrayList<Place>) results.values;
    if(filtered.size() < 1)
        filtered = objects;

    notifyDataSetChanged();

    for (int i = 0, l = filtered.size(); i < l; i++)
        add(filtered.get(i));
    notifyDataSetInvalidated();
} 
```

使用此代码，您可以取出过滤方法中的 else 子句。

另外，您还可以通过使用这样的循环使您的 for 循环更有效率：

```
for(Place place : filtered)
    add(place); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:08:38.033

> 当我在搜索框中输入内容时它工作正常，但是一旦我从搜索字段列表中删除了文本并没有返回到初始状态。

如果没有看到适配器的代码，这很可能会发生，因为您没有保留对适配器使用的初始值的引用。例如，如果您`ArrayList`在适配器中设置了一个带有数据的数据并开始在过滤中输入字符，`EditText`这将起作用，因为通过过滤您只使用前一组值的子集（这将始终可用）。当您从 中删除一个字符时，`EditText`您需要对前一组值进行过滤，但随着该组被替换，这些值不再存在并且过滤中断。

解决方案是**复制**初始值以始终拥有完整`ArrayList`的值来进行过滤。适配器将使用一个副本`ArrayList`（这将被过滤结果`ArrayList`替换`publishResults`），另一个将用于在方法中由过滤器进行过滤（这`ArrayList`将保持不变！）`performFiltering`.

# java - 如何访问 ScrollPane 的滚动条

> ID：12678317
> 
> 赞同：7
> 
> 时间：2012-10-01T17:48:17.170
> 
> 标签：java, javafx, javafx-8, javafx-2

我正在尝试获取有关`ScrollBar`标准包含在`ScrollPane`. 特别是我有兴趣阅读`height`水平的`Scrollbar`。我如何参考它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T04:07:05.917

我认为您可以使用 Node 类的 lookupAll() 方法来查找滚动条。 [http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll(java.lang.String)](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll(java.lang.String))

例如：

```
package com.test;

import java.util.Set;
import javafx.application.Application;
import javafx.geometry.Orientation;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.ScrollBar;
import javafx.scene.control.ScrollPane;
import javafx.scene.control.ScrollPaneBuilder;
import javafx.scene.text.Text;
import javafx.scene.text.TextBuilder;
import javafx.stage.Stage;

public class JavaFxScrollPaneTest extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        String longString = "The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.";
        Text longText = TextBuilder.create().text(longString).build();

        ScrollPane scrollPane = ScrollPaneBuilder.create().content(longText).build();
        primaryStage.setScene(new Scene(scrollPane, 400, 100));
        primaryStage.show();

        Set<Node> nodes = scrollPane.lookupAll(".scroll-bar");
        for (final Node node : nodes) {
            if (node instanceof ScrollBar) {
                ScrollBar sb = (ScrollBar) node;
                if (sb.getOrientation() == Orientation.HORIZONTAL) {
                    System.out.println("horizontal scrollbar visible = " + sb.isVisible());
                    System.out.println("width = " + sb.getWidth());
                    System.out.println("height = " + sb.getHeight());
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T11:03:02.753

这不是最好的做法，但有效，

```
private boolean determineVerticalSBVisible(final ScrollPane scrollPane) {
    try {
        final ScrollPaneSkin skin = (ScrollPaneSkin) scrollPane.getSkin();
        final Field field = skin.getClass().getDeclaredField("vsb");
        field.setAccessible(true);
        final ScrollBar scrollBar = (ScrollBar) field.get(skin);
        field.setAccessible(false);
        return scrollBar.isVisible();
    } catch (final Exception e) {
        e.printStackTrace();
    }
    return false;
} 
```

水平滚动条使用“hsb”。

最好的问候，恩里克·盖德斯。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-30T11:03:15.410

由于上述方法不适用于所有人（包括我），因此我对其进行了更多调查并找到了问题的根源。

一般来说，这两种方法都有效，但只有在设置了[`ScrollPane`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ScrollPane.html)'[`skin`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Control.html#skinProperty)属性后才有效。就我而言，`skin`在`null`使用[`FXMLLoader`](https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html).

`skin`通过在属性尚未初始化的情况下延迟调用（使用一次性侦听器）可以解决问题。

工作样板代码：

```
ScrollPane scrollPane;
// ...
if (scrollPane.getSkin() == null) {
    // Skin is not yet attached, wait until skin is attached to access the scroll bars
    ChangeListener<Skin<?>> skinChangeListener = new ChangeListener<Skin<?>>() {
        @Override
        public void changed(ObservableValue<? extends Skin<?>> observable, Skin<?> oldValue, Skin<?> newValue) {
            scrollPane.skinProperty().removeListener(this);
            accessScrollBar(scrollPane);
        }
    };
    scrollPane.skinProperty().addListener(skinChangeListener);
} else {
    // Skin is already attached, just access the scroll bars
    accessScrollBar(scrollPane);
}

private void accessScrollBar(ScrollPane scrollPane) {
    for (Node node : scrollPane.lookupAll(".scroll-bar")) {
        if (node instanceof ScrollBar) {
            ScrollBar scrollBar = (ScrollBar) node;
            if (scrollBar.getOrientation() == Orientation.HORIZONTAL) {
                // Do something with the horizontal scroll bar

                // Example 1: Print scrollbar height
                // System.out.println(scrollBar.heightProperty().get());

                // Example 2: Listen to visibility changes
                // scrollBar.visibleProperty().addListener((observable, oldValue, newValue) -> {
                //     if(newValue) {
                //         // Do something when scrollbar gets visible
                //     } else {
                //         // Do something when scrollbar gets hidden
                //     }
                // });
            }
            if (scrollBar.getOrientation() == Orientation.VERTICAL) {
                // Do something with the vertical scroll bar
            }

        }
    }
} 
```

# php - 如何创建自定义 youtube url 表单验证器

> ID：12678319
> 
> 赞同：2
> 
> 时间：2012-10-01T17:48:30.773
> 
> 标签：php, symfony-1.4, validation

我想创建一个自定义表单验证器来检查我的用户是否正在发送 youtube url。我已经创建了我的`lib/validator/youtubeValidator.class.php`

然后我在我的`MyForm.class.php`：`new YoutubeValidator(........)`

这是代码：

```
class YoutubeValidator extends sfValidatorUrl
{
  protected function configure($options = array(), $messages = array())
  {
    $this->addMessage('invalid', 'Veuillez entrer un lien Youtube');
  }
  protected function doClean($url)
  {
    $pattern = 
      '%^# Match any youtube URL
      (?:https?://)?  # Optional scheme. Either http or https
      (?:www\.)?      # Optional www subdomain
      (?:             # Group host alternatives
        youtu\.be/    # Either youtu.be,
      | youtube\.com  # or youtube.com
        (?:           # Group path alternatives
          /embed/     # Either /embed/
        | /v/         # or /v/
        | /watch\?v=  # or /watch\?v=
        )             # End path alternatives.
      )               # End host alternatives.
      ([\w-]{10,12})  # Allow 10-12 for 11 char youtube id.
      $%x'
      ;

    $result = preg_match($pattern, $url, $matches);
    if (false !== $result)
    {
      return $matches[1];
    }
    return false;

    if (false !== $result)
    {
      throw new sfValidatorError($this, 'invalid', array('value' => $value));
    }
    else
    {
      return true;
    }
  }
} 
```

但它根本不起作用。

此外，如果我的验证器可以检查 youtube 视频是否存在，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:18:46.023

您可能需要将最后几行更改为以下内容：

```
$result = preg_match($pattern, $url, $matches);
if (false === $result)
{
   throw new sfValidatorError($this, 'invalid', array('value' => $url));
}

return $url; 
```

这只会检查用户提交的网址是否为 youtube 网址（如果它与您的正则表达式匹配）。如果没有，将抛出异常。

* * *

**更新** ——删除——

* * *

**更新 2**

```
class YoutubeValidator extends sfValidatorUrl
{
  protected function configure($options = array(), $messages = array())
  {
    parent::configure($options, $messages);

    $this->setMessage('invalid', 'Veuillez entrer un lien Youtube');
  }

  protected function doClean($value)
  {
    $pattern = "/(http(s)?:\/\/)?(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/";

    preg_match($pattern, $value, $matches);

    if (empty($matches[3]))
    {
      throw new sfValidatorError($this, 'invalid', array('value' => $value));
    }

    return $matches[3];
  }
} 
```

我已经对其进行了测试，似乎工作正常（使用时返回实际的视频 ID `$form->getValues()`）。

# playorm - 所有 playOrm 测试均失败

> ID：12678323
> 
> 赞同：0
> 
> 时间：2012-10-01T17:48:37.560
> 
> 标签：playorm

我刚刚下载了最新版本的代码并尝试了“ant testCheckin”。

所有测试都失败了。我可能做错了什么？我在 factorySingleton 中尝试了 IN_MEMORY 和 CASSANDRA 配置

* * *

## 测试

运行 com.alvazan.test.TestColumnSlice SLF4J：类路径包含多个 SLF4J 绑定。SLF4J：在 [jar:file:/home/mvalle/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder 中找到绑定.class] SLF4J：在 [jar:file:/home/mvalle/.m2/repository/ch/qos/logback/logback-classic/1.0.1/logback-classic-1.0.1.jar!/org/ 中找到绑定slf4j/impl/StaticLoggerBinder.class] SLF4J：有关说明，请参见[http://www.slf4j.org/codes.html#multiple_bindings](http://www.slf4j.org/codes.html#multiple_bindings)。log4j:WARN 找不到记录器 (com.alvazan.test.FactorySingleton) 的附加程序。log4j:WARN 请正确初始化 log4j 系统。log4j:WARN 见[http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)了解更多信息。测试运行：4，失败：0，错误：4，跳过：0，经过的时间：2.075 秒 <<< 失败！testDecimalColumnSlice(com.alvazan.test.TestColumnSlice) 经过时间：1993 秒 <<< 错误！java.lang.ClassCastException：com.alvazan.orm.impl.meta.data.MetaClassSingle 无法在 com.alvazan.orm.impl.meta.scan.ScannerForField 转换为 com.alvazan.orm.impl.meta.data.MetaClassInheritance .processToOne(ScannerForField.java:342) 在 com.alvazan.orm.impl.meta.scan.ScannerForField.processManyToOne(ScannerForField.java:202) 在 com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectField(ScannerForClass .java:185) 在 com.alvazan.orm.impl.meta.scan.ScannerForClass.scanFields(ScannerForClass.java:169) 在 com.alvazan.orm.impl.meta.scan.ScannerForClass.scanSingle(ScannerForClass.java:108 ) 在 com.alvazan.orm.impl.meta。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:27:14.073

好的，我们找到了。此错误现已在 PlayOrm 中修复。事实证明，扫描以不同的顺序扫描类，并且当以不同的顺序扫描时会发现一个错误。此错误未修复，因此仍可以按任何顺序扫描。

我让其他人检查它并运行 ./build 并且他运行良好，所以可以调试你的问题......

1.  运行 git status 看看你有什么变化
2.  我添加了一些“调试”级别的日志并打开了调试，所以更新到最新的（这些将帮助我进一步调试，而且我需要在这些区域更多的日志）
3.  运行 TestKeyTypes.testIntegerType 并剪切并粘贴问题中的日志，以便我可以进一步调试它

我的猜测是，您对某种继承实体进行了更改，该实体未正确抛出“您不能这样做”的异常（我有很多，但可能缺少一个）。

院长

# windows-phone-7 - 如何以编程方式隐藏/显示数据透视项目标题

> ID：12678325
> 
> 赞同：0
> 
> 时间：2012-10-01T17:48:47.873
> 
> 标签：windows-phone-7, pivot, pivotitem

我有一个带有非数据绑定枢轴项的枢轴控件，这些枢轴项具有不同的结构。它们都有简单的文本标题。我们如何根据方向变化来改变标题的可见性？我想要实现的是，当手机处于横向状态时，我希望标题是不可见的，并且所有空间都被枢轴项内的相应内容使用。我尝试了很多，最大的问题是带有标题的面板总是采用原始高度。（我试图改变字体大小，可见性等......）请帮忙。这是我的代码示例

 `````
 <controls:Pivot x:Name="pvtMain" >                                          

        <controls:PivotItem x:Name="pvtItemOne" Header="My Header one">   

                    <MyUserControls:UserControlOne/>              

        </controls:PivotItem>

       <controls:PivotItem x:Name="pvtItemTwo" Header="My Header Two">   

                     <MyUserControls:UserControlTwo/>              

        </controls:PivotItem>

         <controls:PivotItem x:Name="pvtItemThree" Header="My Header Three">   

                  <MyUserControls:UserControlThree/>              

        </controls:PivotItem>

   </controls:PivotItem> 
````  `我正在使用 Windows phone SDK 7.0（出于向后兼容性的原因）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:26:26.667

这可能有效。试试看！！

```
void MainPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
    {
        if (e.Orientation == PageOrientation.Landscape || e.Orientation == PageOrientation.LandscapeLeft || e.Orientation == PageOrientation.LandscapeRight)
        {
            pvtItemOne.Header = null;
            pvtItemTwo.Header = null;
            pvtItemThree.Header = null;
            pvtMain.Margin = new Thickness(0, -150, 0, 0);
        }
        else
            {
                pvtItemOne.Header = "My Header One";
                pvtItemTwo.Header = "My Header Two";
                pvtItemThree.Header = "My Header Three";
                pvtMain.Margin = new Thickness(0);
            }
    } 
```

顺便说一句，您不需要为 7.0 设备维护任何向后兼容性。微软很久以前就停止了对这些设备的支持，市场也对这些设备关闭了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:32:39.287

您可以执行以下操作：

```
 <controls:PivotItem >
                        <controls:PivotItem.Header>
                            <Border x:Name="PivotItemHeader">
                                <TextBlock  Text="Test"  />
                            </Border>
                        </controls:PivotItem.Header>
                        <StackPanel>
                            <TextBlock Text="line1" />
                            <TextBlock Text="line2" />
                        </StackPanel>    
                    </controls:PivotItem> 
```

通过使用标题内的“边框”，您可以从代码中控制其可见性。比如：PivotItemHeader.Visibility = System.Windows.Visibility.Collapsed；

我知道它不漂亮，但它有效。``

# mysql - Mysql Left Join 不返回所有值

> ID：12678330
> 
> 赞同：0
> 
> 时间：2012-10-01T17:49:13.907
> 
> 标签：mysql, left-join

我有一个简单的 mysql 查询可以正常工作，但它不会返回所有值。当我单独使用左连接表时，所有值都会返回，但是当我添加其他表时，只有那些都是“=”的表才会返回一个值。这是查询：

```
SELECT 

d.flight_no   , b.arrival_flight

FROM  
jtl_booking_transfer_details                    AS      b
LEFT  JOIN jtl_flight_info                      AS      d      
       ON  (d.flight_no      b.arrival_flight),

jtl_booking_master                                     a,
jtl_hotels                                             c,                                                               
jtl_airlines                                           e

WHERE 

a.voucher_number                             =        b.voucher_number             AND 
b.hotel_id                                   =        c.hotel_id                   AND
e.airline_code                               =        d.airline_code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:55:02.357

使用相同的语法获取所有表（更易于阅读：JOIN for ... 连接表，WHERE 子句用于其他谓词）

```
SELECT 
d.flight_no   , b.arrival_flight

FROM  
jtl_booking_transfer_details b
LEFT JOIN jtl_flight_info d      
   ON  d.flight_no = b.arrival_flight
LEFT JOIN  jtl_booking_master a 
   ON a.voucher_number = b.voucher_number
LEFT JOIN jtl_hotels c 
   ON b.hotel_id = c.hotel_id
LEFT JOIN jtl_airlines  e 
   ON  e.airline_code = d.airline_code 
```

# eclipse - EGit Push：如何存储远程存储库信息

> ID：12678332
> 
> 赞同：3
> 
> 时间：2012-10-01T17:49:18.103
> 
> 标签：eclipse, git, egit

当我将新提交推送到 Eclipse 中的远程存储库时，我必须再次填写表单：

![在此处输入图像描述](../Images/66ba0f1c2058333b54a964e39b4f9743.png)

但即使我单击安全存储中的复选框存储，也不会存储信息。

我怎样才能存储信息而不必每次都重新输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T05:42:45.717

如果您总是只使用一个远程存储库，那么您应该[将该远程存储库配置为您的“上游”](http://wiki.eclipse.org/EGit/User_Guide#Pushing_to_other_Repositories)。选择一个项目并使用 Team -> Remote -> Configure push to upstream。

如果要使用多个远程存储库，则应在 git 透视图中展开存储库节点以查看*Remotes*节点。[您可以在那里添加一个新的远程存储库](http://wiki.eclipse.org/EGit/User_Guide#Adding_a_Remote_Configuration)一次（使用*远程*节点上的上下文菜单），然后通过选择匹配的远程远程节点并使用远程节点的上下文菜单中的*推送*命令推送到您的远程存储库之一。

![新的远程配置](../Images/2c14a051d45d3874b79cc319a3b498ae.png)

# boost-spirit - 如何以提升精神从 C++11 lambda 语义动作构建合成参数？

> ID：12678334
> 
> 赞同：7
> 
> 时间：2012-10-01T17:49:21.713
> 
> 标签：boost-spirit

我正在尝试构建具有增强精神的 AST，并且在使用 C++11 lambda 表达式作为语义操作时，我一直在努力解决如何构建合成参数。

说我有一个规则：

`qi::rule<char*,ascii::space_type,SomeStruct()> rule = some_parser[[](some_type val){/*code to build SomeStruct from val*/}];`

我的 lambda 如何返回合成参数 (SomeStruct)？按返回值？因为 qi::_val 在这种情况下不可用，对吧？（这对我来说有点晦涩难懂，如果这个问题表述得不好，请见谅）

在此先感谢您提供正确方向的任何指针！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T18:38:35.767

这似乎可以解决问题：http: [//ereethahksors.blogspot.fr/2012/05/using-c11-lambdas-with-boostspiritqi.html](http://ereethahksors.blogspot.fr/2012/05/using-c11-lambdas-with-boostspiritqi.html)

相关报价：

```
typedef rule<Iterator, Label*(), space_type> label_rule_type;  
 label = lit(':') > symbol[[&](string& name, typename label_rule_type::context_type& context)   
          {   
           boost::fusion::at_c<0>(context.attributes) = _ast->addLabel(name);  
          }]; 
```

> 这里最重要的部分是 typedef 和它的`context_type`. 如果您只想使用 C++11 lambda 对传递的属性做非常简单的事情，事情非常容易，但如果您想访问本地或`qi::_val`，则必须使用 context 参数。context 是一个非常模板化的实例，`boost::spirit::context`可让您访问两个`boost::fusion`序列；属性和本地人。

# mpi - 我的程序如何检测它是否是通过 mpirun 启动的

> ID：12678337
> 
> 赞同：6
> 
> 时间：2012-10-01T17:49:33.863
> 
> 标签：mpi

我的 MPI 程序如何检测它是作为独立应用程序启动还是通过 mpirun 启动的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:10:02.423

考虑到 semiuseless 和 Hristo Iliev 的回答和评论，没有通用且可移植的方法来做到这一点。作为一种解决方法，您可以检查 mpirun 设置的环境变量。参见例如：
[http ://www.open-mpi.org/faq/?category=running#mpi-environmental-variables](http://www.open-mpi.org/faq/?category=running#mpi-environmental-variables)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:48:03.843

没有 MPI 标准方法来区分直接启动的 MPI 应用程序或作为单个级别与 mpirun 启动的 MPI 应用程序之间的区别。有关此类 MPI 作业的更多信息， 请参阅“ [Singleton MPI_Init ”。](http://www.mpi-forum.org/docs/mpi-20-html/node112.htm)

来自 Douglas 的环境变量检查答案是一个合理的 hack……但不能移植到任何其他 MPI 实现。

# c# - 一次只能有一个用户登录

> ID：12678339
> 
> 赞同：0
> 
> 时间：2012-10-01T17:49:37.793
> 
> 标签：c#, asp.net

我有一个班级声明，`public abstract class CompanyHttpApplication : HttpApplication`

在`CompanyHttpApplication`我有

```
public static CompanyHttpApplication Current
{
    get { return (CompanyHttpApplication)HttpContext.Current.ApplicationInstance; }
} 
```

和

```
public CompanyProfileInfo Profile
{
    get
    {
        return profile ?? (profile = ProfileManager
            .FindProfilesByUserName(ProfileAuthenticationOption.Authenticated,
                 User.Identity.Name).Cast<CompanyProfileInfo>().ToList().First());
    }

    private set { profile = value; }
} 
```

每当我访问用户时：

```
CatapultHttpApplication.Current.Profile.UserName 
```

它会获取最后登录的人。我明白为什么（因为它在应用程序而不是会话中），但我不知道如何更改它。我可以做些什么来改变它，使它使用会话而不是应用程序？

# vim - Vim：在插入模式下粘贴在光标之前

> ID：12678342
> 
> 赞同：0
> 
> 时间：2012-10-01T17:49:50.800
> 
> 标签：vim

> **可能重复：**
> [Vim - 以插入模式粘贴？](https://stackoverflow.com/questions/2861627/vim-paste-in-insert-mode)

除其他外，我有两个映射：

```
vnoremap <C-X> "+x
inoremap <C-V> <C-O>"+P 
```

使用它我可以像在任何其他编辑器中一样选择和插入文本，但有一点很奇怪：当光标位于行尾时，文本被插入到最后一个字符之前，而不是预期的最后一个字符之后。假设剪贴板包含`x`. 光标在`|`。在插入模式下：

```
^|ab$   yields: ^x|ab$   expected: ^x|ab$
^a|b$           ^ax|b$             ^ax|b$
^ab|$           ^axb|$             ^abx|$ 
```

当我将映射更改`<C-O>"+p`为在行开始时遇到同样的问题时，我想这是由于`<C-O>`它将光标更改为无法在开始之前/结束之后放置的块光标。

那么：如何在插入模式光标之前插入文本，使用`<C-V>`，而不必调用调用`p`或`P`取决于行中位​​置的函数，这是我唯一能想到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:53:58.723

[第一个相关问题](https://stackoverflow.com/questions/2861627/vim-paste-in-insert-mode)。呃。

```
inoremap <C-V> <C-R>" 
```

`"`就像我想要的那样，以插入模式在光标之前插入寄存器的内容。

# google-maps - Google GEO 搜索提示

> ID：12678346
> 
> 赞同：1
> 
> 时间：2012-10-01T17:50:16.190
> 
> 标签：google-maps, search, google-maps-api-3

问题一：如何像www.airbnb.com那样实现GEO搜索提示？当我开始写“伦敦..”时，它会自动建议“伦敦”等。与地图上的其他点相同。在哪里可以搜索有关它的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:41:00.487

看[演示](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

工作的代码

```
var input = document.getElementById('searchTextField');
    var autocomplete = new google.maps.places.Autocomplete(input);

   autocomplete.bindTo('bounds', map); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:39:21.613

查看 Google 的[这篇博客文章，](http://googlegeodevelopers.blogspot.com/2012/05/faster-address-entry-with-google-places.html)其中描述了如何使用[Google Places Autocomplete](https://developers.google.com/places/documentation/autocomplete)来完成您所询问的内容。

（注意：airbnb.com 很有可能使用 Google Places API 以外的其他东西，可能是内部服务 - 实际上我只是查看了源代码，他们正在使用 Google Places API 做某事）

# java - 在记事本++中运行java的问题

> ID：12678349
> 
> 赞同：1
> 
> 时间：2012-10-01T17:50:25.353
> 
> 标签：java, notepad++

我正在尝试在 notepad++ 中编译和运行 java 程序，但出现错误代码 2，系统找不到指定的文件。

这是我的程序代码：

```
public class test {
    public static void main(String[] args) {
        System.out.println("It worked!!!!!");
    }
} 
```

我正在尝试使用它来运行和编译它

```
javac "$(FULL_CURRENT_PATH)"
java -classpath "$(CURRENT_DIRECTORY)" "$(NAME_PART)" 
```

这是我找到此页面的链接：[http ://www.dreamincode.net/forums/topic/113551-compilingrunning-java-programs-in-notepad/](http://www.dreamincode.net/forums/topic/113551-compilingrunning-java-programs-in-notepad/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:40:38.267

javac 在您的路径上不可用。你可以`javac -version`从命令行执行吗？我希望您收到以下信息：

```
'javac' is not recognized as an internal or external command, 
operable program or batch file. 
```

您可以将完全限定的路径添加到您的`javac`和上面的`java`命令中，或者您可以将 java bin 目录添加到您的路径中。

# java - 处理用户输入时出现 ArrayList IndexOutOfBoundsException

> ID：12678350
> 
> 赞同：1
> 
> 时间：2012-10-01T17:50:30.710
> 
> 标签：java, arraylist

我正在尝试编写一个使用哨兵控制的 do-while 循环的程序，该循环反复询问用户正整数。

当用户输入负值时，循环应该结束。循环完成后，您的程序应打印出用户输入的正数的最小值、最大值、平均值和计数。

但是，当我运行程序时，我得到了错误：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 3, Size: 3
    at java.util.ArrayList.rangeCheck(Unknown Source)
    at java.util.ArrayList.get(Unknown Source)
    at posNeg.main(posNeg.java:31) 
```

我一直在寻找答案，但似乎没有一个有效。大多数人只是建议`=`从`for (int i = 0; i <= (count); i++) {`.

无论如何，这是完整的代码：

```
import java.util.*;
import java.lang.Math;

public class posNeg {

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);
        ArrayList list = new ArrayList();
        int num;
        int count = 0;

        do{
            System.out.println("enter pos nums (or a neg num to quit): ");
            num = sc.nextInt();
            list.add(num);
            count++;
        } while (num >= 0);

        Iterator it = list.iterator();

        list.remove(list.get(count-1));

        Object max = Collections.max(list);
        Object min = Collections.min(list);

        System.out.print(list);

        int tot = 0;
        for (int i = 0; i <= (count); i++) {
            Object piece = list.get(i);
            int piecenum = ((Number) piece).intValue();
            tot = tot + piecenum;
        }

        double avg;
        avg = tot/count;

        System.out.println("the max is "+max+". the min is "+min+". the avg is "+avg);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:53:11.427

当你建立你的列表时，你会增加计数。

所以建好之后`count==list.size()`。

之后，您从列表中删除一项但不要更改`count`。

所以`count==list.size()-1`。

所以你的循环应该是

```
for (int i = 0; i <= count-2; i++) { 
```

因为你有从 index`0`到`count-2`.

但是，您可以简单地做，而不是保持计数

```
for (int i = 0; i<list.size(); i++) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:28:36.210

一些建议，，，

```
 do{
        System.out.println("enter pos nums (or a neg num to quit): ");
        num = sc.nextInt();
        if (num >= 0)
           break;
        list.add(num);
    }while (true); 
```

.. 和下一个循环

```
 int tot = 0;
    for (int i : list ) {
        //do your stuff
    } 
```

..但你真的应该使用类型列表

```
 List<int> list = new ArrayList<int>() 
```

... 或类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:58:22.513

最好这样做……

```
for (int i = 0; i < (count); i++) {

 } 
```

**或者**

使用`For-Each`循环

```
for(Number n : list){

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:53:25.513

看看这个循环：

```
for (int i = 0; i <= (count); i++) { 
```

此时列表只有`count - 1`项目，但您正在循环`count + 1`时间。为了理智起见，您应该`count`在调用 之后递减`remove`，然后*将*循环更改为更惯用的：

```
for (int i = 0; i < count; i++) { 
```

或者，更简单地说：

```
for (Number number : list) {
    ...
} 
```

这只会在`list`通用之后才有效：

```
List<Number> list = new ArrayList<Number>(); 
```

你*真的*应该为集合使用泛型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T18:09:09.783

正如其他人所指出的那样，该错误与计数有关。我建议在输入循环中使用条件`break;`来避免将负值添加到列表中并增加计数。首先。每当使用基于零索引的语言时，您仍然需要替换`<=`为。`<`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T18:10:40.307

试试这个`list.size`而不是计数

```
for (int i = 0; i < list.size(); i++) {
            Object piece = list.get(i);
            int piecenum = ((Number) piece).intValue();
            tot = tot + piecenum;
        } 
```

# powershell - 32 位 Powershell：使用 ServerManager 模块？

> ID：12678353
> 
> 赞同：4
> 
> 时间：2012-10-01T17:50:52.017
> 
> 标签：powershell, scripting, import-module

我正在使用可以运行 powershell 片段的 32 位应用程序。我需要加载`ServerManager`模块，我通常会这样做：

```
Import-Module ServerManager 
```

但我得到这个错误：

未加载指定的模块“ServerManager”，因为在任何模块目录中都找不到有效的模块文件。

我假设，这是因为 64 位模块目录中不存在 ServerManager 模块，所以我尝试了以下方法：

```
Import-Module "C:\Windows\sysnative\WindowsPowerShell\v1.0\Modules\ServerManager" 
```

但现在我得到了错误：

```
导入模块：无法加载 Windows PowerShell 管理单元 C:\Windows\assembly\GAC_MSIL\Microsoft.Windows.ServerManager.PowerSh
ell\6.1.0.0__31bf3856ad364e35\Microsoft.Windows.ServerManager.PowerShell.dll 因为以下错误：无法加载
 一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。
加载程序例外：

无法加载文件或程序集“Microsoft.Windows.ServerManager，版本=6.1.0.0，文化=中性，PublicKeyToken=31bf3856
ad364e35' 或其依赖项之一。该系统找不到指定的文件。
无法加载文件或程序集“Microsoft.Windows.ServerManager，版本=6.1.0.0，文化=中性，PublicKeyToken=31bf3856
ad364e35' 或其依赖项之一。该系统找不到指定的文件。
无法加载文件或程序集“Microsoft.Windows.ServerManager，版本=6.1.0.0，文化=中性，PublicKeyToken=31bf3856
ad364e35' 或其依赖项之一。该系统找不到指定的文件。
无法加载文件或程序集“Microsoft.Windows.ServerManager，版本=6.1.0.0，文化=中性，PublicKeyToken=31bf3856
ad364e35' 或其依赖项之一。该系统找不到指定的文件。
无法加载文件或程序集“Microsoft.Windows.ServerManager，版本=6.1.0.0，文化=中性，PublicKeyToken=31bf3856
ad364e35' 或其依赖项之一。该系统找不到指定的文件。
无法加载文件或程序集“Microsoft.Windows.ServerManager，版本=6.1.0.0，文化=中性，PublicKeyToken=31bf3856
ad364e35' 或其依赖项之一。该系统找不到指定的文件。
在行：1 字符：14

```

关于如何在 32 位 powershell 中使用 ServerManager 模块的任何建议？或者关于如何在 Server 2008 R2（不使用 UI）上安装“桌面体验”功能的其他建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:37:41.997

您唯一真正的选择是生成一个 64 位的 powershell.exe 实例来处理您的服务器管理器命令。因为父进程是 32 位的，所以您必须使用相同的`%windir%\sysnative`技巧来启动 powershell.exe。

```
%windir%\sysnative\windowspowershell\v1.0\powershell.exe 
     -command '& { ipmo servermanager; add-windowsfeature foo }' 
```

（为清楚起见包装）

# java - Java EE 6 教程组件

> ID：12678355
> 
> 赞同：0
> 
> 时间：2012-10-01T17:50:54.700
> 
> 标签：java, oracle, jakarta-ee, crud

我正在寻找一个带有 REST API 和数据库层的示例 J2EE6 Web 服务。我的搜索将我带到了[http://docs.oracle.com/javaee/6/tutorial/doc/bnayk.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnayk.html)，它谈到了通过执行以下操作来获取 J2EE6 示例列表：

通过更新中心更新教程

*   在 NetBeans IDE 中打开服务选项卡并展开服务器。
*   右键单击 GlassFish Server 3 实例并选择查看更新中心以显示更新工具。
*   在树中选择可用更新以显示更新包的列表。
*   查找 Java EE 6 教程 (javaee-tutorial) 包的更新。
*   如果有更新版本的教程，请选择 Java EE 6 教程 (javaee-tutorial)，然后单击安装。

问题是列表没有`Java EE 6 Tutorial (javaee-tutorial) package`下`updates`or`Add-ons`或`Installed Components`。

我正在使用 Netbeans 7.2、Glassfish 3.1.2、Mac OSX Lion。我想要的只是一个带有数据库层和 REST API 层的 J2EE6 Web 服务。有人知道这样的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:20:18.780

以下是 Blaise 关于如何创建安静的 Web 服务的 5 部分系列的链接。它们确实符合 JEE6 规范。 [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-15.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-15.html)

可能还有很多其他的，但我以前使用过它并且确实发现它非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:17:41.333

该文档适用于 Windows，不太适合 OSX。

在 OSX 中试试这个：

1.  在 Glassfish 更新工具中，按下“编辑属性”按钮，然后启用发布者 release.javaeesdk.oracle.com；

2.  单击左侧窗格中的“可用加载项”，在右侧窗格中找到“Java EE 教程”。

# sap-ase - Sybase ASE 15.7 的最低要求是什么？

> ID：12678364
> 
> 赞同：1
> 
> 时间：2012-10-01T17:51:27.183
> 
> 标签：sap-ase

这是一个荒谬的问题，因为根据技术要求应该在他们的网页上，但我找不到。

那么有没有人知道：

1.  此数据库支持哪些版本的 Windows？
2.  内存要求
3.  还有什么会阻止它在普通安装的 Windows（服务器或其他）上工作的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:39:13.963

所有这些信息都可以在[“安装指南 Adaptive Server Enterprise 15.7 for Windows”](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc35888.1570/doc/html/jon1256241632272.html)的系统要求下找到。来自该文档： Windows 要求 Windows X86 和 X64 系统要求 操作系统 硬件支持的协议 Windows 2008 R2 •Intel Xeon EM64T •AMD Opteron •TCP •命名管道（LDAP 服务器连接不支持）

Windows XP Professional SP1 或更高版本 •Intel Xeon EM64T •AMD Opteron •TCP •命名管道（LDAP 服务器连接不支持）

Windows Vista •Intel Xeon EM64T •AMD Opteron •TCP •命名管道（LDAP 服务器连接不支持）

Windows 7 •Intel Xeon EM64T •AMD Opteron •TCP •命名管道（LDAP 服务器连接不支持）

Windows X86 内存要求是： • Adaptive Server 的最小 RAM – 80MB • 每个附加用户的最小 RAM，默认堆栈大小、数据包大小和用户日志缓存大小 – 156KB • 默认用户堆栈大小 – 41KB Windows X64 内存要求是： • Adaptive Server 的最小 RAM – 127MB •每个附加用户的最小 RAM，默认堆栈大小、数据包大小和用户日志缓存大小 – 83KB •默认用户堆栈大小 – 73KB 每个附加用户的最小 RAM 值取决于连接需求。有关配置内存的信息，请参阅系统管理指南。

对 X86 和 X64 使用以下任一修补程序： •Microsoft Visual C++ 2005 Service Pack 1 Redistributable Package 和 KB973544 •Microsoft Visual Studio 2005 Service Pack 1 和 KB971090 Windows 磁盘空间要求 产品 Windows X86 Windows 64 Adaptive Server 典型安装 502MB 500MB 默认安装期间创建的数据库， Adaptive Server 使用 4K 页面大小 306MB 306MB 总计

# c# - 在 C# 中嵌入 IronPython 时出现问题（缺少编译器所需的成员 'Microsoft.CSharp.RuntimeBinder.Binder.InvokeMember'

> ID：12678365
> 
> 赞同：43
> 
> 时间：2012-10-01T17:51:31.377
> 
> 标签：c#, python, .net, dynamic, ironpython

我正在尝试做一个简单的 hello world 来测试在 C# 中嵌入 IronPython，但似乎无法解决这个问题。

这是我的 C# 文件；

```
using System;
using IronPython.Hosting;
using Microsoft.Scripting;
using Microsoft.Scripting.Hosting;
using System.IO;

public class dynamic_demo
{
    static void Main()
    {
        var ipy = Python.CreateRuntime();

        dynamic test = ipy.UseFile(@"../../Test.py");

        test.Simple();
    }
} 
```

这是python类；

```
import sys

def Simple():
    print 'Hello from Python'
    print "Call Dir(): "
    print dir()
    print "Print the Path: " 
    print sys.path 
```

我的目标 .NET 框架是 4.0，我正在使用 IronPython 2.6..

当我运行这个来自一个名为“CSC”的文件时，我得到 2 个错误；错误 5 缺少编译器所需的成员

> 'Microsoft.CSharp.RuntimeBinder.Binder.InvokeMember' C:\Users\Tolga\documents\visual studio 2012\Projects\WindowsFormsApplication1\consoleTest\CSC consoleTest

另一个来自我创建的 C# 文件

> 错误 6 找不到编译动态表达式所需的一种或多种类型。您是否缺少参考？C:\Users\Tolga\documents\visual studio 2012\Projects\WindowsFormsApplication1\consoleTest\Program.cs 17 9 控制台测试

这是构建的输出

```
1>------ Build started: Project: consoleTest, Configuration: Debug Any CPU ------
1>CSC : warning CS1685: The predefined type 'System.Runtime.CompilerServices.CallSite' is defined in multiple assemblies in the global alias; using definition from 'c:\Program Files (x86)\IronPython 2.6\Microsoft.Scripting.Core.dll'
1>CSC : warning CS1685: The predefined type 'System.Runtime.CompilerServices.CallSite' is defined in multiple assemblies in the global alias; using definition from 'c:\Program Files (x86)\IronPython 2.6\Microsoft.Scripting.Core.dll'
1>CSC : warning CS1685: The predefined type 'System.Runtime.CompilerServices.CallSiteBinder' is defined in multiple assemblies in the global alias; using definition from 'c:\Program Files (x86)\IronPython 2.6\Microsoft.Scripting.Core.dll'
1>CSC : warning CS1685: The predefined type 'System.Runtime.CompilerServices.ExtensionAttribute' is defined in multiple assemblies in the global alias; using definition from 'c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\mscorlib.dll'
1>CSC : error CS0656: Missing compiler required member 'Microsoft.CSharp.RuntimeBinder.Binder.InvokeMember'
1>C:\Users\Tolga\documents\visual studio 2012\Projects\WindowsFormsApplication1\consoleTest\Program.cs(17,9,17,20): error CS1969: One or more types required to compile a dynamic expression cannot be found. Are you missing a reference?
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-10-01T17:54:48.410

您需要添加对`Microsoft.CSharp.dll`. `dynamic`这提供了在 C#中使用所需的类型。

此外，您可能需要升级到 IronPython 2.7[.3] 或更高版本，因为与旧版本和较新的 .NET 框架存在一些不兼容性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-10T18:17:33.833

如果您[包含对错误目标程序集的引用，](https://stackoverflow.com/a/11422780/1174169)您也会收到此错误。例如，如果您要针对 .Net 4.0 Full 配置文件进行构建，则必须包含以下 IronPython 程序集：

```
<install directory>\IronPython 2.7\Platforms\Net40 
```

包括`Net35`目录中的程序集也会导致丢失`RuntimeBinder`错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T09:00:42.480

对于我今天早上在一个新项目中使用 IronPython 2.7.10 时遇到的一个仍然存在的问题，这是一个非常老的问题。

现在可以改进接受的答案：我建议不要手动添加 Microsoft.CSharp.dll，而是从 nuget 添加包“Microsoft.CSharp”。可移植性将得到改善（netstandard、net framework、netcore...）。

# grails - Grails URL映射适用于控制器但不适用于视图

> ID：12678366
> 
> 赞同：0
> 
> 时间：2012-10-01T17:51:31.457
> 
> 标签：grails, model-view-controller, url-mapping, urlmappings.groovy

不知何故，我的 Grails MVC 映射让我陷入了困境，但我不明白怎么做。

我有一个控制器 AController，它是我使用 Grails 命令行向导生成的。稍后，我为该控制器生成了一个视图以自定义视图。

AController 位于 [project]/grails-app/controllers/[package]/AController.groovy 中，视图 .gsp 位于 [project]/grails-app/views/A/ 中。

URLMappings.groovy 有：

```
 "/$controller/$action?/$id?"{
        constraints {
            // apply constraints here
        }
    } 
```

当我运行应用程序并输入以下形式的 url：localhost:8080/[project]/A/list 时，正如预期的那样，我到达了 AController.groovy 中的方法 A.list。

但是，当我从 A.list 返回并期望框架路由到 [project]grails-app/views/A/ 中的 list.gsp 时，我看到一条 500 错误消息：

“URL 映射必须提供要映射到的控制器或视图名称！”

显然我在做一些愚蠢的事情，但我看不出我打破了什么。URLMappings.groovy 看起来是正确的。文件位置看起来正确。脚手架似乎是适当定制的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:40:16.477

杜哦

问题是数组没有 .count 。出于某种原因，我的大脑坚持使用 .count 而不是 .size()。愚蠢的人为错误。

# c# - 使用 Imagemagick 在 .net 4.5 WCF 服务中创建 0KB 文件将 eps 转换为 jpg

> ID：12678370
> 
> 赞同：1
> 
> 时间：2012-10-01T17:51:36.080
> 
> 标签：c#, .net, wcf, imagemagick

我们正在创建一个 REST 服务，它将返回给定维度的图像流。我们正在请求图像名称以及最终类型和最大尺寸。我们调用`ImageMagick`创建调整大小图像的过程。我们可以在 4.0 asp.net 应用程序或 3.5 WCF 服务中成功创建图像。但是，当我们尝试从 4.5 REST WCF 服务调用其中任何一个时，创建的图像`ImageMagick`是一个 0KB 的文件。我试过设置权限，但似乎没有用。我需要帮助来解决这个问题。

# mysql - 在同一循环中将一个数组附加到另 一个数组

> ID：12678372
> 
> 赞同：0
> 
> 时间：2012-10-01T17:51:44.677
> 
> 标签：mysql, arrays, merge

这是针对自定义 Wordpress 页面的，但我认为基本的数组原则应该适用。我以前没有使用过复杂的数组，所以有点迷茫，反复试验还没有奏效。

我有一个帖子数据库，每个帖子都有'shop'和'expired'的meta_key。'expired' 是一个日期（YYYY-MM-DD），用于告诉访问者帖子的内容何时过期，这个键是我正在尝试使用的。

如果帖子的“过期”日期早于今天，则会显示“优惠已过期”

如果“过期”日期在未来，则会显示“优惠将在 X 天后过期”（此脚本未在下面显示，不是必需的）

帖子按其“过期”日期（ASC）的顺序列出。问题是，当帖子过期时，我希望该帖子显示在最后而不是停留在顶部。

我目前看到的示例：

```
Post 1 | Expired 3 days ago
Post 2 | Expired 1 day ago
Post 3 | Expires in 2 days
Post 4 | Expires in 6 days 
```

以及我想看到的（注意 X 后订单）：

```
Post 3 | Expires in 2 days
Post 4 | Expires in 6 days
Post 2 | Expired 1 day ago
Post 1 | Expired 3 days ago 
```

这是我尝试合并两者的数组代码

```
$postid = get_the_ID();
$meta1 = get_post_meta($postid, 'shop', true);
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$today = date('Y-m-d', time());

$args = array(
'post_type' => 'post',
'meta_query' => array(
    array(
        'key' => 'shop',
        'value' => $meta1
    )
),
'paged' => $paged,
'posts_per_page' => '5',
'meta_key' => 'expired',
'meta_value' => $today,
'meta_compare' => '>',
'orderby' => 'meta_value',
'order' => 'ASC'
 );

$args2 = array(
'post_type' => 'post',
'meta_query' => array(
    array(
        'key' => 'shop',
        'value' => $meta1
    )
),
'meta_key' => 'expired',
'meta_value' => $today,
'meta_compare' => '<',
'orderby' => 'meta_value',
'order' => 'DESC'
);

$final = $args + $args2;
$query = new WP_Query( $final );

while ( $query->have_posts() ) : $query->the_post(); ?>
HTML FOR DISPLAYING POST
endwhile; 
```

目前它似乎没有注意到 "$args2" 并且只显示 $args

我确信我的想法是正确的，需要创建两个数组并用“+”而不是 array_merge() 加入它们，但那是我无法进一步了解的地方。

有人可以请示一下吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:16:06.980

您不能只使用 args+args2 语法将 2 个数组相加。PHP 无法知道您的意思。如果您希望结果是包含这两个数组的数组，您可以这样做：

$final = 数组($args, $args2)

否则，我不确定您希望如何组合这两个数组。如果您澄清它们需要如何组合，我们可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:46:11.180

现在，如果我正确理解了您的要求，您尝试实现的解决方案实际上是不可能的。让我解释一下为什么这无法实现。

在你的两个数组中`$args`，`$args2`大多数值都是相同的，留下两个赔率，我只选择一个来说明：

```
//it's in args    
'meta_compare' => '>'
//it's in args2
'meta_compare' => '<' 
```

现在，当您尝试使用[array_merge($args , $args2)](http://php.net/manual/en/function.array-merge.php)合并这两个时会发生什么：

```
'meta_compare' => '<' 
```

这意味着它正在从后面的数组中获取“meta_compare” `$args2`。这是文档中定义的 array_merge 函数的行为：

`If the input arrays have the same string keys, then the later value for that key will overwrite the previous one`

现在，如果您使用`+`数组联合运算符`$args+$args2`：

```
'meta_compare' => '>' 
```

这意味着它正在从`$args`这里的第一个数组中获取“meta_compare”。这是`+`文档中定义的数组联合运算符的行为：

`The keys from the first array will be preserved. If an array key exists in both arrays, then the element from the first array will be used and the matching key's element from the second array will be ignored.`

为什么会发生这种情况，因为在同一级别中，***键必须是唯一的***。因此，在您的情况下，它们处于同一级别：

```
$args = array ('key' => 'value1')
$args2= array ('key' => 'value2') 
```

因此***，此处只能存在一个***值，因为合并数组中的“键”只能指向***一个***。

如果是这种情况：

```
$args [0] = array ('key' => 'value1' ) 
$args2 [1]= array ('key' => 'value2' ) 
```

然后存储的两个值`key`都将被保留。这将是结果数组：

```
array(2) {
  [0]=>
  array(1) {
    ["key"]=>
    string(6) "value1"
  }
  [1]=>
  array(1) {
    ["key"]=>
    string(6) "value2"
  }
} 
```

虽然我不是 WP 的极客，但据我了解[WP_query](http://codex.wordpress.org/Class_Reference/WP_Query)你不能像这样传递参数（***我不确定***）。因此，只有一种方法可以实现这一目标。您可以分别传递这两个参数并将结果合并，因为结果很可能（***我不确定***）将是一个二维数组，您可以轻松地合并它们。

希望有帮助。快乐编码:)

# c++ - C++ - 优化我的 GC

> ID：12678373
> 
> 赞同：0
> 
> 时间：2012-10-01T17:51:53.580
> 
> 标签：c++, garbage-collection

这是我的垃圾收集器代码：（它发现该对象不再可达）

```
HEADER* ptr;
static int gc_checked_count;
static void** gc_checked_array;//=malloc(10000);

//This method called when the the pointer in this class is changing.
inline void Destruct() {
    //If the pointer is null or it is alright pointed from the stack then
    if ((!ptr?true:ptr->getOnStack()))
        //exit.
        return;
    //GC_THROW_USED uses this variable. - need to zero it.
    gc_checked_count=0;
    try {
        GC_THROW_USED(ptr);
        //If this function didn't threw a bool ,then run it's finalize method
        //getType is temporary as function pointer.
        ((void(*)(void*))ptr->getType())(ptr);
        //, free his information
        free(ptr->getArray());
        //, free itself
        free(ptr);
        //and zero `ptr` because it isn't valid anymore.
        ptr=0;
    }
    catch (bool x) {
        //If reachable then don't do anything to this object.
        //Keep yourself alive because life is good :).
    }
}

inline void GC_THROW_USED(HEADER* p) {
    //Check if this pointer didn't checked by this method
    for (uint i=0;i<gc_checked_count;++i)
        //, if yes then
        if (gc_checked_array[i]==p)
            //exit.
            return;
    //Append this pointer to the checked list
    gc_checked_array[gc_checked_count++]=p;
    //If this pointer is pointed on the stack then
    if (p->getOnStack())
        //throw. (it says that `ptr` is reachable.)
        throw false;
    uint count=p->getCount();
    HEADER** pArray=(HEADER**)p->getArray();
    for (uint i=0;i<count;++i)
        //Run this method on it's containers too. (Until exception or there is no object to run on)
        GC_THROW_USED(pArray[i]);
} 
```

在任何声明之前，都有一个解释它的注释。就像你看到的，这个 GC 在指针的容器上运行（谁“知道”这个指针），直到它发现一个容器在堆栈上，然后这意味着这个对象是可访问的。如果没有，则最终确定此对象并释放它。

**真正的问题：**有没有办法优化这个过程来提高性能？`//Run this method on it's containers too. (Until exception or there is no object to run on)`部分（在代码的最后几行）我可以剪切它并且它会运行而没有错误？

我有点困惑，因为这个 GC 方法刚刚出现在我的脑海中，并且没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:14:33.270

如果您的应用程序需要垃圾收集，我实际上建议使用已经原生支持它的众多语言中的一种，而不是尝试将此类功能添加到 C++。

但是，如果您需要在 C++ 中建立健全的内存管理模型，则应该通过智能指针使用 RAII。对于内存管理，这意味着使用适当的智能指针来处理所有内存分配需求。您可以通过 C++11 获得这些指针，或者如果您无法获得这些指针，则可以通过 boost。

# mysql - 匹配调查数据库和会员数据库

> ID：12678374
> 
> 赞同：1
> 
> 时间：2012-10-01T17:52:00.583
> 
> 标签：mysql, survey

我是编程新手，希望这个问题不是太基本。我在这里搜索了问题，但找不到与它完全相同的东西。

我正在制作一个网站，人们必须在其中填写登录表格，然后回答调查。调查答案将推动网站为每个用户执行的方式（在针对调查回复个性化的电子邮件中会有不同的每月提醒）。我有两个 MySQL 数据库，一个用于登录，一个用于调查。

如何使会员数据库中的会员 ID 与调查数据库中的调查 ID 相同？还是我认为这一切都错了，还有另一种解决方案？

我对 PHP 和 JavaScript 最熟悉，所以我希望如果不是在数据库设计中，也有办法在编码中做到这一点。再次抱歉，如果这太基本了，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:57:47.307

这是一个非常笼统的问题，但我希望我能帮助你一点：

现在，假设您有充分的理由将用户注册和调查在两个不同的数据库中分开（您没有给出这样做的理由），在成功的用户注册后，您可以假设用户已“登录” . 这应该意味着您可以在代码中使用注册用户的 ID。

您不必拥有相同的调查 ID 和用户 ID，通常更有意义的是有一个单独的表格将用户和调查结合在一起（带有一个`user_id`字段和一个`survey_id`字段）。

设置或保存调查后，在此表中存储一条记录，将用户与调查联系起来。

如果您希望得到更具体的答案，我建议您在问题中深入研究一些细节。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:19:48.493

只是一些提示，他们不会动摇房子，但可能是一个好的开始：

*   将两个表放在同一个数据库中。这不是技术要求，但对您来说更容易。这两个表属于一起，将它们保存在同一个数据库中。
*   有两张桌子没关系。
*   成员 ID 和调查 ID 不必相同。而是将一`memberID`列添加到*调查*表并将其设置为`ID`成员*表*的适当位置。

# xml - XML 属性别名

> ID：12678377
> 
> 赞同：1
> 
> 时间：2012-10-01T17:52:07.043
> 
> 标签：xml, xsd, schema

有没有办法为元素属性声明别名？例如，我有一个`<Item>`具有两个布尔属性`fooAttribute`和的元素`barAttribute`，具有别名`foo`，`bar`因此以下任何一项都是有效的：

```
<Item foo="true" bar="false" />
<Item foo="true" barAttribute="false" />
<Item fooAttribute="true" bar="false" />
<Item fooAttribute="true" barAttribute="false" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:10:57.860

简短的答案不在 XSD 1.0 中。如果需要，您可以将 XSD 1.0 与另一种模式语言（RelaxNG 或 Schematron）结合起来。

在 XSD 1.1 中，您可以定义属性的两种变体，指向相同的简单类型以进行某种重用，然后定义断言以使它们互斥。

# sql-server - 在sql的标识列中存储等效的十六进制

> ID：12678380
> 
> 赞同：1
> 
> 时间：2012-10-01T17:52:20.113
> 
> 标签：sql-server, sql-server-2008, tsql, hex, sql-server-2012

正如标题所说，如果我有一个表有这样的结构

```
create table myTable
(
ID int identity(1,1) not null,
col1 varchar(20) not null,
col2 varchar(20) not null
constraint pk_myTable primary key (ID)
) 
```

如果我在此表中插入一些值，它将自动在 col 中取值`ID`。我想知道一种方法可以让 SQL Server 在列中存储等效的十六进制。比如说，对于 1，它应该存储`0x01` `2 as 0x02`...`10 as 0xA`等等？

我不想知道任何技巧或什么，我知道我可以创建这个 col `varchar`，然后为插入创建一个过程，或者为插入创建一个触发器，这将进行所需的转换并产生所需的结果，那*不是*一个大问题。

但我想知道是否有一个内置函数/程序/触发器可以帮助我实现我想要实现的目标？不一定在 SQL Server 2008 中，但可能在 2012 年，是否存在这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:05:14.663

我同意上面的 Joe Stefanelli 和 Habo 的观点，你不需要这样做。也就是说，该技术在其他情况下很有用。

像这样定义你的表（注意计算列）

```
CREATE TABLE mytable( 
ID int identity(1,1) not null, 
col1 varchar(20) not null, 
col2 varchar(20) not null,
ComputedHexColumn AS CONVERT(VARBINARY(8), ID),
CONSTRAINT pk_myTable PRIMARY KEY CLUSTERED(ID) 
) 
```

然后填充它

```
INSERT INTO mytable(col1,col2) 
SELECT 'col1 - 1','col2 - 1'
UNION SELECT 'col1 - 2','col2 - 2'
UNION SELECT 'col1 - 3','col2 - 3'
UNION SELECT 'col1 - 4','col2 - 4' 
```

那么无论何时您从表中选择它都会包含十六进制值

```
SELECT * FROM mytable 
```

![显示带有计算列的完整结果的图像](../Images/9cfa8e00f98beba3f577500cf8395f47.png)

如果计算值的计算成本要高得多，则可以将该列标记为 PERSISTED。然后数据库将物理存储该值并在适当时对其进行更新。

# c# - 在 web.config 中设置 machineKey 未按预期运行

> ID：12678381
> 
> 赞同：0
> 
> 时间：2012-10-01T17:52:42.047
> 
> 标签：c#, asp.net, web-config

我有一个问题（或者至少我认为我有）。我正在尝试在其 web.config 中设置站点的机器密钥，以便为将来在站点之间共享表单身份验证数据做准备。我首先在 web.config 中设置以下内容：

```
 <machineKey validationKey="<SOME_VALUE>" decryptionKey="<SOME_VALUE>" validation="SHA1" decryption="AES"/> 
```

作为测试，我编写了以下代码来测试 web.config 中的新 machineKey 元素：

```
var machineConfigMachineKey = (MachineKeySection)WebConfigurationManager.OpenMachineConfiguration().SectionGroups["system.web"].Sections["machineKey"];
var webConfigMachineKey = (MachineKeySection)WebConfigurationManager.OpenWebConfiguration("").SectionGroups["system.web"].Sections["machineKey"];
Response.Write("<pre>");
Response.Write("<b>machine.config decrypt:  </b>" + machineConfigMachineKey.DecryptionKey + "<br />");
Response.Write("<b>web.config decrypt:      </b>" + webConfigMachineKey.DecryptionKey + "<br />");
Response.Write("<br />");
Response.Write("<b>machine.config validate: </b>" + machineConfigMachineKey.ValidationKey + "<br />");
Response.Write("<b>web.config validate:     </b>" + webConfigMachineKey.ValidationKey + "<br />");
Response.Write("</pre>");
Response.End(); 
```

...导致此显示：

```
machine.config decrypt:  AutoGenerate,IsolateApps
web.config decrypt:      AutoGenerate,IsolateApps

machine.config validate: AutoGenerate,IsolateApps
web.config validate:     AutoGenerate,IsolateApps 
```

显然，我对此感到非常困惑，因为我希望在 web.config 中看到来自新 machineKey 元素的自定义值，而不是“AutoGenerate，IsolateApps”。

我是否在这里遗漏了一些对我来说应该非常明显的东西？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:02:18.993

请改用静态 API `WebConfigurationManager.GetSection("system.web/machineKey")`。它自动执行遍历配置层次结构的逻辑，找到最适用的一个（通常是 ~/Web.config 用于当前应用程序），并提取其特定值。

# jsf - 在将文件上传到服务器之前获取上传文件的绝对路径

> ID：12678383
> 
> 赞同：0
> 
> 时间：2012-10-01T17:52:42.157
> 
> 标签：jsf, primefaces

我试图获取上传文件的绝对路径，但我没有找到解决方案：我知道我无法获取上传文件的绝对客户端路径。浏览器的限制，因为这被认为是安全风险。所以如果我使用 p:uploadeFile 简单模式：[http://www.primefaces.org/showcase-labs/ui/fileUploadSimple.jsf][1]

这将是一个 inputText 字段，其中包含所选项目的绝对路径，因此我可以在单击提交按钮之前在我的托管 bean 中检索它（我的意思是将文件上传到服务器文件到服务器）

```
<p:fileUpload value="#{fileUploadController.file}" mode="simple"/>
 <p:commandButton value="Submit" ajax="false" 
   actionListener="#{fileUploadController.upload}"/> 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:56:52.403

你不能。一些带有安全漏洞的旧浏览器可能会在 JavaScript 中为您提供完整路径，但所有现代浏览器都只会返回基本文件名，而其他浏览器甚至会在 IE 和 Webkit 浏览器中[`HtmlInputElement#value`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)为其添加假路径。[`c:\fakepath`](http://davidwalsh.name/fakepath)

无论如何，您不应该对这些信息感兴趣。这与任何处理上传文件的自尊业务逻辑完全无关。无论您想用这个解决什么功能要求，都必须以不同的方式解决。

# java - 如何对依赖于 Channel API（Google App Engine、Java）的代码进行单元测试

> ID：12678384
> 
> 赞同：3
> 
> 时间：2012-10-01T17:52:50.330
> 
> 标签：java, unit-testing, google-app-engine, channel-api

我有依赖于 Google App Engine 的 Channel API 的 Java servlet。我正在尝试为该代码编写单元测试，但我对如何编写存根客户端以接收来自 servlet 的响应消息感到非常困惑，而不是我总是不得不依赖使用实际网页作为我的测试客户端。我的 servlet 非常简单：

```
ChannelService channelService = ChannelServiceFactory.getChannelService();
channelService.sendMessage(new ChannelMessage(someKey, "ECHO: " + someMsg)); 
```

通常，我在我的测试客户端（一个网页）中阅读此内容。但是，我想编写可以使用 jUnit 或 TestNG 等框架进行测试的单元测试。在阅读了 Google[关于对其 Java 服务进行单元测试的页面](https://developers.google.com/appengine/docs/java/tools/localunittesting)后，我尝试了一些方法，例如在我的测试类中使用[LocalServiceTestHelper对象并使用](https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalServiceTestHelper)[LocalChannelServiceTestConfig](https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalChannelServiceTestConfig)对象对其进行配置。这样做的结果是我的测试类可以创建 的实例`LocalChannelService`，该类似乎实现与 相同的方法`ChannelService`。

**然而：**

*   两个类之间没有任何稳健的关系（不实现类似的接口，不在同一个类层次结构中......）。使我无法将 LocalChannelService 对象作为模拟对象注入到我的 servlet 中。
*   LocalChannelService API 上没有任何文档（非常感谢，Google）。
*   他们的本地单元测试页面上也没有关于如何测试 Channel API 的文档（再次感谢 Google）

所以后来我看到了这篇关于如何在 Java 代码中进行测试的[文章。](https://stackoverflow.com/questions/11172174/how-can-i-unit-test-the-appengine-channel-service)`ChannelService`不幸的是，给出的唯一相关答案是*Python*。好吧，你瞧，谷歌确实为 Python GAE 服务器开发人员提供了为谷歌服务编写存根客户端的工具，正如他们的[Python 本地单元测试指南](https://developers.google.com/appengine/docs/python/tools/localunittesting?hl=en)中所述。令人难以置信的是，他们竟然忽略了为 Java 做同样的事情！

* * *

既然我已经摆脱了所有这些（如果我听起来有点慌张，请道歉），我真的很想知道，依赖 Google App Engine 的 Channel API 测试 Java 代码的最佳方法是什么？我真的希望依靠测试工具而不是网页。我是否必须以某种方式从 Java 调用 Google 的[Javascript Client for Channel API](https://developers.google.com/appengine/docs/java/channel/javascript)？必须有更好的方法来使用模拟对象或存根。

* * *

### 更新 1

使用了更好的名称，“Google App Engine”而不是“App Engine”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T20:22:23.177

您可以从 LocalServiceTestHelper 获取 LocalChannelService，将假客户端连接到它，然后从中获取消息：

```
 LocalChannelService svc = (LocalChannelService) LocalServiceTestHelper.getLocalService("channel");
    ChannelManager channelManager = svc.getChannelManager();
    String connectionId = channelManager.connectClient(token);

    // send a message

    String message = channelManager.getNextClientMessage(token, connectionId);
    assertEquals("123", message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:37:26.407

这些只是我对 Channel API 进行单元测试的想法：

1.  你不需要模拟。只需使用实际的 API。只是假装它有效。即使您的消息发送失败，它也不会返回任何失败，因此无论如何您都无法测试。

2.  有备份。我认为您不能依赖 Channel API。消息无法显示。我个人认为您需要一个备份，例如一个响应性不如 Channel API 的轮询 API，但至少可以工作。

3.  对您的备份 API 进行单元测试。

4.  使用 Selenium 在浏览器中测试 Channel API。

# cordova - PhoneGap 项目中的 Azure ACS

> ID：12678388
> 
> 赞同：1
> 
> 时间：2012-10-01T17:53:06.187
> 
> 标签：cordova, acs, azure-appfabric, azure-acs

虽然这是我第一次在这里转发问题，但我偶尔会在这里找到我的问题的答案，所以首先，谢谢！

有人尝试在 PhoneGap 项目中植入 Azure ACS 吗？

我有一个工作的移动 Web 应用程序（基于 MVC + JQM 的前端），我想将其转换为 PhoneGap 项目，以便拥有一个“本机客户端”应用程序。

基于 ACS 和表单身份验证成员身份的应用程序用户管理。

我想知道如何使用 STS 令牌？我的第一个想法是编写一个 WCF 服务，客户端（移动设备）将在成功时（通过领域参数）访问该服务。该服务将验证令牌并将应用程序重定向到授权区域。

我错过了什么吗？有没有更好更快的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:28:15.813

我没有使用过PhoneGap，但它与普通网站应该没有什么不同。您将打开应用程序，您将被重定向到 STS (ACS)，然后您将被重定向到身份提供者，获取令牌，最后它将被发布到应用程序（网站）

由于 PhoneGap 托管了一个 Web 浏览器，所有令牌协商等都由它自动处理。

# ruby-on-rails - Rails - 如何在保存后刷新关联

> ID：12678389
> 
> 赞同：28
> 
> 时间：2012-10-01T17:53:07.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个包含项目列表的类别。项目有一个位置，类别有一个关系 has_many :items, :order => "position"。当用户更新位置值时，我想查看它的位置。我的位置是一个浮点数，允许在四舍五入的数字之间移动。

```
pos=item.category.items.map(&:id)
current_position=pos.index(id.to_i)
item.save # want to refresh the relationship here
pos_new=item.categoty.items.map(&:id)
# grabbing this since just accessing item isn't updated if positioning has changed
item_new=Item.find(id)
pos_new=item_new.category.items.map(&:id)
new_position=pos_new.index(id)
if current_position!=new_position
  is_moved=true # sent back in JSON to propagate a dynamic change.
end 
```

上面的工作，但它似乎真的很冗长。有没有办法让我告诉项目保存需要刷新类别关系，因为订单可以更改？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-08-08T21:37:23.530

对于单项关联：

```
book.reload_author 
```

对于其他协会：

```
author.books.reload 
```

[http://guides.rubyonrails.org/association_basics.html#controlling-caching](http://guides.rubyonrails.org/association_basics.html#controlling-caching)

* * *

*在 Rails 5 之前的旧版本 Rails 中，您可以将`true`关联方法作为第一个参数传递给它以使其重新加载：`author.books(true)`.*

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-01T17:55:38.180

您可以使用`item.reload`它将从数据库中重新获取模型，并且下次调用关联时，它将重新获取它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-06T18:58:03.333

Rails 4 会在关联对象更改时为您更新 has_many/belongs_to，但它不会重新运行查询，这意味着即使 category.items 中的项目将被更新，它们也不会按顺序排列。根据表的大小，您可能希望使用 ruby​​ 对结果进行排序或使用 category.reload 将它们按顺序排列。

[请参阅http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)上的 RailsGuides并查找 inverse_of

# javascript - wordpress 网站的光标编码

> ID：12678392
> 
> 赞同：0
> 
> 时间：2012-10-01T17:53:18.570
> 
> 标签：javascript, jquery, wordpress, cursor

我有以下代码，我想在我的 Wordpress 网站中实现，以便拥有自定义的鼠标指针。

我将在哪里插入此代码？进入 index.php 文件本身？还是放到单独的文本文件中？

谢谢

```
$(document).ready(function() { 

    $(document).mousemove(function(e) {

            //create img elements having pointer.png in their src 
            pointer = $('<img>').attr({'src':'pointer.png'});

            //and append them to document
            $(document.body).append(pointer); 

            //show them at mouse position & fade out slowly
            pointer.css({
                    'position':'absolute',
                    top: e.pageY +2 ,    //offsets
                    left: e.pageX +2   //offsets
                }).fadeOut(1500);   
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:55:38.767

CSS中有一个`cursor`规则。如果您可以在某处修改全局 CSS，只需`cursor: url(/path/to/cursor.png);`添加`html`或`body`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:56:19.517

通常，您会将其放在`<head><script>HERE</script></head>`您希望它所在的页面上。不过，请确保您首先导入了 jquery。

# html - 按钮元素中的多行样式文本

> ID：12678399
> 
> 赞同：0
> 
> 时间：2012-10-01T17:53:53.230
> 
> 标签：html, css, internet-explorer, firefox, button

我试图在网页上放置 2 个按钮，一个浮动到左侧，另一个浮动到右侧。两个命令按钮中都有多行样式的文本。下面是我最近的尝试。它似乎在 Firefox 中有效，但在 IE 8 中甚至没有关闭。有什么想法可以让它在两种环境中工作吗？谢谢。

**CSS：**

```
body {
    background-color: green;
}

.idxQuestion {
    font-size: 36;
    text-align: center;
}

.idxButtons {
    margin-top:60px;
    margin-left: auto;
    margin-right:auto;
    width:350px;
}

.buttonchoice1,.buttonchoice2
           {
    text-align: center;
    background:white;
    padding: 5px;
}

.buttonchoice1 {
    float:left; 
    border:5px solid red;
}

.buttonchoice2 {
    float:right;
    border:5px solid blue;
}   

.spanchoice1 {
    font-size: 30px;             
}

.spanchoice2 {
    font-size: 10px;             
} 
```

**HTML：**

```
<div class="idxQuestion">
    <h1>Big Question?</h1>
</div>
<div class="idxButtons">
    <h:button class="buttonchoice1" onclick="option1?faces-redirect=true" >
        <h:outputText escape=false>
            <span class="spanchoice1">No</span><br />  
            <span class="spanchoice2">additional info 1</span> 
        </h:outputText>
    </h:button> 

    <h:button class="buttonchoice2" onclick="option2?faces-redirect=true" >
        <h:outputText>
            <span class="spanchoice1">Yes</span><br />  
            <span class="spanchoice2">additional info 2</span> 
        </h:outputText>
    </h:button> 

</div> 
```

小提琴：http: [//jsfiddle.net/MF23L/](http://jsfiddle.net/MF23L/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:00:23.830

用这段代码替换您的代码：

```
<div class="idxButtons">
    <button class="buttonchoice1" onclick="option1?faces-redirect=true">
        <outputText escape=false>
           <span class="spanchoice1">No</span><br />  
           <span class="spanchoice2">additional info 1</span> 
        </outputText>
     </button>
    <button class="buttonchoice2" onclick="option2?faces-redirect=true">
        <outputText>
           <span class="spanchoice1">Yes</span><br />  
           <span class="spanchoice2">additional info 2</span> 
        </outputText>
     </button>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:59:38.173

IE 无法识别您的 h:button 标签，您已将“buttonchoice1”类应用到该标签上，并且是您布局的基础。如果您要用 div 包装那些“h:button”（例如），并将类从 h:button 移动到新的包含 div，它应该可以工作。像这样：

```
<div class="idxButtons">
    <div class="buttonchoice1">
        <h:button onclick="option1?faces-redirect=true" >
        <h:outputText escape=false>
        <span class="spanchoice1">No</span><br />  
        <span class="spanchoice2">additional info 1</span> 
        </h:outputText>
        </h:button> 
    </div>
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:00:37.170

为什么不制作图像并使用`<input type="image" alt="No, additional info 1" src="..." />`它看起来一样？我不认为`button`应该是花哨的。

# c# - 动态获取命令行输出

> ID：12678407
> 
> 赞同：16
> 
> 时间：2012-10-01T17:54:27.147
> 
> 标签：c#, command-line

我正在使用 c# 中的命令行运行一个程序，该程序在运行时会产生一些日志，只要它发生变化就需要显示这些日志。我编写了以下代码，但是一旦进程被杀死并且在运行期间我的程序没有响应，它就会显示所有日志。我该如何解决？

问候

```
ProcessStartInfo procStartInfo = new System.Diagnostics.ProcessStartInfo("cmd", "/c " + "C:\\server.py");
Process proc = new Process();
procStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
procStartInfo.UseShellExecute = false;
procStartInfo.RedirectStandardOutput = true;
//procStartInfo.CreateNoWindow = true;
proc.StartInfo = procStartInfo;
proc.Start();
string output = proc.StandardOutput.ReadToEnd();
proc.WaitForExit(300);
LogstextBox.Text = output; 
```

**编辑：** 好吧，我尝试使用`OutputDataReceived`但没有显示任何结果，这是更改后的代码：

```
{
            //processCaller.FileName = @"ping";
            //processCaller.Arguments = "4.2.2.4 -t"; this is working
            processCaller.FileName = @"cmd.exe";
            processCaller.Arguments = "/c c:\\server.py"; //this is not working
            processCaller.StdErrReceived += new DataReceivedHandler(writeStreamInfo);
            processCaller.StdOutReceived += new DataReceivedHandler(writeStreamInfo);
            processCaller.Completed += new EventHandler(processCompletedOrCanceled);
            processCaller.Cancelled += new EventHandler(processCompletedOrCanceled);
            this.richTextBox1.Text = "Server Started.." + Environment.NewLine;
            processCaller.Start();
    }

    private void writeStreamInfo(object sender, DataReceivedEventArgs e)
    {
        this.richTextBox1.AppendText(e.Text + Environment.NewLine);
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T17:56:28.383

这就是问题：

```
string output = proc.StandardOutput.ReadToEnd(); 
```

在进程终止之前，您不会到达标准输出的“结尾”。

您应该一次阅读一行 - 或者可能只是订阅该[`OutputDataReceived`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件（并遵循该事件记录的其他要求）。

编辑：这是适用于我的示例代码：

```
using System;
using System.Diagnostics;
using System.Threading;

class Program
{
    public static void Main()
    {
        ProcessStartInfo startInfo = new ProcessStartInfo("cmd", "/c " + "type Test.cs")
        {
            WindowStyle = ProcessWindowStyle.Hidden,
            UseShellExecute = false,
            RedirectStandardOutput = true,
            CreateNoWindow = true
        };

        Process process = Process.Start(startInfo);
        process.OutputDataReceived += (sender, e) => Console.WriteLine(e.Data);
        process.BeginOutputReadLine();
        process.WaitForExit();
        // We may not have received all the events yet!
        Thread.Sleep(5000);
    }
} 
```

请注意，在您的示例代码中，您正在`OutputDataReceived`调用处理程序的任何线程上访问 UI - 这对我来说似乎是个坏主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T18:00:31.310

您可以使用[Process.BeginOutputReadLine 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)。该链接显示了一个完整的 C# 工作示例，它使用`OutputDataReceived event`. 该代码示例应该做你想做的事。

# c++ - 朋友声明阻止外部函数访问类的私有部分

> ID：12678414
> 
> 赞同：0
> 
> 时间：2012-10-01T17:55:02.840
> 
> 标签：c++, namespaces, friend

我正在尝试从特定类强制调用函数。例如，下面的代码演示了我的问题。我想让“使用”函数只能从 A 类调用。我在整个项目中使用全局命名空间。

*啊*

```
#include "b.h"
namespace GLOBAL{

class A{
public:
    void doSomething(B);
}
} 
```

*a.cpp*

```
#include "a.h"
using namespace GLOBAL;

void A::doSomething(B b){

    b.use();
} 
```

*bh*

```
namespace GLOBAL{

class B{
public:
    friend void GLOBAL::A::doSomething(B);
private:
    void use();
} 
```

编译器说：

```
‘GLOBAL::A’ has not been declared

‘void GLOBAL::B::use()’ is private 
```

任何人都可以在这里帮忙吗？

非常感谢，

麦克风。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:01:22.160

这是因为在朋友声明中，您指的是班级成员。

为此，编译器必须已经看到 A 的完整定义。

### 啊

```
// #include "b.h"   // remove this line it is not needed.
namespace GLOBAL{

class B; // Forward declare the class here.

class A{
public:
    void doSomething(B&); // Note: This should probably be a reference.
                          // Change to doSomething(B&); 
}
} 
```

### bh

```
// Add this line it is needed for the friend declaration.
// To have a member as a friend we need the definition of 'A'
#include "a.h"

namespace GLOBAL{

class B{
public:
    friend void GLOBAL::A::doSomething(B&);
private:
    void use();
} 
```

### a.cpp

```
#include "a.h"
// Add this line to include the B definition so you know how to call use()
#include "b.h"
using namespace GLOBAL;

void A::doSomething(B& b){ // b should be a reference otherwise you are copying it.

    b.use();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:14:29.240

以下从 cpp 文件编译得很好：

```
namespace GLOBAL
{
    class B;

    class A
    {
    public:
        void doSomething(B& b);
    };
};

namespace GLOBAL
{
    class B
    {
    public:
        friend void GLOBAL::A::doSomething(B&);
    private:
        void use()
        {
        }
    };
};

void GLOBAL::A::doSomething(B& b)
{
    b.use();
} 
```

尽我所能告诉您的问题源于您在定义 A 类之前定义 B 类的“ah”中包含“bh”，但 B 类引用了 A 类。所以你有问题。但是，您不能转发声明 B 类型的对象，因为您正在通过堆栈进行复制。因此，为什么我使用对 B 类的引用（因为这不需要事先知道 B 对象）。

基本上，您的结构存在一些需要解决的基本问题。你需要阅读[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)和[循环依赖](http://en.wikipedia.org/wiki/Circular_dependency)

**编辑**：纯粹指定类 A 是 B 的朋友（而不是 A 中引用 B 的特定函数）实际上是一种可能性，因为朋友定义提供了一种前向声明。因此，以下代码编译：

```
namespace GLOBAL
{
    class B
    {
    public:
        friend class A;
    private:
        void use()
        {
        }
    };
};

namespace GLOBAL
{
    class A
    {
    public:
        void doSomething(B b);
    };
};

void GLOBAL::A::doSomething(B b)
{
    b.use();
} 
```

因此，在您最初发布的代码中，将朋友声明更改为

```
friend class A; 
```

应该允许您的代码编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:59:55.023

在第一个指令之后移动`#include "b.h"`from 。编译器在编译声明适用的函数之前不需要查看友元声明。`a.h``a.cpp``#include`

# php - 将“文本字段”中的字符串传递给代码中的另一部分

> ID：12678416
> 
> 赞同：0
> 
> 时间：2012-10-01T17:55:15.007
> 
> 标签：php, extjs, openlayers, postgis

我有一个关于将字符串从 Ext.formPanel 文本字段传递到代码的另一部分的问题。问题是我在 formPanel 中有两个“文本字段”，我希望在其中输入的单词作为代码中“url”的一部分。可能你会问，这家伙为什么要那个？这是因为我使用的“url”有一个 PHP 脚本，它生成存储在 postgis db 表中的特性作为 GeoJSON。

这是代码：

```
[CODE]
// define the data source
   var protocol = new OpenLayers.Protocol.HTTP({
   url: "http://localhost/postgis_geojson.php?geotable=boreholes_point_wgs84&geomfield=geom&parameters=" + "column" + ilike '%"string"%',
   format: new OpenLayers.Format.GeoJSON({
        ignoreExtraDims: true,
        'internalProjection': new OpenLayers.Projection("EPSG:900913"),
        'externalProjection': new OpenLayers.Projection("EPSG:4326")
    })
});

formPanel = new GeoExt.form.FormPanel({
    title: "Place Name Search",
    height: 150,
    region: "north",
    protocol: protocol,
    items: [{
        xtype: "textfield",
        id: "column",
        emptyText: "Choose table column",
        fieldLabel: "Choose table column",
        width: 200,
        allowBlank: false
    }, {
        xtype: "textfield",
        id: "string",
        emptyText: "Search inside table",
        fieldLabel: "Enter a word to search",
        width: 200,
        allowBlank: false
    }],
    listeners: {
        actioncomplete: function(form, action) {
            features = action.response.features;
            store.loadData(features);
            vm=map.getLayersByName("Results");
            if(vm.length===0){
                vecLayer = new OpenLayers.Layer.Vector("Results");
                map.addLayer(vecLayer);
                store.bind(vecLayer);
                select.bind(vecLayer);
            }
        }
    },
 buttons: [{text: 'search',
        handler: function(){
            formPanel.search();
        }
    }],
    keys: [{ key: [Ext.EventObject.ENTER],
        handler: function() {
            formPanel.search();
        }
    }]
});
[/CODE] 
```

这些是我已经测试过的案例：

1.  url: `http://localhost/postgis_geojson.php?geotable=boreholes_point_wgs84&geomfield=geom`: 这会将整个表“boreholes_point_wgs84”生成为 GeoJSON。
2.  url: `http://localhost/postgis_geojson.php?geotable=boreholes_point_wgs84&geomfield=geom&parameters=station ilike '%llena%'`: 这只会生成一个特征，即“站”列中具有“llena”的特征。因此，通过这种方式我可以通过搜索表单找到该功能。

我在想的是，如果我可以传递我在“textfield”中输入的这两个字符串，并以它可以捕获这两个单词和形式的方式修改“url”，例如，我放在上面的第二种情况。我在玩这个：

url: `http://localhost/postgis_geojson.php?geotable=boreholes_point_wgs84&geomfield=geom&parameters=" + "column" + ilike '%"string"%'`，因此使用我在每个 xtype 下方指定的“id”，但它不起作用。

感谢您对此的任何支持，在此先感谢，

此致，

格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:03:39.600

正确的方法是简单的表单提交。文本输入值将在表单发布中发送到服务器。服务器端应该解析提交的值并做必要的事情。这与使用纯 HTML 和任何服务器端框架没有什么不同。

或者，您可以强制您的表单使用 HTTP GET 方法而不是 POST 提交，然后您的输入值将成为您的 URL 的一部分。在 ExtJS 中，您使用“方法”配置。请参阅 API 文档：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-method](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-method)

**编辑**：如果您对实际“提交”表单根本不感兴趣，您可以像这样获取字段值：form.findField('myField').value

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:37:47.263

我很确定[这个解决方案](https://stackoverflow.com/questions/14664759/how-can-i-overwrite-the-url-of-openlayers-protocol-http)将有助于理解如何解决这个问题，我自己解决了。

# javascript - 传递编码点导致未终止的字符串文字错误

> ID：12678419
> 
> 赞同：0
> 
> 时间：2012-10-01T17:55:31.577
> 
> 标签：javascript, google-maps-api-2

我在地图上有很多多边形的性能问题，经过一番研究，我发现了谷歌编码算法的这个 PHP 实现：

[http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/PolylineEncoder.php.txt](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/PolylineEncoder.php.txt)

我在我的长/纬度坐标（一个字符串）数据库上运行了脚本，并为每个具有编码值的多边形创建了一个新列。

然后我编写了一个脚本来输出 JavaScript 以根据 API 创建覆盖。

```
var tr_27019090602 = new GPolyline.fromEncoded({
  color: "#0000ff",
  weight: 4,
  opacity: 0.8,
  points: '}w~pGrm~yPU|JCfATKrAy@fAy@|BaBt@i@n@e@rCyBDCl@[TMpAc@NG`BW~@?r@?`CAvHTrHPbA@dDF`@?jA@hCB|DBxDBz@?B}DFiGBcE@w@@wCPqCT_AZu@f@s@X_@Xg@|AgA~DwCzC_Cx@a@RKt@S~@I@?Di@Fq@Gg@HS@q@q@oEa@{@[Um@sAc@o@Yc@_@MQIo@Bm@SOc@@QBWVy@XSFUKc@Ui@E_@AMF[Vg@Rm@Bw@EsA]iBMmAMu@EWDMRIVUT{@Bu@Km@ESc@iASQq@MqA_Bi@iAYo@IWe@sAk@D@DECgBN_CaCm@eC[oAFgOK}IlBkB_@BWNa@d@EJCHG@A@Yc@Ii@AiBC_ADu@Ng@TYRONWHc@HYi@RQFU?k@HSVq@Rw@?EaG?wC?u@?i@?{CAcJA[?yA?u@?_C?aEAkA?cC?I?E?q@?oA?s@?C?cEAs@?yC?wB?qAAU?u@?aB?G?@rA@pB?BBrF?P?D?x@VhAFZZvA@h@?n@?t@@dC?hF?@NhrA?F@NPrF?vL?hJ??lA?dK?jCEvA?DG`C',
  zoomFactor: 2, 
  numLevels: 18
}); 
```

我收到“未终止的字符串文字”错误，可能是因为编码字符串中的字符。我试图逃离他们，但无济于事。我也试过双花括号。

我该怎么做才能将这些在 JavaScript 中正确传递给 API？

# jquery - IE10 上的 jQuery UI 自动完成组合框菜单位置略微（不正确）

> ID：12678421
> 
> 赞同：0
> 
> 时间：2012-10-01T17:55:37.347
> 
> 标签：jquery, jquery-ui, combobox, position, jquery-ui-autocomplete

![第一](../Images/418af9ecd44abfbb0876c13836bab472.png "第一次点击")![第二](../Images/bee45bb282df091cba7a15bc80175356.png "第二次点击") ![第三](../Images/6002e268acc2dee3e65bc6b2f33a7188.png "第三次点击")

[**演示**](http://jsfiddle.net/jabavox/GVxQR/embedded/result/)

从[这个](https://stackoverflow.com/a/6299156/818544)帖子。这是我找到的最好的答案（除了你变得更好！？请告诉我），一切似乎都很好！（在 ie9、ff、chrome 上）直到我遇到这个问题（在 ie10 上），每次点击下拉按钮使建议菜单中的位置加倍！？这种奇怪的行为在使用大型数据源时会立即发生。任何想法？请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:23:16.323

我认为您需要检查`padding/margins`并最好使用 reset_css [http://yuilibrary.com/yui/docs/cssreset/重置所有这些值](http://yuilibrary.com/yui/docs/cssreset/)

# java - 您可以使用字体作为参数吗？

> ID：12678424
> 
> 赞同：-9
> 
> 时间：2012-10-01T17:55:49.313
> 
> 标签：java, function, methods, parameters, fonts

好的，这是一个非常快速的问答问题：如果我在 Java 小程序中声明了一种字体，我可以将它作为参数发送到不同的方法吗？

例子：

```
methodName(String str, Font font) 
```

我可以这样做吗？^^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:57:46.600

任何扩展`Object`或原始类型的东西都可以作为参数发送。这包括`Font`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:05:39.563

丹说得对，也很有礼貌。你可以将任何东西传递给函数。这包括：原语（int、double、char 等）、对象（Font、String、Scanner 等）和用户定义的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:57:13.197

是的，任何对象都可以作为参数传递给适当的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:57:31.967

答案是肯定的，您在发布问题之前没有尝试过吗？

# asp.net-mvc-3 - 如何使用 MVC4 提供的新成员实现旧的 asp.net 成员方法

> ID：12678426
> 
> 赞同：0
> 
> 时间：2012-10-01T17:55:53.090
> 
> 标签：asp.net-mvc-3, asp.net-membership, membership-provider

我对 asp.net (mvc) 很陌生，我正在尝试构建一个示例 admin mvc4 应用程序，我可以在其中获取具有新成员资格架构的用户列表。

我对新成员感到非常困惑，似乎如果我想使用开箱即用的 SimpleMembershipProvider 我不能使用旧 asp.net 成员的内置方法，我必须实现所有方法我一个人，特别是如果我想使用 EF（对吗？）

这是我试图通过新提供者实现的示例代码（与旧提供者一起工作）

### 控制器

```
public class MemberController : Controller
{
    public ActionResult Index()
    {
        var users = Membership.GetAllUsers();
        return View(users);
    }

} 
```

### 看法

```
<ul>
    @foreach (var item in Model)
    {
        <li>@Html.DisplayFor(model => model[item.ToString()].UserName)</li>
    }
</ul> 
```

如果有人能以正确的方式为我提供步骤、指南或来源，我会非常高兴（我是否必须创建自己的自定义会员提供程序？）。我知道这是非常基本的东西，但它可以帮助我理解。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:26:36.470

正如它所说，SimpleMembership 是一种更简单的 Membership 形式，因此它没有实现基本 MembershipProvider 类中的许多方法。GetAllUsers 是它没有实现的那些之一。

但是，仅查询用户表并获取用户列表相对简单。而且效率更高。

这并不意味着您不能使用 Membership 类中的任何方法，但有些方法没有实现。这是您为更简单的会员模式付出的代价。

您可以随时返回旧会员资格。只需禁用 SimpleMembership 初始化，SimpleMembership 就会传递给旧的 SqlMembership 提供程序。

# c# - 需要获取系统保留分区的名称（DeviceID）

> ID：12678435
> 
> 赞同：1
> 
> 时间：2012-10-01T17:56:42.873
> 
> 标签：c#, wmi, drive, disk-partitioning

我需要返回系统保留分区的设备 ID。我应该能够通过首先获取 Label 属性来使用 Win32_Volume 类执行此操作，如果它与“系统保留”匹配，则获取 DeviceID 属性。以下代码因空引用异常而崩溃：

```
static void Main(string[] args)
{
    ManagementObjectSearcher ms = new ManagementObjectSearcher("Select * From Win32_Volume");
    foreach (ManagementObject mo in ms.Get())
    {
        if (mo["Label"].ToString() == "System Reserved")
        {
            Console.WriteLine(mo["DeviceID"].ToString());
        }
    }
    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:47:47.127

这里适用于任何需要这样做的人：

```
string sysGuid = "";
        try
        {
            ManagementObjectSearcher ms = new ManagementObjectSearcher("SELECT * FROM Win32_Volume");
            foreach (ManagementObject mo in ms.Get())
            {
                if (mo["Label"].ToString() == "System Reserved")
                {
                    sysGuid = mo["DeviceID"].ToString();
                    break;
                }
            }
        }
        catch (Exception) {} 
```

# sql-server - 如何移动和比较sql表中的列值？

> ID：12678438
> 
> 赞同：-2
> 
> 时间：2012-10-01T17:56:48.303
> 
> 标签：sql-server, tsql

这是获取物理驱动器的可用磁盘空间和总磁盘空间的代码，数据存储在临时数据库`#output`中。我要做的就是将表中`freespace`可用列中的每个值`#output`与“1024000”进行比较，如果该值小于这个值，那么我想将该值放在另一个表中。

我是 SQL 新手，所以我不知道该怎么做。

PS驱动器的数量可能会有所不同，所以我需要一个通用的解决方案。

```
declare @svrName varchar(255)
declare @sql varchar(400)

set @svrName = @@SERVERNAME
set @sql = 'powershell.exe -c "Get-WmiObject -ComputerName ' + QUOTENAME(@svrName,'''') + ' -Class Win32_Volume -Filter ''DriveType = 3'' | select name,capacity,freespace | foreach{$_.name+''|''+$_.capacity/1048576+''%''+$_.freespace/1048576+''*''}"'
--creating a temporary table
CREATE TABLE #output
(line varchar(255))
--inserting disk name, total space and free space value in to temporary table

insert #output
EXEC xp_cmdshell @sql

select rtrim(ltrim(SUBSTRING(line,1,CHARINDEX('|',line) -1))) as drivename
      ,round(cast(rtrim(ltrim(SUBSTRING(line,CHARINDEX('|',line)+1,
      (CHARINDEX('%',line) -1)-CHARINDEX('|',line)) )) as Float)/1024,0) as 'capacity(GB)'
      ,round(cast(rtrim(ltrim(SUBSTRING(line,CHARINDEX('%',line)+1,
      (CHARINDEX('*',line) -1)-CHARINDEX('%',line)) )) as Float) /1024 ,0)as 'freespace(GB)'
from #output
where line like '[A-Z][:]%'
order by drivename 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:10:57.360

```
declare @svrName varchar(255)
declare @sql varchar(400)

set @svrName = @@SERVERNAME
set @sql = 'powershell.exe -c "Get-WmiObject -ComputerName ' + QUOTENAME(@svrName,'''') + ' -Class Win32_Volume -Filter ''DriveType = 3'' | select name,capacity,freespace | foreach{$_.name+''|''+$_.capacity/1048576+''%''+$_.freespace/1048576+''*''}"'
--creating a temporary table
CREATE TABLE #output
(line varchar(255))
--inserting disk name, total space and free space value in to temporary table

insert #output
EXEC xp_cmdshell @sql

select rtrim(ltrim(SUBSTRING(line,1,CHARINDEX('|',line) -1))) as drivename
      ,round(cast(rtrim(ltrim(SUBSTRING(line,CHARINDEX('|',line)+1,
      (CHARINDEX('%',line) -1)-CHARINDEX('|',line)) )) as Float)/1024,0) as 'capacity(GB)'
      ,round(cast(rtrim(ltrim(SUBSTRING(line,CHARINDEX('%',line)+1,
      (CHARINDEX('*',line) -1)-CHARINDEX('%',line)) )) as Float) /1024 ,0)as 'freespace(GB)'
from #output
where line like '[A-Z][:]%'
having (CHARINDEX('*',line) -1)-CHARINDEX('%',line)) )) as Float) /1024 ,0) < 20
order by drivename 
```

在您的评论中直接回答您的问题。

当您使用函数或计算字段时，您不能将它们放在`WHERE`子句中，因此您必须使用`HAVING`. 在此解决方案中，我将您的计算字段用于*freespace(GB)*，将其放在`HAVING`子句中并选择大于 20 的值。

告诉我们它是否有效，因为我不知道您是否可以将 HAVING 与这些类型的功能一起使用。如果下面的其他解决方案不起作用：

```
declare @svrName varchar(255)
declare @sql varchar(400)

set @svrName = @@SERVERNAME
set @sql = 'powershell.exe -c "Get-WmiObject -ComputerName ' + QUOTENAME(@svrName,'''') + ' -Class Win32_Volume -Filter ''DriveType = 3'' | select name,capacity,freespace | foreach{$_.name+''|''+$_.capacity/1048576+''%''+$_.freespace/1048576+''*''}"'
--creating a temporary table
CREATE TABLE #output
(line varchar(255))
--inserting disk name, total space and free space value in to temporary table

insert #output
EXEC xp_cmdshell @sql

select rtrim(ltrim(SUBSTRING(line,1,CHARINDEX('|',line) -1))) as drivename
      ,round(cast(rtrim(ltrim(SUBSTRING(line,CHARINDEX('|',line)+1,
      (CHARINDEX('%',line) -1)-CHARINDEX('|',line)) )) as Float)/1024,0) as 'capacity(GB)'
      ,round(cast(rtrim(ltrim(SUBSTRING(line,CHARINDEX('%',line)+1,
      (CHARINDEX('*',line) -1)-CHARINDEX('%',line)) )) as Float) /1024 ,0)as 'freespace(GB)'
into #output_2
from #output
where line like '[A-Z][:]%'
order by drivename

select *
from #output_2
where [freespace(GB)] < 20 
```

在这种情况下，您将 #output 中的值插入另一个表 (#output_2)，以便您可以`WHERE`直接使用该子句。

# ruby-on-rails - 在 Rails/ActiveRecord 中复数一个模型

> ID：12678439
> 
> 赞同：0
> 
> 时间：2012-10-01T17:57:00.573
> 
> 标签：ruby-on-rails, activerecord, orm, ruby-on-rails-3.2, scaffolding

我有一个模型来跟踪学生获得的分数。有时他们会获得 1 分，而对于某些任务，他们会获得多分。该表看起来像这样：

```
points
--------------
student_id:integer
task_id:integer
points:integer
earned_at:date 
```

我应该怎么称呼这个模型？`Point`还是`Points`？通常，我的模型是单数的，Rails 在适当的地方智能地将它复数。但在这种情况下，每条记录代表多个点。当我打电话时，`student.points`我希望它返回他们曾经获得的所有积分。当我打电话时，`student.points.first`我希望它返回他们获得的第一组积分。

使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:02:58.790

我会保持模型单一；将每个 Point 项视为包含多个点的“点记录”或“点组”。另外，我会将“points”属性更改为“amount”或其他内容，因为Point.amount 似乎比Point.points 更干净。

查看：[https](https://stackoverflow.com/a/3399753/1700540) ://stackoverflow.com/a/3399753/1700540 ，我相信您可以找到具有类似观点的其他资源。

# json - 通过播放框架 1.2.3 处理 JSON

> ID：12678448
> 
> 赞同：0
> 
> 时间：2012-10-01T17:57:39.703
> 
> 标签：json, playframework-1.x

我在 post 请求中通过 XHR 发送 JSON 消息（内容类型：application/json；charset=UTF-8 - 我使用的是 firefox/chrome）。
但是，我无法在 play 1,.2.3 控制器中处理/接收 JSON 消息 - 可能是由于飞行员错误。任何见解/工作示例将不胜感激 - 谢谢

JSON 消息（在 JSONLint 中成功验证）：

```
{"email":"admin1@test.com","password":"admin123"} 
```

我应该查看 TypeBinder 还是从请求参数创建对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:43:45.940

您可以使用 play 中嵌入的 gson 来解析参数。在您的控制器方法中

```
MyParam myParam = new GsonBuilder().create().fromJson(request.params.get("myParam"), MyParam.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:55:25.720

您也可以尝试使用 FLEXJSON ( [http://flexjson.sourceforge.net/](http://flexjson.sourceforge.net/) ) 以避免遇到任何循环错误，尤其是在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:54:34.707

我最终遍历 request.params.allSimple 以通过 request.params.get 获取值。我在这个值上使用了 JsonParser().parse 来获取 JSONElement。然后我在 JSONElement 上使用 getAsJsonObject() 来获取 JSONBody。我通过对 JSONBody 的 get 调用检索了所需的 JSONElements，然后通过 getAs 方法调用来获取实际值。我将更详细地研究 TypeBinders - 任何其他建议都将受到欢迎。

# extjs - XTemplate 中的空值

> ID：12678451
> 
> 赞同：0
> 
> 时间：2012-10-01T17:57:46.183
> 
> 标签：extjs, extjs4, extjs4.1

在 4.1.1 升级后，我注意到`XTemplate`解释 null 值的方式发生了一个奇怪的变化。这是 XTemplate 所做的示例[http://jsfiddle.net/dbrin/AyJ9v/3/](http://jsfiddle.net/dbrin/AyJ9v/3/)（注意字段 2 值）。这里是相同的，但由模板类解释：http: [//jsfiddle.net/dbrin/AyJ9v](http://jsfiddle.net/dbrin/AyJ9v)。

当传递给 XTemplate 的数据包含空值时，字符串“null”被打印到输出。

如果这是 4.1.1 中的错误，如果我需要使用 XTemplate，解决方法是什么？

谢谢。

**更新**：错误已在 4.1.2 中修复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:52:13.617

此解决方法将起作用（这里是[JsFiddle](http://jsfiddle.net/Izhaki/AyJ9v/4/)）：

```
var tpl = new Ext.XTemplate("<p>Field1: {f1}, Field2: {[this.outputField( values.f2 )]} </p>",{
    outputField: function( aValue )
    {
        return aValue == null ? '' : aValue;                
    }
}).compile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:51:16.073

如果你想有条件内联。

```
var tpl = new Ext.XTemplate("<tpl if='f2 != null'>{f2}</tpl>" ,
<tpl if='f2 == null'></tpl>").compile(); 
```

# ios - 允许在 iFrame 内缩放，但不能在 iOS 页面上缩放

> ID：12678454
> 
> 赞同：15
> 
> 时间：2012-10-01T17:58:00.827
> 
> 标签：ios, css, html

我有一个简单的页面

```
<meta name="viewport" id="extViewportMeta" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"> 
```

在它上面，所有东西的大小都可以很好地显示在 iPhone 上。

但是当我在该页面上放置 iframe 时，iFrame 内的所有内容都不可缩放，并缩放到父页面的大小。

我怎样才能只允许在 iframe 内缩放，而不会弄乱我的页面的其余部分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-01T09:05:14.340

不幸的是，您的要求是不可能的。

首先，在您的“视口”元标记中，您的“内容”属性指定您网站的用户根本不能缩放。这就是**'user-scalable=no'**所要求的。

此外，您的**最大比例和最小比例设置为 1**，因此即使您删除 'user-scalable=no'，由于您没有可供用户放大的缩放范围，缩放也会被禁用。

因此，要为用户启用缩放，您必须删除 user-scalable=no 并设置不同的最小和最大比例值。

请参阅此链接以更好地了解“视口”元标记的设置：

[https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html](https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html)

其次，由于您的“视口”元标记是在您的“父”页面上设置的，因此这些设置也适用于该页面内的任何内容，即 iframe。iframe 是否具有指定不同设置的不同元“视口”标签并不重要，因为它存在于并遵守其父级的设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-29T14:49:12.520

这可以通过 jQuery 实现。在允许缩放和平移的 div 之外进行缩放和平移时，绑定缩放和平移事件以不执行任何操作。然后对于您想要允许缩放和平移的 div，您可以使用像[Panzoom](http://timmywil.github.io/jquery.panzoom/demo/)这样的插件，它使用“CSS3 转换和矩阵函数”来允许缩放和平移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:02:13.423

这是不可能的，因为 iOS 不允许缩放 - 您只需滚动 iFrame。这是您拥有的外部网站吗？如果是这样，请更改 CSS 代码并将其添加到视口，就像您在顶部的问题中一样。
或者，您可以使用 PHP 加载数据。您一定会找到解决问题的方法 - 如果没有，请随时提出后续问题。

# c# - 如何从基类型返回派生类型

> ID：12678467
> 
> 赞同：0
> 
> 时间：2012-10-01T17:58:42.637
> 
> 标签：c#, polymorphism

我有一个基类 Sport，它有一个属性将返回正确的对象类型，它应该是给定的派生类型（例如，Billiards 扩展了 Sport，并且该属性将返回 BilliardBall 类型）。

有没有比在 Sport 类中使用大的 if 语句更好的方法（如果此对象是 Billiards 实例，则返回 BilliardBall，否则如果...）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:04:09.733

你为什么在这里谈论泛型？为什么 Sport 知道所有的运动？

对于初学者，您可以执行以下操作：

```
public interface IBall
{
}
public class BilliardBall : IBall
{
}
public abstract class Sport
{
    protected abstract IBall Ball { get; }

}
public class Billiards : Sport
{
    protected override IBall Ball
    {
        get { return new BilliardBall(); }
    }
} 
```

# javascript - 由变量值组成的变量名

> ID：12678470
> 
> 赞同：2
> 
> 时间：2012-10-01T17:58:58.020
> 
> 标签：javascript

如何使用变量值来命名变量？

```
var xyz = "test";   
var (xyz) = "abc";
alert (test); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:01:08.493

如果你把它们放在一个对象中，你可以这样做：

```
var Container = {};
var xyz = "test";
Container[xyz] = "abc";
alert(Container['test']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:00:10.093

变量名不能是表达式的结果，除非您使用`eval`，您不想这样做，或者除非它是一个全局变量。

如果你需要动态命名，你应该使用一个对象，并动态命名它的属性。这也是动态创建全局变量的方式。

```
var xyz = "test";

//global

window[xyz] = "abc";

alert(test);    // "abc"

// object property

var myData = {};
myData[xyz] = "abc";

alert(myData.test);    // "abc" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:01:08.673

eval 这样做：

```
xyz = "test";
eval(xyz+"=123");
alert(test); // gives 123 
```

我相信很多人对评估说不。但是，这样做了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:01:29.290

如果不使用 eval 或 with，这样的事情是不可能的，并且由于各种原因不推荐使用这些方法。

但是，您可以使用变量作为对象属性的键：

```
var key = 'somestring';
var obj = {};

obj[key] = 'another value'; 
```

虽然在全局对象（浏览器中的窗口）上设置属性会满足您的要求，但我**强烈**建议不要直接在全局范围内编写业务逻辑代码，**尤其是**使用动态变量名。随机名称冲突错误的可能性太严重了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T18:02:33.610

如果是全局范围

```
var xyz = "test";   
window[xyz] = "abc";
alert (test); 
```

更好地使用对象

```
var myObject = {};
var xyz = "test";   
myObject [xyz] = "abc";
alert (myObject.test); 
```

[JSFiddle 示例](http://jsfiddle.net/s69XC/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T18:03:34.030

```
var xyz = "test";   
eval ( xyz + "= 'abc';");
alert (test); 
```

# asp.net - 如何从 ASP.net 网站写入 OutputDebugString？

> ID：12678471
> 
> 赞同：2
> 
> 时间：2012-10-01T17:58:58.570
> 
> 标签：asp.net

我需要从网站上的代码中输出一些调试信息。

我如何`OutputDebugString`从 ASP.net 网站调用，*并让运行 DbgView 的用户看到它*？

**注意**：网站不支持[`System.Diagnostics.Trace.TraceWarning(...)`](https://stackoverflow.com/questions/11434473/how-to-trace-debug-messages-in-asp-net)。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T18:23:51.053

好的，这是一个完整的例子。它是一个控制台，但原理和代码大致相同。我今天无法在我的机器上测试从 OutputDebugString 捕获，因为我没有管理员权限。在服务器上，您将写入 TextWriterTraceListener 而不是控制台。如果您无法使用 pinvoke 从 OutputDebugString 写入和读取，可能是客户没有权限或应用程序没有必要的权限。

还！如果 Debug.WriteLine 没有出现，可能网站是在 RELEASE 模式下编译的，而 DEBUG 没有定义。TRACE 默认是为 RELEASE 和 DEBUG 定义的。TraceSource 会写入 OutputDebugString ，除非您已清除默认侦听器，许多人出于习惯这样做，因为根据我的经验，OutputDebugString 可能会减慢速度，尤其是如果您目前实际上没有查看输出。

```
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace TraceToOutputDebugString
{
    class Program
    {
        [DllImport("kernel32.dll")]
        static extern void OutputDebugString(string lpOutputString);

        static void Main(string[] args)
        {
            //Put these lines in your asp.net Page
            OutputDebugString("Hello from Pinvoke OutputDebugString");
            TraceSource trace = new TraceSource("app");
            trace.TraceInformation("Hello from TraceSource");
            Trace.TraceInformation("Hello from 1.1 Trace.TraceInformation");
            Debug.WriteLine("Hello Debug.WriteLine");
            System.Console.ReadKey();
        }
    }
} 
```

这是配置。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.diagnostics>
        <sources>
            <source name="app" switchName="app">
                <listeners>
                    <add name="Console" type="System.Diagnostics.ConsoleTraceListener"/>
                </listeners>
            </source>
        </sources>
        <switches>
            <add name="app" value="Information"/>
        </switches>
        <trace>
            <listeners>
                <add name="Console" type="System.Diagnostics.ConsoleTraceListener"/>
            </listeners>
        </trace>
    </system.diagnostics>
</configuration> 
```

# asp.net-mvc-4 - 使用 Web API 正确实现 Ninject 过滤器绑定

> ID：12678474
> 
> 赞同：0
> 
> 时间：2012-10-01T17:59:14.040
> 
> 标签：asp.net-mvc-4, asp.net-web-api, ninject

绑定到过滤器时，我应该使用下面的或新约定中`BindFilter`包含的扩展方法，还是两者都使用？`Ninject.Web.WebApi`

```
GlobalConfiguration.Configuration
      .Filters.Add(new ApiValidationFilter(kernel.Get<IApiAuthenticationService>())); 
```

我现在正在使用后者，但不断收到下面的错误消息。在添加 web-api 过滤器之前，我没有在我的项目中得到这个。

> 操作无法完成，因为 DbContext 已被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:11:57.903

我最终不得不求助。

```
 var apiRepository = new ApiRepository(new DatabaseFactory());
            var apiAuthenticationService = new ApiAuthenticationService(apiRepository, new UnitOfWork(new DatabaseFactory()), new ValidationProvider(null)); 
```

# c# - C# 和部分工作的 SendMessage？

> ID：12678476
> 
> 赞同：3
> 
> 时间：2012-10-01T17:59:29.470
> 
> 标签：c#, .net, windows, winapi

我尝试将文本消息发送到 Windows 7 中的各种应用程序（例如 Notepad++、Notepad 等）。SendMessage 适用于记事本，但不适用于记事本++。

如果我将文本发送到记事本，一切看起来都很好，整个文本，我得到 1 作为 SendMessage 方法的返回。但是对于 Notepad++，只出现第一个字母并且方法 SendMessage 返回 0，但是 Marshal.GetLastWin32Error() 没有返回任何错误（结果 0）？

这是代码：

```
GUITHREADINFO gti = new GUITHREADINFO();
IntPtr hWnd = GetForegroundWindow();
uint processId;
uint activeThreadId = GetWindowThreadProcessId(hWnd, out processId);
if (GetInfo(activeThreadId, out gti))
{
    int EM_REPLACESEL = 0x00C2;

    int error = Marshal.GetLastWin32Error();
    int result = SendMessageW(gti.hwndCaret, EM_REPLACESEL, -1, passed);//3rd param doesn't change anything
    error = Marshal.GetLastWin32Error();
} 
```

WinAPI 函数和 GetInfo 方法只要具有所需的结构就定义为：

```
[DllImport("User32.dll", EntryPoint = "SendMessageW", SetLastError = true, CharSet = CharSet.Unicode)]
public static extern int SendMessageW(IntPtr hWnd, int uMsg, int wParam, string lParam);

[DllImport("user32.dll")]
static extern IntPtr GetForegroundWindow();

[DllImport("user32.dll", SetLastError = true)]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);
//"Borrowed" code
public static bool GetInfo(uint hwnd, out GUITHREADINFO lpgui)
{
     uint lpdwProcessId;
     uint threadId = GetWindowThreadProcessId(hwnd, out lpdwProcessId);

     lpgui = new GUITHREADINFO();
     lpgui.cbSize = Marshal.SizeOf(lpgui);

    return GetGUIThreadInfo(threadId, ref lpgui);
}

[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int iLeft;
    public int iTop;
    public int iRight;
    public int iBottom;
}

[StructLayout(LayoutKind.Sequential)]
public struct GUITHREADINFO
{
    public int cbSize;
    public int flags;
    public IntPtr hwndActive;
    public IntPtr hwndFocus;
    public IntPtr hwndCapture;
    public IntPtr hwndMenuOwner;
    public IntPtr hwndMoveSize;
    public IntPtr hwndCaret;
    public RECT rectCaret;
} 
```

太好了，我想知道我应该怎么做才能修复它，这样它才能（完全）适用于所有窗口，而不仅仅是记事本中的编辑控制？

# regex - egrep 以 r 开头并以 g 结尾的行

> ID：12678481
> 
> 赞同：10
> 
> 时间：2012-10-01T17:59:42.183
> 
> 标签：regex, shell, unix, grep

我需要使用 egrep 在 shell 中查找并显示以 r 开头并以 g 结尾的行。

我有

```
egrep -e "^r*g$" testfile.txt 
```

但它没有给我任何结果，我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T18:03:04.180

添加一个`.`应该工作

```
egrep -e "^r.*g$" 
```

它基本上意味着：以 ar 开头的所有内容，然后是零个或多个任何内容，然后以 g 结尾。

针对

```
r fsgdfs gfsdg
fooo bar
rfoo g
fdsqfdsq

rg 
```

它返回

```
r fsgdfs gfsdg
rfoo g
rg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:03:14.530

`*`是匹配的，`r`而不是“中间的任何东西”。将其更新为`.*`，您应该会看到结果：

```
egrep -e "^r.*g$" testfile.txt 
```

# php - 如何在字符串中找到第一个 alpha [A-Za-z] 的位置？

> ID：12678488
> 
> 赞同：3
> 
> 时间：2012-10-01T18:00:11.373
> 
> 标签：php, regex, string, substring

> **可能重复：**
> [如何在字符串中找到正则表达式匹配的索引？](https://stackoverflow.com/questions/7465027/how-do-i-find-the-index-of-a-regex-match-in-a-string)
> [如何获取正则表达式匹配在字符串中的位置？](https://stackoverflow.com/questions/9571231/how-to-get-the-position-of-a-regex-match-in-a-string)

给定以下字符串，如何找到每个字符串中第一个 alpha 的位置？

1)`- Alpha`

2)`beta`

3)`. Gamma`

4)`'delta'`

最终我在子字符串之后，从第一个字母字符开始。所以我正在寻找抵消我的子字符串以获得`Alpha`.

我正在寻找的偏移量（来自上面的例子）是：

1) 2

2) 0

3) 2

4) 1

我不关心任何特殊字符。只是第一个 alpha，不区分大小写 (A-Za-z)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T18:06:24.440

使用[preg_match()](http://www.php.net/manual/en/function.preg-match.php)：

## 代码：

```
foreach (array('- Alpha', 'beta', '. Gamma', "'delta'") as $value) {
    preg_match('~[a-z]~i', $value, $match, PREG_OFFSET_CAPTURE);
    print_r($match);
} 
```

## 输出：

```
Array
(
    [0] => Array
        (
            [0] => A
            [1] => 2
        )
)
Array
(
    [0] => Array
        (
            [0] => b
            [1] => 0
        )
)
Array
(
    [0] => Array
        (
            [0] => G
            [1] => 2
        )
)
Array
(
    [0] => Array
        (
            [0] => d
            [1] => 1
        )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:04:33.123

使用for循环并在里面添加if条件，在整个字符串中运行for循环，'i'是当前位置的字符

```
if(i>='a' && i<='z' || i>='A' && i<='Z') 
```

# oracle - 优化 dup delete 语句 Oracle

> ID：12678493
> 
> 赞同：2
> 
> 时间：2012-10-01T18:00:32.613
> 
> 标签：oracle, query-optimization

我有 2 个删除语句需要很长时间才能完成。where 子句中的列有几个索引。

**什么是重复？** 如果 2 条或更多条记录在 id、cid、type、trefid、ordrefid、amount 和 paydt 列中具有相同的值，则存在重复。

DELETE 删除了大约 100 万条记录。

可以以任何方式重写它们以使其更快。

```
DELETE FROM TABLE1 A WHERE loaddt < (
    SELECT max(loaddt) FROM TABLE1 B
    WHERE 
    a.id=b.id and
    a.cid=b.cid and
    NVL(a.type,'-99999') = NVL(b.type,'-99999') and
    NVL(a.trefid,'-99999')=NVL(b.trefid,'-99999') and
    NVL(a.ordrefid,'-99999')= NVL(b.ordrefid,'-99999') and
    NVL(a.amount,'-99999')=NVL(b.amount,'-99999') and
    NVL(a.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))=NVL(b.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))
);

    COMMIT;

DELETE FROM TABLE1 a where rowid > (
    Select min(rowid) from TABLE1 b
    WHERE 
    a.id=b.id and
    a.cid=b.cid and
    NVL(a.type,'-99999') = NVL(b.type,'-99999') and
    NVL(a.trefid,'-99999')=NVL(b.trefid,'-99999') and
    NVL(a.ordrefid,'-99999')= NVL(b.ordrefid,'-99999') and
    NVL(a.amount,'-99999')=NVL(b.amount,'-99999') and
    NVL(a.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))=NVL(b.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))
);

commit; 
```

解释计划：

```
DELETE  TABLE1         

    HASH JOIN 1296491 
    Access Predicates 

        AND 
        A.ID=ITEM_1 
        A.CID=ITEM_2 
        ITEM_3=NVL(TYPE,'-99999') 
        ITEM_4=NVL(TREFID,'-99999') 
        ITEM_5=NVL(ORDREFID,'-99999') 
        ITEM_6=NVL(AMOUNT,(-99999)) 
        ITEM_7=NVL(PAYDT,TO_DATE(' 9999-12-31 00:00:00', 'syyyy-mm-dd hh24:mi:ss')) 

    Filter Predicates 
        LOADDT<MAX(LOADDT)

    TABLE ACCESS  TABLE1     FULL    267904 
    VIEW VW_SQ_1         690385 
    SORT GROUP BY    690385 
        TABLE ACCESS TABLE1      FULL    267904 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:47:40.870

桌子有多大？如果删除的行数高达 12%，那么您可能会考虑索引。你能以某种方式对你的表进行分区 - 就像每周一样，然后只扫描实际的一周？

也许这可能更有效。当您使用聚合函数时，oracle 必须遍历所有相关行（在您的情况下为全扫描），但是当您使用存在时，它会在找到第一次出现时停止。（当然，当 where 子句中的所有列都有一个基于函数的（由于 NVL）索引时，查询会快得多）

```
DELETE FROM TABLE1 A 
WHERE exists (
SELECT 1 
FROM TABLE1 B
WHERE 
A.loaddt != b.loaddt
a.id=b.id and
a.cid=b.cid and
NVL(a.type,'-99999') = NVL(b.type,'-99999') and
NVL(a.trefid,'-99999')=NVL(b.trefid,'-99999') and
NVL(a.ordrefid,'-99999')= NVL(b.ordrefid,'-99999') and
NVL(a.amount,'-99999')=NVL(b.amount,'-99999') and
NVL(a.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))=NVL(b.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:52:59.513

尽管有些人可能不同意，但我支持在程序上运行大型、长时间运行的删除。在我看来，控制和跟踪进度要容易得多（并且您的 DBA 会更喜欢您 ;-) 另外，不确定为什么需要将 table1 连接到自身以识别重复项（如果您遇到过我会很好奇快照您当前方法的旧问题）。您也不应该需要多个删除语句，所有重复项都应在一个进程中处理。最后，您应该检查为什么您每周都不断地重新引入重复项，并可能更改加载过程（可能进行合并/更新插入而不是所有插入）。

也就是说，您可以尝试以下操作：

```
-- first create mat view to find all duplicates
create materialized view my_dups_mv
tablespace my_tablespace
build immediate
refresh complete on demand
as
select id,cid,type,trefid,ordrefid,amount,paydt, count(1) as cnt
from table1
group by id,cid,type,trefid,ordrefid,amount,paydt
having count(1) > 1;

-- dedup data (or put into procedure and schedule along with mat view refresh above)
declare
  -- make sure my_dups_mv is refreshed first
  cursor dup_cur is
  select * from my_dups_mv;

  type duprec_t is record(row_id rowid);
  duprec duprec_t;
  type duptab_t is table of duprec_t index by pls_integer;
  duptab duptab_t;

  l_ctr pls_integer := 0;
  l_dupcnt pls_integer := 0;
begin
  for rec in dup_cur
  loop
    l_ctr := l_ctr + 1;

    -- assuming needed indexes exist
    select rowid
    bulk collect into duptab
    from table1
    where id = rec.id
    and cid = rec.cid
    and type = rec.type
    and trefid = rec.trefid
    and ordrefid = rec.ordrefid
    and amount = rec.amount
    and paydt = rec.paydt
    -- order by whatever makes sense to make the "keeper" float to top
    order by loaddt desc
    ;

    for i in 2 .. duptab.count
    loop
      l_dupcnt := l_dupcnt + 1;
      delete from table1 where rowid = duptab(i).row_id;
    end loop;

    if (mod(l_ctr, 10000) = 0) then
      -- log to log table here (calling autonomous procedure you'll need to implement)
      insert_logtable('Table1 deletes', 'Commit reached, deleted ' || l_dupcnt || ' rows');
      commit;
    end if;

  end loop;
  commit;
end; 
```

检查您的日志表以了解进度状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:42:27.877

**1.并行**

```
alter session enable parallel dml;

DELETE /*+ PARALLEL */ FROM TABLE1 A WHERE loaddt < (
... 
```

假设您有企业版，一个健全的服务器配置，并且您使用的是 11g。如果您不在 11g 上，则并行语法略有不同。

**2.减少内存需求**

该计划显示了一个哈希连接，这可能是一件好事。但如果没有任何有用的过滤器，Oracle 必须对整个表进行哈希处理。（仅使用 a 的 Tbone 查询`GROUP BY`看起来更好，并且可能运行得更快。但它也可能会在尝试对整个表进行排序或散列时遇到相同的问题。）

如果哈希值无法放入内存，则必须将其写入磁盘，这可能会非常慢。由于您每周运行此查询，因此只有一个表需要查看所有行。根据它运行的确切时间，您可以在查询末尾添加类似这样的内容：`) where b.loaddt >= sysdate - 14`. 这可能会显着减少对临时表空间的写入量。如果您使用 jakub.petr 建议的一些分区策略，它也可能会减少读取 IO。

**3\. 主动报告**

如果您想确切地知道您的查询在做什么，请运行 Active Report：

```
select dbms_sqltune.report_sql_monitor(sql_id => 'YOUR_SQL_ID_HERE', type => 'active')
from dual; 
```

（将输出保存到 .html 文件并使用浏览器打开。）

# jquery - 使 JQuery Cycle Plugin 自动播放一次并在幻灯片结束时停止

> ID：12678497
> 
> 赞同：1
> 
> 时间：2012-10-01T18:00:41.997
> 
> 标签：jquery, slideshow, jquery-cycle

如何让 Cycle 插件自动播放一次，然后在幻灯片结束时停止？此外，我希望有一个暂停/播放导航按钮淡入淡出，用户可以使用它再次重新启动它。

这可能吗？

# 编辑 1

这是我尝试过的，但幻灯片仍然继续......

```
$(document).ready(function() {
    $('#gallery').cycle({
        fx: 'fade',
        timeout: 3000, 
        speed: 500,
        autostop: 0,
        end: function(options) {  
               $('#gallery').cycle('stop');
                }
    });
}); 
```

# 编辑 2

我现在的幻灯片在最后一张幻灯片上成功结束，但是我相信通过使用这些特定参数可能会导致插件可用的播放/暂停切换功能出现问题......

发生的情况是，暂停/播放按钮确实起作用，但是一旦幻灯片完全结束，它就不再做任何事情并且不允许幻灯片重新开始。

这是我目前编写的脚本：

```
$(document).ready(function() {
    $('#gallery').cycle({
        fx: 'fade',
        timeout: 3000, 
        speed: 500,
        autostop: 1 // Stop slideshow at end
    });

    $('a#pause_resume_button').click(function() { 
        $('#gallery').cycle('toggle'); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:04:28.860

有一个结束选项。

[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

将此与停止配对，您就可以排序了。

如果您知道幻灯片的数量，那么您也可以使用 autoStop。

**编辑：**

```
$('#scroller').cycle({
        fx: 'fade',
        timeout: 3000, 
        speed: 500,
        autostop: 1,
        end: function(options) {  
          $('#gallery').cycle('stop');
          alert('finished');
        }
    }); 
```

[http://jsbin.com/icohen/1/](http://jsbin.com/icohen/1/)

**编辑2：**

[http://jsbin.com/icohen/2/edit](http://jsbin.com/icohen/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:02:49.937

尝试在您的代码中设置此属性

```
autostop: 0, // true to end slideshow after X transitions (where X == slide count) 
```

调用它以恢复您的幻灯片放映

```
$('#slideshow').cycle('resume'); 
```

# ios - 带有 Xcode 4.5 的 Cocoa Touch 静态库

> ID：12678498
> 
> 赞同：3
> 
> 时间：2012-10-01T18:00:43.540
> 
> 标签：ios, xcode, static-libraries, xcode4.5

我正在尝试创建一个简单的静态库并将其添加到另一个项目中。我找到了几个解释如何做到这一点的教程，似乎每个教程都有点不同。我发现的[最近的一个](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)似乎是最简单的，所以这是我重新创建的。

当我尝试构建要从中访问库的项目时，我收到“Apple Mach-O Linker Warning - Ignoring [my .a file], missing required architecture i386 in file [my .a file](2 slices) ”，以及两次“Apple Mach-O Linker Error”。我猜问题是它忽略了我的 .a 文件，这就是导致错误的原因，因此修复警告也应该处理错误。该线程中的一些用户似乎在那里发布了有关此问题的信息，但似乎没有任何关于如何修复它的回应。有谁知道本教程遗漏了什么导致这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:14:36.177

xcode 4.5 不支持 armv6，删除它并创建库文件...

[https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html)

一般：iOS 这个版本的 Xcode 不生成 armv6 二进制文件。12282156 最低部署目标是 iOS 4.3。12282166 在此 Xcode 版本中，为新的用户界面文档（故事板和 nib 文件）启用了自动布局。因为自动布局需要 iOS 6.0，所以在早期的 iO​​S 版本中使用此类用户界面文档会导致崩溃或其他未定义的行为。12289644 要让您的应用程序在早期 iOS 版本上运行，请在其用户界面文档中关闭自动布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:21:48.750

在您的静态库代码中，转到项目的目标。Build Settings -> Architectures -> Valid Architectures，打开值并点击“+”按钮并添加“i386”。

确保您进行了完全清理（command + alt + shift + K）并重建。

将您的库复制回您的主项目并编译它。

让我知道这是否有效。

# zend-framework2 - ZF2 中的 ViewModel

> ID：12678507
> 
> 赞同：0
> 
> 时间：2012-10-01T18:01:09.890
> 
> 标签：zend-framework2

我正在做一个项目，想知道是否有其他人对视图模型有很大的影响。我正在寻找一些关于如何注入其他视图模型的示例，即页眉、页脚内容。

我已经有模板和布局路径切换​​我只是想弄清楚如果我选择 layout1 并且它有 3 个页脚内容字段和一个滑块的最佳处理方式，那么如何将一个类放在渲染前面以收集和注入所需数据

**编辑** 好吧，我想我应该澄清一下LOL ....我的思绪飘忽的轻微多动症。

在注入视图模型之前我应该​​听什么，或者我可以在我的主模块的 onBootStrap() 中做到这一点。我现在

```
$sites = $e->getApplication()->getServiceManager()->get('Application\Model\Sites');
$sr = $sites->getSiteByDomain(); 
```

由于许多域和/或子域可以指向此并将信息放入会话中。也许我想多了，应该像我在 ZF1 中那样扩展 actionController

LOL PHP 做某事的方法有很多......

感谢任何指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:02:15.350

我可以给你两个有用的链接。一个是 Rob Allen 别名 Akrabat 的操场，你可以[在 github 上](https://github.com/akrabat/ZF2TestApp/blob/master/module/Application/src/Application/Controller/ViewController.php)找到他的操场。另一个是官方文档，在这部分有[很好](http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html)的记录。

如果这些对您没有帮助，您应该指定您的问题并向我们展示您迄今为止所做的尝试。

# c# - 如何使用 C# 复制访问表

> ID：12678509
> 
> 赞同：2
> 
> 时间：2012-10-01T18:01:21.713
> 
> 标签：c#, ms-access

我有一个包含 2 个表的数据库，我想将数据从第一个表复制到第二个表。一张表是空的，另一张有数据。

到目前为止，我的代码是：

```
OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\\Dosimet\\dose_be.mdb");
conn.Open();
string copiar = "INSERT INTO DOSIMETROATIVO (SELECT * FROM DOSIMETRO)";
OleDbCommand cmdcopiar = new OleDbCommand(copiar, conn);
cmdcopiar.ExecuteNonQuery();
conn.Close(); 
```

**我在ExecuteNonQuery**上遇到错误（在 INSERT INTO 指令上说语法错误）

`DOSIMETROATIVO`（空）和（带有数据）都是`DOSIMETRO`同一数据库（dose_be.mdb）上的表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:10:50.113

删除`INSERT`语句中的括号。

```
INSERT INTO DOSIMETROATIVO SELECT * FROM DOSIMETRO 
```

# c# - c#：创建一个连接按钮

> ID：12678513
> 
> 赞同：0
> 
> 时间：2012-10-01T18:01:45.397
> 
> 标签：c#, winforms

我有一个登录表单和一个按钮，用于检查用户名和密码是否为真。但问题是我试过的代码..我必须点击连接按钮两次。

但是当我单击按钮一次时，代码应该可以工作！正确的 ？

我认为问题是：如果我单击某个按钮，它的 DialogResult 设置为某个值，那么 showDialog 不会消失，因此在第一次单击时 connexionButton.DialogResult 获取 DialogResult.OK 值，然后在第二次单击按钮执行代码。

***您可以注意到事件 simpleButton1_Click 是 connexionButton 按钮的事件***

这是我使用的事件：

```
 this.connexionButton.Click += new System.EventHandler(this.simpleButton1_Click); 
```

这是我尝试过的代码：

```
private void simpleButton1_Click(object sender, EventArgs e)
{
     Boolean allowCnx = false;

     foreach (var row in myClass.ds.Tables["Users"].AsEnumerable())
     {
         if (row[1].ToString().ToLower() == idBox.Text.ToLower() && row[2].ToString().ToLower() == mdpBox.Text.ToLower())
         {
            allowCnx = true;
         }
     }

     if (allowCnx)
     {
         connexionButton.DialogResult = DialogResult.OK;
     }
     else
       XtraMessageBox.Show("Invalide Information", "Erreur", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

这是我用来调用此登录表单的代码：

```
using (login loginForm = new login())
{
     var result = loginForm.ShowDialog();
     if (result == DialogResult.OK)
        this.Show();
     else
        this.Close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:11:04.190

```
// Points to a different method than the one you posted
// (simpleButton1_Click_1 instead of simpleButton1_Click)
this.simpleButton1.Click += new System.EventHandler(this.simpleButton1_Click_1);

// This isn't simpleButton1_Click_1
private void simpleButton1_Click(object sender, EventArgs e) 
```

不确定这是否是您的问题，但看起来您的事件处理程序与您发布的方法不同。您是否`simpleButton1_Click_1`在代码中的某处调用了另一种方法，而您只是有点困惑？

**编辑：响应您的更改/添加**

您似乎对 ShowDialog 和 DialogResult 有一些困惑。

```
// When you launch the login form, I do not know what you intended to do with your
// calls to Show() and Close() but so long as you don't instend for them to do
// anything to the loginForm, that's fine.
using (login loginForm = new login())
{
    if (loginForm.ShowDialog() == DialogResult.OK)
        // Do stuff if logged in
    else
        // Do stuff if failed
} 

private void simpleButton1_Click(object sender, EventArgs e)
{
    Boolean allowCnx = false;

    foreach (var row in myClass.ds.Tables["Users"].AsEnumerable())
        if (row[1].ToString().ToLower() == idBox.Text.ToLower() && row[2].ToString().ToLower() == mdpBox.Text.ToLower())
        {
            allowCnx = true;
        }

    if (allowCnx)
    {
        this.DialogResult = DialogResult.OK; // Don't set the DialogResult of a button.  Set it for the form.
    }
    else
    {
        this.DialogResult = DialogResult.Abort; // Because we didn't succeed
        XtraMessageBox.Show("Invalide Information",
            "Erreur",
            MessageBoxButtons.OK,
            MessageBoxIcon.Error);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T19:08:02.213

将行的迭代器从 AsEnumerable 更改为 Rows。

从：

```
foreach (var row in myClass.ds.Tables["Users"].AsEnumerable()) 
```

至：

```
foreach (var row in myClass.ds.Tables["Users"].Rows) 
```

这可能听起来很奇怪，但如果在任何地方对该表有任何更改，那么当您迭代您的可枚举时，它将破坏您的迭代。请参阅[DataTableExtensions.AsEnumerable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx) 这可能是同时访问此表的另一个进程，或者使用在迭代开始之前尚未完成填充表的数据读取器。

此外，尝试更改代码以直接访问表单的对话框结果，而不是通过按钮。

从：

```
connexionButton.DialogResult = DialogResult.OK; 
```

至：

```
this.DialogResult = DialogResult.OK; 
```

您的代码应仅在您的布尔值设置为 true 时进行设置，因此如果您的检查正确，您将不会关闭表单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T18:13:57.010

您正在使用`simpleButton1_Click_1`而不是`simpleButton1_Click`. 事实上，代码应该是：

```
this.simpleButton1.Click += new System.EventHandler(this.simpleButton1_Click); 
```

* * *

**编辑 ：**

> 是的，我只是忘记了当我复制事件时.. 我的意思是 this.connexionButton.Click += new System.EventHandler(this.simpleButton1_Click);

我认为，在这种情况下，您应该使用 a`bool`而不是 a `DialogResult`，因此请尝试：

```
public bool AllowConnection = false;
private void simpleButton1_Click(object sender, EventArgs e)
{
     foreach (var row in myClass.ds.Tables["Users"].AsEnumerable())
     {
         if (row[1].ToString().ToLower() == idBox.Text.ToLower() && row[2].ToString().ToLower() == mdpBox.Text.ToLower())
            AllowConnection = true;
     }

     if (!AllowConnection)
         XtraMessageBox.Show("Invalide Information", "Erreur", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

和：

```
using (login loginForm = new login())
{
     loginForm.ShowDialog();
     if (loginForm.AllowConnection)
        this.Show();
     else
        this.Close();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T19:07:05.020

您需要将 设置`Form.DialogResult`为，而`DialogResult.OK`不是`DialogResult`。`Button`

一些代码：

`this.DialogResult = DialogResult.OK`

一些额外的想法：

*   构建一个独立的方法来检查用户的存在显然更好。不要在`ClickEvent`. 也许你再次需要这个方法，然后你会重写它。这只会产生臃肿的代码。

*   防止用户在文本框填充值之前单击按钮。

# javascript - 如何检测何时将属性添加到 JavaScript 对象？

> ID：12678517
> 
> 赞同：6
> 
> 时间：2012-10-01T18:02:13.890
> 
> 标签：javascript

```
var obj = {};
obj.a = 1; // fire event, property "a" added 
```

[这个问题与这个](https://stackoverflow.com/questions/1759987/listening-for-variable-changes-in-javascript-or-jquery)问题不同，其中正在讨论检测已声明属性何时更改的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:07:40.637

您可以计算对象上的属性，看看是否从您上次检查时发生了变化：

[如何有效地计算 JavaScript 中对象的键/属性数？](https://stackoverflow.com/questions/126100/how-to-efficiently-count-the-number-of-keys-properties-of-an-object-in-javascrip)

这是一个粗略的解决方法，以防您无法在该语言中找到对该功能的适当支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:25:26.603

从技术上讲，这是可能的，但由于我所知道的所有当前 JS 实现都是单线程的，所以它不会很优雅。我唯一能想到的是蛮力间隔：

```
var checkObj = (function(watchObj)
{
    var initialMap = {},allProps = [],prop;
    for (prop in watchObj)
    {
        if (watchObj.hasOwnProperty(prop))
        {//make tracer object: basically clone it
            initialMap[prop] = watchObj[prop];
            allProps.push(prop);//keep an array mapper
        }
    }
    return function()
    {
        var currentProps = [];
        for (prop in watchObj)
        {
            if (watchObj.hasOwnProperty(prop))
            {//iterate the object again, compare
                if (watchObj[prop] !== initialMap[prop])
                {//type andvalue check!
                    console.log(initialMap[prop] + ' => ' watchObj[prop]);
                    //diff found, deal with it whichever way you see fit
                }
                currentProps.push(prop);
            }
        }
        //we're not done yet!
        if (currentProps.length < allProps.length)
        {
            console.log('some prop was deleted');
            //loop through arrays to find out which one
        }
    };
})(someObjectToTrack);
var watchInterval = setInterval(checkObj,100);//check every .1 seconds? 
```

这使您可以在某种程度上跟踪对象，但同样，以 10/秒的速度执行此操作需要做很多工作。谁知道呢，也许对象在间隔之间也发生了几次变化。
总而言之，我觉得这是一种不太理想的方法......也许比较`JSON.stringify`'ed 对象的字符串常量会更容易，但这确实意味着错过了函数，并且（虽然我过滤了他们在这个例子中）原型属性。

我曾经考虑过做类似的事情，但最终只是使用我的事件处理程序来更改相关对象来检查任何更改。
或者，您也可以尝试创建一个 DOMElement，并为其附加一个`onchange`侦听器......遗憾的是，函数/方法可能难以跟踪，但至少它不会像上面的代码那样减慢您的脚本速度.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T10:15:51.420

如果性能很重要并且您可以控制更改对象的代码，请创建一个控制类来为您修改对象，例如

```
var myObj = new ObjectController({});

myObj.set('field', {});
myObj.set('field.arr', [{hello: true}]);
myObj.set('field.arr.0.hello', false);

var obj = myObj.get('field'); // obj === {field: {arr: [{hello: false}]}} 
```

在您的 set() 方法中，与设置间隔和定期扫描以检查更改相比，您现在能够以相当高性能的方式查看每个更改发生在哪里。

我在 ForerunnerDB 中做了类似但高度优化的事情。当您对数据库执行 CRUD 操作时，会针对特定字段路径触发更改事件，从而允许在其基础数据更改时更新数据绑定视图。

# regex - 如何使用 Perl 替换运算符禁用变量插值？

> ID：12678519
> 
> 赞同：5
> 
> 时间：2012-10-01T18:02:28.033
> 
> 标签：regex, perl, vms

我正在尝试替换 VMS 上文本文件中的特定行。通常，这是一个简单的 Perl 单行代码。但是当替换端是包含 VMS 路径的符号时，我遇到了问题。这是文件和我尝试过的：

file1.txt 的内容：

```
foo
bar
baz
quux 
```

尝试替换第 3 行：

```
$ mysub = "disk$data1:[path.to]file.txt"
$ perl -pe "s/baz/''mysub'/" file1.txt 
```

产生以下输出：

```
foo
bar
disk:[path.to]file.txt
quux 
```

看起来 Perl 太急于`$data1`用不存在的变量的内容（即，什么都没有）替换路径的一部分。使用调试器运行证实了这一点。我没有提供`/e`，所以我认为 Perl 应该按原样替换文本。有没有办法让 Perl 做到这一点？

（另请注意，我可以在 linux 命令行中重现类似的行为。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T23:06:03.550

使用正确的引号和双引号组合，您可以到达那里：

我们创建了“字符串”+“替代符号”+“字符串”的紧密连接。两个双引号字符串包含替换的单引号。做作......但它的工作原理。

```
$ perl -pe "s'baz'"'mysub'"'" file1.txt 
```

这是一个 DCL 级别的解决方案。

对于 Perl 解决方案，将`q()`运算符用于非插值字符串并执行它。使用简单的 DCL 替换将符号填充到括号中。这是我最喜欢的，因为它（几乎）对我来说很有意义，并且不会与引号混淆。

```
$ perl -pe "s/baz/q(''mysub')/e" file1.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T18:40:24.980

正如[ruakh](https://stackoverflow.com/users/978917/ruakh)在阅读我的评论时发现的那样，perl 插值的问题可以通过访问`%ENV`哈希来解决，而不是使用 shell 变量：

```
perl -pwe "s/baz/$ENV{mysub}/" file1.txt 
```

添加`-w`是因为我不相信`warnings`即使在单行中也不使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:18:02.907

对于`sh`或衍生物，我会使用

```
perl -pe'BEGIN { $r = shift(@ARGV) } s/baz/$r/' "$mysub" file1.txt 
```

否则，您必须以某种方式将 的值`mysub`转换为 Perl 字符串文字。那会更复杂。找到你的 shell 的等价物。

**由 OP 编辑​​：**

是的，这行得通。VMS 等价物是

```
perl -pe "BEGIN { $r = shift(@ARGV) } s/baz/$r/" 'mysub' file1.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T18:10:10.503

几十年来甚至没有见过 VMS 系统，但是……逃离你的印记？

```
$ mysub = "disk\$data1:[path.to]file.txt" 
```

或者可能

```
$ mysub = "disk\\$data1:[path.to]file.txt" 
```

?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T16:27:06.840

您可以尝试使用逻辑名称而不是 DCL 符号：

```
$ define mysub "disk$data1:[path.to]file.txt"
$ $ perl -pe "s/baz/mysub/" file1.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T18:06:44.753

你必须逃避`$`with `\$`。否则 Perl 看到一个变量引用，并在计算正则表达式之前将字符串替换为`$data1`的内容。`$data1`因为你没有定义`$data1`它当然是空的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T18:12:33.280

您可以使用以下代码：

```
$ mysub='disk\$data1:[path.to]file.txt'
$ perl -pe 's/baz/'$mysub'/' FILE
foo
bar
disk$data1:[path.to]file.txt
quux 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-01T18:02:28.033

**使用 sed。**

Sed 不会尝试`$data1`作为变量进行插值，所以你应该得到你想要的。

```
$ sed -e "s/baz/''mysub'/" file1.txt 
```

# vbscript - 自定义 vb 脚本标题栏标题

> ID：12678525
> 
> 赞同：3
> 
> 时间：2012-10-01T18:02:39.780
> 
> 标签：vbscript

可以通过将“Wscript.Echo”替换为“Msgbox”来消除“Windows Script Host”标题栏标题，但如果我想查看自定义标题栏标题该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:20:40.727

如有疑问，请阅读[文档](http://msdn.microsoft.com/en-us/library/sfw6660x%28v=vs.84%29.aspx)。您将标题指定为函数的^(第三)个参数`MsgBox()`：

```
MsgBox "Message text", vbOKOnly, "Title" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-28T14:21:39.393

在 Cscript 中，`.Echo`在控制台窗口中显示文本。
对于 Wscript，`.Echo`在对话窗口中显示文本。

要自定义此窗口，任一代码都可以：
`MsgBox "Your text", 32, "Window Title"`或
`WScript.CreateObject("WScript.Shell").Popup "Message",, "Some title", 48`

对于消息框，用户需要通过单击按钮或等效的键盘快捷键来关闭
对于弹出框，该框可以由用户关闭，也可以超时

每个命令中的数字告诉脚本引擎在 GUI 框中显示哪些按钮和图标。

# javascript - Javascript创建多个链接？

> ID：12678528
> 
> 赞同：1
> 
> 时间：2012-10-01T18:02:48.540
> 
> 标签：javascript, hyperlink, href

我需要找到一种方法来使用 javascript 为我的左侧导航创建多个链接。我将使用分隔符将链接分为几类。这是我当前的代码。

```
links = new Array();
links[1]="<span class='asep' style='border-top: 0px; margin-top: 0px;'>Welcome</span>";
links[2]="<a href='#'>Home</a>";
links[3]="<span class='asep'>Body Jewelry</span>";
links[4]="<a href='#'>Circular Barbells</a>";
links[5]="<a href='#'>Belly Button</a>";
links[6]="<a href='#'>Curved Barbells</a>";
links[7]="<span class='asep'>User Controls</span>";
links[8]="<a href='#' onclick='window.print(); return false'>Print This Page</a>";

function writeLinks() {
 document.getElementById('nav1').innerHTML = links[1] + links[2] + links[3] + links[4] + links[5] + links[6] + links[7] + links[8];
 document.getElementById('featured').innerHTML = ' <b>Featured Product</b><br><a href="#"><img src="icon1.gif" border="0"><br>Product Title</a>'; 
```

}

```
 setTimeout(writeLinks, 0); // Fires the function on page load without stopping other loads 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:25:04.587

您的方法的各个方面可以变得“更容易”：

```
links = new Array(); 
```

可以更好地写为`links = [];`. （几乎）你在 Javascript 中遇到的所有东西都已经是一个对象，所以冗长并不会增加清晰度。

```
links[1]="first..."
links[2]="second..."; 
```

可以使用 更好地编写`.push()`，这样您就不需要指定每个索引，例如：

```
links.push("first");
links.push("second"); 
```

或者，如果您一次完成所有操作，请使用数组文字，例如：

```
links = [
    "first",
    "second"
]; 
```

在我看来，不太好，但也是一种选择，可以是两者的混合，使用`.concat()`：

```
links = [
    "first",
    "second"
];

links = links.concat([
    "third",
    "fourth"
]); 
```

使用一组裸对象将事物组合在一起也可能是有意义的：

```
sections = [
    {
        heading: '<span class="asep">First section...</span>',
        links: [
            '<a href="#">First</a>',
            '<a href="#">Second</a>'
        ]
    },
    {
        heading: '<span class="asep">Second section...</span>',
        links: [
            '<a href="#">Third</a>',
            '<a href="#">Fourth</a>'
        ]
    },
];

function writeLinks(){
    var html = "";
    for( var i = 0; i < sections.length; i++ ){
        var section = sections[i];
        html += section.heading + section.links.join("");
    }
    document.getElementById('nav1').innerHTML = html;
}
setTimeout(writeLinks, 0); 
```

还要注意使用`.join("")`将数组的所有元素作为字符串连接在一起。

接下来，您的代码中有很多重复项。您可以仅指定不同的部分，例如：

```
sections = [
    {
        heading: "First section...",
        links: [
            "First",
            "Second"
        ]
    },
    /* ...snip... */
];

function writeLinks(){
    var html = "";
    for( var i = 0; i < sections.length; i++ ){
        var section = sections[i];
        html += '<span class="asep">' + section.heading + "</span>";
        for( var j = 0; j < section.links.length; j++ ){
            html += '<a href="#">' + section.links[j] + "</a>";
        }
    }
    document.getElementById('nav1').innerHTML = html;
}
setTimeout(writeLinks, 0); 
```

[您可以通过使用通用库（例如jQuery](http://jquery.com/)或[Prototype](http://prototypejs.org/)）摆脱一些原始 HTML 并简化一些循环等。这也将允许您实际检查文档是否已准备好供您对其进行操作，而不是使用那个脆弱的`setTimeout()`黑客。例如：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
/* ...snip... */
$(function(){
    var nav = $("<div />").attr("id", "nav1");
    $.each(sections, function(i,section){
        nav.append( $("<span />").addClass("asep").text(section.heading) );
        $.each(section.links, function(i,link){
            nav.append( $("<a />").attr("href", "#").text(link) );
        }
    }

    $("#nav1").replaceWith( nav );
});
</script> 
```

根据您的心情，所有这些都可能被认为“更容易”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:08:32.343

```
var arr = [];
arr[0] = <span class='asep'>Body Jewelry</span>;
arr[1] = <span class='asep'>Do Something</span>;

function writeLinks(){
    document.getElementById("nav1").innerHTML = arr.join("");
} 
```

Array.Join 比 concat operation 快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:07:47.757

这可能有点矫枉过正，但您可能希望查看支持模型和模板的客户端框架，例如backbone.js。然后您可以将所有链接存储在可以轻松更改的模型中（并通过事件自动为您更新视图），您还可以使用 underscore.js 模板，因此您不必将任何 html 编写为字符串文字。

# jquery - 如何制作具有可点击细节等的图像

> ID：12678530
> 
> 赞同：1
> 
> 时间：2012-10-01T18:02:55.770
> 
> 标签：jquery, image, html

我想在网上放一张包含房子等细节的图片，它应该可以点击图片中的它们，也可以左右移动并放大图片。

是否有任何可能使用 jquery 或 php 的好的代码演示，任何人都可以推荐我访问并查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:06:00.433

听起来你在寻找图像地图，也许吧？ [http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

```
<img src="neighborhood.jpg" width="145" height="126" alt="Neighborhood" usemap="#neighborhoodmap">

<map name="planetmap">
  <area shape="rect" coords="0,0,82,126" href="house1.html" alt="House1">
  <area shape="circle" coords="90,58,3" href="house2.html" alt="Round House1">
  <area shape="circle" coords="124,58,8" href="house3.html" alt="Round House2">
</map> 
```

**更新——**
这也是我发现的一个用于平移和缩放图像的 jquery 插件。不确定它是否会破坏图像映射：http: [//andrew.hedges.name/experiments/pan-zoom/](http://andrew.hedges.name/experiments/pan-zoom/)

如果您在 Google 上搜索“jquery pan zoom image”或类似内容，它们似乎更多

# ms-access - 连接子选择的语法错误

> ID：12678532
> 
> 赞同：1
> 
> 时间：2012-10-01T18:02:59.143
> 
> 标签：ms-access, join, db2, ms-access-2007, subquery

我有 4 个需要的字段 ->

1.  用户身份
2.  地点
3.  REPORT_MGR_USERID（报告经理用户 ID）
4.  经理位置（实际上并未存储）

要获得第 4 个，我需要使用 SQL 构建它。我可以通过“USERID”和“LOCATION”字段来做到这一点。

这是我的尝试。我正在通过链接的 DB2 表在 Access 2007 中运行查询。

```
SELECT DISTINCT employee_table.LOCATION, employee_table.USERID, employee_table.REPORT_MGR_USERID,  manager_location 
FROM employee_table main
JOIN  employee_table (SELECT DISTINCT employee_table.LOCATION FROM employee_table AS sub WHERE sub.USERID = main.REPORT_MGR_USERID) manager_location 
```

当我运行它时，它给了我这个错误->

```
Syntax error in FROM clause 
```

然后突出显示 JOIN 关键字。

从我看过的所有内容来看，这看起来都是正确的......

编辑：

感谢 David W，这是供将来参考的工作版本->

```
SELECT DISTINCT main.LOCATION, main.USERID, main.REPORT_MGR_USERID,  manager_data.LOCATION 
FROM employee_table main
INNER JOIN employee_table manager_data
ON main.REPORT_MGR_USERID=manager_data.USERID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:07:08.423

您在第一个 JOIN 子句中同时指定了表名`employee_table`和子选择。`(SELECT DISTINCT....)`并且没有 ON 条件，尽管这可能是您想要的？

该 JOIN 中的规范`employee_table`可能只是一个错字，因为您为子选择提供了别名...

**编辑**灯泡刚刚亮起，我了解 OP 想要什么。开始了：

```
SELECT DISTINCT main.LOCATION, main.USERID, main.REPORT_MGR_USERID, manager_data.manager_location 
   FROM employee_table main
   INNER JOIN employee_table manager_data
     on main.REPORT_MGR_USERID=manager_data.USERID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:19:43.110

Access db 引擎无法识别`JOIN`为`INNER JOIN`. 任何时候`JOIN`单独使用都会引发语法错误。将其更改为`INNER JOIN`.

但是，我怀疑您在更正后可能仍然遇到问题。连接表达式的其余部分令人困惑，我不明白它的目的是什么。因此，在解决`JOIN`问题后，您可能仍然会遇到另一个语法错误。

# xcode - 视网膜支持 imageNamed @2x 不起作用

> ID：12678533
> 
> 赞同：3
> 
> 时间：2012-10-01T18:03:01.550
> 
> 标签：xcode, xcode4.2, resolution, retina-display, imagenamed

> **可能重复：**
> [iOS 5.1 与 Xcode 4.2 和 iPad 3 中的视网膜](https://stackoverflow.com/questions/9611596/ios-5-1-with-xcode-4-2-and-retina-in-ipad-3)

我正在尝试在 iPad 2 上加载我的应用程序（因为它在 iPad 3 上运行良好）。我缩小了图像，现在有两组图像，例如：image.png 和 image@2x.png。当我尝试加载图像时：

```
someImageView.image = [UIImage imageNamed:@"image.png"]; 
```

或者通过 IB，它没有给我预期的结果（比如根据[此处](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html#//apple_ref/doc/uid/TP40010156-CH15-SW8)所述的 iPad 显示器选择正确版本的图像），并且无论哪个 iPad 运行应用程序都只显示 image.png，尽管当我尝试通过以下方式导入图像：

```
NSString* imagePath = [[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"];
UIImage* someImage = [[UIImage alloc] initWithContentsOfFile:imagePath];
someImageView.image = someImage; 
```

这很好用，当我在 iPad 3 上运行应用程序时，它使用 @2x png 文件。虽然这可行，但我不确定我是否必须分配和释放我使用的每一个图像，因为我通过 IB 使用了一些图像。这是正常的行为吗？

我使用了 SDK 4、4.2 和 5，但没有任何改变，我也在使用 Xcode 4.2，因为我不想切换到 Lion。

*   我试过不使用`someImageView.image = [UIImage imageNamed:@"image.png"];`，只在 IB 插槽中选择图像“image.png”。没用。
*   我尝试只输入`image`IB 插槽。没用。无论如何，它都会获取 image.png 。
*   我尝试使用`someImageView.image = [UIImage imageNamed:@"image@2x.png"];`它在任何设备中显示 2x 图像。
*   我尝试使用`image@2x~ipad.png`and `image~ipad.png`。没用。
*   所有图像集命名正确，大小正确，并已全部导入到同一组/文件夹中的项目中。
*   它不是一个通用的，而是一个 iPad 应用程序。
*   在此过程中，我已经多次清理了构建。

任何帮助是极大的赞赏！

*更新：`UIImage`当返回 2 时切换到 @2x `[UIScreen mainScreen].scale`。当我检查它时，它返回 1，这就是 @2x 未激活的原因。那么有谁知道4.2是否不识别iPad3视网膜显示器？[我在这里](https://stackoverflow.com/questions/11117041/why-is-uiscale-mainscreen-scale-1-on-an-ipad-3-with-xcode-4-2)找到了类似的东西。

*更新 2：我设法通过将 SDK 5.1 合并到 Xcode 中并将其用作基础 SDK 来实现此功能。当我在 SDKs 文件夹中同时拥有 SDK 5 和 5.1 时，它不起作用，当我删除 SDK 5 版本时它起到了作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:21:04.850

您是否尝试将`~ipad`后缀添加到您的图像？所以你的视网膜 iPad 图像应该被重命名并像这样调用：

```
[UIImage imageNamed:@"image@2x~ipad.png"] 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:47:41.717

默认情况下它不起作用，因为 Xcode 4.3.1 是第一个支持新 iPad (retina) 的版本

如果你想让它正常工作，[请检查这个答案](https://stackoverflow.com/questions/9613565/is-it-possible-to-get-the-ios-5-1-sdk-for-xcode-4-2-on-snow-leopard)

# ruby - Rake 太冗长，回显测试命令

> ID：12678536
> 
> 赞同：1
> 
> 时间：2012-10-01T18:03:04.233
> 
> 标签：ruby, rake, testunit

Rake 太冗长了：

```
$ bundle exec rake test:units
/Users/jared/.rvm/rubies/ruby-1.8.7-p370/bin/ruby -I"lib:test" -I"/Users/jared/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib" "/Users/jared/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" 
Loaded suite /Users/jared/.rvm/gems/ruby-1.8.7-p370@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader
Started
..................................... 
```

这就是我要的：

```
$ bundle exec rake test:units
..................................... 
```

我仍然希望看到测试错误+失败、弃用警告或任意“stdout sentinels”。

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:12:48.963

如果不修改 rake 任务和/或测试库，您将无法获得此信息。只需找出不需要的行。

```
bundle exec rake test:units | grep -vP "^(Started|Loaded|\/)" 
```

# c# - 使用 SQLite 比较不同表中的值

> ID：12678555
> 
> 赞同：1
> 
> 时间：2012-10-01T18:04:16.423
> 
> 标签：c#, sqlite

我还是 SQLite 的新手，更具体地说是 SQL，所以请放轻松。我的 SQLite 数据库中有三个表，如下所示：

```
TableA
DateAdded  Data1  Data2
1/1/2012   a      b
1/3/2012   c      d
1/2/2012   e      f

TableB
DateAdded  Data3  Data4
1/6/2012   g      h
1/5/2012   i      j
1/4/2012   k      l

TableC
DateAdded  Data5  Data6
1/8/2012   m      n
1/9/2012   o      p
1/7/2012   q      r 
```

每个表都有一个作为数据类型的`DateAdded`列。`datetime`我想获取所有三个表的最新`datetime`值。

现在我一次做一个表并比较结果：

```
private DateTime GetEndTime()
{
    DateTime retVal = new DateTime();
    DateTime sa = new DateTime();
    DateTime gps = new DateTime();

    SQLiteCommand cmd = mySQL.CreateCMD();
    SQLiteDataReader dbReader = mySQL.ExecuteQuerySQL("SELECT DateAdded FROM DF ORDER BY ROWID DESC LIMIT 1", cmd);
    if (dbReader.HasRows)
    {
        dbReader.Read();
        retVal = dbReader.GetDateTime(0);
    }
    dbReader.Close();

    dbReader = mySQL.ExecuteQuerySQL("SELECT DateAdded FROM SA ORDER BY ROWID DESC LIMIT 1", cmd);
    if (dbReader.HasRows)
    {
        dbReader.Read();
        sa = dbReader.GetDateTime(0);
    }
    dbReader.Close();

    if (retVal < sa)
        retVal = sa;

    dbReader = mySQL.ExecuteQuerySQL("SELECT DateAdded FROM GPS ORDER BY ROWID DESC LIMIT 1", cmd);
    if (dbReader.HasRows)
    {
        dbReader.Read();
        gps = dbReader.GetDateTime(0);
    }
    dbReader.Close();
    mySQL.disposeCMD(cmd);

    if (retVal < gps)
        retVal = gps;

    return retVal;
} 
```

我*知道*一定有更好的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:28:38.363

您可以从每个表中选择 Max DateAdded，然后合并这些行并选择最大值，如下所示：

```
select MAX(MaxDateAdded) from
(
 select MAX(DateAdded) as MaxDateAdded from a 
 union
 select MAX(DateAdded) as MaxDateAdded from b
 union
 select MAX(DateAdded) as MaxDateAdded from c
) AS UnionedDateAddedTables 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:27:01.880

```
SELECT MAX(DateAdded)
FROM
(
SELECT MAX(DateAdded) AS DateAdded FROM tableA
UNION
SELECT MAX(DateAdded) AS DateAdded FROM tableb
UNION
SELECT MAX(DateAdded) AS DateAdded FROM tablec
) 
```

**编辑**：

我正在更换：

```
Instead of selecting all rows 
```

和

```
SELECT MAX(DateAdded) AS DateAdded FROm table 
```

感谢@dugas

# php - 在重负载下检索mysql数据的正确方法

> ID：12678559
> 
> 赞同：0
> 
> 时间：2012-10-01T18:04:41.760
> 
> 标签：php, mysql

我已经使用 PHP-MySQL 构建了一个系统。该系统承受着非常重的负载，每分钟有数千次选择、更新、插入、删除。

我想优化这个系统，让它更快，并减少服务器上的负载。我已经引入了memcache，但是还是需要mysql数据的。

所以我的问题是，在这种情况下哪种方法最好。目前我的查询看起来像这样：

```
$q = mysql_query($sql);
while(mysql_fetch_array($q)) {... 
```

我读过使用 mysql_fetch_assoc (?)

但是，当我开始优化这个系统时，也许有一种完全不同的方法？

谢谢大家-（为我有限的英语能力道歉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:12:53.597

`mysql_fetch_assoc`vs`mysql_fetch_array`将复制更少的数据，从而使用更少的内存。由于数据是关联的并且`index`在数组中呈现，因此您将获得一些微小的优化，尽管如果您的数据集很大，这将有所帮助。

*   如果可以的话，尝试使用`natural`排序（AKA 避免在查询语句中排序）和`LIMIT`你的结果集
*   批量查询：而是在同一张表上运行 100 次插入，尝试做一些小的插入。
*   如果可以的话，缓存缓存缓存：使用 redis 或 memcached。
*   如果您生成的页面可以被视为静态页面，请尝试使用 HTTP 标头以避免浏览器一直请求您的站点
*   等等等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:47:24.710

我建议您使用 mysql 关键字 LIMIT 来限制结果集。

向 mysql 返回结果集添加分页将使您的应用程序更轻，由于要获取的行更少，ui 将加载更快，并且 mysql 服务器只会在需要时接收选择查询。基本上这是如何使用限制的语法。

SELECT * FROM Person LIMIT X,Y

其中 X 是要检索的总行数，Y 是偏移量。

例子：

```
SELECT * FROM Person LIMIT 10, 0 
```

此查询将返回表 Person 的前十行，并且：

```
SELECT * FROM Person LIMIT 10, 10 
```

将显示下一个 10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T14:19:04.080

我一直在对从 PHP 中的 MySQL 获取信息的各种方法进行一些计时测试。目标是找到将一列数据传输到简单数组中的最快方法。我已经针对 enSEMBL 数据库对其进行了测试，该数据库非常有用。

以下代码对于方法 1 到 8（9 使用 GROUP_CONCAT 和 10 使用 PDO）很常见：

```
$query = "SELECT DISTINCT `name` FROM species LIMIT 5000";
$result = $mysqli->query($query);
*Method code*
print_r(array_filter($species)); 
```

方法一：教科书法

```
while ($row = $result->fetch_row()) {
         $species[] = $row[0];
      } 
```

方法 2：while 和 reset（注意一些 IDE 在这里检测到错误）

```
while ($species[] = reset($result->fetch_row())) ; 
```

方法3：foreach和reset

```
foreach ($result->fetch_all() as $value) $species[] = reset($value); 
```

方法四：while、foreach、reset

```
while ($species[] = $result->fetch_row()) ;
foreach ($species as $key => $value) $species[$key] = reset($value); 
```

方法五：while 和 index

```
while ($row = $result->fetch_row()) $species[] = $row[0]; 
```

方法六：foreach 和 index

```
foreach ($result->fetch_all() as $value) $species[] = $value[0]; 
```

方法七：递归数组

```
$species = call_user_func_array('array_merge', $result->fetch_all()); 
```

方法8：array_column

```
$species = array_column($result->fetch_all(), 0); 
```

方法 9：在查询中使用 GROUP_CONCAT。

```
$species = explode(',', $result->fetch_row()[0]); 
```

方法 10：PDO

```
$species = $sth->fetchAll(PDO::FETCH_COLUMN, 0); 
```

令人惊讶的是，方法 1（教科书）始终比实际上相同的方法 5 长约 4 倍，但与方法 10 (PDO) 花费的时间大致相同。

方法 2 一直是最慢的方法，长 50 倍，大概是因为系统在某处写警告。

方法 4（两个循环）是第二慢的，耗时 10 倍。

如前所述，方法 1（教科书）和 10（PDO）排在第三位。

方法 9 是第四慢的（长 2 倍，缺点是在没有任何警告的情况下达到 GROUP_CONCAT 限制）。

然而，最快的方法并不一致。从 3、5、6、7 和 8 中选择。

方法 8 (array_column) 通常是最快的方法，但并非总是如此。但是我认为它是最优雅的方法，并且提供了更多的灵活性，因为它可以使用您的查询选择的任何两列返回一个关联数组（但不要弄乱查询中的顺序！）

# python - Python - 选择字典中的其他元素

> ID：12678561
> 
> 赞同：3
> 
> 时间：2012-10-01T18:05:01.633
> 
> 标签：python, dictionary, iterator

我是 python 的初学者，我有一本字典：

```
players = {"player 1":0, "player 2":0} 
```

在这段代码中，我将描述我想要实现的目标：

```
def play_ghost():
    for p_id in cycle(players):
        ##code..
        if end_game() : ##if this is true, add 1 to the OTHER player
            ##what to write here ? 
```

抱歉，如果我的问题有点明显，但我真的不想使用`if`语句等来实现这一点。我正在寻找一个方法或可以选择其他元素的东西（比如在 JavaScript 中我可以选择同级元素）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:47:17.793

试试这个：

```
wins = {"player1": 0, "player2": 0}
this, other = "player1", "player2"
for i in range(rounds_count): # really, variable i don't use
    this, other = other, this # swap players
    if end_game():
        wins[this] +=1
    else:
        wins[other] += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:09:45.373

我认为你真的应该使用有序类型。

```
players = [0, 0]

players[1] # player 2, because lists are 0-based
players[1:] # all players but the first
# if you want to do more complex selects, do this, but DON'T for simple stuff
[player for index, player in enumerate(players) if index == 1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:10:16.390

你应该使用`lists`.
列表类似于`dictionaries`; 主要区别在于它们按数字而不是键索引。所以：

```
players = [0, 0]
def play_ghost():
    for index in range(len(players)):
    #code...
        if end_game():
            players[(index + 1) % 2] += 1  # Uses mode to select other player 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T18:14:09.540

咬紧牙关，只定义一个`other`dict（这还不错——它使您的其余代码非常易读）：

```
players = {"player 1":0, "player 2":0}
names = players.keys()
other = dict(zip(names, names[::-1]))
# other  = {'player 1': 'player 2', 'player 2': 'player 1'}

def play_ghost():
    for p_id in cycle(players):
        ##code..
        if end_game() : ##if this is true, add 1 to the OTHER player
            players[other[p_id]] += 1 
```

# web-services - 使用 Axis2 Webservice 生成的存根为重定向 URL 形成新连接...需要相同的 TCP 连接...！

> ID：12678565
> 
> 赞同：1
> 
> 时间：2012-10-01T18:05:32.043
> 
> 标签：web-services, soap, axis2

我非常坚持使用 Axis2 框架从服务器 WSDL 生成客户端存根的基于 SOAP 的集成。场景如下：

1.  首先总是有一个登录 API 调用，它在 SOAP 正文中给出成功响应，在 HTTP 标头中给出临时重定向。还提供了一个 URL，其中包含 HTTP 标头的 Location 字段中的会话 ID。
2.  需要在此重定向位置进行下一次 API 调用。在相同的 TCP 连接中，以获得正确的响应。
    1.  现在，问题是，作为使用 Axis2 生成的存根的 Web 服务实现的一部分，我需要重新加载此重定向 URL 并将其重新实例化为 --- "stub=new Stub(newurl)"
    2.  一旦完成，它就会创建一个新的 TCP 连接，因此，下一个请求会给出“会话 ID 无效”的响应，因为它与登录 API 不同步。

我已经尝试了该论坛中提到的所有解决方案，但没有任何效果。例如——

* * *

```
MultiThreadedHttpConnectionManager httpConnectionManager = new MultiThreadedHttpConnectionManager();
            HttpClient httpClient = new HttpClient(httpConnectionManager);

            ServiceClient serviceClient = stub._getServiceClient();
            Options opts = stub._getServiceClient().getOptions();

            opts.setTo(new EndpointReference(prop.getProperty("target_end_point_url")));
            opts.setProperty(HTTPConstants.REUSE_HTTP_CLIENT, Constants.VALUE_TRUE);
            opts.setProperty(HTTPConstants.CACHED_HTTP_CLIENT, httpClient);

            serviceClient.setOptions(opts);

            stub._setServiceClient(serviceClient); 
```

* * *

同样，我也尝试了许多其他选择。但这根本没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T06:14:18.053

面临完全相同的问题。以下步骤解决了该问题。1.使用HttpClient，进行登录。不要使用存根对象来执行登录。2\. 使用 Location Header URL，创建新的存根对象，即 stub = new Stub(locationURL)。（您现有的选项设置应保留。） 3\. 有一个默认超时，服务器断开 TCP 连接。就我而言，它是 50 秒。因此，一旦我在步骤 1 中执行登录，我就会每 40 秒执行一次计时器，以使用相同 HttpClient 对象的 HeadMethod 向新位置 URL 发送一个空请求。

# c - C: read() 挂起，没有从 unix 上的串口获取输入

> ID：12678567
> 
> 赞同：3
> 
> 时间：2012-10-01T18:05:37.240
> 
> 标签：c, unix, serial-port

我在 Ubuntu 12 系统上使用 C 从串行端口获取数据时遇到了一些问题。

我正在使用 open() 和 read()，这是我的代码：

```
Fd = open("/dev/ttyUSB0", O_RDONLY | O_NOCTTY);
if (Fd == -1) {
    printf("Could not open serial port: %s\n", strerror(errno));
    return 1;
}

fcntl(Fd, F_SETFL, 0);

char buf;
while (1) {
    read(Fd, &buf, 1);
    printf("%c", buf);
} 
```

但是 - 我的串行设备设置为发送“Boot.\r\n”后跟“To send:”，但是当我连接设备并启动程序时，我只得到第一行（“Boot.”）然后不再。如果我启动 gtkterm/picocom，我会立即得到两条线。

我还尝试使用以下方法为 SIGTERM 添加信号处理程序以正确关闭端口：

```
void signal_callback_handler(int signum) {
    printf("Caught SIGTERM\n");
    close(Fd);
    exit(signum);
} 
```

和

```
signal(SIGINT, signal_callback_handler); 
```

使用它，当我按下 CTRL-C 时，我得到以下信息：

```
Boot.
^CTo send: Caught SIGTERM 
```

我也尝试过先设置端口，使用：

```
struct termios port_settings;          // structure to store the port settings in
cfsetispeed(&port_settings, B115200);  // set baud rates
cfsetospeed(&port_settings, B115200);
port_settings.c_cflag &= ~PARENB;      // set no parity, stop bits, data bits
port_settings.c_cflag &= ~CSTOPB;
port_settings.c_cflag &= ~CSIZE;
port_settings.c_cflag |= CS8;
tcsetattr(Fd, TCSANOW, &port_settings);// apply the settings to the port 
```

这只会使情况变得更糟-我收到垃圾邮件�:(

我会非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:12:39.443

看起来你`printf`的只是没有被刷新，直到它碰到换行符。这就是为什么你得到输出的第一部分，而不是第二部分的原因。您可以`fflush(stdout)`在您之后添加`printf`以立即查看输出。

# iphone - 如何在我的项目中链接 kal statiac 库

> ID：12678570
> 
> 赞同：3
> 
> 时间：2012-10-01T18:05:46.517
> 
> 标签：iphone

我正在为我的项目使用 Kal 日历组件，我取自

```
 https://github.com/klazuka/Kal 
```

我正在使用 xcode4.5 ，对第 3 步和第 6 步感到困惑

```
 3:   Now you need to link the Kal static library to your project. Select the Kal.xcodeproj file that you just added to the sidebar. Under the "Details" table, you will see libKal.a. Check the checkbox on the far right for this file. This will tell Xcode to link against Kal when building your app.

       6:Finally, we need to tell your project where to find the Kal headers. Open your "Project Settings" and go to the "Build" tab. Look for "Header Search Paths" and double-click it. Add the relative path from your project's directory to the "Kal/src" directory. 
```

第 3 步在 xcode4.5 中我不清楚，我对第 6 步感到困惑，我应该提供完整路径吗？请帮忙

# regex - 使用 key up 事件检测 textarea 中的标签

> ID：12678571
> 
> 赞同：1
> 
> 时间：2012-10-01T18:05:48.380
> 
> 标签：regex, event-handling

我想检测选定文本中的标签以更改相关的标签按钮样式

对于这项工作，我正在使用按键事件并在 tagController 函数中发送 textArea 内容以检测所选文本中的标签

但它不能正常工作......

模式：

```
 var selMark = [
"\\[b\\](.*?)\\[\\/b\\]",
"\\[p\\](.*?)\\[\\/p\\]"
]; 
```

标签控制器插件：

```
jQuery.fn.extend({

tagController : function(){

    if(document.selection){
            this.focus();
            sel = document.selection.createRange();

            for(i=0; i<selMark.length; i++){
             tag = selMark[i].substring(3,1).replace("[","").toUpperCase();
             if((new RegExp(selMark[i],"gi")).test(sel.text)){
                if(!$("input.tag[value="+tag+"]").hasClass('active')){
                $("input.tag[value="+tag+"]").addClass('active');
                }
             }else{
                $("input.tag[value="+tag+"]").removeClass('active');
                 }
            }
        }else if(this.selectionStart || this.selectionStart == '0'){
            this.focus();
            var startPos = this.selectionStart, endPos = this.selectionEnd;
            sel = this.value.substring(startPos, endPos);
            for(i=0; i<selMark.length; i++){
             tag = selMark[i].substring(3,1).replace("[","").toUpperCase();
             if((new RegExp(selMark[i],"gi")).test(sel)){
                if(!$("input.tag[value="+tag+"]").hasClass('active')){
                $("input.tag[value="+tag+"]").addClass('active');
                }
             }else{
                $("input.tag[value="+tag+"]").removeClass('active');
                 }
            }
    }

    } }); 
```

用法 ：

```
$(function(){
 var source  = $('#txt');   
   source.keyup(function(){
     source.tagController();
     });
}); 
```

本节用于检测模式列表中的标签并更改按钮样式

```
for(i=0; i<selMark.length; i++){
             tag = selMark[i].substring(3,1).replace("[","").toUpperCase();
             if((new RegExp(selMark[i],"gi")).test(sel)){
                if(!$("input.tag[value="+tag+"]").hasClass('active')){
                $("input.tag[value="+tag+"]").addClass('active');
                }
             }else{
                $("input.tag[value="+tag+"]").removeClass('active');
                 }
            } 
```

谢谢你的帮助 ：）

# javascript - 每种方法都需要声明原型

> ID：12678572
> 
> 赞同：1
> 
> 时间：2012-10-01T18:05:50.580
> 
> 标签：javascript

有必要将“原型”附加到类的每个方法。或者命名空间在下面的示例中就足够了（完整示例请参阅下面的链接）。我知道这是一种很好的做法，但是继承真的需要在每个方法中声明关键字“原型”.. 真正必要的继承是什么

```
if(animal === undefined) var animal  = {};

animal.Mammal.prototype.haveABaby=function(){ 
    var newBaby=new Mammal("Baby "+this.name);
    this.offspring.push(newBaby);
    return newBaby;
} 
animal.Mammal.prototype.toString=function(){ 
    return '[Mammal "'+this.name+'"]';
} 
```

[http://phrogz.net/JS/classes/OOPinJS2.html](http://phrogz.net/JS/classes/OOPinJS2.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:07:23.750

原型与命名空间无关。

您在原型上定义一个函数，以便使用创建的所有对象`new Mammal()`都具有此函数（方法）：

```
Mammal.prototype.haveABaby=function(){
...

var phoque = new Mammal();
var d = phoque.haveABaby(); 
```

在这种情况下，所有实例将共享相同的功能。如果您在实例上定义了该函数，您将使用更多内存（不一定很重要），并且实例创建时间会更长。

如果你愿意，你可以将它与命名空间结合起来：

```
animal = animal || {}; // note the simplification
animal.Mammal.prototype.haveABaby=function(){ 
...
var phoque = new animal.Mammal();
var d = phoque.haveABaby(); 
```

但这是两个不同的话题。

[这里很好地描述了原型和继承之间的联系。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:10:29.477

它是必需的。

如果您没有*原型*，则该函数只会添加到当前实例中。使用*原型*意味着当您使用*new*关键字时，新对象也将获得该函数的副本。

IE：

```
Mammal.toString = function() {...}; 
```

会将*toString*函数放在*Mammal*上- 但不会*将*toString*函数放在**Mammal*的每个实例上。例如使用上面的非原型声明：

```
var aDog = new Mammal();
aDog.toString()  //result in undefined 
```

# opengl - ATI glsl 点精灵问题

> ID：12678573
> 
> 赞同：1
> 
> 时间：2012-10-01T18:05:56.290
> 
> 标签：opengl, glsl, sprite, point, glpointsize

我刚刚将我的渲染代码移动到我的笔记本电脑上，并且遇到了 opengl 和 glsl 的问题。

我有一个这样的顶点着色器（简化）：

```
uniform float tile_size;

void main(void) {
gl_PointSize = tile_size;
// gl_PointSize = 12;
} 
```

和一个片段着色器，它使用 gl_Pointcoord 读取纹理并设置片段颜色。在我的 c++ 程序中，我尝试按如下方式绑定 tile_size：

```
glEnable(GL_TEXTURE_2D); 
glEnable(GL_POINT_SPRITE);
glEnable(GL_VERTEX_PROGRAM_POINT_SIZE);

GLint unif_tilesize = glGetUniformLocation(*shader program*, "tile_size");
glUniform1f(unif_tilesize, 12); 
```

（只是为了澄清我已经设置了一个使用 glUseProgram 的程序，显示的只是关于这个特殊制服的片段）

现在像这样设置我得到一个像素点并且发现opengl无法绑定unif_tilesize（它被设置为-1）。

如果我在我的顶点着色器中交换评论，我会得到 12px 点的精灵。

特别是在我的另一台计算机上*完全相同的*代码工作得很好。我笔记本电脑上的 opengl 版本是 2.1.8304，它运行的是 ATI radeon x1200（参见我桌面上的 nvidia 8800gt）（如果这是相关的......）。

**编辑**我更改了问题标题以更好地反映问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:34:57.500

`glUseProgram`你在设置制服之前忘记打电话了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:49:29.337

因此，在玩了一天之后，尽管我还没有解决无法将制服绑定到 gl_PointSize 的原始问题，但我已经修改了现有的点精灵渲染器以在我的 ATI 卡上工作（一个旧的 x1200）并认为我会分享一些我学到的东西。

我认为有关 gl_PointSize 的某些内容已损坏（至少在我的卡上）；在顶点着色器中，我能够使用 8px 点精灵`gl_PointSize=8.0;`，但是`gl_PointSize=tile_size;`无论我试图绑定到统一的 tile_size，使用都给了我 1px 的精灵。

幸运的是，我不需要为每个顶点设置不同大小的图块，所以我调用`glPointSize(tile_size)`了 main.cpp，这很好。

为了`gl_PointCoord`在我的片段着色器中开始工作（即返回 (0,0) 以外的值），我必须调用`glTexEnvf( GL_POINT_SPRITE_ARB, GL_COORD_REPLACE_ARB, GL_TRUE );`我的 main.cpp。

一直存在一个荒谬的问题，我的变量在我的顶点着色器和片段着色器之间的某个地方搞砸了。经过长时间的“猜测在谷歌中输入什么以获取相关信息”之后，我发现（并很快丢失）一个论坛，有人说在某些情况下，如果你不使用`gl_TexCoord[0]`至少一个着色器，你的变化将被破坏。

为了解决这个问题，我在片段着色器的末尾添加了一行：

```
_coord = gl_TexCoord[0].xy; 
```

其中 _coord 是未使用的 vec2。（注意 gl_Texcoord 不在其他任何地方使用）。

没有这条线，我所有的颜色都变成蓝色，我的纹理查找就坏了。

# c# - 我将如何在 PHP 中生成相同的令牌？（来自.NET）

> ID：12678580
> 
> 赞同：6
> 
> 时间：2012-10-01T18:06:22.020
> 
> 标签：c#, php, hash, cryptography, hmac

我在 PHP 中计算与在 C# .NET 中相同的哈希时遇到了一些麻烦。

在 C# 中，我有以下内容：

```
HMAC hasher = new HMACSHA256(Encoding.UTF8.GetBytes("secret")); //key
byte[] data = hasher.ComputeHash(Encoding.UTF8.GetBytes("2012-10-01T17:48:56")); //timestamp
Convert.ToBase64String(data); //computed token 
```

这会产生类似的东西：

> yBV7ZfAyT1FwO5sGEVd3aPYUfBz9geN6ghK9RO68jwo=

* * *

在 PHP 中，我认为这会以相同的方式计算哈希：

```
$hmac = hash_hmac("sha256", "2012-10-01T17:48:56", "secret");
$hmac = base64_encode($hmac); 
```

然而，它产生了一个非常不同的、更大的散列：

> YzgxNTdiNjVmMDMyNGY1MTcwM2I5YjA2MTE1Nzc3NjhmNjE0N2MxY2ZkODFlMzdhODIxMmJkNDRlZWJjOGYwYQ==

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:47:57.963

您是否尝试过将 hash_hmac 与原始二进制数据输出一起使用？

```
$hmac = hash_hmac("sha256", "2012-10-01T17:48:56", "secret", true);
$hmac = base64_encode($hmac); 
```

这似乎产生了更像 .NET 的输出：

```
NASzFnV3Flw5ppkTIja5/aaFELPNIpfQb+kbsXCAm0Q= 
```

就我而言。

# iphone - ARC 警告 - “删除未使用的自动释放不安全”

> ID：12678588
> 
> 赞同：0
> 
> 时间：2012-10-01T18:07:13.277
> 
> 标签：iphone, objective-c, ios, xcode

我收到以下警告，但我不知道从哪里开始，有什么想法吗？

```
NSObject+Be.m:36:3: [rewriter] it is not safe to remove an unused 'autorelease' message; its receiver may be destroyed immediately
NSObject+Be.m:35:40: [rewriter] NSInvocation's getReturnValue is not safe to be used with an object with ownership other than __unsafe_unretained
NSObject+Be.m:36:4: ARC forbids explicit message send of 'autorelease' 
```

代码来自这里.... [https://github.com/tylerneylon/moriarty/blob/c0d6daf65d86c22b8e5853aef00980f059c92fbc/NSObject%2BBe.m](https://github.com/tylerneylon/moriarty/blob/c0d6daf65d86c22b8e5853aef00980f059c92fbc/NSObject%2BBe.m)

```
#import "NSObject+Be.h"

@interface BeProxy : NSProxy {
  id target;
}

+ (BeProxy *)beProxyForClass:(Class)class;

- (void)forwardInvocation:(NSInvocation *)anInvocation;
- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector;

@end

@implementation BeProxy

+ (BeProxy *)beProxyForClass:(Class)class {
  BeProxy *beProxy = [BeProxy alloc];
  beProxy->target = [class alloc];
  return beProxy;
}
//

// We assume the method called is an init method.  The return value
// may be a new value for self.
- (void)forwardInvocation:(NSInvocation *)anInvocation {
  [anInvocation setTarget:target];
  [anInvocation invoke];
  id object;
  [anInvocation getReturnValue:(void *)&object];   //HERE
  [object autorelease];                            //HERE
  [self release];
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
  return [target methodSignatureForSelector:aSelector];
}

@end

//    

@implementation NSObject (Be)

+ (id)be {
  return [BeProxy beProxyForClass:[self class]];
}

+ (id)beInit {
  return [[[self class] new] autorelease];
}

- (id)beCopy {
  return [[self copy] autorelease];
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:16:32.060

从文档中：

> NSObject+Be 此类别旨在帮助进行内存管理。具体来说，这使得仅使用少数允许所有权的方法之外的自动释放对象变得容易。

所以发布的代码是为了帮助手动保留计数内存管理。那么不要用ARC编译它。

# php - 加快我在 MySQL 中的索引 - CRC 还是 MD5？

> ID：12678589
> 
> 赞同：7
> 
> 时间：2012-10-01T18:07:19.870
> 
> 标签：php, mysql, crc32

我有一张巨大的桌子，里面有 8 300 000 行（永远不会被编辑或删除）。

我的第一列看起来很相似`P300-4312B_X16_S`，并且该条目不是唯一的，因此我在此字段上使用了常规 INDEX。

但是，MySQL 使用二进制字段而不是 varchar 更快，因此我将我的 INDEX 编码为 MD5`BINARY(16)`用于存储数据。

今天早上，我第一次开始使用CRC32，我看到CRC32可以输出为8个字符的十六进制字符串。

我的问题：如果我使用 CRC32 而不是 MD5，它会更快。但是，当 CRC32 运行时，假设 2 000 000 个唯一值，结果将是唯一的，或者有时我会为两个不同的字符串提供两次相同的字符串？我这样问是因为结果只有 8 个字符 (32b) 长，而不是像 MD5 那样的 32(128b)。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T22:12:10.660

预期的冲突数量是可能的检查值数量上的对数。因此，对于 2,000,000 个值，有 (2000000 * 1999999) / 2 对，大约为 2x10 ^(12)。对于 32 位 CRC，预期的冲突次数超过 2 ^(32)，即 466。因此，在这种情况下，您基本上可以保证发生冲突。

对于 128 位 MD5 校验值，预期的冲突次数约为 6x10 ^(-27)。对于期望数的小值，这也是一次碰撞的概率。

如果碰撞概率非常低对您很重要，那么您需要选择除 CRC-32 之外的其他东西。

不过，您不需要 MD5 的开销，因为它的加密强度对您的应用程序并不重要。您并不真正关心是否有人恶意可以找到一种方法来伪造与另一个条目具有相同检查值的条目。因此，您可以使用为此目的而设计的 64 位非加密哈希，它运行得更快，并且在您的 2,000,000 个值的情况下会产生 10 ^(-7)的冲突概率。或者您可以使用 128 位非加密散列并获得与 MD5 相同的概率，但要快得多。看看[CityHash 系列](https://code.google.com/p/cityhash/)的哈希算法。

但是请注意，在所有情况下，碰撞的概率都不是零。您应该考虑代码冲突的后果。

# mysql - 更改 MySQL 中的字符集可能会导致失败？

> ID：12678593
> 
> 赞同：1
> 
> 时间：2012-10-01T18:07:39.097
> 
> 标签：mysql

在解决“？”问题时 出现在 Web 应用程序生成的 PDF 中的标记，我发现数据库中的字符编码混杂。大多数是拉丁语，有些是 utf，还有一些是其他的。

在提到这个出色的问题和响应数组（[在 my.cnf 中将 MySQL 默认字符集更改为 UTF-8？](https://stackoverflow.com/questions/3513773/change-mysql-default-character-set-to-utf8-in-my-cnf)）时，​​我现在对接下来需要发生的事情有了相当清晰的认识。我不完全清楚的是，通过 ALTER TABLE 更改 my.cnf 和表本身的字符集是否可能会破坏数据或创建其他“陷阱”。我正在处理数百个表和大约 10gb 的数据。

这通常是一个“安全”的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:20:31.653

自发布以来已经 45 天没有答案，所以我将发布一个链接，指向[Nic Jansma](http://NicJ.net)撰写的一篇非常全面且内容丰富的文章，该文章讲述了他从 Latin1 转换为 UTF-8 的经验。

注意这个警告：

> “如果你只是在没有 BINARY 转换的情况下将列强制为 UTF-8，MySQL 会将你的“latin1”字符转换为“UTF-8”，最终得到不正确的转换数据。”

这篇文章可以在[这里](http://nicj.net/mysql-converting-an-incorrect-latin1-column-to-utf8/)找到。

# cakephp-2.0 - 如何创建没有数据库表的 cakephp 2.0 模型？

> ID：12678597
> 
> 赞同：4
> 
> 时间：2012-10-01T18:07:52.703
> 
> 标签：cakephp-2.0

如何使用 $useTable = false 从模型中检索数据

我试过了，实际上，它不起作用。

```
class Blablah extends AppModel {
   public $useTable = false;
   public $data = array(
           array( "id"=>0, "fied1" => "bla", "field2" =>"blah"), ...
   );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:30:04.427

StackOverflow上已经有[关于这个主题的很好的答案。](https://stackoverflow.com/questions/10049567/what-can-i-put-in-schema-model-field-to-build-a-custom-tableless-model)

您还应该检查[不同的数据源](https://github.com/cakephp/datasources/tree/master/models/datasources)——它可能正是您正在寻找的。我会`array_source`用于你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:26:18.287

在控制器操作中，您可以加载所需的模型并访问其数据：

> ```
> $this->loadModel('Blablah');
> debug($this->Blablah->data); 
> ```

# java - java runtime.freememory() 与 jconsole 输出不匹配

> ID：12678602
> 
> 赞同：3
> 
> 时间：2012-10-01T18:08:17.183
> 
> 标签：java, jvm, jconsole

我遇到了一个奇怪的问题。我有多个 JVM 正在运行，我需要获取它们的内存使用详细信息。当我获取详细信息`Runtime.getFreeMemory()`并将其与 jconsole 输出进行比较时，会有很大的不同。可能是什么问题？当我使用`Runtime.getFreeMemory()`或

```
ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getMax() - ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed(); 
```

可能是什么问题？非常感谢任何建议/意见。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:30:03.310

`Runtime.getFreeMemory()`告诉您已*分配*的内存量。它是`Runtime.totalMemory()`- 当前使用的内存。 `Runtime.maxMemory()`是您指出的 JVM 可以分配的总内存 ( `-Xmx`)。它可以超过`Runtime.totalMemory()`. 您可能正在查看 max memory 和 used in jconsole 之间的区别。要对此进行测试，请尝试将 ( ) 设置`-Xms`为与 ( ) 相同，`-Xmx`这将导致 JVM 在开始时分配最大内存。

# r - 在 R 中，如何随时间（3D 或动画）绘制 x、y 值？

> ID：12678604
> 
> 赞同：3
> 
> 时间：2012-10-01T18:08:18.407
> 
> 标签：r, plot

我从屏幕上的鼠标移动记录了 X 和 Y 坐标。我也有记录位置的时间。我想绘制这些显示鼠标如何随时间移动的图。

这是我的数据框的一个片段：

```
 X   Y          Time
1   812 257 1339892810683
2   793 275 1339892810709
3   783 284 1339892810732
4   746 308 1339892810771 
```

我认为准确表示这一点的唯一两种方法是 3D 绘图，或本质上表示播放的动画。有人知道如何在 R 中做到这一点吗？或者，关于如何将其可视化的任何其他想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:19:23.840

对于 3D 绘图，我推荐[**rgl**](http://cran.r-project.org/web/packages/rgl/index.html)库。

```
install.packages("rgl") # if you don't have it
library(rgl)
plot3d(yourData$X,yourData$Y,yourData$Time) 
```

这会给你一个散点图，但我认为你也应该能够让它画线来表示时间。一个很酷的功能是您可以通过拖动鼠标来更改视角。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T19:43:34.217

如果你想做一个动画，那么有动画包，或者使用`tkexamp`TeachingDemos 包中的函数创建的 GUI 的动画控制。`color.scale.lines`您可以通过使用plotrix 包中的颜色渐变绘制最后几个点来增强动画效果。

这是一个例子：

```
library(TeachingDemos)
library(plotrix)

tmpfun <- function(start,numpoints=10) {
    plot(ccc$Lon,ccc$Lat, xlab='Longitute', ylab='Lattitude', type='n')
    to <- min(nrow(ccc), start+numpoints)
    color.scale.lines( ccc$Lon[start:to], ccc$Lat[start:to], 
        c(0.7,0), c(0.7,0), c(0.7,0), colvar=seq_len(numpoints) )
}

tmplist <- list( numpoints=list('spinbox', init=10, from=1, to=nrow(ccc)),
                 start=list('animate',init=1, from=1, to=nrow(ccc)) )

tkexamp( tmpfun, tmplist ) 
```

这是考虑时间的第二个示例：

```
tmpfun2 <- function(start, dur=120) {
    time <- as.numeric(h2h$Time3)
    fr <- which( time >= start )[1]
    if( is.na(fr) ) fr <- nrow(h2h)-1
    to <- which( time >= start+dur )[1]
    if( is.na(to) ) to <- nrow(h2h)
    plot(h2h$Lon, h2h$Lat, xlab='Longitute', ylab='Lattitude',
     type='n', main=paste('Times',time[fr],'to',time[to]) )
    color.scale.lines( h2h$Lon[fr:to], h2h$Lat[fr:to], 
        c(0.7,0), c(0.7,0), c(0.7,0), colvar=time[fr:to])
}

tmplist2 <- list( dur=list('spinbox', init=120, from=10, to=1200),
                start=list('animate',init=0, from=0, to=1780, delay=100,
                            resolution=10) )

tkexamp( tmpfun2, tmplist2 ) 
```

在任一示例中使用颜色可能会产生更有意义的颜色渐变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T22:57:01.570

根据 Ben Bolker 的建议，我还查看了 googleVis。这可能是最少的工作。我必须添加一个“实体”列以满足动态图表 API 的要求。

```
df$Entity = rep("Mouse", nrow(df))
library(googleVis)
M <- gvisMotionChart(df, "Entity", "Time",
                 options=list(width=400, height=360))
plot(M) 
```

代码运行良好，甚至将 Time 列保留为整数——它不必对应于实际的时间对象。唯一的缺点是代码在浏览器中运行，（显然）没有简单的方法来保存它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-01T18:15:41.690

您可以从每个时间实例制作一个绘图，将绘图保存到 gif 文件，并使用[gifsicle](http://www.lcdf.org/gifsicle/)之类的应用程序从所有实例/绘图创建动画。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-03T15:00:59.500

@Jim，我为插件道歉，但如果您仍在寻找答案，我开发的应用程序正是为此目的而设计的。它被称为[popcharts](http://popchartsapp.com)，它只是Mac。它不是一个免费的应用程序，但请查看该网站，那里有很多可用的[演示](http://popchartsapp.com)和[教程](http://popchartsapp.com/tutorials/)。但基本上，如果您的文件结构与您的问题一样，那么您应该花费不超过几分钟的时间来查看您的数据动画，甚至将其导出为视频。所以我可能不知道如何在 R 中做到这一点，但这会很快完成工作。

# apache - 使用 .htccess 在主页 index.php 上强制 SSL 除外

> ID：12678605
> 
> 赞同：2
> 
> 时间：2012-10-01T18:08:26.950
> 
> 标签：apache, .htaccess, http

我想强制我网站上的每个页面都使用 SSL (https)，​​除了主页 index.php 使用 .htccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:39:36.750

在文档根目录的 htaccess 文件中，添加以下规则：

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteCond %{REQUEST_URI} !^/(index.php)?$ 
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R] 
```

# c# - 自托管的 wcf 服务是否有状态？

> ID：12678609
> 
> 赞同：1
> 
> 时间：2012-10-01T18:08:45.217
> 
> 标签：c#, wcf, service

我有一个在 silverlight 应用程序中使用的自托管 WCF 服务。我正在尝试将用户 guid 列表存储在 IDictionary 对象中。每次用户点击服务时，它都会更新用户的日期时间，以便我可以跟踪哪些用户有活动的“会话”。问题是，每次我点击服务时，列表都是空的。它似乎正在删除每个肥皂请求的值？

您能否将信息存储在可跨多个服务请求使用的自托管服务中？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:18:33.640

如果您需要在请求之间存储内容，您将需要创建一个具有适当锁定的静态字典来存储这些请求，或者将此信息存储在数据库（或其他外部存储）中并检查它是否存在于每个方法调用中。这样做的原因是服务类在每个客户端请求上都被实例化。

由于您已经在用户点击服务时更新了用户的日期时间，因此最好通过与日期时间字段进行比较来查看这是否是活动用户。这样做的好处是每次调用都准确（如果重新启动服务，字典可能与数据库不同步）。数据库已经有了处理并发的机制，因此您可以将复杂性推向数据存储，而不是围绕单个对象滚动您自己的锁定解决方案。

如果第二个解决方案不够快（并且您已经对应用程序进行了分析并确定它是瓶颈），那么另一个选择是在数据库前面使用某种缓存解决方案，以便在开始之前先在内存中检查数据到分贝。这个缓存对象需要像字典一样是静态的，并且与任何其他多线程应用程序一样具有相同的锁定缺陷。

编辑：如果这个托管的 WCF 服务被用作 silverlight 应用程序用户的会话存储，并且数据没有存储在外部数据存储中，那么您最好确保跟踪它们是否处于活动状态不是关键任务。无法保证此数据与描述的一样正确。

根据接受的答案，如果您的服务出现故障并需要重新启动（因为这是自托管的，建议您监控故障事件），您必须处置服务主机并实例化一个新主机。保留 Guid 数据的唯一方法是在重新启动之间将其反弹到服务（假设主机应用程序本身没有重新启动，这是一个不同的问题）。

```
private Dictionary<Guid,string> _session;

Service service = new Service(_session);
_serviceHost = new ServiceHost(service, GetUriMethodInHostApp()); 
```

最好将其存储在外部并按照@marc_s 的建议进行查找。然后这种复杂性就消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:10:50.053

它基于每个实例。即默认无会话。

看看[这个](http://msdn.microsoft.com/en-us/library/ms731193.aspx)

> 当服务合同将 System.ServiceModel.ServiceContractAttribute.SessionMode 属性设置为 System.ServiceModel.SessionMode.Required 时，该合同表示所有调用（即支持调用的底层消息交换）必须是同一对话的一部分.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:31:02.657

如果您不涉及锁定和线程安全的特定代码，您可以使用 NoSQL 数据库来存储会话数据，例如[MongoDB](http://www.mongodb.org/)或[RavenDB](http://ravendb.net/)

和@marc_s 一样，我认为使用单例模式是一件有风险的事情，你必须非常小心地制作自己的线程安全会话机制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T18:15:55.730

您需要更改`InstanceContextMode`. 您可以通过将以下编译器指令添加到 WCF 类来做到这一点：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
```

这会将 WCF 服务作为各种单例运行。查看有关[WCF 实例上下文模式的更多信息](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)

然后你应该用你的单例对象构建你的服务主机。这是一个工作示例的代码，我正在做类似的事情：

```
 private ServiceHost serviceHost;

            if (serviceHost != null)
                serviceHost.Close();

            if (log.IsInfoEnabled)
                log.Info("Starting WCF service host for endpoint: " + ConfiguredWCFEndpoint);

            // Create our service instance, and add create a new service host from it
            ServiceLayer.TagWCFService service = new ServiceLayer.TagWCFService(ApplicationName,
                ApplicationDescription,
                SiteId,
                ConfiguredUpdateRateMilliseconds);

            serviceHost = new ServiceHost(service, new Uri(ConfiguredWCFEndpoint));

            // Open the ServiceHostBase to create listeners and start listening for messages.
            serviceHost.Open(); 
```

正如其他人*礼貌地*指出的那样，如果您不熟悉它的工作原理或者它不适合您的特定应用程序，这可能会产生“后果”。

# javascript - 如何“正确”创建一个继承自 Element 的对象？

> ID：12678616
> 
> 赞同：1
> 
> 时间：2012-10-01T18:09:34.677
> 
> 标签：javascript, xml, html, dom

我正在编写一个涉及大量 XML 操作的 HTML5 应用程序，该操作的一部分涉及比较两个不同 XML 元素的版本。

我需要的是每个元素、Attr 和 TextNode（所有这些都继承自 Node、AFAIK）对象，这些对象被创建为具有关联的版本信息，但仍然能够像普通的 Element、Attr 或 TextNode 一样工作。我用来存储版本信息的当前工作解决方案如下：

```
Node.prototype.MyAppAnnotation = {
        Version : null
}; 
```

现在，我知道增加内置类型被认为是不好的形式，但除了这种技术，我不知道如何获得所需的功能。我不认为我可以将 Node 封装在包装器中，因为我需要在包装器上公开与 Node 相关的属性和函数。我也许可以为包装器编写某种传递函数，但这看起来真的很笨重。

我觉得因为我正在编写的应用程序是一个 HTML5 应用程序，因此只需要在最现代的浏览器上运行（所有这些浏览器都支持内置插件的增强），因此这种技术是合适的。此外，通过为我的扩充对象提供一个足够晦涩的名称，我可以避免所有命名冲突（故意冲突除外）。我还使用 Google 的 Closure 库探索了基于继承的解决方案。然而，似乎因为 Element、Node 和 TextNode 没有直接的构造函数（即它们是从 Document 对象创建的），所以这种技术也不起作用。

我想知道是否有人可以 a) 推荐一种在不增加 Element 的情况下实现这种效果的优雅方法，或者 b) 提供一个令人信服的理由说明为什么我不应该在这种情况下打破“不要增加内置插件”规则。

非常感谢，贾拉贝克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:23:17.557

你的想法在理论上是有效的，但是当我读到它时，我有一种奇怪的感觉。

首先 - 你不必增加任何原型。如果您只是这样做`somedomnode.myweirdname='foo'`，它将成为该对象的一个​​字段。这就是 javascript 所做的；) 因此，当没有版本时，您将得到 undefined 而不是 null。

**但是，**如果您想添加更多功能或将 dom 节点包装在任何东西中 - 有一些这样做的历史。大部分历史都由 jQuery 之类的东西主宰:)

只需创建一个包含该节点的字段的对象。然后你可以很简单地访问它：

`myobject.node`

并使用一些构造函数或只是工厂函数创建对象：

`var myobject = createDomNodeWrapper(domnode)`

# uiviewcontroller - 我可以在一个视图控制器上使用两个 xib - re: 移植到 iPhone 5

> ID：12678620
> 
> 赞同：15
> 
> 时间：2012-10-01T18:09:52.833
> 
> 标签：uiviewcontroller, xib, iphone-5

我刚刚向应用商店提交了我的第一个应用程序（是的[，它刚刚获得批准！](https://itunes.apple.com/app/fine-tip-tip-calculator/id563429225)）。我现在想更新它以使用（看起来更好）更大的 iPhone 5 屏幕。除了为更大的屏幕稍微改变布局之外，我不打算改变任何东西。

注意：我不想让我当前的 xib 被拉伸。

是否可以创建两个 xib 文件（即：为主屏幕复制我当前的 xib 文件）并将它们都连接到视图控制器并拥有它，以便在应用程序启动时，应用程序检测是否有 iPhone 5 屏幕或较早的屏幕。然后，根据设备的不同，向用户显示不同的屏幕。

我打算让底层应用程序保持不变。我只想为 iPhone 5 用户呈现一个稍微不同（更高）的屏幕，并为新布局移动一些按钮/项目。否则我不会在界面中添加或删除任何内容。

[这个 SO question/answer](https://stackoverflow.com/questions/9661919/connect-two-xibs-to-one-viewcontroller)显示了如何在 iPhone 或 iPad 视图之间切换。所以要做[这个](https://stackoverflow.com/questions/12415824/will-i-need-a-separate-view-controller-for-the-new-larger-iphone-5-display)。两者都有帮助，但我不知道如何针对用户使用更大屏幕的 iPhone 5 或 iPhone 4S 及以下的情况进行修改。此外，他们假设有两个视图控制器。我只想要一个视图控制器，因为视图控制器逻辑中绝对没有任何变化 - 只有屏幕上对象的位置发生变化，而这一切都在 XIB 中完成。

我应该认为答案应该是视图控制器iteslf评估它正在运行的设备然后呈现适当的xib？是的？不？

如果是这样，我将如何处理？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-01T23:19:20.160

**[完整答案于 2012 年 10 月 7 日修订]**

经过大量研究后，我找到了答案，部分在[此 SO 页面（显示如何检测您的应用程序正在运行的 iPhone 版本）](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)和部分在[此 SO 页面（显示如何让两个 xib 共享相同的 'File's Owner'](https://stackoverflow.com/questions/8619871/attaching-another-view-to-the-same-files-owner)。最后我在[The Big Nerd Ranch 的优秀 iOS 编程文本的](https://stackoverflow.com/questions/8619871/attaching-another-view-to-the-same-files-owner)第 10 章中找到了一个难题（通过 loadNibNamed: 方法加载单独的 xib）。方法如下：

1.  创建第二个 xib（文件，新建...，文件，选择“用户界面”，选择“空”并保存。这将创建新的 xib。在下面的示例中，我的经典 xib（适用于 3.5 英寸 iPhone）被命名为TipMainViewController.xib. 我保存了名为“TipMainViewController-5.xib”的新 iPhone 5 xib

2.  使新 xib 的“文件所有者”与现有 xib 相同的 ViewController。为此，在新的 xib 文件中，选择“文件的所有者”。然后在“身份检查器”中选择现有的视图控制器作为自定义类。就我而言，我选择了“TipMainViewController”。

3.  将新的 UIView 拖到新的 xib 的空画布上。在新 UIView 的属性检查器中，将“Size”属性设置为“Retina 4 Full Screen”

4.  选择现有 'Classic' 3.5" xib 中的所有内容 - 例如：所有控件、按钮、选择器、标签等。将它们复制并粘贴到新的 iPhone 5 xib 中。调整大小/移动等以优化 iPhone 的4" 显示屏。

5.  像创建原始 xib 时那样建立与文件所有者的所有连接。

6.  最后，在“单个”视图控制器的“viewDidLoad”方法中，插入以下逻辑（当然使用您的 nib/xib 名称）：

    ```
    - (void)loadView
    {
        [super viewDidLoad];
        if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        {
            CGSize result = [[UIScreen mainScreen] bounds].size;
            if(result.height == 480)
            {
              // iPhone Classic
              [[NSBundle mainBundle] loadNibNamed:@"TipMainViewController" owner:self options:nil];
            }
            if(result.height == 568)
            {
              // iPhone 5
              [[NSBundle mainBundle] loadNibNamed:@"TipMainViewController-5" owner:self options:nil];
            }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-02T01:05:20.667

这是一个用于视图控制器的简单*工作*代码示例，展示了如何 `myXib-5.xib`在 iPhone 5 和`myXib.xib`早于 iPhone 5 的 iPhone/iPod 上加载：

```
- (void)loadView
{
    if([[UIScreen mainScreen] bounds].size.height == 568)
    {
        // iPhone 5
        self.view = [[NSBundle mainBundle] loadNibNamed:@"myXib-5" owner:self options:nil][0];
    }
    else
    {
        self.view = [[NSBundle mainBundle] loadNibNamed:@"myXib" owner:self options:nil][0];
    }
} 
```

它假设您只针对 iPhone 而不是 iPad，以保持简单。

XIB 的文件所有者的类属性也应该设置为包含`loadView`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T17:28:29.737

回答中的代码很有帮助，但我需要一些更适合通用应用程序（iphone/ipad）的东西。

如果其他人需要同样的东西，这里有一些东西可以帮助你入门。

假设您使用 ios 的 nib/xib 命名标准为具有相同名称的 xib 的视图控制器构建了一个通用应用程序：

不提供名称时自动加载 xib 的两个内置默认值被传递给 initWithNibName：

*   ExampleViewController.xib [当 nib 为 Retina 3.5 Full Screen 为经典布局 iphone 4/4s 等命名为空时，iphone 默认...]
*   ExampleViewController~ipad.xib [ipad/ipad mini 默认当 nib 命名为空时]

现在假设您需要使用 Retina 4 全屏选项在 IB 中为 iphone 5/5s 自定义 xib，即，您不希望为任何 568h 设备显示 3.5 xib。

这是使用类别方法的自定义命名约定：

*   ExampleViewController-568h.xib [当 Retina 4 全屏 (568h) 的 nib 名称为空时，iphone 非默认/自定义命名约定]

不要覆盖内置的命名默认值，而是使用类别来帮助为控制器设置正确的 xib。

[https://gist.github.com/scottvrosenthal/4945884](https://gist.github.com/scottvrosenthal/4945884)

ExampleViewController.m

```
#import "UIViewController+AppCategories.h"

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    nibNameOrNil = [UIViewController nibNamedForDevice:@"ExampleViewController"];

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

       // Do any additional customization 

    }

    return self;
} 
```

UIViewController+AppCategories.h

```
#import <UIKit/UIKit.h>

@interface UIViewController (AppCategories)

   + (NSString*)nibNamedForDevice:(NSString*)name;

@end 
```

UIViewController+AppCategories.m

```
// ExampleViewController.xib [iphone default when nib named empty for Retina 3.5 Full Screen]
// ExampleViewController-568h.xib [iphone custom naming convention when nib named empty for Retina 4 Full Screen (568h)]
// ExampleViewController~ipad.xib [ipad/ipad mini default when nib named empty]

#import "UIViewController+AppCategories.h"

@implementation UIViewController (AppCategories)

+ (NSString*)nibNamedForDevice:(NSString*)name
{

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        if ([UIScreen mainScreen].bounds.size.height == 568)
        {
            //Check if there's a path extension or not
            if (name.pathExtension.length) {
                name = [name stringByReplacingOccurrencesOfString: [NSString stringWithFormat:@".%@", name.pathExtension] withString: [NSString stringWithFormat:@"-568h.%@", name.pathExtension ]
                ];

            } else {
                name = [name stringByAppendingString:@"-568h"];
            }

            // if 568h nib is found
            NSString *nibExists = [[NSBundle mainBundle] pathForResource:name ofType:@"nib"];
            if (nibExists) {
                return name;
           }

        }
    }

    // just default to ios universal app naming convention for xibs
    return Nil;
}

@end 
```

# java - SpringMvc - javax.validation.ValidationException

> ID：12678621
> 
> 赞同：4
> 
> 时间：2012-10-01T18:09:55.790
> 
> 标签：java, validation, spring-mvc, annotations

我正在使用 Spring 3.0。我没有使用 hibernate 或 maven 依赖项。我已经下载了 jar 文件并将其添加到我的类路径中。我收到一个 javax.validation.ValidationException。在研究了这个问题之后，我在类路径中包含了 hibernate-core-3.5.6.jar 和 slf4-api.1.4.3.jar 文件。

**错误日志**

```
2073 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.springframework.web.servlet.DispatcherServlet  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is javax.validation.ValidationException: Unable to find a default provider
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1284)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1382)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:306)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1389)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.validation.ValidationException: Unable to find a default provider
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:264)
    at org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:184)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 29 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T19:12:44.800

您需要包含[hibernate-validator 库 jar](http://www.hibernate.org/subprojects/validator/download)。

[Hibernate Validator](http://www.hibernate.org/subprojects/validator)（4.x 及以上版本）是 的参考实现`javax.validation.constraints`，也称为 JSR-303 注解。
尽管有这个名字，这个库与数据库和关系映射无关，它只是进行验证。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-14T11:14:16.857

添加具有 JSR 303（bean 验证）实现的 hibernate-validator 依赖项。

```
 <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-validator</artifactId>
      <version>4.2.0.Final</version>
   </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T13:14:57.067

我有同样的问题......我有这个，但不想使用验证：

```
 <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.1.0.Final</version>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-07T13:42:15.157

我在 pom.xml 中添加了 hibernate-validator 作为依赖项，它起作用了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-31T23:22:04.450

出于某种奇怪的原因，删除这个 Maven 依赖项起到了作用：

```
 <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>2.0.1.Final</version>
        </dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-27T09:51:25.153

如果上述方法都不适合您，则可能是您没有使用 Java 8 或者它没有正确安装在您的系统中（通过`java --version`在终端或命令提示符下键入 (for mac) 进行检查） . 对我来说就是这样。我必须卸载 Java 并重新安装 Java 8（如果您是 mac 用户，请转到此[正确方法在 mac 上卸载 java ），问题已解决。](https://apple.stackexchange.com/questions/324792/how-to-remove-java-10-or-revert-to-the-previous-version?newreg=2e37a0f9b8704f2aa4998510f9dd6629)

# php - 来自 javascript 的 CakePHP 表单

> ID：12678623
> 
> 赞同：0
> 
> 时间：2012-10-01T18:09:59.677
> 
> 标签：php, javascript, jquery, cakephp

我可以从 PHP 生成我的表单字段：

```
<?php
    echo $this->Form->input('Model.0.name', array(
            'label' => __('Name')
        )
    );
?> 
```

但是，需要“即时”创建字段，例如当用户单击“新名称字段”时。我不知道如何开始。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:43:14.067

我不知道 cakephp 如何工作，但假设它与 Controllers->functions (site.com/controller/function) 一起工作，你可以这样做：

```
<?

class FieldCreator extends Controller{

    public function input()
    {
        echo $this->Form->input('Model.0.name', array(
            'label' => __('%name%')
            )
        );
    }   
} 
```

## jQuery

Jquery 提供了一个`get`函数来发出 GET 请求，就像`FieldCreator`控制器一样。假设您的视图如下所示：

```
<html>
    <head>
            <!-- import jquery framewrok -->
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    </head>
    <body>

            <!-- This link will act like a button -->
        <a href="#" class="new_input">New name field<a>

        <form id="my_form">

        </form>

            <!-- Prepare the script once the page is ready -->
        <script type="text/javascript">
            $(document).ready(function(){  

                            var content = '';
                            var index = 1;
                            // Use click event in the link above to trigger the request
                $('.new_input').click(function(){ 

                                    if (content == '')
                                    // Do the request to site.com/FieldCreator/input
                    $.get('site.com/FieldCreator/input', function(data){ 
                            content = data;
                    });  

                                   //create the input
                                  createInput('name_' + index);
                });
            });

                    function createInput(name)
                    {
                   var input = content.replace('%name%', name);
                   $('#my_form').append(input);
                       index ++;
                     }

        </script>

    </body>
</html> 
```

但是，如果您想重新利用 GET 结果，您可以：

1.  更改`'label' => __('Name')`为`'label' => __('%name%')`

# html - 显示页脚固定在右下角，默认在左 (CSS/HTML5)

> ID：12678624
> 
> 赞同：2
> 
> 时间：2012-10-01T18:10:01.567
> 
> 标签：html, css

我正在尝试将页脚放在页面的右下角。我正在使用 HTML5 的`<footer>`标签。

所以，这是我的 CSS 中的内容：

```
footer {
    position:absolute;
    bottom: 0px;
    float: right;
    height: 35px;
    margin: 0px 50px 0px 0px;
    background: #9FF;
    color: #000;
    text-align: right;
    padding: 10px 30px;
} 
```

使用此代码，页脚完美地贴在底部。我想要的是它也应该在页脚的最右边。

[http://i47.tinypic.com/2rrox0w.png](http://i47.tinypic.com/2rrox0w.png)

因此，当我使用以下代码时：`right: 50px`在 CSS 中。然后页脚相对于浏览器定位。所以，每当我调整浏览器的大小时，页脚就会错位。

**我想要的是 ？**

我想将页脚放在底部。**并且在距离容器**（#main 或 #maincontent） 50px（右）的边距处，它被放置在而不是浏览器中。`float: right`似乎不起作用。

我也看过整个互联网和stackoverflow。但是，找不到此类问题的解决方案。

我正在使用 Google Chrome 22。因此，我的浏览器在很大程度上与 HTML5 兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:13:24.437

更新：你不需要绝对定位，只需删除位置，给你的页脚一些宽度，然后像这样向右浮动

```
footer {
    float: right;
    height: 35px;
    margin: 0px 50px 0px 0px;
    background: #9FF;
    color: #000;
    text-align: right;
    padding: 10px 30px;
    width: 180px;
} 
```

[**我的新小提琴**](http://jsfiddle.net/Lx8Ca/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:11:46.403

添加`position: relative`到容器中，然后使用该`right`属性。

所以你的完整 CSS 看起来像这样：

```
#main,
#maincontent {
    position: relative;
}

footer {
    position: absolute;
    bottom: 0px;
    right: 50px;
    height: 35px;
    margin: 0px 50px 0px 0px;
    background: #9FF;
    color: #000;
    text-align: right;
    padding: 10px 30px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:12:09.447

删除`float`并赋予`right:50px`（或您想要的值）它。如果它仍然不起作用，请给出`clear:both;`并检查您的`padding`值`margin`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:20:45.417

您需要为页脚创建一个与#main 或#maincontent 相同的集中式容器。然后使用该页脚容器内的边距。

# javascript - Javascript 代码在 IE 中不起作用

> ID：12678629
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:10:10.350
> 
> 标签：javascript

您好，我有一个数据库填充的下拉表，当我尝试使用时它在 IE 中不起作用

```
<script>
$(".viewall").click(function () {

    $(".alltable").css("display", "table");
    $(".alltable tr").css("display", "table-row");  
    $(".alltable td").css("display", "table-cell");
        });
$(".closeall").click(function () {

    $(".alltable").css("display", "none");
    $(".alltable tr").css("display", "none");
    $(".alltable td").css("display", "none");

});

</script> 
```

我曾经在 JQuery 中使用 slideDown() 并工作，但花了很长时间.....如果你能帮我一把，谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:14:34.250

这没有意义，你为什么把它隐藏在 3 个不同的层次上？如果隐藏外层，它们都将被隐藏！此外，您正在重新发明 jQuery 的 hide() 和 show()。

```
$(".viewall").click(function () {
    $(".alltable").show();
});
$(".closeall").click(function () {
    $(".alltable").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:11:49.613

不能只为 slideDown() 设置一个短动画速度吗？

# mongodb - MongoDb 2.2、2.4 和 2.6 中的 Map-Reduce 性能

> ID：12678631
> 
> 赞同：29
> 
> 时间：2012-10-01T18:10:15.357
> 
> 标签：mongodb, mapreduce

我发现了这个讨论：[MongoDB：可怕的 MapReduce 性能](https://stackoverflow.com/questions/3947889/mongodb-terrible-mapreduce-performance)。基本上它说尽量避免 Mongo 的 MR 查询，因为它是单线程的，根本不应该是实时的。2 年过去了，我想知道从那时起发生了什么变化。现在我们有了 MongoDb 2.2。我听说 MR 现在是多线程的。请分享您对 MR 用于实时请求的想法，例如为 Web 应用程序频繁的 http 请求获取数据。是否能够有效地使用索引？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-01T19:59:10.690

这是 MongoDB 中 Map/Reduce 功能的当前状态

1) Map/Reduce 的大部分性能限制仍然存在于 MongoDB 2.2 版中。Map/Reduce 引擎仍然要求将每条记录从 BSON 转换为 JSON，使用嵌入式 JavaScript 引擎执行实际计算（速度很慢），并且仍然存在单个全局 JavaScript 锁，它只允许单个 JavaScript 线程一次运行。

对分片集群的 Map/Reduce 进行了一些增量改进。最值得注意的是，最终的 Reduce 操作现在分布在多个分片上，并且输出也被并行分片。

我不建议在 MongoDB 2.2 版中使用 Map/Reduce 进行实时聚合

2) 从 MongoDB 2.2 开始，现在有一个新的聚合框架。这是聚合操作的新实现，用 C++ 编写，并紧密集成到 MongoDB 框架中。

大多数 Map/Reduce 作业可以重写以使用聚合框架。它们通常运行速度更快（2.2 版本中常见的 Map/Reduce 速度提高了 20 倍），它们充分利用了现有的查询引擎，并且您可以并行运行多个聚合命令。

如果您有实时聚合需求，首先要从聚合框架入手。有关聚合框架的更多信息，请查看以下链接：

*   [http://www.10gen.com/presentations/mongonyc-2012/new-aggregation-framework](http://www.10gen.com/presentations/mongonyc-2012/new-aggregation-framework)
*   [http://docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)

3) MongoDB 2.4 版中的 Map/Reduce 有了显着的改进。SpiderMonkey JavaScript 引擎已被 V8 JavaScript 引擎取代，不再有全局 JavaScript 锁，这意味着多个 Map/Reduce 线程可以并发运行。

Map/Reduce 引擎仍然比聚合框架慢得多，主要原因有两个：

*   JavaScript 引擎被解释，而聚合框架运行编译的 C++ 代码

*   JavaScript 引擎仍然要求每个被检查的文档都从 BSON 转换为 JSON；如果要将输出保存在集合中，则必须将结果集从 JSON 转换回 BSON

Map/Reduce 在 2.4 和 2.6 之间没有显着变化。

我仍然不建议在 MongoDB 2.4 或 2.6 版本中使用 Map/Reduce 进行实时聚合。

4）如果真的需要Map/Reduce，也可以看看Hadoop Adaptor。这里有更多信息：

*   [http://www.10gen.com/presentations/webinar/mongodb-hadoop-taming-elephant-room](http://www.10gen.com/presentations/webinar/mongodb-hadoop-taming-elephant-room)
*   [http://api.mongodb.org/hadoop/MongoDB%2BHadoop+Connector.html](http://api.mongodb.org/hadoop/MongoDB%2BHadoop+Connector.html)
*   [http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start)

# entity-framework - DbContext 中有 GetObjectType 吗？

> ID：12678633
> 
> 赞同：2
> 
> 时间：2012-10-01T18:10:16.717
> 
> 标签：entity-framework

我正在使用 POCO 代理，我想获取对象的类型。我找到了一些将 GetObjectType 用于 ObjectContext 的[示例](http://www.coding4art.com/archive/2012/03/13/entity-framework-1-ndashhow-to-get-the-original-type-of.aspx)，但我使用的是 DbContext 并且在那里看不到它。这是我需要添加到我的存储库类以便它可以访问 DbContext 的东西吗？还是我完全错了？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:38:21.997

有一个静态方法[ObjectContext.GetObjectType](https://msdn.microsoft.com/en-us/library/dn219922(v=vs.113).aspx)当然，您可以`System.Data.Objects`在范围内的任何地方使用它。您不需要`DbContext`实例。

# asp.net-mvc-3 - 如何在 MVC 3 Razor 中使用 knockout.js？

> ID：12678635
> 
> 赞同：3
> 
> 时间：2012-10-01T18:10:31.120
> 
> 标签：asp.net-mvc-3, mvvm, razor, knockout.js

我是新手 knockout.js。我也是 asp.net mvc 3 中的上级中间人。我真的很想学习如何在 mvc 3 razor 中使用淘汰赛 js？但下面的代码不起作用也返回给我空的总价。没有错误。请帮忙谢谢...

模型：

```
 public class GiftModel
    {
        public string Title { get; set; }
        public double Price { get; set; }
    } 
```

看法：

```
 @using System.Web.Script.Serialization;
@model IEnumerable<knockout1.Models.GiftModel>
@{
    ViewBag.Title = "Index";
}

<script src="/Scripts/knockout-2.1.0.js" type="text/javascript"></script>
<script type="text/javascript">
    var initialData = @(new JavaScriptSerializer().Serialize(Model));
    var viewModel = {
    gifts : ko.observableArray(initialData)
};

ko.applyBindings(viewModel);
</script>
<h2>Index</h2>

<p>You have asked for <span data-bind="text: gifts().length"> </span> gift(s)</p> 
```

控制器：

```
 public class TestController : Controller
    {
        //
        // GET: /Test/

        public ActionResult Index()
        {
            var initialState = new[] {
                                     new GiftModel { Title = "Tall Hat", Price = 49.95 },
                                     new GiftModel { Title = "Long Cloak", Price = 78.25 }
                                    };
            return View(initialState);
        }

    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T18:34:46.610

我猜你正在关注[本教程](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)。

你有几个错误。首先替换：

```
var initialData = @(new JavaScriptSerializer().Serialize(Model)); 
```

和：

```
var initialData = @Html.Raw(Json.Encode(Model)); 
```

这可确保您的模型已正确进行 JSON 编码。在原始文章中，Steven Sanderson 使用的是 WebForms 视图引擎，但您似乎使用的是 Razor 视图引擎。因此，请确保相应地调整语法（不要忘记`@`razor 函数会自动对输出进行 html 编码，这与`<%=`WebForms 语法相反）。

你的代码的第二个问题是你试图在你的 DOM 准备好之前绑定你的淘汰模型（即你已经在`ko.applyBindings(viewModel);`包含绑定的实际跨度之前放置了调用）。因此，要么将您的调用包装在 a 中，`$(document).ready`要么将您的脚本放在文档末尾，就在关闭`</body>`标签之前（推荐）。

此外，我建议您使用 url 帮助程序来引用您的脚本，不要只对这些 url 进行硬编码，一旦您在 IIS 中发布，您的应用程序就会中断：

```
@model IEnumerable<GiftModel>

<h2>Index</h2>

<p>You have asked for <span data-bind="text: gifts().length"> </span> gift(s)</p>

<script src="@Url.Content("~/Scripts/knockout-2.1.0.js")" type="text/javascript"></script>
<script type="text/javascript">
    var initialData = @Html.Raw(Json.Encode(Model));
    var viewModel = {
        gifts : ko.observableArray(initialData)
    };

    ko.applyBindings(viewModel);
</script> 
```

因此，正如您所看到的，您遇到的 2 个问题与 2 完全无关`knockoutjs`。所以如果你想学习一些框架，我建议你独立学习。不要混淆技术，否则您会混淆。

因此，请继续浏览 knockoutjs 网站并开始使用静态 HTML 页面的教程。暂时忘记 ASP.NET MVC。忘记实体框架。只需从静态 HTML 页面开始学习框架。这样你会更好地理解它是如何工作的。

# c# - 从另一种形式启动计时器

> ID：12678639
> 
> 赞同：0
> 
> 时间：2012-10-01T18:10:48.803
> 
> 标签：c#, winforms, events, stopwatch

在我的项目中，我有两种形式`mainForm`和`testingForm`. 在`mainForm`我有`button1`，在`testingForm`，我有：

```
Stopwatch measure = new Stopwatch(); 
```

当用户单击`button1`时，我希望`measure`秒表启动，并使用它进行其他事件。我怎样才能做到这一点？我研究了很多，但没有任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:18:10.100

在测试表格

```
Stopwatch measure = new Stopwatch();

public Stopwatch Watch { get { return measure; } } 
```

在主窗体中

```
testingForm frm = new testingForm();
frm.Watch.Start();
//...
frm.Watch.Stop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:21:56.450

使秒表成为测试表单的属性。单击按钮时，您在 mainform 中创建新的秒表，然后将其分配给 testingform 属性

测试表格代码

```
 private Stopwatch _Measure;
        public Stopwatch Measure
        {
            get
            {
                return _Measure;
            } 
            set 
            { _Measure = value;
                // Do some stuff
            }
        } 
```

主窗体代码

```
 private void button1_Click(object sender, EventArgs e)
        {
            Stopwatch measure = new Stopwatch();
            testingform.Measure = measure;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:15:15.280

您可以将计时器带入一个既可以使用它又可以使用它的范围`mainForm`，`testingForm`也许是在应用程序级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:18:20.443

假设您希望主窗体包含和控制程序的所有方面（秒表或任何与此相关的东西），您可以按照[此示例](https://stackoverflow.com/questions/1665533/communicate-between-two-windows-forms-in-c-sharp)进行操作。

您唯一需要更改的是使秒表成为 MainForm 的属性并让 Form2 通过引用调用该操作。

# php - 解析和排序链接

> ID：12678642
> 
> 赞同：-6
> 
> 时间：2012-10-01T18:10:50.743
> 
> 标签：php, parsing, sorting

我想解析和排序链接集这里是例子

表格代码

```
<form name="frm" method="post" action="test.php">
<textarea id="url" name="url"></textarea>
<input type="Submit" name="Submit" value="Submit"/>
</form> 
```

我将每行提交以下链接

```
http://www.google.com/moo
http://www.yahoo.com/boo
http://www.google.com/zee
http://www.bing.com/kee
http://www.yahoo.com/foo 
```

这是`2 on google`和`2 on yahoo`和`1 on bing`链接

`test.php`代码如下（表单发送提交的地方）

```
<?PHP
$url=$_POST['url'];
$url=nl2br($url);
$url=explode("<br />",$url);
foreach ($url as $value ){
$encrypt = md5($value);
echo $encrypt . "<br>";
}
?> 
```

输出将如下

```
8ec5ec689ab94e5df9d89cea624e7e5e //google.com/moo
b165a8209254d205a2950f23214125ec //yahoo.com/boo
fc8d853005d21a7fc8abb06aba0756fb //google.com/zee
f691aab0c39f288f503ae61d3cc3b5b4 //bing.com/kee
8f55ee4d5227f87ec1316e0fa6c61e3b //yahoo.com/foo 
```

**现在我的问题**

我想解析主机以了解哪个主机`google,yahoo and bing`并对其进行排序，然后将结果完全显示如下

```
google.com // parsed and sorted
fc8d853005d21a7fc8abb06aba0756fb //google.com/zee
8ec5ec689ab94e5df9d89cea624e7e5e //google.com/moo

yahoo.com // parsed and sorted
b165a8209254d205a2950f23214125ec //yahoo.com/boo
8f55ee4d5227f87ec1316e0fa6c61e3b //yahoo.com/foo

bing.com // parsed and sorted
f691aab0c39f288f503ae61d3cc3b5b4 //bing.com/kee 
```

所以换句话说，我的意思是我想对他们的主机上的链接进行排序，然后显示在其解析的主机下对每个组进行排序的结果。

我想我需要做很多`foreach`！

知道怎么做~谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:18:57.830

## 代码：

```
$urlByHost = array();
foreach (explode("\n", $_POST['url']) as $value) {
    $parse = parse_url($value);
    $urlByHost[$parse['host']][] = array(
        'url' => $value,
        'parse' => $parse,
        'md5' => md5($value),
    );
}
asort($urlByHost);

print_r($urlByHost); 
```

## 输出：

```
Array
(
    [www.bing.com] => Array
        (
            [0] => Array
                (
                    [url] => http://www.bing.com/kee
                    [parse] => Array
                        (
                            [scheme] => http
                            [host] => www.bing.com
                            [path] => /kee_
                        )

                    [md5] => e69d3a5bb987448e30ec8559c3634caf
                )

        )

    [www.google.com] => Array
        (
            [0] => Array
                (
                    [url] => http://www.google.com/moo
                    [parse] => Array
                        (
                            [scheme] => http
                            [host] => www.google.com
                            [path] => /moo_
                        )

                    [md5] => f98f559bb167acb6413b55c6c7b7255a
                )

            [1] => Array
                (
                    [url] => http://www.google.com/zee
                    [parse] => Array
                        (
                            [scheme] => http
                            [host] => www.google.com
                            [path] => /zee_
                        )

                    [md5] => 717b78e3db16982d77dde33991c4db70
                )

        )

    [www.yahoo.com] => Array
        (
            [0] => Array
                (
                    [url] => http://www.yahoo.com/boo
                    [parse] => Array
                        (
                            [scheme] => http
                            [host] => www.yahoo.com
                            [path] => /boo_
                        )

                    [md5] => b237c6cd567aaef629d55ae53f52dc49
                )

            [1] => Array
                (
                    [url] => http://www.yahoo.com/foo
                    [parse] => Array
                        (
                            [scheme] => http
                            [host] => www.yahoo.com
                            [path] => /foo
                        )

                    [md5] => bd34d7a6adf909e4ce355b038e8d206c
                )

        )

) 
```

我认为有你需要的所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:21:31.470

您可以通过提取域并将其用作具有加密值的数组的索引来做到这一点，如下所示：

```
$url=$_POST['url'];
$url=nl2br($url);
$url=explode("<br />",$url);
$urls = array();
foreach ($url as $value ){
   $arr = explode('www.',$value);
   $encrypt = md5($value);
   $urls[$arr[1]][]= $encrypt; //this line now fixed, had an error
}
foreach($urls as $key => &$val) {
   echo $key . "<br>";
   foreach($val as $v) {
      echo $v . "<br>";
   }
   echo "<br>";
} 
```

# java - 为特定 XML 元素/节点创建数字签名的引用 URI 错误

> ID：12678647
> 
> 赞同：2
> 
> 时间：2012-10-01T18:11:07.743
> 
> 标签：java, digital-signature

我一直试图让它工作，但是当我尝试为我的 XML 文档中的特定元素创建数字名称时，我总是遇到异常。源文档是一个 SOAP 信封，程序从文件中解析数据并创建 Document 对象。基本上我要做的是创建一个具有多个部分/引用的数字签名......主要是 SOAP 头的安全节点下的 SOAP 主体和时间戳节点。所以现在我正在尝试签署 SOAP 消息的正文部分。SOAP Body 有一个 wsu:Id 值，我在创建 Reference 对象时使用它。我正在使用 securityNode 参考来插入 Signature 节点，因为无论如何它都应该在该位置。我不认为这是一个问题，但我想我会说出来以防万一。我认为我这样做是正确的，但它' 不工作。我看到其他人发布了同样的问题，但没有给出答案。

我尝试了很多不同的东西，只要我指定用于创建引用对象的 URI，我就会得到异常。奇怪的是，在签署上下文时抛出了异常。我这样做对吗？我该如何纠正？任何帮助是极大的赞赏。

> // ***** ** *** ** *** **** **例外* ****** *** ** *** ** ********
> 
>  ***线程“main”中的异常 javax.xml.crypto.dsig.XMLSignatureException: javax.xml.crypto.URIReferenceException: java.lang.NullPointerException at org.jcp.xml.dsig.internal.dom.DOMReference.dereference(Unknown Source) at org.jcp.xml.dsig.internal.dom.DOMReference.digest(Unknown Source) at org.jcp.xml.dsig.internal.dom.DOMXMLSignature.digestReference(Unknown Source) at org.jcp.xml.dsig.internal。 dom.DOMXMLSignature.sign(Unknown Source) at XMLDsigTester.main(XMLDsigTester.java:163) 原因：javax.xml.crypto.URIReferenceException: java.lang.NullPointerException at org.jcp.xml.dsig.internal.dom.DOMURIDereferencer .dereference(Unknown Source) ... 5 更多原因：com.sun.org.apache.xml.internal.security.utils.resolver 中的 java.lang.NullPointerException。implementations.ResolverDirectHTTP.engineCanResolve(Unknown Source) at com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolver.canResolve(Unknown Source) at com.sun.org.apache.xml.internal.security。 utils.resolver.ResourceResolver.getInstance(Unknown Source) ... 还有 6 个 javax.xml.crypto.URIReferenceException: java.lang.NullPointerException at org.jcp.xml.dsig.internal.dom.DOMURIDereferencer.dereference(Unknown Source) at org.jcp.xml.dsig.internal.dom.DOMReference.dereference(Unknown Source) at org.jcp.xml.dsig.internal.dom.DOMReference.digest(Unknown Source) at org.jcp.xml.dsig.internal。 dom.DOMXMLSignature.digestReference(Unknown Source) at org.jcp.xml.dsig.internal.dom.DOMXMLSignature.sign(Unknown Source) at XMLDsigTester。main(XMLDsigTester.java:163) 原因：com.sun.org.apache.xml.internal.security.utils.resolver.implementations.ResolverDirectHTTP.engineCanResolve 的 java.lang.NullPointerException com.sun.org .apache.xml.internal.security.utils.resolver.ResourceResolver.canResolve(Unknown Source) at com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolver.getInstance(Unknown Source) ... 6更多的getInstance(Unknown Source) ... 6 更多getInstance(Unknown Source) ... 6 更多***

 ***```
 //********************   JAVA CLass  ********************

    import javax.xml.crypto.*;
    import javax.xml.crypto.dsig.*;
    import javax.xml.crypto.dom.*;
    import javax.xml.crypto.dsig.dom.DOMSignContext;
    import javax.xml.crypto.dsig.keyinfo.*;
    import javax.xml.crypto.dsig.spec.TransformParameterSpec;
    import javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.OutputStream;
    import java.security.*;
    import java.util.Collections;
    import java.util.Iterator;
    import javax.xml.parsers.DocumentBuilderFactory;
    import javax.xml.transform.*;
    import javax.xml.transform.dom.DOMSource;
    import javax.xml.transform.stream.StreamResult;
    import org.w3c.dom.Document;
    import org.w3c.dom.*;

    public class XMLDsigTester
    {

    public static void main(String[] args) throws Exception
    {

    //////////////          DECLARATIONS      //////////////////

    final String ENVELOPE_TAG = "Envelope";
    final String HEADER_TAG = "Header";
    final String SECURITY_TAG = "Security";
    final String BODY_TAG = "Body";
    final String SEPARATOR = ":";

    Node envelopeNode = null;
    Node headerNode = null;
    Node bodyNode = null;

    NodeList envelopeChildren = null;
    NodeList headerChildren = null;
    Node childNode = null;
    Node securityNode = null;

    String providerName = null;
    String sEnvelopeNamespace = null;
    String sFullHeaderTagName = null;
    String sFullBodyTagName = null;
    String sNodeName = null;

    int iEnvelopeChildren;
    int iHeaderChildren;

    //////////////          START OF LOGIC      //////////////////

    providerName = System.getProperty("jsr105Provider", "org.jcp.xml.dsig.internal.dom.XMLDSigRI");

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setNamespaceAware(true);
    Document doc = dbf.newDocumentBuilder().parse(new FileInputStream("myfile.xml"));

    Provider providerObj = (Provider) Class.forName(providerName).newInstance();

    ///  Create references to the Envelope, Header, Body and Security nodes  ///

    envelopeNode = doc.getDocumentElement();
    envelopeChildren = envelopeNode.getChildNodes();
    iEnvelopeChildren = envelopeChildren.getLength();

    sEnvelopeNamespace = envelopeNode.getPrefix();
    if (sEnvelopeNamespace != null && !sEnvelopeNamespace.trim().equals(""))
    {
    sFullHeaderTagName = sEnvelopeNamespace.trim().concat(SEPARATOR).concat(HEADER_TAG);
    sFullBodyTagName = sEnvelopeNamespace.trim().concat(SEPARATOR).concat(BODY_TAG);
    }
    else
    {
    sFullHeaderTagName = HEADER_TAG;
    sFullBodyTagName = BODY_TAG;
    }

    for (int i=0; i < iEnvelopeChildren; i++)
    {
    sNodeName = null;
    childNode = null;

    childNode = envelopeChildren.item(i);
    sNodeName = childNode.getNodeName().trim();

    if (sNodeName.equalsIgnoreCase(sFullHeaderTagName))
    headerNode = childNode;
    else if (sNodeName.equalsIgnoreCase(sFullBodyTagName))
    bodyNode = childNode;
    }

    headerChildren = headerNode.getChildNodes();
    iHeaderChildren = headerChildren.getLength();

    String sLocalNodeName = null;
    for (int i=0; i < iHeaderChildren; i++)
    {
    sLocalNodeName = null;
    sNodeName = null;
    childNode = null;

    childNode = headerChildren.item(i);
    sNodeName = childNode.getNodeName().trim();

    sLocalNodeName = childNode.getLocalName();

    if (sLocalNodeName != null)
    if (sLocalNodeName.trim().equalsIgnoreCase(SECURITY_TAG))
    {
    securityNode = childNode;
    break;
    }
    }

    ///  Main logic for generating XML signature  ///

    XMLSignatureFactory fac = XMLSignatureFactory.getInstance("DOM", providerObj);

    KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
    kpg.initialize(512);
    KeyPair kp = kpg.generateKeyPair();

    KeyInfoFactory kif = fac.getKeyInfoFactory();
    KeyValue kv = kif.newKeyValue(kp.getPublic());

    KeyInfo ki = kif.newKeyInfo(Collections.singletonList(kv));

    DOMSignContext dsc = new DOMSignContext(kp.getPrivate(), securityNode);
    dsc.putNamespacePrefix("http://www.w3.org/2000/09/xmldsig#", "ds");

    DigestMethod digestMethod = fac.newDigestMethod(DigestMethod.SHA1, null);
    Transform transformObj = fac.newTransform(CanonicalizationMethod.EXCLUSIVE, (TransformParameterSpec) null);

    Reference ref = fac.newReference("part-Body-4F4332715C4C1670E10080000A441E26", digestMethod, Collections.singletonList(transformObj), null, null);

    CanonicalizationMethod canonMethodObj = fac.newCanonicalizationMethod(CanonicalizationMethod.EXCLUSIVE, (C14NMethodParameterSpec) null);
    SignatureMethod signatureMethodObj = fac.newSignatureMethod(SignatureMethod.RSA_SHA1, null);
    SignedInfo si = fac.newSignedInfo(canonMethodObj, signatureMethodObj, Collections.singletonList(ref));

    XMLSignature signature = fac.newXMLSignature(si, ki);
    signature.sign(dsc);

    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer trans = tf.newTransformer();
    trans.transform(new DOMSource(doc), new StreamResult(new FileOutputStream("mySignedFile.xml")));
    }
    } <br>

    //********************   INPUT DATA  ********************

    <soap-env:Envelope xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
       <soap-env:Header>
          <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
             <wsu:Timestamp wsu:Id="ts-4F43326F5C4C1670E10080000A441E26">
                <wsu:Created>2012-09-30T22:09:55Z</wsu:Created>
                <wsu:Expires>2012-09-30T22:14:55Z</wsu:Expires>
             </wsu:Timestamp>
          </wsse:Security>
          <wsa:Action soap-env:mustUnderstand="1" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"/>
          <wsa:MessageID xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing">uuid:4f43f2ff-38aa-1a90-e100-80000a441e26</wsa:MessageID>
       </soap-env:Header>
       <soap-env:Body wsu:Id="part-Body-4F4332715C4C1670E10080000A441E26" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
           <PurchaseOrder>
             <Customer>
               <Name>Robert Smith</Name>
               <CustomerId>788335</CustomerId>
             </Customer>
             <Item partNum="C763">
               <ProductId>6883-JF3</ProductId>
               <Quantity>3</Quantity>
               <ShipDate>2002-09-03</ShipDate>
               <Name>ThinkPad X20</Name>
             </Item>
           </PurchaseOrder>
       </soap-env:Body>
    </soap-env:Envelope> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:10:05.763

我希望现在还为时不晚:)。我一直在用您的输入对您的代码进行一些测试。您需要知道的第一件事是您需要使用“#nodeId”指定节点名称，在您的示例中应该是“#part-Body-4F4332715C4C1670E10080000A441E26”（您缺少“#”符号）。下一个问题与“wsu”命名空间中的“Id”有关；如果它只是“Id”而不是“wsu:Id”，您的代码将定位“soap-env:Body”节点，但情况并非如此。如果您可以添加额外的“Id”属性或修改您的示例删除“wsu”命名空间前缀，那么您就完成了。如果您不这样做，那么您需要进行一些修改，添加一个转换，以便您可以选择要签名的节点。你应该替换你的行：

```
Transform transformObj = fac.newTransform(CanonicalizationMethod.EXCLUSIVE, (TransformParameterSpec) null);

Reference ref = fac.newReference("part-Body-4F4332715C4C1670E10080000A441E26", digestMethod, Collections.singletonList(transformObj), null, null); 
```

和：

```
List<Transform> transforms = new ArrayList<Transform>(2);
Map<String, String> namespaces = new HashMap<String, String>(1);
namespaces.put("soap-env", "http://schemas.xmlsoap.org/soap/envelope/");
XPathFilterParameterSpec paramsXpath = new XPathFilterParameterSpec("/soap-env:Envelope/soap-env:Body", namespaces);
transforms.add(fac.newTransform(Transform.XPATH, (TransformParameterSpec) paramsXpath));

Transform transformObj = fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null);
transforms.add(transformObj);

Reference ref = fac.newReference("", digestMethod, transforms, null, null); 
```

在这个新代码中，您使用 XPath 将转换添加到从您提供的 xml 输入中选择“soap-env:Body”节点的引用。该节点将被签名并添加到“安全”节点。***

# c# - aspx 到 razor 转换为主布局视图

> ID：12678655
> 
> 赞同：0
> 
> 时间：2012-10-01T18:11:54.047
> 
> 标签：c#, asp.net, razor

我正在尝试遵循 MVC 示例，他们使用了以下代码

```
<%= string.Format("<link href='{0}'rel='stylesheet' type='text/css'     />",
ResolveUrl("~/Content/Site.css")) %>
<%= string.Format("<link href='{0}'rel='stylesheet' type='text/css' />",   
ResolveUrl("~/Content/jquery-ui-1.7.2.custom.css"))%> 
```

我想把它转换成剃须刀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:16:20.203

剃刀版

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" /> 
```

# 3d - 部分表面重建

> ID：12678661
> 
> 赞同：1
> 
> 时间：2012-10-01T18:12:06.733
> 
> 标签：3d, mesh, triangulation

我需要一种算法来修复 3D 三角形网格。期望的条件是 2n 个三角形（大多数时候是 2 个三角形）共享一条边。相比之下，输入网格包含在边 2n+1 个三角形 (1,3,..) 的情况。我已经实施了一些启发式方法：

*   关闭的顶点（由于舍入错误）合并为一个。

*   如果之后新顶点可以与其他合理的顶点合并，则边界边会被分割。

*   孔被三角测量到某个区域阈值。

这对于许多输入都非常有效（我在稍后阶段关心自相交），但是有些网格在这些启发式方法中失败了。主要问题是修复边不是仅具有局部后果的决定：每个创建的三角形都会减少可用于后续修复步骤的边集。因此，只有一个错误的决定可能会导致一系列连续的错误。

这个问题似乎接近于曲面重建问题，但我已经拥有了大部分曲面，因此需要一种尊重现有三角形的部分重建算法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:16:12.307

您可以进行有限的组合探索，动态编程风格，而不是使三角形创建不可逆。您可以为每个操作（也可能为结果）分配成本，以评估在任何给定阶段哪些组合最有希望。

大概大多数情况都是本地化的，并且不需要动态编程的全部功能（和费用）。但是，可以并行探索需要多个依赖操作的案例，并从实现闭合的案例中选择最佳的半本地解决方案。

# matlab - 如何将数字附加到数组的末尾？

> ID：12678663
> 
> 赞同：-2
> 
> 时间：2012-10-01T18:12:14.297
> 
> 标签：matlab, matrix

我有一个 Mx1 矩阵，我想用 (M-1)x1 矩阵绘制它。为了使这成为可能，我想用零填充第二个矩阵，使其尺寸等于第一个。如何将数字附加到数组的末尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:40:55.043

或者您可以使用关键字直接附加`end`

```
a(end+1) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:58:55.800

换句话说：为了不引入不存在的数据，您可以从另一个更大的矩阵（或您的示例中的向量）中排除最终的“不匹配”元素。只要您知道您缺少以下最后一个元素`z`：

```
scatter(x(1:end-1), y(1:end-1), 5, z) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:16:10.987

试试这个开始：
`a=[1,2,3]`
`a=[a,4]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-20T09:47:26.523

我发现此解决方案最适用于您填充矩阵的场景。这会将 A 更改为 10x10 矩阵，并将所有其他值填充为零。

```
A = [1 5 3 8 9 4 7 6 5 2];
A(numel(A), numel(A)) = 0; 
```

# linq - 有什么方法可以使用 linq 添加属性？

> ID：12678665
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:12:24.873
> 
> 标签：linq, linq-to-sql

所以我有这个列表，它返回一个 ID 和一个缩略图。前任。`List<PersonPicture>` 我有这个列表，`List<Person>`其中有一个名为“图片”的属性。无论如何我可以合并这两个属性并将其添加`List<PersonPicture>`到其中名为“图片”的属性中，并通过 ID 将其作为基础，因为它们具有相同的属性？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:24:54.983

您可以为此使用匿名对象，下面是一个示例：

```
List<PersonPicture> pictures = LoadPictures();
List<Person> persons = LoadPersons();

var result = persons.Select(pers => new
{
  Id = pers.Id,
  Name = pers.Name,
  Picture = pictures.Where(pic => pic.PersId == pers.Id)
    .FirstOrDefault()
    .Thumbnail
}; 
```

另一种解决方案是使用 Join：

```
var result = persons.Join(pictures, 
  pers => pers.Id, 
  pic => pic.PersId,
  (pers, pic) => { 
    return new
    {
      Id = pers.Id,
      Name = pers.Name,
      Picture = pic.Thumbnail
    };
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:29:29.283

LINQ 并不是为像这样修改现有集合而设计的，但您可以这样做：

```
foreach (tup in people
    .Join(
        picture,
        person => person.ID,
        picture => picture.ID,
        Tuple.Create
    ))
{
    tup.Item1.Picture = tup.Item2;
} 
```

编辑：请注意，如果一个人有不止一张照片，这将产生不可预测的结果。有这种可能吗，应该如何处理？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:24:56.733

您可以在 linq中使用[Join](https://stackoverflow.com/a/525241/920359)或[Zip运算符。](https://stackoverflow.com/a/5122767/920359)这些链接将带您了解有关使用它们的语法的问题。基本上，Join 只是根据 SQL 中的键将两个列表添加在一起，Zip 通过匹配每个列表中每个元素的位置来合并两个列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:29:57.993

您希望基于共享密钥（ID）*加入这两个列表。*

基本上，您想`Join`在 LINQ 中使用运算符来查找匹配相同 ID的`Person`和对：`PersonPicture`

```
 persons.Join(pictures, // join these two lists 
        person => person.Id, // extract key from person
        personPicture => personPicture.PersonId, // extract key from picture
        (person, personPicture) => ??? // do something with each matching pair 
```

您现在面临的问题是如何处理每对配对；`Join`允许您提供一个接受匹配对并返回其他内容的委托，并且 Join 操作的结果将是从每个匹配对产生的那些“其他内容”的列表。

你的问题是你想拿每一对并用它做一些事情 - 具体来说，你想将图片从`PersonPicture`对象复制到`Person`对象。由于 LINQ 是关于查找数据而不是修改数据，因此这不是微不足道的。

您可以通过两种方式做到这一点。一种是从每一对创建一个临时对象，然后对其进行迭代并执行您的操作：

```
 var pairs = persons.Join(pictures, 
        person => person.Id, 
        personPicture => personPicture.PersonId,
        (person, personPicture) => new { person, personPicture };

    foreach (var pair in pairs) 
        pair.person.Picture = pair.personPicture.Thumbnail; 
```

（您可以使用元组而不是临时对象，正如另一个答案中所建议的那样）。

这可行，但由于临时对象（无论是匿名对象还是元组）而显得笨拙。

或者，您可以直接在委托内部进行分配，并返回 Person 对象本身，因为您已经完成了 PersonPicture 对象：

```
 var personsWithPicturesPopulated = persons.Join(pictures, 
        person => person.Id, 
        personPicture => personPicture.PersonId,
        (person, personPicture) => { 
             person.Picture = personPicture.Thumbnail; 
             return person;
        }); 
```

这有一个额外的好处是给你一个你在列表中找到匹配的人的`personPictures`列表，省略那些没有匹配的人；这有时正是您需要的（有时不是，在这种情况下您可以丢弃连接的结果）。

# html - 在另一个图像上带有“窗口”的 PNG 图像

> ID：12678666
> 
> 赞同：0
> 
> 时间：2012-10-01T18:12:31.040
> 
> 标签：html, css

我试图达到一种效果，当一个带有 png img 的 div （这个 img 里面有洞）在另一个里面有 img 的 div 上面会出现在它上面的图像洞中，但现在它仍然结束而不是被在带有“窗口”的 img 下。由于响应问题（内部 div 的百分比宽度与外部 div 的宽度有关），我仍然希望将必须位于 img （“iphone-screen”）下的 div 与带有窗口的图像（“iphone”）保持在 div 内。如何做到这一点？这是我网站的链接（转到“Kontakt”页面）： [点击](http://jimmyweb.pl/projekty/dentmedica/)

这是我的 HTML 标记：

```
 <div id="slide6" class="slide">
        <h1 class="big">Kontakt</h1>
        <h2 class="call">Zadzwoń: <span class="thick">514 944 555</span></h2>
        <h2 class="mail">
            Napisz: <a href="mailto:biuro@dentmedica.pl"><span class="thick">biuro@dentmedica.pl</span></a>
        </h2>
        <div id="iphone">
            <img src="img/iphone.png" alt="" />
            <div id="iphone-screen">
                <img src="img/iphone-screen.png" alt="" />
            </div>
        </div>
    </div> 
```

和 CSS：

```
#slide6 #iphone{
    position:absolute;
    bottom:0;
    right:0;
    width:40%;
    z-index:600;
}

#slide6 #iphone > img{
    width:100%;
    height:auto;
    z-index:600;
}

#slide6 #iphone #iphone-screen{
    position:absolute;
    width:44.1%;
    overflow:hidden;
    bottom:24%;
    left:15%;
    z-index:100;
}

#slide6 #iphone #iphone-screen > img{
    width:100%;
    height:auto;
    z-index:100;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:17:28.837

我想这是 div 标签的问题`iphone-screen`..删除它

# knockout.js - KnockoutJS - 如果绑定性能

> ID：12678671
> 
> 赞同：2
> 
> 时间：2012-10-01T18:12:44.373
> 
> 标签：knockout.js, knockout-2.0

我有一个包含 50 个项目的可观察数组，使用 foreach 绑定呈现。

我试图理解为什么每个项目呈现的模板都受到`if`绑定的影响。本质上，我是基于计算的 observable 显示或隐藏我的模板的一大块。这让我觉得渲染时间增加了 70-100%（与使用`visible`绑定相比）。

Ryan Niemeyer[关于此主题的精彩文章](http://www.knockmeout.net/2012/03/knockoutjs-performance-gotcha-1ifwith.html)表明，将计算对象绑定到`if`绑定将导致所有内容在每次计算计算的任何部分更新时重新呈现。但是我的计算值在循环遍历可观察数组期间*不会改变值。*

```
this.filtersAvailable = ko.computed(function () { 
   return this.searchInfo.searchType() != 'invites' && this.searchInfo.searchType() != 'requests' 
}, this); 
```

为了确保它实际上没有改变，我添加了这个：

```
this.filtersAvailable.subscribe(function(newVal) { alert("fa" + newVal); });
this.searchInfo.searchType.subscribe(function(newVal) { alert("st" + newVal); }); 
```

也就是说，这个计算*是*在比我的可观察数组的单个视图模型更高的级别上定义的，并且在我的模板中的其他位置重复 *调用，当然也被我的可观察数组中的每个其他项目调用。*

计算出的 observable 的这种重复*调用*`if`是否会导致绑定到它的东西重新渲染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T02:13:31.027

一次又一次地访问计算出的 observable 的值不是问题，因为每次都取回缓存的值。听起来您的订阅没有显示频繁更新？

即使值相同，计算也会如此。您可以尝试抛出一个​<code><div data-bind="text: Date()"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ code> 在您的`if`部分中，看看日期的更新是否比您预期的更频繁。

如果一切都一次又一次地重新渲染，那么日期可能会接近相同。对于值为真值的情况，if 绑定的开销稍大一些，因为它获取子元素的副本，然后将副本呈现为模板并对其进行绑定。visible 只会设置显示样式。现在，如果初始值可能为假并且隐藏部分中有很多标记/绑定，if 绑定可以为您提供更好的性能。if 甚至不会渲染它们，虽然可见仍然会绑定，但只是隐藏。

你也可以尝试一个命名模板，在那里你有你的 if。如果您在`if`a 中进行`foreach`操作，那么 KO 必须在每个 foreach 项中一次又一次地将子元素复制为模板。你可以做到`<div data-bind="template: { name: 'subItemTmpl', 'if': myFlag, data: subData"></div>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T19:45:18.157

如果不查看更多代码，就很难对问题所在形成一个好主意。但是，通过使用最新的 Knockout 候选版本，您可能会看到改进，其中包括对`if`绑定的优化，以消除不必要的重新渲染。可在[https://github.com/SteveSanderson/knockout/downloads](https://github.com/SteveSanderson/knockout/downloads)下载。

# .net - 南希自助托管 - 服务不可用 - Win7

> ID：12678674
> 
> 赞同：5
> 
> 时间：2012-10-01T18:12:56.153
> 
> 标签：.net, nancy

我已经放弃了我正在使用的东西，并使用了最简单的代码：

```
class Program
{
    static void Main(string[] args)
    {
        var nancyHost = new Nancy.Hosting.Self.NancyHost(new   Uri("http://localhost:8080"));
        nancyHost.Start();

        Console.ReadLine();
        nancyHost.Stop();
    }
}
public class MainModule : Nancy.NancyModule
{
    public MainModule()
    {
        Get["/"] = x =>
        {
            return "Hello world!";
        };
    }
} 
```

当我浏览到

```
 http://localhost:8080 
```

我得到：

* * *

暂停服务

http错误503服务不可用。

* * *

我尝试了几种解决方案。包括以下几个变化：[远程访问 Nancy Self Host](https://stackoverflow.com/questions/8548678/remote-access-to-a-nancy-self-host/8550851#8550851)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T05:39:45.353

确保您以管理员身份运行 Visual Studio，并且`8080`没有同时被其他人使用。查看自托管演示，它为自托管应用程序设置了几个不同的 URI [https://github.com/NancyFx/Nancy/blob/master/src/Nancy.Demo.Hosting.Self/Program .cs#L12](https://github.com/NancyFx/Nancy/blob/master/src/Nancy.Demo.Hosting.Self/Program.cs#L12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T04:03:24.320

我不知道这个答案会有多少价值，但是当我使用以下设置组合启动 Nancy 时，我确实遇到了同样的 503 错误：

```
_nancyHost = new NancyHost(new HostConfiguration { 
        RewriteLocalhost = false
    }, 
    new Uri(string.Format("http://localhost:{0}", port))); 
```

使用本地浏览器访问[http://localhost:3684/](http://localhost:3684/)以访问在 Windows 服务中作为本地系统运行的 Nancy时遇到错误

默认设置为 true的先前版本`RewriteLocalHost`一直在工作。这是我在这里尝试诊断我的问题时尝试的事情之一：[如何远程访问自托管的 Nancy 服务？](https://stackoverflow.com/questions/33559157/how-do-i-remotely-access-self-hosted-nancy-service)

# android - 在 ANT 中执行 `android update project` 失败，找不到 sdkmanager.jar

> ID：12678678
> 
> 赞同：0
> 
> 时间：2012-10-01T18:13:17.057
> 
> 标签：android, linux, bash, shell, ant

尝试对项目执行 android 更新时，出现以下错误。使用Linux。

这是ant代码（`${directory}`android项目的目录在哪里）：

```
<exec
    executable="/bin/bash"
    failonerror="true">
        <arg value="android"/>
        <arg value="update"/>
        <arg value="project"/>
        <arg value="-p"/>
        <arg value="${directory}"/>
</exec> 
```

* * *

这是错误：

```
[exec] android: can't find sdkmanager.jar 
```

* * *

我已尝试更改 to 的权限，`sdkmanager.jar`但`777`它仍然给出相同的错误。

从 bash 或 shell 脚本执行相同的命令时，它可以正常工作。在终端上运行时，它工作正常。

是什么导致了这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:40:21.603

如果您正在调用的脚本已经包含`!/bin/sh`脚本顶部的 ，则无需调用`/bin/bash`ant 中的可执行文件`exec`。

因此，如果我将问题中发布的代码更改为此...

```
<exec
    executable="android"
    failonerror="true">
        <arg value="update"/>
        <arg value="project"/>
        <arg value="-p"/>
        <arg value="${directory}"/>
</exec> 
```

...它工作正常。

谢谢，希望这对将来的人有所帮助。

# binary - 了解人口计数算法

> ID：12678685
> 
> 赞同：3
> 
> 时间：2012-10-01T18:13:30.193
> 
> 标签：binary, bitwise-operators, bit, operations, representation

我寻找了做popcount（设置位计数）的好方法。我找到了这个，在这里

[http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan)

```
unsigned int v; // count the number of bits set in v
unsigned int c; // c accumulates the total bits set in v
for(c = 0; v; c++) 
{
    v &= v - 1; // clear the least significant bit set
} 
```

尝试几个例子，它确实有效。二元运算/表示的什么属性使它起作用？

你能暗示一些关于popcount和二进制表示的进一步阅读吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:39:00.340

您从一个初始设置开始，该初始`v`设置最初包含 n 位。

游戏的重点是在循环的每次迭代中减少 1 位要计数。这样，我们可以只计算在达到 n = 0 的点之前所需的循环迭代次数来计算初始 n 的值。

请注意，如果 n = 0，则 v = 0，因此循环将在此时停止。但只要 v > 0，我们将至少运行一次循环体。在每次迭代中，我们最终得到的 av 的位数少了 1 个。

这就是为什么。我们需要的第一个属性是`v && v == v`. 现在`v`是一个位序列（确切的位数取决于您的机器/操作系统），您可以从最高位到最低位进行排序。当您递减 时`v`，我们可以注意到以下内容：

1.  最低有效位，称为 v[k]，设置为 1 将设置为 0；
2.  当您递减时，所有比 v[k] 更重要的位都*不会*`v`改变。

因此，`v`与它的减量将保留所有更重要的位，但将 v[k] 设置为 0。根据定义，所有低于 v[k] 的位，即 v[k-1] ... v [0] 已经是 0，因为 v[k] 是“为 1 的最低有效位”。因此，在 AND 之后，所有较低有效位将保持为 0。结果是`v && (v - 1)`包含的位设置为 1 比`v`已经少一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:26:54.133

`1`从一个位中减去一个`0`位会将该位变为 a`1`并导致从左边的下一位借位，从而也导致`1`那里的减法。这继续向左级联，直到您到达一点，从`1`那里减去is 。至此减法完成。您已将所有转换为第一个设置位，并将该位从转换为.`1``1``0``0``1``1``0`

当您`and`使用之前和之后的值时，`before`第一个位的右侧`after`为零，并且该位的该位为零。由于任何与零相加的东西都是零，因此您保留原始值中的所有零并将单个位也设置为零。

# iphone - 如何解决 Thread1：信号 SIGABRT？用这一行 [[NSBundle mainBundle] loadNibNamed:@"DVDListingView" owner:self options:nil];

> ID：12678687
> 
> 赞同：0
> 
> 时间：2012-10-01T18:13:42.380
> 
> 标签：iphone, ios, xcode, ios5, ios4

> **可能重复：**
> [如何从 Xib 文件加载自定义 UITableViewCells？](https://stackoverflow.com/questions/540345/how-do-you-load-custom-uitableviewcells-from-xib-files)

这是我的代码..

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"LibraryListingCell";

    DVDListingViewCell *cell = (DVDListingViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"DVDListingView" owner:self options:nil];
        cell = [_cell autorelease];
        _cell = nil;
    }

    cell.titleLabel.text = [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"title"];    
    cell.featureLengthLabel.text = [NSString stringWithFormat:@"%@ minutes", 
                                    [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"featureLength"]];
    cell.coverImageView.image = [UIImage 
                                 imageNamed:[[dao libraryItemAtIndex:indexPath.row] valueForKey:@"coverImage"]];

    return cell;
} 
```

如何解决 Thread1 : Signal SIGABRT 问题与这一行 [[NSBundle mainBundle] loadNibNamed:@"DVDListingView" owner:self options:nil];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:16:16.277

我建议您尝试一下，同时确保您**的“DVDListingView.xib”是自定义单元格的 NIB**

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"LibraryListingCell";

    DVDListingViewCell *cell = (DVDListingViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"DVDListingView" owner:self options:nil];
        for(id currentObject in topLevelObjects){
            if([currentObject isKindOfClass:[DVDListingViewCell class]]){
                cell = (DVDListingViewCell *)currentObject;
                break;
            }
        }
    }

    cell.titleLabel.text = [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"title"];    
    cell.featureLengthLabel.text = [NSString stringWithFormat:@"%@ minutes", 
                                    [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"featureLength"]];
    cell.coverImageView.image = [UIImage 
                                 imageNamed:[[dao libraryItemAtIndex:indexPath.row] valueForKey:@"coverImage"]];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:49:55.320

线

```
 [[NSBundle mainBundle] loadNibNamed:@"DVDListingView" owner:self options:nil]; 
```

返回一个 NSArray。它需要是这样的：

```
NSArray *xibObjectArray =  [[NSBundle mainBundle] loadNibNamed:@"DVDListingView" owner:self options:nil];
//retrieve items from the array
if (xibObjectArray.count == 1) {
     cell = [xibObjectArray objectAtIndex:0];
} else {
     for (UIView *randomView in xibObjectArray) {
        if ([randomView isKindOfClass:[DVDListingViewCell class]]) {
           cell = (DVDListingViewCell *)randomView;
        }
     }
} 
```

# javascript - 这两段js代码有什么区别吗？

> ID：12678697
> 
> 赞同：-2
> 
> 时间：2012-10-01T18:14:37.697
> 
> 标签：javascript, cross-browser, cross-platform

您能告诉我以下两个代码的含义是否完全相同（在所有操作系统下，包括我无法测试的 Mac）？

**代码 1**

```
if($('#mail1').val()==$('#mail2').val()){} 
else{
alert("Mail inputs don't match!");return;
} 
```

**代码 2**

```
if($('#mail1').val()!=$('#mail2').val()){
alert("Mail inputs don't match!");return;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:16:37.900

第一个代码是多余的，你不需要`if-else`，第二个更正确，但这更正确：

```
if($('#mail1').val() !== $('#mail2').val()){
  alert("Mail inputs don't match!");
  return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:15:57.323

> 你能告诉我以下两个代码的含义是否完全相同

对，他们是。

我有时在代码中看到一个*空块。* `if`我的猜测是一些开发人员发现它更容易阅读，或者*空* `if`块用作未来的占位符。无论哪种方式，我都不使用或提倡这样的编码实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:19:14.967

它会是一样的。你有：

```
if (something) then do nothing
else do this-action 
```

和

```
if (not something) then do this-action 
```

一样，是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:17:48.740

确实如此，但您应该使用 === 而不是 == 或 !== 而不是 != 。三等号避免了类型强制。

# embedded - 通过 USB 模拟 UART

> ID：12678698
> 
> 赞同：7
> 
> 时间：2012-10-01T18:14:45.500
> 
> 标签：embedded, usb, emulation, uart

有人知道是否可以通过 USB 模拟 UART（简单串行发送和接收）？这将如何实现？

我在 Microchip 网站上找到了这个链接，但不是很及时。

[http://www.microchip.com/forums/m522571-print.aspx](http://www.microchip.com/forums/m522571-print.aspx)

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T19:18:05.647

您需要将设备堆栈实现为 CDC ACM 设备（也称为*虚拟 COM 端口*或 VCP）。大多数支持 USB 的微控制器供应商都有示例代码或应用说明。

鉴于此，就 Windows 而言，您的设备看起来就像一个 COM 端口。在设备端，您将获得传输的原始数据块。可以为 UART 和 USB 接口实现适当的抽象层，以便在必要时提供相同的接口。

一个问题是 USB 设备需要一个由 USB 实施者论坛分配的供应商 ID，[费用为 5000 美元](http://www.usb.org/developers/vendor/)（2016 年 7 月 23 日正确）。如果您要在野外发布您的设备，如果您的设备要被识别并在其他设备上正常运行，您真的需要一个。一些微控制器供应商将允许您免费或以较少的费用将其供应商 ID 用于产品 ID 的子集，但如果您从他们那里购买大量设备，他们可能只会这样做。

另一个问题是，在 OSX 或 Linux 上，无需任何额外驱动程序即可识别 CDC/ACM，而 Windows 则更为繁琐，需要一个 INF 文件才能将特定的 USB 供应商和产品 ID 与 usbser.sys 驱动程序相关联。然后，您将进入驱动程序签名的整个世界，这对于使用 Windows Vista 64 或任何版本的 Windows 7 是必不可少的。代码签名签名也会让您花钱。如果您的供应商提供了示例 VCP 代码，他们也可能会提供签名的驱动程序。STMicroelectronios 的 STM32 VCP 示例甚至通过了 WHQL 认证，因此可以通过 Windows 更新自动获取。

所以结果是，如果您的供应商已经提供了代码和签名的驱动程序（或者您没有使用 Windows），那么您可以进行实验，但是要部署产品，您将需要供应商 ID 和代码签名证书。老实说，这有点像雷区。

一种更简单的方法是使用 FTDI USB<->串行芯片。这对于没有自己的 USB 控制器的微控制器特别有用，但数据传输速率将受到微型和/或 FTDI 的 UART 接口而不是 USB 速度的限制。FTDI 芯片可以使用 FTDI 的 VID/PID 原样使用，或者您可以使用自己的 VID/PID 对其进行自定义。自定义使您重新需要获取 VID 和签名证书，但允许您的设备被唯一标识，而不是作为通用串行端口。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T19:17:20.803

基本上，您有两个选项可以通过 USB 模拟 UART：

1.  使用现有产品。FTDI 公司提供众所周知的可靠的 UART-USB 桥接芯片，例如 FT230X。优点：您不需要任何有关 USB 的详细知识。缺点：如果用于大规模生产，价格会很高。额外的硬件，需要额外的力量。

2.  实现 USB 设备类“通信设备类”(CDC)。CDC 的规范可从 USB.org 获得，请参见[此处](http://www.usb.org/developers/devclass_docs/)。优点：批量生产便宜（如果您的微控制器板载 USB）。缺点：您需要有关 USB 的详细知识。

# asp.net-mvc - 是否可以在 Razor 表单块中嵌套 Razor 部分？

> ID：12678699
> 
> 赞同：3
> 
> 时间：2012-10-01T18:14:48.477
> 
> 标签：asp.net-mvc, razor

我有以下 Razor 标记块：

```
@section StoreSearch
{
    @Html.Partial("SearchPartial", Model)
}
<section id="gallery-index">
...
</section>
<nav class="pager">
    <a href="#" rel="prev" class="pager-nav" title="Previous Page">Prev</a> Page @(Model.PageIndex + 1) of @Model.PageCount <a href="#" rel ="next" class="pager-nav" title="Next Page">Next</a>
</nav> 
```

我想用一个表格包围整个街区，如

```
@using (Html.BeginForm("Index", "Gallery", FormMethod.Post, new { id = "search-form" }))
{
    @section StoreSearch
    {
        @Html.Partial("SearchPartial", Model)
    }
    <section id="gallery-index">
        ...
} 
```

然而，当我这样做时，解析器似乎`@section StoreSearch`对这部分犹豫不决，并抱怨“无法解析符号 StoreSearch”。

是我试图不允许的，还是我只是错过了某种转义方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:44:07.933

看起来您在 Razor 解析引擎中发现了一个错误。using 子句中的第一个 @ 符号很可能被解析为变量，在您的情况下，它实际上是一个函数，因此它会引发异常。现在的解决方案是用一个`div`（或任何 html 元素）包围你的部分。

```
@using (Html.BeginForm("Index", "Gallery", FormMethod.Post, 
                       new { id = "search-form" }))
{
  <div>
    @section StoreSearch
    {
      @Html.Partial("SearchPartial", Model)
    }
    <section id="gallery-index">
    ...
    </section>
  </div>
} 
```

# php - 通过 AJAX 提交并返回 JSON 响应的表单

> ID：12678701
> 
> 赞同：-4
> 
> 时间：2012-10-01T18:14:59.587
> 
> 标签：php, jquery, ajax, json, forms

我已经设置了表单并编写了 jquery，但我不知道应该为 mail.php 中的 PHP 编写什么。

任何帮助都是极好的

HTML：

```
<form id="contact-form" action="mail.php" method="GET">
   <fieldset>
       <label for="email">Email</label>
       <input type="email" name="email" id="email" required="">
   </fieldset>

   <fieldset>
       <label for="enquiry">Message</label>
       <textarea name="enquiry" id="enquiry" width="100%" height="100px" required=""></textarea>
   </fieldset>

   <fieldset>
        <input type="submit" name="submit" value="Submit Enquiry">
   </fieldset>

</form> 
```

查询：

```
$(document).ready(function(){

$("#contact-form").submit( function (){
    $.getJSON('mail.php',$(this).serialize(), function(data) { 
        if(data['success'] == 1)
        {
            $('#contact-form').html("<p class=\"success\">"+data['message']+"</p>");
        }
        else
        {
                alert(""+data['message']+"");
                $('#contact-form *').removeClass('error');
                for(key in data.errors)
                {
                    $('#'+key).addClass('error');
                }
        }
    });
    return false;
});

}); 
```

PHP：

```
? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:24:10.173

在服务器端使用它

```
parse_str($_GET["data"],$array);

mail($array["email"]); 
```

在jQuery中

```
 $.getJSON('mail.php',{"data":$(this).serialize()}, function(data) { ...

                  or

var data=$("#contact-form").serialize();
$.ajax(
url:'mail.php';
{data:{"data":data},
datatype:"json",
success:(function(data){

   if(data['success'] == 1)
        {
            $('#contact-form').html("<p class=\"success\">"+data['message']+"</p>");
        }
        else
        {
                alert(""+data['message']+"");
                $('#contact-form *').removeClass('error');
                for(key in data.errors)
                {
                    $('#'+key).addClass('error');
                }
        } 
    }) 
```

# c++ - boost::asio 接受器避免内存泄漏

> ID：12678702
> 
> 赞同：4
> 
> 时间：2012-10-01T18:15:03.420
> 
> 标签：c++, networking, boost, boost-asio

使用 boost::asio 我使用 async_accept 接受连接。这很好用，但是有一个问题，我需要一个如何处理它的建议。使用典型的 async_accept：

```
 Listener::Listener(int port)
        : acceptor(io, ip::tcp::endpoint(ip::tcp::v4(), port))
        , socket(io) {
          start_accept();
  }

  void Listener::start_accept() {
      Request *r = new Request(io);
      acceptor.async_accept(r->socket(), 
        boost::bind(&Listener::handle_accept, this, r, placeholders::error));
  } 
```

工作正常，但有一个问题：**请求**对象是用纯**新**创建的，因此它可以内存“泄漏”。不是真正的泄漏，它仅在程序停止时泄漏，但我想让*valgrind*高兴。

当然有一个选项：我可以用**shared_ptr**替换它，并将它传递给每个事件处理程序。这将一直有效，直到程序停止，当 asio **io_service**停止时，所有对象都将被销毁并且**Request**将被释放。但是这样我总是必须为**Request**有一个活动的 asio 事件，否则它将被破坏！我认为这是直接崩溃的方式，所以我也不喜欢这种变体。

UPD 第三个变体：`Listener`将 shared_ptr 列表保存到活动连接。看起来很棒，除非找到更好的方法，否则我更喜欢使用它。缺点是：由于此模式允许在空闲连接上进行“垃圾收集”，因此它不安全：从侦听器中删除连接指针将立即销毁它，当某些连接的处理程序在其他线程中处于活动状态时可能导致段错误。在这种情况下，使用互斥锁不能解决这个问题，我们必须锁定几乎任何东西。

有没有办法让**接受器**与连接管理一起使用一些漂亮和安全的方式？我很高兴听到任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:00:00.077

使用此库时避免内存泄漏的典型方法是使用 a `shared_ptr`，`io_service` [文档](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service/_io_service.html)特别提到了这一点

> 评论
> 
> 上述销毁顺序允许程序通过使用`shared_ptr<>`. 如果对象的生命周期与连接的生命周期（或某些其他异步操作序列）`shared_pt`相关联，则对象的 r 将绑定到与其关联的所有异步操作的处理程序中。这工作如下：
> 
> 当单个连接结束时，所有关联的异步操作都完成。相应的处理程序对象被销毁，并且对对象的所有 shared_ptr 引用都被销毁。要关闭整个程序，调用该`io_service`函数以尽快`stop()`终止任何调用。`run()`上面定义的 io_service 析构函数会销毁所有处理程序，导致`shared_ptr`对所有连接对象的所有引用都被销毁。

对于您的方案，更改您的`Listener::handle_accept(`) 方法以获取`boost::shared_ptr<Request>`参数。您的第二个顾虑

> 从侦听器中删除连接指针将立即销毁它，当某些连接的处理程序在其他线程中处于活动状态时，可能会导致段错误。在这种情况下，使用互斥锁不能解决这个问题，我们必须锁定几乎任何东西。

`boost::enable_shared_from_this`通过从类中的模板继承来缓解：

```
class Listener : public boost::enable_shared_from_this<Listener>
{
   ...
}; 
```

然后当您调度处理程序时，使用`shared_from_this()`而不是`this`绑定到 . 的成员函数时`Listener`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:56:52.647

如果有人感兴趣，我找到了另一种方法。`Listener`保存 shared_ptr 到活动连接的列表。`io_service::post`连接结束/终止是通过`Listener::FinishConnection`使用`asio::strand`. 通常我总是用 strand 包装 Request 的方法——它在 DDOS 和/或线程安全方面更安全。`FinishConnection`因此，从`post`using中调用可以`strand`防止其他线程中的段错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T17:16:27.483

不确定这是否与您的问题直接相关，但通过使用*Boost Asio*库，特别是`acceptor`您提到的同一个对象，我也遇到了类似的内存泄漏。原来我没有正确关闭服务；一些连接将保持打开状态，并且它们相应的对象不会从内存中释放。调用以下命令消除了*Valgrind*报告的泄漏：

```
acceptor.close(); 
```

希望这对某人有用！

# html - 当我点击提交按钮时，它会自动导航到网页底部

> ID：12678706
> 
> 赞同：-2
> 
> 时间：2012-10-01T18:15:21.050
> 
> 标签：html, css

我想知道，假设我在我的应用程序（Html、Javascript、php、css）的网页顶部，当我点击表单中的提交按钮时，它会导航到底部页？

这可以解决吗？

以下是我拥有的代码示例：

```
<?php

if ($sessionMinus == $_SESSION['initial_count']){ 

    $action = 'thankyou.php'; 

}elseif($sessionMinus != $_SESSION['initial_count']){ 

    $action = $_SERVER['PHP_SELF']; 

}

?>

    <form id="QandA" action="<?php echo htmlentities($action); ?>" method="post" onsubmit="return myClickHandler()">

    .....//A html table

    <p><input id="submitBtn" name="submitDetails" type="submit" value="Submit Details" /></p>

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:19:17.867

看起来表单操作有点像链接`<p><a href="#bottom">some text</a></p>` ，为了解决这个问题，您需要检查表单上的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:21:07.353

假设您有一个带有 Id 的 header div`divHeader`和一个带有 Id 的 Footer div `divFooter`。然后将您的 javascript 代码提供给按钮`onclick`事件。这样每当您单击它时它就会重定向到页脚。使用`a`标签来实现它（一个标签很容易理解）

# python - 阻止 Django 缩小我的 less 文件

> ID：12678712
> 
> 赞同：2
> 
> 时间：2012-10-01T18:15:53.830
> 
> 标签：python, django, less

我正在通过 django 的模板生成一个 .less 文件。我基本上是在使用与使用基本较少文件的 html 页面相同的方式执行此操作...

```
@import: "somefile.less";

// The bg image
body {background-image: url('{% block image %}{% endblock %}');} 
```

和另一个更少的文件来扩展它

```
{% extends "baseless/normal.less" %}

{% block image %}trees.jpg{% endblock %} 
```

这实际上工作正常，除了 Django 正在从输出中删除行。这基本上破坏了较少的文件，因为我有很多需要换行的//评论。

```
@import: "somefile.less";// The bg image body {background-image: url('{trees.jpg');} 
```

有没有办法阻止它这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:34:22.373

*   如果你在 shell 中渲染它，它会删除行吗？如果是，您是否使用无空格标签？
*   当您在浏览器中呈现它并且它没有在 shell 中删除时，您是否使用了试图删除空行或类似内容的中间件？

顺便说一下，**使用**django-compressor 来编译**更少的**文件。

# python - 使用记忆，但代码仍然永远运行

> ID：12678715
> 
> 赞同：4
> 
> 时间：2012-10-01T18:16:03.500
> 
> 标签：python, c, algorithm, recursion, memoization

我正在尝试解决 SPOJ 问题“[板球锦标赛](http://www.spoj.pl/problems/IPL1/)”。我用python和c编写了代码。在 python 中，输入 0.0 0/0 300 大约需要 2 秒。但在 C 中它会永远运行。C 中的代码正在运行一些较小的测试用例，例如 19.5 0/0 1

[C 中的代码](http://ideone.com/PNdgu)

```
#include<stdio.h>
float ans[10][120][300]={0};
float recursion(int balls, int reqRuns, int wickets);
int readScore(void);

int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        memset(ans,0,sizeof(ans));
        float overs;
        int myruns,wickets,target;
        scanf("%f",&overs);
        myruns=readScore();
        scanf("%d",&wickets);
        //printf("%d %d\n",myruns,wickets );
        scanf("%d",&target);
        //printf("%d %d %d\n",myruns,wickets,target);
        if(myruns>=target)
        {
            printf("%s\n","100.00");
            continue;
        }
        else if(wickets>=10)
        {
            printf("%s\n", "0.00");
            continue;
        }
        printf("overs = %f\n", overs);
        int ov = (int) overs;
        int ball = (int)(overs*10)%10;
        int totballs = 6*ov+ball;
        //printf("%d %d\n",ov,ball );
        //printf("%d %d %d\n",totballs, target- myruns,wickets );
        float finalAns = recursion(totballs,target-myruns, wickets)*100;
        printf("%.2f\n",finalAns);

    }
    return 0;
}

int readScore()
{
    char ch;
    int ans2=0;
    ch = getchar();
    //ch = getchar();
    //ans = ans*10 + ch-'0';
    //printf("sadasdas %d\n",ch );
    while(ch!='/')
    {
        ch=getchar();
        //printf(" ch = %d\n", ch-'0');
        if(ch!='/')
        ans2 = ans2*10 + ch-'0';

    }
    //printf("%d\n",ans );
    return ans2;
}

float recursion(int balls, int reqRuns, int wickets)
{
    if (reqRuns<=0)
        return 1;
    if (balls==120||wickets==10)
        return 0;
    if(ans[wickets][balls][reqRuns]!=0)
        return ans[wickets][balls][reqRuns];

    ans[wickets][balls][reqRuns] = (recursion(balls+1, reqRuns,wickets)+recursion(balls+1, reqRuns-1,wickets)+
    recursion(balls+1, reqRuns-2,wickets)+recursion(balls+1, reqRuns-3,wickets)+
    recursion(balls+1, reqRuns-4,wickets)+recursion(balls+1, reqRuns-5,wickets)+
    recursion(balls+1, reqRuns-6,wickets)+recursion(balls+1, reqRuns,wickets+1)+
    2*recursion(balls, reqRuns-1,wickets))/10;
    return ans[wickets][balls][reqRuns];
} 
```

[Python 中的代码](http://ideone.com/b4Vad)

```
from __future__ import division

saved = {}
t = input()

def func(f):
    if f in saved:    return saved[f]
    x,y,z,n = f 
    if z >= n:    return 1
    if x == 120:    return 0 
    if y == 10:    return 0

    saved[f] = (func((x+1,y+1,z,n)) + func((x+1, y,z,n)) + func((x+1,y,z+1,n)) + func((x+1, y, z+2,n)) + func((x+1, y, z+3,n)) + func((x+1, y, z+4,n)) + func((x+1, y, z+5,n))+ func((x+1, y, z+6,n))+ func((x,y,z+1,n)) + func((x,y,z+1,n))) / 10
    return saved[f]

def converter(f):
    v = f.index('.')
    x,y = int(f[:v]), int(f[-1])
    return x*6+(y)

for i in range(t):
    x,y,z = raw_input().split()
    v = y.index('/')
    q = int(y[:v])
    x,y,z = converter(x), int(y[(v+1):]), int(z)
    print  '%.2f' % (100 * func((x,y,q,z))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:19:28.223

你的问题是递归的很多结果都是0，所以

```
if(ans[wickets][balls][reqRuns]!=0)
    return ans[wickets][balls][reqRuns]; 
```

在许多情况下无法返回缓存的结果，因此您要重新计算**许多**结果，而`f in saved`Python 中的检查会阻止重新计算相同的值。

我更改了您的 C 代码以将 的初始条目设置`ans`为包含负数（如果您知道您的平台的浮点表示为 IEEE754，只需更改为`memset(ans, 0x80, sizeof ans);`will do），并将条件替换为

```
if (ans[wickets][balls][reqRuns] >= 0) 
```

并立即得到结果：

```
$ time ./a.out  < spoj_inp.txt 
overs = 0.000000
18.03

real    0m0.023s
user    0m0.020s
sys     0m0.002s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:06:52.297

问题在于您使用scanf。它将空格或换行符视为输入的终止符。您很可能在每次输入后都输入 enter。但是，问题是它将 \n 留在缓冲区中并传递给下一个输入。

如果你没有使用严格的 c，你可以调用

`cin.ignore()`

在每次 scanf 调用之后。我在您的代码上进行了尝试，并且能够成功输出。

或者，您可以致电

```
fflush(stdin); 
```

这也可能有帮助

[在stackoverflow上的scanf](https://stackoverflow.com/questions/12024503/scanf-is-not-waiting-for-input-within-my-loop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:20:24.237

我想这里应该归咎于递归。代码确实适用于较小的目标。如果可能，请摆脱递归。

对于较小的目标：

输入

```
2
0.0 0/1 10
0.0 2/2 20 
```

输出

```
100.00
99.99 
```

# javascript - 将 TypeScript 转换为 JavaScript

> ID：12678716
> 
> 赞同：51
> 
> 时间：2012-10-01T18:16:05.123
> 
> 标签：javascript, typescript

我想知道如何以跨平台的方式将[TypeScript](http://www.typescriptlang.org/)转换为 JavaScript。我知道[typescript 的节点包管理器的](http://www.typescriptlang.org/#Download)可用性，但是还有其他可以在服务器端使用的替代方案吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-01T18:36:59.607

TypeScript 编译器是在 TypeScript 中构建的，因此可以作为 JS 文件 ( [`tsc.js`](https://github.com/Microsoft/TypeScript/raw/02547fe664a1b5d1f07ea459f054c34e356d3746/lib/tsc.js)) 使用，可以使用几乎任何符合 ES3 的 VM 或 JS 实现来运行。

也就是说，编译器当前的文件 I/O 基础结构仅支持 Node 和 Windows Scripting Host 文件 API。如果您想推荐对其他环境的支持，请随时通过我们的[GitHub 站点](https://github.com/Microsoft/TypeScript) （原[CodePlex](http://typescript.codeplex.com)）与团队联系

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-03T03:23:27.003

**简短版本：**如果可以，请使用 Node。这在当今变得不可避免。

也许这不是你想要的答案，但正如大家所说，编译器是一个 JS 文件，所以，你的选项是执行一个 JS 文件的选项。

在 Windows 中，有两个明显的，Node 和 Windows Script Host。

您已经了解节点，另一个选项是所有版本的 Windows 附带的组件（我认为），您可以这样做：

```
cscript path/to/tsc.js source-file.ts 
```

您可以通过以下方式查看所有编译器选项：

```
cscript path/to/tsc.js 
```

~~在 Linux 上，我假设您应该能够使用（除了节点）：~~

~~*   V8 独立外壳，替换`node`或`cscript`使用`v8-shell`*   ExecJS [https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)~~
*   ~~所选平台上可用的任何其他 JS 运行器（例如，另一个答案提到 Rhino）~~

**更新：**另一个答案表明编译器 API 仅与节点和 Windows 脚本主机（cscript 工具）兼容，因此，如果正确，那么在 Linux 上，您将需要 Node 来编译 TypeScript。

如果您正在寻找类似的东西`apt get tsc`（或任何 Linux/Mac 包管理器），我认为没有。

我记得在某处读到过，I/O 已针对 Node 和 Windows Script Host 进行了优化，因此，如果您在选项方面遇到问题，如果寻求平台独立性，您可能最终会选择 Node。

**更新：**这里的另一个答案证实了关于兼容性的相同。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-01T22:39:10.523

具体来说，在服务器上（假设您的服务器有可用的 Node.js），您只需运行：

```
node path/to/tsc.js yourFile1.ts yourFile2.ts [etc] 
```

您可以在不输入任何文件名的情况下运行该命令以查看 tsc.js 的命令行帮助。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-04-02T18:54:26.543

从命令行你可以使用 ts-node：

```
npm install ts-node 
```

然后像这样调用命令：

```
tsc file.ts --outFile file.js 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-17T07:35:15.777

我有一个将 Typescript 编译为 Java 中的 Javascript 的项目：

[https://github.com/martypitt/typescript4j](https://github.com/martypitt/typescript4j)

正如在其他答案中所讨论的，这使用了 Rhino，因此不依赖于`npm`or `node`。

这是一个例子：

```
// Instantiate the compiler:
TypescriptCompiler compiler = new TypescriptCompiler();

// Compile a string:
String output = compiler.compile("class Greeter { greeting: string; }");

// Or, compile and output to a file:
compiler.compile(new File("example.ts"), new File('output.js')); 
```

我在[另一个项目中使用它 - 'Bakehouse'](https://github.com/martypitt/bakehouse)在 Spring 环境中执行 typescript 资源的即时编译

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-02T11:34:14.213

如果您需要以 Java 为目标，那么您可以在构建过程中使用 Rhino 引擎运行 tsc.js。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-02T00:12:37.650

编译 ts -> js：node 可用于所有常见平台，所以我不明白为什么在你已经有了 tsc.js 的情况下还想要一个 tsc.java。安装节点没什么大不了的。事实上，它比 Java 更容易。

获得 proj.js 文件后，您可以将其复制到您希望使用的任何部署平台。

在我看来，JavaScript——或者更准确地说是 ECMAScript 是 Java 的替代品。所以我很高兴我不必为使用该工具而争论 JVM 等。但是，如果您更喜欢 Java，那么为什么还要为 JS 烦恼呢？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-02T17:48:18.247

我一直在玩这个，并且可以使用以下代码用 javascript 编译 TypeScript：

```
<script src=typescript.js></script>

<script>

var scriptText = ""
        + "/// <reference path=\"test.ts\"/>" + "\r\n"
        + "class Car {"
        + "     constructor (private name: string) { } "
        + "     getName() { "
        + "         var juice = new Juice();"
        + "         return name; "
        + "     } "
        + "} "
        + "var car = new Car('Subaru Impreza');"
        + "console.log(car.getName());";

var TextWriter = function () { };

TextWriter.prototype = {
collected: '',

Write: function (sc) {
    this.collected += sc;
},
WriteLine: function(sc) {
    this.collected += sc + '\n';
},
toString: function() {
    return this.collected;
}
};

var output = new TextWriter();
var tsc = new TypeScript.TypeScriptCompiler(output);

var script = tsc.addUnit(scriptText, "");

tsc.emit();

console.log(output.toString());

</script> 
```

虽然它并不完全理想。我正在尝试运行某些东西，以便可以在 C# 中将 TypeScript 转换为 JS（使用 Javascript .NET），但是在 ts.addUnit 调用中出现堆栈溢出。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-02T06:46:33.250

**SublimeText2 技巧** 您可以直接从 SublimeText2 将 typescript 转换为 javascript（您需要节点）：

使用以下内容创建一个`Typescript.sublime-build`文件`/Sublime Text 2/Packages/User`：

```
{
"cmd": ["tsc", "$file"],
"selector" : "source.ts",
"path": "/usr/local/bin:$PATH"
} 
```

然后，现在，您可以使用 ctrl+B 或 cmd+B 转译您的代码

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-05-23T04:47:42.457

这对我有用：

首先，安装`typescript` *节点模块*>> `npm install -g typescript`。这提供了一个命令行实用程序`tsc`。

下一个，`tsc gulpfile.ts gulp-config.ts typings/tsd.d.ts`

*   `transpile`这会将`gulpfile.ts`and`gulp-config.ts`文件保存到`gulpfile.js`and `gulp-config.js`。我们提供该`typings/tsd.d.ts`文件作为正确转译的参考。
*   `typescript` *节点模块*涵盖了许多选项>>来`tsc -h`指定*输出目录或文件等*。

希望这可以帮助。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-21T07:07:35.563

您可能不想使用`ts-node`，因为它很慢，而是按照以下步骤进行快速`.ts`文件编译（确保已安装节点）：

1.  `npm i -D @types/node typescript nodemon`

2.  `npx tsconfig.json`并`node`从列表中选择。您可以根据需要自由修改它。

3.  在项目根目录中创建文件名`src/index.ts`。

4.  然后在您的 中`package.json`，添加以下 2 个脚本：

    `"scripts": { "watch": "tsc -w", "dev": "nodemon dist/index.js" },`

5.  然后使用：

    `npm run watch`

    `npm run dev`

而且，它会自动查找`.ts`文件的变化，你可以在终端中看到编译后的文件输出！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-12T03:26:42.967

如果您使用的是“firebase -tool”，您可以使用

```
npm run build 
```

在您的函数目录中。

# c# - 我得到的是“输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符”

> ID：12678719
> 
> 赞同：2
> 
> 时间：2012-10-01T18:16:08.383
> 
> 标签：c#, encryption, base64

我正在使用以下代码加密/解密一些纯文本。

```
private static string EncryptionKey = "@#$%^&*()2343";    
private static byte[] Salt = Encoding.ASCII.GetBytes(EncryptionKey.Length.ToString()); 

public static string EncryptIt(string Input)    
{    
    RijndaelManaged Cipher = new RijndaelManaged();    
    byte[] TextByteArray = Encoding.Unicode.GetBytes(Input);    
    PasswordDeriveBytes Key = new PasswordDeriveBytes(EncryptionKey, Salt);    

    using (ICryptoTransform Transform = Cipher.CreateEncryptor(Key.GetBytes(32), Key.GetBytes(16)))    
    {        
        using (MemoryStream MS = new MemoryStream())    
        {    
            using (CryptoStream CS = new CryptoStream(MS, Transform, CryptoStreamMode.Write))    
            {    
                CS.Write(TextByteArray, 0, TextByteArray.Length);    
                CS.FlushFinalBlock();    
                return Convert.ToBase64String(MS.ToArray());    
            }    
        }    
    }    
}    

public static string DecryptIt(string Input)    
{    
    RijndaelManaged Cipher = new RijndaelManaged();    
    byte[] EncryptedByteArray = Convert.FromBase64String(Input);    
    PasswordDeriveBytes Key = new PasswordDeriveBytes(EncryptionKey, Salt);    

    using (ICryptoTransform Transform = Cipher.CreateDecryptor(Key.GetBytes(32), Key.GetBytes(16)))    
    {    
        using (MemoryStream MS = new MemoryStream(EncryptedByteArray))    
        {    
            using (CryptoStream cryptoStream = new CryptoStream(MS, Transform, CryptoStreamMode.Read))    
            {    
                byte[] TransformedText = new byte[EncryptedByteArray.Length];    
                int Count = cryptoStream.Read(TransformedText, 0, TransformedText.Length);    
                return Encoding.Unicode.GetString(TransformedText, 0, Count);    
            }    
        }    
    }    
} 
```

在大多数情况下，此代码可以正常工作。但是，在某些情况下，当我尝试解密加密文本时，`byte[] EncryptedByteArray = Convert.FromBase64String(Input)`在`DecryptIt`方法中调用时会出现以下异常。

> 输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符、两个以上的填充字符或填充字符中的非空白字符。

任何想法可能导致此异常。我发现更令人费解的是，为什么这个异常并没有出现在每个案例上，而且只有少数案例。

**编辑：** 下面是引发异常的 DecryptIt 方法的示例输入。请注意，我在上面的示例中更改了 EncryptionKey 变量的值。

> oaOQ6qWWDwWby3C04N7HJAiqQgILBifqdHq4OQ5KDDRA3F2ZlBITu31a8mJJQ8sKn4g3vODFEJbigtNZozv6ockAdsDChhHwaaLL4l8MJPKbV1EiUE3rL30y+xHz/S1a8mJJQ8sKn4g3vODFEJbigtNZozv6ockAdsDChhHwaaLL4l8MJPKbV1EiUE3rL30y+oz/eR9OzXn+3Lepo0tRqH5BsfvEtJ/IcqRu3gJiIBTMAM0TmVxa2EZSj2mn6jZlgvlOEFCWzNKS3R9OzXn+In1br14venJmpApXyt930khz35UE5BtWn3Fq7jyer6mY2l60P/cI4z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:36:54.647

您的样本在结尾处带有 2 个额外的 '=' 完美反转换。
所以他们在运输中迷路了。

> 加密文本通过电子邮件在 http 链接中发送。

那么这涉及 URL 和 HTML 编码？有很大的出错空间。

使用以 .结尾的小字符串运行测试`==`。

# javascript - JS SDK - 发布到页面墙

> ID：12678723
> 
> 赞同：2
> 
> 时间：2012-10-01T18:16:15.560
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-page

我正在使用 JavaScript SDK。我有一个具有发布权限的应用程序，在采取某些操作后，将在登录用户墙上发布帖子，如下所示：

```
FB.getLoginStatus(function (response) {
    //we are authorized
    if (response.status == "connected") {
        var name = "Post name";
        var body = "Post body";
        var caption = "The caption";
        var description = "The description";
        var link = "http://www.facebook.com/mypage";
        FB.api('/me/feed', 'post', { message:body,caption:caption,link:link,name:name,description:description}, function (response) {
       console.log(response);
        });
    }
}); 
```

我想做的是在用户页面成功发布后发布到特定的 Facebook 页面。有没有办法安全地预先授权应用程序来做到这一点？这可以通过 JavaScript SDK 实现，还是完全可以实现？我环顾四周，并没有找到明确的答案。我正在查看 FB 文档，但发现有些地方有点参差不齐。谁能告诉我这是否可能？任何帮助或建议将不胜感激，非常感谢！

**编辑：**我的错误，我应该提供更多信息。这是我正在尝试做的事情：

```
var body = "The body";
var caption = "The caption";
FB.api("mypageid/feed", "post", { message: body, caption: caption }, function (response) {
    console.log(response);
}); 
```

我收到错误消息，`"this api call requires a valid app_id"`但是我的页面 ID 是有效的。当我打电话`FB.init()`时，我正在传递我的应用程序 ID，它适用于登录用户提要的第一篇文章。

**编辑：**

我已经做出了 Igy 建议的更改。现在我收到错误消息：""(#200) 用户没有授予应用程序自动发布提要故事的权限""

现在，正如我所说，我正在尝试发布到 Facebook 页面。我已经登录到拥有该页面的帐户，并且我已经转到该应用程序并单击允许以下权限：

```
email,user_photos,publish_stream 
```

当我使用拥有该页面的帐户登录并检查我的状态时：

```
FB.getLoginStatus(function (response) {
    console.log(response);
}); 
```

我得到“连接”。我做错了吗？除了授权拥有该页面的帐户之外，我还需要做更多的事情吗？有没有办法为页面设置允许权限？我做了一点挖掘，但找不到答案。

**编辑**：好的，现在发生的事情是，如果我登录到拥有该页面的帐户，则该页面将发布该帖子。如果我使用另一个帐户登录，我会返回一个 ID 作为对 API 调用的响应，但它似乎不是有效的对象 ID。例如我刚刚得到这个：

```
id: 499973616681852_507724422573438 
```

如果我去`http://graph.facebook.com/499973616681852_507724422573438`

我收到一个“`unsupported get request"`图形 api 异常，这表明返回的 id 无效。我觉得我在这里很近，但我错过了一些东西。任何建议都将不胜感激，再次感谢所有回复的人。

编辑：删除了页面的链接，这是无意中留下的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:05:21.337

最好先尝试让它在[图形资源管理](http://developers.facebook.com/tools/explorer)器中工作。请注意，您可以在右上角选择要在哪个应用程序下运行。我刚刚使用 /PAGE_ID/feed 在您的页面上发了一个帖子，效果很好。您将需要 publish_stream 权限。如果你可以让它在图形资源管理器中工作，你就会知道它可以在 JS SDK 中工作，而且你只是犯了某种语法错误。

另请注意，对于返回“不支持的获取请求”的图的某些调用，有一个[开放的高优先级错误报告。](http://developers.facebook.com/bugs/160155304123891?browse=search_5068c0031d0087976417345)因此，即使您返回的 id 无效，请检查页面本身以查看帖子是否出现。

我还注意到用户本身也遇到了同样的错误。试试[https://graph.facebook.com/507724422573438](https://graph.facebook.com/507724422573438)。这是您应用的测试用户吗？如果是这样，作为真正的用户可能值得尝试。

由于您想作为页面本身发布到页面，因此您需要[作为页面进行身份验证](http://developers.facebook.com/docs/authentication/pages/)，然后在进行图形 api 调用时使用该访问令牌。我不确定您是否可以将此访问令牌用于*任何*用户，或者仅允许管理页面的用户使用。您最好使用图形浏览器进行一些实验以找出答案。

# ios - iOS NSURLConnection 委托问题

> ID：12678724
> 
> 赞同：0
> 
> 时间：2012-10-01T18:16:19.240
> 
> 标签：ios, delegates, nsurlconnection

我有一个视图，它有一个 UITableView，我在其中延迟加载图像。我有一个名为 ThumbDownloader 的类，我在其中初始化一个 NSURLConnection 并在调用 connectionDidFinishLoading 时完成加载图像后，在 connectionDidFinishLoading 中，我将这样的调用返回到我的主视图：

```
[delegate appImageDidLoad:self.indexPathInTableView]; 
```

在我的主视图中，我有一个 ThumbDownloader 实例数组。该数组名为：imageDownloadsInProgress

问题是，如果我在所有图像下载完成之前进入视图并快速退出，我会得到僵尸：

```
 -[myApp appImageDidLoad:]: message sent to deallocated instance 0xa499030 
```

我尝试了很多方法在 dealloc 等中释放 ThumbDownloader 实例，但似乎没有任何效果。

这是我设置实例并将其添加到数组的位置：

```
- (void)startIconDownload:(Product *)product forIndexPath:(NSIndexPath *)indexPath
{
    ThumbDownloader *thumbDownloader = [imageDownloadsInProgress objectForKey:indexPath];
    if (thumbDownloader == nil) 
    {
        thumbDownloader = [[ThumbDownloader alloc] init];
        thumbDownloader.product = product;
        thumbDownloader.imageSizeWidth = 87;
        thumbDownloader.imageSizeHeight = 87;
        thumbDownloader.indexPathInTableView = indexPath;
        thumbDownloader.delegate = self;
        [imageDownloadsInProgress setObject:thumbDownloader forKey:indexPath];
        [thumbDownloader startDownload];
        [thumbDownloader release];   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:19:29.100

确保清除 NSURLConnection 上的委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:22:49.897

只需添加

```
[connection cancel] 
```

在 ThumbDownloader 类的 dealloc 方法中。这将取消正在进行的下载并阻止调用该消息。

# javascript - 在 xslt 中获取长度

> ID：12678726
> 
> 赞同：3
> 
> 时间：2012-10-01T18:16:20.740
> 
> 标签：javascript, xslt

我正在尝试使用将空格附加到字符串的模板。

```
 <xsl:call-template name="append-pad">
      <xsl:with-param name="padChar" select="' '" />
      <xsl:with-param name="padVar" select="$value" />
      <xsl:with-param name="length" select="15" />
    </xsl:call-template>

<xsl:template name="append-pad">
    <!-- recursive template to left justify and append  -->
    <!-- the value with whatever padChar is passed in   -->
    <xsl:param name="padChar" />
    <xsl:param name="padVar" />
    <xsl:param name="length" />
    <xsl:choose>
      <xsl:when test="string-length($padVar) &lt; $length">
        <xsl:call-template name="append-pad">
          <xsl:with-param name="padChar" select="$padChar" />
          <xsl:with-param name="padVar" select="concat($padVar,$padChar)" />
          <xsl:with-param name="length" select="$length" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="substring($padVar,1,$length)" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

但是 with 空间的长度是动态的。这是我在 javascript 中尝试的，但在尝试调试 xslt 时出现错误提示“NAME 不能以 '' 开头。

```
function firstName(name) {
    try {
        var n = name.toString;
        var target = name.length - 20;
        var whiteString = "";
        for ( i = 0; i < target; i++) {
            whiteString.concat(" ");
        }
        n = n + whiteString;
        return n;
    } catch(err) {
        return "                   ";
    }
} 
```

如何在 xslt 中执行此逻辑？

```
 <xsl:value-of  select="concat(substring('                    ', string-length() +1), $firstName)"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:02:56.680

如果从您的 JavaScript 示例中，您总是希望将字符串填充到最多 20 个字符，那么您可以简单地使用：

```
<xsl:value-of select="concat(substring('                    ', string-length($firstName) +1), $firstName)" /> 
```

这是如何运作的？

首先取表达式：`substring(' ', string-length($firstName) +1)`

这将获取 20 个空格的字符串，并返回一个空格字符串，`20 - length`就像`$firstName`我们使用子字符串仅提取字符串的一部分一样。

然后我们使用该`concat`函数将两者连接在一起。我们将空格子串放在第一个填充左侧（尽管如果您想填充右侧，我们总是可以将它们放在第二个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:26:01.890

在选择中，您必须使用表达式。要在您的参数中设置常量值，请执行此操作

```
 <xsl:with-param name="padChar"> </xsl:with-param>
  <xsl:with-param name="length">15</xsl:with-param> 
```

# php - 测试2个mysql数据库之间的内容

> ID：12678732
> 
> 赞同：1
> 
> 时间：2012-10-01T18:16:49.693
> 
> 标签：php, mysql, testing

我有 2 个数据库，在 DB1 中只有 1 个表，在 DB2 中只有 2 个表。DB1.table1 中的每条记录都被拆分并分别存储在 DB1.table1 和 DB@.table2 中。

```
For example, DB1 has a table1 which looks like

        Student_Name   Id   Address   Attendance   Marks
        ------------   --   -------   ----------   -----
        John            1   90th st       70         90

The records that are transferred from DB1.table1 are stored in DB2.table and DB2.table2 in the following manner

DB2.table 1: Id   Student_Name   Address   
             --   ------------   -------
             1     John          90th st

DB2.table 2: Id   Attendance   Marks
             --   ----------   -----
             1     70            90 
```

我想编写一个测试用例以确保将 DB1 中的所有数据复制到 DB2。我编写了一些查询来确定是否没有将 DB1 中的记录复制到 DB2。除了找出丢失的记录外，我还想逐列检查每条记录，以确保 DB1 和 DB2 中的值相同。

从上面的示例中，如果 DB2.table1 Student_name=DB1.table1 Student_name、DB2.table1 Address=DB1.table1 Address 等，我想检查 ID=1。

如果我有 1000 列怎么办？我应该写一个长脚本来检查每一列吗？不。进行这种测试的最佳方法是什么？有没有我可以使用的工具或者我应该写下脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:00:05.577

此查询的结果将为您提供 DB2 中与 DB1 不同的行数，如果行不存在但它应该存在，它也会计数。如果结果为 0，则一切正常。

```
SELECT
    COUNT(*) AS difference
FROM
    DB1.table1 AS d1t1
    LEFT JOIN DB2.table1 AS d2t1
         USING (Id)
    LEFT JOIN DB2.table2 AS d2t2
         USING (Id)
WHERE
    (d1t1.Student_Name <> d2t1.Student_Name)
    OR (d1t1.Address <> d2t1.Address)
    OR (d1t1.Attendace <> d2t2.Attendace)
    OR (d1t1.Marks <> d2t2.Marks) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:52:35.913

这将从 和 中找到任何不匹配的`Id`行。`db1.table1``db2.table1``db2.table2`

它假定两个表中的列名称相同，并且任何存在`db2.table1`或`db2.table2`应该在`db1.table1`. 所以如果`db2.table2`有一个名为 的列`Foo`，`db1.table1`也必须有一个名为 的列`Foo`。如果`db2.table1`有一个名为 的列`Bar`，`db1.table1`也必须有一个名为 的列`Bar`。如果该列存在于`db2`但不存在于 中`db1`，您将收到 MySQL 错误。

希望这就是你要找的！

```
header("Content-type: text/plain");

// connect with mysqli

// get a list of columns in db2.table1 and db2.table2
$columns = array();
$query = mysqli_query("SELECT table_name, column_name FROM information_schema.columns WHERE table_schema = 'db2' AND table_name IN ('table1', 'table2')");
while ($row = $mysqli_fetch_assoc($query)) {
    $columns[$row["table_name"]][] = "db1.table1.{$row["column_name"]} = db2.{$row["table_name"]}.{$row["column_name"]}";
}

$query = mysqli_query("
    SELECT db1.table1.Id
    FROM
        db1.table1
        LEFT JOIN db2.table1
            ON ". implode(" AND ", $columns["table1"]) ."
        LEFT JOIN db2.table2
            ON ". implode(" AND ", $columns["table2"]) ."
    WHERE
        db2.table1.Id IS NULL
        OR db2.table2.Id IS NULL
");

while (list($id) = mysqli_fetch_row($query)) {
    echo "ID {$id} does not match\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:54:30.130

您可以通过以下方式使用 union all 和 group 来执行此操作：

```
select Student_Name, Id, Address, Attendance, Marks,
       (case when max(which) = 'db1' then 'Missing in db2'
             when min(which) = 'db2' then 'Missing in db1'
        end) as why
from ((select 'db1' as which, Student_Name, Id, Address, Attendance, Marks
       from db1.table1 t
      ) union all
      (select 'db2' as which, t1.Student_Name, t1.id, t1.Address, t2.Attendance, t2.Marks
       from db2.table1 t1 join
            db2.table2 t2
            on t1.id = t2.id
      )
     ) u
group by Student_Name, Id, Address, Attendance, Marks
having count(distinct which) = 1 
```

# scala - Scala：将集合用于（非原始）坐标值

> ID：12678733
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:16:49.770
> 
> 标签：scala, set, scala-collections

我正在为十六进制网格使用整数坐标，如下所示：

```
object Cood
{ 
  val up = Cood(0, 2)
  val upRight = Cood(1, 1)
  val downRight = Cood(1, -1)
  val down = Cood(0, - 2)
  val downLeft = Cood(-1, -1)
  val upLeft = Cood(- 1, 1)    
  val dirns: List[Cood] = List[Cood](up, upRight, downRight, down, downLeft, upLeft) 
}
case class Cood(x: Int, y: Int)
{
  def +(operand: Cood): Cood = Cood(x + operand.x, y + operand.y)
  def -(operand: Cood): Cood = Cood(x - operand.x, y - operand.y)
  def *(operand: Int): Cood = Cood(x * operand, y * operand)
} 
```

Hexs 和 Sides 都有坐标值。每个 Hex 有 6 个面，但有些面将由 2 个 Hex 共享。例如 Hex(2, 2) 和它的上邻 Hex(2, 6) 共享 Side(2, 4)。所以我想应用这样的集合操作：

```
val hexCoods: Set[Cood] = ... some code
val sideCoods: Set[Cood] = hexCoods.flatMap(i => Cood.dirns.map(_ + i).toSet) 
```

但是如果我这样做， Cood 将被视为引用类型，并且不会删除重复的坐标。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:02:43.120

你试过了吗？

```
scala> Set.empty + Cood(1,1) + Cood(1,2) + Cood(1,1)
res0: scala.collection.immutable.Set[Cood] = Set(Cood(1,1), Cood(1,2)) 
```

就像@sschaef 在评论中指出的那样，案例类具有自动生成的`equals`和`hashCode`方法，它们实现了结构相等，而不仅仅是比较身份。这意味着您不应该在您的集合中得到重复项，并且果然我的测试中的集合没有重复条目。

# web - 如何使用 Amazon S3 托管网站

> ID：12678735
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:17:02.720
> 
> 标签：web, amazon-s3, amazon

我目前有很多数据记录存储在亚马逊 S3 上，我正在尝试使用这些数据构建一个动态网站。我知道如何使用 php 从 mySQL 等数据库中获取数据，但我可以直接在 amazon S3 上执行 sql 查询吗？如果我不能，我可以把这些数据放在什么地方，以便从 S3 加载数据并且也可以通过 php 访问？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:24:54.937

S3 仅用于存储文件，我不确定它如何用于存储数据记录。您可以访问这些文件并提供它们以从网站下载，或者将它们加载到服务器上的内存中（如果它类似于 sqlite 数据库或其他东西）。您可能想考虑使用 Amazon RDS 而不是 S3 来存储关系数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:50:38.343

Amazon S3 不是 Web 服务器。它用于存储平面文件。没有CPU。

如果您想要一个运行 PHP 的 Web 服务器，您应该考虑使用 Amazon EC2 或 AWS Elastic Beanstalk。如果您需要 MySQL 服务器，则应查看 Amazon RDS。

# android - 应用变换矩阵后不旋转

> ID：12678739
> 
> 赞同：0
> 
> 时间：2012-10-01T18:17:31.237
> 
> 标签：android, opengl-es-2.0

> **可能重复：**
> [Google 的 Android OpenGL 教程是否教授不正确的线性代数？](https://stackoverflow.com/questions/11925647/is-googles-android-opengl-tutorial-teaching-incorrect-linear-algebra)

在 Android 上学习 OpenGL ES 2.0。使用模拟器，运行 Android 4.1。

[从Android 开发者网站 / OpenGL](http://developer.android.com/training/graphics/opengl/motion.html)复制和粘贴的片段

更新`onDrawFrame`方法。贴在下面。添加`Matrix.setIdentityM(mRotationMatrix, 0)`，因为它是一个*空*矩阵。将 mAngle 更改为角度（第 16 行）。

```
public void onDrawFrame(GL10 unused) {
    // Redraw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    // Create a rotation transformation for the triangle
    long time = SystemClock.uptimeMillis() % 4000L;
    float angle = 0.090f * ((int) time);

    Matrix.setIdentityM(mRotationMatrix, 0); //added
    Matrix.setRotateM(mRotationMatrix, 0, angle, 0, 0, 1.0f); //changed

    // Combine the rotation matrix with the projection and camera view
    Matrix.multiplyMM(mMVPMatrix, 0, mRotationMatrix, 0, mMVPMatrix, 0);

    // Draw shape
    mTriangle.draw(mMVPMatrix);
} 
```

并注释掉`setRenderMode(RENDERMODE_WHEN_DIRTY);`

然而绘制的三角形并没有旋转。我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:54:34.040

感谢[这里的这个问题](https://stackoverflow.com/questions/11925647/is-googles-android-opengl-tutorial-teaching-incorrect-linear-algebra)。我学会了解决这个问题。

只需编辑顶点着色器代码。uMVPMatrix 很重要，没有这个投影就不会被应用。

```
private final String vertexShaderCode = "attribute vec4 vPosition;"
        +"uniform mat4 uMVPMatrix;"
        + "void main() {" + "  gl_Position = uMVPMatrix * vPosition;" + "}"; 
```

# c# - 表达式在 C# 中始终为真

> ID：12678740
> 
> 赞同：6
> 
> 时间：2012-10-01T18:17:36.447
> 
> 标签：c#, .net

一个简单的 C# 代码

```
 bool result;
    if (bool.TryParse("false", out result) && result)
    {
        Console.WriteLine(result);
    } 
```

和

```
 bool result;
    if (bool.TryParse("tRue", out result) && result)
    {
        Console.WriteLine(result);
    } 
```

Resharper 说结果`Console.WriteLine(result)`总是`true`。为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T18:18:33.623

这是由于部分原因 - 如果是真的`&& result`，你只会进入声明的主体。`result`你如何期待通过存在进入那里的任何`result`方式`false`？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T18:23:47.243

Reharper 告诉你的是，如果你正在做

```
Console.WriteLine(result); 
```

你也可以

```
Console.WriteLine(true); 
```

也就是说，在 if 中使用 result 的任何地方，都可以使用 true，因为如果`result`为 false，则不会到达 if 的主体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T18:28:15.543

因为`if(true && false)`（这就是你得到的，当你解析解析时）永远不会进入 if 正文。这就是您在第一个示例中解析的内容。

# python - 基于标志退出Python线程

> ID：12678750
> 
> 赞同：2
> 
> 时间：2012-10-01T18:18:21.827
> 
> 标签：python, multithreading

假设在 python Thread 的 run() 方法中，我检查一个标志。如果该标志是 True ，我假设我的线程应该退出已经完成它的工作并且应该退出。

那时我应该如何退出线程？试`Thread.exit()`

```
class  workingThread(Thread):

    def __init__(self, flag):
        Thread.__init__(self)
        self.myName = Thread.getName(self)
        self.FLAG= flag
        self.start()    # start the thread

    def run(self) : # Where I check the flag and run the actual code

        # STOP
        if (self.FLAG == True):

                # none of following works all throw exceptions    
                self.exit()
                self._Thread__stop()
                self._Thread_delete()
                self.quit()

        # RUN
        elif (self.FLAG == False) :
               print str(self.myName)+ " is running." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:47:01.330

科里尔王子是正确的。您只需要一个 return 语句，或者在您的情况下通过：

```
def run(self):
    if self.FLAG == True:
        pass
    else:
        print str(self.myName) + " is running." 
```

由于代码中没有循环结构，因此线程将在两种情况下终止。基本上，一旦函数返回，线程就会退出。如果您想做多个操作，请在其中添加某种循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:54:52.480

我通常可以使用以下模式：

```
def run(self):
    while self.active:
        print str(self.myName) + " is running." 
```

`self.active`时会自动退出`False`。

**注意**：使用 时`while True:`，请务必构建代码以避免占用 CPU 内核，因为它很容易做到这一点。

# javascript - Javascript中的onLoad函数

> ID：12678751
> 
> 赞同：2
> 
> 时间：2012-10-01T18:18:27.120
> 
> 标签：javascript

我正在使用以下代码来显示或隐藏表格，具体取决于是否选中了复选框。

```
<body onload="document.f.firstfield.focus(),showOnLoad();"> 
```

我的 Javascript 是：

```
function showOnLoad(){
        if((document.getElementById('chk').checked)){
            document.getElementById('div1').style.display = "block";}else{
        document.getElementById('div1').style.display = "none";}
    } 
```

到此为止，它的工作正常。但是，现在我想使用另一个功能`showSomething()`与上面相同的功能，但用于不同的复选框和不同的表格。

当我将代码行更改为此：

```
<body onload="document.f.firstfield.focus(),showSomething(),showOnLoad();"> 
```

这两个功能都不起作用。我怎样才能让它们一起工作？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:19:24.417

您需要使用`;`来终止函数调用。采用：

```
document.f.firstfield.focus();showSomething();showOnLoad(); 
```

在普通的 JavaScript（不是内联 HTML）中，您可以使用换行符或`;`（您可以通过谷歌搜索了解更多信息……也许[https://mislav.net/2010/05/semicolons/](https://mislav.net/2010/05/semicolons/)会有所帮助）。当您想使用内联 JavaScript 但需要多个语句时，您必须使用`;`. A`,`从不用于这种目的。

这并不重要......这只是偏好......但我会创建一个你调用的通用函数，比如说`bodyLoad`，执行这三个语句的位置（因此 HTML 将变为`<body onload="bodyLoad();">`）。当您知道要在加载时执行的“一切”都在此函数中时，管理起来会容易得多。还有其他事情我也会做，但我会留在那里......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:19:44.840

去掉逗号，用分号代替：

```
<body onload="document.f.firstfield.focus();showSomething();showOnLoad();"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:30:36.850

如果函数中抛出错误`showSomething()`，则不再执行其他函数；您可以使用浏览器的 JavaScript 控制台检查是否引发了任何错误（大多数浏览器都有它们；Firebug、Chrome、IE 上的 F12 等）

一个想法是将函数体包装在 try-catch 中：

```
function showSomething()
{
    try {
        // your code
    } catch (e) {
        alert(e);
    }
} 
```

# java - 在 Intel 上使用 ByteBuffers 时，我应该何时选择 Little Endian 与 Big Endian？

> ID：12678757
> 
> 赞同：2
> 
> 时间：2012-10-01T18:19:00.460
> 
> 标签：java, real-time, bit-manipulation, nio, endianness

我听说英特尔使用小端架构，因此以小端方式为 CPU 提供字节缓冲区更好/更快。我还听说网络可以使用大端。

那么有人可以解释在使用 Java NIO ByteBuffers 进行网络 IO 时应该使用什么，换句话说，当通过线路从一台机器发送字节到另一台机器时应该使用什么？

一直使用小端序？有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:21:36.877

> 那么有人可以解释一下在使用 Java NIO ByteBuffers 进行网络 IO 时应该使用什么，

它必须与另一端的期望相匹配。

> 当通过线路从一台机器发送字节到另一台机器时？

如果没关系，我会保留默认值，因为您获得的性能提升不太重要，即使对于 1 Gb 网络也是如此。

如果你想使用机器的本机字节序，你可以使用

```
ByteBuffer.order(ByteBuffer.nativeOrder()); 
```

* * *

这是需要多长时间的比较

```
public static void main(String... args) {
    ByteBuffer bb = ByteBuffer.allocateDirect( 1024 * 1024);
    for (int i = 0; i < 5; i++) {
        testEndian(bb.order(ByteOrder.LITTLE_ENDIAN));
        testEndian(bb.order(ByteOrder.BIG_ENDIAN));
    }
}

public static void testEndian(ByteBuffer bb) {
    long start = System.nanoTime();
    int runs = 100;
    for (int i = 0; i < runs; i++) {
        bb.clear();
        int count = 0;
        while (bb.remaining() > 3)
            bb.putInt(count++);
        bb.flip();
        int count2 = 0;
        while (bb.remaining() > 3)
            if (count2++ != bb.getInt())
                throw new AssertionError();
    }
    long time = System.nanoTime() - start;
    System.out.printf(bb.order() + " took %,d μs to write/read %,d ints%n", time / 1000 / runs, bb.capacity() / 4);

} 
```

印刷

```
LITTLE_ENDIAN took 1,357 μs to write/read 262,144 ints
BIG_ENDIAN took 1,484 μs to write/read 262,144 ints
LITTLE_ENDIAN took 867 μs to write/read 262,144 ints
BIG_ENDIAN took 880 μs to write/read 262,144 ints
LITTLE_ENDIAN took 860 μs to write/read 262,144 ints
BIG_ENDIAN took 881 μs to write/read 262,144 ints
LITTLE_ENDIAN took 853 μs to write/read 262,144 ints
BIG_ENDIAN took 879 μs to write/read 262,144 ints
LITTLE_ENDIAN took 858 μs to write/read 262,144 ints
BIG_ENDIAN took 871 μs to write/read 262,144 ints 
```

在 1 MB 的数据中，使用 little endian 节省了大约 20 μs（1 ms 的 1/1000）。在 1 Gb 上发送 1 MB 大约需要 9,000 μs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:01:27.703

基本上从来没有。大多数网络协议都以“网络字节顺序”定义，即大端。如果您知道另一端有 Intel 架构，您可以使用 little-endian，但您真的知道吗？永远？

# ruby-on-rails - 对于像 libyaml 这样的已编译库，Ruby（或 RVM）在文件系统中的什么位置进行搜索以加载或解析它们？

> ID：12678778
> 
> 赞同：6
> 
> 时间：2012-10-01T18:20:24.793
> 
> 标签：ruby-on-rails, ruby, centos, yaml

操作系统：CentOS 6.2 x86_64
对于缩进的问题，我深表歉意。这是我的第一篇 SO 帖子，我是设置服务器的新手。我正在学习，并将详细说明我为解决这个问题所经历的步骤以及我在哪里寻求帮助。我是一名有抱负的年轻 Web 开发人员，我在其他人配置的服务器上工作，所以这整个体验对我来说是全新的。

我一直在准备我最近购买的一个 linode 来运行一个 rails 应用程序。我按照此处提供的初始安装指南 [http://blog.blenderbox.com/2011/01/07/installing-rvm-ruby-rails-passenger-nginx-on-centos/](http://blog.blenderbox.com/2011/01/07/installing-rvm-ruby-rails-passenger-nginx-on-centos/)以及更改步骤：
`sudo bash < <( curl -L http://bit.ly/rvm-install-system-wide )`
反映此 SO 线程[RVM 系统范围的安装脚本 url 中建议的更改已损坏 - 什么是替换？](https://stackoverflow.com/questions/5421800/rvm-system-wide-install-script-url-broken-what-is-replacement/5422811#5422811)

```
bash -c "bash <( curl -L https://github.com/wayneeseguin/rvm/raw/1.3.0/contrib/install-system-wide ) --version '1.3.0'" 
```

我在安装 ngix 时停止了，因为我使用的是 Apache2。我还确保`rvm requirements`在安装 rails 之前运行并安装必要的软件包。这是 libyaml 的安装任务，第一个错误发生在我尝试安装它时。但是，yum 报告说它不存在。RVM 和 Gems 的初始安装似乎可以工作，但是我遇到了 Gems 缺少“Psych”的问题，然后要求安装 libyaml：

`/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in '<top (required)>': It seems your ruby installation is missing psych (for YAML output). To eliminate this warning, please install libyaml and reinstall your ruby.`

所以我首先尝试通过 Yum 安装 libyaml，但收到此错误：

```
yum install libyaml
Loaded plugins: fastestmirror, security
Loading mirror speeds from cached hostfile
* base: centosmirror.quintex.com
* extras: centosmirror.quintex.com
* updates: centosmirror.quintex.com
Setting up Install Process
No package libyaml available.
Error: Nothing to do 
```

尝试安装 libyaml-devel 和 libyaml-dev 时遇到了同样的问题。

在做了一些研究后，我发现 CollectiveIdea 的这篇博客文章详细介绍了相同的问题并提供了解决方案。[Collective Idea 的博客文章](http://collectiveidea.com/blog/archives/2011/10/31/install-ruby-193-with-libyaml-on-centos/)我按照说明执行了安装，没有任何制作或配置问题。然后我执行了提供的 ruby​​ 重新安装。我仍然收到相同的警告，并进一步搜索了类似问题的 SO。正如对这个问题关于同一问题的回答所详述的那样，[如何解决“ruby 安装缺少心理”错误？](https://stackoverflow.com/questions/9434002/how-to-solve-ruby-installation-is-missing-psych-error)使用：

```
rvm pkg install libyaml
Fetching yaml-0.1.4.tar.gz to /usr/local/rvm/archives
Extracting yaml-0.1.4.tar.gz to /usr/local/rvm/src
Prepare yaml in /usr/local/rvm/src/yaml-0.1.4.
Configuring yaml in /usr/local/rvm/src/yaml-0.1.4.
Compiling yaml in /usr/local/rvm/src/yaml-0.1.4.
Installing yaml to /usr/local/rvm/usr 
```

`Please note that it's required to reinstall all rubies:`

建议通过 RVM 重新安装所有内容，我也按照这些说明进行操作。

```
rvm reinstall all --force
Removing /usr/local/rvm/src/ruby-1.9.3-p194...
Removing /usr/local/rvm/rubies/ruby-1.9.3-p194...
mv: overwrite `/usr/local/rvm/user/installs'? y
No binary rubies available for: ///ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary   rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...

ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /usr/local/rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #configuring
ruby-1.9.3-p194 - #compiling
ruby-1.9.3-p194 - #installing 
```

即使在此之后，警告仍然存在。我已经验证了 ruby​​ 安装，`ruby -v`它实际上已安装。libyaml 文件已安装，它们位于此处：

```
[root@li543-100 ~]# ls -la /usr/local/lib
total 19620
drwxr-xr-x  5 root root     4096 Oct  1 15:40 .
drwxr-xr-x 13 root root     4096 Oct  1 05:55 ..
drwxr-xr-x  2 root root     4096 Oct  1 06:34 include
lrwxrwxrwx  1 root root       16 Oct  1 15:40 libruby.so -> libruby.so.1.9.1
lrwxrwxrwx  1 root root       16 Oct  1 15:40 libruby.so.1.9 -> libruby.so.1.9.1
-rwxr-xr-x  1 root root  7457107 Oct  1 06:42 libruby.so.1.9.1
-rw-r--r--  1 root root 11633486 Oct  1 15:39 libruby-static.a
lrwxrwxrwx  1 root root       18 Oct  1 06:37 libyaml-0.so.2 -> libyaml-0.so.2.0.2
-rwxr-xr-x  1 root root   358698 Oct  1 06:37 libyaml-0.so.2.0.2
-rw-r--r--  1 root root   565584 Oct  1 06:37 libyaml.a
-rwxr-xr-x  1 root root      953 Oct  1 06:37 libyaml.la
lrwxrwxrwx  1 root root       18 Oct  1 06:37 libyaml.so -> libyaml-0.so.2.0.2
drwxr-xr-x  2 root root     4096 Oct  1 06:45 pkgconfig
drwxr-xr-x  6 root root     4096 Oct  1 06:45 ruby
-rw-rw-r--  1 root rvm       194 Oct  1 05:55 rvm 
```

您还可以看到我尝试在 /usr/local/lib 和 /usr/local/rvm/lib 之间创建符号链接，假设 yaml 文件可能已安装到错误的目录或 rvm 没有查找在他们的正确目录中。我在 ruby​​ 上运行了 which 并认为因为 ruby​​ 位于 /rvm 目录中，这可能是问题所在：

```
[root@li543-100 ~]# which ruby
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
[1]: http://collectiveidea.com/blog/archives/2011/10/31/install-ruby-193-with-libyaml-on-centos/ 
```

这没有帮助。所以我对我出错的地方或我不想要的东西持谨慎态度。
1：我是否将文件放在错误的目录中而导致安装错误？
2: ruby​​ 是否在不同的目录中寻找 libyaml 文件？
3：当我关注博客文章时，我是否未能在安装中添加一些系统特定的功能？

我已经在我的 linode 上重新部署了 CentOS 4 次，希望这是我没有正确遵循脚本的问题，我在第 5 次部署时出现了同样的问题。我目前正在搜索 2 号，希望我的帖子不是不合适的，因为这显然在其他地方得到了解决。我将不胜感激您能提供的任何帮助。

编辑：

因此，在重新部署 CentOS6.2 操作系统后，我运行了更改设置，如下所示：

```
yum -y install git
yum -y install curl
groupadd rvm
usermod -a -G rvm root
bash -c "bash <( curl -L https://github.com/wayneeseguin/rvm/raw/1.3.0/contrib/install-system-wide) -- version'1.3.0'"
echo '[[ -s "/usr/local/lib/rvm" ]] && . "/usr/local/lib/rvm" #This loads RVM into a shell session' >> ~/.bash_profile
source ~/.bash_profile
yum install -y gcc-c++ patch readline readline-devel zlib zlib-devel libyaml-devel libffi-devel openssl-devel make bzip2 autoconf automake libtool bison iconv-devel
rvm get head
yum install readline readline-devel
rvm package install libyaml -v
rvm install 1.9.3 -v
rvm use 1.9.3
ruby -v 
```

这也仍然遇到错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby. 
```

运行前面的命令从 RVM 获取 libyaml 然后重新安装所有 rubies 似乎并不能解决我的问题。在执行 rvm reinstall all --force 时，之前安装的 libyaml 包会被删除、覆盖还是替换？它似乎位于正确的目录中。

```
[root@li543-100 src]# pwd
/usr/local/rvm/src
drwxrwsr-x  7 root rvm   4096 Oct  1 21:19 .
drwxrwsr-x 24 root rvm   4096 Oct  1 20:51 ..
drwxr-xr-x 24 root rvm   8192 Oct  1 21:22 ruby-1.9.3-p194
drwxr-xr-x  7  501 games 4096 Apr 27 23:31 rubygems-1.8.24
drwxrwsr-x 18 root rvm   4096 Oct  1 20:51 rvm
drwxrwsrwx  8 root rvm   4096 Oct  1 20:27 yaml-0.1.3
drwxr-xr-x  9 root rvm   4096 Oct  1 21:18 yaml-0.1.4 
```

编辑#2：
在新的 CentOS 5.6 重新部署上再次安装失败后，我显然在安装过程中的某个地方制造了一个致命的缺陷。在表演之前`rvm install 1.9.3`，我必须跑步`rvm install 1.8.7`。另外，这次我部署了一个32位的CentOS6.2镜像

在 1.8.7 上运行 gem

```
[root@li543-100 ~]# gem -v
1.8.24 
```

现在我跑`rvm install 1.9.2`

```
[root@li543-100 ~]# rvm use 1.9.2
ruby-1.9.2-p320 is not installed.
To install do: 'rvm install ruby-1.9.2-p320'
[root@li543-100 ~]# rvm install ruby-1.9.2-p320
#CUT OUT INSTALL SHELL PROMPTS ETC
[root@li543-100 ~]# rvm use 1.9.2-p320
Using /usr/local/rvm/gems/ruby-1.9.2-p320
[root@li543-100 ~]# gem -v
1.8.24 
```

切换到 1.9.3：错误返回

```
[root@li543-100 ~]# rvm use 1.9.3-p194
Using /usr/local/rvm/gems/ruby-1.9.3-p194
[root@li543-100 ~]# gem -v
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
1.8.24 
```

所以看起来告诉 rvm 使用 1.9.3（请注意，我使用的是 -p194，我之前没有测试过这些）在`rvm`尝试加载 libyaml 的位置方面会导致某种通信问题。现在我将使用 1.9.2，因为其中大部分内容都让我有点不知所措。我确定我在缺少 1.9.3 所需的某种依赖或未适当调整配置文件方面犯了一个错误。至少这是我的假设，第一个服务器设置这么多一直在猜测。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:02:21.183

我已经单独构建了 libyaml，并且基本上经历了上述步骤的各种排列，结果相同。我运行了 irb，发现它没有找到 libyaml.so。无奈之下，我将 /usr/local/lib/libyaml*（我之前构建的）复制到 ~/.rvm/rubies/ruby-1.9.3-p327/lib。

这平息了警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:24:33.590

经过多次试验，下面修复我

```
# rvm pkg install libyaml
# rvm reinstall all --force
# ln -s /usr/local/rvm/usr/lib/libyaml.so /usr/local/rvm/lib/
# ln -s /usr/local/rvm/usr/lib/libyaml-0.so.2 /usr/local/rvm/lib/
# ln -s /usr/local/rvm/usr/lib/libyaml-0.so.2 /usr/local/rvm/rubies/ruby-1.9.3-p327/lib
# ln -s /usr/local/rvm/usr/lib/libyaml.so /usr/local/rvm/rubies/ruby-1.9.3-p327/lib 
```

我的环境

```
# cat /etc/redhat-release
CentOS release 5.8 (Final)

# ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [i686-linux]

# gem -v
1.8.24

# rvm -v

rvm 1.16.20 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:28:49.207

删除所有 rvm、ruby、libyaml 等。

比安装 rvm，而且只使用 rvm 来安装 libyaml 和 rubies。

（还要注意 Ruby 可以查找 32 位库，因此请检查是否有 32 位的版本，或者是否有单独的 64 位库的 lib 文件夹！）

PS去检查heroku托管你的应用程序。非常适合初学者，因为它是免费的，并且 5 分钟即可设置（从安装 rails 到 rails 在 heroku 上自动生成的网页需要 15 分钟！）。而且您不需要更改配置，因此在您的服务器上部署不会更难。

# java - 在 Java 中反转数组

> ID：12678781
> 
> 赞同：49
> 
> 时间：2012-10-01T18:20:35.973
> 
> 标签：java, arrays, reverse

如果我有这样的数组：

```
1 4 9 16 9 7 4 9 11 
```

反转数组使其看起来像这样的最佳方法是什么：

```
11 9 4 7 9 16 9 4 1 
```

我有下面的代码，但我觉得它有点乏味：

```
public int[] reverse3(int[] nums) {
    return new int[] { nums[8], nums[7], nums[6], nums[5], num[4],
                       nums[3], nums[2], nums[1], nums[0] };
} 
```

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-01T18:22:46.027

[`Collections.reverse()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#reverse%28java.util.List%29)如果你把你的数字放在一个`List`中，就可以为你完成这项工作`Integers`。

```
List<Integer> list = Arrays.asList(1, 4, 9, 16, 9, 7, 4, 9, 11);
System.out.println(list);
Collections.reverse(list);
System.out.println(list); 
```

输出：

```
[1, 4, 9, 16, 9, 7, 4, 9, 11]
[11, 9, 4, 7, 9, 16, 9, 4, 1] 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-10-01T18:26:27.310

如果要就地反转数组：

```
Collections.reverse(Arrays.asList(array)); 
```

它之所以有效，是因为[Arrays.asList](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...))返回原始数组的直写代理。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-10-01T18:29:34.857

如果你不想使用，`Collections`那么你可以这样做：

```
for (i = 0; i < array.length / 2; i++) {
  int temp = array[i];
  array[i] = array[array.length - 1 - i];
  array[array.length - 1 - i] = temp;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-26T02:02:22.547

我喜欢保留原始数组并返回一个副本。这是一个通用版本：

```
public static <T> T[] reverse(T[] array) {
    T[] copy = array.clone();
    Collections.reverse(Arrays.asList(copy));
    return copy;
} 
```

不保留原始数组：

```
public static <T> void reverse(T[] array) {
    Collections.reverse(Arrays.asList(array));
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-03-21T15:05:25.103

尝试这个：

```
public int[] reverse3(int[] nums) {
    int[] reversed = new int[nums.length];
    for (int i=0; i<nums.length; i++) {
        reversed[i] = nums[nums.length - 1 - i];
    }
    return reversed;
} 
```

我的意见是：

`1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12`

我得到的输出：

`12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-03-21T14:37:40.100

您可以使用 org.apache.commons.lang.ArrayUtils ： `ArrayUtils.reverse(array)`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-01T18:33:38.090

或者你可以通过它的后耳循环

```
int[] firstArray = new int[]{1,2,3,4};
int[] reversedArray = new int[firstArray.length];
int j = 0;
for (int i = firstArray.length -1; i > 0; i--){
    reversedArray[j++] = firstArray[i];
} 
```

（注意：我没有编译这个，但希望它是正确的）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-08T22:17:23.297

以最少的掉期到位逆转。

```
for (int i = 0; i < a.length / 2; i++) {
    int tmp = a[i];
    a[i] = a[a.length - 1 - i];
    a[a.length - 1 - i] = tmp;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-01T18:31:52.390

我会做这样的事情：

```
public int[] reverse3(int[] nums) {
  int[] numsReturn = new int[nums.length()]; 
  int count = nums.length()-1;
  for(int num : nums) {
    numsReturn[count] = num;
    count--;
  }
  return numsReturn;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-01-12T04:59:23.283

```
 public void swap(int[] arr,int a,int b)
 {
    int temp=arr[a];
    arr[a]=arr[b];
    arr[b]=temp;        
}
public int[] reverseArray(int[] arr){
    int size=arr.length-1;

    for(int i=0;i<size;i++){

        swap(arr,i,size--); 

    }

    return arr;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-08-26T20:13:52.267

你搞砸了

```
int[] firstArray = new int[]{1,2,3,4};
int[] reversedArray = new int[firstArray.length];
int j = 0;
for (int i = firstArray.length -1; i >= 0; i--){
    reversedArray[j++] = firstArray[i];
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-06-30T16:17:33.857

以下将反转索引之间的数组`i`和`j`（反转整个数组调用`reverse(a, 0, a.length - 1)`）

```
 public void reverse(int[] a, int i , int j) {
        int ii =  i;
        int jj = j;

        while (ii < jj) {
            swap(ii, jj);
            ++ii;
            --jj;
        }
    } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-08-05T17:29:45.150

如果您不想使用临时变量，也可以这样做：

```
final int len = arr.length;
for (int i=0; i < (len/2); i++) {
    arr[i] += arr[len - 1 - i]; //  a = a+b
    arr[len - 1 - i] = arr[i] - arr[len - 1 - i];   //  b = a-b
    arr[i] -= arr[len - 1 - i]; //  a = a-b
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-12-04T17:24:39.107

此代码将有所帮助：

```
int [] a={1,2,3,4,5,6,7};
for(int i=a.length-1;i>=0;i--)
  System.out.println(a[i]); 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2015-08-16T11:19:35.717

您可以将原始数组发送到一个方法，例如：

之后，您创建一个新数组来保存反转的元素

```
public static void reverse(int[] a){

int[] reversedArray = new int[a.length];

for(int i = 0 ; i<a.length; i++){
reversedArray[i] = a[a.length -1 -i];

} 
```

# validation - JSF 2.1.X 验证在 Glassfish 3.1.2 与 Tomcat 6 和 7 上的行为不同

> ID：12678784
> 
> 赞同：0
> 
> 时间：2012-10-01T18:20:52.370
> 
> 标签：validation, tomcat, jsf-2, glassfish

我在 Tomcat 和 Glassfish 之间进行 JSF 验证时遇到了我认为奇怪的行为。以前我们使用的是 Tomcat，但现在需要运行完整的 Java EE 应用服务器。

在测试期间，我注意到当向服务器提交空字段时，只有一个长度验证器并且没有必需的属性，Glassfish 正在输出验证消息，而 Tomcat 会简单地跳过对这些元素的验证。

如果提交了一个值但验证失败，一切正常，这只是在没有输入任何值并提交页面时。

### 环境细节

*   JSF 莫哈拉 2.1.12
*   富脸 4.1
*   目标服务器 Glassfis 3.1.2
*   从 Tomcat 7.0.27 迁移

### 这是包含所描述行为的代码片段：

```
<h:inputText id="phoneAreaCode"
             maxlength="3"
             size="2"
             value="#{bean.phoneArea}"
             style="margin-left: 8px;">
    <f:validateLength minimum="3"/>
    <f:validator validatorId="phoneValidator"/>
    <a4j:ajax/>
</h:inputText> 
```

### 用例（Tomcat）：

1.  如果提供了值，则会进行验证。如果值通过验证，则允许页面提交，如果失败，则向页面输出错误消息。

2.  如果没有提供值，则不进行验证，并允许页面提交

### 用例（玻璃鱼）：

1.  和上面一样

2.  如果没有提供值，验证**仍然**会发生，并且显然会失败。

我看到自定义验证器通过`<f:validator/>`标签以及像`<f:validateLength/>`.

没有代码差异，只是运行代码的服务器。我已经搜索了谷歌，但我并没有真正找到任何帮助。我不了解有关验证的内容吗？你看有什么不对吗？

这个[Stackoverflow 问题](https://stackoverflow.com/questions/12390218/validatelength-in-jsf-1-2-vs-jsf-2-1)听起来像同一个问题，我只是没有看到阻止我的环境以这种方式运行的解决方案，或者在不需要该字段时如何禁用验证。

感谢任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:46:51.390

几天前我遇到了一个非常相似的问题，我认为属性 phoneArea*可能*是整数或长整数。如果是这样，你可以看看[这个话题](https://stackoverflow.com/a/4544300/1711751)，另外看看[这个](https://stackoverflow.com/a/7548821/1711751)。

# javascript - 谷歌地图 v3 缩放以适合所有标记（路径）功能

> ID：12678786
> 
> 赞同：3
> 
> 时间：2012-10-01T18:21:02.960
> 
> 标签：javascript, google-maps, maps, zooming

我在 js fiddle 上整理了一个小片段，这样你就可以看到我正在使用什么。

基本上我正在尝试连接一个“缩放”按钮，这样一旦创建了路径，您就可以单击缩放按钮并且地图会缩放以适应路径。我找到的所有答案都是通过拥有一组我没有的标记来工作的。任何建议将不胜感激。

[http://jsfiddle.net/A3NBZ/](http://jsfiddle.net/A3NBZ/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T21:10:09.943

好吧，实际上您*确实*有一系列标记！它存储在`Polyline`用户单击地图时您正在创建的文件中。要检索用户单击的点，只需使用[`Polyline.getPath()`](https://developers.google.com/maps/documentation/javascript/reference#Polyline). 然后，您可以将这些点（如 geocodezip 提到的）添加到`LatLngBounds`对象并用于[`google.maps.Map.fitBounds()`](https://developers.google.com/maps/documentation/javascript/reference#Map)将地图视图调整到给定的边界。

这是 zoom 方法的简单实现，基于您提供的代码示例（您可以在[此处](http://jsfiddle.net/kaktus621/svLUn/1/)看到它的工作原理）。

```
function zoom() {
  var bounds = new google.maps.LatLngBounds();
  geodesic.getPath().forEach(function(latLng) {
    bounds.extend(latLng);
  });
  map.fitBounds(bounds);                    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:33:37.367

与您在标记中看到的示例类似，将路径中的所有 google.maps.LatLngs 添加到 google.maps.LatLngBounds 对象（使用 bounds.extend()），然后在生成的 bounds 对象上调用 map.fitBounds。

[更新了 jsfiddle](http://jsfiddle.net/g37HE/)

# android - 未找到 SQLite android 列

> ID：12678789
> 
> 赞同：1
> 
> 时间：2012-10-01T18:21:07.337
> 
> 标签：android, database, sqlite

假设我的代码是正确的，但即使它给出了 _hour 和 _min 未找到的错误列：

```
package com.example.ifest;

public class ProfileView extends ListActivity{

    int hour,min;
    TimePicker tp ;
    String e,e1;
    static int p = 0;
    Spinner spn ;
    Button b1,b2,b3;
    EditText et;
    String str1;
    ArrayList<String> list = new ArrayList<String>();
    ArrayAdapter<String> adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
        list.add("Create");
        openDB();
        p++;

        adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,list);
        setListAdapter(adapter);      
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        if(position == 0){
            final Dialog build = new Dialog(ProfileView.this);
            build.setTitle("String Name and Details");
            build.setContentView(R.layout.activity_dialog);
            build.show();
            spn = (Spinner)build.findViewById(R.id.spinner1_Dialog);
            et = (EditText) build.findViewById(R.id.editText1_Dialog);
            b2 = (Button) build.findViewById(R.id.button1_Dialog);
            tp = (TimePicker)build.findViewById(R.id.timePicker1_Dialog);
            b3 = (Button)build.findViewById(R.id.button2_Dialog);
            tp.setIs24HourView(true);
            tp.setCurrentMinute(00);

            b2.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    build.dismiss();
                    hour = tp.getCurrentHour();
                    min = tp.getCurrentMinute();
                    list.add(et.getText().toString());
                    addDB(et.getText().toString(),spn.getLastVisiblePosition(),hour,min);
                    adapter.notifyDataSetChanged();
                    setListAdapter(adapter);
                }
            });

            b3.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    build.dismiss();
                }
            });
        }
    }

    protected void addDB(String name,int id,int h,int m) {
        DBHandler handle = new DBHandler(this);
        SQLiteDatabase db = handle.getWritableDatabase();
        ContentValues cv = new ContentValues();
        cv.put("_name",name);
        if(id == 0)
            cv.put("_type","WIFI");
        else if(id == 1)
            cv.put("_type","BLUETOOTH");
        else if(id == 2)
            cv.put("_type","MEDIA");
        cv.put("_hour", h);
        cv.put("_min", m);
        db.insert("_table", null , cv);
        db.close();
    }

    private void openDB() {
        if(p != 0){ 
            DBHandler handle = new DBHandler(this);
            SQLiteDatabase db = handle.getReadableDatabase();

            Cursor c = db.rawQuery("SELECT * FROM "+ "_table",null);
            c.moveToFirst();
            while(c.moveToNext()){
                list.add(c.getString(1));
                Log.d("cursor", c.getString(1));
            }
            c.close();
            db.close();
        }
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflate = getMenuInflater();
        inflate.inflate(R.menu.string_main,menu);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater mi = getMenuInflater();
        mi.inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {
        switch(item.getItemId()){
        case R.id.item1:
            final Dialog build = new Dialog(ProfileView.this);
            build.setTitle("String Name and Details");
            build.setContentView(R.layout.activity_dialog);
            build.show();
            spn = (Spinner)build.findViewById(R.id.spinner1_Dialog);
            et = (EditText) build.findViewById(R.id.editText1_Dialog);
            b2 = (Button) build.findViewById(R.id.button1_Dialog);
            tp = (TimePicker)build.findViewById(R.id.timePicker1_Dialog);
            b3 = (Button)build.findViewById(R.id.button2_Dialog);
            tp.setIs24HourView(true);
            tp.setCurrentMinute(00);

            b2.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    build.dismiss();
                    hour = tp.getCurrentHour();
                    min = tp.getCurrentMinute();
                    list.add(et.getText().toString());
                    addDB(et.getText().toString(),spn.getLastVisiblePosition(),hour,min);
                    adapter.notifyDataSetChanged();
                    setListAdapter(adapter);
                }
            });

            b3.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    build.dismiss();
                }
            });
            break;

        case R.id.item2:
            break;

        case R.id.item3:
            Intent i = new Intent("com.example.ifest.ABOUTUS");
            startActivity(i);
            break;

        case R.id.item4:
            finish();
            break;
        }
        return true;
    }
} 
```

数据库类是：

```
public class DBHandler extends SQLiteOpenHelper{

    private static final String DB_NAME = "event_db";
    private static final int DB_VERSION = 1;
    private static final String TABLE_NAME = "_table";
    private static final String EVENT_NAME = "_name";
    private static final String EVENT_ID = "_no";
    private static final String EVENT_TYPE = "_type";
    private static final String EVENT_HOUR = "_hour";
    private static final String EVENT_MINUTE = "_min";

    public DBHandler(Context context) {
        super(context, DB_NAME, null, DB_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + EVENT_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " 
                    + EVENT_NAME + " TEXT NOT NULL, " + EVENT_TYPE + " TEXT NOT NULL, " + EVENT_HOUR +"  INTEGER, " + EVENT_MINUTE + " INTEGER " + ");");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);        
    }
} 
```

SQL exec语句有什么问题意味着任何空间或什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:46:16.060

看起来您`DBHandler#onCreate()`在运行应用程序至少一次后更改了内部的表架构。如果是这样，您需要增加`DB_VERSION = 2`.

数据库不会自行检查内部代码`onCreate()`是否有新模式，您需要告诉数据库在您进行更改后查找更改。最简单的方法是增加`DB_VERSION`.

# c# - 调整当前显示的字体大小

> ID：12678790
> 
> 赞同：0
> 
> 时间：2012-10-01T18:21:08.693
> 
> 标签：c#, xaml, windows-8

我正在开发 Windows 8 应用程序，但在调整字体大小时遇到​​了问题。例如，在大显示器（高分辨率）上，字体太小而无法从远处读取。有没有办法调整它们的大小 - 我还想在设置中选择让字体变大/变小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:49:47.567

您可以使用底部的应用栏来增加正面尺寸，您还可以使用 viewbox 控件，这将帮助您根据屏幕的分辨率调整正面大小。

# aptana - 与剪贴板比较

> ID：12678791
> 
> 赞同：1
> 
> 时间：2012-10-01T18:21:11.377
> 
> 标签：aptana, aptana3

我错过了`Compare With -> Clipboard`选择，存在`Eclipse 3.2`和优越。此功能对于比较代码块至关重要。

为什么它不存在于`Aptana Studio 3`?

它会被添加还是我可以添加一些配置或`plugin`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:03:56.380

[可以使用适用于 Eclipse 的 AnyEdit 工具插件](http://andrei.gmxhome.de/anyedit/)将此功能添加到插件中。

# php - 检查数组中的对象是否是另一个数组

> ID：12678792
> 
> 赞同：0
> 
> 时间：2012-10-01T18:21:14.980
> 
> 标签：php, arrays, multidimensional-array

我正在尝试访问存储在 $_SESSION 中的数组。我已经在循环之前打印了 $_SESSION 的计数和内容，以便进行良好的测量。

```
// $_SESSION info.
Length: 4
Array
(
    [loggedIn] => 1 
    [total] => 0 
    [plates] => Array ([0] => plates [1] => 14 [2] => 5) 
    [backpack] => Array ([0] => backpack [1] => 78 [2] => 1)
) 
```

在这里我们可以清楚地看到最后两个对象实际上是数组。但是，当我尝试这种`is_array`方法时，

```
//PHP code
$length = count($_SESSION);
for ($i = 0; $i < $length; $i++)
{
    if(is_array($_SESSION[$i])){
        echo 'session '.$i.' is an array.<br />';
    }
    else{
        echo 'session '.$i.' is not an array.<br />';
    }
} 
```

所有对象都返回 false。

```
session 0 is not an array.
session 1 is not an array.
session 2 is not an array.
session 3 is not an array. 
```

API 说`is_array`应该找到“给定变量是否为数组”。但是，我想我一定是在这里误解了一些东西......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:24:09.107

不要使用`for`循环。使用`foreach`.

```
foreach ($_SESSION as $key => $val) {
    if (is_array($val)) {
        echo 'session '.$key.' is an array.<br />';
    } else {
        echo 'session '.$key.' is not an array.<br />';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:24:24.060

这里的问题是您试图用数字索引而不是适当的键迭代关联数组。试试这个：

```
foreach ($_SESSION as $key => $value)
{
    if(is_array($value)){
        echo 'session '.$key.' is an array.<br />';
    }
    else{
        echo 'session '.$key.' is not an array.<br />';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:24:45.823

利用：

```
foreach($_SESSION as $key=>$val){
    if(is_array($val)){
    // code here
    }
} 
```

# c++ - C++ 感知复制插入到 std::map

> ID：12678796
> 
> 赞同：0
> 
> 时间：2012-10-01T18:21:54.363
> 
> 标签：c++, hash, insert, duplicates, stdmap

我有一个关于在 C++ 中向 std::map 插入内容的问题。

到目前为止，这就是我的代码：

stringutils.hh：

...

```
 unsigned long hashSDBM(char *strToHash){
      unsigned char* str = new unsigned char[strlen(strToHash) + 1];
      strncpy( (char *) str, strToHash, strlen(strToHash) );

      unsigned long hash = 0;
      int c;

      while ((c = *str++)){
          hash = c + (hash <<6) + (hash <<16) - hash;
      }

      return hash;
  } 
```

...

哈希图.hh

```
#include "stringutils.hh"

namespace{

using namespace std;

class MapElement{

    private:
        char* filename;
        char* path;

    public:
        MapElement(char* f, char* p):filename(f), path(p){}
        ~MapElement(){
           delete [] filename;
           delete [] path;
        }
        char* getFileName(){ return filename; }
        char* getPath(){ return path; }

};

class HashMap{

    private:
        map<long*, MapElement*> *hm;

        long hash(char* key);

    public:
        HashMap(){
           hm = new map<long*, MapElement*>();
        }
        ~HashMap(){
           delete hm;
        }
        long put(char* k, MapElement *v);
};

long HashMap::hash(char* key){
  return stringutils::hashSDBM(key);
}

long HashMap::put(char* k, MapElement *v){
  long *key = new long();
  *key = hash(k);
  pair<map<long*,MapElement*>::iterator, bool> ret;
  ret = hm->insert(std::pair<long*, MapElement*>(key, v));

  if(ret.second == false){
    cerr<<"Already exists: "<<ret.first->second->getFileName()<<endl;
    return *key;
  }
  cerr<<"INSERTED "<<*key<<endl;
  return 0;
} 
```

主.cc：

```
HashMap *hm = new HashMap();

int main(void){

  MapElement *m1; 

  char a[] = "hello";
  char b[] = "world";
  m1 = new MapElement(a,b);
  hm->put(a, m1);

  char c[] = "thats";
  char d[] = "a test";
  m1 = new MapElement(c,d);
  hm->put(c, m1);

  char e[] = "hello";
  char f[] = "test";
  m1 = new MapElement(e,f);
  hm->put(e, m1);

  return 0;
} 
```

它编译时没有任何错误或警告，当我启动它时，会生成以下输出：

插入 7416051667693574450

插入 8269306963433084652

插入 7416051667693574450

为什么第二次插入键“hello”没有任何效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:27:44.673

中的键`std::map`是唯一的。如果要允许重复键，请使用`std::multimap`. 您正在使用的 map::insert 返回一对迭代器和一个`bool`. bool 指示插入是否实际插入（如果密钥已经存在，则不表示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:28:43.113

> 为什么第二次插入密钥没有任何效果？

您的键是一个指针，指向`long`具有相同值的不同对象的两个指针是不同的键。不要过度使用指针，你真的会帮助自己。C++ 不是 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T11:58:21.953

天哪...请在继续阅读之前阅读一本好的 C++ 书籍，C++ 标签描述中有推荐的好书。

* * *

所以，这里的问题是你的代码使用指针......无处不在......并且指针的行为不像你想象的那样。许多语言（如 Java）具有普遍的引用类型：一切都只是一个引用。C++ 不是这样的语言，它在一方面的指针/引用和另一方面的值之间产生了很大的不同。

在您的特定情况下，`long*`是指向 a 的指针`long`。就`map`目前而言，两个不同的指针就是这样：**distinct**，无论它们指向什么值。

所以......我们需要摆脱那些指针。到处。并停止在 C++ 中使用 C 习语。

* * *

> stringutils.hh

```
 unsigned long hashSDBM(std::string const& strToHash){
      unsigned long hash = 0;

      for (char c: strToHash) {
          hash = c + (hash <<6) + (hash <<16) - hash;
      }

      return hash;
  } 
```

简而言之：

*   不要`char*`在 C++ 中使用 raw，内存所有权不清楚，这会导致泄漏/悬空指针
*   正确使用`const`，不修改其参数的函数应该`const`引用它们
*   将 C++11 用于样式循环，它们与手动代码一样高效，同时更易于阅读且更难搞砸

* * *

> 哈希图.hh

```
namespace HashMap {

class MapElement{
public:
    MapElement(std::string f, std::string p):
        filename(f), path(p) {}

    std::string const& getFileName() const { return filename; }
    std::string const& getPath() const { return path; }

private:
    std::string filename;
    std::string path;
}; 
```

让我们从这里开始：

*   标头中没有匿名名称空间，它不会做你认为它做的事情（阅读它们）
*   没有原始指针
*   不用摆弄商务舱的资源
*   常量正确性很重要
*   先呈现公共API，这是用户感兴趣的

向前：

```
class HashMap{
public:
    unsigned long put(std::string const& k, MapElement v);

private:
    static unsigned long hash(std::string const& key);

    std::map<unsigned long, MapElement> hm;
};

inline unsigned long HashMap::hash(std::string const& key){
    return stringutils::hashSDBM(key);
}

inline unsigned long HashMap::put(std::string const& k, MapElement v){
    unsigned long const key = hash(k);

    auto const ret = hm.emplace(key, v);

    if (ret.second == false){
        std:: cerr << "Already exists: " << ret.first->second.getFileName() << "\n";
        return key;
    }
    std::cerr << "INSERTED " << key << "\n";
    return 0;
} 
```

好吧...

*   不需要那么多指针，没有它们代码更简单！
*   内部`hash`函数不访问任何状态，使其`static`
*   在可能的最后时刻声明变量，并立即初始化它们……它让您可以使用`auto`而不是显式地命名过于复杂的类型
*   `std::endl`不做你认为它做的事情（提示：它刷新缓冲区！最慢的 I/O 操作！），只需使用 plain`"\n"`代替

进一步说明：

*   如果密钥必须是文件名，为什么还要让用户提交密钥？您可以改为从对象中读取它...或在发生碰撞时`MapElement`打印（而不是文件名），以防它们不同`key`
*   哈希不是唯一的，如果两个不同的文件名哈希到相同的数字，您将拒绝第二个...您应该使用复合键（哈希 + 文件名）
*   您`0`在插入时返回，而`key`在不插入时返回......但没有什么能阻止密钥`0`如此接收`0`让用户怀疑发生了什么

* * *

> 主文件

```
int main(void){
    HashMap::HashMap hm;

    hm.put("hello", MapElement("hello", "world"));
    hm.put("thats", MapElement("thats", "a test"));
    hm.put("hello", MapElement("hello", "test"));

    return 0;
} 
```

最后：

*   避免全局变量
*   无需命名所有临时人员

# iphone - 如何停止在 iPhone 中重新分配 NSArray？

> ID：12678800
> 
> 赞同：-2
> 
> 时间：2012-10-01T18:22:19.513
> 
> 标签：iphone, ios, xcode, arrays, nsmutablearray

我正在使用 an `NSArray`and `alloc`it to in`viewDidload`方法。

我的应用程序中有两个视图，并从这些视图中将数据添加到该数组中。表中显示的总行数根据`[array count]`.

但是我面临的问题是，当我从另一个视图调用我正在使用这个数组的视图时，这个数组重新分配，因此我的数组大小再次从 0 开始。我不希望那样。我希望数组大小从它的最后一个位置开始。

所以请帮我解决这个问题，我声明这个数组或任何替代方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:32:57.440

您需要使数组延迟加载。

让数组所在的视图有一个如下所示的 getter：

```
-(NSArray *)theArray {
    if(theArray == nil) {
         theArray = [[[NSArray alloc] init] autorelease]; //If using ARC, don't autorelease
    }

    return theArray;
} 
```

在您的 firstView 中`viewDidLoad`，只需像这样调用数组：

```
[self theArray]; 
```

现在在你的第二个视图中，像这样调用第一个数组

```
[firstView theArray]; 
```

# android - addTextChangedListener 保存一个新对象

> ID：12678803
> 
> 赞同：0
> 
> 时间：2012-10-01T18:22:38.223
> 
> 标签：android, android-listview, android-edittext, textwatcher

我有一个带有一些 textView 和一个 editText 的 listView。当用户修改editText的值时，我会保存一个新对象。我实现了一个 TextWatcher，但我无法检索引用 editText 修改的特定 textView 的值。有人帮我吗？

**编辑**

*ListView 特定行的 TextWatcher*

```
quantity.addTextChangedListener(new TextWatcher() {
@Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
        if(!s.toString().isEmpty()){ 
            if (Integer.parseInt(s.toString())!=0){

                HashMap<Products, Integer> into = new HashMap<Products, Integer>();

                Products pr = new Products();
                            //product contains value of textView 
                pr.set_id(Integer.parseInt(product.get("id")));
                pr.setNome(product.get("nome"));
                into.put(pr, Integer.parseInt(s.toString()));
                pArrayList.add(into);
                cart.setProdotti(pArrayList);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:55:23.340

```
<TextView android:id="@+id/p1_name"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:text="Product 1" />
<TextView android:id="@+id/p1_price"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:text="20" />

public void afterTextChanged(Editable s) {
    ...
    String price = ((TextView) findViewById(R.id.p1_price)).getText();
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:29:38.370

也许这有点矫枉过正，但您可以在每一行 setTag() 方法中为 TextView 和 EditText 使用 View ，这样两个 View 将通过这个键以某种方式连接。然后你只需要调用 findViewByTag()。此操作有点昂贵，因此请确保仅在用户停止写入时才调用它。

# php - PHP array_unique 没有索引

> ID：12678809
> 
> 赞同：2
> 
> 时间：2012-10-01T18:23:00.667
> 
> 标签：php, arrays

我一直在尝试找到类似于`array_unique()`程度的东西或从数组中删除所有重复项。但是，在这种特殊情况下，我需要一个逗号间隔的数组作为结果，而不是一个键值对。如果可以的话，我想做的是避免通过循环运行它。

因此，如果有类似的东西`array_unique()`或者我可以在去除数字索引之后应用到我的数组中，那么我会全神贯注地听取建议。

目前我正在通过一个循环构建初始数组，这种外观循环超过 5 到 150,000 个条目，其中一个特定条目可以具有大约 1,000 个可能的 3 点样式版本号中的任何一个。这就是我正在构建这个数组的内容。所以我有很多重复放入数组

例子：

```
$myarray = array();
foreach($obj as $prod)
{
   //cycling over the master loop adding all my other stuff and building it out..
   $myarray[] = $prod['version'];
} 
```

这给了我一个我想要的格式的相当大的数组

```
Array(
   "1.0.0",
   "1.0.1",
   "3.0.2220",
   "2.0.0",
   "2.0.1",
   "1.8.11",
   "3.0.2220",
   "3.0.2220",
   "2.0.0",
   "2.0.0",
   "2.0.0"
) 
```

循环完成后我做的地方。

```
$myarray = array_unique($myarray); 
```

这给我留下了一个像

```
Array(
  [0] = "1.0.0",
  [1] = "1.0.1",
  [2] = "3.0.2220",
  [3] = "2.0.0",
  [4] = "2.0.1",
  [5] = "1.8.11",
) 
```

这是不想要的，最终结果是想要的..

```
Array(
   "1.0.0",
   "1.0.1",
   "3.0.2220",
   "2.0.0",
   "2.0.1",
   "1.8.11",
) 
```

然后我可以在哪里整理它以按最早到最新版本的顺序列出..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:28:18.643

这个：

```
Array(
  [0] = "1.0.0",
  [1] = "1.0.1",
  [2] = "3.0.2220",
  [3] = "2.0.0",
  [4] = "2.0.1",
  [5] = "1.8.11",
) 
```

和这个：

```
Array(
   "1.0.0",
   "1.0.1",
   "3.0.2220",
   "2.0.0",
   "2.0.1",
   "1.8.11",
) 
```

是**一样**的，在 PHP 中所有数组都有一个索引，在最后一个例子中，只是没有打印它们，但它们在那里，如果你没有明确指定索引，它们只是从零开始的连续整数，像第一个例子。

在您的最后一个示例中，显然没有索引的示例，如果我们调用它，`$array`我们可以执行以下操作来打印其索引：

```
foreach ($array as $key => $value) {
   echo $key; //this will print the indexes of the array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:26:34.353

你想要一个没有键的数组吗？每个数组都有键。

# c++ - 如何在 C++ 中复制 std::string 类型的字符串？

> ID：12678819
> 
> 赞同：48
> 
> 时间：2012-10-01T18:23:31.087
> 
> 标签：c++, string, copy

我使用了该`strcpy()`函数，它仅在我使用 C 字符串数组时才有效，例如：

```
char a[6] = "text";
char b[6] = "image";
strcpy(a,b); 
```

但每当我使用

```
string a = "text";
string b = "image";
strcpy(a,b); 
```

我收到此错误：

> functions.cpp：没有匹配的函数调用`strcpy(std::string&, std::string&)`

如何在 C++ 中复制 2 个字符串数据类型的字符串？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-01T18:25:39.113

您不应该使用`strcpy()`复制 a `std::string`，仅将其用于[C-Style strings](http://www.cprogramming.com/tutorial/lesson9.html)。

如果要复制`a`到，`b`则只需使用`=`运算符。

```
string a = "text";
string b = "image";
b = a; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-01T18:25:37.170

strcpy 仅适用于 C 字符串。对于 std::string，您可以像复制任何 C++ 对象一样复制它。

```
std::string a = "text";
std::string b = a; // copy a into b 
```

如果要连接字符串，可以使用`+`运算符：

```
std::string a = "text";
std::string b = "image";
a = a + b; // or a += b; 
```

你甚至可以一次做很多：

```
std::string c = a + " " + b + "hello"; 
```

虽然`"hello" + " world"`不像你想象的那样工作。你需要一个明确的 std::string 在那里：`std::string("Hello") + "world"`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T18:42:26.623

**strcpy 示例：**

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str1[]="Sample string" ;
  char str2[40] ;
  strcpy (str2,str1) ;
  printf ("str1: %s\n",str1) ;
  return 0 ;
} 
```

输出：`str1: Sample string`

**你的情况：**

一个简单的`=`操作员应该可以完成这项工作。

```
string str1="Sample string" ;
string str2 = str1 ; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-10T15:36:02.637

**Caesar**的解决方案在我看来是最好的，但是如果您仍然坚持使用该`strcpy`功能，那么在您准备好字符串之后：

```
string a = "text";
string b = "image"; 
```

您可以尝试**：**

```
strcpy(a.data(), b.data()); 
```

**或者**

```
strcpy(a.c_str(), b.c_str()); 
```

只需调用类的`data()`或`c_str()`成员函数`std::string`，即可获取`char*`字符串对象的指针。

该`strcpy()`函数没有重载来接受两个`std::string`对象作为参数。它只有一个重载来接受两个`char*`指针作为参数。

两者都`data`返回`c_str`真正`strcpy()`想要的东西。

# php - PHP mail() 中继到邮件服务器

> ID：12678821
> 
> 赞同：3
> 
> 时间：2012-10-01T18:23:43.193
> 
> 标签：php, linux, email

我注意到其他一些与我的问题类似的帖子，但发现它们并不特定于我的场景，或者我只是不太了解事情。

我的情况：我正在尝试使用 PHP mail() 函数从 LAMP 服务器发送邮件。我想将邮件中继到另一个专用邮件服务器。

问题：我似乎无法发送邮件……有时。有时它似乎能够向域外的帐户发送邮件，但它无法向域/网络内的帐户发送任何邮件。我经常看到日志抱怨它无法向域控制器进行身份验证......但它不应该担心它应该吗？

我想我感到困惑的部分是 PHP mail() 函数是否会自动向服务器创建 SMTP 消息？或者我是否必须设置 php.ini 设置来查看本地主机，然后配置 sendmail/postfix 以将消息发送到邮件服务器。另外，如果我只指定 LAMP 服务器尝试与邮件服务器连接，为什么还要麻烦与域控制器进行身份验证？

希望有人可以帮助我解决这个问题。这一直困扰着我一段时间，一直无法找到解决方案。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:32:47.290

开始使用[Swiftmailer](http://swiftmailer.org/)（[文档](http://swiftmailer.org/docs/introduction.html)）或[PhpMailer](http://phpmailer.worxware.com/)，你的生活会更轻松......

# Swiftmailer 示例：

```
require_once 'lib/swift_required.php';
$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance('Wonderful Subject')
    ->setFrom(array('john@doe.com' => 'John Doe'))
    ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
    ->setBody('Here is the message itself');
$mailer->send($message); 
```

# PhpMailer 示例：

```
$mail             = new PHPMailer(); // defaults to using php "mail()"
$mail->SetFrom('name@yourdomain.com', 'First Last');
$mail->AddReplyTo("name@yourdomain.com","First Last");
$mail->AddAddress("whoto@otherdomain.com", "John Doe");
$mail->Subject    = "PHPMailer Test Subject via mail(), basic";
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$mail->MsgHTML($body);
$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment
if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    echo "Message sent!";
} 
```

我更喜欢 Swiftmailer，但你选择你最好的选择 ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:52:38.943

> PHP mail() 函数会自动向服务器创建 SMTP 消息吗？还是我必须设置 php.ini 设置来查看本地主机，然后配置 sendmail/postfix 以将消息发送到邮件服务器

PHP 的 mail() 函数本身并没有做那么多。在 linux 上，它通常会使用 php.ini 中定义的设置连接到 sendmail 或类似的本地实例。从示例 php.ini 中查看本节：

```
[mail function]
; For Win32 only.
; SMTP = localhost
; smtp_port = 25

; For Win32 only.
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
sendmail_path = /usr/sbin/sendmail -t -i 
```

对于 Windows，mail() 使用配置端口的 SMTP 服务器。对于 linux，使用定义的 sendmail 路径。

换句话说，Windows 上的 PHP mail() 函数连接到 SMTP 服务器，无论是本地的还是远程的。Linux 上的 PHP mail() 不能做同样的事情。在 Linux 上，该功能将仅使用本地 sendmail 安装，您需要自行设置以连接到 SMTP 服务器。这种配置的替代方法是使用 PHPMailer、Swiftmailer、Zend_Mail 或类似的，它们自己提供 SMTP 功能。

* * *

> 如果我只指定 LAMP 服务器尝试与邮件服务器连接，为什么还要麻烦与域控制器进行身份验证？

我远不是这方面的专家，但据我所知，您需要成为网络中经过身份验证的用户才能访问邮件所需的外部资源。域控制器会发出这种权限。

# jetty - 使用 Jetty 阻止特定 IP 地址

> ID：12678826
> 
> 赞同：1
> 
> 时间：2012-10-01T18:23:55.230
> 
> 标签：jetty

使用 Jetty 8 阻止特定 IP 地址的最佳/最简单方法是什么？显然 HTAccessHandler 不再适用于当前版本（来源：http: [//jetty.4.n6.nabble.com/jira-Created-JETTY-962-Clean-room-implementation-of-org-mortbay-jetty-securtiy -HTAccessHandler-td41205.html](http://jetty.4.n6.nabble.com/jira-Created-JETTY-962-Clean-room-implementation-of-org-mortbay-jetty-securtiy-HTAccessHandler-td41205.html)）所以我想知道是否有一个内置的解决方案没有编写自定义过滤器/Servlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:17:42.387

在 jetty-server 中使用 IPAccessHandler：

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/java/org/eclipse/jetty/server/handler/IPAccessHandler.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/java/org/eclipse/jetty/server/handler/IPAccessHandler.java)

# javascript - 使用 onchange 事件处理程序更改第二个选择列表

> ID：12678827
> 
> 赞同：0
> 
> 时间：2012-10-01T18:24:04.933
> 
> 标签：javascript, asp-classic, onchange

有一个表单域询问产品，这些是各种尺寸，第二个表单域询问数量。

每个产品的库存数量显示在第一个选择中，我希望第二个选择是可用库存的最大值，这样客户就不能订购超过我可用的数量。

这是第一个选择（也链接显示自定义图片）网站是ASP

```
<select name="barcode" id="imageselect">
 <option value>Please Select .....</option>
 <option value="322974">6.6lbs 100m  - £21.00 ( 2 in stock )</option>
 <option value="322975">8.2lbs 100m  - £21.00 ( 3 in stock )</option>
 <option value="322976"disabled=disabled>10.4lbs 100m  - £21.00 - Out of stock</option>
 <option value="323656">13.7lbs 100ms  - £21.00 ( 4 in stock )</option>
</select> 
```

这是第二个选择：

```
<select name="quantity">
<option value="1" selected="selected">1</option>
 <option value="2">2</option>
 <option value="3">3</option>
 <option value="4">4</option>
 <option value="5">5</option>
 <option value="6">6</option>
 <option value="7">7</option>
 <option value="8">8</option>
 <option value="9">9</option>
 <option value="10">10</option>
</select> 
```

尝试过使用 onchange 事件，但没有任何乐趣。

UK Autotrader 有一个很好的例子来说明这与他们的汽车制造商/车型的合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:10:29.707

这应该做你想要的......

注意：我通过在您的选项中添加“库存”属性来使用快照，以避免解析字符串。

```
<option value="322974">6.6lbs 100m  - £21.00 ( 2 in stock )</option> 
```

如果您想避免这种情况，下面的示例还向您展示了如何获取要为 stock 属性解析的文本。

```
$("#imageselect").change(function(event){
    var $this = $(this),
        value = $this.val();
    var $option = $("option[value="+value+"]", $this),
        text = $option.text(),   // you could parse this to get stock OR
        stock = parseInt($option.attr('stock'));  // short-cut: use stock attr

    // only show the first n options:
    var $opts = $("select[name=quantity] option");
    $opts.hide().slice(0, stock).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:58:35.727

第二个选择将显示最大库存。因此，您需要做的是将值存储在数据库中，获取最大值，然后在使用 asp 时，使用 ajax 调用页面，该页面将在此处显示为选择选项

# javascript - Backbone.js：为什么没有第二次触发事件？

> ID：12678828
> 
> 赞同：1
> 
> 时间：2012-10-01T18:24:06.873
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events, backbone-routing

我对 Javascript 和骨干网比较陌生。我正在开发一个简单的初学者级骨干应用程序。我有两个视图：Home 和 NewEntry。在 Home 中，我单击“新条目”以呈现 NewEntry。在 NewEntry 中，我单击“取消”以呈现主页。所以，我想分别点击“取消”和“新条目”在 Home 和 NewEntry 之间切换。

但是，它不起作用。这就是我尝试做的事情：

1.  在主页上，单击“新条目”。NewEntry 正确呈现。
2.  在 NewEntry 上，单击“取消”。家庭渲染正确。
3.  在主页上，单击“新条目”。NewEntry 再次正确呈现。
4.  在 NewEntry 上，单击“取消”。主页不呈现。与 click 事件关联的方法不会再次触发。

我非常难过！我不知道为什么。我想知道是否有不同的事件正在触发，但我不知道如何。有人知道我应该怎么做吗？

JavaScript：

```
var Views = {
    Home: Backbone.View.extend({
        template: $('#homeview-template').template(),
        initialize: function() {
            this.entries = new Collections.Entries();
            this.entries.on('all', this.render, this);
            this.entries.fetch();
        },
        render: function() {
            var currDate = getCurrentDate();
            var innerHtml = $.tmpl(this.template, {
                currDate: currDate
            });
            this.$el.html(innerHtml);
            return this;
        }
    }),

    NewEntry: Backbone.View.extend({
        template: $('#newentryview-template').template(),
        events: {
            'click button#cancel-new-entry': 'cancelNewEntry',
            'all': 'logEvents'
        },
        initialize: function() {
            // currently, do nothing
        },
        render: function() {
            var innerHtml = $.tmpl(this.template);
            this.$el.html(innerHtml)
            return this;
        },
        cancelNewEntry: function() {
            console.log("test 1");
            window.router.showHome();
        },
        logEvents: function(evnt) {
            console.log("works");
            console.log("event", evnt);
        }
    })
};

var Router = Backbone.Router.extend({
    initialize: function(inputs) {
        this.homeView = new Views.Home();
        this.newEntryView = new Views.NewEntry();
        this.el = inputs.el
    },

    routes: {
        "": 'showHome',
        "#": 'showHome',
        'new': 'writeNewEntry'
    },
    showHome: function() {
        this.el.empty();
        this.navigate("");
        this.el.append(this.homeView.render().el);
    },
    writeNewEntry: function() {
        this.el.empty();
        this.navigate('new');
        this.el.append(this.newEntryView.render().el);
    }
}); 
```

HTML：

```
 <script id='homeview-template' type='text/template'>
<h1 class='title'>My Journal</h1>
<div id='curr-date-new-entry'>
<div id='curr-date'>${currDate}</div>
<div id='new-entry'>
<a href='#/new'>New Entry</a>
</div>
</div>
</script>
<script id='newentryview-template' type='text/template'>
<h1 class='title'>New Entry</h1>
<input id='new-entry-title' placeholder='New entry title' type='text'/>
<input id='new-entry-body' placeholder='New entry content' type='text'/>
<button id='submit-new-entry'>Submit</button>
<button id='cancel-new-entry'>Cancel</button>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:58:43.153

这可能会解决您的问题：

```
writeNewEntry: function() {
    this.el.empty();
    this.navigate('new');
    this.el.append(this.newEntryView.render().el);
    //fix: http://backbonejs.org/#View-delegateEvents
    this.newEntryView.delegateEvents();
} 
```

但是，如果您不重用视图，我建议您直接在方法 writeNewEntry 上实例化视图而不是初始化，这样您就不需要手动调用 delegateEvents：

```
writeNewEntry: function() {
    this.el.empty();
    this.navigate('new');
    this.newEntryView = new Views.NewEntry();
    this.el.append(this.newEntryView.render().el);
} 
```

# c# - C# - 何时使用 public int virtual，何时只使用 public int

> ID：12678833
> 
> 赞同：22
> 
> 时间：2012-10-01T18:24:25.767
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

我正在学习 J Galloway 的教程“Professional ASP.NET MVC 3”。在本教程中，Jon 向我们展示了如何构建 MVC 音乐商店。

我正在创建 CS 类以首先使用 EF 代码对数据进行建模。

我书中**所有**的例子，`public virtual int property {get; set; }`都是用的，不做解释。虚拟一词无处不在。

在网络的其他地方，我没有看到任何形式的一致使用的术语虚拟。

谁能给我解释一下：

1.  在此特定上下文中“虚拟”一词的目的
2.  有必要使用“虚拟”吗？
3.  为什么有些人使用“虚拟”而其他人不使用？
4.  为什么有些人在定义外键时只使用“虚拟”？
5.  “虚拟”一词的最佳实践用法是什么？

提前谢谢了

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T18:27:18.650

为了真正理解`virtual`关键字，您通常需要阅读[多态性](http://msdn.microsoft.com/en-us/library/ms173152.aspx)：

> 多态性通常被称为继封装和继承之后的面向对象编程的第三大支柱。多态性是一个希腊词，意思是“多形”，它有两个不同的方面：
> 
> 1.  在运行时，派生类的对象可以在方法参数和集合或数组等位置被视为基类的对象。发生这种情况时，对象的声明类型不再与其运行时类型相同。
>     
>     
> 2.  ***基类可以定义和实现虚方法，派生类可以覆盖它们，这意味着它们提供自己的定义和实现。在运行时，当客户端代码调用该方法时，CLR 会查找对象的运行时类型，并调用该虚拟方法的覆盖。因此，在您的源代码中，您可以调用基类上的方法，并导致执行派生类的方法版本。***

一旦你更好地理解了这些概念，你就可以确定你从书中创建的方法是否需要`virtual`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T22:12:56.540

> 谁能给我解释一下：

1.  在此特定上下文中“虚拟”一词的目的

    这里的其他用户很好地回答了这个问题，并提供了很好的参考。

2.  有必要使用“虚拟”吗？

    这取决于。有时是必要的，有时是多余的。

3.  为什么有些人使用“虚拟”而其他人不使用？

    他们在需要时使用它，或者在他们认为可能需要时使用它。

4.  为什么有些人在定义外键时只使用“虚拟”？

    在为实体框架和 NHibernate 等对象关系映射工具定义外键时，`virtual`通常是必要的，因为这些 ORM 工具会动态创建一个继承自您的类的新类。这些“动态代理”类覆盖您的`virtual`属性，以提供维护外键一致性所需的额外行为。在 NHibernate 的情况下，所有属性（不仅仅是外键）都必须标记为`virtual`。这是因为 NH 动态代理添加了自定义行为来决定从数据库中检索模型上的哪些属性，以及避免加载哪些属性。

5.  “虚拟”一词的最佳实践用法是什么？

    当您打算在更派生的类中覆盖成员（方法或属性）时使用它。不要在标有 的类中使用它们`sealed`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T18:33:32.230

好的，所以术语虚拟，基本上意味着“可覆盖”（具有基本实现），但不是抽象的（意味着没有原始实现）。

如果您希望某人覆盖您的方法或属性，而不是“隐藏”它，则“虚拟”关键字是必需的。

所以这一切都适用于继承和多态。派生类可以覆盖虚拟方法并使其成为自己的实现（甚至在该方法中调用基实现）。通过覆盖，您可以保证您的新方法将以多态方式调用，而不是基本实现。

相反，使用“new”关键字，您可以“隐藏”数据成员和方法。这也将允许您进行自己的实现，但不会多态地执行您的新实现，它将使用基类实现。

[虚拟关键字](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.80%29.aspx)

[使用 Override 和 New 关键字进行版本控制（C# 编程指南）](http://msdn.microsoft.com/en-us/library/6fawty39%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-01T19:29:09.613

他在模型中使用 virtual 关键字的原因是启用[Change Tracking 代理](http://msdn.microsoft.com/en-us/library/vstudio/dd468057%28v=vs.100%29.aspx)。这是实体框架特有的东西（编辑：还有 NHibernate，可能还有其他任何形式，感谢@danludwig），它允许 EF 自动管理您映射到数据库的实体。

来自 MSDN：

> 映射到数据模型中实体类型的属性的每个属性都必须具有非密封（Visual Basic 中的 NotOverridable）、公共和虚拟（Visual Basic 中的可替代）get 和 set 访问器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T18:29:07.600

请参阅[**虚拟（C# 参考）**](http://msdn.microsoft.com/en-us/library/9fkccyh4.aspx) 。添加`virtual`关键字允许在派生类中覆盖该属性，这很可能在您构建 MVC 应用程序的通用基类时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T18:27:56.497

来自文档

> virtual 关键字用于修改方法、属性、索引器或事件声明，并允许在派生类中对其进行覆盖。

因此，如果您需要隐藏旧功能并添加新功能，您可以使用 virtual。根据开发新的模块和架构，不同的应用程序需要不同的要求。

见这里[http://msdn.microsoft.com/en-us/library/9fkccyh4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9fkccyh4(v=vs.80).aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T18:37:06.597

Virtual 确保继承的子类通过强制它们覆盖属性来覆盖基类。如果没有它的 virtual 关键字，子对象就不能覆盖基本功能。

# restsharp - 休息尖锐执行 由于强制转换异常而失败

> ID：12678834
> 
> 赞同：1
> 
> 时间：2012-10-01T18:24:28.823
> 
> 标签：restsharp

我有这个：

```
public Int32 NumberOfLocationsForCompany(int companyId)
{
        var response = _curl.ResetRequest()
            .WithPath(LOCATION_URL)
            .AddParam("companyId", companyId.ToString())
            .RequestAsGet()
            .ProcessRequest<Int32>();

        return response;
} 
```

最后调用这个。

```
 public T ProcessRequest<T>() where T : new()
    {
        var response = _client.Execute<T>(_request);

        if (response.ErrorException != null)
        {
            throw response.ErrorException;
        }
        return response.Data;
    } 
```

但我得到这个错误。我不明白为什么它试图将一个 int 映射到一个集合，或者为什么它是 Int64 与我指定的 32。：**无法将“System.Int64”类型的对象转换为“System.Collections.Generic.IDictionary`2[ System.String，System.Object]'。**

当我直接点击api时，这就是我得到的

```
<int xmlns="http://schemas.microsoft.com/2003/10/Serialization/">17</int> 
```

我觉得这是我对 Rest Sharp 不了解的地方。我告诉执行方法期待一个 Int，它接收和 int，但试图将它映射到一个集合。为什么和从哪里收集？

我注意到，当我查看基本响应对象的内容时，出现了适当的结果“17”，为什么 Rest Sharp 找不到它？仍然在哪里找到收藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:14:53.840

在查看响应对象时，我发现返回值在内容与数据中。每当我不返回对象或对象列表时，我发现这是真的。

所以现在当我期待一个 int、string、bool 等时，我使用以下内容并转换返回值的类型：

```
 public string ProcessRequestWithValue()
    {
        var response = _client.Execute(_request);

        if (response.ErrorException != null)
        {
            throw response.ErrorException;
        }

        return response.Content;
    } 
```

希望这可以帮助！

# c - 为什么交换（&a++，&b++）给出错误“一元'&'中的左值无效”？

> ID：12678838
> 
> 赞同：1
> 
> 时间：2012-10-01T18:24:39.197
> 
> 标签：c, pointers, printf, swap, memory-address

```
#include<stdio.h>
int swap(int *a,int *b);
int main()
{
    int a=10,b=20;
    swap(&a++,&b++);
    printf("a=%d\nb=%d",a,b);
    return 0;
}

int swap(int *a,int *b)
{
    int temp;
    temp=*a;
    *a=*b;
    *b=temp;
} 
```

为什么这个函数会给出错误“invalid lvalue in unary '&'”？正常`swap(&a,&b)`工作正常，但`swap(&a++,&b++)`也会`swap(&(a++),&(b++))`出错。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T18:26:30.830

后增量运算符返回执行后增量操作的变量中包含的先前值的临时版本。此临时值不是左值或“命名”内存位置，因此您不能使用一元地址操作符获取该临时地址。

例如，在某些架构（如 x86 等）上，由简单 POD 类型（如 a 等）的后增量运算符生成的临时值`int`将`long`临时保存在 CPU 寄存器中，而不是实际的内存位置。在这些情况下，您根本无法获取 CPU 寄存器的“地址”。

# php - 查询运行后不显示标记

> ID：12678842
> 
> 赞同：1
> 
> 时间：2012-10-01T18:24:52.780
> 
> 标签：php, google-maps, google-maps-markers

我有一个网站，用户可以在其中从下拉菜单中选择一个值。单击按钮后，带有 ajax 的请求被发送到服务器，结果我得到了一些文本（我使用 ajax，因为我不希望页面刷新）。当我想使用 googlemaps api 来获取（连同文本）带有一些标记的地图时，就会出现问题。我正在尝试在 $.ajax 的成功函数中添加相应的代码来创建标记，但它似乎不起作用。其实我不知道这是否是正确的方法。

我将在这里发布我在成功函数中添加的部分代码：

```
$.ajax({
      type:'POST',
      url:'activities_code.php',
      data: {datastr:datastr, datastr1:datastr1},
      success:function(response){
                $("#msg").html(response);

  map = new google.maps.Map(document.getElementById("map"), {
 center: new google.maps.LatLng(0, 0),
 zoom: 14,
 mapTypeId: google.maps.MapTypeId.ROADMAP,
 mapTypeControl: false,
 mapTypeControlOptions: {
style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
},
navigationControl: true,
navigationControlOptions: {
style: google.maps.NavigationControlStyle.SMALL
}
});
<?php
$category = $_POST['category'];
$query = mysql_query("SELECT activities,city,latt,lonn FROM activities where     activities='$category'");     
while ($row = mysql_fetch_array($query)){
$name=$row['activities'];
$lat=$row['latt'];
$lon=$row['lonn'];
$desc=$row['city'];
echo ("addMarker($lat, $lon,'<b>$activities</b><br/>$city');\n");
}
?>
center = bounds.getCenter();
map.fitBounds(bounds);              
            }        
   });

 });
}); 
```

在 php 部分我回显

```
 echo ("addMarker($lat, $lon,'<b>$activities</b><br/>$city');\n"); 
```

addMarker 是这个函数的位置：

```
 function addMarker(lat, lng, info) {
 var pt = new google.maps.LatLng(lat, lng);
 bounds.extend(pt);
 var marker = new google.maps.Marker({
 position: pt,
 icon: icon,
 map: map
 });
 var popup = new google.maps.InfoWindow({
 content: info,
 maxWidth: 300
 });
 google.maps.event.addListener(marker, "click", function() {
 if (currentPopup != null) {
 currentPopup.close();
 currentPopup = null;
 }
 popup.open(map, marker);
 currentPopup = popup;
 });
  google.maps.event.addListener(popup, "closeclick", function() {
 map.panTo(center);
  currentPopup = null;
 });
 } 
```

# xml - 在 Delphi 中访问 XML 文档的一部分

> ID：12678848
> 
> 赞同：3
> 
> 时间：2012-10-01T18:25:12.287
> 
> 标签：xml, delphi, pascal

我在我的 xml 文件中使用了 delphi 数据绑定向导，一切都编译并运行良好。

我的表单上有 3 个组合框。制造商、型号和年份。

使用 FormCreate 上的以下代码填充制造商。

```
procedure TfrmMain.FormCreate(Sender: TObject);
var
  RGearing : IXMLracegearingType;
  i : Integer;
begin
  // Load XML Document into Memory
  RGearing := Getracegearing(XMLDocument1);

  // Populate Manufacturer combobox
  for i := 0 to RGearing.Car.Count-1 do
  begin
    cbManufac.Items.Add(RGearing.Car[i].Manufacturer);
  end;

  // Copy current selected Manufacturer to string variable
  varManufac := cbManufac.ListItems[(cbManufac.ItemIndex)].Text;
end; 
```

我的问题是如何根据所选的当前制造商填充模型组合框。

这是随附的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<gearing>
  <car>
    <id>1</id>
    <manufacturer>Ford</manufacturer>
    <model>Test 1</model>
    <year></year>
  </car>
  <car>
    <id>2</id>
    <manufacturer>Ford</manufacturer>
    <model>Test 2</model>
    <year></year>
  </car>
  <car>
    <id>3</id>
    <manufacturer>Honda</manufacturer>
    <model>Test 1</model>
    <year></year>   
  </car>
  <settings>
    <form_height></form_height>
    <form_width></form_width>
  </settings>
</gearing> 
```

因此，如果选择的制造商是福特，那么模型组合框需要显示测试 1 和测试 2 作为项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:41:19.073

可以用XPath，试试这样的一句话`./gearing/car[manufacturer="Ford"]/model`

这是一个基本示例

```
{$APPTYPE CONSOLE}

uses
  ActiveX,
  Variants,
  ComObj,
  Classes,
  SysUtils;

const
 XMLStr =
 '<?xml version="1.0" encoding="UTF-8"?>'+
 '<gearing>'+
 ' <car>'+
 '   <id>1</id>'+
 '   <manufacturer>Ford</manufacturer>'+
 '   <model>Test 1</model>'+
 '   <year></year>'+
 ' </car>'+
 ' <car>'+
 '   <id>2</id>'+
 '   <manufacturer>Ford</manufacturer>'+
 '   <model>Test 2</model>'+
 '   <year></year>'+
 ' </car>'+
 ' <car>'+
 '   <id>3</id>'+
 '   <manufacturer>Honda</manufacturer>'+
 '   <model>Test 1</model>'+
 '   <year></year>'+
 ' </car>'+
 ' <settings>'+
 '   <form_height></form_height>'+
 '   <form_width></form_width>'+
 ' </settings>'+
'</gearing>';

function GetModels(const manufacturer:string):TStringList;
const
  Msxml2_DOMDocument='Msxml2.DOMDocument.6.0';
var
  XmlDoc         : OleVariant;
  Nodes          : OleVariant;
  lNodes         : Integer;
  i              : Integer;
begin
  Result:=TStringList.Create;
  //create an instance to the XML DOM
  XmlDoc       := CreateOleObject(Msxml2_DOMDocument);
  try
    XmlDoc.Async := False;
    XmlDoc.LoadXML(XMLStr);
    XmlDoc.SetProperty('SelectionLanguage','XPath');
    //check for errors in the xml file
      if (XmlDoc.parseError.errorCode <> 0) then
       raise Exception.CreateFmt('Error in Xml Data %s',[XmlDoc.parseError]);

    //select the nodes with match with the expression
    //sample ./gearing/car[manufacturer="Ford"]/model
    Nodes := XmlDoc.selectNodes(Format('./gearing/car[manufacturer="%s"]/model',[manufacturer]));
    //get the number of nodes selected
    lNodes:= Nodes.Length;
    //traverse the nodes
     for i:=0 to lNodes- 1 do
      Result.Add(Nodes.Item(i).Text);

  finally
   XmlDoc :=Unassigned;
  end;
end;

Var
 Models : TStringList;
begin
 try
    CoInitialize(nil);
    try
      Models:=GetModels('Ford');
      try
        Writeln(Models.Text);
      finally
       Models.Free;
      end;
    finally
      CoUninitialize;
    end;
 except
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:57:01.897

我看不到你的功能和类型

```
RGearing : IXMLracegearingType; 
RGearing :=Getracegearing(XMLDocument1); 
```

所以我只能用下面的代码来测试它。
浏览代码并根据您的需要对其进行自定义。

![在此处输入图像描述](../Images/29e54d6fc4c5b07005c87c29452c56cc.png)

```
unit xmlCombo;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
    cbManufac: TComboBox;
    cbModel: TComboBox;
    procedure getManufac;
    procedure getModel(const ManufacVal:string);
    procedure FormActivate(Sender: TObject);
    procedure cbManufacClick(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
uses MSXML,ActiveX,ComObj;

const
 XMLTestStr =
 '<?xml version="1.0" encoding="UTF-8"?>'+
 '<gearing>'+
 ' <car>'+
 '   <id>1</id>'+
 '   <manufacturer>Ford</manufacturer>'+
 '   <model>Test 1</model>'+
 '   <year></year>'+
 ' </car>'+
 ' <car>'+
 '   <id>2</id>'+
 '   <manufacturer>Ford</manufacturer>'+
 '   <model>Test 2</model>'+
 '   <year></year>'+
 ' </car>'+
 ' <car>'+
 '   <id>3</id>'+
 '   <manufacturer>Honda</manufacturer>'+
 '   <model>Test 1</model>'+
 '   <year></year>'+
 ' </car>'+
 ' <settings>'+
 '   <form_height></form_height>'+
 '   <form_width></form_width>'+
 ' </settings>'+
'</gearing>';

var
  varManufac : string;
  RGearing  : IXMLDOMDocument;

procedure TForm1.cbManufacClick(Sender: TObject);
begin
     getModel(cbManufac.Items[cbManufac.ItemIndex]);
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
  RGearing:=CoDOMDocument.Create;
  RGearing.loadXML(XmlTestStr);
  getManufac;
end;

procedure TForm1.getModel(const ManufacVal:string);
Var
  XMLDOMNodeL  : IXMLDOMNodeList;
  ChildST : String;
  ChildN,BNode : IXMLDOMNode;
  i : Integer;

begin
  cbModel.Items.Clear;
  cbModel.Text:='';
  XMLDOMNodeL:=RGearing.getElementsByTagName('car');
  for i := 0 to XMLDOMNodeL.length-1 do
  begin
    ChildN:=XMLDOMNodeL[i].selectSingleNode('manufacturer');
    if ChildN.text=ManufacVal then begin
       BNode:=XMLDOMNodeL[i].selectSingleNode('model');           
       ChildST:=BNode.text;
       if cbModel.Items.IndexOf(ChildST) = -1 then cbModel.Items.Add(ChildST);
    end;
  end;
end;

procedure TForm1.getManufac;
Var
  XMLDOMNodeList  : IXMLDOMNodeList;
  ChildST : string;
  i : Integer;

begin
  cbManufac.Items.Clear;
  cbManufac.Text:='';
  // Populate Manufacturer combobox
  XMLDOMNodeList:=RGearing.getElementsByTagName('manufacturer');
  for i := 0 to XMLDOMNodeList.length-1 do
  begin
    ChildST:=XMLDOMNodeList[i].text;
    if cbManufac.Items.IndexOf(ChildST) = -1 then cbManufac.Items.Add(ChildST);
    if cbManufac.Items.Count = 1 then begin
       cbManufac.Text:=ChildST;
       getModel(ChildST);
    end;
  end;
end;

end. 
```

**从文件加载 xml。**

```
if RGearing.Load('File.xml') then
  [...]
 else
  ShowMessage('Could not load file : File.xml');
end; 
```

我希望这有帮助。

# javascript - 一次执行后停止jquery函数

> ID：12678852
> 
> 赞同：0
> 
> 时间：2012-10-01T18:25:31.410
> 
> 标签：javascript, jquery

我有`Nextthing`隐藏第一个 iframe 并显示下一个 iframe 的函数，但是正如您将在函数的代码中看到的那样，我只为下一个 iframe 所做的，所以如果他为第二个 iframe 执行操作以隐藏它并显示下一个 iframe 它将显示但在错误的位置。

如何使功能在一次运行后停止？

```
function Nextthing (){

    $("#i").hide();
    $('.table').eq(1).find('tbody tr').eq(2).after(
        '<tr><td colspan=10><iframe class="iframe"  src="/msg.html?msgId=' +
        $('.table').eq(1).find('tbody tr').eq(2)
        .find('td a').eq(0).text()+'&constant=1"></iframe></td></tr>);
} 
```

更新：您可以看到从该页面 msg.html 调用 iframe，该页面有一个输入和一个提交按钮，并且`Nextthing`在该按钮中调用该函数，如下所示：

```
<input type="submit" onclick="parent.Nextthing();" /> 
```

当有人按下 iframe 中的提交按钮时，它将根据 msgId 加载 msg.html 下一页的 iframe，我希望此加载仅一次...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:28:36.263

您可以使用

`.one()` handler.. 它将运行代码一次并停止执行。

```
$('input[type=submit]').one('click', function() {
  $("#i").hide();
   $('.table').eq(1).find('tbody tr').eq(2).after('<tr><td colspan=10><iframe class="iframe"     
    src="/msg.html?msgId='+$('.table').eq(1).find('tbody tr').eq(2).find('td 
    a').eq(0).text()+'&constant=1"></iframe></td></tr>);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:29:15.553

为此，我通常只有一个全局变量，例如 elTriggers = false 并检查它并在触发时使其为真。您还可以查看 jquery 的[一个](http://api.jquery.com/one/)功能。

# binding - 将远程表单绑定到引导模式

> ID：12678855
> 
> 赞同：1
> 
> 时间：2012-10-01T18:25:40.410
> 
> 标签：binding, twitter-bootstrap, modal-dialog

我在引导模式窗口中有一个可以完美运行的表单 - 结果在表单提交时发布到窗口。此表单被硬编码到页面的 html 中。

现在我正在尝试远程加载表单。它可以很好地加载表单（将其放入模态体）。但是，现在当我单击提交时，模式消失了，整个页面都转到了表单 url。

我需要在父页面或远程 url 中定义我的绑定吗？我的想法是，在页面加载时，DOM 不知道远程表单的 id。也不确定远程 url 是否可以引用父页面上的 div。

所以看起来我不同步 - 父 DOM 无法识别表单，因为它是远程的，并且不确定远程表单是否可以绑定到父级中定义的模式。

有什么想法吗？

谢谢！

从父页面：

```
<div class="modal hide fade in" id="mymodal">
<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button></div>
<div class="modal-body"></div>
</div> 
```

在此处加载远程 URL：

```
<a class="tip" data-toggle="modal" data-target="#mymodal" href="/index.php/change_delivery/change/2" rel="tooltip" title="Change Delivery Date"><i class="icon-calendar"></i></a> 
```

来自远程 URL 的表单：

```
<form class="form-horizontal" id="delivery_date_form" action="/change_delivery/submit_change">
....
</form> 
```

并在远程网址/表单的末尾：

```
<script>
$(function() {
$('#delivery_date_form').bind('submit', function() {
    $.ajax({
        url: "change_delivery/submit_change",
        type: "POST",
        dataType: "html",
        contentType: "application/html",
        success: function(msg) {
            // this is returned value from your PHP script
            //your PHP script needs to send back JSON headers + JSON object, not new HTML document!
            // update your "message" element in the modal
            $("#modal-body").text(msg);
        }
    });
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:48:58.557

我就是这样做的：

```
$(function(){
   var $mymodal = $('#mymodal');
    $('[data-toggle=modal]').click(function() {
        $mymodal.attr('data-form-action', $(this).attr('data-remote'));
    });

    $mymodal.find('.save-button').click(function() {
        $.post($mymodal.attr('data-form-action'), function(data) {
            $mymodal.find('.modal-body').html(data);
        });
    });
}); 
```

# joomla - Joomla 2.5 - 可见菜单项 - 但需要登录才能访问

> ID：12678856
> 
> 赞同：1
> 
> 时间：2012-10-01T18:25:57.323
> 
> 标签：joomla, joomla2.5, joomla1.7, joomla1.6

我跟着这个关于 ACL 的教程 - [http://community.joomla.org/blogs/community/1252-16-acl.html](http://community.joomla.org/blogs/community/1252-16-acl.html)

为了让一切都清楚：这就是我需要的：

1.  有一个链接到文章的菜单项
2.  用户进入（尚未登录）网站（用户是否已注册无关紧要）
3.  这个用户应该看到菜单项
4.  用户点击菜单项
5.  *   如果用户未登录 - 要求用户输入用户名/密码
    *   如果用户已登录 -> 转到 6
6.  登录成功后，用户可以看到链接菜单项的文章的内容。

我的目标是让所有用户都可以看到一个菜单项：登录和未登录。但是当点击时 - 只有登录的用户才能查看菜单项指向的内容。如果用户未登录 -> 应显示登录表单。

遵循上述教程后，我得到了一个对于未登录的用户完全不可见的菜单项。

如何使菜单项对所有人可见，但需要登录才能查看内容？

谢谢你。

编辑1：

我刚刚找到了这个解决方案[http://docs.joomla.org/Auto_redirect_guests_to_login](http://docs.joomla.org/Auto_redirect_guests_to_login) 它是唯一的解决方案吗？我有一个巨大的树形菜单结构。这意味着我需要克隆我的巨大菜单......每次我更改菜单项名称时 - 我应该做两次（在可见菜单和不可见菜单中）。没有 2 个菜单，还有其他解决方案吗？

编辑2：

找到了另一个解决方案（黑客核心文件）。这是菜单项设置为“公共”但文章 ACL 设置为“已注册”的情况

组件/com_content/views/article/view.html.php

从

```
// Check the view access to the article (the model has already computed the values).
if ($item->params->get('access-view') != true && (($item->params->get('show_noauth') != true &&  $user->get('guest') ))) {
  JError::raiseWarning(403, JText::_('JERROR_ALERTNOAUTHOR'));
  return;
} 
```

至

```
// Check the view access to the article (the model has already computed the values).
if ($item->params->get('access-view') != true && (($item->params->get('show_noauth') != true &&  $user->get('guest') ))) {
  // Redirect to login
  $uri = JFactory::getURI();
  $app->redirect('index.php?option=com_users&view=login&return=' . base64_encode($uri), JText::_('Members please login to view this page. If you are not a member please <a href="/component/users/?view=registration">register here<a>'));
  return;
} 
```

如何覆盖该代码并避免破解核心文件？

或者也许有更优雅的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:48:03.670

您可以做的是模板覆盖并将登录表单添加到提供消息的页面。模板覆盖将允许您在不破坏核心文件的情况下向页面添加额外内容，因此在更新 Joomla 时，它仍然存在。

有关如何覆盖的更多信息，请参阅以下链接：

[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

希望这可以帮助。

# tfs - git tf 自动挤压异常

> ID：12678858
> 
> 赞同：1
> 
> 时间：2012-10-01T18:26:00.970
> 
> 标签：tfs, git-tf

我正在尝试将 git 存储库推送到 tfs，它上面有多个分支。深度签入时出现 stackoverflow 错误。看起来像递归调用失败。有解决方法吗？

git tf checkin --deep --autosquash

在 com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath 失败（CommitWalker.java:260）

# php - Codeigniter 修改 POST

> ID：12678862
> 
> 赞同：0
> 
> 时间：2012-10-01T18:26:12.343
> 
> 标签：php, codeigniter

我使用一种视图来添加/编辑数据库数据：

```
<input name="blah" id="blah" value="<? set_selected('blah')?> /> 
```

在我的编辑控制器中，我这样做：

```
$_POST['blah'] = 'DB value';
$this->load->view('...'); 
```

但是输入字段是空白的。我希望为我的编辑案例预先填充输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:51:29.187

正如其他人提到的那样，CI Views 可以将数据数组作为第二个参数。

[http://codeigniter.com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)

我不喜欢设置 $_POST 数组然后将其作为数据数组传递的想法。$_POST 应该只用于从 UI 表单传递的值。由于无论如何您都必须手动设置 $_POST 数组，因此您不妨使用单独的数组对象。我会创建一个包含所有设置值的数组。即数组（'blah' => $dbvalue）；并传递它而不是预先填充的 $_POST 数组。

其次，您的示例代码使用“set_selected()”。该函数是“set_select()”，用于选项标签。所以那行代码有两个问题。它需要要么是

```
 <input .... value="set_value('blah')" /> 
```

或者

```
 <option ....value="v1" "set_select('blah', 'v1')"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:29:49.770

您需要将 $_POST 传递给视图，发布的数据应该从控制器传递到视图加载函数的第二个参数中的视图。试试这个

```
 $this->load->view('content', $_POST); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:41:47.250

你传递给视图的任何东西都会变成一个实际的变量。所以你的代码是。

```
<input name="blah" id="blah" value="<?php echo $blah; ?> /> 
```

```
$_POST['blah'] = 'DB value';
$this->load->view('...', $_POST); 
```

# c# - 如何在 Windows 窗体、.net 3.5 中设置窗体位置

> ID：12678863
> 
> 赞同：0
> 
> 时间：2012-10-01T18:26:14.340
> 
> 标签：c#, winforms, .net-3.5

我正在将用 C# 编写的 Windows 窗体应用程序迁移到 .net 3.5，看来将 Location 属性设置为 0,0 无法将其定位在左上角。它从顶部向下大约 10 个像素。

还有另一种方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:29:43.590

您还必须将[StartPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.startposition.aspx)设置为`FormStartPosition.Manual`。

# iphone - iphone 5 模拟器 - 无法点击屏幕底部？

> ID：12678864
> 
> 赞同：7
> 
> 时间：2012-10-01T18:26:25.577
> 
> 标签：iphone, objective-c, ios, iphone-5

我正在尝试更新一个应用程序以添加对 iPhone 5 的支持。根据我看到的其他线程，我已经添加了`Default-568h@2x.png`指定的内容，并且我已经向应用程序添加了一些大小合适的新背景图像。问题是我的应用程序的底部似乎没有响应触摸（我有一个页面控件和一个信息按钮）。

此外，在切换屏幕时（使用以下代码）：

```
[self presentModalViewController:tableNavController animated:YES]; 
```

屏幕底部变黑。这个黑色的部分基本上正是我无法触及的地方。此问题的屏幕截图如下：

![黑条截图](../Images/07a34273df019ef8e1676abf27c589ea.png)

关于为什么会发生这种情况的任何想法？为什么我无法访问此底部？请注意，如果我运行常规的 iPhone 4S 或 iPad 模拟器，则不会发生这种情况。我可以访问屏幕的整个部分。

编辑：可能是模拟器问题吗？我还没有实体 iPhone 5，因此无法在真实设备上进行测试。

`Auto-Layout`Edit2：我已经尝试在视图和应用程序主窗口上启用和禁用。如果我将以下日志语句添加到 viewDidLoad：

```
NSLog(@"Window is: %0.0fx%0.0f", window.frame.size.width, window.frame.size.height);
NSLog(@"View is: %0.0fx%0.0f", viewController.view.frame.size.width, viewController.view.frame.size.height); 
```

我收到`Window is: 320x480\. View is: 320x548`。所以看起来这可能是我的窗口有问题。我会继续调查。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:51:51.007

这可以通过在窗口上启用“启动时全屏”来解决。删除和重新创建仅能实现这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T18:47:52.243

弄清楚了。尽管视图是，但主窗口没有调整大小。我从我的 xib 中删除了该窗口，创建了一个新窗口并重新链接它。这解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T03:49:17.900

一个更简单的解决方案是选择窗口并切换到属性检查器。将大小更改为**Retina 4 全屏**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:18:15.370

> 一个更简单的解决方案是选择窗口并切换到属性检查器。将大小更改为 Retina 4 全屏。

大多数情况下，史蒂文的回答是正确的。但是，现在您的窗口比 3.5 英寸设备上的屏幕大，而 4 英寸设备上的大小合适。基本上，如果您以后有任何引用该窗口的内容，则必须在运行时调整窗口大小，否则将返回 4" 窗口。

例如，如果您在代码中使用它 `[[[UIApplication sharedApplication] delegate] window]`

请注意这一点，据说它适用于大多数应用程序。

# google-apps-script - 有没有办法在按钮的 serverClickHandler 的新选项卡中打开谷歌文档？

> ID：12678866
> 
> 赞同：0
> 
> 时间：2012-10-01T18:26:26.133
> 
> 标签：google-apps-script

有没有办法在按钮的 serverClickHandler 的新选项卡中打开谷歌文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:03:36.240

使用[Anchor](https://developers.google.com/apps-script/class_anchor)代替按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:53:31.270

如果你需要一个按钮。您可以将链接放在按钮上并使内容透明等。但这很混乱。我怀疑 HTMLService 是一种更清洁的方法，但没有尝试使用 HTMLService 来实现。

如何悬停东西，使用 widget.setStyleAttribute("position", "absolute");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:27:32.497

为什么要使用按钮来调用函数？最好创建一个锚点（链接）

SRIK 的最佳答案！！

# excel - Powershell 打开 Excel 数据透视表并进行编辑

> ID：12678868
> 
> 赞同：1
> 
> 时间：2012-10-01T18:26:28.680
> 
> 标签：excel, powershell, pivot-table

我正在尝试通过 Powershell 打开一个 excel 文件，并且我有兴趣通过 powershell 脚本更改一个字段，但我无法让它工作。我要更改的字段是带有名称列表的下拉菜单。我希望能够打开数据透视表并将下拉菜单设置为某个名称。

这是迄今为止我的名为 PivotTable1 的数据透视表，字段名称称为 ALERT_STATUS。它只是在 excel 中打开数据透视表并选择字段名称。我如何告诉它将 ALERT_STATUS 字段上的下拉列表更改为特定的内容？

```
$excel = New-Object -ComObject excel.application
$excel.Visible = $True
$excel.DisplayAlerts = $False

$workbook = $excel.Workbooks.Open("C:\Users\myuser\Documents\ExampleFile.xlsx")

$pivotsheet = $workbook.worksheets.Item(1) 
$pivotfields = $pivotsheet.PivotTables("PivotTable1").PivotFields("ALERT_STATUS") 
```

# binary - 存储-64（十六进制）和128（十六进制）之间的值所需的最小寄存器长度？

> ID：12678877
> 
> 赞同：-1
> 
> 时间：2012-10-01T18:26:58.287
> 
> 标签：binary, bit, cpu-registers, minimum-size, numeric-ranges

假设 2 的补码格式，处理器中存储`-64 (hex)`和之间的值所需的最小寄存器长度是多少？`128 (hex)`

我在考虑一个 8 位寄存器，因为 8 位寄存器的 2 的补码从 0 变为 255。

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T07:35:38.540

可能您使用了错误的术语。0x64 和 0x128 很少用作十六进制值。如果你的意思是这些值，那么显然你不能用 8 位存储那么大的范围。0x128 - (-0x64) = 0x18C 需要至少 9 位来存储

OTOH 64 和 128 是非常常见的值，因为它们是 2 的幂。使用常见的 2 的补码编码也会花费您 9 位（因为 128 超出了 8 位的二进制补码范围）并浪费了大量未使用的值。但实际上几乎没有 9 位系统，所以您必须使用 16 位短裤。因此，如果您想节省内存，唯一的方法是**使用您自己的编码**。

如果您**只需要 storage**的值，几乎任何编码都是合适的。例如，`int8_t`正常使用 -64 到 127 和 128 的特殊情况（-128、-65...任何您喜欢的数字），或`uint8_t`从 0 到 192 并线性映射值。只需在加载/存储时转换为正确的值。操作仍然需要在大于 8 位的类型中进行，但磁盘大小只有 8 位

如果您需要**计算**值，则应更加小心。例如，您可以使用[超 64](https://en.wikipedia.org/wiki/Signed_number_representations#Offset_binary)编码，其中二进制 0 表示 -64，192 表示 128，或者通常`a`用`a - 64`. 每次计算后，您都必须重新调整正确表示的值。例如，如果 A 和 B 分别存储为`a`和`b`分别是`A - 64`和`B - 64`然后`A + B`将被完成`a + b + 64`（因为我们比预期多减去了 64 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:40:32.733

即使它是 128（十进制）最大值，你也不会是正确的。由于您使用 2 的补码，因此范围实际上是从 −(2 ^(N−1) ) 到 +(2 ^(N−1) − 1) ，其中 N 是位数。所以 8 位的范围是 -128 到 127（十进制）。

由于您实际上将其显示为 -64（十六进制）到 128（十六进制），因此您实际上是在查看 -100（十进制）到 296（十进制）。添加一个位可以将范围增加到 -256 到 255，最后一个添加可以使您增加到 -512 到 511。将所需的数量设为**10 位**。

现在确保您处理的不是 -64 到 128（十进制）。正如我之前指出的那样，8 位范围仅达到 127，如果您不小心，这将成为一个非常棘手的问题。那么它将是**9 位**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:37:57.577

在二进制补码中，一个 8 位寄存器的范围为 -128 到 +127。要获得上限，请用 1 填充低 7 位：01111111 是十进制的 127。要获得下限，请将最高位设置为 1，将其余位设置为 0：10000000 在二进制补码中是 -128。

这些十六进制值似乎有点奇怪（它们是*十进制*的 2 的幂），但无论如何：0x128（0x 是十六进制数字的标准前缀）是数量级中较大的数字，其二进制表示为 100101000 . 你需要能够表示符号位*之后*的那九位。因此，为了能够使用二进制补码，您至少需要十位。

# apache-flex - 不在 compc SWC 中添加任何类

> ID：12678881
> 
> 赞同：0
> 
> 时间：2012-10-01T18:27:11.460
> 
> 标签：apache-flex, ant, flex4, compc

我正在尝试使用 compc 将 AIR 库项目编译为 SWC，但它不包括我的任何库文件。这是我的 ANT 任务：

```
<!-- Compile the FCLibrary swc --> 
<target name="compileFCLibrary" > 
 <compc output="${FC_DEPLOY_DIR}" directory="true" locale="en_US" >

    <!-- FCLibrary has Air classes and requires air-config to be loaded -->
    <load-config filename="${FLEX_HOME}/frameworks/air-config.xml" /> 
    <source-path path-element="${FCLIB_SRC}"/>
    <include-sources dir="${BASE_DIR}/FClibrary/src" includes="*" />
 </compc>
</target> 
```

看起来它包含一些文件。它创建的目录如下：

```
/catalog.xml
/library.swf
/local
   /en_US
      /... (*.properties)
/spark
   /components
      /... (*.png) 
```

实际上，我不知道这些类是否不包括我的文件。catalog.xml 提到了它们。

我在基于此编译的项目中遇到的错误是：

类型未找到或不是编译时常量：

错误：找不到类型或不是编译时常量：LoadFile。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:47:41.467

解决了。问题有两个方面。

1.  ANT 中引用的库名称拼写错误。当实际文件为 FCLibrary.swc 时，它被引用为 FCLibrary.swc
2.  mxmlc 不包括该库并且静默失败（应该引发错误）。

没用：

```
<include-libraries file="FClibrary.swc" /> 
```

工作过：

```
<include-libraries file="FCLibrary.swc" /> 
```

# python - py2exe 跳过一些 py 文件

> ID：12678891
> 
> 赞同：0
> 
> 时间：2012-10-01T18:28:25.680
> 
> 标签：python, py2exe

所以，

我有一个遗留的 python 系统，它有一些 py2exe (0.6.9) 遇到问题的奇怪之处。

具体来说，项目中的一些py文件以非标准方式包含，以自动检测要编译和包含的文件错过了它们，导致可执行文件无法运行。

过去，我们使用了一个“ForcedImport.py”文件，其中手动包含了所有已知文件，然后该文件被用于构建可执行文件的任何东西引用，但这一直是一种非常笨重和脆弱的方法让它们进入最终构建。

所以我的问题是，有没有很好的正确方法来做到这一点？某种方式告诉 py2exec '是的，我希望你在构建中包含这些 py 文件'？我试图查看文档，但尽管我不想承认，但我并没有关注很多。

感谢您提供任何可以回传的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:06:15.070

如果您将所有模块都放在一个包中，您只需将该包添加到您的 setup.py

```
options = {
    "py2exe":{
                    "packages": ["yourpackage"],
            }
} 
```

# jquery - 从 SWF 上传按钮中删除虚线轮廓

> ID：12678892
> 
> 赞同：1
> 
> 时间：2012-10-01T18:28:25.947
> 
> 标签：jquery, css, firefox, uploadify, outline

我在从我的 Uploadify SWF 按钮中删除虚线焦点轮廓/边框时遇到了很大的麻烦，在 Firefox 中显示。

![在此处输入图像描述](../Images/e2046c00db741ee2835eccc92d8c52b6.png)

我尝试将 uploadify 对象和按钮 CSS 设置为：

```
:focus { outline:none; }
::moz-focus-inner { border:none; } 
```

我还尝试使用 Uploadify 的回调函数关注另一个元素，`onDialogOpen`但仍然没有。

如何摆脱这个烦人的大纲？

* * *

**我的上传 CSS：**

```
.uploadify {
    position:relative; margin-top:10px; outline:none;
}
.uploadify-button {
    color:#0CF; font-size:12px; text-align: center; border-top:solid 1px #CCC; border-left:solid 1px #CCC;
    border-right:solid 1px #CCC; margin-bottom:0 !important; outline:none;
}
.uploadify:hover .uploadify-button {
    text-decoration:underline;
}
.uploadify-button.disabled {
    background-color:#D0D0D0; color:#808080;
} 
```

**我的上传 JS：**

```
$('#file_upload').uploadify({
    'buttonText'        :   'Select Files',
    'width'             :   90,
    'removeCompleted'   :   false,
    'fileSizeLimit'     :   '5MB',
    'formData'          :   {'article_id': <? echo $article_id ?>, 'admin_id': '<? echo $_SESSION['admin_id'] ?>', 'referrer': 'Blog Setup'},
    'swf'               :   'uploadify/uploadify.swf',
    'uploader'          :   'uploadify/uploadify.php',
    'onUploadStart'     :   function() {
        $('#photos_option_loading').show();
    },
    'onQueueComplete'   :   function() {
        $('#photos_option_loading').hide();
    },
    'onUploadError'     :   function(file, errorCode, errorMsg, errorString) {
        alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
    }
}); 
```

**我的上传 HTML：**

```
<input type="file" name="file_upload" id="file_upload"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:30:37.927

这是存在于浏览器级别的功能。您对此无能为力。

# php - Applescript 可以发送 get 或 post 请求吗？

> ID：12678900
> 
> 赞同：7
> 
> 时间：2012-10-01T18:29:12.127
> 
> 标签：php, macos, get, applescript

我使用 Hazel 在我的 Mac 上组织下载的文件。我看到我可以让它在每次触发规则时运行 applescripts。

我想知道是否可以让它发送类似的东西：

[http://my.server.com?type=Show&name=Big+Bang+Theory](http://my.server.com?type=Show&name=Big+Bang+Theory)

然后我可以创建一个记录所有下载的小页面。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T18:45:34.120

当然，命令行实用程序 curl 是一种方法。Applescripts 可以通过“do shell script”命令使用命令行实用程序。所以试试这个...

```
set theURL to "http://my.server.com?type=Show&name=Big+Bang+Theory"
do shell script "curl " & quoted form of theURL 
```

以上将页面结果返回给applescript。也许您宁愿在默认浏览器中打开链接...

```
set theURL to "http://my.server.com?type=Show&name=Big+Bang+Theory"
open location theURL 
```

所以选择吧！

# ruby-on-rails - Ruby on Rails - 在 f.label 上完成 500 内部错误

> ID：12678902
> 
> 赞同：2
> 
> 时间：2012-10-01T18:29:25.027
> 
> 标签：ruby-on-rails, ruby, forms, ruby-on-rails-3.2, labels

**编辑**

**这是 GitHub 上的项目：[https ://github.com/lionelrudaz/myteam2](https://github.com/lionelrudaz/myteam2)**

* * *

我正在使用 Railsapp 上的模板（Twitter Bootstrap、Devise 和 CanCan）在 Ruby on Rails 中制作我的第一个应用程序。

我还采取了必要的步骤将我的应用程序发布到 Heroku。

到目前为止一切都很好，在 Heroku 上的第一次发布还不错，直到我在 MacBook Pro 上重新启动服务器。

现在，我总是会看到默认错误页面，其中显示“我们很抱歉，但出了点问题”。

在终端中，我得到：

```
=> Booting Thin
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop

Started GET "/" for 127.0.0.1 at 2012-10-01 19:19:21 +0200
Processing by HomeController#index as HTML
     User Load (0.3ms)  SELECT "users".* FROM "users" 
     Club Load (0.2ms)  SELECT "clubs".* FROM "clubs" ORDER BY "clubs"."id" DESC LIMIT 1
Rendered home/index.html.erb within layouts/application (23.2ms)
Completed 500 Internal Server Error in 190ms 
```

由于我不知道如何禁用错误页面以获取真正的堆栈跟踪，因此我开始逐行删除代码行以查找哪一行不起作用。实际上，看起来 f.label 指令不再起作用了。我知道他们做到了，我已经使用我的应用程序很长时间了。

这是我的 home_controller.rb 文件

```
class HomeController < ApplicationController
  def index
    @users = User.all
    @club = Club.last
  end
end 
```

index.html.erb

```
<h3>Home</h3>

<%= debug @club %>

<%= form_for @club do |f| %>

  <div class="control-group">
    <%= RUBY_VERSION %>
    <%= Rails.version %>
    <%= f.label :name, :name %>
    <%= f.text_field :name %>
  </div>

 <% end %>

 <% @users.each do |user| %>
    <p>User: <%=link_to user.name, user %></p>
 <% end %> 
```

当我更改时触发错误

```
 <%= f.label :name, :name %> 
```

至

```
 <%= f.label :name %> 
```

我在 Heroku 上更新了我的应用程序，因此您可以检查调试： http: [//myteam2.herokuapp.com/](http://myteam2.herokuapp.com/)

我不知道出了什么问题，它是如此基础，以至于我觉得自己很愚蠢。

当我调查时，我注意到 f.label 的第二个参数必须是一个字符串。不可能使用 t() 方法从 i18n 文件更改电子邮件的文本。

我无法继续我的申请，感到非常沮丧。我的谷歌研究没有成功。

如果您需要更多信息，请与我们联系。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:10:19.330

Lionel，当您使用开发环境在本地运行项目时，您应该会看到一条错误消息。

我克隆了您的项目，经过一些设置后，我运行`rails s`以使用默认开发环境启动项目。主页加载正常，但单击“登录”转到 /users/sign_in 显示以下错误：

# 错误：

[http://www.evernote.com/shard/s157/sh/078d0a12-73b1-4eb7-9430-55b916f19ef7/12c0cbb7b7254e5c02bb7ff0f0c4aa3f](http://www.evernote.com/shard/s157/sh/078d0a12-73b1-4eb7-9430-55b916f19ef7/12c0cbb7b7254e5c02bb7ff0f0c4aa3f)

该错误表明 config/locales/users.en.yml 中存在问题，需要一个 Hash，但没有返回任何内容。

目前 config/locales/users.en.yml 是一个空白文件。

# 使固定：

您可以删除该文件。如果您从不打算使用它，请执行此操作。

或者

添加内容，以便解析文件以哈希的形式返回数据。只需添加`en:`到 config/locales/users.en.yml 的顶部。如果您计划将来输入翻译数据，请执行此操作。

# 其他：

您似乎正在 Heroku 上开发您的应用程序。根据我的经验，这将是困难的。在本地开发添加功能和修复错误要容易得多。然后在您的应用程序处于稳定状态后部署到 Heroku。您甚至可以在 Heroku 上设置一个单独的临时服务器，以便在部署到生产服务器之前测试您的更改。

您可以使用 heroku gem`heroku logs --tail`来监控应用程序的输出。如果您没有使用它，它可能有助于解决您的问题。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:48:17.493

您在使用带有和不带有表单构建器的标签时感到困惑。

当您使用`label`inside of 时`form_tag`，它需要两个参数：第一个是将标签连接到相应文本字段所需的参数名称，第二个是实际标签文本。

但是，当您使用 时`form_for @whatever do |f|`，标签的第一个参数是自动知道的，因为您这样做`f.label :name`了，并且 f 知道名称是什么，`f.text_field`将生成什么，并为您完成所有的麻烦事。

这在 Rails 文档中通常不清楚，但作为一项规则，当您从关联模型中使用`form_for`.

# javascript - jQuery .toggle 问题

> ID：12678905
> 
> 赞同：2
> 
> 时间：2012-10-01T18:29:30.253
> 
> 标签：javascript, jquery-animate, nav, jquery

我的第一个问题在这里，所以我会尽量简洁。

我有一系列`nav`元素，其中一些有`nav`子元素。我的基本结构是：

```
 <nav role="navigation" class="primary-nav main-nav">
        <ul>
            <li><a href="index.php">home</a></li>
            <li class="about-item"><a href="#">about</a></li>
            <li class="study-item"><a href="#">study</a></li>
            <li class="apply-item"><a href="#">apply</a></li>
            <li><a href="people.php">people</a></li>
            <li><a href="shows.php">shows</a></li>
            <li><a href="contact.php">contact</a></li>
        </ul>
    </nav>

    <!-- secondary navs -->
    <!-- about -->
    <nav role="navigation" class="sec-nav sec-nav-about">
        <ul>
            <li><a href="history.php">history</a></li>
            <li><a href="facility.php">facility</a></li>
            <li><a href="alumni.php">alumni</a></li>
            <li><a href="friends.php">friends</a></li>
            <li><a href="patrons.php">patrons</a></li>
            <li><a href="singers.php">singers</a></li>
        </ul>
    </nav>

    <!-- study -->
    <nav role="navigation" class="sec-nav sec-nav-study">
        <ul>
            <li><a href="foundation.php">foundation</a></li>
            <li class="study-undergrad-item"><a href="#">undergrad</a></li>
            <li class="study-postgrad-item"><a href="#">postgrad</a></li>
            <li><a href="parttime.php">part time</a></li>
            <li><a href="exams.php">exams</a></li>
            <li><a href="saturdayschool.php">saturday school</a></li>
            <li><a href="sundayschool.php">sunday school</a></li>
            <li><a href="summerschool.php">summer school</a></li>
        </ul>
    </nav>
<!-- apply -->
<nav role="navigation" class="sec-nav sec-nav-apply">
    <ul>
        <li><a href="loans.php">loans</a></li>
        <li><a href="auditions.php">auditions</a></li>
        <li><a href="fees.php">fees</a></li>
        <li><a href="exams.php">exams</a></li>
        <li><a href="saturdayschool.php">saturday school</a></li>
        <li><a href="sundayschool.php">sunday school</a></li>
        <li><a href="summerschool.php">summer school</a></li>
    </ul>
</nav> 
```

（我知道这些列表可以——也应该——嵌套，但这是我继承的代码，而不是我自己编写的代码，我不想与样式中可能存在的任何其他内容混在一起）。

所以 - 我想要的是当点击第 3、4 和第 5 个主导航项目时，它们相应的子菜单使用左边距进行动画处理。

我目前正在使用 jQuery`.toggle()`来尝试实现这种效果。这是我的 jQuery：

```
$(document).ready(function(){
  $('.main-nav .about-item a').toggle (
    function(){
      $('.sec-nav-about').animate({marginLeft: "480"}, 500);
    },
    function(){
      $('.sec-nav-about').animate({marginLeft: "-250"}, 500);
    });

  $('.main-nav .study-item a').toggle (
    function(){
      $('.sec-nav-study').animate({marginLeft: "480"}, 500);
    },
    function(){
      $('.sec-nav-study').animate({marginLeft: "-250"}, 500);
    });
  $('.main-nav .apply-item a').toggle (
    function(){
      $('.sec-nav-apply').animate({marginLeft: "480"}, 500);
    },
    function(){
      $('.sec-nav-apply').animate({marginLeft: "-250"}, 500);
    });
  }); 
```

到此为止，还好。但是，我无法超越这一点。我不知道如何重新编写代码以实现以下目标：

1）当每个主菜单项被点击时，如果它有一个子菜单并且如果它还没有显示，那么子菜单就会动画出来（这工作正常）。

2）如果一个子菜单已经显示，那么当它的主菜单项被点击时，子菜单会重新进入动画直到它不显示（这也是有效的）。

3) 如果一个子菜单正在显示并单击*另一个*子菜单项，则第一个子菜单将重新进入动画，直到它不显示*并且*新的子菜单动画出来。这*不起作用*。

我试图`.active`像这样向每个子菜单添加/删除一个类（这里只有一个用于说明目的，但所有三个子菜单都适用于它们）：

```
$('.main-nav .about-item a').toggle (
  function(){
    $('.active').animate({marginLeft: "-250"}, 500).removeClass('active');
    $('.sec-nav-about').animate({marginLeft: "480"}, 500).addClass('active');
  },
  function(){
    $('.sec-nav-about').animate({marginLeft: "-250"}, 500).removeClass('active');
  });
}); 
```

然后发生的事情是，它似乎可以工作，然后过了一会儿，它停止删除/添加`.active`类。我仔细检查了 Chrome 的元素检查器，可以看到它（没有）发生。我需要单击链接*两次*才能`toggle()`工作并驱动动画。

任何想法/建议/解决方案将不胜感激。

（编辑拼写错误）。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:10:47.950

Will Moore 的回答解释了为什么您当前的方法不起作用。以下应该可以解决您的问题。在 className 属性上使用正则表达式意味着我们可以将其应用于列表中的所有项目，而无需单独设置每个项目。

另外，请注意，在将`.active`类添加到当前选定的子菜单之前，我们会查询“要隐藏的子菜单”；这避免了我们一展示就隐藏它。

```
$('.main-nav li').click(function() {
    var itemType = this.className.match(/(^| )([^ ]+)-item( |$)/);
    if(itemType != null) {
        itemType = itemType[2];
    }

    $secNavItem = $('.sec-nav-' + itemType);
    $subMenusToHide = $('.active');
    if(!$secNavItem.hasClass('active')) {
        $secNavItem
            .addClass('active')
            .animate({marginLeft: "480"}, 500);
    }

    $subMenusToHide
        .animate({marginLeft: "-250"}, 500)
        .removeClass('active');
}); 
```

你可以看到它在这个小提琴中工作：http: [//jsfiddle.net/ET475/23/](http://jsfiddle.net/ET475/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:40:10.083

当您单击“研究”时，它会显示研究子菜单。然后单击“关于”，它会隐藏研究菜单（显示关于菜单）。现在您再次单击“学习”。这只是第二次单击研究按钮，因此它会与您上次单击它时相反：即当您希望它显示研究菜单时，它将隐藏研究子菜单。

这对我有用：

```
$('.main-nav .about-item a').click (function(){
    var $submenu = $('.sec-nav-about');
    // if the submenu you want isn't showing...
    if (!$submenu.hasClass('active')) {
        // if any other submenu is showing, hide it...
        if ($('.active').length > 0){
            $('.active').animate({marginLeft: "-250"}, 500, function(){
             // ...show submenu AFTER previous submenu is hidden
             $submenu.animate({marginLeft: "480"}, 500).addClass('active');
            }).removeClass('active');
        } else {
            // no submenus showing: simply display
            $submenu.animate({marginLeft: "480"}, 500).addClass('active');
        }
    }
}); 
```

# jquery - jScrollPane - 滚动条不显示

> ID：12678911
> 
> 赞同：1
> 
> 时间：2012-10-01T18:29:50.813
> 
> 标签：jquery, css, jscrollpane

我正在尝试在 CSS 类上使用 jScrollPane，但它不起作用。您可以在[此处](http://www.noahd.net/demo-upwall/approach/)查看设置。

我在标题中包含了 jScrollPane.css 和 jScrollPane.js，并使用此函数将 jScroll 应用于`.content-wrap`类。

```
jQuery(function()
{
jQuery('.content-wrap').jScrollPane({showArrows:true});
}); 
```

该脚本正在运行，但只是部分运行。我可以看到`.content-wrap`该类正在被该类修改，`jScrollPane`但滚动条没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:22:39.383

经过进一步调查，我发现您的 jscrollpane javascript 文件有问题。你一直在篡改它吗？我很怀疑，因为它添加了“类名”属性。

正如您在[这个 jsfiddle](http://jsfiddle.net/BVJpA/1/)中看到的那样，您的滚动条出现了。

我所做的只是将 scrollpane.js 和 css 的源更改为官方源，滚动条开始工作。

# c# - 当我尝试监视网络共享中的文件夹时，为什么 System.IO.FileSystemWatcher 会使我的服务崩溃？

> ID：12678915
> 
> 赞同：0
> 
> 时间：2012-10-01T18:30:14.213
> 
> 标签：c#, .net, service, filesystemwatcher

> **可能重复：**
> [FileSystemWatcher 无法访问网络驱动器](https://stackoverflow.com/questions/960318/filesystemwatcher-fails-to-access-network-drive)

我编写了一个服务来监视网络共享中的文件夹 ( `\\\\machinename\abc\`)，每次添加新文件时，它都会对该文件执行一些操作。

当我从测试工具运行它时，代码本身运行良好，但是当我将它作为服务运行时，我得到一个`System.IO.FileNotFoundException`新文件添加到网络文件夹的那一刻，并且服务崩溃了。

该服务以用户身份运行，使用我的用户名和密码，所以我不知道发生了什么，特别是考虑到当我从 VS 内的测试工具运行代码时没有这个问题。

******编辑******只是想补充一点，我解决了这个问题。关键是在尝试处理文件之前确保文件是可读的（即：在循环内编写 try-catch 语句并尝试获取文件的 FileStream 对象）。另外值得注意的是，由于某种奇怪的原因，当我从测试工具运行服务时，这不是问题。无论如何，我很高兴问题解决了！

# python - 为 Visual Studio 2012 (PTVS) 安装 Python 工具

> ID：12678916
> 
> 赞同：4
> 
> 时间：2012-10-01T18:30:20.473
> 
> 标签：python, visual-studio, ptvs

几周前我安装了 VS 2010 的版本，它运行良好。我对 VS 2012 的版本没有这么好的运气。我做错了什么？我依次运行了来自 Microsoft 的两个安装程序，“vs_isoshell.exe”、“vs_intshelladditional.exe”，然后是“PTVS 1.5RC VS 2012.msi”。VS Shell 2012 出现了，Python 支持似乎出现了。我使用向导创建了一个新的 Python 项目。当我点击调试它时它不会运行。此外，VS Shell 也无法正确显示窗口底部。VS 2010 Shell 和 PTVS 仍然可以完美运行。

安装2012版本的步骤是什么？

编辑：我看到安装 2010 版本的说明说要先卸载以前的版本。我不愿意卸载 2010 版本。如果我卸载 PTVS 并运行 PTVS 1.5RC VS 2012.msi，PTVS 是否仍然可以在 VS 2010 Shell 中运行？

[隔离壳](https://www.microsoft.com/en-us/download/details.aspx?id=30670)

[一体式外壳](https://www.microsoft.com/en-us/download/details.aspx?id=30663)

[PTVS](http://pytools.codeplex.com/)

![在此处输入图像描述](../Images/3b462db71a576bfabd3e5d10f5ab668b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:15:07.410

VS 集成 shell 和调试 64 位应用程序存在问题。这可能是你遇到的。1.5 RTM 包含该问题的解决方法。

# mysql - 忽略查询中的mysql全文停用词

> ID：12678920
> 
> 赞同：14
> 
> 时间：2012-10-01T18:30:29.470
> 
> 标签：mysql, full-text-search, stop-words

我正在构建一个使用全文搜索的网站搜索。搜索本身效果很好，那不是我的问题。我将用户提供的关键字（匹配...反对...）与 AND 串在一起，以便多个词进一步缩小结果。现在，我知道某些停用词没有被索引，这对我来说很好，我真的不想将它们用作选择标准。但是，如果（由用户）在关键字集中提供了一个停用词，即使该词实际上在某个文本块中，它也会杀死所有结果（如预期的那样）。

我的问题：有没有办法在查询时检查某个单词是否是停用词？我的首选解决方案只是从搜索条件中排除相关的单词（我不在乎用户是否可以通过单词'neither'来缩小结果，我只是不希望 MySQL 返回一个空的结果集，因为用户提供它，即使结果中都不存在）。或者，我是否只需要清空停用词列表？非常感谢您的帮助。

编辑----我很抱歉，但实际上没有代码片段可以提供给这个。该代码工作正常，实际上完全符合预期。这更像是我正在处理的一个逻辑问题。但作为一个例子，以解释的方式：

假设有三个记录，其中包括单词（但不限于）

1：苹果、橙子、芒果、香蕉 2：葡萄、橙子、菠萝、芒果 3：土豆、芒果、甜瓜、keira knightly

如果用户输入的搜索词是芒果，则所有结果都正确返回。如果单词是橙色 AND 芒果，则返回结果 1 和 2（正确）。现在，假设香蕉是一个停用词（它不是……但我们假设它是），如果搜索的是橙色、芒果和香蕉，则不会返回任何结果（因为香蕉不在全文索引中）。

我正在寻找的是是否有其他人遇到过这个问题，并且有办法解决它。一种：

```
if 'banana' NOT STOP WORD match 'banana' against `words`. (OBVIOUSLY not real code). 
```

或者......我是否只需要删除停用词列表......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T18:49:30.760

您可以通过比较所有停用词来验证关键字。这是 我找到的禁用全文停用词的解决方案的停用词[列表。](http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html)你只需要找到 .cnf 文件并添加这个，

```
ft_stopword_file = "" 
```

重启mysql引擎并重建索引；

希望这个作品

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T15:20:43.857

如何在 MySQL 中禁用全文停用词：

在 my.ini 文本文件 (MySQL) 中：

```
ft_stopword_file = ""   or link an empty file "empty_stopwords.txt"
ft_min_word_len = 2 
```

// 设置最小长度，但要注意较短的单词 (3,2) 会显着增加查询时间，尤其是在全文索引列字段很大的情况下。

保存文件，重启服务器。

下一步应该是使用此查询修复索引：

```
REPAIR TABLE tbl_name QUICK. 
```

但是，如果您的表使用 InnoDB 存储引擎，这将不起作用。您必须将其更改为 MyISAM ：

```
ALTER TABLE t1 ENGINE = MyISAM; 
```

所以，再一次：

```
1\. Edit my.ini file and save
2\. Restart your server (this cannot be done dynamically)
3\. Change the table engine (if needed)  ALTER TABLE tbl_name ENGINE = MyISAM;
4\. Perform repair                       REPAIR TABLE tbl_name QUICK. 
```

请注意，InnoDB 和 MyISAM 有它们的速度差异。一个读得更快，另一个写得更快（在互联网上阅读更多相关信息）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T07:46:38.680

使用此步骤在 mysql 中禁用全文搜索的停用词

1：在mysql中打开my.ini文件

2：放在 my.ini 中 [mysqld] 行之后的两行以下（在文件中搜索 [mysqld]）

```
ft_min_word_len=1
ft_stopword_file="" 
```

3：重启你的服务器

4：使用以下命令修复您的表

```
 > repair table tablename; 
```

5：现在您的搜索正在工作......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-23T03:18:12.980

对于 INNODB 情况，可以在创建索引时禁用 stop_words。

```
SET @@SESSION.innodb_ft_enable_stopword = 'OFF';

create table foo
....
fulltext (search_col) 
```

这将导致在禁用停用词的情况下创建全文索引。您可以使用以下查询进行验证。

```
SET GLOBAL innodb_ft_aux_table = 'schema/foo';
select * from information_schema.innodb_ft_config; 
```

您的结果将如下所示： [![在此处输入图像描述](../Images/5acc81da944e6309e6e4610695aa3622.png)](https://i.stack.imgur.com/xUCMV.png)

请注意，use_stopword 设置为 0。

`use_stopwords`在这个[mysql 文档页面](https://dev.mysql.com/doc/refman/5.7/en/innodb-information-schema-fulltext_index-tables.html)上搜索。[并在这里](https://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_ft_enable_stopword) 结帐`innodb_ft_enable_stopword`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-22T16:09:36.567

设置 `ft_stopword_file = ""`
对我不起作用，我使用的是 INNODB 表和 MySQL 5.6（优化关联表后，停用词仍未在全文索引中编制索引）

此解决方案有效（即使您不是超级用户）：

```
CREATE TABLE mydb.stopwordslist(value VARCHAR(20)) ENGINE = INNODB;
INSERT INTO mydb.stopwordslist(value) VALUES ('skipthisword'); 
```

对于所有用户，但您仍然需要超级用户权限：

```
SET GLOBAL innodb_ft_server_stopword_table = 'mydb/stopwordslist'; 
```

仅针对用户（假设它是重新创建索引和更新列的用户）

```
SET SESSION innodb_ft_user_stopword_table = 'mydb/stopwordslist'; 
```

因为它是一个会话变量，所以当您的会话关闭时它不会持续，所以请确保您在每个会话或优化或插入具有全文索引的表之前或更新由全文索引索引的列时设置它

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-06-16T09:55:02.580

尝试使用 MATCH...AGAINST...IN BOOLEAN MODE 像这样： WHERE MATCH(author,title) AGAINST('"origin of"' IN BOOLEAN MODE);

# android - 如何在原生android中实现一个可折叠的盒子

> ID：12678923
> 
> 赞同：0
> 
> 时间：2012-10-01T18:30:45.640
> 
> 标签：android, android-layout, android-widget

我正在为 android 编写本机代码，并想知道如何像在 jquery mobile ( [http://jquerymobile.com/demos/1.1.1/docs/content/content-collapsible.html](http://jquerymobile.com/demos/1.1.1/docs/content/content-collapsible.html) )中那样实现可折叠框的功能

在android中我可以使用列表项选择器来实现这一点吗？任何想法/指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:34:36.457

您可以在链接下方展开折叠您的文本视图可以帮助您

[http://hardiknadiyapara.blogspot.in/2012/09/exapand-collapse-android-textview.html](http://hardiknadiyapara.blogspot.in/2012/09/exapand-collapse-android-textview.html)

# ruby-on-rails - 包括使用 Rails 3.2.8 和 Mongoapper 进行身份验证

> ID：12678927
> 
> 赞同：0
> 
> 时间：2012-10-01T18:30:53.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, mongomapper

我正在使用带有 Mongoapper 驱动程序的 Rails 3.2.8 来连接到 Mongodb 2.0.7。一切都很好，现在我想在我的 Rails 应用程序中包含身份验证过程。我考虑使用 Devise，但大多数文档都支持 Mongoid。请问您知道任何适合 Mongomapper 的类似于设计的解决方案吗，如果可能的话，我现在真的不想修改为 Mongoid 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:02:01.743

您几乎可以使用此 Gist 构建自己的身份验证机制：[https ://gist.github.com/147427](https://gist.github.com/147427)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:20:10.440

has_secure_password 与 MongoMapper 配合得很好。

Ryan Bates 上有一个 Railscast：[http ://railscasts.com/episodes/270-authentication-in-rails-3-1](http://railscasts.com/episodes/270-authentication-in-rails-3-1)

# html - 为什么网站不缩小到目标分辨率

> ID：12678930
> 
> 赞同：2
> 
> 时间：2012-10-01T18:31:25.600
> 
> 标签：html, css

我最近创建了一个[个人网站](http://anirudhagohokar.host-ed.me/)。

我想设计这样，无论目标分辨率有多低，我的网站都会缩小以适应整个屏幕，而无需向下滚动。我使用`%`了值，以便它适合任何目标分辨率。

这是具有所有主要属性的网站设计。 ![网站设计说明](../Images/af9f9a63b6614f6912146a3de98a4c52.png)

我的问题是，当我将浏览器的分辨率调小时，内容不会缩小以适应屏幕。

这就是我缩小浏览器分辨率时发生的情况。 ![繁荣](../Images/c17a0d673c3866339552c9be381e312f.png) 为什么会这样？

这是css属性

```
#myPageBody
{

    padding: 3% 15% 5% 15%;
}

#myPageNav
{
    text-align: center;
    padding:0%;
    margin-bottom:2%;
    font-weight :bold;
    font-size:150%; 
}

#myPageNav span 
{

    padding-right:2%; 
}

.page
{
    position:fixed;
    width:65%;
    height:70%;
    padding:1%;
    font-size:200%;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:37:13.113

当您减小屏幕尺寸时，字体大小不会改变，因此它会像往常一样占据相同的空间并分解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:37:20.167

当您放大或缩小时，像素会根据它们提供的百分比分别增加或减少。

尝试为它们提供`max-width`、`min-width`(*像素*)`max-height`和`min-height`(*像素*) 属性。我可能错了，但这是一个很好的做法。

例如：

```
max-width:100%;
min-width:1024px; /* The least resolution to be considered */
max-height:/*desired percentage or pixels */
min-height:800px; /* The least resolution to be considered */ 
```

# ruby-on-rails - Rails：我嵌套不正确吗？

> ID：12678936
> 
> 赞同：0
> 
> 时间：2012-10-01T18:32:09.780
> 
> 标签：ruby-on-rails

嗨，我目前正在开发我的第一个项目，并尝试在登录/会话之前先构建功能。我正在尝试创建一个相册网站，其中用户有许多相册（包含许多图片），并且相册访问权限在朋友之间共享。但是，我注意到在我之后`albums#create`

`http://localhost:3000/users/18/albums/new`（这里没问题）

我被重定向到`albums#show`：

`http://localhost:3000/albums/20`（问题！！）

URL中也不应该有user_id吗？或者它没有附加到 URL 的 user_id 因为它属于多个用户？这是我的路线：

```
Pholder::Application.routes.draw do
resources :users do
  resources :albums 
end

resources :albums do
  resources :pictures
end

root :to => "users#index" 
```

这是我的模型以防万一：

用户模型

```
class User < ActiveRecord::Base

  has_secure_password
  attr_accessible :email, :name, :password, :password_confirmation
  validates_presence_of :password, :on => :create

  validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
  validates_length_of :password, :minimum => 5, :on => :create

  has_many :user_albums
  has_many :albums, :through => :user_albums
  accepts_nested_attributes_for :albums

end 
```

专辑模特

```
class Album < ActiveRecord::Base
  attr_accessible :avatar, :name, :description
  has_many :user_albums
  has_many :users, :through => :user_albums
  has_many :photos
end 
```

相片集

```
class Photo < ActiveRecord::Base
  belongs_to :album
end 
```

专辑控制器

```
class AlbumsController < ApplicationController

    def index
      @albums = Albums.all

      respond_to do |format|
        format.html
        format.json { render json: @albums }
      end
    end

    def show
      @albums = Album.all
      @album = Album.find(params[:id])
      @photo = Photo.new
    end

    def update
    end

    def edit
    end

    def create
      # @user = User.find(params[:albums][:user_id])
      # @users = User.all
      @album = Album.new(params[:album])
      # @album.user_id = @user.id
      respond_to do |format|
        if @album.save
          format.html { redirect_to @album, notice: 'Album was successfully created.' }
          format.json { render json: @album, status: :created, location: @album}
        else
          format.html { render action: "new" }
          format.json { render json: @album.errors, status: :unprocessable_entity }
        end
      end 
    end

    def new
      @user = User.find(params[:user_id])
      @album = Album.new
    end

    def destroy
    end

end 
```

如果您需要任何其他文件，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:40:32.360

该`redirect_to @album`行使您重定向到有问题的`show`操作`@album`。
将这段代码更改为类似`redirect_to users_path`的内容将使应用程序重定向到`index`操作`users_controller`等。
这取决于保存后您想要的任何行为。

阅读本文也应该有所帮助： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# c# - System.Lazy 的这种实现有什么问题？

> ID：12678937
> 
> 赞同：1
> 
> 时间：2012-10-01T18:32:23.317
> 
> 标签：c#, .net, .net-3.5, outlook-addin

这是一个很好的类，它实现了 .Net 4.0 的 System.Lazy 的一个子集。它已经运行了很长一段时间，但是今天发生了一些奇怪的事情。下面的 InvalidOperationException 是在调用堆栈（或任何其他线程）中找不到 Lazy.Value.get 的情况下引发的，除了引发异常的帧。

```
public class Lazy<T>
{
    readonly object _locker = new object();
    Func<T> _func;
    T _value;
    bool _busy;
    public Lazy(Func<T> func)
    {
        if (ReferenceEquals(func, null))
            throw new ArgumentNullException("func");
        _func = func;
    }
    public bool IsValueCreated { get { return _func == null; } }
    public T Value
    {
        get
        {
            if (_func != null)
                lock (_locker)
                    if (_busy)
                        throw new InvalidOperationException("Function evaluation recursed back into Value.get on the same thread.");
                    else if (_func != null)
                    {
                        _busy = true;
                        try
                        {
                            _value = _func();
                            _func = null;
                        }
                        finally { _busy = false; }
                    }
            return _value;
        }
    }
} 
```

这怎么可能发生？有什么办法`finally{}`可以跳过该块？`_busy=true`从未命中断点；有什么办法`_busy`可以默认为`true`？

这发生在使用 Addin Express 集成 Office 2007 的过程中，是否存在一些不安全的库与 Lazy 的位相混淆，或者可能是 .Net 框架版本兼容性问题（这是针对 3.5 构建的）？

# asp.net-mvc - ASP.NET MVC - ValidateAntiForgeryToken 过期

> ID：12678938
> 
> 赞同：14
> 
> 时间：2012-10-01T18:32:31.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, security, csrf, antiforgerytoken

在网页中，我们提供了一个超链接 (GET)，用户可以单击该超链接进行身份验证：

```
@Html.ActionLink("Please Login", "MyMethod", "MyController") 
```

这映射到以下返回视图的控制器方法：

```
 [RequireHttps]
    public ActionResult MyMethod()
    {
        return this.View(new MyModel());
    } 
```

此视图包含用户提供其凭据的表单；表单包含所需的 AntiForgeryToken。

当用户提交表单时，会调用以下 Controller 方法：

```
 [HttpPost]
    [RequireHttps]
    [ValidateAntiForgeryToken]
    public ActionResult MyMethod(MyModel model)
    {
        // my logic
    } 
```

这工作得很好，大多数时候......

但是，如果用户让他们的浏览器在“相当长的”时间内保持打开状态，然后快速连续执行以下步骤：

1.  单击超链接 (GET) 以加载登录表单
2.  填写表格并提交

他们收到一个异常通知，通知他们 Anti-Forgery 令牌未提供或无效。

我不明白为什么会这样：视图（包含表单）是在浏览器休眠后创建的，因此防伪令牌应该都是“新鲜的”。但是，这种设计显然有问题，但我不确定如何最好地纠正它。

如果您有任何建议，请提前致谢。

格里夫

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T18:34:39.370

我正在处理同样的问题，虽然我理解这个问题，但我不确定最佳解决方案。

Anti-ForgeryToken 进程将输入值放置在表单中，第二个值存储在 cookie RequestVerificationToken 中。这两个都提交到服务器，如果它们不匹配，则会引发错误。

RequestVerficationToken cookie 的过期值设置为 Session。因此，当用户让浏览器在页面上长时间打开然后提交时，cookie 的时间戳会与服务器上的会话超时值（默认为 20 分钟左右）进行比较，如果超过，则会将其删除因此令牌验证失败。

可能的解决方案，所有这些都有潜在的问题；

1.  在页面上放置一个 javascript 计时器并以小于会话超时的某个值刷新。
2.  在服务器上捕获 System.Web.Mvc.HttpAntiForgeryException - 并重定向到同一页面。
3.  增加会话超时
4.  更改防伪令牌的过期时间

# html - 在 SQL Server/Access 前端中查询一个 HTML 段落字段的第一句

> ID：12678940
> 
> 赞同：0
> 
> 时间：2012-10-01T18:32:40.207
> 
> 标签：html, sql, sql-server

我一直在尝试查找如何仅在 SQL Server 的字段（HTML 代码）中查询段落的第一句，但我无法找到方法。我找到了使用 MySQL 的解决方案，`SUBSTRING_INDEX`并且我还找到了返回一定数量的单词/字符但不使用特定分隔符的解决方案。

我的字段存储为 HTML，示例如下：

```
<html><body>Enter the following page information.<br><br>
<b>Display #:</b> 1 [Automatically Populated]<br>
<b>Start Page: </b> 1 [Automatically Populated]<br>
<b>DCI Name:</b>  DEMOG<br>
<b>Clinical Planned Event:</b>  BASELINE1<br>
<font color="#0070C0">TAKE A SCREENSHOT</font>.<br>
</body></html> 
```

在这个例子中，我希望只返回/查询“输入以下页面信息”而不是段落的其余部分。我假设 HTML 中断可能是最好的分隔符，因为某些句子可能以冒号结尾。

先感谢您！我希望我能很好地解释这个场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:08:59.783

我意识到这很丑陋，但假设第一个`<br>`是行尾，这应该在 SQL Server 后端工作：

```
DECLARE @x nvarchar(200)
SET @x = '<html><body>Enter the following page information.<br><br><b>Display #:</b>'

SELECT substring(@x,

    (charindex('<br>', lower(@x)) - 1) - 
        (charindex('>', REVERSE(LEFT(@x, charindex('<br>', lower(@x)) - 1))))+2,

    charindex('>', REVERSE(LEFT(@x, charindex('<br>', lower(@x)) - 1))) - 1

) 
```

基本上，我们在第一个之前的字符串中找到*最后一个*实例，然后在末尾找到 ，并将两者之间的差作为长度。`>``<br>``<br>`

这绝对可以在函数中写得更干净，但我选择使用纯 T-SQL 以避免使用函数。

最后一点：您可能不需要这些`lower`功能；我的测试数据库区分大小写，因此需要使大小写一致。

# c++ - c++ 中的 &(*a) 操作是否违反直觉？

> ID：12678944
> 
> 赞同：3
> 
> 时间：2012-10-01T18:32:55.470
> 
> 标签：c++

在这段代码中：

```
 int* a;
  int* b;
  int c;
  int* d;
  a=new int(5);
  b=&(*a);
  c=*a;
  d=&c;
  cout<<"*a = "<<*a<<endl;
  cout<<"a = "<<a<<endl;
  cout<<"b ="<<b<<endl;
  cout<<"d = "<<d<<endl; 
```

我得到：

```
*a = 5
 a = 0x83a2008
 b =0x83a2008
 d = 0xbfbfe540 
```

为什么d与b不同？他们不是 &(*a) 吗？我怎样才能用一行得到 d 结果？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T18:37:12.757

`a`指向一个动态分配的位置，保存值 5。当你这样做时`c = *a;`，你将*值*5 从那个动态分配的位置复制到`c`. 然后，您将获取地址`c`并将其分配给`d`（并打印出来）。

当你结束时是这样的：

![在此处输入图像描述](../Images/5262fcefdb1484f30d23b5aedaf74b0e.png)

实线表示指向位置的指针。虚线表示数据的移动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T18:36:50.543

`c`是它自己的`int`而不是一个`int*`. 当您说 时`c = *a`，您实际上是将指向的值分配`a`给一个单独的整数，该整数在内存中具有自己的空间（即使这`int`不是`int*`，它仍然必须存在于内存中的某个位置）。

因此，当您说 时`d = &c`，您得到的是 的地址`c`，而不是 的值`a`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:36:31.913

后

```
d = &c; 
```

`d`指向 指定的存储位置`c`，而不是 指向的存储位置`a`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T18:37:04.287

d 是 c 的地址，c 是本地堆栈变量。b 是您在堆上分配的整数的地址，并将地址存储在 a 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T18:37:20.980

`c`是整数的新实例，这就是为什么`d`不等于`a`也不`b`。因此，当您尝试获取存储在其中的值的地址时，`a`您会得到准确的地址`a`。但是，当您首先分配 to 的值，`a`然后`c`打印您的地址时，`c`您得到的地址与`a`. 在 C++ 中，您操作的是真实对象，而不是 Java 或 C# 中的引用。当您为变量赋值时，您会复制存储在此变量中的每个文件，但要小心 - 默认情况下，`=`操作员不会进行深度克隆。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T18:42:27.543

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T18:37:18.717

我不知道其中的所有规则和微妙之处，但编译器能够简化`&(*a)`为`a`. 因此，您正在初始化`b`以指向与`a`( `b = a`) 相同的整数。然后，您将按值将整数复制到`c`. 然后你正在初始化`d`指向`c`。所以`a`and`b`指向同一个整数，但`d`指向别的东西。

# html - 如何 iframe craigslist.org

> ID：12678946
> 
> 赞同：0
> 
> 时间：2012-10-01T18:32:56.347
> 
> 标签：html, internet-explorer, iframe

有人可以解释为什么 iframe 在 Firefox 中有效，但在 Internet Explorer 中无效。我试图 iframe www.craigslist.org 没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:36:10.030

为什么不使用`<div>`然后将innerHTML 设置为craiglist.org 的内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:02:15.133

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
 <html> 
   <head> <title>Craigslist Frame</title> 
    <base href="http://craiglist.org" />
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> 
   <div>
     <?php
        $url = "http://www.craiglist.org/";
    $string= file_get_contents($url);
    echo $string;
     ?>
   </div>

  </body> 
 </html> 
```

试试这个:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:43:48.713

检查站点返回的标头，您会看到该站点只是拒绝在其他站点上的 IFrame 内呈现。您使用的 Firefox 版本可能不支持标头，或者更可能是站点的标头格式错误地使其被 Firefox 忽略。

```
 X-Frame-Options: Allow-From https://forums.craigslist.org 
```

信息 - [X-Frame-Options](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

# android - Android - 以编程方式设置布局背景

> ID：12678949
> 
> 赞同：9
> 
> 时间：2012-10-01T18:33:16.577
> 
> 标签：android, eclipse, android-layout, android-relativelayout

我注意到，*RelativeLayout对象的**setBackground*方法针对 API 16（Android 4.1）及更高版本，但我的应用程序具有目标 API 8，我无法使用它。

 *是否有任何替代解决方案可以解决此问题（除了使用*TargetApi* (16) 标记类/方法或更改清单中的目标 API）？
谢谢！

**编辑**：Eclipse 是错误的，它向我显示了*setBackgroundDrawable*的相同错误，但现在它似乎可以工作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-01T18:37:54.830

使用以下之一：

*   [`.setBackgroundColor(int)`](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)（如果您将其设置为颜色）
*   [`.setBackgroundDrawable(Drawable)`](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)（如果您将其设置为一种`Drawable`类型；这已被弃用，并被替换为[`.setBackground(Drawable)`](http://developer.android.com/reference/android/view/View.html#setBackground%28android.graphics.drawable.Drawable%29)）
*   [`.setBackgroundResource(int)`](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)（用于设置资源`R.java`）

如果您使用第二个，请确保对您的 API 版本进行条件检查：

```
if (Build.VERSION.SDK_INT >= 16)
    view.setBackground(...);
else
    view.setBackgroundDrawable(...); 
```

...并用 and 标记`@TargetApi(16)`它`@SuppressWarnings("deprecation")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:38:02.430

这取决于。如果要将颜色设置为背景，请使用[`setBackgroundColor()`](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29). 对于 Drawable，您可以对[`setBackgroundDrawable()`](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)16 以下的 API 和[`setBackground()`](http://developer.android.com/reference/android/view/View.html#setBackground%28android.graphics.drawable.Drawable%29)API 16 设备使用现已弃用的方法。您还可以[`setBackgroundResource()`](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)用于将资源设置为背景。

请注意，虽然许多方法被标记为已弃用，但我还没有遇到一个实际上已被删除的方法。因此，即使在 API 16 中您也可以使用已弃用的方法，但我建议您将目标 API 设置为 16 并使用 if else 在方法之间切换，具体取决于设备运行的 API 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:37:37.330

请改用[setBackgroundDrawable()](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)。它做同样的事情，但自从新`setBackground()`方法以来它已被弃用。*

# c# - Excel 模板批量打印 C# Windows 应用程序

> ID：12678954
> 
> 赞同：0
> 
> 时间：2012-10-01T18:33:44.650
> 
> 标签：c#, windows, excel, printing

我一直在用 C# 开发一个 Windows 应用程序。我的要求是打印一个预定义的 Excel 模板，其中包含给定订单号的数据库值。意味着，我必须从数据库（SQL Server）中检索数据并用数据库值替换预定义的单元格值（文本）（在 excel 模板中）。例如 -

在 Excel 单元格值中，“SENDER_NAME”将替换为“FEDEX”，“OrderNo”将替换为“1212”等等。我正在使用以下代码来做到这一点。

```
object missingValue = Type.Missing;

xlWorkBook = xlApp.Workbooks.Open(path, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

xlWorkSheet.Cells.Replace("SENDER_NAME", "FEDEX", missingValue, missingValue, missingValue, missingValue, missingValue, missingValue); 
```

我的问题是 - 当 excel 中给定单元格文本的数据库中不存在某些值时，它会被空白值替换，因此在打印时会留下空白。我必须减少那些空白？

我只是想要，那个空白区域不应该在打印中可见。问题是空单元格打印为空白空间，因此例如 AddressLine2 不在 Db 中。那么它将如下所示。

```
AddressLine1
EMPTYCELL
AddressLin3 
```

我想要像这样的输出

```
AddressLine1
AddressLine3 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:15:22.707

您可以在 SQL 语句中使用 ISNULL（表达式或列，替换值）来删除电子表格中的 NULL 值。替换值将是''。请参阅[http://msdn.microsoft.com/en-us/library/ms184325.aspx](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

编辑答案：

然后我建议你在 SQL 中构建一个分隔字符串并在 Excel 中打开它。不要使用逗号作为分隔符 - 使用分号或制表符，如下例所示：

分号分隔

```
SELECT 
CompanyName + ';' + 
Address1 + ';' + 
ISNULL(address2 + ';', '')+
State AS out_string  FROM customers 
```

制表符分隔

```
SELECT 
CompanyName + char(9) + 
Address1 + char(9) + 
ISNULL(address2 + char(9), '') +
State AS out_string  FROM customers 
```

通过在 ISNULL 函数调用中连接分隔符，您将在遇到空值时防止背靠背分隔符。在允许 NULL 值的所有列上使用 ISNULL 代码。

# ruby-on-rails - 文件上传在 Ruby on Rails 3 中使用 Multipart Form 不起作用

> ID：12678962
> 
> 赞同：0
> 
> 时间：2012-10-01T18:34:33.253
> 
> 标签：ruby-on-rails, ruby, file-upload, ruby-on-rails-3.2

我有一个非常简单的上传文件配置。我只是想将带有描述的图像上传到数据库（我知道，我知道......）。就是这样。

这是我的模型的样子（我从[这里](http://railsforum.com/viewtopic.php?id=4642)学到的）。基本上，这正是示例的设置方式，只是使用`attr_protected`Rails 3.2 的行：

```
Photo < ActiveRecord::Base
  # note: there is also a :description attribute!!
  attr_protected :file_name, :content_type, :binary_data
  def image_file=(input_data)
    self.file_name input_data.original_filename
    self.content_type = input_data.content_type.chomp
    self.binary_data = input_data.read
  end
end 
```

这是我非常简单的视图：

```
<h1>New Photo</h1>

<%= form_for(@photo) do |f| %>

  <fieldset>
    <legend>Upload a Photo</legend>

    <div class="control-group">
      <label class="control-label">Photo</label>
      <div class="controls">
        <%= f.file_field :image_file %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :description, class: "control-label" %>
      <div class="controls">
        <%= f.text_field :description, class: "text_field" %>
      </div>
    </div>

    <div class="form-actions">
      <%= f.submit "Upload", class: "btn btn-primary" %>
      <%= link_to "Cancel", photos_path, class: "btn" %>
    </div>
  </fieldset>

<% end %> 
```

最后（仅出于完整性考虑），这是我的 Create 操作（简单的脚手架）：

```
def create
  @photo = Photo.new(params[:photo])

  respond_to do |format|
    if @photo.save
      format.html { redirect_to @photo, notice: 'Photo was successfully created.' }
      format.json { render json: @photo, status: :created, location: @photo }
    else
      format.html { render action: "new" }
      format.json { render json: @photo.errors, status: :unprocessable_entity }
    end
  end
end 
```

这个想法是用户将选择一个文件并键入一个小的描述，该描述应该发布到`/photos`控制器上的“创建”方法。不幸的是，当我单击提交按钮时，我得到一个非常模糊的错误，它没有给我关于真正问题的信息：

```
ArgumentError in PhotosController#create

wrong number of arguments (1 for 0)
Rails.root: /Users/me/dev/photo-app

Application Trace | Framework Trace | Full Trace
app/models/photo.rb:4:in `image_file='
app/controllers/photos_controller.rb:43:in `new'
app/controllers/photos_controller.rb:43:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"qSjMHgjCDo2ORmTvnujrljfPCj6oekLI9KAz4x5gA7Q=",
 "photo"=>{"image_file"=>#<ActionDispatch::Http::UploadedFile:0x00000101726fd0 @original_filename="SomePic.jpg",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"photo[image_file]\"; filename=\"SomePic.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:/var/folders/kc/8hsmx29j3xn2_j_9tsw8bz6w0000gn/T/RackMultipart20121001-52387-lre7zh>>,
 "description"=>"my description"},
 "commit"=>"Upload"} 
```

我已经查看了 Google 和 StackOverflow，但似乎没有什么与我的（非常简单的）示例相匹配。任何帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:01:22.763

在这里， image_file 仅包含`ActionDispatch`对象，而不包含文件的内容和描述，如下所述：

```
"image_file" => #<ActionDispatch::Http::UploadedFile:0x00000101726fd0 original_filename="SomePic.jpg" 
```

这看起来很荒谬的上传文件的方式。无论哪种方式，您都必须通过阅读将内容写入您的上传位置`:tempfile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:31:16.550

我接受了@kiddorails 的建议并实施了[CarrierWave](https://github.com/jnicklas/carrierwave)和[Amazon Web Service](http://aws.amazon.com/)。我的项目需要上传图片，而我仅限于 Heroku。因此，我潜入并弄清楚了。事后看来，这是最好的解决方案，但当时对于我的（示例）项目应用程序来说似乎有点过分了。这对我来说很棘手（作为“非 Ruby on Rails”开发人员）。

归根结底，我会建议任何希望将图像存储到数据库中的人不要这样做，并且做与我相同的事情。学习正确的方法。:)

# php - 提高速度/响应能力 PHP 查询返回编码

> ID：12678972
> 
> 赞同：1
> 
> 时间：2012-10-01T18:35:22.103
> 
> 标签：php, json

我将以下代码作为更大的 Web 应用程序的一部分来搜索员工并返回所需的信息。查询本身几乎不需要时间来完成并返回结果集。似乎需要一些改进的是我目前如何将结果编码到一个数组中，以便 json_encode 返回到前端。我对如何改进代码没有想法（因此我在这里提出问题）。任何想法将不胜感激！

```
<?php
require_once("class.employee.php");
$employee = new Employee();
$employeeSearch = $employee->searchEmployees($_REQUEST['q']);
$employeeResults = array();
$row_array['id'] = $_REQUEST['q'];
$row_array['empName'] = $_REQUEST['q'];
$row_array['empBusinessTitle'] = '';
$row_array['empFacility'] = '';
array_push($employeeResults, $row_array);
while ($empInfo = $employeeSearch->fetchObject()) {
    $row_array['id'] = $empInfo->empUserName;
    $row_array['empName'] = ucwords($empInfo->empName);
    $row_array['empBusinessTitle'] = $empInfo->empBusinessTitle;
    $facilityName = $employee->getFacilityIDByAD($empInfo->empUserName);
    $row_array['empFacility'] = isset($facilityName->facilityName) ? $facilityName->facilityName : '';
    array_push($employeeResults, $row_array);
}
$ret['results'] = $employeeResults;
echo json_encode($ret);

Class Employee {
public function searchEmployees($query) {
    try {
        $dbh = new PDO($this->dbDSN, $this->dbUser, $this->dbPass);
        $statement = $dbh->prepare("SELECT empID, CONCAT(empFirstName,' ',empLastName) as empName, empUserName, empBusinessTitle from $this->tblEmployeePeople where CONCAT(empfirstname,' ',emplastName) LIKE CONCAT('%',:query,'%') and empUserName != ''");
        $statement->bindParam(':query', $query);
        $statement->execute();
        $dbh = null;
        return $statement;
    } catch (PDOException $e) {
        echo $e->getMessage();
    }
}

}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:40:08.430

首先，我将删除您一一分配的所有数组参数。这需要 CPU 时间来添加到阵列中。似乎你有一些复杂的循环，尽量避免分配数组和许多循环执行到一个页面中。

- - - - 更新 - - - -

试试这个更新：

```
$row_array = array(
            'id' => $REQUEST['q'],
            'empName' => $_REQUEST['q'],
            'empBusinessTitle' => '',
            'empFacility' = ''
            );

while($empInfo = $employeeSearch->fetchObject()) {
    $row_array[] = $empInfo;
}
array_push($employeeResults, $row_array); 
```

然后只需从数组 $row_array 中通过它们各自的键请求结果。正如雷在他的帖子中已经建议的那样，更新查询。他是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:40:37.343

where 子句中调用的函数会破坏您在这些字段上可能拥有的任何索引。从性能的角度来看，这是查询中最糟糕的部分。

```
CONCAT(empfirstname,' ',emplastName) LIKE CONCAT('%',:query,'%') 
```

首先，为什么需要第二个 CONCAT？就这样做

```
 CONCAT(empfirstname,' ',emplastName) LIKE '%:query%' 
```

但是，仍然会达到第一个 Concat 函数的索引破坏惩罚。另外，为什么通配符喜欢？您可能需要精确的相等性检查。

我会将传入的请求值“q”分解为名字和姓氏两部分，然后将其传递给搜索功能。

在搜索功能中试试这个：

```
 $nameArray = explode('',$query );
  $firstname = $nameArray[0];
  $lastname  = $nameArray[1]; 
```

然后将您的查询更改为：

```
 WHERE ( empfirstname LIKE ':firstname' AND emplastname = ':lastname' ) AND empUserName != '' 
```

然后使用通配符添加绑定，如下所示：

```
 $statement->bindValue(':firstname', $firstname."%");
   $statement->bindValue(':firstname', $lastname."%"); 
```

# cakephp - cakephp 2.2.2 分页搜索条件

> ID：12678975
> 
> 赞同：0
> 
> 时间：2012-10-01T18:35:35.380
> 
> 标签：cakephp, pagination, cakephp-2.0

我正在尝试在 CakePHP 2.x 中添加分页，并在表单中进行条件搜索。但是，在视图中它没有给出我的情况的下一页。这是我的代码：

控制器

```
public function result($palabraclave = null)
    {
      $this->layout = 'tempart';
          $this->paginate = array(
            'limit' => 5,
            'order' => array(
                'Articulo.created' => 'desc'),
                'conditions'=>array("titulo like ?"=>"%".$this->data['Paginas']['palabraclave']."%") 
        )
       $data = $this->paginate('Articulo');//Consulta a la base de datos
        $this->set(compact('data'));
    } 
```

* * *

如果我单击“下一步”查看搜索的下一页结果，它不会将分页条件从第 1 页传递到第 2 页。:(

看法：

```
 <div style="display: inline-block;  width:70%;" id="test">
<?php foreach ($data as $da): ?>

<br />

<article>   
<?php echo $this->Html->image('article_preview/mini_'.$da['Articulo']['imagen'], array('alt' => 'Hospital-Excel'))?>
<div style="text-align:left;">
<?php echo $this->Html->link("<h6 class='artnombre'>".$da['Articulo']['titulo']."<h6>", array('class'=>"artnombre",'action'=> 'articulo',$da['Articulo']['id']),array('escape' => false)); ?> 

</div>
<br />
<p> 
<?php echo $da['Articulo']['descripcion']; ?>               <?php echo $this->Html->link('Read more ....', array('action'=> 'articulo',$da['Articulo']['id'])); ?>  
<h5></h5>
</p>
<div class="puntoshorizontal" style="clear"></div>
</article>  
<?php endforeach; ?>

<div style="text-align:center">
<?php
// Shows the page numbers
// Shows the next and previous links
echo $this->Paginator->prev('« Back', null, null, array('class' => 'disabled')) . " |";
echo $this->Paginator->numbers(). "| "; 
echo $this->Paginator->next('Next »', null, null, array('class' => 'disabled'));
echo "<br />";
echo $this->Paginator->counter();
// prints X of Y, where X is current page and Y is number of pages

?>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T15:51:45.133

一种在每个页面上保留搜索参数的方法，您应该执行以下操作：发布数据后，在您的方法中，您有 $this->data['Paginas']['palabraClave'] 然后将其保存到会话中。因此，在随后对 /resultados/pag1,2,..n 的每次调用中，您都会从会话中获得 palabra clave 的值。

最后你会得到类似的东西：

```
public function resultados(){
    $conditions = array();

    if($this->Session->check('conditions')){
      $conditions = $this->Session->read('conditions');
    }

    if(isset($this->data)){
        $conditions = array("titulo LIKE" => "%".this->data['Paginas']'palabraclave']"%",));
    //save to the session
    $this->Session->write('conditions',$conditions);
    }
    $data = $this->painate('Articulo',$conditions);
    $this->set('data');
} 
```

这可能需要一些调整，但我认为这个想法很明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:03:53.553

在调用 paginate 方法时设置分页条件，如下所示：

```
$data = $this->paginate('Articulo', array(
    "titulo LIKE" => "%" . $this->data['Paginas']['palabraclave'] . "%",
)); 
```

而不是在分页属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T09:16:32.797

这是示例：

1：将所有 URL 参数传递给分页器函数

```
$this->Paginator->options(array('url' => $this->passedArgs)); 
```

2：常见错误：不保持条件搜索与分页

```
if($this->data){
    $this->passedArgs = array(
       'name' => $this->data[‘User’]['name']
    );
}else{
    if(isset($this->passedArgs['name'])){
         $this->data[‘User’]['name'] = $this->passedArgs['name'];
    }else{
         $this->data[‘User’]['name'] = ;
    }
} 
```

# java - 导入语句的问题

> ID：12678976
> 
> 赞同：0
> 
> 时间：2012-10-01T18:35:45.583
> 
> 标签：java, import

我创建了以下 java 文件：

```
import java.awt.*;

public class Text {
    public static void main(String[] args) {
        String str = "I AM A SENTENCE";
        String[] lines = wrap(str, 5);
        for (int i=0;i<lines.length;i++) {
            if (lines[i] != null) System.out.println(lines[i]);
        }
        Font myFont = new Font("Impact", Font.BOLD, 36);
        System.out.println(String.valueOf(charToPixel(str, myFont)));
    }
    public static String[] wrap(String str, int w) {
        char[] string = str.toCharArray();
        System.out.println("string.length: " + String.valueOf(string.length));
        int charCounter = 0;
        String[] line = new String[20];
        String work = "";
        int x = 0;
        for (int i=0;i<string.length;i++) {
            charCounter++;
            System.out.println("charCounter: " + String.valueOf(charCounter));
            System.out.println("i: " + string[i]);
            if (charCounter > w) {
                charCounter = 0;
                System.out.println(String.valueOf(x));
                line[x] = work;
                x++;
                work = "";
                i--;
            }
            else {
                work += string[i];
            }
        }
        line[x] = work;
        return line;
    }
} 
```

现在，我还创建了一个简单的小程序，我想用它来接收 String[]，然后使用 Graphics.drawString() 逐个输出它。我使用默认清单和以前的类文件创建了一个 .jar 文件。jar 中类文件的目录如下：Dennis\Text.class。我将我的 jar 添加到 CLASSPATH 中。我使用 import 语句如下：`import Dennis.*;`

但是，当我编译小程序时（顺便说一下 Text.class 已完美编译），我收到以下编译错误：

> 错误的类文件：B:\Apps\Java\JDK\lib\Text.jar(Dennis/Text.class) 类文件包含错误的类：Text 请删除或确保它出现在类路径的正确子目录中。

据我所知，我将所有内容都放在了正确的位置，并且导入语句是成功的。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:37:19.333

> jar 中类文件的目录如下：Dennis\Text.class。

不应该。它不在任何包中，所以它应该直接在 jar 文件的根目录中。理想情况下*将*它放在一个包中（不是`Dennis`，这违反了 Java 命名约定），然后使您的 jar 文件结构与包结构匹配。

# ios - iOS Facebook 3.1 API - “发布者”未显示我们的应用

> ID：12678977
> 
> 赞同：2
> 
> 时间：2012-10-01T18:35:52.950
> 
> 标签：ios, facebook, ios6

我刚刚完成了将 Facebook 3.1 API 集成到我们的应用程序中，除了原生发布 UI 之外，流程保持不变。当我在 iOS 6 设备上时，我们应用程序的墙贴现在显示“通过 iOS”，并且我们没有显示为授权应用程序。当我从 iOS 5 发布时，我们显示为授权应用程序，墙上的帖子显示我们的应用程序名称。

我假设这里的区别是在 iOS 5 上我们自己做图形请求，而在 iOS 6 中，iOS 正在为我们做这件事。有没有办法在 iOS 5 和 iOS 6 上具有相同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:11:57.707

是的，原生发布 UI (SLComposeViewController) 将始终通过 iOS 显示，因为它在幕后使用原生 iOS Facebook 连接的令牌，而不是您的令牌。我假设在前一个版本中，您编写了自己的发布视图控制器。最好坚持使用 SLRequest 类，这与旧方法几乎相同，只是令牌是通过 Accounts 框架处理的。

# vba - 从 VSTO 加载项中读取 VBA 常量？

> ID：12678978
> 
> 赞同：1
> 
> 时间：2012-10-01T18:35:54.117
> 
> 标签：vba, vsto

Excel VSTO 加载项是否可以从工作簿的 vba 代码中读取常量？例如，我有两个常量存储在我创建的所有 excel 工作簿的模块中

```
Public Const APPName As String = "test_app"
Public Const APPVersion As Double = 1.02 
```

我想做的是从我的 VSTO 加载项的 Application_WorkbookOpen 子中提取这些常量。我需要这些信息来确定用户是否应该能够打开和修改文件，并记录使用情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-12T09:25:34.930

我知道这个问题已经很老了，但仅供参考……我刚刚得到了相同的要求，并使用一个可以从 VSTO（在本例中`GetAppName`）调用的函数来解决它，该函数返回所需的值。

`string appName = (string)Application.Run(string.Format("'{0}'!GetAppName", Application.ActiveWorkbook.Name));`

# android - 双击 logcat 堆栈跟踪中的项目会打开 .class 文件（有时）

> ID：12678979
> 
> 赞同：3
> 
> 时间：2012-10-01T18:35:56.627
> 
> 标签：android, eclipse, eclipse-adt

双击 logcat 中作为堆栈跟踪一部分的行通常会打开相应的 .java 文件，并突出显示相关行。但有时，它会打开相应的 .class 文件。该文件无法编辑，因此我必须采取额外的步骤来打开 .java 文件。

有什么方法可以防止 .class 文件在 Eclipse 编辑器中打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:47:00.650

解决方案是将包含 .class 文件的文件夹标记为派生资源：右键单击每个输出文件夹（例如`bin`和`gen`），单击属性，然后选中“派生”框。

作为奖励，转到开放资源屏幕 (Ctrl+Shift+R)。找到右上角附近的黑色小三角形。单击三角形，然后取消选中“显示派生资源”。当您使用“打开资源”屏幕时，这具有隐藏 .class 文件的额外好处。

使用 ADT 20 在 Eclipse Juno 上运行良好。

**编辑**：一个相关的问题是按 F3（打开声明）并让 Eclipse 打开一个类文件。这个问题的（稍微笨拙的）解决方案是[here](https://stackoverflow.com/questions/9016748/open-declaration-in-eclipse-navigates-to-class-files-instead-of-to-source-file)。

# php - 正则表达式帮助 - 捕获值，即使它转到下一行

> ID：12678988
> 
> 赞同：2
> 
> 时间：2012-10-01T18:36:41.587
> 
> 标签：php, regex, scripting

我正在尝试为自定义警报监视文本和电子邮件警报系统捕获特定值，并且取得了一定的成功。但是，有时提供给我的引擎的数据可能有点零星，因此我当前的正则表达式系统会失败。

例如，以下是我在电子邮件中收到的内容以及可以获取的格式的示例：

**例子：**

```
CS#: A192255
Site Name: Home Alarm
Date and Time: Oct  1 2012  7:37AM                                       =
   User #: 17
User Name: User# 17                                               Event: =
CEE400 - OPEN                                               Zone: E401 - =
Caller_ID:  =0A=
=0D 
```

我曾经逐行读取文件，效果很好，但是有些项目会在同一行，这让我大吃一惊。现在我阅读了整个电子邮件文件并搜索我感兴趣的项目。

我正在使用以下 REGEX 项目来查找相关对象。有些人使用 : 分隔符，但正如您通过 EVENT 看到的那样，该值最终位于下一行，这使我的正常正则表达式变得混乱。

**正则表达式**

```
>/CS#:(.*?)A[0-9]{6}/
/Site Name:(.*?)[a-zA-Z0-9\'\"\-\_\[\]\s]{0,30}[\r\n]/
/Date and Time:(.*?)[a-zA-Z]{3}(.*?)[0-9]{1,2}(.*?)[0-9]{4}(.*?)[0-9]{1,2}:[0-9]{2}[a-zA-Z]{2}/
/CEE[0-9]{3}|CIE[0-9]{3}/ - For the EVENT: line
/Zone:(.*?)[0-9]{1,3}[a-zA-Z0-9\s\'\"\-\_\[\]\s]{0,50}+/
"/User #:(.*?)[0-9]{1,3}/ 
```

在这个特定的问题上，我让 SITE NAME 项目寻找一串字符，最多 30 个或直到它遇到换行符。这似乎有效，然后我收到了以下电子邮件，它捕获了 '=20' 字符。

**示例 2**

```
CS#: A197789
Site Name: Made up name (F/A)
111E 1st Street=20
Somewhere, AZ 99999
Date and Time: Oct  1 2012  9:14AM
Event: CEE602 - TIMER TEST
Zone: E602 -  Caller_ID: timer test
Site Phone 1: 
Site Phone 2:=20
System Description: NX 8 Caddx LF=0A=
=0D 
```

如果有人可以查看我头脑简单的正则表达式项目并帮助我找到更好的解决方案，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:57:08.487

这是上述解决方案[的 Rubular 演示](http://rubular.com/r/bnalQZlNZt)，使用您的示例：

```
\s*([^:]+?)\s*:\s*(.*(?:\s*(?!.*:).*)*)\s* 
```

**编辑：**

这里有一些 PHP 代码可以给你一个想法：

```
$str = 'CS#: A197789
Site Name: Made up name (F/A)
111E 1st Street=20
Somewhere, AZ 99999
Date and Time: Oct 1 2012 9:14AM
Event: CEE602 - TIMER TEST
Zone: E602 - Caller_ID: timer test
Site Phone 1: 
Site Phone 2:=20
System Description: NX 8 Caddx LF=0A=
=0D';

preg_match_all('/\s*([^:]+?)\s*:\s*(.*(?:\s*(?!.*:).*)*)\s*/m',
               $str,
               $matches,
               PREG_SET_ORDER);

foreach ($matches as $match) {
    echo "$match[1] => $match[2] <br>";
} 
```

输出：

```
CS# => A197789
Site Name => Made up name (F/A)
111E 1st Street=20 Somewhere, AZ 99999 Date and Time => Oct 1 2012 9:14AM
Event => CEE602 - TIMER TEST
Zone => E602 - Caller_ID: timer test
Site Phone 1 =>
Site Phone 2 => =20
System Description => NX 8 Caddx LF=0A= 
```

我留给您尝试解决“日期和时间：”问题...（提示：上午 9 点 14 分）

# mysql - 将 Hibernate 对象同时添加到 MySQL

> ID：12678989
> 
> 赞同：0
> 
> 时间：2012-10-01T18:36:43.543
> 
> 标签：mysql, hibernate, servlets

我是 Hibernate 新手，正在开发一个从 URL 获取参数的 servlet，创建一个 Hibernate 对象，然后将其存储到 MySQL 数据库中。

我同时发送 1000 个 URL。当我查看 MySQL 表时，它只将最后一个对象添加到数据库中。

doGet 方法：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    // TODO Auto-generated method stub

    //HttpSession session = request.getSession(true);
    //session.putValue("uid", count);

    String id = request.getParameter("id");
    String url = request.getParameter("url");
    String lastVisitTime = request.getParameter("lastVisitTime");
    String visitCount = request.getParameter("visitCount");
    String title = request.getParameter("title");
    String typedCount = request.getParameter("typedCount");

    HistoryItem hi = new HistoryItem(id, url, lastVisitTime, visitCount, title, typedCount);

    File f = new File("C:\\Users\\atılay\\Desktop\\apache-tomcat-7.0.30-windows-x64\\jspservlets\\UserModeling\\src\\hibernate.cfg.xml");

    SessionFactory sessionFactory = new Configuration().configure(f).buildSessionFactory();
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    session.save(hi);
    session.getTransaction().commit();
    session.flush();
    session.close();

} 
```

历史项目：

```
public class HistoryItem {

@Id @GeneratedValue(strategy=GenerationType.IDENTITY)
@Basic(optional = false)
private int i;
private String id  = "";
private String url = "";
private String lastVisitTime = "";
private String visitCount = "";
private String title = "";
private String typedCount = "";
} 
```

问题是什么？我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:52:05.440

如果您正在创建要保存到数据库中的对象/实体，则不应设置它的 ID。

在保存对象时分配 ID —— 这是 Hibernate 的职责。已经设置了 ID，意味着 HB 认为对象已经被保存。

真的，这不是一个很好的问题，或者编码风格，或者例子。

'同时发送 1000 个 URL'。这意味着什么？您有 1000 个浏览器同时打开，并同时从所有浏览器发送请求？讲道理。

您的 SessionFactory 应该保存在 webapp 或 servlet 中。此代码为每个页面请求执行整个 Hibernate 启动和初始化。

```
File f = new File("C:\\Users\\atılay\\Desktop\\apache-tomcat-7.0.30-windows-x64\\jspservlets\\UserModeling\\src\\hibernate.cfg.xml");

SessionFactory sessionFactory = new Configuration().configure(f).buildSessionFactory(); 
```

摆脱“ID”作为参数 - 或者可选地使用它来加载和编辑记录 - 并正确进行 Hibernate 设置。

那么你的项目可能会奏效。

# javascript - jQuery/JS：检查 $_POST PHP 变量，如果存在，则调用要执行的 jquery 函数

> ID：12678992
> 
> 赞同：0
> 
> 时间：2012-10-01T18:36:51.680
> 
> 标签：javascript, jquery, http-post

这是我的问题：

*   在我的主页上，我有一个带有城市名称的选择框。用户选择一个值，然后被带到另一个（内部）页面。
*   该内页只有在用户直接打开它的情况下才具有与城市名称完全相同的选择框（即不是来自主页）。那是因为选择城市是我搜索过程中的第一步。
*   因此，如果用户直接访问内页，他将选择一个城市，提交表单触发一个 jquery 脚本，该脚本基于该城市值进行搜索。页面布局更改但地址保持不变（jquery 重新排列元素，在左列中显示过滤器选项）。
*   如果用户从主页到达，我希望用户跳过内页上的城市选择，因为他已经在主页上选择了它。
*   我正在使用 totalStorage 插件来捕获主页城市值

基本上，我想通过检查 isset($_POST['city-homepage']); 来区分访问内页的两种方式；如果为 false，则用户直接访问它，所以一切都很好。但是，如果为真，我需要立即调用该 jquery 函数 (search_workers()) 并自动将我的选择框的值设置为 $.totalStorage('city') 因为这是城市时写入 cookie 的内容在主页上被选中。

```
function searchWorkers(){
    var result=false;

    $.ajax({
        url: "<?php echo $this->action("search_workers"); ?>",
        async: false,
        type: "POST",
        data: {
            city: $("select[name=city]").val(),
            help_wanted: $("#help_wanted").val(),
            gender: $("#gender").val()
        }
    }).done(function(msg){
        result=JSON.parse(msg);
    }); 
```

做我想做的事的最佳做法是什么？我对Javascript不是很熟悉，所以请理解我的问题是否愚蠢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:08:59.970

您应该让您的 PHP 文件检查是否设置了 $_POST['city-homepage']。如果是这样，您应该处理该信息并相应地布置页面。您还可以让 php 文件在下拉菜单中设置所选城市。

```
<?php
    if(isset($_POST['city-homepage'])) {
    //output the page with all the layout and information needed since the user
    //has selected the city already. And when creating the drop down box:
     echo '<select name="city" onchange="searchWorkers()">';
     foreach($cities as $city) {    // assuming $cities is an array containing
                                    // the name of each city in the list
     if($city==$_POST['city-homepage'])
          $selected='selected="selected"';
     echo '<option value="'.$city.'" '.$selected.'>'.$city.'</option>';
     $selected='';
        }
    }
    else {
       //display the page as though the user has not selected a city
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:01:27.887

所以，我设法找到了解决方案。

当用户在我的主页上并选择一个城市时，我存储在一个 cookie 中（使用 $.totalStorage）： ref = 'home' AND city-hp = selected value 然后表单的操作将他带到实际的搜索页面。

当他到达那里时，在一个文档就绪函数中，我检查 ref 变量的值“home”。如果为真，我调用我的 worker_search 函数，并在下一行将 ref 变量设置为一个新值（需要，因为从此时起我不需要主页中的任何内容）。如果为 false （用户不是来自主页而是直接来自），我将 ref 设置为 'inner' 并且我不在这里调用该函数，因为用户将要先选择城市。

然后在我的函数worker_search中，我再次评估ref，并根据结果设置select#city的值：如果'home'，上面的值设置为cookie中的城市（这是用户在主页上选择的）如果'inner '，值正常设置（根据用户选择的城市）

这样，我的 worker_search 函数在这两种情况下都会为其 select#city 变量获取值。

# permissions - 数据库上的配置单元权限问题

> ID：12678996
> 
> 赞同：2
> 
> 时间：2012-10-01T18:36:56.833
> 
> 标签：permissions, hadoop, roles, hive

我有一个运行 CDH4 版本的 Hadoop 集群。我在为 hive 上的用户授予权限时遇到问题。我的要求是我需要在 hive 上创建一个数据库并仅授予该用户（或组）访问权限的每个 linux 用户。所以其他用户应该不能看到这些表或对它们做任何事情。对于每个具有选择性权限的用户，我已经在 HDFS 中有单独的文件夹。这是我所做的：

*   My Hive 连接到 oracle 11g 作为其元存储。表都已创建。

*   修改 /etc/hive/conf/hive-site.xml 并设置“hive.security.authorization.enabled”=true。还有“hive.security.authorization.createtable.owner.grants”=全部。

*   创建了具有相同组名的 Linux 用户 demo1 和 demo2 即 demo1 和 demo2 以 root 身份登录 hive 提示符，并创建了 2 个数据库 demo1db 和 demo2db。

*   创建了 2 个角色，demo1_role 和 demo2_role 将组分配给角色，即 demo1 组属于 demo1_role 和 demo2 组属于 demo2_role。

*   将“全部”授予 demo1db 到 demo1_role 和 demo2db 到 demo2_role

*   以 demo1 身份登录并进入 hive 提示符。创建表 demo1db.table1。

*   以 demo2 身份登录并进入 hive 提示符。删除表 demo1db.table1。**它允许下降!!!!。**虽然它无法删除 HDFS 中的关联数据，因为 demo2 无权访问 demo1 控制的文件夹。该表从 Metastore 中删除。当我使用 demo2 用户创建表并且 demo1 能够删除它时，也会发生同样的情况。

我做错了什么？我还注意到，当我“显示表格”时；在demo1下，它什么都不显示？

有什么建议么？