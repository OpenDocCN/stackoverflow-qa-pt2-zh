# StackOverflow 问答 13706000-13706999

# ios - 在文档目录iOS中获取一组项目

> ID：13706000
> 
> 赞同：3
> 
> 时间：2012-12-04T15:13:59.470
> 
> 标签：ios, directory, filepath

我的文档目录中有一些文件夹和子文件夹我如何才能获得一个包含目录和子目录中的文件的数组，而不是文件夹只是文件。

到目前为止，这是我的代码，如果不存在文件夹和子文件夹，它就可以工作

```
//getting all the files on documents folder in an array.
    NSError * error;
    NSArray * directoryContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:&error]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:35:31.890

您可以查看旧的 SO 链接：

1.  [如何获取 Documents 目录中文件的所有路径？](https://stackoverflow.com/questions/7440662/how-to-get-all-paths-for-files-in-documents-directory)
2.  [在 UITableView 的 iOS 文档目录中列出保存的文件？](https://stackoverflow.com/questions/8376511/list-saved-files-in-ios-documents-directory-in-a-uitableview)
3.  [获取资源文件夹中的文件列表 - iOS](https://stackoverflow.com/questions/6398937/getting-a-list-of-files-in-the-resources-folder-ios)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:30:30.073

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSDirectoryEnumerator *enumerator = [fileManager enumeratorAtPath:documentsDirectory];
NSMutableArray *files = [NSMutableArray array];
BOOL isDirectory;
NSString *path;
while (path = [enumerator nextObject]) {
    if ([fileManager fileExistsAtPath:path isDirectory:&isDirectory] && !isDirectory) {
        [files addObject:path];
    }
} 
```

# javascript - 在不同的浏览器选项卡上显示数据

> ID：13706001
> 
> 赞同：0
> 
> 时间：2012-12-04T15:14:04.023
> 
> 标签：javascript, html, tabs, cross-browser

浏览器打开了两个带有不同 URL 的选项卡。

一个html页面从服务器接收到的数据...

是否可以在另一个已打开而无需重新加载的选项卡中显示相同的数据...如果是这样应该如何做...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:16:24.790

是的，**如果**有：

1.  您的代码打开了另一个选项卡（通过`window.open`），或者

2.  窗口有一个*名称*（例如通过`target`链接上的属性分配的名称，例如`target="otherwindow"`）

此外，窗口的内容必须与您与之交互的文档同源，否则您将被同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止。

### 1.如果您通过以下方式打开它`window.open`

`window.open`返回对`window`已打开窗口的对象的引用，您可以使用该对象（假设它位于同一来源）进行操作。例如：

```
var wnd = window.open("/some/url");

// ...later, when it's loaded...

var div = wnd.document.createElement('div');
div.innerHTML = "content";
wnd.document.appendChild(div); 
```

您可以使用所有常用的 DOM 方法。如果您在另一个窗口中加载库，您也可以使用它。（重要的是要了解这两个窗口有两个不同的全局命名空间，它们不是共享的。）

这是一个完整的例子。我在下面使用 jQuery 只是为了方便，但 jQuery**不是**必需的。正如我上面所说，您可以直接使用 DOM（如果您愿意，也可以使用其他库）：

[实时复制](http://jsbin.com/ecaguq/1)| [直播源](http://jsbin.com/ecaguq/1/edit)

HTML：

```
<button id="btnOpen">Open Window</button>
<button id="btnAdd">Add Content</button>
<button id="btnRemove">Remove Content</button> 
```

JavaScript：

```
(function($) {
  var btnOpen,
      btnAdd,
      btnRemove,
      wnd,
      wndTimeout,
      wnd$,
      newContentId = 0;

  btnOpen   = $("#btnOpen");
  btnAdd    = $("#btnAdd");
  btnRemove = $("#btnRemove");
  updateButtons();

  btnOpen.click(openWindow);
  btnAdd.click(addContent);
  btnRemove.click(removeContent);

  function updateButtons() {
    btnOpen[0].disabled = !!wnd;
    btnAdd[0].disabled = !wnd$;
    btnRemove[0].disabled = !wnd$;
  }

  function openWindow() {
    if (!wnd) {
      display("Opening window");
      wnd$ = undefined;
      wndTimeout = new Date().getTime() + 10000;
      wnd = window.open("/etogel/1");
      updateButtons();
      checkReady();
    }
  }

  function windowClosed() {
    display("Other window was closed");
    wnd = undefined;
    wnd$ = undefined;
    updateButtons();
  }

  function checkReady() {
    if (wnd && wnd.jQuery) {
      wnd$ = wnd.jQuery;
      wnd$(wnd).on("unload", windowClosed);
      updateButtons();
    }
    else {
      if (new Date().getTime() > wndTimeout) {
        display("Timed out waiting for other window to be ready");
        wnd = undefined;
      }
      else {
        setTimeout(checkReady, 10);
      }
    }
  }

  function addContent() {
    var div;

    if (wnd$) {
      ++newContentId;
      display("Adding content '" + newContentId + "'");
      wnd$("<div>").addClass("ourcontent").html("Added content block #" + newContentId).appendTo(wnd.document.body);
    }
  }

  function removeContent() {
    var div;

    if (wnd$) {
      div = wnd$("div.ourcontent").first();
      if (div[0]) {
        display("Removing div '" + div.html() + "' from other window");
        div.remove();
      }
      else {
        display("None of our content divs found in other window, not removing anything");
      }
    }
  }

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }

})(jQuery); 
```

### 2\. 如果您通过以下链接打开它`target`

`window.open`可以找到并返回对该窗口的引用：

```
var wnd = window.open("", "otherwindow"); 
```

请注意，URL 参数为空，但我们将`target`属性名称传递给它。该窗口必须*已经*打开才能工作（否则它将打开一个完全空白的窗口）。

这是上面的示例，修改为假设您已通过以下方式打开窗口`<a href="..." target="otherwindow">...</a>`：

[实时复制](http://jsbin.com/ecaguq/2)| [直播源](http://jsbin.com/ecaguq/2/edit)

HTML：

```
<a href="/etogel/1" target="otherwindow">Click to open the other window</a>
<br><button id="btnGet">Get Window</button>
<button id="btnAdd">Add Content</button>
<button id="btnRemove">Remove Content</button> 
```

JavaScript：

```
(function($) {
  var btnGet,
      btnAdd,
      btnRemove,
      wnd,
      wndTimeout,
      wnd$,
      newContentId = 0;

  btnGet    = $("#btnGet");
  btnAdd    = $("#btnAdd");
  btnRemove = $("#btnRemove");
  updateButtons();

  btnGet.click(getWindow);
  btnAdd.click(addContent);
  btnRemove.click(removeContent);

  function updateButtons() {
    btnGet[0].disabled = !!wnd;
    btnAdd[0].disabled = !wnd$;
    btnRemove[0].disabled = !wnd$;
  }

  function getWindow() {
    if (!wnd) {
      display("Getting 'otherwindow' window");
      wnd$ = undefined;
      wndTimeout = new Date().getTime() + 10000;
      wnd = window.open("", "otherwindow");
      updateButtons();
      checkReady();
    }
  }

  function windowClosed() {
    display("Other window was closed");
    wnd = undefined;
    wnd$ = undefined;
    updateButtons();
  }

  function checkReady() {
    if (wnd && wnd.jQuery) {
      wnd$ = wnd.jQuery;
      wnd$(wnd).on("unload", windowClosed);
      updateButtons();
    }
    else {
      if (new Date().getTime() > wndTimeout) {
        display("Timed out looking for other window");
        wnd = undefined;
        updateButtons();
      }
      else {
        setTimeout(checkReady, 10);
      }
    }
  }

  function addContent() {
    var div;

    if (wnd$) {
      ++newContentId;
      display("Adding content '" + newContentId + "'");
      wnd$("<div>").addClass("ourcontent").html("Added content block #" + newContentId).appendTo(wnd.document.body);
    }
  }

  function removeContent() {
    var div;

    if (wnd$) {
      div = wnd$("div.ourcontent").first();
      if (div[0]) {
        display("Removing div '" + div.html() + "' from other window");
        div.remove();
      }
      else {
        display("None of our content divs found in other window, not removing anything");
      }
    }
  }

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }

})(jQuery); 
```

# python - 串行数据记录器，动态解析

> ID：13706012
> 
> 赞同：3
> 
> 时间：2012-12-04T15:14:38.580
> 
> 标签：python, sql, pyserial

我正在尝试将 Python 数据记录器放在一起，并正在寻找一些建议。这是我的情况。我不希望任何用户干预。只需插入并记录。到目前为止，我正在使用 PySerial 模块，并且能够将所有串行数据记录到文本文件中。我读了一行，存储在一个变量中，然后将该变量以附加模式写入文件。

现在我想将这些数据传输到网络上进行绘图。这就是我头疼的地方。我应该尝试将其发送到 SQL 服务器还是仅发送到文本文件？我正在使用 3g 模块，但速度/带宽是有限的。数据以每 0.25 秒 1 个样本流式传输到记录仪 这是一个示例：

1 324 23454 2342 0 233 0 0 12223 66453 443 33 33 20 0 0 0 0

所以我认为我不需要发送每个样本，也许每秒或每隔一秒只发送一条线。

记录器只会运行大约 5 天，然后将记录所有数据。现在我的问题是，关于我应该如何/在哪里发送数据有什么建议吗？SQL 或文本文件？接下来，如果我有这些数据在线，是否有一种简单的方法可以在数据流式传输时实时绘制这些数据？

为了锦上添花，有时原始数据会以空格分隔，有时以制表符分隔，有时以逗号分隔。

任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:02:16.950

好的，所以您在这里有很多问题/问题。我将尝试解决每个问题：

**数据库**

将每一行保存在数据库的表中。它会让你的生活更轻松。我建议使用可以处理大负载的东西，例如 MySQL 或 Postgres。我可以建议以下表格设计。`line`是您的数据，`uploaded`是一个标志，指示此行是否已上传到服务器。`line_date`可以记录读数的确切日期时间，这可能有助于捕获。如果您的数据行是可变的并且您不想设置固定长度，请将 varchar(200) 更改为文本。我建议您将此表保留在客户端，并使用上传字段作为标志来指示此行是否已上传到服务器。这样您就不会在任何网络连接问题期间丢失任何数据，并且您可以跟踪哪些线路仍在等待上传。然后，您可以拥有一个仅插入行的脚本，另一个脚本或线程读取未上传行的列表并每隔一秒左右上传一次。为简单起见，您还可以在服务器上使用几乎相同的表格设计。

```
CREATE TABLE data_lines (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    line VARCHAR(200),
    uploaded INT,
    line_date DATETIME
); 
```

**解析行**

您提到原始数据将以空格分隔，有时以制表符分隔，有时以逗号分隔。这行简单的代码可以处理所有这些情况。

```
>>> line = "1,2 3\t4"
>>> print line.replace(',', ' ').split()
['1', '2', '3', '4'] 
```

**实时图表**

[弗洛特](http://code.google.com/p/flot/)是要走的路。他们做了非常棒的基于网络的实时图表。你可以[在这里看到一个例子](http://people.iola.dk/olau/flot/examples/realtime.html)。

# java - 调用方法时出现 NullPointerException

> ID：13706014
> 
> 赞同：0
> 
> 时间：2012-12-04T15:14:39.407
> 
> 标签：java, mysql, eclipse, nullpointerexception, jcombobox

调用方法 fillDBWeek(String mName) 时出现 NullPointerException。我无法发现我哪里出错了，有人可以帮我吗？

这是我为以下方法得到的错误

```
*Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at View.LectureReport.fillDBWeek(LectureReport.java:49)
    at View.LectureReport$2.actionPerformed(LectureReport.java:96)* 
```

方法 fillDBWeek

```
public void fillDBWeek(String mName)
    {
         tableModel.setDataVector(lRHand.popuSDataWeek(mName), columnNames);
         table.setModel(tableModel);
         table.repaint(); 
    } 
```

按下按钮时调用该方法的位置

```
JButton btnViewReport = new JButton("View Report");
    btnViewReport.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            String moduleName = (String)comboBox.getSelectedItem();
            if(comboBox_1.getSelectedItem().equals("Week"))
            {
                fillDBWeek(moduleName);
            }
            else if (comboBox_1.getSelectedItem().equals("Semester"))
            {
                fillDBSem(moduleName);
            }
            else if (comboBox_1.getSelectedItem().equals("Year"))
            {
                fillDBYear(moduleName);
            }
        }
    }); 
```

查询用于调用 SQL 数据库中的数据

```
public Object[][] popuSDataWeek(String moduleName)
{
    data = new Object[30][9];

    try{
           Class.forName(DRIVER_CLASS);

            connection = DriverManager.getConnection( url,"polk", "mire");

            statement = connection.createStatement();
            results = statement.executeQuery("SELECT * FROM Group6_StudAttWeek WHERE module = '"+ moduleName +"'");
            int i=0;
            while(results.next())
            {
            data[i][0]= results.getString("firstname");
            data[i][1]= results.getString("lastname");
            data[i][2]= results.getString("module");
            data[i][3] = results.getString("yearOfStudy");
            data[i][4]= results.getInt("workshop%");
            data[i][5]= results.getInt("tutorial%");
            data[i][6] = results.getInt("lecture%");
            data[i][7] = results.getInt("avg%");
            data[i][8] = results.getInt("number");
            i++;
            }
       results.close();
       statement.close();
       connection.close();
       } catch (SQLException sqlException) {
       sqlException.printStackTrace();
       System.exit(1);
       }catch(Exception exception) {
       System.err.println("An error happened");
       System.exit(1);
       }

    return data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:23:39.610

基于堆栈：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at View.LectureReport.fillDBWeek(LectureReport.java:49)
    at View.LectureReport$2.actionPerformed(LectureReport.java:96) 
```

异常上升`fillDBWeek`，要么是因为`tableModel`要么`table`为空。相反，如果异常由 引发`popuSDataWeek`，它应该出现在堆栈跟踪中，但无论如何我看到的唯一可能的空对象是`connection`.

请确保在使用它们之前声明并初始化了正确的对象。

# javascript - 如何从用户输入以类似的复选框格式将项目添加到列表中

> ID：13706016
> 
> 赞同：0
> 
> 时间：2012-12-04T15:14:53.103
> 
> 标签：javascript, html, forms, input, checkbox

我正在尝试使用复选框制作可编辑的清单。我想要的一项功能是让用户能够将自己的项目添加到此列表中。

在另一个用户的帮助下，我已经做到了这一点：
HTML：

```
<table id="myTable">
    <tr>
        <td>
        <label for="checkbox65">
            <input name="checkbox65" class="checkbox65" type="checkbox" />
            Get directions for where you are going
        </label>
        </td>
    </tr> 
    <tr>
        <td>
            <fieldset data-role="controlgroup">
                <label for="textinput4">
                    Add new item
                    <input name="new_item" id="textinput4" placeholder="" value="" type="text" />
                </label>
            </fieldset>
            <button id="add">Add</button>
        </td>
    </tr>
</table> 
```

Javascript：

```
$('#add').on('click', function (e) {
    var $this = $(this);
    var $firstRow=$this.closest('table').find('tr:first');
    var $newRow = $firstRow.clone();
    $newRow.find(':input').prop('checked', false);
    $newRow.insertAfter($firstRow);
 }); 
```

我想要得到的是看起来有点像这样的东西： [我想要什么](http://i.imgur.com/BfVPD.jpg)

但目前它只是重复带有标签的原始复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:52:11.480

假设您需要将复选框旁边的文本设置为您在输入框中输入的内容，您可以执行以下操作：

```
$('#add').on('click', function (e) {
    var $this = $(this);
    var $firstRow=$this.closest('table').find('tr:first');
    var $newRow = $firstRow.clone();

    var input = $newRow.find(':input').remove();
    input.prop('checked', false);
    $newRow.empty().append(input).append('&nbsp;'+$('#textinput4').val());

    $newRow.insertAfter($firstRow);
});​ 
```

**演示：http:** [//jsfiddle.net/VHe6C/](http://jsfiddle.net/VHe6C/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T07:03:55.530

如果有人对基于纯 javascript 的解决方案感兴趣，那就是：

```
document.querySelector('#add').addEventListener('click', function(e){
    var table = this.parentNode.parentNode.parentNode,
        rowsLen = table.rows.length,
        beforeLastRow = table.rows[rowsLen - 2],
        inputToAdd = document.querySelector('#textinput4');

    var newRow = beforeLastRow.cloneNode(true),
        input = newRow.querySelector('input');

    input.checked = false;

    var label = newRow.querySelector('label');
    label.innerHTML = "";
    label.appendChild(input);
    label.appendChild(document.createTextNode(inputToAdd.value));
    inputToAdd.value = "";

    table.insertBefore(newRow, table.rows[rowsLen - 1]);
}, false); 
```

这是一个 jsFiddle 来测试它：http: [//jsfiddle.net/subhamsaha1004/2G9Qv/](http://jsfiddle.net/subhamsaha1004/2G9Qv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:57:24.140

您可以为复选框添加文本框值

```
$(document).ready(function(){
$("#addbutton").on("click",function(){
if ($("#goingtoadd").val()!="")
    document.getElementById('adding').innerHTML+='<br/><input name="checkbox65" class="checkbox65" type="checkbox" />'+$("#goingtoadd").val();
    $("#goingtoadd").val("");
})
}); 
```

[看到这个小提琴演示](http://jsfiddle.net/Dineshkani/QFhnc/)

# c++ - OpenGL 第三人称相机

> ID：13706017
> 
> 赞同：3
> 
> 时间：2012-12-04T15:15:10.560
> 
> 标签：c++, opengl, camera

我已经从教程等在线使用 OpenGL 和 C++ 组装了一个第三人称相机系统，但我似乎无法找出具体问题。当我使用鼠标移动转动时，我的角色围绕相机旋转，而不是相机围绕角色旋转并且角色原地转动。我应该怎么做才能让角色原地转身？

```
// variables ..

void checkMouse(){
    if (mouseXPos > SCREEN_WIDTH/2){
        // turn right
        yrot += abs(mouseXPos - SCREEN_WIDTH/2) * .005;
    } else if (mouseXPos < SCREEN_WIDTH/2){
        // turn left
        yrot -= abs(mouseXPos - SCREEN_WIDTH/2) * .005;
    }
    if (mouseYPos > SCREEN_HEIGHT/2){
        // look up
        xrot += abs(mouseYPos - SCREEN_HEIGHT/2) * .005;
    } else if (mouseYPos < SCREEN_HEIGHT/2){
        // look down
        xrot -= abs(mouseYPos - SCREEN_HEIGHT/2) * .005;
    }
}

void checkKeys(){
    if(keys['t'] == true){
        wireframe=!wireframe;
        if(wireframe){
            glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
        }
        else glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
    }

    if (keys['w'] == true){
        float xrotrad, yrotrad;
        yrotrad = (yrot / 180 * 3.141592654f);
        xrotrad = (xrot / 180 * 3.141592654f); 
        xpos += float(sin(yrotrad)) * 10 ;
        zpos -= float(cos(yrotrad)) * 10 ;
    }

    if (keys['s'] == true){
        float xrotrad, yrotrad;
        yrotrad = (yrot / 180 * 3.141592654f);
        xrotrad = (xrot / 180 * 3.141592654f); 
        xpos -= float(sin(yrotrad)) * 10;
        zpos += float(cos(yrotrad)) * 10;
    }

    if (keys['a'] == true){
        float yrotrad;
        yrotrad = (yrot / 180 * 3.141592654f);
        xpos -= float(cos(yrotrad)) * 10;
        zpos -= float(sin(yrotrad)) * 10;
    }

    if (keys['d'] == true){
        float yrotrad;
        yrotrad = (yrot / 180 * 3.141592654f);
        xpos += float(cos(yrotrad)) * 10;
        zpos += float(sin(yrotrad)) * 10;
    }
}

void renderScene(){

    // Clear framebuffer & depth buffer
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Reset Modelview matrix       
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // Set view position & direction
    gluLookAt(0,0,5,  0,0,-1,  0,1,0);

    checkKeys();
    checkMouse();

    // 3rd person object
    // draw body
    glPushMatrix();
    glRotatef(xrot,1.0,0.0,0.0); // keeps object on ground level rather than always in front of camera
    glTranslatef(0,-90,-400.0); // keep object 400 away from camera
    glRotatef(-90,0.0,1.0,0.0);
    glutSolidCube(20);
    glPopMatrix();

    // CAMERA
    glRotatef(xrot,1.0,0.0,0.0);  //rotate our camera on the x-axis (left and right)
        glRotatef(yrot,0.0,1.0,0.0);  //rotate our camera on the y-axis (up and down)
    glTranslated(-xpos,-ypos-200,-zpos);

    // rest of world
    glPushMatrix();
    glutSolidCube(30);
    glPopMatrix();

    // ..

    glDisable(GL_TEXTURE_2D);
    // Swap double buffer for flicker-free animation
    glutSwapBuffers();

}

void updateScene(){

    // Wait until at least 16ms passed since start of last frame
    // Effectively caps framerate at ~60fps
    while(timeGetTime()-lastTickCount<16);
    lastTickCount=timeGetTime();

    // Draw the next frame
    glutPostRedisplay();

}

void keypress (unsigned char key, int x, int y) {

    keys[key] = true;

    // Test if user pressed ESCAPE (ascii 27)
    // If so, exit the program
    if(key==27){
        exitScene();
    }
}

void keypressup (unsigned char key, int x, int y) {

    keys[key] = false;
    wheel_turn = 0;
}

void mouseMovement(int x, int y) {

    mouseXPos = x;
    mouseYPos = y;
}

void mouseClick(int button, int state, int x, int y){
    if (button == GLUT_LEFT_BUTTON){
        if (state == GLUT_DOWN)
            lButton = true;
        else
            lButton = false;
    }
}

void setupScene(){

    forwards = 0;
    strafe = 0;
    turn = 0;

    std::cout<<"Initializing scene..."<<std::endl;

    //Set up Lighting Stuff
    glLightfv(GL_LIGHT0, GL_POSITION, left_light_position);
    glLightfv(GL_LIGHT0, GL_AMBIENT, white_light);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, white_light);
    glShadeModel(GL_SMOOTH);

    glEnable(GL_DEPTH_TEST);
}

void exitScene(){

    std::cout<<"Exiting scene..."<<std::endl;

    // Close window
    glutDestroyWindow(windowId);

    // Free any allocated memory

    // Exit program
    exit(0);
}

void setViewport(int width, int height) {

    // Work out window ratio, avoid divide-by-zero
    if(height==0)height=1;
    float ratio = float(width)/float(height);

    // Reset projection matrix
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    // Fill screen with viewport
    glViewport(0, 0, width, height);

    // Set a 45 degree perspective
    gluPerspective(45, ratio, .1, 200000);

}

int main(int argc, char *argv[]){

    // Initialise OpenGL
    glutInit(&argc, argv); 

    // Set window position, size & create window
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowPosition(50,50);
    glutInitWindowSize(SCREEN_WIDTH,SCREEN_HEIGHT);
    windowId = glutCreateWindow("3rd person cam");

    // Set GLUT callback functions
    glutReshapeFunc(setViewport);
    glutDisplayFunc(renderScene);
    glutIdleFunc(updateScene);
    glutKeyboardFunc(keypress);
    glutKeyboardUpFunc(keypressup);
    glutPassiveMotionFunc(mouseMovement); //check for mouse movement
    glutMotionFunc(mouseMovement);
    glutMouseFunc(mouseClick);
    // Setup OpenGL state & scene resources (models, textures etc)
    setupScene();

    // Show window & start update loop
    glutMainLoop();    

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:47:52.420

您正在围绕自身旋转相机 - 这类似于您转过头。您想更改相机位置，围绕您感兴趣的对象旋转。

## 1.找到你的相机位置

*   为此查找“球坐标”
*   根据鼠标 x 移动，您的水平角度应在（0 到 2*PI）之间变化
*   您的垂直角度应根据鼠标 y 移动在（0 和 PI）之间变化
*   您可以使用一个值缩放找到的 (x,y,z) 位置，以改变相机和对象之间的距离
*   将对象位置添加到这个找到的位置
*   您现在在对象周围有一个有效的相机位置

## 2.查找视图矩阵

*   有一个方便的 glut 方法称为 gluLookAt，只需使用它来找到您的最终相机矩阵。它需要（相机位置、物体位置和世界向上（0,1,0））

# python - 在while循环中重置raw_input（python）

> ID：13706021
> 
> 赞同：2
> 
> 时间：2012-12-04T15:15:21.810
> 
> 标签：python, while-loop, raw-input

所以我试图让这个引擎工作，我做到了，但它破坏了我的程序。（来自 LPTHW）

我基本上是在尝试访问一个函数，它从用户那里获得 11 次输入，如果用户无法猜出正确的输入，他们就会死掉（在游戏中），但我似乎修复了将提示从引擎发送到函数打破我获得输入 11 次的功能，并对所有 11 个输入使用相同的猜测。

这里是主引擎

```
globvar = ' '

class Game(object):

    def __init__(self, start):
        self.quips = [
            "You died.  You kinda suck at this.",
            "Your mom would be proud. If she were smarter.",
            "Such a luser.",
            "I have a small puppy that's better at this."
        ]
        self.start = start

    def play(self):
        # next_room_name is taken from init argument start
        next_room_name = self.start

        while True:
            global globvar
            print "\n--------"
            # set variable room to get function from next_room_name
            room = getattr(self, next_room_name)

            print room.__doc__

            if room == self.laser_weapon_armory:
                prompt = raw_input("[keypad]> ")

            elif room == self.escape_pod:
                prompt = raw_input("[pod #]> ")
            else:
                prompt = raw_input("> ")
        globvar = prompt     
            # unpacks function from next_room_name into room
            next_room_name = room() 
```

这是我试图开始工作的功能

```
def laser_weapon_armory(self):
        """
        You do a dive roll into the Weapon Armory, crouch and scan the room
        for more Gothons that might be hiding.  It's dead quiet, too quiet.
        You stand up and run to the far side of the room and find the
        neutron bomb in its container.  There's a keypad lock on the box
        and you need the code to get the bomb out.  If you get the code
        wrong 10 times then the lock closes forever and you can't
        get the bomb.  The code is 3 digits.
        """
        code = "%d%d%d" % (randint(1,9), randint(1,9), randint(1,9))

        guess = globvar
        guesses = 0

        while guess != code and guesses < 10:
            print "BZZZZEDDD!"
            guesses += 1
            guess = globvar

        if guess == code:
            print "The container clicks open and the seal breaks, letting gas out."
            print "You grab the neutron bomb and run as fast as you can to the"
            print "bridge where you must place it in the right spot."
            return 'the_bridge'
        else:
            print "The lock buzzes one last time and then you hear a sickening"
            print "melting sound as the mechanism is fused together."
            print "You decide to sit there, and finally the Gothons blow up the"
            print "ship from their ship and you die."
            return 'death' 
```

这是我得到的输出

```
--------

        You do a dive roll into the Weapon Armory, crouch and scan the room
        for more Gothons that might be hiding.  It's dead quiet, too quiet.
        You stand up and run to the far side of the room and find the
        neutron bomb in its container.  There's a keypad lock on the box
        and you need the code to get the bomb out.  If you get the code
        wrong 10 times then the lock closes forever and you can't
        get the bomb.  The code is 3 digits.

[keypad]> 124
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
BZZZZEDDD!
The lock buzzes one last time and then you hear a sickening
melting sound as the mechanism is fused together.
You decide to sit there, and finally the Gothons blow up the
ship from their ship and you die. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:03:14.043

这是你要找的东西吗？你的问题似乎不是很清楚

```
while guess != code and guesses < 10:
        guess = raw_input("BZZZZEDDD! - try again?")
        guesses += 1
        guess = '' 
```

# c++ - 在 64 位编译器和操作系统中使用 64 位整数

> ID：13706022
> 
> 赞同：7
> 
> 时间：2012-12-04T15:15:26.443
> 
> 标签：c++, optimization, 64-bit

在针对 64 位操作系统时，我对何时使用 64 位整数存有疑问。

有没有人针对生成代码的速度进行了结论性研究？

*   最好使用 64 位整数作为函数或方法的参数？（例如：uint64 myFunc(uint64 myVar)）如果我们使用 64 位整数作为参数，它会占用更多内存，但可能会更有效率。如果我们知道某个值应该总是小于例如 10 会怎样。我们仍然继续使用 64 位整数作为这个参数？

*   使用 64 位整数作为返回类型更好吗？使用 32 位作为返回值是否有一些惩罚？

*   循环使用 64 位整数更好吗？(for(size_t i=0; i<...)) 在这种情况下，我想是这样。对循环使用 32 位变量是否有一些惩罚？

*   使用 64 位整数作为指针索引更好吗？（例如：myMemory[index]）在这种情况下，我想是的。对索引使用 32 位变量是否有一些惩罚？

*   使用 64 位整数将数据存储在类或结构中更好吗？（我们不想保存到磁盘或类似的东西）

*   布尔类型最好使用 64 位？

*   64 位整数和浮点数之间的转换呢？现在使用双打会更好吗？到目前为止，双打比浮点慢。

*   每次我们访问 32 位变量时都会受到一些惩罚吗？

问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:11:22.020

我同意@MarkB，但想提供有关某些主题的更多详细信息。

在 x64 上，可用的寄存器更多（两倍）。因此，标准调用约定被设计为默认情况下在寄存器中采用更多参数。所以只要参数的数量不过多（通常为 4 或更少），它们的类型不会有任何区别。 *无论如何，它们将被提升为 64 位并传入寄存器。*

即使它们是在寄存器中传递的，也会在堆栈上为这些 64 位寄存器分配空间。这是通过设计使它们的存储位置简单且与剩余参数的存储位置相邻。无论如何，多余的参数都将放在堆栈上，因此在这些情况下大小可能很重要。

这个问题对于内存数据结构尤为重要。在 32 位足够的情况下使用 64 位会浪费内存，更重要的是会占用缓存行中的空间。缓存的影响并不简单。 *如果您的数据访问模式是顺序*的，那么您将通过实质上使一半的缓存不可用来为此付出代价。（假设您只需要每个 64 位数量的一半。）

*如果您的访问模式是随机*的，则对缓存性能没有影响。这是因为每次访问都占用了一个完整的缓存行。

访问小于字长的整数可能会产生很小的影响。然而，流水线和指令的多次发布将使得额外的指令（零或符号扩展）几乎总是被完全隐藏并且不被观察到。

所有这一切的结果很简单：*选择对您的问题很重要的整数大小。* 对于参数，编译器可以根据需要提升它们。对于内存结构，通常越小越好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:56:52.850

您已经成功地将*大量*问题塞进了这里的一个问题中。在我看来，您的所有问题基本上都与微优化有关。因此，我将分两部分回答：

*   不要从性能角度担心大小，而是使用指示它们将包含的数据的类型，*并信任编译器的优化器来对其进行排序*。

*   如果在开发过程中的某个时刻性能成为问题，请分析您的代码。然后您可以适当地进行算法调整，*如果*分析器显示整数运算导致问题，您可以并排比较不同的大小以进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:54:18.240

使用`int`并信任平台和编译器作者，他们已经完成了工作并为其选择了最有效的表示。在大多数 64 位平台上，它是 32 位的，这意味着它的效率不低于 64 位类型。

# actionscript-3 - 使用增量时间缩放对象？

> ID：13706023
> 
> 赞同：1
> 
> 时间：2012-12-04T15:15:30.193
> 
> 标签：actionscript-3, math, time

我正在尝试通过一些缓和来缩放和反对。哪个工作正常。但我也想将增量时间值应用于实际缩放。我只是不知道在哪里增加价值。

这是规模缓和代码：

```
scale  += (MIN_SCALE  - scale) * 0.6; 
```

我将如何应用增量时间值？这不像以如下方式解决职位时：

```
x += deltaTime * speed; 
```

这更像是一个适用于我认为的大多数语言的一般问题。但就我而言，我使用的是 ActionScript 3。

非常感谢提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:20:56.273

我可能会将它乘以另一个变量，随着时间的推移会发生变化（增加、减少）。

```
scale  += (MIN_SCALE  - scale) * 0.6 * scaleModifier; 
```

// 更改`scaleModifier`使用任何计时器的值：

```
scaleModifier = deltaTime * 0.1; 
```

# c# - 测量开放 rasta 中的响应时间

> ID：13706024
> 
> 赞同：4
> 
> 时间：2012-12-04T15:15:33.030
> 
> 标签：c#, openrasta, performance, response-time

做这个的最好方式是什么？

我在想类似的事情：

```
 public void Initialize(IPipeline pipelineRunner)
    {
        pipelineRunner
            .Notify(CaptureRequestStartTime)
            .Before<KnownStages.IBegin>();

        pipelineRunner
            .Notify(LogRequestTimeWithStatsd)
            .After<KnownStages.IEnd>();
    } 
```

但是了解内部情况的人的一些建议可能会有用。

是否可以在打开的 rasta 中添加自定义 http 处理程序？

# python - 如何使用高斯分布对列表进行洗牌

> ID：13706027
> 
> 赞同：3
> 
> 时间：2012-12-04T15:15:39.937
> 
> 标签：python, random, simulator, fault, gaussian

我想模拟一条消息的故障（例如：1000010011 => 1010000011）。有没有办法在 Python 中实现它？我尝试了以下方法，它有效：

```
import random
a = "1011101101"
b = [el for el in a] # b = ['1', '0', '1', '1', '1', '0', '1', '1', '0', '1']
random.shuffle(b)
print b # b = ['0', '1', '1', '1', '0', '1', '1', '1', '1', '0']
random.shuffle(b, random.random)
print b # b = ['1', '1', '0', '1', '1', '0', '1', '0', '1', '1'] 
```

我希望我的重新排序是正常/高斯分布的。例如：

```
import random
a = "1011101101"
b = [el for el in a] # b = ['1', '0', '1', '1', '1', '0', '1', '1', '0', '1']
random.shuffle(b,random.gauss(0.5,0.1))
print b # b = ['1', '0', '1', '1', '0', '0', '1', '1', '1', '1'] <= assume this is Gaussian distributed...
# OR
c = random.gauss(0.5,0.1)
random.shuffle(b,c)
print b # b = ['0', '0', '1', '1', '1', '0', '1', '1', '1', '1'] <= assume this is also Gaussian distributed... 
```

但是，这不起作用，我收到消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\random.py", line 287, in shuffle
    j = int(random() * (i+1))
TypeError: 'float' object is not callable 
```

任何建议/评论将不胜感激。

谢谢

注意：我在这里只要求重新订购错误（例如：1000010011 => 1010000011）。但是，我还计划模拟突发错误（例如：1000010011 => 1011111011）、单个事件（例如：1000010011 => 1000010011）等。

其他相关问题：[Python：二进制字符串错误模拟](https://stackoverflow.com/questions/13703464/python-binary-string-error-simulation)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:20:22.777

```
c = lambda: random.gauss(0.5,0.1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T15:19:54.413

的第二个参数`random.shuffle`应该是可调用的，而不是浮点数。尝试：

```
random.shuffle(b, lambda:random.gauss(0.5,0.1)) 
```

要限制从 0 到 1 的区间，您可以使用

```
random.shuffle(b, lambda: max(0.0, min(1.0, random.gauss(0.5,0.1)))) 
```

（感谢@DSM）

如果你是迂腐的，上面的封顶实际上包括 1.0，这会导致`random.shuffle`. 实际上，您应该将 1.0 替换为小于 1.0 的最大浮点数。

# apache - Htaccess 重写规则子文件夹

> ID：13706032
> 
> 赞同：0
> 
> 时间：2012-12-04T15:15:59.353
> 
> 标签：apache, .htaccess, url-rewriting

我在 URL 重写的世界里很新。我必须在我们自己的 CMS 中这样做，才能有一个好看的 url 并获得一个更好的结构，以提供搜索引擎 (SEO) 的结果。

这是完成我们现在用漂亮的 URL 隐藏的所有工作的背景文件：

*   [http://something.com/fr/index.php](http://something.com/fr/index.php)

这是我的结构模式的一个例子：

*   [http://something.com/fr/accueil](http://something.com/fr/accueil)或...
*   [http://something.com/fr/produits/solives-de-rive-rimboard](http://something.com/fr/produits/solives-de-rive-rimboard)

CMS 只需在 FR 目录中创建一个 HTACCESS 文件，用于非常基本的重写，如下所示：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule produits/solives-de-rive-rimboard index.php?p=144
RewriteRule produits/decoupe-sur-mesure index.php?p=145
RewriteRule produits/panneaux-osb index.php?p=146
RewriteRule produits/boites-de-bois-crates index.php?p=147
RewriteRule produits/palettes-de-bois index.php?p=148
RewriteRule accueil index.php?p=4
RewriteRule a-propos-de-cimdat index.php?p=139
RewriteRule produits index.php?p=140
RewriteRule videos index.php?p=141
RewriteRule nous-joindre index.php?p=142 
```

对于“accueil”、“nous-joindre”等第一级页面，一切正常...

但我还没有找到像“produits/solives-de-rive-rimboard”这样的二级和三级页面的解决方法。index.php 只是加载正常，只是到此页面的所有相关链接都是一个子文件夹（css、图像、jquery...）。

有没有我可以在 htaccess 文件中使用的标签来指定无论在哪个级别“accueil”、“produits/something”或第三级（如 index.php 的“produits/group/something”）都有一个基本路径？

我更喜欢在 htaccess 中寻找解决方法，而不是给 index.php 一个“ `<base href="something">`”，这可能会给我们的结构带来其他问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:57:34.727

这是一个 HTML 问题，而不是服务器或 .htaccess 问题。如果您的浏览器看到类似 /category/product 的内容，无论内部服务器端重定向发送请求的位置如何，它都会像在 /category/ 文件夹中一样运行。

解决这个问题很简单，将 html 中的所有链接更改为相对于站点根目录。所以如果你有一个像

```
<img src="img/button.gif" /> 
```

将其更改为

```
<img src="/img/button.gif" /> 
```

无论您的重写规则如何，这都会告诉浏览器从根目录请求文件的确切路径。这需要为您的所有相关链接完成，包括 css 和 javascripts。这可能需要做一些工作，但是一旦完成，它应该会使以后的维护变得更加容易，因为您不必担心页面的明显路径。

是的，这可以通过 .htaccess 相当简单地完成，但是有副作用，包括搜索引擎可以将其视为重复内容的事实，并且它可能会增加您的服务器带宽使用，因为用户无法有效地缓存静态内容。您最好的选择是在网站是新的和不断发展的时候立即遵循最佳实践，而不是在解决方法导致问题之后再尝试修复它。

# php - 用于文件名的 PHP 正则表达式

> ID：13706039
> 
> 赞同：4
> 
> 时间：2012-12-04T15:16:25.390
> 
> 标签：php, regex, preg-replace, preg-match, filenames

我让用户可以通过文本区域更改文件名，但现在我遇到了正则表达式问题。

正如我在 Windows 7 中看到的那样，文件名仅允许使用这些字符：

`\ / : * ? < > |`

但我固执地，也许也是明智地选择将正则表达式最小化为仅这些特殊字符：

`- _ .`

所有其他的都应该被砍掉。

有人可以帮我解决这个正则表达式吗？

preg_replace 除了： `A-Za-z0-9`和`- _ .`

我还是真的不明白。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T15:21:27.360

```
preg_replace('/[^A-Za-z0-9 _ .-]/', '', $filename); 
```

[] 是一个字符类，而 ^ 否定它。所以它实际上匹配除了该组中的字符之外的任何内容。

请注意，`-`在末尾，因为如果在其他地方使用它是一个特殊的范围字符，例如 0-9

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T15:21:51.737

您的问题已经列出了相当多的字符集。您只需将其插入`preg_replace()`即可启动。

试试这个：

```
$filename = preg_replace('/[^a-zA-Z0-9_.-]/', '', $filename); 
```

字符集`^`开头的 ，由 包围`[]`，表示*不*匹配字符列表。因此，该行可以理解为“替换*不是*以下的字符”。

# iphone - ABPersonViewController 在选择照片时导致 iPad 上的 UIViewControllerHierarchyInconsistency

> ID：13706042
> 
> 赞同：2
> 
> 时间：2012-12-04T15:16:32.887
> 
> 标签：iphone, ios, ipad

我在 UINavigationController 中使用 ABPersonViewController 来显示和编辑联系信息。到目前为止，这一直使用最新的 xcode 版本（当前为 4.5.2）和 iOS6。如果用户选择 ABPersonViewController 上的编辑按钮，视图将进入编辑模式（如预期的那样），但现在如果他们选择照片（添加或更改现有照片）然后“选择照片”应用程序崩溃并出现以下异常？.. .

********由于未捕获的异常“UIViewControllerHierarchyInconsistency”而终止应用程序，原因：“一个视图一次最多只能与一个视图控制器关联！看法 ; }; layer = > 与 <_UIActionSheetHostingController: 0x4da1190> 相关联。在将此视图与 <_UIActionSheetHostingController: 0x5f38830> 关联之前清除此关联。*******

 **它似乎是针对 iPad 的——我想这与 iPad 如何将操作表视为弹出框有关，除非它显示在弹出框内。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T04:53:13.120

这似乎是 UIViewController 的新定向方法的问题：

```
- (NSUInteger)supportedInterfaceOrientations
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation 
```

似乎选择照片 VC 没有实现它们，因此请确保您的根 VC 确实实现了它们，即使它的顶级 VC 没有。

在代码中：

```
@implementation UINavigationController (Rotation_IOS6)
-(BOOL)shouldAutorotate {
    return [self.topViewController shouldAutorotate];
}
-(NSUInteger)supportedInterfaceOrientations {
    UIInterfaceOrientationMask topControllerOrientationMask = [self.topViewController supportedInterfaceOrientations];
    return topControllerOrientationMask ? topControllerOrientationMask : UIInterfaceOrientationMaskPortrait;
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    UIInterfaceOrientation topControllerOrientation = [self.topViewController preferredInterfaceOrientationForPresentation];
    return topControllerOrientation ? topControllerOrientation : UIInterfaceOrientationPortrait;
}
@end 
```**

# sitecore - Sitecore ECM：订阅模块

> ID：13706046
> 
> 赞同：0
> 
> 时间：2012-12-04T15:16:37.330
> 
> 标签：sitecore, sitecore6, sitecore-ecm

我需要将订阅表单插入 CMS 网页。我想重新使用已经开发的默认源代码，并在安装后随 ECM 包一起提供。

在 Layout/EmailCampaign 文件夹中有一个用户控件： Subscription Form.ascx 在 OnInit 方法中，他们正在调用另一个方法来检索一些参数。

Require Authentication、Show List、Target Audience List 等参数。

有没有人知道我必须在哪里定义这些参数？它们一直是空的或空的。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:29:51.743

嗯，或者它可能是在您关联到控件的目标受众上完成的。在将控件添加到布局/子布局或通过演示设置添加时，您可能能够添加所需的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T19:15:01.563

我相信这些是在您将控件添加为组件时配置的。当您在添加到页面时编辑组件的相关项目时，您可以更改设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:28:20.630

您提到的参数，通常来自数据模板： `/sitecore/templates/Email` `Campaign/Subscription`子布局参数

然后将它们设置为将布局详细信息分配给演示项目的位置：

这适用于我的 Sitecore 6.5 安装，在管理内容编辑器中：选择您的项目，单击`Presentation`，在`Layout section`，选择`Details`，选择`Edit`，选择选项卡`Controls`，找到代表您的订阅表单的子布局并选择`Edit`。

在以下弹出窗口中，您将能够设置您提到的参数的值。

如果您没有看到这三个参数`Target audience list`，`Require authentication`并且`Show list`在这里，您可能忘记将数据模板： `/sitecore/templates/Email Campaign/Subscription`子布局参数...分配给您`parameter template`的子布局项目。

我怀疑最后一部分是你真正的问题，因为你得到空值

# java - Spring MVC 如何从 Controller 使用 AsyncTaskExecutor

> ID：13706050
> 
> 赞同：1
> 
> 时间：2012-12-04T15:16:47.113
> 
> 标签：java, multithreading, spring-mvc, asynchronous, callable

我需要在不同的线程中从 Controller 执行一些代码。

我的结构：

```
@Controller
MyController

    //invoked from frontend
    @RequestMapping
    MyMethod 
       Loop
           future = asyncTaskExecutor.Submit(callable)
       End loop
       Get future results
    End MyMethod 
```

我在这个例子中使用 AsyncTaskExecutor ：

[任何带有 TaskExecutor 示例的好的 Spring 线程？](https://stackoverflow.com/questions/852743/any-good-spring-threading-with-a-taskexecutor-examples)

```
public SendEmailController() {}

public SendEmailController(AsyncTaskExecutor asyncTaskExecutor) {
super();
this.asyncTaskExecutor = asyncTaskExecutor;
} 
```

应用程序上下文.xml：

```
<bean id="sendEmailController" class="com.ts.bpu.email.web.SendEmailController">
    <constructor-arg ref="asyncTaskExecutor" />
</bean>

<bean id="asyncTaskExecutor"
    class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
    <property name="corePoolSize" value="5" />
    <property name="maxPoolSize" value="10" />
    <property name="queueCapacity" value="25" />
</bean> 
```

但是从不使用带有参数的构造函数。但是如果我只使用带参数的构造函数，异常跟踪是：

```
 GRAVE: WebModule[/TsSecPricesEngineWeb]StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sendEmailController' defined in file [C:\Sun\AppServer\domains\domain1\applications\j2ee-modules\TsSecPricesEngineWeb\WEB-INF\classes\com\ts\bpu\email\web\SendEmailController.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.ts.bpu.email.web.SendEmailController]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.ts.bpu.email.web.SendEmailController.<init>()
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:965)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
at javax.servlet.GenericServlet.init(GenericServlet.java:270)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1194)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:848)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:287)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:218)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:94)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:98)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:222)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:166)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:288)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:647)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.doProcess(DefaultProcessorTask.java:579)
at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:831)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:265)
at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106)

 Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.ts.bpu.email.web.SendEmailController]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.ts.bpu.email.web.SendEmailController.<init>()
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:70)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958)
... 44 more

 Caused by: java.lang.NoSuchMethodException: com.ts.bpu.email.web.SendEmailController.<init>()
at java.lang.Class.getConstructor0(Class.java:2706)
at java.lang.Class.getDeclaredConstructor(Class.java:1985)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:65)
... 45 more 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:28:10.993

当 Spring 容器启动时，它将调用您的 SendEmailController 类构造函数。

# android - 带有 Android 布局的边距问题（滚动视图和线性）

> ID：13706053
> 
> 赞同：0
> 
> 时间：2012-12-04T15:16:52.317
> 
> 标签：android, android-layout, scrollview, margin, android-scrollview

问题：

我正在尝试删除图像/视图之间的空间，以便看起来背景实际上是一个图像。解决此问题的不同方法或方法将不胜感激。

示例图片： ![在此处输入图像描述](../Images/2ab20283b9dba8ca214178b2418e67a0.png)

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#edeab5">

    <ImageView
        android:id="@+id/bgnewsfeedtop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="0dp"
        android:src="@drawable/newsfeedtop" />

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_margin="0dp"
    android:layout_weight="1"
    android:orientation="horizontal" >

<ImageView
    android:id="@+id/bgnewsfeedleft"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="0dp"
    android:layout_marginBottom="0dp"
    android:src="@drawable/newsfeedleft" />

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scroller"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:fillViewport="true"
        android:src="@drawable/newsfeedbg" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:cacheColorHint="@android:color/transparent"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/btn1_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />

            <ImageView
                android:id="@+id/btn2_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />

            <ImageView
                android:id="@+id/btn3_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />

            <ImageView
                android:id="@+id/btn4_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />

            <ImageView
                android:id="@+id/btn5_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />

            <ImageView
                android:id="@+id/btn6_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />

            <ImageView
                android:id="@+id/btn7_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:src="@drawable/filler" />
        </LinearLayout>
    </ScrollView>

    <ImageView
    android:id="@+id/bgnewsfeedright"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="0dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="0dp"
    android:layout_marginBottom="0dp"
    android:src="@drawable/newsfeedright" />
</LinearLayout>

<ImageView
    android:id="@+id/bgnewsfeedbot"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="0dp"
    android:src="@drawable/newsfeedbot" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="75dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/menu_house_manager"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager2"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager3"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager4"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/menu_house_manager"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager2"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager3"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager4"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

</LinearLayout>
</LinearLayout> 
```

编辑****

提供帮助后，修改代码和图像：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#edeab5" >

   <View
        android:id="@+id/newstop"
        android:layout_width="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_height="15dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:background="@drawable/newsfeedtop"
        />

   <View
        android:id="@+id/newsleft"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_marginLeft="10dp"
        android:background="@drawable/newsfeedleft"

        android:layout_toLeftOf="@+id/scroller"
        android:layout_below="@+id/newstop"
        android:layout_above="@+id/newsbottom"
        />

   <View
        android:id="@+id/newsleft"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_marginRight="10dp"
        android:background="@drawable/newsfeedright"

        android:layout_toRightOf="@+id/scroller"
        android:layout_below="@+id/newstop"
        android:layout_above="@+id/newsbottom"
        />

   <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scroller"
        android:layout_width="wrap_content"
        android:layout_height="150dp"
        android:layout_centerInParent="true"
        android:fillViewport="true"
        android:background="#000000"
        android:layout_below="@+id/newstop">

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#cc0000" >

            <ImageView
                android:id="@+id/btn1_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            <ImageView
                android:id="@+id/btn2_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn1_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name"/>

            <ImageView
                android:id="@+id/btn3_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn2_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            <ImageView
                android:id="@+id/btn4_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn3_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            <ImageView
                android:id="@+id/btn5_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn4_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            </RelativeLayout>
            </ScrollView>

   <View
        android:id="@+id/newsbottom"
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:background="@drawable/newsfeedbot"
        android:layout_below="@+id/scroller"
        />

   <LinearLayout
    android:id="@+id/buttonsrow1"
    android:layout_width="fill_parent"
    android:layout_height="75dp"
    android:orientation="horizontal"
    android:layout_marginTop="12dp"
    android:layout_below="@+id/newsbottom">

    <ImageView
        android:id="@+id/menu_house_manager"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager2"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager3"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager4"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

</LinearLayout>

   <LinearLayout
       android:id="@+id/buttonsrow2"
       android:layout_width="fill_parent"
       android:layout_height="75dp"
       android:layout_below="@+id/buttonsrow1"
       android:orientation="horizontal" >

    <ImageView
        android:id="@+id/menu_house_manager"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager2"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager3"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

    <ImageView
        android:id="@+id/menu_house_manager4"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_margin="12dp"
        android:src="@drawable/btnhousemanager"  />

</LinearLayout>

   </RelativeLayout> 
```

![在此处输入图像描述](../Images/d2a53c1cc0ec0402b253925b00a7c724.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:30:24.210

你说的是黑线吗？我想我没有很好地理解你的问题......

您正在“手动列表视图”中进行操作（我的意思是：您应该使用列表视图和自定义适配器来添加 N 个新闻源，而不是使用滚动视图和线性布局）：

```
android:layout_margin="2dp" 
```

这将设置右、左、上、下边距。改为这样做：

```
android:layout_marginRight="2dp"
android:layout_marginLeft="2dp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:28:36.450

你已经用相对布局做过一些事情了吗？

这就是我将如何解决这个问题。你给每个视图一个id

```
android:id = "@+id/whateveryouwanttonameit" 
```

然后您可以通过引用此 ID 来对齐其他视图。

例如：

```
<ImageButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:id="@+id/newGameButton"
    android:text="@string/newGameButton"
    android:background="@drawable/newgame"
    android:contentDescription="@string/feld"/>

<ImageView 
    android:layout_alignLeft="@id/newGameButton"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_above="@id/newGameButton"
    android:src="@drawable/x"
    android:id="@+id/sp2"
    android:contentDescription="@string/feld"/> 
```

在此示例中，ImageViews 左边缘通过使用以下方法与 ImageButton 的左边缘对齐：

```
android:layout_alignLeft="@id/newGameButton" 
```

它也正好在 newGameButton 上方，通过添加之间没有任何空格

```
android:align_above="@id/newGameButton" 
```

这样您就可以构建整个活动布局。

所以这里是一个例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF" >

   <View
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:background="#FF0000"
        android:layout_above="@id/scroller"
        />

   <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scroller"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:fillViewport="true"
        android:background="#000000">

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#00FF00" >

            <ImageView
                android:id="@+id/btn1_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            <ImageView
                android:id="@+id/btn2_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn1_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name"/>

            <ImageView
                android:id="@+id/btn3_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn2_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            <ImageView
                android:id="@+id/btn4_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn3_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            <ImageView
                android:id="@+id/btn5_news_feed"
                android:layout_width="280dp"
                android:layout_height="50dp"
                android:layout_gravity="center_horizontal"
                android:layout_margin="2dp"
                android:layout_below="@id/btn4_news_feed"
                android:background="#000000"
                android:contentDescription="@string/app_name" />

            </RelativeLayout>
            </ScrollView>

   </RelativeLayout> 
```

给了我这个布局：

![布局](../Images/071e0ebc17dc1b8a5032415a95f8ef9c.png)

我保留了边距属性并将滚动视图的背景设为绿色。

使用以下属性，我进行了布局。

只是为了向您展示如果您不定义元素之间没有空格，我添加了一个没有边距属性的红色视图元素。

我还没有为你完成整个布局，只是复制了其中的一些来展示如何使用RelativeLayout 来完成它。我希望这对你有用；）

# android - 使用 AsyncTask 或 Service 在后台上传文件更好吗？

> ID：13706059
> 
> 赞同：6
> 
> 时间：2012-12-04T15:17:10.273
> 
> 标签：android, file-upload, android-asynctask, android-service

我有一个用户能够将视频上传到 Amazon S3 的要求。我已经使用 amazon sdk 中的 java 高级 api 实现了这一点。在上传过程中，如果用户点击主页按钮，上传必须在后台继续。

什么是更好的方法：？

*1 使用 AsyncTask：我尝试过使用 AsyncTask，它工作正常。但是如果上传过程在后台持续很长时间，操作系统会终止应用程序以释放内存。有什么办法可以处理这种情况，让我的应用完成上传过程。

*2 使用服务：有人建议我使用服务 + ui 通知。我喜欢使用 AsyncTask，因为它对我来说很好用。使用服务而不是 AsyncTask 有什么优势吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T15:22:00.300

大多数情况下，AsyncTask 与您的 UI、启动它的 Activity 等耦合。这些将保留在内存中，直到任务完成。

你的这个上传场景需要通过[IntentService](http://developer.android.com/reference/android/app/IntentService.html)来实现。这将使上传与特定活动分离，并使您的应用在 Android 生命周期方面成为良好的 Android 公民。

您现在可以创建一个定期从服务更新的通知，该通知显示上传状态，并允许用户从他的状态栏中取消上传。

# java - java servlet 重复发帖

> ID：13706060
> 
> 赞同：1
> 
> 时间：2012-12-04T15:17:10.957
> 
> 标签：java, servlets, repeat

我想让java servlet根据输入制作类似while-do条件的东西。假设我让它接收名为 UserInput 的输入并连续发布名为 ProgramOutput 的输出，就像与程序聊天一样。这是我的 doPost 代码：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out=response.getWriter();
    String UserInput= request.getParameter("UserInput").toString();

    out.println("<html>");
    out.println("<head>");
    out.println("<title></title>");
    out.println("</head>");
    out.println("<body>");
    while (true){
    out.println(UserInput+ "<br>"); //this is the place where user type his/her words
    out.println("<input type='submit' value='submit'>");
    request.getParameter("UserInput").toString();
        if ("stop".equals(UserInput)) //unless user type 'stop', program will keep printing the answer
        break;
    String ProgramOutput= engine.answer(UserInput); //from engine.java
    out.println(ProgramOutput+"<br>");}
    out.println("</body>");
    out.println("</html>");
    out.close(); 
```

当我尝试运行它时，它从未停止打印相同的输入和输出，甚至没有让用户输入另一个单词并检查它。我应该怎么办？

抱歉，这是我第一次制作 servlet，如果可能的话，我想要一个易于理解的答案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:39:15.337

您在同一代码中混合了 VIEW 和 CONTROLLER。这不是一个好方法。理想情况下，您应该有一个 jsp (VIEW) 用于提供用户输入，并在提交该页面时调用一个 servlet(CONTROLLER)，它将处理请求并将控制返回给 jsp，以便用户可以提供输入。

会建议你阅读 MVC 框架。

# node.js - 如何获取 Node.js 流并将其发送到表单端点（保管箱）

> ID：13706067
> 
> 赞同：4
> 
> 时间：2012-12-04T15:17:39.653
> 
> 标签：node.js, dropbox, dropbox-api

我有一个可读的流（s3），我想通过管道传输到 Dropbox 的 put 端点，但是这不支持`Transfer-Encoding: chunked`流数据所需的。

我看到了 2 个可能的解决方案

1.  将流读入某种变量然后发送，然后内存可能是一个问题
2.  将流写入磁盘然后读回并上传，感觉很脏并且会很慢

这个问题的最佳解决方案是什么？

# wpf - 面板在创建控件图像时不调整控件大小

> ID：13706068
> 
> 赞同：1
> 
> 时间：2012-12-04T15:17:45.597
> 
> 标签：wpf, user-controls, stackpanel

我需要创建自定义 WPF 控件的图像并将其保存到文件中。我是这样做的（[http://denisvuyka.wordpress.com/2007/12/03/wpf-diagramming-saving-you-canvas-to-image-xps-document-or-raw-xaml/](http://denisvuyka.wordpress.com/2007/12/03/wpf-diagramming-saving-you-canvas-to-image-xps-document-or-raw-xaml/)）。

该控件包含几个面板（即。`StackPanel`）。当这个控件呈现在窗体上时，它看起来很完美。但是当我在内存中渲染它并保存到文件时，面板中的所有控件都没有对齐。他们只占用他们需要的区域，并且不会伸展。

当我使用 WPF 3.5 时，它起作用了。在我将项目更新到 WPF 4.0 后出现此问题。

谁能解释一下 WPF 4.0 中的哪些变化导致了这种行为以及如何解决它？

# python - tkinter CheckButton中的文本变量

> ID：13706071
> 
> 赞同：2
> 
> 时间：2012-12-04T15:17:50.803
> 
> 标签：python, tkinter

我正在编写一个 GUI 程序，我想用列表中的文本创建几个复选按钮。问题是我有很多列表，因此我希望用户能够转到“下一页”并根据不同的列表查看一组不同的检查按钮。但是，要做到这一点，我需要在我的复选按钮中添加某种文本变量，以便每次用户转到下一页时都会更新文本。不过，据我所知，没有这样的选择。

这可能吗，还是我需要创建一个单独的检查按钮和一个带有文本变量的单独标签？

帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:25:10.600

我能想到的唯一可能的方法是在检查按钮上进行配置。假设您使用的是标准的 tk checkbuton，您可以调用：

```
checkbutton.config(text=newtext) 
```

显然，newtext 是新文本。

添加对绑定到下一页和上一页按钮的回调的调用。如果确实需要使用变量，请在基于 checkbutton 的类中添加属性并修改其 setter 以在分配时调用 config 函数。

# haskell - 将函数应用于列表中的列表

> ID：13706072
> 
> 赞同：0
> 
> 时间：2012-12-04T15:17:50.610
> 
> 标签：haskell

我想要一个函数，它在列表的每个列表（[[]，[]，[]]）中生成元素的总和，如果它甚至添加到该列表中，则为 0 和 1，否则。

我试过这个，但它只是对列表的头部是正确的，我不知道如何对其他人做。

```
 func :: Matrix -> Matrix
 func (Matr size (x:xs))
                |sum(x) `mod` 2 == 0 = (Matr size ((0:x):xs))
                |otherwise = (Matr size ((1:x):xs)) 
```

通过我的尝试：

```
 [1,1,0,0]
 [1,0,0]
 [1,1,0] 
```

我想要的是：

```
 [1,1,0,0]
 [1,1,0,0]
 [0,1,1,0] 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:24:02.393

当您想对列表的所有元素应用相同的操作时，不要使用显式递归，让我们`map`为您做到这一点。

```
func :: Matrix -> Matrix
func (Matr size xs) = Matr size $ map prependParity xs
  where prependParity x
               | even $ sum x  = 0:x
               | otherwise     = 1:x 
```

# c - xrandr 相关，C 编程

> ID：13706078
> 
> 赞同：11
> 
> 时间：2012-12-04T15:18:14.027
> 
> 标签：c, screen, x11, xrandr

这是对 xrandr 的示例调用：

```
$ xrandr --output LVDS --mode 1680x1050 --pos 0x0 --rotate normal --output S-video --off --output DVI-0 --mode 1024x768 --pos 1680x104 --rotate normal

```

考虑一个调用成功的系统；有两个屏幕（LVDS 和 DVI-0）以不同的分辨率工作。DVI-0 位于右侧中间。

如何在 C 程序中获取所有这些信息？我检查了 xrandr 源代码，但我发现它很难阅读并且没有明显的方法来查询 --pos 值（编辑：它隐藏在明显的视线中，感谢 ernestopheles 的回答我明白了）。

我知道我可以用 XGetWindowProperty 询问 _NET_WORKAREA，但据我所知，它并没有告诉屏幕位置，只是包含它们的理想矩形的大小。

在对 xrandr 代码进行了一些其他研究之后，这段代码似乎是解决方案的一个进步。然而我不相信，第 2940 行附近的 xrandr.c 假设 crtc_info 可能不可用。我仍然想念另一种获得分辨率和位置的方法。

```
    #include <stdio.h>
    #include <X11/extensions/Xrandr.h>

    int main() {
        显示 *disp;
        XRRScreenResources *屏幕；
        XRROutputInfo *信息；
        XRRCrtcInfo *crtc_info;
        int iscres;
        int icrtc;

        显示 = XOpenDisplay(0);
        screen = XRRGetScreenResources (disp, DefaultRootWindow(disp));
        for (iscres = screen->noutput; iscres > 0; ) {
            --iscres;

            info = XRRGetOutputInfo (disp, screen, screen->outputs[iscres]);
            if (info->connection == RR_Connected) {
                for (icrtc = info->ncrtc; icrtc > 0;) {
                    --icrtc;

                    crtc_info = XRRGetCrtcInfo (disp, screen, screen->crtcs[icrtc]);
                    fprintf(stderr, "==> %dx%d+%dx%d\n", crtc_info->x, crtc_info->y, crtc_info->width, crtc_info->height);

                    XRRFreeCrtcInfo(crtc_info);
                }
            }
            XRRFreeOutputInfo（信息）；
        }
        XRRFreeScreenResources(屏幕);

        返回0；
    }

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-17T18:00:19.013

您可以通过以下方式获得每个屏幕分辨率：

```
Display *dpy;
XRRScreenResources *screen;
XRRCrtcInfo *crtc_info;

dpy = XOpenDisplay(":0");
screen = XRRGetScreenResources (dpy, DefaultRootWindow(dpy));
//0 to get the first monitor   
crtc_info = XRRGetCrtcInfo (dpy, screen, screen->crtcs[0]); 
```

之后`crtc_info->width`将包含监视器的宽度和`crtc_info->x`x 位置。

不要忘记包括：

```
#include <X11/Xlib.h>
#include <X11/extensions/Xrandr.h> 
```

并使用 -lX11 -lXrandr 编译以链接库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:55:56.183

我不确定我是否正确理解了这个问题。假设，要读取x-server当前状态的参数，使用如下命令：

```
xrandr -q
```

并解析其输出：

```
LVDS connected 1680x1050+0+0 (normal left inverted right x axis y axis) 123mm x 123mm 
[...] 
```

对于第一个屏幕和

```
TV_SVIDEO connected 1024x768+1680x104 (normal left inverted right x axis y axis) 123mm x 123mm
[...] 
```

第二个。可以在用 C 编写的程序中运行命令并对其进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-11T04:17:29.923

您可以使用`info->crtc`而不是`screen->crtcs[icrtc]`.

# c# - 将 SELECT 查询拉入数据表并访问它

> ID：13706079
> 
> 赞同：0
> 
> 时间：2012-12-04T15:18:21.187
> 
> 标签：c#, asp.net, database, datatable

我正在写一个小的 ASP.net C# 网页，它一直给我一个错误说明：位置 0 没有行。

我可能做错了，但这是我的一些代码：

```
string SqlQuery = "SELECT * ";
    SqlQuery += " FROM main_list";
    SqlQuery += " WHERE ID = @FindID";

    SqlConnection conn = new SqlConnection("server=???;database=contacts;User          
    ID=???;Password=???;");
    conn.Open();

SqlCommand SqlCmd = new SqlCommand(SqlQuery, conn);
SqlCmd.Parameters.Add("@FindID",searchID);

SqlDataAdapter da = new SqlDataAdapter(SqlCmd);

    try {
         da.Fill(dt);

         fillData(p);
    }
    catch {
         txtId.Text = "ERROR"; 
    } 
```

FillData 如下：

```
protected void fillData(int pos) {

    txtId.Text = dt.Rows[pos]["ID"].ToString();
    txtCompany.Text = dt.Rows[pos]["Company"].ToString();
    txtFirstName.Text = dt.Rows[pos]["First_Name"].ToString();
    txtLastName.Text = dt.Rows[pos]["Last_Name"].ToString();
    txtAddress1.Text = dt.Rows[pos]["Address1"].ToString();
    txtAddress2.Text = dt.Rows[pos]["Address2"].ToString();
    txtCity.Text = dt.Rows[pos]["City"].ToString();
    txtState.Text = dt.Rows[pos]["State"].ToString();
    txtZipCode.Text = dt.Rows[pos]["ZipCode"].ToString();
    txtPhoneNum1.Text = dt.Rows[pos]["Phone_Num"].ToString();
    txtPhoneNum2.Text = dt.Rows[pos]["Phone_Num2"].ToString();
    txtFax.Text = dt.Rows[pos]["Fax_Num"].ToString();
    txtEmail.Text = dt.Rows[pos]["Email"].ToString();
    txtNotes.Text = dt.Rows[pos]["Notes"].ToString();
    txtCategory.Text = dt.Rows[pos]["Category"].ToString();
    txtSubCategory.Text = dt.Rows[pos]["SubCategory"].ToString();
    txtDateAdded.Text = dt.Rows[pos]["DateAdded"].ToString();
    txtDateModified.Text = dt.Rows[0]["DateModified"].ToString();

} 
```

这是错误的调用：

```
protected void btnPrev_Click(object sender, EventArgs e) {
    p--;
    lblPage.Text = p.ToString();
    fillData(p-1);

}
protected void btnNext_Click(object sender, EventArgs e) {
    p++;
    lblPage.Text = p.ToString();
    fillData(p-1);
} 
```

我试图通过 Rows[0] 循环到 Rows[1] 或者有多少行，但它给了我关于位置 0 或位置 1 没有行的错误。它只填充一次然后出错。

编辑：在已经访问了一行之后，我正在尝试访问数据库返回的第二行。例如： Rows[0] 可以正常访问，但是当我尝试读取 Rows[1] 时它会出错并说它在位置 1 没有行。我可以修改代码以返回 Rows[1] 并且它可以工作但是当我尝试访问 Rows[0] 时它会中断。这就是为什么我将变量 (p) 传递给 fillData 以便它只能显示 Rows 值。谢谢！

编辑2：我相信这是因为有一个回发会擦除数据库检索到的值。即使在回发之后，有没有办法让数据库条目保持不变？如果不是，我猜我每次都必须查询数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:21:34.707

错误消息表明 SQL 没有返回任何行。你确定有数据要返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:23:23.063

当你使用`dt.Rows[0]`您实际上是在说“获取返回的第一行，并从中获取值”。如果 DataTable 没有任何行（即您的 SQL 查询没有返回匹配项），这就像说“这是一个没有苹果的盘子。拿第一个苹果，告诉我它是什么颜色” - 明白吗？没有意义。

您应该做的是在尝试阅读它们之前检查是否有任何行...

```
if(dt.Rows.Count > 0)
{
    // do stuff here.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:23:40.017

使用 Linq 和存储过程会更好

```
datacontext context = new datacontext();

var result = context.MyStoredProc(searchID).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:24:57.683

尝试改变

```
 SqlCmd.Parameters.Add("@FindID",searchID); 
```

至

```
 SqlCmd.Parameters.AddWithValue("@FindID",searchID); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T15:25:55.650

检查您对数据库的查询，确保实际返回了行。此外，像这样将查询直接放入代码中是不好的做法，尤其是在使用参数时。您可能想尝试这样的事情：

```
private Int32 CallStoredProcedure(Int32 FindId)
{
    using (var dt = new DataTable())
    {
        using (var conn = new SqlConnection(ConnectionString))
        {
            using (var sqlCmd = new SqlCommand("SEL_StoredProcedure", conn))
            {
                using (var sda = new SqlDataAdapter(sqlCmd))
                {
                    sqlCmd.CommandType = System.Data.CommandType.StoredProcedure;
                    sqlCmd.Parameters.AddWithValue("@FindId", FindId);
                    sqlCmd.Connection.Open();

                    sda.Fill(dt);
                }
            }
        }

        if (dt.Rows.Count == 1)
            return Convert.ToInt32(dt.Rows[0]["ID"]);
        else if (dt.Rows.Count > 1)
            throw new Exception("Multiple records were found with supplied ID; ID = " + studentId.ToString());
    }
    return 0;
} 
```

要设置您的存储过程，请在您的数据库上运行以下命令：

```
CREATE  procedure [dbo].[SEL_StoredProcedure]

@FindId int = null  
as
SELECT * FROM main_list where ID = @FindId 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-04T15:20:26.787

只需从代码中删除索引标识符：

例如

```
txtId.Text = dt.Rows["ID"].ToString(); 
```

# css - * css 选择器的实际性能影响是什么？

> ID：13706083
> 
> 赞同：0
> 
> 时间：2012-12-04T15:18:30.370
> 
> 标签：css, performance, css-selectors

> **可能重复：**
> [CSS 的通用选择器对性能有何影响？](https://stackoverflow.com/questions/2951997/what-is-the-performance-impact-of-csss-universal-selector)

我读过使用 * CSS 选择器并不理想，因为它需要更长的处理时间。然而，这真的是一个问题吗？如果我的 CSS 中有以下内容，显示页面需要多长时间？

```
#div1 *,
#div2 * {
float: none !important;
width: auto !important;
height: auto !important;
text-align: left;
position: static !important; 
} 
```

在我看来，图像等大型资产的连接速度和数量将会产生更大的影响。我所做的工作是针对移动优化，但页面大小（由于各种库）约为 750KB，对此我无能为力。

作为旁注，我知道使用 !important 也不是理想的，但是我继承的凌乱代码意味着在这种情况下需要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:21:53.947

[阅读这篇文章。](http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/)

> 优化 CSS 选择器的关键是关注最右边的选择器，也称为键选择器（巧合？）。这是一个更昂贵的选择器：A.class0007 * {}。虽然这个选择器可能看起来更简单，但浏览器匹配的成本更高。
> 
> 因为浏览器从右向左移动，它首先检查与键选择器“*”匹配的所有元素。这意味着浏览器必须尝试将此选择器与页面中的所有元素进行匹配。

# eclipse - RESTLET GAE ECLIPSE 初始化方法

> ID：13706084
> 
> 赞同：1
> 
> 时间：2012-12-04T15:18:32.583
> 
> 标签：eclipse, google-app-engine, initialization, restlet, init

我正在使用 Restlet、GAE 和 Eclipse 开发一个应用程序。好的，我得到了这个：

公共类 MainRestletApplication 扩展应用程序 {

```
public MainRestletApplication()
{
//init code?
} 

@Override
public Restlet createInboundRoot() {
    Router router = new Router(getContext());

    router.attach("/v1/mainstatus",MainStatus.class);
    router.attach("/v1/game/{id}/result",GameResult.class);

    return router;
} 
```

}

和这个：

```
<servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
        <param-name>org.restlet.application</param-name>
        <param-value>com.example.MainRestletApplication
        </param-value>
    </init-param>
</servlet>

<!-- Catch all requests -->
<servlet-mapping>
    <servlet-name>RestletServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

好吧，我可以在哪里放置一个方法来初始化 Web 服务，ergo，一些代码仅在应用程序启动时（一次）初始化一些数据，而不是在第一次调用时。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:43:25.003

无论您是否使用 Restlet，AppEngine 与否，您都可以在 web.xml 中的任何 servlet 环境中设置上下文侦听器，如下所示：

```
<listener>
    <listener-class>
        example.ServletContextExample
    </listener-class>
</listener> 
```

并执行此操作；

```
public class ServletContextExample implements ServletContextListener{
    ServletContext context;
    public void contextInitialized(ServletContextEvent contextEvent) {
        System.out.println("Context Created");
        context = contextEvent.getServletContext();
        // set variable to servlet context
        context.setAttribute("TEST", "TEST_VALUE");
    }
    public void contextDestroyed(ServletContextEvent contextEvent) {
        context = contextEvent.getServletContext();
        System.out.println("Context Destroyed");
    }
} 
```

当您在 GAE 上的实例启动时，将在处理调用之前执行初始化代码；另一方面，很可能会启动一个新实例，因为必须处理一个调用。鸡和蛋的故事……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:29:53.103

为此，您可以覆盖 com.example.MainRestletApplication 类的 start() 方法。它的生命周期与包装器 RestletServlet 同步。

# javascript - CSS / Javascript：如何在内联元素周围绘制最小边框？

> ID：13706091
> 
> 赞同：11
> 
> 时间：2012-12-04T15:18:44.043
> 
> 标签：javascript, html, css, firefox

考虑以下 HTML：

```
<p>This is a potentially large paragraph of text, which <span>may get 
wrapped onto several lines when displayed in the browser.
I would like to be able to draw a minimal</span> box round the span</p> 
```

我想在跨度周围画一个最小的边框。

那是：

*   如果span在单行上渲染，则边框相当于设置了一个CSS样式的border: 1px solid black；
*   如果跨度在多条线上呈现，则边界将围绕跨度的最外边缘绘制，而不是在它穿过的线之间。这相当于在 span 上设置 CSS 背景颜色，并在高亮区域的边缘绘制线条。

我相当有信心这不能单独使用原始 CSS 完成（在第二种情况下）。涉及 javascript 库或特定于 Firefox 的解决方案是可以接受的。

这是第二种情况的模型：

![场景二模拟](../Images/df8af4a430d96c84e148d46c77cb2f24.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T15:26:12.227

考虑添加大纲，而不是边框[​​ http://jsfiddle.net/tarabyte/z9THQ/](http://jsfiddle.net/tarabyte/z9THQ/)

```
span {
  outline: 2px solid black;   
} 
```

Firefox 在线条之间绘制轮廓。有一个解决方法：http: [//jsfiddle.net/z9THQ/2/](http://jsfiddle.net/z9THQ/2/)

```
.wrapped {
   outline: 2px solid black;
}

.wrapped span {
    border: 1px solid white;
    background-color: white;
    position: relative;
    z-index: 1000;
}
```

```
<p>
   This is a potentially large paragraph of text, which 
      <span class="wrapped"><span> 
        may get wrapped onto several lines when displayed in the browser. I would like to be able to draw a minimal
      </span></span> 
   box round the span
</p>
```

# iphone - 无法从自定义表格视图单元格按钮中删除行

> ID：13706093
> 
> 赞同：0
> 
> 时间：2012-12-04T15:18:50.370
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个带有自定义 tableviewCell 的 tableview。在这个 tableview 单元格中，我有一个用于删除一行的按钮。

首先，我通过以下代码创建这个 tableview。

```
 UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 70, 320, 150) style:UITableViewStylePlain];
    tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    tableView.delegate = self;
    tableView.dataSource = self;
    tableView.backgroundColor = [UIColor blackColor];
    tableView.separatorStyle = normal;
    [tableView reloadData]; 
```

我有一个约会数组，用作我的数据源。在我的 cellForRowAtIndex 中，我使用以下代码将按钮附加到操作。

```
 cell.btnDelete.tag = indexPath.row;
    [cell.btnDelete addTarget:self action:@selector(deleteAppointment:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后我有自己的行动。

```
-(void)deleteAppointment:(id) sender{
        NSLog(@"till here");
    UIButton *button = (UIButton *)sender;
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:button.tag inSection:0];
    NSLog(@"indexpathc: %d",indexPath.row);

    [tableView beginUpdates];
    [tableView deleteRowsAtIndexPaths: [NSArray arrayWithObject:indexPath]
                     withRowAnimation: UITableViewRowAnimationFade];
    [_exceptions removeObjectAtIndex:indexPath.row];
    [tableView endUpdates];
} 
```

它在我的日志中返回正确的索引路径，但它不会删除我的 tableview 中的行。有谁能够帮助我？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:24:12.003

您还需要更新方法`numberOfRowsInSection`。例如，如果您将元素保存在数组中，请从中删除一个元素并返回更新后的数组`numberOfRowsInSection`。

# gradle - 使用 gradle 排除 FAT jar 中不必要的 jar

> ID：13706094
> 
> 赞同：2
> 
> 时间：2012-12-04T15:18:57.037
> 
> 标签：gradle

我正在使用 gradle-1.3 版本构建 FAT jar，并使用以下属性构建 FAT jar

```
jar {
    from configurations.compile.collect { it.isDirectory() ? it : zipTree(it)
 } 
```

依赖项如下

```
dependencies {
  compile fileTree(dir:'/trunk/Solutions/Seismic/Source/Binaries/CommonFunctions/build/libs', include: '*.jar')
  compile "org.apache.hadoop:hadoop-core:1.0.3"
  compile "commons-collections:commons-collections:3.2.1"
  compile "commons-configuration:commons-configuration:1.6"
  compile "commons-discovery:commons-discovery:0.2"
  compile "commons-lang:commons-lang:2.4"
  compile "commons-logging:commons-logging:1.1.1"
  compile "commons-logging:commons-logging:1.0.4"
  compile "log4j:log4j:1.2.16"
  compile "com.vividsolutions:jts:1.8"
  compile "commons-net:commons-net:1.4.1"
  compile "org.apache.hadoop:hadoop-core:1.0.3"
  compile "commons-httpclient:commons-httpclient:3.0.1"
  compile "org.mortbay.jetty:servlet-api:2.5-20081211"
  compile "org.apache.hbase:hbase:0.94.0"
  compile "org.apache.zookeeper:zookeeper:3.4.3"
} 
```

但仍然由 jar 包含在以下 jar 中作为参考

杰伊，
jline，
jni，
jnr，
jruby，
junit，
junit3.8.1

但我不想包括这些罐子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:28:39.853

您可以通过将其添加到构建的底部来排除依赖项：

```
configurations.all*.dependencies*.withType(ModuleDependency)*.each {
  it.exclude group: "org.jline", module: "jline"
  it.exclude ...
} 
```

这将遍历所有配置的依赖关系并排除您不想包含的模块。

如果你想排除所有传递依赖，在编译配置中将传递性设置为 false 会更容易：

```
configurations.compile.transitive = false 
```

# c++ - C++，从“int*”到“int”的错误无效转换

> ID：13706095
> 
> 赞同：5
> 
> 时间：2012-12-04T15:18:59.700
> 
> 标签：c++

我有以下 C++ 代码：

```
#include <iostream>
using namespace std;
int main(){
}
int findH(int positionH[]){
    return positionH;         //error happens here.
} 
```

编译器抛出错误：

```
invalid conversion from `int*' to `int' 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:22:56.067

`positionH[]`是一个数组，它的返回类型是`int`.

编译器不会让你这样做。将参数设为 int：

```
int findH(int positionH){
    return positionH;        
} 
```

或者使返回类型成为一个指向 int 的指针：

```
int* findH(int positionH[]){
    return positionH;        
} 
```

或者在返回之前将数组转换为整数：

```
int findH(int positionH[]){
    return positionH[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:45:32.413

此行是无效的 C++（并且也是无效的 C，您的代码似乎是用它编写的）：

```
int bla[2] = findH(field, positionH); 
```

bla 是一个由 2 个元素组成的数组，不能以这种方式初始化。findH 返回整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-21T07:51:44.523

在您尝试执行以下操作时出现此错误：

```
int *p =10; 
```

这意味着您正在`int`为 pointertoint 赋值`*p`。

`*p`但是指针是存储地址，这意味着`10`作为地址。

所以就这样做：

```
int i=10;
int *p=&i; 
```

或者

```
p=&i; 
```

它不会给出任何错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:23:50.517

错误是因为您返回了一个指针而编译器需要一个 int。

int * 和 int 之间有很大的区别。

还有你为什么要返回positionH，数组是通过引用传递的，不需要返回它。

更好的代码将是

```
void option1(char** field, int[])   
   {
     int  findH(char **, int[]); 
     int positionH[2];
    findH(field, positionH);
      //positionH passed by reference, no need to return it
    }

void  findH(char **field, int positionH[])
{
    for(int n = 0;n < 14 ; n++)
    {
        for(int m = 0; m < 14; m++)
        {
                   if(field[m][n] == 'H')
                   {

                   positionH[0] = n;
                   positionH[1] = m;

        }
         }
    }

} 
```

# jquery - 使用 jQuery Cycle 插件的幻灯片图像

> ID：13706097
> 
> 赞同：2
> 
> 时间：2012-12-04T15:19:01.087
> 
> 标签：jquery, jquery-cycle

我正在尝试使用 jQuery Cycle Plugin 幻灯片放映图像，但它不起作用。如何使其可运行。

包含的脚本

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="https://malsup.github.com/jquery.cycle.all.js"></script> 
```

CSS：

```
 .pics {  
            height:  232px;  
            width:   232px;  
            padding: 0;  
            margin:  0;  
        } 

        .pics img {  
            padding: 15px;  
            border:  1px solid #ccc;  
            background-color: #eee;  
            width:  200px; 
            height: 200px; 
            top:  0; 
            left: 0 
        } 
```

脚本：

```
 $(function(){
        $('.pics').cycle('fade');
    });​ 
```

图片区

```
 <div class="pics">
                <img src="http://davealger.info/i/1.jpg"  width="200" height="200"  />
                <img src="http://davealger.info/i/2.bmp"  width="200" height="200"  />
                <img src="http://davealger.info/i/3.png"  width="200" height="200" />
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:21:51.170

更改`https://malsup.github.com/jquery.cycle.all.js`为`http://`- 或者更好的是，下载插件并节省他可怜的服务器。Google 使用大容量 CDN；他没有。

[http://jsfiddle.net/mblase75/ZSJqh/](http://jsfiddle.net/mblase75/ZSJqh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:55:28.267

如果您设置不将脚本下载到本地，请保持最新。

1.  Cycle.js 被移动。
2.  不要使用 http:// 或 https://

在这里，这是取自网站的演示并编辑了一点：

```
<!-- include jQuery library -->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<!-- include Cycle plugin -->
<script type="text/javascript" src="//cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' 
    });
});
</script> 
```

请注意，cycle.js 的位置
查看演示的源代码是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:21:34.430

```
$(function(){
    $('.pics').cycle({fx: 'fade'});
});​ 
```

请参阅文档： http: [//malsup.com/jquery/cycle/](http://malsup.com/jquery/cycle/)

# vim - Vim：Alt + 箭头键在一行内移动选择

> ID：13706098
> 
> 赞同：2
> 
> 时间：2012-12-04T15:19:02.383
> 
> 标签：vim, selection, move, arrow-keys

我使用这些键将文本**块**（或整行）向左或向右移动：

向左移动块：

`nmap <C-A-Left> <<`
`vmap <C-A-Left> <gv`

向右移动块：

`nmap <C-A-Right> >>`
`vmap <C-A-Right> >gv`

但是这些命令只能将块或整行向左或向右移动。

我经常在一行中选择两个或三个单词，我想向左或向右移动。有谁知道如何使用`Alt - Left`and`Alt - Right`键在一行内移动选定的文本？

**更新：**

作为上述命令，我想将选择移到实际的文本 pe

| | = 选择

`one |two three| four five six seven`
`one four |two three| five six seven`
`one four five |two three| six seven` `

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:56:41.287

如果你的意思是移动（相对于“行内缩进”），这在[这个 Vim Tips Wiki page](http://vim.wikia.com/wiki/Drag_words_with_Ctrl-left/right)中有描述；使用以下映射：

```
:vnoremap <A-Right> lholhxp`[1v<Space>
:vnoremap <A-Left> hlohlxhP`[1v<Space> 
```

请注意，这些是用于`:set selection=exclusive`; 如果您使用默认值 ( )，请从 RHS`inclusive`中删除尾随。`<Space>`

# mysql - MySQL 不会 ORDER BY 瑞典语字符 åäö 不工作，即使排序规则是正确的

> ID：13706099
> 
> 赞同：3
> 
> 时间：2012-12-04T15:19:06.253
> 
> 标签：mysql, collation

这个查询：

`SELECT customer_id, customer_name FROM customers WHERE isActive = '1' ORDER BY customer_name ASC`

输出：

```
+-------------+-----------------------+
| customer_id | customer_name         |
+-------------+-----------------------+
|           1 | Äname                 |
|           2 | Aname                 |
|           3 | Bname                 |
+-------------+-----------------------+ 
```

为什么即使我有排序规则，它也不对特殊的瑞典字符进行排序`utf8_swedish_ci`

```
SHOW TABLE STATUS FROM myDatabase WHERE name = 'customers';

+-------------+----------------------------+
| Name        | Engine   | Collation       |
+-------------+----------------------------+
| customers   | MyISAM   | utf8_swedish_ci |
+-------------+----------------------------+ 
```

我什至尝试将排序规则放在我的查询中：

```
SELECT * FROM customers WHERE isActive = 1 COLLATE utf8_swedish_ci ORDER BY customer_name ASC 
```

但后来我得到：

```
Error Code: 1253\. COLLATION 'utf8_swedish_ci' is not valid for CHARACTER SET 'binary' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:28:59.917

不知道默认行为，但[正确的语法](http://dev.mysql.com/doc/refman/5.5/en/charset-collate.html)是：

```
SELECT customer_id, customer_name
FROM customers
WHERE isActive = '1'
ORDER BY customer_name COLLATE utf8_swedish_ci ASC 
```

# android - HttpResponseCache 和没有互联网连接

> ID：13706101
> 
> 赞同：1
> 
> 时间：2012-12-04T15:19:09.997
> 
> 标签：android, connection, httpresponse

如果没有互联网连接，应用程序应提供来自服务器的最后数据。使用 HttpResponseCache 作为保存所有 http 请求以在离线模式下使用它们的工具是个好主意吗？

现在，当我禁用 Internet 连接时，出现异常：

```
java.net.UnknownHostException: Unable to resolve host 
```

我应该将数据写入磁盘，并在离线模式下使用它吗？

PS我配置了HttpResponseCache，并使用HttpURLConnection：

```
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.addRequestProperty("Cache-Control", "max-stale=" + maxStale);
connection.setReadTimeout(10000);
connection.setConnectTimeout(15000);
connection.setRequestMethod("GET");
connection.setUseCaches(true);
connection.setDoInput(true);
connection.connect(); 
```

# android - 当底层数据发生变化时，根据 SQlite 数据库中的数据更新 FragmentList 适配器

> ID：13706103
> 
> 赞同：2
> 
> 时间：2012-12-04T15:19:09.987
> 
> 标签：android, fragment, listadapter

我有一个具有 MyListFragment 类扩展 ListFragment 的 android 应用程序（在支持库下运行）。这是创建 ListAdapter 的代码：

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);      
   DbHelperEvent dbHelper = new DbHelperEvent(getActivity());
   ArrayList<ReportEvent> events = new ArrayList<ReportEvent>();
   events = dbHelper.getAllEvents();
   dbHelper.close();

   this.adapterAllEvents = new ArrayAdapter<ReportEvent>(getActivity(), android.R.layout.simple_spinner_item, events);
   this.adapterAllEvents.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
   setListAdapter(adapterAllEvents);} 
```

但底层数据随时可能发生变化，我需要检测到这种变化并更新 ListAdapter。但我不知道应该用什么来检测这些变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:39:57.153

这取决于：

*   如果您的数据库始终相同，并且您只需要检测 adapterAllEvents 中的更改，请在 adaper 上调用 notifyDataSetChanged()

*   如果您的数据在 DB 中发生变化，您可以使用 CursorLoader 和 LoaderManager.LoaderCallbacks 获取 Cursor 对象以传递给 CursorAdapter。当你的数据改变时调用 restartLoader

# php - Magento Varien_Data_form 按钮值始终为空

> ID：13706107
> 
> 赞同：0
> 
> 时间：2012-12-04T15:19:27.627
> 
> 标签：php, magento, magento-1.7, magento-1.6

我有一个自定义模块，里面：/Block/Adminhtml//Edit/Tab/Form.php

我正在添加一堆与表格中的字段相关的字段 - 一切都很好而且花花公子。

但是，我在页面上有一个执行一些 JavaScript 的按钮，如下所示：

```
$fieldset->addField('trigger', 'submit', array(
    'name' => 'trigger',
    'label' => 'test',
    'value' =>  Mage::helper('modulename')->__('Submit'),
    'style' => 'width:100px;',
    'onclick' => $this->getProductChooserURL(),
)); 
```

现在，对于我的生活，我无法设置该按钮的值 - 目前，它只是显示为一个空白的 html 按钮 - 我只是想让它在上面说些什么！

其他人在这里遇到了类似的问题：http: [//www.magentocommerce.com/boards/viewthread/283801/#t397177](http://www.magentocommerce.com/boards/viewthread/283801/#t397177)

但我无法理解解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:57:15.373

您好，如果您想调用 javascript 以下代码可能会对您有所帮助

```
 $eventElemall=$fieldset->addField('trigger', 'submit', array(
'name' => 'trigger',
'label' => 'test',
'value' =>  Mage::helper('modulename')->__('Submit'),
'style' => 'width:100px;',
'onclick' => "getProductChooserURL()",
 ));
  $eventElemall->setAfterElementHtml('
    <script type="text/javascript">
  function getProductChooserURL(){
  document.getElementById("trigger").value }
 </script>'); 
```

# c# - LINQ GroupBy：表达式树中的“进入 GroupName”在哪里？

> ID：13706111
> 
> 赞同：1
> 
> 时间：2012-12-04T15:19:46.260
> 
> 标签：c#, linq, group-by, iqueryable

假设：

```
var qry = from elem in SomeData
          group elem by elem.SomeMember into GroupName
          select new { Key = GroupName.Key.SomeMember, Count = GroupName.Count()}; 
```

在导航生成的表达式树 ( `SomeData`is `IQueryable`) 时，我看到表示`select`Method-Call 的 Expression 指的是`GroupName`，但是，当查看表示 的 Expression 时，我在其任何成员中`group by`都找不到任何提及。`GroupName`它去哪儿了？如果在表达式树中省略了它，为什么它会消失；不应该在被引用之前定义它吗？

# c++ - OpenGL纹理未显示

> ID：13706112
> 
> 赞同：0
> 
> 时间：2012-12-04T15:19:52.203
> 
> 标签：c++, qt, opengl, textures, uv-mapping

当我创建我的立方体并尝试对其应用纹理时，未应用纹理但 opengl 返回一个黑色立方体，纹理显示为黑色。我正在使用QT，这是代码：

（我正在使用 QT）

**创建纹理函数：**

```
GLuint AOpenGlWidget::textureFromRsc(QString place){
// Read the bmp file
QImage img(place);
QImage tb;

QImage fixedImage( img.width(), img.height(), QImage::Format_ARGB32);
QPainter painter(&fixedImage);
painter.setCompositionMode(QPainter::CompositionMode_Source);
painter.fillRect(fixedImage.rect(), Qt::transparent);
painter.setCompositionMode(QPainter::CompositionMode_SourceOver);
painter.drawImage( 0, 0, img);
painter.end();

tb = QGLWidget::convertToGLFormat(fixedImage);

GLuint textureId;
glGenTextures(1,&textureId);
glBindTexture(GL_TEXTURE_2D,textureId);

glTexImage2D(GL_TEXTURE_3D,0,4,tb.width(),tb.height(),0,GL_RGBA,GL_UNSIGNED_BYTE,tb.bits());

if(!tb.bits()){
    QMessageBox::information(0,"Texture loading error.","There was an error while trying to load a texture.");
}

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

return textureId;
} 
```

**画图功能：**

```
void AOpenGlWidget::paintGL(){
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clears the screen and paint the bg with the color specified on glClearColor

// Another stuff (MVP Matrix... bla bla bla)

glUseProgram(programId);

GLuint MatrixId = glGetUniformLocation(programId,"MVP");
glUniformMatrix4fv(MatrixId,1,GL_FALSE,glm::value_ptr(MVP));
glActiveTexture(cursor_texture);
glBindTexture(GL_TEXTURE_2D,cursor_texture);

glUniform1i(glGetUniformLocation(programId,"textura"),cursor_texture);
// Draw or triangles

glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);   

glBindBuffer(GL_ARRAY_BUFFER,trianglebuffer[0]);
glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,(void*)0);

glBindBuffer(GL_ARRAY_BUFFER,trianglebuffer[1]);
glVertexAttribPointer(1,2,GL_FLOAT,GL_FALSE,0,(void*)0);

glDrawArrays(GL_TRIANGLES,0,12*3);

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);
} 
```

**缓冲区：**
*trianglebuffer[1]（UV坐标）：*

```
const GLfloat simple_triangle_buffer_txcoord[] = {
     0.0f,0.0f,
     0.0f,1.0f,
     1.0f,1.0f,
     1.0f,1.0f,
     1.0f,0.0f,
     0.0f,0.0f,
    0.0f,0.0f,
     0.0f,1.0f,
     1.0f,1.0f,
     1.0f,1.0f,
     1.0f,0.0f,
     0.0f,0.0f,
     0.0f,0.0f,
     0.0f,1.0f,
     1.0f,1.0f,
     1.0f,1.0f,
     1.0f,0.0f,
     0.0f,0.0f,
     0.0f,0.0f,
     0.0f,1.0f,
     1.0f,1.0f,
     1.0f,1.0f,
     1.0f,0.0f,
     0.0f,0.0f,
     0.0f,0.0f,
     0.0f,1.0f,
     1.0f,1.0f,
     1.0f,1.0f,
     1.0f,0.0f,
     0.0f,0.0f,
     0.0f,0.0f,
     0.0f,1.0f,
     1.0f,1.0f,
     1.0f,1.0f,
     1.0f,0.0f,
     0.0f,0.0f
}; 
```

**缓冲区：**
*三角形缓冲区[0]（立方体）：*

```
const GLfloat simple_triangle_buffer[] = {
    // Front
    -1.0f,1.0f,1.0f,
    -1.0f,-1.0f,1.0f,
    1.0f,-1.0f,1.0f,
    1.0f,-1.0f,1.0f,
    1.0f,1.0f,1.0f,
    -1.0f,1.0f,1.0f,

    // Top
    -1.0f,1.0f,-1.0f,
    -1.0f,1.0f,1.0f,
    1.0f,1.0f,1.0f,
    1.0f,1.0f,1.0f,
    1.0f,1.0f,-1.0f,
    -1.0f,1.0f,-1.0f,

    // Left
    -1.0f,1.0f,1.0f,
    -1.0f,1.0f,-1.0f,
    -1.0f,-1.0f,-1.0f,
    -1.0f,-1.0f,-1.0f,
    -1.0f,-1.0f,1.0f,
    -1.0f,1.0f,1.0f,

    // Back
    -1.0f,1.0f,-1.0f,
    -1.0f,-1.0f,-1.0f,
    1.0f,-1.0f,-1.0f,
    1.0f,-1.0f,-1.0f,
    1.0f,1.0f,-1.0f,
    -1.0f,1.0f,-1.0f,

    // Bottom
    -1.0f,-1.0f,1.0f,
    1.0f,-1.0f,1.0f,
    -1.0f,-1.0f,-1.0f,
    -1.0f,-1.0f,-1.0f,
    1.0f,-1.0f,1.0f,
    1.0f,-1.0f,-1.0f,

    // Right
    1.0f,1.0f,1.0f,
    1.0f,-1.0f,1.0f,
    1.0f,-1.0f,-1.0f,
    1.0f,-1.0f,-1.0f,
    1.0f,1.0f,-1.0f,
    1.0f,1.0f,1.0f

}; 
```

和着色器（Frag & Vert）：

```
// Fragment
#version 330 core
out vec3 color;
in vec2 thcoord;
in vec2 UV;
uniform sampler2D d_textura;
void main(){
color = texture(d_textura,thcoord).rgb;
}
// Vertex
#version 330 core
layout(location = 0) in vec3 vertexPosition_modelspace;
layout(location = 1) in vec2 tcoord;
out vec2 thcoord;
uniform mat4 MVP;
void main(){
vec4 v = vec4(vertexPosition_modelspace,1);
thcoord=tcoord;
gl_Position = MVP * v;
} 
```

对我来说理解UV坐标有点困难......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:29:49.910

你的 glTexImage2D 调用错了吗？

glTexImage2D( **GL_TEXTURE_3D** ,0,4,tb.width(),tb.height(),0,GL_RGBA,GL_UNSIGNED_BYTE,tb.bits()); ?

# javascript - Android 4.0.3 模拟器：连接服务器不成功

> ID：13706120
> 
> 赞同：0
> 
> 时间：2012-12-04T15:20:14.803
> 
> 标签：javascript, html, cordova, android-emulator

模拟器 android 4.0.3 有问题，它可以在 android 模拟器 2.2、2.3.3 上工作，但在模拟器 4.0.3 上得到 与服务器的连接不成功。( `file:///android_asset/www/index.html`)，使用 phonegap 2.2.0

```
public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
        super.setIntegerProperty("loadUrlTimeoutValue", 6000);
    } 
```

找了几天没有找到答案，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:14:46.873

只需将此行移动到`super.setIntegerProperty("loadUrlTimeoutValue", 6000);`以下位置：

```
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     super.setIntegerProperty("loadUrlTimeoutValue", 6000);
     super.loadUrl("file:///android_asset/www/index.html");
 } 
```

希望对你有效。

# ios - 将 UISearchBar 添加到嵌入到 NavigationController IOS6 中的 UICollectionviewController

> ID：13706122
> 
> 赞同：5
> 
> 时间：2012-12-04T15:20:19.407
> 
> 标签：ios, uinavigationcontroller, uisearchbar, uicollectionview

我想向 UICollectionViewController 添加一个搜索栏，其嵌入方式如下： UItabbarController > UINavigationbarController > UICollectionViewController > SearchBar (!) 在此视图中，搜索栏将替换 NavigationBar。

在相同的设计下，如果我使用 UITableViewController 测试上述内容，搜索栏会显示得很好（以编程方式和通过情节提要）

问题是当我使用 StoryBoard 框架时，我无法在 UICollectionViewController 上添加搜索栏；它只是位于视图的中间，我不知道如何将它移到顶部。另外，它总是出现在 UICollectionview 下方，所以它是不可见的。

因此，以编程方式采取另一条路线：

```
-(void)viewWillAppear:(BOOL)animated{
self.searchBarTop = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
[self.searchBarTop setPlaceholder:@"Enter your command here"];
self.searchDC = [[UISearchDisplayController alloc]initWithSearchBar:self.searchBarTop contentsController:self];
self.searchBarTop.delegate = self;

[[self navigationController] setNavigationBarHidden:NO animated:animated];
[self.navigationController.navigationBar addSubview:self.searchBarTop];
} 
```

有了这个，搜索栏显示得很好。但不幸的是，当我输入一些文本时，它会在视图上方消失 - 大概是因为底层 navBar 这样做了 - （不知道为什么......）

我不确定为什么搜索栏对 UITableViewController 很好，以及为什么对 UICollectionViewController 来说如此痛苦。也就是说，任何人都知道为什么搜索栏/导航栏消失了，我该如何解决？

欢迎任何解决方案..

谢谢 ！-一个

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T21:50:17.477

我使用以下代码将 UISearchBar 添加到 UICollectionViewController。不幸的是，我无法让 UISearchDisplayController 工作。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, CGRectGetWidth(self.collectionView.frame), 44)];
    self.searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    self.searchBar.delegate = self;
    [self.collectionView addSubview:self.searchBar];
    [self.collectionView setContentOffset:CGPointMake(0, 44)];
}

- (void) viewWillAppear:(BOOL)animated{
    // to show search bar
    [self.collectionView setContentOffset:CGPointMake(0, 0)];
    // to hide search bar
    [self.collectionView setContentOffset:CGPointMake(0, 44)];
}

-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    [searchBar setShowsCancelButton:YES animated:YES];
}

-(void)searchBarCancelButtonClicked:(UISearchBar *)searchBar {
    [searchBar setText:@""];
    [searchBar setShowsCancelButton:NO animated:YES];
    [searchBar resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T15:42:34.413

添加一个标题并将其放入`SearchBar`其中（这就是我过去所做的）。话虽如此，我已经养成了几乎从不使用 a `UITableViewController`（除非我正在实现 a `StaticCell` `TableView`）或 a的习惯`UICollectionViewController`。我的建议是实施一个标准`UIViewController`，然后添加你的`UICollectionView`. `CollectionView`缩小一些尺寸并将其放在`SearchBar`顶部。这使您可以`SearchBar`始终显示一个（我的用户通常更喜欢滚动到顶部来更改、编辑搜索）

# xml - XML Schema相同元素在不同序列中不同类型的选择导致类型错误

> ID：13706124
> 
> 赞同：4
> 
> 时间：2012-12-04T15:20:23.263
> 
> 标签：xml, schema

我继承了一些在 2004 年最后更新的 XML Schema。从那时起它一直在工作，但是软件更新导致了一些问题。xml 不再在 XMLspy 中验证。

无论如何，问题似乎是通过定义具有不同名称的几个不同 simpleTypes 来定义元素的当前方法是不正确的。我不明白如何解决这个问题。

使用 XMLspy 2004 打开文件，xml 验证得很好。

使用 lastes XMLspy 打开文件我收到以下错误：

```
Element 'Element' is not consistent with element 'Element'.
    Details:
         cos-element-consistent.2: Both type definitions ('type2' and 'type1') must have the same name 
```

注意：以下 XML/Schema 不是**实际**的xml。我重新创建了它并对其进行了概括以防止任何类型的问题（在这里发布现场节目的内部工作有点不受欢迎）。所以，如果你看到一个错字，那是我的错，而不是 Schema 的错。

XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Package xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <FirstElement></FirstElement>
    <SecondElement>
        <Element></Element>
        <Parameters>
            <Param value="#Value#">name1</Param>
        </Parameters>
    </SecondElement>
</Package> 
```

给我的 XML 模式会产生错误：

```
<?ml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Package">
        <xs:complexType>
            <xs:choice>
                <xs:sequence>
                    <xs:element name="FirstElement"/>
                    <xs:element name="SecondElement">
                        <xs:complexType>
                            <xs:group ref="Group1"/>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
                <xs:sequence>
                    <xs:element name="FirstElement"/>
                    <xs:element name="SecondElement">
                        <xs:complexType>
                            <xs:group ref="Group2" />
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:choice>
        </xs:complextype>
    </xs:element>
    <xs:group name="Group1">
        <xs:choice>
            <xs:sequence>
                <xs:element name="Element" type="type1"/>
            </xs:sequence>
            <xs:sequence>
                <xs:element name="Element" type="type2"/>
            </xs:sequence>
            <xs:sequence>
                <xs:element name="Element" type="type3"/>
            </xs:sequence>
        </xs:choice>
    </xs:group>
    <xs:group name="Group2">
        <xs:choice>
            <xs:sequence>
                <xs:element name="Element" type="type1"/>
            </xs:sequence>
            <xs:sequence>
                <xs:element name="Element" type="type4"/>
                <xs:element name="Parameters" minOccurs="0">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="Param">
                                <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                        <xs:enumeration value="TRUE"/>
                                        <xs:enumeration value="FALSE"/>
                                    </xs:restriction>
                                </xs:simpleType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:choice>
    </xs:group>

    <xs:simpleType name="type1">
        <xs:restriction base="xs:string">
            <xs:enumeration value="ONE"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="type2">
        <xs:restriction base="xs:string">
            <xs:enumeration value="TWO"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="type3">
        <xs:restriction base="xs:string">
            <xs:enumeration value="THREE"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="type4">
        <xs:restriction base="xs:string">
            <xs:enumeration value="FOUR"/>
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

如果有人给我一些关于如何在使 XML 有效的同时保持逻辑模式检查的见解，那就太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T09:36:26.880

发布 David W 的评论作为答案，以增加新成员或访客的可读性。

> 您进入了“共现约束”的复杂世界。这是您想要根据元素的兄弟姐妹限制元素的地方。有几种方法：XSL 错误解析、Schematron 和 XML Schema 1.1。最简单的做法是将约束作为业务逻辑放入应用程序中。
> 这[是一个 wiki 链接](http://www.w3.org/wiki/Co-occurrence_constraints)以获取更多信息。

# c - 在 nm 报告中验证符号更改的简单方法

> ID：13706127
> 
> 赞同：1
> 
> 时间：2012-12-04T15:20:28.983
> 
> 标签：c, gcc, binary, symbols, nm

我正在使用 Suse`gcc`编译器编译我的库（C 编程），然后生成`nm`该库的报告。我必须将该 nm 报告与以前的版本库进行比较，以检查当前版本库中存在和不存在的符号。

```
nm libxxx0.1.a > nm_0.1.txt
nm libxxx0.2.a > nm_0.2.txt 
```

现在我只是用一些文本比较工具比较`nm_0.1.txt`和文件。`nm_0.2.txt`除了符号差异之外，我也得到了偏移差异。我不担心偏移差异。

是否有任何命令（在 windows 或 suse 中）可用于以简单的方式仅突出显示 nm 报告中的符号差异。

注意：生成的 nm 报告会非常大。手动打开该文本文件并使用某些工具删除该 nm 报告的第一列对于那个大 nm 文件来说不是一件容易的事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:29:16.757

这是针对 Linux 的。您必须首先准备和排序您的 nm 输出

```
nm -g libxxx0.1.a | awk '{print $3}' | sort -u >nm_0.1.txt
nm -g libxxx0.2.a | awk '{print $3}' | sort -u >nm_0.2.txt 
```

如果您对*所有*符号感兴趣，请忽略`-g`并使用`cut`而不是`awk`

```
nm libxxx0.1.a | cut -c20- | sort -u >nm_0.1.txt
nm libxxx0.2.a | cut -c20- | sort -u >nm_0.2.txt 
```

然后你可以用`diff`

```
diff -U0 nm_0.1.txt nm_0.2.txt 
```

或者`comm`

```
comm -3 nm_0.1.txt nm_0.2.txt 
```

# ruby - Capybara + RSpec，spec/features 目录被 rspec 忽略。命令？

> ID：13706129
> 
> 赞同：8
> 
> 时间：2012-12-04T15:20:33.323
> 
> 标签：ruby, testing, rspec, capybara, rspec-rails

我按照[此处](https://github.com/jnicklas/capybara)的简短指南使用带有 rspec 的新 Capybara DSL 并且添加到目录的测试*单独*`spec/features`运行良好，即。

 *`rails_project$ rspec spec/features/my_first_feature.rb`

但是，当我尝试像这样对整个目录运行测试时，该`spec/features`目录将被**完全忽略：**`spec/`

`rails_project$ rspec .`

指南中没有提到如何包含这个目录（或其他目录）来完成我想要的这个*包含*。我真的需要这个来持续集成我的项目。

谁能告诉我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T16:12:06.587

您需要确保所有规范都以`_spec.rb`.

将文件名更改为`spec/features/my_first_feature_spec.rb`

我就是这样做的：

```
rspec spec 
```

您可能还想使用`guard-rspec`，它可以让您更好地控制。*

# python - Python 正则表达式字符串替换

> ID：13706135
> 
> 赞同：0
> 
> 时间：2012-12-04T15:21:00.903
> 
> 标签：python, regex

我正在寻找一种使用正则表达式来替换这样的字符串的方法：

```
The quick #[brown]brown#[clear] fox jumped over the lazy dog. 
```

和

```
The quick <a style="color:#3B170B">brown<a style="color:#FFFFFF"> fox jumped over the lazy dog. 
```

然而，颜色代码是从类似的东西中挑选出来的

```
color_list = dict(
                 brown = "#3B170B",
                 .....
                 clear = "#FFFFFF",
                 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:35:05.147

[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)是你需要的。它采用替换字符串或函数作为其第二个参数。这里我们提供了一个函数，因为生成替换字符串需要的部分是字典查找。

```
re.sub(r'#\[(.+?)\]', lambda m:'<a style="color:%s">' % colors[m.group(1)], s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:24:23.757

粗略的伪 python 解决方案如下所示：

```
for key, value in color_list.items()
  key_matcher = dict_key_to_re_pattern( key )
  formatted_value = '<a style...{0}...>'.format( value )
  re.sub( key_matcher, formatted_value, your_input_string )

def dict_key_to_re_pattern( key ):
   return r'#[{0}]'.format( key ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:28:05.350

只需一行精美的 python 就可以提供帮助：

```
reduce(lambda txt, i:txt.replace('#[%s]'%i[0],'<a style="color=%s;">'%i[1]),colors.items(),txt) 
```

# android - 使用 Phonegap 离线显示和导航大型自定义地图

> ID：13706136
> 
> 赞同：7
> 
> 时间：2012-12-04T15:21:07.727
> 
> 标签：android, cordova, maps, offline

我的问题是如何在离线的 Phonegap 应用程序中有效地显示大型自定义地图，允许它们平滑地平移和缩放，同时仍然支持旧的移动设备？

我正在开发一个移动应用程序，该应用程序涉及使用地理定位来导航偏远地区的步行路线，用户可能没有信号，因此没有互联网连接。重要的是该应用程序与 Android 2.2+（因此 SVG 不是一个选项）以及 iOS4+ 兼容。

我已经使用 Adob​​e Illustrator 以适合每条路线的分辨率绘制了自定义矢量图，平均约为 2000x2000 像素，而迄今为止最大的图像为 4000x2400 像素。

我选择使用 Phonegap/JQM 而不是原生，因为我来自网络编程背景，这似乎是启动和运行用户界面的最快方法，而无需过多研究原生代码，尽管我已经使用本机代码编写了几个 Phonegap 插件，用于电源和屏幕管理。

应用程序需要允许用户在原始图像大小的大约 25% 到 200% 之间平移（通过拖动）和放大/缩小（通过捏合）地图。

我所做的大部分测试都是在运行 Android 2.3.3 的 HTC Desire 和运行 Android 2.2 的 HTC Wildfire 上进行的，因为这些可能是应用程序必须运行的最低规格设备。

我已经尝试了各种显示地图的方法（详情如下），但到目前为止，每种方法都被证明不适合目的，因为应用程序的内存使用量太大，所需的存储空间使应用程序太大而无法下载或CPU 使用率太高，导致平移/缩放时出现延迟。

任何建议都非常感谢。提前致谢。

* * *

我尝试过的方法：

**1.使用标签将地图显示为光栅PNG**

这是我尝试的第一种方法。将 4000x2400 像素的图像从 Illustrator 导出为 128 色 PNG-8 会生成一个 746Kb 的文件。我通过相对于视口绝对定位图像来平移图像，并通过缩放标签的宽度/高度属性来缩放图像。这种方法的问题在于，即使在 1:1 的缩放级别下，Android 应用程序使用 60Mb 的 RAM 来存储图像，放大到 200% 会导致这增加 120Mb，从而导致应用程序在 HTC Wildfire 上崩溃。

**2\. 使用 HTML5 画布显示光栅 PNG 的部分**

为了避免放大导致内存使用量成比例增加的问题，我尝试通过 JS 加载图像，然后将要显示的图像部分复制到视口大小的画布上，例如：

```
var canvas = $(‘canvas#mycanvas’);
canvas.width = $(window).width;
canvas.height = $(window).height;
...
var img = new Image();
img.src = “map.png”;
...
var context = canvas[0].getContext("2d");
context.drawImage(img, x, y, w, h, 0, 0, canvas.width, canvas.height); 
```

其中 x,y 是由平移定义的源图像内的左上角，w,h 是由缩放级别确定的源图像内的区域大小

这里的问题是大地图图像在内存中以某种方式失去了质量（我只能假设有一些内存上限导致抖动），导致地图在应用程序中看起来失真：[请参阅此处以获取示例屏幕截图](https://dl.dropbox.com/u/3446865/temp/shot_Dec_03_2012_0.png)

**3\. 使用 HTML5 画布将地图显示为矢量**

通过谷歌搜索，我发现了 ai2canvas，这是一个 Illustrator 插件，可让您将艺术品导出为 HTML5 画布中显示的矢量。导出的结果是一个 html 文件，其中包含一大块 JS，它将 illustrator 中的所有路径表示为贝塞尔曲线。导出我的 4000x2400 地图会生成一个 550Kb 的 html 文件，其中包含矢量路径。在我的测试应用程序中，我将整个地图渲染到 4000x2400 像素的内存画布（未附加到 DOM），然后使用 context.drawImage() 将其相关部分复制到视口大小的画布中内存画布作为源。在 HTC Wildfire 上，虽然所有贝塞尔曲线到内存画布的初始渲染花费了大约 2000 毫秒，但画布之间的复制速度足以实现平滑的平移和缩放。

我尝试了使用矢量图的第二种方法；我没有将所有矢量渲染到内存中的大画布，而是让应用程序计算在每个拖动/捏合事件期间在当前平移位置/缩放级别的视口中哪些矢量路径是可见的，并且只将可见矢量绘制到视口大小的画布。虽然这将所需的内存使用量减少到 10Mb，但在每个拖动/捏合循环上执行这些计算所需的 CPU 周期使得应用程序在旧的 android 手机上滞后太多以至于无法使用。

**4.使用离线平铺显示地图**

使用[map tiler](http://www.maptiler.org/)，我为我的地图创建了 PNG 切片，缩放级别从 25% 到 100%。在我的测试应用程序中，我能够按需延迟加载磁贴，从而减少内存使用并产生平滑的平移/缩放体验，即使在 HTC Wildfire 上也是如此。在查看生成的 APK 的大小之前，我以为我已经找到了解决方案：对于我的 4000x2400 地图，地图拼贴器生成了 4Mb 的平铺图像。我的大部分地图都在 2000x2000 像素左右，产生大约 2Mb 的图块。我的正确应用程序的代码加上 Phonegap 开销又是 2Mb。

我的意图是在 Android/Apple 市场上发布一系列可用的应用程序，每个应用程序都有一组大约 10 张地图，但平铺每张地图的重量在 1-4Mb 之间，因此生成的应用程序下载量非常大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:21:29.607

如果其他人对此感兴趣，我最后通过使用地图平铺解决了这个问题，使用名为[pnqnq](http://pngnq.sourceforge.net/)的工具创建限制为 256 种颜色的 8 位 PNG。生成的 4000x2000 地图的瓦片集大小约为 800K，而 PNG-24 为 4Mb，这对于我的 Android 和 iOS 应用程序中的资产来说是可接受的大小。

# function - 使用 .Caller.Column 代码来识别 Column 值并在单独的范围查找中使用它

> ID：13706137
> 
> 赞同：0
> 
> 时间：2012-12-04T15:21:16.657
> 
> 标签：function, excel, excel-formula, vba

我正在尝试设计一个函数，该函数采用 Application.Caller.Column 值并使用它来查找不同工作表上的范围。

该函数被设计为从下拉框中获取值。该值将确定数组的行，我使用 Case 语句来做到这一点。我遇到的问题是，如果函数在 B 列中，我希望函数从另一张表返回 B 列值，依此类推。

我在使用它时不断收到#Value 返回，智能标签告诉我“公式中的值属于错误的数据类型”。任何帮助深表感谢！

代码

```
 Function NetPay(Scenario As Range)

 Dim CC As String
 CC = Application.Caller.Column
 Select Case Scenario

    Case 1: NetPay = Sheets("Scenarios").Cells(4, CC)
    Case 2: NetPay = Sheets("Scenarios").Cells(7, CC)
    Case 3: NetPay = Sheets("Scenarios").Cells(10, CC)
    Case 4: NetPay = Sheets("Scenarios").Cells(13, CC)
    Case 5: NetPay = Sheets("Scenarios").Cells(16, CC)
    Case 6: NetPay = Sheets("Scenarios").Cells(19, CC)
    Case 7: NetPay = Sheets("Scenarios").Cells(22, CC)

End Select

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:50:06.513

您已`CC`定义为`String`.

将定义更改为`Long`.

此外，`Select Case`当您应该查看`.value`

# c++ - C++ Timer 类，也在 QNX 中与脉冲消息一起使用

> ID：13706140
> 
> 赞同：1
> 
> 时间：2012-12-04T15:21:28.117
> 
> 标签：c++, timer, qnx

我为我的项目编写了一个计时器类。我使用了标准的 C++ 函数调用。

我想创建一个计时器（开始、停止、暂停、继续、重置）并传递新的时间。

如果计时器在我停止之前触发，我想在给定通道上获取 qnx 脉冲消息。

这是标题：

```
#ifndef TIMER_H_
#define TIMER_H_

#include <time.h>
#include <sys/neutrino.h>
#include "HWaccess.h"
#include "address.h"

#define MILLISECONDS_NANOSECONDS_CONV   1000000
#define SECONDS_MILLISECONDS_CONV       1000

class Timer {
public:
    /**
     * Constructor creates a new timer, attaches to the given
     * channel.
     * Does not start timer!
     *
     * @param chid
     * @param seconds
     * @param milliseconds
     * @param msg
     */
    Timer(int chid, int sec, int msec, int msg);

    /**
     * Deletes timer after detach from channel
     */
    virtual ~Timer();

    /**
     * Starts the timer
     */
    void start();

    /**
     * Stops timer and resets it to initial values
     */
    void stop();

    /**
     * Pauses the timer
     */
    void pause();

    /**
     * Continues the timer
     */
    void cont();

    /**
     * Resets the timer to initial values
     */
    void reset();

    /**
     * Changes timer values to new given values and
     * resets it
     * Does not start the timer!
     *
     * @param seconds
     * @param milliseconds
     */
    void changeTime(int sec, int msec);

private:
    /**
     * Timer ID
     */
    timer_t timerid;

    /**
     * Timerstruct for running timer
     */
    struct itimerspec timer;

    /**
     * Timerstruct for backing up the running timer
     */
    struct itimerspec backupTimer;

    /**
     * timer value: seconds
     */
    int seconds;

    /**
     * timer value: milliseconds
     */
    int miliSeconds;

    /**
     * Connection ID for timeout pulse
     */
    int coid;

    /**
     * Event structure for timer if it fires
     */
    struct sigevent event;
};

#endif /* TIMER_H_ */ 
```

...和实施：

```
#include "Timer.h"

Timer::Timer(int chid, int sec, int msec, int msg) {
    if ((coid = ConnectAttach(0, 0, chid, _NTO_SIDE_CHANNEL, 0)) == -1) {
        printf("Timer: Error in ConnectAttach\n");
    }

    SIGEV_PULSE_INIT(&event, coid, SIGEV_PULSE_PRIO_INHERIT, PULSE_FROM_TIMER, msg/*Timer abgelaufen*/);

    if (timer_create(CLOCK_REALTIME, &event, &timerid) == -1) {
        printf("Timer: Error in timer_create()\n");
    }

    seconds = sec;
    miliSeconds = msec;

    reset();
}

Timer::~Timer() {
    if (ConnectDetach(coid) == -1) {
        printf("Timer: Error in ConnectDetach\n");
    }

    if (timer_delete(timerid) == -1) {
        printf("Timer: Error in timer_delete()\n");
    }
}

void Timer::start() {
    if(timer_settime(timerid, 0, &timer, NULL) == -1){
        printf("Timer: Error in timer_settime()\n");
    }
}

void Timer::stop() {
    // stop timer
    timer.it_value.tv_sec = 0;
    timer.it_value.tv_nsec = 0;
    timer.it_interval.tv_sec = 0;
    timer.it_interval.tv_nsec = 0;
    if(timer_settime(timerid, 0, &timer, NULL) == -1){
        printf("Timer: Error in timer_settime()\n");
    }

    // reset it
    reset();
}

void Timer::pause() {
    timer.it_value.tv_sec = 0;
    timer.it_value.tv_nsec = 0;
    timer.it_interval.tv_sec = 0;
    timer.it_interval.tv_nsec = 0;

    // backup running timer values
    if(timer_gettime(timerid, &backupTimer) == -1){
        printf("Timer: Error in timer_gettime()\n");
    }
    // disarm 
    if(timer_settime(timerid, 0, &timer, NULL) == -1){
        printf("Timer: Error in timer_settime()\n");
    }
}

void Timer::cont() {
    // recover old values
    timer = backupTimer;
    // Arm timer
    if(timer_settime(timerid, 0, &timer, NULL) == -1) {
        printf("Timer: Error in timer_settime()\n");
    }
}

void Timer::reset(){
    timer.it_value.tv_sec = seconds;
    timer.it_value.tv_nsec = miliSeconds * MILLISECONDS_NANOSECONDS_CONV;
    timer.it_interval.tv_sec = 0;
    timer.it_interval.tv_nsec = 0;
}

void Timer::changeTime(int sec, int msec){
    seconds = sec;
    miliSeconds = msec;
    reset();
} 
```

1）我可以将计时器结构的值设置为零（以停止计时器）并按照我的方式将值备份到另一个后退结构中吗？或者计时器结构中的正在运行的计时器是否递减？

2）我可以用简单的方法轻松恢复旧的计时器值`timer = backupTimer`吗？

3）最后，如果我在函数中创建并启动计时器，如下所示：

```
void coolClass::interestingFunction() {
    //do other time consuming stuff here...
    Timer timer(chid, 10, 0);
    timer.start();
} 
```

...然后在堆栈上创建计时器，当我退出此函数（及其变量等）​​时不再有效。计时器还会倒计时并触发我的脉搏吗？或者我是否必须在我的头文件中为这个计时器使用分类器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:52:59.057

好的，我解决了所有问题；> 如果 some1 对如何解决感兴趣，那么修改后的代码如下：

```
#include "Timer.h"

Timer::Timer(int chid, int sec, int msec, int msg) {
    if ((coid = ConnectAttach(0, 0, chid, _NTO_SIDE_CHANNEL, 0)) == -1) {
        printf("Timer: Error in ConnectAttach\n");
    }

    SIGEV_PULSE_INIT(&event, coid, SIGEV_PULSE_PRIO_INHERIT, PULSE_FROM_TIMER, msg/*Timer abgelaufen*/);

    if (timer_create(CLOCK_REALTIME, &event, &timerid) == -1) {
        printf("Timer: Error in timer_create()\n");
    }

    seconds = sec;
    miliSeconds = msec;

    reset();
}

Timer::~Timer() {
    if (ConnectDetach(coid) == -1) {
        printf("Timer: Error in ConnectDetach\n");
    }

    if (timer_delete(timerid) == -1) {
        printf("Timer: Error in timer_delete()\n");
    }
}

void Timer::start() {
    //TODO running flag, wg doppelt pause / continue
    if(timer_settime(timerid, 0, &timer, NULL) == -1){
        printf("Timer: Error in timer_settime()\n");
    }
}

void Timer::stop() {
    // Stoppe den Timer
    if(timer_settime(timerid, 0, NULL, NULL) == -1){
        printf("Timer: Error in timer_settime()\n");
    }

    // Zuruecksetzen
    reset();
}

void Timer::pause() {
    // disarm (da erster Wert NULL)
    if(timer_settime(timerid, 0, NULL, &backupTimer) == -1){
        printf("Timer: Error in timer_settime()\n");
    }
}

void Timer::cont() {
    // Arm, da Werte im struct wieder != 0
    if(timer_settime(timerid, 0, &backupTimer, NULL) == -1) {
        printf("Timer: Error in timer_settime()\n");
    }
}

void Timer::reset(){
    timer.it_value.tv_sec = seconds;
    timer.it_value.tv_nsec = miliSeconds * MILLISECONDS_NANOSECONDS_CONV;
    timer.it_interval.tv_sec = 0;
    timer.it_interval.tv_nsec = 0;
}

void Timer::changeTime(int sec, int msec){
    seconds = sec;
    miliSeconds = msec;
    reset();
} 
```

# java - 通过 Java API 从快照中恢复 Amazon RDS

> ID：13706149
> 
> 赞同：1
> 
> 时间：2012-12-04T15:21:50.707
> 
> 标签：java, amazon-web-services, amazon-rds

我有一个从以前的快照启动亚马逊 RDS 的脚本。现在我必须用 Java API 来实现这个功能。

我运行的脚本是：

```
rds-restore-db-instance-from-db-snapshot $RDS_DEV --db-snapshot-identifier $SNAP --db-subnet-group-name $SUBNET_GROUP --region $REGION
echo sleep $TIME 
```

所以，在那之后我睡了一段时间，然后分配正确的安全组和参数组：

```
rds-modify-db-instance $RDS_DEV --db-security-groups $SEC_GROUP --db-parameter-group-name $PARAM_GROUP --apply-immediately --region $REGION 
```

然后我重新启动实例。

在我的 API 实现中，我创建了这个方法来从快照中恢复 RDS：

```
 public void restoreDBSnapshot(String rdsDev, String snapshotId,
        String subnetGroup, String availabilityZone) {
        RestoreDBInstanceFromDBSnapshotRequest restoreDBInstanceRequest = new RestoreDBInstanceFromDBSnapshotRequest();
         restoreDBInstanceRequest.setDBSnapshotIdentifier(snapshotId);
         restoreDBInstanceRequest.setDBName(rdsDev);
         restoreDBInstanceRequest.setDBSubnetGroupName(subnetGroup);
         restoreDBInstanceRequest.setAvailabilityZone(availabilityZone);
         LOG.info("Restoring RDS from backup snapshot");
         this.rds.restoreDBInstanceFromDBSnapshot(restoreDBInstanceRequest);
} 
```

但我不想让我的应用程序休眠等待 RDS 启动，然后修改 securityGroup 和 parameterGroupName 用

> 修改DBInstanceRequest

在创建阶段有解决方案吗？

# c# - 时间：2018-01-10 标签：c#datagridview双击带有FullRowSelect的行

> ID：13706150
> 
> 赞同：28
> 
> 时间：2012-12-04T15:21:51.530
> 
> 标签：c#, events, datagridview, double-click

我的 C# 应用程序中有一个 datagridview，用户应该只能单击整行。所以我将 SelectionMode 设置为 FullRowSelect。

但是现在我想要一个当用户双击一行时触发的事件。我想在 MessageBox 中有行号。

我尝试了以下方法：

```
 this.roomDataGridView.CellContentDoubleClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.roomDataGridView_CellCont‌ ​entDoubleClick); 

 private void roomDataGridView_CellContentDoubleClick(object sender, DataGridViewCellEventArgs e)
 {
      MessageBox.Show(e.RowIndex.ToString());
 } 
```

不幸的是，什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T12:19:15.553

在 CellContentDoubleClick 事件仅在双击单元格内容时触发。我使用了这个并且有效：

```
 private void dgvUserList_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        MessageBox.Show(e.RowIndex.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T15:31:17.953

不要在 Visual Studio 中手动编辑 .designer 文件，这通常会让人头疼。而是在应包含在 DataGrid 元素中的 DataGridRow 的属性部分中指定它。或者，如果您只是想让 VS 为您执行此操作，请在属性页面-> 事件（小闪电图标）中找到双击事件，然后双击您将在其中输入该事件的函数名称的文本区域。

这个链接应该有帮助

[http://msdn.microsoft.com/en-us/library/6w2tb12s(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/6w2tb12s(v=vs.90).aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-03T17:04:27.650

以 Northwind 数据库员工表为例，您可以在 datagridview 中获取行的索引号：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'nORTHWNDDataSet.Employees' table. You can move, or remove it, as needed.
            this.employeesTableAdapter.Fill(this.nORTHWNDDataSet.Employees);

        }

        private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
        {
            var dataIndexNo = dataGridView1.Rows[e.RowIndex].Index.ToString();
            string cellValue = dataGridView1.Rows[e.RowIndex].Cells[1].Value.ToString();

            MessageBox.Show("The row index = " + dataIndexNo.ToString() + " and the row data in second column is: "
                + cellValue.ToString());
        }
    }
} 
```

结果将显示记录的索引号和 datagridview 中第二个表列的内容：

[![在此处输入图像描述](../Images/2dcb3988ead03191e7ddb002cb50094f.png)](https://i.stack.imgur.com/fdIdH.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-04T15:28:48.667

这将起作用，请确保您的控件事件已分配给此代码，它可能已丢失，我还注意到只有当单元格不为空时，双击才会起作用。尝试双击有内容的单元格，不要惹设计师

```
 private void dgvReport_CellContentDoubleClick(object sender, DataGridViewCellEventArgs e)
 {

   //do something

 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-28T18:25:24.470

我认为您正在寻找这个： RowHeaderMouseDoubleClick 事件

```
private void DgwModificar_RowHeaderMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e) {
...
} 
```

获取行索引：

`int indice = e.RowIndex`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-31T11:48:25.120

您可以通过以下方式执行此操作：`CellDoubleClick`事件这是代码。

```
private void datagridview1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        MessageBox.Show(e.RowIndex.ToString());
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-22T07:23:39.077

出于您的目的，双击行标题时有一个默认事件。检查以下代码，

```
 private void dgvCustom_RowHeaderMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
 {
      //Your code goes here
 } 
```

# sockets - 无限确认循环

> ID：13706154
> 
> 赞同：0
> 
> 时间：2012-12-04T15:22:00.480
> 
> 标签：sockets, tcp, computer-science, named-pipes, computation-theory

我遇到了有趣的理论问题：

假设我们通过一些 IPC（如 tcp 套接字或命名管道）连接了程序 A 和程序 B。程序 A 向程序 B 发送一些数据，并根据数据传递的成功，A 和 B 执行一些操作。但是，只有在确定 A 已收到交货确认时，B 才应进行操作。所以我们想出了3个连接：A -> B [数据传输] B -> A [交货确认] A -> B [收到交货确认的确认]

它可能看起来很奇怪，但目标是在双方都知道数据已传输之前，既不对 A 也不对 B 执行任何操作。

这就是问题所在，因为第二次连接是为了确认第一次连接成功。第三个是确认第二个，但实际上并不能保证连接 2 和 3 不会失败，在这种情况下，我们会陷入确认的无限循环。是否有一些 CS 理论可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:25:47.407

如果我没看错你的问题，这个问题被称为“[两位将军的问题](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)”。问题的要点是，最后一个发送消息或确认的实体对刚刚发送的内容的状态一无所知，依此类推。

# rabbitmq - 如何在 Cloud Foundry 上调试 spring 集成/rabbitmq 应用程序？

> ID：13706155
> 
> 赞同：1
> 
> 时间：2012-12-04T15:22:10.987
> 
> 标签：rabbitmq, cloud-foundry

我已经将一个多节点应用程序部署到 Cloud Foundry，所有这些都通过共享的 rabbitmq 服务连接。该应用程序包括：

*   一个 grails 应用程序。
*   3 个独立的 spring-integration-amqp java 应用程序。

所有人都通过 spring-integration-amqp 与 rabbit 进行通信，使用 cloud:rabbit-connection-factory。

所有应用程序都具有相同的rabbitmq 服务绑定。

所有应用程序都正确启动并且似乎可以连接到rabbit ok。

我看到的行为是 grails 应用程序在等待来自独立应用程序之一的响应时超时。这与我只在本地启动 grails 应用程序而不是消息消费者是一致的。

我正在努力解决的是如何调试问题所在。

*   我在日志中看不到任何错误
*   似乎不可能通过隧道连接到 rabbitmq 服务以查询队列的状态等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:54:24.773

你是推到 cloudfoundry.com 还是 micro cloudfoundry？

要回答您的问题：

1.  您是否尝试过使用“vmc 文件”？对于 java web 应用程序，cloudfoundry 使用 tomcat 作为应用程序服务器，您可以使用该命令导航到 tomcat/logs 进行查看。也许一些标准输出被重定向到那里。

2.  你有安装凯迪克吗？如果您没有阅读此文档，这里是：[http ://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

# android - 如何在 Android 上重置 viewpager 内容？

> ID：13706161
> 
> 赞同：6
> 
> 时间：2012-12-04T15:22:22.353
> 
> 标签：android, android-viewpager

请告诉我如何在 android 上重置 ViewPager 的内容。我试图调用 adapter.notifyDataSetChanged() 但是当我滚动视图时适配器没有调用 getItem(position) 。它总是返回旧的子视图。

更新：这是我的片段视图。当我重置 viewPager 数据时，它使用了加载的片段视图。它只是从 onCreateView 而不是 Constructor 开始。

```
public class ResultView extends Fragment {
//Declare properties

     //Constructor 
public ResultView(Province province, Calendar calendar) {
    Log.d("xskt", "ResultView constructor");
    this.province = province;
    this.calendar = (Calendar) calendar.clone();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    Log.d("xskt", "ResultView onCreateView");
    View view = inflater.inflate(R.layout.resultview, null);

    //do some thing

    return view;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-05T02:21:37.260

我已经改为使用`FragmentStatePagerAdapter`而不是`FragmentPagerAdapter`，问题解决了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-21T19:17:59.170

**我认为在另一个片段中重新加载片段的最佳解决方案是：**

```
@Override
public void onPause() {
    super.onResume();
    List<Fragment> fragments = getFragmentManager().getFragments();
    if (fragments != null) {
        FragmentTransaction fragmentTransaction  = getFragmentManager().beginTransaction();
        for (Fragment fragment : fragments) {
            if (fragment instanceof Fragment) {
                fragmentTransaction.remove(fragment);
            }
        }
        fragmentTransaction.commitNowAllowingStateLoss();
    }
} 
```

检查您的用例是否`commitNowAllowingStateLoss`有`commitAllowingStateLoss`必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:11:48.907

一种方法是使用观察者模式。您呈现的数据可能在 sqlite DB 中（或存储在内存中）。您可以在您的片段中设置一个侦听器，当数据更改时，它将对您的片段进行必要的更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-10T15:45:45.650

如果您执行以下操作，它将起作用：

*   使 viewPager 无效以使缓存无效
*   调用 notifyDataSetChanged() 告诉适配器发生了变化，它必须刷新 Fragments
*   在 FragmentStatePagerAdapter 中覆盖 getItemPosition 以刷新所有 Fragment

在您的 Activity 或您要刷新数据的任何地方：

```
viewPager.invalidate();
fragmentStatePageAdapter.notifyDataSetChanged(); 
```

在你 FragmentStatePageAdapter 中：

```
@Override
public int getItemPosition(@NotNull Object object) {
    return POSITION_NONE;
} 
```

# android - Android 上重新打包的 JAXB 以运行时异常结束

> ID：13706162
> 
> 赞同：2
> 
> 时间：2012-12-04T15:22:27.303
> 
> 标签：android, xml, xsd, jaxb

我正在开发一个需要根据 XML 字符串动态呈现组件的 Android 应用程序。此 XML 字符串基于 XSD，我直接从服务器获取 XML。我使用 JAXB xjc 从 XSD 创建对象模型。但现在我希望能够使用 JAXB 解组和解析完整的 XML。我在这里浏览了几篇文章，在[这篇文章](https://stackoverflow.com/questions/5461127/using-jaxb-with-google-android?answertab=active#tab-top)中，我找到了一个解决方案，其中最后一个解决方案提供了[使用](http://www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/comment-page-1/#comment-8424)重新打包的 jaxb 库的解决方案。我按照以下步骤操作：-

1.导入库：activation.jar additionalnal.jar ae-jaxb-2.2.5.jar istack-commons-runtime.jar jaxp-datatype.jar txw2-20110809.jar

2.  将我的 jaxb 导入替换为 ae.jaxb。

3.  添加`RuntimeInlineAnnotationReader.cachePackageAnnotation(RenderXml.class.getPackage(), new XmlSchemaMine(""));` 到我的代码中的 onCreate 方法中。这里 RenderXml 是我的 Activity 的名称。

我仍然收到以下运行时错误：-

```
12-04 13:44:39.820: E/AndroidRuntime(2219): FATAL EXCEPTION: main
12-04 13:44:39.820: E/AndroidRuntime(2219): java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlRegistry
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.Class.getDeclaredAnnotation(Native Method)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.Class.getAnnotation(Class.java:260)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.model.annotation.RuntimeInlineAnnotationReader.getClassAnnotation(RuntimeInlineAnnotationReader.java:109)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.model.annotation.RuntimeInlineAnnotationReader.getClassAnnotation(RuntimeInlineAnnotationReader.java:59)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:330)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:461)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:299)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:142)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1164)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:146)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:237)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.reflect.Method.invoke(Method.java:511)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:186)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:146)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.javax.xml.bind.ContextFinder.find(ContextFinder.java:361)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:446)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:409)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at ae.javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:313)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at com.example.testuirenderxml.RenderXml.generateFirstMenu(RenderXml.java:79)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at com.example.testuirenderxml.RenderXml.onCreate(RenderXml.java:112)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.Activity.performCreate(Activity.java:5104)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.os.Looper.loop(Looper.java:137)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.reflect.Method.invoke(Method.java:511)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at dalvik.system.NativeStart.main(Native Method)
12-04 13:44:39.820: E/AndroidRuntime(2219): Caused by: java.lang.ClassNotFoundException: Didn't find class "javax.xml.bind.annotation.XmlRegistry" on path: /data/app/com.example.testuirenderxml-2.apk
12-04 13:44:39.820: E/AndroidRuntime(2219):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-04 13:44:39.820: E/AndroidRuntime(2219):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-04 13:44:39.820: E/AndroidRuntime(2219):     ... 35 more 
```

我需要使用 jaxb，因为我必须从定期更新的 xsd 生成对象模型，有没有其他方法可以创建对象模型，然后在此对象模型的帮助下解析 xml 以实现什么我想要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:28:56.313

我找到了我的问题的答案。我需要在我的 onCreate 方法中设置以下内容：-

```
RuntimeInlineAnnotationReader.cachePackageAnnotation(LayoutT.class.getPackage(), new XmlSchemaMine("myNameSpace")); 
```

其中 myNameSpace 是我的 XSD 架构的命名空间。

# c++ - 启动时将其作为父级传递时无法显示小部件

> ID：13706163
> 
> 赞同：0
> 
> 时间：2012-12-04T15:22:28.847
> 
> 标签：c++, qt

嗨，我正在学习 QT，但遇到了一些我不明白的事情。为什么当我创建这样的小部件时

```
widget = new Widget(this); 
```

`widget->show();`不显示小部件，但如果我把“这个”留在外面，即

```
widget = new widget(); 
```

它显示？更重要的是，我需要能够从孩子那里调用父母的方法之一，除非我通过传递孩子的`this`创建来设置孩子的患者，否则我无法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:41:33.223

小部件确实出现了。但它显示为主窗口的一部分，而不是在它自己的窗口中。当然，如果您正在创建的小部件中没有任何内容，那么您将看不到太多内容。您可以使用以下方法进行测试：

```
widget = new QTextEdit(this);
widget->show(); 
```

如果你想让小部件总是显示在它自己的窗口中，那么你应该让你的小部件继承自 QDialog 而不是 QWidget。或者，如果您不想（或不能）这样做，那么您应该`Qt::Window`在创建小部件时设置窗口标志：

```
widget = new Widget(this, Qt::Window); 
```

# clang - 通过 pragma clang 诊断禁用 -Werror

> ID：13706166
> 
> 赞同：4
> 
> 时间：2012-12-04T15:22:45.463
> 
> 标签：clang, pragma, llvm-clang

用于将`-Werror`所有警告视为错误，我不想抑制已弃用的声明警告：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignore "-Wdeprecated-declarations"
    SKPayment *myPayment = [SKPayment paymentWithProductIdentifier:completeName];
    [[SKPaymentQueue defaultQueue] addPayment:myPayment];
#pragma clang diagnostic pop 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:25:08.483

好的，找到了，只需使用警告而不是忽略：

```
#pragma clang diagnostic push
#pragma clang diagnostic warning "-Wdeprecated-declarations"
    SKPayment *myPayment = [SKPayment paymentWithProductIdentifier:completeName];
    [[SKPaymentQueue defaultQueue] addPayment:myPayment];
#pragma clang diagnostic pop 
```

现在，我仍然使用这个已弃用的 API，编译通过`-Werror`并且警告仍然存在（请记住删除此 API 的使用）。

# r - 将csv文件导入R-读取为字符的数值

> ID：13706188
> 
> 赞同：42
> 
> 时间：2012-12-04T15:23:56.273
> 
> 标签：r

我知道这个网站上有类似的问题，但是，他们似乎都没有充分回答我的问题。

这是我到目前为止所做的：

我有一个在 excel 中打开的 csv 文件。我以代数方式操作列以获得新列“A”。我使用将文件导入 R`read.csv()`并将 A 列中的条目存储为因子 - 我希望它们存储为数字。我在这个话题上找到了这个问题：

[将 csv 数据集导入到 R 但值成为因素](https://stackoverflow.com/questions/5187745/imported-a-csv-dataset-to-r-but-the-values-becomes-factors)

根据建议，我将`stringsAsFactors = FALSE`作为参数包含在 中`read.csv()`，但是，正如 Hong Ooi 在上面链接的页面中所建议的那样，这不会导致 A 列中的条目存储为数值。

一个可能的解决方案是使用以下页面中给出的建议：

[如何在不丢失信息的情况下将因子转换为整数\数字？](https://stackoverflow.com/questions/3418128/how-to-convert-a-factor-to-an-integer-numeric-without-a-loss-of-information)

但是，我想要一个更简洁的解决方案，即一种导入文件的方法，以便将列条目的条目存储为数值。

为任何帮助干杯！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-04T15:53:54.823

无论您在 Excel 中为创建新列所做的任何代数都可能在 R 中更有效地完成。

请尝试以下操作：使用 . 将*原始*文件（在任何 excel 操作之前）读入 R 中`read.csv(... stringsAsFactors=FALSE)`。[如果这不起作用，请查看`?read.table`（`read.csv`包装），但可能存在其他一些潜在问题]。

例如：

```
 delim = ","  # or is it "\t" ?
   dec = "."    # or is it "," ?
   myDataFrame <- read.csv("path/to/file.csv", header=TRUE, sep=delim, dec=dec, stringsAsFactors=FALSE) 
```

然后，假设您的数字列是第 4 列

```
 myDataFrame[, 4]  <- as.numeric(myDataFrame[, 4])  # you can also refer to the column by "itsName" 
```

* * *

最后，如果您在 R 中完成与在 Excel 中完成的任务相同的任务时需要任何帮助，这里有很多人很乐意为您提供帮助

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-05T15:02:34.923

在`read.table`（及其亲属）中，它是`na.strings`指定哪些字符串将被解释为缺失值的参数`NA`。默认值为`na.strings = "NA"`

如果其他数字变量列中的缺失值被编码为“ `NA`”以外的其他内容，例如“ `.`”或“ `N/A`”，则这些行将被解释为`character`，然后将整个列转换为`character`。

因此，如果您的缺失值不是“ `NA`”，您需要在`na.strings`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-18T18:51:17.773

如果您正在处理大型数据集（即具有大量列的数据集），上述解决方案可能手动繁琐，并且需要您*先验*地知道哪些列是数字。

试试这个。

```
char_data <- read.csv(input_filename, stringsAsFactors = F)
num_data <- data.frame(data.matrix(char_data))
numeric_columns <- sapply(num_data,function(x){mean(as.numeric(is.na(x)))<0.5})
final_data <- data.frame(num_data[,numeric_columns], char_data[,!numeric_columns]) 
```

该代码执行以下操作：

1.  将您的数据作为字符列导入。
2.  将数据的实例创建为数字列。
3.  识别数据中的哪些列是数字的（假设将数据转换为数字时 NA 小于 50% 的列确实是数字的）。
4.  将数字和字符列合并到最终数据集中。

这基本上通过保留原始列的数据类型（作为字符和数字）来自动导入 .csv 文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-29T09:33:40.317

`read.csv`在命令中包含这个对我有用：`strip.white = TRUE`

（我在[这里](https://rstudio-pubs-static.s3.amazonaws.com/13589_1dc68b35cccc4686924ba80c37697b7e.html)找到了这个解决方案。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-21T11:49:56.217

基于 dmanuge 代码的 data.table 版本：

```
convNumValues<-function(ds){
  ds<-data.table(ds)
  dsnum<-data.table(data.matrix(ds))
  num_cols <- sapply(dsnum,function(x){mean(as.numeric(is.na(x)))<0.5})
  nds <- data.table(  dsnum[, .SD, .SDcols=attributes(num_cols)$names[which(num_cols)]]
                        ,ds[, .SD, .SDcols=attributes(num_cols)$names[which(!num_cols)]] )
return(nds)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-21T23:45:14.560

我有一个类似的问题。基于 Joshua 的前提，即 excel 是我查看的问题，发现这些数字在每三个数字之间用逗号格式化。不带逗号的重新格式化解决了这个问题。

# android - ListView 图片随机

> ID：13706193
> 
> 赞同：0
> 
> 时间：2012-12-04T15:24:06.263
> 
> 标签：android, android-listview, android-imageview

我有一个包含项目的列表视图。当我滚动时，图像随机出现。我不知道为什么...有适配器：

```
package com.forel.dbc;
[...]

public class AgendaAdapter extends BaseAdapter {

private List<Data> items; //Le contenu
private LayoutInflater inflater;
private Context context;     
private SmartImageView myImage;

public AgendaAdapter(Context context, List<Data> items, DownloaderImageViewCache imageCache, boolean invertTextColor) {

    this.items = items;
    this.context = context;
    this.imageCache = imageCache; 
    inflater = (LayoutInflater)this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

[...]
public View getView(int position, View convertView, ViewGroup parent) {

    if(convertView == null) {
        convertView = inflater.inflate(R.layout.agenda_list_item, parent, false);

    }
    final Data event = (Data) getItem(position);
    if (event.getTitle() != null)
        ((TextView) convertView.findViewById(R.id.eventName)).setText(event.getTitle());
    if (event.getDesc() != null)
        ((TextView) convertView.findViewById(R.id.desc)).setText(event.getDesc());

    ((SmartImageView) convertView.findViewById(R.id.my_image)).setImageUrl(event.getPicture()); // getPicture return imageUrl, 

    return convertView;
}} 
```

图像随机出现在列表中

如果有人有想法...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:28:06.327

假设这些图像是通过网络连接加载的，我是否正确？如果是这样，那将解释您的问题，因为您正在设置图像，这反过来又会启动后台进程以获取图像。

您可能会在列表中移动，导致刷新，因此图像被加载到不正确的 ImageView 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:29:33.613

下载后设置图像时，应确保与此视图关联的数据同时没有更改。

# java - 如何在java中复制链表？

> ID：13706194
> 
> 赞同：1
> 
> 时间：2012-12-04T15:24:06.070
> 
> 标签：java, linked-list

我的`Node`类，代表链表的一个节点，定义如下：

```
public class Node
{
    Node next;
    String data;

    public Node (String data)
    {
        this.data = data;
    }
} 
```

我正在这样使用它：

```
Node node, head, tail;
String name; // name to be entered
int count = 0;

// initialize the head to null

head = null;

do
{
    System.out.print ("Enter a name. Type q to end.");
    name = stdin.readLine ();

    // create a new node if the user doesn't type q
    if (!name.equals ("q"))
    {
        node = new Node (name);
        node.next = head;
        count++;

        // update the head to point to the new front of the list
        head = node;
    }
}
while (!name.equals ("q"));  // loop continues until "quit" selected
node = head; 
```

假设我想将名称备份到一个方法中，以防我修改原始列表。我怎样才能做到这一点？无需将其写入文件。

Name 是存储在链接列表中的变量，在用户按下 q 后，我想修改列表，同时保留用户存储的内容作为备份，以防他/她想要回溯或查看原始列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:39:49.730

It would be better to make the Node immutable. So every time when you want to modify the node, you create a new node. And store the old one in the linklist history.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:33:36.693

所以听起来好像您想为链表中的每个元素保留先前名称的历史记录。我建议您在链表的每个节点中存储一个数组或链表，以显示该项目的先前历史。例如：

```
public class Node
    {
    Node next;
    String data;
    LinkedList<String> history;

    public Node (String data)
    {
        this.data = data;
    }
} 
```

您可以通过多种方式填充它，这完全取决于您的用例。

另外，为什么要实现自己的链表？Java 已经带有一个链表实现（java.util.LinkedList）。如果您需要链表种类的有序列表，我建议您使用它。如果你这样做了，那么创建一个包含在其中的新数据结构，其中包含名称和历史记录，然后只需维护其中的历史记录，例如：

```
public class DataItem
    {
    String data;
    LinkedList<String> history = new LinkedList<>();

    public DataItem (String data)
    {
        this.data = data;
    }

    public void setData (String data)
    {
        this.history.add(0, this.data);
        this.data = data;
    }
} 
```

最后，请记住字符串在 Java 中是不可变的。因此，不能修改字符串。您只需要在某处保留对先前字符串的引用，您不需要复制该值。

要最终复制对象树，您需要执行所谓的深度复制，基本上是遍历完整结构和所有集合，并将每个对象克隆为一个新对象。

# android - 关于在 xml 中包含标签和视图实现的问题

> ID：13706199
> 
> 赞同：0
> 
> 时间：2012-12-04T15:24:20.760
> 
> 标签：android, include

大家好，提前谢谢你，对不起我的英语。我有两个很大的疑问

1 - 我没有太多时间在 android 上编程，而且我很确定我做了很多事情都是错误的。例如，我制作了几个应用程序，其中在 xml 定义中我包含了另一个 xml。

例如，想象两个活动的 xml 定义中都包含 header_section.xml 的 2 个活动。该 header_section 有 5 个按钮和更多视图等。好的，在 xml 中只是包含一个包含并且它可以工作......但是要实现按钮......我必须在两个活动中重复代码吗？ ? 在两个活动中复制代码听起来真的很糟糕……但是我该怎么做，例如在活动 A 和 B 中呢？我必须把这段代码放在两个活动类中完全相同吗？？？？

```
private View header_section;
private Button bExample;

header_section=findViewById(R.id.header_section);
bExample=(Button)header_section.findViewById(R.id.bExample);

bExample.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {               
        //Whatwever...call a number, for example
    }
}); 
```

在主 xml 中类似于：

```
<LinearLayout 
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="0dp" >  
    <include android:id="@+id/header_section" android:layout_gravity="center" android:gravity="center" layout="@layout/header_section" />
</LinearLayout> 
```

在 header_section.xml 中类似于：

```
<LinearLayout 
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="0dp" >  
        <Button android:id="@+id/bExample"  />
</LinearLayout> 
```

2 - 假设您的应用中有 10 个活动。如果在所有应用程序中都有一个具有相同功能的标题部分和底部部分，则只更改中心区域（显示不同的列表、视图等）......最好在所有应用程序中只有一个活动，并带有取景器在中心区域？或者有 10 个活动，我不知道是否可以避免，在第 1 点中询问，在所有 10 个活动中重复代码以实现标题和底部视图、处理程序等？

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:47:51.000

1）是的，通常，你应该使用它们，但你可以让它更简单......

1.a) bExample=(按钮)findViewById(R.id.bExample); //不需要加载视图

1.b）您可以在 LAYOUT 内的 button/clicable 元素中缩短调用 onclick 的方式，这是一个示例：

```
 <!--inside layout --> 
    <Button android:id="@+id/bExample"  android:onClick="aceptar" /> 
```

和

```
 //inside the Activity
   public void aceptar(View v){
       //here the code of the button
   } 
```

有关在所有活动中实现相同方法的问题，请查看这篇文章：[向多个活动添加相同的上下文菜单](https://stackoverflow.com/questions/4894116/adding-the-same-context-menu-to-multiple-activities)

2）根据应用程序如果您不做太多，您可以在同一个活动中加载所有内容并隐藏/显示您不想要的布局元素。但是最好使用不同的活动，无论如何，如果布局不是“重”（内部元素/包含太多），您可以为所有活动加载相同的布局，您只需要更改不同的内容（字符串）和/或隐藏/显示不同的元素。

# ruby - 当访问变量时，class_variable_set 给出`NameError: uninitialized class variable in Object`

> ID：13706207
> 
> 赞同：1
> 
> 时间：2012-12-04T15:24:50.540
> 
> 标签：ruby, metaprogramming

我正在执行以下操作，并希望`TestClass.my_var`返回`"my_var_here"`：

```
irb(main):001:0> def create_a_class class_name, my_var
irb(main):002:1>     klass = Object.const_set class_name, Class.new
irb(main):003:1>     klass.class_variable_set :@@my_var, my_var
irb(main):004:1>     klass.instance_eval do
irb(main):005:2*         def my_var
irb(main):006:3>             @@my_var
irb(main):007:3>         end
irb(main):008:2>     end
irb(main):009:1>     klass
irb(main):010:1> end
=> nil
irb(main):011:0> create_a_class "TestClass", "my_var_here"
=> TestClass 
```

相反，我得到了这个：

```
irb(main):012:0> TestClass.my_var
(irb):6: warning: class variable access from toplevel
NameError: uninitialized class variable @@my_var in Object
        from (irb):6:in `my_var'
        from (irb):12
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

我究竟做错了什么？任何输入将不胜感激。

编辑：我已经尝试过这样做，它似乎可以工作，但它并没有真正的 Ruby Way™ 做它的感觉（我也不想有那些讨厌的警告）

```
irb(main):001:0> def create_a_class class_name, _my_var
irb(main):002:1>     klass = Object.const_set class_name, Class.new
irb(main):003:1>     klass.instance_eval do
irb(main):004:2*         @@my_var = _my_var
irb(main):005:2>         def my_var
irb(main):006:3>             @@my_var
irb(main):007:3>         end
irb(main):008:2>     end
irb(main):009:1>     klass
irb(main):010:1> end
=> nil
irb(main):011:0> create_a_class "TestClass", "my_var_here"
(irb):4: warning: class variable access from toplevel
=> TestClass
irb(main):012:0> TestClass.my_var
(irb):6: warning: class variable access from toplevel
=> "my_var_here" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:23:31.490

首先？**为什么**要使用类变量？你知道你也可以在类上使用实例变量吗？它们更具可预测性。

类变量按词法查找：

```
class Foo
  @@a = 1
end

class Bar
  @@a = 2

  def Foo.a; @@a end
end

p Foo.a # => 2 
```

如果你真的想使用类变量，那么你必须使用#eval（某种形式）来定义方法：

```
def create_a_class class_name, my_var
  klass = Object.const_set class_name, Class.new
  klass.class_variable_set :@@my_var, my_var
  klass.class_eval <<-RUBY
    def self.my_var
      @@my_var
    end
  RUBY
  klass
end

create_a_class "Name", "var"
p Name.my_var 
```

# c++ - C++ 中的静态构造函数和致命错误 LNK1120: 1 unresolved externals

> ID：13706214
> 
> 赞同：1
> 
> 时间：2012-12-04T15:25:15.893
> 
> 标签：c++, static, constructor, externals

首先，我可能应该让你知道我绝不是程序员，我只是为了做家庭作业，所以如果可能的话，我需要一个非常详细的解释:)

我目前有一个 Node 类，用于存储点的坐标。除此之外，我想做的是根据计数器为每个不同的 Node 对象分配一个索引号。从我从互联网上收集到的信息中，我这样做的方式是使用另一个类，该类在构造函数中初始化我的计数器，在 Node 类中我只是将它添加为静态参数。

这是我的上述代码：

```
class counter
{
  public:
    int nr;
    counter()
    {
        nr = 0;
    }
};

class Nod   
{  
  static counter ctr;

  public:   
     int index;      
     Punct pct;
     Nod(Punct &temp)
     {  
         pct = temp;    
         index = ctr.nr ++ ;
     }
     Nod() {}   
}; 
```

现在，这构建好了，但是一旦我尝试在我的主函数中声明一个 Nod 对象，我就会收到以下错误：致命错误 LNK1120: 1 unresolved externals，我完全不知道为什么会这样。我以前在尝试编写自己的析构函数时遇到过这个错误，但我只是通过删除那段代码来解决这个问题。

谢谢，如果我对我提到的一些事情使用了错误的术语，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:29:00.183

静态数据成员在类中*声明*，但必须在一个翻译单元（= .cpp 文件）中*定义。*将以下内容放入一个 .cpp 文件（最好是 Nod.cpp）：

```
counter Nod::ctr; 
```

顺便说一句，您可以只使用 an`int`而不是 custom class `counter`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:49:02.787

我以前也犯过这个问题。然后我读了 Scott Meyers 的一篇文章。他建议使用静态函数，而不是类静态变量。这意味着您可以在一个地方声明和定义一个变量。以下打印：

> 0 1 2 3 4 5 6 7 8 9

```
#include <iostream>

int next_index(void)
{
  static int index = 0;
  return index++;
}

int main(void)
{
  for (int i = 0; i < 10; ++i) {
    std::cout << next_index() << ' ';
  }
} 
```

在您的情况下，您将输入以下内容：

```
Nod(Punct &temp)
 {  
     pct = temp;    
     index = next_index();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:28:24.147

问题是`Nod::ctr`仅*声明*但*未定义*。

```
class Nod
{
    // Declare the counter variable
    static counter ctr;

    ...
};

// Define the counter variable
counter Nod::ctr; 
```

*定义*当然应该在源文件中，而不是头文件中，否则您将得到多个定义错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:32:49.550

从您的问题描述来看，解决方案要简单得多。

您有一个简单的问题，只需使用

```
class Nod   
{  
static int ctr;

public: 
 int index;      
   Nod()
 {  
     ctr++;  //Increment the counter every time a object is created
 }
 Nod() {}   
}; 

//Allocate memory also

int Nod::ctr; 
```

如果有超过 1 种构造函数，则在每个构造函数中添加计数器增量。

# zend-framework2 - 如何在 Zend Framework2 中使用子表单

> ID：13706219
> 
> 赞同：1
> 
> 时间：2012-12-04T15:25:32.570
> 
> 标签：zend-framework2, subforms

有没有办法在 Zend Framework2 中使用 zend 子表单。当我在互联网上进行搜索时，我发现了许多示例，这些示例展示了如何使用 Zend 子表单，但使用的是 Zend Framework1。

如果有人有一个可以通过基本示例的链接/示例，那就太好了。

任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:36:11.837

因为 Zend\Form 是树形结构，所以您可以使用表单名称将另一个表单添加到您的表单中。像这样：

```
$form = new \Zend\Form\Form();
$form->add(array(
    'name' => 'username',
    'type'  => 'Zend\Form\Element\Text',
));

$subForm = new \Zend\Form\Form();
$subForm->setName('subform');
$subForm->add(array(
    'name' => 'email',
    'type'  => 'Zend\Form\Element\Text',
));

$form->add($subForm);

$form->prepare();

$helper = new Zend\Form\View\Helper\FormText();
echo $helper($form->get('username')); //<input type="text" name="username" value="">
echo $helper($form->get('subform')->get('email')); //<input type="text" name="subform[email]" value=""> 
```

请注意，“子表单”输入名称将自动添加表单名称作为前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T17:18:22.513

我已经使用它几个小时了，据我了解，zf1 子表单功能在 zf2 中通过使用嵌套字段集来解决。

`\Zend\Form\Fieldset`也是 的父类`\Zend\Form\Form`。

上一个答案对我来说似乎是正确的，但如果您更喜欢将表单和子表单保存在单独的类中，请阅读以下内容：

[http://zf2.readthedocs.org/en/latest/modules/zend.form.collections.html](http://zf2.readthedocs.org/en/latest/modules/zend.form.collections.html)

如果您暂时不感兴趣，请忽略实体和水合的东西，并查看`CreateProduct`类，它是使用 FieldSet`ProductFieldset`作为子表单的表单。在渲染时，子表单字段将被命名为

```
<input ...name="product[el1]" ... > 
```

（`product`子表单的名称在哪里）。并且 $form->getData() 将返回

```
array('product'=>array(...)) 
```

注意：您需要调用`$form->prepare()`; 在渲染之前，否则不会处理嵌套。

# php - Zend Framework 2 中公用文件夹的自定义布局

> ID：13706220
> 
> 赞同：1
> 
> 时间：2012-12-04T15:25:44.053
> 
> 标签：php, zend-framework2

我的公用文件夹中有模板文件夹。

我希望有机会从我的管理面板上传不同的布局并将它们放到 public/templates 文件夹中。

那我怎样才能改变标准布局呢？

```
$template = 'christmas.phtml';
$viewModel = new ViewModel();
$viewModel->setTemplate('/../../public/templates/'.$template); 
```

不工作:(

我也尝试过这种方式（改变布局）从当前：

```
$this->layout('../../public/templates/'.$template); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:18:53.737

我找到了解决方案。我在 module.config.php 中添加了一行：

```
'view_manager' => array(
    ...
    'template_path_stack' => array(
        __DIR__ . '/../view',
        __DIR__ . '/../../../public' // newLine
    ),
), 
```

然后只需在控制器中使用它：

```
$template = 'sometemplate.phtml';
$this->layout('templates/'.$template); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:28:31.747

你可以尝试`$viewModel->setTemplate(APPLICATION_PATH .'/../public/templates/'.$template);`或`$viewModel->setTemplate('./../../public/templates/'.$template);`代替`$viewModel->setTemplate('/../../public/templates/'.$template);`。因为我猜你想从应用程序目录上去，而不是从根目录上去，`$template = 'christmas.phtml';`应该是`$template = 'christmas';`

如果没有`APPLICATION_PATH`常量，您可以在 index.php 文件中定义它。如果你不喜欢定义它，你可以使用`realpath('<path/to/your/public/templates/>')`方法。

# android - 嵌套片段和后栈

> ID：13706228
> 
> 赞同：19
> 
> 时间：2012-12-04T15:26:09.170
> 
> 标签：android, android-fragments, android-nested-fragment

Back Stack 是否支持与 Android 中的嵌套 Fragment 交互？

如果是这样，我做错了什么？在我的实现中，后退按钮完全忽略了我将此事务添加到后退堆栈的事实。我希望这不是因为嵌套片段的问题，而只是我做错了一些事情。

以下代码位于我的一个片段中，用于将新片段与当前显示的任何嵌套片段交换：

```
 MyFragment fragment = new MyFragment();
     FragmentTransaction ft = getChildFragmentManager().beginTransaction();
     ft.setCustomAnimations(R.animator.slide_in_from_right, R.animator.slide_out_left, R.animator.slide_in_from_left, R.animator.slide_out_right);
     ft.addToBackStack(null);
     ft.replace(R.id.myFragmentHolder, fragment);
     ft.commit(); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-06T11:44:56.267

我有同样的问题，我想嵌套片段，并为每个嵌套片段保留一个后堆栈。

但是......似乎这种情况不是由 v4 支持库处理的。在库中的 FragmentActivity 代码中，我可以找到：

```
public void onBackPressed() {
    if (!mFragments.popBackStackImmediate()) {
        finish();
    }
} 
```

mFragments 代表活动的 FragmentManager，但似乎该管理器并未将流行“传播”给子管理器。一种解决方法是在子管理器上手动调用 popBackStackImmediate()，就像从 FragmentActivity 继承的活动中这样：

```
private Fragment myFragmentContainer;

    @Override
    public void onBackPressed() {
            if (!myFragmentContainer.getChildFragmentManager().popBackStackImmediate()) {
                finish(); //or call the popBackStack on the container if necessary
            }
    } 
```

可能有更好的方法，更自动化的方法，但根据我的需要，没关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-04T09:37:45.443

在我当前的项目中，我们有多个“嵌套层”，所以我想出了以下解决方法，只为顶级片段管理器自动弹出回栈：

```
@Override
public void onBackPressed() {
    SparseArray<FragmentManager> managers = new SparseArray<>();
    traverseManagers(getSupportFragmentManager(), managers, 0);
    if (managers.size() > 0) {
        managers.valueAt(managers.size() - 1).popBackStackImmediate();
    } else {
        super.onBackPressed();
    }
}

private void traverseManagers(FragmentManager manager, SparseArray<FragmentManager> managers, int intent) {
    if (manager.getBackStackEntryCount() > 0) {
        managers.put(intent, manager);
    }
    if (manager.getFragments() == null) {
        return;
    }
    for (Fragment fragment : manager.getFragments()) {
        if (fragment != null) traverseManagers(fragment.getChildFragmentManager(), managers, intent + 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-20T16:19:28.427

从**API 26**开始，有一个[setPrimaryNavigationFragment](https://developer.android.com/reference/android/app/FragmentTransaction.html#setPrimaryNavigationFragment(android.app.Fragment))方法`FragmentTransaction`可用于

> 将此 FragmentManager 中的当前活动片段设置为主导航片段。

这意味着

> 如果没有提供要弹出的 ID 或事务名称，将首先调用主导航片段的子 FragmentManager 来处理委托的导航操作，例如 FragmentManager.popBackStack()。片段系统之外的导航操作可以选择将这些操作委托给由 FragmentManager.getPrimaryNavigationFragment() 返回的主导航片段。

正如@la_urre 在接受的答案中所提到的，正如您在`FragmentActivity`'s 的源代码中所看到的那样，`FragmentActivity`'s`onBackPressed`会调用它`FragmentManager`的 's `popBackStackImmediate()`，这反过来会检查是否存在`mPrimaryNav`（我假设的主要导航）片段，获取它的子片段管理器并弹出它的backstack。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-07-15T16:15:14.423

```
@Override
public void onBackPressed() {
    FragmentManager fm = getSupportFragmentManager();
    if (fm.getBackStackEntryCount() > 0) {
        fm.popBackStack();
        return;
    }
    finish();
} 
```

# javascript - 设置要忽略的类数组的最佳方法

> ID：13706232
> 
> 赞同：3
> 
> 时间：2012-12-04T15:26:34.127
> 
> 标签：javascript, jquery

我在 jQuery 脚本中有以下 if 语句，它检查图像是否具有“忽略”类，如果是，它将忽略它。`this`是之前在我页面的特定部分中找到的脚本的图像：

```
if(!$(this).hasClass('ignore')) {
 //do something
} 
```

如何设置它以便我可以存储一个类数组，然后让 if 语句检查该数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T15:29:44.397

`Array`像往常一样创建一个`push`你想忽略的类。

在你的`if`语句中做一个`.not()`选择器并通过`Array`调用`join`函数传入你的值。

* * *

```
var classes = new Array(".ignore", ".something");

// on a single img

if(!$(this).is(classes.join(",")) {
    //do something to one
}

// on a collection of imgs

$("img").not(classes.join(", "));

$("img").not(classes.join(", ")).each(function(){
    // do something to one
}); 
```

* * *

[http://jsfiddle.net/hEsPd/1/](http://jsfiddle.net/hEsPd/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T15:28:23.113

使用`is()`函数而不是`hasClass()`. 有关文档的更多信息：http: [//api.jquery.com/is/](http://api.jquery.com/is/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:30:25.520

```
if(!$(this).is("." + yourArray.join(", ."))) {
 //do something
} 
```

或使用香草 JS

```
var regex = new Regex("(" + yourArray.join("|") + ")");
if(!this.className.match(regex)) {
   //do something
} 
```

# validation - 下拉 MVC 验证失败

> ID：13706237
> 
> 赞同：0
> 
> 时间：2012-12-04T15:26:55.907
> 
> 标签：validation, ef-code-first, html.dropdownlistfor, asp.net-mvc-viewmodel

我在 EF 中使用代码优先。下拉列表中的验证似乎失败，并出现错误 System.NullReferenceException: Object reference not set to an instance of an object。当我保存记录并故意将控件留空以测试验证时，就会发生这种情况。即使下拉列表本身有选择，它也会发生。

这是我的部分观点：

```
<div class="editor">
    @Html.LabelFor(model => model.EmployeeID)
    @Html.DropDownListFor(model => model.EmployeeID, new SelectList(Model.Employees, "Value", "Text"))
    @Html.ValidationMessageFor(model => model.EmployeeID)
</div> 
```

如果我使用文本框验证工作：

```
<div class="editor">
    @Html.LabelFor(model => model.EmployeeID)
    @Html.TextBoxFor(model => model.EmployeeID, new { style = "width: 250px;" })
    @Html.ValidationMessageFor(model => model.EmployeeID)
</div> 
```

这是我的创建控制器操作：

```
 public ActionResult Create()
{
    var e = iEmployeeRepository.GetAll();
    var visitorLogViewModel = new VisitorLogViewModel
    {
        Employees = e.Select(x => new SelectListItem
        {
            Value = x.EmployeeID,
            Text = x.EmployeeName
        })
    };
    return View(visitorLogViewModel);
}

//
// POST: /VisitorLogs/Create

[HttpPost]
public ActionResult Create(VisitorLog visitorlog)
{
    if (ModelState.IsValid) {
        iVisitorlogRepository.Add(visitorlog);
        iVisitorlogRepository.Save();
        return RedirectToAction("Search");
    } else {
        return View();
    }
} 
```

我的视图模型：

```
 public class VisitorLogViewModel
{
    public int Id { get; set; }

    [Display(Name = "Visitor Name")]
    public string VisitorName { get; set; }

    [Display(Name = "Company Name")]
    public string CompanyName { get; set; }

    [Required(ErrorMessage = "Employee ID is required.")]
    [Display(Name = "GB Employee")]
    public string EmployeeID { get; set; }

    [Display(Name = "Visit Reason")]
    public string VisitReason { get; set; }

    [Display(Name = "Time In")]
    public DateTime TimeIn { get; set; }

    [Display(Name = "Time Out")]
    public DateTime TimeOut { get; set; }

    [Display(Name = "GB Employee")]
    public string EmployeeName { get; set; }

    public IEnumerable Employees { get; set; }
    public VisitorLog VisitorLog { get; set; }
} 
```

我的部分验证模型：

```
 [MetadataType(typeof(VisitorLogMetaData))]
public partial class VisitorLog
{

}

public class VisitorLogMetaData
{
    [Required(ErrorMessage = "Visitor name is required.")]
    [MaxLength(128)]
    public string VisitorName { get; set; }

    [Required(ErrorMessage = "Company name is required.")]
    [MaxLength(128)]
    public string CompanyName { get; set; }

    [Required(ErrorMessage = "GB Employee is required.")]
    [MaxLength(128)]
    public string EmployeeID { get; set; }

    [Required(ErrorMessage = "Visit reason is required.")]
    [MaxLength(254)]
    public string VisitReason { get; set; }

    [Required(ErrorMessage = "Time in is required.")]
    public DateTime TimeIn { get; set; }

    [Required(ErrorMessage = "Time out reason is required.")]
    public DateTime TimeOut { get; set; }
} 
```

最后是我的模型：

```
 public partial class VisitorLog
{
    public int Id { get; set; }
    public string VisitorName { get; set; }
    public DateTime TimeIn { get; set; }
    public DateTime TimeOut { get; set; }
    public string CompanyName { get; set; }
    public string EmployeeID { get; set; }
    public string VisitReason { get; set; }

    // Navigation properties
    [ForeignKey("EmployeeID")]
    public virtual Employee Employee { get; set; }
} 
```

我读到 MVC 剃须刀中有一个关于 DropDownListFor 的错误，但我不知道这是否适用于我的情况。我已经尝试了一些解决方案，但它们对我不起作用。我正在使用 4.5 框架。

谢谢。

编辑：

我注意到的一件事是，当我提交页面并且错误在下拉元素上停止时：

```
@Html.DropDownListFor(model => model.EmployeeID, new SelectList(Model.Employees, "Value", "Text")) 
```

Model.Employees 中的模型为空，就像提交页面时它失去了绑定一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:02:27.557

好的，我对我的课程做了一些根本性的改变。首先，我更改了控制器中的 post 方法。以前我将模型传递给帖子，现在我传递视图模型并将其映射到模型，然后通过我的存储库保存：

```
 //
    // POST: /VisitorLogs/Create

    [HttpPost]
    public ActionResult Create(VisitorLogViewModel visitorLogViewModel)
    {
        var e = iEmployeeRepository.GetAll();
        VisitorLog visitorLog = new VisitorLog();
        visitorLog.Id = visitorLogViewModel.Id;
        visitorLog.VisitorName = visitorLogViewModel.VisitorName;
        visitorLog.CompanyName = visitorLogViewModel.CompanyName;
        visitorLog.EmployeeID = visitorLogViewModel.EmployeeID;
        visitorLog.TimeIn = visitorLogViewModel.TimeIn;
        visitorLog.TimeOut = visitorLogViewModel.TimeOut;
        visitorLog.VisitReason = visitorLogViewModel.VisitReason;
        visitorLogViewModel.Employees = new SelectList(e, "EmployeeID", "EmployeeName");

        if (ModelState.IsValid)
        {
            iVisitorlogRepository.Add(visitorLog);
            iVisitorlogRepository.Save();
            return RedirectToAction("Search");
        } else {
            return View(visitorLogViewModel);
        }
    } 
```

接下来，我必须将“必需”属性（验证）添加到视图模型：

```
 public class VisitorLogViewModel
{
    public int Id { get; set; }

    [Required(ErrorMessage = "Visitor name is required.")]
    [MaxLength(128)]
    [Display(Name = "Visitor Name")]
    public string VisitorName { get; set; }

    [Required(ErrorMessage = "Company name is required.")]
    [MaxLength(128)]
    [Display(Name = "Company Name")]
    public string CompanyName { get; set; }

    [Required(ErrorMessage = "GB Employee is required.")]
    [MaxLength(16)]
    [Display(Name = "GB Employee")]
    public string EmployeeID { get; set; }

    [Required(ErrorMessage = "Visit Reason is required.")]
    [MaxLength(254)]
    [Display(Name = "Visit Reason")]
    public string VisitReason { get; set; }

    [Display(Name = "Time In")]
    public DateTime TimeIn { get; set; }

    [Display(Name = "Time Out")]
    public DateTime TimeOut { get; set; }

    [Display(Name = "GB Employee")]
    public string EmployeeName { get; set; }

    public SelectList Employees { get; set; }
} 
```

不确定这是否是最有效的方法，但现在一切正常。如果有人发现这种方法有问题，请告诉我。

# html - 表单值不起作用

> ID：13706240
> 
> 赞同：0
> 
> 时间：2012-12-04T15:27:07.690
> 
> 标签：html, syntax

我有一个 index.php 页面，其中有一个登录表单。

索引.php：

```
<?php include_once("include/header.php");?>

</head>

<body>

<div class="mainContainer">
    <div class="header"><!--Header start-->

        <!--Inlcluding Login Barr-->
        <?php include("include/loginBar.php");?>           

    <div class="clear"></div>
    </div><!--Header end-->

    <div class="centerContent"><!--Center content start-->        
    </div><!--center content end-->

    <div class="clear"></div>
    <?php include("include/footer.php");?> 

</div>

</body>
</html> 
```

header.php：

```
<?php session_start();
ob_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 

<link type="text/css" href="css/mainStylesheet.css" rel="stylesheet" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

页脚.php

```
<? ob_end_flush(); ?> 
```

登录栏.php

```
 <div class="loginBar">

            <form name="Login" id="Login" action="actions.php" method="post">
                  <span class="label">Login</span> 
                  <input type="text" name="name" id="username" value="Username" onBlur="if(this.value==''){this.value=this.defaultValue;}" onFocus="if(this.value==this.defaultValue){this.value='';}" />
                  <input type="password" name="password" id="userpassword" value="Password" onBlur="if(this.value==''){this.value=this.defaultValue;}" onFocus="if(this.value==this.defaultValue){this.value='';}"/>
                  <input class="loginButton" id="loginButton" type="submit" value="Go" />

                  <input type="hidden" value="loginValues"  name="login" id="login"/>
            </form>
        </div> 
```

动作.php

```
<?php session_start();

echo $_POST['name']; echo $_POST['password'];

if(isset($_POST['login']) && $_POST['login']=="loginValues"){

    echo "HAHAHAHAHA";  
}

?> 
```

问题是，表单值在actions.php 页面中的IF 块之外回显，但在该块内没有任何作用。这意味着表单值已成功传输。

在 firebug 控制台中，我看到一条错误消息，指出“未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则在某些浏览器配置中，该文档将呈现乱码文本。页面必须在文档或传输协议中声明。”

我已经尝试了所有选项并将这一行放在 HEAD tag : 之后 `<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`，但没有任何效果。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:33:04.580

除非它只是您复制/粘贴的拼写错误，否则您有一个未关闭的输入，这可能会杀死它之后的输入（在这种情况下是登录）。

```
<input class="loginButton" id="loginButton" type="submit" value="Go" 
```

应该

```
<input class="loginButton" id="loginButton" type="submit" value="Go" /> 
```

# drupal - Drupal 网络表单。嵌入具有特定内容类型的节点

> ID：13706241
> 
> 赞同：1
> 
> 时间：2012-12-04T15:27:09.603
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-webform

我想创建一个表单，用户可以在其中从站点订购一些出版物，其中可用的出版物是从系统（具有特定内容类型的节点）自动加载/嵌入的。

我创建了一个包含一些基本字段的 Web 表单：姓名、电子邮件...

如何添加对这些出版物的字段引用？

喜欢：

* * *

`Name`：`____________________________________`

`Email`：`___________________________________`

`Publications`：

`Publication 1` 数量`___`

`Publication 2` 数量`___`

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:31:32.200

您的解决方案是添加一个充当节点引用的 webform 组件，也许[这](https://drupal.stackexchange.com/questions/25998/webform-and-node-reference)会有所帮助。

# java - 连接数据库时出现异常

> ID：13706246
> 
> 赞同：0
> 
> 时间：2012-12-04T15:27:24.710
> 
> 标签：java, mysql

当我运行此代码时：

```
String url = "jdbc:mysql://localhost:3306/staion_meteo";// phpmyadmin
String user = "root";
String passwd="" ;
Connection conn  = DriverManager.getConnection(url, user, passwd);
System.out.println("you are connected to the data base : "+"station_meteo"); 
```

我得到以下异常：

> 找不到适合 jdbc:mysql://localhost:3306/staion_meteo 的驱动程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:37:16.980

先做这个...

```
Class.forName("com.mysql.jdbc.Driver"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:37:04.533

用这个

```
Class.forName("com.mysql.jdbc.Driver").newInstance(); 
```

在您连接之前。还要确保`mysql-connector.jar`在您的课程路径中。

# mysql - MySql IN 参数 - VarChar IN 参数 val 在存储过程中使用时是否需要单引号？

> ID：13706247
> 
> 赞同：0
> 
> 时间：2012-12-04T15:27:25.300
> 
> 标签：mysql, stored-procedures, asp-classic

MySql IN 参数 - VarChar IN 参数 val 在存储过程中使用时是否需要单引号？

我已经像平常一样创建了我的经典 ASP 代码，但我没有让列更新。

我需要引用 VarChar 参数吗？

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `usp_update_map_record` $$
CREATE DEFINER=`ddddddd`@`%` PROCEDURE `usp_update_map_record`(
  IN p_intGrillId INT(10),
  IN p_intPartId INT(10),
  IN p_ManRef VARCHAR(10)
)
BEGIN

UPDATE parts_map SET manualref = 'p_ManRef' WHERE grillid = p_intGrillId AND partid = p_intPartId;

END $$

DELIMITER ; 
```

脚本部分：

```
With comm
    .ActiveConnection = conn
    .CommandType = adCmdStoredProc
    .CommandText = "usp_update_map_record"
    .Parameters.Append .CreateParameter("p_intGrillId", adInteger, adParamInput, 10, intGrillId)
    .Parameters.Append .CreateParameter("p_intPartId", adInteger, adParamInput, 10, CIntPartId)
    .Parameters.Append .CreateParameter("p_ManRef", adVarChar, adParamInput, 10, strManualRef)
    .Execute
End With 
```

我还测试了所有 3 个值，它们不是空的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:29:40.403

这是不正确的：

```
UPDATE parts_map SET manualref = 'p_ManRef'
                                 ^--      ^-- 
```

引号将该“字段”转换为字符串。- 您不是在比较两个字段，而是将 manualref 字段与一个字符串进行比较，该字符串的值恰好是您的 sproc 参数的名称。

尝试：

```
UPDATE parts_map SET manualref = @p_ManRef
                                 ^--- variable/parameter indicator 
```

# java - 如何为 OpenMQ 编写一个简约的 Java 客户端

> ID：13706249
> 
> 赞同：0
> 
> 时间：2012-12-04T15:27:34.207
> 
> 标签：java, openmq

请帮助 MQ nubee 编写他的第一个 Java 客户端，我在 Oracle 文档中有点迷失了。我已经启动并运行了 OpenMQ。在 OpenMQ 管理控制台中，我建立了一个名为“MyFirstTest”的代理，6 个服务中有 1 个是“jms”（这似乎是最容易使用的服务），该服务也已启动并正在运行（例如：服务状态正在运行）。所以我来到了有趣的部分。我如何连接到代理“MyFirstTest”，然后发送一条消息，最后但至少从第二个客户端读取这条消息。

我想我必须找到已经存在的队列而不是使用新的 com.sun.messaging.Queue

任何示例或链接表示赞赏。

```
public class HelloWorldMessage {
public static void main(String[] args) {
    try {
        ConnectionFactory myConnFactory;
        Queue myQueue;

        myConnFactory = new com.sun.messaging.ConnectionFactory();
        Connection myConn = myConnFactory.createConnection();
        Session mySess = myConn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        myQueue = new com.sun.messaging.Queue("MyFirstTest");

        //Create a message producer.
        MessageProducer myMsgProducer = mySess.createProducer(myQueue);

        //Create and send a message to the queue.
        TextMessage myTextMsg = mySess.createTextMessage();
        myTextMsg.setText("Hello World");
        System.out.println("Sending Message: " + myTextMsg.getText());
        myMsgProducer.send(myTextMsg);

        //Create a message consumer.
        MessageConsumer myMsgConsumer = mySess.createConsumer(myQueue);

        //Start the Connection created in step 3.
        myConn.start();

        //Receive a message from the queue.
        Message msg = myMsgConsumer.receive();

        //Retreive the contents of the message.
        if (msg instanceof TextMessage) {
            TextMessage txtMsg = (TextMessage) msg;
            System.out.println("Read Message: " + txtMsg.getText());
        }

        //Close the session and connection resources.
        mySess.close();
        myConn.close();

    } catch (Exception jmse) {
        System.out.println("Exception occurred : " + jmse.toString());
        jmse.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:05:04.557

```
//Assuming server supports multiple clients, your client can look like this:
//Ref: http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html
//untested code
class client{

 .....
 ....

 private static Socket echoSocket;

 //main can be in another class also
 public static void main(.... args[]){

   client nodeI,nodeII;
   nodeI = new client("speaker/sender");
   nodeII = new client("listener/recvr");
   nodeI.connect2Server();
   nodeI.sendMssgInstr2Server(node);

 }

 public void connect2Server(){

  try {
            echoSocket = new Socket("<jms.srvr.ip>", <port#>);                         
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: <jms.srvr.ip>.");
            System.exit(1);
        } 
 }

 public void sendMssgInstr2Server throws IOException (client RecipientClientNodeII){
   out = new PrintWriter(echoSocket.getOutputStream(), true);
   out.println("sending message:"+mssgQueue.poll() + " =>recipient client is now reading:"+RecipientClientNodeII.receive);
 }

public void receive(){
  try{
      in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream())); 
       }catch (IOException e) {
            System.err.println("Couldn't get I/O for "+"the connection to: <jms.srvr.ip>.");
            System.exit(1);
     }

  while(1) 
    in.readLine();
 }

//other methods
  .......
  .......

}; //class client ends 
```

# python-sphinx - 链接到狮身人面像中的人物

> ID：13706250
> 
> 赞同：4
> 
> 时间：2012-12-04T15:27:54.067
> 
> 标签：python-sphinx, restructuredtext

我的文档中有一些图像在 Sphinx 中创建为一组 reST 文件。我更喜欢让它们保持很小，并且我希望用户单击它们以获得更大的图像。较小的图像不是出于文件大小的原因，而是出于演示的原因。我没有找到将标签`image:`或`figure:`与`ref:`或结合起来的语法方式`link:`。

```
.. image:: _static/my_image_small.png 
```

我在同一个文件夹中有一个更大的版本：`my_image_large.png`.

如果您想出一个解决方案，较大的图像应该只是一个带有明确链接的文件，还是我应该创建一个带有附加图像的 reST 文件：标签？另一种方法是使用 reST 文件中的图像大小，但我仍然不知道如何创建从小图像到大图像的链接。有没有办法绕过 Sphinx 生成器，只提供我想要的 HTML？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T20:32:28.547

有两种方法可以做到。

首先是插入一些“原始”HTML：

```
.. raw:: html

    <a href=....><img src=.... 
```

二是让图片可点击。这样您就可以将其链接到更大的图像：

```
.. image:: _static/my_image_small.png
   :target: _static/my_image_large.png 
```

顺便说一句，您可以提供更多选择。[请参阅重组文本文档](http://docutils.sourceforge.net/docs/ref/rst/directives.html#image)中的完整列表。

# seo - 关键字和域

> ID：13706254
> 
> 赞同：-1
> 
> 时间：2012-12-04T15:28:05.627
> 
> 标签：seo

我发现我想在搜索引擎中找到的关键字之一有一个我可以注册的域。这对于一般项目来说不是一个好名字，所以也不是对所有网络来说都是一个好名字，但它是一个很好的定义或部分解释。注册这样的东西只是为了将它指向网络的一部分是一个好主意吗？我的意思是从SEO的角度来看这有效吗？但最重要的是，这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:28:21.910

有趣的问题，就 SEO 而言，这不是一个好习惯，谷歌会惩罚你的网站（所以我不推荐它），但是............如果这个词真的很容易记住并且你认为用户会尝试访问您的网站而无需搜索，这可能是“可接受的”，因为您不会失去在线访问。无论如何..你应该避免黑帽技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T12:04:52.790

Exact Match Domain is what you are referring to, as answered above is not advisable, but if you find it useful you can register and go ahead. How to keep you off from penalties.

1.  Do not stuff KW's in title and descriptions, as your domain already has the KW
2.  When doing off-page SEO, Do not choose anchor text as your Main KW, instead use URL itself as anchor text and some generic anchor text like click here, more info, read more.

These can save you from penalty. I still see a lot of EMD's ranking just by being careful with the usage of KW's and anchor text.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T09:40:03.363

谷歌更新“熊猫”、“企鹅”的更高版本不鼓励这种技术。将您的域命名为与 www.healthcaremedicine.com 等特定研究相同的域。这意味着如果有人搜索产品保健药物。您的网站显示在顶部。我想这就是你的意思。在过去的几年里，人们将他们的网站命名为更接近搜索结果，但现在不建议这样做。您的网站可能会在一段时间内登上榜首。但这不会持续很长时间。您的网站应该提供它向访问者承诺的内容。至少他们必须花一些时间。

# iphone - CGAffineTransform 和缩放到图像的中心

> ID：13706255
> 
> 赞同：9
> 
> 时间：2012-12-04T15:28:08.570
> 
> 标签：iphone, ios, scaling, cgaffinetransform

[我开始使用Rory Lewis 为 Absolute Beginners 编写的 iPhone 和 iPad 应用程序](https://rads.stackoverflow.com/amzn/click/com/1430227001)学习 Objective-c，但我被困在第 5 章。

**我想制作一个缩小图像的按钮。**
我的问题是，在我编写完所有代码后，图像会缩小到 UIImageView（左上角）的点 (0, 0)，而在视频中，图像会缩小到其中心。我做了一些研究，发现`CGAffineTransform`使用对象的中心进行平移、旋转等。

那么为什么它在我的情况下不起作用？

我有最新的 Xcode 版本并且没有做任何奇怪的事情。我希望我已经清楚了。对不起我的英语不好。

**编辑** 对不起代码，但我用手机写了这个问题。无论如何，被定罪的部分是这样的

```
- (IBAction)shrink:(id)sender {

if(hasShrink == NO){
    [shrinkButton setTitle:@"Grow" forState:UIControlStateNormal];
}
else if(hasShrink == YES){
    [shrinkButton setTitle:@"Shrink" forState:UIControlStateNormal];
}
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:1.0];
        myIcon.transform = CGAffineTransformMakeScale(.25, .25);
        hasShrink = YES;
        [UIView commitAnimations]; 
```

}

所有动画都正确编写，应用程序确实可以工作，它只是缩小到左上角。为什么默认情况下该点没有设置为 UIImageView 的中心？

**编辑：** 我发现这是由 AutoLayout 引起的问题。一旦被禁用，一切都很顺利；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-11T00:22:22.837

如果您正在转换一个由自动布局管理的视图~~，~~您可能会遇到一些奇怪的副作用。[有关更多详细信息，请参阅此答案。](https://stackoverflow.com/a/14105757/238948)

我最终采用的解决方案是将要转换的视图封装在另一个大小完全相同的视图中。外部视图应用了适当的布局约束，而内部视图只是在其容器中居中。将`CGAffineTransform`比例变换应用到内部视图现在可以正确居中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-25T04:54:21.567

老问题......但以防万一其他人来看：

`CGAffineTransform`围绕锚点的行为（旋转、缩放）。

如果您将大小设置为 0, 0，则您的锚点设置为 0, 0。如果您希望将其调整为不同的点，例如图像的中心，则需要更改锚点。

锚点是图层的一部分

所以如果你有一个`UIImageView`被调用的`imageview`，你会像这样调用来将锚点设置到 imageview 的中心：

```
[imageview.layer setAnchorPoint:CGPointMake(0.5, 0.5)]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-04T15:34:03.497

尝试这样的事情：

```
CGAffineTransform t = CGAffineTransformMakeScale(0.5, 0.5);
CGPoint center = imageView.center; // or any point you want
[UIView animateWithDuration:0.5
                 animations:^{
                    imageView.transform = t;
                    imageView.center = center;
                 }
                 completion:^(BOOL finished) {
                    /* do something next */
                 }]; 
```

下次显示您的代码。帮助你会更容易。

检查这个项目：[https ://github.com/djromero/StackOverflow/archive/Q-13706255.zip](https://github.com/djromero/StackOverflow/archive/Q-13706255.zip)

您必须研究自动布局和自动调整大小如何影响您的视图。在上面的项目中，两者都被禁用，让你看看它是如何工作的。

# python - 将 Python 切片语法传递给函数

> ID：13706258
> 
> 赞同：20
> 
> 时间：2012-12-04T15:28:16.577
> 
> 标签：python, syntax, slice

在 Python 中，是否可以完全封装常见的切片语法并传递它？我知道我可以使用`slice`或`__slice__`模拟切片。但我想传递与 . 一起使用的方括号中完全相同的语法`__getitem__`。

例如，假设我编写了一个函数来返回列表的某个片段。

```
def get_important_values(some_list, some_condition, slice):
    elems = filter(some_condition, some_list)
    return elems[slice] 
```

如果我手动传入一个切片对象，这很好用：

```
In [233]: get_important_values([1,2,3,4], lambda x: (x%2) == 0, slice(0, None))
Out[233]: [2, 4] 
```

但是我想让用户通过的切片与他们使用的切片*完全相同*`__getitem__`：

```
get_important_values([1,2,3,4], lambda x: (x%2) == 0, (0:-1) )

# or

get_important_values([1,2,3,4], lambda x: (x%2) == 0, (0:) ) 
```

显然这会产生语法错误。但是有什么方法可以使这项工作，而不是为`x:y:t`类型切片编写我自己的迷你解析器，并强制用户将它们作为字符串传递？

**动机**

我可以让这个示例函数返回一些可直接切片的内容，例如`filter(some_condition, some_list)`，这将是一个列表的整个结果。然而在我的实际例子中，内部函数要复杂得多，如果我提前知道用户想要的切片，我可以大大简化计算。但我希望用户不必做太多额外的事情来提前告诉我切片。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T15:37:15.700

也许以下内容对您有用：

```
class SliceMaker(object):
  def __getitem__(self, item):
    return item

make_slice = SliceMaker()

print make_slice[3]
print make_slice[0:]
print make_slice[:-1]
print make_slice[1:10:2,...] 
```

这个想法是您使用`make_slice[]`而不是手动创建`slice`. 通过这样做，您将能够使用熟悉的方括号语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:34:21.430

简而言之，没有。该语法仅在`[]`运算符的上下文中有效。我可能会建议接受一个元组作为输入，然后将该元组传递给`slice()`. 或者，也许您可​​以重新设计您正在做的任何事情，以便`get_important_values()`以某种方式实现为可切片对象。

例如，您可以执行以下操作：

```
class ImportantValueGetter(object):
    def __init__(self, some_list, some_condition):
        self.some_list = some_list
        self.some_condition = some_condition

    def __getitem__(self, key):
        # Here key could be an int or a slice; you can do some type checking if necessary
        return filter(self.some_condition, self.some_list)[key] 
```

您可以通过将其变成某种容器 ABC 来做得更好，但这是一般的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:35:36.240

一种方法（对于简单切片）是让切片参数是 dict 或 int，

IE

```
get_important_values([1, 2, 3, 4], lambda x: (x%2) == 0, {0: -1}) 
```

或者

```
get_important_values([1, 2, 3, 4], lambda x: (x%2) == 0, 1) 
```

那么语法将或多或少保持不变。

但是，这行不通，因为当您想做类似的事情时

```
some_list[0:6:10..] 
```

# javascript - 使用自定义模型进行客户端验证？

> ID：13706261
> 
> 赞同：1
> 
> 时间：2012-12-04T15:28:25.630
> 
> 标签：javascript, ruby-on-rails, ruby, simple-form, client-side-validation

我使用客户端验证 gem 及其 simple_form 插件进行客户端验证。我有一个`ActiveModel::Validations`包含的自定义模型并使用 simple_form 来填充它。

```
<%= simple_form_for @solution, :validate => true, :url => solve_problem_path, :html => { :class => 'form-horizontal' } do |f| %>
  <% @solution.fields.each do |label| %>
    <%= f.input label, :validate => { :presence => true } %>
  <% end %>
  <div class="form-actions">
    <%= f.submit 'Solve', :class => 'btn btn-primary' %>
  </div>
<% end %> 
```

定制型号：

```
class Solution < OpenStruct
    include ActiveModel::Validations

    validate do
      @table.each do |key, val|
        errors.add(key, :blank) if val.blank?
      end
    end
    def fields
      @table.keys
    end
  end 
```

但是客户端验证不起作用（服务器端起作用）。

# html - 2 列问题高度 100%

> ID：13706263
> 
> 赞同：0
> 
> 时间：2012-12-04T15:28:28.747
> 
> 标签：html, css, responsive-design

我正在尝试为 SMF 论坛软件制作一个 2 列（侧边栏）响应式主题。我想在右侧粘贴一列，它将其父级的高度扩展 100%。

仅供参考，我刚刚开始将默认主题转换为响应式主题。

通常，我对这些问题或响应式设计没有问题。但是，我无法弄清楚为什么侧边栏的高度与标题的高度保持一致。

侧边栏 HTML 在标题 HTML 之外，在它之前。然而，当你通过检查元素给侧边栏说一个 400 像素的固定宽度时，它也会扩展标题的高度。我对此感到困惑，因为在代码方面它似乎没有意义。

我想如果我有另一双眼睛，有人可以帮我解决这个问题。

[http://xarcms.com/index.php?theme=3](http://xarcms.com/index.php?theme=3)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:57:58.307

我看到的主要内容是您设置了错误的元素样式。您将侧边栏包裹在一个`<aside>`中，它没有浮动，也没有声明大小。因此，您已设置样式的侧边栏内容将扩展为 100%，`<aside>`其本身正在收缩到内容的大小。您需要将样式更改为`<aside>`以使其行为更正确。

除此之外，我目前没有太多其他东西要给您，但是以上内容应该可以帮助您入门。从那里，我会仔细检查您的 CSS，以确保您的其中一种样式的范围不会太广。您可能还想查看您的 HTML 结构，并确保仅在绝对必要的情况下将内容嵌套。如果您仍然遇到问题，请查看是否可以获得仍然显示问题的精简版本，以便我们更轻松地为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:32:00.240

为了解决这个问题，我将 和 区域放在了 div 容器之外。因此，我能够删除 4 个不需要的 div（主要是包装器）。所以简而言之...

切换到这个：

```
<div width wrapper>
<header></header>
<aside floated></aside>
<section></section>
<footer></footer>
</div> 
```

而不是：

```
<div width wrapper>
<section>
<header></header>
<aside floated></aside>
<div></div>
<footer></footer>
</section>
</div> 
```

这似乎更清洁，更有意义。

# sql-server - 在 EXTERNAL_ACCESS 而不是 UNSAFE 中从 SQL CLR 插入 MSMQ？

> ID：13706264
> 
> 赞同：1
> 
> 时间：2012-12-04T15:28:30.543
> 
> 标签：sql-server, clr, msmq, sqlclr

我们使用 MSMQ 将服务中的记录插入到多个位置的 SQL Server 表中。我想从 SQL Server 插入到这个 MSMQ 队列中——这样，我不必想出自己的方法来向每个服务器添加消息，我可以捎带现有的基础设施和代码。

看起来最好的方法是使用 CLR。

但是，我发现从 CLR 创建 MSMQ 消息的所有代码都需要 UNSAFE 模式。有没有办法在 EXTERNAL_ACCESS 模式下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:59:50.850

这很可能是因为 System.Messaging 不是 CLR 支持的库。由于它不是受支持的库，因此不符合 SAFE 或 EXTERNAL_ACCESS 的要求。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ms403279.aspx](http://msdn.microsoft.com/en-us/library/ms403279.aspx)

# java - Spring + Appengine我可以不使用spring security吗？

> ID：13706266
> 
> 赞同：-1
> 
> 时间：2012-12-04T15:28:32.473
> 
> 标签：java, spring, google-app-engine

我们正在我们公司构建一个 web 应用程序，并且 spring 安全配置需要时间，使用 spring security 不是一个好习惯吗？请注意，该项目的安全性要求很高。有什么选择？只使用过滤器和 web.xml 怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:55:33.317

继续并使用过滤器进行身份验证。“不使用spring security”没有错

但是，如果您可以花一些时间在这里阅读他们的官方文档，那么 Spring Security 提供了许多现成的功能。 [http://static.springsource.org/spring-security/site/features.html](http://static.springsource.org/spring-security/site/features.html)

如果您的要求只是允许登录用户访问特定页面，请继续使用过滤器。如果您想要服务层访问安全、LDAP、openid 等内容，请考虑使用 spring security

# vbscript - PC 启动后启动 VBS 脚本

> ID：13706267
> 
> 赞同：9
> 
> 时间：2012-12-04T15:28:34.977
> 
> 标签：vbscript

我想在 PC 启动 (Win XP) 后启动我的简单 VBS 脚本。我不想把这个脚本放在 C:\Documents and Settings\%UserName%\Start Menu\Programs\Startup

我想用脚本来做，有可能吗？

```
Script:<br>
Dim oShell<br>
Set oShell = WScript.CreateObject ("WScript.Shell")<br>
oShell.run "notepad.exe c:\text.txt" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T15:33:55.717

您要么必须将它放在 Startup 文件夹中，要么从注册表中运行它。

对于所有用户，请使用注册表项`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`。

对于当前用户，使用注册表项`HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-16T14:09:24.660

**深入**

**如何自动化 VBScripts 在启动时运行。**

*步骤1*

*   单击`Start -> Run -> cmd`或单击`search`并键入`cmd`
*   按回车
*   输入`assoc .vbs`命令提示符应该打印哪个`.vbs=VBSFile`
*   输入`ftype VBSFile`命令提示符

应该打印：

```
vbsfile="%SystemRoot%\System32\WScript.exe" "%1" %* 
```

所以，现在您知道您的 vbscript 文件默认使用 WScript 打开。

*   在命令提示符中，键入：

    reg 查询 HKEY_CLASSES_ROOT\Applications\WScript.exe /s

如果你没有看到这个：

```
HKEY_CLASSES_ROOT\Applications\WScript.exe
    (Standard)    REG_SZ    "%SystemRoot%\System32\WScript.exe" "%1" %* 
```

然后您需要执行以下操作，如果您看到以上内容，则可以跳过并转到*第 3 步*：

*第2步*

*   去：

    开始

    跑

*   输入：

    注册表编辑器

*   选择 regedit 按下`enter`（或双击 regedit）并允许程序对您的计算机进行更改

*   导航：

`HKEY_CLASSES_ROOT\Applications\WScript.exe`（如果 WScript.exe 键不存在，右键单击 Applications 并创建新键，将其重命名为 WScript.exe）

*   在右边的空白处，有值的地方，右键单击并
*   选择新的
*   选择字符串值
*   在突出显示新值 #1 的名称下，通过键入（标准）重命名
*   在数据下，双击空值并输入您从上一步获得的值

> "%SystemRoot%\System32\WScript.exe" "%1" %*

*第 3 步*

*   如果您没有打开注册表，

去：

*   开始
*   跑

输入：

```
regedit 
```

选择应用程序，按 Enter 并允许程序对您的计算机进行更改

*   否则，如果 regedit 已打开，则：
*   导航：

HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run

*   右键单击运行文件夹
*   在右边的空白处，有值的地方，右键单击并选择新建
*   选择可扩展字符串值
*   在突出显示新值 #1 的名称下，通过键入您自己的名称重命名，例如 myscript
*   在数据下，双击空值并输入
*   确保其类型为 REG_EXPAND_SZ，即扩展字符串

> ```
> "%SystemRoot%\System32\WScript.exe" "C:\Users\me\myFolder\mySub-folder\myFile.vbs" "%1" %* 
> ```

*   重新启动您的机器。您的 vbs 应该会自动运行

*笔记：*

*   确保将 .VBS 添加到 Path 环境变量中
*   如果您想改用 cscript，请在​​第 2 步中输入：

    reg 查询 HKEY_CLASSES_ROOT\Applications\cscript.exe /s

...而是继续，注意在相关的地方用 cscript 替换 WScript，即这个查询：

```
reg query HKEY_CLASSES_ROOT\Applications\cscript.exe /s 
```

应该产生这个结果：

```
(Standard)    REG_SZ    "C:\Windows\System32\cscript.exe" "%1" %* 
```

*   如果您的键和/或值搞砸了，您可以随时右键单击搞砸的项目并将其删除。但是，如果您想使用终端，您可以随时关注：[http ://ss64.com/nt/reg.html](http://ss64.com/nt/reg.html)
*   要检查 WScript 是否是启动应用程序之一，请按 ctrl+alt+delete，选择任务管理器，单击启动。您应该会看到列出的 Microsoft Windows Based Script Host。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:09:34.437

只是一个约会，每个人都可能已经知道了。

HKLM 适用于机器上的任何用户，因为意味着本地机器

HKCU 仅适用于当前用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T12:53:34.137

简单的方法 ：

制作一个bat文件

```
WScript.exe "Path\to\your\script.vbs" 
```

从 gpedit.msc 将其添加到启动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-08T19:07:06.560

将此代码添加到 vbs 脚本的开头将 myKey 的结尾更改为您要调用的注册表项

```
Set WshShell = CreateObject("WScript.Shell")
myKey = "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run\MyVbsScript"
WshShell.RegWrite myKey,WScript.ScriptFullName,"REG_SZ" 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-03-12T11:40:42.450

您可以通过以下方式从注册表或启动中触发 vbscipt

```
WScript C:\somefloder\somefolder2\yourscript.vbs 
```

你可以把这条线放在一个值上

对于机器上的所有用户 HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run

对于当前用户 HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Run

# batch-file - 从另一个批处理文件更新一个批处理文件

> ID：13706269
> 
> 赞同：0
> 
> 时间：2012-12-04T15:28:35.270
> 
> 标签：batch-file, batch-processing

亲爱的 StackOverFlow 会员，

请帮我处理这个批处理文件。我想使用“SET /P INPUT=%=%”给出的答案并让它永久更新另一个批处理文件。

这是第一个运行以从用户那里获得答案的批处理文件

```
@echo off
cls
echo.
echo .................................................................
echo ..... Specify what the name of the Store is, this will send .....
echo ............... alerts to abd@abc.co.za ..............
echo ................................................................. 
echo.
pause
:option
cls
color 5E
echo. 
echo "............   Press 1 to specify what the store name is......"
echo "............   Press 2 to exit the program   ................."
echo. 
SET /P M=Type from the menu above 1 or 2 then press ENTER:
IF %M%==1 GOTO SEND                                           
IF %M%==2 GOTO EOF  

:SEND
cls
color 0A
set INPUT=
set /P INPUT=Enter Store Name: %=%                            
if "%INPUT%"=="" goto input
echo "You said that the store name is: %INPUT%"

:: Have the user confirm his/her choice
SET /P ANSWER=Is the name correct (Y/N)?     
echo You chose: %ANSWER%                                      
if /i {%ANSWER%}=={y} (goto :yes)                             
if /i {%ANSWER%}=={yes} (goto :yes)                           
goto :no
:yes
echo You pressed YES!... The name is updating     
goto name
:no
echo You pressed NO!... The program will exit
pause
cls
goto eof
:name
::set /A store=%INPUT%
echo %INPUT% >> notify_support.bat
::Terminate the program
:EOF 
```

如您所见，我正在努力指定应该“回显%INPUT% >> notify_support.bat”的位置。这是取自第二个批处理文件的代码

```
@echo off
call senditquiet -s smtp.gmail.com -port 587 -u rsupp0rt@gmail.com -protocol ssl -p access -f rsupp0rt@gmail.com -t 888@gmail.com -subject "Store ABC" -body "Hello there, There is an issue logged at the store.<br>Best regards." 
```

当第一个批处理文件运行时，它会更新第二个批处理文件，但只是将其转储到文件末尾。

我需要 INPUT ECHOed 来替换第二个批处理文件中的“Store ABC”。

请帮忙，我对批处理文件很生疏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:32:46.587

```
echo %INPUT% >> notify_support.bat 
```

该行包含`>>`“在文件末尾转储”的意思。您可以使用单个`>`来覆盖现有的文件内容。这样，您可以重新生成整个文件（无论如何只有 2 行）。

另一种解决方案是实际解析现有文件并替换该文本。您可以使用 来做到这一点`for /F ...`，它允许您遍历文件的行。然后，您可以根据现有文件的（更改的）内容生成一个新文件。缺点是这种文件解析方法特别适用于每行具有相同格式的字段和分隔符的数据文件（如 CSV 文件）。它不太适合解析像批处理文件或程序源文件这样的“复杂”文件。

# php - Joomla 随机查询对象（stdClass）

> ID：13706271
> 
> 赞同：0
> 
> 时间：2012-12-04T15:28:43.377
> 
> 标签：php, joomla

我正在构建一个 Joomla 模板。为此，我需要测试/查询数据库中的两个字段。我试图熟悉`getDBO`课堂，但被困在这里。

这两个查询几乎相同。我需要两个变量`$category`和`$hasField`. 如何将这两个查询合并为一个？这有点多余。

```
$db = JFactory::getDBO(); 
$id = JRequest::getInt('id'); 

$db->setQuery('
   SELECT 
       #__categories.title 
   FROM 
       #__content, 
       #__categories 
   WHERE 
       #__content.catid = #__categories.id 
   AND 
       #__content.id = '.$id
    ); 
$category = $db->loadResult();

$db->setQuery('
   SELECT 
        #__attachments.filename,
        #__attachments.parent_id 
    FROM 
        #__attachments 
    WHERE 
        #__attachments.parent_id =' . $id
    ); 
$hasField = $db->loadResult(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:33:47.163

您可以尝试加入`#__attachments`第一个查询。

```
SELECT 
   #__categories.title,
   #__attachments.filename,
   #__attachments.parent_id 
FROM 
   #__content, 
   #__categories,
   #__attachments 
WHERE 
   #__content.catid = #__categories.id 
AND
   #__attachments.parent_id = #__content.id
AND 
   #__content.id = $id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:36:57.273

我可能错了，因为没有地方可以测试，但它假设就像左连接：

```
SELECT 
   #__categories.title, atch.filename
 FROM 
   #__content, 
   #__categories
 LEFT JOIN
   #__attachments AS atch ON atch.parent_id = #__content.id 
 WHERE 
   #__content.catid = #__categories.id 
 AND 
   #__content.id = '.$id
); 
```

# c# - 使用 NDepend 查找存储过程依赖项

> ID：13706272
> 
> 赞同：1
> 
> 时间：2012-12-04T15:28:44.073
> 
> 标签：c#, ndepend

我正在维护一个大型代码库，它使用 SQL Server 中的数百个存储过程。要删除未使用的程序，我们需要找到仍在使用的程序。我写了一小段 CQL，它可以告诉我所有依赖于 SqlCommand 的方法。大多数情况下，此类的使用由向导生成的 XSD 执行：

```
/// <Name>Stored Procedure Usage</Name>

from m in JustMyCode.Methods

// Find usage of the property setter (principally XSD generated code)
let depth0 = m.DepthOfIsUsing("System.Data.Common.DbCommand.set_CommandText(String)")

// Find usage of the constructor (principally manual code)
let depth1 = m.DepthOfIsUsing("System.Data.SqlClient.SqlCommand..ctor(String,SqlConnection)")

where (depth0 >= 0 || depth1 >= 0)
select new { m, m.ParentType, m.ParentAssembly } 
```

过程名称是一个内联定义并分配给 SqlCommand.CommandText 的字符串：

```
this._adapter.InsertCommand.CommandText = "dbo.InsertStudentAddress"; 
```

有什么办法可以在我的名字中打印出来`select new {}`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:33:44.163

> 有什么方法可以在我的 select new {} 中打印名称？

不，没有办法，NDepend Code Query Linq 不读取字符串常量。这是我们将来可能添加的功能。

# sql - 将数据输入到 Microsoft 数据库时，如何在 SQL 中获取当前日期？

> ID：13706274
> 
> 赞同：1
> 
> 时间：2012-12-04T15:28:46.330
> 
> 标签：sql, sql-server-2008, select

我正在使用 Microsoft SQL Server 和 SQL Server Management Studio。

我有一个名为的列`dateApplied`，它有一个这样的约束：

```
[dateApplied] >= getDate() 
```

当我输入一行时，日期会自动添加到该行。

我的问题是当我使用该`SELECT`函数时，该`dateApplied`列会自动更改为调用该`SELECT`语句的当前日期和时间。

我该如何防止这种情况发生？

谢谢彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:33:31.857

我想您正在使用计算列，例如：

```
create table t1 
    (
    id int
,   date_col as getdate()
    ) 
```

尝试使用默认约束：

```
create table t1 
    (
    id int
,   date_col datetime constraint DF_T1_DateCol default getdate() not null
    ) 
```

每当您运行查询时，都会计算一个计算列。仅当第一次插入行时才会生成默认约束。

# android - 无法从 SQLite 数据库中检索数据

> ID：13706278
> 
> 赞同：0
> 
> 时间：2012-12-04T15:28:51.650
> 
> 标签：android, sqlite

我想从数据库中检索名称。但我总是遇到以下错误：

`String name=helper.getProductNameT(cur);`

```
public View getView(int position, View convertView, ViewGroup parent) {
                View tmpView = super.getView(position, convertView, parent);
                Log.i(CN, "getView:" + position);

                final CheckBox cBox = (CheckBox) tmpView.findViewById(R.id.checkD);

                Item tag = (Item) cBox.getTag();

                cBox.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Cursor cur = null;
                        String name2;
                        Item tag = (Item) v.getTag();
                        if (tag == null)
                            Log.i(CN, "checkbox clicked no tag");

                        else

                                //Cursor c=helper.getProductDirect(String.valueOf(tag.id));

                                Log.i(CN, "checkbox clicked tag=" + tag.id);
                                helper.open();

                                cur=helper.getProductDirect(String.valueOf(tag.id));
                                String name=helper.getProductNameT(cur);

                                try{

                                }catch(Exception e){
                                    Log.e("error", e.toString());
                                }
                                //helper.insertProduct3(list,2, "name");

                        if (cBox.isChecked()) {
                            Log.i(CN, " Checked!");
                            // do some operations here

                            helper.insertProduct3(list,2, "go");
                        } else {
                            Log.i(CN, "NOT Checked!");
                            // do some operations here
                            //helper.updateStatusUnCheck(tag.id);

                        }
                        // notifyDataSetChanged();

                        Intent start = new Intent(AddProductDirect.this,
                                productClass.class);
                    //  start.putExtra(ID_EXTRA, String.valueOf(list));
                        //startActivity(start);
                    }

                });

                return tmpView;
            } 
```

数据库.java

```
public Cursor getProductDirect(String id) {
                String[] arg={id};

                // TODO Auto-generated method stub

                    return (database.rawQuery("SELECT " + SQLiteHelper.product_id
                            + " as _id," + SQLiteHelper.productBar + ","
                            + SQLiteHelper.productName + " ," + SQLiteHelper.productDesp
                            + "," + SQLiteHelper.productQtty + ","
                            + SQLiteHelper.productPrice + ","
                            + SQLiteHelper.productTotalPrice + ","
                            + SQLiteHelper.product_FId + "," + SQLiteHelper.product_Image
                            + "," + SQLiteHelper.product_ShoppingF + ","
                            + SQLiteHelper.product_Status + " FROM "
                            + SQLiteHelper.productTable + " WHERE "+SQLiteHelper.product_id+"=?",arg));

            }
    public String getProductNameT(Cursor c) {
            // TODO Auto-generated method stub
            return ((c.getString(2)));
        } 
```

它不断返回错误

> android.database.CursorIndexOutOfBoundsException：请求索引-1，String name=helper.getProductNameT(cur)中大小为1；

有人知道我的编码错误在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:37:51.273

你忘了打电话`moveToFirst()`是`cursor`从`database.rawQuery`

```
cur=helper.getProductDirect(....);
if(cur.moveToFirst()){
   /*
   String name=helper.getProductNameT(cur);    
   ... rest code goes here ...
   */
} 
```

# sql-server - 部署后：存储过程不存在

> ID：13706283
> 
> 赞同：0
> 
> 时间：2012-12-04T15:29:08.470
> 
> 标签：sql-server, asp.net-mvc, stored-procedures

我正在尝试部署一个 asp.net-mvc 网站。

在我的本地计算机上一切正常，但是当我上传到我的服务器时，我收到一条错误消息

> *存储过程“GetMenu”不存在*

我从本地计算机恢复了数据库。

在数据库中`GetMenu`存在存储过程！

'GetMenu' 是应用程序中对存储过程的第一次调用。

我将 'NT AUTHORITY\NETWORK SERVICE' 与 'dbo_owner' 一起使用

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:22:55.033

我想我的 db 用户权限有问题！我创建了一个新的数据库用户，它就像一个魅力......

谢谢。

# css - 在同一行制作两个div？

> ID：13706284
> 
> 赞同：0
> 
> 时间：2012-12-04T15:29:10.900
> 
> 标签：css, html

如何`div`在网站上的同一“行”中对齐两个 s？

我一直在处理[这个页面](http://harrisonbh.com/designsster2)，我试图让一个菜单浮动到网站的左侧，然后将内容浮动到网站的一侧。

我曾尝试将其用作`div`的 CSS：

```
.menu
{
    width:25%;
    height:auto;
    margin-bottom:2px;
    float:right;
    position:fixed;

}
.content
{
    width:70%;
    height:50%;
    margin-bottom:2px;
    padding: 25px;
    float:right;
} 
```

该页面不是并排显示它们并且是浮动的，而是大多数网站的显示方式，例如：[http](http://www.exorithm.com/) ://www.exorithm.com/ ，它们有一个侧边栏和一个内容区域。任何人都可以帮忙吗？

我所有的代码： http: [//pastebin.com/KqYkrweE](http://pastebin.com/KqYkrweE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:40:42.960

我认为问题在于您的位置：固定在菜单上。如果您使用位置固定或绝对位置，它会从文档流中删除元素，因此 float:right 变得无关紧要。

**编辑：这是实现相同结果的更好示例**

另请记住，您使用的是宽度百分比，然后应用基于像素的填充。这可能会导致元素对于页面而言变得太宽，并在另一个下方显示一个。

```
70% + 25% = 95% with 5% left over. 
```

如果 5% 小于 50 像素（使整个宽度为 1000 像素），那么您的列的总和将大于整个宽度。更好的方法是使用基于百分比的填充（不是 100% 确定它的效果如何）或将填充、边距和边框应用于浮动列内的元素，如下所示：

```
// CSS
.leftCol {
    float:left;
    width:25%;
}

.rightCol {
    float:left;
    width:75%;
}

.content {
    padding:25px;
}

// Markup
<div class="leftCol">
    <div class="menu">
        Here is my menu
    </div>
</div>
<div class="rightCol">
    <div class="content">
        Here is my content
    </div>
</div> 
```

**编辑 2：** 如果您希望您的菜单在用户向下滚动时保持在屏幕上，那么 position:fixed 将完成这项工作。我查看了您的页面，看起来您的导航宽度固定为 206 像素。因此，您对现有标记的样式会更好，例如：

```
// CSS
.menu {
    position:fixed;
    left:0;
    top:0;
    width:206px;
}

.content {
    padding: 25px 25px 25px 231px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:39:04.827

1.  你是向右而不是向左浮动。
2.  您`.content`的每边都有 25px 的填充，这意味着整体为 50px。因为你`menu`是 25% 和`content`70%，如果你的容器小于 1000px，你的空间就会用完。

# c# - 为什么没有与 WillCascadeOnDelete 等效的更新？

> ID：13706286
> 
> 赞同：4
> 
> 时间：2012-12-04T15:29:14.427
> 
> 标签：c#, .net, entity-framework, ef-code-first

当您在 EF 代码优先中设置 one:many 关系时，您可以选择它是否应该像这样在删除时级联：

```
modelBuilder.Entity<Assessment>()
    .HasRequired(asmt => asmt.CreatedByUser)
    .WithMany(usr => usr.Assessments)
    .HasForeignKey(asmt => asmt.CreatedByUserId)
    .WillCascadeOnDelete(true); 
```

这转化为`ON DELETE CASCADE`外键定义的 SQL 部分，即。

```
ALTER TABLE [dbo].[Assessment]  WITH CHECK ADD  CONSTRAINT [FK_dbo.Assessment_dbo.User_CreatedById] FOREIGN KEY([CreatedById])
REFERENCES [dbo].[User] ([UserId])
ON DELETE CASCADE
GO 
```

但是，Fluent API 中似乎没有类似的方法可以让您控制 的值`ON UPDATE CASCADE`，即。类似的东西`.WillCascadeOnUpdate()`。为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:38:28.680

实体框架通过导航属性处理关系，因此`ON UPDATE CASCADE`所有此类关系都已打开。

嗯，另一方面，我不确定您是否可以直接从实体框架更改实体的主键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T18:32:06.913

好吧，显然这个问题的答案是你*永远不*应该更改 ORM 中的主键，即使 DBMS 支持更改主键。因为假设您永远不会更改主键，所以不需要实体框架允许您指定是否在更新时进行级联，因为这个想法是主键更新永远不会发生。

但请注意，即使实体框架 ORM 不允许您这样做，在大多数数据库中仍然可以手动完成此操作。如果您直接在数据库中手动更新主键，DBMS 将只使用其默认行为进行级联更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T23:47:59.380

您不能更改主键。

一般来说，这是一种不好的做法，尤其是在使用 ORM 时。

# url - 如何使用 sammy 设置基本网址？

> ID：13706289
> 
> 赞同：1
> 
> 时间：2012-12-04T15:29:15.110
> 
> 标签：url, sammy.js

我正在四处寻找 javascript 路由库，我来到 Sammy，所以我正在学习它。

到目前为止，我看到的所有示例都表明，从域作为基本 url 进行路由是很热门的，比如 www.mydomain.com/# 然后所有路由都继续

但我正在我的本地主机目录中的嵌套目录中进行一些试验，例如 /wwwroot/play/sammy/ 所以我的基本网址是

```
http://localhost/~rockdeveloper/play/sammy/# 
```

然后所有路线都必须继续，例如：

```
http://localhost/~rockdeveloper/play/sammy/#/products
http://localhost/~rockdeveloper/play/sammy/#/clients
http://localhost/~rockdeveloper/play/sammy/#/search 
```

有什么方法可以设置这个基本 url，这样我就可以像这样继续配置 sammy 路由？

```
get('#/products')
get('#/clients')
get('#/search') 
```

现在我必须将主字符串连接到路由，我希望它比这更聪明......

```
baseurl='/~rockdeveloper/play/sammy/#/search';
get(baseurl + '#/products'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:26:29.873

Sammy 是一个前端框架，您不需要提供 baseurl，因为所有调用都是在客户端基于 url 进行的，井号后的其余路径仅供 sammy 使用。

前任：

```
http://localhost/~rockdeveloper/play/sammy/#/products
http://localhost/~rockdeveloper/play/sammy/#/products/iphone
http://localhost/~rockdeveloper/play/sammy/#/products/iphone/cases/all 
```

你的基本路径是

```
http://localhost/~rockdeveloper/play/sammy/ 
```

在所有这些中。其余的只是 sammy 路线，（将它们视为 GET 参数）

此外，您的路线必须以可以从锚点无缝调用的方式定义。这是我的路线文件的一部分：

* * *

```
app = $.sammy('body', function() {
    //define events
    this.bind('addNew',function(e,data){
        //data.name = data.name.split(' ').join('_');
        for(x in mapa[data.element]){
        if(mapa[data.element][x].name.toLowerCase() == data.name.toLowerCase()){
                return alert('There is already an element with the same name');
            break;
        }
    }
    ap('Adding: '+data.element+' with the name: '+data.name);
    mapa[data.element].push({name:data.name});
    this.trigger('sections',{action:data.element});
    });

  // define routes
  this.get('#/', function() {
    $('#menuright').html('');
    $('.customMenu').remove();
    $('#holder').html('').attr({style:''});
  });

    this.get('#/someroute/:variable', function() {
        /*
        ...
        ...
        ...
        */
    });

  this.before(function(){
    if(typeof(app.historial)=='undefined'){
        app.historial = [];
    }
    app.historial.unshift(this.path.split('#')[1]);
    if(app.historial.length>2) app.historial.length = 2;
    do_something();
  });
}); 
```

* * *

从你的观点来看，你可以简单地使用类似的东西：

```
<a href="#/someroute/{{name}}"><i class="icon-bookmark"></i> {{name}}</a>
//le me here using mustache :{ 
```

# android - android app自动链接和更新结果

> ID：13706294
> 
> 赞同：0
> 
> 时间：2012-12-04T15:29:41.653
> 
> 标签：android, synchronization

我想制作一个彩票应用程序，每次有新号码时（显示在彩票官网），当用户单击按钮时，该应用程序是否能够通过从中获取结果来更新彩票结果官方网站？然后应用程序会自动刷新显示最新的结果/数据库（所谓的同步？）。

这怎么能做成？有人能给我一些指导和一些关于这个功能的示例/教程吗？我是否需要为此类数据建立网站/主机？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:34:37.313

那是你要找的吗？

[http://www.recursiveawesome.com/blog/2011/04/29/implementing-pull-to-refresh-in-your-android-app/](http://www.recursiveawesome.com/blog/2011/04/29/implementing-pull-to-refresh-in-your-android-app/)

# list - 更新 SharePoint 字段链接

> ID：13706306
> 
> 赞同：6
> 
> 时间：2012-12-04T15:29:56.107
> 
> 标签：list, sharepoint, contenttype

我使用了一段代码来检索指定内容类型的字段链接，并将该字段设置为必需或不需要。这很好用，但是当我尝试对名称中包含空格的字段执行相同操作时，代码会引发错误。

```
SPField col = //some column retrieved from a list
SPContentType ct = col.ParentList.ContentTypes["MyContentTypeName"] //gets the content type

SPFieldLink fieldLink = ct.FieldLinks["MyFieldname"]; // gets the fieldLink
ct.Update(); 
```

如果是像“Hobbies”或“Amount”这样的字符串，它会起作用`MyFieldName`，但如果是像“Full Name”这样的字符串，它会失败。

有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:15:23.860

您可能正在使用字段显示名称而不是字段内部名称

您是否尝试过：“Full_x0020_Name”？

# objective-c - Objective CdismissModalViewControllerAnimated 被不恰当地调用并导致应用程序崩溃

> ID：13706312
> 
> 赞同：0
> 
> 时间：2012-12-04T15:30:26.160
> 
> 标签：objective-c, ios, xcode4.5, modalviewcontroller, zbar-sdk

我有一个类（称为 A 类），它创建另一个类（称为 B 类）的实例。在 AI 类中调用 B 类的函数，该函数打开相机以读取 QR 码。一旦检测到 QR 码，相机馈送将使用此行关闭：

```
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] dismissModalViewControllerAnimated:YES]; 
```

现在在 AI 类中想要使用这个事件处理程序来做其他事情（主要使用我刚刚从 QR 码获得的 nsstring）所以我想使用该`-(void)dismissModalViewControllerAnimated:(BOOL)animated`方法。但是我注意到以下内容 - 如果我有一个空主体的方法，那么读者不会被解雇 - 如果我有一个包含任何内容的方法，应用程序会无限期地调用该函数并且应用程序崩溃和/或 XCode 最终冻结和崩溃

有什么替代我正在做的事情吗？理想情况下，我想做这样的事情：

```
-(void)dismissModalViewControllerAnimated:(BOOL)animated{
    [self dismissModalViewControllerAnimated: YES];
    DisplayLabel.text=output;   
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:02:13.297

您的示例，因为它调用自己，将导致没有退出条件的递归，除非您打算将消息传递给`super`而不是`self`.

# c++ - Linux下的Qt资源

> ID：13706313
> 
> 赞同：0
> 
> 时间：2012-12-04T15:30:26.557
> 
> 标签：c++, qt, resources

我想使用 Qt 资源文件 .qrc 将资源加载到我的软件中。在 Windows 下，它可以完美运行，但在 Linux（Ubuntu 12.10）下，它根本无法运行。

这是我的 resources.qrc 文件的一部分：

```
<qresource prefix="/ressources">
    <file alias="style">ressources/style.css</file>
</qresource> 
```

当我在我的代码中打开这个文件时，我会做这样的事情：

```
QFile file(":/ressources/style.css");

if (!file.open(QIODevice::ReadOnly))
{
    qDebug() << "open fail";
    return ;
} 
```

open() 方法无法正确打开该文件。

你有想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:40:18.980

您已指定`"style"`为别名，因此您只能使用以下方式打开它：

```
QFile file(":/ressources/style"); 
```

但是，由于您指定的前缀与物理目录名称相同，您为什么不这样做：

```
<qresource>
    <file>ressources/style.css</file>
</qresource> 
```

# c# - C# 中的 LINQ 查询和子查询枚举计数？

> ID：13706316
> 
> 赞同：7
> 
> 时间：2012-12-04T15:30:34.687
> 
> 标签：c#, .net, linq, .net-4.0

假设我有这个查询：

```
 int[] Numbers= new int[5]{5,2,3,4,5};

  var query =  from a in Numbers
      where a== Numbers.Max (n => n) //notice MAX  he should also get his value somehow
      select a;

foreach (var element in query)
  Console.WriteLine (element); 
```

*   运行时`Numbers`枚举 **了**多少次`foreach`？

*   我该如何测试它（我的意思是，编写一个告诉我迭代次数的代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:35:25.637

这是检查计数的方法

```
void Main()
{
    var Numbers= new int[5]{5,2,3,4,5}.Select(n=>
    {
       Console.Write(n);
       return n;
    });

    var query =  from a in Numbers
                 where a== Numbers.Max (n => n)
                 select a;

    foreach (var element in query)
    {
          var v = element;
    }
} 
```

这是输出

```
5 5 2 3 4 5 2 5 2 3 4 5 3 5 2 3 4 5 4 5 2 3 4 5 5 5 2 3 4 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:35:44.933

它将被迭代 6 次。一次用于`Where`，每个元素一次用于`Max`。

演示这一点的代码：

```
private static int count = 0;
public static IEnumerable<int> Regurgitate(IEnumerable<int> source)
{
    count++;
    Console.WriteLine("Iterated sequence {0} times", count);
    foreach (int i in source)
        yield return i;
}

int[] Numbers = new int[5] { 5, 2, 3, 4, 5 };

IEnumerable<int> sequence = Regurgitate(Numbers);

var query = from a in sequence
            where a == sequence.Max(n => n)
            select a; 
```

它将打印“迭代序列 6 次”。

如果您打算使用它来试验其他情况，我们可以制作一个更通用、更灵活的包装器：

```
public class EnumerableWrapper<T> : IEnumerable<T>
{
    private IEnumerable<T> source;
    public EnumerableWrapper(IEnumerable<T> source)
    {
        this.source = source;
    }

    public int IterationsStarted { get; private set; }
    public int NumMoveNexts { get; private set; }
    public int IterationsFinished { get; private set; }

    public IEnumerator<T> GetEnumerator()
    {
        IterationsStarted++;

        foreach (T item in source)
        {
            NumMoveNexts++;
            yield return item;
        }

        IterationsFinished++;
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public override string ToString()
    {
        return string.Format(
@"Iterations Started: {0}
Iterations Finished: {1}
Number of move next calls: {2}"
, IterationsStarted, IterationsFinished, NumMoveNexts);

    }
} 
```

与其他功能相比，这有几个优点：

1.  它记录了开始的迭代次数、完成的迭代次数以及所有序列递增的总次数。
2.  您可以创建不同的实例来包装不同的底层序列，从而允许您检查每个程序的多个序列，而不是在使用静态变量时只检查一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T15:40:51.630

以下是如何快速估算集合被枚举的次数的方法：将集合包装在 a 中`CountedEnum<T>`，并在每个 上增加计数器`yield return`，如下所示 -

```
static int counter = 0;

public static IEnumerable<T> CountedEnum<T>(IEnumerable<T> ee) {
    foreach (var e in ee) {
        counter++;
        yield return e;
    }
} 
```

然后将您的数组声明更改为此，

```
var Numbers= CountedEnum(new int[5]{5,2,3,4,5}); 
```

运行您的查询，并打印`counter`. 对于您的查询，代码打印 30（[指向 ideone 的链接](http://ideone.com/ZCxFbW)），这意味着您的五个项目的集合已被枚举六次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:13:05.900

通过公共财产计数也产生 6。

```
private static int ncount = 0;
private int[] numbers= new int[5]{5,2,3,4,5};
public int[] Numbers 
{ 
    get
    {
        ncount++;
        Debug.WriteLine("Numbers Get " + ncount.ToString());  
        return numbers;
    }
} 
```

这将计数减少到 2。
有道理，但我不会想到它。

```
int nmax = Numbers.Max(n => n);
var query = from a in Numbers
    where a == nmax //notice MAX  he should also get his value somehow
    //where a == Numbers.Max(n => n) //notice MAX  he should also get his value somehow
select a; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T15:33:27.583

迭代次数必须等于`query.Count()`。

所以要计算第一个查询结果中的元素数。

如果您要问其他问题，请澄清。

**编辑**

澄清后：

如果您在提供的代码中搜索迭代的总数，将会有`7`迭代（对于这个具体案例）。

```
var query =  from a in Numbers
      where a== Numbers.Max (n => n) //5 iterations to find MAX among 5 elements
      select a; 
```

和

```
foreach (var element in query)
  Console.WriteLine (element); //2 iterations over resulting collection(in this question) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T15:45:50.353

> 运行foreach时Numbers被枚举了多少次

粗略地说，您的代码在道德上等同于：

```
foreach(int a in Numbers)
{
   // 1\. I've gotten rid of the unnecessary identity lambda. 
   // 2\. Note that Max works by enumerating the entire source.
   var max = Numbers.Max();

   if(a == max)
     Console.WriteLine(a);
} 
```

所以我们列举以下时间：

1.  外循环序列的一个枚举 ( `1`)。
2.  每个成员的序列枚举 ( `Count`)。

所以总的来说，我们列举了`Count + 1`时间。

您可以通过引入本地查询`2`将查询提升到循环之外来解决这个问题。`Max`

> 我该如何测试它（我的意思是，编写一个告诉我迭代次数的代码）

使用原始数组并不容易。但是您可以编写自己的可枚举实现（可能包装了一个数组）并向该`GetEnumerator`方法添加一些检测。或者，如果您想更深入，请全力以赴并编写一个带有仪表的自定义枚举`MoveNext`器`Current`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T16:38:00.553

它将被迭代 6 次。一次用于`Where`，每个元素一次用于`Max`。

在foreach循环外定义并初始化一个`count`变量，并像`count++`循环内一样递增count变量，得到枚举的次数。

# assembly - 如何编写 Sparc 程序集并在 Qemu 或 Simics 中运行其二进制文件？

> ID：13706317
> 
> 赞同：4
> 
> 时间：2012-12-04T15:30:37.657
> 
> 标签：assembly, qemu, sparc, simics

我正在尝试开始编写一些 Sparc 程序集，但我不知道如何组装和运行代码。我已经用 arcTools 编写了 arc，但这就是我在组装方面所做的。我已经下载了simics和qemu，但我不知道从哪里开始。谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:43:53.400

你没有说你使用什么操作系统。对于这个例子，我假设你有 linux 并且想要编写简单的独立 sparc 代码（用于教育目的）。您将需要`binutils`并`gdb`为 sparc 和`qemu-sparc`. 将此小示例代码另存为`test.s`：

```
.globl _start
_start:
    mov %o0, %g0
1:
    inc %o0
    cmp %o0, 100
    bl 1b
    nop
    b .
    nop 
```

用于`as`组装和`ld`链接，如下：

```
$ sparc-linux-as -g -o test.o test.s
$ sparc-linux-ld -g -o test test.o 
```

应该产生二进制文件`test`：

```
$ file test
test: ELF 32-bit MSB executable, SPARC, version 1 (SYSV), statically linked, not stripped 
```

现在开始`qemu-sparc`设置`gdb`远程调试（选择您选择的端口，我使用 1234）：

```
$ qemu-sparc -g 1234 test 
```

它将等待`gdb`连接。在另一个终端中，启动`gdb`二进制文件：

```
$ sparc-linux-gdb test
GNU gdb (GDB) 7.3.50.20111117-cvs-debian
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "--host=x86_64-unknown-linux-gnu --target=sparc-linux".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /var/tmp/test...done.
(gdb) 
```

附加到`qemu`实例：

```
(gdb) target remote :1234
Remote debugging using :1234
_start () at test.s:3
3           mov %o0, %g0 
```

从这里开始，您可以`gdb`照常使用来执行代码、检查寄存器和内存。

# android - android 是否在提交按钮周围添加了额外的活动区域？

> ID：13706319
> 
> 赞同：2
> 
> 时间：2012-12-04T15:30:39.530
> 
> 标签：android, html, css, usability, tap

Android 似乎正在增加我正在处理的 HTML 表单上提交按钮的可点击区域。好像提交按钮右侧大约有 25 个像素也可以点击。这是有问题的，因为在我的设计中，提交按钮的右侧是一个`<A>`绑定了事件处理程序的元素。点击`<A>`经常提交表单而不是触发事件处理程序。我在 Browerstack 中进行了大部分测试，在真实硬件上进行了一些测试。该问题出现在屏幕宽度较低（例如 320 像素）的（虚拟）设备中，并且似乎出现在 Android 2.3 和 4 中。iPhone（4s、iOS6）和 Blackberry（v7）中的相同页面没有出现问题。

[这是一个 CodePen 示例](http://codepen.io/simondell/pen/wltGA)，以及相同代码的[单个文件版本](http://demo.expressionworks.co.uk/android-extra-targetarea/index.html)，以便在移动设备上查看

有没有其他人看过这个？它是一个功能吗？一个错误 - 无论是在 Android 中还是在我的代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:45:49.280

您是否尝试过对其应用 reset.css ？这似乎是一个 android webkit 问题。

此外，尝试使用 40 像素的区域作为点击按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:47:24.973

我推荐使用 meyerweb.com 提供的 reset.css 样式表。它（几乎）删除了浏览器将应用的所有样式，但您可能会发现您需要重做大量 css 并在`<h1>`标签等中添加很多东西。

[CSS 工具：重置 CSS](http://meyerweb.com/eric/tools/css/reset/)

# tfs - 对 Visual Studio 解决方案配置的更改未反映在构建机器上

> ID：13706320
> 
> 赞同：1
> 
> 时间：2012-12-04T15:30:45.740
> 
> 标签：tfs, tfsbuild

我已经建立了“Team Foundation Build”（我认为这是正确的名称）。我有一个构建控制器（构建机器），它一直在正确构建我们的解决方案。在构建机器上构建时，我使用的是单独的解决方案配置。
我们向解决方案添加了一个新项目。我打开了配置管理器并选中了新项目旁边的“构建”框，同时选择了构建机器上使用的配置。已签入对解决方案的此更改。但是构建机器不会构建该项目。
如果我对解决方案配置进行更改并检查 .sln 文件，我会看到这些更改反映出来，因此我知道信息存储在那里。但是，当我在构建机器上的 Visual Studio 中打开 .sln 文件时（在构建失败期间将其写入那里之后），我看到我们的新项目旁边的“构建”复选框未选中（从而解释了为什么它没有被选中建）。如果我将 .sln 文件从构建机器复制到我的机器并将其与我机器上的 .sln 进行比较（选中该框），它们匹配！
我很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:13:40.587

新项目可能位于源代码管理中的文件夹中，该文件夹未在 TFS 构建定义的工作区列表中指定。编辑 TFS 构建定义并验证工作文件夹列表。解决方案文件可能包含此项目引用，但除非它包含在工作文件夹中，否则它对构建服务器不可用。

# c# - C# 中的 GSSAPI 和 Active Directory

> ID：13706323
> 
> 赞同：0
> 
> 时间：2012-12-04T15:30:47.173
> 
> 标签：c#, active-directory, gssapi

这可能是一个愚蠢的问题，但是否可以从 Active Directory 获取当前登录用户的 GSSAPI 令牌？

我有一个连接到服务器的简单库。我可以传递用户名、密码和域名或 GSS 令牌（base64）。目前第一种方法对我有用，但用户必须输入密码让他们很恼火。

我找不到任何关于 GSSAPI 的信息以及它与 Active Directory 的集成。

在 C# 中可能吗？

基于@Harvey Kwok 评论的更多信息： Library is called `Altair COM`and it is used for document management

以下是有关使用 GSS 登录的一些 API 参考：

```
HRESULT LoginGSS(
     [in] VARIANT *token,
     [in] VARIANT_BOOL forceCreateNew,
     [out,retval] VARIANT *retToken) 
```

以下是VB中的示例用法：

```
Dim token(tokensize) As Byte 'token size-1
’fill token buffer
...
Dim outToken() As Byte
outToken = altair.LoginGSS(token,True)
'if GetLastStatus == AXAPI_ALTAIR_LOGIN_CONTINUE then
'outToken contains return GSS API token 
```

和VC++的用法

```
SAFEARRAYBOUND sab[1];
sab[0].lLbound=0;
sab[0].cElements=tokensize;
SAFEARRAY *sa;
sa=SafeArrayCreate(VT_UI1,1,sab);
unsigned char HUGEP *buf=NULL;
SafeArrayAccessData(sa,(void HUGEP**)&buf);
//fill token buffer
...
SafeArrayUnaccessData(sa);
v.vt=VT_ARRAY|VT_UI1;
v.pparray=sa;
VARIANT vOut;
pAltair->LoginGSS(&v,true,&vOut);
SafeArrayDestroy(sa);
'if GetLastStatus == AXAPI_ALTAIR_LOGIN_CONTINUE then
'outToken contains return GSS API token 
```

这是我掌握的所有信息。

* * *

我发现了一些显示登录过程的代码片段：

```
byte[] token;
token = Convert.FromBase64String(tbToken.Text);
Object o;
o = (Object)token;
Program.altair.LoginGSS(ref o, true);
if ((AXAPILib.AxAPIStatus)altair.GetLastStatus()==AXAPILib.AxAPIStatus.AxAltairLoginOK)
{
    //login ok
} 
```

但是我必须输入该令牌，并且我仍在尝试为当前用户生成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:48:17.777

不要浪费你的时间。在 C# 中将 SSPI 与 P/Invoke 结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:59:18.597

微软在这里有一个在托管 C++ 中使用 SSPI 的示例（然后很容易从 C# 调用）：http: [//msdn.microsoft.com/en-us/library/ms973911.aspx](http://msdn.microsoft.com/en-us/library/ms973911.aspx)

> 为什么不用 C# 编写呢？我尝试用 C# 和托管 C++ 编写程序集。我很快发现了一个基本的权衡：我是想在托管语言（如 C#）中使用像 SSPI 这样的非托管代码，还是想用 C++ 编写它并使用托管扩展来连接到 .NET 世界？
> 
> 对于 SSPI，有许多具有复杂参数的函数。这包括很多指针、（嵌套）结构等等。用 C# 编写程序集意味着必须声明 SSPI 函数参数（所有这些复杂类型）的托管版本，然后在将它们传递给非托管函数时确保它们正确固定在内存中。
> 
> 用托管 C++ 编写程序集意味着在其本机环境中处理非托管类型。您不必担心固定，也不必重新声明类型（只需拉入适当的头文件）。
> 
> 在构建 Microsoft.Samples.Security.SSPI 时，我发现在托管 C++ 中完成这项工作更容易。所有复杂类型都保存在非托管世界中；非托管 API 在其本机 C 环境中处理。托管 C++ 提供了一种很好的方式来弥合非托管/托管世界之间的差距。
> 
> 您的里程可能会有所不同，选择将取决于所使用的 API。但是使用 SSPI，托管扩展比 C# 等高级语言更有意义。

# php - 如何在 URL 中隐藏 MySQL 生成的 ID

> ID：13706324
> 
> 赞同：1
> 
> 时间：2012-12-04T15:30:54.820
> 
> 标签：php, mysql

现在我可以通过简单地在 URL 中使用它的 ID 来获取数据库中产品的信息，如下所示：`http://www.example.com/?productID=5`
现在我可以猜测下一个，因为这些 ID 都是自动递增的。
您将如何隐藏此 ID 并将其替换为更好的 ID？我的意思是它仍然必须是一个唯一的标识符。
为了使它复杂一点，我想我可以使用全局唯一标识符并将其添加到数据库中的另一列中。但我觉得这不是最好的方法:)
请让我知道你的想法，并告诉我你是如何解决/将在你的项目中解决这个问题的。

**我基本上想要的是摆脱知道下一个/上一个 ID。**

产品本身没有安全限制。用户很可能被允许看到它们。我在想这种技术可以防止*抓取*所有产品？！？

**就像 amazon.com 所做的那样：看起来他们以某种方式隐藏了商品的 ID，对吧？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:37:32.553

你也可以使用一个非常适合 SEO 的 slug。所以产品 1 slug 可能是[http://www.example.com/?productSlug=exampleitemnameasoneword](http://www.example.com/?productSlug=exampleitemnameasoneword) 您只需要确保 slug 是唯一的。您当然需要在数据库条目中添加一个 slug 字段并能够输入/编辑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:39:28.187

首先，看看[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

我正在使用`CakePhp`，这使我可以轻松访问由`.htaccess`规则创建的 url。就我而言，我的标题是 100% 唯一的，这使我可以拥有标题的 slug 版本。

比如我的标题是`SZD-51 Junior`，这会变成`SZD-51_Junior`。我只是将它添加`slug`到我的数据库中并将其用作辅助唯一标识符。当用户访问时`www.example.com/planes/SZD-51_Junior`，我可以执行以下操作：

```
// pseudo mysql
SELECT *
FROM table
WHERE slug = url_param

//in cakephp
$this->Plane->findBySlug($this->params['slug']); 
```

有很多方法，你希望url变成什么？哪种格式？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:41:29.813

您可以使用某种散列算法，例如 md5()、sha1() 等……是的，最好将该散列存储在表的另一列中以便更快地查找。

如果您使用 md5() ，最好使用固定或随机的盐字符串播种它。我最喜欢的是用 microtime() 来做。

在数据库插入之前生成哈希：

```
$salt = "my_secret_salt_string";
$entry['hash_code'] = md5($salt . microtime()); // every time a different result is generated which will ensure uniqueness
// insert into ... 
```

或者，如果您更喜欢使用生成的 id 作为盐，则更新条目：

```
// insert into ...
// get id
$entry['hash_code'] = md5($id . microtime());
// update ... 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-04T15:34:00.440

一个解决方案是使用 post 代替，这只是我做的一个快速混搭。

```
<?php

//how to handle the request
if(isset($_POST['transfer']) && !empty($_POST['transfer']))
{
    $transfer = $_POST['transfer'];

    //what to do?
}

?>

//how to make a link with id 5
<a href="javascript:transfer('5');">link</a>

//this is for the functionality
<form id="transfer_form" action="http://www.example.com/" method="POST">
    <input type="hidden" id="transfer" name="productID" value="" />
</form>

//this should be placed within the <head>
<script>
function tranfer(link)
{
    document.getElementById('transfer').value = link;
    document.getElementById('transfer_form').submit();
}
</script> 
```

# python - 用于 DynamicDocument 的美味派 mongoengine rest api

> ID：13706325
> 
> 赞同：2
> 
> 时间：2012-12-04T15:30:59.803
> 
> 标签：python, django, tastypie, mongoengine

我正在尝试使用 testypie 和 mongoengine 在 mongo 中保存动态文档，我的代码是这样的：

```
class Test(DynamicDocument):
    pass

class TestResource(resources.MongoEngineResource):
    class Meta:
        queryset = models.Test.objects.all()
        allowed_methods = ('get', 'post', 'put', 'delete')
        authorization = authorization.Authorization() 
```

我正在尝试使用 rest api 保存这个对象

```
{
  "fname":"Shon",
  "lname":"Lil"
} 
```

我在 mongo 中得到这个文件

```
{
    "_id" : ObjectId("50bdf1a0d6b9bb12db267be4"),
    "_types" : [
        "Test"
    ],
    "_cls" : "Test"
} 
```

我需要这样的文件

```
{
    "_id" : ObjectId("50be06fcd6b9bb14d07f8866"),
    "_types" : [
        "Test"
    ],
    "lname" : "Lil",
    "_cls" : "Test",
    "fname" : "Shon"
} 
```

有人可以帮我吗？

# file - CSV 文件导入 CMS 变得简单

> ID：13706326
> 
> 赞同：0
> 
> 时间：2012-12-04T15:30:59.933
> 
> 标签：file, csv, import, content-management-system

谁能告诉我我们可以导入到 CMS Made Simple 的产品导入功能的 CSV 文件的格式是什么。

如果可以提供样本，那将更有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:10:23.973

下载模块时，请查看根文件夹。您会找到一个“test_import.csv”文件，它会详细指导您可以导入的所有类型的字段！

然而，这是基本语法： `#FLAG|#name|#sku|#details|#price|#create_date|#modified_date|#taxable|#status|#weight|#HIER|#CAT:new|#CAT:surplus|#FIELD:image:Image|#FIELD:textarea:Notes|#ATTRIBS`

# maven - maven 存储库订单

> ID：13706329
> 
> 赞同：4
> 
> 时间：2012-12-04T15:31:14.740
> 
> 标签：maven, maven-3

我有一个 Maven 存储库，它将所有工件存储在

[http://example.com/content/public](http://example.com/content/public)

我有第二个存储库，其中存储了不同的工件

[http://example.com/content/type1](http://example.com/content/type1)

默认情况下，对于所有构建，我想从“内容/公共”获取工件

但是对于打开标志时的一个特定用例，我想从“content/type1”中获取工件

如果工件不存在，那么我想在“内容/公共”中查找它

我的 apache-maven/3.04./conf/settings.xml 看起来像这样

```
<mirrors>
    <mirror>
        <!-- This sends everything else to /public -->
        <id>nexus</id>
        <mirrorOf>*,!type1</mirrorOf>
        <url>http://example.com/content/public</url>
    </mirror>
</mirrors>
<profiles>

    <profile>
        <id>nexus</id>
        <!-- Enable snapshots for the built in central repo to direct -->
        <!-- all requests to nexus via the mirror -->
        <repositories>
            <repository>
                <id>central</id>
                <url>http://central</url>
                <releases><enabled>true</enabled></releases>
                  <snapshots><enabled>true</enabled><updatePolicy>never</updatePolicy></snapshots>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>central</id>
                <url>http://central</url>
                <releases><enabled>true</enabled></releases>
                <snapshots><enabled>true</enabled></snapshots>
            </pluginRepository>
        </pluginRepositories>

        <properties>
            <!-- Default this property so we can create references easily. -->
            <nexusHostName>example.com</nexusHostName>
        </properties>
    </profile>
</profiles>
<activeProfiles>
    <!-- make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
</activeProfiles> 
```

我在 pom.xml 中的个人资料看起来像这样

```
<profile>
        <id>type1-build</id>
        <activation>
            <property>
                <name>type1</name>
                <value>true</value>
            </property>
        </activation>

        <repositories>
            <repository>
                <id>type1</id>
                <name>Type1 Repo</name>
                <url>http://${nexusHostName}/content/groups/type1/</url>
                <layout>default</layout>
                <!-- Enforce strict checksums and always update releases and snapshots -->
                <releases>
                    <enabled>true</enabled>
                    <checksumPolicy>fail</checksumPolicy>
                    <updatePolicy>always</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                    <checksumPolicy>fail</checksumPolicy>
                    <updatePolicy>always</updatePolicy>
                </snapshots>
            </repository>
            <repository>
                <id>nexus</id>
                <name>Nexus</name>
                <url>http://${nexusHostName}/content/groups/public/</url>
                <layout>default</layout>
                <!-- Enforce strict checksums and always update releases and snapshots -->
                <releases>
                    <enabled>false</enabled>
                    <checksumPolicy>fail</checksumPolicy>
                    <updatePolicy>always</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                    <checksumPolicy>fail</checksumPolicy>
                    <updatePolicy>always</updatePolicy>
                </snapshots>
            </repository>
        </repositories>

    </profile> 
```

即使在我运行像 mvn goal1 -Dtype1=true 这样的目标之后这样做了，它仍然会在“content/public”中查找工件

有人可以告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T14:56:15.887

只需先更改存储库 content/type1 的顺序，然后再更改 content/public

# python - Python的子进程管理

> ID：13706337
> 
> 赞同：0
> 
> 时间：2012-12-04T15:31:47.073
> 
> 标签：python, subprocess, stderr

[子流程文档](http://docs.python.org/2/library/subprocess.html)在返回的元组中同时具有 a`returncode`和一个值。如果为 分配了一个值，这是否被归类为程序成功运行并完成（因此将为 0）或没有（然后 的值将大于 0）？`stderr``.communicate()``stderr``returncode``returncode`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:36:55.757

`stderr`指过程的标准错误流，如下所述：[http ://en.wikipedia.org/wiki/Stderr#Standard_error_.28stderr.29](http://en.wikipedia.org/wiki/Stderr#Standard_error_.28stderr.29)

您可以出于调试目的向其中写入消息，并且退出代码仍然为零。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T15:38:47.307

弹出。**通信**将返回一个元组，其中包含写入*stdout*和*stderr*的数据（如果没有写入，则为每个值返回 None）。

在通信返回后，您可以检查 Popen 实例上的**returncode**属性以获取进程的退出状态，如果这与 0 不同，则通常表明发生了错误。

# python - 如何在 Python/Selenium 中从网页中读取特定值

> ID：13706338
> 
> 赞同：2
> 
> 时间：2012-12-04T15:32:02.260
> 
> 标签：python, selenium

我想从此 HTML 中读取金额值 (24.40)。

```
<div id="order-total" class="clear-fix" style="margin-bottom:20px;">
    <h3 class="col-left">Order total</h3>
    <h3 class="col-right" style="display: block;">
    <span class="credit-total-to-order" data-total-to-order="24.40">$ 24.40</span>
    credits
    </h3>
</div>

xpath - /html/body/div/header/section/form/div[5]/h3[2]/span
css - html body.ui-lang-en div#slave-edit.string-v2 header#slave-edit-header.edit
      section#order-form form#frm-order-translation div#order-total.clear-fix 
      h3.col-right span.credit-total-to-order 
```

我知道我应该使用`find_element_by_class_name`or `find_element_by_css_selector`。
但不确定应该是什么论点。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:39:12.113

为什么不从元素中选择值并解析字符串以获得所需的答案。例如，您可以拆分字符串并忽略美元以返回您需要的数字。

```
someString = selenium.find_element_by_css_selector(".credit-total-to-order").text
someString.split(' ')[1] 
```

请记住 - 这*仅*适用于您提供的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:05:57.800

它没有必要使用`find_element_by_class_name or find_element_by_css_selector`..你可以像这样使用xpath来实现它

```
driver.find_element_by_xpath("//span[@class='credit-total-to-order']").text 
```

**更新：**

根据您更新的 html，看起来样式使您的元素隐藏了。意思是，虽然我也注意到您想要获取的值也存储在属性 data-total-to-order 中。

所以你可以这样做：

```
driver.find_element_by_xpath("//span[@class='credit-total-to-order']").get_Attribute("data-total-to-order") 
```

# javafx-2 - 所选位置不代表有效的 JavaFX Scene Builder 安装

> ID：13706340
> 
> 赞同：1
> 
> 时间：2012-12-04T15:32:13.847
> 
> 标签：javafx-2, netbeans-7, java-7, scenebuilder

我在 Windows 8 Pro 上安装了 Netbeans 7.3 Beta 2 和最新的 32 位 Java 7 JDK。问题：我删除了 Scene Builder 1.1 b07 并安装了最新的 b12，但现在我无法在 Netbeans 中设置“Scene Builder Home”。

我收到以下错误：“所选位置不代表有效的 JavaFX Scene Builder 安装”我尝试指向所有可能的文件夹（场景 B. 文件夹、子文件夹、Oracle 文件夹等）（我知道它不应该是必要的） .

之前的版本没问题，Netbeans 自动检测到它。我之前有 Scene Builder 1.1 b07。现在它不想从 Netbeans Options->Java->JavaFX 添加到“Scene Builder Home”中。这很烦人，因为现在我必须从源文件夹手动打开每个 FXML。恼人的。

我搜索了 NetBeans 错误，但没有找到任何东西。我想添加一个新的，但我不能。也许是因为我已经报告了 2 个错误。

有什么建议么？我没有再次删除和安装 NetBeans，因为我不想为此重新导入项目并再次对其进行配置。

编辑：我设法报告了这个错误。我不得不从 netbeans.org 中删除 cookie 并再次登录才能使用“报告错误”页面。让我们希望快速修复。
http://netbeans.org/bugzilla/show_bug.cgi?id=223994

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T22:57:53.640

你可以在 netbeans 之外使用它，我在 Ubuntu linux 中遇到了同样的错误。[根据这个错误](https://netbeans.org/bugzilla/show_bug.cgi?id=238520)，您必须等待他们修复它。

**现在只需在 netbeans 之外使用它**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T09:33:58.103

它与最新的 NetBeans 7.4、Java 7 JDK 和 SceneBuilder 完美配合。

我认为这是一个已修复的错误。SceneBuilder 1.1 现在是一个稳定版本，当时还不是，所以这可能是解释。

# sql - 如何使用 SQL（Oracle SQL Developer）创建子类？

> ID：13706344
> 
> 赞同：1
> 
> 时间：2012-12-04T15:32:37.853
> 
> 标签：sql, oracle, subclass

我的 ER 图中有一个带有 2 个子类表的主表。如何使用 SQL 将子类附加到主表？我对 SQL 很陌生。我目前在 Oracle SQL Developer 平台上使用 SQL。

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:06:26.190

就 ER 图而言，超类和子类的概念是正确的，但在根据数据库来引用该 ER 图时要小心。在数据库世界中，实体始终是 DB 对象，并且有各种类型的 DB 对象、表、视图、存储过程等。就实体而言，唯一可能最适合您的 ER 图的对象是表或看法。Oracle 中的表可以通过约束和检查彼此非常紧密地耦合/相关。

因此，考虑到 ER 图中的几乎所有实体都是 Table DB 对象，正确的术语应该是“父表”和“子表”。子表引用父表的唯一键作为外键，子表中引用的列也应该具有唯一键。还有比这更多的细节，但如果你通过[这个](http://www.techonthenet.com/oracle/foreign_keys/foreign_keys.php)链接就会很清楚。

# jquery - .submit ajax 调用是否需要包装在 $(function () {})

> ID：13706349
> 
> 赞同：0
> 
> 时间：2012-12-04T15:32:49.400
> 
> 标签：jquery, form-submit

我有一个无论我尝试什么都不会运行的 ajax 提交。直到我找到一个将提交包含在`$(function () {});`调用中的教程。然后我将我的 .submit 包装在一个函数调用中，它似乎奏效了。令我难以置信的是，我还有其他 .submit ajax 函数调用，它们在没有被包装在函数中的情况下也能正常工作。我想知道我是否在这里遗漏了我不理解的 jQuery 细微差别？

为了更充分地说明我的意思，这是我将它包装在一个函数之前和之后的函数......

前...

```
$("#FormPutMsg1").submit(function (e) {
    debugger;
    e.preventDefault();
    //animateSpinner();
    var theURL = this.action;
    var type = "POST";//this.methd;
    var data = $(this).serialize();
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        dataType: "json",
        success: function (result) {
            debugger;
            var data = result;
            if (data.split(':')[0] == "Error") {
                //$("#list").unblock();
                $('#resultDiv').html('<b><p style="color: #ff00ff">' + data + '</p></b>');
                setTimeout(function () {
                    $('#resultDiv').html("");
                }, 10000);
            }
            else {
                binddata(data);
            }
        }
    });
    return false;
}); 
```

之后（这个工作）......

```
$(function () {
    $("#FormPutMsg1").submit(function (e) {
        debugger;
        e.preventDefault();
        //animateSpinner();
        var theURL = this.action;
        var type = "POST";//this.methd;
        var data = $(this).serialize();
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            dataType: "json",
            success: function (result) {
                debugger;
                var data = result;
                if (data.split(':')[0] == "Error") {
                    //$("#list").unblock();
                    $('#resultDiv').html('<b><p style="color: #ff00ff">' + data + '</p></b>');
                    setTimeout(function () {
                        $('#resultDiv').html("");
                    }, 10000);
                }
                else {
                    binddata(data);
                }
            }
        });
        return false;
    });
}); 
```

在我将我的函数包装在一个函数中之前，常规提交功能已被使用（因为我认为 e.preventDefault 从未被调用过）。先生们（和女士们）我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:39:39.167

原始代码块永远不会被执行，因为“#FormPutMsg1”还不存在。第二个代码块在页面加载后执行，因此“#FormPutMsg1”将存在。

$("#FormPutMsg1").submit() 需要一个触发器才能执行。用 "$(function() {})" 包装它将在页面加载时执行块。您也可以使用 click 事件触发它。

"$(function() {})" 是 "$(document).ready(function() {})" 的快捷方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:42:57.220

根据我的专业知识（这并不是很出色），我认为“$(function () {})”与 document.ready 是一回事。

唉，这个函数里面的脚本会在 DOM 完全加载的时候执行。

在第一种情况下，脚本试图在您的元素加载之前执行，因此它不起作用。

在第二种情况下，脚本会等到 DOM 中的所有元素都加载完毕后才会执行。

# usb - 需要在不更改 BIOS 的情况下使 USB 驱动器按引导顺序跳过自身

> ID：13706353
> 
> 赞同：2
> 
> 时间：2012-12-04T15:33:19.223
> 
> 标签：usb, boot, ini, bios

我知道如何通过 BIOS 设置更改引导顺序，但我有一个独特的情况，以编程方式进行会更好。我工作的公司向成千上万的非技术客户远程销售和支持软件。我们无法触及他们的硬件设置，我们只是软件供应商。

最近，我们推出了一个符合 PCI 标准的选项，该选项需要单独的可移动驱动器来存储私有加密密钥。使用此选项的客户必须始终保留带有 .dat 文件的 USB 驱动器，该文件包含 RSA 密钥。目前，当客户重新启动时，这会出现问题。有时我们可以通过电话指导他们如何更改他们的 bios 设置以跳过 USB 驱动器，但在许多情况下我们不能，因为呼叫者和电话的另一端没有足够的技术知识来更改 bios 设置，并且不同的 PC 具有不同的 BIOS 设置。

所以我的问题是，我是否可以在磁盘本身上创建或引导记录任何类型的 ini 文件，而不是可以添加或更改以使系统看到 USB 上没有操作系统，继续向下引导列表驱动器。相反，在没有操作系统的情况下，许多 PC 挂在缺少操作系统屏幕上，直到我们让客户移除驱动器重新启动并在 Windows 开始加载后重新插入。所有 PC 都是 Windows、XP 或更新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:29:13.490

您正在谈论操纵 BIOS 设置数据。不幸的是，没有计算机操作设置字段的行业标准，例如启动顺序，因此任何解决方案都可能是特定于供应商的。

例如：戴尔公司为客户提供 OpenManage Client Instrumentation (OMCI)，允许管理员通过 CIM/WMI 等标准界面远程更改设置，如引导顺序。请参阅此白皮书： http: [//www.dell.com/downloads/global/solutions/omci_info.pdf](http://www.dell.com/downloads/global/solutions/omci_info.pdf)

尤其：

> OMCI 是戴尔仪器包，它支持对 OptiPlex™、Dell Precision™ 和 Latitude™ 系统进行远程管理。OMCI 包含从客户端计算机上的多个不同来源收集系统信息的底层驱动程序集，包括 BIOS、CMOS、系统管理 BIOS (SMBIOS)、系统管理接口 (SMI)、操作系统、API、DLL 和注册表设置。OMCI 通过 WMI 堆栈的 CIMOM 接口公开该信息。因此，OMCI 使 IT 管理员能够远程收集资产信息、修改 CMOS 设置、...

OMCI 特定于戴尔 BIOS，因此它不适用于其他供应商的机器。其他企业硬件供应商（例如 HP、IBM）也提供类似的软件。如果您可以使用特定于供应商的解决方案，那么这可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:50:23.367

请问您的USB是否实际上不可启动？你是怎么格式化的？FAT32、NTFS 等？

当（我假设）它不可启动时，为什么 Windows 在正常启动时不能绕过这个 USB。通常，即使插入了不可启动的 USB，我的系统也会启动到 Windows 操作系统。

顺便说一句，您是否尝试过将 USB 上的 DAT 文件隐藏为只读，值得一试。

# sql - SQL查询以获取给定日期的状态

> ID：13706354
> 
> 赞同：1
> 
> 时间：2012-12-04T15:33:20.507
> 
> 标签：sql, sql-server, sql-server-2008-r2

我敢肯定这已经被回答过，但找不到。

我有一张每几周更改一次状态的项目表。我想查看任意一天并弄清楚每个状态有多少项目。

例如：

**tbl_ItemHistory**

```
ItemID
StatusChangeDate
StatusID 
```

样本数据：

```
1001, 1/1/2010, 1
1001, 4/5/2010, 2
1001, 6/15/2010, 4
1002, 4/1/2010, 1
1002, 6/1/2010, 3
... 
```

所以我需要弄清楚给定日期每个状态有多少项目。因此，在 2010 年 5 月 1 日，状态 2 中有一项 (1001) 和状态 1 (1002) 中的一项。

由于这些项目不会经常更改状态，也许我可以每晚创建一个缓存表，其中每个项目和一年中的每一天都有一行？我不确定这是否是最好的或如何做到这一点

我正在使用 SQL Server 2008R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:40:07.500

对于任意一天，您可以执行以下操作：

```
select ih.*
from (select ih.*,
             row_number() over (partition by itemId order by StatusChangeDate desc) as seqnum
      from tbl_ItemHistory ih
      where StatusChangeDate <= @YOURDATEGOESHERE
     ) ih
where seqnum = 1 
```

这个想法是枚举每个日期或之前的所有历史记录，使用`row_nubmer`. 排序是按时间倒序排列的，因此最近的记录（日期当天或之前）的值为 1。

然后查询只选择值为 1 的记录。

要聚合结果以获取日期的每个状态，请使用：

```
select statusId, count(*)
from (select ih.*,
             row_number() over (partition by itemId order by StatusChangeDate desc) as seqnum
      from tbl_ItemHistory ih
      where StatusChangeDate <= @YOURDATEGOESHERE
     ) ih
where seqnum = 1
group by StatusId 
```

# php - 城市、州的正确案例名称，包括撇号

> ID：13706362
> 
> 赞同：0
> 
> 时间：2012-12-04T15:33:35.670
> 
> 标签：php

我有这个代码：

```
$CapDeliveryCityANDState = str_replace('\, ', '\,', ucwords(str_replace('\,', '\, ', strtolower($CapDeliveryCityANDState))));
$CapDeliveryCityANDState = strrev(ucfirst(strrev($CapDeliveryCityANDState))); 
```

这使得每个单词的第一个字母大写，其余的小写，在逗号“，”之后，它使前两个字母大写，但我想添加另一件事，如果有一个“'”，则将字母大写，所以，到目前为止，我对这个例子的效果很好：

`cHiCago, il`会成为`Chicago, IL`

但如果是的`o'fallon, mo`话，`O'fallon, MO`但我希望它是`O'Fallon, MO`（撇号后的大写字母）

谢谢您的帮助...

解决方案是：

```
 $CapDeliveryCityANDState = str_replace('\, ', '\,', ucwords(str_replace('\,', '\, ', strtolower($CapDeliveryCityANDState))));
    $CapDeliveryCityANDState = strrev(ucfirst(strrev($CapDeliveryCityANDState)));
    if(strpos($CapDeliveryCityANDState, "'")) {
            $pos = strpos($CapDeliveryCityANDState, "'") + 1;
    }
    $CapDeliveryCityANDState = substr_replace($CapDeliveryCityANDState, strtoupper($CapDeliveryCityANDState[$pos]), $pos, 1);
    $CapDeliveryCityANDState[$l=strlen($CapDeliveryCityANDState)-2] = strtoupper($CapDeliveryCityANDState[$l]); 
```

如果他们需要，可以为任何人添加更多代码：

```
$CapDeliveryCityANDState = $contact_CityandStateSTR;
if(strlen($CapDeliveryCityANDState) >= 5){ //If more then 5 letters then do the below
$CapDeliveryCityANDState = str_replace('\, ', '\,', ucwords(str_replace('\,', '\, ', strtolower($CapDeliveryCityANDState))));
$CapDeliveryCityANDState = strrev(ucfirst(strrev($CapDeliveryCityANDState)));
if(strpos($CapDeliveryCityANDState, "'")) {
        $pos = strpos($CapDeliveryCityANDState, "'") + 1;
$CapDeliveryCityANDState = substr_replace($CapDeliveryCityANDState, strtoupper($CapDeliveryCityANDState[$pos]), $pos, 1);
}

$mystringz = $CapDeliveryCityANDState;
$findmez   = ',';
$posz = strpos($mystringz, $findmez);
if ($posz !== false) {
// IF NOT FALSE THEN CAP. LAST 2 LETTERS (STATE)
$CapDeliveryCityANDState[$l=strlen($CapDeliveryCityANDState)-2] = strtoupper($CapDeliveryCityANDState[$l]);
} else {
// ELSE IF FALSE THEN LEAVE AS IS
$CapDeliveryCityANDState = $contact_CityandStateSTR;
}
}
$CapDeliveryCityANDState = str_replace(" ,", ",", $CapDeliveryCityANDState); //remove space after city
$CapDeliveryCityANDState = str_replace(",", ", ", $CapDeliveryCityANDState); //add space after comma
$CapDeliveryCityANDState = preg_replace('!\s+!', ' ', $CapDeliveryCityANDState); //Check and remove double space 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:40:25.610

使用 strstr() 查找撇号。如果存在，将值分解为两部分（撇号之前和之后），将它们大写，然后再次将它们 implode() 放在撇号上。

# c# - 在 Linq 中使用聚合进行多个分组

> ID：13706363
> 
> 赞同：1
> 
> 时间：2012-12-04T15:33:37.993
> 
> 标签：c#, sql, linq, sql-server-2008

我目前有这个代码：

```
foreach (var newsToPolitician in news.NewsToPoliticians)
{
     var politician = newsToPolitician.Politician;
     var votes = (from s in db.Scores
                   where o.IDPolitician == politician.IDPolitician
                         && o.IDNews == IDNews
                   group o by o.IDAtribute
                   into g
                   select new{
                      Atribute= g.Key,
                      TotalScore= g.Sum(x => x.Score)
                   }).ToList();
} 
```

它工作正常，但我想避免`foreach`循环对我的数据库进行多次查询。我的表`Scores`如下所示：

```
IDScore | IDNews | IDUser | IDPolitician | IDAtribute | Score
1         40       1010     35             1             1
2         40       1010     35             2            -1
3         40       1002     35             1             1
4         40       1002     35             2             1
5         40       1002     40             1            -1
... 
```

我的目标是汇总新闻中所有政客的所有分数。一条新闻最多可以有 7 个政客。在一个循环
中调用我的数据库多达七次是否很昂贵。`foreach`我知道这不是最佳实践，所以我很感兴趣有没有办法在这种特殊情况下避免它并调用数据库然后在服务器端处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:39:40.910

更新 - 由于用户评论已重新调整以尝试并确保在服务器上进行聚合。在这种情况下，我们可以通过两者在服务器上进行分组`IDPolitician`，`IDAttribute`然后将这些组拉入`ToLookup`本地，如下所示：

```
var result = db.Scores.Where(s => s.IDNews == IDNews)
                      .Where(s => news.NewsToPoliticians
                                      .Select(n => n.Politician.IDPolitician)
                                      .Contains(s.IDPolitician))
                      .GroupBy(s => new
                                    {
                                      s.IDPolitician,
                                      s.IDAttribute
                                    },
                                (k,g ) => new
                                          {
                                           k.IDPolitician,
                                           k.IDAttribute,
                                           Sum = g.Sum(x => x.Score)
                                           })
                      .ToLookup(anon => anon.IDPolitician,
                                anon => new { anon.IDAttribute, anon.Sum }) 
```

Legacy - 你想在`GroupJoin`这里使用，它会是这样的：

```
var result = news.NewsToPoliticians
                 .GroupJoin( db.Scores.Where(s= > s.IDNews == IDNews),
                             p => p.IDPolitician,
                             s => s.IDPolitician,
                             (k,g) => new
                                      {
                                        PoliticianId = k,
                                        GroupedVotes = g.GroupBy(s => s.IDAtribute,
                                                                 (id, group) => new
                                                                                {
                                                                                 Atribute = id,
                                                                                 TotalScore = group.Sum(x => x.Score)
                                                                                 })
                                      })
                 .ToList(); 
```

但是，您的提供者将如何翻译它，因此您可能仍然需要多个查询来解决这个问题，您可以使用以下内容：

```
var politicianIds = news.NewsToPoliticians.Select(p => p.IDPolitician).ToList()
var result = db.Scores.Where(s= > s.IDNews == IDNews)
                      .Where(s => politicianIds.Contains(s.IDPolitician))
                      .GroupBy(p => p.IDPolitician,
                              (k,g) => new
                                       {
                                        PoliticianId = k,
                                        GroupedVotes = g.GroupBy(s => s.IDAtribute,
                                                                 (id, group) => new
                                                                                {
                                                                                 Atribute = id,
                                                                                 TotalScore = group.Sum(x => x.Score)
                                                                                 })
                                       })
                      .ToList(); 
```

希望最多应该是 2 个查询（取决于是否`NewsToPoliticians`依赖于 db）。你只需要试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:36:07.240

使用存储过程并让 SQL 服务器引擎完成所有工作。您仍然可以使用 Linq 调用存储过程，这将最大限度地减少对数据库的所有调用

# ruby-on-rails - ActionController::RoutingError (没有路由匹配 [GET] "

> ID：13706365
> 
> 赞同：1
> 
> 时间：2012-12-04T15:33:45.320
> 
> 标签：ruby-on-rails, routes

现在我在stackoverflow上写我的问题，因为搜索网络并没有带来任何解决方案。虽然有很多 RoutingError 问题和答案，但对我来说没有什么有趣的。

这是我的错误：

```
ActionController::RoutingError (No route matches [GET] "/kwiki/download/thumbnails/4687717/IP49120-low.jpg"): 
```

在我的控制器中，我从其他服务器获取 HTML 页面。此 HTML 页面包括图像和链接。

该视图很好地呈现了这个 HTML 页面，但没有图像。我在哪里以及如何注意渲染这些图像？在哪里以及如何**将**图像 href http:// **localhost:3000** /kwiki/download/thumbnails/4687717/IP49120-low.jpg替换为**http://example.com** /kwiki/download/thumbnails/4687717/IP49120-low .jpg？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:44:57.890

要修改您获取的 HTML 页面，您可以使用[Nokogiri](http://nokogiri.org/)。这将 mailto: links 替换为链接的文本。使用合适的正则表达式，您可以执行类似的操作来更改图像 URL。

```
 doc = Nokogiri::HTML(open('http://www.example.com'))
 doc.css("a").each do |a|
   unless a['href'].present? && a['href'].starts_with?('mailto:')
     a.replace(a.content)
   end
 end 
```

# ajax - PhantomJS：执行 AJAX 调用的事件处理程序

> ID：13706368
> 
> 赞同：0
> 
> 时间：2012-12-04T15:33:55.710
> 
> 标签：ajax, phantomjs

这是 PhantomJS 的一个简单测试用例，用于演示在调用时执行 AJAX 调用的事件处理程序不起作用。

我在这里创建了一个简单的测试来尝试访问通过 AJAX 加载的一些内容。我很可能做错了什么，在这种情况下，我会很感激有人指出那是什么。但是，如果不是，我认为 PhantomJS 有问题。

这是一个简单的页面，其中有一个绑定了更改事件的页面。当值改变时，它会从服务器加载一些内容并替换特定 <p> 的内容

<p id="bar">foo</p> 的文本应在 ajax 调用完成并处理后更改为 'bar'。

谁能帮我吗？

```
<html>
<head>
    <title>AJAX test</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        $(function(){
            $('#getBar').change(function() {
                $('#bar').load("/test/bar");
            });
        });
    </script>
</head>
<body>
    <h1>Foo</h1>
    <div>
        <select id="getBar">
            <option value=""></option>
            <option value="go" id="go">Get Bar Text</option>
        </select>
    </div>
    <p id="bar">foo</p>
</body>
</html> 
```

这是我用来导航到这个简单页面的脚本，并尝试使用 jQuery 更改值并触发更改事件。脚本的步骤被分解为一组“步骤”函数：

```
var wp = require("webpage");
var system = require('system');
var util = require('./util-module.js'); // my logging API

var baseUrl = 'http://127.0.0.1:8080';

/* Global error handler for phantom */
phantom.onError = function(msg, trace) {
    var msgStack = ['PHANTOM ERROR: ' + msg];
    if (trace) {
        msgStack.push('TRACE:');
        trace.forEach(function(t) {
            msgStack.push(' -> ' + (t.file || t.sourceURL) + ': ' + t.line);
        });
    }
    util.log.error(msgStack.join('\n'));

    // exit phantom on error
    phantom.exit();
};

/* Inject jQuery into the phantom context */
var injected = phantom.injectJs('./jquery.min.js');
util.log.debug('phantom injected jQuery: ' + injected);

/* Create and initialize the page */
var page = wp.create();

var loadInProgress = false;
page.onLoadStarted = function() {
    loadInProgress = true;
    util.log.debug("page load started: " + page.url);
};

page.onLoadFinished = function() {
    loadInProgress = false;
    util.log.debug("page load finished: " + page.url);

    // inject jquery onto the page
    var injected = page.injectJs('./jquery.min.js');
    util.log.debug('page injected jQuery: ' + injected);
    page.evaluate(function() {
        jQuery.noConflict();
    });
};

page.onResourceRequested = function(request) {
    console.log('Request (#' + request.id + '): ' + JSON.stringify(request));
};

page.onResourceReceived = function(response) {
    console.log('Response (#' + response.id + ', stage "' + response.stage + '"): ' + JSON.stringify(response));
};

/* Redirect all console messages logged on page to debug */
page.onConsoleMessage = function(msg) {
    util.log.debug(msg);
};

var steps = [
    function() {
        util.log.debug('LOAD THE TEST PAGE');
        page.open(baseUrl + "/test/foo");
    },
    function() {
        util.log.debug('CHANGE THE SELECT');
        // see what the first result is.  change the sort.  Wait for the ajax update to complete
        // start iterating over results.
        var oldTitle = page.evaluate(function() {
            return jQuery('#bar').text();
        });
        util.log.debug('OLD TEXT: ' + oldTitle);
        page.evaluate(function(){
            jQuery('select').val('go');
            jQuery('select').trigger('change');
            jQuery('select').change();
            console.log('SELECT VALUE AFTER UDPATE: ' + jQuery('select').val());
        });
        loadInProgress = true;
        count = 0;
        var fint = setInterval(function() {
            var newTitle = page.evaluate(function() {
                return jQuery('#bar').text();
            });
            util.log.debug('NEW TEXT: ' + newTitle);
            count++;
            if (oldTitle != newTitle) {
                clearInterval(fint);
                loadInProgress = false;
            }
            if (count > 5) {
                clearInterval(fint);
                loadInProgress = false;
            }
        }, 500);

    },
    function() {
        util.log.debug('PRINT PAGE TITLE');
        page.evaluate(function(){
            console.log(document.title);
        });
    },

];

// harness that executes each step of the scraper
var testIndex = 0;
interval = setInterval(function() {
    if (!loadInProgress && typeof steps[testIndex] == "function") {
        util.log.debug("step " + (testIndex + 1));
        steps[testIndex]();
        testIndex++;
    }
    if (typeof steps[testIndex] != "function") {
        util.log.debug("test complete!");
        clearInterval(interval);
        phantom.exit();
    }
}, 500); 
```

这是输出。我期待文本从 'foo' 变为 'bar' 但它永远不会发生

```
DEBUG: CHANGE THE SELECT
DEBUG: OLD TEXT: foo
DEBUG: SELECT VALUE AFTER UDPATE: go
DEBUG: NEW TEXT: foo
DEBUG: NEW TEXT: foo
DEBUG: NEW TEXT: foo
DEBUG: NEW TEXT: foo
DEBUG: NEW TEXT: foo
DEBUG: NEW TEXT: foo
DEBUG: step 5
DEBUG: PRINT PAGE TITLE
DEBUG: AJAX test
DEBUG: test complete! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:13:41.600

顺便说一句，PhantomJS 1.7。这是一个伟大的项目。

上面列出的示例的问题是我只是将 jQuery 注入到已经有 jQuery 的页面中。当我停止这样做时，它起作用了。

# linux-kernel - 磁盘 IO 上 swiotlb_unmap_sg_attrs() 中的 NULL 指针取消引用

> ID：13706370
> 
> 赞同：1
> 
> 时间：2012-12-04T15:34:00.500
> 
> 标签：linux-kernel, linux-device-driver, device-driver, kernel-module, pci-e

在使用 PCIe 块设备驱动程序读取或写入文件时，我遇到了一个我真的不明白的错误。我似乎在[swiotlb_unmap_sg_attrs()](http://lxr.free-electrons.com/source/lib/swiotlb.c#L852)中遇到了一个问题，它似乎正在对`sg`指针进行 NULL 取消引用，但我不知道这是从哪里来的，因为`scatterlist`我自己使用的唯一一个被分配为设备信息的一部分只要驱动程序这样做，结构就会持续存在。

有一个[堆栈跟踪](http://pastebin.com/98PRptzF#)来解决这个问题。它在确切的细节上往往会有所不同，但它总是会崩溃`swiotlb_unmap_sq_attrs()`。

我*认为*我可能有锁定问题，因为我不确定如何处理 IO 函数周围的锁定。调用函数时已持有锁`request`，我在调用 IO 函数本身之前释放它，因为它们需要（MSI）IRQ 才能完成。IRQ 处理程序更新 IO 函数正在等待的“状态”值。当 IO 函数返回时，我将锁取回并返回到请求队列处理。

崩溃发生在`blk_fetch_request()`以下期间：

```
if (!__blk_end_request(req, res, bytes)){
    printk(KERN_ERR "%s next request\n", DRIVER_NAME);

    req = blk_fetch_request(q);
} else {
    printk(KERN_ERR "%s same request\n", DRIVER_NAME);
} 
```

其中`bytes`由请求处理程序更新为 IO 的总长度（每个分散聚集段的总长度）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:58:50.973

原来这是由于`request`函数的重新进入。因为我在中间解锁以允许 IRQ 进入，所以`request`可以再次调用该函数，获取锁（而原始请求处理程序正在等待 IO），然后错误的处理程序将获取 IRQ，一切都随着失败的 IO 堆栈。

我解决这个问题的方法是在请求函数的开头设置一个“忙”标志，在最后清除它，如果设置了，则在函数的开头立即返回：

```
static void mydev_submit_req(struct request_queue *q){
    struct mydevice *dev = q->queuedata;

    // We are already processing a request
    // so reentrant calls can take a hike
    // They'll be back
    if (dev->has_request)
        return;

    // We own the IO now, new requests need to wait
    // Queue lock is held when this function is called
    // so no need for an atomic set
    dev->has_request = 1; 

    // Access request queue here, while queue lock is held

    spin_unlock_irq(q->queue_lock);

    // Perform IO here, with IRQs enabled
    // You can't access the queue or request here, make sure 
    // you got the info you need out before you release the lock

    spin_lock_irq(q->queue_lock);

    // you can end the requests as needed here, with the lock held

    // allow new requests to be processed after we return
    dev->has_request = 0;

    // lock is held when the function returns
} 
```

但是，我仍然不确定为什么我始终从中获得堆栈跟踪`swiotlb_unmap_sq_attrs()`。

# ruby - def `self.function` 名称是什么意思？

> ID：13706373
> 
> 赞同：76
> 
> 时间：2012-12-04T15:34:15.380
> 
> 标签：ruby

谁能向我解释添加`self`到方法定义中的含义是什么？`this`和java 中的关键字类似吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-04T18:53:55.113

与其他语言相反，Ruby 没有类方法，但它具有附加到特定对象的单例方法。

```
cat = String.new("cat")
def cat.speak
    'miaow'
end
cat.speak #=> "miaow" 
cat.singleton_methods #=> ["speak"] 
```

`def cat.speak`创建一个附加到对象 cat 的单例方法。

当你写的时候`class A`，它相当于`A = Class.new`：

```
A = Class.new
def A.speak
    "I'm class A"
end
A.speak #=> "I'm class A" 
A.singleton_methods #=> ["speak"] 
```

`def A.speak`创建一个附加到对象 A 的单例方法。我们称它为类 A 的类方法。

当你写

```
class A
    def self.c_method
        'in A#c_method'
    end
end 
```

您创建`Class`(*) 的一个实例。在类定义中，Ruby 将 self 设置为这个新的 Class 实例，该实例已分配给常量 A。因此`def self.c_method`等价于`def cat.speak`，也就是说您定义了一个附加到对象 self 的单例方法，该对象当前是类 A .

现在类 A 有两个单例方法，我们通常称之为类方法。

```
A.singleton_methods
 => ["c_method", "speak"] 
```

*(*) 从技术上讲，在这种情况下，如果`A`已经创建`A = Class.new`，`class A`则重新打开现有类。这就是为什么我们最后有两个单例方法。但在通常情况下，它是类的第一个定义，它意味着`Class.new`.*

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-12-04T15:40:51.707

ruby 中的 self 有点类似于`this`java 中的，但是当涉及到类时，它更像`static`java 中的关键字。一个简短的例子：

```
class A 
  # class method 
  def self.c_method
    true
  end
  # instance method
  def i_method
    true
  end
end

A.c_method #=> true
A.i_method #=> failure
A.new.i_method #=> true
A.new.c_method #=> failure 
```

**更新：** java中的静态方法和ruby中的类方法之间的区别

> Java 中的静态方法有两个不同的特点，使它们与实例方法不同：a) 它们是静态的，b) 它们与实例无关。（IOW：它们根本不像方法，它们只是过程。）在 Ruby 中，所有方法都是动态的，并且所有方法都与一个实例相关联。事实上，与 Java 中存在三种不同的“方法”（实例方法、静态方法和构造函数）不同，Ruby 中只有一种方法：实例方法。所以，不：Java 中的静态方法与 Ruby 中的方法完全不同。– Jörg W Mittag 1 小时前

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-04T15:35:45.530

声明方法时，`self`声明的 是声明类/模块，因此有效地定义了一个类方法。对于客户端，这类似于`static`java 中的方法。客户端将调用类而不是实例上的方法：`MyClass.method`

[在这里](http://railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/)，您可以找到有关类和实例方法的更多详细信息。

编辑：虽然`self`关键字类似于 java 中的`this`关键字，但使用`self`for 类方法声明的效果类似于`static`在 java 中使用关键字的效果。相似之处在于 java 中的静态方法，就像 ruby​​ 中的类方法一样，是使用类对象本身而不是类的实例来访问的。

请注意，`static`不代表动态的反义词。该关键字的名称选择是有问题的（可能继承自 C），而是应该被称为`perClass`或类似以更好地反映含义。技术含义是每个类加载器的所有`static`成员仅存在一次。

# java - 为大型数据集（5 GB）提供快速访问键值存储的最佳方法

> ID：13706375
> 
> 赞同：2
> 
> 时间：2012-12-04T15:34:20.050
> 
> 标签：java, hadoop, mapreduce, elastic-map-reduce, emr

有一个大小约为 5GB 的数据集。这个大数据集每行只有一个键值对。现在这需要读取数十亿次键的值。

我已经尝试过[MapDB](https://github.com/jankotek/MapDB)的基于磁盘的方法，但是它抛出`ConcurrentModification Exception`并且还不够成熟，无法在生产环境中使用。

我也不想将它放在数据库中并进行十亿次调用（尽管可以在这里完成一定级别的内存缓存）。

基本上，我需要在 hadoop 工作步骤的映射器/归约器中访问这些键值数据集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:34:04.180

所以在尝试了很多东西之后，我们现在正在使用 SQLite。

以下是我们所做的：

1.  我们将所有键值对数据加载到预定义的数据库文件中（在键列上对其进行索引，虽然它增加了文件大小但值得。）
2.  将此文件 (key-value.db) 存储在 S3 中。
3.  现在这被作为分布式缓存传递给 hadoop 作业。
4.  在 Mapper/Reducer 的配置中，打开到 db 文件的连接（大约需要 50 毫秒）
5.  在 map/reduce 方法中使用键查询这个数据库（花费的时间可以忽略不计，甚至不需要分析它，它是如此微不足道！）
6.  在 Mapper/Reducer 的清理方法中关闭了连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:38:37.283

试试[Redis](http://redis.io/)。看来这正是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:57:26.823

我会试试[Oracle Berkerley DB Java 版](http://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html)，它支持 Maps，既成熟又可扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:49:28.680

我注意到你用 elastic-map-reduce 标记了这个......如果你在 AWS 上运行，也许 DynamoDB 是合适的。

另外，我想澄清一下：这个数据集是您的 MapReduce 作业的输入，还是在 MapReduce 作业期间随机访问的补充数据集？

# ruby-on-rails - Rails to_json 方法：unicode 字符的问题

> ID：13706378
> 
> 赞同：1
> 
> 时间：2012-12-04T15:34:33.857
> 
> 标签：ruby-on-rails, json, unicode

我在 Rails 应用程序中遇到了 unicode 字符问题。问题是当我用一些包含斯堪的纳维亚字符的字符串存储对象时，这些字符在使用 to_json 方法时不会正确呈现。基本上所有这些字符都是这样渲染的：

```
\"description\":\"\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\" 
```

这是示例：

```
 Item.create(:title => "Test title", :description => "With scandic characters öäöäö")
 => #<Item id: 198, title: "Test title", priority: nil, description: "With scandic characters öäöäö", bought_when: nil, warranty_until: nil, created_at: "2012-12-04 15:22:19", updated_at: "2012-12-04 15:22:19", user_id: nil, custom_id: nil, uuid: nil, position: 1, public: nil, secure_details: "", bookmark_id: nil, giveaway: nil, trash: false> 
```

此时创建的对象看起来没问题。

```
 Item.last 
```

返回

```
 => #<Item id: 198, title: "Test title", priority: nil, description: "With scandic characters \xC3\xB6\xC3\xA4\xC3\xB6\xC3\xA4\xC3\xB6", bought_when: nil, warranty_until: nil, created_at: "2012-12-04 15:22:19", updated_at: "2012-12-04 15:22:19", user_id: nil, custom_id: nil, uuid: nil, position: 1, public: nil, secure_details: "", bookmark_id: nil, giveaway: nil, trash: false> 
```

这个“带有扫描字符 \xC3\xB6\xC3\xA4\xC3\xB6\xC3\xA4\xC3\xB6” - 看起来还可以吗？还是我在项目创建阶段已经错过了一些正确的编码？

无论如何，现在当调用 Item.last.to_json 时，我得到了这个：

```
"description\":\"With scandic characters \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\" 
```

在这一点上，弦肯定断了。

我缺乏一些关于 Rails 中正确字符编码的知识，所以任何提示都将不胜感激。但是，该项目在浏览器中呈现时看起来不错 - 这仅在执行 JSON 响应时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:11:03.550

好的，问题是 MySQL db 不是 unicode。现在通过迁移到 PosgreSQL 来解决这个问题，确保它是 unicode 并使用 Taps gem 迁移数据。一切都根据这个 Railscast：[http ://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

# symfony - 获取文件名

> ID：13706381
> 
> 赞同：0
> 
> 时间：2012-12-04T15:34:39.263
> 
> 标签：symfony

我正在使用 Synfony 2.1。我有一个传递 jpg.file 的表单

如何获取文件名！

我尝试使用 getOriginalName() 但不起作用。

这是我的表格

```
public function buildForm( FormBuilderInterface $builder, array $options)
{
    $builder->add('nombre');
    $builder->add('descripcion', 'textarea');
    $builder->add('valor');
    $builder->add('imagen', 'file', array('required' => false)); 
```

我试图获得价值......

```
 if ($form->isValid()){
               ...
                $imagen= $gift->getImagen();
                $filename =$imagen->getOriginalName();
                $ruta='\web\stories\/'. $filename; 
```

任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:45:01.880

尝试使用`getClientOriginalName()`

# python - 如何在没有 url_for('static', file_name='xxx') 的情况下在 Flask 中获取静态文件

> ID：13706382
> 
> 赞同：11
> 
> 时间：2012-12-04T15:34:42.523
> 
> 标签：python, flask, jinja2, static-files

我不想使用 url_for('static', file_name='foo.jpg') 在模板中获取静态文件。

如何以这种方式获取静态文件：

```
<img src="/pic/foo.jpg" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T16:05:28.420

您可以设置自己的路由来提供静态文件。添加此方法并更新方法中的静态路径目录`send_from_directory`，然后您的 img 标签应该可以工作。

```
@app.route('/pic/<path:filename>')
def send_pic(filename):
    return send_from_directory('/path/to/static/files', filename) 
```

对于生产应用程序，您应该将服务器设置为直接提供静态文件。它会更快并且使用更少的服务器资源，但对于少数用户来说，差异应该不是问题。

# objective-c - 停止 UIGestureRecognizer 对 UIView 内的 UIButtons 进行操作

> ID：13706383
> 
> 赞同：2
> 
> 时间：2012-12-04T15:34:50.557
> 
> 标签：objective-c, ios, uiview, uigesturerecognizer, uitapgesturerecognizer

我在我的应用程序中附加了`UITapGestureRecognizer`a `UIView`。如果用户双击它，该视图内的按钮会随机重新排列。工作正常，可爱。

但是，用户也可以通过双击其中一个按钮本身，甚至通过点击屏幕不同部分的两个按钮来触发此操作。

是否有一种明智/简单的方法可以让这种双击仅在两次点击在`x`像素数范围内时才起作用，并且在视图本身上，而不是其中的任何元素，例如这些`UIButton`s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:14:54.050

我认为通常的方法是使用`shouldReceiveTouch`. 查看[这个问题](https://stackoverflow.com/questions/4825199/gesture-recognizer-and-button-actions)以进行冗长的讨论和所有细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:08:00.643

一种方法是将单击手势识别器附加到按钮上——这将抢占按钮的正常触摸事件，因此您必须将按钮的操作方法放入手势识别器的操作方法中。然后，您将向双击器添加一个依赖项，使其仅在单击器失败时触发：

```
[self.doubleTapper requireGestureRecognizerToFail:self.tapper]; 
```

# asp.net - ASP.Net 文字。插入 html

> ID：13706384
> 
> 赞同：0
> 
> 时间：2012-12-04T15:34:57.320
> 
> 标签：asp.net, html, literals

我的页面上有简单的文字。

```
<asp:Literal ID="litDescription" runat="server"></asp:Literal> 
```

当我尝试将以下文本设置为文字时：

```
<p><div>Some Text</div></p> 
```

在我的浏览器标记中，我看到

```
<p></p>
    <div>Some Text</div>
<p></p> 
```

为什么有两个“p”标签？我需要有

```
<p><div>Some Text</div></p>. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T15:41:08.090

P 中的 div 是无效的 HTML。我不认为 .net 正在制作

向上。我认为它来自您的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:41:53.020

`<div>`在标签内有标签是不好的语法`<p>`。它应该是`<div><p>Some Text</p></div>`

在 C# 中：

`litDescription.Text = "<div>Some Text</div>";`

但是，这仍然是不好的语法。如果您使用 div 将内联样式应用于`<p>`标记的一部分，请`<span>`使用`<div>`.

`litDescription.Text = "Some Text";`是正确的 html 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:43:17.260

一种更符合asp.net web表单的服务器端控制结构的不同方法。

```
<p><div>
<asp:Literal id=DescriptionLiteral runat="server" />
</div></p>

// c# code:
DescriptionLiteral.Text = "Some Text"; 
```

请注意，`<div>`嵌套在标签中的`<p>`标签不是有效的 HTML 标记。

# windows-8 - Windows Store 应用中的二维码

> ID：13706385
> 
> 赞同：1
> 
> 时间：2012-12-04T15:34:59.607
> 
> 标签：windows-8, windows-store-apps, qr-code

我需要在我的 Windows RT 应用程序中编写一个 QR 码阅读器，这样我才能获得我正在扫描的特定项目的 ID。

我找到了免费 QR 码生成器的来源，但我找不到从 QR 码读取 ID 的代码，所以这里的任何人都可以告诉我，我在哪里可以找到 QR 阅读器的来源或任何其他方式读取二维码 例如安装一个第三方程序，它只读取二维码并将结果发送回我的程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:59:14.793

我建议看看[ZXing.NET](http://zxingnet.codeplex.com/)。它是一个开源条码扫描器库，包括对 QR 码的支持。CodePlex 上有一个可用的 WinRT 端口。您只需将图像传递到库中即可读取内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T12:40:31.327

我遇到了同样的问题，我必须手动编写相机捕捉功能，然后将其传递给 ZXing。在这里查看 - [http://quirkd.wordpress.com/2015/02/18/reading-qr-codes-in-winrt-tricky/](http://quirkd.wordpress.com/2015/02/18/reading-qr-codes-in-winrt-tricky/)

# php - 在条件中使用变量值

> ID：13706387
> 
> 赞同：0
> 
> 时间：2012-12-04T15:35:01.060
> 
> 标签：php, variables, conditional-statements

我有一个存储在变量中的条件`$condition = "1==1"`，我想在条件语句中使用变量的值。

```
if($condition) { //$condition should be parsed as 1==1
    return true;
} 
```

这可能吗？我试过使用`var_export`，但显然这不起作用。

```
if(var_export($condition)) {
    return true;
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:03:22.650

经过上面评论中的一些讨论，我们发现，条件本身不是问题，而是如何将其传递给函数

```
conditional_func($var . " == 'test'", $result); 
```

我们意识到，不需要将第一个参数作为字符串传递，而是可以直接使用布尔值，因此我们根本不需要评估字符串。

```
conditional_func($var == 'test', $result); 
```

作为旁注：@BryanMoyles 对这个问题的回答是正确的，但请记住，这`eval()`是邪恶的（你想不出任何可能发生的陷阱），另一方面，只有一些不太深奥的用例，你不能使用其他方法。

# java - 检查日期是否适合定义的日期模式

> ID：13706388
> 
> 赞同：1
> 
> 时间：2012-12-04T15:35:04.340
> 
> 标签：java, android, date, simpledateformat

用户应按下一个格式输入日期`yyyy-MM-dd`。所以我使用以下方法检查它：

```
public static boolean isDateValid(SimpleDateFormat dateFormat, String date) {
    try {
        dateFormat.parse(date);
        return true;
    } catch (ParseException e) {
        e.printStackTrace();
        return false;
    }
} 
```

但即使我`12-12-2012`输入

```
SimpleDateFormat("yyyy-MM-dd") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:39:10.960

您可以使用[`DateFormat.setLenient(false)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29), 来避免`lenient`解析：-

```
 try {
        dateFormat.setLenient(false);
        dateFormat.parse(date);
        return true;
    } catch (ParseException e) {
        e.printStackTrace();
        return false;
    } 
```

来自文档： -

> 通过宽松的解析，解析器可以使用启发式方法来解释不精确匹配该对象格式的输入。使用严格的解析，输入必须匹配这个对象的格式。

# ruby - 无法获得 if，elsif 工作步骤（watir-webdriver）

> ID：13706394
> 
> 赞同：0
> 
> 时间：2012-12-04T15:35:34.323
> 
> 标签：ruby, if-statement, cucumber, watir-webdriver

我正在使用 watir-webdriver。这是我的步骤定义，有人可以纠正我在这里做错了什么。我正在尝试使用一组详细信息进行注册。如果已经使用了第一组详细信息，我希望它使用第二组详细信息，依此类推。不幸的是，当测试运行时，它似乎只使用了第一组和第二组细节。它不会进入第三组。请帮助或建议。

```
Given /^I have signed up as a lender'$/ do
  @browser.link(:text, 'Join').click
  @browser.radio(:id, 'user_group_name_lenders').set
  @browser.text_field(:id, 'user_username').set('qw@qw.com')
  @browser.text_field(:id, 'user_username_confirmation').set('qw@qw.com')
  @browser.text_field(:id, 'user_login_password').set('qwe123')
  @browser.text_field(:id, 'user_login_password_confirmation').set('qwe123')
  @browser.button(:value, 'Sign up').click
  if @browser.h1(:text, 'Investor signup').exists?
    @browser.text_field(:id, 'lender_lender_profile_attributes_first_name').should exist
  elsif @browser.label(:text, 'has already been taken').exists?
    @browser.radio(:id, 'user_group_name_lenders').set
    @browser.text_field(:id, 'user_username').set('we@we.com')
    @browser.text_field(:id, 'user_username_confirmation').set('we@we.com')
    @browser.text_field(:id, 'user_login_password').set('qwe123')
    @browser.text_field(:id, 'user_login_password_confirmation').set('qwe123')
    @browser.button(:value, 'Sign up').click
    @browser.h1(:text, 'Investor signup').exists?
  elsif @browser.label(:text, 'Email *').exists?
    @browser.radio(:id, 'user_group_name_lenders').set
    @browser.text_field(:id, 'user_username').set('er@er.com')
    @browser.text_field(:id, 'user_username_confirmation').set('er@er.com')
    @browser.text_field(:id, 'user_login_password').set('qwe123')
    @browser.text_field(:id, 'user_login_password_confirmation').set('qwe123')
    @browser.button(:value, 'Sign up').click
    @browser.h1(:text, 'Investor signup').exists?
  elsif @browser.label(:text, 'Password *').exists?
    @browser.radio(:id, 'user_group_name_lenders').set
    @browser.text_field(:id, 'user_username').set('rt@rt.com')
    @browser.text_field(:id, 'user_username_confirmation').set('rt@rt.com')
    @browser.text_field(:id, 'user_login_password').set('qwe123')
    @browser.text_field(:id, 'user_login_password_confirmation').set('qwe123')
    @browser.button(:value, 'Sign up').click
    @browser.h1(:text, 'Investor signup').should exist
  else @browser.link(:text, 'Terms & Conditions').exists?
    @browser.radio(:id, 'user_group_name_lenders').set
    @browser.text_field(:id, 'user_username').set('ty@ty.com')
    @browser.text_field(:id, 'user_username_confirmation').set('ty@ty.com')
    @browser.text_field(:id, 'user_login_password').set('qwe123')
    @browser.text_field(:id, 'user_login_password_confirmation').set('qwe123')
    @browser.button(:value, 'Sign up').click
    @browser.h1(:text, 'Investor signup').should exist
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:29:16.513

我认为您误解了 if-elsif-else 语句的工作原理。只有 1 个 if/elsif/else 代码块将被执行。换句话说，该语句永远不会尝试“we@we.com”，如果失败则尝试“er@er.com”。

如果意图只是尝试每个用户直到成功注册，您可以迭代用户名：

```
Given /^I have signed up as a lender'$/ do
    user_names = ['qw@qw.com', 'we@we.com', 'er@er.com', 'rt@rt.com', 'ty@ty.com']

    user_names.each do |user_name|
        @browser.radio(:id, 'user_group_name_lenders').set
        @browser.text_field(:id, 'user_username').set(user_name)
        @browser.text_field(:id, 'user_username_confirmation').set(user_name)
        @browser.text_field(:id, 'user_login_password').set('qwe123')
        @browser.text_field(:id, 'user_login_password_confirmation').set('qwe123')      
        @browser.button(:value, 'Sign up').click

        break if @browser.h1(:text, 'Investor signup').exists?
    end
    @browser.text_field(:id, 'lender_lender_profile_attributes_first_name').should exist
end 
```

这将依次尝试每个用户名，直到其中一个有效或您的用户名用完为止。

# c# - IsKeyLocked 返回奇怪的结果

> ID：13706398
> 
> 赞同：-1
> 
> 时间：2012-12-04T15:35:38.397
> 
> 标签：c#, winforms, keyboard

我正在使用一些模拟按键的代码。一切正常，我可以看到按键按预期按下（目前正在使用 Capslock/Numlock 进行测试，所以我可以看到键盘上的 LED）。但是，出于我的需要，我需要能够 100% 判断这些键是否被按下。我的应用程序表现得很奇怪，所以我决定以较小的规模重现这个问题，我发现了一件非常奇怪的事情。函数`IsKeyLocked`没有返回我期望的结果。

让我们有一个这样的代码：

```
 private void btnPressButton_Click(object sender, EventArgs e)
    {
        KeyboardManager.PressKey(KeyCode.CapsLock);

        lblKeyboardState.Text = IsKeyLocked(Keys.CapsLock).ToString();
    } 
```

按键方法：

```
 [DllImport("user32.dll", SetLastError = true)]
    private static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

    public static void PressKey(KeyCode keyCode)
    {
        byte code = (byte)keyCode;

        keybd_event(code, 0, KEYEVENTF_KEYDOWN, 0);
        keybd_event(code, 0, KEYEVENTF_KEYUP, 0);
    } 
```

有人会期望，在第一次单击按钮后，结果将为 True（运行应用程序时未按下 Capslock）。但这是错误的，即使我键盘上的 LED 灯在发光。当我再次按下按钮时，结果为 True，但 LED 不再发光。为什么这个函数返回错误的结果？我错过了什么还是......？

根据 msdn 文档：

> 确定 CAPS LOCK、NUM LOCK 或 SCROLL LOCK 键是否有效。

如果这是一个真实的陈述，那么这里到底发生了什么？如何从 C# 获得 100% 可靠的答案，无论 capslock/numlock 是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:23:54.837

我相信您看到这种行为的原因是因为您的代码设置了 CapsLock 的状态，然后在应用程序中发生 Caps 键锁定事件之前检查状态。您可以通过在设置 CapsLock 状态和检查状态之间简单地在代码中添加 DoEvents() 语句来使示例代码正常运行。

```
private void btnPressButton_Click(object sender, EventArgs e)
{
    KeyboardManager.PressKey(KeyCode.CapsLock);
    Application.DoEvents();
    lblKeyboardState.Text = IsKeyLocked(Keys.CapsLock).ToString();
} 
```

# pyephem - pyephem：通过 pip 安装失败

> ID：13706402
> 
> 赞同：1
> 
> 时间：2012-12-04T15:35:45.380
> 
> 标签：pyephem

我正在尝试使用 pip 在 OSX 10.7.5 系统上安装 pyephem。安装过程开始良好，多次成功调用 gcc。但是安装失败并显示错误消息：

```
ld: library not found for -lbundle1.o

collect2: ld returned 1 exit status

error: command 'gcc' failed with exit status 1 
```

这发生在命令之后：

```
gcc -bundle -undefined dynamic_lookup -g -arch i386 build/temp.macosx-10.5-i386-2.7/extensions/_libastro.o build/... [a whole list of .o files] 
```

我也尝试过使用 easy_install，但安装失败并显示相同的错误消息。

我根本不是专家，也不知道“bundle1”是什么。任何帮助将非常感激。

安德鲁·弗莱彻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:29:04.120

（**更新：**正如下面评论中所指出的，OP 通过在他的 Mac 上使用 ActiveState Python 避免了这个问题，这对于遇到这个问题的其他人来说可能是一个可能的解决方案。）

好吧，哇——我以前从未见过这个错误！在其他 Stack Overflow 用户能够提供更具体的答案之前，我将向您指出我刚刚发现的 Apple Mailing List 帖子的方向，其中有人因为系统中缺少某种 SDK 而出现错误：

[http://lists.apple.com/archives/darwin-dev/2011/Apr/msg00016.html](http://lists.apple.com/archives/darwin-dev/2011/Apr/msg00016.html)

如果您对库名称进行进一步的谷歌搜索，您可能会找到更多详细信息。

# objective-c - 广泛实施后改变objective-c方法

> ID：13706404
> 
> 赞同：0
> 
> 时间：2012-12-04T15:35:47.283
> 
> 标签：objective-c, xcode

我有一个在我的应用程序中广泛使用的方法，它看起来像这样：

```
-(void)commandWithParams:(NSMutableDictionary*)params command:(NSString *) command method: (NSString *) method onCompletion:(JSONResponseBlock)completionBlock { } 
```

这用于对 API 执行 REST 调用。在到处使用它之后，我意识到我需要添加另一个参数（仅在某些时候使用），我想知道最好的方法是什么。

我考虑过使用一个参数，如果没有指定，默认为 nil，但显然这是目标 c 中的一个禁忌（？）

我应该如何去改变它？我是否必须在任何地方更改它并通过零？如果是这样，xCode 中是否有任何简洁的功能可以轻松做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:43:24.650

Objective-C 中没有可选参数。你可以做的是使用两种不同的方法。

想象一下你有这个方法：

```
- (void)methodWithArgument:(NSString *)str {
    // block A
} 
```

现在您需要添加一个新参数，但不想在代码中的任何地方都指定它。

使用附加参数创建一个新方法并将您的实现移至该方法。您如何处理附加参数取决于方法的作用。从您的旧方法中，调用新方法`nil`作为新参数：

```
- (void)methodWithArgument:(NSString *)str andArgument:(NSString *)str2 {
    if (str2 != nil) {
        // do something.
    }
    // block A
}

- (void)methodWithArgument:(NSString *)str {
    [self methodWithArgument:str andArgument:nil];
} 
```

这就像您有一个带有可选参数的方法一样工作，默认为`nil`（或您选择的任何参数）。这是一种常见的设计模式，你也可以在 Apple 的框架中看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:51:59.910

作为上述方法的替代方法，您可以在 AppCode 中进行重构。它允许做这样的事情。

# java - Java 错误：打开的文件太多

> ID：13706409
> 
> 赞同：-3
> 
> 时间：2012-12-04T15:36:01.470
> 
> 标签：java

我编写了一个 java 代码，它是组合 3 个不同软件的包装器。我正常运行代码 100,000 次。在每次运行时，应该打开、重写和关闭不同的文件，所有这些都按照正确的 try 和 catch 约定进行。如果我在 Linux 服务器上运行代码，就没有问题。但是，当我在 1000 次后的 10 秒后在我的 Mac 上运行它时，会出现打开文件过多的错误，随后在加载文件 X 和 Y 等时出错，程序终止。

我还想补充一件事：代码运行 1000 次，然后设置被更改并再次更改 1000 次，这个过程会重复。所以前 4-5 次没有问题，而在 6-7 次（意味着 6000 次运行）之后会出现此错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:53:28.707

最可能的解释是您的 Java 应用程序中存在导致其泄漏文件打开文件的错误。避免该问题的方法是编写代码，以便*始终*关闭文件句柄；例如

```
 // Using the 'try with resource' construct
    try (Reader r = new FileReader(...)) {
        // use the reader
    } catch (IOException ex) {
        // ...
    } 
```

或者

```
 // Using classic try/catch/finally
    Reader r = null;
    try {
        r = new FileReader(...);
        // use the reader
    } catch (IOException ex) {
        // ...
    } finally {
        if (r != null) {
            try {
                r.close();
            } catch (IOException ex) {
                // ignore
            }
        }
    } 
```

该程序可能在一个操作系统上运行，而不是在另一个操作系统上运行，因为两个系统上打开文件数量的限制不同。如果 Java GC 运行，它将关闭通过相应句柄的终结器找到的任何无法访问的文件句柄。但是，这可能不会及时发生，以防止“打开的文件过多”异常。

* * *

*如果您的应用程序实际上需要同时*打开大量文件，则需要取消限制。这最好使用`ulimit`内置的 shell 来完成，假设您使用的是基于 UNIX 的操作系统。

但是请注意，仍然会有一个无法超过的硬限制。我相信这也适用于 Windows。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T15:53:25.057

您要么需要增加允许使用 ulimit 处理的文件数量的限制，例如

```
$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 71679
max locked memory       (kbytes, -l) unlimited
max memory size         (kbytes, -m) unlimited
open files                      (-n) 2048
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 71679
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

此机器上的默认打开文件限制为 2048。在另一台机器上，限制设置为 364076 ;)

或者您必须减少使用量。这不是 Java 控制的东西，这是你必须控制的东西。

# jsf-2 - 无法从复合组件执行 ajax 刷新

> ID：13706410
> 
> 赞同：2
> 
> 时间：2012-12-04T15:36:01.220
> 
> 标签：jsf-2

这是我的复合组件：

```
<composite:interface>
    <composite:attribute name="attr1" />
    <composite:clientBehavior name="xyz" event="valueChange" targets="chkbox" />
</composite:interface>
<composite:implementation>
    <h:panelGrid>
    <h:panelGroup>
        <h:selectBooleanCheckbox id="chkbox"
                value="#{cc.attrs.attr1}">
            </h:selectBooleanCheckbox>
    </h:panelGroup>
</h:panelGrid>
</composite:implementation> 
```

还有我的页面：

```
<h:form id="myForm">
  <cc:myComp attr1="#{myBean.someAttr}">
    <f:ajax render="myform:grid1" event="xyz" listener="{myBean.listenerMethod}"/>
  </cc:myComp>

  <h:panelGrid id="grid1">
      <h:panelGroup>
         <h:inputTextarea id="rationale" rows="4" cols="70"
                value="#{myBean.rationale}" />
      </h:panelGroup>
  </h:panelGrid>
</h:form> 
```

我收到以下错误：

> `<f:ajax>`包含未知 id 'myForm:grid1' - 无法在组件 chkbox 的上下文中找到它

如果我`render="myform:grid1"`从我的代码中删除，那么 ajax 调用工作正常。基本上，从我的复合组件中，我无法引用另一个 OUTSIDE 组件。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:56:35.217

```
<f:ajax render="myform:grid1"> 
```

任何不以`NamingContainer`分隔符开头的客户端 ID（在您的情况下`:`为 ）都相对于最近的`NamingContainer`父级。在您的特定情况下，最接近的`NamingContainer`父级是复合组件本身。所以，这个构造基本上是在寻找一个`myform:XXX:myform:grid1`相对于复合组件具有完整客户端 ID 的组件，其中`XXX`是复合组件的自动生成的 ID。但是，没有具有此完整客户端 ID 的此类组件。

假设面板网格的完整客户端 ID 确实是`myform:grid1`（即，当您在浏览器中打开页面时，右键单击并*查看源代码*，您确实看到了`<table id="myform:grid1">`），那么您应该将其设为绝对客户端 ID，而不是在其前面加上`NamingContainer`分隔符特点：

```
<f:ajax render=":myform:grid1"> 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

# ios - 如何在没有 cocos2d 的情况下从头开始编写弹跳球

> ID：13706412
> 
> 赞同：-1
> 
> 时间：2012-12-04T15:36:08.473
> 
> 标签：ios, ios5, cocos2d-iphone, ios6

基于开源项目cocos2d写一些代码来实现弹跳球真是太容易了，[这里](https://stackoverflow.com/questions/9343988/ios-cocos2d-simple-colission-bounce-do-i-need-box2d-chipmunk)是问题。

所以没有cocos2d，怎么用最简单的代码来实现呢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T16:04:04.340

首先，您需要创建一个球类。这个类应该有位置、速度、方向等的 ivars。它还应该有一些当球需要改变方向时的方法，比如 hitTop、hitBottom、hitLeft、hitRight。它还应该有一种更新位置的方法，将其向前移动一步。我还有一个 BallView，这样我就可以使用图像或颜色作为球。

为了让它移动，你需要在你的视图控制器中有一个游戏循环，有很多方法可以做到这一点，但我发现最简单的一种是 CADisplayLink。

如果您在实现它时遇到问题，这里有一些代码：

**球.h**

```
#import <Foundation/Foundation.h>
#import "MovingObjectView.h"

@interface MovingObject : NSObject

@property(nonatomic, retain) MovingObjectView *ball;

@property CGRect bounds;
@property CGPoint position;
@property CGPoint direction;
@property float velocity;

-(id)initWithBounds:(CGRect)b andPosition:(CGPoint)p;

-(BOOL)positionIsInsideRect;
-(void)update;

-(void)hitLeft;
-(void)hitRight;
-(void)hitTop;
-(void)hitBottom;

@end 
```

**鲍尔.m**

```
#import "MovingObject.h"

@implementation MovingObject

-(id)initWithBounds:(CGRect)b andPosition:(CGPoint)p
{
    if (self = [super init]) {
        self.bounds = b;
        self.position = p;
        self.direction = CGPointMake(1, 1);

        //Change the position to middle if position is outside bounds
        if (![self positionIsInsideRect]) {
            NSLog(@"Position changed to center");
            self.position = CGPointMake(self.bounds.size.width/2, self.bounds.size.height/2);
        }

        self.ball = [[[MovingObjectView alloc]initWithFrame:CGRectMake(self.position.x, self.position.y, 15, 15)]autorelease];
    }
    return self;
}

//checks if the balls position is correct
-(BOOL)positionIsInsideRect {
    if (self.position.x < self.bounds.origin.x || self.position.x > self.bounds.size.width || self.position.y < self.bounds.origin.y || self.position.y > self.bounds.size.height) {
        NSLog(@"Position is outside bounds");
        return NO;
    }else{
        return YES;
    }
}

//Call this method to move a ball
-(void)update {
    //Checks if the ball is outside bounds
    if (self.position.x-(self.ball.frame.size.width/2) <= self.bounds.origin.x) {
        [self hitLeft];
    }else if (self.position.x+(self.ball.frame.size.width/2) >= self.bounds.size.width){
        [self hitRight];
    }else if (self.position.y-(self.ball.frame.size.height/2) <= self.bounds.origin.y) {
        [self hitTop];
    }else if (self.position.y+(self.ball.frame.size.height/2) >= self.bounds.size.height){
        [self hitBottom];
    }

    //Updates the balls position
    CGPoint p = self.position;
    p.x += self.direction.x*self.velocity;
    p.y += self.direction.y*self.velocity;
    self.position = p;

    self.ball.center = self.position;
}

//Call this when the ball need to bounce
-(void)hitLeft
{
    NSLog(@"hitLeft");
    CGPoint d = self.direction;
    d.x = fabsf(self.direction.x);
    self.direction = d;
}

-(void)hitRight
{
    NSLog(@"hitRight");
    CGPoint d = self.direction;
    d.x = -fabsf(self.direction.x);
    self.direction = d;
}

-(void)hitTop
{
    NSLog(@"hitTop");
    CGPoint d = self.direction;
    d.y = fabsf(self.direction.y);
    self.direction = d;
}

-(void)hitBottom
{
    NSLog(@"hitBottom");
    CGPoint d = self.direction;
    d.y = -fabsf(self.direction.y);
    self.direction = d;
}

-(void)dealloc {
    [super dealloc];
}

@end 
```

**球视图.h**

```
#import <UIKit/UIKit.h>

@interface MovingObjectView : UIView

@property (nonatomic, retain) UIImage *img;

@end 
```

**BallView.m**

```
#import "MovingObjectView.h"

@implementation MovingObjectView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    if (self.img == nil) {
        CGRect bounds = [self bounds];
        [[UIColor blackColor]set];
        UIRectFill(bounds);
    }else {
        CGRect bounds = [self bounds];
        [[UIColor whiteColor]set];
        UIRectFill(bounds);
        [self.img drawInRect:rect];
    }
}

@end 
```

然后最后在视图控制器中你需要这个：

**视图控制器**

在 viewdidload 中：

```
self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(gameLoop)];
[self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; 
```

然后添加这个方法：

```
-(void)gameLoop
{   
    //Updates the balls position
    [self.movingBall update];

    //Here you could add your collision detection code
} 
```

# oauth - ASP.Net MVC 的 Google 的 OAuthWebSecurity

> ID：13706423
> 
> 赞同：1
> 
> 时间：2012-12-04T15:36:36.340
> 
> 标签：oauth, asp.net-mvc-4, google-plus, google-oauth

ASP.Net MVC 的 OAuthWebSecurity for Google 是否使用 Google 的 OAuth 2.0 进行身份验证？ASP.Net MVC 的 Google 的 OAuthWebSecurity 无法像 Facebook 和 Twitter 客户端那样输入密钥或秘密。同样，成功的 Google 身份验证不会返回任何令牌。为什么 Google 客户端与 Facebook 和 Twitter 客户端不同？

ASP.Net MVC 的 Google 的 OAuthWebSecurity 是使用 Google Plus，还是其他一些用于 Google 身份验证的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:27:41.860

我已经反映了 OAuthWebSecurity 类，它使用 Google OpenID 接口进行身份验证。它不是在做 OAuth。目前，我认为您将不得不烘焙自己的 DotNetOpenAuth.AspNet.IAuthentication 实现。我实际上正在开始同样的冒险。

# vba - 单个实例的 VBA“关闭”事件？

> ID：13706425
> 
> 赞同：2
> 
> 时间：2012-12-04T15:36:41.220
> 
> 标签：vba

我正在编写一个 VBA Excel 插件。当加载项处于活动状态时，它会使用`Application.OnKey`. 我想在加载项关闭时将这些键盘快捷键恢复为默认值，为此我正在使用`Auto_Close`加载项模块之一中的方法。
但是，我遇到了一个问题：
当用户在加载我的加载项时打开多个常规工作簿并仅关闭其中一个时，`Auto_Close`加载项上的似乎会触发并关闭其他窗口中的键盘快捷键.

如何仅`Auto_Close`在加载项完全卸载（除了完全退出 Excel）时触发 -equivalent？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:49:21.397

尝试使用插件的`Workbook_Open`和`Workbook_BeforeClose`事件。我不知道为什么 Auto_Close 会像你描述的那样表现，但我相信上面两个会起作用。

# javascript - 淘汰赛排序方法在 chrome 中不起作用

> ID：13706428
> 
> 赞同：4
> 
> 时间：2012-12-04T15:36:47.503
> 
> 标签：javascript, knockout.js, comparison, browser

我有一个创建和管理活动的应用程序。我使用 Knockout.js 在可观察数组中保存活动。每当创建新活动时，它都会插入到数组中。活动属性之一是日期。我想在创建新活动后按日期对活动进行排序，以便在 UI 中正确显示。这是我使用的一个函数：

```
self.Activities.unshift(activity);
self.Activities.sort(function(a, b) {
    var dateA = new Date(a.date() + " 00:00:00");
    var dateB = new Date(b.date() + " 00:00:00");
    return dateA > dateB;
}); 
```

它在 Firefox (v 16.0.2) 中完美运行，但在 Chrome (v 23.0.1...)、Safari 或 IE 中无法运行

为什么？解决方法是什么？如果有的话？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:53:15.230

您传递的比较器函数`sort`需要返回一个数字。一些浏览器是宽容的并且使用布尔值。

通常你会返回 -1 或 1。类似：

```
return dateA > dateB ? 1 : -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:14:02.880

我使用了错误的日期格式。由于某种原因，Chrome 不喜欢：d/MM/yyyy，当我使用 yyyy/MM/d 时，一切正常

# c# - 如何在中继器中获取标签文本

> ID：13706429
> 
> 赞同：1
> 
> 时间：2012-12-04T15:36:51.273
> 
> 标签：c#, jquery, text, label, repeater

当有人单击链接按钮时，我试图获取标签的文本：

这是我的代码：

```
 $(document).ready(function () {

        $('[id*="lnkbtn_Remove"]').click(function (event) {
            event.preventDefault();

            var id = $("span[id*=lbl_Reference]").text();
            alert(id); 
        });
    }); 
```

但这让我在使用“*”时获得了 reapter 中的所有参考。反正有没有得到它被点击的行的实际参考。这是我的html：

```
 <asp:Repeater ID="rpt" runat="server" >
                        <ItemTemplate>
                            <div class="test">
                                <table>
                                    <tr>
                                        <td>
                                            <div style="width: 230px;">
                                                <asp:Label ID="lbl_Len" runat="server" CssClass="font_bold"></asp:Label>
                                                <br />
                                                <asp:Label ID="lbl_Reference" runat="server"></asp:Label>
                                            </div>
                                        </td>
                                        <td align="left">
                                            <div style="width: 80px;">
                                                <asp:LinkButton ID="lnkbtn_Remove" runat="server" CssClass="rpt_item_Remove">Remove</asp:LinkButton>
                                            </div>
                                        </td>

                                    </tr>
                                </table>
                            </div>
                        </ItemTemplate>
                    </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:39:39.023

你可以通过这样的方式得到它，

```
 var lablelId = $(this).closest('.test').find('[id*=lbl_Reference']).attr('id');
 var lablelText = $(this).closest('.test').find('[id*=lbl_Reference]').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T13:20:41.757

> 如果您想查找检查了多少列集，并且如果检查了，则想查找嵌套在中继器表行 PFB 内的标签值：-

```
var chkValue = $("#TableID [id*=chkBoxId]");
 for (var i = 0; i < chkValue.length; i++) {
     if (chkValue[i].checked) 
       $('#TableID tr:eq(' + (i+1) + ') td:eq(0)').find('[id*=lblIds]').text() ; 
```

# winforms - 企业库 5：创建企业库对象的实例

> ID：13706433
> 
> 赞同：0
> 
> 时间：2012-12-04T15:36:59.443
> 
> 标签：winforms, enterprise-library-5

我在我的 win-form 应用程序中使用 Enterprise Library 5.0。

**1.关于创建企业库对象的实例**

解决日志记录/异常对象引用的最佳方法是什么？在我们的应用程序中，我们在解决方案中有不同的应用程序。所以解决方案有以下项目：

CommonLib（类库） CustomerApp（winform 应用程序） CustWinService（win 服务项目） ClassLib2（类库）

我在 CommonLib 项目中实现了如下的日志记录/异常。创建了一个 AppLog 类，如下所示：

```
 public class AppLog
    {
        public static LogWriter defaultWriter = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();
public static ExceptionManager exManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
        public AppLog()
        {
        }

    public static void WriteLog(string LogMessage, string LogCategories)
    {
        // Create a LogEntry and populate the individual properties.
            if (defaultWriter.IsLoggingEnabled())
            {
                string[] Logcat = LogCategories.Split(",".ToCharArray());
                LogEntry entry2 = new LogEntry();
                entry2.Categories = Logcat;
                entry2.EventId = 9007;
                entry2.Message = LogMessage;
                entry2.Priority = 9;
                entry2.Title = "Logging Block Examples";
                defaultWriter.Write(entry2);
            }
    }
} 
```

然后我使用 Applog 类如下在不同项目中进行日志记录和异常：

```
 try
            {
                AppLog.WriteLog("This is Production Log Entry.", "ExceCategory");
                string strtest = string.Empty;
                strtest = strtest.Substring(1);
            }
            catch (Exception ex)
            {

                bool rethrow = AppLog.exManager.HandleException(ex, "ExcePolicy");

            } 
```

那么它是使用日志记录和异常的正确方法吗？或任何其他方式我可以改进它？

**2\. 动态记录文件名**

在日志记录块中，我们有 fileName 需要在 app.config 文件中设置。有没有办法可以通过编码动态分配文件名值？由于我不想在配置文件中对其进行硬编码，并且生产和开发环境的路径不同。

谢谢 TShah

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:52:09.713

为了使您的应用程序保持松散耦合并更易于测试，我建议定义单独的日志记录和异常处理接口，然后让您的`AppLog`类实现两者。然后，您的应用程序可以通过这些接口执行日志记录和异常处理，并`AppLog`提供实现。

您可以使用配置转换为每个环境设置不同的文件名，我相信您可以通过使用[Slow Cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5/view/Discussions/9)在 winforms 应用程序中使用它。

# vim - 运行 vim 而不加载 .vimrc 但加载插件

> ID：13706436
> 
> 赞同：25
> 
> 时间：2012-12-04T15:37:12.130
> 
> 标签：vim

我正在运行`gvim -u NONE`以打开 gvim 而不使用`.vimrc`，但同时我希望能够从 plugin/ 文件夹中的插件调用命令。

我试过它运行`:filetype plugin`但它不起作用..

知道怎么做吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-04T15:45:29.607

使用`-u NORC`而不是`-u NONE`. 见`:help --noplugin`。

# c++ - gotoxy() 函数在 Visual Studio 中不起作用

> ID：13706439
> 
> 赞同：1
> 
> 时间：2012-12-04T15:37:19.430
> 
> 标签：c++, c, visual-studio-2010

我无法在 Visual Studio 2010 中使用 gotoxy() 函数。有什么替代方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T15:41:00.320

您是在谈论命令行应用程序还是 Windows 应用程序？您必须记住，VC2008 是一个特定于 windows 的开发环境，所以如果您是在 linux/unix 或较旧的 dos 系统上学习编程，那么情况就不一样了。

我知道在 windows 下更改控制台应用程序中光标位置的唯一方法是使用 windows 函数 SetConsoleCursorPositon。

[http://msdn.microsoft.com/es-es/library/windows/desktop/ms686025(v=vs.85).aspx](http://msdn.microsoft.com/es-es/library/windows/desktop/ms686025(v=vs.85).aspx)

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-25T16:09:11.917

`gotoxy();`包含`<conio.h>`但仅包含在 OLD（REALLY OLD）中，例如“Turbo C”....如果您使用的是“Microsoft Visual”，请使用 thi

```
void gotoxy(int x, int y)
{
    COORD c = { x, y };  
    SetConsoleCursorPosition(  GetStdHandle(STD_OUTPUT_HANDLE) , c);
} 
```

并使用**#include`<windows.h>`**

并且不要忘记提及**原型声明......**

希望这会有所帮助......干杯！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T16:16:58.640

尝试使用 SetConsoleCursorPositon 函数

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T15:42:32.603

`gotoxy()`不是标准 C++ 的一部分，但`<conio.h>`它是非标准头文件的一部分，并随运行时库一起提供。

如果最新的运行时不支持此功能（不太可能，它们通常向后兼容），您可以将您的代码与旧版本的运行时库链接，并使用适当的标头。

我的猜测是该功能尚未被删除，所以我质疑您为什么认为您不能使用它。

# excel - 在 Excel 中从“m/d/yyyy h:mm”格式的单元格中分离组件

> ID：13706440
> 
> 赞同：0
> 
> 时间：2012-12-04T15:37:25.310
> 
> 标签：excel, date, timestamp, excel-2007

我在 excel 中有包含`m:d:yyyy h:mm`（单个单元格）格式的时间戳的单元格。Excel 将格式称为*custom*。如何提取组件？谢谢。

例如

```
Timestamp
12/4/2012 0:32
... 
```

会成为

```
Timestamp month day year hour minute
12/4/2012 0:32 12 4 2012 0 32
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:43:30.767

```
=MONTH(A1)
=DAY(A1)
=YEAR(A1)
=HOUR(A1)
=MINUTE(A1)
=SECOND(A1) 
```

假设 A1 包含日期。

# struts2 - 为什么找不到我的 webapp 的欢迎文件？

> ID：13706443
> 
> 赞同：0
> 
> 时间：2012-12-04T15:37:30.983
> 
> 标签：struts2

我为 Struts 应用程序调用的第一个页面应该是一个简单的 helloWorld.jsp 页面。这是在 web.xml 中指定的，如下所示：

```
<welcome-file-list>
    <welcome-file>helloWorld.jsp</welcome-file>
</welcome-file-list> 
```

但我收到 HTTP 404 错误。什么是正确的 struts.xml 结构？是否真的需要调用默认页面？如果不是，那么为什么我会收到错误消息？是的，jsp 文件位于 WEB-INF 文件夹中

谢谢

**编辑**

添加了 JSP 文件的截图显示位置：

![JSP 位置的屏幕截图](../Images/3daea9396507bbac844a30a4c0b823c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:01:51.717

这与 Struts 2 无关。这个 jsp 应该作为 webapp 的 JSP 被击中，它不会通过 Struts 2。解决这个问题相当于验证你的 webapp 是由 servlet 容器加载的并且你有正确的访问 webapp 和这个 JSP 的 URL。

您应该查看 servlet 容器日志以验证容器的启动是否正常，并且它还应该向您报告您的 web 应用程序已加载、初始化并启动。

接下来，验证您的 URL 是否正确。我会假设是这样的：

```
http://localhost:8080/myWebAppContextName/helloWorld.jsp 
```

webapp 上下文名称可能会有所不同，具体取决于您如何部署和配置 webapp。如果您只是将war 文件放到tomcat 的webapps 文件夹中，它将是webapp 的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:01:58.357

```
**Make sure that your jsp should be there in `WebRoot` folder.**

<welcome-file-list>
   <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

索引.jsp

```
<META HTTP-EQUIV="Refresh" CONTENT="0;URL=welcome.action"> 
```

# itextsharp - 在 iTextSharp 中控制 HTML 表格内容的字体

> ID：13706450
> 
> 赞同：1
> 
> 时间：2012-12-04T15:37:51.773
> 
> 标签：itextsharp

我正在使用最新的 DLL，并尝试使用以下代码将 HTML 片段呈现为 PDF 文档：

```
 Private Function ReadHtml(ByVal text As String) As Paragraph
        Dim par = NewParagraph()
        Try
            Dim htmlText = Server.HtmlDecode(text)
            If Not htmlText.StartsWith("<") Then
                htmlText = "<span>" & htmlText & "</span>"
            End If
            Using reader As New IO.StringReader(htmlText)
                Dim mh As New MyHandler()
                XMLWorkerHelper.GetInstance().ParseXHtml(mh, reader)
                'use mh.elements
                For Each element In mh.Elements
                    Dim list = TryCast(element, List)
                    If list IsNot Nothing Then
                        element = Clone(list)
                    End If

                    par.Add(element)
                Next
                setFont(par, m_rowFont)

            End Using
        Catch ex As Exception
            Throw New Exception("Exception in ReadHtml using: '" & text & "'")
        End Try
        Return par

    End Function 
```

当此函数返回时，我将段落插入 PDF。我遇到的问题是，虽然我可以在外部 div 中设置字体，并且生成的 PDF 将正确呈现，但如果我在设置字体的 div 内包含 HTML 表格，表格内的所有内容使用页面的默认字体呈现。

如何控制表格内容的字体？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-12-27T09:33:56.063

你的 Html 在 font-size 和 font-family 删除。

```
 public string ConvertPdfHtml(string html)
    {
        html = CleanStyleAttribute(html, "font-family");
        html = CleanStyleAttribute(html, "font-size");
        ....
        return html;
    }

    private string CleanStyleAttribute(string html, string styleAttributeName)
    {
        return Regex.Replace(html, styleAttributeName + "(?>:(.*?);)","");
    } 
```

# iphone - Coverflow 在加载高分辨率图像时崩溃

> ID：13706451
> 
> 赞同：1
> 
> 时间：2012-12-04T15:38:00.427
> 
> 标签：iphone, ios, memory, crash, coverflow

我正在尝试使用**AsyncImageView** ( [https://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView) ) 作为封面来实现**Coverflow ( iCarousel ) 。**它适用于大小高达 4 MB 的图像。但是，当尝试加载大小超过 10 MB 的图像时，应用程序会崩溃。我的问题是——

 **1) 我可以加载大小为 10 MB 的图像而不进行平铺吗？由于图像来源来自设备相机，是否可以平铺这些图像然后加载这些图像。如果是这样，您可以分享一些关于平铺大图像的想法/代码块吗？

**Ps：**我尝试使用 UIImageJPEGRepresentation(image,scale) 压缩图像，虽然图像大小从 10 MB 减小到 100 KB，但是当我尝试加载压缩图像时，内存问题再次出现。（貌似iOS在某种程度上解压了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:48:43.113

您对图像的尺寸及其在磁盘上的大小感到困惑。

在内存中，图像占用 WIDTH*HEIGHT*4 像素，因此假设您的图像为 1000x1000px，您最终使用 4Mb 内存。

UIImageJPEGRepresentation 使用压缩因子保存图像，因此您最终会在磁盘上获得较小的图像，但图像仍然具有相同的尺寸。

要解决您的问题，您需要将下载的图像缩放到适合您的封面流项目的正确尺寸。

您可以使用 ImageIO 框架执行此操作：

*   从下载的数据创建一个*CGImageSource*
*   使用 2 个属性*kCGImageSourceCreateThumbnailFromImageIfAbsent*和*kCGImageSourceThumbnailMaxPixelSize*调用*CGImageSourceCreateThumbnailAtIndex*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:00:00.403

这是工作代码

```
 UIImage *result = nil;
if ([data length]) { // NSData of the image

    CGImageSourceRef sourceRef = CGImageSourceCreateWithData((CFDataRef)data, nil);

    NSMutableDictionary *options = [NSMutableDictionary dictionary];

    [options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceCreateThumbnailFromImageIfAbsent];
    [options setObject:[NSNumber numberWithInt:400] forKey:(id)kCGImageSourceThumbnailMaxPixelSize];
    CGImageRef imageRef = CGImageSourceCreateThumbnailAtIndex(sourceRef, 0, (CFDictionaryRef)options);

    if (imageRef) {
        result = [UIImage imageWithCGImage:imageRef]; //Resulting image
        CGImageRelease(imageRef);
    }

    if (sourceRef) CFRelease(sourceRef); 
```****

# magento - Magento 中的 250000 个分组产品

> ID：13706452
> 
> 赞同：3
> 
> 时间：2012-12-04T15:38:01.690
> 
> 标签：magento, magento-1.7

我已经开始在一个新的 Magento 网上商店工作，它有大约 250000 种不同的产品。每个产品可以有不同的条件（新的、使用的、损坏的等，每个都有自己的价格。）。Magento 目前似乎没有实现这一点的方法。在这 250000 种产品中，大约有 150000 种不同的条件有库存，另外 150000 种条件没有库存但有价格（可以放在愿望清单上）。

一些数字：1500 个类别，具有 > 300 个选项的下拉属性（国家），整数属性（年份）。从两个网站开始，每个网站 6 种语言。

我想出了两种解决方案来解决这个问题：

### 分组/简单的产品结构

我们创建了一个分组产品，即容器产品，每个条件都是一个不同的简单产品。我们会将这些产品与分组产品相关联。

这个解决方案的好处是它很容易实现，我们必须以正确的方式导入数据，并且所有信息都以我们想要的方式准确呈现。

### 新产品类型

我们创建了一个新的产品类型，它可以有多个条件，每个条件都有自己的库存。在结帐时，库存被减去。这样做的问题是，以这种方式实现 CatalogInventory 模型可能很困难，并且构建一个完整的产品类型通常很耗时且容易出错。

该解决方案的优势在于，系统中的产品数量将减少约 2-2.5 倍。

### 其他

还有其他选择可以解决这个问题吗？也许有一个模块可以做到这一切？

结论：我当然更喜欢第一个解决方案，但 Magento 可以处理吗？有没有人有这么多分组产品的经验？系统中将有大约 550000 个产品（分组 + 简单）产品，这会对性能产生什么影响？当网站增长并且我们将拥有两倍数量的产品时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:34:07.703

在不了解更多细节的情况下，如果您使用可配置产品，我倾向于使用新产品类型或仅添加独立于产品类型的功能（我绝对不会尝试复制可配置产品类型）。我会禁用库存管理并使用一些额外的表来保存单个项目的库存和每个项目的条件，并以这种方式维护一个单独的库存。根据需要使用事件和覆盖来控制 CatalogInventory 库存状态。如果这是一项需要扩大规模的长期努力，那么不断创造大量重复的新产品似乎是一个值得避免的麻烦。

但是，分组/简单方法可能是一种可行的短期解决方案，并且如果项目处于早期阶段并且无法承担巨大的初始支出，则它是合适的。如果计划周密，脚本应该能够在准备发布时将所有旧的分组/简单产品转换为您的新产品类型。

# android - 在我的应用中屏蔽谷歌播放广告

> ID：13706458
> 
> 赞同：2
> 
> 时间：2012-12-04T15:38:23.737
> 
> 标签：android, admob

Google play 在 AdMob 上投放广告，这给将 Android 应用程序提交到三星等替代应用程序商店带来了问题。

这是广告在 admob 中的外观示例

![在此处输入图像描述](../Images/1e586aa19bfe05859a2ab8b6404eb398.png)

我想阻止这个广告，因为它违反了三星的开发者协议，让应用程序链接或宣传其他应用程序商店。我尝试为“play.google.com”添加过滤器和为“Google Play”添加文本过滤器，但这些都没有真正奏效。更糟糕的是，我找不到让广告显示在我这边的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-19T06:28:12.700

我遇到过同样的问题。您需要在底部的评论框中输入您已包含标准的 admob 广告，并强调这些广告不是您自己的链接或游戏。在他们第一次拒绝我之后为我工作。

# ruby - 获取方法定义的最后一行

> ID：13706462
> 
> 赞同：1
> 
> 时间：2012-12-04T15:38:38.230
> 
> 标签：ruby, metaprogramming

有没有办法知道方法定义的最后一行的位置，而无需使用解析器（除了在 Ruby 实现本身下运行的解析器）或正则表达式或任何执行此操作的外部库来解析源代码？

通过使用`set_trace_func`或提供的信息很容易获得方法定义的第一行，`method_added`因为它们是在方法定义的时刻触发的，并且我可以分析提供的信息（直接来自`set_trace_func`或解析`caller`来自的信息`method_added`）。

但是对于一个方法定义的最后一行，我能做的最好的就是寻找下一个方法定义的第一行或者其他`call`被`set_trace_func`. 我可以看出原始方法定义已在这一行结束，但无法判断它是否在此之前的一行结束。例如，假设我试图获取方法定义的最后一行`foo`。在源代码如下的情况下：

```
 | def foo
   |   ...
n  | end; def bar
   |   ... 
```

鉴于`bar`定义的第一行是`n`，我可以（巧合地）告诉`foo`定义的最后一行是`n`。但是如果源代码恰好如下：

```
 | def foo
     |   ...
n-1  | end
n    | def bar 
```

然后我想`n-1`作为最后一行`foo`，我想不出一种方法来判断它是`n-1`在这种情况下而不是在这种情况下`n`。源代码可能还有这样的空/注释行：

```
 | def foo
     |   ...
n-9  | end
     | 
     | # comment
     | 
     | =begin
     |   ...
     | =end
     | 
n-1  | 
n    | def bar 
```

我仍然得到`n-1`而不是正确的不是一个大问题`n-9`，但是得到`n`而不是一个大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:04:44.867

由于您知道如何获取方法的第一行的编号，因此您只需要[方法定义的行数](https://stackoverflow.com/questions/13698768/output-the-source-of-a-ruby-method)即可。您将前者添加到后者，您就得到了最后一行的编号。

让我们将链接问题中的示例改编为 inspect `Set#add`。

```
require 'pry'
require 'set'
number_of_lines = Pry::Method.from_str("Set#add").source.lines.count 
```

正如[Pry 的作者](https://stackoverflow.com/users/66725/banister)所指出的，Pry 使用 Ruby 的内置解析器来提取源代码。

# mysql - 不支持身份验证方法“mysql_old_password”

> ID：13706463
> 
> 赞同：5
> 
> 时间：2012-12-04T15:38:40.403
> 
> 标签：mysql, visual-studio-2012, connector-net

更新了 mysql 连接器。Net 到 6.6.4 版提供程序以与 Visual Studio 2012 集成，但现在当我尝试配置与 edmx 的连接时，出现错误“不支持身份验证方法 'mysql_old_password'”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T09:37:31.070

当您连接到密码以旧密码格式 ( [http://dev.mysql.com/doc/refman/5.0/en/old-client.html](http://dev.mysql.com/doc/refman/5.0/en/old-client.html) ) 存储的 MySQL 数据库时，会显示此错误消息。较新的 MySQL 客户端不允许使用旧密码格式与数据库建立连接，因为它的安全性较低。

有人会建议`old_passwords=1`在 MySQL 服务器上设置，但我认为将密码升级为新的密码格式会更好。然后可以再次设置 MySQL 连接，您的数据库将得到更好的保护。

您可以在此处阅读有关如何将 MySQL 密码从旧格式升级到新格式的信息：http: [//code.openark.org/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords](http://code.openark.org/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:31:30.320

Mysql 连接器/NET 6.6.x（从 6.6.2 开始）放弃了对旧密码样式身份验证的支持（由于不安全而被弃用，并且有记录的攻击方法）。

尝试将其与旧密码样式帐户一起使用时，您将收到算术溢出错误（当然，更友好的错误会更好）。

如本错误报告所述：[http](http://bugs.mysql.com/bug.php?id=66647) : //bugs.mysql.com/bug.php?id=66647 对于连接器/NET，您必须使用本机 4.1 样式的密码（即 old_passwords=0）。

其他选项是 Windows Style Authentication，它也受支持，但您需要一些 MySql 商业版（标准 MySql 服务器不支持 Windows 身份验证）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:32:44.113

Mysql_old_password 是临时的，用于在 4.1.1 之后的旧 mysql 客户端对 4.1.1 之前的 mysql 服务器进行身份验证。

`old_passwords=1`在您的 mysql 服务器 my.ini 中设置 var应该启用此功能。

# java - 如何判断是否使用 BufferedReader 读入了空行？

> ID：13706466
> 
> 赞同：7
> 
> 时间：2012-12-04T15:38:43.490
> 
> 标签：java, io, whitespace, bufferedreader

我正在阅读格式如下的文本文件

```
word
definiton

word
definition
definition

word
definition 
```

所以我需要根据我何时到达那些空行来继续尝试我是否在定义中。事情是，`BufferedReader`丢弃`\n`字符，并且以某种方式将该空行`String ""`与我想的那样进行比较并没有注册。我该怎么做。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T15:41:12.923

1.  确保您使用: `"".equals(myString)`(这是-安全的`null`) not `myString == ""`.
    *   1.6以后可以使用`myString.isEmpty()`(not `null`-safe)
2.  您可以`myString.trim()`在上述检查之前使用去除多余的空格

这是一些代码：

```
public void readFile(BufferedReader br) {
  boolean inDefinition = false;
  while(br.ready()) {
    String next = br.readLine().trim();
    if(next.isEmpty()) {
      inDefinition = false;
      continue;
    }
    if(!inDefinition) {
      handleWord(next);
      inDefinition = true;
    } else {
      handleDefinition(next);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T15:41:46.440

如果该`BufferedReader.readLine()`行为空，则返回一个空字符串。

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)说：

> 返回： 包含行内容的字符串，不包括任何行终止字符，如果已到达流的末尾，则返回 null。

如果您似乎没有看到空字符串，则该行不为空，或者您没有正确测试空字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T15:41:57.007

```
line = reader.readLine();
if ("".equals(line)) {
   //this is and empty line...
} 
```

我不知道您是如何尝试检查该字符串是否为空的，所以我无法解释为什么它对您不起作用。您可能`==`用于比较吗？在这种情况下，它不起作用，因为`==`比较的是引用，而不是对象内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T15:43:29.433

此代码片段跳过空行，仅打印带有内容的行。

```
 String line = null;
    while ((line = br.readLine()) != null) {
        if (line.trim().equals("")) {
            // empty line
        } else {
            System.out.println(line);
        }
    } 
```

仅包含空白字符的行也会被跳过。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-03T05:27:05.003

```
try (BufferedReader originReader = getReader("now")) {
    if (StringUtils.isEmpty(originReader.readLine())) {
        System.out.printline("Buffer is empty");
    } 
```

# ios - 自定义 UINavigationBar sizeThatFits 实现不返回真实的 frame.size.width

> ID：13706469
> 
> 赞同：2
> 
> 时间：2012-12-04T15:38:57.573
> 
> 标签：ios, resize, ios6, uinavigationbar, subclassing

我正在尝试`UINavigationBar`使用定义的高度进行子类化并尝试实现`sizeThatFits`方法：

```
@implementation NavigationBar

- (CGSize)sizeThatFits:(CGSize)size {
    NSLog(@"frame: %@", NSStringFromCGRect(self.frame));
    return CGSizeMake(self.frame.size.width, 62);
}

@end 
```

但显然，`self.frame.size.width`总是返回一个奇怪的值，而不是 1024，这是我的目标，它导致了下面呈现的行为：

[![](../Images/2f586c706da54b60d65dfa3c7d97cde6.png)](https://i.stack.imgur.com/k2OTs.png)

`NSLog`输出：

```
> frame: {{224, 20}, {576, 62}} 
```

手动定义`CGSizeMake(1024, 62)`这将导致以下情况：

[![](../Images/54b64e9b7094e007c92aca2ad2da680c.png)](https://i.stack.imgur.com/6ePTp.png)

隐藏按钮，`NSLog`输出将是：

```
> frame: {{-128, 20}, {1280, 62}} 
```

关于如何正确实现此方法以使导航栏扩展到所有窗口的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T20:10:35.833

如果你想避免使用“幻数”，可以尝试使用`UINavigationBar`superview 的大小。

```
- (CGSize)sizeThatFits:(CGSize)size
{
    return CGSizeMake(self.superview.bounds.size.width, 62.0f);
} 
```

在 iOS 6 上对我来说效果很好。无需覆盖`layoutSubviews`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:24:41.553

使用`layoutSubviews`and `sizeThatFits`together 似乎有效：

```
- (CGSize)sizeThatFits:(CGSize)size {
    return CGSizeMake(1024, 62);
}

- (void)layoutSubviews {
    [super layoutSubviews];
    self.frame = CGRectMake(0, 20, 1024, 64);
} 
```

# javascript - kineticjs 将元素添加到舞台

> ID：13706470
> 
> 赞同：1
> 
> 时间：2012-12-04T15:39:02.753
> 
> 标签：javascript, jquery, kineticjs

我是 JS 和 KineticJS 的新手，想知道是否有人可以帮助我了解 Kinetic.Stage 节点的工作原理。我以[本教程](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)为起点——但希望能够通过单击按钮将对象（例如 new Kinetic.Text() 或 new Kinetic.Group()）附加到现有阶段。

我正在尝试做的一个示例是在画布旁边有一个表单，允许用户输入文本，单击“开始”，然后让“他们输入的文本”出现在画布内。

我试图在 document.ready 和全局范围内声明“var stage”，认为我可以从函数内访问舞台，例如：

```
function writeTextToStage(stage) {
     var text = new Kinetic.Text({
       x: 190,
       y: 15,
       text: 'Simple Text',
       fontSize: 30,
       fontFamily: 'Calibri',
       textFill: 'green'
     });
      var layer = new Kinetic.Layer();
      layer.add(text);
      stage.add(layer);
      stage.draw();
}

window.onload = function(){
    var stage = new Kinetic.Stage({
        container: "designer",
        width: 578,
        height: 520
    });
    var go = document.getElementById('go');
    go.addEventListener('mousedown', writeTextToCanvas(stage);
}; 
```

无论如何，如果“stage”对象是在另一个函数中声明的——“initStage()”，是否有可能在它被初始化后获取 stage 节点以便将内容附加到它？我尝试通过 DOM 元素 $('kineticjs-content').children()[0] 访问它。

请协助。kineticjs.com 上的文档不是很冗长。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:34:25.480

您需要在函数之外创建图层，然后在函数中将文本添加到图层...

```
function AddText() {
   var text = new Kinetic.Text({
   ...
   });
  layer.add(text);
} 
```

# objective-c - 执行 NSLog 后将值传递到下一个屏幕

> ID：13706473
> 
> 赞同：0
> 
> 时间：2012-12-04T15:39:08.730
> 
> 标签：objective-c, ios, ios6, segue

我是 Objective C 的新手。我正在做的是在 prepeareSegue 中为目标视图控制器设置一些值。奇怪的是，如果我在函数中注释掉 NSLog，那么目标控制器属性的值不会被分配。

我的代码是：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

   if ([segue.identifier isEqualToString:@"ShowItemOnMap"] ) {
       LocateItemViewController *lic = [segue destinationViewController];
       NSIndexPath *index = [self.tableView indexPathForSelectedRow];

       // self.itemsToBuy is a array of NSDictionary
       NSDictionary *selectedItem = [self.itemsToBuy objectAtIndex:[index row]];
       Item *theItem = [[Item alloc] init];
       NSString *theTitle = [[NSString alloc] initWithString:[selectedItem valueForKey:@"title"]];
       theItem.title = theTitle;
       lic.item = theItem;

       // commenting out NSLog make self.irem in LocateItemViewController nil
       // and no value is shown at screen
       NSLog(@"%@", lic.item.title);
   }

} 
```

Item 是具有属性的自定义类

```
@property (strong, nonatomic) NSString *title; 
```

LocateItemController 具有以下属性

```
@property (weak, nonatomic) Item *item;
@property (strong, nonatomic) IBOutlet UILabel *titleLabel; 
```

和 viewDidLoad 只是分配项目

```
self.titleLabel.text = self.item.title; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:46:08.533

如果您需要保留项目，则应使其成为强大的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:10:59.753

亚当是正确的。您的 item 属性需要很强大，否则它会在您发布的代码运行完毕后立即发布。

如果还没有，您还需要使 Item 对象的“title”属性变得强大。

您需要阅读对象所有权。

交易是这样的：系统跟踪有多少对象对一个对象有强引用。当该计数降至零时，该对象被释放。

局部变量默认是强的。当您创建“theItem”局部变量时，它很强大，并且只存在于您的 prepareForSegue 方法的范围内。当该方法结束时，变量 theItem 超出范围，并且对 Item 对象的强引用消失。

您使 LocateItemController 的 item 属性变弱。这意味着您的 LocateItemController 不会获得分配给它的 item 属性的 item 对象的所有权。

如果您将 LocateItemController 中的项目属性声明更改为 strong，那么当您将 Item 对象分配给该属性时，LocateItemController 将获得该项目的所有权。

最后，在 LocateItemController 的 dealloc 方法中，您需要添加以下行：

```
self.item = nil; 
```

这将导致您的 LocateItemController 的项目对象在 LocateItemController 被释放之前被释放。

# cookies - 如何找出 cookie 的设置位置？

> ID：13706474
> 
> 赞同：0
> 
> 时间：2012-12-04T15:39:06.653
> 
> 标签：cookies, varnish

我正在尝试找出设置 cookie 的位置。

我正在运行 Varnish 缓存，想知道 cookie 的设置位置，所以我知道我是否可以安全地将其删除以用于缓存目的。

响应标头如下所示；

```
HTTP/1.1 200 OK
Server: Apache/2.2.17 (Ubuntu)
Expires: Mon, 05 Dec 2011 15:11:39 GMT
Cache-Control: no-store, max-age=7200
Vary: Accept-Encoding
Content-Type: text/html; charset=UTF-8
X-Session: NO
X-Cacheable: YES
Date: Tue, 04 Dec 2012 15:29:40 GMT
X-Varnish: 1233768756 1233766580
Age: 1081
Via: 1.1 varnish
Connection: keep-alive
X-Cache: HIT 
```

不存在 cookie。但是当在浏览器中加载相同的页面时，标头是相同的，我得到缓存命中并且响应标头中没有 cookie。

但是饼干突然就在那里，所以它一定在某个地方。即使我删除它，它也会重新出现。它甚至出现在 Chrome 的隐身模式下。但它不在标头响应中。

我已经浏览了网站上的所有 javascript 并且找不到任何东西，还有其他设置 cookie 的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:40:16.290

如果 Set-Cookie 标头在某个时候通过 Varnish，您可以使用 varnishlog 查找请求 URL：

```
$ varnishlog -b -m 'RxHeader:Set-Cookie.*COOKIENAME' 
```

这将为您提供后端请求的完整 varnishlog 列表，包括到后端的 TxURL，它告诉您客户端在返回 Set-Cookie 时所要求的内容。

# windows - 在 Pi 上 shell 脚本与终端的问题

> ID：13706480
> 
> 赞同：0
> 
> 时间：2012-12-04T15:39:28.607
> 
> 标签：windows, shell, terminal, shared, raspberry-pi

我正在尝试与树莓派共享 Windows 计算机上的文件夹。

当我在终端中使用这些命令时：

```
sudo mkdir -p /mnt/foldername
sudo mount -t cifs //IPADDRESS/folderIwanttoaccess/ -o username=usrname,password=passwrd /mnt/foldername 
```

这很好用，我可以将树莓派上的文件保存到 Windows 共享文件夹中。

但是当我在 shell 脚本中尝试这个时，我可以看到该文件夹​​是共享的，但最后是“^m”。

例如：文件夹名^M

为什么会发生这种情况，有没有办法阻止“^m”？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:51:06.517

据此[，](http://www.xappsoftware.com/wordpress/2009/04/09/dos2unix-using-sed-how-to-remove-m-chars-from-a-dos-file/)您可以使用[sed](http://netbsd.gw.com/cgi-bin/man-cgi?sed++NetBSD-current)对问题进行排序，只需使用以下咒语`s/^M$//`：希望有帮助！

# jquery - 使用 jQuery 从页面 div 内容填充输入数据源选项

> ID：13706483
> 
> 赞同：0
> 
> 时间：2012-12-04T15:39:40.057
> 
> 标签：jquery

我想使用 jQuery 使用“位置”div 的内容动态填充输入的数据源列表。我正在使用 Bootstrap typeahead，它运行良好，但我想让数据源列表动态化。

这是代码

```
<input
    data-path=".location"
    type="text"
    value=""
    id="location-filter"
    placeholder="Filter By Location ie. New York"
    data-control-type="textbox"
    data-control-name="desc-filter"
    data-control-action="filter"
    data-provide="typeahead"
    data-items="4" 
    data-source='["New York","Los Angeles","Chicago"]'
/>

<div class="block">
    <div class="type">Administration</div>
    <div class="desc">School Administrator</div>
    <div class="company">Administration Services LLC</div>
    <div class="location">New York</div>
    <div class="date">November 23</div>
</div><!--/block-->

<div class="block">
    <div class="type">Construction</div>
    <div class="desc">Roofing Contractor</div>
    <div class="company">Raise The Roof Inc.</div>
    <div class="location">Chicago</div>
    <div class="date">November 24</div>
</div><!--/block-->

<div class="block">
    <div class="type">Designer</div>
    <div class="desc">Web Designer</div>
    <div class="company">Web Designz Inc.</div>
    <div class="location">Los Angeles</div>
    <div class="date">November 25</div>
</div><!--/block--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:19:48.260

您可以通过从具有以下内容的 div 中检索所有文本字段来做到这一点`class="location"`：

```
$(function () {
    var category_array = $(".location").map(function() {
                         return $(this).text();
                     }).get();

    var autocomplete = $('#location-filter').typeahead({source: category_array}); 
}); 
```

要从数组中删除重复项：

```
$(function () {
    var category_array = $(".location").map(function() {
                         return $(this).text();
                     }).get();

    // Remove duplicates
    // Note - this assumes the exact same string (including uppercase/lowercase) 
    category_array = $.grep(category_array, function(v, k){
                return $.inArray(v, category_array) === k;
          });

    var autocomplete = $('#location-filter').typeahead({source: category_array}); 
}); 
```

请参阅此处获取[小提琴](http://jsfiddle.net/mccannf/3C6rT/8/)。

# javascript - 应用富编辑器时 Textarea 失去焦点

> ID：13706484
> 
> 赞同：0
> 
> 时间：2012-12-04T15:39:43.720
> 
> 标签：javascript, html, ajax

我有一个带有一些预设选项的 HTML 页面，当我使用纯 HTML 文本区域时，它可以正常工作，但是当我使用诸如“nicEditor”之类的富编辑器时，文本区域会失去焦点。

工作页面：**[这里](http://www.bulk-email-store.com/works.htm)**

没有工作页面：**[这里](http://www.bulk-email-store.com/test.htm)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:43:15.410

使用以下设置值：

```
nicEditors.findEditor("TextArea").setContent('text'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:44:48.610

您不能专注于隐藏的元素。为了明确我的观点：使用富文本编辑器时，您输入的不是原始文本区域，而是编辑器提供的文本区域（甚至是`iframe`/`div`标签）。

因此，要将焦点放在编辑器窗口上，您需要将焦点设置在它上，而不是 textarea - 它实际上由 JS 填充。

# hibernate - [Hibernate][JPA] Unknown mappedBy in .. 引用的属性未知：

> ID：13706488
> 
> 赞同：1
> 
> 时间：2012-12-04T15:39:57.157
> 
> 标签：hibernate

我有一个抽象超类“RessourceMaterielle”和一个实体派生类“Vehicule”。我在 sperclass 和另一个类“本地化”之间有一个 1 对 1 的映射。抽象超类不在数据库中表示。我希望派生类继承超类和本地化之间的映射，以便 Hibernate 看到车辆和本地化之间的映射。那可能吗？

超类：

```
@MappedSuperclass
public abstract class RessourceMaterielle extends ObjetMetier {
    private String nom = null;
    private Localisation localisation = null;

        @Column(name = "`NOM`")
    public String getNom() {
        return this.nom == null ? null : new String(this.nom);
    }

    public void setNom(String nom) {
        this.nom = new String(nom);
    }

    @OneToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="`LOCALISATION`")
    public Localisation getLocalisation() {
        return this.localisation == null ? null : this.localisation.clone();
    }

    public void setLocalisation(Localisation localisation) {
        this.localisation = localisation.clone();
    }

    public RessourceMaterielle(){

    }

} 
```

车辆：

```
@Entity(name = "VEHICULE")
@Table(name = "`VEHICULE`")
public class Vehicule extends RessourceMaterielle {

    public Vehicule() {
    }

} 
```

本土化：

```
@Entity(name = "LOCALISATION")
@Table(name = "`LOCALISATION`")
public class Localisation extends ObjetMetier {
    private double lon = -1111;
    private double lat = -1111;
    private RessourceMaterielle ressourceMaterielle;

    @OneToOne(cascade = { CascadeType.ALL }, mappedBy = "localisation")
    public RessourceMaterielle getRessourceMaterielle() {
        return (RessourceMaterielle) (this.ressourceMaterielle == null ? null : this.ressourceMaterielle.clone());
    }

    public void setRessourceMaterielle(RessourceMaterielle ressourceMaterielle) {
        this.ressourceMaterielle = ressourceMaterielle;
    }

    @Column(name = "`LON`")
    public double getLon() {
        return this.lon;
    }

    public void setLon(double lon) {
        this.lon = lon;
    }

    @Column(name = "`LAT`")
    public double getLat() {
        return this.lat;
    }

    public void setLat(double lat) {
        this.lat = lat;
    }

    public Localisation() {

    }

    public Localisation(double lon, double lat) {
        this.setLon(lon);
        this.setLat(lat);
    }
} 
```

当我运行将车辆持久保存到数据库中的测试时，我收到以下错误：

```
org.hibernate.AnnotationException: Unknown mappedBy in: com.organisme.model.localisation.Localisation.ressourceMaterielle, referenced property unknown: com.organisme.model.ressource.RessourceMaterielle.localisation 
```

有什么解决办法吗？

问候。

# prism - 在哪里向单个区域添加行为？

> ID：13706489
> 
> 赞同：5
> 
> 时间：2012-12-04T15:40:00.963
> 
> 标签：prism, mef

我的问题很简单，但所有选项都让我感到困惑......

在我的 MEF/Prism 应用程序中，我想将特定行为附加到一个特定区域。文献说，你可以这样做：

```
IRegion region = regionManager.Region["Region1"];
region.Behaviors.Add("MyBehavior", new MyRegion()); 
```

但是我应该把这个放在哪里？有没有地方，这应该在引导方法中完成？目前，我在 shell 的 Loaded-event 中添加了这样的行为：

```
 /// <summary>
    /// Interaction logic for Shell.xaml
    /// </summary>
    [Export(typeof(Shell))]
    public partial class Shell
    {
        [ImportingConstructor]
        public Shell(IRegionManager regionManager, ElementViewInjectionBehavior elementViewInjectionBehavior)
        {
            InitializeComponent();
            Loaded += (sender, args) =>
                          {
                              IRegion region = regionManager.Regions[RegionNames.ElementViewRegion];
                              region.Behaviors.Add("ElementViewInjection", elementViewInjectionBehavior);
                          };
        }
    } 
```

这是一个很好的解决方案。我宁愿在引导程序中执行此操作，以便在与其他区域行为注册 ( `ConfigureDefaultRegionBehaviors()`) 相同的位置完成。

那么问题来了：将行为添加到单个区域的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:49:31.647

我刚刚提出了一个稍微改进的解决方案，在行为中使用静态字符串集合来添加要附加行为的区域。

```
public class ViewModelInjectionBehavior : RegionBehavior, IDisposable
{
    private static List<string> _regionNames; 

    public static List<string> Regions
    {
        get { return _regionNames ?? (_regionNames = new List<string>()); }
    }       

    protected override void OnAttach()
    {
        if (Regions.Contains(Region.Name)) {...}          
    }        
} 
```

然后在我的引导程序中，我可以定义区域：

```
 protected override IRegionBehaviorFactory ConfigureDefaultRegionBehaviors()
    {
        var behaviorFactory = base.ConfigureDefaultRegionBehaviors(); 

        ViewModelInjectionBehavior.Regions.Add(RegionNames.ElementViewRegion);
        behaviorFactory.AddIfMissing("ElementViewInjectionBehavior", typeof(ViewModelInjectionBehavior));

        return behaviorFactory;
    } 
```

至少，这种行为现在普遍可用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:04:29.500

我们遇到了同样的问题 - 最后我们只是检查了区域行为中的区域名称，并且只在我们想要的区域时才采取行动，有点糟糕，因为你将行为附加到所有区域 - 但对我们来说更好比建议的解决方案..

一个示例如下所示：

```
public class TrackViewOpenerBehaviour : IRegionBehavior
{
    public IRegion Region { get; set; }
    public void Attach()
    {
        if (this.Region.Name == ApplicationRegions.WorkspaceRegion
            || this.Region.Name == ApplicationRegions.DialogRegion)
        {
             this.Region.Views.CollectionChanged += (sender, e) =>
             {
                 //Code Here.
             };

        }
    }
 } 
```

我一直认为也许我们可以创建一个行为，负责为我们将其他行为附加到特定区域，然后我们可以在引导程序中注册它——但从未考虑过它。

# php - 带排除的 htaccess 重定向

> ID：13706490
> 
> 赞同：1
> 
> 时间：2012-12-04T15:40:01.817
> 
> 标签：php, .htaccess, url-rewriting, rewrite

这是我的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/index.php$
RewriteCond %{QUERY_STRING} ^$
RewriteCond %{HTTP_REFERER} !^http://shop.com/index.php?controller=authentication&back=my-account [NC]
RewriteRule (.*) http://shop.com/index.php?id_category=12&controller=category [R=301,L] 
```

我想 ：

*   我`index.php`被重定向到`index.php?id_category=12&controller=category`.
*   如果Referer等于`http://shop.com/index.php?controller=authentication&back=my-account`

`index.php`似乎应该创建异常的第三个 RewriteCond与Referer等于时的请求不匹配`http://shop.com/index.php?controller=authentication&back=my-account`。因此，RewriteRule 被考虑在内，而它不应该被考虑在内。

这种行为让我认为`%{HTTP_REFERER}`URL 中不包含参数（在本例中为：）`id_category=12&controller=category`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:29:24.393

确实如此。你只需要逃避问号。尝试这个：

```
RewriteCond %{HTTP_REFERER} !^http://shop.com/index.php\?controller=authentication&back=my-account [NC] 
```

# java - 平板电脑中的 GWT 可滚动数据网格

> ID：13706491
> 
> 赞同：2
> 
> 时间：2012-12-04T15:40:04.723
> 
> 标签：java, gwt, tablet

好的，所以这里有点长镜头，但这是问题所在：

我们有一个在浏览器上运行良好的 GWT 应用程序，但是我们位于数据网格列中的按钮有时在某些平板电脑上没有响应。

我已经追查到这个问题：

只要数据网格适合屏幕，按钮就可以工作，但是一旦它变得可滚动，“滚动面板”似乎正在吸收所有输入，并且单击事件永远不会到达按钮。

我猜这可能是因为这些平板电脑将滚动处理为“通过手指滑动使整个面板可滚动”，而浏览器在右侧显示滚动条，而不覆盖面板。

这是一个非常非常具体的问题，但如果有人遇到过它，将不胜感激，谢谢。

# iphone - 无效的启动图像 - itunesconnect

> ID：13706496
> 
> 赞同：1
> 
> 时间：2012-12-04T15:40:20.320
> 
> 标签：iphone, ios, ios5, ios6

**大家好，我已经尝试在appstore中上传应用程序并通过apploader成功。在iTunes连接中，状态更改为“已上传”。但一段时间后，状态变为“无效二进制”。以下是收到的邮件：“无效的启动图像 - 您的应用包含带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用。” 我使用 Xcode 版本 4.3.3 (4E3002) 构建了该应用程序。请帮忙。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:02:26.173

我认为..您的 iOS 目标是 4.2 或以下..

你有一个选择：目标高于 iOS 4.3 并完全支持 iPhone 5....

编辑

“如果您使用旧版本的 Xcode（3.2、4.2）构建项目，当文件 Default-568h@2x.png 存在时，您将收到错误*，因为您必须将 Xcode 升级到最新版本才能构建针对最新的 SDK (6.x)。使用 iOS SDK 6 构建时支持的最新 iOS 目标版本是 4.3。" ..check [here](http://forum.unity3d.com/threads/153862-Good-to-know-iOS-4-5-6-and-invalid-binary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:47:20.487

如果我是你，我会得到 4.5.2。4.3.3 有点旧，某些补丁可能不可用。

[https://developer.apple.com/xcode/](https://developer.apple.com/xcode/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:01:28.893

为什么不将 Xcode 4.3.3 所需的代码构建为 4.3.3 中的库或框架，然后将其添加为 4.5.2 中的库。

# javascript - Rails js未执行

> ID：13706500
> 
> 赞同：0
> 
> 时间：2012-12-04T15:40:34.017
> 
> 标签：javascript, ruby-on-rails

在 assets/javascripts/blog.js.coffee

```
console.log('123') 
```

加载页面时，这是在 html 中（开发模式）：

```
<script src="/assets/blog.js?body=1" type="text/javascript"></script> 
```

该文件的内容：

```
(function() {

  console.log('123');

}).call(this); 
```

但是页面加载时浏览器控制台是空的，这意味着js没有被执行。

可能是什么问题？提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:53:13.390

你不能指望无效的 Coffeescript 产生预期的结果。

将文件重命名为`assets/javascripts/blog.js`或将文件内容更改为

```
(->
  console.log "123"
).call this 
```

# javascript - 警报显示在 Chrome 和资源管理器中，但不显示在 Firefox 中

> ID：13706501
> 
> 赞同：1
> 
> 时间：2012-12-04T15:40:37.090
> 
> 标签：javascript, jquery

我的代码可以正常工作并在 Chrome 和资源管理器中显示警报，但在 Firefox 中没有。但是，该功能在 Firefox 中可以正常工作，但是警报没有显示或显示得很快，我无法单击“确定”按钮。我收到的任何帮助将不胜感激。对不起，我的英语不是我的母语。这是代码。警报是“警报一”和“警报二”。'

```
 $.ajax({
            type: "POST",
            url: direccion,
            dataType: 'json',
            data: post,
            success: function(data) {
                document.location = direccion;
                if(data.valid == 0) {
                    alert('ALERT ONE');
                } else if(data.valid == 1) {
                    alert('ALERT TWO');
                } else {

                }
                document.location = "autenticacion.php";
            },
            error: function(xhr, ajaxOptions, thrownError) {

            }
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:42:19.357

在回调开始时使用此行

```
document.location = direccion; 
```

任何浏览器都不应显示任何警报，因为页面应立即更改。

# caching - 使用 Entity Framework 5 的缓存查询

> ID：13706505
> 
> 赞同：13
> 
> 时间：2012-12-04T15:40:45.907
> 
> 标签：caching, linq-to-entities, asp.net-mvc-4, entity-framework-5

我知道 EF 5 会自动缓存查询，但它是按上下文还是整体执行的？我们正在使用 MVC 并将调用包装在 using 块中以处理 dbcontext。例如：

```
public class Employee
{
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public int ID {get; set;}
}

public class EmployeeQueryByFirstName : IQueryObject<Employee>
{
     private string _firstName;

     public void Set(string FirstName)
    {
         _firstName = FirstName;
    }

     public Expression<Func<Employee,bool>> AsExpression()
    {
        return (e=>e.FirstName == this._firstName);
    }
}

public class RepoExcerpt
{
    public TEntity Find<TEntity>(IQueryObject<TEntity> queryObject)
        where TEntity : class
    {
        using (var conn = ServiceLocator.IOC.Resolve<IDbContext>())
        {
            var query = (from q in conn.Set<TEntity>()
                        select q);
            query = query.Where(queryObject.AsExpression());
            return query.FirstOrDefault();
        }
    }
} 
```

下次我们调用`Find`存储库时，EF 5 是否会有此查询的缓存版本，还是会因为我们将获得一个新的 dbcontext 而消失？如果我想要缓存查询，我需要处理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T10:28:29.580

查询被整体缓存，因此您可以安全地为每个请求创建和处置 DbContext 实例。无论如何，这是我的首选方法。
可以在[此处](http://msdn.microsoft.com/en-us/data/hh949853.aspx)找到 Microsoft 文档- 请参阅第 3.2 节查询计划缓存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-07T23:58:41.827

来自微软：

> 默认情况下，为 Entity SQL 查询启用查询计划缓存，无论是通过 EntityCommand 还是通过 ObjectQuery 执行。在 .NET 4.5 和 Entity Framework 6 的 Entity Framework 中，它也默认启用 LINQ to Entities 查询

不，您不必保留相同的上下文以使缓存起作用。请注意，只有查询本身（即通过实体框架编译的 SQL）被缓存，默认情况下，每次请求数据时，此（缓存）查询仍将针对数据库运行。

# c++ - 在 linux C++ 中生成输出文件

> ID：13706506
> 
> 赞同：0
> 
> 时间：2012-12-04T15:40:50.930
> 
> 标签：c++, linux, file-io

我使用的是 Linux 和 C++，下面是整个程序中唯一的输出函数。由于某种原因，没有生成输出文件“Network_Managment_Output.txt”，在 Windows 中使用 Visual Basic 时它可以完美运行！

我无法弄清楚为什么没有生成输出文件我没有收到任何错误。

```
void Data_list :: print_msg (Data_list* head) const             
{

Data_list* start = head;

FILE* fp=fopen("Network_Managment_Output.txt","w");

while(start!=NULL)
{
    fprintf(fp, "%s\n",start->message);                 //Printing messages to output file
    start=start->Next;
}
fclose(fp);
} 
```

如果我替换`fprintf(fp, "%s\n",start->message);`
： `cout<<start->message<<endl;`

它完美地将数据打印到屏幕上。

有什么建议吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:45:14.847

替换这一行：

```
FILE* fp=fopen("Network_Managment_Output.txt","w"); 
```

和

```
FILE* fp=fopen("Network_Managment_Output.txt","w");
if(!fp) perror("Network_Management_Output.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:12:14.733

似乎问题在于您的代码或编译（配置或任何），我根据您提供的代码提示制作了代码，它工作正常看看

做类似的事情，包括这些库并保存文件 (x).cpp

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct Data_list{
   char message[250];
   Data_list *Next;
};

void print_msg (Data_list* head){
    Data_list* start = head;

    FILE *fp = NULL;
    fp = fopen("Network_Managment_Output.txt","w");
    if (fp != NULL){
        while(start!=NULL){
            fprintf(fp, "%s\n",start->message);                 //Printing messages to output file
            start=start->Next;
        }
        fclose(fp);
    }
}

int main(){
  Data_list* start = (struct Data_list *)malloc(sizeof(struct Data_list)) ;
  strcpy(start->message,"test 1");
  start->Next = (struct Data_list *)malloc(sizeof(struct Data_list)) ;
  strcpy(start->Next->message,"test 2");
  start->Next->Next = NULL;
  print_msg(start);

  return 0;
} 
```

文件中的输出是

```
 test 1 
 test 2 
```

# crystal-reports - 水晶报表 8.5 如何知道报表运行多长时间

> ID：13706510
> 
> 赞同：0
> 
> 时间：2012-12-04T15:40:52.347
> 
> 标签：crystal-reports

我的新公司得到了一些遗留的水晶报表 8.5。现在我需要研究其中一个，因为它运行时间太长。我使用水晶报告运行 rpt 文件。我需要知道它运行了多长时间而不注意它，因为它可能运行很长时间。任何想法？谢谢。我对水晶报告还很陌生

顺便说一句，它针对 sql server 2005 数据库运行。在没有其他方法之前，我不会使用 sql profiler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:15:38.140

您使用的是 CR 8.5 还是这些报告是在 8.5 上编写的？

我不能谈论非常旧的 CR 版本，但是任何合理的最新版本都可以通过单击“报告”->“性能信息”来获得此信息

# ruby - 减去浮点数时出现意外结果

> ID：13706515
> 
> 赞同：1
> 
> 时间：2012-12-04T15:41:06.663
> 
> 标签：ruby

> **可能重复：**
> [ruby 浮点错误](https://stackoverflow.com/questions/4055618/ruby-floating-point-errors)

在 Ruby 中，当从 5.0 中减去 4.7 时，我希望得到 0.3 的结果，但会得到：

```
~ $ irb
1.9.2p290 :001 > 5.0 - 4.7
 => 0.2999999999999998 
```

我猜这是有原因的，而不是它是一个错误？使用`BigDecimal`对象会产生相同的结果。我唯一的选择是`round`在结果上使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:52:00.133

浮点数失去精度。对此无能为力。所以，使用：

```
(5.0 - 4.7).round(1) 
```

如果您需要更高的精度：

```
(0.50 - 0.47).round(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:53:21.537

这不是一个错误。这就是浮点运算的工作原理。更多细节在这里： http: [//floating-point-gui.de/](http://floating-point-gui.de/)

# fix-protocol - FIX 协议：ClearingBusinessDate 字段

> ID：13706519
> 
> 赞同：0
> 
> 时间：2012-12-04T15:41:17.040
> 
> 标签：fix-protocol

我对 FIX 协议有疑问。我计划在没有收到 PositionReportRequest 消息的情况下发送 PositionReport 消息。但是我必须在 PositionReport 消息中填写一个字段 ClearingBusinessDate，我不知道该字段的用途是什么。尽管 PositionReportRequest 具有该字段，但在发送报告消息之前我不会收到请求消息。所以，我不知道它应该是什么。最糟糕的是它是一个必填字段。 ClearingBusinessDate 字段的值应该是多少？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:11:30.717

对于您的交易对手来说，这更像是一个问题，而不是关于一般 FIX 协议的问题。

如果您要连接到外部 FIX 交易对手（例如交易所、清算公司等），他们的界面上应该有说明预期字段和字段值应该是什么的文档。如果他们没有文档，那么您将不得不询问他们。

FIX 是一个非常松散的协议。默认消息/字段定义中的所有消息和字段实际上只是建议。在实践中，大多数交易对手以多种方式更改和破坏这些消息/字段定义。他们可能会添加自定义字段、更改字段类型、使可选字段成为必填项，反之亦然、删除字段等。我从未见过交易对手*不*弄乱定义。

（PS 您的回答接受率非常低。请考虑回顾过去的问题并接受最佳答案。您将获得代表点数，并使 StackOverflow 变得更好。）

# php - Pear::MDB2 - 获取最后执行的查询

> ID：13706520
> 
> 赞同：2
> 
> 时间：2012-12-04T15:41:19.930
> 
> 标签：php, pear, mdb2

我必须使用 Pear MDB2 但不知道如何获取最后执行的查询。有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:25:26.437

正如您在此链接中看到的那样：[https](https://pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#var%24last_query) : //pear.php.net/package/MDB2/docs/latest/MDB2/MDB2_Driver_Common.html#var$last_query 您有一个名为 $last_query 的变量，它存储发送到的最后一个查询司机。

我没有检查它，但根据您可以使用的文档：

```
$mdb2 =& MDB2::connect('YOUR_DSN');
if (PEAR::isError($mdb2)) {
    die($mdb2->getMessage());
}

// Proceed with a query...
$res =& $mdb2->query('SELECT * FROM clients');

echo $mdb2->last_query; 
```

# java-me - 从所有 Java 手机（尤其是 S40 设备）获取唯一 ID

> ID：13706523
> 
> 赞同：1
> 
> 时间：2012-12-04T15:41:37.203
> 
> 标签：java-me, nokia-s40, imei, unique-id, jsr82

我需要以编程方式从所有支持 j2me 的手机中获取唯一标识号。

我们已经知道在 S40 设备中获取 IMEI / IMSI 几乎是不可能的，蓝牙 MAC 地址 / obex 推送配置文件 UUID 可能会有所帮助。但是为此，应该在手机中打开蓝牙。而且不知道有多少设备会支持jsr82。

是否有其他一些独特的 id 可以区分 j2me 设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:03:00.790

使用`System.currentTimeMillis()`用户首次启动应用程序时的值。除非两个用户以完全相同的毫秒（不太可能）启动他们的应用程序，否则这将是独一无二的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:26:56.657

刚才我从其他来源得到答案：除了 IMEI、蓝牙或 WLAN（如果可用）MAC 地址之外，没有其他唯一 ID。重新设计您的解决方案以不完全依赖此类，或者您自己生成/分配的一些 ID 就足够了（可能与用户名/密码组合结合使用）。

还有其他想法吗？

# java - 比较不同对象的 2 个 Java 数组列表并将匹配的行添加到新列表

> ID：13706524
> 
> 赞同：1
> 
> 时间：2012-12-04T15:41:39.867
> 
> 标签：java, arraylist, compare, match

我们需要比较具有一些公共字段的不同对象的 2 个数组列表，然后将匹配的行存储到一个新的数组列表中。我已经寻找解决方案，但无法得到我需要的东西。

```
List<Person> personList = new ArrayList<Person>();
Person:
private String firstName;
    private String lastName;
    private String street1;
    private String street2;
    private String city;
    private String stateCode;
    private String zipCode;

List<PersonNpi> npiList = new ArrayList<PersonNpi>();
PersonNpi:
private String name;
    private String npi;
    private Address address; 
```

所以我需要检查是否`name & address in the PersonNpi object in the PersonNpiList match to a Person object in the PersonList`，如果是，则保存`Person details + Npi to a new Arraylist<Employee>`

希望我对这个问题很清楚。请让我知道如何有效地解决这个问题。

谢谢

哈利

**编辑：**

*我需要将不匹配的行（在第一个数组列表上）保存到另一个列表中。我需要另一个循环还是可以在同一个 For 循环上执行？请问有人吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:04:47.423

由于我没有看到它们扩展的任何超类，因此您必须手动遍历您的列表。我假设很多，例如，您的属性有 getter 和 setter，这`PersonNpi.name`或多或少相同，您在like`Person.firstname + Person.lastname`中具有某些功能，您的类具有与 s 进行比较的方法。在这种情况下，循环遍历第一个数组，并检查第二个数组是否有任何与其相等的元素。`Address``boolean checkEquality(String street1, String street2, String city, String state, String zip)``Person``getName()``PersonNpi`

```
ArrayList<Employee> employees = new ArrayList<Employee>();
for(Person person : personList) {
  for(PersonNpi personNpi : npiList) {
    if (person.getName().equals(personNpi.getName()) && 
        person.getAddress().checkEquality(...address parts here...)) {
      employees.add(new Employee(person, personNpi));
    }
  }
} 
```

同样，我做了很多假设，还有一个假设是你有一个`Employee`只需要`Person`和的构造函数`PersonNpi`，并相应地获取所需的信息。

您应该详细说明，使用超类并使用该`contains()`函数。换句话说，通过一个函数使比较`Person`和更容易。`PersonNpi`

**编辑**：您的第二个问题非常重要，如果不是非常依赖于您对`Employee`,`Person`和`PersonNpi`. 现在，我再次假设您有一些方法可以验证`Employee`,`Person`和`PersonNpi`.

我建议不要在一个循环中进行检查，因为您有两个循环`ArrayLists`通过。-list 会针对 first 中的`PersonNpi`每条记录运行`List`。所以可能发生的情况是，在我们检查完所有内容后，有一些`Persons`不匹配，还有一些`PersonNpis`不匹配，因为我们没有标记哪个`Persons`并且`PersonNpis`我们已经匹配。

**总之**：为方便起见，只需添加这部分：

```
ArrayList<Object> nonMatchedPersons = new ArrayList<Object>();
for (Person person : personList) 
    if (!employees.contains(person))
        nonMatchedPersons.add(person);
for (PersonNpi personNpi : npiList) 
    if (!employees.contains(personNpi))
        nonMatchedPersons.add(personNpi); 
```

*`equals(Object)`此方法确实需要您为所有 3 个人类实现该方法，您可以考虑将其放在像`Human`. 在这种情况下，您可以`Object ArrayList`将`ArrayList<Human>`*

**一个循环（需要`equals(Object)`3 个人类的方法）**：

```
List<Employee> employees = new ArrayList<Employee>();
ArrayList<Object> nonMatchedPersons = new ArrayList<Object>();

Iterator<Person> personIterator = personList.iterator();
while (personIterator.hasNext()) {
    Iterator<PersonNpi> npiIterator = npiList.iterator();
    while(npiIterator.hasNext()) {
        Person person = personIterator.next();
        PersonNpi personNpi = npiIterator.next();
        if (person.equals(personNpi)) {
            employees.add(new Employee(person, personNpi));
            personIterator.remove();
            npiIterator.remove();
        }
    }
}

nonMatchedPersons.addAll(personList);
nonMatchedPersons.addAll(npiList); 
```

*解释*：我们`Iterators`遍历两个列表，使我们能够在迭代时从列表中删除。所以在`personList`和 中`npiList`，只剩下单打，因为我们将双打添加到`Employee`-list 中，立即将它们从其他两个列表中删除。我们使用该方法将两个列表中剩余的单曲添加到我们的`nonMatchedPerson`-list 中`addAll`。

**Edit2**：如果您出于某种原因无法编辑这些类，请制作 3 个*包装*类，例如：

```
public class PersonWrapper {
    private Person person;

    public PersonWrapper(Person person) {
        this.person = person;
    }

    @override
    public boolean equals(Object other) {
        if (other == null) 
            return false;
        if (other instanceof PersonWrapper) {
            //etc etc, check for equality with other wrappers.
            ...
        }
    }
} 
```

如果您选择使用这种方法，请在循环中更改此行：

```
if (person.equals(personNpi)) { 
```

对此：

```
if (new PersonWrapper(person).equals(new PersonNpiWrapper(personNpi))) { 
```

使用它，您仍然可以实现自己的`equals()`方法。

另一种解决方案可能是您制作这样的静态方法：

```
public static boolean equals(Object this, Object that) {
    if (this instanceof Person || this instanceof PersonNpi) //et cetera, et cetera
        return true;
    return false;
} 
```

现在只需调用`Person.equals(person, personNpi)`，假设您将方法放在类中`Person`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:44:07.157

如果您实现 equals 来比较有问题的值，则可以使用`contains`来查看对象是否在其他列表中。

否则，您将不得不手动遍历列表，并检查每个对象。

如果你使用 jdk8 Lambda，你可以做这样的事情（编译并运行 btw，使用正确的 jdk）：

```
public static void main(String args[]) throws ParseException {
        TransformService transformService = (inputs1, inputs2) -> {
            Collection<String> results = new ArrayList<>();
            for (String str : inputs1) {
                if (inputs2.contains(str)) {
                    results.add(str);
                }
            }
            return results;
        };
        Collection<String> inputs1 = new ArrayList<String>(3) {{
            add("lemon");
            add("cheese");
            add("orange");
        }};
        Collection<String> inputs2 = new
                ArrayList<String>(3) {{
                    add("apple");
                    add("random");
                    add("cheese");
                }};
        Collection<String> results = transformService.transform(inputs1, inputs2);
        for (String result : results) {
            System.out.println(result);
        }
    }

    public interface TransformService {
        Collection<String> transform(Collection<String> inputs1, Collection<String> inputs2);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T16:01:59.230

像这样的东西应该工作。它假定您有一种`Employee`从 a`Person`和 a构造 a 的方法`PersonNpi`。另外，由于您不告诉 a 的结构`Address`，我将留给您编写地址匹配逻辑。

```
public List<Employee> findCommonElements(List<Person> list1,
                                         List<PersonNpi> list2)
{
    List<Employee> common = new ArrayList<Employee>();
    for (Person p1 : list1) {
        PersonNpi p2 = find(list2, p1);
        if (p2 != null) {
            common.add(new Employee(p1, p2));
        }
    }
}

private PersonNpi find(List<PersonNpi> list, Person p) {
    for (PersonNpi p2 : list) {
        if (matches(p, p2)) {
            return p2;
        }
    }
    return null;
}

private boolean matches(Person p1, PersonNpi p2) {
    return /* logic for comparing name and address info */;
} 
```

这是一个 O(n ² ) 操作。您可以通过按名称和地址对两个数组进行排序来大大加快速度。排序操作是 O(n log(n))，然后可以将比较实现为 O(n) 操作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-04T16:06:26.483

用于`HashMap`存储第一个列表`PersonNpiList`。用于`map.get(Person) == null`检查人是否在哈希图中。

# android - 在默认的 android 文本应用程序中使用 SMSManager 显示出站文本

> ID：13706526
> 
> 赞同：2
> 
> 时间：2012-12-04T15:41:40.173
> 
> 标签：android, sms, smsmanager

我目前正在编写一个使用用户语音发送文本消息的应用程序，我正在使用 SMSManager 发送文本并且它可以工作。我遇到的问题是当我去短信应用程序查看我的短信历史时，我没有看到我发送的短信。有没有办法让我从 SMSManager 发送的文本出现在我的文本历史记录中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:47:40.760

发送后使用此代码

```
Context context; //you should initialize it somewhere
...
ContentValues values = new ContentValues();
values.put("address", number);
values.put("body", message );
values.put("date", time );
context.getContentResolver().insert(Uri.parse("content://sms/sent"), values); 
```

但这是非官方的

# vim - VimL：如何通过缓冲区名称知道 Vim 在哪个缓冲区中

> ID：13706528
> 
> 赞同：1
> 
> 时间：2012-12-04T15:41:41.227
> 
> 标签：vim, vim-plugin

我目前正在修改我喜欢的插件以满足我的需要。在 VimL 的限制范围内，我遇到了我需要知道我在哪个缓冲区中的问题。

我需要能够按名称引用缓冲区，特别是我需要知道我何时在 Vim 自己的`[Command Line]`缓冲区中。顺便说一句，您可以使用`q:`,`q/`或`q?`.

我正在修改的插件如下：[https ://github.com/jeffkreeftmeijer/vim-numbertoggle](https://github.com/jeffkreeftmeijer/vim-numbertoggle)

这是我的叉子：[https ://github.com/Greduan/vim-numbertoggle](https://github.com/Greduan/vim-numbertoggle)

我想要做的是知道我何时在这个特定的缓冲区中，`[Command Line]`当我在其中时，调用并且不使用相对行号。

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:55:39.070

`bufname('')`使用带有空字符串的vimscript 函数（有关详细信息，请参阅 参考资料`:help bufname()`）。要获取缓冲区的编号，请使用`bufnr('')`.

此外，您可以使用 register 获取当前缓冲区中的文件名`%`：

```
let current_file = @% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:04:41.993

你可以检查 Vim 在创建命令行窗口时设置的一些选项。

1.  **创建此文件和目录：**

    ```
    ~/after/ftpugin/vim.vim 
    ```

    你在这个文件中的内容只有在你编辑一个带有相应`filetype`.

2.  **将以下不言自明的代码添加到该文件中：**

    ```
    if &buftype == "nofile"
      setlocal number
    endif 
    ```

它工作，在这里。我认为您可以通过添加`&filetype == "vim"`.

# android - 数据库在模拟器中工作正常，但在设备上出现错误

> ID：13706530
> 
> 赞同：0
> 
> 时间：2012-12-04T15:41:47.493
> 
> 标签：android, database, sqlite, emulation

我的应用程序在运行时会创建一个数据库，并在其中存储一些基本数据。但是，当我尝试在设备上运行该应用程序时，我收到“无法打开数据库”错误，而它正在运行并且在模拟器上功能齐全。

我的主要活动是

```
import android.app.Activity;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.Menu;
import android.widget.ListView;

public class MainActivity extends Activity
{

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.i("sarhad","Initializing data");
    DatabaseHelper db = new DatabaseHelper(this);
    Cursor cursor;
    ListView listSongs;
    SimpleCursorAdapter adapter;
    final String[] FROM = { db.KEY_SONGNAME, db.KEY_ARTISTNAME, db.KEY_LABELNAME };
    final int[] TO = { R.id.textViewSONG, R.id.textViewARTIST, R.id.textViewLABEL };    

    try
    {
        db.openDataBase();

    } catch (SQLException sqle)
    {
        throw sqle;
    }

    listSongs = (ListView) findViewById(R.id.listSongsView);

    db.getWritableDatabase();

    Log.i("tag","Initializing query");
    String queryStr = "SELECT * FROM songs";

    Log.i("tag","before : cursor = db.getSongs(queryStr);");
    cursor = db.getSongs(queryStr);
    Log.i("tag","after : cursor = db.getSongs(queryStr);");

     startManagingCursor(cursor);

     adapter = new SimpleCursorAdapter(this, R.layout.row, cursor, FROM,TO);
     listSongs.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

我的数据库助手类是

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper
{
static final int DATABASE_VERSION = 1;

public static String DB_PATH = "";

// Database Name
static final String DATABASE_NAME = "songsDB";

// Contacts table name
static final String TABLE_SONGS = "songs";

// Contacts Table Columns names
static final String KEY_ID = "_id";
static final String KEY_SONGNAME = "songname";
static final String KEY_ARTISTNAME = "artistname";
static final String KEY_LABELNAME = "labelname";

private SQLiteDatabase db = null;
private final Context myContext = null;

private static DatabaseHelper mDBConnection;

//////////////////////////////////////////////////////////////////////////////////

public DatabaseHelper(Context context)
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    DB_PATH = "/data/data/" + context.getApplicationContext().getPackageName() + "/databases/";
}

//////////////////////////////////////////////////////////////////////////////////

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db)
{
    String CREATE_SONGS_TABLE = "CREATE TABLE " + TABLE_SONGS + "("
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + KEY_SONGNAME
            + " TEXT," + KEY_ARTISTNAME + " TEXT," + KEY_LABELNAME
            + " TEXT);";
    db.execSQL(CREATE_SONGS_TABLE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_SONGS);
    onCreate(db);
}

//////////////////////////////////////////////////////////////////////////////////

void addSong(String song, String singer, String label)
{
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_SONGNAME, song);
    values.put(KEY_ARTISTNAME, singer);
    values.put(KEY_LABELNAME, label);

    db.insert(TABLE_SONGS, null, values);
    db.close(); 
}

public Cursor getSongs(String queryStr)
{
    return db.rawQuery(queryStr, null);

}

///////////////////////////////////////////////////////////////////////

public SQLiteDatabase openDataBase() throws SQLException
{
    String myPath = DB_PATH + DATABASE_NAME;
    db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    return db;
}

/**
 * Close the database if exist
 */
@Override
public synchronized void close()
{
    if (db != null)
        db.close();
    super.close();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:58:20.340

我认为您弄乱了路径，真实设备不会让您将文件放在该位置，而模拟器会。尝试完全删除路径并让系统找出放置数据库的位置。一旦您知道它是这样工作的，那么您可以在需要时返回并修改路径。

# python - python kill subprocess 在退出时进行通信

> ID：13706531
> 
> 赞同：3
> 
> 时间：2012-12-04T15:41:48.833
> 
> 标签：python, subprocess, global, kill

我有一个设计用来运行任务的大型脚本，一次一个。但是我有一个初始化脚本，它使用 start-stop-daemon 在我们想要的任何时候终止脚本。脚本结束得很好，但是 subprocess 命令运行直到它完成。我怀疑这可能只是我如何尝试执行全局变量的问题。或者我使用 .communicate 与子进程。无论如何，这是代码中的相关内容：

```
import subprocess
import os
import signal

pro = ''

def sigHandler( signum, frame ):
    global pro
    os.killpg( pro.pid, signal.SIGTERM )
    sys.exit()

def run(data):
    #I found an example using preexec_fn somewhere on stackoverflow. Cant
    #remember if they were using .communicate() or not
    global pro
    pro = subprocess.Popen( command, stdout = subprocess.PIPE, stderr = subprocess.PIPE, shell = False, preexec_fn = os.setsid ).communicate()
    return( 1 )

if __name__ == '__main__':
    signal.signal( signal.SIGTERM, sigHandler )
    while True:
        run( relevantData ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:07:25.443

朋友帮我弄明白了。正如我在评论中所说，当命令运行时 pro 没有被填充。所以我不得不将我的代码更改为：

```
pro = subprocess.Popen( command, stdout = subprocess.PIPE, stderr = subprocess.PIPE, shell = False, preexec_fn = os.setsid )
pro.communicate() 
```

然后它起作用了:)

# sql - SQL Server 中的转换失败

> ID：13706535
> 
> 赞同：2
> 
> 时间：2012-12-04T15:41:54.490
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [在 MSSQL 中使用动态 IN 子句](https://stackoverflow.com/questions/5192591/using-dynamic-in-clause-in-mssql)

我有一个包含参数的 SQL 语句，例如`@StartRow, @StartEnd, @CategoryIds`.

```
SELECT * FROM StackOverFlow
WHERE
StartRow = @StartRow
AND StartEnd = @StartEnd
AND CategoryId IN (@CategoryIds) 
```

当我设置如下参数时：

```
DECLARE  @StartRow INT = 1;
DECLARE  @StartRow INT = 10;
DECLARE  @CategoryId NVARCHAR(50);
set @CategoryId ='124,125' 
```

失败的消息是：

> 将 nvarchar 值“124,125”转换为数据类型 int 时转换失败。

当我手动设置 SQL where 语句时，如下所示：

```
WHERE
StartRow = @StartRow
AND StartEnd = @StartEnd
AND CategoryId IN (124, 125) 
```

有用。

我该如何解决转换问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:52:04.253

为此，您需要使用[动态 SQL](http://www.sqlteam.com/article/introduction-to-dynamic-sql-part-1)。所以你会写

```
DECLARE  @StartRow INT = 1;
DECLARE  @StartRow INT = 10;
DECLARE @CatogoryIds NVARCHAR(50);
SET @CatogoryIds = N'124, 125';
DECLARE @SQL NVARCHAR(MAX);
SET @SQL = N'
    SELECT * 
    FROM StackOverFlow
    WHERE
        StartRow = ' + @StartRow + 
      N' AND StartEnd = ' + @StartEnd + 
      N' AND CategoryId IN (' + @CategoryIds + N');';
EXEC(@SQL);
GO 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:48:04.000

如果使用动态 SQL，您应该像这样使用参数化查询和 SP_EXECUTESQL

```
CREATE TABLE T (StartRow INT, StartEnd INT, CategoryID INT);
INSERT T VALUES (1, 10, 124), (1, 10, 125), (1, 10, 126);

DECLARE  @StartRow INT = 1;
DECLARE  @StartEnd INT = 10;
DECLARE  @CategoryId NVARCHAR(50) ='124); DROP TABLE T; --';

DECLARE @SQL NVARCHAR(MAX);
SET @SQL = N'SELECT * 
            FROM    T 
            WHERE   StartRow = @Start
            AND     StartEnd = @End
            AND     CategoryID IN (' + @CategoryId + ')'

EXECUTE SP_EXECUTESQL @SQL, N'@Start INT, @End INT', @StartRow, @StartEnd; 
```

**[动态 SQL 示例](http://www.sqlfiddle.com/#!3/e6410/3)**

* * *

您可以使用 SQL-Server 的 XML 扩展在没有动态 SQL 的情况下执行此操作，尽管我不确定您是否一定要这样做，但您可能需要运行一些测试来检查性能。

```
DECLARE  @StartRow INT = 1;
DECLARE  @StartEnd INT = 10;
DECLARE  @CategoryId NVARCHAR(50) ='124,125';

DECLARE @X XML = CAST(N'<root><catid>' + REPLACE(@CategoryID, ',', '</catid><catid>') + '</catid></root>' AS XML);

SELECT  StartRow,
        StartEnd,
        CategoryID
FROM    T
        INNER JOIN
        (   SELECT  [CatID] = cat.value('.', 'int')
            FROM    @X.nodes('/root/catid') c (cat)
        ) c
            ON c.CatID = CategoryID; 
```

**[使用 XML 扩展的示例](http://www.sqlfiddle.com/#!3/e6410/5)**

该查询基本上将您的逗号分隔字符串转换为 XML，然后将 xml 拆分为它自己的表。

这也应该降低 sql 注入的风险，因为任何格式错误的字符串都会引发错误而不是运行。考虑这些变量：

```
DECLARE  @StartRow INT = 1;
DECLARE  @StartEnd INT = 10;
DECLARE  @CategoryId NVARCHAR(50) ='124,125); DROP TABLE T; --'; 
```

使用 XML 扩展方法运行会给出这个

```
Msg 245, Level 16, State 1, Line 13
Conversion failed when converting the nvarchar value '124,125); DROP TABLE T; --' to data type int. 
```

**[XML 扩展的 SQL 注入失败](http://www.sqlfiddle.com/#!3/e6410/7)**

使用动态 SQL 运行会得到想要的结果，但是下次你运行它时，你会得到：

```
Msg 208, Level 16, State 1, Line 1
Invalid object name 'T'. 
```

**[SQL 注入示例](http://www.sqlfiddle.com/#!3/e6410/6)**

除了上面使用的 XML 方法之外，还有其他拆分字符串的方法，但这只是为了证明动态 SQL 并不是唯一的前进方式，如果您无法控制输入字符串，那么不使用它会更明智因为恶意字符串会破坏您的数据！

* * *

为了答案的完整性，您还可以使用表值参数。例如

```
CREATE TYPE dbo.IntegerList AS TABLE (value INT);

CREATE PROCEDURE dbo.ExampleProcedure @StartRow INT, @StartEnd INT, @CategoryID dbo.IntegerList READONLY
AS
BEGIN

    SELECT  *
    FROM    T 
    WHERE   StartRow = @StartRow
    AND     StartEnd = @StartEnd
    AND     CategoryID IN (SELECT Value FROM @CategoryID)
END 
```

# ios - 如何添加文件组？

> ID：13706541
> 
> 赞同：1
> 
> 时间：2012-12-04T15:42:08.187
> 
> 标签：ios, xcode, sharekit

我正在尝试添加照片中的 shareKit 文件：

![在此处输入图像描述](../Images/619fd3a76e964d1ae6aa37f3c350f8f9.png)

...但是 Xcode 只会让我对单个文件进行拖放！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:49:55.510

在 Xcode 4 中，它与屏幕截图中的旧 Xcode 不同。要在项目之间复制，您必须在同一个工作区（同一个窗口）中打开它们。所以

1.  打开第一个项目
2.  将第二个从 finder 拖到同一个 Xcode 工作区
3.  现在拖动你需要的文件
4.  从您的工作区中删除第二个项目。

Lakesh 的方法实际上可能存在风险，有时您在 xcode 中看到的文件结构可能与文件系统上的实际不同。

您可能想尝试[ShareKit 2.0](https://github.com/sharekit/sharekit)，它已经打包为静态库，并更新了共享器以匹配最新的 api。如果您决定使用它，请确保按照字面意思遵循[安装 wiki 指南。](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:56:20.400

你需要做的很简单：

1）右键单击第一个项目中的sharekit文件夹，您将在finder中看到显示。点击那个。

2）这将导致您目录中的文件夹。

3）接下来将整个目录拉到第二个项目中。确保将文件复制过来。

希望这可以帮助...

# c# - Antlr 解析器不会生成所有预期的代码

> ID：13706546
> 
> 赞同：1
> 
> 时间：2012-12-04T15:42:38.070
> 
> 标签：c#, antlr, antlr3

[我有一个在 C# 中行走 ANTLR AST 的教程中](https://stackoverflow.com/questions/887205/tutorial-for-walking-antlr-asts-in-c)大致定义的语法？：

```
grammar Test; 

options 
{
language = 'CSharp3'; 
output=AST; 
} 
public expr : mexpr (PLUS^ mexpr)* SEMI! 
; 
mexpr 
: atom (STAR^ atom)* 
; 
atom: INT 
; 
//class csharpTestLexer extends Lexer; 
WS : (' ' 
| '\t' 
| '\n' 
| '\r') 
{ $channel = Hidden; } 
; 
LPAREN: '(' 
; 
RPAREN: ')' 
; 
STAR: '*' 
; 
PLUS: '+' 
; 
SEMI: ';' 
; 
protected 
DIGIT 
: '0'..'9' 
; 
INT : (DIGIT)+ 
; 
```

这建立了，但让我没有`parser.expr_result`我所期望的课程，并`parser.expr()`返回`AstParserRuleReturnScope`我做错了什么？是选项吗？工具命令行选项？还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:11:37.170

ANTLR 3.3 声明规则`expr`如下：

```
 public TestParser.expr_return expr() 
```

ANTLR 3.4 是这样声明的：

```
 public AstParserRuleReturnScope<object, IToken> expr() 
```

这是 的定义`TestParser.expr_return`：

```
 public class expr_return : ParserRuleReturnScope<IToken>, IAstRuleReturnScope<object>
    {
        private object _tree;
        public object Tree { get { return _tree; } set { _tree = value; } }
    } 
```

该类`AstParserRuleReturnScope`看起来等同于生成的`expr_return`类。

# php - 使用 SimpleXML 创建 WS-Security 标头？

> ID：13706549
> 
> 赞同：2
> 
> 时间：2012-12-04T15:42:44.553
> 
> 标签：php, xml, namespaces, simplexml

我想创建一个 WSS 标头以在安全的 Web 服务上进行身份验证。

我可以用丑陋的来做到这一点：

```
 $auth = '
     <wsse:Security SOAP-ENV:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <wsu:Timestamp wsu:Id="Timestamp-28" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsu:Created>' . $timestamp . '</wsu:Created>
            <wsu:Expires>' . $timestampExpires . '</wsu:Expires>
        </wsu:Timestamp>
        <wsse:UsernameToken wsu:Id="UsernameToken-27" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>' . $user . '</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">' . $passdigest . '</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">' . $encodedNonce . '</wsse:Nonce>
            <wsu:Created>' . $timestamp . '</wsu:Created>
        </wsse:UsernameToken>
     </wsse:Security>'; 
```

我现在正在尝试使用 SimpleXML 将其做得更干净。

但如果我尝试做一个简单的：

```
 $xml = new SimpleXMLElement('<wsse:Security/>', 0, false, 'wsse'); 
```

我得到：

> 警告：SimpleXMLElement::__construct() [simplexmlelement.--construct]：命名空间错误：安全性上的命名空间前缀 wsse 未在

我想我错过了创建命名空间 xmls 的方法，你能给我一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:31:51.243

我找到了解决问题的方法：

```
$root = new SimpleXMLElement('<root/>');

$security = $root->addChild('wsse:Security', 'test', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd');

$root->registerXPathNamespace('wsse', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd');
$auth = $root->xpath('/root/wsse:Security');
echo htmlentities($auth[0]->asXML()); 
```

显示：

```
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">test</wsse:Security> 
```

而且，我的 XML 中有一个错误，我放了一个`SOAP-ENV:mustUnderstand="1"`但我从未定义`SOAP-ENV`命名空间。

# math - sqrt() VST-Plugin MATH - sqrt() 的损失增益？

> ID：13706550
> 
> 赞同：0
> 
> 时间：2012-12-04T15:42:46.457
> 
> 标签：math, signal-processing, vst

使用“sqrt()”的计算是否可能会影响输出增益？这是我的代码：（带有全景调整的 MS 工具）

```
//Code...precalculations above

(*out1++) = (mid+side) * dGain * sqrt(dOne - dPan); //sqrt for pan law
(*out2++) = (mid-side) * dGain * sqrt(dOne); 
```

在这种情况下，输入/输出增益稍有不同。有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:42:47.310

我只是在这里猜测，但您的算法似乎正在尝试将立体声平移定律应用于左/右声道。在那种情况下，我认为计算没有正确完成。此链接（也发布在评论中）可能有用：

> [http://www.kvraudio.com/forum/viewtopic.php?p=4264576](http://www.kvraudio.com/forum/viewtopic.php?p=4264576)

如果我的怀疑是正确的，那么您没有对信号应用正确的增益补偿量，这就是为什么它听起来可能不像您预期​​的那样。

# c - C 中 Pthread 函数的未定义参考

> ID：13706552
> 
> 赞同：0
> 
> 时间：2012-12-04T15:43:01.427
> 
> 标签：c, unix, pthreads, undefined-reference

> **可能重复：**
> [在 linux 中未定义对 pthread_create 的引用（c 编程）](https://stackoverflow.com/questions/1662909/undefined-reference-to-pthread-create-in-linux-c-programming)

我正在尝试在 C 中在 Ubuntu 中实现线程链。当我编译以下代码时，即使我添加了头文件，我也会收到对这些线程库函数的未定义引用的错误。我也收到分段错误错误。这是为什么？我没有在程序的任何地方访问一些未初始化的内存。这是代码：

```
#include <stdio.h>
#include<stdlib.h>
#include <pthread.h>

void* CreateChain(int*);

 int main()
{
int num;

pthread_t tid;

scanf("Enter the number of threads to create\n %d",&num);

pthread_create(&tid,NULL,CreateChain,&num);

pthread_join(tid,NULL);

printf("Thread No. %d is terminated\n",num);

return 0;
}

void* CreateChain(int* num )
 {
pthread_t tid;

if(num>0)
{
    pthread(&tid,NULL,CreateChain,num);
    pthread_join(tid,NULL);

    printf("Thread No. %d is terminated\n",*num);
}
else
    return NULL; 

return NULL;
} 
```

我收到以下警告，并且由于某种原因没有出现 Scanf 提示。

![在此处输入图像描述](../Images/25a2287449c2ef1de5eb5ae472925e9c.png)

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:44:16.113

pthread.h 头文件提供了 pthread 函数的前向声明。这告诉编译器这些函数存在并且具有一定的签名。然而，它并没有告诉链接器在运行时在哪里可以找到这些函数。

要允许链接器解析这些调用（决定在代码内部或不同的共享对象中跳转到哪里），您需要通过添加链接到适当的（pthread）库

```
-pthread 
```

到您的构建命令行。

[请注意，也可以使用`-lpthread`. [上一个问题](https://stackoverflow.com/questions/2127797/gcc-significance-of-pthread-flag-when-compiling)解释了为什么`-pthread`更可取。]

代码还有其他各种值得关注的问题

*   该`scanf`行应拆分为`printf("Enter number of threads\n");scanf("%d", &num);`显示用户提示
*   的签名`CreateChain`是错误的——它应该`void*`取而代之的是一个参数。您始终可以`int num = *(int*)arg;`在函数内部执行类似操作来检索线程数。
*   里面的逻辑`CreateChain`看起来不对。您目前将指针与 0 进行比较 - 我想您的意思是比较线程数？此外，如果您不减少要在某处创建的线程数，您最终会得到永远创建线程的代码（或者直到您用完句柄，具体取决于不同线程的调度方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:44:24.147

尝试像下面这样编译：

`gcc -Wall -pthread test.c -o test.out`

`-pthread`是一个选项，可以明确告诉链接器解析与`<pthread.h>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:45:58.097

添加`-lpthread`

```
gcc -o test test.c -lpthread 
```

# c# - 从纯文本字符串中提取数据

> ID：13706553
> 
> 赞同：0
> 
> 时间：2012-12-04T15:43:03.350
> 
> 标签：c#, regex, string, string-matching

我正在尝试处理来自系统的报告，该系统为我提供以下代码

```
000=[GEN] OK {Q=1 M=1 B=002 I=3e5e65656-e5dd-45678-b785-a05656569e} 
```

我需要提取大括号 {} 之间的值并将它们保存到变量中。我想我需要使用正则表达式或类似方法来做到这一点？我真的不知道从哪里开始！！我正在使用 c# asp.net 4。

我需要以下变量

```
param1 = 000
param2 = GEN
param3 = OK
param4 = 1 //Q
param5 = 1 //M
param6 = 002 //B
param7 = 3e5e65656-e5dd-45678-b785-a05656569e //I 
```

我将根据参数的实际含义命名参数。任何人都可以在这里帮助我吗？我试图根据空格进行拆分，但我得到了其他垃圾！

感谢您的任何指示/帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:47:35.567

如果格式相当固定，您可以使用 .NET 字符串处理方法提取值，类似于以下内容

```
string line = 
    "000=[GEN] OK {Q=1 M=1 B=002 I=3e5e65656-e5dd-45678-b785-a05656569e}";

int start = line.IndexOf('{');
int end = line.IndexOf('}');
string variablePart = line.Substring(start + 1, end - start);
string[] variables = variablePart.Split(' ');
foreach (string variable in variables)
{
    string[] parts = variable.Split('=');
    // parts[0] holds the variable name, parts[1] holds the value
} 
```

把这个写在我的脑海里，所以某处可能存在一个错误。此外，建议添加错误检查，例如确保输入字符串同时具有 { 和 }。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:14:42.650

您可以使用`String.Split`

```
string[] parts = s.Split(new string[] {"=[", "] ", " {Q=", " M=", " B=", " I=", "}"},
                         StringSplitOptions.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:54:17.153

使用正则表达式。

快速而肮脏的尝试：

```
(?<ID1>[0-9]*)=\[(?<GEN>[a-zA-Z]*)\] OK {Q=(?<Q>[0-9]*) M=(?<M>[0-9]*) B=(?<B>[0-9]*) I=(?<I>[a-zA-Z0-9\-]*)} 
```

这将生成名为`ID1`、`GEN`、`Q`、`M`和`B`的命名组`I`。

查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)，了解在 C# 中使用正则表达式的详细信息。

您可以使用[Regex Hero](http://regexhero.net/)进行快速 C# 正则表达式测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T00:21:00.897

该解决方案将您的报表代码分解为多个段，并将所需的值存储到一个数组中。

正则表达式一次匹配一个报告代码段，并将适当的值存储在“Parsed Report Code Array”中。

正如您的示例所暗示的那样，前两个代码段的处理方式与之后的代码段不同。我假设始终是前两个段的处理方式不同。

```
private static string[] ParseReportCode(string reportCode) {
    const int FIRST_VALUE_ONLY_SEGMENT = 3;
    const int GRP_SEGMENT_NAME = 1;
    const int GRP_SEGMENT_VALUE = 2;
    Regex reportCodeSegmentPattern = new Regex(@"\s*([^\}\{=\s]+)(?:=\[?([^\s\]\}]+)\]?)?");
    Match matchReportCodeSegment = reportCodeSegmentPattern.Match(reportCode);

    List<string> parsedCodeSegmentElements = new List<string>();
    int segmentCount = 0;
    while (matchReportCodeSegment.Success) {
        if (++segmentCount < FIRST_VALUE_ONLY_SEGMENT) {
            string segmentName = matchReportCodeSegment.Groups[GRP_SEGMENT_NAME].Value;
            parsedCodeSegmentElements.Add(segmentName);
        }
        string segmentValue = matchReportCodeSegment.Groups[GRP_SEGMENT_VALUE].Value;
        if (segmentValue.Length > 0) parsedCodeSegmentElements.Add(segmentValue);
        matchReportCodeSegment = matchReportCodeSegment.NextMatch();
    }
    return parsedCodeSegmentElements.ToArray();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T16:03:27.523

我会为这类工作建议一个正则表达式。

```
var objRegex = new System.Text.RegularExpressions.Regex(@"^(\d+)=\[([A-Z]+)\] ([A-Z]+) \{Q=(\d+) M=(\d+) B=(\d+) I=([a-z0-9\-]+)\}$");
var objMatch = objRegex.Match("000=[GEN] OK {Q=1 M=1 B=002 I=3e5e65656-e5dd-45678-b785-a05656569e}");
if (objMatch.Success)
{
    Console.WriteLine(objMatch.Groups[1].ToString());
    Console.WriteLine(objMatch.Groups[2].ToString());
    Console.WriteLine(objMatch.Groups[3].ToString());
    Console.WriteLine(objMatch.Groups[4].ToString());
    Console.WriteLine(objMatch.Groups[5].ToString());
    Console.WriteLine(objMatch.Groups[6].ToString());
    Console.WriteLine(objMatch.Groups[7].ToString());
} 
```

我刚刚对此进行了测试，它对我来说效果很好。

# oracle - 从周数获取一周的第一天

> ID：13706558
> 
> 赞同：2
> 
> 时间：2012-12-04T15:43:25.080
> 
> 标签：oracle, plsql

在 Oracle 中，是否有一种简单的方法可以在给定周数的情况下获得一周的第一天？

例如，今天的日期是 2012 年 12 月 4 日。如果我运行： select to_char(sysdate,'WW') from dual; 它返回 49 作为周数。

我想做的是以某种方式返回 2012 年 12 月 2 日的第一天......给定第 49 周（假设星期天是一周的第一天）。

有任何想法吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:10:34.493

试试这个：

```
select next_day(max(d), 'sun') requested_sun
  from (select to_date('01-01-2012', 'dd-mm-yyyy') + (rownum-1) d from dual connect by level <= 366)
 where to_char(d, 'ww') = 49-1; 
```

只需将您的年份`to_date('01-01-2012'`和周数设置为 1即可`49-1`。

2008 年第 49 周的星期天？

```
SQL> select next_day(max(d), 'sun') requested_sun
  2    from (select to_date('01-01-2008', 'dd-mm-yyyy') + (rownum-1) d from dual connect by level <= 366)
  3   where to_char(d, 'ww') = 49-1;

REQUESTED
---------
07-DEC-08 
```

和 2012

```
SQL> select next_day(max(d), 'sun') requested_sun
  2    from (select to_date('01-01-2012', 'dd-mm-yyyy') + (rownum-1) d from dual connect by level <= 366)
  3   where to_char(d, 'ww') = 49-1;

REQUESTED
---------
02-DEC-12 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T09:17:21.877

试试这个，

```
select 
  next_day(trunc(to_date(in_year,'yyyy'),'yyyy') -1,'Mon') + (7 * (in_week - 1)) 
from dual; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T19:08:32.247

如果你有日期，而不仅仅是周数，你可以试试这个：

*   使用以下方法获取日期的星期几：`to_char(theDate, 'D')`
*   从您的日期中减去该数字加 1，您将得到该周的星期日。
*   加上 7，您将获得一周结束的日期（星期六）。

像这样：

```
SELECT theDate - to_char(theDate, 'D') + 1 as BeginOfWeek, 
       theDate,
       theDate - to_char(theDate, 'D') + 7 as EndOfWeek
FROM TableName 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-14T14:05:08.847

我还不能对问题发表评论，所以我会添加另一个问题。但这是基于@Dazzals 的回答。他的解决方案不适用于第一周和 ISO 周。如果一周的第一天不是星期天，它也不起作用，这可以由 NLS_SETTINGS 控制。

这个可以：

```
SELECT MIN(D)
FROM (SELECT TO_DATE('01-01-2013', 'dd-mm-yyyy') + (ROWNUM-10) D, ROWNUM R 
        FROM DUAL 
        CONNECT BY LEVEL <= 376)
WHERE TO_CHAR(D,'IYYYIW') = '201301' 
```

因为我们跨越一年多，所以我们也需要检查年份。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T15:53:52.110

使用 @Justin 使用的 trunc 函数，我认为这就是你想要的：

```
select trunc(to_date('2012-01-01', 'YYYY-MM-DD') + (49 - 1) * 7, 'WW') from dual; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-08T08:25:51.523

我最终这样做了：

```
function getFirstDayOfWeek(y in binary_integer, w in binary_integer) return date
is
td date;
begin
    td:=TO_DATE(TO_CHAR(y)||'0101', 'YYYYMMDD');
    for c in 0..52
    loop
        if TO_NUMBER(TO_CHAR(td, 'IW'))=w then
            return TRUNC(td, 'IW');
        end if;
        td:=td+7;
    end loop;
    return null;
end; 
```

# iphone - 添加类别并获得 35 个链接器错误

> ID：13706565
> 
> 赞同：0
> 
> 时间：2012-12-04T15:43:45.560
> 
> 标签：iphone, ios, linker-errors, objective-c-category

我遇到了链接器错误问题，我似乎无法解决或找不到问题的原因。我`Category`在我的 iOS 项目中添加了一个名为`ParentViewController+CoreData`. 我没有在`.h`or`.m`文件中向该类别添加任何内容，但如果我将其导入另一个文件，我会收到 35 个链接器错误。`ParentViewController`是我的代码中的一个视图控制器，我想为其创建一个类别。如果我从标准视图控制器创建一个类别，我没有问题。我过去从自定义视图控制器中创建了类别，没有问题，我在这里找不到问题。

以下是链接器错误：

```
Ld /Users/Heather/Library/Developer/Xcode/DerivedData/Lodge-dffwatcyrvyekkdhbejusjleqkjn/Build/Products/Debug-iphonesimulator/Lodge.app/Lodge normal i386
    cd /Users/Heather/Documents/lodge
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/Heather/Library/Developer/Xcode/DerivedData/Lodge-dffwatcyrvyekkdhbejusjleqkjn/Build/Products/Debug-iphonesimulator -L/Users/Heather/Documents/lodge -F/Users/Heather/Library/Developer/Xcode/DerivedData/Lodge-dffwatcyrvyekkdhbejusjleqkjn/Build/Products/Debug-iphonesimulator -filelist /Users/Heather/Library/Developer/Xcode/DerivedData/Lodge-dffwatcyrvyekkdhbejusjleqkjn/Build/Intermediates/Lodge.build/Debug-iphonesimulator/Lodge.build/Objects-normal/i386/Lodge.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -ObjC -all_load -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=5.1 -framework CoreData -lz -framework CoreGraphics -framework SystemConfiguration -framework MobileCoreServices -framework CFNetwork -framework QuickLook -framework CoreLocation -framework MessageUI -framework ImageIO -lxml2 -framework CoreText -framework Security -framework QuartzCore -framework UIKit -framework Foundation -lFlurryAnalytics -o /Users/Heather/Library/Developer/Xcode/DerivedData/Lodge-dffwatcyrvyekkdhbejusjleqkjn/Build/Products/Debug-iphonesimulator/Lodge.app/Lodge

Undefined symbols for architecture i386:
  "_kGTMHTTPFetcherErrorChallengeKey", referenced from:
      -[GTMHTTPFetcher connection:didReceiveAuthenticationChallenge:] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherErrorDomain", referenced from:
      -[GTMHTTPFetcher failToBeginFetchWithError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher backgroundFetchExpired] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connection:didReceiveAuthenticationChallenge:] in GTMHTTPFetcher.o
      -[GTMHTTPUploadFetcher uploadNextChunkWithOffset:fetcherProperties:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPFetcher failToBeginFetchWithError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher backgroundFetchExpired] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connection:didReceiveAuthenticationChallenge:] in GTMHTTPFetcher.o
      -[GTMHTTPUploadFetcher uploadNextChunkWithOffset:fetcherProperties:] in GTMHTTPUploadFetcher.o
  "_kGTMHTTPFetcherRetryDelayStartedNotification", referenced from:
      -[GTMHTTPFetcher primeRetryTimerWithNewTimeInterval:] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherRetryDelayStoppedNotification", referenced from:
      -[GTMHTTPFetcher destroyRetryTimer] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherStartedNotification", referenced from:
      -[GTMHTTPFetcher beginFetchMayDelay:mayAuthorize:] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherStatusDataKey", referenced from:
      -[GTMHTTPFetcher connectionDidFinishLoading:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher shouldRetryNowForStatus:error:] in GTMHTTPFetcher.o
  "_kGTMHTTPFetcherStatusDomain", referenced from:
      -[GTMHTTPFetcher connection:didReceiveData:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connectionDidFinishLoading:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher isRetryError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher shouldRetryNowForStatus:error:] in GTMHTTPFetcher.o
      -[GTMHTTPUploadFetcher connectionDidFinishLoading:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:finishedWithData:error:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:willRetry:forError:] in GTMHTTPUploadFetcher.o
      ...
      -[GTMHTTPFetcher connection:didReceiveData:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connectionDidFinishLoading:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher isRetryError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher shouldRetryNowForStatus:error:] in GTMHTTPFetcher.o
      -[GTMHTTPUploadFetcher connectionDidFinishLoading:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:finishedWithData:error:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:willRetry:forError:] in GTMHTTPUploadFetcher.o
      ...
      -[GTMHTTPFetcher connection:didReceiveData:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connectionDidFinishLoading:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher isRetryError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher shouldRetryNowForStatus:error:] in GTMHTTPFetcher.o
      -[GTMHTTPUploadFetcher connectionDidFinishLoading:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:finishedWithData:error:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:willRetry:forError:] in GTMHTTPUploadFetcher.o
      ...
      -[GTMHTTPFetcher connection:didReceiveData:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher connectionDidFinishLoading:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher isRetryError:] in GTMHTTPFetcher.o
      -[GTMHTTPFetcher shouldRetryNowForStatus:error:] in GTMHTTPFetcher.o
      -[GTMHTTPUploadFetcher connectionDidFinishLoading:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:finishedWithData:error:] in GTMHTTPUploadFetcher.o
      -[GTMHTTPUploadFetcher chunkFetcher:willRetry:forError:] in GTMHTTPUploadFetcher.o
      ...
  "_kGTMHTTPFetcherStoppedNotification", referenced from:
      -[GTMHTTPFetcher sendStopNotificationIfNeeded] in GTMHTTPFetcher.o
  "_kGTMOAuth2AccessTokenRefreshed", referenced from:
      -[GTMOAuth2Authentication auth:finishedRefreshWithFetcher:error:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2ErrorDomain", referenced from:
      -[GTMOAuth2Authentication authorizeRequestImmediateArgs:] in GTMOAuth2Authentication.o
      -[GTMOAuth2SignIn windowWasClosed] in GTMOAuth2SignIn.o
      -[GTMOAuth2SignIn handleCallbackReached] in GTMOAuth2SignIn.o
      -[GTMOAuth2Authentication authorizeRequestImmediateArgs:] in GTMOAuth2Authentication.o
      -[GTMOAuth2SignIn windowWasClosed] in GTMOAuth2SignIn.o
      -[GTMOAuth2SignIn handleCallbackReached] in GTMOAuth2SignIn.o
  "_kGTMOAuth2ErrorJSONKey", referenced from:
      -[GTMOAuth2Authentication tokenFetcher:finishedWithData:error:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2ErrorMessageKey", referenced from:
      -[GTMOAuth2SignIn handleCallbackReached] in GTMOAuth2SignIn.o
  "_kGTMOAuth2ErrorRequestKey", referenced from:
      -[GTMOAuth2Authentication authorizeRequestImmediateArgs:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchStarted", referenced from:
      -[GTMOAuth2Authentication notifyFetchIsRunning:fetcher:type:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchStopped", referenced from:
      -[GTMOAuth2Authentication notifyFetchIsRunning:fetcher:type:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchTypeAssertion", referenced from:
      -[GTMOAuth2Authentication beginTokenFetchWithDelegate:didFinishSelector:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchTypeKey", referenced from:
      -[GTMOAuth2Authentication notifyFetchIsRunning:fetcher:type:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchTypeRefresh", referenced from:
      -[GTMOAuth2Authentication beginTokenFetchWithDelegate:didFinishSelector:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchTypeToken", referenced from:
      -[GTMOAuth2Authentication beginTokenFetchWithDelegate:didFinishSelector:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2FetchTypeUserInfo", referenced from:
      -[GTMOAuth2SignIn fetchGoogleUserInfo] in GTMOAuth2SignIn.o
  "_kGTMOAuth2FetcherKey", referenced from:
      -[GTMOAuth2Authentication notifyFetchIsRunning:fetcher:type:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2KeychainErrorDomain", referenced from:
      -[GTMOAuth2Keychain passwordForService:account:error:] in GTMOAuth2ViewControllerTouch.o
      -[GTMOAuth2Keychain removePasswordForService:account:error:] in GTMOAuth2ViewControllerTouch.o
      -[GTMOAuth2Keychain setPassword:forService:accessibility:account:error:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2NetworkFound", referenced from:
      -[GTMOAuth2SignIn reachabilityTarget:changedFlags:] in GTMOAuth2SignIn.o
  "_kGTMOAuth2NetworkLost", referenced from:
      -[GTMOAuth2SignIn reachabilityTimerFired:] in GTMOAuth2SignIn.o
  "_kGTMOAuth2RefreshTokenChanged", referenced from:
      -[GTMOAuth2Authentication setKeysForResponseDictionary:] in GTMOAuth2Authentication.o
  "_kGTMOAuth2ServiceProviderGoogle", referenced from:
      +[GTMOAuth2SignIn standardGoogleAuthenticationForScope:clientID:clientSecret:] in GTMOAuth2SignIn.o
      -[GTMOAuth2SignIn auth:finishedWithFetcher:error:] in GTMOAuth2SignIn.o
      +[GTMOAuth2SignIn revokeTokenForGoogleAuthentication:] in GTMOAuth2SignIn.o
      +[GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:clientID:clientSecret:] in GTMOAuth2ViewControllerTouch.o
      +[GTMOAuth2SignIn standardGoogleAuthenticationForScope:clientID:clientSecret:] in GTMOAuth2SignIn.o
      -[GTMOAuth2SignIn auth:finishedWithFetcher:error:] in GTMOAuth2SignIn.o
      +[GTMOAuth2SignIn revokeTokenForGoogleAuthentication:] in GTMOAuth2SignIn.o
      +[GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:clientID:clientSecret:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2UserSignedIn", referenced from:
      -[GTMOAuth2SignIn handleCallbackReached] in GTMOAuth2SignIn.o
  "_kGTMOAuth2WebViewCancelled", referenced from:
      -[GTMOAuth2ViewControllerTouch viewWillDisappear:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewFailed", referenced from:
      -[GTMOAuth2ViewControllerTouch webView:didFailLoadWithError:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewFinished", referenced from:
      -[GTMOAuth2ViewControllerTouch webViewDidFinishLoad:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewKey", referenced from:
      -[GTMOAuth2ViewControllerTouch notifyWithName:webView:kind:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewStartedLoading", referenced from:
      -[GTMOAuth2ViewControllerTouch notifyWithName:webView:kind:] in GTMOAuth2ViewControllerTouch.o
      -[GTMOAuth2ViewControllerTouch webViewDidStartLoad:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewStopKindKey", referenced from:
      -[GTMOAuth2ViewControllerTouch notifyWithName:webView:kind:] in GTMOAuth2ViewControllerTouch.o
  "_kGTMOAuth2WebViewStoppedLoading", referenced from:
      -[GTMOAuth2ViewControllerTouch viewWillDisappear:] in GTMOAuth2ViewControllerTouch.o
      -[GTMOAuth2ViewControllerTouch webViewDidFinishLoad:] in GTMOAuth2ViewControllerTouch.o
      -[GTMOAuth2ViewControllerTouch webView:didFailLoadWithError:] in GTMOAuth2ViewControllerTouch.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:39:42.930

我有同样的问题。我的问题与我正在创建无限循环导入的 Prefix.pch 文件有关。相反，我删除了使用 Google Drive API 的数据源，并且只导入了使用它的特定文件。菜鸟的错误，很难弄清楚，但要确保你也没有无限循环！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:30:30.670

The project target is compiled with but not linking to the sources for the GTM OAuth 2 controllers, [http://code.google.com/p/gtm-oauth2/](http://code.google.com/p/gtm-oauth2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:12:43.797

从文件中可以清楚地看出，编译器没有读取/获取目标文件。如果您的类别文件已添加到应用程序目标，请检查目标。

这种问题我经常遇到，希望能解决你的问题。

# asp.net-mvc-3 - ASP.NET MVC 3 应用程序将所有页面重定向到 /Account/Logon，我该如何停止它？

> ID：13706573
> 
> 赞同：0
> 
> 时间：2012-12-04T15:44:09.247
> 
> 标签：asp.net-mvc-3, deployment, iis-7

我正在尝试将 ASP.NET MVC 3 应用程序从我的开发机器部署到另一个工作站。ASP.NET MVC 的版本相同（3.0.20105），IIS 的版本相同（7.5.7600.16385），据我所知，.NET 框架的安装版本是相同的。但是，在我的开发机器上，只有命中`[Authorize]`属性的路由实际上重定向到`~/Account/Logon`，但在目标机器上，我尝试访问的*每个*文件都将我重定向到`~/Account/Logon`（即使我尝试访问图像或样式表资产）。

我已经看到了这个问题，但它并没有为我解决问题：

[IIS 上的 ASP.NET MVC3 和 Windows Auth 不断重定向到 /Account/Login](https://stackoverflow.com/questions/5009565/asp-net-mvc3-and-windows-auth-on-iis-keeps-redirecting-to-account-login)

我也尝试添加这些，但没有喜悦：

```
<add key="autoFormsAuthentication" value="false" />
<add key="enableSimpleMembership" value="false" /> 
```

还有其他想法吗？

如果有帮助，这里是 web.config - 它与我最初创建项目时几乎没有变化：

```
<system.web>
  <compilation debug="true" targetFramework="4.0">
    <assemblies>
      <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </assemblies>
  </compilation>

  <authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="2880" />
  </authentication>

  <pages>
    <namespaces>
      <add namespace="System.Web.Helpers" />
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="System.Web.WebPages"/>
    </namespaces>
  </pages>
</system.web>

<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

如果这有帮助，来自 Views 文件夹的 web.config，虽然这又是（据我所知）不变：

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="System.Data.Entity" />
    </namespaces>
  </pages>
</system.web.webPages.razor>

<appSettings>
  <add key="webpages:Enabled" value="false" />
</appSettings>

<system.web>
  <httpHandlers>
    <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
  </httpHandlers>

  <pages
      validateRequest="false"
      pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
      pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
      userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <controls>
      <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
    </controls>
  </pages>
</system.web>

<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />

  <handlers>
    <remove name="BlockViewHandler"/>
    <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
  </handlers>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:22:20.997

这最终归结为配置。我仍然不完全确定具体的权限差异是什么，但我必须更改应用程序池运行的身份才能使其正常工作。

# java - TextInputFile、TextOutputFile（带用户名，传入登录系统）

> ID：13706574
> 
> 赞同：0
> 
> 时间：2012-12-04T15:44:13.403
> 
> 标签：java, login, io

```
 int menuoptions;
    String userinput;
    String usercheck="";
    String username="user";
    String password;
    int intCounter=0;

    con.println("TYPING GAME\n");
    con.println("1\. Sign in");
    con.println("2\. Create a new account");
    menuoptions = con.readInt();
    con.clear();

    if(menuoptions==1){
        while(!username.equals(usercheck) && intCounter==0){
            con.println("Please type in your username.");
            userinput = con.readLine();
            con.clear();
            TextInputFile infile = new TextInputFile("logins.txt");
            while(infile.eof() == false && intCounter==0){
                usercheck=infile.readLine();
                infile.readLine();
                    if(username.equals(usercheck)){
                    intCounter=intCounter+1;
                    }
            }

            if(!userinput.equals(usercheck) && intCounter==0){
                con.println("No such username.");
                pause(2000);
                con.clear();
            }       
            else if(userinput.equals(usercheck)){
                intCounter = intCounter+1;
            }
        }

        con.println("What is your password?");

    }

    if(menuoptions==2){
        con.println("What will be your username?");
        username = con.readLine();
        con.clear();
        con.println("What will be your password?");
        password = con.readLine();
        con.clear();
        TextOutputFile outfile = new TextOutputFile("logins.txt", true);
        outfile.println(username);
        outfile.println(password);
    }

}
public static void pause (int intMS){
    try{Thread.sleep(intMS);
}catch(InterruptedException y){}} 
```

在 logins.txt 中，我在一行中有“voidturbulence”，在下一行中，我有“80”。当我输入“voidturbulence”时，它会跳转到“找不到用户名”，此时它应该要求输入密码。

但是，如果 userinput (voidturbulence) 等于 usercheck（第一行 [voidturbulence]），那么它不应该跳出循环并询问我的密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:01:09.473

**A.**代码

```
usercheck=infile.readLine();
infile.readLine(); 
```

在我看来很可疑。您可能有一个空行，一行包含用户名，以及由`infile`. 因此，`usercheck`可能永远不会收到您定位的用户名。（您从 . 中跳过每一行`infile`。）

**B.**代替

```
infile.eof() == false 
```

利用

```
!infile.eof () 
```

为了更好的可读性。否则，

```
(((infile.eof() == false) == true) == true) 
```

会被认为更具可读性，对吧？

**C.**代替

```
if (menuoptions == 1)
{
}
if (menuoptions == 2)
{
} 
```

利用

```
if (menuoptions == 1)
{
}
else if (menuoptions == 2)
{
} 
```

因为`menuoptions`当您刚刚发现它等于 1 时不能等于 2（并且在第一个 then 块中没有更改它）。

**D. 有什么`intCounter`用？**

*   您将其初始化为 0。
*   如果用户名等于 usercheck，则增加它。
*   只要 username 不等于 usercheck 并且 intCounter 等于 0，while 循环就会循环。

`username`因此，如果equals ，这两个条件都将被满足`usercheck`。

你可以消除`intCounter`.

这是一个坏变量名的好例子。" `intCounter`" 既不保证它是一个`int`，也不保证它包含任何东西的计数。您会发现，如果您尝试创建有用的名称，您将倾向于创建有用的代码。在您的示例中，您创建了一个无用的名称，以及操纵名称背后的值的无用代码，但实际上并没有完成任何事情。

**E. 你想完成什么？** 除了问题的标题外，没有任何规范说明您的代码试图涵盖的要求。最好指定你想要做什么，然后呈现代码，并指定你的问题。不要只是向我们抛出一些通用关键字，然后是代码。请 ;）

# javascript - jQuery isotope：锁定特定项目的位置

> ID：13706578
> 
> 赞同：2
> 
> 时间：2012-12-04T15:44:18.313
> 
> 标签：javascript, jquery, jquery-isotope

我正在使用 jQuery Isotope 来布置`<ol>`元素中包含的文件条目列表。我想阻止 Isotope 移动此列表开头的几个项目，例如指示父文件夹的项目。如果我使用同位素对这些元素进行排序，“父”条目将被移动，这非常烦人。

除了“调整”排序规则以为其分配特殊的排序索引之外，有什么方法可以告诉 Isotope 不要更改项目的位置？这是它现在的工作方式，但我正在寻找更清洁的解决方案。

如果需要，我可以提供一个简化的 jsFiddle 测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-17T13:08:30.713

这个问题是很久以前提出的，也许当时该功能不可用。

我只是偶然发现它并想补充说有一个“标记”功能，它告诉同位素围绕“标记”元素布置项目。

[http://isotope.metafizzy.co/methods.html#stamp](http://isotope.metafizzy.co/methods.html#stamp)

> 在布局中标记元素。Isotope 将围绕标记元素布置项目元素。

```
// jQuery
$grid.isotope( 'stamp', elements )
// vanilla JS
iso.stamp( elements ) 
```

# php - 根据 php 生成的结果在页面加载时隐藏和显示 div

> ID：13706579
> 
> 赞同：0
> 
> 时间：2012-12-04T15:44:18.240
> 
> 标签：php, jquery, html

我正在对 box.net 进行 API 调用。我想将响应中的数据显示到表格中。但有时响应是空的。那个时候我想向用户展示一些信息。

所以我的想法是`div`在我得到一些响应并禁用`div`包含消息时显示包含表。反之亦然。

我是 jquery 的新手。没有找到合适的例子。我从这些例子中尝试了一些东西，但没有成功。这是

```
if (sizeof($folder_entries) == 0) 
    {
        echo '<script>';
        echo '$("#message").show()';
        echo '$("#content").hide()';
        echo '</script>';
    }
    else 
    {
        echo '<script>';
        echo '$("#message").hide()';
        echo '$("#content").show()';
        echo '</script>'; 
} 
```

我怎么能得到那个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:55:41.023

似乎您需要简单的 javascript 或 jquery 来显示和隐藏 div

```
<script>
if (some condition..... )
      {
            document.getElementById("test").style.display  = '';       
      }
      else
      {
            document.getElementById("test").style.display  = 'none';
      }
 </script>

<div name="test" id="test"> 
```

jQuery：

```
$(document).ready(function() {
 $('#hideh1').click(function(){
   $('div.showhide,h1').hide();
 });
 $('#showh1').click(function(){
   $('div.showhide,h1').show();
 });
 $('#toggleh1').click(function(){
   $('div.showhide,h1').toggle();
 }); 
```

});

# asp.net - ASP.NET 4.0 和 SQL2008R2 中的 Kerberos 双跃点

> ID：13706580
> 
> 赞同：11
> 
> 时间：2012-12-04T15:44:21.863
> 
> 标签：asp.net, sql-server, windows, iis-7.5, kerberos

我有一个 ASP.NET 4.0 应用程序，我需要在其中将身份验证转发到数据库。出于此请求帮助的目的，我们将 Web 服务器称为“app1”，将数据库服务器称为“sql1”。

SQL2008R2 数据库服务在自定义域帐户“SqlServer”下作为命名实例“SQL2008R2”运行。服务器正在运行 Windows Server 2008 R2 企业版。我为此创建了一个 SPN...

```
setspn -a MSSQLSvc/sql1.mydomain.local:SQL2008R2 SqlServer 
```

ASP.NET 应用程序在集成管道模式下使用自定义域帐户“WebApplicationUser”在应用程序池下运行。它目前在我运行 Windows 7 Enterprise 的笔记本电脑上运行，但最终将托管在 Windows Server 2008 R2 标准版上。我为应用程序创建了 2 个 SPN（在我当前运行的 Windows 7 机器上）...

```
setspn -a http/app1 WebApplicationUser
setspn -a http/app1.mydomain.local WebApplicationUser 
```

在 Active Directory 用户和计算机中，我选择了“WebApplicationUser”帐户，并使用任何协议启用了对“MSSQLSvc/sql1.mydomain.local:SQL2008R2”的约束委派（我也尝试过仅使用 Kerbero）。

该应用程序在 IIS 7.5 中设置，身份验证设置为禁用 Anonymouse、Basic、Digest 和 Forms，同时启用“ASP.NET Impersonation”和“Windows”。Windows 身份验证关闭了“扩展保护”并启用了“内核模式身份验证”。提供者按顺序是“协商”和“NTLM”。

ASP.NET 应用程序使用 EF，连接字符串配置为使用集成安全...

```
<connectionStrings>
    <add name="MyContext"
             connectionString="metadata=res://*/Data.MyModel.csdl|res://*/Data.MyModel.ssdl|res://*/Data.MyModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=sql1.mydomain.local\sql2008r2;Initial Catalog=MyDatabase;Persist Security Info=false;Integrated Security=True;MultipleActiveResultSets=True&quot;"
             providerName="System.Data.EntityClient" />
</connectionStrings> 
```

我的 web 配置指定了 Windows 身份验证和模拟，因为我使用异步页面，所以我还启用了模拟策略流动......

```
<runtime>
    <alwaysFlowImpersonationPolicy enabled="true" />
</runtime>

<system.web>
    <authentication mode="Windows" />
    <identity impersonate="true" />
</system.web> 
```

如果我在本地登录（在“web1”上）并浏览到应用程序（使用 IE），这一切都有效 - 但这不涉及我试图解决的双跳。

如果我登录到另一台机器，然后使用 IE 浏览到应用程序，或者我使用 FireFox 从本地机器浏览，这不起作用 - 注意：FireFox 会提示我输入登录详细信息。与数据库的连接失败并显示“用户 'NT AUTHORITY\ANONYMOUS LOGON' 登录失败”

与许多文章不同（这可能是问题的一部分），我没有使用任何自定义代码来模拟用户。据我了解，模拟将通过上面的 web.config 设置全面应用于应用程序。我所做的就是打开连接，然后在完成连接后再次关闭它。

我显然错过了一个（或两个）步骤，但是查看了我能找到的所有文档（并且有很多），我仍然找不到那个步骤是什么。我能找到的 99% 的文档实际上都与 IIS6 和 Windows 2003 相关，这无济于事，但原则应该保持不变。

有没有人成功让这样的配置在 Windows 7 和/或 Windows Server 2008 上运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:34:45.827

双跳问题清单 {IIS 和 SQL Server}

[http://blogs.technet.com/b/taraj/archive/2009/01/29/checklist-for-double-hop-issues-iis-and-sql-server.aspx](http://blogs.technet.com/b/taraj/archive/2009/01/29/checklist-for-double-hop-issues-iis-and-sql-server.aspx)

[http://www.phishthis.com/2009/10/24/how-to-configure-ad-sql-and-iis-for-two-hop-kerberos-authentication-2/](http://www.phishthis.com/2009/10/24/how-to-configure-ad-sql-and-iis-for-two-hop-kerberos-authentication-2/)

[http://support.microsoft.com/kb/810572](http://support.microsoft.com/kb/810572)

[IIS 到 SQL Server kerberos 身份验证问题](https://stackoverflow.com/questions/4618552/iis-to-sql-server-kerberos-auth-issues)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T16:20:22.453

当您为 SQL Server 配置 SPN 时，我们发现我们需要包括 SQL Server 侦听的 PORT (1433)。

您应该下载并使用 Brian Booth 的 DelegConfig v2 工具来帮助您设置正确的配置设置。 [http://blogs.iis.net/brian-murphy-booth/archive/2009/04/22/delegconfig-v2-beta.aspx](http://blogs.iis.net/brian-murphy-booth/archive/2009/04/22/delegconfig-v2-beta.aspx)

它基本上会在整个过程中握住你的手。我们发现该工具非常宝贵。

# sql-server - sql server全文搜索排名

> ID：13706582
> 
> 赞同：0
> 
> 时间：2012-12-04T15:44:23.853
> 
> 标签：sql-server, full-text-search

我是全文搜索功能的新手。所以我需要一些帮助。

问题是是否可以在ms sql server 2008 r2的全文搜索中设置自定义排名？我在自定义排名下的理解：即我们将书籍存储在数据库中。如果 Book1 的书名和 Book2 的描述中满足搜索词，并且名称优先于描述，则 Book1 应显示为第一条记录。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:40:39.683

是的，可以自行推出，但不能保证大规模性能，因此请使用真实数据进行测试。这个想法是单独查询字段，添加您自己的自定义排名，然后组合结果。

```
 create table DoNotBlindlyRunMe.books 
 (
 id int not null identity primary key,
 Title varchar(100) not null,
 Author varchar(100) not null,
 [Description] varchar(500) not null
 )
 go
 CREATE FULLTEXT CATALOG [ft_books] WITH ACCENT_SENSITIVITY = ON
 GO
 --You need to edit this to match your PK index name!
 CREATE FULLTEXT INDEX ON [dbo].[books] KEY INDEX [PK__books__3213E83F3D5E1FD2] ON ([ft_books]) WITH (CHANGE_TRACKING AUTO)
 GO
 ALTER FULLTEXT INDEX ON [dbo].[books] ADD ([Author] LANGUAGE [English])
 GO
 ALTER FULLTEXT INDEX ON [dbo].[books] ADD ([Description] LANGUAGE [English])
 GO
 ALTER FULLTEXT INDEX ON [dbo].[books] ADD ([Title] LANGUAGE [English])
 GO
 ALTER FULLTEXT INDEX ON [dbo].[books] ENABLE
 GO

 insert into books (title, author, description)
 values ('The Cat in the Hat',     'Dr. Suess',     'An epic tale of a cat who teaches some valuable lessons.'),
 ('The Little Engine that Could',     'Watty Piper','A small train goes over a mountain.'),
 ('Favorite Nursery Rhymes by Mother Goose', 'Cat Stevens',     'Fairy tales from mother good, including peter piper.')

 --Rank Title highest, then Author, then description
 select [key], min([RANK]) [RANK] from (
      select [key], 100000000+ [RANK] RANK from containstable([books], [Title] , 'cat') union all
      select [key], 200000000+ [RANK] from containstable([books], [Author] , 'cat') union all
      select [key], 300000000+ [RANK] from containstable([books], [Description] , 'cat')
      ) ranked_containstable  GROUP by [key] order by MIN( [RANK] )

 --Or as a TVF
 go
 CREATE FUNCTION  DoNotBlindlyRunMe.RankedBookSearch (@ftQuery nvarchar(500))
 returns table return
 (
 select [key], min([RANK]) [RANK] from (
      select [key], 100000000+ [RANK] RANK from containstable([books], [Title] , @ftQuery) union all
      select [key], 200000000+ [RANK] from containstable([books], [Author] , @ftQuery) union all
      select [key], 300000000+ [RANK] from containstable([books], [Description] , @ftQuery)
      ) ranked_containstable  GROUP by [key]
 )
 go

 select * from dbo.RankedBookSearch(N'cat or stevens or piper') 
```

# mysql - MySQL插入选择计数

> ID：13706583
> 
> 赞同：1
> 
> 时间：2012-12-04T15:44:24.493
> 
> 标签：mysql, sql, pdo

我正在尝试插入这样的选择计数，因为它似乎不起作用。

```
INSERT INTO vote (uid, pid, poid, yes, no, total) 
VALUES (:uid,:pid,:poid,0,0,(SELECT COUNT(*) FROM member WHERE pid = :pid2 AND type > 0)) 
```

好吧，实际上这会起作用。我在其他地方犯了一个错误。这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:45:49.203

尝试这个：

```
INSERT INTO vote (uid, pid, poid, yes, no, total) 
SELECT :uid,:pid,:poid,0,0,COUNT(*) 
FROM member WHERE pid = :pid2 AND type > 0 
```

# asp.net-mvc-3 - Teamcity buildagent 系统日志警报

> ID：13706587
> 
> 赞同：1
> 
> 时间：2012-12-04T15:44:34.130
> 
> 标签：asp.net-mvc-3, msbuild, teamcity

我们目前有我们的开发服务器运行 Teamcity 7.1，并且一直在构建/发布没有问题。不过最近，我们注意到，每当在应用程序日志中生成错误时，不是从实时 .pdb (C:\inetpub\wwwroot[SiteName]\bin) 中获取错误，而是从构建代理工作位置获取错误（ c:\BuildAgent\work\92648d34566a49aa[站点名称]）。

```
Exception information: 
    Exception type: NotImplementedException 
    Exception message: Pew ^ Pew
    at MyProject.Controllers.ErrorController.ThrowError() in c:\BuildAgent\work\92648d34566a49aa\MyProject\Controllers\ErrorController.cs:line 38
    at lambda_method(Closure , ControllerBase , Object[] )
    at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
    at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) 
```

我检查了我们的构建步骤和参数（使用 MSBUILD），目前唯一指向构建代理的是 XUnit，但即使禁用了 XUnit 构建步骤，这个问题仍然存在。

我的想法是，它应该显示站点 URL 或实时位置，而不是显示构建代理位置。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:08:45.600

当具有调试信息的 .NET 程序集发生异常时，pdb 文件中的路径将是编译程序集的源文件的路径。在这种情况下，即 c:\BuildAgent\work\92648d34566a49aa....

# sql - 如何在 SQL Server 2008 中使用标准设计/创建规则表

> ID：13706589
> 
> 赞同：2
> 
> 时间：2012-12-04T15:44:34.587
> 
> 标签：sql, database, sql-server-2008, database-design

我没有太多使用 SQL Server 的经验，当涉及到比简单`INSERT/SELECT`语句更高级的东西时，我几乎迷失了方向。

我的任务是为同一数据库中的其他表创建包含“标准”（规则）的表。我的意思是我们有一个`Employee`表，一个`Salary`表等。我需要通过它的值在`Employee`表和`Salary`表之间制定一些规则，即如果`Employee = John`然后`Salary = 2000`制定1个标准，如果`Employee = Steve`然后`Salary = 3000`制定2个标准。

我创建了一个名为`Rules`：

```
RuleID    Criteria
--------------------------------------------------    
1         Employee = John and Salary = 2000
2         Employee = Steve and Salary = 3000** 
```

**我的问题**：如上所述是创建“标准”表的正确方法吗？（也许我有 50 种不同的条件......如果我创建具有上述所有条件的表格，这会是正确的方法吗？）请告知。

如果我不能以正确的方式解释或提出基本问题，我很抱歉。

我将不胜感激这方面的任何帮助。提前非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-23T20:29:16.130

我们已经创建了一个有效的规则引擎，可以通知给定规则的适当用户。我们的列如下：RuleID、RuleName、SequenceNum、IsActiveFlag、RuleRunDays、DataSteward、CarbonCopyRecipients、NotificationLevel、RuleSQL、NotificationSubject、NotificationText、HTMLFlag

关键是要有一个列是有效的可执行 SQL 语句（如上面的 RuleSQL）。以下是您可以在 RuleSQL 列中输入的值的示例：

SELECT ErrorMessage = '在职员工的薪水不能为空。' , e.EmployeeName , es.Salary , ... FROM EmployeeSalary es JOIN Employee e ON e.EmployeeId = es.EmployeeId WHERE es.Salary IS NULL AND e.Status = 'Active'

# ios - 如何更改 Cordova ChildBrowser 插件中的 URL（位置）？

> ID：13706593
> 
> 赞同：1
> 
> 时间：2012-12-04T15:44:53.537
> 
> 标签：ios, cordova, childbrowser

我的应用程序应该根据传入的通知更改 ChildBrowser 插件中显示的页面。一切正常，但我不知道如何以编程方式更改 ChildBrowser 中的位置——例如`window.plugins.childBrowser.setURL(newURL)`.

尝试`openWebPage()`第二次调用以异常结束：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <MainViewController: 0x2102ac20>.' 
```

尝试使用`window.location = newURL`打开具有指定 URL 的 Safari。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:16:20.340

我们使用 Angular.js 解决了这个问题

# ios - 谷歌分析实时功能不起作用

> ID：13706600
> 
> 赞同：4
> 
> 时间：2012-12-04T15:45:15.780
> 
> 标签：ios, google-analytics, google-analytics-api

我已经在我的代码中实现了 GA，如[https://developers.google.com/analytics/devguides/collection/ios/devguide](https://developers.google.com/analytics/devguides/collection/ios/devguide)所示。

我启动 GA 跟踪器： `[[GANTracker sharedTracker] startTrackerWithAccountID:gaAccountId dispatchPeriod:kDispatchPeriodSeconds delegate:self];`

GA 配置文件是为移动应用指定的，我正在使用适用于 iOS v1（旧版）的 Google Analytics SDK

问题是实时功能不起作用。它总是说有 0 个访客。你有什么建议可能是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:03:26.163

您必须将 trackPageView 添加到要跟踪的视图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:29:13.437

在当前 (2.0) sdk 中，您应该使用 sendView 而不是 trackPageView: [[[GAI sharedInstance] defaultTracker] sendView:@"my_view"];

或者您可以使用已经提到的 GAITrackedViewController。

但我注意到实时功能并不总是有效，我有时会遇到完全删除帐户和/或创建新帐户有时会解决此问题。它也可能只是在服务器端很忙，所以它可能已经在工作但延迟了。

有时我会使用工作帐户进行测试，以了解错误是否在我身上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-24T06:09:12.150

在**AppDElegate.m**文件中：

```
#import "AppDelegate.h"
#import "GAI.h"
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

   [GAI sharedInstance].trackUncaughtExceptions  = YES;

   [GAI sharedInstance].dispatchInterval = 1;

   [[[GAI sharedInstance] logger]setLogLevel:kGAILogLevelVerbose];

   id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"TrackingId"];

   [GAI sharedInstance].defaultTracker = tracker;

   return YES;
} 
```

在**ViewController.h**

```
#import <UIKit/UIKit.h>
#import "GAITrackedViewController.h"

@interface FirstViewController : GAITrackedViewController

@end 
```

在**ViewController.m中**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.screenName = @"RED Screen";
} 
```

**试试看**。这对我来说很好。我尝试了三个以上的应用程序。所有人都在实时工作。如果您**的应用帐户是新**帐户，那么您可能需要等待 24 小时或更长时间才能看到结果。有时无故显示实时数据需要时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-04T09:09:24.160

按照此步骤，您将获得实时结果

1.  在 Appdelegate 中写入 setdespatchinterval

`[GAI sharedInstance].dispatchInterval = 20;`

2.添加这样的跟踪浏览量。

> 从 GAITrackedViewController 扩展您的视图控制器

```
'@interface ActivityViewController : GAITrackedViewController          @end' 
```

> 实现 viewcontroller 的 viewdidload 方法

-(void)viewDidAppear:(BOOL)动画{

```
 self.screenName = @"Home Screen"; 
```

}

有关谷歌分析的工作原理，您可以访问此链接

[https://www.e-nor.com/blog/google-analytics/mobile-analytics-real-time-reporting-not-what-youd-expect](https://www.e-nor.com/blog/google-analytics/mobile-analytics-real-time-reporting-not-what-youd-expect)

希望这会对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-09T05:50:39.543

如果您确定要获取实时数据，那么请将您的时间间隔更改为 1。这对我来说是固定的。

```
 // Optional: configure GAI options.
    GAI *gai = [GAI sharedInstance];
    gai.dispatchInterval = 1;
    gai.trackUncaughtExceptions = YES;  // report uncaught exceptions
    #ifdef DEBUG
        gai.logger.logLevel = kGAILogLevelVerbose;  // remove before app releaseAppDelegate.m
    #endif 
```

# iphone - Objective-C 类别“无法识别的选择器”错误

> ID：13706601
> 
> 赞同：0
> 
> 时间：2012-12-04T15:45:18.423
> 
> 标签：iphone, ios6, uiimage, nsdata, objective-c-category

我制作了一个 UIImage Objective C 类别来容纳此功能：

```
 #import "UIImage+fixOrientation.h"

@implementation UIImage (fixOrientation)

- (UIImage *)fixOrientation
{

    // No-op if the orientation is already correct
    if (self.imageOrientation == UIImageOrientationUp) return self;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (self.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, self.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
    }

    switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,
                                             CGImageGetBitsPerComponent(self.CGImage), 0,
                                             CGImageGetColorSpace(self.CGImage),
                                             CGImageGetBitmapInfo(self.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (self.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
}

@end 
```

据我所知，我已经对其进行了改进，但由于使用原因，它不断出现此错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImage fixOrientation]: unrecognized selector sent to instance 0x1f0ce270' 
```

在我的 UIImage+fixOrientation.h 文件中，我的代码如下所示：

```
#import <UIKit/UIKit.h>

@interface UIImage (fixOrientation)

- (UIImage *)fixOrientation;

@end 
```

我的 UIImage+fixOrientation.m 文件包含我在开头发布的代码。我已经查看了项目目标构建部分中的*其他链接器标志*并提出了一些建议，但这没有帮助！老实说，我无法弄清楚为什么它找不到这个功能......

这也是我使用该功能的方式：

`NSData *imageData = UIImageJPEGRepresentation([[imageManager pickerImage] fixOrientation], 0.5);`

有谁知道为什么它可能会向我抛出这条消息？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T15:49:32.927

似乎您只是忘记将该类别添加到目标中。

请查看该屏幕截图并检查它是否对您来说看起来相同：

![在此处输入图像描述](../Images/888d6864f85887465e246996580ead19.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:54:20.460

您将需要添加`#import UIImage+fixOrientation.h`到您希望在其中使用该类别的任何文件中。或者，如果该方法通常对整个项目有帮助，您可以将它放在您的`*-Prefix.pch`文件中，以便在项目中的任何地方都可以使用它。

# jqgrid - JqG rid - 模态窗口的自定义主题

> ID：13706602
> 
> 赞同：0
> 
> 时间：2012-12-04T15:45:18.957
> 
> 标签：jqgrid

我的 jqgrid 表中有两种类型的列。每种类型在列名中都有自己的前缀。如何在编辑表单上对列字段进行分组？我应该使用哪个功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:17:25.240

可以使用[formoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#formoptions)`rowpos`的和`colpos`属性来指定字段在编辑表单中的位置。有关更多详细信息，请参阅[答案中](https://stackoverflow.com/a/10852741/315935)[的演示](http://www.ok-soft-gmbh.com/jqGrid/MulticolumnEdit.htm)。在[另一个答案](https://stackoverflow.com/a/10008082/315935)和[旧答案](https://stackoverflow.com/a/5745168/315935)[的演示](http://www.ok-soft-gmbh.com/jqGrid/CustomFormEdit1.htm)（请参阅添加表单）中，您会发现一些更高级的表单编辑自定义技术示例。

# javascript - ExtJS 4 - 从动画侦听器调用 javascript 类方法失败

> ID：13706607
> 
> 赞同：0
> 
> 时间：2012-12-04T15:45:30.157
> 
> 标签：javascript, class, extjs, scope

我有一个控制器在视图上运行一些动画。动画完成后，我需要`goToMainApp`在我的控制器上执行一个方法（称为 ）。我的动画完整侦听器被调用——那里没问题……但方法调用失败。这是控制器：

```
Ext.define('LoginApp.controller.LoginController', {
    extend : 'Ext.app.Controller',

    config : ....
    init : ......

    goToMainApp : function() {
        console.log('Redirecting to main application');
        do important stuff here....;
    },

    tryLogin : function() {
        this.getCredentialsForm().submit({
            success : function(form, action) {
                console.log('login successful');

                // fade out the login form element
                var form = Ext.ComponentQuery.query("loginview")[0];
                form.getEl().fadeOut({
                    duration : 500,

                        listeners : {
                            afteranimate : function() {
                                console.log('login successful');  // WORKS!!!
                                this.goToMainApp();  // FAILS!!!
                            }
                    }
                });

            },
            failure : .....
        });
    }
}); 
```

我认为我的问题是`this`我调用的`this.goToMainApp();`是动画对象而不是控制器......但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:27:14.603

只需将范围添加到您的侦听器：

```
scope: this 
```

来自文档的示例：

```
 tryLogin : function() {
        this.getCredentialsForm().submit({
            scope : this,    // Sets scope of the form handler to the controller
            success : function(form, action) {
                console.log('login successful');

                // fade out the login form element
                var form = Ext.ComponentQuery.query("loginview")[0];
                form.getEl().fadeOut({
                    duration : 500,

                        listeners : {
                            scope : this, // Now also sets it to controller
                            afteranimate : function() {
                                console.log('login successful');  // WORKS!!!
                                this.goToMainApp();  // FAILS!!!
                            }
                    }
                });

            },
            failure : .....
        }); 
```

# logging - Supervisord 的日志记录

> ID：13706610
> 
> 赞同：11
> 
> 时间：2012-12-04T15:45:44.860
> 
> 标签：logging, supervisord

我对 supervisord.conf 文件中的日志记录设置有疑问。我们工作的服务器目前正在运行 3.0b1 版本，我们在 [supervisord] 下将 logfile_backups 和 logfile_maxbytes 设置为某些值。这一切都很好。

不过，我的问题是，如果我在子进程下包含这些标志，它会覆盖顶部设置的内容吗？

这里有一些配置文件的片段来说明我在问什么......

```
[supervisord]
childlogdir=/var/log/supervisord/
logfile=/tmp/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB       ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10          ; (num of main logfile rotation backups;default 10)
loglevel=info               ; (log level;default info; others: debug,warn,trace)
pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
nodaemon=false              ; (start in foreground if true;default false)
minfds=1024                 ; (min. avail startup file descriptors;default 1024)
minprocs=200                ; (min. avail process descriptors;default 200)

[program:ParserClient]
command=/usr/local/bin/php /my/script/file.php --log-level=debug ;
process_name=%(program_name)s ;
numprocs=1                 ;
autostart=true             ;
autorestart=true           ;
startsecs=2                ;
logfile_maxbytes=10MB      ;
logfile_backups=1          ; 
```

总结一下：[ParserClient] 下建立的 logfile_maxbytes 和 logfile_backups 是否覆盖了 [supervisord] 下设置的标志？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T18:25:58.707

不*支持*`logfile_maxbytes`和for部分，并且 supervisord 在这些部分中完全忽略`logfile_backups`了`[program:x]`这些选项。

您可能打算改为指定`stdout_logfile_maxbytes`、`stderr_logfile_maxbytes`和`stdout_logfile_backups`/ 或`stderr_logfile_backups`选项。这些选项不考虑`[supervisord]`设置，您必须明确设置它们。

# c++ - 如何继承方法operator =，克隆和处置

> ID：13706614
> 
> 赞同：0
> 
> 时间：2012-12-04T15:45:52.300
> 
> 标签：c++, oop, inheritance, memory-management

我得到提示，对于具有作为指针的成员变量的类，我需要注意在分配时正确地对它们进行内存管理。以下方法旨在避免内存泄漏：

```
class SomeClass {

SomeClass& SomeClass::operator =(SomeClass& from) {
    // clone
    if (&from != this) {
        this->dispose();
        this->clone(from);
    }
    return *this;
}

void SomeClass::clone(const SomeClass& from) {
    this->array = from.array;
}

void SomeClass::dispose() {
    delete[] this->array;
}
}; 
```

假设到目前为止这是正确的，是否可以执行以下操作：

定义一个超类`Object`，它实现`operator=`并具有抽象方法`clone`和`dispose`. 任何具有指针成员的类都应该`Object`作为超类，以便它继承`operator=`，并提醒我需要实现`clone`and `dispose`。

*   这样的超类会是什么样子？
*   通过继承来做到这一点是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:51:32.220

不！不要这样做。

首先，声明你`operator=()`的

```
SomeClass& SomeClass::operator =(const SomeClass& from); 
```

注意`const`。在新的 C++11 标准中，还有另一种形式，它允许您在示例中显示的移动语义，但随后您将赋值运算符声明为

```
SomeClass& SomeClass::operator =(SomeClass&& from); 
```

注意`&&`。

有关此主题的深入讨论，请查找[规则三](https://stackoverflow.com/search?q=[c%2B%2B]+rule+of+three)或 C++11[规则五](https://stackoverflow.com/search?q=[c%2B%2B]+rule+of+five)

现在对于您的问题，赋值运算符不是继承的。当您没有在派生类中定义赋值运算符时，编译器将生成一个默认值并隐藏基类的赋值运算符。因此，您的基类的赋值运算符将永远不会被派生类的客户看到和使用。

有关赋值运算符的更多讨论，请参见例如[What is the copy-and-swap idiom？](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom).

# jquery - 为什么这个 jquery select 不起作用？

> ID：13706618
> 
> 赞同：-8
> 
> 时间：2012-12-04T15:46:11.007
> 
> 标签：jquery

比方说，例如，我有那个代码：

```
<form id="validate_form2">
    <ul>
        <li>
            <label for="nome">Nome:</label>
            <input id="nome" type="text">
        </li>
        <li>
            <label for="email">Email:</label>
            <input id="email" type="text">
        </li>
        <li>
            <label for="phone">Phone:</label>
            <input id="phone" type="text">
        </li>
    </ul>
</form> 
```

如何在“VALIDATE_FORM2”表单中更改 ID='email' 的 INPUT 类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:53:54.727

您可以使用 jquery 来执行此操作 - 必须将其转换回 dom 元素

```
$('#email')[0].type = 'password';​​​​​​
// or using .prop $('#email').prop('type','password');​​​​​​ 
```

[http://jsfiddle.net/68ZPh/](http://jsfiddle.net/68ZPh/)

或者只是普通的js

```
document.getElementById('email').type = 'password'; 
```

[http://jsfiddle.net/tHWwZ/](http://jsfiddle.net/tHWwZ/)

如评论中所述，这可能会导致 IE 出现问题。

来自 jQuery [.attr()](http://api.jquery.com/attr/)文档

> 注意：jQuery 禁止更改 or 元素的 type 属性，并且会在所有浏览器中抛出错误。这是因为不能在 Internet Explorer 中更改类型属性。

另一种方法是创建一个新输入来替换它

```
$('#email').replaceWith('<input type="password" id="email"/>'); 
```

[http://jsfiddle.net/uVXvk/](http://jsfiddle.net/uVXvk/)

# c# - 如何检查另一个文件是否在当前正在运行的应用程序的同一目录中？

> ID：13706619
> 
> 赞同：1
> 
> 时间：2012-12-04T15:46:14.367
> 
> 标签：c#

我有 2 个文件，第一个是当前正在运行的应用程序 (file1.exe)，第二个是任何类型的另一个文件 (file2.*)

如果第二个文件位于执行第一个文件的同一目录中，如何检查 file1.exe 的源代码？

我熟悉 File.Exists(path) 所以我认为这归结为找到一种方法，该方法将返回运行第一个文件的目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:52:00.663

```
Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

应该这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:49:44.080

尝试这个：

```
Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

[这是Assembly.GetExecutingAssembly()](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx)的 MSDN 文档的链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:59:51.503

```
using System.IO;
using System.Windows.Forms;
Path.GetDirectoryName(Application.ExecutablePath); 
```

或者

```
using System.IO;
using System.Reflection;
Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

这些方法中的第一种可能更有效。但是对于这样的工作谁在乎！:]

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:54:37.417

`File.Exists("file2.whatever");`默认情况下应该可以工作，也`Exists`可以接受相对路径。

唯一一次我发现这不准确是当您将不同的工作目录设置为您启动应用程序的位置时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T15:58:45.030

最好使用[GetEntryAssembly()](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getentryassembly.aspx)：

```
System.IO.Path.GetDirectoryName(
                System.Reflection.Assembly.GetEntryAssembly().Location); 
```

即使从另一个程序集调用，这也会返回您的 *.exe

# c# - Razor 不太聪明地从 html 中检测 C#

> ID：13706622
> 
> 赞同：1
> 
> 时间：2012-12-04T15:46:28.297
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

我需要在视图中打印此 html：

```
@foreach (string indices in Model.Indices)
{
    if (counter == 1)
    {
        Response.Write("<tr>");
    }      

    Response.Write("<td><span class='select'>@Html.CheckBox('nome',false)</span>)");  @indices Response.Write("</td>");

    if (counter > 4) 
    {
        Response.Write("</tr>"); 
    }                
} 
```

这将打印我要创建的 html 标记。

我知道我只能写 html 但 Razor 抱怨我没有关闭 foreach。

这是我的第一次尝试：

```
@foreach (string indices in Model.Indices)
{
    if (counter == 1)
    {
        <tr>
    }      

    <td><span class='select'>@Html.CheckBox('nome',false)</span> @indices </td>

    @if (counter > 4) 
    {
        </tr>
    }                
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:50:12.287

Razor 要求 HTML 标签格式正确；否则，它将不知道何时返回代码上下文。

您可以通过在该行前加上前缀来绕过此限制`@:`。

但是，执行此操作的正确方法是将您的集合分组为一组包含 4 个项目的集合，并使用嵌套的`foreach`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:51:02.577

如果我正确理解你想要什么（你想显示 Model.Indices 中的前四个元素吗？），你应该将你的 and 标记从你的 foreach 中移出。像这样的东西：

```
<tr>
@{var counter = 1;}
@foreach (string indice in indices)
    {
        if(counter>4)
        {break;}
        <td><span class='select'>@Html.CheckBox("nome", false)</span> @indice </td>
        counter++;
    }
</tr> 
```

# python - 并行多维优化

> ID：13706624
> 
> 赞同：12
> 
> 时间：2012-12-04T15:46:46.373
> 
> 标签：python, numpy, mathematical-optimization

我正在构建一个脚本，该脚本生成输入数据 [参数] 供另一个程序计算。我想优化结果数据。以前我一直在使用 numpy powell 优化。伪代码看起来像这样。

```
def value(param):
     run_program(param)
     #Parse output
     return value

scipy.optimize.fmin_powell(value,param) 
```

这很好用；但是，它非常慢，因为程序的每次迭代都可能需要数天才能运行。我想做的是粗粒度并行化这个。因此，它不会一次运行一次迭代，而是一次运行（参数数量）*2。例如：

```
Initial guess: param=[1,2,3,4,5]

#Modify guess by plus minus another matrix that is changeable at each iteration
jump=[1,1,1,1,1]
#Modify each variable plus/minus jump.
for num,a in enumerate(param):
    new_param1=param[:]
    new_param1[num]=new_param1[num]+jump[num]
    run_program(new_param1)
    new_param2=param[:]
    new_param2[num]=new_param2[num]-jump[num]
    run_program(new_param2)

#Wait until all programs are complete -> Parse Output
Output=[[value,param],...]
#Create new guess
#Repeat 
```

变量的数量可以从 3 到 12 不等，因此这样的事情可能会将代码从一年缩短到一周。所有变量都相互依赖，我只是从最初的猜测中寻找局部最小值。我已经开始使用 hessian 矩阵实现；但是，这涉及很多。有没有什么可以做到这一点，有没有更简单的方法，或者有什么建议可以开始？

所以主要问题如下：是否有一种算法可以先进行猜测，生成多个猜测，然后使用这些多个猜测来创建新的猜测，然后重复直到找到阈值。只有解析导数可用。什么是解决这个问题的好方法，是否已经建立了可以做到这一点的东西，还有其他选择吗？

感谢您的时间。

作为一个小更新，我确实通过计算每个维度的三个点的简单抛物线，然后使用最小值作为下一个猜测来完成这项工作。这似乎工作得很好，但不是最佳的。我仍在寻找其他选择。

当前最好的实现是并行化鲍威尔方法的内循环。

谢谢大家的意见。不幸的是，对于这个特定问题，似乎没有一个简明的答案。如果我开始实施一些可以做到这一点的东西，我会把它贴在这里；但是，由于该项目不是特别重要或需要紧迫的结果，我可能会满足于让它占用一个节点一段时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:00:34.543

我在大学时遇到了同样的问题，我们有一个 fortran 算法来计算基于一组变量的引擎的效率。当时我们使用 modeFRONTIER，如果我没记错的话，没有一个算法能够产生多个猜测。

正常的方法是有一个 DOE，并在那里有一些算法来生成 DOE 以最适合您的问题。之后，我们将并行运行单个 DOE 条目，并且算法将“观察”显示当前最佳设计的优化的发展。

旁注：如果您没有集群并且需要更多计算能力，HTCondor 可能会帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:55:38.753

估计梯度有两种方法，一种容易并行化，一种不能：

*   围绕单个点，例如 (f( x + h 方向[i] ) - f(x)) / h；这很容易并行到 Ndim
*   “行走”梯度：从 x [0]沿方向 e [0]走到x [1]，然后从 x [1]沿方向 e [1]走到x [2] ...；这是顺序的。

使用梯度的最小化器高度发达，功能强大，二次收敛（在足够平滑的函数上）。用户提供的梯度函数当然可以是一个并行梯度估计器。
一些最小化器使用“行走”梯度，其中包括 Powell 方法，请参阅[Numerical Recipes](http://apps.nrbook.com/empanel/index.html?pg=509) p。509.
所以我很困惑：你如何并行化它的内部循环？

我建议使用并行梯度估计器的 scipy [fmin_tnc](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_tnc.html) ，可能使用中心差异，而不是单边差异。
（Fwiw， [这](https://github.com/denis-bz/opt/tree/master/scopt/test) 比较了两个 10 维函数上的一些 scipy 无导数优化器；ymmv。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:24:01.360

您的目标函数的导数是否可用？如果是，您可以使用[梯度下降](http://en.wikipedia.org/wiki/Gradient_descent)（旧的、缓慢但可靠的）或[共轭梯度](http://en.wikipedia.org/wiki/Conjugate_gradient_method)。如果不是，您可以使用有限差分来近似导数，并且仍然使用这些方法。我认为一般来说，如果对导数使用有限差分近似，那么使用共轭梯度而不是牛顿法会好得多。

更现代的方法是[SPSA](http://en.wikipedia.org/wiki/Simultaneous_perturbation_stochastic_approximation)，它是一种随机方法，不需要导数。对于某些表现良好的问题，SPSA 需要对相同收敛速度的目标函数的评估比对共轭梯度的有限差分逼近要少得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T02:11:23.010

我认为您想要做的是使用 python 内置的线程功能。只要您的工作功能具有或多或少相同的运行时间，无论参数如何，它都会很有效。

在池中创建 8 个线程，运行 8 个函数实例，获得 8 个结果，运行优化算法以更改具有 8 个结果的参数，重复.... 利润？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T03:04:01.440

您可以在两个部分进行并行：1）并行计算单次迭代或 2）并行开始 N 初始猜测。

在 2) 上，您需要一个作业控制器来控制 N 个初始猜测发现线程。

请在您的程序中添加一个额外的输出：“下限”，表示当前输入参数的输出值不会低于此下限。

初始的N个猜测线程可以相互竞争；如果任何一个线程的下限高于现有线程的当前值，则您的作业控制器可以删除该线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T00:15:37.793

如果我没有弄错您的要求，那么您当时正试图最小化您的函数一个参数。

您可以通过创建一组单个参数的函数来获得它，其中对于每个函数，您冻结除一个之外的所有参数。

然后您继续循环优化每个变量并更新部分解决方案。

这种方法可以通过许多参数的大量函数来加速，其中能量景观不是太复杂（参数之间的依赖性不是太强）。

给定一个函数

```
energy(*args) -> value 
```

您创建猜测和函数：

```
guess = [1,1,1,1]
funcs = [ lambda x,i=i: energy( guess[:i]+[x]+guess[i+1:] ) for i in range(len(guess)) ] 
```

比你把它们放在一段时间循环中进行优化

```
while convergence_condition:
    for func in funcs:
        optimize fot func
        update the guess
    check for convergence 
```

这是简化最小化任务的一种非常简单但有效的方法。我真的不记得这个方法是如何被调用的，但是仔细查看关于最小化的维基百科条目应该可以解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-07T16:17:41.190

并行化局部优化器本质上是有限的：它们从单个初始点开始并尝试下坡工作，因此后面的点取决于先前评估的值。尽管如此，还是有一些途径可以添加适量的并行化。

*   正如另一个答案指出的那样，如果您需要使用有限差分方法评估您的导数，最好使用自适应步长，这可能需要多次函数评估，但每个变量的导数可能是独立的；您可能会获得两倍于问题维度数量的加速。如果您的处理器数量超出了您的了解，您可以使用需要更多（并行）评估的高阶准确梯度公式。
*   一些算法，在某些阶段，使用有限差分来估计 Hessian 矩阵；这需要大约一半的矩阵维数平方，并且所有这些都可以并行完成。

一些算法还可以以适度的算法成本使用更多的并行性。例如，准牛顿方法尝试构建 Hessian 矩阵的近似值，通常通过评估梯度来更新它。然后他们向最小值迈出一步，并评估一个新的梯度来更新 Hessian。如果您有足够的处理器，以便评估 Hessian 与评估一次函数一样快，您可能可以通过在每一步评估 Hessian 来改进这些。

就*实现*而言，恐怕你有点不走运。那里有许多聪明和/或经过良好测试的实现，但据我所知，它们都是单线程的。您最好的选择是使用需要梯度并并行计算您自己的算法。编写一个并行运行并为其数值导数选择合理步长的自适应算法并不难。

# jdbc - Java 中的“PL/SQL：语句被忽略”错误

> ID：13706625
> 
> 赞同：-2
> 
> 时间：2012-12-04T15:46:49.830
> 
> 标签：jdbc, plsqldeveloper, grant, database-permissions, java-stored-procedures

当我在 Java 文件中调用特定模式的 PL/SQL 时，它会被执行并检索结果。但是当我在不同模式的同一个 Java 文件中调用另一个 PLSQL 时，它会显示一条错误消息：

```
Message: `ORA-06550: line 1, column 7: PLS-00201: identifier 'TEST2' must be declared ORA-06550: line 1, column 7: PL/SQL: Statement ignored` 
```

示例：在 x 模式和 y 模式中有两个 proc 说 A 和 B

我在 test.java 文件下调用它：

```
CallableStatement csforST= connection.prepareCall("{ call A() }"); 
csforST.execute(); 
```

它工作正常。

但是当我打电话时：

```
CallableStatement cs= connection.prepareCall("{ call B() }"); 
cs.execute(); 
```

它显示一个错误，说 B 必须声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:55:57.540

非常感谢格里菲，你让我开心。是的，格里菲说的是对的。它很简单，但花了一天时间才找到它。因为我是调用存储过程的新手。

实际上会有一个用户名和密码用于建立连接。我使用的用户名没有另一个模式的权限。因此，与有权访问该模式的 userNaming 创建了一个新连接，然后调用另一个 proc。它现在工作正常:)。

我想这对像我这样的初学者很有用。

谢谢格里菲

# xsd - 支持 XSD 1.1 的 Java 库

> ID：13706629
> 
> 赞同：3
> 
> 时间：2012-12-04T15:47:03.697
> 
> 标签：xsd, xerces, xsd-validation, xsd-1.1, xerces2-j

是否有支持 XSD 1.1 的 java 库。我已经尝试找到它 2 天。我发现的唯一实现是与 JAXP 1.4 一起工作的[Xerces2 Java 2.11.0 (XML Schema 1.1) (Beta) 。](http://xerces.apache.org/mirrors.cgi#binary)这个测试版也不能很好地工作。XSD 1.1 中引入的“断言测试”等基本功能失败了。请帮我找到一个支持 XSD 1.1 进行验证的可靠 Java 库（如果有的话）。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:53:10.410

根据您的具体需求，[Saxon](http://www.saxonica.com/welcome/welcome.xml)可能会为您提供帮助。

您需要的只是验证吗？直接验证模式或 xml 文档？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T05:19:31.063

我一直在使用[xerces-j](http://xerces.apache.org/xerces-j/)，它对于具有许多断言和断言的非常复杂的 XSD 也能很好地工作。看起来你遇到的问题现在已经解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T15:24:56.573

到目前为止，使用以下 xerces 版本对我来说效果很好：

```
<dependency>
    <groupId>org.opengis.cite.xerces</groupId>
    <artifactId>xercesImpl-xsd11</artifactId>
    <version>2.12-beta-r1667115</version>
</dependency> 
```

我也想尝试 saxon-implementation，但我发现 saxon XSD1.1 验证仅在商业 saxon 产品中可用，并且您需要购买许可证才能使用它。

# neo4j - 带密码保护的 Neo4J 网络管理员

> ID：13706635
> 
> 赞同：8
> 
> 时间：2012-12-04T15:47:13.947
> 
> 标签：neo4j

是否可以开启密码保护`localhost:7474/webadmin`？如果我们将 htaccess 和 htpasswd 文件放在文件夹中会更好，但我找不到 webadmin 所在的文件夹。我相信如果我找到路径，我可以用密码保护它。谁知道文件夹路径？文档没有说明它。

附加信息：我使用的是 Ubuntu 12.04，neo4j 版本是 1.8。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T01:59:06.357

您可以在 Neo4j 前使用 apache 代理，[请参阅手册](http://docs.neo4j.org/chunked/milestone/security-server.html)

或查看提供基本身份验证的[身份验证扩展](https://github.com/neo4j-contrib/authentication-extension)之类的东西。

# c# - 如何在 fxcop 中识别方法

> ID：13706636
> 
> 赞同：1
> 
> 时间：2012-12-04T15:47:13.067
> 
> 标签：c#, fxcop, fxcopcmd

我正在尝试创建一个自定义 fxcop 规则，该规则检查目标程序集中的所有方法，它们的名称不是以大写字母开头。我在这方面做得非常成功，但有一个问题。该规则也会为“委托方法”引发错误，例如。我不想要的 btnOk_Click，有没有办法使用任何预定义的属性/方法来识别/过滤 fxcop 中的委托方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:51:37.103

一个想法是通过工具[NDepend](http://www.ndepend.com/)编写自定义代码规则（免责声明：我是该工具的开发人员之一）。

NDepend 专门设计用于通过 LINQ 查询轻松进行自定义代码规则编辑。以下[代码查询 LINQ](http://www.ndepend.com/Features.aspx#CQL) (CQLinq) 查询满足您的需求：

```
// <Name>Method name MUST start with CAPITAL</Name>
warnif count > 0 
from m in Application.Assemblies.WithName("TargetAssemblyName").ChildMethods()
where 
  !m.IsSpecialName &&         // Remove getter and setter
  !m.IsGeneratedByCompiler && // Discard methods generated by compiler
  !m.ParentType.IsDelegate &&
  !m.NameLike("^btn") &&      // Use regex here to discard btnOk_Click like method
  !char.IsUpper(m.SimpleName[0])
select m 
```

只需在 VS 的 NDepend 查询编辑器中编写此代码规则，即可立即获得反馈：

![NDepend 自定义代码规则](../Images/6ebddf327c44e56663d0047bd2447d76.png)

NDepend 代码规则可以[在 VS 中实时执行/验证](http://www.ndepend.com/Doc_VS_CQL.aspx)，或者可以在构建过程时执行并[在报告中验证](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)。

# c# - XML Schema Flattening 的库

> ID：13706649
> 
> 赞同：2
> 
> 时间：2012-12-04T15:48:04.143
> 
> 标签：c#, c++, xml, xsd, flat

有一组 N 个 XSD 文件可以相互引用（用`include/import/redefine tags`）。任务是将这组 N 个 XSD 文件转换为尽可能少的 M 个 XSD 文件。转换意味着在可能的地方插入包含的文件，解析引用等。

此功能在某些 UI XML 编辑器中成功运行。

是否有任何免费或商业库（本机或 .NET）可以让我执行 XML Schema 展平？或者也许有一些关于展平算法的参考资料？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:07:14.220

我认为你不需要图书馆。使用标准的 .NET 架构类，这是将具有一堆包含的 XSD 转换为单个 XSD 的代码：

```
static private void ResolveExternal(
  XmlSchema rootSchema, 
  XmlSchema curSchema,
  List<string> processed
)
{
  // Loop on all the includes
  foreach (XmlSchemaExternal external in curSchema.Includes) {
    // Avoid processing twice the same include file
    if (!processed.Contains(external.SchemaLocation)) {
      processed.Add(external.SchemaLocation);
      XmlSchema cur = external.Schema;
      // Recursive calls to handle includes inside the include
      ResolveExternal(rootSchema, cur, processed);
      // Move the items from the included schema to the root one
      foreach (XmlSchemaObject item in cur.Items) {
        rootSchema.Items.Add(item);
      }
    }
  }
  curSchema.Includes.Clear();
} // ResolveExternal

static public void ResolveExternal(XmlSchema schema)
{
  List<string> processed = new List<string>();
  ResolveExternal(schema, schema, processed);
} // ResolveExternal 
```

您应该能够以类似的方式处理导入和重新定义。

# php - PDO BindParam 每次都不会在 while 循环上绑定

> ID：13706650
> 
> 赞同：-2
> 
> 时间：2012-12-04T15:48:10.100
> 
> 标签：php, sql, pdo

我正在通过 PHP 中的 PDO 连接到 SQL Server DB。我的问题是为什么每次 while 循环运行时我都不能将参数绑定到命名位置标记？这是代码：

```
 public function search($search, $field)
{
    $c = new PDO("sqlsrv:Server=localhost;Database=$this->_db", $this->_user, $this->_pass);

    $sql = "
    SELECT Title 
    FROM Table WHERE 1=1"; 
    //form array of search terms stored in serachArray variable
    $searchArray = explode(' ', $search );
    //count objects in array
    $num_search_terms = count( $searchArray );
    $i = 0;//for search term array (starts at 0)
    $x = 1;//for parameter incrementin (starts at 1)
    while( $i <= ( $num_search_terms -1 ) )
    {
        $sql .= "
        AND $field LIKE :s".$x;
        $stmt = $c->prepare( $sql );

        $currTerm = "%" . $searchArray[ $i ] . "%";

        $stmt->bindParam( ':s'.$x, $currTerm );         

        $i++;
        $x++;
    }

    $stmt->execute();

    while ( $row = $stmt->fetch( PDO::FETCH_OBJ ) )
    {
       print $row->Title;
    }
} 
```

结果集返回空，没有错误。这次搜索肯定会返回数据。当我只输入一个搜索词时，它工作正常。但是，当我输入多个时，我总是没有得到任何结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:53:36.777

您正在循环内准备每个不完整的查询片段。您应该只准备*一次*，并且应该准备*完整*的SQL 查询。

**更新：**不确定您在哪里查找文档，但[bindParam()](http://php.net/manual/en/pdostatement.bindparam.php)手册页有几个示例：

```
<?php
/* Execute a prepared statement by binding PHP variables */
$calories = 150;
$colour = 'red';
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour');
$sth->bindParam(':calories', $calories, PDO::PARAM_INT);
$sth->bindParam(':colour', $colour, PDO::PARAM_STR, 12);
$sth->execute();
?> 
```

如果您在循环内执行此操作，您将不会获得任何有用的信息：

```
$stmt->bindParam( ':s'.$x, $currTerm ); 
```

...但是您之前删除并创建了一个新`$stmt`对象。

# c# - 从一个人的姓名部分组成全名的“逻辑”放置在哪里（在 MVC 应用程序中）

> ID：13706653
> 
> 赞同：2
> 
> 时间：2012-12-04T15:48:13.440
> 
> 标签：c#, oop, architecture, naming-conventions

我有 3 个视图模型，它们都必须显示一个人的全名。

现在我当然可以在所有 3 个视图模型中复制该`GetFullName()`功能，但这并不那么枯燥。

但是我在哪里留下计算人员全名的逻辑呢？

*   我是否使用四个字段创建一个接口（我们计算四个字段的全名）并在所有 3 个视图模型中实现该接口并创建一个接受该接口并返回一个字符串的“PersonH​​elper”类？
*   创建自己的类是否逻辑太少？
*   我是否为其中包含逻辑的 3 个视图模型创建了一个基类？（但是如果我想在 API 函数中使用该函数呢？）
*   Helper 是否可以称为 PersonService，因为在过去它是放置在 Person 类本身中的逻辑，但现在我们将数据类与行为分开（所以也许是“PersonBehaviour”？）

这么简单的事情，有这么多的方法来实现它。

我们对此有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:52:09.673

我的第一个想法是询问您的视图模型是直接存储用户数据，还是公开包含用户名的类。如果你不是，我可能会将用户名数据重新分解到它自己的类中（连同其他用户数据，如果这对你的应用程序有意义，那么将 FormattedFullName 属性放在该类中。

```
public class ViewModel1()
{
    public PersonData myPerson {get; set;}
    // other properties
}

public class ViewModel2()
{
    public PersonData myPerson {get; set;}
    // other properties
}

public class PersonData()
{
    public string forename { get; set; }
    public string surname { get; set; }
    public string FormattedFullName 
    { 
        get 
        { 
            return string.Format("{0} {1}", forename, surname); 
        } 
    }
    // other properties
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:01:39.883

我们有一个“格式化程序”类，它处理格式化某些数据，例如在多行或单行上显示地址行。

我们这样称呼它：`Formatter.FormatAddress(address)`其中地址是一个模型类实例。您可以使用您的全名轻松应用此类逻辑。

* * *

另一种选择是编写自己的 HtmlHelperExtensions 以便您可以执行`Html.FormatFullName(Model.FirstName, Model.LastName)`.

```
public static IHtmlString FormatFullName(this HtmlHelper helper, params string[] names)
{
    return new MvcHtmlString(helper.Encode(string.Join(" ", names)));
} 
```

将 html 添加到 HtmlHelperExtensions 也不是不好的做法，所以恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:51:46.133

在所有三个 ViewModel 的 BaseClass 中怎么样

```
public string FirstName {get;set;}
public string LastName {get;set;}
public string FullName {get{return String.Format("{0} {1}",FirstName,LastName);}} 
```

使用基类可以让您最大限度地减少所有三个 ViewModel 的代码重复。这也是一个简单的解决方案，易于理解（由未来的开发人员）并且可以快速更改。API 有什么东西会限制这种功能性吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:17:21.633

我会让我的 3 个视图模型实现一个通用接口 IFormattablePerson 具有用于计算全名的字段并依赖于 String.Format

这允许通过在自定义格式化程序中添加新的字符串格式来非常方便地扩展显示。

这将导致类似：

视图模型必须实现的通用接口：

```
public interface IFormattablePerson: IFormattable
{
string FirstName{get;set;}
string LastName{get;set;}
} 
```

在每个视图模型中，相同的 ToString() 实现永远不会改变

```
public string ToString(string format, IFormatProvider formatProvider)
{
    if (formatProvider == null)
        return ToString(format, new FormatProviderIFormattablePerson());
    else
        return (formatProvider.GetFormat(typeof(IFormattablePerson)) as ICustomFormatter).Format(format, this, formatProvider);
} 
```

这将 FormatProvider 和 CustomFormatter 用于 IFormattablePerson。然后你只需要在 CustomFormatter 中添加和实现新的格式

```
public class FormatProviderIFormattablePerson : IFormatProvider
{
    // String.Format calls this method to get an instance of an
    // ICustomFormatter to handle the formatting.
    public object GetFormat(Type service)
    {
        if (service == typeof(IFormattablePerson))
        {
            return new CustomFormatterIFormattablePerson();
        }
        else
        {
            return null;
        }
    }
}

public class CustomFormatterIFormattablePerson : ICustomFormatter
{
    public string Format(string format, object arg, IFormatProvider provider)
    {
        if (string.IsNullOrEmpty(format))
            format = "full";

        if (arg is IFormattablePerson)
        {
            IFormattablePerson t = (IFormattablePerson) arg;
            switch (format)
            {
                case "f": 
                    return t.FirstName;

                case "l": 
                    return t.LastName;

                case "full": 
                default:
                    return string.Format("{0} {1}",
                        t.FirstName,
                        t.LastName).Trim();
            }                   
        }
        if (arg is IFormattable)
            return string.Format(String.Format("{{0:{0}}}",format), arg);
        else
            return arg.ToString();
    }
} 
```

# python - 奇怪的 buildbot python 行为

> ID：13706654
> 
> 赞同：1
> 
> 时间：2012-12-04T15:48:18.503
> 
> 标签：python, buildbot

编辑一些解释： buildbot 是 python 中的一个连续集成系统，可以通过 Web 界面控制。在此 Web 界面中，您有一个“瀑布”页面，您可以在其中选择特定构建器并使用“强制构建”按钮触发构建。

网址：[http ://trac.buildbot.net/](http://trac.buildbot.net/)

背景：我们有一组构建器，它们是连续的（每隔几分钟检查一次是否发生更改，如果是，则重新构建）或每晚（每晚构建）。到目前为止，我们的系统对于*每个*项目只有*一个*特定的企业构建器。这是通过强制每个项目必须在一个恒定的 URL 下找到的，例如

 *```
https://myrepositioryurl/{$projectname}. 
```

然后当一个项目需要企业构建时，您需要选择一个项目 XYZ 并且构建机器人假定该项目需要在

```
https://myrepositioryurl/{$projectname}. 
```

这是非常严格的，我想重新配置项目可以位于不同 URL 下的 buildbot。在由“buildbot start master”启动的构建器的设置过程中，我们项目的配置文件被读取并存储在 ConfigParser 对象中。在下面的源代码中，我想使用的 clzoptions var 和我的 URL 应该是

```
https://mytesturl/XYZ. 
```

对于项目 XYZ。我现在在测试项目的“svnBaseURL”条目下添加了不同的 URL。现在，我在创建构建器的 python 类中遇到了一些我不太了解的东西。首先是来源：

```
import os
import logging

from xcodebuild import xcodebuild
from projects import Projects

from buildbot.config import BuilderConfig
from buildbot.process.factory import BuildFactory
from buildbot.steps.source import SVN
from buildbot.steps.shell import ShellCommand, WithProperties
from buildbot.process.properties import Property

class builders(object):
    clzoptions = Projects().options

    def __init__(self):
        aProject = Projects()
        self.options = aProject.options

    def enterprise_checkout_url(self, curProjectName):
        return curProjectName

    def create_enterprise_builder(self):
        factory = BuildFactory()
        factory.addStep(ShellCommand(name='svn checkout',
                                     haltOnFailure=True,
                                     description='svn checkout',
                                     descriptionDone='svn checkout done',
                                     command=['svn', 'checkout', '--username', 'admin', self.enterprise_checkout_url(WithProperties('%(project)s')), '.']))

        builderConfig = BuilderConfig(name="foobuilder",
                                      category="OnDemand",
                                      slavenames=[ "buildslave01" ],
                                      factory=factory)
        return builderConfig

    def get_all_builders(self):
        builders = []

        builders.append(self.create_enterprise_builder())

        return builders 
```

我已经把它归结为核心问题，里面还有更多的建设者。关键函数是self.enterprise_checkout_url(WithProperties('%(project)s'))。

如果我在瀑布中使用项目名称“XYZ”调用该构建器，我会得到结果

```
svn checkout --username admin XYZ . 
```

对于 ShellCommand。虽然这很荒谬，因为它不是 URL，但我看到参数 curProjectName 的计算结果为“XYZ”。到目前为止很容易，对吧？现在让我们更改该功能...

```
def enterprise_checkout_url(self, curProjectName):
  return builders.clzoptions.get("XYZ", "svnBaseURL")) 
```

并得到

```
svn checkout --username admin https://mytesturl/XYZ . 
```

这几乎是我需要的东西，

```
https://mytesturl/XYZ 
```

是正确的道路。但关键是不变的，我需要它是可变的。但至少我知道字典存在并且有正确的 XYZ 条目。

现在这个问题我根本不明白。

让我们现在试试

```
def enterprise_checkout_url(self, curProjectName):
      return builders.clzoptions.get(curProjectName, "svnBaseURL")) 
```

哎呀，他没有建立

```
ConfigParser.NoSectionError: No section: <buildbot.process.properties.WithProperties instance at 0x1073739e0> 
```

好的，在编译阶段 curProjectName 可能没有设置，怎么样：

```
def enterprise_checkout_url(self, curProjectName):
    projects = builders.clzoptions.sections()
    for project in projects:
      if project == curProjectName:
        return builders.clzoptions.get(project, "svnBaseURL" ) 
```

编译。我正在获取我的所有项目，测试 curProjectName 是否正确，然后返回我的 svnBaseURL，项目密钥应该等于 curProjectName。但我得到：

```
<type 'exceptions.TypeError'>: 'NoneType' object is not iterable 
```

到你了。我曾尝试在 curProjectName 上使用 str()、repr()、eval()，但无济于事。我无法同时访问现有字典和 curProjectName。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:03:15.380

这对你有帮助吗？

```
class builders(object):

    builders = []
    print 'id of buiders just created ==',id(builders)

    def __init__(self,x):
        self.the = x

    def enterprise_checkout_url(self, curProjectName):
        return curProjectName

    def create_enterprise_builder(self,yy):
        builderConfig = dict(descriptionDone='-SVN-',
                             command=yy)
        return builderConfig

    def get_all_builders(self):
        print 'id of builders inside get_all_builders ==',id(builders)
        print 'id of builders.builders inside get_all_builders ==',id(builders.builders)

        builders.builders.append(self.create_enterprise_builder((self.the)))

        return builders.builders

print 'id of class builders ==',id(builders)
print '\n################################\n'

b = builders('BOF')
print b.get_all_builders()

print '\n=================================\n'

b2 = builders('MOTO')
print b2.get_all_builders() 
```

结果

```
id of buiders just created == 18709040
id of class builders == 13819408

################################

id of builders inside get_all_builders == 13819408
id of builders.builders inside get_all_builders == 18709040
[{'descriptionDone': '-SVN-', 'command': 'BOF'}]

=================================

id of builders inside get_all_builders == 13819408
id of builders.builders inside get_all_builders == 18709040
[{'descriptionDone': '-SVN-', 'command': 'BOF'}, {'descriptionDone': '-SVN-', 'command': 'MOTO'}] 
```

编辑

我的代码有问题。
如果指令`print b2.get_all_builders()`被执行两次，结果是

```
id of buiders just created == 18709040
id of class builders == 13819408

################################

id of builders inside get_all_builders == 13819408
id of builders.builders inside get_all_builders == 18709040
[{'descriptionDone': '-SVN-', 'command': 'BOF'}]

=================================

id of builders inside get_all_builders == 13819408
id of builders.builders inside get_all_builders == 18709040
[{'descriptionDone': '-SVN-', 'command': 'BOF'}, {'descriptionDone': '-SVN-', 'command': 'MOTO'}]

id of builders inside get_all_builders == 13819408
id of builders.builders inside get_all_builders == 18709040
[{'descriptionDone': '-SVN-', 'command': 'BOF'}, {'descriptionDone': '-SVN-', 'command': 'MOTO'}, {'descriptionDone': '-SVN-', 'command': 'MOTO'}] 
```

其中一本词典出现了两次。

由于我不太了解您的问题，并且不确定您到底想要什么，因此我不知道如何纠正*

# ios - 如何在屏幕外生成地图然后渲染到图像

> ID：13706655
> 
> 赞同：2
> 
> 时间：2012-12-04T15:48:20.063
> 
> 标签：ios, mapkit

我想在 iOS SDK 中找到一种方法来生成带有屏幕外叠加层的地图，然后用它生成 UIImage 以便生成带有地图的电子邮件撰写屏幕。

我尝试在屏幕上使用地图视图并生成叠加层，然后捕获图像，但这不起作用，它似乎在应用叠加层之前抓取了地图，所以我的地图没有使用叠加层重新绘制直到视图被告知重绘。

我还尝试仅在代码中创建一个地图视图并捕获它，但我得到的只是一张空白地图，我再次认为它不会在我捕获它的图像之前呈现。

有任何想法吗？

# regex - Nginx 位置匹配中的变量捕获

> ID：13706658
> 
> 赞同：46
> 
> 时间：2012-12-04T15:48:28.277
> 
> 标签：regex, nginx

假设我有一个这样的 URL: `www.example.com/a/b/sth`，我在 Nginx 配置中编写了一个 location 块：

```
location ^~ /a/b/(?<myvar>[a-zA-Z]+) {
    # use variable $myvar here
    if ($myvar = "sth") { ... }
} 
```

我希望能够使用从块*内*`$myvar`的 URL 捕获的变量，但是，Nginx 一直告诉我这个变量没有定义并且不会启动：

 *```
nginx: [emerg] unknown "myvar" variable 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-05-08T02:04:41.443

老线程，但我有同样的问题......

我认为该错误与安装的 PCRE 版本无关

如果您的位置标签不是以 ~ 开头，NGINX 不会解析您的正则表达式，您需要使用类似这样的东西

```
location ~ ^/a/b/(?<myvar>[a-zA-Z]+) {
   # use variable $myvar here
   if ($myvar = "sth") { ... }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-06T08:04:11.763

正如 Stefano Fratini 在他的回答中正确指出的那样，您的`location`声明有一个错误：对于正则表达式，您应该`~`单独使用，而不是`^~`.

* * *

命名捕获是 PCRE 的一个特性，它们在不同的版本中有不同的语法。对于您使用的语法，`?<var>`您必须至少具有 PCRE 7.0。

请参阅[官方 Nginx 文档中的详细信息](http://nginx.org/en/docs/http/server_names.html#regex_names)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-13T09:53:47.837

^~ 不是正则表达式匹配，它代表最长匹配前缀。您应该改用 ~ 或 ~* （不区分大小写）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T07:34:24.477

未经测试，但使用 PCRE 将块捕获到命名变量中的正确方法是 (?P)。所以你的例子错过了P。*

# eclipse - git 致命：尝试 git rm --cached 时

> ID：13706664
> 
> 赞同：1
> 
> 时间：2012-12-04T15:49:17.003
> 
> 标签：eclipse, git

嗨当尝试在分支之间切换时，我有一个错误：

```
error: The following untracked working tree files would be overwritten by checkout:
        Project/.project
Please move or remove them before you can switch branches. 
```

但是当我尝试使用

```
git rm --cached  Project/.project 
```

我收到一个错误：

```
fatal: pathspec 'Project/.project' did not match any files 
```

请建议一轮工作，任何可能移动某些文件的方式是一些分支并增加了收益，请解释这两个错误。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:42:48.767

对于解决方法，`Projects/.project`如果需要保留它，可以将其删除或保存在存储库之外的某个位置。

正在发生的事情是您当前分支上的当前工作树有此文件，但您没有跟踪它（也许它`.gitignored`在此之上）。但是，在您要签出的分支中，有人在过去的某个时间点`git add`编辑并提交了该文件。由于您当前的副本未被 跟踪`git`，`git`因此拒绝用跟踪的副本覆盖它，并且也拒绝`git rm --cached`它，因为它对它一无所知。这通常是一件好事。但是，您可能需要评估是否需要跟踪此文件，如果不需要，则可能需要从其他分支中清除它...

# arrays - 数组列表中的错误

> ID：13706666
> 
> 赞同：0
> 
> 时间：2012-12-04T15:49:19.307
> 
> 标签：arrays, object, loops, arraylist, iterator

```
 testSed4 = sedenia4.get(0);

    while (it8.hasNext()) {
        tempRozdiel = it8.next();
        tempSed4 = it7.next();

        if (testSed4.equals(tempSed4)) {
            testSed4 = tempSed4;
            casy.add(tempRozdiel);
        } else {
            casy.add(hodnota);
            testSed4 = tempSed4;
        }
    }
    for (int j = 0; j < casy.size(); j++) {
        System.out.println(casy.get(j) + " casy");
    } 
```

为什么我有错误： tempRozdiel = it8.next();

这段代码有什么不好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:55:14.983

发生异常是因为您正在修改它在迭代循环体内迭代的集合。

这就是你`ConcurrentModificationException`从`iterator.next()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:54:21.857

```
while (it8.hasNext()) {
    tempRozdiel = it8.next();
    tempSed4 = it7.next(); 
```

您只检查是否`it8`有下一个元素，而不是 for `it7`。

此外，您不能在此对象上使用`casy.add()`if`it7`或`it8`are 迭代器。

# ruby-on-rails - 我应该将视图字符串放入 yaml 文件中以便于测试吗？

> ID：13706670
> 
> 赞同：1
> 
> 时间：2012-12-04T15:49:28.247
> 
> 标签：ruby-on-rails, testing, internationalization, integration-testing

对于集成测试，我会检查页面内容，以确保用户能看到我想要的。

例如：

```
it "shows list of articles" do
    get :articles
    response.body.should have_content("Articles found:")
end 
```

在文章视图的某处，有这一行：

```
<h1>Articles found:</h1> 
```

我想摆脱字符串的重复性，使代码更容易维护和测试更可靠。我正在考虑将这些字符串放入 config/locales/en.yml 然后做这样的事情

```
it "shows list of articles" do
    get :articles
    response.body.should have_content(I18n.t('title'))
end 
```

在视图中：

```
<h1><%=t :title %></h1> 
```

从长远来看，这是否有意义，还是有更好/标准化的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:06:30.230

我不会，国际化的字符串是供人类阅读的。

作为替代方案，看看您是否可以以一种使通过选择断言更具确定性的方式来构建文档。

```
it "shows list of articles" do
    get :articles
    assert_select "h1.articles-title"
end 
```

并在视图中。

```
<h1 class="articles-title"><%=t :title %></h1> 
```

虽然我知道您的原始测试用例断言存在正确的标题，但我认为像这样的一般集成测试的最大好处是存在*title*。

# javascript - JS：通过id调用元素

> ID：13706679
> 
> 赞同：-1
> 
> 时间：2012-12-04T15:49:52.020
> 
> 标签：javascript, jquery

我对JS不熟悉，所以请在这里帮助我

我以前曾经这样调用元素：

```
$(.ddlPage).change(); 
```

现在我想用字符串变量替换“ddlPage”。如何用变量调用它？

```
$(.elemID).change(); (is obviously wrong) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:52:50.990

首先，将一个字符串参数传递给 jQuery。在您的情况下（如果不是拼写错误），您在其中传递了一些变量，这在某些情况下有效，但一般情况下无效。

然后只需构建您需要的选择器，例如：

```
var elemId = 'myId'; 
$( '#' + elemID ).change(); 
```

或搜索`class`：

```
var elemClass = 'myClass'; 
$( '.' + elemClass ).change(); 
```

等等。只需构建一个包含您需要的选择器的字符串并将其传递给 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:51:44.320

使用`id`选择器

```
$("#ddlPage").change() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:54:12.933

我认为你真正需要的是对 jQuery 选择器有一个基本的了解。

在此处查看材料：http: [//www.w3schools.com/jquery/jquery_selectors.asp](http://www.w3schools.com/jquery/jquery_selectors.asp)

# android - Android：当我的应用程序上的“adb restore”完成时如何处理？

> ID：13706680
> 
> 赞同：0
> 
> 时间：2012-12-04T15:49:56.353
> 
> 标签：android

我的应用程序是否可以通过`adb backup`和处理备份和恢复完成时的事件`adb restore`？我想在恢复完成后检查我的文件的完整性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:00:05.340

并不真地。这是由系统服务运行的，您不会收到有关它的通知。如果文件的完整性对您很重要，您可能应该在每次启动时或定期检查。

# azure - 我可以在 VS2012 中使用的最新 Windows Azure 库是什么？

> ID：13706681
> 
> 赞同：1
> 
> 时间：2012-12-04T15:50:02.450
> 
> 标签：azure, azure-storage

我很困扰。我有 1.6 库，然后升级到 1.7。

现在我看到以下内容：

```
Windows Azure SDK for Windows 8 and .NET 4(2.0.0.0) 
```

这是最新的库吗？它仅适用于 Windows 8 吗？对不起，但不是很清楚。当我尝试下载它时，它会将我带到一个带有下载链接但没有应用程序的网页。当我尝试寻求帮助时，它会将我指向stackoverflow。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:17:57.767

```
Windows Azure SDK for Windows 8 and .NET 4 (2.0.0.0) 
```

is probably

```
October 2012 Release (Version 1.8) 
```

which is the latest release as of now (2012-12-04).

The version scheme changed a bit (e.g. storage client dll is now 2.0 because of breaking changes) while other parts remain unchanged/compatible (1.7/1.8) (see [Windows Azure SDK and Tools](http://msdn.microsoft.com/en-us/library/windowsazure/gg441573.aspx)).

The azure SDKs/client libraries should not depend on Windows 8.

You can find all downloads at [windowsazure.com](https://www.windowsazure.com/en-us/develop/downloads/)

# interface - 获取设备接口 ID

> ID：13706684
> 
> 赞同：2
> 
> 时间：2012-12-04T15:50:18.570
> 
> 标签：interface, device

我正在根据这个进行一个项目：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff540174 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx)

先决条件之一是安装具有生成的（我认为）设备接口 ID 的驱动程序，但是如果我不想安装新驱动程序，而是想使用现有驱动程序，该怎么办。例如，如何/在哪里可以检查 USB 设备的设备接口 ID？

# c# - WCF 自托管服务。系统要求

> ID：13706685
> 
> 赞同：0
> 
> 时间：2012-12-04T15:50:34.000
> 
> 标签：c#, wcf

WCF 自托管服务运行所需的最低系统要求是什么？我的客户端应用程序需要与服务器进行 2 路通信，它将部署在具有操作系统 XP、Vista、Windows 7 的系统中。是否必须在目标 PC 中安装 IIS 才能使自托管服务正常工作，或者唯一的要求是系统中是否需要 .net 4.0？

我的应用程序将部署在数千个可能具有各种配置的系统上。在这种情况下，自托管服务是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:57:01.240

从[这个示例](http://wcftutorial.net/WCF-Self-Hosting.aspx)中可以看出，ISS（或其他 HTTP 服务器）不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T17:10:24.237

正如这句话所说，“WCF 自托管服务”不需要 IIS，但它需要 Windows 功能。WCF 是遗留 marshall 类对象的演变。今天，人们使用 REST 服务通过 TOKEN 发送数据。WCF 专注于桌面应用程序。

# forms - 设计我的实体，以便我可以将实体字段用于特定用例

> ID：13706689
> 
> 赞同：2
> 
> 时间：2012-12-04T15:51:00.237
> 
> 标签：forms, symfony, model

我有一个具有属性的`Candidate`实体`$xmlContent`，该属性用于获取对其他实体（国家、公民、...）的一些引用，$xmlContent 值包含这些实体的 ID，如下所示，

```
<data>
  <countryId>2</countryId>
  <citizenship>4</citizenship>
  <!-- ... -->
</data> 
```

**注意：**我知道，模型设计得很糟糕！我无法修改它，这是我开始研究它时项目**奇怪的限制之一。**

`Id`因此，我为每个$xmlContent 值创建了 getter 和 setter 。

**问题，**

我创建了一个表单来编辑候选对象（包括 $xmlContent Id），然后添加了 getter 和 setter 来获取这些值（getCountry()、getCitizenship()、...）

问题是我想让用户`Country`从所有可用国家的列表中选择（例如）的值，我还必须将正确的国家作为默认国家。

然后我决定使用实体字段，

```
 ->add('country', 'entity', array(
        'class' => 'MyBundle:Country',
        'query_builder' => function(CountryRepository $er) {
            return $er->createQueryBuilder('c')
                ->orderBy('c.rank', 'ASC');
        },
        'property' => 'Name'
    )) 
```

但是，这里我遇到了另一个问题，我用来获取候选 Country 的 getter 返回一个“Id”，但实体字段需要一个对象。

**我的问题，**

处理这个问题的最佳方法是什么？

**我的约束，**

我想让我的代码尽可能干净:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:48:56.110

既然您说您添加了 getter 和 setter，我想您可以修改模型，但不能修改它在数据库或映射中的表示，对吗？

我认为您的 getter / setter 不应该返回 ids / 更改 xmlContent。相反，如果之前没有构建，getter 应该读取 id 并构建相应的实体。setter 应该只修改以前的对象，并且您应该实现生命周期回调，以便 xmlContent 在持久化之前是最新的。

这样，表单很容易绑定到您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:32:13.300

也许你应该看看[DataTransformers](http://symfony.com/doc/2.0/cookbook/form/data_transformers.html)和[EventSubscribers](http://symfony.com/doc/2.0/cookbook/form/dynamic_form_generation.html)。

您可以使用 DataTransformer 将您解析`xmlContent`为离散属性并填充它们的字段，例如`country`和`citizenship`。

使用 EventSubscriber，您可以 a)`PRE_BIND`将表单数据反向转换为`xmlContent`* 和 b) 转换您的表单元素，例如获取国家/地区并`country`从数据中创建/更改选择元素。

* DataTransformers 在这里不起作用，因为您不只是想反向转换，即字符串到实体，而是想将来自多个字段（国家、公民身份等）的数据合并和转换为单个字段（xmlContent）。

# objectify - 对象化如何为父键赋值

> ID：13706698
> 
> 赞同：3
> 
> 时间：2012-12-04T15:51:35.863
> 
> 标签：objectify

我被坚持和Objectify弄湿了。我想要一些关于分配父键的指导。我的具体问题全部大写。谢谢。（下面的示例模型包含一个 AppUser 和一个视频。这个想法就像 YouTube；用户创建属于他/她的视频。）

```
@Entity
class Video{
// QUESTION 1: SHOULD THIS CLASS HAVE ONLY 1 KEY FIELD IF I WANT A 
PARENT RELATIONSHIP WITH AppUser, AND TYPE IS Key<AppUser> ?
@Parent Key<AppUser> owner;
@Id private Long id;

protected Video(){}
protected Video(User u){ // GAE User object     
    AppUser au = ofy().load().type(AppUser.class).filter("userId",u.getUserId()).first().get();

    // QUESTION 2: WHICH WAY IS RIGHT (TO ASSIGN PARENT KEY)?
    this.owner = Key.create(au.getKey(),AppUser.class,au.getId()); 
    // or:
    // owner = au.getKey();
    // or:
    // owner = au;
}
}

@Entity
public class AppUser {
@Id private String userId;

// QUESTION 3: DO ALL CLASSES REQUIRE A KEY FIELD?
private Key<AppUser> key;

protected AppUser(){}
protected AppUser(User u){// GAE User object    
    this.userId = u.getUserId();
}

public String getId(){
    return userId;
}

public Key<AppUser> getKey(){
    // QUESTION 4: IS THIS THE CORRECT WAY TO RETURN THE KEY? 
    // WOULD THAT IMPLY I NEED TO EXPLICITLY ASSIGN A VALUE TO FIELD key?

    return this.key;

    // THE ALTERNATIVE WOULD BE TO CREATE A KEY 
AND RETURN IT RIGHT? (THEN I CAN EXCLUDE FIELD key?)
    // return Key.create(AppUser.class, userId);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:24:32.797

根据进一步的知识回答我自己的问题：

1.  通常，如果需要父关系，一个 Key 就可以了。我不明白为什么需要另一个 Key 字段。
2.  我认为没有一种正确的方法可以为@Parent Key 赋值。使用它似乎有效：

    this.parent = Key.create(instanceOfParent);

3.  所有类都不需要关键字段。需要时使用。
4.  没有一种正确的方法可以返回 Key，这两个示例都可以。

# c - getword 中的分段错误

> ID：13706699
> 
> 赞同：0
> 
> 时间：2012-12-04T15:51:40.017
> 
> 标签：c, segmentation-fault, kernighan-and-ritchie

嗨，这是关于 Kernighan 和 Ritchie 关键字计数程序的问题（ANSI 版的第 6 章第 3 节）。我在下面的链接中包含了整个代码。

当我尝试在任何 C 源代码上运行代码时，我没有得到任何输出。因此，为了查明问题，我在代码的不同点打印了语句。终端窗口中程序的输出（应用到自身时）现在看起来像这样：

```
./a.out < keywords.c
I've got past the beginning of the getword loop.
I've got past the beginning of the getword loop.
I'm past the word[0] condition.
Segmentation fault 
```

当我使用另一种搜索方法（通过结构键数组进行线性搜索）时，我得到了相同输出的另一种组合，这次没有分段错误。根据 printf 语句的输出，我倾向于认为 getword 函数有问题。那么是什么导致了这些错误呢？

以下是具有二进制和线性搜索功能的完整代码：

[http://pastebin.com/sPEYYge6](http://pastebin.com/sPEYYge6)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:57:04.280

您的代码调用`binsearch()`并尝试使用`mid`该数组来访问该数组`tab`，但`mid`从未初始化，因此您将死在那里。

```
int binsearch (char * word, struct key tab[], int n) {
    int cond;
    int low, high, mid; 

    low = 0;
    high = n -1;
        // Missing setting mid here!    

    while (low <= high) {
        if ((cond = strcmp(word,tab[mid].word)) < 0) // That's going to be bad... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:02:39.560

Mike 正确诊断出分段错误是由使用未初始化`mid`的 in引起的`binsearch`。

您的代码中的其他错误（我不是 100% 确定我发现了所有错误）是：

*   你`getch()`错了，`return (bufp > 0) ? BUFF[bufp--] : getchar();`返回 index 处的字符`bufp`，如果是`> 0`，但是`bufp`是存储在缓冲区中的元素数，应该在`--bufp`那里。
*   在`ungetch`，测试`if (bufp > BUFFSIZE)`应该使用`>=`。

您从未找到任何关键字的原因是（使用更传统的缩进和间距）：

```
// You loop until you find a non-space character
while (isspace(c = getch())) {
    ;
}
// If it's not a letter, this is not a word, return here
if (!isalpha(c)) {
    *w = '\0';
    return c;
}
// If it was a letter, read the following letters and store them in the buffer
for ( ; --lim > 0; w++) {
    if (!isalnum(*w = getch())) {
        ungetch(*w);
        break;
    }
} 
```

你永远不会存储任何单词的第一个字母，所以遇到 时`volatile`，只会`olatile`存储在缓冲区中。

只需在and循环`*w++ = c;`之间添加即可修复它，您的程序就可以正常工作（同时也进行了and修复）。`if``for``getch``ungetch`

# javascript - 在 JSfiddle 中运行但不在浏览器上的脚本

> ID：13706701
> 
> 赞同：0
> 
> 时间：2012-12-04T15:51:42.390
> 
> 标签：javascript, jquery, html, forms, twitter-bootstrap

我在 JSfiddle 上有一个有效的脚本：它允许用户从下拉菜单中选择一个日期，如果他们选择“自定义”，它会显示一些日历选项。否则它仍然是隐藏的。但是在我的浏览器上，当我尝试运行相同的脚本并选择“自定义”时，日历不会显示。这就像 JSfiddle：http: [//jsfiddle.net/MgcDU/330/](http://jsfiddle.net/MgcDU/330/)

这是在浏览器上运行的代码片段：

```
$('#time').on('change', function(){
    if($(this).val() == 'custom'){
        $('#interval_selector').show();
        }
    else{
        $('#interval_selector').hide();
         }
 });

    $(function(){
        window.prettyPrint && prettyPrint();

        var startDate = new Date(2012,1,20);
        var endDate = new Date(2012,1,25);
        $('#dp4').datepicker()
            .on('changeDate', function(ev){
                if (ev.date.valueOf() > endDate.valueOf()){
                    $('#alert').show().find('strong').text('The start date can not be greater then the end date');
                } else {
                    $('#alert').hide();
                    startDate = new Date(ev.date);
                    $('#startDate').text($('#dp4').data('date'));
                }
                $('#dp4').datepicker('hide');
            });
        $('#dp5').datepicker()
            .on('changeDate', function(ev){
                if (ev.date.valueOf() < startDate.valueOf()){
                    $('#alert').show().find('strong').text('The end date can not be less then the start date');
                } else {
                    $('#alert').hide();
                    endDate = new Date(ev.date);
                    $('#endDate').text($('#dp5').data('date'));
                }
                $('#dp5').datepicker('hide');
            });
    });

</script>

<div class="page-header">
   <h2 id="changer">Enter the Event you would like to follow:</h2>
 </div>

<style>
 #interval_selector{
  display:none;
  background:none;
   margin:10px;
 }
</style>

<div class="row">
<div class="span11">  
<form id ="eventForm">
     <select name="period" id="time">
        <option value="beginning" selected="selected">Process all Tweets from start</option>
        <option value="RealTime tweeting">Process all Tweets in real-time</option>
        <option value="the last 24 hours">Last 24 hours</option>
        <option value="the previous week">Previous week</option>
        <option value="custom">Custom</option> 
     </select>

    <input type="submit" id="open" onclick="heading()" value="Start Visualization" />

    <input type="button" onclick="closeMap()" value="Stop Request"/>

    <div id="interval_selector">
        <table class="table">
            <thead>
                <tr>
                    <th>Start date<a href="#" class="btn small" id="dp4" data-date-format="yyyy-mm-dd" data-date="2012-02-20"> Change</a></th>
                    <th>End date<a href="#" class="btn small" id="dp5" data-date-format="yyyy-mm-dd" data-date="2012-02-25"> Change</a></th>
                </tr>
               </thead>
               <tbody>
                <tr>
                    <td id="startDate "> 2012-02-20</td>
                    <td id="endDate "> 2012-02-25</td>
                </tr>
                </tbody>
            </table>
        </div>
    </form> 
</div>  

<div class="span1">
<form name="moreAnalysis" id="moreAnalysis" action="/p" method="post">
<input type="submit" value="Further Analysis">
</form>
</div>
</div> 
```

我基于 Stafan Petre 的 eyecon.ro/bootstrap-datepicker 示例创建了 datepicker。

我看不出我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:52:58.130

jsfiddle 默认在窗口加载时运行。将您的代码包装起来`$(document).ready(function(){...})`以获得类似的效果。（我正在查看您的代码段中的第一块代码）

```
$(function(){ // <--- THIS LINE WAS MOVED
    $('#time').on('change', function(){
        if($(this).val() == 'custom'){
            $('#interval_selector').show();
            }
        else{
            $('#interval_selector').hide();
             }
     });
     window.prettyPrint && prettyPrint(); 
```

# .net - 构建类似于 VS 选项对话框的选项对话框

> ID：13706705
> 
> 赞同：1
> 
> 时间：2012-12-04T15:51:50.000
> 
> 标签：.net, vb.net, winforms, user-interface, windows-forms-designer

我已经读过[这个问题](https://stackoverflow.com/questions/7409027/create-visual-studio-style-options-settings-dialog)，它谈到了同样的事情，但我对设计有一个具体的问题。如您所知，VS 中的选项对话框是左侧的 TreeView 控件和右侧的类似面板的控件，其中包含当前选择 TreeView 控件的所有选项。根据上述问题中给出的建议，我决定为每个选项“面板”构建一个 UserControl。当用户在 TreeView 中选择特定节点时，我正在尝试确定使所选面板可见并隐藏所有其他面板的最佳方法。在我的事件处理程序中，选择TreeView中的新节点时执行以下操作：

```
 If e.Node.Name.CompareTo("PanelAName") = 0 Then
            PanelA.Visible = True
            PanelA.Enabled = True

            PanelB.Visible = False
            PanelB.Enabled = False

        ElseIf e.Node.Name.CompareTo("PanelBName") = 0 Then
            PanelA.Visible = False
            PanelA.Enabled = False

            PanelB.Visible = True
            PanelB.Enabled = True

        End If 
```

唯一的问题是在示例代码中只有两个面板，我将拥有 15-25。虽然我当然仍然可以这样做，但似乎需要更多的代码行。有什么更好的方法建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:01:59.520

您可以尝试利用节点的 Tag 属性来保存关联面板的名称，然后尝试循环访问表单中的面板并将节点名称与面板名称进行比较：

```
private void treeView1_AfterSelect(object sender, TreeViewEventArgs e) {
  foreach (Panel p in this.Controls.OfType<Panel>()) {
    if (p.Name == e.Node.Tag.ToString()) {
      p.Visible = true;
    } else {
      p.Visible = false;
    }
  }
} 
```

您也可以将每个面板的引用添加到节点的标记属性中：

```
private void treeView1_AfterSelect(object sender, TreeViewEventArgs e) {
  foreach (Panel p in this.Controls.OfType<Panel>()) {
    p.Visible = e.Node.Tag.Equals(p);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:02:20.663

如何将控件放在TreeNode的Tag属性中，然后选择TreeNode时，适当的控制在您的指尖是正确的......

标签是 Object 类型的，所以它可以保存一个引用。显然，你需要投射。

# ruby - 如何从ruby中的字符串中提取浮点数？

> ID：13706706
> 
> 赞同：8
> 
> 时间：2012-12-04T15:51:50.570
> 
> 标签：ruby, regex

我有一个带有不同货币数量的字符串，例如，

```
"454,54$", "Rs566.33", "discount 88,0$" etc. 
```

模式不一致，我只想从字符串和货币中提取浮点数。

我如何在 Ruby 中实现这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T15:53:11.123

您可以使用此正则表达式来匹配您发布的两种格式的浮点数：-

```
(\d+[,.]\d+) 
```

请参阅[Rubular 上的演示](http://rubular.com/r/pGdpGfyjk3)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T15:55:09.743

你可以试试这个：

```
["454,54$", "Rs566.33", "discount 88,0$", "some string"].each do |str|
  # making sure the string actually contains some float
  next unless float_match = str.scan(/(\d+[.,]\d+)/).flatten.first
  # converting matched string to float
  float = float_match.tr(',', '.').to_f
  puts "#{str} => %.2f" % float
end

# => 454,54$ => 454.54
# => Rs566.33 => 566.33
# => discount 88,0$ => 88.00 
```

### [CIBox 演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=how-to-extract-float-numbers-from-a-string-in-ruby.rb&run=true)

# php - 如何在 cakephp 中使用 session 打印用户名？

> ID：13706707
> 
> 赞同：3
> 
> 时间：2012-12-04T15:51:52.200
> 
> 标签：php, session, cakephp

当我在会话中调用它时，我无法让我的用户名显示在网站上。

索引页面上的代码是：

```
<h1>Users Home</h1>
Welcome <?php $user = $this->Session->read('Users.username');?> 
```

我究竟做错了什么？

我还尝试了各种其他方式来调用它，然后得到不同的错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:54:07.190

在您的代码中，您将 $user 设置为用户名的内容。但你没有打印它。

```
<h1>Users Home</h1>
Welcome <?=$this->Session->read('Auth.User.username')?> 
```

这是缩写

```
<h1>Users Home</h1>
Welcome <?php print $this->Session->read('Auth.User.username'); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T16:17:06.407

As Hugo said you should do the following:

```
<h1>Users Home</h1>
Welcome <?php echo $this->Session->read('Auth.User.username'); ?> 
```

If you are going to use it on more than one view, I would suggest you to add the following on **AppController**.

```
public function beforeFilter() {
    $this->set('username', AuthComponent::user('username'));
    // OR $this->set('username', $this->Session->read('Auth.User.username'));
} 
```

And then on any of your view just use the variable $username to print the current username.

```
<?php echo $username; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:53:36.553

```
echo $this->Session->read('Auth.User.username'); 
```

或者，如果您使用的是 Cakephp 2.x，您可以`AuthComponent::user('username')`在代码中的任何位置使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:56:13.390

获取 $user 后，您应该执行 echo $user 或 print_r($user)，您将打印出用户名。

# ruby - Word Document.SaveAs 在通过 OLE 从 Ruby 或 VBS 调用时忽略编码

> ID：13706716
> 
> 赞同：3
> 
> 时间：2012-12-04T15:52:09.443
> 
> 标签：ruby, vbscript, ole

我有一个脚本，VBS 或 Ruby，将 Word 文档保存为“过滤的 HTML”，但编码参数被忽略。HTML 文件始终以 Windows-1252 编码。我在 Windows 7 SP1 上使用 Word 2007 SP3。

## 红宝石示例：

```
require 'win32ole'
word = WIN32OLE.new('Word.Application')
word.visible = false
word_document = word.documents.open('C:\whatever.doc')
word_document.saveas({'FileName' => 'C:\whatever.html', 'FileFormat' => 10, 'Encoding' => 65001})
word_document.close()
word.quit 
```

## VBS 示例：

```
Option Explicit
Dim MyWord
Dim MyDoc
Set MyWord = CreateObject("Word.Application")
MyWord.Visible = False
Set MyDoc = MyWord.Documents.Open("C:\whatever.doc")
MyDoc.SaveAs "C:\whatever2.html", 10, , , , , , , , , , 65001
MyDoc.Close
MyWord.Quit
Set MyDoc = Nothing
Set MyWord = Nothing 
```

## 文档：

Document.SaveAs：http: [//msdn.microsoft.com/en-us/library/bb221597.aspx](http://msdn.microsoft.com/en-us/library/bb221597.aspx)

msoEncoding 值： http: [//msdn.microsoft.com/en-us/library/office/aa432511 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/aa432511(v=office.12).aspx)

任何建议，如何让 Word 以 UTF-8 保存 HTML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T09:11:18.067

嗨 Bo Frederiksen 和 kardeiz，

今天在我的“Word 2003 (11.8411.8202) SP3”版本中也遇到了“Word Document.SaveAs忽略编码”的问题。

幸运的是，我设法使 msoEncodingUTF8（即 65001）在 VBA 代码中工作。但是，我必须先更改 Word 文档的设置。步骤是：

1) 从 Word 的“工具”菜单中，选择“选项”。

2) 然后单击“常规”。

3) 按“网络选项”按钮。

4) 在弹出的“Web 选项”对话框中，单击“编码”。

5）你可以找到一个组合框，现在你可以改变编码，例如，从'GB2312'到'Unicode（UTF-8）'。

6) 保存更改并尝试重新运行 VBA 代码。

希望我的回答能帮到你。下面是我的代码。

```
Public Sub convert2html()
    With ActiveDocument.WebOptions
        .Encoding = msoEncodingUTF8
    End With

    ActiveDocument.SaveAs FileName:=ActiveDocument.Path & "\" & "file_name.html", FileFormat:=wdFormatFilteredHTML, Encoding:=msoEncodingUTF8

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:57:25.910

我的解决方案是使用与 Word 保存它时相同的字符集打开 HTML 文件。我还添加了一个白名单过滤器 (Sanitize)，以清理 HTML。使用 Sanitize 也依赖的 Nokogiri 进行进一步清洁。

```
require 'sanitize'

# ... add some code converting a Word file to HTML.

# Post export cleanup.
html_file = File.open(html_file_name, "r:windows-1252:utf-8")
html = '<!DOCTYPE html>' + html_file.read()
html_document = Nokogiri::HTML::Document.parse(html)
Sanitize.new(Sanitize::Config::RESTRICTED).clean_node!(html_document)
html_document.css('html').first['lang'] = 'en-US'
html_document.css('meta[name="Generator"]').first.remove()

# ... add more cleaning up of Words HTML noise.

sanitized_html = html_document.to_html({:encoding => 'utf-8', :indent => 0})
# writing output to (new) file
sanitized_html_file_name = word_file_name.sub(/(.*)\..*$/, '\1.html')
File.open(sanitized_html_file_name, 'w:UTF-8') do |f|
    f.write sanitized_html
end 
```

HTML 消毒剂：[https ://github.com/rgrove/sanitize/](https://github.com/rgrove/sanitize/)

HTML 解析器和修改器：http: [//nokogiri.org/](http://nokogiri.org/)

在 Word 2010 中有一种新方法 SaveAs2： http: [//msdn.microsoft.com/en-us/library/ff836084 (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ff836084(v=office.14).aspx)

我没有测试 SaveAs2，因为我没有 Word 2010。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:59:09.840

据我所知，Word 无法做到这一点。

但是，您可以将以下行添加到 Ruby 脚本的末尾

```
text_as_utf8 = File.read('C:\whatever.html').encode('UTF-8')
File.open('C:\whatever.html','wb') {|f| f.print text_as_utf8} 
```

如果您有旧版本的 Ruby，您可能需要使用`Iconv`. 如果您在 中有特殊字符`'C:\whatever.html'`，则需要查看无效/未定义的替换选项。

您可能还想更新 HTML`meta`标记中的字符集：

```
text_as_utf8.gsub!('charset=windows-1252', 'charset=UTF-8') 
```

在写入文件之前。

# infopath - InfoPath：时间字段正在转换为当前时区

> ID：13706718
> 
> 赞同：1
> 
> 时间：2012-12-04T15:52:14.313
> 
> 标签：infopath, infopath-2007, infopath-forms-services

我使用 Infopath 创建了一个电子邮件表单。(2007) 它包含名字、姓氏、日期、时间和时间字段。我让主管在表格上输入信息并将其提交给我们的资源管理部门。主管是中部时间，资源管理部是东部时间。如果主管在上午 9:00 进入，当资源部门打开表格时会显示上午 10:00。你知道我有什么办法可以纠正这个吗？我已经使用时间格式来使用没有 * 的时间格式，表示它们与系统时钟相关，但它似乎没有帮助。感谢您的任何意见！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:51:30.273

[http://community.office365.com/en-us/forums/153/p/63976/244291.aspx#244291](http://community.office365.com/en-us/forums/153/p/63976/244291.aspx#244291)

似乎是一个错误，sharepoint 服务器更改了时区

# android - Android SherlockFragmentActivity 调用 SherlockFragment

> ID：13706719
> 
> 赞同：0
> 
> 时间：2012-12-04T15:52:18.407
> 
> 标签：android, actionbarsherlock

最初，我有 2 个活动。A叫B活动。现在我更改了 A 类扩展 SherlockFragmentActivity 和 B 类扩展 SherlockFragment。

我试图在 A 类中更改这些：

```
 private class MyTabListener implements ActionBar.TabListener {
      @Override
      public void onTabSelected(Tab tab, FragmentTransaction ft) {

          if (tab.getPosition()==1) {
              B frag = new B();
              ft.replace(android.R.id.content, frag);

          }

      }

      @Override
      public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
      }

      @Override
      public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
      }

    } 
```

//==============================

B类：

```
public class Br extends SherlockFragment{

    /* Called when the activity is first created */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.promotionslist_tableview);

        //get our listview
        ListView myListView = (ListView) findViewById(R.id.myListView_promotionslist_table); 
```

//================================

但是错误。1\. onCreate 2\. findViewById..

我错了什么？

请给我一些提示。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:07:27.700

我现在可以显示 B 片段，但列表视图在主列表视图上重叠..？为什么 ？

```
public class B extends SherlockFragment{

    View view; 

    /* Called when the activity is first created */
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        //setContentView(R.layout.promotionslist_tableview);

        //get our listview
        ListView myListView = (ListView) view.findViewById(R.id.myListView_promotionslist_table);
.
.
.
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        view = inflater.inflate(R.layout.promotionslist_tableview, container, false);
        return view;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:57:08.247

您必须`onCreateView()`在片段中使用该方法：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.layout, null);

        return view;
    } 
```

在那里你可以膨胀一个视图并像这样调用 findViewById ：

```
view.findViewById(...); 
```

# jquery - Fancybox 自定义标题不起作用 titleFormat 功能

> ID：13706720
> 
> 赞同：1
> 
> 时间：2012-12-04T15:52:35.280
> 
> 标签：jquery, html, css, fancybox

我正在尝试在我的幻想箱灯箱中实现自定义标题，但它似乎没有调用该函数。我还尝试直接从 fancybox 网站 (http://fancybox.net/blog) 复制和粘贴示例，但这似乎也不起作用，想知道是否有人可以帮助我。

我的代码如下：

```
function formatTitle(title, currentArray, currentIndex, currentOpts) {
        return '<div id="tip7-title"><span><a href="javascript:;" onclick="$.fancybox.close();"><img src="/data/closelabel.gif" /></a></span>' + (title && title.length ? '<b>' + title + '</b>' : '' ) + 'Image ' + (currentIndex + 1) + ' of ' + currentArray.length + '</div>';
        console.log('Custom fancyTitle shown');
      }

      $('.mosaic-overlay').fancybox({             
        custom_counterText: 'Image {#index#} of {#count#}',
        'titlePosition' : 'inside',
        titleFormat: formatTitle
      }); 
```

使用 html：

```
<li>  <!--Circle--> 
  <div class="mosaic-block circle">
    <a title="Custom Title 1"  rel="aapGroup" href="<?php bloginfo('template_directory'); ?>/img/webProjects/aapBlog.jpg" class="mosaic-overlay ">&nbsp;</a>       
    <div class="mosaic-backdrop"><img src="<?php bloginfo('template_directory'); ?>/img/screenshots/AAPBlog.png"/></div>
  </div>
</li> 
```

我试图实现这一点的页面是 www.alivedesign.co.uk ，在“Web Projects”位中，是第一个框。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:31:03.603

原来我使用的是 Fancybox 2.1.3，该版本不再支持该方法。我使用 /r/webdesign/ 解决了解决方案，可以在这里看到...

[http://www.reddit.com/r/webdesign/comments/14bl6r/fancybox_custom_title_not_working_titleformat/](http://www.reddit.com/r/webdesign/comments/14bl6r/fancybox_custom_title_not_working_titleformat/)

感谢您通过肯尼迪国际机场提供的帮助。

# epub - epub 3，如何防止页面在后台运行？（iBooks / Readium）

> ID：13706725
> 
> 赞同：2
> 
> 时间：2012-12-04T15:52:59.040
> 
> 标签：epub, pageload, ibooks

我已经创建并验证了我目前正在测试的 ePub 3。我正在使用固定布局..

```
<meta property="rendition:layout">pre-paginated</meta>
<meta property="rendition:orientation">portrait</meta>
<meta property="rendition:spread">none< /meta> 
```

它工作得很好，但是在不同的阅读器中测试时，多个页面似乎同时加载和运行。我正在使用 jQuery 的文档准备启动并播放音频、运行动画等。

在 iBooks 中进行测试时，我将书打开到第 1 页，该页面加载并开始运行，但随后我开始听到第 2 页的音频..所以文档就绪功能已针对第 2 页触发（因为它已被加载），即使我是还没看。在 Readium 中，它似乎加载并运行每一页......

三个问题：

1.  有谁知道为什么？

2.  有没有办法阻止电子阅读器运行或加载您当前未查看的页面？

3.  有没有办法在查看页面时检测（使用 javascript）？（我尝试将焦点事件侦听器添加到窗口，但没有奏效）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T13:39:15.423

准备好的文档似乎在 ePub 中不起作用。经过一番测试，我注意到我的 javascript 并没有等待我的文档准备好开始工作。我在带有 3.1 iBooks 版本的 iPad 1 (iOS 5.1.1) 上进行了测试。我拥有的“解决方案”是通过执行此操作的任何工具来估计 HTML 文档的加载时间，然后将其乘以 2 或 3（因为 iOS 设备上的 javascript 显然很慢）并使用 settimeout() 函数获得时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T03:00:45.373

问题出在 Redium 中。您应该手动设置设置以使其成为两页。

进入 Redium，进入设置然后检查双页

# c# - 为什么其中一些 Monotouch.Dialog 单元格显示为空？

> ID：13706729
> 
> 赞同：2
> 
> 时间：2012-12-04T15:53:10.770
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

我有一个我认为非常简单的 Monotouch.Dialog 类。

```
public partial class EditAccountDialog : DialogViewController
{
    Section emailSection;
    Section passwordSection;
    Section profileSection;
    Section addressSection;

    EntryElement emailEntry;
    EntryElement passwordEntry;
    EntryElement password2Entry;
    EntryElement firstNameEntry;
    EntryElement lastNameEntry;
    EntryElement phoneNumberEntry;
    EntryElement streetEntry;
    EntryElement street2Entry;
    EntryElement cityEntry;
    EntryElement stateEntry;
    EntryElement zipEntry;

    public EditAccountDialog(bool pushing) : base (UITableViewStyle.Grouped, null, pushing)
    {
        emailEntry = new EntryElement(null, "example@domain.com", String.Empty);
        passwordEntry = new EntryElement (null, "Password", String.Empty, true);
        password2Entry = new EntryElement (null, "Re-enter password", String.Empty, true);
        firstNameEntry = new EntryElement ("First Name", "First Name", String.Empty);
        lastNameEntry = new EntryElement ("Last Name", "Last Name", String.Empty);
        phoneNumberEntry = new EntryElement ("Phone Number", "###-###-####", String.Empty);
        streetEntry = new EntryElement ("Street", "#### Any St.", String.Empty);
        street2Entry = new EntryElement ("Street 2", "Apt #", String.Empty);
        cityEntry = new EntryElement ("City", "City", String.Empty);
        stateEntry = new EntryElement ("State", "State", String.Empty);
        zipEntry = new EntryElement ("ZIP Code", "#####", String.Empty);

        emailSection = new Section ("Email"){
            emailEntry,
        };

        passwordSection = new Section ("Password"){
            passwordEntry,
            password2Entry,
        };

        profileSection = new Section("Profile") {
            firstNameEntry,
            lastNameEntry,
            phoneNumberEntry,
        };

        addressSection = new Section("Address") {
            streetEntry,
            street2Entry,
            cityEntry,
            stateEntry,
            zipEntry,
        };

        Root = new RootElement("Edit Account") {
            emailSection,
            passwordSection,
            profileSection,
            addressSection,
        };
    }

    public virtual void HandleGetAccountResponse(GetAccountResponse response)
    {
        emailEntry.Value = response.Email;
        firstNameEntry.Value = response.FirstName;
        lastNameEntry.Value = response.LastName;
        phoneNumberEntry.Value = response.Phone;
        streetEntry.Value = response.StreetAdd;
        street2Entry.Value = response.StreetAdd2;
        cityEntry.Value = response.City;
        stateEntry.Value = response.State;
        zipEntry.Value = response.Zip;
    }
} 
```

页面加载后，我为现有帐户信息异步调用 REST API，然后调用`HandleGetAccountResponse`上面的方法来预填充`EntryElement`对话框中的每一个。

我检查了 REST 响应并知道我正在接收所有必要的数据。我遇到的问题是此页面上的一两个随机单元格似乎是空白的，即使在设置了它们的值之后也是如此。例如，邮编和城市字段可能显示为空白。

更令人困惑的是，如果我滚动到底部并看到 Zip 和 City 字段为空白，然后一直向上滚动，然后再次滚动到底部，一组**不同**的单元格可能是空白的，例如作为 Street2 和州。

显然这不是 Monotouch.Dialog 的正常行为，否则没有人会使用它。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:29:35.920

根据 Xamarin 工程师发回给我的测试样本，我最终能够通过更改以下几行来解决这个问题：

```
 emailEntry = new EntryElement(null, "example@domain.com", String.Empty);
    passwordEntry = new EntryElement (null, "Password", String.Empty, true);
    password2Entry = new EntryElement (null, "Re-enter password", String.Empty, true); 
```

对此：

```
 emailEntry = new EntryElement(" ", "example@domain.com", String.Empty);
    passwordEntry = new EntryElement (" ", "Password", String.Empty, true);
    password2Entry = new EntryElement (" ", "Re-enter password", String.Empty, true); 
```

请注意，这是**一个只有一个空格的字符串**。我尝试使用`String.Empty`或只是一个空字符串`""`，这是更直观的想法，但它们表现出同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T23:20:14.750

我敢打赌，问题是由使用与其他条目元素相同的“CellKey”（Objective-C 术语中的“reusableIdentifier”）的 Password EntryElements 引起的。

作为一种解决方法，我建议像这样子类化 EntryElement：

```
public class PasswordEntryElement : EntryElement
{
    static readonly NSString PasswordEntryElementCellKey = new NSString ("PasswordEntryElement");

    public PasswordEntryElement (string caption, string placeholder, string value) : base (caption, placeholder, value, true)
    {
    }

    protected override NSString CellKey {
        get { return PasswordEntryElementCellKey; }
    }
} 
```

如果这有效，那么它是 MonoTouch.Dialog 中的一个错误（一旦您确认这对您有效，我将向官方 MonoTouch.Dialog github 项目提交拉取请求）。

问题是，如果配置不同，每种类型的单元格确实需要有自己的“CellKey”。由于密码 EntryElements 使用不同配置的 UITextFields，这可能是您的问题的原因。

有用的提示：如果您遇到这种类型的问题，其中一些单元格是空白的，几乎总是由于多种类型的单元格重用同一个 CellKey。在您的情况下，您有 2 个通常不可见的单元格 - 这强烈表明有 2 个元素与其他元素不同（这就是导致我使用密码元素的原因）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:35:13.820

pdusen，`InvokeOnMainThread(ReloadData)`在模型更新后尝试放置在`HandleGetAccountResponse`. 希望这有帮助！

# c++ - 带有“类”详细类型说明符的方法参数

> ID：13706733
> 
> 赞同：0
> 
> 时间：2012-12-04T15:53:21.220
> 
> 标签：c++, class

我正在尝试理解以下代码：

```
lock_server::lock_server(class rsm *_rsm)
{
//code
} 
```

我知道这是该类的构造函数，但我不明白它的论点。我猜这是一个指向*类*的指针（名称为_rsm） ？那有意义吗？我在哪里可以找到有关此的文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:55:08.110

指定类型时，class 或 struct 关键字在 C++ 中是可选的，通常省略。

也就是说，以下函数具有等效签名：

```
class mytype { ... };

void f(mytype* data);       // compiler "understands" that mytype is a class
void g(class mytype* data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T21:09:22.230

如果有问题的类没有事先声明，你必须包含这个词`class`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:02:51.097

`class`在 C++ 中，术语之前的关键字`rsm`不是必需的（与 C 中必须指定单词不同`struct`）。

然而，这并不意味着它是被禁止的，无论是谁写的都觉得这是一种很好的风格，尽管它`rsm`是某种类型的直觉（不一定是一个类，可能是一个类的 typedef）

该构造函数的目的是构造一个`lock_server`具有指向可修改对象的指针的类型的`rsm`对象。我的猜测是，它`rsm`有某种`lock`将从构造函数中调用的`unlock`方法，以及一种将从析构函数中调用的方法。

该类的目的`lock_server`是实现所谓的 RAII：一个愚蠢的首字母缩略词，但在现实生活中，它意味着自动资源管理 - 当对象离开范围时，析构函数开始释放它所持有的资源，在这种情况下，锁定到`rsm`目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:03:55.480

它是一个指针，指向 class 的一个对象`rsm`。

该关键字`class`是可选的，只要该类`rsm`之前已定义/声明。

但是，如果该类之前未在源中声明，则`class`关键字是必需的。在这种情况下，`rsm`声明为不完整的类类型。

# android - Zxing - 我的应用程序不想启动相机

> ID：13706742
> 
> 赞同：2
> 
> 时间：2012-12-04T15:53:45.953
> 
> 标签：android, android-intent, zxing

首先我要自我介绍一下。我是一名来自奥地利的年轻学生，刚接触 Android 编程。我的项目是编写条形码扫描仪，如果您扫描产品，您将获得有关它的更多信息。

所以让我们现在开始解决真正的问题：

我已经完成了教程所说的一切并且它有效。ZXING-Source Code 现在是我自己项目的库，当然也包含在内。

当我将 Android 项目导出为 FILENAME.APK 并将其复制到我的 SGS3 时，一切正常。然后我在手机上安装 apk 并开始运行该应用程序。当我按下调用“onClick”方法的扫描条形码按钮时，它什么也不做。Android 对我说应用程序已停止。

我不知道我必须使用哪个功能。我应该使用 IntentIntegrator 方法还是 Intent 方法来扫描代码。（我知道我不能在我的方法中同时使用这两种方法，将其粘贴在这里以向您展示我的问题）

```
 public void onClick(final View view)
 {
        IntentIntegrator integrator = new IntentIntegrator(this);
        integrator.initiateScan();

        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
        startActivityForResult(intent, 0);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:02:03.250

这种集成是由意图提供的，因此您必须安装以特定意图 (action=com.google.zxing.client.android.SCAN) 运行的应用程序，例如[Barcode Scanner](https://play.google.com/store/apps/details?id=com.google.zxing.client.android)

我很确定您的其他手机上没有这样的应用程序，这就是您现在收到“未找到活动”异常的原因

编辑：关于 IntentIntegrator 和普通 Intent 之间的差异......好吧，除了 IntentIntegrator 之外没有差异，你可以很好地包装它

# html - h1 背景的动态宽度

> ID：13706743
> 
> 赞同：0
> 
> 时间：2012-12-04T15:53:46.653
> 
> 标签：html, css, xhtml

我的 CSS：

```
h1 {
    background-color: #f7953d;
    color: #FFF;
    width: 100%;
    padding: 6px 0 6px 10px;
    margin-bottom: 10px;
} 
```

我的 HTML

```
<h1>Hello World</h1> 
```

背景颜色总是拉伸到屏幕的 100%。如何使背景颜色在 h1 标签中的“世界”之后停止，而不是一直到屏幕末尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:55:29.857

默认情况下，H1 是一个块元素，因此将跨越其父容器的整个宽度，您希望将其设为内联元素（很像跨度），以便它仅与它的内容一样宽。

有 2 种可能的解决方案取决于您的兼容性需求

```
display:inline; 
```

将达到您之后的效果，但这确实意味着您的 H1 后面的任何内容都可能出现在同一行。

```
display:inline-block; 
```

有影响你之后的效果，同时仍然迫使它​​后面的任何东西出现在 H1 下方唯一的缺点是它可能会在 IE<8 中引发一些问题，请参阅[quirksmode](http://www.quirksmode.org/css/display.html#inlineblock)了解更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:57:20.693

您可以通过将`display: inline-block;`CSS 添加到您的`<h1>`. 这将使其仅使用与其内容一样多的宽度，并且仍然尊重`margin`您`padding`给它的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:13:40.740

我会建议这样的事情：

HTML：

```
 <h1>Hello World</h1>
 <div class="clear"></div>

 <p>Elements after unafected by float</p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
h1 {
    background-color: #f7953d;
    color: #FFF;
    padding: 6px 0 6px 10px;
    margin-bottom: 10px;
    float:left;
}

.clear {
    clear:both;
} 
```

这始终有效（与并非所有浏览器都支持的内联块不同）。

元素的内联可能不是您想要的，因为您需要填充。

# asp.net - 从网页发送邮件时出错

> ID：13706748
> 
> 赞同：0
> 
> 时间：2012-12-04T15:53:55.390
> 
> 标签：asp.net, .net

当我在文本框中输入电子邮件地址并按下提交按钮时，我收到以下错误：

> 错误：参数“地址”不能为空字符串。参数名称：地址

这是我用来设置地址的代码：

```
Mail_Data.MailTo =Textbox1.Text; 
```

当文本框不为空时会发生此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:19:31.560

If you are using the mailmessage function then you need to call the Add to add the string

```
Mail_Data.MailTo.Add(TextBox1.Text); 
```

# fonts - 如何从 MS-Word 2010 QuickStyle 集或模板中导出样式名称和定义？

> ID：13706753
> 
> 赞同：3
> 
> 时间：2012-12-04T15:54:07.133
> 
> 标签：fonts, formatting, ms-word, styles, export

Micro：我想从 Word 模板/样式集中查看样式名称及其特征的列表。

宏：我办公室的其他人已经定义了具有多种格式的样式集和模板。除了打开文档、应用样式并为每种样式使用样式检查器之外，有没有办法查看样式定义包含的内容，所以我可以决定是尝试调整样式，还是废弃它并从头开始？

我在 Windows 7 上使用 Word 2010。

桌面支持团队定义了一个称为公司 IT 样式的样式集，该样式集通过用户的模板文件夹推送给网络上的每个用户。

C:\Users\%MyName%\AppData\Roaming\Microsoft\QuickStyles\Company IT QuickStyle Set.dotx

我想导出包含在此样式集中的样式名称列表，以及每种样式的定义/特征，例如使用样式列表中的修改样式按钮显示。

例如：
**正常：**
字体：（默认）Times New Roman，11 pt，左
行距：单，后空格：6 pt，寡/孤儿控件，样式：快速样式

**标题 1：**
字体：Arial Black，16 pt，缩进：
左：0"
悬挂：0.3"，前空间：18 pt，后：18 pt，与下一个保持一致，1 级
制表位：0.3"，列表制表符，大纲编号 +级别：1 + 编号样式：1、2、3、... + 开始于：1 + 对齐方式：左对齐 + 对齐于：0" + 制表符后：0.3" + 缩进：0.3"，样式：链接，快速样式
基于: 普通
跟随风格: 普通

Word Tips 时事通讯网站上有一个宏，可以显示模板设置（PaperSize、方向等），但我不知道如何调整它以显示样式格式特征。

[http://word.tips.net/T010117_Listing_the_Settings_in_a_Template.html](http://word.tips.net/T010117_Listing_the_Settings_in_a_Template.html)

我正在寻找一种将信息从给定样式集中导出的方法，最好是导出到一个 Word 表格中，该表格将显示样式名称（以该样式格式化），然后是该样式元素的结构化列表。或者甚至更好，到 XML。

有现成的工具可以做到这一点吗？

我是 Word 的半高级用户——可能是我部门中最高级的用户，但无论如何都不是专家。我可以处理宏，但 VBA 经常让我感到困惑。

任何帮助或指针表示赞赏。
詹姆士

编辑：MSMVP 的 Suzanne Barnhill 部分回答了我的问题：

> “简单的答案是，您可以通过在后台打印选项卡上的>打印所有页面下拉菜单中选择“属性”下的“样式”来打印此信息。要将其“打印”为文档，您可以>将其打印到Microsoft XPS Document Writer 或 PDF 打印机。”

但是，这只会产生文档中积极使用的那些样式。由于我要检查的一些模板和样式集非常广泛，我宁愿不必创建文档并将每种样式分配给段落或字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:26:24.690

呈现给其他有相同问题的人可以使用答案......

如 OP 中所述，我在 Windows 7 上使用 Word 2010。

“文件”->“打印”对话框中的“打印内容”下拉菜单提供“打印样式”选项，但仅打印该文档中正在使用的样式的定义。

我得到了以下宏，它适用于 Word 2007 和 2010。正如作者 Jessica Weissman 所说，

“这是我在 Word 2007 中使用的一个宏，用于列出文档中所有段落和字符样式的描述。它跳过表格样式和列表样式。它列出了文档中的所有样式，包括那些未使用的样式。

如果一种风格是基于另一种风格的，那么对风格的描述只包括那些与基本风格不同的东西。幸运的是，基本样式是样式描述中的项目之一。

如果要查看所有类型的所有样式，请将 If 语句和 End If 语句注释掉。

警告：它没有经过压力测试，纯粹按原样提供，没有任何保证。

*   杰西卡”

宏代码如下——它比我想象的要简单。

```
Sub describeAllStylesWeCareAbout()  
'  by Jessica Weissman  
Dim docActive As Document  
Dim docNew As Document  
Dim styleLoop As Style  
Set docActive = ActiveDocument  
Set docNew = Documents.Add  
For Each styleLoop In docActive.Styles  

   If styleLoop.Type < 3 Then  
  ' show only character and paragraph styles, not list or table styles  
     With docNew.Range  
            .InsertAfter Text:=styleLoop.NameLocal & Chr(9) _  
                & styleLoop.Description  
            .InsertParagraphAfter  
            .InsertParagraphAfter  
    End With  
    End If  
Next styleLoop  
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T07:52:40.657

1.将文档的扩展名更改为 .zip，以便 MyTemplate.docx 变为 MyTemplate.zip

2.打开压缩包

3.在“word”文件夹中有一个名为styles.xml 的文件，其中包含所有样式及其设置。您可以使用 Excel（作为 XML 表格）打开它，以表格格式查看它。

（还有一个名为 stylesWithEffects.xml 的文件，它几乎是相同的，但仍然存在差异，我没有检查到底有什么不同）。

但挑战在于许多列的名称如 val17、val18 等，因此并不总是清楚该值的含义。

希望这有助于JP

# twitter-bootstrap - 尝试为预输入进行自定义

> ID：13706754
> 
> 赞同：0
> 
> 时间：2012-12-04T15:54:11.923
> 
> 标签：twitter-bootstrap

我试图找出除了 typeahead.js 之外我需要哪些 Twitter Bootstrap 组件子集，以便在不下载整个引导程序的情况下成功使用 typeahead。

我尝试了以下配置，但没有成功。

![我试过的配置不起作用。](../Images/b83c33c5d73313e214f8557640ba0adb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:27:58.167

什么是 typeahead.js？正如你所知道的，你不能那样做。您必须手动完成，但您需要提取的代码量非常少。**我自己也在几个已完成的项目中使用了出色**的预输入的单独版本，这是我的工作摘录（希望 SO 可以使用 310 行）：

将以下 javascript 和样式表放在一个`.js`和`.css`文件中，链接到它们，然后您可以使用与“正常”完全相同的方式使用 typeahead。另外，由于 CSS 很小，很容易将目标网页版式调整为`typeahead`.

JS

```
/* =============================================================
 * bootstrap-typeahead.js v2.2.1
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

!function($){

  "use strict"; // jshint ;_;

 /* TYPEAHEAD PUBLIC CLASS DEFINITION
  * ================================= */

  var Typeahead = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.typeahead.defaults, options)
    this.matcher = this.options.matcher || this.matcher
    this.sorter = this.options.sorter || this.sorter
    this.highlighter = this.options.highlighter || this.highlighter
    this.updater = this.options.updater || this.updater
    this.$menu = $(this.options.menu).appendTo('body')
    this.source = this.options.source
    this.shown = false
    this.listen()
  }

  Typeahead.prototype = {

    constructor: Typeahead

  , select: function () {
      var val = this.$menu.find('.active').attr('data-value')
      this.$element
        .val(this.updater(val))
        .change()
      return this.hide()
    }

  , updater: function (item) {
      return item
    }

  , show: function () {
      var pos = $.extend({}, this.$element.offset(), {
        height: this.$element[0].offsetHeight
      })

      this.$menu.css({
        top: pos.top + pos.height
      , left: pos.left
      })

      this.$menu.show()
      this.shown = true
      return this
    }

  , hide: function () {
      this.$menu.hide()
      this.shown = false
      return this
    }

  , lookup: function (event) {
      var items

      this.query = this.$element.val()

      if (!this.query || this.query.length < this.options.minLength) {
        return this.shown ? this.hide() : this
      }

      items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source

      return items ? this.process(items) : this
    }

  , process: function (items) {
      var that = this

      items = $.grep(items, function (item) {
        return that.matcher(item)
      })

      items = this.sorter(items)

      if (!items.length) {
        return this.shown ? this.hide() : this
      }

      return this.render(items.slice(0, this.options.items)).show()
    }

  , matcher: function (item) {
      return ~item.toLowerCase().indexOf(this.query.toLowerCase())
    }

  , sorter: function (items) {
      var beginswith = []
        , caseSensitive = []
        , caseInsensitive = []
        , item

      while (item = items.shift()) {
        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)
        else if (~item.indexOf(this.query)) caseSensitive.push(item)
        else caseInsensitive.push(item)
      }

      return beginswith.concat(caseSensitive, caseInsensitive)
    }

  , highlighter: function (item) {
      var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
        return '<strong>' + match + '</strong>'
      })
    }

  , render: function (items) {
      var that = this

      items = $(items).map(function (i, item) {
        i = $(that.options.item).attr('data-value', item)
        i.find('a').html(that.highlighter(item))
        return i[0]
      })

      items.first().addClass('active')
      this.$menu.html(items)
      return this
    }

  , next: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , next = active.next()

      if (!next.length) {
        next = $(this.$menu.find('li')[0])
      }

      next.addClass('active')
    }

  , prev: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , prev = active.prev()

      if (!prev.length) {
        prev = this.$menu.find('li').last()
      }

      prev.addClass('active')
    }

  , listen: function () {
      this.$element
        .on('blur',     $.proxy(this.blur, this))
        .on('keypress', $.proxy(this.keypress, this))
        .on('keyup',    $.proxy(this.keyup, this))

      if (this.eventSupported('keydown')) {
        this.$element.on('keydown', $.proxy(this.keydown, this))
      }

      this.$menu
        .on('click', $.proxy(this.click, this))
        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))
    }

  , eventSupported: function(eventName) {
      var isSupported = eventName in this.$element
      if (!isSupported) {
        this.$element.setAttribute(eventName, 'return;')
        isSupported = typeof this.$element[eventName] === 'function'
      }
      return isSupported
    }

  , move: function (e) {
      if (!this.shown) return

      switch(e.keyCode) {
        case 9: // tab
        case 13: // enter
        case 27: // escape
          e.preventDefault()
          break

        case 38: // up arrow
          e.preventDefault()
          this.prev()
          break

        case 40: // down arrow
          e.preventDefault()
          this.next()
          break
      }

      e.stopPropagation()
    }

  , keydown: function (e) {
      this.suppressKeyPressRepeat = !~$.inArray(e.keyCode, [40,38,9,13,27])
      this.move(e)
    }

  , keypress: function (e) {
      if (this.suppressKeyPressRepeat) return
      this.move(e)
    }

  , keyup: function (e) {
      switch(e.keyCode) {
        case 40: // down arrow
        case 38: // up arrow
        case 16: // shift
        case 17: // ctrl
        case 18: // alt
          break

        case 9: // tab
        case 13: // enter
          if (!this.shown) return
          this.select()
          break

        case 27: // escape
          if (!this.shown) return
          this.hide()
          break

        default:
          this.lookup()
      }

      e.stopPropagation()
      e.preventDefault()
  }

  , blur: function (e) {
      var that = this
      setTimeout(function () { that.hide() }, 150)
    }

  , click: function (e) {
      e.stopPropagation()
      e.preventDefault()
      this.select()
    }

  , mouseenter: function (e) {
      this.$menu.find('.active').removeClass('active')
      $(e.currentTarget).addClass('active')
    }

  }

  /* TYPEAHEAD PLUGIN DEFINITION
   * =========================== */

  $.fn.typeahead = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('typeahead')
        , options = typeof option == 'object' && option
      if (!data) $this.data('typeahead', (data = new Typeahead(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.typeahead.defaults = {
    source: []
  , items: 8
  , menu: '<ul class="typeahead dropdown-menu"></ul>'
  , item: '<li><a href="#"></a></li>'
  , minLength: 1
  }

  $.fn.typeahead.Constructor = Typeahead

 /*   TYPEAHEAD DATA-API
  * ================== */

  $(document).on('focus.typeahead.data-api', '[data-provide="typeahead"]', function (e) {
    var $this = $(this)
    if ($this.data('typeahead')) return
    e.preventDefault()
    $this.typeahead($this.data())
  })

}(window.jQuery); 
```

CSS

```
.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  display: none;
  float: left;
  min-width: 160px;
  padding: 5px 0;
  margin: 2px 0 0;
  list-style: none;
  background-color: #ffffff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  *border-right-width: 2px;
  *border-bottom-width: 2px;
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
     -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
          box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding;
          background-clip: padding-box;
}

.dropdown-menu li {
    text-align: left;
}

.dropdown-menu a {
    color: black;
    font-size: 12px;
    font-weight: normal;
    font-family : arial, helvetica;
}
.dropdown-menu a:hover {
    color: forestgreen;
} 
```

# android - 不正确的 BitmapDrawable 尺寸

> ID：13706756
> 
> 赞同：2
> 
> 时间：2012-12-04T15:54:13.377
> 
> 标签：android, bitmap, drawable

我正在像这样初始化一个 Drawable：

```
Drawable drawable = new BitmapDrawable(bitmap); 
```

位图的尺寸为 50 x 77（与调试器确认，此值在字段 mWidth 和 mHeight 中设置）。

但是我的drawable初始化大小为33 x 51，这是为什么呢？

我在这一行之后检查了可绘制变量，值是：

mBitmapWidth = 33

mBitmapHeight = 51

和

```
drawable.getIntrinsicWidth();
drawable.getIntrinsicHeight(); 
```

也返回 33 x 51。

但是drawable也有位图字段mBitmap，它有正确的大小50 x 77。那么为什么drawable被初始化为33 x 51呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:10:18.470

的尺寸`Bitmap`以**像素**为单位，而 的尺寸`Drawable`以**dp**（与密度相关的像素）为单位。

在您的情况下，显示器的密度可能类似于 1.5：

> 50 / 33 = 77 / 51 = 1.5

请注意，通过`setTargetDensity`方法设置密度时，可绘制尺寸会更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:10:36.853

[`BitmapDrawable`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#BitmapDrawable%28android.graphics.Bitmap%29)将位图的尺寸调整为设备的密度。

请注意，您使用的构造函数已弃用，文档建议使用[`BitmapDrawable(Resources res, Bitmap bitmap)`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#BitmapDrawable%28android.content.res.Resources,%20android.graphics.Bitmap%29)

# c++ - 在 CUDA 项目中使用外部库类

> ID：13706757
> 
> 赞同：3
> 
> 时间：2012-12-04T15:54:16.520
> 
> 标签：c++, cuda, libraries

我正在尝试使用 CUDA 增强一个小型 C++ 项目。我的项目正在使用自定义库的类和函数`Matrix3d, Vector3d, Plane2d`等。它们主要是几何对象。

当我尝试在设备中使用我的代码（`__host__ __device__`函数或内核）时，所有库函数/对象都被视为主机代码，例如我收到多个警告和错误`error: identifier "Plane3d::~Plane3d" is undefined in device code`

有没有办法在设备上使用我的图书馆？它是如何完成的？我没有 CUDA 和 C++ 方面的经验（我只使用 CUDA 和没有类的简单 C 代码）所以我不太了解这个策略。

有没有办法避免更改库源代码？可以更改库的代码，但如果我能避免它会更好。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:33:52.437

在 CUDA 中使用 C++ 类没有什么特别的问题。对象模型与标准 C++ 仅略有不同。

任何结构或类数据成员都会在类或结构被实例化的任何内存空间（如主机或设备）中自动定义。不自动的是类和结构内的函数成员和运算符的代码生成。程序员必须显式定义和编译那些对象将被实例化的内存空间。后一个要求意味着您必须同时拥有对象中调用的每个函数`__device__`的`__host__`定义。这包括构造函数和析构函数，后者是您在问题中显示的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:23:13.443

您不需要更改源代码 - 您需要的是编写一个适配器。

CUDA 内核使用低级结构，例如 double*、double* *、double* ** 或 float*、float* *、float* ** 以及内置的 CUDA 类型。

无论如何，CUDA 不能直接在 CUDA 外部分配的内存上工作（仅在显卡上分配内存，而不是常规 RAM），因此您必须将数据复制到图形内存中。

如果您提供可以访问您的类型使用的缓冲区的方法，您可以将它们复制到图形卡中，如果您的类型有连续的内存，或者如果没有，则以块的形式复制到显卡中（使用 CUDA 内存复制功能），那么您可以使用简单的索引将它们与内核一起处理为 double***。

# javascript - 如何使用超时添加类

> ID：13706763
> 
> 赞同：2
> 
> 时间：2012-12-04T15:54:29.490
> 
> 标签：javascript, jquery, timeout, addclass, removeclass

不知道为什么它不起作用，我认为代码很好 - 你能告诉我有什么问题吗？我需要在一段时间后添加一些课程......

```
$('.main_menu ul li').mouseenter(function(){
    setTimeout(function(){
        $(this).children('.sub_menu_main').addClass('opened')
    },200);
});
$('.main_menu ul li').mouseleave(function(){
    $(this).children('.sub_menu_main').removeClass('opened')
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:56:45.547

```
$('.main_menu ul li').on({
    mouseenter: function(){
        var self = this; //in scope
        $(self).data('timer', setTimeout(function(){ //new scope
            $(self).children('.sub_menu_main').addClass('opened'); //out of scope
        },200);
    },
    mouseleave: function(){
        clearTimeout($(this).data('timer'));
        $(this).children('.sub_menu_main').removeClass('opened');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:57:18.370

我相信`this`没有引用您认为它在该范围内所做的事情。您应该尝试在外部范围中存储对此的引用，然后通过该引用访问悬停的元素：

```
$('.main_menu ul li').mouseenter(function(){
    var that = this;
    setTimeout(function(){
        $(that).children('.sub_menu_main').addClass('opened')
    },200);
}); 
```

# windows - 如何将仅 Windows Phone 模拟器 Emulator 7 升级到 Emulator 8

> ID：13706765
> 
> 赞同：1
> 
> 时间：2012-12-04T15:54:32.167
> 
> 标签：windows, windows-phone-7, upgrade, windows-phone-8

如何将仅 Windows Phone 模拟器 Emulator 7 升级到 Emulator 8

我正在使用 Visual Studio 2010 Windows Phone 7 SDK。但我只想将 Windows Phone 7 模拟器升级到 Windows Phone 8 模拟器，否则我将不得不安装 WP* SDK。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:58:39.853

如果你想使用 Windows Phone 8 模拟器，你必须安装 Windows Phone 8 SDK。此 SDK 的系统要求如下：
[运行 Windows Phone 8 模拟器需要什么？](https://stackoverflow.com/questions/13145464/what-does-it-take-to-run-the-windows-8-phone-emulator/13145586#13145586)

# php - 字符串匹配后从文本文件中获取文件名 - PHP

> ID：13706775
> 
> 赞同：0
> 
> 时间：2012-12-04T15:55:07.493
> 
> 标签：php, strpos, pathinfo

我有一个日志文件 ( `log.txt`)，格式为：

```
=========================================
March 01 2050 13:05:00 log v.2.6 
General Option: [default] log_options.xml
========================================= 
Loaded options from xml file: '/the/path/of/log_options.xml'
printPDF started
PDF export
PDF file created:'/path/of/file.1.pdf'
postProcessingDocument started
INDD file removed:'/path/of/file.1.indd'
Error opening document: '/path/of/some/filesomething.indd':Error: file doesnt exist or no permissions 
=========================================
March 01 2050 14:15:00 log v.2.6 
General Option: [default] log_options.xml
========================================= 
Loaded options from xml file: '/the/path/of/log_options.xml'
extendedprintPDF started
extendedprintPDF: Error: Unsaved documents have no full name: line xyz 
```

注意：每个文件名的格式为：3lettersdatesomename_LO.pdf/indd。示例：MNM011112ThisFile_LO.pdf。此外，在给定的日期和时间，条目可能只有错误，只有关于创建的文件的消息或两者都有，就像我在这里展示的那样。

文件以这种方式继续。而且，我有一个表格形式的数据库：

```
id  itemName status
1   file     NULL 
```

等等...

现在，我应该浏览日志文件，并且对于创建的每个文件，或者如果有错误，我应该使用适当的消息更新 DB 的最后一列：文件创建或错误。我想搜索字符串“PDF 文件已创建/错误”，然后获取文件名。

我已经尝试过各种各样的事情，比如`pathinfo()`和`strpos`。但是，我似乎无法理解我将如何完成它。

有人可以为我提供一些关于如何解决这个问题的意见吗？txt 文件和数据库非常庞大。

注意：我提供了日志文件的第二个条目，以明确错误出现的格式不一致。我想知道我是否仍然可以通过不一致的错误格式来实现我应该达到的目标。有人可以在再次阅读整个问题后提供帮助吗？与我第一次发布此内容相比，发生了很多变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:12:26.680

您可以使用`explode`php 的方法将您的文件分成多个单词。如果您的文本文件中的字段是制表符分隔的，那么您可以在空格分隔的情况下展开`explode(String,'\t');`，或者在空格分隔的情况下展开空格。

然后`substr(word,start_index,length)`每个单词上的一个简单的可以给你文件的名称（这里`start_index`应该是0）。

使用`mysql_connect`将帮助您连接到 mysql 数据库，或者更有效的方法是使用**PDO（PHP 数据对象）**使您的代码更加可靠和灵活。

另一种方法是使用该`preg_match`方法并指定与您的错误消息匹配的正则表达式并解析文件名。

您可以随时参考[php.net 手册](http://php.net/manual)寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:16:27.077

好的，这里的主要问题是您要么没有一致的“条目”分隔符..要么您没有提供足够的信息。因此，根据您提供的内容，这是我的建议。这里的主要警告是，如果没有固定的“条目”分隔符，就无法确定错误是否与文件名匹配。解决此问题的唯一方法是更好地格式化文件。您还必须填写一些空白，例如您的数据库信息以及您实际执行查询的方式。

```
$handle = fopen("log.txt", "rb");
while (!feof($handle)) {
  // get the current row 
  $row = fread($handle, 8192);

  // get file names
  preg_match('~^PDF file created:(.*?)$~',$row,$match);
  if ( isset($match[1]) ) {
    $files[] = $match[1];
  }

  // get errors
  preg_match('~^Error:(.*?)$~',$row,$match);
  if ( isset($match[1]) ) {
    $errors[] = $match[1];
  }
}
fclose($handle);

// connect to db

foreach ($files as $k => $file) {
  // assumes your table just has basename of file
  $file = basename($file);

  $error = ( isset($errors[$k]) ) ? $errors[$k] : null;

  $sql = "update tablename set status='$error' where itemName='$file'";

  // execute query
} 
```

**编辑：** 实际上回到你的帖子，看起来你想更新一个不插入的表，所以你需要将查询更改为更新。并且您可能需要在 where 子句中进一步使用 $file `foreach`，具体取决于您将文件名存储在数据库中的方式（例如，如果您只存储基本名称，您可能希望`$file = basename($file);`在`foreach`. 更新代码以反映这一点。

因此，希望这将为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:02:38.597

所有文件都是PDF吗？如果是这样，您可以对扩展名为 .pdf 的文件进行正则表达式搜索。但是，如果文件名也包含在错误字符串中，您将需要以某种方式排除它。

```
// Assume filenames contain only upper/lowercase letters, 0-9, underscores, periods, dashes, and forward slashes
preg_match_all('/([a-zA-Z0-9_\.-/]+\.pdf)/', $log_file_contents, $matches);
// $matches should be an array containing each filename.
// You can do array_unique() to exclude duplicates. 
```

编辑：请记住，$matches 将是一个多维数组，如[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)和[http://php.net/manual/en所述/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

要测试正则表达式，您可以使用[http://regexpal.com/](http://regexpal.com/)

# c# - 无法从静态方法访问 asp 控件，但是当我删除静态时，ajax 调用将不起作用

> ID：13706777
> 
> 赞同：1
> 
> 时间：2012-12-04T15:55:09.587
> 
> 标签：c#, asp.net, ajax

我有一个名为 getPersonInfo 的方法，它的标题如下所示：

```
[WebMethod]
public static Hashtable getPersonInfo(int personID)
{
} 
```

我遇到的问题是这种方法无法访问我的 asp.net 控件。所以我当然删除了“静态”关键字。但是后来我的 ajax 调用失败了，因为它不再是静态方法。有什么建议么？

编辑：在阅读和搜索了一下之后，我意识到它不起作用。我要问的是是否有另一种方法可以获得最终结果，因为现在我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:56:57.200

这基本上是不可能的。

AJAX 方法不运行页面生命周期，因此控件实际上并不存在于服务器上。

相反，您需要在客户端上操作页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:15:49.030

您需要将控件的值从客户端传递给 getPersonInfo 方法。例如：如果它的 JQuery ajax 调用，可以使用“数据”属性传递附加参数。当然，同样需要相应地修改 getPersonInfo 方法签名。

```
$.ajax({
url: 'adduser.aspx/getPersonInfo',                        
data: { personID: $('txtPersonId').val() }, //pass additional parameters here
type: "POST",
success: function (template) {
alert('success'); },
error: function (XMLHttpRequest, textStatus, errorThrown) {
alert('error');
}
}); 
```

# c - 读取文件，将其反转并将其写入另一个文件

> ID：13706779
> 
> 赞同：0
> 
> 时间：2012-12-04T15:55:20.773
> 
> 标签：c, file-io

我们有一个文本文件，其中包含按排序顺序的 1000 万个整数。需要用 C 编写程序来反转这些数字并将其写入单独的文件。使用哪种数据结构以及如何在内存中复制如此庞大的数据？对于反转，我应该使用 fseek 还是存储在某些数据结构中然后反转？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:59:22.660

如果您想在基本桌面系统上运行它，则不需要（动态）数组以外的特殊数据结构。

最初只需为例如 1,000 个数字分配空间，开始加载，并在用完时将分配大小加倍。这将像这样增长数组：

```
1,000 -> 2,000 -> 4,000 -> 8,000 -> 16,000 -> 32,000 -> 
```

64,000 -> 128,000 -> 256,000 -> 512,000 -> 1,024,000

所以它会进行 10 次调用，`realloc()`这确实应该没问题。

一旦你有一个数组中的数字，只需向后循环并将每个数字打印到输出文件。

当然，您可以利用您知道有一百万个数字对您有利的事实，并适当地设置初始大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:41:55.887

我建议使用固定大小的缓冲区（文件系统的块大小）并从文件末尾读取块，然后将其写入新文件，向后读取缓冲区。

这样您就不必使用`realloc`任何缓冲区（这是一项昂贵的操作，尽管对于兆字节大小的文件可能没问题）。

# java - 字谜算法错误

> ID：13706781
> 
> 赞同：0
> 
> 时间：2012-12-04T15:55:26.393
> 
> 标签：java, algorithm, anagram

> **可能重复：**
> [java中的Anagram算法](https://stackoverflow.com/questions/13692221/anagram-algorithm-in-java)

```
 public static boolean test(String a, String b) {
    a=a.toLowerCase();
    b=b.toLowerCase();
    boolean result = true ;
    boolean tmp1=false;

    if(a.length()==b.length()){
    for(int i=0;i<a.length();i++){
        tmp1=false;
        for(int k=0;k<b.length();k++){
            if(a.charAt(i)==b.charAt(k)){

                return true;
                }

        }
        if(tmp1==false){
            result=false;
            break;
        }
        if(i==a.length()-1)
            result=true;
        }
    }

    else {
        result=false;
        }

    return result;

} 
```

我想制作一个程序来查找字谜单词。

当输入为

*   第一个词是dsa
*   第二个词是asd
*   输出是字谜（正确结果）

输入代码失败

*   第一个词是阿萨
*   第二个词是 asaa
*   结果是字谜（不正确的结果）

我的错是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:58:32.663

您的算法很快就确定一个单词是字谜 - 事实上，只要它可以将第一个单词的第一个字母与第二个单词的任何字母匹配：

```
if(a.charAt(i)==b.charAt(k)){
    return true;
} 
```

Java中最简单的字谜检测算法如下：

*   将`a`和转换`b` [为字符数组](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toCharArray%28%29) `charArrayA`和`charArrayB`
*   [排序](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28char%5B%5D%29) `charArrayA`和`charArrayB`
*   [创建字符串](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28char%5B%5D%29) `sortedA`并`sortedB`从排序数组
*   返回`sortedA.equals(sortedB)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:00:10.743

你让`i`从 0 到`a.length()`0`k`到`b.length()`. 所以两个循环变量都从各自字符串的开头开始。

此外，在内部循环`true`中，如果任何时候 in`b`中的任何字符与`a`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:59:23.240

首先，如果您要使用`return true`or之类的语句`return false`，请始终使用它们（摆脱`boolean result`）。

这个算法的问题是，一旦它检测到一对相同的字符，它就会返回 true。要解决此问题，请考虑对两个字符串进行排序并测试所有字符的相等性（提示：`Arrays.sort`和`String.toCharArray`）。

# javascript - 当我尝试将其插入 DOM 时，外部 javascript 被覆盖

> ID：13706787
> 
> 赞同：1
> 
> 时间：2012-12-04T15:55:50.880
> 
> 标签：javascript, jquery, dom

我能够在 jQuery 中执行外部 JS 文件（用于渲染化学分子）。但是，当加载外部 JS 文件时，它会覆盖我初始文件中的所有内容。

我应该如何在不覆盖现有 HTML 文件的情况下将外部 JS 文件插入到适当的 DOM 中（在这种情况下，是带有 className“render”的最后一个可用类）？我使用 URL 获取 JSON 格式的数据并使用 .each() 函数解析它，如下所述。

```
 $(document).ready(function(){
                $.get("someURL", function (json){
                    var obj = $.parseJSON(json);
                    $(".container").append("<ul class =\"items\">");
                    $.each(obj, function(i){
                        name = obj[i].name;
                        mol = obj[i].mol;
                        script = $(document.createElement('script')).attr('type', 'text/javascript').attr('src','js/external.js');  
                        $('ul.items').append('<li><div class="render">');
                        $(script).appendTo(".render:last");
                    });
                });
            }); 
```

我的外部 js 文件是，

```
 transform = new ChemDoodle.TransformCanvas(name, 150, 150, true);
            transform.loadMolecule(ChemDoodle.readMOL(mol)); 
```

另外，请注意，我没有编程经验，并尝试自己学习 JS/jQuery 几个月。非常感谢任何帮助/指导。
在此先感谢，考希克

我可以解决上述问题。问题出在我正在使用的 external.js（渲染化合物的 chemdoodle JS）文件中。它在内部呈现化合物结构。由于 chemdoodle 的 JS 组件存在固有问题，它曾经覆盖我的文件（无论我将其称为外部脚本还是内部函数）。我必须显式插入与 chemdoodle 使用的 id 相同的 DOM。这是我所做的，这解决了问题。它也可能对正在使用 chemdoodle 的人有所帮助！

```
 $(document).ready(function(){
                    function canvasCall(name, mol){

                        transform = new ChemDoodle.TransformCanvas(name, 150, 150, true);
                        transform.specs.bonds_useJMOLColors = true;
                        transform.specs.set3DRepresentation('Stick');
                        transform.specs.atoms_display = false;
                        transform.specs.backgroundColor = 'black'; 
                        transform.specs.bonds_clearOverlaps_2D = true;        
                        transform.loadMolecule(ChemDoodle.readMOL(mol));

                    };

                    $(".container").append("<ul class =\"items\">");

                    $.getJSON(someURL, function (obj){
                        $.each(obj, function(i){
                        var name = obj[i].name;
                        var mol = obj[i].mol;

                        $('ul.items').append("<li><div class=\"render\"><canvas id=\"" + name + "\">");
                        $("#"+name).append(canvasCall(name, mol));
                    });
                });
            }); 
```

# spring - JBoss AS7 + Oracle 11g + Spring 3.1 + JPA 2 - 多个 DS、PU、EM、TM

> ID：13706788
> 
> 赞同：1
> 
> 时间：2012-12-04T15:55:56.797
> 
> 标签：spring, hibernate, oracle11g, jpa-2.0, jboss7.x

我正在构建一个需要在两个独立数据库上进行 CRUD 操作的应用程序。事务应用于一个数据库或另一个（从不同时应用于两者……所以我的理解是不需要 JTA）。我的设置与此处的设置非常接近：[Multiple database with Spring+Hibernate+JPA](https://stackoverflow.com/questions/1902997/multiple-database-with-springhibernatejpa)

**问题：**我的服务器（JBoss AS7）启动良好。应用程序从两个数据源读取数据，比如 DS1 和 DS2，***但它只能操作来自 DS1 的数据***。我可以看到序列（Oracle 11g）正在更新，但没有表更新。没有抛出错误/异常。 *我怀疑我的一位事务管理器没有提交。*

以下是使用的技术列表和配置设置...

**技术栈**

*   JBoss AS7
*   甲骨文 11g
*   春天 3.1
*   JPA 2
*   休眠 4.1

**持久性-ds1.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
  <persistence-unit name="pu1">
    <class>com.somepackage.EntityA</class>  
    <class>com.somepackage.EntityB</class>  
    <class>com.somepackage.EntityC</class>
    <validation-mode>CALLBACK</validation-mode>
    <properties>
      <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.DefaultNamingStrategy" />
      <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
      <property name="hibernate.hbm2ddl.auto" value="validate" /> 
    </properties>
  </persistence-unit>
</persistence> 
```

**持久性-ds2.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
  <persistence-unit name="pu2">
    <class>com.somepackage.EntityD</class>  
    <class>com.somepackage.EntityE</class>  
    <class>com.somepackage.EntityF</class>
    <validation-mode>CALLBACK</validation-mode>
    <properties>
      <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.DefaultNamingStrategy" />
      <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
      <property name="hibernate.hbm2ddl.auto" value="validate" /> 
    </properties>
  </persistence-unit>
</persistence> 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:jee="http://www.springframework.org/schema/jee"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
                      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                      http://www.springframework.org/schema/tx
                      http://www.springframework.org/schema/tx/spring-tx.xsd
                      http://www.springframework.org/schema/jee         
                      http://www.springframework.org/schema/jee/spring-jee.xsd">

  <jee:jndi-lookup id="ds1" jndi-name="java:jboss/datasources/DS1"
    expected-type="javax.sql.DataSource" />
  <jee:jndi-lookup id="ds2" jndi-name="java:jboss/datasources/DS2"
    expected-type="javax.sql.DataSource" />     

  <bean id="em1" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="emf1" />
    <property name="persistenceUnitName" value="pu1" />
  </bean>
  <bean id="em2" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="emf2" />
    <property name="persistenceUnitName" value="pu2" />
  </bean>

  <bean id="emf1" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence-ds1.xml"/>
    <property name="dataSource" ref="ds1" />
    <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="showSql" value="true" />
        <property name="databasePlatform" value="org.hibernate.dialect.Oracle10gDialect" />
      </bean>
    </property>
    <property name="jpaDialect">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
  </bean>
  <bean id="emf2" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence-ds2.xml"/>
    <property name="dataSource" ref="ds2" />
    <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="showSql" value="true" />
        <property name="databasePlatform" value="org.hibernate.dialect.Oracle10gDialect" />
      </bean>
    </property>
    <property name="jpaDialect">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
  </bean>

  <tx:annotation-driven transaction-manager="txm1" />
  <tx:annotation-driven transaction-manager="txm2" />

  <bean id="txm1" class="org.springframework.orm.jpa.JpaTransactionManager">
    <qualifier value="txMgr1"/>
    <property name="entityManagerFactory" ref="emf1" />
    <property name="jpaDialect">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
  </bean>
  <bean id="txm2" class="org.springframework.orm.jpa.JpaTransactionManager">
    <qualifier value="txMgr2"/>
    <property name="entityManagerFactory" ref="emf2" />
    <property name="jpaDialect">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
  </bean>   

</beans> 
```

在我的 DAO 中，我引用了类级别的事务管理器，如下所示。

```
@Transactional("txm1")
public class DAO1 { ... }

@Transactional("txm2")
public class DAO2 { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:28:10.783

**我解决了我的问题！**

在我的 applicationContext.xml 中，我删除了以下内容。

```
<tx:annotation-driven transaction-manager="txm1" />
<tx:annotation-driven transaction-manager="txm2" /> 
```

并改用以下内容。

```
<tx:annotation-driven /> 
```

但这就是我认为的踢球者（主要问题）。在我的 DAO 中，我在类级别分配了两个事务管理器。但后来我用我声明我的方法的方式覆盖了它们。

```
@Transactional(readOnly = false, value = "txm1")
public abstract class AbstractJpaDAO1<T extends Serializable> {
...
@Transactional(readOnly = true)
public T findById(final Long id) {...}

@Transactional
public boolean insert(final T entity) {...} 
```

如您所见，方法上的 @Transaction 注释覆盖了类级别的注释。而且因为没有在方法上指定事务管理器，所以 Spring 默认为“transactionManager”，我没有（现在仍然没有）在我的 applicaitonContext.xml 中声明。因此，它试图使用不存在的事务管理器进行提交。

对于解决方案，我只是删除了方法上的 @Transitional 注释，并将其保留在类级别。

```
@Transactional(readOnly = false, value = "txm1")
public abstract class AbstractJpaDAO1<T extends Serializable> {
...
public T findById(final Long id) {...}

public boolean insert(final T entity) {...} 
```

**现在一切正常！我可以读/写两个独立的数据库。**

# java - Jcombobox - 订阅 selectedItemChanged 事件

> ID：13706789
> 
> 赞同：1
> 
> 时间：2012-12-04T15:56:07.323
> 
> 标签：java, swing, actionlistener, jcombobox, event-listener

每当组合框上的选定项目发生更改时，我都会尝试执行操作。一种特殊情况是，当您在组合框上重置模型时，未通知操作侦听器。我可以订阅另一个`PropertyChangedListener`并在模型更改时收听，然后提取所选项目，但我根本不明白为什么在模型更改时未引发所选项目更改事件。从视觉上看，您的选择确实发生了变化，即使您在 cobox 中查询所选项目，它也会从`null`某个对象更改...对此有任何明确的解决方案，而不是使用两个单独的侦听器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:29:26.530

如果重置模型时动作和项目侦听器不触发事件，您可以通过继承 JComboBox 自己触发这些事件：

```
public class MyComboBox extends JComboBox 
{
    @Override
    public void setModel(ComboBoxModel aModel) {
        super.setModel(aModel);
        fireActionEvent();
    }
} 
```

但恕我直言，这是一个错误 - 你应该向官方 bugzilla 报告。

# c# - 回发时的下拉列表项目检索问题

> ID：13706792
> 
> 赞同：1
> 
> 时间：2012-12-04T15:56:14.580
> 
> 标签：c#, asp.net, drop-down-menu

我有一个下拉列表

```
 <asp:DropDownList ID="DropDownListMySubjectz" runat="server">
                                              </asp:DropDownList> 
```

我尝试在 C# 的 CodeBehind 中填充它。

```
 HtmlGenericControl divMySubjects = (HtmlGenericControl)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("divMySubjects");
                    divMySubjects.Style["display"] = "block";
                    DropDownList mySubjects = (DropDownList)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("DropDownListMySubjectz");
                    UpdatePanel mySubjectsPanel = (UpdatePanel)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("UpdatePanelRequestAction");
                    mySubjects.DataSource = ProfileDataAccess.GetUserSubjects(Membership.GetUser().ProviderUserKey.ToString()).DefaultView;
                    mySubjects.DataTextField = "Subjects";
                    mySubjects.DataValueField = "SubjectId";
                    mySubjects.DataBind();
                    mySubjectsPanel.Update(); 
```

一切正常。直到回发发生。我尝试从 DRopDownList 中获取项目。但是 DropDownlist 是空的。但是，从代码隐藏中填充它之后是有价值的。它也得到了相同的下拉菜单。

```
 DropDownList DDL = (DropDownList)GridViewUserSubjects.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("DropDownListMySubjectz");

  DataSource that populate the gridview

 <asp:ObjectDataSource ID="ObjectDataSourceProfileSubjects" runat="server" SelectMethod="GetUserSubjects"
    TypeName="ProfileDataAccess">
    <SelectParameters>
        <asp:ControlParameter ControlID="HiddenFieldUserId" Name="suserId" PropertyName="Value"
            Type="String" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:59:16.590

使用视图状态。启用页面和控制 ViewState 。通过确认

> IIS -> Your WebSite -> Pages & Controls -> Enable Viewstate & Enable Sessionstate 应设置为 true。

或者

将数据加载到`OnInit`函数中的 DropDownList 然后应该正确加载

# jquery - 重构 JQuery 设置复选框属性

> ID：13706793
> 
> 赞同：0
> 
> 时间：2012-12-04T15:56:14.377
> 
> 标签：jquery, checkbox, refactoring

这段代码可以写成单行格式吗？

```
if ($('#sIsTopNav').text().trim() === 'True') {
    $('#chkIsTopNav').attr('checked','checked');
}else {
    $('#chkIsTopNav').removeAttr('checked');
} 
```

蒂亚..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:58:18.933

尝试使用[条件（三元）运算符](http://msdn.microsoft.com/en-us/library/ie/be21c7hw%28v=vs.94%29.aspx)，

```
$('#sIsTopNav').text().trim() === 'True' ? $('#chkIsTopNav').attr('checked','checked') :  $('#chkIsTopNav').removeAttr('checked'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:59:09.837

你可以做：

```
$('#chkIsTopNav').prop('checked', $('#sIsTopNav').text().trim() === 'True') 
```

**注意**：

*   删除该`checked`属性与将其设置为 具有相同的效果`false`。
*   Using`.prop()`是当前推荐的设置属性的方法，例如`checked`等`disabled`。

# version-control - 当我在 CVS 下复制一个签出的代码文件夹时会发生什么？

> ID：13706800
> 
> 赞同：0
> 
> 时间：2012-12-04T15:56:39.353
> 
> 标签：version-control, cvs

*   我正在使用在远程服务器上找到的 CVS 存储库。
*   我将代码签出到本地目录 code_local
*   然后我将 code_local 复制到 code_local_2

我现在有两个独立的存储库本地副本吗？我可以独立更改每个目录上的文件、提交、更新等，是否是从两台不同的计算机完成的？

（这可能取决于 CVS 存储有关本地副本的信息的方式）

是的，我知道这不是 CVS 的直接使用，只是询问它是否可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:09:47.393

> 我现在有两个独立的存储库本地副本吗？

是的，您有两个独立的**本地**副本。

> 我可以独立更改每个目录上的文件、提交、更新等吗？

不，两个副本都指向同一个存储库上的同一个文件。所以只要你没有提交它们，它们就是独立的。提交时，最后一次提交操作将覆盖前一个。

实际上，`CVS`代码的每个文件夹旁边都有一个文件夹，用于保存该文件夹内文件的存储库信息。因此，当您复制项目或包时，CVS 文件夹将被复制，因此无论您复制了多少份，都将引用相同的存储库条目。

即使您将复制的文件夹传递到另一个包层次结构，每当您提交文件时，它都会替换它首次创建的存储库中的原始文件。

如果您想拥有独立的副本，您必须仅复制和放置源代码 (.java) 文件并通过 Eclipse 提交它，在这种情况下，CVS 插件在新文件夹旁边找不到任何现有 CVS 文件夹并在本地和存储库中的新条目中生成一个新条目。

# javascript - 如何从多维数组中获取值

> ID：13706801
> 
> 赞同：-4
> 
> 时间：2012-12-04T15:56:40.213
> 
> 标签：javascript, arrays

我正在尝试访问我的数组中的值并将每个值分配给我稍后将使用的变量。我创建了一个数组，并通过函数 randomGo() 获得了外部数组的随机数，它返回这对数字。然后我想将每个值分配给一个变量。例如，如果我从 randomPlaces [0] 获得数字，我如何制作 var x= 51.528868434293244 和 var y= -0.10179429999993772？谢谢！我只使用 Javascript 和 HTML。

```
var randomPlaces = [[51.528868434293244, -0.10179429999993772], [40.70590473669712, -73.9780035], [48.85887766623369, 2.3470598999999766], [53.32443937613261, -6.251694999999927], [41.392700620871764, 2.139299250000022], [41.83401317282514, -87.73215545], [-33.79773327558923, 150.92243254999994], [50.05981411178046, 14.465623900000082], [52.50786264022465, 13.426141949999987], [30.02193806214437, -89.8822859]];

var randomLength = randomPlaces.length;

    function randomGo(){
        var randomValue = randomPlaces[Math.floor(randomPlaces.length * Math.random())];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:59:24.700

JavaScript 只有一维数组——但数组中的元素本身也可以是数组。这就是你所拥有的。（好吧，在某种程度上，JavaScript 的泛型数组[甚至是数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)......）

所以：

```
var x = randomPlaces[0][0];
var y = randomPlaces[0][1]; 
```

或者当然

```
var randomPlace = randomPlaces[0];
var x = randomPlace[0];
var y = randomPlace[1]; 
```

将其分解：`randomPlaces[0]`返回 中的第一个条目`randomPlaces`，它是对您的`[51.528868434293244, -0.10179429999993772]`数组的引用。然后我们对此进行索引。你想要的值`x`在第一位，所以在`[0]`; `y`在第二个位置的值，所以`[1]`。

如果您想要第二个数组 ( `[40.70590473669712, -73.9780035]`) 中的值，您可以使用：

```
var x = randomPlaces[1][0];
var y = randomPlaces[1][1]; 
```

...第三个数组将在`[2]`等处。

如果您想随机获取位置，您将使用，它返回和（包括，不**包括**`Math.random`）之间的小数，并将其乘以数组的长度，将结果取整（向下取整）。（假设数组有 20 个条目并返回: 。）例如：`0``1``0`**`1``Math.random()``0.8``0.8 * 20 = 16`**

 **```
var index, randomPlace, x, y;
index = Math.floor(Math.random() * randomPlace.length);
randomPlace = randomPlaces[index];
x = randomPlace[0];
y = randomPlace[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:01:33.880

您是否尝试过调用元素？

看来您应该能够通过调用 RandomPlaces[0][0] 和 -0.10179429999993772 通过调用 RandomPlaces[0][1] 来获得 51.528868434293244。

现在您只是同时调用这两个值，您可能仍然可以通过调用 randomValue[0] 和 randomValue[1] 来访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:03:41.807

在获得 randomValue 后添加：

```
var x = randomValue[0];
var y = randomValue[1]; 
```**

# algorithm - 从给定窗口生成离散随机子窗口

> ID：13706806
> 
> 赞同：3
> 
> 时间：2012-12-04T15:56:49.603
> 
> 标签：algorithm, random, probability

我正在开发一个图像处理应用程序，我有一个问题，我想从给定窗口生成一个随机子窗口。例如，给定一个 5x5（像素）的窗口，我想在 x,y 的给定位置生成一个具有给定宽度和高度的子窗口。目前，可以假设子窗口的宽度和高度总是彼此相等。但是，原始窗口没有此约束。

目前，我只是为我知道适合原始窗口的子窗口生成随机宽度/高度。然后我生成一个有效的 x,y 坐标，允许该子窗口适合原始窗口。当前方法的问题在于它不尊重这样一个事实，即*较小的窗口更丰富，因此更有可能发生*。通过为子窗口宽度/高度选择随机尺寸，我假设它们在宽度和高度方面的分布是均匀的，而实际上并非如此。

例如，假设我们有一个 5x5 的窗口。有 25 个可能的 1x1 子窗口、16 个可能的 2x2 窗口、9 个可能的 3x3 窗口、4 个可能的 4x4 窗口和 1 个可能的 5x5 窗口。因此，我应该选择一个概率约为 0.45 (25/(25+16+9+4+1) 的 1x1 窗口，一个概率约为 0.29 的 2x2 窗口等。

我不确定如何从正确的分布中快速生成此类允许的子窗口，而不用蛮力评估所有可能的窗口，然后简单地从列表中选择一个，但我相当确定有一种更聪明的方法可以做到这一点，我只是不'不知道从哪里开始。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:58:07.663

对于*n∙n*窗口，有*(n-m+1)²个大小为**m∙m*的子窗口。

一般来说，对于一个*x∙y*窗口，有*(x-m+1)(y-m+1)个大小为**m∙m*的子窗口。

推荐算法：

*   对于每个*m*，计算子窗口的数量；构建这些值的数组。
*   对数组中的值求和，并在此范围内生成一个均匀分布的整数
*   将此整数映射到相关的子窗口大小（使用 value-map 或 range-map）

**编辑：**

其实你可以做得更好。

*   有 1 个宽度为 x 的子窗口，2 个宽度为*(x-1) 的子窗口，...，x*个宽度为*(x-(x-1)) 的*子窗口。总的来说，宽度/水平位置有*(1+2+3+...+x)= x(x+1)/2 个*可能的选项。
*   *在[1, x(x+1)/2]*范围内生成一个均匀分布的整数*r*。
**   使用以下公式确定宽度：*w= x-floor( sqrt(2r-1.75)-0.5 )**

 *高度也一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:28:13.020

我将把它放在这里，即使它不太正确，因为我的模拟表明它很接近，也许我们可以找出缺陷所在。如果无法修复，我将删除它：

```
 1) Generate an Px discretely uninform on 1 to X
2) Generate a Py discretely uniform on 1 to Y
3) let Rx = X - Px + 1, let Ry = Y - Py + 1
4) Let A = Rx * Ry - the remaining area we can fill
5) Generate S discretely uniform on 1:min(Rx,Ry)

(Px,Py), (Px+S,Py),(Px,Py+S),(Px+S,Py+S) would define the coordinates of the region 
```

基本上我只选择子区域的左上角，然后随机选择一个允许的正方形子区域大小，因为我的子区域从 Rx，Ry 位置开始。子区域大小的分布具有正确的递减形状，但过于陡峭（5x5 的 100,000 次迭代）：

```
1 2 3 4 5
0.60427 0.24523 0.10356 0.03875 0.00819

```*

# c - C中具有初始值的结构

> ID：13706809
> 
> 赞同：40
> 
> 时间：2012-12-04T15:56:59.183
> 
> 标签：c, struct

我想在 C 中创建一个具有初始值的结构，例如：

```
typedef struct {
    int id = 0;
    char *name = "none";
} employee; 
```

我知道以上是不可能的，有没有其他方法可以做到这一点？

# oracle - 如何显示数据库的特定用户

> ID：13706817
> 
> 赞同：1
> 
> 时间：2012-12-04T15:57:13.037
> 
> 标签：oracle, oracle10g, sqlplus

如何使用控制台上的 sql*plus 在 oracle 10g 上显示数据库的特定用户名？我一直在寻找下表中的链接列`v$database`, `all_users`, `dba_users`, `v$session`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:06:49.667

要查询数据库中定义的用户，可以使用`all_users`视图。例如，要选择所有以`a`or开头的用户`A`，请使用

```
SELECT * 
FROM all_users 
WHERE NLS_UPPER(username) LIKE 'A%'; 
```

要查询特定用户的当前会话，您可以使用`v$session`视图。例如，要选择为以`a`or开头的用户建立的所有当前会话`A`，请使用

```
SELECT * 
FROM v$session
WHERE NLS_UPPER(username) LIKE 'A%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:09:09.020

```
select username from all_users;

or

select username from all_users where ...; 
```

有 3 组不同的视图 ALL_、DBA_ 和 USER_。

ALL_views 显示当前用户可以访问的所有信息，即它可以查看用户有权访问的所有shcemas，DBA_views 显示整个数据库的信息，并且仅供管理员使用。然后 USER_ 视图显示来自当前用户模式的信息。

听起来你需要 ALL_USERS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:04:04.743

要链接 V$SESSION 和 DBA_USERS，请使用两个视图中的“Usernanme”列。它将返回有关用户会话的详细信息。

选择 D.USERNAME, D.USER_ID, V.SID, V.STATUS from v$session v, dba_users d where V.USERNAME=D.USERNAME;

如果您还需要有关为后台进程创建的会话的详细信息，请通过 V$SESSION 中的“User#”和 DBA_USERS 中的“User_ID”加入。

从 v$session v、dba_users d 中选择 D.USERNAME、D.USER_ID、V.SID、V.STATUS，其中 V.USER#=D.USER_ID；

# ruby-on-rails - 为什么设计会话不持久？

> ID：13706822
> 
> 赞同：1
> 
> 时间：2012-12-04T15:57:24.047
> 
> 标签：ruby-on-rails, devise, warden

我们的 Rails 应用程序中的一些用户无法登录/注册，因为会话无法保持。这完全是随机的，我无法重现它。我应该监控什么来缩小问题的范围吗？是否有任何浏览器配置需要我询问用户？

应用程序正在运行 rails-3.2.8 和 devise-2.1.2

我们将会话存储到 memcached 中，允许子域：

> Authentication::Application.config.session_store ActionDispatch::Session::CacheStore, :namespace => '_sessions', :key => '_cb_session_m', :expire_after => 2.weeks, :domain => 'my_domain.com'

# ruby-on-rails - Rails 前进到父视图

> ID：13706824
> 
> 赞同：1
> 
> 时间：2012-12-04T15:57:29.230
> 
> 标签：ruby-on-rails, redirect

我有两个模型

```
class Project < ActiveRecord::Base

  attr_accessible :created_at, :name, :status, :company_id
  has_many :phases, :dependent => :destroy

end

class Phase < ActiveRecord::Base

  attr_accessible :created_at, :date_due, :name, :project_id, :status
  belongs_to :project

end 
```

创建新阶段后，我想将用户转发到新阶段所属项目的显示项目页面。

我已经尝试过这个，以及一些变体，但不太确定最好的写法：

```
def create
    @phase = Phase.new(params[:phase])

    respond_to do |format|
      if @phase.save
        redirect_to @phase.project
      else
        format.html { render action: "new" }
        format.json { render json: @phase.errors, status: :unprocessable_entity }
      end
    end
  end 
```

谢谢！

* * *

**编辑 1**

耙路线：

```
 phases GET    /phases(.:format)                  phases#index
                 POST   /phases(.:format)                  phases#create
       new_phase GET    /phases/new(.:format)              phases#new
      edit_phase GET    /phases/:id/edit(.:format)         phases#edit
           phase GET    /phases/:id(.:format)              phases#show
                 PUT    /phases/:id(.:format)              phases#update
                 DELETE /phases/:id(.:format)              phases#destroy
        projects GET    /projects(.:format)                projects#index
                 POST   /projects(.:format)                projects#create
     new_project GET    /projects/new(.:format)            projects#new
    edit_project GET    /projects/:id/edit(.:format)       projects#edit
         project GET    /projects/:id(.:format)            projects#show
                 PUT    /projects/:id(.:format)            projects#update
                 DELETE /projects/:id(.:format)            projects#destroy 
```

* * *

**编辑 2**

更新的控制器 - 现在工作。需要删除 respond_to 块（也可能只包括重定向周围的不同格式选项）

```
 def create
    @phase = Phase.new(params[:phase])

    if @phase.save
      redirect_to project_url(@phase.project)
    else
      render action: "new"
    end

  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:01:40.980

尝试以下操作：

```
redirect_to project_path(@phase.project) 
```

注意：这仅在您正确设置路线时才有效。

有关更多信息，请参阅 Rails 指南中的[使用 redirect_to](http://guides.rubyonrails.org/layouts_and_rendering.html#using-redirect_to)部分。

**编辑：**

问题可能是我们没有传递`id`to `project_path(:id)`。

```
redirect_to project_path(@phase.project.id) 
```

# javascript - Jquery：使用相同全局变量的函数弄乱了我的代码

> ID：13706827
> 
> 赞同：0
> 
> 时间：2012-12-04T15:57:43.147
> 
> 标签：javascript, jquery, scroll, global-variables

基于这个 awnser：[如何确定 jQuery 滚动事件的方向？](https://stackoverflow.com/questions/4326845/how-can-i-determine-the-direction-of-a-jquery-scroll-event)

我做了这样的功能：

```
tempScrollTop=0;
$.fn.cool = function(options){
    windowTop = $(window).scrollTop(); 

    if (tempScrollTop < windowTop ){
        //scroll down
    }
    else if (tempScrollTop > windowTop ){
        //scroll up
    }

    tempScrollTop = windowTop;
}; 
```

但每次我尝试使用我的功能

```
 $(window).scroll(function(e) {
    $("#element1").cool();
    $("#element2").cool();
 } 
```

$("#element2") 采用已由 $("#element1") 修改的全局变量 tempScrollTop 并且对于元素 2 tempScrollTop 和 windowTop 具有相同的值，因此我的函数不起作用。

关于我能做什么的任何想法？我不想为每个元素创建 n 个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:10:57.443

看来您真正想要做的是：

```
$("#element1","#element2").cool(); 
```

然后在你很酷的功能中：

```
tempScrollTop=0;
$.fn.cool = function(options){
windowTop = $(window).scrollTop(); 

if (tempScrollTop < windowTop ){
    //scroll down
    this.each(function() {
        // do stuff with each selected element $(this)
    });
}
else if (tempScrollTop > windowTop ){
    //scroll down
    this.each(function() {
        // do stuff with each selected element $(this)
    });
}

tempScrollTop = windowTop;
}; 
```

更多关于插件创作的信息在[这里](http://docs.jquery.com/Plugins/Authoring)。

另一种方法是将滚动计算与元素上的操作分开：

```
$(window).scroll(function(e) {
    var scrollDiff=calculateScroll();
    $("#element1").cool(scrollDiff);
    $("#element2").cool(scrollDiff);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:03:54.360

```
var tempScrollTop = 0,
    innerScrollTop;
    $.fn.cool = function(options){
        var $this = $(this);
        innerScrollTop = $this.data('scrollTop') || tempScrollTop;

        windowTop = $(window).scrollTop();

        if (innerScrollTop <= windowTop ){
            //scroll down
        } else {
            //scroll up
        }

        $this.data('scrollTop', windowTop);
    }; 
```

# jquery - 如何在 ASP.Net 中实现类似 Chrome 的选项卡？

> ID：13706835
> 
> 赞同：2
> 
> 时间：2012-12-04T15:58:01.993
> 
> 标签：jquery, asp.net, asp.net-mvc-3, jquery-ui, jquery-ui-tabs

我已经针对这个主题研究了关于 SO 的现有帖子，但似乎没有一个令人满意的答案。

我正在尝试实现类似于 ASP.Net MVC3 中 Chrome 的选项卡行为，特别是选项卡将具有以下行为：

1.  被拖出并作为页面上的可拖动 div 独立。我正在考虑将 jQuery 对话框与 iFrame 一起使用。需要有关如何使其看起来像标签的帮助/建议。
2.  最小化后，作为现有选项卡容器中的选项卡返回

第 2 点可能很容易实现 - 我只是隐藏 div 并重建选项卡，但是有没有人完成 #1 和/或可以帮助为我指明起始方向？

每个选项卡对应一个局部视图（mvc）/用户控件（web 表单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:49:31.853

无论如何，我会使用具有基本 API 功能的**Telerik Kendo UI**控件，并使用自己的 javascript JQuery 代码组合和增强它们。

[http://demos.kendoui.c​​om/web/tabstrip/index.html](http://demos.kendoui.com/web/tabstrip/index.html)

基本上，您知道，它们是与**ASP.NET**尤其是**MVC**的非常方便的组合！

-

对于您的**问题**，作为一种方法，我会看到**TabStrip**和要使用的**窗口**！

看看他们的客户端 API 事件：[http ://docs.kendoui.c​​om/api/web/window](http://docs.kendoui.com/api/web/window)

并想象 JQuery 的 Draggable Droppable 等[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)的组合使用，然后与 TabStrip html 元素一起使用。

**总结一下，我主要在我的 javascript 块中使用以下功能：**

*   JQuery 基础知识，特别是 TabStrip / Window 上使用的 Draggable Dropable - HTML 元素（通过 FireBug 找出使用了哪些元素）
*   Kendo UI API 事件和方法：打开、关闭、绑定等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:23:18.277

谢谢大家的帮助！我最终做了以下事情：

*   将无序列表 (ul) 样式化为制表符
*   使每个列表项 (li) 可拖动
*   在 li 的 onstop 事件上，在当前鼠标位置打开一个对话框（带有 iframe）。
*   将 iframe 的 src 属性设置为选项卡内容。

下面的代码片段：

```
$('li').draggable({
            iframeFix: true,
            stop: function (event) {
                var title = //give a title
                var newId = //create a unique id

                $('#draggableTabsContainer').append('<div id="' + newId + '"></div>');

                var x = $(this).position().left;
                var y = $(this).position().top;

                $('#' + newId).dialog({
                    iframe: true,
                    autoOpen: false,
                    width: 700,
                    height: 700
                });

                $('#' + newId).append($("<iframe id='frm" + newId + "' class='tab-iframe'/>")).dialog('open');

                var url = $(this).find('a.tab').data('src');

                $('#frm' + newId).attr('src', url);

                $('#' + newId).dialog({ position: [x, y], 'title': title });

                $(this).remove();

            }
        }); 
```

ul/li 的 HTML：

```
<ul id="tablist">
        <li><a class="tab" href="#" data-src="controller_name/view_name1"><b>View 1</b></a></li>
        <li><a class="tab" href="#" data-src="controller_name/view_name2"><b>View 2</b></a></li>
</ul> 
```

# java - 关闭 Japplet 并不会结束 java 进程

> ID：13706839
> 
> 赞同：1
> 
> 时间：2012-12-04T15:58:18.327
> 
> 标签：java, japplet

我有一个运行 Japplet 的基于浏览器的应用程序。我
在 64 位窗口机器上运行这个应用程序。
当我关闭应用程序时，java 进程不会自动关闭。32 位机器没有这个问题。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:52:52.173

> 当我关闭应用程序时，java 进程不会自动关闭

请注意，32 位 JRE 通常不会在最后一个小程序线程完成后一分钟左右之前退出。

确保在假定（非守护程序）线程仍在运行或任何其他可能的 JVM/浏览器怪癖之前等待至少那么长时间。

# linux - 指向 mysql-includes，尝试配置 sphinx 搜索

> ID：13706842
> 
> 赞同：0
> 
> 时间：2012-12-04T15:58:20.837
> 
> 标签：linux, centos, sphinx, putty

当我尝试配置 Sphinx 搜索时，我得到以下信息，我相信很多人以前都见过......

（在 Linux VPS 上使用 Cent OS。Sphinx tarball 已下载并解压缩。）

```
ERROR: cannot find MySQL include files.

Check that you do have MySQL include files installed.
The package name is typically 'mysql-devel'.

If include files are installed on your system, but you are still getting
this message, you should do one of the following:

1) either specify includes location explicitly, using --with-mysql-includes;
2) or specify MySQL installation root location explicitly, using --with-mysql;
3) or make sure that the path to 'mysql_config' program is listed in
your PATH environment variable.

To disable MySQL support, use --without-mysql option. 
```

所以，我跑去`# which mysql-includes`找到那个，这就是我得到的……

`/usr/bin/which: no mysql-devel in (/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin)`

那也可能是一种外星语言，现在我被困住了。我知道 MySQL 已安装在我的服务器上，因为我有已设置并正在使用的数据库。谁能帮我克服这个障碍？

另外，如何使用类似的东西的一个很好的例子是什么`--with-mysql-includes`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:04:24.320

```
yum install mysql-devel 
```

这将从 CentOS 存储库中获取 mysql 开发包

# google-chrome - 在 Chrome 中的复杂 SVG 形状上显示带有多个停止点的线性渐变时出错

> ID：13706849
> 
> 赞同：5
> 
> 时间：2012-12-04T15:58:40.323
> 
> 标签：google-chrome, svg, gradient, chromium

我在 Chrome 23 中显示填充有水平线性渐变的复杂形状时遇到问题，而在 Firefox 上它显示正确。

这是来源：

```
 <svg width="5000" height="1146">
    <defs>
      <linearGradient id="gradient0" x1="0%" y1="0%" x2="100%" y2="0%" spreadMethod="pad">
        <stop offset="0%" stop-color="#000000"></stop>
        <stop offset="4.3478260869565215%" stop-color="#ffffff"></stop>
        <stop offset="8.695652173913043%" stop-color="#000000"></stop>
        <stop offset="13.043478260869565%" stop-color="#ffffff"></stop>
        <stop offset="17.391304347826086%" stop-color="#000000"></stop>
        <stop offset="21.73913043478261%" stop-color="#ffffff"></stop>
        <stop offset="26.08695652173913%" stop-color="#000000"></stop>
        <stop offset="30.434782608695652%" stop-color="#ffffff"></stop>
        <stop offset="34.78260869565217%" stop-color="#000000"></stop>
        <stop offset="39.130434782608695%" stop-color="#ffffff"></stop>
        <stop offset="43.47826086956522%" stop-color="#000000"></stop>
        <stop offset="47.82608695652174%" stop-color="#ffffff"></stop>
        <stop offset="52.17391304347826%" stop-color="#000000"></stop>
        <stop offset="56.52173913043478%" stop-color="#ffffff"></stop>
        <stop offset="60.869565217391305%" stop-color="#000000"></stop>
        <stop offset="65.21739130434783%" stop-color="#ffffff"></stop>
        <stop offset="69.56521739130434%" stop-color="#000000"></stop>
        <stop offset="73.91304347826087%" stop-color="#ffffff"></stop>
        <stop offset="78.26086956521739%" stop-color="#000000"></stop>
        <stop offset="82.6086956521739%" stop-color="#ffffff"></stop>
        <stop offset="86.95652173913044%" stop-color="#000000"></stop>
        <stop offset="91.30434782608695%" stop-color="#ffffff"></stop>
        <stop offset="95.65217391304348%" stop-color="#000000"></stop>
        <stop offset="100%" stop-color="#ffffff"></stop>
      </linearGradient>
    </defs>
    <g>
      <path style="fill:url(#gradient0);" d="M0,779.6285756579973Q188.40579710144928,841.081456685821,217.3913043478261,843.314835189802C260.8695652173913,846.6649029457736,391.304347826087,814.2594898547115,434.7826086956522,813.1292532177131S608.695652173913,834.5442766841929,652.1739130434783,832.0124688198168S826.0869565217391,794.6248826891217,869.5652173913044,787.8111745739515S1043.4782608695652,766.5393037818999,1086.9565217391305,763.8753876681141S1260.8695652173913,760.8732388688913,1304.3478260869565,761.1720134360927S1478.2608695652173,763.9854486465747,1521.7391304347825,766.8631333401279S1695.6521739130435,785.1411786313408,1739.1304347826087,789.9488603716242S1913.0434782608695,813.3719811720902,1956.5217391304348,814.939950742961S2130.434782608696,802.822363864396,2173.913043478261,805.6285560803321S2347.826086956522,836.4433774429324,2391.304347826087,843.0018729023216S2565.217391304348,858.1981456728363,2608.695652173913,871.2135106742245S2782.608695652174,967.6199962598103,2826.086956521739,973.1555229162032S3000,928.3947882612744,3043.478260869565,926.5687772381535S3217.3913043478265,963.2067254481539,3260.8695652173915,954.8954126849945S3434.7826086956525,850.6427255665794,3478.2608695652175,843.45564960656S3652.1739130434785,881.8886509252865,3695.6521739130435,883.0246530848S3869.5652173913045,836.9424921296683,3913.0434782608695,854.8156712016948S4086.956521739131,1040.6944601645232,4130.434782608696,1061.7564438050654S4304.347826086957,1064.350749527541,4347.826086956522,1065.4355076071165S4521.739130434783,1084.6840223283762,4565.217391304348,1072.6040246008204S4739.130434782609,961.6724654492547,4782.608695652174,944.6355303315577Q4811.594202898551,933.2775735864263,5000,902.2346734238499L5000,929.5546407071457Q4811.594202898551,986.8066995590544,4782.608695652174,999.2363901785781C4739.130434782609,1017.8809261078635,4608.695652173913,1104.7567082129335,4565.217391304348,1116S4391.304347826087,1111.9003103524788,4347.826086956522,1111.6693080492425S4173.913043478261,1132.556931553748,4130.434782608696,1113.6899769676372S3956.5217391304345,940.1843652548877,3913.0434782608695,922.9997621881347S3739.1304347826085,942.0801934799161,3695.6521739130435,941.8439463001079S3521.7391304347825,914.4187396145448,3478.2608695652175,920.6372903900522S3304.3478260869565,998.0838620912253,3260.8695652173915,1004.0294540551805S3086.95652173913,978.0745583843735,3043.478260869565,980.093210029604S2869.565217391304,1029.959108719383,2826.086956521739,1024.2159705074864S2652.173913043478,936.1148674257628,2608.695652173913,922.661827910638S2434.782608695652,896.1180594356094,2391.304347826087,889.6855753562377S2217.391304347826,861.9257157322984,2173.913043478261,858.3369871169205S2000,856.8202625360321,1956.5217391304348,853.7982892024586S1782.608695652174,833.51842660998,1739.1304347826087,828.1172537811854S1565.2173913043478,804.2133989045794,1521.7391304347825,799.7865609145126S1347.8260869565217,785.5464804078146,1304.3478260869565,783.8488738805177S1130.4347826086957,780.0144097711119,1086.9565217391305,782.8104956415439S913.0434782608696,804.0107985673161,869.5652173913044,811.8097325848375S695.6521739130435,855.7782129005594,652.1739130434783,860.7998358167584S478.2608695652174,859.0301242287742,434.7826086956522,862.0259617468273S260.8695652173913,894.7552100004517,217.3913043478261,890.75821099729Q188.40579710144928,888.0935449951822,0,822.0559717152104Z"></path>
    </g>
  </svg> 
```

[这是图像](http://imgur.com/a/10KLl#0)，[这里是生成的 html + svg](http://jsfiddle.net/kqwfZ/)（您可能需要在结果窗口中向下滚动一点）

顺便说一句，如果您将 Chrome 页面缩放比例降低到 75% 或更少，渲染效果会好很多，但仍然不是很正确。

我做错了什么还是这是一个已知的 Chrome 错误？我无法在 Chromium 错误跟踪器中找到它。任何已知的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:24:08.583

要解决 Chrome 的错误，您可以申请`spreadMethod="reflect"`...

```
 <defs>
      <linearGradient id="gradient0" x1="0" y1="0%" x2="4.3478260869565215%" y2="0%" spreadMethod="reflect">
        <stop offset="0" stop-color="#000000"></stop>
        <stop offset="1" stop-color="#ffffff"></stop>
      </linearGradient>
    </defs> 
```

[http://jsfiddle.net/aCzej/](http://jsfiddle.net/aCzej/)

# java - java.io.IOException: 使用 pipeWriter 和 pipeReader 时出现 Pipe closed

> ID：13706852
> 
> 赞同：0
> 
> 时间：2012-12-04T15:58:52.057
> 
> 标签：java, multithreading, pipeline

我正在尝试实现一个解释 Pipe&Line 数据流架构的程序。我有一个数据源和许多过滤器，数据源类在管道上写入一个字符数组（使用 PipeWriter），第一个过滤器从管道读取数组并将字符转换为大写，然后写入大写字符数组进入同一个管道，以便被下一个过滤器读取，依此类推。我在我的应用程序中使用多线程。这是一些可能解释我正在尝试做的代码：

```
public class DataSource implements Runnable{
   PipedWriter pw;
   public char[] c  = {'e','a','b','c','e','c','a','f','e','d'};
   public DataSource(PipedWriter pw){
        this.pw = pw;
   }

public  synchronized  void run() {
    try {
        pw.write(c);
        pw.write(-1);
        pw.close();
    } catch (IOException ex) {
        Logger.getLogger(DataSource.class.getName()).log(Level.SEVERE, null, ex);
    }

}
 } 
```

* * *

```
public class UpperCaseConversionFilter implements Runnable{
PipedReader pr;
PipedWriter pw;
char[] upperCaseLetters;

public UpperCaseConversionFilter(PipedReader pr,PipedWriter pw){
    this.pr = pr;
    this.pw = pw;
    upperCaseLetters = new char[10];
}
public synchronized void run() {
    try {
        int i;
        int d = 0 ;
        while ((i = pr.read()) != -1) {
           char y = (char)i;
           upperCaseLetters[d] = Character.toUpperCase(y);
           d++;
       }
           pw.write(upperCaseLetters);   // here apperas the exception
           pw.write(-1);
           pw.close();

    } catch (IOException ex) {
        Logger.getLogger(UpperCaseConversionFilter.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

}

这是我测试代码的方式：

```
 public static  void facadDetails(){
    PipedWriter pw = null;
    PipedReader pr = null;
    try {
        // TODO code application logic here
        pr = new PipedReader();
        pw = new PipedWriter(pr);
        DataSource dso = new DataSource(pw);
        UpperCaseConversionFilter f1 = new UpperCaseConversionFilter(pr,pw);

        new Thread(dso).start();
        new Thread(f1).start();

    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    }

     } 
```

谁能帮我解决这个问题？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:46:26.103

“然后将大写字符数组写入同一个管道，以便下一个过滤器读取” - 这是错误的。如果您写入同一个管道，它会自行读取（形成无限循环），而不是下一个过滤器。

我猜你想要类似的东西：

DataSource => pw1->pr1 => UpperCaseConversionFilter => pw2->pr2 => 下一个过滤器

所以你需要2对或更多对（PipedWriter，PipedReader）。

# design-patterns - 状态模式滥用

> ID：13706855
> 
> 赞同：0
> 
> 时间：2012-12-04T15:59:01.137
> 
> 标签：design-patterns, state-pattern

我正在尝试创建一个从状态到状态的简单流程（总共 6 个或 7 个），我决定实现一个状态模式。当真正应该有一个主要流程时，让每个状态转换到每个状态感觉好像有太多的开销。所以基本上每个状态只会真正转换到下一个状态。这不是状态模式的用途，对吗？我将其理解为一种能够从几乎每个状态过渡到每个其他状态的模式（可能有一些例外）。我应该为我的场景使用什么模式？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:06:20.500

状态机可以根据输入实现从一种状态到特定其他状态的转换。不要求每个州都可以直接从其他州到达。

正如 ryadavilli 在他的评论中所写，你所拥有的是一个工作流，它是一种特定类型的状态机，你只能从一个状态转到下一个状态。

工作流通常用于有限过程（例如一系列动作），而状态机通常用于无限过程（例如等待消息、识别类型、进程、返回等待消息）。

# database-design - SDP 的合理长度限制是多少？

> ID：13706870
> 
> 赞同：0
> 
> 时间：2012-12-04T15:59:31.413
> 
> 标签：database-design, database-schema, sdp

我需要存储[WebRTC返回的](http://www.webrtc.org/)[SDP](https://www.rfc-editor.org/rfc/rfc4566)结构。该规范没有定义最大长度，但显然数据库需要一个。

在这种情况下，合理的长度限制是多少？在这种未定义的情况下，您通常如何决定长度限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:22:43.243

通常，不需要存储整个 SDP 数据包。在大多数情况下，SDP 数据包长度没有上限这一事实不是问题。

在这种情况下，您可以做的最简单的事情就是使用[blob](http://en.wikipedia.org/wiki/Binary_large_object)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:59:44.683

除非 SessionId 和 Originator 在 SDP 中发生变化，否则它可能不起作用。

另一个堆栈可能会看到 SDP 并接受它，但无法与远程客户端通信。

SDP 很可能必须在某种程度上重新编写。如果您想要一个替代方案，您可以将 SDP 转换为 XML 并将 XML 存储在数据库中，然后使用函数来查询 xml 并将其作为 SDP 动态写出。...

如果 XML 是不可能的，并且您真的只关心存储，请参阅`filestream`SQLServer [http://www.databasejournal.com/features/mssql/filestream-and-filetable-in-sql-server-2012.html中的选项](http://www.databasejournal.com/features/mssql/filestream-and-filetable-in-sql-server-2012.html)

此外，在阅读了仅与 WebRTC 相关的草案规范之后......

[https://datatracker.ietf.org/doc/html/draft-nandakumar-rtcweb-sdp-00#page-3](https://datatracker.ietf.org/doc/html/draft-nandakumar-rtcweb-sdp-00#page-3)

我相信由于 SDP 中使用了密钥交换，您肯定必须重写 SDP 的部分内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T04:21:59.170

回答我自己的问题。

您可以使用历史值估计最大长度，也可以使用 BLOB。就我而言，我最终选择了 4000 字节的理论限制。

# ios - URL 未通过 UIWebview 委托方法在 Safari 浏览器中打开

> ID：13706872
> 
> 赞同：0
> 
> 时间：2012-12-04T15:59:33.300
> 
> 标签：ios, uiwebview, xcode4.5

我正在尝试从我的班级加载 UIWebview 这是它的 testClass.h 文件

```
#import <UIKit/UIKit.h>
@interface testClass : UIView<UIWebViewDelegate>

@property(nonatomic,retain) UIViewController *superObj;
- (void) showView;
@end 
```

下面是 testClass.m 的代码，superObj 是一个主 viewContrller 的自我分配。

```
@synthesize superObj; //assigned from viwController as self 
- (void)showView {
    CGRect firstRect = CGRectMake(0, 0, 100.0, 50.0);
    UIWebView *webView = [[UIWebView alloc] initWithFrame:firstRect];
    webView.delegate = self;
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost/inapp/index.php"]]];
    [superObj.view addSubview:webView];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    NSLog(@"In delegate method");
   if ([[[request URL] absoluteString] isEqual:@"http://localhost/inapp/index.php"])
        return YES;    
   [[UIApplication sharedApplication] openURL:[request URL]];//opens url in safari
   return NO;
} 
```

这能够显示 UIWebview 并在其中呈现 html，但是当我单击 url 控件时不会使用 shouldStartLoadWithRequest 方法。我无法理解为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:31:44.860

从文档中：

**webView:shouldStartLoadWithRequest:navigationType:**

如果 Web 视图应该开始加载内容，则返回值YES；否则，否。

# c# - 不确定 DbContext 如何为错误的表创建 SQL 查询

> ID：13706874
> 
> 赞同：4
> 
> 时间：2012-12-04T15:59:36.560
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

我是 Entity Framework 的新手，但我试图在网上找到一些示例后对我的代码进行建模。我以为我已经按照我想要的方式设置了它，但是创建的查询指向错误的、不存在的表。我想知道它从哪里得到表名，因为它是错误的，而且我在任何项目文件中都没有看到指定了这个错误表名的任何位置。这是生成的查询，我从调试中得到：

```
{SELECT 
[Extent1].[AssetTag] AS [AssetTag], 
[Extent1].[Location] AS [Location], 
[Extent1].[PoolType] AS [PoolType], 
[Extent1].[InventoryStatus] AS [InventoryStatus], 
[Extent1].[InventoryType] AS [InventoryType], 
[Extent1].[Comments] AS [Comments]
FROM [dbo].[ComputerInventories] AS [Extent1]} 
```

ComputerInventories 应该是 ComputerInventory。

这是我的数据模型

```
public class ComputerInventory
    {
        [Key]
        public String AssetTag {get; set;}
        public String Location { get; set; }
        public String PoolType { get; set; }
        //public String ReasonInProgram { get; set; }
        public String InventoryStatus { get; set; }
        public String InventoryType { get; set; }
        [StringLength(500)]
        public String Comments { get; set; }
        //public String Clock { get; set; }
    }

    public class AssetDBContext : DbContext
    {
        public DbSet<ComputerInventory> ComputerInventory { get; set; }

        public AssetDBContext()
            : base("Name=<name>")
        {
        }
    } 
```

这是我试图从查询中获取列表的地方

```
public ViewResult Index()
        {
            return View(db.ComputerInventory.ToList());
        } 
```

我完全不知道它在哪里获取表名的 ComputerInventories 值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:02:53.707

实体框架对许多事情使用命名约定。其中之一是表名是通过取实体名称的复数来创建的。您可以像这样删除该约定：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{    
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
} 
```

请参阅[MSDN 上的 PluralizalingTableNameConvention](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.conventions.pluralizingtablenameconvention%28v=vs.103%29.aspx)。

有关公约的更多信息

[http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions](http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:37:47.903

尽管已经回答了这个问题，但我只想为任何未来访问此问题的访问者添加一个替代方案......

而不是删除约定，只需通过覆盖相同的方法来指定表的名称。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
     modelBuilder.Entity<Object>().ToTable("TableName");
} 
```

# mirth - Mirth connect：javascript 阅读器和 bytea

> ID：13706875
> 
> 赞同：1
> 
> 时间：2012-12-04T15:59:38.807
> 
> 标签：mirth

我需要在通道读取器中从数据库中读取一个 blob 字段，然后通过 TCP 发送它。

我可以使用数据库阅读器轻松完成此操作，除非我有 Blob 字段，因此我尝试使用 JavaScript 阅读器：

```
var dbConn = DatabaseConnectionFactory.createDatabaseConnection('org.postgresql.Driver','jdbc:postgresql://127.0.0.1:5432/ris','postgres','postgres');
// You may access this result below with $('column_name')
var resultQuery = "select mensajehl7, p.ip, p.port from turnohl7 h7 join pacs p on p.idpacs=h7.idpacs where h7.estado='NW'";
var qryResult = dbConn.executeCachedQuery(resultQuery);

var result = new Packages.java.util.ArrayList();

while(qryResult.next())
{ 
  var columna = new Array();
  columna['hl7'] = qryResult.getBytes(1);
  result.add(columna);
}

dbConn.close();
return result; 
```

正如堆栈跟踪所暗示的，结果似乎需要是一个 XML：

```
[2012-12-04 12:56:29,227]  ERROR (org.mule.impl.DefaultComponentExceptionStrategy:95): Caught exception in Exception Strategy for: f4a3cccb-902e-4504-86f5-0bfa473ad144: org.mule.umo.routing.RoutingException: Failed to transform message before applying the filter. Failed to route event via endpoint: ImmutableMuleEndpoint{connector=com.mirth.connect.connectors.js.JavaScriptConnector@379cf50c, endpointUri=js://sink, transformer=Transformer{name='ResultMapToXML', returnClass=false, returnClass=false, sourceTypes=[interface java.util.Map, class java.lang.String]}, name='_jsEndpoint#-1389160782', type='receiver', properties={}, transactionConfig=org.mule.impl.MuleTransactionConfig@44adab2d, filter=null, deleteUnacceptedMessages=false, initialised=true, securityFilter=null, synchronous=true, initialState=started, createConnector=0}. Message payload is of type: java.lang.String
org.mule.umo.routing.RoutingException: Failed to transform message before applying the filter. Failed to route event via endpoint: ImmutableMuleEndpoint{connector=com.mirth.connect.connectors.js.JavaScriptConnector@379cf50c, endpointUri=js://sink, transformer=Transformer{name='ResultMapToXML', returnClass=false, returnClass=false, sourceTypes=[interface java.util.Map, class java.lang.String]}, name='_jsEndpoint#-1389160782', type='receiver', properties={}, transactionConfig=org.mule.impl.MuleTransactionConfig@44adab2d, filter=null, deleteUnacceptedMessages=false, initialised=true, securityFilter=null, synchronous=true, initialState=started, createConnector=0}. Message payload is of type: java.lang.String
    at org.mule.routing.inbound.SelectiveConsumer.isMatch(SelectiveConsumer.java:64)
    at org.mule.routing.inbound.InboundMessageRouter.route(InboundMessageRouter.java:79)
    at org.mule.providers.AbstractMessageReceiver$DefaultInternalMessageListener.onMessage(AbstractMessageReceiver.java:487)
    at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:266)
    at org.mule.providers.AbstractMessageReceiver.routeMessage(AbstractMessageReceiver.java:225)
    at com.mirth.connect.connectors.js.JavaScriptMessageReceiver.processMessage(JavaScriptMessageReceiver.java:101)
    at com.mirth.connect.connectors.js.JavaScriptMessageReceiver.poll(JavaScriptMessageReceiver.java:82)
    at org.mule.providers.PollingMessageReceiver.run(PollingMessageReceiver.java:97)
    at org.mule.impl.work.WorkerContext.run(WorkerContext.java:290)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1061)
    at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Unknown Source)Caused by: org.mule.umo.transformer.TransformerException: java.lang.StringIndexOutOfBoundsException: String index out of range: -2 (com.mirth.connect.server.mule.adaptors.AdaptorException)
    at com.mirth.connect.server.mule.transformers.JavaScriptTransformer.transform(JavaScriptTransformer.java:285)
    at org.mule.transformers.AbstractEventAwareTransformer.doTransform(AbstractEventAwareTransformer.java:48)
    at org.mule.transformers.AbstractTransformer.transform(AbstractTransformer.java:197)
    at org.mule.transformers.AbstractTransformer.transform(AbstractTransformer.java:200)
    at org.mule.transformers.AbstractTransformer.transform(AbstractTransformer.java:200) 
```

如何在变压器中使用我的 bytea 字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:53:16.897

这个答案不会是直接的，但希望它会有所帮助。

我从两个方面讲：

## 1.从数据库中获取HL7数据

我做了类似的事情，除了在我的情况下，HL7 数据以 varchar(max) 的形式存储在 SQL Server 中，并且我调用存储过程而不是传递完整的查询。

返回数据表时，我们将hl7数据提取为clob（不是blob）如下

```
// the hl7 data is returned as a CLOB, not a string
var hl7MsgClob  = dataTable.getClob("HL7");
var clobLength = hl7MsgClob.length();

// clobs have a starting index of 1, and the getSubString is inclusive on both ends of the range
var hl7Msg = hl7MsgClob.getSubString(1,clobLength);

// This is a code template that decodes characters we escaped prior to writing to SQL Server
var cleanHL7 = Util_DecodeTextFromSQLStorage(hl7Msg);

// convert the message to an XML format
var HL7AsXML = SerializerFactory.getHL7Serializer(false,false,true).toXML(cleanHL7); 
```

## 2\. 在 Mirth 中传递数据

您从 Javascript 阅读器返回的数据类型必须与频道源的数据类型相匹配。我不知道较新的 Mirth 版本，但在 1.8.2 版本中，这是在标记为“传入数据”的下拉列表中的“摘要”选项卡上配置的。

如果您将此设置为 HL7 v2.x，那么所需的数据类型实际上可能是 HL7 v.2.x 的 XML 变体——而不是更熟悉的管道分隔格式。如果您的 hl7 是管道分隔格式，为了进行实验，您可以使用我在上面发布的最后一行代码将其转换为 XML 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T15:28:03.193

从数据库中获取 blob 的一种简单方法是在您的 select 语句中使用强制转换。

```
CAST(<Field Name> AS CHAR(10000) CHARACTER SET utf8) AS '<FieldName>' 
```

# javascript - jQuery“更改”是否适用于从外部文件加载的字段？

> ID：13706879
> 
> 赞同：0
> 
> 时间：2012-12-04T15:59:57.727
> 
> 标签：javascript, jquery, forms, external, onchange

我通过外部 .html 文件插入了三种不同的表单。表格一次显示一个。当用户按下“确定”或“返回”时，表单会更改并加载其他两个表单之一。到目前为止，这工作正常。

现在我想跟踪用户的输入，并考虑使用为每个输入字段分别触发的 jQuery“更改”来执行此操作，但它不起作用。任何帮助都会很棒！

```
var tabContent = new XMLHttpRequest();
tabContent.onreadystatechange = processText;
tabContent.open("GET", "tabd.html", true);
tabContent.send();

function processText() {
    if (tabContent.readyState == 4) {
    tab = tabContent.responseText;
    document.getElementById("tabholder").innerHTML += tab;
    focusOnElem();
    }
} 
```

表单域：

```
<input id="day" value="15" maxlength="2"/> 
```

事件：

```
$("#day").change(function(){
    console.log("change");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:05:57.150

绑定事件时，触发该事件的元素必须存在才能被绑定。当您在页面加载时将事件处理程序附加到一组元素时，只有当前存在于 DOM 中的元素会受到该事件处理程序的影响。要同时包含 DOM 中不存在但稍后将动态插入的元素，您必须将事件委托给 DOM 中实际存在的更高元素，并检查目标元素是否与选择器匹配。这称为委托事件处理程序，在 jQuery 中看起来像这样：

```
$('#tabholder').on('change', '#day', function(){
    console.log("change");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:00:12.083

谢谢你的帮助！我尝试了你的建议，但没有奏效。我注意到

```
$('#tabholder').on('change', '#day', function(){
    console.log("change");
}); 
```

仅适用于 textarea 而不是任何其他输入。这是否与我正在改变它们的价值而不是innerHTML这一事实有关？

无论如何，对我有用的是使用两个函数，一个用于存储当前值，并且在 iser 按下键时调用：

```
document.onkeydown = function(k) {
        memorise();
}
function memorise() {
        console.log("memorise");
        if (stage == 1) {
            dayMemo = $("#day").attr("value");
            monthMemo = $("#month").attr("value");
            console.log(dayMemo, monthMemo);
        } else if (stage == 2) {
            hourMemo = $("#hour").attr("value");
            minuteMemo = $("#minute").attr("value");
            console.log(hourMemo, minuteMemo);
        } else if (stage == 3) {
            commentMemo = $("#comment").attr("value");
            console.log(commentMemo);
        }
    } 
```

一个重新获得值，每当我从外部文件加载某些内容时都会调用这个值：

```
var tabContent = new XMLHttpRequest();
tabContent.onreadystatechange = processText;
tabContent.open("GET", "tabd.html", true);
tabContent.send();

//this function gets external file and shows previous input values
function processText() {
            if (tabContent.readyState == 4) {
                tab = tabContent.responseText;
                document.getElementById("tabholder").innerHTML += tab;
                focusOnElem();
                showMemo();
            }
        }
function showMemo() {
        $("#day").attr('value', dayMemo);
        $("#month").attr('value', monthMemo);
        $("#hour").attr('value', hourMemo);
        $("#minute").attr('value', minuteMemo);
        $("#comment").attr('value', commentMemo);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:02:23.683

每次从 dom 中删除一个元素时，它都会丢失其关联的绑定。你需要重新绑定，把它放在一个函数中

每次您将日期重新插入页面调用 Rebind();

```
function Rebind(){

      $("#day").die().change(function(){
            console.log("change");
      });

} 
```

# c# - 如何使用结构 C# 中的信息创建二维数组

> ID：13706880
> 
> 赞同：0
> 
> 时间：2012-12-04T16:00:06.097
> 
> 标签：c#, struct, multidimensional-array

请问有什么方法可以使用以下结构中的变量创建二维数组吗？

```
public struct Marks
{
    public int midyearly;
    public int finalyear;
    public Marks(int midyearly, int finalyear)
    {
        this.midyearly = midyearly;
        this.finalyear = finalyear;
    }

    public override string ToString()
    {
        return "(" + midyearly + "," + finalyear + ")";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:09:08.470

如果你有，`Marks[]`那么你可以像这样创建一个二维数组：

```
Marks[] marks = ...;
var items = marks.Select(mark => new[] {mark.midyearly, mark.finalyear}); 
```

这会给你一个`int[][]`.

但很难说这是否是你想要的。

# r - 在 `method="loess"` 具有最大点的图形上画一条水平线

> ID：13706883
> 
> 赞同：-2
> 
> 时间：2012-12-04T16:00:13.050
> 
> 标签：r, ggplot2

df

```
Date     Score  Team
1/1/2011   3    A
1/2/2011   5    A
1/3/2011   15   A
1/4/2011   39   B
1/5/2011   23   B
1/6/2011  100   B
1/7/2011   4    C
1/8/2011  25    C
1/9/2011   30   C

library(ggplot2)
ggplot(df, aes(Date, Score, group=1)) + geom_point() + geom_smooth(method="loess", se=T, size=1) + facet_wrap(~Team) 
```

我希望能够在 method="loess" 达到最大值的地方画一条水平线。这里有没有人对我将如何做到这一点有任何意见？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T16:17:55.043

用 构建绘图`ggplot_build()`，然后提取数据：

```
p <- ggplot(df, aes(Date, Score, group=1)) + geom_point() + 
  geom_smooth(method="loess", se=T, size=1)

pp <- ggplot_build(p)
p <- p + geom_hline(yintercept = max(pp$data[[2]]$y), col="red")
p 
```

![在此处输入图像描述](../Images/5ce19ca6a1af890598c899c46cd2da45.png)

* * *

结果`ggplot_build`是一个列表。第二个元素`data`是您正在寻找的内容：

```
str(pp$data)
List of 2
 $ :'data.frame':   9 obs. of  4 variables:
  ..$ x    : int [1:9] 1 2 3 4 5 6 7 8 9
  ..$ y    : num [1:9] 3 5 15 39 23 100 4 25 30
  ..$ group: int [1:9] 1 1 1 1 1 1 1 1 1
  ..$ PANEL: int [1:9] 1 1 1 1 1 1 1 1 1
 $ :'data.frame':   9 obs. of  7 variables:
  ..$ x    : int [1:9] 1 2 3 4 5 6 7 8 9
  ..$ y    : num [1:9] 1.29 8.67 19.64 24.54 53.86 ...
  ..$ ymin : num [1:9] -103.1 -60.2 -57.3 -52.4 -23 ...
  ..$ ymax : num [1:9] 105.7 77.6 96.5 101.4 130.8 ...
  ..$ se   : num [1:9] 34.8 23 25.6 25.6 25.6 ...
  ..$ group: int [1:9] 1 1 1 1 1 1 1 1 1
  ..$ PANEL: int [1:9] 1 1 1 1 1 1 1 1 1 
```

请注意，此对象是一个列表，其中包含与每个 geom 对应的数据框。在我的解决方案中，我只是提取最大值`y`并通过它绘制 a `hline`。

* * *

这也适用于多个方面，但您必须做更多的工作来提取数据：

```
p <- ggplot(df, aes(Date, Score, group=1)) + geom_point() + 
  geom_smooth(method="loess", se=T, size=1) + facet_wrap(~Team)

pp <- ggplot_build(p)

library(plyr)
hdat <- ddply(pp$data[[2]], .(PANEL), summarize, hline=max(y))
hdat$Team <- unique(df$Team)[as.numeric(hdat$PANEL)]

p <- p + geom_hline(data=hdat, aes(yintercept = hline), col="red")
p 
```

![在此处输入图像描述](../Images/f6e83ff6b2536d3c498c29226f8deaa5.png)

# jquery - 如何使用加载动画正确阻止 div

> ID：13706884
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:00:18.920
> 
> 标签：jquery

我有一个正在调用的 ajax 函数。当网络服务器正在处理异步请求时，我想阻止用户正在查看的 div，这样他就不会在该请求进行时按下任何按钮或任何东西......我以前做过，你只需选择您想用动画阻止的潜水，调用 .block 然后当值成功返回时，您只需解除阻止。像这样...

```
function animateSpinner() {
    $("#list").block({ message: '<img src="../../Images/ajax-loader.gif" />' });
}; 
```

然后只需调用

```
$("#list").unblock({ message: '<img src="../../Images/ajax-loader.gif" />' }); 
```

一旦你成功返回。
但是，每当我尝试这样做时，我都会收到此异常...![在此处输入图像描述](../Images/0ae26c312010e87985eeedb9704f2064.png)

那是它的解锁部分。我忘记评论了（我只是在测试其中的 ajax 部分。
这些调用是否应该包含在 document.ready 或其他东西中以确保它们应该被调用。我最近遇到了 ajax 提交无法正常工作的问题，因为他们没有被包裹在 $(document).ready 调用中，我想看看这是否是另一个实例，什么时候应该在那个调用中包裹一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:08:02.090

如评论中所述`block`，JQuery 上没有这样的功能。您应该`beforeSend`在 AJAX 请求中使用该函数来设置`disabled=true`按钮，或将 div 更改`z-index`为负值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:20:25.763

正如@AmericanUmlaut 指出的那样，您正在使用 jQuery BlockUI 插件语法。[http://www.malsup.com/jquery/block/#element](http://www.malsup.com/jquery/block/#element)此处的示例与您尝试执行的操作几乎相同。，

就 onDOMReady 而言，只要在相关 ajax 调用开始触发之前加载 BlockUI 插件，您就不必做任何特别的事情来使此功能按预期工作

# ruby - 从 Ruby 中的 URL 获取文件名的好方法是什么？

> ID：13706886
> 
> 赞同：54
> 
> 时间：2012-12-04T16:00:27.233
> 
> 标签：ruby, url, uri

什么是提取的好方法`filename.jpg`：

```
url = 'http://www.example.com/foo/bar/filename.jpg?2384973948743' 
```

我正在使用 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-04T16:04:30.643

```
require 'uri'

url = 'http://www.example.com/foo/bar/filename.jpg?2384973948743'

uri = URI.parse(url)

puts File.basename(uri.path)

#=> filename.jpg 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-13T06:46:43.427

如果你不期望`query_string`in `url`，你可以简单地使用`File.basename`

```
puts File.basename('http://example.com/folder1/folder2/file.txt') 
```

这显示`file.txt`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T16:03:31.773

最简单的方法可能是使用`URI.parse`

```
url_object = URI.parse([my url])
url_path = url_object.path
filename = url_path.split("/").last 
```

# c - 意外输出（C 字符串和字符）

> ID：13706890
> 
> 赞同：2
> 
> 时间：2012-12-04T16:00:38.717
> 
> 标签：c

我只是从字符和数组开始。我写了一些代码来生成一个由某些随机和非随机字符组成的字符串。嗯，实际上它应该为 Dominos 比萨生成特价代码。咳咳……

无论如何，这是代码，我对没有任何输出感到困惑。我用 gcc -Wall 编译，没有任何警告或错误。所以很明显，这是关于字符串的一些基本结构方面。

我将不胜感激有关此的任何见解。

代码：

```
#include <stdio.h>
#include <stdlib.h> 
#include "conio.h"
#include <time.h>

int genrandom(int,int);
char randAlph(void);
char letterize(int);
char randDigit(void);
char digitize(int);
void weaver(void);
void prtall(char[],int);

int main (void) {

    srand(time(0));  
    weaver();
    return 0; 
}

void weaver(void) {
  //BG5C?---1
    char word[10];
    word[0]='B';
    word[1]='G';
    word[2]='5';
    word[3]='C';
    word[4]=randDigit();
    word[5]=randAlph();
    word[6]=randAlph();
    word[7]=randAlph();
    word[8]='\0';
    prtall(word,8);
}

void prtall(char worder[],int len){       
    int i;
    for (i=0;(i=len);i++) {
      if ( worder[i] != '\0' ){
    printf("%c",worder[i]);
      }
    }
    printf("\n");
}   

int genrandom(int mino,int maxo) {
    int val=mino+rand()/(RAND_MAX/(maxo-mino)+1);
    return val;  
}

char randAlph (void){
  int val;
  char text;
  val=genrandom(0,26);
  text=letterize(val);
  return text;

}

char randDigit () {
    int val;
    char text;
    val=genrandom(0,9);
    text=digitize(val);
    return text;                            
}

char letterize(int num) {
  char letter='A'+num;
  return letter;
}

char digitize(int num) {
  char digit='0'+num;
  return digit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:02:36.620

```
for (i=0;(i=len);i++) 
```

应该

```
for (i=0;i<=len;i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:04:36.547

由于您遇到了 0 终止数组的麻烦，因此只需使用以下命令打印它：

```
puts(word); 
```

或者

```
printf("%s\n", word); 
```

获取换行符。

无需循环自己并一次打印一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:02:14.660

`for (i=0;(i=len);i++)`

**你是说 i <= len**吗？

`i=len`是一个`assignment`，如果赋值成功则返回true。

所以会发生什么

*我被分配了 len 的值，（这是成功的）因此返回 true。*

因此 for 循环条件得到满足。

你需要的是

```
 for (i=0;i<=len;i++) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T16:03:49.910

您陷入了无限循环，问题出在以下`for`语句：

```
for (i=0;(i=len);i++) { 
```

你想要`i<=len`，没有`i=len`。你的 for 循环现在正在做：

```
i = 0, i = 8
if '\0' != '\0'
i++ (i = 9) 
```

然后当它去“检查”条件时，它实际上只是重置`i`为 8

# iphone - 如何在 iPhone 5 和 ios 6 SDK 上强制我的 iPhone 应用程序高度为 480 像素？

> ID：13706891
> 
> 赞同：0
> 
> 时间：2012-12-04T16:00:43.630
> 
> 标签：iphone, ios6, iphone-5

当我在 iPhone 5 上运行我在 ios6 之前编译的 iPhone 应用程序时，它以原始 480 像素呈现，屏幕顶部和底部有黑色空间。但是，当我在相对较新的 ios 6 SDK 上编译我的 iPhone 应用程序并在我的 iPhone 5 上运行它时，它希望以新的 1136 像素高度运行。但是，我的应用程序尚未针对该高度设计，因此底部有一个空白间隙。我想发布带有错误修复的新版本应用程序，而无需重新设计 iPhone 5 的布局。如何让 iPhone 5 像在 ios6 sdk 编译之前一样显示应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T13:08:37.867

请注意，Apple 现在需要 Default-568h@2x.png 图像，如果不提交到 App Store 将给您一个无效的二进制拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:03:24.130

`Default-568h@2x.png`从你的目标中删除。

# c# - MonoDroid 和 MVVMCross - StartApplicationObject，启动 PreferenceActivity？

> ID：13706892
> 
> 赞同：1
> 
> 时间：2012-12-04T16:00:49.810
> 
> 标签：c#, xamarin.android, preference, mvvmcross

到目前为止，我在我的应用程序开始时启动了一个 LoginScreen（在启动之后）：

```
public class StartApplicationObject
        : MvxApplicationObject
        , IMvxStartNavigation
{
    public void Start()
    {
        //this.RequestNavigate<AddressSearchViewModel>();
        //this.RequestNavigate<MainScreenViewModel>();
        this.RequestNavigate<LoginViewModel>();

    }

    public bool ApplicationCanOpenBookmarks
    {
        get { return true; }
    }
} 
```

好吧，现在我需要改变它。在此*LoginView*上，我正在从 Web 服务填充数据。这意味着，我已经需要设置 Webservice **Url**（在我的情况下是 PreferenceActivity）。

所以我想要那个 PreferenceScreen，作为**StartView/Activity**（不再是 Login One）。

偏好活动：

```
[Activity]
public class SettingsShowActivity : PreferenceActivity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        AddPreferencesFromResource(Resource.Xml.PreferenceScreen);
    }
} 
```

我不知道如何完成这项任务，因为 PreferenceScreen 没有 ViewModel，所以如何调用活动`StartApplicationObject.cs`，还是我需要 WorkAround？也许我还应该补充一点，我需要能够稍后从 PreferenceActivity 导航到 LoginView(Model).. 在这种情况下也是.. 怎么做？

任何帮助，将不胜感激！

**编辑：**

谢谢斯图尔特的答案！，我尝试了你的第二种方法 - 创建我自己的 MvxPreferenceActivity。它看起来像这样：

```
using System;
using Android.App;
using Android.Content;
using Android.OS;
using Android.Preferences;
using Cirrious.MvvmCross.Android.Interfaces;
using Cirrious.MvvmCross.ExtensionMethods;
using Cirrious.MvvmCross.Interfaces.ServiceProvider;
using Cirrious.MvvmCross.Interfaces.ViewModels;
using Cirrious.MvvmCross.Platform.Diagnostics;

namespace INMobileCRM4Android
{
    public abstract class MvxPreferenceActivity<TViewModel>
    : PreferenceActivity
    , IMvxAndroidView<TViewModel>
    , IMvxServiceConsumer<IMvxIntentResultSink>
    where TViewModel : class, IMvxViewModel
    {
        protected MvxPreferenceActivity()
        {
            IsVisible = true;
        }

        #region Common code across all android views - one case for multiple inheritance?

        private TViewModel _viewModel;

        public Type ViewModelType
        {
            get { return typeof(TViewModel); }
        }

        public bool IsVisible { get; private set; }

        public TViewModel ViewModel
        {
            get { return _viewModel; }
            set
            {
                _viewModel = value;
                OnViewModelSet();
            }
        }

        public void MvxInternalStartActivityForResult(Intent intent, int requestCode)
        {
            base.StartActivityForResult(intent, requestCode);
        }

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            this.OnViewCreate();
        }

        protected override void OnDestroy()
        {
            this.OnViewDestroy();
            base.OnDestroy();
        }

        protected override void OnNewIntent(Intent intent)
        {
            base.OnNewIntent(intent);
            this.OnViewNewIntent();
        }

        protected abstract void OnViewModelSet();

        protected override void OnResume()
        {
            base.OnResume();
            IsVisible = true;
            this.OnViewResume();
        }

        protected override void OnPause()
        {
            this.OnViewPause();
            IsVisible = false;
            base.OnPause();
        }

        protected override void OnStart()
        {
            base.OnStart();
            this.OnViewStart();
        }

        protected override void OnRestart()
        {
            base.OnRestart();
            this.OnViewRestart();
        }

        protected override void OnStop()
        {
            this.OnViewStop();
            base.OnStop();
        }

        public override void StartActivityForResult(Intent intent, int requestCode)
        {
            switch (requestCode)
            {
                case (int)MvxIntentRequestCode.PickFromFile:
                    MvxTrace.Trace("Warning - activity request code may clash with Mvx code for {0}", (MvxIntentRequestCode)requestCode);
                    break;
                default:
                    // ok...
                    break;
            }
            base.StartActivityForResult(intent, requestCode);
        }

        protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
        {
            this.GetService<IMvxIntentResultSink>().OnResult(new MvxIntentResultEventArgs(requestCode, resultCode, data));
            base.OnActivityResult(requestCode, resultCode, data);
        }

        #endregion
    }
} 
```

但我不断收到以下错误：

```
'INMobileCRM4Android.MvxPreferenceActivity<TViewModel>' does not contain a definition for 'OnViewPause' and no extension method 'OnViewPause' accepting a first argument of type 'INMobileCRM4Android.MvxPreferenceActivity<TViewModel>' could be found (are you missing a using directive or an assembly reference?) 
```

这个错误也重复出现：this.OnViewCreate(); , this.OnViewNewIntent(); , this.OnViewNewIntent(); , this.OnViewResume(); , this.OnViewStart(); , this.OnViewRestart(); 和 this.OnViewStop();

最后，还有其他 3 个错误：

```
No overload for method 'OnViewCreate' takes 0 arguments 
```

对于 OnViewCreate() 和 OnViewNewIntent() ..

我从你那里拿了代码，原样 - 但似乎有些东西不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:59:14.213

如果您愿意，您可以在 MvvmCross 之外执行此操作。

看看提供一个特殊的 SplashScreen 来替换 SplashScreen - [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxBaseSplashScreenActivity.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxBaseSplashScreenActivity.cs)与您自己的功能。

然后在您的 SettingsShowActivity 中 - 当您完成特殊设置后 - 您可以触发 MvvmCross IMvxStartNavigation 操作。

* * *

不过……话虽如此……

我可能会通过为 SettingsShowActivity 创建一个 ViewModel 并将其集成到您的正常 MvvmCross 应用程序流中来实现这一点。

如果问题是您需要 PreferenceActivity 的 Mvx 版本，请考虑创建 MvxPreferenceActivity - 请参阅在[MvvmCross monodroid Activity 中插入 Monogame 视图](https://stackoverflow.com/questions/13201174/insert-a-monogame-view-inside-mvvmcross-monodroid-activity)中的答案以提供帮助。

# python - Sprintf MATLAB 和 Python

> ID：13706893
> 
> 赞同：3
> 
> 时间：2012-12-04T16:00:48.990
> 
> 标签：python, matlab

我正在尝试将矩阵变量从 MATLAB 传递给 python，但我只在 python 中获取该矩阵的第一个元素。有谁知道可以得到完整的矩阵？

Python

```
import sys

if __name__ == '__main__':
    x = sys.argv[1]
    print x 
```

MATLAB

```
A = magic(5);
[str,err] = sprintf('/usr/local/python name_of_program.py %d ', A);
unix(str) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:33:55.380

查看str的内容： `/usr/local/python name_of_program.py 17 /usr/local/python name_of_program.py 23 /usr/local/python name_of_program.py 4 ...`

当您将 5x5 矩阵传递给 sprintf 时，它会复制格式化字符串 25 次，其中一个元素按顺序替换 %d（按列）。

我建议在程序之间传输数据的另一种方法，例如将其写入文件。如果您真的想在命令行上传递所有内容，请尝试以下操作：

```
A_str = sprintf(' %d',A);
str = strcat('/usr/local/python name_of_program.py ',A_str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T21:25:16.020

您可能也想使用 numpy 来重塑数组。或者如果导入太多，您可以制作自己的重塑功能试试这个：

```
import sys, numpy
if __name__ == '__main__':
    x = sys.argv[1::3]
    y = numpy.reshape(x, (5,5))
    print y 
```

我还注意到该调用为 A 的每个元素添加一次字符串，因此您可以考虑使用[mat2str(A)](http://www.mathworks.com/help/matlab/ref/mat2str.html)，例如：

```
[str, err] = sprintf('/usr/local/python program.py "%s" ', mat2str(A)); 
```

我还将 %d 更改为 %s，因为无论如何您都将它作为字符串传递给 python。这个的输出是：

```
python program.py "[17 24 1 8 15;23 5 7 14 16;4 6 13 20 22;10 12 19 21 3;11 18 25 2 9]" 
```

您也可以使用 numpy 从该字符串创建一个矩阵

```
>>> import sys
>>> import numpy

>>> print(numpy.matrix(sys.argv[1]))

matrix([[17, 24,  1,  8, 15],
    [23,  5,  7, 14, 16],
    [ 4,  6, 13, 20, 22],
    [10, 12, 19, 21,  3],
    [11, 18, 25,  2,  9]]) 
```

# usb - 隐藏在 10.7 下的 kext 卸载失败，但 10.6 工作完美

> ID：13706894
> 
> 赞同：3
> 
> 时间：2012-12-04T16:00:50.340
> 
> 标签：usb, hid, iokit, kernel-extension

我正在为 MacOSX（Windows 已经运行）开发一个虚拟 USB 总线驱动程序，该驱动程序通过网络与一个 linux 盒连接。它在 10.6 和 10.7 下使用大容量存储设备和 HID 设备（如鼠标或键盘）运行良好。

但是对于 10.7(.5) 以下的 HID 设备，移除设备（拔出）或更简单的卸载 kext 失败，因为还有一个实例（分离后保留计数不会降为零）。我的 10.6 和 10.7 测试环境是相同的 MacBooksPro 8.2 i7。

有时（5-50 分钟）后，kext 会在我没有任何动作的情况下自由。它似乎不依赖于不断变化的电源模式。

是的，我有 USBFamily 日志库和大量输出，但是在工作（kextunload ok）和不工作运行之间，我发现日志没有区别，即使日志级别为 7。

由于大容量存储设备似乎运行良好，我猜问题出在 HID 驱动程序堆栈内部，尤其是在 10.7 下？

删除 10.6 和 10.7 之间的 USB HID 设备驱动程序堆栈是否有任何已知差异？

我的 kext 是一个（虚拟）ControllerV3 派生类，为任何真正插入的（在远程 linux 盒子上）USB 设备建立/创建一个 USBDevice。使用 XCode 4.4.1。

提前感谢您的任何想法或提示，关于马库斯

PS：在我看来有点奇怪，在 10.7 下有这么多 HID 对象位于驱动程序堆栈的顶部。在 kextunload 之后（失败“..VirDevice 有 1 个实例”），它们似乎还活着。但这 100% 与本地插入和拔出的罗技鼠标相同。

在我看来，只有最低的两个对象 MsVirBus （虚拟 USB 总线，派生自 IOUSBControllerV3 ）和 Mouse@xaffe003f 是一个 IOUSBDevice 派生对象。

![kextunload 后的驱动程序堆栈](../Images/b23f55050c07c31033e0c26e14165181.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:21:00.997

我对 HID 堆栈没有深入的经验，但我可以给你一些通用的 IOKit/kext 建议，告诉你如何追踪这类问题的根源。

`kextunload`调用`terminate()`I/O 注册表中的所有对象。这意味着有两种情况可能导致您最终无法卸载 kext：

1.  `terminate()`删除所有子对象失败或失败

2.  剩余的活动对象都不在 I/O 注册表中

使用命令检查`ioreg`您的任何对象是否保留在 I/O 注册表中。还要检查他们有哪些客户，因为这些客户通常会阻止删除。

如果注册表中没有您的对象，则您很可能遇到了保留/释放不匹配的问题。[我在这个答案中](https://stackoverflow.com/a/13471512/48660)给出了一些关于追踪这些的建议，所以我不会在这里重复。这似乎也不太可能，因为您的 kext 最终会卸载并在 10.6 上运行。

如果您在 I/O 注册表中留下了对象，您将需要追踪为什么这些对象仍然存在。如果您尚未`terminate()`在类中覆盖，请添加虚拟覆盖，将调用转发到基类实现。但是用日志输出包装该转发调用，并输出调用是否成功。如果您已经覆盖`terminate`，请添加类似的日志记录。您可能还想为 添加类似的日志记录`didTerminate()`，因为终止可以是异步的。

拔下 USB 设备时，您应该将`terminate()`设备树向下传递给您的客户端。我会检查 EHCI 控制器代码的等效部分，看看是否需要任何特殊参数等。

# celery - Celery AsyncResult 获取主机名

> ID：13706896
> 
> 赞同：8
> 
> 时间：2012-12-04T16:01:00.153
> 
> 标签：celery, django-celery

我有一个 celery 设置，它使用两个不同的服务器来处理任务。我试图找出匹配任务完成的服务器的最佳方法。我浏览了文档，没有看到任何关于从 AsyncResult 检索主机名的信息。

对此问题的任何意见表示赞赏。我正在考虑尝试的另一个选择是将主机名简单地放在每个 celery 配置中，尽管这种方法是不可取的，因为它是要记住要做的另一件事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:39:17.203

一种可能的解决方法是返回带有任务返回值的主机名

```
from celery import current_task

@celery.task
def hello(x, y):
  return dict(hostname=current_task.request.hostname, result='hello') 
```

# iframe - 在 Firefox 扩展中的注入 iframe 中加载本地 html 文件

> ID：13706900
> 
> 赞同：2
> 
> 时间：2012-12-04T16:01:13.227
> 
> 标签：iframe, firefox-addon, content-script

我目前正在开发一个 Firefox 扩展，当用户单击扩展图标时，它基本上会在当前页面中插入一个 iframe。我设法插入 iframe 代码，我想出了如何将 src 属性链接到我的 html 文件。

在 chrome 版本中，我只是做了一个

```
 var main_html = chrome.extension.getURL('main.html'); 
```

我将链接传递给 iframe 的 src 属性，如下所示：

```
 iframe.setAttribute("src",main_html); 
```

所以 main_html 是一个类似于 resource://idofmyextension/content/data/main.html 的链接

但是，正如我所怀疑的，我收到一个安全错误，告诉我位于当前 url 的内容无法加载数据或建立指向我的 main.html 文件的链接。

有没有办法通过这个安全限制？或者在我的 iframe 中加载我的 html 文件的另一种方法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:54:24.520

我假设使用[Addon SDK](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/)，它更类似于 Google Chrome 扩展开发，而不是 Firefox 中的常规 XUL 开发。但是，我在这里解释的方法在没有附加 SDK 的情况下也适用。

目前无法在附加 SDK 中使用，但有一些相关工作，请参阅[Bug 820213](https://bugzilla.mozilla.org/show_bug.cgi?id=820213)。

目前我想到的唯一解决方法是使用`data:`url。因此，改为：

```
const { data } = require("self");

let url = data.url("main.html");

// pass the url to the iframe 
```

你将会有：

```
const { data } = require("self");

let content = encodeURIComponent(data.load("main.html"));
let url = "data:text/html;charset=utf-8," + content;

// pass the url to the iframe 
```

请注意，`data.load`而不是`data.url`：您基本上加载了资源的内容并将其用作数据 url。它很丑陋，但至少可以在某些情况下使用，直到得到适当的修复。

希望能帮助到你！

# jquery - DOM 元素在附加到另一个元素时闪烁。苹果浏览器

> ID：13706902
> 
> 赞同：2
> 
> 时间：2012-12-04T16:01:21.767
> 
> 标签：jquery, safari

[http://premier-research.headspacedesign.ca/](http://premier-research.headspacedesign.ca/)

在特色专家部分，当我单击上一个和下一个按钮时，功能专家的标题和操作按钮会闪烁。单击按钮时，我将 div 附加到绝对位于特色专家文本下方的另一个元素。由于某种原因，这只发生在 Safari 中......

你能提供一些方向吗？

# c++ - 从函数返回模板

> ID：13706903
> 
> 赞同：-1
> 
> 时间：2012-12-04T16:01:26.347
> 
> 标签：c++, templates, pointers

我试图从函数返回一个指向模板的指针，但是我得到了错误：

```
error C2440: 'return' : cannot convert from 'node<T>*' to 'Customer*' 
```

这很奇怪，因为我知道模板肯定包含一个客户对象。

返回错误的类是这样的：

```
template <class T>
T* l_list<T>::search(int id)
{
    int i = 0;
    node<T> *ptr = head;
    while (id != ptr -> data.getId())
    {
        ptr = ptr -> next;
        i++;

        if (id = ptr -> data.getId())
        {
            return ptr;
        }
    }
} 
```

我通过这样做来调用它：

```
cin >> id;
Customer* ptr = customers.search(id);
ptr -> createAccount(); 
```

甚至有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:02:39.777

您的函数声明为以下类型：

```
T* 
```

但是您返回的类型是：

```
node<T>* 
```

您需要保持您的返回类型与您的函数类型一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:03:18.110

该函数`search`被声明为返回`T*`，但您执行时， a 是`return ptr;`在哪里。那是行不通的。也许你想要类似的东西？`ptr``node<T>*``return ptr->data;`

# xcode4.5 - 我如何理解 iPhone 4s 中的恐慌 plist？

> ID：13706904
> 
> 赞同：2
> 
> 时间：2012-12-04T16:01:27.067
> 
> 标签：xcode4.5, reset, iphone-4, panic

* * *

我有问题 - 我的 iPhone 4S（ECID 387220092299 SN DNPH9H44DTD1 软件版本 10A523）每次重新启动。它可以关闭几个小时，我只能通过同时按住主页和锁定按钮来打开它。我在我的 Mac 上安装了 xcode 4.5，可以阅读恐慌列表或错误日志，但什么也不懂。

有没有人可以帮助我或说我应该问谁？

这是一个panic.plist的一部分：

```
> Incident Identifier: CF491101-A83A-4E52-A15D-8AB89AE13367  
> CrashReporter Key:   ddfe39ad60a20fdbb4338ba261bd44bb2250e06c  
> Hardware Model:      iPhone4,1  
> Date/Time:       2012-12-04 15:35:56.122 +0400  
> OS Version:      iOS 6.0.1 (10A523)  
> 
> panic(cpu 0 caller 0x87e8a5b0): kernel abort type 4: fault_type=0x1, fault_addr=0xc  
> r0: 0x00000000  r1: 0x00000001  r2: 0x00000000  r3: 0x00000000  
> r4: 0xcfe5be90  r5: 0xcfe5bf2c  r6: 0xcfe5bf24  r7: 0xcfe5be5c  
> r8: 0x00000000  r9: 0x00000000 r10: 0x00000000 r11: 0x00000000  
> 12: 0xcfe5be20  sp: 0xcfe5bdcc  lr: 0x87ef60e7  pc: 0x87ffb0e4  
> cpsr: 0x00000033 fsr: 0x00000005 far: 0x0000000c  
> 
> Debugger message: panic  
> OS version: 10A523  
> Kernel version: Darwin Kernel Version 13.0.0: Wed Oct 10 23:29:31 PDT 2012; root:xnu-> > > >          > 2107.2.34~2/RELEASE_ARM_S5L8940X  
> iBoot version: iBoot-1537.4.21  
> secure boot?: YES  
> Paniclog version: 1  
> Kernel slide:     0x0000000007e00000  
> Kernel text base: 0x87e01000  
> Epoch Time:        sec       usec  
>>   Boot    : 0x50bd4204 0x00000000  
>>   Sleep   : 0x50bd4bbd 0x0006bbbd  
>>   Wake    : 0x50bd4bc0 0x00000009  
>>   Calendar: 0x50bd4bc0 0x00001be3  
>> 
> Task 0x801d1c20: 12390 pages, 121 threads: pid 0: kernel_task  
> Task 0x801d1968: 272 pages, 3 threads: pid 1: launchd  
> Task 0x801d13f8: 898 pages, 10 threads: pid 13: UserEventAgent  
> Task 0x801d0e88: 623 pages, 5 threads: pid 14: wifid  
> Task 0x801d0918: 393 pages, 3 threads: pid 17: timed  
> Task 0x801d0660: 204 pages, 7 threads: pid 18: syslogd  
> Task 0x801d00f0: 272 pages, 2 threads: pid 20: powerd  
> Task 0x801ce878: 465 pages, 3 threads: pid 29: lockdownd  
> Task 0x801ce308: 327 pages, 2 threads: pid 31: installd  
> Task 0x801cdd98: 368 pages, 2 threads: pid 33: deleted  
> Task 0x801cd2b8: 1457 pages, 17 threads: pid 37: mediaserverd  
> Task 0x80748c20: 441 pages, 4 threads: pid 39: mDNSResponder  
> Task 0x807486b0: 1781 pages, 12 threads: pid 41: locationd  
> Task 0x80748140: 785 pages, 5 threads: pid 43: imagent  
> Task 0x80747e88: 331 pages, 3 threads: pid 44: iaptransportd  
> Task 0x80747918: 283 pages, 20 threads: pid 46: fseventsd  
> Task 0x80747660: 874 pages, 1 threads: pid 47: fairplayd.N94  
> Task 0x807470f0: 283 pages, 3 threads: pid 49: AppleIDAuthAgent  
> Task 0x80746e38: 685 pages, 10 threads: pid 50: configd  
>>>     thread 0x808a30a0  
>>>>>       kernel backtrace: cfe5bb20  
>>>>>>        lr: 0x87e87491  fp: 0xcfe5bb50  
>>>>>>        lr: 0x87e87d2d  fp: 0xcfe5bb7c  
>>>>>>        lr: 0x87e17fc7  fp: 0xcfe5bb9c  
>>>>>>        lr: 0x87e8a5b0  fp: 0xcfe5bc64  
>>>>>>        lr: 0x87e847a4  fp: 0xcfe5be5c  
>>>>>>        lr: 0x87fe31f3  fp: 0xcfe5be88  
>>>>>>        lr: 0x87fe3365  fp: 0xcfe5bef8  
>>>>>>        lr: 0x87fe0d85  fp: 0xcfe5bf74  
>>>>>>        lr: 0x8801ca48  fp: 0xcfe5bfa8  
>>>>>>        lr: 0x87e84340  f 
```

这只是一个日志文件。也许我的设备让我感到紧张并没有什么原因。我可以展示其他。请帮帮我。

# redis - redis (error) ERR 操作不允许

> ID：13706911
> 
> 赞同：7
> 
> 时间：2012-12-04T16:01:52.577
> 
> 标签：redis

突然间，我的 redis 数据库开始在某些连接上出现错误：

```
(error) ERR operation not permitted 
```

我已经重新启动了 redis 服务，并使用正确的身份验证密钥与客户端连接，它每次都连接，但仅在某些时候只允许通过客户端进行 db 操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T09:47:01.683

尝试这个：

在 redis 配置文件中搜索上面的行以检查您是否设置了密码：

```
requirepass foobared 
```

如果该行没有被注释掉，那么你需要这样做：

```
$redis-cli redis 127.0.0.1:6379> AUTH foobared 
OK 
```

# c# - “无法从类型转换”错误

> ID：13706913
> 
> 赞同：0
> 
> 时间：2012-12-04T16:01:54.363
> 
> 标签：c#, linq, type-conversion

我曾经问过一个关于生成树状结构的问题，该结构最终采用了这种方法：

```
 public ICollection<DefaultEventType> GetTierTree()
    {
        var q = from mission in _context.tMissions
                join activity in _context.tActivities on mission.id equals activity.missionId
                join project in _context.tDefaultEventTypes on activity.id equals project.activityId
                where !project.isRemoved && project.defaultCategoryId == 4
                orderby mission.name
                select new DefaultEventType(project.tierLevel.TryParseEnum<GanttType>(GanttType.Unknown), DefaultCategoryRepository.CreateFrom(project.tDefaultCategory))
                {
                    AllowNumericSuffix = project.allowNumericSuffix,
                    AttachMilestoneMoniker = project.attachMilestoneMoniker,
                    Description = project.description,
                    Id = project.id,
                    IsReadOnly = project.isReadOnly,
                    IsSticky = project.isSticky,
                    Name = project.name,
                    Sid = project.sid,
                    Style = project.style.TryParseEnum<GanttElementStyle>(GanttElementStyle.Unknown),
                    TimeStamp = project.createdDT,
                    UpdatedTimeStamp = project.updatedDT,
                    Activity = new Activity { Id = activity.id, Name = activity.name, Mission = new Mission { Id = mission.id, Name = mission.name } }
                };

        var q2 = q.GroupBy(row => row.Activity.Mission.Id)
            .Select(group => group.GroupBy(row => row.Activity.Id));

        return q2.Cast<DefaultEventType>().ToList();
    } 
```

返回时失败。我已经做了很多谷歌搜索和搜索板。显然，由于 GroupBy 的某些原因，类型不匹配，但我不明白为什么这不起作用。

谁能提供见解或我将如何解决这个问题？

编辑：我正在尝试输出树状结构。目前它看起来像这样：

```
* Parent1
    * Child1
        *ChildChild1

* Parent1
    * Child1
        * ChildChild2

* Parent1
    * Child1
        * ChildChild3 
```

我想要它做的是这样分组：

```
* Parent1
    * Child1
        * ChildChild1
        * ChildChild2
        * ChildChild3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:08:10.277

编辑：好的，所以你试图返回某种层次结构而不仅仅是一个 flat `List<DefaultEventType>`，所以你需要改变你的返回类型。

看起来您的“Parent”是`Mission`，“Child”是`Activity`，而“ChildChild”是`DefaultEventType`。

基本上，您需要两种自定义类型：

```
// Holds an Activity, and all the DefaultEventTypes corresponding to it.
class ActivityWithEvents {
    public Activity Activity { get; set; }
    public IEnumerable<DefaultEventType> Events { get; set; }
}

// Holds a Mission, and all the Activities corresponding to it.
class MissionWithActivities {
    public Mission Mission { get; set; }
    public IEnumerable<ActivityWithEvents> Activities { get; set; }
} 
```

或类似的东西。您需要将方法的签名更改为

```
public IEnumerable<MissionWithActivities> GetTierTree() 
```

和你的回归

```
var q2 = q.GroupBy(
    // First group the events by Mision
    e => e.Activity.Mission.Id,
    // For each mission found, select a MissionWithActivities
    (mid, events) => new MissionWithActivities {
        Mission = events.First().Activity.Mission,
        Activities = events.GroupBy(
            // Within the Mission, group the events by Activity
            e => e.Activity.Id,
            // For each Activity found, select an ActivityWithEvents
            (aid, events2) => new ActivityWithEvents {
                Activity = events2.First().Activity,
                Tasks = events2
            })
        });
return q2.ToList(); 
```

现在你可以遍历每个`MissionWithActivities`，显示它；并且对于每一个，遍历它的`ActivityWithEvents`，显示它们；对于每一个，遍历它的`DefaultEventTypes`，显示它们：

```
foreach (var mwa in GetTierTree())
{
    Console.WriteLine(mwa.Mission.Name);
    foreach (var awe in mwa.Activities)
    {
        Console.WriteLine("    " + awe.Activity.Name);
        foreach(var e in awe.Events)
            Console.WriteLine("        " + e.Name);
    }
} 
```

# jquery - jQuery Validate 添加 display:block

> ID：13706917
> 
> 赞同：0
> 
> 时间：2012-12-04T16:02:02.677
> 
> 标签：jquery, jquery-validate

我在我的页面上使用 jQuery Validation 插件当该字段第一次出现 jquery 错误时，它显示如下：

```
<label for="fromDate" generated="true" class="error" style="">This field is required.</label> 
```

当我更正一个经过验证的错误时，它会将以下 CSS 样式添加到元素中。

```
display: none 
```

问题是当我让元素再次出现错误时，它会将 CSS 样式更改为以下

```
display: block 
```

我怎样才能让它只删除 CSS 样式而不是将其切换为阻止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:13:53.703

“我怎样才能让它只删除 CSS 样式而不是将其切换为阻止？”

您不能在 CSS 中取消设置属性。您只需将它们设置为某个默认值即可。

display 属性必须设置为某个有效值，例如`block`，它不会被继承。这是在 CSS 中的常用方法。请参阅：[https ://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

（另请阅读@Sparky672 评论以了解此处发生的情况）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:15:31.990

由于`display:block`是此元素的正常默认状态，因此它在功能上与删除相同`display:none`。换句话说，即使你可以做你想做的事，浏览器仍然认为它`display:block`......没有区别。这里真正的问题到底是什么？

要控制错误的位置，请在文档中搜索[此页面上的](http://docs.jquery.com/Plugins/Validation/validate#toptions)`errorPlacement`选项。虽然，你可能会遇到同样的*问题*，不管它是什么。

 *这显示了`errorPlacement:`具有默认值的选项`function`。

```
$("#myform").validate({
    // options,
    errorPlacement: function(error, element) {
       error.insertAfter(element); // change this to place error message elsewhere
    }
}); 
```*

# java - java - 访问“嵌套”泛型类型

> ID：13706919
> 
> 赞同：0
> 
> 时间：2012-12-04T16:02:05.043
> 
> 标签：java, generics

我有两个使用泛型类型（A，B）的类。我的问题是 - 从 B 内部使用第一个泛型类型 (TA) 的最佳方法是什么？这是简化的示例：

```
public class A<TListItemsType>
{
    List<TListItemsType> list = new LinkedList<TListItemsType>();
    public List<TListItemsType> getList()
    {
        return list;
    }   
}
public class B<TContainderType extends A>
{
    TContainderType temp = null;
    public B(TContainderType cont)
    {
        temp=cont;  
    }
    public void DoWork()
    {
        for (TListItemsType item : temp.getList())
        {
            System.out.println(item);
        }
    }
} 
```

我已经尝试过[这里](https://stackoverflow.com/questions/13229979/java-nested-generic-type-mismatch)建议的解决方案-

```
public class B<TContainderType extends A<TListItemsType>>
{
    TContainderType temp = null;
    public B(TContainderType cont)
    {
        temp=cont;  
    }
    public void DoWork()
    {
        for (TListItemsType item : temp.getList())
        {
            System.out.println(item);
        }
    }
} 
```

只要使用诸如 Integer 或 String 之类的预定义类型，它就可以工作，遗憾的是，这不起作用，因为编译器无法将泛型识别为类名。

所以继续尝试配置另一个泛型类型，然后在扩展中使用它：

```
public class B<TListItemsType, TContainderType extends A<TListItemsType>>
{
    TContainderType temp = null;
    public B(TContainderType cont)
    {
        temp=cont;  
    }
    public void DoWork()
    {
        for (TListItemsType item : temp.getList())
        {
            System.out.println(item);
        }
    }
} 
```

它确实有效，但味道不对。是否有另一种方法可以使用另一个泛型类型使用的泛型类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:20:54.953

The way you did it using `B<TListItemsType, TContainderType extends A<TListItemsType>>` looks good to me...

The reason this makes sense is that your `B` class now indeed needs two parameters to describe it: `TListItemsType` and `TContainderType`. In fact, you are even using `TListItemsType` explicitly in your `DoWork()` function inside `B`. So it's only fair that you need to pass it as a parameter. Otherwise the compiler wouldn't even know what you mean inside your `DoWork()` function, as you could just as well write the class definition like this:

```
public class B<TWorkItemType, TContainderType extends A<TWorkItemType>>
{
    //...

    public void DoWork()
    {
        for (TWorkItemType item : temp.getList())
        {
            System.out.println(item);
        }
    }
} 
```

(Notice that I a renamed the type entirely, but just in `B`, not in `A`!)

If it simply required you to use the same name `TListItemsType` as used in the definition of `A`, you would be quite limited in the things you could do with generics. For example, you could not accept one type extends `List<E>` and another extends `Enum<E>`, since both of these used `<E>` as their generic identifier.

I hope it smells better now... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:41:38.913

您的问题确实不清楚您需要什么要求，以及您需要使用 TListItemsType 做什么。如果您确实不需要以有意义的方式使用 TListItemsType （如您的示例中所示），您可以消除它并只使用 TContainderType 扩展`A<?>`：

```
public class B<TContainderType extends A<?>>
{
    TContainderType temp = null;
    public B(TContainderType cont)
    {
        temp=cont;  
    }
    public void DoWork()
    {
        for (Object item : temp.getList())
        {
            System.out.println(item);
        }
    }
} 
```

就此而言，如果您不打算返回 TContainerType 或在类型参数或其他内容中使用它，您甚至可以消除它：

```
public class B
{
    A<?> temp = null;
    public B(A<?> cont)
    {
        temp=cont;  
    }
    public void DoWork()
    {
        for (Object item : temp.getList())
        {
            System.out.println(item);
        }
    }
} 
```

所以这一切都取决于你需要做什么。您的示例并没有做太多事情，因此可以从中删除很多东西，但这可能不是您真正需要的。

# android - 将按钮添加到可以注册点击的自定义 InfoWindowAdapter 视图

> ID：13706925
> 
> 赞同：19
> 
> 时间：2012-12-04T16:02:22.940
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在将具有自定义布局的 InfoWindowAdapter 添加到基于 Android Google Maps API v2 的地图片段中。我在从 getInfoWindow() 返回的视图中放置了一个按钮，虽然它显示得非常好，但当我单击所述按钮时，窗口本身会记录一次单击（像往常一样以淡黄色闪烁），而按钮没有。

如何使信息窗口中的按钮“可点击”？而且，通过扩展，信息窗口内的任何视图？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T23:02:23.507

虽然您可以使用 将信息窗口设置为任意视图[`GoogleMap.setInfoWindowAdapter()`](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setInfoWindowAdapter%28com.google.android.gms.maps.GoogleMap.InfoWindowAdapter%29)，但在地图上呈现的信息窗口不是实时视图。相反，它是适配器返回视图时的视图快照（参见[此处](https://developers.google.com/maps/documentation/android/marker#info_windows)）。因此，不幸的是，一旦将其放置在地图上，它的行为就不像标准视图。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T00:23:54.873

相反，使用 OnMarkerClickListener 侦听标记单击事件并直接显示您自己的完整视图。但是，将其锚定到标记的位置可能需要更多的工作。尝试带有 showAtLocation 的[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)（查看父级，int 重力，int x，int y）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T10:45:45.287

也许您可以在 InfoWindowClickListener 中设置自定义 AlartDialog 来切换某些事件

```
map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
        public void onInfoWindowClick(Marker marker) {
            String[] items={"onefunction","twofunction"};
            AlertDialog.Builder itemDilog = new AlertDialog.Builder(context);
            itemDilog.setTitle("");
            itemDilog.setCancelable(false);
            itemDilog.setItems(items, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    switch(which){
                    case 0:{
                            onefunction();
                            }break;
                    case 1:{
                            twofunction();
                            }break; 
                    }

                }
            });
            itemDilog.show();

        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-07T23:56:45.567

CustomInfoWindowAdapter 设置标签：

```
mWindow.findViewById(R.id.chat).setTag("chatTag"); // button 
```

和：

```
 @Override
public void onInfoWindowClick(Marker marker) {

   if(customInfoWindowAdapter.getInfoContents(marker).findViewById(R.id.chat).getTag().equals("chatTag")) {
      // any code here
   }
} 
```

# c# - 作为多映射查询的一部分返回单个参数

> ID：13706935
> 
> 赞同：3
> 
> 时间：2012-12-04T16:03:18.270
> 
> 标签：c#, dapper

*我有一个场景，我需要在Dapper*中返回单个列作为多映射查询的一部分。

我已经简化了下面的示例，但本质上我想要检索的单列值（int）不是 Post 类的属性（而是在数据库表中）。

我想自己获取这个值，以类似于示例中的以下行的方式使用它，其中 status 是有问题的 int 值：

```
post.SetSomeStatus(status); 
```

这是代码示例：

```
 var sql = 
    @"select *, p.Status from #Posts p 
    left join #Users u on u.Id = p.OwnerId
    Order by p.Id";

    var data = connection.Query<Post, User, int, Post>(sql, (post, user, status) => { 
        post.Owner = user;
        post.SetSomeStatus(status);
        return post;
    });

    var post = data.First(); 
```

我看到此代码出现以下错误：*Index was outside the bounds of the array*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:18:39.947

错误的原因：*索引超出了数组的范围*是由于 Dapper 将查询响应的段拆分为在此示例中的返回参数 Post、User 和 int 之间分配的方式。*Dapper 的约定是根据字段 ID 进行拆分，或者提供您自己的规则来使用splitOn*参数拆分结果集。

为了使上面的例子工作：

```
 var sql = 
    @"select *, p.Status AS ID from #Posts p 
    left join #Users u on u.Id = p.OwnerId
    Order by p.Id";

    var data = connection.Query<Post, User, int, Post>(sql, (post, user, status) => { 
        post.Owner = user;
        post.SetSomeStatus(status);
        return post;
    });

    var post = data.First(); 
```

我发现了另一个对我也有帮助的问题：[Correct use of Multimapping in Dapper](https://stackoverflow.com/questions/7472088/correct-use-of-multimapping-in-dapper)

# ruby-on-rails - 如何为 hstore 类型定义等号运算符？

> ID：13706938
> 
> 赞同：0
> 
> 时间：2012-12-04T16:03:22.933
> 
> 标签：ruby-on-rails

我在我的模型中添加了这样的 HSTORE 类型：

```
serialize :settings, ActiveRecord::Coders::Hstore 
```

然后我在我的模型中添加了以下内容以获取键值，而无需使用方括号。

```
# Add the possibility to inquire HSTORE keys values without brackets
#   ex. @company_settings.settings['locale'] => @company_settings.locale
def method_missing(id, *args, &block)
  if settings.has_key?(id.to_s)
    settings.fetch(id.to_s)
  else
    super
  end
end 
```

有没有办法对等号运算符做同样的事情？IE

> @company_setting.locale = 'en'

编辑

如果我这样做，这是我得到的错误 '@company_setting.locale

```
NoMethodError: undefined method `locale=' for #<CompanySettings:0x42e9a78>
from D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activemodel-3.2.1/lib/active_model/attribute_methods.rb:407:in `method_missing'
from D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/attribute_methods.rb:126:in `method_missing'
from D:/ASM/source/app/app/models/company_settings.rb:23:in `method_missing' 
```

# cuda - CUDA。数据组织

> ID：13706944
> 
> 赞同：0
> 
> 时间：2012-12-04T16:03:36.877
> 
> 标签：cuda

在我的应用程序中，每个线程都需要它自己的数据矩阵。假设我有`T`线程，每个线程都使用不同的 matrix `D[M][N]`。

**我的问题：**如何组织数据结构？

**我的解决方案：**`A`我定义了一个`T*M*N`元素数组。为避免银行冲突，我首先存储`D[0][0]` `T`每个线程的元素时间，然后存储`D[0][1]`... `D[0][M-1]`，`D[1][0]`依此类推（如果您像在 matrix`T * (M*N)`中一样查看此数组，则每个线程都有一列）。通过这种方式，我为不同内存库中的不同线程拥有相同的元素。相应地，我通过以下方式访问`D[i][j]`线程的元素： .`x``D[i][j](x) == A[T * (M * i + j) + x]`

**我的问题：**计算复杂索引的计算成本很高。

PS 我有 Nvidia Tesla C2075 (CUDA 2.0)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:33:19.283

你说M和N可以是几百。为此，您将无法大量使用共享内存（如果有的话）。你也可以仔细观察全局内存消耗（虽然特斯拉有很多内存）！200x200 x 3584threads（我认为 C2075 的最低要求）x sizeof(int) - 产生 547MB 的数据。

全局内存访问模式的工作方式不同。全局内存分为 32、64 和 128B 段。读取的成本大约是每个 warp 的不同段访问的数量。简而言之，它通常归结为 - 您的访问越分散 - 越差。

因此，除非每个线程都在同一索引处访问自己的矩阵（至少在大多数情况下），否则内存组织将不会是有效的。但是，如果上述情况属实 - 那么您描述的布局可能会起作用。

此外，如果您有分散的访问模式，禁用 L1 缓存可能会有所帮助。这是因为 L1 缓存线是 128B，但 L2 只有 32B - 所以你可以减少过度获取。至少 - 试试看:)

为了减轻访问数组的痛苦，我会做这样的事情：

```
//let the kernel dimentions be known at compile time - you can safe some computation and registers
//assuming one-dimentional kernels

static const int blockSize = ...; //equivalent to blockDim
static const int gridSize = ...; //equivalent to gridDim
static const int rowSize = blockSize * gridSize;

template <typename T, int M, int N>
class MyMatrix {
private:
  T* data; //flattened array in global memory
  int tid;
public:
  __device__ inline MyMatrix(T* dataIsHere) : data(dataIsHere) {
    tid = threadIdx.x+blockDim.x*blockIdx.x;
  }
  __device__ inline T& operator()(int x, int y) {
    return data[(y*M+x)*rowSize+tid];
  }
}

//assuming the matrix size is 200x200 and consists of ints:

__global__ void myKernel(int* flattenedMatrices) {
  MyMatrix<int,200,200> matrix(flattenedMatrices);

  ...

  matrix(2,4) = .... // happily access the matrix for both loads and stores
} 
```

# node.js - 在 Node.js 中查找调用监听器的事件

> ID：13706947
> 
> 赞同：1
> 
> 时间：2012-12-04T16:03:42.857
> 
> 标签：node.js

像这样的几个事件只有一个监听器：

```
// emitter is an instance of events.EventEmitter..    
emitter.on('event1', listener);    
emitter.on('event2', listener);    
emitter.on('event3', listener);    
emitter.on('event4', listener);    
function listener() { 
   // I need to find which event was emitted and as a result, this listener was called.    
} 
```

请注意，这`arguments.callee.caller.name`在 Node 中不起作用，因为`events.EventEmitter.on`方法调用匿名函数，因此`callee.caller`没有名称！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:08:14.003

如果我*真的*需要知道谁调用了它，我将为每个侦听器创建一个中间“函数”：

例如：

```
emitter.on('event1', function(){
    //something special with this event
    listener();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T17:05:31.563

您始终可以将事件作为字符串参数传递给`listener`函数。

例如：

```
emitter.on('event1', function() {
    listener('event1');
}); 
```

然后您的侦听器函数可以检查调用了哪个事件：

```
function listener(eventType) {
    if (eventType === 'event1')
        // Do something here
} 
```

# c# - 嵌套 UserControl 的自动调整大小不起作用

> ID：13706950
> 
> 赞同：1
> 
> 时间：2012-12-04T16:03:50.870
> 
> 标签：c#, wpf, mvvm, user-controls, resize

在我的应用程序中，我使用 a`ContentControl`并用自定义动态填充它`UserControl`，使用绑定`Content`来绑定到 a `FrameworkElement`。[编辑：添加示例代码来显示问题]

在 Steven 和 Charleh 的一些输入之后，我创建了一个小型 MVVM 项目来重现该问题。我的 MainWindow 现在看起来像这样：

```
 <Window x:Class="ResizeExample.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:localVM="clr-namespace:ResizeExample.ViewModels"
    xmlns:local="clr-namespace:ResizeExample"
    Title="ResizeExample"
    WindowStartupLocation="CenterScreen"
    Height="459"
    Width="795">
<Window.Resources>
    <localVM:MainWindowViewModel x:Key="Windows1ViewModel" />
</Window.Resources>

<Grid DataContext="{StaticResource Windows1ViewModel}">
    <Grid.RowDefinitions>
        <RowDefinition Height="50" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Canvas Grid.Row="0">
        <Menu DockPanel.Dock="Top"/>
        <Label Content="Any Label on the right side" Canvas.Right="0" Canvas.Bottom="0"/>
    </Canvas>
    <Grid Grid.Row="1" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">
        <ContentControl Name="ControlCanvas" Content="{Binding Path=externalView}" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch"  VerticalContentAlignment="Stretch"/>
    </Grid>
</Grid> 
```

设置`externalView`工作正常，但在调整窗口大小时它不会调整大小。这里我是如何在 ViewModel 中实现它的：

```
 private FrameworkElement _externalView;
    public FrameworkElement externalView
    {
        get { return this._externalView; }
        set
        {
            if (this._externalView != value)
            {
                this._externalView = value;
                RaisePropertyChanged(() => externalView);
            }
        }
    }

    public MainWindowViewModel()
    {
        externalView = new UserControl1();
    } 
```

`UserControl`包含 a （应该调整大小） ，`TabControl`其他所有内容都在`TabControl`. 包含一些标签、`TabControl`文本框和按钮（不应调整大小）和 a `DataGrid`（应调整大小）。目前整个`TabControl`被最小化，因为没有设置大小并且它不会调整大小。

```
<UserControl x:Class="ResizeExample.Views.UserControl1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="411" d:DesignWidth="805" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" >
<Grid HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"   >
    <TabControl HorizontalAlignment="Left" Name="tabControl1" VerticalAlignment="Top">
        <TabItem Header="Tab1" Name="Tab1">
            <Grid />
        </TabItem>
        <TabItem Header="Tab2" Name="Tab2">
            <Grid>
                <TextBox Height="23" HorizontalAlignment="Left" Margin="6,6,0,0" Name="textBox1" VerticalAlignment="Top" Width="357" />
                <Label Content="Input some data 1:" Height="28" HorizontalAlignment="Left" Margin="6,29,0,0" Name="label1" VerticalAlignment="Top" />
                <Label Content="Input some data 2:" Height="28" HorizontalAlignment="Left" Margin="6,57,0,0" Name="label2" VerticalAlignment="Top" />
                <Label Content="Input some data 3:" Height="28" HorizontalAlignment="Left" Margin="6,85,0,0" Name="label3" VerticalAlignment="Top" />
                <DataGrid AutoGenerateColumns="False" MinHeight="200" HorizontalAlignment="Left" Margin="6,113,0,0" Name="releaseNotesGrid" VerticalAlignment="Top" MinWidth="780" />
            </Grid>
        </TabItem>
    </TabControl>
</Grid>
</UserControl> 
```

我以为控件会自动调整大小，但这不起作用。虽然我是 WPF 和 MVVM 的新手，但可能是我错过了一些基本的东西。

我找到[了以下线程](https://stackoverflow.com/questions/2976393/wpf-user-control-does-not-resize-with-main-window)，之后我删除了尺寸并添加了对齐方式，但这并没有解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:00:45.313

我现在通过测试解决了它。问题是 中的`TabControl`and `DataGrid`，`UserControl`它的对齐方式不适用于拉伸。这现在是我的`UserControl1`，对我来说很好用：

```
<UserControl x:Class="ResizeExample.Views.UserControl1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" HorizontalContentAlignment="Stretch"  VerticalContentAlignment="Stretch">
<Grid HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" >
    <TabControl HorizontalAlignment="Stretch" Name="tabControl1" VerticalAlignment="Stretch">
        <TabItem Header="Tab1" Name="Tab1">
            <Grid />
        </TabItem>
        <TabItem Header="Tab2" Name="Tab2" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch">
            <Grid>
                <TextBox Height="23" HorizontalAlignment="Left" Margin="6,6,0,0" Name="textBox1" VerticalAlignment="Top" Width="357" />
                <Label Content="Input some data 1:" Height="28" HorizontalAlignment="Left" Margin="6,29,0,0" Name="label1" VerticalAlignment="Top" />
                <Label Content="Input some data 2:" Height="28" HorizontalAlignment="Left" Margin="6,57,0,0" Name="label2" VerticalAlignment="Top" />
                <Label Content="Input some data 3:" Height="28" HorizontalAlignment="Left" Margin="6,85,0,0" Name="label3" VerticalAlignment="Top" />
                <DataGrid AutoGenerateColumns="False" MinHeight="200" Margin="6,113,0,0" Name="releaseNotesGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MinWidth="780" />
            </Grid>
        </TabItem>
    </TabControl>
</Grid>
</UserControl> 
```

感谢 Steven 和 Charleh 为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:21:58.393

除了史蒂文斯的回答，您可能还需要分别设置和`ContentControl.HorizontalContentAlignment`设置`ContentControl.VerticalContentAlignment`为`Stretch`默认`ContentControl`值（据我所知）`Left``Top`

否则即使`ContentControl`将填充父容器，内容也不会

编辑：这是`ContentControl`显示默认值的默认模板...

```
<Style TargetType="ContentControl">
  <Setter Property="Foreground" Value="#FF000000"/>
  <Setter Property="HorizontalContentAlignment" Value="Left"/>
  <Setter Property="VerticalContentAlignment" Value="Top"/>
  <Setter Property="Template">
      <Setter.Value>
          <ControlTemplate TargetType="ContentControl">
              <ContentPresenter
                  Content="{TemplateBinding Content}"
                  ContentTemplate="{TemplateBinding ContentTemplate}"
                  Cursor="{TemplateBinding Cursor}"
                  Margin="{TemplateBinding Padding}"
                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
          </ControlTemplate>
      </Setter.Value>
  </Setter> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:18:04.317

[`Canvas`](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx) does not automatically resize it's child contents to the container size.

Try using e.g. [`Grid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid%28v=VS.95%29.aspx) instead.

# c# - XNA 旋转和移动精灵

> ID：13706957
> 
> 赞同：0
> 
> 时间：2012-12-04T16:04:06.217
> 
> 标签：c#, xna, windows-phone

```
public class dgc_Spaceship : DrawableGameComponent
{

    Texture2D shipTexture;
    Rectangle spriteRectangle;
    SpriteBatch spriteBatch;
    //
    bool horizisSelected = false;
    bool rotateSelected = false;
    bool fireisSelected = false;

    SpriteFont Count;

    //Controls for ship
    dgc_TriggerHorizontal triggerHorizantal;

    Vector2 spritePosition;
    Vector2 spriteOrigin;
    Vector2 direction;

    float rotation = 0.1f;
    Random x, y;

   List<Missle> missleCollection = new List<Missle>();
   List<Asteriod> asteriodCollection = new List<Asteriod>();

    Missle missle;

    Asteriod asteriod;

    public dgc_Spaceship(Game game)
        : base(game)
    {
        // TODO: Construct any child components here

        triggerHorizantal = new dgc_TriggerHorizontal(game);
        triggerHorizantal.triggerHorizantal += new EventHandler(triggerHorizantal_Handler);
        triggerHorizantal.triggerRotate +=new EventHandler(triggerHorizantal_triggerRotate);
        triggerHorizantal.triggerFire +=new EventHandler(triggerHorizantal_triggerFire);
        Game.Components.Add(triggerHorizantal);
        missle = new Missle(game);
        asteriod = new Asteriod(game);

        for (int i = 0; i < 2; i++)
        {
            missleCollection.Add(new Missle(game));
        }

        for (int i = 0; i < 2; i++)
        {
            asteriodCollection.Add(new Asteriod(game));
        }

      }

    /// <summary>
    /// Allows the game component to perform any initialization it needs to before starting
    /// to run.  This is where it can query for any required services and load content.
    /// </summary>
    public override void Initialize()
    {
        // TODO: Add your initialization code here

        base.Initialize();
    }

    protected override void LoadContent()
    {

        spriteBatch = new SpriteBatch(GraphicsDevice);
        shipTexture = Game.Content.Load<Texture2D>(@"Sprites\spaceship");
        spritePosition = new Vector2(450,320);
        missle.LoadContent();

        Count = Game.Content.Load<SpriteFont>(@"Sprites\Count");
        //
        x = new Random();
        y = new Random();

        foreach (Asteriod display in asteriodCollection)
        {
            display.LoadContent();

            int xVec = x.Next(0, 200), yVec = y.Next(0, 200);
            display.position = new Vector2(xVec, yVec);
        }

        base.LoadContent();
    }

    /// <summary>
    /// Allows the game component to update itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    public override void Update(GameTime gameTime)
    {
        // TODO: Add your update code here

        spriteRectangle = new Rectangle((int)spritePosition.X, (int)spritePosition.Y, shipTexture.Width, shipTexture.Height);

        spriteOrigin = new Vector2(spriteRectangle.Width / 2, spriteRectangle.Height / 2);

        direction = new Vector2((float)Math.Cos(rotation), (float)Math.Sin(rotation));

        if (horizisSelected)
        {
           spritePosition.X-= 0.5f;
           spritePosition.Y-= 0.5f;

        }

        if (rotateSelected)
        {               
            rotation += 0.1f;
           // missle.rotateSprite(); 
            spritePosition += direction * 20 * gameTime.ElapsedGameTime.Milliseconds;
        }

        if (fireisSelected)
        {
            missle.update();
        }

        base.Update(gameTime);
    }

    public override void Draw(GameTime gameTime)
    {

        spriteBatch.Begin();
      //  missle.draw(spriteBatch,rotation);
        spriteBatch.Draw(shipTexture,spritePosition,null,Color.White,rotation,spriteOrigin,1f,SpriteEffects.None,0);
      //  spriteBatch.DrawString(Count,asteriodCollection.Count.ToString(),new Vector2(100,100),Color.Red);
        foreach (Asteriod display in asteriodCollection)
        {
            display.Draw(spriteBatch);
        }
         spriteBatch.End();

        base.Draw(gameTime);
    }

    public void triggerHorizantal_Handler(object sender, EventArgs e)
    {
        //Do Stuff
        horizisSelected = !horizisSelected;

    }

    public void triggerHorizantal_triggerRotate(object sender, EventArgs e)
    {
        //Do Stuff
        rotateSelected = !rotateSelected;
    }

    public void triggerHorizantal_triggerFire(object sender, EventArgs e)
    {
        //Do Stuff
        fireisSelected = !fireisSelected;
    }

    }
} 
```

**我的问题：**

我似乎无法弄清楚这一点。我在屏幕上有 2 个功能按钮。点击后，船顺时针旋转，另一艘船向前移动。稍微搜索一下，我就找到了带有 Math.Sin/Cos 的公式，但我认为我没有正确实现它。

我需要它做的是使船沿旋转方向移动。

**它的工作方式：** 用户将按下旋转按钮，它会顺时针旋转船。当它处于用户想要的位置时，他们点击旋转按钮将其停止在该特定方向。

按下水平按钮，它将使船朝该方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:48:27.440

您的代码建议您在选择旋转时将精灵移动到所需的方向，这需要在选择水平时完成，如果选择了旋转，那么您的方向应该改变（不是每一帧）

编辑：（最多 5 分钟）

```
 if (horizisSelected)
    {
       //spritePosition.X-= 0.5f;
       //spritePosition.Y-= 0.5f;
       spritePosition += direction;// * 20 * gameTime.ElapsedGameTime.Milliseconds;

    }

    if (rotateSelected)
    {               
        rotation += 0.1f;
       // missle.rotateSprite(); 

        direction = new Vector2((float)Math.Cos(rotation), (float)Math.Sin(rotation));
        //spritePosition += direction * 20 * gameTime.ElapsedGameTime.Milliseconds;
    } 
```

如果您的船可能由于经过的时间（毫秒）而飞走，您将不得不对其进行调试

# jquery - ajax调用后Jquery Mobile转换停止工作

> ID：13706958
> 
> 赞同：0
> 
> 时间：2012-12-04T16:04:05.463
> 
> 标签：jquery, ajax, jquery-mobile

我在一个 JQM 网站上工作，我遇到了一件非常奇怪的事情，我不确定是什么原因造成的。

当我尝试在通过 ajax 加载的页面上使用其中一个 JQM 数据转换时，问题就出现了。我的流程如下。单击链接时，我使用 Ajax 重写容器 div，因此显示的数据是动态的，并且我使用 JQM 来处理转换。

下面是我的代码：

```
 <script type="text/javascript">

                function setContent(command,value,url,target){
                    $.ajax({
                        url: url,
                        type: "post",
                        data: 'value='+value+'&command='+command,
                        beforeSend: function() {
                            $.mobile.loading('show');
                        },
                        success: function(response, textStatus, jqXHR){
                            console.log("sucess");
                            replaceHtml(target,response);
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                            console.log("error occured:"+textStatus, errorThrown);
                        },
                        complete: function(){
                            $.mobile.loading('hide'); //;
                            //$.mobile.changePage( "about/us.html", { transition: "flip"} );
                        }
                    });
                }

                function replaceHtml(object,html){
                    $(object).html();
                    $(object).html(html);
                }

                function checkhash(){
                    if ($('#loadedpage').html() == '') document.location.href = "#home";
                }

                //$(function(){
                $(document).live('pageinit', function(){

                    checkhash();

                    $(".navlink").live("click", function() {
                        var command = $(this).data("command");
                        var value = $(this).data("value");
                        var url= $(this).data("url");
                        var target = $(this).attr("href");
                        //alert(command+" "+value+" "+url+" "+target);
                        setContent(command,value,url,target);

                    });

                });
            </script> 
```

单击 .navlink 时，我 ajax 到 process.php，它返回放置到目标 div 中的 html。在这种情况下，目标 div 也是 JQM 尝试转换到的同一链接。请参阅下面的示例链接：

```
 <a href="#loadedpage" class="navlink rollover" data-transition="flip" data-command="query" data-value="colors" data-url="process.php">Pick a Color</a> 
```

“#loadedpage”是容器 div。除了没有任何转换似乎正在触发这一事实之外，一切似乎都正常工作。当我单击链接时，页面会闪烁并且新内容就在那里。我不确定我错过了什么，我整天都在网上搜索，试图找出我做错了什么。

我将 JQM 1.2.0 与 JQuery 1.8.2 一起使用

一个奇怪的效果是，当我第一次加载页面时，“#home”页面上的所有转换似乎都有效......当我尝试点击通过 ajax 添加到页面的链接时，转换失败. 我相信我在向 DOM 添加新内容的方式上做错了，因为 JQM 可能无法正确初始化它？

请帮忙 :D

编辑：

我刚刚注意到的另一件事是，当我通过 ajax 加载 JQM 数据属性时，它们似乎都不起作用。下面的代码取自我用来生成内容的 PHP 脚本。

```
 function makeHeader(){
        return "<div id='menubar' data-position='fixed' data-role='header' data-tap-toggle='false'>
                    <table width='100%' cellspacing='0px' cellpadding='0px' border='0px'>
                        <tr><td width='12%'>
                                <a href='#home' data-transition='flip'>
                                    <img src='/images/menu_button.png'>
                                </a>
                            </td>
                            <td width='90%'>
                                <img src='/images/menu_bar.png'>
                            </td>
                        </tr>
                    </table>
                </div>";
    } 
```

“数据固定”似乎根本不起作用，标题呈现但它不是固定的，它只是像任何其他元素一样附加到页面顶部。我做了一些搜索，发现有一种方法可以通过使用 .trigger('create') 来强制 JQM 重新加载元素。这修复了标题，但没有修复转换。

编辑：

仍在与 JQM 战斗。我做了一个小改动，我想如果我通过 JQM 的 changepage() 方法加载 ajax 片段，它可能不会忽略转换。它仍然不起作用:( ...我对可能导致这种情况的原因感到非常困惑。

更改代码：

```
 function specialsetContent(command,value,url,target,effect){
                $.ajax({
                    url: url,
                    type: "post",
                    data: 'value='+value+'&command='+command,
                    beforeSend: function() {
                        $.mobile.loading('show');
                    },
                    success: function(response, textStatus, jqXHR){
                        console.log("sucess");
                        replaceHtml(target,response);
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        console.log("error occured:"+textStatus, errorThrown);
                    },
                    complete: function(){
                        $.mobile.loading('hide'); //;
                        $.mobile.changePage(target,{transition:effect});
                    }
                });
            } 
```

我在对 ajax 的完整调用中添加了 $.mobile.changePage()。内容加载良好..但仍然没有过渡效果。

乐叹息

编辑：

更多测试，我发现 $(document).on('pageinit', function(e) { alert("init");}); 在第一次 ajax 调用后停止警报。我认为这可能与我遇到的问题有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:20:45.680

尝试这个：

```
$(document).on( "pagebeforechange", function( e, data ) {
   console.log( e )
   console.log( data )
}); 
```

这会在 a 上发生任何事情之前触发`changePage`。数据对象包含所有 changePage 参数，例如`fromPage`, `transition`, ...

检查什么是过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:00:58.430

对于遇到此问题的任何其他人。我的问题的原因是我一遍又一遍地使用同一个容器。我认为正在发生的事情是我太快地重写了内容，并且数据属性被覆盖了。

所以我添加了第二个容器，一切都开始正常工作了:)

```
 <div id="loadedpage" class="ui-page" data-theme="none" data-role="page" data-url="loadedpage"></div>
        <div id="loadedpage1" class="ui-page" data-theme="none" data-role="page" data-url="loadedpage1"></div> 
```

简而言之，不要尝试转换到您所在的同一页面.. derp

# android - 在移动网站上使用什么标记/文档类型

> ID：13706959
> 
> 赞同：1
> 
> 时间：2012-12-04T16:04:06.893
> 
> 标签：android, iphone, html, mobile, smartphone

我正在做我的第一个移动站点，它将与主站点分开，因此仅针对移动设备（主要是 Android 和 iPhone，但理想情况下也兼容手机）。带有搜索表单和结果的网站设计/功能将相对简单（[http://m.monster.co.uk/](http://m.monster.co.uk)是一个示例，但更简单）。

我正在尝试决定在这里使用和搜索什么标记语言，而更广泛的网络似乎抛出了许多相互矛盾的答案，主要是因为这是一个不断发展的领域。

[2011](https://stackoverflow.com/questions/4794423/which-markup-language-to-use-for-the-new-web-site-desktop-mobile)年 1 月在这里提出了同样的问题- 在此之前我打算使用 XHTML 1.0，但链接的文章不鼓励这样做 - 现在我正在考虑 HTML4.01 严格 - 也许声明为 HTML 5（带有文本/ html 标头因此不是 XML 模式）着眼于未来，但我只会使用基本的 4.01 标记。

我查看了 5 个网站，它们是我的客户的竞争对手，2 个似乎使用带有 text/html 标头的 HTML5，2 个使用带有 text/html 标头的 XHTML 1.0，1 个（我认为是最古老的）使用 WAPFORUM// DTD XHTML Mobile 1.1（与 XHTML Mobile Profile 相同吗？） - 我可以假设其中包含“wap”的任何内容都已死吗？

看起来技术明智，我*几乎*可以假设我正在为桌面开发 - 这在 13 年 1 月是否正确？（请自 12 月起仍需要回答）当然除了设计、布局和导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:52:00.247

把事情简单化：

```
<!DOCTYPE html> 
```

# mfc - C++ Visual Studio 6 MFC 应用程序

> ID：13706961
> 
> 赞同：4
> 
> 时间：2012-12-04T16:04:09.973
> 
> 标签：mfc

我有一个旧的应用程序，有没有一种快速的方法可以在不更改太多代码的情况下对应用程序进行整容？一些MFC模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T23:56:15.390

通过阅读您模糊的问题很难意识到您假装在做什么。

如果您想使用更现代的 Visual Studio 版本，只需在该版本上打开它，就会启动解决方案转换向导。

如果您想要一些吸引眼球的东西，只需查看功能包。它有很好的控件，如可停靠窗格、功能区栏等，这将为您的应用程序提供更现代的外观。

如果您想更改表单背景，只需阅读 WM_CTL_COLOR 和 OnCtlColor 文档并覆盖默认行为。

这份清单可以无限延伸……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:24:23.983

```
1)Create a file <yourapplication><.exe>.manifest

2)Paste the file in the same path as your exe 

3)Paste the following content inside the manifest file

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<assemblyIdentity
    version=""
    processorArchitecture=""
    name=""
    type=""
/>
<description></description>
<dependency>
    <dependentAssembly>
        <assemblyIdentity
            type="win32"
            name="Microsoft.MSXML2"
            version=""
            processorArchitecture="X86"
            publicKeyToken=""
            language="*"
        />
    </dependentAssembly>
</dependency>
</assembly>

4) Launch the exe.. 
```

# sublimetext2 - 限制 Sublime Text 2 中的文件搜索范围

> ID：13706965
> 
> 赞同：240
> 
> 时间：2012-12-04T16:04:21.737
> 
> 标签：sublimetext2, sublimetext

在 Sublime Text 中，我经常使用`Cmd`+ `P`/ `Ctrl`+`P`在文件之间进行搜索和跳转。

通常，它会获取临时或缓存文件，如 .scssc 或 /tmp 文件夹中的内容。

有没有办法可以限制搜索结果中显示的内容？

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2012-12-04T16:07:08.280

`~/Library/Application Support/Sublime Text 2/Packages/User/Preferences.sublime-settings`在您的文件中添加和编辑它。

```
// These files will still show up in the side bar, but won't be included in
// Goto Anything or Find in Files
"binary_file_patterns": ["*.jpg", "*.jpeg", "*.png", "*.gif", "*.ttf", "*.tga", "*.dds", "*.ico", "*.eot", "*.pdf", "*.swf", "*.jar", "*.zip"],

"folder_exclude_patterns": [".svn", ".git", ".hg", "CVS"], 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2014-09-18T04:19:52.340

对于 Sublime Text 3：要从搜索和 GoTo 结果中排除，而不从侧边栏中删除，请更改`"binary_file_patterns"`设置。匹配文件和文件夹。

例如，要从 GoTo 索引中排除“dist”和“node_modules”中的文件，请将其添加到您的用户设置文件中：

```
"binary_file_patterns": ["dist/*", "node_modules/*", "*.jpg", "*.jpeg", "*.png", "*.gif", "*.ttf", "*.tga", "*.dds", "*.ico", "*.eot", "*.pdf", "*.swf", "*.jar", "*.zip"] 
```

我不知道如何在每个项目的基础上实现它:(。大多数设置都可以移动到一个`project.sublime-project`文件中。“项目 > 将项目另存为”，将其保存为项目的根目录，然后添加`"settings": {...}`到 json 中生成的文件。（来自[源代码](https://www.sublimetext.com/docs/2/projects.html)，从 ST3 build 3095 开始工作）。但不适用于“binary_file_patterns”。

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2012-12-04T16:11:28.050

您可以通过[修改项目设置来](http://css-tricks.com/exclude-compiled-css-from-sublime-text-2-projects/)从项目中排除某些文件模式和文件夹，如下所示：

```
{
    "folders":
    [
        {
            "path": "src",
            "folder_exclude_patterns": ["backup"]
        },
        {
            "path": "docs",
            "file_exclude_patterns": ["*.css"]
        }
    ]
} 
```

这在[项目文档](http://www.sublimetext.com/docs/2/projects.html)中有所描述。

* * *

## 回答 #4

> 赞同：85
> 
> 时间：2014-05-05T19:01:21.473

您还可以使用字段中的`-*/foldername/*`语法在“查找全部”窗格中排除文件夹`Where`- 例如：

```
-*/node_modules/* 
```

[http://www.sublimetext.com/forum/viewtopic.php?f=2&t=3847&start=10](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=3847&start=10)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-03-24T17:02:46.240

在崇高文本3（BLD 3059 Windows）中，我需要将“在文件夹中查找”功能限制为某些文件/文件夹，也许是单个文件，

以下内容对我有用 where 的内容：框

```
/C/path/2/project/folder,*.c,*.h,-*/path/not/to/look/in,/C/path/2/specific/file/file.h 
```

在没有绝对路径的情况下更进一步，您可以将上述内容与以下符号位置结合起来

`<open folders>, <open files>, <current file>`

```
<open folders>,*.c,*.h,-*/never_this_in_folder/*,<open files> 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-10-16T04:39:21.957

对于 SublimeText 2，这对我来说非常有用。

当您选择**Find in Files时，在****Where**输入中指定排除文件夹；

```
-bower_components/**/*, -dist/**/*, -node_modules/**/*, -tmp/**/* 
```

因此，**连字符**后跟排除模式用于您不想搜索的文件夹。

```
-folder1/**/*, -folder2/**/* 
```

这将限制您的搜索范围。

![看到这个](../Images/f743a1f222e3320de083e3955f9d46ae.png)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-02-26T19:04:19.347

我认为其中许多答案跨越了 Sublime Text 的几个不同版本，这是我在 Mac 上使用**Sublime Text 3执行此操作的方法。**

1.  打开*Sublime Text > 首选项 > 设置 - 用户*菜单
2.  编辑`file_exclude_patterns`和`folder_exclude_patterns`值以忽略**查找**工具中的文件和/或文件夹

**例子**

```
"file_exclude_patterns":
[
    ".svn",
    ".git",
    ".hg",
    ".md",
    ".txt",
    ".DS_Store"
],
"folder_exclude_patterns":
[
    "node_modules",
    "bower_components",
    ".svn",
    ".git",
    ".hg",
    "CVS",
    "deprecated",
    "cache"
], 
```

**截屏**

[![在此处输入图像描述](../Images/018061c34ee22647fd22ac882ab42e15.png)](https://i.stack.imgur.com/mMeUb.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-02-22T02:35:07.863

您还可以通过 Where 字段从搜索中排除文件夹：

在哪里：`<open folders>,-*/node_modules/*.*,-*/build/*.*`

所以在我上面的例子中：

1.  我正在搜索所有打开的文件夹。
2.  我排除了名为“node_modules”的文件夹，它是我项目根目录下的顶级文件夹。
3.  我排除了名为“build”的文件夹，它是我项目根目录下的顶级文件夹。

这在 Sublime Text 3 中对我有用，并且文件夹继续显示在 SideBar 中。这是通过输入进行的仅搜索排除（不影响任何幕后索引）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-09-07T09:33:55.103

这个解决方案非常适合我：[https ://superuser.com/a/601270](https://superuser.com/a/601270)

```
Find: "something" Where: "<open folders>" // <open folders>" not include hidden folder in sidebar 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-06-30T19:40:07.690

请注意，如果要添加项目文件夹的子文件夹，则必须使用`\/`. 使用@DavidPärsson 的相同示例：

```
 {
        "folders":
        [
            {
                "path": "src",
                "folder_exclude_patterns": ["backup\/src\/log"]
            }
        ]
    } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-15T15:05:05.053

对于那几次您需要将查找（和替换）限制在当前目录中，请执行以下操作：

```
c/Path/2/Project,-c/Path/2/Project/*/* 
```

重要的一点是`/*/*`路径排除模式。在 Windows 7 64 位上使用 Sublime Text 3 build 3083。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-25T04:16:12.630

我认为确保在每个项目中排除此类文件和文件夹的最简单方法是在 Sublime 用户设置中添加以下代码（在`~/Library/Application Support/Sublime Text 2/Packages/User/Preferences.sublime-settings`文件中添加并编辑它。）

```
{
    // Remove certain files permanently from Sublime via Preferences.sublime-settings.
    "folder_exclude_patterns": [".svn", ".git", ".hg", "CVS", "node_modules"]   
} 
```

要点：[https ://gist.github.com/ahmadawais/690a816ca158067708ad4dbe17822841](https://gist.github.com/ahmadawais/690a816ca158067708ad4dbe17822841)

或者你可以在这里查看我的首选项文件 [https://github.com/ahmadawais/dotFiles/blob/master/SublimeText/User/Preferences.sublime-settings#L80-L81](https://github.com/ahmadawais/dotFiles/blob/master/SublimeText/User/Preferences.sublime-settings#L80-L81)

# java - 动态更新列表适配器

> ID：13706967
> 
> 赞同：0
> 
> 时间：2012-12-04T16:04:27.257
> 
> 标签：java, android, android-layout

这是我的arrayAdapter，其中有两个文本字段“imgen”和“txtTitle”。目前我将以下文本设置为 arrayAdapter 中的“imgen” textView

```
holder.imgIcon.setText(Double.toString(weather.getBuyingRate())); 
```

下面是适配器。

```
package com.example.mainactivity;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class WeatherAdapter extends ArrayAdapter<Weather>{

    Context context; 
    int layoutResourceId;    
    Weather data[] = null;

    public WeatherAdapter(Context context, int layoutResourceId, Weather[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        WeatherHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgIcon = (TextView)row.findViewById(R.id.imgen);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        Weather weather = data[position];
        holder.txtTitle.setText(weather.getName());
        holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));

        return row;
    }

    static class WeatherHolder
    {
        TextView imgIcon;
        TextView txtTitle;
    }
} 
```

假设我想根据用户是否按下按钮从主类中更改它？我想根据 goButton 当前具有的文本进行`"setText(Double.toString(weather.getBuyingRate()));"`更改。`setText(Double.toString(weather.getNrOfSharesInPortfolio()));`请参阅下面代码中的注释。

**请注意**，这将更新列表中每个元素的 imgIcon。

有没有办法从 MainActivity 访问“holder.imgIcon”？

这是我的 MainActivity

```
package com.example.mainactivity;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

    private ListView listView1;
    private Button goButton;
    private String[] listheader = {"Köp Kurs","Antal"};
    int totalElemInlist = listheader.length;
    int currentelemInList=0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Weather weather_data[] = new Weather[]
        {
            new Weather("ABB", 56.0, 300),
            new Weather("Volvo", 89.0,500),
            new Weather("Astra Zeneca", 98.55, 50)
        };

        WeatherAdapter adapter = new WeatherAdapter(this, 
                R.layout.listview_item_row, weather_data);

        listView1 = (ListView)findViewById(R.id.listView1);

        View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
        listView1.addHeaderView(header);
        goButton = (Button) findViewById(R.id.testButton);
        goButton.setText(listheader[currentelemInList]);

        listView1.setAdapter(adapter);

        goButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                String buttonPressed = (String) ((Button) view).getText();
                goThroughList(buttonPressed);
                System.out.println("Button Clicked" + buttonPressed);
            }
          });
    }

    private void goThroughList(String buttonPressed){
        currentelemInList++;
        if(currentelemInList>=totalElemInlist){
            currentelemInList=0;
        }
        goButton.setText(listheader[currentelemInList]);

        if(buttonPressed == "Köp Kurs"){
            System.out.println("Köp kurs");
            //holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));
        }
        else if(buttonPressed == "Antal"){
            System.out.println("Antal");
            //holder.imgIcon.setText(Double.toString(weather.getNrOfSharesInPortfolio()));
        }

        System.out.println(currentelemInList);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:35:12.603

您有一个 TextView imgIcon，它将显示buyingRate 或 nrOfSharesInPortfolio。按下 goButton 时切换显示。

```
public class WeatherAdapter extends ArrayAdapter<Weather>{

    // ...

    private String buttonPressed = "Köp Kurs";

    public void setButtonPressed(String s) {
        buttonPressed = s;
        notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        // ... 

        Weather weather = data[position];
        holder.txtTitle.setText(weather.getName());

        if(buttonPressed == "Köp Kurs"){
            holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));
        }
        else if(buttonPressed == "Antal"){
            holder.imgIcon.setText(Double.toString(weather.getNrOfSharesInPortfolio()));
        }

        return row;
    }

    // ...
} 
```

在 MainActivity.onCreate() 中，将点击监听器上的 goButton 设置为：

```
goButton.setOnClickListener(new OnClickListener() {
    public void onClick(View view) {
        String buttonPressed = (String) ((Button) view).getText();
        adapter.setButtonPressed(buttonPressed);
    }
}); 
```

# asp.net-mvc-3 - MVC 3，使用 div，动态添加第二列

> ID：13706968
> 
> 赞同：0
> 
> 时间：2012-12-04T16:04:29.410
> 
> 标签：asp.net-mvc-3, razor, multiple-columns

循环遍历项目列表并显示每个项目的操作链接。如果有超过 n 个项目，我想将第 (n+1) 个项目放在第二列的顶部，依此类推……最多 4 列。

CSS 不是我的强项。我几乎不是 jQuery 的初学者（所以如果 jQuery 是答案，请给我 jQuery 101 答案）

每个 ActionLink 都在它自己的 div 中（我不知道这是否是执行此操作的“最佳”方式）。接受建议。

我认为的代码片段：

```
@foreach (int x in Model.ItemList)
{
     <div>@Html.ActionLink(x.ToString(), "DisplayItem", new { param = x })</div>
} 
```

这是一个 MVC 3 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T06:18:27.520

Paul Wheeler 发布了这个方便的小扩展方法，它允许您轻松地在循环中定义列。

简而言之，他将您的对象包装在另一个为您计算数学的 ForEach 类对象中。

只需指定所需的列数，然后在循环结束时，在范围内进行更改以查看 NextRow 属性是否为真。

它已经有几年的历史了，但我相信它满足了你正在寻找的需求。

[http://www.paulwheeler.com/blog/asp-net-mvc-foreach-loop-sugar](http://www.paulwheeler.com/blog/asp-net-mvc-foreach-loop-sugar)

# scala - Akka-zeromq 套接字/actor 不会收到消息

> ID：13706978
> 
> 赞同：0
> 
> 时间：2012-12-04T16:05:01.667
> 
> 标签：scala, akka, zeromq, akka-zeromq

# 问题

我正在尝试实现一个简单的参与者，它将使用 akka-zeromq 从 zeromq 接收消息。

```
import akka.actor._
import akka.zeromq._

class PullActor extends Actor {
  def receive = {
    case x => println("M: " + x.toString)
  }
}

object Main extends App {
  val system = ActorSystem("system")

  val pullActor = system.actorOf(Props[PullActor], "pull-actor")

  val pullSocket = ZeroMQExtension(system).newSocket(
    SocketType.Pull, Listener(pullActor), Connect("tcp://127.0.0.1:8008"))

  println("Press ENTER to exit")
  Console.readLine()
  system.shutdown()
} 
```

系统只打印

```
M: Connecting 
```

* * *

# 附加信息

发送消息是通过一个简单的 python 完成的

```
import zmq
ctx = zmq.Context()
p = ctx.socket(zmq.PUSH)
p.bind("tcp://*:8008")
p.send("test") 
```

我注意到的另一件奇怪的事情是，在按下 enter 后，程序不会终止。如果我使用 python 脚本向它发送消息，它会。这是完整的输出：

```
[DEBUG] [12/04/2012 18:01:45.175] [main] [EventStream(akka://system)] logger log1-Logging$DefaultLogger started
[DEBUG] [12/04/2012 18:01:45.178] [main] [EventStream(akka://system)] Default Loggers started
Press ENTER to exit
M: Connecting

[DEBUG] [12/04/2012 18:01:54.176] [system-akka.actor.default-dispatcher-2] [EventStream] shutting down: StandardOutLogger started
[DEBUG] [12/04/2012 18:01:54.176] [system-akka.actor.default-dispatcher-2] [EventStream] shutting down: StandardOutLogger started
[DEBUG] [12/04/2012 18:01:54.179] [system-akka.actor.default-dispatcher-2] [EventStream] all default loggers stopped 
```

使用

```
scalaVersion := "2.10.0-RC3"

libraryDependencies ++= Seq(
  "com.typesafe.akka" %% "akka-actor" % "2.1.0-RC3" cross CrossVersion.full,
    "com.typesafe.akka" %% "akka-zeromq" % "2.1.0-RC3" cross CrossVersion.full,
    "com.typesafe.akka" %% "akka-slf4j" % "2.1.0-RC3" cross CrossVersion.full
) 
```

`libzmq`是版本`3.2.2`（在 Arch Linux 上）

这是`application.conf`

```
akka {
  loglevel = DEBUG
  zeromq {
    socket-dispatcher {
      executor = thread-pool-executor
      type = "PinnedDispatcher"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:40:09.570

好的，找到问题了。这是 libzmq 库版本。将库降级到 2.2 有效。我为 Akka 团队创建了一张票：[https ://www.assembla.com/spaces/akka/tickets/2769-akka-zeromq-doesn-t-receive-messages-with-libzmq-3-2#/活动/门票](https://www.assembla.com/spaces/akka/tickets/2769-akka-zeromq-doesn-t-receive-messages-with-libzmq-3-2#/activity/ticket)：

# c# - 将物业拉到门面

> ID：13706979
> 
> 赞同：0
> 
> 时间：2012-12-04T16:05:02.720
> 
> 标签：c#, design-patterns, architecture

我有一个可以通过`SocketContext`门面访问的套接字通信子系统，门面是类库中唯一的公共类。`SocketContext`允许您连接到远程端点，发送和接收消息。

问题如下：假设`SocketContext`消费者想要监控发送的消息队列（发送过程是异步的）。

好吧，我们需要在其中添加`int QueueSize {get;}`属性，`SocketContext`但接下来发生的事情是我们要找到谁知道队列大小并且它是一个不知道的`DataSocket`类`SocketContext`，所以要将该属性拉到`SocketContext`我必须像这样多次包装它：

```
// DataSocket -> Connection -> SocketClient -> SocketContext

internal class DataSocket
{ 
  public int QueueSize { get{ /* calculating and returning actual value */ }}
}

internal class Connection
{
   IDataSocket _dataSocket;
   int QueueSize { get{ return _dataSocket.QueueSize; }}
}

internal class SocketClient
{
   IConnection _connection;
   int QueueSize { get{ return _connection.QueueSize; }}
}

public class SocketContext
{
   ISocketClient _client;
   int QueueSize { get{ return _client.QueueSize; }}
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:22:34.657

> `SocketContext`门面，类库中唯一的公共类。

我会说这可能是第一个问题。如果只有 1 个公共组件，则很难公开功能。这也使单一职责、开放/封闭设计和接口隔离等概念失效。你基本上有 1 个对象在做所有事情。

可能有一个像`SocketContextFacade`.

我使用的很多第三方库通常有两个方面。

1.  配置
2.  运行

配置发生一次，在启动时。它告诉库如何满足您的特定需求。运行时在整个系统中使用，根据配置运行。这里有些例子：

1.  实体框架/休眠
    1.  配置 - 数据库映射
    2.  运行时 - 会话/dbcontext
2.  流畅的验证
    1.  配置 - 验证规则
    2.  运行时 - 验证引擎和验证对象的结果
3.  服务巴士
    1.  配置 - 端点路由、队列管理、错误处理
    2.  运行时 - 消息处理程序

# java - 将implicitlyWait 与getElements 一起使用会严重减慢我的测试时间

> ID：13706982
> 
> 赞同：1
> 
> 时间：2012-12-04T16:05:22.733
> 
> 标签：java, scala, selenium, selenium-webdriver, scalatest

我们正在处理遗留代码，并且存在不稳定测试的问题。

我想增加默认超时，但 driver.findElement 在很多地方都使用 - 覆盖每个调用以使用 WebDriverWait 将是一项艰巨的任务。

我找到了使用隐式等待的建议，这看起来很理想，因为它只需要设置一次：

```
getDriver().manage().timeouts().implicitlyWait(5000, TimeUnit.MILLISECONDS); 
```

我将此添加到初始化代码块中。不幸的是，当我运行一个测试用例（50 个测试）时，我的性能炸弹 - 从大约 30 秒增加到 600 秒。

我不明白为什么性能变得如此糟糕 - 我认为如果元素不存在（测试通过）只会花费最长时间。我认为这个电话会轮询条件。但我也看不到在哪里设置轮询间隔......它在文档中确实提到应该明智地使用它，但这完全不可用！

我们是否在使用implicitlyWait() 的正确轨道上？还有其他方法可以加强我们的测试吗？

更新在调查中，它似乎正在使用implicitlyWait() 和driver.getElements() 减慢我们的速度 - 如果我取消隐式等待然后在调用后立即重新应用它，那么测试运行得更快。我们在 400 多个地方使用 getElements 插件（！） - 关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:47:58.857

我们无法通过implicitlyWait 找出为什么会发生这种情况。为了使我们的构建可靠，我们使用自己的轮询机制编写了覆盖 getElement，轮询间隔相当短（100 毫秒）。

这提高了我们测试的准确性，而不会影响构建持续时间。

```
override def findElement(selector: By): WebElement = {
      val timeoutTime = System.currentTimeMillis() + timeout
      def helper(): WebElement = {
        try {
          super.findElement(selector)
        } catch {
          case exception: NoSuchElementException => {
            if (System.currentTimeMillis() >= timeoutTime) {
              throw exception
            } else {
              Thread.sleep(pollInterval)
              helper()
            }
          }
        }
      }
      helper()
    } 
```

# javascript - 如何在命名空间应用程序的大图中正确构建自调用嵌套函数？

> ID：13706986
> 
> 赞同：2
> 
> 时间：2012-12-04T16:05:35.543
> 
> 标签：js, javascript, jquery

我知道我可以像这样创建一个自调用的嵌套函数

```
(function ns(){

    (function Class(){

        alert('ns.Class fired');

    })();

})();​ 
```

但它很丑，而且看起来不太对劲。

我的[js](/questions/tagged/js "显示标记为“js”的问题")印章不是应有的样子，我希望有人可以向我展示一种更好的方法来构建我的命名空间应用程序，并且仍然能够利用“一些”自调用函数。

```
// THIS DOESN'T WORK
//     because I haven't called "ns"
function ns(){

    (function Class(){

        alert('fired');

    })();

};​ 
```

出于我的目的，我问这个的原因是为了更好地命名我的 JS 和 jQuery。

所以我希望能够做这样的事情（这确实有效）

```
var ns = ns || {};
ns.Class = function(){};

ns.Class.Navigation = (function() {

    $('#element').on('click', function() {alert('element clicked');});

})();​ 
```

但我不确定这是否是构建更大（阅读：js 重）应用程序的正确方法？！？！

*   这个重量是不是太重了？
*   有没有更聪明的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:04:17.520

好吧，首先：您调用“主要”IIFE 的事实`ns`表明您将其视为命名空间对象，这并不完全正确。命名空间通常使用 IIFE 创建，因为它们具有闭包作用域的额外好处。但归根结底，名称空间只是 Object（文字）的一个花哨的词。
使用最流行的 lib/toolkit/framework：jQuery。基本上，它是一个巨大的 IIFE，它构造了一个同样巨大的对象，它被分配了许多方法和属性（好吧，无论如何都是对函数对象的引用）。在该 IIFE 中创建了一些其他对象和变量，但它们要么根本不*暴露*给全局对象，要么（非常）间接地暴露给全局对象。

请允许我澄清一下：

```
var myNameSpace = (function()
{
    var invisibleVar = 'can\'t touch this';
    var objectLiteral = {sing: function()
        {
            return invisibleVar;//exposed, albeit indirectly
        },
        property: 'Hammertime'
    };
    var semiExposed;
    objectLiteral.getSemi = function(newVal)
    {
        return semiExposed;//change closure var
    };
    objectLiteral.changeSemi = function(newVal)
    {
        semiExposed = newVal;//change closure var
    };
    objectLiteral.restoreSemi = (function(initVal)
    {
        return function()
        {
            semiExposed = initVal;//restore to value set when main IIFE was executed
            //don't worry about what this references: use the force... of the scope
            return objectLiteral.getSemi();//<-- return init val
        };
    }(semiExposed));//pass initial value to this scope
    var notExposedAtAll = function()
    {//can't be called but inside the main IIFE scope (and subsequent scopes)
        objectLiteral.foo = 'But it adds a public property';
    };
    objectLiteral.changeMe = function()
    {
        notExposedAtAll();//called in default context (either null or global, but it doesn't matter here)
    };
    return objectLiteral;//direct exposure
}()); 
```

这使用了所有工具包/库的一些基本原则，实际上所有体面的 JS 脚本共享：使用函数作为第一类对象，使用它们作为表达式来创建临时范围等......）
IMO，它*为*IIFE提供了一个很好的案例：作用域为您提供了足够的时间将任何对象分配给变量，因此无论您*如何*创建方法（有或没有 IIFE），您都不必担心`this`在任何给定时间引用什么，只需使用变量。
您也可以实现一些基本的数据隐藏。在此示例中，初始值`semiExposed`被传递给 IIFE，并保留在其范围内。没有什么可以解决这个问题（嗯，目前还不*是很*正确），所以你总是可以*恢复*到任何属性的初始值。

然而，我承认，随着代码的增长，IIFE 会让你的代码更难阅读，我完全理解你为什么*不想*过多地使用它们。您可以研究一下`bind`，它会帮助您减少许多 IIFE，但也有不利的一面。例如，有些人仍然使用 IE8，它不支持`bind`.
但另一个选择是：创建一个简单的 IIFE*工厂*函数：

```
function giveScope(varsFromScope,toFunction)
{
    return function()
    {
        var passArguments = Array.prototype.slice.apply(arguments,[0]);//get args from call
        passArguments.push({scope:varsFromScope});
        toFunction.apply(this,passArguments);
    };
}
var pseudoClosure = giveScope({scopeContext: this, something:'else'},function(arg1,arg2)
    {
        //function body here
        arguments[arguments.length - 1].currentContext;//<== "closure scope"
        this;//called context
    }); 
```

这样，您可以摆脱一些 IIFE，通过将它们替换为传递对象的简单函数调用。简单，并且兼容 X 浏览器。

最后，您的第一个片段是我倾向于在事件委托中使用的内容：

```
var target = e.target || e.srcElement;
var parentDiv = (function(targetRef)
{
    while(targetRef.tagName.toLowerCase() !== 'div')
    {
        targetRef = targetRef.parentNode;
    }
    return targetRef;
}(target)); 
```

这样，我不必在同一范围内创建另一个可验证对象，我的 targetRef`parentDiv`在找到 div 时被分配，并且 targetRef 被 GC'ed，我完成了它，所以不需要那个变量留在范围内。

现在已经很晚了，我不知道我是否说得很有道理。底线是：你可能*讨厌*IIFE，但你真的不能没有它们。
如果是大量括号困扰您，您可能会很高兴知道您不必*使用*它们。任何强制 JS 引擎将函数声明解释为表达式的运算符都可以：

```
(function()
{
}());
//can be written as:
!function()
{
}();
//or
~function()
{
}();
//or when assigning the return value, you don't even need anything at all:
var foo = function()
{
    return 'bar';
}();
console.log(foo);//logs bar 
```

也许您更喜欢另一种表示法？但老实说：您可能不*喜欢*这种语法，但恐怕您将不得不忍受它，或者切换到咖啡脚本或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:47:45.770

我不太清楚你的目标是什么。你只是在寻找这样的东西吗？：

```
var ns = ns || {};
ns.Class = {
    Navigation: (function() {
        return $('#element').on('click', function() {alert('element clicked');});
    })()
}; 
```

此处处理程序已附加，并且`ns.Class.Navigation`是对 jQuery 包装器的引用`#element`。如果您不需要该引用，那么为什么要为调用立即调用的函数表达式的（否则为空的）结果分配任何内容？ `ns.Class`不是一个函数，但看起来你实际上并没有将它用作一个函数。

这是否符合您的要求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:36:38.030

```
$(function ns() {
    "use strict";
    (function Class(){
        alert('ns.Class fired');
    }());
}); 
```

ns 被传递给 jquery 对象，并且调用发生在函数括号内 - 通过 crockford 测试（jslint）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-25T10:54:34.793

```
const outerName = (function innerFunc() {
  // Private stuff executed once on creation.
  const createdOnce = document.createElement('textarea');

  return function returnedFunc(someArg1, someArg2) {
    console.log('Hi!');
  };
}()); 
```

# ios - LLDB 和“ "

> ID：13706990
> 
> 赞同：3
> 
> 时间：2012-12-04T16:05:49.220
> 
> 标签：ios, xcode, debugging, lldb

有时（意味着经常）当我尝试从 iPad 应用程序调试崩溃时，LLDB 决定不要太有帮助，并且变量（堆栈或类成员）的打印无法正常工作。

如果我右键单击（或 CTRL+单击）左侧调试窗口中的变量，然后“打印描述”，我会收到如下错误消息：

```
Printing description of error:
(NSURLError *) error = <register sp is not available> 
```

或者

```
Printing description of error:
(NSURLError *) error = <register ebp is not available> 
```

如果我自己尝试使用调试控制台，我会得到如下信息：

```
(lldb) po error
(NSError *) $3 = 0x2124fc10 [no Objective-C description available] 
```

之后右键单击似乎开始工作并产生以下结果：

```
Printing description of error:
(NSURLError *) error = 0x2124fc10 
```

但我得到的只是内存地址，它似乎无法调用`description`它。如果我尝试发送`description`消息，则会发生这种情况：

```
(lldb) po [error description]
error: Execution was interrupted.
The process has been returned to the state before execution. 
```

所以这也没有帮助。可以做些什么来使调试器再次可用？我迫切地不得不赶上崩溃，但每次我可以引发它时，都会发生上述情况，我不知道如何找到错误的核心。

我用谷歌搜索“注册不可用的 lldb”，但什么也没找到，只有一些 pastebin 日志，没有答案。

仅供参考：使用 Xcode 4.5.2，iOS SDK 6.0，编译“Debug”-Profile，没有打开优化，LLDB 调试器，iOS 部署目标 5.0，发生在模拟器或设备（iPad 1 和 3，iPhone 4S，iPhone 3GS），被调试的App相当广泛地使用GCD。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T22:16:50.060

您在 Xcode 4.5.x 的 lldb 中遇到了一个错误，它在 i386 上具有易失性寄存器列表。

寄存器分为两类：易失性和非易失性（或被调用者保存）。当一个函数调用另一个函数时，所有“易失性”寄存器的内容都可能被覆盖。所有非易失性/被调用者保存的寄存器在被重用之前将由被调用函数（被调用函数）保存，并在返回之前恢复它们之前的值。

有时调试信息会说变量存储在易失性寄存器中。如果该函数位于堆栈的中间并且您想要检查该变量，则调试器无法重建该寄存器的值——它会丢失。gdb 会简单地将 volatile 寄存器的值复制到堆栈的中间，并使用（可能）虚假值打印变量，导致开发人员非常困惑。

lldb 知道易失性和非易失性寄存器之间的区别，并且不会让易失性寄存器像那样在堆栈中间被重用——他们会说寄存器值不可用。

不幸的是，在这种情况下，您会看到 lldb 声称它无法重建可用的变量。当它们应该是非易失性时，它们被错误地归类为易失性。如果不进行大量汇编语言检查，您将很难解决这个问题。这里唯一的解决方案是恢复执行，直到您再次返回该函数（即现在是第 0 帧），然后所有寄存器值都将正确标记为可用。

这在 2013 年 9 月发布的 Xcode 5 中得到了修复。

# windows - 字符串中的 Autohotkey 转义引号（用于运行命令参数）

> ID：13706992
> 
> 赞同：1
> 
> 时间：2012-12-04T16:05:50.460
> 
> 标签：windows, cmd, autohotkey

我正在尝试通过 autohotkey 将参数传递给 windows 命令，但我无法成功转义字符串中的引号。

我想做类似的事情：运行，关闭“/s /c /”MESSAGE/“”

所以我运行命令：shutdown /s /c "MESSAGE"

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:12:39.623

加倍引号以逃避它们。

```
Run, shutdown "/s /c ""MESSAGE""" 
```

有关详细信息，请参阅[EscapeChar](http://www.autohotkey.com/docs/commands/_EscapeChar.htm)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:35:50.023

正斜杠不是转义键，所以你不需要转义它，如果你有问题把花括号放在它周围，比如 :`shutdown {/}f {/}r {/}t 00 {Enter}` 但它应该可以在没有花括号的情况下工作（并且在我的机器上）。引号也可以在花括号内完成。所以： `shutdown /s /c {"}MESSAGE{"}`应该工作。

# java - 泛型中的泛型

> ID：13706993
> 
> 赞同：2
> 
> 时间：2012-12-04T16:05:55.507
> 
> 标签：java, xml, generics, jaxb

首先，我想向您展示我想要实现的目标。我想从如下所示的类中生成一个 XML 文件：

```
<config>
    <criteria name="criteriaName" defaultValue="0">
        <item value="1">
            <criteria name="criteriaName2" defaultValue="">
                <item value="foo">
                </item>
                <item value="bar">
                </item>
            </criteria>
        </item>
        <item value="2">
        </item>
    </criteria>
    <criteria name="criteriaName3" defaultValue="">
        <item value="foo">
        </item>
    </criteria>
</config> 
```

概括：

*   Criteria 有一个名称和一个默认值（可以是 String、int 或 double）和 x 项作为子项。
*   一个 Item 有一个值，该值必须与父条件 defaultValue 的类型相同。
*   一个项目还可以包含另一个条件。条件中 defaultValue 的类型独立于父母（项目）类型

例如：

```
criteria (type int)
   item (type int)
      criteria(type String)
         item(type String) 
```

我还需要以类的形式使用此模型，因为稍后我想对其进行一些验证。

现在我在一个特定的点上挣扎，让我先向你展示我的课程：

配置：

```
@XmlAccessorType(value=XmlAccessType.FIELD)
@XmlRootElement(name="config")
public class Config {

    @XmlElement(name = "criteria")
    private List<Criteria> criteriaList = new ArrayList<Criteria>();

    /*getters and setters*/
} 
```

标准：

```
@XmlAccessorType(value=XmlAccessType.FIELD)
@XmlRootElement(name="criteria")
public class Criteria<T> {

    @XmlAttribute
    private T key;

    @XmlAttribute
    private String display;

    @XmlAttribute
    private T defaultValue;

    private List<Item<T>> items = new ArrayList<Item<T>>();

    public T getKey() {
        return key;
    }
    /*getters and setters*/
} 
```

物品：

```
@XmlAccessorType(value=XmlAccessType.FIELD)
@XmlRootElement(name="item")
public class Item<T>{

    @XmlAttribute
    protected T key;

    @XmlAttribute
    protected String display;

    @XmlElement
    protected List<Criteria<T>> criteria = new ArrayList<Criteria<T>>();

    /*getters and setters*/
} 
```

有了它，我可以制作一个特定类型的标准，其中包含相同类型的项目。

现在我想在项目下插入一个标准，它的类型与项目不同，但这是不可能的：

```
 Config config = new Config();
    Criteria<Integer> criteria = new Criteria<Integer>();
    Item<Integer> item = new Item<Integer>();

    Criteria<String> subCriteria = new Criteria<String>();
    //this obviously doesn't work
    item.getCriteria().add(subCriteria); //<--

    criteria.getItems().add(item);
    config.addCriteria(criteria); 
```

我也尝试过类似这样的声明（在项目中）：

```
@XmlElement
protected <U> List<Criteria<U>> criteria; 
```

但这仅适用于方法，而不适用于属性。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:34:43.630

那这个呢。

班级项目：

```
public class Item<T,U>{

    protected T key;

    protected String display;

    protected Criteria<U> criteria = new Criteria<U>();

    /*getters and setters*/
} 
```

班级标准：

```
public class Criteria<T> {

    private T key;

    private String display;

    private T defaultValue;

    private List<Item<T,?>> items = new ArrayList<Item<T,?>>();

    public T getKey() {
        return key;
    }
    /*getters and setters*/
} 
```

基本上我们是说你有一个带有另一个类型 U 的项目作为内部标准。这样，您必须提前指定 Item 对象的 Criteria 类型，但您可以将具有不同 Criteria 类型的 Item 混合到同一个 Criteria 中，如以下代码段所示：

```
Criteria<String> c1 = new Criteria<String>();
c1.items.add(new Item<String,Float>());
c1.items.add(new Item<String,Integer>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:22:07.780

我认为你非常接近解决这个问题。主要问题是

```
protected Criteria<T> criteria = new ArrayList<Criteria<T>>(); 
```

是不正确的。根据您的要求，条件不必与父项具有相同的类型。我看到的一种可能性是

```
 protected Criteria<?> criteria = new ArrayList<Criteria<?>>(); 
```

现在唯一的问题是，我认为您将收到警告/当您尝试在列表中插入或获取元素时必须强制转换。

# uitableview - 如何将静态单元格链接到 Outlet/Actions - EG 点击呼叫单元格以呼叫号码

> ID：13706998
> 
> 赞同：1
> 
> 时间：2012-12-04T16:06:01.290
> 
> 标签：uitableview, nsstring, uiapplication

我有的代码。顺便说一句，我无法接听上班电话，网站也无法打开！

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *urlToOpen = @"";
if( indexPath.section == 0 ){
    // call number
    urlToOpen = @"tel:442074036933";
} else if( indexPath.section == 1 ){
    // open website
    urlToOpen = @"http://www.designmuseum.org";
} else {
    // open address

    urlToOpen = @"http://maps.apple.com/maps?daddr=Design+Museum+London";
}
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlToOpen]];
NSString *destinationAddress = [NSString stringWithFormat:@"%@+%@+%@",
                                [address street],
                                [address city],
                                [address country]];

NSString *sourceAddress = [LocalizedCurrentLocation currentLocationStringForCurrentLanguage];

NSString *url = [NSString stringWithFormat:@"http://maps.apple.com/maps?saddr=%@&daddr=%@",
                 [sourceAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                 [destinationAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

我需要为我的应用添加目标地址 = 28 Shad Thames, London, United Kingdom。用什么格式写？因为我无法让它工作并且真的需要快速解决我的应用程序的这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:43:43.850

您不需要为每个单元创建插座。

你的 didSelectRowAtIndexPath 方法被调用了吗？

然后你可以这样做：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *urlToOpen = @"";
    if( indexPath.section == 0 ){
        // call number
        urlToOpen = @"tel:12125551212";
    } else if( indexPath.section == 1 ){
        // open website
        urlToOpen = @"http://www.google.nl";
    } else {
        // open address
            NSString *destinationAddress = @"Amsterdam";

            Class itemClass = [MKMapItem class];
            if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

                CLGeocoder *geocoder = [[CLGeocoder alloc] init];
                [geocoder geocodeAddressString:destinationAddress completionHandler:^(NSArray *placemarks, NSError *error) {
                    if([placemarks count] > 0) {

                        MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

                        MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

                        MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

                        NSArray *mapItems = @[mapItem, mapItem2];

                        NSDictionary *options = @{
                                        MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
                                        MKLaunchOptionsMapTypeKey:
                                        [NSNumber numberWithInteger:MKMapTypeStandard],
                                        MKLaunchOptionsShowsTrafficKey:@YES
                        };

                        [MKMapItem openMapsWithItems:mapItems launchOptions:options];

                    } else {
                        //error nothing found
                    }
                }];
                return;
            } else {

                NSString *sourceAddress = [LocalizedCurrentLocation currentLocationStringForCurrentLanguage];

                urlToOpen = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%@&daddr=%@",
                             [sourceAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                             [destinationAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
            }
    }
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlToOpen]];
} 
```

indexPath.section 也可以是 indexPath.row，具体取决于您制作 tableView 的方式。

**编辑：** 我添加了“获取路线”部分。这将检查它是 ios5 还是 ios6。

对于 ios5，我使用这篇文章[http://www.martip.net/blog/localized-current-location-string-for-iphone-apps中的 LocalizedCurrentLocation](http://www.martip.net/blog/localized-current-location-string-for-iphone-apps)

对于 ios6，我使用 CLGeocoder 获取地标，然后用它和当前位置打开地图。

记得添加 CoreLocation.framework 和 MapKit.framework

# javascript - Css 属性选择器和 javascript

> ID：13706999
> 
> 赞同：0
> 
> 时间：2012-12-04T16:06:07.567
> 
> 标签：javascript, html, css

我在一个项目中遇到了这行代码，我正在尝试实现它，乍一看它是一种标准的时事通讯形式：

```
<form id="form_newsletter">
    <input type="text" 
           name="newsletter" 
           id="newsletter" 
           placeholder="Email Address..." />
</form> 
```

我的问题是，当我单击表单文本字段以写入电子邮件地址时，提交链接按钮出现在应该由这个 css（属性选择器，如果我是正确的）元素触发的一侧：

```
input[type="submit"] 
```

我的问题是如何让提交按钮将地址提交到我的电子邮件地址？基本上我可以在哪里输入通讯订阅者的收件人？如果它是一个 javascript 函数，我如何找到它并根据需要对其进行编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:16:22.290

在静态 HTML 页面上使用纯 JavaScript，没有办法发送电子邮件。您需要在服务器上运行脚本 - 例如：PHP、ASP.NET、任意数量的 Web 框架 - 在用户单击提交按钮并将表单发送回服务器后，它们将处理电子邮件的实际发送.

您的基本流程是：

*   1）有一个HTML表单（你有）。
*   2) 通过其 action="" 属性指定表单应提交到的位置。如果你打算使用 PHP，那可能是 `<form action="http://my-website.com/send-mail.php">`
*   3) 在 send-mail.php 中，编写发送邮件的代码。网上有很多简短的教程可以解释这一点。