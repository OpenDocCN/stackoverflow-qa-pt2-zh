# StackOverflow 问答 12613000-12613999

# matlab - MATLAB 中的子图 ploterrhist

> ID：12613001
> 
> 赞同：0
> 
> 时间：2012-09-27T01:55:43.360
> 
> 标签：matlab

```
for n = 1:2
    for n = 1:100

        % some logics

    end
    subplot(2,n,1);
    ploterrhist(error)
end 
```

我只得到一张图，我什至没有看到子图。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:06:01.337

尝试这样的事情

```
for i = 1:2
  for j = 1:100
    % some logics
  end
   subplot(2,1,i);
   ploterrhist(...)
end 
```

# php - 直接从 Twig 中的 ChoiceType 元素访问特定选项

> ID：12613003
> 
> 赞同：7
> 
> 时间：2012-09-27T01:55:54.313
> 
> 标签：php, symfony

我的项目要求我在保留数据库结构的同时重建大型系统的功能（出于历史计费原因）。我从 Symfony 2.0.x 开始，并开始升级到 Symfony 2.1.2。

以前，我可以使用点表示法在 Twig 中直接访问单选组的（multiple = false，expanded = true）各个选项。例如，在我的表单中，我定义了类似于此的元素：

```
 $builder->add('settings_group', 'choice', array(
        'choices' => array(
            'existing' => 'A pre-existing setting group',
            'override' => 'Specify an override instead'
        ), 
        'multiple' => false, 'expanded' => true,
        'property_path' => false
        )
    ); 
```

在我的 Twig 模板中，我的标记是这样的：

```
 <ul>
        <li>
            {{ form_widget(form.settings_group.existing) }}
            [ .. dropdown ..]
        </li>
        <li>
            {{ form_widget(form.settings_group.override) }}
            [ .. text input .. ]
        </li>
    </ul> 
```

它非常适合我需要做的事情，因为“现有”或“覆盖”单选按钮将确定哪些字段被保留，哪些字段在保存实体时被重置。具体来说，出现我的问题是因为我想手动分离单选按钮并在下一个单选按钮之前输出各种其他表单字段。基于现有功能和数据库，它是该系统中多种形式的重复模式。

升级到 Symfony 2.1 后，这不再可能，我得到一个错误：

> 对象“Symfony\Component\Form\FormView”的“现有”方法不存在

我尝试了各种可能性，包括 .get() 和迭代 .choices() [最终给了我无法使用 form_widget() 输出的 ChoiceView 对象]。我尝试制作一个自定义类型，其中包含一个单选按钮和相关的设置字段，但是由于元素名称的创建方式，我不能让它们相互排斥。我还尝试制作一个表示选项和关联字段的更复杂的类型，但再次无法访问和呈现类型模板中的特定选择。

理想情况下，我希望 API 中有一些我只是忽略的东西，并且可以找到/替换并让它工作。否则，将不胜感激有关（或指向）对 Symfony 更友好的方法的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T21:00:38.360

我遇到过类似的情况并以这种方式解决了它：

```
<li>
    {{ form_widget(form.myRadioField.children[0]) }}
</li>
<li>
    {{ form_widget(form.myRadioField.children[1]) }}
</li> 
```

**这绝不是干净、可重用、最佳实践的代码，但它确实有效。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:13:37.807

您是否尝试过类似的方法：

```
<ul>
    <li>
        {{ form_widget(form['settings_group']['existing']) }}
        [ .. dropdown ..]
    </li>
    <li>
        {{ form_widget(form['settings_group']['override']) }}
        [ .. text input .. ]
    </li>
</ul> 
```

# python - 如何解码 .lzo_deflat 文件？

> ID：12613013
> 
> 赞同：0
> 
> 时间：2012-09-27T01:57:05.420
> 
> 标签：python, unix, command-line, hadoop, compression

有人有可以解码 .lzo_deflate 文件的命令行或 python 库吗？例如，Hadoop 使用这些文件格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:07:28.227

Google for Python LZO，并检查您的 linux 发行版`lzop`：

许多 Linux 发行版（例如 Debian、Ubuntu）都会有这个：

```
liblzo2-2 - data compression library
liblzo2-dev - data compression library (development files)
lzop - fast compression program
python-lzo - Python bindings for the LZO data compression library 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T10:13:01.830

For the windows' folks:

*   Python Extension Packages for Windows - Christoph Gohlke : [http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-lzo](http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-lzo)

# c++ - std::map::insert 异常

> ID：12613015
> 
> 赞同：2
> 
> 时间：2012-09-27T01:57:22.997
> 
> 标签：c++, stl

这是另一个问题，“我的代码不起作用，我不知道为什么”，我很害怕。我只是没有足够的 stl 知识来知道为什么 std::map::insert 会抛出异常。如果您知道它在哪些情况下会引发异常，您可能可以跳过这堵文字墙并直接回答。如果您只是迫切需要有关该问题的一些背景知识，那就去做吧。我将发布我的代码并解释做了什么，如果所有对 stl 有更好了解的人都可以解释我的插入调用可能有什么问题，我将不胜感激。

不久前我写了一个对象，我偶尔将它用作我的去工厂对象。它的主要目的基本上是获取一个字符串并存储该字符串和一个“创建新对象函数”指针，这样最后你就可以调用一个函数，传递一个字符串，如果它有一个有效的注册，它返回派生对象的新实例。少说话，多代码，这就是我得到的：

工厂.h

```
#ifndef FACTORY_H
#define FACTORY_H

// library tools
#include <map>
#include <string>

// Simplified registration macros
#define DECLARE_DERIVED(T, base)    static Factory<base>::DerivedRegister<T> reg;
#define DEFINE_DERIVED(T, base, s)  Factory<base>::DerivedRegister<T> T::reg(s); 

template<class base>
class Factory
{
protected:
    template<class T>
    static base * createT() { return new T;}

public:
    typedef std::map<std::string, base*(*)()> map_type;

    virtual ~Factory(){ }

    static base * createInstance(const std::string & s)
    {
        if(!m_Map.count(s))
            return nullptr;
        std::map<std::string, base*(*)()>::iterator it = m_Map.find(s);
        return it->second();
    }

    template <class T>
    struct DerivedRegister;

protected:
    static map_type m_Map; 
};

template<class base>
template<class T>
struct Factory<base>::DerivedRegister : public Factory<base>
{
    DerivedRegister(std::string const & s)
    {
        m_Map.insert(std::pair<std::string, base*(*)()>(s, &createT<T>));
    }
};

#endif 
```

这里有一个更好的解释它真正快速地做什么。假设您有一个基类 A 类。然后你有任意数量的派生类。我在某处模板化为 A 的工厂对象，然后手动创建派生寄存器对象，或使用派生类声明顶部的宏来创建静态注册表对象。然后在实现中定义它并调用它的构造函数，传入一个用于标识对象的字符串。使用工厂成员 createInstance，您可以传入一个字符串标识符并返回一个由 A * 指向的派生对象。

例子：

啊

```
class A
{

}; 
```

A.cpp

```
// the map for this factory template has to be defined somewhere, as it is static
Factory<A>::map_type Factory<A>::m_Map; 
```

bh

```
#include <A.h>
class B : public A
{
  // anywhere in declaration of derived B
  DECLARE_DERIVED(A, B)
}; 
```

b.cpp

```
 // just somewhere in cpp file
 DEFINE_DERIVED(A, B, "B") 
```

主文件

```
int main()
{
  A * ptr;
  Factory<A> factory;

  ptr = factory.createInstance("B");
} 
```

这个对象过去曾为我工作过，大部分都没有问题。现在我正在做一个更复杂的项目。我喜欢游戏引擎所涉及的数据组织/api设计，我只是想实现一个编目解决方案，（但不是实例化的）着色器，这样你就有了一个完整的着色器列表。已经编程，但除非需要，否则它们不会在运行时实例化。除此之外，这个问题实际上与 d3d11 无关，或者至少我希望不是。

这就是正在发生的事情。我有一个代表图形着色器抽象类的对象。您希望编写的所有着色器都必须从该对象派生。您从所有不同的着色器中派生并实现它的功能不同。

让我们在命名空间同步中调用基础对象“SYNC::D3D11Shader”以及派生着色器“ColorShader”、“LightShader”和“TextureShader”。由于我不只是想在渲染对象中创建这些着色器实例的 std::map，因此我在渲染对象中创建了一个工厂，就像这样。

D3D11Renderer.h

```
class D3D11Renderer
{
    // many other members...
    Factory<D3D11Shader> m_ShaderFactory;
    // many other member...
}; 
```

D3D11Renderer.cpp

```
// define this templated classes map or you'll get undefined errors
Factory<SYNC::D3D11Shader>::map_type Factory<SYNC::D3D11Shader>::m_Map; 
```

然后在 ColorShader 中我使用这样的宏

D3D11ColorShader.h

```
class D3D11ColorShader : public SYNC::D3D11Shader
{
  // ...lotsa members
  DECLARE_DERIVED(D3D11ColorShader, SYNC::D3D11Shader)
  // lotsa member...
}; 
```

D3D11ColorShader.cpp

```
// define the registery object with it's key here
DEFINE_DERIVED(D3D11ColorShader, SYNC::D3D11Shader, "ColorShader") 
```

这一切都编译得很好，它抛出异常的地方是我第一次在 D3D11ColorShader.cpp 中调用 registryObjects 构造函数，特别是在插入调用时。异常错误是这样的：

> Syncopate.exe 中 0x772315de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000004。

所以实际上，问题归结为 std::map::insert 何时抛出异常以及为什么。我只知道每个人都会询问我正在做的事情的背景。低头，一堵巨大的文字墙出现了！我真正需要的只是一种预感。

我应该还是不应该标记 d3d11，因为这个问题与它无关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:37:09.407

这里*有一个*问题：

```
 std::map<std::string, base*(*)()>::iterator it = m_Map.find(s);
   return it->second(); 
```

如果调用`find`失败（即在地图中找不到's'），那么它将返回`m_Map.end()`. 取消引用这是一个禁忌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:36:07.503

我的猜测是，这是由于静态变量的初始化顺序。没有办法控制这个顺序。所以你不能保证你的初始化：

```
Factory<A>::map_type Factory<A>::m_Map; 
```

在此初始化之前被调用：

```
DEFINE_DERIVED(A, B, "B") 
```

在这种情况下，后一个语句必须首先被初始化，所以你的 map 没有被分配。

另一种设计模式将控制单例工厂的初始化。如果你有一个显式的 Initialize 函数来创建工厂对象，那么你可以在 main 的开头调用它。例如

工厂.h

```
class Factory {
private:
    static Factory* instance_;
public:
    static Initialize(){instance_=new Factory;}
    Factory* instance(){return instance_;}
} 
```

工厂.cpp

```
static Factory* Factory::instance_ = NULL; 
```

如果您有很多工厂，您可能需要一个初始化函数来初始化它们，并且您必须记住在创建它们时添加新工厂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T03:24:36.963

好的，我实际上已经为这个错误努力了大约一天，直到现在我才意识到出了什么问题。

问题1：

派生的着色器标头实际上从未包含在整个项目中的任何地方，尽管它从不需要直接实例化，但它仍然必须包含在某个地方，以便可以链接并包含在构建中。

问题2：

很有趣，就像组合说的那样，初始化顺序不是一个接一个地完成，但是再看我的旧代码，它似乎之前初始化正确。这里的区别是，我将派生对象的工厂放在与基类不同的对象中。我以前做的是在基类中声明一个静态函数和静态工厂，以便您可以从基类本身实例化它的任何注册派生类。当工厂被包含在基类中，并且通过静态函数完成实例化时，所有静态的初始化顺序似乎始终如一（不确定这是否总是正确的）。更改后它现在运行良好。

所以现在，我的回答是，你可以得到这样的操作系统异常，因为你试图使用对从未真正包含在项目中的任何地方的对象的引用。尽管从未包含此对象，但我对编译器或链接器的了解并不多，无法告诉您为什么它似乎编译得很好。如果有人想扩展我的答案，请。

如果与这种困境有关，我会使用 MSVC++ 2010 express。

# objective-c - 将小视频从一台 iOS 设备发送到另一台设备的最快方法是什么？

> ID：12613018
> 
> 赞同：0
> 
> 时间：2012-09-27T01:58:05.793
> 
> 标签：objective-c, ios, ipad, video, file-transfer

我想制作一个应用程序，其中一个人拍摄一段短视频，长度可能为 5 到 20 秒，然后尽快将其发送给另一个用户。一个例子是体育赛事的即时回放。传输这种大小的视频最快、最可靠的方法是什么？我正在考虑以下两个选项，但对其他建议持开放态度。

*   将视频上传到我自己的服务器并执行某种推送操作
*   通过共享 wifi 网络执行直接传输（长距离呢？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:02:48.373

我会采取你的第一个选择

1.  录制您的视频并在源设备上将其压缩到合理的大小。
2.  将视频上传到外部服务器。
3.  从服务器向应该能够观看视频的特定用户发送推送通知。

如果视频的接收者/消费者可以从服务器流式传输上传的视频，那将是一个非常合理的用户体验。

# javascript - 是否逻辑关键字|| 只得到值真或假？

> ID：12613021
> 
> 赞同：0
> 
> 时间：2012-09-27T01:58:29.630
> 
> 标签：javascript

以下代码来自 'JavaScript by Example Second Edition' 示例 15.24
我不明白代码 var evt = e || 窗口.事件；//浏览器差异
我觉得var evt应该是true还是false，所以evt.target应该是null吧？

```
function colorText(e){
  var evt = e || window.event; //Browser differences
  var evtTarget= evt.target || evt.srcElement;
  if(evtTarget.id=="first"){
div1.className="red";
}
else if(evtTarget.id == "second"){
div2.className="blue";
}
else{ div3.className="green";}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:03:52.963

到目前为止，所有答案在技术上都是正确的。完整的故事：

|| 如果将第一个操作数转换为布尔值的结果为真，则运算符返回第一个操作数的值。否则，它返回第二个操作数的值。 [ES5 规范](http://es5.github.com/#x11.11)

Many different values are "falsy", including null and undefined. [Nailing down exactly what falsy is can be tricky](http://zero.milosz.ca/), but you can count on those, which is useful for catching variables and properties that may not be present in different browsers. If you want to check for an undefined variable yourself, though, it's usually best to use typeof instead.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T01:59:57.597

如果`e`未设置，则意味着您没有使用参数调用该函数，那么`evt`将是`window.event`. 如果`e`设置了，那么`evt`将是什么`e`。

有一个称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)的概念，这意味着如果在没有完全评估的情况下满足条件，则不需要完全评估它。这里就是这种情况。如果`e`设置了，你不在乎是什么`window.event`，因为你已经有了可以设置`evt`的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:59:57.047

不，在 JavaScript 中 || 不会转换为布尔值，而是短路到任何值（从左到右）首先评估为真值。

它保留了表达式的评估。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T02:00:48.283

```
var evt = e || window.event; 
```

如果 e 不为空，此行将变量 evt 设置为 e。否则（如果 e 为空，例如如果 e 未传递给此函数），则将 evt 设置为 window.event。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T02:00:53.483

如果~~关键字~~表达式不是~~null~~ falsey，则返回第一个~~表达式~~操作数的值，否则返回第二个表达式的值。

 ~~~~Javascript 是弱类型的，所以你总是可以使用 || 作为布尔值，因为所有不为假或不为空的东西都会计算为真。但它实际上是在这里返回值 s~~。所以`evt`变成`e`（参数）或者如果`e` ~~不存在~~有一个错误的值，它变成`window.event`.~~

# excel - 如何将变量传递给函数？

> ID：12613025
> 
> 赞同：0
> 
> 时间：2012-09-27T01:59:33.313
> 
> 标签：excel, vba

我有一个名为 sortRows(location As String, wksht As String)

参数 wksheet 从另一个循环电子表格的子例程传递给 sortRows。

我不断收到错误“编译错误。”预期：=“

经过一番研究，我发现了 ByRef 指令（？）并将 Sub 重新编写为 sortRows(location As String, ByRef wksht As String)

但是在工作表循环中调用它时我仍然会遇到同样的错误。

Sub 工作正常，但我似乎无法正常调用它。

我尝试了两种调用 Sub 的方法： sortRows ("Florida",sheetname) sortRows ("Florida", wksht:=sheetname)

两种方式都会导致“编译错误”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:37:52.443

没有看到你的完整代码有点难。

但我建议您尝试将工作表变量作为工作表传递，即

[Pearson Passing Simple Variables ByRef And ByVal](http://www.cpearson.com/excel/byrefbyval.aspx)有一个很好的参考资料

```
Sub test()
Dim ws As Worksheet
Set ws = Sheets(2)
Call sortRows("MyName", ws)
End Sub

Sub sortRows(location As String, ByRef ws1 As Worksheet)
MsgBox ws1.Name
End Sub 
```

# php - 当 emember 订阅到期时，WordPress 用户的角色设置为“此站点没有角色”

> ID：12613034
> 
> 赞同：3
> 
> 时间：2012-09-27T02:00:32.860
> 
> 标签：php, wordpress

会员版本：**7.5.3**

WordPress 版本：**3.4.2**

**会员设置**：

*   允许过期帐户登录::**选中**
*   自动创建 Wordpress 用户：**选中**
*   自动登录 Wordpress：**勾选**
*   自动登录 eMember：**勾选**

设想：

1.  用户注册为订阅者。
2.  成功登录 WordPress wp-admin。
3.  帐户在一天后到期。
4.  用户尝试登录 wp-admin。
5.  用户被重定向到“您没有足够的权限访问此页面”。页。
6.  管理员在用户管理页面中检查用户的详细信息。
7.  **角色**设置为**- 此站点没有角色 -**

**角色**仍应设置为**订阅者**。你认为这里的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:50:41.057

*   从您的 cpanel 打开文件管理器

*   找到`WWW`根目录下的文件夹，然后单击`wp-content`并在该文件夹下，单击`plugin`文件夹并浏览您最近安装的插件并仅删除新安装的插件文件夹（例如您应该在`www/wp-content/plugins/`）。

*   转到您的 Internet Explorer 并使用您的 wordpress 登录详细信息登录您的网站。它应该对我有用。我安装了一个音频插件，wordpress 给了我以下错误：

> 您没有足够的权限访问此页面。

所以，我删除了插件，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:40:11.450

您遇到的问题是，当用户成员资格到期时，他们会通过 emembership 插件从角色中删除，但是没有其他角色可以进入。您可以创建另一个取消订阅的角色并将它们移入那里。在 emembership 文档中检查如何执行此操作。

# php - filter_var W/ FILTER_VALIDATE_EMAIL 与自定义 REGEX

> ID：12613035
> 
> 赞同：2
> 
> 时间：2012-09-27T02:00:37.843
> 
> 标签：php, email-validation

我已经在这个网站上搜索过类似的答案，但我仍然无法下定决心。我也是这个网站的新手。

我正在开发一个 PHP 脚本以允许用户注册。在他们注册后，他们会收到一封带有令牌的电子邮件，以验证他们是否有权访问该电子邮件，说明它是有效的，并且它将他们标记为“有效用户”，否则它将在设定的时间后删除该条目。我想知道的是，如果我制作的自定义 REGEX（在大多数情况下效果相当好，只是不时需要调整），或者`filter_var`使用 FILTER_VALIDATE_EMAIL 是否比我的自定义 REGEX 更好。我知道，如果您发送太多退回的电子邮件，您可能会被标记为垃圾邮件站点，而我的客户不会太喜欢这样。

任何其他可能有帮助的东西都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:25:56.673

如果您没有很多验证电子邮件或编写正则表达式的经验，我会使用 Filter_validte_email。同样重要的是要记住，任何正则表达式或过滤器都不会阻止退回的电子邮件，它们只会检查以确保输入的地址看起来像应该的那样。因此，您将获得对 noaddress@nodomain.tld 的有效检查，即使这显然不会被传递，除非 nodomain.tld 碰巧存在并且碰巧有一个用户 noaddress 在那里有一个邮件帐户。

请参阅[如何在不发送电子邮件的情况下检查电子邮件地址是否存在？](https://stackoverflow.com/questions/565504/how-to-check-if-an-email-address-exists-without-sending-an-email)

# android - 为什么我的自定义视图没有绘制前景元素？

> ID：12613037
> 
> 赞同：2
> 
> 时间：2012-09-27T02:00:42.183
> 
> 标签：android

我正在逐步完成“专业 Android 4 应用程序开发”。我正在研究第 4 章中的“ToDoList”示例，并且正在为列表项实现自定义视图。当我运行我的应用程序版本时，自定义视图呈现其背景颜色，但边缘线和文本似乎没有呈现。我已经将我的版本与代码包中的版本进行了比较，我只看到了看似无关紧要的差异，但肯定有一些微妙的不同之处。

我显然想解决这个问题，但这样的事情是关于如何找出问题的更好的教训，但我只是看不到它。

我希望我可以压缩这两个应用程序并将它们附加到这里，但这似乎不是一个选项。我确实将我的示例应用程序上传到了共享的 Google Drive 文件夹，该文件夹包含[在此处](https://docs.google.com/file/d/0BzByqRAfzsn7dTBMOTFZZWpxZnc/edit)。我相信我已将其公开，以便其他人可以下载它。

如果有人报告说他们无法访问它，我想我会尝试在此处粘贴相关的源文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:51:27.850

> ......我只看到看似无关紧要的差异，但肯定有一些微妙的不同。

有一个非常重要的区别。在您的`init`方法中，您初始化 float`margin`变量，如下所示：

```
margin = myResources.getColor(R.color.notepad_margin); 
```

但是，通过查看您的代码（您在哪里画线），`margin`变量似乎是您绘制垂直线的点（在您的情况下，边距会很大并且超出屏幕）。这不应该是：

```
margin = myResources.getDimension(R.dimen.notepad_margin); 
```

此外，您可能希望增加笔画宽度以查看这些线条：

```
linePaint.setStrokeWidth(3.0f); 
```

# class - 最终比率将不计算。我的类方法叫错了吗？

> ID：12613038
> 
> 赞同：0
> 
> 时间：2012-09-27T02:00:43.640
> 
> 标签：class, variables, object, methods

在我的代码中，我必须计算航班延误的航班数量/航班总数。我已经编写了代码，除了最终的比率打印输出外，一切正常。有人看到问题了吗？

```
import au.com.bytecode.opencsv.CSVReader;
// javac -classpath .;opencsv-2.3.jar flightinfo.java
import java.util.*;
import java.io.*;
import java.lang.*;

public class flightinfo2{

public static void main (String [] args) throws Exception{

    CSVReader reader = new CSVReader(new FileReader("delayed.csv"));
    String [] nextLine;

    Map<String, Carrier> airlines = new HashMap<String, Carrier>();         

    while ((nextLine = reader.readNext()) != null) {
            // At this point, nextLine is the name of the carrier, e.g., "Continental"
            // nextLine can be used as the key in your "airlines" map. E.g., airlines.put(nextLine, new Carrier());

        if (airlines.containsKey(nextLine[1])){
        airlines.get(nextLine[1]).addNumFlights(Integer.valueOf(nextLine[6]));
        airlines.get(nextLine[1]).addNumDelayed(Integer.valueOf(nextLine[7]));
        airlines.get(nextLine[1]).setDelayedRatio();
        }
        else {
          airlines.put(nextLine[1], new Carrier());
          airlines.get(nextLine[1]).setName(nextLine[1]);
          airlines.get(nextLine[1]).setNumFlights(Integer.valueOf(nextLine[6]));
          airlines.get(nextLine[1]).setNumDelayed(Integer.valueOf(nextLine[7]));
        }
    }
airlines.get("Continental").print();
airlines.get("Atlantic Southeast").print();
airlines.get("American Eagle").print();
airlines.get("Delta").print();
airlines.get("ExpressJet").print();
airlines.get("United").print();
airlines.get("SkyWest").print();
airlines.get("US Airways").print();
airlines.get("JetBlue").print();
airlines.get("American").print();
airlines.get("Mesa").print();
airlines.get("Frontier").print();
airlines.get("AirTran").print();
airlines.get("Southwest").print();  

}
} 
```

班上

```
public class Carrier{
String name;
int totalFlights;
int delayedFlights;
int totalDelayedRatio;

public Carrier(){}

public void setName(String s){
name = s;
}
public void setNumDelayed(int n){
delayedFlights = n;
}

public void setNumFlights(int s){
totalFlights = s;
}

public void addNumDelayed(int n){
delayedFlights = delayedFlights + n;
}

public void addNumFlights(int s){
totalFlights = delayedFlights + s;
}

public void setDelayedRatio(){
totalDelayedRatio = (delayedFlights/totalFlights);
}

public void print(){
System.out.printf("%s:\t%d,\t%d,\t%d\n", name, totalFlights, delayedFlights, totalDelayedRatio);
} 
```

}

打印输出如下： Continental: 92, 81, 0 <---应该是比率...更多运营商

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:08:36.403

代替：

```
totalDelayedRatio = (delayedFlights/totalFlights); 
```

尝试明确使用“this”：

```
this.totalDelatedRatio = (delayedFlights/totalFlights); 
```

# ios - 无法将 GeoJSON 文件上传到 iTunes Connect

> ID：12613045
> 
> 赞同：2
> 
> 时间：2012-09-27T02:01:47.933
> 
> 标签：ios, xcode, coordinates, itunes, geojson

我收到以下错误：

*“您上传的 JSON 文件无效。错误：提供的每组坐标必须有效”*

该文件的内容是：

```
{ "type" : "MultiPolygon",
    "coordinates": [
                    [[[19.5,-99.1], [19.5,-99.2], [19.3,-99.2], [19.2,-99.1], [19.2,-98.9], [19.3,-98.9], [19.5,-99.0]]]
                    ]
} 
```

我真的找不到什么问题，它在模拟器上完美运行。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:56.710

GEOJSON 中 Coordinate 的顺序是**[longitude, latitude]** :)

您可以查看更多详细信息： http: [//geojson.org/geojson-spec.html#appendix-a-geometry-examples](http://geojson.org/geojson-spec.html#appendix-a-geometry-examples)

或验证您的 geoJSON：[http ://geojsonlint.com](http://geojsonlint.com)

希望它是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:36:43.857

我复制了交换坐标的顺序，就像在 Apple Docs 中一样。并使起点和终点坐标相等。

# performance - Magento 缓存自定义图像

> ID：12613051
> 
> 赞同：1
> 
> 时间：2012-09-27T02:03:09.567
> 
> 标签：performance, magento, caching

我正在使用雪崩主题并使用主页滑块。

图像通过管理面板中的一个部分添加到站点，并存储在

```
media/banners/default/slidex.jpg 
```

我注意到这些图像没有被缓存并直接从它们的位置加载。有没有办法在magento图像缓存中包含这些图像以减少加载时间？

由于这些是大型横幅图像，您可能会认为它们需要更长的时间来加载，但是在我主页的 pingdom 工具分析中，它表明服务器端的等待时间比接收文件的实际时间长得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T14:51:55.193

我有一个类似的问题，女巫正在缓存调整大小的品牌徽标滑块图像。

*我通过使用Mage::getBaseDir('media')*将调整大小的图像存储在 media/product/cache/resized_images 中解决了这个问题。因此，您只需要在重新生成之前检查缓存的图像是否存在。

在管理员中刷新图像缓存时，此文件夹中的所有内容都会被删除。

我希望它有所帮助。

# hibernate - HSQLDB (in-mem mode) & Hibernate - DB 不更新

> ID：12613052
> 
> 赞同：0
> 
> 时间：2012-09-27T02:03:24.323
> 
> 标签：hibernate, hsqldb, in-memory-database

我已按照步骤设置 HSQLDB 和 Hibernate。现在创建了一个小的用户详细信息实体类。并根据我的实体类地址创建了 hibernate.cfg 文件。程序正确执行，但是当我打开 db 时，详细信息没有更新。

这是 m wrkin 第一次使用 im-mem 数据库，真的很难理解它是如何工作的。

只是无法理解这里的 gng 有什么问题......

我从 eclipse lib 文件夹启动服务器（我在其中添加了 hsqldb jar）

然后执行主类，没有错误或异常显示，可以在控制台看到sql查询。但数据库中什么都没有

我的 hibernate.cfg 如下

```
<hibernate-configuration>
<session-factory>
    <!-- Database connection settings -->
    <property name="connection.driver_class">org.hsqldb.jdbcDriver</property>
    <property name="connection.url">jdbc:hsqldb:mem:testdb</property>
    <property name="connection.username">java</property>
    <property name="connection.password"></property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">10</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.HSQLDialect</property>

    <!-- Enable Hibernate's current session context -->
    <property name="current_session_context_class">org.hibernate.context.ManagedSessionContext</property>

    <property name="hibernate.cache.use_second_level_cache">false</property>
    <property name="hibernate.cache.use_query_cache">false</property>

    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>        
    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <property name="hbm2ddl.auto">create</property> 

    <!-- the annotated entity class -->
    <mapping class = "com.javaapp.addressbook.dto.UserDetails"/>

</session-factory> 
```

附上日食快照

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:24:37.907

您正在连接到存储在应用程序进程中的内存数据库：

```
<property name="connection.url">jdbc:hsqldb:mem:testdb</property> 
```

如果您想连接到 HSQLDB 服务器提供的数据库，那么您的 URL 应该如下所示：

```
<property name="connection.url">jdbc:hsqldb:hsql://localhost/testdb</property> 
```

实际 URL 取决于您如何配置服务器。

# c++ - 用于进程间共享内存的非 Boost STL 分配器？

> ID：12613055
> 
> 赞同：11
> 
> 时间：2012-09-27T02:03:46.393
> 
> 标签：c++, ipc, shared-memory, allocator

由于我工作的政策，我无法使用高于 1.33.1 的 Boost 版本，也无法使用高于 4.1.2 的 GCC 版本。是的，这是垃圾，但我对此无能为力。Boost 1.33.1 不包含进程间库。

也就是说，我的一个项目需要在共享内存中放置一个`std::map`（或更可能是一个）。`std::unordered_map`当进程由单个进程（“服务器”）加载并由许多其他进程读取时，它只被写入/修改一次。我以前没有做过共享内存 IPC，所以这对我来说是一个相当新的领域。我看了看，`shmget()`但似乎我不能继续使用相同的共享内存密钥进行分配（我认为 STL 容器分配器需要）。

是否还有其他使用共享内存**的 NON-BOOST STL 分配器？**

**编辑：**这*已经*完成了。[Dobbs 博士早在 2003 年就有一篇关于如何做到这一点的文章](http://www.drdobbs.com/creating-stl-containers-in-shared-memory/184401639)，我开始将其用作参考。但是，代码列表不完整，指向它们的链接重定向到主站点。

**编辑编辑：**我不只是重写 Boost.Interprocess 的唯一原因是因为涉及的代码量。我只是想知道是否有专门针对 POSIX 共享内存的相对简短和简洁的东西，我可以从头开始重写，因为网络之间的数据传输也需要经过多天的审批流程......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T07:45:08.003

指针在共享内存中不起作用，除非您无法将共享内存固定在固定地址（在所有进程中都是一致的）。因此，您需要特定的类，它们要么是连续的（无指针），要么在映射共享内存的内存区域中具有偏移量（而不是指针）。

我们在非常相似的情况下使用共享内存：一个进程计算一组数据，将其放入共享内存中，然后向其他进程发出信号，它们可以将内存映射到自己的地址空间；之后的记忆永远不会改变。

我们采用的方法是使用*POD*结构 (*)（其中一些包括`char xxx[N];`用于字符串存储的属性）。如果你真的可以限制你的弦，你就是金子。就目前`map`而言：只读存储效率低下=>排序数组表现更好（为内存局部性欢呼）。所以我建议这样做：

```
struct Key {
    enum { Size = 318 };
    char value[Size];
};

struct Value {
    enum { Size = 412 };
    enum K { Int, Long, String };
    K kind;
    union { int i; long l; char string[Size]; } value;
}; 
```

然后只需有一个`std::pair<Key, Value>`您排序的数组 ( `std::sort`) 并在其上`std::lower_bound`用于搜索。您需要为键编写一个比较运算符，显然：

```
bool operator<(Key const& left, Key const& right) {
    return memcmp(left.value, right.value, Key::Size) < 0;
} 
```

而且我同意 enum + union 技巧比 boost 变体更不吸引人（界面方面）……让界面变得更好取决于你。

(*) 实际上，不需要纯 POD。例如，拥有私有属性、构造函数和复制构造函数是完全可以的。所需要的只是避免间接（指针）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:07:10.480

简单的解决方法。从 Boost 1.51 创建您自己的“libNotBoost v1.0”。Boost 库允许这样做。因为它不再是 Boost，所以你很好。

# amazon-web-services - Amazon CloudFront + Adob e FMS Stack 最大并发用户数

> ID：12613061
> 
> 赞同：3
> 
> 时间：2012-09-27T02:04:16.523
> 
> 标签：amazon-web-services, amazon-cloudfront, flash-media-server

我一直在 EC2 上使用 Wowza，现在尝试在 AWS 中通过 CloudFront Distribution 使用 FMS Stack。

到目前为止，我设法使用 m1.large FMS Stack + CloudFront Distribution 设置了直播。

问题：1）M1.Large FMS 有 1000 个并发 RTMFP 用户的限制，但是由于我使用的是 AWS Cloudfront，我的 FMS 堆栈可以为超过 1000 个并发用户提供服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T08:13:56.230

是的，在使用 CloudFront 的 HTTP Live Streaming 设置中，您应该期望源上的并发用户数量接近该数量或[CloudFront 边缘站点](http://aws.amazon.com/about-aws/globalinfrastructure)（根据今天大约 40 个）。

这个数字不应该随着观看直播的实际用户而增长，因为内容被缓存在边缘位置以供进一步访问。

# sql - 在 sqlite 中选择唯一记录

> ID：12613062
> 
> 赞同：1
> 
> 时间：2012-09-27T02:04:33.290
> 
> 标签：sql, sqlite, select

考虑一张桌子

结果 (id, key, value) 其中 key 是主键。

样本数据：

```
id | key      | value
-----------------------
abc| source-1 | 20
abc| source-2 | 30
abc| source-3 | 2 
abc| source-4 | 10
def| source-5 | 1 
ghi| source-6 | 25
jkl| source-5 | 13 
```

我只想返回给定 id 具有单个条目的那些记录。所以输出应该是

```
id | key      | value
------------------------
def| source-5 | 1
ghi| source-6 | 25
jkl| source-5 | 13 
```

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:17:10.140

一种方法是使用 GROUP BY 和 HAVING 生成具有所需`id`s 的派生表，然后加入它：

```
select results.*
from results
join (
    select id
    from results
    group by id
    having count(*) = 1
) as dt on results.id = dt.id 
```

如果您不喜欢派生表，也可以使用 IN：

```
select *
from results
where id in (
    select id
    from results
    group by id
    having count(*) = 1
) 
```

# playframework-2.0 - 为 Play 2.1/sbt 切换“实验性”

> ID：12613066
> 
> 赞同：2
> 
> 时间：2012-09-27T02:05:14.517
> 
> 标签：playframework-2.0, sbt, playframework-2.1

我需要为我的 Play 2.1-snapshot 使用 Akka 2.1（因为 2.1 已转换为 scala.concurrent.Future 而不是 Akka 的旧 Future，所以我认为我需要使用 Akka 2.1 中的 akka.pattern.Patterns.ask反而）。但是，Play 2.1-snapshot 默认配置为使用 2.0.2：

```
+-------------------------------------------------------------------+---------------------------------------------------------+---------------------------------------------+
| com.typesafe.akka:akka-actor:2.0.2                                | com.github.scala-incubator.io:scala-io-core_2.9.2:0.4.1 | As akka-actor-2.0.2.jar                     |
|                                                                   | com.typesafe.akka:akka-slf4j:2.0.2                      |                                             |
|                                                                   | play:play_2.9.2:2.1-SNAPSHOT                            |                                             |
|                                                                   | play:akka-sip14-adapters_2.9.2:2.1-SNAPSHOT             |                                             |
+-------------------------------------------------------------------+---------------------------------------------------------+---------------------------------------------+ 
```

在 Play/project/Build.scala

```
"com.typesafe.akka"                 %    (if(experimental) "akka-   actor_2.10.0-M7" else "akka-actor" ) % (if(experimental) "2.1-M2" else "2.0.2"),
"com.typesafe.akka"                 %    (if(experimental) "akka-   slf4j_2.10.0-M7" else "akka-slf4j" ) % (if(experimental) "2.1-M2" else "2.0.2"), 
```

如何为 Play 2.1 开启实验性功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:30:11.333

您必须自己构建一个 Play 快照，并`experimental`在启动 sbt 时使用设置为 true 的系统属性：

```
-Dexperimental=true 
```

我在[这里](https://github.com/playframework/Play20/blob/master/framework/project/Build.scala#L238)找到了信息。

# ruby-on-rails - 创建一个可以让我在 Ruby 中更改用户的帖子内容的方法

> ID：12613070
> 
> 赞同：1
> 
> 时间：2012-09-27T02:05:33.537
> 
> 标签：ruby-on-rails, ruby, methods, helpers

所以我创建了一个网站，人们可以在该网站上发布链接。根据链接的内容，帖子的呈现方式会有所不同。例如，带有指向 youtube.com/somevideo 链接的帖子将呈现嵌入视频。以 JPG 结尾的链接将显示该图像。

在我看来，我写了以下内容

```
 <% link_type = extract_content_from_url(post.link)  %>
    <div class ="preview_of_post">

        <% if post.link %>
            <% if link_type == "youtube" %>
                <%= youtube_embed(post.link) %>
            <% end %>
            <br />
            <%= link_to (post.link), (post.link) %>
        <% end %> 
```

在我的助手中，我有这个：

```
module PostsHelper
  def extract_content_from_url(url) 
    if url != ""
      unless url.include?("http://")
        post.link = "http://#{post.link.downcase}"
      end
    else
      return "nil"
    end

    if url.include? == "youtube.com/watch" #youtube link
      return "youtube"
    end

    if File.extname(url) == ".gif" || File.extname(url) == ".jpg" || 
       File.extname(url) == ".png" || File.extname(url) == ".jpeg"
       return"picture"
    end
  end

  def youtube_embed(youtube_url)
    if youtube_url[/youtu\.be\/([^\?]*)/]
      youtube_id = $1
    else
      youtube_url[/^.*((v\/)|(embed\/)|(watch\?))\??v?=?([^\&\?]*).*/]
      youtube_id = $5
    end
    render(:inline=> "<iframe title='YouTube video player' width='640' height='390' src='http://www.youtube.com/embed/#{ youtube_id }' frameborder='0' allowfullscreen></iframe>")
  end
end 
```

运行我的代码时，出现以下错误：

![在此处输入图像描述](../Images/eb65baeff8e1221f2363b7ddf62b549b.png)

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:08:56.163

`url.include? == "youtube.com/watch"`无效。`include?`是一个接受参数的方法。你可能的意思是`url.include? "youtube.com/watch"`。

# javascript - 使用 jQuery 删除表数据

> ID：12613071
> 
> 赞同：0
> 
> 时间：2012-09-27T02:05:41.693
> 
> 标签：javascript, jquery, html

我有这个代码：

```
$(document).ready(function() {

 $(".quantity").keydown(function(event) {
    // Allow: backspace, delete, tab, escape, and enter
    if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
         // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) || 
         // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {
             // let it happen, don't do anything
             return;
    }
    else {
        // Ensure that it is a number and stop the keypress
        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
            event.preventDefault(); 
        }   
    }
});

$counter = 1;
$('#buttonadd').click(function() {
    $counter++;
    $('#invoiceitems > tbody:last').append('<tr><td><input type="button" class="deleteitem" value="Delete"/></td><td><input type="text" name="item[' + $counter + '][desc]" class="regular-text" value="" /></td><td><input type="text" name="item[' + $counter + '][price]" class="price" value="0.00" /></td><td><input type="text" name="item[' + $counter + '][quantity]" class="quantity" value="0" /></td><td><label class="subtotal"></label></td></tr>');
 $('.quantity , .price').unbind().on('change', function() {
    UpdateTotals(this);
});

// Use the .autocomplete() method to compile the list based on input from user
 $(".regular-text").autocomplete("client/inc/get_item_list.php", {
    width: 260,
    matchContains: true,
    mustMatch: true,
    minChars: 2,
    //multiple: true,
    //highlight: false,
    //multipleSeparator: ",",
    selectFirst: true
});

$(".regular-text").result(function(event, data, formatted) {
    $(".itemcode").val(data[1]);
    $(".price").val(data[2]);
        // Give focus to the next input field to recieve input from user
        $("input[class='quantity']").focus();
});

});

 // Use the .autocomplete() method to compile the list based on input from user
$(".regular-text").autocomplete("client/inc/get_item_list.php", {
     width: 260,
     matchContains: true,
     mustMatch: true,
     minChars: 2,
     //multiple: true,
     //highlight: false,
     //multipleSeparator: ",",
     selectFirst: true
 });

 $(".regular-text").result(function(event, data, formatted) {
    $(".itemcode").val(data[1]);
    $(".price").val(data[2]);
        // Give focus to the next input field to recieve input from user
        $("input[class='quantity']").focus();
});

});

$('#deleteitem').click(function() {
//Missing Function.

});

$(function() {
CalculateSubTotals();
CalculateTotal();
// Adding the change events for the Price and
// quantity fields only..
// Changing the total should not affect anything
$('.quantity , .price').on('change', function() {
    UpdateTotals(this);
});
});

function UpdateTotals(elem) {
// This will give the tr of the Element Which was changed
var $container = $(elem).parent().parent();
var quantity = $container.find('.quantity').val();
var price = $container.find('.price').val();
var subtotal = parseInt(quantity) * parseFloat(price);
$container.find('.subtotal').text(subtotal.toFixed(2));
CalculateTotal();
}

function CalculateSubTotals() {
// Calculate the Subtotals when page loads for the 
// first time
var lineTotals = $('.subtotal');
var quantity = $('.quantity');
var price= $('.price');
$.each(lineTotals, function(i){
    var tot = parseInt($(quantity[i]).val()) * parseFloat($(price[i]).val());
    $(lineTotals[i]).text(tot.toFixed(2));
});
}

function CalculateTotal() {
// This will Itearate thru the subtotals and
// claculate the grandTotal and Quantity here
var lineTotals = $('.subtotal');
var quantityTotal = $('.quantity');
var grandTotal = 0.0;
var totalQuantity = 0;
$.each(lineTotals, function(i) {
    grandTotal += parseFloat($(lineTotals[i]).text());
    totalQuantity += parseInt($(quantityTotal[i]).val())
});

$('.totalquantity').text(totalQuantity);
$('.grandtotal').text(parseFloat(grandTotal).toFixed(2));
}; 
```

HTML：

```
<table border="0" id="invoiceitems">
                <thead>
                    <tr>
                    <td></td>
                    <td><strong>Description</strong></td>
                    <td><strong>Unit Cost</strong></td>
                    <td><strong>Quantity</strong></td>
                    <td><strong>Total</strong></td>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><strong>Total:</strong></td>
                    <td><label class="grandtotal"></label></td>
                    </tr>
                </tfoot>
                <tbody>
                <tr>
<td><input type="button" class="deleteitem"  value="Delete"/></td>
<td><input type="text" name="item['. 1 .'][desc]" class="regular-text" value="" /></td>
<td><input type="text" name="item['. 1 .'][price]" class="price" value="0.00" /></td>
<td><input type="text" name="item['. 1 .'][quantity]" class="quantity" value="0" /></td>
<td><label class="subtotal"></label></td>
</tr>
                </tbody>
                </table>
                <p><input type="button" id="buttonadd" value="Add Line"/></p> 
```

我希望能够单击删除按钮并删除该行。如您所见，我缺少一个功能。那里有很多，因为其中很多用于自动完成和添加功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:11:38.170

你的意思是

```
$('#deleteitem').click(function() {
    $(this).closest('tr').remove();
}); 
```

如果您要动态添加行，则可以使用 live 而不是 bind

```
$('#myTable .delete').live('click', function() {
    $(this).closest('tr').remove();
}); 
```

**编辑**

好久没用jQuery了，不过最新版本的live已经被贬低了。写这个的新方法（正如 bfavaretto 已经指出的那样）是

```
$('#myTable').on('click', '.delete', function() {
    $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:11:57.950

您可以使用`this` `.parents()`和的组合`.first()`来隔离行。然后您可以使用`.remove()`它从 DOM 中删除它。

```
$(document).ready(function() {
    $('.deleteitem').click(function() {
        var row = $(this).parents('tr').first();
        row.remove();
    });
}); 
```

要处理动态创建的行：

```
$(document).ready(function() {
    $('#invoiceitems').on('click', '.deleteitem', (function() {
        var row = $(this).parents('tr').first();
        row.remove();
    });
}); 
```

# java - 'com.mycompany.client.gin.ClientGinjector' 的延迟绑定失败

> ID：12613072
> 
> 赞同：1
> 
> 时间：2012-09-27T02:05:48.910
> 
> 标签：java, gwt, guice, gwt-platform, gwt-gin

我真的很难修复下面的错误，因为我已经正确添加了 jars 和文件`<inherits ...>`中的`gwt.xml`

0

```
5:27:22.011 [ERROR] [myapp] Failed to create an instance of 'com.mycompany.client.MainAppEntryPoint' via deferred binding

java.lang.RuntimeException: Deferred binding failed for 'com.mycompany.client.gin.ClientGinjector' (did you forget to inherit a required module?)
    at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)
    at com.google.gwt.core.client.GWT.create(GWT.java:97)
    at com.mycompany.client.MainAppEntryPoint.&lt;init&gt;(MainAppEntryPoint.java:10)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:375)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.VerifyError: (class: com/gwtplatform/mvp/client/PresenterWidget, method: fireEvent signature: (Lcom/google/gwt/event/shared/GwtEvent;)V) Incompatible argument to function
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getDeclaredConstructors(Class.java:1853)
    at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:243)
    at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:96)
    at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:628)
    at com.google.inject.internal.BindingProcessor$1.visit(BindingProcessor.java:169)
    at com.google.inject.internal.BindingProcessor$1.visit(BindingProcessor.java:89)
    at com.google.inject.internal.UntargettedBindingImpl.acceptTargetVisitor(UntargettedBindingImpl.java:42)
    at com.google.inject.internal.BindingProcessor.visit(BindingProcessor.java:89)
    at com.google.inject.internal.BindingProcessor.visit(BindingProcessor.java:52)
    at com.google.inject.internal.BindingImpl.acceptVisitor(BindingImpl.java:93)
    at com.google.inject.internal.AbstractProcessor.process(AbstractProcessor.java:55)
    at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:172)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103)
    at com.google.inject.Guice.createInjector(Guice.java:95)
    at com.google.gwt.inject.rebind.BindingsProcessor.validateModulesUsingGuice(BindingsProcessor.java:437)
    at com.google.gwt.inject.rebind.BindingsProcessor.process(BindingsProcessor.java:241)
    at com.google.gwt.inject.rebind.GinjectorGeneratorImpl.generate(GinjectorGeneratorImpl.java:76)
    at com.google.gwt.inject.rebind.GinjectorGenerator.generate(GinjectorGenerator.java:47)
    at com.google.gwt.core.ext.GeneratorExtWrapper.generate(GeneratorExtWrapper.java:48)
    at com.google.gwt.core.ext.GeneratorExtWrapper.generateIncrementally(GeneratorExtWrapper.java:60)
    at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:647)
    at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
    at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:78)
    at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:268)
    at com.google.gwt.dev.shell.ShellModuleSpaceHost.rebind(ShellModuleSpaceHost.java:141)
    at com.google.gwt.dev.shell.ModuleSpace.rebind(ModuleSpace.java:585)
    at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:455)
    at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
    at com.google.gwt.core.client.GWT.create(GWT.java:97)
    at com.mycompany.client.MainAppEntryPoint.&lt;init&gt;(MainAppEntryPoint.java:10)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:375)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:722) 
```

这是我的应用程序主入口点类：

```
public class MainAppEntryPoint implements EntryPoint {

    private final ClientGinjector ginjector = GWT.create(ClientGinjector.class);

    @Override
    public void onModuleLoad() {

        // Inject global styles
        GWT.<Resources>create(Resources.class).style().ensureInjected();

        // This is required for Gwt-Platform proxy's generator
        DelayedBindRegistry.bind(ginjector); // Line 10, reference from the stack trace above

        ginjector.getPlaceManager().revealCurrentPlace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T02:49:53.150

这是通过使用 Eclipse 进行项目清理来解决的

# c# - WCF 运行时行为属性

> ID：12613073
> 
> 赞同：0
> 
> 时间：2012-09-27T02:05:57.170
> 
> 标签：c#, wcf, netmsmqbinding

我想知道是否有办法执行以下操作：

主要的 WCF 服务位于一个类库中，该类库被调用/绑定到 MSMQ。有一个单独的控制台应用程序来托管服务。

2个不同的项目。当然，控制台应用程序引用了处理消息的类库。

我想要自定义处理毒消息。没问题，我可以创建一个属性并将其装饰在服务本身之上，然后拥有一个实现 IErrorHandler 并移动消息的自定义类。这都在类库中

问题：为了让服​​务继续处理消息，必须重新启动服务主机。

但这是不可能的，因为类库没有（也不应该！）引用托管服务的控制台应用程序。

重新启动客户端的最佳方法是什么？我在想也许有一种方法可以在运行时附加属性和错误处理程序，它们将被移动到控制台应用程序项目，然后在创建服务时以某种方式在运行时附加属性？还是我得意忘形了？

# pointers - Fortran中如何获取数组指针的地址？

> ID：12613077
> 
> 赞同：0
> 
> 时间：2012-09-27T02:06:21.890
> 
> 标签：pointers, fortran

我想获取数组指针的地址。原型代码如下：

```
program main

    implicit none

    type foo
        integer, allocatable :: i(:)
        integer j
    end type

    type(foo) a
    integer, pointer :: ai(:)

    ai => a%i

    print *, "The address of a is ", loc(a)
    print *, "The address of a%i is", loc(ai) ! <--- I expect the same address as a.

end program main 
```

我的**最终目标**是通过数组指针的地址获取`a`with的地址，因为它是 type(foo) 的第一部分。`type(foo)``ai``i`

提前致谢！

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:33:49.313

Fortran 不保证用户定义的第一项与该用户定义类型的地址相同。也许项目之前有一个标题。也许有一些填充。也许编译器以不同的顺序存储项目。也许不同的编译器做的不同。这些都没有指定。所以你的期望可能不会发生。Fortran 中几乎不需要地址。你想做什么？如果您正在与 C 接口，则 ISO_C_Binding 提供 C_LOC。

编辑以回应评论。如果您的目标是通过省略前导“a %”来简化变量名称，则可以使用指针创建访问相同存储的替代变量。您不必尝试通过指针来超越语言。例子：

```
program main

    implicit none

    type foo
        integer, pointer :: i(:)
        integer j
    end type

    type(foo) a
    integer, pointer :: ai(:)

    allocate ( a%i (5) )
    a%i = [ 2, 5, 1, 3, 9 ]
    ai => a%i

    write (*, '( "a%i=", 5(2X,I2) )' ) a%i
    write (*, '( "ai=", 5(2X,I2) )' ) ai

end program main 
```

输出是：

```
a%i=   2   5   1   3   9
ai=   2   5   1   3   9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:40:41.437

你不能，反正不使用标准的 Fortran。

请注意，您的期望是错误的。

`loc`是一个扩展。它的作用是特定于处理器的，但通常它会为您提供参数所代表的**数据对象**地址的整数表示。（F2003 标准的 C_LOC 大致相当。）。在这种情况下，数据对象是一个可分配的数组。在我知道的所有处理器中，该数组的存储不在托管可分配组件的派生类型对象的存储中。派生类型对象只包含一个描述数组存储位置（以及它有多大等）的描述符，而不是数组本身的存储。

# mysql - 自定义 MYSQL 自定义排序顺序

> ID：12613078
> 
> 赞同：1
> 
> 时间：2012-09-27T02:06:23.467
> 
> 标签：mysql, sql, sql-order-by

我有一个简单的媒体库，可以根据代码示例中的日期对专辑进行排序。在专辑中，我有一张用于删除媒体的“垃圾”专辑。如何保留 ORDER BY albums.date DESC 但始终将“垃圾”专辑设置为最后一个？专辑在“标题”列中，总是被称为“垃圾”。

谢谢你的帮助...

```
$query = mysql_query("SELECT albums.*,photos.path FROM albums LEFT JOIN photos ON albums.albumCover=photos.id WHERE albums.user='$siteUserID' ORDER BY albums.date DESC"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:09:53.720

您可以利用`CASE`on`ORDER BY`子句

```
SELECT...
FROM...
WHERE..
ORDER BY   (CASE 
               WHEN albums.title = 'TRASH'
               THEN 1
               ELSE 0
           END ) ASC, albums.date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:10:11.063

您将需要使用为值`ORDER BY CASE`分配更高数字的an `Trash`，因此它们的排序比其他值晚。值不是`Trash`零，而是`Trash`1。零首先排序！

```
SELECT
  albums.*,
  photos.path
FROM 
  albums
  LEFT JOIN photos ON albums.albumCover=photos.id 
WHERE albums.user='$siteUserID' 
ORDER BY
  CASE WHEN albums.title = 'Trash' THEN 1 ELSE 0 END,
  /* Then suborder the zeros and ones by date */
  albums.date DESC 
```

# javascript - Fancybox 中没有显示图像

> ID：12613080
> 
> 赞同：1
> 
> 时间：2012-09-27T02:06:26.870
> 
> 标签：javascript, jquery, wordpress, fancybox, fancybox-2

我无法让 fancybox 在我正在构建的网站上显示其相应的图像 [http://www.nomadicdrift.com/test/kaniwa#events](http://www.nomadicdrift.com/test/kaniwa#events)。这是我在 WordPress 平台上设置的自定义单页作品集主题。

如果您点击事件部分的链接，您将在类似位置的画廊中看到 1 个图形项目。我将此图像设置为fancybox 画廊，但是当您单击它时，它会打开fancybox 界面，但不会在框架中放置图像，即使它应该放置。所以这就是问题所在......图像没有出现在fancybox中，而我只看到了框架。

这是我正在显示的 html：

```
<figure>
<a class="fancybox" data-fancybox-type="Fashion Show de Paris, France" href="http://www.nomadicdrift.com/test/kaniwa/wp-content/uploads/2012/07/NM2.jpg">
<img class="attachment-evento wp-post-image" width="231" height="191" title="NM" alt="NM" src="http://www.nomadicdrift.com/test/kaniwa/wp-content/uploads/2012/07/NM2-231x191.jpg">
</a>
<figcaption>
<a class="fancybox" data-fancybox-type="Fashion Show de Paris, France" href="http://www.nomadicdrift.com/test/kaniwa/wp-content/uploads/2012/07/CEDESAN.jpg">   </a>
<h4>Fashion Show de Paris, France</h4>
</figcaption>
</figure> 
```

我不会用我用来获取该输出的 PHP 让您感到厌烦，因为我认为问题出在其他地方。

***我也尝试在网站上建立一个简单的标准fancybox画廊，但它给了我同样的问题，让我相信问题比html标记更深。我还成功地将相同的标记用于另一个站点上的一个缩略图 fancybox 画廊。

我想这可能是由于我正在使用的 .js 文件中的一些冲突。我尝试一一卸载我所有的插件/插件（不是太多），但仍然有相同的结果。我在 functions.js 文件中有我所有的个人 javascript，这是我使用标准 .js 调用 fancybox 插件的地方`$("a.fancybox").fancybox();`。

我以前在其他网站上安装过这个插件，并广泛搜索了答案，所以非常感谢任何帮助。

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:39:52.023

你能试一下吗

```
<figure>
   <a class="fancybox" data-fancybox-type="Fashion Show de Paris, France" href="http://www.nomadicdrift.com/test/kaniwa/wp-content/uploads/2012/07/NM2.jpg">
      <img class="attachment-evento wp-post-image" width="231" height="191" title="NM" alt="NM" src="http://www.nomadicdrift.com/test/kaniwa/wp-content/uploads/2012/07/NM2-231x191.jpg">
   </a>
   <figcaption>
      <h4>Fashion Show de Paris, France</h4>
   </figcaption>
</figure> 
```

应该只留下一个`<a class="fancybox"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:43:35.127

删除孤儿：

```
<a class="fancybox" data-fancybox-type="Fashion Show de Paris, France" href="http://www.nomadicdrift.com/test/kaniwa/wp-content/uploads/2012/07/CEDESAN.jpg">   </a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:26:17.237

好吧，您的代码对于花式框来说似乎在语义上是正确的，但事实并非如此。您遇到的问题是fancybox 使用该`data-fancybox-type`属性来确定`type`它应该打开哪些内容（在您的情况下是一个图片库）但是“*法国巴黎时装秀*”对fancybox 没有说什么，所以`type`内容是未知的或未定义，因此是空框。

该属性的有效选项应该是`image`、`iframe`、`ajax`或。`html``inline`

也许您打算使用`data-fancybox-group="gallery_name_here"`. 检查[https://stackoverflow.com/a/9037826/1055987](https://stackoverflow.com/a/9037826/1055987)了解更多信息。

您可以尝试删除该`data-fancybox-type`属性（为 fancybox 保留）-或-将其重命名为

```
data-description="Fashion Show de Paris, France" 
```

...供您自己使用，因此不会与fancybox冲突。

顺便说一句，您遇到的另一个问题是`z-index`您的标头 ( `#header`) 高于 (9998) 比 fancybox `z-index`（默认情况下约为 8010），所以我建议您降低`z-index`您的`#header`，否则将放置 fancybox 关闭按钮它的背后。

Saludos a la tierra del buen 咖啡馆。

# foursquare - Foursquare API：beforeTimestamp 排序是否颠倒？

> ID：12613081
> 
> 赞同：0
> 
> 时间：2012-09-27T02:06:36.713
> 
> 标签：foursquare

我在以下端点请求用户签到：[https ://api.foursquare.com/v2/users/self/checkins](https://api.foursquare.com/v2/users/self/checkins)

返回的项目按“createdAt”日期降序排列（最近签到优先）。但是，当我通过添加“beforeTimestamp”查询字符串参数来过滤结果时，顺序是相反的。

一个例子：

[https://api.foursquare.com/v2/users/self/checkins?beforeTimestamp=1348711278&limit=1](https://api.foursquare.com/v2/users/self/checkins?beforeTimestamp=1348711278&limit=1)

预期结果：在给定时间戳之前创建的最新签到

实际结果：有史以来第一次签到

这种行为是设计使然吗？如果是这样，有没有办法指定顺序/方向？

谢谢。

（我省略了`oauth_token`和`v`查询字符串参数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:53:59.507

您现在可以在 users/checkins 中指定签入的排序顺序。使用参数“sort”，其值为“newestfirst”或“oldestfirst”。

# string - 使用奥格登引理与常规抽引引理进行上下文无关语法

> ID：12613082
> 
> 赞同：7
> 
> 时间：2012-09-27T02:06:40.677
> 
> 标签：string, math, context-free-grammar, proof, pumping-lemma

我正在学习问题中词条之间的区别。我能找到的每个参考都使用了这个例子：

```
{(a^i)(b^j)(c^k)(d^l) : i = 0 or j = k = l} 
```

以显示两者之间的区别。我可以找到一个使用常规引理来“反驳”它的例子。

选择 w = uvxyz, st |vy| > 0, |vxy| <= 页。假设 w 包含相等数量的 b、c、d。

我选择了：

```
u,v,x = ε
y = (the string of a's)
z = (the rest of the string w) 
```

抽 y 只会增加 a 的数量，如果 |b|=|c|=|d| 起初，它现在仍然会。

（如果 w 没有 a 的类似论点。然后随便抽你想要的。）

我的问题是，奥格登引理如何改变这种策略？“标记”有什么作用？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-15T01:37:10.390

这里一个重要的绊脚石是“能够抽水”并不意味着无上下文，而“不能抽水”表明它不是无上下文的。*同样，[灰色**并不**意味着你是一头大象，但作为一头大象**确实**意味着你是灰色的......](http://en.wikipedia.org/wiki/Transposition_%28logic%29)*

```
Grammar context free        => Pumping Lemma is definitely satisfied  
Grammar not context free    => Pumping Lemma *may* be satisfied
Pumping Lemma satisfied     => Grammar *may* be context free
Pumping Lemma not satisfied => Grammar definitely not context free
# (we can write exactly the same for Ogden's Lemma)
# Here "=>" should be read as implies 
```

也就是说，为了证明一种语言**不是**上下文无关的，我们必须证明它**不能**（！）满足这些引理之一。*（即使它满足两者，我们也没有证明它是上下文无关的。）*

`L = { a^i b^j c^k d^l where i = 0 or j = k = l}`下面是一个非上下文无关的草图证明*（尽管它满足抽水引理，但不满足奥格登引理）*：

### [为上下文无关语法抽取引理：](http://en.wikipedia.org/wiki/Pumping_lemma_for_context-free_languages)

> 如果一种语言`L`是上下文无关的，那么存在一些整数`p ≥ 1`，使得with`s`中的任何字符串（其中是泵送长度）都可以写成 带有 substrings ，这样： 1\. 、 2.和 3.是每个自然的号。`L``|s| ≥ p``p``s = uvxyz`
> `u, v, x, y and z`
> `|vxy| ≤ p`
> `|vy| ≥ 1`
> `u v^n x y^n z``L``n`

### 在我们的示例中：

对于任何`s`in `L`(with `|s|>=p)`:

*   如果`s`包含`a`s 则选择`v=a, x=epsilon, y=epsilon` *（我们与上下文无关的语言**没有矛盾***） 。
*   如果`s`不包含`a`s（`w=b^j c^k d^l`和其中之一`j`，`k`或`l`非零，因为`|s|>=1`）然后选择`v=b`（如果`j>0`，`v=c`elif `k>0`，else `v=c`），，`x=epsilon`（`y=epsilon` *我们与上下文无关的语言**没有矛盾***） 。

*（所以不幸的是：**使用抽水引理我们无法证明任何事情`L`！**
注意：以上基本上是您在问题中给出的论点。）*

### [奥格登引理：](http://en.wikipedia.org/wiki/Ogden%27s_lemma)

> 如果一种语言`L`是上下文无关的，那么存在一些数字`p > 0`（其中`p`可能是也可能不是抽水长度），使得对于任何`w`长度的字符串，至少`p`在`L`“标记”`p`或更多位置中的所有方式中`w`，`w`可以是`w = uxyzv`
> 用字符串写成 `u, x, y, z,`这样`v`：
> 1.`xz`至少有一个标记位置，
> 2.`xyz`最多`p`有标记位置，
> 3.`u x^n y z^n v`在`L`每个`n ≥ 0`.

*注意：这个标记是奥格登引理的关键部分，它说：“不仅可以“泵送”每个元素，而且可以使用任何`p`标记的位置进行泵送”。*

### 在我们的示例中：

令`w = a b^p c^p d^p`并标记`b`s 的位置（其中有`p`，因此`w`满足奥格登引理的要求），令`u,x,y,z,v`是满足奥格登引理条件的分解 ( `z=uxyzv`)。

*   如果`x`or`z`包含多个符号，`u x^2 y z^2 w`则不在 中`L`，因为会有符号顺序错误（考虑`(bc)^2 = bcbc`）。
*   要么 要么`x`必须`z`包含`b`（根据引理条件 1。）

这给我们留下了五个需要检查的情况（对于`i,j>0`）：

*   `x=epsilon, z=b^i`
*   `x=a, z=b^i`
*   `x=b^i, z=c^j`
*   `x=b^i, z=d^j`
*   `x=b^i, z=epsilon`

在每种情况下（通过比较`b`s、`c`s 和`d`s 的数量）我们可以看到它`u x^2 v y^2 z`不在`L` *（并且我们与上下文无关的语言存在**矛盾**（！），也就是说，**我们已经证明了`L`不是上下文免费**）*。

.

总而言之，`L`它不是上下文无关的，但这**不能使用 The Pumping Lemma 来证明**（但*可以*通过 Ogden 的引理），因此[我们可以说](http://en.wikipedia.org/wiki/Pumping_lemma)：

> Ogden 引理是上下文无关语言的第二个**更强大的引理。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:51:19.830

我不太确定如何在这里使用奥格登引理，但你的“证明”是错误的。当使用泵引理来证明一种语言不是上下文无关的时，您不能选择拆分为 uvxyz。拆分是“为您”选择的，您必须证明任何 uvxyz 都不满足引理。

# asp.net - ASP.NET MVC 4 C# - 获取分段元素或完整 URL 以进行解析

> ID：12613089
> 
> 赞同：2
> 
> 时间：2012-09-27T02:07:47.137
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

作为 MVC 4 的新手（或者实际上是任何用于 ASP.NET 的 MVC），我不禁觉得 URL 助手比我所看到的更多。

基本上，我已经阅读了有关使用 URL 中的查询字符串填充控制器方法中的属性的教程。我虽然不喜欢查询字符串，但更喜欢像样式一样的分段“文件夹”。

无需多言，这是示例 URL：

[http://something.com/DataTypes/Search/searchString](http://something.com/DataTypes/Search/searchString)

这种方法实际上非常安全，因为只会有单字搜索

我在 DataTypes 控制器中尝试过

```
 [HttpGet]
    public ActionResult Search(String q)
    {
        ViewBag.ProvidedQuery = q;
        return View();
    } 
```

还有一些其他的小变化，现在我只是想让字符串出现在视图中，但我似乎没有得到任何东西。

无论如何将url中的第三个字符串注入属性？如果不是，我应该使用哪个 URL 帮助程序类来获取 URL 中的字符串数据？即使我必须手动解析整个 URL，我只需要获取 URL 中的第三个元素作为字符串

非常n00b问题我确定，但要么我没有在某处找到这个简单的指南，要么我没有正确搜索谷歌......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:21:35.593

您缺少的是默认路由参数名称是“id”。所以你想这样做：

```
[HttpGet]
public ActionResult Search(String id)
{
    ViewBag.ProvidedQuery = id;
    return View();
} 
```

如果你不想使用变量名 id，那么你可以修改你的 Route 看起来像这样：

```
routes.MapRoute(
    name: "Search",
    url: "DataTypes/Search/{searchString}",
    defaults: new { controller = "DataTypes", action = "Search", 
         searchString = UrlParameter.Optional }); 
```

如果您不希望字符串是可选的，则可以从默认对象中删除最后一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:14:50.063

您可以使用 RouteTable.Routes.GetRouteData(new HttpContextWrapper(httpContext)) 来获取路由数据

[RouteValueDictionary 的字符串 URL](https://stackoverflow.com/questions/1481565/string-url-to-routevaluedictionary)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T02:16:58.050

您需要查看 Global.asax.cs 中的路由。例如，对于您的情况，您可以像这样向路由集合添加路由：

```
 routes.MapRoute("Search",
            "DataTypes/Search/{q}",
            new { controller = "DataTypes", action = "Search" }
        ); 
```

然后 q 参数将自动映射到您的操作。默认控制器映射可能会将其映射到“id”。

# sql - Postgres 多行文本搜索

> ID：12613092
> 
> 赞同：1
> 
> 时间：2012-09-27T02:08:23.690
> 
> 标签：sql, postgresql

我有一个名为“排除”的表，其中包含主题标签：

```
-------------
id | tag
-------------
1    #oxford
2    #uk
3    #england
------------- 
```

我有另一个名为“post”的表：

```
-----------------------------------------------
id | tags               | text
1    #oxford #funtimes    Sitting in the sun
2    #oz                  Beach fun
3    #england             Milk was a bad choice
----------------------------------------------- 
```

为了对帖子标签进行文本搜索，我一直在运行如下查询：

```
SELECT * FROM post WHERE to_tsvector(tags) @@ plainto_tsquery('mysearchterm') 
```

但是，我现在希望能够排除部分或全部标签在我的排除表中的所有帖子。在 SQL/Postgres 中是否有任何简单的方法可以做到这一点？

我尝试将标签行转换为一列，并在 plainto_tsquery 函数中使用该术语，但它不起作用（我不知道如何进行文本搜索“不等于”，因此逻辑实际上是错误的，尽管在我看来是正确的）：

```
select * from post where to_tsvector(tags) @@ plainto_tsquery(
   select array_to_string(array(select RTRIM(value) from exclude where key = 'tag'), ' ')
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:07:16.713

您使用的是哪个版本的 PostgreSQL？您的架构设计有多灵活？换句话说，你可以随意改变它吗？或者这是你无法控制的？

当我读到你的问题时，我立刻想到了两件事。一是您应该能够使用数组和@>（包含）或<@（包含由）运算符。

这是[文档](http://www.postgresql.org/docs/9.1/static/functions-array.html)

其次，您也许可以利用 hstore 并执行类似的操作。至：

```
hstore @> hstore 
```

它不是真正的 hstore，因为您没有使用真正的 key=>value 对。但是，我猜你可以做 {tagname}=True 或 {tagname}=NULL。可能有点hackish。

[您可以在此处](http://www.postgresql.org/docs/9.1/static/hstore.html)查看文档（适用于 PostgreSQL 9.1）hstore 以及如何使用它

# iphone - 如何在 UIImagepickerController 中使用 panaroma 模式

> ID：12613095
> 
> 赞同：1
> 
> 时间：2012-09-27T02:08:50.790
> 
> 标签：iphone, ios, uikit

ios6的内置panaroma模式是否可以与uiimagepickercontroller一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:35:56.183

它不在官方文档中，所以还不可能。

# javascript - jquery .show() 和后退按钮

> ID：12613096
> 
> 赞同：2
> 
> 时间：2012-09-27T02:08:52.033
> 
> 标签：javascript, jquery

我试图弄清楚当用户使用后退按钮返回时如何让我的网页看起来相同。在我的示例中，单击一个复选框，然后单击它显示的 url。访问 google 或 yahoo 后，单击后退按钮并注意不再显示该 URL。该复选框仍处于选中状态，但没有 url。

```
$(document).ready(function() {
  $("#googlelink").hide();
  $("#yahoolink").hide();

  $("#google").click(function() {
    if($('#google:checked').length) {
      $("#googlelink").show();
    } else {
      $("#googlelink").hide();
    }
  });

  $("#yahoo").click(function() {
    if($('#yahoo:checked').length) {
      $("#yahoolink").show();
    } else {
      $("#yahoolink").hide();
    }
  });
});
```

```
<div class="check">
  <p>
    <input type="checkbox" value="google" id="google" />
    <label for="google">show google link</label>
  </p>
  <p>
    <input type="checkbox" value="yahoo" id="yahoo" />
    <label for="yahoo">show yahoo link</label>
  </p>
</div>

<div id="googlelink">
  <a href="http://google.com">google.com</a>
</div>
<div id="yahoolink">
  <a href="http://yahoo.com">yahoo.com</a>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:15:06.833

您可以缩小代码并在 DOMReady 上触发更改事件。

```
$(document).ready(function() {
    $("#googlelink, #yahoolink").hide();

    $("input[type=checkbox]").on('change', function() {
           var id = '#' + this.id + 'link';
           $(id).css('display', this.checked ? 'block' : 'none');
    }).change();

    //$("input[type=checkbox]").each(function() {
    //   var id = '#' + this.id + 'link';
    //   $(id).css('display', this.checked ? 'block' : 'none');
    //})
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:11:37.010

这听起来像浏览器行为。例如，Chrome 在页面之间前后导航时通常会清空所有文本字段，即使设置了表单中的某些选项也是如此。

# git - grep -v 与 git log pickaxe 等效

> ID：12613108
> 
> 赞同：4
> 
> 时间：2012-09-27T02:10:49.867
> 
> 标签：git

可能是一个简单的问题，但找不到寻找的答案。有没有办法否定与类型`git log pickaxe`等效的搜索`grep -v`

例如，我想查找没有 gerrit Change-Id 标记的所有提交

```
git log -SChange-Id <some anti regex match switch> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T16:02:24.283

```
git log --not $(git log --format="%H" -S'Change-Id <anti regex>') 
```

如果你有任何其他参数，你应该复制它们，一个在那个里面，`--not`一个在外面，否则它可能会很慢。或者，使用变量。

(`git rev-list`可能是里面的一个更整洁的选项`--not`，但它没有`-S`选项。

# mysql - MySQL空变量没有返回正确的大小写

> ID：12613109
> 
> 赞同：0
> 
> 时间：2012-09-27T02:10:50.467
> 
> 标签：mysql, null, scope, case

下面我设置了一个将使用参数循环的过程。但是，我正在测试它的一部分，但得到了不需要的输出。

当我选择 p_start 为空时，选择 v_start 输出将显示 v_start 为空。但我认为有一个 case 语句会将 v_start 重新定义为 1 ......

有什么建议么？谢谢。

```
Create procedure counter_loop( p_start int, 
                               p_end int,
                               p_step int, 
                               p_delim varchar(5))
begin
declare v_start int ;
declare v_end int ;
declare v_step int ;
declare v_sign int;

-- check p_start
case p_start
when null then
    set v_start := 1;
else
    set v_start := p_start;
end case;

 select v_start; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:18:15.800

当您调用存储过程时，您是说将 p_start 参数声明为 null 吗？或传递一个空字符串？

exec counter_loop(null,10,2,'abc') 那么我认为你的 null 案例会抓住它。

我建议您对 p_start 使用整数检查而不是 null。

就像是：

```
CASE p_start when (len(p_start) > 0 and p_start > 0)  then ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:41:30.717

语法错误...当检查 p_start 是否为空时...检查 IS NULL。

```
 case 
 when **p_start is** null then
    set v_start := 1;
 else
    set v_start := p_start;
 end case; 
```

# .net - 多平台 VisualStudio 项目

> ID：12613110
> 
> 赞同：2
> 
> 时间：2012-09-27T02:10:57.660
> 
> 标签：.net, visual-studio-2010, visual-studio, cross-platform

我想为多个平台（Windows、Xbox 360、Mono 等）创建项目，这些平台都有一些共同的代码。每次我做出想要包含在所有解决方案中的重大更改时，我都不想将其复制到每个解决方案中。我认为可能有一种方法可以设置项目的源代码路径。如果是这样，你如何做到这一点？有人可以最好地发布一个分步指南来简化这个过程吗？另外，如果这不是最好的方法，你会为多平台项目做什么？

PS：我使用的是 VStudio Express 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:53:57.970

Microsoft 的一个不成熟的解决方案是可移植类库。您可以将一些文件放在这样的库中，并在特定于平台的解决方案之间共享。

但是，Microsoft 本身并没有让它变得足够简单（如果您将源文件放入这样的项目中，您会从引用中丢失很多类）。这是痛苦的。更重要的是，MonoTouch/Mono for Android 配置文件并非来自 Microsoft 或 Xamarin。我怀疑是否有分步指南。有一种说法是微软和 Xamarin 正在合作改进它，但到目前为止我还没有看到任何官方公告。

下个月我可能会尝试的另一个解决方案（将我的一个开源项目移植到 Mono for Android）是创建两个项目文件。我可以将公共文件添加到两个项目中，然后将特定于平台的文件添加到他们想要的平台项目中。为避免 Visual Studio 中出现重复文件，您有时可能会使用“添加为链接”。

顺便说一句，请注意，您不能使用 Visual Studio Express 开发 Mono 解决方案。

# javascript - 无限滚动或大量 dom 元素的性能？

> ID：12613113
> 
> 赞同：81
> 
> 时间：2012-09-27T02:11:23.953
> 
> 标签：javascript, performance, dom

我对大量 dom elmenets 和性能有疑问。

假设我在一个页面上有 6000 个 dom 元素，并且元素的数量可以随着用户与页面交互（用户滚动以创建新的 dom 元素）（如 twitter）而增加。

为了提高页面的性能，我能想到的只有两件事。

1.  将显示设置为无以显示不可见的项目以避免回流
2.  从 dom 中删除不可见的项目，然后根据需要重新添加它们。

他们是否有任何其他方法可以改进具有大量 dom 元素的页面？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-09-27T03:33:13.733

我们不得不在[FoldingText](http://www.foldingtext.com)上处理类似的问题。随着文档变得越来越大，创建了更多的线元素和相关的跨度元素。浏览器引擎似乎卡住了，因此需要找到更好的解决方案。

以下是我们所做的，可能对您的目的有用，也可能不会：

将整个页面可视化为长文档，将浏览器视口可视化为长文档特定部分的镜头。你真的只需要展示镜头内的部分。

### 所以第一部分是计算可见视口。（这取决于您的元素的放置方式，绝对/固定/默认）

```
var top = document.scrollTop;
var width = window.innerWidth;
var height = window.innerHeight; 
```

更多资源可以找到更多基于跨浏览器的视口：

[使用 JavaScript 获取浏览器视口尺寸](https://stackoverflow.com/questions/1248081/get-the-browser-viewport-dimensions-with-javascript)

[检测浏览器窗口scrollTop的跨浏览器方法](https://stackoverflow.com/questions/871399/cross-browser-method-for-detecting-the-scrolltop-of-the-browser-window)

### 其次，你需要一个数据结构来知道哪些元素在那个区域是可见的

我们已经为文本编辑准备了一个平衡的二叉搜索树，所以我们也扩展了它来管理行高，所以这部分对我们来说相对容易。我认为您不需要复杂的数据结构来管理元素高度；一个简单的数组或对象可能会很好。只要确保您可以在其上轻松查询高度和尺寸即可。现在，您将如何获取所有元素的高度数据。一个非常简单的（但是对于大量元素来说计算成本很高！）

```
var boundingRect = element.getBoundingClientRect() 
```

我说的是纯 javascript，但如果您使用的是 jQuery `$.offset`， ， 和[此处](http://api.jquery.com/category/dimensions/)`$.position`列出的方法会很有帮助。

同样，使用数据结构仅作为缓存很重要，但如果您愿意，您可以随时进行（尽管正如我所说的那样，这些操作很昂贵）。另外，请注意更改 css 样式和调用这些方法。这些函数会强制重绘，因此您会看到性能问题。

### 最后，只需将屏幕外的元素替换为单个`<div>`元素，例如计算高度的元素

*   现在，您有了存储在数据结构中的所有元素的高度，查询位于可见视口**之前的所有元素。**

*   创建一个`<div>`具有 css 高度集（以像素为单位）的元素高度之和

*   用类名标记它，这样你就知道它是一个填充 div
*   从这个 div 覆盖的 dom 中删除所有元素
*   而是插入这个新创建的 div

对位于可见视口**之后**的元素重复此操作。

查找滚动和调整大小事件。在每次滚动时，您都需要返回数据结构，删除填充 div，创建之前从屏幕上删除的元素，并相应地添加新的填充 div。

:) 这是一个漫长而复杂的方法，但对于大型文档，它大大提高了我们的性能。

### tl;博士

我不确定我是否正确解释了它，但这种方法的要点是：

*   了解元素的垂直尺寸
*   了解滚动视口
*   用单个 div 表示所有屏幕外元素（高度等于它所覆盖的所有元素高度的总和）
*   在任何给定时间，您总共需要两个 div，一个用于可见视口上方的元素，一个用于下面的元素。
*   通过监听滚动和调整大小事件来跟踪视口。相应地重新创建 div 和可见元素

希望这可以帮助。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-27T02:28:19.247

对此没有经验，但这里有一些很棒的提示：http: [//engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)

我看了一下 Facebook，他们似乎没有在 Firefox 上做任何特别的事情。向下滚动时，页面顶部的 DOM 元素不会改变。在 Facebook 不允许您进一步滚动之前，Firefox 的内存使用量攀升至大约 500 兆。

Twitter 似乎与 Facebook 相同。

谷歌地图是一个不同的故事 - 从 DOM 中移除视野之外的地图图块（尽管不是立即）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-07-10T22:10:37.450

现在是 2019 年。这个问题真的很老了，但我认为它仍然是相关且有趣的，并且可能在今天发生了一些变化，因为我们现在也都倾向于使用 React JS。

我注意到 Facebook 的时间线似乎使用了内容集群，`display: none !important`一旦集群消失，这些内容集群就会隐藏起来，所以之前渲染的 DOM 元素都保存在 DOM 中，只是那些看不见的内容被隐藏了`display: none !important`. 此外，隐藏簇的总高度设置为隐藏簇的父`div`级。

以下是我制作的一些屏幕截图：

[![在此处输入图像描述](../Images/cd6898b2729e57d97c6fc545c2dbf315.png)](https://i.stack.imgur.com/USASA.png)

[![在此处输入图像描述](../Images/6a8a45778214a1bfc712579e49eb0bb6.png)](https://i.stack.imgur.com/LFOdj.png)

[![在此处输入图像描述](../Images/da0312b8180aa1dd72891e23ce3edab8.png)](https://i.stack.imgur.com/TiOKm.png)

截至 2019 年，您如何看待这种方法？另外，对于那些使用 React 的人，如何在 React 中实现它？很高兴收到您对这个棘手话题的意见和想法。

感谢您的关注！

# php - 如何验证 PHP 发送的电子邮件，而不是语法；但按状态

> ID：12613115
> 
> 赞同：0
> 
> 时间：2012-09-27T02:11:27.170
> 
> 标签：php, email, verify

在通过语法发送邮件之前，我确实验证了在文本框中输入的电子邮件地址。但是如何使用 PHP 验证或验证正确的电子邮件地址？

```
if(mail($emailto)) {
   echo("status=Sent");
}
else {
   echo("status=Failed");
} 
```

例如，如果您输入 xxxxxxxxaddfb54@yahoo.com，它会接受一个有效的电子邮件 ID！我们怎么知道它存在与否？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:15:18.143

你不能。这就是互联网的本质：你不能绝对确定任何主机（更不用说主机上的帐户）在任何时候都处于给定状态，除非你可以控制主机。

您可以通过来自 mailer 守护程序的返回消息来判断失败，该消息特别指出传递尝试失败。但这是大多数私人邮件不会向您提供的礼貌。

在成功交付的情况下，您几乎永远不会收到返回验证电子邮件，除非您已专门设置服务器以这种方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:17:31.433

用户在阅读时会告诉你:)

你不能像已经说过的那样，所以一定要提供一个“**请重新给我发电子邮件**”链接，这样用户就可以输入正确的电子邮件[如果他或她错了]，或者只是重新发送如果您的 smtp 服务器有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T02:17:35.283

无法判断电子邮件地址是否存在（除非您尝试联系的服务器具有某种 API）。但是，您可以检查该*域*是否可以通过电子邮件发送到：

```
function checkEmailDomain($email) {
   list(,$domain) = explode('@', $email);
   if (checkdnsrr($domain, 'MX')) {
      return TRUE;
   }
   else if (checkdnsrr($domain, 'A')) {
      return TRUE;
   }
   return FALSE;
} 
```

请注意，这也不是 100% 可靠的。如果你想使用它，它应该纯粹是建议性的。

# ruby-on-rails - 使用 DelayedJobs 时，在工头被杀死之前，有关工作线程的信息不会在控制台中打印

> ID：12613121
> 
> 赞同：0
> 
> 时间：2012-09-27T02:12:04.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

在过去的几周里，我在使用 DelayedJobs gem 进行开发时注意到了这个问题。

我在终端中启动 Rails 服务器，然后从 Web 和工作线程中获取信息：

```
foreman start
22:10:31 web.1    | started with pid 10128
22:10:31 worker.1 | started with pid 10129 
```

但是，在此之后，只有 Web 线程将信息打印到控制台。直到我杀死工头，我才在控制台上一次完成整个服务器执行期间与工作线程有关的所有事情的完整转储。

有什么方法可以在开发过程中实时将工作线程信息打印到控制台？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:18:51.900

根据[这个问题](https://github.com/ddollar/foreman/issues/180)的状态，最新版本的工头应该是自己刷新日志的。

# java - 多个图形2d

> ID：12613126
> 
> 赞同：2
> 
> 时间：2012-09-27T02:12:47.033
> 
> 标签：java, bufferedimage, graphics2d

好的，我有两个类似的类（图形的设置方式相同）和另一个显示在底部的类。如您所见，我有两个图形2ds，我想同时显示它们，并且项目类是透明的并且位于顶部（项目类中几乎没有任何内容，游戏类完全被图片等覆盖）

有什么办法吗？

目前项目类优先于游戏类，因为它是最后调用的并且完全阻塞了游戏类。

```
public class game extends Canvas implements Runnable
{

public game()
{
     //stuff here

    setBackground(Color.white);
    setVisible(true);

    new Thread(this).start();
    addKeyListener(this);
}

public void update(Graphics window)
{
   paint(window);
}

public void paint(Graphics window)
{
    Graphics2D twoDGraph = (Graphics2D)window;

    if(back==null)
       back = (BufferedImage)(createImage(getWidth(),getHeight()));

    Graphics graphToBack = back.createGraphics();

//draw stuff here

    twoDGraph.drawImage(back, null, 0, 0);
}

public void run()
{    
try
{

while(true)
    {
       Thread.currentThread();
       Thread.sleep(8);
        repaint();
     }
  }catch(Exception e)
  {
  }
}

} 
```

二班

```
public class secondary extends JFrame
{
private static final int WIDTH = 800;
private static final int HEIGHT = 600;

public secondary()
{
    super("Test RPG");
    setSize(WIDTH,HEIGHT);

    game game = new game();
    items items = new items();

    ((Component)game).setFocusable(true);
    ((Component)items).setFocusable(true);
    getContentPane().add(game);
    getContentPane().add(items);

    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

public static void main( String args[] )
{
    secondary run = new secondary();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:31:06.857

以下是我的建议：

*   **扩展 JComponent 而不是 Canvas**（您可能想要一个轻量级的 Swing 组件而不是重量级的 AWT 组件）
*   然后**不要**为你的绘图手动缓冲 - Swing 会自动为你做缓冲（并且可能会在这样做时使用硬件加速）
*   让**一个组件**绘制两个项目和游戏背景的其余部分。没有充分的理由单独做（即使您只更改项目图层，由于透明效果，背景也需要重新绘制）
*   **大写你的**类名，看到小写的类名让我头疼:-)

**编辑**

通常，该方法是拥有一个表示游戏可见区域的类，例如 GameScreen，其 paintCompoent 方法如下：

```
public class GameScreen extends JComponent {
  ....

  public void paintComponent(Graphics g) {
    drawBackground(g);
    drawItems(g);
    drawOtherStuff(g); // e.g. animated explosions etc. on top of everything else
  }  
} 
```

# javascript - 谷歌地图 javascript api v3 地点库不返回任何边界结果

> ID：12613127
> 
> 赞同：0
> 
> 时间：2012-09-27T02:13:28.723
> 
> 标签：javascript, google-maps-api-3

我正在尝试使用 places 库来使用 LatLngBounds 类在两个坐标之间显示标记。如果我在地点搜索请求中注释掉星巴克的名称属性，我可以看到一些标记。有人可以指导我以下内容：

1）目前，我看到的标记位于两个坐标的中间，并且没有沿着边界均匀分布，我假设这会创建一个您必须在其中看到它们的矩形。我认为标记只是为中心计算。

2) 当我提供属性“名称”和值“星巴克”时，我在地图上看不到任何标记。

我认为我的`bounds`对象很好，因为当我调试时，我能够看到里面的西北和西南坐标。坐标是

*   34.0522342,-118.2436849 -加利福尼亚州洛杉矶
*   33.7489954,-84.3879824 -佐治亚州亚特兰大

有人可以指导我哪里出错了。

```
 function useCordinates(){
        ...
       var defaultBounds = new google.maps.LatLngBounds();

    var places = []; 
    places.push(new google.maps.LatLng(latLongSrc[0],latLongSrc[1]));
    places.push(new google.maps.LatLng(latLongDest[0],latLongDest[1]));

        defaultBounds.extend(places[0]);
        defaultBounds.extend(places[1]);

    //var center = defaultBounds.getCenter(); 
        //defaultBounds.contains(center);

         var request = {
                    //attribute to be commented
        name:"starbucks",
       bounds: defaultBounds,
       types:['establishment']

      };

      service = new google.maps.places.PlacesService(map);
      service.search(request, callback);
    }

     function callback(results, status) {
      if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
          var place = results[i];
          createMarker(results[i]);
        }
      }
         }
         function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:12:57.700

你的边界是一个非常狭窄的矩形，在洛杉矶和亚特兰大之间延伸（我认为不是你想要的）：

[http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks.html](http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks.html)

针对整个国家/地区的地点请求有问题，您只得到 20 个结果，看起来您可能是正确的，它们以边界为中心，而且似乎没有任何“真正的”星巴克足够靠近那里可以找到：

[http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks2.html](http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks2.html)

但是，如果您在华盛顿州西雅图市搜索，您会得到一些：

[http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks3.html](http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks3.html)

# jquery - 添加或删除网格 (KendoUI)

> ID：12613130
> 
> 赞同：1
> 
> 时间：2012-09-27T02:14:06.150
> 
> 标签：jquery, ajax, json, grid, kendo-ui

我试图每隔 30 秒左右在此页面上重新创建网格。我做什么清空 div“grid-users”并调用服务器。它返回给我一个带有重建表的 JSON（但有更新的行），所以我把它放回 div 中。

该表显示 find，但在同一个 setInterval 块中，一旦表回到 div 中，我尝试在 Kendo 上制作网格及其控件。

```
{% extends "saloons/templates/base.html" %}
{% from "ui/forms/macro.html" import wtform %}
{% block content %}
    <form id="form1" method="POST" action="">
      <br/><br/>
      <div id="total" align="right">Total de pedidos en soles: S/.<div id="num" style="display:inline"></div></div>
      <div id="fecha" align="left">Fecha: <input type="text" id="search_date" name="search_date" />
      <button  id="filter" name="filter" type="submit">Filtrar</button>
      </div>
      <br/><br/><br/><br/>
      <div id="grid-users"  class="grid-content" style="text-align: center; width: 100%!important">
        <table id="grid">
        <thead>
            <tr>
            <th data-field="number" style="text-align: center">Nro.</th>
            <th data-field="item" style="text-align: center">Articulo</th>
            <th data-field="requester" style="text-align: center">Solicitante</th>
            <th data-field="client" style="text-align: center">Cliente</th>
            <th data-field="price" style="text-align: center">Precio</th>
            <th data-field="date" style="text-align: center">Fecha del Pedido</th>
            <th data-field="status" style="text-align: center">Estado</th>
            <th data-field="save" style="text-align: center">Guardar Estado</th>
            </tr>
        </thead>
        <tbody id="pedidos">
            {% for i in orders %}
            <tr id="{{ i.id }}">
            <td>{{loop.index}}</td>
            <td>{{ i.ItemName }}</td>
            <td>{{i.user()}}</td>
            <td>{{i.tab.user}}</td>
            {% if i.isInventory %}
            <td>S/. {{ i.ItemPrice }}</td>
            {% else %}
            <td><input type="text" id="price{{ i.id }}" value="{{ i.ItemPrice }}"/></td>
            {% endif %}
            <td>{{ i.dateOrder }}</td>
            <td>
            <select id="cmb{{ i.id }}">
                <option value="PENDIENTE" selected="true">PENDIENTE</option>
                <option value="ATENDIDO">ATENDIDO</option>
                <option value="DENEGADO">DENEGADO</option>
            </select>
            </td>
            <td><a href="#" id="{{ i.id }}" rel="save">Grabar</a></td>
            </tr>
            {% endfor %}   
        </tbody>

        </table>
      </div>
    </form>
    <script>            
        $(function() {                
           $("a[rel=save]").live('click', function() {
            var id = $(this).attr('id');

            var p = $(this).parent().parent().find("td:eq(4)").html();
            var p2 = p.substring(4, p.length);
            var p3 = parseFloat(p2);

            if (isNaN(p3) == true)
            {
            p3 = $("#price"+id).val();
            }
            var a = $("#cmb"+id).val();
            if (a == 'PENDIENTE')
            {
              alert('Debe cambiar el estado del pedido');
            }
            else
            {
              var res = confirm("Está seguro de este cambio de estado?");
              if (res){
              $.post("check_order",{status : a, cod : id, price : p3, flag : true}, function(data) {
                var d = JSON.parse(data);
                if (!d.cancel){
                $("#cmb"+id).parent().parent().parent().remove();
                $("#pedidos tr").each(function(i, v){                            
                    if (i+1 > 0) {
                    $(this).find("td:first").html(i+1);
                    }
                   });
                $("#num").text(d.total);
                }
                else{
                  alert("El pedido que trata de actualizar ha sido cancelado. Refrescando pagina...");
                  parent.location.href = parent.location.href;
                }
              });
              }
            }
            return false;
           });

          $("#fecha").attr('class', 'k-header');
          $("#fecha").css({'width' : '290px',
                  'float' : 'left'});

          var f = new Date("{{ f }}");

          $("#search_date").kendoDatePicker({
             value: new Date(f),
             format: "dd/MM/yyyy",
             name: "search_date"
        });

          $("#search_date").attr('readonly', 'readonly');
          $("#grid").kendoGrid({
          height: 460,
          sortable: false,
          columns: [{field:"number", width:40},
                {field:"item", width:80},
                {field:"requester", width:80},
                {field:"client", width:80},
                {field:"price", width:100},
                {field:"date", width:100},
                {field:"status", width:120},
                {field:"save", width:80}]

          });

          var arr = [];
          $('a[rel=save]').each(function(){
           arr.push($(this).attr('id'));
           });

          for(i =0; i<arr.length;i++)
          {
         $("#pedidos tr")
            .find("td:eq(4)")
            .children("#price" + arr[i])
            .kendoNumericTextBox({
            min:0,
            max:150,
            decimals:2,
            upArrowText:"Aumentar",
            downArrowText:"Disminuir",
            format: "c"
            });
          }

         $("#total").css({'border-style' : 'solid',
                 'border-width': '3px',
                 'padding' : '10px',
                 'width' : '300px',
                 'float' : 'right',
                 'font-size' : '16px',
                 'font-weight' : 'bold'});
         $("#num").text("{{ total_orders }}");
         $("#total").attr('class', 'k-header');
          //FIXME: El combo en KendoUI debe integrar las opciones originales del combo
          $("#pedidos tr").each(function(i,v) {
           $(this).find("td:eq(6)").children("select").kendoDropDownList();
        });

          setInterval(function(){
        $("#grid-users").empty();
        $.getJSON("/cafe/uco", function(json){
            $("#grid-users").html(json.ord);
          });

          console.log($("#grid"));
          $("#grid").kendoGrid({
          height: 460,
          sortable: false,
          columns: [{field:"number", width:40},
                {field:"item", width:80},
                {field:"requester", width:80},
                {field:"client", width:80},
                {field:"price", width:100},
                {field:"date", width:100},
                {field:"status", width:120},
                {field:"save", width:80}]

          });

          var arr2 = [];
          $('a[rel=save]').each(function(){
           arr2.push($(this).attr('id'));
           });

          for(i =0; i<arr2.length;i++)
          {
         $("#pedidos tr")
            .find("td:eq(4)")
            .children("#price" + arr[i])
            .kendoNumericTextBox({
            min:0,
            max:150,
            decimals:2,
            upArrowText:"Aumentar",
            downArrowText:"Disminuir",
            format: "c"
            });
          }

          $("#pedidos tr").each(function(i,v) {
           $(this).find("td:eq(6)").children("select").kendoDropDownList();
          });

          },10000);
        });
    </script>
{% endblock %} 
```

出于某种原因，表格重建后，网格和控件不会进入 Kendo。有人能告诉我为什么吗？难道我做错了什么？=S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:24:04.340

收到新数据时是否缺少 read() 或 refresh()？

刷新：[http ://www.kendoui.c​​om/documentation/ui-widgets/grid/methods.aspx](http://www.kendoui.com/documentation/ui-widgets/grid/methods.aspx)

阅读：[http ://www.kendoui.c​​om/forums/mvc/grid/grid-ajax-jquery-refresh.aspx](http://www.kendoui.com/forums/mvc/grid/grid-ajax-jquery-refresh.aspx)

# .net - 白标 .NET 应用程序

> ID：12613131
> 
> 赞同：3
> 
> 时间：2012-09-27T02:14:07.753
> 
> 标签：.net, windows-installer

我们销售的服务包含一个打包在 MSI 中的 .NET 应用程序，该应用程序与 Web 服务相结合。

我们有很多客户想要以他们的品牌/徽标等转售我们的应用程序。我们真正需要做的就是更改任务栏图标、桌面图标、开始菜单图标，可能是这些图标下的描述，以及我们关于/支持细节。通过这种方式，我们可以在 10 个品牌下销售相同的应用程序，希望有更多的客户。

我们可以在它们处于活动状态时使用配置变量更改任务栏图标，关于/支持，但不能更改开始菜单/桌面图标或图标下的文本，因为它们在安装时放置。

我们不想为每个经销商分叉我们的代码（这可能会发生 10 次），但想要一种我们可以安装在不同品牌下的方式，或者在安装后 - 将所有内容更改为他们的设置。请记住，我们的应用程序当前安装在 Win2k、winxp、vista、7、嵌入式上。

看了之后 - 似乎没有一个好的方法可以做到这一点......任何想法都会受到赞赏。

干杯斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:17:52.460

这是一个有趣的问题。您可能会考虑使用“[仅资源程序集](http://msdn.microsoft.com/en-us/library/aa984332%28v=vs.71%29.aspx)”，其中包含每个命名程序集的每个相关客户端的特定图形和字符串资源。然后，您将构建所有这些，但对于特定客户端，仅将它们的程序集包含在安装程序中，并使用 app.config 指定在 ResourceManager 构造函数中使用的程序集名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:46:17.513

这取决于您准备 MSI 包的方式。如果您使用 WiX，则使用预处理器应该可以解决问题。

另一种选择是使用 MSI 转换，其中 MSI 包中的数据可以在安装时通过转换更改

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367447(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367447(v=vs.85).aspx)

# javascript - 添加 doctype 后 JavaScript 损坏

> ID：12613132
> 
> 赞同：0
> 
> 时间：2012-09-27T02:14:10.420
> 
> 标签：javascript, html, doctype

我继承了一些使用 Java Script 进行计算并在画布标签上绘制图形的页面。

他们的 JS 页面没有 `<!DOCTYPE html>`；他们只是从`<html>`标签开始。

我的网站有`<!DOCTYPE html>`，现在我将该代码添加到我的网站它不起作用。

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:18:19.233

那是因为如果 <html> 标记之前没有 DOCTYPE 语句，您的浏览器将在“怪癖模式”下运行。

这意味着编写 javascript 的人都依赖 quirks 模式来执行它。因此，既然您有一个 DOCTYPE 标记，您的浏览器将在一组不同的行为下运行，这些行为由 DOCTYPE 中指定的任何版本定义。

在您的代码中断之前，两者之间的差异是微妙的。我以前从不放 DOCTYPE 标签，直到这个确切的问题来咬我的屁股。

# grails - Grails UrlMapping 重定向以保持 DRY

> ID：12613133
> 
> 赞同：9
> 
> 时间：2012-09-27T02:14:12.217
> 
> 标签：grails, grails-2.0

我正在使用`Grails 2.1.1`并希望添加一些映射到控制器操作的自定义 URL。

我可以这样做，但原始映射仍然有效。

例如，我`add-property-to-directory`在我`UrlMappings`的下面创建了一个映射：

```
class UrlMappings {

    static mappings = {
        "/add-property-to-directory"(controller: "property", action: "create")
        "/$controller/$action?/$id?"{
            constraints {
                // apply constraints here
            }
        }

        "/"(view:"/index")
        "500"(view:'/error')
    }
} 
```

现在，我可以点击`/mysite/add-property-to-directory`，它会执行`PropertyController.create`，正如我所期望的那样。

但是，我仍然可以点击`/mysite/property/create`，它会执行相同的`PropertyController.create`方法。

本着 DRY 的精神，我想做一个 301 重定向 from `/mysite/property/create`to `/mysite/add-property-to-directory`。

我找不到在`UrlMappings.groovy`. 有谁知道我可以在 Grails 中实现这一点的方法吗？

非常感谢你！

**更新**

这是我根据汤姆的回答实施的解决方案：

**UrlMappings.groovy**

```
class UrlMappings {

    static mappings = {

        "/add-property-to-directory"(controller: "property", action: "create")
        "/property/create" {
            controller = "redirect"
            destination = "/add-property-to-directory"
        }

        "/$controller/$action?/$id?"{
            constraints {
                // apply constraints here
            }
        }

        "/"(view:"/index")
        "500"(view:'/error')
    }
} 
```

**重定向控制器.groovy**

```
class RedirectController {

    def index() {
        redirect(url: params.destination, permanent: true)
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:41:26.060

有可能实现这一点：

```
"/$controller/$action?/$id?" (
    controller: 'myRedirectControlller', action: 'myRedirectAction', params:[ controller: $controller, action: $action, id: $id ]
)

"/user/list" ( controller:'user', action:'list' ) 
```

并且在操作中，您会在 params 中获得 normallny 的值：

```
log.trace 'myRedirectController.myRedirectAction: ' + params.controller + ', ' + params.action + ', ' + params.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-31T16:51:16.587

从 Grails 2.3 开始，可以直接在 UrlMappings 中进行重定向，而不需要重定向控制器。因此，如果您升级，您可以像这样在 UrlMappings 中重定向，根据[文档](http://docs.grails.org/2.3.0/guide/theWebLayer.html#redirectMappings)：

```
"/property/create"(redirect: '/add-property-to-directory') 
```

作为原始请求一部分的请求参数将包含在重定向中。

# jquery - jQuery 深度链接

> ID：12613134
> 
> 赞同：1
> 
> 时间：2012-09-27T02:14:26.037
> 
> 标签：jquery

我将以下代码用于一些简单的选项卡，并且想知道是否可以编辑此代码以启用深度链接？我没有使用 jQuery UI，也不想使用插件。提前欢呼任何帮助。

```
 $('#tabber > div').hide(); // Hide all divs

    $('#tabber ul li a').click(function () { // When link is clicked
        $('#tabber ul li').removeClass('active'); // Remove active class from links
        $(this).parent().addClass('active'); //Set parent of clicked link class to active
        var currentTab = $(this).attr('href'); // Set currentTab to value of href attribute
        $('#tabber > div').fadeOut(200); // Hide all divs
        $(currentTab).fadeIn(200); // Show div with id equal to variable currentTab
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:24:47.673

我将使用轻量级插件来实现浏览器兼容性，因为我认为其他任何事情都是错误的：http: [//benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

要实现深度链接，您需要将关联逻辑视为该不同位置的一部分（RESTy 可寻址性），而不是尝试对现有动画代码进行某种改造。或者换句话说，哈希更改驱动 UI，而不是相反。

使用该插件并更改上述逻辑，因此 UI 只不过是一个标准链接（类似于`<a href="#tab_foo"...>`，然后更改显示逻辑以响应哈希更改：

```
$(window).hashchange(function () {
    $('#tabber ul li').removeClass('active');       
    var currentTab$ = $(location.hash);
    currentTab$.parent().addClass('active');
    $('#tabber > div').fadeOut(200);
    currentTab$.fadeIn(200);
}); 
```

根据需要进行调整（其中一些对于实际的 DOM 肯定没有意义）并在页面加载时触发（以处理深层链接）。

# python - 解析命令行参数不读取所有参数？

> ID：12613142
> 
> 赞同：0
> 
> 时间：2012-09-27T02:15:54.940
> 
> 标签：python, python-3.x, getopt, command-line-arguments

所以，我遇到了解析命令行参数的[`getopt`模块](http://docs.python.org/library/getopt.html)，尽管我无法理解这些文档。**无论出于何种原因，我无法弄清楚为什么这没有看到我的`--domain example.com`论点..**

```
$ ./httpdsetup.py -a -u zack --domain example.com
[('-a', ''), ('-u', '')] 
```

我打印出了被倾倒`opts`的东西，看看它看到了什么。下面的代码几乎与文档站点完全相同。

```
def main(argv):
        import getopt

        try:
                opts, args = getopt.getopt(argv, "h:al:ud:v", ["user=", "apache", "lighttpd", "dir=", "domain=", "vhost="])
        except getopt.GetoptError:
                print_usage()
                sys.exit(2)

        username = ''
        directory = ''
        domain = ''

        httpd = 'apache'

        print(opts)

        for opt, arg in opts:
                if opt == '-h':
                        print_usage()
                        sys.exit()
                elif opt in ('-u', '--username'):
                        username = arg
                elif opt in ('-d', '--dir'):
                        directory = arg
                elif opt in ('-v', '--domain', '--vhost'):
                        domain = arg
                elif opt in ('-a', '--apache'):
                        httpd = 'apache'
                elif opt in ('-l', '--lighttpd'):
                        httpd = 'lighttpd'
                else:
                        print_usage()
                        sys.exit()

        if httpd == 'apache':
                create_apache_vhost(domain, directory, username)
        elif httpd == 'lighttpd':
                create_lighty_vhost(domain, directory, username)

if __name__ == '__main__':
        main(sys.argv[1:]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:10:57.853

我更喜欢`argparse`. [Python 文档在这里](http://docs.python.org/py3k/library/argparse.html)。它在 Python >=2.7 和 >=3.2 中，但不在 Python 3.0 和 3.1 中。如果您的安装中缺少它，只需将[单个文件从此处](http://svn.python.org/projects/python/branches/release32-maint/Lib/argparse.py)复制到您的脚本所在的位置，或者复制到您的 Python 安装中。

这是与您的示例接近的内容`argparse`：

```
#!/usr/bin/env python3

import sys

def create_apache_vhost(*args, **kwargs):
    pass

def create_lighty_vhost(*args, **kwargs):
    pass

def main(argv):
        import argparse

        parser = argparse.ArgumentParser(description="Some server",
                                         formatter_class=argparse.RawDescriptionHelpFormatter)

        parser.add_argument('--username', type=str)
        parser.add_argument('-u', dest='username', type=str)

        parser.add_argument('--apache', dest='httpd', action='store_const', const='apache')
        parser.add_argument('-a',       dest='httpd', action='store_const', const='apache')
        parser.add_argument('--lighthttpd', dest='httpd', action='store_const', const='lighthttpd')
        parser.add_argument('-l',           dest='httpd', action='store_const', const='lighthttpd')

        parser.add_argument('--domain', type=str)
        parser.add_argument('--vhost',  type=str)
        parser.add_argument('-v', dest='domain', type=str)

        parser.add_argument('--dir', dest='directory', type=str)
        parser.add_argument('-d', dest='directory', type=str)

        defaults = {
            'httpd': 'apache',
            }
        parser.set_defaults(**defaults)

        args = parser.parse_args(args=argv)

        print(args)

        if args.httpd == 'apache':
                create_apache_vhost(args.domain, args.directory, args.username)
        elif args.httpd == 'lighttpd':
                create_lighty_vhost(args.domain, args.directory, args.username)

if __name__ == '__main__':
        main(sys.argv[1:]) 
```

# jquery - 如何使用 .on 定位使用 ajax 加载的元素

> ID：12613143
> 
> 赞同：1
> 
> 时间：2012-09-27T02:15:58.873
> 
> 标签：jquery, wordpress

似乎 Wordpress 使用 AJAX 加载其小部件表单输入字段，因此我无法将它加载到文档就绪的任何内容作为目标。我已经读过 .on 是如何重新绑定事件并且我已经玩过它，但我似乎无法理解它。我将如何在以下示例中使用 .on ？而且，它是唯一需要的吗？

这被加载到小部件表单中：

```
<fieldset id="fieldradio">
    <legend>pick</legend>
    <input type="radio" name="radiobutton" value="Yes" />
    <input type="radio" name="radiobutton" value="No"  />
</fieldset>

<fieldset id="field1" style="display:none;">
    <legend>this is field 1</legend>
    <input type="text" name="fdsa" value="value1" /><br />
    <input type="text" name="fdsa" value="value1" /><br />
</fieldset>

<fieldset id="field2" style="display:none;">
    <legend>this is field 2</legend>
    <input type="text" name="asdf" value="value2" /><br />
    <input type="text" name="asdf" value="value2" /><br />
</fieldset> 
```

这是我要使用的 javascript：

```
jQuery("input[name=radiobutton]").change(function(){          

    if (jQuery(this).val() == "Yes") {
        jQuery("#field1").fadeIn('slow');
    }
    else {
        jQuery("#field1").hide();
    }    

    if (jQuery(this).val() == "No") {
        jQuery("#field2").fadeIn('slow');
    }
    else {
        jQuery("#field2").hide();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:33:41.700

对于动态生成的元素，事件应该从元素或文档对象的静态父对象之一委托，您可以使用`on`方法。

```
$(document).on("change", "input[name=radiobutton]", function(){  
      var ind = $(this).index('input[type=radio]');
      $('fieldset:gt(0)').hide().eq(ind++).show()   
}); 
```

[http://jsfiddle.net/MaNkE/](http://jsfiddle.net/MaNkE/)

* * *

```
$(document).on("change", "input[name=radiobutton]", function(){  
     var ind = $(this).index();
     $('#field1, #field2').hide().filter('#field'+ind).show()
}) 
```

[http://jsfiddle.net/35tpE/](http://jsfiddle.net/35tpE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:18:18.577

检查文档中的[示例](http://api.jquery.com/on/)。这是您想要的语法：

```
jQuery("body").on("change", "input[name=radiobutton]", function(){         
    $(this).parent().hide();
}); 
```

那是`$("container").on("event", "selector", handler);`

# java - Java Calendar 类添加方法在第一次调用时添加零？

> ID：12613145
> 
> 赞同：0
> 
> 时间：2012-09-27T02:16:00.683
> 
> 标签：java

将 1 年添加到 Calendar 对象时，第一次迭代会添加 0 年，即使它应该添加 1。每个后续调用都会添加 1 年，这是应该的。例如：

```
calendarObject.add(Calendar.YEAR,1); //This actually adds nothing    
calendarObject.add(Calendar.YEAR,1); // now it works. 
```

**注意：** calendarObject 已设置为 1995 年，没有设置其他属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:22:15.833

它工作正常。

```
import java.util.Calendar;

public class CalTest
{
    public static void main(String[] args)
    {
        Calendar cal = Calendar.getInstance();

        cal.set(Calendar.YEAR, 1995);
        System.out.println(cal.get(Calendar.YEAR));

        cal.add(Calendar.YEAR, 1);
        System.out.println(cal.get(Calendar.YEAR));

        cal.add(Calendar.YEAR, 1);
        System.out.println(cal.get(Calendar.YEAR));
    }
} 
```

输出：

```
1995
1996
1997 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:25:29.220

**注意**是问题的根源。除了年份之外，您还需要设置更多的日历属性。Vikdor 的示例之所以有效，是因为他使用了返回的默认 Calendar 实例，其中填写了所有类成员。仅指定“1995”会导致奇怪的行为。

# iphone - 如果应用程序进入后台后，在带有 iOS6 的 XCode 上运行的 iOS5 应用程序会冻结

> ID：12613149
> 
> 赞同：2
> 
> 时间：2012-09-27T02:16:35.787
> 
> 标签：iphone, xcode, ios6

嗨，我有一个在 iOS5 上运行良好的应用程序，现在使用 iOS6 运行应用程序，它在进入后台后冻结并返回前台，不再响应触摸事件。

如果我为 5.1 模拟器构建它可以完美运行，这只会在 iPhone 6.0 模拟器上运行时发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T01:46:16.047

编辑答案：

原来罪魁祸首是我在我的应用程序中使用的 TWTweetComposeViewController。我在 viewDidLoad 函数中初始化了 TWTweetComposeViewController。显然，如果您初始化但不显示 TWTweetComposeViewController，它将阻止您的应用程序恢复。检查您是否使用此视图控制器并尝试将其删除或不初始化它，直到您要显示它。

马里奥，我有一个类似的，如果不一样的话，问题。就我而言，我的应用程序在从后台恢复时正确命中了 applicationWillEnterForeground。但是，该应用程序似乎在此时挂起并且从未达到 applicationDidBecomeActive。我不知道为什么应用程序永远不会到达 applicationDidBecomeActive。和你一样，该应用程序在 iOS5 及更低版本上运行良好，但在 iOS6 上存在此问题。

你能确认你的应用程序到达 applicationWillEnterForeground 并且没有点击 applicationDidBecomeActive 吗？

（我会将其写为对您问题的评论，但我似乎无法弄清楚如何做到这一点。

# php - 通过 PHP 拆分组合数据（数字和 Sting）以分离数据

> ID：12613150
> 
> 赞同：0
> 
> 时间：2012-09-27T02:16:36.457
> 
> 标签：php

如何在 PHP 中将字符串数据“VAL001”拆分为“VAL”和“001”两列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:48:42.853

上述解决方案的基准测试为 100000 次迭代。

Intel(R) Core(TM) i5-2435M CPU @ 2.40GHz

```
<?php
function getParts($str){
    $pieces = preg_split("/[A-Z]+/", $str);
    $number = $pieces[1];
    $pieces = preg_split("/[0-9]+/", $str);
    $string = $pieces[0];   
    return array('number' => $number, 'string' => $string);
}

$string = 'VAL001';

$start = microtime(true);
for($cou=0;$cou<100000;$cou++){
    $ret = getParts($string);
}
$end = microtime(true);
echo 'time taken : ' .  sprintf('%f', $end - $start);
echo "\n";

$start = microtime(true);
for($cou=0;$cou<100000;$cou++){
    list($val, $num) = str_split($string, 3);
}
$end = microtime(true);
echo 'time taken : ' .  sprintf('%f', $end - $start);
echo "\n";

$start = microtime(true);
for($cou=0;$cou<100000;$cou++){
    $val1 = substr( $var, 0,3);
    $val2 = substr( $var, 3,3);
}
echo 'time taken : ' .  sprintf('%f', $end - $start);
echo "\n";
?> 
```

**输出**

第一次运行

```
time taken : 2.269323
time taken : 0.586926
time taken : -0.000081 
```

第二轮

```
time taken : 2.205317
time taken : 0.555085
time taken : -0.000073 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:18:59.607

```
$var = 'VAL001';
$val1 = substr( $var, 0,3);
$val2 = substr( $var, 3,3);

echo $val1." ".$val2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T02:19:19.647

这里有几个选项，但您很快就会注意到，我们需要比 Numeric 和 String 更多的条件，因为一个不排除另一个，一些字符串是数字，所有数字都可以是字符串。

[preg_match()](http://php.net/manual/en/function.preg-match.php)

[substr()](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T02:19:21.963

```
<?php
function getParts($str){
    $pieces = preg_split("/[A-Z]+/", $str);
    $number = $pieces[1];
    $pieces = preg_split("/[0-9]+/", $str);
    $string = $pieces[0];   
    return array('number' => $number, 'string' => $string);
}
$str1 = 'VAL001';
$str2 = 'NEWVAL0001';

$ret1 = getParts($str1);
var_dump($ret1);
$ret2 = getParts($str2);
var_dump($ret2);
?> 
```

**输出**

```
array(2) {
  ["number"]=>
  string(3) "001"
  ["string"]=>
  string(3) "VAL"
}
array(2) {
  ["number"]=>
  string(4) "0001"
  ["string"]=>
  string(6) "NEWVAL"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T02:20:52.320

很大程度上取决于你需要什么。我会给你一个还没有人知道的答案：[`str_split`](http://php.net/manual/en/function.str-split.php)

```
list($val, $num) = str_split($string, 3); 
```

# objective-c - 实例属性的概念

> ID：12613152
> 
> 赞同：1
> 
> 时间：2012-09-27T02:16:53.287
> 
> 标签：objective-c, ios, cocoa-touch

请你打破我的困惑。

如果我在一个类中定义一个属性

```
@interface Class
{
  UIScrollView * _scrollView;
}
@property (nonatomic, retain) IBOutlet UIScrollView * scrollView;
@end

@implement
@synthesize scrollView = _scrollView;
@end 
```

当我想实现它时，我可以使用

```
_scrollView.contentSize = xxx 
```

或者

```
self.scrollView.contentSize = xxx 
```

两种描述有什么区别？

* * *

谢谢你的回答...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:26:07.943

对实例变量的直接引用正是——对实例中字段的引用，不受它也是属性的“后备存储”这一事实的影响。

`self.propName`另一方面，参考是（`[self propName]`如果阅读）或`[self setPropName:newPropValue]`（如果设置）的简写。即，这些引用通过访问器方法。如果属性定义为 ，这并不重要`assign`，但如果是，`retain`那么 setter 方法会处理所有保留逻辑。

此外，您可以实现自己的属性访问器——`-(SomeType*) propName {...}`并且`-(void) setPropName:(SomeType*)propParm {...}`——如果你想让它们做一些特殊的事情，比如“惰性”初始化。

（此外，属性默认为“公共”访问，而实例变量默认为“私有”访问。）

# c#-4.0 - System.Net.Mail.MailMessage 发送后不释放内存

> ID：12613153
> 
> 赞同：1
> 
> 时间：2012-09-27T02:16:55.007
> 
> 标签：c#-4.0, smtpclient, mailmessage

我正在开发一个 EmailService 来阅读电子邮件表（Sql）的新邮件。这是一个用 C# 和 .NET 4.0 编写的 Windows 服务。每封电子邮件记录的邮件正文大小约为 12kb...在发送每封电子邮件后，我的服务调用 MailMessage.Disposed() 方法并将 SmtpClient 设置为 null。但是我的服务的内存不断增加，即使没有阅读新的电子邮件，也不会回到启动的服务（大约需要 7mb 系统内存）。它经常消耗 70mb - 120mb 系统内存，这太奇怪了 :(

对于上述情况，您有什么解决方案可以减少内存吗？

感谢你并致以真诚的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:00:38.797

我以前见过这种情况，直到关闭 .exe 才真正释放系统资源（回到 2.0 天，有一些 Windows 窗体编程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:12:35.247

您应该使用`using`和`SmtpClient`对象`MailMessage`：

```
using(SmtpClient client = new SmtpClient("ipaddress")){
using(MailMessage message = new MailMessage()){

//Do something to fill the message...

client.Send(message);

}

} 
```

# java - 如何处理 JFace 绑定组合框中的空选择？

> ID：12613155
> 
> 赞同：1
> 
> 时间：2012-09-27T02:17:03.623
> 
> 标签：java, data-binding, combobox, eclipse-rcp, jface

我正在我的 eclipse-rcp 应用程序中开发一个搜索对话框。

在搜索对话框中，我有一个组合框，如下所示：

```
comboImp = new CCombo(grpColSpet, SWT.BORDER | SWT.READ_ONLY);
comboImp.setBounds(556, 46, 184, 27);
comboImpViewer = new ComboViewer(comboImp);
comboImpViewer.setContentProvider(new ArrayContentProvider());
comboImpViewer.setInput(ImpContentProvider.getInstance().getImps());
comboImpViewer.setLabelProvider(new LabelProvider() {
    @Override
    public String getText(Object element) {
        return ((Imp)element).getImpName();
    }
}); 
```

`Imp`是一个数据库实体，ManyToOne 是被搜索的主要实体，是`ImpContentProvider`通过 jpa/hibernate 与嵌入式 sqlite 数据库对话的模型类。

这个组合框应该包含 的所有实例`Imp`，*但也允许空选择*；它的值绑定到一个服务 bean，如下所示：

```
IObservableValue comboImpSelectionObserveWidget = 
    ViewersObservables.observeSingleSelection(comboImpViewer);
IObservableValue filterByImpObserveValue = 
    BeansObservables.observeValue(searchPrep, "imp");
bindingContext.bindValue(comboImpSelectionObserveWidget, filterByImpObserveValue
    , null, null); 
```

一旦用户单击组合，就会进行选择（第一个元素）：我可以看到对我在查看器上添加的选择侦听器的调用。我的问题是：

*   做出选择后，如何让用户改变主意并在组合框中有一个空选择？我应该将 Imp 的“假”空实例添加到返回的列表中`ImpContentProvider`吗？还是我应该实施替代方案`ArrayContentProvider`？

还有一个相关的问题是：

*   为什么在组合上调用`deselectAll()`and`clearSelection()`不会为绑定的 bean 设置空值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T03:35:02.877

`ComboViewer.setSelection(StructuredSelection.EMPTY)`将触发选择事件并将“imp”设置为空。我认为只有在从下拉列表中手动选择时才会触发组合小部件选择事件。

**使用转换器**

定义空选择 obj，让我们说 EMPTYEnum（在标签提供程序中显示空字符串）

您可以定义`UpdateValueStrategy`目标到模型并`IConverter`在绑定可观察对象时进行设置。在转换器中，您可以将 EMPTYEnum 转换为 null。

```
IConverter:
fromType: Object.class
toType: Object.class

public Object convert(Object fromObject)
{
    if(fromObject instanceof EMPTYEnum)
    {
        return null;
    }
    return fromObject;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-08T11:21:30.567

制作 LabelProvider 并处理空值

```
public String getText(Object element) {
    if (element == null) { 
        return "Choose one"; 
    }
    return super.getText(element);
} 
```

在索引 0 处插入空值并处理空选择

```
 combo.setInput(yourItems);
    combo.insert(null, 0);
    combo.getCCombo().select(0);
    combo.addPostSelectionChangedListener(new ISelectionChangedListener() {
        @Override
        public void selectionChanged(SelectionChangedEvent event) {
            if (combo.getCCombo().getSelectionIndex() == -1) {
                combo.getCCombo().select(0);
            }
        }
    }); 
```

绑定 ComboViewer ...

# android - 在接收 gcm 通知时显示多个通知

> ID：12613158
> 
> 赞同：2
> 
> 时间：2012-09-27T02:17:16.940
> 
> 标签：android, google-cloud-messaging, android-notifications, android-notification-bar

我在这样的通知栏中显示通知。我得到了那些，但我不能在那里显示多个通知，一次只能显示一个。一个新的来了，前一个就走了。会有什么问题？

```
 public void createNotificationRecever(Context context, String payload) {
        Toast.makeText(context, commentor  +  "commented on your post "   ,Toast.LENGTH_LONG).show();
        //New message received
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.flag,
                payload, System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        Intent intent = new Intent(context, MessageReceivedActivity.class);
        intent.putExtra("id", groupid);
        intent.putExtra("userid", text);
        intent.putExtra("cname", groupname);
        intent.putExtra("image", "");

        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);
        notification.setLatestEventInfo(context, "Message",
                payload, pendingIntent);         
        notificationManager.notify(0, notification);

    }} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-25T04:40:49.500

使用此代码它将在列表中带来多个通知 int NOTIFICATION_ID = 0; `notificationManager.notify(NOTIFICATION_ID, notification2); NOTIFICATION_ID++`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T02:33:23.090

根据您需要的通知数量，有几种解决方案。您可以在通知中添加一个递增的 id，以便它具有不同的名称，因此不会用相同的 id 替换另一个，或者如果您最多只需要两个通知，那么只需使用不同名称的字符串/变量创建第二个通知您正在使用。

在这里查看 ID 增量：

[Android：管理多个通知](https://stackoverflow.com/questions/3465230/android-managing-multiple-notifications)

如果您只需要第二次或第三次通知，请将您的字符串更改为以下内容，例如：

```
public void createNotificationRecever(Context context2, String payload2) {
    Toast.makeText(context2, commentor  +  "commented on your post "   ,Toast.LENGTH_LONG).show();
    //New message received
    NotificationManager notificationManager = (NotificationManager) context2
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification2 = new Notification(R.drawable.flag,
            payload2, System.currentTimeMillis());
    // Hide the notification after its selected
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    Intent intent = new Intent(context2, MessageReceivedActivity.class);
    intent.putExtra("id", groupid2);
    intent.putExtra("userid", text2);
    intent.putExtra("cname", groupname2);
    intent.putExtra("image", "");

    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
            intent, 0);
    notification.setLatestEventInfo(context, "Message",
            payload, pendingIntent);         
    notificationManager.notify(0, notification2);

}} 
```

我希望你能明白要点，它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T12:13:28.877

@SunnySonic，您需要使用“Android 支持库”的最新稳定版本。

要下载“Android Support Libraray”的最新稳定版本，转到 SDK Manager -> Extras -> 点击 Android Support Library 并更新它。

并转到 build.gradle 并在“依赖项”下更改版本。

```
dependencies {
    compile 'com.android.support:support-v4:22.1.1'  //<-change this
    compile files('libs/bolts-android-1.1.4.jar')
    compile files('libs/gcm.jar')

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T11:10:43.150

您可以在 notify 方法中生成随机数作为 NotificationId。

notificationManager.notify(generateRandom(), notificationBuilder.build());

```
public int generateRandom()
{
    Random rn = new Random();
    int n = maximum - minimum + 1;
    int i = rn.nextInt() % n;
    return  minimum + i;

} 
```

# gwt - 如何从 IntelliJ 11 Community Edition 运行 GWT/Errai 项目？

> ID：12613161
> 
> 赞同：1
> 
> 时间：2012-09-27T02:18:07.143
> 
> 标签：gwt, intellij-idea, errai

在 IntelliJ IDEA 11 社区版（不包括 GWT 插件）中，我需要做什么才能使用 Errai 为 GWT 项目设置工作运行配置？

我找到了在 IntelliJ Community Edition中[运行 GWT 项目的](http://java.dzone.com/tips/gwt-development-intellij-idea)[说明以及在 Eclipse 中使用 GWT、CDI 和 Errai 的说明](https://community.jboss.org/wiki/WorkingWithGWTCDIAndErrai)，但是当我将这些放在一起时，运行配置无法加载我的应用程序。需要什么配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:18:07.143

要从 IntelliJ 11 Community Edition 运行 GWT/Errai 项目，请执行以下步骤：

**将 GWT、Errai 和您的项目源目录添加到类路径**

*   转到文件 > 项目结构，然后在项目设置下，选择模块。选择依赖项选项卡。
*   您可以单击黄色加号按钮并选择“罐子或依赖项”以添加依赖项。这样，添加 gwt-dev.jar 和 gwt-user.jar（来自 GWT SDK）和一个包含所有 Errai jar 的目录（即：errai-marshalling-(version).jar、errai-data-binding-(版本）.jar）。确保这些 jar 的版本与您的 Maven（或其他构建工具）依赖项相匹配。
*   同样的方法，添加你项目的 src 目录。它可能会显示为“空库”，但不要删除它。打开项目的 .iml 文件并找到引用 /src 和/或 /src/main/java 目录的行。如果它们位于 SOURCES 元素下，则将它们移动到 CLASSES 下，这样您就有了类似下面的内容。感谢 Stack Overflow 用户 Vic 为这篇[文章](https://stackoverflow.com/questions/4774115/intellij-idea-10-community-edition-and-gwt-plugin)做出了贡献。

    ```
    <library>
      <CLASSES>
        <root url="file://$MODULE_DIR$/src" />
        <root url="file://$MODULE_DIR$/src/main/java" />
        <root url="file://$MODULE_DIR$/src/main/webapp/WEB-INF/classes" />
      </CLASSES>
      <JAVADOC />
      <SOURCES />
    </library> 
    ```

**创建运行配置**

*   创建一个新的应用程序运行配置（运行 > 编辑配置 > + > 应用程序）。
*   对于 Main 类，输入“com.google.gwt.dev.DevMode”。
*   如果尚未选择，请在“使用模块的类路径”菜单中选择您的项目。
*   添加与以下等效的程序参数，替换项目的参数。有关所有有效参数的描述，请使用 none 运行配置并检查输出。

    ```
    -noserver -server org.jboss.errai.cdi.server.gwt.JettyLauncher -war /path/to/project/exploded/war/dir -logLevel INFO -startupUrl App.html project.module.App 
    ```

*   运行配置并在 GWT Development Mode 窗口中单击 Launch Default Browser。希望您的应用程序现在可以加载。

**故障排除**

*   如果遇到异常，请确保检查 GWT 开发模式窗口中 App 选项卡中的输出，因为此处的输出不一定反映在浏览器或 IntelliJ 的日志中，并且可能是诊断问题的关键。
*   如果您收到异常 'java.lang.RuntimeException: Deferred binding failed for 'org.jboss.errai.ioc.client.Bootstrapper'（您是否忘记继承所需的模块？）'，请在 App 选项卡下检查。您可能忘记了继承 GWT 模块；输出将显示哪一个。
*   如果您收到编组错误，请检查您的 ErraiApp.properties 是否列出了所有可序列化类型，并且该文件的主副本和测试副本是否匹配。

# c# - 如何创建瓷砖系统

> ID：12613170
> 
> 赞同：1
> 
> 时间：2012-09-27T02:18:53.453
> 
> 标签：c#, xna

与其为每个图块创建单独的案例，更好的方法是什么？

```
public void Draw(SpriteBatch spriteBatch, Level level)
    {
        for (int row = 0; row < level._intMap.GetLength(1); row++) {
            for (int col = 0; col < level._intMap.GetLength(0); col++) {
                switch (level._intMap[col, row]) {
                    case 0:
                        spriteBatch.Draw(_texture, new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), new Rectangle(0 * _tileWidth, 0 * _tileHeight, _tileWidth, _tileHeight), Color.White);
                        break;
                    case 1:
                        spriteBatch.Draw(_texture, new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), new Rectangle(1 * _tileWidth, 0 * _tileHeight, _tileWidth, _tileHeight), Color.White);
                        break;
                    case 2:
                        spriteBatch.Draw(_texture, new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), new Rectangle(2 * _tileWidth, 0 * _tileHeight, _tileWidth, _tileHeight), Color.White);
                        break;
                    case 3:
                        spriteBatch.Draw(_texture, new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), new Rectangle(3 * _tileWidth, 0 * _tileHeight, _tileWidth, _tileHeight), Color.White);
                        break;

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T02:21:58.687

不需要 case 语句，只需使用变量即可。

```
var n = level._intMap[col, row];
spriteBatch.Draw(_texture, 
    new Rectangle(row * _tileWidth, col * _tileHeight, _tileWidth, _tileHeight), 
    new Rectangle(n * _tileWidth, 0 * _tileHeight, _tileWidth, _tileHeight), Color.White
); 
```

如果您需要将输出限制为值 0-3（就像 case 语句的效果一样），那么最好使用有条件的`if (n >= 0 && n <= 3) { }`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:10:35.303

我认为做这样的事情的一个好方法是创建一个“Tile”类。该类可以具有纹理的 Texture2D 属性。然后在 Tile 类中有一个 draw 方法，该方法将在游戏的 draw 方法中调用。

你的 Level 类可以有一个 Tiles 数组而不是整数。

那么你的 Draw 调用将是这样的：

```
public void Draw(SpriteBatch spriteBatch, Level level)
    {
        for (int row = 0; row < level.tileMap.GetLength(1); row++) {
            for (int col = 0; col < level.tileMap.GetLength(0); col++) {
                level.tileMap[col, row].Draw(spriteBatch);;
            }

        }
    } 
```

# ember.js - 具有可变 contentBindings 的视图

> ID：12613178
> 
> 赞同：0
> 
> 时间：2012-09-27T02:19:58.700
> 
> 标签：ember.js

是否可以使用模板作为`selectionBinding`值？这是我正在尝试做的事情：

控制器：

```
App.testController = Em.Object.create({
    content:[
       {title: "abc", index: 1, model: App.s1 },
       {title: "def", index: 2, model: App.s2 }
     ]
}} 
```

看法：

```
{{#each App.testController.content}}
  Title: {{title}} Model: {{model}} Index: {{index}}
  {{view Ember.Select
       // doesn't work
       selectionBinding="App.s" + {{index}}" + ".selected"
       contentBinding="App.s" + {{index}} + ".content"
  }}
}} 
```

换句话说，迭代中的每个视图都需要绑定到它自己的模型，因此上述语法的任何变体都将受到欢迎。我尝试使用`[]`语法，但也`.get({{index})`没有任何成功。

在 a 之后我到底可以使用`selectionBinding=`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:28:27.540

绑定字符串只能使用字符串属性路径。

在您的示例中，最好绑定到`model.selected`and `model.content`。

# ruby-on-rails-3.2 - 下载当前页面时缺少模板错误

> ID：12613181
> 
> 赞同：2
> 
> 时间：2012-09-27T02:20:58.123
> 
> 标签：ruby-on-rails-3.2, save, send, missing-template

我正在尝试通过单击按钮来保存显示的网页（就像单击浏览器中的“另存为”按钮一样），但我无法弄清楚这个错误：

```
Missing template shipments/save_page_xls, application/save_page_xls with {:locale=
[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched i
n: * "/home/andres/Documents/Aptana Studio 3 Workspace/EcuadorCargo/app/views" * "
/var/lib/gems/1.9.1/gems/devise-2.1.2/app/views" * "/var/lib/gems/1.9.1/gems/twitt
er-bootstrap-rails-2.1.1/app/views" 
```

我认为问题在于渲染函数不应该在控制器中，或者渲染函数没有找到正确的布局文件。我基于this page [rails：模拟“将页面另存为”行为](https://stackoverflow.com/questions/1080565/rails-emulate-save-page-as-behaviour)

查看（以haml）：

```
= link_to "Save as XLS", save_page_xls_shipments_path, :class => 'btn btn-primary' 
```

控制器文件：

```
class ShipmentsController < ApplicationController
  def save_page_xls
    #this is the magic line!
    send_data(render, :filename => "archivo.xls")
  end
end 
```

路线：

```
resources :shipments, :only => :index do 
  collection do
    get 'save_page_xls'
  end
end 
```

# css - 为什么字体大小仅在我在按钮上设置背景颜色时才起作用？

> ID：12613182
> 
> 赞同：1
> 
> 时间：2012-09-27T02:21:03.617
> 
> 标签：css, ruby-on-rails

我在 Chrome 上的 Rails 3.2.6 中。

我的 html.erb 文件中有以下代码：

```
<div id="beta">
    <%= form_tag({}, {:id => "id_search"}) do %>
        ID: <%= text_field_tag "beta_id" %>
        <%= submit_tag "Go" %>
    <% end %>
</div> 
```

当我在 CSS 文件中将字体大小设置为 24pt 时，文本字段会正确更改，但按钮根本不会更改。我在我的开发者工具中把它拉出来，它得到了 CSS 属性，但没有改变它的字体大小。即使我输入`!important`，也没有发生任何事情。我也无法更改字体系列。

JSFiddle：http: [//jsfiddle.net/R5CXg/](http://jsfiddle.net/R5CXg/)

更改其他属性有效。当我更改`background-color`属性时，按钮突然变成方形而不是圆形，并弹出正确的字体大小和字体系列。

为什么会出现这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:02:20.227

尝试包括：

```
-webkit-appearance: button;
-moz-appearance: button; 
```

在字体大小之前的css中，并将其仅应用于按钮，因此为btn提供一个id，然后将带有代码的css应用于按钮。这是为了确保 webkit 正确显示它。希望这会让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:14:19.187

按钮样式因浏览器而异。

Webkit 尝试使用无法使用所有 CSS 属性设置样式的本机控件。尝试：

```
-webkit-appearance:none 
```

禁用特殊的原生样式。[这是一个神奇的供应商特定属性。](http://davidwalsh.name/webkit-appearance)

# asp.net-mvc-3 - 仅验证 ajax 加载的部分视图

> ID：12613188
> 
> 赞同：0
> 
> 时间：2012-09-27T02:21:23.117
> 
> 标签：asp.net-mvc-3, unobtrusive-validation, asp.net-mvc-validation

我有一个带有一些控件的表单。表单上有一个按钮可以加载部分视图。在局部视图中，有两个必填字段文本框和一个按钮。当它被点击时，我只需要显示部分视图内的文本框的错误消息，而不是实际表单中的字段。当我单击表单的提交按钮时，必须显示所有错误消息。

加载部分视图后，我正在重新初始化验证插件，如下所示。

```
$('#test').removeData("validator");
$.validator.unobtrusive.parse('#test'); 
```

我尝试使用下面线程中描述的验证属性，但它不起作用。也许它适用于正常加载的视图。

[ASP.NET MVC 验证组？](https://stackoverflow.com/questions/7340751/asp-net-mvc-validation-groups)

但是，我可以通过调用 textbox1.valid() 和 textbox2.valid() 来单独验证。但我认为我缺少标准的做法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:03:07.863

您可以通过使用 Ajax.BeginForm() 提交部分视图来完成此操作

```
//In Partail View
@model SomeModel 
```

@using (Ajax.BeginForm("SomeActionName", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "targetId"})) {

```
 @Html.EditorFor(mode=>model.FirstText)
           @Html.EditorFor(mode=>model.SecText)
           <input type="submit" value="save">
 }

//In Controller

public ActionResult SomeAction(SomeModel model)
{
    return PartaiulView(model);
} 
```

在这里您可以验证您的部分视图 注意：当您使用 Ajax.BeginForm 提交表单时，您必须指定“ **UpdateTargetId** ”，您的结果将出现在视图上。

```
//In View

<div id="targetId">
   @Html.Partail("PartialView")
</div> 
```

或者如果你想重定向到另一个动作，如果你的模型是有效的，那么修改你的动作

```
public ActionResult SomeAction(SomeModel model)
    {
        if(ModelState.IsValid)
        {
            return Json(new {redirect = @Url.Action("SomeAction","SomeController")})
        }
        return PartaiulView(model);
    } 
```

然后在部分视图中，您可以调用Ajax.BeginForm 的**OnSuccess**方法

```
 @using (Ajax.BeginForm("SomeActionName", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "targetId",OnSuccess="success"}))
         {

         }

<script type="text/javascript">

  function success(data)
  {
        if(data.redirect)
        {
            windows.location = data;
        }
  }
</script> 
```

检查两种方式哪一种适合您。

# c++ - 为什么这个 shared_ptr 代码段错误？shared_ptr 什么时候免费？

> ID：12613190
> 
> 赞同：1
> 
> 时间：2012-09-27T02:21:38.650
> 
> 标签：c++, scope, shared-ptr

我已尽我所能制作了 SSCE。我的怀疑是共享指针在我在 main 中请求它们之前解构（释放）我的对象。如何在不完全规避共享指针的情况下防止这种情况发生？这是一个程序中的孤立问题，否则使用 shared_ptrs 会大大帮助。

测试.h：

```
#ifndef TEST_H
#define TEST_H
#include <memory>
#include <iostream>
#include <vector>

class Test
{
    public:
        Test();
        virtual ~Test();
        static std::shared_ptr<Test> makeTestFrom(std::string l);
        std::vector<std::shared_ptr<int>> reg_vec;
    protected:
    private:

};

#endif // TEST_H 
```

测试.cpp

```
#include <memory>
#include <iostream>
#include <vector>
Test::Test():
reg_vec()
{
    //ctor
}

Test::~Test()
{
    //dtor
}
std::shared_ptr<Test> Test::makeTestFrom(std::string l)
{
    std::shared_ptr<Test> sp(new Test());
    std::shared_ptr<int> i(new int(3));
    sp->reg_vec.push_back(i);
    return sp;
} 
```

主.cpp：

```
#include <memory>
#include <iostream>
#include <vector>
#include "include/Test.h"
using namespace std;

 int main()
{
    std::unique_ptr<Test> x(new Test());
    x->makeTestFrom("loldoesntmatter");
    std::cout << x->reg_vec[0] << std::endl;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:26:35.937

```
 int main() {
    std::unique_ptr<Test> x(new Test());
    x->makeTestFrom("loldoesntmatter"); // you discarded the return
    std::cout << x->reg_vec[0] << std::endl; // x->reg_vec is empty
    return 0;

} 
```

此外，太多的共享指针

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T02:37:37.517

您正在制作太多新对象。在`main`中，您正在寻找一个`int`inside `x->reg_vec`，但`makeTestFrom`没​​有向 中添加任何内容`x`，它创建了一个全新的对象并将整数放入其中。

除此之外，你还在滥用`shared_ptr`. 在 C++ 中，尽可能避免动态分配。 `int`通过价值传递比 with 更便宜`shared_ptr`，所以只需使用`vector<int>`. 并且`Test`对象也可以使用自动生命周期创建。

仅仅因为其他一些语言（即 Java）使所有东西都成为句柄并不意味着这对 C++ 来说是一个好的模式。

# css - 为什么子元素不能用更大的值覆盖父元素的不透明度？

> ID：12613191
> 
> 赞同：40
> 
> 时间：2012-09-27T02:21:40.667
> 
> 标签：css, opacity

众所周知，子元素目前还不能覆盖`opacity`其父元素的属性。parent的`opacity`属性始终生效。

当孩子试图覆盖（用较小的值覆盖）父母的不透明度时，这是有道理的。但是如果孩子试图用更大的价值覆盖它呢？这不应该被允许吗？为什么半透明的父母不能有一个不透明的孩子？任何人都可以分享一下为什么决定将这种限制作为 CSS 设计的一部分的想法吗？

如果有人能阐明其理论原因，我将不胜感激。我本质上是在试图找出其中的原因（不是解决方法；因为这些已经被讨论过很多次了）。我敢肯定，这是很多像我这样的新手都想知道的。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-27T02:31:47.203

我从未将其视为“压倒一切”或“压倒一切”。这是*相对*不透明的问题。如果父级的不透明度为`0.5`，则子级也有（相对于父级的堆叠上下文）。`0`子级可以在和之间有自己的不透明度值`1`，但它始终与父级的不透明度相关。所以如果孩子也有`opacity: 0.5`设置，就会是`0.25`一些父母的兄弟姐妹的不透明度与不透明度`1`。

[规范](http://www.w3.org/TR/css3-color/#transparency)将其视为 alpha 蒙版，其中不透明度只能被移除。一个元素要么是不透明的，要么具有一定程度的透明度（任何东西`< 1`）：

> 不透明度可以被认为是一种后处理操作。从概念上讲，在将元素（包括其后代）渲染为 RGBA 离屏图像后，不透明度设置指定如何将离屏渲染混合到当前的复合渲染中。

后来：

> 如果对象是一个容器元素，那么效果就好像容器元素的内容使用掩码与当前背景混合，其中掩码的每个像素的值是`<alphavalue>`

至于*为什么*以这种方式实施，我认为这不是“让我们禁止那个”意义上的故意。也许选择这种方法是因为计算更简单，只是后来才认识到实际需要不同的东西（然后`rgba` `color`才被`background-color`引入——我可能对这里的时间线有误）。

# php - PHP 在后台运行 FFMPEG，并找出它何时完成

> ID：12613192
> 
> 赞同：1
> 
> 时间：2012-09-27T02:21:52.807
> 
> 标签：php, process, background, ffmpeg

> **可能重复：**
> [在后台运行 ffmpeg 进程](https://stackoverflow.com/questions/1198052/run-a-ffmpeg-process-in-the-background)

我想知道是否有任何简单的方法可以在后台运行和 ffmpeg 进程，以便人们可以离开页面。如果你这样做，然后告诉 ffmpeg 进程是否正在运行，当它完成时，将数据库更新为“完成”。如果需要，我会发布我的代码。谢谢！这是处理页面上的代码：

```
<?php
$name = $_FILES['upload_file']['name'];
$type = $_FILES['upload_file']['type'];
$size = $_FILES['upload_file']['size'];
$tmpname = $_FILES['upload_file']['tmp_name'];

if (!$title) {
    $title = $name;
}

if (!$description) {
    $description = "No description available.";
}

$string = substr(str_shuffle(str_repeat('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',10)),0,10);
$videoname = "$string.mp4";
$date = date("F d, Y"); // October 09, 2010
$srcFile = $tmpname;
mkdir("users/$usercode/uploads/$string");
mkdir("users/$usercode/uploads/$string/HD");
mkdir("users/$usercode/uploads/$string/regular");
mkdir("users/$usercode/uploads/$string/mobile_upload");
mkdir("users/$usercode/uploads/$string/thumbnails");
$destFile1 = "/users/$usercode/uploads/$string/HD/$string.mp4";
$destFile2 = "/users/$usercode/uploads/$string/regular/$string.mp4";
$destFile3 = "/users/$usercode/uploads/$string/mobile_upload/$string.mp4";
$ffmpegPath = "/usr/local/bin/ffmpeg"; 
$flvtool2Path = "/usr/bin/flvtool2";
$yamdiPath = "/usr/bin/yamdi";
$mp4boxPath = "/usr/local/bin/MP4Box";
// Create our FFMPEG-PHP class 
$ffmpegObj = new ffmpeg_movie($srcFile); 
// Save our needed variables 
$srcWidth = $ffmpegObj->getFrameWidth(); 
$srcHeight = $ffmpegObj->getFrameHeight(); 
$srcFPS = $ffmpegObj->getFrameRate(); 
$srcAB = $ffmpegObj->getAudioBitRate();  
$srcAR = $ffmpegObj->getAudioSampleRate(); 
$res = $srcWidth . "x" . $srcHeight; 
// Call our convert using exec() 
$iphone1 = getcwd().$destFile1;
$iphone2 = getcwd().$destFile2;
$iphone3 = getcwd().$destFile3;
$low = "854x480";
$local_img = "/users/$usercode/uploads/$string/thumbnails/$string.jpg";
$img = getcwd().$local_img;
$img = preg_replace('/ /','\ ',$img); 
$thumb = "$string.jpg"; 
$cmd = "$ffmpegPath -i $tmpname 2>&1";  
if (preg_match('/Duration: ((\d+):(\d+):(\d+))/s', `$cmd`, $time)) {  
    $total = ($time[2] * 3600) + ($time[3] * 60) + $time[4];  
    $interval = rand(0, $total);  
}  

$img = shell_exec("$ffmpegPath -ss $interval -i $tmpname 2>&1 -s 120x90 -f mjpeg -vframes 1 $img");

if ($srcWidth >= 1280 && $srcHeight >= 720) {
    $out1 = shell_exec("$ffmpegPath -i $tmpname -f mp4 -vcodec libx264 -vpre normal -ab $srcAB -ar $srcAR -b 5000k -r $srcFPS -s $res -acodec libfaac $iphone1");
    $out2 = shell_exec("$mp4boxPath -inter 0.5 $iphone1");
    $out3 = shell_exec("$ffmpegPath -i $tmpname -f mp4 -vcodec libx264 -vpre normal -ab $srcAB -ar $srcAR -b 2000k -r $srcFPS -s $low -acodec libfaac $iphone2");
    $out4 = shell_exec("$mp4boxPath -inter 0.5 $iphone2");
    $out5 = shell_exec("$ffmpegPath -i $tmpname -f mp4 -vcodec libx264 -vpre slow -ab 64k -ar 44100 -b 500k -r 30 -s $low -acodec libfaac $iphone3");
    $out6 = shell_exec("$mp4boxPath -inter 0.5 $iphone3");
    echo 1;
}
else {
    $out3 = shell_exec("$ffmpegPath -i $tmpname -f mp4 -vcodec libx264 -vpre normal -ab 64k -ar 44100 -b 500k -r 30 -s $low -acodec libfaac $iphone2");
    $out4 = shell_exec("$mp4boxPath -inter 0.5 $iphone2");
    $out5 = shell_exec("$ffmpegPath -i $tmpname -f mp4 -vcodec libx264 -vpre slow -ab 64k -ar 44100 -b 500k -r 30 -s $low -acodec libfaac $iphone3");
    $out6 = shell_exec("$mp4boxPath -inter 0.5 $iphone3");          
    echo 1;
}
function generate_random($number_of_characters)
{
        $characters = array();
        $randomchar = "";
        $x = 0;
        for($i = 48; $i < 123; $i++)
        {
                if(ctype_alnum(chr($i)))
                {
                        $characters[$x] = chr($i);
                        $x++;
                }
        }
        for($i = 0; $i < $number_of_characters; $i++)
        {
                $randomchar .= $characters[rand(0, count($characters) - 1)];
        }
        return $randomchar;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:04:00.697

首先，您的代码很容易受到 SQL 注入攻击和 shell 参数攻击。您需要将所有输入转义到 SQL 和 shell 命令！

我认为这将是解决此问题的标准方法：

1.  将您的 ffmpeg“工作”写入数据库元组。请注意作业编号，这将是元组的主键。此时，“状态”需要不是“完成”。
2.  将所有 ffmpeg 处理代码移动到辅助 PHP 脚本中。助手，我只是指另一个脚本。称它为“ffmpeg_job_processor.php”。
3.  通过调用在后台运行该脚本`exec('php ffmpeg_job_processor.php '.escapeshellarg($jobNumber).' > /dev/null &');`该脚本将按 ID 从数据库加载作业，执行所有处理，完成后将更新数据库以“完成”。
4.  基于 Web 的作业监控页面可以通过 ID 查找相同的元组来轻松显示作业状态。

诀窍是在后台执行第二个 PHP 脚本，因此它会释放您的调用 PHP 脚本以继续运行而不会阻塞。您必须通过管道`stdout`传输到`/dev/null`（Linux 机器）并使用后台操作符`&`。

这里有一些更好的信息：[在后台运行 ffmpeg 进程](https://stackoverflow.com/questions/1198052/run-a-ffmpeg-process-in-the-background)

# vb.net - 尝试使用 VB.NET Lambda 而不是迭代器

> ID：12613195
> 
> 赞同：2
> 
> 时间：2012-09-27T02:22:02.197
> 
> 标签：vb.net, lambda

我相当确定我可以在 VB.NET 中使用 Lambda 表达式执行以下代码，但我似乎找不到这样做的示例。Mt 尝试这样做没有结果。

我只是遍历 Me.Controls 集合，然后执行两个嵌套的 If（可能是与 AndAlso 连接的一个）...如果条件匹配，则调用 .Controls.Clear() 方法物体。

```
 For Each C As Control In Me.Controls
        If TypeOf C Is GroupBox Then
            If C.Name.StartsWith("grpScreen") Then
                CType(C, GroupBox).Controls.Clear()
            End If
        End If
    Next 
```

有人能指出我正确的方向吗？感谢您的帮助，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:10:11.587

试试这个

```
 Me.Controls.OfType(Of GroupBox)() _
       .Where(Function(c) c.Name.StartsWith("grpScreen")) _
       .ToList() _
       .ForEach(Sub(c) c.Controls.Clear()) 
```

# php - 数据库中的 200 个表是否太多？

> ID：12613196
> 
> 赞同：-1
> 
> 时间：2012-09-27T02:22:07.017
> 
> 标签：php, mysql, database, database-design

显然，如果没有更多信息，这个问题是不可能回答的，所以让我展开。

我正在建立一个包含大约 1000 家商店的商店数据库

它们分为13大类产品。

这 13 个大类各有 4 或 5 个子类

这 4 个或 5 个（总共约 65 个）每个人都有大约 4 个或 5 个。

我所做的是为每个单亲父母及其直系子女制作一张桌子。然后为每个孩子和他们的孩子提供桌子。

在逻辑方面，它将满足我的编程需求，但我想知道拥有这么多表是否完全不正统，以及是否有更好的方法来做到这一点。

还想知道查询时是否有这么多表会使系统过载/滞后。

我本可以在 2 个表中完成整个事情，我只是为每个类别分配了一个 parent_id，但从视觉角度来看，它看起来不是很有条理或层次结构，而这就像一棵完美的树。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:25:20.013

使用具有适当索引的关系数据库结构（具有一对多或多对多关系）。为每个类别设置一个单独的表在逻辑上没有任何意义——这就是发明关系数据库的原因。

您的解决方案应该可以工作，但从数据意义上讲，这不是很好的做法。

**为了更具体**

像这样的数据库结构

```
TABLE categories:
id  title   parent_id(NULL) 
```

然后使用 PHP 中的一些递归对从中获得的结果进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:27:01.257

如果您的所有表都具有相同的字段或大部分相同的字段，并且它们代表相同的事物（即产品），那么仅使用两个表的解决方案是设计此数据库的更标准的方法。一张表列出了所有产品及其所属的类别（最具体的类别），另一张表列出了类别。有关处理此表中出现的分层信息的不同方法的讨论，请参阅[此问题。](https://stackoverflow.com/questions/5995823/storing-hierarchical-data-mysql-for-referral-marketing/6011400#6011400)[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)也可以满足您的需求。（在那个问题中没有讨论，因为它不满足提出这个问题的人的需求。）根据您选择的模型，您可能需要添加第三个表来实现该模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T12:57:44.250

对于您描述的问题，200 个表是多余的。您可以将有关商店的数据存储在一个表中，将有关类别的数据存储在另一个表中，将有关子类别的数据存储在第三个表中，最后将有关子子类别的表存储在第四个表中。然后，您可以将与给定商店和给定子子类别相关的数据存储在第五个表中。

您可以使用外键/主键引用定义将这些表中的行与其他表中的行联系起来，并根据需要使用连接来组合数据。

它更简单，性能更好，并且更具前瞻性。您可以在不改变数据库结构的情况下添加新商店。不仅如此，您还可以在构建数据库后对数据进行各种查询。

以各种方式利用相同的数据确实是数据库的全部内容。有了你的结构，每次你想以新的方式利用数据时，你都必须编写一个新程序。使用经典设计，您只需用 SQL 编写查询。

顺便说一句，我见过一个数据库，里面有 400 个表。但该数据库管理着一所中型大学的所有管理数据。从学生、课程、入学和成绩到校友捐赠、高中成绩单、体育赛事和停车位，应有尽有。你的问题几乎没有这么复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T02:24:51.427

这个问题无法回答，因为您没有提供最重要的信息：负载。有多少用户将使用这个数据库？同样重要的是，您使用哪家公司来托管基础架构？

此外，编写不佳的代码将导致数据库性能不佳。

除此之外，为每个页面制作一些小的计时脚本。确定每个查询需要多长时间，然后将其乘以您希望拥有的用户数。如果您希望每秒有 400 个查询，那么您如何编写代码以及使用谁来托管基础设施等事情很快就会变得非常重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T02:34:29.860

一些考虑：

在多表场景中，随着产品/类别等的增长，您将需要不断添加越来越多的表，但它会保持查找速度更快（对较少记录的全表扫描），查询更清晰，关系更健全。

在通常通过自连接来获取数据的两表场景中，查找可能会变慢，因为所有数据都将驻留在这几个表中。同样从个人经验来看，在同一张表中维护这么多代码和关系是很痛苦的，尤其是当它变成 n 级父子关系时。对于这种情况，Oracle 有关系解析 SQL 语法，这使得查询更容易。但我认为 MySQL 缺少它们。

如果我是你，所有的事情都考虑到我会采用第一个结构......也许会使一些孩子与父母的关系变平，但主要是让它们保持原子性。（顺便说一句，我使用过（遗留）具有 400 多个表的 MySQL 数据库，所以我认为你应该可以处理 200 多个表）

# php - 来自 MySQL 的日期时间在 PHP 中进行比较以显示链接

> ID：12613198
> 
> 赞同：0
> 
> 时间：2012-09-27T02:22:44.960
> 
> 标签：php, mysql, datetime, if-statement, strtotime

我试图根据时差显示链接。

```
if((MySQL_DATE - TODAY) > 2 WEEKS) {
    <a href="http://www.url.com">Link</a>
} 
```

但我无法让它正常工作。

我正在使用该`strtotime`功能，但它没有按照我期望的方式工作：

```
if(((strtotime($hm_datelisted)) - (strtotime('now'))) > (strtotime('2 week'))) {
    <a href="http://www.url.com">Link</a>
} 
```

如果您使用“>”，则链接根本不起作用，“<”会永久显示链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:26:16.420

研究使用 MySQL 的 NOW() 函数。它更精确，更容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:31:00.343

减去“今天”是没有意义的。今天的时间戳是 1348712844。两周后是 1349922505。这些总和是 2698635588，大约是 2055。我想你只是想检查一下`hm_datelisted`从现在起超过两周，但我不确定该列包含什么任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:36:44.970

看起来您正在尝试显示超过 2 周的链接？您可以直接在 MySQL 中进行计算，从而节省 PHP 中所有 strtotime() 调用的大量开销：

```
SELECT ...
FROM ...
WHERE (yourdatefield + INTERVAL 2 WEEK) < now() 
```

# svn - svn+ssh 迁移到 svnserve

> ID：12613199
> 
> 赞同：1
> 
> 时间：2012-09-27T02:22:46.903
> 
> 标签：svn, ssh

我有一个 Subversion 存储库，其中有几个活动用户，目前仅配置为 svn+ssh 使用。我想迁移存储库以使用 svnserve 协议，以使其更容易被新用户访问并安全。如果我开始在也由 ssh 访问的存储库上使用 svnserve，有什么我应该担心的吗？我仍然可以使用相同的存储库进行 ssh 访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:20:53.597

我会说，只要正确设置文件所有权和权限，并行使用这两种访问不会有任何大问题。

您可以查看[SVN 书籍的这一部分，](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.multimethod.html)以获取一些关于您需要注意什么的提示。

# haskell - Haskell - 关于咖喱

> ID：12613200
> 
> 赞同：5
> 
> 时间：2012-09-27T02:22:51.103
> 
> 标签：haskell

在 Haskell 中，所有函数最初都是柯里化的，对吗？

所以，让我们看一下这个`max`函数，我会写下我对它如何工作的理解。

当我写这样的东西时：

```
max 4 5 
```

会发生什么情况是创建了一个内部值为 4 的新函数，然后它接收一个值，所以这个函数应用于 5 并返回一个正确的值？

我是否以某种方式说错了什么或者这是正确的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T02:52:37.447

这是正确的。您可以通过记住两个最重要的身份来记住柯里化的全部内容：

```
-- Function type right-associativity:
a -> b -> c = a -> (b -> c)

-- Function application left-associativity:
f x y = (f x) y 
```

这两个身份一起工作并产生了一种咖喱语言。

# ibm-mq - 关注 WMQ 中同步点的概念

> ID：12613209
> 
> 赞同：5
> 
> 时间：2012-09-27T02:24:36.727
> 
> 标签：ibm-mq, mq

我对**`syncpoint`**来自 WebSphere MQ 的内容有点困惑。根据 WMQ Infocenter 的参考资料，**同步点**定义如下：

> 在最简单的情况下，在任务结束时做出提交或撤销更改的决定。但是，应用程序在任务中的其他逻辑点同步数据更改可能更有用。这些逻辑点称为同步点（或同步点），处理两个同步点之间的一组更新的周期称为一个工作单元。

因此，**`a unit of work`**称为两个同步点之间的处理。据我了解，该工作单元实际上是一个事务。所以我在这里画了一张反映它们之间关系的图：

![在此处输入图像描述](../Images/90682ca3986699c702af5cfcc9b6a149.png)

1.  **我理解正确吗？**
2.  **这里的另一个问题是关于同步点，据说是为应用程序同步数据，数据从哪里同步到哪里？**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T03:01:21.410

答案1：是的，您理解正确。事务是整体成功或失败的原子工作单元。同步点是事务之间的边界。事务和同步点之间的细微差别在于，在事务下完成的工作可能会在一段时间内处于不确定状态，而同步点是事务处于不确定状态的状态。如果发生故障，队列将恢复到上一个​​同步点时存在的状态，然后回滚任何待处理的事务，或者在 XA 的情况下，可能由资源管理器提交。

信息中心页面[*交易管理和支持*](https://www.ibm.com/docs/en/ibm-mq/9.2?topic=overview-transaction-management-support)可能比帖子中链接的页面更好地解释它。

答案 2：数据由资源管理器同步。对于消息是事务中唯一参与者的本地工作单元，同步只发生在队列中，并且队列管理器同时充当资源管理器和事务管理器。对于在同一事务中涉及消息和数据库更新的全局工作单元，同步发生在 QMgr 和充当资源管理器的数据库中。事务管理器将是 MQ 或应用程序服务器，它协调资源管理器之间的同步。

无论事务是本地的还是全局的（有时也称为单阶段提交或两阶段提交），事务和同步点之间的关系都是相同的。同步点是保留已知状态并且可能将不确定事务回滚到的最近时间点。

# c# - CultureInfo 名称的常量

> ID：12613211
> 
> 赞同：26
> 
> 时间：2012-09-27T02:24:49.893
> 
> 标签：c#, .net, globalization

C# 系统/全球化命名空间中是否有一组常量或枚举包含有效的文化名称？

我正在寻找一些东西，这样我就不必输入“en-GB”等。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T02:26:33.697

是的，有，[GetCultures](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)：

```
System.Globalization.CultureInfo.GetCultures(System.Globalization.CultureTypes.SpecificCultures) 
```

这会返回一个对象数组`CultureInfo`，所以如果你想要字符串名称，你可以使用类似的东西：

```
IEnumerable<CultureInfo> cultures = CultureInfo.GetCultures(CultureTypes.SpecificCultures);
string[] names = cultures.Select(c => c.Name).ToArray(); 
```

请注意“文化类型”枚举（来自 MSDN 链接）。我想最有用的是*NeutralCultures*和*SpecificCultures*。

> *   **NeutralCultures** 与语言相关但不特定于国家/地区的文化。.NET Framework 区域性的名称由派生自 ISO 639-1 的小写两字母代码组成。例如：“en”（英文）是一种中性文化。自定义文化可以有任何用户指定的名称，而不仅仅是两个字母的代码。不变区域性包含在指定此值的 CultureInfo.GetCultures 方法返回的区域性数组中。
> *   **SpecificCultures**特定于国家/地区的文化。这些区域性的名称遵循 RFC 4646（Windows Vista 和更高版本）。格式为“-”，其中是从 ISO 639-1 派生的小写双字母代码，是从 ISO 3166 派生的大写双字母代码。例如，英语（美国）的“en-US”是特定的文化。自定义文化可以具有任何用户指定的名称，而不仅仅是符合标准的名称。
> *   **InstalledWin32Cultures** 安装在 Windows 操作系统中的所有文化。请注意，并非 .NET Framework 支持的所有区域性都安装在操作系统中。
> *   **AllCultures** .NET Framework 附带的所有文化，包括中性和特定文化、安装在 Windows 操作系统中的文化以及用户创建的自定义文化。
> *   **UserCustomCulture**用户创建的自定义文化。
> *   **ReplacementCultures** 用户创建的自定义文化，用于替换 .NET Framework 附带的文化。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-27T09:01:35.193

不，没有。可用文化列表是特定于系统的——您甚至可以使用[CultureAndRegionInfoBuilder](http://msdn.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.aspx)注册新的自定义文化。

因此，如果您想要这个，您必须为您感兴趣的常见文化子集创建自己的枚举或常量，例如：

```
public static class KnownCulture
{
    public readonly String EnglishUS = "en-US";
    public readonly String EnglishGB = "en-GB";
    ... etc ...
} 
```

或者

```
public enum KnownLCID
{
    EnglishUS = 0x409,
    EnglishGB = 0x809,
    ...
} 
```

This is analogous to the `KnownColor` enumeration: it's not possible to create an enumeration for all possible colors, but it can make sense to have an enumeration for frequently used ones.

I wouldn't expect Microsoft to provide an equivalent `KnownCulture` enumeration out of the box, as it's rather sensitive (why is my culture not included?).

# android - 为什么在Android中开始运行应用程序时会出现1秒的白屏？

> ID：12613217
> 
> 赞同：4
> 
> 时间：2012-09-27T02:26:03.160
> 
> 标签：android

当我单击应用程序图标并开始运行应用程序时，它会出现 1 秒钟的白屏。
我不知道为什么。
有没有办法清除这个白屏并直接进入我的活动？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-15T08:23:34.797

白/[黑](http://androidxref.com/4.4.2_r1/xref/frameworks/base/core/res/res/drawable/screen_background_selector_light.xml)屏幕是窗口背景图像[。](http://androidxref.com/4.4.2_r1/xref/frameworks/base/core/res/res/drawable/screen_background_selector_dark.xml)

`onCreate()`例如，当您的跑步和您的布局正在膨胀时，会显示窗口背景。这可能需要一些时间，尤其是在需要读取、解码和缩放大量位图的情况下。

更改主题有效，因为某些主题具有非默认窗口背景。例如，[`Theme.Wallpaper`具有透明背景](http://androidxref.com/4.4.2_r1/xref/frameworks/base/core/res/res/values/themes.xml#531)。那里也有其他定义。基本上你想要的是：

```
<style name="YourTheme">
  <item name="android:windowBackground">@null</item>
</style> 
```

以编程方式，您可以使用

```
getWindow().setBackgroundDrawable(null); 
```

在活动的顶部`onCreate()`。

（老问题，但被另一个答案撞到了，没有一个好的答案。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-27T13:09:31.537

设置。文件>设置>构建，部署>即时运行取消选择那里显示的所有选项。

并在您的 style.xml 中添加以下行

```
 <item name="android:windowDisablePreview">true</item>
 <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/colorPrimary</item>
    <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
    <item name="colorAccent">@color/colorAccent</item>
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowDisablePreview">true</item>
</style>
apply changes in AndroidMainfest.xml
 <application
        android:theme="@style/AppTheme"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T04:51:10.117

在我更改 style.xml 之后：

```
<resources>

    <style name="AppTheme" parent="android:Theme.Wallpaper" />

</resources> 
```

有用！！谢谢大家

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-10T06:25:49.357

在对应activity的manifest文件中添加如下

```
 android:launchMode="standard" 
```

并从相应的活动中删除 android:label="@string/app_name" ，这实际上帮助了我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T03:10:50.913

在您的`manifest.xml`文件中删除`android:theme="@style/AppTheme"`您的应用程序的行。并再次检查

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-16T05:02:07.593

在清单中使用此标记：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-08T08:58:14.387

[![在此处输入图像描述](../Images/74b427cf28ccb4c951866aa43e916cc5.png)](https://www.bignerdranch.com/blog/splash-screens-the-right-way/) 就像你管..最初他们显示图标屏幕而不是白屏。并在 2 秒后显示主屏幕。

首先在 res/drawable 中创建一个 XML drawable。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:drawable="@color/gray"/>

    <item>
        <bitmap
            android:gravity="center"
            android:src="@mipmap/ic_launcher"/>
    </item>

</layer-list> 
```

接下来，您将在主题中将其设置为启动活动的背景。导航到您的 styles.xml 文件并为您的启动活动添加一个新主题

```
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <!-- Customize your theme here. -->
    </style>

    <style name="SplashTheme" parent="Theme.AppCompat.NoActionBar">
        <item name="android:windowBackground">@drawable/background_splash</item>
    </style>

</resources> 
```

在新的 SplashTheme 中，将窗口背景属性设置为 XML 可绘制对象。在 AndroidManifest.xml 中将其配置为启动活动的主题：

```
<activity
    android:name=".SplashActivity"
    android:theme="@style/SplashTheme">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

这个链接给出了你想要的。一步一步的程序。 [https://www.bignerdranch.com/blog/splash-screens-the-right-way/](https://www.bignerdranch.com/blog/splash-screens-the-right-way/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-11T09:02:16.253

### 只需在 AndroidManifest.xml 文件中提及启动活动的透明主题即可。

### 喜欢：

```
<activity
    android:name="first Activity Name"
    android:theme="@android:style/Theme.Translucent.NoTitleBar" >
<intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-12T08:02:41.430

在 Styles 中添加以下内容

```
 <item name="android:windowFullscreen">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowIsTranslucent">true</item> 
```

希望这会帮助你和它为我工作

# regex - 如何在括号前与前瞻匹配

> ID：12613229
> 
> 赞同：1
> 
> 时间：2012-09-27T02:27:56.297
> 
> 标签：regex

我有这个：

```
aaa(bbb) 
```

我`(bbb)`使用这个匹配：

```
\(.*?\) 
```

我现在希望匹配`aaa`，所以我尝试了“积极的前瞻断言”。这不起作用。

```
(\(.*?\))(?=\() 
```

我怎样才能匹配前面的字母`(`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:31:17.670

试试这个，

```
 .*(?=\() 
```

正则表达式好友截图

![在此处输入图像描述](../Images/cf0245937f6b993ad59d3d3c8573faa9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:30:46.937

在我看来，您实际上并不需要前瞻。您可以只使用`[^(]*`匹配第一个之前的所有内容`(`

```
^([^(]*) 
```

要获得它和 的内容`()`，请添加您现有的`(.*?)`捕获组。

```
^([^(]*)\((.*?)\) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T02:29:55.730

为什么不简单地匹配`/(aaa)(\(bbb\))/`，然后用`$1`and引用你的匹配项`$2`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T02:35:09.223

```
(\(.*?\))(?=\()
 ^^  ^^ 
```

这些强制将“aaa”括在括号中（shell 后面是一个左括号）。你似乎想要

```
/(.+?)(?=\(.*?\))/ 
```

# c - 是否可以将密码传递给需要root权限的进程

> ID：12613232
> 
> 赞同：0
> 
> 时间：2012-09-27T02:28:29.230
> 
> 标签：c, linux, qt, process, root

假设我使用 QProcess 启动一个进程 p1。进程 p1 需要 root 权限，所以我们可以在没有人为干预的情况下将密码传递给进程 p1，当然密码是从某个位置读取的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:59:10.713

您可能会考虑使用[setuid](http://en.wikipedia.org/wiki/Setuid)技巧来获得一个由您的应用程序启动的帮助程序可执行文件，它是 setuid root 并运行适当的东西。

这样做时要小心，如果您不非常仔细地编码，则会存在安全风险。您应该确保此内部辅助程序可执行文件仅由您的应用程序启动。（它可以与它通信，例如通过管道或其他 IPC）。

（您也可以配置`sudo`或`super`非常仔细）

请注意，这`setuid`很棘手。我强烈建议阅读一些关于它的文档，特别是[Advanced Unix Programming](http://basepath.com/aup/)和[Advanced Linux Programming](http://advancedlinuxprogramming.com/)。并仔细阅读了几遍。另请仔细阅读[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)和[credentials(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/credentials.7.html)手册页（以及其他）。误解 setuid 是一个巨大的安全风险。

不要忘记使用 setuid 技巧来最小化程序。特别是，不要让你的整个 Qt 应用程序 setuid，只做一个小的帮助程序 setuid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:32:40.250

通常不会，不会。当 sudo 请求密码时，Linux 获取用户提供的密码，然后对其进行加密/散列，并针​​对存储在 /etc/shadow 中的散列对其进行测试。如果匹配，则授予权限。如果没有，没有布埃诺。

除非您设法向用户询问他们的密码（或后门登录或某种此类技术），否则您可能不会完成此特定活动。

# java - 如何从另一个扩展 JDialog 的类中调用已经存在的活动框架，然后删除其所有组件？

> ID：12613234
> 
> 赞同：0
> 
> 时间：2012-09-27T02:29:23.917
> 
> 标签：java, swing

我有`class main extends jframe`，它有一个按钮，可以调用/显示另一个扩展的类`jdialog`。

如果按钮 from`jdialog`被触发，它将处理该对话框并删除 的所有组件`jframe`，然后将其添加到新的`jpanel`.

我该怎么办？

**这是我的新破代码：**

```
public class mainz extends JFrame{
mainz(){
    setVisible(true);
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);

    JToolBar r = new JToolBar();
    r.add(Box.createHorizontalGlue());
    add(r, BorderLayout.NORTH);

    JButton n = new JButton();
    r.add(n, BorderLayout.EAST);

    n.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae){
            show();
        }
    });
}

public void  show(){
    dialogz d = new dialogz(this);
    d.setVisible(true);
}

public void lastHope(){
    getContentPane().removeAll();
    getContentPane().validate();
    getContentPane().repaint();
}

public static void main (String[]args){
    new mainz().setExtendedState(MAXIMIZED_BOTH);
} 
```

}

```
public class dialogz extends JDialog{
public dialogz(final mainz owner) {
    setSize(300, 300);
    JButton n = new JButton("execute");
    add(n);

    final JFrame ew = (JFrame)super.getOwner();// <<

    n.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae){
            dispose();
            //owner.lastHope;
            ew.removeAll();// <<
            ew.validate();// <<
            ew.repaint();// <<
        }
    });
}

void yes(){
    getOwner().removeAll();

    getOwner().validate();
    getOwner().repaint();
} 
```

}

我知道我可以阻止我的`main`课程扩展`jframe`，而是从 main 调用它，但我想这样做......

请帮帮我...TT

对不起我的英语，我来自遥远的国家〜，〜”

更新：错误是

java.lang.ClassCastException：javax.swing.SwingUtilities$SharedOwnerFrame 无法转换为 javax.swing.JFrame

它将通过删除包含 // << 然后调用 lastHope(); 的行来完成

但我认为还有另一种方法可以让现有的 jframe 全部删除（通过先转换它或其他东西〜，〜“）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:35:07.270

我不清楚您的目标是什么，但是如果您想更改容器中显示的组件，例如 JFrame 或 JDialog 的 contentPane，那么我建议您使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)来执行此操作，因为它允许您轻松交换“意见”。

可能有两种方法可以做到这一点：

*   您的 JDialog 类可以使用对通过其构造函数传入的 JFrame 的引用（然后您应该立即将其传递给对话框的`super`构造函数，以便您的模态能够正常工作）。然后，您可以调用 JFrame 类中的任何公共方法。
*   或者由于 JDialog 是模态的，JFrame 的代码将在对话框可见时停止。您可以在对话框被处理且不再可见后立即交换“视图”。这会将 JFrame 操作代码保留在 JFrame 类中。
*   编辑：请注意，如果您不使用 CardLayout，那么您有责任在任何更改其组件的容器上调用`revalidate()`和。`repaint()`

顺便说一句：由于英语不是您的母语，也不是本论坛许多人的母语，请避免使用非标准缩写。您与我们的沟通越清晰，我们就越容易理解您并为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T03:27:27.740

您正在打电话`getParent()`，但您从未设置父母（或所有者）。正如已经指出的那样，这应该发生在构造函数中。另外，请注意`getParent()`返回一个`Container`对象并`getOwner()`返回一个`Window`对象。这两个都是指作为父级和所有者的 JFrame。如果要将其用作 JFrame，则必须将输出转换为`(JFrame)`. 但是`removeAll()`在`Container`课堂上，所以如果这就是你想要的，就不需要选角了。

**更新**：

```
JFrame frame = new JFrame();
JDialog dialog = new JDialog(frame);//frame is owner

JFrame parentOfDialog = (JFrame)(dialog.getParent());
//OR
//JFrame parentOfDialog = (JFrame)(dialog.getOwner());
parentOfDialog.removeAll(); 
```

如果您使用的是自定义类，请传入`JFrame`构造函数并调用`super`.

在尝试使用它之前，请阅读[JDialog上的 javadoc。](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html)另外，请阅读有关继承的更多信息。

# jquery - 使用 jQuery iPhone-Style-Checkboxes 皮肤时，复选框不会在 jQuery PCP 中触发事件

> ID：12613237
> 
> 赞同：0
> 
> 时间：2012-09-27T02:30:05.623
> 
> 标签：jquery, forms

我已经使用 HTML 和 jQuery 构建了一个表单。该表单旨在为用户即时生成报价。

我还希望使用 jQuery iPhone Style Checkboxes (iSC) 设置样式的复选框。

我已经实现了 jQuery Price Calculator Pro (PCP) 以及 iSC。当 iSC 未实施时，系统可以完美运行，但是一旦实施 iSC，价格变化（见右上角）将不再触发。

我认为这是因为事件是由 .click 触发的，但据我发现并非如此。

我已经能够实现以下内容，这将允许我添加一行代码来触发 PCP 运行所需的任何内容：

```
$(window).load(function() {             

var onchange_checkbox = ($('#eCommerce')).iphoneStyle({
    onChange: function() { 
            if ($('#eCommerce').is(':checked')) {
                $('#eCommerce-Output').removeClass('dispnone');
                console.log('eCommerce is on');
        } 
            else { 
            $('#eCommerce-Output').addClass('dispnone');
            console.log('eCommerce is off');
            };
    }
}); 
```

正如您将能够通过控制台[在页面的实时版本上](http://bit.ly/TDVEOF)看到的那样——当 iPhone 切换开关切换时，上述触发完美。

如果您勾选顶部的无样式复选框，您将能够看到我希望 iPhone 切换执行的操作。[可以在此处找到](http://mtgconsulting.com.au/client-files/testing/form-assets/jquery-price-calculator-pro.js)用于计算的相关 .js 文件。

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:08:04.020

每次触发表单输入之一的更改事件时，价格都会更新。所以我们需要在iphone风格的checkbox改变的时候手动触发这个事件。

**编辑：** iPhone Style Checkboxes 实际上将复选框元素作为第一个参数传递给 onChange 函数。this 关键字不会按预期工作。我已经相应地更新了我的答案。

```
var onchange_checkbox = ($('#eCommerce')).iphoneStyle({
    onChange: function(input) { 
        input.trigger('change');
    }
}); 
```

我希望这有帮助！

本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:53:31.153

检查小部件化的 DOM 使我相信以下内容应该有效：

```
$(function() {             
    var onchange_checkbox = ($('#eCommerce')).iphoneStyle({
        onChange: function() { 
            $(this).closest('.iPhoneCheckContainer').find('input').trigger('change');
        }
    });
}); 
```

如果可行，这将是“onChange”处理程序的通用解决方案：

*   不对元素 ID 做任何假设
*   相对于单击的小部件工作，以查找创建小部件（并且仍然存在）的底层输入元素（复选框/单选按钮），并触发其更改事件。

# xml - SAXParser 无法解析包含 <> 标记的属性

> ID：12613246
> 
> 赞同：0
> 
> 时间：2012-09-27T02:31:13.777
> 
> 标签：xml, saxparser

我有一个类似这样的 XML 定义。

```
<object text="this is a <a>some text</a>" /> 
```

我的 SAXParser 无法解析此 XML，因为它的属性中包含 <> 标记。无论如何要解决这个问题？

我尝试了一个在线语法检查器，但它失败了。那么这是否意味着您不能在 XML 属性中定义 <> 标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:40:47.337

这绝对不是有效的 XML。您需要确保按照 W3C 文档[http://www.w3.org/TR/xml/#dt-escape中的讨论转义这些字符](http://www.w3.org/TR/xml/#dt-escape)

为了完整起见，这里是你的例子，如果你逃避它会是什么样子

```
<object text="this is a &lt;a&gt;some text&lt;/a&gt;" /> 
```

或者;

```
<object text="this is a &#38;#60;a&#62;some text&#38;#60;/a&#62;" /> 
```

# python - Python 使用一个函数循环到其他函数。

> ID：12613248
> 
> 赞同：1
> 
> 时间：2012-09-27T02:31:23.967
> 
> 标签：python, loops

我正在制作一个 RPG 游戏，它在每场战斗中都引用了 fightmode()。因此，对于我的第一个场景，我将其设为“def game1()”，然后从那里转到 Fightmode()。Fightmode() 中的战斗结束后，我希望它转到 game2() 或 game3() 等。有没有办法让我这样做？到目前为止，这是我的代码。

虽然我还没有将 game2() 编码出来，但我希望我所说的可以理解。

```
import time
import random
global myhp
myhp = 20
mydmg = random.randint(2,5)
global mgold
mgold = 0

def start():
    print "Hello there.";   time.sleep(.5)
    myname = raw_input("What is your name? ")
    print "Welcome %s, this is..." %myname; time.sleep(.5)
    uname = myname.upper()
    print "\t\t\tTHE ADVENTURES OF %s" %uname;  time.sleep(.5)
    choice0 = ''
    allowed = ["y", "n"]
    while choice0.lower() not in allowed:
        choice0 = raw_input("\nWould you like to play the game? Y/N "); time.sleep(.5)
        choice0 = choice0.lower()
    if choice0 == "y":
        game1()
    if choice0 == "n":
        print "Alright, bye!"

def fightmode(name, hp, dmg_min, dmg_max, gold):
    global myhp
    print '\n\n\nYou are in a fight with %s' %name; time.sleep(.5)
    print '%s has %sHP' %(name, hp);    time.sleep(.5)
    while myhp > 0 and hp > 0:
        print '\n\t1\. Attack \n\t2\. Guard \n\t3\. Run away.';    time.sleep(.2)
        opt1= ''
        allowed = ["1", "2", "3"]   
        while opt1 not in allowed:
            mydmg = random.randint(2,5)
            dmg = random.randint(dmg_min, dmg_max)
            opt1 = raw_input("\nWhat will you do? ")
            if opt1 == "1":
                hp = hp - mydmg 
                myhp = myhp - dmg
                print "\nYou have inflicted %d damage on %s. %s's HP is %s" %(mydmg, name, name, hp);   time.sleep(.5)
                if hp >= 1:
                    print "%s attacked you and did %d damage. Your HP fell down to %s" %(name, dmg, myhp);  time.sleep(.5)
                    if myhp <= 0 :
                        print"\n\tYou have been defeated...";   time.sleep(.5)
                        restart = ''
                        allowed =["y", "n"]
                        restart = restart.lower()
                        restart = raw_input("\n\tWould you like to start over? ");  time.sleep(.5)
                        if restart == "y":
                            myhp = 20
                            game1()     
            if opt1 == "2":
                myhp = myhp + 5
                print "You are now guarding yourself. Your HP is now %d" %myhp; time.sleep(.5)
                myhp = myhp - dmg
                print "%s attacked you and did %d damage. Your HP fell down to %s" %(name, dmg, myhp);  time.sleep(.5)
            if opt1 == "3":
                chance = random.randint(0,11)
                if chance == 1:
                    print "You have sucessfully run away";  time.sleep(.5)
                else:
                    myhp = myhp - dmg
                    print "You failed to run away.";    time.sleep(.5)
                    print "%s attacked you and did %d damage. Your HP fell down to %s" %(name, dmg, myhp);  time.sleep(.5)
    if myhp <= 0 :
        print"\n\tYou have been defeated...";   time.sleep(.5)
        restart = ''
        allowed =["y", "n"]
        restart = restart.lower()
        restart = raw_input("\n\tWould you like to start over? ");  time.sleep(.5)
        if restart == "y":
            myhp = 20
            game1() 
    if hp <= 1 :
        global mgold
        print"You have defeated %s and earned %d gold." %(name, gold);  time.sleep(.5)
        mgold = mgold + gold
        print"You have %d gold." %mgold;    time.sleep(.5)

def fightmode0():
    print """\n\nThis is your first fight. You have 3 seconds each turn
if you fail to make a move in 3 seconds, you will lose your turn.

By "Attacking", you inflict damage on the enemy\'s HP, get it down to 0 to defeat him.
If your HP reaches 0, you will be defeated. 

By "Guarding", you will regain 10HP back, but that counts as your turn.
By defeating enemies, you gain gold Use gold to purchase upgrades 
when you come across a shop.

You can choose to "Run Away", but you will only have a 1/10 chance of it being sucessful
"""
    raw_input("\nPress any key to continue to battle"); time.sleep(.5)
    fightmode("Scrawny Thug", 15, 1, 5, 4)

def game1():
    print "\nYou wake up and find yourself locked in a room...";    time.sleep(.5)
    print "You think you're kidnapped.";    time.sleep(.5)
    print "Yea, you're probably kidnapped.";    time.sleep(.5)
    print "You hear footsteps approaching the door..."; time.sleep(.5)
    print "\n\t1\. Remain in fetal position \n\t2\. Attempt a sneak attack" ; time.sleep(.5)
    choice1 = ''
    allowed = ["1", "2"]
    while choice1 not in allowed:
        choice1 = raw_input("\nWhat will you do? ");    time.sleep(.5)
    print "\nThe doorknob rattles...";  time.sleep(.5)
    print "...";    time.sleep(.5)
    print "...";    time.sleep(.5)
    if choice1 == "1":
        print '"Hey!"'; time.sleep(.7)
        print '"Get up maggot!"';   time.sleep(.7)
        print 'You see that the thug is small and scrawny'; time.sleep(1)
        print 'He grabs you by your hair and pulls you up'; time.sleep(1)
        print "\n\t1\. Punch him in the face. \n\t2\. Do nothing" ;   time.sleep(1)
        choice1_1 = ''
        allowed = ["1", "2",]
        while choice1_1 not in allowed:
            choice1_1= raw_input("\nWhat will you do?? ");  time.sleep(.5)
        if choice1_1 == "1":
            print '\nYou punch the scrawny thug and he lets you go';    time.sleep(.5)
            print '"You\'re going to pay for that."';   time.sleep(.5)
            print '\n\t\t>>>>>>>>>>ENTERING FIGHT MODE';    time.sleep(.5)
            print '\n\t\t>>>>>>>>>>>>>>>>>>>>>>>>>>>>>';    time.sleep(.5)
            print '\n\t\t>>>>>>>>>>>>>>>>>>>>>>>>>>>>>';    time.sleep(.5)
            print '\n\t\t>>>>>>>>>>>>>>>>>>>>>>>>>>>>>';    time.sleep(.5)
            print '\n\t\t>>>>>>>>>>>>>>>>>>>>>>>>>>>>>';    time.sleep(.5)
            fightmode0()

game1() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:34:19.333

在你调用的底部`game1()`，添加调用`game2()`等：

```
game1()
game2()
game3() 
```

# android - Android应用程序不在模拟器或真实设备上运行

> ID：12613250
> 
> 赞同：3
> 
> 时间：2012-09-27T02:31:40.363
> 
> 标签：android, eclipse, emulation

我已经安装了 eclipse **（JUNO 版本）、SDK、ADT（20.0.3）**并通过 Developer.android.com 配置了它们。之后，我也在 E​​clipse **（Android 4.1 API 级别 16）**上制作了一个虚拟设备，但是当我在 Eclipse 中运行**“Hello World”**应用程序时，模拟器运行没有错误，但应用程序没有在模拟器上运行。真机也有问题。我使用 Windows 7/64 位和 HTC 不可思议的 S 手机。当我将设备连接到我的电脑时，windows 会检测到它，但 eclipse 没有检测到它。（USB 调试在设备上启用，USB 驱动程序在 Windows 上更新）。我尝试了不同的解决方案，例如重新安装 eclpise、SDK 和 ADT，删除 ADV 并创建新的，......但问题没有解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:48:02.073

你找到你的android sdk了吗？如果没有，请按以下方式定位 sdk：

```
open Eclipse->Windows->preferences->Android->Select your android sdk folder. 
```

那么请尝试运行你的程序。告诉我之后的状态。

# java - 在 Java 中创建虚拟模板方法

> ID：12613252
> 
> 赞同：4
> 
> 时间：2012-09-27T02:31:50.400
> 
> 标签：java, templates, virtual, resultset

我试图创造的情况如下：

我有一个包含静态模板方法的基类，该方法接收`ResultSet`数据库中的查询填充，并返回一个包含正确结果的列表。

我有一些派生自上面引用的类，它们代表数据库中的每个表，并且它们都有一个构造函数来接收`ResultSet`并构建对象。

我写的代码是：

```
public class TableBase 
{
    public static <T extends TableBase> List<T> getResults(ResultSet p_Rs) throws SQLException, InstantiationException, IllegalAccessException
    {
        List<T> v_Table = new ArrayList<T>();
        T v_TB = null;
        while(p_Rs.next())
            v_Table.add(new T(p_Rs));
        return v_Table;
    }
} 
```

我得到的错误是：`Cannot instantiate the type T`。

我很清楚，编译器有必要“知道”所有子类都将实现接收`ResultSet`变量的构造函数，但我无法创建“抽象构造函数”。

有没有人知道如何解决这个问题？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:16:19.553

您不能实例化泛型类型。

您可以使用任一工厂

```
 public static <T extends TableBase> List<T> getResults
 (ResultSet p_Rs, Factory<T> factory)

//Create instance using factory 
```

或 Class 作为类型。

```
public static <T extends TableBase> List<T> getResults
(ResultSet p_Rs, Class<T> type)
//type.newInstance() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:41:15.507

你不能那样做。您必须准确地告诉运行时类型。

也许你可以这样做：</p>

1.  `TableBase`必须有一个默认构造函数。
2.  `TableBase`必须有一个 setResultSet 方法。

    ```
    public class TableBase {
      public static <T extends TableBase> List<T> getResults(ResultSet p_Rs, Class<T> clazz)
            throws SQLException, InstantiationException, IllegalAccessException {
        List<T> v_Table = new ArrayList<T>();
        T v_TB = clazz.newInstance();
        while (p_Rs.next())
            v_TB.setResultSet(p_Rs);
        v_Table.add(v_TB);
        return v_Table;
      }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:24:36.510

您可以使用反射，例如：

```
while(p_Rs.next())
        v_Table.add(newInstance(T, p_Rs));

public <T extends TableBase> T newInstance(T t, ResultSet p_Rs){
       try {
            Constructor constructor = t.getClass().getDeclaredConstructor(ResultSet.class); 
            return (T)constructor.newInstance(p_Rs);

        } catch (Exception e) {
            throw new RuntimeException();
        } 

} 
```

# facebook - Heroku Toolbelt - git：找不到命令

> ID：12613253
> 
> 赞同：1
> 
> 时间：2012-09-27T02:32:14.533
> 
> 标签：facebook, git, api, bash, heroku

我在 Mac OSX (10.6.8) 上工作，我刚刚安装了 Heroku 工具带，希望能尝试制作 facebook 应用程序。我创建了一个 facebook 应用程序，根据 Heroku 的说明，我应该可以通过在命令行中输入它来编辑它：

```
git clone git@heroku.com:false-title-1234.git -o heroku 
```

Heroku Toolbelt 已安装并且我已登录。但是当我运行上面的命令时，我收到此错误：

```
-bash: git: command not found 
```

我以前没有 git，显然我仍然没有它。但我认为它是 Heroku 工具带的一部分？对于互联网上的其他人来说，它的 git 部分似乎“正常工作”，因为我无法找到有关 heroku 工具带的 git 组件问题的参考。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:34:30.610

只需要自己安装 git。Heroku-toolbelt 可能会或可能不会随 git 一起提供，但单独安装 git 是一项相对简单的任务。

以下是在 OSX 上安装 git 的一些说明：[https ://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

# c++ - Visual Studio 中的 OpenGL - GLEW 的问题

> ID：12613254
> 
> 赞同：2
> 
> 时间：2012-09-27T02:32:16.157
> 
> 标签：c++, visual-studio, opengl, linker, glew

我目前正在关注 openglbook.com 教程（[设置](http://openglbook.com/setting-up-opengl-glew-and-freeglut-in-visual-c/)）（[教程](http://openglbook.com/the-book/chapter-1-getting-started/)）并且很早就遇到了问题。我收到以下两个错误：

```
1>main.obj : error LNK2019: unresolved external symbol __imp__glewGetErrorString@4 referenced in function _Initialize
1>main.obj : error LNK2019: unresolved external symbol __imp__glewInit@0 referenced in function _Initialize 
```

我已经下载并编译了 freeglut 2.8.0 以及 glew 1.9.0 二进制文件。我已将库和包含分别复制到 C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\Lib 和 Include 中。Lib 和 Include 路径也已添加到 Additional Library/Include 目录下的我的项目属性中。

我还在链接器->输入->附加依赖项中定义了 glew32.lib 和 freeglut.lib。

我在主文件的顶部包含了 GL/glew.h 和 GL/freeglut.h。

我错过了什么？我发现的所有其他线程都已通过将目录添加到项目属性中来解决。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T07:43:12.723

这意味着您尝试将 GLEW 用作 DLL（因为您的应用程序会查找以 __imp 开头的名称，例如 "import" ），但您没有将 GLEW 构建为 DLL（否则它会起作用）。

3 种可能的选择：

*   `GLEW_BUILD`使用预处理器定义（项目->属性->C++->预处理器->附加定义）重建 GLEW 。然后重建您的应用程序。
*   根本不要构建 GLEW。只需将 glew.c 放入应用程序的项目中。这是最简单的方法。
*   （我最喜欢的）`GLEW_STATIC`在应用程序的预处理器定义中定义，然后重新构建。

# c - 使用 perf 或其他方式获取 C 程序的运行时间（或其他统计信息）

> ID：12613262
> 
> 赞同：1
> 
> 时间：2012-09-27T02:34:19.470
> 
> 标签：c, perf

我需要编写一个 C 程序（用于确定缓存大小的学校作业）。我已将其用作`clock()`获取时间信息的一种方式。但**[被告知](https://stackoverflow.com/questions/12594208/c-program-to-determine-levels-size-of-cache)**这可能会导致结果不准确。

所以我正在考虑使用最近实验室中引入的其他库 perf 或 papi 来记录性能。但我们使用它们的方式是通过命令行：

```
perf stat ./test 
```

我认为可以在应用程序中使用 perf 吗？我是 C 新手，更习惯于 Python/JS/Java 等高级语言。所以我想我需要创建一个 make 文件，包含库等。还有什么功能？

我看到[http://www.rzg.mpg.de/computing/hardware/BGP/perf.html](http://www.rzg.mpg.de/computing/hardware/BGP/perf.html)

```
libperf.a
    perf library for MPI programs.
libperfhpm.a
    Use perf instrumentation to call hpmtoolkit.
libperfdummy.a
    Provides dummies for the perf instrumentation. You can link against this library to avoid the perf overhead in production runs. 
```

我用哪一个？它不是 MPI 程序。那我该如何实际使用呢？我正在使用 C 和 gcc。这看起来像编译但是......什么`mpixlf90`

```
mpixlf90_r -o tperf tperf.f -L/usr/local/lib -lperf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:52:47.673

有很多 C 和 C++ 程序的性能分析工具（提供有关运行时间、内存消耗的信息），其中一些是，

1.  [瓦尔格林德](http://valgrind.org/)

2.  [谷歌性能工具](http://code.google.com/p/gperftools/wiki/GooglePerformanceTools)

希望这就是你要找的！

# javascript - “未定义”有时会出现在我的 ASP.NET 应用程序的 URL 中（不知何故与谷歌有关？）

> ID：12613264
> 
> 赞同：6
> 
> 时间：2012-09-27T02:34:28.913
> 
> 标签：javascript, asp.net, url, undefined

一些用户在使用我的 Web 应用程序时反复遇到一个非常神秘的问题。

在使用它的过程中，他们会单击一个按钮或链接，将他们带到另一个页面，但是会出现“找不到页面”错误，因为 URL 类似于：

[http://www.correctwebsitename.com/](http://www.correctwebsitename.com/)**未定义**

我认为这可能是我的应用程序中的一个**javascript 错误**：通过选择一个页面名称（可能带有一些参数）完成的重定向，其中一个值是错误的，导致页面名称 =“未定义”。但是**我的应用程序中的任何地方都没有这样的代码**，而且这**发生在许多不同的页面上，似乎是随机的**。

似乎更频繁发生的一件事是，如果用户最初是通过**单击 gmail 中电子邮件消息中的链接**登录的。但一位将链接 URL 剪切并粘贴到浏览器窗口中的用户表示，这种情况仍然存在。谷歌搜索显示一些暗示，**某种谷歌重定向或缓存正在幕后发生**。

有任何想法吗？

**编辑：**
我没有收到任何熟悉 gmail 链接等如何工作的人的回复，有人知道谷歌专家“闲逛”的 SO 标签是什么吗？

**编辑2：**
奖励有用信息和临时解决方法的最佳答案，但仍然对问题的真正解决方案感兴趣，因此不接受解决方法作为解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:13:07.087

我相信你对 gmail 对链接做一些事情是正确的。请参阅下面的 gmail 图片：

![邮箱](../Images/caf12ebfcb4cf7a9abf69b5cd25410a4.png)

*非标准标题字段通常通过在字段名称前加上 X- 来标记*

它可能表现得像......哦，好吧，谷歌，并检查一切。

为了阻止谷歌搜索跟踪我的点击，我必须创建一个用户脚本来重写他们的一个功能：

```
rwt = function(){}; 
```

也许你可以为 gmail 尝试类似的东西。

* * *

> *什么是rwt？*

`rwt()`是来自 google 搜索的 javascript 函数，它重写链接以跟踪您访问过的站点。

例如，搜索“greasemonkey”会显示 Mozilla 插件页面作为第一个结果。点击它打开

`https://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCUQFjAA&url=https%3A%2F%2Faddons.mozilla.org%2Fpt-BR%2Ffirefox%2Faddon%2Fgreasemonkey%2F&ei=iWNtUIXjIoyQ8wTxv4DQAQ&usg=AFQjCNEO9EJcHp9rAmKyD_XZF2Bt6hs_YQ&sig2=P19xVUsD-Q1G_9AiUBP3PQ`

然后重定向到

`https://addons.mozilla.org/pt-BR/firefox/addon/greasemonkey/`

上图和`rwt()`案例只是为了向您展示 gmail 更改链接的可能性很大，因此这可能与您的问题有关。

* * *

由于在 gmail 方面您无能为力，也许您可​​以通过重定向`http://www.correctwebsitename.com/undefined`到`http://www.correctwebsitename.com`您希望用户看到的任何其他页面来在您的服务器上修复它。

因此，无论是来自 gmail 还是任何其他推荐人，每次客户登陆时都会`http://www.correctwebsitename.com/undefined`将他重定向到另一个页面。

* * *

> *所以也许我可以弄清楚如何将它们发送回它们来自的页面*

**ASP**

```
if not request.UrlReferrer is nothing then
    response.redirect (request.UrlReferrer.tostring)
end if 
```

**JS**（为此，您必须实际创建一个名为 的页面`undefined`）

```
if (window.location.href.toLowerCase().indexOf('undefined') > -1) {
    // this works
    window.location.href = document.referrer;

    // this works too (uncomment to enable)
    // history.back();
} 
```

*请记住，如果用户直接输入网址或使用收藏夹中的链接，则不会没有推荐人*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:41:13.247

我建议您在应用程序中检查以下内容。

**除了您拥有的代码之外，您的应用程序中是否有任何代码？**

第三方应用程序可以注入代码，例如“AddThis”有时会向您的网址添加一个额外的#parameter，在您的情况下，很明显javascript正在尝试使用location.href作为“未定义”的东西很多js开发者都会遇到。

通过添加 # 将有助于进行跨站点通信，一些错误也可能在这里引起问题。

**在您的代码中完整搜索“location.href”，看看您是否在任何地方使用过它。**

**有时浏览器上的第三方插件也可能导致此问题**

希望这些可以帮助您缩小问题范围。

如果您无法在任何地方找到问题，我建议您覆盖网络服务器上的 404 功能并使用 Referrer 实施解决方案。

# java - 存储过程和准备好的语句错误

> ID：12613269
> 
> 赞同：0
> 
> 时间：2012-09-27T02:34:48.987
> 
> 标签：java, stored-procedures, db2, prepared-statement

我正在从我的 Java 应用程序调用存储过程，并在设置输入参数时收到以下错误。

1：调用程序的Java方法：

```
public int callProc(String userid, String program_id, String procName)
        throws SQLException {

    int returnCode = -1;

    try {

        CallableStatement stmt;

        String sql = "CALL " + procName + "(?,?,?,?,?)";
        stmt = connection.prepareCall(sql);

        System.out.println("Calling stored procedure [" + procName + "]");

        // call setXXX() method to set values for input parameters
        // and input-output parameters
        System.out.println("jdbcadapter->callproc setting 1 parameter "+stmt);
        stmt.setObject(1, userid, java.sql.Types.CHAR);
        System.out.println("jdbcadapter->callproc setting 2 parameter "+sql);
        stmt.setObject(2, program_id, java.sql.Types.CHAR);
        System.out.println("jdbcadapter->callproc setting 3 parameter "+sql);
        stmt.setObject(3, session_id, java.sql.Types.CHAR);
        System.out.println("jdbcadapter->callproc setting 4 parameter "+sql);
        stmt.setObject(4, " ", java.sql.Types.CHAR);
        System.out.println("jdbcadapter->callproc setting 5 parameter "+sql);
        stmt.setObject(5, " ", java.sql.Types.CHAR);
        System.out.println("jdbcadapter->callproc setting 6 parameter "+sql);
        // call registerOutParameter() method to define the data types for output parameters
        stmt.registerOutParameter(4, java.sql.Types.CHAR); // rc
        System.out.println("jdbcadapter->callproc setting 7 parameter "+sql);
        stmt.registerOutParameter(5, java.sql.Types.CHAR); // result message
        System.out.println("jdbcadapter->callproc setting 8 parameter "+sql);

        stmt.execute();
        System.out.println("jdbcadapter->callproc after execute "+sql);

        String rc = stmt.getString(4);
        System.out.println("jdbcadapter->callproc after execute "+rc);
        String message = stmt.getString(5);
        System.out.println("jdbcadapter->callproc after execute "+message);
        Integer return_code = new Integer(rc.trim());
        System.out.println("jdbcadapter->callproc after execute "+return_code);
        returnCode = return_code.intValue();
        System.out.println("jdbcadapter->callproc after execute "+returnCode);
        return_message = message.trim();
        System.out.println("jdbcadapter->callproc after execute "+return_message);
        System.out.println("Returned code from stored procedure is ["+ rc.trim() + "]");
        stmt.close();

    } catch (Exception e) {
        throw ((SQLException) e);
    }

    return returnCode;

} // end callProc() 
```

在 stmt 中设置 USER ID 时出现问题

```
stmt.setObject(1, userid, java.sql.Types.CHAR); 
```

数据库端存储过程的定义

```
CREATE PROCEDURE "CDR     "."SPUBASE"
                (
                IN      USERID   CHARACTER(12),
                IN      PROGRAM_ID   CHARACTER(20),
                IN      SESSION_ID   CHARACTER(27),
                OUT     SQLCODE   CHARACTER(254),
                OUT     SQLMESSAGE   CHARACTER(254)
                )
                DYNAMIC RESULT SETS 0
                SPECIFIC SQL040816123726847
                EXTERNAL NAME '/cdrtst/sqllib/function/SPUBASE!SPUBASE'
                LANGUAGE C
                PARAMETER STYLE DB2DARI
                NOT DETERMINISTIC
                FENCED NOT THREADSAFE
                MODIFIES SQL DATA
                NO DBINFO; 
```

错误是

```
SQLException: DB2 SQL Error: SQLCODE=-440, SQLSTATE=42884, SQLERRMC=SPUBASE;PROCEDURE, DRIVER=4.1.85 
```

任何人都可以提出可能导致这种情况的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:21:50.480

从this [page](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z9.doc.codes%2Fsrc%2Ftpc%2Fn440.htm)解释原因`SQLCODE: -440`，其中一个原因是

> 例程引用中包含正确数量的参数，但一个或多个参数的数据类型不正确。

我怀疑您的以下方法调用

```
stmt.setObject(1, userid, java.sql.Types.CHAR); 
```

应该替换为

```
stmt.setString(1, userid); 
```

或者

```
stmt.setObject(1, userid, java.sql.Types.VARCHAR); 
```

我更喜欢前者，即 setString 并将其留给驱动程序根据底层 DB/列进行适当的转换。

这同样适用于其他`statement.set*`方法，调用适当的 set* 方法，如 setString、setInt 等，

# c# - C#：如何有效地复制大量结构？

> ID：12613271
> 
> 赞同：5
> 
> 时间：2012-09-27T02:34:51.193
> 
> 标签：c#, .net

> **可能重复：**
> [C#：复制数组的任何更快的方法？](https://stackoverflow.com/questions/5099604/c-any-faster-way-of-copying-arrays)

我有一个这样的结构数组：

```
struct S
{
    public long A;
    public long B;
}

...
S[] s1 = new S[1000000];
...
S[] = new S[s1.Length];
// Need to create a copy here. 
```

我可以使用不安全模式并将结构的源数组复制到字节数组，然后从字节数组复制到结构的目标数组。但这意味着我将不得不分配一个巨大的中间字节数组。有没有办法避免这种情况？是否可以以某种方式将目标数组表示为字节数组并直接复制到那里？

```
unsafe
{
    int size = Marshal.SizeOf(s0[0]) * s0.Length;
    byte[] tmp = new byte[size];
    fixed (var tmpSrc = &s0[0])
    {
        IntPtr src = (IntPtr)tmpSrc;
        Marchal.Copy(tmpSrc, 0, tmp, 0, size);
    }

    // The same way copy to destination s1 array...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:06:08.967

在 的情况下`Buffer.BlockCopy`，它将 bytes[] 复制到 byte[] 而不是数组中的逻辑元素。

但这实际上取决于具体情况。

请先测试您的代码`Array.Copy`并查看。

# load - 如何有效地将垂直线数据从内存加载到霓虹灯寄存器中

> ID：12613273
> 
> 赞同：0
> 
> 时间：2012-09-27T02:35:07.027
> 
> 标签：load, arm, neon

我想从图像块中读取一条垂直数据行，即：我想获取每行的第一个数据（行长等于块宽）。

我认为下面的代码不好。有更好的实现吗？（r5中的数据地址，r1中的行长）

```
vld1.u8     d3[0],  [r5],   r1
vld1.u8     d3[1],  [r5],   r1
vld1.u8     d3[2],  [r5],   r1
vld1.u8     d3[3],  [r5],   r1
vld1.u8     d3[4],  [r5],   r1
vld1.u8     d3[5],  [r5],   r1
vld1.u8     d3[6],  [r5],   r1
vld1.u8     d3[7],  [r5],   r1
vld1.u8     d4[0],  [r5],   r1
vld1.u8     d5[0],  [r5],   r1
vld1.u8     d5[1],  [r5],   r1    
vld1.u8     d5[2],  [r5],   r1
vld1.u8     d5[3],  [r5],   r1   
vld1.u8     d5[4],  [r5],   r1
vld1.u8     d5[5],  [r5],   r1    
vld1.u8     d5[6],  [r5],   r1
vld1.u8     d5[7],  [r5],   r1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:55:57.193

NEON 仅直接支持步幅最大为 4 的非连续加载（通过 VLDn 指令，其中 n 是步幅大小）。由于您的行长可能比这大得多，除了像您的代码代码那样单独加载每个元素之外，我看不到其他方法可以做您想做的事情。

但是，如果您需要将此后处理步骤*不仅*应用于第一列，而且应用于所有列，那么您可以一次处理 8 个（或 16 个，如果您使用 Q 寄存器）列，而不是单独处理它们。当然，这是否可行取决于您的算法。

理想情况下，您会进一步增加块大小，并一次处理 ss 多列以适合一个高速缓存行（如果您的元素大小为 8 位，大多数 ARM 上为 64）。否则，如果您的图像有很多行，则包含第一行的缓存行将在您处理完最后一行时从缓存中删除，并且必须重新获取它们以处理下一个块的列。

# function - 函数指针可以指向STL容器的成员函数吗

> ID：12613283
> 
> 赞同：0
> 
> 时间：2012-09-27T02:36:16.740
> 
> 标签：function, pointers, stl

例如，如果我有

```
deque<int> a; 
```

而我想用一个函数指针指向`a.front()`，`a.back()`，`a.push_front()`，`a.push_back()`我能做到吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:39:48.713

指向成员函数的指针与常规指针是不同类型的函数指针，因为需要传递`this`. 最好的解决方案是这样实现一个包装函数：

```
template<typename T>
T deque_front(std::deque<T> *q) {
  return q->front();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:44:17.870

要调用（非静态）成员函数，您需要一个对象来调用它（以及函数的参数）。这是通过让成员函数采用（隐藏的）额外参数`this`（有效地）来实现的。

如果您使用的是 c++11，您可以编写一个 lambda 来执行此操作，或者使用`std::bind`将 deque 的实例和成员函数绑定在一起。

# php - 在 Constant Contact 中简单检查电子邮件地址

> ID：12613286
> 
> 赞同：1
> 
> 时间：2012-09-27T02:36:48.100
> 
> 标签：php, rest, constantcontact

我找不到任何关于使用 Constant Contact REST API 检查电子邮件地址是否在列表中的文档。

以下似乎完全没用：

```
include_once('cc_class.php');
$ccContactOBJ = new CC_Contact("basic", $cckey, $ccuser, $ccpass);
if(($_SERVER['REQUEST_METHOD']=="POST") && !empty($_REQUEST['member-submit'])) {
$contact = $ccContactOBJ->getSubscribers(urlencode($_POST['MemberEmail']));

if (empty($contact['items'])) {
    $message = 'You are not listed in our database.';      
}
else {
    $message = 'You are already listed in our database';     
}
echo $message; 

} 
```

有人知道如何返回真值或假值吗？

# django - 将登录凭据作为 POST 调用中的数据参数传递给 REST API 是否存在安全问题？

> ID：12613287
> 
> 赞同：3
> 
> 时间：2012-09-27T02:36:49.807
> 
> 标签：django, rest, tastypie

我有一个使用 TastyPie 编写的带有 RESTful API 的 django Web 应用程序。我想允许我的移动应用程序访问使用用户名和 api_keys 的 API，但一直在努力了解将 api_key 带回移动客户端的最佳方法。

我正在关注此处提供的资源代码： [如何使用美味派登录 django](https://stackoverflow.com/questions/11770501/how-can-i-login-to-django-using-tastypie)

我的问题是，这是否是一种在 POST 请求中将用户名和密码作为数据参数传递的安全方法。我应该没事吧？

以下是发布请求的示例：

> 使用数据发布到[http://myapp.com/api/user/login](http://myapp.com/api/user/login) { 'username' : 'me', 'password' : 'l33t' }。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:59:32.223

虽然可以嗅探通过 POST 请求发送的数据，但这并不一定意味着您不应该使用它来向 RESTful API 提交用户凭据。所以，直接回答你的问题：

*   发布用于身份验证的用户名和密码是不安全的。它可以被嗅探。
*   话虽如此，以我的经验，以这种方式提交用户凭据是经常发生的事情。一个好的做法是在用户通过身份验证后向用户返回一个记住令牌（或在您的情况下为 API 密钥）。除了持久会话之外，优点是如果某些恶意用户掌握了 API 密钥，则可以轻松重置它，而无需重置用户的用户名/密码（尽管这样做可能是个好主意）。当然，缺点是记住令牌/API 密钥通常存储在不安全的地方，例如浏览器 cookie/错误地存储在一些 github 存储库的源中。

因此，发布身份验证凭据是否可以防嗅，不。你能做到吗/完成了吗，是的。当然，如果您需要更高的安全性，您可以查看 HTTPS 在这种情况下是否适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:38:21.837

不，发送明文凭据永远不安全。任何嗅探流量（包括嗅探流量并将其全部转储到大日志文件中）的人都将拥有凭据。

# android - Junit 使用 ActivityInstrumentationTestCase2 - 构造函数中的异常：存根

> ID：12613292
> 
> 赞同：6
> 
> 时间：2012-09-27T02:37:38.757
> 
> 标签：android, intellij-idea, junit4

我刚刚开始在 Android 测试中使用 JUNIT。我目前正在尝试使用它来测试 DAO 对象。我使用 intellij 作为 IDE。

我已经收集到我应该使用扩展 ActivityInstrumentationTestCase2 的测试类，并使用那里的检测工具来获取启动 DAO 对象所需的上下文。

**这是我的测试课：**

```
package br.com.pcontop.vigilantes.model;

import android.content.*;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.res.AssetManager;
import android.content.res.Resources;
import android.database.DatabaseErrorHandler;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.test.ActivityInstrumentationTestCase2;
import br.com.pcontop.vigilantes.view.PaginaDia;
import junit.framework.TestCase;

import java.io.*;

public class EntradaPontosDAOTest extends ActivityInstrumentationTestCase2<PaginaDia> {
    Context context;

    public EntradaPontosDAOTest() {
        super("br.com.pcontop.vigilantes.view", PaginaDia.class);

    }

    public void setUp() throws Exception {
        super.setUp();
        context = getInstrumentation().getContext();
    }
    public void testBusqueEntradasComecandoCom() throws Exception {
        //assertNotNull(context);
        EntradaPontosDAO entradaPontosDAO = new EntradaPontosDAO(context);
        //assertNotNull(entradaPontosDAO);

    }
} 
```

**在我运行测试时，会引发以下异常：**

```
junit.framework.AssertionFailedError: Exception in constructor: testBusqueEntradasComecandoCom (java.lang.RuntimeException: Stub!
    at android.test.InstrumentationTestCase.<init>(InstrumentationTestCase.java:5)
    at android.test.ActivityTestCase.<init>(ActivityTestCase.java:5)
    at android.test.ActivityInstrumentationTestCase2.<init>(ActivityInstrumentationTestCase2.java:5)
    at br.com.pcontop.vigilantes.model.EntradaPontosDAOTest.<init>(EntradaPontosDAOTest.java:33)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at junit.framework.TestSuite.createTest(TestSuite.java:61)
    at junit.framework.TestSuite.addTestMethod(TestSuite.java:294)
    at junit.framework.TestSuite.addTestsFromTestCase(TestSuite.java:150)
    at junit.framework.TestSuite.<init>(TestSuite.java:129)
    at org.junit.internal.runners.JUnit38ClassRunner.<init>(JUnit38ClassRunner.java:71)
    at org.junit.internal.builders.JUnit3Builder.runnerForClass(JUnit3Builder.java:14)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:98)
    at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:84)
    at com.intellij.junit4.JUnit46ClassesRequestBuilder.collectWrappedRunners(JUnit46ClassesRequestBuilder.java:69)
    at com.intellij.junit4.JUnit46ClassesRequestBuilder.getClassesRequest(JUnit46ClassesRequestBuilder.java:40)
    at com.intellij.junit4.JUnit4TestRunnerUtil.buildRequest(JUnit4TestRunnerUtil.java:81)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
) 
```

**有问题的行是这样的，在构造函数中：**

```
 super("br.com.pcontop.vigilantes.view", PaginaDia.class); 
```

我已经尝试将 junit jar 放在项目类路径中的其他 jar 上。它现在在扩展 TestCase 的测试中运行良好。这仍然不能解决上面的测试。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:26:56.950

我落在了这个[链接](http://mcondev.wordpress.com/2010/06/09/java-lang-runtimeexception-stub-at-junit-framework-testsuite-testsuite-java7-at-org-junit-internal-runners-junit38classrunner-junit38classrunner-java67-at-org-junit-internal-builders-junit3/#comment-201)上，希望它会有所帮助。您需要在构建路径设置中将 junit 移到依赖链上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:04:14.203

您应该在 Android 设备或模拟器中运行您的 Android 测试用例，而不是在您的开发计算机上。在`android.jar`您的 SDK 中找到的仅提供存根。

# java - ClassCastException：javax.swing.plaf.FontUIResource 无法转换为 javax.swing.InputMap

> ID：12613293
> 
> 赞同：4
> 
> 时间：2012-09-27T02:37:40.207
> 
> 标签：java, swing, components

在java中运行一个swing应用程序，我在我的程序中遇到了这个异常。值得注意的是，这并不是每次我运行程序时都会出现的。

完整的堆栈跟踪：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at org.backend.utils.importing.Loading$1.run(Loading.java:54)
    at org.backend.utils.importing.Loading.loadEverything(Loading.java:61)
    at org.main.BishopCarrollSchoolTracker.main(BishopCarrollSchoolTracker.java:70)
Caused by: java.lang.ClassCastException: javax.swing.plaf.FontUIResource cannot be cast to javax.swing.InputMap
    at javax.swing.plaf.basic.BasicButtonListener.getInputMap(BasicButtonListener.java:102)
    at javax.swing.plaf.basic.BasicButtonListener.installKeyboardActions(BasicButtonListener.java:78)
    at javax.swing.plaf.basic.BasicButtonUI.installKeyboardActions(BasicButtonUI.java:121)
    at javax.swing.plaf.basic.BasicButtonUI.installUI(BasicButtonUI.java:73)
    at javax.swing.JComponent.setUI(JComponent.java:662)
    at javax.swing.AbstractButton.setUI(AbstractButton.java:1782)
    at javax.swing.plaf.synth.SynthArrowButton.updateUI(SynthArrowButton.java:34)
    at javax.swing.AbstractButton.init(AbstractButton.java:2149)
    at javax.swing.JButton.<init>(JButton.java:118)
    at javax.swing.JButton.<init>(JButton.java:73)
    at javax.swing.plaf.synth.SynthArrowButton.<init>(SynthArrowButton.java:23)
    at javax.swing.plaf.synth.SynthScrollBarUI$2.<init>(SynthScrollBarUI.java:325)
    at javax.swing.plaf.synth.SynthScrollBarUI.createIncreaseButton(SynthScrollBarUI.java:325)
    at javax.swing.plaf.basic.BasicScrollBarUI.installComponents(BasicScrollBarUI.java:225)
    at javax.swing.plaf.basic.BasicScrollBarUI.installUI(BasicScrollBarUI.java:147)
    at javax.swing.JComponent.setUI(JComponent.java:662)
    at javax.swing.JScrollBar.setUI(JScrollBar.java:190)
    at javax.swing.JScrollBar.updateUI(JScrollBar.java:210)
    at javax.swing.JScrollBar.<init>(JScrollBar.java:144)
    at javax.swing.JScrollBar.<init>(JScrollBar.java:159)
    at javax.swing.JScrollPane$ScrollBar.<init>(JScrollPane.java:698)
    at javax.swing.JScrollPane.createHorizontalScrollBar(JScrollPane.java:794)
    at javax.swing.JScrollPane.<init>(JScrollPane.java:282)
    at javax.swing.JScrollPane.<init>(JScrollPane.java:305)
    at org.gui.base.generic.panels.ListTablePanel.<init>(ListTablePanel.java:44)
    at org.gui.base.main.internal.WorkPanel.<init>(WorkPanel.java:28)
    at org.gui.base.main.internal.InternalPanel.<clinit>(InternalPanel.java:38)
    ... 3 more 
```

导致异常的行（在我的源代码中）：

```
public static final WorkPanel WORK = new WorkPanel(); 
```

前往

```
super(new WorkTable(AllWork.getElements(), true, true, true, true, true, true, true),
            new WorkTable(AllWork.getElements(), true, true, true, true, true, true, true, true)); 
```

到

```
public ListTablePanel(RefreshableTable m, RefreshableTable t) {
    this.main = m;
    this.totals = t;

    setLayout(LayoutFactory.createLayout());

    JScrollPane pane = new JScrollPane(main);

    main.setAutoCreateRowSorter(false);

    totals.setFont(totals.getFont().deriveFont(Font.BOLD));
    totals.setEnabled(false);

    pane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    add(pane, LayoutFactory.newFactory().setFill(GridBagConstraints.BOTH).
            setY(0).setWeightX(1).setWeightY(1));
    add(totals, LayoutFactory.newFactory().setFill(GridBagConstraints.BOTH).
            setY(1).setWeightX(1).setInsets(new Insets(0, 2, 0, 17)));
} 
```

我源代码中的最后一段代码是`JScrollPane`.

我不明白为什么会抛出这个异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T02:45:54.437

每当我看到这个：

> 在java中运行一个swing应用程序，我在我的程序中遇到了这个异常。值得注意的是，***这并不是每次我运行程序时都会出现的。***

警钟在我脑海中响起，我想“我是否正确处理 Swing 线程”？因为 Swing 线程意外导致并不总是发生的奇怪错误并不少见。

那么，您是否通过首先在事件线程上启动和显示 Swing GUI 来正确处理 Swing 线程？IE，

```
private static void createAndShowGui() {

  // create and display my GUI here

}

public static void main(String[] args) {
  SwingUtilities.invokeLater(new Runnable() {
     public void run() {
        createAndShowGui();
     }
  });
} 
```

顺便说一句，您没有使用 Nimbus 或其他外观吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:26:25.763

修复了错误。发现我在 EDT 同时做 GUI 的东西。构造函数用了太久`invokeLater()`，开始用了`invokeAndWait()`。

# nlp - 词性标注：标注未知词

> ID：12613294
> 
> 赞同：4
> 
> 时间：2012-09-27T02:37:43.290
> 
> 标签：nlp, pos-tagger, oov

在词性标注器中，给定句子的最佳可能标签是使用 HMM 确定的

```
 P(T*) = argmax P(Word/Tag)*P(Tag/TagPrev)
              T 
```

但是当训练语料库中没有出现“Word”时，P(Word/Tag) 对给定的所有可能的标签产生零，这就没有选择最好的空间了。

我尝试了几种方法，

1) 为所有未知词分配少量概率，P(UnknownWord/AnyTag)~Epsilon... 意味着这通过分配恒定概率完全忽略了未知词的 P(Word/Tag)。所以对未知词的决策是先验概率。正如预期的那样，它不会产生好的结果。

2）拉普拉斯平滑我对此感到困惑。我不知道（1）和这个有什么区别。我理解拉普拉斯平滑的方式将常数概率（lambda）添加到所有未知和已知单词。所以所有未知单词将获得恒定概率（lambda 的分数）并且已知单词概率将相对相同，因为所有单词的概率增加了拉姆达。拉普拉斯平滑与前一个相同吗？

*) 有没有更好的方法来处理生词？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T02:51:33.203

您的两种方法相似，但是，如果我理解正确，它们在一个关键方面有所不同。在 (1) 中，您将额外的质量分配给未知单词的计数，在 (2) 中，您将额外的质量分配给所有计数。你肯定想做（2）而不是（1）。

拉普拉斯平滑的问题之一是它对未知词给予了过多的提升，并且过多地降低了高概率词的概率（相对而言）。您的版本 (1) 实际上会使这个问题恶化。基本上，它会过度平滑。

拉普拉斯平滑词对于 HMM 来说是可以的，但这并不是很好。大多数人都会做加一平滑，但你可以尝试加一之类的东西。

如果您想超越这种幼稚的平滑方法，请查看[Jason Eisner 的 HMM 教程](http://www.cs.jhu.edu/~jason/465/hw-hmm/hw-hmm.pdf)附录中所述的“单次平滑” 。这里的基本思想是，对于未知词，应该为出现更广泛低频词的标签赋予更大的概率质量。例如，由于标签 NOUN 出现在大量不同的词上，而 DETERMINER 出现在少量不同的词上，所以一个看不见的词更有可能是一个名词。

如果你想变得更漂亮，你可以使用从非参数贝叶斯统计中提取的中国餐厅流程模型，对看不见的词/标签组合进行先验分布。 [Kevin Knight 的贝叶斯推理教程](http://www.isi.edu/natural-language/people/bayes-with-tears.pdf)有详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T01:07:16.140

我认为基于 HMM 的[TnT 标注器](http://www.coli.uni-saarland.de/~thorsten/tnt/)提供了一种更好的方法来处理未知单词（参见[TnT 标注器论文](http://www.coli.uni-saarland.de/~thorsten/publications/Brants-ANLP00.pdf)中的方法）。

保加利亚语、捷克语、荷兰语、英语、法语、德语、印地语、意大利语、葡萄牙语、西班牙语、瑞典语、泰语和越南语等 13 种语言的 TnT 和其他两个词性和形态标记器的准确度结果（已知词和未知词），可以在[这篇文章](http://arxiv.org/abs/1412.4021)中找到。

# php - php 肥皂空输出

> ID：12613298
> 
> 赞同：1
> 
> 时间：2012-09-27T02:38:26.623
> 
> 标签：php, soap

我是一位经验丰富的 PHP 程序员，但实际上我对 SOAP 毫无头绪。现在我必须使用它，因为我的客户需要自动生成 DHL 批次标签。我需要一些简单有效的帮助。

所以我向 DHL 发送了一个原始 XML 请求，我从他们的示例程序中复制了消息，但我总是得到一个空结果（没有错误）。我的 PHP 代码如下：

```
require_once('nusoap/lib/nusoap.php');

$endpoint = "https://test-intraship.dhl.com/intraship.57/jsp/Login_WS.jsp";

$client = new nusoap_client($endpoint, false);

$msg = $client->serializeEnvelope("
<soap:信封 xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"
 xmlns:cis=\"http://dhl.de/webservice/cisbase\" xmlns:de=\"http://de.ws.intraship\">
<soap:标题>
<cis:Authentification><cis:user>bzalewski</cis:user>

(...)

");

$result=$client->send($msg, $endpoint);

回显$结果；

```

如前所述，消息只是被复制，所以它必须是好的。我也尝试了另一个端点：[http://test-intraship.dhl.com/ws/1_0/ISService/DE.wsdl](http://test-intraship.dhl.com/ws/1_0/ISService/DE.wsdl)，但也没有结果（没有错误）。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:11:25.523

使用`soap_client`时不需要传递 raw `XML`。相反，您查看`WSDL`并决定要调用哪个 Web 服务函数，以及它需要哪些参数。然后通过传递 wsdl url 以及是否要跟踪（它有助于调试和填充）来创建一个肥皂客户端对象。然后使用这个soap客户端对象来调用你想要调用的任何web服务函数。如果函数调用需要参数，请将它们作为数组传递。我在下面发布了一个示例代码，它使用`WSDL`您提供的并调用它的`getVersion`函数。请注意，这个函数不需要参数，所以我没有传递任何东西。希望这可以帮助您入门..

```
<?
$client = new SoapClient('http://test-intraship.dhl.com/ws/1_0/ISService/DE.wsdl', array('trace' => 1));
$res = $client->getVersion();
print_r($res); 
?> 
```

这将从 DHL Web 服务返回以下值：

```
stdClass Object
(
    [Version] => stdClass Object
        (
            [majorRelease] => 1
            [minorRelease] => 0
            [build] => 14
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:43:14.507

Web 服务器是否以状态 200 响应？你说你得到一个空洞的回应，对吧？

使用这个免费的 GUI 工具 (http://webservicestudio.codeplex.com/) 进行 web 服务调用和可视化。您可以轻松加载 WSDL 并开始调用。

顺便说一句，做两份工作和学习是好东西！保持。

# python - Errno 10060 和 IMAP4_SSL

> ID：12613299
> 
> 赞同：0
> 
> 时间：2012-09-27T02:38:31.203
> 
> 标签：python

我正在尝试编写一个脚本来登录我的电子邮件服务器（雅虎）并检查来自某个发件人的消息。这是我第一次使用 IMAP 模块，但我似乎无法让它工作。现在我只有几行代码。

```
from imaplib import *

server = IMAP4_SSL('mail.yahoo.com')

server.login('myusername','mypassword')

mail_folders = server.list()

for folders in mail_folders:
    print(folders) 
```

此时我要做的就是登录到邮件服务器并检索文件夹列表。但是我从来没有得到连接。解释器抛出一个

```
[Errno 10060] A connection attempt failed because the connected party did not properly 
respond after a period of time, or established connection failed because connected host 
has failed to respond 
```

我不确定这是否与 SSL 或什么有关。我已经设法与 httplib.HTTPSConnection 建立了连接，但我宁愿使用 IMAP 而不是 webscrape。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:01:34.423

我认为问题只是服务器名称错误。替换`'mail.yahoo.com'`为`'imap.mail.yahoo.com'`对我有用。

# c - 可加载内核模块编程和系统调用拦截

> ID：12613301
> 
> 赞同：0
> 
> 时间：2012-09-27T02:38:50.843
> 
> 标签：c, linux, kernel

假设我们想要拦截退出系统调用并在任何进程调用它时在控制台上打印一条消息。为了做到这一点，我们必须编写自己的假出口系统调用，然后让内核调用我们的假出口函数，而不是原来的出口调用。在我们的假退出调用结束时，我们可以调用原始的退出调用。为了做到这一点，我们必须操作系统调用表数组（sys_call_table）。有了 sys_call_table 数组，我们可以操纵它来使 sys_exit 入口点指向我们新的假出口调用。我们必须存储一个指向原始 sys_exit 调用的指针，并在我们完成将消息打印到控制台时调用它。源代码 ：

```
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <sys/syscall.h>

 extern void *sys_call_table[];

 asmlinkage int (*original_sys_exit)(int);

 asmlinkage int our_fake_exit_function(int error_code)
 {
    /*print message on console every time we
     *are called*/
    printk("HEY! sys_exit called with error_code=%d\n",error_code);

    /*call the original sys_exit*/
    return original_sys_exit(error_code);
 }

 /*this function is called when the module is
 *loaded (initialization)*/
 int init_module()
 {
     /*store reference to the original sys_exit*/
     original_sys_exit=sys_call_table[__NR_exit];

     /*manipulate sys_call_table to call our
      *fake exit function instead
      *of sys_exit*/
     sys_call_table[__NR_exit]=our_fake_exit_function;
 }

 /*this function is called when the module is
   *unloaded*/
 void cleanup_module()
 {
     /*make __NR_exit point to the original
      *sys_exit when our module
      *is unloaded*/
     sys_call_table[__NR_exit]=original_sys_exit;
 } 
```

当我编译这个程序时，我得到了警告：

> 警告：“sys_call_table”[/home/roiht/driver/one.ko] 未定义！

搜索的时候发现2.5以后的内核版本改变了sys_call表的概念。那么，我的问题是在新内核版本中执行此操作的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:58:27.230

如果已使用 EXPORT_SYMBOL() 在内核中显式导出任何内核变量，则它可以在模块中使用。从内核版本 2.6 开始，sys_call_table 的导出已被删除。因此，如果您想使用这种方法，请显式导出变量。按照惯例，在变量声明之后立即进行导出，但我想从定义了该变量的任何文件中导出也可以。要检查该方法是否有效，只需查看“cat /proc/kallsyms”的输出即可。

捕获退出系统调用的另一种方法是在系统调用执行的 sysenter 部分中放置一个挂钩。在这里查看更多详细信息： http: [//articles.manugarg.com/systemcallinlinux2_6.html](http://articles.manugarg.com/systemcallinlinux2_6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:07:12.720

`sys_call_table`您可以从`System.map-xxx`与您的内核对应的文件中读取地址。该文件通常在`/boot`目录中，名称为`System.map-<kernel-version>`，其中`kernel-version`是 command 的结果`uname -r`。您可以使用模块参数将地址传递给您的模块。

# php - PHP/HTML - 没有登录但来自导航链接的个人资料页面

> ID：12613306
> 
> 赞同：1
> 
> 时间：2012-09-27T02:39:41.093
> 
> 标签：php, mysql, html, sql

看了[这里](https://stackoverflow.com/questions/10298588/redirect-to-profile-page)，我还是一头雾水。本质上，我在 html 中有一个导航栏。一个部分是“人”，下面是从 mysql 数据库中提取的不同人。

例如

```
-people
--john wayne
--tom adams
--etc 
```

我在 html 代码中的链接是“people/johnwayne.html”，其中 johnwayne 是数据库中链接的另一个变量。

而不是有这些链接，我正在寻找使用例如 profile.php 页面，我将如何生成这个？我看到像这样的链接

```
somedomain.com/profile.php?uid=$userid 
```

在我首先看到的上面的链接中，他们有这样的东西

```
header( "Location: profile.php?uid=$userid" ); 
```

我可以连接到数据库，执行 sql 查询等。如果很清楚，我该如何在新页面上收集此 ID

* * *

编辑：只是为了澄清一些示例代码，这里是菜单，

```
<ul class="dropdown-menu">
   <li>
      <a href="/people/johnwayne.html" title="John Wayne">John Wayne</a>
   </li>
   <li>
      <a href="/people/tomadams.html" title="Tom Adams">Tom Adams</a>
   </li>
</ul> 
```

johnwayne 是 mysql 数据库中称为“链接”的表中的一个元素，“标题”等也是如此。我不想要单独的 johnwayne.html、tomadams.html 页面，但所有链接都将采用以下形式

```
"people/profile.php?uid=$link"
e.g. "people/profile.php?uid=johnwayne" 
```

或者无论如何它已经完成了。换句话说，profile.php 会生成一些文件，查看 'johnwayne' 的行，并获取所有数据以生成对所有人通用的 html 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:58:58.537

您需要学习像 php 或 perl 这样的服务器端脚本语言，因为我的显示名称是 I-love-PHP，所以我建议使用**PHP**。

'?' 后面的内容 使用http GET请求发送，如果你是新手，还记得html表单中的好旧方法=GET/POST吗？

这会让你开始

[http://www.w3schools.com/php/default.asp](http://www.w3schools.com/php/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:46:32.610

您将使用 PHP 获取变量，如下所示：

```
$user = $_GET['userid']; 
```

但是你也会保证在尝试将它粘贴到 MySQL 数据库查询之前清理这个变量，好吗？:) 像这样的东西：

```
$userClean = addslashes(mysql_real_escape_string($user)); 
```

或者更好的是，使用可接受选项的“白名单”。例如，如果您知道自己只有五个人，请执行以下操作：

```
$user = $_GET['userid'];
if($user == 'shredder') {
  include('shredder.html');
} else if($user == 'splinter') {
  include('splinter.html');
} else if($user == 'turtles') {
  include('cowabunga.html');
} 
```

安全第一！:)

# astyanax - 设置键空间 PER 操作

> ID：12613307
> 
> 赞同：1
> 
> 时间：2012-09-27T02:39:42.007
> 
> 标签：astyanax

在 astyanax 中，当您构建构建时，您可以提供一个键空间，但我需要提供我运行的每个操作的键空间，因为不同的 CF 可能位于不同的键空间中。这可能吗？

谢谢，院长

# c# - 如果标签在 GroupBox 中，为什么标签控件不会在 foreach 循环中被击中？

> ID：12613313
> 
> 赞同：3
> 
> 时间：2012-09-27T02:40:04.847
> 
> 标签：c#, winforms

如果标签位于 GroupBox 中，则标签控件不会在 foreach 循环中被击中。如果标签在 GroupBox 之外，它们就是。我怎样才能让我的循环找到它们？

```
 foreach (Control c in this.Controls)
     {
         if (c is Label)
         {
             if (c.Text == "12/31/1600")
             {
                 c.Text = "Not Found";
             }
         }
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:41:49.000

```
SetLabels (this);

public void SetLabels(Control ctrl)
{
  foreach (Control c in ctrl.Controls)
     {
         SetLabels(c);
         if (c is Label)
         {
             if (c.Text == "12/31/1600")
             {
                 c.Text = "Not Found";
             }
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:42:42.570

利用

```
this.groupBox1.Controls 
```

在

```
 foreach (Control c in this.groupBox1.Controls)
 {
     if (c is Label)
     {
         if (c.Text == "12/31/1600")
         {
             c.Text = "Not Found";
         }
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:44:52.083

您可以使用递归。首先定义一个接受 Control 作为参数的委托：

```
public delegate void DoSomethingWithControl(Control c); 
```

然后实现一个方法，将此委托作为第一个参数，并将递归执行它的控件作为第二个参数。此方法首先执行委托，然后在控件的 Controls 集合上循环以递归调用自身。这是有效的，因为 Controls 在 Control 中定义，并为简单的控件（如标签）返回一个空集合：

```
public void RecursivelyDoOnControls(DoSomethingWithControl aDel, Control aCtrl)
{
    aDel(aCtrl);
    foreach (Control c in aCtrl.Controls)
    {
        RecursivelyDoOnControls(aDel, c);
    }
} 
```

现在您可以将更改标签值的代码放入方法中，并通过委托在表单上调用它：

```
 private void SetLabel(Control c)
    {
        if (c is Label)
        {
            if (c.Text == "12/31/1600")
            {
                c.Text = "Not Found";
            }
        }
    }

RecursivelyDoOnControls(new DoSomethingWithControl(SetLabel), this); 
```

# macos - Git无限期挂起 - 我认为与osx凭证助手打破

> ID：12613315
> 
> 赞同：4
> 
> 时间：2012-09-27T02:40:41.297
> 
> 标签：macos, git, keychain

我厌倦了为我的 bitbucket 存储库输入密码，所以我寻找了一种使用 ssh 密钥的方法，但偶然发现了 osx 凭证钥匙串。我以为我已经按照 git-scm 书中的指示正确安装了它，但是发生了一些不好的事情......我根本无法使用 git！然后我去 rm'd credential-osxkeychain 但这并没有解决我的问题，卸载和重新安装 git 也没有。

如果我进入我之前下载的仓库，更改一个文件并运行`git status`它会无限期地挂起。

如果我创建一个新目录，cd 进入它并运行`git init`它也会无限期地挂起。

当我在`git`没有任何参数的情况下运行时，会打印出以下内容：`Usage: git credential-osxkeychain <get|store|erase>`. 我已经看过我的`/Applications/Utilities/Keychain Acces.app`，但我找不到任何可以改变的地方。在这一点上，我只想`git`回来......我可以输入我的密码。

作为参考，我使用的是 OSX 10.7.2

编辑添加：`which git`返回`/usr/bin/git`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:00:37.753

为了解决这个问题，我重新安装了 git `http://git-scm.com/download/mac` ，然后添加`/usr/local/git/bin`到文件的顶部`/etc/paths`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T02:44:09.400

尝试`"git" status`（*带*引号）。如果可行，则您已将别名`git`设置为其他内容（可能`alias git="git credential-osxkeychain"`），您应该`~.profile`查看是否可以删除别名。

（有关调试步骤和最终解决方案，请参阅随附的评论）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T00:55:33.833

正如 nneonneo 上面所说，原因是文件 - git-credential-osxkeychain 和 git - 安装在错误的路径上（路径，在 中不是默认路径，`/etc/paths`不在 中的第一行`/etc/paths`）。上面的答案对我不起作用。我到底尝试了什么：1）更改文件中的行顺序`/etc/paths`，但文件`/etc/paths`不可用于在 Mavericks 上更改 2）删除 /usr/bin/git - 这也没有帮助我 3）`mv /usr/bin/git /usr/bin/git_old ln -s /usr/local/git/bin/git /usr/bin/git`也没有。所以我决定描述我的方式。我手动获取文件 - git-credential-osxkeychain 和 git`/usr/local/git/bin`并放入`/usr/bin/git`（因为`/usr/bin/git`- 是 中的第一个路径`/etc/paths`）。要获得像`/etc/paths`finder 中一样的路径，只需按 Command+Shift+G 并输入路径。

# php - php 5.4 mysql 扩展不起作用

> ID：12613323
> 
> 赞同：1
> 
> 时间：2012-09-27T02:41:26.437
> 
> 标签：php, mysql, yum, centos5

我使用 yum（CentOS 5 64 位）通过 Remi repo 安装了 PHP 5.4.6

我也运行了这个“yum --enablerepo=remi --disablerepo=base,updates install php54-mysql”，它说它有效，但是当我尝试启动 PHP-FPM 时，它说这个

```
>Starting php-fpm: [26-Sep-2012 21:28:09] NOTICE: PHP message: PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/mysql.so' - libmysqlclient.so.15: cannot open shared object file: No such file or directory in Unknown on line 0 
>[26-Sep-2012 21:28:09] NOTICE: PHP message: PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/mysqli.so' - libmysqlclient.so.15: cannot open shared object file: No such file or directory in Unknown on line 0 
>[26-Sep-2012 21:28:09] NOTICE: PHP message: PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/pdo_mysql.so' - libmysqlclient.so.15: cannot open shared object file: No such file or directory in Unknown on line 0 
```

我在服务器上寻找“libmysqlclient.so.15”，但我发现的只是“libmysqlclient.so.18”

如果它有助于我使用 nginx 和 mysql 5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:03:34.637

您可以这样做，找到您的 php.ini 文件并添加此变量（如果存在并更改它。）：

```
extension_dir = "/path/to/some/folder" 
```

然后将所有 .so 文件放在`/path/to/some/folder`路径中。

然后重启apache，测试一下

你可以看看这个链接，我也很难与 php+mysql 集成。[https://askubuntu.com/questions/174509/connection-failed-to-open-the-db-connection-could-not-find-driver](https://askubuntu.com/questions/174509/connection-failed-to-open-the-db-connection-could-not-find-driver)

# vim - 如何使 vim 打开具有特定语法突出显示的某些文件类型？

> ID：12613328
> 
> 赞同：6
> 
> 时间：2012-09-27T02:41:53.993
> 
> 标签：vim, nasm

`:set syntax=nasm`我想让 vim 打开所有 *.asm 类型的文件，语法设置为 nasm，这样我每次启动 vim 时都不必输入。

我确定我可以在我的 .vimrc 文件中放入一些东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T02:45:19.240

将此添加到您的 vimrc 文件中

```
au BufRead,BufNewFile *.asm set filetype=nasm 
```

每当缓冲区读取或创建具有扩展名的新文件时，`.asm`它将使用`nasm`文件语法对其进行格式化

`au`是`autocmd` 您可以通过使用了解更多信息的缩写`:h au`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-04T19:10:34.650

采用：

```
let asmsyntax="nasm" 
```

在你的 .vimrc

# python - 如何从字符串中取出特定字母

> ID：12613329
> 
> 赞同：1
> 
> 时间：2012-09-27T02:42:00.140
> 
> 标签：python

我很难创建一个以两种不同方式删除“T”字母的函数。是`parameter`a `Boolean`，如果参数是`True`那么它将打印出一个用户输入（写在我下面的代码中）并且它会一直询问相同的输入，直到该人输入“退出”并且当用户输入“退出”时然后它将删除字符串内的所有小写“t”。如果`Boolean`是`False`，则应用相同的过程，但不是取出小写“t”，而是取出大写“T”。另外，我想保持我在下面的代码中编写的相同类型的格式，谢谢。顺便说一句，我使用的是 python 2.4。

> ```
> def removeT(Boolea):
>     userInput=str(input("Enter a word/sentence you want to process: "))
>     while userInput:
>         string = (raw_input("Enter a word/sentence you want to process:"))
>         if Boolea == False:
>             userInput = userInput + string
>             while "T" in userInput:
>                 index = userInput.find("T")
>                 userInput = userInput[:index] + userInput[index+1:]
>         if string == "quit":
>             keepAsking = False
>             return userInput
> 
>         else:
>             userInput = userInput + string
>             while "t" in userInput:
>                 index = userInput.find("t")
>                 userInput = userInput[:index] + userInput[index+1:]
>             while "T" in userInput:
>                 index = userInput.find("T")
>                 userInput = userInput[:index] + userInput[index+1:] 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:54:03.707

```
def removeT(b):
    s1 = ""
    while True:
        s2 = raw_input("Enter a word/sentence you want to process: ")
        if s2 == "quit": return s1
        s2 = s2.replace("T", "")
        if b:
            s2 = s2.replace("t", "")
        s1 += s2 
```

# c - select 可以被内核模块不间断地阻塞吗？

> ID：12613330
> 
> 赞同：0
> 
> 时间：2012-09-27T02:42:21.970
> 
> 标签：c, linux, linux-kernel

tl; dr：即使指定了超时，对读取文件描述符（指向 procfs 内核模块）的选择调用是否会无限期地阻塞？

我在一个嵌入式 Linux 系统中工作，我们有几个内核模块来管理对服务的访问。一个这样的模块监视 VLAN 状态的变化。它将接口导出到`/proc`. 进程可以通过尝试从那里创建的 proc_file 读取来绑定到该模块的通知。当发生变化时，模块将在该接口上提供数据，调用者的读取将返回该信息。

这似乎引起了问题，因为内核模块使用内核信号量（结构信号量）阻止了调用者的读取。我认为这导致调用者进入“D”或不可中断的阻塞状态。该进程无法正确终止，如果终止，该进程仍将失效。它不仅已失效，而且没有释放其资源。

我认为这是“不要那样做”的情况，但我不是内核模块方面的专家。似乎更好的方法是在模块中使用自旋锁或 wait_event_interruptable。更改这些遗留内核模块是一件大事，因此我尝试通过在读取之前使用 select 检查 FD 来解决它。但是，这似乎也无限期地阻塞。

有没有办法在不改变内核模块中使用的互斥锁的情况下纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:49:45.393

Linux 允许内核模块执行各种破坏正确程序的恶意操作。恐怕没有比“不要加载错误或恶意模块”更好的答案了。就您而言，由于您需要它们，因此您可能只需要修复它们即可。

# javascript - 如何从 Firefox 插件调用 sessionStorage？

> ID：12613333
> 
> 赞同：0
> 
> 时间：2012-09-27T02:42:46.313
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk, session-storage

我试图在我的插件中调用[sessionStorage](http://en.wikipedia.org/wiki/Web_storage#sessionStorage)（这里是演示[https://builder.addons.mozilla.org/package/154290/latest/](https://builder.addons.mozilla.org/package/154290/latest/)），但没有存储任何内容。有小费吗？

```
 var menuItem = contextMenu.Item({
    label: "Check with Proofread Bot",
    context: contextMenu.SelectionContext(),
    contentScript: 'self.on("click", function () {' +
               '  var text = window.getSelection().toString();' +
                '  sessionStorage.setItem("proofread_bot_chrome", text);' +
                '  self.postMessage(text);' +
                        '});',
    onMessage: function(text) {
        tabs.open("http://proofreadbot.com");                    }                        
    }) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T05:33:55.987

`sessionStorage`并且`localStorage`永远不会在不同域之间共享。这也适用于从不同域注入页面的内容脚本，内容脚本以这些页面的权限运行，并且只能访问与`sessionStorage`页面本身相同的权限。您需要使用正确的消息传递，如[您的其他问题的答案](https://stackoverflow.com/a/12634068/785541)中所述。

# uitableview - iOS 6 上的弹出框中分组 UITableView 下的额外空间

> ID：12613336
> 
> 赞同：2
> 
> 时间：2012-09-27T02:43:14.143
> 
> 标签：uitableview, ios6, popover

我有一个应用程序可以在弹出窗口中显示各种分组的 UITableView。在展示弹出框之前，我在 tableViewController 上调用 setContentSizeForViewInPopover，并将高度设置为 tableViewController.tableView.contentSize.height。

这在 iOS 5 中运行良好，但现在在 iOS 6 上，UITableView 的最后一个单元格下方有额外的空间，就好像有页脚一样。当我调用 setContentSizeForViewInPopover 时，我可以减去空间的高度，但这似乎是一个讨厌的 hack。

有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:47:33.560

我也有过这种经历。

现在通过子类化 UITableView 并在 viewDidLoad 中添加它来解决它

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1.0f,1.0f)]; 
```

我也想要一个不那么老套的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T18:55:06.877

我知道这与@Loks 的答案几乎相同，但它绝对更干净。

没有任何必要子类化`UITableView`，而只需像这样设置表格的页脚：

```
[tableView setTableFooterView:[UIView new]]; 
```

这将删除底部的空间，并且不需要 GPU 处理另一个视图。所有这一切都是从表中删除额外的行和额外的空间。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-05T16:23:11.557

是的，这是一个烦人的问题。您可以使用`contentInset`来补偿 20px 额外的底部边距：

```
tableView.contentInset = UIEdgeInsetsMake(0, 0, -20, 0); 
```

# java - 我的程序想要继续从命令行获取输入

> ID：12613342
> 
> 赞同：1
> 
> 时间：2012-09-27T02:43:53.923
> 
> 标签：java, multithreading, sockets, command-line, io

我正在尝试为我的聊天程序创建一个服务器，但由于某种原因，它只需要输入，并且即使你一遍又一遍地按 enter 也会继续这样做。我试图仅在命令行中运行服务器，因此无法向服务器提供一些命令。有谁知道它为什么这样做？

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Iterator;

public class Server {

ArrayList<PrintWriter> clientOutputStreams;
int port;
ServerSocket serverSocket;

public class ClientHandler implements Runnable {
    BufferedReader reader;
    Socket socket;

    public ClientHandler(Socket clientSocket) {
        try {
            socket = clientSocket;
            InputStreamReader isReader = new InputStreamReader(socket.getInputStream());
            reader = new BufferedReader(isReader);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    @Override
    public void run() {
        String message;
        try {
            while ((message = reader.readLine()) != null) {
                tellEveryone(message);
                System.out.println(message);
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

}

public static void main(String args[]) {
    new Server().go();

}

public void createSocket() {
    try {
        port = 31996;
        serverSocket = new ServerSocket(port);
    } catch (Exception e) {
        System.out.println("The port is in use or does not exist! Please pick an unused port between 1025 and 65535.");
        createSocket();
    }
}

public void go() {

    clientOutputStreams = new ArrayList<PrintWriter>();

    try {
        createSocket();
        while (true) {
            Socket clientSocket = serverSocket.accept();
            PrintWriter writer = new PrintWriter(
                    clientSocket.getOutputStream());
            clientOutputStreams.add(writer);

            Thread t = new Thread(new ClientHandler(clientSocket));
            t.start();
            System.out.println("Server started on port " + port+ ".");
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }

}

public void tellEveryone(String message) {

    Iterator<PrintWriter> it = clientOutputStreams.iterator();
    while (it.hasNext()) {
        try {
            PrintWriter writer = (PrintWriter) it.next();
            writer.println(message);
            writer.flush();

        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:58:09.807

我想这个条件`while ((message = reader.readLine()) != null)`永远不会满足。

您需要发送某种“终止”消息或让客户端关闭连接。

# iphone - 使用图片大小ios设置视图框架

> ID：12613345
> 
> 赞同：1
> 
> 时间：2012-09-27T02:44:05.637
> 
> 标签：iphone, ios, xcode

如何在不设置框架的情况下初始化视图？

我的设计师给了我一堆图像，我可以弄清楚它们在屏幕上的位置，但是尺寸呢？有没有办法使用图片的原始大小来设置视图的框架，而不是每次都指定它？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:48:06.107

这是一种什么样的看法？如果需要，可以使用 a `UIImageView`。

我认为`UIImageView`有一种`initWithImage:`方法可以满足您的需求...

只需将您的图像作为方法`UIImage`传入`initWithImage:`，它应该根据您提供的图像修复帧大小......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:20:52.423

你可以使用这个 -

```
 UIImageView *imgView = [[UIImageView alloc]initWithFrame:CGRectMake(xorigin,yorigin, x, 
   y)];
imgView.image = [UIImage imageNamed:@"imageName.png"]; 
```

如果您想将图像设置为按钮，那么您可以使用此代码 -

```
 [btnName setImage:[UIImage imageNamed:@"imageName.png"] forState:UIControlStateNormal]; 
```

并且不给框架你也可以设置图像。它会自动获取大小。

# php - 如何使用 php/regex 从域名中删除 TLD

> ID：12613348
> 
> 赞同：1
> 
> 时间：2012-09-27T02:44:37.593
> 
> 标签：php, regex

这是我到目前为止的代码。

```
$main = 'example.com';

$removed = str_ireplace("cant figure out what to put in here...", " ", "$main");
echo $removed;` 
```

我知道我可以将 .com 放在第一个参数中，但我试图删除数百个不同的 TLD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:56:36.020

使用[parse_url](http://php.net/manual/en/function.parse-url.php)删除 URL，并使用[http-build-url](http://php.net/manual/en/function.http-build-url.php)在删除主机后重新构建它。

一个简单的例子（警告 - 可能不起作用，我会在之后解释为什么）是。

```
$url = "http://example.com:port/path?query=parts&so=on";
$aParts = parse_url($url);
$aParts['host'] = '';
$removed = http_build_url($aParts);
echo $removed; 
```

但这可能不起作用，原因有两个：

1.  http_build_url 是一个 http 函数，并不总是安装在 PHP 中。您可能需要从 PECL 获得，但在您这样做之前...
2.  这些函数对构建严格的 URL 非常挑剔，因此您可能希望自己实际创建它。

因此，更好的解决方案是：

```
$url = "http://example.com:port/path?query=parts&so=on";
$aParts = parse_url($url);
$aParts['host'] = '';
$removed = ($aParts['host'] ? $aParts['host'] : 'http') . '://'
           '' .   // This is where the host goes
           ($aParts['post'] ? ':' . $aParts['port'] : '') .
           ($aParts['path'] ? '/' . $aParts['path'] : '') .
           ($aParts['query'] ? '?' . $aParts['query'] : '') .
           ($aParts['fragment'] ? '#' . $aParts['fragment'] : ''); 
```

（未经测试 - 对任何错误表示歉意，但您应该考虑这个想法）

如果需要，添加用户并通过（检查上面链接的文档），如果你想替换主机，不要留空 - 你看看在哪里做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:52:55.050

这就是我想出的，感谢 robby 为我指明了正确的方向。

```
$url = 'example.com.uk';
$removed  = stristr($url, '.',true);
echo  "$removed"; 
```

# javascript - 添加了可访问但不可见的 Javascript 属性

> ID：12613349
> 
> 赞同：0
> 
> 时间：2012-09-27T02:44:43.657
> 
> 标签：javascript, backbone.js, coffeescript, underscore.js

所以我试图向一个包含对象名称的对象添加一个属性。这将在 html 名称属性等中使用。

```
setClientSideOpeningHours: =>
    newOpeningHours = {}
    existingOpeningHours = _.extend {}, @.get("opening_hours")
     _.each _.keys(existingOpeningHours), (item) ->
        newOpeningHours[item] = existingOpeningHours[item]
        newOpeningHours[item]["day"] = item
    console.log "openingHours.friday", newOpeningHours.friday,
                "openingHours.friday.day", newOpeningHours.friday.day
    @.set "clientside_opening_hours", newOpeningHours 
```

在 Chrome 中，这会打印到控制台：

> openingHours.friday openingHours.friday: Object { is_closed: "true", **proto** : Object } openingHours.friday.day: friday

后来，在模型之外，当我调用@.model.toJSON() 或@.model.attributes 时，day 属性完全不存在。这里发生了什么？

编辑：让它与 $.extend(true,...)

```
setClientSideOpeningHours: =>
    newOpeningHours = {}
    existingOpeningHours = $.extend true, {}, @.get("opening_hours")
    _.each .keys(existingOpeningHourshours), (item) =>
        newOpeningHours[item] = $.extend true, {}, existingOpeningHours[item]
        newOpeningHours[item].day = item
    @.set "clientside_opening_hours", newOpeningHours 
```

# sql - Oracle SQL - 我想组合多个查询并按日期分组，但日期来自不同的来源。

> ID：12613354
> 
> 赞同：1
> 
> 时间：2012-09-27T02:45:45.143
> 
> 标签：sql, oracle

我正在尝试将 5 个查询合并到一个查询中，这样每次我想更新报告时就不必运行多个查询。5 个报告中的每一个都经过格式化，因此结果如下所示：

```
 The_Date      Sp_DAU    CS_Dau
   01-Jan-12       3423      3674
   02-Jan-12       1823      2547 
```

依此类推....（每个列都有不同的列，除了 The_Date 保持不变）

问题是，The_Date 来自多个表，所以我不知道如何组合所有查询，所以结果如下所示：

```
 The_Date       Sp_Dau     Cs_Dau  TapJoy_Ios_Dau  TapJoy_Android_DAU Portal_DAU
    01-Jan-12       1823      2547       35                  1115           33
    02-Jan-12       2453      3000       47                  1478           30 
```

这有意义吗？如果我发布了所有查询或者信息太多会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:15:16.017

查看第二张表，我假设您总是希望根据日期汇总这些数据。只要是这种情况，您就会希望根据您的 N 个表的日期来加入。

```
SELECT * FROM Table1 T1
INNER JOIN Table2 T2 ON T1.The_Date = T2.The_Date
INNER JOIN Table3 T3 ON T1.The_Date = T3.The_Date
...
INNER JOIN TableN TN ON T1.The_Date = TN.The_Date 
```

如果您的日期是 SQL 日期时间，您可能希望四舍五入到同一天。这有点复杂，因为您需要`CAST( CAST( The_Date as INT) AS DATETIME)`在每个引用日期时间的地方使用，包括连接。

希望有帮助。

# javascript - 如何使用 jquery 使用 name 属性解析图像的远程页面？

> ID：12613356
> 
> 赞同：1
> 
> 时间：2012-09-27T02:45:57.123
> 
> 标签：javascript, jquery, html, ajax, html-parsing

由于内部站点设置的情况，我试图解析来自本地页面的一系列图像，并通过将名称属性与文章名称匹配来将图像信息传递到另一个本地页面。我正在寻找图像的 src 和 class 属性。

这两个页面位于同一个域中，但一个页面包含一系列图像，另一个页面包含我们的标准页面布局，该布局将使用 JS 和 CSS 组合进行样式设置。包含图像的页面更像是一系列图像的存储库。

注意：我知道如果我们要使用服务器端，这可以很容易地实现，但是由于这种设置的情况，我们必须在前端提出一些东西。

最终结果将是主页上的列表，其中来自回购页面的相应图像放置在每个文章列表旁边。

这是我到目前为止所拥有的：

```
<!-- HTML ON IMAGE REPO PAGE -->
<img src="/path/to/my/image/repo/image_01.jpg" name="article_01" />
<img src="/path/to/my/image/repo/image_02.gif" name="article_02" />
<img src="/path/to/my/image/repo/image_03.png" name="article_03" />
<img src="/path/to/my/image/repo/image_04.jpg" name="article_04" />
<img src="/path/to/my/image/repo/image_05.gif" name="article_05" />
<img src="/path/to/my/image/repo/image_06.jpg" name="article_06" />

<!-- HTML ON MAIN PAGE -->
... HTML code blah blah blah ...
<div class="imageCnt">
    <div class="listItem"><a href="/path/to/my/article_01.html">Cool Article 1</a></div>
    <div class="listItem"><a href="/path/to/my/article_02.html">Cool Article 2</a></div>
    <div class="listItem"><a href="/path/to/my/article_03.html">Cool Article 3</a></div>
    <div class="listItem"><a href="/path/to/my/article_04.html">Cool Article 4</a></div>
    <div class="listItem"><a href="/path/to/my/article_05.html">Cool Article 5</a></div>
    <div class="listItem"><a href="/path/to/my/article_06.html">Cool Article 6</a></div>
</div>
... HTML code blah blah blah ...

<!-- JS ON MAIN PAGE -->
<script type="text/javascript">
$(document).ready(function() {
    var imageContainer = "/path/to/image/page_2.html";
    var imageFileSrc;

    imageFileSrc = $.post(imageContainer); // Thought it best to store posted page data in a variable

    $('.imageCnt').find('a').each(function(index) {

        // First, get the article name
        var thisUrl = $(this).attr('href').split("/");
        var articleUrl = thisUrl[3].split(".");
        articleName = articleUrl[0];

        // Then, find the image based on the name
        var imageSrc = $("[name*="+articleName+"]"); // This is where I'm lost!? :)
    });

});
</script> 
```

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:10:07.550

首先，您在选择获取文件名的 url 路径时出错，您`thisUrl[3]`应该这样做`thisUrl[4]`

尝试这个

```
$('.imageCnt').find('a').each(function(index) {

        // First, get the article name
        var thisUrl = $(this).attr('href').split("/");
        var articleUrl = thisUrl[4].split(".");
        articleName = articleUrl[0];

        // Then, find the image based on the name
        var imageSrc = $("img[name="+articleName+"]").attr('src'); // This is where I'm lost!? :)
    alert(imageSrc);
    }); 
```

这是工作[小提琴](http://jsfiddle.net/WMz3Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:55:30.913

尝试修改：

```
var imageSrc = $('img[name="'+articleName+'"]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T02:59:16.170

从未尝试过，但这似乎可行...

[http://forum.jquery.com/topic/link-to-another-page-and-execute-jquery-there](http://forum.jquery.com/topic/link-to-another-page-and-execute-jquery-there) （这只是一个链接）

编辑：你也可以尝试类似的东西：

```
$.get('filename.html', function(data) {
$('.class_name',data).html(); //returns the HTML of .class_name inside of filename.html
}); 
```

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# javascript - 如何确定我的脚本在哪个页面上运行

> ID：12613357
> 
> 赞同：5
> 
> 时间：2012-09-27T02:45:58.827
> 
> 标签：javascript, shopify

安装我的应用程序后，我创建了一个脚本标签（通过 shopify API）。我只对在产品视图页面上运行此脚本感兴趣。检查脚本是否由产品视图页面运行的可靠方法是什么？我应该要求商家手动将一些东西放入他们的液体文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T03:55:21.313

这应该在*您的*JavaScript 中起作用：

```
// If we are on a product page
if (window.location.pathname.indexOf('/products/') !== -1) {
 // What's the product handle?
 var productHandle = pathname.match(/\/products\/([a-z0-9\-]+)/)[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:51:08.253

您可以传递一个额外的函数参数，指定从何处调用函数。我在一些项目中使用了这种编程并取得了巨大的成功。例如：

```
function foo(data, moarData, caller) {
  if(caller != 'productPage') { return false; }
  ...
} 
```

您可以从产品视图页面上的函数调用中指定调用者变量：

```
var page = 'productPage';
foo('sharks', 'games', this.page); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:39:57.350

Shopify 中的产品页面上始终有一个将产品添加到购物车的表单，因此您可以执行以下操作（假设 jQuery 可用）：

```
jQuery("form[action='/cart/add']").each(function() {
  console.log("I'm in ur product page");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T14:31:29.813

编写一些通用的 Javascript 来查询浏览器中的当前 URL。您可以轻松判断您是在页面、产品还是集合上。尝试一个简单的正则表达式来做到这一点。由于 Shopify 是托管的，因此商店很难弄乱 URL 结构。

# ios - 子类化 MKOverlayPathView 以创建 MKPolylineView

> ID：12613363
> 
> 赞同：8
> 
> 时间：2012-09-27T02:46:53.477
> 
> 标签：ios, mapkit

有没有人尝试过子类化`MKOverlayPathView`，以便从本质上`MKPolylineView`通过对路径绘图的更多控制来重新创建？如果是这样，您愿意分享一些示例代码吗？

我想`MKPolyline`在地图视图上绘制一个，但`MKPolylineView`在绘制路径方面没有提供足够的灵活性。例如，我想像在地图应用程序中看到的路线一样，在线条上添加笔触并突出显示。

![在此处输入图像描述](../Images/cbe45e9c138953c2491a0ff176004e5e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:32:38.667

我今天在寻找一种在`MKPolylineView`. 经过一番研究和挖掘，我创建了自己的简单子类，`MKOverlayPathView`它可以直接替代`MKPolylineView`并添加对绘制边框的支持。

它最终变得非常简单，您可以查看 GitHub [ASPolylineView](https://github.com/nighthawk/ASPolylineView)上的示例代码或查看我描述需要完成的主要事情的[简短博客文章。](http://nighthawk.github.com/blog/2013/02/21/drawing-multi-coloured-lines-on-an-mkmapview/)这是开始使用更高级的自定义绘图的一个很好的构建块。对于更复杂的 子类`MKOverlayPathView`，请查看[AIMapViewWrapper](https://github.com/cocoatoucher/AIMapViewWrapper/tree/master/AIMapViewWrapper/AIMapViewWrapper/Routing) - 尤其是`AIOverlayRouteView`该类。

# javascript - 我正在尝试刷新 document.title 以显示收件箱计数并遇到以下问题

> ID：12613367
> 
> 赞同：0
> 
> 时间：2012-09-27T02:47:36.243
> 
> 标签：javascript

我正在使用的代码如下，我在 Stackoverflow 上对其进行了一些研究。但是，我还没有找到任何解决方案来解决我遇到的问题。

```
<script type="text/javascript">
  setInterval(function() {
  var x=document.getElementById("SUI-WelcomeLine-InboxNum");
  document.title = document.title + x.innerHTML;
  }, 3000);
</script> 
```

一切都很好，除了一件事。它发布文档标题，然后一遍又一遍地重复发布收件箱号码。所以我得到页面标题，例如“我的网站”，然后当我有 1 条消息时得到 111111111。如何让它停止重复收件箱计数并整体刷新文档和收件箱计数？

是的，我是菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:51:45.420

尝试这个：

```
var title = document.title;
setInterval(function() {
    var x=document.getElementById("SUI-WelcomeLine-InboxNum");
    document.title = title + x.innerText;
}, 3000); 
```

但是，我认为您不应该使用定期检查收件箱元素的间隔循环来执行此任务。相反，让更新收件箱元素的脚本也更新标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:50:05.483

这是因为您不断地重新附加字符串。`document.title = document.title + x.innerHTML;`

你应该做这样的事情：

`document.title = "(" + count + ") Awesome Webapp";`

# c++ - 范围查询所需的高效算法

> ID：12613368
> 
> 赞同：0
> 
> 时间：2012-09-27T02:47:37.610
> 
> 标签：c++, algorithm

我想知道实现这一点的最佳方法（方法）。我将得到一组坐标（x，y）。然后，我将根据像
1.C ab => 这样的坐标进行查询，其中 a 和 b 是初始坐标集中的整数索引。所以我需要输出在索引范围 a 到 b 内的第一、第二、第三和第四象限的点数。

2.X ab => 其中 a 和 b 是初始坐标集中的整数索引。所以我需要将 ath 镜像到沿 x 轴的 bth 索引坐标。

3.Y ab => 其中 a 和 b 是初始坐标集中的整数索引。所以我需要将 ath 镜像到沿 y 轴的 bth 索引坐标。

最多可以有 100000 个坐标或点以及 500000 个这样的查询。

我尝试了一种蛮力方法循环遍历每个查询，但它有 TLE（超出时间限制）。

这类问题我该怎么办？

这是我的代码

```
#include <iostream>
#include <stdio.h>

using namespace std;

char flipX[4] = { 3, 2, 1, 0 };
char flipY[4] = { 1, 0, 3, 2 };

int main(int argc, char **argv)
{
    int n,x,y;
    char c[100000];
    scanf("%d",&n);
    //coord *c=new coord[n];
    for(int i=0;i<n;i++)
    {
        scanf("%d",&x);
        scanf("%d",&y);
        if(x<0 && y<0)
            c[i]=2;
        else if(x>0 && y>0)
            c[i]=0;
        else if(x>0 && y<0)
            c[i]=3;
        else
            c[i]=1;
    }

    int q,i,j,a,cnt[4];
    char ch;
    scanf("%d",&q);
    while(q--)
    {
        //cout<<"q:"<<q<<endl;
        cin>>ch;
        scanf("%d",&i);
        scanf("%d",&j);
        i--;j--;
        if(ch=='X')
        {
            //case 'X':
                for(a=i;a<=j;a++)
                    c[a]=flipX[c[a]];
            //  break;
        }
        else if(ch=='Y')
        {
            //case 'Y':
                for(a=i;a<=j;a++)
                    c[a]=flipY[c[a]];
            //  break;
        }   
        else if(ch=='C')
        {
                cnt[0]=cnt[1]=cnt[2]=cnt[3]=0;
                for(a=i;a<=j;a++)
                {
                    cnt[c[a]]++;
                }
                printf("%d %d %d %d\n",cnt[0],cnt[1],cnt[2],cnt[3]);
        }
    }
    return 0;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:18:27.543

同意neonneo。

```
const size_t MAX_COORDS = 100000;
vector<char> quadrant( MAX_COORDS ); 
```

这里，`quadrant`保持一个值（0 到 3）。在没有任何条件的情况下翻转象限非常简单：

```
char flipX[4] = { 2, 3, 0, 1 };
char flipY[4] = { 3, 2, 1, 0 };

vector<char>::iterator itLeft = quadrant.begin() + left;
vector<char>::iterator itRight = quadrant.begin() + right + 1;

for( vector<char>::iterator it = itLeft; it != itRight; it++ )
{
    *it = flipX[*it];
} 
```

计算象限同样容易：

```
unsigned int count[4] = {0};
for( vector<char>::iterator it = itLeft; it != itRight; it++ )
{
    count[*it]++;
} 
```

如果您需要比这更快，则必须采用动态编程方法并记住每个点和每个象限的象限数。这将为您提供 O(1) 范围搜索，但会使镜像操作更加昂贵。以下是范围计数的工作方式：

```
vector< vector<char> > counts( 4, vector<char>(MAX_COORDS) );

// ...

for( size_t i = 0; i < 4; i++ ) {
    count[i] = counts[i][right] - (left > 0 ? counts[i][left-1] : 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:55:19.550

好的。惰性线段树做到了这一点。感谢大家的帮助

# android - 应用程序在设备中崩溃但在模拟器中没有

> ID：12613370
> 
> 赞同：1
> 
> 时间：2012-09-27T02:47:44.630
> 
> 标签：android, android-sqlite

我在模拟器上运行了该应用程序，它工作正常，但是当我将它安装到设备中时它崩溃了。

这是导致崩溃的代码

```
c1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if ( c1.isChecked() )
                {
                    SQLHandler check = new SQLHandler(StartMoving.this);
                    check.open();
                    check.updateTodo(currentMove, "sortandpurge", "Done");
                    check.close();
                }else{
                    SQLHandler check = new SQLHandler(StartMoving.this);
                    check.open();
                    check.updateTodo(currentMove, "sortandpurge", "Not Done");
                    check.close();
                }
            }
        }); 
```

这段代码的作用是，如果单击复选框，数据库将被更新。

```
public void updateTodo(String todoMove, String todoName, String todoValue){
        ContentValues cv = new ContentValues();
        cv.put(todoName, todoValue);
        ourDatabase.update(DATABASE_TABLE4, cv, KEY_TODOMOVE + "='" + todoMove + "'", null);
    } 
```

但不知何故，应用程序在设备中崩溃，但在模拟器中没有

这是原木猫

```
09-27 02:59:05.743: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:05.763: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:08.153: D/dalvikvm(1130): GC_CONCURRENT freed 44K, 2% free 10692K/10823K, paused 11ms+10ms
09-27 02:59:08.213: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:08.343: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:08.724: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:08.853: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:09.223: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:09.353: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:09.403: D/dalvikvm(1130): GC_CONCURRENT freed 13K, 2% free 11222K/11335K, paused 6ms+7ms
09-27 02:59:09.723: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:09.763: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:10.243: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:10.293: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:10.733: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:10.863: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:11.234: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:11.353: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:11.743: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:11.863: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:12.233: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:12.363: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:12.723: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:12.803: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt'
09-27 02:59:13.233: I/dalvikvm(1130): threadid=3: reacting to signal 3
09-27 02:59:13.363: I/dalvikvm(1130): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:50:46.710

我发现了问题，似乎我将其中一个列设置为整数，而不是应有的文本，愚蠢的我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T09:04:24.590

当 ANR（Application Not Responding）情况发生时，dalvik 将发送“threadid=3: reacting to signal 3”消息。您可以在 /data/anr/trace.txt 文件中找到详细信息。

# java - 如何根据每个字符串的不同部分对字符串数组进行排序？

> ID：12613372
> 
> 赞同：0
> 
> 时间：2012-09-27T02:48:02.490
> 
> 标签：java, sorting, map

我必须按获得的金牌数量以降序对国家进行排序。如果有几个国家并列，我需要按银牌数量对并列的国家进行排序，然后是铜牌，如果还有平局，我需要按字母升序对它们进行排序。我已经编写了一个比它可能需要的复杂得多的程序，但它仍然返回字符串的无序列表。输入是按年份给出的，第一个国家是金牌得主，第二个是银牌，第三个是铜牌。例如：

```
public class MedalTable {
public static void main(String[] args){
    String[] input = {"ITA JPN AUS", "KOR TPE UKR", "KOR KOR GBR", "KOR CHN TPE"};
    generate(input);

}

public static void generate(String[] results) {
    // you fill in this code
    //"ITA JPN AUS", "KOR TPE UKR", "KOR KOR GBR", "KOR CHN TPE"
    String[] countrystrings = setupstuff(results);
    ArrayList<Integer> goldnums = new ArrayList<Integer>();
    ArrayList<Integer> silvnums = new ArrayList<Integer>();
    ArrayList<Integer> broznums = new ArrayList<Integer>();

    for(int o = 0; o < countrystrings.length; o++){
        goldnums.add(Integer.parseInt(Character.toString(countrystrings[o].charAt(4))));
        silvnums.add(Integer.parseInt(Character.toString(countrystrings[o].charAt(6))));
        broznums.add(Integer.parseInt(Character.toString(countrystrings[o].charAt(8))));
    }

}

public static String[] setupstuff(String[] data){
    Map<String, Integer> goldmap = new TreeMap<String, Integer>();
    Map<String, Integer> silvermap = new TreeMap<String, Integer>();
    Map<String, Integer> bronzemap = new TreeMap<String, Integer>();
    ArrayList<String> goldlist = new ArrayList<String>();
    ArrayList<String> silverlist = new ArrayList<String>();
    ArrayList<String> bronzelist = new ArrayList<String>();
    ArrayList<String> countries = new ArrayList<String>();
    for (String i : data){
        goldlist.add(i.substring(0, 3));
        silverlist.add(i.substring(4, 7));
        bronzelist.add(i.substring(8, 11));
    }
    populatemap(goldmap, goldlist);
    populatemap(silvermap, silverlist);
    populatemap(bronzemap, bronzelist);
    countries = getuniquecountries(goldmap, silvermap, bronzemap);
    String[] countrystrings = new String[countries.size()];
    countrystrings = createmedalstring(countries, goldmap, silvermap, bronzemap);
    Arrays.sort(countrystrings);
    for(int v = 0; v < countrystrings.length; v++){
        System.out.println(countrystrings[v]);
    }
    return countrystrings;
}

public static String[] createmedalstring(ArrayList<String> array, Map<String, Integer> gldmap,
        Map<String, Integer> slvmap, Map<String, Integer> brzmap){
    String[] thiscountry = new String[array.size()];
    ArrayList<String> tempstring = new ArrayList<String>();
    for (int j = 0; j < array.size(); j++){
        thiscountry[j] = array.get(j);
    }
    String[] concatstuff = new String[thiscountry.length];
    for (int k = 0; k < thiscountry.length; k++){
        concatstuff[k] = thiscountry[k];
    }
    for (int i = 0; i < thiscountry.length; i++){
        tempstring.add(thiscountry[i]);
        if(gldmap.containsKey(thiscountry[i])){
            tempstring.add(" " + gldmap.get(array.get(i).toString()));
        }
        else{
            tempstring.add(" 0");
        }
        if(slvmap.containsKey(thiscountry[i])){
            tempstring.add(" " + slvmap.get(array.get(i).toString()));
        }
        else{
            tempstring.add(" 0");
        }
        if(brzmap.containsKey(thiscountry[i])){
            tempstring.add(" " + brzmap.get(array.get(i).toString()));
        }
        else{
            tempstring.add(" 0");
        }
        concatstuff[i] = tempstring.get(0) + tempstring.get(1) + tempstring.get(2) + tempstring.get(3);
        tempstring.clear();
    }
    return concatstuff;
}

public static ArrayList<String> getuniquecountries(Map<String, Integer> gldmap, 
        Map<String, Integer> slvmap, Map<String, Integer> brzmap){
    ArrayList<String> countries = new ArrayList<String>();
    for(Entry<String, Integer> i : gldmap.entrySet()){
        if(!countries.contains(i.getKey()))
            countries.add(i.getKey());
    }
    for(Entry<String, Integer> j : slvmap.entrySet()){
        if(!countries.contains(j.getKey()))
            countries.add(j.getKey());
    }
    for(Entry<String, Integer> k : brzmap.entrySet()){
        if(!countries.contains(k.getKey()))
            countries.add(k.getKey());
    }
    return countries;
}

public static void populatemap(Map<String, Integer> map, ArrayList<String> array){
    for (String i : array){
        if(map.containsKey(i)){
            map.put(i, map.get(i) + 1);
        }
        else{
        map.put(i, 1);
        }
    }
    //System.out.println(map);
} 
```

}

这将返回：

澳大利亚 0 0 1 中国 0 1 0 英国 0 0 1 意大利 1 0 0 日本 0 1 0 韩国 3 1 0 TPE 0 1 1 UKR 0 0 1

但是，我在尝试订购上面的输出时遇到了一些严重的问题。我怎样才能像现在这样按奖牌的值而不是按字母顺序排列它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:55:04.910

我认为解决这个问题的更好方法是创建一个这样的类：

```
class OlympicCountry implements Comparable<OlympicCountry> {
  private int goldCount;
  private int silverCount;
  private int bronzeCount;
  private String name;

  // . . .

  public String toString() {
    return String.format("%s %d %d %d", name, goldCount, silverCount, bronzeCount);
  }

  public int compareTo(OlympicCountry other) {
    if (this.goldCount != other.goldCount)
      return this.goldCount > other.goldCount ? 1 : -1;
    if (this.silverCount != other.silverCount)
      return this.silverCount > other.silverCount ? 1 : -1;
    // . . .
    return this.name.compareTo(other.name);
  }
} 
```

在正确定义`compareTo`（[`Comparable<T>`接口](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)的一部分）方法之后，您应该能够使用 对列表进行排序[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)，或者[`Arrays.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)如果您坚持使用数组而不是列表。

该类`OlympicCountry`的`toString`方法负责正确格式化数据以供显示（或您计划对其进行的任何操作）。

实现这样的对象来存储和操作原始数据通常是一种更好的设计，而不是将其全部塞入字符串或整数或其他东西中，然后尝试对其进行操作。这就是我们可以声明自己的类的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T03:06:53.220

这是带有 Comparable 添加到 OlympicCountry 答案的 treeSet

```
public class OlympicCountry implements Comparable<OlympicCountry> {

    public static void main(String args[]){
        Set<OlympicCountry> set = new TreeSet<OlympicCountry>(new Comparator<OlympicCountry>() {
            @Override
            public int compare(OlympicCountry o1, OlympicCountry o2) {
                return -o1.compareTo(o2);
            }
        });

        OlympicCountry c1 = new OlympicCountry();
        // set values to c1
        set.add(c1);

        OlympicCountry c2 = new OlympicCountry();
        // set values to c2
        set.add(c2);

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T02:50:50.553

Java 是一种面向对象的语言，使用一些对象来做到这一点。创建某种类来代表一个国家，其中包含用于存储金、银和铜牌以及国家名称的变量。

在那个类中（调用它`Country`）实现`Comparable interface`你可以实现你定义的排序规则的地方。

在您正在运行的程序中，您创建一个`Country`对象列表并使用`Collections.sort()`

# html - 如何限制内联显示的子 div 的数量？

> ID：12613374
> 
> 赞同：0
> 
> 时间：2012-09-27T02:48:05.620
> 
> 标签：html, css

有没有办法使用 CSS3 来限制子 div 连续显示（或内联）的数量？

```
<div class="parent">

  <div class="child">
    <img>
    <p>Text explaining img</p>
  </div>

  <div class="child">
    <img>
    <p>Text explaining another img</p>
  </div>

  <!-- If I only want two per line, let's push the next two down -->

  <div class="child">
    <img>
    <p>Text explaining another img</p>
  </div>

  <div class="child">
    <img>
    <p>Text explaining another img</p>
  </div>

</div> 
```

我考虑过只应用宽度和边距，但我也希望一行中的最后一个孩子有 margin-right:0;

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:51:18.357

如果您知道元素的大小，则可以这样做：

```
.parent {
    border: 2px solid #c00;
    padding: 4px;
    display: inline-block;
}
.child {
    border: 2px solid #0c0;
    padding: 4px;
    display: block;
    width: 64px;
    height: 64px;
    margin: 0 76px 0 0;
}
.child:nth-child(2n) {
    margin: -76px 0 0 76px;
} 
```

[http://jsfiddle.net/b4f5c/](http://jsfiddle.net/b4f5c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:23:17.343

> 您应该使用 jquery 或 javascript 来显示下 2 个孩子

**css3 具有[nth-child 属性](http://css-tricks.com/how-nth-child-works/)**，但您只能使用此属性显示特定子项。

这是 jquery 的解决方案

```
var dispdivs=0;
  function minview()
     $(".child").hide();// hide all child elements
     dispdivs+=2; 
      for(var i=0;i<dispdivs;i++) //this is to display extra 2 divs
      {
       $(".child:eq("+i+")").show();
      }
    } 
```

当你想显示所有元素使用时

```
$(".child").show(); 
```

# css - HTML 和 CSS：在另一个块元素中浮动一个块元素？

> ID：12613375
> 
> 赞同：1
> 
> 时间：2012-09-27T02:48:12.530
> 
> 标签：css, html, web, css-float

是否可以在 a 中浮动`<ul>`a `<div>`？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:49:41.380

这是你想要的吗：

```
div > ul
{
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:30:04.540

[是的]

CSS：

```
<style type="text/css">
  div.my-div {
    width: 200px;
    height: 200px;
  }
  div.my-div ul.left-floated {
    width: 100px;
    height: 200px;
    float: left;
    /* display: block; */
  }
  div.my-div ul.right-floated {
    width: 100px;
    height: 200px;
    float: right;
    /* display: block; */
  }
  .clearfix {
    clear: both;
    line-height: 0;
    font-size: 0;
    height: 0;
  }
</style> 
```

HTML：

```
<div class="my-div">
  <ul class="left-floated">
  </ul>

  <ul class="right-floated">
  </ul>

  <br class="clearfix" />
</div> 
```

# c++ - DBX：Solaris 版本的 AIX 等效版本

> ID：12613376
> 
> 赞同：2
> 
> 时间：2012-09-27T02:48:21.860
> 
> 标签：c++, debugging, solaris, aix, dbx

我是一名开发人员，主要在 solaris 环境中进行编程，尽管我们的代码是在包括 AIX 在内的多个平台上编译的。我在这两种环境中都可以使用的最稳定的调试工具是 dbx，我在 Solaris 平台上非常熟悉。不幸的是，AIX 上的 dbx 与 Solaris 上的 dbx 非常不同。我的搜索结果收效甚微，作为最后一次尝试，看看我是否能在这方面取得任何进展，我在 StackOverflow 上发帖。我正在寻找 dbx 中以下命令/过程的等效功能：

*   相当于 solaris dbx 中的 'when' 命令，而不是简单的 stop
*   相当于“访问”事件规范（例如，当访问 wa 变量时），我不仅可以指定一个变量，还可以指定一个地址（如果我愿意的话）。
*   'infile', 'inclass' 事件的等价物

我不确定这些是否有等价物，但我希望有。我对 gdb 的评价已经好很多了，但不幸的是，gdb 在我目前工作的环境中似乎不是很稳定。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:03:30.373

等效于 AIX 上的“何时”：

*   在所需参数上设置跟踪。
*   使用 addcmd 将命令列表添加到跟踪事件。

# ruby-on-rails - 导轨：has_many：通过

> ID：12613377
> 
> 赞同：1
> 
> 时间：2012-09-27T02:48:35.917
> 
> 标签：ruby-on-rails, has-many-through

我想弄清楚我的方法是否正确。我有一个用户模型和一个补偿模型。我需要允许应用程序管理员为每个用户记录分配补偿。这种补偿可能会随着时间的推移而变化，我想跟踪这些变化。经过一番研究，我认为**has_many => :through** 是解决此问题的方法，它使用称为 Payments 的第三个模型加入其他两个模型，并且在该模型内部有 user_id 和补偿 ID。我有以下设置：

```
class User < ActiveRecord::Base

has_many :payments
has_many :compensations, :through => :payments

class Compensation < ActiveRecord::Base

has_many :payments
has_many :users, :through => :payments

class Payment < ActiveRecord::Base

has_many :Users
has_many :compensations 
```

我的第一个问题是：我是否正确，这将是了解我要达到的目标的最佳方法吗？我的第二个问题是在表单中包含一个下拉字段（从补偿表中汇集）以填充付款表的最简单方法是什么？不幸的是，我评论过的大多数关于**has_many :through**的网络讨论都集中在模型而不是视图上。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:22:31.093

```
class User < ActiveRecord::Base
 has_many :payments
 has_many :compensations, :through => :payments
end

class Compensation < ActiveRecord::Base
  has_many :payments
  has_many :users, :through => :payments
end

class Payment < ActiveRecord::Base
  belongs_to :user
  belongs_to :compensation
end 
```

试试这个可能对你有帮助。更多信息。看这个视频 - [has_many->through](http://railscasts.com/episodes/47-two-many-to-many)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:20:43.003

目前还不清楚你的目标是什么。为什么用户会有很多补偿？为什么补偿会有很多用户，任何特定的补偿不会是针对特定用户的补偿？我也不确定您在第二个问题中所说的是什么形式。

也就是说，假设您想要一些与上面的代码类似的东西，您只需要：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :compensations
end

class Compensation < ActiveRecord::Base
  has_and_belongs_to_many :users
end 
```

至于下拉菜单，请查看 Rails`select`助手。抱歉，我不能更具体，再说一次，我不确定您要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T06:49:28.520

您的第一个问题是：我是否正确，这将是了解我要达到的目标的最佳方法吗？Ans：这是一个很好的方法，但您可以在那里“多态关联”以获得更具体的解决方案。您的第二个问题是在表单中包含一个下拉字段（从补偿表中汇集）以填充付款表的最简单方法是什么？

第二个问题不是很清楚。你想显示一些属性的值吗？

如果是这样，请按照我的这个例子。我想它会帮助你。

contact.select :contactable, @member.contacts.map {|r| [r.first_name,r.id] }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T04:08:05.243

我想通了——但朝另一个方向发展——现在我决定不再跟踪历史，并使用 collection_select 创建了一个动态下拉列表——

# visual-studio-2010 - 我的 Visual Studio 2010 无法打开 msoftcon.h 头文件。现在我该怎么做？

> ID：12613387
> 
> 赞同：0
> 
> 时间：2012-09-27T02:50:11.720
> 
> 标签：visual-studio-2010

我正在尝试画圆圈。我的 Visual Studio 2010 无法打开 msoftcon.h 头文件。我现在应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:09:36.310

Visual Studio 中不包含 msoftcon.h 头文件。您将不得不在其他地方找到它，因为它不是正态分布的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T02:52:12.050

尝试在[这里](http://discuss.pcmag.com/forums/thread/419651002.aspx)寻找它...似乎是一个旧的头文件。

# postgresql - 让 Doctrine 2 ORM 使用针对具有连接的表的自定义查询来水合对象

> ID：12613388
> 
> 赞同：1
> 
> 时间：2012-09-27T02:50:13.683
> 
> 标签：postgresql, orm, symfony, doctrine-orm, symfony-2.1

## 我正在尝试做的事情：

对一个也连接到其他表的表执行带有半正弦计算的查询

## 出了什么问题：

ORM 级别的关联无法通过我尝试的方法正常工作/补水，看起来

## 细节

我觉得如果我剪切并跳过所有相关的代码，这个问题会变得*很大*，所以我将尝试将它保留在相关的东西上。

首先，这是正在查询的主表的关联映射，这是**问题**

```
/**
 * @var IssueType $type
 *
 * @ORM\ManyToOne(targetEntity="IssueType")
 * @ORM\JoinColumn(name="type_id", referencedColumnName="id")
 */
protected $type; 
```

*注意：实际上还有其他四个关联表，但上面的一个是“先失败”，所以我希望如果我能解决这个问题，我可以为其余的*

现在，直接从[本文](http://www.wjgilmore.com/blog/entry/the_power_of_doctrine_2s_custom_repositories_and_native_queries)工作并从[此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/native-sql.html)获取一些提示，我正在尝试从指定地理半径内的**问题表中提取数据。**但是，与文章中的示例不同，我的数据在单个表中并不平坦。`IssueRepository`在我的班级中输入我的自定义查找器：

```
public function findNear( $em, $point, $radius=1 )
{
  $rsm = new ResultSetMapping();

  $rsm->addEntityResult('MyBundle:Issue', 'i');
  $rsm->addFieldResult('i', 'id', 'id');
  $rsm->addFieldResult('i', 'title', 'title');
  $rsm->addFieldResult('i', 'detail', 'detail');
  $rsm->addFieldResult('i', 'lat', 'lat');
  $rsm->addFieldResult('i', 'lng', 'lng');

  $rsm->addJoinedEntityResult('MyBundle:IssueType' , 't', 'i', 'type');
  $rsm->addFieldResult('t', 'name', 'name');

  $query = $em->createNativeQuery(
    "SELECT i.*
          , ( 3959 * acos( cos( radians(?) ) * cos( radians( i.lat ) ) *
            cos( radians( i.lng ) - radians(?) ) + sin( radians(?) ) *
            sin( radians( i.lat ) ) ) ) AS distance
          , t.name as type_name
       FROM issue i
       LEFT JOIN issue_type t
         ON i.type_id = t.id
      GROUP BY i.id, t.name
     HAVING ( 3959 * acos( cos( radians(?) ) * cos( radians( i.lat ) ) *
            cos( radians( i.lng ) - radians(?) ) + sin( radians(?) ) *
            sin( radians( i.lat ) ) ) ) < ?
      ORDER BY distance"
    , $rsm
  );

  $query->setParameter( 1, $point->lat );
  $query->setParameter( 2, $point->lng );
  $query->setParameter( 3, $point->lat );
  $query->setParameter( 4, $point->lat );
  $query->setParameter( 5, $point->lng );
  $query->setParameter( 6, $point->lat );
  $query->setParameter( 7, $radius, Type::INTEGER );

  return $query->getResult();
} 
```

现在有点乱，但我只是想让它工作。一旦我尝试`IssueType`从`Issue`对象中提取关联对象，此查询返回的数据就会失败。

```
foreach ( $issues as $issue )
{
  // Fails, since Issue::getType() returns NULL
  echo $issue->getType()->getName();
} 
```

这导致一个

> “在非对象上调用成员函数 getName()”

错误。

现在，我不太了解 Doctrine2 的内部结构，所以我不知道这个基于 ResultSetMapping 的查询与我通常通过 ORM 执行的查询有何不同。

任何人都可以解释一下吗？

## 版本

*   PHP: **5.4**
*   PostgreSQL：**9.1**
*   Symfony：**Symfony 2.1**
*   教义：**2.3**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:53:20.657

可能（但我不确定）你必须描述“元列”

```
$rsm->addMetaResult('i', 'type_id', 'type'); 
```

# android - Android 中的 NSURLCache 替代方案

> ID：12613390
> 
> 赞同：3
> 
> 时间：2012-09-27T02:50:26.843
> 
> 标签：android, ios, caching

我的 iOS 应用程序中有自定义缓存引擎。

```
AFURLCache* urlCache = [[[AFURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:@""] autorelease];
[NSURLCache setSharedURLCache:urlCache]; 
```

现在想着安卓版。

那里的方法是什么？有没有办法设置内部自定义处理 HTTP 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-23T00:05:54.307

NSURLCache 的 Android 替代方案是 HttpResponseCache。

[http://developer.android.com/reference/android/net/http/HttpResponseCache.html](http://developer.android.com/reference/android/net/http/HttpResponseCache.html)

该类支持HttpURLConnection和HttpsURLConnection；DefaultHttpClient 或 AndroidHttpClient 没有平台提供的缓存。

# c# - 对象必须实现 IConvertible

> ID：12613397
> 
> 赞同：9
> 
> 时间：2012-09-27T02:52:00.957
> 
> 标签：c#, mysql, entity-framework, linq-to-entities

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidCastException：对象必须实现 IConvertible。

源错误：

```
Line 20:         public ActionResult Index()
Line 21:         {
Line 22:             var feeds = (from f in _db.AlertRules.Include("AlertRuleOutages")
Line 23:                          select f).ToList();
Line 24: 
```

堆栈跟踪：

```
[InvalidCastException: Object must implement IConvertible.]
   System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider) +9508841
   MySql.Data.Entity.EFMySqlDataReader.ChangeType(Object sourceValue, Type targetType) +376
   MySql.Data.Entity.EFMySqlDataReader.GetValue(Int32 ordinal) +129
   System.Data.Common.Internal.Materialization.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal) +215
   lambda_method(Closure , Shaper ) +468
   System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly(Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet) +218
   lambda_method(Closure , Shaper ) +218
   System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper) +170
   System.Data.Common.Internal.Materialization.RowNestedResultEnumerator.MoveNext() +235
   System.Data.Common.Internal.Materialization.ObjectQueryNestedEnumerator.TryReadToNextElement() +16
   System.Data.Common.Internal.Materialization.ObjectQueryNestedEnumerator.MoveNext() +57
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +327
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +58 
```

数据库 DDL：

```
CREATE TABLE alertruleoutage
(
Id        INT NOT NULL auto_increment,
RuleId    INT NOT NULL,
StartTime TIME NULL DEFAULT 00:00:00,
EndTime   TIME NULL DEFAULT 23:59:59,
WeekDays  TINYINT NULL,
Count     INT NULL,
TimeFrame TIME NULL DEFAULT 01:00:00,
PRIMARY KEY (Id),
KEY RuleId (RuleId),
CONSTRAINT RuleId FOREIGN KEY (RuleId) REFERENCES alertrule (Id)
);

CREATE TABLE alertrule
    (
    Id             INT NOT NULL auto_increment,
    FeedId         INT NOT NULL,
    TemplateId     INT NOT NULL,
    Enable         BIT (1) NULL DEFAULT b'1',
    `Rule`         VARCHAR (250) NULL,
    UpdateDateTime TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
    PRIMARY KEY (Id),
    KEY AlertFeedId (FeedId),
    KEY AlertTemplateId (TemplateId),
    CONSTRAINT FK_AlertFeedId FOREIGN KEY (FeedId) REFERENCES feed (Id),
    CONSTRAINT FK_AlertTemplateId FOREIGN KEY (TemplateId) REFERENCES alertruletemplate (Id)
    ); 
```

POCO 型号：

```
 [Table("AlertRuleOutage")]
public class AlertRuleOutage
{
    [Key]
    public int Id { get; set; }

    public int RuleId { get; set; }

    public DateTime? StartTime { get; set; }

    public DateTime? EndTime { get; set; }

    //public Week WeekDays { get; set; }

    public int? Count { get; set; }

    public DateTime? TimeFrame { get; set; }

    public virtual AlertRule Rule { get; set; }
}

    [Table("AlertRule")]
public class AlertRule
{
    [Key]
    public int Id { get; set; }

    public int FeedId { get; set; }

    public int TemplateId { get; set; }

    public bool? Enable { get; set; }

    public string Rule { get; set; }

    public DateTime? UpdateDateTime { get; set; }

    public virtual Feed Feed { get; set; }

    public virtual AlertRuleTemplate Template { get; set; }

    public virtual List<AlertRuleOutage> AlertRuleOutages { get; set; }
} 
```

数据库上下文：

```
 public DbSet<AlertRule> AlertRules { get; set; }

    public DbSet<AlertRuleOutage> AlertRuleOutages { get; set; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T03:23:15.117

输入错误的数据类型`AlertRuleOutage`

mysql`Time`应该映射到 .NET `TimeSpan`：

```
public TimeSpan? StartTime { get; set; } 
```

另见： http: [//www.devart.com/dotconnect/mysql/docs/DataTypeMapping.html](http://www.devart.com/dotconnect/mysql/docs/DataTypeMapping.html)

# android - android统计每个APP的3g流量，如何？

> ID：12613402
> 
> 赞同：15
> 
> 时间：2012-09-27T02:53:07.143
> 
> 标签：android, 3g, traffic, network-traffic, traffic-measurement

对于每个APP的统计网络流量，我现在使用的是[Android TrafficStats](http://developer.android.com/reference/android/net/TrafficStats.html)

我可以得到如下结果：

*   Youtube 50.30 MB
*   脸书 21.39 MB
*   谷歌播放 103.38 MB
*   （和更多...）

据我所知，“Android Trafficstats”只是一个指向 ac 文件的本机指针。（也许是 .so ？）

但它混合了 Wifi 和 3g 流量，有没有办法只获得非 WiFi 流量统计？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T10:07:12.110

晚上，我有办法做到这一点......

首先，我必须创建一个扩展 BroadcasrReceiver 的类，如下所示：

清单定义：

```
<receiver android:name=".core.CoreReceiver" android:enabled="true" android:exported="false">
  <intent-filter>
    <action android:name="android.net.ConnectivityManager.CONNECTIVITY_ACTION" />
    <action android:name="android.net.wifi.STATE_CHANGE" />
  </intent-filter>
</receiver> 
```

代码：

```
/**
 * @author me
 */
public class CoreReceiver extends BroadcastReceiver {
  public void onReceive(Context context, Intent intent) {
    if (Constants.phone == null) {
      // Receive [network] event
      Constants.phone=new PhoneListen(context);
      TelephonyManager telephony=(TelephonyManager) 
      context.getSystemService(Context.TELEPHONY_SERVICE);
      telephony.listen(Constants.phone, PhoneStateListener.LISTEN_DATA_CONNECTION_STATE);
    }

    WifiManager wifi=(WifiManager)context.getSystemService(Context.WIFI_SERVICE);
    boolean b=wifi.isWifiEnabled();
    if (Constants.STATUS_WIFI != b) {
       // WiFi status changed...
    }
  }
} 
```

下面还有一个电话统计监听器......

```
public class PhoneListen extends PhoneStateListener {
  private Context context;    
  public PhoneListen(Context c) {
     context=c;
  }    
  @Override
  public void onDataConnectionStateChanged(int state) {
    switch(state) {
      case TelephonyManager.DATA_DISCONNECTED:// 3G
        //3G has been turned OFF
      break;
      case TelephonyManager.DATA_CONNECTING:// 3G
        //3G is connecting
      break;
      case TelephonyManager.DATA_CONNECTED:// 3G
        //3G has turned ON
      break;
    }
  }
} 
```

最后，这是我的逻辑

1.  将计数收集到 SQLite DB 中。
2.  每 1 分钟通过 TrafficStats 收集所有应用网络使用情况，仅在 3G 开启时。
3.  如果 3G 关闭，则停止采集。
4.  如果 3G 和 WiFi 都打开，请停止收集。

据我所知，如果 3G 和 WiFi 都可用，网络流量将仅通过 WiFi。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-20T11:57:19.040

经过长时间的努力，我能够找到通过任何接口为每个已安装应用程序在 android 设备中获取数据的解决方案。

由于 Android 提供了 TrafficStats API，但这些 API 为每个应用程序 uid 提供编译数据统计信息，因为设备启动并且甚至 API 不支持通过特定应用程序的任何接口获取数据。即使我们依赖 TraffiucStates APIS，我们也会为每个应用程序获得一个新的数据统计信息。

所以我想使用隐藏的 API 来使用它..

在这里，我提到了通过 Android 中的任何接口获取每个应用程序的数据统计信息的步骤...

1.  建立“INetworkStatsSession”会话

    ```
    import android.net.INetworkStatsSession;
    INetworkStatsSession mStatsSession = mStatsService.openSession(); 
    ```

2.  根据您要测量的接口创建网络模板..

    ```
    import static android.net.NetworkTemplate.buildTemplateEthernet;
    import static android.net.NetworkTemplate.buildTemplateMobile3gLower;
    import static android.net.NetworkTemplate.buildTemplateMobile4g;
    import static android.net.NetworkTemplate.buildTemplateMobileAll;
    import static android.net.NetworkTemplate.buildTemplateWifiWildcard;

    import android.net.NetworkTemplate;

    private NetworkTemplate mTemplate;

    mTemplate = buildTemplateMobileAll(getActiveSubscriberId(this
                .getApplicationContext())); 
    ```

3.  GetActive 订阅者 ID：

    ```
    private static String getActiveSubscriberId(Context context) {
        final TelephonyManager tele = TelephonyManager.from(context);
        final String actualSubscriberId = tele.getSubscriberId();
        return SystemProperties.get(TEST_SUBSCRIBER_PROP, actualSubscriberId);
    } 
    ```

4.  通过传递应用程序 UID 收集各个应用程序的网络历史记录...

    ```
    private NetworkStatsHistory collectHistoryForUid(NetworkTemplate template,
        int uid, int set) throws RemoteException {
        final NetworkStatsHistory history = mStatsSession.getHistoryForUid(
                template, uid, set, TAG_NONE, FIELD_RX_BYTES | FIELD_TX_BYTES);
        return history;

    } 
    ```

5.  获取总消费数据：

    ```
    public void showConsuption(int UID){
        NetworkStatsHistory history = collectHistoryForUid(mTemplate, UID,
                SET_DEFAULT);

        Log.i(DEBUG_TAG, "load:::::SET_DEFAULT:.getTotalBytes:"+ Formatter.formatFileSize(context, history.getTotalBytes()));

        history = collectHistoryForUid(mTemplate, 10093,
                SET_FOREGROUND);
        Log.i(DEBUG_TAG, "load::::SET_FOREGROUND::.getTotalBytes:"+ Formatter.formatFileSize(context, history.getTotalBytes()));

        history = collectHistoryForUid(mTemplate, 10093,
                SET_ALL);
        Log.i(DEBUG_TAG, "load::::SET_ALL::.getTotalBytes:"+ Formatter.formatFileSize(context, history.getTotalBytes()));

    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-25T18:38:32.193

我找到了只获得 wifi 流量的方法

```
long totalbyte = Trafficstats.getTotalRxBytes();
long mobilenetworkbyte = Trafficstats.getMobileRxBytes();
String total = Long.toString(totalbyte);
String mobile = Long.toString(mobilenetworkbyte);
String wifibyte = total - mobile + "kb"; 
```

现在wifibyte字符串显示wifi总字节它对我有用我希望对你有用

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-27T04:08:35.893

尝试以下代码并关闭您的“WIFI”并仅检查“3G”

1.  在 Eclipse 中创建一个新的 Android 项目。请记住使用 TrafficStats 类，您必须针对 Android 2.2 (Froyo) 或更高版本的 API。

2.  在 /res/layout 文件夹中，我们将创建一个 main.xml 资源。对于这个项目，我们只是在垂直堆叠的线性布局中使用一系列文本视图。

    ```
     main.xml

         <?xml version="1.0" encoding="utf-8"?>

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

         android:layout_width="fill_parent"

         android:layout_height="fill_parent"

         android:orientation="vertical" >

         <TextView

         android:layout_width="fill_parent"

         android:layout_height="wrap_content"

         android:textSize="16sp"

         android:textStyle="bold"

         android:gravity="center"

         android:paddingBottom="20dip"

         android:text="Traffic Stats Demo" />

         <TextView

         android:layout_width="fill_parent"

         android:layout_height="wrap_content"

         android:textSize="14sp"

         android:textColor="#00ff00"

         android:gravity="center"

         android:text="Transmit Bytes" />

         <TextView

         android:layout_width="fill_parent"

         android:layout_height="wrap_content"

         android:textSize="14sp"

         android:gravity="center"

         android:text="0"

         android:id="@+id/TX"/>

        <TextView

        android:layout_width="fill_parent"

        android:layout_height="wrap_content"

        android:textSize="14sp"

        android:textColor="#ff0000"

        android:gravity="center"

        android:text="Receive Bytes" />

        <TextView

        android:layout_width="fill_parent"

        android:layout_height="wrap_content"

        android:textSize="14sp"

        android:gravity="center"

        android:text="0"

        android:id="@+id/RX"/>

        </LinearLayout> 
    ```

3.  布局到位后，我们可以转到 /src 文件夹。通过扩展 Activity 类创建 Main.java。让我们继续声明三个私有类变量。

主.java

```
 package com.authorwjf;

     import android.app.Activity;

     import android.app.AlertDialog;

     import android.net.TrafficStats;

     import android.os.Bundle;

     import android.os.Handler;

     import android.widget.TextView;

     public class Main extends Activity {

     private Handler mHandler = new Handler();

     private long mStartRX = 0;

     private long mStartTX = 0;

      } 
```

1.  我们将使用 on create override 来初始化我们的私有变量，并在 UI 线程上安排回调。记下对枚举 TrafficStats.UNSUPPORTED 的检查。虽然我对 TrafficStats 类的体验一帆风顺，但 Google 官方文档指出，某些设备可能不支持这种类型的报告，在这种情况下，调用会返回上述值。出于这个原因，防御性地编写代码是一个好主意，正如我在这里演示的那样。

    ```
     Main.java

         @Override

         public void onCreate(Bundle savedInstanceState) {

         super.onCreate(savedInstanceState);

         setContentView(R.layout.main);

         mStartRX = TrafficStats.getTotalRxBytes();

         mStartTX = TrafficStats.getTotalTxBytes();

         if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX ==     TrafficStats.UNSUPPORTED) {

          AlertDialog.Builder alert = new AlertDialog.Builder(this);

          alert.setTitle("Uh Oh!");

         alert.setMessage("Your device does not support traffic stat monitoring.");

         alert.show();

         } else {

         mHandler.postDelayed(mRunnable, 1000);

         }

           } 
    ```

2.  最后但并非最不重要的一点是，我们需要更新我们的显示并重新安排可运行文件。

    ```
     Main.java

          private final Runnable mRunnable = new Runnable() {

          public void run() {

          TextView RX = (TextView)findViewById(R.id.RX);

           TextView TX = (TextView)findViewById(R.id.TX);

           long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;

             RX.setText(Long.toString(rxBytes));

           long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;

           TX.setText(Long.toString(txBytes));

            mHandler.postDelayed(mRunnable, 1000);

               }

               }; 
    ```

# css - 980 px 包装不以 Ipad 为中心

> ID：12613406
> 
> 赞同：1
> 
> 时间：2012-09-27T02:53:30.130
> 
> 标签：css, ipad

我试图让一个带有彩色背景的简单包装器 div 以 iPad 为中心，从右到左，这样它就可以亲吻浏览器的两侧。我的代码如下。包装纸没有居中。它从窗口左侧开始 10 个像素。对此必须有一个简单的答案，但我似乎无法理解我做错了什么。你能帮我吗？

```
<style type="text/css">
   <!--
    body {
        background-color: #FFF;
    }
    #wrapper {
        width:980px;
        height:980px;
        margin-left:auto;
        margin-right:auto;
        background-color:#666666;
    }
</style>

<body>
    <div id="wrapper">
        This is a test
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:25:31.363

我现在刚刚遇到这个问题 - 旧的 Wordpress 网站，由于某种原因在 iPad 中左对齐，没有验证错误，包装器上的标准 CSS 自动边距如上所述居中。

修复了使用浏览器重置 CSS，我使用[了 Normalize](http://necolas.github.com/normalize.css/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:08:33.863

尝试删除 <!-- 这是 html 中注释的开始标记。我担心它会弄乱css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:22:26.787

```
<style type="text/css">
    body {
        background-color: #FFF;
        margin: 0;
        padding: 0;
    }
    #wrapper {
        width:980px;
        height:980px;
        margin-left:auto;
        margin-right:auto;
        background-color:#666666;
    }
</style>

<body>
    <div id="wrapper">
        This is a test
    </div>
</body> 
```

您是否缺少`<!DOCTYPE`声明？另外添加 `<meta name="viewport" content="" />`以获得更好的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T03:17:55.857

看到你的css代码，试试这个代码：

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<style type="text/css">
    body {
        background-color: #FFF;
    }
    #wrapper {
        width:980px;
        height:980px;
        margin:0 auto;
        background-color:#666666;
    }
</style>
</head> 
```

如果它不起作用，我没有其他想法。:)

# java - 获取 Google App Engine 项目的管理员 - Java

> ID：12613414
> 
> 赞同：0
> 
> 时间：2012-09-27T02:54:17.877
> 
> 标签：java, google-app-engine

是否可以在 Java 中以编程方式获取谷歌应用引擎项目中的管理员列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:56:19.747

如果您在谈论计费管理员，据我所知，每个应用程序只有一个管理员，无论如何您无法使用当前 API 访问此信息。

只有[appId API](https://developers.google.com/appengine/docs/java/appidentity/)会带来一些关于应用程序的信息，而不是管理员。

# jquery - Jquery Masonry 追加项目问题

> ID：12613416
> 
> 赞同：0
> 
> 时间：2012-09-27T02:55:00.077
> 
> 标签：jquery, backbone.js, jquery-masonry

我有一个执行此操作的主干获取视图方法：

```
var ResultsView = Backbone.View.extend({
  template : _.template($("#result_template").html()),
  render : function() {
    this.collection.each(function(result) {
      var $output = $(this.template(result.toJSON()));
      var $container = $('#result_content');
      $container.append($output)
      $container.masonry('appended', $output);
    }, this);
    return this;
  }
}); 
```

我要做的是为我的结果集合中的每个项目....将其附加到我的#result_content div，以与此处可以看到的相同的方式：http: [//masonry.desandro.com/demos/adding-项目.html](http://masonry.desandro.com/demos/adding-items.html)

这里的问题是布局没有被填充（它现在只是一个列。我必须在所有这些结束时调用 reload ，如下所示：

```
$container.masonry('reload') 
```

这不是我想要的。我想从上到下追加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:40:07.367

更改该行以`$container.prepend($output).masonry('reload');`删除后续行`$container.masonry('appended', $output);`，并且最后不要调用“重新加载”。

# android - 在 Android 中显示动态 Textview

> ID：12613420
> 
> 赞同：1
> 
> 时间：2012-09-27T02:55:10.833
> 
> 标签：android, android-layout

我正在尝试创建一个基于 smack 库的聊天应用程序。我认为我的问题与这个库无关，因为 logcat 可以正确发送和接收所有内容。我的问题是当我收到一条消息时它不显示。以下是我用来显示文本的方法。

```
public void TextCreating(String message) {

    Log.d("START", "Method Excution started.");

    layout = (LinearLayout) findViewById(R.id.layoutLinear);
    LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);
    tv = new TextView(this);
    tv.setLayoutParams(lparams);
    tv.setText(message);
    tv.setTextColor(Color.WHITE);
    Log.d("STARTED", "Text color OK.");
    layout.addView(tv);
    Log.d("STARTED", "Text didsplayed.");
} 
```

这种代码和平将作为收到的消息执行。这些接收到的消息通过一个名为 PacketListener 的侦听器进行处理。这个接收部分工作正常。在这个监听器中，当我调用上面的 TextCreating 方法时，它会执行到 tv.setTextColor(Color.WHITE); 最后一行不执行。这是什么原因？我怎么解决这个问题 ？提前致谢 ：）

编辑 ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Chat Room"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:text="Chat History :" />

<LinearLayout
    android:id="@+id/layoutLinear"
    android:layout_width="fill_parent"
    android:layout_height="250dp"
    android:orientation="vertical"
    android:background="#000000"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp" >

</LinearLayout>

<EditText
    android:id="@+id/editTextMessage"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/buttonSend"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Send" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:28:55.043

这是创建聊天框的替代解决方案。它的用途`ListView`。新品`message`到货时添加。

```
android:stackFromBottom 
```

可以设置为true，使它完全像一个聊天框。默认情况下它也有滚动。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:07:25.803

Android SDK 有一个通过蓝牙通信的示例聊天应用程序。你可以看一下代码。

它使用 a`ListView`来显示对话

希望这个答案有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:27:36.793

我已经在设备上运行了 Yours 代码，并没有发现任何问题。我已经进行了计时器调用，`TextCreating(String.valueOf(System.currentTimeMillis()) + " next call\n");`并且能够观察黑色 LinearLayout 中的文本。
我看到的唯一问题是`LinearLayout`不会滚动。因此，如果您添加更多文本，它将不可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:49:25.310

首先感谢大家的想法和帮助。我通过在代码中引入 Handler 来解决这个问题。我试图在我的 UI 线程中做所有事情。所以我修改了我的代码如下。

```
private Handler mHandler = new Handler();
public void TextCreating(final String message) {

    mHandler.post(new Runnable() {
        @Override
        public void run() {             
            layout = (LinearLayout) findViewById(R.id.layoutLinear);
            LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT);
            tv = new TextView(MUCchat.this);
            tv.setLayoutParams(lparams);
            tv.append(message);
            tv.setTextColor(Color.WHITE);
            layout.addView(tv);
        }
    });     
} 
```

这个链接帮助我解决了这个问题。 [从线程更新 textView](https://stackoverflow.com/questions/5400288/update-textview-from-thread-please-help)

# greasemonkey - 如何获取 Greasemonkey 脚本的原始安装 URL？

> ID：12613421
> 
> 赞同：1
> 
> 时间：2012-09-27T02:55:18.167
> 
> 标签：greasemonkey

我有一个站点在不同 URL 的几个环境中运行（即*dev.mysite.com*、*qa.mysite.com*、*uat.mysite.com*等）。
每个环境都有一个 Greasemonkey 脚本 ( *myGM.user.js* )，但它的版本可能不同，并且根据环境，需要调用不同的 Web 服务来获取一些数据。

在我的用户脚本中，我想获取最初安装该用户脚本的 URL，因此我可以提取主机并将其用作我的 Web 服务 URL 的前缀。

例如，如果我的脚本是从 安装的
    `http://dev.mysite.com/myGM.user.js`，
我想从中获取
    `http://dev.mysite.com/myGM.user.js`、
提取
    `http://dev.mysite.com/`
并调用
    `http://dev.mysite.com/myWebService/getData`
数据。

实现这一目标的最简单方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:01:44.397

我最终将一个 ASPX 页面（可能是 PHP 或其他）添加到与`myGM.user.js`. 它只是确定当前主机（服务器端）并将其输出为文本。

因此，如果您浏览到
`http://dev.mysite.com/getHost.aspx`
响应将是
`http://dev.mysite.com/`
如果您浏览到
`http://uat.mysite.com/getHost.aspx`
响应将是
`http://uat.mysite.com/`

然后，在我`myGM.user.js`添加
`// @resource rootUrl GetSiteRoot.aspx`
的这个资源指令中，获取一个相对于安装用户脚本的 URL 的 URL，并将响应与用户脚本本身一起下载。

这使我可以调用
`GM_getResourceText('rootUrl')`
用户脚本的主体并确切地知道我的脚本安装在哪里，而无需对环境进行任何更改。

PS，不过，我会提交一个功能请求，以便添加 GM_Info API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:11:05.037

即使 Greasemonkey 附加组件记录了脚本的原始安装 URL，Greasemonkey 脚本也无法使用此信息。

[这似乎是GM_info](http://wiki.greasespot.net/GM_info)应该提供的东西，但事实并非如此。您可以[尝试打开功能请求](https://github.com/greasemonkey/greasemonkey/issues?state=open)。

目前，唯一的**解决方法**是在每个地方都有稍微不同的脚本版本。（*诚​​然，您已经这样做了。 ）具体来说，在脚本的*[元数据块](http://wiki.greasespot.net/Metadata_Block)中添加和更改一行。
您可以使用[指令`@downloadURL`，](http://wiki.greasespot.net/Metadata_Block#.40downloadURL)如下所示：

```
// ==UserScript==
// @name        YOUR SCRIPT
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @downloadURL http://qa.mysite.com/myGM.user.js
// ==/UserScript== 
```

或者创建自己的指令，如下所示：

```
// ==UserScript==
// @name            YOUR SCRIPT
// @include         http://YOUR_SERVER.COM/YOUR_PATH/*
// @myInstallLocale http://dev.mysite.com/myGM.user.js
// ==/UserScript== 
```

脚本会像这样读取位置：

```
var dwnloadURL   = "";
var dwnldURLMtch = GM_info.scriptMetaStr.match (/\n\s*\/\/\s+@downloadURL\s+(.+?)\s*\n/i);
if (dwnldURLMtch  &&  dwnldURLMtch.length) {
    dwnloadURL   = dwnldURLMtch[1];
}
console.log (dwnloadURL); 
```

# d - D Lang 文件观察器

> ID：12613422
> 
> 赞同：4
> 
> 时间：2012-09-27T02:55:26.857
> 
> 标签：d

我是 D 语言的新手，正在寻找一种有效的方法来监视特定文件的更改。

最终我想要的是有一个观察者等待文件更改，然后根据文件的内容执行命令（将其视为纯文本队列列表）。

代码示例会很好，但指出我正确的方向也会非常有帮助。

此外，这将在 Linux 环境中运行。

## 更新

我正在使用系统实用程序来监视文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T08:39:20.907

如果你在 Linux 上，你可以使用[`inotify`](http://en.wikipedia.org/wiki/Inotify)，在`/usr/include/sys/inotify.h`（在我的系统上`$PREFIX`可能会有所不同）中找到。

> inotify 在许多需要对文件系统更改做出反应的情况下非常有用。如果没有 inotify，它可以通过定期（或手动请求）检查文件和目录来实现。但是这种方式很慢并且浪费处理器时间。inotify 带来了如何对文件系统更改做出反应的非常快速且经济的方法。

您唯一需要做的就是将此标头转换为“D 标头”，或者您使用[`DStep`](https://github.com/jacob-carlborg/dstep)它可能能够为您翻译标头。

您可能还想[`fanotify`](http://lwn.net/Articles/339253/)使用`inotify`.

不幸的是，我不知道如何在 Windows 上做到这一点，我发现的只是一个 Windows-API 函数：[`FindFirstChangeNotification`](http://msdn.microsoft.com/en-us/library/aa364417%28VS.85%29.aspx)

# c++ - STL 向量：移动向量的所有元素

> ID：12613428
> 
> 赞同：61
> 
> 时间：2012-09-27T02:55:55.130
> 
> 标签：c++, stl, stdvector

我有两个 STL 向量`A`，`B`我想清除所有元素`A`并将所有元素移动`B`到`A`然后清除`B`。简单地说，我想这样做：

```
std::vector<MyClass> A;
std::vector<MyClass> B;
....
A = B;
B.clear(); 
```

由于`B`可能很长，因此需要`k*O(N)`执行此操作，其中`k`是一个常数，并且`N`是`max(size_of(A), size_of(B))`。我想知道是否有更有效的方法来做到这一点。我能想到的一件事是将`A`and定义`B`为指针，然后在恒定时间内复制指针并清除`B`。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-09-27T02:58:09.527

使用 C++11，它很简单：

```
A = std::move(B); 
```

现在`A`包含以前由 持有的元素，`B`现在`B`是空的。这避免了复制：内部表示只是简单地从 移动`B`到`A`，所以这是一个`O(1)`解决方案。

至于 C++03，正如 Prætorian 所说，你可以交换向量。该函数有一个特殊化`std::swap`，它以`std::vector`s 作为其参数。这有效地交换了内部表示，因此您最终避免创建它们所持有的元素的副本。此功能也适用于`O(1)`复杂性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-27T02:59:21.787

如果你有 C++11 编译器，你可以`B`进入`A`.

```
A = std::move(B); 
```

如果您使用的是较旧的编译器，只需`swap`两个

```
A.swap(B); 
```

在这两种情况下，唯一的*O(N)*操作将是清除`A`. 在第一种情况下，清除将在分配本身期间完成，而在第二种情况下，它将在`B`超出范围时发生（因为交换了内容）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T03:13:29.297

> 我有两个 STL 向量 A 和 B，我想清除 A 的所有元素并将 B 的所有元素移动到 A，然后清除 B。

这可以通过组合来完成`swap`。第一次交换`A`和`B`上半场。然后`swap`一个空`std::vector<>`的 with`B`或 call `clear()`。不同的是`clear()`不会释放内存，只会销毁对象：

```
std::vector<int> a, b; // initialize them somehow
swap(a,b);

// clear b without releasing the memory:
std::size_t capacity = b.capacity();
b.clear();
assert(b.capacity()==capacity);

// or release the memory
std::vector<int>().swap(b);
assert(b.capacity()==0); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T03:17:41.737

只需在向量上调用 clear 将花费 o(1) 时间，因为 clear 不会做任何事情，如果您真的想在将 B 分配给 A 后清除 B，您可以执行以下操作

```
A.swap(B);
{
    std::Vector<..> C;
    c.swap(B);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-17T11:46:32.183

std::move 工作正常。这是相同的示例代码

```
 vector<int> v1 = {1,2,3,10,20,30,100,200,300,999};
    vector<int> v2;

    cout << "Size of v1 before move = " << v1.size() << endl;
    cout << "Capacity of v1 before move = " << v1.capacity() << endl;

    v2 = std::move(v1);

    cout << "Size of v2 after move = " << v2.size() << endl;
    cout << "Capacity of v2 after move = " << v2.capacity() << endl;

    cout << "Size of v1 after move = " << v1.size() << endl;
    cout << "Capacity of v1 after move = " << v1.capacity() << endl;

-----------Output-------------------------
Size of v1 before move = 10
Capacity of v1 before move = 10
Size of v2 after move = 10
Capacity of v2 after move = 10
Size of v1 after move = 0
Capacity of v1 after move = 0 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-27T03:07:58.997

交换函数就是这样做的。

```
#include <iostream>
#include <iterator>
#include <vector>

int main(int argc, char* argv)
{
  std::vector<int> A;
  std::vector<int> B;

  for (int i = 0; i < 10; ++i)
  {
     B.push_back(i);
  }

  std::cout << "Before swap\n";
  std::cout << "A:";
  std::copy(A.begin(), A.end(), std::ostream_iterator<int>(std::cout, " "));
  std::cout << "\nB:";
  std::copy(B.begin(), B.end(), std::ostream_iterator<int>(std::cout, " "));
  std::cout << "\n";

  A.swap(B);
  B.clear();

  std::cout << "After swap\n";
  std::cout << "A:";
  std::copy(A.begin(), A.end(), std::ostream_iterator<int>(std::cout, " "));
  std::cout << "\nB:";
  std::copy(B.begin(), B.end(), std::ostream_iterator<int>(std::cout, " "));
  std::cout << "\n";
} 
```

输出

```
Before swap
A:
B:0 1 2 3 4 5 6 7 8 9 
After swap
A:0 1 2 3 4 5 6 7 8 9 
B: 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-22T02:08:11.267

如果你不能 std::move 或 std::swap 向量（例如，因为 A 和 B 是相关的但不同的类型，可能只有 const 不同），你可以这样做：

```
std::vector<MyClass>       A;
std::vector<const MyClass> B;
// ...
for( auto& a : A )
{
    B.emplace_back( std::move( a ) );
} 
```

请注意，这使 A 具有相同数量的元素，但它们都处于不确定状态（即，它们可以被分配或破坏，但不能被读取）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-09T07:06:03.340

我没有代表发表评论，但我想提一下：[https:](https://en.cppreference.com/w/cpp/container/vector/operator%3D) //en.cppreference.com/w/cpp/container/vector/operator%3D void.pointer 是正确的。尤其是...

> 2) 移动赋值运算符。使用移动语义将内容替换为 other 的内容（即 other 中的数据从 other 移动到此容器中）。other 之后处于有效但未指定的状态。

因此，根据标准，Praetorian 的答案是错误的。但是，至少对于 MSVC 来说，这已经足够好了，因为无论如何该实现都会清除列表（对于大多数人来说可能是正确的）。

有趣的是，由于我们声明了一个移动构造函数，因此不会声明隐式移动赋值运算符。因此我们“知道” std::vector 必须声明一个移动赋值运算符。

# php - 使用 JQuery slidedown() 后输入框文本不显示文本

> ID：12613429
> 
> 赞同：0
> 
> 时间：2012-09-27T02:55:55.893
> 
> 标签：php, javascript, jquery

我有一个表单，如果他们有代理，他们选择按钮，多个输入框使用 JQuery 中的 SlideDown() 向下滑动。添加并提交文本后，值将存储为会话，如果有错误，则用户将被发送回表单页面并必须进行更正。现在我有了它，如果将分配给相应框的值发回，输入框将向下滑动。但是这些值没有显示出来，你看不到它们，如果你点击一个，你会看到光标在哪里，你可以知道这些值在那里。

输入段代码：

```
<div class="agensele"> Do you have an agent? <input type="submit"  value="Yes"  name="agentsele" class="agentsele"/></div><!----- END .InputInner ---------->

<input type="hidden" value="" name="hiddenagentsele" />

     <div class="noagensele"> Do you have an agent? <input type="submit"  value="No" name="noagentsele" class="noagentsele"/> </div><!----- END .InputInner ---------->
     <input type="hidden" value="" name="hiddennoagentsele" />
</div><!---------------------------------END .InputContaienr ----------------------------------->
<script>
$(".agentsele").click(function () {
    return false;   
});
$(".agentsele").click(function () {
    $('input[name=hiddenagentsele]').val("clicked");
    $('input[name=hiddennoagentsele]').val("unclicked");    
});
$(".noagentsele").click(function () {
    return false;   
});
$(".noagentsele").click(function () {
    $('input[name=hiddennoagentsele]').val("clicked");  
    $('input[name=hiddenagentsele]').val("unclicked");
});

</script>
<br>
<div class="InputContainer">
<span class="agent">Agent Name: </span><div class="InputInner"> <input type="text" name="agentname"  class="agentinput" value="<?php echo $_SESSION['agentname']; ?>"></div><!----- END .InputInner ---------->
<?php 
$setError=$_GET['seterror']; 
if($setError == 1){
if (!isset($_SESSION['agentname']) && (isset($_SESSION['yesele']))){
    echo "<span style='color:red;' class='errorMsg'>*Required</span>";
    }
}
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->

<div class="InputContainer">
<span class="agent">Agent Phone Number: </span><div class="InputInner"> <input type="text" name="agentphone"  class="agentinput" value="<?php echo $_SESSION['agentphone']; ?>"></div><!----- END .InputInner ---------->
<?php 
$setError=$_GET['seterror']; 
if($setError == 1){
if (!isset($_SESSION['agentphone']) && (isset($_SESSION['yesele']))){
    echo "<span style='color:red;' class='errorMsg'>*Required</span>";
    }
}
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<div class="InputContainer">
<span class="agent">Agent's Email: </span><div class="InputInner"> <input type="text" name="agentemail"  class="agentinput" value="<?php echo $_SESSION['agentemail']; ?>" ></div><!----- END .InputInner ---------->
<?php 
$setError=$_GET['seterror']; 
if($setError == 1){
if (!isset($_SESSION['agentemail']) && (isset($_SESSION['yesele'])) ){
    echo "<span style='color:red;' class='errorMsg'>*Required</span>";
    }
}
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<div class="InputContainer">
<span class="agent">Confirm Agent's Email: </span><div class="InputInner"> <input type="text" name="agentemailone"  class="agentinput" value="<?php echo $_SESSION['agentemail']; ?>" ></div><!----- END .InputInner ---------->
<?php 
             $setError=$_GET['seterror'];
             if ($setError == 2){

                echo "<div style='color:red;' class='errorMsg'> Your Agent Emails Did Not Match</div>";
             }

             ?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
 <script type='text/javascript'>
    function analyzeagentsection() {

            $(".agentinput").slideDown(1000, function() {});
            $(".agent").slideDown(1000, function() {});

            $(".agentsele").css("visibility", "hidden");
            $(".agensele").css("visibility", "hidden");
            $(".noagentsele").css("visibility", "visible");
            $(".noagensele").css("visibility", "visible");
            $(".agentinput").css("visibility", "visible");

    }
    </script>
    <?php 

if ($_SESSION['yesele'] == 'yes'){

echo '<script type="text/javascript">'
   , 'analyzeagentsection();'
    ,'</script>';
}
    ?>
<script>
$(".agentsele").click(function () {

    //dropdown.bind('change', function(){   
    $(".agentinput").slideDown(1000,function(){
    });
    $(".agent").slideDown(1000,function(){
    });
    $(".agentsele").css("visibility", "hidden");
    $(".agensele").css("visibility", "hidden");
    $(".noagentsele").css("visibility", "visible");
    $(".noagensele").css("visibility", "visible");
    $(".agentinput").css("visibility", "visible");
});

$(".noagentsele").click(function () {

    //dropdown.bind('change', function(){   
    $(".agentinput").slideUp(1000,function(){
    });
    $(".agent").slideUp(1000,function(){
    });
    $(".agentsele").css("visibility", "visible");
    $(".agensele").css("visibility", "visible");
    $(".noagentsele").css("visibility", "hidden");
    $(".noagensele").css("visibility", "hidden");
    $(".agentinput").css("visibility", "hidden");
});

</script> 
```

CSS代码：

```
 .agent {
    display: none;
    float: left;
    width: 100%;
    margin-bottom: 1%;

}
.agentinput {
    display:none; width:100%; float:left; /*height:auto;*/

}
.noagentsele {
    visibility:hidden;
}
.noagensele{
    visibility:hidden;
    display: block;
}
.agentsele {

}
.agensele{

    display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:08:19.180

实际上，我只是检查了一个值 JavaScript，如果是这样，只需将框更改为可见。

代码：

```
 <script type='text/javascript'>
    function analyzeagentsection() {

            $(".agentinput").slideDown(1000, function() {});
            $(".agent").slideDown(1000, function() {});

            $(".agentsele").css("visibility", "hidden");
            $(".agensele").css("visibility", "hidden");
            $(".noagentsele").css("visibility", "visible");
            $(".noagensele").css("visibility", "visible");
            $(".agentinput").css("visibility", "visible");

    }
    </script>
    <?php 

if ($_SESSION['yesele'] == 'yes'){

echo '<script type="text/javascript">'
   , 'analyzeagentsection();'
    ,'</script>';
}
    ?>
<script> 
```

感谢您的辛勤工作！

# pointers - 如何有效地设置数据层次结构/树中唯一子项的值（高级）

> ID：12613432
> 
> 赞同：0
> 
> 时间：2012-09-27T02:56:52.443
> 
> 标签：pointers, data-structures, tree

我正在做一些个人研究，发现需要有效地修改（可能非常大）数据树中的数据。数据由简单数据组成，只是一个整数或可能是一个小对象。在解析树时，我需要修改所有类似的对象（但仅限于子树中的对象）。这有点难以解释，所以我添加了一个图像作为示例来提供帮助。

![例子](../Images/36190217c0f3ed458c195f42b4191cf7.png)

在上图中，字母代表数据的值（相同的字母代表相同的数据），括号中的数字是唯一值，因此我可以参考它们。

所以假设我正在解析树，我目前在节点 2。我已经确定我需要修改 'a' 的值并将其更改为 'g'，但我只想修改当前节点和所有子节点. （所以 2 和 9 将变为“g”，而 1 和 7 仍为“a”）。我可以递归搜索所有孩子并手动更改它，但树可能非常大。如果我想更改 a 的所有值，我可以简单地将数据存储为双指针，然后更改指针指向的值。所以我的问题是，是否有任何已知的方法可以在可能恒定的时间内以我想要的方式修改数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:24:48.910

我会这样做的方式是插入树。

为节点创建一个类

```
class node
{
    node* dataParent;
    CustomType* value;
    // put regular tree pointers here
} 
```

然后，当您在遍历时插入时， dataParent 指向具有相同数据的最后一个父级。如果没有相同的父母，它将为空，并且值不会为空。如果它有一个相同的父级，则 value 将为 null 并且某些内容将在 Custom parent 中。但是，您的检索不会是恒定的时间，您必须遍历直到值不为空。

这是我能想到的最好的方法。它至少是日志 ni 认为。有一阵子了。

一件事是插入将是昂贵的。

# c++ - C++ 程序检查标签有效性

> ID：12613434
> 
> 赞同：0
> 
> 时间：2012-09-27T02:57:11.927
> 
> 标签：c++, debugging, tokenize

我是 C++ 的初学者，并试图使检查按预期工作。但几乎所有测试都返回 true。在这种情况下，它只假设返回 true：

```
<red> Red blank <dim> I'm now dim and red. </dim> </red> 
```

但这在现在也返回 true：

```
<red> Blah I'm red.<dim> Im dim now </red> </dim> 
```

或这个 ：

```
 <red> blah <im dim now 
```

所以我想知道我的代码中是否有一些我忽略的东西。

```
bool is_well_formed(ifstream& ifs, string& error_msg) {

string fname,line;
Token tok;
Lexer lexer;
tags.insert("blue");
tags.insert("red");
tags.insert("cyan");
tags.insert("white");
tags.insert("yellow");
tags.insert("magenta");
tags.insert("dim");
tags.insert("underline");
tags.insert("bold");

stack<string> tagstack;
while (getline(ifs, fname)) { 
    // tries to open the file whose name is in string fname

    if (ifs.fail()) {
        cerr << "ERROR: Failed to open file " << fname << endl;
        ifs.clear();
    } else {
        while (getline(ifs, line)) {
            lexer.set_input(line);
            while (lexer.has_more_token()) {
                tok = lexer.next_token();
                string tmpTok = tok.value;
                switch (tok.type) {
                case TAG:

                    // If it has /, remove / from tmpTok
                if (tok.value[0] == '/') {
                    // If it's a closing t
                        tmpTok = tmpTok.substr(1,tmpTok.length()-1);
                    }
                    if(tags.find(tmpTok) == tags.end()) {
                    // Check whether the encountered tag is valid
                    error_return("Tag " + tmpTok + " is invalid!");
                    return false;
                     } else {
                     // Valid Tag encountered

                     tagstack.push(tmpTok);
                     // Check if the tags are formed properly
                            if (tmpTok.find('/')) {
                             // Remove / from tmpTok
                            string closingTag =  tmpTok;
                                string openingTag = tagstack.top();
                                tagstack.pop();
                    if(closingTag.compare(openingTag) != 0) {
                        error_return(closingTag+"doesn't match" +openingTag);
                        return false;
                      } //else 
                                  //  return true; // if the file is well formed
                 }/**else{
                    tagstack.push(tmpTok);
                 }*/
                     }// else end    

                    break;
               case IDENT:
                   // cout << "IDENT: " << tok.value << endl;
                    break; 
                case ERRTOK:
                    error_return("Syntax error on this line\n");
                    return false;
                    //cout << "Syntax error on this line\n";
                    break;
                case ENDTOK:
                    break;
                }
            }
        }
    }
}
return true; // if the file is well-formed
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:24:21.033

对于这么简单的事情（这一定很简单，因为这不可能解析现实世界中的谁知道你将要得到的 XML）有几件事可能会有所不同，但你的直接问题是直截了当的：

将`stack<string> tagstack`声明移到每行循环之外，或者更好的是，移到整个处理循环之外。一旦您将标签压入堆栈并退出`else{}`声明它的块的范围，它现在所在的位置，该状态就会丢失。

您的状态机可以使用一些工作来提高健壮性，但这是另一个问题，请先修复标签堆栈的范围。

你需要在**调试器**下运行它，你应该习惯这一点，因为我认识的每一位专业 C/C++ 工程师都将他们一半的生产生活都花在了一个人身上。它伴随着业务而来。话虽如此，关于始终返回 true，我会将这些问题提供给您，而不是在这里回答，而是再次在**调试器中进行调查**

1.  如果词法分析器从不返回标记类型的 TAG 会发生什么？
2.  如果词法分析器返回一个 TAG 类型的标记，但它从不以“/”开头，会发生什么？
3.  如果词法分析器返回一个标记类型的 TAG 会发生什么情况，它以“/”开头，但您随后继续砍掉“/”？

在您的代码中的一个地方，您似乎正在检查令牌的第一个字符是否有“/”，而不是两行之后，您似乎试图丢弃开始和结束元素标记“<”和“>” . 具体来说：

```
if (tok.value[0] == '/') {
   // If it's a closing t
   tmpTok = tmpTok.substr(1,tmpTok.length()-1);
} 
```

这两行代码对于结束标签是不一致的。首先你检查一个前导'/'，表明 <> 已经被剥离，下一行你继续从字符串中剥离前导和尾字符，就好像它仍然*存在*两个 <>。但是如果它们不存在怎么办（而且它们不可能存在，否则您对“/”的检查将是错误的。您现在看到了吗？您正在切掉“/”。这重要吗？好吧。再往下看代码，我们发现：

```
if (tmpTok.find('/')) {
   // Remove / from tmpTok
   string closingTag =  tmpTok;
   string openingTag = tagstack.top();
   tagstack.pop();
   if(closingTag.compare(openingTag) != 0) {
      error_return(closingTag+"doesn't match" +openingTag);
      return false;
   } //else
} 
```

**'/' 检查中的任何代码都不会执行，因为您只是将其切断。**因此，您将遍历整个文件，在令牌认为它们都是条目令牌之后添加令牌，然后用完行，然后presto，返回true。实际上**，如果文件末尾的 tagstack 上有任何 LEFT ，则必须存在不平衡，因此会出现错误**。将该*条件*检查作为整体评估的一部分，我保证您会开始看到错误的过滤。

现在让你去**调试器**。我设法找到所有这些只是仔细阅读代码。想象一下在调试器中逐行*运行*时您会看到的内容，您可以在其中实时查看更改。

# java - 使用 log4j 将 java 游戏室记录到单独的日志文件是个好主意吗？

> ID：12613435
> 
> 赞同：3
> 
> 时间：2012-09-27T02:57:23.470
> 
> 标签：java, spring, logging, log4j, netty

我正在开发基于别人框架，netty和spring的顶部的游戏服务器。

而且我想知道使用 log4j 为每个游戏室生成单独的文件是否是一种好方法。由于许多游戏室服务器必须保持打开大量日志文件。另一方面，如果只有一个日志文件，那将是一团糟，在分析问题时需要解析和过滤。

当我需要知道如何实现它时，如果许多日志文件仍然是一个好方法。我看过这个问题[configure log4j to log to log to custom at runtime](https://stackoverflow.com/questions/1324053/configure-log4j-to-log-to-custom-file-at-runtime)，但第一个答案并不清楚，如何最小化每次尝试写入单独的日志文件所需的代码行。我已经通过放入配置文件尝试了第二个答案

```
log4j.appender.logfile.File=${logfile.name} 
```

但框架有

```
PropertyConfigurator.configure(System.getProperty("log4j.configuration")); 
```

如果在开始时未指定日志文件，则会失败。

欢迎任何想法和意见！谢谢

UPD：这个链接对我来说似乎也很有帮助。[Log4j 记录到单独的文件](https://stackoverflow.com/questions/7565756/log4j-logging-to-separate-files)但仍然：这是个好主意以及如何以最少的编码动态切换输出日志文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T03:04:56.823

真的，归根结底，为游戏室拥有多个日志文件将是矫枉过正。文件 I/O 会对性能产生影响，即使可以忽略不计。此外，作为程序员，我们可以使用许多工具来解析和过滤信息，事后这样做似乎更合理。

例如，只要每个游戏室在记录时匹配特定模式，您就可以轻松地使用 grep 和 Linux`>`运算符解析游戏室 X 的所有数据，然后写入另一个文件，您可以在其中单独分析它。让您的生产服务器执行此操作，当您可能会或可能不会查看日志时，并不是对资源的最佳利用。

例如，运行这个命令可以快速获得我需要的关于游戏室 X 的所有信息：

```
grep "game room x" mainLog.log > outputToAnalyze.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:01:02.400

我同意 jmort253，但如果你真的想要每个房间有一个文件，请为每个房间创建一个附加程序：

如果房间是静态的，只需在 log4j 配置文件中定义附加程序，如果不在运行时执行：

这正是[这里](https://stackoverflow.com/questions/1324053/configure-log4j-to-log-to-custom-file-at-runtime)接受的答案所说的：

```
 SimpleLayout layout = new SimpleLayout();    
  FileAppender appender = new FileAppender(layout,"<room_file_name>",false);    
  logger.addAppender(appender); 
```

基本上，您不需要配置文件，那里的代码替换它并使用它们的文件名动态定义附加程序，所以我建议：

1.  编写一个方法来创建接收文件名作为参数的动态附加程序（并且可能返回记录器或接收记录器并将附加程序添加到其中）
2.  在创建房间的地方调用该方法
3.  将带有新附加程序的记录器分配给每个房间并使用它

# vb.net - 标签的二维数组

> ID：12613440
> 
> 赞同：1
> 
> 时间：2012-09-27T02:59:10.960
> 
> 标签：vb.net

以下给了我一个空引用错误。我怎样才能在避免错误的同时完成这个简单的任务？

谢谢！

编辑：L1、L2 等是我表单中的标签。

```
Dim labelArray(,) As Label = {{L1, L2, L3, L4}, {L5, L6, L7, L8}, {L9, L10, L11, L12}, {L13, L14, L15, L16}}

private sub button_click(stuff that goes in here)
labelArray(zeroPoint.X, zeroPoint.Y).BackColor = Color.LimeGreen
end sub 
```

编辑：我通过在表单加载方法中执行以下操作来使其工作..

```
labelArray(0, 0) = Me.L1
    labelArray(0, 1) = Me.L2
    labelArray(0, 2) = Me.L3
    labelArray(0, 3) = Me.L4

    labelArray(1, 0) = Me.L5
    labelArray(1, 1) = Me.L6
    labelArray(1, 2) = Me.L7
    labelArray(1, 3) = Me.L8

    labelArray(2, 0) = Me.L9
    labelArray(2, 1) = Me.L10
    labelArray(2, 2) = Me.L11
    labelArray(2, 3) = Me.L12

    labelArray(3, 0) = Me.L13
    labelArray(3, 1) = Me.L14
    labelArray(3, 2) = Me.L15
    labelArray(3, 3) = Me.L16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:14:53.250

您的标签数组初始化程序在 InitializeComponent() 方法之前运行，您的所有标签都在该方法中被实例化。您实际上是在向数组添加一堆空引用。

将数组声明保留在原处，但将赋值代码移动到表单构造函数的末尾，我认为这将解决问题。

除此之外，您还需要检查 zeropoint.X 和 zeropoint.Y 结果是否为有效索引。请记住，默认情况下，vb.net 索引的工作方式与 C# 或 VB6 略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:02:19.490

尝试这个，

```
Dim labelArray(,)
Private Sub button_click(stuff that goes in here)
    labelArray = New Label(,) {{l1, l2, l3, l4}, {l5, l6, l7, l8}, {l9, l10, l11, l12}, {l13, l14, l15, l16}}
    labelArray(zeroPoint.X, zeroPoint.Y).BackColor = Color.LimeGreen
End Sub 
```

# android - Android 2.1 getEditableText() 返回 null / 空字符串

> ID：12613445
> 
> 赞同：2
> 
> 时间：2012-09-27T02:59:31.410
> 
> 标签：android, string, methods, gettext

我有一个简单的应用程序，它有一个编辑文本字段和一个按钮。我想获取edittext字段的值并将其存储到字符串中的按钮（稍后解析）。但我什至坚持使用 getEditableText() 方法读取值。我正在将值打印到 Log.d() 但该值似乎为空或至少为空字符串。我哪里错了？

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="26dp"
        android:text="@string/title"
        tools:context=".MainActivity" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="38dp"
        android:inputType="text"
        android:ems="10" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:text="@string/button1"
        android:onClick="createarray" />

</RelativeLayout> 
```

MainActivity.java

```
package com.example.hw1;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    int[] numberarray;

    public void createarray(View v){
       setContentView(R.layout.activity_main);
       //EditText editText1 = (EditText)findViewById(R.id.editText1);
       //Toast.makeText(this,editText1.getText().toString(),
       //Toast.LENGTH_SHORT).show();
       //String etoutput = editText1.getText().toString();
       String etoutput = ((EditText)findViewById(R.id.editText1)).getEditableText().toString().trim();
       Log.d("etoutput",etoutput);
       if(etoutput.length() > 0){
           Log.d("etoutput length","its got something");
       }
       else{
           Log.d("etoutput length","EMPTY!!");
       }
       //Log.d("etoutput","in here");
       //Log.d("etoutput",etoutput);
       String[] sepetoutput = etoutput.split("[\\s,]+");

       numberarray = new int[sepetoutput.length];

       for (int i=0;i<sepetoutput.length;i++){
           try{
               Log.d("i",Integer.toString(i));
               numberarray[i] = Integer.parseInt(sepetoutput[i]);
           }catch(NumberFormatException nfe){          

           }
       }

       Toast.makeText(this,"Array size: " + numberarray.length,
               Toast.LENGTH_SHORT).show();
      ((EditText)findViewById(R.id.editText1)).setText("123456");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:09:12.727

每次`setContentView()`按`button`. 此操作会将 重置为`EditText`您在 Xml 布局中定义的状态（为空）。在您的方法中删除该行，`createarray`您应该得到您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:11:19.073

我认为您应该在 OnCreate 过程中调用 createarray 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:04:07.933

你有没有尝试过：

```
String etoutput = (EditText)findViewById(R.id.editText1)).getText().toString().trim(); 
```

# android - 使用 adb 安装 apk 的发行版时权限会发生什么变化

> ID：12613447
> 
> 赞同：2
> 
> 时间：2012-09-27T02:59:56.950
> 
> 标签：android, apk, adb

最近，我得到了一些 3rd 方应用程序的发布版 apk。我使用 adb 安装了它

```
adb install <path to apk> 
```

但是当我运行它时，我收到错误消息

```
java.io.FileNotFoundException: /mnt/sdcard/<package name>/logging.properties (Permission denied) 
```

那么权限会怎样呢？

为什么我没有询问权限？

它们是否被隐式授予应用程序？

我猜应用程序应该问我这个问题，但它没有。我怎样才能运行这个应用程序？顺便说一句，我正在使用模拟器进行测试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:39:49.693

如果您安装使用`adb install`权限被隐式授予。毕竟这是一个开发者工具。“权限被拒绝”消息看起来像一个错误：应用程序缺少“READ/WRITE_EXTERNAL_STORAGE”权限，或者找不到文件并给您错误消息。

# html - 如何在图像之后开始段落？

> ID：12613448
> 
> 赞同：1
> 
> 时间：2012-09-27T03:00:11.333
> 
> 标签：html, image, wordpress

我正在尝试使我的 wordpress HTML 布局如下：

```
IMG paragraph 1 paragraph 1 
IMG paragraph 1 ..
IMG
IMG

paragraph 2... 
```

其中所有 IMG 指的是单个图像，第二段从图像下方开始。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:02:12.083

是的，将您的图像向左浮动，并将第 2 段设置为清除。在您的 CSS 中：

```
.left_img {
    float: left;
}

.clear {
    clear: both;
} 
```

将图像上的类设置为`left_img`，并将段落上的类设置为`clear`。显然，选择适合你想要做的类名......这只是一个例子。

# objective-c - initWithContentsOfURL 行为

> ID：12613449
> 
> 赞同：1
> 
> 时间：2012-09-27T03:00:12.673
> 
> 标签：objective-c, ios

在我的代码中，我在 UIWebview 中加载了一个 URL（一个 aspx 文件）。它加载并显示正常。

```
[webView loadRequest:requestObject]; 
```

我想检查 iPhone 上加载的 HTML 内容。当我使用以下代码在 UIWebview 中显示它时，UIWebview 显示格式被破坏，以自动换行格式显示行和表。

```
NSString *htmlContent = [[NSString alloc] initWithContentsOfURL:inputUrl encoding:NSUTF8StringEncoding  error:&error];

[webView loadHTMLString:htmlContent baseURL:nil]; 
```

当使用上面的 loadRequest 与 loadHTMLString 打开文件时，可能导致差异的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:08:00.190

对 loadHTMLString 的调用不知道使用哪个 URL 来解析 HTML 中包含的任何相对 URL。这应该在 baseURL 中传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:54:38.960

这是任何可能感兴趣的人的代码：

```
 NSString* userAgent = @"Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3"; // user agent for iPhone browser
    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:inputUrl]; // ARC enabled
    [request setValue:userAgent forHTTPHeaderField:@"User-Agent"]; //setting user agent
    NSURLResponse* response = nil;
    NSError* error = nil;
    NSData* data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; // ARC enabled
    NSURL *base = [NSURL URLWithString:@"http://mainwebsitehere"];
    [webView loadHTMLString:str baseURL:base]; 
```

# java - 使 Spring bean 的行为类似于 ExecutorService 的 ThreadLocal 实例

> ID：12613451
> 
> 赞同：9
> 
> 时间：2012-09-27T03:00:29.187
> 
> 标签：java, multithreading, spring

在我的 Web 应用程序中，我有一个后台服务。该服务使用 Generator 类，该类包含一个 Engine 类和一个`ExecutorService`配置为使用多个线程并接受 GeneratorTasks 的类。

```
@Component
public class Generator {
    @Autowired
    private Engine heavyEngine;

    private ExecutorService exec = Executors.newFixedThreadPool(3);

    //I actually pass the singleton instance Generator class into the task.
    public void submitTask(TaskModel model, TaskCallback callback) {
        this.exec.submit(new GeneratorTask(model, this, callback));
    }
}

@Component
public class Engine {
    public Engine() {
        //time-consuming initialization code here
    }
}

public class GeneratorTask implements Callable<String> {
    public GeneratorTask(TaskModel m, Generator g, ReceiptCallback c) {
        this.m = m;
        this.generator = g;
        this.c = c;
    }

    public String call() throws Exception {
        //This actually calls the Engine class of the generator.
        //Maybe I should have passed the Engine itself?
        this.generator.runEngine(c);  
    }
} 
```

Engine 类需要很长时间来初始化，所以我希望每个线程只初始化一次。我不能只将其设为单例实例，因为该实例不能在多个线程之间共享（它依赖于顺序处理）。不过，在处理任务完成后重用实例是完全可以的。

我正在考虑将`private Engine heavyEngine`变量设为 ThreadLocal 变量。但是，我也是 Spring 的新手，所以我想知道是否有另一种方法可以使用 Spring 注释注入 ThreadLocal 变量。我已经研究过将 bean 范围限定为`request`范围，但我不确定鉴于我的设计我应该如何去做。

任何有关如何改进我的设计的指导将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T15:58:11.740

首先放弃`ThreadLocal`- 那个班级有一些可怕的东西。您需要的只是对象池。这不是众所周知的功能，但 Spring 也支持此功能：

```
<bean id="engineProto" class="Engine" scope="prototype" lazy-init="true"/>

<bean id="engine" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="targetSource">
        <bean class="org.springframework.aop.target.CommonsPoolTargetSource">
            <property name="targetClass" value="Engine"/>
            <property name="targetBeanName" value="engineProto"/>
            <property name="maxSize" value="3"/>
            <property name="maxWait" value="5000"/>
        </bean>
    </property>
</bean> 
```

现在，当您注入时`engine`，您实际上会收到代理对象（`Engine`将需要一个接口），它将所有调用委托给池中的空闲对象。池大小是可配置的。当然，没有什么可以阻止您使用[`ThreadLocalTargetSource`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/aop/target/ThreadLocalTargetSource.html)which uses`ThreadLocal`而不是[Commons Pool](http://commons.apache.org/pool/)。这两种方法都保证了对`Engine`.

最后，您可以手动使用池化（但上述解决方案的美妙之处在于它是完全透明的）或切换到根据定义池化的 EJB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-12T21:13:52.983

仅供参考，Spring 3.0 及更高版本包括一个线程支持的 Scope 实现[SimpleThreadScope](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/support/SimpleThreadScope.html)。

为了使用它，您需要注册一个自定义范围：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="thread">
                <bean class="org.springframework.context.support.SimpleThreadScope" />
            </entry>
        </map>
    </property>
</bean> 
```

然后声明一个线程范围的bean：

```
<bean id="myBean" class="com.foo.MyBean" scope="thread">
    ...
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:08:17.737

我会为它创建一个工厂`Engine`并在里面调用它`GeneratorTask`。通过这种方式，您可以删除里面的`heavyEngine`字段`Generator`和. 然后，如果您想节省初始化时间，您仍然可以将其声明为单例，但在非线程安全方法上使用关键字。`Generator``GeneratorTask`
`Engine``synchronized`

```
public class Generator {    
    @Autowired private EngineFactory engineFactory;
    private ExecutorService exec = Executors.newFixedThreadPool(3);

    public void submitTask(TaskModel model, TaskCallback callback) {
        this.exec.submit(new GeneratorTask(engineFactory, model, callback));
    }
}

public class EngineFactory {
    @Autowired private Engine instance;

    public Engine getInstance() {
        return instance;
    }
}

public class Engine {
    public Engine() {
        //time-consuming initialization code here
    }

    public synchronized void runEngine() {
        // Do non thread safe stuf
    } 
}

public class GeneratorTask implements Callable<String> {
    public GeneratorTask(EngineFactory f, TaskModel m, ReceiptCallback c) {
        this.f = f;
        this.m = m;
        this.c = c;
    }

    public String call() throws Exception {
        Engine engine = f.getInstance();
        engine.runEngine();
        ... 
    }
} 
```

可能有一种纯 Spring 方式将引擎传递给 Callable，但在这种情况下，我认为工厂已经足够好了。

# php - 如何让我的服务器编辑一个 sql 表？

> ID：12613453
> 
> 赞同：0
> 
> 时间：2012-09-27T03:00:39.337
> 
> 标签：php, javascript, mysql

基本上，如果我的服务器每 5 分钟没有收到来自 javascript 的“ping”，我想将某人从我的网站中注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:04:08.383

如果用户在地址栏中键入地址，如果没有一些没有人会帮助您编写的阴暗策略，您将无法控制这一点。

一种可能的解决方案是有一个简单的 setTimeout(func(),60000); 其中 func() 是对服务器的异步调用。这样，只要用户仍在页面上，他们就会“隐形”每分钟或某事对您的网站进行一次 ping 操作。然后你知道，如果用户在 2 分钟内没有 ping 通，或者其他什么，他们已经离开了你的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:05:51.367

位置标头是对请求的 HTTP 响应的一部分。

你想要的大部分都可以在 JavaScript 中完成，但不推荐。

```
window.onbeforeunload = function() { 
  // do something here
} 
```

我不相信您可以知道用户在您的页面之后的去向。这将是一个潜在的安全问题。另请参阅： [https ://stackoverflow.com/a/277201/362536](https://stackoverflow.com/a/277201/362536)

# objective-c - 如果您不传入，NSDateFormatter 使用什么 NSTimeZone 值？

> ID：12613455
> 
> 赞同：0
> 
> 时间：2012-09-27T03:01:23.393
> 
> 标签：objective-c, ios, nsdateformatter, nstimezone

如果您不传入，NSDateFormatter 使用什么 NSTimeZone 值？我想使用默认`timeZone`值，或者传入给定的值。我想做这样的事情：

```
- (NSString *) announcementTime{
    NSTimeZone *defaultTimeZone;  // What does this become?
    [self announcementTimeInTimeZone:defaultTimeZone];
}

- (NSString *) announcementTimeInTimeZone:(NSTimeZone *)timeZone{

  NSDateFormatter *formatter = [[NSDateFormatter alloc] init];

  [formatter setDateStyle:NSDateFormatterNoStyle];
  [formatter setTimeStyle:NSDateFormatterShortStyle];
  [formatter setTimeZone:timeZone];

  return time;
} 
```

我想将哪个时区传递给我的`announcementTimeInTimeZone:`方法？也许`[NSTimeZone defaultTimeZone]`或`[NSTimeZone localTimeZone]`。我只是不确定默认值是什么，也没有在任何地方看到它的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:55:09.963

我也找不到任何文档，但我在调试器中玩了一下，看起来 NSDateFormatter 使用了 defaultTimeZone。

> (lldb) p (NSTimeZone*)[f timeZone] (NSTimeZone *) $1 = 0x0a926fa0 @"澳大利亚/悉尼"
> 
> (lldb) p (NSTimeZone*)[NSTimeZone defaultTimeZone] (NSTimeZone *) $2 = 0x0a926fa0 @"澳大利亚/悉尼"
> 
> (lldb) po [NSTimeZone localTimeZone] (id) $2 = 0x0ab3bb10 本地时区（澳大利亚/悉尼 (GMT+10:00) 偏移量 36000）

*"f"*是一个 NSDateFormatter，它是用 alloc - init 创建的。如您所见，两个时区完全相同，存储在同一个地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:20:24.523

默认情况下需要一个`localTimeZone`。

# c++ - 如何通过模板元编程确定我的 PC 是小端还是大端？

> ID：12613457
> 
> 赞同：0
> 
> 时间：2012-09-27T03:01:30.883
> 
> 标签：c++, endianness, template-meta-programming

我知道决定 PC 是否是小端序的非元编程方式。

例如：

```
#include <iostream>
#include <stdint.h>

union A { 
    uint16_t v;
    char c[2];
};  

int main(void) {
    A a;
    a.v = 0x0102;
    std::cout << (a.c[0] == 0x01 ? "big endian" : "little endian") << std::endl;

    return 0;
} 
```

但是，它的运行时间很昂贵，不是吗？

那么，有没有办法通过元编程来确定 PC 是否是小端？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:35:43.610

该语言中没有任何内容要求目标计算机完全采用大端或小端。事实上，一些架构允许软件在运行时选择字节序。有些甚至允许每页字节序选择。

模板元程序不可能对这些东西一无所知。

# javascript - 如何设置仅在单击时刷新 iframe 的间隔

> ID：12613461
> 
> 赞同：0
> 
> 时间：2012-09-27T03:02:07.633
> 
> 标签：javascript, button, timer, onclick

我想为 iframe 的重新加载设置一个计时器，但计时器只会在用户单击按钮时启动。有什么办法吗？我的代码每 3 秒刷新一次 iframe，而不是 onclick。

代码：

```
function reloadIFrame() {
     setInterval(function(){window.frames['frame'].location.reload();},3000);
} 
```

按钮：

```
 <input type="submit" value="Save" onclick="reloadIFrame()"/> 
```

当用户单击按钮时，我希望 iframe 在 3 秒后刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:06:45.437

我认为你需要`setTimeout`而不是`setInterval`

```
function reloadIFrame() {
   setTimeout(function(){window.frames['frame'].location.reload();},3000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:07:47.347

似乎你只是想推迟行动。您正在做的是使用 setInterval ，它将每三秒运行一次该函数。您正在寻找设置延迟，您应该使用，在这种情况下您应该使用 setTimeout 函数。

```
 setTimeout(function(){window.frames['frame'].location.reload();},3000) 
```

# xcode - Xcode 4.4.1 - C 编程 - 添加新的 .c 文件

> ID：12613463
> 
> 赞同：3
> 
> 时间：2012-09-27T03:02:10.850
> 
> 标签：xcode

我正在用 Xcode 4.4.1 编写一个 C 程序。一个新项目从一个 main.c 文件开始，这显然是我的主文件。如果我想写一个不同的程序怎么办？如果我选择 File>New File，Xcode 会在 main.c 旁边创建一个新的 .c 文件。问题是，当我将代码放入该新文件中时，当我尝试运行它时，会出现与链接有关的构建错误。我总是可以从 program2 中获取代码并将其粘贴到 main.c 文件中的一个全新项目中，它会起作用，但是，出于组织目的（大学工作），我宁愿在同一个项目中有多个文件可以独立编译和执行。我对 Xcode 很陌生，所以我问，我在做什么错/不理解？

我有照片要发布，但由于我刚刚注册了这个帐户，我无法发布。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:06:23.060

您可以使用单个 Xcode 项目，但在所述项目中创建多个目标。

要添加第二个目标，请单击添加目标按钮，如下图所示：

![在此处输入图像描述](../Images/ea99192a22e7e189c0bf946478a64879.png)

就像您最初在“新建项目”窗口中所做的那样，为基于 C 的命令行工具添加一个目标，如下图所示：

![在此处输入图像描述](../Images/62ef6ced071f25b82b8e153feba3b8d6.png)

这会在您的项目文件夹中创建另一个文件夹，其中包含新添加目标的 main.c 文件。新目标将设置一个“编译源”构建阶段，该阶段仅构建新创建`main.c`的文件，而不构建`main.c`来自任何其他目标的文件，从而减轻您之前遇到的构建错误。

![在此处输入图像描述](../Images/2502b9be89fd806d3a60695078718fb9.png)

要控制要使用的目标，请从工具栏中的方案弹出菜单中选择适当命名的方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:10:35.680

> 我收到与链接有关的构建错误。

让我猜猜：您的另一个文件包含一个`main`函数。一个项目不允许有多个`main`函数（实际上，所有非静态函数都必须有唯一的名称）。`main`不需要在文件`main.c`中，但必须有一个`main`.

一种解决方案是将其他文件中的函数重命名，除了您要运行的文件之外的其他文件（`main2`、`main3`等）。这将阻止链接器抱怨。

但是，这种方法容易出错。标准方法是使用多个项目 - 一个用于您编写的每个程序。为方便起见，您可以将它们保存在同一个 Xcode 工作区中，但每个都应该有一个单独的目标和自己的`main.c`文件。

# regex - 为什么这个 sed 语句不起作用？

> ID：12613470
> 
> 赞同：0
> 
> 时间：2012-09-27T03:02:59.537
> 
> 标签：regex, sed

在过去的几天里，我一直在课堂上使用正则表达式。我无法确定为什么这个表达式不起作用。我正在寻找如下表达式：

```
value = (struct node){ 5, NULL};
value2 = (structname){ 1, 2 }; 
*pointer = ( bla ){3,4}; 
```

这是我正在使用的表达式：

```
sed -n '/^[*0-9A-Za-z_]+ *= *( *[0-9A-Za-z_]+ *[0-9A-Za-z_]* *) *{[0-9A-Za-z, ]};/p'     structfile 
```

我错过了什么，因为它什么也没返回。还有一个旁注，我在某些表达式中使用了 [^,] ，但我仍然得到带有 , s 的行。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:20:59.477

你需要逃跑`+`；并修复`{[0-9A-Za-z, ]}`到`{[0-9A-Za-z, ]*}`.

```
sed -n '/^[*0-9A-Za-z_]\+ *= *( *[0-9A-Za-z_]\+ *[0-9A-Za-z_]* *) *{[0-9A-Za-z, ]*};/p' structfile

me@localhost:~$ cat structfile 
value = (struct node){ 5, NULL};
value2 = (structname){ 1, 2 }; 
*pointer = ( bla ){3,4};
not astruct
notastructstr =

me@localhost:~$ sed -n '/^[*0-9A-Za-z_]\+ *= *( *[0-9A-Za-z_]\+ *[0-9A-Za-z_]* *) *{[0-9A-Za-z, ]*};/p' structfile
value = (struct node){ 5, NULL};
value2 = (structname){ 1, 2 }; 
*pointer = ( bla ){3,4}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:57:58.617

这可能对您有用（GNU sed）：

```
sed '/^\S\+\s\+=\s\+(\s*\S\+\(\s\+\S\+\)\?\s*){\s*\S\+\s*,\s*\S\+\s*};/!d' file 
```

*   首先构建一个松散的正则表达式，仅使用空格 ( `\s`)、非空格 ( `\S`) 和文字 ( `=`, `(`, `)`, `{`, `}`and `;`)
*   确定上述是否为 1 个或多个、0 个或多个或 0 个或一个，例如一个或多个空格将由 表示`\s\+`，零个或多个非空格将是`\S*`和零或一分组将是`\(\s\+\S\+\)\?`
*   尝试使用`^`字符串开头、字符串结尾和换行符`$`的多行正则表达式锚定正则表达式`\n`
*   慢慢构建正则表达式，从左到右，检查每一部分
*   一旦你有了一个工作版本，用更具体的字符类替换单个空格/非空格
*   进一步将一个或多个类细化到特定范围或数字，例如一对三 ( `\{1,3\}`) 或 3 ( `\{3\}`) 当然单个类、文字或组不需要限定

高温高压

# vb.net - 如何将复选框添加到动态创建的标签页，然后将组框与每个复选框（VB.NET）链接？

> ID：12613472
> 
> 赞同：2
> 
> 时间：2012-09-27T03:03:53.953
> 
> 标签：vb.net, dynamic, tabcontrol

（第 1 部分）我想为每个动态创建的标签页添加 8 个复选框。我尝试了以下操作，但它在最后一个标签页上添加了一个复选框。如何为每个标签页添加 8 个复选框（比如 10 个标签页）

（第 2 部分）由于我们不知道创建的复选框的索引，我无法理解如何将组框与“checkbox.checked”条件链接。任何帮助将不胜感激。

```
Dim chkbx As New CheckBox

For j = 1 To 10 '#10 tab pages considered
Form4.TabControl1.TabPages.Add(j)
Form4.TabControl1.TabPages(j).Text = "Folder" & j + 1
Form4.TabControl1.TabPages(j).Controls.Add(chkbx)
chkbx.Text = "folder1name "
chkbx.Size = New Size(220, 17)
Next (j) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:07:20.160

每次`for`循环创建 CheckBox 实例

```
For j = 0 To 9 '#10 tab pages considered
  Dim chkbx As New CheckBox
  Form4.TabControl1.TabPages.Add(j)
  Form4.TabControl1.TabPages(j).Text = "Folder" & j + 1
  Form4.TabControl1.TabPages(j).Controls.Add(chkbx)
  chkbx.Text = "FolderName"
  chkbx.Size = New Size(220, 17)
  chkbx.Name="A" & j  <----- set unique name/key to each control
Next (j) 
```

并使用`Controls.Find()`方法获取参考`control`。

```
Dim name = "A0"
Dim controlArray = Me.Controls.Find(name, True)
If controlArray.Length <> 0  Then
   Dim chk As CheckBox = CType(controlArray(0), CheckBox)
   If Not IsNothing(chk) Then
       MsgBox(chk.Checked)
   End If
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:38:12.853

为了配合 AVD 所说的，在您分配动态 TabPages 的循环中创建您的 CheckBox。您将需要预先创建组合框或在另一个 for 循环中动态创建它们。然后，我将使用他们的 Tag 属性为每个 CheckBox 分配一个唯一 ID，并使用它来区分在 Common CheckedChanged 事件中更改了哪个。像这样的东西。

```
Dim index As Integer = 0
For j = 1 To 10 '#10 tab pages considered 
    Dim startLocation As Point = New Point(10, 10)
    TabControl1.TabPages.Add(New TabPage)
    TabControl1.TabPages(j).Text = "Folder" & j + 1
    For x = 0 To 7
        Dim chkbx As New CheckBox
        TabControl1.TabPages(j).Controls.Add(chkbx)
        chkbx.Tag = index
        chkbx.Text = "FolderName"
        chkbx.Location = startLocation
        chkbx.Size = New Size(220, 17)
        AddHandler chkbx.CheckedChanged, AddressOf CheckBox_CheckedChanged
        startLocation.Y = startLocation.Y + 16
        index += 1
    Next
Next 
```

**CheckChanged 事件**

```
Private Sub CheckBox_CheckedChanged(sender As System.Object, e As System.EventArgs)
    Dim cb As CheckBox = CType(sender, CheckBox)

    Select Case CInt(cb.Tag)
        Case 0

        Case 1

        Case 2

        Case 3

        Case .... 'Up to how ever many index's that you have

        Case Else

    End Select

End Sub 
```

# spring - 为什么 wso2 esb Web 服务代理在 WSDL 中将我的端点设为“localhost”？

> ID：12613477
> 
> 赞同：0
> 
> 时间：2012-09-27T03:04:03.787
> 
> 标签：spring, proxy, cxf, wso2, wso2esb

我创建了一个带有 CXF 和 Spring 支持的 Web 服务。直接访问成功。然后我运行了一个 WSO2 ESB 并为该 Web 服务创建了一个代理服务。调用代理服务失败。我打印了代理的 WSDL，发现该文件中的端点都是“localhost”。我想这个问题很典型，但我找不到任何帮助信息。任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T04:51:00.100

您也可以在 carbon.xml 中指定参数：

```
<HostName>yourhost</HostName> 
```

yourhost = ip 或服务器名称

您可以在 carbon.xml 文件中看到此信息：

```
<!--
   Host name or IP address of the machine hosting this server
   e.g. www.wso2.org, 192.168.1.10
   This is will become part of the End Point Reference of the
   services deployed on this server instance.
--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:51:31.537

您需要`axis2.xml`在找到 http 和 https 传输的参数“WSDLPrefix”的位置进行编辑。

```
<parameter name="WSDLEPRPrefix" locked="false">http://myhost:8280</parameter> 
```

这将正确创建您的代理端点。

完整信息位于：[http ://wso2.org/project/esb/java/4.0.0/docs/admin_guide.html#HostPort](http://wso2.org/project/esb/java/4.0.0/docs/admin_guide.html#HostPort)

PS 我认为 Wso2ESB 4.5.0 更“聪明”，不需要修改这些参数。希望这可以帮助

# javascript - jquery 检查元素不是空的更改类

> ID：12613488
> 
> 赞同：2
> 
> 时间：2012-09-27T03:06:18.670
> 
> 标签：javascript, jquery

当 p.err 不为空时，我想添加类 p.err-wrapper。

```
<p class="err err-wrapper">not empty</p>
<p class="err"></p>

p.err {color:#ff0000, font-weight: bold; }
p.err-wrapper {background:#ffffdd; border:1px solid #ff0000; } 
```

我正在使用的应用程序在这样的表单上添加了错误消息`<p class="err"><?php get(error_msg) ?></p>`

无论是否有错误，它都会添加到页面中。一旦出现错误`<p class="err">Your first name is missing</p>`， p.err 就会装饰`<p>`标签的内容。

我想将错误包装在边框和背景中。问题是因为`<p class="err"></p>` 没有有条件地添加，当没有错误时我得到一个带边框的背景。

我想添加检查是否`<p class="err"></p>`不为空的 jquery，然后添加类 p.err-wrapper，即`<p class="err err-wrapper"></p>`.

我得到了它的工作，但我在 jquery 这么新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:10:20.047

您可以使用`:not`和`:empty`选择器。

```
$('p.err:not(:empty)').addClass('err-wrapper'); 
```

[http://jsfiddle.net/QYaJC/](http://jsfiddle.net/QYaJC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:14:57.580

尝试使用：

```
$("p.err")
.filter(function(){return $(this).text().replace(/\s/g,"").length!=0})
.addClass("err-wrapper")​​​​​​​​;​​​​​​ 
```

作为过滤器传递的函数将修剪内容中的任何空白区域。

你可以在这里看到一个工作演示：http: [//jsfiddle.net/FNgDF/](http://jsfiddle.net/FNgDF/)

# user-interface - 在带有对象脚本的 applescript 的 UI 脚本中合并变量

> ID：12613489
> 
> 赞同：1
> 
> 时间：2012-09-27T03:06:29.270
> 
> 标签：user-interface, object, scripting, applescript

我有一个涉及一些 UI 脚本的脚本，用于在不支持 applescript 的内部应用程序中定位电话号码（因此我必须使用 UI 脚本）。我写成功的部分如下：

```
tell application "System Events" to set frontmost of process "Ticket Tracker" to true
tell application "System Events"
tell process "Ticket Tracker"
try
    try
        set the_number to value of attribute "AXvalue" of static text 14 of group 1 
        of scroll area 1 of splitter group 2 of splitter group 1 of window 1

        if the_number = "" then
            set the_number to value of attribute "AXvalue" of static text 1 of 
            splitter group 1 of window 1
        end if 
    on error
        set the_number to value of attribute "AXvalue" of combo box 3 of 
        tab group 1 of scroll area 1 of splitter group 2 of splitter group 2 of 
        splitter group 1 of window 1
            if the_number = "" then
                set the_number to value of attribute "AXvalue" of static text 11 
                of tab group 1 of scroll area 1 of splitter group 2 of splitter group 2
                of splitter group 1 of window 1
            end if
    end try 
```

这段代码的后半部分是尝试从第二个新打开的窗口中获取数字。当第一个窗口打开并且是您要从中获取数字的窗口时，“窗口 1”是一个非常好的索引。但是如果您打开一个新窗口，而您的第二个窗口（打开的第一个窗口）是您要从中获取号码的窗口，那么您必须寻找“窗口 2”，这就是我合并第一段代码的原因如您所见，将第二个与**尝试**和**错误绑定在一起...**

```
on error
    try
        set the_number to value of attribute "AXvalue" of static text 14 
        of group 1 of scroll area 1 of splitter group 2 of splitter group 1 
        of window 2

        if the_number = "" then
            set the_number to value of attribute "AXvalue" of static text 1 
            of splitter group 1 of window 2
        end if
    on error
        set the_number to value of attribute "AXvalue" of combo box 3 of 
        tab group 1 of scroll area 1 of splitter group 2 of splitter group 2
        of splitter group 1 of window 2

        if the_number = "" then
            set the_number to value of attribute "AXvalue" of static text 11 
            of tab group 1 of scroll area 1 of splitter group 2 of splitter group 2
            of splitter group 1 of window 2
        end if
    end try
end try
end tell
end tell 
```

这是一个很好的入门概念，但是使用我的脚本的其他人以不同的方式操作“Ticket Tracker”应用程序，并要求我搜索高达 6 或 7 的“窗口索引”。

我想要做的是编写一个脚本对象，它使用我拥有的代码块的前半部分，然后如果找不到“window x”尝试找到“window x + 1”并继续尝试直到成功（限制为 20 左右）。我对脚本对象非常陌生，并且仍在尝试掌握这个概念，但这是我到目前为止所拥有的：

```
Script indexFinder
property x : 1

to tryAgain
    set x to x + 1
try
    try
        set the_number to value of attribute "AXvalue" of static text 14 of group 1 
        of scroll area 1 of splitter group 2 of splitter group 1 of window x

        if the_number = "" then
            set the_number to value of attribute "AXvalue" of static text 1 of 
            splitter group 1 of window x
        end if 
    on error
        set the_number to value of attribute "AXvalue" of combo box 3 of 
        tab group 1 of scroll area 1 of splitter group 2 of splitter group 2 of 
        splitter group 1 of window x

        if the_number = "" then
            set the_number to value of attribute "AXvalue" of static text 11 
            of tab group 1 of scroll area 1 of splitter group 2 of splitter group 2
            of splitter group 1 of window x
        end if
    end try
on error
    repeat tryAgain
end try
end tryAgain
end script 
```

我不确定这种语法是否正确，但我认为它封装了我想要完成的事情。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:35:36.353

你可以尝试这样的事情：

```
set maxWindow to 20

repeat with i from 1 to maxWindow
    try
        set the_number to tTracker(i)
        exit repeat
    end try
end repeat

-- insert the rest of your script
return the_number

-- Handlers
on tTracker(windowNumber)
    try

        tell application "System Events"
            set frontmost of process "Ticket Tracker" to true
            tell process "Ticket Tracker"
                set xxx to value of attribute "AXvalue" of static text 14 of group 1 of scroll area 1 of splitter group 2 of splitter group 1 of window windowNumber

                if xxx = "" then
                    set xxx to value of attribute "AXvalue" of static text 1 of splitter group 1 of window windowNumber
                end if
            end tell
        end tell
        return xxx

    on error
        tell application "System Events" to tell process "Ticket Tracker"
            set xxx to value of attribute "AXvalue" of combo box 3 of tab group 1 of scroll area 1 of splitter group 2 of splitter group 2 of splitter group 1 of window windowNumber
            if xxx = "" then
                set xxx to value of attribute "AXvalue" of static text 11 of tab group 1 of scroll area 1 of splitter group 2 of splitter group 2 of splitter group 1 of window windowNumber
            end if
        end tell
        return xxx

    end try
end tTracker 
```

# php - 使用自定义搜索选项在两个表中搜索 mysql 数据

> ID：12613493
> 
> 赞同：0
> 
> 时间：2012-09-27T03:07:07.527
> 
> 标签：php, mysql, search

嗨朋友们，我在我的网站上有一个自定义搜索功能。搜索取决于两个表，例如 **product_table**

```
CREATE TABLE `product_table` (
 `product_id` int(11) NOT NULL auto_increment,
 `product_name` varchar(100) NOT NULL,
 `country` varchar(200) NOT NULL,
 `added_time` timestamp NOT NULL default CURRENT_TIMESTAMP,
 PRIMARY KEY  (`product_id`)); 
```

**多个表**

```
CREATE TABLE `multiple_table` (
 `multi_id` int(11) NOT NULL auto_increment,
 `cat_id` int(11) NOT NULL,
 `product_id` int(11) NOT NULL,
 PRIMARY KEY  (`multi_id`)); 
```

我正在为用户提供按一个或多个字段进行搜索的选项 `product_name,country,cat_id,added_time`

我的搜索功能如下，

```
if(isset($_GET['s_button'])){
$sql2="SELECT a.product_id FROM product_table a, multiple_table b WHERE b.product_id= a.product_id ";
$where=array();
$values = array();
$types = '';
if(!empty($_GET['search_cat'])){
$search_cat=clean($_GET['search_cat']);
$where[]="AND cat_id='".$search_cat."'";
}
if(!empty($_GET['product_country'])){
$country=clean($_GET['product_country']);
$where[]="AND country='".$country."'";
}
if(!empty($_GET['model'])){
$keyword=clean($_GET['model']);
$where[]="AND product_name LIKE '%".$keyword."%'";
}
$sql2 .= implode($where). " ORDER BY a.product_id ";
}else{
$sql2 = "SELECT product_id FROM product_table ORDER BY Rand()";
} 
```

但这会产生一些不正确和大量的结果，而且搜索也需要太多时间。我不知道为什么会这样。我听说过 MYSQL VIEWs 这样做有什么意义吗？或者我有什么简单的方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:11:54.837

你应该这样尝试：

```
SELECT a.product_id FROM product_table a INNER JOIN multiple_table b ON b.product_id= a.product_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:52:58.213

考虑类似的事情：

```
<?php
if(isset($_GET['s_button'])){
    $options = array(
        (object)array(
            "get_key"=>"search_cat",
            "table_key"=>"cat_id"
        ),
        (object)array(
            "get_key"=>"product_country",
            "table_key"=>"country"
        ),
        (object)array(
            "get_key"=>"model",
            "table_key"=>"product_name",
            "compare"=>"LIKE"
        )
    );
    $parseOptions = function($element){
        $defaults = array("wildcards"=>"both");
        $settings = (object)array_merge($defaults, (array)$element);
        if(isset($_GET[$settings->get_key]) && strlen($_GET[$settings->get_key])>0){
            $search = mysql_real_escape_string($_GET[$settings->get_key]);
            switch($settings->compare){
                default:
                    return $settings->table_key."='$search'";
                    break;
                case 'LIKE':
                    switch($settings->wildcards){
                        case 'both':
                            return $settings->table_key." LIKE '%$search%'";
                            break;
                    }
            }
        }
    };
    $where = array_map($parseOptions, $options);
    $sql2="SELECT
        products.product_id
        FROM product_table AS products
        LEFT JOIN multiple_table AS multi
            ON products.product_id = multi.product_id";

    if(count($where)>0) $sql2 .= " WHERE ".implode(" AND ",$where);
    $sql2 .= " ORDER BY product_id ";
}else{
    $sql2 = "SELECT product_id FROM product_table ORDER BY Rand()";
} 
```

扩展起来会更容易。

# docpad - 使用 docpad 获取集合中的下一个和上一个文件

> ID：12613499
> 
> 赞同：4
> 
> 时间：2012-09-27T03:07:57.477
> 
> 标签：docpad

我正在制作一个投资组合，并希望使用 DocPad（使用 Backbone 集合）在每个项目详细信息页面上简单地打印下一个和上一个项目链接。这里的代码来自我的模板projects.html.eco。@document 对象是当前正在查看的文档。

```
<% for document in @getCollection('projects').toJSON() : %>

 <% if document.url.indexOf('/posts') is @document.url.indexOf('/projects') + 1: %>
   <a href="<%= document.url %>" class="next"><img src="/images/rt_arrow.png" alt="" /></a>
 <% end %>

 <% if document.url.indexOf('/posts') is @document.url.indexOf('/projects') - 1: %>
   <a href="<%= document.url %>" class="previous"><img src="/images/lft_arrow.png" alt="" /></a>
 <% end %>

<% end %> 
```

让我知道我是否可以提供更多信息！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:36:05.793

似乎有一些事情正在发生：

1.  在您的比较中有一个组合`/posts`和`/projects`被使用，我将使用它们都意味着`/projects`由于您正在骑自行车的集合的名称。

2.  你当前`+ 1`只`- 1`适用`/projects`于url中字符串的索引位置，而不是实际文档的索引。

对于分页解决方案，目前有[这个 gist](https://gist.github.com/3695876)可用，它应该对您的用例有所帮助。将来，可以完成一个插件来提供您所追求的简单`next()`和jquery 样式的 API。`prev()`

# iphone - IOS中奇怪的浮动问题

> ID：12613505
> 
> 赞同：0
> 
> 时间：2012-09-27T03:08:40.953
> 
> 标签：iphone, objective-c, ios, c

```
float abc = 145606035;
NSLog(@"%f", abc);
NSLog(@"%d", abc);

First NSLog = 145606032.000000 //this is wrong, please look at the last digit.
Second NSLog = 536870912 //this is wrong too! 
```

为什么答案这么奇怪？是否有意义？'abc' 甚至没有超过 Integer 的最大数，为什么数字是错误的？有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T03:15:43.040

原因是因为它将 abc 的二进制表示解释为整数。二进制表示中的十进制数和整数完全不同，要获得正确的输出，您应该将 abc 转换为 int`(int)abc`

由于浮点数的精度，第一个输出关闭。浮点数必须将其精度分解为数字的整个部分以及符号和尾随小数。这意味着浮点数的范围受到限制，尤其是使用 32 位浮点数。使用 double 类型，您应该得到第一个数字的正确输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:14:28.647

它总会给你这样的答案。查看您的代码，在第一行中您将浮点值分配给变量“ABC”，然后在第一个 NSLOG 中您要求给您浮点值（这个是正确的）。在第二个 NSLOG 中，您要求给您整数值（这个不正确）。

希望对您有所帮助！

# mysql - 如何使用 ON DELETE CASCADE 删除相应的行

> ID：12613506
> 
> 赞同：0
> 
> 时间：2012-09-27T03:08:47.563
> 
> 标签：mysql, sql

我有 2 个表，一个称为“Image”表，另一个称为“Image_Question”表。下面是 2 个表的样子：

图像表：

```
ImageId   ImageFile
01        picture/cat.png
02        picture/cat_2.png
03        picture/dog.png 
```

Image_Question 表：

```
ImageId  SessionId  QuestionId
01            ADS            3
02            FTG            7
03            JJK            1 
```

我的问题是，在 SQL 中我如何编写它以便两个表中的 ImageId 链接在一起，这样可以说我从 Image Table 中删除 ImageId = 01 的行，Image_Question 表中的 ImageId = 01（对应行）是也删除了。

我尝试了下面的代码，但没有奏效：

```
ALTER TABLE Image_Question ADD CONSTRAINT FK_ImageId FOREIGN KEY (ImageId) REFERENCES Image (ImageId) ON DELETE CASCADE; 
```

更新：

显示图像表：

```
CREATE TABLE `Image` (
 `ImageId` int(10) NOT NULL AUTO_INCREMENT,
 `ImageFile` varchar(250) NOT NULL,
 PRIMARY KEY (`ImageId`)
) ENGINE=MyISAM AUTO_INCREMENT=399 DEFAULT CHARSET=utf8 
```

显示 IMAGE_QUESTION 表：

```
CREATE TABLE `Image_Question` (
 `ImageQuestionId` int(10) NOT NULL AUTO_INCREMENT,
 `ImageId` int(10) NOT NULL,
 `SessionId` varchar(10) NOT NULL,
 `QuestionId` int(5) NOT NULL,
 PRIMARY KEY (`ImageQuestionId`),
 KEY `QuestionId` (`QuestionId`),
 KEY `SessionId` (`SessionId`),
 KEY `fk_imagequestionid` (`ImageId`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:14:11.243

据我所知，外键的唯一要求是它是一个索引。您的密钥`Image_Questions`应该是`QuestionId`，并且您似乎已经按照我在评论中的建议将其更改为。但这不是您的 CASCADE DELETE 不起作用的原因。

（附注：就数据组织而言，在 99.9% 的情况下，两个表具有相同的主键是没有意义的（只有真正的情况是隐藏信用卡号等敏感信息）。如果两个表具有相同的主键，它们应该是同一张表。）

既然你发布了你的`CREATE TABLE`声明，问题现在很明显——只`InnoDB`支持 MySQL 中的外键约束。`MyISAM`没有（还）。奇怪的是，它们允许您使用外键语法创建 MyISAM 表而没有错误并且不支持它。

按照您的设置方式，从表 Image 中删除一行将删除 Image_Question 中的相应行。那讲得通。

外键设置父->子关系。如果你杀了父母，孩子就会死。但是，如果你杀了一个孩子，那并不会杀死父母。父母将继续存在，并且可能有许多其他孩子。

您的每张图片可能有 50 个问题。当任何一个子问题被删除时，您不想删除父图像。但是，如果您删除 1 张图片，其所有子问题都将变得无关紧要且毫无用处。您可以级联删除，但您可以`SET NULL`或者`NO ACTION`如果您认为子数据在某些方面仍然有用。SET NULL 将使所有`orphan`行都相等，而 NO ACTION 将保留它们的无引用外键，因此即使父级消失，您仍然可以按父级对它们进行分组。

将表更改为 InnoDB 后，此查询应导致级联：

```
DELETE FROM `Images` WHERE `id` = 2; 
```

这将删除id 为 2 的**一行**（`Images`因为`id`它是主键，每个值只能存在一行），并且还删除 id 为 2的**所有**行（可能存在数百万行）。`Image_Questions``ImageId`

`ImageId`另请注意，您将其作为第一列是很奇怪的，`Image_Questions`而且它不应该是主键。很少有理由让两个表具有完全相同的主键。的主键`Image_Questions`应该是`QuestionId`.

有关 MySQL 中外键支持的信息，请参阅此：

[http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html)

这是 ON DELETE 选项的链接：

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# excel - 在 Excel 中将具有多行数据的列转换为具有多列的行。

> ID：12613507
> 
> 赞同：1
> 
> 时间：2012-09-27T03:08:53.610
> 
> 标签：excel

我有以多行的 cloumns 组织的数据，我需要将其转换为具有多列的行以进行数据分析。例如，

```
 ID  Date of entry   Location    Data1   Data2
    1   20101030        1           a       b
    1   20101030        2           c       d
    1   20101125        1           w       v
    1   20101125        2           e       d
    1   20110314        1           we      r
    1   20110314        2           f       f
    2   20091024        1           ewr     rte
    2   20091024        2           gr      ert
    3   20061128        1           jy      bf
    3   20061128        2           u       df
    3   20110517        1           rd      fd
    3   20110517        2           sg      sd 
```

转换成这种格式，每个 ID 行都有多列数据（只有下面显示的头行）

```
ID  entry_1 Dateofentry location_1  data1   data2   location_2  data1   data2   entry_2 Dateofentry location_1  data1   data2   location_2  data1   data2   entry_3 Dateofentry location_1  data1   data2   location_2  data1   data2 
```

有人可以帮忙吗？

谢谢！燃气轮机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:02:38.847

您必须自己添加标题，但此代码应该满足您的需要：

```
Sub ConsolidateRows_SpreadAcross()

Dim lastRow As Long, i As Long, j As Long
Dim colMatch As Variant, colConcat As Variant

application.ScreenUpdating = False 'disable ScreenUpdating to avoid screen flashes

lastRow = range("A" & Rows.Count).End(xlUp).Row 'get last row

For i = lastRow To 2 Step -1

    If Cells(i, 2) = Cells(i - 1, 2) Then
        range(Cells(i, 3), Cells(i, Columns.Count).End(xlToLeft)).Copy Cells(i - 1, Columns.Count).End(xlToLeft).Offset(, 1)
        Rows(i).Delete
    Else
        If Cells(i, 1) = Cells(i - 1, 1) Then
            range(Cells(i, 2), Cells(i, Columns.Count).End(xlToLeft)).Copy _
                Cells(i - 1, Columns.Count).End(xlToLeft).Offset(, 1)
            Rows(i).Delete
        End If
    End If

Next

application.ScreenUpdating = True 'reenable ScreenUpdating
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:29:59.250

如果您复制整个表格，然后右键单击要粘贴新数据的任何位置，您应该会看到“选择性粘贴”菜单。从该菜单中，选择转置。那应该将列转换为行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T23:36:33.320

我从我在互联网上找到的一个公式开始，该公式采用一列列表并将其布局更改为多列：在 1000 多行中，您将获得 60 行，其中包含该列表的许多列。你可以在这里找到它[http://help.lockergnome.com/office/list-multiple-columns-page--ftopict935389.html](http://help.lockergnome.com/office/list-multiple-columns-page--ftopict935389.html)

我想获取一个包含 4 列（第 5 列为空）和 1000+ 行的列表，并使其成为一个 50 行的表，其中 4 个字段重复。

例如我有：

```
family  |  name   |  amount  |   table |
fam1    |  shlomi |  2       |   38    |
fam2    |  hila   |  4       |   23    |    
....    
fam1000 |  avi    |  1       |   15    | 
```

我想成功

```
family  |  name   |  amount  |   table |     |fam50    |  ben   |  2       |   68    |  ...    
fam1    |  shlomi |  2       |   38    |      ...    
fam2    |  hila   |  4       |   23    |      ...    
...                                           ...    
fam49   |  dror   |  1       |   15    |     |fam99    |  dror   |  1      |   15    | ... 
```

在现有工作簿的新工作表上，将以下公式插入 A1：

=IF(OFFSET(Sheet1!$A$1,QUOTIENT(COLUMN(),5)*50+ROW()-1,MOD(COLUMN()-1,5))="","",OFFSET(Sheet1! $A$1,QUOTIENT(COLUMN(),5)*50+ROW()-1,MOD(COLUMN()-1,5)))

.. 将此公式复制到您需要的任意多列和任意多行（我在示例中使用了 50）

您可以将 furmula 中的“5”更改为每列布局中所需的字段数，并且可以将“50”更改为每页中所需的行数。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-10-06T03:22:41.943

## 家庭 | 姓名 | 金额 | 表| 家庭1 | 什洛米 | 2 | 38 | 家族2 | 希拉 | 4 | 23 | .... fam1000 | AVI | 1 | 15 | 家庭50 | 本 | 2 | 68 |

* * *

* * *

德罗尔 | 1 | 15 |

我想成功

家庭 | 姓名 | 金额 | 表| |fam50 | 本 | 2 | 68 | ...
fam1 | 什洛米 | 2 | 38 | ...
fam2 | 希拉 | 4 | 23 | ...
... ...
fam49 | AVI | 1 | 15 | |fam99 | 德罗尔 | 1 | 15 | ...

# sql-server - 字符串参数前的“N”是什么

> ID：12613514
> 
> 赞同：0
> 
> 时间：2012-09-27T03:09:35.987
> 
> 标签：sql-server, sql-server-2008

在阅读 SQL Server 文档时，我遇到了以下语句：

```
EXEC sp_addlinkedserver   
   @server=N'S1_instance1', 
   @srvproduct=N'',
   @provider=N'SQLNCLI', 
   @datasrc=N'S1\instance1'; 
```

字符串参数前的“N”是什么？这似乎是可选的，因为没有它们，该语句运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:14:39.647

它表示字符串是一个[`NVARCHAR`](http://msdn.microsoft.com/en-us/library/ms186939.aspx)，而不是`VARCHAR`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T03:14:53.190

从[这里](http://support.microsoft.com/kb/239530/en-au)

> “N”前缀代表 SQL-92 标准中的国家语言，并且必须是大写的。如果您不使用 N 作为 Unicode 字符串常量的前缀，SQL Server 将在使用该字符串之前将其转换为当前数据库的非 Unicode 代码页。

来自堆栈交换的更多信息在[这里](https://dba.stackexchange.com/questions/12475/n-prefix-before-string-in-transact-sql-query)

# ruby-on-rails - ActiveRecord - 防止跨表重复条目

> ID：12613515
> 
> 赞同：1
> 
> 时间：2012-09-27T03:09:44.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我的 Rails 项目中有两个模型（和表）。每个模型都有一个“地址”字段。

目前，我设置了代码来验证每个模型中地址的唯一性，并且在每个表上都有一个地址索引，以防止在多个连接尝试保存相同数据的情况下重复。

但是，我想确保地址字段**在两个表中是唯一的**。如，如果地址存在于一个表中，则无法将其保存到第二个表中。

在代码中解决这个问题并不难，但我将如何在数据库级别（类似于索引）实现该检查以确保不会保存任何非唯一值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:37:11.097

您最好创建一个地址表，该表可以自行负责维护唯一性。与其在其他模型上维护地址字段，不如提供关联。可以这样做：

```
class Home < ActiveRecord::Base
  belongs_to :address
end

class Office < ActiveRecord::Base
  belongs_to :address
end

class Address < ActiveRecord::Base
  attr_accessible :body
  validates :body, uniqueness: true

  has_many :homes
  has_may :offices
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:56:09.437

在两个表中编写自定义验证器。[自定义验证 rails guide](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations) 是一个很好的起点。在自定义验证器中，如果该值已经存在于另一个表的地址字段中，则可以引发错误。

# php - 如何防止奇怪的电子邮件注册我的网站

> ID：12613520
> 
> 赞同：2
> 
> 时间：2012-09-27T03:10:13.487
> 
> 标签：php, codeigniter

我的网站上的帐户注册有点问题

现在，我只看到在我的网站上注册了一个电子邮件帐户，很奇怪，那个电子邮件是1334395@rtrtr.com，我不知道有多少类似的邮件。

我不希望这封电子邮件可以注册到我的帐户，因为我害怕垃圾邮件或黑客。

我怎样才能避免这一切？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T03:11:42.820

不。

这是一个有效的电子邮件地址。你不应该阻止它，也不应该阻止它。即使您尝试，您也不会阻止垃圾邮件发送者（这是您真正想要完成的事情）。

为了真正防止虚假注册，有很多技术，从 CAPTCHA 到简单地要求 JavaScript 让您的注册表单工作。它们都不是万无一失的……它们都可以解决，但它们在帮助方面还有很长的路要走。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T03:21:02.237

您始终可以将注册分为两部分。

1.  使用电子邮件地址注册网站
2.  发送带有激活帐户的验证链接的电子邮件

根据您的系统设置方式，您可以在一周后（或您想要的任何时间范围）清除所有未验证电子邮件地址的用户。

# java - 关闭执行器服务java

> ID：12613525
> 
> 赞同：1
> 
> 时间：2012-09-27T03:10:44.490
> 
> 标签：java, executorservice

如果关闭启动 urlconnection 或 bufferedreader 的 executor 服务，而没有断开 urlconnection 或关闭 bufferedreader，会发生什么情况，是否存在内存丢失，是否会减慢 CPU 速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:13:41.390

关闭 Executor 不会终止已经很忙的线程。这些将运行完成（或使用中断有序关闭）。所以所有资源都会被正确清理（除非你在某处错过了 finally 块）。您有责任让您的可运行对象正确处理 InterruptedException（和其他异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:40:12.597

每个`URLConnection`类都带有预定义的超时。您可以使用指定超时

```
 connection.setReadTimeout(2000);
    connection.setConnectTimeout(2000); 
```

无法保证这将起作用，因为 Java 文档本身不提供保证。

[URLConnection#setConnectTimeout](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setConnectTimeout%28int%29)

[URLConnection#setReadTimeout](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setReadTimeout%28int%29)

> 此方法的一些非标准实现会忽略指定的超时。要查看读取超时设置，请调用 getReadTimeout()。

**因此，除非您指定适当的超时，否则在这种情况下中断将不起作用。**

[ExecutorService#shutdownNow()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)提供了一种通过中断线程立即关闭的方法，但由于这些线程不能被中断，它没有提供额外的好处。

它仅在线程定义了其中断策略并执行可中断操作时才提供好处。

# linq - LINQ to Entities 方法'System.String ToString 错误

> ID：12613529
> 
> 赞同：1
> 
> 时间：2012-09-27T03:10:57.407
> 
> 标签：linq, entity-framework

我需要将 2 个字段合并为 1 个字段。名称和价格。但是，我收到一个 LINQ 错误

*LINQ to Entities 无法识别方法“System.String ToString”*

这是我的 linq 声明。

```
 var results = ctx.Plans.Select(p => new PlansView
        {
            PlanID = p.planID,
            PlanActive = p.planActive,
            PlanCost = p.planCost,
            PlanName = p.planName,
            PlanNameAndCost = p.planName + " " + Convert.ToString(p.planCost)
        }).OrderBy(p => p.planName).ToList(); 
```

**PlanNameAndCost = p.planName + " " + Convert.ToString(p.planCost)**导致错误。我知道 SQL 没有 ToString，但我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:14:32.680

> `PlanNameAndCost = p.planName + " " + Convert.ToString(p.planCost)`导致错误。

这是意料之中的：投影是在 RDBMS 端执行的；您的 SQL 数据库不知道什么是`ToString`. 当你在内存中时，应该添加这个成员，即之后`AsEnumerable()`：

```
var results = ctx.Plans.Select(p => new PlansView
    {
        PlanID = p.planID,
        PlanActive = p.planActive,
        PlanCost = p.planCost,
        PlanName = p.planName
    }).OrderBy(p => p.planName)
    .AsEnumerable().Select(p => new PlansView
    {
        PlanID = p.planID,
        PlanActive = p.planActive,
        PlanCost = p.planCost,
        PlanName = p.planName,
        PlanNameAndCost = p.planName + " " + Convert.ToString(p.planCost)
    ).ToList(); 
```

# php - 同时单击复选框

> ID：12613533
> 
> 赞同：0
> 
> 时间：2012-09-27T03:11:29.517
> 
> 标签：php, html

在php中勾选两个复选框时如何调用方法？

```
if (isset($_POST['check1'])) 
{data1();}

else if (isset($_POST['check2']) 
{data2();} 
```

以上适用于单个复选框。当我勾选两者时，它只会显示 data1()。我尝试了以下。

```
else if(isset($_POST['check1']) && ($_POST['check2'])) 
{data1and2();} 
```

和

```
else if(isset($_POST['check1']) && ($_POST['check2']))
{data1and2();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:13:49.257

你错过`isset`了`$_POST['check2']`

```
 if(isset($_POST['check1']) && isset($_POST['check2'])) {
    data1and2();
 } 
```

而这个条件应该是第一位的。

```
 if(isset($_POST['check1']) && isset($_POST['check2'])) {
    data1and2();
 } else if (isset($_POST['check1'])) {
    data1();
 } else if (isset($_POST['check2'])) {
    data2();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:13:56.903

为什么不分开 if 语句？

```
if(isset($_POST['check1']))
    data1();

if(isset($_POST['check2']))
    data2(); 
```

如果您在检查它们时需要不同的功能，您可以执行类似的操作。

```
list($flag1, $flag2) = array(isset($_POST['check1']), isset($_POST['check2']));

if($flag1 && flag2)
    data1and2();
else if($flag1)
    data1();
else if($flag2)
    data2(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:17:54.653

我相信你的逻辑是错误的。在单打的情况下，这个逻辑很好，但如果你同时检查，`isset`on`check1`将被触发，脚本不知道它应该检查如果两者都被检查它应该采取不同的动作。最好的办法是先*检查*`if`两个被检查的对象，然后检查单个框，如下所示：

 *```
if (isset($_POST['check2'] && isset($_POST['check1']))
{data1and2();}

else if (isset($_POST['check1'])) 
{data1();}

else if (isset($_POST['check2']) 
{data2();} 
```*

# winapi - 在 NSIS 安装程序中更改加载栏颜色

> ID：12613534
> 
> 赞同：0
> 
> 时间：2012-09-27T03:11:35.967
> 
> 标签：winapi, installation, nsis

**如何在 NSIS 安装程序的安装文件页面中更改加载栏的颜色？**

以下尝试将消息 PBM_SETBARCOLOR 发送到加载栏窗口但加载栏的颜色永远不会改变？

```
!include MUI2.nsh
!include WinMessages.nsh

InstallDir  "abc"
Name        "def"        
OutFile     "def.exe"

!define MUI_PAGE_CUSTOMFUNCTION_SHOW InstFilesPageShow
!insertmacro MUI_PAGE_INSTFILES

!macro RefreshWindow HWND IDC
    GetDlgItem $R0 ${HWND} ${IDC}
    ShowWindow $R0 ${SW_HIDE}
    ShowWindow $R0 ${SW_SHOW}
!macroend

Function InstFilesPageShow

    SendMessage 1004 ${PBM_SETBARCOLOR} 0 "COLORREF(0,200,200)" #0xFF0000
    System::Call `user32::SendMessage(i R1, i ${PBM_SETBARCOLOR}, i 0, i COLORREF(0,0,0))`  #System::Call `user32::SetWindowPos(i R8, i ${HWND_TOP}, i 0, i 0, i ${w}, i ${h}, i ${SWP_NOMOVE})`
    #!insertmacro RefreshWindow $HWND 1004
    #!insertmacro RefreshWindow $mui.InstallPage 1004
    !insertmacro RefreshWindow $HWNDPARENT 1004

FunctionEnd

Section "Dummy" 
    DetailPrint "Test"
SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:39:29.233

```
XPStyle on
Page instfiles "" instfilesShow

!include WinMessages.nsh

Function instfilesShow
FindWindow $0 "#32770" "" $HWNDPARENT
GetDlgItem $0 $0 1004
System::Call UxTheme::SetWindowTheme(ir0,w"",w"")
SendMessage $0 ${PBM_SETBARCOLOR} 0 0x11aaee
FunctionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:38:32.363

恐怕您将无法做到这一点：在[PBM_SETBARCOLOR 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760838%28v=vs.85%29.aspx)中，MSDN 状态

> 启用视觉样式后，此消息无效。

顺便说一句，在您的`RefreshWindow`宏中，您错误地从其 ID 获取控制句柄。NSIS 文档告诉

> 如果要获取内部对话框的控件句柄，首先使用`FindWindow user_var(output) "#32770" "" $HWNDPARENT`获取内部对话框的句柄。

因此你可以这样写：

```
FindWindow $R1 "#32770" "" $HWNDPARENT ;$R1 = handle of the inner dialog
GetDlgItem $R0 $R1 ${IDC} ;get the handle of control from its ID
ShowWindow $R0 ${SW_HIDE}
ShowWindow $R0 ${SW_SHOW} 
```

# c - tolower() 函数在 C99 中不起作用

> ID：12613537
> 
> 赞同：8
> 
> 时间：2012-09-27T03:11:53.063
> 
> 标签：c, cs50, tolower

我正在使用哈佛的 CS50 设备并尝试将字符设为小写。我正在尝试使用该`tolower()`功能，但是当我尝试使用它时，我收到了消息`implicit declaration of function 'tolower' is invalid in C99`。任何人都想详细说明我为什么会收到此消息。我已经包括`stdio.h`以及`string.h`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T03:14:15.327

要`tolower`在 C99 中使用，请使用`#include <ctype.h>`

它不是 I/O 函数，它不对字符串进行操作（它对字符进行操作），所以它不在`stdio`or中`string`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T03:13:58.273

`tolower`中定义`ctype.h`。那是您应该包括的文件：

```
#include <ctype.h> 
```

将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T03:13:47.640

它`ctype.h`不是在您提到的那些标题中定义的。

# avplayer - 获取持续时间 AVPlayer 链接淡入淡出

> ID：12613541
> 
> 赞同：3
> 
> 时间：2012-09-27T03:12:31.347
> 
> 标签：avplayer

我正在使用 AVPlayer 播放来自 Internet 的直播流，我需要显示音乐文件的持续时间，但我可以获得持续时间，因为链接是淡入淡出的，它会在 5 分钟内连续变化。它总是显示持续时间`NAN`。

此链接结束于`.mp3`：

[http://www.yorkshireentertainment.co.uk/downloads/mp3-short/Pure%20VS%20mp3s/moon_river.mp3](http://www.yorkshireentertainment.co.uk/downloads/mp3-short/Pure%20VS%20mp3s/moon_river.mp3)

它显示持续时间OK。

但此链接不以以下结尾`.mp3`：

[http://preprod-streaming-virgin.snowite.fr/plain/audio/full/128/GB/F07/65/20/010/GBF076520010_audio_full.mp3?st=lrmNZOXQTAszo46dNIiHGA&e=1348734612](http://preprod-streaming-virgin.snowite.fr/plain/audio/full/128/GB/F07/65/20/010/GBF076520010_audio_full.mp3?st=lrmNZOXQTAszo46dNIiHGA&e=1348734612)

我无法获得持续时间，它总是显示`NAN`。

# php - PHP中的自然语言单词替换

> ID：12613547
> 
> 赞同：0
> 
> 时间：2012-09-27T03:13:51.380
> 
> 标签：php, regex, preg-replace

我有一系列单词，例如：

```
$matchWords = ['a','is','of']; 
```

像这样的文字：

> “这是一个测试文本。测试，逗号而不是空格。”

我需要替换以下 html 文本中 $wordsArray 中所有出现的单词：

```
<span style="color:red;">$wordMatched</span> 
```

我需要用标签替换其他词。

所以基本上我的问题恢复到：

*   **仅匹配世界**（如果我搜索单词“a”而不是字母“a”；
*   **不要匹配 html a**和**span**标签内的任何内容；

所以，到目前为止，我的代码如下：

```
$wordsArray = ['this','is','a','test','text','comma','instead','of','space'];
$matches = ['a','is','of'];
$text = "This is a test text. Test, comma instead of space.";

foreach($wordsArray as $word){
    if(in_array($word, $matches)){
        $known[] = '(^|[.!?: ;,])'.$word.'([.!?: ;,]|$)';
    }
    else{
        $notKnown[] = '(^|[.!?: ;,])'.$word.'([.!?: ;,]|$)';
    }
}

// Known
$wordList = implode('|', $known);
$text = preg_replace('/('.$wordList.')/', '<span>$1</span>', $text);

// Not Known
$wordList = implode('|', $notKnown);
$text = preg_replace('/('.$wordList.')/', '<a href="texts/addWord&word=$1" class="info label">$1</a>', $text); 
```

这不起作用，因为它将空格和分隔符添加到我的匹配项中。

老实说，我不太了解 php 中的正则表达式，所以如果有人可以在这里帮助我，那就太好了。

谢谢

--EDIT-- 在 xdazz 回答后，我测试了以下文本，结果如​​下：

> 你好，
> 
> 这是对一些跨度事物的 aaaaa 测试。
> 
> 它真的有效吗？

输出：

```
<a class="wordLink info label" href="texts/addWord&word=Hi">Hi</a>,<br />
<br />
<a class="wordLink info label" href="texts/addWord&word=This">This</a> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">is</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <a class="wordLink info label" href="texts/addWord&word=aa">aa</a> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">a</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">a</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">a</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">a</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <a class="wordLink info label" href="texts/addWord&word=test">test</a> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">of</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <a class="wordLink info label" href="texts/addWord&word=some">some</a> <a class="wordLink info label" href="texts/addWord&word=span">span</a> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">thing</<a class="wordLink info label" href="texts/addWord&word=span">span</a>>.<br />
<br />
<a class="wordLink info label" href="texts/addWord&word=Is">Is</a> <<a class="wordLink info label" href="texts/addWord&word=span">span</a> style="color:red;">it</<a class="wordLink info label" href="texts/addWord&word=span">span</a>> <a class="wordLink info label" href="texts/addWord&word=really">really</a> <a class="wordLink info label" href="texts/addWord&word=working">working</a>? 
```

我认为问题在于跨度标签。除此之外一切似乎都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:22:31.143

像这样的东西：

```
$matchWords = array('a','is','of'); 
$text = "This is a test text. Test, comma instead of space.";
$text = preg_replace('/\b('.implode('|', $matchWords).')\b/', '<span style="color:red;">$1</span>', $text); 
```

# python - 如何使用python自动通过网络发送文件？

> ID：12613552
> 
> 赞同：0
> 
> 时间：2012-09-27T03:14:19.030
> 
> 标签：python, shell, terminal, centos

这是我需要做的：

我需要通过网络复制文件。要复制的文件在一台机器上，我需要将它发送到远程机器上。它应该是自动化的，并且应该使用 python 制作。我对python的os.popen和subprocess.Popen相当熟悉。我可以用它来复制文件，但是，问题是一旦我运行了单行命令（如下所示）

> scp xxx@localhost:file1.txt yyy@]192.168.104.XXX:file2.txt

它肯定会要求类似的东西

> 您确定要连接（是/否）？
> 
> 密码 ：

如果我没记错的话，一旦我发送了这个命令（假设我在 python 中编码）

> conn.modules.os.popen("scp xxx@localhost:file1.txt yyy@]192.168.104.XXX:file2.txt")

然后是这个命令

> conn.modules.os.popen("是")

如果我在终端中手动输入，输出（我很确定它会给我错误）与输出相比会有所不同。

你知道如何在 python 中编写代码吗？或者你能告诉我一些可以解决我问题的东西（命令等）吗

注意：我正在使用 RPyC 连接到其他远程机器并且所有机器都在 CentOS 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:53:22.920

通过 Python 执行此操作的正确方法实际上是`fabric`按照上面评论中的说明使用。

创建一个名为`fabfile.py`

```
#!/usr/bin/python

from fabric.api import run, env, sudo, put

env.user = 'user'
env.hosts = ['xxxxx.org',]

def copy():
    put('wong_8066.zip', '/home1/user/wong_8066.zip') 
```

然后在本地机器上运行`fab copy`，它会提示输入密码。

```
yeukhon@yeukhon-P5E-VM-DO:~$ fab copy
[xxxxxx.org] Executing task 'copy'
[xxxxxx.org] Login password: 
[xxxxxx.org] put: wong_8066.zip -> /home1/user/wong_8066.zip

Done. 
```

你可以用织物做更多的事情。Fabric 用于部署。您可以使用fabric 在本地运行东西，或远程运行多个主机。您可以在运行时传递许多选项。

如果您想在没有 的情况下自动执行此操作`password prompt`，则可以按照文档中的说明指定 ssh-key 的路径。

> fab 使用 Python 的 optparse 库，这意味着它尊重典型的 Linux 或 GNU 风格的短选项和长选项，以及自由混合选项和参数。例如 fab task1 -H hostname task2 -i path/to/keyfile 与更直接的 fab -H hostname -i path/to/keyfile task1 task2 一样有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:39:29.553

根据我的经验，第一次使用 sftp 会提示用户接受主机公钥，例如

`The authenticity of host 'xxxx' can't be established. RSA key fingerprint is xxxx. Are you sure you want to continue connecting (yes/no)?` 一旦你输入yes，公钥就会保存在~/.ssh/known_hosts 中，下次你不会得到这样的提示/警报。

为避免批处理脚本中出现此提示/警报，您可以使用 turn strict host check off use

> scp -Bqpo StrictHostKeyChecking=no

但是你很容易受到中间人攻击。

您还可以选择在部署批处理脚本之前手动连接到目标服务器并保存主机公钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:27:54.267

[这个问题](https://stackoverflow.com/questions/2042342/network-path-and-variables-in-python/2042376)似乎涵盖了您正在尝试做的事情。

用于`shutil.copyfile()`使用操作系统级别的复制实用程序

如果你不想点击链接，这里是：

```
import shutil
source_path = r"\\mynetworkshare"
dest_path = r"C:\TEMP"
file_name = "\\myfile.txt"

shutil.copyfile(source_path + file_name, dest_path + file_name) 
```

# c# - 如何在 C# 上实现线程计时器和线程池以每秒处理消息

> ID：12613558
> 
> 赞同：1
> 
> 时间：2012-09-27T03:14:44.210
> 
> 标签：c#, .net, multithreading, timer, threadpool

我想开发 c# windows 应用程序，它每秒处理来自“收件箱”表的消息，然后处理它而不等待每个进程的结果。我一直在阅读 .net 中的多线程，但我仍然没有最好的方法来实现。执行这些要求的最佳方法是什么？

1.  我是否已经运行线程计时器然后执行线程池？
2.  或者我只使用线程计时器？

请给出您的意见和示例，以了解我应该实施的最佳方法。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:09:07.807

有两种简单的方法。**2**号更简单，但如果您在 UI 线程上做大量工作，则**1**号更有可能准时。你也可以试试[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)库，它更酷。

1)默认情况下， [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)将在线程池线程上引发 ellapsed 事件，这可能是合适的，但如果您使用的数据由发送消息循环的线程修改，则需要注意竞争条件。如果需要将数据推送回 UI 线程，则需要对其进行安排。

2) 使用在消息循环之外运行的计时器，例如[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)，然后使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)或[任务并行库](http://msdn.microsoft.com/en-us/library/dd537609.aspx)在另一个线程上执行工作。这些具有帮助您将结果编组回 UI 线程的机制。

您还需要注意，在完成处理上一个计时器事件的工作之前，计时器不会结束。

# c++ - 用户定义类中的 Bool 作为函数 c++ 的问题

> ID：12613567
> 
> 赞同：0
> 
> 时间：2012-09-27T03:15:56.310
> 
> 标签：c++, class, if-statement, boolean

嗨，我正在学习 c++ 课程，我们正在学习如何使用用户定义的类，但我的 bool 有问题。到目前为止，我能达到的最远距离是当我编译时出现错误

“没有匹配函数调用 StudRd::ValidRd() 注意：候选人是：bool StudRd::ValidRd(StudRd&) const”

这不仅是我第一次使用类，也是我第一次使用 bool 函数。我已经解决了这个问题并在谷歌上搜索了几个小时的类似问题，但我觉得我还没有更接近理解它。

```
#include "stud.h"
int main()
{
  ifstream inFile;
  ofstream outFile;
  inFile.open("in.data");
  outFile.open("out.data");
  if(inFile.fail() || outFile.fail())//Checks the in and out files
{
    cout << "input file or output file opening failed" << endl;
}
  StudRd rd;                    //Declares an object of the class
  rd.DefaultRd();              //Default constructor
  outFile << "*~<Student Exam Report>~*" << endl;
  outFile << "Stud id" << setw(10) << "Exam 1" << setw(10) << "Exam 2" << setw(10) <<     "Exam 3" << setw(10) << "Avg" << endl;
rd.ReadRd(inFile, rd);
while(inFile){           //Loop until the file runs out of data
  rd.ValidRd(rd);                //Determines if data read is valid
  if(rd.ValidRd()){           //if statement is executed if bool returns valid
    rd.ValidCountRd(rd);
    rd.findAvg(rd);           //Function that figures out an average for the struct
    rd.MaxOfAllExams(rd);     //finds the highest valid exam
    rd.WriteRd(outFile, rd);  //Function that writes the struct to the outFile
  }
  else{
    rd.InvalidCountRd(rd);
    rd.WriteInvalidRd(outFile, rd);
  }
rd.ReadRd(inFile, rd);                //function that reads from the infile and assigns to a structure
 }
  rd.AvgOfAllExams(rd);                 //finds the average of all valid exams
  rd.WriteFooterRd(outFile, rd);        //Writes the footer containing max, avg, pass, fail, valid, invalid
  outFile << "*** END ***" << endl;
  return 0;
} 
```

这是类和函数的实现

```
#include "stud.h"

void StudRd :: DefaultRd()
{
  id = -111;
  exam1 = -100;
  exam2 = -100;
  exam3 = -100;
  numValid = 0;
  numInvalid = 0;
  numPass = 0;
  numFail = 0;
}

bool StudRd :: ValidRd(StudRd& rd) const
{
  return(111 <= rd.id <= 999 &&
         0 <= rd.exam1 <= 100 &&
         0 <= rd.exam2 <= 100 &&
         0 <= rd.exam3 <= 100);
}

void StudRd :: ValidCountRd(StudRd& rd)
{
  rd.numValid++;
}

void StudRd :: InvalidCountRd(StudRd& rd)
{

  rd.numInvalid++;
}

void StudRd :: MaxOfAllExams(StudRd& rd)
{
    if(rd.examMax < rd.exam1){
      rd.examMax = rd.exam1;
}
    if(rd.examMax < rd.exam2){
      rd.examMax = rd.exam2;
    }
    if(rd.examMax < rd.exam3){
      rd.examMax = rd.exam3;
    }
}

void StudRd :: AvgOfAllExams(StudRd& rd)
{
  rd.avgOfAllExams = rd.examSum / rd.numValid;
}

void StudRd :: ReadRd(ifstream& inFile, StudRd& rd)
{
  inFile >> rd.id >> rd.exam1 >> rd.exam2 >> rd.exam3;
}

void StudRd :: WriteRd(ofstream& outFile, StudRd rd)
{
  inFile >> rd.id >> rd.exam1 >> rd.exam2 >> rd.exam3;
}

void StudRd :: WriteRd(ofstream& outFile, StudRd rd)
{
  outFile.setf(ios::fixed);
  outFile.setf(ios::showpoint);
  outFile.precision(2);
  outFile << rd.id<< setw(10) << rd.exam1 << setw(10) << rd.exam2 << setw(10) << rd.exam3 << setw(10) << rd.avg << setw(10) << rd.passFail << endl;
}

void StudRd :: WriteInvalidRd(ofstream& outFile, StudRd rd)
{
  outFile.setf(ios::fixed);
  outFile.setf(ios::showpoint);
  outFile.precision(2);
  outFile << rd.id << setw(10) << rd.exam1 << setw(10) << rd.exam2 << setw(10) << rd.exam3 << setw(10) << "Invalid Data" << endl;
}

void StudRd :: WriteFooterRd(ofstream& outFile, StudRd rd)
{
  outFile.setf(ios::fixed);
  outFile.setf(ios::showpoint);
  outFile.precision(2);
  outFile << ">>> Max of All Valid Exams: " << rd.examMax << endl;
  outFile << ">>> Average of All Valid Exams: " << rd.avgOfAllExams << endl;
  outFile << endl;
  outFile << "Number of Valid Data: " << rd.numValid << "   Number of Invalid Data: " << rd.numInvalid << endl;
  outFile << "Number of Students Passed: " << rd.numPass << "   Number of Students Failed: " << rd.numFail << endl;
}

void StudRd :: findAvg(StudRd& rd)
{
  rd.avg = float(rd.exam1 + rd.exam2 + rd.exam3)/float(3);
  rd.examSum = rd.examSum + rd.avg;
  if(rd.avg < 70){
    rd.passFail = "F";
    numFail++;
  }
  else{
    rd.passFail = "P";
    numPass++;
  }
}

#include <fstream>
#include <iostream>
#include <iomanip>

using namespace std;

//Creates the structure Studrd
class StudRd
{
  public:
  void DefaultRd();

  bool ValidRd(StudRd& rd) const;

  void ValidCountRd(StudRd& rd);

  void InvalidCountRd(StudRd& rd);

  void MaxOfAllExams(StudRd& rd);

  void AvgOfAllExams(StudRd& rd);

 void ReadRd(ifstream& inFile, StudRd& rd);

 void WriteRd(ofstream& outFile, StudRd rd);

 void WriteInvalidRd(ofstream& outFile, StudRd rd);

 void WriteFooterRd(ofstream& outFile, StudRd rd);

  void findAvg(StudRd& rd);

 private:
  int id;
  int numValid;
  int numInvalid;
  int numPass;
  int numFail;
  float exam1;
  float exam2;
  float exam3;
  float avg;
  float examMax;
  float avgOfAllExams;
  float examSum;
  string passFail;
}; 
```

我不知道是什么原因造成的，对此有任何帮助，所以我至少可以编译它，这样我就可以做最后的调整，我将非常感激。

如果有人发现错误，他们可以指出错误并解释出了什么问题，这将是非常好的。

也是我第一次提交希望我做对了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:18:21.917

您已将函数声明并定义为：

```
bool ValidRd(StudRd& rd) const; 
             ^^^^^^^^^^^ 
```

但您试图将其称为：

```
if(rd.ValidRd()){      
             ^^^ 
```

没有任何参数，显然因为你没有声明一个没有参数的函数，编译器会抱怨。它无法通过名称找到`ValidRd()`不带输入参数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:21:30.247

好的，让我们看一下错误消息的内容。翻译过来，它说“你试图调用一个名为 StdRd::ValidRd 的方法，没有参数。我能找到的最接近的方法是一个 StdRd::ValRD()，它引用了一个 StdRd。”

现在，查看整个错误消息会很方便，其中包括它看到错误的行号（可能在冒号之间，例如“：36：”），但与此同时，请查看您调用 ValRd 的所有位置。

# javascript - 使用 Node.JS 的实时图形

> ID：12613569
> 
> 赞同：1
> 
> 时间：2012-09-27T03:16:04.800
> 
> 标签：javascript, node.js, graphics, raphael, socket.io

我是 Node JS 和 Socket.IO 的新手，对 JS 来说几乎是新手……我正在尝试制作一款迷你多人游戏，只是为了学习。我在服务器中对玩家的位置进行所有处理，并将所有位置传递给每个客户端，以便每个客户端在浏览器中制作所有图表。

在服务器端，我有这些：

 `````
function Player(x,y){
    some things...
    this.graph = '';
}
setInterval(function(){
    for (i in players){
    players_position(players[i]);
    }
    io.sockets.emit('new_data', players); 
}, 100); 
````  `（我每 100 毫秒发送一次所有玩家的位置）

然后在客户端：

 `````
var r = Raphael('field', 800, 600)
for (i in players){
        players[i].graph = r.circle(players[i].x,players[i].y).attr({fill:'blue'});
        players[i].graph = players[i].graph.attr({cx : players[i].x , cy:players[i].y}); 
```` 

`（这会在开始时制作每个玩家的图表，并且效果很好）`

 `````
 socket.on('new_data', function(players){
            for (i in players){
                players[i].graph = players[i].graph.attr({cx : players[i].x , cy:players[i].y});

} 
```` 

`我的问题是这里它说这没有方法ATTR。好像 object.graph 实际上并不是我想要的那样。我希望我已经把自己说得够清楚了。如果没有，请告诉我。`

 `非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:37:23.483

你的问题有点不清楚，但我认为你正试图通过 socket.io 传递整个 raphael 对象？

```
socket.on('new_data', function(players){
   // here players is just a plain object without any methods
} 
```

只需在您的浏览器中创建一个 console.log(players)，您就会看到发生了什么。几行代码我希望这会给你一个想法。

```
var local_players = [] // < store your clientside players and the raphael objects

socket.on('new_data', function(playerdata){
//for every player data recieved update your local players data..
  for(var i in playerdata)
    local_players[i].attr({cx : playerdata[i].x , playerdata[i].y});
} 
```

您还必须确保每个玩家都获得他的玩家数据，因此如果来自 playerdata 的 id 相同，则为每个玩家提供唯一的 id，则更新玩家位置。`````

# mongodb - NoSql 文档结构

> ID：12613575
> 
> 赞同：0
> 
> 时间：2012-09-27T03:17:25.533
> 
> 标签：mongodb

我有一个包含 3 个表的数据库：品牌（想想麦当劳）-> 商店-> 销售

每个店铺都有很多销售，每个品牌都有很多店铺。如果我想查询麦当劳有多少销售额来构建报告，我该如何构建我的品牌文档？我是否`sales`在品牌文档中保留一个字段，该字段在每个商店进行销售时都会更新，或者我`sale`在商店文档中保留一个字段，然后循环遍历所有商店以创建每个品牌的销售总和。

第一种方法可能在读取时表现更好，而第二种方法在写入时表现更好。我的数据库的读取次数多于写入次数（至少在开始时），所以我很想知道在 MongoDB 中执行此操作的标准方法是什么。

来自关系数据库，我可能会有 Shops -> BrandShops -> Shop -> Sales 等，但我只是在尝试 Mongo。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:23:09.277

当您在 MongoDB 中具有一对多关系时，通常最好将数据嵌入到拥有的对象中，而不是使用数据库引用来表示关系。原因是 MongoDB 不支持连接 - 当您需要来自两个不同集合的数据时，您需要分别查询这两个集合。

当你有一个多对多的关系时，你应该使用引用数组而不是嵌入，因为否则你将不得不更新所有嵌入一个改变的对象的对象。

但请注意，MongoDB 中每个文档有 16MB 的限制。当具有嵌入对象的对象可能接近此限制时，您仍应使用引用（以拥有对象中的数组形式，或拥有对象中的字段的形式）。

MongoDB 中的引用可以是对象 ID、[DBRef](http://docs.mongodb.org/manual/applications/database-references/)（许多驱动程序可以自动或半自动解析）或自定义唯一标识符，如名称或 ID 号。后者的优点是您可以向用户显示相关文档的有意义的概览列表，而无需全部查询。不用说，这个字段在引用的集合中应该有一个唯一的索引。您还可以将引用与被引用对象的一些基本数据点结合起来，以便能够向用户呈现更有意义的预览。

# java - 在 Play 中引用 keystore 崩溃类初始化！2.0 (Scala, ~Java)

> ID：12613577
> 
> 赞同：0
> 
> 时间：2012-09-27T03:17:31.133
> 
> 标签：java, scala, playframework-2.0

notnoop 使用了很棒的 Java APNS。[https://github.com/notnoop/java-apns](https://github.com/notnoop/java-apns)

出于某种原因，当我想拉入我的密钥库时，容纳 APNS 的整个对象就会爆炸。下面是：

```
object Notification {
 val iosApnsDist = 
        APNS.newService()
        .withCert("/ipush.dist.p12", "password")
        .withSandboxDestination()
        .build()
} 
```

对于熟悉 Play! 的人来说，添加到`conf`文件夹中的文件应该在类路径中可用。所以我有点困惑，为什么我的引用会使应用程序崩溃。

下面是提取密钥库的 APNS java 源代码片段。有什么想法吗？

```
public ApnsServiceBuilder withCert(String fileName, String password)
    throws RuntimeIOException, InvalidSSLConfig {
        FileInputStream stream = null;
        try {
            stream = new FileInputStream(fileName);
            return withCert(stream, password);
        } catch (FileNotFoundException e) {
            throw new RuntimeIOException(e);
        } finally {
            Utilities.close(stream);
        }
    } 
```

## 更新

在启动期间运行 try/catch 时，我能够提取错误消息。基本上，它找不到文件：

```
Caused by: com.notnoop.exceptions.RuntimeIOException: java.io.FileNotFoundException: \ipush.dev.p12 (The system cannot find the file specified)
        at com.notnoop.apns.ApnsServiceBuilder.withCert(ApnsServiceBuilder.java:116)
        at engine.logic.notification.Notification$.<init>(Notification.scala:61) 
```

我可以确认该文件确实在 /conf 文件夹中，那是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:40:04.363

找到了这个的原因。请注意播放！将文件添加到*类路径*，但`FileInputStream`实际上并不直接引用类路径上的路径。相反，它使用*文件系统*上的路径。

以前的 StackOverflow 将提供有关**getResourceAsStream 与 FileInputStream**的基础知识：[getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)

所以回到最初的问题......它有助于查看 APNS 的源代码。请注意，它使用`FileInputStream`但自 Play！仅将其添加到*类路径*中，然后需要修改源才能使用`ClassLoader.class.getResourceAsStream(fileName)`.

我怀疑这也适用于其他开源库。

那么为什么物体会崩溃呢？因为如果没有一点错误捕获，它永远不会正确初始化。

# wpf - Sams 在 24 小时内自学 WPF：与 OnChanged 事件不一致的结果

> ID：12613579
> 
> 赞同：0
> 
> 时间：2012-09-27T03:17:38.567
> 
> 标签：wpf, xaml, data-binding

我刚刚开始使用 WPF，并且一直在阅读“ *Sams Teach Yourself WPF* ”。在第 6 章中，它在后面的代码中介绍了对属性的绑定，如下所示。这种方法对我来说取得了不一致的成功。

在我当前的项目中，此方法适用于我绑定到标签的两个双精度数。当我尝试使用相同的方法将 bool 绑定到 MenuItem 的 IsEnabled 属性时，该方法失败。

然后我回到书中的简单示例，并将属性类型从 String 更改为 bool。在这种情况下，我能够将布尔值绑定到 Button 和 TextBox。

我注意到当此方法失败时，OnChanged 函数中的 EventHandler 始终为空。我错过了什么？

```
private String _myString;
public String MyString
{
     get { return _myString; }
     set 
     {   
          _myString = value;
          OnMyStringChanged();
     }
}

public event EventHandler MyStringChanged;

private void OnMyStringChanged()
{
     if (MyStringChanged != null)
          MyStringChanged(this, EventArgs.Empty);
} 
```

我的 MainWindow 类中有以下 XAML。在 MainWindow 的构造函数中，我将 DataContext 设置为包含 MyString 的类的新实例。

```
<TextBox Text="{Binding Path=MyString, Mode=TwoWay}"
         Margin="4"/>
<Button Grid.Row="1"
        Height="40"
        Margin="4"
        Click="Button_Click"
        Content="{Binding Path=MyString, Mode=TwoWay}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:05:30.170

您面临的问题是实例化表单副本的代码需要为“MyStringChanged”事件注册一个侦听器。

检查您声明表单实例的位置：即

```
var myForm = new TestForm();
TestForm.Show(); 
```

您需要添加：

```
var myForm = new TestForm();
myForm.MyStringChanged += someHandlingMethod;
TestForm.Show(); 
```

样本中应该提到类似的东西。

老实说，虽然这不是我读过的一个很好的样本。他们正在使用 WPF 制作一个 WinForm 风格的应用程序。要学习 WPF，您需要查看 MVVM。这当然不是 24 小时的任务。做完以上你还不如构建一个 WinForm 应用程序，它会为你省去很多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:30:48.603

问题出在我身上。我在 XAML 绑定路径中拼错了变量名。如果绑定路径无效，我希望收到编译器警告或异常。即使将绑定模式更改为“TwoWay”，也不会在绑定路径不存在的情况下产生任何警告或运行时异常。很抱歉浪费您的时间。

# sql-server - Visual Studio 2010 创建设置向导

> ID：12613584
> 
> 赞同：0
> 
> 时间：2012-09-27T03:18:06.833
> 
> 标签：sql-server, c#-4.0, .net-3.5

我必须做四件事安装 .net 框架 3.5，安装 SQL Server 2005 并在服务器上运行我的 sql 脚本并创建数据库并安装我的应用程序 如何使用 Visual Studio 2008/2010 在单个安装项目中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:40:43.420

对于 .net 框架，您可以`Prerequisites`在安装项目中添加。您可以通过右键单击您的项目并选择属性来找到先决条件。

当您想在安装期间运行 SQL 脚本时，您需要一个`Custom Action`. MSDN 上有一个很好的演练，它解释了如何[在安装期间使用自定义操作来创建数据库](http://msdn.microsoft.com/en-us/library/49b92ztk%28v=vs.71%29.aspx)

# python - 想要返回两个语句而不使用'and'

> ID：12613586
> 
> 赞同：-3
> 
> 时间：2012-09-27T03:18:10.980
> 
> 标签：python

如何使它返回两个语句而不使用`and`？

```
def needtosenets(self,packet_queue,window_size):
    return len(packet_queue) < window_size and== None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:19:46.963

您可以返回一个元组：

```
return len(packet_queue) < window_size, endpaseqno is None 
```

这将返回以下形式：

```
(True, False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:21:07.917

```
def needtosenets(self,packet_queue,window_size,endpaseqno):
    return (len(packet_queue) < window_size , endpaseqno == None ) 
```

这将返回一个元组。例如 ：

```
 (False , True) 
```

然后，您可以通过 returned_tuple[0] 或 returned_tuple[1] 访问各个值，其中 returned_tuple 是函数返回的元组。

# php - 如何解决 imagesx() imagexy() 错误

> ID：12613589
> 
> 赞同：1
> 
> 时间：2012-09-27T03:18:46.083
> 
> 标签：php, php-gd

我试图通过做这样的事情来获得图像的宽度和高度。

```
$width  = imagesx("abc.jpg");
$height = imagesy("abc.jpg"); 
```

即使文件中只有这两行而没有与任何其他文件的链接，我仍然会收到此错误。图像在服务器中，我不知道出了什么问题。任何人都可以帮忙，好吗？谢谢你。

> 警告：imagesx()：提供的参数不是..中的有效图像资源。
> 警告：imagesy()：提供的参数不是..中的有效图像资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:51:06.753

您需要创建一个图像资源，正如[`imagesy()`](http://php.net/imagesy)预期的那样作为第一个参数。可以 [`imagecreatefromjpeg()`](http://php.net/imagecreatefromjpeg)从您的文件名创建：

```
$image = imagecreatefromjpeg("abc.jpg");
if ($image) {
    $height = imagesy($image);
    imagedestroy($image);
} 
```

或者，如果您只需要获取图像宽度和高度，则可以使用以下[`getimagesize`](http://php.net/getimagesize)功能：

```
list($width, $height) = getimagesize("abc.jpg"); 
```

它直接接受文件名，不需要创建 gd 图像资源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-03T11:57:23.107

```

```
 class SimpleImage {

      var $image;
      var $image_type;
      var $location;

       function load($filename) {
          $image_info = getimagesize($filename);
          $this->image_type = $image_info[2];
          if( $this->image_type == IMAGETYPE_JPEG ) {
             $this->image = imagecreatefromjpeg($filename);
          } elseif( $this->image_type == IMAGETYPE_GIF ) {
             $this->image = imagecreatefromgif($filename);
          } elseif( $this->image_type == IMAGETYPE_PNG ) {
             $this->image = imagecreatefrompng($filename);
          }
       }

       function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {
          if( $image_type == IMAGETYPE_JPEG ) {
             imagejpeg($this->image,$filename,$compression);
          } elseif( $image_type == IMAGETYPE_GIF ) {
             imagegif($this->image,$filename);         
          } elseif( $image_type == IMAGETYPE_PNG ) {
             imagepng($this->image,$filename);
          }   
          if( $permissions != null) {
             chmod($filename,$permissions);
          }
       }
       function output($image_type=IMAGETYPE_JPEG) {
          if( $image_type == IMAGETYPE_JPEG ) {
             imagejpeg($this->image);
          } elseif( $image_type == IMAGETYPE_GIF ) {
             imagegif($this->image);         
          } elseif( $image_type == IMAGETYPE_PNG ) {
             imagepng($this->image);
          }   
       }
       function getWidth() {
          return imagesx($this->image);
       }
       function getHeight() {
          return imagesy($this->image);
       }
       function resizeToHeight($height) {
          $ratio = $height / $this->getHeight();
          $width = $this->getWidth() * $ratio;
          $this->resize($width,$height);
       }
       function resizeToWidth($width) {
          $ratio = $width / $this->getWidth();
          $height = $this->getheight() * $ratio;
          $this->resize($width,$height);
       }
       function scale($scale) {
          $width = $this->getWidth() * $scale/100;
          $height = $this->getheight() * $scale/100; 
          $this->resize($width,$height);
       }
       function resize($width,$height) {
          $new_image = imagecreatetruecolor($width, $height);
          imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
          $this->image = $new_image;   
       }

    //// own stuff added 14/06/2010

        function getType($filetype) {
          if( $filetype == 'image/jpeg' ) {
             $ext = 'jpg';
          } elseif( $filetype == 'image/pjpeg' ) {
         $ext = 'jpg';
          } elseif( $filetype == 'image/gif'  ) {
             $ext = 'gif';
          } elseif( $filetype == 'image/png' ) {
             $ext = 'png';
          }
          return $ext;
       }

       function randomise(){

        // Get a random set of 3 chars which we will append to the filename to prevent duplicate file names.
        $keychars = "abcdefghijklmnopqrstuvwxyz0123456789";
        $length = 3;
        $randkey = "";
        for ($i=0;$i<$length;$i++)  $randkey .= substr($keychars, rand(1, strlen($keychars) ), 1); 

        // Set the name of the file  (current time + the random value + . + the file extension)
        $filename = time().$randkey;

        return $filename;

       }

       function uploadimage($location, $filename, $filetype, $i) {
       /*
          print "location: ".$location;
          print "name: ".$filename;
          print "type: ".$filetype;
          print "num: ".$i;
          die('11');
       */   
           $ext = $this->getType($filetype);
           $newfilename = $this->randomise();

                if($ext <> ""){

                    $file = $newfilename.".".$ext;
                    $uploadfile = $location.$file;

                        // Move the file to the server.  If move is successful store the file info to the database
                        if ((move_uploaded_file($_FILES["image"]["tmp_name"][$i], $uploadfile))or die("Couldn't copy the file!".$_FILES["image"]["tmp_name"][$i])){

                            return $file;

                        }               
                }               

        }      
    } 
```

?>

```
 <?php
    // user like this
    /*
       include('SimpleImage.php');
       $image = new SimpleImage();
       $image->load('picture.jpg');
       $image->resize(250,400);
       $image->resizeToWidth(250);
       $image->scale(50);
        $image->resizeToHeight(500);
       $image->save('picture2.jpg');
       */
    ?> 
```

```

# mysql - 按日期选择最新条目，按序列分组

> ID：12613592
> 
> 赞同：4
> 
> 时间：2012-09-27T03:19:52.703
> 
> 标签：mysql, sql

我正在尝试为每个序列选择最新条目，而忽略 MySQL 数据库中的所有其他条目。我目前使用的 SQL 命令是：

```
SELECT *,MAX(date) FROM `gps-log` GROUP BY serial DESC 
```

根据以下示例，每个序列仅返回一个条目（完美），但正在获取第一个条目，而不是最新条目。确定了正确的最大日期，但由于某种原因未获取该记录。

```
pos                       elev    serial      date                  MAX(date)
-33.8710138,151.1924356   54.0m   SDGH23465   2012-09-26 17:01:59   2012-09-27 12:14:23
-33.8707848,151.1925109   54.0m   SDGH29648   2012-09-27 12:14:30   2012-09-27 12:21:41 
```

我尝试将 DESC 添加到查询中，但这只会重新排列输出（可以预测），而不是实际提取的行。我查看了一大堆不同的问题，但大多数都处理多个表或按更复杂的事物（例如日期）进行分组，我似乎无法以任何方式让这个查询正常工作。

我显然在这里遗漏了一些东西，告诉查询如何获得正确的序列，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:22:55.283

试试这个，

```
SELECT  a.*
FROM    `gps-log` a
        INNER JOIN
        (
            SELECT serial, MAX(`date`) maxDate
            FROM `gps-log`
            GROUP BY serial
        ) b ON a.serial = b.serial AND
                a.`date` = b.maxDate 
```

# crash - 使用 ASIHTTPRequest 仅在 iOS 6 上的 LTE 上发生网络请求崩溃

> ID：12613594
> 
> 赞同：0
> 
> 时间：2012-09-27T03:20:15.123
> 
> 标签：crash, asihttprequest, ios6, iphone-5

我在我的一个应用程序中遇到了一个行为非常奇怪的错误。初始化多个大图像文件的下载时，应用程序将在任何下载进度发生之前崩溃。该应用程序`ASIHTTPRequest`在一个上使用多个`ASINetworkQueue`，只允许一个并发下载。

以下是条件：

1.  iPhone 5 iOS 6.0 AT&T 服务
2.  应用程序是使用 iOS 5.1 SDK 构建的，来自 App Store
3.  崩溃仅发生在 LTE 上，不会发生在 WiFi 或“4G”上。

我们的开发团队只能在一台设备上复制此错误。但是在它发生一次之后，每次尝试请求时都会发生这种情况。该应用程序被多次删除并重新安装，iPhone 重新启动，iCloud 备份被清除，但每次都继续发生崩溃，直到设备切换回 WiFi。

```
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-09-26 21:03:14.872 -0500
OS Version:      iOS 6.0 (10A405)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x90000010
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x34e13f2a objc_release + 10
1   libobjc.A.dylib                 0x34e13490 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 164
2   CoreFoundation                  0x38b5b82c _CFAutoreleasePoolPop + 12
3   Foundation                      0x35005d3c __NSThreadPerformPerform + 600
4   CoreFoundation                  0x38bed8f4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
5   CoreFoundation                  0x38bed158 __CFRunLoopDoSources0 + 208
6   CoreFoundation                  0x38bebf2a __CFRunLoopRun + 642
7   CoreFoundation                  0x38b5f238 CFRunLoopRunSpecific + 352
8   CoreFoundation                  0x38b5f0c4 CFRunLoopRunInMode + 100
9   GraphicsServices                0x30d5b336 GSEventRunModal + 70
10  UIKit                           0x38ce0284 UIApplicationMain + 1116
11  AppName                         0x00003cc6 0x1000 + 11462
12  AppName                         0x00003c54 0x1000 + 11348 
```

有什么想法吗？我认为这可能是一个操作系统错误或与它是使用旧 SDK 构建的事实有关。我能找到的唯一其他类似报告在这里：[iOS6 Sunday Ticket App Crashing over 3G or LTE](http://www.dbstalk.com/showthread.php?t=209067)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:54:33.010

这里可能发生的情况是 iPhone 5 在 LTE 网络上的一个已知问题——当它在 4G 和 LTE 之间切换时，它会暂时断开连接，并且您的所有网络请求都会出错。

您可能希望在设置中暂时禁用 LTE（同时仍有蜂窝数据！）并尝试重现问题。还可以跟踪手机在蜂窝网络上的连接方式：4G 或 LTE。

这是您可以获得谷歌“iphone 5 at&t lte drop”的众多链接之一： http://forums.macrumors.com/showthread.php?t= [1452242](http://forums.macrumors.com/showthread.php?t=1452242)

# c++ - boost::posix_time::from_iso_string 允许错误输入

> ID：12613597
> 
> 赞同：0
> 
> 时间：2012-09-27T03:20:33.713
> 
> 标签：c++, boost, boost-date-time

奇怪的是，

```
std::cout << boost::posix_time::from_iso_string("20120927T062299");// 99 seconds! 
```

yield `2012-Sep-27 06:23:39`，即溢出的秒数进入下一分钟。这真的是预期的行为吗？如果是这样，在这种情况下如何强制功能失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:20:59.767

不同的库实现者对于什么应该导致错误以及什么严重性有不同的想法。

简单的答案是，如果字符串来自用户输入，请在将其提供给任何期望格式正确的字符串的函数之前自行检查。无论如何，这通常是一个好主意。在这种情况下，正则表达式检查将相当简单。

# c - 如何解释 make 命令生成的这个输出？

> ID：12613598
> 
> 赞同：2
> 
> 时间：2012-09-27T03:20:33.967
> 
> 标签：c, bash, makefile, ubuntu-12.04

在运行 make 命令时，我得到以下输出，

```
g++ -DUNIX -Wall -g -I../include -I. main.o hfpage.o hfp_driver.o                      test_driver.o db.o new_error.o page.o system_defs.o buf.o -o hfpage 

/usr/bin/ld: Warning: size of symbol `error_string_table::error_string_table(Status, char const**)' changed   from 18 in db.o to 34 in buf.o
/usr/bin/ld: i386:x86-64 architecture of input file `buf.o' is  incompatible with i386 output
collect2: ld returned 1 exit status
make: *** [hfpage] Error 1 
```

该文件生成 hfpage.o ，当我尝试使用`./hfpage.o`我得到和错误消息运行时`bash: ./hfpage.o: cannot execute binary file`。

我的系统有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:24:49.870

好的，首先，错误消息说`buf.o`是为另一个架构编译的，可能是 64 位机器上的 32 位。

您无法运行的原因`./hprof.o`是这`hprof.o`是一个二进制对象，而不是可执行文件。如果这个编译已经完成，因为你没有`-o`标志，可执行文件将被命名`a.out`，由于历史原因，它是 UNIX 可执行文件的默认名称。

您的问题可能出现在 make 文件的较早步骤中。基本上，你应该有几行像

```
main.o: 
   g++ -DUNIX -Wall -g -I../include -I. -c main.C 
```

然后是最后一行

```
main:
   g++ -DUNIX -Wall -g -o main main.o hfpage.o hfp_driver.o 
```

体系结构消息建议您`buf.o`使用不同的编译器或编译器标志进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:25:13.187

您正在尝试使用 x86-64 版本的库为 i386 架构构建您的应用程序。很可能您错误地安装了 x86-64 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T03:25:43.447

看起来被链接的文件之一的二进制输出与其他文件不同。确保在编译时没有设置`-m32 or -m64`标志`g++`，如果你是，它是一致的。执行此操作后，一次又一次地运行`make clean`以`make`确保它以正确的输出类型重建所有二进制文件。

此外，您不应该执行`.o`文件，因为它们通常是二进制对象而不是可执行文件。检查 Makefile 中的目标以找出可执行文件应该是什么。

# php - 使用 class.upload.php 进行裁剪时出现问题

> ID：12613600
> 
> 赞同：1
> 
> 时间：2012-09-27T03:20:55.793
> 
> 标签：php, jcrop

我在使用 JCrop 和 class.upload.php 裁剪图像时遇到了一个奇怪的问题。我没有根据选择裁剪图像。，我正在根据这个演示[http://deepliquid.com/projects/Jcrop/demos/crop.php](http://deepliquid.com/projects/Jcrop/demos/crop.php)工作。我正在使用以下代码使用 JCrop 获取坐标：

```
function updateCoords(c)
{
   $('#x').val(c.x);
   $('#y').val(c.y);
   $('#w').val(c.x2);
   $('#h').val(c.y2);
}; 
```

我将这些值发布到crop.php 并使用此代码裁剪图像（演示源中的代码不起作用（说不推荐使用），所以我从网上下载了最新的class.upload.php 文件并编写了以下内容根据他们的文档：

```
$handle->image_precrop =  array(intval($_POST['y']), intval($_POST['w']),intval($_POST['h']), intval($_POST['x'])); 
```

# json - 如何使用 Ember 0.9.8.1 重新格式化 tr 元素？

> ID：12613605
> 
> 赞同：0
> 
> 时间：2012-09-27T03:21:10.683
> 
> 标签：json, ember.js, html-table, coffeescript, agents-jade

我正在使用 Ember 从 API 检索 JSON 数据以插入表中。但是，我的记录显示在一个单独的 tr 元素中，而不是每个记录都显示在单独的 tr 元素中。有谁知道如何设置这个？我一直在查看 Ember 文档。我正在使用 Ember 0.9.8.1。

HTML（在 JADE 中）：

```
script(type="text/x-handlebars")
  {{#view Cashier.transactionRowView}}
  table
    thead
      tr
        th Date/Time
        th User ID
        th Amount
        th Date/Time
        th User ID
        th Amount
    {{#each Cashier.transactionsController}}
    <td>{{datetime}}</td>
    <td>{{userId}}</td>
    <td>{{amount}}</td>
    <td>{{console.datetime}}</td>
    <td>{{console.userId}}</td>
    <td>{{console.amount}}</td>
    {{/each}}
  {{/view}} 
```

应用咖啡脚本：

```
Cashier = Ember.Application.create(
  ready: ->
    console.log "Cashier app loaded"
) 
```

模型咖啡脚本：

```
Cashier.Transaction = Ember.Object.extend(
  id: null
  datetime: null
  type: null
  userId: null
  amount: null
) 
```

查看咖啡脚本：

```
Cashier.transactionRowView = Em.View.extend({
  tagName: 'tr'
  templateName: 'cashier-transactions'
}); 
```

控制器咖啡脚本：

```
Cashier.transactionsController = Ember.ArrayController.create(
  content: []
  resourceUrl: 'http://localhost:8080/prepaid/cashiertransactions'
  loadTransactions: ->
    self = this
    url = this.resourceUrl

    $.getJSON url,
      cashierId: "test@test.com"
      period: "3"
    , (data) ->
      transactions = data.transactions

      $(transactions).each (index, value) ->
        t = Cashier.Transaction.create(
          id        : value.id
          datetime  : value.datetime
          type      : value.type
          userId    : value.userId
          amount    : value.amount
        )
        self.pushObject Cashier.Transaction.create(t)
) 
```

来自服务器的 JSON 示例：

```
{
    "status": "OK",
    "transactions": [
        {
            "amount": 22,
            "datetime": 1348137916873,
            "id": "CSH37916873",
            "type": "TOP-UP: kriskhaira@test.com; PAYMENT METHOD: undefined",
            "userId": "test@test.com"
        },
        {
            "amount": 222,
            "datetime": 1348142501961,
            "id": "CSH42501961",
            "type": "TOP-UP: test.htc@test.com; PAYMENT METHOD: undefined",
            "userId": "test@test.com"
        },
        {
            "amount": 48,
            "datetime": 1348550184793,
            "id": "CSH50184793",
            "type": "TOP-UP: kriskhaira@test.com; PAYMENT METHOD: undefined",
            "userId": "test@test.com"
        },
        {
            "amount": 20,
            "datetime": 1348550386661,
            "id": "CSH50386661",
            "type": "TOP-UP: kriskhaira@test.com; PAYMENT METHOD: undefined",
            "userId": "test@test.com"
        },
        {
            "amount": 1800000003000,
            "datetime": 1348657215712,
            "id": "CSH57215712",
            "type": "DEDUCT: kriskhaira@test.com - 3GB Data Plan",
            "userId": "test@test.com"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:01:08.147

您的问题是`{{#view Cashier.transactionRowView}}`您将所有内容包装在其中的块。看起来您正在尝试做的是`cashier-transactions`通过将所有内容包装在中来定义模板`{{#view Cashier.transactionRowView}}`，而实际发生的是您正在插入一个 transactionRowView （它将其 tagName 定义为'tr'，因此是巨大的包装 tr elemet），并且您正在使插入视图的内容介于`{{#view}}`和之间`{{/view}}`。您想要做的是`script(type="text/x-handlebars", data-template-name="cashier-transactions")`摆脱#view 和/view。如果不是一路走来，那应该会让您非常接近，但最重要的是确保了解模板是如何声明和绑定到视图的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:11:49.637

```
{{#view Cashier.transactionRowView}}
<table>
  <thead>
    <tr>
      th Date/Time
      th User ID
      th Amount
      th Date/Time
      th User ID
      th Amount
    </tr>
  </thead>
  </tbody>
  {{#each Cashier.transactionsController}}
  <tr>    
    <td>{{datetime}}</td>
    <td>{{userId}}</td>
    <td>{{amount}}</td>
    <td>{{console.datetime}}</td>
    <td>{{console.userId}}</td>
    <td>{{console.amount}}</td>
  </tr>
  {{/each}}
{{/view}} 
```

# iphone - 从 coredata 对象读取

> ID：12613611
> 
> 赞同：0
> 
> 时间：2012-09-27T03:21:52.337
> 
> 标签：iphone, ios, core-data

我正在尝试获取已保存到核心数据对象中的值，但是出现此错误

```
Use of undeclared identifier 'error' 
```

这指向我在下面的代码和平中引用**和错误的地方**

```
// Test listing all FailedBankInfos from the store
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Manuf" inManagedObjectContext:context];
        [fetchRequest setEntity:entity];

NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
        for (Manuf *manuf in fetchedObjects) {

           // Log all of the values in the object  

        } 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T03:25:07.663

您需要先声明错误，然后再将引用传递到`executeFetchRequest`.

像这样：

```
NSError *error; 
```

# canvas - 如何在画布中按其中心平移矩形？

> ID：12613612
> 
> 赞同：1
> 
> 时间：2012-09-27T03:22:03.063
> 
> 标签：canvas, center, translate

我对 canvas 元素还很陌生，我想了解更多，因为我认为它有潜力。几年前我学过一些openGL（虽然有点模糊），但我只记得很少的东西。综上所述，我如何能够围绕其中心或原点平移对象，例如矩形。我知道你将如何围绕它的中心旋转；平移到原点，旋转它，然后将其平移回来。很简单。我尝试使用相同的概念围绕其中心进行翻译，但无济于事。翻译点仍然在左上角，而不是在我想要的中心。关于我将如何做到这一点的任何提示？我希望这不是一个愚蠢的问题，我只是筋疲力尽，今天无法正确编程或其他什么。

```
var width = 500;
var height = 400;
var x;
var y;
var rot;
var mx = 2;
var my = 2;

function init() {
    x = 0;
    y = 0;

    setInterval(draw, 1000 / 60);
}
function draw() {
    var ctx = document.getElementById("canvas").getContext("2d");
    ctx.clearRect(0, 0, width, height);

    ctx.save();
    ctx.translate(x, y);
    ctx.fillStyle = "white";
    ctx.strokeRect(0, 0, 30, 30);
    ctx.restore();

    document.getElementById("x").innerHTML = x;
    document.getElementById("y").innerHTML = y;
}

document.onkeydown = function(e) {
    var event = e || window.event;

    /*if(x + mx > canvas.width - 15 || x + mx < 15) {
        x = (x + mx > canvas.width - 15) ? canvas.width - 15 : 15;
    }*/

    if(e.keyCode == 39) { // Right
        x = x + mx;
    }
    else if(e.keyCode == 37) { // Left
        x = x - mx;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:23:06.597

听起来您对翻译转换的工作方式感到困惑。旋转和缩放变换包括乘法，所以变换的起源很重要。对于旋转或缩放，您可以平移以设置变换的原点，执行旋转或缩放，然后根据需要平移回来。

但是，平移只是简单的加法，因为被变换的每个点都移动了相同的量。不涉及乘法，因此变换的起源无关紧要。如果要将矩形向左移动 5 个像素，只需创建一个从每个 X 坐标减去 5 的变换。

例如，假设您在画布上绘制了一个矩形，其左上角位于`(0, 0)`，右下角位于`(x, y)`（其中心为`(x/2, y/2)`）。如果你想移动画布的原点，使矩形的左上角`(-x/2, -y/2)`和右下角是`(x/2, y/2)`（它的中心是`(0, 0)`），你可以将原点平移`x/2, y/2`。

您尚未指定您使用的语言或环境，但根据您的示例，您可能会使用类似的内容：

```
ctx.transform(x/2, y/2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T04:43:00.570

假设您希望矩形的原点位于其自身的中心，则获取以方形画布为中心的矩形的一般形式是：

`(totalCanvasWidth - rectXDimension)/2 = centerTransformPosition`

相同的计算适用于 y 轴。

# java - 分布式客户端的可靠 TCP 传输

> ID：12613615
> 
> 赞同：-1
> 
> 时间：2012-09-27T03:22:16.197
> 
> 标签：java, tcp, activemq

我正在开发一个项目，我们有多个 GUI 客户端在用户桌面上运行到单个服务器。客户端将分布在全球，并通过 WAN 连接。

我想确保除了 GUI 本身的发布包之外，客户端 PC 上运行的应用程序不存在依赖关系。传输本身应该是可靠的（没有丢失的消息，重放未确认的消息）。

我想为我们的应用程序编写一个基于 TCP 套接字的自定义传输，并实现一些逻辑来检测丢弃或未确认的消息。

我也在考虑使用 ActiveMQ（通过 TCP/IP 传输使用 JMS）。还有其他选择或建议吗？

编辑：TCP 是一种可靠的传输方式，但如果客户端断开连接或重新启动，我需要检测并重播可能已丢弃的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:09:44.637

TCP 保证在没有应用程序错误或崩溃的快乐世界中交付。

一些 TCP 数据可能会被网络堆栈确认，但在处理它之前，应用程序可能已经崩溃（或服务器崩溃）。

带有事务的 ActiveMQ 让您处理这些事情。甚至 AMQ 中的应用层 ack 也会给你带来可靠性，增加系统的复杂性（当然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:27:26.320

TCP [传输控制协议] 已经处理了所有这些。

它保证您将获得所有数据并以正确的顺序获得它，或者通知发件人某些数据无法发送。所有 TCP 数据包都包含它们在流中的位置，并且协议为它接收到的每个数据包发送一个确认。如果发送方没有收到确认，它会重新发送接收方可能没有的所有数据。只有在接收器获得应用层想要的数据（总是流中的下一个字节）之后，它才会将数据提供给应用层。

如果 TCP 连接无法发送或接收数据（但不仅仅是因为它没有接收任何数据），TCP 最终会放弃，并且您会在发送方收到 I/O 异常。如果接收者知道它应该接收数据（或者它有数据要发送，或者你启用了保持活动），它也会放弃。您可以调整 TCP 协议放弃之前的时间量。默认值绰绰有余。

如果您想知道由于断开连接而丢失了多少数据（但客户端可能不会很快连接），您也可以在应用层发送确认。如果您遇到 I/O 异常（并且仅在您遇到异常时），将最后确认的消息 ID 存储在数据库中并在重新连接时恢复传输。

如果您*不*希望 TCP 重新发送丢失的数据包，请改用 UDP。UDP 只保证两件事：接收者收到什么，发送者确实发送了，并且它永远不会尝试发送相同的数据包两次。

# javascript - innerHTML 不适用于 IE7 上的表格行元素？

> ID：12613617
> 
> 赞同：2
> 
> 时间：2012-09-27T03:22:21.960
> 
> 标签：javascript, html-table

请检查这个例子：http: [//jsfiddle.net/lulu2792/a9LZd/](http://jsfiddle.net/lulu2792/a9LZd/)

我使用 innerHTML 设置表格行内容（包括单元格内容），我在 Firefox 和 Chrome 上运行良好。但是，它在 IE7 上有一个错误（也在 IE9 兼容模式下）。表格 HTML 结果为：

```
<TABLE id=table1>
 <TBODY>
  <TR>
   <TD>
    Test
   </TD>
  </TR>
  <TR>
   ABC
   </TD>
  </TR>
 </TBODY>
</TABLE> 
```

请关注第二行，它有一个错误。我不明白为什么 innerHTML 在 IE7 上会导致这个错误。如何纠正这个问题？

我还有一个问题：如果我不在这样的表格元素中使用 tbody 标记：

```
var html = "<table id='table1'><tr><td>Test</td></tr></table>"; 
```

浏览器仍然呈现这个标签。

请帮我回答以上两个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T03:34:34.170

在 IE 中不能使用 innerHTML 属性编写表格的一部分，必须使用 DOM 方法。innerHTML 可用于编写整个表格或单元格的内容。

MSDN 上有一个例子：[Building Tables Dynamically](http://msdn.microsoft.com/en-us/library/ms532998%28v=vs.85%29.aspx)。

MDN上还有一个例子：[Using the DOM Table Interface](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference/Examples#Example_8.3A_Using_the_DOM_Table_Interface)

在您在其他地方发布的代码中（最好在此处发布）：

```
// create table
var html = "<table id='table1'><tbody><tr><td>Test</td></tr></tbody></table>";
document.getElementById('div1').innerHTML = html; 
```

这很好用，因为它创建了一个完整的表。

```
// append a row into table
var tr = document.createElement('tr');
var td = document.createElement('td');
td.innerHTML = 'ABC';
tr.appendChild(td);
var s = tr.innerHTML; 
```

以上在所有浏览器中都可以正常工作。

```
tr.innerHTML = s; 
```

糟糕，只能分配给单元格（td 或 th）的 innerHTML，不能分配给表格的任何其他部分。

```
tr.innerHTML = '<td>' + 'ABC' + '</td>'; 
```

又是一样。

```
var tbody = document.getElementById('table1').getElementsByTagName('tbody')[0]; 
```

您可以使用[tBodies](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-63206416)属性来简化：

```
var tbody = document.getElementById('table1').tBodies[0];
tbody.appendChild(tr); 
```

如果您没有弄乱 tr 的 innerHTML，那将可以正常工作。

请注意，您还可以执行以下操作：

```
var tbody = document.getElementById('table1').tBodies[0];
var row = tbody.insertRow(-1);
var cell = row.insertCell(-1);
cell.innerHTML = 'whatever'; 
```

你完成了。您还可以克隆一整行，然后使用 innerHTML 修改单元格内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T03:31:34.570

Internet Explorer 在将 HTML 附加到表时存在臭名昭著的问题。最好的解决方案是使用第三方库来规范跨浏览器的行为（例如[jQuery](http://www.jquery.com)，但还有其他的）。

jQuery 示例：

```
// invokes a function when document is ready
// dollar symbol is "jQuery" alias inside function
jQuery(function($) {
    // select the table body and append a new row
    $('#table1 tbody').append('<tr><td>ABC</td></tr>');
}); 
```

嘿，第二行缺少`<td>`开始标签。

您的第二个问题：不需要 tbody （如果您有 thead 和 tfoot，我相信 XHTML 需要它）。

# jsf - 选择多值的 UI 示例

> ID：12613618
> 
> 赞同：0
> 
> 时间：2012-09-27T03:22:29.990
> 
> 标签：jsf, user-interface, multivalue

在我的表单中，有一个文本框允许带分隔符的多值输入

例如“澳大利亚、俄罗斯、新加坡、美国”

用户可以添加多值..

我可以知道是否有任何网站显示此类数据的 UI 输入示例？

目前我们正在使用一个带有 2 个列表框的弹出 bean，一个列表框包含所有可用数据，另一个用于选择。

我想知道是否还有其他更好的方法。

补充说明：有一个带有按钮的文本框可以点击。

当用户单击按钮时，将出现一个弹出窗口。

弹出窗口将有 2 个列表。列表一显示所有可供选择的值，用户可以移动另一个列表框。

用户完成选择后将单击更新按钮，它将使用所选数据更新文本字段。

我的问题是还有哪些其他 UI 呈现方式可用于多值选择。将来这些值可能会显示在树中，用户必须选择一些节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:24:10.877

如果您正在使用`richfaces`，可能您可以使用[list-shuttle](http://livedemo.exadel.com/richfaces-demo/richfaces/listShuttle.jsf?c=listShuttle&tab=usage)或其他各种可用的丰富选择。

从 UI 的角度来看，它更加流畅且易于选择，因为用户可以一次查看他选择的所有选项。

另一种可能的方式或选项是`checkbox in combo`让用户从组合选择中选择多个检查。[这里](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)的例子。我相信如果你想拥有一个`compact and friendly UI`.

或者，如果您的选项数量有限，则只需将`checkboxs`要选择的选项数量放在一起。

# javascript - 如何验证是否在jQuery中勾选了所有复选框？

> ID：12613620
> 
> 赞同：0
> 
> 时间：2012-09-27T03:22:38.163
> 
> 标签：javascript, jquery, validation

我是 jQuery 的初学者，我想知道如何在提交之前专门为复选框验证表单。

我正在创建一个简单的清单表单，如果他完成该步骤，我的用户将在其中勾选一个复选框。我打算做的是，如果有一个“未选中”复选框并用颜色突出显示它，脚本将阻止表单提交。

这是我的代码：

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Untitled Document</title>
    <style>
      .error {
        background-color: #F00;
      }
      .valid {
        background-color: #0F0;
      }
    </style>
    <script type="application/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js">    </script>
    <script type="application/javascript">
      $('#button').on('click', function() {
        var $checkboxes = $('.container [type=checkbox]');

        $checkboxes.filter(':checked').parent().removeClass('error').addClass('valid');
        $checkboxes.not(':checked').parent().removeClass('valid').addClass('error');
      });
    </script>
  </head>

  <body>
    <div class="container">
      <input class="tick" id="option1" type="checkbox">
    </div>
    <div class="container">
      <input class="tick" id="option1" type="checkbox">
    </div>
    <input id="button" type="button" value="check">
  </body>
</html>
```

所以我在这里尝试做的是当用户单击按钮时，脚本将用红色突出显示所有未选中的复选框，并用绿色突出显示所有选中的复选框。

但是，我的脚本无法运行。我的脚本有什么问题？关于更有效的方法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:32:18.953

尝试以下操作：

```
$(document).ready(function(){
    var len = $('input[type=checkbox]').length;

    $('#button').click(function(e){
        var $cb = $('input[type=checkbox]');
        $cb.filter(':checked').parent().removeClass('error');
        var not = $cb.not(':checked').parent().addClass('error').length;
        if (len == not) {
            e.preventDefault(); // prevent the default action of the event
        }
    })​
}) 
```

[http://jsfiddle.net/2dcPE/](http://jsfiddle.net/2dcPE/)

请注意，您的标记无效，ID 必须是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:37:52.110

您有多个具有相同`id`属性的元素。`id`s 是唯一的，应该引用一个元素。如果您计划将多个元素组合在一起，请改用`class`属性。

另外，不要使用`onclick`. 只需使用 jQuery`.on('click'`处理程序。

**HTML**：

```
<div class="container">
    <input class="tick" id="option1" type="checkbox" />
</div>

<div class="container">
    <input class="tick" id="option2" type="checkbox" />
</div>

<input id="button" type="button" value="check" />​ 
```

**JavaScript**：

```
$('#button').on('click', function() {
    var $checkboxes = $('.container [type=checkbox]');

    $checkboxes.filter(':checked').parent().removeClass('error').addClass('valid');
    $checkboxes.not(':checked').parent().removeClass('valid').addClass('error');
});​ 
```

**演示：http: [//jsfiddle.net/Blender/fzZFz/3/](http://jsfiddle.net/Blender/fzZFz/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:35:46.063

试试这个

```
function validateAll(){
    $('.tick').each(function(){
        if(this.checked){
            $(this).closest('#container').addClass('valid');
        }else{
            $(this).closest('#container').addClass('error');
        }
        });
    } 
```

见现场[小提琴](http://jsfiddle.net/qDx9t/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T03:36:15.463

有几件事：

1.）您有多个具有相同 ID（容器）的元素。这不是有效的 html，jquery 只会返回它在按 ID 搜索时找到的第一个元素。

2.) 只有在用户单击检查按钮后，您才将事件绑定到更改。我认为您可以绑定到 .tick 更改事件并在用户检查项目时对其进行验证。

3.）您的逻辑是向后验证的。当一切都有效时，您正在添加错误条件。

最终的js是这样的：

```
 $(".tick").change(function(){
        if ($('.tick:checked').length == $('.tick').length) {
            $('.container').removeClass("error");
            $('.container').addClass('valid');
        } else {
            $('.container').removeClass("valid");
            $('.container').addClass('error');
        }
});    ​ 
```

对 html 进行一些小调整以删除重复的 ID：

```
<div class="container"><input class="tick" id="option1" type="checkbox"></div>
<div class="container"><input class="tick" id="option1" type="checkbox"></div> 
```

看到这个小提琴：http: [//jsfiddle.net/johnkoer/225Ty/5/](http://jsfiddle.net/johnkoer/225Ty/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T03:44:15.447

```
function validateAll() {
    $(".tick").each(function(index, item) {
        if ($(this).is(":checked")) {
            $(this).parent().removeClass().addClass('valid');
        } else {
            $(this).parent().removeClass().addClass('error');
        }
    });
} 
```

# spring - 如何通过 iBatis 防止 UPDATE 中的并发问题

> ID：12613621
> 
> 赞同：2
> 
> 时间：2012-09-27T03:22:37.917
> 
> 标签：spring, concurrency, struts2, ibatis

我们的 Java EE Web 应用程序使用 iBatis (ORM) 执行数据库操作。数据库操作流程如下

***流程***：JSP --->Action--->ServiceIMpl--->DaoImpl---->Calling update query thru' IBatis

***注意***：Action、Service 和 DAO 类是使用 Spring 2.5 的依赖注入技术实例化的。我们使用 Struts2。

***问题***：2 个并发用户搜索相同的记录，并且 User1 更新 Attribute1，而 User2 更新 Attribute2。用户 1 首先单击“保存”，然后用户 2 单击保存（它们彼此跟随，相差几秒钟）。当我们看到数据库中的数据时，只有 User1 的更新存在。Audit 列也只显示 User1 的更新。User2 对 Attribute2 的更新没有完成，同时没有抛出异常。

我们尝试在 iBatis 中使用开始事务和提交事务，围绕在 sqlmap xml 中定义的更新查询的调用。同样的问题仍然存在。我们还尝试删除这些事务命令，但问题仍然存在。

我们是否应该在更新期间做一些特殊/不同的事情来处理并发？像 iBatis 这样的 ORM 不会自己处理吗？

***附加信息***：进一步调查显示以下信息。

当用户 1 和用户 2 单击记录时，将获取完整的数据以供查看。

现在，当 User1 和 User2 都更改了一些属性并单击保存（同时）时，假设首先更新 User1 的数据，然后在更新 User2 的数据时，User1 已经更新的数据被覆盖并丢失。

***`What approach is usually followed in such screens to handle such scenarios ?`***

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T20:14:27.133

您的问题不在于事务，而是在您修改某些内容之前，您必须确保自上次阅读以来没有人进行过修改。

在 Web 应用程序中，您应该使用[乐观锁定](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)。基本上，您的表中有一个“版本”字段，其初始值为`insert`（通常为 1），并随着每个`update`. 程序是：

1.  从表中读取数据，*包括版本字段*

2.  向客户端发送数据，包括版本字段

3.  **从客户端接收修改的数据，包括未更改**的版本字段

***   更新表*并增加版本*，**但前提是行中的版本字段与从客户端收到的原始版本字段相同**。也就是说，你在哪里

    ```
    update
    ... 
    where id = :id_from_client 
    ```

    ，现在你应该做

    ```
    update 
    ..., 
    version = version + 1 
    where 
    id = :id_from_client and 
    version = :version_from_client 
    ```

    *   获取更新的行数（您通常可以直接从持久性框架的更新操作中获取此信息）。如果更新的行数为 1，则操作成功。如果更新的行数为 0，则应发出并发错误信号。** 

 **一个例子：

1.  User1 获取数据，版本 = 17

2.  User2 获取数据，版本 = 17

3.  User1 原子性（原子性来自单个 SQL 语句）：

    *   检查版本是否 = 17
    *   更新数据
    *   将版本设置为 18
4.  用户2原子：

    *   检查版本是否 = 17
    *   由于版本实际上是 18，因此发出并发错误并中止操作，通知用户由于其他人修改了相同的数据，操作无法完成。

大多数当前的持久性框架开箱即用地支持这一点，而且大多是自动的（例如，请参阅[JPA @Version 注释](http://docs.oracle.com/javaee/5/api/javax/persistence/Version.html)）。iBatis 似乎没有，但由于它非常接近 SQL，因此您自己实现它应该不会有很多问题。[有关使用 iBatis 进行乐观锁定](http://webcache.googleusercontent.com/search?q=cache:y6cpaqUMAGYJ:matejtymes.blogspot.com/2010/11/optimistic-locking-on-ibatis.html%20&cd=1&hl=en&ct=clnk&client=iceweasel-a)的一些详细信息，请参阅此博客条目。

使用此方案，您不会丢失更新，唯一的问题是某些特定情况会使用户非常恼火：假设您花了 5 分钟完成某个表格，但最后却被告知您的操作无法完成，并且你需要从头开始重试！！在这少数情况下，您应该在乐观锁定之上实现一些更复杂的东西。我会使用某种*远程资源租赁*（链接？？）：

1.  客户端向服务器请求数据*租用*。

2.  如果数据已租用给另一个客户端，则发出并发错误信号。

3.  否则，将租约授予客户*一段有限的时间*。

4.  在租约到期之前，服务器授予客户端对数据的独占访问权限。客户端还可以请求续租（例如，通过 AJAX）。服务器可以接受或拒绝续订。（租用时间和续订策略应由服务器根据正在处理的特定用例决定）。

5.  租约到期（例如，这可以通过服务器上的计划任务来完成）。当租约到期时，数据应该被认为是“解锁的”，并且服务器应该拒绝对客户端的访问，除非客户端被授予新的租约。

这样，您的用户*甚至可以在他们开始*尝试完成的任何冗长操作之前就被告知有人正在修改相同的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:54:15.650

**Ibatis**不执行锁定。看到你的场景乐观锁定可以解决问题。要实现乐观锁定，你可以有选择。1.使用支持事务管理的框架，如**org.springframework.jdbc.datasource。DataSourceTransactionManager**。它们提供传播行为和隔离级别。但是，您使用的数据源必须支持传播级别和隔离级别。Spring 提供以下隔离级别。.ISOLATION_DEFAULT .ISOLATION_READ_UNCOMMITTED .ISOLATION_READ_COMMITTED .ISOLATION_REPEATABLE_READ .ISOLATION_SERIALIZABLE。2.接下来你可以提供你自己的乐观锁实现。**

# google-app-engine - Google App Engine 没有停止应用程序

> ID：12613624
> 
> 赞同：0
> 
> 时间：2012-09-27T03:23:01.400
> 
> 标签：google-app-engine

我下载了 eclipse（6 月 4.2 日）并启动了一个应用引擎项目。部署良好，但似乎永远不会正确终止。我进行了代码更改，但刷新后它们不会显示在浏览器中。当我将鼠标悬停在运行按钮上时，它会在工具提示中显示“已在运行”。我必须完全重新启动 eclipse 才能获取更改。

我觉得我在这里服用疯狂的药丸。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:37:32.080

看来更新到 SDK 1.7.2 可以解决问题。

# ios - UIScrollView 随机点

> ID：12613626
> 
> 赞同：1
> 
> 时间：2012-09-27T03:23:12.993
> 
> 标签：ios, uiscrollview, cgpoint, arc4random

我正在制作一个游戏并希望它能够在滚动视图的某个地方每秒随机生成一张图片。滚动视图大小是`320x960`，我有它，以便图片使用`arc4random()`. 但是，即使我得到一个`y`值 say, `900`，图片也不会在滚动视图的那个点上产生。这是我的代码

```
- (void)gift1 {
    UIImage *image7 = [UIImage imageNamed:@"gift.png"];
    gift = [[UIImageView alloc] initWithImage:image7];
    CGRect rect7 = CGRectMake(arc4random()%320, random()% 960 + 0, 100, 100);
    gift.frame = rect7;
    [scrollView addSubview:gift];
    if (CGRectIntersectsRect(self.myAnimatedView.frame, self.gift.frame)) {
        [self giftg];
    }
    NSLog(@"%f", self.gift.frame.origin.y);
} 
```

# java - 未找到 Java2WSDL（轴）类

> ID：12613628
> 
> 赞同：2
> 
> 时间：2012-09-27T03:23:15.237
> 
> 标签：java, web-services, axis

我已将以下内容添加到系统变量中

*   %AXIS_LIB%\axis.jar
*   %AXIS_LIB%\commons-discovery.jar
*   %AXIS_LIB%\commons-logging.jar
*   %AXIS_LIB%\jaxrpc.jar
*   %AXIS_LIB%\saaj.jar
*   %AXIS_LIB%\log4j-1.2.8.jar
*   %AXIS_LIB%\xml-apis.jar
*   %AXIS_LIB%\xercesImpl.jar

我将 %AXIS_LIB% 定义为 c:\Axis-1_4\lib。

按照教程，我尝试使用 Java2WSDL 来生成 WSDL 文件。

```
% java org.apache.axis.wsdl.Java2WSDL -o wp.wsdl
    -l"http://localhost:8080/axis/services/WidgetPrice"
    -n  "urn:Example6" -p"samples.userguide.example6" "urn:Example6"
    samples.userguide.example6.WidgetPrice 
```

但是，我收到 Class Not Found 错误。

```
C:\axis-1_4\samples\userguide\example6>java org.apache.axis.
wsdl.Java2WSDL -o wp.wsdl -l "http://localhost:8080/axis/services/WidgetPrice" -
n "urn:Example6" -p "samples.userguide.example6" "urn:Example6" samples.userguid
e.example6.WidgetPrice
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/axis/wsdl/
Java2WSDL
Caused by: java.lang.ClassNotFoundException: org.apache.axis.wsdl.Java2WSDL
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: org.apache.axis.wsdl.Java2WSDL.  Program will exi
t. 
```

为什么我不能调用 Java2WSDL？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:58:59.550

您仍然需要`AXIS_LIB`在类路径中提供，否则 Java 将无法找到`org.apache.axis.wsdl.Java2WSDL`；您可以通过设置`CLASSPATH`为`%AXIS_LIB%;%CLASSPATH%`或添加`-cp %AXIS_LIB%`到您的命令来执行此操作。

# java - javafx的东西，我做不出好标题

> ID：12613631
> 
> 赞同：1
> 
> 时间：2012-09-27T03:23:35.173
> 
> 标签：java, javafx

如果我做了一个小程序，我在其中使用了一些 javafx 代码，

1.  编译时，我的 java/bin/ 处的编译器是编译代码还是 javafx 编译器编译它？

2.  当某个地方的客户运行我的程序并且他没有 javafx 但有默认的 jre 时，他可以运行整个程序吗？

3.  如果他可以使用最新的 jre 来运行它，那么如果他使用的是 6.5 之类的旧 jre 呢？

任何人都可以推荐一本关于javafx的书（最新）吗？当我在网上偶然发现 javafx 时，我正在读到 Rich filthy clients（好书）的一半，你认为放弃 filthy rich clients 并学习 javafx 是个好主意吗，因为可能存在概念差异或其他问题，但我可能仍然会完成 filthy rich客户 - 学习一些技术总是更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:19:24.230

答案将解决[JavaFX 2+](http://docs.oracle.com/javafx/)，而不是 JavaFX 1.x ，后者工作方式不同但现在已弃用。

> 编译时，我的 java/bin/ 处的编译器是编译代码还是 javafx 编译器编译它？

它是编译您为 JavaFX 编写的 java 代码的[javac 编译器。](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)

> 当某个地方的客户运行我的程序并且他没有 javafx 但有默认的 jre 时，他可以运行整个程序吗？

是的，只要它是在[JavaFX 支持的配置](http://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html)（例如 OSX 10.7、Windows XP/Vista/7、Ubuntu Linux...）上运行的 Oracle jre1.7u6 或更高版本。

> 如果他可以使用最新的 jre 来运行它，那么如果他使用的是 6.5 之类的旧 jre 呢？

JavaFX 2.2 + JRE 6 是受支持的配置。JRE 6 未与 JavaFX 捆绑在一起，因此 JavaFX 部署工具包会将代码插入到您的应用程序包中，如果用户想要运行您的 JavaFX 2.2 兼容程序，它将为用户提供安装 JavaFX 的说明。

> 任何人都可以推荐一本关于 javafx 的书（最新）吗？

JavaFX 目前是一种快速发展的技术，因此印刷书籍很难跟上这个话题。也就是说，以下书籍为该技术提供了良好的基础：

*   [临 JavaFX 2](https://rads.stackoverflow.com/amzn/click/com/1430268727)
*   [JavaFX 实例介绍](https://rads.stackoverflow.com/amzn/click/com/1430242574)

Oracle 提供了[有关最新 JavaFX 版本的良好在线教程。](http://docs.oracle.com/javafx/)

> 你认为放弃肮脏的富客户端并学习 javafx 是个好主意吗

《肮脏的富客户》是一本很棒的书。JavaFX 通常为许多 Java2D 动画和图形概念提供更高级别的 API。JavaFX 大量使用保留模式场景图方法而不是立即模式绘制方法 - 因此许多技术的应用会有所不同。然而，Filthy Rich Clients 为许多概念的低级实现提供了良好的基础，这些概念通常有助于提高生产高质量图形 Java 应用程序的熟练程度。最后，这是一个时间问题——如果你的不足，跳过肮脏的富客户端并只学习 JavaFX，否则我建议学习 JavaFX 并回到肮脏的富客户端看看它还能提供什么。

# ios - IOS SDK发布提要时如何使用with_tags

> ID：12613633
> 
> 赞同：0
> 
> 时间：2012-09-27T03:23:50.987
> 
> 标签：ios, facebook

我正在尝试通过“with_tags”发布提要并附加朋友。但是无论我使用 NSArray 还是 NSDictionary，它总是会报告这样的错误 `[NSArrayM length]: unrecognized selector sent to instance 0x683ee50` 或 NSDictionary 长度。我的代码如下

```
 for(id<FBGraphUser> user in fbFriendPickerController.selection){
            NSDictionary *userDic = [[NSDictionary alloc]initWithObjectsAndKeys:user.id,@"id",user.name,@"name", nil];
            [data setObject:userDic forKey:@"data"];
        }
NSDictionary *param = [[NSDictionary alloc]initWithObjectsAndKeys:@"test",@"message", data,@"with_tags",nil]; 
```

希望有人可以在这方面提供帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:55:54.120

> 我正在尝试通过“with_tags”发布提要并附加朋友。

*在发布帖子时，*这不是一个有效的参数——当你从 API 中*读取*它时，它是帖子对象的字段。

要发布带有标签的帖子，您必须使用*参数*`tags`- 如此处所述：[https ://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)

# facebook - 获取随机的 facebook UID

> ID：12613636
> 
> 赞同：1
> 
> 时间：2012-09-27T03:24:11.657
> 
> 标签：facebook, facebook-graph-api

`https://graph.facebook.com/[RANDOM_NUMBER]`有没有办法在不生成随机数和轮询以检查用户是否存在的情况下获取现有的随机 facebook uid ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:34:20.147

好吧，Facebook 肯定没有做这样的功能。这将使隐私政策无效。

用户 ID 的整个想法是，它是数据库中唯一的递增数字。唯一 ID 只会从那里变得更大。因此，例如，您的范围可能是 1000000 - 1200000，因此您轮询这两个边界以确保它们都存在。如果他们这样做，你会从那里得到随机的#。

当然，如果 Facebook 在用户删除帐户时删除了数据库中的整行，那么该数字范围内就会出现漏洞。

# c - strlcpy 还是 memcpy？

> ID：12613651
> 
> 赞同：0
> 
> 时间：2012-09-27T03:25:58.633
> 
> 标签：c

我知道 strcpy 在处理缓冲区时不安全，但是在我的代码中我有这个

```
static char    buf[HUGE_BUFFER_SIZE + 1];
char servername[200];
int length = 0;
char *out = NULL;
        length = strlen(buf);
        out = alloca(strlen(servername) + length + 5);
        length = strlen(servername);
        strcpy(out, servername);
        out[length] = ' ';
        out[length + 1] = 0;
        strcat(out, buf); 
```

如果我将 strcpy 更改为 strlcpy 并将 sizeof 用于 arg3，则输出会出现乱码。有没有比使用 memcpy 更简单的方法（看起来我可能不得不这样做？）我试图避免使用像 strcpy 和朋友这样的不安全函数。有没有更简单的方法来完成上述功能的复制更少，以及 strnlens/alloca？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:39:51.173

使用它可能更简单`snprintf()`：

```
char out[1000];  // Or however large you need.
int len = snprintf(out, sizeof(out), "%s %s", servername, buf);
if (len >= sizeof(out)) {
    // Result would have overflowed the buffer and has been truncated.
} 
```

注意`>=`而不是`>`在条件中。

`snprintf()`返回写入文本的长度，不包括终止的空字节。因此，如果返回值等于缓冲区大小，则意味着最后一个字符被截断（因为`snprintf()`总是以空值结尾的结果字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:00:53.983

我会这样做：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

#define HUGE_BUFFER_SIZE 4096

int main (int argc, char **argv) {
  static char buf[HUGE_BUFFER_SIZE + 1];
  char servername[200];
  int target_len, servername_len, buf_len = 0;
  char *out = NULL;

  strcpy(buf, "this is my test buffer!");
  strcpy(servername, "127.0.0.1");

  /* Notice the uses of strnlen.  Each of these fixes the maximum number of characters that will be scanned. */
  servername_len = strnlen(servername, HUGE_BUFFER_SIZE+1) + 1;
  buf_len = strnlen(buf, 200) + 4;
  target_len = servername_len, buf_len;

  if ((out = alloca(target_len)) == NULL)
    return EXIT_FAILURE; /* alloc failed, die quickly! */

  /* At this point, you've measured the length of servername and buf using strlen, so it should really be impossible to run beyond the length of your buffer, but we're going to be careful, anyway */
  out[0] = '\0';
  strncat(out, servername, servername_len);
  strncat(out, buf, buf_len);

  printf("%s\n", out);

  return EXIT_SUCCESS;
} 
```

（除非出现复制/粘贴错误，或者系统上的不同库以及我的跨平台错误，您应该能够将其粘贴到文件中，编译并运行它，然后查看“127.0.0.1this is我的测试缓冲区！”作为输出）

请注意，所有 str 函数，无论是 strcpy、strcat、strncpy 还是 strlcpy，都会将空终止符放在它们创建的任何字符串的末尾。唯一需要手动放置空终止符的时候是在开始一个全新的字符串时，就像我对语句“out[0] = '\0'”所做的那样。

另外，请注意我使用的是 strnlen 和 strncat，而不是 strlcat。除了函数返回的内容外，我无法从文档中看出 strlcat 和 strncat 之间的区别。

无论如何，您应该能够避免缓冲区溢出安全漏洞，只是清楚地限制所有函数调用。strncpy 和 strncat 绑定了您将复制多少数据。strnlen 限制系统搜索“\0”的时间。

* * *

编辑：我原来的解决方案实际上有一个 valgrind 揭示的错误。我没有初始化 buf 或 servername。虽然其他东西似乎在神奇地初始化 buf，但 valgrind 报告说，以 servername 作为目标调用 strcat 会导致根据未初始化的数据做出决策。 *多哈*_

由于我不确定为什么要调用 strcat 来用字符串文字初始化我的变量，所以我切换到 strcpy。当然，这在这里是完全安全的，因为我已经将复制到变量中的字符串完全硬编码到应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:34:12.953

我认为你必须得到乱码输出的原因是因为你可能正在使用 sizeof `out`。但是，`out`它不是缓冲区，而是指针，因此您可能仅将 4（或指针的大小）作为第三个参数的大小传递给第三个参数，因此不复制超过 3 个字符，其余字符是未初始化的向你展示垃圾的内存

您可以尝试使用 strncpy 并将要复制的长度作为第三个参数传递。

# atk4 - 敏捷工具包中的字段未显示错误

> ID：12613655
> 
> 赞同：1
> 
> 时间：2012-09-27T03:27:14.480
> 
> 标签：atk4, php

尝试将 beforeSave 钩子与一些服务器端验证一起使用并引发字段错误 - 它正在工作......有点......

由于未按要求保存而导致异常，如果未定义任何字段，则可以使用正确的消息查看基本异常。如果我定义字段，那么我看不到错误弹出窗口或 crud 表单上的错误信息。

需要明确的是，它不会让我保存并抛出异常。当我使用`setField('fiscal_year')`它仍然没有根据异常保存时，它只是不**显示**异常。

下面的代码：

```
class Model_Finances extends Model_Table {
    public $table='finances';

    function init() {
        parent::init();

        $this->hasOne('Grant');

        $this->addField('fiscal_year')->datatype('int');
        $this->addField('requested')->datatype('money');
        $this->addField('committed')->datatype('money');
        $this->addField('spent')->datatype('money');

        $this->getField('grant')->hidden(true);

        $this->addHook('beforeSave',$this);
    }

    function beforeSave($model){
        $exist = $this->api->db->dsql()
                      ->table($this->table)
                      ->field('count(1)')
                      ->where('grant_id', 2) //manually set ID for testing.
                      ->where('fiscal_year', $model['fiscal_year'])
                      ->do_getOne();
        // Validate fiscal year before saving
        if($exist[0]) {
            throw $this->exception('Fiscal year for this grant already exists')->setField('fiscal_year');
        }
    }
} 
```

它是如何被使用的：

```
 $finances = $grant->ref('Finances');
    $finances->getField('fiscal_year')->setValueList($this->fiscalYears)->mandatory(true);
    $crud=$tabs->addTab('Finances')->add('CRUD');
    $crud->setModel($finances);
    if($crud->grid)$crud->grid->addTotals(array('requested', 'committed', 'spent')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:30:43.883

It was quite difficult to reproduce the problem, so I created a test-case out of it.

I have changed only this line:

```
throw $this->exception('Fiscal year for this grant already exists','ValidityCheck')
    ->setField('fiscal_year'); 
```

and here is result

![enter image description here](../Images/ccb8f7ee585ff49bfd5cdadbea4b2133.png)

*   Example: [http://test-suite.agiletoolkit.org/?page=issue/so3655](http://test-suite.agiletoolkit.org/?page=issue/so3655)
*   Code: [https://github.com/atk4/atk4-testsuite/blob/master/page/issue/so3655.php](https://github.com/atk4/atk4-testsuite/blob/master/page/issue/so3655.php)

If you submit form like this:

```
$form->onSubmit(function($f){
    $f->model->blah();
}); 
```

Then exceptions generated inside model->blah will also show up nicely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:31:58.777

我想我不会完全回答你的问题，因为我也是 ATK4 的初学者，但是

首先我猜你不应该在模型级别使用 $_GET 。我相信它应该类似于grant_id=$model['grant_id']。

其次，据我了解，您想检查一个补助金是否有唯一的财政年度？如果是这样，那么您应该在 WHERE 中添加另外两个条件（见下文）或类似的条件。

结果我相信你的查询应该是这样的（只是一个伪代码）：

```
$exist = $this->api->db->dsql()
                   ->table($this->table)
                   ->field('count(*)') // I guess it can be written as ->count() too
                   ->where('grant_id',$model['grant_id'])
                   ->where('id','!=',$model->id)
                   ->where('fiscal_year',$model['fiscal_year'])
                   ->do_getOne();
if($exist[0]) {
    throw $this->exception('Fiscal year for this grant already exists')
               ->setField('fiscal_year');
} 
```

说到抛出与表单字段相关的异常，我想您应该以某种方式使用表单字段验证钩子添加它。但我不知道该怎么做。

# java - 如何使用另一个变量实例化一个变量？

> ID：12613657
> 
> 赞同：0
> 
> 时间：2012-09-27T03:27:51.757
> 
> 标签：java, object, reference

如何通过引用它的另一个变量来实例化一个变量？例如：

```
List<String> list1 = null;
List<String> list2 = list1; 
```

如何`list1`使用 list2 进行实例化？我知道`list1`可以很容易地用`list1 = new ArrayList();`. 但我想知道的是，在上述情况下，是否可以使用 list2 实例化 list1？

只是为了澄清：我想要实现的是可以访问 list1。我有一个包含的类，`list1`我需要修改`list1`. 不幸的是，该类没有提供 setter`list1`并且`list1`仍然为空。

```
public class Class1
{
    private List<String> list1 = null;
    public List getList1()
    {
        return list1; //value of list1 is null.
    }
}

public class Class2
{
    public static void main(String[] args)
    {
        Class1 class1 = new Class1();

        // then I need to set the value of list1.
        // However, list1 did not provide a setter method
        // so my only way to access it is using a reference.

        // with the code below I am assuming that I can
        // create a reference to list1 and set its value.
        // How do I set the value of list1?
        List<String> list2 = class1.getList1(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:33:40.130

我认为您要问的是是否有一些间接的初始化`list1`方式使用`list2`. 在 Java 中，改变 的值的唯一方法`list1`是给它赋值。

在 Java 中，`list2`将`null`在您的代码执行之后。与 C++（或 C）不同，Java 没有对引用的引用（或指向指针的指针），没有办法`list2`可以用来间接初始化`list1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:31:46.223

在你的例子中，你不能。由于`list1`为空，因此您将无法到达任何地方：

```
List<String> list2 = list1; 
```

`list2`仍然是空的

请仔细阅读[列表 API 页面](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)。此外，如果您在 DrJava 交互窗格中尝试此操作，您会更好地看到它。如果您尝试在这两行之后添加一个字符串，期望得到一个

```
java.lang.NullPointerException 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:31:18.457

所有集合都有一个构造函数，该构造函数将集合作为参数，以与该集合的迭代器返回的顺序相同的顺序生成集合的副本（在 ArrayList 的情况下）。

`list2 = new ArrayList(list1);`会工作。

看起来我误解了提问者想要什么（我认为他的意思只是任何其他列表，而不是指向 null 的列表）。

在这种情况下，无论分配给 list1 什么，list2 都将始终为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:54:59.420

您可以扩展该类并通过扩展它来提供您自己的 getList1() 方法实现。

```
public class Class2 extends class1
{
    private List<String> list1 = new ArrayList<String>();
    public List getList1()
    {
    return list1; //value of list1 is null.
    }
} 
```

上面的原因不起作用是你的`list1`包含`null`引用和java没有提供一种方法来设置对对象的引用，而不是`new`一些`newInstance()`异常字符串，原语，但编译器也为它们做同样的事情。

# coffeescript - CoffeeScript 2 维数组用法

> ID：12613662
> 
> 赞同：3
> 
> 时间：2012-09-27T03:28:53.307
> 
> 标签：coffeescript

我觉得我缺少 CoffeeScript 和二维数组的东西。我只是试图制作一个空间网格（想想跳棋）。在使用 arrays.map 函数进行一些搜索和发现之后，我想出了这个：

```
@spaces = [0...20].map (x)->
  [0...20].map (y) ->
    new Elements.Space() 
```

这似乎很好用，我有一个很好的二维数组，每个数组都创建了我的 Space 对象。但现在我想将创建的空间构造函数发送到 x,y 位置。因为我有两层深，所以`x`当我输入 map 函数时，我丢失了变量`y`。

理想情况下，我想做类似的事情：

```
@spaces = [0...20].map (x)->
  [0...20].map (y) ->
    new Elements.Space(x, y) 
```

或者我觉得更自然的东西，比如：

```
for row in rows
  for column in row
    @spaces[row][column] = new Elements.Space(row, column) 
```

我真的愿意接受任何更好的方式来做到这一点。我知道如何在标准 JavaScript 中做到这一点，但我真的很想学习如何在 CoffeeScript 中做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T03:36:35.247

您的第一次尝试`map`是一种有效的方法。你实际上并没有失去`x`，因为闭包。所以你的第二个代码块没有问题：

```
@spaces = [0...20].map (x)->
  [0...20].map (y) ->
    new Elements.Space(x, y) 
```

这个的 for 循环版本也很简单：

```
@spaces = for x in [0...20]
  for y in [0...20]
    new Elements.Space(x, y) 
```

记住，一切都是一种表达。所以这有效（并且可能比`map`版本更清晰）。

# c - 在 C 中写入二进制文件不起作用

> ID：12613663
> 
> 赞同：0
> 
> 时间：2012-09-27T03:29:04.200
> 
> 标签：c, file-io, binary

我有一个浮点数组，我想以二进制形式输出到文件中。我的相关代码如下：

```
 FILE *binFile;

    binFile = fopen(fileName, "wb");

    if (binFile)
    {
          fwrite(completeList, sizeof(float), size, binFile);
    } 
```

现在，completeList 是一个**指向**我所说的浮点数组的指针，而 size 是我传递给它的另一个参数，指示有多少元素。

当它被输出到二进制文件时，打开该文件会显示一堆随机的 ASCII 字符。我知道这是我应该期待的，但是当我将它通过十六进制编辑器时，它会显示随机废话。

我究竟做错了什么？

编辑：

我的解析代码：

```
 FILE *bofFile = fopen(file, "rb");

    if(bofFile)
    {
        float *tempArray;

        fseek(bofFile, 0, SEEK_END);

        unsigned long int size = ftell(bofFile) / sizeof(float);

        tempArray = (float *)malloc(size);

        fread(tempArray, sizeof(float), size, bofFile);

        std::cout << tempArray[0];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:35:38.383

不知道这是否相关，但是您在这里遇到了一个相当严重的问题：

```
tempArray = malloc(size); 
```

您应该更改它以防止缓冲区溢出：

```
tempArray = malloc(size * sizeof(float)); 
```

哦，你也忘了在阅读之前回到文件的开头（这就是为什么它“什么都不给你”）：

```
fseek(bofFile, 0, SEEK_SET); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:55:58.390

您的输入文件是如何格式化的？您的代码假定在文本编辑器中查看时它也会看起来“随机”。您是否尝试过显示整个数组，以确保您从输入文件中正确读取数据？此外，您还有其他人指出的 malloc() 问题。

IEEE 浮点格式的二进制表示不直观，看起来像随机数据。

# ios - 从一个 ViewController 获取 nul 值到一个 ViewController

> ID：12613667
> 
> 赞同：-1
> 
> 时间：2012-09-27T03:29:18.487
> 
> 标签：ios

我有 2 个 ViewController，即 V1 和 V2。我想将值从 V2 传递到 V1，但我在 V1 中得到 countV1 的值 0。我在 stackoverflow 中看到了更多问题，但我无法处理这个小问题。我使用 ARC。

## 在 V1 中

.h 文件

```
@property(nonatomic,unsafe_unretained) int countV1; 
```

.m 文件

```
@synthesize countV1; 
```

## 在 V2 中

.m 文件

```
int countV2 = 1;

V1 *v1 = [V1 alloc] initWithNibName:@"V1" bundle:nil];

v1.countV1 = countV2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:34:18.233

我的第一个建议是您将 countV1 属性的“unsafe_unretained”更改为“readwrite”，这是一个更标准的 int 属性属性：

```
@property(nonatomic, readwrite) int countV1; 
```

这可能会解决您的问题，但如果不是，我们真的需要查看更多您的代码。例如，您在哪里检查 countV1 的值？您如何将控制权转移到 V1？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:31:40.607

我`agree`为您的财产将“”`@Alan`更改`unsafe_unretained`为“ ”`readwrite``countV1`

```
@property(nonatomic, readwrite) int countV1; 
```

对于`id object`ARC，使用：

```
@property(nonatomic, strong) id object 
```

对于`id object`for `non-ARC`，使用 ：

```
@property(nonatomic, retain) id object 
```

现在最好使用`backward messaging`委托`data`之间**的**`controller`

 **最`tutorial`适合如何使用`delegate` [here](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)**

# javascript - IE浏览器中TR标签之间的Knockout Virtual Elements

> ID：12613668
> 
> 赞同：2
> 
> 时间：2012-09-27T03:29:41.843
> 
> 标签：javascript, knockout.js

我有以下代码：

```
...
</tr>
<!-- ko if: eLocBound() == 'true' -->
<tr>
    <td>Select Locations <span class="required_star">*</span></td>
    <td><input type="text" /></td>
</tr>
<!-- /ko -->
<tr>
... 
```

这在 Chrome/Firefox/Safari 中正确显示。但是，当我在 IE 9 中加载页面时，会出现以下错误：

`Cannot find closing comment tag to match: ko if: eLocBound() == 'true'`

当我在 IE 的开发者窗口中检查 HTML 输出时，我发现 IE 实际上是将`<!-- ko if -->`注释标签*嵌套*在前一个 TR 标签内，而不是在 TR 标签之间，因此 Knockout 无法找到匹配的`<!-- /ko -->`标签。我在这里链接到问题的屏幕截图：http: [//imgur.com/nN7Ln](http://imgur.com/nN7Ln)

相反，如果我将代码更改为：

```
<tr data-bind="visible: eLocBound() == 'true'">
    <td>Select Locations <span class="required_star">*</span></td>
    <td><input type="text" /></td>
</tr> 
```

然后一切正常。我想知道是否有人遇到过虚拟元素的这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T03:42:16.803

这是 Knockout 无法真正弥补的 Internet Explorer 问题。在您的情况下，一个好的解决方法是在您的行周围使用`tbody`标签。一个表可以包含多个`tbody`标签。因此，您的代码如下所示：

```
 ...
</tr>
<tbody data-bind="if: eLocBound() == 'true'">
<tr>
    <td>Select Locations <span class="required_star">*</span></td>
    <td><input type="text" /></td>
</tr>
</tbody>
<tr>
... 
```

# c - 不能在 C/Objective-C 的 for 循环中减去

> ID：12613669
> 
> 赞同：0
> 
> 时间：2012-09-27T03:29:47.723
> 
> 标签：c, for-loop

我正在阅读关于 Objective-C 的 Big Nerd Ranch 书，它带您了解一些早期的 C 知识。我以前玩过 C，并且在 PHP 方面非常有经验。

无论如何，我正在接受挑战，而这个挑战并没有按照我认为的方式工作。这很简单——从 99 开始，循环并减去 3 直到为零，每次得到一个可被 5 整除的数字时，打印“找到一个”。很简单。但是，在 for 循环中减去三是行不通的

```
#include <stdio.h>

int main (int argc, const char * argv[])
{

    int i;
    for(i = 99; i > 0; i-3){
        printf("%d\n", i);
        if(i % 5 == 0) {
            printf("Found one!\n");
        }
    }
    return 0;
} 
```

它在 99 处创建无限循环，我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T03:32:19.217

`i-3`不修改变量`i`。做类似的事情 -

```
 for( i=99; i>0; )
 {
      // ....
     i -= 3;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T03:33:35.117

它应该`i-=3`代替`i-3`.

```
#include <stdio.h>

int main (int argc, const char * argv[])
{

    int i;
    for(i = 99; i > 0; i-=3){
        printf("%d\n", i);
        if(i % 5 == 0) {
            printf("Found one!\n");
        }
    }
    return 0;
} 
```

`i-3`不改变 的值`i`。

`i-=3`做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T03:33:44.113

您的循环语句不会修改`i`. 只是做`i - 3`不会*改变* `i`，它只是返回的值`i - 3`。

利用：`for(i = 99; i > 0; i = i - 3)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T03:35:07.077

在 for 循环中，它应该是`i=i-3`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T05:26:20.457

您只是从 中减去`3`，`i`但没有将其分配给`i`。使用`i = i - 3`而不仅仅是`i - 3`.

像这样更改您的 for 语句：

```
for(i = 99; i > 0; i = i - 3) {
  // Write your code here.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T04:21:28.673

For 循环中的 Last Term 是自减操作的自增。虽然`i-3`没有。如果您希望 i 的值减少 3，那么您应该将该值存储在`i`其自身中。

为此，应编写以下代码：`i = i-3`或简写`i-=3`。

# testing - 测试数据管理

> ID：12613670
> 
> 赞同：0
> 
> 时间：2012-09-27T03:29:48.910
> 
> 标签：testing, automation, data-management

我是自动化测试的新手，开始研究 Selenium webdriver 和 Nunit 框架。

我有一些与测试数据管理相关的查询，正在寻找最佳方法。

1.  我必须设计一些测试用例，用户注册一个事件，但只能注册一次。如果我想多次运行测试或在多个浏览器上并行运行测试，最好的方法是什么？

2.  我需要搜索一个事件并对这些事件执行一些操作。如果我在几天后运行测试用例，这些事件将不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T00:46:52.513

您可以清除使用户注册的逻辑标志，然后重新使用它们。只需避免在多个浏览器中重复使用用户即可。

如果您正在使用自动化并且不需要明确测试无法重新注册的负面条件，那么您可以将注册清除构建到脚本中。

# python - 蟒蛇，姜戈。使用字典属性扩展用户模型

> ID：12613672
> 
> 赞同：0
> 
> 时间：2012-09-27T03:30:25.540
> 
> 标签：python, django

我有个问题。这就是我尝试扩展默认用户模型的方式：

```
# myapp models.py
from django.contrib.auth.models import User
from django.db import models

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    games = None

def create_user_profile(sender, instance, created, **kwargs):
    if not created:
        profile, created = UserProfile.objects.get_or_create(user=instance)

models.signals.post_save.connect(create_user_profile, sender=User) 
```

现在我想在登录时更改“游戏”属性：

```
# myapp views.py
from django.views.generic.edit import FormView
from django.contrib.auth.forms import AuthenticationForm
class LoginView(FormView):
    form_class = AuthenticationForm
    template_name = 'registration/login.html'

    def form_valid(self, form):
        username = form.cleaned_data['username']
        password = form.cleaned_data['password']
        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                # default value for games is None
                user.userprofile.games = {}
                # now it should be an empty dict
                login(self.request, user)
                return redirect('/game')

class Index(FormView):
    def dispatch(self, request, *args, **kwargs):
        profile = request.user.get_profile()
        print profile.games # Prints 'None' 
```

好吧，我的问题是：为什么“打印 profile.games”打印“无”以及登录时如何更改游戏属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:18:37.777

我不认为这是在模型中创建字段的一种方式。你需要这样做：

```
game = models.CharField(max_length=300, null=True, blank=True) 
```

`None`并在每次登录并保存时将其重置为或 dict 您要存储的内容。

在您的登录视图中：

```
import json
class LoginView(FormView):
    ....
    #your code
    if user.is_active:
        # default value for games is None
        user.userprofile.games = json.dumps({}) # some dict you want to store
        user.userprofile.save()   #save it

        # now it should be an empty dict
        login(self.request, user)
        return redirect('/game')
    ....
    #your other code 
```

您的代码的问题是，值`game`未存储在数据库中。它只是实例的一个属性。所以它不会被保存在不同的实例上，每次你得到一个实例时，它都会被重置为 'None `. In`Index `view you are getting new instance of`userprofile `which has 'game`set to `None`.

# objective-c - 如何覆盖框架类中的方法（运行时）

> ID：12613673
> 
> 赞同：3
> 
> 时间：2012-09-27T03:30:26.743
> 
> 标签：objective-c, ios, runtime

**问题**：
框架将在上述情况下缓存图像数据：

```
[UIImage imageNamed:] 
```

我不希望缓存发生，所以我可以用

```
[UIImage imageOfContentOfFile:] 
```

似乎解决了，但经过我的测试，在 xib 的实例化过程中，框架使用**imageNamed:**而不是**imageOfContentOfFile**。
也就是说，由 xib 加载的图像仍然被缓存。

所以我尝试覆盖 UIImage 的 imageNamed: 方法，使所有这些方法不缓存。

**——试一试。类别：**

```
@implementation UIImage (ImageNamedNoCache)

+ (UIImage *)imageNamed:(NSString *)name; 
{
    NSString* path = [[NSBundle mainBundle] pathForResource:name ofType:nil];
    return [UIImage imageWithContentsOfFile:path];
}

@end 
```

--result:warning."Category 正在实现一个方法，该方法也将由其主类实现"

**--尝试2。运行时替换方法的 imp**

```
 //get super method
Method method_imageNamed = class_getClassMethod([UIImage class], @selector(imageNamed:));

//get my method
Method method_myImageNamed = class_getClassMethod([self class], @selector(myImageNamed:));

//get my imp
IMP imp_myImageNamed = method_getImplementation(method_myImageNamed);

//set super method's imp to my imp
method_setImplementation(method_imageNamed, imp_myImageNamed); 
```

**--result** 这些也只在**我调用**[UIImage imageNamed:]时才起作用，
但 xib 的实例化不起作用。

帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:37:42.193

听起来像是[方法调配](http://cocoawithlove.com/2008/03/supersequent-implementation.html)的工作。我觉得这很危险且没有必要，但是如果您愿意，这*是*一种选择。使用风险自负。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:49:24.783

类别方法应该没问题，只是给你的方法一个不同的名字。我的理解是，在一个类别中覆盖方法不是一个好习惯，但是添加一个新方法是可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:17:21.263

如果我解释不正确，请纠正我，但看起来你的核心问题是你试图让框架（即 Apple 代码）在加载 xibs 时调用 imageWithContentsOfFile 而不是 imageNamed。

第三种选择可能是将 xib '空白'中的 UIImageViews 作为占位符保留，然后稍后以编程方式将 UIImages 加载到它们中（例如在 FileOwner 的初始化代码中），也许在 'tag' 属性 + 字典的帮助下确定正确的图像，如果方便的话。或者您甚至可以动态创建图像及其视图，而不是将它们保存在 xib 文件中。显然，这里有很多权衡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:06:20.950

1.  您的解决方案不好:) 使用缓存是有充分理由的。
2.  只是不要`[UIImage imageNamed:]`在你的代码中使用，一切都会好起来的
3.  如果您**实际上**不需要缓存图像，则应使用方法＃2。

**注意**：来自 XIBS 的图像（实际上是所有对象）正在加载`-[object initWithCoder:]`，而不是`[UIImage imageNamed:]`或`[UIImage imageWithContentsOfFile:]`

# visual-studio-2010 - Actionscript 3 Visual Studio 2010 插件 - 在蓝宝石钢的 Amethyst 中设置类路径

> ID：12613676
> 
> 赞同：0
> 
> 时间：2012-09-27T03:31:20.147
> 
> 标签：visual-studio-2010, visual-studio, actionscript-3, ide, flex4

我刚刚为 Visual Studio 2010 安装了最新版本的蓝宝石钢 Amethyst 插件。我想使用一个外部库 - 具体来说是 Away3D。在 FlashDevelop 中，我将转到项目 --> 属性 --> 类路径 --> 添加类路径并输入适当的 url。

我对 Visual Studio 不是很熟悉。有人可以为我描述一下这个 Visual Studio 插件的等效操作吗？

谢谢！马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:04:13.340

我以 .swc 文件的形式将库添加到解决方案下的项目引用中。右键单击-> 添加.... Visual Studio 是一个容易迷路的地方...

# php - PHP + jQuery + MySQL 异步获取数据，脚本意外结束

> ID：12613680
> 
> 赞同：0
> 
> 时间：2012-09-27T03:31:57.347
> 
> 标签：php, jquery, mysql, polling

我正在尝试使用 jQuery 的 $.ajax() 在基于时间间隔的基础上获取 PHP 页面，该页面从 MySQL 表中打印最新的条目。如果有新条目，则将它们打印在页面上，如果没有，则打印“NaN”。

这是我的 PHP 函数，用于检查新条目：http: [//pastebin.com/R6NHDU3t](http://pastebin.com/R6NHDU3t)
这是 HTML + jQuery，用于检查上述函数的响应（从 Stack 上的一些答案中获得）：[http://pastebin .com/myT7evAx](http://pastebin.com/myT7evAx)

想法是这样的：我访问 HTML 页面，里面的 jQuery 每 3 秒获取一次 PHP 页面，PHP 检查 MySQL 中的新条目；如果有新的条目，它们将打印在 PHP 页面上并由 jQuery 获取，然后附加到#messages，如果没有，则打印“NaN”（因为 JSON，没关系）。

**如果没有可用的新条目，**这可以正常工作：每 3 秒在页面上打印一次“NaN”；一些实时 HTTP 标头：

```
http://localhost/handler.class.php?Q=comments&_=1348715334458

Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Referer: http://localhost/live.html

HTTP/1.1 200 OK
Date: Thu, 27 Sep 2012 03:08:54 GMT
Server: Apache/2.2.22 (Win32) PHP/5.3.13
X-Powered-By: PHP/5.3.13
Content-Length: 15 <---- the "NaN", no new data
Keep-Alive: timeout=5, max=97
Connection: Keep-Alive
Content-Type: text/html 
```

**如果创建了新**条目，则脚本停止附加“NaN”（doh，新数据），它应该附加我的新条目，但脚本停止，没有附加新数据并且它**停止发出请求**。这是最新的 Live HTTP Headers 日志，显示了最后一个请求：

```
http://localhost/handler.class.php?Q=comments&_=1348715337473

GET /handler.class.php?Q=comments&_=1348715337473 HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Referer: http://localhost/live.html

HTTP/1.1 200 OK
Date: Thu, 27 Sep 2012 03:08:57 GMT
Server: Apache/2.2.22 (Win32) PHP/5.3.13
X-Powered-By: PHP/5.3.13
Content-Length: 3257 <-- new data, so it got the response, but stopped here. no appending, no more requests.
Keep-Alive: timeout=5, max=96
Connection: Keep-Alive
Content-Type: text/html 
```

`handler.class.php?Q=comments`返回新数据时为什么会停止？

# matlab - Matlab 字符串输入

> ID：12613684
> 
> 赞同：1
> 
> 时间：2012-09-27T03:32:21.857
> 
> 标签：matlab

再会！有什么方法可以告诉 matlab 我的函数的输入是一个字符串。例如`thisisastring(11A)`

我预期的输入是二进制字符串（010011101）和十六进制（1B）。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:44:37.867

[ischar](http://www.mathworks.com/help/matlab/ref/ischar.html)和[iscellstr](http://www.mathworks.com/help/matlab/ref/iscellstr.html)可以告诉您输入是 char 数组还是包含字符串的元胞数组（char 数组）。

[bin2dec](http://www.mathworks.com/help/matlab/ref/bin2dec.html)和[hex2dec](http://www.mathworks.com/help/matlab/ref/hex2dec.html)将字符串转换为数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:52:45.393

要检查函数中参数的数据类型，并断言它们符合其他标准，如数组维度和值约束，请使用[validateattributes](http://www.mathworks.se/help/matlab/ref/validateattributes.html)。很方便，标准的matlab。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T05:21:47.273

与许多语言不同，Matlab 是动态类型的。所以真的没有办法告诉 Matlab 一个函数总是会用一个字符串输入来调用。如果需要，您可以在函数开头检查输入的类型，但这并不总是正确的答案。因此，例如，在 Java 中，您可以编写如下内容：

```
public class SomeClass {
    public static void someMethod(String arg1) {
        //Do something with arg1, which will always be a String
    }
} 
```

在 Matlab 中，您有两种选择。首先，您可以假设它是一个字符串来编写代码，如下所示：

```
function someFunction(arg1)
%SOMEFUNCTION  Performs basic string operations
%    SOMEFUNCTION('INPUTSTRING')  performs an operation on 'INPUTSTRING'.

%Do something with arg1, which will always be a string.  You know 
%    this because the help section indicates the input should be a string, and 
%    you trust the users of this function (perhaps yourself) 
```

或者，如果您偏执并想编写健壮的代码

```
function someFunction(arg1)
%SOMEFUNCTION  Performs basic string operations
%    SOMEFUNCTION('INPUTSTRING')  performs an operation on 'INPUTSTRING'.

if ~ischar(arg1)
    %Error handling here, where you either throw an error, or try 
    %    and guess what your user intended. for example
    if isnumeric(arg1) && isscalar(arg1)
        someFunction(num2str(arg1));
    elseif iscellstr(arg1)
        for ix = 1:numel(arg1)
            someFunction(arg1{1});
        end
    else
        error(['someFunction requires a string input.  ''' class(arg1) ''' found.'])
    end
else
    %Do somethinbg with arg1, which will always be a string, due to the IF statement
end 
```

# iphone - EGOTableViewPullRefresh - 由于链接问题无法构建

> ID：12613694
> 
> 赞同：0
> 
> 时间：2012-09-27T03:34:31.593
> 
> 标签：iphone, objective-c, ios, pull-request

我正在尝试在我的 ios6 项目中使用 EGOTableViewPullRefresh，但在构建时我无法解决链接问题。将源包含到我的项目中后，将 -fno-objc-arc 标志添加到 EGORefreshTableHeaderView.m 然后对源进行所有必要的更改，以便我可以使用 ARC 构建（删除“发布”等）我遇到了以下链接问题：

```
 Undefined symbols for architecture i386:
  "_CATransform3DIdentity", referenced from:
      -[EGORefreshTableHeaderView setState:] in EGORefreshTableHeaderView.o
  "_CATransform3DMakeRotation", referenced from:
      -[EGORefreshTableHeaderView setState:] in EGORefreshTableHeaderView.o
  "_OBJC_CLASS_$_CALayer", referenced from:
      objc-class-ref in EGORefreshTableHeaderView.o
  "_OBJC_CLASS_$_CATransaction", referenced from:
      objc-class-ref in EGORefreshTableHeaderView.o
  "_kCAGravityResizeAspect", referenced from:
      -[EGORefreshTableHeaderView initWithFrame:arrowImageName:textColor:] in EGORefreshTableHeaderView.o
  "_kCATransactionDisableActions", referenced from:
      -[EGORefreshTableHeaderView setState:] in EGORefreshTableHeaderView.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有没有人使用 EGOTableViewPullRefresh 遇到过这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T03:45:05.473

![在此处输入图像描述](../Images/d5466f80ead241be36f0ec3a0c0275d3.png)您确实需要包含 QuartzCore 库框架才能正确链接下拉刷新。

这是通过转到您的目标页面来实现的（单击 Xcode 布局顶部左列上的目标图标），选择“构建阶段”选项卡，单击以打开“将二进制文件与库链接”，然后单击“+”按钮，开始输入“QuartzCore”并选择QuartzCore框架。

这应该会为您解决这些链接错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T03:45:49.940

确保添加了 QuartzCore 框架。

# android - 如何在 ListView 控件中添加 Button、ImageView 小部件，从 sqlite 数据库中获取并显示记录

> ID：12613700
> 
> 赞同：1
> 
> 时间：2012-09-27T03:35:18.857
> 
> 标签：android, listview, android-imageview, android-button, android-sqlite

```
i want to fill ** **Listview** **  Widget in android with Records from table of sqllite database and show the content of table's field using button and imageview widget. 
```

如果有任何带有 sqlite 数据库和图像的示例可用，它将帮助所有开发人员开发他的应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:55:39.093

如果要自定义列表视图。看看这个链接：

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

您必须创建一个 xml 布局文件，其中包含一个内衬布局中的 listview。还有一个用于设计列表视图的 lisviewstyle xml 文件。

希望这会有所帮助。干杯！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T05:06:22.897

此编码将对您有所帮助。

在 main.xml

```
<ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:background="#302217"
        android:cacheColorHint="#333333"
        android:divider="#999966"
        android:dividerHeight="2dp"
        android:fastScrollEnabled="true" > 
```

和 listStyle 用于设计列表视图

```
<TextView
        android:id="@+id/txtView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="30sp" >
    </TextView>
     <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >
    </Button> 
```

创建从数据库中检索数据的方法：-

```
public Cursor createBlacklist()
    {
        Cursor cur=null;

        try
        {
            sqliteDb=dncDb.getReadableDatabase();
            cur=sqliteDb.query("tableName", new String[]{"_id","fieldOfDatabase"}, null, null, null, null, null);

        }
        catch(Exception exce)
        {
            exce.printStackTrace();
        }

        return cur;

    } 
```

获取列表视图：-

```
Cursor cursor = createBlacklist();
        startManagingCursor(cursor);
        String[] from = { "fieldOfDatabase" };
        int[] to = { R.id.txtView};
        SimpleCursorAdapter simpleListAdapter = new SimpleCursorAdapter(
                CreateBlackList.this, R.layout.liststyle, cursor, from, to);
        setListAdapter(simpleListAdapter);

        ListView list = getListView(); 
```

# vba - 如何从子/函数调用中填充范围变量？

> ID：12613702
> 
> 赞同：0
> 
> 时间：2012-09-27T03:35:30.470
> 
> 标签：vba, excel

我试图让这个子工作，但没有分配 operationRange 变量。尽管函数 selectBodyRow(bodyName) 工作正常。

```
Sub sortRows(bodyName As String, ByRef wksht As Worksheet)
  Dim operationalRange As Range

  Set operationalRange = selectBodyRow(bodyName)

  Debug.Print "Sorting Worksheet: " & wksht.Name

  If Not operationalRange Is Nothing Then
    operationalRange.Select
    Debug.Print "Sorting " & operationalRange.Count & "Rows."
    ActiveWorkbook.Worksheets(wksht.Name).Sort.SortFields.Clear
    ActiveWorkbook.Worksheets(wksht.Name).Sort.SortFields.Add Key:=operationalRange, _
    SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
    ActiveWorkbook.Worksheets(wksht.Name).Sort.SortFields.Add Key:=operationalRange, _
          SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
    With ActiveWorkbook.Worksheets(wksht.Name).Sort
          .SetRange operationalRange
          .Header = xlGuess
          .MatchCase = False
          .Orientation = xlTopToBottom
          .SortMethod = xlPinYin
          .Apply
    End With
  Else
   MsgBox "Body is not being Set"
  End If
End Sub 
```

上述 Sub 调用的 Sub 是：

```
Function selectBodyRow(bodyName As String) As Range
Dim rangeStart As String, rangeEnd As String
Dim selectionStart As Range, selectionEnd As Range
Dim result As Range, srchRng As Range, cngrs As Variant

If bodyName = "WEST" Then
    rangeStart = "<-WEST START->"
    rangeEnd = "<-WEST END->"
ElseIf bodyName = "EAST" Then
    rangeStart = "<-EAST START->"
    rangeEnd = "<-EAST END->"
End If

Set srchRng = Range("A:A")
srchRng.Select

Set selectionStart = srchRng.Find(What:=rangeStart, After:=ActiveCell, LookIn _
        :=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
       xlNext, MatchCase:=False, SearchFormat:=False)

Set selectionEnd = srchRng.Find(What:=rangeEnd, After:=ActiveCell, LookIn _
        :=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
       xlNext, MatchCase:=False, SearchFormat:=False)

Set result = Range(selectionStart.Offset(1, 0), selectionEnd.Offset(-1, 0))
result.EntireRow.Select
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:47:11.053

正如路人所建议的那样，尝试将您的功能设置为一个范围

```
 set selectBodyRow=result 
```

如：

```
Function selectBodyRow(bodyName As String) As Range
Dim rangeStart As String, rangeEnd As String
Dim selectionStart As Range, selectionEnd As Range
Dim result As Range, srchRng As Range, cngrs As Variant

If bodyName = "WEST" Then
    rangeStart = "<-WEST START->"
    rangeEnd = "<-WEST END->"
ElseIf bodyName = "EAST" Then
    rangeStart = "<-EAST START->"
    rangeEnd = "<-EAST END->"
End If

Set srchRng = Range("A:A")
srchRng.Select

Set selectionStart = srchRng.Find(What:=rangeStart, After:=ActiveCell, LookIn _
        :=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
       xlNext, MatchCase:=False, SearchFormat:=False)

Set selectionEnd = srchRng.Find(What:=rangeEnd, After:=ActiveCell, LookIn _
        :=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
       xlNext, MatchCase:=False, SearchFormat:=False)

Set result = Range(selectionStart.Offset(1, 0), selectionEnd.Offset(-1, 0))
result.EntireRow.Select

set selectBodyRow=result
'or set selectBodyRow=result.entirerow
End Function 
```

# c# - Google Analytics 以编程方式简单登录

> ID：12613703
> 
> 赞同：0
> 
> 时间：2012-09-27T03:35:38.617
> 
> 标签：c#, google-analytics-api, google-data-api

关于安全性的问题，使用 Google Data API 访问 Google Analytics 数据。我将在我的网站上使用此代码：

```
AnalyticsService asv = new AnalyticsService("");
asv.setUserCredentials(CLIENT_USERNAME, CLIENT_PASS); 
```

它安全吗？用户名和密码会以纯文本形式发送吗？对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:45:18.403

如果您通过 https 访问 Google Data API，您的凭据将不会以纯文本形式发送。

您可以在此处查看 Google 的示例，查看定义 URL 的第 87 行：

[https://code.google.com/p/ga-api-java-samples/source/browse/trunk/src/v2/DataFeedExample.java](https://code.google.com/p/ga-api-java-samples/source/browse/trunk/src/v2/DataFeedExample.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:37:35.613

这是我的 c# api v3 代码的链接，作为该帖子答案的一部分[自动使用 google-api-dotnet-client 和 OAuth 2.0](https://stackoverflow.com/questions/12429392/automated-use-of-google-api-dotnet-client-with-oauth-2-0/12603329#12603329)

# serial-port - Windows CE 编程串行端口 - 得到乱码输出

> ID：12613704
> 
> 赞同：0
> 
> 时间：2012-09-27T03:35:44.093
> 
> 标签：serial-port, lazarus, fpc

我正在对 Windows CE 6 设备（摩托罗拉 MC3100 扫描仪终端）进行编程。使用 Lazarus FPC 编译。

经过 3 周的工作，我不情愿地在这里发帖，希望有人能建议我为什么从串行端口得到乱码输出。

我正在使用的代码发布在下面。这是我从几个地方找到的标准代码。

OpenPort 工作正常。

当我使用 SendString('ABCDEF') 发送字符串时，PC 串行端口的输入出现乱码，例如：

4[#131][#26][#0][#0][#0][#0]（括号内的数据表示是不可打印字符ASCII码）

显然它正在连接到端口 OK 并且它正在发送正确的字符数 (7)。

我已经尝试了波特率、数据位、奇偶校验和停止位的所有组合，没有任何乐趣。还尝试在不同的 PC 上更换电缆等。

难道我需要在 DCB 中设置其他东西？

任何帮助或建议将不胜感激。

```
unit Unit1;
{$mode objfpc}{$H+}
interface
uses
Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, StdCtrls, ExtCtrls, 
Windows, LResources;

type
{ TForm1 }
TForm1 = class(TForm)
Button1: TButton;
Button2: TButton;
Label1: TLabel;
procedure Button1Click(Sender: TObject);
procedure Button2Click(Sender: TObject);
function OpenPort(ComPort:String;BaudRate,ByteSize,Parity,StopBits:integer):String;
procedure SendString(str:String);

private
{ private declarations }
public
{ public declarations }
end;

var
Form1: TForm1;

cc:TCOMMCONFIG;
Connected:Boolean;

implementation
{$R *.lfm}
var F: TextFile;
var hComm: THandle;
str: String;
lrc: LongWord;

{ TForm1 }  
function  
OpenPort(ComPort:String;BaudRate,ByteSize,Parity,StopBits:integer):String;

var
cc:TCOMMCONFIG;
SWide:WideString;
Port:LPCWSTR;

begin
SWide:=ComPort;
Port:=PWideChar(SWide);
result:='';
if (1=1) then begin
Connected:=False;
hComm:=CreateFile(Port, GENERIC_READ or GENERIC_WRITE,0, nil,OPEN_EXISTING,0,0);
if (hComm = INVALID_HANDLE_VALUE) then begin
ShowMessage('Fail to Open');
exit;

end;
GetCommState(hComm,cc.dcb);
cc.dcb.BaudRate:=BaudRate;
cc.dcb.ByteSize:=ByteSize;
cc.dcb.Parity:=Parity;
cc.dcb.StopBits:=StopBits;

if not SetCommState(hComm, cc.dcb) then begin
result:='SetCommState Error!';
CloseHandle(hComm);
exit;
end;
Connected:=True;
end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
OpenPort('COM1:',9600,8,0,0);
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
SendString('ABCDEFG');
end;

procedure TForm1.SendString(str:String);
var
lrc:LongWord;
begin
if (hComm=0) then exit;
try
if not PurgeComm(hComm, PURGE_TXABORT or PURGE_TXCLEAR) then
raise Exception.Create('Unable to purge com: ');
except
Exit;
end;
WriteFile(hComm,str,Length(str), lrc, nil);
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:15:28.787

找到了这个问题的答案。

WriteFile(hComm,str,Length(str), lrc, nil);

“str”参数实际上是指向字符串的指针，而不是字符串本身

将其更改为此有效。

WriteFile(hComm,str[1],Length(str), lrc, nil);

# wordpress - 我想显示子类别名称而不是父类别名称

> ID：12613710
> 
> 赞同：1
> 
> 时间：2012-09-27T03:36:30.617
> 
> 标签：wordpress

```
 <div class="careerleft">

   <?php query_posts('cat=9&paged='.get_query_var('paged')); ?>

   <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

   <div <?php post_class() ?> id="post-<?php the_ID(); ?>">

   <p class="career">"><?php the_title(); ?></p>

   <p>Category: <?php single_cat_title()?></p>

   <p>Date posted:<?php the_time('F j, Y') ?></p>

   </div>

   <?php endwhile; ?>

   <?php else : ?>

  <h2>Not Found</h2>

  <?php endif; ?>

 </div> 
```

我想显示子类别名称，但是当我使用 时，它只显示父类别名称。在我的类别中，父类别名称是“职业”，该类别有 3 个子类别名称，即管理、IT 相关和会计。显示子类别名称的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:42:14.117

在这里你必须先提取子类别。了解如何提取[Wordpress 类别](http://codex.wordpress.org/Function_Reference/get_categories)。

提取父类别的所有类别

`<?php $args = array( 'type' => 'post', 'parent' => 9, 'taxonomy' => 'category' );?>`

`<?php $categories = get_categories( $args ); ?>`

提取所有类别后，创建循环以打印它们

# javascript - 我非常简单的 Jasmine 测试失败，并显示消息“预期 0 为 1”。

> ID：12613713
> 
> 赞同：1
> 
> 时间：2012-09-27T03:36:45.870
> 
> 标签：javascript, coffeescript, jasmine

我是 CoffeeScript 和 Jasmine 的初学者。我尝试测试一个简单的类，如下所示：

```
class Counter
    count: 0

    constructor: ->
        @count = 0

    increment: ->
        @count++

    decrement: ->
        @count--

    reset: ->
        @count = 0

root = exports ? this
root.Counter = Counter 
```

然后，我编写了如下测试代码：

```
describe("Counter", ->
    counter = new Counter
    it("shold have 0 as a count variable at first", ->
        expect(counter.count).toBe(0)
    )

    describe('increment()', ->
        it("should count up from 0 to 1", ->
            expect(counter.increment()).toBe(1)
        )
    )
) 
```

第二次测试总是失败，消息如下：

```
Expected 0 to be 1. 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:44:22.310

`increment`如果您希望您的and`decrement`方法返回更新后的值，则需要使用预递增和预递减形式：

```
increment: -> ++@count
decrement: -> --@count 
```

`x++`产生 的值，`x`然后递增`x`，这样：

```
return x++ 
```

相当于：

```
y = x
x = x + 1
return y 
```

而这个：

```
return ++x 
```

是这样的：

```
x = x + 1
return x 
```

所以 Jasmine 是对的，并且很好地发现了您代码中的错误。

例如，[这段代码](http://coffeescript.org/#try%3aclass%20Counter%0A%20%20%20%20constructor%3a%20%28@count%20=%200%29%20-%3E%0A%20%20%20%20incr_post%3a%20-%3E%20@count++%0A%20%20%20%20incr_pre%3a%20%20-%3E%20++@count%0A%0Aconsole.log%28%28new%20Counter%29.incr_post%28%29%29%0Aconsole.log%28%28new%20Counter%29.incr_pre%28%29%29)：

```
class Counter
    constructor: (@count = 0) ->
    incr_post: -> @count++
    incr_pre:  -> ++@count

c1 = new Counter
c2 = new Counter    

console.log(c1.incr_post())
console.log(c2.incr_pre()) 
```

将在控制台中为您提供`0`和（按此顺序） ，`1`即使`@count`您在完成后`1`两者都在其中。`c1``c2`

# c++ - 在 C++ 的条件语句中使用字符

> ID：12613714
> 
> 赞同：0
> 
> 时间：2012-09-27T03:37:06.140
> 
> 标签：c++, char, conditional, character

我正在尝试编写一个程序，该程序要求获得学费学分以及本科或研究生课程。用户输入学分，然后必须输入`U`本科或`G`研究生。我的条件语句有问题，如果用户输入`U`，则计算和输出本科学分的价格，与研究生类似。我试图`U`在 IF 条件下输入，但要么是一个价格，要么是另一个输出。

```
#include <stdlib.h>                             
#include <iostream.h>                          

int main ()                                    
{                                             
 const double Under = 380.00 ; 
 const double Grad = 395.00 ;
 char U , G ; 
 double First, Second, Third, Fourth, Fifth, Sixth ;

 cout << endl << endl ;       
 cout << " To calculate your tuition enter the amount of credits, then enter type of"  ; 
 cout << endl ; 
 cout << " classes." ; 

 cout << endl << endl ; 
 cout << " Enter number of credits. " ; 
 cin >> First ; 
 cout << endl << endl ;

 cout << " Enter U for Undergraduate or G for Graduate: " ; 
 cin >> Second ; 

 cout << endl << endl ; 
 cout << " Your tuition total is: " ; 

 Third = First * Under ; 

 Fourth = First * Grad ; 

 if ( Second == U )
 cout << Third ;

 else 
 cout << Fourth ; 
 cout << endl << endl ; 

 system ("Pause");                      

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:40:09.287

你永远不会给`U`. 现在它的内容是垃圾，这就是你得到随机行为的原因。尝试分配`'U'`给您的变量`U`或将机密更改为：

```
if( Second == 'U' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:40:19.533

好的，我在这里看到了一些问题。

主要是C++中的字符有单引号，像这样`'c'`。这很可能是您的错误的原因。由于您从未在任何地方初始化 U ，因此请将其初始化为`'U'`或尝试

```
if ( Second == 'U' )
    cout << Third ; 
```

其次，虽然这不一定是错误输入，但`cout<<endl<<endl;`它有点浪费，因为它两次刷新 cout 的缓冲区，中间只添加了 1 个字符。打字`cout<<'\n'<<endl;`可以解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T03:47:15.407

它或多或少是所有已经说明的：

1.  删除声明，`char U`因为它从不使用
2.  将类型更改`Second`为`char`（从`double`列表中删除并添加`char Second;`）
3.  将 if 语句更改为`if ( ( Second == 'U' ) || ( Second == 'u' ) )`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T03:40:13.273

我哪里都看不到`U = 'U'`。你在开始时被声明，但从未被初始化。你`U`只是一个变量。您必须分配其中的角色`'U'`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T03:41:01.407

Second 被声明为 double，但看起来您希望用户输入一个字符。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-12-07T16:13:01.070

采用

```
using namespace std; 
```

在头文件下

# jquery - jQuery向上/向下滑动：不影响它下面的内容？

> ID：12613716
> 
> 赞同：1
> 
> 时间：2012-09-27T03:37:23.997
> 
> 标签：jquery, html, css, effects, slidedown

所以我有一个默认显示的 div 。我正在使用一个函数来滑动元素，然后更改内容，然后向后滑动以显示新信息。

这一切都很好。

困扰我的是，当 div 为下面的所有内容设置动画时，它会上下跟随它。

基本上，它似乎在隐藏它的“显示：无” - 可以这么说，这意味着它正在被排除在流程之外。我希望它更像“可见性：隐藏”。

...如果这是有道理的（上帝，我希望如此。这是漫长的一周。=P）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:43:27.427

移除上述元素时，元素会向上滑动以填充间隙。对于 HTML，重力是向上的，这就是我们向下构建 HTML 的原因（从浏览器顶部向下）。

假设您的对象向上滑动如下：

```
<div class="SlideUpDiv" style="height:500px; display:block;">Hello!</div> 
```

您需要做的是将该 div 包装在另一个具有相同高度的 div 中：

```
<div class="slideUpContainer" style="height:500px; display:block;">
  <div class="slideUpDiv" style="height:500px; display:block;">Hello!</div></div>
</div> 
```

这样，当第一个元素压碎时，父​​ div 将保持打开间隙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:44:22.973

我认为最简单的做法是将 Slide 元素放在具有固定高度的 div 中。例如

```
<div class='wrapper'>
    <div class='slider'>
    <!-- content for slider here -->
    </div> <!-- close slider -->
</div>  <!--close wrapper --> 
```

然后设置然后设置滑块jquery，我假设你已经完成了，不需要看到它。

CSS 看起来像：

```
div.wrapper {height: 250px; overflow: hidden;}
div.slider {max-height: 250px;} 
```

这样，滑块在固定大小的元素内上下移动，其余元素不受影响。

# binary - 0x0F 是 8 位还是 4 位值？

> ID：12613726
> 
> 赞同：1
> 
> 时间：2012-09-27T03:39:04.293
> 
> 标签：binary, port

如果我有一个只有 4 位的端口，但我正在向它写入 0xFF 和 0xF。会发生什么？它会截断最重要的 4 位还是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:53:59.230

是的，该表达式（用 0x0F 屏蔽）将从值中获取低 4 位。希望您的端口连接到总线的 4 个最低有效位 - 您需要查阅硬件文档。

# php - 使用 imagejpeg 使图像文件变小不明显

> ID：12613731
> 
> 赞同：1
> 
> 时间：2012-09-27T03:39:33.553
> 
> 标签：php, image

我正在用 php 制作一个图像共享网站。我正在阅读有关 google 的 pagespeed 的信息，他们说我需要优化我的图像，所以我一直在尝试使用 imagejpeg 来做到这一点，然后希望我能够在 png 和 gif 中使用基本相同的代码。

这是我目前的代码：

```
$img = imagecreatefromjpeg($original);

if ($extension === "jpg" || $extension === "jpeg"){
    $location = $_SERVER['DOCUMENT_ROOT'] . "/uploads/" . $id . "/fullsize." . $extension;
    $temp = fopen($location, 'w');
    imagejpeg($img, $location, 80);
    fclose($temp);
} 
```

它的工作是在 $original 处获取图像，并将通过 imagejpeg 的副本保存到 $location。

但有时生成的文件比原始文件大！这就是我难过的地方。

为什么会这样？

我怎样才能让它停止发生？

我正在尝试减小图像文件大小而不损害它们的外观，有没有比这更好的方法？

谢谢，

利亚姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:41:54.603

imagejpeg 只会在您以低于原始文件的质量设置保存文件时缩小文件

例如

```
imagejpeg($gd, 'temp.jpg', 50);
$temp = imagecreatefromjpeg('temp.jpg');
imagejpeg($gd, 'temp2.jpg', 70); 
```

可能会产生一个更大的 temp2 文件，因为它的质量设置更高，大致翻译为“不要压缩那么多”。

如果不实际经历整个 jpeg 压缩过程，就无法预测给定图像和质量设置的最终输出大小。您可能需要对图像进行几次尝试重新压缩并每次降低质量设置，直到您开始出现一些收缩。

当然，如果您将质量降低得太低，您基本上会破坏图像并肯定会引入可见的伪影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:30:09.333

这绝对取决于原始图像的质量。如果您的图像最初质量为 60，则以质量 80 保存通常会导致文件更大。

但是，这也取决于创建原始图像的软件。例如，我多次观察到 Adob​​e Photoshop 可以保存质量为 60 的图像，而 GD（您正在使用的图形库）看起来与 80 一样好。此外，Photoshop 通常可以以与其他图形包相同的质量保存图像，但尺寸更小。当然，这是主观的。我不一定认为 Photoshop 是“更好的”，但它的选项似乎调整得很好。

我建议您尝试 ImageMagick，因为我已经看到它通常比 GD 做得更好（文件大小、图像质量）。您还应该确定每张图像的原始质量设置，以免意外增大图像。

# c - 程序终止后变量保留值，如何防止？C

> ID：12613732
> 
> 赞同：0
> 
> 时间：2012-09-27T03:39:44.723
> 
> 标签：c, variables, structure

这是一个程序，要求用户输入有关销售自行车的运输信息，很蹩脚。最后，当它打印出自行车订单的数量和总成本时，这些数字就搞砸了。之前输入的金额似乎留在了内存中。我该如何解决？如果这不是问题，我不介意被告知:)

```
#include <stdio.h>
#include <math.h>
//structure
typedef struct
{char cust_name[25];
 char add_one[20];
 char add_two[20];
 }ORDER;

 ORDER order;

int main(void){
fflush(stdin);
system ( "clear" );

 //initialize variables
 double number_ordered = 0;
 double price;
 char bike;
 char risky;
 double m = 359.95;
 double s = 279.95;
    //inputs for order
    printf("Enter Customer Information\n");
    printf("Customer Name: ");
        scanf(" %[^\n]s", &order.cust_name);

    printf("\nEnter Street Address: ");
        scanf(" %[^\n]s", &order.add_one);

    printf("\nEnter City, State, and ZIP: ");
        scanf(" %[^\n]s", &order.add_two);

    printf("\nHow Many Bicycles Are Ordered: ");
        scanf(" %d", &number_ordered);

    printf("\nWhat Type Of Bike Is Ordered\n  M Mountain Bike \n  S Street Bike");
   printf("\nChoose One (M or S): ");
       scanf(" %c", &bike);

    printf("\nIs The Customer Risky (Y/N): ");
        scanf(" %c", &risky);

    system ( "clear" );

    //print order
    printf("\n**********Shipping Instructions**********");
    printf("\nTo: %s\n    %s\n    %s", order.cust_name, order.add_one, order.add_two);

    if (bike == 'M' || bike == 'm')
        printf("\n\nShip: %d Mountain Bikes", number_ordered);
    else 
        printf("\n\nShip: %d Street Bikes", number_ordered);

    if (bike == 'M' || bike == 'm')
        price = number_ordered * m;
    else
        price = number_ordered * s;

    if (risky == 'Y' || risky == 'y')
        printf("\nBy Freight, COD %d\n", price);
    else
        printf("\nBy Freight, And Bill The Customer %d\n", price);

        printf("*****************************************\n");
        return 0;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:43:17.007

您正在使用 打印`number_ordered`和`price`，它们是`double`s `%d`。`%d`仅适用于整数类型。使用`%lf`to`printf`或`scanf`doubles。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:50:49.960

你的 scanf 和你的 printf 格式都是错误的，所以你既不能正确读取也不能正确写入值。

# jquery - jQuery Mobile 仅在偶数分页访问时不应用样式。此外，每次访问的 Ajax 调用都会增加

> ID：12613739
> 
> 赞同：0
> 
> 时间：2012-09-27T03:40:21.753
> 
> 标签：jquery, jquery-mobile

好吧，诚然这里有很多话，但这是我以前从未见过的问题，而且是一个很奇怪的问题。因此，它可能值得一读。

我有一个页面动态生成 Listviews 以响应从 $.mobile.autocomplete 单击的链接。
列表视图有两种类型`<li>'s`，并且有相应的主题，并有一个相应的类设置或不设置。
我们称它们为 l-1 和 l-2。

当我单击*l-1*时，应该发生的是该 listitem 切换了一个类，该类给出了被选择项目的外观，类似于 $.ui.selected - 每个列表只允许一个选定的项目。
这很容易使用基本的 jQuery 完成。

当我单击*l-1*时，还应该发生的事情是进行 ajax 调用，将特定值发送到服务器，以及一个回调函数，该函数突出显示页脚文本绿色表示成功，红色突出显示出现错误。

当我单击*l-2*时会发生什么，该列表被另一个列表替换，该列表位于该特定层次结构的下一层。

实施起来有点棘手，但是一旦我弄清楚了，就没有什么不简单的了。它有效....有点。

这是奇怪的事情。如果我转到该页面一次，选择一个项目，然后执行上述步骤，一切都会按预期进行。（我们这里只看*l-1*）。我可以根据需要多次通过自动完成生成列表视图，单击*l-1*，应用样式，成功触发 ajax，突出显示元素，瞧！我很高兴，并鼓励地拍拍自己的背。

***然而***，这就是奇怪的开始——假设我通过返回主页离开页面（不使用后退按钮，而只是一个简单的 jQuery Mobile 链接），然后在那里，我点击链接带我回到这个页面，我被带回来了。假设这个页面被称为*Page-2*。在*第 2 页上，*事情开始顺利：我使用自动完成生成列表，但是当我单击*l-1*项目时，会发生（或不发生）以下情况：

1.  该样式**不适**用于列表项。
2.  ajax 请求被调用，并返回成功。
3.  成功元素被突出显示。
4.  奇怪的是，ajax 被调用**了两次**并返回相同的数据。

如果我离开然后再回来，同样的事情会发生，**除了**，

1.  该样式应用于列表项**。**
2.  ajax 调用现在进行了**3**次。

这种模式以以下方式继续（大概有一段时间 - 我尝试了 8 次）：

1.  在奇数 #'d 回程时，应用样式**，**例如（第 3 次回程、5 次、7 次）
2.  甚至 #'d 会返回，样式**未**应用。例如（第 4、第 6、第 8）
3.  每次返回，发出的 ajax 请求数增加一。在第一次旅行和第 8 次旅行时查看网络面板的照片（这是由相同的鼠标单击生成的）。

## 第一次访问，1 次点击

![](../Images/6d6f93225c6e64d6d8c166c93e18feb9.png)

## 第 8 页访问，1 次点击

![](../Images/9e04fddd6f758fff9b42f7b918a114a9.png)

您可以通过右键单击图像并选择在新选项卡中打开来以新选项卡的全尺寸打开图像。

任何见解？

**更新**：2012 年 9 月 27 日，美国东部标准时间下午 1:05。

我*修复*了样式不会应用于偶数页访问时单击的按钮的问题，尽管由于潜在问题，我不禁觉得修复只是一个修复。也许我的解决方案修复了它的事实将更好地阐明这个问题。

解决方案是将按钮的样式从 ajax 调用之前移动到回调，因此在 ajax**请求**完成之前不会应用样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:56:05.103

好吧 - 好吧，我想这对任何人来说都太长了，没有时间阅读它。我想出了一个解决方案，尽管我认为该解决方案并没有解决问题的核心。解决方案是在调用重复 ajax 之后直接添加 $.fn.event.stopPropagation。

为什么这应该有所帮助是解决问题的线索。我唯一能想到的会产生这个问题，并且让我的解决方案修复它是每次调用 pageInit 时都会以某种方式调用（无论我在哪里绑定它，结果都是相同的，即我尝试了 pageLoad、pageShow 等）该函数被克隆并附加到不断增长的函数的末尾，该函数一直绑定到 pageInit。

当然那是没有意义的，我在其他地方从来没有发生过这种情况，所以我很茫然，但是，现在，不管怎样，它已经修复了，目前还没有发现明显的不利影响。

# android - 恢复 ListView 数据，ListView 不显示数据

> ID：12613740
> 
> 赞同：1
> 
> 时间：2012-09-27T03:40:28.350
> 
> 标签：android, listview, android-arrayadapter

我有一个带有列表视图的 Android 应用程序，当用户按下按钮时，它会更新列表视图。该应用程序有两个操作栏选项卡。当我在选项卡之间切换、旋转屏幕或按返回退出活动时，列表视图中的所有数据都会消失。我需要保留数据。我知道至少通过方向更改，我可以将数据保存在 onSaveInstanceState() 中。所以我在savedInstanceState 中保存了一个String[]，并在onCreateView() 中检索了String[]。这似乎工作正常，它正确读取数据。然后我尝试更新列表视图。这似乎也可以读取数据并正常工作，只有列表视图没有更新，而是保持空白。我的代码是：

```
if (savedInstanceState != null) {
    lvArray = savedInstanceState.getStringArray("lvArray");
    setupListView();
} else {
    lvArray= new String[LISTVIEW_LIMIT];
    for (int i = 0; i < LISTVIEW_LIMIT; i++) {
         lvArray[i] = " ";
    }
    setupListView();
}

 private void setupListView() {
    if (listview.getAdapter() == null) {
        ArrayAdapter<String> listviewAdapter = new ArrayAdapter<String>(getActivity().getApplicationContext(), android.R.layout.simple_list_item_1, lvArray);
        listview.setAdapter(listviewAdapter);
    }
    registerForContextMenu(listview);
} 
```

所以正如我所说，我通过这个，它正确读取数据，设置数据的 ArrayAdapter，并为列表视图设置适配器。这一切似乎都有效，只是它实际上并没有更新它。我知道所有数据都在那里，但它仍然无法正常工作？

此外，我可以将列表视图设置为不同的大小（通过 LISTVIEW_LIMIT）。这很好用，除了它还会删除列表视图中已经存在的所有数据。当限制发生变化时，如何保留数据而不是重新创建数组？

将其保存在 onPause() 或 onStop() 中的最佳方法是什么，以便即使按下返回或切换选项卡，我也可以保持列表视图处于打开状态？

编辑：更改为使用 notifyDataSetChanged()，仍然无法正常工作：

```
 lvStopwatch = (ListView) view.findViewById(R.id.list_stopwatch);
    stopwatchTimes = new String[TOTAL_TIMES];
    for (int i = 0; i < TOTAL_TIMES; i++) {
        stopwatchTimes[i] = " ";
    }
    setupListView();

    if (savedInstanceState != null) {
        stopwatchRunning = savedInstanceState.getBoolean("stopwatchRunning", false);
        stopwatchTimes = savedInstanceState.getStringArray("stopwatchTimes");
        stopwatchAdapter.notifyDataSetChanged();
    } else {
        stopwatchRunning = prefs.getBoolean("stopwatchRunning", false);
        Log.d("savedPASS", String.valueOf(stopwatchRunning));

    }

   private void setupListView() {
      if (lvStopwatch.getAdapter() == null) {

         stopwatchAdapter = new ArrayAdapter<String>(getActivity().getApplicationContext(), android.R.layout.simple_list_item_1, stopwatchTimes);
         lvStopwatch.setAdapter(stopwatchAdapter);
      }
      registerForContextMenu(lvStopwatch);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:48:38.783

试试这个

```
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:22:32.467

将列表视图数据保存在某些数据结构中。
我觉得`HashMaps`最适合这个。
当您想要填充时，再次调用销售适配器。

```
adapter=new MyAdapter(dataHashMap);
listView.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:55:59.397

找到了解决方案。由于某种原因，在 onCreateView() 方法中恢复它们时，它无法正确显示这些值。我改为在片段的 onCreate() 方法中恢复它们。除了将 saveInstanceState 检查移至 onCreate() 方法之外，我并没有真正改变太多，但现在它可以工作了。

# java - 用jstl中断语句

> ID：12613744
> 
> 赞同：0
> 
> 时间：2012-09-27T03:40:47.963
> 
> 标签：java, jstl, break

好吧，我有这段代码

```
if(blastIt[i].startsWith("Lambda")){
            break;
        } else {

            System.out.println(blastIt[i]);
        } 
```

所以我试图把这段代码放在jstl上

```
<c:choose>

    <c:when test="${fn:startsWith(blastIt, 'Lambda')}">

    </c:when>

            <c:otherwise>
       <p><c:out value="${blastIt}"/></p>
    </c:otherwise>
</c:choose> 
```

但是他只是从文本中删除了 Lambda 单词，当他找到单词 Lamdba 时我需要停止打印

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:57:18.067

用临时找到的变量试试这个

```
<c:set var="found" value = "0"/>

<c:choose>

    <c:when test="${fn:startsWith(blastIt, 'Lambda')}">
       <c:set var="found" value = "1"/>    
    </c:when>
    <c:otherwise>
        <c:if test="${found==0}">
           <p><c:out value="${blastIt}"/></p>
        </c:if>
    </c:otherwise>
</c:choose> 
```

# java - 更改图中的 Java 映射

> ID：12613749
> 
> 赞同：3
> 
> 时间：2012-09-27T03:41:46.463
> 
> 标签：java, map

我正在尝试在 java 中编写 Graph 并且我的成员变量之一是将字符串映射到整数的映射。整数是 a 的索引`List<List<Integer>>`。可以说我有一个像

```
"Alpha"   maps to 0, 
"Beta"    maps to 1, 
"Charlie" maps to 2, 
"Delta"   maps to 3\. 
```

如果我从图表中删除，`Beta`我想向下移动。但是，Java map 函数只能获取值而不是键，所以我不能更改映射。我该怎么做呢？`Charlie``Delta`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:51:45.817

使用 LinkedHashMap。在那里保持键的插入顺序。

如果您想按字母顺序（或任何其他方式）维护键，请使用 TreeMap。在这种情况下，一旦您删除条目，键将根据规则（例如字母顺序）自行排序。TreeMap 的美妙之处在于您可以在这里定义排序规则。

但是，无论如何，HashMap 都不是您的正确选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:39:33.950

**Hashmap**是连接两个不同对象的最佳方法，请参阅此[示例](http://www.java-samples.com/showtutorial.php?tutorialid=369)

# nuget - Autofac AggregateService 存在于 NuGet 中吗？

> ID：12613752
> 
> 赞同：1
> 
> 时间：2012-09-27T03:41:56.507
> 
> 标签：nuget, autofac

我发现 Autofac [AggregateService](http://code.google.com/p/autofac/wiki/AggregateService)很棒，但是将它包含在我的项目中的正确方法是什么：从[code.google.com](http://code.google.com/p/autofac/source/checkout)克隆它或使用 NuGet？

我习惯了使用 NuGet，但在那里我找不到任何关于 AggegateService 的信息。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:46:54.743

似乎 AggregateService 和其他 Extras 目前“处于困境”。最近发生了一个变化，这些贡献现在被作为 Autofac 核心的相同解决方案的一部分，而它们以前是一个单独的解决方案。从[当前的构建文件](http://code.google.com/p/autofac/source/browse/default.proj)中，您可以看到附加功能将作为单独的 Autofac.Extras 包提供，并从 Autofac 页面单独下载。

同时，您可以使用[AutofacContrib 2.6.1](http://code.google.com/p/autofac/downloads/detail?name=AutofacContrib-2.6.1.841-NET40.zip&can=2&q=)或获取源代码并自己编译一个 dll。

顺便说一句，感谢您发现 AggregateService 很棒；）

**更新**：实际上，正确读取构建文件（并查看当前源结构），Extras 部分将作为单独的包分发。所以希望以后能在 Nuget 上找到 Autofac.Extras.AggregateService。

# php - 安全地在 mysql 数据库中保存和显示 HTML 和特殊字符？

> ID：12613762
> 
> 赞同：1
> 
> 时间：2012-09-27T03:43:19.147
> 
> 标签：php, mysqli, html-entities, htmlspecialchars

标题基本上概括了它。我建立了一个小博客，但我什至不能在我的文章中发布链接！我能做些什么？我试过了`htmlentities()`，基本上每一种逃避方式都有。我正在使用 PHP 5.3 和 MySQL 5.1`htmlspecialchars()``real_escape_string()`

这是我将博客保存到数据库的代码：

```
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlentities($data);
if ($problem && strlen($data) == 0)
{
    die($problem);
}
    return $data;
}

if(isset($_POST['addBlog'])) { //form submitted?

// get form values, escape them and apply the check_input function
$title = $link->real_escape_string($_POST['title']);
$category = $link->real_escape_string(check_input($_POST['category'], "You must choose a category."));
$content = $link->real_escape_string(check_input($_POST['blogContent'], "You can't publish a blog with no blog... dumbass."));
$date = $link->real_escape_string(check_input($_POST['pub_date'], "What day is it foo?"));

 // our sql query
$sql = $link->prepare("INSERT INTO pub_blogs (title, date, category, content) VALUES (?, ?, ?, ?)");
$sql->bind_param('ssss', $title, $date, $category, $content);

//save the blog     
#mysqli_query($link, $sql) or die("Error in Query: " . mysqli_error($link));
$sql->execute();

if (!$sql) 
{
    print "<p> Your Blog Was NOT Saved. </p>";
}
} 
```

这是我显示博客的代码：

```
// Grab the data from our people table
        $result = mysqli_query($link, "SELECT * FROM pub_blogs ORDER BY date DESC") or die ("Could not access DB: " . mysqli_error($link));

        while ($row = mysqli_fetch_assoc($result))
        {   
            $id = $link->real_escape_string($row['id']);
            $title = $link->real_escape_string($row['title']);
            $date = $link->real_escape_string($row['date']);
            $category = $link->real_escape_string($row['category']);
            $content = $link->real_escape_string($row['content']);

            $id = stripslashes($id);
            $title = stripslashes($title);
            $date = stripslashes($date);
            $category = stripslashes($category);
            $content = stripslashes($content);

            echo "<div class='blog_entry_container'>";
            echo "<span class='entry_date'><a href='#'>" .$date. "</a> - </span><span class='blog_title'><a class='blogTitleLink' href='blog-view.php?id=" .$id. "'>" .$title. "</a></span>"; 
            echo "<p>" .$content. "</p>";
            echo "</div>";
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T03:50:29.430

虽然编码字符是一件好事，但必须确保不要过度编码。

只对当时 /needs/ 编码的内容进行编码。在将 HTML 放入数据库之前不要对其进行编码。您可能想稍后打印出来，或者您可能想针对它运行搜索。为 SQL 使用正确的转义序列（或者，更好的是，使用`PDO`）。

只有当你向浏览器发送内容时，你才应该转义 HTML，然后你需要决定你需要什么样的转义。要将和之类的东西转换`<`为`&`字符实体，以便它们正确显示，然后使用[正确的转义方法](https://stackoverflow.com/questions/46483/htmlentities-vs-htmlspecialchars)。

# c# - 保存时将 PDF 保存到文件夹

> ID：12613783
> 
> 赞同：0
> 
> 时间：2012-09-27T03:46:33.307
> 
> 标签：c#, asp.net, file-location

我一直在寻找我认为很容易找到的东西。

我有一个表单，它接受输入字段并将值放在可填写的 PDF 中。

```
PDFDocument template = new PDFDocument(Server.MapPath("~/Forms/OfferSheet.pdf"));

template.Form.Fields["Seller"].Value = litName.Text;
template.Form.Fields["Address"].Value = litAddress.Text;
template.Form.Fields["Email"].Value = litEmailAddress.Text;
template.Form.Fields["Phone"].Value = string.Format("({0}) {1}-{2}", phone.Substring(0, 3), phone.Substring(3, 3), phone.Substring(6, 4));
template.Form.Fields["ProjectedFutureSale"].Value = string.Format("{0:n}", offer.FutureSalesPrice);
template.Form.Fields["PurchaseLoan"].Value = string.Format("{0:n}", offer.PurchasingLoanTitleClosing);
template.Form.Fields["Remodeling"].Value = string.Format("{0:n}", offer.Remodeling);
template.Form.Fields["Utilities"].Value = string.Format("{0:n}", offer.Utilities * 6);
template.Form.Fields["HOADues"].Value = string.Format("{0:n}", offer.HOADues / 2);
template.Form.Fields["Insurance"].Value = string.Format("{0:n}", offer.Insurance / 2);
template.Form.Fields["Taxes"].Value = string.Format("{0:n}", offer.Taxes / 2);
template.Form.Fields["LoanInterestCarry"].Value = string.Format("{0:n}", offer.LoanInterestCarry);
template.Form.Fields["InspectionRepairs"].Value = string.Format("{0:n}", offer.InspectionRepairs);
template.Form.Fields["SaleTitleClosingFees"].Value = string.Format("{0:n}", offer.SaleTitleClosingFees);
template.Form.Fields["RealEstateSalesCommission"].Value = string.Format("{0:n}", offer.SalesCommission);
template.Form.Fields["ProjectedProfit"].Value = string.Format("{0:n}", offer.ProjectedProfit);
template.Form.Fields["PurchasePrice"].Value = string.Format("{0:n}", offer.FinalOffer);
template.Form.Fields["ClosingDate"].Value = String.Format(new CultureInfo("en-US"), "{0:MM/dd/yyyy}", offer.ClosingDate);
var date = DateTime.Now;
template.Form.Fields["SellerSig1"].Value = litName.Text;

template.FlattenFormFields();

using (MailMessage message = new MailMessage())
{
     message.Attachments.Add(new Attachment(new MemoryStream(template.GetPDFAsByteArray(), false), "PurchaseOffer.pdf"));
     message.Subject = "PurchaseOffer";
     message.Body = ConfigurationManager.AppSettings["FormEmail.Body"];

     message.To.Add(new MailAddress(lnkEmail.Text));

     new SmtpClient().Send(message);                
}

var fileName = prospect.FirstName + " " + prospect.LastName + DateTime.Now;
var rootPath = "~/Forms/Offers/";
var filePath = System.IO.Path.Combine(rootPath, fileName); 
```

我不仅需要通过电子邮件发送 PDF，还需要将 PDF 保存到文件位置，以便网站管理员可以查看 PDF。任何帮助都很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T03:55:00.697

您不能写入客户端位置。

但是您的管理员可以轻松访问服务器本身上的文件。
如果没有，您可以列出此文件夹中的文件并提供下载选项。

您应该使用该`File.WriteAllBytes`函数将字节数组写入本地文件。

```
var fileName = prospect.FirstName + " " + prospect.LastName + DateTime.Now;
var rootPath = "~/Forms/Offers/";
var filePath = System.IO.Path.Combine(rootPath, fileName);

File.WriteAllBytes(filePath, template.GetPDFAsByteArray()); 
```

# orientation - iOS6中的界面方向检查

> ID：12613784
> 
> 赞同：1
> 
> 时间：2012-09-27T03:46:48.093
> 
> 标签：orientation, ios6

今天在玩iOS6，我一直在检查各种方向下的视图框架大小，我以为我在iOS5中理解了这一点。（我知道自动布局在很多情况下解决了基本问题，但我仍然觉得我可能出于各种原因需要这个检查？）。

关闭自动布局后，检​​查视图尺寸会返回正确的尺寸大小，但不是正确的边缘。也就是说，在 iPhone 上的纵向 .width 属性 = 320 和横向 .width 属性 = 300，而我希望 300 是高度尺寸的值。

这对我来说有点奇怪，因为 self.view 确实可以正确缩放到窗口，但是设置为 self.view 框架的另一个视图却没有。这很容易通过检查方向然后得到正确的数字来解决，我猜，但我是否遗漏了一些明显的东西，或者 iOS6 中的一些新规则？

```
//always gives aprox 300 for width despite device orientation
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    screenRect = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
    screenRect = self.view.window.frame;
    NSLog(@"screen rect size = %f x %f", screenRect.size.width, screenRect.size.height);
    [imageView setFrame:screenRect];
}

//a button to check orientation. always gives aprox 300 for width despite device orientation
- (IBAction)checkScreenSize:(id)sender {
    screenRect = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
    NSLog(@"screen rect size = %f x %f", screenRect.size.width, screenRect.size.height);
    screenRect = [[UIScreen mainScreen]applicationFrame];
    NSLog(@"screen rect size = %f x %f", screenRect.size.width, screenRect.size.height);
    } 
```

# wcf - 使用异步任务部署到 Azure (.NET 4) 的 WCF 服务 界面

> ID：12613785
> 
> 赞同：1
> 
> 时间：2012-09-27T03:46:51.903
> 
> 标签：wcf, asynchronous, azure, task

我已将 WCF 服务部署到以 Web 角色运行的 Azure。Azure 是库存标准（因此运行 .NET 4.0）。我收到以下错误：

```
Type 'System.Threading.Tasks.Task' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute.  If the type is a collection, consider marking it with the CollectionDataContractAttribute.  See the Microsoft .NET Framework documentation for other supported types. 
```

*   我的类库面向 .NET 4
*   我参考了异步目标包

它通过模拟器在我的本地机器上运行。我的本地机器是带有 .NET 4.5 的 Windows 8。

它似乎类似于： [http ://forums.lhotka.net/forums/t/11585.aspx](http://forums.lhotka.net/forums/t/11585.aspx)

这可能吗，还是我需要在 Azure 上安装 .NET 4.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:14:20.350

如果为异步实现返回任务（这是 WCF 4.5 中的新功能），则 .NET 4.0 不支持。.NET 4.0 支持基于 IAsyncResult 的异步。

如果任务作为数据返回（而不是异步），则以下适用：

您的服务是否返回任务？这是不对的，因为任务是一些“正在完成的工作”——而不是“数据”本身。也许您在进程中测试了该过程，因此它起作用了？

System.Threading.Tasks.Task 也存在于 .NET 4 中。正如错误所说，您的服务的编写方式需要序列化一个任务，这实际上是不可能的。您应该查看您的服务合同和再次使用的数据类型。

# python - 530 错误 - Google SMTP 服务器需要身份验证

> ID：12613787
> 
> 赞同：0
> 
> 时间：2012-09-27T03:47:06.963
> 
> 标签：python, sockets, smtp, gmail, certificate

我无法让 Mail to: SMTP 命令在这个 python 套接字程序中工作。我总是得到...

```
530-5.5.1 Authentication Required 
```

...如您所见，我没有提供 ca_certs 和 cert_reqs 参数。我似乎找不到任何在 Windows for Python 中使用证书进行编程的好例子。

```
from socket import *
import ssl, pprint

msg = "\r\n I love computer networks!"
endmsg = "\r\n.\r\n"

# Choose a mail server (e.g. Google mail server) and call it mailserver
mailserver = "smtp.gmail.com"
port = 465

# Create socket called clientSocket and establish a TCP connection with mailserver
clientSocket = socket(AF_INET, SOCK_STREAM)
ssl_clientSocket = ssl.wrap_socket(clientSocket)
                                   #ca_certs="C:\Users\wgimson\Downloads\root",
                                   #cert_reqs=ssl.CERT_REQUIRED)
ssl_clientSocket.connect((mailserver, port))

# DEBUG
print repr(ssl_clientSocket.getpeername())
print ssl_clientSocket.cipher()
print pprint.pformat(ssl_clientSocket.getpeercert())
# DEBUG

recv = ssl_clientSocket.read(1024)
print
print recv

# If the first three numbers of what we receive from the SMTP server are not
# '220', we have a problem
if recv[:3] != '220':
    print '220 reply not received from server.'
else:
    print "220 is good"

# Send HELO command and print server response.
heloCommand = 'HELO Alice\r\n'
ssl_clientSocket.write(heloCommand)
recv1 = ssl_clientSocket.recv(1024)
print recv1

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv1[:3] != '250':
    print '250 reply not received from server.'
else:
    print "250 is good"

# Send MAIL FROM command and print server response.
mailFromCommand = 'MAIL From: wgimson@gmail.com\r\n'
ssl_clientSocket.send(mailFromCommand)
recv2 = ssl_clientSocket.recv(1024)
print recv2

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv2[:3] != '250':
    print '250 reply not received from server.'
else:
    print "250 means still good" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:36:22.267

这适用于谷歌邮件。

```
def send_mail(recipient, subject, message, contenttype='plain'):
    EMAIL_HOST = 'smtp.gmail.com'
    EMAIL_PORT = 587
    EMAIL_HOST_USER = 'some_account@gmail.com'
    EMAIL_HOST_PASSWORD = 'some_password'

    mime_msg = email.mime.text.MIMEText(message, contenttype, _charset="UTF-8")
    mime_msg['Subject'] = subject
    mime_msg['From'] = EMAIL_HOST_USER
    mime_msg['To'] = recipient

    smtpserver = smtplib.SMTP(EMAIL_HOST, EMAIL_PORT)
    smtpserver.ehlo()
    smtpserver.starttls()
    smtpserver.login(EMAIL_HOST_USER, EMAIL_HOST_PASSWORD)   
    smtpserver.sendmail(EMAIL_HOST_USER, recipient, mime_msg.as_string())
    smtpserver.close() 
```

# git - 为什么在我的 `git branch -l -a` 输出中有 `remotes/origin/HEAD -> origin/master` 条目？

> ID：12613793
> 
> 赞同：72
> 
> 时间：2012-09-27T03:48:24.423
> 
> 标签：git, branch

我不明白输出中的第二行到`git branch -l -a`: `remotes/origin/HEAD -> origin/master`。

```
git branch -l -a
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master 
```

那是另一次手术的遗留物吗？我应该清理它吗？我该怎么做？

通常我在 cli 上使用 git，但在这个本地存储库上，我尝试`TortoiseGit`为朋友找到一个简单的 git 工作流程。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-27T04:02:28.240

不，不需要清理：它是远程仓库引用的符号分支。
当您克隆您的存储库时，默认情况下您将位于`remotes/origin/HEAD`.

也可以看看：

*   “ [Git：在裸存储库中更改 Active Branch 的正确方法？](https://stackoverflow.com/questions/3301956/git-correct-way-to-change-active-branch-in-a-bare-repository/3302018#3302018) ”
*   "[如何更改 Git 远程 HEAD 以指向除“master”之外的其他内容</a>"](https://stackoverflow.com/questions/1485578/how-do-i-change-a-git-remote-head-to-point-to-something-besides-master/2962737)
[](https://stackoverflow.com/questions/1485578/how-do-i-change-a-git-remote-head-to-point-to-something-besides-master/2962737)
*   [“](https://stackoverflow.com/questions/1485578/how-do-i-change-a-git-remote-head-to-point-to-something-besides-master/2962737)[怎么`origin/HEAD`设置？](https://stackoverflow.com/questions/8839958/how-does-origin-head-get-set) ”

注意：在 2.20 之前的 Git 版本上，您需要[使用`git branch --list`(或`git branch`)，而不是`git branch -l`](https://stackoverflow.com/a/51431590/6309).

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-09-11T16:04:49.313

您可以使用`git remote set-head origin -d`删除`origin/HEAD`符号引用，或`git remote set-head origin -a`查询远程并自动将`origin/HEAD`指针设置为远程的当前分支。

`origin/HEAD`参考是可选的。它仅充当语法快捷方式：如果它存在并指向，您可以在您本来指定的地方`origin/master`简单地使用 specific 。`origin``origin/master`

[git remote(1)](https://www.kernel.org/pub/software/scm/git/docs/git-remote.html)手册页对此进行了描述：

> 固定头
> 
> 设置或删除命名远程的默认分支（即符号引用 refs/remotes//HEAD 的目标）。不需要远程的默认分支，但允许指定远程的名称来代替特定的分支。例如，如果 origin 的默认分支设置为 master，则可以在通常指定 origin/master 的任何位置指定 origin。

# python - Python脚本通过FTP上传文件

> ID：12613797
> 
> 赞同：98
> 
> 时间：2012-09-27T03:48:42.863
> 
> 标签：python, ftp, upload

我想制作一个脚本来将文件上传到 FTP。

登录系统将如何工作？我正在寻找这样的东西：

```
ftp.login=(mylogin)
ftp.pass=(mypass) 
```

以及任何其他登录凭据。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-09-27T04:11:43.093

使用[`ftplib`](http://docs.python.org/library/ftplib.html)，你可以这样写：

```
import ftplib
session = ftplib.FTP('server.address.com','USERNAME','PASSWORD')
file = open('kitten.jpg','rb')                  # file to send
session.storbinary('STOR kitten.jpg', file)     # send the file
file.close()                                    # close file and FTP
session.quit() 
```

`ftplib.FTP_TLS`如果您的 FTP 主机需要 TLS，请改用。

* * *

要检索它，您可以使用[`urllib.retrieve`](http://docs.python.org/library/urllib.html#urllib.urlretrieve)：

```
import urllib 

urllib.urlretrieve('ftp://server/path/to/file', 'file') 
```

* * *

**编辑**：

要找出当前目录，请使用[`FTP.pwd()`](http://docs.python.org/library/ftplib.html#ftplib.FTP.pwd)：

> FTP.pwd()：返回服务器上当前目录的路径名。

要更改目录，请使用[`FTP.cwd(pathname)`](http://docs.python.org/library/ftplib.html#ftplib.FTP.cwd)：

> FTP.cwd(pathname)：设置服务器上的当前目录。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2019-05-05T10:10:42.190

**ftplib**现在[支持上下文管理器](https://docs.python.org/3/library/ftplib.html#ftplib.FTP)，所以我想它可以变得更容易

```
from ftplib import FTP
from pathlib import Path

file_path = Path('kitten.jpg')

with FTP('server.address.com', 'USER', 'PWD') as ftp, open(file_path, 'rb') as file:
        ftp.storbinary(f'STOR {file_path.name}', file) 
```

无需关闭文件或会话

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-27T04:11:14.730

您很可能希望将[ftplib 模块用于 python](http://docs.python.org/library/ftplib.html)

```
 import ftplib
 ftp = ftplib.FTP()
 host = "ftp.site.uk"
 port = 21
 ftp.connect(host, port)
 print (ftp.getwelcome())
 try:
      print ("Logging in...")
      ftp.login("yourusername", "yourpassword")
 except:
     "failed to login" 
```

这会将您登录到 FTP 服务器。你从那里做什么取决于你。您的问题并未表明任何其他真正需要做的操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-22T13:23:21.390

试试这个：

```
#!/usr/bin/env python

import os
import paramiko 
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('hostname', username="username", password="password")
sftp = ssh.open_sftp()
localpath = '/home/e100075/python/ss.txt'
remotepath = '/home/developers/screenshots/ss.txt'
sftp.put(localpath, remotepath)
sftp.close()
ssh.close() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-27T04:47:04.827

为避免出现加密错误，您还可以尝试以下命令

```
ftp = ftplib.FTP_TLS("ftps.dummy.com")
ftp.login("username", "password")
ftp.prot_p()
file = open("filename", "rb")
ftp.storbinary("STOR filename", file)
file.close()
ftp.close() 
```

ftp.prot_p() 确保您的连接已加密

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T04:13:08.940

[我刚刚在这里](https://stackoverflow.com/a/12613833/230884)回答了一个类似的问题， 恕我直言，如果您的 FTP 服务器能够与 Fabric 通信，请使用 Fabric。这比做 raw 好得多`ftp`。

我有一个 FTP 帐户，`dotgeek.com`所以我不确定这是否适用于其他 FTP 帐户。

```
#!/usr/bin/python

from fabric.api import run, env, sudo, put

env.user = 'username'
env.hosts = ['ftp_host_name',]     # such as ftp.google.com

def copy():
    # assuming i have wong_8066.zip in the same directory as this script
    put('wong_8066.zip', '/www/public/wong_8066.zip') 
```

将文件另存为`fabfile.py`并在`fab copy`本地运行。

```
yeukhon@yeukhon-P5E-VM-DO:~$ fab copy2
[1.ai] Executing task 'copy2'
[1.ai] Login password: 
[1.ai] put: wong_8066.zip -> /www/public/wong_8066.zip

Done.
Disconnecting from 1.ai... done. 
```

再一次，如果您不想一直输入密码，只需添加

```
env.password = 'my_password' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-08-26T11:24:02.323

您可以使用以下功能。我还没有测试它，但它应该可以正常工作。请记住，目标是目录路径，源是完整的文件路径。

```
import ftplib
import os

def uploadFileFTP(sourceFilePath, destinationDirectory, server, username, password):
    myFTP = ftplib.FTP(server, username, password)
    if destinationDirectory in [name for name, data in list(remote.mlsd())]:
        print "Destination Directory does not exist. Creating it first"
        myFTP.mkd(destinationDirectory)
    # Changing Working Directory
    myFTP.cwd(destinationDirectory)
    if os.path.isfile(sourceFilePath):
        fh = open(sourceFilePath, 'rb')
        myFTP.storbinary('STOR %s' % f, fh)
        fh.close()
    else:
        print "Source File does not exist" 
```

# xcode - kextutil：没有为 com.apple.iokit.IOUSBFamily 找到兼容的依赖项

> ID：12613798
> 
> 赞同：1
> 
> 时间：2012-09-27T03:48:54.017
> 
> 标签：xcode, macos, kernel-extension

在 Mac-pro 10.6.8 上加载我的驱动程序时 Kextutil 失败，但在 iMac 10.6.8 上没问题。如果你能告诉我一些相关的事情，你将不胜感激！谢谢

信息：

```
YAN:W$ uname -a
Darwin YAN.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64
YAN:W$ sudo kextutil /System/Library/Extensions/MyDriver64.kext
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.iokit.IOUSBFamily.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.iokit.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.libkern.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.mach.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.iokit.IOUSBFamily.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.iokit.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.libkern.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.mach.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.iokit.IOUSBFamily.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.iokit.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.libkern.
/tmp/MyDriver64.kext - no compatible dependency found for com.apple.kpi.mach.
/tmp/MyDriver64.kext has problems:
Dependency Resolution Failures: 
Only incompatible kexts found for these libraries: 
    com.apple.iokit.IOUSBFamily
    com.apple.kpi.iokit
    com.apple.kpi.libkern
    com.apple.kpi.mach 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:43:28.773

感谢您的回复。我的 iMac 也在运行 x86_64 内核。使用 kextlibs MyDriver64.kext 时，我得到了当前的 IOUSBFamily 版本。我更改了我的 Info.plist，使依赖库版本（dict 部分）与当前版本相同。有用。

```
YAN:W$kextlibs MyDriver64.kext
For all architectures:
    com.apple.iokit.IOUSBFamily = 4.2.4
    com.apple.kpi.iokit = 10.8
    com.apple.kpi.libkern = 10.8
    com.apple.kpi.mach = 10.8 
```

和 Info.plist：

```
...
<dict>
    <key>com.apple.iokit.IOUSBFamily</key>
    <string>4.2</string>
    <key>com.apple.kpi.iokit</key>
    <string>10.8</string>
    <key>com.apple.kpi.libkern</key>
    <string>10.8</string>
    <key>com.apple.kpi.mach</key>
    <string>10.8</string>
</dict>
... 
```

@Thane Norton，@pmjordan，谢谢！！！

# c# - 为什么抛出或捕获的类型必须派生自 System.Exception

> ID：12613805
> 
> 赞同：22
> 
> 时间：2012-09-27T03:49:56.347
> 
> 标签：c#, .net, exception, compiler-errors

所以只是出于好奇，我想看看异常类有什么特别之处，它允许它与关键字一起使用，`Throw`而标准类则不能。

我发现的只是 Exception 类实现了以下内容

```
public class Exception : System.Object, System.Runtime.Serialization.ISerializable, System.Runtime.InteropServices._Exception
{
} 
```

因此，我尝试实现这些相同的接口并尝试抛出我自己的自定义异常，但该异常没有派生自用`System.Exception`。我只是被告知

> 捕获或抛出的类型必须派生自`System.Exception`

那么这有什么具体的原因吗？我认为托管语言中的选择似乎是任意的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T07:01:18.100

我认为你的前提是错误的。可能会抛出一个不是从`System.Exception`. 你只是不能把它扔到 C# 中或在 catch 子句中检查对象。从 C# 规范 (v4.0) 的第 8.10 节开始：

> 某些编程语言可能支持无法表示为派生自 System.Exception 的对象的异常，尽管 C# 代码永远不会生成此类异常。通用的 catch 子句可用于捕获此类异常。因此，一般的 catch 子句在语义上与指定类型 System.Exception 的子句不同，因为前者也可以捕获来自其他语言的异常。

一般捕获的示例：

```
try
{
}
catch (Exception) { } // 'specific' catch
catch { } // 'general' catch 
```

这在调用非托管代码时尤其重要。

有些类型似乎总是在每种语言中都得到特殊对待。主要是因为它们对系统如此重要。`System.Exception`, `System.ValueType`,`System.Delegate`都是 C# 中与语言关键字和 CLR 紧密绑定的特殊类型，因此您不能只实现接管其角色的类也就不足为奇了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-27T03:57:35.837

[异常设计指南](http://msdn.microsoft.com/en-us/library/ms229014%28v=vs.80%29.aspx)

> 异常是报告错误的标准机制。应用程序和库不应使用返回码来传达错误。异常的使用增加了一致的框架设计，并允许来自不能具有返回类型的成员（例如构造函数）的错误报告

[抛出（C# 参考）](http://msdn.microsoft.com/ru-ru/library/1ah5wsex.aspx)

> 抛出的异常是类派生自 System.Exception 的对象，如下例所示。

```
class MyException : System.Exception {}
// ...
throw new MyException(); 
```

[例外概述](http://msdn.microsoft.com/en-us/library/6kzk0czb%28v=vs.80%29.aspx)

> 在 .NET Framework 中，异常是从异常类继承的对象

因此，您的异常必须来自`System.Exception`，但如何在其中组织它取决于您。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T03:52:51.757

该语言`System.Exception`用作所有异常的基础。这实质上意味着任何可抛出或可捕获的异常都不应出错`(Exception)myExc`。这可能是因为使用了`System.Exception`类的定义，以便所有异常都遵循相同的接口。由于一致的接口，异常到达时会带有堆栈跟踪和有意义的消息（例如），这对于日志记录非常宝贵。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T05:59:28.313

这是 CLS 设计者的任意选择。大概他们出于一致性的原因做出了这个选择。C# 遵循 CLS；出于这个原因，编译器强制执行该要求，而不是出于与 Exception 类型的实现相关的任何技术原因。

CLI 实际上可以抛出任何对象。请参阅[http://jilc.sourceforge.net/ecma_p3_cil.shtml#_Toc524462405](http://jilc.sourceforge.net/ecma_p3_cil.shtml#_Toc524462405)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-27T06:11:41.437

每个异常都需要有一个通用基类的一个原因是，您可以在单个 catch 块中捕获每种类型的异常。

如果我有这个：

```
try
{
    ...
}
catch(Exception ex)
{
    // Handle somehow
} 
```

这将捕获所有异常，并允许我显示它是什么（通过使用`ex.Message`）。

如果你可以扔*任何东西*，那么你怎么会有一个可以捕捉所有东西并且仍然可以让你访问抛出的对象的 catch 呢？

你可以拥有这个，它绝对能捕捉到所有东西：

```
try
{
    ...
}
catch
{
    // Handle somehow
} 
```

但是你已经“丢失”了被抛出的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-08T07:09:13.297

我解决了添加“系统”作为参考

```
try
{
}
catch (System.Exception) {} 
```

# ios - 设置滚动视图的内容偏移

> ID：12613807
> 
> 赞同：7
> 
> 时间：2012-09-27T03:50:06.087
> 
> 标签：ios, xcode, ios5, ios6

有没有办法以编程方式设置视图控制器内的滚动视图的偏移量？

我必须根据不同的条件进行设置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T05:54:55.827

是的，您可以设置滚动视图的 contentOffset - 代码将是这样的 -

```
if(your Condition)
{
    [scrollView setContentOffset:CGPointMake(0,-50) animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T03:58:21.133

是的，

```
scrollView.contentOffset 
```

**文档：http:** [//developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

# python - 对象模块不可调用，常量语法无效

> ID：12613816
> 
> 赞同：-1
> 
> 时间：2012-09-27T03:51:28.857
> 
> 标签：python, oop

我是 python 新手。我有`Syntax Error: invalid syntax & object module is not callable`

谢谢你的帮助

现货.py

```
class Spot(object):
    isBunny = bool()
    UP = 0
    SLEEP = 2

    def __init__(self, newIsBunny):
        self.isBunny = newIsBunny
        self.nextCycle = self.UP 
```

测试.py

```
import Spot
i=2
if i==Spot.SLEEP
    a=Spot(True)
print a.isBunny 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:55:08.480

一方面，你的类中的代码应该缩进。这就是 python 知道代码是类的一部分的方式（就像缩进告诉 python 哪些代码是函数或循环的一部分）。

其次，你错过了一个`:`之后`if i==Spot.SLEEP`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:56:05.080

除了 Borgleader 所说的，而不是

```
import Spot 
```

采用

```
from Spot import Spot 
```

这应该修复“模块不可调用”错误。

当你说

```
import Spot 
```

那么“Spot”就是整个模块。Spot.Spot 是 Spot 模块中的 Spot 类，这是您真正想要的。使用该`from Spot import Spot`语法，您可以只从 Spot 模块中提取 Spot 类，并将其称为 Spot。

# javascript - Javascript 动画在更新后的 Chrome 中表现不同

> ID：12613818
> 
> 赞同：0
> 
> 时间：2012-09-27T03:51:37.977
> 
> 标签：javascript, jquery, ruby-on-rails, google-chrome, twitter-bootstrap

好吧，这个*真的很*诡异。

目前我正在维护`rails 3.2.8`应用程序，几天前我注意到 js-animation 在 updated 中开始表现不同`Chrome`。

我正在使用`bootstrap-modal.js`和`bootstrap-alerts.js`模块`twitter-bootstrap 1.4`：

— 当我试图关闭警报消息时，它会淡出，但元素仍保留在代码中：

```
<div class="alert-message block-message info fade in">
<a href="#" class="close">×</a>
  Lorem ipsum... <a href="http://google.com">A link</a>
</div> 
```

所以我现在有了已解散块大小的空白空间。并且仍然可以（盲目地）单击其他链接。

— 当我调用引导模式时，我只会得到变暗的背景覆盖，但没有模式本身。检查页面源，自触发事件以来，它只有一个新块：

```
<div class="modal-backdrop fade in"></div> 
```

这**仅**发生在`Chrome`（尝试过`Safari`，`Firefox`-一切都很好）并且**仅**在*本地机器上*发生。远程服务器上没有这样的问题（它具有相同的代码）。我还尝试在本地机器上以生产模式运行应用程序——同样缺乏。

`Chrome`并且控制台中没有错误或警告。

试用
`Chrome 21.0.1180.89 m`/ `22.0.1229.79 m`(Windows 7)
`Chrome 22.0.1229.91 beta`(OS X 10.6.8)

找到一个有类似问题但没有答案的人 - [http://productforums.google.com/forum/#!topic/chrome/6-DncVjLZhw](http://productforums.google.com/forum/#!topic/chrome/6-DncVjLZhw)（如果你怀疑我的理智）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:09:28.733

是的，Chrome 的更新今天破坏了很多网站。原因不明，只能等谷歌开发者自行修复。好的，猜猜它发生在所有操作系统系统上。

# java - Java中的隐藏方法？

> ID：12613823
> 
> 赞同：2
> 
> 时间：2012-09-27T03:52:18.420
> 
> 标签：java

我目前正在自学Java，这个问题让我困惑了一段时间，尽管我确信答案很简单。我想知道是否有通过扩展某些类获得的隐藏方法，这样您就可以在不引用 super.method(... 的情况下调用子类中的方法？例如，看一下这个 ButtonPanel 类：

```
class ButtonPanels extends JPanel {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public ButtonPanels(){
        JButton yellow = new JButton("Yellow");
        JButton blue = new JButton("Blue");
        JButton red = new JButton("Red");

        add(yellow);
        add(blue);
        add(red);
    }
} 
```

这里的“添加”方法......它们来自哪里？似乎写 super.add 工作得很好，这让我很困惑。你不需要在你从超类调用的所有方法前面写 super 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T03:53:37.227

这些不是“隐藏”的方法。从超`super.`类调用方法时 是可选的（只要您没有在自己的类中重写它，那么您需要`super.`将它与您自己的实现区分开来）。

[文档`JPanel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)在“方法摘要”标题下列出了所有这些方法，特别是在“从类 java.awt.Container 继承的方法”部分中（有多个重载，`add`这就是为什么在那里不止一次提到它的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T03:53:49.630

你不需要写`super`。如果方法定义在此类中不可用，jvm 将检查超类中的方法可用性。

`super`是必需的，如果您有被覆盖的方法并且想要调用`super`类实现而不是`sub`类实现（覆盖实现）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:55:07.467

这是多态性的影响。ButtonPanels 类既是 ButtonsPanel 又是 JPanel。因此，它可以访问 JPanel 中的大多数方法，就好像它们在 ButtonsPanel 本身中一样。如果您重载超类中存在的方法，则超变得很重要。

在您的情况下， super.add(Object j) 和 add(Object j) 在您调用它们时完全相同，因为 add 没有重载。

补充一点，多态是一个对象可以采用多种形式的概念。它本身和所有超类同时是可以引用的。在此按钮面板的情况下，以下所有内容都是构造对象的不同方式。

```
JButton j = new JButton();
Container c= new JButton();
Object o = new JButton(); 
```

（已经晚了，我希望我没有这些倒退，如果我这样做，请有人告诉我）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T03:57:38.177

JVM/编译器足够聪明，可以检查方法的可用性。它检查该方法是否在当前类中可用。如果是 ，则使用可用的那个。如果不是，它检查超类。如果那里可用，它会使用它。如果不是，它会再上一层，直到找到实现。如果没有找到任何类，编译器会给出关于方法未找到的错误。

# javascript - 对射击鼠标单击 JQuery 进行动画处理？

> ID：12613825
> 
> 赞同：0
> 
> 时间：2012-09-27T03:52:31.333
> 
> 标签：javascript, jquery, css, onclick, jquery-animate

我对我的 JavaScript 操作有了基本的想法。

我的 JavaScript 的重点是使 id 'player' 的图像移动到我用鼠标单击的位置，只有当我点击 id 为 'stage' 的 div 时，动画持续 3 秒。

同时，当动画运行时，头部应该变为“玩家正在移动”，而不是在静止时显示“玩家静止”。

现在，在 Chrome 中（可能是 Chrome 的一个错误），JS 的基本功能可以正常工作。但是，它似乎超出了我在第一轮单击鼠标的位置，然后当我再次单击“舞台”div 时几乎没有移动。

如果有人看到我可能遇到问题的地方，请告诉我！

这是我编辑的 JQuery：

```
$(document).ready(function(){
$('#stage').click(function(e){
    $('#header h1').html('Player is moving!');
    $('#player').animate({
        top: e.pageY + 'px',
        left: e.pageX + 'px'
    }, 3000, function(){
        $('#header h1').html('Player is standing still...');
    });     
}); 
```

});

我已经修复了我的 CSS 问题，所以不用担心，但代码位于 CSS 下方，以防有人认为问题可能在其中。

谢谢！

编辑：

这是CSS。该问题已解决，但如果您认为图像超出图像的问题可能出于任何原因，则提供它是为了方便：

```
#header {
width: 600px;
margin: 20px auto 10px;
padding: 5px;
background-color: whiteSmoke;
border: 1px solid #aaa;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
box-shadow: 0 0 5px #ccc;
}
#header h1 {
text-align: center;
margin: 0;
}
#stage {
overflow: hidden;
width: 600px;
height: 400px;
margin: 0 auto;
padding: 5px;
background-color: whiteSmoke;
border: 1px solid #aaa;
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
box-shadow: 0 0 5px #ccc;
position: relative;
}
#player {
position: absolute;
width: 36px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:10:14.710

穷人的例子：[jsfiddle](http://jsfiddle.net/WAHPA/)，但它适用于 FF 和 Chrome。另外，我很好奇你会失去什么风格，总是应用简单的颜色风格。

所以需要更多信息，你能分享完整的css吗？

**更新**：我仍然没有在 chrome 中看到问题（使用小提琴示例）将 #stage 更改为类似

```
#stage {width:600px;height:600px;background-color:#333;position:fixed;top:20;left:0;} 
```

您的播放器与页面在其位置或您可以点击的位置上撒谎。我希望舞台是页面上的固定项目，不移动。我没有看到任何其他原因（在您的 CSS 或 jQuery 中）为什么它会过冲。

​</p>

# php - 在 ActionScript 中解析 PHP 返回“未定义”

> ID：12613827
> 
> 赞同：0
> 
> 时间：2012-09-27T03:52:52.420
> 
> 标签：php, flash, parsing, actionscript, undefined

我知道以前有人问过这个问题，但即使在访问了类似的问题之后我也没有成功。我目前正在开发一个 Flash 项目，该项目涉及能够创建一个帐户并登录。但是，我一直在尝试解析 PHP 输出时得到“未定义”。

这是包含代码的函数的 ActionScript 3.0 代码。

```
function gosubmit(event:MouseEvent) {
    if (username.text != "" && password.text != "") {
        var phpVars:URLVariables = new URLVariables();
        var phpFileRequest:URLRequest = new URLRequest();
        phpFileRequest.url = "php/controlpanel.php";
        phpFileRequest.method = URLRequestMethod.POST;
        phpFileRequest.data = phpVars;

        var phpLoader:URLLoader = new URLLoader();
        phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
        phpLoader.addEventListener(Event.COMPLETE, execResult);

        phpVars.username = username.text;
        phpVars.password = password.text;

        phpLoader.load(phpFileRequest);
        phpLoader.addEventListener(Event.COMPLETE, execResult);

        function execResult(event:Event) {
            trace(event.target.data.execResult);
        }
    } 
```

这是**php/controlpanel.php 中的 PHP 代码。**

```
<?php

mysql_connect("localhost", "root", "password");
// change localhost to something else later
// change password to something else later
mysql_select_db("game");

$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string($_POST['password']);
$salt_mysql = mysql_query("SELECT salt FROM players WHERE username='".$username."'"); 
$salt = salt_row["salt"];    

$unhashed_password = $password.$salt;
$password = hash("SHA256", $unhashed_password); 

$exec_mysql = mysql_query("SELECT * FROM players WHERE username='".$username."' AND password='".$password."'");

if (mysql_num_rows($exec_mysql)) == 1 {
    echo "execResult=login_accepted";
}

if (mysql_num_rows($exec_mysql)) == 0 {
    echo "execResult=login_rejected";
}

else {
    echo "execResult=error";
}

?> 
```

我已经将我的代码与多个源进行了比较，甚至从源中复制了整个项目，试图找出我做错了什么，但收效甚微。但是，我发现了一些奇怪的东西。出于纯粹的实验，我将以下内容放入**controlpanel.php**：

```
=&execResult=test 
```

而且，我没有得到“未定义”，而是得到了“测试”。奇怪的是我只使用了那一行代码；没有`<?php`标签或任何东西。此外，如果我在此之外添加更多代码，无论我输入哪种类型的代码，它总是会按字面意思显示在 Flash 输出中。所以我现在可以硬编码一个值并将其返回到 Flash 中，但这不是我需要的。我需要能够根据条件确定一个值并将其自动返回到 Flash 中。

谁能帮我吗？我真的很难过。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:41:37.583

似乎您正在从编辑器/调试器执行闪存，（如果您正在使用跟踪功能检查结果）。

然后使用相对 url 请求“php/controlpanel.php”就像在本地打开文件而不从服务器执行 php 指令一样。

也许这就是为什么您从字面上获得所有 php 代码，或者当您仅将“=&execResult=test”作为 php 文件的内容时获得正确值的原因。

尝试使用带有 http:// 的绝对 url 以执行涉及服务器和 php 执行的 http 请求。

# android - 如何根据屏幕大小调整 webview 对象/文本的大小

> ID：12613832
> 
> 赞同：1
> 
> 时间：2012-09-27T03:53:13.700
> 
> 标签：android, webview

我正在创建一个可用于所有屏幕尺寸的应用程序。我有不同的小、正常、大和 x-large 布局。但是，我也希望我的 webview 调整其大小（文本/图像），具体取决于屏幕的大小。我尝试研究视口和 values/dimens.xml 但没有运气..这是 dimens.xml 但我不知道如何应用它：（这是针对 xlarge 的）

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<dimen name="body_padding_large"> 20dp </dimen>
<dimen name="text_size_xlarge"> 32sp </dimen>
<dimen name="speaker_image_size"> 64dp </dimen>
</resources> 
```

# vba - 释放内存：如何在使用它们时删除变量-VBA VB ACCESS

> ID：12613834
> 
> 赞同：6
> 
> 时间：2012-09-27T03:53:22.990
> 
> 标签：vba

如何释放内存？

说我有一个字符串

```
 Dim TestStri As String
  TestStri = "Test"

  ' What do i have to type up to get rid of the variable?

  ' I know
  TestStri = Nothing
  ' will give it the default value, but the variable is still there. 
```

我可以对其他变量使用相同的方法，例如 Long、int 等吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T07:18:47.987

我假设您指的是标题所示的 VB6 和 VBA，而不是关键字所示的 VB.Net。

在 VB6 和 VBA 中，字符串变量的内存消耗由字符串长度的固定部分和终止符以及字符串内容本身的可变长度部分组成。请参阅[http://www.aivosto.com/vbtips/stringopt2.html#memorylayout](http://www.aivosto.com/vbtips/stringopt2.html#memorylayout)以获得对此的良好解释。

因此，当您将字符串变量设置为空字符串或 vbNullString 时，您将释放字符串的可变部分而不是固定部分。

其他类型如 long、int、bool 和 date 会消耗固定数量的内存。

你不能在 VB 中完全“释放”局部变量（想想看，有没有任何编程语言可以做到这一点？），而且在大多数情况下，你不会在意，因为局部变量本身（固定部分）通常很小。
我能想到的唯一一种情况是局部变量的内存消耗可能会变大，那就是如果你有深度递归/宽递归的递归函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T18:44:10.763

我走了一条不同的路线：我希望 MemoryUsage 有用。显然不是...

我运行一个遍历多个文件的 vba 脚本（因为访问无法处理任何太大的文件）；并将它们附加到表格中，对其进行转换，然后吐出摘要。

该脚本循环遍历文件并针对每个文件运行宏。

快速的答案是从任务管理器中提取内存使用量，然后如果它超过 1 GB；暂停子程序，以免损坏记录进入。

我们如何做到这一点？

使用 readfile 函数插入此内存使用函数。

您将需要在代码中创建一个 if 语句，说明：

```
dim memory as long

memory = memory_usage

' 1000000 ~ 1 GB

If memory > 1000000 then 

   End Sub

end if

=================================================

[path to file] = "C:\….\ShellOutputfile.txt"

Function Memory_Usage() as Long

Dim lines As Long
Dim linestring As String

Shell "tasklist /fi " & """IMAGENAME EQ MSACCESS.EXE""" & ">" & """[path to file]"""

'get_list_data

lines = CInt(get_listing_data("[path to file]", 1, 0))
linestring = get_listing_data("[path to file]", 2, 4)

linestring = Right(linestring, 11)

linestring = Replace(linestring, " K", "") ' K
linestring = Replace(linestring, " ", "")

lines = CLng(linestring)

Memory_Usage = lines

End Function

=============================

Public Function get_listing_data(PATH As String, Choice As Integer, typeofreading As Integer) As String

    ' parse in the variable, of which value you need.

    Const ForReading = 1, ForWriting = 2, ForAppending = 8

    Dim tmp_var_str As String
    Dim fso, ts, fileObj, filename
    Dim textline As String
    Dim tmp_result As String
    Dim TMP_PATH As String

    Dim tmpchoice As Integer
    Dim tor As Integer

    Dim counter As Integer
    ' type of reading determines what loop is used
    ' type of reading = 0; to bypass; > 0, you are choosing a line to read.
    counter = 0

    TMP_PATH = PATH
    tmp_var_str = var_str
    tmp_result = ""
    tor = typeofreading

    ' choice = 1 (count the lines)
    ' choice = 2 (read a specific line)

    tmpchoice = Choice

    ' Create the file, and obtain a file object for the file.

    If Right(PATH, 1) = "\" Then TMP_PATH = Left(PATH, Len(PATH) - 1)
    filename = TMP_PATH '& "\Profit_Recognition.ini"
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set fileObj = fso.GetFile(filename)

    ' Open a text stream for output.
    Set ts = fileObj.OpenAsTextStream(ForReading, TristateUseDefault)

    Do While ts.AtEndOfStream <> True

        If tmpchoice = 1 Then
            counter = counter + 1
            textline = ts.ReadLine
            tmp_result = CStr(counter)
        End If

        If tmpchoice = 2 Then
            counter = counter + 1

            tmp_result = ts.ReadLine

            If counter = tor Then

                Exit Do

            End If

        End If

    Loop

    get_listing_data = tmp_result

End Function 
```

# .net - 尝试在过渡中创建流行音乐时显示错误

> ID：12613840
> 
> 赞同：0
> 
> 时间：2012-09-27T03:54:24.373
> 
> 标签：.net, wpf

我是 WPF 新手，正在尝试创建一个简单的流行效果。但我收到以下错误“在类型 newwindow 中找不到可附加属性触发器。下面是 XAML 代码：

```
<Window x:Class="WpfApplication6.newwindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="newwindow" Height="295" Width="371">
<Grid Height="257" Width="349">
    <Label Content="Label" Height="28" HorizontalAlignment="Left" Margin="115,0,0,112" Name="label1" VerticalAlignment="Bottom" Width="127" />
    <newwindow.Triggers>
        <EventTrigger RoutedEvent="newwindow.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:2" FillBehavior="HoldEnd" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </newwindow.Triggers>
    </Grid>
</Window> 
```

我正在使用带有 .net 3.5 框架的 VS 2010。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:47:35.370

通过 Window.Triggers 替换 newwindow.Triggers 并通过 Window.Loaded 替换 newwindow.Loaded。

该程序知道您要引用您的新窗口，因为它在您的新窗口窗口的 xaml 中（并考虑重命名您的“新窗口”）^^。

（你可以编辑你的旧问题......）

# gdb - 使用 ccs5 和 CodeSourery 远程调试成功，但使用 eclipse 失败，为什么？

> ID：12613841
> 
> 赞同：0
> 
> 时间：2012-09-27T03:54:25.643
> 
> 标签：gdb, eclipse-cdt, cdi

我在目标上使用gdb和gdbserver，在shell中远程调试成功，ti的ccs5和codesourery，但是当我尝试用eclipse来做ssme的事情时，它失败了。

```
"Failed to execute MI command"

"help maintenance set"

(gdb) help maintenance set 
```

设置 GDB 维护者使用的 GDB 内部变量。配置 GDB 内部的变量以帮助 GDB 的维护

维护集子命令列表：

```
maintenance set dwarf2 -- Set DWARF 2 specific variables
maintenance set internal-error -- Configure what GDB does when internal-error is detected
maintenance set internal-warning -- Configure what GDB does when internal-warning is detected
maintenance set profile -- Set internal profiling 
```

日志：

```
Error in final launch sequence
Failed to execute MI command:
maintenance set python print-stack off
Error message from debugger back end:
Undefined maintenance set command: "python print-stack off".  Try "help maintenance set". 
```

# c++ - 将引用类型传递给变量参数列表

> ID：12613843
> 
> 赞同：1
> 
> 时间：2012-09-27T03:54:54.120
> 
> 标签：c++

```
int g_myInt = 0;
int& getIntReference() { return g_myInt; }

void myVarArgFunction( int a, ... ) {
  // .........
}

int main() {
  myVarArgFunction( 0, getIntReference() );
  return 0;
} 
```

在上面的（未编译和未经测试的）C++ 代码中，将 an`int&`传入变量参数列表是否有效？还是仅按值传递是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:26:45.567

C++03 标准的第 5.2.2.7 节说首先执行左值到右值的转换，因此您的函数应该接收 int 的副本而不是引用。

我使用 g++ 4.6.3 尝试了这个程序：

```
#include <iostream>
#include <stdarg.h>

int g_myInt = 7;
int& getIntReference() { return g_myInt; }

void myVarArgFunction( int a, ... )
{
  va_list ap;
  va_start(ap,a);
  int value = va_arg(ap,int);
  va_end(ap);
  std::cerr << value << "\n";
}

int main(int,char **)
{
  myVarArgFunction( 0, getIntReference() );
  return 0;
} 
```

并得到 7 的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:17:37.067

不，传入引用是无效的，因为它是非 POD 类型。

从规范：

> 如果参数具有非 POD 类类型，则行为未定义。

请参阅[有关](https://stackoverflow.com/questions/2983270/using-a-function-with-variable-argument-strings)传递非 POD 的 std::string 的相关问题。
参考代码：[http ://codepad.org/v7cVm4ZW](http://codepad.org/v7cVm4ZW)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T04:17:23.027

是的，您可以像这里一样传递对 int 的引用。如果您在函数 myVarArffunction 中更改了该参数，您将更改全局变量 g_myInt...

# hadoop - 在 HDFS 中查找超过 N 天的目录

> ID：12613848
> 
> 赞同：10
> 
> 时间：2012-09-27T03:55:53.440
> 
> 标签：hadoop, hdfs

可以使用 hadoop fs -ls 查找所有早于 N 天（从当前日期开始）的目录吗？

我正在尝试编写一个清理例程来查找和删除 HDFS 上的所有目录（匹配模式），这些目录是在当前日期前 N 天创建的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T08:33:24.317

此脚本列出所有早于 的目录`[days]`：

```
#!/bin/bash
usage="Usage: $0 [days]"

if [ ! "$1" ]
then
  echo $usage
  exit 1
fi

now=$(date +%s)
hadoop fs -lsr | grep "^d" | while read f; do 
  dir_date=`echo $f | awk '{print $6}'`
  difference=$(( ( $now - $(date -d "$dir_date" +%s) ) / (24 * 60 * 60 ) ))
  if [ $difference -gt $1 ]; then
    echo $f;
  fi
done 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-15T15:29:39.210

如果你碰巧使用`CDH`的是 Hadoop 的发行版，它带有一个非常有用的[HdfsFindTool](http://www.cloudera.com/documentation/enterprise/latest/topics/search_hdfsfindtool.html)命令，它的行为类似于 Linux 的`find`命令。

如果您使用的是默认包裹信息，请按照以下步骤操作：

```
hadoop jar /opt/cloudera/parcels/CDH/jars/search-mr-*-job.jar \
org.apache.solr.hadoop.HdfsFindTool -find PATH -mtime +N 
```

您将 PATH 替换为搜索路径，将 N 替换为天数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T14:03:03.753

对于真正的集群，使用 ls 不是一个好主意。如果您有管理员权限，则更适合使用 fsimage。

我修改上面的脚本来说明想法。

首先，获取 fsimage

```
curl "http://localhost:50070/getimage?getimage=1&txid=latest" > img.dump 
```

将其转换为文本（与 lsr 给出的输出相同）

```
hdfs oiv -i img.dump -o fsimage.txt 
```

脚本：

```
#!/bin/bash
usage="Usage: dir_diff.sh [days]"

if [ ! "$1" ]
then
  echo $usage
  exit 1
fi

now=$(date +%s)
curl "http://localhost:50070/getimage?getimage=1&txid=latest" > img.dump
hdfs oiv -i img.dump -o fsimage.txt
cat fsimage.txt | grep "^d" | while read f; do 
  dir_date=`echo $f | awk '{print $6}'`
  difference=$(( ( $now - $(date -d "$dir_date" +%s) ) / (24 * 60 * 60 ) ))
  if [ $difference -gt $1 ]; then
    echo $f;
  fi
done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-24T09:46:50.993

hdfs dfs -ls /hadoop/path/*.txt|awk '$6 < "2017-10-24"'

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-17T11:44:48.887

我没有`HdfsFindTool`，也没有`fsimage`from `curl`，而且我不太喜欢使用and循环的`ls`to 。但我很欣赏这些答案。`grep``while``date` `awk``hadoop``awk`

我觉得它可以只用一个`ls`，一个`awk`，也许一个`xargs`。

我还添加了在选择删除文件之前列出文件或汇总文件的选项，以及选择特定目录。最后我离开了目录，只关心文件。

```
#!/bin/bash
USAGE="Usage: $0 [N days] (list|size|delete) [path, default /tmp/hive]"
if [ ! "$1" ]; then
  echo $USAGE
  exit 1
fi
AGO="`date --date "$1 days ago" "+%F %R"`"

echo "# Will search for files older than $AGO"
if [ ! "$2" ]; then
  echo $USAGE
  exit 1
fi
INPATH="${3:-/tmp/hive}"

echo "# Will search under $INPATH"
case $2 in
  list)
    hdfs dfs -ls -R "$INPATH" |\
      awk '$1 ~ /^[^d]/ && ($6 " " $7) < '"\"$AGO\""
  ;;
  size)
    hdfs dfs -ls -R "$INPATH" |\
      awk '$1 ~ /^[^d]/ && ($6 " " $7) < "'"$AGO"'" {
           sum += $5 ; cnt += 1} END {
           print cnt, "Files with total", sum, "Bytes"}'
  ;;
  delete)
    hdfs dfs -ls -R "$INPATH" |\
      awk '$1 ~ /^[^d]/ && ($6 " " $7) < "'"$AGO"'" {print $8}' | \
      xargs hdfs dfs -rm -skipTrash
  ;;
  *)
    echo $USAGE
    exit 1
  ;;
esac 
```

我希望其他人觉得这很有用。

# javascript - alert() 整个多维对象

> ID：12613853
> 
> 赞同：2
> 
> 时间：2012-09-27T03:56:59.883
> 
> 标签：javascript, arrays, object, alert, stringify

**我的整个代码示例在下面和 jsFiddle 上：http: [//jsfiddle.net/rEhvt/](http://jsfiddle.net/rEhvt/)。**

我正在尝试`alert()`我的多维 JavaScript 对象。如果我`alert()`对象的单个属性 - 它的工作原理。例如：

```
alert(votes['77777'].stay); 
```

但是，如果我尝试`alert()`整个对象，那么我会得到很多`NULL`s 或空白。我尝试了以下方法：

```
alert(JSON.stringify(votes));//returns lots of NULLs

alert(votes.join('\n'));//returns lots of blanks 
```

我的意图是最终将对象发送到 localStorage

```
localStorage['votes']=JSON.stringify(votes); 
```

并用

```
retrievedVotes=JSON.parse(localStorage['votes']) 
```

但是，我希望首先能够看到对象结构。这是我第一次尝试使用 JavaScript 理解多维对象，因此非常感谢您提供的任何帮助！下面是我的所有代码，它也在 jsFiddle 上：http: [//jsfiddle.net/rEhvt/](http://jsfiddle.net/rEhvt/)。

```
//Movie #1
var movieID = 55555;
var stay = 'yes';

var votes = [];
votes[movieID]=[];
votes[movieID].stay = stay;

var scenes = 1;
votes[movieID].scenes = scenes; 

//Movie #2
var movieID = 77777;
var stay = 'no';

var votes = [];
votes[movieID]=[];
votes[movieID].stay = stay;

var scenes = 0;
votes[movieID].scenes = scenes; 

//Alert Single Item from votes
alert(votes['77777'].stay);

//Alert entire object
alert(JSON.stringify(votes));//returns NULLs

//Alert entire object
alert(votes.join('\n'));//returns lots of blanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:00:14.887

```
var movieID = 55555;
votes[movieID] 
```

这为该电影设置了第 55555 票指数！这就是为什么你有大量的空白。77777 也是如此。

如果你这样做

```
console.log(votes.length); 
```

你会看到这个结果：

```
 77778 
```

另一个问题，当你制作第二部电影时，你完全擦除了数组`var votes = [];`

您想创建对象而不是数组。那是使用花括号`{ }`而不是`[ ]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:00:56.700

您可以在定义变量时使用`{}`而不是。`[]``votes`

当您定义数组并通过索引设置值时，如果它之前没有元素，它会用空值填充它。例如代码：

```
var arr = [];
arr[5]​ = 0;
alert(JSON.stringify(arr));​​​ 
```

将提供`[null,null,null,null,null,0]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:01:42.873

使用对象`{}`而不是数组`[]`...设置`votes[7777]`将重新索引数组以容纳 7,778 个元素...具有大量未定义的元素（`JSON.stringify()`将转换为`null`）。

另外，您正在数组上设置命名属性：

```
votes[movieID]=[];
votes[movieID].stay = stay; 
```

[这是一个使用对象（小提琴](http://jsfiddle.net/rEhvt/2/)）的功能示例：

```
var votes = {
    // Movie #1
    '55555': { 
        stay: 'yes',
        scenes: 1,
        outtakes: 0,
        enhanced: 0,
        teaser: 0
    },
    // Movie #2
    '77777': { 
        stay: 'no',
        scenes: 0,
        outtakes: 0,
        enhanced: 0,
        teaser: 0
    }   
};

console.log(votes[77777].stay);
console.log(votes); 
```

[并在您提供的代码（小提琴](http://jsfiddle.net/rEhvt/4/)）中进行一对一的更改：

```
//Movie #1
var movieID = 55555;
var stay = 'yes';

var votes = {}; // changed to {}
votes[movieID]= {}; // changed to {}
votes[movieID].stay = stay;

var scenes = 1;
votes[movieID].scenes = scenes; 
var outtakes = 0;
votes[movieID].outtakes = outtakes; 
var enhanced = 0;
votes[movieID].enhanced = enhanced; 
var teaser = 0;
votes[movieID].teaser = teaser; 

//Movie #2
var movieID = 77777;
var stay = 'no';

//var votes = []; removed
votes[movieID]= {};  // changed to {}
votes[movieID].stay = stay;

var scenes = 0;
votes[movieID].scenes = scenes; 
var outtakes = 0;
votes[movieID].outtakes = outtakes; 
var enhanced = 0;
votes[movieID].enhanced = enhanced; 
var teaser = 0;
votes[movieID].teaser = teaser; 

//Alert Single Item from votes
alert(votes['77777'].stay);

//Alert entire object/array
alert(JSON.stringify(votes));//returns NULLs​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T04:03:24.353

您正在使用`array`，但您需要的是对象。

改变

```
var votes = [];
votes[movieID]=[]; 
```

到

```
var votes = {};
votes[movieID]={}; 
```

等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T04:05:37.680

### `alert`不是调试工具

您说您希望“首先能够看到对象结构”，因此您应该使用适当的开发人员工具。您的浏览器可能有这些，请按`F12`。如果您使用 Firefox，请安装 Firebug。

然后你可以使用类似的命令`console.log(votes)`，整个东西都会输出到开发者控制台，你可以像树一样用鼠标导航它。

如果你真的想递归`.toString()`每个对象然后`alert`它，这是可能的，但我看不出有什么好的理由这样做。

# authentication - 应用程序的身份验证机制

> ID：12613859
> 
> 赞同：0
> 
> 时间：2012-09-20T07:20:09.193
> 
> 标签：authentication, ldap, kerberos, ntlm

如果我希望我的应用程序对其他服务进行身份验证，最佳实践是什么？

假设我希望我的应用程序（编程语言无关紧要）访问文件共享或存储库，但我不想向用户询问密码。另外，我不想在我的应用程序代码中存储密码。我还可以做些什么？到目前为止，我只找到了 2,5 个选项：

1.使用集成 Windows 身份验证 - 但这显然只能在 Windows 上工作

2.使用客户端证书并让服务在允许访问之前对其进行验证

3.使用带有客户端证书的 LDAP/RADIUS/CAS

还有别的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:44:35.697

总是有好的旧[Kerberos](http://web.mit.edu/kerberos/)。有点陈旧，但可能是你正在尝试做的一个非常有趣的竞争者。

# html - 我可以将 HTML 数据属性指定为真/假还是必须是字符串？

> ID：12613864
> 
> 赞同：0
> 
> 时间：2012-09-27T03:58:37.193
> 
> 标签：html, css

我有以下代码：

```
<li>
    <a class="button accessLink"
    data-disabled="no"
    data-href="/MyAccount/Access/Logout"
    title="Logout"><span class="smaller">LOGOUT</span></a>
</li> 
```

我将 data-disabled 指定为“否”，但是否可以使用值 true / false ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T03:59:57.803

不，HTML5 data-* 属性的值是字符串。

您当然可以使用字符串`"true"`和`"false"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:26:12.073

是的，您可以在 HTML5 中，除非您使用 XHTML 序列化（在这种情况下，应用正常的 XML 规则）。

在 HTML5 的 HTML 序列化中，[属性语法](http://www.w3.org/TR/html5/syntax.html#attributes-0)允许单独使用属性名称，在这种情况下，隐含的值是空字符串。在脚本（或样式）中使用`data-`属性时，您可以使用测试属性是否存在的构造。

您可以查看[http://validator.nu/](http://validator.nu/)是否接受类似`<a data-disabled>foo</a>`.

# iphone - 从 Voscast 服务器流式传输音频

> ID：12613871
> 
> 赞同：0
> 
> 时间：2012-09-27T03:59:17.447
> 
> 标签：iphone, xcode, audio, streaming, audio-streaming

我正在开发一个应用程序，我想基本上是一个无线电风格的应用程序。我有一个网站设置，它使用 Voscast 播放我设置的内容。有没有什么好的教程来设置你可以从你的 voscast 网站流式传输的 iPhone 应用程序，并从当前播放的内容中提取元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:39:33.353

它有点晚了，但您可以使用 html5 播放器将其添加到您的 HTML 代码中：

```
<iframe width="150" scrolling="no" height="30" frameborder="0" src="http://cdn.voscast.com/player/player.php?host=[yourHostHere]&port=[yourPortHere]"></iframe> 
```

# xcode - 升级到 Xcode 4.5 后构建没有派生数据

> ID：12613873
> 
> 赞同：4
> 
> 时间：2012-09-27T03:59:42.093
> 
> 标签：xcode, macos, xcode4

我有一台装有 Mac OS X 10.7.5 的 MacBook Pro。我使用 Xcode 4.4 进行 iOS 开发，最近升级到 Xcode 4.5。

对于我的应用程序，我构建了一些它所依赖的第三方库，这些库需要放置在某个位置，以便我的应用程序可以获取并使用它们。但是，我无法找到最近构建的库，因为即使 Xcode 表示库构建成功，在 Organizer 中也没有任何可用的派生数据。

我可以做些什么来确定这些库的构建位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T10:22:50.373

在 Xcode 4.5 中查看 Preferences->Locations。

这显示了您的派生数据位置实际位于文件系统上的位置。

单击派生数据路径旁边的箭头以在 Finder 中显示路径。

我最近从 Xcode 4.3.3 升级，发现构建位置已经自动更改为自定义，所以我的（调试）构建产品现在在：

~/Library/Developer/Xcode/DerivedData/Build/Products/Debug

我猜苹果已经做出了这个改变来简化构建产品在一个位置的位置。例如，在 Xode 4.3.3 中，构建产品放置在：

~/库/开发者/Xcode/DerivedData/XXX

其中 XXX 是根据您的 Xcode 项目名称随机生成的文件夹。

我还发现在 Finder 中显示隐藏文件夹很有用，这样您就可以实际浏览 Library 文件夹的内容。我使用免费的 Onyx 工具来启用隐藏文件夹的显示。

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T14:40:36.790

我进入管理器，右键单击不再生成派生数据的项目（即使我可以看到它是......只是删除按钮变灰）并将其从管理器中删除。当我重新打开项目时，它的按钮再次可用

# c# - 存储数据数组的实体框架

> ID：12613875
> 
> 赞同：0
> 
> 时间：2012-09-27T04:00:00.820
> 
> 标签：c#, sql-server, entity-framework, data-modeling

我已经开始尝试使用 Entity Framework Code-First，因为它看起来是一种快速启动和运行数据库的好方法。我来自 PostgreSQL 背景，它支持表中的数组类型，例如`time[]`. 我的问题有两个；SQL Server 是否支持数组类型，如果支持，我如何在 EF 中使用它们？如果它们不受支持，那么表示此数据的替代方法是什么？

```
table Venue
    openhours time[] 
```

**编辑：**上面的数组旨在存储一周中每一天的不同时间——例如，一个场所可能在不同的周末到工作日有不同的开放时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:26:56.943

SQL Server 不支持数组类型。从您的示例模式推断，我认为等效的 EF POCO 如下：

```
public class Venue
{
   public int VenueId { get; set; }
   public DateTime OpenHour { get; set; }
   public DateTime CloseHour { get; set; }
} 
```

查找`Venue`在给定时间是否打开只需要一个范围查询，`Venue.Where(a => a.OpenHour <= time && a.CloseHour >= time)`. 当然，这是一个非常简单的例子。您很可能希望将场地时间存储在另一个表中。但我希望这可以让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:24:39.900

不，不支持，您需要将您的表存储`openhours`在一个单独的表 ( `VenueOpenhours`) 中，并带有表的外键`Venue`。

# grep - 将 grep 与 watch 和 netstat 命令结合使用

> ID：12613877
> 
> 赞同：20
> 
> 时间：2012-09-27T04:00:30.027
> 
> 标签：grep, watch

红帽企业 Linux 服务器版本 5.4 (Tikanga) 2.6.18-164.el5

我正在尝试将 watch 命令与 netstat 结合使用来查看使用某些端口的 2 个程序。

但是，我在下面使用的命令对这两个词都不起作用：

```
watch -n1 "netstat -upnlt | grep gateway\|MultiMedia" 
```

这是对两个程序名称进行 grep 的正确方法吗？

如果我使用一个就可以了，但两者一起不起作用。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-27T04:07:39.857

对于您需要的 grep：

```
"grep gateway\|MultiMedia" 
```

所以也许尝试：

```
watch -n1 'netstat -upnlt | grep "gateway\|MultiMedia"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-05T08:10:19.983

还有一种新的做事方式...... grep -E 很好且可移植（或 egrep，这对于 grep -E 在 linux&bsd 上非常快捷），因此您不必逃避引用。从手册页：

`-E Interpret pattern as an extended regular expression (i.e. force grep to behave as egrep).`

所以...

`watch "netstat -upnlt | grep -E 'gateway|multimedia'"`

或者

`watch "netstat -upnlt | egrep 'gateway|multimedia'"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-21T17:03:00.653

我在监控 ssh 连接时遇到了类似的问题。

```
> netstat -tulpan|grep ssh
tcp        0      0 192.168.2.52:58072     192.168.2.1:22          ESTABLISHED 31447/ssh 
```

但是`watch -n 1 'netstat -tulpan|grep ssh'`没有显示输出（除了来自手表的消息）。如果我将其更改为`watch -n 1 'netstat -tulpan|grep ":22"'`我得到所需的输出行。当 netstat 通过 watch 运行时，似乎忽略了 -p 选项。奇怪的。

# html - 如何为以下内容编写 SQL Server 存储过程？

> ID：12613884
> 
> 赞同：0
> 
> 时间：2012-09-27T04:01:15.913
> 
> 标签：html, sql, stored-procedures

我有一个如下表：

```
create table testjob
(
   jobid int,  
   jobname varchar(100),  
   time float,  
   name varchar(50)  
)

insert into testjob values ( 1001,'java work',4.5,'arjun')  
insert into testjob values ( 1005,'sql work',10,'arjun')  
insert into testjob values ( 1010,'.net work',7.5,'arjun')  
insert into testjob values ( 1040,'java work',5.5,'ravi')  
insert into testjob values ( 1023,'php work',2.5,'arjun')  
insert into testjob values ( 1027,'.net work',3.5,'ravi') 
```

我想要一个程序，以便我的输出如下 html 格式，如下所示：

```
Name: Arjun (24.5 Hrs spent)

jobname Time

java work 4.5  
sql work 10  
.net work 7.5  
php work 2.5    

Name: Ravi(9 Hrs spent)

jobname time

java work 5.5  
.net work 3.5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:17:36.967

受到[这个](https://stackoverflow.com/questions/4787498/tsql-aggregate-string-for-group-by)和[这个](https://stackoverflow.com/questions/273238/how-to-use-group-by-to-concatenate-strings-in-sql-server)和[这个的启发](https://stackoverflow.com/questions/3202415/sqlxml-without-xml-encoding)

```
--detail template
declare @strDTmp nvarchar(200) = '<td>[job]</td><td>[hrs]</td>' 
--sum template
declare @strSTmp nvarchar(200) = 'Name: [name] ([hrs] Hrs spent)' 
--Table head
declare @strThead nvarchar(200) = '<th>jobname</th><th>Time</th>'

  select 
    replace(replace(@strSTmp,'[name]',name),'[hrs]',stime) h1
    ,(
      select
        tr
      from
        (
        select
          0 pos
          ,name
          ,@strThead tr
        from
          testjob
        group by
          name
        union all
        select
          1 pos
          ,name
          ,replace(replace(@strDTmp,'[job]',jobname),'[hrs]',time) tr
        from
          testjob
        ) t
      where
        t.name = sumtable.name
      order by 
        pos
      FOR XML PATH(''), root('table'), type
      ) 
  from
    (
    select
      name
      ,sum(time) stime
    from
      testjob sumtable
    group by
      name
    ) sumtable
  FOR XML PATH ('') 
```

[在 SQL Fiddle 上进行测试](http://www.sqlfiddle.com/#!3/72ce4/150/0)

结果：

```
<h1>Name: arjun (24.5 Hrs spent)</h1>
<table>
  <tr><th>jobname</th><th>Time</th></tr>
  <tr><td>java work</td><td>4.5</td></tr>
  <tr><td>sql work</td><td>10</td></tr>
  <tr><td>.net work</td><td>7.5</td></tr>
  <tr><td>php work</td><td>2.5</td></tr>
</table>
<h1>Name: ravi (9 Hrs spent)</h1>
<table>
  <tr><th>jobname</th><th>Time</th></tr>
  <tr><td>java work</td><td>5.5</td></tr>
  <tr><td>.net work</td><td>3.5</td></tr>
</table> 
```

# ios - 遍历 NSMutableDictionary 并更改值

> ID：12613885
> 
> 赞同：1
> 
> 时间：2012-09-27T04:01:24.777
> 
> 标签：ios, xcode, nsmutabledictionary

感谢您在以下方面提供任何帮助：

我正在加载以下 JSON 数据..

```
(
    {
    name = Facilities;
    versiondate = "1972-01-01";
},
    {
    name = Services;
    versiondate = "1972-01-01";
},
    {
    name = ThingsToDo;
    versiondate = "1972-01-01";
}
) 
```

进入以下代码：

```
NSMutableDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:updateData options:kNilOptions error:&errorString]; 
```

然后，我尝试遍历 Dictionary 并尝试将*versiondate*更改为今天的日期。我花了两个多小时试图做到这一点......但没有运气！我正在努力理解 MutableCopies 等。我在这方面相对较新......

所以，我正在尝试以下操作：

```
for (NSMutableDictionary *item in dictionary)
{
    NSMutableDictionary *newdict = [item mutableCopy];
    NSLog(@"I have item as: %@",newdict);
    NSLog(@"I have the date as: %@", [newdict objectForKey:@"versiondate"]);
    [newdict setObject:[NSDate date] forKey:@"versiondate"];
    NSLog(@"I now have the date as: %@", [newdict objectForKey:@"versiondate"]);
    NSLog(@"I have item as: %@",newdict);
    item = newdict;
}

NSLog(@"New Dictionary now becomes: %@", dictionary); 
```

并且忽略 NSLog 的东西，我没有运气。我只是想将*versiondate*更改为今天的日期，然后为每个*versiondate*保存它。叹。

任何帮助告诉我我的“明显”错误在哪里将不胜感激。我将 item 声明为 NSMutableDictionary ...那么为什么我必须定义*newdict*？一旦我更新了值，我如何将它“保存”回我原来的字典中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:09:16.117

如果在反序列化 JSON 时需要可变字典和数组，请传递选项`NSJSONReadingMutableContainers`. 否则，出来的东西是*不可*变的。并且这样对待它会导致`NSInternalInconsistencyException`你看到的。

您可以创建子字典的可变副本，如您显示的代码中所示，但这不会更改原始顶级容器的内容。（并且将副本分配回循环底部的原始变量完全没有完成任何事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:04:08.753

在行中：

```
NSMutableDictionary *newdict = [item mutableCopy]; 
```

您正在创建 的*副本*，`item`然后修改副本。相反，只需`item`直接修改：

```
[item setObject:[NSDate date] forKey:@"versiondate"]; 
```

我知道您要做什么，`item = newdict`但这只会更改本地指针指向的对象，`item`而不会*更改*.`dictionary`

# python - 查找两个 numpy 结构化数组之间的差异

> ID：12613888
> 
> 赞同：0
> 
> 时间：2012-09-27T04:01:43.050
> 
> 标签：python, numpy

我有一个可能包含重复项的数据集。为了在数据集中找到重复项，我将索引放入一个 numpy 结构化数组中，对数组进行排序，从唯一值创建另一个数组，然后比较两个数组的长度：

```
data = np.zeros(t_len, dtype={'names':['date', 'symbol'], 'formats':['i8', 'S16']})
data[:] = [(x['date'], x['symbol']) for x in tbl.iterrows()]
data.sort(order=['date', 'symbol'])
data2 = np.unique(data)
duplicates = False

if len(data) != len(data2):
    duplicates = True
    print "There are duplicates"

if not duplicates:
    print "No duplicates found" 
```

现在，我真正想做的是确定包含重复项的索引。例如，如果我有一个数据集，其中包含：

```
array([12322323,'IBM'], [12322323,'IBM'], [12322323,'MSFT'], [12322323,'IBM']) 
```

我想知道一个带有 array([12322323,'IBM']) 的数组

我已经研究过使用独特的和差异的功能，但那些似乎没有做这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:38:53.703

为简单起见，我将只使用一个整数数组`x`作为输入：

```
>>> x = np.array([20, 10, 30, 10, 60, 30, 10]) 
```

使用 numpy 1.9.0 或更高版本，我们可以使用[`np.unique`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html)来获取唯一元素，使用参数`return_counts=True`以便也返回每个唯一元素的出现次数

```
>>> u, counts = np.unique(x, return_counts=True) 
```

*对于旧版本的 numpy，可以使用`np.unique`参数`return_inverse=True`来获取显示如何`x`从唯一元素数组重新创建的数组：*

 *```
>>> u, inv = np.unique(x, return_inverse=True)
>>> u
array([10, 20, 30, 60])
>>> inv
array([1, 0, 2, 0, 3, 2, 0]) 
```

现在使用`bincount`来计算每个元素的出现次数：

```
>>> counts = np.bincount(inv)
>>> counts
array([3, 1, 2, 1]) 
```*  *所以现在我们有了`counts`，它告诉我们每个元素在数组中出现的次数。我们可以拉出有重复的元素，如下所示：

```
>>> dups = u[counts > 1]
>>> dups
array([10, 30]) 
```*

# javascript - Javascript 中的美元描述

> ID：12613889
> 
> 赞同：-2
> 
> 时间：2012-09-27T04:01:45.947
> 
> 标签：javascript, regex

有人请解释第 6 行最后使用的美元符号的用法：

```
function isAlphabet(elem) {
    var alphaExp = /^[a-zA-Z]+$/;

    if(elem.value.match(alphaExp))  
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:09:44.427

整个表达式，解释

```
 |-------------- Match the start of the line
                |         ----- Match the 'end of the line
                |         |
var alphaExp = /^[a-zA-Z]+$/;
                 |------|| +-- Close the regular expression
                 |  |   ||
                 |  |   |+---- Match one or more characters from the previous pattern
                 |  |   |----- Close the group
                 |  |--------- Match characters between "a" and "z" and "A" and "Z"
                 |------------ Start a group 
```

整个事情，在英语中的意思是

匹配任何以字符开头的行`a-z`或`A-Z`以相同字符之一结束行的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:02:23.573

这是一个正则表达式。这意味着行的结束。

这个正则表达式匹配的是一个只有字母字符大小写的字符串。

*   `^`表示行的开始
*   `[a-zA-Z]`大写或小写字母字符
*   `+`很多次
*   `$`队伍的尽头

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:02:41.350

在这种情况下，它将正则表达式模式锚定到行尾。模式中的大多数其他地方的 $ 只是一个 $，但最后它是一个行尾锚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:13:11.500

`$`匹配行尾。

`/^[a-zA-Z]+$/`表示所有字符都是字母。

该函数还可以写得更干净，例如：

```
function isAlphabet(elem) {
  return /^[a-z]+$/i.test(elem.value);
} 
```

# asp.net - System.ArgumentOutOfRangeException

> ID：12613890
> 
> 赞同：-3
> 
> 时间：2012-09-27T04:01:56.580
> 
> 标签：asp.net, asp.net-mvc-3

我得到错误

```
System.ArgumentOutOfRangeException: PageNumber cannot be below 1.
Parameter name: pageNumber
Actual value was 0. 
```

当我在控制器中尝试分页列表时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:13:36.300

更多代码将不胜感激，但从我收集的内容看来，您似乎没有设置`PageNumber`变量或将其设置为 0。默认情况下它需要为 1。在你的控制器动作中尝试这样的事情：

```
public ActionResult myAction(int? page) {
    var PageNumber = page ?? 1; // sets PageNumber to 1 if page is null
    ... 
} 
```

# android - 安卓文本视图值

> ID：12613898
> 
> 赞同：1
> 
> 时间：2012-09-27T04:02:56.003
> 
> 标签：android, textview

我有一些问题

我想更改我的 textview 值。当我的代码改变时它会改变

这是代码

```
public class SubMenuActivity extends Activity {
private static final int GALLERY = 0;
private static final int SUBMANU01 = 7;
private static final int MANU01 = 1;
private static final int MANU02 = 2;
private static final int MANU03 = 3;
private static final int MANU04 = 4;
private static final int MANU05 = 5;
TextView tx1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tx1 =(TextView)this.findViewById(R.id.textView1);
   if(tx1.toString()=="1".toString())
   {
       tx1.setText("7");
   }
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    SubMenu fileMenu = menu.addSubMenu(GALLERY, SUBMANU01, Menu.NONE, "File");    
    fileMenu.add(GALLERY, MANU01, Menu.NONE, "new");  
    fileMenu.add(GALLERY, MANU02, Menu.NONE, "open");  
    fileMenu.add(GALLERY, MANU03, Menu.NONE, "save");  
    return true;
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case MANU01:
    case MANU02:
    case MANU03:
    final   String itemid = Integer.toString(item.getItemId());
         tx1.setText(itemid);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

tx1.text 值没有显示 7 ，问题出在哪里？我希望有人能告诉我这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T04:05:50.593

像这样比较

```
 if(tx1.getText().toString().equals("1"))
 {
   tx1.setText("7");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:05:05.573

字符串不能与`==`运算符进行比较，它们可以与`.equals`方法进行比较

所以把你的代码改成这个

```
if(tx1.toString().equals("1"))
 {
   tx1.setText("7");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:06:21.930

代替

```
if(tx1.toString()=="1".toString())    {
    tx1.setText("7");   
} 
```

试试这个

```
if(tx1.getText().toString().equals("1"))    { 
   tx1.setText("7");    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:08:21.323

您需要比较变量，例如`.equal(Object/String)`

```
if(tx1.toString().equals("1"))
 {
   tx1.setText("7");
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T04:19:09.533

在java中“==”表示地址相同，相反，您可以使用来自基本类“object”的.equel()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T04:27:29.210

首先应该打印 txt1 的值。

```
System.out.println("value of tx1:"+tx1.getText.toString());
if(tx1.getText().toString().equals("1"))

 {
   tx1.setText("7");
 } 
```

# r - 如何使用 R 中指定的列名创建空数据框？

> ID：12613909
> 
> 赞同：145
> 
> 时间：2012-09-27T04:04:43.147
> 
> 标签：r, dataframe

> **可能重复：**
> [创建一个空 Data.Frame](https://stackoverflow.com/questions/10689055/create-an-empty-data-frame)

我需要在 R 中创建一个具有指定列名的空数据框。有什么最简单的方法吗？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-09-27T04:14:40.703

只需创建一个`data.frame`长度为 0 的变量

例如

```
nodata <- data.frame(x= numeric(0), y= integer(0), z = character(0))
str(nodata)

## 'data.frame':    0 obs. of  3 variables:
##  $ x: num 
##  $ y: int 
##  $ z: Factor w/ 0 levels: 
```

或创建一个包含 5 列名为 a、b、c、d、e 的 data.frame

```
nodata <- as.data.frame(setNames(replicate(5,numeric(0), simplify = F), letters[1:5])) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-27T04:13:18.593

也许：

```
> data.frame(aname=NA, bname=NA)[numeric(0), ]
[1] aname bname
<0 rows> (or 0-length row.names) 
```

# javascript - 使用 Akamai 在 JS 客户端中自动检测和重定向语言

> ID：12613910
> 
> 赞同：1
> 
> 时间：2012-09-27T04:04:46.880
> 
> 标签：javascript, cdn, akamai, language-detection

我有一个翻译成 18 种语言的网站（有 18 个翻译域）。它还具有基于语言的动态内容，即不同的产品，其中一些仅以特定语言提供。虽然有一个语言选择器，人们可以使用它来切换语言并因此切换站点，但该人以他不知道的语言找到语言选择器的机会并不太高。这是解决问题的关键，尤其是付费广告流量如果不加以处理就会被浪费。

我将 Akamai 用作 CDN，并希望在 JS 中进行检测和重定向，理想情况下是在边缘服务器层上，因此它不是另一个必须返回源服务器的调用。在浏览了他们的所有文档、UI 中的配置选项等之后，我没有看到这样做的方法。

虽然我确实与我的 Akamai 代表取得了联系，并与他们的一位工程师一起提出了解决方案，但我不知道它是否是最好的解决方案，并且对其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:31:31.527

Akamai 有一项名为（我上次检查）“内容定位”的服务，以前称为“Edgescape”。在边缘，Edgescape 为每个传入请求添加一个名为“x-akamai-edgescape”的第 7 层 (http) 标头，并提供有关最终用户的大量信息：

城市、州、国家、邮政编码、区号、ISP、ISP 吞吐量（DSL、卫星）……等等。

一旦您将该信息添加到请求标头中，您（原始服务器）就可以根据该信息做出决定，例如，如果 country=ES，则重定向到 spanish.yourdomain.com。或者，您可以让 Akamai 使用边缘逻辑做出这些决定。他们的服务器可以读取带有国家值的传入 HTTP 标头并在边缘创建重定向。他们甚至可以添加一个 cookie 值，指定在后续请求中点击哪个站点。cookie 的内容仅取决于您的偏好和所需的应用程序行为。

如果您可以访问 Akamai 客户门户，请查找 Edgescape 文档和 ACO（高级缓存优化——读取标头/cookie 并根据它们做出决策的能力）。

祝你好运。

ps Edgescape 和 ACO 是 Akamai 的附加模块，但您可能已经拥有它们，或者能够以很少或免费的成本添加它们作为续约合同的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:04:46.880

虽然不在 UI 本身中，但他们已经设置了一种方法来做到这一点。您为他们提供针对接受语言标头的域映射（是的，我确实认为最好使用接受语言，因为我要在网站上更改的只是语言和语言相关设置），他们的工程师将配置它会在边缘根据该标头自动重定向到正确的域。另外，他们会给那个人一个cookie，以检测他们重定向了他。这样，如果他使用语言选择器或遵循另一种语言特定的链接，它不会再次自动重定向他，但现在让他去他想要的地方 - 所以它不会强迫他选择。

显然，唯一的缺点是，如果我需要更改它，那么我必须重新检查所有内容以修复它，而不是自己动手——除非我忘记了什么。

# c# - 强制 response.Redirect() 在编译时显示损坏的 URL 错误

> ID：12613913
> 
> 赞同：0
> 
> 时间：2012-09-27T04:05:09.580
> 
> 标签：c#, asp.net

如果调用 response.Redirect() 时 URL 不可用，Visual Studio 编译器是否可能显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:10:06.923

不。由于完整的可用 URL 集直到运行时才知道并且完全动态，因此无法在编译/编辑时进行预测。

# resize - iphone/ipad的flexslider调整大小问题

> ID：12613915
> 
> 赞同：1
> 
> 时间：2012-09-27T04:05:14.103
> 
> 标签：resize, flexslider

我以前实现过 flexslider，但这次在 i-phone 或 i-pad 中查看时它没有调整大小。当我调整浏览器窗口的大小时，它也不起作用。请提出任何解决方法。现在我通过在 flexslider.css 文件中添加媒体查询使其工作。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:42:37.613

最后我明白了，问题是因为 Bootstrap 框架。bootstrap 中类名为“span1/2/3..”的元素不会调整超出固定浏览器宽度的大小，即使使用流体结构也是如此。因此，我的 flexslider div 没有调整大小。

我刚刚将 .span 类的固定值从“px”更改为“%”，它就开始工作了。

# javascript - 如何使用 Openlayers 从经度和纬度获取角度

> ID：12613917
> 
> 赞同：0
> 
> 时间：2012-09-27T04:05:35.957
> 
> 标签：javascript, openlayers

OpenLayers 是完全免费的开源 JavaScript，可以轻松地将动态地图放入任何网页。我在我的项目中使用 Openlayers。这是我面临的问题：

使用 OpenLayers 我可以获得经度和纬度，但我想要来自 OpenLayers 的角度。

那么 OpenLayer 中是否有任何 API 可以将纬度和经度转换为角度。我确实尝试在 openlayers“Util”部分找到 API，但无法获得它。

当然有很多数学函数可以做到这一点，但我很好奇只能通过 Openlayers 得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:07:21.520

您可以扩展`feature.geometry`或编写用于角度计算的 util 函数，例如：

```
OpenLayers.Util.angle = function (x, y) {
    return Math.tan(y/x);
} 
```

# java - Java replaceAll Regex 用于特殊字符 [

> ID：12613921
> 
> 赞同：1
> 
> 时间：2012-09-27T04:05:51.883
> 
> 标签：java, regex

我有正则表达式问题。需要正则表达式专家的帮助！这很简单，但我无法让它工作。

我知道如果我想检查文本的开头，我应该使用 ^ 和文本的结尾，我应该使用 $

我想替换`[quote]`为`<a>quote</a>`.

这似乎不起作用..

```
String test = "this is a [quote]"
test.replaceAll("^\\[", "<a>");
test.replaceAll("\\]$", "</a>"); 
```

我希望字符串变成`"this is a <a>quote</a>"`..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T04:22:13.307

如果你想用pair替换`[`and `]`，你需要一次性替换它们。

```
String test = "this [test] is a [quote]";
String result = test.replaceAll("\\[([^\\]]+)\\]", "<a>$1</a>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T04:08:59.887

`^`意味着您正在寻找字符串开头的内容。但是`[`不会出现在字符串的开头，因此您不会有匹配项。做就是了：

```
test.replaceAll("\\[", "<a>");
test.replaceAll("\\]", "</a>"); 
```

此外，您不能就地修改字符串。您必须将输出分配给某些东西。你可以做：

```
test = test.replaceAll("\\[", "<a>").replaceAll("\\]", "</a>"); 
```

也就是说，如果您仍想使用该变量`test`。

# jsp - 欢迎页面在浏览器中不显示完整地址

> ID：12613923
> 
> 赞同：1
> 
> 时间：2012-09-27T04:06:01.650
> 
> 标签：jsp, web.xml

我的 index.jsp 位于 MyApp/web/views。

在我的 web.xml 我已经设置

> ```
> <welcome-file-list>
>     <welcome-file>web/views/index.jsp</welcome-file>
> </welcome-file-list> 
> ```

该页面呈现正常，但在浏览器地址栏中显示：localhost:8080/MyApp

我希望它显示完整的地址，例如 localhost:8080/MyApp/web/views/index.jsp。知道如何制作这个显示器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:28:18.790

如果你想改变地址栏，你必须告诉浏览器执行一个额外的请求（重定向）。添加一个 HTML 页面`MyApp/index.html`，其中包含：

```
<html>
    <head>
        <meta http-equiv="refresh" content="0; URL=web/views/index.jsp" />
    </head>
</html> 
```

使用它，您将不需要您的`<welcome-file-list>`条目。

# .net - 为什么我的 HTTP 缓存标头不起作用？

> ID：12613924
> 
> 赞同：2
> 
> 时间：2012-09-27T04:06:09.000
> 
> 标签：.net, http, httpwebrequest, http-caching

我最近在我的一些 Web 服务响应中添加了一些 HTTP 缓存标头，但到目前为止，它们在客户端还没有为我做任何事情。以下是这些回复之一：

```
HTTP/1.1 200 OK
Cache-Control: public, max-age=60
Transfer-Encoding: chunked
Content-Type: application/vnd.com...
Expires: Thu, 27 Sep 2012 03:40:27 GMT
Server: Microsoft-IIS/7.5
Set-Cookie: DDRSSID=...
X-DDVS-Version: 1.0.0.0
X-Powered-By: ASP.NET
Date: Thu, 27 Sep 2012 03:40:22 GMT 
```

根据 Fiddler 和 REDbot 的说法，这个响应应该是完全可缓存的。这是提琴手所说的：

> public：这个响应可以被任何缓存缓存。
> max-age：此资源将在 1 分钟后过期。[60 秒]

即便如此，响应也不是来自缓存：我在 Fiddler 中看到它们并且`IsFromCache`我的属性`HttpWebResponse`是**false**。这是我请求的内容，fwiw：

```
GET http://floater/rest/folders/folder.20 HTTP/1.1
Accept: application/vnd.com....
Authorization: Basic blahblah
Host: floater 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:49:23.503

事实证明，我的标题没有任何问题。相反，问题在于[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.cachepolicy.aspx)is *not* [`HttpRequestCacheLevel.Default`](http://msdn.microsoft.com/en-us/library/system.net.cache.httprequestcachelevel.aspx)的默认缓存策略。我的错，我猜。

通过将以下行添加到我的请求初始化中，我能够看到我期望的缓存结果：

```
webRequest.CachePolicy = new HttpRequestCachePolicy(HttpRequestCacheLevel.Default); 
```

我在各个方面对此进行测试时遇到的另一个问题是，除非您阅读整个响应（例如，通过读取到[GetResponseStream()](http://msdn.microsoft.com/en-us/library/system.net.webresponse.getresponsestream.aspx)的末尾），否则不会缓存响应。值得庆幸的是，文档中指出了这一点：

> 仅当资源的响应流被检索并读取到流的末尾时，才会将资源的副本添加到缓存中。

# sql - SQLite 查询，“喜欢”

> ID：12613926
> 
> 赞同：18
> 
> 时间：2012-09-27T04:06:12.200
> 
> 标签：sql, sqlite, sql-like

我正在尝试从我的数据库中检索信息。
我有像`Lim Won Mong`和这样的词`Limited`。

如果我进行查询，`SELECT name FROM memberdb WHERE name LIKE '%LIM%'`它会同时显示`Lim Won Mong`和`Limited`我只想要来自 的数据`Lim Won Mong`。

我应该如何重写我的查询？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-27T04:12:37.610

执行以下查询：

```
select name from memberdb where name like '% LIM %' OR name like "LIM %" OR name like "% LIM" OR name like "LIM" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T04:12:06.143

如果你想匹配单词“lim”（所以它匹配“a lim”、“lim a”、“a lim a”和“lim”，但不匹配“limit”或“alim”），你可以使用SQL`REGEXP`关键字，并使用单词边界（`[[:<:]]`和`[[:>:]]`）。这些也匹配空格（空格、制表符、换行符）、字符串开始/结束和一些标点符号。

像这样的东西：

```
SELECT name FROM memberdb WHERE name REGEXP '[[:<:]]LIM[[:>:]]' 
```

请注意，`REGEXP`它不区分大小写（除非使用二进制字符串）。

如果您希望它仅匹配空格，您仍然可以使用`REGEXP`; 这将匹配字符串的开头或空格，然后是“lim”，然后是空格或字符串的结尾：

```
SELECT name FROM memberdb WHERE name REGEXP '(^| )LIM( |$)' 
```

两种解决方案都已在支持的 SQL 版本上进行了测试`REGEXP`（SQLite 3+；所有 Android 都使用 3.5.9 或更高版本）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T04:11:42.727

试试这个：

```
SELECT name 
FROM MEMBERDB 
WHERE name LIKE 'LIM %' OR name LIKE '% LIM'
OR name LIKE '% LIM %' OR name LIKE 'LIM'; 
```

假设你有这样的数据：

```
'LIMITED'
'Lim Won Mong'
'Wang Tat Lim'
'ELIM TED'
'lim'
'Wang LIM tim' 
```

此查询将只返回以下数据：

```
'Lim Won Mong'
'Wang Tat Lim'
'lim'
'Wang LIM tim' 
```

# [看到这个 SQLFiddle](http://sqlfiddle.com/#!7/96f9c/2)

# java - 我可以通过在现有的 web 项目中添加新的 jsp 来创建新的网页吗？

> ID：12613929
> 
> 赞同：0
> 
> 时间：2012-09-27T04:06:26.253
> 
> 标签：java, html, jsp, tomcat, web

如问题中所述，我可以通过将新的jsp添加到现有的Web项目来创建新的网页吗？

我想创建新网页，同时我想重用旧 Web 项目的现有资源（java 类文件等...）

我希望这两个网站能够访问同一个汤姆猫服务器。

我只是这个 Java Web 项目的初学者。对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:55:06.373

是的你可以。但是在你创建一个新的jsp之后，你必须在web.xml中定义url映射，你也可以将这两个网站部署在同一个tomcat中。

# ios - 从通讯录获取信息时出错

> ID：12613933
> 
> 赞同：0
> 
> 时间：2012-09-27T04:06:55.170
> 
> 标签：ios, objective-c, iphone, cocoa

我在从通讯簿中检索一组特定数据时遇到问题。这是代码：

```
- (void) getContacts{    
    ABAddressBookRef ab = ABAddressBookCreate();
    NSMutableArray *retVal = (__bridge NSMutableArray *)(ABAddressBookCopyArrayOfAllPeople(ab));
    CFRelease(ab);

    contact* temp=[[contact alloc] init];
    NSMutableArray* tempArray=[[NSMutableArray alloc]init];

    for(int i=0;i<[retVal count];i++)
        [tempArray insertObject:
          [NSString stringWithFormat:@"%@",
            [temp set2:[NSString stringWithFormat:@"%@",
              [[retVal objectAtIndex:i] kABPersonFirstNameProperty]] 
                  last:[NSString stringWithFormat:@"%@",
                    [[retVal objectAtIndex:i] kABPersonLastNameProperty]] 
                number:[NSString stringWithFormat:@"%@",
                  [[retVal objectAtIndex:i] kABPersonPhoneProperty]]]] atIndex:i];

    _objects=tempArray;

    [self alert:[NSString stringWithFormat:@"%@",_objects] title:@"TEMP"];
} 
```

我得到的错误是关于 kABPerson 属性的。

更多说明：基本上我将地址簿中的所有数据抓取到第一个数组中，然后我手动遍历该数组并尝试检索我的应用程序其余部分所需的数据。

有任何想法吗？

```
Just for more clarification here's my contact.h file:

@interface contact : NSString{
    NSString* first;
    NSString* last;
    NSString* number;
}
@end 
```

这是我的contact.m文件：

```
@implementation contact

- (void) set:(NSString*)first2 last:(NSString*)last2 number:(NSString*)number2{
    first=first2;
    last=last2;
    number=number2;
}

- (contact*) set2:(NSString*)first2 last:(NSString*)last2 number:(NSString*)number2{
    first=first2;
    last=last2;
    number=number2;

    return self;
}

@end 
```

这是那条似乎太长而无法发布的行：

```
//Enter contact into tempArray
    [tempArray insertObject:[NSString stringWithFormat:@"%@",[temp set:[NSString stringWithFormat:@"%@",(__bridge NSString *)(ABRecordCopyValue((__bridge ABMultiValueRef)[retVal objectAtIndex:i],kABPersonFirstNameProperty))] last:[NSString stringWithFormat:@"%@",(__bridge NSString *)(ABRecordCopyValue((__bridge ABMultiValueRef)[retVal objectAtIndex:i],kABPersonLastNameProperty))] number:(__bridge NSString *)ABMultiValueCopyValueAtIndex((__bridge ABMultiValueRef)((__bridge NSString*)ABRecordCopyValue((__bridge ABRecordRef)([retVal objectAtIndex:i]),kABPersonPhoneProperty)), 0)]] atIndex:i]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:28:17.447

`kABPersonFirstNameProperty`是属性**ID**，而不是 Objective-C 对象属性。

也就是说，您不能使用`[[retVal objectAtIndex:i] kABPersonFirstNameProperty]`-- 您将需要像这样访问名字和姓氏：

```
CFStringRef firstName = ABRecordCopyValue ([retVal objectAtIndex:i], kABPersonFirstNameProperty);
CFStringRef lastName = ABRecordCopyValue ([retVal objectAtIndex:i], kABPersonLastNameProperty);
CFStringRef phoneNum = ABRecordCopyValue ([retVal objectAtIndex:i], kABPersonPhoneProperty); 
```

然后不要忘记 ABRecordCopyValue 遵循创建规则 -`CFRelease(firstName)`之后您需要这样做。

# javascript - 来自 Google Places API 的 AJAX 请求返回 null

> ID：12613939
> 
> 赞同：0
> 
> 时间：2012-09-27T04:08:18.363
> 
> 标签：javascript, ruby-on-rails-3, jquery, google-places-api

我正在尝试以 JSON 格式从 Google Places API 检索地点列表。我正在发送 AJAX 请求。

GET 请求发送正确的参数并收到 200 OK 成功消息，但没有响应（每个 firebug）。

**你知道我如何检索 JSON 中的地点列表或将 JSONP 转换为 JSON 吗？**

照片.js

```
$.ajax({
  type: 'GET',
  url:'https://maps.googleapis.com/maps/api/place/search/json',
  dataType: 'json',
  data: {
   'location' : data.location.latitude+","+data.location.longitude,
   'radius' : 500,
   'key' : "mykeyhere",
   'sensor' : "false",
   'keyword' : "hotel"
   },

    success: function(hotel){
    console.log(hotel);
 }
}); 
```

我尝试将 dataType 更改为 jsonp 并且我能够得到所有列表的响应，但我收到`"html_attributions" : []`错误，因为它需要 JSON。响应如[https://developers.google.com/places/documentation/中所述搜索](https://developers.google.com/places/documentation/search)，但我收到一个无法识别的萤火虫错误`html_attributions`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:35:00.400

好的！我有一个解决方案（感谢 Chris Green）！就用这个

```
function produceSearch(term) {
    var _params = {
        radius : 11000,
        name : term,
        location : app.modules.mapsProvider.getLatLng(),
        key : 'KEY'
    };
    var service = new google.maps.places.PlacesService(map_inst);
    service.search(_params, requestSucceeded);
} 
```

而不是 jQuery Ajax 函数:)

[https://developers.google.com/maps/documentation/javascript/places#place_search_requests](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)

# string - 查找给定句子中出现的单词

> ID：12613941
> 
> 赞同：0
> 
> 时间：2012-09-27T04:08:21.753
> 
> 标签：string, algorithm

我有单词列表。字数约为100万。

我在运行时有字符串，我必须检查列表中的哪个单词存在于字符串中并返回该单词（不需要返回句子中出现的所有单词，返回第一个也足以满足要求）。

一种解决方案是逐个检查字符串中的所有单词，但效率低下。

有人可以指出任何有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:14:08.157

使用[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)算法。虽然一百万字也不算多。您还可以将文本正文转换为[Trie](http://en.wikipedia.org/wiki/Trie)结构，然后使用它来检查您的搜索列表。有一种特殊的 Trie，称为[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)，专门用于全文搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:10:54.770

将您的单词列表放在树或哈希表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:13:30.307

除非您的单词列表是有序的（或插入到有序二叉树等有效的数据结构中）以执行二进制搜索，否则您提出的解决方案是最有效的解决方案。

# php - 无法在 windows 7 x64 机器上的 wamp2.2 上安装 apc，wamp 也是 x64。请帮忙

> ID：12613944
> 
> 赞同：3
> 
> 时间：2012-09-27T04:08:39.233
> 
> 标签：php, apache, wamp, apc

我一直试图在 Windows 7 x64 上的 wamp 2.2 上安装 apc，但无济于事。我下载了没有 memprotect 的 php_apc 并且能够在 wamp 的任务切换器中选择它，我还添加了扩展名和以下内容：

```
[APC]
apc.enabled = 1
apc.shm_segments = 1
apc.shm_size = 64M
apc.max_file_size = 10M
apc.stat = 1 
```

[到 php.ini，接下来，从http://svn.php.net](http://svn.php.net)下载 apc.php ，但是无论我做什么，我的 phpinfo() 文件都没有显示 apc，而且 apc.php 说它没有运行。

我读过关于 wamp 是在 vc6 上构建的，但在 pierre 的 php 扩展页面上，我再也找不到任何 vc6 版本了，而且我有 php5.4.3 和 MSVC9（Visual C++ 2008）编译器，所以我认为我不能安装vc6版本。但我找不到任何关于 wamp 和替代 php 缓存的信息（这就是全名！）。我读过的所有页面都让它看起来很简单，但我无法让它工作。顺便说一句，我需要 apc 来处理 nicEdit 图像上传。任何帮助都会让我非常非常高兴！

另外，我注意到一些事情，这个论坛上的许多帖子都说 php 5.4 不支持 apc，而在其他帖子上人们说对于 Windows，我们应该使用 php 或其扩展的 vc6 版本。问题是我正在使用 wamp，就像我说的那样，不想经历独立安装 php 和 apache 的过程。即使我下载了，那我应该下载什么dll（搜索了很多，因为pecl不提供dll），同时考虑到我买不起apache以外的服务器，建议不要安装任何vc9版本php 与 apache 的二进制文件？再次，非常感谢任何帮助。

想我终于明白了，@eis 你安装正确的 x64bit 扩展是对的。我从这个[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for的 mediafire 中托管的扩展列表中下载了正确的-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)网站。现在我可以看到 apc 安装在 phpinfo(); 谢谢，再见。不过会继续发布有关 apc 的使用情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T06:47:19.340

作为一种解决方案 - pierres 页面上的 dll 似乎是 32 位 (x86)。由于您有 64 位服务器，因此您需要 64 位 dll，或者切换到 32 位服务器安装。

anindya.com[页面](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)有一个[64 位扩展](http://www.mediafire.com/php-win64-extensions)的链接。

# llvm - 访问函数参数寄存器以进行加载

> ID：12613945
> 
> 赞同：3
> 
> 时间：2012-09-27T04:08:44.303
> 
> 标签：llvm, llvm-c++-api

函数是这样创建的：

```
llvm::FunctionType* FunctionTypePtr = llvm::FunctionType::get( returnTypePtr , types , false );
llvm::Function* llvmFunction = llvm::Function::Create(FunctionTypePtr,
                        llvm::GlobalValue::ExternalLinkage,
                        functionName,
                        llvmModule); 
```

然后通过向块添加指令来创建函数的主体：

```
llvm::BasicBlock* entryBlock = llvm::BasicBlock::Create(llvmContext, "", llvmFunction);
llvm::IRBuilder<> builder(entryBlock); 
```

足够的上下文，现在解决问题：我想为函数参数值添加加载指令，例如：

```
//where do i get address??
llvm::LoadInst* load = builder.CreateLoad(address, "read"); 
```

我不知道如何/在哪里获取`address`函数参数的变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:33:19.700

你不应该加载任何东西。使用 Function::arg_iterator 获取与参数对应的值。

有关详细信息，请参阅[http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html](http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html) (arg_begin / arg_end) 和[http://llvm.org/docs/ProgrammersManual.html#Function](http://llvm.org/docs/ProgrammersManual.html#Function)

# jquery - 点击事件功能——单独点击

> ID：12613946
> 
> 赞同：0
> 
> 时间：2012-09-27T04:08:52.010
> 
> 标签：jquery

[http://jsfiddle.net/3eMGR/16/](http://jsfiddle.net/3eMGR/16/)

我正在尝试使它在第一次单击时显示第 2 行，然后在第二次单击时显示第 3 行。

我如何制作两个单独的事件？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:12:34.100

它必须是相同的点击处理程序，但您可以使用变量来跟踪点击次数。

```
var clickTarget = 2;
$("button").click(function () {
  var selector = "." + clickTarget.toString();
  $(selector).css("display","inherit");
  $(selector).show();
  clickTarget++;        
}); 
```

[演示](http://jsfiddle.net/XXxEN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:13:56.957

像这样的东西会起作用：

```
$("button").click(function () {
  $(".2").show();
  $('button').unbind('click').click(function(){
    $('.3').show();
  });
}); 
```

但是，做你想做的更好的方法是在你想要添加一行时动态添加 div。这[在此处](http://jsfiddle.net/dtBac/1/)进行了说明。

（我假设您实际上想根据按钮的文本添加一行。）

此外，停止`id`对多个元素使用该属性。id 应该是**唯一的**。使用该`class`属性来设置元素的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:14:14.337

顺便说一句，您的班级名称无效。它们必须`-`以字母或字母开头。我建议你修复它们。

无论如何，您可以`.hidden`一个一个地删除每个元素的类：

```
$(document).ready(function() {
    $("button").click(function() {
        $(".hidden").first().removeClass('hidden');
    });
});​ 
```

**演示：http: [//jsfiddle.net/Blender/3eMGR/20/](http://jsfiddle.net/Blender/3eMGR/20/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:16:21.553

请检查这个**[小提琴](http://jsfiddle.net/3eMGR/21/)**这将动态地继续添加你想要的行。

```
$('button').on('click', function() {
                $row = $('div.row:first').clone();
                $('div.wraper').append($row);
            }); 
```

# html - 表格标题

> ID：12613949
> 
> 赞同：1
> 
> 时间：2012-09-27T04:09:14.170
> 
> 标签：html, css

我这里有问题。我的前两个标题没有问题。但是当我插入第三个标题时，表格就搞砸了。这是代码。是的，我很新。

![在此处输入图像描述][1]

```
<html>

<head>
    <link rel="stylesheet" href="form.css" type="text/css">
</head>

<body>  
<div id="stylized" class="assestment-form">
    <form id="form" name="form" method="post" action="assesment-form-handler.php">
        <h1>Application Information</h1>
        <p> </p>

        <label>Name</label>
        <input type="text" name="client_name" id="client_name" />

        <label>Date of Birth</label>
        <input type="text" name="client_dob" id="client_dob" />

        <label>Gender</label>
        <input type="text" name="client_gender" id="client_gender" />

        <label>Address</label>
        <textarea name="client_address" rows=5 cols=40 id="client_address"></textarea>

        <label>Contact No.</label>
        <input type="text" name="client_contact" id="client_contact" />

        <label>Email Address</label>
        <input type="text" name="client_dob" id="client_dob" />

        <label>Marital Status</label>
        <input type="text" name="client_status" id="client_status" />

        <label>Citizenship</label>
        <input type="text" name="client_citizen" id="client_citizen" />

        <h1>Formal Training</h1>
        <p> </p>

        <label>DIPLOMA 1 </label>
        <input type="text" name="client_dip1" id="client_dip1" />

        <label>Field of Training </label>
        <input type="text" name="client_field1" id="client_field1" />

        <label>Educational Institution</label>
        <input type="text" name="client_edu1" id="client_edu1" />

        <label>Began Studies on</label>
        <input type="text" name="client_stud1" id="client_stud1" />

        <label>Obtained Diploma on</label> 
        <input type="text" name="client_obtaindip1" id="client_obtaindip1" />

        <label>DIPLOMA 2 </label>
        <input type="text" name="client_dip2" id="client_dip2" />

        <label>Field of Training </label>
        <input type="text" name="client_field2" id="client_field2" />

        <label>Educational Institution</label>
        <input type="text" name="client_edu2" id="client_edu2" />

        <label>Began Studies on</label>
        <input type="text" name="client_stud2" id="client_stud2" />

        <label>Obtained Diploma on</label> 
        <input type="text" name="client_obtaindip2" id="client_obtaindip2" />

        <label>DIPLOMA 3 </label>
        <input type="text" name="client_dip3" id="client_dip3" />

        <label>Field of Training </label>
        <input type="text" name="client_field3" id="client_field3" />

        <label>Educational Institution</label>
        <input type="text" name="client_edu3" id="client_edu3" />

        <label>Began Studies on</label>
        <input type="text" name="client_stud3" id="client_stud3" />

        <label>Obtained Diploma on</label> 
        <input type="text" name="client_obtaindip3" id="client_obtaindip3" />

        <h1>Work Experience</h1>
        <p> </p>

        <label>JOB 1</label>
        <input type="text" name="client_job1" id="client_job1" />

        <label>Company</label>
        <input type="text" name="client_company1" id="client_company1" />

        <label>Date of Beginning</label>
        <input type="text" name="client_begin1" id="client_begin1" />

        <label>Date of End</label>
        <input type="text" name="client_end1" id="client_end1" />

        <label>Job Duties and Responsibilities</label>
        <textarea name="client_jobduties1" rows=5 cols=40 id="client_jobduties3"></textarea>

        <label>Resume with job details</label>
        <input type="file" name="client_uploadjob1">

        <label>JOB 2</label>
        <input type="text" name="client_job2" id="client_job2" />

        <label>Company</label>
        <input type="text" name="client_company2" id="client_company2" />

        <label>Date of Beginning</label>
        <input type="text" name="client_begin2" id="client_begin2" />

        <label>Date of End</label>
        <input type="text" name="client_end2" id="client_end2" />

        <label>Job Duties and Responsibilities</label>
        <textarea name="client_jobduties3" rows=5 cols=40 id="client_jobduties3"></textarea>

        <label>Resume with job details</label>
        <input type="file" name="client_uploadjob2">

        <label>JOB 3</label>
        <input type="text" name="client_job3" id="client_job3" />

        <label>Company</label>
        <input type="text" name="client_company3" id="client_company3" />

        <label>Date of Beginning</label>
        <input type="text" name="client_begin3" id="client_begin3" />

        <label>Date of End</label>
        <input type="text" name="client_end3" id="client_end3" />

        <label>Job Duties and Responsibilities</label>
        <textarea name="client_jobduties3" rows=5 cols=40 id="client_jobduties3"></textarea>

        <label>Resume with job details</label>
        <input type="file" name="client_uploadjob3">

        <h1>Language Skills</h1>
        <p>(Please specify level: beginner, intermediate or advance) </p>

        <h2>Reading</h2>    

        <label>French</label>
        <input type="text" name="client_readfrench1" id="client_readfrench1" />

        <label>English</label>
        <input type="text" name="client_readenglish1" id="client_readenglish1" />

        <label>Have you passed the test?</label>
        <input type="text" name="client_langtest1" id="client_langtest1" 
        value="Please put Yes or No"/>

        <label>If yes, please specify test</label>
        <textarea name="client_specify1" id="client_specify1" rows=5 cols=40></textarea>

        <label>Date Passed</label>
        <input type="text" name="client_datepassed1" id="client_datepassed1" />

        <h2>Writing</h2>    

        <label>French</label>
        <input type="text" name="client_readfrench2" id="client_readfrench2" />

        <label>English</label>
        <input type="text" name="client_readenglish2" id="client_readenglish2" />

        <label>Have you passed the test?</label>
        <input type="text" name="client_langtest2" id="client_langtest2" 
        value="Please put Yes or No"/>

        <label>If yes, please specify test</label>
        <textarea name="client_specify2" id="client_specify2" rows=5 cols=40></textarea>

        <label>Date Passed</label>
        <input type="text" name="client_datepassed2" id="client_datepassed2" />

        <h2>Oral Expression</h2>

        <label>French</label>
        <input type="text" name="client_readfrench2" id="client_readfrench2" />

        <button type="submit">Submit</button>
        <div class="spacer"></div>

    </form>
</div>
<body>
</html> 
```

CSS代码

```
body{
font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
font-size:11px;
}
p, h1, form, button{border:0; margin:0; padding:0;}
.spacer{clear:both; height:1px;}
/* ----------- My Form ----------- */
.assestment-form{
margin:0 auto;
width:400px;
padding:14px;
}

/* ----------- stylized ----------- */
#stylized{
border:solid 2px #b7ddf2;
background:#ebf4fb;
}
#stylized h1 {
font-size:20px;
font-weight:bold;
margin-bottom:8px;
}
#stylized h2 {
font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
font-size:18px;
font-weight:bold;
margin-bottom:8px;
}
#stylized p{
font-size:11px;
color:#666666;
margin-bottom:20px;
border-bottom:solid 1px #b7ddf2;
padding-bottom:10px;
}
#stylized label{
display:block;
font-weight:bold;
text-align:left;
width:140px;
float:left;
}
#stylized .small{
color:#666666;
display:block;
font-size:11px;
font-weight:normal;
text-align:left;
width:140px;
}
#stylized input{
float:left;
font-size:12px;
padding:4px 2px;
border:solid 1px #aacfe4;
width:200px;
margin:2px 0 20px 10px;
}
#stylized button{
clear:both;
margin-left:150px;
width:125px;
height:31px;
background:#666666 url(img/button.png) no-repeat;
text-align:center;
line-height:31px;
color:#FFFFFF;
font-size:11px;
font-weight:bold;
}
#stylized textarea {
loat:left;
font-size:12px;
padding:4px 2px;
border:solid 1px #aacfe4;
width:200px;
margin:2px 0 20px 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T04:44:09.233

答案在这里：http: [//jsfiddle.net/2dcPE/5/](http://jsfiddle.net/2dcPE/5/) 请检查。
铭记于心：

1.  在 Css 中`float: left;`添加和`h1`添加`h2`
2.  添加到 CSS

    br{清除：左；}

3.  添加`<br />`HTML 以创建新行

**更新：**
HTML

```
<html>

<head>
    <link rel="stylesheet" href="form.css" type="text/css">
</head>

<body>    
<div id="stylized" class="assestment-form">
    <form id="form" name="form" method="post" action="assesment-form-handler.php">
        <h1>Application Information</h1><br/>
        <p> </p>

        <label>Name</label>
        <input type="text" name="client_name" id="client_name" />

        <label>Date of Birth</label>
        <input type="text" name="client_dob" id="client_dob" />

        <label>Gender</label>
        <input type="text" name="client_gender" id="client_gender" />

        <label>Address</label>
        <textarea name="client_address" rows=5 cols=40 id="client_address"></textarea>

        <label>Contact No.</label>
        <input type="text" name="client_contact" id="client_contact" />

        <label>Email Address</label>
        <input type="text" name="client_dob" id="client_dob" />

        <label>Marital Status</label>
        <input type="text" name="client_status" id="client_status" />

        <label>Citizenship</label>
        <input type="text" name="client_citizen" id="client_citizen" />

        <h1>Formal Training</h1><br/>
        <p> </p>

        <label>DIPLOMA 1 </label>
        <input type="text" name="client_dip1" id="client_dip1" />

        <label>Field of Training </label>
        <input type="text" name="client_field1" id="client_field1" />

        <label>Educational Institution</label>
        <input type="text" name="client_edu1" id="client_edu1" />

        <label>Began Studies on</label>
        <input type="text" name="client_stud1" id="client_stud1" />

        <label>Obtained Diploma on</label> 
        <input type="text" name="client_obtaindip1" id="client_obtaindip1" />

        <label>DIPLOMA 2 </label>
        <input type="text" name="client_dip2" id="client_dip2" />

        <label>Field of Training </label>
        <input type="text" name="client_field2" id="client_field2" />

        <label>Educational Institution</label>
        <input type="text" name="client_edu2" id="client_edu2" />

        <label>Began Studies on</label>
        <input type="text" name="client_stud2" id="client_stud2" />

        <label>Obtained Diploma on</label> 
        <input type="text" name="client_obtaindip2" id="client_obtaindip2" />

        <label>DIPLOMA 3 </label>
        <input type="text" name="client_dip3" id="client_dip3" />

        <label>Field of Training </label>
        <input type="text" name="client_field3" id="client_field3" />

        <label>Educational Institution</label>
        <input type="text" name="client_edu3" id="client_edu3" />

        <label>Began Studies on</label>
        <input type="text" name="client_stud3" id="client_stud3" />

        <label>Obtained Diploma on</label> 
        <input type="text" name="client_obtaindip3" id="client_obtaindip3" />

        <h1>Work Experience</h1><br/>
        <p> </p>

        <label>JOB 1</label>
        <input type="text" name="client_job1" id="client_job1" />

        <label>Company</label>
        <input type="text" name="client_company1" id="client_company1" />

        <label>Date of Beginning</label>
        <input type="text" name="client_begin1" id="client_begin1" />

        <label>Date of End</label>
        <input type="text" name="client_end1" id="client_end1" />

        <label>Job Duties and Responsibilities</label>
        <textarea name="client_jobduties1" rows=5 cols=40 id="client_jobduties3"></textarea>

        <label>Resume with job details</label>
        <input type="file" name="client_uploadjob1">

        <label>JOB 2</label>
        <input type="text" name="client_job2" id="client_job2" />

        <label>Company</label>
        <input type="text" name="client_company2" id="client_company2" />

        <label>Date of Beginning</label>
        <input type="text" name="client_begin2" id="client_begin2" />

        <label>Date of End</label>
        <input type="text" name="client_end2" id="client_end2" />

        <label>Job Duties and Responsibilities</label>
        <textarea name="client_jobduties3" rows=5 cols=40 id="client_jobduties3"></textarea>

        <label>Resume with job details</label>
        <input type="file" name="client_uploadjob2">

        <label>JOB 3</label>
        <input type="text" name="client_job3" id="client_job3" />

        <label>Company</label>
        <input type="text" name="client_company3" id="client_company3" />

        <label>Date of Beginning</label>
        <input type="text" name="client_begin3" id="client_begin3" />

        <label>Date of End</label>
        <input type="text" name="client_end3" id="client_end3" />

        <label>Job Duties and Responsibilities</label>
        <textarea name="client_jobduties3" rows=5 cols=40 id="client_jobduties3"></textarea>

        <label>Resume with job details</label>
        <input type="file" name="client_uploadjob3">

        <h1>Language Skills</h1><br/>
        <p>(Please specify level: beginner, intermediate or advance) </p>

        <h2>Reading</h2><br/>    

        <label>French</label>
        <input type="text" name="client_readfrench1" id="client_readfrench1" />

        <label>English</label>
        <input type="text" name="client_readenglish1" id="client_readenglish1" />

        <label>Have you passed the test?</label>
        <input type="text" name="client_langtest1" id="client_langtest1" 
        value="Please put Yes or No"/>

        <label>If yes, please specify test</label>
        <textarea name="client_specify1" id="client_specify1" rows=5 cols=40></textarea>

        <label>Date Passed</label>
        <input type="text" name="client_datepassed1" id="client_datepassed1" />

        <h2>Writing</h2><br/>    

        <label>French</label>
        <input type="text" name="client_readfrench2" id="client_readfrench2" />

        <label>English</label>
        <input type="text" name="client_readenglish2" id="client_readenglish2" />

        <label>Have you passed the test?</label>
        <input type="text" name="client_langtest2" id="client_langtest2" 
        value="Please put Yes or No"/>

        <label>If yes, please specify test</label>
        <textarea name="client_specify2" id="client_specify2" rows=5 cols=40></textarea>

        <label>Date Passed</label>
        <input type="text" name="client_datepassed2" id="client_datepassed2" />
       <div> 
        <h2>Oral Expression</h2><br/>

        <label>French</label>
        <input type="text" name="client_readfrench2" id="client_readfrench2" />

        <button type="submit">Submit</button>
        <div class="spacer"></div>

    </form>
</div>
<body>
</html> 
```

CSS

```
body{
font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
font-size:11px;
}
p, h1, form, button{border:0; margin:0; padding:0;}
.spacer{clear:both; height:1px;}
/* ----------- My Form ----------- */
.assestment-form{
margin:0 auto;
width:400px;
padding:14px;
}

/* ----------- stylized ----------- */
#stylized{
border:solid 2px #b7ddf2;
background:#ebf4fb;
}
#stylized h1 {
font-size:20px;
font-weight:bold;
margin-bottom:8px;
float: left;
}
#stylized h2 {
font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
font-size:18px;
font-weight:bold;
margin-bottom:8px;
float: left;
}
#stylized p{
font-size:11px;
color:#666666;
margin-bottom:20px;
border-bottom:solid 1px #b7ddf2;
padding-bottom:10px;
}
#stylized label{
display:block;
font-weight:bold;
text-align:left;
width:140px;
float:left;
}
#stylized .small{
color:#666666;
display:block;
font-size:11px;
font-weight:normal;
text-align:left;
width:140px;
}
#stylized input{
float:left;
font-size:12px;
padding:4px 2px;
border:solid 1px #aacfe4;
width:200px;
margin:2px 0 20px 10px;
}
#stylized button{
clear:both;
margin-left:150px;
width:125px;
height:31px;
background:#666666 url(img/button.png) no-repeat;
text-align:center;
line-height:31px;
color:#FFFFFF;
font-size:11px;
font-weight:bold;
}
#stylized textarea {
loat:left;
font-size:12px;
padding:4px 2px;
border:solid 1px #aacfe4;
width:200px;
margin:2px 0 20px 10px;
}

br{
clear: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:48:10.593

***[现场演示](http://tinkerbin.com/Kk2bIUCx)***.................................................... .....................

嗨，现在定义你 `#stylized h2`的`clear both`

像这样

```
#stylized h2{
clear:both;
} 
```

***[现场演示](http://tinkerbin.com/Kk2bIUCx)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:50:27.357

发生这种情况是因为有足够的空间来保存 h2 标签中的部分文本，所以在你的 h2 css 中添加

清除：左；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T04:40:31.130

请记住，输入元素是内联元素，因此如果有足够的空间，标题将出现在输入元素之后。标题`Oral`中`Oral Expression`的 足够宽，可以放在输入元素之后，这就是它的行为方式。

`.assestment-form`尝试更改from `400px`to的宽度，`375px`标题将出现在下一行。

# z3 - z3 MaxSAT 示例错误

> ID：12613954
> 
> 赞同：1
> 
> 时间：2012-09-27T04:09:40.200
> 
> 标签：z3

我有兴趣使用 z3（Microsoft Research）网站上提供的 MaxSAT/MaxSMT c 示例（特别是 maxsat.c）。使用 Visual Studio 2010，我最终编译了示例（使用全新安装的 z3 4.0）。但是，我无法让我的任何（SMT 2.0）模型使用它们来运行。此外，我也无法让[这个](https://stackoverflow.com/questions/10694072/issues-with-utilizing-z3-for-max-sat)问题中发布的示例正常工作。

`Z3_get_smtlib_num_formulas`在第一种情况下，我编译的程序在尝试调用`get_hard_constraints`文件时崩溃。我不知道为什么，相反，我得到标准的 Windows 7“这个程序已停止工作”弹出窗口。

在第二种情况下，它报告`unsupported ;benchmark`.

为了帮助我完成这项工作，我想知道（a）是否有人在编译此代码时遇到过类似的问题，如果有，您是如何解决的？或（b）如何调试文件的任一编译（假设它是正确的）？即，有人可以枚举正确的库（和库版本 - 例如，z3 4.0？）以包含在编译器选项中以使此示例正常工作吗？

在任何一种情况下，关于第二种情况下报告的错误的信息也将不胜感激：这到底是什么意思？关键字无效？那SMT输入是错误的版本？或者是其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:46:46.080

MaxSAT 示例尚未更新到 SMTLIB 2.0。它使用该函数`Z3_parse_smtlib_file`来解析输入，这意味着它目前仅支持 SMTLIB 1.0。

此示例与 Z3 一起分发，即您应该已收到一份副本`Z3-4.0/examples/maxsat/`，其中还包含编译和执行脚本。

`build.cmd`通过在 Visual Studio 命令提示符或`build.sh`Linux 上运行，编译应该是直接的。

# gwt - 我可以在 GWT celltable 中添加一个列表框吗

> ID：12613957
> 
> 赞同：0
> 
> 时间：2012-09-27T04:09:51.467
> 
> 标签：gwt

是否可以在 GWT CellTable 中添加列表框

必须在所附图片中做一些事情

![在此处输入图像描述](../Images/e9c739db2ac8a5c868228286a6e685c6.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:05:58.093

是的，您可以通过将 SelectionCell 添加到 CellTable 来实现。

```
final Category[] categories = ContactDatabase.get().queryCategories();
    List<String> categoryNames = new ArrayList<String>();
    for (Category category : categories) {
      categoryNames.add(category.getDisplayName());
    }
    SelectionCell categoryCell = new SelectionCell(categoryNames);
    Column<ContactInfo, String> categoryColumn = new Column<ContactInfo, String>(
        categoryCell) {
      @Override
      public String getValue(ContactInfo object) {
        return object.getCategory().getDisplayName();
      }
    };
    cellTable.addColumn(categoryColumn, constants.cwCellTableColumnCategory());
    categoryColumn.setFieldUpdater(new FieldUpdater<ContactInfo, String>() {
      public void update(int index, ContactInfo object, String value) {
        for (Category category : categories) {
          if (category.getDisplayName().equals(value)) {
            object.setCategory(category);
          }
        }
        ContactDatabase.get().refreshDisplays();
      }
    });
    cellTable.setColumnWidth(categoryColumn, 130, Unit.PX); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:26:59.660

看看这个， [http ://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTable](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTable)

# java - 从 CSV 文件初始化对象数组

> ID：12613959
> 
> 赞同：0
> 
> 时间：2012-09-27T04:10:05.887
> 
> 标签：java, arrays, file-io

这个问题需要解释一下，我会尽量简洁：

我试图初始化一个 Can 对象数组，这些对象只有 2 个字段（都是字符串）：名称、制造商

我正在尝试通过读取具有以下格式的 CSV 文件来初始化字段：

西红柿，亨氏

豆类，杰瑞

（两行之间没有空格，由于某种原因，它在本网站上的格式是这样的）

每行中的第一个字符串是我想成为名称的值，第二个是制造商。

所以我创建了一个方法来读取 CSV 的每一行，它将每一行传递给一个标记器方法以提取单个值：

```
private void readFile (String inFilename) {
    FileInputStream fileStrm = null;
    InputStreamReader rdr;
    BufferedReader bufRdr;
    int lineNum;
    String line;
        try {
            fileStrm = new FileInputStream(inFilename);
            rdr = new InputStreamReader(fileStrm);
            bufRdr = new BufferedReader(rdr);
            lineNum = 0;
            line = bufRdr.readLine();
            while {line != null) {
                lineNum++;
                processLine(line);  //passes line to tokenizer
                line = bufRdr.readLine();
                 }
            fileStrm.close();
        }
        catch (IOException e) {
            if (fileStrm != null) {
                try { fileStrm.close(); } catch (IOException ex2) { }
             }
             System.out.println("Error in file processing: " + e.getMessage());
        }   
    } 
```

这些行被传递给这个标记器方法：

```
private String processLine(String csvRow) {
    String thisToken = null;
    StringTokenizer strTok;
    strTok = new StringTokenizer(csvRow, ",");
        while (strTok.hasMoreTokens()) {
            thisToken = strTok.nextToken();
        }
} 
```

这就是我有点卡住的地方。要初始化我的数组，我想我需要一个 for 循环，比如

```
for (int i=0; i<=array.length;i++)
    {
    array[i].name = readFile("filename.csv");
    array[i].manufacturer = readFile("filename.csv");
    } 
```

但显然这行不通。谁能建议我怎么做？我宁愿保持代码基本完整，并使用现有代码找出解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:22:56.700

**第一件事：-**

您正在调用`processLine(line);`，但没有返回从此方法中`token`读取的内容。因此，在此方法中获得的令牌`engulped`仅在此处..因此，您应该从该方法中返回某些内容..

**第二：-**

```
array[i].name = readFile("filename.csv");
array[i].manufacturer = readFile("filename.csv"); 
```

在上面的代码中，你`readFile()`每次都调用这两个属性。所以，即使你返回了一些东西，这两个属性也会被初始化为相同的值。因为每次你都是从头开始读取文件的。

**第三件事：-**

实际上，您上面的代码将无法编译..因为您将`readFile()`（实际上没有返回任何内容）的值分配给数组..所以给这个方法一个返回类型..它将是`String`..并返回读取的令牌。 .

***编辑：-** **我建议，您可以使用[类的split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)方法`String`..`Tokenizer is not needed here, for just`拆分`around a single`逗号(,)`

[此外，您可以使用ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，而不是使用数组，您可以在其中动态添加新创建`object`的..这样，您就不必使用`fix the size`数组..（这就是您想要的，因为您不需要'不知道你的文件中有多少行对吗？）

**这是你可以做的： -**

*   从某个地方调用该方法`readFile`，可能`main()`

    ```
    readFile("filename.csv") 
    ```

*   在您的`readFile()`方法中，您可以遍历文件以创建`ArrayList`这样的：-

    ```
    List<Can> yourList = new ArrayList<>();
    while ((line = reader.readLine()) != null) {

        String[] wordRead = line.split(',');
        yourList.add(new Can(wordRead[0], wordRead[1]));
    } 
    ```

我假设，`Can`是您在问题中所述的班级名称..

# sql - SQL Select：如何从有序数据集中返回连续值的计数

> ID：12613961
> 
> 赞同：7
> 
> 时间：2012-09-27T04:10:36.917
> 
> 标签：sql, tsql

以下是我在 SQL Server 2008 数据库中的一个表的子集。

我正在尝试输出具有最大连续值计数的`Serial Number`，以及实际计数。需要注意的是，表格是按值降序排列的（这个条件很关键）。它可以按升序或降序进行分组或排序......任何更有效且更有意义的方式。 `LID``LID``Last Updated Date``Serial Number``Serial Number`

数据如下所示：

```
[Serial Number]  [LID]   [Last Updated Date]
--------------------------------------    
123456            AAA     2012-09-24
123456            AAA     2012-09-23
123456            AAA     2012-09-22
123456            AAA     2012-09-21
123456            BBB     2012-09-20
123456            BBB     2012-09-19
123456            AAA     2012-09-18
123456            AAA     2012-09-17
123456            AAA     2012-09-16
234567            BBB     2012-09-24
234567            BBB     2012-09-23
234567            AAA     2012-09-22 
```

表的期望输出是：

```
[Serial Number]     [LID]     [LID Count]
-------------------------------------------    
123456            AAA     4
234567            BBB     2 
```

我很茫然。我试过使用

```
ROW_NUMBER() OVER(PARTITION BY [Service Tag], [LID]
                  ORDER BY [Last Updated Date] DESC) 
```

但所做的只是打破我的降序日期顺序，最后得到在日期范围内出现最多的计数和 LID。

提前感谢您提供的任何帮助！

此致，

副总裁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:29:13.803

看看下面的例子

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/4673/0)

```
DECLARE @Table TABLE(
        [Serial Number] INT,
        [LID] VARCHAR(50),
        [Last Updated Date] DATETIME
)

INSERT INTO @Table SELECT 123456,'AAA','2012-09-24'
INSERT INTO @Table SELECT 123456,'AAA','2012-09-23'
INSERT INTO @Table SELECT 123456,'AAA','2012-09-22'
INSERT INTO @Table SELECT 123456,'AAA','2012-09-21'
INSERT INTO @Table SELECT 123456,'BBB','2012-09-20'
INSERT INTO @Table SELECT 123456,'BBB','2012-09-19'
INSERT INTO @Table SELECT 123456,'AAA','2012-09-18'
INSERT INTO @Table SELECT 123456,'AAA','2012-09-17'
INSERT INTO @Table SELECT 123456,'AAA','2012-09-16'
INSERT INTO @Table SELECT 234567,'BBB','2012-09-24'
INSERT INTO @Table SELECT 234567,'BBB','2012-09-23'
INSERT INTO @Table SELECT 234567,'AAA','2012-09-22'

;WITH Vals AS (
        SELECT  *,
                ROW_NUMBER() OVER(ORDER BY [Serial Number],[Last Updated Date] DESC) ROWID
        FROM    @Table
)
, ValsNext AS (
        SELECT  v.[Serial Number],
                v.LID,
                v.[Last Updated Date],
                v.ROWID,
                MIN(vn.ROWID) NextRowID
        FROM    Vals v LEFT JOIN
                Vals vN ON  v.[Serial Number] = vn.[Serial Number]
                        AND v.LID != vn.LID
                        AND v.ROWID < vn.ROWID
        GROUP BY    v.[Serial Number],
                    v.LID,
                    v.[Last Updated Date],
                    v.ROWID
)
, ValDiffs AS (
        SELECT  vn.[Serial Number],
                vn.LID,
                vn. NextRowID - vn.ROWID Consecutive
        FROM    ValsNext vn
)
, Serials AS (
        SELECT  [Serial Number],
                MAX(Consecutive) MaxConsecutive
        FROM    ValDiffs
        GROUP BY    [Serial Number]
)
SELECT  vd.*
FROM    Serials s INNER JOIN
        ValDiffs vd ON  s.[Serial Number] = vd.[Serial Number]
                    AND s.MaxConsecutive = vd.Consecutive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:48:23.627

这是一个解决方案

```
;with cte as (
  select sn, lid, ludate,
    datediff(d,row_number() over (
    partition by sn,lid
    order by ludate),ludate) dd
  from xtable
), cte2 as (
  select sn,lid,dd,count(*)c,
      rn=row_number() over (partition by lid
                            order by count(*) desc)
  from cte
  group by sn,lid,dd
)
select sn [Serial Number], lid, c [Count]
from cte2
where rn=1 
```

第一个 CTE 使用复杂的 DATEADD 表达式将连续的天组合在一起，使用 column 标记`dd`。
第二个 CTE 是计数的常规行编号。

# ios - Twitter 怎么会知道 TWRequest 的来源？

> ID：12613963
> 
> 赞同：0
> 
> 时间：2012-09-27T04:10:57.580
> 
> 标签：ios, twitter, twrequest

我只是好奇。s 使用iOS 上所有应用程序共享的`TWRequest`通用s。`ACAccount`应用程序不指定自己的`consumer_key`s。那么 Twitter 怎么知道一个特定的 TWRequest 来自哪个应用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:53:47.893

在 OAuth 过程中，查询参数 adc=phone 和 application_id=your_iosapp_sig （我认为）被添加到每个请求 url。Twitter 应该能够通过 application_id 识别您的应用

构建 TWRequest 后，您可以通过以下方式查看 url 请求

```
NSLog(@"%@", request.signedURLRequest.URL.absoluteString); 
```

这应该显示上述两个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:04:30.377

Twitter 无法判断特定 TWRequest 来自哪个应用程序。

`Accounts.framework`嵌入`consumer_key`和`consumer_secret`.

对于 Twitter，所有请求似乎都来自 iOS Twitter 集成。

# javascript - 使用 handlebars.js 时，为什么浏览器会在 Firefox（Chrome 中类似）中返回错误“TypeError：this._input is null”？

> ID：12613967
> 
> 赞同：3
> 
> 时间：2012-09-27T04:11:15.613
> 
> 标签：javascript, handlebars.js, jsfiddle

这是我正在尝试的代码：http: [//jsfiddle.net/sbrsK/10/](http://jsfiddle.net/sbrsK/10/)
它运行正常，在 jsfiddle 中没有任何错误

尝试通过我的计算机上本地的网络服务器运行相同的操作不起作用。正在加载以下文件：

*   索引.html
*   应用程序.js

**在 Firefox 中**，我收到此错误：

```
TypeError: this._input is null @ http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js:364 
```

**在铬**我得到这个错误：

```
Uncaught TypeError:Cannot call method 'match' of null
under match = this._input.match(this.rules[rules[i]]); in handlebars-1.0.0.beta.6.js 
```

[这个链接](https://stackoverflow.com/questions/12268088/working-with-handlebar-js)前面有一个非常相似的问题，但似乎它仍然是开放的。

所以问题是为什么当它在 jsfiddle 中正常工作时会发生这个错误？在本地运行它的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T04:50:06.170

该错误意味着`#entry-template`当您尝试使用它时它不在 DOM 中：

```
var source = $("#entry-template").html(); // There is no #entry-template in the DOM here
var template = Handlebars.compile(source); 
```

这意味着您最终尝试编译`undefined`为 Handlebars 模板，但这是行不通的。您可以通过运行以下命令查看错误：

> [http://jsfiddle.net/ambiguous/LprDR/](http://jsfiddle.net/ambiguous/LprDR/)

打开你的控制台。

jsfiddle 之所以有效，是因为在加载 DOM 之后您的所有代码都在运行，这是默认的 jsfiddle 行为。

您的真实代码中可能存在加载顺序问题，请尝试将其包装在`$(function() { /*...*/ })`包装器中。

# javascript - 测试的增量代码应该是'++@count'？

> ID：12613971
> 
> 赞同：-1
> 
> 时间：2012-09-27T04:11:47.593
> 
> 标签：javascript, coffeescript, jasmine

我是 CoffeeScript 和 Jasmine 的初学者。起初，我尝试使用以下代码通过测试：

```
class Counter
    count: 0

    constructor: ->
        @count = 0

    increment: ->
        @count++

    decrement: ->
        @count--

    reset: ->
        @count = 0

root = exports ? this
root.Counter = Counter 
```

茉莉花测试代码如下：

```
describe("Counter", ->
    counter = new Counter
    it("shold have 0 as a count variable at first", ->
        expect(counter.count).toBe(0)
    )

    describe('increment()', ->
        it("should count up from 0 to 1", ->
            expect(counter.increment()).toBe(1)
        )
    )
) 
```

然后好心人告诉我代码应该如下：

```
class Counter
    count: 0

    constructor: ->
        @count = 0

    increment: ->
        ++@count

    decrement: ->
        --@count

    reset: ->
        @count = 0

root = exports ? this
root.Counter = Counter 
```

是的，这段代码通过了测试。但我有一个问题，前一个代码比后一个代码更自然。我不知道如何确定这个问题。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:57:34.920

这是前增量和后增量之间的基本区别。`@count++`将返回的值`@count`并在之后增加它。`++@count`将首先增加它并返回新值。这就是如果您使用`@count++`. 更多关于[递增和递减运算符](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:24:04.253

如果您选择坚持发布增量，您可以将代码更改为以下内容以更清楚地了解返回值

```
class Counter
  count: 0

  constructor: ->
    @count = 0

  increment: ->
    @count++
    @count

  decrement: ->
    @count--
    @count
  reset: ->
    @count = 0

root = exports ? this
root.Counter = Counter 
```

或者您可以将测试更改为：

```
describe('increment()', ->
  it("should count up from 0 to 1", ->
    expect(counter.count).toBe(0)
    counter.increment()
    expect(counter.count).toBe(1)
  )
) 
```

但是你不希望增量和减量的返回值反映@count的更新值

这是一个可以使差异明显的示例： [http ://coffeescript.org/#try:class%20Counter%0A%20%20count%3A%200%0A%0A%20%20increment%3A%20- %3E%0A%20%20%20%20%40count%2B%2B%0A%20%20%20%20%40count%0A%20%20%0A%20%20inc%3A%20-%3E% 0A%20%20%20%20%40count%2B%2B%0A%0A%20%20递减%3A%20-%3E%0A%20%20%20%20--%40count%0A%0A%20 %20dec%3A%20-%3E%0A%20%20%20%20%40count--%0A%0Acnt%20%3D%20new%20Counter%0Aalert%20cnt.increment()%0Aalert%20cnt.count% 0Aalert%20cnt.inc()%0Aalert%20cnt.count%0Aalert%20cnt.decrement()%0Aalert%20cnt.count%0Aalert%20cnt.dec()%0Aalert%20cnt.count](http://coffeescript.org/#try:class%20Counter%0A%20%20count%3A%200%0A%0A%20%20increment%3A%20-%3E%0A%20%20%20%20%40count%2B%2B%0A%20%20%20%20%40count%0A%20%20%0A%20%20inc%3A%20-%3E%0A%20%20%20%20%40count%2B%2B%0A%0A%20%20decrement%3A%20-%3E%0A%20%20%20%20--%40count%0A%0A%20%20dec%3A%20-%3E%0A%20%20%20%20%40count--%0A%0Acnt%20%3D%20new%20Counter%0Aalert%20cnt.increment()%0Aalert%20cnt.count%0Aalert%20cnt.inc()%0Aalert%20cnt.count%0Aalert%20cnt.decrement()%0Aalert%20cnt.count%0Aalert%20cnt.dec()%0Aalert%20cnt.count)

# asp.net-mvc-3 - 带有 KnockoutJs 和 ASP.NET MVC3 的动态模板

> ID：12613974
> 
> 赞同：0
> 
> 时间：2012-09-27T04:12:16.473
> 
> 标签：asp.net-mvc-3, knockout.js, jquery-templates

我有一个相当大的 ASP.NET MVC Web 应用程序，它在整个过程中都广泛使用了 KnockoutJS。多年来，我为该应用程序创建了许多模板，但它们都使用命名脚本标签驻留在各种网页中。在各种视图上管理它们几乎变得难以忍受。我想找到一种方法将这些模板合并到它们自己的 html 文件中，以便它们更易于管理。

我想知道是否有支持这个概念的库？我不想重新发明轮子，因为我确信过去已经有人遇到过这个问题并解决了它。这是我正在处理的内容的快速概述...

基本上，我有很多类似于以下标记的内容。请注意，我在与实际内容标记相同的页面中定义了模板：

```
[[ HOME/INDEX.CSHTML ]]

<h1>Customers</h1>
<div data-bind="template: {name: 'personTmpl', foreach: customers}"></div>

<h1>Products</h1>
<div data-bind="template: {name: 'productTmpl', foreach: products}"></div>

<script type="text/html" id="personTmpl">
  Name: <span data-bind="text: name" />
  Address: <span data-bind="text: address" />
</script>

<script type="text/html" id="productTmpl">
  Description: <span data-bind="text: description" />
  Category: <span data-bind="text: category" />
</script>

<script type="text/javascript">
  $(function(){
    var json = { 
      customers: [ { name: 'Joe', address: 'Denver, CO' } ],
      products: [ { name: 'Skis', category: 'Outdoors' } ]
    };
    var vm = new CustomViewModel(json);
    ko.applyBindings(vm);
  });
</script>

[[ END HOME/INDEX.CSHTML ]] 
```

我想做*的*是将`personTmpl`and存储`productTmpl`在他们自己的 html 文件中，并根据需要将它们拉到视图中。这将允许我在我的 cshtml 文件中只包含内容标记。另外，它可以让我在任何地方使用模板（即客户\索引、产品\显示、主页\索引等）。

我希望它在每个页面上都需要一些自定义 js，但我认为这是清理混乱并使我的模板可用于所有视图的小代价。我可以看到我在每个页面上使用了一些服务器端标签或类似的东西（只是一个例子）：

```
@section templates {
  @Content.Template("Person.tmpl", Url)
  @Content.Template("Product.tmpl", Url)
}

<h1>Customers</h1>
<div data-bind="template: {name: 'personTmpl', foreach: customers}"></div>

<h1>Products</h1>
<div data-bind="template: {name: 'productTmpl', foreach: products}"></div>

<script type="text/javascript">
  $(function(){
    var json = @Html.Raw(Json.Encode(ViewBag.PageData)));
    var vm = new CustomViewModel(json);
    ko.applyBindings(vm);
  });
</script> 
```

通过将它们存储到自己的模板中，我什至可以使用 old fashion 动态查询内容以获取工具提示和对话框`$.get('/tmpl/Person.tmpl', renderFunc)`。

同样，我不介意创建自己的实现，但我确信已经有解决方案。有人吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:48:11.297

我的建议是在这里查看外部模板引擎：[https ://github.com/ifandelse/Knockout.js-External-Template-Engine](https://github.com/ifandelse/Knockout.js-External-Template-Engine)

它允许您将模板放在外部文件中，在绑定中引用它们，就像您通常使用`name`参数一样，并使用一些约定或配置来确定查找模板文件的确切路径。

外部模板引擎是一个非常强大的解决方案。我最近也为此目的使用`require.js`了它的插件。`text`此答案中的更多信息：[knockout.js 在运行时加载模板](https://stackoverflow.com/questions/12522658/knockout-js-loading-templates-at-runtime)

如果你想在线渲染它们，那么我想一个辅助函数可以加载文件并将其包装在一个非 JS 类型的脚本标签中。

# ruby-on-rails - 如何将 config.assets.precompile 用于目录而不是单个文件？

> ID：12613980
> 
> 赞同：16
> 
> 时间：2012-09-27T04:12:49.120
> 
> 标签：ruby-on-rails, asset-pipeline

如何在生产中使用 config.assets.precompile 以仅包含“lib/assets/javascripts”、“lib/assets/stylesheets”、“vendor/assets/javascripts”和“vendor/assets/stylesheets”中的文件？

基本上是这样的：

```
config.assets.precompile += %w( pagespecific.js anotherpage.js ) 
```

但用于自动包含不是“app/assets/javascripts”或“app/assets/stylesheets”的特定目录中的文件。

*编辑：添加我最终用于页面特定js的解决方案

```
config.assets.precompile += ['pages/*.js'] 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T05:18:37.910

你可以简单地这样写：

```
config.assets.precompile += ['directory/*'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T04:59:15.090

编译资产的目的是构建一个（或少量）文件，以尽量减少来自浏览器的 HTTP 请求数量。

如果您要单独提供每个文件，那么为什么不禁用预编译呢？

要按预期使用预编译，请使用 Sprockets' 将整个目录构建到一个文件中`require_directory`：

```
//= require_directory ./awesome_js_app 
```

`config.assets.precompile`...并在您的数组中列出该文件。

默认情况下，所有 CSS 都内置在`application.css`& JS`application.js`中。您可以添加更多顶级文件以使用 precompile 指令进行编译`config/environments/production.rb`（如果您愿意，还可以添加其他环境。）例如：

```
config.assets.precompile += %w( public.css public.js ) 
```

`//= require ...`然后这些顶级文件中的 Sprockets指令将确定最终编译文件的组成。

您可以在布局中使用这些额外的顶级文件来为某些视图使用不同的 CSS 和 JS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-01T07:26:34.417

将其包含为资产路径可能会更好一些（根据您的示例解决方案）：

```
config.assets.paths << Rails.root.join('app', 'assets', 'javascripts', 'pages') 
```

它还允许您包含不在资产目录中的路径（例如包含`bootstrap-sass`）。然后将这些路径添加到公共目录中的资产文件夹中，如果使用类似`asset_sync`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T04:50:51.513

我找到了这个链接，认为它可能对你有帮助，请看

基思加普蒂斯的回答。[Rails config.assets.precompile 设置处理 app/assets 中的所有 CSS 和 JS 文件](https://stackoverflow.com/questions/10097993/rails-config-assets-precompile-setting-to-process-all-css-and-js-files-in-app-as)

我认为你可以这样做。

```
# In production.rb
config.assets.precompile << Proc.new { |path|
  if path =~ /\.(css|js)\z/
    full_path = Rails.application.assets.resolve(path).to_path
    app_assets_path = Rails.root.join('app', 'assets').to_path
    if full_path.starts_with? app_assets_path
      puts "excluding asset: " + full_path
      false
    else
      puts "including asset: " + full_path
      true
    end
  else
    false
  end
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T20:31:17.403

从 Sprockets 3 开始，您可以使用 manifest.js 文件来声明哪些文件或目录是预编译的。请参阅[升级文档](https://github.com/rails/sprockets/blob/v4.0.0.beta8/UPGRADING.md)。因此，在您的配置中，您将添加：

```
config.assets.precompile = %w(manifest.js) 
```

然后在 app/assets/config/manifest.js 你可以拥有

```
//= link_directory ../pages .js 
```

如果`link_tree`您希望嵌套子目录中的 js 文件也被预编译，请使用。

# iphone - uiimageview iPhone中的选框效果

> ID：12613982
> 
> 赞同：3
> 
> 时间：2012-09-27T04:13:07.490
> 
> 标签：iphone, uiimageview, marquee

如何在 UIImage 中实现选取框效果动画。

我有一张云的图像（320 * 480）。我需要从右向左连续动画，没有任何滞后和消失。下面是一个html示例。

[http://www.quackit.com/html/codes/html_marquee_code.cfm](http://www.quackit.com/html/codes/html_marquee_code.cfm)

从上数第二个（连续滚动文本：）。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:26:35.180

```
UIImage *clouds = [UIImage imageNamed:@"Clouds"];
UIImageView *cloudView = [[UIImageView alloc] initWithImage:clouds];
CGRect origin = CGRectMake(320, 0, clouds.size.width, clouds.size.height);
CGRect destination = CGRectMake(0, 0, clouds.size.width, clouds.size.height);
cloudView.frame = origin;
[self.view addSubview:cloudView];
[UIView animateWithDuration:5 delay:0 options:UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear animations:^{
    cloudView.frame = destination;
} completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T04:25:55.723

做这个：

```
-(void)marqueeEffect
{
  imgView.frame = CGRectMake(self.view.frame.origin.y,50,320,480); //right frame
  //increase time duration as per requirement
  [UIView animateWithDuration:3.0
                      delay: 0.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{

                      imgView.frame = CGRectMake(-imgview.frame.size.width,50,320,480); //left frame
                 }
                 completion:^(BOOL finished){
                      [self performSelector:@selector(marqueeEffect)];
                 }];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:51:02.507

试试这个例子，它适用于 UILABEL：

```
int x;
@synthesize label;
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    label=[[UILabel alloc]initWithFrame:CGRectMake(300, 400, 150, 30)];
    label.text=@"WWW.SONGS.PK";
    label.backgroundColor=[UIColor clearColor];
    x=300;

    [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(clickme) userInfo:nil repeats:YES];

}

-(void)clickme
{
    x--;
    label.frame=CGRectMake(x, 400, 150, 30);
    if( x==-150)
    {
        x=300;
    }
    [self.view addSubview:label];
} 
```

# c# - 使用 Kinect SDK 创建完整的 3D 骨架

> ID：12613991
> 
> 赞同：7
> 
> 时间：2012-09-27T04:13:48.993
> 
> 标签：c#, rotation, kinect, quaternions, sharpdx

这是我在 uni 的第一个图形主题，实施的某些部分对我不起作用。我可以让关节正确绘制，但我正在尝试编写一个在关节之间放置“骨骼”的函数。在这一点上，骨骼只是被转换为矩形棱柱的立方体，稍后我将尝试从搅拌机或其他东西中引入适当的模型。

我的麻烦在于轮换。大约 5 个小时后，我和我的搭档就开始工作了，但是一旦你把你的胳膊或腿移出，立方体就会变形，看起来很奇怪。任何帮助，将不胜感激。下面是尝试绘制骨骼的函数。

```
private void DrawBone(Skeleton skeleton, JointType jointType0, JointType jointType1)
{
    Joint joint0 = skeleton.Joints[jointType0];
    Joint joint1 = skeleton.Joints[jointType1];

    // If we can't find either of these joints, exit
    if (joint0.TrackingState == JointTrackingState.NotTracked ||
        joint1.TrackingState == JointTrackingState.NotTracked)
    {
        return;
    }

    // Don't draw if both points are inferred
    if (joint0.TrackingState == JointTrackingState.Inferred &&
        joint1.TrackingState == JointTrackingState.Inferred)
    {
        return;
    }

    // We assume all drawn bones are inferred unless BOTH joints are tracked
    if (joint0.TrackingState == JointTrackingState.Tracked && joint1.TrackingState == JointTrackingState.Tracked)

        //jointvector(joint) takes a joint and returns a Vector2 with its position data, with the z invtred to work properly with directx11
        Vector3 bonevector = Vector3.Subtract(jointVector(joint0), jointVector(joint1));
        //cubevector is supposed to describe the initial vector of a cube centred at (0,0,0) with a side length of 2\. A fair amount of guesswork has gone into this bit.
        Vector3 cubevector = new Vector3(0, 2, 0);
        //midpoint of two joints
        Vector3 transTest = Vector3.Divide(Vector3.Add(jointVector(joint0),jointVector(joint1)), 2);
        //divide by two because our original cube has side length 2
        float scaleFactor = Math.Abs(bonevector.Length() / cubevector.Length());

        //we haven't been taught quaternions in class or anything, but after a fair while searching for similar problems they seemed like the go-to option for rotations.
        world = Matrix.Transformation(new Vector3(0, 0, 0), new Quaternion(0), new Vector3(0.05f, scaleFactor, 0.05f), new Vector3(0, 0, 0), new Quaternion(Vector3.Cross(cubevector, bonevector), (float)Math.Acos(Vector3.Dot(bonevector, cubevector))), transTest);     

        //view and proj are defined elsewhere and are working fine, it's just the world that is being lame         
        worldViewProj = world * view * proj;
        worldViewProj.Transpose();
        sDXdata.context.UpdateSubresource(ref worldViewProj, sDXdata.constantBuffer);
        //36 vertices of the cube (two triangles per face) defined elsewhere
        sDXdata.context.Draw(36, 0);
        return; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:03:32.897

对于骨骼方向，请检查：

```
skeleton.BoneOrientations[joint.JointType] 
```

它会给你一个 BoneOrientation 类

[http://msdn.microsoft.com/en-us/library/microsoft.kinect.boneorientation.aspx](http://msdn.microsoft.com/en-us/library/microsoft.kinect.boneorientation.aspx)

从那里您可以在世界空间或父骨骼空间（用于蒙皮）中作为四元数/矩阵进行旋转

你也使用：

```
new Quaternion(0) 
```

这是一个 0 向量，不是用于旋转的有效四元数，请使用：

```
Quaternion.Identity; 
```

这将是（0,0,0,1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T02:48:01.360

虽然这是不久前被问到的，但我认为在计算角度时也存在错误。你有：

```
(float)Math.Acos(Vector3.Dot(bonevector, cubevector) 
```

我认为你需要：

```
(float)Math.Acos(Vector3.Dot(bonevector, cubevector) / (bonevector.Length() *
cubevector.Length())) 
```

[这](http://www.wikihow.com/Find-the-Angle-Between-Two-Vectors)是一个很好的数学小例子。您也可以将它们设为单位向量，因此它们的长度为 1 并且不用担心除法：

```
(float)Math.Acos(Vector3.Dot(bonevector.Normalize(), cubevector.Normalize())) 
```

查看[MSDN](http://msdn.microsoft.com/en-us/library/bb196384%28v=xnagamestudio.35%29.aspx)页面了解更多信息。

# php - MySQL：使用单个查询插入数据，但在非自动递增列上自动递增数

> ID：12613999
> 
> 赞同：0
> 
> 时间：2012-09-27T04:14:23.540
> 
> 标签：php, mysql

我有这个 SQL 查询：

```
INSERT INTO db1.outbox (DestinationNumber, TextDecoded)
SELECT User.CellPhone, '$SMSMessage' as TextDecoded
FROM db2.User
WHERE User.PurchaseDate BETWEEN 2012-01-01 AND 2012-01-31 
```

它对“发件箱”表进行多行插入。我可以使用以下查询轻松获取第一行的 ID 号：

```
SELECT LAST_INSERT_ID() 
```

假设我有 532 作为结果，`SELECT LAST_INSERT_ID()`并且我插入了 34 行。

如何将此 532 用作其他名为“outbox_multipart”插入的表的初始编号并使其自动递增，因此结果将如下所示：

```
+------+----------------+----------+----------------------------------+
| ID   | phonenumber    | outboxID | message                          |
+------+----------------+---------------------------------------------+
|                      ......                                         |
| 1025 | 555-123456     | 532      | part 2 : hello there!            |
| 1026 | 555-999999     | 533      | part 2 : hello there!            |
| 1027 | 555-888888     | 534      | part 2 : hello there!            |
|                                                                     |
|               ...... 34 rows inserted here .......                  |
|                                                                     |
+------+----------------+---------------------------------------------+ 
```

请注意，outboxID 列不是自动递增列。但它必须具有 532 + 34 行 = 566 的自动增量编号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T04:17:56.073

试试这个

```
ALTER TABLE outbox_multipart AUTO_INCREMENT = 532; 
```

它将从 532 递增，

并记住“outboxID”最初也应该是自动递增的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:39:09.617

使用 for 循环结合 mysql 中受影响的行数怎么样？如果您使用的是 PDO（我推荐），您可以使用此 [http://php.net/manual/en/pdostatement.rowcount.php](http://php.net/manual/en/pdostatement.rowcount.php)

所以它看起来像这样。

```
<?php 

 $dbh = new pdo (your_database_connection_details);
 $stmt = dbh->prepare() //do your initial insert into the outbox table
 $stmt->bindParams() //bind your parameters
 $stmt->execute();

 $out_box_id =  dbh->lastInsertId();
 $row_count = dbh->rowCount();

for(x=0;x<$row_count;x++){   
  //insert $out_box_id into the outboxID column
  $stmt->execute();
  $out_box_id = $out_box_id + 1;
 } 
```

所以这应该抓住你第一次插入的最后一个插入的 id 并将 $out_box_id 设置为它。然后你可以在你的 for 循环中插入 $out_box_id 。循环运行多次插入的行数，然后在每个循环结束时它将 out_box_id 增加一。