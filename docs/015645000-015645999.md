# StackOverflow 问答 15645000-15645999

# php - 在新选项卡中打开外部链接，嵌入在幻想框弹出窗口中

> ID：15645002
> 
> 赞同：0
> 
> 时间：2013-03-26T18:45:21.673
> 
> 标签：php, javascript, fancybox

我正在尝试操作以下代码以在新选项卡中打开链接。它嵌入在 fancybox 1.3.4 弹出窗口中。问题是添加 target="_blank" 并且 onclick 函数被忽略并导致链接在父页面中打开。我也尝试过使用 javascript void (0) target"_blank" 并设法将页面留在新选项卡中，但是新页面出现时是空白的。

这是我试图操作离开fancybox并在新选项卡中打开的代码行：

```
$link = ($attachment_meta)? "<a href='$attachment_meta'>$image</a>" : $image;

ex: $link = ($attachment_meta)? "<a href='$attachment_meta'
target'_blank'>$image</a>" : $image; <-- adding target_blank in code
does not work!-- 
```

这是代码片段：

```
if( 'custom' == $attr['link']){
      $image = wp_get_attachment_image($id, $size, false);
      $attachment_meta = get_post_meta($id, '_rt-image-link', true);
 $link = ($attachment_meta)? "<a href='$attachment_meta'>$image</a>" : $image;
} else {
      $link = isset($attr['link']) && 'file' == $attr['link'] ? wp_get_attachment_link($id, $size, false, false) : wp_get_attachment_link($id, $size, true, false);
  }

      $output .= "<{$itemtag} class='gallery-item'>";
     $output .= "
<{$icontag} class='gallery-icon'>
$link
</{$icontag}>";
     if ( $captiontag && trim($attachment->post_excerpt) ) {
     $output .= "
<{$captiontag} class='wp-caption-text gallery-caption'>
" . wptexturize($attachment->post_excerpt) . "
</{$captiontag}>";
     }
     $output .= "</{$itemtag}>";
     if ( $columns > 0 && ++$i % $columns == 0 )
     $output .= '<br style="clear: both" />';

} 
```

# javascript - 拖动内部元素时调整父元素的大小。(jqueryUI 可拖动)

> ID：15645007
> 
> 赞同：4
> 
> 时间：2013-03-26T18:45:41.857
> 
> 标签：javascript, jquery, jquery-ui

[jsfiddle 示例](http://jsfiddle.net/bDpLB/4/)

拖动元素时`#right`，我想调整其父级的大小。我的示例工作不正确，我无法理解原因。任何提示如何解决它？

以防万一，我在这里要做的是创建一个与[此类](http://www.highcharts.com/products/highstock)似的可调整大小的滚动条。但现在，我只对正确的元素感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:25:51.223

最简单的解决方案如下（注意 SCSS 中的 #left 和 #right 更改）：

SCSS：

```
#container {
    width: 500px;
    height: 100px;
    background: #f9f9f9;
}

#nav {
    width: 100px;
    height: 100px;
    background: #e9e9e9;
    cursor: move;
}
#left {
    width: 10px;
    height: 100px;
    position: absolute;
    top:0;
    left:0px;
    background: #a9a9a9;
    cursor: w-resize;
    &:hover {
        background: #999;
    }
}
#right {
    width: 10px;
    height: 100px;
    position:absolute;
    top:0;
    right:0px;
    background: #a9a9a9;
    cursor: e-resize;
    &:hover {
        background: #999;
    }
} 
```

JavaScript：

```
var cont = $("#container")
var nav = $("#nav")
var left = $("#left")
var right = $("#right")

nav.draggable({
    containment: cont
});

right.draggable({
    containment: cont,
    drag: function(e, ui) {
        nav.width(ui.position.left);
    }
}); 
```

唯一的问题是你对 JavaScript 太花哨了。ui.position.left 包含您需要的所有信息。我所做的只是将内容从浮动更改为位置：绝对；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:07:52.983

您可以使用良好的纯 JavaScript 来做到这一点
[http://jsfiddle.net/DerekL/cCvGD/](http://jsfiddle.net/DerekL/cCvGD/)

```
var oriX = 0,
    oriW = 0,
    mousedown = false;
right.mousedown(function (e) {
    oriX = $(this).offset().left;             //store the initial x and width
    oriW = nav.width();
    mousedown = true;                         //mousedown sets to true
    e.stopPropagation();                      //prevent nav from being dragged
})
$(window).mousemove(function (e) {
    if(mousedown == true) {                   //only when mouse is down (dragging)
        nav.width(oriW + (e.clientX - oriX)); //calculate the width
    }
}).mouseup(function () {
    mousedown = false;                        //mousedown sets to false
}); 
```

左右两边：http: [//jsfiddle.net/DerekL/cCvGD/1/](http://jsfiddle.net/DerekL/cCvGD/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:11:32.493

问题是您正在更改*导航*容器的宽度，这正在移出*正确*的元素。因此，当您拖动它时，它会移动两倍的距离。

您可以通过在可拖动方法中重置*正确*元素的位置来解决此问题

```
right.draggable({
    containment: cont,
    drag: function(e, ui){
        dragged = ui.position.left;
        nav.width(originNavWidth + dragged);
        ui.position.left = nav.position.left;
    }
}) 
```

见：http: [//jsfiddle.net/vf4eS](http://jsfiddle.net/vf4eS)

# php - Zend Framework 2 中的翻译处理

> ID：15645008
> 
> 赞同：1
> 
> 时间：2013-03-26T18:45:43.543
> 
> 标签：php, zend-framework2

我正在使用 Zend Framework 2 构建一个多语言应用程序。

目前，我让每个具有可翻译输出的对象都实现 TranslatorAwareInterface 并使用 TranslatorAwareTrait。因此，我将一个翻译器实例注入到每个表单、输入过滤器和控制器对象中，以便翻译表单标签、错误消息和通知。

这是正确的方法还是有一种不同的方法不需要将翻译器实例注入到每个具有需要翻译的文本的对象中？

（我知道我可以通过向 AbstractValidator 注入默认翻译器来翻译验证错误，但我更喜欢有自己的错误消息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:07:40.277

使用 zf2 的学说模块作为 orm 并让学说扩展 gedmo/translatable 处理数据翻译[https://github.com/l3pp4rd/DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)

要使可翻译功能正常工作，请遵循文档的这一部分： [https ://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/zendframework2.md#note-you-may-need-to-provide-additional-一些可用监听器的设置](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/zendframework2.md#note-you-may-need-to-provide-additional-settings-for-some-of-the-available-listeners)

之后运行架构工具来更新您的数据库。

# highcharts - 动态更改缩放类型？

> ID：15645012
> 
> 赞同：4
> 
> 时间：2013-03-26T18:45:53.000
> 
> 标签：highcharts, highstock

我想在不创建新实例的情况下将缩放类型从“x”更改为“xy”，我想像他们拥有的 update() 方法那样做......位于`myChart.options.chart.zoomType`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-31T01:03:11.647

你可以这样做：

```
var chart1 = new Highcharts.StockChart({
   chart: {
      zoomType: 'xy', //requried!
      ...
   }
   ...
});

function SwitchToZoomX() {
   chart1.pointer.zoomX = true;
   chart1.pointer.zoomY = false;
   chart1.pointer.zoomHor = true;
   chart1.pointer.zoomVert = false;
}

function SwitchToZoomY() {
   chart1.pointer.zoomY = true;
   chart1.pointer.zoomX = false;
   chart1.pointer.zoomVert = true;
   chart1.pointer.zoomHor = false;
}
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-07T21:09:23.530

使用 Highcharts v5，您现在可以这样做：

```
chart1.update({chart: {zoomType: "y"}})
```

该`update`函数动态更新图表选项以强制更改`zoomType`后期渲染。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T18:58:40.293

首先准备一个字符串供图表显示

**克隆系列以重绘为高图在绘制后将其设置为空。**

```
var seriesClone=[{
        name: 'USD to EUR',
        data: [1,2,3,4,4,5,6,7,7,8,8,8,9,10,14]
   }] 
```

**要设置的系列选项**

```
 var chartOptions={   

    chart: {
        renderTo:'container',
        zoomType: 'xy'
    },

    rangeSelector: {
        selected: 1
    },

    series: [{
        name: 'USD to EUR',
        data: [1,2,3,4,4,5,6,7,7,8,8,8,9,10,14]
    }]
                 }

 var chart = new Highcharts.StockChart(chartOptions); 
```

当你想改变 ZoomType 的值时，像这样重新声明图表

```
 chartOptions.chart.zoomType='y';
   chartOptions.series=seriesClone;
   myChart=new Highcharts.StockChart(chartOptions); 
```

工作示例[JSFIDDLE](http://jsfiddle.net/WMZJ3/)

# ios - iPad 应用程序布局不正确

> ID：15645017
> 
> 赞同：0
> 
> 时间：2013-03-26T18:46:14.320
> 
> 标签：ios, ipad, xcode4, ios-simulator

我有一个继承了代码的 iPad 应用程序。

我对 iPad 开发比较陌生，所以请多多包涵……

该应用程序于 2010 年由承包商在场外编译。从那时起，我的公司已被收购，我们正在进行品牌重塑。我看似简单的任务是用一个新的标志替换我们在这个应用程序中的标志。这应该需要几分钟 - 只需将新徽标放入代码中，编译，然后 bam！完毕。

编译代码时出现问题...工作应用程序以横向模式启动，并以其界面填满整个屏幕。当我在模拟器中编译应用程序或在我的 iPad 上运行它（通过 USB 电缆连接到我的 mac）时，屏幕以横向模式启动，但视图处于纵向模式。在整个应用程序的断断续续的地方，视图从横向切换到纵向布局。

这让我发疯，因为我什至不知道要寻找什么。我看到一些对 shouldAutoRotateToInterfaceOrientation 的引用——我认为这已被弃用。这会导致问题吗？

我知道自 2010 年以来发生了很多变化。我目前正在新的 Mac 上运行最新版本的 XCode。（据我了解，我的前任从未真正编译过这里的应用程序，而是完全依赖承包商......据我所知，这可能是一个一直存在的问题，但没有人知道）

**更新**

我有一个旧的 mac（带有旧版本的 XCode）来测试。我已将应用程序代码移到旧版 Mac 上，更改了一些设置，并且它可以正常工作。

我还注意到我在新 Mac 上创建的任何应用程序的布局都不完全正确。例如，在表单顶部附近放置一个按钮最终会滚动到应用程序的顶部，因此它甚至不可见。

XCode 中是否有定义此行为的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:04:44.183

在 iOS 6.0 检查视图控制器方向条件已更改..

// 覆盖以允许默认纵向以外的方向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    // Return YES for supported orientations
    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) 
    {
        return YES;
    }
    else 
    {
        return NO;
    }
} 
```

# android - 为任何分辨率创建 Android 动态壁纸

> ID：15645021
> 
> 赞同：2
> 
> 时间：2013-03-26T18:46:27.700
> 
> 标签：android, live-wallpaper, screen-resolution

我是一名新的 Android 开发人员，我正在创建 android 动态壁纸作为第一个项目。如何支持多分辨率？我不知道我应该通过代码缩放图像还是根据分辨率更改它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:39:55.660

实际上，我也是一个新的 Android 开发人员，但最近我看到了一个关于 Android 上动态壁纸的很好的教程，它可能会对你有所帮助，此外我在 SO 中发现了一个类似的问题。

*   [Android 动态壁纸 - 教程](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)
*   [SO：Android动态壁纸重新缩放](https://stackoverflow.com/questions/5208203/android-live-wallpaper-rescaling)

# coq - 找出模块/模块类型的类型签名，就地

> ID：15645024
> 
> 赞同：1
> 
> 时间：2013-03-26T18:46:35.013
> 
> 标签：coq

这个问题已经困扰我太多次了。有没有办法在 Coq 中打印模块类型的每个元素的签名。

例如：

```
Print Orders.OrderedType.

Module Type Orders.OrderedType = Sig
                               Parameter t
                               Parameter eq
                               Parameter eq_equiv
                               Parameter lt
                               Parameter lt_strorder
                               Parameter lt_compat
                               Parameter compare
                               Parameter compare_spec
                               Parameter eq_dec
                             End 
```

* * *

```
Print Module Type Orders.OrderedType.

Module Type Orders.OrderedType = Sig
                               Parameter t
                               Parameter eq
                               Parameter eq_equiv
                               Parameter lt
                               Parameter lt_strorder
                               Parameter lt_compat
                               Parameter compare
                               Parameter compare_spec
                               Parameter eq_dec
                             End 
```

* * *

```
About Orders.OrderedType.

Module Type Coq.Structures.Orders.OrderedType 
```

* * *

所有这些都是无用的，因为它们不会让我想起每个元素的类型......

而且我什至不能使用错误消息来提醒我，因为它们很愚蠢：

```
Error: Signature components for label eq do not match. 
```

确定错误信息，不要告诉我预期的类型...

我不知道这是否已在 8.4 中修复，但我真的很想有一种方法不必寻找它的定义位置，以便提醒它是如何定义的。有这样的事吗？:(

* * *

特别是，找出定义只是沿着一个*可笑*的长链模块组合追逐......说真的：

```
Module Type OrderedType <: DecidableType := DecStrOrder <+ HasEqDec. 
```

是的，谢谢...

```
Module Type DecStrOrder := StrOrder <+ HasCompare. 
```

继续...

```
Module Type StrOrder := EqualityType <+ HasLt <+ IsStrOrder. 
```

...

```
Module Type EqualityType := Eq <+ IsEq. 
```

当然...

```
Module Type Eq := Typ <+ HasEq. 
```

好的...

```
Module Type Typ.
  Parameter Inline(10) t : Type.
End Typ. 
```

最后，我知道了的类型`t`！\o/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:28:39.410

作为部分答案，在过去的一个月中，这似乎已在后备箱中修复。参照。

[http://www.lix.polytechnique.fr/coq/bugs/show_bug.cgi?id=1572](http://www.lix.polytechnique.fr/coq/bugs/show_bug.cgi?id=1572)

和

[http://www.lix.polytechnique.fr/coq/bugs/show_bug.cgi?id=2466](http://www.lix.polytechnique.fr/coq/bugs/show_bug.cgi?id=2466)

# c++ - 如何根据用户输入打开文件？

> ID：15645025
> 
> 赞同：-2
> 
> 时间：2013-03-26T18:46:37.600
> 
> 标签：c++, filenames, istream

这段代码一直给我错误我不知道我做错了什么？如何要求用户输入文件名，然后打开该文件并使用数据执行任务。

例子：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main ()
{ 
ifstream inData;
ofstream outData;
string fileName;

cout << "Enter the data file Name : " << endl;//asks user to input filename
cin >> fileName; //inputs user input into fileName

inData.open(fileName); //heres where i try to open the file with the users input?
outData.open(fileName);
cout << fileName;
return 0;   
} 
```

代码不断给我错误。我试过用getline？我希望文件名是字符串而不是字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:48:03.163

您将`std::string`对象传递给参数，而不是实际的空终止字符指针。为此，请使用`c_str`：

```
inData.open(fileName.c_str());
outData.open(fileName.c_str()); 
```

# c - 让 asprintf 使用也是输入的非 NULL 目标指针是否安全？

> ID：15645027
> 
> 赞同：6
> 
> 时间：2013-03-26T18:46:43.597
> 
> 标签：c, alias, stdio

**tl;dr**可以`asprintf`在不调用临时指针的情况下天真地用于连接吗？

* * *

`asprintf`GNU 引入并在其他几个 clib 实现中采用的函数是使用类似方案的 c 中任意连接的诱人解决方案

```
int i=0;
char *str = strdup(argv[i]);
while (argv[++i]) {
   asprintf(&str,"%s %s",argv[i],str);   // <=== This line
}
asprintf(&str,"%s\n",str); 
```

当包裹在一个主要的和必要的包含中时，这对我来说运行良好。

## 但...

它是否到处泄漏内存？Valgrind 说它在我的盒子上。这是一个错误吗？

我面前的手册页说

> asprintf() 和 vasprintf() 函数将 *ret 设置为指向足够大以保存格式化字符串的缓冲区的指针。这个指针应该被传递给 free(3) 以在不再需要时释放分配的存储空间。如果无法分配足够的空间， asprintf() 和 vasprintf() 将返回 -1 并将 ret 设置为 NULL 指针。

在没有*“set `*ret`to be a pointer to a **new** buffer [...]”*这句话的情况下，我很想假设该函数`realloc`按原样`getline`使用。

## 可能是什么问题？

使用具体的签名`int asprintf(char **ret, const char *format, ...);`。

1.  `asprintf`跑得太快`realloc`了。

    想象一下，我们在如此远的地方实现该函数，以至于我们可以`realloc(*ret)`在它取消引用为原始缓冲区别名的可变参数之一之前运行。该缓冲区已被释放，这在技术上是未定义的行为。这将代表一个错误。

2.  `asprintf`在读取缓冲区之前写入缓冲区。在上面的代码中，我们可以将函数的内容复制`argv[1]`到`*ret`它之前的每个参数`va_arg`上。`str`我引用的联机帮助页似乎并没有排除这种情况。

3.  `asprintf`不`free *ret`直接或通过使用`realloc`. 这将避免问题编号 (1)，但如果按上述方式使用，则会泄漏内存。同样，该手册页似乎并未排除它。

## 解决方法

通过将单个调用替换`asprintf`为

```
{
  char *newStr = NULL;
  asprintf(newStr,"%s %s",argv[i],str);
  free(str);
  str = newStr;
} 
```

但这很笨拙。

**共识实现是否保证第一个代码示例是安全正确的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:51:04.957

> 它是否到处泄漏内存？

是的，它确实。

```
char *str = strdup(argv[i]); 
```

这里，`str`包含指向`malloc()`应该是`free()`d 的 ated 内存的指针。

```
asprintf(&str, "%s %s", argv[i], str); 
```

在这里，`asprintf()`修改`str`为指向函数本身分配的其他一些内存。现在您只是丢失了指向`strdup()`ped 字符串的指针，因此发生了泄漏。

# mysql - MySQL如何查询

> ID：15645030
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:47:05.020
> 
> 标签：mysql

我有一个 16k 行的表，其中的列如下

`ID, author_name, letter;`（其中字母是名字的第一个字母）

我想做一个 sql 查询，为来自 az 的每个字母按 3 人一组列出作者

喜欢：

 ``## A

Albert, Ana, Antony,

## B` 

`Ben, Boston, Bell,`
我怎样才能写这个查询？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:58:14.163

尝试这个， ：

```
set @counter =0, @letter:=''; 

select * from 
(select @counter:=if(letter=@letter, @counter+1,1) as counter, @letter = letter,  author
from table
order by letter, author) as t 
where counter<=3
order by letter, name 
```

它用于与以前的值进行比较，并在字母发生变化时重新编号，否则通过递增。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:54:54.383

我已经为你创建了查询

```
SELECT GROUP_CONCAT(id) FROM TABLE NAME ORDER BY id 
SELECT GROUP_CONCAT(author_name) FROM TABLE NAME ORDER BY id 
SELECT GROUP_CONCAT(letter) FROM TABLE NAME ORDER BY id 
```

**现在你会得到这样的结果：**

```
A

Albert, Ana, Antony,

B

Ben, Boston, Bell, 
```

[http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/)`

# ios - iAd 如何搜索要显示的内容？

> ID：15645046
> 
> 赞同：0
> 
> 时间：2013-03-26T18:48:11.103
> 
> 标签：ios, objective-c, iad

我有一个实现 iAd 的 iPhone 应用程序。在调试模式下，一切正常，我在模拟器和设备上正确显示了测试广告，没有特定的日志或错误。

该应用程序已获得批准并且在应用程序商店中，但没有显示任何广告。

我在带有大量文本内容的 UIview 中显示 iAd，但使用意大利语（不知道语言是否重要，顺便说一句，该应用程序在所有应用程序商店中都可用）。

我想知道 iAd 如何搜索内容然后显示相关横幅，以及我如何通过传递（如果可能）标签或预定义内容以某种方式“强制”内容。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:56:07.680

我只是忘记将我的应用程序添加到 iAd 服务。我需要上传一个新版本来解决这个问题。

让我们等待苹果的批准。

谢谢！

# android - 将位图保存到文件

> ID：15645048
> 
> 赞同：1
> 
> 时间：2013-03-26T18:48:24.637
> 
> 标签：android, image, bitmap, save

我试图在 android 指纹应用程序中实现撤消和重做功能。我试图使用下面的代码来实现。

错误

```
03-26 20:42:12.020: W/System.err(28056): java.lang.NullPointerException
03-26 20:42:12.020: W/System.err(28056):    at baked.soft.FirstActivity.toJPEGFile(FirstActivity.java:341)
03-26 20:42:12.020: W/System.err(28056):    at baked.soft.FirstActivity.onOptionsItemSelected(FirstActivity.java:314) 
```

第一活动

```
public boolean onOptionsItemSelected(MenuItem item){
     switch (item.getItemId()) {
     case R.id.tools:
        ll.setVisibility(LinearLayout.VISIBLE);
        return true;
     case R.id.import_pics:
         getPhotos();
         return true;
     case R.id.save:
        toJPEGFile();
     return true;
     case R.id.trash:
         trash();

         return true;
     }
    return false;

}

private void toJPEGFile() {
    // TODO Auto-generated method stub
    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root + "/saved_images");    
    myDir.mkdirs();
    Random generator = new Random();
    int n = 10000;
    n = generator.nextInt(n);
    String fname = "Image-"+ n +".jpg";
    File file = new File (myDir, fname);
    if (file.exists ()) file.delete (); 
    try {
           FileOutputStream out = new FileOutputStream(file);
           finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out); // ERROR 341 LINE
           out.flush();
           out.close();

    } catch (Exception e) {
           e.printStackTrace();
    }
} 
```

我不知道哪里错了。请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:51:56.270

```
 finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out); 
```

正如你所指出的是错误线。

`finalBitmap`尚未初始化。

Aka，它不是位图，它是一个空值。确保首先将位图加载到此变量中。

```
finalBitmap = .... // assign finalBitmap.
finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);  // Then save to file 
```

编辑：

从您的评论中阅读，一种方法是在`onDraw`方法中执行以下操作：

```
 canvas.drawBitmap(bitmap, 0, 0, paint);
  finalBitmap = bitmap; 
```

但同样，我不知道你从哪里得到位图。这是另一个全局变量吗？也许你可以`finalBitmap.compress...`改成`bitmap.compress...`

# windows - Windows Azure 网站延迟

> ID：15645050
> 
> 赞同：1
> 
> 时间：2013-03-26T18:48:37.857
> 
> 标签：windows, azure, web, latency

对于客户端，在 Windows Azure（网站）上运行网站。我在保留模式下运行并且有两个中等实例。我在 Windows 上运行这些 PHP 站点，并且我有一个单独的 MySQL 服务器（在 Windows 上运行）。内存足够，利用率不高，但每分钟或每两分钟一次，我有一个解释为更高的延迟（3 秒，而不是 300 毫秒）。

一个人是否经历过相同的行为，或者认识到这一点？

这一切都发生在一个 Windows Azure 数据中心内。

当我使用工具对其进行负载测试时，该工具认为我的网站在雷德蒙德运行，怎么会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:27:18.217

我相信你所看到的是一个冷热网站的神器。Windows Azure 网站使用热网站的概念进行活动连接，几秒钟后，如果没有与 Azure 网站的活动连接，网站就会变冷。当网站处于冷模式时，第一次启动可能需要更长的时间，但是在随后的连接之后，加载时间非常快。

在这里可以找到类似的讨论： [Very slow opening MySQL connection using MySQL Connector for .net](https://stackoverflow.com/questions/12393614/very-slow-opening-mysql-connection-using-mysql-connector-for-net/12394795#12394795)

# python - Parsing large combined XML document with Python

> ID：15645057
> 
> 赞同：1
> 
> 时间：2013-03-26T18:48:47.470
> 
> 标签：python, xml, elementtree

I have one large document (400 mb), which contains hundreds of XML documents, each with their own declarations. I am trying to parse each document using ElementTree in Python. I am having a lot of trouble with splitting each XML document in order to parse out the information. Here is an example of what the document looks like:

```
<?xml version="1.0"?>
<data>
    <more>
       <p></p>
    </more>
</data>
<?xml version="1.0"?>
<different data>
    <etc>
       <p></p>
    </etc>
</different data>
<?xml version="1.0"?>
<continues.....> 
```

Ideally I would like to read through each XML declaration, parse the data, and continue on with the next XML document. Any suggestions will help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:52:26.577

您需要单独阅读文件；这是一个生成器函数，它将从给定的文件对象生成完整的 XML 文档：

```
def xml_documents(fileobj):
    document = []
    for line in fileobj:
        if line.strip().startswith('<?xml') and document:
                yield ''.join(document)
                document = []
        document.append(line)

    if document:
        yield ''.join(document) 
```

然后用于`ElementTree.fromstring()`加载和解析这些：

```
with open('file_with_multiple_xmldocuments') as fileobj:
    for xml in xml_documents(fileobj):
        tree = ElementTree.fromstring(xml) 
```

# ruby-on-rails - rails search form 'no such column: name' error

> ID：15645059
> 
> 赞同：0
> 
> 时间：2013-03-26T18:48:51.180
> 
> 标签：ruby-on-rails, search-form

I'm trying to implement a simple search box in my index view but it gave me this error:

```
 SQLite3::SQLException: no such column: name: SELECT "tickets".* FROM "tickets"  WHERE (name LIKE '%s%') 
```

I can't figure out why this is and how do I correct it. Below is my MVC

**View**

```
<h1>Listing tickets</h1>
<%= form_tag tickets_path, :method => 'get' do %>
    <p>
      <%= text_field_tag :search, params[:search] %>
      <%= submit_tag 'Search' %>
    </p>
<% end %>
<table>
  <tr>
  ...
  </tr>

<% @tickets.each do |ticket| %>
  <tr>
    <td><%= ticket.caller_name %></td>
    <td><%= ticket.called_date %></td>
    <td><%= ticket.problem %></td>
   ...
<% end %>
</table> 
```

**Model**

```
class Ticket < ActiveRecord::Base
  attr_accessible :called_date, :caller_name, :problem
  has_many :logs, :dependent=>:destroy
  def self.search(search)
    if search
      find(:all, :conditions => ['name LIKE ?', "%#{search}%"])
    else
      find(:all)
    end
  end
end 
```

**Controller**

```
class TicketsController < ApplicationController
  def index
    @tickets = Ticket.all
    @tickets = Ticket.search(params[:search])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @tickets }
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:51:50.837

您正在尝试查询`name`门票表中不存在的列。`caller_name`因此，在您的情况下，只需将其替换为确实存在的列。替换以下行：

```
find(:all, :conditions => ['name LIKE ?', "%#{search}%"]) 
```

和

```
find(:all, :conditions => ['caller_name LIKE ?', "%#{search}%"]) 
```

# function - Returning True for only 1 Function out of the list of 3

> ID：15645061
> 
> 赞同：0
> 
> 时间：2013-03-26T18:48:52.273
> 
> 标签：function, haskell, functional-programming

Since I'm pretty sure that using global variables in Haskell is frowned upon. I'm wondering is there anyway I can achieve the following?

```
-- list has elements that are odd
listHasOdd :: [Integer] -> Bool
-- list has elements that are even
listHasEven :: [Integer] -> Bool
--list has a length > 5
longList :: [Integer] -> Bool

-- Maps the function to a [Bool]
-- This function cannot be modified to fix the problem.
checkList :: [Integer] -> [Bool]
checkList xs = map (\ y -> y xs) listChecker
where listChecker = [listHasOdd, listHasEven, longList] 
```

Is there anyway that I can ensure that only one of them returns true?

> For example, [1,2,3,5], I would want only want listHasOdd to return True which is [True, False, False]. (Evaluated from top to bottom).
> 
> Another example, [2,4,6,8,10,12,14], the returns should be [False, True, False].
> 
> In other words, checkList [1,2,3,5] returns [True, False, False], checkList[2,4,6,8,10,12,14] returns [False, True, False]
> 
> **The last function would always be False in my example, since it is unreachable.

I know I can do an if statement to check if the previous one is `True` but that seems like a pretty dumb idea. Or is that actually the way to do it? (Considering Haskell "remembers" the results of the previous function)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:00:37.780

我看不出它的意义，但是

```
foldr foo [] $ map ($ xs) [listHasOdd, listHasEven, longList]
  where
    foo True zs = True : map (const False) zs
    foo False zs = False : zs 
```

将产生所需的结果，并且它只会评估函数，直到其中一个返回`True`（或到达函数列表的末尾）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:18:11.247

这是我能想到的最好的。例如，它可以相对轻松地概括处理一手扑克牌的可能结果的数量。

```
data Outcome
    = ListHasOdd
    | ListHasEven
    | LongList
    | Nope
  deriving Eq

outcomeFromList :: [Integer] -> Outcome
outcomeFromList xs
    | any odd xs    = ListHasOdd
    | any even xs   = ListHasEven
    | 5 < length xs = LongList
    | otherwise     = Nope

listHasOdd = (ListHasOdd ==) . outcomeFromList
listHasEven = (ListHasEven ==) . outcomeFromList
longList = (LongList ==) . outcomeFromList 
```

`[Bool]`但即使这样也很愚蠢：为什么不直接使用 ，而不是生成 a `Outcome`？

* * *

**编辑：**或者我们可以注意函数的*含义*。

```
listHasOdd xs = any odd xs

listHasEven [] = False
listHasEven xs = all even xs
-- if not all of them are even, then at least one must be odd,
-- and `listHasOdd` would give `True`

longList _ = False
-- if the list has at least 5 elements,
-- then either the list has at least one odd element
-- (and `listHasOdd` would give `True`)
-- or the list has at least five even elements
-- (and `listHasEven` would give `True`) 
```

# java - Jackson Polymorphic Deserialization Field Errors

> ID：15645062
> 
> 赞同：1
> 
> 时间：2013-03-26T18:48:54.267
> 
> 标签：java, spring, polymorphism, jackson

I am getting error when trying to deserialize json into an abstract type.

**Code:**

```
@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="@class")
public abstract class Animal
{
}

public class Dog extends Animal
{
}

public class Zoo
{
    Animal a;
}

@RequestMapping(value = "/zoos", method = RequestMethod.POST)
public void create(@RequestBody Zoo zoo)
{
  ...
} 
```

When I post the following json to zoos:

```
{
    "@class": "com.example.Dog",
    "a": {}
} 
```

I get the error: org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "@class" (Class com.example.Zoo), not marked as ignorable

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:54:50.997

好吧，我是个白痴：

json应该是：

```
{   
    "a": {
        "@class": "com.example.Dog"
     }
} 
```

因为@class 属于动物类型。

# c - Stuck on linked list exercise

> ID：15645066
> 
> 赞同：2
> 
> 时间：2013-03-26T18:49:05.217
> 
> 标签：c

I wrote this function that creates new nodes.

When I add only one node, the program works but if I add the second node I get a segmentation fault, so clearly the problem lies in the "else" part of the function "add_node()" but I can't figure it out.

```
#include <stdio.h>
#include <stdlib.h>

typedef struct node{
    char *city;
    struct node *next;
}node;

node *start = NULL;
node *current;

void add_node(char *cityname) {
    node *y = malloc(sizeof(node));
    y->city = cityname;
    y->next = NULL;
    current = start;

    if(start == NULL) {
        start = y;
    } else {
        while (current != NULL) {
            current = current->next;
        }
        current->next = y;
    }   
}

int main() {
    add_node("Paris");
    add_node("London");

    current = start;

    while(current != NULL) {
        printf("%s\n", current->city);
        current = current->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:51:18.443

您有一个循环运行，直到`current`为 NULL ... 然后您设置`current->next`为`y`，但`current`必须为 NULL。

解决它的一个简单方法是将循环更改为

```
while (current->next != NULL){ 
```

我还要注意，您应该避免使用全局变量。`current`应该是一个局部变量，`start`应该是一个参数......我会称之为它`list`，因为这就是它所代表的。`add_node`应该返回 的（可能是新的）值`list`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:51:53.700

这里：

```
 while (current != NULL) {
        current = current->next;
    }

    current->next = y; 
```

什么时候`while`停止？当`current`成为`null`. 然后`current->next`引发分段错误。

你必须停止一个短的`NULL`。与 相比`current->next`，`NULL`而不是`current`，所以当循环退出时，您仍然指向一个节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:53:22.587

这个循环：

```
while (current != NULL){
    current = current->next;
} 
```

将通过电流直到`current == NULL`。一旦发生这种情况：

```
 current->next = y; 
```

将尝试尊重该 NULL，这当然会导致段错误。你只是想要：

```
while(!current && current->next != NULL) 
```

从技术上讲，您只需要`while(current->next != NULL)`，因为您检查了`start`，但是 IMO 在您尊重它之前检查指针是否为 NULL 是一种很好的做法。

# prolog - How to implement a particular division operator in Prolog?

> ID：15645068
> 
> 赞同：0
> 
> 时间：2013-03-26T18:49:12.577
> 
> 标签：prolog

Implement the division operator in a way that: **A is 12 div 6 div 2** result is: **A = 4**

So I think that I have to create an **infix operator** belonging to the type: **yfx** because this operator have first to calculate 6 div 2 and then calculate 12 div result(6 div 2)

I hope to be clear in my explanation...I know that I have explained the concept in a procedural way, but I did not know how else to express the precedence of the operations to be performed on arguments...

Ok, so I think (I hope) that the **yfx** form of operator is correct...

The problem is that now I don't know how to describe this operator.

In a previous exercise I have defined operator in this way:

```
op(600,xfx,has).

/* perter has information */
has(peter, information). 
```

As I can read on Ivan Bratko book:

> **The operator definitions do not specify any operation or action. *In principle, no operation or data is associated with an operator.***

So I think that I can't define an operator that performs calculations.

So I think that a solution of my exercise could be something like:

```
op(600,yfx,div).

div(X div Y, Division) :- Division is X/Y. 
```

But don't work well and moreover I think that this is not that they asking me to implement.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:26:49.063

div 似乎是一个预先声明的运算符，已经在进行整数除法，那么改变它的关联性就足够了。

这是默认值：

```
?- current_op(P,A,div).
P = 400,
A = yfx. 
```

表现

```
?-  A is 12 div 6 div 2.
A = 1. 
```

随心所欲地改变：

```
?- [user].
|: :-op(400,xfy,div).
|: % user://1 compiled 0,04 sec, 1 clauses
true. 
```

你会得到

```
?- A is 12 div 6 div 2.
A = 4. 
```

请注意，更改预定义的运算符是***不好****的做法*。但我必须说，我不知道是否有任何标准方法可以将运算符添加到 is/2 评估中......

*编辑*SWI-Prolog[有一种](http://www.swi-prolog.org/pldoc/doc/swi/library/arithmetic.pl)添加算术的方法：你得到

```
?- X is 12 mydiv 6 mydiv 2.
X = 4. 
```

后

```
:- op(400,xfy,mydiv).
:- arithmetic_function(mydiv/2).
mydiv(A,B,C) :- C is A div B. 
```

# php - Paypal standard buttons not returning transaction variables

> ID：15645070
> 
> 赞同：1
> 
> 时间：2013-03-26T18:49:24.907
> 
> 标签：php, paypal, sandbox, paypal-sandbox

I'm using PayPal standard buttons in the sandbox environment, but it's driving me bad, I'm using the return custom variable with the rm set to 2, so PayPal should return back to my return URL along with a $_POST array populated with the transaction info, what happens is that it return to my return URL but with an empty $_POST !! What is really driving me mad is that sometimes return with a populated $_POST array, for the same scenario !!! Why is that happening?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:25:45.730

您是否在帐户中启用了 Auto 和 PDT？如果您启用了 PDT，请将其关闭。您是否也尝试在帐户中禁用自动退货的情况下进行测试？试试这两个，看看你是否得到返回的数据。

# c# - Multiplication or if: what is more efficient?

> ID：15645074
> 
> 赞同：-5
> 
> 时间：2013-03-26T18:49:59.700
> 
> 标签：c#, performance, algorithm

I have a binary image (size: 100x100) of a hand, that we can represent as a matrix composed only by 0 or 1 values. This is an example:

![Example of a binary image of a human hand](../Images/42ecf68615e60926a864601294a7863f.png)

Assuming that I have an array of `double` representing the linearized image, and that we call it `image`, I need to perform the following operations:

```
double accumulator = 0;
for (int j = 0; j < image.Length; ++j)
{
    accumulator += image[j] * weights[j];
} 
```

In other words, I need to calculate the weighted sum of each pixel of the `image` array. `weights` represents an array that contains `double` values, and it is used to weight each pixel of the image.

Is the following code more efficient than the previous one?

```
double accumulator = 0;
for (int j = 0; j < image.Length; ++j)
{
    if (image[j] != 0)
    {
        accumulator += image[j] * weights[j];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:53:01.513

答案是——你真的不需要在这个时刻担心这个。如果您的代码运行速度*太慢*，那么您可以尝试一些优化。然而，“太慢”是主观的。

**过早的优化是万恶之源**。

正如 angelatlarge 指出的那样，目前 - 使用易于阅读且易于维护的内容。

# asp.net - Datagrid row not being read code

> ID：15645083
> 
> 赞同：0
> 
> 时间：2013-03-26T18:50:30.377
> 
> 标签：asp.net, vb.net

I have the following code...

```
 Protected Sub GridView1_RowUpdating(ByVal sender As Object, ByVal e As EventArgs) Handles GridView1.RowUpdating
     Dim SocioNumInfo As Integer = CInt(GridView1.Rows(GridView1.SelectedIndex).Cells(4).Text)
     MsgBox(SocioNumInfo.ToString)
     ...
 End Sub 
```

Now, this code should read the cell, but it gives me the following error:

Index was out of range. Must be non-negative and less than the size of the collection. Parameter name: index

The MsgBox is just there for me to check if the data is being read, at the end of the day it should turn that into a parameter so I can add to the DB... but still.. nope nothing. Is that the correct code to read directly from a cell in a choosen row? In the "Protected Sub" area I already tried SelectedIndexChanging and RowEditing, etc... and still nothing. Still throws the error at me.

If I try `Dim SocioNumInfo As String = CStr(GridView1.Rows(GridView1.SelectedRow).Cells(4).Text)` it gives me a "cannot be converted to Integer" error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:31:50.033

如果没有选择行，`GridView1.SelectedIndex`则为`-1`。您可能需要添加支票

```
If GridView1.SelectedIndex <> -1 Then
    ' Use GridView1.SelectedIndex here
End If 
```

但是，像这样访问选定的行会更容易：

```
Dim row = GridView1.SelectedRow
If Not row Is Nothing AndAlso IsNumeric(row.Cells(2).Text) Then
    Dim SocioNumInfo As Integer = CInt(row.Cells(2).Text)
    ....        
End If 
```

请注意，单元格索引是从零开始的。`row.Cells(4)`位于第 5 列。

# r - 在R中将“/”更改为“\”

> ID：15645091
> 
> 赞同：5
> 
> 时间：2013-03-26T18:51:05.883
> 
> 标签：r, backslash, slash

我需要在我的 R 代码中将“/”更改为“\”。我有这样的事情：

```
tmp <- paste(getwd(),"tmp.xls",sep="/") 
```

所以我`tmp`是`c:/Study/tmp.xls`

我希望它是：`c:\Study\tmp.xls`

是否可以在R中更改它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T18:54:25.423

### 根据评论更新。

如果这只是为了保存文件，那么正如@sgibb 建议的那样，您最好使用`file.path()`：

```
 file.path(getwd(), "tmp.xls") 
```

### 更新 2：你*想要*双反斜杠。

tmp 是 a `string`，如果你想有一个实际的反斜杠，你需要转义它——用一个反斜杠。但是，在`R`解释双斜杠时（例如，在查找具有字符串指示的路径的文件时），它将看似双斜杠视为一个。

看看当你输出字符串时会发生什么`cat()`

```
cat("c:\\Study\\tmp.xls")
c:\Study\tmp.xls 
```

第二个斜线已“消失”

* * *

### 原答案：

in `R`, `\`是转义字符，因此如果要按字面意思打印，则需要转义转义字符：`\\`. 这就是你想在你的`paste`陈述中表达的。

您也可以将`.Platform$file.sep`其用作 sep 参数，这将使您的代码更具可移植性。

```
 tmp <- paste(getwd(),"tmp.xls",sep=.Platform$file.sep) 
```

* * *

如果您已经有一个要替换的字符串，您可以使用

```
 gsub("/", "\\", tmp, fixed=TRUE) 
```

# webdriver - 在 selenium 中设置请求标头

> ID：15645093
> 
> 赞同：69
> 
> 时间：2013-03-26T18:51:09.930
> 
> 标签：webdriver, capybara, selenium-webdriver

我正在尝试将请求标头“Referer”设置为欺骗来自另一个站点的请求。我们需要使用一个特定的referrer的能力测试，它返回一个特定的表单给用户，否则给出一个替代的表单。

我可以通过以下方式在 poltergeist 中做到这一点：

```
page.driver.headers = {"Referer" => referer_string} 
```

但我找不到 selemium 驱动程序的等效功能。

如何在 capybara selenium 驱动程序中设置请求标头？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-26T20:51:07.407

Webdriver 不包含执行此操作的 API。有关更多信息，请参阅[Selenium tracker 的 issue 141 。](https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/141)这个问题的标题说它是关于响应头的，但决定 Selenium 不会在这个问题的范围内包含用于请求头的 API。添加 API 设置请求标头的几个问题已被标记为重复：[第一](https://code.google.com/p/selenium/issues/detail?id=2047)、[第二](https://code.google.com/p/selenium/issues/detail?id=919)、[第三](https://code.google.com/p/selenium/issues/detail?id=2462)。

以下是我可以提出的几种可能性：

1.  使用另一个驱动程序/库而不是 selenium
2.  编写一个特定于浏览器的插件（或查找现有插件），允许您为请求添加标头。
3.  使用[browsermob-proxy](https://github.com/lightbody/browsermob-proxy)或其他一些代理。

在大多数情况下，我会选择选项 3。这并不难。

请注意，[Ghostdriver 有一个 API，](https://github.com/detro/ghostdriver/pull/229)但其他驱动程序不支持它。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2018-08-19T15:44:29.250

对于那些使用 Python 的人，您可以考虑使用[Selenium Wire](https://github.com/wkeeling/selenium-wire)，它可以设置请求标头并为您提供检查请求和响应的能力。

```
from seleniumwire import webdriver  # Import from seleniumwire

# Create a new instance of the Chrome driver (or Firefox)
driver = webdriver.Chrome()

# Create a request interceptor
def interceptor(request):
    del request.headers['Referer']  # Delete the header first
    request.headers['Referer'] = 'some_referer'

# Set the interceptor on the driver
driver.request_interceptor = interceptor

# All requests will now use 'some_referer' for the referer
driver.get('https://mysite') 
```

安装：

```
pip install selenium-wire 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-01-06T20:54:15.883

我遇到过同样的问题。我解决了它下载 modify-headers firefox 插件并用 selenium 激活它。

python中的代码如下

```
fp = webdriver.FirefoxProfile()
path_modify_header = 'C:/xxxxxxx/modify_headers-0.7.1.1-fx.xpi'
fp.add_extension(path_modify_header)

fp.set_preference("modifyheaders.headers.count", 1)
fp.set_preference("modifyheaders.headers.action0", "Add")
fp.set_preference("modifyheaders.headers.name0", "Name_of_header") # Set here the name of the header
fp.set_preference("modifyheaders.headers.value0", "value_of_header") # Set here the value of the header
fp.set_preference("modifyheaders.headers.enabled0", True)
fp.set_preference("modifyheaders.config.active", True)
fp.set_preference("modifyheaders.config.alwaysOn", True)

driver = webdriver.Firefox(firefox_profile=fp) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-19T17:46:22.760

今天有同样的问题，除了我需要为每个测试设置不同的推荐人。我最终使用了一个中间件和一个类来将标头传递给它。以为我会分享（或者也许有更清洁的解决方案？）：

```
lib/request_headers.rb:

class CustomHeadersHelper
  cattr_accessor :headers
end

class RequestHeaders
  def initialize(app, helper = nil)
    @app, @helper = app, helper
  end

  def call(env)
    if @helper
      headers = @helper.headers

      if headers.is_a?(Hash)
        headers.each do |k,v|
          env["HTTP_#{k.upcase.gsub("-", "_")}"] = v
        end
      end
    end

    @app.call(env)
  end
end 
```

* * *

```
config/initializers/middleware.rb

require 'request_headers'

if %w(test cucumber).include?(Rails.env)
  Rails.application.config.middleware.insert_before Rack::Lock, "RequestHeaders", CustomHeadersHelper
end 
```

* * *

```
spec/support/capybara_headers.rb

require 'request_headers'

module CapybaraHeaderHelpers
  shared_context "navigating within the site" do
    before(:each) { add_headers("Referer" => Capybara.app_host + "/") }
  end

  def add_headers(custom_headers)
    if Capybara.current_driver == :rack_test
      custom_headers.each do |name, value|
        page.driver.browser.header(name, value)
      end
    else
      CustomHeadersHelper.headers = custom_headers
    end
  end
end 
```

* * *

```
spec/spec_helper.rb

...
config.include CapybaraHeaderHelpers 
```

然后我可以在任何需要的地方包含共享上下文，或者在另一个`before`块中传递不同的标题。除了 Selenium 和 RackTest 之外，我还没有使用其他任何东西对其进行过测试，但它应该是透明的，因为在请求实际到达应用程序之前完成了标头注入。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-24T21:06:53.157

如果您使用的是 javacsript 并且只想在 chrome 上实现，那么[Puppeteer](https://developers.google.com/web/tools/puppeteer)是最好的选择，因为它具有修改标头的本机支持。看看这个：[https ://pptr.dev/#?product=Puppeteer&version=v10.1.0&show=api-pagesetextrahttpheadersheaders](https://pptr.dev/#?product=Puppeteer&version=v10.1.0&show=api-pagesetextrahttpheadersheaders)

尽管对于跨浏览器的使用，您可以查看`@requestly/selenium`npm 包。它是请求扩展的包装器，可以轻松集成到 selenium- [webdriver](https://requestly.io)。扩展可以修改标头。查看：[https ://www.npmjs.com/package/@requestly/selenium](https://www.npmjs.com/package/@requestly/selenium)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-04T15:10:12.523

我想为 RSpec/Ruby 提供一些更精简的东西，以便自定义代码只需要放在一个地方。这是我的解决方案：

```
/spec/support/selenium.rb
...
RSpec.configure do |config|
  config.after(:suite) do
    $custom_headers = nil
  end
end

module RequestWithExtraHeaders
  def headers
    $custom_headers.each do |key, value|
      self.set_header "HTTP_#{key}", value
    end if $custom_headers

    super
  end
end
class ActionDispatch::Request
  prepend RequestWithExtraHeaders
end 
```

然后在我的规格中：

```
/specs/features/something_spec.rb
...
$custom_headers = {"Referer" => referer_string} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-23T18:09:31.520

如果使用`HtmlUnitDriver`，则可以通过修改 来设置请求标头`WebClient`，如下所示：

```
final case class Header(name: String, value: String)

final class HtmlUnitDriverWithHeaders(headers: Seq[Header]) extends HtmlUnitDriver {
  super.modifyWebClient {
    val client = super.getWebClient
    headers.foreach(h => client.addRequestHeader(h.name, h.value))
    client
  }
} 
```

然后，标头将出现在 Web 浏览器发出的所有请求上。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-06T10:55:38.580

直接在 Web 驱动程序中设置请求标头不起作用。这是真实的。

**但是，您可以通过使用浏览器 devtools** （我使用 edge 和 chrome 进行测试）来解决这个问题，并且效果很好。

根据文档，您可以添加自定义标头： [https ://chromedevtools.github.io/devtools-protocol/tot/Network/](https://chromedevtools.github.io/devtools-protocol/tot/Network/)

请在下面找到一个示例。

```
 [Test]
    public async Task AuthenticatedRequest()
    {
        await LogMessage("=== starting the test ===");

        EdgeOptions options = new EdgeOptions {UseChromium = true};
        options.AddArgument("no-sandbox");
        var driver = new RemoteWebDriver(new Uri(_testsSettings.GridUrl), options.ToCapabilities(), TimeSpan.FromMinutes(3));

        //Get DevTools
        IDevTools devTools = driver;

        //DevTools Session
        var session = devTools.GetDevToolsSession();

        var devToolsSession = session.GetVersionSpecificDomains<DevToolsSessionDomains>();
        await devToolsSession.Network.Enable(new Network.EnableCommandSettings());

        var extraHeader = new Network.Headers();
        var data = await Base64KerberosTicket();
        var headerValue = $"Negotiate {data}";

        await LogMessage($"header values is {headerValue}");

        extraHeader.Add("Authorization", headerValue);
        await devToolsSession.Network.SetExtraHTTPHeaders(new Network.SetExtraHTTPHeadersCommandSettings
        {
            Headers = extraHeader
        });

        driver.Url = _testsSettings.TestUrl;

        driver.Navigate();
        driver.Quit();

        await LogMessage("=== ending the test ===");
    } 
```

这是一个用 C# 编写的示例，但同样适用于 java、python 以及主要平台。

希望对社区有所帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-17T10:54:52.353

With the solutions already discussed above the most reliable one is using `Browsermob-Proxy`

But while working with the remote grid machine, Browsermob-proxy isn't really helpful.

This is how I fixed the problem in my case. Hopefully, might be helpful for anyone with a similar setup.

1.  Add the ModHeader extension to the chrome browser

How to download the Modheader? Link

```
ChromeOptions options = new ChromeOptions();
options.addExtensions(new File(C://Downloads//modheader//modheader.crx));

// Set the Desired capabilities 
DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setCapability(ChromeOptions.CAPABILITY, options);

// Instantiate the chrome driver with capabilities
WebDriver driver = new RemoteWebDriver(new URL(YOUR_HUB_URL), options); 
```

2.  Go to the browser extensions and capture the Local Storage context ID of the ModHeader

[![Capture ID from ModHeader](../Images/ee8659b4c1a3df7f51eebfe3b8c99978.png)](https://i.stack.imgur.com/WV5yi.png)

3.  Navigate to the URL of the ModHeader to set the Local Storage Context

.

```
// set the context on the extension so the localStorage can be accessed
driver.get("chrome-extension://idgpnmonknjnojddfkpgkljpfnnfcklj/_generated_background_page.html");

Where `idgpnmonknjnojddfkpgkljpfnnfcklj` is the value captured from the Step# 2 
```

4.  Now add the headers to the request using `Javascript`

.

```
 ((Javascript)driver).executeScript(
         "localStorage.setItem('profiles', JSON.stringify([{  title: 'Selenium', hideComment: true, appendMode: '', 
             headers: [                        
               {enabled: true, name: 'token-1', value: 'value-1', comment: ''},
               {enabled: true, name: 'token-2', value: 'value-2', comment: ''}
             ],                          
             respHeaders: [],
             filters: []
          }]));"); 
```

Where `token-1`, `value-1`, `token-2`, `value-2` are the request headers and values that are to be added.

5.  Now navigate to the required web-application.

    `driver.get("your-desired-website");`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-12-22T13:11:29.123

您可以使用 PhantomJSDriver 来完成。

```
PhantomJSDriver pd = ((PhantomJSDriver) ((WebDriverFacade) getDriver()).getProxiedDriver());
pd.executePhantomJS(
            "this.onResourceRequested = function(request, net) {" +
            "   net.setHeader('header-name', 'header-value')" +
            "};"); 
```

使用请求对象，您还可以进行过滤，这样就不会为每个请求设置标头。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2019-05-04T05:41:49.450

看看这个：chrome_options = Options()

```
chrome_options.add_argument('--headless')
chrome_options.add_argument('user-agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36"') 
```

问题解决了！

# actionscript-3 - ActionScript 3 parseFloat 返回小于 1 的指数小数

> ID：15645097
> 
> 赞同：0
> 
> 时间：2013-03-26T18:51:20.333
> 
> 标签：actionscript-3, actionscript, exponent, parsefloat

我有一个用 Flex/ActionScript 3 编写的计算器应用程序，我正在努力理解 parseFloat 的一些行为。任何包含小于 0 且至少有 4 位的十进制值的字符串都将作为指数返回。为什么 parseFloat 会以这种方式运行，我可以将值作为浮点数而不是指数来获取吗？

```
parseFloat("0.004");
//returns 0.004 like I would expect

parseFloat("1.0004");
//returns 1.0004 like I would expect

parseFloat("0.0004");
//returns 4.0E-4 but I want 0.0004 
```

# html - css：定位同一类中的类

> ID：15645101
> 
> 赞同：0
> 
> 时间：2013-03-26T18:51:27.337
> 
> 标签：html, css, css-selectors

我目前正在做一个 Wordpress 项目。它有一个 3 级菜单。

`.submenu`必须隐藏，直到它在同一页面上。现在我必须隐藏`.submenu`，它在 submeu 内。

我该如何定位这个？

我必须瞄准`#mainmenu > . submenu > .submenu`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:54:18.090

正是这样`#mainmenu .submenu .submenu`。

# r - 为什么差别这么大？

> ID：15645108
> 
> 赞同：0
> 
> 时间：2013-03-26T16:15:47.790
> 
> 标签：r, optimization

我想知道，为什么 fitdistr 和手动优化之间有这么大的区别？

我的代码：

```
data<-c(1:1000)
fitdistr(data, "t")

logfunction <-function(par){
if(par[2]>0 & par[3]>0) return(-sum(log(dt((data-par[1])/par[2],df=par[3])/par[2])))
else return(Inf)
}

optim(c(0,0.1,2.5),logfunction) 
```

fitdistr 的输出：

```
 m            s            df    
  500.500000   288.355653   366.450581 
 (  9.143496) (  6.468072) (285.589770) 
```

opitm 的输出：

```
[1] 499.5142 292.9602 304.5050 
```

为什么第二个参数和第三个参数差别这么大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:44:53.550

拨打的电话`fitdistr`相当于

```
optim(c(median(x), IQR(x)/2, 10), logfunction, method="BFGS") 
```

它为您提供了不同的答案，因为您从不同的点开始并使用不同的算法（您的呼叫使用 Nelder-Mead，默认为`optim`.）

# ember.js - Ember 真的是单页应用吗？

> ID：15645109
> 
> 赞同：5
> 
> 时间：2013-03-26T18:51:46.880
> 
> 标签：ember.js, single-page-application

我已经研究[Ember.js](http://emberjs.com)大约一周了，我研究的所有示例都是单页应用程序。我被告知要做一个扩展超过 30 页的项目，我不知道目录结构是什么，也不知道 Ember 是否是最好的工具，因为我从未见过链接到项目中其他页面的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T19:29:31.810

是的，ember 是一个单页应用程序，因为您只转到一个页面，它会加载应用程序，然后您不需要从 ember 应用程序处理所有内容的服务器获取更多页面。对于像您建议的那种更大的应用程序，您可以将每种对象类型（模型、控制器、路由、模板、视图等）放入它们自己的目录中以进行组织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T10:46:21.373

我非常喜欢将 Ember JS 用于 SPA，因为它很灵活，但是在浏览器支持方面，我别无选择，只能使用 Knockout JS 来实现 SPA！

它们都非常适合 SPA，Ember 可以提供更多，但对于那些仍然必须支持 IE7 的人来说，最好的选择是 Knockout JS...

希望能帮助到你 ：）

# eclipse - 如何在 Eclipse 中的包级别运行 scalatest

> ID：15645113
> 
> 赞同：3
> 
> 时间：2013-03-26T18:51:53.917
> 
> 标签：eclipse, scalatest

我在带有 Scala 2.10 的 Eclipse (Juno) 中使用 ScalaTest，并且 RunConfigurations 窗口能够运行测试文件、测试套件或测试包。当我在资源管理器窗口中右键单击包名称时，可以选择运行包（从而运行该包中的所有测试）。但是，当我这样做时，不会运行任何测试，它会显示：

```
WARNING: -p has been deprecated and will be reused for a different (but still very cool) purpose in ScalaTest 2.0\. Please change all uses of -p to -R.
Run starting. Expected test count is: 0
DiscoverySuite:
Run completed in 57 milliseconds.
Total number of tests run: 0
Suites: completed 1, aborted 0
Tests: succeeded 0, failed 0, ignored 0, pending 0
All tests passed. 
```

那么，我还需要做什么才能运行包中的所有测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T00:57:00.483

这就是我从 Eclipse 运行配置中运行所有测试的方式：

*   选择运行->运行配置
*   在弹出窗口中选择左侧的 ScalaTest“文件夹”
*   点击左上角的“新建午餐配置”按钮
*   在 Main 选项卡上为您的测试运行配置提供一些有意义的名称并确保选择了您的目标项目，然后选择“Suite”单选按钮作为类型
*   在“Suite Class”字段中，在一定包含所有测试的级别输入包的名称，例如“org.fred.myprog.*”。注意通配符“*”。
*   点击 Apply 按钮并切换到 Arguments 选项卡
*   在“VM Arguments”字段中输入类似“-XX:PermSize=64m -XX:MaxPermSize=256m -Xms256m -Xmx512m”的内容。这是必需的，因为通配符触发的测试发现往往需要大量内存。
*   点击应用按钮，然后点击运行按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T14:39:33.000

This is the blind leading the blind, but what I found was that when you move the test classes into the same package as the tested classes, then the discovery works.

Weird.

# django - post_save 错误消息'没有属性

> ID：15645116
> 
> 赞同：0
> 
> 时间：2013-03-26T18:52:03.293
> 
> 标签：django, django-signals

我第一次尝试使用信号**post_save**。我已阅读文件，但仍需要一些建议。

我正在尝试更新名为“charge”的模型字段。

```
@receiver(post_save, sender=Message)
def my_handler(sender, **kwargs):
    if not sender.charge:
        sender(charge=sender.length(sender))
        sender.save() 
```

但是，这给出了错误消息'没有属性'charge'，但是消息中确实存在费用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:03:22.033

`sender`这是`Message`类本身，而不是正在保存的实例。实际实例作为关键字参数传递`instance`。此外，`post_save`如果你不小心，你会让自己陷入无限循环。更好用`pre_save`。

```
@receiver(pre_save, sender=Message)
def my_handler(sender, **kwargs):
    instance = kwargs['instance']
    if not instance.charge:
        instance.charge = instance.length()
        # No need to save, as we're slipping the value in 
        # before we hit the database. 
```

# c# - C# 中的波形分析

> ID：15645119
> 
> 赞同：0
> 
> 时间：2013-03-26T18:52:21.173
> 
> 标签：c#, .net, audio, analysis, waveform

我正在从事一个涉及鸟叫声波形分析的研究项目。基本上需要发生的是，我们将识别代表特定类型呼叫的“基线”鸟叫音频文件，然后将我们收集的样本与这些基线文件进行比较，以确定它是否与特定类型的呼叫匹配。由于我们团队的成员是手动执行此操作，因此非常耗时。我认为我们可以自动化这个过程，但我不确定最好的起点。我看过一些讨论 FFT 的文章，查看了 NI Measurement Studio（对于企业版来说相当昂贵），以及其他一些线程，但似乎没有什么是可行的解决方案。

有没有人在 C# 中做过这样的事情？.NET 中是否有用于波形分析的内置库？我是不是因为这个想法而陷入了声学指纹识别？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:56:38.557

我不知道有任何图书馆提供你所追求的东西。也许具有必要功能的数学库就足够了？如果是这样，我过去非常成功地使用了[alglib的 FFT 功能。](http://www.alglib.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:18:24.737

我建议从 Matlab 作为一个平台开始，并首先研究使用 cepstra 进行语音识别的算法。( [http://en.wikipedia.org/wiki/Cepstrum](http://en.wikipedia.org/wiki/Cepstrum) ) 阅读文献，然后尝试使用现有的 Matlab 工具对鸟叫进行语音识别。

# jquery - 告诉一个元素根据页面上其他人的状态显示自己？

> ID：15645120
> 
> 赞同：1
> 
> 时间：2013-03-26T18:52:23.430
> 
> 标签：jquery

我的页面上有 3 个隐藏的 div，以及一个可见的通用“欢迎”消息。这些 div 的左侧是一些项目，单击这些项目会切换它们各自的 div（以及其他 div）。这一切都按预期工作。

```
var $jq = jQuery.noConflict(true); 
$jq(function() { 
$jq("#fade1").click(function(){ 
    $jq("#div1").fadeToggle(750); 
    $jq("#div2").fadeOut(1); 
    $jq("#div3").fadeOut(1);
    $jq("#welcomediv").fadeOut(1);
}); 
$jq("#fade2").click(function(){ 
    $jq("#div1").fadeOut(1); 
    $jq("#div3").fadeOut(1); 
    $jq("#div2").fadeToggle(750); 
    $jq("#welcomediv").fadeOut(1);
}); 
$jq("#fade3").click(function(){ 
    $jq("#div1").fadeOut(1); 
    $jq("#div2").fadeOut(1); 
    $jq("#div3").fadeToggle(750);
    $jq("#welcomediv").fadeOut(1);
});
}); 
```

然后我尝试添加一个 if 语句，告诉欢迎消息在没有其他可见的情况下显示自己，例如，如果用户单击一个将其淡入，然后再次单击它以将其淡出。目前的行为只会为用户留下空白空间。

```
 if ($jq("#div1:hidden") && $jq("#div2:hidden") && $jq("#div3:hidden")){
    (function(){
        $jq("#welcomediv").fadeIn(500);
    });
}; 
```

我也试过直接检查 CSS，比如

```
if ($jq("#div1").css("display", "none") && $jq("#div2").css("display", "none") &&     $jq("#div3").css("display", "none") {
    $jq("#welcomediv").fadeIn(500);
}); 
```

或者

```
if ($('div.x').css('height') === 'auto') {
$('.y').removeClass('a'); 
```

}

这些似乎都不起作用。当点击各自的链接时，div 仍然淡入淡出，但我的 if 语句什么也不做。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:54:13.413

要检查元素是否不可见，请使用：

```
if ($jq(selector).is(':hidden') && ... ) 
```

您还应该能够使用以下命令检查所有三个是否可见：

```
if ($jq('#div1:hidden,#div2:hidden,#div3:hidden').length === 3) { ... } 
```

# java - Spring MVC表单使用modelAttribute提交

> ID：15645122
> 
> 赞同：0
> 
> 时间：2013-03-26T18:52:28.570
> 
> 标签：java, spring, spring-mvc

我有类似的东西

```
@RequestMapping("/showRegister")
public String showUserRegistrationForm(ModelMap modelMap) {
    modelMap.addAttribute("user", new UserBean());
    return "Register";
}

@RequestMapping("/RegisterUser")
public String registerUser(@ModelAttribute("user") UserBean userBean,
        BindingResult result, ModelMap modelMap) {
    System.out.println(userBean.getPassword());
    return "Register";
} 
```

在我的代码中。

以上工作完美。现在假设我想将表单中的模态数据保存到多个表中，每个表都有自己的 POJO 类。那么代码将如何不仅接收 UserBean 作为模型属性，还接收其他类。我是否必须创建一个包含来自这两个类的数据的新 POJO，或者是否有其他方法。

**编辑**

我阅读了有关 DTO 的信息。但它不是重复 POJO 的吗？我们不能混合使用 2-3 个 POJO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:32:05.090

您可以创建一个“表单”bean，并将您的 UserBean 和任何其他 pojo 作为成员添加到其中。我实际上更喜欢这样做，因为它使复杂的验证更容易并且更加独立。

```
public class MyFormBean {

private UserBean userBean;
private MyOtherBean otherBean;

// Add getters and setters as needed

} 
```

然后您的表单需要引用正确的路径以深入了解您的对象。如果你有类似的东西：

```
<form:input path="name" /> 
```

你会把它改成

```
<form:input path="userBean.name" /> 
```

# linux - 切割匹配并放在另一个位置

> ID：15645123
> 
> 赞同：2
> 
> 时间：2013-03-26T18:52:35.647
> 
> 标签：linux, bash, sed, awk

如何剪切方括号内的数字并将它们放在文本的开头？

例如：

```
some_text123_[12345]_some_text

after:
12345_some_text123_[]_some_text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:49:38.957

这是另一个 sed 变体，使用保持空间来移动东西。并不是说这是最好的方法，但它很有趣。

```
sed -e 'h;s/.*\[\([0-9]*\)\].*/\1/;x;s/\[.*\]/[]/;H;g;s/\n//' 
```

h 命令将当前行复制到保持空间中。然后我们隔离 [ 和 ] 之间的数字。x 交换原始行的数字，因此保留空间仅包含数字。然后我们这次丢弃 [] 之间的所有内容，并将结果附加到保存空间中的数字。获取保留空间（g），删除嵌入的换行符，然后就可以了。

```
$ echo "some_text123_[12345]_some_text" | sed -e 'h;s/.*\[\([0-9]*\)\].*/\1/;x;s/\[.*\]/[]/;H;g;s/\n//'
12345some_text123_[]_some_text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:41:47.130

我尝试使用`perl`.

这个 perl 一个班轮应该可以工作。

```
$ echo some_text123_[123]_some_text | perl -ne 'print "$1_", "$`", "$'\''\n" if /\[(\d+?)\]/;' - 
```

只是为了解释 perl 正则表达式引擎的特殊变量：

$1 - 这是我想在匹配时保留的东西。

$` - 比赛前的一切

$' - 比赛后的一切

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:00:24.380

尝试使用`sed`，匹配：

1.  一组字符
2.  一个括号，然后是数字，然后是另一个括号
3.  另一组字符

正则表达式可以是`(.*) (\[[0-9]+\]) (.*)`（没有空格）。然后，按顺序将匹配替换为组`2-1-3`。

```
$ echo "some_text_[12345]_some_text" | sed "s_(.*)\[([0-9]+)\](.*)_\2\1[]\3_g"
12345some_text_[]_some_text 
```

# sql - Sql 查询：未选择行

> ID：15645124
> 
> 赞同：2
> 
> 时间：2013-03-26T18:52:37.093
> 
> 标签：sql, oracle10g

我尝试了 sql 语句的不同变体，但我仍然得到“没有选择行”。我不知道我哪里错了！

这是问题：

我必须列出经理为“Green”的员工组织的会议的标题。

与查询关联的表是：

`Employee_C`桌子：

```
EID  NAME   SALARY           MID
---    -------------------- -----
e01   Wilson    53000
e02   Smith      48000       e01
e03   Jones      38000       e01
e04   Loftus     41000
e05   Fox        54000       e04
e06   Smith      45000       e04
e07   Green      48000
e08   Fox        49000       e04
e09   Wolf       41000       e04
e10   Wang        32000      e01
e11   Phillips    33000      e07
e12   Liu         27000      e07 
```

`Conference_C`桌子：

```
CONFID              TITLE                     LOCATION          SDATE
------        --------------------       -------------------- ---------
c00001    Hydroinformatics                  Singapore          15-JUN-12
c00002    Ecological_modeling               Berlin             15-JUL-12
c00003    Computational_M                   London             25-MAY-12
c00004    Ecoinformatics                    Boston             22-AUG-12
c00005    Uncertainty_analysis              Athens             10-OCT-12
c00006    Large_databases                   Toronto            13-APR-12
c00007    Systems_analysis                  Boston             23-MAR-12
c00008    Systems_integration               Tokyo              24-FEB-12
c00009    Aquatic_biology                   Helsinki           12-MAY-12
c00010    Information_systems               Paris               08-JAN-12
c00011    Simulation_modeling               Rome                01-SEP-12
c00012    DSS                               Melbourne          18-DEC-12 
```

`Deals_C`桌子：

```
EID   CONFID
---    ------
e02   c00001
e03   c00001
e05   c00001
e06   c00001
e03   c00002
e08   c00002
e09   c00002
e10   c00002
e03   c00003
e05   c00003
e06   c00004
e08   c00005
e09   c00005
e10   c00005
e06   c00005
e11   c00006
e12   c00006
e05   c00007
e06   c00007
e08   c00007
e09   c00008
e10   c00008
e11   c00008
e02   c00009
e12   c00009
e10   c00010
e02   c00011
e03   c00011
e05   c00011
e12   c00012
e06   c00012 
```

我拥有的sql语句是：

```
select C.Title 
from Conference_C C 
where C.ConfID in (select D.ConfID
                   from  Deals_C D 
                   where D.eid in (select E.eid 
                                   from Employee_C E 
                                   where E.Name = 'Green')); 
```

我得到“没有选择行”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:03:24.827

您查询的问题是您正在检查错误的员工数据。您的`WHERE`子句正在检查`EID`to the`EID`时，它​​确实应该检查`Deals_C.EID`to the `Employees.MID`：

```
select C.Title 
from Conference_C C 
inner join
(
  select D.ConfID, e.eid
  from Deals_C D 
  inner join Employee_C e
    on d.EID= e.EID
  where exists (select *
                from Employee_C e2
                where E2.Name = 'Green'
                  and e.mid = e2.eid)
) d
  on c.CONFID = d.CONFID 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/45897/6)。

该`EXISTS`查询返回具有姓氏的行，`Green`但您需要检查`Employee_C.MID`子查询`EID`。

这也可以写成：

```
select C.Title 
from Conference_C C 
where C.ConfID in (select D.ConfID
                   from Deals_C D 
                   inner join Employee_C e
                     on d.EID= e.EID
                   where exists (select *
                                 from Employee_C e2
                                 where E2.Name = 'Green'
                                   and e.mid = e2.eid)); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/45897/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T22:59:42.793

我刚遇到这个问题。我“没有选择行”的原因仅仅是因为我的 sqlcase 设置为 UPPER 并且我以小写形式查询。即 WHERE empName LIKE '_a%'; 我将 sqlcase 设置为混合并解决了我的问题。似乎引号之间的字符串区分大小写。希望能帮助到你。

# axapta - 在服务器启动时使用 aotimport

> ID：15645127
> 
> 赞同：1
> 
> 时间：2013-03-26T18:52:52.223
> 
> 标签：axapta, dynamics-ax-2009, x++, aot

我正在尝试设置我的 AX 环境之一，以便在服务器进程启动时导入 XPO。因为环境会定期从生产环境更新，并且代码需要对这个（非生产）环境是唯一的，所以最好的选择似乎是在启动时使用 AOTImport 命令。但是，我无法确定确切的语法/设置以使其正常工作。

查看系统代码，似乎语法应该是`aotimport_[path to file]`. 这个对吗？服务器似乎没有抱怨这个命令，但是有问题的文件没有被导入。我也尝试过这个命令的变体，但没有看到它起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:03:50.657

我假设您正在尝试对`SysStartupCmd`类执行命令。**如果是这样，则在 AX客户端**启动时触发此方法，而不是 AOS。它记录在此页面上：

[http://msdn.microsoft.com/en-us/library/aa569641(v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/aa569641(v=ax.50).aspx)

如果要自动执行此导入，可以在运行导入的构建工作流上安排 AX 客户端 (ax32.exe) 的执行（建议在导入后运行完整编译）。这在 SO 上的其他问题上进行了讨论。

# c# - 计算校验和中的流链：避免内存问题

> ID：15645128
> 
> 赞同：2
> 
> 时间：2013-03-26T18:52:52.957
> 
> 标签：c#, xml, xml-parsing, stream, checksum

我有一个`FileStream`连接到我想直接读入 SHA512 对象的 xml 文件，以便为校验和（不是安全用途）计算哈希值。

这个问题是双重的：

1.  我想省略xml中的一些节点，
2.  该文件非常大，我宁愿不将整个内容加载到内存中

我可以将整个文件读入 xml 结构，删除节点，然后将其写入一个流，然后将其插入`SHA512.ComputeHash`，但这会导致性能损失。我希望能够以某种方式删除节点作为对流的操作，然后以某种方式将流链接在一起，形成一个可以传递到`SHA512.ComputeHash(Stream)`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:15:45.583

```
using (var hash = new SHA512Cng())
using (var stream = new CryptoStream(Stream.Null, hash, CryptoStreamMode.Write))
using (var writer = XmlWriter.Create(stream))
using (var reader = XmlReader.Create("input.xml"))
{
    while (reader.Read())
    {
        // ... write node to writer ...
    }

    writer.Flush();
    stream.FlushFinalBlock();
    var result = hash.Hash;
} 
```

# java - Java类返回windows命令行信息

> ID：15645131
> 
> 赞同：1
> 
> 时间：2013-03-26T18:52:57.253
> 
> 标签：java, command-line

我可以使用下面的代码从命令行执行命令。如果将工作命令传递给它处理的代码并给我一个返回值。我需要的是在无法正确处理时从命令行获取响应。因此，如果我将复制命令传递给提示符并执行它，我会得到一个值。如果我将复制命令传递给提示并且它失败了，我将没有任何价值。这是我的代码

```
public String CommandLineExecuteReturn(String loc)
 {
    String returnValue = "";
    String outValue = null;
    try 
     {   
       Process p = Runtime.getRuntime().exec("cmd.exe /c "+ loc);   
       BufferedReader in = new BufferedReader(   
                           new InputStreamReader(p.getInputStream()));   
       String line = null;   
       while ((line = in.readLine()) != null) 
        {   
          ; 
           returnValue = line;
        }   
      } 
    catch (IOException e) 
      {   
        StringWriter sw = new StringWriter();
        e.printStackTrace(new PrintWriter(sw));
        String stacktrace = sw.toString();
        returnValue = stacktrace;   
      }   

    return returnValue ;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:57:08.277

您还需要重定向错误流 ( `p.getErrorStream()`) - 请注意，从两个流中读取都需要两个线程。

或者更容易，您可以使用 a[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28boolean%29)并调用它的`redirectErrorStream(true)`方法。

另见[这篇文章](https://stackoverflow.com/questions/3754841/how-to-make-a-java-program-to-print-both-out-println-and-err-println-stateme)。

# r - 在 R 中创建和处理异常

> ID：15645133
> 
> 赞同：2
> 
> 时间：2013-03-26T18:53:09.427
> 
> 标签：r, exception, exception-handling

我想要一个函数，它针对特定的异常抛出并返回一条消息，然后简单地检查返回的内容是否是我定义的“异常”之一。例如说我有这个功能：

```
divideByX <- function(x){
    # If x is NA throws exception
    if(is.na(x)){
        return(exception('x is NA'))
    }
    # If x is 0 throws exception
    else if(x == 0){
        return(exception('Cannot divide by zero'))
    }
    else{
        return(10/x)
    }
} 
```

因此，如果 x 为 0，则返回异常“不能除以零”，如果 x 为 NA，则返回异常“x 为 NA”，对于 x 的所有其他值，它会尝试计算表达式 10/x。

然后我想运行这样的东西：

```
tempList <- list('a' = 2, 'b' = 0, 'c' = 5, 'd' = NA)
lapply(tempList, function(x){
   if(is.exception(x)){
       return(x)
   }
   else{
       y <- divideByX(x)
       return(y^2)
   }
 }) 
```

所以它首先检查该值是否是我定义的异常之一，如果是则返回消息，否则它将我的值平方，所以上面应该返回

```
$a
[1] 25

$b
[1] 'Cannot divide by zero'

$c
[1] 4

$d
[1] 'x is NA' 
```

有谁知道做到这一点的最佳方法？如果有任何不清楚的地方，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:08:34.810

创建一个函数来生成异常。异常可以是扩展简单错误类的线性层次结构

```
exception <-
    function(class, msg)
{
    cond <- simpleError(msg)
    class(cond) <- c(class, "MyException", class(cond))
    stop(cond)
} 
```

这是你的功能

```
divideByX <- function(x){
    # If x is 0 throws exception
    if (length(x) != 1) {
        exception("NonScalar", "x is not length 1")
    } else if (is.na(x)) {
        exception("IsNA", "x is NA")
    } else if (x == 0) {
        exception("DivByZero", "divide by zero")
    }
    10 / x
} 
```

并用于生成您要求的输出

```
lapply(tempList, function(x) tryCatch({
    divideByX(x)
}, MyException=function(err) {
    conditionMessage(err)
})) 
```

或以不同的方式对待某些异常

```
> lapply(list(NA, 3:5), function(x) tryCatch({
+     divideByX(x)
+ }, IsNA=function(err) {
+     warning(err)  # signal a warning, return NA
+     NA
+ }, NonScalar=function(err) {
+     stop(err)     # fail
+ }))
Error: x is not length 1
In addition: Warning message:
x is NA 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T19:08:19.513

除非你总是除以 10，否则你会希望在 yoru 函数中包含分子。

```
 divideByX <- function(X, num=10) { 

    if(is.na(X)) 
        return('X is NA')
    if(X == 0) 
        return('Cannot divide by zero')

    return(num / X)
    } 
```

用法：

```
y <- 3
lapply(tempList, divideByX, num=y^2)
#   $a
#   [1] 4.5
#   
#   $b
#   [1] "Cannot divide by zero"
#   
#   $c
#   [1] 1.8
#   
#   $d 
#   [1] "X is NA" 
```

# opencv - 从网络摄像头搜索图像（Google Goggles 风格）

> ID：15645134
> 
> 赞同：0
> 
> 时间：2013-03-26T18:53:13.720
> 
> 标签：opencv, computer-vision

我想使用网络摄像头从我拥有的数据库中查找图像。

具体来说，我想建立一个“价格亭”，人们可以在其中拿着一件物品走到相机前，让它在数据库中搜索价格。出于几个原因（易用性是最重要的）我不想在产品中使用条形码。

这些项目相对容易扫描（出于实际目的，它们是二维的：它们是漫画书）。我已经扫描了所有封面。所以我想要的是某种从网络摄像头获取图像并将其用作搜索源的方法。当然，图像会失真（角度、焦点、分辨率、照明、旋转等）。这对 Google Goggles（真的是 Google 图片）来说不是问题，因为我已经在多种情况下扫描了漫画书封面，并且能够找到它们。

现在，我一直在做一些研究。我用 OpenCV 做的事情看起来非常棒，这让我觉得这应该不会太难实现。特别是考虑到我的数据集比谷歌的要小得多（大约 2000 种不同的产品）。

我在寻找什么，具体是什么？物体检测、识别、特征……？我很困惑，我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:50:56.140

Read up on SIFT: (Scale invariant feature transform)

# c# - 如何在 HTTP 模块中执行虚拟路径？

> ID：15645136
> 
> 赞同：0
> 
> 时间：2013-03-26T18:53:16.737
> 
> 标签：c#, asp.net, httpmodule

我正在尝试在 HTTP 模块中执行虚拟路径（我想捕获结果）。

但我收到一个错误：

> 执行 /home/something/ 的子请求时出错。

代码：

```
public void ExecuteUrl(string url)
{
    var sb = new StringBuilder();
    var sw = new StringWriter(sb);
    HttpContext.Current.Server.Execute(url, sw);
    return sb.ToString();
} 
```

另一个[相关问题](https://stackoverflow.com/questions/2361690/server-transfer-throws-error-executing-child-request-how-to-resolve)说这是设计使然，并且接受的答案对我不起作用，因为我想捕获结果。

我可以采取另一种方法吗？

# apache - mod_pagespeed 没有发送带有扩展缓存的预期输出

> ID：15645140
> 
> 赞同：0
> 
> 时间：2013-03-26T18:53:37.023
> 
> 标签：apache, cache-control, pagespeed, mod-pagespeed

出于测试目的，我在我的 Apache 配置中有这个：

```
<Directory "/home/http">
    ...
    <FilesMatch "\.(html|htm)$">
        Header unset Etag
        Header set Cache-control "max-age=0, no-cache"
    </FilesMatch>

    <FilesMatch "\.(jpg|jpeg|gif|png|js|css)$">
        Header unset Etag
        Header set Cache-control "public, max-age=10"
    </FilesMatch>
</Directory> 
```

这基本上是说将静态资产设置为具有持续 10 秒的缓存。这也是为了测试和演示目的。

我通过直接导航到文件来测试它

```
$ wget -O - --save-headers localhost/mod_pagespeed_example/images/Puzzle.jpg
Cache-control: public, max-age=10 
```

效果很好。但后来我尝试加载启用了 mod_pagespeed 和 extend_cache 的页面

```
$wget -O - --save-headers localhost/mod_pagespeed_example/extend_cache.html?ModPagespeed=on&ModPagespeedFilters=extend_cache
<img src="images/Puzzle.jpg"/>

$wget -O - --save-headers localhost/mod_pagespeed_example/extend_cache.html?ModPagespeed=on&ModPagespeedFilters=extend_cache
<img src="http://localhost/mod_pagespeed_example/images/xPuzzle.jpg.pagespeed.ic.hgbHsZe0IN.jpg"/> 
```

这一切都很好，花花公子。初始请求不起作用，因为它需要将信息加载到缓存中，但从那里它正确地将 img 标记的 src 替换为缓存的哈希版本。

然而，这只持续到最大年龄。所以，如果我将它设置为 10 秒，它会继续指向`http://localhost/mod_pagespeed_example/images/xPuzzle.jpg.pagespeed.ic.hgbHsZe0IN.jpg`，但`images/Puzzle.jpg`在 10 秒后它会再次恢复，此时它会回到缓存的版本。

这是预期的行为吗？我认为 pagespeed 会在 max-age 之后检查哈希，如果它相同，它不会费心将其更改回原始值，而是继续提供缓存文件。

这有点令人担忧。如果我将 max-age 设置为更有用的值，比如 60 分钟，这将允许我继续更新这些资产文件并确保及时看到我的更新。但是，如果用户每天访问该站点一次，那么这将超过 max-age 并且将始终为他们提供原始文件而不是缓存版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:48:02.097

这是预期的行为。正如您所提到的，原因是资源在缓存中已过期，因此我们需要重新检查它以确保它仍然相同。我们不想在检查所有子资源时阻止用户请求。

请注意，对此的一种解决方案是使用[ModPagespeedLoadFromFile](https://developers.google.com/speed/docs/mod_pagespeed/domains#ModPagespeedLoadFromFile)。这将检查文件在磁盘上的最后修改时间，因此即使资源在缓存中过期也可以检查。

# php - 解析 url，获取哈希值，追加和重定向 URL

> ID：15645147
> 
> 赞同：-1
> 
> 时间：2013-03-26T18:54:07.203
> 
> 标签：php

我有一个获取数据数组的 PHP foreach 循环。一个特定的数组是href。在我的 echo 声明中，我将特定的 href 附加到我的下一页，如下所示：

```
echo '<a href="nextpage.php?url='.stats.'">Stats</a>' 
```

它重定向到我的下一页，我可以通过 $_GET 获取 URL。问题是我想获取附加 URL 中 # 之后的值。例如，下一页上的 URL 如下所示：

```
stats.php?url=basket-planet.com/ru/results/ukraine/?date=2013-03-17#game-2919 
```

我想要做的是能够在第一页上用 javascript 或 jQuery 获取#game-2919，将其附加到 URL 并转到 stats.php 页面。这甚至可能吗？我知道我无法在 PHP 中获得 # 之后的值，因为它没有发送到服务器端。有解决方法吗？

这就是我的想法：

```
echo '<a href="#" onclick="stats('.$stats.');">Stats</a>';

<script type="text/javascript">
  function stats(url){
    var hash = window.location.hash.replace("#", "");
    alert (hash);
  } 
```

但这不起作用，我没有收到任何警报，所以我什至无法尝试 AJAX 并重定向到下一页。提前致谢。

更新：这是我的整个 index.php 页面。

```
<?php
include_once ('simple_html_dom.php');
$html = file_get_html('http://basket-planet.com/ru/');
foreach ($html->find('div[class=games] div[class=games-1] div[class=game]') as $games){
  $stats = $games->children(5)->href;
  echo '<table?
          <tr><td>
            <a href="stats.php?url=http://www.basket-planet.com'.$stats.'">Stats</a>
          </td></tr>
        </table>';
        }
?> 
```

我的 stats.php 页面：

```
<?php include_once ('simple_html_dom.php');
$url = $_GET['url'];
//$hash = $_GET['hash'];
$html = file_get_html(''.$url.'');
$stats = $html->find('div[class=fullStats]', 3);
    //$stats = $html->find('div[class='.$hash.']');
echo $stats;
?> 
```

我想要做的是将哈希添加到传递给 stats.php 的 URL 中。没有太多代码，因为我使用的是简单的 HTML DOM 解析器。我希望能够使用来自 stats.php URL 的哈希来查看传递的 URL。希望有帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:17:19.257

生成 HREF 时在 PHP 中使用 urlencode，这样当用户单击链接时，浏览器不会丢弃哈希部分：

索引.php：

```
<?php
include_once ('simple_html_dom.php');
$html = file_get_html('http://basket-planet.com/ru/');

echo '<table>';
foreach ($html->find('div[class=games] div[class=games-1] div[class=game]') as $games){
  $stats = $games->children(5)->href;
  echo '<tr><td>
            <a href="stats.php?url=http://www.basket-planet.com'.urlencode($stats).'">Stats</a>
          </td></tr>';
}
echo '</table>';
?> 
```

然后在第二页上，从 url 中[解析](http://php.net/manual/en/function.parse-url.php)出哈希部分。

stats.php：

```
<?php
include_once ('simple_html_dom.php');

$url = $_GET['url'];
$parsed_url = parse_url($url);
$hash = $parsed_url['fragment'];

$html = file_get_html(''.$url.'');
//$stats = $html->find('div[class=fullStats]', 3);
$stats = $html->find('div[class='.$hash.']');
echo $stats;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:56:31.927

这是你要找的吗？

```
function stats(url)
{

  window.location.hash = url.substring(url.indexOf("#") + 1)

  document.location.href = window.location

} 
```

如果您当前的 URL 是`index.php#test`并且您调用`stats('test.php#index')`它会将您重定向到`index.php#index`.

或者，如果您想将当前 URL 的哈希添加到自定义 URL：

```
function stats(url)
{
  document.location.href = url + window.location.hash
} 
```

如果您当前的 URL 是`index.php#test`并且您调用`stats('stats.php')`它会将您重定向到`stats.php#test`.

对您的评论：

```
function stats(url)
{

  var parts = url.split('#')

  return parts[0] + (-1 === parts[0].indexOf('?') ? '?' : '&') + 'hash=' + parts[1] 

}

// stats.php?hash=test
alert(stats('stats.php#test'))

// stats.php?example&hash=test
alert(stats('stats.php?example#test')) 
```

# c++ - 如何使 Stata 插件不依赖于变量的顺序？

> ID：15645148
> 
> 赞同：1
> 
> 时间：2013-03-26T18:54:07.903
> 
> 标签：c++, c, stata

我正在用 C++ 为 Stata 编写一个插件，在我看来，访问数据取决于传递给插件的变量的顺序，因为`SF_vdata()`只需要整数参数来索引变量。

我目前最好的解决方案是首先运行`ds`，存储包含所有变量名的宏，然后调用我的插件。然后，我的插件可以在宏中搜索它感兴趣的变量，并让索引库位于列表中的位置。

这可行，但我希望我的插件不依赖于首先运行的某些 Stata 命令。`ds`我知道这很愚蠢，因为插件需要以特定方式格式化数据集，但是在调用我的插件之前必须先调用和存储宏感觉有些不对劲。

如果`ds`不先调用，是否可以从插件内部访问变量名的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-14T05:18:06.777

我同意尼克的观点。不幸的是，您的宏解决方案是唯一的答案，也是我使用的。您只能使用 SF_data 函数直接访问数据，作为“矩阵”，这就是您默认获得的所有数据，没有像表格中的标题。我使用宏来保存所有数据信息并传递整个数据集，读取我感兴趣的变量，就像你一样，甚至写了翻译器来保留格式设置，但还没有使用值标签。

# c++ - 使用多个着色器时出现驱动程序错误

> ID：15645149
> 
> 赞同：3
> 
> 时间：2013-03-26T18:54:07.997
> 
> 标签：c++, shader, directx-11

我正在使用 3 种不同的着色器：

*   使用 DirectX11 的曲面细分功能的曲面细分着色器 :)
*   一个常规着色器，用于显示没有曲面细分的外观
*   和一个文本着色器来显示调试信息，例如 FPS、模型计数等。

所有这些着色器都在开始时被初始化。

使用键盘，我可以在曲面细分着色器和常规着色器之间切换来渲染场景。此外，我还希望能够使用文本着色器切换调试信息的显示。

由于实现了镶嵌着色器，文本着色器不再起作用。当我激活 DebugText（使用文本着色器渲染）时，我的屏幕会变黑一段时间，Windows 会显示以下消息：

> 显示驱动程序停止响应并已恢复

![显示驱动程序停止](../Images/37b1bb4665ef707746d46ea98aecb99f.png)

这发生在用于渲染场景的两个着色器中的任何一个上。

另外：我可以使用常规着色器启动应用程序来渲染场景，然后切换到镶嵌着色器。如果我尝试切换回常规着色器，我会得到与文本着色器相同的错误。

在着色器之间切换时我做错了什么？同时显示文本时我做错了什么？

我可以发布什么文件来帮助您帮助我？：） 谢谢

PS我已经检查过我的按键输入是否在错误的时间中断（在渲染期间左右..），但这似乎没问题

## 测试程序

1.  没有文本着色器的常规着色器 ![常规着色器](../Images/32ff370ea31e103336c36f2e8837227b.png)
2.  通过 keyinput 将文本着色器添加到常规着色器（现在可以使用，我将文本着色器构建回仅顶点和像素着色器）（z 缓冲区的某些东西仍然是错误的......） ![常规着色器和字体着色器](../Images/f0d213310b97dc62bd7b9d70ce11cf8b.png)
3.  移除文本着色器，然后通过按键输入将着色器更改为镶嵌着色器 ![没有字体着色器的镶嵌着色器](../Images/d8bf40ef3ed17c5806f438ba921b803d.png)
4.  然后如果我添加文本着色器或切换回常规着色器 ![显示驱动程序停止](../Images/37b1bb4665ef707746d46ea98aecb99f.png)

## 切换/渲染着色器

这里是来自 Renderer.cpp 的代码片段，我根据布尔值“m_useTessellationShader”在其中选择着色器：

```
if(m_useTessellationShader) 
{
    // Render the model using the tesselation shader
    ecResult = m_ShaderManager->renderTessellationShader(m_D3D->getDeviceContext(), meshes[lod_level]->getIndexCount(), 
        worldMatrix, viewMatrix, projectionMatrix, textures, texturecount, 
        m_Light->getDirection(), m_Light->getAmbientColor(), m_Light->getDiffuseColor(), 
        (D3DXVECTOR3)m_Camera->getPosition(), TESSELLATION_AMOUNT);
} else { 
    // todo: loaded model depends on distance to camera
    // Render the model using the light shader.
    ecResult = m_ShaderManager->renderShader(m_D3D->getDeviceContext(), 
        meshes[lod_level]->getIndexCount(), lod_level, textures, texturecount,
        m_Light->getDirection(), m_Light->getAmbientColor(), m_Light->getDiffuseColor(),
        worldMatrix, viewMatrix, projectionMatrix);
} 
```

这里是来自 Mesh.cpp 的代码片段，我根据布尔值“useTessellationShader”在其中选择类型：

```
// RenderBuffers is called from the Render function. The purpose of this function is to set the vertex buffer and index buffer as active on the input assembler in the GPU. Once the GPU has an active vertex buffer it can then use the shader to render that buffer.
void Mesh::renderBuffers(ID3D11DeviceContext* deviceContext, bool useTessellationShader)
{
    unsigned int stride;
    unsigned int offset;

    // Set vertex buffer stride and offset.
    stride = sizeof(VertexType); 
    offset = 0;

    // Set the vertex buffer to active in the input assembler so it can be rendered.
    deviceContext->IASetVertexBuffers(0, 1, &m_vertexBuffer, &stride, &offset);

    // Set the index buffer to active in the input assembler so it can be rendered.
    deviceContext->IASetIndexBuffer(m_indexBuffer, DXGI_FORMAT_R32_UINT, 0);

    // Check which Shader is used to set the appropriate Topology
    // Set the type of primitive that should be rendered from this vertex buffer, in this case triangles.
    if(useTessellationShader)
    {       
        deviceContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_3_CONTROL_POINT_PATCHLIST);
    }else{
        deviceContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);
    }

    return;
} 
```

## 渲染着色器

有时仅使用顶点和像素着色器并在使用顶点、外壳、域和像素着色器进行切换后会出现问题吗？这里是我的架构的一些概述：

*   TextClass：使用 font.vs 和 font.ps

    deviceContext->VSSetShader(m_vertexShader, NULL, 0); deviceContext->PSSetShader(m_pixelShader, NULL, 0); deviceContext->PSSetSamplers(0, 1, &m_sampleState);

*   RegularShader：使用 vertex.vs 和 pixel.ps

    deviceContext->VSSetShader(m_vertexShader, NULL, 0); deviceContext->PSSetShader(m_pixelShader, NULL, 0); deviceContext->PSSetSamplers(0, 1, &m_sampleState);

*   TessellationShader：使用 tessellation.vs、tessellation.hs、tessellation.ds、tessellation.ps

    deviceContext->VSSetShader(m_vertexShader, NULL, 0); deviceContext->HSSetShader(m_hullShader, NULL, 0); deviceContext->DSSetShader(m_domainShader, NULL, 0); deviceContext->PSSetShader(m_pixelShader, NULL, 0); deviceContext->PSSetSamplers(0, 1, &m_sampleState);

## 清除状态

我想在 2 个着色器之间切换，它们似乎有不同的上下文参数，对吧？在[clearstate 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476389%28v=vs.85%29.aspx)中，它说它将以下参数重置为 NULL：

我在我的 Direct3D 类中发现了以下内容：

*   深度模板状态 -> m_deviceContext->OMSetDepthStencilState
*   光栅化器状态 -> m_deviceContext->RSSetState(m_rasterState);
*   混合状态 -> m_device->CreateBlendState
*   视口-> m_deviceContext->RSSetViewports(1, &viewport);

我在每个着色器类中都发现了以下内容：

*   输入/输出资源槽 -> deviceContext->PSSetShaderResources
*   着色器 -> deviceContext->VSSetShader 到 - deviceContext->PSSetShader
*   输入布局-> 设备-> CreateInputLayout
*   采样器状态 -> 设备 -> CreateSamplerState

这两个我不明白，我在哪里可以找到它们？

*   谓词->？
*   剪刀矩形->？

我是否需要将它们全部存储在本地以便我可以在它们之间切换，因为通过每个开关（键输入）重新初始化 Direct3d 和着色器感觉不对？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:19:59.310

您是否检查过系统是否正在重置设备。检查 Present() 方法的返回变量。当突然切换着色器时，DX 往往会出于某种奇怪的原因重置设备。

如果这是问题所在，只需重新创建设备和上下文就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:03:25.177

现在你有

```
void Direct3D::endScene()
{
    // Present the back buffer to the screen since rendering is complete.
    if(m_vsync_enabled)
    {
        // Lock to screen refresh rate.
        m_swapChain->Present(1, 0);
    }
    else
    {
        // Present as fast as possible.
        m_swapChain->Present(0, 0);
    }

    return;
} 
```

我建议做这样的事情来捕捉 Present() 的返回值

```
ULONG Direct3D::endScene()
{
  int synch = 0;

  if(m_vsync_enabled)
    synch = 1;

  // Present as fast as possible or synch it to 1 vertical blank
  return m_swapChain->Present(synch, 0);
} 
```

当然这只是我的做法，还有很多。另外，我忘了告诉你我过去遇到的问题也是使用效果库。您是否在系统中重新编译过它？如果没有，那就这样做。或者甚至更好地摆脱它，这就是我在解决问题时所做的。

# linux - 在一个客户端上打开数百个 TCP (Websocket) 连接

> ID：15645151
> 
> 赞同：0
> 
> 时间：2013-03-26T18:54:08.780
> 
> 标签：linux, tcp, websocket, redhat, ulimit

我想弄清楚我的服务器可以处理多少个连接。这就是为什么我编写了一个实际上创建了很多连接（websocket-connections）的脚本。

这可以找到直到 200 个连接然后它停止！我猜这与系统限制有关：Red Hat Linux

我试图更改 ulimit 的值，但它不起作用 - >重新启动后它们消失了

我还更改了 max File Handler 的值：

```
cat /proc/sys/fs/file-max 
900000 
```

-> 重启后也消失了

有人可以告诉我我遇到了什么样的系统限制以及如何永久更改它？！

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
file size               (blocks, -f) 14904
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 1
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 14904
virtual memory          (kbytes, -v) unlimited 
```

# php - 是什么导致了这个（phperror_reporting）

> ID：15645152
> 
> 赞同：0
> 
> 时间：2013-03-26T18:54:10.037
> 
> 标签：php

这是我的代码的顶部：

```
<?php
error_reporting(E_ALL); 
```

即使我在 error_reporting(E_ALL); 之前做了 100 个空行 （或任何其他功能），我收到此错误：

```
Fatal error: Call to undefined function phperror_reporting() 
```

这是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:06:43.400

检查您的文件编码，根据服务器的不同，它可能会以不同的方式解析行尾，即 windows 使用 CRLF 行尾 ( `\r\n`) 而 linux/mac 只使用换行符 ( `\n`)。尝试将行尾分隔符（在用于编写代码的文本编辑器中）切换为 CRLF，因为它在两种环境中都能正常工作，看看是否能解决问题。

# java - 来自 WSDL 的 JAX-WS 端口

> ID：15645154
> 
> 赞同：0
> 
> 时间：2013-03-26T18:54:17.663
> 
> 标签：java, web-services, wsdl, jax-ws, port

我有一个 JAX-WS 导入的 WSDL 客户端。当我尝试连接到 web 服务端点时，JAX-WS 客户端会尝试加载 WSDL。为什么？

*   我不想将 WSDL**存储**在我的项目中，
*   我不想再次从 Web 服务 URL**加载WSDL？**

**问题**：

*   有没有机会绕过这种行为？
*   如何在运行时添加 Web 服务端点 URL？

添加具有相同 QName 和端口名称的端口失败，因为我无法添加相同的端口。添加不同的端口是可以的，但我无法从 web 服务委托中获取它，因为 WSDL 不包含添加的端口定义。

JAX-WS 似乎是完全错误的方式:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:53:28.607

今天你很幸运。正如你所提到的，有一种方法。

```
QName qname = new QName("http://thenamespace", "FooService");
FooService service = new FooService(null, qname); // null for ignore WSDL file
Foo port = service.getFooPort();
BindingProvider bindingProvider = (BindingProvider) port;
bindingProvider.getRequestContext()
    .put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,
    "http://foo.com/soap/fooBean");

// Use the service
Object obj = port.doSomething(param); 
```

# iphone - willSendRequestForAuthenticationChallenge 未调用

> ID：15645156
> 
> 赞同：8
> 
> 时间：2013-03-26T18:54:22.607
> 
> 标签：iphone, ios, objective-c

我正在尝试验证 iOS 应用程序中的服务器证书。

我遇到问题的委托方法是：

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
```

当我使用诸如“ [https://twitter.com](https://twitter.com) ”之类的服务器时会调用此方法。

但是，当我将它指向我的生产服务器（政府 CA）时，这个方法根本不会被调用。

我猜这个证书可以被认为是自签名证书，因为如果您没有安装 gov 证书，您会在浏览器中收到“此连接不受信任”消息。

有没有办法强制调用 willSendRequestForAuthenticationChallenge 并检查自签名证书？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-08T06:36:00.280

这个问题已经被问过一段时间了，但我想我会给来的人一个答案。

据我了解，每个主机每 10 分钟仅调用一次身份验证质询。挑战的结果是缓存性能。缓存将在 10 分钟后过期。（[http://en.wikipedia.org/wiki/Transport_Layer_Security#Resumed_TLS_handshake](http://en.wikipedia.org/wiki/Transport_Layer_Security#Resumed_TLS_handshake)）

**jblack**在这里给出了很好的见解，他参考了 Apple 论坛：[如何使用 NSURLConnection 取消持久连接？](https://stackoverflow.com/questions/13369386/how-to-cancel-a-persistent-connection-using-nsurlconnection)

当我遇到类似的问题和问题时，让我感到困惑的是我在应用程序中使用同一个主机进行多个操作，因此挑战已在其他地方接受，但在我的 NSURLConnection 触发之前尚未过期，因此我从未得到挑战（没有必要）。

尝试将主机隔离到这一请求，然后您应该得到回调。

希望能帮助到你。

# oauth - 使用 OAuth2.0 从用户的 Google 帐户可以访问哪些类型的信息？

> ID：15645157
> 
> 赞同：0
> 
> 时间：2013-03-26T18:54:23.360
> 
> 标签：oauth, oauth-2.0, google-oauth

如果您让用户使用 Google 的身份验证登录您的网站，那么您可以获得哪些关于他们的信息？具体来说，你能得到谷歌收集的他们的广告偏好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:05:31.730

我不知道有任何 Google API 会显示用户的广告偏好。您可以使用 Ad Preference Manager 查看您自己的 Ad Preferences，但它没有 API 允许授权人员查看其他人的偏好。

# objective-c - GCovr 没有生成有效的报告

> ID：15645160
> 
> 赞同：5
> 
> 时间：2013-03-26T18:54:27.210
> 
> 标签：objective-c, jenkins, code-coverage, cobertura, gcovr

我想用 Cobertura 设置我的 Jenkins 来跟踪代码覆盖率。不幸的是，我无法生成有效的 xml。

我在用着：

*   gcovr 2.5 预发行版 (r2774)
*   Xcode 4.6.1 构建版本 4H512

我的项目正在正确生成代码覆盖率文件，但使用 gcovr 创建的报告没有用。

我用来生成报告的命令是：

```
gcovr -r /Users/Shared/Jenkins/Home/jobs/CodeCoverage/workspace 
--object-directory /Users/Shared/Jenkins/Home/Library/Developer/Xcode/DerivedData/myProject-aooceqwwovrizceerghqvhflcfty//Build/Intermediates/myProject.build/Development/myProject.build/Objects-normal/x86_64 
--exclude '.*Developer.*' 
--exclude '.*Tests.*' 
--xml 
```

这将为我创建此输出：

```
<?xml version="1.0" ?>
<!DOCTYPE coverage SYSTEM 'http://cobertura.sourceforge.net/xml/coverage-03.dtd'>
<coverage branch-rate="0.0" line-rate="0.0" timestamp="1364322914" version="gcovr 2.5-prerelease (r2774)">
<sources>
    <source>
        /Users/Shared/Jenkins/Home/jobs/CodeCoverage/workspace/Project/myProject/
    </source>
</sources>
<packages/>
</coverage> 
```

**附加信息：**

如果我删除 --object-directory 和 -r 然后我从派生数据目录执行命令，则会生成有效报告。该报告可以从 cobertura 读取，但不能显示有关源文件的任何详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T22:03:05.163

在使用 XCode 时，我发现`$WORKSPACE/build`用作构建目录有助于解决这个问题。这将派生数据目录排除在外，并将我的目标文件整齐地保存在构建目录中。它还可以防止两个构建相互干扰。

如果使用 Xcode 构建工具，请在工具的构建配置中设置`SYMROOT`为。`$WORKSPACE/build`如果您从命令行构建，请在命令行或环境中手动设置。

然后是一个 gcovr 脚本，例如：

```
/your/path/to/gcovr -r . --object-directory build/YourApp.build/Coverage-iphonesimulator/YourApp.build/Objects-normal/i386 --xml > build/coverage.xml 
```

（您的路径可能会略有不同，具体取决于您所称的构建风格等）

最后在 Cobertura 配置中，指向`build/coverage.xml`，当您在 Jenkins 中使用该工具时，您应该会获得带注释的源代码。

应该做的伎俩。我对我们小型 Mac Mini 农场的配置非常满意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T12:48:15.107

*gcovr*应该从 .gcda 和 .gcno 文件所在的文件夹中执行。根路径是源文件（.c 或 .cpp）所在的文件夹。

有了这个，命令看起来如下所示。

**`rr-mac:gcdaFolder$ gcovr -r /path_to_C_sourceFiles/ .`**

对于以下命令有效的输出 html 文件

**`rr-mac:gcdaFolder$ gcovr --html -o Filename_rp.html -r /path_to_C_sourceFiles/ .`**

注意：最后的点（。）是强制性的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T15:46:39.723

`gcovr`python 脚本似乎不支持源代码树构建。

我在这里提出了一个关于此的错误报告[https://github.com/gcovr/gcovr/issues/61](https://github.com/gcovr/gcovr/issues/61)

# html - 如何加载引导缩略图

> ID：15645161
> 
> 赞同：28
> 
> 时间：2013-03-26T18:54:35.597
> 
> 标签：html, twitter-bootstrap, image

我已经开始在一个项目中使用 Bootstrap，尤其是 Thumbnails 组件。在[文档的缩略图示例中](http://twitter.github.com/bootstrap/components.html#thumbnails)，显示了以下示例代码：

```
<ul class="thumbnails">
  <li class="span4">
    <a href="#" class="thumbnail">
      <img data-src="holder.js/300x200" alt="">
    </a>
  </li>
  ...
</ul> 
```

注意使用`data-src`替换标签`src`上的常用属性。`<img>`

我认为要让我的缩略图正常工作，我应该使用`data-src`而不是`src`图像，但情况似乎并非如此。我只能通过定义`src`属性来加载图像。似乎[其他人也有同样的问题](https://stackoverflow.com/questions/14862758/bootstrap-thumbnail-list-is-not-showing-thumbnails)。

这是文档中的错字，还是我没有正确理解如何使用`data-src`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-26T22:35:02.653

`data-src`我相信引导人员使用的唯一原因`src`是`holder.js`. 您应该使用`src`而不是`data-src`因为`data-src`仅用于生成一定大小的示例图像的javascript库，并且`src`是用于指定图像位置的普通属性（来源：[W3C](http://www.w3.org/wiki/HTML/Elements/img#HTML_Attributes)）

**他们为什么在文档中使用`data-src`？**我想即使是在[holder.js 文档](http://imsky.github.com/holder/)`<img src="holder.js/100x200"></img>`中的语法也被库接受，当我们访问页面时，即使在显示图像时它也会在图像中引发 404 错误，因为在指定的路径，有什么奇怪的。

**为什么他们把它放在文档代码中？**我真的不知道。很可能是个错误。但我相信你应该`src`在`data-src`缩略图中使用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-17T07:21:01.467

## 如何使用它

`holder.js`在您的 HTML 中包含：

```
<script src="holder.js"></script> 
```

Holder 将处理所有具有特定`src`属性的图像，例如：

```
<img src="holder.js/200x300"> 
```

上面的标签将呈现为 200 像素宽和 300 像素高的占位符。

为避免控制台 404 错误，您可以`data-src`使用`src`.

Holder 还包括对主题的支持，以帮助占位符融入您的布局。有 6 个默认主题：`sky`、`vine`、`lava`、`gray`、`industrial`和`social`。你可以像这样使用它们：

```
<img src="holder.js/200x300/industrial"> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-19T19:42:24.543

Bootstrap 在其文档中使用 Holder 作为缩略图。

[Holder github page](https://github.com/imsky/holder)上有很好的解释。

> 在您的 HTML 中包含 holder.js。Holder 将处理具有特定 src 属性的所有图像...该标签将呈现为占位符。为避免控制台 404 错误，您可以使用 data-src 代替 src。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-09T22:04:28.460

为了让这个工作，我不得不在 holder 中调用 run() 函数。

我正在使用 require 加载主干视图，在我的视图中我包括持有者

```
var Holder = require('holderjs'); 
```

然后在渲染里面我可以运行

```
Holder.run(); 
```

在我的模板中，我有

```
<div class="row">
<div class="col-sm-6 col-md-4">
<div class="thumbnail">
  <img data-src="holder.js/200x200/text:hello world">
  <div class="caption">
    <h3>Thumbnail label</h3>
    <p>...</p>
    <p><a href="#" class="btn btn-primary" role="button">Button</a> <a href="#" class="btn btn-default" role="button">Button</a></p>
  </div>
</div> 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-25T06:53:40.450

我也想不通，据我了解 holder.js 实际上是一个完全独立的 js 文件，充当来自[http://imsky.github.io/holder/的 img 占位符](http://imsky.github.io/holder/)

data-src 用于传递给 javascript，/100x200 是您希望 javascript 'holder.js' 为真实 img 占用的图片的尺寸。

我认为这个想法是使用这个 (data-src="holder.js/300x200") 进行原型设计，然后用大小图片 (src="Logo.png") 替换它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-20T17:46:52.613

对于寻找如何与 NPM/build 作业一起使用的未来 Google 员工，这在我的案例中是有效的：

```
window.Holder = require('holderjs').default; 
```

# java - 使用 Javadoc 生成 API 文档

> ID：15645163
> 
> 赞同：0
> 
> 时间：2013-03-26T18:54:41.933
> 
> 标签：java, javadoc

我正在为我正在处理的项目编写 Javadocs，并希望利用`@link`标签将每个端点链接到为每个方法生成的 javadoc。

理想情况下，我想做与此类似的事情：

```
POST /api/resources      calls {@link Resource#getAll()     Resource@getAll}
GET  /api/resources/{id} calls {@link Resource#getById(int) Resource#getById} 
```

我对任何类似的解决方案都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:40:45.590

Maven 有一个功能允许您在其中编写 HTML 标记，`src/main/javadoc/overview.html`它将处理所有 Javadoc 标记并将输出写入 Javadoc 主页面。

如果您使用 markdown 生成 overview.html 页面，这非常有效

# mysql - 复杂搜索 SQL 查询

> ID：15645164
> 
> 赞同：0
> 
> 时间：2013-03-26T18:54:44.297
> 
> 标签：mysql, select

我需要你的 sql 查询帮助。

我需要在数学元素具有最小顺序的表中选择值，目前我有以下查询：

```
SELECT p.confirmation,
  p.lname,
  p.fname,
  p.profiletype,
  a.address1,
  a.city,
  c.contactinfo
FROM profile p
LEFT JOIN contact c
  ON p.confirmation = c.profileid
  AND c.ord = 1
LEFT JOIN address a
  ON p.confirmation = a.profileid
  AND a.ord =1 
```

当最小的 "a.ord" 或 c.ord" 为 1 时，这很有效。但最小值并不总是一，它可能是任何其他数字，所以我尝试了以下但没有成功：

```
SELECT p.confirmation,
  p.lname,
  p.fname,
  p.profiletype,
  a.address1,
  a.city,
  c.contactinfo
FROM profile p
LEFT JOIN contact c
  ON p.confirmation = c.profileid
  min(c.ord)
LEFT JOIN address a
  ON p.confirmation = a.profileid
  min(a.ord) 
```

我已将“AND a.ord =1”替换为“min(a.ord)”，但没有成功。

如果不进行两个单独的查询，我怎么能这样做。

有没有办法我可以添加一些东西

```
SELECT c.ord FROM contact c WHERE p.confirmation = c.profileid ORDER BY c.ord LIMIT 1 
```

在当前的 SQL 里面？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:20:40.867

您可以通过计算每个表的最小值然后在连接中使用它来做到这一点：

```
SELECT p.confirmation, p.lname, p.fname, p.profiletype,
       a.address1, a.city, c.contactinfo
FROM profile p LEFT JOIN
     (select c.profileid, MIN(c.ord) as minord
      from contact c
      group by c.profileid
     ) minco
     on minco.profileid = c.profileid left join
     contact c
     ON p.confirmation = c.profileid and minco.minord = c.ord LEFT JOIN
     (select a.profileid, min(a.ord) as minord
      from address a
      group by a.profileid
     ) minao
     on minao.profileid = c.profileid left join
     address a
     ON p.confirmation = a.profileid and minao.minord = a.ord 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:22:56.590

只需在 MySQL 中使用 LIMIT 1 即可获得排序后的第一行：

```
SELECT p.confirmation,
  p.lname,
  p.fname,
  p.profiletype,
  a.address1,
  a.city,
  c.contactinfo
FROM profile p
LEFT JOIN contact c
  ON p.confirmation = c.profileid
LEFT JOIN address a
  ON p.confirmation = a.profileid
ORDER BY c.ord, a.ord
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T00:57:04.503

更新：

我已经用嵌套的 SELECT 解决了我的问题：

```
SELECT p.confirmation,
        p.lname,
        p.fname,
        p.profiletype,
        a.address1,
        a.city,
        c.contactinfo
    FROM profile p
    LEFT JOIN contact c
        ON p.confirmation = c.profileid
        AND c.ord=(SELECT ord FROM contact WHERE profileid= p.confirmation ORDER BY ord LIMIT 1)
    LEFT JOIN address a
        ON p.confirmation = a.profileid
        AND a.ord=(SELECT ord FROM address WHERE profileid= p.confirmation ORDER BY ord LIMIT 1) 
```

感谢#Gordon Linoff 对在一个查询中使用多项选择的见解！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:24:48.483

像这样的东西可能是你正在寻找的东西。您可以更改`ORDER BY c.ord ASC, a.ord ASC`为`ORDER BY a.ord ASC, c.ord ASC`取决于您想要的优先级。

```
SELECT p.confirmation,
    p.lname,
    p.fname,
    p.profiletype,
    a.address1,
    a.city,
    c.contactinfo
FROM profile p
LEFT JOIN contact c
    ON p.confirmation = c.profileid
LEFT JOIN address a
    ON p.confirmation = a.profileid
ORDER BY c.ord ASC, a.ord ASC
LIMIT 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T19:17:06.417

```
 AND a.ord =1 // if a.cord is always 1
  AND a.ord <=1 // if a.cord is always <1 (eg. .9 or .75) 
  // or just leave it.. i dont know your script, but is it needed?
  // same at c.cord!
  // but rather use where! see below 
```

作为一个例子：

```
SELECT 
    p.confirmation, 
    p.lname, 
    p.fname, 
    p.profiletype, 
    a.address1, 
    a.city, 
    c.contactinfo 
FROM  
    profile AS p 
LEFT JOIN 
    contact AS c 
ON 
    p.confirmation=c.profileid 
LEFT JOIN 
    address AS a 
ON 
    p.confirmation=a.profileid 
WHERE 
    c.ord=1 AND a.ord=1 
ORDER BY 
    c.ord ASC, a.ord ASC 
```

希望我能解决你的问题

# c++ - 在 C++ 宏中输出反斜杠

> ID：15645170
> 
> 赞同：3
> 
> 时间：2013-03-26T18:55:13.097
> 
> 标签：c++, macros, enums, code-generation

是否可以在 C++ 中编写一个宏，其**AFTER**扩展将输出一个反斜杠符号？

现在我正在使用代码：

```
#define SOME_ENUM(XX) \
    XX(FirstValue,) \
    XX(SecondValue,) \
    XX(SomeOtherValue,=50) \
    XX(OneMoreValue,=100) \ 
```

但我想写一个宏，它会生成上面的代码，所以我希望能够写：

```
ENUM_BEGIN(name) // it should output: #define SOME_ENUM(XX) \
ENUM(ONE)        // it should output: XX(ONE,) \
//... 
```

但是我无法编写像 一样的宏`ENUM_BEGIN`，因为它应该扩展为最后带有反斜杠的东西。在 C++ 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:02:28.220

不，这是不可能的。与此相关的是 §2.2.1，ISO/IEC 14882:2011(E) 中描述的翻译阶段 2：

> 每个反斜杠字符 () 的实例后面紧跟一个换行符被删除，拼接物理源代码行以形成逻辑源代码行。只有任何物理源行上的最后一个反斜杠才有资格成为此类接头的一部分。结果，如果生成了与通用字符名称的语法匹配的字符序列，则行为未定义。如果源文件不为空且不以换行符结尾，或者在任何此类拼接发生之前以换行符结尾且紧接在反斜杠字符之前，则应将其视为附加的 new-行字符被附加到文件中。

基本上会发生的是`\\\n`（`\n`物理上在源中，而不是转义），将被视为一个`\`字符，然后是一个线拼接。剩下的`\`很可能会导致语法错误（在某些情况下它是合法的，但我目前没有看到任何情况），并且在随后的翻译阶段不被视为线拼接（线拼接仅发生在阶段#2 ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:07:33.067

我还没有找到任何文档，但我认为你可以这样做`\\`并且你会生成一个反斜杠。

然而，在我的研究中，我发现这可能不是你必须处理的最重要的事情。正如millsj 刚刚评论的那样，您`#`在ENUM_BEGIN 中输出时会遇到问题。请参阅[在 #define 宏中转义 # 符号？](https://stackoverflow.com/questions/1135822/escaping-a-symbol-in-a-define-macro).

# git - 如何用 github 上的一个覆盖我的本地存储库？

> ID：15645171
> 
> 赞同：2
> 
> 时间：2013-03-26T18:55:15.620
> 
> 标签：git, github

我有一个过时的仓库，我的机器上没有任何东西可以添加。我想从 github 拉入最新的稳定分支。

我应该克隆它吗？我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:57:48.527

我认为您应该能够对所有文件进行提取，然后将它们重置为原点：

```
git fetch --all
git reset --hard origin/master 
```

您也可以按任一顺序执行此操作。

如果要删除已添加但未跟踪的任何文件，也请进行清理：

```
git clean -f 
```

与克隆到新目录相比，这种方法的优势在于您仍将保留一些 history/ [reflog](https://www.kernel.org/pub/software/scm/git/docs/git-reflog.html)。如果您绝对不关心这些数据，那么任何一种方法都可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:33:24.133

只是`git pull --all`应该得到最新的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:50:27.887

我同意[Matt](https://stackoverflow.com/questions/15645171/how-do-i-overwrite-my-local-repo-with-the-one-on-github#comment22199423_15645171)和[meagar 的](https://stackoverflow.com/questions/15645171/how-do-i-overwrite-my-local-repo-with-the-one-on-github#comment22199450_15645171)建议，但我觉得我应该根据过去`rm`在 Git 项目中使用该命令的经验对他们进行一些补充。

如果您绝对确定不想将包含 repo 的目录中的任何内容保留`cd`到文件夹上方的级别，以便您可以使用`git rm`. 我发现 using`git rm`比使用普通的 bash`rm`命令更简洁。从以前的事故中，我只是删除了暂存分支目录中的一个文件，我了解到这样做会使整个分支偏离轨道，只是因为它没有记录在*差异*记录中，如果我尝试了`git commit`它会输出“分支已启动迄今为止”。误报。

因为您希望擦除文件尽可能接近不留下残留、难以检测或几乎无法检测到的元数据块，所以我想说*递归强制删除*在这里是合理的。即，如果文件夹名为*MyRepo*，只需

> `git rm -rf MyRepo`

然后只是仔细检查我要做的就是简单地`cd MyRepo`，显然期待一个错误，因为该文件夹不应该再存在了。

此后，继续将 GitHub 托管的版本克隆到与以前相同的位置，或任何您觉得舒服的地方，然后做您通常做的事情。

# python - SublimeREPL 到 python

> ID：15645173
> 
> 赞同：4
> 
> 时间：2013-03-26T18:55:26.230
> 
> 标签：python, sublimetext2, sublimerepl

如何在 Sublime Text 2 中将 sublimeREPL 调整为 python？我的使用（Windows 7 上的 Python 3.3）：

`"default_extend_env": {"PYTHONPATH": "C://Python33"},`

它不起作用，因为在构建中（工具 -> SublimeREPL -> Python -> Python（或 Python RUN 当前文件））警告错误并且底部控制台上没有消息。

错误信息：

![错误](../Images/dc3a544d71618f89e31be2e499407298.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T14:22:34.897

我不知道你是否仍然需要它，但其他人可能会。根据

[https://github.com/wuub/SublimeREPL/issues/96](https://github.com/wuub/SublimeREPL/issues/96)

你应该去`Settings -> Package Settings -> SublimeREPL -> Settings - User`

并添加此选项：

```
{
    "default_extend_env": {"PATH": "{PATH};C:\\Python27"}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:07:23.903

首先，我发现双斜线有点奇怪，所以我从删除它们开始。

```
"default_extend_env": {"PYTHONPATH": "C://Python33"}, 
```

至

```
"default_extend_env": {"PYTHONPATH": "C:/Python33"}, 
```

这可能会解决您的问题，但我觉得您必须进行任何编辑/配置有点奇怪。我正在运行 SublimeREPL，并且我已经`python 3`安装在我的系统上，这就是我的 REPL 开箱即用的版本。

你得到的错误是告诉你 windows 找不到[指定的文件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)，这发生在我尝试配置 SublimeREPL 或尝试运行`PHP REPL`Windows 有一些奇怪的默认配置时。我不知道为什么文本是十六进制的。

如果是你安装了两个不同版本的 python 我猜你的方式是正确的，除非`python 3`是默认的，即你在你的版本`path`，那么我建议你恢复到默认配置并验证您是否确实没有在 REPL 中运行 Python 3，您可以通过执行以下命令来做到这一点：

```
import sys
help(sys) 
```

由于某种原因`print sys.version`对我不起作用，但这会更明智。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T03:21:33.153

```
"default_extend_env": {"PYTHONPATH": "C://Python33"} 
```

因为这`PATH——"C://Python33"`是错误的。

您必须输入安装在计算机中的 Python 的路径。

# java - Java/JAI 中的 TIFF 是否有相当于 Android 的 BitmapFactory.Options isDecodeBounds？

> ID：15645174
> 
> 赞同：1
> 
> 时间：2013-03-26T18:55:27.183
> 
> 标签：java, image, jai

我正在尝试提高我们系统的性能（在 Tomcat 中运行的 Java 应用程序），现在瓶颈在于一次操作，我们需要读取并返回 tiff 图像的尺寸，所以我们使用 JAI 的 ImageDecoder 并使用

```
ImageDecoder decoder = ImageCodec.createImageDecoder("TIFF", input, param);
RenderedImage r = decoder.decodeAsRenderedImage();
int width = r.getWidth();
int height = r.getHeight(); 
```

从采样数据来看，很多时间都花在了createImageDecoder上。我的假设（不去 ImageCodec 的源代码）是它可能试图解码输入流。

来自Android领域，我希望有一个类似的解决方案来解码像设置这样的边界，`BitmapFactory.Options.inJustDecodeBounds = true`但到目前为止还没有找到任何其他类似的库。（我知道 AOSP 中缺少对 Android 的 tiff 支持，但这是另一天的话题。）

有人知道这样做的图书馆吗？或者有没有办法使用 JAI/ImageIO 实现类似的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:15:35.900

看起来[tiff 文件格式](http://www.fileformat.info/format//tiff/corion.htm)将这些信息组合在一个标题中，因此您可以自己从文件中读取数据：

```
private static Dimension getTiffDimensions(InputStream tiffFile) throws IOException {
    ReadableByteChannel channel = Channels.newChannel(tiffFile);

    ByteBuffer buffer = ByteBuffer.allocate(12);

    forceRead(channel, buffer, 8);
    byte endian = buffer.get();
    if(endian != buffer.get() || (endian != 'I' && endian != 'M')) {
        throw new IOException("Not a tiff file.");
    }

    buffer.order(endian == 'I' ? ByteOrder.LITTLE_ENDIAN : ByteOrder.BIG_ENDIAN);
    if(buffer.getShort() != 42) {
        throw new IOException("Not a tiff file.");
    }

    // Jump to the first image directory. Note that we've already read 8 bytes.
    tiffFile.skip(buffer.getInt() - 8);

    int width = -1;
    int height = -1;
    // The first two bytes of the IFD are the number of fields.
    forceRead(channel, buffer, 2);
    for(int fieldCount = buffer.getShort(); fieldCount > 0 && (width < 0 || height < 0); --fieldCount) {
        forceRead(channel, buffer, 12);
        switch(buffer.getShort()) {
        case 0x0100: // Image width
            width = readField(buffer);
            break;
        case 0x0101: // Image "length", i.e. height
            height = readField(buffer);
            break;
        }
    }
    return new Dimension(width, height);
}

private static void forceRead(ReadableByteChannel channel, ByteBuffer buffer, int n) throws IOException {
    buffer.position(0);
    buffer.limit(n);

    while(buffer.hasRemaining()) {
        channel.read(buffer);
    }
    buffer.flip();
}

private static int readField(ByteBuffer buffer) {
    int type = buffer.getShort();
    int count = buffer.getInt();

    if(count != 1) {
        throw new RuntimeException("Expected a count of 1 for the given field.");
    }

    switch(type) {
    case 3: // word
        return buffer.getShort();
    case 4: // int
        return buffer.getInt();
    default: // char (not used here)
        return buffer.get() & 0xFF;
    }
} 
```

我已经用几个不同的 tiff 文件（运行长度编码的黑白，透明的颜色）对此进行了测试，它似乎工作正常。根据 tiff 文件的布局，它可能必须在找到大小之前读取大量流（我测试的文件之一，由 Apple 的 Preview 保存，文件末尾有此数据）。

# android - 自定义字体问题

> ID：15645181
> 
> 赞同：1
> 
> 时间：2013-03-26T18:55:33.923
> 
> 标签：android

我在论坛中多次注意到这个问题，但没有可靠的解决方案。不过，我的问题略有不同。我有一个示例应用程序，它执行以下操作：

```
 TextView textViewBold=(TextView) findViewById(R.id.textBold);
    textViewBold.setText("Hello World Bold Font!!!!");
    Typeface typeFaceBold=Typeface.createFromAsset(getAssets(),"fonts/xyz_bold.ttf");
    typeFaceBold.setTypeface(typeFaceBold); 
```

这工作得很好！！！！我在我的项目中使用相同的代码，它使用大量图像并且稍大一些，并且我得到“**无法制作原生字体错误**”。我尝试了此处发布的解决方案[“无法制作本机字体”，仅针对某些人](https://stackoverflow.com/questions/12766930/native-typeface-cannot-be-made-only-for-some-people)我仍然遇到相同的错误。任何帮助将不胜感激。

# stringtemplate-4 - 是否可以组合组文件和组目录？

> ID：15645183
> 
> 赞同：2
> 
> 时间：2013-03-26T18:55:39.373
> 
> 标签：stringtemplate-4

我正在使用 StringTemplate 来生成 HTML，我希望能够合并`STGroupFile`，`STGroupDir`这样我就有一个组文件目录。这样，我可以在一个文件中包含多个模板，也可以组合来自多个文件的模板。似乎没有对此的支持，但我想我会看看是否可能忽略了某些东西。

如果您想知道我为什么要这样做，让我们看一下 StringTemplate 文档中的一个示例：

```
test(name) ::= "$name:bracket()$" // apply bracket template to each name
bracket(x) ::= "[$x$]"            // surround parameter with square brackets 
```

假设以上都在一个文件（test.st）中并且我们正在使用`STGroupDir`，它将无法解析“bracket（x）”模板，除非它在一个单独的文件（bracket.st）中。在这种特殊情况下，括号就像一个本地助手，可用于清理主模板。在这种情况下，您可能不希望括号在 test.st 之外可见。

但是，如果您想创建一个简单的帮助模板库，您可能希望将它们全部放在一个文件中，并让其他文件中的模板可以访问它们中的每一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T19:42:09.087

*免责声明：我`StringTemplate`在 C# 中使用*

您需要使用`.stg`带有模板组的文件。`StringTemplate`组可以导入其他模板或模板组，您可以从文件或目录创建这些组。

# php - mysql查询中的mysql查询

> ID：15645184
> 
> 赞同：1
> 
> 时间：2013-03-26T18:55:40.140
> 
> 标签：php, mysql, database, while-loop

我正在尝试循环显示数据库中表中的信息，但对于某些信息，我正在引用其他表。当我尝试从其他表中获取数据时，后面的任何数据都会消失。这是我正在使用的代码：

`

```
 //Below is the SQL query
    $listing = mysql_query("SELECT * FROM Musicians");

    //This is displaying the results of the SQL query
    while($row = mysql_fetch_array($listing))
        {

 ?>
...html here...

 <? echo $row['name']; ?>
 <? echo $row['Town']; ?>

    <?

    $CountyRef = $row['CountyId'];

    $county = mysql_query("SELECT * FROM County WHERE CouInt='$CountyRef'");

    while($row = mysql_fetch_array($county))
        {        
           echo $row['CouName'];

        }

    ?>

       <?php echo $row['instrument']; ?>

       <?php echo $row['style']; ?>` 
```

我的问题是第二个while循环之后的所有内容都没有显示。有人有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:00:33.617

第二个循环应该说`$row2`。`$row`正在被覆盖。两个变量的名称应彼此不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:02:38.903

然后？：

```
while($row2 = mysql_fetch_array($county)) {        
       echo $row2['CouName'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:01:37.410

您可以通过一个查询来完成：

```
SELECT *,
(SELECT CouName FROM County WHERE CouInt=mus.CountyId) as Country
FROM Musicians mus; 
```

您的最终代码应如下所示：

```
<?php
$listing = mysql_query("SELECT *,
(SELECT CouName FROM County WHERE CouInt=mus.CountyId) as Country
FROM Musicians mus;");

//This is displaying the results of the SQL query
while($row = mysql_fetch_assoc($listing))
{

echo $row['name']; 
echo $row['Town']; 
echo $row['Country']; //Thats all folks xD 
echo $row['instrument'];
echo $row['style']; 

 }   ?> 
```

萨卢多斯 ;)

# java - 使用变量将整数值插入 MySQL 数据库

> ID：15645192
> 
> 赞同：0
> 
> 时间：2013-03-26T18:56:35.870
> 
> 标签：java, mysql, sql, integer

```
 Class.forName("com.mysql.jdbc.Driver");
     Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test",
     "root", "mysecret");
     System.out.println("Connected to Database");
     Statement stmt1 = conn.createStatement();
     ResultSet rs1=null;
     String sql="insert into id
     values('"+name+"',12,+fs+,+se+,+th+,+ft+,+f+,+si+,+sv+,+ei+)";
     System.out.println("sql:"+sql);
     stmt1.executeUpdate(sql); 
```

名称变量在此处未包含的定义部分中得到处理，输出为

```
 sql:insert into id values('Golum',12,+fs+,+se+,+th+,+ft+,+f+,+si+,+sv+,+ei+); 
```

它还表示 SQL 语法中的错误，它指的是变量 fs、se、th、ft、f、si、sv 和 ei。基本上我正在尝试使用变量将整数传递给 MySQL 数据库。这些变量的定义是这样的

```
 int fs = x21;
    int se = y21; 
```

x21 和 y21 分别存储鼠标点击坐标 x 和 y。下面的代码显示坐标传递正确。错误在 SQL 语法中。我想知道使用这种技术将整数传递给 SQL 数据库的正确语法是什么。

```
 System.out.println(fs); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:04:31.083

您的插入语句中有 SQL 错误。我不知道为什么您`+`的语句中有这些字符，但我猜您正试图将这些值连接到语句中。但是在您的尝试中，`+`字符是字符串的一部分。尝试插入双引号字符来结束和开始字符串以连接在一起以形成插入语句：

```
String sql="insert into id values('"+name+"',12, " +
    fs+","+se+","+th+","+ft+","+f+","+si+","+sv+","+ei+")"; 
```

当然，当您将可能来自用户的值连接到 SQL 语句中时，您很容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。如果这些是用户值，则使用[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)带有绑定变量的 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:06:23.137

尝试这个

```
String sql="insert into id values('"+name+"',12,"+fs +","+se+","+th+","+ft+","+f+","+si+","+sv+","+ei+")"; 
```

您在字符串中使用 vars 的语法是错误的。vars 应该不在引号内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:04:19.503

您需要告诉 Java 将您的整数变量转换为字符串，将您的 sql 赋值语句更改为：

```
String sql="insert into id values('"
    + name + "',12," + fs + ", " + se + ","
    + th + "," + ft + "," + f + "," + si + "," + sv + "," + ei + ")"; 
```

# css - Div 背景颜色中的“无效属性值”

> ID：15645196
> 
> 赞同：6
> 
> 时间：2013-03-26T18:56:41.533
> 
> 标签：css, twitter-bootstrap

我使用 Bootstrap 示例之一：http: [//twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

以下代码插入到 navbar-inner div 中：

```
 <div class="logo">
        <div class="quadratLogo">&nbsp;</div>
    </div> 
```

样式为：

```
 .logo {
      font-size: 24px;
      font-family: 'Arial';
      min-width: 500px;
    }

    .quadratLogo {
        width:24px;
        height:20px;
        border-radius:0px 4px 0px 4px;
        background-color: ff0000;
        float:left;
    } 
```

你能说出为什么 quadratLogo div 是不可见的，并且 quadratLogo 的 background-color 属性被 Chrome 视为无效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T18:58:08.610

这是一种有效的颜色 - 但您忘记`#`在十六进制值之前包含一个符号。

```
.quadratLogo {
     width:24px;
     height:20px;
     border-radius:0px 4px 0px 4px;
     background-color: #ff0000;
            /* --------^ */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:00:04.817

你的`background-color`属性不正确。

它应该是`background-color: #ff0000;`或设置正确的颜色名称

阅读有关[背景颜色的更多信息](http://www.w3schools.com/cssref/pr_background-color.asp)

# javascript - HTML 选择标记并更改下拉框中的值

> ID：15645197
> 
> 赞同：1
> 
> 时间：2013-03-26T18:56:43.633
> 
> 标签：javascript, jquery, html, css

我有一个选择框，我希望下拉文本显示一件事，当在框中选择它时，它会显示另一件事。我也不是指价值标签。我感谢所有帮助。谢谢你。^^

例如：

未下拉时的选择框应该说并且选择了值：

T2

下拉框时显示的文本：

T1：（包括 T1a、T1b 和 T1c）：肿瘤直径为 2 厘米（3/4 英寸）或更小。

T2：肿瘤直径超过 2 厘米但不超过 5 厘米（2 英寸）。

T3：肿瘤直径超过 5 cm。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:55:44.210

**最后：**

`**[LIVE DEMO](http://jsbin.com/uhudam/1/edit)**`

**不完全支持选项标签**（即使[W3Schools](http://www.w3schools.com/tags/att_option_label.asp)认为它​​们是 :)）

**为了欺骗并使其工作**`<option>`
， 使用jQuery添加第一个空白，我们将

*   获取选定的选项值，
*   将该值设置为空白`<option>`标签的文本和值

**jQuery：**

```
$.fn.selectLabelize = function(){
  var v = $(':selected', this).val();
  $('option', this).eq(0).text(v).val(v).prop('selected', true);
};

$('select').each(function(){
  $(this).selectLabelize();
});

$('select').on('change', function(){
    $(this).selectLabelize();
}); 
```

考虑到这样的**HTML**：

```
<select>
  <option></option>
  <optgroup label="T1">   
      <option value="T1a" selected>a --  Tumor is 2 cm (3/4 of an inch) or less across.</option>
      <option value="T1b">b --  Tumor is 2 cm (3/4 of an inch) or less across.</option>
      <option value="T1c">c --  Tumor is 2 cm (3/4 of an inch) or less across.</option>
  </optgroup> 
  <optgroup label="T2">
      <option value="T2"> Tumor is more than 2 cm but not more than 5 cm (2 inches) across.</option>
  </optgroup> 
  <optgroup label="T3">
      <option value="T3"> Tumor is more than 5 cm across.</option>
  </optgroup>
</select> 
```

* * *

## 使用纯 JS 就像：

`**[PURE JS - LIVE DEMO](http://jsbin.com/imakeq/1/edit)**`

```
function selectLabelize(){
   var v = this.value;
   this.options[0].innerHTML = v ;
   this.options[0].value = v ;
   this.options[0].selected = true;
}

var sel = document.getElementsByTagName('select');
var ev = document.createEvent('Event');
ev.initEvent('change', true, false);

for(var i=0; i<sel.length; i++){
      sel[i].addEventListener('change', selectLabelize ); 
      sel[i].dispatchEvent(ev);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:00:36.937

正如已经指出的，这不是一个简单的 HTML 任务。它需要一些编码才能从选择中获取属性“值”。

```
<script>
    function flipIt(){
    var sel = document.getElementById('cars');
    var value = sel.options[sel.selectedIndex].value;
    for(var x=0; x < sel.options.length; x++) {
      item = sel.options[x];
      var label = item.getAttribute('label'); 
      item.innerHTML = label;
    }
    sel.options[sel.selectedIndex].innerHTML = value;
    alert(value);
  }
</script>

<select id='cars' onChange='flipIt()'>
  <option label="Volvo (Latin for 'I roll')" value="V">Volvo (Latin for "I roll")</option>
  <option label="Saab (Swedish Aeroplane AB)" value="S" selected>Saab (Swedish Aeroplane AB)</option>
  <option label="Mercedes (Mercedes-Benz)" value="M">Mercedes (Mercedes-Benz)</option>
  <option label="Audi (Auto Union Deutschland Ingolstadt)" value="A">Audi (Auto Union Deutschland Ingolstadt</option>
</select> 
```

如果您下拉列表，您将看到长格式（标签之间的文本内容）......如果您选择一个，小脚本将返回选项属性中的值。当然，还有其他获取 DOM 对象的方法，但我给了它一个 id 并使用了 getElementById t，这让我更容易，更清楚地查看代码。

在这里测试它[http://jsfiddle.net/radiotrib/gGMLV/2/](http://jsfiddle.net/radiotrib/gGMLV/2/)

# java - 编译时找不到符号错误。

> ID：15645198
> 
> 赞同：0
> 
> 时间：2013-03-26T18:56:46.383
> 
> 标签：java

我正在为班级做一个项目，正在清理我的缩进等，并对我的代码做了一些事情。我只见树木不见森林，需要一些帮助。编译时出现找不到符号错误。这是代码。

```
public class TrafficLights extends JFrame implements ItemListener
{
    private JRadioButton jrbRed;
    private JRadioButton jrbYellow;
    private JRadioButton jrbGreen;
    private ButtonGroup btg = new ButtonGroup();

    private TrafficLights.Light light = new TrafficLights.Light();
                  //     ^ error 1 is here               ^ error 2 is here       

public static void main(String[] args)
    {
    TrafficLights frame = new TrafficLights();
    frame.setDefaultCloseOperation(3);
    frame.setSize(200, 200);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
    }

public TrafficLights()
    {
    setTitle("Traffic Light Signal");

    JPanel p1 = new JPanel();
    p1.setLayout(new FlowLayout(1));
    p1.add(this.light);

    JPanel p2 = new JPanel();
    p2.setLayout(new FlowLayout());
    p2.add(this.jrbRed = new JRadioButton("Red"));
    p2.add(this.jrbYellow = new JRadioButton("Yellow"));
    p2.add(this.jrbGreen = new JRadioButton("Green"));

    this.jrbRed.setMnemonic('R');
    this.jrbYellow.setMnemonic('Y');
    this.jrbGreen.setMnemonic('G');

    this.btg.add(this.jrbRed);
    this.btg.add(this.jrbYellow);
    this.btg.add(this.jrbGreen);

    setLayout(new BorderLayout());
    add(p1, "Center");
    add(p2, "South");

    this.jrbRed.addItemListener(this);
    this.jrbYellow.addItemListener(this);
    this.jrbGreen.addItemListener(this);

    this.jrbGreen.setSelected(true);
    this.light.turnOnGreen();
    }

public void itemStateChanged(ItemEvent e)
    {
        if (this.jrbRed.isSelected())
            {
            this.light.turnOnRed();
            }

        if (this.jrbYellow.isSelected())
            {
            this.light.turnOnYellow();
            }

        if (this.jrbGreen.isSelected())
            {
            this.light.turnOnGreen();
            }

class Light extends JPanel
    {
    private boolean red;
    private boolean yellow;
    private boolean green;

public Light()
{ }

public void turnOnRed()
{
    this.red = true;
    this.yellow = false;
    this.green = false;
    repaint();
}

public void turnOnYellow()
{
    this.red = false;
    this.yellow = true;
    this.green = false;
    repaint();
}

public void turnOnGreen()
{
    this.red = false;
    this.yellow = false;
    this.green = true;
    repaint();
}

protected void paintComponent(Graphics g)
{
    super.paintComponent(g);

    if (this.red)
        {
            g.setColor(Color.red);
            g.fillOval(10, 10, 20, 20);
            g.setColor(Color.black);
            g.drawOval(10, 35, 20, 20);
            g.drawOval(10, 60, 20, 20);
            g.drawRect(5, 5, 30, 80);
        }

    else if (this.yellow)
        {
            g.setColor(Color.yellow);
            g.fillOval(10, 35, 20, 20);
            g.setColor(Color.black);
            g.drawRect(5, 5, 30, 80);
            g.drawOval(10, 10, 20, 20);
            g.drawOval(10, 60, 20, 20);
        }

    else if (this.green)
        {
            g.setColor(Color.green);
            g.fillOval(10, 60, 20, 20);
            g.setColor(Color.black);
            g.drawRect(5, 5, 30, 80);
            g.drawOval(10, 10, 20, 20);
            g.drawOval(10, 35, 20, 20);
        }

else
    {
        g.setColor(Color.black);
        g.drawRect(5, 5, 30, 80);
        g.drawOval(10, 10, 20, 20);
        g.drawOval(10, 35, 20, 20);
        g.drawOval(10, 60, 20, 20);
    }
}

public Dimension getPreferredSize()
    {
        return new Dimension(100, 100);
    }
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:59:17.550

这就是问题所在 - 我缩进了代码以使其更清晰......

```
public void itemStateChanged(ItemEvent e)
{
    if (this.jrbRed.isSelected())
    {
        this.light.turnOnRed();
    }

    if (this.jrbYellow.isSelected())
    {
        this.light.turnOnYellow();
    }

    if (this.jrbGreen.isSelected())
    {
        this.light.turnOnGreen();
    }

    class Light extends JPanel
    {
        private boolean red;
        private boolean yellow;
        private boolean green;
       ... 
```

您当前正在方法*中*`Light`声明该类。我不认为你打算这样做。*`itemStateChanged`*

 *此外，我会质疑您是否真的需要`Light`成为内部类或嵌套类本身。我建议将其作为顶级课程——至少从一开始就是这样。除了其他任何事情之外，以这种方式导航会更容易。

我还强烈建议您始终保持在您的缩进之上。如果您的代码的其余部分已经很好地缩进，那么当出现问题时更容易看到。诸如 Eclipse 之类的 IDE 只需按一下按钮即可为您缩进所有代码 - 我建议您大量使用该功能。*

# cakephp - CakePHP如何提交NULL值？

> ID：15645202
> 
> 赞同：4
> 
> 时间：2013-03-26T18:57:08.137
> 
> 标签：cakephp, null

在网络表单上，我有选择选项字段。它必须提交值“卡”（不带引号）或 NULL 值。

现在，代码如下所示：

```
 $options = array(NULL => 'Invoice', 'card' => 'Payment card');
    echo $this->Form->input('payment_method', array('options'=>$options)); 
```

如果选择了 Invoice 选项，我如何定义选项数组，以在数据库表（和/或“卡”，但这当然可以）中提交 NULL 值？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:19:08.480

NULL 是关联数组的无效键。只有“整数”和“字符串”是有效的数组键，请参阅文档：[数组](http://php.net/manual/en/language.types.array.php)

要通过表单发送空值，您可以使用空字符串。要强制在数据库中插入 NULL 值，请在保存之前在模型或控制器中处理它

```
$options = array('' => 'Invoice', 'card' => 'Payment card');
echo $this->Form->input('payment_method', array('options'=>$options)); 
```

然后在你的控制器里面；

```
if ('' === $this->request->data['MyModelName']['payment_method']) {
     this->request->data['MyModelName']['payment_method'] = null;
} 
```

## 替代方法

但是，为什么不使用“发票”付款方式的*值呢？*像这样：

```
echo $this->Form->input('payment_method', array(
    'options' => array(
        ''        => 'Select your payment method..',
        'invoice' => 'Invoice',
        'card'    => 'Payment card',
    )
)); 
```

IMO 这有一些优点；

*   它更加透明，例如在查看数据库时，很明显付款方式是“发票”。通过使用“特殊”值（null），不了解您的应用程序内部工作原理的人将不得不浏览源代码以找出
*   可以检查用户是否选择了付款方式；例如，如果值为空，则用户可能忘记选择支付方式，在这种情况下，您可以通过验证规则将该字段标记为“无效”。

# java - 使用库/工具从干净的 Java 类/POJO 自动生成 JPA XML 映射

> ID：15645208
> 
> 赞同：2
> 
> 时间：2013-03-26T18:57:41.537
> 
> 标签：java, jpa, pojo

我目前正在为一个开发了几个干净、无注释的 Java POJO 域模型的客户工作。每个领域模型包含大约 15-50 个类。到目前为止，这些 Java POJO 领域模型只在 Android 应用程序中使用过。对于我的客户正在进行的一个新项目，有必要在服务器端使用这些域模型，并将其类的实例保存到 sql 数据库中。

我们将为此使用 JPA。由于 jar 需要在现有的 Android 应用程序中重用，因此不能选择使用 JPA 注释。因此，我需要为这 100 多个类创建 JPA xml 映射。

**我想知道：是否可以使用一些 lib/工具从干净的 Java 类/POJO 中自动生成 JPA Xml 映射？当我开始寻找时，我以为我会很快找到一个“javamodel 2 jpa xml mapping”工具，但到目前为止，没有运气，我已经找了一段时间了。**

对我来说，它似乎是一个可以在大量场景中使用的工具，所以我几乎不敢相信它不存在。

我知道诸如 hbm2java 之类的工具。我知道可以从 ddl 创建 POJOS/orm 映射，从 orm 映射创建 POJOS/DDL。但是我需要给定 POJO 的 orm 映射。

另外，我知道 JPA xml 映射可以很短，并且简单/基本属性是自动映射的。我意识到我不必映射每个属性，但是如果不存在这样的工具，我仍然面临大量重复性工作。

**那么，是否存在“javamodel 2 jpa xml mapping”工具？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T05:12:05.963

我为此创建了一个简单的工具，托管在 Github：[https ://github.com/IntegratingStuff/java2jpa](https://github.com/IntegratingStuff/java2jpa)

基本用法示例：

```
Java2JpaMappingGenerator java2JpaMappingGenerator = 
   new Java2JpaMappingGenerator(); 
java2JpaMappingGenerator.setRenderJpaMappingForClassStrategy(
   new RenderJpaMappingForClassStrategyDefaultImpl()); 
JpaMappingRendererDefaultImpl jpaMappingRenderer = 
   new JpaMappingRendererDefaultImpl("target/META-INF/orm.xml");
java2JpaMappingGenerator.setJpaMappingRenderer(jpaMappingRenderer);  
java2JpaMappingGenerator.generateJpaMappingsForPackages("com.test.model");
jpaMappingRenderer.createMappedFiles(); 
```

使用此工具，您可以从 Java POJO 域模型创建 JPA Xml 映射。但是，您通常需要为您自己的模型创建 RenderJpaMappingForClassStrategy 接口的自定义实现，以便有效地使用该工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:09:05.270

也许是愚蠢的想法，但是批处理生成器如何使用 JPA @Annotation 标签创建 fasade/proxy .java 文件。大秀停止可能是您的应用程序必须使用 JPACustomer 类型而不是真正的类型。只有一个建议不要杀死信使。

```
@Entity
@Table(name="customer")
public class JPACustomer extends Customer {

  @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
  public long getId() { return super.getId(); }
  public void setId(long id) { super.setId(id); }

  @Column(name="name")
  public String getName() { return super.getName(); }
  public void setName(String s) { super.setName(s); }

  // ElementCollection provides simple OneToMany linking in OpenJPA.
  // joinColumn.name=foreign key column in child table
  @ElementCollection(fetch=FetchType.LAZY)
  @CollectionTable(name="cust_role", joinColumns={@JoinColumn(name="cust_id")})
  @Column(name="role")
  public List<String> getRoles() { return super.getRoles(); }
  public void setRoles(List<String> roles) { super.setRoles(roles); }

  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:36:24.727

我建议使用 Eclipse 的 JPA 支持（Dali）

# javascript - 图像出现在鼠标位置

> ID：15645216
> 
> 赞同：0
> 
> 时间：2013-03-26T18:57:58.327
> 
> 标签：javascript, html

当我单击画布时，我试图使图像出现在鼠标坐标的位置。

现在我让它出现了，但我只能弄清楚如何通过自动更新坐标来做到这一点，并且图像将在“onclick”之后跟随鼠标。

我需要这样做，这样图像才会移动到我单击的位置，而不是跟随光标。

```
<!DOCTYPE html>
<html lang="en">
<head>
   <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
    </head>
<title>Click to make a sad face</title>

</head>

<body>
<canvas id="myCanvas" width="2000" height="1000", onClick="makeface();"></canvas>

<script type="text/javascript">
function writeMessage(canvas, message) {
        var ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.font = '18pt Calibri';
        ctx.fillStyle = 'black';
        ctx.fillText(message, 10, 25);
      }

function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        return {
          x: evt.clientX - rect.left,
          y: evt.clientY - rect.top
        };
      }

      var canvas = document.getElementById('myCanvas');
      var ctx = canvas.getContext('2d');

      canvas.addEventListener('mousemove', function(evt) 
      {
        var mousePos = getMousePos(canvas, evt);
        var message = 'Click to make a face appear at coordinates: ' + mousePos.x + ',' + mousePos.y;
        writeMessage(canvas, message);
      }, false);

      function makeface() 
      { 
       canvas.addEventListener('mousemove', function(evt) 
      {
        var mousePos2 = getMousePos(canvas, evt);
        var headx = mousePos2.x;
        var heady = mousePos2.y;
        var message = 'You made the face appear, you are currently at coordinates: ' + mousePos2.x + ',' + mousePos2.y;
        writeMessage(canvas, message);
        var headrad = 50;
        var smileoffsetx=0;
        var frownoffsety = 33;
        var smilerad=20;
        var eyeoffsety = -10;
        var lefteyeoffsetx = -15;
        var righteyeoffsetx = -lefteyeoffsetx;
        var eyerad = 8;

        ctx.strokeStyle="blue";
        ctx.lineWidth = 5;
        ctx.beginPath();
        ctx.arc(headx,heady,headrad,0,2*Math.PI,true);
        ctx.closePath();
        ctx.stroke();
        ctx.beginPath()
        ctx.arc(headx+smileoffsetx,heady+frownoffsety,smilerad,-.20*Math.PI,-.80*Math.PI,true);
        ctx.stroke();
            ctx.beginPath()
            ctx.arc(headx+lefteyeoffsetx,heady+eyeoffsety,eyerad,0,2*Math.PI,true);
              ctx.fillStyle="blue";
        ctx.fill();
        ctx.beginPath()
              ctx.arc(headx+righteyeoffsetx,heady+eyeoffsety,eyerad,0,2*Math.PI,true);
        ctx.fill();
          }, false);
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:15:10.930

发生这种情况是因为您的 writeMessage 函数正在清除整个画布。

这是我快速而肮脏的修复：

```
<canvas id="myCanvas" width="2000" height="1000" onClick="document.madeFace = 0; makeface();"></canvas> 
```

...

```
 function makeface() 
  { 
   canvas.addEventListener('mousemove', function(evt) 
  {
    var mousePos2 = getMousePos(canvas, evt);
    document.madeFace = document.madeFace || mousePos2; /* added */
    var message = 'You made the face appear, you are currently at coordinates: ' + mousePos2.x + ',' + mousePos2.y;
    mousePos2 = document.madeFace; /* added */
    var headx = mousePos2.x;
    var heady = mousePos2.y; 
```

...

这段代码的作用是在用户点击后立即存储人脸的坐标。当用户再次单击时，变量“document.madeFace”被重置为 0，因此重新计算人脸的坐标。

但是每次鼠标移动时，脸部仍然会重新绘制，因此即使整个画布都被清除，它仍然会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:45:23.010

这是为了让它在 onclick 而不是在 onclick 之后发生。

将此变量放在函数之外：

```
var faceHandler = function(evt) 
  {
    var mousePos2 = getMousePos(canvas, evt);
    document.madeFace = document.madeFace || mousePos2; 
```

...直到函数结束，即现在在行中的花括号，如下所示：

```
 }, false); 
```

然后在函数外注册onclick，在函数内注册mousemove：

```
 canvas.addEventListener('click', faceHandler, false);
 function makeface() 
 { 
     canvas.addEventListener('mousemove', faceHandler, false);
 } 
```

# git - 有效删除已保存的当前更改

> ID：15645217
> 
> 赞同：0
> 
> 时间：2013-03-26T18:57:59.950
> 
> 标签：git, commit, magit

我从 Git 和 Magit 开始，所以我不知道我的问题是针对哪一个。

有时我将更改保存到文件但不想提交它们：我只是想回到最后一次提交。

我正试图从 Emacs / Magit 做到这一点，而我所做的只是疯了：

1.  我存储更改（否则 Magit 会抱怨未提交/未存储的更改）
2.  *我签出比上一个更旧*的提交（如果我只是尝试最后一个 Emacs / magit 只是将我的更改留在那里：它不会修改文件）
3.  我放下藏匿处
4.  我签出最后一次提交

这需要大量的按键并且绝对是疯狂的。

我肯定遗漏了一些完全明显的东西，但根本找不到什么：所以我确实有效地从 Emacs / Magit 中删除了最后保存的更改，然后简单地回到最后一次提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:06:49.347

我对 git 不是很熟悉`Emacs / Magit`，但我可以告诉您可以从 shell 运行的等效 git 命令。

如果我正确理解了您的问题，我相信您正在寻找一种简单的方法来还原当前工作树中所有更改的文件。如果不是这种情况，请不要按照这些步骤操作；）

*   如果您只想放弃工作树中文件的本地更改而不触及索引，您可以这样做：

    ```
    git checkout -- <FILE> 
    ```

*   如果你想放弃**所有**本地更改而不触及索引，你可以从你的 repo 的根目录运行它：

    ```
    git checkout -- . 
    ```

*   如果您希望丢弃索引和工作树中的所有更改，并希望在结帐后将工作树和索引移动到状态，您可以使用该`git reset --hard`命令。（**请注意，工作树中的任何未提交更改，甚至索引/暂存区域中未提交的更改都将丢失**）。

    ```
    git reset --hard HEAD 
    ```

    上面的`HEAD`命令是可选的 BTW。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:37:54.793

在 magit`k`中是放弃东西，所以如果你想放弃改变，你只需要继续你想要恢复的改变，并使用`k`它。

您还可以使用`X`还原工作树中的所有更改（请注意，此操作不可撤消）

# highcharts - Highcharts y轴和x轴显示

> ID：15645223
> 
> 赞同：0
> 
> 时间：2013-03-26T18:58:16.443
> 
> 标签：highcharts

我被高图表困住了。我有2个问题

*   出于设计目的，我还需要在左侧显示 y 轴。

*   x 轴，设置在 上`datetime`。我需要显示最后一个值。还要在最后一个值上方显示一条网格线。问题是它需要 5 x 5 年，而最后一个网格只需 3 年宽。

如果有人对如何做到这一点有一些想法。我在`showlabels`and之间迷路了`tickintervals`，似乎找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:38:54.883

您可以使用 xAxis 属性 tickPositions 来明确指定它们。 [http://api.highcharts.com/highcharts#xAxis.tickPositions](http://api.highcharts.com/highcharts#xAxis.tickPositions)

[http://jsfiddle.net/CsgAv/1/](http://jsfiddle.net/CsgAv/1/)

```
xAxis : {
    tickPositions: [
                Date.UTC(1980,0,1),
                Date.UTC(1990,0,1),
                Date.UTC(2000,0,1),
                Date.UTC(2010,0,1),
                Date.UTC(2013,0,1)
    ],
    ....
} 
```

# view - 不幸的是，您的应用程序停止工作

> ID：15645224
> 
> 赞同：1
> 
> 时间：2013-03-26T18:58:19.077
> 
> 标签：view, titanium, appcelerator, titanium-alloy

在 Alloy 框架中，我想动态添加一个在 xml 文件中定义但不绑定到任何其他视图的视图。

让我们看下面的例子：

容器我要填写index.xml：

```
<ScrollableView id="scrollableBilan" showPagingControl="true">
</ScrollableView> 
```

我想为进入 ScrollableView 的每个视图实例化视图模板 question.xml：

```
<Alloy>
    <Collection src="ReponsePossible">
    <View id="questionContainer" class="container">
        <Label id="questionText" />
        <Button id="buttonNextQuestion">Question suivante</Button>
    </View>
</Alloy> 
```

最后是控制器 index.js，问题是 Collection 实例：

```
for(var i=0; i<questions.length; i++){
        $.scrollableBilan.add(Alloy.createController('question', questions.at(i)));
    } 
```

这使我的应用程序崩溃并显示以下消息：“不幸的是，您的应用程序已停止”。我已经收到此错误，总是在尝试使用 Alloy.createController 动态添加视图时。

使用 Ti.UI.createView 创建视图时行为正常，但我想使用 MVC ...

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:02:05.240

您正在向它传递一个模型对象，而不是尝试向它传递一个 JSON 对象，如下所示：

```
for(var i=0; i<questions.length; i++){
    $.scrollableBilan.add(Alloy.createController('question', questions.at(i).toJSON()));
} 
```

或者，您可以使用[Data Binding](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Data_Binding)和`dataCollection`属性在 xml 文件中执行所有这些操作，在 index.xml 中放置类似这样的内容：

```
<Alloy>
    <Collection src="questions">
    <ScrollableView id="scrollableBilan" showPagingControl="true" dataCollection="ReponsePossible">
        <View id="questionContainer" class="container">
            <Label id="questionText" text="{questionText}"/>
            <Button id="buttonNextQuestion">Question suivante</Button>
        </View> 
    </ScrollableView>
</Alloy> 
```

该`questionText`字段必须是`questions`模型中的属性。

# java - 生成非常大的 Java 代码

> ID：15645225
> 
> 赞同：0
> 
> 时间：2013-03-26T18:58:22.553
> 
> 标签：java, code-generation, javac, stringtemplate-4

我需要将 ~20k 内置函数和常量从 CHM 文件填充到列表中。首先，我尝试序列化它们的列表，但反序列化需要 1500 毫秒（对于快速完成代码来说太长了，即使是第一次命中也是如此）。

尝试使用 StringTemplate 生成代码，生成有效代码。但它不会编译，因为“initEnums() 方法超出了 65536 的大小限制”。（我的 Eclipse 很快就死了）

生成的方法如下所示：

```
public XModelField[] initEnums() {
    return new XModelField[] {
        new XModelField("aName", "aType", ...),
        ...
        // About 4'000 more entries
    };
} 
```

如果这个限制仅限于源代码，我可以使用另一个库直接生成类文件（可能是 CodeModel）。如果可能的话，我想保留我的代码，而无需再次从头开始重写输出生成器。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:19:23.097

我认为你应该重新考虑你的策略。相应地为您的数据结构和方法建模，您不必生成代码。代替为 4000 个常量生成 Java 代码，将您的数据存储在文件或数据库中，并编写一个简短的方法来在初始化时读取该数据，以用您的数据对象填充列表。

生成代码是一个强大的工具，但你应该小心使用它。我认为您的用例甚至不需要它，但如果您认为它是必要的，那么您可以尝试将要生成的代码部分最小化到绝对最小值以保持简单。通常，您可以将大量通用代码提取到抽象超类中，这样您只需为子类中的某些方法生成代码。并且为 4000 个常量生成代码确实是不必要的。将数据保存为数据并动态操作您的数据。

# php - 多个域之间的 PHP URL 重定向问题

> ID：15645226
> 
> 赞同：2
> 
> 时间：2013-03-26T18:58:26.430
> 
> 标签：php, http-redirect

我的 PHP 技能有点欠缺，我已经尝试了一段时间的故障排除并寻找没有运气的答案......我相信这很简单。

我在一个域上有一个页面，它正在检查是否存在 cookie，如果不存在，它会将用户发送到一个完全独立的域以输入他们的出生日期。一旦他们输入并超过 21 岁，他们将被重定向回原始域，但由于某种原因，我的脚本仅捕获引用域的子目录，而不是整个内容。

因此，用户通过假设的 URL abc.com 访问以下页面：

```
<?php 
function over21(){  
    session_start();
    $redirect_url='http://xyz.com'; 
    $validated=false;  
    if(!empty($_COOKIE["over21"])) { $validated=true; } 
    if(!$validated && isset($_SESSION['over21'])) { $validated=true; } 
    if($validated) { return; } 
    else { 
        $redirect_url=$redirect_url."?return=".$_SERVER['REQUEST_URI']; 
        header('location: '.$redirect_url); 
        exit(0); 
    } 
} 
over21(); 
?>

<html>
  <head>
    <title>abc.com page</title>
  </head>
  <body>
    Before you are able to read this content, you will be redirected to xyz.com to validate your age
  </body>
</html> 
```

到目前为止一切顺利，他们现在被发送到 xyz.com 以输入他们的出生日期：

```
<?php
session_start();
if(isset($_POST['submit']))
{
    $month = $_POST['month'];
    $day = $_POST['day'];
    $year = $_POST['year'];

    $birthday = mktime(0,0,0,$month,$day,$year);
    $difference = time() - $birthday;
    $age = floor($difference - 662256000);  
    if($age >= 21)
    {
        setcookie("over21",$value, time()+3600*24);
        $_SESSION['over21'] = 1;
        $redirect=isset($_GET['return'])?urldecode($_GET['return']):'./';
        header("location: ".$redirect);
        exit;

    }
    else
    {
        $_SESSION['under21'] = 0;
        header("location: http://google.com");
        exit;
    }
}
?>
<html>
  <head>
    <title>this is xyz.com</title>
  </head>
  <body>
    <form>
      There is a form in here with input's and such to gather day, month and year of birth.
    </form>
  </body>
</html> 
```

如果我将年龄验证片段和引用页面都保留在同一个域中，则该脚本运行良好。但是我该如何修改它，以便年龄验证页面捕获引用域的完整 URL，而不仅仅是子域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:16:00.153

因此，请忽略我认为的相同来源的评论，只是看到会话开始代码让我认为您正在尝试跨域共享会话。

您只是在询问我看到的[$_SERVER 变量。](http://www.php.net/manual/en/reserved.variables.server.php)

**'REQUEST_URI'** - 为访问此页面而提供的 URI；例如，'/index.html'。

尝试类似的东西`HTTP_HOST`。

类似： [PHP获取域名](https://stackoverflow.com/questions/5404811/php-get-domain-name)

# .net - SqlConnection.ClearPool 与事务的行为

> ID：15645228
> 
> 赞同：1
> 
> 时间：2013-03-26T18:58:42.143
> 
> 标签：.net, sql-server, sqlclient

[`SqlConnection.ClearPool`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool.aspx)如果我将事务中使用的连接作为参数传递（例如使用 a ），会有什么行为`System.Transactions.TransactionScope`？

例如，在这个片段中

```
using(var tx=new System.Transactions.TransactionScope())
{
  var sqlConn=new System.Data.SqlClient.SqlConnection(...);
  /*do something with connection*/

  System.Data.SqlClient.SqlConnection.ClearPool(sqlConn);

  tx.Complete();
} 
```

通过`ClearPool`调用，我是使用相同的连接字符串清除所有连接（无论事务如何），还是实际上我只关闭我正在传递的连接（因为它与事务“关联”）？

我在互联网上搜索，但一无所获。从 MSDN（[这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.clearpool.aspx)和[这里](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)）可以清楚地看出没有事务的行为；此外，我了解，如果我在交易中，连接池会尝试向我提供我之前在该交易中使用的连接（如果它仍然存在）。但是我不清楚`ClearPool`使用事务中使用的连接调用时的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:13:25.103

由于我没有找到任何有关此特定场景的官方文档，因此我实现了一个模拟此场景的小样本（可在[https://github.com/edymtt/sqlclientconnectionpool获得）。](https://github.com/edymtt/sqlclientconnectionpool)运行此示例之前要做的重要事情是停止测试机器上的 MS DTC —— 这样我们就不会处理分布式事务，也不会错过`SqlConnection`创建新的事务。

通过这种方式，我发现`SqlConnection.ClearPool`无论与连接关联的任何事务如何，都会清除所有具有作为参数传递的连接的相同连接字符串的连接。

# sql-server - 不存在用户登录时如何获取 Windows 组名称

> ID：15645229
> 
> 赞同：3
> 
> 时间：2013-03-26T18:58:44.900
> 
> 标签：sql-server

我有一个场景，用户可以通过他们的 Windows 组登录到 SQL Server。用户本身没有登录名，也没有数据库中的用户。

然后我想获取用户登录的 windows 组的名称。但是，`suser_sname()`返回实际的用户名。`suser_sid()`对我也没有帮助。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T22:45:35.357

```
DECLARE @user SYSNAME;
SET @user = SUSER_SNAME();
EXEC xp_logininfo @user, 'all'; 
```

这将为用户所在的任何组返回行（行在列中将具有非空值`permission path`）。但它也会为他们自己的用户名返回一行（在我的情况下`permission path`，该行为空）。

您还可以通过以下查询查看您可能希望看到的所有*可能组：*

```
SELECT * FROM master.sys.server_principals
  WHERE type = 'G'; -- type_desc = 'WINDOWS_GROUP' 
```

该用户还可能是尚未向 SQL Server 注册的其他 AD 组的成员。你需要为此去AD。

# javascript - 画线的编码问题

> ID：15645230
> 
> 赞同：0
> 
> 时间：2013-03-26T18:58:47.223
> 
> 标签：javascript, html5-canvas

我想在照片部分和文本部分之间画一条水平线作为中断。

这是我的网站：

[http://violetoeuvre.com/](http://violetoeuvre.com/)

这是它工作的jsfiddle：

[http://jsfiddle.net/GCxh9/](http://jsfiddle.net/GCxh9/)

```
 <script type="text/javascript">
        var c=document.getElementById("myCanvas");
        var ctx=c.getContext("2d");
        ctx.moveTo(0,0);
        ctx.lineTo(980,0);
        ctx.stroke();

</script> 
```

我已经把它放在了头上。这是我的html：

```
<!-- CONTENT____________________________________________-->

<div class="content_wrapper">

<!-- Photo __________________________________________-->

    <div class="home_photo">
    </div>

    <canvas id="myCanvas" width="980" height="100" style="border:0px solid #d3d3d3;"></canvas>
<!-- About___________________________________________________-->

    <div class="home_text">
        <p>Emma Carmichael is a writer and editor based in Brooklyn, NY, although she hails from Brattleboro, VT. Emma graduated from Vassar College in 2010 with a degree in Urban Studies; ETC...
    </p>
    </div>

</div> 
```

它显然在做某事，因为元素之间有额外的空间。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:06:41.973

这里有几点。

1.  您正在设置高度 = 100。这导致了额外的空间

2.  如果您使用的是 chrome，它会添加自己的样式。在这种情况下，下面的 div 'home_text' 有一个`<p>`which chromes 适用

    p { -webkit-margin-before: 1em; -webkit-margin-after：1em；-webkit-margin-start：0px；-webkit-margin-end：0px；}

最好在您的网站上使用 reset.css 或类似的东西。

使用画布创建分隔线可能不是最佳方式。为什么不只是拥有`<div>`并设置它的`width`,`height`和`background-color: black;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:08:03.130

`var c=document.getElementById("myCanvas");`正在返回未定义的对象。

**屏幕截图**：

![在此处输入图像描述](../Images/1f74c4c8dbffe1b544596a56138642e7.png)

将此代码保留在该行之后的任何位置`<canvas id="myCanvas" width="980" height="100" style="border:0px solid #d3d3d3;"></canvas>`

```
<script type="text/javascript">
        var c=document.getElementById("myCanvas");
        var ctx=c.getContext("2d");
        ctx.moveTo(0,0);
        ctx.lineTo(980,0);
        ctx.stroke();

</script> 
```

**在关闭** `</body>`网页的body标签之前最好保留上面的脚本

# php - post方法如何刷新页面

> ID：15645231
> 
> 赞同：1
> 
> 时间：2013-03-26T18:58:50.567
> 
> 标签：php, ajax, post, get, fat-free-framework

我使用无脂肪的 PHP 框架。

PHP：

```
 F3::route('POST /vote', function(){
            global $twig;
            if(isset($_GET['studentKey'])){
                $studentKey = $_GET['studentKey'];
                //выборка id студента
                $SELECT_student_Id = "SELECT id FROM identification WHERE studentKey = '$studentKey'";
                DB::sql($SELECT_student_Id);
                $studentId = F3::get('DB->result');
                //выборка id преподавателя
                $SELECT_teacher_Id = "SELECT idPrep FROM kbinding WHERE idStudent =". $studentId[0]['id'];
                DB::sql($SELECT_teacher_Id);
                $teacherId = F3::get('DB->result');

                echo $twig->render('vote.html', array('ids' => $studentId[0]['id'],
                         'teacherId' => $teacherId[0]['idPrep']));
            }else{

                echo $twig->render('404.html', array('error' => 'Ошибка'));
            }
        }); 
```

JavaScript：

```
$(document).ready(function(){    
    $('#sendData').click(function(){
        $.ajax({type: "POST", url: "engine.php", data: some_data, 
            success:function(){
                ***location.reload();***
            },
            error: function(){
                alert("Error");
            } 
        });
    });
}); 
```

而且我无法刷新页面，因为它是一种发布方法。如何使用 Post 方法并毫无问题地刷新此页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T12:29:12.810

您可以使用 reroute() 方法进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T07:21:46.937

接下来是我的解决方案：

1.  创建表单，添加方法'post'
2.  创建临时页面，该页面从表单接收值。

    2.1 将此值存储在会话中

    2.2 在此之后，重定向到另一个页面

# android - 显示 32Bit Unicode 字符 android

> ID：15645232
> 
> 赞同：0
> 
> 时间：2013-03-26T18:58:51.470
> 
> 标签：android, unicode, typeface

我在我的应用程序中使用[Entypo 字符映射](http://www.entypo.com/characters/)，只有少数字符显示在 Entypo 字体中，它们是 16 位 Unicode 字符。
⌂⚡✉ `&#8962;`
_ `&#9889;`
_`&#9993;`

我想显示 32 位 Unicode 字符，例如`&#59215;` `&#128266;`.

目前，我在 TextView 中设置这些字符串`strings.xml`。

**代码**

```
 Typeface symb = Typeface.createFromAsset(getAssets(), "Entypo.ttf");
    jfkfk.setTypeface(symb);
    kfhnf.setTypeface(symb); 
```

***这不是网络视图***

# c# - LibGit2Sharp 找不到 git2.dll

> ID：15645234
> 
> 赞同：0
> 
> 时间：2013-03-26T18:58:52.377
> 
> 标签：c#, visual-studio-2012, libgit2, libgit2sharp

我已经构建了一个小型 wpf 应用程序来管理我正在开发的网站。这个应用程序的主要特点是它允许我检出主题存储库的不同分支。这在 Visual Studio 中完美运行，但是当我在我的 Windows 8 机器上发布、安装和运行该应用程序时，它会返回：

```
{"Unable to load DLL 'git2': The specified module could not be found. (Exception from HRESULT: 0x8007007E)"} 
```

我已经通过互联网和stackoverflow进行了搜索。还有类似的问题，如[Unable to load DLL 'git2.dll' The specified module could not be found](https://stackoverflow.com/questions/6313203/unable-to-load-dll-git2-dll-the-specified-module-could-not-be-found)但是提供的答案（以及答案中描述的github问题中显示的答案）又出现了一个错误：

```
Unable to find an entry point git_reference_oid in git2.dll 
```

我尝试通过 nuget 安装最新版本，包括编译的 dll 并添加 git2.dll，包括我的解决方案中的 libgit2sharp 项目。再一次，当我通过 Visual Studio 运行它时它运行良好，但当我发布、安装和运行它时失败。

我不确定需要包含哪些信息，因此请随时发表评论并让我知道，以便我更新问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:50:30.677

您运行已安装可执行文件的计算机可能缺少 MSVCR100.DLL 或 MSVCR110.DLL（取决于 git2.dll 是否已使用 Visual Studio 2010 或 2012 编译）。

最近在 libgit2 中合并了一个**[修复程序，它消除了对这种依赖关系的需要。](https://github.com/libgit2/libgit2/pull/1315)**

实际上，`dumpbin /IMPORTS git2.dll`针对这些二进制文件运行不再显示对 MSVCR1x0.dll 的任何依赖。

LibGit2Sharp 项目分支的最新提示`vNext`嵌入了那些更新的 git2.dll。建议编译项目（使用该`build.libgit2sharp.cmd`工具并改用此版本（托管程序集 + 本机二进制文件））。

# ios - UIAutomation：有什么方法可以解除“想使用您当前的位置”警报？

> ID：15645236
> 
> 赞同：10
> 
> 时间：2013-03-26T18:59:01.580
> 
> 标签：ios, ui-automation, instruments, ios-ui-automation

我的应用程序正在使用定位服务，对于自动化测试，我希望能够关闭“应用程序希望使用您当前的位置”弹出窗口。但是，当我尝试在 Instruments 中使用 UIAutomation 脚本执行此操作时，我收到此错误：

```
Fail: Could not start script, target application is not frontmost. 
```

这是有道理的，因为警报是由不同的过程产生的。但是，Apple 在这种情况下帮助人们自动化测试的计划是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:36:57.777

```
**Try**

UIATarget.onAlert = function onAlert(alert)
        {
        return true;
        }
alertTitle = target.frontMostApp().alert().name();
if(alertTitle==="APP Would Like To Use Your Current Location")
{
target.frontMostApp().alert().buttons()["OK"].tap();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T13:39:55.763

在触发位置请求对话框出现之前使用此代码。请注意应用名称周围的特殊引号。

```
UIATarget.onAlert = function onAlert(alert)
{
    if( alert.name()=="“local” Would Like to Use Your Current Location" )
    {
        alert.buttons()["OK"].tap();
    }
    else
    {
        UIALogger.logFail( "Location request dialog expected.");
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:27:55.760

解决方案似乎是使用 AppleScript，在足够的延迟后运行以允许出现警报。您告诉它单击模拟器窗口中的警报按钮。

# dll - 用visual studio 2012编译win8 32bit

> ID：15645238
> 
> 赞同：0
> 
> 时间：2013-03-26T18:59:16.063
> 
> 标签：dll, visual-studio-2012, compilation, 32-bit

我有我在 Visual Studio 中制作的项目，其中包含一个可执行文件和它调用的 dll。当我为我有 Visual Studio 的 64 位机器构建它们时一切正常，但是当我将平台更改为 Win32 编译可执行文件和 dll 并尝试在我的 win8 32 位机器上运行它时，我收到以下错误两条消息（两台不同的机器）：

> 程序无法启动，因为您的计算机缺少 MSVCR110.dll。尝试重新安装程序以解决此问题。

和：

> 在动态链接库中找不到过程入口点 ?in@?$codecvt@DDH@std@@QBEHAAHPBD1AAPBDPAD3AAPAD@2。

# linux - 进程因内存过多而终止？

> ID：15645240
> 
> 赞同：1
> 
> 时间：2013-03-26T18:59:19.060
> 
> 标签：linux, memory-management, swapfile

我在 VMWare 上运行了 Ubuntu 12.10（内核 3.9.0-rc2）安装。我给了它 512MB RAM。
cat /proc/meminfo 显示：
MemTotal：507864 KB
MemFree：440180

我想使用交换（出于某种原因），所以我编写了一个 C 程序，它分配了一个 500MB 数组（使用 malloc()）并用垃圾填充它。但是，程序在填满整个数组之前就被杀死了，屏幕上会出现一条消息“Killed”。

我想问这是否是正常行为，这背后的原因是什么？在我看来，应该使用交换，因为可用 RAM 不足。

编辑：我没有提到我有 1GB 交换。cat /proc/swaps 显示：
/dev/sda5 大小：1046524 已使用：14672
。当我运行消耗内存的程序时，“已使用”数量会增加。但是正如你所看到的，很多交换是剩余的。那么为什么程序必须被“杀死”呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:03:14.123

所以我找不到有效的答案。我有一个临时解决方案：

我修改了虚拟机设置，为 VM 提供 512MB RAM。现在我恢复到 2GB 并运行 5 个并行程序，每个程序消耗 500MB。值得庆幸的是，它们都运行并使用了交换。

我只需要将交换用于交换管理项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:17:57.423

您如何编写 C 程序来分配内存以及编译器标志是什么也很重要。例如，如果您正在静态分配内存（例如 double A[N][N]），则行为与动态分配它不同：（例如使用 malloc/calloc）。静态分配受到编译器内存模型的限制（中型、小型等，通常可以指定）。也许，一个好的起点是：

[http://en.wikipedia.org/wiki/C_dynamic_memory_allocation](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)

这有帮助吗？

# node.js - 导致全局变量差异的原因（交互式与脚本）

> ID：15645243
> 
> 赞同：3
> 
> 时间：2013-03-26T18:59:29.660
> 
> 标签：node.js

我遇到了 Node.js 的以下问题^(`v0.10.1`)（通过一个快速示例进行演示）：

在交互式命令行中运行节点时：

```
> global.require
{ [Function: require] . . . }
> require
{ [Function: require] . . . } 
```

运行以下命令时，`script.js`我得到了意想不到的结果：

```
console.log(global.require);     // 1.
console.log(require);            // 2. 
```

```
undefined                        // 1\. `global.require` is undefined!
{ [Function: require] . . .}     // 2\. `require` by itself works however. 
```

[我删除了由`...`. 在本地运行它以查看实际显示的全部内容。]

是什么导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:11:03.460

Node.js 包含一个[repl](http://nodejs.org/api/repl.html)模块，它允许您创建自己的 Read-Evaluate-Print-Loops（这就是它的意思`repl`）。使用这个模块有一个函数[start](http://nodejs.org/api/repl.html#repl_repl_start_options)可以用来创建一个新的 repl。

此函数采用一个`options` 对象，您可以在其中配置您的 repl。这些选项之一称为`useGlobal`. 根据此选项的文档，以下句子是有效的：

> 如果设置为`true`，则 repl 将使用该`global`对象，而不是在单独的上下文中运行脚本。默认为`false`.

现在，当您以交互模式启动 Node.js 时，这基本上只是一个 repl，就像您可以使用该`repl`模块为自己创建的那样。我猜（请注意，这只是一个猜测！）Node.js 的默认 repl 已`useGlobal`设置为`true`.

因此，您有一个`global`对象，它又与全局命名空间完全相同。因此`require`，您可以在全局命名空间中找到的所有功能，您将再次在`global`对象上找到。

一旦以非交互模式启动 Node.js 应用程序，就没有 repl，因此也就没有`global`对象。

这对你有意义吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:11:36.127

许多[全局变量](http://nodejs.org/api/globals.html#globals_global_objects)通常不在全局范围内或[`global`](http://nodejs.org/api/globals.html#globals_global)对象的成员中：

> 这些对象在所有模块中都可用。**其中一些对象实际上不在全局范围内，而是在模块范围内——这将被记录下来。**

这些是第二种解释更多的“*全局变量*”：

*   最顶级的范围。
*   属于当前本地范围以外的可访问范围。

此外，如前所述[`require()`](http://nodejs.org/api/globals.html#globals_require)：

> 需要模块。请参阅[模块](http://nodejs.org/api/modules.html#modules_modules)部分。**`require`实际上不是全局的，而是每个模块的本地。**

管理交互模式的[REPL 模块可以选择将它们](http://nodejs.org/api/repl.html)*提升*到全局范围：

> `useGlobal`- 如果设置为`true`，则 repl 将使用该`global`对象，而不是在单独的上下文中运行脚本。默认为`false`.

# jsf-2 - p：当我更新表单时 inputText 冻结

> ID：15645251
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:00:01.677
> 
> 标签：jsf-2, primefaces

我正在使用带有 primefaces 3.5 的 JSF 2，我遇到以下问题：p：当我更新表单时 inputText 冻结，我的 xhtml 中有以下代码：

```
 <p:panel visible="#{clientesMB.renderPanelEditPerFirmas}" id="panelEditEmpresa" header="Adicionar Personas"> 
                    <h:panelGrid columns="2">  
                        <h:outputText value="Nombre: *" style="font-size: 12px"/>  
                        <p:inputText value="#{clientesMB.personaFirma}"  
                                     style="width: 400px;"
                                     label="text"/>                       
                    </h:panelGrid> 
                    <p:dataTable id="cuentasTabla" var="car" value="#{clientesMB.selectedEmpCliente.personasFirmas}"  widgetVar="carsTable">  
                        <f:facet name="header">  
                            Listado de Personas
                        </f:facet>  
                        <p:column headerText="Nombre" style="width:25%">  
                            <h:outputText value="#{car.nombre}"/>
                        </p:column>   
                        <p:column style="width:4%" exportable="false">  
                            <p:commandButton id="selectButton"  onclick="confirmation.show()" icon="ui-icon-trash" title="Eliminar">  
                                <f:setPropertyActionListener value="#{car}" target="#{clientesMB.personaFirmasSelect}"/>  
                            </p:commandButton>  
                        </p:column>
                    </p:dataTable>  
                </p:panel> 
```

当我调用 Confirmation 并单击 yes 时，outputText 冻结。如果我刷新所有页面，则 outputText 工作正常。这是确认：

```
 <p:confirmDialog id="confirmDialog" message="Realmente desea eliminar el elemento?"  
                             header="Mensaje de Confirmación" severity="alert" widgetVar="confirmation">  
                <p:commandButton id="confirm" value="Si" oncomplete="confirmation.hide()"  
                                 actionListener="#{clientesMB.deleteSelectPersonaFirma}" update=":form2"/> 
                <p:commandButton id="decline" value="No" onclick="confirmation.hide()" type="button" />   
            </p:confirmDialog> 
```

form2 包含面板“panelEditEmpresa”，confirmDialog 为其他形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:40:09.790

我使用了您的代码，但没有遇到您的问题，您是否使用 ajax 作为 inputtext ？（BalusC：[如何在JSF页面中使用<h:form>？单表单？多表单？嵌套表单？](https://stackoverflow.com/questions/7371903/multiple-hform-in-a-jsf-page)）

# hibernate - Infinispan L2 缓存自定义驱逐策略

> ID：15645253
> 
> 赞同：0
> 
> 时间：2013-03-26T19:00:06.730
> 
> 标签：hibernate, jboss, infinispan, cpu-cache

我打算使用 infinispan 作为我的 Hibernate 应用 L2 缓存。我的所有实体都有一个生命周期属性 [New -> Run -> Completed]。最初我的实体处于新状态，随着时间的推移，它会转移到其他状态。

简单地说，我想在实体生命周期属性状态到达 Completed 状态时从缓存中驱逐实体。据我了解，Infinispan 不支持自定义驱逐策略。处理我的情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T06:41:46.157

我会`evict(key)`在正确的时间使用缓存 API 中的方法来实现我自己的逻辑。

> 公共无效驱逐（K键）
> 
> 从缓存的内存中驱逐一个条目。请注意，该条目不会从任何已配置的缓存存储或集群中的任何其他缓存中删除（如果在集群模式下使用）。使用 Cache.remove(Object) 从整个缓存系统中删除一个条目。

一旦实体`"key1"`达到其已完成状态，您就可以开火`ispnCache.evict("key1");`驱逐。

# c# - DataGridView 选择 RowHeader 或 ColumnHeader

> ID：15645254
> 
> 赞同：4
> 
> 时间：2013-03-26T19:00:10.240
> 
> 标签：c#, winforms

我正在尝试实现一个 DataGridView，它允许通过单击行标题来选择整行或通过单击列标题来选择整列。

我尝试覆盖 OnColumnHeaderMouseClick 函数并手动选择列。这仅在我在事件发生之前将 SelectionMode 设置为 ColumnHeaderSelect 时才有效。

任何有关如何获得此行为的帮助将不胜感激！

这是我的 DataGridView 中的相关代码：

```
public class CustomDataGridView : DataGridView
{
    protected override void OnRowHeaderMouseClick(DataGridViewCellMouseEventArgs e)
    {
        this.SelectionMode = DataGridViewSelectionMode.RowHeaderSelect;
        base.OnRowHeaderMouseClick(e);
    }

    protected override void OnColumnHeaderMouseClick(DataGridViewCellMouseEventArgs e)
    {
        this.SelectionMode = DataGridViewSelectionMode.ColumnHeaderSelect;
        base.OnColumnHeaderMouseClick(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T21:16:50.870

我认为您必须手动执行此操作：

```
protected override void OnRowHeaderMouseClick(DataGridViewCellMouseEventArgs e) {
  this.ClearSelection();
  for (int i = 0; i < this.Columns.Count; ++i) {
    this.Rows[e.RowIndex].Cells[i].Selected = true;
  }
  base.OnRowHeaderMouseClick(e);
}

protected override void OnColumnHeaderMouseClick(DataGridViewCellMouseEventArgs e) {
  this.ClearSelection();
  for (int i = 0; i < this.Rows.Count; ++i) {
    this.Rows[i].Cells[e.ColumnIndex].Selected = true;
  }
  base.OnColumnHeaderMouseClick(e);      
} 
```

确保`SelectionMode = CellSelect`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T22:34:21.617

在这里聚会迟到了，但没有必要手动执行此操作（即循环遍历整个 dgv）。

OP 非常接近您的需要。只需捕获 Columns 和 Rows 的 Header Click 事件并相应地设置 SelectionMode。然后强行选择他们单击的任何列/行。

这使它的功能就像 Excel 电子表格一样，您可以在其中单独选择单元格，或通过单击标题选择整个列/行。您还可以通过按住 Shift/Ctrl 选择多个列/行。它还允许对整个列/行进行 Shift-Space 选择（取决于您所处的模式）。这类似于 Excel，除了 Excel 允许不同的功能：Shift-Space 选择行和 Ctrl-Space 选择列，但是嘿......我们不能拥有它。

只需确保 dgv 的初始 SelectionMode 是 Column/RowHeaderSelect 或 CellSelect，而不是 FullColumn/RowSelect，否则他们在单击 Column/Row 标题之前的第一次单击将无法正常工作。

```
Private Sub dgvView_ColumnHeaderMouseClick(sender As Object, e As DataGridViewCellMouseEventArgs) Handles dgvView.ColumnHeaderMouseClick
    With dgvView
        If .SelectionMode <> DataGridViewSelectionMode.ColumnHeaderSelect Then
            .SelectionMode = DataGridViewSelectionMode.ColumnHeaderSelect
            .Columns(e.ColumnIndex).Selected = True
        End If
    End With
End Sub
Private Sub dgvView_RowHeaderMouseClick(sender As Object, e As DataGridViewCellMouseEventArgs) Handles dgvView.RowHeaderMouseClick
    With dgvView
        If .SelectionMode <> DataGridViewSelectionMode.RowHeaderSelect Then
            .SelectionMode = DataGridViewSelectionMode.RowHeaderSelect
            .Rows(e.RowIndex).Selected = True
        End If
    End With
End Sub 
```

# c# - 如何使用没有对象数据源的存储过程填充下拉列表

> ID：15645255
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:00:10.270
> 
> 标签：c#, asp.net, entity-framework, stored-procedures, drop-down-menu

我正在处理一个需要显示不同用户信息的网页。几个不同的用户将使用此页面，因此每个帐户的数据会有所不同。

此信息通过实体模型通过存储过程检索。

我不能使用 objectdatasource，因为我的 DDL SP 需要一个参数（UserId）（除非有办法做到这一点，我不知道！）在页面加载时通过 aspnet 成员资格获取 UserId。此 DDL 还需要在页面打开时填充。我已经对以编程方式填充 DDL 进行了一些研究，但找不到任何适合我尝试做的示例。

当页面打开时，我需要一个带有参数（userId）的 SP 填充（项目和值）的通用 DDL。仅此而已，仅此而已:)

我的问题基本上是；在这些情况下填充下拉列表的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:03:30.910

这篇文章使用 Non-Typed-DataSet 和存储过程绑定到 CheckBoxList 这是相同的原则（警告：自己的博客文章）：

[http://www.codersbarn.com/post/2008/10/12/Bind-CheckBoxList-to-DataSet.aspx](http://www.codersbarn.com/post/2008/10/12/Bind-CheckBoxList-to-DataSet.aspx)

# java - 在 Linux 浏览器（或 Linux 命令行）中为 Java 证书信任库导出 SSL 证书

> ID：15645256
> 
> 赞同：0
> 
> 时间：2013-03-26T19:00:11.823
> 
> 标签：java, ssl, coldfusion-9, keytool, truststore

**背景：**

我在使用带有 ColdFusion 9 的 Web 服务时遇到了一些麻烦（对等体未经过身份验证）。

首先，我将尝试[将证书导入 ColdFusion 的底层 Java 密钥库](http://helpx.adobe.com/coldfusion/kb/import-certificates-certificate-stores-coldfusion.html)。如果这不起作用，我将尝试[使用 ColdFusion 的安全提供程序](http://www.raymondcamden.com/index.cfm/2011/1/12/Diagnosing-a-CFHTTP-issue--peer-not-authenticated)。

但我的问题更具体......

**问题：**

如何在 Chrome（或 Linux CLI）中导出证书（在正确的级别），以及以哪种格式？

**细节**

我已经看到了一些从浏览器导出证书的说明，但它们是针对 IE（旧版本）的，我更喜欢使用 Chrome，因为我在 Linux 上。

为了得到屏幕截图，下面，我：

*   单击 URL 旁边的锁定图标
*   “连接”选项卡（显示“该网站的身份已通过 Thawte SSL CA 验证”）
*   点击“证书信息链接”
*   “详细信息”选项卡

![Chrome 证书导出对话框的屏幕截图](../Images/910652afe37d5f897b3ca6647ae4ad4e.png)

从那里，我可以在四个级别之一导出：

*   内置对象令牌：Thawte Premium Server CA
*   解冻主根 CA
*   解冻 SSL CA
*   sb1.geolearning.com

哪一个合适？

此外，[Adobe 的文档](http://helpx.adobe.com/coldfusion/kb/import-certificates-certificate-stores-coldfusion.html)说“证书必须是可分辨编码规则 (DER) 格式的 X.509 证书。”，Chrome 的导出对话框提供以下选项：

*   Base64 编码的 ASCII，单一证书
*   Base64 编码的 ASCII，证书链
*   DER 编码的二进制、单一证书
*   PKCS #7，单一证书
*   PKCS #7，证书链
*   所有文件

我假设“DER编码的二进制，单一证书”是合适的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:11:16.703

# 使用浏览器

以下生成了一个我可以使用 keytool 导入的证书：

*   级别：sb1.geolearning.com
*   文件类型：DER编码的二进制，单一证书

对于后代，这是用于导入的命令：

```
sudo keytool -import -keystore /opt/jrun4/jre/lib/security/cacerts -alias "sb1.geolearning.com (Thawte SSL CA)" -storepass changeit -noprompt -trustcacerts -file ~/Downloads/sb1.geolearning.com 
```

* * *

# 没有浏览器

这就是我这些天正在做的事情（在 Vagrant 供应商中）。在这个脚本中，密钥库是硬编码的，因为我现在只将它用于 Lucee；但是，密钥库的路径可以很容易地参数化。此外，`runfile`相关代码只是让 Vagrant 不会多次运行脚本；如果您不将代码用作 Vagrant 供应商，那么这些行是多余的。

与上述解决方案真正区别的唯一一点是，它通过`openssl s_client`（并用 清理它`sed`）而不是通过浏览器手动获取证书。

```
#!/usr/bin/env bash
set -e

description="Add cert to Lucee's keystore."

while :
do
    case $1 in
        --provisioned-dir=*)
            provisioned_dir=${1#*=}        # Delete everything up till "="
            shift
            ;;
        --runfile-name=*)
            runfile_name=${1#*=}        # Delete everything up till "="
            shift
            ;;
        --site-host-name=*)
            site_host_name=${1#*=}        # Delete everything up till "="
            shift
            ;;
        -*)
            echo "WARN: Unknown option (ignored): $1" >&2
            shift
            ;;
        *)  # no more options. Stop while loop
            break
            ;;
    esac
done

runfile="${provisioned_dir}/${runfile_name}"

if [ -f "${runfile}" ]; then
  echo "${description}: Already run."
  exit 0
fi

echo "add cert to keystore"

echo -n | \
  openssl s_client -connect ${site_host_name}:443 \
  | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' \
  > /tmp/${site_host_name}.cert

/opt/lucee/jdk/jre/bin/keytool \
  -import \
  -keystore /opt/lucee/lib/lucee-server/context/security/cacerts \
  -alias "${site_host_name} (self-signed)" \
  -storepass changeit \
  -file /tmp/${site_host_name}.cert \
  -noprompt \
  || true

touch "${runfile}" 
```

# vb.net - 如何设置标签的文本等于数据绑定列表框的选定项？

> ID：15645257
> 
> 赞同：0
> 
> 时间：2013-03-26T19:00:17.987
> 
> 标签：vb.net

我已将 ListBox 的 DisplayMember 设置为“Employee”列，并将 ValueMember 设置为“EmpID”列。列表框填充良好，但标签永远不会改变。我对此很陌生，无法弄清楚我错过了什么。这是我的代码：

```
Me.EmployeeTableAdapter.Fill(Me.TimeCards2DataSet.Employee)

Label1.Text = lstEmployees.SelectedItem.ToString 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:12:44.283

您可能正在寻找 SelectedIndexChanged 事件：

```
Private Sub lstEmployees_SelectedIndexChanged(sender As Object, e As EventArgs) _
                         Handles lstEmployees.SelectedIndexChanged
  If lstEmployees.SelectedItem Is Nothing Then
    Label1.Text = String.Empty
  Else
    Label1.Text = lstEmployees.SelectedValue.ToString
  End If
End Sub 
```

或者，如果使用 DataBinding：

```
Label1.DataBindings.Add("Text", Me.TimeCards2DataSet.Employee, "Employee") 
```

# css - CSS - 背景图像拉伸

> ID：15645261
> 
> 赞同：1
> 
> 时间：2013-03-26T19:00:22.013
> 
> 标签：css, background

我正在尝试在此网站上获得类似的背景效果：

![在此处输入图像描述](../Images/14f54b8972cd61c12e6cfd45f5726733.png)

通过查看它，网站的背景是黑色的，但有一个水平拉伸的背景图像保留在页面顶部。当页面向下滚动时，图像会停留在顶部，但会融入背景颜色。

我尝试制作示例中的图像并使用`background-size:cover`，但是当我向下滚动时，图像保持静态，只有内容滚动。如果这有任何意义！

通过查看示例，有人可以解释实现这一点需要什么 CSS 吗？而且，图像尺寸应该是多少（在 PS 中），以允许它在更大的浏览器中拉伸而不损失质量？

我尝试查看网站的 CSS 文件以了解发生了什么，但它都集中在一条线上，并且难以解决。

我会添加一个指向该站点的链接以显示它是如何滚动的，但显然我是不允许的，所以必须做一个屏幕截图。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:06:35.257

看起来背景使用了css：

```
background:#000000 url(<img>) no-repeat scroll center top; 
```

设置背景颜色和图像，将图像静态放置在顶部，以便向下滚动后，背景颜色仅可见。

要查看此效果，请使用 chrome，将 css 更改为：

```
background:#00FF00 url(<img>) no-repeat scroll center top; 
```

你会看到发生了什么。

# c# - 如何添加具有自己独特图像的 listViewItem

> ID：15645265
> 
> 赞同：0
> 
> 时间：2013-03-26T19:00:28.093
> 
> 标签：c#, .net, listview, listviewitem, imagelist

C# 的 ListView 具有以下可用于添加条目的添加方法

```
public virtual ListViewItem Add(ListViewItem value)
public virtual ListViewItem Add(string text)
public virtual ListViewItem Add(string text, int imageIndex)
public virtual ListViewItem Add(string text, string imageKey)
public virtual ListViewItem Add(string key, string text, int imageIndex)
public virtual ListViewItem Add(string key, string text, string imageKey) 
```

**场景：**我有一个 ListView 并希望在第一列中动态添加 ListViewItems 与他们自己独特的图像。此外，这些图像可以根据状态变化进行更新

**问题：**你会怎么做？

**我正在使用的代码**

```
 private void AddToMyList(SomeDataType message)
        {
            string Entrykey = message.ID;

            //add its 1 column parameters
            string[] rowEntry = new string[1];
            rowEntry[0] = message.name;

            //make it a listviewItem and indicate its row
            ListViewItem row = new ListViewItem(rowEntry, (deviceListView.Items.Count - 1));

            //Tag the row entry as the unique id
            row.Tag = Entrykey;

            //Add the Image to the first column
            row.ImageIndex = 0;

            //Add the image if one is supplied
            imagelistforTypeIcons.Images.Add(Entrykey, message.marker.markerIcon);

            //finally add it to the device list view
            typeListView.Items.Add(row);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:11:55.653

你需要做两件事

*   将图像添加到 ImageList，如果它还没有在其中
*   创建新的 ListViewItem 并将图像从前一点分配给它

根据您的代码，它可能会像这样：

```
// Add markerIcon to ImageList under Entrykey
imagelistforTypeIcons.Images.Add(Entrykey, message.marker.markerIcon);
// Use icon from ImageList which is stored under Entrykey
ListViewItem row = new ListViewItem(rowEntry);
row.ImageKey = Entrykey;
// Do whatever else you need afterwards
row.Tag = Entrykey;
.... 
```

* * *

您的问题中的代码问题（没有实际尝试过）看起来是`ImageIndex`您正在分配的问题。

*   您正在将新图像添加到一个图像列表，但将图像分配给另一个`ListViewRow`图像
*   您在构造函数中提供图像索引，但之后将其设置为 0（为什么？）
*   您首先提供了错误的图像索引，因为您在添加新图像之前计算了图像列表中最后一个图像的索引。

所以你的代码也可以这样：

```
// Add markerIcon to ImageList under Entrykey
imagelistforTypeIcons.Images.Add(Entrykey, message.marker.markerIcon);
// Use icon from ImageList which is stored under Entrykey
ListViewItem row = new ListViewItem(rowEntry);
row.ImageIndex = imagelistforTypeIcons.Items.Count - 1;
// Do whatever else you need afterwards
row.Tag = Entrykey; 
```

# c# - IIS ASP.NET 4.0 异常并在私有字段上使用反射

> ID：15645268
> 
> 赞同：1
> 
> 时间：2013-03-26T19:00:35.827
> 
> 标签：c#, iis, reflection

当托管在运行 asp.net 4 的 IIS 中时，我们遇到以下代码问题：

```
 DataTable dt = new DataTable();
        FieldInfo TableCaseSensitiveAmbientFieldInfo =
            typeof(DataTable).GetField("_caseSensitiveUserSet", BindingFlags.Instance | BindingFlags.NonPublic);
        TableCaseSensitiveAmbientFieldInfo.SetValue(dt, true); 
```

.SetValue() 调用失败并出现 FieldAccessException（此代码来自公共源代码文件名 ADONetHelper.cs，该文件名来自名为 CompactFormatterPlus 的公共源 dll）

这似乎只在 IIS 中托管时才会发生。

我们认为这是由于反射/代码访问权限（在搜索答案之后），但我们还没有找到正确的值集来使该代码能够工作。

有什么想法吗 ？？谢谢，弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:14:35.993

仅当代码在完全信任下运行时，反映私有成员才有效。默认情况下，ASP .NET 以中等信任运行。

因此，您需要将您的应用程序配置为完全信任地运行才能使其正常工作。

如何执行此操作在这篇[ASP .NET 信任级别](http://msdn.microsoft.com/en-us/library/ie/wyts434y.aspx)文章中进行了说明，但基本上您必须将程序集添加到web.config 中元素`<fullTrustAssemblies>`下的列表中。`<securityPolicy>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:11:37.540

默认情况下，在 IIS 7.0 中，应用程序以“中等信任”运行。并且默认情况下，使用 Medium Trust 禁用 ReflectionPermission。

[中等信任摘要](http://msdn.microsoft.com/en-us/library/ms998341.aspx)

> 中等信任 Web 应用程序的主要限制是： ... ReflectionPermission 不可用。这意味着您不能使用反射。

但似乎[DataTable.CaseSensitive 属性](http://msdn.microsoft.com/en-us/library/system.data.datatable.casesensitive.aspx)有一个 getter 和一个 setter。我建议您尽可能避免反思。例如，当您将来升级到另一个 .NET 框架时，该私有方法可能会消失，您的应用程序将会中断。

如果您正在（反）序列化 DataSet，也许更好的主意是“手动”更改序列化 XML 中的“caseSensitiveAmbient”部分。

# java - 程序可以区分用户键输入和程序键输入吗？

> ID：15645276
> 
> 赞同：6
> 
> 时间：2013-03-26T19:01:05.923
> 
> 标签：java, c++, events, key, filtering

程序是否可以阻止来自其他程序的键输入，但不能直接从用户的手敲击键盘上的键进行键输入？

例如：

ProgramA 包含一个文本字段。

ProgramB 是 Windows 屏幕键盘。

在 ProgramA 中选择文本字段后，我尝试按屏幕键盘程序上的字母“c”，但它没有出现在文本字段中。

但是，当我直接从键盘上按字母“c”时，它会出现在 ProgramA 的文本字段中。

我知道关键事件是如何工作的，它们是如何排队的，并且我已经看到了 C++ 中的 BlockInput 函数

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646290%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646290%28v=vs.85%29.aspx)

但该功能只是阻止所有输入。

我遇到过以这种方式过滤输入的程序，但似乎无法弄清楚如何。我错过了一些完全明显的东西吗？

这个问题主要与Windows 7操作系统上的c++有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:24:26.740

您永远无法确定输入是否来自硬件。最简单的示例是自定义驱动程序，它将模拟由软件输入驱动的真实键盘。

一些奇特的想法可以将麦克风连接到设备，以收听声音/振动以进行输入过滤，但您的意思是完整的硬件解决方案或应用程序，将提供给个人用户吗？

# javascript - 获取唯一元素计数jquery

> ID：15645281
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:01:13.563
> 
> 标签：javascript, jquery

我有以下 HTML

```
<input type="hidden" name="product_id" value = "1" class="product_id" />
<input type="hidden" name="product_id" value = "2" class="product_id" />
<input type="hidden" name="product_id" value = "5" class="product_id" />
<input type="hidden" name="product_id" value = "1" class="product_id" />
<input type="hidden" name="product_id" value = "2" class="product_id" />
<input type="hidden" name="product_id" value = "2" class="product_id" /> 
```

我怎样才能得到`count`元素`Unique`（元素的唯一值）？

这可能`without looping`吗？

预期结果 ：

```
UNIQUE ID  COUNT
-----------------
  1          2  
  2          3
  5          1 
```

> 我尝试过的类似于下面的内容，但是这种方法的问题是它会循环所有元素。正如您所看到的，在第一次迭代中我们可以理解 of 的计数`product_id`，`1`因此它需要跳过任何其他相同的元素`product_id`. 我有一堆元素，我不喜欢循环所有元素。

```
$(".product_id").each( function(){

  //CHECK THE COUNT AND SAVE IT TO SOME ARRAY

}); 
```

更新 ：

> 可以投反对票，但是如果您对该投反对票发表评论，那将非常有帮助。我特别提到`without`了循环，因为我虽然有时可能使用 jQuery 强大的 CSS 选择器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:07:12.427

您可以使用对象作为键 -> 计数对来累积值，尽管如果不循环元素就无法完成，无论是使用显式循环还是使用辅助函数，例如`.each`：

```
var count = {};
$('.product_id').each(function() {
    count[this.value] = count[this.value] + 1 || 1;
}); 
```

然后，您必须*再次*循环以遍历计数值。

虽然您*可以*使用 jQuery 选择器来计算所有匹配相同值的元素，但实际上它的效率远低于仅遍历每个元素。此处提供的代码是 O(n)，但是找到每个新唯一值然后计算它出现的次数的替代算法大约是 O(n^2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:03:16.420

使用您要计算的值获取所有输入的长度。

`$("input[value='1']").length;`

这只有在我们知道值的情况下才有效

# powershell - Powershell - 导出邮箱信息

> ID：15645283
> 
> 赞同：0
> 
> 时间：2013-03-26T19:01:29.447
> 
> 标签：powershell, exchange-server-2010

所以我有以下脚本——据我所知，我想导出 Get-Mailbox 信息和 Get-MailboxStatistics 信息，它们都处理邮箱的不同方面，涉及我们可以导出的信息。

```
Get-Mailbox -Server Server01 -ResultSize unlimited |
 Where {$_.UseDatabaseQuotaDefaults -eq $false} |
   ft DisplayName,IssueWarningQuota,ProhibitSendQuota,@{label="TotalItemSize(MB)";expression={(Get-MailboxStatistics $_).TotalItemSize.Value.ToMB()}} 
```

问题 1：当我运行脚本时，我在 TotalItemSize 字段中没有得到任何信息吗？问题 2：如果我添加`| Export-CSV C:\test.csv`，我会得到垃圾！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:53:19.067

您在 export-csv 上遇到垃圾，因为您正在尝试导出格式表数据。将该格式表换成选择对象，它会更好地工作。

```
$MBXs = Get-Mailbox -Server Server01 -ResultSize Unlimited |
 Where {$_.UseDatabaseQuotaDefaults -eq $false} 

 &{
 foreach ($MBX in $MBXs)
  {$MBX | select DisplayName,IssueWarningQuota,ProhibitSendQuota,@{label="TotalItemSize(MB)";expression={(Get-MailboxStatistics $MBX).TotalItemSize.Value.ToMB()}}}
  }|export-csv mbxquotas.csv 
```

# php - 如何检测鼠标光标在div中的位置

> ID：15645285
> 
> 赞同：3
> 
> 时间：2013-03-26T19:01:29.920
> 
> 标签：php, javascript, jquery, ajax

我有一个 100 像素宽的矩形跨度，我希望用户从 0-100% 中进行选择。

无论他们沿宽度在 div 中的哪个位置单击，该值都会被保存并立即使用 ajax 显示给用户。因此，如果他们恰好在 div 的中间单击，则保存的值将是 50%。

我想不出一种优雅的方式来做到这一点！有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T20:16:10.503

### 考虑`<input type="range"/>`结合使用`<span>`

-编辑-

作为对评论的回应，通过[此插件添加了对 Firefox 的后备支持](https://github.com/fryn/html5slider)

> `[**Updated Demo Fiddle with Polyfill :** http://jsfiddle.net/V3ygq/2/](http://jsfiddle.net/V3ygq/2/)`

~~[**演示小提琴：http:** //jsfiddle.net/V3ygq/](http://jsfiddle.net/V3ygq/)~~

### HTML

将范围放在 100px 宽的范围内`<span>`。

```
<div id="console">...</div>
<span id="container">
     <input id="myRange" type="range" min="0" max="100" />
</span> 
```

### jQuery

在 上`change()`，对值做一些事情：

```
$(function () {
    $("#myRange").on('change', function () {
        // Pull out value, set html of #console DIV
        $("#console").html($(this).val());
    });
    // Set initial value of #console
    $("#myRange").trigger('change');
}); 
```

### CSS

隐藏范围选择器`<span>`，但仍允许点击更改其值

```
#container {
    width: 100px;
    background: #333;
}
#container input {
    opacity: 0;
} 
```

# wordpress - 特定列表项的 CSS 类

> ID：15645292
> 
> 赞同：0
> 
> 时间：2013-03-26T19:02:18.600
> 
> 标签：wordpress, wordpress-theming

如果某个自定义帖子类型的最新帖子不超过一周，我想将 CSS 类添加到特定的导航菜单项 (li)。

这是我到目前为止得到的。它工作正常，但将 CSS 类添加到所有菜单项。如何通过 id 定位特定的 li？

```
function blog_menu_item_new_posts( $classes, $item ) {
   global $wpdb;

   $latest_post = $wpdb->get_var( "SELECT post_date FROM $wpdb->posts WHERE post_type = 'blogposts' AND post_status = 'publish' ORDER BY ID DESC LIMIT 0,1" );

   $latest_post_date = strtotime($latest_post);
   $threshold = strtotime("-1 week");

   if ( $latest_post_date >= $threshold ) {
     array_push( $classes, "new-posts" );
   }

   return $classes;
}

add_filter( "nav_menu_css_class", "blog_menu_item_new_posts", 10, 2 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:20:50.933

这是通过 id 仅针对特定菜单项的工作代码（在本例中为 id 101）：

```
function blog_menu_item_new_posts( $classes, $item ) {
   global $wpdb;

   $latest_post = $wpdb->get_var( "SELECT post_date FROM $wpdb->posts WHERE post_type = 'blogposts' AND post_status = 'publish' ORDER BY ID DESC LIMIT 0,1" );

   $latest_post_date = strtotime($latest_post);
   $threshold = strtotime("-1 week");

   if ( ( $latest_post_date >= $threshold ) && ($item->ID == 101) ) {
    array_push( $classes, "new-posts" );
   }

   return $classes;
}

add_filter( "nav_menu_css_class", "blog_menu_item_new_posts", 10, 2 ); 
```

# ios - iOS：来自 iOS 应用程序的 Shell 脚本

> ID：15645294
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:02:29.720
> 
> 标签：ios, objective-c, shell, darwin

我相信，我们可以从 iOS App 运行 shell 脚本。谁能告诉我 iOS 中的默认 shell 是什么以及如何从 iOS App 调用 shell 脚本？

（（请考虑我在后台运行脚本。我将脚本的返回值捕获到一个变量中。（下一行不是确切的代码。伪。Zsh shell 是默认的 - 我认为。） myVar= `MyiOSAppBundle\Script.zsh` ））

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:12:45.577

You cannot do this in iOS. If you are jailbroken, you may be able to, but otherwise applications are not given admin permissions.

Apple's guide on [The iOS Environment](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html) in which an app lives may give you more insight.

Apple says in their May 2012 document titled "[iOS Security](http://images.apple.com/ipad/business/docs/iOS_Security_May12.pdf)": `Because iOS achieves a reduced attack surface by limiting listening ports and removing unnecessary network utilities such as telnet, shells, or a web server, it doesn’t need firewall software.`

Your question lacks details. What are you trying to accomplish? What have you tried? Are you intending to develop for a jailbroken device or for the App Store? Please edit your original question or create a new, more complete one.

# python - 等待 I/O 或等待释放锁是如何实现的？

> ID：15645296
> 
> 赞同：1
> 
> 时间：2013-03-26T19:02:31.150
> 
> 标签：python, multithreading, io

我很好奇。我已经用 Python 编程多年了。当我运行一个阻塞 I/O 的命令（无论是硬盘读取还是网络请求），或者在等待释放锁时阻塞，这是如何实现的？线程如何知道何时重新获取 GIL 并重新开始运行？

我想知道这是否是通过不断检查（“输出现在在这里吗？现在在这里吗？现在呢？”）来实现的，我认为这很浪费，或者以更优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:04:37.727

无需重复检查 I/O 完成或锁定释放。

I/O 完成，由驱动程序的硬件中断发出信号，或由另一个线程的软件中断发出的锁释放信号，将使等待这些操作的线程“立即”准备好，很可能正在运行，很可能会抢占运行时的另一个线程。本质上，在软件或硬件中断之后，操作系统可以决定中断返回到与被中断线程不同的线程。

这种机制的高 I/O 性能，消除了任何轮询或检查，是 99% 的原因可以忍受先发制人的多任务处理程序的痛苦。

# ios - 如何在 IOS 上构建 IOS 应用程序？

> ID：15645297
> 
> 赞同：1
> 
> 时间：2013-03-26T19:02:31.773
> 
> 标签：ios, codea

我用 Codea 制作了一个应用程序并导出到 XCode 项目。有没有办法在IOS（或Windows）上构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:11:10.133

确实。

iNinjas 的一些人已经成功地将 Clang-LLVM 工具链移植到 iOS 上运行。[这是一个下载链接](http://ininjas.com/repo/debs/clang-llvm_3.1-1_iphoneos-arm.deb)- 在您的 iOS 设备上安装 deb。您还必须将开发 sysroot（`iPhoneOSX.Y.sdk`文件夹）从您的计算机复制到您的移动设备。**该设备也必须越狱。**

（我不记得是否有任何其他软件包要安装，但也许来自 Cydia 的 odcctools 等，只是谷歌它。）

之后，您必须编译并链接所有文件。当然，Xcode 对项目文件使用专有格式，因此您不能只期望编译器从 Xcode 项目构建，而是必须编写一个 Makefile 来指定所有`.m`文件都将是编译。然后您将拥有一个可执行文件，您可能需要也可能不需要共同设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:26:46.390

以下是从 Codea/Xcode 项目创建应用程序的教程：http: [//codeatuts.blogspot.nl/2012/08/tutorial-12-submitting-to-app-store.html](http://codeatuts.blogspot.nl/2012/08/tutorial-12-submitting-to-app-store.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T00:22:50.817

好吧，如果你已经有一台 mac，你可以使用 Dringend 从你的 iPad 上编译它。它需要在你的 Mac 上运行一个程序来进行实际编译，然后将文件发送回 iPad 上的 Dringend，它会安装它。这需要有一台 Mac，但可以让您在远离 Mac 的 iPad 上编程。这还需要 iOS 开发人员许可证，用于代码签名身份。

# html - 相对链接在 HTML (Apache2) 中不起作用？

> ID：15645299
> 
> 赞同：1
> 
> 时间：2013-03-26T19:02:34.630
> 
> 标签：html, linux, apache

我正在用我的树莓派运行 Apache 2 服务器，一切正常。我想配置“.htaccess”，所以我不得不移动一些文件。所以在“/var/www”中，我创建了一个名为“html”的文件，并将我所有的图片和网页都移到了其中。但是，我将“index.html”留在了“/var/www”中。所有这一切都很好，除了一件事。我有一个从 index.html 到另一个名为 test.html 的页面的链接。我有另一个来自 test.html 的链接可以返回 index.html 页面，但这不起作用。“test.html”存储在：“/var/www/html”，“index.html”存储在“/var/www”。所以，我在“test.html”中使用了一个相对链接，向上一个目录，到“/var/www/index.html”，但它不起作用！

```
Not Found

The requested URL /html/index.html was not found on this server.
Apache/2.2.22 (Debian) Server at myIP Port 80 
```

这是我用于相对路径的小代码，很确定它是正确的。

```
<a href = "../index.html">Click here to go back</a> 
```

# android - 如何检测安卓手机是否安装了特定的应用程序？

> ID：15645303
> 
> 赞同：0
> 
> 时间：2013-03-26T19:02:41.403
> 
> 标签：android, detection, smartphone

我已经使用此处描述的元标记为 iPhone 应用程序检测完成了此操作：

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

现在我正在尝试对 Droid-app 嗅探做同样的事情。基本上，我想检查用户是否安装了“嗅探”应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:08:14.430

*如何检测智能手机是否安装了 Android 应用程序？*

为了使代码工作更改`"com.your.package.appname.id"`与应用程序 id。

id 是应用程序包，也是市场 URL，例如。市场上的 gmail 应用程序 url 是[`https://play.google.com/store/apps/details?id=com.google.android.gm`](https://play.google.com/store/apps/details?id=com.google.android.gm)id/packagename 是`com.google.android.gm`

```
import android.app.Activity;
import android.content.pm.PackageManager;
import android.os.Bundle;

public class Example extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //Put the package name here...
        boolean installed  =   appInstalledOrNot("com.your.package.appname.id");
        if(installed)
        {
                  System.out.println("App already installed om your android");
        }
        else
        {
            System.out.println("App is not installed om your android");
        }
    }
    private boolean appInstalledOrNot(String uri)
    {
        PackageManager pm = getPackageManager();
        boolean app_installed = false;
        try
        {
               pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
               app_installed = true;
        }
        catch (PackageManager.NameNotFoundException e)
        {
               app_installed = false;
        }
        return app_installed ;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:06:30.747

由此：[如何获取已安装的 android 应用程序列表并选择一个运行](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

```
final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
final List pkgAppsList = context.getPackageManager().queryIntentActivities( mainIntent, 0); 
```

现在，从 pkgAppList 您可以查看应用程序是否已安装

# google-drive-api - 如何检查谷歌驱动器中是否存在文件夹？（红宝石客户端）

> ID：15645306
> 
> 赞同：0
> 
> 时间：2013-03-26T19:02:46.403
> 
> 标签：google-drive-api

看来我只能返回文件夹的内容，但没有关于文件夹本身的信息。

```
 results = client.execute({
    :api_method => drive.files.list,
    :q => "mimeType='application/vnd.google-apps.folder' AND trashed=false AND title='#{app_folder_name}'",
    :maxResults => 1
  }) 
```

返回的 results.to_hash["items"] 数组填充了文件夹的内容（包括子文件夹和文件）。我怎样才能获得有关文件夹本身的信息？我想做的就是检查它是否存在。而且似乎 maxResults 也被忽略了，因为该数组有多个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:48:02.673

Google Drive 上的文件夹类似于普通文件，但具有特殊的 MIME 类型（“application/vnd.google-apps.folder”）。获得文件夹的 ID 后，您可以通过[`files.get`](https://developers.google.com/drive/v2/reference/files/get)请求访问其元数据：

```
##
# Print a file's metadata.
#
# @param [Google::APIClient] client
#   Authorized client instance
# @param [String] file_id
#   ID of file to print
# @return nil
def print_file(client, file_id)
  drive = client.discovered_api('drive', 'v2')
  result = client.execute(
    :api_method => @drive.files.get,
    :parameters => { 'fileId' => file_id })
  if result.status == 200
    file = result.data
    puts "Title: #{file.title}"
    puts "Description: #{file.description}"
    puts "MIME type: #{file.mime_type}"
  else
    puts "An error occurred: #{result.data['error']['message']}"
  end
end 
```

# c# - 无法在 WPF ItemsControl 中快速显示图像列表

> ID：15645307
> 
> 赞同：1
> 
> 时间：2013-03-26T19:03:02.587
> 
> 标签：c#, .net, wpf, listbox, listboxitem

我有带有一些自定义复杂数据模板的 ItemsControl（列表框）。用这个列表框显示窗口需要几秒钟！

我的列表框数据模板包含图像：

```
<Image Stretch="Uniform"
       x:Name="image"
       Grid.ColumnSpan="1"
       Source="{Binding ImagePath}"
       HorizontalAlignment="Stretch"
       VerticalAlignment="Stretch"
       Width="Auto"
       Grid.Column="0"
       MinWidth="20"
       MinHeight="20"
       d:LayoutOverrides="GridBox"
       Margin="1,0,1,1" /> 
```

几乎所有的 ImagePaths 都是空的。我注意到这个 null 会产生异常，但 wpf 引擎会隐藏它！我认为这是问题的根源。当我知道图像路径为空时，是否可以禁用图像加载！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:07:58.943

将此添加`DataTrigger`到您的`DataTemplate`：

```
<DataTrigger Binding="{Binding ImagePath}" Value="{x:Null}">
    <Setter TargetName="image" Property="Source" Value="{x:Null}"/>
</DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:08:01.463

尝试`FallBackValue`在引发绑定异常时设置值的属性（[msdn 链接](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)），例如：`FallbackValue="pack://application:,,,/Resources/Images/nocover.png"`或`{x:null}`

当绑定数据为空时，还有 `TargetNullValue`一个设置默认值

另一种选择是尝试使用如果参数为空则返回默认值的转换器。

[在这里](https://stackoverflow.com/questions/8530957/handling-null-when-binding-to-an-image-in-xaml)解决了类似的问题

# php - 仅显示来自隐藏输入的一个值

> ID：15645312
> 
> 赞同：0
> 
> 时间：2013-03-26T19:03:18.220
> 
> 标签：php, javascript, forms

```
<?php
foreach($_color_swatch as $_inner_option_id){
  preg_match_all('/((#?[A-Za-z0-9]+))/', $_option_vals[$_inner_option_id]['internal_label'], $matches);
  if ( count($matches[0]) > 0 ) {
    $color_value = $matches[1][count($matches[0])-1];
?>

<li>
<input type="hidden" id="fakecolor" value="<?php echo $color_value;?>"/>
<div onclick="alert(document.getElementById('fakecolor').value);">
 <img src="<?php echo $color_value;?>.png" /></div>
</li>

<?php
}
}
?> 
```

这适用于使用 $color_value 显示图像，但我需要将隐藏输入中的值传递给另一个 javascript 函数。当我单击 div 时，无论 foreach 中有多少个值，它都只显示一个值。谁能给我一点帮助？谢谢。

这是输出：

```
 <li>
    <input type="hidden" id="fakecolor" value="red"/>
    <div onclick="alert(document.getElementById('fakecolor').value);"><img src="red.png"/></div>
    </li>
    <li>
    <input type="hidden" id="fakecolor" value="blue"/>
    <div onclick="alert(document.getElementById('fakecolor').value);"><img src="blue.png"/></div>
    </li>
    <li>
    <input type="hidden" id="fakecolor" value="white"/>
    <div onclick="alert(document.getElementById('fakecolor').value);"><img src="white.png"/></div>
    </li>
    <li>
    <input type="hidden" id="fakecolor" value="green"/>
    <div onclick="alert(document.getElementById('fakecolorx').value);"><img src="green.png"/></div>
    </li> 
```

但是当我单击每个 div 时，它只显示第二个蓝色的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:15:10.333

您在同一页面上有多个 ID，这将导致`getElementById`失败。你为什么不像这样循环和构造你的 JavaScript：

```
<div onclick="alert("<?php echo $color_value; ?>");"> 
```

如果您从 just 开始，`alert`您可以使用带有字符串参数的任何 JavaScript 函数来接受颜色值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:12:25.727

我不太明白你要做什么，仍然：

```
<input type="hidden" id="fakecolor" value="<?php echo $color_value;?>"/>
<div onclick="alert(document.getElementById('fakevalue').value);"> 
```

第一行：您在循环时使用了唯一的 id，因此您将获得多个具有相同 id 的元素，并且您将始终以 document.getElementById 结束第一个元素。
第二行：你不应该得到隐藏字段的值吗？（即#fakecolor，而不是你得到的#fakevalue）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:17:17.947

尝试这样的事情：

```
 <?php
    $cont = 0;

    foreach($_color_swatch as $_inner_option_id){
      preg_match_all('/((#?[A-Za-z0-9]+))/', $_option_vals[$_inner_option_id]['internal_label'], $matches);
      if ( count($matches[0]) > 0 ) {
        $color_value = $matches[1][count($matches[0])-1];
    ?>

    <li>
    <input type="hidden" id="fakecolor<?php echo $cont; ?>" value="<?php echo $color_value;?>"/>
    <div onclick="alert(document.getElementById('fakecolor<?php echo $cont; ?>').value);">
     <img src="<?php echo $color_value;?>.png" /></div>
    </li>

    <?php
    }
    $cont = $cont + 1;
    }
    ?> 
```

这样，每个隐藏的输入都有不同的 id，与 onclick 函数相同。

萨卢多斯 ;)

# ruby - 为什么 Discourse 运行如此缓慢？

> ID：15645317
> 
> 赞同：5
> 
> 时间：2013-03-26T19:03:30.767
> 
> 标签：ruby, virtualbox, vagrant, discourse

我不确定链条中的哪个环节导致了问题。我刚刚在 Windows 机器上完成了关于 Vagrant 的 Discourse 设置。一切似乎都运行良好，除了在浏览器中加载 Discourse 需要 86000 毫秒（一分半钟！）。有些东西告诉我，它不应该那么慢。我在哪里可以查找可能导致此问题的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T10:20:12.413

这是论坛上最相关的讨论。

[http://meta.discourse.org/t/development-mode-super-slow/2179](http://meta.discourse.org/t/development-mode-super-slow/2179)

确保您在虚拟机中分配了足够的资源。

您也可以在开发配置中尝试此操作

```
#config/environments/development.rb

config.cache_classes = true 
```

这对我的渲染时间产生了巨大的影响。从 8 分钟到 30 秒。不过还是有点慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:23:01.807

测试 Discourse 时，我的 VM 中遇到了同样的问题。您实际上需要做的是更改 WEBrick 的配置设置。寻找您的 WEBrick 配置，这通常在`/usr/lib/ruby/1.9.3/webrick/config.rb`您的配置中可能会有所不同，这完全取决于您的特定设置。

然后改变这一行

```
:DoNotReverseLookup => nil, 
```

对此

```
:DoNotReverseLookup => true, 
```

重新启动 WEBrick，你应该一切顺利。

# c++ - 无法将 WSPStartup 设置为 dll 导出

> ID：15645322
> 
> 赞同：4
> 
> 时间：2013-03-26T19:03:51.547
> 
> 标签：c++, dll, winsock, dllexport, winsock-lsp

我正在尝试为 winsock 编写 LSP，并且根据 MSDN 文档，该 dll 应该导出单个函数即。Ws2spi.h 中定义的 WSPStartup()

编译时出现错误：

```
error C2375: 'WSPStartup' : redefinition; different linkage 
```

如果我附加

```
__declspec(dllexport) 
```

对它的指示。另一方面，如果我使用

```
__control_entrypoint(DllExport) 
```

它编译得很好，但实际上并没有导出函数。我使用依赖查看器进行了检查。为了确保其他 LSP 实现是否导出函数，我在 VMWares vsocklib.dll 和 mswsock.dll 上使用了依赖查看器，这两个 dll 都导出了上述函数。

我的示例实现如下：-

```
// dllmain.cpp : Defines the entry point for the DLL application.

#include "stdafx.h"
#include <Ws2spi.h>

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

__declspec(dllexport)
__checkReturn
int
WSPAPI
WSPStartup(
    __in WORD wVersionRequested,
    __in LPWSPDATA lpWSPData,
    __in LPWSAPROTOCOL_INFOW lpProtocolInfo,
    __in WSPUPCALLTABLE UpcallTable,
    __out LPWSPPROC_TABLE lpProcTable
    )
{
    return 0;
} 
```

那么我在这里做错了什么？如何制作导出 WSPStartup() 函数的 DLL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:37:04.233

由于函数原型在**Ws2spi.h**文件中给出，因此在定义中向函数添加任何类型的附加说明符都会导致编译器给出“重新定义”错误。

同样不可能通过 declspec(dllexport) 直接导出它，这将创建一个修饰名称，因为 WSPAPI 说明符将该函数声明为 stdcall。

为了缓解所有这些问题，我通过 DEF 文件导出了该方法，如本文所示 -[使用 DEF 文件从 DLL 导出](https://docs.microsoft.com/en-us/cpp/build/exporting-from-a-dll-using-def-files)

我相信这是在您的 dll 中导出未修饰的 WSPStartup() 函数的唯一正确方法。

# ios - 定位 GMSMapView 以一次显示多个注释

> ID：15645323
> 
> 赞同：6
> 
> 时间：2013-03-26T19:03:55.797
> 
> 标签：ios, google-maps

我的问题与此非常相似[，除了 MKMapView。](https://stackoverflow.com/questions/1336370/positioning-mkmapview-to-show-multiple-annotations-at-once) 如何使用 Google 地图执行相同的过程（调整地图大小以同时适应屏幕上的所有注释/标记）？据我了解，我必须将 MKCoordinateRegion 转换为 GMSProjection，我的方法对吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-19T07:20:49.700

这很简单，只需：

```
@property (nonatomic, strong) GMSMapView *mapView;

- (void)didTapFitBoundsWithMarkers:(NSArray *)markers
{
GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] init];;

for (GMSMarker *marker in markers) {
    bounds = [bounds includingCoordinate:marker.position];
}

GMSCameraUpdate *update = [GMSCameraUpdate fitBounds:bounds];
[self.mapView moveCamera:update];
[self.mapView animateToViewingAngle:50];
} 
```

# jquery - JSON/JQuery .getJSON() 在 IE8/IE9 中不起作用

> ID：15645324
> 
> 赞同：4
> 
> 时间：2013-03-26T19:04:13.240
> 
> 标签：jquery, json

我不知道是由于**JSON**还是**JQuery .getJSON()**但此代码在**IE8/IE9****中不起作用**。

 **我正在尝试从*foursquare*获取一些数据并显示它。

它在 Chrome、Firefox、Safari、Opera 和 IE10 中正常工作。

**JS**

```
$(document).ready(function){

    var url = "https://api.foursquare.com/v2/venues/4dab1ba55da3ba8a479999b2?oauth_token=ZKLARA2MZVA4VXES3VTMP2XJOVXE1X3OBJMBXMDFAB1NR0V4&v=20130305";

    $.getJSON(url, function(response){

        do{
            var countNum = (response.response.venue.tips.count)-1;
            var randomGroupNum = Math.floor((Math.random()*countNum)+0);
        }while(typeof(response.response.venue.tips.groups[randomGroupNum])==="undefined");

        var countItemNum = response.response.venue.tips.groups[randomGroupNum].count;
        var randomItemNum = Math.floor((Math.random()*countItemNum)+0); 

        var mayorName = response.response.venue.mayor.user.firstName;
        var mayorSurname = response.response.venue.mayor.user.lastName;
        var mayorCount = response.response.venue.mayor.count;
        var mayorPic = "https://is1.4sqi.net/userpix_thumbs"+response.response.venue.mayor.user.photo.suffix;

        var text = response.response.venue.tips.groups[randomGroupNum].items[randomItemNum].text;
        var time = new Date((response.response.venue.tips.groups[randomGroupNum].items[randomItemNum].createdAt)*1000);

        var userName = response.response.venue.tips.groups[randomGroupNum].items[randomItemNum].user.firstName;
        var userSurname = response.response.venue.tips.groups[randomGroupNum].items[randomItemNum].user.lastName;
        var userPic ="https://is1.4sqi.net/userpix_thumbs"+response.response.venue.tips.groups[randomGroupNum].items[randomItemNum].user.photo.suffix;    

        $("#mayor_img").attr("src", mayorPic);
        $("#mayor_name").append("<span style='font-weight:bold;'>"+mayorName+" "+mayorSurname+"</span>");
        $("#mayor_check_in").append("<span>"+mayorCount+" check-ins in last 60 days</span>");

        $("#last_tip_img").attr("src", userPic);
        $("#last_tip_name").append("<span style='font-weight:bold;'>"+userName+" "+userSurname+"</span>");
        $("#last_tip_comment").append("<span>"+text+"</span>");
    });
}); 
```

[这是我的 JS 和 HTML 的小提琴](http://jsfiddle.net/PhYUq/)。

这是由于 IE8/IE9 还是其他原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T09:43:48.980

如果您使用 JSONP 而不是 JSON，它可以在 IE9 中使用。只需添加`&callback=?`到您的foursquare URL 的末尾，他们的API 就会提供JSONP：

```
var url = "https://api.foursquare.com/v2/venues/4dab1ba55da3ba8a479999b2?oauth_token=ZKLARA2MZVA4VXES3VTMP2XJOVXE1X3OBJMBXMDFAB1NR0V4&v=20130305&callback=?"; 
```

[更新的小提琴](http://jsfiddle.net/PhYUq/1/)

我无法在 IE8 中加载小提琴，但这可能只是 JSFiddle 的一个问题，因为您发现此修复程序在您的真实页面中确实有效。

这是发生的事情：您的`$.ajax()`呼叫正在发出[跨域 XMLHttpRequest](https://www.google.com/search?q=cross-domain+XMLHttpRequest)，传统上浏览器根本不允许这样做。[JSONP](https://www.google.com/search?q=jsonp)是一种解决方法，通过将 JSON 数据封装在使用`<script>`标签而不是`XMLHttpRequest`. 使用 JSONP 时查看foursquare 返回的数据可以看到这个函数调用。由于`<script>`可以从任何域加载标签，这超越了跨域限制。

不过 JSONP 也有一些缺点：

1.  您调用的 Web 服务需要支持它。这个可以，但不是所有的都可以。

2.  存在安全风险：如果您调用的服务受到威胁，它可能会将恶意 JavaScript 注入您的页面。

最近，浏览器开始支持[跨域资源共享（CORS）](https://www.google.com/search?q=cors)。如果 Web 服务支持 CORS，那么您可以`XMLHttpRequest`通过 JavaScript 代码中的一些额外设置跨域使用。

jQuery`$.ajax()`为 IE10 和其他现代浏览器自动执行此操作，但IE8 和 IE9使用对象[支持 CORS 的方式不同。](https://www.google.com/search?q=ie9+cors)`XDomainRequest`jQuery 不支持这个对象。

这个[StackOverflow 问题](https://stackoverflow.com/questions/6947821/cross-origin-ajax-requests-dont-work-in-opera-and-ie9)有一些进一步的讨论以及指向[IE8/9 的 CORS 库](https://github.com/Malvolio/ie.xhr)的链接，可用于为这些浏览器向 jQuery 添加 CORS 功能。我自己没有测试过，但如果您想使用 CORS，它可能是 JSONP 的替代品。

我在使用此库的说明中注意到的一件事是，它似乎会尝试`XDomainRequest`在 IE10 和更高版本中使用不需要的地方，以及在 IE8/9 中需要它的地方。这可能没问题，或者您可能想要添加版本检查或仅在旧版本中使用它的东西。**

# php - pyroCMS 和 codeigniter 附加组件

> ID：15645326
> 
> 赞同：0
> 
> 时间：2013-03-26T19:04:17.097
> 
> 标签：php, codeigniter, frameworks, pyrocms

问候我只会问一个非常简单的问题。我对 PyroCMS 很陌生，我想知道是否可以使用在 Codeigniter 中为 PyroCMS 创建的相同模块、附加组件、小部件和插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:39:21.703

基本上是的，但是你应该在你的类中做一些改变，例如你扩展`public_controller`Pyrocms 模块。看看 pyrocms 文档：[http ://docs.pyrocms.com/2.2/manual/developers](http://docs.pyrocms.com/2.2/manual/developers)

# java - 工厂方法返回给定接口的实现

> ID：15645327
> 
> 赞同：1
> 
> 时间：2013-03-26T19:04:18.390
> 
> 标签：java, generics

考虑代码：

```
/**
 * For a given interface, return a default implementation
 */
public class ImplementationFactory<T>
{
  public static void main(String[] args)
  {
    AddressBookUI ui = ImplementationFactory.getImpl(AddressBookUI.class);
  }

  public static <T extends BasicUI> T getImpl(Class<T> uiClass)
  {
    if (uiClass.equals(AddressBookUI.class))
    {
      /*
       * Compile error if cast is removed.
       * Casting to T leaves an unchecked cast warning.
       */
      return (T) new AddressBookFrame();
    }

    // a bunch more else-if checks would be here

    return null;
  }
}

// These are defined elsewhere:
interface BasicUI {}
interface AddressBookUI extends BasicUI {}
interface StockQuoteUI extends BasicUI {}

class AddressBookFrame implements AddressBookUI {}
class StockQuoteFrame implements StockQuoteUI {} 
```

为什么首先需要 getImpl() 中的演员表？有没有更好的方法来解决这个问题？

此外，我没有在 getImpl() 中进行链式 if-else 检查，而是尝试将 Map 创建为：

```
private static Map<Class<? extends BasicUI>, Class<? extends BasicUI>> map; 
```

然后我会在地图上的值上调用 newInstance() ，但问题是：

*   还是得投
*   如果我将错误的实现放入映射中，则没有类型安全。

理想情况下，地图将是

*   key = 一些 BasicUI 界面
*   value = 该键的某个类实现

但我不知道该怎么做。

**编辑：**在代码中添加了 BasicUI 的另一个实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:09:56.547

强制转换是必需的，因为在编译时，无法判断 an`AddressBookFrame`是`T`.

为避免出现警告，请在运行时检查类型：

```
return uiClass.cast(new AddressBookFrame()); 
```

这样做，您的地图实现将工作并且将是类型安全的。

# asp.net - Request.ServerVariables("LOGON_USER") VS2010 和 VS2012

> ID：15645329
> 
> 赞同：2
> 
> 时间：2013-03-26T19:04:25.393
> 
> 标签：asp.net, vb.net, visual-studio-2010, visual-studio-2012, request.servervariables

我遇到了一件对我来说很奇特的事情。我开始在 Visual Studio 2010 中开发一个网站，并于 2012 年完成。它是 VB.NET，框架 4.0。在整个网站中，我都使用 Request.ServerVariables("LOGON_USER")。一切正常。

我最近开始从一开始就使用 2012 开发另一个网站。发生的事情是 Request.ServerVariables("LOGON_USER") 不返回任何值！它简直是空的！但是，如果我用 Visual Studio 2010 打开同一个应用程序，它就可以工作！

谁能解释这里发生了什么以及如何在 VS2012 中修复它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:14:00.333

出现此问题的原因是如果您使用匿名访问安全来访问 .aspx 页，则不会填充 ServerVariables 集合中与身份验证相关的变量。如果您在 Web.config 文件的部分中授予匿名用户访问权限，也会出现此问题。

要在使用除无以外的任何身份验证模式时填充 LOGON_USER 变量，您可以在 web.config 部分中拒绝匿名用户的访问。

只需将 Web.config 文件中的身份验证模式更改为 None 以外的任何内容。例如，Web.config 文件中的以下条目将身份验证模式设置为基于表单的身份验证：

> ```
> <authentication mode="Forms" />
> 
> <!-- To deny access to the Anonymous user in the Web.config file, use the following syntax: --!>
> 
> <authorization>
>    <deny users = "?" /> <!-- This denies access to the Anonymous/unregistered user -->
>    <allow users ="*" /> <!-- This allows access to all registered users -->
> </authorization> 
> ```

我不知道为什么这在 VS 2010 和 2012 之间会有所不同，但我以前也遇到过这种情况，我使用上述步骤进行了补救。正如我所说，只需检查您的 web.config 文件！

希望这能回答你的问题！

# networking - p2p通信中的验证

> ID：15645330
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:04:25.737
> 
> 标签：networking, encryption, hash, p2p

假设在我的用户“网络”中，每个节点只能创建一个散列代码（使用节点的 id 生成）。

现在，节点 A 将这个散列码发送给节点 B。节点 A 不再是所有者，但 B 是。仍然，它只是一个字符串，所以节点 A 决定欺骗系统并向节点 C 发送相同的代码。节点 C 怎么知道 A 进行了非法操作？

C 只能通过与节点 A 通信来验证操作吗？（没有服务器或与其他节点通信）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:28:05.423

我认为你的问题是：

> 如何防止 p2p 覆盖网络中的节点 ID 被盗/伪造？

答案是：

通过使用公钥加密。

# graphics - 我应该通过改变对象坐标来实现矩阵变换吗？

> ID：15645337
> 
> 赞同：2
> 
> 时间：2013-03-26T19:04:44.643
> 
> 标签：graphics, transformation, linear-algebra, matrix-multiplication

我有一组可以缩放和翻译的对象。假设用户选择一个对象并拖动到某个位置。我正在考虑以两种不同的方式实现这一点：要么改变给定鼠标位置的对象坐标，要么改变变换矩阵。这些实现中的一种是否比另一种更好？我的主要问题是：

*   表现
*   代码组织
*   可扩展性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:10:46.240

物体有一定的坐标，你看物体的方式有一定的参照系。我认为最好不要弄乱您的坐标，而只需将带您从“对象在这里”的矩阵更改为“我在此处绘制对象”。它更干净。性能方面，您必须对正在渲染的每个对象应用转换，因此您不妨只做一次。从。代码组织观点最好保持“与物理相关的事物”；从可扩展性的角度来看，每次用户更改视图时都不对所有对象应用转换显然是更可取的——你只在渲染对象时才对对象应用转换，所以如果你跟不上，就跳过一步；如果你没有 在每个步骤中重新调整某些对象的比例，您很快就会遇到麻烦。最后，对同一个对象应用多个转换往往会累积错误。

良心之流，但我认为有明确的偏好！

# java - 如何创建嵌入式 WebSocket 服务器 Jetty 9？

> ID：15645341
> 
> 赞同：37
> 
> 时间：2013-03-26T19:05:23.610
> 
> 标签：java, websocket, jetty, embedded-jetty

我讨厌问这样一个模糊的问题，但我很难找到一个简单的例子。这是我到目前为止所拥有的：

```
public class JettyWebSocketServlet extends WebSocketServlet{
    @Override
    public void configure(WebSocketServletFactory factory) {
        factory.register(MyEchoSocket.class);
    }
}

@WebSocket
public class MyEchoSocket {
    @OnWebSocketMessage
    public void onText(WebSocketConnection conn, String message) {
        System.out.println("text: " + message);
        try {
            conn.write(null, new FutureCallback(), "got: " + message);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我可以找到的嵌入式 Jetty 示例总是显示如下内容，以启动服务器实例运行，但我不知道如何实例化我的 WebSocketServlet。

```
 Server server = new Server(8080);
        server.start();
        server.join(); 
```

如何创建可以处理 WebSocket 连接请求的嵌入式服务器？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-26T19:20:59.713

**更新：2013 年 12 月 2 日**

有关带有 WebSocket 的嵌入式 Jetty 的最新示例，请参阅：

[https://github.com/jetty-project/embedded-jetty-websocket-examples](https://github.com/jetty-project/embedded-jetty-websocket-examples)

**原始答案**

在测试用例中有一个例子。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/示例/echo/ExampleEchoServer.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/websocket-server/src/test/java/org/eclipse/jetty/websocket/server/examples/echo/ExampleEchoServer.java)

简短的回答：

```
Server server = new Server(8080);
WebSocketHandler wsHandler = new WebSocketHandler()
    {
        @Override
        public void configure(WebSocketServletFactory factory)
        {
            factory.register(MyEchoSocket.class);
        }
    };
server.addHandler(wsHandler);
server.start();
server.join(); 
```

这将创建一个简单的服务器来处理 1 个上下文，即根上下文。

```
http://localhost:8080/ 
```

如果要将 WebSocketHandler 绑定到另一个上下文，请将其包装在 ContextHandler 中。

```
Server server = new Server(8080);
WebSocketHandler wsHandler = new WebSocketHandler()
    {
        @Override
        public void configure(WebSocketServletFactory factory)
        {
            factory.register(MyEchoSocket.class);
        }
    };
ContextHandler context = new ContextHandler();
context.setContextPath("/echo");
context.setHandler(wsHandler);
server.addHandler(context);
server.start();
server.join(); 
```

这会将您的 websocket 绑定到

```
http://localhost:8080/echo/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-02T22:23:03.473

这是servlet方法：

1）在这种情况下，不需要使用这段代码（这是容器的责任）：

```
Server server = new Server(8080);
                server.start();
                server.join(); 
```

2) 为 servlet 创建 web.xml 描述符：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>WebSocket application</display-name>
    <servlet>
        <servlet-name>servlet</servlet-name>
        <servlet-class>com.example.websocket.JettyWebSocketServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>servlet</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>
</web-app> 
```

现在，当你编写 JS 时：

```
var ws = new WebSocket("ws://localhost:8080/hello");
ws.send("text"); 
```

使用 MyEchoSocket 的 onText 方法处理消息

这是更多了解 servlet 的教程，[教程](http://www.tutorialspoint.com/servlets/servlets-quick-guide.htm "教程")

祝你好运。

# jquery - 将鼠标悬停在 div 上时正在绘制一个圆圈

> ID：15645342
> 
> 赞同：2
> 
> 时间：2013-03-26T19:05:23.897
> 
> 标签：jquery, css, hover, geometry

我一直在寻找这个问题，我找到了一些答案，但这并不是我真正需要的。

我对 jquery 并没有真正的经验，但我已经做了悬停功能！当我将鼠标悬停在 div 上时，它会调整大小。我想为这个效果添加的是：在同一个悬停时，会在图像周围画一个圆圈。

我已经看到人们添加框半径的答案。但我正在寻找的是您实际上看到了正在绘制的圆圈。0:49 秒的示例（有点随机，但此视频显示了我需要的效果）：

[http://www.youtube.com/watch?feature=player_detailpage&v=jCdNnaTzItM#t=45s](http://www.youtube.com/watch?feature=player_detailpage&v=jCdNnaTzItM#t=45s)

我希望这是可能的！

我的代码：

```
$('li#balk1').hover(
    function(){ $(".ad").css('transform', 'scale(1.2)'); },
    function(){ $(".ad").css('transform', 'scale(1)'); } 
); 
```

“.ad”周围应该有一个圆圈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:41:42.920

好吧，事实证明你可以做到这一点，我已经提出了一个修改[这个解决方案的](http://heygrady.com/blog/2011/07/20/animating-with-curves-in-jquery/)[小提琴](http://jsfiddle.net/j5tHC/281/)。我相信它依赖于和插件的使用，在第二个链接中有更详细的解释。`tween``curve`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T07:27:29.233

签出这个[Codepen（链接）](http://codepen.io/dcdev/pen/upjDy)或者它也可以作为一个[要点（链接）](https://gist.github.com/dcondrey/d9995b8f12e23063f17c)

使用 SVG 笔触属性，我们为使用 rand 计算的不完美贝塞尔曲线生成的 SVG 线设置动画。我认为这应该非常接近您正在寻找的内容。

*jQuery 和 D3 依赖项*

```
<style>
path.ln {
    stroke-width: 2px;
    stroke: #999;
    fill: none;
    vector-effect: non-scaling-stroke;
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    -webkit-animation: dash 4s cubic-bezier(0.45,0.3,0.35,0.3);
    -moz-animation:dash 4s cubic-bezier(0.45,0.3,0.35,0.3);
    -o-animation:dash 4s cubic-bezier(0.45,0.3,0.35,0.3);
    animation:dash 4s cubic-bezier(0.45,0.3,0.35,0.3);
}

@keyframes dash {
    to { stroke-dashoffset: 0; }
}
</style>

<script>
function path(min_rad_delta,max_rad_delta, el_min, el_max, el_min_delta,el_max_delta) {
    var d = Math.sqrt( 0.5 * 0.5 + 1 * 1 ), r = 1; //returns the square root of a number
    var el = (el_min + Math.random() * (el_max - el_min)) * Math.PI / 180;
    var path = 'M' + [r * Math.sin(el), r * Math.cos(el)] + ' C' + [d * r * Math.sin(el + Math.LN2), d * r * Math.cos(el + Math.LOG10E)];

    for (var i = 0; i < 4; i++) {
        el += Math.PI / 2 * (1 + el_min_delta + Math.random() * (el_max_delta - el_min_delta));
        r *= (1 + min_rad_delta + Math.random()*(max_rad_delta - min_rad_delta));
        path += ' ' + (i?'S':'') + [d * r * Math.sin(el - 0.45), d * r * Math.cos(el - 0.45)];
        path += ' ' + [r * Math.sin(el), r * Math.cos(el)];
    }
    return path;
}

function cX(lambda_min, lambda_max, el_min, el_max) {
    var el = (el_min + Math.random()*(el_max - el_min));
    return 'rotate(' + el + ') ' + 'scale(1, ' + (lambda_min + Math.random()*(lambda_max - lambda_min)) + ')'+ 'rotate(' + (-el) + ')';
}
</script>

<svg id="circle" width="50%" height="75%" viewBox='-1.5 -1.5 3 3'></svg>

<script>
d3.selectAll( 'svg' )
    .append( 'path' )
    .classed( 'ln', true)
    .attr( 'd', path(-0.1,0, 0,360, 0,0.2 ))
    .attr( 'transform', cX( 0.6, 0.8, 0, 360 ));
setTimeout(function() { location = '' } ,5000)
</script> 
```

# google-apps-script - 如何使用日历的时区设置日期对象的时区

> ID：15645343
> 
> 赞同：3
> 
> 时间：2013-03-26T19:05:24.063
> 
> 标签：google-apps-script

我想使用日历时区来设置日期对象的时区。我正在寻找合适的技术。我们在全国有几个基地，每个基地都有自己的日记和日常活动日历。我们有多个发布到日历的脚本。我想使用日历的时区来设置日期对象时区，因为用户四处旅行到不同的基地，他们的计算机可能没有设置到正确的时区。我们希望避免不正确的时间设置。

1.  脚本的时区是否应该设置为 UTC？

2.  这是我目前所在的位置：

    ```
    function submitUiTest(e) {
      var app = UiApp.getActiveApplication();
      var cal = CalendarApp.getCalendarById('calendarId');
      var timeZone = cal.getTimeZone();

      var ss = SpreadsheetApp.getActiveSpreadsheet();
      var sheet = ss.getSheetByName('Sheet1');

      var startTime = e.parameter.startDate
      startTime.setHours(e.parameter.startHour, e.parameter.startMin, 0)
      startTime = formatTime(startTime, timeZone);
      Logger.log(startTime)

      var endTime = e.parameter.endDate
      endTime.setHours(e.parameter.endHour, e.parameter.endMin, 0);
      endTime = formatTime(endTime, timeZone);
      Logger.log(endTime)

      cal.createEvent('TimeZone Test', new Date(startTime), new Date(endTime));

      ss.appendRow([startTime, endTime]);

      return app;
    }

    function formatTime(time, timeZone){
      return Utilities.formatDate(time, (timeZone-time.getTimezoneOffset()), 'M/d/yyyy HH:mm');
    } 
    ```

编辑：目前有 3 个日历，它们不是用户日历，每个日历都是为各个航空站创建的单独日历。每个航空站都位于不同的时区。当工作人员在这些站点工作时，他们会将日常活动发布到日历中，并且还有几个 Ui 脚本我们将其发布到相同的日历中。飞行日志。当日历条目发布到任何日历时，时间仅与脚本上设置的时区相关，与日历上的时区无关。创建日期或时间戳对象时，如何使用日历本身设置的时区。

记录不同时区日期的脚本的最佳做法是什么？将脚本时区设置为 UTC 并进行转换？你用什么来获取用户的时区，或者在这种情况下，我也不关心用户的时区设置了什么，我需要使用日历的时区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-29T03:06:47.567

这是答案的修改版本，没有 UI 内容：

```
function gasTimezoneOffset(date, hour){
  var cal,calTimeZone,calTz,date,dateString,scriptTimeZone,sessionTz;

  var testMonth = "March",
      testDayOfMnth = "26",
      testYr = "2016",
      hour = "10:00",
      timeZoneDiff = 0;

  Logger.log("Script Time Zone: " + Session.getScriptTimeZone());

  dateString = testMonth + " " + testDayOfMnth + ", " + testYr;
  Logger.log("dateString: " + dateString);

  date = new Date(dateString);

  cal = CalendarApp.getDefaultCalendar();
  calTimeZone = cal.getTimeZone();

  calTimeZone = Utilities.formatDate(date, calTimeZone, 'Z');
  scriptTimeZone = Utilities.formatDate(date, Session.getTimeZone(), 'Z');

  calTz = Number(calTimeZone.slice(0,3));
  sessionTz = Number(scriptTimeZone.slice(0,3));

  //If both time zones are the same sign, get the difference between the
  //two.  E.g. -4 and -2\.  Difference is 2
  //if each time zone is a different sign, add the absolute values together.
  //-4 and +1 should be 5
  if (calTz < 0 && sessionTz > 0 || calTz > 0 && sessionTz < 0){
    timeZoneDiff = Math.abs(Math.abs(calTz) + Math.abs(sessionTz));
  } else {
    timeZoneDiff = Math.abs(Math.abs(calTz) - Math.abs(sessionTz));
  };

  hour = Number(hour.slice(0,2));    
  return hour + timeZoneDiff;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T02:14:02.527

好的，这是解决问题的方法。我可能已经走出了自己的路，或者错过了一些简单的事情，但这最终像我希望的那样工作。随意批评。为了简单起见，我将 webapp 时区设置为 GMT-0000。

```
function uiTest() {
  var app = UiApp.createApplication();

  var startDate = app.createDateBox().setName('startDate').setId('startDate').setWidth('75');
  var startHour = app.createListBox().setName('startHour').setId('startHour').setWidth('45');
  var startMin = app.createListBox().setName('startMin').setId('startMin').setWidth('45');

  var endDate = app.createDateBox().setName('endDate').setId('endDate').setWidth('75');
  var endHour = app.createListBox().setName('endHour').setId('endHour').setWidth('45');
  var endMin = app.createListBox().setName('endMin').setId('endMin').setWidth('45');

  for (h=0;h<24;++h){
  if(h<10){
    var hourstr='0'+h
  }else{
    var hourstr=h.toString()
    }
  startHour.addItem(hourstr)
  endHour.addItem(hourstr)
  }
  for (m=0;m<60;++m){
  if(m<10){
    var minstr='0'+m
  }else{
    var minstr=m.toString()
    }
  startMin.addItem(minstr)
  endMin.addItem(minstr)
  }

  var grid = app.createFlexTable().setId('grid');
  app.add(grid);

  grid.setWidget(0, 0, app.createLabel('Start Date'));
  grid.setWidget(1, 0, startDate);

  grid.setWidget(0, 1, app.createLabel('Hour'));
  grid.setWidget(1, 1, startHour);

  grid.setWidget(0, 2, app.createLabel('Min'));
  grid.setWidget(1, 2, startMin);

  grid.setWidget(2, 0, app.createLabel('End Date'));
  grid.setWidget(3, 0, endDate);

  grid.setWidget(2, 1, app.createLabel('Hour'));
  grid.setWidget(3, 1, endHour);

  grid.setWidget(2, 2, app.createLabel('Min'));
  grid.setWidget(3, 2, endMin);

  app.add(app.createButton('Submit', app.createServerHandler('submitUiTest').addCallbackElement(grid)));

  SpreadsheetApp.getActiveSpreadsheet().show(app);  
}

function submitUiTest(e) {
  var app = UiApp.getActiveApplication();
  var cal = CalendarApp.getCalendarById('');//Info Sys Calendar set to Central Time
  //var cal = CalendarApp.getCalendarById('');//Fort Bliss (Mountain Time)
  var calTimeZone = cal.getTimeZone();

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName('Sheet1');

  var startTime = e.parameter.startDate
  startTime.setHours(gasTimezoneOffset(startTime, e.parameter.startHour, calTimeZone), e.parameter.startMin, 0);
  Logger.log('startTime: '+Utilities.formatDate(startTime, calTimeZone, 'M/d/yyyy HH:mm z'));

  var endTime = e.parameter.endDate
  endTime.setHours(gasTimezoneOffset(endTime, e.parameter.endHour, calTimeZone), e.parameter.endMin, 0);
  Logger.log('endTime: '+endTime)

  var timeStamp = Utilities.formatDate(startTime, calTimeZone, 'M/d/yyyy HH:mm z');

  cal.createEvent(timeStamp, new Date(startTime), new Date(endTime));

  ss.appendRow([startTime, endTime]);

  return app;
}

function gasTimezoneOffset(date, hour, calTimeZone){
  var calTz = new Number(Utilities.formatDate(date, calTimeZone, 'Z').substr(1,2));
  var sessionTz = new Number(Utilities.formatDate(date, Session.getTimeZone(), 'Z').substr(1,2));

  switch (Utilities.formatDate(date, calTimeZone, 'Z').substring(0,1)){
    case '+':
      var timeZoneOffset = sessionTz - calTz;
      break;
    case '-':
      var timeZoneOffset = sessionTz + calTz;
      break;
  }

  hour = new Number(hour);

  return hour + timeZoneOffset;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:41:32.483

**编辑：**我编写了一个小型测试 UI，并在 2 个不同时区使用 2 个日历运行它。日历事件在日历时区创建，用户界面显示用户值。Google 会处理两个日历中的时区设置，我没有注意到任何异常情况：按照我的意愿创建的事件，即在日历时区的 UI 中显示的时间。

（屏幕截图）

![在此处输入图像描述](../Images/f79807d8db9e647c15209c3be0992391.png)

这是我用于测试的代码：

```
var tz = [['test_agenda(pacific Time)','test_agenda'],['testencodage(Belgium time)','testencodage']]

function doGet() {
  var app = UiApp.createApplication().setStyleAttribute('padding','15PX');
  var hpanel = app.createHorizontalPanel();
  var dateBox = app.createDateBox().setId('dateBox').setName('dateBox');
  var hour = app.createListBox(false).setId('hour').setName('hour')
  for(h=0;h<25;++h){
    if(h/2==parseInt(h/2)){hour.addItem(parseInt(h/2)+':00')
                         }else{
                          hour.addItem(parseInt(h/2)+':30')
                         }
  }
  var amPm = app.createListBox(false).setId('am').setName('amPm')
  .addItem('AM').addItem('PM');
  var dateTimeLabel = app.createLabel('',false).setId('dateTimeLabel');
  var submit = app.createButton('Submit').setId('submit');
  var tzList = app.createListBox().setName('tzList');
    for(var c in tz){tzList.addItem(tz[c][0],tz[c][1])}
  var handler1 = app.createClientHandler().validateMatches(dateBox, '2','g').forEventSource().setEnabled(false);
  var handler2 = app.createServerHandler('createE').validateMatches(dateBox, '2','g').addCallbackElement(hpanel).addCallbackElement(tzList);
  submit.addClickHandler(handler1).addClickHandler(handler2);
  hpanel.add(dateBox).add(hour).add(amPm)
  app.add(hpanel);
  app.add(tzList).add(submit);
  app.add(dateTimeLabel);
  return app;
}

function createE(e) {
  var app = UiApp.getActiveApplication();
  var date = e.parameter.dateBox;
  var cal = CalendarApp.getCalendarsByName(e.parameter.tzList)[0]
  var timeZone = cal.getTimeZone();
  var sessionTz = Session.getTimeZone()
  Logger.log(sessionTz)
  Logger.log(timeZone)
  var hour = Number(e.parameter.hour.split(':')[0]);  
  var min = Number(e.parameter.hour.split(':')[1]);
  var amPm = e.parameter.amPm;
  if (amPm == 'PM' ){hour = hour+12};  // ADD 12 HOURS TO PM HOURS, EXCEPT 12PM
  if (hour == 24){hour = 0;amPm='AM'};  // HANDLE 12AM HOUR CORRECTLY
  var newDate=new Date(date)
  newDate.setHours(hour,min,0,0)
  Logger.log('start : '+newDate)
  var newDateString = Utilities.formatDate(newDate, sessionTz, 'MM/dd/yyyy hh:mm aaa');
  app.getElementById('dateTimeLabel').setText('tz = '+timeZone+' - '+newDateString);
  Logger.log('end : '+new Date(newDate.getTime()+3600000))
  cal.createEvent('test Event in TZ '+timeZone, newDate, new Date(newDate.getTime()+3600000))

  app.getElementById('submit').setEnabled(true);
  return app;
} 
```

第一条评论：

*我开始写评论来问你一些问题，但它太长了......所以请将此视为评论，而不是答案;-)。我不确定我是否理解您所说的“他们的计算机未设置为正确的时区”，如果他们使用 Google 日历，他们计算机的时区无关紧要，这只是 Google Cal 中的参数问题。如果我理解您的目标是，如果脚本在上午 8:00 设置约会，无论他们身在何处，他们都会在上午 8:00 看到它显示在他们的日历中（在他们的“本地”时区上午 8:00），对吧？
总而言之，您是从一个地方运行此脚本并在他们自己的日历中为其他时区的人们创建事件？用户是否跨越不同的时区？这些是 2 个独立的问题，并且没有一个单一的解决方案。如果单个用户跨时区移动，则所有事件都将被转移，除非他不更改他的 GCal 参数。但是如果他这样做了，他将不会在正确的时间收到通知，并且日历界面将超时......所以这不是一个合理的解决方案。我的最后一个问题：当您在另一个日历（另一个 tz）中创建一个事件时，它可以是您和这个人之间的约会吗？换句话说，对于您的用例来说，绝对时间是否重要？*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-09T17:49:31.400

这是我最终用来创建一个函数的 Sandy 代码版本，该函数接受 Calendar 对象和“脚本时间”并返回“日历时间”：

```
/**
 * Given a script date object, return the time in the user's calendar
 *
 * Sandy Good's answer to this SO question:
 *
 *   http://stackoverflow.com/questions/15645343/how-to-use-timezone-of-calendar-to-set-timezone-for-date-object
 *
 * @param {Date} scriptDateTime
 * @param {Calendar} calendar
 *
 * @return {Date} calendarDateTime
 */

function getCalendarDateTime (scriptDateTime, calendar) {

  Logger.log('scriptDateTime: ' + scriptDateTime)

  var calendarTimeZoneString = calendar.getTimeZone() 
  var calendarTimeZone = Utilities.formatDate(scriptDateTime, calendarTimeZoneString, 'Z')
  var calendarTz = Number(calendarTimeZone.slice(0,3)) 
  Logger.log('calendarTimeZone: %s (%s)', calendarTimeZoneString, calendarTz)

  var scriptTimeZoneString = Session.getScriptTimeZone()
  var scriptTimeZone = Utilities.formatDate(scriptDateTime, scriptTimeZoneString, 'Z')
  var sessionTz = Number(scriptTimeZone.slice(0,3))
  Logger.log('scriptTimeZone: %s (%s)', scriptTimeZoneString, sessionTz)

  // If both time zones are the same sign, get the difference between the
  // two.  E.g. -4 and -2\.  Difference is 2
  // 
  // If each time zone is a different sign, add the absolute values together.
  // -4 and +1 should be 5

  var timeZoneDiff

  if (calendarTz < 0 && sessionTz > 0 || calendarTz > 0 && sessionTz < 0) {

    timeZoneDiff = Math.abs(Math.abs(calendarTz) + Math.abs(sessionTz))

  } else {

    timeZoneDiff = Math.abs(Math.abs(calendarTz) - Math.abs(sessionTz)) 
  }

  Logger.log('timeZoneDiff: ' + timeZoneDiff)

  var scriptHour = scriptDateTime.getHours()
  var calendarHour = scriptHour + timeZoneDiff

  var calendarDateTime = new Date(
    scriptDateTime.getYear(), 
    scriptDateTime.getMonth(),
    scriptDateTime.getDate(),
    calendarHour,
    scriptDateTime.getMinutes())

  Logger.log('calendarDateTime: ' + calendarDateTime)

  return calendarDateTime  
}

// Script is PST (GMT-8) and calendar is GMT

function test_getCalendarDateTime() {
  var calendar = CalendarApp.getDefaultCalendar()
  var scriptDateTime = new Date(2017, 0, 30, 12, 0) // 2017-01-30 12:00 PST
  var calendarDateTime = getCalendarDateTime(scriptDateTime, calendar) // 2017-01-30 20:00 PST
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T02:38:19.127

可以尝试为每个时区部署单独的 Web 应用程序。设置每个应用程序的时区以匹配它们链接到的唯一日历的时区。由于您在不同时区只有 3 个日历，因此它似乎适合您的情况。

# qt - QT - 覆盖 QToolButton 绘制事件

> ID：15645344
> 
> 赞同：0
> 
> 时间：2013-03-26T19:05:28.613
> 
> 标签：qt

我有自己的小部件 MyToolButton，它继承自`QToolButton`. 在 paintEvent 中，我只想从 original 中绘制“背景” `QToolButton`。我的意思是，我只需要绘制样式（单击、悬停等），但没有文本和图像。我想自己绘制这些东西（使用自定义格式等）。当我打电话时`QToolButton::paintEvent(ev)`，一切都画好了。如何从绘画中排除图像和文字？我想我应该使用`drawControl()`，`drawPrimitive()`但`drawComplexControl()`无法理解所有这些状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:55:56.447

源代码`void QToolButton::paintEvent(QPaintEvent *)`为：

```
QStylePainter p(this);
QStyleOptionToolButton opt;
initStyleOption(&opt);
p.drawComplexControl(QStyle::CC_ToolButton, opt); 
```

`QStylePainter::drawComplexControl`calls `QStyle::drawComplexControl`，这是一个纯虚函数，它的实现取决于你正在使用的风格。您需要找到具体实现的源代码（如`QWindowsXPStyle`or `QGtkStyle`），找到`drawComplexControl()`实现并在您的`paintEvent`. 对于像 一样的简单控件`QPushButton`，您可以轻松地独立于样式重写其绘图。重绘`QToolButton`将是一个更棘手的任务。一个不错的选择是使用`QCommonStyle`.

# python - 使用 python 阅读特定行并忽略其他行

> ID：15645345
> 
> 赞同：1
> 
> 时间：2013-03-26T19:05:32.453
> 
> 标签：python, python-2.7

我有一个这样的文本文件：

```
input file
yuorvsdsd
dfdsfsd
?dsfsdfsd
sdfsdfs
?dfd
ds 
```

我正在尝试使其仅读取以 . 开头的行`?`。该`readlines`函数读取所有行，因此我对其设置了条件，但我对它不满意，因为它没有向我显示准确的结果。我想`output`成为：

```
?dsfsdfsd
?dfd 
```

程序

```
fp = open("file.txt")
z = fp.readlines
if z=='?':
    print z
fp.close() 
```

这是我尝试过的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:09:18.847

我会使用以下内容：

```
with open("file.txt") as fp:
    for line in fp:
        if line.startswith('?'):
            print line 
```

通过使用上下文管理器 ( `with ... as`)，文件的关闭将在您完成后自动发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:22:50.653

我想我会使用生成器表达式：

```
(line for line in open('file.txt') if line.startswith('?')) 
```

一个完整的程序如下所示：

```
lines = (line for line in open('file.txt') if line.startswith('?'))
print ''.join(lines) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T19:11:12.700

列表推导使这变得简单：

```
filtered = [line for line in fp.readlines() if line.startswith("?")] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:09:26.037

这不起作用吗？

```
with open("file.txt") as fin:
    for line in fin:
        if not line.startswith('>'):
            print line 
```

或者，你能不能`grep`先把它通过管道？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T19:14:29.753

或者，您可以使用`line[0]`获取每行的第一个字符。

```
with open("file.txt") as fp:
    for line in fp:
        if line[0] == '?':
            print line 
```

这是可能的，因为 Python 中的 String 可以被索引。Python 的 String 和 C 一样，以 index 开头`0`。`line[0]`将在索引 0 处为您提供一个字符，这是第一个字符。

# c - fuse：如何在写入之前获取要写入的文件的大小？

> ID：15645346
> 
> 赞同：1
> 
> 时间：2013-03-26T19:05:39.460
> 
> 标签：c, fuse

写入文件时，会为每个文件段调用与in`write`对应的函数。`.write``fuse_operations`

这意味着对于较大的文件（例如 12720 字节），写入函数可以调用 4 次

```
1\. size=4096, offset=0
2\. size=4096, offset=4096
3\. size=4096, offset=8192
4\. size=432, offset=12288 
```

因为它有 4 个段，最大段大小为 4096 字节。

在`write`函数内部，我想确定最后一个段大小何时为`write`n。我打算将所有段放入缓冲区，并使用最后写入的段来表示缓冲区现在包含整个对象，以便可以将其放在其他地方（例如对象存储）。通过在写入之前知道正在写入的对象的大小，我可以做一个简单的相等性测试`file_size == size + offset`来确定最后一段被写入的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:11:26.757

显然，我不能。文件处理程序关闭后，我只能将整个对象放在其他地方（例如对象存储）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-24T19:15:29.540

如果你的块的长度小于 4096，你就知道你在文件的末尾。继续写出缓冲区的内容！

# jquery - jQuery $(window).resize 不在 jQuery 插件中触发

> ID：15645347
> 
> 赞同：0
> 
> 时间：2013-03-26T19:05:42.820
> 
> 标签：jquery

我创建了一个自定义 jQuery 插件，但在插件中触发窗口调整大小功能时遇到问题。将其分解为我得到的基础知识，无法弄清楚为什么它没有触发：

```
;(function ( $, window, document, undefined ) {
  $.fn.test = function(options) {
    $(window).resize(function() {
      alert('sdsd');
    });
  };
})(jQuery);

$(function() {
  $('.element').test();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:07:00.983

在您的情况下`window`是未定义的，因为您没有将其传递给函数。

```
;(function ( $, window, document, undefined ) {
  $.fn.test = function(options) {
    $(window).resize(function() {
      alert('sdsd');
    });
  };
})(jQuery, window, document); //<--- changes here 
```

# excel - 如何将其他工作表中的单元格引用列表转换为超链接

> ID：15645349
> 
> 赞同：0
> 
> 时间：2013-03-26T19:05:51.673
> 
> 标签：excel, vba

我有一个摘要工作表，其中包含对同一工作簿中其他工作表的引用。参考是简单的公式（即=Sheet2！D23）。我想将这些转换为超链接。我希望超链接显示引用单元格的值。

我可以单独执行此操作，但电子表格很大，并且有数百个这样的参考。

有人可以建议一种更简单的方法将这些引用批量转换为超链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:40:14.833

选择包含您要链接的单元格的一系列单元格，然后运行此宏。
它只会链接驻留在不同工作表上的值，不会链接到当前工作表上的单元格。如果您想链接所有单元格，即使值来自同一张表，只需`If..End If`删除`rng.Hyperlinks.Add rng, "", Replace(rng.Formula, "=", "")`.

```
Sub makeLinks()
    Dim rng As Range
    For Each rng In Selection
        If rng.Formula Like "=*!*" Then
            rng.Hyperlinks.Add rng, "", Replace(rng.Formula, "=", "")
        End If
    Next rng
End Sub 
```

# java - Paypal 的重定向 URL 要求在已登录时登录

> ID：15645350
> 
> 赞同：0
> 
> 时间：2013-03-26T19:05:54.570
> 
> 标签：java, paypal, paypal-sandbox

结帐时，我们使用通过经典 Java SDK 发送的链式付款。然后它发回我们在构建重定向 url 时使用的 payKey。这在我们的沙盒环境中已经运行了 6 个月，它指向类似于“ [https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_ap-payment&paykey=AP-02Y91986YY463074B](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_ap-payment&paykey=AP-02Y91986YY463074B) ”的 URL。现在，当我的浏览器点击生成的链接时，它要求我登录，但我已经登录。我登录到 developer.paypal.com 和 x.com。

旁注：当我登录时，我看到我的测试帐户不再列出，所以我运行了页面上列出的导入器工具。

我想我的问题是：有没有其他人经历过“请登录以使用 PayPal 沙盒功能”。即使他们已经登录页面？如果是这样，您采取了哪些步骤使其识别出您已登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:10:30.647

虽然我不确定确切原因，但解决方案是清除我的整个浏览历史记录，包括 cookie。重新登录后，一切正常。

# c# - asp.net提交流程

> ID：15645351
> 
> 赞同：1
> 
> 时间：2013-03-26T19:05:59.507
> 
> 标签：c#, asp.net

我有一个带有 2 个标签的表单，用于初始化随机数和一个文本框，用于在添加两个随机数后检查答案是否正确。我遇到的问题是 SUBMIT 处理下一组随机数，因此结果总是不正确的。这是我到目前为止的代码。

```
namespace _2ndGradeMath
{

    public partial class Default : System.Web.UI.Page
    {
        Random random = new Random();

        protected void Page_Load(object sender, EventArgs e)
        {
            lblNum1.Text = random.Next(0, 10).ToString();
            lblNum3.Text = random.Next(0, 10).ToString();
            int num1 = int.Parse(lblNum1.Text);
            int num2 = int.Parse(lblNum3.Text);
            lblAnswer.Text = (num1 + num2).ToString();
            lblAnswer.Visible = false;
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            if (TextBox1.Text != lblAnswer.Text)
            {
                Button1.Attributes.Add("onClick", "javascript:alert('Incorrect');");
            }

            else if (TextBox1.Text == lblAnswer.Text)
            {
                Button1.Attributes.Add("onClick", "javascript:alert('Correct');");
            }

            TextBox1.Text = "";           
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:08:58.073

使用**[IsPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)**仅在页面初始加载时运行初始化代码：

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)    
   {
        lblNum1.Text = random.Next(0, 10).ToString();
        lblNum3.Text = random.Next(0, 10).ToString();
        int num1 = int.Parse(lblNum1.Text);
        int num2 = int.Parse(lblNum3.Text);
        lblAnswer.Text = (num1 + num2).ToString();
        lblAnswer.Visible = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:12:48.607

Here's the problem. You are loading *new* random numbers each time the page loads. That's what the Page_Load function does: it runs each time the page loads which includes every time the page is submitted. So when a user presses submit new random numbers are assigned, which makes his answer wrong. You need to assign random numbers in only two instances:

First, when the page loads for the first time. Which can be done by checking the property IsPostBackis false.

```
protected void Page_Load(object sender, EventArgs e)
{
      if(!IsPostBack){
            lblNum1.Text = random.Next(0, 10).ToString();
            lblNum3.Text = random.Next(0, 10).ToString();
      }
.
.
.
} 
```

Second, when the user answers correctly.

```
else if (TextBox1.Text == lblAnswer.Text)
{
        Button1.Attributes.Add("onClick", "javascript:alert('Correct');");
        lblNum1.Text = random.Next(0, 10).ToString();
        lblNum3.Text = random.Next(0, 10).ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:09:31.357

考虑将此代码添加到`PreRender`：

```
protected override void OnPreRender(EventArgs e)
{
    Session["Answer"] = lblAnswer.Text;
    base.OnPreRender(e);
} 
```

然后像这样`Click`抓住答案`Session`：

```
if (TextBox1.Text != Session["Answer"]) 
```

请记住**，我假设**您实际上*希望*在**每个**回帖中使用此答案生成新数字。

# sharepoint - Xstl 全局变量为 each 设置并在 foreach 之后使用

> ID：15645352
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:06:03.780
> 
> 标签：sharepoint, xslt

首先，我是 XSLT 的新手。我正在使用 Sharepoint 列表，如果特定季度有数据，我需要获取链接以显示。如果某个季度没有数据，我需要有一个这样的标签。

所以我所做的是我为给定年份的同一月份的每个数据创建了一个 foreach 循环。我知道我无法在 xslt 中重新分配一个变量，但我不知道如何做我想做的事。这是我的代码示例。由于我正在使用 Sharepoint，因此我无法访问 XML。：/

```
<xsl:variable name="DataQ1" select="'False'"/>
<xsl:variable name="DataQ2" select="'False'"/>
<xsl:variable name="DataQ3" select="'False'"/>
<xsl:variable name="DataQ4" select="'False'"/>
<xsl:for-each select="../Row[generate-id()=generate-id(key('MonthKey', substring(@Date,6,7))[substring('@Date',1,4) = $varYear)][1])]">
    <xsl:variable name="currentMonth" select="number(substring(@Date,6,7))"/>
    <xsl:choose>
        <xsl:when test="$currentMonth &gt;= 1 and $currentMonth $lt;=4">
            <!--set $DataQ1 to true-->
        </xsl:when>
        <xsl:when test="$currentMonth &gt;= 4 and $currentMonth $lt;=7">
            <!--set $DataQ2 to true-->
        </xsl:when>
        <xsl:when test="$currentMonth &gt;= 7 and $currentMonth $lt;=10">
            <!--set $DataQ3 to true-->
        </xsl:when>
        <xsl:otherwise>
            <!--set $DataQ4 to true-->
        </xsl:otherwise>
    </xsl:choose>
</xsl:for-each>
<div>
    <xsl:choose>
        <xsl:when test="$DataQ1= 'True'">
            <a>
                <xsl:attribute name="href">
                    <xsl:value-of select="www.example.come"/>
                </xsl:attribute>
                <xsl:value-of select="'LinkToDataofQ1'"/>
            </a>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="'There's no data for this quarter.'"/>
        </xsl:otherwise>
    </xsl:choose>   
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:47:04.667

您在示例代码中使用了该`key`函数，但没有发布密钥声明。但我认为您可以使用以下代码实现您想要的：

```
<div>
    <xsl:choose>
        <xsl:when test="../Row[substring(@Date, 1, 4) = $varYear and substring(@Date, 6, 2) &gt;= 1 and substring(@Date, 6, 2) &lt; 4]">
            <a href="http://www.example.com/">LinkToDataofQ1</a>
        </xsl:when>
        <xsl:otherwise>There's no data for this quarter.</xsl:otherwise>
    </xsl:choose>   
</div> 
```

其他一些注意事项：

*   在 Q1 的测试中，您写了`$currentMonth <= 4`. 我想你想要的是`$currentMonth < 4`。
*   从`@Date`您使用的月份中提取月份`substring(@Date, 6, 7)`。第三个参数`substring`是子字符串的长度，而不是结束索引。所以你可能应该写`substring(@Date, 6, 2)`.
*   而不是`<xsl:value-of select="'string'"/>`，你可以简单地写`string`。

# ruby-on-rails - NoMethodError - ActiveModel::MassAssignmentSecurity::BlackList:Class 的未定义方法“by_email”：

> ID：15645353
> 
> 赞同：0
> 
> 时间：2013-03-26T19:06:12.367
> 
> 标签：ruby-on-rails, ruby, methods

我有一个 email_address 对象，我正在尝试检查它是否在该特定域的黑名单上。我这样称呼它：

```
elsif @email.blacklisted?(@domain.id)
  do something ...
end 
```

我收到错误消息：

```
NoMethodError - undefined method `by_email' for ActiveModel::MassAssignmentSecurity::BlackList:Class: 
```

我也尝试过使用 .find_all_by_id 而不是使用我创建的黑名单范围。虽然同样的错误。这让我发疯，任何想法都会很棒！

电子邮件地址类

```
class EmailAddress < ActiveRecord::Base
  attr_accessible :email, :global_blacklist

  has_many :transactions
  has_many :black_lists
  has_many :opt_outs

  validates :email, :presence => true,
          :uniqueness => true
  validates :global_blacklist, :acceptance => true

  def blacklisted?(domain_id)
    black_lists = BlackList.by_email(self.id).by_domain(domain_id)

    black_lists.count > 0
  end
end 
```

黑名单类

```
class BlackList < ActiveRecord::Base

  attr_accessible :domain_id, :email_address_id, :date_added

  belongs_to :domain
  belongs_to :email_address

  validates :domain_id, :presence => true
  validates :email_address_id, :presence => true
  validates :date_added, :presence => true

  GLOBAL_BLACK_LIST_THRESHOLD = 2

  scope :by_domain, ->(domain_id) { where('domain_id = ?', domain_id) }
  scope :by_email, ->(email_id) { where('email_address_id = ?', email_id) }

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:53:57.037

以防万一其他人有这个问题......

类名 BlackList (capitol L) 似乎是一个 ActiveModel 类名。

我将班级名称更改为黑名单（一个单词而不是两个单词），问题就消失了。

# sdk - Lua 数字货币格式

> ID：15645361
> 
> 赞同：1
> 
> 时间：2013-03-26T19:06:47.700
> 
> 标签：sdk, formatting, lua, numbers, coronasdk

在 lua 中，如何将数字格式化为有 2 位小数？我有一个值示例：25.333，我希望它改为显示 25.33。有时它是一个像 55 这样的整数，而我希望它显示 55.00。这是为了显示货币价值。我已经尝试过示例格式化函数，但没有一个能满足我的要求。任何建议表示赞赏。杰瑞

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T19:11:41.573

看到[这个答案](https://stackoverflow.com/questions/1811884/lua-string-format-options)。基本上，你会想要这样的东西：

```
rdahlgren@deimos: pts/1: 5 files 48Kb$ lua
Lua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio
> x = 25
> y = 25.3333
> print(string.format("%.2f", x))
25.00
> print(string.format("%.2f", y))
25.33
> 
```

# wcf - WCF 4.0 架构验证 minOccurs="1" 和 nillable="false"（日期和枚举）

> ID：15645365
> 
> 赞同：0
> 
> 时间：2013-03-26T19:07:01.220
> 
> 标签：wcf, validation, date, schema

我刚刚从 wsdl 和 xsd 制作了 WCF 服务。我已经用 minOccurs="1" 和 nillable="false" 在 xsd 中声明了一个“日期”类型的元素。当不在服务中设置变量时，.Net 输入默认值“01-01-0001”（使用soapui 查看响应）即我在客户端没有收到SoapFault。我在“日期”和“枚举”类型中遇到了这种情况。我正在使用 Visual Studio 2010（我还没有安装 SP1）和 .Net 4.0 Framework。这是一个错误吗？PS我使用[http://msdn.microsoft.com/en-us/library/aa717047%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/aa717047%28v=vs.100%29.aspx)示例.Net 4.0 - 除了上述之外，验证似乎还有效。

谢谢。尼古拉

# jquery - 试图创建一个 jQuery 图像旋转器，但只能让它的前半部分工作

> ID：15645367
> 
> 赞同：0
> 
> 时间：2013-03-26T19:07:02.443
> 
> 标签：jquery, css, image, rotation

我正在尝试创建一个图像旋转器，其中一个图像将淡入下一个图像，依此类推，直到它循环回第一个图像。我让前两个图像正常工作，但其余 3 个没有正确褪色。他们只是跳入视野。

我知道我仍然需要考虑到轮换的结束。我还没有解决这个问题，因为我只是想让第一轮轮换工作。

为了让它正常工作，我缺少什么？

我的 HTML：

```
 <div id="imageRotator">
    <div id="image01" class="current">
        <img src="images/imageRotate01.jpg">
    </div>
    <div id="image02" class="next">
        <img src="images/imageRotate02.jpg">
    </div>
    <div id="image03" class="hidden">
        <img src="images/imageRotate03.jpg">
    </div>
    <div id="image04" class="hidden">
        <img src="images/imageRotate04.jpg">
    </div>
    <div id="image05" class="hidden">
        <img src="images/imageRotate05.jpg">
    </div>
</div> 
```

我的 CSS：

```
#imageRotator div {
    position: absolute;
}

.current {
    z-index: 1;
}

.next {
    z-index: 0;
}

.hidden {
    z-index: -1;
} 
```

我的 jQuery：

```
$(document).ready(function() {

    var firstImage = $('#image01');
    var currentImage, nextImage;

    setInterval(rotateImages, 2000);

    function rotateImages() {
        currentImage = $('div.current');
        nextImage = $('div.next');

        //the first image fades away
        currentImage.animate({opacity: 0}, 2000, function() {
            currentImage.removeClass('current');    
        });

        //bring the second image into view
        nextImage.animate({opacity: 1}, 2000, function() {

            //make the new image the current image
            nextImage.removeClass('next').addClass('current');

            //the next image in the rotation becomes the 'next' image
            nextImage.next().addClass('next').removeClass('hidden');
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:59:09.553

默认情况下您没有设置零，因此第一个之后的元素`opacity`没有动画。`opacity`尝试将除第一个元素以外的所有元素设置为 0，看看会发生什么。

```
#imageRotator div {
    position: absolute;
    width: 30px;
    height: 30px;
    outline:1px solid red;
    background:red;
    opacity: 0;
}
#imageRotator div:first-child{
        opacity:1;
}
.current {
    z-index: 1;
}

.next {
    z-index: 0;
}

.hidden {
    z-index: -1;
} 
```

演示：http: [//jsfiddle.net/pavloschris/N3gXd/](http://jsfiddle.net/pavloschris/N3gXd/)

# eclipse - 如何从 Eclipse 增量部署到 Amazon Beanstalk？

> ID：15645368
> 
> 赞同：1
> 
> 时间：2013-03-26T19:07:05.987
> 
> 标签：eclipse, amazon-web-services, amazon-elastic-beanstalk

我正在尝试通过适用于 Eclipse 的 Amazon SDK 插件将我的 Maven Web 应用程序（使用 Spring MVC）项目部署到 Amazon Elastic Beanstalk。

这工作正常。问题是每次我对代码进行新的更改时，我都会尝试使用“增量部署”选项进行部署。

尽管一切正常，但当我尝试打开应用程序时，我发现已部署了最早版本的代码。所以我每次都必须部署整个应用程序。

怎么了？难道我做错了什么。请指导我。

# intellij-idea - 使用 IntelliJ/WebStorm 和 PhantomJS/Casper 设置 JS 调试

> ID：15645371
> 
> 赞同：24
> 
> 时间：2013-03-26T19:07:13.673
> 
> 标签：intellij-idea, phantomjs, casperjs, webstorm, javascript-debugger

我可以获得一个在 PhantomJS 和/或 CasperJS 上工作的交互式 JS 调试器吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T19:07:13.673

我没有完全解决这个问题，但我确实减轻了痛苦。

PhantomJS 提供了一个[命令行参数](https://github.com/ariya/phantomjs/wiki/Troubleshooting)来启用[webkit 的远程调试器](https://www.webkit.org/blog/1620/webkit-remote-debugging/)。AFAIK，PhantomJS 启动服务器并`<head>`使用熟悉的浏览器内调试器将脚本转储到网页中。它实际上非常好，带有断点等。但是，切换到在终端中手动挖掘随机命令行参数和脚本路径非常烦人。

因此，我使用 IntelliJ 的“外部工具”功能启动了一个 Bash 脚本，该脚本会终止任何以前的调试会话，启动 PhantomJS，然后在 Chrome 中打开页面。

```
#!/bin/bash

lsof -i tcp@0.0.0.0:9000 #list anything bound to port 9000
if [ $? -eq 0 ] #if something was listed
    then
        killall 'phantomjs'
fi

/usr/local/Cellar/phantomjs/2.0.0/bin/phantomjs --remote-debugger-port=9000 $1 & 
# --remote-debugger-autorun=yes <- use if you have added 'debugger;' break points
# replace $1 with full path if you don't pass it as a variable.

sleep 2; #give phantomJS time to get started

open -a /Applications/Google\ Chrome.app http://localhost:9000 & #linux has a different 'open' command
# alt URL if you want to skip the page listing
# http://localhost:9000/webkit/inspector/inspector.html?page=1

#see also
#github.com/ariya/phantomjs/wiki/Troubleshooting 
```

接下来的几行是 IntelliJ 的设置，尽管上面的代码在任何平台/IDE 上都同样有效。

程序：`$ProjectFileDir$/path/to/bash/script.sh`
参数：`$FilePath$`
工作目录：`$ProjectFileDir$`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-14T15:27:48.427

PhantomJS 有一个`remote-debugger-port`选项可用于在 Chrome 开发工具中调试 casper 脚本。要使用它，只需使用以下参数执行您的 casper 脚本：

`casperjs test script.js --remote-debugger-port=9000`

然后，在 Chrome 中打开[http://localhost:9000](http://localhost:9000)并单击出现的`about:blank`链接。然后，您应该会发现自己处于熟悉的 Chrome 开发工具领域。

由于这是一个脚本而不是网页，为了开始调试，您必须在脚本执行之前执行以下两项操作之一：

1.  在 Chrome 开发工具页面中，打开控制台并执行`__run()`以*实际启动*您的脚本。
2.  在您的代码中插入`debugger;`一行，并使用附加`--remote-debugger-autorun=yes`参数运行您的 casper 脚本。在打开远程调试页面的情况下执行此操作将运行脚本，直到它到达您的`debugger;`行。

有一个很棒的[教程](https://drupalize.me/blog/201410/using-remote-debugger-casperjs-and-phantomjs)很好地解释了这一切。

# jquery - jQuery 获取 longdesc 道具

> ID：15645374
> 
> 赞同：0
> 
> 时间：2013-03-26T19:07:18.587
> 
> 标签：jquery, prop

我需要从图像中获取 longdesc。

我努力了：

```
$(this).prop('longdesc'); 
```

但它返回未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:08:31.640

只是为了回答：

使用`attr()`代替`prop()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:10:51.307

您可以使用`data-*`属性，并使用获取数据`.data()`

[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

# jquery - 你如何让 JQuery 在页面加载时加载图像？

> ID：15645376
> 
> 赞同：0
> 
> 时间：2013-03-26T19:07:24.407
> 
> 标签：jquery

下面的代码适用于“mousemove”，但我希望图像在页面加载时显示，而我所做的任何更改都不会使图像在页面加载时显示。任何帮助是极大的赞赏！谢谢伊恩

```
$(document).ready(function () {

    $("body").mousemove(function () {

    $("li.fsn-level-1").each(function () {

      var imgCount = $(this).children("span").first().children("img").length;

      if (imgCount < 2) {
        $(this).children("span").first().prepend("<img id='imgPlus' src='images/plus.png' style='display:inline' />"); 
        $(this).children("span").first().prepend("<img id='imgMinus' src='images/minus.png' style='display:none' />");

      }

      var closed = $(this).hasClass("closed");
      var open = $(this).hasClass("open");
      var first = !closed && !open;
      if (first) {
        $(this).removeClass("open")
          $(this).removeClass("closed").addClass("closed");
        var sub = $(this).children("ul");
        if (sub.length) {
          sub.hide();
        }

        var plus = $(this).children("span").first().find("img[id='imgPlus']");
        if (plus.length)
          plus.show();

        var minus = $(this).children("span").first().find("img[id='imgMinus']");
        if (minus.length)
          minus.hide();
      }

      $(this).unbind('hover').bind('hover', function () {
        CloseAllSubMenu();
        var closed = $(this).hasClass("closed");
        var open = $(this).hasClass("open");
        var first = !closed && !open;

        if (first || closed) {
          $(this).removeClass("closed");
          $(this).removeClass("open").addClass("open");
          var sub = $(this).children("ul");
          if (sub.length) {
            sub.show();
          }

          var plus = $(this).children("span").first().find("img[id='imgPlus']");
          if (plus.length)
            plus.hide();

          var minus = $(this).children("span").first().find("img[id='imgMinus']");
          if (minus.length)
            minus.show();

        }
        if (open) {

          $(this).removeClass("open")
            $(this).removeClass("closed").addClass("closed");

          var plus = $(this).children("span").first().find("img[id='imgPlus']");
          if (plus.length)
            plus.show();

          var minus = $(this).children("span").first().find("img[id='imgMinus']");
          if (minus.length)
            minus.hide();
        }
      });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:20:33.080

只是问一个愚蠢的问题，如果你想在 page_load 上加载图像，那么为什么不把标签放在页面上开始，所以图像已经作为文档的一部分加载了。

如果您想在文档准备好（页面加载后）而不是鼠标悬停时加载图像，那么只需将其删除

```
$("body").mousemove(function () { } 
```

...部分来自您的 javascript，其余部分将立即触发，因为它不再连接到 mousemove 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:15:41.220

很难看出你到底想做什么，但这是我发现的：

页面准备就绪后，您将在此处附加图像：

```
$(this).children("span").first().prepend("<img id='imgPlus' src='images/plus.png' style='display:inline' />");
$(this).children("span").first().prepend("<img id='imgMinus' src='images/minus.png' style='display:none' />"); 
```

这将导致图像在该时间点加载，即：您正在等待页面准备好（加载），然后您正在附加它们，并在页面加载后强制它们加载。

如果您需要动态（看起来像），请在调用之前尝试运行它`$(document).ready();`。这样，它们将被包含在文档的负载中（以及之后发生的任何事情。

# batch-file - 如何使用批处理文件启动指南针

> ID：15645378
> 
> 赞同：1
> 
> 时间：2013-03-26T19:07:38.893
> 
> 标签：batch-file

您好，谁能告诉我如何使用批处理文件启动指南针？

```
cmd.exe /K "cd C:\Ruby200-x64\bin\ && C:"
compass watch "e:/project/html/" 
```

但是在打开正确的位置后，它不会启动线*罗盘手表*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:18:58.453

创建一个批处理文件（*path\batchfile.bat*）：

```
c:
cd C:\Ruby200-x64\bin\
compass watch "e:/project/html/" 
```

然后执行：
`cmd.exe /c "path\batchfile.bat"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T23:29:03.407

对我有用的简单方法；在项目文件夹中有批处理文件，其中包含以下行：

```
compass watch 
```

例如，如果您移动项目文件夹，则无需更改路径。对我来说，打开项目文件夹并双击文件开始工作很方便。

# ruby - 无法在 Mac OSX 10.8.3 上运行 ruby

> ID：15645379
> 
> 赞同：1
> 
> 时间：2013-03-26T19:07:40.200
> 
> 标签：ruby, macos, macports

几天来，我一直试图让 Ruby 在我的 Mac 上运行，但无论我做什么似乎都没有成功。我已经安装了 MacPorts 并按照这里的帖子：[在 Mac OS X 10.8.2 上安装 Ruby](https://stackoverflow.com/questions/14662569/installing-ruby-on-mac-os-x-10-8-2)

我运行了以下命令：

```
sudo port selfupdate
sudo port install apple-gcc42 
```

他们成功完成了，然后我运行了下面的行：

```
CC=/opt/local/bin/gcc-apple-4.2 rvm install ruby-1.9.3-p194 --enable-shared --without-tk --without-tcl 
```

在我运行那条线之后，它需要几分钟，我得到以下信息：

> 在此处输入代码 MacPorts base 已经是最新版本 调试：将 MacPorts 源所有权设置为 root 端口树已更新。要升级已安装的端口，您应该运行 port upgrade outdated i686-apple-darwin12-gcc-apple-4.2.1: no input files Missing required packages: autoconf, automake, libtool, pkgconfig, libiconv, libyaml, readline, libxml2, libxslt ，libksba，openssl，curl-ca-bundle，sqlite3，zlib，ncurses，gdbm。懦弱地拒绝继续，请阅读“rvm autolibs”。出现包安装错误，请务必阅读日志。

我是否需要安装它引用的缺失包？如果是这样，我该怎么做？我对 MacPorts 不是很熟悉，希望能帮我完成这项工作。

因为我最初是通过[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)安装 RVM，所以我按照第一个命令使用 ruby​​ 安装 RVM：

```
$ \curl -#L https://get.rvm.io | bash -s stable --autolibs=3 --ruby 
```

在我运行它下载并编译的命令之后，当它为 ruby​​-2.0.0-p0 安装 ruby​​gems-2.0.3 时，它给出了以下错误消息：

`Error running 'env GEM_PATH=/usr/local/rvm/gems/ruby-2.0.0-p0:/usr/local/rvm/gems/ruby-2.0.0-p0@global:/usr/local/rvm/gems/ruby-2.0.0-p0:/usr/local/rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/usr/local/rvm/gems/ruby-2.0.0-p0 /usr/local/rvm/rubies/ruby-2.0.0-p0/bin/ruby -d /usr/local/rvm/src/rubygems-2.0.3/setup.rb --verbose', please read /usr/local/rvm/log/ruby-2.0.0-p0/rubygems.install.log`

然后我去打开日志文件，在底部它说

`ERROR: While executing gem ... (NoMethodError) undefined method fu_stream_blksize for #<Gem::Commands::SetupCommand:0x007fa09b05d7a8> Installing RubyGems Installing gem executable`

有什么想法我接下来可以做什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:05:16.537

我在 OS X 10.8.3 和 XCode 4.6.1 上遇到了类似的问题。经过一番谷歌搜索后，我尝试使用类似的 RVM 命令进行安装，除了使用 XCode 版本的 clang（符号链接到 /usr/bin/cc）。尝试这个：

```
\curl -#L https://get.rvm.io | bash -s stable    #just get rvm

source ~/.rvm/scripts/rvm

rvm get head  # update to latest rvm

CC=/usr/bin/cc rvm install ruby 
```

安装 ruby​​gems-2.0.3 应该有同样的失败，但重新安装 ruby​​gems 应该可以工作：

```
CC=/usr/bin/cc rvm install rubygems latest  # substitute "2.0.3" for "latest" if you like. 
```

看来这是 ruby​​gems 中的一个[错误，](https://github.com/rubygems/rubygems/issues/516)计划在 2.0.4 中修复。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T06:26:12.533

我认为这个错误来自[FileUtils](http://bugs.ruby-lang.org/issues/7992)。要修复它，您需要从 rvm 更改 ruby​​gems 脚本：`nano .rvm/scripts/rubygems` 在 nano 中查找单词`ctrl+w setup.rb`并删除`--verbose`选项。在此之后，您需要`ctrl+o`保存文件并`ctrl+x`关闭 nano。

现在您可以重新安装 ruby​​gems：

```
rvm rubygems remove
rvm rubygems latest 
```

对不起，我的英语不好。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:52:48.547

除了 Valery 的回答之外，您可能必须在删除和重新安装之前执行以下操作：

```
echo ${LANG:-empty}
export LANG=en_US.utf-8 
```

问题和解决方法的链接：

1.  [https://github.com/rubygems/rubygems/issues/516](https://github.com/rubygems/rubygems/issues/516)
2.  [https://github.com/wayneeseguin/rvm/issues/1689](https://github.com/wayneeseguin/rvm/issues/1689)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:59:06.877

这个问题是无害的，rubygems 已经安装并且将按预期工作，这是由[https://bugs.ruby-lang.org/issues/7992](https://bugs.ruby-lang.org/issues/7992)触发的- 带有`--verbose`ruby​​gems 安装标志 - 如果没有，您的 ruby​​ 完全可用安装过程中的其他错误。

* * *

附带说明一下，RVM 会检测您传递的所有选项/标志，并且不需要手动传递它们，运行就足够了：

```
rvm install ruby-1.9.3-p194 
```

* * *

运行的 RVM 安装程序`--autolibs=3`相当于运行它而不使用它并手动设置它：

```
rvm autolibs 3 
```

要获取有关`autolibs`和可用模式的更多信息，请运行：

```
rvm help autolibs 
```

# c# - RichTextBox 和 Tab 键

> ID：15645380
> 
> 赞同：10
> 
> 时间：2013-03-26T19:07:46.377
> 
> 标签：c#, forms

我创建了一个richTextBox，我注意到当我按下 Tab 键时它什么也没做。它应该做一些空间，但它没有。

我怎样才能访问它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-26T19:09:24.917

默认情况下，按 Tab 将焦点移动到下一个控件。将 RichTextBox 的 AcceptsTab 属性设置为`true`允许 RichTextBox 接受制表符。

请参阅有关[AcceptsTab 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.acceptstab.aspx)的 MSDN 文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-08T06:05:02.403

首先您需要设置 Richtextbox 的以下属性

```
richTextBox.Multiline = true;
richTextBox.AcceptsTab = true; 
```

在richtextbox的按键事件中，您需要执行以下操作

```
if (e.KeyChar == 9)
{
    e.Handled = false;
} 
```

# java - 在 Java 中捕获生成程序的 IO

> ID：15645387
> 
> 赞同：0
> 
> 时间：2013-03-26T19:08:16.720
> 
> 标签：java, multithreading, jar, io, spawn

我正在用 Java 编写一个程序，该程序依赖于与我位于同一目录中的预编译第三方 JAR。在运行时，我的程序会检查此文件是否存在，如果不存在则下载它。然后执行它的主类。但是，生成的程序会直接将大量文本打印到控制台。有什么方法可以“捕获”（并因此隐藏）这个输出`stdout`并将我自己的输入直接从我的父应用程序返回到`stdin`？理想情况下，我希望子程序驻留在同一个 JVM 中，因此我想避免使用任何版本的`Runtime.exec()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:36:15.777

使用 Java 1.5+`ProcessBuilder`类和`Process`类。请记住，如果您未正确处理其流，该进程将阻塞。

# r - 如果列 R 中不再为真，则在行中查找值

> ID：15645390
> 
> 赞同：2
> 
> 时间：2013-03-26T19:08:23.193
> 
> 标签：r

这应该很简单，但尽管看起来很困难。

我有一个列值 a,b,c 的数据框

```
a   b   c
t1  10  TRUE
t2   9  TRUE
t3   8  FALSE
t4   7  FALSE
t5   6  FALSE
t6   5  TRUE
t7   4  TRUE
t8   3  TRUE 
```

我需要获取数据框中的行，其中 c 从`TRUE`到`FALSE`或`FALSE`到`TRUE`（行`t3 8 FALSE`和`t6 5 TRUE`）变化。

似乎`ifelse`会这样做，但我无法弄清楚如何进行更改部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:58:50.847

似乎是`xor`逻辑运算的任务。该`xor`操作给出：

```
#       x     y   xor
# 1  TRUE  TRUE FALSE
# 2  TRUE FALSE  TRUE
# 3 FALSE  TRUE  TRUE
# 4 FALSE FALSE FALSE 
```

使用这个，如果我们取`df$c`然后`xor`with `c(NA, head(df$c, -1))`，后者是 的移位版本`df$c`，那么我们得到：

```
#       x     y   xor
# 1  TRUE    NA    NA
# 2  TRUE  TRUE FALSE
# 3 FALSE  TRUE  TRUE
# 4 FALSE FALSE FALSE
# 5 FALSE FALSE FALSE
# 6  TRUE FALSE  TRUE
# 7  TRUE  TRUE FALSE
# 8  TRUE  TRUE FALSE 
```

在这里你想要那些条目是`TRUE`. 所以，

```
df[with(df, xor(c, c(NA, head(c, -1))) %in% TRUE), ]

#    a b     c
# 3 t3 8 FALSE
# 6 t6 5  TRUE 
```

更好的是，我们可以消除`NA`和因此的`%in%`使用：

```
df[with(df, xor(c, c(c[1], head(c, -1)))), ]

#    a b     c
# 3 t3 8 FALSE
# 6 t6 5  TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:16:05.223

您可以使用`diff`which 计算一个值与下一个值之间的差异，因为`TRUE`and`FALSE`只是 1 和 0。如果从`TRUE`到`FALSE`您得到 -1，如果从`FALSE`到`TRUE`您得到 1，如果它只是 TT 或 FF，它将是0\. 然后您可以使用它来对您的数据框进行子集`which`化，以选择行。它归结为一行（我称之为你的数据框`df`）......

```
df[ which( diff( df$c ) != 0 ) + 1 , ]
#   a b     c
#   3 t3 8 FALSE
#   6 t6 5  TRUE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:53:59.803

这是一个`rle`例子：

```
set.seed(110)
df <- data.frame( a = sample.int(10 , 10 ) , b = sample( c( TRUE , FALSE ) , 10 , repl = TRUE ) )

rles <- rle(df$b)
take <- cumsum(rles$lengths) + 1

df[take[-length(take)], ] 
```

# javascript - 变换矩阵

> ID：15645394
> 
> 赞同：0
> 
> 时间：2013-03-26T19:08:32.863
> 
> 标签：javascript, jquery, svg

我有一个带有 ag 元素容器的 svg 地图。在 g 元素内，我有 x、y 位置的项目。

我正在尝试实现平移 g 元素的鼠标滚轮缩放，以便鼠标下方的对象始终位于鼠标下方。类似于 Google 地图在通过鼠标滚轮缩放时平移地图的方式，以便您缩放到鼠标位置。

我已经用尽了所有搜索并尝试了许多不同的方法来计算鼠标位置与 g 元素位置。

我试过了：

```
var xPan = (mouse.x - (matrix.scale * mouse.x)) - matrix.panX;
var yPan = (mouse.y - (matrix.scale * mouse.y)) - matrix.panY;
pan(xPan, yPan); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:51:21.950

I had an similar problem some time ago, with the difference that I am using canvas but because I use svg to save my transform matrix it may help you, if I post the necessary part of my code:

```
window.transform = svg.createSVGMatrix();
window.pt = svg.createSVGPoint();

transformedPoint = function (x, y) {
    window.pt.x = x; window.pt.y = y;
    return pt.matrixTransform(window.transform.inverse());
}

translate = function(dx, dy) {
    window.transform = window.transform.translate(dx, dy);
}

scale = function (scaleX, scaleY) {
    window.transform = window.transform.scaleNonUniform(scaleX, scaleY);
};

zoom = function (scaleX, scaleY, x, y) { //use real x and y i.e. mouseposition on element
    var p = transformedPoint(x, y);
    translate(x, y);
    scale(scaleX, scaleY);
    translate(-x, -y);
} 
```

I hope you can use some of this code and get it to work for you

Credits going to Phrogz and his outstanding example here: [https://stackoverflow.com/a/5527449/1293849](https://stackoverflow.com/a/5527449/1293849)

# c++ - 打破循环循环

> ID：15645403
> 
> 赞同：1
> 
> 时间：2013-03-26T19:08:58.137
> 
> 标签：c++, visual-c++, parallel-processing

```
#include<iostream>
#include<fstream>
#include<time.h>
#include<omp.h>

using namespace std;
static long num_steps = 100;
#define NUM 8
double step;

void main()
{
    clock_t time =clock();
    ofstream result;
    result.open ("Result.txt");
    int a[100];
    double pi, sum=0.0; 
    step = 1.0/(double) num_steps;

    #pragma omp parallel num_threads(NUM)
    {           
        int i, ID;    
        double x, psum= 0.0; 
        int nthreads = omp_get_num_threads();
        ID = omp_get_thread_num();   
        for (i=ID;i<= num_steps; i+=nthreads)
        {
            x = (i+0.5)*step;
            psum += 4.0/(1.0+x*x);
        }
        #pragma omp critical
        sum += psum;
    }

    pi = step * sum; 
    for (int j=0;j<100;j++)
    result<<a[j]<<endl;

    time = clock() - time;

    result << "Time Elapsed: " << (((double)time)/CLOCKS_PER_SEC) << endl;

    result <<"======================================================================================="<<endl;
    result.close();
} 
```

问题是： `for (i=ID;i<= num_steps; i+=nthreads)` 以下 for 循环按以下顺序执行线程：01234567 01234567 01234567 等...任务是将 for 循环更改为，以便线程均匀分布，而不是以舍入的方式分布。首先是 0，然后是 1，然后是 2.... 然后是 sevens 我应该如何更改 forloop？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T10:49:17.930

你必须为此使用某种线程同步......
你标记Visual Studio，所以我假设Windows平台......

最近这成了我的最爱：

```
// init
CRITICAL_SECTION hnd;
InitializeCriticalSectionAndSpinCount(&hnd,0x00000400);

// start lock
EnterCriticalSection(&hnd);
// stop lock
LeaveCriticalSection(&hnd);

// exit
DeleteCriticalSection(&hnd); 
```

但是还有很多其他的方法。

*   您也可以尝试制作自己的锁或无锁线程
*   但请注意，在 Windows 7 等较新的操作系统中，进程调度器是不同的
*   并且有**发疯的倾向**
*   我的意思是在以前的 OS-es 上 100% 工作的无锁代码现在不稳定或冻结
*   所以我更喜欢使用操作系统锁。

**如果您错误地使用锁，您可能会失去多线程加速的任何好处。**

如果您只是担心您的解决方案
在您的情况下不会同时计算线程而不是并行计算线程，那么它可能是由以下原因引起的：

1.  处理时间粒度。

    *   任何已调度的任务都被划分为多个时间块。
    *   如果您的任务太短，那么它会在其他任务甚至开始执行之前完成。
    *   测试尝试更大的有效载荷（计算时间>几秒）
    *   大大增加循环次数
    *   添加 Sleep(time ms) 以获得更长的计算时间
    *   如果输出是混合的，那就是它
    *   如果不是，那么您仍处于粒度边界之下
    *   或者你的多线程代码是错误的
2.  错误的多线程代码

    *   你支持你的线程同时创建/运行吗？
    *   还是您同步到错误的地方？（直到上一个任务结束）
    *   还有一些编译器做了大量的易失性变量（添加锁有时会做一些非常奇怪的事情......我多次遇到它，但主要是在 MCU 平台和 Eclipse 上）
3.  单核

    *   在某些情况下，如果您只有 1 个 CPU/核心/计算机用于处理
    *   或者只是将关联掩码设置为单个 CPU
    *   在某些算法上，windows 调度器不会均匀地调度 CPU 时间
    *   即使不管进程/线程优先级/类
    *   即使对于更多 CPU，有时也会在 Windows 7 上出现类似的情况......
    *   尤其是与内核模式代码混合的代码

要玩粒度，您可以使用他的：

```
// obtain OS time capabilities
TIMECAPS tim; 
timeGetDevCaps(&tim,sizeof(tim));

// set new granularity
if (timeBeginPeriod(time ms)!=TIMERR_NOERROR) log("time granularity out of range");

// return to previous hranularity
timeEndPeriod(time ms ... must be the same as beginperiod);out of range"); 
```

**PS。**关于这个的非常好的东西在这里：

[http://bitflipgames.com/2011/05/09/multithreaded-programming-part-1-the-critical-section-lock/](http://bitflipgames.com/2011/05/09/multithreaded-programming-part-1-the-critical-section-lock/) [http://bitflipgames.com/2011/05/17/multithreaded-programming-part- 2-multiple-readerssingle-writer-lock/](http://bitflipgames.com/2011/05/17/multithreaded-programming-part-2-multiple-readersingle-writer-lock/) [http://bitflipgames.com/2011/05/20/multithreaded-programming-part-2-5-mrsw-lock-code/](http://bitflipgames.com/2011/05/20/multithreaded-programming-part-2-5-mrsw-lock-code/) [http://bitflipgames.com/2011/ 05/25/多线程编程第 3 部分去无锁/](http://bitflipgames.com/2011/05/25/multithreaded-programming-part-3-going-lockless/)

# jquery - 合并 .each div 高度

> ID：15645407
> 
> 赞同：1
> 
> 时间：2013-03-26T19:09:12.427
> 
> 标签：jquery, each

我正在使用 class="divHeight" 获取每个 div 的高度。

```
$.each($('.divHeight'), function() {
var eachDivHeight = $(this).height();   
console.log(eachDivHeight);
}); 
```

但是，我不知道如何组合这些值。在控制台中，我得到两个数字（311、17）。如何添加 .each 找到的值？那些在数组中吗？

我的最终代码：

```
var totalHeight = 0;
$.each($('.divHeight'), function() {
 var eachDivHeight = $(this).outerHeight(true);
 totalHeight += eachDivHeight;
 $("#personDetailsView").css("height",totalHeight); 
 }); 
```

请注意，我必须使用 outerHeight(true) 来解释其中一个 div 高度的边距......这很难弄清楚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:11:07.440

您将在每个用作运行总计的变量之外定义一个变量。

```
var totalHeight = 0;
$.each($('.divHeight'), function() {
 var eachDivHeight = $(this).height();
 totalHeight += eachDivHeight;
 console.log(eachDivHeight);
});
console.log(totalHeight); 
```

**[jsFiddle 演示](http://jsfiddle.net/kExCG/)**

# java - Java 的实习字符串会被 GC 处理吗？

> ID：15645408
> 
> 赞同：2
> 
> 时间：2013-03-26T19:09:13.063
> 
> 标签：java, garbage-collection

在跟踪可能的内存泄漏时，我遇到了以下现象。Java 7 回收实习字符串或 jmap 是否不精确？

```
# jmap -heap 9724 | grep 实习
正在附加到进程 ID 9724，请稍候...
调试器连接成功。
检测到服务器编译器。
JVM版本是23.3-b01
10526 个实习字符串，占用 880048 个字节。

# jmap -heap 9724 | grep 实习
正在附加到进程 ID 9724，请稍候...
调试器连接成功。
检测到服务器编译器。
JVM版本是23.3-b01
10514 个实习字符串，占用 878984 个字节。

# jmap -heap 9724 | grep 实习
正在附加到进程 ID 9724，请稍候...
调试器连接成功。
检测到服务器编译器。
JVM版本是23.3-b01
10519 个实习字符串，占用 879720 字节。

```

环境：Linux 版本 2.6.32-220.23.1.el6.centos.plus.x86_64 (mockbuild@c6b5.bsys.dev.centos.org) (gcc 版本 4.4.6 20110731 (Red Hat 4.4.6-3) (GCC ) ) #1 SMP Tue Jun 19 04:14:37 BST 2012

java 版本“1.7.0_07”Java(TM) SE 运行时环境（构建 1.7.0_07-b10）Java HotSpot(TM) 64 位服务器 VM（构建 23.3-b01，混合模式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:31:42.227

是的，Interned Strings 被回收。并且正如其中规定的那样[`Java SE 7 Features and Enhancements`](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html)，建议：

> In JDK 7, interned strings are no longer allocated in the permanent generation of the Java heap, but are instead allocated in the main part of the Java heap (known as the young and old generations), along with the other objects created by the application. This change will result in more data residing in the main Java heap, and less data in the permanent generation, and thus may require heap sizes to be adjusted. Most applications will see only relatively small differences in heap usage due to this change, but larger applications that load many classes or make heavy use of the String.intern() method will see more significant differences.

# sed - 打印字段编号和字段

> ID：15645409
> 
> 赞同：1
> 
> 时间：2013-03-26T19:09:13.357
> 
> 标签：sed, awk

我想像这样打印字段编号和字段... awk 是最好的方法吗？如果有怎么办？输入行中的字段数可能会有所不同。

```
input_line ="a|b|c|d" 
expected result:
1 a
2 b
3 c
4 d 
```

我可以打印字段，但需要帮助打印字段编号。这就是我所拥有的

```
echo "a|b|c|d" |awk -F"|" '{for (i=1; i<=NF; i++) print $i}'
a
b
c
d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:14:42.593

您可以使用 awk 命令，例如：

```
echo "a|b|c|d" | awk -F"|" '{for(i=1; i<=NF; i++) print i, $i}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:17:05.690

`awk`使用while循环应该可以解决问题：

```
awk -F '|' '{ i = 1; while (i <= NF) { print i " " $i; i++; } }' <<< "a|b|c|d" 
```

# javascript - 在 dom 更改后处理内容

> ID：15645410
> 
> 赞同：1
> 
> 时间：2013-03-26T19:09:15.100
> 
> 标签：javascript, jquery, dom

我有一个包含一些 Javascript / jQuery 内容的页面，例如：

```
(function()
{
    $('.tip').tooltip();

    $('.test').click(function()
    {
        alert('Clicked!')
    });
}(); 
```

在页面上，我使用 jQuery 插入了一些 HTML，因此 DOM 发生了变化。例如，我插入了一个带有“tip”或“test”类的额外元素。刚刚插入的新元素不起作用，因为 jQuery 正在使用未操作的 DOM，而刚刚插入的元素不存在。因此，我四处搜索并找到了“点击”的解决方案：

```
$('body').on('click','.click',function()
{
    alert('Clicked!')
}); 
```

我不明白为什么，但是这样它就可以使用被操纵的 DOM，而 jQuery 的东西可以在新插入的元素上工作。所以我的第一个问题是，为什么这行得通而只是 click() 函数不行？而第二个问题，为什么我必须指向“身体”？

最后，我的第三个问题是，如何使用工具提示完成这项工作？

我知道有很多关于这个主题的信息（之前我读过的 delegate() 和 live() 函数），但我找不到关于它的解释。而且我无法用我找到的信息解决我的第三个问题。

我期待着您的回复！

**额外的问题：**

4）是否建议在这种情况下始终指向“身体”？它总是在那里，但可能存在性能问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:16:29.737

> 所以我的第一个问题是，为什么这行得通而只是 click() 函数不行？

因为事件处理程序现在被委托给父元素，所以即使在替换/操作子元素之后它仍然存在。

关于事件委托的古老文章供您阅读 - 但概念保持不变：

*   [http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)

> 还有第二个问题，为什么我要指向“身体”

您不需要，任何合适的父元素都可以。例如，任何*不会*被替换的直接父级（例如 div 包装器）。

> 最后，我的第三个问题是，如何使用工具提示完成这项工作？

您需要在新插入的元素上重新初始化工具提示插件。例如：

```
$.get("foo.html", function (html) {
    $("#someDiv").html(html);
    $("#someDiv").find(".tip").tooltip();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:18:04.697

当您操作 DOM 时，该`click()`事件不起作用，因为 JQuery 没有监视 DOM 更改。当您绑定`click()`事件时，它会选择当时页面上的元素。除非您明确绑定事件，否则新的不在列表中。

因为您已将事件指向`click()`身体。JQuery 然后检查单击的目标是否匹配任何事件处理程序（如您创建的）与单击的元素匹配。这样，任何新元素都将获得与它们“关联”的事件。

因为工具提示不是您可以放置​​在主体上的事件，所以您需要在创建元素时重新初始化它。

**编辑：**

对于你的第四个问题，这取决于。绑定到主体的优点是您不会不小心将事件多次绑定到元素。缺点是您正在添加需要检查每个事件的事件处理程序，这可能会导致性能问题。

至于您对 DRY 的担忧，请将工具提示的初始化放入一个函数中，并在添加它们时调用它。在这方面，IMO 试图避免使用相同的函数调用有点矫枉过正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:23:24.960

事件绑定到您要绑定的特定对象。

因此，类似的东西`$('.tip').tooltip()`将执行 tooltip() 功能`$('.tip')`，实际上它只是满足 css 选择器的对象集合`.tip`。您应该注意的是，该集合不是动态的，它基本上是当前页面的“数据库”查询，并返回由 jQuery 包装的 HTML DOM 对象的结果集。

因此，在该集合上调用 tooptip() 只会对该集合内的对象执行工具提示功能，调用工具提示时不在该集合中的任何内容都将不具有工具提示功能。因此，在调用*之后*添加满足`.tip`选择器的元素不会为其提供工具提示功能。*`tooltip()`*

 *现在，`$('body').on('click','.click', func)`实际上是将点击事件绑定到`body`标签（它应该始终存在：P），但是它会捕获点击事件是否已通过您的目标 css 选择器的元素（`.click`在这种情况下），所以因为检查是动态完成，新元素将被捕获。

这是对正在发生的事情的相对简短的总结......我希望它有所帮助

**更新：** 工具提示的最佳方法是在添加元素后绑定工具提示，例如

```
$('#container').load('www.example.com/stuff', function() {
    $('.tip', $(this)).tooltip();
}); 
```*

# amazon-web-services - SCP 到 aws 实例的实例存储

> ID：15645411
> 
> 赞同：0
> 
> 时间：2013-03-26T19:09:15.967
> 
> 标签：amazon-web-services, amazon-ec2, scp

我有一个 ec2 实例，它有一个根设备和一个附加到它的实例存储。当我 scp 到根设备时，没有问题，但是当我 scp 到实例存储时，它给了我权限被拒绝错误。我正在使用的命令如下 scp -i/home/usmanmahmood/Desktop/abc/UsmanMahmood_KP.pem ~/Desktop/iozone3_414.tar ubuntu@ec2-54-224-70-78.compute-1.amazonaws.com:/ mnt

出现的错误是 scp: /mnt/iozone3_414.tar: Permission denied。

你能告诉我问题是什么，实例存储在 mnt 上吗？我正在做 mnt，因为当我通过 ssh 登录到 ec2 后执行“df -h”时，我得到以下输出

已使用的文件系统大小 Avail Use% Mounted on /dev/xvda1 7.9G 876M 6.7G 12% / udev 819M 12K 819M 1% /dev tmpfs 331M 168K 331M 1% /run none 5.0M 0 5.0M 0% /run/lock none 827M 0 827M 0% /run/shm /dev/xvdb 147G 188M 140G 1% /mnt

从最后我认为实例存储在 /mnt 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:06:30.160

You can't actually scp to the instance store, its not persistent store device which is attached to it, please be aware of the fact that if you reboot or shut down the instance you may loss that data which is stored the instance store, so I dont suggest you to store any critical data in the /mnt/. Obviously you will not have any access.

# c# - 串口数据的字符串操作

> ID：15645412
> 
> 赞同：1
> 
> 时间：2013-03-26T19:09:17.130
> 
> 标签：c#, string

我正在创建一个 Windows 窗体应用程序，但遇到了一个问题。我正在从串口读取数据。

```
string RxString = serialPort1.ReadExisting(); 
```

这很好用，但我现在想做的是从我的值中提取值`RxString`并将它们放入自己的字符串数组中。

这是 RxString 格式：

```
GPS:050.1347,N,00007.3612,WMAG:+231\r\n 
```

随着从串行端口添加更多数据，它会重复自身，数字会发生变化但长度保持不变，+ 会变为 -。我想将 GPS: 和 ,N 之间的数字放入一个字符串数组中，将 N 和 ,W 之间的数字放入另一个字符串数组中，最后将 + 和 \r\n 之间的数字放入第三个字符串数组中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:30:32.857

好的，正则表达式解决方案：

```
 string pattern = @"^GPS:(?<gps>.{8}),N,(?<n>.{10}),WMAG:(\+|\-)(?<wmag>.{3})\\r\\n$";

        string gps = string.Empty;
        string n = string.Empty;
        string wmag = string.Empty;

        string input = @"GPS:050.1347,N,00007.3612,WMAG:+231\r\n";

        Regex regex = new Regex(pattern);

        if (regex.IsMatch(input))
        {
            Match match = regex.Match(input);

            foreach (Capture capture in match.Groups["gps"].Captures)
                gps = capture.Value;

            foreach (Capture capture in match.Groups["n"].Captures)
                n = capture.Value;

            foreach (Capture capture in match.Groups["wmag"].Captures)
                wmag = capture.Value;
        }

        Console.Write("GPS: ");
        Console.WriteLine(gps);

        Console.Write("N: ");
        Console.WriteLine(n);

        Console.Write("WMAG: ");
        Console.WriteLine(wmag);

        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:15:15.653

尝试这个：

```
string RxString = serialPort1.ReadExisting();

string latitude = RxString.Split(',')[0].Substring(4);
string longitude = RxString.Split(',')[2];
string mag = RxString.Split(',')[3].Substring(6).Trim(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:15:05.267

我确信有一些正则表达式可以使这个更漂亮，但我不擅长正则表达式，所以我会检查 C# 的 String.Split 函数。如果您知道数字的长度相同，则子字符串会起作用，但如果这不能保证，那么拆分将是您最好的选择。你可以用逗号分割每一行，创建一个数组，然后使用 Replace 删除额外的文本（如 GPS: 和 WMAG:)，如果你知道每次都一样的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:12:52.513

If the string is always the same length, the best way is to use `substring()` method.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T19:39:12.740

这不是最好的解决方案，因为它使用“魔术”数字和子字符串 - 但可能适用于您的情况，因为您说字符串长度始终相同。

```
var serialPortInfo = "GPS:050.1347,N,00007.3612,WMAG:+231\r\n";

private List<string> value1 = new List<string>();
private List<string> value2 = new List<string>();
private List<string> value3 = new List<string>();

private void populateValues(string s)
{
    // this should give an array of the following: 
    // values[0] = "050.1347"
    // values[1] = "N"
    // values[2] = "00007.3612"
    // values[3] = "WMAG:+231"
    //
    var values = (s.Substring(4, (s.Length - 8))).Split(','); 

    // populate lists
    //
    value1.Add(values[0]);
    value2.Add(values[2]); 
    value3.Add(values[3].Substring(6, 3));
}

//usage
populateValues(serialPortInfo); 
```

# r - 重新排序字符列值以进行绘图

> ID：15645414
> 
> 赞同：2
> 
> 时间：2013-03-26T19:09:20.600
> 
> 标签：r, ggplot2, dataframe

以下是我拥有的数据框的一个子集：

```
sample <- structure(list(MONTH_DAY = c("1_0", "1_1", "1_10", "1_11", "1_12", 
"1_13", "1_14", "1_15", "1_16", "1_17", "1_18", "1_19", "1_2", 
"1_20", "1_21", "1_22", "1_23", "1_3", "1_4", "1_5", "1_6", "1_7", 
"1_8", "1_9", "2_0", "2_1", "2_10", "2_11", "2_12", "2_13", "2_14", 
"2_15", "2_16", "2_17", "2_18", "2_19", "2_2", "2_20", "2_21", 
"2_22", "2_23", "2_3", "2_4", "2_5", "2_6", "2_7", "2_8", "2_9", 
"3_0", "3_1"), variable = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("9", 
"10", "11", "12", "13"), class = "factor"), value = c(NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 51, 18
)), .Names = c("MONTH_DAY", "variable", "value"), row.names = c(NA, 
50L), class = "data.frame") 
```

我正在绘制一个图表`ggplot2`，其中 x 轴的格式为 MONTH_DAYOFMONTH 即 1_13 表示同月的 1 月和 13 日，y 轴表示计数（这是数据框中的`value`列）。当我绘制数据时，使用命令：

```
ggplot(sampleData, aes(x=MONTH_DAY, y=value, colour=variable, group=variable)) + `geom_line() + theme(axis.text.x=element_text(angle=90, size=4, hjust=-0.2, vjust=0.5)) + scale_colour_discrete("Months")` 
```

x 轴未排序并显示以 x 轴值为`1_0, 1_1, 1_10, 1_11`... 而不是`1_0, 1_1, 1_2, 1_3`.

如何对这些值进行排序，以便绘图显示数据是我希望看到的顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:30:41.923

试试`mixedsort`，从**gtools**包：

```
library(gtools)
sample$MONTH_DAY <- 
    with(sample, ordered(MONTH_DAY, levels=mixedsort(MONTH_DAY)))
## Try your plotting code here 
```

为了说明它的作用：

```
MONTH_DAY = c("1_0", "1_1", "1_10", "1_11", "1_12", 
"1_13", "1_14", "1_15", "1_16", "1_17", "1_18", "1_19", "1_2", 
"1_20", "1_21", "1_22", "1_23", "1_3", "1_4", "1_5", "1_6", "1_7", 
"1_8", "1_9", "2_0", "2_1", "2_10", "2_11", "2_12", "2_13", "2_14", 
"2_15", "2_16", "2_17", "2_18", "2_19", "2_2", "2_20", "2_21", 
"2_22", "2_23", "2_3", "2_4", "2_5", "2_6", "2_7", "2_8", "2_9", 
"3_0", "3_1")

head(sort(MONTH_DAY), 10)
#  [1] "1_0"  "1_1"  "1_10" "1_11" "1_12" "1_13" "1_14" "1_15" "1_16" "1_17"

head(mixedsort(MONTH_DAY), 10)
#  [1] "1_0" "1_1" "1_2" "1_3" "1_4" "1_5" "1_6" "1_7" "1_8" "1_9" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:02:01.473

我只是把它变成一个日期并像这样绘制它（在数据中你给所有值栏两个是NB，`NA`所以我使用`runif(50 , max = 50)`......

```
sampleData$MONTH_DAY <- as.Date( sampleData$MONTH_DAY , format = "%m_%d" )
ggplot(sampleData, aes(x=MONTH_DAY, y=value, colour=variable, group=variable)) + 
geom_line() +
theme(axis.text.x=element_text(angle=90, size=4, hjust=-0.2, vjust=0.5)) +        
scale_colour_discrete("Months") 
```

![在此处输入图像描述](../Images/c99c90cf6429d074e7cc149bb9bc674f.png)

# javascript - 循环遍历带有骨干和灰尘的未命名数组对象

> ID：15645422
> 
> 赞同：0
> 
> 时间：2013-03-26T19:09:51.940
> 
> 标签：javascript, backbone.js, dust.js

我有一个 JSON 格式，你可以在下面看到。我在循环和定义正确的循环点时遇到了麻烦，因为我对对象中的数组和复杂的 JSON 没有那么丰富的经验。

**我主要寻找的是关于我的集合的 parse / toJSON 部分的一些指针，或者我可能在这个特定结构上失败的其他地方。**

我正在尝试使用主干和灰尘循环来自事件和类型名称的值和输出数据。通常我可以通过在视图中定义集合来循环我的 JSON，例如这样调用：

```
dust.render("dialog-decoderevents-items", { events : currentUser.eventList.toJSON() }, function(err, out) {
            _this.$(".ab-tvg-prg-opt-future").append($(out));
        }); 
```

这通常允许我在灰尘中循环并输出如下数据：

```
{#events}
{#tvProgram}{name}{/tvProgram}
{type}
{/events} 
```

我已经在这个 JSON 上使用数组和当前上下文尝试[了灰尘示例](http://linkedin.github.com/dustjs/test/test.html)，它会毫无问题地输出一些东西。我认为问题在于我定义的模型和集合的起点。

我的集合中现在既有 parse 函数又有 toJSON 函数。但我也不知道在模型上定义什么作为 id，因为正如您所见，id 是在事件内部定义的，而不是在我通常使用它的外部定义的。想法？所有数据如下。

**JSON**

```
{
"status": null,
"value": [
{
"event": {
    "id": "RWtzdHJlbSBvcHBkcmFnZWxzZTxsZHR2cGQ+MTM2NDMwMDQwMDAwMDxsZHR2cGQ+MTM2NDMwNDAwMDAwMA==",
    "name": "A glorious event",
    "description": "Some long description about the event",
    "startTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 13,
        "minute": 20,
        "seconds": 0
    },
    "endTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 14,
        "minute": 20,
        "seconds": 0
    }
},
"type": "Party"
},
{
"event": {
    "id": "Rmx5aW5nIFdpbGQgQWxhc2thPGxkdHZwZD4xMzY0MzA2NDAwMDAwPGxkdHZwZD4xMzY0MzEwMDAwMDAw",
    "name": "A glorious event",
    "description": "Some long description about the event",
    "startTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 15,
        "minute": 0,
        "seconds": 0
    },
    "endTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 16,
        "minute": 0,
        "seconds": 0
    }
},
"type": "Birthday"
},
{
"event": {
    "id": "UG9pcm90PGxkdHZwZD4xMzY0MzE2NjAwMDAwPGxkdHZwZD4xMzY0MzE5NjAwMDAw",
    "name": "A glorious event",
    "description": "Some long description about the event",
    "startTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 17,
        "minute": 50,
        "seconds": 0
    },
    "endTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 18,
        "minute": 40,
        "seconds": 0
    }
},
"type": "Birthday"
},
{
"event": {
    "id": "VGhlIEJpZyBCYW5nIFRoZW9yeTxsZHR2cGQ+MTM2NDMxOTAwMDAwMDxsZHR2cGQ+MTM2NDMyMDgwMDAwMA==",
    "name": "A glorious event",
    "description": "Some long description about the event",
    "startTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 18,
        "minute": 30,
        "seconds": 0
    },
    "endTime": {
        "year": 2013,
        "month": 3,
        "date": 26,
        "hour": 19,
        "minute": 0,
        "seconds": 0
    }
},
"type": "Birthday"
}]} 
```

**模型**

```
var mainEvent = Backbone.Model.extend({
    idAttribute : "id",

    defaults : {
        type: null,
        event : {
            id : null,
            name: null,
            description: null,
            channelId: null,
            startTime: null,
            endTime: null
        }
    }

}); 
```

**收藏**

```
var eventCollection = Backbone.Collection.extend({
model: mainEvent,

parse : function(json, options) {            
    var retr = [], tmp;

    if (json.status === ajaxStatus.success) {

        switch(options.action) {
              default:
                retr = json.value;
                break;    
        }

        if (options.action === "events") {
            currentUser.eventList = new eventCollection(retr, { action : "events" });
        }

    }
    else if (json.status === ajaxStatus.notAuthenticated) {
        currentUser.trigger("notLoggedIn");
        return [];
    }
    return retr;
},
toJSON : function(){

    var ret = this.constructor.__super__.toJSON.call(this);

    // _.each(ret, function (item) {  
    //     console.log('l1'+item);
    //     ret.push(item);

    // });            
    return ret;
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:03:10.927

快速阅读您的问题后的想法（用一粒盐来处理，因为我以前从未使用过灰尘或骨干）：

您不能只创建一个控制器来存储每个事件对象的内容数组吗？这样，当您提取 JSON 文件时，您所要做的就是将每个事件添加到控制器，并在 HTML 中对其进行迭代。然后，您可以使用 id = event[id] 或其他内容提取 id。

编辑：这是 AJAX 的一个例子，我知道你没有使用它，但解析位至少应该有帮助：

```
function getParties() {
  $.ajax({
    url: 'json/party.json',
    dataType: 'json',
    async: false,
    success: function(data) {
      console.log("Data:", data.value);
      for (var i=0, occurence; occurence = data.value[i]; i++) {
        var event = {};
        event.type = occurence.type;
        for (var key in occurence.event) {
          event[key] = occurence.event[key];
        }
        console.log("Event:", event);
        // Do something with event... Maybe add to content array.
      }
    }
  });
} 
```

“事件”现在应该是简单的 javascript。如果你想访问其中的一个已知字段，你可以说 event["id"] 例如。要遍历所有值，请使用以下循环。

```
for (var key in event) {
  console.log("Key: " + key + ", Value: " + event[key]);
} 
```

您还应该能够使用 {id} 获取值，例如，在 Backbone 中。当创建的“事件”对象被推送到某个控制器的内容数组时，类似的东西在 Ember 中起作用，这就是我正在使用的。

# asp.net-mvc - jqPlot 的 MVC HTML 帮助程序包装器

> ID：15645424
> 
> 赞同：1
> 
> 时间：2013-03-26T19:09:52.500
> 
> 标签：asp.net-mvc, razor, partial-views, html-helper, jqplot

我希望围绕 jqPlot 创建一个 MVC 包装器。

我想要一个辅助对象来呈现所需的 html 容器元素和绘制图表所需的 java 脚本。

看起来像这样的东西：

```
@Html.jqPlot()
     .ChartType(eChartTypes.PieChart)
     .ChartData(someData)
     .RenderChart(); 
```

现在我只处于初始设计阶段，我知道 jqPlot 对象应该是什么样子才能实现这一点，我遇到的问题是应该发出的 java 脚本，以使用 jqPlot 绘制实际图表。

`.RenderChart()`假设我将在我的方法中呈现以下脚本

```
public string RenderChart()
{
   string chartCode = string.format(@"
      <script type="text/javascript" src="../src/plugins/jqplot.canvasTextRenderer.min.js"></script>
      <script type="text/javascript" src="../src/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
      $(document).ready(function(){
         var plot1 = $.jqplot ('{0}', [{1}]);
      });
   ",this.ChartGuid, this.ChartData);
   return chartCode;
} 
```

上面不是实际的代码，只是这个想法的一般表示。

所以问题是我不希望 Helper 将 JS 代码发送到 Html 文档的正文中，而且我不能让它这样做，因为一些必需的脚本可能位于 html 的底部（最好实践状态）。

有什么建议么 ？如果情况需要，使用 HTML 助手发出 JS 代码的最佳方法是什么（比如这个）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:47:37.247

I think, listening to an even will be a possible solution, in this case the even of outputting or finishing the rendering of the footer. so maybe your code will give as an option to listen to an event and render at that moment, but this is of course platform dependent. I also worked on a php wrapper you can fork it here: [https://github.com/oumsofiane1/jqplotPHPwrapper.git](https://github.com/oumsofiane1/jqplotPHPwrapper.git) and just implemented a helper, but of course you can extend that :-)

Hope this helps

# android - Google In app Billing V3 错误代码

> ID：15645429
> 
> 赞同：2
> 
> 时间：2013-03-26T19:10:05.640
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

**在应用计费 v3**中，在多个场景中返回响应代码**(BILLING_RESPONSE_RESULT_USER_CANCELED:1) -1005 。**

启动购买流程会打开类似 Google Play 的 UI。每当此 UI 中发生错误时，例如网络断开/超时/物品不可用/物品已购买，都会弹出一个对话框以指示错误。单击 OK 时，**响应代码：User Cancelled(1)**总是在 OnActivityResult Intent extras 中返回。根据 Android 开发者网站上的参考资料，这应该只在用户取消活动/对话框时才会发生，我显然不会这样做。

我想分离出不同的错误并在我的应用程序中单独处理它们。返回一个错误代码并没有帮助。有人遇到过吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T20:59:52.660

根据记录，这似乎是 Google Play 客户端的问题。Google 已开始将 GP 客户端更新为 4.0+ 版本，并且该错误似乎已修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T04:07:52.760

TrivialDrive 演示测试值 Activity.RESULT_CANCELED 的 onActivityResult() 回调，并假设如果这是返回的值，则用户已取消。

这是一个不正确的假设，因为如果该活动结果中的 responseCode 是 BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED (=7)，那么 Activity.RESULT_CANCELED 表示应用内计费服务将不允许购买，因为该项目已经拥有。此响应代码对我有用。

但是，一旦消除了这种可能性，我发现假设用户已取消是安全的。但是，我最近还没有检查过 Google 是否已使 BILLING_RESPONSE_RESULT_USER_CANCELED 响应代码直接可测试且可靠。

# zend-framework - 视图中的 renderWidget 什么都不做

> ID：15645433
> 
> 赞同：0
> 
> 时间：2013-03-26T19:10:29.103
> 
> 标签：zend-framework, socialengine

我正在尝试为成员添加一种对文章发表评论的方式。从我收集到的信息来看，它应该像使用一样简单：

```
<?php echo $this->content()->renderWidget('modulename.widget-name') ?> 
```

所以这是我的尝试：

```
<div>

<?php
echo("<h2>".$this->news['title']."</h2>");

print_r($this->news['news']);

echo $this->content()->renderWidget('core.comment')

?>   

</div> 
```

我似乎只`<div>`在页面底部得到一个空标签。

有谁知道我做错了什么？

编辑：适用于`'core.admin-dashboard'`但不适用`'core.comment'`。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:00:59.893

小部件 core.comment 仅当您放置此小部件的页面具有主题并且该主题有“评论”和“喜欢”方法时才会出现：

```
if( !($subject instanceof Core_Model_Item_Abstract) ||
    !$subject->getIdentity() ||
    (!method_exists($subject, 'comments') && !method_exists($subject, 'likes')) ) {
  return $this->setNoRender();
} 
```

希望这可以帮助。

# python - python/perl/shell 脚本中的条件代理服务器

> ID：15645435
> 
> 赞同：0
> 
> 时间：2013-03-26T19:10:43.010
> 
> 标签：python, perl, http, shell, proxy

我有一个应用程序查询主机名：端口以获取某些服务，即 Web 服务。在开发过程中，一些服务不可用或由第三方构建，因此为了开发我们的应用程序，我正在考虑使用带有soapUI的模拟服务作为某些服务的存根。

问题是我只能将我的应用程序指向一个方向一次，所以如果我指向模拟服务，我需要确保模拟服务正在模拟**所有**服务（> 50），这是太多的开销。因此，我正在考虑将我的应用程序指向代理服务器，该代理服务器会将一些请求重定向到模拟服务并保留给实际的服务提供者。有什么办法可以通过一个简单的脚本来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:43:30.193

当然。使用 Perl 的粗略草图：

```
#!perl
use strict;
use warnings;
use Plack::App::Proxy;

my $live_proxy = Plack::App::Proxy->new(
    remote => "http://live.soap.service.com:80/"
);

my $soapui_proxy = Plack::App::Proxy->new(
    remote => "http://localhost:4567/"
);

sub {
    my $env = shift;
    if ($env->{REQUEST_URI} =~ m[^/some/path]) {
        return $soapui_proxy->($env);
    } else {
        return $live_proxy->($env);
    }
}; 
```

安装[Plack](http://p3rl.org/Plack)并以`plackup filename`. 它构建了两个代理应用程序，一个将所有请求转发到实时服务 URL，另一个将所有请求转发到您的模拟服务 URL。然后包装应用程序根据 URL（或基于其他内容，如果需要）选择将任何给定请求分派到哪个应用程序。

# php - 错误：无法重新声明类 Facebook

> ID：15645436
> 
> 赞同：0
> 
> 时间：2013-03-26T19:10:45.727
> 
> 标签：php, facebook, symfony, facebook-php-sdk

像许多其他人一样，我在使用默认的 facebook.php 文件时遇到以下错误：

```
Fatal error: Cannot redeclare class Facebook in C:\wamp\www\symfony\src\Acme\MainBundle\Controller\facebook.php on line 160 
```

第 160 行是 facebook.php 中类声明的结尾

## 这是我的代码：

```
 require_once("Facebook.php");
    $config = array();
    $config['appId'] = '479914672022732';
    $config['appId'] = 'd451285c1c38126710980d2b7f2b43b4';
    //everything works just fine up until here. This causes the error.
    $facebook = new Facebook($config); 
```

我该如何解决这个错误？

## 我试过的：

确保项目中没有其他 facebook 类

更改 require_once、include_once 等。

使用 if 语句不需要文件或声明 facebook 变量（如果它已经存在）

## 研究：

[如何在 Zend Framework 2 中使用 Facebook PHP SDK](https://stackoverflow.com/questions/13030026/how-to-use-facebook-php-sdk-with-zend-framework-2)

以及许多其他帖子，但它们与 drupal、zend、wordpress 等框架有关。

## 我学到了什么：

使用 facebook php sdk 的一个好方法是使用 composer 将其引入项目。然后在定义 $facebook 变量时。确保使用反斜杠，所以它：

```
$facebook = new /Facebook($config); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:30:05.147

如果捆绑包为您执行此操作，为什么要尝试它？

查看：

[FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)

# c++ - 在哪里将比较运算符的重载定义/声明为库中的非成员函数？

> ID：15645440
> 
> 赞同：0
> 
> 时间：2013-03-26T19:10:55.043
> 
> 标签：c++, operator-overloading

假设我有一个名为“Myclass”的类，重载比较运算符是有意义的。我需要将这个类放入一个名为“libmyclass”的库中，我想在该库中编译/链接一个名为“myprog”的程序。

按照[建议](https://stackoverflow.com/q/4421706/597069)，我选择将比较运算符重载为非成员函数。我选择在头文件中声明它们并在实现文件中定义它们，但是在链接步骤中找不到它们：“未定义对 `operator<(...)' 的引用”（见下文）。我应该怎么做才能解决这个问题？

这是文件“myclass.h”：

```
#ifndef MYCLASS_H
#define MYCLASS_H

#include <cstdlib>

#include <string>
using namespace std;

class Myclass {
private:
  size_t x_;
public:
  Myclass(void);
  Myclass(const size_t & x);
  const size_t & GetValue(void) const { return x_; };
};

bool operator==(const Myclass& lhs, const Myclass& rhs);
bool operator!=(const Myclass& lhs, const Myclass& rhs);
bool operator< (const Myclass& lhs, const Myclass& rhs);
bool operator> (const Myclass& lhs, const Myclass& rhs);
bool operator<=(const Myclass& lhs, const Myclass& rhs);
bool operator>=(const Myclass& lhs, const Myclass& rhs);

#endif //MYCLASS_H 
```

这是文件“myclass.cc”：

```
#include "myclass.h"

Myclass::Myclass(void)
{
}

Myclass::Myclass(const size_t & x)
{
  x_ = x;
}

inline bool operator==(const Myclass& lhs, const Myclass& rhs)
{
  return(lhs.GetValue() == rhs.GetValue());
}

inline bool operator< (const Myclass& lhs, const Myclass& rhs)
{
  return(lhs.GetValue() < rhs.GetValue());
}

inline bool operator!=(const Myclass& lhs, const Myclass& rhs){return !operator==(lhs,rhs);};
inline bool operator> (const Myclass& lhs, const Myclass& rhs){return  operator< (rhs,lhs);};
inline bool operator<=(const Myclass& lhs, const Myclass& rhs){return !operator> (lhs,rhs);};
inline bool operator>=(const Myclass& lhs, const Myclass& rhs){return !operator< (lhs,rhs);}; 
```

这是文件“myprog.c”：

```
#include <cstdlib>

#include <iostream>
using namespace std;

#include "myclass.h"

int main (int argc, char ** argv)
{
  Myclass * pt_obj1 = new Myclass(1);
  Myclass * pt_obj2 = new Myclass(2);
  if (*pt_obj1 < *pt_obj2)
    cout << "obj1 < obj2" << endl;
  else
    cout << "obj1 >= obj2" << endl;
  delete pt_obj1;
  delete pt_obj2;
  return EXIT_SUCCESS;
} 
```

这是文件“Makefile_lib”：

```
PROJECT=libmyclass.a
SOURCES=myclass.cc
CC=g++
CFLAGS=-Wall -Wextra -g

OBJECTS=$(SOURCES:.cc=.o)

all: $(PROJECT)

$(PROJECT): $(OBJECTS)
            ar -cvq $(PROJECT) $(OBJECTS)

.cc.o:
        $(CC) $(CFLAGS) -c $< -o $@

clean:
        rm -f $(OBJECTS) $(PROJECT) 
```

这是文件“Makefile_exe”：

```
PROJECT=myprog
SOURCES=myprog.cc
LIB=libmyclass.a
CC=g++
CFLAGS=-Wall -Wextra -g

OBJECTS=$(SOURCES:.cc=.o)

all: $(PROJECT)

$(PROJECT): $(OBJECTS) $(LIB)
            $(CC) $(OBJECTS) -L. -lmyclass

.cc.o:
        $(CC) $(CFLAGS) -c $< -o $@

clean:
        rm -f $(OBJECTS) $(PROJECT) 
```

最后，这是我使用的命令和我得到的错误：

```
$ make -f Makefile_lib clean
rm -f myclass.o libmyclass.a
$ make -f Makefile_lib
g++ -Wall -Wextra -g -c myclass.cc -o myclass.o
ar -cvq libmyclass.a myclass.o
a - myclass.o
$ make -f Makefile_exe clean
rm -f myprog.o myprog
$ make -f Makefile_exe
g++ -Wall -Wextra -g -c myprog.cc -o myprog.o
myprog.cc:8: warning: unused parameter ‘argc’
myprog.cc:8: warning: unused parameter ‘argv’
g++ myprog.o -L. -lmyclass
myprog.o: In function `main':
/home/me/src/myprog.cc:12: undefined reference to `operator<(Myclass const&, Myclass const&)'
collect2: ld returned 1 exit status
make: *** [myprog] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:22:54.877

您的代码自相矛盾。

`myprog.c`编译时，不能`operator<(Myclass const&, Myclass const&)` **内联**。定义无处可见。

`myclass.cc`编译时，不会`operator<(Myclass const&, Myclass const&)` **为链接器生成，**因为您承诺它将被内联。

解决方案是删除`inline`这些函数，或者将定义移动到标题中，以便它们可以真正内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:18:41.100

您应该将所有`inline`定义移动到声明下方的头文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:20:29.673

内联将放在 .h 文件中

或删除 .cpp 文件中的内联

并且可能

```
inline bool operator!=(const Myclass& lhs, const Myclass& rhs){return !(lhs==rhs);} 
```

比运算符形式简单。

并且不需要放一个 ; 在函数定义之后。

# android - 如何使用 .txt 文件填充 SQLite 数据库？

> ID：15645441
> 
> 赞同：-2
> 
> 时间：2013-03-26T19:10:55.107
> 
> 标签：android, sqlite

我正在编写一个安卓应用程序。我有一个 txt 文件，其中包含需要放入 sqlite 数据库的值。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:21:37.413

几点：

*   将 .txt 文件作为资产包含在您的应用中。这将允许您使用 AssetFileDescriptor 打开它。
*   您必须从 .txt 文件中读取数据并将行插入到数据库中。如果您对 .txt 文件的格式有一定的控制权，这样做会更容易。例如，如果可以，您应该在值之间插入逗号，并在每行数据的末尾插入换行符。
    *   必要时使用事务。
    *   在后台线程上执行操作。我建议使用 IntentService。

# wpf - 将 WPF 应用程序部署到企业中的多个桌面

> ID：15645444
> 
> 赞同：0
> 
> 时间：2013-03-26T19:11:04.920
> 
> 标签：wpf, deployment, permissions, acl

我正在跨企业的多个桌面部署 .NET 应用程序。并非每个人都具有管理权限，并且应用程序不会执行任何需要相同的特殊操作。

但是启动应用程序本身我得到以下异常：

解析 C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config 时出错。解析器返回错误 0X80070005。

看起来应用程序和/或用户无权访问 machine.config。我在我的个人笔记本电脑（Windows 7）上试过这个。

尽管是管理员，但感谢 UAC，我也遇到了同样的例外。我们如何解决这个问题？

# .net - 安装程序如何检查 GAC 中是否安装了程序集，如果是，它的版本？

> ID：15645446
> 
> 赞同：3
> 
> 时间：2013-03-26T19:11:09.553
> 
> 标签：.net, windows, inno-setup, gac

标题说明了一切……最好用于 Inno Setup。我找到了几种方法，但似乎没有一种特别方便。

1.  使用 GAC 的目录结构直接检查 DLL。这不是官方方式，出于各种/明显的原因不鼓励这样做。

2.  使用该`gacutil`程序。不是框架的一部分，只有 SDK，并且不太可能接受重新分发。

3.  使用[`Fusion API`](http://msdn.microsoft.com/en-us/library/ms404523.aspx)类似于 gacutil。需要 COM 交互，但似乎是我所追求的官方青睐的方式。

**编辑**
只是一个澄清：我想检查可能已经安装的 GAC 程序集的存在/版本，以便我可以确定是否安装了我的应用程序的所有要求（或者我是否需要运行单独的安装来安装这些程序集） .

# xml - 如何使用 XPath 在祖先或自身节点列表中查找最近的祖先

> ID：15645449
> 
> 赞同：7
> 
> 时间：2013-03-26T19:11:12.820
> 
> 标签：xml, xslt, xpath

我有一个包含重复元素的结构，如下所示：

```
<a>
  <b>
    <a>
    </a>
  </b>
  <a>
    <b>
       <a>
         <c att="val" />
       </a>
    </b>
  </a>
</a> 
```

假设 c-node 是 $currentNode，当我使用 XPath 时

```
<xsl:value-of select="($currentNode/ancestor-or-self::a)" /> 
```

我得到一个与表达式匹配的节点的无序列表。我需要的是始终让节点最靠近树，如最深的分支或最高的@level。

不幸的是，我不能像这样使用 XPath 2 max-function：

```
<xsl:value-of select="($currentNode/ancestor-or-self::a)[max(@level)]" /> 
```

请注意，最近的 a 节点并不总是正好在上下文之上，只是在上面的某个地方......

任何建议表示赞赏！

问候亚历克斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T19:33:24.133

我认为您会得到一组有序的节点，从父节点到祖先节点。

尝试`$currentNode/ancestor-or-self::a[1]`获取 c att="val" 的父级。

# css - Primefaces 评分中单星的工具提示

> ID：15645450
> 
> 赞同：0
> 
> 时间：2013-03-26T19:11:16.303
> 
> 标签：css, user-interface, primefaces

我想知道是否可以在使用 Primefaces 为评分中的每颗星实现工具提示方面获得一些帮助。到目前为止，我的工具提示适用于整个评分块，所以所有 5 颗星本质上都有相同的工具提示。有谁知道一种优雅的方式来为每颗星应用不同的工具提示？与我一起工作的一些人建议使用 onHover() 之类的状态，如果所有其他方法都失败了（以一种相当粗暴的方式），但如果可能的话，我想以更优雅的方式来做。

这是当前代码，它有一个工具提示，当任何星星悬停时会弹出。

```
<h:outputLabel for="developerScore">Developer Score:</h:outputLabel>
<p:rating value="#{scoreCard.developerScore}" stars="#{uiSettingsBean.ratingMax}" cancel="false" readonly="#{otherReadOnly}" id="developerScore">  
    <p:tooltip for="developerScore" showEffect="fade" hideEffect="fade" >
         <h:outputText value="Developer Score Rubric"/><br />
         <h:outputText value="1 Star: Abysmal"/><br />
         <h:outputText value="2 Star: Needs Improvement"/><br />
         <h:outputText value="3 Star: Doing Good"/><br />
         <h:outputText value="4 Star: Above Average"/><br />
         <h:outputText value="5 Star: Exceptional"/>
    </p:tooltip>
</p:rating> 
```

任何人，任何帮助表示赞赏，并感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-21T17:54:43.717

我也有类似的要求，我得到了这个 SO，我很惊讶地发现即使在 3 年后也没有接受的答案！

Primefaces（6.0 版）仍然没有这个功能。我希望它会在下一个版本中添加。

经过一番搜索后，我终于创建了一个自定义复合组件。

这是我拥有的解决方案/解决方法。优雅与否，我把它留给你:)。

顺便说一句，这适用于 JSF 2.2。对于旧版本的 JSF，您可能需要添加更多文件才能使复合组件正常工作。（taglibs 等）。

首先，我们必须为评级创建我们自己的复合组件（别担心，它只有两个文件）。它只不过是`p:rating`和`p:tooltip`结合在一起。以下是两个文件：

1.  **ratingComposite.xhtml**
2.  **ratingComposite.js**

将这两个文件添加到项目的 JSF 资源文件夹中。（注：customizedprimefaces 是你的资源库名称）

```
<YourWarFile>\resources\customizedprimefaces\ratingComposite.xhtml     
<YourWarFile>\resources\js\ratingComposite.js 
```

（如果你不熟悉复合组件及其路径，那么我建议先学习它，在 JSF 2.2 中很容易。）

并开始在您的页面中使用它。

**我的页面.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"*
        xmlns:cp="http://java.sun.com/jsf/composite/customizedprimefaces"
    >
...
<cp:ratingComposite id="ratingId" widgetVar="ratingIdWgt" 
    stars="4" 
    value="#{bean.rating}" 
    tooltipValue="Ugly | Bad | OK | Good"
 /> 
```

（注意 xmlns 包括`xmlns:cp="http://java.sun.com/jsf/composite/customizedprimefaces"`：）

这与`p:rating`组件相同，唯一的区别是*tooltipValue*属性，该属性接受管道分隔的工具提示消息，其顺序与评级中的星星相对应。

## 这是对javascript文件中发生的事情的粗略解释：

1.  通过管道（|）拆分`p:tooltip`元素值并保存在一个数组（tooltipTxt）中，该数组保存 `<cp:ratingComposite/>`页面中每个管道分隔的工具提示。该数组由评级组件 ID 索引。
2.  为评级组件中的每个星绑定自定义*hoverIn*和*hoverOut事件处理程序。*
3.  在**hoverIn 上**，从数组（*tooltipTxt*）（在与当前悬停的星对应的索引处）获取消息并替换为`<p:tooltip>` 消息。在当前悬停的星星的位置显示`<p:tooltip>`消息。
4.  在**hoverOut 上**，只需隐藏`<p:tooltip>`消息。

**ratingComposite.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui"
   xmlns:composite="http://java.sun.com/jsf/composite">

   <composite:interface>
      <composite:attribute name="id"  />
      <composite:attribute name="value"  />
      <composite:attribute name="readonly"  />
      <composite:attribute name="widgetVar" />
      <composite:attribute name="stars" type="java.lang.Integer" />
      <composite:attribute name="tooltipValue"  
        shortDescription="A pipe(ie.:|) seperated list of tooltip messages. \nEach message in list corresponds to a star in the rating componant." />
    <!-- Add other attributes of p:rating component here. -->
   </composite:interface>

   <composite:implementation>
   <h:outputScript name="js/ratingComposite.js" target="head" />
   <script type="text/javascript">
    <!--
        $(document).ready(function(){
            rating.init('#{cc.namingContainer.clientId}:_#{cc.attrs.id}', '#{cc.namingContainer.clientId}:_#{cc.attrs.id}-ttId');
        });

    //-->
    </script>
     <p:rating id="_#{cc.attrs.id}" widgetVar="#{cc.attrs.widgetVar}" 
        readonly="#{cc.attrs.readonly}"
        value="#{cc.attrs.value}" stars="#{cc.attrs.stars}" />
    <p:tooltip id="_#{cc.attrs.id}-ttId" for="_#{cc.attrs.id}" trackMouse="true" 
    value="#{cc.attrs.tooltipValue}"  />
   </composite:implementation>
   </html> 
```

**ratingComposite.js**

```
rating = {
        tooltipTxt:{},

        init:function(ratingId, tooltipId){
            var ratingIdjq = PrimeFaces.escapeClientId(ratingId);
            var tooltipIdjq = PrimeFaces.escapeClientId(tooltipId);
            var _self = this;
            this.tooltipTxt[tooltipId] = $(tooltipIdjq).find(".ui-tooltip-text").html(),

            $(ratingIdjq).find(".ui-rating-star").each(function(){
                $(this).hover(function(event){return _self.hoverIn(event,tooltipId)}, 
                                function(event){$(tooltipIdjq).hide();} //This is on Hoverout
                            );

            });
        },

        hoverIn:function(event, tooltipId){
            var tooltipIdjq = PrimeFaces.escapeClientId(tooltipId);
            var ratingArray = this.tooltipTxt[tooltipId].split("|");

            var tooptipDiv = $(tooltipIdjq);
            tooptipDiv.show();
            this.setCoordinate(tooptipDiv, event.pageX, event.pageY);
            var currEleIndx = $(event.currentTarget).parent().find(".ui-rating-star").index(event.currentTarget);
            var currTooltip = ratingArray[currEleIndx].trim();
            tooptipDiv.find(".ui-tooltip-text").html(currTooltip);
        },

        setCoordinate:function(tooptipDiv, x, y){
            var pos = {"left":x, "top":y};
            tooptipDiv.offset(pos);
        }

} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:37:40.387

利用`<h:outputText value="1 Star:Abysmal:" title="1 Star: Abysmal"/>`

# php - 如何减少 PHP str_replace 的冗长

> ID：15645451
> 
> 赞同：-4
> 
> 时间：2013-03-26T19:11:18.790
> 
> 标签：php, string, replace

我有以下代码。

```
$obj->symbol = str_replace('PR.', 'p', $obj->symbol);
$obj->symbol = str_replace('UN.', 'u', $obj->symbol);
$obj->symbol = str_replace('RT.', 'r', $obj->symbol);
$obj->symbol = str_replace('WT.', 'w', $obj->symbol);
$obj->symbol = str_replace('PR', 'p', $obj->symbol);
$obj->symbol = str_replace('UN', 'u', $obj->symbol);
$obj->symbol = str_replace('RT', 'r', $obj->symbol);
$obj->symbol = str_replace('WT', 'w', $obj->symbol); 
```

如您所见，这看起来非常丑陋。我怎样才能把它减少到更少的行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T19:13:15.557

You can pass an array into the function. Do something like this:

```
$obj->symbol = str_replace(array('PR.','UN.'), array('p','u'), $obj->symbol); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T19:17:35.073

我最推荐的是具有相同替换的冷凝线：

```
$obj->symbol = str_replace( array( 'PR.', 'PR'), 'p', $obj->symbol); 
```

至少这仍然是可维护和可读的。如果您将其压缩为包含两个大型数组的一行，则应将该数组存储为`key => value`替换映射，并[`strtr()`](http://php.net/strtr)改用：

```
$replacements = array(
    'PR'  => 'p',
    'PR.' => 'p' 
    // etc
);

$obj->symbol = strtr( $obj->symbol, $replacements); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T01:36:21.370

我参加聚会有点晚了，但我一直是 preg_replace_callback() 的粉丝：

```
$good_string = preg_replace_callback('/([PURW])[RNT]\.?/',function ($matches){
  return strtolower($matches[1]);
},$bad_string); 
```

# graph-algorithm - 给定网络是否具有唯一的最小切割？

> ID：15645462
> 
> 赞同：4
> 
> 时间：2013-03-26T19:11:50.903
> 
> 标签：graph-algorithm, max-flow, network-flow

让 G = (V, E) 是一个网络，其中 s 和 t 是源和汇。设 f 是 G 中的最大流。找到一个算法来确定 G 中是否存在唯一的最小割。

我设法在这个网站上找到了一个类似的问题：

[确定最小切割的唯一性](https://stackoverflow.com/questions/7673711/determining-the-uniqueness-of-a-min-cut)

那里给出的答案摘要：

在残差图中找到从 s 可达的所有顶点，我们在 G 中找到了一个最小割 (S,T)。

查看相同的残差图，从 t 开始。以箭头的相反方向查看从 t 可到达的顶点组（表示可以到达 t 的所有顶点）。

这组也是最小切。

如果该剪辑与您的原始剪辑相同，则只有一个。否则，您只找到了 2 个剪辑，所以原来的剪辑不可能是唯一的。

我不明白为什么如果剪辑与原始剪辑相同，那么剪辑就是独一无二的。谁能向我们保证没有其他最小切割？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-23T11:46:41.133

实际上，我不太了解该解决方案。但在最初的问题中，davin 提供的第二个答案是绝对正确的。

我只是复制粘贴到这里

```
Given a minimum S-T cut, (U,V) with cut-edges E', we make one simple observation:
If this minimum cut is not unique, then there exists some other minimum cut with 
a set of cut-edges E'', such that E'' != E'.

If so, we can iterate over each edge in E', add to its capacity, recalculate the
max flow, and check if it increased.

As a result of the observation above, there exists an edge in E' that when
increased, the max flow doesn't increase iff the original cut is not unique. 
```

**我自己的一些解释**：

你实际上需要证明的是

```
there exists an edge in E' that when increased, the max flow doesn't increase
<=>
the original cut is not unique 
```

=>：
你将边的容量增加`e`1，计算新的最大流量，它保持不变，这意味着它`e`不在新的最小切割中。（如果`e`在，根据最小割的性质，f(e)=e的容量，这导致增加）。由于`e`不在新的最小割中，它也是原图的最小割，与我们知道的割具有相同的体积。因此，原始割不是唯一的。

<=：
原始剪切不是唯一的（我们称它们为`E`and `E'`），这意味着您可以找到`e`在 in`E`但不在的边`E'`。然后你只需将容量增加`e`1。在计算新图的最小切割时，`E'`已经存在。由于`E'`不包含 edge `e`，因此 max flow 毫无疑问保持不变。

希望你能理解 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-20T15:20:23.830

您谈到的算法比建议的算法更有效。算法：

对于图 G=(V,E)

1.  求图中的最大流量，令 R 为最后一个残差图。
2.  从 s 运行 BFS（查找从 s 可到达的节点），我们称它们为 X
3.  从 t 用反向边运行 BFS（找到有到 t 的路径的节点），我们称它们为 Y。
4.  如果 X + Y = V ('+' as in union) 返回 TRUE，否则返回 FALSE

一个简短的解释：

在第 2 步中，我们找到确定最小割 (X, V/X) 的节点。X 是我们最后一个残差图中从 s 可到达的所有节点的集合。在步骤 3 中，我们在最后一个残差图中找到 t 可以到达的节点集。该集合定义了最接近 t 的最小切割 (VY,Y)。在第 4 步中，从两端（X + Y = V）进行相同的切割，则图具有唯一的最小切割。

复杂性主要是找到最大流量。使用 Edmonds Karp O(|E|^2|V|) 和 BFS O(|E| + |V|)。

建议答案的复杂度为 O(|V||E|^3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-28T23:56:06.233

通过矛盾证明第一种方法的另一种选择：->：假设有一个带有切边 E' 的最小 (S,T) 切。在将属于 E' 的边 e 的容量增加 1 并发现最大流量保持不变后，导致 e 不在新的最小割中。（如果 e 在 E' 中，根据 min-cut 的性质，最大流量会增加）。然而一开始我们说 e 在 E' - 矛盾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-23T20:28:59.000

到目前为止，对原始帖子中提出的算法的所有讨论（这里和复制它的帖子中的 d ）似乎都没有真正证明如果两个最小切割相同，那么它就是唯一的最小值切。但这并不难！

好的，那么这两个最小削减是多少？我们运行最大流量算法并查看残差图。第一个切割是 (S,T=VS)，其中 S 是仅使用具有剩余容量的边可以从源到达的所有节点的集合。第二个切点是 (VT,T)，其中 T 是仅使用具有剩余容量的边可以到达汇的所有节点的集合。

如果这两个切割不同，那么显然不止一个最小切割。但是如果它们相同，那么我们可以使用 laike9m 描述的技术来证明这是**唯一**的最小割。为什么？好吧，根据上一段中 S 和 T 的定义，切割中的每条边 e=(v0->v1) 都有一条路径 s->v0 和一条路径 v1->t 具有剩余容量。因此，如果我们增加 e 的容量，我们知道我们将增加最大流量。由于这对于切割中的每条边 e 都是正确的，这意味着这个最小切割是唯一的。

# javascript - javascript倒计时在不同浏览器上同步

> ID：15645465
> 
> 赞同：2
> 
> 时间：2013-03-26T19:11:56.797
> 
> 标签：javascript

如果这个问题有点棘手，我很抱歉，但我没有其他方法可以问它，而且我是 javascript 世界中的绝对菜鸟。

我有这个 javascript 计数器，有人帮助我在 stackoverflow 上收集它，它工作正常，但倒计时计时器将在不同的浏览器上从头开始。

即，当我在 Firefox 上查看它时，它会继续倒计时，并且会继续正常工作。假设计时器设置为倒计时一天。在 Firefox 上，它会显示 23:24 小时/分钟，但如果我打开一个新浏览器（任何浏览器），它会显示计时器 23:59 小时/分钟，它会从那里开始倒计时......即使倒数计时器已经在同一页面上运行！！

这是代码：

```
 <script type="text/javascript">
var EXPIRY = parseInt(new Date().getTime()/1000) + 24*60*60;
var counter = null;
var counter_interval = null;

function setCookie(name,value,days) {
    console.log("setting "+name+" "+value);
    var expires;
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires="+date.toGMTString();
    }
    else {
        expires = "";
    }
    document.cookie = name+"="+value+expires+"; path=/";    
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1,c.length);
        }
        if (c.indexOf(nameEQ) === 0) {
            return c.substring(nameEQ.length,c.length);
        }
    }
    return null;
}

function deleteCookie(name) {
    setCookie(name,"",-1);
}

function resetCounter() {
    EXPIRY = parseInt(new Date().getTime()/1000) + 24*60*60;
}

function stopCounter() {
    window.clearInterval(counter_interval);
    deleteCookie('Expiry');
}

function updateCounter() {
    var msg = '';
    curTime = parseInt(new Date().getTime()/1000);
    if (curTime < EXPIRY) {
        msg = convertSecondsToDays(EXPIRY - curTime);
    }
    else {
        EXPIRY = parseInt(new Date().getTime()/1000) + 24*60*60;
    }
    var el = document.getElementById('counter');
    if (el) {
        el.innerHTML = msg
    }
}

function convertSecondsToDays(sec) {
  var days, hours,rem,mins,secs;
  days =  parseInt(sec/(24*3600));
  rem = sec - days*3600
  hours = parseInt(rem/3600);
  rem = rem - hours*3600;
  mins = parseInt(rem/60);
  secs = rem - mins*60;
  return days +":" + hours +":"+mins + ":"+ secs + "";
}

function startCounter() {
    stopCounter();
    setCookie('Expiry', EXPIRY, 1);
    counter_interval = window.setInterval(updateCounter, 1000);
}

function init() {
    EXPIRY = getCookie('Expiry');
    if (!EXPIRY) {
        console.log("unable to find cookie");
        resetCounter();
    }
    startCounter();
}

init();
</script> 
```

你可以在这里的小提琴上查看它：http: [//jsfiddle.net/h2DEr/1/](http://jsfiddle.net/h2DEr/1/)

我怎样才能使它在所有浏览器上显示的时间与在同一页面上显示的时间相同？

谢谢

**编辑：**

我发现这段代码适用于 mysql。它工作正常，但不是倒计时，而是显示产品/项目在网站上发布了多少天/小时/分钟。这不需要任何javascript...

这就是我正在寻找的东西，但不是计数，而是需要倒计时：

```
 <?php

//list fields and convert to seconds

$countdown['days']=(5) * 24 * 60 * 60;

$countdown['hours']=(3) * 60 * 60;

// etc, etc

$countsum=time() + $countdown['days'] + $countdown['hours']; //and so on

// the above would be the timestamp to enter into the table

##########

// 'dumbed down' query
include "config/connect_to_mysql.php";

$result=mysql_query("SELECT * FROM tomProduct WHERE id='id';");

while ($row=mysql_fetch_assoc($result))

    $time=$row['date_added'] - time(); //this field would be a PHP timestamp (time())

$count=getdate($time);

$x=getdate(); //todays information

$count['mday'] -= $x['mday'];

$count['hour'] -= $x['mday'];

$count['minutes'] -= $x['minutes'];

echo "$count[mday] Days $count[hour] Hours $count[minutes] Minutes"; //etc

// untested, but should work

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:13:11.193

JavaScript is always running on the client. One instance of the timer has **no knowledge** of any other instance running elsewhere.

To synchronize time between different browsers, you would need server-side scripts. Using expiration-time-stamps in a server-side script in conjunction with JavaScript timers should give you the synchronization you are looking for.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:14:45.093

Cookie 不会从浏览器传输到浏览器。它们存储在网络浏览器中。

# vb.net - 在共享函数中使用对象

> ID：15645475
> 
> 赞同：0
> 
> 时间：2013-03-26T19:12:38.060
> 
> 标签：vb.net, design-patterns

请看下面的代码：

```
 Imports System.Data.SqlClient
Public Class Person
    Private id As String
    Private name As String

    Public Function check(ByVal personid As String) As Boolean
        'Do some checks on the person to see if it is ready for deletion
    End Function

    Public Shared Sub Delete()
        Dim v As New Vehicle
        Dim p As New Person
    End Sub
End Class

Public Class Vehicle
    Private vrm As String

    Public Function check(ByVal vehicleid As String) As Boolean
        'Do some checks on the vehicle to see if it is ready for deletion
    End Function

    Private Shared Sub Delete()
        Dim p As New Person
        Dim v As New Vehicle
        Dim objCommand As SqlCommand
        Dim objCon As SqlConnection
        Dim objDR As SqlDataReader
        Try
            Dim _ConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=true"
            objCon = New SqlConnection(_ConString)
            objCommand = New SqlCommand("SELECT * FROM Person were startdate < dateadd(year,-6," & Now & ")")
            objDR = objCommand.ExecuteReader
            Do While objDR.Read
                If p.check(objDR("id")) And v.check(objDR("vehicleid")) Then
                    'Execute delete statement, which deletes the person and vehicle
                End If
            Loop
            objDR.Close()
            objCommand.Connection = objCon
            objCon.Open()
            objCommand.ExecuteNonQuery()
        Catch ex As Exception
            Throw
        Finally

        End Try
    End Sub

End Class 
```

请注意，共享函数 (Person.Delete) 包含对 Person 和 Vehicle 的引用，并在 Person 和 Vehicle 中使用实例变量。基本上，在删除人员和车辆之前，需要对人员和车辆进行检查。

从 Shared 函数中引用 Person 和 Vehicle 是不好的做法吗？在 Delete 函数中使用实例变量是不好的做法。删除功能每天将删除成千上万的人和车辆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:34:30.507

让它们共享不一定是一种坏做法，但如果它们是共享的，那么将它们重构到自己的类中是一种很好的做法。`Shared`立即使全局函数在我看来不应该污染类签名。

因此，在我看来，这将是更好的做法：

```
Public Class Person
    Private id As String
    Private name As String
End Class

Public Class Vehicle
    Private vrm As String
End Class

Public Class PersonVanisher
    Public Shared Sub Delete()
        Dim v As New Vehicle
        Dim p As New Person
        ...
    End Sub

    Public Shared Function Check(personId As String) As Boolean
        ...
    End Function
End Class

Public Class VehicleCrusher
    Private Shared Sub Delete()
        Dim p As New Person
        Dim v As New Vehicle
        ...
    End Sub

    Public Shared Function Check(vehicleId As String) As Boolean
        ...
    End Function
End Class 
```

人们对此进行哲学辩论，但如果这是我的代码，我不会分享任何东西。我宁愿在`VehicleCrusher`需要时“新建”a，并在完成后让 .NET 处理所有内容。

# asp.net - 从 UpdatePanel 后面的 UserControl 向客户端发送文件

> ID：15645476
> 
> 赞同：0
> 
> 时间：2013-03-26T19:12:40.310
> 
> 标签：asp.net, user-controls, updatepanel, response

我在 UpdatePanel 内的 ASP.Net 页面（使用母版页）上有一个用户控件。该控件具有多种功能，包括按钮。该控件工作正常，除了一个链接，当他们单击它时我试图将文件发送给客户端。

该控件用一个对象实例化，该对象用于显示、操作，并且可以选择序列化以传输到客户端。我以前发送过文件，甚至在这个项目中，但不是来自 UserControl，也不是在 UpdatePanel 后面。浏览器表现得好像我什至没有点击链接，即使我可以单步执行代码并且我知道它正在工作。

```
Response.Clear()
Response.AppendHeader("content-disposition", "attachment; filename=assignment.ics")
Response.ContentType = "text/xml"

'serialization code goes here

Response.Write(seralizedObject)
Response.Flush()
Response.End() 
```

我试过`Response.Close`了。我也试过用`Response.OutputStream.Write`。似乎没有任何工作。我想要做的甚至可能吗？或者我是否需要设计一些方法来重定向到另一个页面，然后发送文件？

更新：鉴于收到的答案，我已将实现更改为指向另一个 URL（一个 ashx 文件）以实际发送文件。它有效，但并不理想。我仍然愿意接受有关此建议的其他建议。

如果一个`UpdatePanel`不起作用，我仍然想“内部”将对象发送到另一个文件（如 ashx 文件），然后可以发送该文件。现在我正在使用 URL 查询字符串发送足够的信息来重建我的 ashx 文件中的对象。不用说，这不是一个非常漂亮的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:19:06.953

由于各种原因，您无法使用更新面板将文件流式传输到客户端。文件流在此 AJAX 方案中不起作用。尝试删除 UpdatePanel 并验证它是否可以正常工作，然后使用[条件更新](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)。 [有关更多信息，请参阅此](https://stackoverflow.com/questions/10014920/response-write-and-updatepanel)。

# ios - Multiple Push Segues to One View Controller in Storyboard

> ID：15645487
> 
> 赞同：4
> 
> 时间：2013-03-26T19:13:13.170
> 
> 标签：ios, xcode, uinavigationcontroller, uistoryboardsegue

I have an application in Xcode 4.6 that uses storyboards. The root view controller is embedded in a navigation controller, and all view controllers in the application are accessed via push segues via the navigation controller.

I ran into a complication when I wanted to have one particular view controller (called photos) accessed via a push segue by two different view controllers. I ended up with what appeared to be a navigation controller inside a navigation controller in the photos controller after I added the second segue. The goal is to just have (in photos) one navigation bar with a dismiss button that (when pressed) pops back to whichever of the two view controllers presented the photos view controller. I am somewhat new to iOS and I am not sure of the best way to accomplish this or how to generally handle this situation.

Here is a picture of my storyboard for reference:

![enter image description here](../Images/b71f4a0ca73d381a6fc7044b3d3d669d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T09:59:06.753

你真的应该使用 SotyboardID 以编程方式完成它。每个 ViewControler 中只有几行代码。

# c# - C# configuring TCPClient client's port

> ID：15645489
> 
> 赞同：1
> 
> 时间：2013-03-26T19:13:17.050
> 
> 标签：c#, .net, port, tcpclient, tcp-ip

I have coded `TCPClient()` in `C#` to communicate with another device on LAN. I only have to specify the target IP and port number.

Now I am coding something quite similar to it. However, it specifies that the client port from my PC has to be something greater than `1024`. How can I configure that? does this mean that VS automatically takes care of that if not specified?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:37:52.590

[TcpClient(IPEndPoint)](http://msdn.microsoft.com/en-us/library/3bsb3c8f.aspx)可用于指定客户端端口（仅`IPAddress.Any`用于地址部分）。如[Socket.Bind](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.bind.aspx)和[wikipedia:ephemeral_port](http://en.wikipedia.org/wiki/Ephemeral_port)中所述，默认情况下将使用高于 1024 的端口。

# apache - Apache error 324 when try download large files

> ID：15645490
> 
> 赞同：1
> 
> 时间：2013-03-26T19:13:24.810
> 
> 标签：apache, configuration, download

I installed xampp on win server 2003.

I change php.ini to :

```
max_execution_time = 9000
max_input_time = 9000
memory_limit = 44000M
post_max_size = 45000M
upload_max_filesize = 3000M 
```

But when anyone try download larger than 30MB I see this error :

```
 Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

this error show in one moment before start download we try to download.

I found same question [here](https://webmasters.stackexchange.com/questions/43159/xampp-unable-to-serve-files-larger-than-30mb) but not found answer.

How I can solve this problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:11:51.860

我发现问题 VPS ram 是 512 MB ，当我将 Ram 增加到 1024MB 时，问题就解决了。

# codeigniter - How to include language files for each module in HMVC?

> ID：15645493
> 
> 赞同：0
> 
> 时间：2013-03-26T19:13:29.277
> 
> 标签：codeigniter

I am using CodeIgniter with HMVC and I would like to use language file for each module in addition to language files from CodeIgniter language folder.

Is this possible?

If yes, how could I do something like that?

E.g. I have a module called **footer**

with structure like this:

```
modules
   footer
       controllers
           footer.php
       language
           english
                footer.php 
           czech
                footer.php 
       models
           footer_model.php
       views
           footer.php 
```

and this module would have a message in the view footer.php:

```
echo $this->lang->line('copyright_message'); 
```

Where key **copyright_message** will be stored in a file footer.php in a folder **language/english** for English and **language/czech** for Czech.

How to implement such thing in HMVC for CodeIgniter?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:54:07.707

It actually works as in CI tutorial. My bad ;).

# google-maps - Google maps v3 - Draw a polygon to show photo take angle

> ID：15645496
> 
> 赞同：0
> 
> 时间：2013-03-26T19:13:32.790
> 
> 标签：google-maps, convex-polygon

I am displaying in google maps (v3) markers with the position where the photograph was taken and position of the subject and tracing a line to show direction in which photo was taken. I have also calculated the distance and the angle from camera position.

What I am trying now is to show the view from camera with a triangle that opens, lets say 30 degrees toward the subject. Seem to me is a third grade math, but can't figure out after 25 years, I know how to draw the polygon/triangle but not really how to calculate the points at subject's distance about 30 degrees in both directions, of course taking in mind the heading angle.

**Almost there...**

Used the formula Red answered below to create a function (found I needed to convert: lat1, lon1 and bearing to radians before the math.
I call this function each time a marker changes to calculate again pos1 and pos2 of the triangle and change the paths to redraw it.

Thing now is that triangle shows up but facing all kind of directions but the proper one.

**Question now is:**

Google return the heading in degrees negative to West and positive to East (-180/180) and seems that the formula need the bearing (heading) in 360 degress? Right now function CameraView(75) display correctly but I am passing the angle as 75 degrees instead of 15 degrees (to have 15 degrees view left, and 15 to right).

```
function getVertex(brng) {

var R = 6366.707;
var d = parseFloat( getObj('GPSDestDistance').value ) * 1.5  //distance on form field

//position of Camera
var lat1 = deg2rad( markerCam.getPosition().lat() )
var lon1 = deg2rad( markerCam.getPosition().lng() )

var lat2 = Math.asin( Math.sin(lat1) * Math.cos(d/R) + Math.cos(lat1) * Math.sin(d/R) * Math.cos(brng) );
var lon2 = lon1 + Math.atan2( Math.sin(brng) * Math.sin(d/R) * Math.cos(lat1), Math.cos(d/R) - Math.sin(lat1) * Math.sin(lat2) );

lat2 = rad2deg( lat2 )
lon2 = rad2deg( lon2 )

var pos = new google.maps.LatLng(lat2, lon2)
return pos;
}
function CameraView(angle) {
var brng = deg2rad( parseFloat( getObj('GPSDestBearing').value ) );  //get heading from form
if(brng<0){
    //brng = Math.round(-brng / 360 + 180)
    }
var pos1 = markerCam.getPosition();
var pos2 = getVertex(brng - angle);
var pos3 = getVertex(brng + angle);
var paths = [ pos1, pos2, pos3 ];
poly.setPath(paths);
}

function deg2rad(x)     { return x * (Math.PI / 180); }
function rad2deg(x)     { return x * (180 / Math.PI); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T16:56:25.877

# 更简单的方法：使用谷歌地图几何库

```
 calculateAngle: function(subjectMarker, cameraMarker, angle) {
    var distance, heading, left, right;

    // Get the heading between two markers
    heading = google.maps.geometry.spherical.computeHeading(subjectMarker.getPosition(), cameraMarker.getPosition());

    // convert heading range from [-180,180] to [0,360]
    heading = ((heading - -180) * 360) / 360;

    // Get the distance between two markers
    distance = google.maps.geometry.spherical.computeDistanceBetween(cameraMarker.getPosition(), subjectMarker.getPosition());

    // Calculate angle
    left = new google.maps.geometry.spherical.computeOffset(cameraMarker.getPosition(), distance / Math.cos(Math.PI * (angle / 2) / 180), heading - (angle / 2));
    right = new google.maps.geometry.spherical.computeOffset(cameraMarker.getPosition(), distance / Math.cos(Math.PI * (angle / 2) / 180), heading + (angle / 2));

    // Return an array of `google.maps.LatLng` objects for use when drawing a polygon.
    return [cameraMarker.getPosition(), left, right];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:40:57.413

从起始位置 (lat1,lon1)（也是弧度）、范围 (d)、地球半径 (R) 和方位角 (brng) 获取端点纬度和经度 (lat 2,lon2)（弧度）的公式)[是](http://www.movable-type.co.uk/scripts/latlong.html)：

```
var lat2 = Math.asin( Math.sin(lat1)*Math.cos(d/R) + Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng) );
var lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1), Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2)); 
```

您的起点将是三角形多边形的点之一。其他两个可以使用此代码片段找到，输入您的方位 +/- 15 度（对于 30 度三角形示例）和一个完全取决于您想要三角形的大小的范围。

# checkbox - Kendo Grid Checkbox dirty flags are inconsistent

> ID：15645498
> 
> 赞同：0
> 
> 时间：2013-03-26T19:13:40.180
> 
> 标签：checkbox, kendo-ui, kendo-grid

I am having a issues with a checkbox column in a grid.

I have a grid with multiple checkbox columns. When I check the box, the dirty tick is not there, however when I click on the cell that contains the checkbox, but not the check box and then click the checkbox, I get the dirty tick mark.

Has anyone see this before? I would like it to be a bit more consistent because after a few clicks the dirty marks for some rows disappear.

This just seems odd.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:14:57.070

我解决它的方法是使模型中的字段不可编辑，因此它强制点击事件触发，然后我只需更新值并设置脏属性。问题是，如果您单击单元格，则会触发编辑事件而不是单击，反之亦然，因此我没有触发两件事，而是禁用了一个。有些人会称之为 hack，但我看不出还有什么方法可以防止这两个事件触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:05:05.587

请试试这个：

```
 //Cell click Checkbox select
    $('#grd' + gridName).on("click", "td", function (e) {
        var selectedTd = $(e.target).closest("td");              
         var grdChkBox = selectedTd.parents('tr').find("td:first").find('input:checkbox');
         grdChkBox.prop('checked', !grdChkBox.prop('checked'));

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T21:40:53.797

是的，我经常看到这种情况：取决于您如何实现复选框。如果您直接勾选一个复选框，您会修改模型，`input`但不会修改模型。如果您勾选单元格，然后勾选复选框，则 Kendo UI 切换到编辑模式，并且（在后台）它用允许修改模型的 Kendo UI 管理（事件处理程序）的复选框的*可编辑版本替换复选框。*

**编辑：**如果您希望您的复选框始终可点击，那么您可以这样做：

```
var grid = $("#stocks_tbl").kendoGrid({
    dataSource: new kendo.data.DataSource({
        ...
        schema: {
            model: {
                id    : "id",
                fields: {
                    active: { type: "boolean" }
                }
            }
        }
    }),
    editable  : "incell",
    columns   : [
        {
            field   : "active",
            title   : "Active",
            template: '<input type="checkbox" data-bind="source: active" #= active ? checked="checked" : ""# />'
        },
        ...
    ]
}).data("kendoGrid"); 
```

在这里，您定义一个`input`始终可点击的。

```
$(document).on("change", "[type='checkbox']", function(ev) {
    var item = grid.dataItem($(this).closest("tr"));
    item.set("active", ev.srcElement.checked);
}); 
```

有了这个，我们定义了一个处理程序来拦截 上的更改`input`并将它们反映在`model`.

这样可以节省您玩的时间`editable`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T06:17:10.980

实际上，首先您需要单击单元格以进入“编辑”模式，然后您可以检查/取消实际复选框。[为了获得更好的用户体验，您可以像在此代码库文章](http://www.kendoui.com/code-library/mvc/grid/checkbox-column-and-incell-editing.aspx)中实现复选框一样实现复选框。（如果您不使用 ASP.NET MVC 包装器 - 不用担心，只需打开项目到**Views/Home/Index.cshtml**下，您可以复制/粘贴代码 - 都是 JavaScript。

代码库还包括如何在列标题中创建复选框“全选”。

# c - mutex_init() causes weird segfault

> ID：15645499
> 
> 赞同：0
> 
> 时间：2013-03-26T19:13:41.517
> 
> 标签：c, multithreading, pthreads, mutex

I'm blocking on a weird issue trying to deal with posix threads. I'll start with the code:

```
#include <pthread.h>
#include <semaphore.h>

typedef struct {
    pthread_mutex_t *mutex; 
} buffer_t;

buffer_t *buffer_alloc(unsigned int maxSize) {

    buffer_t *buffer = (buffer_t *) malloc(sizeof(buffer_t));
    if(buffer == NULL)
        return NULL;

    pthread_mutex_init(buffer->mutex, NULL); // This line causes a crash

    pthread_mutex_t *mutex;
    pthread_mutex_init(mutex, NULL); // This one doesn't 
```

}

I'm getting a segmentation fault on the first `pthread_mutex_init()`. Here's gdb's runlog and backtrace:

```
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Program received signal SIGSEGV, Segmentation fault.
__pthread_mutex_init (mutex=0x0, mutexattr=0x0) at pthread_mutex_init.c:83
83  pthread_mutex_init.c: No such file or directory.

(gdb) backtrace
#0  __pthread_mutex_init (mutex=0x0, mutexattr=0x0) at pthread_mutex_init.c:83
#1  0x00000000004015a8 in buffer_alloc (maxSize=10) at buffers.c:26 
```

Thanks for your help !

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:17:13.277

将您的结构定义更改为：

```
typedef struct {
    pthread_mutex_t mutex; 
} buffer_t; 
```

然后将互斥体初始化为：

```
pthread_mutex_init(&buffer->mutex, NULL); 
```

您的代码在这两种情况下都使用未初始化的指针。在第二种情况下不（立即）导致分段错误是纯粹的运气，它可能会破坏一些变量并在以后造成麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:19:02.557

您传递给的指针`pthread_mutex_init()`未初始化，它不指向分配的内存，因此您的程序会调用未定义的行为。你可以做的是修改你的结构或`buffer_alloc()`函数来显式地为互斥体分配内存。即，解决方案＃1（我更喜欢这个）：

```
typedef struct {
    pthread_mutex_t mutex;
} buffer_t;

buffer_t *buffer_alloc(unsigned int maxSize)
{
    buffer_t *buffer = malloc(sizeof(*buffer));
    if (buffer == NULL)
        return NULL;

    pthread_mutex_init(&buffer->mutex, NULL);

    // etc.
    return buffer;
} 
```

解决方案#1，动态分配：

```
typedef struct {
    pthread_mutex_t *mutex;
} buffer_t;

buffer_t *buffer_alloc(unsigned int maxSize)
{
    buffer_t *buffer = malloc(sizeof(*buffer));
    if (buffer == NULL)
        return NULL;

    buffer->mutex = malloc(sizeof(*(buffer->mutex)));
    if (buffer->mutex == NULL) {
        free(buffer);
        return NULL;
    }

    pthread_mutex_init(buffer->mutex, NULL);

    // etc.
    return buffer;
} 
```

在后一种情况下，不要忘记`free()`“析构函数”中的互斥锁。

另外，[不要强制转换`malloc()`](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:18:23.233

您正在传递一个未初始化的缓冲区....您已经分配了 buffer_t，但将其初始化为空。所以互斥指针是一些随机值，指向谁知道在哪里。

然后， pthread_mutex_init 需要一个指向实际存在的互斥锁的指针。您正在向它传递一个指向随机内存的指针。

看看这个能不能解决...

```
typedef struct {
    pthread_mutex_t mutex; 
} buffer_t;

buffer_t *buffer_alloc(unsigned int maxSize) {

    buffer_t *buffer = (buffer_t *) malloc(sizeof(buffer_t));
    if(buffer == NULL)
        return NULL;

    pthread_mutex_init(&buffer->mutex, NULL); // This line causes a crash 
```

# c# - Building Visual Studio projects for 2 Frameworks Simultaneously

> ID：15645502
> 
> 赞同：1
> 
> 时间：2013-03-26T19:13:48.567
> 
> 标签：c#, visual-studio-2010, build-automation

I have a few class libraries that I'm using in two of our in-house projects. One of the in-house projects targets the *.NET 4.0 framework*, while the other one targets *.NET 2.0*. I'm using [LinqBridge](http://www.albahari.com/nutshell/linqbridge.aspx) to gain some of the niceties of the higher version .NETs in the 2.0 project.

In order to use the class libraries properly in both projects, I need to compile one version (using LinqBridge) to the .NET 2.0 Framework, and another version (using the standard System.Linq) for .NET 4.0.

I'd like to avoid doing this manually every time. I was hoping there was a way to specify what the current target framework is in the Build Events section, but it looks like there isn't a macro for that. I'm generally unfamiliar with manually editing build configurations. **What's the right way to go about targeting two frameworks for a single project?**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:17:03.853

我只需在一个解决方案中创建两个单独的项目，一个用于 2.0，一个用于 4.0 目标。他们可以引用相同的源文件，而 2.0 可以添加所需的额外引用。

这将允许您构建解决方案并让 2.0 和 4.0 目标 DLL 包含在您需要的任何其他项目中。

# backbone.js - 是否应该用listenTo/stopListening 替换所有Backbone 开/关事件？

> ID：15645506
> 
> 赞同：14
> 
> 时间：2013-03-26T19:13:57.990
> 
> 标签：backbone.js

据我所知，`listenTo`应该分别`stopListening`替换`on`和`off`。我理解正确吗？有没有应该使用 / 代替`on`/的情况？`off``listenTo``stopListening`

**编辑：**

当我去重构我的代码时，很明显有一些`on`over的情况`listenTo`。[文档](http://backbonejs.org/#Events-listenTo)非常清楚，它适用于一个对象监听另一个对象的情况：

> 告诉一个**对象监听****另一个**对象上的特定事件。

因此，当`collection`or`model`正在监听自身的事件时，我们应该使用`on`而不是`listenTo`。

假设我有这个正确的......

**要遵循的简单规则是：**

`listenTo`在侦听另一个对象上的事件时使用。`on`在监听自己的事件时使用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T23:50:36.153

复制我最近阅读的一篇有趣的[博客文章](http://ozkatz.github.com/avoiding-common-backbonejs-pitfalls.html?tagref=js)的摘录。希望能帮助到你。

**避免常见的主干陷阱：通过不解除绑定事件造成内存泄漏**

Backbone.js 中的一个常见模式是创建监听模型或集合变化的视图。此技术通常旨在允许视图在底层数据更改时自动重新呈现自身。这也意味着对于大型集合，我们最终可能会得到许多视图（集合中的每个模型至少一个），我们可以根据数据的更改动态创建或销毁这些视图。

当我们删除一个视图（通常是通过调用它的 .remove() 方法），但忘记取消绑定监听模型更改的方法时，就会出现问题。在这种情况下，即使我们的代码可能不再持有对该视图的引用，它也不会被垃圾回收，因为模型仍然通过事件处理程序持有这样的引用。

以这个视图为例：

```
var SomeModelView = Backbone.View.extend({
   initialize: function() {
     this.model.on('change', this.render, this);
   },
   render: function() {
     // render a template
   }
}); 
```

当调用 .remove() 方法时，“change”事件处理程序（我们的渲染函数）仍然被绑定。因此，虽然 DOM 元素可能会被删除，但视图对象本身永远不会从内存中释放。

解决这个问题很容易（特别是从 Backbone 0.9.x 开始）——我们需要做的就是在绑定事件处理程序时停止使用 .on() 。相反，我们可以使用新的 .listenTo() 方法，如下所示：

```
initialize: function() {
    this.listenTo(this.model, 'change', this.render);
} 
```

这里最大的不同是将责任从模型转移到视图。这意味着每当我们调用 .remove() 时，视图将使用 .listenTo() 方法自动解除绑定到它的任何事件，基本上修复了这个常见的泄漏。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T19:35:30.410

在大多数情况下，您正确理解它。以下是他们 github 存储库中关于此事的讨论：[https ://github.com/documentcloud/backbone/issues/1923#issuecomment-11462852](https://github.com/documentcloud/backbone/issues/1923#issuecomment-11462852)

`listenTo`并`stopListening`跟踪状态。它将以少量代码开销为代价为您进行清理。在几乎所有情况下，我都认为您会希望这种行为适合您的观点，但是您自己处理开/关呼叫也不会有错；`on`他们不会`off`很快被弃用。

# mule - mule 自定义转换器在工作室中工作，但未部署到独立服务器

> ID：15645510
> 
> 赞同：0
> 
> 时间：2013-03-26T19:14:16.877
> 
> 标签：mule, mule-studio

我有一个定制变压器的流程。这个流程在我在 Mule Studio 下运行时有效，但在 mule 独立服务器运行时失败。错误消息是“元素自定义变压器没有类（名称=更新表）”

```
<flow name="updates" doc:name="updates">

    <jms:inbound-endpoint connector-ref="JMSConnector"
        doc:name="JMS" topic="updates" />
    <collection-splitter doc:name="Collection Splitter" />
    <custom-transformer class="com.domain.UpdateTable"
        doc:name="Update Table">
        <spring:property name="table" ref="table" />
    </custom-transformer>

</flow> 
```

[我在老骡子论坛上](http://forums.mulesoft.org/thread.jspa?threadID=6912)也发现了一个类似的问题，但没有答案；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:22:22.030

这个错误是由 java.lang.NoClassDefFoundError 引起的，Mule 捕获并转换为“No class for element”消息。这是[NoClassDefFoundError 的一个很好的描述](https://stackoverflow.com/a/5756989/841299)。在我的情况下，错误是由静态初始化程序引发的异常引起的。

# eclipse - 将 Tomcat 添加到 Eclipse

> ID：15645515
> 
> 赞同：0
> 
> 时间：2013-03-26T19:14:31.827
> 
> 标签：eclipse, tomcat

我正在尝试将 tomcat 服务器添加到运行时环境中。我成功安装了tomcat。我已经有 Java EE eclipse，但是在我单击 Window->Preferences->Server->Runtime environment 下的搜索并选择 apache tomcat 然后单击 OK 一个带有以下文本弹出窗口的窗口：没有找到新的服务器运行时环境。我究竟做错了什么？我想在切换到 Java EE 并安装 tomcat 后，我​​将能够添加 RE ...提前非常感谢！

尝试添加 RE:no tomcat servers 列表后！！！ ![在此处输入图像描述](../Images/39b7d68a86a2cf82430f8990593c2a0a.png)

尝试搜索后（C:/Program Files/Apache...） ![在此处输入图像描述](../Images/3b1f27f53e1a03a2f73accd0429dd631.png)

最后选择“apache软件基础”并点击确定后的弹出窗口 ![在此处输入图像描述](../Images/c40d1b96f7138f990d6dfe6da9ff6c74.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:20:54.210

您需要在该窗口中指定服务器运行时。从浏览按钮中，选择安装 tomcat 的目录的基本路径，然后点击下一步。希望应该这样做。如果您有互联网连接，还应该有一个下载和安装选项。

如果您在“添加新服务器”对话框中没有看到任何服务器类型，那么您可能缺少服务器适配器。在这种情况下，单击“下载其他服务器适配器”链接。这将允许您选择和下载“tomcat 服务器适配器”。一旦完成。

![添加新服务器](../Images/fe9be0c05f4857b75b73be645729cd2b.png)

![添加新服务器](../Images/6c28d3c9e2360ed8330e4514a5e8c983.png)

一些屏幕截图等也有助于理解和帮助您解决问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-01T11:48:34.483

运行时环境点击添加按钮选择Apache tomcat->点击下一步按钮->浏览Tomcat 7.0路径->完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-20T08:52:41.867

因为您没有 JST 服务器适配器...您无法在 eclipse 中看到已安装的 apache ....只需通过帮助菜单中的“安装新软件”进行安装 ....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:09:51.127

您很可能缺少 Eclipse Tomcat 服务器功能。您可以尝试重新安装所有[WTP 插件](http://www.eclipse.org/webtools/)，也可以安装 Spring STS，我确信它已经安装了该插件。

# c# - 尝试从 LocalFolder 打开文件时出现“System.UnauthorizedAccessException”

> ID：15645519
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:14:42.133
> 
> 标签：c#, .net, windows-8, windows-store-apps

以下代码行抛出 System.UnauthorizedAccessException：

```
StorageFile file
    = await Windows.Storage.ApplicationData.Current.LocalFolder.GetFileAsync("ms-appx:///Assets/image.png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:33:36.790

```
var uri = new Uri("ms-appx:///Assets/image.png");
var file = await StorageFile.GetFileFromApplicationUriAsync(uri); 
```

# ruby - Ruby 中 Kernel#eval 和 Binding#eval 的区别

> ID：15645522
> 
> 赞同：3
> 
> 时间：2013-03-26T19:14:53.790
> 
> 标签：ruby, ruby-2.0

为什么`Binding#eval`调用块，但`Kernel#eval`不调用？

```
def bar; binding; end
bi = bar {|x| p(x+1)}

bi.eval "yield 2"       # ==> 3
eval "yield 2", binding # ==> LocalJumpError 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T21:00:34.960

我认为，在第五行，第二个参数必须是“bi”：

```
$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-linux]

1 def bar; binding; end
2 bi = bar {|x| p(x+1)}
3
4 bi.eval "yield 2"  #==> 3
5 eval "yield 2", bi #==> 3 
```

# xcode - Xcode c++ 函数列表

> ID：15645523
> 
> 赞同：1
> 
> 时间：2013-03-26T19:14:54.567
> 
> 标签：xcode

我想在 Xcode 中查看当前文件中定义的所有函数的列表，就像 VIM 中的 taglist 插件一样。我不熟悉 Xcode。可以在 Xcode 中做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:24:18.860

您可以在窗口顶部的“跳转栏”中查看该信息。

每当您打开文件时，您应该会在文件编辑器/查看器上方看到一个细条，其中包含您的项目名称以及您打开的文件的路径。当您在 .m 或 .h 文件中时，该栏中的最后一项将是光标所在的当前方法（如果它在一个中）。

如果单击它，它将为您提供该文件中所有方法的列表，单击其中一个方法会将窗口滚动到该文件。

这是我的一个旧项目的一个例子：

这是具有文件路径的跳转栏，可让您选择其他文件：

![顶栏](../Images/064b6937871ff9e8da22962d833a5873.png)

如果单击当前方法，这是当前文件中的方法列表：

![方法列表](../Images/4424d32af3b7c0d3a629a762df23664b.png)

# iphone - Restrict iPhone/iPad App to iPhone 4 and higher only?

> ID：15645531
> 
> 赞同：0
> 
> 时间：2013-03-26T19:15:16.527
> 
> 标签：iphone, ios, xcode, ipad

I am looking to make my app so that it only works on iPhone4 or higher, and not the 3GS.

How can I do this? Is it done via setting the Architectures setting to Standard Armv7/Armv7s

And Valid architectures to Armv7 & Armv7s?

Or do I need to look at deployment target? And set it to a certain iOS version?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:22:30.870

不幸的是，您可以针对 iOS 版本而不是设备！您可以尝试为 iOS 6.0+ 构建，它会隔离一些旧设备，如 iPad1。我不确定 3GS 上的 iOS 版本会升级到什么版本，它很快就会被淘汰，不过随着即将发布的 iOS 版本。我知道 iOS 6 可以在 3GS 上运行，但 iPad1 不行

您可以检测设备，并通过代码对其进行限制，但通过 Apple 和 iTunes，没有以设备为中心的限制，只有操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:22:44.573

部署目标仅允许您针对特定的 iOS 版本，并且 3GS 可以运行 iOS6。如果您真的希望限制旧设备运行您的应用程序，您可能需要在 AppDelegate 中检查设备型号并限制功能。

需要注意的是，您的应用可能不会在 App Store 中获得许可。您试图利用 3GS 不支持的哪些功能？

# c# - Named Pipes error 40 in windows server 2003

> ID：15645532
> 
> 赞同：0
> 
> 时间：2013-03-26T19:15:17.827
> 
> 标签：c#, sql, sql-server, visual-studio-2010, tsql

I have write one .Net application in C# I use these strings to connect

```
str = "Data Source=200.1xx.2yy.1zz ;Initial Catalog =minofom;uid =sa;pwd = abuelita"; 
```

and the same string for app.config:

```
<add name="MiniFinan.Properties.Settings.MiniFimConnectionString"
  connectionString="Data Source=200.1xx.2yy.1zz ;Initial Catalog =minofom;uid=sa;pwd = abuelita" providerName="System.Data.SqlClient" /> 
```

All the forms open fine, when I'm out of the local network, the app and the reports work perfect, but when I install the app in the server or any machine of the local network the app show me this error:

> “Named Pipes Provider, error: 40 - Could not open a connection to SQL Server”</p>

The local server is a domain controller, I use this string for local area network:

```
str="Data Source=192.168.2.254 ;Initial Catalog =MinoFom;uid =sa;pwd = abuelita" 
```

All the forms work, but when I call to any report not connect, I use the same string for the app.config. I have tested the same app in other Server 2003 (not Domain Controller) and the reports works, have any way of write the string for domain, any idea of how to fix this?

I have checked SQL Browser is online, the protocols : Shared Memory/ Named Pipes/TCPIP are installed and work. I think is something with the domain.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:14:19.500

我已经解决了使用两个字符串的形式：

```
str = @"Data Source=TORRE ;Initial Catalog =minofom;uid =sa;pwd = abuelita"; 
```

和 app.config 中的其他报告：

```
 connectionString="Data Source=MyDomain\TORRE;Initial Catalog=MinoFom;uid =sa;pwd = abuelita" 
```

它可以在 app.config 中保存多个字符串，享受

# jakarta-mail - javax.mail from is not set

> ID：15645534
> 
> 赞同：0
> 
> 时间：2013-03-26T19:15:22.980
> 
> 标签：jakarta-mail

I'm trying to send email using JNDI, but for some strange reason the from field is not set.

context.xml:

```
 <Resource name="email/user" 
    description="support email"
    auth="Container"
    type="javax.mail.Session"
    username="user@server.net"
    password="pass"
    mail.debug="false"
    mail.user="user@server.net"
    mail.from="user@server.net"
    mail.transport.protocol="smtp" 
    mail.host="mail.server.net"
    mail.smtp.host="mail.server.net"
    mail.smtp.auth="true"
    mail.smtp.from="user@server.net"
    mail.smtp.starttls.enable="true"
    mail.smtp.submitter="user@server.net"/> 
```

And how I'm getting this to application:

```
Context ctx = new InitialContext();
Session userEmail = (Session) ctx.lookup("java:comp/env/email/user"); 
```

And everything is fine, but when I'm sending this email to some servers I receive return message: **We can't accept your message - missing From: (#5.3.0)**

*Additional question:*

How to set nice looking from? I tried this:

```
mail.from="company XYZ &lt;user@server.net&gt;" 
```

But it doesn't work....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:45:15.473

我找到了原因。问题出在消息创建中。

我错过了**message.setFrom();**

代码：

```
Message message = new MimeMessage(mailSession);
message.setFrom(); //this was missing
message.setSubject(subject);
message.setContent(content, "text/html; charset=" + charset); 
//... set recipients, ....
Transport.send(message); 
```

现在我的两个问题都得到了解答。“看起来不错”现在也在起作用。

# c# - 不存在从对象类型 system.io.memorystream 到已知托管提供程序本机类型的映射，仅 Windows XP 问题

> ID：15645540
> 
> 赞同：0
> 
> 时间：2013-03-26T19:15:49.503
> 
> 标签：c#, sql

出现错误：System.argumentexception：不存在从对象类型 system.io.memorystream 到已知托管提供程序本机类型的映射。

我的代码在 Win7-64bit 上运行良好，但在 WinXP-64bit 上不行。

当 KeyValuePair 中传递的 Object 是 Stream 或 MemoryStream 类型并且 SQL 不知道如何处理它时，会发生错误。

这是有问题的代码：

```
foreach (KeyValuePair<frmMain.PARAMS, Object> item in paramDictionary)
{
    sqlCMD.Parameters.Add(new SqlParameter("@" + item.Key.ToString(), item.Value));
} 
```

以下是进行此调用的代码供参考：

```
mStream = frmRptViewer.CryRpt.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat);
Dictionary<PARAMS, Object> pdfDictionary = new Dictionary<PARAMS, Object>();
pdfDictionary.Add(PARAMS.TYPE, "PDFSAVE");
pdfDictionary.Add(PARAMS.PDF, mStream);
pdfDictionary.Add(PARAMS.JOBNUMB, jobNumTextBox.Text);
pdfDictionary.Add(PARAMS.LINENUMB, lineNumTextBox.Text);
DBCall.SavePDF(pdfDictionary); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:20:33.773

很可能它无法处理`Stream`课程。您可以尝试使用`byte[]`它，它`MemoryStream`可以让您轻松做到：

```
pdfDictionary.Add(PARAMS.PDF, mStream.ToArray()); 
```

您可能还希望将流包装在 a`using() {}`中以防止泄漏：

```
using (MemoryStream mStream = frmRptViewer.CryRpt.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat)) {
    Dictionary<PARAMS, Object> pdfDictionary = new Dictionary<PARAMS, Object>();

    pdfDictionary.Add(PARAMS.TYPE, "PDFSAVE");
    pdfDictionary.Add(PARAMS.PDF, mStream);
    pdfDictionary.Add(PARAMS.JOBNUMB, jobNumTextBox.Text);
    pdfDictionary.Add(PARAMS.LINENUMB, lineNumTextBox.Text);
    DBCall.SavePDF(pdfDictionary);

} 
```

# amazon-web-services - AWS：访问 Auto Scaling 实例

> ID：15645541
> 
> 赞同：0
> 
> 时间：2013-03-26T19:15:57.253
> 
> 标签：amazon-web-services, amazon-ec2, autoscaling

我已正确设置 Auto Scaling CLI 并创建了两个组。
这是一些示例输出：

```
-bash-4.1# as-describe-auto-scaling-instances --headers  

INSTANCE INSTANCE-ID GROUP-NAME AVAILABILITY-ZONE STATE STATUS LAUNCH-CONFIG

INSTANCE i-2aaf0e42 MyGroup_micro us-east-1a InService HEALTHY MyLC_micro
INSTANCE i-88338ce4 MyGroup us-east-1a InService HEALTHY MyLC 
```

我的问题是：
1\. 我的 EC2 仪表板中没有看到上述实例。可以吗？
2\. 我可以登录这些实例吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:20:32.037

1.  它们应该显示在您的仪表板上。有时不会立即显示，但最终会显示
2.  是的，获取实例的 IP 地址并使用您配置的身份验证登录。

# android - 单击两次以检查单选按钮？

> ID：15645546
> 
> 赞同：3
> 
> 时间：2013-03-26T19:16:16.000
> 
> 标签：android, button, radio

我正在尝试构建一个测试应用程序，并且我正在使用单选按钮来选择 A、B、C、D。我正在尝试计算结果-> 例如，当按 A 增量 1 时，当按 B 增量 2 时，依此类推。我最初使用的是 Radio Group，但我知道如果用户尝试将他的问题的答案从 A 更改为 B，则增加的结果将是 3，而不是预期的 2。所以我切换到单选按钮并尝试以下代码：

```
 rb1.setOnCheckedChangeListener(new 
         android.widget.CompoundButton.OnCheckedChangeListener (){ 

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            i++;
            if(rb2.isChecked())
            { 
                i--;
                rb2.setChecked(false);                  
            }

        }
            });

    rb2.setOnCheckedChangeListener(new android.widget.CompoundButton.OnCheckedChangeListener (){

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            i++;

            if(rb1.isChecked())
            { 
                i--;
                rb2.setChecked(false);                          
            }
        }
            }); 
```

现在第二个单选按钮必须单击两次才能进行检查。这是一个错误，是否可以修复。我需要按钮在第一次单击后更改状态。欢迎所有想法和建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:27:21.350

您可以更改代码以使用 switch 语句（如评论之一中所建议），但如果您想继续您所拥有的内容并回答您的问题。在您的 rb2 代码中，您是说如果选中 rb1，则将 rb2 设置为 false。因此，如果您单击 rb1 （现在它已被选中/推送）并且您在第一次取消选中它时单击 rb2，第二次它保持选中状态。

所以坚持你的编码风格和程序：

```
 public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        i++;

        if(rb1.isChecked())
        { 
            i--;
            rb2.setChecked(false);                          
        }
    } 
```

应该：

```
 public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        i++;

        if(isChecked && rb1.isChecked())
        { 
            i--;
            rb1.setChecked(false);                          
        }

        rb2.setChecked(isChecked);
    } 
```

对您的 rb1 方法进行类似的更改。

# java - 从java调用批处理需要从当前批处理文件夹开始

> ID：15645552
> 
> 赞同：1
> 
> 时间：2013-03-26T19:16:53.210
> 
> 标签：java

我正在从我的 java 程序启动一个批处理文件，它将停止一些 tomcats，如果它将从命令行启动，批处理本身就可以工作。但是从java开始它不起作用，问题是批处理不会从它所在的文件夹中调用。所以它找不到一些文件，我的问题是如何切换到批处理所在的文件夹，然后启动批处理，以便它从其文件夹中运行并找到必要的文件。

例如，批处理位于文件夹 c:\foobar\mybatch.cmd

这是我的代码当前如何从java调用批处理

```
public void startBatch(Path batchPath) {

    if (batchPath == null) {
        throw new IllegalArgumentException("cannot start batch without path to it");
    }
    if (!Files.exists(batchPath)){
        throw new IllegalArgumentException("batch does not exist " + batchPath.toString());
    }

    try {
        log.info("starting batch " + batchPath.toAbsolutePath().toString());
        String command = "cmd.exe /c " + batchPath.toAbsolutePath().toString();
        Process p;
        p = Runtime.getRuntime().exec(command);

        p.waitFor();

        BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));

        String line = reader.readLine();
        while (line != null) {
            log.info(line);
            line = reader.readLine();
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:21:55.743

您应该只放入`cd c:\foobar\`批处理文件本身。

# xcode - 从 1280x720 转换为 UIView 尺寸

> ID：15645556
> 
> 赞同：2
> 
> 时间：2013-03-26T19:17:07.507
> 
> 标签：xcode, ios6, uikit, core-graphics

我有一个应用程序可以从 AVCaptureDevice 样本缓冲区委托中找到 QR finder 标记。现在我正在尝试在屏幕上放置框以覆盖 QR 标记。但是，我无法在 1280x720 像素分辨率和 cameraView 大小之间进行转换。

我正在尝试编写一个基于这些参数转换 CGRect 的方法（以及视图坐标系颠倒的事实），但它不起作用。它也可能与相机设备的方向有关。这是我的转换方法代码：

```
-(CGRect) convertRect:(CGRect) oldRect From90DegreeRotatedCameraSize1280x720ToUIViewSize:(CGSize) viewSize
{
//remember that we are using a gravity of resize aspect fill

double xScale = viewSize.width / 720;
double yScale = viewSize.height / 1280;

if (xScale < yScale)
    return CGRectMake(oldRect.origin.x * xScale, viewSize.height - oldRect.origin.y * xScale, oldRect.size.height * xScale, oldRect.size.width * xScale);
else
    return CGRectMake(oldRect.origin.x * yScale, viewSize.height - oldRect.origin.y * yScale, oldRect.size.height * yScale, oldRect.size.width * yScale);
} 
```

有人能优雅地解决这个相对简单的空间坐标问题吗？

编辑 -

我做了一个连接视频方向的 NSLog，结果它永远不会从 1 改变（我认为它被枚举为纵向方向。）从这里，应该更容易找到解决方案，因为坐标不会改变不同的方向。

任何想法，编码器社区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:17:44.760

弄清楚了：

当 iOS 填充一个视图时，它会居中，这样两边就被切断了。为了在视图坐标之间转换，您需要缩放并在被切断的方向上平移：

```
 return CGRectMake(oldRect.origin.x * xScale, oldRect.origin.y * xScale - (1280 * xScale - viewSize.height) / 2, oldRect.size.height * xScale, oldRect.size.width * yScale); 
```

# django - Django TypeError：'int'对象不可调用

> ID：15645559
> 
> 赞同：0
> 
> 时间：2013-03-26T19:17:18.730
> 
> 标签：django

我收到以下错误：

**TypeError：“int”对象不可调用**

**response = receiver(signal=self, sender=sender, **named) File "/Users/user/Documents/workspace/LiveWireSMS/sms/models/message.py", line 156, in my_handler instance.charge = instance.length （实例.内容）**

从这段代码中：

```
@receiver(pre_save, sender=Message)
def my_handler(sender, **kwargs):
    instance = kwargs['instance']
    if not instance.charge:
        instance.charge = instance.length(instance.content) 
```

这是它的调用函数：

```
@property
def length(self):
    return len(self.content) / 160 + 1 
```

有人可以解释错误吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:26:33.337

您收到此错误是因为`length`返回一个`int`对象并且您尝试调用它。

```
instance.charge = instance.length # instead of instance.length(instance.content) 
```

# java - XMLStreamException：试图输出第二个根，StaXparser

> ID：15645566
> 
> 赞同：6
> 
> 时间：2013-03-26T19:17:56.103
> 
> 标签：java, xml, xml-parsing, stax

```
writer.writeStartElement(startElement.getName().getLocalPart()); 
```

//当我用一个线程在独立机器上运行时，它工作正常，但是当我在服务器上用多个线程运行多个作业时，它给了我以下错误

```
writer.writeStartElement(startElement.getName().getLocalPart());

javax.xml.stream.XMLStreamException: Trying to output second root, <element>

ERROR [STDERR] (JBossQuartzScheduler_Worker-4) javax.xml.stream.XMLStreamException:
 Trying to output second root, <handset>
ERROR [STDERR] (JBossQuartzScheduler_Worker-4)  at com.ctc.wstx.sw.BaseStreamWriter.throwOutputError(BaseStreamWriter.java:1473)
ERROR [STDERR] (JBossQuartzScheduler_Worker-4)  at com.ctc.wstx.sw.BaseStreamWriter.throwOutputError(BaseStreamWriter.java:1480)
ERROR [STDERR] (JBossQuartzScheduler_Worker-4)  at com.ctc.wstx.sw.BaseStreamWriter.reportNwfStructure(BaseStreamWriter.java:1508)
ERROR [STDERR] (JBossQuartzScheduler_Worker-4)  at com.ctc.wstx.sw.BaseNsStreamWriter.checkStartElement(BaseNsStreamWriter.java:444)
ERROR [STDERR] (JBossQuartzScheduler_Worker-4)  at com.ctc.wstx.sw.BaseNsStreamWriter.writeStartElement(BaseNsStreamWriter.java:292) 
```

# sql - 选择与公司相关的所有用户

> ID：15645569
> 
> 赞同：0
> 
> 时间：2013-03-26T19:18:06.980
> 
> 标签：sql, select

首先，抱歉标题毫无意义。想不出更好的了。请看一下我的下表：

用户

```
+-----+-------+---------------+
|  id | name  | email         |
+-----+-------+---------------+
|   1 | NameA | namea@srv.com |
|   2 | NameB | nameb@srv.com |
|   3 | NameC | namec@srv.com |
+-----+-------+---------------+ 
```

部门

```
+-----+---------+-------+---------+
|  id | company | name  | manager |
+-----+---------+-------+---------+
|   1 |       1 | DeptA |       1 |
|   2 |       1 | DeptB |       2 |
+-----+---------+-------+---------+ 
```

公司

```
+-----+------+-------+
|  id | name | owner |
+-----+------+-------+
|   1 | Buzz |     3 |
+-----+-------+------+ 
```

我需要找到与公司相关的所有用户。就像是：

```
+---------+------------+
| user_id | company_id |
+---------+------------+
|       1 |          1 |
|       2 |          1 |
|       3 |          1 |
+---------+------------+ 
```

我怎样才能做到这一点？我读到了不同类型的连接（内部、外部、完整等），但我不知道如何处理所有中间的“部门”表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:27:55.053

我会用两个查询来做到这一点：

```
select Department.manager as user_id, Company.id
from Company
join Department on Department.company=Company.id

union

select Company.owner as user_id, Company.id
from Company 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:03:42.777

```
select User.id, User.name, User.email, CASE WHEN User.id = Company.Owner THEN 'YES' ELSE 'NO' END as CompanyOwner
from User
inner join Department on User.DepartmentID = Department.id
inner join Company on Company.id = Department.company 
```

我认为您缺少用户和部门之间的实体关系，可能是用户表上的部门 ID。我认为这可能是您缺少的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:47:02.997

通常，您可以通过某种方式将用户链接到他们工作的部门。将 DeptID 列添加到用户表中。在这个例子中，所有者的部门被表示为空，而经理的部门被填充，但是你这样做的方式取决于你。

```
 User
+-----+-------+---------------+------+
|  id | name  | email         | dept |
+-----+-------+---------------+------+
|   1 | NameA | namea@srv.com |    1 |
|   2 | NameB | nameb@srv.com |    2 |
|   3 | NameC | namec@srv.com |  +++ |   
|   4 | NameD | named@srv.com |    2 |
|   5 | NameE | namee@srv.com |    2 |
+-----+-------+---------------+------+ 
```

因此，要获取在 User 表上填充部门的所有公司 1 用户的列表，这变得很简单

```
SELECT u.id       as user_id,
       d.company  as company_id
  FROM User u
  INNER JOIN Department d   ON u.dept=d.id
  WHERE d.company=1

UNION

SELECT owner  as user_id,
       id     as company_id
  FROM Company 
```

如果您选择不在 User 表中填充经理的部门，则还必须为该部分附加一个 UNION，其结构类似于上面的第一部分。

**或者**，您可能有一个关联表来显示哪些员工为哪个部门工作。如果一个人可以在多个部门工作，则可能需要这样做。（经理和所有者可能不需要在此表中，因为它们已经被考虑在内。再次，由您决定。但是如果您确实包括它们，那么您将不需要 UNION，因此它会使事情变得更简单。您可能甚至将所有者置于“所有权”部门。）

```
 UserDept
+--------+--------+
| UserID | DeptID |
+--------+--------+
|    4   |    2   |
|    5   |    2   |
+--------+--------+

SELECT u.id       as user_id,
       d.company  as company_id
  FROM UserDept u
  INNER JOIN Department d   ON u.dept=d.id
  WHERE d.company=1 
```

（如果您没有在 UserDept 表中包含所有者/经理，则根据需要添加 UNION。）

但如果您需要更深入的示例，假设您还需要 User 表中的名称：

```
SELECT u.id       as user_id,
       d.company  as company_id,
       u.name     as user_name
  FROM User u
  INNER JOIN UserDept x     ON u.id=x.user
  INNER JOIN Department d   ON x.dept=d.id
  WHERE d.company=1 
```

# php - 上传文件时没有POST参数

> ID：15645573
> 
> 赞同：1
> 
> 时间：2013-03-26T19:18:18.087
> 
> 标签：php, symfony, file-upload

我创建了一个上传文件表单，但出现了一个非常奇怪的错误......当我上传文件时，symfony 看不到 POST 参数。

我的表单类：

```
class UploadDocumentForm extends AbstractType
{
  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder->add('name', 'text', array(
      'label' => 'Nom'
    ));
    $builder->add('file', 'file', array(
      'label' => 'Fichier'
    ));
  }

  public function getName()
  {
    return 'upload_document_form';
  }
} 
```

我的模板：

```
<form action="{{ path('upload_file') }}" enctype="multipart/form-data" method="post">
    {{ form_widget(upload_file_form) }}
    <input type="submit" value="Envoyer le fichier" />
  </form> 
```

我的控制器操作方法：

```
public function uploadAction(Request $request)
  {
    $form = $this->createForm(new UploadDocumentForm(), new Document());
    $form->bind($request);

    if ($form->isValid())
    {
      [...]
    }
    [...]
  } 
```

我的要求（用萤火虫调试）：

```
upload_document_form[name]  blablabla
upload_document_form[file]  ID3����TRCK������03/12TIT2[...]
upload_document_form[_token]    bb5f9925002dafbab[...] 
```

我在 symfony 调试工具栏中的请求：

> 请求 POST 参数
> 
> 无 POST 参数

如果我做一个：

```
die(var_dump($request->get($form->getName()))); 
```

$request 返回空值。

我已经将 /etc/php5/apache/php.ini 的 php.ini 配置为：

> 文件上传 = 开
> 
> upload_max_filesize = 100M
> 
> max_file_uploads = 28

所以，很自然，我的表格是无效的。最奇怪的是，如果我上传一个小文件（~ 4Mo 以下），POST 数据就在这里，一切正常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:39:51.427

**ficuscr**评论是正确的：我需要在我的 php.ini 配置文件中配置**post_max_size 。**

# javascript - 使用 Javascript 扫描 Mongo 数据库并在字符串不相同时触发事件

> ID：15645574
> 
> 赞同：1
> 
> 时间：2013-03-26T19:18:20.013
> 
> 标签：javascript, node.js, mongodb

我正在尝试使用 Javascript 算法来遍历我的 MongoDB，搜索两个相同的 URL，并对标头对象进行分析。

以下是此对象示例的片段：

```
{
    "url": "www.professionalsupplementcenter.com",
    "date": "Tue Mar 26 2013 15:08:31 GMT-0400 (EDT)",
    "headers": {
        "server": "Microsoft-IIS/7.5",
        "x-aspnet-version": "4.0.30319",
        "x-powered-by": "ASP.NET"
    }
} 
```

具体来说，我将有两个系列。这两个集合是 MongoDB 中两个相隔两个月的 HTTP 标头抓取的数据库。让我们称它们为`todayScrape`and `twoMonthFromNowScrape`。通过这两个集合，我想比较它们的头对象，所以，，，，`server`看看`x-aspnet-version`这些`x-powered-by`数字是否有任何升级，EG`IIS/7.5`升级到`IIS/8.0`（将来）。

我没有任何代码要显示，因为我根本不知道如何实现这个系统。我不知道从哪里开始。我想首先比较这两个 URL，然后当程序识别出两个 URL 都存在时，它会对三个标头对象进行特定的比较。然后，它可以通过按顺序扫描这些属性并引发一些事件（例如`console.log("There has been a change")`字符串不相同时）来报告这些属性何时发生更改。

谁能给我任何关于从哪里开始的建议？几天来我一直在这个问题上被困住，被困住令人沮丧。我真的很想开始实施它，但我需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:42:12.980

您需要的第一件事是`npm install mongodb`（如果您还没有）。然后在您的 app.js 文件中：

```
var mongodb = require('mongodb');
var Server = mongodb.Server('127.0.0.1', 27017, {});
new mongodb.Db('scraperapp', Server, {w: 1}).open(function(err, db){
  var scrape = new mongodb.Collection(db, 'scrape');
  var scrapeFuture = new mongodb.Collection(db, 'scrapeFuture');
  scrape.find({url: {$exists: true}}).toArray(function(err, today_docs){
    if(!today_docs) return;
    var scrapeFn = function(i){
      var today_doc = today_docs[i];
      scrapeFuture.findOne({url: today_doc.url}, function(err, future_doc){
        if(!future_doc) return;
        if(today_doc.headers.server != future_doc.headers.server)
          console.log(today_doc.url + ':servers different');
        if(today_doc.headers['x-aspnet-version'] != future_doc.headers['x-aspnet-version'])
          console.log(today_doc.url + ':x-aspnet-versions different');
        if(today_doc.headers['x-powered-by'] != future_doc.headers['x-powered-by'])
          console.log(today_doc.url + ':x-powered-by different');
        if(today_docs[i+1]) scrapeFn(i+1);
      });
    }
    scrapeFn(0);
  });
}); 
```

# ios - iOS - 如何使导航栏的子视图透明？

> ID：15645576
> 
> 赞同：7
> 
> 时间：2013-03-26T19:18:24.553
> 
> 标签：ios, uinavigationbar, uisearchbar

我在为导航栏的某些子视图的 alpha 设置动画时遇到了一些麻烦。这是酒吧的初始状态：

![在此处输入图像描述](../Images/5611c8572167ede99b3d9e699e5fe87b.png)

这是我现在走了多远：

![在此处输入图像描述](../Images/f533d1b543739be9945f90845ceaf8a7.png)

问题是，当搜索处于活动状态时，我需要使所有这些“星”、“新”和其他圆形按钮透明（我需要将它们的 alpha 减少到零）。我试图在委托的以下方法中使它们透明：

```
- (void)searchBarCancelButtonClicked:(UISearchBar *)asearchBar
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 
```

在所有这些中，我执行完全相同的代码：

```
//parent is just a pointer of a search delegate, which points to view controller

for (UIView * someViewToFade in parent.navigationController.navigationBar.subviews) {
  if (someViewToFade.tag == 88 || someViewToFade.tag == 11) {
    NSLog("someViewToFade.alpha before changes = %f", someViewToFade.alpha);
    someViewToFade.alpha = 0.0; //or 1.0, depending on the method
  }
} 
```

但是，我无法以这种方式获得所需的结果，尽管我在该 NSLog 上获得了正确的 alpha 值，但按钮根本不会褪色。关于我可能做错什么有什么建议吗？

编辑1：

我想我应该在我的案例中添加一些视图层次结构的描述。好吧，我有 UISegmentedConrol，它包含这些圆形按钮以及两个 UIImageView、分段控制的背景和三角形指针。所有这些视图都作为子视图添加到导航栏。还有一个矩形视图，它包含搜索栏，并且稍后也作为子视图添加到导航栏，因此它是层次结构中的顶视图。此外，我通过简单地为其超级视图的框架设置动画（扩展或压缩它，当上述事件发生在委托中时）为我的 searchBar 设置动画。我希望我已经提供了所有必要的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:27:27.770

自从我做ios编程以来已经有一段时间了。即使您设置了 alpha，但没有触发重绘，也有可能。[UIView setNeedsDisplay] 可能有助于在下一个绘图周期刷新绘图。

供参考：[强制 UIView 重绘的最可靠方法是什么？](https://stackoverflow.com/questions/1503761/what-is-the-most-robust-way-to-force-a-uiview-to-redraw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:26:34.370

1) 这是 UI 更新问题，在任何 UI 更新代码后写此语句。

```
 [[NSRunLoop currentRunLoop] runUntilDate:[NSDate date]]; 
```

这将更新您的 GUI。

或者

2）在主线程上使用执行选择器并在选择器方法中更新您的 UI。

```
 [self performSelectorOnMainThread:@selector(UpdateUIMethod) withObject:self waitUntilDone:NO]; 
```

# iis - 在 IIS 中记录完整的请求 URL

> ID：15645577
> 
> 赞同：1
> 
> 时间：2013-03-26T19:18:26.327
> 
> 标签：iis

我在我的 Windows 8 开发机器上使用 IIS8。我正在开发一个基于 ASP.NET MVC 4 WebAPI 的应用程序，它与第 3 方服务器交互。

其中一个服务器（Kaltura 内容管理系统）发送一个通知，我无法用我的路由和/或控制器“捕获”该通知。我正在尝试在 IIS 上记录完整请求的 URL 以调查它的语法。

我已安装 IIS 高级日志记录并将其配置为记录所有可用字段（性能计数器除外），但日志不包含 URL 或请求的内容（表单）。

我的问题是，是否可以在 IIS 中记录完整的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:38:09.570

没有记录所有表单字段的默认方式。记录一切会使日志文件很快变大。如果有一种方法可以记录所有内容，这意味着记录视图状态和所有帖子字段（如果您要上传 20MB 文件怎么办）。

如果您想支持这样的事情，您必须创建一个自定义处理程序或在网站代码本身中执行（例如在母版页中，因此您不必将日志记录代码添加到每个页面）。

# java - JPS 只显示 JPS

> ID：15645579
> 
> 赞同：1
> 
> 时间：2013-03-26T19:18:34.493
> 
> 标签：java, eclipse-memory-analyzer

我正在尝试使用[Eclipse Memory Analyzer 分析](http://www.eclipse.org/mat/)我的 Java 应用程序的内存使用情况。它的获取堆工具使用了 JPS 和 JMAP 的组合。由于某种原因，我的应用程序没有被 JPS 列出。

起初没有列出任何内容，所以我认为这可能是权限问题。我在管理员命令提示符下运行它，它开始列出自己，但它仍然不是我的应用程序。

如果我没记错的话，它应该列出我的应用程序和 Eclipse，因为它是一个 Java 应用程序。

这是在 Windows 7 64 位环境中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:37:11.503

的[文档`jps`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jps.html)说明以下内容：

> jps 工具列出目标系统上检测的 HotSpot Java 虚拟机 (JVM)。该工具仅限于报告有关其具有访问权限的 JVM 的信息。
> 
> jps 命令生成的 JVM 列表可能受到授予运行该命令的主体的权限的限制。该命令将仅列出原则具有由操作系统特定访问控制机制确定的访问权限的 JVM。

因此，访问问题肯定会阻止运行命令的用户无权访问或不拥有的进程在输出中列出。

# firefox - Selenium 2 和 Firefox：找不到会话异常

> ID：15645580
> 
> 赞同：0
> 
> 时间：2013-03-26T19:18:35.767
> 
> 标签：firefox, selenium-webdriver

当我尝试使用 Firefox 19 运行测试时，Selenium 返回错误：

> java.lang.NoClassDefFoundError: org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:188) 的 org/openqa/selenium/remote/SessionNotFoundException org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:183) ) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:179) 在 org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:92) 在 systemTests.LoginPageTest.openPage(LoginPageTest.java:25)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ...

当我使用 Chrome 时它工作正常。

有谁知道为什么会这样？它一直工作到一周前。

硒版本：2.31.0

火狐版本：19.0.2

# sql - 试图总结分配百分比

> ID：15645582
> 
> 赞同：0
> 
> 时间：2013-03-26T19:18:40.220
> 
> 标签：sql

我是 SQL 的新手，几乎没有经过培训就被投入其中，因此非常感谢您提供非常简单的答案！我正在尝试查询参与者分配，但我需要将每个乐趣的所有分配加在一起。我目前有以下内容：

```
select external_plan,
   participant_tax_id,
   external_vehicle,
sum (decimal(alloc_rate,15,2)),
   money_type
from trc.vst_partalloc
where external_plan='RF00580'
and money_type='101'
group by alloc_rate,
     external_plan,
   participant_tax_id,
   external_vehicle,
   money_type 
```

这将返回以下示例：

```
EXTERNAL_PLAN   PARTICIPANT_TAX_ID  EXTERNAL_VEHICLE    Alloc_Rate    MONEY_TYPE

RF00580                  #########  DFCEX              0.03 101
RF00580                  #########  ACRNX              0.06 101
RF00580                  #########  STSVX              0.06 101
RF00580                  #########  VISGX             0.06  101
RF00580                  #########  VMVIX              0.06 101
RF00580                  #########  RERGX              0.09 101
RF00580                  #########  DODGX             0.12  101
RF00580                  #########  DRLCX              0.12 101
RF00580                  #########  ABNAK             0.20  101
RF00580                  #########  PTTRX              0.20 101 
```

因此，`#########`代表这些行中的一个参与者，分配率加起来为 100，我需要的是返回的一行不显示`external_vehicle`但总和`alloc_rate`为 100 - 这有意义吗？任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:58:52.123

看起来您需要做的就是从 select 和 group by 子句中删除 External_vehicle 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:40:06.487

简单的答案是从以下位置删除`external_vehicle`amd ：`alloc_rate``group by`

```
select external_plan, participant_tax_id,
       sum (decimal(alloc_rate,15,2)),
       money_type
from trc.vst_partalloc
where external_plan='RF00580' and money_type='101'
group by external_plan, participant_tax_id, money_type 
```

一些评论：

(1) 您不需要在`where`子句和`group by`子句中都包含 external_plan 和 money_type。如果您将它们限制为单个值，则可以使用查询：

```
select participant_tax_id,
       sum (decimal(alloc_rate,15,2))
from trc.vst_partalloc
where external_plan='RF00580' and money_type='101'
group by participant_tax_id 
```

(2) 假设这`alloc_rate`是一个数字类型，您正在为输出目的进行转换。您应该在总和*之后进行转换：*

```
select external_plan, participant_tax_id,
       decimal(sum (alloc_rate),15,2),
       money_type
from trc.vst_partalloc
where external_plan='RF00580' and money_type='101'
group by external_plan, participant_tax_id, money_type 
```

# c - 优化嵌套 for 循环

> ID：15645583
> 
> 赞同：0
> 
> 时间：2013-03-26T19:18:40.497
> 
> 标签：c, linux, optimization

```
for (n = 0; n < L_SUBFR; n++)
{
    s = 0;
    for (i = 0; i <= n; i++)
    {
        s += exc[i] * h1[n - i];
    }
    y1[n] = s;
} 
```

优化版：

```
for (n = L_SUBFR; n != 0; n--)
{
    for (i = n; i != 0; i--)
    {
        y1[n] = y1[n] + exc[i] * h1[n - i];
    }
} 
```

`AMD opteron 6274`编译后我已经在位机上运行了这两个代码，`gcc 4.4.6.`但是，我看不到速度或执行时间的任何增益。

(1) 有什么办法可以进一步优化上述代码？

(2) 谁能告诉我为什么我看不到收益？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:33:37.860

您应该专注于编写可读代码而不是“快速”代码。通过提高算法效率来提高速度：

*通过用快速排序代替朴素排序，而不是`(i != 0)`用`(i)`.*

无论如何，编译器都会为您完成所有这些工作。

* * *

我将引用列出的更新问题回顾一下：

> (1) 有什么办法可以进一步优化上述代码？

当然，您可以用`(i != 0)`and`(n != 0)`替换`(i)`and`(n)`和做各种恶作剧和挑剔代码以使其更快一点，但最终，您不会真正更改任何内容，因为您的编译器进行了更多优化。通常，它可以优化直接生成的程序集。

> (2) 谁能告诉我为什么我看不到收益？

编译器我的朋友。即使编译器在这里没有做任何事情，除非您有纳秒精度的计时器，否则您也不会注意到增益。最终，这取决于您对`L_SUBFR`.

* * *

只是为了好玩，这里有一个编译器可以做什么的例子：

```
unsigned int i = getValue();

if (i >= 10 && i <= 200) {

} 
```

那些看起来如此之少、如此不可简化的代码可以由编译器优化为：

```
unsigned int i = getValue();

if (i - 10 <= 190) {

} 
```

# sql-server - 存储的 proc 订单结果与在查询分析器中运行时不同

> ID：15645588
> 
> 赞同：0
> 
> 时间：2013-03-26T19:18:42.203
> 
> 标签：sql-server, stored-procedures

我有一个存储过程，它在调用时返回以下值：

```
EXEC    @return_value = [dbo].[Activities_GetCrazyTables]
        @iActivity = 49,
        @iLanding = 6,
        @iFirst = 1,
        @iLast = 10,
        @strSearch = '',
        @bActiveOnly = 0 
```

`orderkey``yellowpage_rownum``yellowpage_id``yellowpage_name`
`table4      ``1      ``2022      ` `Cow Mountain`
`table4      ``2      ``2055      ``Lake Mendocino`
`table4      ``3      ``2099      ``Chandelier`

但是，当我在查询分析器中执行存储过程的实际代码时，它返回的结果不同：

`orderkey``yellowpage_rownum``yellowpage_id``yellowpage_name`
`table4      ``1      ``2022      ` `Chandelier`
`table4      ``2      ``2055      ``Cow Mountain`
`table4      ``3      ``2099      ``Lake Mendocino`

与执行存储过程相比，为什么单独运行查询时获得正确的排序顺序？

存储过程的代码如下：

```
set @strSearch = LOWER(@strSearch)

select orderkey, y.* from 
(
    /* get the featured sponsors in order specified in the database */
    select ROW_NUMBER() over (order by x.orderkey) as yellowpage_rownum, x.* 
    from (
    /* top tier featured 1-5 */
    select yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, story_count,
    'table1' as orderkey, yellowpage_active from
    (select top 5 a.* from 
    (select ROW_NUMBER() over (order by yellowpage_name) as rownum, yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, (select COUNT(storyyellowpage_story) from storyyellowpagexref join stories on (story_id=storyyellowpage_story) where story_active=1 and storyyellowpage_yellowpage=y.yellowpage_id) as story_count, yellowpage_active
    from yellowpageactivityxref 
    join activities on (activity_id=yellowpageactivity_activity) 
    join yellowpages y on (yellowpage_id=yellowpageactivity_yellowpage) 
    join landingcities on (landingcity_city=yellowpage_city) 
    where yellowpageactivity_activity=@iActivity and landingcity_landing=@iLanding and yellowpage_featuredsponsor=1 and 
        (LOWER(yellowpage_name) LIKE '%' + @strSearch + '%' or LOWER(yellowpage_address1) LIKE '%' + @strSearch + '%')) as a 
    where a.rownum between 1 and 5 order by newid()) as b
    union all
    /* top tier featured 6-10 */
    select yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, story_count,
    'table2' as orderkey, yellowpage_active from
    (select top 5 a.* from 
    (select ROW_NUMBER() over (order by yellowpage_name) as rownum, yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, (select COUNT(storyyellowpage_story) from storyyellowpagexref join stories on (story_id=storyyellowpage_story) where story_active=1 and storyyellowpage_yellowpage=y.yellowpage_id) as story_count, yellowpage_active
    from yellowpageactivityxref 
    join activities on (activity_id=yellowpageactivity_activity) 
    join yellowpages y on (yellowpage_id=yellowpageactivity_yellowpage) 
    join landingcities on (landingcity_city=yellowpage_city) 
    where yellowpageactivity_activity=@iActivity and landingcity_landing=@iLanding and yellowpage_featuredsponsor=1 and 
        (LOWER(yellowpage_name) LIKE '%' + @strSearch + '%' or LOWER(yellowpage_address1) LIKE '%' + @strSearch + '%')) as a 
    where a.rownum between 6 and 10 order by newid()) as b
    union all
    /* top tier featured 11-15 */
    select yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, story_count,
    'table3' as orderkey, yellowpage_active from
    (select top 5 a.* from 
    (select ROW_NUMBER() over (order by yellowpage_name) as rownum, yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, (select COUNT(storyyellowpage_story) from storyyellowpagexref join stories on (story_id=storyyellowpage_story) where story_active=1 and storyyellowpage_yellowpage=y.yellowpage_id) as story_count, yellowpage_active
    from yellowpageactivityxref 
    join activities on (activity_id=yellowpageactivity_activity) 
    join yellowpages y on (yellowpage_id=yellowpageactivity_yellowpage) 
    join landingcities on (landingcity_city=yellowpage_city) 
    where yellowpageactivity_activity=@iActivity and landingcity_landing=@iLanding and yellowpage_featuredsponsor=1 and 
        (LOWER(yellowpage_name) LIKE '%' + @strSearch + '%' or LOWER(yellowpage_address1) LIKE '%' + @strSearch + '%')) as a 
    where a.rownum between 11 and 15 order by newid()) as b
    union all
    /* get the rest and sort by name */
    select yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, story_count,
    'table4' as orderkey, yellowpage_active from
    (select top 2147483647 a.* from 
    (select yellowpage_id, yellowpage_name, yellowpage_address1, yellowpage_address2, yellowpage_city, yellowpage_state, yellowpage_zip, 
    yellowpage_phone, yellowpage_url, yellowpage_latitude, yellowpage_longitude, yellowpage_featuredsponsor, yellowpage_premium, yellowpage_order, 
    yellowpageactivity_order, (select COUNT(storyyellowpage_story) from storyyellowpagexref join stories on (story_id=storyyellowpage_story) where story_active=1 and storyyellowpage_yellowpage=y.yellowpage_id) as story_count, yellowpage_active
    from yellowpageactivityxref 
    join activities on (activity_id=yellowpageactivity_activity) 
    join yellowpages y on (yellowpage_id=yellowpageactivity_yellowpage) 
    join landingcities on (landingcity_city=yellowpage_city) 
    where yellowpageactivity_activity=@iActivity and landingcity_landing=@iLanding and yellowpage_featuredsponsor=0 and 
        (LOWER(yellowpage_name) LIKE '%' + @strSearch + '%' or LOWER(yellowpage_address1) LIKE '%' + @strSearch + '%')) as a 
    order by yellowpage_name) as b
    ) as x
    ) as y where y.yellowpage_rownum between @iFirst and @iLast 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:30:46.077

您的查询（联合的结果）在没有 order by 语句的情况下运行。这意味着结果的顺序不是确定性的，这意味着它在不同的运行中可能会有所不同。

要解决此问题，您需要在最后一个 where 语句之后添加 Order by Statement：

```
as y where y.yellowpage_rownum between @iFirst and @iLast Order by col1, col2 
```

您还应该消除最后一个查询中的黄色页面名称语句的顺序，因为这与最终结果集的顺序无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:31:26.957

这是一个地狱般的查询，因此很难准确理解正在发生的事情。但是，您`Order By`在完整的结果集上缺少一个。

SQL Server 是一个**关系**数据库。这是这里的关键概念。除非您明确定义您希望的顺序是什么，否则数据库引擎不保证返回的行的顺序。您可以在两个不同的地方使用完全相同的查询并获得不同的结果顺序。

在关系理论中，集合 (A, B, C) 与 (C, B, A) 相同。顺序不相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:32:42.270

好吧，您通过 orderkey 订购，这不是唯一的。具有相同 orderkey 的行不一定以相同的顺序出现。

扩展您的`order by`条款以解决问题。

# android - AutoCompleteTextView 下拉样式被忽略

> ID：15645589
> 
> 赞同：2
> 
> 时间：2013-03-26T19:18:43.923
> 
> 标签：android, android-arrayadapter, autocompletetextview

疯狂......无论我尝试什么，我的`AutoCompleteTextView`节目都会使用默认样式下拉项目。我似乎无法以任何方式访问下拉视图 - 我尝试过在 XML 中设置样式以及在我的适配器中对其进行编码以及对 AutoCompleteTextView 本身进行编码。

`spinner_dropdown_item.xml:`

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
      android:paddingLeft="10dp"
      android:paddingRight="10dp"
      android:paddingTop="15dp"
      android:paddingBottom="15dp"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:textColor="#000"
      android:textSize="16dp"
    /> 
```

我的客户（`LoginFragment.java`）：

```
AutoCompleteTextView user_name = (AutoCompleteTextView) layout.findViewById(R.id.user_name);

final MyAdapter<User> adapter = new MyAdapter<User>(my_activity, my_list);
//does nothing
adapter.setDropDownViewResource(R.layout.spinner_dropdown_item);
//crashes app with no error or anything!
user_name.setDropDownBackgroundResource(R.layout.spinner_dropdown_item);

user_name.setAdapter(user_adapter); 
```

最后，在我的适配器中，它可以完美地为任何微调器设置下拉项的样式，但无法为 AutoCompleteTextView 设置下拉项的样式：

```
@Override
public View getDropDownView(int position, View convertView, ViewGroup parent) {
    TextView tv;
    if (convertView == null) {
        LayoutInflater inflater = LayoutInflater.from(context);
        tv = (TextView) inflater.inflate(R.layout.spinner_dropdown_item, null);
    } else {
        tv = (TextView) convertView;
    }
    T object = objects.get(position);
    String label = NULL_ITEM;
    if (object != null) {
        label = object.toString();
    }
    tv.setText(label);
    return tv;
} 
```

如何更改 AutoCompleteTextView 中的下拉列表，以便下拉文本项以任何方式设置样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:13:33.680

我似乎找到了问题所在。我的 Adapter 类需要在其构造函数中接收所需的布局。不知道为什么它不能在适配器本身中引用所需的布局

# validation - 从结构中替换整个 html 代码块的正确方法是什么？

> ID：15645591
> 
> 赞同：0
> 
> 时间：2013-03-26T19:18:53.510
> 
> 标签：validation, coldfusion

我的问题是我有一个带有所见即所得编辑器的文本区域。

现在，当用户提交表单并且没有在该字段中输入任何内容时，这就是发布的内容： `<span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span><span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span><p><br></p>`

现在，我想将该字段设为必需，并希望进行验证以检查该字段是否为空，但它永远不会真正为空，因为编辑器放置在该 html 中。

所以我想做这样的事情：

```
<cfset searchfor = "&lt;span class=&quot;sceditor-selection&quot; style=&quot;line-height: 0; display: none;&quot; id=&quot;sceditor-end-marker&quot;&gt;&lt;/span&gt;&lt;span class=&quot;sceditor-selection&quot; style=&quot;line-height: 0; display: none;&quot; id=&quot;sceditor-start-marker&quot;&gt;&lt;/span&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;">

    <cfif StructKeyExists(params.event, "summary_en")>
        <cfset 'params.event.summary_en' = Replace('params.event.summary_en', '#searchfor#', "", "All")>
    </cfif>

    <cfif params.event.summary_en eq "">
        ERROR
    <cfelse>
        PROCESS
    </cfif> 
```

但是，上面的代码没有按照我的意愿将 params.event.summary_en 设置为 "" 或 [空字符串]，而是将 params.event.summary_en 放置在 params.event.summary_en 内。

所以出于某种原因，我上面的代码正在替换它：`<span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span><span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span><p><br></p>`

有了这个：`params.event.summary_en`

知道为什么会发生这种情况，以及我是否以正确的方式对该字段进行验证？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:10:50.670

下面的代码在 CF10,282462 上返回 'ERROR' 你使用的是什么版本的 CF？

```
<cfset params.event.summary_en = '<span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span><span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span><p><br></p>' />
<cfset searchfor = '<span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span><span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span><p><br></p>'>

<cfif StructKeyExists(params.event, "summary_en")>
    <cfset params.event.summary_en = Replace(params.event.summary_en,searchfor, "", "All")>
</cfif>

<cfif params.event.summary_en eq "">
    ERROR
<cfelse>
    PROCESS
</cfif> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:43:01.007

如果使用[jsoup](http://jsoup.org/)库

```
<cfset jsoup = CreateObject("java", "org.jsoup.Jsoup")>
<cfset whitelist = CreateObject("java", "org.jsoup.safety.Whitelist")>

<cfset params.event.summary_en = '<span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span><span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span><p><br></p>'>

<cfset safeString = Jsoup.clean(params.event.summary_en, whitelist.none())>

<cfif Len(Trim(safeString))>
    PROCESS
<cfelse>
    ERROR
</cfif> 
```

我`whitelist.none()`只是为了确保从字符串中删除所有标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:29:27.767

如果您曾经有一个大字符串进出不同的引号并且您不想转义它们，您可以随时使用[cfsavecontent](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_r-s_10.html)来保存字符串。

```
<cfSaveContent var = "params.event.summary_en">
<span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span><span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span><p><br></p>
</cfSaveContent> 
```

您只需要注意一些细微差别，例如，上面的代码可能会匹配字符串的精确副本，但由于添加了用于格式化的空白，下面的字符串可能不会匹配。但是，如果您只是将值存储到其他地方输出，它仍然会很好用。

```
<cfSaveContent var = "params.event.summary_en">
    <span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-end-marker"></span>
    <span class="sceditor-selection" style="line-height: 0; display: none;" id="sceditor-start-marker"></span>
    <p>
        <br>
    </p>
</cfSaveContent> 
```

作为记录，您可以在字符串中使用与包含引号相同的引号，但这很难看。

```
<cfset x = "<img src = ""yourImage.jpg"" class = ""yourClass"">"> 
```

# vb.net - TaskDialogStandardIcon 在任务对话框中不起作用

> ID：15645592
> 
> 赞同：1
> 
> 时间：2013-03-26T19:18:57.840
> 
> 标签：vb.net, taskdialog

我正在 vb.net 中创建一个任务对话框，但图标没有出现。（其他一切正常）我正在使用 Microsoft.WindowsAPICodePack.Dialogs。我的代码如下：

```
 Dim commandLink_Send = New TaskDialogCommandLink("btnShowAlternatives", "View Alternative Times", "Select an available time")
    Dim commandLink_Ignore = New TaskDialogCommandLink("buttonIgnore", "Go Back", "Go back to booking form")
    **td.Icon = TaskDialogStandardIcon.Shield**
    td.Caption = "Application Error"
    td.InstructionText = "Booking Clash"
    td.Text = "The application has found a clash in one more of the selected resources"
    td.Cancelable = False
    td.Controls.Add(commandLink_Send)
    td.Controls.Add(commandLink_Ignore)
    AddHandler commandLink_Send.Click, AddressOf eventHandlers.commandLink_send_click
    AddHandler commandLink_Ignore.Click, AddressOf eventHandlers.commandLink_ignore_click 
```

难道我做错了什么

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-28T23:33:31.760

目前，只有 1 种解决方法。您需要从 Opened 事件调用中设置它。像这样的东西：

```
AddHandler yourTD.opened, AddressOf yourTD_Opened 
```

在某处添加如下内容：

```
Private Shared Sub yourTD_Opened(ByVal sender As Object, ByVal e As System.EventArgs)
    yourTD.icon = TaskDialogStandardIcon.Shield
    'And if you prefer you could also
    'yourTD.FooterIcon = TaskDialogStandardIcon.whichevericonyouwant
End Sub 
```

干杯。

# exception - 这个 Ember 异常是什么意思？

> ID：15645595
> 
> 赞同：0
> 
> 时间：2013-03-26T19:19:02.813
> 
> 标签：exception, ember.js, ember-data

创建新记录/模型时出现以下错误：

```
Uncaught Error: Attempted to handle event `willSetProperty` on <App.NewsItem:ember361:null> while in state rootState.loaded.created.inFlight. Called with {reference: [object Object], store: <App.Store:ember299>, name: bodyHTML} 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:36:44.240

似乎是由于应用程序`App.NewsItem`在保存类型模型的实例时更新了属性（称为“bodyHTML”）（`rootState.loaded.created.inFlight`）。我不知道为什么我会收到创建错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T11:03:16.610

似乎您正在修改现有的脏对象，或者您正在尝试将某些属性设置为未定义

看

> [http://coryforsyth.com/2013/06/10/the-willsetproperty-gotcha-in-ember-data-understanding-the-state-machine/](http://coryforsyth.com/2013/06/10/the-willsetproperty-gotcha-in-ember-data-understanding-the-state-machine/)

# ruby-on-rails - 为多个 Ruby-on-Rails 应用程序运行多个版本的 Passenger

> ID：15645596
> 
> 赞同：2
> 
> 时间：2013-03-26T19:19:03.793
> 
> 标签：ruby-on-rails, apache, passenger

在我安装了Passenger Apache2 模块后，它给了我类似的东西：

```
LoadModule passenger_module /home/passenger/.rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /home/passenger/.rvm/gems/ruby-1.9.2-p290/gems/passenger-3.0.17
PassengerRuby /home/passenger/.rvm/wrappers/ruby-1.9.2-p290/ruby 
```

（对不起，我有一个名为 的用户帐户`passenger`。不要混淆。）

因此，如果我想部署另一个使用完全不同版本的 ruby​​ 的 rails 应用程序，那么我相信它会提供与上述配置类似但具有不同 ruby​​ 版本的东西，例如：

```
LoadModule passenger_module /home/passenger/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /home/passenger/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
PassengerRuby /home/passenger/.rvm/wrappers/ruby-1.9.3-p194/ruby 
```

那么如何配置 Apache2（我不是在询问虚拟主机部分）？因为有两个版本`LoadModule passenger_module`。我不认为一个 Apache2 服务器可以加载两个不同的版本`passenger_module`，对吧？

我很混乱。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T08:52:37.183

从 4.0.0 版开始，Passenger 支持多个 Ruby 解释器。`PassengerRuby`config 选项已成为每个虚拟主机的选项，因此您可以基于每个应用程序自定义 Ruby 解释器。

对于乘客 3，您必须使用代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:00:52.583

对于乘客 3.x：phusion 的一种解决方案是使用 mod_proxy 绑定到独立乘客：http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/ [I](http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/) ' m 不确定在 100%，但在 99%，您不能加载两个版本的乘客模块，因为它们会在配置变量（如 PassengerRoot、PassengerRuby）上发生冲突，这些变量仅限于服务器范围

# android - 如何在travis-ci上显示android模拟器的logcat？

> ID：15645602
> 
> 赞同：1
> 
> 时间：2013-03-26T19:19:29.937
> 
> 标签：android, github, continuous-integration, android-logcat, travis-ci

我在 GitHub 上有一个使用 Travis-ci 进行持续集成的 Android 项目。

[构建当前失败](https://travis-ci.org/stephanenicolas/Quality-Tools-for-Android)，我需要显示模拟器的 logcat 以查找有关自动构建期间发生的问题的更多详细信息。

我试图同时添加：

```
after_failure:
  - adb logcat 

after_script:
  - adb logcat 
```

但是这两个命令都不会被执行。

也许这是由于 travis-ci java 项目构建在执行`mvn install`真正的脚本之前执行命令并且两个命令都没有执行......我真的被卡住了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T06:58:16.497

我认为您已经不需要它，但我会尝试回答这个问题。

您需要添加`--all`标志，否则这些包不可用。

Google 已弃用该`-p --obsolete`标志，并且只有建议的（较新的）包不带`-a --all`标志可用。

请参阅[缺少的构建工具 - 第 56 行](https://travis-ci.org/stephanenicolas/Quality-Tools-for-Android/jobs/18750302#L56)

```
 echo "y" | android update sdk --filter platform-tools,build-tools-17.0.0,android-16,extra-android-support,$ANDROID_SDKS --no-ui --force > /dev/null
Error: Missing platform-tools
Error: Missing platform-tools
Error: Ignoring unknown package filter 'build-tools-17.0.0' 
```

目前建议使用最新的平台工具，但始终不带`--all`标志，但：

```
$ ./android update sdk -u -t build-tools-17.0.0
Error: Ignoring unknown package filter 'build-tools-17.0.0'
Warning: The package filter removed all packages. There is nothing to install.
         Please consider trying to update again without a package filter.
$ ./android update sdk -a -u -t build-tools-17.0.0
Packages selected for install:
- Android SDK Build-tools, revision 17 
```

可能缺少构建工具和 android-17 平台是[找不到属性文件的原因。](https://travis-ci.org/stephanenicolas/Quality-Tools-for-Android/jobs/18750302#L399)

我在[这里](https://stackoverflow.com/questions/22581057)看到了 travis-lint 的解决方法，我不使用它。

* * *

这是我用于日志的当前工作，需要改进但适用`-e`于模拟器。您需要自定义您的`MOD_NAME`.

> ```
> # adb -e: direct an adb command to the only running emulator. Return an error if more than one.
> 
> before_script:   
>   # - echo 'LOGCAT'   
>   # Check logcat debug output: http://developer.android.com/tools/help/logcat.html
>   # Check debugging log: http://developer.android.com/tools/debugging/debugging-log.html
>   # Comment the lines belows to debug output and redirect it to a file. Custom tags for your app.
>   - adb -e logcat *:W | tee logcat.log > /dev/null 2>&1 &
> 
> after_failure:
>   # - echo 'FAILURE'
>   # Check apt configuration: http://docs.travis-ci.com/user/ci-environment/#apt-configuration
>   # Comment out the lines below to show log about tests with app name customized on exports section.
>   - sudo apt-get install -qq lynx
>   - export MOD_NAME=yourappmodulename
>   - export LOG_DIR=${TRAVIS_BUILD_DIR}/${MOD_NAME}/build/outputs/reports/androidTests/connected/
>   - lynx --dump ${LOG_DIR}com.android.builder.testing.ConnectedDevice.html > myConnectedDevice.log
>   - lynx --dump ${LOG_DIR}com.android.builder.testing.html > myTesting.log
>   - for file in *.log; do echo "$file"; echo "====================="; cat "$file"; done || true
> 
> after_script:
>   # Uncomment the line below to kill adb and show logcat output.
>   - echo " LOGCAT "; echo "========"; cat logcat.log; pkill -KILL -f adb 
> ```

我正在寻找一个预安装的替代方案，`lynx`因为`sudo`它不能使用基于容器的基础设施，并且`cat`真的用于连接文件，如果有人知道改进它，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:41:48.843

经过一些额外的尝试，我可以通过以下任一方式获得 logcat：

```
 #build 25
 #run all tests 
  - mvn clean install -DskipTests=false
 #build 26
  - adb logcat & 
```

在 before_install tr​​avis 阶段。

我绕过了 Travis 的 mvn install -DskipTests=true 。尽管如此，我无法在常规构建期间获得任何方法来获取 logcat。任何想法 ？

# java - 单击时，ActionBar 图标图像不执行任何操作？

> ID：15645605
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:19:40.453
> 
> 标签：java, android, xml, android-actionbar

我正在关注 ActionBar 的 Google API 库，但无法让它导航回家。LogCat 没有捕获任何内容......所以没有错误，但语法不允许导航。

我还要承认我也没有太多使用 Actionbar 的经验。

我不明白为什么这不起作用，非常感谢您的帮助。

这是我的活动代码：

```
 @SuppressLint("NewApi")
public class MoveContactsActivity extends ListActivity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_move_contacts);
//      getActionBar().setHomeButtonEnabled(true);
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setTitle("My Relocation");
        actionBar.setIcon(R.drawable.menu_ic_launcher);
        Bundle bundle = getIntent().getExtras();
        final TextView welcomeText = (TextView) findViewById(R.id.WelcomeText);
        final TextView relocationId = (TextView) findViewById(R.id.relocationID);
        final TextView addressOne = (TextView) findViewById(R.id.addressOne);
        final TextView addressTwo = (TextView) findViewById(R.id.addressTwo);
        final String RelocationId = bundle.getString("UID1");
        relocationId.setText("Your Relocation: #" + RelocationId);
        new contentCall().execute("");

        findViewById(R.id.WebAddressTwo).setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                Uri uri = Uri.parse("http://www.Relocationmw.com");
                Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                startActivity(intent);
            }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_move_contacts, menu);
        return true;
    }

    private class contentCall extends AsyncTask<String, Void, String> {
        ProgressDialog dialog = new ProgressDialog(MoveContactsActivity.this);

        @Override
        protected void onPreExecute() {
            if (checkNullState() == false) {
                showMyDialog();
            }
        }

        @Override
        protected String doInBackground(String... params) {
            String xml = null;
            String calling = "https://demo.relocationmw.com/ws_docmgmt/mobile.asmx/GetRelocationMoveContactsTrim?UserID=";
            Bundle bundle = getIntent().getExtras();
            // String UID = bundle.getString("UID");
            String UID = "801";
            String URL = calling + UID;
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(URL);
            HttpResponse httpResponse;
            try {
                httpResponse = client.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return xml;
        }

        @Override
        protected void onPostExecute(String result) {
            String xml = result;
            String KEY_ITEM = "Contact";
            String KEY_CONTACTTITLE = "ContactTitle";
            String KEY_NAME = "Name";
            String KEY_MAINPHONE = "Phone";
            String KEY_CELLPHONE = "Cell";
            String KEY_FAX = "Fax";
            String KEY_EMAIL = "Email";
            ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

            Document doc = getDomElement(xml);
            if (xml != null) {
                {
                    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                    for (int i = 0; i < nl.getLength(); i++) {
                        HashMap<String, String> map = new HashMap<String, String>();
                        Element e = (Element) nl.item(i);
                            map.put(KEY_CONTACTTITLE, getValue(e, KEY_CONTACTTITLE));
                            map.put(KEY_NAME, getValue(e, KEY_NAME));
                            map.put(KEY_MAINPHONE, getValue(e, KEY_MAINPHONE));
                            map.put(KEY_CELLPHONE, getValue(e, KEY_CELLPHONE));
                            map.put(KEY_FAX, getValue(e, KEY_FAX));
                            map.put(KEY_EMAIL, getValue(e, KEY_EMAIL));
                        menuItems.add(map);
                    }

                    String[] hashMapObjects = { KEY_CONTACTTITLE, KEY_NAME,
                            KEY_MAINPHONE, KEY_CELLPHONE, KEY_FAX, KEY_EMAIL };
                    int[] listItemObjects = { R.id.ContactTitle, R.id.Name,
                            R.id.MainPhone, R.id.Cell, R.id.Fax, R.id.Email };
//              ContactListAdapter adapter = new ContactListAdapter(MoveContactsActivity.this, 0, menuItems);
                    SimpleAdapter adapter = new SimpleAdapter (MoveContactsActivity.this,menuItems,R.layout.listed_contacts,hashMapObjects, listItemObjects);
                    SimpleAdapter.ViewBinder binder = new SimpleAdapter.ViewBinder() {

                        @Override
                        public boolean setViewValue(View view, Object object,
                                String value) {
                            if(!(view instanceof TextView)){
                                return false;
                            }
                            final TextView text = (TextView) view;
                            text.setVisibility(TextUtils.isEmpty(value) ? View.GONE : View.VISIBLE);
                            text.setText(value);
                            return true;
                        }
                    };
                    adapter.setViewBinder(binder);
                     setListAdapter(adapter);
                }
                if (checkNullState() == true) {
                    dismissMyDialog();
                }
            }
        }
    }

    protected void onProgressUpdate(Map... values) {
    }

    // XML Parsing Start
    public Document getDomElement(String xml) {
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }
        // return DOM
        return doc;
    }

    public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return getElementValue(n.item(0));
    }

    public final String getElementValue(Node elem) {
        Node child;
        if (elem != null) {
            if (elem.hasChildNodes()) {
                for (child = elem.getFirstChild(); child != null; child = child
                        .getNextSibling()) {
                    if (child.getNodeType() == Node.TEXT_NODE) {
                        return child.getNodeValue();
                    }
                }
            }
        }
        return null;
    }

    // XML Parsing Stop

    // ProgressDialog Tracking
    private ProgressDialog pd1;
    private boolean isMyDialogShowing;

    boolean checkNullState() {
        boolean test;
        if (pd1 != null) {
            test = true;
        } else {
            test = false;
        }
        return test;
    }

    void showMyDialog() {
        isMyDialogShowing = true;
        pd1 = new ProgressDialog(MoveContactsActivity.this);
        pd1.setTitle("Contacts");
        pd1.setMessage("Loading Contacts....");
        pd1.show();
    }

    void dismissMyDialog() {
        pd1.dismiss();
        isMyDialogShowing = false;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
        case R.id.menu_settings:
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

这是菜单 XML .....这是我认为问题所在，但就像我说的，我对 ActionBar 还不是很好。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>

</menu 
```

>

当我将大小写更改为时，这是 LogCat 错误

```
case android.R.id.home: 
```

日志猫：

```
03-26 13:45:40.666: E/AndroidRuntime(19152): FATAL EXCEPTION: main
03-26 13:45:40.666: E/AndroidRuntime(19152): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testingapp/com.testingapp.HomeActivity}: java.lang.NullPointerException
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.os.Looper.loop(Looper.java:137)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at java.lang.reflect.Method.invokeNative(Native Method)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at java.lang.reflect.Method.invoke(Method.java:511)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at dalvik.system.NativeStart.main(Native Method)
03-26 13:45:40.666: E/AndroidRuntime(19152): Caused by: java.lang.NullPointerException
03-26 13:45:40.666: E/AndroidRuntime(19152):    at com.testingapp.HomeActivity.onCreate(HomeActivity.java:50)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.Activity.performCreate(Activity.java:5206)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-26 13:45:40.666: E/AndroidRuntime(19152):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-26 13:45:40.666: E/AndroidRuntime(19152):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:12:48.243

菜单或主页没有任何磨损。
您试图访问类`NULL`上`onCreate()`函数的对象的问题`HomeActivity`。
检查 HomeActivity.java 的第 50 行

```
Caused by: java.lang.NullPointerException
at com.testingapp.HomeActivity.onCreate(HomeActivity.java:50) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T19:43:57.017

对我来说，这个代码只适用：

```
@Override
protected void onCreate(Bundle savedInstanceState) {    
    // your code goes here...
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);        
    actionBar.setHomeButtonEnabled(true);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);

    if (item.getItemId() == android.R.id.home) {
        finish();
    }

    return true;
} 
```

# javascript - 如何将 0 的值赋给变量？

> ID：15645606
> 
> 赞同：0
> 
> 时间：2013-03-26T19:19:55.147
> 
> 标签：javascript, variables

Javascript函数1：

```
var count = 0;

function myFunction()
{
count++;
document.getElementById("count").innerHTML=count;
} 
```

Javascript函数2：

```
function demo() {
var y=document.getElementById("count").innerHTML;
if(y=="0") {
alert("There's nothing to be reset.");
}
else {
var count=0;
alert("Reset.");
// alternative code I used: document.getElementById("count").innerHTML="0";
}
} 
```

HTML 代码：

```
<a href="Javascript:myFunction()">Click here</a>
<p>Total:<span id="count">0</span></p>
<button onclick="demo()">reset</button> 
```

有没有办法在这段代码中将变量重置为 0？

我尝试使用并添加到变量将变量重置`count`为零。这些都不起作用。例如，如果用户要单击链接，则计数将增加到 1。当他们单击重置按钮时，它似乎会重置为 0（除非使用 `var count=0;）。但是，如果用户再次单击该链接，则计数将返回值 2，因为它可以简单地从前一次继续增加。`document.getElementById()``=0;`

如果这已经在其他地方得到了回答，我很抱歉，但是很难搜索这些术语`=`和`++`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:22:10.260

您通过使用使其成为局部变量`var`

```
else {
    var count=0;
    alert("Reset."); 
```

应该

```
else {
    count=0;
    alert("Reset."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:22:17.527

两件事情：

1.  摆脱`var`重置变量的位置。这为您提供了一个具有相同名称的单独局部变量。

2.  使用“count”作为变量名，如果它是全局的，如果在 DOM 中还有一个 id 为“count”的元素，则会导致问题。使用不同的变量名或不同的 id，或确保该变量不是全局变量（无法从发布的代码中看出）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:25:44.823

您需要在代码中更改的内容是：

并进行比较

```
 if(parseInt(y) === 0) // You are converting it to integer and doing a strict check 
```

else 构造为

```
 else {
    count = 0;
    alert('Reset');
  } 
```

# c++ - 递归函数从整数向量创建每个整数模式

> ID：15645607
> 
> 赞同：0
> 
> 时间：2013-03-26T19:19:58.643
> 
> 标签：c++, recursion

可以说我有一个整数向量的向量。<1,2,3,4>，<5,6,7,8>，<10,11,12,13>

如何创建一个函数来创建每个不同模式的向量向量？

<1,5,10> , <1,5,11>, <1,5,12>, <1,5,13> <1,6,10> , <1,6,11>, <1, 6,12>, <1,6,13> <1,7,10> , <1,7,11>, <1,7,12>, <1,7,13> <1,8,10> , <1,8,11>, <1,8,12>, <1,8, 13> <2,5,10>, <2,5,11>, <2,5,12>, <2 ,5,13>

这个函数应该能够接收任意数量的整数向量。

我想要的是我的向量的笛卡尔积，但我找不到可以采用任意数量的整数向量的递归函数。

如果我有整数向量的设定数量，我只需要嵌套 for 循环，但我需要它是递归的，以便它可以采用任意数量的整数向量。

# android - 屏幕锁定时活动返回纵向

> ID：15645611
> 
> 赞同：3
> 
> 时间：2013-03-26T19:20:27.203
> 
> 标签：android, android-activity, android-lifecycle, android-orientation, lockscreen

相关问题：

*   [https://stackoverflow.com/questions/15648713/strange-behaviour-while-screen-lock-in-landscape](https://stackoverflow.com/questions/15648713/strange-behaviour-while-screen-lock-in-landscape)

* * *

这是我在活动中遇到的一种奇怪行为。

人像模式（正常）

1.  按屏幕锁定，`Activity: onPause()`;
2.  解锁屏幕，`Activity: onResume()`.

横向模式（很奇怪）

1.  按屏幕锁定，`Activity: onPause() -> onStop() -> onDestroy() -> onCreate() -> onStart() -> onResume()`加载*纵向*布局；
2.  解锁屏幕`Activity: onPause() -> onStop() -> onDestroy() -> onCreate() -> onStart() -> onResume()`并加载*横向*布局。

我期望的是：

人像模式：（同）

横向模式：（应该像纵向模式一样）

1.  按屏幕锁定，`Activity: onPause()`;
2.  解锁屏幕，`Activity: onResume()`.

所以我的问题：

*   为什么我的活动会这样？
*   您的活动表现如何？

* * *

我的问题的原文描述：

当我按下手机的锁定屏幕按钮时，当我的活动处于横向模式时，我注意到（在我输出到 Eclipse 的调试消息中）活动被重新创建为纵向模式（当屏幕全黑时，当然）。然后，当我再次按下锁定屏幕按钮以解锁屏幕时，活动被破坏并再次重新创建为其肖像。

我记得（虽然不是 100% 肯定），我期望的是，我的 Activity 应该只经历`onSaveInstanceState()`and `onPause()`，而在横向模式下锁定屏幕，就像它在纵向模式下所做的那样。而不是将活动重新创建为纵向并再次返回到横向。

是不是我的手机搞砸了什么？我怎样才能让它恢复正常？

谢谢！

* * *

感谢大家为这个问题做出贡献。特别感谢@HoanNguyen 在他的设备中为我进行的测试。特别感谢@Raghunandan 与我就这个问题进行了深入讨论。

总结到目前为止大家的贡献，我有以下结论：

# 1\. 这是正常现象。

看来，在手机上，处于横向模式的正在运行的活动在屏幕锁定时切换到纵向模式是正常行为。至少到目前为止，在经过测试的手机上是这样。所以我们必须确保我们的生命周期函数能够始终优雅地处理这种变化。

# 2.猜猜这是因为锁定屏幕中的“默认方向”。

我们没有关于此问题的文档或许多资源。但是假设正在运行的活动在屏幕锁定时切换回设备的“默认方向”，因为在大多数设备中锁定的屏幕是纵向的，这是非常合乎逻辑的。

### 进一步研究：

我只是想知道如果我们有一个横向锁定屏幕，活动会如何表现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:40:49.900

您可以阻止活动在方向更改时重新启动，但这通常是一个非常糟糕的主意。

Android 文档中有[一个关于使用此注释处理运行时更改的部分：](http://developer.android.com/guide/topics/resources/runtime-changes.html)

> 注意：自己处理配置更改会使使用替代资源变得更加困难，因为系统不会自动为您应用它们。当您必须避免由于配置更改而重新启动并且不建议用于大多数应用程序时，应将此技术视为最后的手段。

如果您不需要备用资源*并且*更重要的是有性能要求，Android 通常只建议您禁止重新创建轮换。在大多数情况下，设计良好的应用程序不需要这样做。

如果您坚持走抑制默认 Android 行为的道路，我会修改 Raghunandan 的代码并包含屏幕尺寸属性。从 API 级别 13 开始，屏幕尺寸会随着方向的变化而变化。因此，除非您只针对 API 12 及以下版本，否则您必须包含 screenSize。

```
<activity android:name=".MyActivity"
      android:configChanges="orientation|screenSize"
      android:label="@string/app_name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:36:49.007

避免活动重新启动

```
<activity android:name=".MyActivity"
      android:configChanges="orientation|keyboardHidden"//add tthis in manifest
      android:label="@string/app_name"> 
```

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

在正常情况下，当您的屏幕锁定时，您的活动会暂停，而当屏幕解锁时，活动会恢复。

锁屏时的一个问题是：**当前Activity如果发现内存不足可能会被系统强行停止，而不是把Activity移到后台**。在这种情况下，我们应该保存（所有必要的数据）活动的当前状态。

将数据保存在 onSaveInstanceState() 并恢复数据 onRestoreInstanceState()。

```
@Override
 public void  onSaveInstanceState(Bundle outState)
 {
  Log.v("$````$", "In Method: onSaveInstanceState()");
  //if necessary,set a flag to check whether we have to restore or not
  //handle necessary savings…
 }

@Override
public void onRestoreInstanceState(Bundle inState)
{
  Log.v("$````$", "In Method: onRestoreInstanceState()");
  //if any saved state, restore from it…
} 
```

在你的 onCreate()

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_OFF);
filter.addAction(Intent.ACTION_USER_PRESENT);

mReceiver = new ScreenReceiver();
registerReceiver(mReceiver, filter); //register

public class ScreenReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent)
   {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF))
        {    
              Log.v("$$$$$$", "In Method:  ACTION_SCREEN_OFF");
              // onPause() will be called.
        }
        else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON))
        {
              Log.v("$$$$$$", "In Method:  ACTION_SCREEN_ON");
              //onResume() will be called.
              //Better check for whether the screen was already locked
              // if locked, do not take any resuming action in onResume()
              //Suggest you, not to take any resuming action here.       
        }
        else if(intent.getAction().equals(Intent.ACTION_USER_PRESENT))
        {
              Log.v("$$$$$$", "In Method:  ACTION_USER_PRESENT"); 
              //Handle resuming events
        }
  } 
```

在你的 onDestroy

```
 @Override
  public void onDestroy()
  {
        super.onDestroy();
        Log.v("$$$$$$", "In Method: onDestroy()");

        if (mReceiver != null)
        {
              unregisterReceiver(mReceiver); //unregister 
              mReceiver = null;
        }          

  } 
```

# ruby-on-rails - 不存在的哈希键的那种丑陋的默认值？

> ID：15645619
> 
> 赞同：2
> 
> 时间：2013-03-26T19:20:40.733
> 
> 标签：ruby-on-rails, hash

我正在使用一个返回哈希来表示产品的 API：

```
prod = API.getProduct(id)
prod["name"] => "Widget" 
```

问题的出现是因为并非所有产品都包含相同的属性页面，所以我发现自己做了很多一次性的错误捕捉——有些产品会有`size`or的键`color`，有些则没有。

最简单的到达方式是`prod["non-existent attribute"] => "NA"`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:32:09.980

正如戴夫牛顿所说，您可以将默认值添加到哈希构造函数中：

```
hash = Hash.new { |hash, key| hash[key] = "NA" }
hash[:anything] == "NA" # => true 
```

或者使用以下`#default`方法：

```
hash = Hash.new
hash.default = "NA"
hash[:anything] == "NA" # => true 
```

**编辑**初始化哈希时设置默认值的快速语法是：

```
hash = Hash.new("NA")
hash[:anything] == "NA" # => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:24:36.933

看看这个： [http](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-default)
://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-default 你可以使用`prod.default = "NA"`.

# php - 如何解析特定的 json 数据响应？

> ID：15645621
> 
> 赞同：0
> 
> 时间：2013-03-26T19:20:45.913
> 
> 标签：php, javascript, ajax, json, parsing

这几天一直在拔头发。

我想使用 Get 方法从字符串响应中解析一条数据。

我正在使用的 php 代码：

```
 <?
    include "function.php";
    $request_rest->setMethod("GET");
    $result = $request_rest->execute();
    $response_status = $result[0];
    $json_response_data = $result[1];
    if ($response_status == "200") {
        echo $json_response_data;
    } else {
        echo $response_status ." - connection failure";
    }
    ?> 
```

我得到的结果：

```
 {"data1":"value1",
       "data2":"value2",
       "data3":"value3",
       "data4":"value4",
       "data5":"value5"} 
```

我只想为我的输出显示“value3”，但我得到的是完整的字符串响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:24:22.627

如果您知道所需数据的密钥（data3 部分），则可以对 json_response_data 进行 json_decode：

```
if ($response_status == "200") {
  $decoded = json_decode($json_response_data);
  echo $decoded['data3'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:24:06.317

[解码 JSON 数据](http://php.net/json_decode)并像访问任何其他数组一样访问它：

```
$data = json_decode($json_response_data, TRUE);
echo $data['data3']; 
```

# javascript - 使用 jquery 更改类 onClick

> ID：15645626
> 
> 赞同：-2
> 
> 时间：2013-03-26T19:20:52.770
> 
> 标签：javascript, jquery

我有一个使用 class="active" 显示活动状态的导航。单击链接时，我需要将“活动”类添加到单击的链接中，并从所有其他链接中删除“活动”类。

这是我的代码：

```
<div id="referNav">
<div id="referLink1"><a href="javascript:;" onClick="changeClass();" class="active"></a></div>
<div id="referLink2"><a href="javascript:;" onClick="changeClass();" class=""></a></div>
<div id="referLink3"><a href="javascript:;" onClick="changeClass();" class=""></a></div>
</div> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:22:15.483

尝试这个：

```
function changeClass() {
    $('#referNav a').removeClass('active');
    $(this).addClass('active');
} 
```

您还应该像这样在 javacript 中绑定函数：

```
$('#referNav a').on('click', changeClass); 
```

这样，正如 Travis J 在评论中指出的那样，`$(this)`将引用正确的对象。

[jsFiddle](http://jsfiddle.net/jJgRQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:23:24.390

您需要做的是创建一个名为的函数，该函数`changeClass`将查找`class="active"`然后删除该类。然后将类名分配给`active`刚刚单击的元素。将被点击的元素传递给函数将是有益的，这样您就会知道点击了哪个元素。否则，您可以使用全局对象`event`并查看当前`targetElement`是什么。

我不愿意仅仅展示一个解决方案，因为这种类型的问题是不被鼓励的。人们应该做自己的工作。但是，由于这是一个简单的情况：**[jsFiddle demo](http://jsfiddle.net/xkUb8/)**

```
$("div[id^=referLink] a").click(function(){
 $('#referNav .active').removeClass('active');
 $(this).addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:25:14.583

我的解决方案

```
 $('#referNav').on('div','click',functin(e){
    $(e.target).closest('div[class^="referLink"]').siblings().find('a').removeClass('active');
    $(e.target).closest('div').find('a').addClass('active');
    }); 
```

# c++ - linux / MSVC 2012中的管道不稳定行为

> ID：15645628
> 
> 赞同：2
> 
> 时间：2013-03-26T19:20:55.707
> 
> 标签：c++, gnuplot

我有一个粒子系统，我基本上跟踪它的坐标。到目前为止，我正在输出文件中的所有坐标，然后使用 gnuplot 脚本绘制它们并使用 ffmpeg 从 PNG 中创建视频。为了跳过所有的文件 I/O，我首先尝试使用 OpenGL，但无济于事，所以我想为 gnuplot 设置一个管道。

我在 MSVC 2012 中这样做：

```
FILE *gnuplotpipe = _popen(GNUPLOT_NAME, "w");
setvbuf(gnuplotpipe, NULL, _IONBF, NULL);
//setbuf(gnuplotpipe, NULL);
fprintf(gnuplotpipe,"set term png\n");
fprintf(gnuplotpipe,"set size 720, 480\n");
fprintf(gnuplotpipe,"set size ratio -1\n");
fprintf(gnuplotpipe,"unset key\n");
fprintf(gnuplotpipe,"set xrange [-%d:%d]\n", RANGE+100,RANGE+100);
fprintf(gnuplotpipe,"set yrange [-%d:%d]\n", RANGE+100,RANGE+100);
for(time-steps)
    //do stuff
    fprintf(gnuplotpipe,"plot '-'\n");
    for(all particles)
          // calculate coordinates
          fprintf(gnuplotpipe,"%f %f\n", particle[i]->x, particle[i]->y);
    end for
    fprintf(gnuplotpipe, "e\n");
    //fflush(gnuplotpipe);
end for
_pcloce(gnuplotpipe); 
```

并相应地在 linux 中使用`gnuplot -persist`而不是`pgnuplot -persist`,`popen`和`pclose`, 而`setbuf`不是`setvbuf`. 这已经有很多试验和错误。

在linux中它是相当一致的。我可以`plot '-'`在控制台中看到每个时间步的命令，然后是难以理解的文本。什么都没有打开。在 Windows 中这很神奇，因为有时它会起作用，我可以在 gnuplot“MS Windows”窗口上看到数据流（我的意思不是控制台输出，这本身就很神奇，因为我没有使用 wgnuplot_pipes.exe）。没有绘制任何内容。窗口关闭。其他时间会绘制几个时间步，但每个时间步在不同的窗口中。有时，它会崩溃或它会工作但发送难以理解的文本。

我大部分时间都在使用 100 个粒子。我可以有多达 10,000 个时间步长。不知道是不是很多。尽管我将缓冲区设置为 NULL，但我怀疑 Windows 中存在中断或其他问题。我在 VirtualBox 中的 Win7 x64 中的 MSVC 和 Linux Mint x64 中的 Qt 中工作。我正在使用 gnuplot 4.7 (win) 和 4.6.0.8 (linux)。我在 SO 中进行了相当广泛的研究，我发现的唯一问题是它`-persist`在 Windows 中并没有真正持续存在。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:33:19.043

只是这样问题就不会没有答案..这是您的程序的 python 版本，带有 x11 终端。它建立了一个带有愚蠢动画的窗口。

不过请注意，如果其他一些驱动程序尝试为每一帧打开一个窗口，我一点也不感到惊讶

```
import subprocess
f=subprocess.Popen(['/usr/bin/gnuplot','-persist'],
                      stdin=subprocess.PIPE,shell=False)
f.stdin.write('set term x11 \n')
f.stdin.write('set yrange [-2:2]\n')
import math
i=0
d=1
count=0
while count<1000 :
 count+=1
 if abs(i)==50 : d *= -1
 i+=d 
 f.stdin.write('plot \'-\' with linespoints pt 4 ps 2 \n')
 for j in range(0,500):
  f.stdin.write('%f %f\n'%(float(j),math.sin(float(j)/float(abs(i)+1))))
 f.stdin.write('e\n') 
```

# notepad++ - Notepad++ 中的 C++ 文件中的函数列表

> ID：15645630
> 
> 赞同：1
> 
> 时间：2013-03-26T19:20:58.073
> 
> 标签：notepad++

Notepad++ 中是否有列出 C++ 文件中存在的所有函数的方法或插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:17:38.137

[在这里](http://sourceforge.net/projects/npp-plugins/files/Function%20List/)找到了一个名为**Function List的插件**

# php - 将 Facebook 帖子拉入网页时出现超链接问题

> ID：15645631
> 
> 赞同：0
> 
> 时间：2013-03-26T19:20:58.083
> 
> 标签：php, facebook, curl

我正在使用以下脚本从我的 Facebook 页面中提取最新帖子。

它按预期执行此操作，但是，如果 Facebook 帖子包含超链接，则链接会出现乱码并且不再有效。如果您可以使用我的代码，请尝试一下 - 确保已安装 curl。

```
<?php
$url = "http://www.facebook.com/feeds/page.php?id=466171083413035&format=json"; 

// disguises the curl using fake headers and a fake user agent. 
function disguise_curl($url) 
{ 
  $curl = curl_init(); 

  // Setup headers - the same headers from Firefox version 2.0.0.6 
  // below was split up because the line was too long. 
  $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,"; 
  $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"; 
  $header[] = "Cache-Control: max-age=0"; 
  $header[] = "Connection: keep-alive"; 
  $header[] = "Keep-Alive: 300"; 
  $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7"; 
  $header[] = "Accept-Language: en-us,en;q=0.5"; 
  $header[] = "Pragma: "; // browsers keep this blank. 

  curl_setopt($curl, CURLOPT_URL, $url); 
  curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla'); 
  curl_setopt($curl, CURLOPT_HTTPHEADER, $header); 
  curl_setopt($curl, CURLOPT_REFERER, ''); 
  curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate'); 
  curl_setopt($curl, CURLOPT_AUTOREFERER, true); 
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
  curl_setopt($curl, CURLOPT_TIMEOUT, 10); 

  $html = curl_exec($curl); // execute the curl command 
  curl_close($curl); // close the connection 

  return $html; // and finally, return $html 
} 

// uses the function and displays the text off the website 
$text = disguise_curl($url); 

$json_feed_object = json_decode($text);

$i = 0;

foreach ( $json_feed_object->entries as $entry )
{
    echo "<h2>{$entry->title}</h2>";
    $published = date("g:i A F j, Y", strtotime($entry->published));
    echo "<small>{$published}</small>";
    $content = preg_replace("/<img[^>]+\>/i", "", $entry->content);
    echo "<p style='word-wrap:break-word;'>{$content}</p>";
    echo "<hr />";
$i++;
if ($i == 1) { break;}
}
?> 
```

**编辑** 我的超链接显示为： `<a href="/l.php?u=http%3A%2F%2Fwww.empireonline.com%2Fnews%2Fstory.asp%3FNID%3D36903&amp;h=AAQFjtw9e&amp;s=1" target="_blank" rel="nofollow nofollow" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/www.empireonline.com\/news\/story.asp?NID=36903&quot;);" onclick="LinkshimAsyncLink.swap(this, &quot;\/l.php?u=http\u00253A\u00252F\u00252Fwww.empireonline.com\u00252Fnews\u00252Fstory.asp\u00253FNID\u00253D36903&amp;h=AAQFjtw9e&amp;s=1&quot;);">http://www.empireonline.com/news/story.asp?NID=36903</a><br/><br/><a href="http://www.facebook.com/photo.php?fbid=597077380322404&amp;set=a.583314588365350.145103.466171083413035&amp;type=1&amp;relevant_count=1" id="" title="" target="" onclick="" style=""></a>`

有没有人遇到过这个问题？有解决办法吗？

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:43:47.350

我的错。

我需要做的只是对任何 URL 进行字符串替换并附加 facebook.com。

这是我的代码，以防它对其他人有所帮助：

`$content = str_replace(' href="/l.php', ' href="http://www.facebook.com/l.php',$content);`

# css - 如何使用 HTML 和 CSS 在我的网站上显示社交图标？

> ID：15645634
> 
> 赞同：2
> 
> 时间：2013-03-26T19:21:16.530
> 
> 标签：css, html, social

我正在拼命尝试向我的网站添加一些图标，但无法正确显示它们。我想要的只是一个包含图像并在线显示它们的容器。然后我想在该容器和图像之间添加一些填充，就是这样。

看这里我的方法。如果有人可以帮助我并更正我的代码以使其真正起作用，我会非常高兴。

在我的 HTML 文件中：

```
<div class="icons">
    <div class="email"><a href="mailto:example@hotmail.com" title="email"></a></div>
    <div class="twitter"><a href="http://www.twitter.com" title="twitter">twitter</a>    
</div> 
```

在我的 CSS 中：

```
.icons {
    margin-left:30px;
}

.icons .email { background: url(../images/social/email.png) left top no-repeat; }
.icons .twitter { background: url(../images/social/twitter.png) left top no-repeat; } 
```

注意：此代码对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:29:08.870

我会为我的图标创建一个图像精灵。然后对于标记我会使用一个列表并将图标图像设置为背景图像到它们各自的锚标签......像这样的东西......

**HTML**

```
<ul>
<li><a href="" class="icon facebook">Facebook</a></li>
<li><a href="" class="icon twitter">Twitter</a></li>
<li><a href="" class="icon googleplus">Google Plus</a></li>
</ul> 
```

**CSS**

```
ul li {
float:left;
display:block;
}

.icon {
width:25px;
height:25px;
display:block;
text-indent:-9999px;
background-image:url(http://tridentdesign.com/wp-content/uploads/2012/12/gemicon.jpg);
background-repeat:no-repeat;
}

.facebook {
background-position:-140px -115px;
}
.twitter {
background-position:-185px -115px;
}
.googleplus {
background-position:-140px -265px;
} 
```

**这是一个要演示的小提琴：**

[http://jsfiddle.net/Z8zkK/2/](http://jsfiddle.net/Z8zkK/2/)

**编辑：** *我更新了我的 CSS 以匹配我的小提琴。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:33:36.063

当您在 CSS 中添加图像时，您应该添加 atleast`Height`或，最好同时添加两者，当您使用标签`width`添加图像时可以忽略（不一定） 。`img`

要在使用`div`时加入内联，请添加`float:left`到`.icons`类

```
 .icons {
  margin-left:30px;
  float:left;
  width:50px;
  height:50px;
  } 
```

您也可以使用答案 by `Kris Hollenbeck`，在这种情况下，您也必须重写 HTML 代码，这是非常受欢迎的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-26T20:44:35.030

这是社交小部件演示[http://www.tech-fans.com/p/socialbox.html](http://www.tech-fans.com/p/socialbox.html)

你可以从这里得到它 [http://www.tech-fans.com/2013/03/socialbox.html](http://www.tech-fans.com/2013/03/socialbox.html)

# jquery - 如果 ul 没有孩子，我如何隐藏或添加类到它上面的跨度？

> ID：15645637
> 
> 赞同：0
> 
> 时间：2013-03-26T19:21:28.980
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

所以我有一个 jquery 风格的手风琴，页面上引用了 jquery ui。我正在从数据库中提取导航信息，html 结构如下所示：

```
<div id="accordion" class="ui-accordion ui-widget ui-helper-reset" role="tablist">
    <li class="sub-item">
        <div class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"
            role="tab" id="ui-accordion-accordion-header-0" aria-controls="lvl2" aria-selected="false"
            tabindex="0">
            <span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><a href="/Ebusiness/events/upcoming-events">
                Upcoming Events</a><span id="arrow"></span></div>
        <ul id="lvl2" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"
            style="display: none;" aria-labelledby="ui-accordion-accordion-header-0" role="tabpanel"
            aria-expanded="false" aria-hidden="true">
            <li class="lvl2"><a href="/upcoming-events/meeting-center">Meeting Center</a></li>
        </ul>
    </li>
    <li class="sub-item">
        <div class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"
            role="tab" id="ui-accordion-accordion-header-1" aria-controls="lvl2" aria-selected="false"
            tabindex="-1">
            <span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span><a href="/Ebusiness/Meetings/MeetingsCalendar">
                Calendar of Events</a><span id="arrow"></span></div>
        <ul id="lvl2" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"
            style="display: none;" aria-labelledby="ui-accordion-accordion-header-1" role="tabpanel"
            aria-expanded="false" aria-hidden="true">
        </ul>
    </li>
</div> 
```

我的目标是删除标签，或者添加一个类，如果 ul#lvl2 列表中没有子项，我可以将其应用到 dispaly:none 。

这是我正在尝试的 jquery 函数，但似乎没有执行

```
if ( $('#lvl2:hasChildren') ) {
$("#arrow").addClass("empty"); } 
```

我没有抛出任何错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:22:50.463

```
if ( $('#lvl2').children().length )
    $("#arrow").addClass("empty"); 
```

或带分支：

```
if ( $('#lvl2').children().length ) {
    $("#arrow").addClass("empty");
} 
```

这样做的原因是，如果长度是`1..Infinity`真实的，则验证为：

```
if ( 1 ) {
    alert("truly");
} 
```

但`0`验证虚假：

```
if ( 0 ) {
    alert("falsy");
}
else {
    alert("truly");
} 
```

您可以使用`!`.

```
!0 === true;
!1 === false;
!false === true;
!true === false; 
```

然后再次：

```
!!0 === false;
!!1 === true;
!!false === false;
!!true === true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:31:11.157

如果您从数据库中提取导航信息并为导航构建 HTML，我会很想修改您构建的 HTML 并以这种方式添加/删除类，而不是使用 Javascript 来修改页面。

如果以上不是一个选项，那么我还建议使用@NULL 建议的 .children().length() 方法。

# javascript - 绘制到画布时出现控制台错误

> ID：15645638
> 
> 赞同：2
> 
> 时间：2013-03-26T19:21:34.413
> 
> 标签：javascript, canvas, map, tile

我有一个主要的 javascript 文件，它试图将 tilemap 绘制到游戏的画布上，并且我有一个包含的文件，它实际上绘制了地图等，但我在 firebug 中遇到了这个错误：

> TypeError：值无法转换为以下任何一种：HTMLImageElement、HTMLCanvasElement、HTMLVideoElement。[打破这个错误]

```
ctx.drawImage(mapTiles[map[x][y]],x*tilesize, y*tilesize); 
```

调用我的 level.js 文件的主 js 如下所示：

```
$(document).ready(function(){

var canvas = document.getElementById("TBG");
var context = canvas.getContext("2d");

var ui = new Gui();
var level = new Level();

//----------Login/Register Gui --------------
$('#TBG').hide();
$('#load-new').hide();
$('#reg').hide();
$('#login').hide();

//if login_but is clicked do ui.login function
$('#login_but').click(ui.login);
//if reg_but is clicked do ui.register function
$('#reg_but').click(ui.register);

$('#new_but').click(function(){
    game_settings("new");
});

$('#load_but').click(function(){
    game_settings("load");
});

//if login_sumbit button is clicked do ui.login_ajax function
$("#login_submit").click(ui.login_ajax);

$("#reg_submit").click(ui.register_ajax);

$("#welcome").on("click", "#logout_but", ui.logout);

//____________________________________________
//Initialisation of game

function game_settings(state){
    if(state == "load"){
        ui.load_game();
        //do ajax call to load user last save
        //level.level_init(0,1);

        draw();
    }
    else{
        //set beginning params

        //Change screens
        ui.new_game();
        alert("new game");
    }
}

function draw () {

    context.clearRect(0,0,canvas.width,canvas.height);

    level.draw(context);

    setTimeout(draw, 30);

}
// End Loop 
      }); 
```

这行代码（level.js）的文件如下所示：

```
function Level(){

var tilesize = 32;
var map = 0;
var mapTiles = [];

   // var saved_level = level;
    //var saved_location = location;

map = [
    [1,1,1,1,1,1,1,1,1,1],
    [2,2,2,2,2,2,2,2,2,2]
];

    for (x = 1; x <= 256; x++) {
        var imageObj = new Image(); // new instance for each image
        imageObj.src = "images/prototype/"+x+".jpg";
        mapTiles.push(imageObj);
    }

this.draw = function(ctx) {
 for (var x = 0; x <= 31; x++){
        for ( var y = 0; y <= 31; y++){
            ctx.drawImage(mapTiles[map[x][y]],x*tilesize, y*tilesize);

    }
}
};

} 
```

你们有没有遇到过这个错误？

以及我将如何纠正这个问题，谢谢汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:13:24.160

忘掉画布和其他一切，看看`map`数组和使用它的代码。让我们撕掉画布代码并通过一些`console.log()`调用检查数组访问：

```
map = [
    [1,1,1,1,1,1,1,1,1,1],
    [2,2,2,2,2,2,2,2,2,2]
];

console.log( map.length );
console.log( map[0].length );

for (var x = 0; x <= 31; x++){
    for ( var y = 0; y <= 31; y++){
        console.log( x, y, map[x], map[x] && map[x][y] );
    }
} 
```

你看到问题了吗？您可以通过考虑这些`console.log()`调用将打印什么来发现它。如果没有，请将该代码粘贴到 Chrome 开发人员控制台中，然后查看它的作用。（顺便说一句，最后一个参数有`map[x] && map[x][y]`，这本质上是相同的，`map[x][y]`但它可以保护代码不崩溃，`map[x]`正如`undefined`您将在日志中看到的那样。）

现在我们现在已经`map[x][y]`有`undefined`一段时间了，回到`drawImage()`调用，它使用它作为图像参数：

```
mapTiles[ map[x][y] ] 
```

当`map[x][y]`is`undefined`时，该表达式的计算结果是什么？

# c# - 当 requestedExecutionLevel 为 requireAdministrator 时，为什么我不能写入控制台？

> ID：15645640
> 
> 赞同：1
> 
> 时间：2013-03-26T19:21:36.750
> 
> 标签：c#, console-application

我不想运行将 requestedExecutionLevel 设置为“requireAdministrator”的 Windows 控制台应用程序，但它不会打印出我在代码中指定的写入语句。

为什么以管理员身份运行时不打印？

提前致谢！

```
static void Main(string[] args)
{
   Console.Write("Hello World" + Environment.NewLine);
} 
```

他们在清单中的代码是......

```
<requestedExecutionLevel  level="requireAdministrator" uiAccess="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-15T08:57:17.010

当您以管理员身份启动命令提示符时，控制台会写入。但是，当您以普通用户身份启动命令提示符时，应用程序将使用 UAC 请求管理员权限，然后控制台不会写入任何输出

--> 以管理员身份启动命令提示符

# sql-server - EF4 通过脚本插入数据

> ID：15645642
> 
> 赞同：0
> 
> 时间：2013-03-26T19:21:42.323
> 
> 标签：sql-server, sql-server-2008, entity-framework-4, identity-insert

我知道默认情况下 EF Code First 设置 StoreGeneratedPattern = Identit。没关系。但我想通过 sql 脚本插入部分数据。我知道时间只有一张桌子可以`SET IDENTITY_INSERT Rules ON;`

但是当我尝试跑步时

```
USE [GameDatabase]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

--RULES OF GAME
SET IDENTITY_INSERT RulesOfGames ON;
INSERT INTO RulesOfGames(RulesOfGameId, MaxScore, IsPossibleEqualsScore) VALUES(1, 20, 1);
SET IDENTITY_INSERT RulesOfGames OFF;

--KindSport
SET IDENTITY_INSERT RulesOfGames ON;
INSERT INTO KindSports(KindSportId, Name, RulesOfGame_RulesOfGameId) VALUES(1, 'Футбол', 1);
SET IDENTITY_INSERT KindSports OFF; 
```

我得到错误。我想设置特定的 id 来设置特定的逻辑约束。

```
Msg 8107, Level 16, State 1, Line 3
IDENTITY_INSERT is already ON for table 'GameDatabase.dbo.KindSports'. Cannot perform SET operation for table 'RulesOfGames'. 
```

我怎样才能解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:51:45.263

```
SET IDENTITY_INSERT RulesOfGames ON;
INSERT INTO RulesOfGames(RulesOfGameId, MaxScore, IsPossibleEqualsScore) VALUES(1, 20, 1);
SET IDENTITY_INSERT RulesOfGames OFF;

--KindSport
SET IDENTITY_INSERT KindSports ON;
INSERT INTO KindSports(KindSportId, Name, RulesOfGame_RulesOfGameId) VALUES(1, 'Футбол', 1);
SET IDENTITY_INSERT KindSports OFF; 
```

# javascript - jQuery 根据选择值显示/隐藏 div

> ID：15645652
> 
> 赞同：12
> 
> 时间：2013-03-26T19:22:15.947
> 
> 标签：javascript, jquery

我有一个包含值“全部”和“自定义”的选择列表。在选择值为“自定义”时，应出现一个具有“资源”类的 div，如果值为“全部”，则应将其隐藏。

形式为：

```
<div>
    <label>Privileges:</label>
    <select name="privileges" id="privileges" class="" onclick="craateUserJsObject.ShowPrivileges();">
        <option id="all" value="all">All</option>
        <option id="custom" value="custom">Custom</option>
    </select>
</div>
<div class="resources" style=" display: none;">resources</div> 
```

用于此的 javascript 是：

```
ShowPrivileges: function() {
    var Privileges = jQuery('#privileges');
    var select = this.value;
    Privileges.change(function() {
        if (select === 'custom') {
            $('.resources').show();
        }
    });
} 
```

这应该如何工作？抱歉，我知道这应该很简单，但我对这一切都很陌生。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T19:27:31.157

您需要使用 val 方法：

```
var Privileges = jQuery('#privileges');
var select = this.value;
Privileges.change(function () {
    if ($(this).val() == 'custom') {
        $('.resources').show();
    }
    else $('.resources').hide(); // hide div if value is not "custom"
}); 
```

[http://jsfiddle.net/RWUdb/](http://jsfiddle.net/RWUdb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:30:39.487

您可以通过删除 onClick 并从选项中删除 ID 来清理 HTML。

HTML：

```
<div>
    <label>Privileges:</label>
    <select name="privileges" id="privileges">
        <option value="all">All</option>
        <option value="custom">Custom</option>
    </select>
</div>
<div class="resources" style=" display: none;">resources</div> 
```

你的 JavaScript 可以简单地做到这一点：

```
$('#privileges').on('change', function() {
        if($(this).val() === 'all') {
            $('.resources').hide();
        } else {
            $('.resources').show();
        }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:25:05.880

```
Privileges.on('change',function(){
    if($(this).val()=='custom'){
        $('.resources').show();
    }else{
        $('.resources').hide();
    }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T19:27:01.880

您将要添加事件处理程序：

```
$("#privileges").change(craateUserJsObject.ShowPrivileges); 
```

然后，在您的 ShowPrivileges 功能中：

```
var val = $("#privileges").val();
if(val == "whatever")
    //do something
else
    //do something 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T19:27:24.920

```
 $("#privileges").change(function(){
     var select=  $(this).val();
       if(select=='custom'){
          //some code
         }
    }); 
```

**或者**

```
 var select=$('#privileges :selected').val()
    if(select=='custom'){
    //some code
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T19:28:06.220

你让这太复杂了：

首先，删除 inline `onclick`。由于您使用的是 jQuery，因此请动态附加您的处理程序。

```
<div>
    <label>Privileges:</label>
    <select name="privileges" id="privileges">
        <option id="all" value="all">All</option>
        <option id="custom" value="custom">Custom</option>
    </select>
</div>
<div class="resources" style=" display: none;">resources</div> 
```

其次，不要听点击然后附加`change`处理程序。直接贴上去

```
<script>
jQuery('#privileges').on('change',function(){
    if(jQuery(this).val()=='custom'){
        jQuery('.resources').show();
    } else {
        jQuery('.resources').hide();
    }
});
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-01T16:12:15.347

### 这可以用 `toggle()` 作为简写来完成：

```
$('#privileges').change(function() {
  $('.resources').toggle($(this).val() == 'custom');
}); 
```

如果您想**在页面加载中切换显示，**您可以触发相同的`change()`事件，例如：

```
$('#privileges').change(function() {
  $('.resources').toggle($(this).val() == 'custom');
}).change(); 
```

```
$('#privileges').change(function() {
  $('.resources').toggle($(this).val() == 'custom');
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div>
  <label>Privileges:</label>
  <select name="privileges" id="privileges">
    <option id="all" value="all">All</option>
    <option id="custom" value="custom">Custom</option>
  </select>
</div>
<div class="resources" style=" display: none;">resources</div>
```

# plsql - 如何将 varchar2 转换为具有两位小数的数字？

> ID：15645654
> 
> 赞同：1
> 
> 时间：2013-03-26T19:22:25.953
> 
> 标签：plsql, oracle11g

抱歉，我是 Oracle 的新手，在选择表格中的某些数字时遇到了一些麻烦`varchar2`。

我需要它们是小数点后 2 位的数字。

例如：

```
00008600  
00202033  
00094123 
```

需要

```
86.00  
2020.33  
941.23 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:30:27.967

你可以使用这样的东西：

```
select to_char(to_number(yourcol)/100.0, '9999999d99') yourColFormatted
from yourTable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/d41d8/9244)

# c++ - 用链表实现队列

> ID：15645657
> 
> 赞同：0
> 
> 时间：2013-03-26T19:22:34.253
> 
> 标签：c++, queue

我编写了使用链表实现队列的代码，但有一些我无法弄清楚的错误。当我第一次将一个项目推送到队列中时，它可以找到，但是当我尝试推送第二个项目时，它给了我运行时错误。你能帮我吗？非常感谢！以下是代码：

```
#include<iostream>
using namespace std;
template<typename T>
struct Node{
    T data;
    Node* next;
    Node(T d, Node* n=NULL): data(d), next(n){}
};

template<typename T>
class myqueue{
    private:
        Node<T> * first;
        Node<T> * last;
    public:
        myqueue(){}
        void push(T da){
            if(first==NULL) {
                first=new Node<T>(da);
                last=first;
            }
            else {

                last->next=new Node<T>(da);
                last=last->next;

                }
        }   
        void pop(){
          if(last!=NULL){
            Node<T> * temp=first;
            first=first->next;
            delete temp;
          }
        }
        void front(){
           if(first!=NULL) cout<< first->data;
        }
        bool isempty(){
            return last==NULL;
        }
};

int main(){
    myqueue<int> q;
    q.push(1);
    q.push(2);
    q.front();
    /*
    q.push(3);
    q.push(4);
    q.push(5);
    cout<<q.front();
    */

}

compile error: runtime error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:26:01.237

您的`first`和`last`指针未初始化，因此您的行为未定义。用成员初始化列表初始化它们：

```
myqueue::myqueue() : first(NULL), last(NULL) {} 
```

# wpf - ViewModel 中的 ObjectContext (EF + MVVM)

> ID：15645659
> 
> 赞同：0
> 
> 时间：2013-03-26T19:22:44.997
> 
> 标签：wpf, entity-framework, mvvm, viewmodel, objectcontext

我目前正在编写我的第一个 MVVM 应用程序，它使用 EntityFramework 进行数据访问。应用程序严重依赖底层数据库，并且在许多情况下必须将新数据添加到数据库中。

但是，我不确定在 ViewModel 中调用 ObjectContext 是否是个好主意。例如

```
public class SomeViewModel : ViewModelBase
{
    public IEnumerable<User> AllUsers { get; private set; }

    private void SomeMethod()
    {
        var __entities = new DatabaseEntities();
        AllUsers = __entities.Users.Where(...).ToList();
    } 
```

}

我见过这样的解决方案，但随之而来的是一些问题。例如 ObjectContext 实际存在多长时间，或者是否应该更喜欢单个全局可访问的 ObjectContext。

还是应该首先不应该像那些调用那样成为 VM 的一部分？目前我还可以想象为每个 DB 表实现像 StaticHelpers 一样的方法，并使用像 GetAllUsers() 这样的方法。

在 Josh Smith 关于 MVVM 的示例应用程序中，他使用了一个注入到每个 VM 的构造函数中的存储库。

```
public AllCustomersViewModel(CustomerRepository customerRepository) 
```

尽管这必须是一个常见问题，但对于较小的应用程序如何解决此问题（最佳实践），我没有找到令人满意的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:44:06.393

在 MSDN 上 DbContext 类的描述中，它声明[“表示工作单元和存储库模式的组合”](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)，因此它可以充当您的存储库层，尽管它不是必须的，而且它的目的是用于“工作单元”，它不适合为整个应用程序使用全局单元。除了为所有内容保留一个之外，还可能导致缓存数据和其他不良事物（内存使用等）出现问题。

希望这可以帮助。

# entity-framework - 迭代来自另一个相关项目的实体框架模型

> ID：15645660
> 
> 赞同：0
> 
> 时间：2013-03-26T19:22:45.543
> 
> 标签：entity-framework, iterator, iteration, datacontext

我刚刚开始使用 .Net，我已经为网站的密码重置功能创建了一个实体框架模型和关联的上下文，并且我在一个名为 MYSITE.Reset.Data 的类库中创建了它，其中包含 3 个类（电子邮件、映射，关联）。

我现在已经创建了一个 Windows 窗体应用程序 MYSITE.Reset，但是在从 program.cs 文件中迭代我的模型时遇到了麻烦。我不太确定语法的结构，但我尝试了以下操作失败：

foreach(MYSITE.Reset.Data.Maps mp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:53:18.173

尝试这个：

```
var maps = from m in context.Maps
                select m;

foreach(var map in maps)
{
    // do stuff
} 
```

# kendo-ui - Kendo Grid 未绑定到 Web 服务结果

> ID：15645667
> 
> 赞同：0
> 
> 时间：2013-03-26T19:22:58.273
> 
> 标签：kendo-ui, kendo-grid

我不明白这里发生了什么，但我认为这只是没有正确理解架构。我尝试了许多不同的选项、表达模式的方式，并且尝试了不同的 Web 服务结果格式，包括 XML，但我无法让其中任何一种工作。我可以验证（来自 Fiddler2）正在调用 Web 服务并正在返回数据，并且我的网格正在呈现我所说的列，但它不会显示数据。我不明白我在这里缺少什么，以及是否需要修复 Web 服务结果，或者以不同的方式指定架构，或者其他什么？

我的 Javascript 看起来像这样......（在尝试了很多不同的东西之后，这就是我目前所拥有的）

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="../Content/kendo/2012.3.1114/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="../Content/kendo/2012.3.1114/kendo.default.min.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="../Scripts/kendo.all.min.js" type="text/javascript"></script>
</head>
<body>
    <div id="grid" style="height: 400px; width: 900px;">
    </div>
    <script type="text/javascript">
        var myWebServiceUrl = 'wMDTData.asmx';

        var myGridData = new kendo.data.DataSource({
            transport: {
                read: {
                    url: myWebServiceUrl + '/Read',
                    dataType: "json",
                    type: "post",
                    contentType: "application/json; charset=utf-8"
                }
            },
            schema: {
                data: function (response) { return response.d; },
                model: {
                    id: "ID",
                    fields: {
                        ID: { type: "string" },
                        ITEM_NAME: { type: "string" },
                        FUNCTION_NM: { type: "string" }
                    }
                }
            }
        });

        myGridData.read();

        var myKendoGridOptions = {
            dataSource: {
                data: myGridData
            }, //end of dataSource: object
            columns: [{
                width: 90,
                field: "ID",
                title: "ID"
            }, {
                width: 90,
                field: "ITEM_NAME",
                title: "Item Name"
            }, {
                width: 100,
                field: "FUNCTION_NM",
                title: "Function Name"
            }]  //end of columns: array
        };

        $(document).ready(
            function () { $("#grid").kendoGrid(myKendoGridOptions); }
        );
    </script>
</body>
</html> 
```

编辑：我修复了我的 Web 服务响应，它现在是一个 JSON 字符串，但仍然无法正常工作。我的网络服务对此作出响应...

```
{ "d":
    { "__type": "System.Data.DataTable", "columns": [
        { "name": "ID", "dataType": "Object", "defaultValue": null, "readOnly": false, "isKey": false },
        { "name": "ITEM_NAME", "dataType": "String", "defaultValue": null, "readOnly": false, "isKey": false },
        { "name": "FUNCTION_NM", "dataType": "String", "defaultValue": null, "readOnly": false, "isKey": false }
    ],
        "rows": [
            { "ID": 1, "ITEM_NAME": "VR data to Close Package", "FUNCTION_NM": "CLOSE_PACKAGE_MAP_TO_BC" },
            { "ID": 2, "ITEM_NAME": "Currency Conversion", "FUNCTION_NM": "WV_CURRENCY_CONVERSION" },
            { "ID": 3, "ITEM_NAME": "GL Coding (wMDT Mapping)", "FUNCTION_NM": "GL_MAPPING" }
        ]
    } 
} 
```

我尝试了很多不同的方法来指定要查看的元素 - XPath(string/)，尝试将 ID 列设置为“ID” - 它只是没有解析这个。我也可以让它返回邪恶丑陋的 XML，但是网格也不能很好地处理这个......

```
 <?xml version="1.0" encoding="utf-8"?>
    <DataTable>
        <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
            <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="Table" msdata:UseCurrentLocale="true">
                <xs:complexType>
                    <xs:choice minOccurs="0" maxOccurs="unbounded">
                        <xs:element name="Table" msprop:BaseTable.0="WMDT_ACCESS">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="ID" msprop:BaseColumn="ID" msprop:OraDbType="107" type="xs:decimal" minOccurs="0" />
                                    <xs:element name="ITEM_NAME" msprop:BaseColumn="ITEM_NAME" msprop:OraDbType="126" type="xs:string" minOccurs="0" />
                                    <xs:element name="FUNCTION_NM" msprop:BaseColumn="FUNCTION_NM" msprop:OraDbType="126" type="xs:string" minOccurs="0" />
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:choice>
                </xs:complexType>
            </xs:element>
        </xs:schema>
        <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
            <NewDataSet>
                <Table diffgr:id="Table1" msdata:rowOrder="0">
                    <ID>1</ID>
                    <ITEM_NAME>VR data to Close Package</ITEM_NAME>
                    <FUNCTION_NM>CLOSE_PACKAGE_MAP_TO_BC</FUNCTION_NM>
                </Table>
                <Table diffgr:id="Table2" msdata:rowOrder="1">
                    <ID>2</ID>
                    <ITEM_NAME>Currency Conversion</ITEM_NAME>
                    <FUNCTION_NM>WV_CURRENCY_CONVERSION</FUNCTION_NM>
                </Table>
                <Table diffgr:id="Table3" msdata:rowOrder="2">
                    <ID>3</ID>
                    <ITEM_NAME>GL Coding (wMDT Mapping)</ITEM_NAME>
                    <FUNCTION_NM>GL_MAPPING</FUNCTION_NM>
                </Table>
            </NewDataSet>
        </diffgr:diffgram>
    </DataTable> 
```

所以，如果这里有问题，我应该使用哪个结果，以及如何让该结果正确绑定到网格？

很抱歉发布“讨论”类型的问题，但我被“正常”论坛阻止问这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:59:53.073

这只是略有不同，但它有效。有人可以解释为什么吗？我真的不喜欢“玩转它直到它起作用”的货物狂热编程方法！

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="../Content/kendo/2012.3.1114/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="../Content/kendo/2012.3.1114/kendo.default.min.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="../Scripts/kendo.all.min.js" type="text/javascript"></script>
</head>
<body>
    <div id="grid" style="height: 400px; width: 900px;">
    </div>
    <script type="text/javascript">
        var myWebServiceUrl = 'wMDTData.asmx';

        var myGridData = new kendo.data.DataSource({
            transport: {
                read: {
                    url: myWebServiceUrl + "/Read",
                    dataType: "json",
                    type: "post",
                    contentType: "application/json; charset=utf-8"
                }
            },
            schema: {
                data: "d"
            }
        });

        myGridData.read();

        $("#grid").kendoGrid({ dataSource: myGridData });
    </script>
</body>
</html> 
```

Web 服务结果还是和之前一样，都是 JSON 结果。有人可以解释这里可能发生的事情吗？我将把“选项”放回去，这似乎是把它搞砸了，因为它是我唯一真正删除的东西。

# java - Spring：检查每个端点上的标准查询参数

> ID：15645671
> 
> 赞同：0
> 
> 时间：2013-03-26T19:23:21.393
> 
> 标签：java, spring, filtering

我们在 Spring 中有一组端点，对于每一个端点，我们都可以要求用户包含安全密钥和令牌等。例如：

```
/endpoint?key=asdf&token=1234 
```

但是，我们不想重写每个端点。有没有一种简单的方法来拦截每个调用，检查参数，然后传递给常规代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:27:46.543

Spring 具有拦截器的概念，您可以在其中预处理请求，然后再传递给适当的控制器。您可以定义自己的拦截器实现 HandleInterceptor 或扩展 HandlerInterceptorAdapter 看看这个：[http ://java.dzone.com/articles/using-spring-interceptors-your](http://java.dzone.com/articles/using-spring-interceptors-your)

# javascript - 隐藏 Phonegap 闪屏

> ID：15645672
> 
> 赞同：0
> 
> 时间：2013-03-26T19:23:23.077
> 
> 标签：javascript, cordova, screen, splash-screen

我已经使用准备发布的 Phonegap 构建了一个应用程序，唯一的问题是我想摆脱启动画面但不知道如何去做。那么有什么办法可以解决这个问题吗？

/约翰内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:24:33.433

`navigator.splashscreen.hide();`如果您使用的是最新版本，我相信应该可以。

# django - 在表单向导中为字段设置选项？

> ID：15645675
> 
> 赞同：0
> 
> 时间：2013-03-26T19:23:26.627
> 
> 标签：django, python-2.7, django-forms

我正在尝试制作一个简单的测验应用程序。我正在尝试使用表单向导，但我在文档中没有看到任何关于设置表单字段选择的内容。我也想多次使用同一个表单域。

# 模型.py

```
class Choice(models.Model):
    choice = models.CharField(max_length=64)
    def __unicode__(self):
        return self.choice

#create a multiple choice quiz to start
class Question(models.Model):
    question = models.CharField(max_length=64)
    answer = models.CharField(max_length=64)
    choices = models.ManyToManyField(Choice)
    module = models.CharField(max_length=64)

    def __unicode__(self):
        return self.question

class Quiz(models.Model):
    name = models.CharField(max_length=64)
    questions = models.ManyToManyField(Question)

    def __unicode__(self):
        return self.name 
```

# 视图.py

```
class QuizWizard(SessionWizardView):
    def done(self, form_list, **kwargs):
        return render_to_response('done.html', {
            'form_data':[form.cleaned_data for form in form_list],
        }) 
```

# 网址.py

```
url(r'^answer/(?P<question_id>\d+)', 'quiz.views.answer_question', name='answer_question'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:33:21.810

在选择方面，表单字段的概念与模型字段的概念相同。[这是](https://docs.djangoproject.com/en/dev/ref/models/fields/#field-choices)模型字段的参考。

除非您打算添加许多选择，否则您不应该为此设置一张桌子。你可以改变你的模型：

```
CHOICES = ((1,'One'),(2,'Two'))

class Question(models.Model):
    choices = models.IntegerField(choices=CHOICES) 
```

如果您像上面那样构建它，那么 a将按照您的期望进行操作，并为该字段`ModelForm`呈现一个带有正确选择的下拉列表。`choices`

至于字段重用，django 的内置表单字段就是为此而设计的。如果内置插件不适合您并重复使用它们，您还可以创建自己的[自定义表单字段。](https://docs.djangoproject.com/en/dev/ref/forms/fields/#creating-custom-fields)

如果您正在为模型创建表单，请阅读[`ModelForm`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)文档。 `ModelForm`s 类似于常规表单，但需要处理很多工作 - 例如呈现与您的模型匹配的字段、输入验证、保存新记录等。

--

> 我知道如何为字段设置选项，但是当我使用表单向导并传入表单时，我不知道如何为字段设置选项。我无法在表格中设置选项，因为每个问题都会改变，而且我对每个问题都使用相同的表格

如果要从*模型的实例中*为表单设置选项，则需要首先获取实例，然后将其传递给表单类：

```
class QuestionForm(forms.ModelForm):
    class Meta:
        model = Question

question_form = QuestionForm() # empty form
a_question = Question.objects.get(pk=1)
another_form = QuestionForm(instance=a_question) # "prefilled" form 
```

现在`another_form`将从`a_question`实例中填充值。

# xcode - 自定义 SenTest/OCUnit

> ID：15645676
> 
> 赞同：1
> 
> 时间：2013-03-26T19:23:29.983
> 
> 标签：xcode, unit-testing, ocunit, sentestingkit

时不时会有修改Mac/iOS单元测试框架某些方面的冲动。我不想牺牲它与 XCode 的良好集成，但有时我发现自己渴望改变一些细节：

*   将消息发送到监视器对象，而不是将它们记录到控制台
*   仅记录失败
*   修改测试顺序

诸如此类的简单事情。有没有一种合理的方法可以做到这一点，也许是通过 SenTest 框架的开发者变体？

# iphone - 语音效果 iOS SDK

> ID：15645678
> 
> 赞同：-6
> 
> 时间：2013-03-26T19:23:34.507
> 
> 标签：iphone, ios, objective-c, voice

告诉我，是否有任何 Ios SDK 库，您可以使用它们为声音添加效果。这对于发出演讲者的声音是必要的。这就是 mokrofon 中所说的，添加效果喇叭并传输到耳机（扬声器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:30:14.737

查看DSP，（数字信号处理）。这并不容易，因为它确实变得相当复杂（听说过傅里叶变换吗？）。首先尝试对音频做出反应，因为你会学到很多关于如何做你想做的事情的知识。

tl; dr：如果不花一些时间学习它，就没有神奇的方法可以做到这一点。

# smartcard - 从 javacard 小程序读取大文件

> ID：15645679
> 
> 赞同：2
> 
> 时间：2013-03-26T19:23:36.880
> 
> 标签：smartcard, javacard

我正在编写一个小程序，它存储 3 个不同大小的文件，分别为 5 Kb、7 Kb 和 11 Kb。将文件存储在小程序中没有问题。但是当我尝试读回它们时，我只能读取前两个（较小的文件）。第三个文件抛出异常：

```
javax.smartcardio.CardException: Could not obtain response
at sun.security.smartcardio.ChannelImpl.doTransmit(Unknown Source)
at sun.security.smartcardio.ChannelImpl.transmit(Unknown Source) 
```

我试图找出问题所在，我发现它与文件的大小有关。所以我创建了一个大小为 7 Kb 的测试文件，并一点一点地增加这个文件。它一直工作到我达到 7905 字节。这意味着 7905 字节是我可以从小程序中读取的最大字节数。我正在使用示例代码链接响应：

```
public void readFile(APDU apdu, short[] offset, short selectedFile, short MAX_APDU_SEN,       byte OFFSET_SENT) {
    byte[] file = getFile(selectedFile); 
    if (file == null) {
    + ISOException.throwIt(ISO7816.SW_FILE_NOT_FOUND);+
    }
    // work out how many bytes to send this time and how many will be left
    short remain = (short) (file.length - offset[OFFSET_SENT]);
    boolean chain = remain > MAX_APDU_SEN;
    short sendLen = chain ? MAX_APDU_SEN : remain;
    apdu.setOutgoing();
    apdu.setOutgoingLength(sendLen);
    apdu.sendBytesLong(file, offset[OFFSET_SENT], sendLen);
    // Check to see if there are more APDU's to send
    if (chain) {
    +offset[OFFSET_SENT] = sendLen; // count the bytes sent
    ISOException.throwIt(ISO7816.SW_BYTES_REMAINING_00); // indicate there are more bytes     to come
    } else {+
    offset[OFFSET_SENT] = 0; // no more bytes to send
    }
} 
```

我尝试了两种不同类型的卡，即 JC 2.2.1 (36Kb) 和 JC 2.2.2 (80Kb) 兼容卡，但它们的行为都相同。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:18:58.763

读取文件通常不使用链接完成，因为主机应用程序可以方便地在 P1/P2 中指定起始偏移量 - 至少在 ISO 7816-4 中指定的 READ BINARY 命令中。我认为，即使对于链式响应，卡也希望在缓冲区中准备数据，我认为缓冲区的大小有限是您问题的原因。

# algorithm - 数字子集的总和

> ID：15645682
> 
> 赞同：1
> 
> 时间：2013-03-26T19:24:00.720
> 
> 标签：algorithm, math, lua, knapsack-problem

假设我有一个数字“n”和一个数字表。我想在表中选择最多四个数字，这四个数字的总和将是与 n 最接近的匹配。给定表格的长度“L”，它必须经过的组合数是 (6*L + 11*L^2 + 6*L^3 + L^4)/24。

前任。说我有变量

```
n = 100 
```

和一组数字

```
t = {86, 23, 19, 8, 42, 12, 49} 
```

给定这个列表，最接近 n 的 4 组合是 49 + 23 + 19 + 8 = 99。

用尽可能少的计算次数来做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:37:15.593

这看起来像是**“子集总和”**（参见：[http](http://en.wikipedia.org/wiki/Subset_sum_problem) ://en.wikipedia.org/wiki/Subset_sum_problem ）问题的一个变体，已知它是 NP 完全的，所以很遗憾很可能不会有任何聪明的算法无论如何，在最坏的情况下，它的运行速度会比项目数量的指数更快。

如果要检查的项目不多（大约 10 个左右），您可以尽快尝试深度优先搜索修剪分支。

如果有更多的项目很可能要检查而不是搜索最佳解决方案，那么您最好尝试找到一个稍微好的近似值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:46:38.420

假设所有数字都是正整数，可以按照 Yexo 指出的那样完成：

```
local n = 100
local t = {86, 23, 19, 8, 42, 12, 49}
local max_terms = 4
-- best[subset_size][terms][k] = {abs_diff, expr}
local best = {[0] = {}}
for k = 1, n do best[0][k] = {k, ''} end
for terms = 0, max_terms do best[terms] = best[0] end
for subset_size = 1, #t do
   local new_best = {}
   for terms = subset_size == #t and max_terms or 0, max_terms do
      new_best[terms] = {}
      for k = subset_size == #t and n or 1, n do
         local b0 = best[terms][k]
         local diff = k - t[subset_size]
         local b1 = terms > 0 and (
            diff > 0 and {
               best[terms-1][diff][1],
               best[terms-1][diff][2]..'+'..t[subset_size]
            } or {math.abs(diff), t[subset_size]}
         ) or b0
         new_best[terms][k] = b1[1] < b0[1] and b1 or b0
      end
   end
   best = new_best
end
local expr = best[max_terms][n][2]:match'^%+?(.*)'
print((loadstring or load)('return '..expr)()..' = '..expr)

-- Output
99 = 23+19+8+49 
```

# c# - SMTP.SendAsync 无法正常工作

> ID：15645688
> 
> 赞同：2
> 
> 时间：2013-03-26T19:24:23.963
> 
> 标签：c#, .net, asynchronous, smtp, task

我正在尝试熟悉 smtp.SendAsync，但由于某种原因，我无法让邮件消息发送异步。

这是我尝试过的。

```
//smtp.SendAsync(mm, null)); Error, Async operation was attempted before another one completed

//Task.Run(() => smtp.SendAsync(mm, null)); No error and no email

//smtp.SendMailAsync(mm));Error, Async operation was attempted before another one completed

// Task.Run(() => smtp.SendMailAsync(mm)); No error and no email.

//smtp.Send(mm); The only one that works, but has that delay and that is what I am attempting to get away from. 
```

我的代码：

```
public static void Email(IElevation elevation, string fromEmail, string toEmail)
{

    using (Bitmap printCanvas = ShopDrawing.Merger.MergeElevationAndDoor(elevation, RotateFlipType.Rotate90FlipNone))
    {
        using (var ms = new MemoryStream())
        {
            printCanvas.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
            ms.Position = 0;

            using (MailMessage mm = new MailMessage(new MailAddress(fromEmail), new MailAddress(toEmail)))
            {
                mm.Subject = "[Project: " + elevation.ProjectName + "] " + " Shop drawings for " + elevation.Name;
                mm.Body = "Your shop drawings are attached to this email in reference to Project: " + elevation.ProjectName + " -> Elevation: " + elevation.Name;
                Attachment at = new Attachment(ms, elevation.Name + ".png", "image/png");
                mm.Attachments.Add(at);
                using (SmtpClient smtp = new SmtpClient())
                {
                    //smtp.SendAsync(mm, null));
                    //Task.Run(() => smtp.SendAsync(mm, null));
                    //smtp.SendMailAsync(mm));
                    // Task.Run(() => smtp.SendMailAsync(mm));

                    //The only one that works
                    smtp.Send(mm);

                };
            };
        };
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:58:58.353

将函数的整个主体包装在来自@Lloyd 帮助的 ThreadPool.QueueUserWorkItem 中。

```
 public static void EmailShopDrawingAndDoorSchedule(IElevation elevation, string fromEmail, string toEmail)
    {
        ThreadPool.QueueUserWorkItem(t =>
                       {
                           using (Bitmap printCanvas = ShopDrawing.Merger.MergeElevationAndDoor(elevation, RotateFlipType.Rotate90FlipNone))
                           {
                               using (var ms = new MemoryStream())
                               {
                                   printCanvas.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                                   ms.Position = 0;

                                   using (MailMessage mm = new MailMessage(new MailAddress(fromEmail), new MailAddress(toEmail)))
                                   {
                                       mm.Subject = "[Project: " + elevation.ProjectName + "] " + " Shop drawings for " + elevation.Name;
                                       mm.Body = "Your shop drawings are attached to this email in reference to Project: " + elevation.ProjectName + " -> Elevation: " + elevation.Name;

                                       using (Attachment at = new Attachment(ms, elevation.Name + ".png", "image/png"))
                                       {
                                           mm.Attachments.Add(at);

                                           using (var smtp = new SmtpClient())
                                           {
                                               smtp.Send(mm);
                                           };

                                       }
                                   };
                               };
                           };
                       });
    } 
```

# ios - 为什么这个for循环会在两者之间创建一个黑色的空矩形

> ID：15645693
> 
> 赞同：0
> 
> 时间：2013-03-26T19:24:44.143
> 
> 标签：ios, objective-c, cocos2d-iphone

```
- (void)addBackground{
    CGSize winSize = [CCDirector sharedDirector].winSize;
    float maxReach = 0;

    //Loop 3 times
    for (int loopTimes = 0; loopTimes < 2; loopTimes++) {

    //Add images to batchNode
    for (int imageNumber=1; imageNumber < 13; imageNumber++) {
            CCSprite *background = [CCSprite spriteWithFile:[NSString stringWithFormat:@"national_scenery_part%d.png",imageNumber]];
            background.position = ccp((winSize.width/2)+maxReach, winSize.height/2);
            [self addChild:background z:0];
            maxReach = maxReach + background.contentSize.width;
    }
    //Ends loopTimes loop
    }
} 
```

Image **#7**显示为一个细长的矩形，大约是其原始大小的**1/4 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:28:41.210

您的外部 for 循环声称循环 3 次，但所写的只会执行两次。那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:32:36.010

我的坏...图像 9-13 是 2048 而不是 1024。

# maven - maven 3：访问 “root”公司 POM 的版本

> ID：15645699
> 
> 赞同：5
> 
> 时间：2013-03-26T19:24:55.607
> 
> 标签：maven, maven-3, maven-release-plugin

使用 Maven 3.0.4。

我的任务是为我们的组织提供公司父 POM。我的团队将为开发人员在使用此 POM 时遇到的问题或问题提供支持。他们通常会将构建日志附加到支持票证上。所以，我希望我的公司 POM 将公司父级的版本与任何版本的控制台相呼应。我为此使用了antrun插件。

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-antrun-plugin</artifactId>
<executions>
  <execution>
    <id>echo-build-environment</id>
    <phase>validate</phase>
    <goals><goal>run</goal></goals>
    <configuration>
      <target>
        <echo level="info" message="Maven ${maven.version}" taskname="Version" />
        <echo level="info" message="Corporate POMs ${want.the.version.here}" taskname="Version" />
      ....
     </target> 
```

诀窍是，我不知道在公司父级和构建中使用的 POM 之间可能有多少“级别”的 POM 继承。我们可以有一个类似这样的继承结构：

```
corporate-parent
  team-parent
    application-parent
      child-module 
```

或者像这样简单：

```
corporate-parent
  a-simple-library 
```

我无法回应`${project.version}`，因为那将是当前（子）项目的版本。我不能使用`${project.parent.version}`，因为我不知道可能有多少级继承。我尝试定义一个`<corporate.pom.version>`属性，硬编码到公司 POM 版本，但是当我发布我的公司 POM 时，发布插件不知道更新该属性（这是有道理的，它不是依赖版本，它只是一个属性，发布版本不知道更新它）。

理想情况下，我希望能够直接通过属性获取特定 POM 的版本，例如`${some.groupId.corporate-parent.version}`. 有这样的东西存在吗？

如果没有，在发布期间是否有办法使用`releaseVersion`正在发布的项目更新 POM 属性？

我可以恢复到在每次发布之前手动编辑属性的蛮力方式。我的队友不会欣赏这种方法。

我希望我不必编写自定义插件来做一些乍一看似乎并不困难的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:39:31.987

我停止使用`maven-antrun-plugin`并改用[GMaven](http://groovy.github.io/gmaven/)。我可以通过简单的 POM 层次结构遍历获得所需的信息。

```
<plugin>
    <groupId>org.codehaus.gmaven</groupId>
    <artifactId>groovy-maven-plugin</artifactId>
    <version>2.0</version>
    <executions>
        <execution>
            <id>echo-build-environment</id>
            <phase>validate</phase>
            <goals>
                <goal>execute</goal>
            </goals>
            <configuration>
                <source>
                <![CDATA[
                def rootPom = project;
                while (rootPom.parent != null) {
                    rootPom = rootPom.parent;
                }

                project.properties.setProperty('root.pom.version', 
                                                rootPom.version);                            
                log.info("      Maven Home:  " + project.properties['maven.home']);
                log.info("       Java Home:  " + project.properties['java.home']);
                log.info("   Built By User:  " + project.properties['user.name']);
                log.info("Corp POM Version:  " + rootPom.version);
                ]]>
                </source>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

该`project.properties.setProperty`部分存储计算的属性，因此子 POM 可以访问它。

生成的日志如下所示：

```
[INFO]       Maven Home:  c:\dev\maven\apache-maven-3.0.4
[INFO]        Java Home:  c:\Program Files\Java\jdk1.7.0_13\jre
[INFO]    Built By User:  user944849
[INFO] Corp POM Version:  0.26-SNAPSHOT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:01:24.773

您可以通过使用两个插件的组合在已安装/已部署的 POM 中实现属性扩展： - [maven-resources-plugin](http://maven.apache.org/plugins/maven-resources-plugin/)生成 pom.xml 的过滤版本 - [maven-install-plugin](http://maven.apache.org/plugins/maven-install-plugin/)和[maven-deploy-plugin](http://maven.apache.org/plugins/maven-deploy-plugin)，使用安装-file 和 deploy-file mojos，用于安装/部署过滤后的 POM。

例如，此过程可以在发布者过程中触发

# javascript - 为什么在比较字符串时使用 === 而不是 ==

> ID：15645705
> 
> 赞同：4
> 
> 时间：2013-03-26T19:25:22.263
> 
> 标签：javascript, jquery

检查字符串值时，我使用'=='。但我见过使用 '===' 的实例。例如，而不是

```
if("true" == "true"){
 alert('true');
} 
```

这是使用的：

```
if("true" === "true"){
 alert('true');
} 
```

这背后的原因是什么？这两个用例似乎都按预期工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T19:26:10.323

`===`运算符确保不仅值相等，而且要比较的两个项目也属于同一类型；而`==`操作员只检查两个项目的值是否相等

正如评论中提到的@amnotiam，您可能还想查看[*抽象平等比较算法*](http://es5.github.com/#x11.9.3)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T19:30:42.180

```
10 == '10'  // true  | check value: 10 equal 10
10 == 10    // true  | check value: 10 equal 10

10 === '10' // false | check type: int not equal string
10 === 10   // true  | check type: int equal int, check value: 10 equal 10 
```

检查类型与否。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T19:26:23.863

`===`用于检查类型的值..

```
var str="300";

//this gt execute
if(str==="300")
{
        alert("this alert get executed");
}

//this not execute
if(str===300)
{
        alert("this alert not get executed");    
} 
```

* * *

对于`==`以下两个代码都是有效的，因为它不检查类型

```
//this get execute
if(str=="300")
{
        alert("this alert get executed");
}

//this get execute
if(str==300)
{
        alert("this alert get executed");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:26:36.183

第一次检查只是逻辑测试，第二次检查是逻辑和类型测试。

== 检查一侧是否等于第二个，而 === 检查左侧是否等于第二个但来自同一类型。

```
if("true" == "true") 
```

检查两者是否是相同的字符串

```
if("true" === "true") 
```

检查两者是否都是相同的字符串并且都是字符串值。

另请注意，有一个 !== 运算符，它进行负值和类型比较。

# excel - 为什么我的 applescrpt 在运行 excel 宏时返回 2 msgbox？

> ID：15645711
> 
> 赞同：1
> 
> 时间：2013-03-26T19:25:53.310
> 
> 标签：excel, vba, macos, applescript

当我收到消息框 2 次时，以下 applescript 似乎正在运行宏两次。

```
tell application "Microsoft Excel"
activate
run VB macro "Test.xlsx!Test()"
end tell 
```

而 test() 宏是：

```
Sub Test()
MsgBox "This is an Excel macro."
End Sub 
```

我收到消息框“这是一个 Excel 宏”。两次，所以我猜它运行了两次。知道为什么它运行两次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:56:26.853

我注意到当一个 applescript 出现错误时，它有时会尝试从头开始再次运行，通常是在它调用某个第三方应用程序时。

# jquery - 为什么单击事件未定义 event.namespace？

> ID：15645712
> 
> 赞同：7
> 
> 时间：2013-03-26T19:25:53.703
> 
> 标签：jquery

鉴于这种：

**HTML**

```
<button id="btn">Click me</button>
<br/>
<div id="result"></div> 
```

**JS**

```
$("#btn").on("click.mynamespace", function (e) {
    $("#result").text("namespace: " + e.namespace);
}); 
```

为什么命名空间总是未定义？

编辑：

我想要做的是将事件处理程序的多个实例连接到按钮的单击事件。然后，当单击按钮时，依次调用每个实例。然后，事件处理程序的每个实例都需要断开自己的连接，这样如果再次单击按钮，则不会调用该处理程序实例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T19:32:52.930

仅当使用 jQuery或方法`namespace`触发事件时才定义该属性。否则，如果有多个命名空间，jQuery 怎么知道要使用哪个命名空间？`.trigger``.triggerHandler`

[http://jsfiddle.net/GYyef/2/](http://jsfiddle.net/GYyef/2/)

[http://api.jquery.com/event.namespace/](http://api.jquery.com/event.namespace/)

如果您的目标是让事件只发生一次，那么该[`.one()`](http://api.jquery.com/one/)方法会更合适。

# c# - 从 C# 自定义 Cmdlet 中调用 Read-Host cmdlet

> ID：15645718
> 
> 赞同：3
> 
> 时间：2013-03-26T19:26:31.423
> 
> 标签：c#, powershell, input, cmdlet

我正在编写一组需要 Oauth2 身份验证的 Powershell Cmdlet。我目前能够到达一个新的浏览器窗口打开并且用户复制访问身份验证代码以传回 cmdlet 的地步。但是，这意味着我必须有一个单独的 cmdlet，它现在接受身份验证代码作为输入。

有没有办法调用读取主机？我已经尝试过这些[说明](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714876%28v=vs.85%29.aspx)，但尽管已列出，但[ReadHostCommand](http://msdn.microsoft.com/en-us/library/microsoft.powershell.commands.readhostcommand%28v=vs.85%29.aspx)并未显示在 Microsoft.PowerShell.Commands 命名空间下，而是显示在[WhereObjectCommand](http://msdn.microsoft.com/en-us/library/microsoft.powershell.commands.whereobjectcommand%28v=vs.85%29.aspx)下。

我试过 Console.ReadLine() 但在运行 Cmdlet 时它只是被忽略了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T05:12:45.837

位于命名空间`ReadHostCommand`中，`Microsoft.PowerShell.Commands`但您必须引用`Microsoft.PowerShell.Commands.Utility.dll`程序集。

# reporting-services - 使用 SSDT 编辑 RDL 报告 (SQL Server Data Tools)

> ID：15645724
> 
> 赞同：3
> 
> 时间：2013-03-26T19:26:37.197
> 
> 标签：reporting-services, sharepoint-2010, sql-server-data-tools

我的 SharePoint 2010 网站上托管了一些 RDL 报告。我最近为 VS 2012 安装了 SSDT 工具，我可以创建一个新的报告项目来处理一些报告数据源等，但我真正想做的是使用编辑托管在 SharePoint 上的现有报告。如果我尝试“打开”RDL 文件，我只会获得“幕后”报告架构信息，但没有设计时支持。

我正在运行带有 SQL Server Reporting Services 2012 的 SharePoint 2010。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:43:01.103

SQL Server 2012 SSRS 最适用于“商业智能开发工作室”，它是 Visual Studio 2010 的 SQL Server 2012 的一个附加组件。我相信你所说的 SQL Server 开发工具现在与“所有程序”下的东西是一样的在那里更改了它的名称，但不是在您创建项目时。好的 ole MS 改变了一些东西，让人们更加困惑。您可以从安装 SQL 2012 或 Enterprise 或 Developer 版本的高级工具版本中获得它。开发 RDL 的其他一切都只是 BIDS 可以做的淡化版本。我不知道为什么在 MS 他们没有让 SQL 2012 与 VS 2012 一起使用，但他们没有。SQL Server BIDS 的所有其他版本都与那一年的 VS 相匹配，但 2012 年。

当您有 BIDS 时，您只需将“RDL”文件放在您保存的位置即可。然后说：“添加现有”并指向该位置并从它们那里获取所有数据以进行编码。如果您熟悉 Report Builder，它基本上是 BIDS 的淡化版本。但是，BIDS 可以更好地维护内存，因为它是专门为设计 SSIS、SSRS 或 SSAS 应用程序而创建的 IDE。

因此，如果您没有解决方案，请创建一个“报告项目”。建立一个数据源（您需要知道数据库以及如何连接到它或其他数据源）。然后转到报告文件夹并选择“添加现有”并执行我上面所说的操作。您只需找到您的 RDL 文件，它们就会出现在那里。

# jquery - 轮询 URL 并将结果写入 DIV

> ID：15645730
> 
> 赞同：0
> 
> 时间：2013-03-26T19:26:55.430
> 
> 标签：jquery

我正在轮询查询 JMS 队列以获取某些信用卡授权结果的 URL。当 URL 返回成功时，我想将数据写入指示的 DIV。

我的大部分经验都在 Java 后端。到目前为止，这是我设法组合在一起的，但它不起作用。即使 Chrome 和 Firebug 显示数据返回正确，我的 DIV 中也没有显示任何内容。

我在这里犯了一个简单的错误吗？

```
 <script type="text/javascript">
        function doPolling() {
            $.ajax({
                url: './poll',
                dataType: 'json',
                type: 'get',
                success: function(jdata) {
                    console.log(jdata);
                    var jdata = $.parseJSON(jdata);

                    if (jdata.pollerStatus == 'poll-again' && jdata.pollerMessage == 'ok') {
                        setTimeout(function() {
                            doPolling();
                        }, 15000);
                    } else if (jdata.pollerStatus == 'done' && jdata.pollerMessage == 'success') {
                        $("#creditcard_results").text(jdata);
                    } else if (jdata.pollerStatus == 'done') {
                        if (jdata.pollerMessage == 'timed out') {
                            $('#submitorder').prop('disabled', false);
                        } else if (jdata.pollerMessage == 'payment-error') {
                            $('#submitorder').prop('disabled', false);
                        } else {
                            $('#submitorder').prop('disabled', false);
                        }
                    }
                }
            });
        }
    </script>

    <div id="creditcard_results"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:39:37.397

在这条线上：

```
$("#creditcard_results").text(jdata); 
```

jdata 是一个对象。.text() 函数只接受一个字符串或返回字符串的回调函数。

# php - PHP、正则表达式和大写

> ID：15645733
> 
> 赞同：4
> 
> 时间：2013-03-26T19:27:04.560
> 
> 标签：php, regex, preg-replace

我需要利用我的正则表达式捕获/匹配的内容。假设我想将连字符后的第一个字符大写，我的正则表达式将是这样的：

`-(.)`

我的替换字符串将是这样的：

`-\U1`

在`preg_replace`，我会有这样的事情：

`$string = preg_replace('/-(.)/', '-\1', $string);`

但这不起作用`preg_replace`（而且我认为它不支持在反向引用中更改大小写）。建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:32:35.867

您可以像这样使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)：

```
 $string = preg_replace_callback(
           '#(?<=-)(.)#',
           create_function(
               '$matches',
               'return strtoupper($matches[1]);'
           ),
           $string
       ); 
```

或者，使用匿名函数（使用 PHP ver >= 5.3.0）：

```
$string = preg_replace_callback( '#(?<=-)(.)#', function( $matches) {
    return strtoupper( $matches[1]);
}, $string); 
```

### 现场演示：http: [//ideone.com/IpoCvB](http://ideone.com/IpoCvB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:33:12.603

`$string = preg_replace('/(?<=-)(.)/e', 'strtoupper("$1")', $string);`

e[修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)。

# python - 用 FK 查找替换列表推导

> ID：15645734
> 
> 赞同：0
> 
> 时间：2013-03-26T19:27:15.567
> 
> 标签：python, mysql, django

我目前有以下列表理解：

```
[item.service.name for item in OrderItem.objects.all()] 
```

`service`是一个 FK on `OrderItem`，所以上面的代码正在做大量无用的 FK 查找。我如何`services`在一个查询中获得所有信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:28:34.730

以下将为您提供所需的内容：

```
OrderItem.objects.values_list('service__name', flat=True).distinct() 
```

# php - Codeigniter - 加载模型会导致实例出现问题

> ID：15645735
> 
> 赞同：0
> 
> 时间：2013-03-26T19:27:18.857
> 
> 标签：php, codeigniter, model, instance

我正在使用 CodeIgniter 并创建了几个类（在我的模型文件夹中）：

*   `Entity`是一个抽象类（用于表示将在表单中并进入数据库的任何内容）

*   `Login`扩展`Entity`（用于管理用户登录：用户名、密码...）

*   `Webform`（用于创建基于实体的表单）

在我的控制器中，我有这个：

```
$this->load->model('login');
$myLogin = new Login(array('stuff' => 'value'));
$form = new Webform($myLogin); 
```

在我的模型中，我有 Webform 类：

```
class Webform
{
    protected $entity;
    protected $fields;

    public function __construct(Entity $entity)
    {
        $this->setEntity($entity);
    }

    public function setEntity(Entity $entity)
    {
        $this->entity = $entity;
    }
} 
```

加载“Webform”模型时出现错误`config/autoload.php`（至少我认为它在那里，因为控制器代码工作得很好，并且视图显示在这 3 个错误下方）：

```
A PHP Error was encountered
Severity: 4096
Message: Argument 1 passed to Webform::__construct() must be an instance of Entity, none given, called in (...)\system\core\Loader.php on line 303 and defined
Filename: forms/webform.php
Line Number: 8

A PHP Error was encountered
Severity: Notice
Message: Undefined variable: entity
Filename: forms/webform.php
Line Number: 10

A PHP Error was encountered
Severity: 4096
Message: Argument 1 passed to Webform::setEntity() must be an instance of Entity, null given, called in (...)\application\models\forms\webform.php on line 10 and defined
Filename: forms/webform.php 
```

据我所见，CI 自动加载坚持应该有一个`Entity`- 但我在这里只想让 CI 知道我什么时候该去哪里`$foo = new Webform($bar);`

我做错了什么？谢谢！

编辑 - 已修复（我认为）我想我明白了 - CI 加载类就像实例化它 - 而不是加载它，我做了一个很好的旧 require_once。看起来它现在正在工作。

# sql-server - 子查询的条件重用

> ID：15645741
> 
> 赞同：0
> 
> 时间：2013-03-26T19:27:35.780
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

想不通这个...

Sql 存储过程有一个可选参数，比如`id(int)`. 例如，为了简单起见，我必须返回一个结果集，并额外`...and id=@id`检查参数是否不为空。如果不是，我只返回结果集。

如何避免两次编写查询的“核心”？`CTE`救援？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:31:08.697

你可以做

```
where .... and (@id is null or id = @id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:29:53.090

你可以试试：

```
select * from myTable where id = isnull(@id, id) 
```

如果`@id`为空，则查询将其自己的 id 列与自身进行比较，这始终为真，否则为使用的参数。

# android - 从 Android NDK 清单文件中引用相对路径资源

> ID：15645743
> 
> 赞同：3
> 
> 时间：2013-03-26T19:27:43.940
> 
> 标签：android, eclipse, android-ndk, java-native-interface, android-manifest

我目前在包含 NDK 清单文件中的资源时遇到问题，我确信这是一个快速修复错误。大型库中的项目和操作系统之间共享大量文件。因此，为了使文件与其他项目保持同步，并避免在每次更新时使用最新的 API 更新每个单独的项目，需要使用相对路径引用一大堆本机头文件和源代码文件。

在 Eclipse 中，我在项目的本地文件夹结构中单击并拖动了当前应用程序所需的文件（不复制它们，而是使用相对路径）。

```
/项目文件夹
   /jni
      /外部项目文件
         /src
         /包括

```

使用 Eclipse 中的这个文件夹结构，我有一个具有以下结构的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := projectLib

LIBRARY_SRC_FOLDER   := $(wildcard $(LOCAL_PATH)/externalProjectFiles/src/*.cpp)

LOCAL_C_INCLUDES := $(LOCAL_PATH)/externalProjectFiles/include

LOCAL_SRC_FILES :=  projectLibNDK.c
LOCAL_SRC_FILES +=  $(LIBRARY_SRC_FOLDER:$(LOCAL_PATH)/%=%)

LOCAL_LDLIBS    := -L$(SYSROOT)/usr/lib -llog -landroid
LOCAL_CFLAGS    :=  -Wno-multichar -D_ANDROID -DLIBDIR="\"c\"" 
LOCAL_CFLAGS    +=  -DUSE_TCP_LOOPBACK -DMDNS_UDS_SERVERPATH=\"/var/run/mdnsd\" -DIN_LIBRARY -DBUILDING_LIBICONV -DUSE_BONJOUR 
LOCAL_CFLAGS    +=  -DXR_TARGET_ANDROID -DKS_BUILDING_KS -Wno-psabi -Wno-multichar -D_GNU_SOURCE -DHAVE_IPV6=0 -DNOT_HAVE_SA_LEN 
LOCAL_CFLAGS    +=  -DUSES_NETLINK -DHAVE_LINUX -DTARGET_OS_LINUX
LOCAL_CPPFLAGS  :=  -frtti -fexceptions

include $(BUILD_SHARED_LIBRARY) 
```

但是，当我尝试在 projectLibNDC.c 中包含第一个标头时，它会打印错误**"No such file or directory"**。

`#include "externalFile.h"`

我正在采取的方法是可能的解决方案吗？
我是否必须在 Android.mk 文件本身中为这些文件提供相对路径？这比引用引用文件的本地文件夹更麻烦。

从理论上讲，听起来好像我可以通过这种方式通过 NDK 创建一个库。但是，也许我没有正确设置项目。任何助手都会有所帮助；JNI 有时会惹恼我。

**编辑：** 似乎 Eclipse（这是一个了不起的 IDE）在其项目设置中保存的链接文件的引用后面没有任何胶水。如果我将引用的文件拖到项目中，则没有物理文件放入这些文件夹以表示链接文件的存在。该信息显然仅存储在项目设置中。这对 Android.mk 文件没有帮助。

这意味着任何脚本或 makefile 都没有关于应该包含哪些文件的任何参考。不幸的是，我将不得不从 makefile 本身单独引用文件夹和文件。我可能会将项目中的引用作为其他程序员对其存在的暗示。不幸的是我不能那样设计它，但这是我迄今为止得到的结论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:47:19.483

最后，我决定采用的方法是将文件的相对路径分别包含在 makefile 中。这不是最干净的解决方案，但它确实有效，并为以后的工作提供了一个体面的环境。

```
...
LOCAL_C_INCLUDES += $(COMMON_COMPUTATION_PATH)
LOCAL_C_INCLUDES += $(COMMON_DATASET_PATH)
...
LOCAL_SRC_FILES += $(COMMON_COMPUTATION_PATH)/matrixRT.cpp $(COMMON_COMPUTATION_PATH)/multiplRT.cpp
LOCAL_SRC_FILES += $(COMMON_COMPUTATION_PATH)/multiplSqRT.cpp $(COMMON_COMPUTATION_PATH)/multiplSq1978RT.cpp
... 
```

从以前的库开始，该库已经在 iOS 应用程序中链接了文件，我可以将这些资源拖到 Eclipse 项目中的本地文件夹中。然后从 PROJ_LOC 中选择“链接到文件”。由于这两个项目对我将使用的所有文件都有相同的相对路径，这就像一个魅力，让我免于查找和丢弃我需要的单个文件。

由于共享文件只是这些目录中所需的零碎内容，因此我无法使用通配符创建对源文件的单个文件夹引用。但是，我相信最终最好为移动软件请求一个组织文件夹结构，以便我们确实可以只引用移动项目中需要的文件。

所以最后，我无法使用链接文件作为清单文件的参考。如果它对您有用，user1368342 已经提到可以从清单文件中制作和使用操作系统级别的链接文件。但是，出于跨多个操作系统平台的可移植性原因，我决定不走这条路。

至少通过这种设置，用户可以看到正在构建的项目库中包含的链接文件。当文件更改和更新时，他们还可以在屏幕和清单中获得更新，以及处理直接从项目内编译它产生的任何错误的能力。

缺点是当需要引入一个新文件时，它需要同时添加到项目和清单中，而不是在一个位置。但是，这对我来说是一个可以接受的解决方案。希望遇到诸如此类问题的其他任何人都发现该方法很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:18:23.170

正如评论中提到的，我曾经也遇到过 Eclipse 引用的问题。我改为在操作系统级别使用符号链接。

如果您使用符号链接对项目进行版本控制，可能会出现问题（但我相信它仍然值得尝试）。就我而言，我有一个已版本化的主项目（并包含所有物理文件），并且符号链接用于编译未版本化的库。

# sql-server-2008 - SQL Server ROW_NUMBER 行为

> ID：15645746
> 
> 赞同：1
> 
> 时间：2013-03-26T19:27:54.000
> 
> 标签：sql-server-2008, row-number

我有以下查询：

```
SELECT * FROM
(
    SELECT 
       a.TeacherID, a.UniversityID, 
       ROW_NUMBER() OVER (ORDER BY a.TeacherID) AS RowNum 
    FROM 
       SelectAll a  
    LEFT JOIN 
       mp_Ratings r ON a.TeacherID = r.TeacherID 
    GROUP BY 
       a.TeacherID, a.UniversityID
) AS TeacherInfo 
WHERE RowNum BETWEEN 10 AND 50 
```

它工作正常。现在，如果我想做类似的事情：

```
SELECT * FROM
(
    SELECT 
       a.TeacherID, a.UniversityID, 
       ROW_NUMBER() OVER (ORDER BY a.TeacherID) AS RowNum 
    FROM 
       SelectAll a  
    LEFT JOIN 
       mp_Ratings r ON a.TeacherID = r.TeacherID 
    GROUP BY 
       a.TeacherID, a.UniversityID
) AS TeacherInfo 
WHERE RowNum BETWEEN 10 AND 50 AND UniversityID = 2 
```

我什么也没得到，因为`UniversityID = 2`从行号**2991**开始。我希望能够`Row_Number`用每一个不同的`UniversityID`.

我尝试了以下方法：

```
SELECT *, ROW_NUMBER() OVER (ORDER BY TeacherID) AS RowNum  
FROM
(
    SELECT 
        a.TeacherID, a.UniversityID 
    FROM 
        SelectAll a  
    LEFT JOIN 
        mp_Ratings r ON a.TeacherID = r.TeacherID 
    GROUP BY 
        a.TeacherID, a.UniversityID
) AS TeacherInfo 
WHERE UniversityID = 2 
```

这为每次搜索带来了新的集合`row_numbers`，但是如果我尝试这样使用`RowNum`别名：

```
SELECT *, ROW_NUMBER() OVER (ORDER BY TeacherID) AS RowNum  
FROM
(
    SELECT 
        a.TeacherID, a.UniversityID 
    FROM 
        SelectAll a  
    LEFT JOIN 
        mp_Ratings r ON a.TeacherID = r.TeacherID 
    GROUP BY 
        a.TeacherID, a.UniversityID
) AS TeacherInfo 
WHERE UniversityID = 2 
  AND RowNum BETWEEN 10 AND 20 
```

我明白了

> 消息 207，级别 16，状态 1，第 4 行无效的列名称“RowNum”。

我的选择有什么问题？为什么我无法访问`RowNum`别名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:35:36.377

您只需要将`WHERE`子句移动到内部查询。

```
SELECT TeacherID, UniversityID, RowNum FROM
(
    SELECT a.TeacherID, a.UniversityID, ROW_NUMBER() OVER 
     (ORDER BY a.TeacherID) AS RowNum FROM SelectAll a
     LEFT JOIN mp_Ratings r 
     ON a.TeacherID = r.TeacherID 
     WHERE UniversityID = 2
     GROUP BY a.TeacherID, a.UniversityID
) as TeacherInfo WHERE RowNum BETWEEN 10 AND 50; 
```

您无法`RowNum`在查询的外部版本中访问别名，因为别名尚不存在。`SELECT`被倒数第二次解析，在`ORDER BY`. `WHERE`之前处理过`SELECT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T17:35:38.790

使用分区`row_number`：

```
row_number() over(partition by UniversityID, order by teacherid) 
```

# php - session_set_save_handler 并写在 php 5.4.12

> ID：15645748
> 
> 赞同：4
> 
> 时间：2013-03-26T19:27:56.707
> 
> 标签：php, session, session-set-save-handler

我正在使用`session_set_save_handler()`将会话保存到数据库。

从 php v.5.3 迁移到 v.5.4 后，该`write()`函数根本没有被调用；无论是在调用`session_write_close()`函数时，还是在脚本终止时（之前它工作正常，并且没有对代码进行任何更改）。和函数仍照常调用`read()`。 我知道 php 5.4 中有一些与机制相关的变化。有没有人有类似的问题或知道发生了什么变化？`open()``close()`

`session_set_save_handler()`

```
class session {

    private $table_name;

    function __construct() {
        $this->table_name = SESS_TABLE;

        session_set_save_handler(array($this, 'open'), array($this, 'close'), array($this, 'read'), array($this, 'write'), array($this, 'destroy'), array($this, 'gc'));
        register_shutdown_function('session_write_close');

    }

    function start_session($session_name, $secure) {
        global $session;

        // Make sure the session cookie is not accessable via javascript.
        $httponly = true;

        // Hash algorithm to use for the sessionid. (use hash_algos() to get a list of available hashes.)
        $session_hash = 'sha512';

        // Check if hash is available
        if (in_array($session_hash, hash_algos())) {
          // Set the has function.
          ini_set('session.hash_function', $session_hash);
        }
        // How many bits per character of the hash.
        // The possible values are '4' (0-9, a-f), '5' (0-9, a-v), and '6' (0-9, a-z, A-Z, "-", ",").
        ini_set('session.hash_bits_per_character', 5);

        // Force the session to only use cookies, not URL variables.
        ini_set('session.use_only_cookies', 1);

        // Get session cookie parameters 
        $cookieParams = session_get_cookie_params(); 
        // Set the parameters
        session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly); 
        // Change the session name 
        session_name($session_name);
        // Now we cat start the session
        session_start();
        // This line regenerates the session and delete the old one. 
        // It also generates a new encryption key in the database. 
        if(USE_REGENERATE){
            $this->regenerate_id();
        }
        //session_regenerate_id(true);    
    }

    function regenerate_id() {

        $old_sess_id = session_id();
        session_regenerate_id(true);
        $new_sess_id = session_id();
        Logger::write($old_sess_id .'-'.$new_sess_id   ,  'session.log');

        $time = time();
        if(!isset($this->u_stmt)) {
          $this->u_stmt = $this->db->prepare(" UPDATE ".$this->table_name." set id = ? where id=?");
        }

        $this->u_stmt->bind_param('ss', $new_sess_id,$old_sess_id);
        $this->u_stmt->execute();
        return true;
    }

    function open() {
        $host = 'localhost';
        $user = SESS_USER;
        $pass = SESS_PASSWORD;
        $name = SESS_DBNAME;
        $mysqli = new mysqli($host, $user, $pass, $name);
        $this->db = $mysqli;
        return true;
    }

    function close() {
        $this->db->close();
        return true;
    }

    function read($id) {
        global $s_read_start, $s_read_end;
        $s_read_start = microtime(true);
        if(!isset($this->read_stmt)) {
          $this->read_stmt = $this->db->prepare("SELECT data FROM ".$this->table_name." WHERE id = ? LIMIT 1");
        }
        $this->read_stmt->bind_param('s', $id);
        $this->read_stmt->execute();
        $this->read_stmt->store_result();
        $this->read_stmt->bind_result($data);
        $this->read_stmt->fetch();
        $key = $this->getkey($id);
        $data = $this->decrypt($data, $key);
        $s_read_end = microtime(true);
        if($s_read_end-$s_read_start > MORE_THEN)
            error_log (date("Y-m-d H:i:s").' '.'READ: '. ($s_read_end-$s_read_start).PHP_EOL,3,BASE_DIR.'/logs/cookies.log');
        return $data;
    }

    function write($id, $data) {
        error_log (date("Y-m-d H:i:s").' '.'WRITE: '.PHP_EOL,3,BASE_DIR.'/logs/cookies.log');
        global $s_write_start, $s_write_end;
        $s_write_start = microtime(true);
        // Get unique key
        $key = $this->getkey($id);
        // Encrypt the data
        $data = $this->encrypt($data, $key);

        $time = time();
        if(!isset($this->w_stmt)) {
          $this->w_stmt = $this->db->prepare("REPLACE INTO ".$this->table_name." (id, set_time, data, session_key) VALUES (?, ?, ?, ?)");
        }

        $this->w_stmt->bind_param('siss', $id, $time, $data, $key);
        $this->w_stmt->execute();
        $s_write_end = microtime(true);
        if($s_write_end-$s_write_start > MORE_THEN)
            error_log (date("Y-m-d H:i:s").' '.'WRITE: '. ($s_write_end-$s_write_start).PHP_EOL,3,BASE_DIR.'/logs/cookies.log');
        return true;
    }

    function destroy($id) {
        global $s_destroy_start, $s_destroy_end;
        $s_destroy_start = microtime(true);

        if(!isset($this->delete_stmt)) {
          $this->delete_stmt = $this->db->prepare("DELETE FROM ".$this->table_name." WHERE id = ?");
        }
        $this->delete_stmt->bind_param('s', $id);
        $this->delete_stmt->execute();
        $s_destroy_end = microtime(true);
        if($s_destroy_end-$s_destroy_start > MORE_THEN)
            error_log (date("Y-m-d H:i:s").' '.'DESTROY: '. ($s_destroy_end-$s_destroy_start).PHP_EOL,3,BASE_DIR.'/logs/cookies.log');
        return true;
    }

    function gc($max) {
        global $s_gc_start, $s_gc_end;
        $s_gc_start = microtime(true);

        if(!isset($this->gc_stmt)) {
            $this->gc_stmt = $this->db->prepare("DELETE FROM ".$this->table_name." WHERE set_time < ?");
        }
        $old = time() - $max;
        $this->gc_stmt->bind_param('s', $old);
        $this->gc_stmt->execute();
        $s_gc_end = microtime(true);
        if($s_gc_end-$s_gc_start > MORE_THEN)
            error_log (date("Y-m-d H:i:s").' '.'GC: '. ($s_gc_end-$s_gc_start).PHP_EOL,3,BASE_DIR.'/logs/cookies.log');
        return true;
    }

    private function getkey($id) {
        if(!isset($this->key_stmt)) {
          $this->key_stmt = $this->db->prepare("SELECT session_key FROM ".$this->table_name." WHERE id = ? LIMIT 1");
        }
        $this->key_stmt->bind_param('s', $id);
        $this->key_stmt->execute();
        $this->key_stmt->store_result();
        if($this->key_stmt->num_rows == 1) { 
          $this->key_stmt->bind_result($key);
          $this->key_stmt->fetch();
          return $key;
        } else {
          $random_key = hash('sha512', uniqid(mt_rand(1, mt_getrandmax()), true));
          return $random_key;
        }
    }

    private function encrypt($data, $key) {
        $salt = 'cH!swe!retReGu7W6bEDRup7usuDUh9THeD2CHeGE*ewr4n39=E@rAsp7c-Ph@pH';
        $key = substr(hash('sha256', $salt.$key.$salt), 0, 32);
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $data, MCRYPT_MODE_ECB, $iv));
        return $encrypted;
    }

    private function decrypt($data, $key) {
        $salt = 'cH!swe!retReGu7W6bEDRup7usuDUh9THeD2CHeGE*ewr4n39=E@rAsp7c-Ph@pH';
        $key = substr(hash('sha256', $salt.$key.$salt), 0, 32);
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($data), MCRYPT_MODE_ECB, $iv);
        return $decrypted;
    }
} 
```

用法：

```
$session = new session();
$session->start_session('name', false); 
```

对不起，代码中的一些调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T01:04:11.457

似乎您的会话对象在关闭函数调用之前被 PHP 内部垃圾收集器破坏了。在这种情况下，您需要将`session_write_close()`函数移动到析构函数中：

```
function __destruct() {
  session_write_close();
} 
```

我建议你根据新的会话处理机制重写你的代码。`SessionHandlerInterface`今后实施以避免此类行为。

# c# - 如何捕获 DataGridView 按键事件在特定时间段内按下的按键？

> ID：15645750
> 
> 赞同：1
> 
> 时间：2013-03-26T19:28:01.023
> 
> 标签：c#, datagridview, keypress

我需要捕获在特定时间段内按下的击键，例如 300 毫秒。因此，当我按“ **a** ”并在 300 毫秒内按“ **b** ”时，我需要字符串“ **ab** ”。但是，如果我在按下“b”300 毫秒后按下键“ **c** ”，**那么**我想要“ **c** ”。

 ****我需要这个来快速跳转到以快速按键开头的 DataGridView 的单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:58:59.827

我不完全确定我理解你的问题，但我相信你想要一种方法来在按下两个键时执行一个代码块，或者如果按下三个键则执行另一个代码块。此外，您希望每次按键的时间间隔在 300 毫秒内。如果我理解了，那么这段代码应该做你想做的事：

```
private System.Diagnostics.Stopwatch Watch = new System.Diagnostics.Stopwatch();
private string _KeysPressed;
public string KeysPressed
{
    get { return _KeysPressed; }
    set 
    {
        Watch.Stop();
        if (Watch.ElapsedMilliseconds < 300)
            _KeysPressed += value;
        else
            _KeysPressed = value;
        Watch.Reset();
        Watch.Start();
    }
}        
private void KeyUpEvent(object sender, KeyEventArgs e)
{
    KeysPressed = e.KeyCode.ToString();
    if (KeysPressed == "AB")
        lblEventMessage.Text = "You've pressed A B";
    else if (KeysPressed == "ABC")
        lblEventMessage.Text = "You've pressed A B C";
    else
        lblEventMessage.Text = "C-C-C-COMBOBREAKER!!!";
} 
```

这段代码假定有一个标签、lblEventMessage 和一些触发 KeyUp 事件的东西（我使用了一个文本框）。****

# java - 在Java中，是否值得将另一个类的字段存储在我的类的字段中？

> ID：15645751
> 
> 赞同：0
> 
> 时间：2013-03-26T19:28:04.033
> 
> 标签：java, performance, field

假设我有一个 java 类（我们将调用它`ThatClass`），其中包含很多静态最终字段（尽管它们都不是值字段），并且假设我从一个类中的方法访问了很多这些字段，每个字段很多次我们会打电话`ThisClass`。考虑到内存使用和性能都很关键的情况，是否值得将静态最终字段存储在as 字段的`ThatClass`方法中？`ThisClass``ThisClass`

例子：

```
public class ThatClass
{
    public static final Foo field1 = new Foo();
    public static final Foo field2 = new Foo();
    public static final Foo field3 = new Foo();
}

//implementation A
public class ThisClass
{
    public ThisClass()
    {
        for (int i = 0; i < 20; ++i)
        {
            Bar(ThatClass.field1, ThatClass.field2, ThatClass.field3);
        }
    }

    public void Bar(Foo arg1, Foo arg2, Foo arg3)
    {
        // do something.
    }

    /* imagine there are even other methods in ThisClass that need to access the
     * fields of ThatClass.
     */
} 
```

现在这个另一个实现`ThisClass`

```
//implementation B
public class ThisClass
{
    private final Foo myField1;
    private final Foo myField2;
    private final Foo myField3;

    public ThisClass()
    {
        myField1 = ThatClass.field1;
        myField2 = ThatClass.field2;
        myField3 = ThatClass.field3;

        for (int i = 0; i < 20; ++i)
        {
            Bar(myField1, myField2, myField3);
        }
    }

    public void Bar(Foo arg1, Foo arg2, Foo arg3)
    {
        // do something.
    }

    /* imagine there are even other methods in ThisClass that need to access the
     * fields of ThatClass.
     */
} 
```

我知道我不需要将这三个字段作为`Bar`实现 B 中的方法的参数传递，但为了便于讨论，假设这是必要的。

问题：

1.  两种实现之间的性能有什么区别吗？B比A快吗？

2.  关于内存成本，B比A需要更多的内存？我想它确实如此，但只是多一点（B中每个额外字段的一个额外引用。每个引用都是一个int的大小，对吗？）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:26:29.720

+1 拉塞尔所说的。此外，在两个地方定义字段违反了 [DRY 原则（维基百科）](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。您举了一个非常简单的示例，但假设您需要更改其中一个静态字段的定义。对于第二个实现，您必须更新代码两次 - 假设您记得您对同一字段有两个定义。

# jquery - 让这个 web 应用程序工作的 localStorage CRUD 的想法

> ID：15645759
> 
> 赞同：1
> 
> 时间：2013-03-26T19:28:39.757
> 
> 标签：jquery, jquery-mobile, jquery-plugins, local-storage

这是[我的 github 链接](http://b36094.github.com/MIU/Gold/#addItem)，你们可以在其中看到正在运行的应用程序。我设法将存储在 localStorage 中的信息序列化并显示出来。（在表单中插入内容后单击显示数据按钮）。

jqm.js 文件包含我设法提出的所有代码。当我单击列表中的一个项目（请参阅 jqm.js 文件中的 outputData 函数）以添加一个链接到我单击的项目的动态页面以显示有关该特定项目的更多信息时，我希望它。

伙计们，在想出一堆“重写”整个事情的方法之前，我想要我当前代码的解决方案（如果有的话）。如果可能的话，我想处理我的逻辑，而不是从头开始重写整个应用程序。非常感谢您在重播时考虑这个细节。这个领域内的任何想法或建议都值得赞赏。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:03:59.880

我对你的想法很少。

首先，我为您提供了一个示例，说明如何在单击列表视图元素后创建动态页面：http: [//jsfiddle.net/Gajotres/nsfkx/](http://jsfiddle.net/Gajotres/nsfkx/)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>

        <div data-role="content">
            <ul data-role="listview" data-theme="a">
                <li data-id="1"><a>Dynamic page 1</a></li>
                <li data-id="1"><a>Dynamic page 2</a></li>
                <li data-id="1"><a>Dynamic page 3</a></li>
            </ul>    
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

**JS：**

```
$(document).on('pagecreate', '#index', function(){       
    $(document).on('click', '[data-role="listview"] li', function(event) {
        if(event.handled !== true) // This will prevent event triggering more then once
        {   
            console.log('click');            
            event.handled = true; // click event is handled, dont bind it again

            var nextPageId = parseInt($('body [data-role="page"]').length)+1;
            $('[data-role="page"]').last().after('<div data-role="page" id="article'+nextPageId+'"><div data-role="header" data-theme="b" data-position="fixed" data-id="footer"><h1>Articles</h1><a href="#" data-rel="back" data-role="button" data-theme="b" class="ui-btn-left">Back</a></div><div data-role="content"><p>Article '+nextPageId+'</p></div><div data-role="footer" data-theme="b" data-position="fixed" data-id="footer"><h1>Footer</h1></div></article>');
            //console.log($('body').html());
            //$('#article'+nextPageId).trigger('pagecreate');
            $.mobile.changePage('#article'+nextPageId, {transition: "slide", reverse: false}, true, true); 
        }            
    });   
}); 
```

第二件事，因为您要创建动态内容，所以您需要放弃准备好文档并切换到正确的 jquery Mobile 页面事件。

如果你想了解更多关于 jQuery Mobile 页面事件的信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

# elasticsearch - 停止 Couchbase Elasticsearch XDCR OutOfMemory 错误

> ID：15645762
> 
> 赞同：1
> 
> 时间：2013-03-26T19:29:08.723
> 
> 标签：elasticsearch, out-of-memory, couchbase

我正在使用 4Gb Ram 的 VM 上运行概念验证。我在 Couchbase 中有大约 200 万个文档，并希望使用 XDCR 插件将它们全部导入 Elasticsearch，但是 Couchbase 将 ES 推得太紧，ES 倒下了。我没有太多空间来增加超过 1Gb 默认值的内存，有没有办法减慢复制速度，让 ES 有喘息的空间？

**编辑：**

我应该在这里添加一些历史。我曾经有这个工作，ES 索引 Couchbase 文档的速度非常快，但后来我的 VM 上的磁盘空间用完了。我添加了一个新磁盘并更改了 elasticsearch.yml 中的 path.data 属性。之后，我无法使用 deb 中提供的 init.d 脚本启动 ES。它说 ES 启动正常，但是如果我运行 /etc/init.d/elasticsearch status 它说，“Elasticsearch 服务器没有运行但 pid 文件存在”。我只是为了它而重新安装了ES，但什么也没有。当我运行初始化脚本时，我无法弄清楚如何找出失败的原因。但是，我可以手动完美地启动 ES，如果 coouchbase 没有运行，一切都很酷。我不确定这是否相关，但在某些时候我也需要让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:29:11.493

您可以尝试`couchbase.maxConcurrentRequests: 1024`在 elasticsearch.yml 中修改为较小的数字吗？也许简单地将其设置为 256 可以工作？

# c++ - 在 Windows 8 中调试基于 C++ 的应用程序

> ID：15645765
> 
> 赞同：0
> 
> 时间：2013-03-26T19:29:23.717
> 
> 标签：c++, windows, windows-runtime, windows-store-apps, ida

我有一个由 C++ 制作的 Windows 8 Metro 风格应用程序。（我假设这是因为除了一些接口定义之外没有HTML / JavaScript或.net汇编代码的踪迹。如果有某种方式告诉应用程序的开发环境，请告诉我）

在 appx 包内，有一个 32 位的 exe 文件（PE）。这似乎是主程序，但它只能通过应用容器的上下文启动。

我想用 IDA pro（或 olly）调试这个 exe 文件。由于我无法将此 exe 文件作为独立程序启动，因此我尝试使用 IDA 附加正在运行的进程。但似乎 IDA 无法读取进程内存。（我不确定）所以我尝试以管理员权限运行 IDA。现在，当我尝试附加正在运行的进程时，IDA 就停止了。

我的问题是“是否可以通过在应用程序容器内附加运行进程来使用 IDA 在 Windows 8 中调试 Metro 风格的应用程序？”

或者是否可以从一开始就使用 IDA 或 olly 运行 Metro 风格的应用程序？

是否有某种新的保护措施可以防止在 Windows 8 中调试应用程序？还是只是我的错误或配置错误？

一些建议将不胜感激。

# javascript - HTML Javascript 日历

> ID：15645766
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:29:24.600
> 
> 标签：javascript, jquery, html, calendar

我一直在尝试将一个简单的日历集成到我的网站中，但我还没有找到任何好的日历，因此我发布了这个问题。

我在日历中需要的只是我可以标记日期，当用户单击该日期时，他将能够在弹出窗口等中看到针对该标记的事件。请让我知道有没有这样的开源日历可以在 JS 和 html 上提供这样的功能？任何帮助将不胜感激，谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:32:50.477

您可以像这样使用 datepicker 来满足您的需求。这几乎是最好的。

[http://jqueryui.com/datepicker/#inline](http://jqueryui.com/datepicker/#inline)

这将显示日期选择器内联

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:36:33.773

看看Fullcalendar。这是一个很棒的日历，我也可以帮助你。我已经在我的一些项目中使用过，它很棒。

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

您可以添加、删除和更新事件、从谷歌日历导入事件、拖放功能、每月、每周和每日视图等。

此外，如果您喜欢任何 jqueryui 主题滚轮，您可以添加到其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:31:21.877

JQuery UI 有一个出色的日期选择器，应该可以满足您的要求。[jQuery UI 日期选择器](http://jqueryui.com/datepicker/)

# facebook-graph-api - 这些 facebook 访问令牌有什么区别？

> ID：15645767
> 
> 赞同：0
> 
> 时间：2013-03-26T19:29:29.290
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-apps, access-token, facebook-access-token

我正在开发一个可以管理页面的 FB 应用程序，但我需要澄清这一点：

有什么区别

> $page_info = $facebook->api("/$page_id?fields=access_token");

和

> $aToken = $facebook->getAccessToken();

我看到它们生成了不同的令牌，但我不确定我应该将哪个令牌存储在数据库中以进行离线发布，以及每个令牌的作用是什么？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:33:02.100

一个检索页面访问令牌：

*   您使用它代表页面执行操作。

另一个（默认情况下在 PHP SDK 中）：

*   检索用于代表用户执行操作的用户访问令牌。

这里的主要区别在于，为了检索页面的访问令牌，您需要向`manage_pages`用户请求权限。

# c# - 接受变量的静态成员会损坏吗？

> ID：15645770
> 
> 赞同：2
> 
> 时间：2013-03-26T19:29:33.107
> 
> 标签：c#, multithreading, static, thread-safety

我在形成这个问题时遇到了麻烦，所以我会尝试用几种方式来说明它，这样就不会重复通常关于静态方法的讨论。这可能更像是一个架构问题。

如果您在接受传入变量的静态类上有一个静态成员，如果操作使用率高且运行时间长，是否存在数据冲突/损坏的风险？IE：接受对象图类型的数据访问类以持久化到数据库中。

例如：

```
namespace MyApp.DAL.People
{

public static class Person
{
    public static void Insert(Entities.People.Person p)
    {
        // ADO.net code, try catch etc, execute to db, call other private method
        ....
        Helper(p);
    }

    private static void Helper(Entities.People.Person p)
    {
        // do work...

    }
}

} 
```

如果用户“A”开始`Person.Insert(myNewPerson)`调用操作，该过程是否在用户“B”开始使用静态类和方法将他的“人对象”保存到数据库之前完全完成。

操作是串行的还是异步的，本质上是为了使用静态类而阻塞的？

如果应用程序（开发人员）试图在应用程序空间中使用多个线程，这是否只是一个问题？

除非您为应用程序显式启动另一个线程，否则一切是否都在单个线程上运行？

*作为旁注，这是我在 SO 上的第一篇文章-特别感谢所有花时间发布问题/答案的人-感谢您的宝贵时间！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:34:13.793

如果两个不同的线程`Person.Insert`同时调用，它们将同时执行。除非该方法中有一些明确的阻塞。

thread传入`p`参数中的数据`A`不会被 thread 访问`B`。当然，假设这两个线程将引用传递给完全不同的对象实例。

只要`Insert`方法中的任何内容都不能访问外部范围内的任何内容，这些调用就完全安全。例如，所有方法局部变量对于两个线程都是不同的。只有当方法（或它调用的方法）开始访问外部范围内的数据时，才会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:34:00.347

如果您对可变数据结构进行多线程、不同步的写入，那么损坏总是有可能的。静态成员在这方面并不特殊。如果你想锁定对它们的访问，你必须明确地这样做。

```
public static class Person {
    private readonly object syncLock = new object();

    public static void Insert(Person p) {
        lock(syncLock) {
            //...
        }
    }

    // etc...
} 
```

注意：如果您不进行多线程访问，那么由于只使用一个线程，一切都会以串行方式运行。

# wpf - 无法在设计时从项目子文件夹加载 XAML 资源

> ID：15645774
> 
> 赞同：0
> 
> 时间：2013-03-26T19:29:46.833
> 
> 标签：wpf, visual-studio, xaml, resources, design-time

我定义了一个假视图模型，供 WPF 应用程序中的视图在设计时使用（Visual Studio 2012，.NET 4.5）。视图模型引用作为项目内容一部分的图像。只要我将图像放在根项目文件夹中，它就会在设计时使用以下 URI 约定成功加载：

```
var Image = new BitmapImage(
new Uri(@"pack://application:,,,/MyAppAssemblyName;component/MyImage.png")); 
```

该图像被标记为嵌入式资源（我实际上试图将其标记为内容并且它也加载得很好）。

但我想从 Sample 项目子文件夹中使用它，所以我将上面的代码更改为：

```
var Image = new BitmapImage(
new Uri(@"pack://application:,,,/MyAppAssemblyName;component/Samples/MyImage.png")); 
```

然后它停止工作。无论我尝试什么（内容、嵌入式资源等），都不会从项目的 Samples 子文件夹中加载任何内容。这很奇怪，因为我看到了各种使用子文件夹的示例，尽管我还没有找到设计时的示例。我也尝试使用打包方案 siteoforigin，但后来 Designer 尝试从 Visual Studio 应用程序文件夹加载图像。

我看到了一个类似的问题描述[here](https://stackoverflow.com/questions/14493106/wpf-c-sharp-unable-to-find-subfolder-image-resource)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:32:38.787

我以为我终于明白了，问题在于字符大小写。这是我的项目结构：

MyProject - 样本 - MyImage.png

以下 URI 有效：

```
pack://application:,,,/MyProject;component/samples/MyImage.png 
```

这些不会：

```
pack://application:,,,/MyProject;component/Samples/MyImage.png
pack://application:,,,/MyProject;component/samples/myimage.png 
```

**更新**。在微软论坛的建议之后，我在每次 URI 更改后重新启动 Visual Studio 进行了更多测试，我的上述理论似乎是错误的。字符大小写无关紧要（所有三个版本都有效），但有时 VS Designer 无法赶上最近的更改，需要重新启动 VS 才能让 Designer 使用最后的更改。

# compression - 需要街道名称的压缩算法

> ID：15645779
> 
> 赞同：2
> 
> 时间：2013-03-26T19:29:55.323
> 
> 标签：compression, huffman-code

我有数百万个街道名称的列表，并希望使用压缩算法对其进行压缩。我不确定哪种算法最适合。大多数街道名称中都有共同的子字符串，例如“street”、“way”、...

所有街道名称的集合是固定的，不会动态变化。

起初我在考虑霍夫曼编码，但它只编码单个字母，所以它不会提供很好的性能。所以我想生成一个 trie 并计算最常见的子字符串。然后我可以有某种代码来遍历这个 trie 以取回单词，并使用诸如霍夫曼编码之类的东西压缩这些代码。我不确定这是否不会使它变得比需要的更复杂。

有谁知道在我的情况下有意义的压缩技术？

**编辑 1**

因此，我的用例是：我有一个存储空间有限的电话设备。该电话需要保存特定国家/地区所有街道的所有街道名称。现在每个街道对象都有一些值，其中街道名称作为字符串。这占用了大部分空间，我想尽量减少它。由于名称非常相似，即大多数以“...street”或“...way”结尾，我认为可能值得实施针对这种情况的特定压缩算法。

一个简单的 gzip 带来了大约 50% 的压缩。我认为应该可以从中得到更多。

**编辑 2**

Ebbe M. Pedersen 的解决方案实际上给出了非常好的性能结果。这是一些代码（用 C# 编写）：

```
 private IndexedItem[] _items;

    public void CompressStrings(string[] strings)
    {
        Array.Sort(strings);
        _items = new IndexedItem[strings.Length];

        string lastString = string.Empty;

        for (int i = 0; i < strings.Length; i++)
        {
            byte j = 0;
            while (lastString.Length > j && lastString[j] == strings[i][j])
            {
                j++;
            }

            _items[i] = new IndexedItem() { Prefix = j, Suffix = strings[i].Substring(j) };

            lastString = strings[i];
        }
    }

    private struct IndexedItem
    {
        public byte Prefix;
        public string Suffix;
    } 
```

压缩后，我还通过 DeflateStream 发送它，这导致总压缩率约为**30%**

非常感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:35:45.457

根据您的数据集，您可以首先对街道名称进行排序，然后将每个街道名称表示为前一个街道名称的子字符串 + '不同部分'。

具有一些相似街道名称的示例：

```
 How much to copy from previous street name in Hex 
                         | The rest of the street name
Original                 V   V V V            Orig size  New size
Broadwalk                0 Broadwalk             9         10
Broadwater               7 ter                   8          4
Broadwater Access        A  Access              17          8
Broadwater Bluff         B Bluff                16          6
Broadwater Branch        C ranch                17          6
Broadwater Bridge        D idge                 17          5
Broadwater Cemetary      B Cemetary             19          9
Broadwater Creek         C reek                 16          5
Broadwater Point         B Point                16          6
Broadwater Pvt           C vt                   14          3
Broadwaters              A s                    11          2
Broadway                 7 y                     8          2
Broadway And Union       8  And Union           18         11
Broadway Apartments      9 partments            19         10
Broadway Avenue          9 venue                15          6
                                               ---        ---
                                               220         93 
```

您需要处理一系列名称才能找到真正的名称，但是如果您制定一个完全拼写每个 n 记录的约定，您可以根据您的需要对其进行优化。

将其与每个字母仅使用 5-6 位相结合，并且可能进行一些常见的子字符串替换，您应该能够使用 bzip 获得 50% 的甜菜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:49:35.920

使用带有静态字典编码的算法会更好。你可以试试我的玩具压缩工具：[http](http://code.google.com/p/comprox) ://code.google.com/p/comprox 。（压缩组件）

但最好的方法是在将数据传递给通用压缩程序之前对数据进行无损转换，因为您对数据有更好的理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:15:10.387

不要使用 Huffman，LZ 算法最适合这个。

我建议您将所有街道名称合并到一个文本文件中（仅街道名称）。每个街道名称都应该`NULL`终止，这将有助于拉出单个字符串。压缩这个文件。然而，您将不得不弄清楚如何在移动设备的有限内存中管理它。

另外，看看[SMAZ](https://github.com/antirez/smaz)

# angularjs - 在自定义指令上设置属性值时，字符串插值不起作用

> ID：15645780
> 
> 赞同：7
> 
> 时间：2013-03-26T19:29:55.243
> 
> 标签：angularjs

我应该能够将属性从 $scope 传递到这样的自定义指令中吗？

```
 <div ng-repeat="ratable in ratables">
            <div>How much do you like {{ratable.name}}?</div>

            <!-- CONFUSED - First element does not work, second element does -->
            <rating currentRatingValue="{{ratable.currentvalue}}" maxRatingValue="10"></rating>
        </div> 
```

硬连线的“10”可以很好地传递到指令中，但是当我尝试传递 {{ratable.currentvalue}} 时的字符串插值似乎永远不会发生。我在做一些明显错误的事情吗？

[http://jsfiddle.net/ADukg/2168/](http://jsfiddle.net/ADukg/2168/)

```
var myApp = angular.module('myApp',[])
    .directive("rating", function () {
        return {
            restrict: "E",
            scope: {},
            template: "<div class='rating'>Current rating: {{currentratingvalue}} out of {{maxratingvalue}}</div>",
                link: function (scope, element, attributes) {
                    console.log(attributes.currentratingvalue);    // Does not work but seems like it should
                    console.log(attributes.maxratingvalue);        // Does work
                }
            };    
        });

function MyCtrl($scope) {
    $scope.name = 'Superhero';

    $scope.ratables = [
        { name: "sledding", currentvalue: 3, maxvalue: 5 },
        { name: "water skiing", currentvalue: 7, maxvalue: 10 },
        { name: "whitewater rafting", currentvalue: null, maxvalue: 10 }
    ];
}

<div>
    <div ng-controller="MyCtrl">
      Hello, {{name}}!

        <div ng-repeat="ratable in ratables">
            <div>How much do you like {{ratable.name}}?</div>

            <!-- CONFUSED - First element does not work, second element does -->
            <rating currentRatingValue="{{ratable.currentvalue}}" maxRatingValue="10"></rating>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T19:55:00.633

一些东西：

*   HTML中的指令属性需要使用kebab-case
*   您不需要隔离范围（实际上它会导致问题）；改为使用`scope: true`
*   您需要设置本地范围属性，以便您的模板可以选择它们
*   `$observe`必须用于获取内插属性的值（即使用 {{}} 的属性）

HTML：

```
<rating current-rating-value="{{ratable.currentvalue}}" max-rating-value="10"></rating> 
```

指示：

```
link: function (scope, element, attributes) {
   attributes.$observe('currentRatingValue', function(newValue) {
      console.log('newValue=',newValue);
      scope.currentRatingValue = newValue
   })
   scope.maxRatingValue = attributes.maxRatingValue;
   console.log('mrv=',attributes.maxRatingValue);
} 
```

[小提琴](http://jsfiddle.net/mrajcok/n7H5S/)

* * *

这是一个使用隔离范围的版本：

```
.directive("rating", function () {
   return {
      restrict: "E",
      scope: { currentRatingValue: '@',
               maxRatingValue:     '@' },
      template: "<div class='rating'>Current rating: {{currentRatingValue}}"
              + " out of {{maxRatingValue}}</div>",
  };    
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/xNRm5/)

如果您想在链接函数中查看隔离范围属性的值，则需要使用`$observe`或`$watch`因为我们使用了“@”。如果使用 '=' （用于双向数据绑定），则不需要使用`$observe`or `$watch`。

# xslt - 在 BizTalk 中映射递归结构

> ID：15645786
> 
> 赞同：2
> 
> 时间：2013-03-26T19:30:26.647
> 
> 标签：xslt, mapping, inline, biztalk

我有以下 XML

```
 <response>
       <Contacts>
         <Contact>
           <Name>John Doe</Name>
           <Age>48</Age>
           <DOB>
             <Day>12</Day>
             <Month>6</Month>
             <Year>1964</Year>
           </DOB>
           <Contacts>
             <Contact>
                <Name>Jane Walsh</Name>
                <Age>30</Age>
                <DOB>
                  <Day>24</Day>
                  <Month>3</Month>
                  <Year>1983</Year>
                </DOB>
             </Contact>
             <Contact>
               <Name>Rob Marsh</Name>
               <Age>55</Age>
               <DOB>
                 <Day>1</Day>
                 <Month>Feb</Month>
                 <Year>1958</Year>
               </DOB>
             </Contact>
           </Contacts>
         </Contact>
       </Contacts>
    </response> 
```

我正在使用身份转换将结构复制到目标。

```
 <xsl:template name = "testTemplate" match="/*[local-name()='response']/*">
      <xsl:apply-templates mode="copy-no-ns" select="response"/>
    </xsl:template>
    <!-- Selectively mass copy some of the nodes without namespaces -->
    <xsl:template mode="copy-no-ns" match="*">
      <xsl:element name="{name(.)}" namespace="{namespace-uri(.)}">
        <xsl:copy-of select="@*"/>
        <xsl:apply-templates mode="copy-no-ns" select="node()"/>
      </xsl:element>
    </xsl:template> 
```

XSL 在 Altova XMLSpy 中工作，当我使用 Visual Studio 2010 对其进行测试时，它也会产生所需的输出。但是 BizTalk 映射会产生如下的空节点（删除了正确复制的其他内容）。

```
 <Contacts>
      <Contact>
        <Contacts>
          <Contact />
          <Contact />
        </Contacts>
      <Contact>
    </Contacts> 
```

我不知道发生了什么以及如何解决这个问题。有什么建议么？万分感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:51:41.013

**你明显的问题在这里：**

> ```
>  <xsl:template name = "testTemplate" match="/*[local-name()='response']/*">
>       <xsl:apply-templates mode="copy-no-ns" select="response"/>
>  </xsl:template> 
> ```

此模板匹配顶部元素的任何子元素`response`（在本例中仅匹配名为`Contacts`.

然后它将模板应用于匹配`Contacts`元素的所有子元素，即命名为`response`。**但是，该`Contacts`元素没有名为 的子元素`response`**。此时，转换无法再产生任何输出。

**最终结果只是**：

```
<response>

</response> 
```

**这是完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template name = "testTemplate" match="/*[local-name()='response']/*">
      <xsl:apply-templates mode="copy-no-ns" select="response"/>
 </xsl:template>

    <!-- Selectively mass copy some of the nodes without namespaces -->
 <xsl:template mode="copy-no-ns" match="*">
   <xsl:element name="{name(.)}" namespace="{namespace-uri(.)}">
     <xsl:copy-of select="@*"/>
     <xsl:apply-templates mode="copy-no-ns" select="node()"/>
   </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<response>
    <Contacts>
        <Contact>
            <Name>John Doe</Name>
            <Age>48</Age>
            <DOB>
                <Day>12</Day>
                <Month>6</Month>
                <Year>1964</Year>
            </DOB>
            <Contacts>
                <Contact>
                    <Name>Jane Walsh</Name>
                    <Age>30</Age>
                    <DOB>
                        <Day>24</Day>
                        <Month>3</Month>
                        <Year>1983</Year>
                    </DOB>
                </Contact>
                <Contact>
                    <Name>Rob Marsh</Name>
                    <Age>55</Age>
                    <DOB>
                        <Day>1</Day>
                        <Month>Feb</Month>
                        <Year>1958</Year>
                    </DOB>
                </Contact>
            </Contacts>
        </Contact>
    </Contacts>
</response> 
```

**结果如上所述：**

```
<response>

</response> 
```

**解决方案**：

**只需更换**：

```
<xsl:apply-templates mode="copy-no-ns" select="response"/> 
```

**与**：

```
<xsl:apply-templates mode="copy-no-ns" select="node()"/> 
```

**完整的转换变为**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template name = "testTemplate" match="/*[local-name()='response']/*">
      <xsl:apply-templates mode="copy-no-ns" select="node()"/>
 </xsl:template>

    <!-- Selectively mass copy some of the nodes without namespaces -->
 <xsl:template mode="copy-no-ns" match="*">
   <xsl:element name="{name(.)}" namespace="{namespace-uri(.)}">
     <xsl:copy-of select="@*"/>
     <xsl:apply-templates mode="copy-no-ns" select="node()"/>
   </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（上图）时，会产生所需的结果**：

```
<response>
   <Contact>
      <Name>John Doe</Name>
      <Age>48</Age>
      <DOB>
         <Day>12</Day>
         <Month>6</Month>
         <Year>1964</Year>
      </DOB>
      <Contacts>
         <Contact>
            <Name>Jane Walsh</Name>
            <Age>30</Age>
            <DOB>
               <Day>24</Day>
               <Month>3</Month>
               <Year>1983</Year>
            </DOB>
         </Contact>
         <Contact>
            <Name>Rob Marsh</Name>
            <Age>55</Age>
            <DOB>
               <Day>1</Day>
               <Month>Feb</Month>
               <Year>1958</Year>
            </DOB>
         </Contact>
      </Contacts>
   </Contact>
</response> 
```

**请注意**：

此转换假定元素没有属性。如果这个假设不成立，那么转换会在任何具有属性的 XML 文档上产生错误的结果。可以提供正确且更通用的转换，但我相信这就是您所要求的。

# mysql - 如何在单个查询的单行中显示单个字段的多个值？

> ID：15645787
> 
> 赞同：1
> 
> 时间：2013-03-24T13:18:20.950
> 
> 标签：mysql, subquery, union

```
Table 1:Domain Link Result
======================================================================
||Column1(words)     ||Column2(links)    ||Column3(frequency)       ||
======================================================================
    1                   1                   Any Number
    2                   1                   Any Number
    3                   1                   Any Number
    4                   1                   Any Number
    1                   2                   Any Number
    2                   2                   Any Number
    3                   2                   Any Number
    4                   2                   Any Number

Table 2:Sub Link Result
======================================================================
||Column1(words)     ||Column2(sublinks)    ||Column3(frequency)    ||
======================================================================
    1                   a                   Any Number
    2                   b                   Any Number
    3                   c                   Any Number
    4                   d                   Any Number
    1                   e                   Any Number
    2                   f                   Any Number
    3                   g                   Any Number
    4                   h                   Any Number

And so on. 
```

在上述场景中，用户输入了 4 个单词和 2 个域链接。现在，在域链接和子链接上计算 4 个关键字的频率，并存储在单独的表中，如上所示。我想要一个如下的汇总结果：

```
Table 3:Final Result
==================================================================================
||Column1(words)     ||Column2(Domain links)    ||Column3(Total frequency)      ||
==================================================================================
Row1:    1              1                    Total of frequency in both tables
                        2                    for word "1"   
----------------------------------------------------------------------------------
Row2:    2              1                    Total of frequency in both tables
                        2                    for word "2"   
----------------------------------------------------------------------------------
Row3:    3              1                    Total of frequency in both tables
                        2                    for word "3"   
----------------------------------------------------------------------------------
Row4:    4              1                    Total of frequency in both tables
                        2                    for word "4"   
---------------------------------------------------------------------------------- 
```

我在 MySQL 中尝试了以下查询：

```
SELECT t.`keyword`, t.`link` SUM( t.`frequency` ) AS total
FROM (

SELECT `frequency`
FROM `domain_link_result`
WHERE `keyword` = 'national'
UNION ALL
SELECT `frequency`
FROM `sub_link_result`
WHERE `keyword` = 'national'
)t GROUP BY `keyword` 
```

但在最终结果的第 2 列中，我只得到第一个链接，而不是第 1 行的两个链接。如何获得两个链接或用户在一行中输入的任意数量的链接？

单词和链接具有`VARCHAR`类型，频率具有`INT`类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:46:38.303

如果您想将多行合并为一行并且仍然能够看到信息，则必须使用`GROUP_CONCAT`

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

这将输出以逗号分隔的折叠值，即：字符串。如果您需要单独的值，可以在您的编程语言中拆分此字符串。

您的查询看起来像这样

```
SELECT keyword, GROUP_CONCAT(links), SUM(frequency)

FROM (subquery)

GROUP BY keyword 
```

这将输出如下内容：

```
==================================================================================
||Column1(words)     ||Column2(Domain links)    ||Column3(Total frequency)      ||
==================================================================================
Row1:    1              1,2                     sum of freq.
----------------------------------------------------------------------------------
Row2:    2              1,2                     sum of freq.
----------------------------------------------------------------------------------
Row3:    3              1,2                     sum of freq.
----------------------------------------------------------------------------------
Row4:    4              1,2                     sum of freq. 
```

**编辑：为您的查询提供额外帮助**

您的查询对我来说有点令人困惑。尝试使用 JOIN 方法：

```
SELECT domain_link_results.word AS word,
       GROUP_CONCAT(domain_link_results.links) AS domain_links,
       domain_link_results.frequency + sub_link_results.frequency AS total_frequency

FROM domain_link_results

INNER JOIN sub_link_results
        ON domain_link_results.word = sub_link_results.word

WHERE domain_link_results.word = "national"

GROUP BY domain_link_results.word 
```

另一方面，最好将所有链接放在同一个表中，并使用一个额外的字段来确定它是域链接还是子链接。在不了解您的系统的情况下很难说。

# delphi - 二进制数的德尔福掩码

> ID：15645792
> 
> 赞同：2
> 
> 时间：2013-03-26T19:30:37.457
> 
> 标签：delphi, mask

我有 StringGrid 并且只想在其中包含单元格`1`或`0`. 我尝试使用 StringGridGetEditMask

```
procedure TForm1.StringGrid1GetEditMask(Sender: TObject; ACol,
  ARow: Integer; var Value: String);
begin
  Value := '0';
  if not (strToInt(Value) in [0,1]) then value := #0;
end; 
```

但是我可以输入从 0 到 9 的所有数字。如何过滤除 0 和 1 之外的所有数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:48:36.610

为了您的意图，您将需要对该类进行子[`TStringGrid`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Grids.TStringGrid)类化，并在此类子类中分配给就地编辑器的 eg[`OnKeyPress`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TWinControl.OnKeyPress)事件，如此插入器类中所示：

```
type
  TStringGrid = class(Grids.TStringGrid)
  private
    procedure InplaceEditKeyPress(Sender: TObject; var Key: Char);
  protected
    function CreateEditor: TInplaceEdit; override;
  end;

implementation

{ TStringGrid }

function TStringGrid.CreateEditor: TInplaceEdit;
begin
  Result := inherited CreateEditor;
  TMaskEdit(Result).OnKeyPress := InplaceEditKeyPress;
end;

procedure TStringGrid.InplaceEditKeyPress(Sender: TObject; var Key: Char);
begin
  if not (Key in [#8, '0', '1']) then
    Key := #0;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:34:44.740

你误解了这个[`OnGetEditMask`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Grids.TCustomDrawGrid.OnGetEditMask)事件。`Value`不是允许您更改的新字符串，而是您应该给控件一个*mask*的地方。然而，不幸的是，[编辑掩码](http://docwiki.embarcadero.com/Libraries/XE2/en/System.MaskUtils.TEditMask)不允许您请求的功能。

# layout - Joomla 3.0：我可以更改显示联系信息的顺序吗

> ID：15645793
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:30:37.733
> 
> 标签：layout, joomla, contact

**默认情况下是：**

> 街道和门牌号
> 
> 城市
> 
> 地区
> 
> 邮政编码
> 
> 国家
> 
> ETC

**但我希望能够将此顺序更改为**：

> 街道和门牌号
> 
> 邮政编码
> 
> 城市
> 
> 地区
> 
> 国家
> 
> ETC

我想这样做而不必安装额外的扩展。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T19:55:20.453

您可以使用模板覆盖来更改它。请参阅[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)了解覆盖的工作原理。

有问题的文件`/components/com_contact/views/contact/tmpl/default_address.php`意味着您必须创建一个文件`/templates/yourtemplate/html/com_contact/contact/default_address.php`，在其中进行所需的更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T19:59:00.523

实际上没有办法在不覆盖模板的情况下这样做。但是在 Joomla 中覆盖东西很容易。只需从

组件/com_contact/views/contact

至

模板/YOUR_TEMPLATE/html/com_contact/contact

因此，您可以根据需要编辑标记并更改顺序。

您可以在 JDocs 上找到有关覆盖的更多信息：[Joomla 文档：覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

# jetty - Jetty maven 插件无法热重新部署 shiro 过滤器

> ID：15645799
> 
> 赞同：2
> 
> 时间：2013-03-26T19:31:02.687
> 
> 标签：jetty, shiro

我不确定这是码头问题还是 shiro 问题，但我正在尝试使用 Jetty-Maven 插件进行开发，我想要的关键功能之一是 Jetty 在文件更改时的热重新部署。但是，当码头尝试重新加载应用程序时，Shiro 抛出了以下异常，我不确定可以做些什么来纠正这个问题。

```
[Scanner-0] ERROR org.apache.shiro.web.servlet.AbstractFilter - Unable to start Filter: [No WebEnvironment found: no EnvironmentLoaderListener registered?].
java.lang.IllegalStateException: No WebEnvironment found: no EnvironmentLoaderListener registered?
        at org.apache.shiro.web.util.WebUtils.getRequiredWebEnvironment(WebUtils.java:276)
        at org.apache.shiro.web.servlet.ShiroFilter.init(ShiroFilter.java:73)
        at org.apache.shiro.web.servlet.AbstractShiroFilter.onFilterConfigSet(AbstractShiroFilter.java:152)
        at org.apache.shiro.web.servlet.AbstractFilter.init(AbstractFilter.java:97)
        at org.eclipse.jetty.servlet.FilterHolder.doStart(FilterHolder.java:123)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:732)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:279)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1314)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:722)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:492)
        at org.eclipse.jetty.maven.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:275)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:69)
        at org.eclipse.jetty.maven.plugin.JettyRunMojo.restartWebApp(JettyRunMojo.java:527)
        at org.eclipse.jetty.maven.plugin.JettyRunMojo$1.filesChanged(JettyRunMojo.java:481)
        at org.eclipse.jetty.util.Scanner.reportBulkChanges(Scanner.java:676)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:539)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:391)
        at org.eclipse.jetty.util.Scanner$1.run(Scanner.java:329)
        at java.util.TimerThread.mainLoop(Timer.java:555)
        at java.util.TimerThread.run(Timer.java:505) 
```

我的 web.xml 如下所示：

```
<?xml version="1.0" ?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">  

<!-- SHIRO CONFIGURATION ============================================== -->

<listener>
  <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>

<filter>
  <filter-name>ShiroFilter</filter-name>
  <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>ShiroFilter</filter-name>
  <url-pattern>/*</url-pattern>
  <dispatcher>REQUEST</dispatcher>
  <dispatcher>FORWARD</dispatcher>
  <dispatcher>INCLUDE</dispatcher>
  <dispatcher>ERROR</dispatcher>
</filter-mapping>

<!-- DATA SOURCE ====================================================== -->

<resource-ref>
  <description>Account Data Source</description>
  <res-ref-name>jdbc/AccountDB</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
</resource-ref>

</web-app> 
```

最后，这是我的 maven pom 文件的相关部分：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.eclipse.jetty</groupId>
      <artifactId>jetty-maven-plugin</artifactId>
      <version>9.0.0.RC2</version>
      <configuration>
        <jettyXml>src/jetty/jetty.xml</jettyXml>
        <scanIntervalSeconds>1</scanIntervalSeconds>
        <webApp>
          <contextPath>/</contextPath>
          <overrideDescriptor>src/jetty/override-web.xml</overrideDescriptor>
        </webApp>
      </configuration>
      <dependencies>
        <dependency>
          <groupId>mysql</groupId>
          <artifactId>mysql-connector-java</artifactId>
          <version>5.1.24</version>
        </dependency>
      </dependencies>
    </plugin>
  </plugins> 
```

编辑：另一条相关信息。我正在 Eclipse 中编辑文件，并且正在使用 M2E Maven 集成 for Eclipse 插件。这可能与 eclipse 和/或这个插件如何重新编译文件有关。

# php - jQuery 在 Chrome 和 IE 中不起作用

> ID：15645800
> 
> 赞同：0
> 
> 时间：2013-03-26T19:31:06.713
> 
> 标签：php, javascript, jquery

我正在开发一个 Wordpress 主题。在标题上，我检查这是否是第一次访问（用户刚刚进入网站）。

如果这是第一次访问，则会出现动画。动画 = 侧边栏出现在页面中间，几毫秒后打开并出现页面。在代码中，ub_sb_closed_on_hp 是一个选项，它只设置侧边栏以显示在主页上。

它可以在 Mozilla 下运行，但不能在 Internet Explorer 和 Chrome 下运行。在 IE 和 Chrome 上，动画出现在所有页面上。

请参阅此处的代码：http: [//paste.laravel.com/lFt](http://paste.laravel.com/lFt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:27:42.170

源代码很好。现在问题已解决。

问题是我注释了一行插入图像的代码。这个 wordpress 主题以一种奇怪的方式开发（如果有兴趣，请搜索 Empire）。

谢谢大家的建议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:12:36.480

尝试以下更改：

```
 if ($_SESSION['first_time_here'] == ''):

            //SET PAGE TO CLOSED FOR OPENING
            if (get_option('ub_sb_closed_on_hp') != 'yes'){                     
//              print " 
?>
                if (jQuery(window).width() > 980){              
                    jQuery('#page').css({'display':'inline','width':'300px','overflow':'hidden','margin-right':'340px'});
                    jQuery('#sidebar').css({'margin-left':'326px'});
                }
//              ";
    <?php
            }
        ?> 
```

并且：

```
 if (get_option('ub_sb_closed_on_hp') != 'yes'){                     
                    ?>
//                      print "
                        if (jQuery(window).width() > 980){                                      
                            jQuery('#sidebar').delay(800).animate({'margin-left':'0px'},2100);      
                            jQuery('#page').delay(800).animate({'margin-right':'0px','width':'666px'},2100);                
                        }                                               
//                      ";
<?php
                    }
                    ?> 
```

编辑 1：我看不到你在哪里初始化`$_SESSION['first_time_here']`. 如果您没有初始化它，您可以尝试以下更改

寻找：`if($_SESSION['first_time_here'] == ''):`

代替：`if (!isset($_SESSION['first_time_here'])):`

# php - 在 if/else 中使用 in_array 和日期的问题

> ID：15645808
> 
> 赞同：2
> 
> 时间：2013-03-26T19:31:24.813
> 
> 标签：php, arrays, date

我正在试验 PHP 的[date](http://php.net/manual/en/function.date.php)和[in_array](http://www.php.net/manual/en/function.in-array.php)函数。

根据我在手册中阅读的内容，我无法理解为什么我的代码会返回 if 语句的 else 部分。如果**date('D')**返回**Tue**为什么不运行 if 部分？

```
<?php

date_default_timezone_set('UTC');

$weekdays = array("Mon", "Tue", "Wed", "Thur", "Fri", "Sat", "Sun");

$today = date('D');

if(in_array("Mon", "Tue", "Wed", "Thur", "Fri", $weekdays) == $today)
   {
         echo "It's" . " ";
         echo $today;
         echo " " . "Get out of bed and go to work";
    }else{
         echo "Do whatever you want becuase it's" . " ";
         echo $today;
};
?> 
```

我尝试了各种方法并将**if**部分更改为此，但无济于事。

```
if(in_array(array("Mon", "Tue", "Wed", "Thur", "Fri"), $weekdays) == $today) 
```

有人能告诉我语法有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:34:31.687

```
if(in_array($today, $weekdays))
   {
         echo "It's" . " ";
         echo $today;
         echo " " . "Get out of bed and go to work";
    }else{
         echo "Do whatever you want becuase it's" . " ";
         echo $current_day;
}; 
```

[in_array](http://php.net/manual/en/function.in-array.php)手册

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:35:38.243

该`in_array`函数[检查数组中是否存在值，返回 true 或 false](http://php.net/manual/en/function.in-array.php)。

如果您想知道是否`$today`是工作日，您需要执行以下操作：

```
$weekdays = array("Mon", "Tue", "Wed", "Thur", "Fri");
if(in_array($today, $weekdays)) {
   ...
} 
```

# php - 更新表中的多个字段

> ID：15645810
> 
> 赞同：1
> 
> 时间：2013-03-26T19:31:27.020
> 
> 标签：php, mysql

我的问题是我应该做什么而不是我应该做什么。

我正在开发一些在线问卷，其中包含许多问题，因此每个问卷中都有许多答案。

人们可以在某个日期之前返回问卷调查，因此需要一次插入和多次更新。

人们通常会检查从表中读取数据时的答案是否已更改，并且仅更新更改或仅替换问题表中表示的表中的所有数据。例如，如果有人在访问时只选择单选按钮 1 而不是 2，那么我是否必须更新所有字段。

谢谢你能给我的任何帮助。

贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:38:04.527

不，您可以一次更新一列（字段）。例如，使用 PDO 准备好的语句，

```
$dbh = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

$sql = "UPDATE survey_22 SET question_43=? WHERE user_id=?";

$stmt = $dbh->prepare($sql);
$stmt->execute(array($new_answer, $user_id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:45:18.443

在我看来，您可以更新所有字段，因为这不会花费太多时间。您将在不更新不需要更新的字段上保存的内容，您将在确定它们时松懈。

当然，一些基准测试很少，但我个人会更新所有基准，这就是我一直在做的事情。您可以将其命名为“惰性”，但另一个优点是代码更简单。

# c# - 我可以使用 varbinary 类型将图像存储在 SQL Server 数据库中吗？

> ID：15645812
> 
> 赞同：5
> 
> 时间：2013-03-26T19:31:27.420
> 
> 标签：c#, asp.net, sql, sql-server, asp.net-mvc

我正在尝试将图像存储在我的 SQL Server 数据库中，我应该使用什么数据类型？

在下面`code aspx.cs`，我试图从请求输入流中读取所有字节并将其存储在数据库中，但`byte[]`数组未在表中正确更新。我错过了什么吗？

```
protected void Page_Load(object sender, EventArgs e)
{
        Request.InputStream.Position = 0;

        byte[] Contents = new byte[Request.InputStream.Length];

        Request.InputStream.Read(Contents, 0, (int)Request.InputStream.Length);

        con.Open();

        try
        {
            string query = "update tblImageUpload set " + IMAGE_ID + " = @imageBytes where Image_ID='" + CID + "'";

            int i = 0;

            using (cmd = new SqlCommand(query, con))
            {
                cmd.Parameters.Add("@imageBytes", SqlDbType.VarBinary, Contents.Length).Value = Contents;

                 i = cmd.ExecuteNonQuery();
            }

            Response.Write("Upload Query = " + query);
            Response.Write("Upload Code = " + i);
        } catch (Exception ex) {
            Response.Write("Upload Code=" + ex);
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T19:35:52.363

您可以使用`VARBINARY`是。您可能最好将`VARBINARY(MAX)`它们存储起来。

你可以像这样使用它：

```
cmd.Parameters.Add("@imageBytes", SqlDbType.VarBinaryMax);
cmd.Parameters["@imageBytes"].Value = Contents; 
```

# c# - 返回视图时如何刷新我的页面

> ID：15645813
> 
> 赞同：1
> 
> 时间：2013-03-26T19:31:30.537
> 
> 标签：c#, asp.net-mvc, reload

页面发生更改后，我将重定向到页面。但是，我只能在实际重新加载整个页面后才能看到更改。

我像这样重定向到这个页面：

```
public ActionResult Details(string id)
{
    return View(Function(id));
} 
```

我可以在我的参数中添加一些可以刷新页面的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:12:49.993

好的，这是人们在处理 ASP.NET MVC 时常犯的错误。您不想返回**View**而只是想正确重定向。

```
public ActionResult Detail(string id) {
    // actual redirect
    return RedirectToAction("Function", new { id });
} 
```

这将确保您的控制器进行实际重定向，而不仅仅是显示视图。这也确保您的路线/网址是有效的。希望这可以帮助 ：）

# java - 我可以在没有请求的情况下将信息推送回 phonegap 吗？

> ID：15645818
> 
> 赞同：0
> 
> 时间：2013-03-26T19:31:42.787
> 
> 标签：java, javascript, android, cordova, io

我正在尝试开发一个具有广播接收器的应用程序。当我接到电话时，我希望能够将号码传回我的 phonegap 应用程序。我是一名网络开发人员，我知道网络的本质是拉动，而不是推动（缺乏 I/O），但由于它仍然在 Java 应用程序中，有没有办法可以将这些值传递回我的 phonegap 应用程序和将其附加到列表中？

```
 if (messages.length > -1) {
                        int duration = Toast.LENGTH_SHORT;
                        Toast toast = Toast.makeText(context, "Message recieved: " + messages[0].getOriginatingAddress(), duration);
                        toast.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:10:22.040

我不确定您是否正在寻找[Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)在网络中将消息推送到手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:34:10.847

要将数据推送到`WebView`您需要使用（PhoneGap的实现）的`sendJavaScript`功能，或使用的功能。`CordoveWebView``WebView``loadUrl``WebView`

使用`CordovaWebView`方式：

```
mCordovaWebView.sendJavaScript("pushDataFunc('data')"); 
```

使用`WebView`方式：

```
mWebView.loadUrl("javascript:pushDataFunc('data')"); 
```

如果您正在扩展，`DroidGap`您可以在活动本身上调用该函数：

```
YourDroidGapActivity.this.sendJavaScript("pushDataFunc('data')"); 
```

# python - 正确生成和关闭文件对象

> ID：15645819
> 
> 赞同：3
> 
> 时间：2013-03-26T19:31:43.363
> 
> 标签：python, python-2.7

我有以下课程：

```
class JsonIterator(object):
    def __init__(self,folder):
        self.root = os.path.join(os.getcwd(), folder)
        self.fis = [fi for fi in os.listdir(folder) if "lyrics" in fi]

    def __iter__(self):
        i = 0
        with open(os.path.join(self.root,self.fis[i])) as f:
            yield json.load(f)
        i += 1 
```

它没有按照我想要的方式工作——它似乎没有超出第一个文件。我试过了

```
def __iter__(self):
    i = 0
    f = open(os.path.join(self.root, self.fis[i]))
    js = json.load(f)
    f.close()
    yield js
    i += 1 
```

但无论哪种方式，`len(list(JsonIterator("path/to/myfolder")))`都给了我`1`，而且我知道文件夹中有多个文件。当然，另一种选择是

```
def __iter__(self):
    i = 0
    yield json.load(open(os.path.join(self.root, self.fis[i])))
    i += 1 
```

但是所有那些悬空的打开文件都占用了太多内存，我的进程被杀死了。

所以我该怎么做？我想过写一些装饰器，但我真的不明白它们是如何工作的，或者即使它可以解决我的问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:34:08.107

您需要遍历以下文件名`self.fis`：

```
class JsonIterator(object):
    def __init__(self,folder):
        self.root = os.path.join(os.getcwd(), folder)
        self.fis = [fi for fi in os.listdir(folder) if "lyrics" in fi]

    def __iter__(self):
        for fi in self.fis:
            with open(os.path.join(self.root, fi)) as f:
                obj = json.load(f)
            yield obj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:36:52.057

如其他答案中所述，您需要遍历`__iter__()`. 这是一个等效的替代方案，它使用生成器表达式来做同样的事情：

```
def __iter__(self):
    return (json.load(open(os.path.join(self.root, fi))) for fi in self.fis) 
```

假设您使用的是 CPython，[这些文件将在被垃圾收集时自动关闭。](https://stackoverflow.com/a/575320/505154)

# ios - iOS 上的 mmap 有时会返回 0xffffffff

> ID：15645825
> 
> 赞同：2
> 
> 时间：2013-03-26T19:32:17.827
> 
> 标签：ios, c, mmap

我尝试使用以下代码在 iOS 设备上使用 mmap

```
struct stat s;
    int status;
    size_t size;
    int fd;

    fd = open ([dataFile cStringUsingEncoding:NSUTF8StringEncoding], O_RDONLY);
    fcntl( fd, F_NOCACHE );
    status = fstat (fd, & s);
    if (status < 0)
    {
        // error handling
    }
    size = s.st_size;
    FuncFileLog(@"%@", @"before read");
    off_t offset = 0;
    char* data = (char *) mmap(NULL, size, PROT_READ, MAP_SHARED, fd, offset);

    char *pch;
    int lastPosInString = 0;

    pch=strchr(data,'\n');

long lineCounter = 0;

    while (pch != NULL)
    {
        size_t lineLength = 0;

        int posInString = pch - data + 1;
        lineLength = posInString - lastPosInString;

        char *out = calloc(lineLength, sizeof(char));

        memcpy(out, data + lastPosInString, lineLength);
        out[lineLength - 1] = '\0';

        if (lineCounter > 0)
        {
           // do something
        }

        lastPosInString = posInString;
        pch=strchr(pch+1,'\n');

        lineCounter = lineCounter + 1;
    }

    munmap((void *)data, size);
    close(fd); 
```

它可以工作，但有时当我读取大约 3.5 mb 的文件时，我会无缘无故地得到一个 EXC_BAD_ACCESS，因为我`0xffffffff`认为来自 mmap 的数据指针是一个错误。而且它似乎只发生在模拟器中。

我 `errno:12 Cannot allocate memory` 目前只能在模拟器中使用保护 malloc、保护边缘、涂鸦和僵尸

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:38:45.893

我建议阅读手册页`mmap`（打开 Terminal.app 并输入`man mmap`）

```
RETURN VALUES
     Upon successful completion, mmap() returns a pointer to the mapped region.  
     Otherwise, a value of MAP_FAILED is returned and errno is set to indicate 
     the error. 
```

还有一个部分描述了`errno`也可以设置的 's。

# java - 使用 htmlunit 和 javascript 登录

> ID：15645826
> 
> 赞同：0
> 
> 时间：2013-03-26T19:32:28.477
> 
> 标签：java, javascript, htmlunit

我有一个关于 htmlUnit 的快速问题，希望有人可以帮助我。如何登录本站[http://ld.opendata.cz:8897/sparql-auth](http://ld.opendata.cz:8897/sparql-auth) ?? 我对静态页面没有任何问题，但我不喜欢这里的 javascript 弹出窗口，该怎么办？我使用 Java HtmlUnit。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:28:14.063

这是“基本的 http 身份验证”机制（如果您不知道它是什么，请用谷歌搜索）。它不是 JavaScript。HtmlUnit 为它提供了一些东西，开始看这里：[http ://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/DefaultCredentialsProvider.html](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/DefaultCredentialsProvider.html)

# ruby-on-rails - google-api-client gem 错误 rails 3.0

> ID：15645833
> 
> 赞同：1
> 
> 时间：2013-03-26T19:32:49.397
> 
> 标签：ruby-on-rails, ruby, google-api-client

Rails 3.0、ruby 1.9.2、rbenv 和 Ubuntu 中的 google-api-client gem 存在问题。在本地环境中，它运行起来就像一个魅力，但是当我们使用 capistrano 部署到集成环境时，它在需要 google/api_client 时失败

在 GemFile 中，我们有：

```
gem 'google-api-client',      '~> 0.4.3', :require => 'google/api_client' 
```

在 GemFile.lock 中：

```
google-api-client (0.4.3)
  addressable (>= 2.2.3)
  autoparse (>= 0.3.1)
  extlib (>= 0.9.15)
  faraday (~> 0.7.0)
  launchy (>= 2.0.0)
  multi_json (>= 1.0.0)
  signet (>= 0.3.1) 
```

但是在命令行中：

```
gem which google-api-client
ERROR:  Can't find ruby library file or shared library google-api-client 
```

我们用 bundler 安装了 gem

错误的完整跟踪是：

```
no such file to load -- google/api_client
activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'

activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `block in require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:227:in `load_dependency'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'
  lib/snrengine/searcher/google_searcher.rb:1:in `<top (required)>'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `block in require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:227:in `load_dependency'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'
  lib/snr_engine.rb:5:in `<top (required)>'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `block in require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:227:in `load_dependency'
  activesupport (3.0.19) lib/active_support/dependencies.rb:242:in `require'
  activesupport (3.0.19) lib/active_support/dependencies.rb:350:in `require_or_load'
  activesupport (3.0.19) lib/active_support/dependencies.rb:491:in `load_missing_constant'
  activesupport (3.0.19) lib/active_support/dependencies.rb:183:in `block in const_missing'
  activesupport (3.0.19) lib/active_support/dependencies.rb:181:in `each'
  activesupport (3.0.19) lib/active_support/dependencies.rb:181:in `const_missing'
  activesupport (3.0.19) lib/active_support/dependencies.rb:503:in `load_missing_constant'
  activesupport (3.0.19) lib/active_support/dependencies.rb:183:in `block in const_missing'
  activesupport (3.0.19) lib/active_support/dependencies.rb:181:in `each'
  activesupport (3.0.19) lib/active_support/dependencies.rb:181:in `const_missing'
  app/models/social_network_recommender.rb:52:in `search_in_social_networks'
  app/controllers/company/searches_controller.rb:31:in `social_network_search'
  actionpack (3.0.19) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.0.19) lib/abstract_controller/base.rb:150:in `process_action'
  actionpack (3.0.19) lib/action_controller/metal/rendering.rb:11:in `process_action'
  actionpack (3.0.19) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.0.19) lib/active_support/callbacks.rb:461:in `_run__587315471593137746__process_action__3569589993426311357__callbacks'
  activesupport (3.0.19) lib/active_support/callbacks.rb:410:in `_run_process_action_callbacks'
  activesupport (3.0.19) lib/active_support/callbacks.rb:94:in `run_callbacks'
  actionpack (3.0.19) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.0.19) lib/action_controller/metal/rescue.rb:17:in `process_action'
  actionpack (3.0.19) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.0.19) lib/active_support/notifications.rb:52:in `block in instrument'
  activesupport (3.0.19) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
  activesupport (3.0.19) lib/active_support/notifications.rb:52:in `instrument'
  actionpack (3.0.19) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.0.19) lib/abstract_controller/base.rb:119:in `process'
  actionpack (3.0.19) lib/abstract_controller/rendering.rb:41:in `process'
  actionpack (3.0.19) lib/action_controller/metal.rb:138:in `dispatch'
  actionpack (3.0.19) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.0.19) lib/action_controller/metal.rb:178:in `block in action'
  actionpack (3.0.19) lib/action_dispatch/routing/route_set.rb:68:in `call'
  actionpack (3.0.19) lib/action_dispatch/routing/route_set.rb:68:in `dispatch'
  actionpack (3.0.19) lib/action_dispatch/routing/route_set.rb:33:in `call'
  rack-mount (0.6.14) lib/rack/mount/route_set.rb:148:in `block in call'
  routing-filter (0.2.3) lib/routing_filter/adapters/rails_3.rb:74:in `call'
  routing-filter (0.2.3) lib/routing_filter/adapters/rails_3.rb:74:in `recognize_with_filtering'
  rack-mount (0.6.14) lib/rack/mount/route_set.rb:139:in `call'
  actionpack (3.0.19) lib/action_dispatch/routing/route_set.rb:499:in `call'
  oa-core (0.3.0) lib/omniauth/strategy.rb:44:in `call!'
  oa-core (0.3.0) lib/omniauth/strategy.rb:30:in `call'
  oa-core (0.3.0) lib/omniauth/strategy.rb:44:in `call!'
  oa-core (0.3.0) lib/omniauth/strategy.rb:30:in `call'
  vendor/plugins/bacchanalytics/lib/bacchanalytics.rb:64:in `call'
  exception_notification (2.5.2) lib/exception_notifier.rb:25:in `call'
  warden (1.0.6) lib/warden/manager.rb:35:in `block in call'
  warden (1.0.6) lib/warden/manager.rb:34:in `catch'
  warden (1.0.6) lib/warden/manager.rb:34:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.6) lib/rack/methodoverride.rb:24:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/flash.rb:182:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/cookies.rb:302:in `call'
  activerecord (3.0.19) lib/active_record/query_cache.rb:32:in `block in call'
  activerecord (3.0.19) lib/active_record/connection_adapters/abstract/query_cache.rb:28:in `cache'
  activerecord (3.0.19) lib/active_record/query_cache.rb:12:in `cache'
  activerecord (3.0.19) lib/active_record/query_cache.rb:31:in `call'
  activerecord (3.0.19) lib/active_record/connection_adapters/abstract/connection_pool.rb:354:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/callbacks.rb:46:in `block in call'
  activesupport (3.0.19) lib/active_support/callbacks.rb:416:in `_run_call_callbacks'
  actionpack (3.0.19) lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.6) lib/rack/sendfile.rb:106:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  actionpack (3.0.19) lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
  railties (3.0.19) lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.6) lib/rack/runtime.rb:17:in `call'
  activesupport (3.0.19) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.6) lib/rack/lock.rb:13:in `block in call'
  <internal:prelude>:10:in `synchronize'
  rack (1.2.6) lib/rack/lock.rb:13:in `call'
  railties (3.0.19) lib/rails/application.rb:168:in `call'
  railties (3.0.19) lib/rails/application.rb:77:in `method_missing'
  unicorn (4.2.1) lib/unicorn/http_server.rb:530:in `process_client'
  unicorn (4.2.1) lib/unicorn/http_server.rb:604:in `worker_loop'
  unicorn (4.2.1) lib/unicorn/http_server.rb:487:in `spawn_missing_workers'
  unicorn (4.2.1) lib/unicorn/http_server.rb:498:in `maintain_worker_count'
  unicorn (4.2.1) lib/unicorn/http_server.rb:272:in `join'
  unicorn (4.2.1) bin/unicorn:121:in `<top (required)>'
  /home/jobssy-dev/app/shared/bundle/ruby/1.9.1/bin/unicorn:19:in `load'
  /home/jobssy-dev/app/shared/bundle/ruby/1.9.1/bin/unicorn:19:in `<main>' 
```

这似乎是一个依赖问题，但它没有意义，因为它在开发环境中运行

# mysql - 最佳实践：在mysql数据库中存储sql语句？

> ID：15645838
> 
> 赞同：0
> 
> 时间：2013-03-26T19:32:56.320
> 
> 标签：mysql

在现在的大多数免费网络游戏中，总有一些动作需要时间才能完成，例如必须等待 3 小时才能完成特定过程。我已经设法制作了一个带有 Endofprocess 字段的表，并且在与服务器的第一次交互中，满足时间或通过它的进程被执行。

问题是：当满足流程完成的时间时，我如何执行删除或插入之类的语句甚至多个语句。

我唯一想到的是创建另一个字段并存储将在任务完成时执行的语句。

```
 CREATE  TABLE `dbkorsanx`.`TBLPROCESSES` (
 `ID` INT NOT NULL AUTO_INCREMENT ,
 `PROCESS_ENDS_AT` DATETIME NULL ,
 `PROCESS_STATEMENT` TEXT NULL ,
  PRIMARY KEY (`ID`) ); 
```

有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:43:50.997

不要直接说出查询，而是将要更新的内容保存在数据库中。它可以是类型标志、user_id 或其他元数据。如果它的可变长度保存为一些json左右

我将有一个每 n 分钟执行一次的 cron 或一项服务。根据您的逻辑，服务/脚本可以运行所需的查询。

# linux - 在两个不同的文件中显示重复的行

> ID：15645847
> 
> 赞同：9
> 
> 时间：2013-03-26T19:33:24.103
> 
> 标签：linux, bash

我有两个文件，我想显示重复的行。我试过这个但它不起作用：

`cat id1.txt | while read id; do grep "$id" id2.txt; done`

我想知道是否还有其他方法可以显示文件中的重复行。我的两个文件都包含 id 列表。谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-26T19:37:43.433

文件是否排序？它们可以排序吗？

如果排序：

```
comm -12 id1.txt id2.txt 
```

如果未排序但使用`bash`4.x：

```
comm -12 <(sort id1.txt) <(sort id2.txt) 
```

如果您没有`bash`4.x 和['process substitution'](http://www.gnu.org/software/bash/manual/bash.html#Process-Substitution) ，则有使用临时文件的解决方案。

你也可以使用`grep -F`：

```
grep -F -f id1.txt id2.txt 
```

`id1.txt`这会查找出现在 中的单词`id2.txt`。这里唯一的问题是确保一个 ID`1`不匹配包含`1`某处的每个 ID。某些版本中可用的`-w`或选项将在此处起作用。`-x`[`grep`](http://www.gnu.org/software/grep/manual/grep.html#Matching-Control)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-26T19:38:31.357

如果通过检测重复项是指打印两个文件中都存在的行（或在一个文件中重复），则可以使用`uniq`：

```
$ cat file1 file2 | sort | uniq -d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T19:38:27.727

您可以改用该`comm`命令：

```
sort id1.txt > id1.txt.sorted
sort id2.txt > id2.txt.sorted
comm -12 id1.txt.sorted id2.txt.sorted 
```

如果您想在一个命令中执行此操作：

```
comm -12 <(sort id1.txt) <(sort id2.txt) 
```

参数`comm`：

*   该`-1`参数抑制第一个文件中唯一的行。
*   该`-2`参数抑制第二个文件中唯一的行。
*   如果你传递一个`-3`参数，它会抑制公共行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-10T14:00:55.290

使用 awk 将节省您的时间。

```
awk 'FNR==NR{lines[$0]=1;next} $0 in lines' id1.txt id2.txt

#explaination
FNR==NR #check whether the File NR equal to NR, 
#which will only be true for the first file
lines[$0]=1 #put the contents into a dictionary, 
#value is 1, key is the lines of the first file
next #do not do the next commands if FNR==NR
$0 in lines #check whether the line in the second file
# is in the dictionary
#if yes, will print the $0
#acturally, I omitted the {print},
#which is default to print by awk if condition is true 
```

# c++ - 为什么我编辑的 WtWithQt 示例会崩溃？

> ID：15645849
> 
> 赞同：0
> 
> 时间：2013-03-26T19:33:28.597
> 
> 标签：c++, qt, wt

我正在开发一个应用程序，使用 Qt 作为主逻辑，使用 Wt 作为用户界面。

但是我遇到了一个我无法解决的问题。我已将其应用于 wtwithqt 示例。

我只更改了“passGreet”函数以异步调用信号而不是直接调用。

~~应用程序此时崩溃。~~我真的不明白为什么。

**编辑**：实际上它在编辑 Wt 对象时确实崩溃了`"HelloApplication::doGreet(const QString& qname)"`

![在此处输入图像描述](../Images/619d433955a2782d1af6271774c5223a.png) 图片：[https ://dl.dropbox.com/u/90945130/crash.png](https://dl.dropbox.com/u/90945130/crash.png)

*可能与从 Qt 事件循环开始的动作起源有关？*

这是代码。

```
#include "HelloApplication.h"
#include "QtObject.h"

#include <QDebug>
#include <QThread>

QtObject::QtObject(HelloApplication *wt, QObject *parent)
  : QObject(parent),
    wt_(wt)
{}

void QtObject::passGreet(const QString& name)
{
    //Q_EMIT greet(name);
    QMetaObject::invokeMethod(this, "greet", Qt::QueuedConnection, Q_ARG(QString, name));
}

void QtObject::doGreet(const QString& name)
{
    wt_->doGreet(name);
} 
```

其余未更改的代码在这里： http: [//pastebin.com/fih6P2eH](http://pastebin.com/fih6P2eH)

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:38:33.470

您在这里展示的是一个 QThread，它更新了 Wt 小部件树，并且没有获取 WApplication::UpdateLock。除了确保您拥有对小部件树的独占访问权限外，更新锁还设置了一些线程本地存储，缺少 TLS (WApplication::instance()) 会导致您的应用程序崩溃。

所需的锁定机制可能很复杂——使用 WServer::post() 可以更容易地避免死锁。

# sql-server - 如何向视图添加列？

> ID：15645851
> 
> 赞同：1
> 
> 时间：2013-03-26T19:33:34.637
> 
> 标签：sql-server, view, sql-view

有没有办法在视图中添加新列并更新它们？

列不在任何表中；我想从表中选择几列，然后添加一些新列并更新它们。

我试图`ALTER VIEW`添加列，但它给了我一个错误：

> 无法更改“viewName”，因为它不是表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T19:37:16.197

请参阅[SQL Server`ALTER VIEW`](http://msdn.microsoft.com/en-us/library/ms173846.aspx)文档。

您不会将列添加到新视图中，只需将整个查询包含到您的视图中。

例如，如果我有：

```
CREATE VIEW MyView 
AS
SELECT UserID, UserName
FROM Users 
```

然后想添加`DateCreated`到我的选择列表中，我会写：

```
ALTER VIEW MyView 
AS
SELECT UserID, UserName, DateCreated
FROM Users 
```

或者，您也可以只`DROP`使用视图和`CREATE`新列。

# css - Foundation 4 Orbit 自定义过渡

> ID：15645854
> 
> 赞同：0
> 
> 时间：2013-03-26T19:33:36.743
> 
> 标签：css, zurb-foundation, easing, orbit

我正在尝试自定义 Foundation 4 Orbit 组件的过渡。我想改变 ease 属性，但我做不到。

在[文档](http://foundation.zurb.com/docs/components/orbit.html)中说：使用属性`orbit_transition_class`来指定我自己的类，如下所示：

```
.my-transition {
  -webkit-transition: all 2s ease-in-out;
  -moz-transition: all 2s ease-in-out;
  -ms-transition: all 2s ease-in-out;
  -o-transition: all 2s ease-in-out;
  transition: all 2s ease-in-out;
} 
```

这是我的标记：

```
<ul data-orbit data-options="orbit_transition_class:my-transition;"> 
```

我不知道我做错了什么，有人可以告诉我如何实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:18:04.157

文档说：

> 轨道选项此时只能在初始化时传入。

您需要像这样初始化轨道（以及 Foundation 的任何组件）：

```
$(document).foundation('orbit', {
    orbit_transition_class: 'my-transition'
});
$(document).foundation(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T20:15:49.950

我遇到了同样的问题，所以我查看了我的 Foundation 版本（4.3.2）中的 Orbit 源代码。事实证明该`orbit_transition_class`设置存在，但目前没有用于任何事情。

这要么是一个错误，要么他们仍在此设置中逐步淘汰/逐步淘汰。

您可以通过在文件中对“orbit_transition_class”进行文本搜索来检查您的版本是否正在使用它`js/foundation/foundation.orbit.js`。如果你只得到一个结果，在设置对象中，它可能是一个未使用的设置。

更新：我切换到 WooThemes FlexSlider 2，它似乎更灵活。

# java - 布尔值总是返回真

> ID：15645857
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:33:46.153
> 
> 标签：java, boolean

我目前正在学习Java。我正在制作一个程序来获取给定 URL 的 html 代码，然后将代码保存为 *.html。在代码的末尾，我试图打印一条关于文件是否已保存的消息。

我的问题是确定文件是否已保存的布尔值始终返回 true。

这是我的代码：

```
public class URLClient {
protected URLConnection connection;

public static void main(String[] args){
    URLClient client = new URLClient();
    Scanner input = new Scanner(System.in);
    String urlInput;
    String fileName;

    System.out.print("Please enter the URL of the web page you would like to download: ");
    urlInput = input.next();

    System.out.println("Save file As: ");
    fileName = input.next();

    String webPage = client.getDocumentAt(urlInput);
    System.out.println(webPage);
    writeToFile(webPage, fileName);

}

public String getDocumentAt (String urlString){
    StringBuffer document = new StringBuffer();

    try{
        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();
        BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));

        String line = null;
        while ((line = reader.readLine()) != null)
            document.append(line + "\n");
        reader.close();
    }catch (MalformedURLException e){
        System.out.println("Unable to connect to URL: " + urlString);
    }catch (IOException e){
        System.out.println("IOException when connectin to URL: " + urlString);
    }

    return document.toString();
}

public static void writeToFile(String content, String fileName){
    boolean saved = false;

    try{
        OutputStream outputStream = new FileOutputStream(new File(fileName));
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(outputStream));

        try{
            writer.write(content);
                   boolean saved = true;
        } finally {
            writer.close();
        }
    } catch (IOException e){
        System.out.println("Caught exception while processing file: " + e.getMessage());
    }

    if (saved)
        System.out.print("Successfully saved " + fileName + ".html");

} 
```

}

布尔值称为“已保存”，位于 writeToFile() 方法中。

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:36:47.850

```
try {
    writer.write(content);
    saved = true; // no need to initialize again
} finally {
    writer.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:38:00.370

那么您需要了解局部变量和全局变量的概念。您已经用相同的数据类型初始化了两次相同的变量名。我已经为您相应地更改了代码。

```
public static void writeToFile(String content, String fileName){
boolean saved = false;

try{
    OutputStream outputStream = new FileOutputStream(new File(fileName));
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(outputStream));

    try{
        writer.write(content);
        saved = true;
    } finally {
        writer.close();
    }
} catch (IOException e){
    System.out.println("Caught exception while processing file: " + e.getMessage());
}
if (saved)
    System.out.print("Successfully saved " + fileName + ".html");
} 
```

# php - 带有 foreach 循环问题的 HTML 行

> ID：15645867
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:34:13.970
> 
> 标签：php, html, foreach, tablerow

我有一个主 foreach 循环，然后是用于显示层级和价格的 foreach 循环。所以下面是我所看到的，但它没有奏效......我最终得到了我想要的术语旁边的等级，但价格最终低于术语，而不是在等级旁边。

```
+----------+--------------------+----------------+
|          |       tier1        |   price1       |
|          +--------------------+----------------+
|   term1  |       tier2        |   price2       |
|          +--------------------+----------------+
|          |       tier3        |   price3       |
+----------+--------------------+----------------+
|          |                    |                |
|          +--------------------+----------------+
|   term2  |                    |                | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:40:09.437

保存元素的数量并将其放在**rowspan**属性上：

```
<td rowspan="<?php echo $elements; ?>">
     term1
</td> 
```

您可以在此处找到 rowspan 属性的一个很好的示例：[http ://www.angelfire.com/fl5/html-tutorial/tables/tr_code.htm](http://www.angelfire.com/fl5/html-tutorial/tables/tr_code.htm)

# svn - 用于切换目录的 svn 工作副本中的符号链接

> ID：15645869
> 
> 赞同：0
> 
> 时间：2013-03-26T19:34:23.030
> 
> 标签：svn, switch-statement, symlink, working-copy

我在一个存储库中处理多个 (2-20) 个非共享祖先项目，这些项目共享存储在存储库中的 GB 二进制数据的公共资源，仅存储在一个地方。这些项目利用`svn switch`将其适当的文件夹映射到共享二进制数据的单个 svn URL。

当检出多个副本时，我想在我的工作副本中执行相同的操作，从而避免重新下载我已经拥有的相同 GB 的二进制数据。

（注意：另一个坏消息是项目还使用 svn 1.7 可执行文件来修改自己。）

# 我做了什么

我所做的是检查*项目 A*，执行 switch -es; 然后检查*项目 B*，而不是常规开关， do ，所以*项目 B*`svn switch --set-depth=empty --ignore-ancestry http://foobar`的这个工作副本知道它应该指向哪里。然后，我做了和。(1)*`mv foobar old_foobar``mklink /D foobar ../project_A/foobar`*

 *# 现在的问题

现在的问题是，如果我`svn status`在 wc 中使用符号链接进行操作，它会将“foobar”中的所有文件列为非版本化（作为`?`状态）。

我也使用 TortoiseSVN，它将图标覆盖显示为黄色三角形“！” （意思可能是冲突的？），但我在“foobar”中没有实际冲突（也没有树冲突）`svn status`，如果我`svn up`在“foobar”中这样做，它表示它是最新的。

# 约束

二进制文件容器不会经常更改，即使更改，更改通常也是向后兼容的。因此，工作副本对其中的文件版本有错误的想法不是问题（至少对我而言）。

我不应该*更改*项目或回购结构，因为我不允许“正式”这样做。

**我使用 svn 1.7**，因为这些项目实际上使用了一个自包含的 svn 可执行二进制文件来自己工作，如果可能的话，我想坚持下去。

# 问题

有没有办法利用符号链接（或其他任何东西）来避免在我的硬盘上复制相同 GB 的数据？（如果可能，也避免下载它。）

* * *

(1)：我在 Windows 上；为方便起见，假设*在我的文件系统中*，文件夹“project_B”和“project_A”是邻居，即。共享一个共同的祖先，并且该文件夹 foobar 在两个项目中都是顶级的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T06:13:06.730

我们有一种情况，多个项目可能相互嵌套。

我们使用的解决方案可能对您很有效；

1.  对于一个项目，照常将其从存储库中检出。
2.  为将包含数据的路径创建一个`svn:ignore`条目，并确保不跟踪该路径。
3.  查看该路径的数据。
4.  对于其他项目，请执行第 1 步和第 2 步，但要创建符号链接。

现在你所有的项目都会忽略那些额外的文件，但你仍然可以通过 svn 管理数据。

是的，这意味着您需要记住`svn update && svn update data/`确保您的项目完全是最新的，但这并不麻烦。*

# ruby - ruby 中的 {} 中是否有 += 如果不是零的快捷方式

> ID：15645873
> 
> 赞同：0
> 
> 时间：2013-03-26T19:34:33.113
> 
> 标签：ruby, syntactic-sugar

ruby 中是否有任何快捷方式（语法糖）功能可以做到这一点？

```
# x[5] += 3 that zeroes first if x[5] does not exists

x = {}
x.key? 5 ? x[5] = 3 : x[5] += 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:35:37.220

试试这个尺寸：

```
x = Hash.new(0)
x[5] += 3
puts x[5] => 3

x[5] += 3
puts x[5] => 6 
```

使用 Hash.new(a_value) 将使哈希在不存在键时返回该值：http: [//apidock.com/ruby/v1_9_3_392/Hash/new/class](http://apidock.com/ruby/v1_9_3_392/Hash/new/class)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T19:39:31.043

如果没有初始化，确实有一个用于初始化的简写符号。

```
x = {}
x[5] ||= 0 # x[5] is 0
x[5] += 3  # x[5] is 3
x[5] ||= 0 # x[5] is 3
x[5] += 3  # x[5] is 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:45:19.490

如果它只是整数，你可以这样做：

```
x[5] = x[5].to_i + 3 
```

你可以设置一个默认值：

```
x=Hash.new(0) 
```

您可能想要这样做，这是一个更全球化的解决方案

```
x[5] = (x[5] || 0) + 3 
```

# jquery - 将 Pinterest 按钮添加到 fancybox

> ID：15645875
> 
> 赞同：2
> 
> 时间：2013-03-26T19:34:39.937
> 
> 标签：jquery, fancybox

我已经为我网站上的图片库安装了 fancybox，我即将添加社交媒体按钮（twitter 和 facebook）的功能，如下所述[http://jsfiddle.net/G5TC3/](http://jsfiddle.net/G5TC3/)

```
$(".fancybox")
.attr('rel', 'gallery')
.fancybox({
    beforeShow: function () {
        if (this.title) {
            // New line
            this.title += '<br />';

            // Add tweet button
            this.title += '<a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="' + this.href + '">Tweet</a> ';

            // Add FaceBook like button
            this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>';
        }
    },
    afterShow: function() {
        // Render tweet button
        twttr.widgets.load();
    },
    helpers : {
        title : {
            type: 'inside'
        }
    }  
}); 
```

我还想为 pinterest 添加一个“固定”按钮 - 有没有办法扩展这个脚本以包含 pinterest？

谢谢

乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:08:14.533

这可能对您有帮助：http: [//jsfiddle.net/BK6h4/](http://jsfiddle.net/BK6h4/)

不要忘记在页面标题中添加一个 Jquery（可能是 1.8.3）。

```
$(".fancy")
.attr('rel', 'gallery')
.fancybox({
    beforeShow: function () {
        if (this.title) {
            // New line
            this.title += '<br />';

            // Add tweet button
            this.title += '<a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="' + this.href + '">Tweet</a> ';

            // Add Pinterest button
            this.title += '<a href="//pinterest.com/pin/create/button/?url=pageUrl&media=imgUrl&description=myDescription" data-pin-config="above"  data-pin-do="buttonPin" data-url="' + this.href + '"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a> ';

            // Add FaceBook like button
            this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>';
        }
    },
    afterShow: function() {
        // Render tweet button
        twttr.widgets.load();
    },
    helpers : {
        title : {
        titlePosition       : 'inside',

        }
    }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T13:21:45.397

您快到了，您需要做的就是将 pin it 按钮添加到标题，就像您添加其他按钮一样。这里有如何做到这一点的完整大纲：http: [//scottgale.com/using-pinterest-with-fancybox/2012/08/15/](http://scottgale.com/using-pinterest-with-fancybox/2012/08/15/)

查看您的脚本，您需要做的就是将其添加到您在脚本中进行标题修改的位置：

```
//add pinterest button for title
this.title += '<a href="<a class="vglnk" title="Link added by VigLink" rel="nofollow" href="http://pinterest.com/pin/create/button/?url='+"><span>http</span><span>://</span><span>pinterest</span><span>.</span><span>com</span><span>/</span><span>pin</span><span>/</span><span>create</span><span>/</span><span>button</span><span>/?</span><span>url</span><span>='+</span></a>
    encodeURIComponent(document.location.href)+
    '&media=http%3A%2F%2Fwww.homesburlingtonvermont.com'+
    encodeURIComponent(this.href)+
    '&description=Pin from <a class="vglnk" title="Link added by VigLink" rel="nofollow" href="http://ScottGale.com"><span>ScottGale</span><span>.</span><span>com</span></a>" class="pin-it-button" count-layout="horizontal">'+
    '<img border="0" src="<a class="vglnk" title="Link added by VigLink" rel="nofollow" href="http://assets.pinterest.com/images/PinExt.png"><span>http</span><span>://</span><span>assets</span><span>.</span><span>pinterest</span><span>.</span><span>com</span><span>/</span><span>images</span><span>/</span><span>PinExt</span><span>.</span><span>png</span></a>" title="Pin It" /></a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:54:45.063

您的 Twitter 按钮对我来说是正确呈现的，但从您给定的来源来看，您似乎不必要地链接到 Twitter 的`widget.js`. 只需将以下内容添加到您的`<body>`.

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

至于 Pintrest，只需加载他们的脚本：

```
<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

建立链接有点困难。这是基本结构：

```
<a data-pin-config="above" href="//pinterest.com/pin/create/button/?url=pageUrl&media=imgUrl&description=myDescription" data-pin-do="buttonPin" >
  <img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" />
</a> 
```

因此，您可以`href`动态加载，也可以自己硬编码。

# sql - 仅将 TSV 文件中的某些列名读入 R

> ID：15645882
> 
> 赞同：1
> 
> 时间：2013-03-26T19:35:11.570
> 
> 标签：sql, r, header, tsv, read.table

我有一个非常大的 .TSV 文件，由于它的大小，我无法读入 R。

我只想按标题名称阅读选择列，例如。“健康”。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T19:39:47.923

看看`colClasses`read.table 的参数：

```
df <- read.table(header = TRUE, colClasses=c(NA, "NULL", NA), text = '
                 A B C
                 1 2 3
                 4 5 6')
df
#  A C
#1 1 3
#2 4 6 
```

**更新：**

要按名称选择，首先在标题中读取，然后为 colClasses 创建一个向量：

```
# read the header
header <- read.table(header = FALSE, nrow = 1, text = '
                 A B C
                 1 2 3
                 4 5 6')

# cols we want to select
take <- c('A', 'B')
# create vector for colClasses
takecols <- ifelse(t(header) %in% take, NA, 'NULL')

# read selected cols
df <- read.table(header = TRUE, colClasses=takecols, text = '
                 A B C
                 1 2 3
                 4 5 6') 
```

# mingw - 如何在 Code::Blocks 中使用 Direct2D 和 MinGW

> ID：15645884
> 
> 赞同：2
> 
> 时间：2013-03-26T19:35:26.443
> 
> 标签：mingw, direct2d

我认为 GDI 和 GDI+ 现在已经过时，所以我尝试使用 Direct2D。我有 TDM MinGW64 4.7 和 Code::Blocks 作为 IDE。它在包中有 Direct2D 标头——这很好，因为 WinAPI 的东西不能与 MinGW 一起使用。

我遇到的第一件事是缺少 HwndRenderTargetParameters 函数的标题。在 WinAPI 中查看它之后，我意识到它只是用简单的数据填充了一个结构。我可以手动做到这一点 - 我想。这样做并从 CreateHwndRenderTarget 得到一个分段错误，这是您需要使用该缺失函数的地方。难怪不见了……

我一整天都在互联网上搜索任何有帮助的东西，但是找不到任何与 MinGW 相关的东西——不管 Direct2D 是什么。所以问题是：在这个世界上，除了基本的“Hello world！”之外，还有没有人能够做出任何东西？与 MinGW 的应用程序？我不这么认为，因为整个互联网上没有任何使用 MinGW 的源代码或教程。

请证明我错了！

严重地。向我展示一个非常基本的 Direct2D 示例，它将为我在 Code::Blocks 中使用 MinGW 进行编译。例如，它在窗口上画一条线。

# mysql - 用于数据传输的 SQL 与 XML

> ID：15645886
> 
> 赞同：1
> 
> 时间：2013-03-26T19:35:30.337
> 
> 标签：mysql, xml, data-transfer

我是 Web 服务和 Web API 领域的新手。我注意到大多数公司都提供基于 XML 或 JSON 的连接，这些连接基本上从他们的数据库中获取数据并将其编码为他们选择的格式。我的问题是，为什么我没有看到有人提供某种 SQL 连接？

一开始我以为是安全。但是使用 MySQL，您可以将用户访问权限一直限制到特定列。您可以允许他们仅查看或仅插入。您可以创建视图和存储过程来执行连接或掩盖您真正的后端结构。您可以使用 ssl 连接对传输的数据进行正确编码。所以我真的认为唯一的区别是风格。在我看来人们宁愿让我写

```
$conn->getWidgetAttr('widgetName'); 
```

而不是

```
SELECT widgetName FROM widgets; 
```

有人可以告诉我我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:49:18.487

1.  配置复杂性。对于所有可能的用例，很难为所有用户配置权限。
2.  安全。暴露数据库连接和查询是不安全的，并且提供了 sql 注入/漏洞攻击的广泛可能性。
3.  合同稳定性。隐藏有关如何存储在数据库中的项目的实现细节允许您在不破坏现有客户端的情况下更改底层存储。例如，在某一时刻，您可能决定将 sql server 替换为 mongodb。
4.  防火墙问题。Http 连接广泛可用，端口 80 对大多数使用 web api 的操作都是开放的，而暴露 sql server 端口（默认 1433）可能会增加额外的部署成本。

# html - HTML5 离线存储不工作

> ID：15645900
> 
> 赞同：0
> 
> 时间：2013-03-26T19:36:29.133
> 
> 标签：html, local-storage, offline-caching

这是 W3C 示例为离线 Web 存储提供的代码：http: [//www.w3.org/TR/offline-webapps/](http://www.w3.org/TR/offline-webapps/)

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" charset="utf-8">
        function renderNote(row) {
          console.log(row);
        }
        function reportError(source, message) {
          console.log("err");
        }

        function renderNotes() {
          db.transaction(function(tx) {
            tx.executeSql('CREATE TABLE IF NOT EXISTS Notes(title TEXT, body TEXT)', 
              []);
            tx.executeSql('SELECT * FROM Notes', [], function(tx, rs) {
              for(var i = 0; i < rs.rows.length; i++) {
                renderNote(rs.rows[i]);
              }
            });
          });
        }

        function insertNote(title, text) {
          db.transaction(function(tx) {
            tx.executeSql('INSERT INTO Notes VALUES(?, ?)', [ title, text ],
              function(tx, rs) {
                // …
              },
              function(tx, error) {
                reportError('sql', error.message);
              });
          });
        }
    </script>
  </head>
  <body>
  </body>
</html> 
```

根本没有控制台日志输出。有什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:43:59.233

缺少数据库的实例化和函数的执行。

检查这个 JSfiddle：http: [//jsfiddle.net/Ax5d7/4/](http://jsfiddle.net/Ax5d7/4/)

**JavaScript**

```
var db = openDatabase("notes", "", "The Example Notes App!", 1048576);

function renderNote(row) {
    console.log(row);
}

function reportError(source, message) {
    console.log("err");
}

function renderNotes() {
    db.transaction(function(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS Notes(title TEXT, body TEXT)', 
        []);

        tx.executeSql('SELECT * FROM Notes', [], function(tx, rs) {
            for(var i = 0; i < rs.rows.length; i++) {
                renderNote(rs.rows[i]);
            }
        });
    });
}

function insertNote(title, text) {
    db.transaction(function(tx) {
        tx.executeSql('INSERT INTO Notes VALUES(?, ?)', [ title, text ],
        function(tx, rs) {
            // …
        },
        function(tx, error) {
            reportError('sql', error.message);
        });
    });
}

renderNotes(); 
```

**更简单的**

```
var db = openDatabase("notes", "", "The Example Notes App!", 10000);

db.transaction(function(t) {
    //t.executeSql("DROP TABLE Notes");
    t.executeSql("CREATE TABLE IF NOT EXISTS Notes(title TEXT, body TEXT)");
    t.executeSql("INSERT INTO Notes VALUES(?, ?)", [ 'title', 'content' ]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:12:28.093

请注意，[http://www.w3.org/TR/webdatabase/](http://www.w3.org/TR/webdatabase/)不再维护，未来版本中可能会放弃支持。

[http://www.w3.org/TR/webstorage/#storage](http://www.w3.org/TR/webstorage/#storage)是要走的路……

有关浏览器支持表，请参见 caniuse.com。

# java - 为什么在实现优先级队列时使用堆而不是二叉树？

> ID：15645907
> 
> 赞同：7
> 
> 时间：2013-03-26T19:36:50.553
> 
> 标签：java, collections, queue, binary-tree

在我看来，堆优于二叉树的唯一优势是在 O(1) 的复杂度中找到堆中的最小项，而不是在二叉树中的 O(log(2)n)。

在实现优先级队列时，您需要从数据结构中删除每个最小的项目。从树中删除最小的项目，并且两个堆都以 O(log(2)n) 的复杂度完成。虽然从树中删除项目可能更复杂。删除没有子项的项目实际上非常简单。

我的问题是为什么在实现优先级队列时使用堆而不是二叉树（在这种情况下更简单）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T19:46:31.803

当二叉树收敛到一个数组时，二叉树的最坏情况复杂度将是 O(n)，而在堆中它仍然是 O(log(n))。您可以使用平衡二叉树，如红黑或 AVl，但它会变得更复杂，需要更多内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T19:58:42.110

堆通常比适当平衡的二叉树*更容易实现。*此外，它们需要更少的内存开销（元素可以直接存储在数组中，而无需分配树节点和指针等所有内容），可能更快的性能（主要是由于使用单个连续数组的内存局部性）......为什么你*不会*使用它们吗？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T11:18:46.107

您的首选应该取决于预期的访问模式，以及您可能存储的数据量：...

*   如果没有太多数据（例如，n 小于 30），那么未排序的数组就可以了；
*   如果你几乎从不添加、删除或更新，排序数组就可以了；
*   如果 n 小于 100 万，并且您只搜索顶部元素（排名第一或最后的元素），堆会做得很好（特别是如果您经常更新随机选择的元素，因为您在缓存的 LRU（最近最少使用）队列中执行，因为平均而言，这样的更新是 O(1)，而不是 O(log(n)))
*   如果 n 小于 100 万，并且您不确定要搜索什么，那么平衡树（例如，红黑或 AVL）就可以了；
*   如果 n 很大（比如 100 万以上），那么使用 b-tree 或 trie 可能会更好（一旦 n 足够大，平衡二叉树的性能往往会“跌落悬崖”：内存访问往往过于分散，缓存未命中真的开始受到伤害）

...但我建议您尽可能保持该选项处于打开状态，以便您可以对至少一个备选方案进行基准测试并切换到它，如果它表现更好的话。

在过去的 20 年里，我只在两个应用程序中工作过，堆是任何事物的最佳选择（一次用于 LRU，一次用于令人讨厌的运筹学应用程序，恢复随机扰动的 k 维超立方体的可加性，其中大多数超立方体中的细胞出现在 k 个不同的堆中，并且内存非常宝贵）。然而，在这两种情况下，它们的表现都比其他选择好得多：实际上比平衡树或 b 树快几十倍。

对于我在上一段中提到的超立方体问题，我的团队负责人认为红黑树的性能会比堆好，但基准测试表明红黑树的速度要慢得多（我记得，它们慢了大约 20 倍） )，虽然 b-trees 明显更快，但堆也轻松地击败了它们。

在我上面提到的两种情况下，堆的重要特征不是 O(1) 查找最小值，而是随机选择的元素的 O(1) 平均更新时间。

-James Barbetti（好吧，我以为我是。但验证码一直告诉我我不是人类）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T05:53:13.447

如果您经常使用查找或搜索操作，则首选平衡二叉树。由于这个原因，线段相交代码使用平衡树而不是堆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T19:40:07.537

首先有不同的二叉树（其中一些非常困难，其中一些只提供 average `O(log n)`），堆就是其中之一。

第二：虽然对大多数树的操作是`O(log n)`，但它们更复杂，有常数因子。

堆需要恒定的额外内存，而树通常需要在每个节点中存储指针。

顺便说一句，堆非常简单，只使用数组（我不确定它是否在 Java 中以这种方式实现，但我确实这么认为）

# javascript - javascript即时编辑html

> ID：15645910
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:37:00.543
> 
> 标签：javascript, sharepoint

我正在使用一个 Web 应用程序 (Sharepoint)，我需要对其进行一些调整。该应用程序本身非常强大，但某些领域有局限性。例如，在这种情况下，我试图为照片创建一个 onlick 事件。由于限制，我无法做到这一点。（如果您知道共享点，您就知道 wiki 页面限制）因此，我的目标是在页面（支持）上实际实现 javascript，该页面将定位图像并插入 onclick 事件。

我遇到的问题是我什至无法进行简单的搜索和替换工作。大多数示例似乎指的是文本节点，但我不熟悉该术语。

我正在寻找一些指导。谢谢！

* * *

（这不是答案，但评论太短了）我正在尝试解决几个问题。这是其中之一。我在一个站点中有一个文档库，它嵌入在另一个站点中。当用户单击文档时，它会在文档库的非常小的窗口中呈现文档。我想要完成的一件事是在 URL 中添加一个“target=_blank”以在一个全新的浏览器窗口中打开。不幸的是，这个文档列表是动态的，所以它必须在运行中完成。如前所述，第二个挑战是图像。在这种情况下，有一个很小的选择器箭头，可以将数据刷新到另一个 Web 部件中。虽然这可行，但单击图像会更方便。同样，内容是动态的，在这种情况下，我需要从箭头读取 URL，并动态将图像更改为可点击。这可能超出了我的能力范围，因为我不擅长 Web 开发实践。我更像是一个编译器类型的人。;) 我没有提供任何代码示例，因为我尝试过的一切都只是概念证明。我将通过一些建议再看一下。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:54:22.170

不确定您为什么要尝试使用 JavaScript 编辑 HTML 以添加事件处理程序。这通常不是您希望与 DOM 交互以添加事件处理程序的方式。

最简单的事情是使用jQuery并使用它与适当的选择器找到元素并添加事件处理程序。我以前在 SharePoint 项目上使用过这个，没有任何问题。

沿着这条线的东西将是一个开始的地方（尽管选择器会导致 DOM 中所有 img 标签的点击事件处理程序）。

$('img').click(function(){/*你的代码在这里点击*/});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:55:53.337

如果你想避免使用 jQuery，这样的事情可能会很好用：

```
function search(scope, tagName, attr, query) {
    tagName = scope.getElementsByTagName(tagName);
    var size = tagName.length;
    var results = new Array();
    for (var i = 0; i < size; i++) {
        if (tagName[i].getAttribute(attr) == query)
            results.push(tagName[i]);
    }
    return results;
}; 
```

上面的函数对传递给它的任何范围进行跨浏览器查询。因此，如果我们希望搜索文档中所有具有“可点击”类的图像，我们可以执行以下操作：

```
var images = search(document, 'img', 'className', 'Clickable');
for (var i = 0; i < images.length; i++) {
    images[i].onclick = onClickFunction; // onClickFunction being whatever you write.
} 
```

# symfony - 学说额外的延迟加载无法按预期使用计数

> ID：15645911
> 
> 赞同：8
> 
> 时间：2013-03-26T19:37:03.560
> 
> 标签：symfony, doctrine-orm, twig

我有一个实体`Shop`和一个相关实体`ShopProduct`，具有以下关系：

```
/**
 * @ORM\OneToMany(targetEntity="ShopProduct", mappedBy="shopid", fetch="EXTRA_LAZY")
 */
private $products; 
```

在树枝模板中，我想访问的**计数**，`products`所以我访问

```
{{ entity.getProducts().count }} 
```

但是当使用 symfony2 探查器查看查询的数量和内容时，我看到发出了一个完整的选择，而不是`COUNT`我所期望的（基于[文档](http://docs.doctrine-project.org/en/latest/tutorials/extra-lazy-associations.html)）。

为每个 s 发出完全选择会`Shop`导致 250Mb+ 的内存使用和 30+ 秒的页面加载时间，这是不希望的。

添加后，`fetch="EXTRA_LAZY"`我已经清除了学说缓存。

我是否忽略了某些东西，使用了错误的方法或误解了文档？

[编辑]

```
doctrine/annotations                v1.1
doctrine/cache                      v1.0
doctrine/collections                v1.1
doctrine/common                     2.4.0-RC1
doctrine/data-fixtures              dev-master eef10f6
doctrine/dbal                       2.3.3
doctrine/doctrine-bundle            v1.2.0-beta1
doctrine/doctrine-fixtures-bundle   dev-master 275540d
doctrine/doctrine-migrations-bundle dev-master 99c0192
doctrine/inflector                  v1.0
doctrine/lexer                      v1.0
doctrine/migrations                 dev-master e1f6efc
doctrine/orm                        2.3.3 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-14T20:22:23.773

刚遇到同样的问题，解决方法很简单：

`{{ value.getAlerts.count() }}`

代替

`{{ value.getAlerts.count }}`

Twig 必须使用`count()`它自己的实现的变体来覆盖旨在“额外延迟加载”的 Doctrine 方法，该变体只是愚蠢地获取所有实体来计算它们。

这将所有预期的 SELECT * 查询变成了 COUNT(*)...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T18:31:32.250

您没有使用树枝的计数功能，而是像这样的 php 内部功能。Twig 将一个一个地执行函数（首先调用 getProducts 导致所有产品的加载，然后 count ）。

```
{{ entity.getProducts().count }} 
```

getter 被自动调用，这意味着您可以只输出 entity.products 并使用 twigs 内部长度过滤器来计算结果……但结果是相同的（获取所有产品）。

```
{{ entity.products|length }} 
```

您真正需要的是一种设置 ShopRepository 提供的 Shop 实体计数的方法。

```
public function findAllAddCount()
{
    $qb = $this->createQueryBuilder('s');
    $query = $qb
        ->set('s.productCount', $qb->expr()->count('s.products'))
        ->getQuery()
   ;

   return $query->getResult();
} 
```

...并将其添加到您的实体中：

```
protected $productCount;

public function getProductCount()
{
   return $this->productCount;
}

public function setProductCount($count)
{
    $this->productCount = $count;

    return $this;
} 
```

然后像这样在树枝中输出产品数量：

```
{{ entity.productCount }} 
```

# vb.net - 如何以编程方式删除 Excel 工作表 VB.NET

> ID：15645912
> 
> 赞同：2
> 
> 时间：2013-03-26T19:37:10.487
> 
> 标签：vb.net, excel, worksheet

我尝试从 Excel 工作簿中永久删除工作表，但是它没有按预期工作，

```
CType(oWB1.Sheets("ABC"), Excel.Worksheet).Delete() 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T21:16:25.890

```
oWB1.Application.DisplayAlerts = False
oWB1.Sheets("ABC").Delete
oWB1.Application.DisplayAlerts = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T03:59:10.983

删除工作表“ABC”后还剩下多少工作表？

```
oWB1.Sheets("ABC").Delete() 
```

# javascript - 如何清除 safari 中的开发人员工具日志控制台？

> ID：15645913
> 
> 赞同：1
> 
> 时间：2013-03-26T19:37:10.813
> 
> 标签：javascript, safari, console

我在 IE、FF 和 Chrome 中成功使用了这段代码，但是 Safari 在 console.clear 上抛出了一个错误。有没有办法在 Safari 中做到这一点？

```
if (window.console && console.log)
{
    console.clear();
    console.log("console cleared");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:42:37.987

可悲的是，没有这样的事情。使用 ⌘+K “手动”清除它（或 console.log 一些换行符；）。）

# python - 此代码是否正确识别 python 字符串

> ID：15645914
> 
> 赞同：4
> 
> 时间：2013-03-26T19:37:13.667
> 
> 标签：python, string

我有一些我认为应该返回不在字符串中的python语句的所有部分的代码。但是，我不确定这是否像我想要的那样严格。基本上，它只是找到下一个字符串分隔符并保持“字符串”状态，直到它被相同的分隔符关闭。我为一些我没有想到的奇怪案例所做的事情有什么问题吗？它会以任何方式与 python 所做的不一致吗？

```
# String delimiters in order of precedence
string_delims = ["'''",'"""',"'",'"']

# Get non string parts of a statement
def get_non_string(text):

    out = ""
    state = None

    while True:

        # not in string
        if state == None:
            vals = [text.find(s) for s in string_delims]

            # None will only be reached if all are -1 (i.e. no substring)
            for val,delim in zip(vals+[None], string_delims+[None]):
                if val == None:
                    out += text
                    return out

                if val >= 0:
                    i = val
                    state = delim
                    break

            out += text[:i]
            text = text[i+len(delim):]

        else:
            i = text.find(state)
            if i < 0:
                raise SyntaxError("Symobolic Subsystem: EOL while scanning string literal")
            text = text[i+len(delim)]
            state = None 
```

示例输入：

```
get_non_string("hello'''everyone'''!' :)'''") 
```

示例输出：

```
hello! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:44:38.337

Python 可以标记 Python 代码：

```
import tokenize
import token
import io
import collections

class Token(collections.namedtuple('Token', 'num val start end line')):
    @property
    def name(self):
        return token.tok_name[self.num]

def get_non_string(text):
    result = []
    for tok in tokenize.generate_tokens(io.BytesIO(text).readline):
        tok = Token(*tok)
        # print(tok.name, tok.val)
        if tok.name != 'STRING':
            result.append(tok.val)
    return ''.join(result)    

print(get_non_string("hello'''everyone'''!' :)'''")) 
```

产量

```
hello! 
```

繁重的工作由[tokenize.generate_tokens](http://docs.python.org/2/library/tokenize.html#tokenize.generate_tokens)完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:55:09.257

您自己的代码在某些情况下存在问题，因为您似乎没有为转义引号（ , 等）做出任何`"\""`规定`"""\""""`。

还：

```
get_on_string('""') 
```

引发错误。

我不会将其描述为奇怪的情况。

# php - 从文件读取和重写更改数组中的字符串

> ID：15645917
> 
> 赞同：-1
> 
> 时间：2013-03-26T19:37:18.327
> 
> 标签：php, arrays, file

基本上我想做的是读取一个文件，然后用另一个字符串更改一个字符串，此时我已经写了这个：

```
$pap=file('../papier.js');
    $count=count($pap);
    for($i=0;$i<$count;$i++){
        if(strpos($pap[$i],"url: 'php/function.php'")){
            $url=dirname(dirname(curPageURL())).'/php/function.php';
            str_replace("url: 'php/function.php'",$url,$pap[$i]);
        }
    }

    $fs=fopen('../papier.js','w+');
    for($i=0;$i<$count;$i++)
        fwrite($fs,$pap[$i]);
    fclose($fs); 
```

它找到了正确的键，但我在文件中看不到任何更改...
这是应该更改的文件的一部分：

```
(function($){
$.fn.papier = function (book, params) {var id=$(this);var request= $.ajax({
        type: 'POST',
        url: 'php/function.php',
        data: {act:'getOpt',book: book},
        dataType : 'json',
        beforeSend: function(){
            id.append('<img id="papierloadinggifimage" src="css/images/loader.gif"/>');
        },
        success : function (opt) {
            if(opt[0]!=false){
                var request= $.ajax({
                type: 'POST',
                url: 'php/function.php',
                data: {act:'getbook',book: book}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:42:53.467

您正在执行“str_replace”，但您根本没有使用结果。

# python - 在 HTML 中显示 python 文件，保留空格等

> ID：15645919
> 
> 赞同：0
> 
> 时间：2013-03-26T19:37:23.510
> 
> 标签：python, html, css

我已经编写了一些我想在我的网站上显示的 python 代码，但显然，由于 HTML 无法识别回车并删除多余的间距，因此仅复制和粘贴文本就会使其几乎不可读。

有没有一种简单的方法可以在 HTML 中显示它，就好像它在文本编辑器或 IDE 中一样，而不是 CSSing 废话？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T19:39:00.357

`<pre>`或`<code>`...

[`<pre>`关于vs `<code>`vs的好讨论`<samp>`](https://stackoverflow.com/questions/4611591/code-vs-pre-vs-samp-for-inline-and-block-code-snippets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:40:00.357

您可能想要使用 CSS`white-space`属性，例如：

CSS：

```
div#python { white-space: pre; } 
```

HTML：

```
<div id="python">
    Python code
</div> 
```

对于如何处理空白也有[不同的选择。](http://www.w3.org/wiki/CSS/Properties/white-space)

这种方法的优点是将样式信息抽象到 CSS 中，这使得页面在将来需要编辑时更易于维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T19:39:00.983

您可以将其包装在“代码”标签中。

```
<code>this is my computer code</code> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:39:07.157

使用`<pre> </pre>`元素 - 它完全符合您的要求

信息：[http ://www.w3.org/wiki/HTML/Elements/pre](http://www.w3.org/wiki/HTML/Elements/pre)

# c# - LINQ to XML 查找出现后一个元素时出现的元素

> ID：15645922
> 
> 赞同：0
> 
> 时间：2013-03-26T19:37:44.000
> 
> 标签：c#, linq-to-xml

这是我正在处理的 XML：

![在此处输入图像描述](../Images/9315c451af557004bf10fbd4de7ae57c.png)

到目前为止我的代码：

```
XDocument doc = XDocument.Load(@"C:\Users\morganjo\Desktop\bb-tasks.xml");

        var q = from val in doc.Descendants("property")
                select (string)val.Attribute("value");

        foreach (string str in q)
        {
            Console.WriteLine(str);
        } 
```

这将为我提供元素值中所有数字的值。我遇到的问题是，**如果元素“名称”等于“周期”或“延迟”，我只需要该值。**由于这些发生在价值之后，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:41:01.203

属性顺序无关紧要。您可以使用它来获取它的值和过滤器元素：

```
var q = from val in doc.Descendants("property")
        where (string)val.Attribute("name") == "delay" || (string)val.Attribute("name") == "period"
        select (string)val.Attribute("value"); 
```

或者使用`let`关键字获取属性值，然后使用两次：

```
var q = from val in doc.Descendants("property")
        let name = (string)val.Attribute("name")
        where name == "delay" || value == "period"
        select (string)val.Attribute("value"); 
```

# java - 自定义 JComponent(s) 拒绝绘制（如果添加到 ArrayList）

> ID：15645923
> 
> 赞同：0
> 
> 时间：2013-03-26T19:37:47.280
> 
> 标签：java, swing, drawing, paint, jcomponent

这是应该绘制 JComponents 的表单中的相关代码 - 此代码创建 JComponent 并将其添加到表单中，并将其添加到 ArrayList 中，因为我需要稍后能够销毁组件。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JOptionPane;

public class frmMain extends javax.swing.JFrame implements ActionListener {
  ArrayList<Pocitadlo> poc;
  Random rnd;
  /**
   * Creates new form frmMain
   */
  public frmMain() {
    initComponents();

    poc = new ArrayList<Pocitadlo>();
    rnd = new Random();

//    Pocitadlo tmp = new Pocitadlo(100, 40, 40, getFont());
//    tmp.addActionListener(this);
//    this.add(tmp);
//    tmp.start();
  }

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    int val, x, y;

    val = 20;
    x = (this.getWidth() / 2) - 10 + rnd.nextInt(20);
    y = (this.getHeight() / 2) - 10 + rnd.nextInt(20);

    try{
      val = Integer.parseInt(txtCounterValue.getText());

      Pocitadlo tmp = new Pocitadlo(val, x, y, getFont());
      tmp.addActionListener(this);
      poc.add(tmp);
      tmp.setVisible(true);
      tmp.start();
      this.add(tmp);
      this.setTitle("Počet počítadiel: " + this.getComponentCount());
      repaint();
      tmp.repaint();
    } catch(Exception e){
      JOptionPane.showMessageDialog(this, "Nesprávne zadaná alebo prázdna hodnota počítadla. Hodnota musí byť     celé číslo.", "Chyba", JOptionPane.ERROR_MESSAGE);
    }
  }

  @Override
  public void actionPerformed(ActionEvent e){
    if(e.getActionCommand().equals("counterFinished")){
      Pocitadlo tmp = (Pocitadlo)e.getSource();

      poc.remove(tmp);
      this.setTitle("Počet počítadiel: " + poc.size());
      this.remove(tmp);
    }
  } 
```

这是我正在添加并天真地期望绘制的 JComponents 的代码：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JComponent;
import javax.swing.Timer;

public class Pocitadlo extends JComponent implements MouseListener, ActionListener {
  private int maxValue, value;
  private Boolean isRunning, isDisplayed;
  private Timer valueTimer, blinkTimer;
  private ActionListener actionListener;
  private Font font;

  public Pocitadlo(int timeout, int x, int y, Font f){
    isRunning = false;
    isDisplayed = true;
    maxValue = value = timeout;

    valueTimer = new Timer(1000, this);
    valueTimer.setActionCommand("valueTimer");

    blinkTimer = new Timer(200, this);
    blinkTimer.setActionCommand("blinkTimer");

    this.setBounds(x, y, 100, 50);
  }

  public void start(){
    isRunning = true;
    valueTimer.start();
  }

  public void stop(){
    isRunning = false;
    valueTimer.stop();
  }

  @Override
  public void actionPerformed(ActionEvent e){
    if(e.getActionCommand().equals("valueTimer")){
      value--;

      if(actionListener != null){
        repaint();
        actionListener.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, "counterTick"));
      }

      if(value == 0 && actionListener != null){
        isRunning = false;
        valueTimer.stop();
        actionListener.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, "counterFinished"));
      }
      if(value < maxValue / 2 && !blinkTimer.isRunning()) blinkTimer.start();
    }

    if(e.getActionCommand().equals("blinkTimer")){
      isDisplayed = !isDisplayed;
      repaint();
    }
  }

  public void addActionListener(ActionListener listener){
    actionListener = listener;
  }

  @Override
  public void mouseClicked(MouseEvent e) {
    value += 5000;
    if(value > maxValue) value = maxValue;
    repaint();
  }

  @Override
  public void paintComponent(Graphics g){
    g.setColor(Color.red);
    g.fillRect(getX(), getY(), getWidth(), getHeight());
    if(isDisplayed){
      g.setColor(Color.green);
      g.fillRect(getX(), getY(), getWidth(), getHeight());
      g.setColor(Color.black);
      //g.setFont(font);
      g.drawString(value + "/" + maxValue, 0, 0);
    }

    //super.paintComponent(g);
  }
} 
```

1.  这不会导致任何结果 - JComponents 被创建并至少正确添加到 ArrayList，并且它的 paintComponent 方法运行，以及计时器事件，当倒计时达到 0 时，组件也至少从 ArrayList 中正确删除，但没有t 画任何东西，我不知道为什么。

2.  请注意，frmMain 构造函数中的注释代码是有效的，如果未注释，它会绘制 JComponent ......好吧......只是矩形，不绘制任何文本，但我想这是另一个问题，但是，如果你'我也愿意帮助那个，我会很高兴的。

3.  另外，如果我错误地使用了动作事件和监听器，请忽略这一点，我是 Java 的初学者，想知道如何正确地做到这一点，**但后来**，现在我只需要让这段代码工作请关注问题，谢谢。

4.  是的，有一些死的东西，比如传递给组件的字体，这些是我试图让 drawString 工作的剩余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:32:06.377

您的项目对 Swing 中的绘画工作方式存在许多非常基本的误解。

因为（在我测试它的时候）你没有提供完整的代码，我不得不做出一些假设。

您的期望是 的内容窗格`JFrame`正在使用`null`布局。我发现很难看出您将如何管理它并在框架上安装其他组件。在任何情况下，我都会隔离一个单独的容器来充当您的`Pocitadlo`. 这允许您继续使用布局管理器来管理其他组件。

我有点担心您将整个`Pocitadlo`生成代码困在一个`try-catch`简单的捕获数字转换中。由于您已经应用了默认值，因此可以合理地自行捕获转换`try-catch`并在失败时忽略它（根据需要显示消息）。现在我是从外面进来的，所以你可能会看到需要这个，它刚刚引起了我的注意......

您的`valueTimer` `actionPerformed`代码略有错误，因为`blinkTimer`即使在完成后也有可能继续运行`valueTimer`。`if`我通过将你们中的两个语句合并为一个`if-else`语句来纠正这个问题......

```
if (value == 0 && actionListener != null) {
    isRunning = false;
    valueTimer.stop();
    actionListener.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, "counterFinished"));
    blinkTimer.stop();
} else if (value < maxValue / 2 && !blinkTimer.isRunning()) {
    blinkTimer.start();
} 
```

我个人会使用 a `JPanel`over a `JComponent`。 `JPanel`一开始是不透明的。

主要问题在于你的`paintComponent`方法。

1.  您应该始终调用`super.paintComponent`，并且在不透明的组件上应该首先调用它。
2.  例如，您似乎认为您必须在绘画时纠正组件位置`g.fillRect(getX(), getY(), getWidth(), getHeight());`。这实际上是错误的。图形上下文已被转换，因此组件/图形的 x/y 位置现在等于 0x0。阅读[AWT 和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)中的绘画以获得更好的解释，但基本上，这意味着绘画区域的上/左角现在是 0x0。
3.  您似乎认为文本是从第一个字符的上/左角绘制的。这实际上是错误的。文本沿其基线绘制。`Font`您需要通过s 上升值调整 y 位置来对此进行补偿。

.

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestRepaint01 {

    public static void main(String[] args) {
        new TestRepaint01();
    }

    public TestRepaint01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                MainFrame frame = new MainFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class MainFrame extends javax.swing.JFrame implements ActionListener {

        ArrayList<Pocitadlo> poc;
        Random rnd;
        private JPanel body;

        /**
         * Creates new form frmMain
         */
        public MainFrame() {

            setLayout(new BorderLayout());

            poc = new ArrayList<Pocitadlo>();
            rnd = new Random();

            body = new JPanel(null);
            add(body);
            JButton btn = new JButton("Add");
            btn.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    int val, x, y;

                    val = 20;
                    x = (getWidth() / 2) - 10 + rnd.nextInt(20);
                    y = (getHeight() / 2) - 10 + rnd.nextInt(20);

//                    try {
//                        val = Integer.parseInt(txtCounterValue.getText());

                        Pocitadlo tmp = new Pocitadlo(val, x, y, getFont());
                        tmp.addActionListener(MainFrame.this);
                        GridBagConstraints gbc = new GridBagConstraints();
                        gbc.gridwidth = GridBagConstraints.REMAINDER;
                        gbc.weightx = 1;
                        gbc.fill = GridBagConstraints.HORIZONTAL;
                        poc.add(tmp);
                        tmp.start();
                        body.add(tmp);
                        body.repaint();
                        setTitle("Počet počítadiel: " + getComponentCount());
//                    } catch (Exception e) {
//                        JOptionPane.showMessageDialog(this, "Nesprávne zadaná alebo prázdna hodnota počítadla. Hodnota musí byť     celé číslo.", "Chyba", JOptionPane.ERROR_MESSAGE);
//                    }
                }
            });
            add(btn, BorderLayout.SOUTH);

        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if (e.getActionCommand().equals("counterFinished")) {
                System.out.println("Counter finished");
                Pocitadlo tmp = (Pocitadlo) e.getSource();

                poc.remove(tmp);
                this.setTitle("Počet počítadiel: " + poc.size());
                body.remove(tmp);
//                body.revalidate();
                body.repaint();
            }
        }

    }

    public class Pocitadlo extends JPanel implements MouseListener, ActionListener {

        private int maxValue, value;
        private Boolean isRunning, isDisplayed;
        private Timer valueTimer, blinkTimer;
        private ActionListener actionListener;
        private Font font;

        public Pocitadlo(int timeout, int x, int y, Font f) {
            isRunning = false;
            isDisplayed = true;
            maxValue = value = timeout;

            valueTimer = new Timer(1000, this);
            valueTimer.setActionCommand("valueTimer");

            blinkTimer = new Timer(200, this);
            blinkTimer.setActionCommand("blinkTimer");

            this.setBounds(x, y, 100, 50);
        }

        @Override
        public void removeNotify() {
            super.removeNotify();
            stop();
            blinkTimer.stop();
        }

        public void start() {
            isRunning = true;
            valueTimer.start();
        }

        public void stop() {
            isRunning = false;
            valueTimer.stop();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if (e.getActionCommand().equals("valueTimer")) {
                value--;
                System.out.println("value = " + value);

                if (actionListener != null) {
                    repaint();
                    actionListener.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, "counterTick"));
                }

                if (value == 0 && actionListener != null) {
                    isRunning = false;
                    valueTimer.stop();
                    actionListener.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, "counterFinished"));
                    blinkTimer.stop();
                } else if (value < maxValue / 2 && !blinkTimer.isRunning()) {
                    blinkTimer.start();
                }
            }

            if (e.getActionCommand().equals("blinkTimer")) {
                System.out.println("Blink");
                isDisplayed = !isDisplayed;
                repaint();
            }
        }

        public void addActionListener(ActionListener listener) {
            actionListener = listener;
        }

        @Override
        public void mouseClicked(MouseEvent e) {
            value += 5000;
            if (value > maxValue) {
                value = maxValue;
            }
            repaint();
        }

        @Override
        public void mouseExited(MouseEvent e) {
        }        

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            g.setColor(Color.red);
            // location bad
            g.fillRect(0, 0, getWidth(), getHeight());
            if (isDisplayed) {
                g.setColor(Color.green);
                g.fillRect(0, 0, getWidth(), getHeight());
                g.setColor(Color.black);
                //g.setFont(font);
                FontMetrics fm = g.getFontMetrics();
                g.drawString(value + "/" + maxValue, 0, fm.getAscent());
            }

            g.drawRect(0, 0, getWidth() - 1, getHeight() - 1);

        }

        @Override
        public void mousePressed(MouseEvent e) {
        }

        @Override
        public void mouseReleased(MouseEvent e) {
        }

        @Override
        public void mouseEntered(MouseEvent e) {
        }

    }

} 
```

您遇到的所有问题都不是非常严重的（当然，您的程序并没有按照您的意愿行事），并且表明您的代码能力已经达到了顶峰。我这么说是因为我犯了完全相同的错误……；）

仔细看看[2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)和[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

我还会看看[Java 编程语言的代码约定，](http://www.oracle.com/technetwork/java/codeconv-138413.html)因为如果你不遵守它们，你只会惹恼别人；）

# c - 调用 write() 失败未知原因

> ID：15645924
> 
> 赞同：-3
> 
> 时间：2013-03-26T19:37:48.073
> 
> 标签：c, file-io

我用 open() 打开一个文件，我检查了我的文件描述符，似乎没问题 (3)。但是当我尝试在这个 fd 上写入时，write() 返回 -1。我还打印了我的字符串，它显示正确。

```
errno = 9, "Bad file descriptor" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:42:34.857

```
I checked my file descriptor and seems to be ok (3) 
```

您的文件描述符显然未打开以供写入。从文档中`write`：

> EBADF fd 不是有效的文件描述符或未打开以供写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:10:15.590

我会使用标准库 stdio.h 中给出的函数。使用 fopen() 打开文件，使用 fprintf() 写入文件，使用 fclose() 关闭文件。例子：

```
FILE *fh;

fh = fopen("test.txt","w");

fprintf(fh, "Hello World!\n");

fclose(fh); 
```

我会为这个站点添加书签，因为它是标准 C 编程的宝贵资源（提示：请先检查那里；） [http://www.acm.uiuc.edu/webmonkeys/book/c_guide/](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/)

# connect - 共享点列表不会正确刷新

> ID：15645928
> 
> 赞同：0
> 
> 时间：2013-03-26T19:37:55.827
> 
> 标签：connect, visio, sharepoint-list

嗨，我在使用 SharePoint 列表时遇到问题，我已将列表连接到 Visio，当我在本地时，它更新速度很快，我的意思是我更改了列表，单击 Visio 应用程序中的刷新它是已更新，但在 SharePoint 的 Visio Web 访问上，它需要太长时间，我可以按刷新，但它就像它有一个计时器，每 2 或 3 分钟更新一次，到目前为止我所做的每一次更改。问题是我需要即时，有时它是即时的，因为我幸运地在列表即将刷新时更改了列表。

服务器中是否有任何配置让我更新这么快？英语不是我的母语，所以很抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:41:12.070

如果您希望立即显示您的更改，您可以在 SharePoint 中将**最小缓存期限**设置为零：

[http://technet.microsoft.com/en-us/library/ee524061.aspx](http://technet.microsoft.com/en-us/library/ee524061.aspx)

请注意，默认值（几分钟）在多用户场景中提供了更好的渲染性能。

另请注意，此设置在 SharePoint Online/Office 365 中似乎不可用（如果我错了，请纠正我）。

# objective-c - osx 在两个 nsview 之间切换

> ID：15645930
> 
> 赞同：2
> 
> 时间：2013-03-26T19:38:00.497
> 
> 标签：objective-c, macos, cocoa, interface-builder

我想`NSView`在按下按钮时在两个控件之间切换。基本上，我有 .xib 文件，其中包含`NSWindow`控件。窗口包含两个子视图和几个按钮。我在 xib 中拖`NSViewController`了一个对象列表和一个。参考了在 xib 文件中浮动的视图和视图。`NSView``NSViewController``NSWindow`

问题是，如何在按下按钮时在 nsview1 和 nsview2 之间切换`NSWindow`？这是正确的方法吗？

![草图](../Images/9d351c874e8198cb15ad141b71d500ca.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T21:50:52.577

Define a NSView outlet for the placeholder of where the swappable view is as well as a property for keeping a reference to the current view controller in use.

```
@property (assign) IBOutlet NSView* mainView;
@property (strong) NSViewController* currentViewController; 
```

I use a generic method for the view swapping (using autolayout to make view take up entire placeholder view).

```
-(void)setMainViewTo:(NSViewController *)controller
{
    //Remove existing subviews
    while ([[self.mainView subviews] count] > 0)
    {
        [self.mainView.subviews[0] removeFromSuperview];
    }
    NSView * view = [controller view];
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.mainView addSubview:view];

    NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(view);   

    [self.mainView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view]|"
                                                                 options:0
                                                                 metrics:nil
                                                                   views:viewsDictionary]];

    [self.mainView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view]|"
                                                                 options:0
                                                                 metrics:nil
                                                                   views:viewsDictionary]];
    self.currentViewController = controller;
} 
```

Now you can define IBOutlets to instantiate and swap your view controllers

```
-(IBAction)showView1:(id)sender
{
    View1Controller * controller = [[View1Controller alloc]init];
    [self setMainViewTo:controller];
}
-(IBAction)showView2:(id)sender
{
    View2Controller * controller = [[View2Controller alloc]init];
    [self setMainViewTo:controller];
} 
```

# oracle - Oracle，2个程序避免死锁

> ID：15645931
> 
> 赞同：1
> 
> 时间：2013-03-26T19:38:01.310
> 
> 标签：oracle, deadlock, procedure

我有两个要在同一张表上运行的程序，一个使用出生日期，另一个更新取自第三张表的姓名和姓氏。

使用生日来更新年龄字段的那个在整个表中运行，而更新名字和姓氏的那个只根据一个键更新出现在第三个表上的行。

所以我同时启动并陷入僵局！有没有办法优先考虑它们中的任何一个？我阅读了有关`nowait`更新的和跳过锁定的信息，但是，我将如何返回已跳过的内容？

希望你能在这方面帮助我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:44:31.003

我猜你被锁定是因为所有行的更新和一小组行的更新以不同的顺序访问行。

前者使用完整扫描并首先到达原始 A，然后继续到其他行，最终尝试锁定 B 行。但是，另一个查询是从索引或连接驱动的，并且已经锁定了 B 行，并且正在关闭当发现 A 行已被锁定时，将其锁定。

所以，解决方法：首先，拥有一个需要不断修改的年龄列是一个非常糟糕的主意。也许这样做是为了允许对年龄进行索引，但是通过正确编写的查询，出生日期的索引可以让您同样快速地找到相同的记录。您已经破坏了规范化规则并最终为自己编写了一个死锁应用程序。希望您只更新需要更新的行，而不是全部更新——我的意思是，这太疯狂了。

最好的解决方案是摆脱这个设计缺陷。

不太好的解决方案是通过在不同时间运行查询或使用 DBMS_Lock 来消除查询冲突，以便在任何时候都只能运行其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:46:50.503

一种可能性是锁定您将立即更新的所有行。在单个更新语句中执行所有更新将完成此操作。或者

```
从 T 中选择任何内容
   在哪里 ...
   用于更新；
```

另一个解决方案是创建我称之为“Gatekeeper”的表。这两个过程都需要在更新相关表**之前将 Gatekeeper 表锁定为独占模式。**第二个过程将阻塞直到第一次提交，但不会死锁。在 11g 中，您可以创建一个没有分配空间的表。

一种变体是在 Gatekeeper 中插入一行。然后使用 select for update 仅锁定该行。然后您可以在其他情况下使用 Gatekeeper。

# neo4j - Neo4j 链表 - 多个节点

> ID：15645938
> 
> 赞同：0
> 
> 时间：2013-03-26T19:38:44.293
> 
> 标签：neo4j

我正在努力了解如何使用链表来提高性能并在 Neo4j 上创建活动提要。仍在学习 Cypher，所以我有一个问题。我找到了一些链表示例，但我需要列表更大的例子最终把所有的部分放在我的脑海里..

我使用了[grepcode](http://grepcode.com/file/repo1.maven.org%24maven2@org.neo4j%24neo4j-cypher@1.8.M05@dev%24ql%24cookbook%24insert-a-new-value-into-a-linked-list.txt/%22Grepcode%22)中的这段代码，发现它比 Neo4j 手册中的示例更有帮助。但是我还是有点困惑.. 有人可以修改它以在链表中有七个节点和七个项目，然后在它的前面插入一个节点吗？

是的，我正在尝试将最新的状态更新放在链接列表的顶部。这个例子并没有真正做到这一点，但它很接近..所以寻找一些mods..不，我还没有真正编码，仍然试图首先掌握Cypher - 将在接下来的两周内继续研究它.. . 让 Ruby on Rails 一边工作.. 只需要更好地理解与 Cypher/Neo 一起使用的链表。

* * *

```
CREATE zero={name:0,value:0}, two={value:2,name:2}, zero-[:LINK]->two-[:LINK]->zero

==== zero ====

MATCH zero-[:LINK*0..]->before,
after-[:LINK*0..]->zero,
before-[old:LINK]->after
WHERE before.value? <= 1 AND
1 <= after.value?
CREATE newValue={name:1,value : 1},
before-[:LINK]->newValue,
newValue-[:LINK]->after
DELETE old
==== zero ====
MATCH p = zero-[:LINK*1..]->zero
RETURN length(p) as list_length 
```

* * *

我想做的是了解前后数据集和零数据集-我*几乎*拥有它，但想看看它是如何在具有两个以上起始节点的集合上完成的，以消除任何混乱

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:34:16.703

前面的节点是特殊的，因为它没有传入链接关系。通常，您还会在某处保留与头节点的连接，因此这是关于将此链接替换为头节点并将头节点移远一步。像这样的东西：

```
start user=node:node_auto_index(user="me")
match user-[old:MESSAGES]->head
delete old
create new_heads = { title: "Title", date : 2348972389, text: "Text" },
 user-[:MESSAGES]->new_head-[:LINK]->head 
```

# sql-server - 通过在组合框中选择项目将多个数据从 sql 绑定到标签

> ID：15645942
> 
> 赞同：0
> 
> 时间：2013-03-26T19:39:03.583
> 
> 标签：sql-server, vb.net, visual-studio-2010, visual-studio, sql-server-2008

如果我在组合框中选择一个来自 sql 的项目，我如何将多个数据从 sql 绑定到标签这是我的代码：

```
 Private Sub cmboCourse_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmboCourse.SelectedIndexChanged

    If cmboCourse.Text = "ADVANCED COMPUTER TECHNICIAN" Then
        callMe()
    ElseIf cmboCourse.Text = "AUTOELECTRICITY" Then
        callMe()
    ElseIf cmboCourse.Text = "AUTOMOTIVE" Then
        callMe()
    End If

End Sub

Private Sub callMe()

Dim str As String = ("Data Source=PC1; User ID=sa; Password=pwd;Databasfriend")
Dim con As New SqlConnection(str)
Dim str1 As String = "SELECT * FROM tbl_course"
Dim da As New SqlDataAdapter(str1, con)
Dim dataset1 As New DataSet()
da.Fill(dataset1, "course")
lbl.DataBindings.Add("text", dataset1, "course.Course_Code")

end sub 
```

这是我的桌子

```
 Course_Code      Course
 ACT              ADVANCED COMPUTER TECHNICIAN
 AE               AUTOELECTRICITY
 AM               AUTOMOTIVE 
```

它只绑定一个数据，我想在一个特定列中绑定许多数据示例我在组合框中选择一个课程 AUTOMOTIVE AUTOMOTIVE 的 course_code 如何绑定到标签，如果我选择 AUTOELECTRICITY AUTOELECTRICITY 的 course_code 如何绑定到相同的标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T10:47:38.987

sc.Open() Dim da As New SqlDataAdapter()

```
 Dim dataset1 As New DataSet()
    Dim sql As New SqlCommand("Select * from book where Title='" + cmbtit.Text + "'", sc)

    da.SelectCommand = sql
    da.SelectCommand.ExecuteNonQuery()
    da.Fill(dataset1, "book")

    If dataset1.Tables("book").Rows.Count > 0 Then
        txtauthor.Text = dataset1.Tables("book").Rows(0)("Author")
    Else
        MsgBox("Author [" & cmbtit.Text & "] not found")
    End If
    sc.Close()

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:47:09.270

这未经测试，如果它不起作用，请告诉我。

```
Private Sub cmboCourse_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmboCourse.SelectedIndexChanged
    callMe(cmboCourse.Text)
End Sub

Private Sub callMe(ByVal course as String)

    Dim str As String = ("Data Source=PC1; User ID=sa; Password=pwd;Databasfriend")
    Dim con As New SqlConnection(str)
    Dim str1 As String = "SELECT * FROM tbl_course WHERE [Course]='" & course & "'"
    Dim da As New SqlDataAdapter(str1, con)
    Dim dataset1 As New DataSet()
    da.Fill(dataset1, "tbl_course")
    'lbl.DataBindings.Add("text", dataset1, "course.Course_Code")
    If dataset1.Tables("tbl_course").Rows.Count > 0 Then
        lbl.Text = dataset1.Tables("tbl_course").Rows(0)("Course_Code")
    Else
        MsgBox "Course [" & course & "] not found"
    End If

End Sub 
```

请注意，在您的代码中，`da.Fill(dataset1, "course")`您将表指定为“课程”，而 select 语句从“tbl_course”表中选择。我假设后者是正确的名称。

## 编辑1：

错误修复

## 编辑2：

调试

# html - 为什么我的 hr 标签在两个地方的行为不同？

> ID：15645947
> 
> 赞同：0
> 
> 时间：2013-03-26T19:39:12.957
> 
> 标签：html, class

我正在使用相同的类选择器，但我不明白为什么它的行为不同。

这是我的网站：

[http://violetoeuvre.com/](http://violetoeuvre.com/)

在第一种情况下，边距很好；在第二种情况下，不是。

```
<!-- Side Navigation__________________________________-->
    <div class="side_nav_wrapper">
        <div class="side_nav_photos" id="side_wrapper_text">photos</div>
        <div class="side_nav_about" id="side_wrapper_text">about</div>
        <div class="side_nav_writing" id="side_wrapper_text" >writing</div>
        <div class="side_nav_contact" id="side_wrapper_text">contact</div>
    </div>

<!-- CONTENT____________________________________________-->

<div class="content_wrapper">

<!-- Photo __________________________________________-->

    <div class="home_photo">
    </div>

    <hr class="line">
<!-- About___________________________________________________-->

    <div class="home_text">
        <p>Emma Carmichael is a writer and editor based in Brooklyn, NY, although she hails from Brattleboro, VT. Emma graduated from Vassar College in 2010 with a degree in Urban Studies; the theme of her thesis about contextualizing female rappers, ETC.
    </p>
    </div>

    <hr class="line"> 
```

（另外，我不知道为什么这个类不适用：）

```
#side_wrapper_text a:link{
        font-family: 'Playfair Display', sans-serif;
        font-size: 20px;
        font-weight: 100; 
        color:rgba (255,255,255,1);
        text-decoration: none; 
        text-align: center;
        letter-spacing:0.2em;

}

<div class="side_nav_wrapper">
        <div class="side_nav_photos" id="side_wrapper_text">photos</div>
        <div class="side_nav_about" id="side_wrapper_text">about</div>
        <div class="side_nav_writing" id="side_wrapper_text" >writing</div>
        <div class="side_nav_contact" id="side_wrapper_text">contact</div>
    </div> 
```

谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:43:57.953

您的类`home_text`应用了属性`float: left;`，该属性将该`<div>`元素从文档流中取出。如果您删除该 float 属性，您会看到文档再次流动，并且不会位于' 的边距`<div>` 之上。`<hr>`

或者，您可以使用`clear: both`以下方式解决此问题：

在您的 css 文件中：

```
.clearer { clear: both; } 
```

在您的标记中：

```
<div class='home_text'>...</div>
<div class='clearer'></div>
<hr class='line' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:46:07.030

如果要浮动，请在 .line 中添加 clear:both

此外，如果它在页面上的位置超过一个位置（如 #side_wrapper_text ），你真的应该使用一个类而不是一个 id，而且你没有任何链接可以应用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:47:28.827

没有对您问题的第一部分进行尝试，但第二部分是双重的：

1.  ID 在页面上是唯一的，但您有四个 id 为“side_wrapper_text”的 div
2.  其次，您没有可应用于 CSS 的锚标记 (a)。

你可能想要这样的东西：

```
#side_wrapper_text a:link{
    font-family: 'Playfair Display', sans-serif;
    font-size: 20px;
    font-weight: 100; 
    color:rgba (255,255,255,1);
    text-decoration: none; 
    text-align: center;
    letter-spacing:0.2em;

}

<div id="side_wrapper_text" class="side_nav_wrapper">
    <a href="#" class="side_nav_photos">photos</a>
    <a href="#" class="side_nav_about">about</a>
    <a href="#" class="side_nav_writing">writing</a>
    <a href="#" class="side_nav_contact">contact</a>
</div> 
```

# c# - MVC4 与 EF 示例代码与工作单元，通用存储库模式？

> ID：15645948
> 
> 赞同：2
> 
> 时间：2013-03-26T19:39:13.900
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

是否有任何 MVC4 代码示例使用实体框架、工作单元和可以用作模板的通用存储库模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:52:17.923

我使用这两个教程来做到这一点：

[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4) 和

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

# apache - URL 重写似乎不起作用。阿帕奇2

> ID：15645951
> 
> 赞同：7
> 
> 时间：2013-03-26T19:39:19.810
> 
> 标签：apache, apache2, apache-modules

我想要它，这样当用户去到 它时`http://mysite.com/home`，它会将他重定向到`http://mysite.com/page.php?id=home`. 这是我在 .htaccess 中放入的内容，但它似乎不起作用。

```
RewriteEngine On
RewriteRule ^/(.+)$ page.php?id=$1 [NC,L] 
```

它只是将我发送到 /home 目录，并带有一个不错的 404。感谢您的帮助。谢谢。

编辑：

我已经尝试了一些我知道工作的重写，所以现在我确定这不是我的问题。我检查了一下`phpinfo()`，是的，mod rewrite 正在运行，我用 LAMP 设置了 apache2，我正在运行最新版本的 Linux Mint。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T15:17:09.483

好吧，我解决了这个问题，这就是我的做法。

`sudo gedit /etc/apache2/sites-available/default`

然后我修改`AllowOverride None`为文件`AllowOverride all`的一部分`/var/www/`

```
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all #This was 'None' before, change it to 'all'
    Order allow,deny
    allow from all
</Directory> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T20:44:51.270

删除正斜杠后，这对我有用：

```
RewriteEngine On 
RewriteBase /test 
RewriteRule ^(.+)$ page.php?id=$1 [NC,L] 
```

# php - 文件时间错误？

> ID：15645952
> 
> 赞同：0
> 
> 时间：2013-03-26T19:39:21.923
> 
> 标签：php, filemtime

当我成为网站的网站管理员时，我继承的一些脚本有问题。这是我们得到的错误：

```
Warning: filemtime() [function.filemtime]: stat failed for /home/public_html/site/modules/chat/cache/locations/2_0.tch in /home/public_html/site/modules/chat/areas/chat.window.php on line 101 
```

在这个文件的第 101 行，我有：

```
$tch = filemtime( PATH . 'modules' . S . 'chat' . S . 'cache' . S . 'locations' . S . $get_['location'] . '_' . $get_['zone'] . '.tch' ); 
```

现在这个 .tch 文件是 chmod'd 到 777，我也在 755 尝试过。没有骰子。'S' 是目录分隔符，仅供参考。

任何帮助表示赞赏。我搜索和搜索....没有找到答案的运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:45:14.773

> 现在这个 .tch 文件被修改为 777

非常糟糕的做法。

目录的权限是什么？

# actionscript-3 - 接口存在于 Actionscript-3 和其他语言中的原因是什么

> ID：15645954
> 
> 赞同：3
> 
> 时间：2013-03-26T19:39:24.953
> 
> 标签：actionscript-3, flash, interface

这个接口是什么意思？即使我们在一个类上实现了一个接口，每次我们在不同的类上实现它时，我们都必须一次又一次地声明它的功能，那么接口存在于 as3 或任何其他具有接口的语言上的原因是什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:42:12.760

我基本上同意到目前为止发布的答案，只是有一点要补充。

首先回答简单的部分，是的，其他语言也有接口。Java 立即浮现在脑海，但我很确定所有 OOP 语言（C++、C# 等）都包含一些用于创建接口的机制。

正如 Jake 所说，您可以将接口编写为“合同”，以便分离工作。假设我正在研究 A，而你正在研究 C，而 bob 正在研究 B。如果我们将 B' 定义为 B 的接口，我们可以快速且相对容易地定义 B'（相对于定义B，实施），一切照常进行。我可以假设从 AI 可以编码到 B'，您可以假设从 C 可以编码到 B'，当 bob 完成 B 时，我们可以将其插入。

这就是 Jugg1es 的观点。“依赖注入”使替换整个功能块的能力变得更容易（如果你不知道这个短语，请谷歌它）。这就是所描述的确切内容，您创建一个接口，该接口通常定义某事将做什么，例如数据库连接器。对于所有数据库连接器，您希望它能够连接到数据库并运行查询，因此您可以定义一个接口，说明类必须具有“connect()”方法和“doQuery(stringQuery)”。现在假设 Bob 为 MySQL 数据库编写了实现，现在您的客户说我们刚刚为新服务器支付了 200,000 美元，他们将运行 Microsoft SQL，因此要利用您的软件来利用它，您需要做的就是换掉数据库连接器。

在现实生活中，我有一个朋友在芝加哥经营一家肉类包装/分销公司。为扫描包裹和进出（库存）的物品进行软件/硬件设置的公司告诉他们，他们必须升级到更新的操作系统/服务器和更新的硬件才能与软件保持一致。该软件不是以允许它们保持向后兼容性的模块化方式编写的。我已经在这条船上很多次了，告诉某人 xyz 需要升级以获得 abc 功能，这将使我的工作变得更容易 90%。无论如何，猜测点是在现实世界中人们并不总是使用这些东西，它可能会咬你的屁股。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:44:34.317

接口对 OOP 至关重要，尤其是在开发大型应用程序时。一个例子是，如果您需要一个返回数据的数据层，比如用户。如果您最终更改了数据的获取方式，例如您从 XML Web 服务数据开始，但随后切换到平面文件或其他内容，该怎么办。如果您为数据层创建了一个接口，则可以创建另一个实现它的类并对数据层进行所有更改，而无需更改应用程序层中的代码。我不知道您使用的是 Flex 还是 Flash，但是在使用 Flex 时，界面非常有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T19:49:47.613

接口是定义类功能的一种方式。当您独自工作时（尤其是刚开始工作）可能没有多大意义，但是当您开始在团队中工作时，它可以帮助人们了解您的代码如何工作以及如何使用您编写的类（同时保持您的代码封装）。在我看来，这是在中间水平上考虑它们的最佳方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T21:31:34.213

虽然现有的答案非常好，但我认为他们错过了在 ActionScript 中使用接口的主要优势，即您可以避免将该接口的实现编译到主文档类中。

例如，如果您有一个`ISpaceShip`接口，您现在可以选择做几件事来填充键入到该接口的变量。您可以加载一个外部 swf，其主文档类实现了 ISpaceShip。一旦 Loader 的`contentLoaderInfo`COMPLETE 事件触发，您将其`content`转换为 ISpaceShip，并且它的实现（无论它是什么）永远不会编译到您的加载 swf 中。这允许您在加载过程发生时将真实内容放在用户面前。

出于同样的原因，您可以在 ISpaceShip 类型的父 AS 类中声明一个时间线实例，其中“Export for Actionscript in Frame N *un*checked. 这将在第一次使用它的帧上编译，因此您不再需要在你的预加载时间考虑这个。用足够多的东西做这个，突然你甚至*不需要*预加载器。

对接口进行编码的另一个优点是，如果您正在对代码进行单元测试，除非您的代码完全微不足道，否则您应该这样做。这使您能够确保代码成功或失败取决于其自身的优点，而不是基于协作者的优点，或者协作者不适合进行测试。例如，如果您有一个旨在控制特定类型 View 的控制器，您将不想为测试实例化完整视图，而只想实例化对测试产生影响的功能。

如果您在工作环境中不支持编写测试，那么对接口进行编码有助于确保您的代码在达到可以编写测试的地步后是可测试的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T21:46:51.327

上面的答案都非常好，我唯一要补充的是——在像 AS3 这样的语言中可能不会立即清楚，其中有几个无类型的集合类（数组、对象和字典）和对象/动态类——是这是一种按类型对不同对象进行分组的方法。

一个简单的例子：

想象一下，你有一个太空射击游戏，玩家有导弹可以锁定不同的目标。假设，为此目的，您希望任何类型的可以锁定的对象都具有用于注册它的内部函数（也称为接口）：

```
function lockOn():void;//Tells the object something's locked onto it

function getLockData():Object;//Returns information, position, heat, whatever etc 
```

这些目标可以是任何东西，一系列完全不相关的类别——敌人、朋友、能量提升、健康。

一种解决方案是让它们全部从包含这些方法的基类继承——但 Enemies 和 Health Pickups 在逻辑上不会共享一个共同的祖先（如果你发现自己制作了奇怪的继承链来满足你的需求，那么你应该重新考虑您的设计！），并且您的导弹还需要对其锁定的对象的引用：

```
var myTarget:Enemy;//This isn't going to work for the Powerup class! 
```

或者

```
var myTarget:Powerup;//This isn't going to work for the Enemy class! 
```

...但是如果所有可锁定类都实现了 ILockable 接口，则可以将其设置为类型引用：

```
var myTarget:ILockable;//This can be set as Enemy, Powerup, any class which implements ILockable! 
```

..并具有上述功能作为接口本身。

它们在使用 Vector 类时也很方便（名称可能会误导您，它只是一个类型化数组） - 它们运行速度比数组快得多，但只允许单一类型的元素 - 再次，可以将接口指定为类型：

```
var lockTargets:Vector.<Enemy> = new Vector.<Enemy>();//New array of lockable objects

lockTargets[0] = new HealthPickup();//Compiler won't like this! 
```

但是这个...

```
var lockTargets:Vector.<ILockable> = new Vector.<ILockable>();

lockTargets[0] = new HealthPickup();
lockTargets[1] = new Enemy(); 
```

将，提供`Enemy`和`HealthPickup`实施`ILockable`，工作得很好！

# jquery - 为什么这不起作用 - jsonp 和 REST Easy？

> ID：15645966
> 
> 赞同：1
> 
> 时间：2013-03-26T19:39:46.817
> 
> 标签：jquery, jsonp, resteasy

JS代码

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
    $.getJSON("http://localhost:8080/gbsshop/rest/auth/test/xyz?callback=?", function (data) {
        alert("52");
    });
    </script>
</head> 
</html> 
```

REST 简单方法

```
@GET
    @POST
    @Path("/test/{param}")
    @Produces({MediaType.APPLICATION_JSON })
    public String returnMessage(@PathParam("param") String msg) {
        System.out.println("~~~~~~~~~~~~~"+msg+"~~~~~~~~~~~~");
        return "HEllo "+msg;

    } 
```

我看到服务器接听电话，但浏览器失败并显示“未捕获的语法错误：意外的标识符”

任何帮助表示赞赏。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T05:52:39.627

Resteasy[声称](http://docs.jboss.org/resteasy/docs/3.0.9.Final/userguide/html/json.html#JSONP_Support)在 3.x 版本中支持开箱即用的 JSONP：

> 如果您使用的是 Jackson，Resteasy 有 JSONP，您可以通过将提供程序 org.jboss.resteasy.plugins.providers.jackson.JacksonJsonpInterceptor（如果您使用的是 Jackson2 提供程序，则为 Jackson2JsonpInterceptor）添加到您的部署中来打开它。如果响应的媒体类型是 json 并且给出了回调查询参数，则响应将是一个 JavaScript 片段，其中包含回调参数定义的方法的方法调用。例如：
> 
> GET /resources/stuff?callback=processStuffResponse 将产生这个响应：
> 
> processStuffResponse() 这支持 jQuery 的默认行为。
> 
> 您可以通过设置 callbackQueryParameter 属性来更改回调参数的名称。

但是，由于 RESTEASY-1168，它似乎很[糟糕：Jackson2JsonpInterceptor does not render closing bracket](https://issues.jboss.org/browse/RESTEASY-1168)

所以 `foo({"foo":"bar"}` 被渲染而不是 `foo({"foo":"bar"})`

这会导致“Uncaught SyntaxError：Unexpected Identifier”错误

我已经提交了一个带有修复的[拉取请求](https://github.com/resteasy/Resteasy/pull/638)，希望它应该进入下一个版本 3.0.12

我知道这个问题很老了，但是当你搜索resteasy jsonp问题时它显示在谷歌的第一页，所以我决定更新它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:03:25.137

**注意：**这是在应用程序中执行此操作的最糟糕的方法，您需要检查哪些框架支持可能可用。这只是演示如何添加 jsonp 支持

我不知道REST Easy，我在这里猜测一下

```
@GET
@POST
@Path("/test/{param}")
@Produces({MediaType.APPLICATION_JSON })
public String returnMessage(@PathParam("param") String msg, @QueryParam("callback") String callback) {
    System.out.println("~~~~~~~~~~~~~"+msg+"~~~~~~~~~~~~");
     return callback + "({msg: \"" + msg + "\"})";
} 
```

然后

```
$.getJSON("http://localhost:8080/gbsshop/rest/auth/test/xyz?callback=?", function (data) {
    alert(data.msg);
}); 
```

实际上，您必须同时支持 json 和 jsonp 请求，因此您可能需要

```
@GET
@POST
@Path("/test/{param}")
@Produces({MediaType.APPLICATION_JSON })
public String returnMessage(@PathParam("param") String msg, @QueryParam("callback") String callback) {
    System.out.println("~~~~~~~~~~~~~"+msg+"~~~~~~~~~~~~");
    if (callback == null || callback == "") {
        return "{msg: \"" + msg + "\"}";
    } else {
        return callback + "({msg: \"" + msg + "\"})";
    }
} 
```

# unix - Visual Studio 2012：保存时运行可执行文件（或插件）

> ID：15645968
> 
> 赞同：2
> 
> 时间：2013-03-26T19:39:49.243
> 
> 标签：unix, visual-studio-2012, add-in, line-endings

所以我刚刚开始使用 Visual Studio 2012 作为新程序员，我想找到一种方法让 VS2012 自动保存（或至少自动转换）文件到 UNIX 行结尾。

我发现[这个页面](http://support.microsoft.com/kb/268901)是一种创建可执行文件的方法，该可执行文件可以作为宏与 VS2010 集成。由于 VS2012 不再使用宏，我该如何设置它以便在保存时对我的文件执行？我不想每次保存文件时都必须进入高级保存（出于偏执，我倾向于每 30 秒左右保存一次）。

我开始尝试构建一个插件来为我处理这个问题，但作为一个初学者，我担心这有点超出我的能力。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T01:31:18.140

你可以这样做，

单击`File`，选择`Save .... as`，然后在保存文件对话框中，选择`save with Encoding`，出现另一个对话框，您可以选择 Unix 格式。

# postgresql - 如何在 PostgreSQL 9 中的日期列上插入 varchar'//' 作为 null

> ID：15645973
> 
> 赞同：3
> 
> 时间：2013-03-26T19:40:05.143
> 
> 标签：postgresql

我有一个空的临时表，想从另一个表中插入数据，但是其中的日期列`temp`具有`date`类型，并且中的列`usomultiple`是`varchar`.

如果我尝试使用该`to_date()`函数进行转换，我会收到一个错误，因为数千个单元格被保存`' / / '`为空值。

> 错误：值 «/ » 无效 «dd»

```
INSERT INTO temp (
      cd_id,
      ds_estado,
      dt_date)  
    SELECT  um.cd_uso, um.ds_estado,to_date(um.dt_dateIn, 'dd/MM/yyyy')
    FROM usomultiple um; 
```

当单元格被删除时，我如何设置 null 而不是`' / / '`正确的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:45:00.790

```
TO_DATE(NULLIF(dt_dateIn, '//'), 'dd/MM/yyyy') 
```

# c++ - c++ 和 xcode - 调用对象函数抛出 EXC_BAD_ACCESS

> ID：15645980
> 
> 赞同：1
> 
> 时间：2013-03-26T19:40:43.617
> 
> 标签：c++, xcode

这段代码在 VS2010 中运行良好，但现在我正尝试使用 xcode 4.6 将它移植到我的 mac，它在运行时给了我一些糟糕的访问错误。基本上我有一个包含二维图块数组的板类，当我创建板时，我可以访问图块函数，但是当我稍后运行我的绘制函数时，它给了我不好的访问权限。这是我的董事会课程的示例。

板子.h

```
#include "Tile.h"
class Board
{
private:
    //This is the GameBoard of a 2D array of Tiles
    Tile *** GameBoard;
    void CreateBoard(const int size);
void FillValues();
    ...
public:
Board(int size);
void DrawBoard();
    ...
} 
```

板子.cpp

```
Board::Board(const int size)
{
won=false;
lost=false;
BoardSize =size;
GameBoard = new Tile**[size];
CreateBoard(size);
}

void Board::CreateBoard(const int size)
{
    ...
    FillValues()
}

void Board::FillValues()
{
    for(int x=1;x<BoardSize+1;x++)
    {
        for(int y =1;y<BoardSize+1;y++)
        {
            if (GameBoard[x][y]->Type()=="NumberTile")
            {
                                int neighbors = CountNeighbours(x,y);
                GameBoard[x][y]->SetValue(neighbors);
                                //This works
            }
        }
    }
}

void Board::DrawBoard()
{
for(int i=0;i<=BoardSize+1;i++)
{
    for (int j=0;j<=BoardSize+1;j++)
    {
        if (GameBoard[i][j]->Type() != "BorderTile") {
            GameBoard[i][j]->Draw();
            //This does not work, i get the error when it tries to use ->Type()
        }
    }
}
}

... 
```

我这样调用函数

```
GI = new Board(SCREEN_SIZE);
GI->DrawBoard(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:44:01.047

```
GameBoard = new Tile**[size]; 
```

这只是创建一个数组`Tile**`。您还没有任何实际`Tile`的 s 甚至`Tile*`s ，以后，当您尝试使用 访问数组的元素时`GameBoard[x][y]->`，您会遇到未定义的行为。

正如你所拥有的，你需要这样做：

```
GameBoard = new Tile**[size];      // Allocate an array of Tile**
for (int i = 0; i < size; i++) {
  GameBoard[i] = new Tile*[size];  // Allocate an array of Tile*
  for (int j = 0; i < size; j++) {
     GameBoard[i][j] = new Tile(); // Allocate an array of Tile
  }
} 
```

然而，这很糟糕。这是三个动态分配，您必须记住最后整理（并正确整理）。

一种更简单的方法是只拥有一个二维瓷砖数组：

```
Tile GameBoard[CONSTEXPR_SIZE][CONSTEXPR_SIZE]; 
```

或者更好的是，使用`std::array`容器：

```
std::array<std::array<Tile, CONSTEXPR_SIZE>, CONSTEXPR_SIZE> GameBoard; 
```

在这里，给定的大小必须是一个常量表达式。如果需要动态调整大小，请改用 a `std::vector`。

* * *

在下面的评论中，您说数组的大小实际上是`BoardSize+1`. 尽管如此，您在外部和内部循环中都迭代了太多元素`for`：

```
for(int i=0;i<=BoardSize+1;i++) 
```

这应该是：

```
for(int i=0; i<BoardSize+1; i++) 
```

* * *

同样在下面的评论中，您说`Type`返回 a `char*`。这意味着您不能像这样进行字符串比较：

```
GameBoard[i][j]->Type() != "BorderTile" 
```

这只是执行指针比较，因为左操作数是 a`char*`而右操作数可以转换为`const char*`。它*不*比较字符串本身。相反，你想要：

```
GameBoard[i][j]->Type() != std::string("BorderTile") 
```

这将强制`std::string`使用比较。

# jqgrid - jqgrid 和 tinyMCE 或 FCKEditor

> ID：15645981
> 
> 赞同：1
> 
> 时间：2013-03-26T19:40:45.097
> 
> 标签：jqgrid, tinymce, fckeditor

我一直在尝试向 jqGrid 添加任何类型的编辑器。所以基本上我希望能够选择一行并打开一个模式，如果它是 type= textarea 来显示编辑器。

这可能吗？我发现很多帖子都有模糊的代码片段，但没有真正的实现。

任何帮助都感激不尽。谢谢。安德烈斯。

# qt - 将信号拟合到 Qt 中的插槽

> ID：15645987
> 
> 赞同：1
> 
> 时间：2013-03-26T19:41:07.780
> 
> 标签：qt, button, signals-slots

我正在尝试启用一个`QPushButton`又一个`QPushButton`单击，但遇到了问题。第一个`QPushButton`可以发出`clicked()`信号，而第二个`QPushButton`只有 和 形式的`setEnabled(bool)`插槽`setDisabled(bool)`。

基本上，我正在尝试做

```
connect(ui->pbViewVolume,  SIGNAL(clicked()), 
        ui->pbSaveAsImage, SLOT(setEnabled(true))); 
```

由于不可能发送参数少于插槽的信号，我怎样才能最好地做到这一点？我看到的唯一方法是为我的`MainWindow`喜欢创建一个公共插槽

```
void EnableSaveAsImageButton(){
    ui->pbSaveAsImage->setEnabled(true);
} 
```

但我宁愿不要`MainWindow`用这种垃圾功能填充我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:45:37.260

1.  您必须创建该插槽。
2.  您不需要将该插槽设为公开，将其设为私有。
3.  这个功能不垃圾。

# dataset - Apache Jena：什么是 RDF 数据集？

> ID：15645988
> 
> 赞同：0
> 
> 时间：2013-03-26T19:41:10.977
> 
> 标签：dataset, rdf, jena

我是 Semantic Web 的新手，我对 JENA RDF 数据集有一个非常基本的问题。我从文档中读到数据集是图形的集合（或 Java API 中的模型）。如果我将图形（模型）视为关系数据库“表”的 RDF 替代品，我可以将数据集视为“数据库”吗？

如果是这样，那么使用 TDB 我应该能够创建多个数据集。然而，在文档中它说“每个数据集都是通过 JVM 中的 TDBFactory.createDataset(Location) 获得的，都是同一个数据集。” （[http://jena.apache.org/documentation/tdb/datasets.html](http://jena.apache.org/documentation/tdb/datasets.html)）。我还记得文档在某处说 TDB 现在不支持多个 JVM。这是否意味着使用 TDB 我只能创建一个数据集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:34:14.867

这是安迪在耶拿用户邮件列表中对我的问题的回答。谢谢，安迪。

> 嗨，大家好
> 
> 我是 Semantic Web 的新手，我对 JENA RDF 数据集有一个非常基本的问题。我从文档中读到数据集是图形的集合（或 Java API 中的模型）。如果我将图形（模型）视为关系数据库“表”的 RDF 替代品，我可以将数据集视为“数据库”吗？

是的 - 有点。

> 如果是这样，那么使用 TDB 我应该能够创建多个数据集。然而，在文档中它说“每个数据集都是通过 JVM 中的 TDBFactory.createDataset(Location) 获得的，都是同一个数据集。” （[http://jena.apache.org/documentation/tdb/datasets.html](http://jena.apache.org/documentation/tdb/datasets.html)）。

...对于相同的“位置”参数...

TDBFactory.createDataset("DB1") ; TDBFactory.createDataset("DB2") ;

是不同的数据集

> 我还记得文档在某处说 TDB 现在不支持多个 JVM。这是否意味着使用 TDB 我只能创建一个数据集？

TDB 是核心数据库引擎，直接使用时，是在一种嵌入式模式下使用。

您可以使用 Jena Fuseki 在应用程序之间共享数据集（就像您可以在应用程序之间共享 SQL 数据库一样，除了它是 HTTP 而不是 JDBC）。

安迪

# java - 向 mvn javadoc:javadoc 添加先决条件任务

> ID：15645990
> 
> 赞同：0
> 
> 时间：2013-03-26T19:41:25.587
> 
> 标签：java, maven, javadoc

我想在运行之前运行一个 shell 脚本（将 markdown 转换为 html）`mvn javadoc:javadoc`。如何将此 shell 脚本添加为 javadoc 任务的依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:09:37.797

您正在使用的命令只是调用目标 javadoc 但您需要一个生命周期，您可以在其中附加 shell 脚本的运行，因此您需要调用**mvn site**让您的 shell 脚本运行。

# dart - 从 M到 M的映射的 typedef

> ID：15645993
> 
> 赞同：0
> 
> 时间：2013-03-26T19:41:46.130
> 
> 标签：dart

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:38:13.213

这两个都不正确：

> ```
> typedef M<B> Lift<M extends Monad, A, B>(M<A> source, Func1<A, B> map);
> typedef Mb Lift<M extends Monad, Ma extends M<A>, A, Mb extends M<B>, B>(Ma source, Func1<A, B> map); 
> ```

问题是你说 M 是一个类型变量，而类型变量没有类型参数。所以你不能写：

```
M<A> 
```

这是为什么？简短的回答是 M 的实际值可能是 Monad 的子类，它没有类型参数（或者比 Monad 有更多的类型参数）。

因此，您可以表达的“最佳”类型是：

```
typedef R Lift<A, B, M extends Monad<A>, R extends Monad<B>>(M source, Func1<A, B> map); 
```

我的建议是不要尝试这个。这将更容易使用：

```
typedef Monad<B> Lift<A, B>(Monad<A> source, Func1<A, B> map); 
```

请注意，Dart 中的类型规则非常宽松，这将允许您使用 Monad 的任何子类。

# javascript - 创建一个链接 html 并使用 jQuery 执行操作？

> ID：15645997
> 
> 赞同：0
> 
> 时间：2013-03-26T19:41:54.833
> 
> 标签：javascript, jquery

我有一个 jquery，当您单击时执行一个操作`a.data`。问题是当我`a.data`用另一个函数创建几个时，它不执行操作。

我不明白为什么新的`a.data`不起作用？

这创造了新`a.data`的`divdata`

```
var data_html  = '<a class="data" href="#" value="'data.id'">' + ref.info + '</a>';
$(data_html).prependTo( $('#divdata') ); 
```

这会将动作带到相应的`a.data`

```
$('a.data').click( function (){
    $(this).attr('href');
    var idvalue = $(this).attr('value');
    idvalue *= 1;
    // aqui realizo  la acción
    console.log(idvalue);
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:44:26.397

您必须委托该事件，如下所示：

```
$('#divdata').on('click', 'a.data', function (){
    $(this).attr('href');
    var idvalue = $(this).attr('value');
    idvalue *= 1;
    // aqui realizo  la acción
    console.log(idvalue);
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:47:45.717

[http://api.jquery.com/on/](http://api.jquery.com/on/)您的绑定方法只绑定到现有元素。您需要使用 on 绑定到父元素才能绑定后续元素。

```
$("#divdata").on("click", "a.data", function(){
  // event stuff here
}); 
```