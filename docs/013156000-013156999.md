# StackOverflow 问答 13156000-13156999

# jquery - Fancybox 2.1.3 在 facebook 自定义选项卡中的位置

> ID：13156000
> 
> 赞同：3
> 
> 时间：2012-10-31T10:37:36.003
> 
> 标签：jquery, facebook, fancybox, facebook-javascript-sdk

我在 1500 像素高的 facebook 自定义标签画布中使用 Facybox 2.1.3。

我无法将 Fancybox 弹出窗口定位在用户可见屏幕的中心。

我不想用 top:2px 覆盖 CSS；等等，因为这意味着 facebook 画布底部的用户必须滚动到顶部。

任何援助将不胜感激。

我知道我可以访问 facebook 外部画布属性，但仅仅通过知识不足以解决它。

问候

# c# - DTS 事务失败：无法访问已处置的对象

> ID：13156002
> 
> 赞同：0
> 
> 时间：2012-10-31T10:37:42.497
> 
> 标签：c#, nhibernate, transactionscope, distributed-transactions

我们正在运行分布式事务，在极少数情况下我们会收到以下错误：

> System.ObjectDisposedException：无法访问已处置的对象。对象名称：“SqlDelegatedTransaction”。在 System.Data.SqlClient.SqlDelegatedTransaction.Rollback(SinglePhaseEnlistment enlistment) 在 System.Transactions.TransactionStateDelegatedAborting.EnterState(InternalTransaction tx) 在 System.Transactions.Transaction.Rollback() 在 System.Transactions.TransactionScope.InternalDispose() 在 System.Transactions .TransactionScope.Dispose()

当 TransactionScope 超出范围并且尚未在范围内调用 Complete() 时会发生错误。预期的行为将是事务以静默方式回滚。事务没有提交，所以我们不会在数据库中得到任何损坏的数据。另一方面，我还可以提到我们正在使用 nhibernate。程序流程如下：

```
 using (var transaction = new TransactionScope())
        {
            using (var session = _sessionManager.OpenSession())
            {
                // we have to wrap the invocation with an nhibernate transaction due to a dtc bug: http://www.mail-archive.com/nhibernate-development@googlegroups.com/msg02306.html
                using (ITransaction nhibernateTrans = session.Session.BeginTransaction())
                {
                    // code altering session data goes here
                    nhibernateTrans.Commit();
                }
            }
            transaction.Complete();
        } 
```

这可能在几个月内发生了一两次，所以我们并没有一直看到这种情况，一旦发生，我们就无法重现它。我们可以对服务执行具有相同值的相同命令，它会按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:04:57.743

NHibernate 中的 TransactionScope 存在一些尚未解决的线程问题。您的问题可能与以下之一相符： [https ://nhibernate.jira.com/secure/IssueNavigator.jspa?reset=true&jqlQuery=project+%3D+NH+AND+labels+%3D+TransactionScope](https://nhibernate.jira.com/secure/IssueNavigator.jspa?reset=true&jqlQuery=project+%3D+NH+AND+labels+%3D+TransactionScope)

# git - SVN 到 Git 迁移 - 未定义作者，但它是

> ID：13156005
> 
> 赞同：10
> 
> 时间：2012-10-31T10:37:51.450
> 
> 标签：git, svn, git-svn

以前也有人问过类似的问题（比如[这个](https://stackoverflow.com/questions/11037166/author-not-defined-when-importing-svn-repository-into-git)），但答案并没有为我解决。我的作者文件如下所示：

```
cmannett85 = cmannett85 <cmannett85@###>
cbamber85 = cmannett85 <cmannett85@###>
www-data = cmannett85 <cmannett85@###> 
```

我得到的错误是；

```
Author: cmannett85 not defined in users.txt file 
```

此错误发生在大约第 1500 次提交时，其他作者条目都很好，因此条目的基本结构必须正确。我已经在 SO 上看到的大多数问题都围绕着 SVN 用户名，它们前面/附加了一个空格，但正如您从粘贴的错误中看到的那样 - 没有多余的空格。

我还认为可能是我将一个用户名映射为一个相同的用户名，所以我更改了 Git 用户名，但没有任何区别。我什至尝试在 Windows 和 Unix 格式之间切换行结束，但同样没有变化。

我使用这个调用操作：

```
$ git svn clone https://subversion.assembla.com/svn/#### --authors-file=users.txt --no-metadata -s #### 
```

我尝试删除`--no-metadata`arg，但没有区别。谁能看到我哪里出错了？

**更新**

按照懒獾的建议，我跑了：

```
$ svn log --xml | grep author | sort -u | perl -pe 's/.>(.?)<./$1 = /' 
```

它返回这个：

```
<author>cbamber85</author>
<author>cmannett85</author>
<author>www-data</author> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-23T13:40:13.290

刚刚偶然发现这个问题并最终通过从以 UTF-8 文件编码的 authors.txt 文件中剥离字节顺序标记来解决该问题，从而使 Linux 将其视为纯文本 ASCII 文件而不是 UTF-8。

由于我的文件在 Windows 上作为 Powershell 输出开始生活，因此更普遍的正确答案是简单文本绝不是简单文本，这使得 Lazy Badger 的答案是最好的，因为它避免了掩盖这些差异的头痛。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T16:12:22.910

我想我找到了问题和解决方案：

我的 author.txt在将其转换为**ANSI后被编码为****UCS2 Little Endian**，文件大小下降到 50% 并且可以正常工作。

 **文件大小从 70KB 下降到 35KB，但我不认为这是解决方案。

我的 author.txt 是使用 Windows Active Directory 中的 powershell 脚本创建的。

我还将行尾从***CR LF***更改为***LF***，但您提到，您也已经尝试过。所以我认为这是一个字符编码问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-15T15:23:07.740

我刚刚遇到了与此处描述的相同的问题，结果证明是通过在 notepad++ 中创建一个新的 .txt 文件（原始作者文件是由我在其他地方找到的 powershell 命令生成的），然后复制原始文件的内容进入新的 .txt 文件，然后获取工作。

原来原始文件被编码为 UCS-2 Little Endian（如上），但 UTF-8 的默认编码有效。我不需要更改行尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T11:25:00.243

我敢肯定 -**在克隆之前**从纯 SVN 数据准备用户列表将是更防弹的方式

即类似的东西：

```
svn log --xml URL | grep "author" | sort -u | ...strip xml-tags here... 
```**

# java - 如何去除空间形式的xml布局背景。？

> ID：13156007
> 
> 赞同：0
> 
> 时间：2012-10-31T10:37:56.357
> 
> 标签：java, android

任何蓝色![在此处输入图像描述](../Images/6ca6e5d62cafce22bc9f5d8267008de5.png)线条显示的是背景图像。名字是蓝色背景。它位于gridview 和bottomheader 后面。

请告诉如何删除这个蓝线空间。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="@drawable/bluebackground" >

     <ImageView
         android:id="@+id/imageView1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_alignParentTop="true"
         android:layout_marginTop="48dp"
         android:src="@drawable/blackheader" />

     <EditText
         android:id="@+id/etxsearch"
         android:layout_width="300dp"
         android:layout_height="30dp"
         android:layout_alignParentLeft="true"
         android:layout_alignTop="@+id/imageView1"
         android:layout_marginLeft="10dp"
         android:layout_marginRight="10dp"
         android:layout_marginTop="5dp"
         android:background="@drawable/searchtext"
         android:textSize="18dp" />

     <GridView
         android:id="@+id/gvMain"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_above="@+id/img_bottomheader"
         android:layout_below="@+id/imageView1"
         android:background="#000000"
         android:horizontalSpacing="1dp"
         android:numColumns="3"
         android:scrollbars="vertical"
         android:smoothScrollbar="true"
         android:verticalSpacing="1dp" />

      <ImageView
         android:id="@+id/img_bottomheader"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:src="@drawable/bottom" />

       </RelativeLayout> 
```

空间显示在蓝色背景后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:39:27.993

尝试删除： android:layout_marginTop="48dp"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:54:57.230

我刚刚重新安排了您的两个视图 -`GridView`和“ImageView”（底部），并进行了微小的更改。检查以下代码是否有效：

```
 <ImageView
     android:id="@+id/img_bottomheader"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:src="@drawable/bottom" />

 <GridView
     android:id="@+id/gvMain"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:layout_above="@id/img_bottomheader"
     android:layout_below="@id/imageView1"
     android:background="#000000"
     android:horizontalSpacing="1dp"
     android:numColumns="3"
     android:scrollbars="vertical"
     android:smoothScrollbar="true"
     android:verticalSpacing="1dp" /> 
```

# xpath - 使用 contains() 和 concat() 函数比较属性而不是使用 = 运算符直接比较的重要性

> ID：13156009
> 
> 赞同：0
> 
> 时间：2012-10-31T10:38:02.150
> 
> 标签：xpath

比较属性值

```
<div class="asset-body"> 
```

函数 contains() 和 concat() 是否必须像这样使用

```
contains(concat(' ',@class,' '),' asset-body ') 
```

如帖子的[如何根据 XPath 中嵌套兄弟的值选择元素中所述？](https://stackoverflow.com/questions/4066062/how-to-select-an-element-based-on-the-value-of-a-nested-sibling-in-xpath)接受的答案。

或仅使用

```
@class='asset-body' 
```

足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:44:35.890

`class`好吧，如果您知道输入元素的属性中只使用了一个值，那么肯定`@class = 'asset-body'`就足够了。然而，(X)HTML 通常允许`class`属性值是一个以空格分隔的类名列表，现在随着 CSS 的广泛使用，使用各种类名并不少见，所以为了迎合这种情况，这样做`contains(concat(' ', @class, ' '), ' asset-body ')`是必要的. 因此，如果您控制输入并确定在您使用 XPath 检查的输入元素上只使用一个类值，则使用短表达式，否则使用长表达式。

# jquery - 防止鼠标按下时突出显示文本

> ID：13156010
> 
> 赞同：1
> 
> 时间：2012-10-31T10:38:03.393
> 
> 标签：jquery

我不想在拖动一些元素时突出显示元素，为此我这样做了

```
$('#object')
 .draggable()
 .mousedown(function(event) {
   event.preventDefault();
 }); 
```

但是现在我遇到了一个问题，我的其他元素的事件（例如模糊）没有调用。例如当焦点进入元素并且这个元素有模糊事件时，当我选择我的可拖动元素时，前一个元素的模糊事件没有调用。

我该如何处理。我也不知道我在 mousedown 事件中调用了哪个元素聚焦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:48:52.477

尝试：

```
$('#object').css('user-select','none').prop('unselectable','on').on('selectstart',false); 
```

# java - 堆积面积图，固定 y 轴标签宽度

> ID：13156012
> 
> 赞同：4
> 
> 时间：2012-10-31T10:38:07.043
> 
> 标签：java, charts, jfreechart

我正在创建一个 JFreeChart 堆积面积图。

我希望我的*y*轴标签的宽度是固定的，并且我不想随着宽度的增加而移动图表。请参阅解释问题的图像。

[![错误](../Images/1ab6fe0dde955cb475a78860c257d560.png)](https://i.stack.imgur.com/9260Z.jpg)

我面临与[JFreeChart 论坛](https://web.archive.org/web/20150608232351/http://www.jfree.org/phpBB2/viewtopic.php?t=16218)上发布的类似问题。根据论坛，它已修复，但尚未发布。有没有人知道它的解决方法。我们等不及下一个版本了，有没有人知道我们可以应用的 hack？

希望得到一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:16:59.617

一种可能的解决方案是覆盖图表范围轴的 findMaximumTickLabelWidth()。最大宽度可以硬编码为特定值，也可以作为最大宽度的最大值和计算的最大宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T20:37:19.137

还有另一种方法可以使图对齐。您可以在绘图的左侧、右侧顶部或底部保留一些空间来显示范围轴。

```
 AxisSpace space = new AxisSpace();
      space.setRight(50); //reserved space on the left side of the plot
      space.setLeft(50);
      plot.setFixedRangeAxisSpace(space);
      plot2.setFixedRangeAxisSpace(space); 
```

我知道，这不是多个地块的最佳解决方案。但是您可以快速解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:50:02.770

作为替代方案，请考虑 a `CombinedDomainCategoryPlot`，如图[所示](https://stackoverflow.com/a/1389045/230513)。A[在这里](https://stackoverflow.com/a/11895709/230513)`CombinedDomainXYPlot`显示。

# android - Ontouch事件不起作用

> ID：13156014
> 
> 赞同：0
> 
> 时间：2012-10-31T10:38:26.567
> 
> 标签：android, touch-event

Ontouchevent 不起作用，我不知道为什么，没有异常或错误，我很确定我的代码是正确的，但是当我触摸屏幕时没有响应。

基本上，下面的代码应该将图像设置为画布并允许您在其上绘画/绘制，我已将图像设置为背景，但它不会执行第二部分。

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.RectF;
import android.os.Bundle;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;
import android.widget.Toast;

public class ImgDisplay extends Activity {
    private String a;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_display);

 a =getIntent().getStringExtra(getString(R.string.app_name));
 Toast.makeText(this,a, Toast.LENGTH_LONG).show();

/**

 Uri myUri = Uri.parse(a);
 **/

 ImageView b=(ImageView) findViewById(R.id.image_view);
 b.setImageBitmap(BitmapFactory.decodeFile(a));
 SignatureView sign=new SignatureView(this,null);
sign.invalidate();
    }

    public class SignatureView extends ImageView  {
        Bitmap mBitmap = BitmapFactory.decodeFile(a);
        /** Canvas c = new Canvas(mBitmap);
**/
          private static final float STROKE_WIDTH = 5f;

          /** Need to track this so the dirty region can accommodate the stroke. **/
          private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

          private Paint paint = new Paint();
          private Path path = new Path();

          /**
           * Optimizes painting by invalidating the smallest possible area.
           */
          private float lastTouchX;
          private float lastTouchY;
          private final RectF dirtyRect = new RectF();
        private Context context;

          public SignatureView(Context context, AttributeSet attrs) {
            super(context, attrs);
            this.context=context;
            setOnTouchListener(this);
            paint.setAntiAlias(true);
            paint.setColor(Color.BLACK);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(STROKE_WIDTH);
          }

          /**
           * Erases the signature.
           */
          public void clear() {
            path.reset();

            // Repaints the entire view.
            invalidate();
          }

          @Override
          protected void onDraw(Canvas canvas) {
              canvas.drawBitmap(mBitmap,null,null);
              canvas.drawPath(path, paint);
          }

          @Override
          public boolean onTouchEvent(MotionEvent event) {
            float eventX = event.getX();
            float eventY = event.getY();

            switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                path.moveTo(eventX, eventY);
                lastTouchX = eventX;
                lastTouchY = eventY;
                // There is no end point yet, so don't waste cycles invalidating.
                return true;

              case MotionEvent.ACTION_MOVE:
              case MotionEvent.ACTION_UP:
                // Start tracking the dirty region.
                resetDirtyRect(eventX, eventY);

                // When the hardware tracks events faster than they are delivered, the
                // event will contain a history of those skipped points.
                int historySize = event.getHistorySize();
                for (int i = 0; i < historySize; i++) {
                  float historicalX = event.getHistoricalX(i);
                  float historicalY = event.getHistoricalY(i);
                  expandDirtyRect(historicalX, historicalY);
                  path.lineTo(historicalX, historicalY);
                }

                // After replaying history, connect the line to the touch point.
                path.lineTo(eventX, eventY);
                break;

              default:
                debug("Ignored touch event: " + event.toString());
                return false;
            }

            // Include half the stroke width to avoid clipping.
            invalidate(
                (int) (dirtyRect.left - HALF_STROKE_WIDTH),
                (int) (dirtyRect.top - HALF_STROKE_WIDTH),
                (int) (dirtyRect.right + HALF_STROKE_WIDTH),
                (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

            lastTouchX = eventX;
            lastTouchY = eventY;

            return true;
          }

          private void debug(String string) {
            // TODO Auto-generated method stub

        }

        /**
           * Called when replaying history to ensure the dirty region includes all
           * points.
           */
          private void expandDirtyRect(float historicalX, float historicalY) {
            if (historicalX < dirtyRect.left) {
              dirtyRect.left = historicalX;
            } else if (historicalX > dirtyRect.right) {
              dirtyRect.right = historicalX;
            }
            if (historicalY < dirtyRect.top) {
              dirtyRect.top = historicalY;
            } else if (historicalY > dirtyRect.bottom) {
              dirtyRect.bottom = historicalY;
            }
          }

          /**
           * Resets the dirty region when the motion event occurs.
           */
          private void resetDirtyRect(float eventX, float eventY) {

            // The lastTouchX and lastTouchY were set when the ACTION_DOWN
            // motion event occurred.
            dirtyRect.left = Math.min(lastTouchX, eventX);
            dirtyRect.right = Math.max(lastTouchX, eventX);
            dirtyRect.top = Math.min(lastTouchY, eventY);
            dirtyRect.bottom = Math.max(lastTouchY, eventY);
          }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:38:59.160

看到这个

```
 mPaint = new Paint();
  mPaint.setAntiAlias(true);
  mPaint.setDither(true);
  mPaint.setColor(Color.GREEN);
  mPaint.setStyle(Paint.Style.STROKE);
  mPaint.setStrokeJoin(Paint.Join.ROUND);
  mPaint.setStrokeCap(Paint.Cap.ROUND);
  mPaint.setStrokeWidth(5);

  relativelayout.addView(mView); 
```

这是示例绘制徒手和清除油漆[http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html](http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:42:04.060

您的代码非常完美，但您没有`SignatureView`在任何地方显示。

```
SignatureView sign=new SignatureView(this,null);
sign.invalidate(); 
```

您只需初始化该视图并使其无效。

需要在主布局中添加。或者`setContentView(sign);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:54:22.743

## 尝试这个：

```
 SignatureView sign=new SignatureView(this,null);
sign=(SignatureView) findViewById(R.id.image_view);
 sign.setImageBitmap(BitmapFactory.decodeFile(a));
sign.invalidate(); 
```

* * *

应该管用。基本上你没有将签名视图分配给 ImageView(R.id.image_view)。改用默认的 ImageView。

# macos - CMake - 如果更改则复制目录

> ID：13156015
> 
> 赞同：1
> 
> 时间：2012-10-31T10:38:32.337
> 
> 标签：macos, copy, cmake

如果目录的内容与目的地不同，我正在寻找一种复制目录的方法。有这个 copy_if_different 选项，但它仅适用于文件。我正在寻找一种递归方式。

到目前为止，这是我的代码：

```
ADD_CUSTOM_COMMAND(
                 TARGET ${PROJECT_NAME}
                 POST_BUILD
                 COMMAND ${CMAKE_COMMAND}
                 ARGS    -E copy_directory   "${PROJECT_SOURCE_DIR}/../folderA"  "${PROJECT_SOURCE_DIR}/release/Debug/${PROJECT_NAME}.app/Contents/"
                COMMENT "Copying Bundle Stuff"
              ) 
```

一个 unix 系统“唯一”的解决方案是可以的，因为我在 OSX 上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:15:33.270

对于 OS X，您可以改用内置命令`rsync`：

```
ADD_CUSTOM_COMMAND(
   TARGET ${PROJECT_NAME}
   POST_BUILD
   COMMAND rsync
   ARGS -r
      "${PROJECT_SOURCE_DIR}/../folderA/"
      "${PROJECT_SOURCE_DIR}/release/Debug/${PROJECT_NAME}.app/Contents/"
   COMMENT "Copying Bundle Stuff") 
```

另请参阅[rsync 文档](https://rsync.samba.org/documentation.html)。

# netbeans - Netbeans 中的重复 JavaFX 项目

> ID：13156016
> 
> 赞同：1
> 
> 时间：2012-10-31T10:38:34.120
> 
> 标签：netbeans, javafx-2

我想在 Netbeans 中复制一个 JavaFX 项目作为一种“穷人的版本控制”。

我将项目复制到另一个文件夹中。现在，当我尝试创建一个新项目时，我看不到“从现有源创建 JavaFX 项目”选项（常规 Java 项目存在的替代方案）。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:46:55.477

或者右键单击 Netbeans 中的项目并选择“*复制...* ”。

# google-apps-script - 超时错误，当尝试通过谷歌脚本使用电子邮件审核 Api 下载邮箱时

> ID：13156022
> 
> 赞同：0
> 
> 时间：2012-10-31T10:39:10.090
> 
> 标签：google-apps-script, google-email-audit-api

我正在使用电子邮件奥迪 API 以加密形式下载用户的邮箱。当我将代码写入谷歌脚本并尝试运行时，它会给出错误 504：超时错误。当我使用 OAuth 游乐场执行此操作时，我成功下载了邮箱。 .所以请给我一些建议来解决这个问题。

```
Code :
function downloadMailBox(user){
var user='user@mydomain.com'
var base='https://apps-apis.google.com/a/feeds/compliance/audit/'
var fetchArgs=googleOAuth_('google',base)
var userID=user.split('@')[0]
//Logger.log(userID)
var rawXml='<atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:apps="http://schemas.google.com/apps/2006">'+
    '<apps:property name="packageContent" value="FULL_MESSAGE"/></atom:entry>'
    fetchArgs.payload=rawXml
var uriForMailbox=base+'mail/export/mydomain.com/'+userID
UrlFetchApp.fetch(uriForMailbox,fetchArgs)
}

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("mydomain.com");
  oAuthConfig.setConsumerSecret(consumersecret);
  return {oAuthServiceName:name, 
  oAuthUseToken:"always",
  contentType:'application/atom+xml',
  method:'POST'
  }; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:54:10.923

After how much time, you are getting the error? Google has script execution time limit which is around 5 minutes. Any script, which will take time longer than this will time out. There are other limits as well. You can check the details on [Apps Script Dashboard](https://script.google.com/dashboard).

You need to optimize the script or break your operation in small batches. Here are some tips to optimize google script. [Link#1](https://developers.google.com/apps-script/guide_common_tasks) [Linkk#2](http://googleappsscript.blogspot.com.br/2010/06/optimizing-spreadsheet-operations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:48:15.233

我找到了一个解决方案...我刚刚将上面的代码写入 try-catch 块..随着超时错误的到来，它会在我再次调用函数 downloadmailBox() 的地方捕获块。（有时脚本执行正确，有时会给出错误）。它会一次又一次地调用这个函数直到成功。可能它会在 2 或 3 次尝试内获得成功......所以通过这种方式，可以解决超时问题。

# sql - 不同数字的两种不同格式

> ID：13156023
> 
> 赞同：1
> 
> 时间：2012-10-31T10:39:10.897
> 
> 标签：sql, formatting

是否有任何简单而干净的解决方案可以为不同的数字设置两种不同的格式。
例如，0.00 应为 0，所有其他数字应为 x.xxx。

到目前为止我的解决方案：

```
select decode(to_char(0.000, '90D999'),'0.000', 0, (to_char (0.000, '99990D99999'))) from dual 
```

我不高兴，因为我认为有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:35:20.753

您也可以使用 CASE-WHEN...

```
SELECT (CASE WHEN MY_VALUE=0 THEN '0' ELSE to_char(MY_VALUE, '90D999') END) 
FROM DUAL 
```

我认为这更具可读性 - 但这是主观的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:45:22.567

您可以使用 simple-case-expression 使其更简洁：

```
select case my_value when 0 then '0' else to_char(my_value, '90D999') end
from dual; 
```

请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)

# c# - 在.Net，SQL Server中实现父子对象

> ID：13156024
> 
> 赞同：0
> 
> 时间：2012-10-31T10:39:11.870
> 
> 标签：c#, asp.net, .net, sql

我开发了一个带有时间表对象的 Web 应用程序。该对象具有一个列表作为属性。在 SQL Server 中，这反映在 2 个表中，即 Timesheets 和 TimesheetEntries，其中 TimesheetEntries 具有指向 Timesheets 表的 PK（Id 自动编号）的外键。目前，时间表对象显示在网格上，用户可以在其中插入和修改条目并最终保存它。

在保存时间表时，我删除了所有时间表条目，然后重新创建它们。当然，每次用户保存时间表时，都会将 TimesheetEntries 的自动编号字段向上推。

这是实现这一目标的最佳方式吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:46:32.073

您应该更新时间表条目而不是删除，然后重新创建所有条目。使用您的主键，很容易知道哪些需要更新。

此外，您可以通过使用[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)（例如[Entity Framework](http://msdn.microsoft.com/en-US/data/ef)或[NHibernate](http://nhforge.org/) ）来自动执行很多操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:48:44.780

除了一些额外的工作，你做事的方式没有太大的问题。删除和重新创建子对象是一种常见的方法。

不得不说，自动递增的数字被推高实际上并不重要。您的所有时间表条目都应该可以通过相应的时间表外键检索。

您不应该依赖自动生成的数字。ID 字段上升应该没关系。您真正的解决方案是找到一种一致的方法来正确检索它们，而不管代理键可能是什么。

**编辑**

回应用户的评论。

您仍然会为 PK 和 FK 使用自动编号，但您应该将其与唯一标识大东西的方法结合起来，这通常是对象图顶部的东西。

我通过在我的数据库中包含一个别名列来实现这一点。

这是一个独特的 varchar 约束，它存在于我可能想要显式查找的任何内容上。

考虑以下示例。

```
CREATE TABLE OrderTypes
(
  Id INT IDENTITY(1,1) PRIMARY KEY,
  Name varchar(100),
  Alias varchar(30),
  Active bit,
  ...
) 
```

现在我不想`OrderType`按 Id 查找，因为如果我不得不从头开始重建数据库，那可能会改变。

我也不想`OrderType`按名字查找。如果有人通过 CMS 功能更改订单类型怎么办？

Alias 概念允许我为每个订单类型提供一个短名称，该名称**在任何管理屏幕上**都无法编辑。

继续这个`OrderType`例子，我可能给采购订单一个别名“ `purchaseorder`”和销售订单和别名“ `salesorder`”。

当我想获取与销售订单相关的 OrderType 行时，我可以使用：-

```
SELECT * FROM OrderTypes WHERE Alias = 'salesorder' 
```

此时，您的查询具有自动生成的 ID，因此您可以根据该值进行进一步的查询。

```
SELECT * FROM Orders WHERE OrderTypeId = <that value I just safely derived> 
```

这比对自动生成的 ID 进行硬编码要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:47:41.027

自动递增标识列的值与您的业务领域无关。它纯粹用于数据结构中的唯一性和逻辑关系。所以，是的，这个字段正在增加是很好的。无论如何，您的关系发生在 TimeSheetEntry 的 FK 和 TimeSheet PK 之间。

与其删除并重新插入这些记录，不如更新它们。我不确定您的需求/业务问题，因此无法进一步评论。

# vba - 设置范围属性

> ID：13156028
> 
> 赞同：0
> 
> 时间：2012-10-31T10:39:30.090
> 
> 标签：vba, excel

您好，我已经编写了用于设置范围属性的代码，并且它可以正常工作一段时间。下面的例子是我的代码。

```
row_no = Ydim1 * matrix - Ydim1 + matrix
Set rng1 = Range("A" & row_no & ":" & c & row_no).Find(What:=somevar, LookIn:=xlValues,      Lookat:=xlWhole) 
```

如果 Ydim1 等于 72 并且矩阵等于 1 然后行等于 1 并且 c =“EO” 那么如果 ydim1 等于 74 并且矩阵 =1 那么它也将正常工作 row_no =1 仅但 rng1 没有显示

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:01:56.170

欢迎调试。

采用

```
debug.print "A" & row_no & ":" & c & row_no 
```

检查您的范围是否设置正确，并检查所有行号是否 > 0。
也使用

```
debug.print somevar 
```

检查您的查找值。
在这种特殊情况下，可以在调试模式下使用 .select 来直观地检查您的范围。

您可以使用即时窗口 cmd 获得类似的结果

```
print <variablename>
? <variablename> 'This is the same, represented by a question mark 
```

在调试模式下，在要调试的行之后有一个断点）。

如果您遵循这些步骤，我非常肯定您会找到问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:55:46.337

我不确定这是否可以帮助您，但如果您使用 Offset 属性，它不会更简单，比如

```
 Set rng1 = Range(Range("A1").Offset(row_no,0), Range("EO").Offset(rowno,0)).Find(What:=somevar, LookIn:=xlValues,Lookat:=xlWhole) 
```

# c - 用 C 测量时间

> ID：13156031
> 
> 赞同：20
> 
> 时间：2012-10-31T10:39:39.237
> 
> 标签：c, time, matrix, multiplication

我正在尝试测量 C（矩阵乘法）中的一些活动，并注意到我应该做这样的事情：

```
clock_t start = clock();
sleep(3);
clock_t end = clock();
double elapsed_time = (end - start)/(double)CLOCKS_PER_SEC;
printf("Elapsed time: %.2f.\n", elapsed_time); 
```

输出是：

```
Elapsed time: 0.00. 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-31T10:41:52.907

`clock`估计程序使用的 CPU 时间；那是 CPU 一直忙于执行属于您的程序的指令的时间。`sleep`不执行任何工作，因此它不会占用明显的 CPU 时间（即使它需要挂钟时间）。

如果要测量挂钟时间，请使用`time`：

```
time_t start = time(NULL);
sleep(3);
printf("%.2f\n", (double)(time(NULL) - start)); 
```

将打印一个接近三的数字。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-08-19T09:05:46.057

作为旁注，如果您想以更精确的方式（毫秒）测量执行时间，[`time`](http://man7.org/linux/man-pages/man2/time.2.html)则不够精确。您可以[`gettimeofday`](http://man7.org/linux/man-pages/man2/gettimeofday.2.html)改用：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/time.h>

int main() {
    long start, end;
    struct timeval timecheck;

    gettimeofday(&timecheck, NULL);
    start = (long)timecheck.tv_sec * 1000 + (long)timecheck.tv_usec / 1000;

    usleep(200000);  // 200ms

    gettimeofday(&timecheck, NULL);
    end = (long)timecheck.tv_sec * 1000 + (long)timecheck.tv_usec / 1000;

    printf("%ld milliseconds elapsed\n", (end - start));

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T10:43:08.423

您必须使用`time_t start = time(NULL);`and`time_t end = time(NULL);`来获得正确的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:13:25.497

使用Orwells 回答中描述的[QueryPerformanceFrequency()或使用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx)[GetSystemTimeAsFileTime()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx)函数。后者的粒度为 100 ns，但不会以该速率递增。其增量取决于底层硬件和[多媒体定时器分辨率](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743626%28v=vs.85%29.aspx)的设置。请记住，返回的频率`QueryPerformanceFrequency()`被视为常数。但是，由于它是由硬件生成的，因此它也有偏移和时间漂移。通过使用来测量时间周期`QueryPerformanceCounter()`通常会伴随着每秒许多微秒的误差。我已经给出了[这个](https://stackoverflow.com/a/12971720/1504523)和[这个](https://stackoverflow.com/a/11470617/1504523)关于类似问题的答案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T10:53:05.297

如果您不关心绑定到 Windows，您可以尝试高分辨率计时器。它比 time() 精确得多，因为它使用 UNIX 格式，所以它只有一秒的精度。

```
#include <iostream>
#include <windows.h>

__int64 countspersec = 0;
double secpercount = 0.0;
__int64 starttime = 0;
__int64 curtime = 0;

int main() {

    // Get current time, and determine how fast the clock ticks
    QueryPerformanceCounter((LARGE_INTEGER*)&starttime);
    QueryPerformanceFrequency((LARGE_INTEGER*)&countspersec);
    secpercount = 1.0/(double)countspersec;

    /* calculate something */

    // Standard end-start stuff, account for clock speed
    QueryPerformanceCounter((LARGE_INTEGER*)&curtime);
    std::cout << "Time needed: " << (curtime-starttime)*secpercount << " sec\n";
    return 0;
} 
```

# html - 从内部更改 iFrame 属性和 CSS

> ID：13156036
> 
> 赞同：0
> 
> 时间：2012-10-31T10:40:04.557
> 
> 标签：html, css, iframe

是否可以从 src 文件中更改 iframe CSS 或属性？

我想制作一个不带样式的 iframe，以便 any1 可以复制该代码并将其粘贴到他们的网站上...类似于提要...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:36:21.750

所有 iframe css 属性

```
iframe{
margin: 0;
madding: 0;
border: none;
width: value;
height: value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:45:49.723

不，不是。您应该从主页更改 CSS 属性。

```
iframe {
  border: 0; /* this will work in the main page, but not in the src file */
} 
```

# sql - 在 Sql Server 中加快将日期间隔除以分钟

> ID：13156038
> 
> 赞同：2
> 
> 时间：2012-10-31T10:40:16.200
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要将一些日期间隔除以分钟。（例如，2012-01-01 10:00 - 2012-01-01 10:00 间隔应分为 2012-01-01 10:01、2012-01-01 10:02、... 2012-01 -01 10:10)。例如，有一张桌子

```
CREATE TABLE [dbo].[Events](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [EventStart] [datetime] NOT NULL,
    [EventEnd] [datetime] NOT NULL,
    [Amount] [float] NOT NULL,
 CONSTRAINT [PK_Events] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

这张桌子被填满了

```
DECLARE @i integer = 0;
DECLARE @initial_date datetime = '2012-01-01';

WHILE @i < 50000
BEGIN
    INSERT INTO [Events] (EventStart, EventEnd, Amount) VALUES (DATEADD(MINUTE, 10*@i, @initial_date), DATEADD(MINUTE, 10*(@i + 1), @initial_date), @i);
    SET @i = @i + 1;
END 
```

因此，我们有许多 10 分钟的间隔。

要将其除以分钟，我使用以下递归 CTE：

```
DECLARE @start_date datetime = '2012-01-01';
DECLARE @end_date datetime = '2013-01-02';

WITH Date_Ranges (StatDate, Amount, IntervalStart, CurrentMinute) AS (
  SELECT 
    DATEADD(MINUTE, 0,  ev.EventStart) AS StatDate, ev.Amount, ev.EventStart AS IntervalStart, 1 AS CurrentMinute
  FROM [Events] ev
  WHERE ev.EventStart BETWEEN @start_date AND @end_date
  UNION ALL
  SELECT 
    DATEADD(MINUTE, CurrentMinute, ev.EventStart), ev.Amount, ev.EventStart AS IntervalStart, CurrentMinute + 1
  FROM [Events] ev
  INNER JOIN Date_Ranges ranges ON (ranges.IntervalStart = ev.EventStart AND 
    ranges.StatDate >= ev.EventStart AND 
    ranges.StatDate < ev.EventEnd)
    WHERE DATEADD(MINUTE, CurrentMinute, ev.EventStart) BETWEEN @start_date AND @end_date AND
        ev.EventStart BETWEEN @start_date AND @end_date
) 

SELECT *
FROM Date_Ranges --ORDER BY StatDate 
```

主要问题是在大量数据上执行此递归 CTE 太慢。

那么，我怎样才能加快速度呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:26:09.823

这将在大约 1/2 的递归 CTE 时间内返回所有 550,000 行。

```
DECLARE @start_date datetime = '2012-01-01'; 
DECLARE @end_date datetime = '2013-01-02';

SELECT  DATEADD(MINUTE, x.number, ev.EventStart) AS StartDate, 
        ev.Amount, 
        ev.EventStart as IntervalStart, 
        x.number as CurrentMinute
FROM    master.dbo.spt_values x
CROSS JOIN Events ev
WHERE   x.type = 'P'        
AND     x.number <= DATEDIFF(MINUTE, ev.EventStart, ev.EventEnd)
AND     ev.EventStart BETWEEN @start_date and @end_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:55:13.710

我认为最快的一组桶将是一张桌子。创建一个包含 10 分钟存储桶的表，填充它，然后加入它。这完全避免了递归，并利用了 SQL dbms 真正擅长的一件事——连接。

10 年的 10 分钟存储桶只有 50 万行。

当您处理诸如物料清单之类的东西时，CTE 中的递归是一件好事。但它并不总是适合替代桌子。

* * *

我创建了一个包含 10 年的 10 分钟存储桶表。（这大约是 4 兆字节的数据。我没有尝试计算磁盘索引和行开销需要多少。）然后我创建了一个包含 2000 万个随机时间戳的测试数据表，所有这些数据都在与存储桶表相同的 10 年内.

添加适合问题的索引后，测试系统在大约 100 毫秒内“存储”随机一天的数据。（没有调整的 PostgreSQL dbms，运行在一台 5 年前的戴尔计算机上，具有 1 gig 的 RAM。我在这里使用的是 Linux 系统，所以我无法测试 SQL Server 本身。不过，我希望得到类似的结果。 )

# wpf - WPF 的 MVVM 的简单定义

> ID：13156040
> 
> 赞同：2
> 
> 时间：2012-10-31T10:40:20.470
> 
> 标签：wpf, design-patterns, mvvm

WPF的MVVM设计模式中Model、View、ViewModel对象的基本定义是什么？他们的职责是什么，他们每个人应该做什么和不应该做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T10:40:20.470

**模型：**

1.  **代表数据**。
2.  实体。
3.  模型类是封装应用程序数据和业务逻辑的**非可视类。**
4.  他们负责管理应用程序的数据，并通过封装所需的业务规则和数据验证逻辑来​​确保其一致性和有效性。
5.  模型类**不直接引用视图或视图模型**类，**也不依赖于它们的实现方式**。
6.  模型类通常通过和接口**提供属性和集合更改通知**事件。`INotifyPropertyChanged``INotifyCollectionChanged`
7.  这使它们可以轻松地在视图中绑定数据。
8.  表示对象集合的模型类通常派生自`ObservableCollection<T>`该类。
9.  模型类通常通过`IDataErrorInfo`或`INotifyDataErrorInfo`接口提供数据验证和错误报告。
10.  模型类通常与封装数据访问和缓存的服务或存储库结合使用。
11.  不需要知道它从哪里获取数据，即从 WCF 服务获取数据。WCF RIA 服务等
12.  可能包含验证。

**看法：**

13.  视图是一个**可视元素**，例如窗口、页面、用户控件或数据模板。
14.  视图定义视图中包含的控件及其外观、视觉布局和样式。
15.  视图通过其 DataContext 属性**引用视图模型。**
16.  视图中的控件是**绑定到****ViewModel**公开的属性和命令的数据。
17.  视图可以自定义视图和视图模型之间的数据绑定行为。例如，视图可以使用值转换器来格式化要在 UI 中显示的数据，或者它可以使用验证规则来向用户提供额外的输入数据验证。
18.  视图定义和处理 UI 视觉行为，例如可能由视图模型中的状态更改或通过用户与 UI 的交互触发的动画或转换。
19.  视图的代码隐藏可以定义 UI 逻辑以实现在 XAML 中难以表达或需要直接引用视图中定义的特定 UI 控件的视觉行为。

**视图模型：**

20.  ViewModel 是一个**非可视类**，不派生自任何 WPF 或 Silverlight 基类。
21.  它封装了支持应用程序中的用例或用户任务所需的**表示逻辑。**
22.  ViewModel 可独立于视图和模型进行测试。
23.  ViewModel 通常**不直接引用视图**。它将具有绑定到视图的 UI 友好实体、UI 状态、操作和公共属性。
24.  它**实现了视图可以数据绑定的属性和命令**。
25.  它通过和接口通过更改通知事件**通知视图任何状态更改。**`INotifyPropertyChanged``INotifyCollectionChanged`
26.  使用各种命令与 View 交互。
27.  视图模型**协调视图与模型的交互**。
28.  它可以转换或操作数据，以便视图可以轻松地使用它，并且可以实现模型上可能不存在的其他属性。
29.  它还可以通过`IDataErrorInfo`或`INotifyDataErrorInfo`接口实现数据验证。
30.  视图模型可以定义视图可以直观地向用户表示的逻辑状态。
31.  调用服务以在 MVVM 三元组之外进行通信。

来源：[http ://code.msdn.microsoft.com/Design-Patterns-MVVM-Model-d4b512f0](http://code.msdn.microsoft.com/Design-Patterns-MVVM-Model-d4b512f0)

# php - 将原始推文数据转换为 PHP 关联数组

> ID：13156043
> 
> 赞同：0
> 
> 时间：2012-10-31T10:40:37.313
> 
> 标签：php, json, twitter

我有以下使用 Twitter API 以 JSON 格式抓取的推文数据：我想将其存储在 mysql 或其他数据库中以进行进一步处理，我应该怎么做才能将其存储在某个关系数据库中。

```
{u'iso_language_code': u'en', 
'to_user_name': None, 
'to_user_id_str': u'0', 
'profile_image_url_https': u'https://si0.twimg.com/profile_images/1188223217/aoa-logo_normal.jpg', 
'from_user_id_str': u'225222094', 
'text': u'CoS: Live Review: Mission of Burma at Chicago\u2019s Lincoln Hall (9/29) http://t.co/cjeSqimv #axisofaudio', 
'from_user_name': u'Axis Of Audio', 
'profile_image_url': u'http://a0.twimg.com/profile_images/1188223217/aoa-logo_normal.jpg', 
'id': 252638989289398273L, 
'to_user': None, 
'source': u'&lt;a href=&quot;http://dlvr.it&quot;&gt;dlvr.it&lt;/a&gt;', 
'id_str': u'252638989289398273', 
'from_user': u'axisofaudio', 
'from_user_id': 225222094, 
'to_user_id': 0, 
'geo': None, 
'created_at': u'Mon, 01 Oct 2012 05:20:03 +0000', 
'metadata': {u'result_type': u'recent'} 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:48:59.587

要将其转换为数组，您可以使用[json_decode](http://uk3.php.net/manual/en/function.json-decode.php)，快速示例：

```
<?php
  $feed = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitter&count=10&include_rts=t";
  $feedContent = file_get_contents($feed);
  $feedContent = json_decode($feedContent, true);
  echo '<pre>';
  print_r($feedContent);
  echo '</pre>'; 
```

但是，您不能只将数组存储在数据库中，因此要么将 json 数据存储在数据库中，或者最好在将数组添加到数据库之前对其进行[序列化。](http://uk1.php.net/manual/en/function.serialize.php)

# iphone - 核心绘图条形图动画

> ID：13156045
> 
> 赞同：-3
> 
> 时间：2012-10-31T10:40:41.640
> 
> 标签：iphone, animation, core-animation, core-plot

嗨，我如何实现带有动画的成长条形图？我只开始使用 Core Plot，所以我几乎不需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:27:58.800

每个 Core Plot 情节都是一个 Core Animation `CALayer`。您可以使用标准技术为绘图设置动画，例如，将其淡入或将大小从零拉伸到全高。

# wpf - 数据库优先和 Wpf 实体框架验证

> ID：13156048
> 
> 赞同：2
> 
> 时间：2012-10-31T10:41:01.680
> 
> 标签：wpf, entity-framework, validation, data-annotations

我需要在 c-sharp wpf 桌面应用程序中验证一些用户输入。我正在使用具有数据库优先方法的实体框架。这是 Entity 框架从数据库生成的类：

```
namespace TestValidation
{
    using System;
    using System.Collections.Generic;

    public partial class person
    {
        public string Name { get; set; }
        public string Surname { get; set; }
    }
} 
```

我正在尝试使用带有 DataAnnotations 的伙伴类来实现验证：

```
using System.ComponentModel.DataAnnotations;

    namespace TestValidation
    {
        [MetadataType(typeof(person_validation))]
        public partial class person
        {
            public class person_validation
            {
                [Required]
                public string Name { get; set; }
            }
        }
    } 
```

这是我的 xaml 表单：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:local="clr-namespace:TestValidation" mc:Ignorable="d" x:Class="TestValidation.MainWindow"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded_1">
    <Window.Resources>
        <CollectionViewSource x:Key="personViewSource" d:DesignSource="{d:DesignInstance {x:Type local:person}, CreateList=True}"/>
    </Window.Resources>
    <Grid>
        <Grid x:Name="grid1" DataContext="{StaticResource personViewSource}" HorizontalAlignment="Left" Margin="129,95,0,0" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Label Content="Name:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="0" VerticalAlignment="Center"/>
            <TextBox x:Name="nameTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="0" Text="{Binding Name, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
        </Grid>
        <Button Content="Button" HorizontalAlignment="Left" Margin="162,217,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>

    </Grid>
</Window> 
```

属性“名称”的验证不起作用。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:19:20.053

从[这篇](http://blogs.infosupport.com/sharing-validation-code-between-a-wpf-client-a-wcf-service-and-entity-framework-4-1-using-data-annotations/)文章：

> 在 WPF 中，与 Silverlight 不同的是，组件 (DataGrid) 不会自动读取数据注释。您必须实现 IDataErrorInfo 接口并使用数据注释手动验证。

# 64-bit - 在 x64 上的 IIS 中出现 BadImageFormatException

> ID：13156053
> 
> 赞同：4
> 
> 时间：2012-10-31T10:41:12.040
> 
> 标签：64-bit, iis-7.5, badimageformatexception

我正在使用 Windows 7 x64。启动 MVC 应用程序时出现 BadImageFormatException。如果它在启用了 32 位应用程序的应用程序池中运行，则不会引发异常。看起来加载 global.asax 是个问题。我启用了融合日志记录 (HKLM\software\Microsft\Fusion!EnableLog) 注册表设置。这是日志：

```
 === Pre-bind state information ===
LOG: User = NT AUTHORITY\SYSTEM
LOG: Where-ref bind. Location = C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\spl.sim.mvc\5802065c\a2782d40\App_global.asax.olejmmua.dll
LOG: Appbase = file:///C:/Spl/SimSvn4.5/Source/Spl.Sim.Mvc/
LOG: Initial PrivatePath = C:\Spl\SimSvn4.5\Source\Spl.Sim.Mvc\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: Using application configuration file: C:\Spl\SimSvn4.5\Source\Spl.Sim.Mvc\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/spl.sim.mvc/5802065c/a2782d40/App_global.asax.olejmmua.dll.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated. 
```

使用不同的构建配置，结果如下：

构建 x64、32 位应用程序池 false：错误

构建 x86，32 位应用程序池错误：错误

构建 AnyCPU，32 位应用程序池 false：错误

构建 x64、32 位应用程序池 true：错误

构建 x86，32 位应用程序池 true：OK

构建 AnyCPU，32 位应用程序池 true：OK

IIS 快递：好的

如何找到 64 位配置中使用的 32 位问题 dll？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:46:00.510

I found the problem. I used Instrumentation for profiling. This added the following lines to the web.config:

```
<dependentAssembly>
    <assemblyIdentity name="Microsoft.VisualStudio.Enterprise.AspNetHelper" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
    <codeBase version="11.0.0.0" href="file:///C:/Program%20Files%20(x86)/Microsoft%20Visual%20Studio%2011.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.AspNetHelper.DLL" />
  </dependentAssembly> 
```

After removing this dependentAssembly from the web.config section the program is working as expected. I also removed the `assemblyPostProcessorType` attribute from the `compilation` element

# sql - PostgreSQL 中的产品聚合

> ID：13156055
> 
> 赞同：4
> 
> 时间：2012-10-31T10:41:19.213
> 
> 标签：sql, postgresql, aggregate

我尝试在 PostgreSQL 中为产品 (*) 创建一个聚合。我的行的字段类型是“双精度”

所以，我试过：

```
CREATE AGGREGATE nmul(numeric)
(
   sfunc = numeric_mul,
   stype = numeric
); 
```

当我启动查询时，结果：

```
ERROR:  function nmul(double precision) does not exist
LINE 4: CAST(nmul("cote") AS INT), 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-08-23T14:36:24.230

我从一个非常聪明的人那里找到了一个解决方案，他意识到你可以使用对数来实现这一点（[归功于他](https://www.postgresql.org/message-id/gtmhfi%24u26%242%40reversiblemaps.ath.cx)）：

```
select exp(sum(ln(x))) from generate_series(1,5) x;
 exp 
-----
 120
(1 row) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T10:48:42.950

将您的输入从`double precision`( `float8`) 转换为`numeric`，或定义`double precision`聚合的风格。

您的聚合工作正常：

```
regress=> CREATE AGGREGATE nmul(numeric)
regress-> (
regress(>    sfunc = numeric_mul,
regress(>    stype = numeric
regress(> );

regress=> SELECT nmul(x) FROM generate_series(1,100) x;
                                                                              nmul                                                                              
----------------------------------------------------------------------------------------------------------------------------------------------------------------
 93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000
(1 row) 
```

问题是您的查询：

```
regress=> SELECT nmul(x::float8) FROM generate_series(1,100) x;                                                                                                                
ERROR:  function nmul(double precision) does not exist                                                                                                                         
LINE 1: SELECT nmul(x::float8) FROM generate_series(1,100) x;                                                                                                                  
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts. 
```

您可以定义`float8`聚合的版本（`float8`是 的同义词`double precision`）：

```
regress=> CREATE AGGREGATE nmul(double precision)
(
   sfunc = float8mul,
   stype = float8
);

regress=> SELECT nmul(x::float8) FROM generate_series(1,100) x;
         fmul          
-----------------------
 9.33262154439441e+157
(1 row) 
```

`numeric`如果要保留值的完整精度，或者在聚合之前强制转换，例如：

```
CAST(nmul(CAST("cote" AS numeric)) AS INT) 
```

或特定于 PostgreSQL 的速记转换：

```
nmul("cote"::numeric)::integer 
```

请注意，`integer`当您使用这些产品聚合时，它会很快溢出：

```
regress=> SELECT nmul(x)::integer FROM generate_series(1,12) x;
   nmul    
-----------
 479001600
(1 row)

regress=> SELECT nmul(x)::integer FROM generate_series(1,13) x;
ERROR:  integer out of range
regress=> 
```

所以你很可能还是想坚持下去`numeric`。

# plugins - Cordova：将数据从插件发送回主 CordovaView 的最佳方式是什么？

> ID：13156061
> 
> 赞同：1
> 
> 时间：2012-10-31T10:41:46.017
> 
> 标签：plugins, cordova

我需要将数据/对象从 Cordova 插件发送回主 Cordova 视图。这是为了更改 ActionBar 标题等。

要走的路是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:55:07.953

返回[PluginResult](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)是可接受的方法。您的方法的成功回调将使用您通过 PluginResult 发回的数据调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-12T08:26:31.903

我已经编写了工作代码来将数据从 Cordova 发送到 CordovaPlugin，反之亦然。

***安卓代码***

```
public class CustomPlugin extends CordovaPlugin {
  @Override
  public boolean execute(String action, JSONArray args, CallbackContext             callbackContext) throws JSONException {

    Log.d(TAG, action); //doPluginAction is printed
    Log.d(TAG, args.getString(0));//parameter is printed

    PluginResult result = new PluginResult(PluginResult.Status.OK, "here you can also send you message to app from plugin"); // You can send data, String, int, array, dictionary and etc
    result.setKeepCallback(false);
    callbackContext.sendPluginResult(result);

    return true;
  }
} 
```

***iOS 代码***

```
//CustomPlugin.h file
#import <Cordova/CDVPlugin.h>
#import <Foundation/Foundation.h>

@interface CustomPlugin : CDVPlugin
-(void) doPluginAction:(CDVInvokedUrlCommand*) command;
@end

//CustomPlugin.m file
#import "CustomPlugin.h"
@implementation CustomPlugin
-(void) doPluginAction:(CDVInvokedUrlCommand*) command {
    CDVPluginResult* result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:"here you can also send you message to app from plugin"];// You can send data, String, int, array, dictionary and etc
    [self.commandDelegate sendPluginResult:result callbackId:command.callbackId];
}
@end 
```

***插件js文件的代码***

```
www/CustomPlugin.js
var exec = require('cordova/exec');
exports.callPluginMethod = function (parameter, success, error) {
    exec(success, error, “CustomPlugin”, "doPluginAction", [parameter]);
}; 
```

***调用插件和完成块处理：***

```
cordova.plugins.CustomPlugin.callPluginMethod("parameter", (success: any) => {
    console.log(success);
},
(error:any) => {
    console.log(error);
}) 
```

# mysql - 我的选择查询删除重复行

> ID：13156064
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:41:53.223
> 
> 标签：mysql, sql

我创建了这个选择查询来获取一些行......它的工作。但我的问题是我需要从查询中删除重复的行...

这是我的查询：

```
SELECT tcs.tutor_id, tcs.category_id, tcs.subject_id, s.subjects, t.tutor_name, t.tutor_code
FROM tutor_category_subject as tcs
INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
WHERE s.subjects LIKE '%business%'; 
```

这是它的输出：

```
 +----------+-------------+------------+------------------+-------------------+-----------+ 

| tutor_id | category_id | subject_id | subjects         | tutor_name        | tutor_code|

+----------+-------------+------------+------------------+-------------------+-----------+

|        1 |           6 |         37 | Business Studies | Tharanga Nuwan    |      1250 |
|        3 |           6 |         37 | Business Studies | Kumara            |      1252 | 
|       15 |           4 |         11 | Business & Accou | Tharanga Nuwan    |      1264 | 
|       15 |           6 |         37 | Business Studies | Tharanga Nuwan    |      1264 |
|       16 |           5 |         11 | Business & Accou | Kasun Kalhara     |      1265 | 
|       16 |           6 |         37 | Business Studies | Kasun Kalhara     |      1265 | 
```

在这里，您可以看到导师 ID 在我的查询中重复。我需要在一行中选择导师的所有科目，以逗号分隔。

例如：（商业与会计研究，商业研究）像这样..

那么有人可以告诉我在我的选择查询中我需要做什么吗？

谢谢你。

这是我期待的结果

```
+----------+-------------+------------+-------------------------------------------------+-----------------------+------------+
| tutor_id | category_id | subject_id | subjects                                        | tutor_name            | tutor_code |
+----------+-------------+------------+-------------------------------------------------+-----------------------+------------+
|       16 |           5 |         11 | Business & Accounting Studies, Business Studies | Kasun Kalhara         |       1265 |
|        3 |           6 |         37 | Business Studies                                | Kumara                |       1252 |
|        1 |           6 |         37 | Business Studies, Business & Accounting Studies | Tharanga Nuwan Kumara |       1250 |
+----------+-------------+------------+-------------------------------------------------+-----------------------+------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:54:56.187

为了将主题放在一行中，您应该创建一个函数，该函数将返回一个逗号分隔的字符串，其中包含每个导师的主题。可能您需要将tutor_id 作为参数传递（可能还需要添加一个带有“like 子句”的字符串）。然后在您的选择中，您将拥有如下内容：

```
SELECT tcs.tutor_id, tcs.category_id, t.tutor_name, t.tutor_code, function_name(tcs.tutor_id)
FROM tutor_category_subject as tcs
INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:45:21.113

尝试：

```
SELECT DISTINCT tcs.tutor_id, tcs.category_id, tcs.subject_id, s.subjects, t.tutor_name, t.tutor_code
FROM tutor_category_subject as tcs
INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
WHERE s.subjects LIKE '%business%'; 
```

或者：

```
SELECT DISTINCTROW tcs.tutor_id, tcs.category_id, tcs.subject_id, s.subjects, t.tutor_name, t.tutor_code
    FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    WHERE s.subjects LIKE '%business%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:54:57.253

```
SELECT tcs.tutor_id, tcs.category_id, tcs.subject_id, GROUP_CONCAT(s.subjects) AS subjects,  t.tutor_name, t.tutor_code
FROM tutor_category_subject as tcs
INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
WHERE s.subjects LIKE '%business%'
GROUP BY t.tutor_name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:31:20.623

现在试试这个，与 group by 不同：

```
SELECT DISTINCT tcs.tutor_id, tcs.category_id, tcs.subject_id, group_by(s.subjects), t.tutor_name, t.tutor_code
    FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    WHERE s.subjects LIKE '%business%'
    GROUP BY tcs.tutor_id; 
```

# jquery - jQuery - 结合 one() 和 on() 函数

> ID：13156065
> 
> 赞同：2
> 
> 时间：2012-10-31T10:41:53.640
> 
> 标签：jquery, function, bind, live, combinations

我想使用[一个](http://api.jquery.com/one/)仅执行一次特定函数的 jQuery 函数，但要与[on](http://api.jquery.com/on/) jQuery 函数结合使用，因为元素尚未呈现。

所以，我需要以这种方式使用“on”函数来绑定未渲染元素的函数。

```
$(document).on('click',',myElement',function(){

}); 
```

如何实现“一个”功能以便仅在第一次单击元素时执行我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:44:08.530

该`.one()`方法支持事件委托。这将意味着回调运行一次，而不是为每个匹配元素运行一次：

```
$(document).one('click', '.myElement', function() {
    // Do stuff
}); 
```

但是，如果您的意思是希望事件处理程序为与选择器匹配的每个元素执行一次，最简单的解决方案可能是在处理程序执行后向元素添加一些数据。然后，您可以检查该数据是否存在以确定是否继续使用事件处理程序：

```
$(document).on('click', '.myElement', function() {
    if (!$(this).data("done")) {
        // Do stuff
    } else {
        $(this).data("done", true);
    }
}); 
```

# macos - 基于 MAC 10.7.4 构建的 Qt 应用程序无法在 10.6 上运行

> ID：13156066
> 
> 赞同：2
> 
> 时间：2012-10-31T10:41:55.280
> 
> 标签：macos, qt, qt-creator

您好我在 Mac 10.7.4 上创建了一个 Qt 应用程序。我得到了一个 .app 文件，即 ex myApp.app 当我尝试在 MAC 10.6 上运行它时，出现如下![错误图像](../Images/c7583bd9b2f11d59b81e123245b4c7be.png)图所示的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:50:05.597

首先，尝试在应用程序的 *.pro 文件中进行设置：

```
QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.6 
```

这应该有望为您的构建启用弱链接，理论上这将允许它在 10.6 上运行。

如果这不起作用，您还有另外两个选择。建立在 10.6 上。二进制文件将在 10.7 和 10.8 上运行。或者，手动尝试安装 10.6 SDK，如下所述：

[哪里可以获得适用于 Xcode 的 macOS SDK 10.6？](https://stackoverflow.com/q/11989007/856199)

然后，您必须配置您的 Qt 项目以针对该 SDK：

```
QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.6
QMAKE_MAC_SDK = /Developer/SDKs/MacOSX10.6.sdk 
```

# c# - XML 到列表 在 MVC 4 中

> ID：13156068
> 
> 赞同：1
> 
> 时间：2012-10-31T10:42:02.473
> 
> 标签：c#, sql, xml, asp.net-mvc-4

我正在调用一个 web 服务，它与学生一起返回 XML。我需要将所有学生存储在我的数据库中（现有的学生表）。

现在我有这个获取 XML 的 XMLStudentParser 类，但是我不知道如何继续将每个学生记录存储到数据库中。我是否使用 XMLReader 循环遍历学生并将每个学生添加到 a`List<Student>`中，然后将该列表保存到数据库中？

**通过网络服务远程 XML。**

```
<Response>
  <Result>True</Result>
  <Table>
    <Students>
      <Student>
        <StudentID>14165</StudentID>
        <StudentName>Jeff Smith</StudentName>
        <GroupId>9109</GroupId>
      </Student>
      <Student>
        <StudentID>14168</StudentID>
        <StudentName>Mary Jones</StudentName>
        <GroupId>9109</GroupId>
      </Student>
    </Students>
  </Table>
</Response> 
```

**我的学生模型**

```
public class Student
{
    public int StudentId { get; set; }
    public string FullName { get; set; }

    public int GrpId { get; set; }
} 
```

最佳实践代码的外观如何：

*   从 Web 服务获取 XML
*   解析每个学生
*   将每个学生存储在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:56:53.673

正如之前的答案所述，通过添加 XML Element 属性使您的对象定义与 XML 匹配可能是反序列化 XML 的最简单方法：

```
[XmlElement]
public class Response
{
    [XmlElement]
    bool Result;
    public tbl[] Table;
}
public class tbl
{
    public Student[] Students;
}

public class Student
{
    public int StudentId { get; set; }
    public string FullName { get; set; }
    [XmlElement(ElementName = "GroupId")]    
    public int GrpId { get; set; }
} 
```

然后，您可以将这些值插入到学生和家长的临时表中，并使用 SQL MERGE 语句更新您的主数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:49:55.813

*   对 StudentDTO 对象的 XML 序列化。
*   StudentDTO 到学生的映射。
*   映射的学生将保存在数据库中。

此处推荐使用 StudentDTO，因为您希望将 Student 类与来自 Web 的 XML 定义分离。如果 XML 定义发生变化，您只需更改 DTO 而不必更改 Student 实现。

潜在的非生产代码：

```
[XmlElement]
public class StudentDTO 
{
    [XmlElement]
    public string StudentName {get;set;}
}

[XmlElement]
public class StudentsDTO : List<StudentDTO> 
{
}

public class Student
{
    public string Name {get;set;}
}

//Ideally on big System, Mapper class would be a generic on the lines of Mapper<Source,Target>
//Mapper<StudentDTO,Student> and based on some rules it would do mapping.
public class StudentDTOToStudentMapper
{
    public Student GetStudentForDTO(StudentDTO dto)
    {
        //create object of student
        // Map corresponding property of StudentDTO to Student
        // e.g. StudentName to Name
    }
}

public class Client
{
    public static void Main(DBHelper dbHandler, XMLSerialiser seriliaser, WebService serviceToCall,StudentDTOToStudentMapper mapper )
    {
        // XmlDocument/Object obj = serviceToCall.GetStudentsXML();
        // StudentsDTO students = Seriliaser.Deserialise(XML);
        // IEnumerable<Student> studentObjects = from eachDTO in students 
        //                   select mapper.GetStudentForDTO(eachDTO)
        // bool IsSaved = dbHandler.Save(students);
        // Based on IsSaved show the status.
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:47:04.573

如果您可以更改您的学生类属性以匹配 Xml 元素名称和/或使用指示哪些 XML 值转到哪些类属性的属性来装饰属性，那么您可以使用 .Net 将 XML 反序列化为一行中的学生列表.

然后像往常一样坚持到数据库。

[这是一个例子](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)

# c# - 如何根据某些条件从另一个列表中创建一个新的字符串列表？

> ID：13156070
> 
> 赞同：8
> 
> 时间：2012-10-31T10:42:11.490
> 
> 标签：c#, algorithm

这是我能想到的最好的提问方式，详情如下。我花了一个小时才弄清楚如何提出这个问题！

假设我有 5 种（或更多）类型的文本文件——它们是由科学仪器生成的，每种都有一定的结果。让我们将这些“类型”称为 A、B、C、D、E。文本文件的实际名称并没有透露这一点，因此用户不能轻易地通过名称看到它们是什么。如果它更容易，我们可以考虑一个“字符串”列表。{我不知道如何处理复制类型，但我稍后会担心）

我希望为用户提供将文本文件组合成一个综合文件的选项，但挑战是，组合某些类型没有意义（出于我认为不值得进入的原因）。

我已经构建了兼容性矩阵和示例矩阵

```
 A   B   C   D   E
   A    1   1   1   1   0
   B    1   1   1   0   0
   C    1   1   1   1   0
   D    1   0   1   1   1
   E    0   0   0   1   1 
```

所以，这就是说我可以将 A 与 B、C、D 结合，但不能将 E（等等）结合起来。

现在，如果用户从文件列表中选择类型为“A、B 和 C”的文件（显然没有输入），我想检查选择并说“是的，ABC 是合法合并”并执行合并。

如果用户选择 A、B、C、D，我想说，不，你不能这样做，因为 D 与 B 不兼容 - 但是，你可以做 A、B、C 或 A、C、D （因为 D 不应该在 B 的位置）。

还在我这儿？

我在代码中创建了上面的矩阵，并进入了一个循环结构，在那里我开始有点糊涂，我想我可能会在发现自己失去家和家人之前寻求一些帮助。关于我如何尝试做出选择，我有一个相当大的评论部分。请记住，“A”可能是“狗”，“B”可能是“猫”等。

```
internal class CompatibilityCheck
{
    private List<string> FileTypes;

    public CompatibilityCheck()
    {
        //Strings are unique types for text files
        FileTypes = new List<string> {"A", "B", "C", "D", "E"};
        int[,] CompatibilityMatrix =
            {
                {1, 1, 1, 1, 0},
                {1, 1, 1, 0, 0},
                {1, 1, 1, 1, 0},
                {1, 0, 1, 1, 1},
                {0, 0, 0, 1, 1}
            };

        /* Scenario 1 */
        //List of file names from user = ALL LEGAL
        var userSelection = new List<string> {"A", "B", "C"};
        /* Go through each item in userSelection and make arrays of "legal" file combinations?
         * start with A and find the compatible matches, B and C.  Check that B and C are okay. 
        * Answer should look like this as A, B and C can be combined */

        /* Scenario 2 */
        // List of file names from user = NOT ALL LEGAL => D and B are incompatible
        var userSelection2 = new List<string> {"A", "B", "C", "D"};
        /* In my head, I go through each item in userSelction2
         * Take A and build "A,B,C,D" as it is compatible
         *  check B with C(yes) and D(no) - remove D.
         *      end [ A,B,C ]
         *          
         * Start with B and build B,A,C
         *  check A with C(yes) 
         *      end [ B,A,C ]
         *          
         * Start with C and build C,A,B
         *  check A with B(yes)
         *      end [C,A,B]
         *      
         * Start with D and build D,A,C
         *  check A with C(yes)
         *      end [D,A,C]
         *      
         * take the nth string and compare to n+1, n+2 ... n+(length-n)
         *  
         * the unique string sets woudld be  A , B , C and A , C , D  
         */
    }
} 
```

我希望这很清楚。那么完成这样一项任务的最佳方法是什么？递归，LINQ“魔术”，矩阵数学？

[编辑：] 我刚刚想到的一个可能更容易实现的想法可能是显示文件列表，当用户选择它们时，我可以“停用”其他不兼容的选项。想象一个列表框或类似的地方，您选择“A”类型，如果上面的矩阵正在播放，则类型“E”文件将显示为灰色。我想知道这是否会减轻我的压力......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:46:44.760

您正在查看一个[集团问题](http://en.wikipedia.org/wiki/Clique_problem)- 特别是*最大*集团问题。

您可以使用一些[算法](http://en.wikipedia.org/wiki/Bron%E2%80%93Kerbosch_algorithm)来解决这个问题，但还没有比指数时间更好的算法。

您的编辑听起来像是一个更好的主意-随着您的进行，限制选择应该更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:56:14.110

我没有太多时间看这个或重构我的代码，所以这更像是一个大脑转储，但可能是一个开始并重构为更整洁的东西的好地方！

```
public class StrongFileType
{
    private string _friendlyName = string.Empty;

    public StrongFileType(string friendlyName)
    {
        _friendlyName = friendlyName;
    }

    public IEnumerable<StrongFileType> CompatibleTypes { get; set; }

    public override string ToString()
    {
        return _friendlyName;
    }
}

private void SampleTest()
{
    // The possible types
    var typeA = new StrongFileType("A");
    var typeB = new StrongFileType("B");
    var typeC = new StrongFileType("C");
    var typeD = new StrongFileType("D");
    var typeE = new StrongFileType("E");

    // Setup possible compatible types
    typeA.CompatibleTypes = new List<StrongFileType> { typeA, typeB, typeC, typeD };
    typeB.CompatibleTypes = new List<StrongFileType> { typeA, typeB, typeC };
    typeC.CompatibleTypes = new List<StrongFileType> { typeA, typeB, typeC, typeD };
    typeD.CompatibleTypes = new List<StrongFileType> { typeA, typeC, typeD, typeE };
    typeE.CompatibleTypes = new List<StrongFileType> { typeD, typeE };

    // Now do a check...
    var userSubmittedFilesValid = new List<StrongFileType> { typeA, typeB, typeC };
    CheckCompatible(userSubmittedFilesValid);
    var userSubmittedFilesInvalid = new List<StrongFileType> { typeA, typeB, typeC, typeD };
    CheckCompatible(userSubmittedFilesInvalid);
}

private bool CheckCompatible(IEnumerable<StrongFileType> requestedFiles)
{
    // Useful for debugging
    var validList = new List<string>();
    var invalidList = new List<string>();

    foreach (StrongFileType fileType in requestedFiles)
    {
        string invalid = string.Empty;
        string validCombination = string.Empty;

        foreach (StrongFileType fileTypeToCheck in requestedFiles)
        {
            if (!fileType.CompatibleTypes.Contains(fileTypeToCheck))
            {
                // Show as not compatible and remove any previously valid combinations that match
                invalid += string.Format("{0} not compatible with {1}", fileType, fileTypeToCheck);
                validList.RemoveAll(x => x.Contains(fileType.ToString()) && x.Contains(fileTypeToCheck.ToString()));
            }
            else
            {
                validCombination += string.Format("{0}", fileTypeToCheck);
            }
        }

        // Add to respective lists
        if (!string.IsNullOrEmpty(validCombination) && !validList.Contains(validCombination))
        {
            validList.Add(validCombination);
        }
        if (!string.IsNullOrEmpty(invalid))
        {
            invalidList.Add(invalid);
        }
    }

    // Was valid?
    return invalidList.Count == 0;
} 
```

这应该导致第一个显示 ABC 的 VALID 列表和 INVALID 列表为空。第二个应该将 ABC 和 ACD 显示为 VALID，将 BD 和 DB 显示为 INVALID。

对不起，我没有更多的时间来整理它！

# java - 读取 excel 文件时出现 FileNotFound 异常

> ID：13156080
> 
> 赞同：0
> 
> 时间：2012-10-31T10:42:51.147
> 
> 标签：java, excel, upload

场景：我正在尝试使用 JExcel 读取 excel 文件并将数据转储到 Oracle 数据库中。我要求用户浏览并选择要从他们的系统中读取的文件，然后我读取该文件并将数据（不保存物理文件）转储到 Oracle 数据库中。

```
<form id='uploadform'>
    <table class='detailTable'>
    <tr>
        <td class='detailTableTD'>Select File to Upload:</td>
        <td class='detailTableTD'>
            <input type='file' id='fileUpload'>
        </td>
    </tr>
    <tr>
        <td class='detailTableTD'></td>
        <td class='detailTableTD'>
            <button id='uploadBtn' onclick="upload();">Upload</button>
            <button id='backBtn'>Back</button>                                  
        </td>
    </tr>
    </table>
</form> 
```

**爪哇：**

```
public int[][] readFromExcel(final String excelFilePath) throws ApplicationException {
    String excelPath = excelFilePath.trim();
    File inputWorkbook = new File(excelPath);
    Workbook workbook;
    MyObj drawBk;
    List drBkLst = new ArrayList();
    String tmpStr = "";
    try {
        workbook = Workbook.getWorkbook(inputWorkbook);
        Sheet sheet = workbook.getSheet(0);
        for (int j = 1; j < sheet.getRows(); j++) {
            drawBk = new MyObj();
            for (int i = 0; i < sheet.getColumns(); i++) {
                Cell cell = sheet.getCell(i, j);
                switch (i) {
                case 0:
                    drawBk.setSerialNumber(cell.getContents());
                    break;
                case 1:
                    drawBk.setMediaNumber(cell.getContents());
                    break;
                case 2:
                    tmpStr = cell.getContents();
                    if (!(tmpStr.trim().equalsIgnoreCase("Y") || tmpStr.trim().equalsIgnoreCase("N")))
                        continue;
                    else
                        drawBk.setMnProcessInd(tmpStr);
                    drawBk.setSnProcessInd(tmpStr);
                    break;
                }
            }
            drawBk.setLastChangedUser(userId);
            drBkLst.add(drawBk);
        }
    } catch (Exception readExcelEx) {}
return insertExcelDataToDatabase(drBkLst);
} 
```

在这里，我捕获路径并作为参数传递给用于处理单元格的 Java 方法，并创建要插入 DB 的对象的 ArrayList。这里所有的简单代码。从本地部署运行时一切正常，但是当我将 EAR 部署到服务器时，当我浏览文件并选择文件时，我开始收到 FileNotFound 异常。我觉得这一切都是由于一些相对/绝对路径问题，但不可能调试，我需要它快。任何精确的帮助将不胜感激？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:47:52.717

我相信当您在本地运行时，该文件驻留在本地系统上，因此您不会遇到任何异常。但是当你在服务器上部署它时，用户浏览的文件仍然在他的机器上，直到服务器才到达。您需要创建一个临时文件或从文件的请求参数二进制数据中读取java对象中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:57:16.090

您必须将文件写入服务器上的某个临时目录。您不能使用来自服务器 (ear) 的系统文件路径。

您必须将表单更改为多部分并处理请求。查看此链接 (http://www.servletworld.com/servlet-tutorials/servlet-file-upload-example.html)。

您也可以避免将文件写入 temp （无论如何它将由 java 用 tmp 写入，但您不必提供路径）。采用

```
FileInputStream fis = new FileInputStream(new File()); //after reading it using file io.
Workbook workbook = WorkbookFactory.create(fis); 
```

# jquery - 带有回调的jquery拖放框

> ID：13156089
> 
> 赞同：0
> 
> 时间：2012-10-31T10:43:47.620
> 
> 标签：jquery, drag-and-drop

我正在寻找与[此类](http://jqueryui.com/droppable/#photo-manager)似的解决方案。

我想将最多 6 个模块从 20 个模块移到垃圾箱。

当垃圾箱已满时，我需要显示其他消息：“*垃圾箱已满*”。

当我移动 1 个元素时 - 我需要在垃圾箱中显示一条消息，例如 ' *you drop A-module '。*

你能帮我看看吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:05:14.987

看看这个[JQFAQ](http://jqfaq.com/how-to-know-when-an-item-is-dropped-and-how-to-prevent-dropping/)主题，它将帮助您做到这一点。

# python - 嵌套函数中缺少参数（装饰器）

> ID：13156092
> 
> 赞同：1
> 
> 时间：2012-10-31T10:44:03.177
> 
> 标签：python, python-2.7, decorator

我有以下装饰器：

```
from decorator import decorator
def my_decorator(key=None, timeout=None, retry=0):
    """
    My decorator
    """
    import pdb; pdb.set_trace()

    def _my_decorator(func):
        import pdb; pdb.set_trace()
        key = key or func.__name__

        @decorator
        def __my_decorator(f, *args, **kwargs):
            result = "abc"
            return result
        return __my_decorator(func)
    return _my_decorator 
```

在第一个 pdb 部分中，结果`locals()`是：

```
>>> locals()
{'key': None, 'retry': 0, 'pdb': <module 'pdb' from '/opt/python/2.7/lib/python2.7/pdb.pyc'>, 'timeout': None} 
```

在第二个 pdb 部分中，结果`locals()`是：

```
>>> locals()
{'timeout': None, 'retry': 0, 'pdb': <module 'pdb' from '/opt/python/2.7/lib/python2.7/pdb.pyc'>, 'func': <function get_items at 0x9e172cc>} 
```

没有 pdb 的异常：

```
key = key or func.__name__
UnboundLocalError: local variable 'key' referenced before assignment 
```

您知道为什么`key`嵌套函数 _my_decorator 中的参数消失了吗？更奇怪的是，因为`timeout`和`retry`参数仍然可以访问（尽管这是嵌套函数中的正常行为）。

有一个解决方法：

```
def my_decorator(key=None, timeout=None, retry=0):
    """
    My decorator
    """
    key2 = key

    def _my_decorator(func):
        key = key2 or func.__name__
    ... 
```

但这不是解决方案（参数`key`仍然存在`_my_decorator`，但`key2`现在可以访问）

Python版本：2.7.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:51:09.853

如果您在内部范围内绑定变量名称，它将从外部范围的闭包中省略。这是因为否则后续代码将不知道要引用哪个绑定：

```
def outer(x=None):
    def inner(y=0):
        if y:
            x = y
        return x    # outer.x or inner.x? 
```

解决方法是重命名变量，使它们不会影响封闭范围：

```
def my_decorator(key=None, timeout=None, retry=0):
    def _my_decorator(func):
        func_key = key or func.__name__
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:50:19.260

您正在分配*给* `key`，这使得该变量成为本地变量。你不能用 Python 2 来做你想要实现的事情（在 Python 3 中你可以将它标记为`nonlocal`）。

解决方法是制作`key`一个可变的，然后改变它的内容而不是分配给它：

```
from decorator import decorator
def my_decorator(key=None, timeout=None, retry=0):
    """
    My decorator
    """
    key = [key]

    def _my_decorator(func):
        key[0] = key[0] or func.__name__ 
```

现在我们正在*mutating* `key`，而不是分配给变量。换句话说，我们正在执行道德上的等价物`key.__setitem__(0, key[0] or func.__name__)`，当你的代码正在执行时`locals()['key'] = key or func.__name`，一个标记`key`为局部变量的行为。

# javascript - 使用 addEventListener 注册的事件存储在哪里？

> ID：13156096
> 
> 赞同：7
> 
> 时间：2012-10-31T10:44:06.903
> 
> 标签：javascript

我从一个空白页面开始。如果我跑，`document.body.onclick`我会得到`null`. 如果我应用以下代码：

```
document.body.onclick = function() { return "Click"; }; 
```

`function() { return "Click"; }`我跑的时候得到`document.body.onclick`。这就说得通了！但是当我跑步时

```
document.body.addEventListener("click", function() { return "Click"; }); 
```

`document.body.onclick`仍然是`null`，但输出是`"Click"`我运行时`document.body.click()`。

**所以我的问题是，使用时函数存储在`addEventListener`哪里？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:51:07.920

它存储在`Event`侦听器的实际列表（数组）中`body`。

元素在它们的事件侦听器中有一个函数引用列表。这些引用不在 DOM 中。当触发一个事件时，浏览器必须通过所有适当的元素来查找这些引用并按顺序运行它们。

无论如何......在DOM看不到的背景中有很多事情发生。整个事件系统就是其中之一。好吧，整个 Javascript 引擎本质上和当前加载页面的大型对象树，都存储在神秘的内存中。它们通常通过使用`document`和`window`接口来访问，就像 DOM 一样。但是正确注册的事件将在这个存储在内存中的大型对象树中，这与 DOM 不同。只是密切相关。我将 DOM 视为这个大对象树和 HTML 本身之间的接口或中间人。

继续……`onclick`仅限于一个值或一个 javascript 字符串，只是在 DOM 中。实际没有注册。所以，不是一个实际的事件监听器。这里的 DOM 有点像 shim，因为它支持`onclick`字符串作为事件运行。这样这个字符串也会在事件触发时运行。通过浏览器，在正确的时间，神秘地。总的来说，可以说这是 DOM 的一部分，它从 HTML 中填充所有像这样的内联文本，以便它可以通过`document`. 但通常，它们只是存储为字符串而不是树中的实际对象。这可能是 DOM 如此 foobar 的众多原因之一。

而`addEventListenener`实际上将其注册为真实事件，因此您可以：

*   有多个
*   将它们作为对象访问
*   随意添加和删除它们
*   选择事件传播方案
*   在运行时控制事件传播本身
*   让事件在首次运行后自动删除

    ...以及其他一些功能。

它们都是同一事件的两种不同的事件侦听器。一个是使用时的完整事件侦听器`addEventListener`。另一个只是位于 DOM 中的文本字符串，浏览器将“在正确的时间”运行，但不是真正的完整事件侦听器。

这个问题可能会有所启发...... [addEventListener vs onclick](https://stackoverflow.com/questions/6348494/addeventhandler-vs-onclick)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:15:53.873

`.onclick =`和之间的主要区别在于`.addEventListener`设置`.onclick`了一个事件处理程序来替换现有的事件处理程序。而不是`.addEventListener`向 DOM 元素添加多个事件处理程序。`.addEventListener`是一种添加事件处理程序的现代方式。它们存储在哪里，我不知道，但不是`onclick`因为 onclick 保留单个值，而不是事件处理程序数组。您可以在此处阅读有关此内容的更多信息：

[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener#Older_way_to_register_event_listeners](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener#Older_way_to_register_event_listeners)

[http://www.w3.org/TR/DOM-Level-3-Events/#events-DocumentEvent-createEvent](http://www.w3.org/TR/DOM-Level-3-Events/#events-DocumentEvent-createEvent)

所以答案是不能通过获取`.addEventListener`的值来获取添加的事件处理程序`onlick`。

# c# - 在 FormClosing 事件中关闭应用程序

> ID：13156097
> 
> 赞同：2
> 
> 时间：2012-10-31T10:44:06.183
> 
> 标签：c#, events

我试图在关闭菜单表单时关闭我的应用程序。这是我的代码：

```
private void frmMenu_FormClosing(object sender, FormClosingEventArgs e)
{
    var result = MessageBox.Show("Do you want to close this application",
        "Alert", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
    if (result == DialogResult.Yes)
    {
        //this.Close();
        Application.Exit();
        //e.Cancel = false;
    }
    else
    {
        e.Cancel = true;
    }
} 
```

关闭时此消息出现两次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:47:37.823

您不必再次退出，只需让它通过：

```
private void frmMenu_FormClosing(object sender, FormClosingEventArgs e)
{
    var result = MessageBox.Show("Do you want to close this application?",
        "Alert", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
    if (result == DialogResult.No)
    {
        e.Cancel = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:09:33.753

您可以覆盖该`OnFormClosing`方法：

```
protected override void OnFormClosing(FormClosingEventArgs e) {
        base.OnFormClosing(e);
        if (!e.Cancel) {
            if (MessageBox.Show("Do you want to close this application?", "Close Application", MessageBoxButtons.YesNo) != DialogResult.Yes) {
                e.Cancel = true;
            }
        }
    } 
```

或者按照[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)在课堂上使用 bool （例如`IsDataValid`）的评论中的建议：

```
private void frmMenu_FormClosing(object sender, FormClosingEventArgs e)
{ 
   if (!IsDataValid)
   {
       if(DialogResult.Yes == MessageBox.Show(Do you want to close this application?",
        "Alert", MessageBoxButtons.YesNo, MessageBoxIcon.Question))
           this.Dispose(); //or Application.Exit();
       else
            e.Cancel = true;
   }
   else
       this.Dispose(); //or Application.Exit();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:57:29.640

您收到两条消息，因为`Application.Exit();`正在关闭`frmMenu`，而您当前正在关闭它 =>`frmMenu`已关闭两次。

If`frmMenu`是您应用程序的主要形式，这意味着您的*Program.cs*文件中应该有类似的内容：

```
static class Program {
    [STAThread]
    static void Main() {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new FrmMenu());
    }
} 
```

...然后应用程序将在关闭时退出`frmMenu`。正如*derape所说*，你不必打电话`Application.Exit()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T11:18:42.083

```
 private void frmMenu_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (MessageBox.Show("Do you want to close this application", "Alert", MessageBoxButtons.YesNo, MessageBoxIcon.Warning) == DialogResult.No)
        {
            e.Cancel = true;
        }

    } 
```

# facebook - Facepile 数据操作不起作用？

> ID：13156098
> 
> 赞同：0
> 
> 时间：2012-10-31T10:44:07.777
> 
> 标签：facebook, facebook-graph-api, facepile

我有一个对象类型“Page”和一个动作类型“Create”，我想在我的 facepile 中实现它。其中“twm_test”是我的命名空间。

```
<div class="fb-facepile" data-href="http://domain.com" data-action="twm_test:page.create" data-size="large" data-max-rows="1" data-width="669"></div> 
```

但它仍然可以使用like。这可能是因为我没有在我的`<html>`标签中包含架构，或者我的格式可能是错误的？

我尝试了几种数据操作值，这对我来说最有意义......

先感谢您

[http://jsfiddle.net/8yyJE/](http://jsfiddle.net/8yyJE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:03:15.280

data-action 属性的值可能是错误的。您将操作类型设置为“创建”，那么值必须是“twm_test:create”，而不是“twm_test:page.create”。您可能正在使用内置 Action 和 Object 的教程学习并感到困惑。仅使用内置动作，例如“news.reads”或“video.watches”。使用的自定义操作，如“twm_test:create”。该教程[http://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/](http://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/)会对您有所帮助。

# c++builder - 如何创建气球提示？

> ID：13156101
> 
> 赞同：0
> 
> 时间：2012-10-31T10:44:09.507
> 
> 标签：c++builder, c++builder-2010

我正在尝试在我的应用程序中使用气球类型 ui 创建一些提示，让用户查看有关需要在特定情况下采取的某些操作的信息，但我在论坛上查看了一些代码。我在以下站点[http://www.tek-tips.com/viewthread.cfm?qid=1611641](http://www.tek-tips.com/viewthread.cfm?qid=1611641)中找到了一个气球提示示例。我认为它是在 C++ Builder 2009 IDE 中创建的，并尝试使用 C builder 2010 IDE RS 对其进行编译，但我无法获得任何气球提示。首先，当我编译时，它停在下一行，例如
`GetClientRect(hWnd, &ti.rect);`然后我将其更改为 GetWindowRect 因为`GetClientRect`不需要将任何参数传递给此方法，尽管我更改了 clint-to-window 然后我终于运行了它...想它会显示提示，但没有任何工具提示。

此外，我还展示了我提供了链接的代码。

```
#pragma hdrstop

#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
        : TForm(Owner)
{
}
//---------------------------------------------------------------------------
typedef struct{

 unsigned long     cbStruct;
 PWChar     pszTitle;
 PWChar     pszText;
 int         ttiIcon;
   } tagEDITBALLOONTIP;
  tagEDITBALLOONTIP *EDITHINT;

void __fastcall TForm1::ShowBalloonTip(TWinControl *Control,int  Icon,char *Title,char *Text,TColor BackCL,TColor TextCL)
{
    HWND hWndTip;
    TOOLINFO ti;
    HWND hWnd;

    hWnd    = Control->Handle;
    hWndTip = CreateWindow(TOOLTIPS_CLASS, NULL, WS_POPUP | TTS_NOPREFIX | TTS_BALLOON | TTS_ALWAYSTIP, 0, 0, 0, 0, hWnd, 0, HInstance, NULL);
    if( hWndTip )
    {
        SetWindowPos(hWndTip, HWND_TOPMOST, 0, 0, 0, 0,
          SWP_NOACTIVATE | SWP_NOMOVE | SWP_NOSIZE);
        ti.cbSize = sizeof(ti);
        ti.uFlags = TTF_CENTERTIP | TTF_TRANSPARENT | TTF_SUBCLASS;
        ti.hwnd = hWnd;
        ti.lpszText = Text;
        GetClientRect(hWnd, &ti.rect); // the only problem is here 
        SendMessage(hWndTip, TTM_SETTIPBKCOLOR, BackCL, 0);
        SendMessage(hWndTip, TTM_SETTIPTEXTCOLOR, TextCL, 0);
        SendMessage(hWndTip, TTM_ADDTOOL, 1, Integer(&ti));
        SendMessage(hWndTip, TTM_SETTITLE, Icon % 4, Integer(Title));
    }
}
void __fastcall TForm1::Button1Click(TObject *Sender)
{

ShowBalloonTip(Button1, 1, "ik0","Example on how to create Balloon Tips in C++ Builder", ColorBox1->Selected,ColorBox2->Selected );

}` 
```

然后我问如何让它在builder 2010 IDE中工作？？？我想知道为什么它在 2009 IDE 中通过使用`GetClientRect()`提供 2 个参数的 Windows API 函数来工作，当我在 Windows 7 的 C builder 2010 IDE 中编译它时，它说没有预期的参数......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:12:27.700

您正在尝试`GetClientRect()`从方法内部调用 Win32 API 函数`TForm`。由于从`TForm`继承了一个单独的`GetClientRect()`方法`TControl`，因此您必须告诉编译器要调用哪个方法。如果要调用 Win32 API 函数而不是`TControl::GetClientRect()`方法，请指定全局命名空间，例如：

```
::GetClientRect(hWnd, &ti.rect); 
```

另一方面，由于 HWND 来自 a `TWinControl`，您可以（并且应该）改用控件的`ClientRect`属性：

```
ti.rect = Control->ClientRect; 
```

# android - 使绘制的文本清晰

> ID：13156102
> 
> 赞同：0
> 
> 时间：2012-10-31T10:44:14.297
> 
> 标签：android, paint

我已经编写了在图像上绘制文本并保存图像的代码，但是我正在绘制的文本在图像上看起来很模糊。需要进行哪些修改才能使其清晰，或者是否有任何其他方法可以绘制android中图像上的文字

```
Canvas canvas = new Canvas(photo);
                Typeface tf = Typeface.create(topaste, Typeface.BOLD);
                Paint paint = new Paint();
                paint.setStyle(Style.FILL);
                paint.setTypeface(tf);
                paint.setColor(Color.WHITE);

                paint.setStrokeWidth(12); 
                canvas.drawBitmap(photo, 0, 0, paint);
                canvas.drawText(topaste, 15, 120, paint);
                image.setImageBitmap(photo); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:58:25.560

你试试这样

```
 public void onClick(View v) {
            mBitmap.eraseColor(Color.TRANSPARENT);
            mPath.reset();
            mView.invalidate();
        } 
```

这是示例绘制徒手和清除油漆[http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html](http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html)

# c# - JTable 事件更新 - 显示错误

> ID：13156103
> 
> 赞同：1
> 
> 时间：2012-10-31T10:44:14.483
> 
> 标签：c#, asp.net-mvc, nhibernate, jtable

我想在 jtabele 标准事件中显示错误（例如 alert()），但我不知道我必须做什么。代码工作正常。最重要的地方是 if(UpdateOrNot==1){}

```
public void OnUpdated(DictionaryListModel dictionaryListModel)
        {
            var listModel = (DictionarySkillListModel)dictionaryListModel;
            if (dictionaryListModel == null)
                throw new Exception("Niepoprawny model");

            int UpdateOrNot=0;
            try
            {
            if (listModel.IsActiveYN == false)
            {
                var list =
                    _skillService.CheckSkillProcedur(listModel.Id, listModel.Description).ToList();
                foreach (var procSkillValue in list)
                {
                    UpdateOrNot = procSkillValue.ExistOrNotExist;
                }
                if(UpdateOrNot==1)
                {
                  //here I would like to past my alert
                }
                else
                {
                    var skill = _skillService.Get(listModel.Id);
                    skill.Name = listModel.Description;
                    skill.IsActive = listModel.IsActiveYN;
                    _skillService.Update(skill);
                }   
            }
            }
            catch (Exception ex)
            {}

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:07:56.930

try and catch 有问题。固定的

# objective-c - 如何删除对 iOS 6 的支持

> ID：13156104
> 
> 赞同：0
> 
> 时间：2012-10-31T10:44:21.363
> 
> 标签：objective-c, ios5, ios6, xcode4.5

如何删除对 ios 6 的支持？我的应用程序不支持 iOS 6 分辨率，我不想拉伸它。我正在使用 ios 6 sdk。为此需要一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:46:51.050

只是不要将 Default-h586.png 图像添加到您的应用程序，它会在顶部和底部以黑色条纹运行。

# rest - 在多语言环境中对 neo4j 的推荐

> ID：13156109
> 
> 赞同：0
> 
> 时间：2012-10-31T10:44:36.823
> 
> 标签：rest, transactions, neo4j

在多语言数据库环境中使用 Neo4j 的推荐方法是什么？我想 RESTFUL 服务器可以帮助您很好地扩展您的数据库层。但是使用 Neo4j 的一个很好的理由也是因为它是一个事务性属性图数据库。但是，当您使用多个数据库（例如 mysql 和 neo4j）时，通过 Neo4j 的 RESTful 访问，您如何管理事务（当 neo4j 通过 REST 公开时）

# android - Errno 24（打开的文件过多）内部 sd 卡 Android 设备上的错误

> ID：13156112
> 
> 赞同：2
> 
> 时间：2012-10-31T10:44:43.250
> 
> 标签：android, android-sdcard

我目前正在开发一个很酷的 Android 应用程序，它可以将多个图像文件一起分析和交叉。不幸的是，我无法公开有关它的更多信息。

无论如何，我已经在多台设备上对其进行了测试，并且在某些随机情况下达到了打开文件过多的情况（Errno 24）。这发生在具有内部 SD 卡的设备（如三星 Galaxy S3）上。生根设备后，我已经能够确定由于 sdcard 被挂载为单独的文件系统（称为 FUSE 的伪文件系统）而导致的问题，其中我的应用程序打开的文件实际上是由系统进程 /system/bin 打开的/SD卡/。

**这将设备上的所有进程限制为仅 1024 个文件描述符**（驻留在 SD 卡上的文件）。*1024 个文件描述符限制是 Android 每个进程的最大打开文件数。*

以安装了 100 个应用程序的设备为例，每次打开 10 个文件（数据库文件、属性等），几乎达到了限制。一旦超过 1024 个文件的限制，整个设备就毫无用处——应用程序停止工作等等。

★★ 如果你和我一样觉得这很麻烦，请给这个未决问题投票 ★★ [http://code.google.com/p/android/issues/detail?id=39002](http://code.google.com/p/android/issues/detail?id=39002)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-23T19:42:31.290

这确实解释了我在使用几个 Bittorrent 客户端时遇到的问题。文件下载并出现在外部 SD 卡上，但它们不可用，当我强制重新检查下载的数据时，它显示丢失或损坏的部分。

几个星期以来，我一直在责怪 Torrent 群（糟糕的同行？）、SD 卡本身（有缺陷？没坐好？）或 KitKat（与有点烦人的新限制无关）。

每个打开的 torrent 似乎都将一个文件句柄和一个网络套接字与每个对等点相关联...... 10 个种子运行，每个 10 个对等点；没问题。但是打开了 10 个种子，如果 swarm 速度很快，其中一些可能会连接到 50 个对等点，而且我那可怜的小手机肯定撞到了文件句柄天花板上。那是在我对 SD 卡做任何其他事情之前！

Android Torrent 客户端的用户自然会想要使用外部 SD 卡... - 大文件 - 单独的文件系统让我感觉更安全，使用 HTTP 服务器将数据传输到任何其他计算机 - 下载 Linux 发行版并能够正确弹出它插入 SD 卡插槽！

我设计的解决方法 - 到目前为止似乎有效 - 将活动的 Torrent 保留在主存储中，并在完成写入后将它们转移到 SD 卡。这样可以避免损坏 SD 卡上显示的数据。Flud (Google Play) 不显眼、可靠，并且可以选择将已完成的 Torrent 移动到新位置。

# objective-c - 不可用方法的编译器警告？

> ID：13156114
> 
> 赞同：1
> 
> 时间：2012-10-31T10:44:49.920
> 
> 标签：objective-c, ios, compiler-construction

有没有办法让编译器警告使用部署目标 SDK 中可能不可用的方法？

例如，`dismissViewControllerAnimated:completion:`当目标是 4.3 时使用。

# visual-studio-2010 - Visual Studio 2010 设计器代码模板

> ID：13156115
> 
> 赞同：5
> 
> 时间：2012-10-31T10:44:50.960
> 
> 标签：visual-studio-2010, code-generation, windows-forms-designer

正如标题所说：有没有办法改变 VS 用来创建设计器文件的模板？例如控件或其事件的命名约定。我对此进行了一些研究，但只能找到一些较旧的帖子，基本上都是在说“不，不是”，也许在过去几个月左右发生了一些变化......

我能够识别用于创建在开头“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates\CSharp\Windows Forms\1033”中创建的类的默认模板所在的文件夹。但我仍在寻找生成事件方法的模板等等......

编辑：对不起，如果我混淆了我的问题。正如 Basti 所说，我确实寻找两者，更改类模板（您可以通过更改模板文件来做到这一点，在 VS 目录 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates 中找到）并更改生成字段、事件名称等的命名约定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:29:47.310

你同时问了两个问题。
对于第一个问题（“有没有办法更改 VS 用来创建设计器文件的模板？”）：是的，有。
您需要找到一个名为的文件`Form.zip`，并在此文件中找到相关的模板。

您提出的另一个问题涉及命名约定。
至于我的经验，我不知道如何简单地更改模板文件以更改命名约定，因为这是两件不同的事情。模板只是描述某种类型的代码文件（Class、Form、...）的结构或布局，而命名约定与文件本身的结构无关！

我所知道的是 VS 的扩展，例如[EventHandlerNaming](http://einaregilsson.com/better-eventhandler-names-in-visual-studio-2010/)。它允许您自定义 EventHandlers 的标准命名（在内部它正在使用`EventBindingService.CreateUniqueMethodName`） - 如果此扩展不符合您的需求，至少您可以查看源代码并可能实现您自己的约定。
另一个扩展是[ReSharper](http://www.jetbrains.com/resharper/)，它似乎允许您创建自己的模板和命名约定，但我还没有测试它。

**编辑**
您要查找的模板文件（表单的设计器文件）应位于`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates`.
对我来说，我在`C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\IDE\VSTA\ItemTemplates\CSharp\1031\Form.zip`（仅安装了 VS2010）中找到它，并且在 zip 中包含三个文件：

```
Form.zip
|-- form.cs
|-- form.designer.cs
|-- windowsform.vstemplate 
```

这`form.designer.cs`是您要查找的，这是设计器用来生成表单设计器文件的模板文件。

另一个解决方案是不更改原始模板，而是创建您自己的模板。这样做的好处是 - 显然 - 你不会失去原来的，以防万一你不得不退回到它们。
有关创建自定义模板的信息可以[在 MSDN上找到，也可以](http://msdn.microsoft.com/en-us/library/ms247121%28v=vs.100%29.aspx)[在 switchonthecode.net 上](http://www.switchonthecode.com/tutorials/visual-studio-how-to-create-item-templates)以教程形式找到。至于您可以在模板中使用的参数/变量，这里有一个[编译](http://msdn.microsoft.com/en-us/library/eehb4faa%28v=vs.100%29.aspx)。

**编辑#2**
关于命名约定，您可以查看[StyleCop](http://stylecop.codeplex.com/)。乍一看，它看起来像 CheckStyle for Eclipse，一个插件/一个强制代码样式的扩展。似乎它完全符合您的需求。

# html - 使链接调用目标文档上的特定 CSS 样式表

> ID：13156117
> 
> 赞同：2
> 
> 时间：2012-10-31T10:45:00.083
> 
> 标签：html, css

快速概述我所拥有的以及我想要做什么：

*   MASTER 页面有一个下拉菜单，其中包含指向各个登录页面的四个链接。登录 --> 4 个链接（儿童、青少年、成人、老年人）
*   只有 1 个登录页面包含 4 个 css 样式表，具体取决于您的类型（儿童、青少年、成人、老年人）
*   我希望母版页上的链接能够立即将用户带到具有正确 css 样式表的登录页面。

*   我知道如何让它在登录页面本身上工作，但不知道如何从不同页面上的链接调用特定的 css 样式表。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:56:22.570

我认为你需要一个 url 参数和 switch 函数......在 PHP 中你可以使用它：

```
<?php
$page = $_GET['page'];
switch($page){
case"children":
  $style_link = "<link href="CHILDREN LINK STYLESHEET" rel="stylesheet"/>";
break;
case"teenagers":
  $style_link = "<link href="TEENAGERS LINK STYLESHEET" rel="stylesheet"/>";
break;
case"adults":
  $style_link = "<link href="ADULTS LINK STYLESHEET" rel="stylesheet"/>";
break;
case"seniors":
  $style_link = "<link href="SENIORS LINK STYLESHEET" rel="stylesheet"/>";
break;
}
?> 
```

并在您的 html 代码中打印它：

```
<html>
   <head>
   <?php echo $style_link;?>
   </head>
........
</html> 
```

然后不要忘记将 url 参数添加到每个下拉链接中：

`www.your-site.com/login.php?page=children www.your-site.com/login.php?page=adults ... etc`

# class-diagram - 显示所有包的类图

> ID：13156118
> 
> 赞同：2
> 
> 时间：2012-10-31T10:45:12.457
> 
> 标签：class-diagram, enterprise-architect

我正在与 Enterprise Architect 合作。我想同时查看所有包中的类图，以便更好地可视化类之间的关系。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:46:06.087

据我所知，不存在这样的事情。您的选择是从现有图表中绘制一个包含元素的新类图，或者创建一个包图来描述不同包之间的关系。这是有原因的 - 与包间关系相比，不同包中的类之间的关系处于另一个层次，通常它们不应该混合。

# javascript - Jquery完成后运行脚本

> ID：13156121
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:45:24.733
> 
> 标签：javascript, jquery, jquery-ui

首先让我们解释一下hack。

通过我的网页使用 Total Validator Tool 时，我收到以下错误：

> [WCAG v1 6.3 (A), US-508-l] 考虑在每个标签之后提供替代方案

由于我的页面严重依赖 javascript，因此我无法提供真正的替代方案，因此我想在每个脚本出现后添加一个空的 noscript 标记。（我知道 hack 很傻，让我们用它作为示例材料，我的帖子的重点是最后的问题）

我尝试了以下方法：

```
$(document).ready(function(){
   $("script").each(function() {
      $(this).after("<noscript></noscript>");
   }); 
}); 
```

出现问题是因为我的页面上有一个 jQueryUI DatePicker 组件。jQuery 在 DOM 准备好后添加了一个脚本部分，因此我的 hack 因错过此部分而失败。

所以问题是：文档准备好后如何处理要执行的 jQuery 库？jQuery 完成工作后如何运行我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:52:10.400

可访问性工具和您收到的警告消息是指导方针。之后放置空的 noscript 标签不会提高可访问性，只会损害您的可信度。

我想您想通过测试的原因是您可以拥有一个完全可访问的网站。我认为最好有一个可访问性声明来解释您为使网站可访问所做的所有选择，以及为什么您的网站没有通过测试。这会让我对你的可访问性更有信心，而不是让网站通过自动化测试。

简而言之，不要试图欺骗测试和读者，而是要遵循指导方针，并解释你是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:58:34.717

```
document.addEventListened('DOMNodeInserted', function(e) {
    if (e.srcElement instanceof HTMLScriptElement) {
        // a new <script> tag was inserted -> e.srcElement
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:55:27.120

1.  如果您`<noscript>`通过 JavaScript 添加一个无意义的标签，因为`<noscript>`只有在浏览器中禁用脚本时才会解析，但如果脚本被禁用，则`<noscript>`根本不会写入

2.  您是否阅读了 WCAG 而不是盲目地尝试修复不属于其中的错误？如果您不能提供一个没有脚本的替代方案，那么您将无法获得可访问的文档。您应该问自己的第一个问题是：我真的需要这种合规性吗？如果这样做，请设置一个无需激活 JavaScript 或任何插件即可 100% 运行的网站。然后将任何脚本增强功能添加到该站点。该方法不需要`<noscript>`标签，它使您的网站可供禁用 JavaScript 的用户使用。

# diff - 从自身中减去 JPEG 图像会产生非空图像

> ID：13156123
> 
> 赞同：2
> 
> 时间：2012-10-31T10:45:30.730
> 
> 标签：diff, jpeg, delta

尝试从自身中减去 JPEG 图像会产生非空图像，即增量图像*几乎*是白色的，但原始图像中的某些内容仍然可见。

我不知道这是否是 JPEG 格式所固有的，或者它是否取决于我使用的程序或我的参数。

我用于测试的程序是[ImageMagick](http://www.imagemagick.org)。

这是命令（尝试使用不同的值`-fuzz`）：

```
compare.exe img.jpg img.jpg delta1.jpg
compare.exe -fuzz 1000.0 img.jpg img.jpg delta2.jpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:51:54.143

可能会出现问题，因为 JPEG 是一种有损格式。因此，图像的解压缩形式没有“完美答案”。这也意味着解压缩器不能被测试为返回完美的答案，并且它很可能在每次运行时返回不同的结果，即使这个结果是正确的并且与给定压缩参数的原始结果足够接近。

您可以期望相同的解压器总是为给定的 JPEG 文件返回相同的位图图像位，但除非解压器已明确测试（这绝对不是常见的要求），否则您的实验结果可能会发生而不意味着解压器是质量比总是返回相同结果的解压器更差。

您可以多次对原始位图进行 PSNR/MSE 比较（即将 .bmp 与解压缩后的 .jpg 进行多次比较），这些测量值可能几乎保持不变。

# jquery - Jquery lightBox 在 ASP.NET 中单击按钮时消失

> ID：13156128
> 
> 赞同：1
> 
> 时间：2012-10-31T10:45:59.760
> 
> 标签：jquery, asp.net, lightbox

我在我的 APS.net Web 应用程序中使用灯箱。
我在这样的灯箱中打开一个 ASPX 页面

```
<a href="frmInstructorNotes.aspx?lightbox[width]=900&lightbox[height]=500&lightbox[modal]=true" 
 class="lightbox">Add Instructor Notes</a> 
```

在 frmInstructor 笔记上有一些文本框和一个按钮。当我从保存在数据库中的文本框中单击按钮数据时。但在保存灯箱消失后，页面 frmInstructor.aspx 在浏览器中打开。
有什么解决方案吗？我也在该页面上使用 ajax 更新面板。

# jsf - 如何根据数据表中另一个下拉列表的值填充下拉列表？

> ID：13156130
> 
> 赞同：1
> 
> 时间：2012-10-31T10:46:27.447
> 
> 标签：jsf, jsf-2

我在两列中`<t:dataTable>`有两个下拉列表。`<h:selectOneMenu>`第二个下拉列表的填充取决于第一个下拉列表的值。

```
<t:dataTable value="#{tablaConfigBean.tablaConfigList}" var="item">
    <t:column>
        <h:selectOneMenu value="#{item.tabla}">
            <f:selectItem itemLabel="SIN CORRESPONDENCIA" itemValue="SIN CORRESPONDENCIA"/> 
            <f:selectItems value="#{tablaConfigBean.tablasList}" var="tabla" itemLabel="#{tabla}"  itemValue="#{tabla}"/>
            <f:ajax listener="#{tablaConfigBean.rellenaCampos}" render="seleccionCampoCorrespondido"/>
        </h:selectOneMenu>
    </t:column>
    <t:column>
        <h:selectOneMenu id="seleccionCampoCorrespondido" value="#{item.columnaCorr}">
            <f:selectItems id="listaCampoCorrespondido" value="#{tablaConfigBean.camposList}" var="campo" itemValue="#{campo}"/>
        </h:selectOneMenu>
    </t:column>
</t:dataTable> 
```

豆：

```
public void rellenaCampos (AjaxBehaviorEvent event) throws Exception {
    dataTable = (HtmlDataTable) event.getComponent().getParent().getParent();
    fila = (cCNtablaConfig) dataTable.getRowData();
    tablaParaCampos = fila.getTabla();      
    camposList = cDAOtablaConfig.rellenaCamposTabla(idSistema, sistema.desEsquema, tablaParaCampos, 3);
} 
```

尽管第一个下拉列表没有任何值，但它`<f:selectItems>`始终默认加载。如果我选择其中一个值，则会`<f:selectItems>`填充第二个下拉列表的 。当两个`<h:selectOneMenu>`s 必须显示从数据库预初始化的值时，就会出现问题。正如我所写的，除非我手动选择第一个下拉列表中的值，否则第二个下拉列表不会加载相应的值。然后，出现预期值。

我尝试过这样的事情：[Execute managebean method from javascript onload event](https://stackoverflow.com/questions/5522702/call-jsf-2-0-managebean-method-from-javascript-onload-event)，但我无法使其工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:43:39.493

您的具体问题是因为最后一列中的第二个下拉列表被绑定到**一个相同**的 bean 属性并且绝不依赖于当前行。

在此构造中，您最好的选择是将当前选择的第一个下拉列表的值传递给`<f:selectItems>`第二个下拉列表的值。

```
<t:dataTable value="#{tablaConfigBean.tablaConfigList}" var="item">
    <t:column>
        <h:selectOneMenu value="#{item.tabla}">
            <f:selectItem itemLabel="SIN CORRESPONDENCIA" itemValue="SIN CORRESPONDENCIA"/> 
            <f:selectItems value="#{tablaConfigBean.tablasList}" var="tabla" itemLabel="#{tabla}"  itemValue="#{tabla}"/>
            <f:ajax render="seleccionCampoCorrespondido"/>
        </h:selectOneMenu>
    </t:column>
    <t:column>
        <h:selectOneMenu id="seleccionCampoCorrespondido" value="#{item.columnaCorr}">
            <f:selectItems id="listaCampoCorrespondido" value="#{tablaConfigBean.getCamposList(item.tabla)}" var="campo" itemValue="#{campo}"/>
        </h:selectOneMenu>
    </t:column>
</t:dataTable> 
```

*（我`<f:ajax listener>`从第一个下拉列表中删除了，我更改`<f:selectItems value>`了第二个下拉列表的）*

并将原来的 ajax listener 方法的工作移到后面的 getter 中`<f:selectItems>`。

```
private Map<Tabla, List<Campo>> tablaCampos = new HashMap<Tabla, List<Campo>>();

public List<Campo> getCamposList(Tabla tablaParaCampos) {
    List<Campo> campos = tableCampos.get(tablaParaCampos);

    if (campos == null) {
        campos = cDAOtablaConfig.rellenaCamposTabla(idSistema, sistema.desEsquema, tablaParaCampos, 3);
        tableCampos.put(table, campos);
    }

    return campos;
} 
```

Note that lazy loading + cache is implemented here. Also note that you should make sure that the `equals()` and `hashCode()` of `Tabla` class are properly implemented.

# matlab - Matlab中的3D堆叠条

> ID：13156133
> 
> 赞同：5
> 
> 时间：2012-10-31T10:46:33.953
> 
> 标签：matlab, plot

我只想在一个`'detached'`条形图中绘制多个堆积条形图。例如，想象这个完全是[条形图](http://mathworks.com/help/matlab/ref/bar3_detached.png)，但堆叠起来，而不是一种单一的颜色。

![在此处输入图像描述](../Images/162b1174e1b491e6f5d4cbff478a05a5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T10:33:45.163

![在此处输入图像描述](../Images/9abb67bf71b51a584184e5388cfc07d8.png)

```
% Set up two random data sets

data1=rand(10);
data2=rand(10);

% plot the first data set

bh=bar3(data1);

% Loop through each row and shift bars upwards

for i=1:length(bh)
      zz = get(bh(i),'Zdata');
      k = 1;

      % Bars are defined by 6 faces(?), adding values from data2 will
      % shift the bars upwards accordingly, I'm sure this could be made
      % better!
      for j = 0:6:(6*length(bh)-6)  
             zz(j+1:j+6,:)=zz(j+1:j+6,:)+data2(k,i);
             k=k+1;
      end

      % Reset Zdata in chart
      set(bh(i),'Zdata',zz);
end

% Set face colour to red for data1

set(bh,'FaceColor',[1 0 0]);

% Apply hold so that data2 can be plotted

hold on;

% Plot data2
bh=bar3(data2);

% Set face color to blue

set(bh,'FaceColor',[0 0 1]);
hold off; 
```

# animation - Windows 8 应用程序 - 单击按钮时的简单动画？

> ID：13156135
> 
> 赞同：1
> 
> 时间：2012-10-31T10:46:45.657
> 
> 标签：animation, button, windows-8

所以我将 2 个相同大小的 StackPanels 放在相同的位置。第一个 StackPanel 的 Visibility 是 Visible，而第二个是 Collapsed。然后我将此代码添加到我的按钮：

```
 private async void Button_Clicked(object sender, RoutedEventArgs e)
    {
         StackPanel1.Visibility = Visibility.Collapsed;
         StackPanel2.Visibility = Visibility.Visible;
    } 
```

这只是使第一个 StackPanel 消失，第二个可见。

但是，我想添加一个简单的动画，使第一个 StackPanel 向左淡出消失，第二个 StackPanel 从右侧恢复活力。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:48:51.427

你可以看到这篇关于动画[的 MSDN 帖子。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh452701%28v=win.10%29.aspx)您正在寻找的动画是淡入/淡出动画。你会[在这里找到淡入动画的代码](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.media.animation.fadeinthemeanimation.aspx)

# extjs4 - extjs-all-debug updateIndexes 无法读取未定义的属性“internalId”

> ID：13156141
> 
> 赞同：2
> 
> 时间：2012-10-31T10:47:08.083
> 
> 标签：extjs4

在 Extjs 4 下，通过反复扩展和折叠树面板的节点或子树，有些有孩子，有些没有，我最终得到以下错误无法读取由方法 'updateIndexes 的 ext-all-debug 发出的未定义的属性 'internalId' '。有人遇到过吗？谢谢。D.

# sql - WPF 查询生成器控件

> ID：13156142
> 
> 赞同：1
> 
> 时间：2012-10-31T10:47:10.490
> 
> 标签：sql, wpf, designer, builder

我想知道是否有任何满足这些条件的 sql 查询生成器：

1.  可用作 WPF 控件，以便它可以集成到我的 WPF 应用程序中
2.  至少支持 MS SQL Server 和 Oracle
3.  视觉表示和拖放支持（表格、列）
4.  SQL 表达式作为结果属性（没有花哨的“用户友好”元概念）
5.  可以手动编辑 SQL 表达式（更改视觉表示）
6.  之前无需建立元数据模型

我已经在网上花了一些时间得到以下结果

1.  ActiveQueryBuilder 功能完善，但不适合 1.（缺乏 WPF 支持）[http://www.activequerybuilder.com/index.html?from=about&edition=net]
2.  KorzhEasyQueryNET 不适合 5.（SQL 未写回可视化）和 6.（需要元数据模型）[http://devtools.korzh.com]
3.  查询对象不是一个组件，而是一个独立的工具 [http://www.query-objects.com/]

那么，有谁知道替代方案吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T17:26:38.240

AFAIK，EasyQuery 并不严格要求“之前建立元数据模型”。您可以“即时”创建它，直接从数据库中获取元数据。以下是我在他们的网站上找到的说明：http: [//docs.korzh.com/easyquery/how-to/build-data-model-from-db](http://docs.korzh.com/easyquery/how-to/build-data-model-from-db)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T14:00:45.533

ActiveQuery 现在也有 wpf 版本

# android - 我应该如何找到我所在位置的纬度和经度？

> ID：13156143
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:47:10.177
> 
> 标签：android, google-maps, latitude-longitude

我想获得我所在位置的纬度和经度，之后，我将那里转换为位置。但我不知道我应该如何获得我所在位置的纬度和经度？

位置.java：

```
public class Location extends MapActivity {

MapView map;
MapController controller;
GeoPoint mygeo;
GeoPoint searchgeo;

@Override
public void onCreate(Bundle onSavedInstance){
    super.onCreate(onSavedInstance);
    setContentView(R.layout.location);

    map=(MapView)findViewById(R.id.mapView);
    LinearLayout zoomLayout=(LinearLayout)findViewById(R.id.zoom);
    View zoomView=map.getZoomControls();
    zoomLayout.addView(zoomView,new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,Gravity.BOTTOM+Gravity.CENTER_HORIZONTAL));

    map.displayZoomControls(true);
    //
    controller=map.getController();
    map.setSatellite(true);

    initMyLocation();

}
private void initMyLocation(){
    final MyLocationOverlay overlay=new MyLocationOverlay(this,map);
    overlay.enableMyLocation();
    overlay.enableCompass();
    overlay.runOnFirstFix(new Runnable(){
        public void run(){
            controller.setZoom(8);
            controller.animateTo(overlay.getMyLocation());
        }
    });
    map.getOverlays().add(overlay);

}

@Override 
public boolean isRouteDisplayed(){
    return false;
}
 } 
```

谢谢

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:24:26.387

请按照以下步骤操作：

第 1 步：使用按钮创建如下所示的 main.xml。当你按下它应该为你当前的位置敬酒。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<Button
 android:id="@+id/retrieve_location_button"
 android:text="Retrieve Location"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 />
</LinearLayout> 
```

第 2 步：创建一个 Activity，如下所示：

包 com.xxx.yyy.zzz；

```
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class LbsGeocodingActivity extends Activity {

        private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
        private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

        protected LocationManager locationManager;

        protected Button retrieveLocationButton;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

            locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER,
                    MINIMUM_TIME_BETWEEN_UPDATES,
                    MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                    new MyLocationListener()
            );

        retrieveLocationButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    showCurrentLocation();
                }
        });       

        }   

        protected void showCurrentLocation() {

            Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

            if (location != null) {
                String message = String.format(
                        "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                        location.getLongitude(), location.getLatitude()
                );
                Toast.makeText(LbsGeocodingActivity.this, message,
                        Toast.LENGTH_LONG).show();
            }

        }  

        private class MyLocationListener implements LocationListener {

            public void onLocationChanged(Location location) {
                String message = String.format(
                        "New Location \n Longitude: %1$s \n Latitude: %2$s",
                        location.getLongitude(), location.getLatitude()
                );
                Toast.makeText(LbsGeocodingActivity.this, message, Toast.LENGTH_LONG).show();
            }

            public void onStatusChanged(String s, int i, Bundle b) {
                Toast.makeText(LbsGeocodingActivity.this, "Provider status changed",
                        Toast.LENGTH_LONG).show();
            }

            public void onProviderDisabled(String s) {
                Toast.makeText(LbsGeocodingActivity.this,
                        "Provider disabled by the user. GPS turned off",
                        Toast.LENGTH_LONG).show();
            }

            public void onProviderEnabled(String s) {
                Toast.makeText(LbsGeocodingActivity.this,
                        "Provider enabled by the user. GPS turned on",
                        Toast.LENGTH_LONG).show();
            }

        }

    } 
```

第 3 步：创建具有以下三个权限的 AndroidManifest.xml：

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

当您运行此应用程序时，您会在 android 设备的屏幕上找到一个按钮。当您按下此按钮时，您将看到 Toast 消息，其中包含您当前 gps 位置的纬度和经度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:52:04.910

看一下这个。[它准确显示了如何获取您当前的位置，并在关闭并重新打开 Android 上的应用程序后](https://stackoverflow.com/questions/1389811/gps-not-update-location-after-close-and-reopen-app-on-android)获取其经纬度 GPS 不更新位置

请注意，您必须在清单中包含必要的权限才能使其正常工作

如此处所示[https://stackoverflow.com/a/3380641/975959](https://stackoverflow.com/a/3380641/975959)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:57:23.190

使用位置监听器获取您当前的位置（纬度和经度）。

这将调用位置侦听器

```
 LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
    LocationListener mlocListener = new MyLocationListener();  
    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
```

你可以在这堂课上得到你的经纬度

```
 public class MyLocationListener implements LocationListener

    {

    @Override 
    public void onLocationChanged(Location loc) 
    {        
     double longitude =  loc.getLongitude(); 
     double latitude = loc.getLatitude();  
    }  
    @Override 
    public void onProviderDisabled(String provider) 
    { 
       Toast.makeText( getApplicationContext(),"Enable GPS",Toast.LENGTH_SHORT ).show();
       Intent enablegps = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);    
       startActivity(enablegps);
    }

    @Override 
    public void onProviderEnabled(String provider) 
    { 
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();  
    }

    @Override 
    public void onStatusChanged(String provider, int status, Bundle extras) 
    {} } 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:00:27.577

特别是在您的情况下，请在 initMyLocation() 中执行此操作

```
double latitude = (overlay.getMyLocation().getLatitudeE6())/ 1e6;

double longitude = (overlay.getMyLocation().getLongitudeE6())/ 1e6; 
```

# cocos2d-iphone - 等到不同 CCSprite 上的所有 CCAction 完成

> ID：13156144
> 
> 赞同：0
> 
> 时间：2012-10-31T10:47:13.403
> 
> 标签：cocos2d-iphone, ccaction

我正在开发一个简单的 cocos2d 游戏，我想在其中`CCSprite`同时为两个 s 设置动画，为此我只需`CCAction`在各自的 `CCSprite' 上设置 s，如下所示。

```
[first runAction:[CCMoveTo actionWithDuration:1 position:secondPosition]];
[second runAction:[CCMoveTo actionWithDuration:1 position:firstPosition]]; 
```

现在我想等到动画完成，所以我可以执行下一步。我应该如何**等待**这些动画完成？

实际上有两个方法调用，第一个通过上面的代码动画对象，第二个调用另一个动画。

我需要延迟第二个方法调用，直到第一个动画完成。（我不想使用`CCCallBlock`块，因为我想从与第一个调用者相同的调用者调用第二个方法。

**编辑**

我试过这个..

```
__block BOOL moving = YES;
[second runAction:[CCSequence actions:[CCMoveTo actionWithDuration:1 position:firstPosition], [CCCallBlockN actionWithBlock:^(CCNode *node){
            CCLOG(@"\n\n\n\n\n\n\n\nMovement Finished\n\n\n\n\n\n\n\n");
            moving = NO;
        }],nil]];
while(moving); 
```

但是`CCCallBlock`永远不会被调用，因此永远卡在`while`循环中=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:24:32.340

如果我不从 cocos 的文档中挖掘出来，我会实现自己的观察者对象，观察一组动画是否完成。这将需要几个快速步骤：

1.  创建自己的课程，例如`PendingOperationsCounter`
2.  实例化对象`PendingOperationsCounter`
3.  为此特定注册完成操作`PendingOperationsCounter`
4.  注册每个开始动画到您的`PendingOperationsCounter`, 注册时增加挂起的操作计数器
5.  当动画完成时，它会减少操作计数器
6.  如果计数器再次为零，它会触发您注册的自己的完成动作

完毕！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:12:28.573

首先使用 CCSequence 和 1) MoveTo 和 2) CallBlock，而不是先使用简单的 CCMoveTo。在第二个开始的调用块中，再次使用 CCSequence 来 1) moveTo 和 2) 调用选择器来做任何你想做的事情。它将在这个用例中工作。对于更通用的方法，请按照上述答案作为指导。

# redgate - 我想修改 Redgate 源代码控制 Git.xml 文件以包含提交和推送

> ID：13156145
> 
> 赞同：3
> 
> 时间：2012-10-31T10:47:30.067
> 
> 标签：redgate

以下是 redgates 源代码控制中 git.xml 文件的摘录

```
<element>
<key type="string">Commit</key>
<value version="1" type="GenericHookCommand">
<CommandLine>git commit -F "($MessageFile)" -o "($ScriptsFolder)\"</CommandLine>
<Verify>exitCode == 0</Verify>
</value>
</element> 
```

我希望对其进行修改以包含推送，因此当您在管理工作室中进行提交时，它也会推送到 git。

我尝试添加另一个命令，例如

```
<CommandLine>git commit -F "($MessageFile)" -o "($ScriptsFolder)\"</CommandLine>
<commandline>git push</commandline> 
```

也试过

```
 <CommandLine>git commit -F "($MessageFile)" -o "($ScriptsFolder)\" && git push</CommandLine> 
```

但两者都不起作用，任何关于如何获得提交和推动工作的想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:28:02.917

问题在于裸与号。将行更改为：

```
<CommandLine>git commit -F "($MessageFile)" -o "($ScriptsFolder)\" &amp;&amp; git push</CommandLine> 
```

您也可以将其包装在 CDATA 中，但以上内容似乎对我有用。

注意：如果推送或拉取需要您输入密码，则 Red Gate 插件将停止并强制您终止 SSMS。因此，请确保您可以在更新 XML 之前先通过命令行执行 git pull 和 git push。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:50:38.730

您使用 SQL Source Control 获得的命令文件实际上只是为了同步您的本地存储库而设计的，而不是用于执行推/拉操作。

我认为您建议的任何一种方法都行不通-对于第一种，我认为该工具甚至都不知道运行第二个命令，而对于第二个选项，我不相信您可以将命令连接起来那样。

我唯一的建议（并且从未尝试过AFAIK）是编写自己的dos批处理文件（或powershell，如果那是你的东西），它接受相同的参数，然后运行你想要的两个命令。

然后，您可以为 SQL Source Control 创建一个新的配置文件，以直接执行您的批处理/powershell 而不是 git。

# asp.net - 我如何在 mysql 中一起使用 isnull 和 inbetween 函数进行约会

> ID：13156149
> 
> 赞同：2
> 
> 时间：2012-10-31T10:47:40.273
> 
> 标签：asp.net, mysql

我在 mysql 中有一个表，有两列开始日期和结束日期。我有一个搜索选项，我可以在其中输入日期并进行搜索。文本框可能是空的，所以我使用了 isnull 函数。现在我实现的功能是我们必须输入确切的开始日期和结束日期，然后只返回值。我想返回数据介于开始日期和结束日期之间

以下是存储过程中的代码。

```
 FROM Promo_ODM_ShipWithout
WHERE
 StartDate LIKE  ISNULL(@StartDate,StartDate) 
                AND ISNULL(EndDate,-1) Like ISNULL(ISNULL(@EndDate,EndDate)  ,-1) 
                AND  SKUCode Like ISNULL(@SkuCode,SKUCode)

                 ORDER BY Id
                    )RowSet
         WHERE ROW_NUM >@LeftStart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:53:48.353

```
SELECT
  *
FROM 
  Promo_ODM_ShipWithout
WHERE
(
  @StartDate IS NULL OR EndDate >= @StartDate
)
AND
(
  @EndDate IS NULL OR EndDate <= @EndDate 
) 
```

# ruby-on-rails - 如何在 Rails 共享主机上执行 restart.txt ruby

> ID：13156150
> 
> 赞同：1
> 
> 时间：2012-10-31T10:47:45.070
> 
> 标签：ruby-on-rails, ruby, hosting

我已经在 tmp 文件夹中创建了 restart.txt，但是当我将一些更改上传到站点时，没有任何变化，那么如何手动执行 restart.txt？还是应该自动启动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:50:11.680

你不执行它，你触摸它。

```
cd /path/to/your/app && touch tmp/restart.txt 
```

这是一种向Passenger 发出重新启动worker 的信号。不过，我不知道您的共享托管环境（它是否可以在那里工作）。

# powershell - 结束管道操作

> ID：13156153
> 
> 赞同：1
> 
> 时间：2012-10-31T10:47:52.660
> 
> 标签：powershell, pipeline

当您在过滤器中时，有什么方法可以结束管道操作？

一个很好的用途是获取列表的前 n 个元素，类似于 SQL 的 TOP 语句。如果我们编写一个过滤器，称之为“Top”，我们可以像这样检索前 3 个元素：

```
dir | Top 3 
```

一旦我们返回了前三个，我们就不需要再处理任何元素，实际上我们希望能够告诉管道

> 请不要再给我任何元素

**我知道 Select-Object 有 -First 参数，但这不是我要问的问题。**

我已经回答了[Powershell 等效于 F# Seq.forall](https://stackoverflow.com/questions/2092159/powershell-equivalent-to-f-seq-forall/13142823#13142823)的问题，但我宁愿将其实现为结束管道输入的过滤器。如果有一个名为“end-pipeline”的操作，我会将 ForAll 实现为：

```
filter ForAll([scriptblock] $predicate) {
    process {
        if ( @($_ | Where-Object $predicate).Length -eq 0 ) {
            $false;
            end-pipeline;
        }
    }
    end {
        $true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:06:32.983

您可以使用“break”语句，它将表现为您的“end-pipeline”cmdlet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:56:41.727

`return`如果条件满足，也许你可以添加一个。

看[这里](http://powershell.com/cs/blogs/tobias/archive/2010/01/01/cancelling-a-pipeline.aspx)的一些例子

这可能有效：

```
filter ForAll([scriptblock] $predicate)
{
  process
         {        
            if ( @($input | Where-Object $predicate).length -eq 0 ) 
              {        
                 $false
                 return;
              }
         }
  end    
         {
            $true
         }
} 
```

这有效：

```
filter aaa {    
process 
{      
  if ( ++$i -gt 5 )
  {
      return
  }
  else
  {
      $_
  }
}
}

dir | aaa # return first five element of the pipe... 
```

# blackberry - 在黑莓中申请访问无线电信息的权限是什么

> ID：13156155
> 
> 赞同：0
> 
> 时间：2012-10-31T10:47:57.107
> 
> 标签：blackberry, radio

当我安装我的应用程序时，会弹出一个对话框，询问用户是否有权访问 Radio 信息。我添加了 ApplicationPermissions.PERMISSION_LOCATION_DATA 但它仍然会弹出相同的对话框。然后我使用了 ApplicationPermissions.PERMISSION_LOCATION_API 但结果仍然相同。如何防止弹出对话框？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:20:40.147

这就是平台的工作方式。它至少应该向用户询问一次应用权限。取决于用户是否保存他的选择，它将不再询问。

它与 android 非常相似，用户必须在安装过程中授予应用程序的权限。

# oracle10g - oracle中的connect by子句出现奇怪的错误

> ID：13156156
> 
> 赞同：0
> 
> 时间：2012-10-31T10:48:02.480
> 
> 标签：oracle10g

我有 2 个测试 oracle 数据库，每个数据库都包含一个名为部门 (dept_no,dept_name, main_dept_no) 的表，其中每个部门条目通过 MAIN_DEPT_NO 列中的 dept_no 连接到主部门。奇怪的问题是，当我在第一个数据库上执行查询时，我得到 D.DEPT_NO is not available column (D.* all columns from department table) 但它在那里，更奇怪的是这个查询在第二个数据库上工作正常.

我必须在数据库中进行任何设置以便它可以与 connect by 子句一起使用吗？

```
SELECT SUBSTR(LPAD(' ', 4*(LEVEL))  || '· ' ||DEPT_NAME,1,50)  DEPT_NAME_HY, D.*
FROM PERSONEL.DEPARTMENT D
START WITH MAIN_DEPT_NO IS NULL
CONNECT BY PRIOR DEPT_NO=MAIN_DEPT_NO 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:38:08.833

为了解决这个问题，我做了如下，

```
SELECT SUBSTR(LPAD(' ', 4*(LEVEL))  || '· ' ||DEPT_NAME,1,50)  DEPT_NAME_HY, D.DEPT_NO,D.DEPT_NAME,D.MAIN_DEPT_NO  
FROM PERSONEL.DEPARTMENT D
START WITH MAIN_DEPT_NO IS NULL
CONNECT BY PRIOR DEPT_NO=MAIN_DEPT_NO 
```

查询可能在 oracle 11g D.* 中开始工作，以这种方式与 connect by say 一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:04:39.987

下面的代码解决了这个问题。11.2.0.1 版本中似乎有一个错误，解决方法是：alter session set optimizer_features_enable='11.1.0.7'; （来自 Oracle 支持）

# android - Nexus 7 和 Kindle Fire HD，想法不同

> ID：13156157
> 
> 赞同：15
> 
> 时间：2012-10-31T10:48:02.763
> 
> 标签：android, kindle-fire, hdpi, nexus-7

我正在为平板电脑 7 英寸 Kindle Fire HD 和 Nexus 7 开发应用程序。这两个应用程序具有相同的大小和相同的屏幕分辨率。但是，我运行我的应用程序，它是非常不同的。为什么？

这似乎是因为nexus 7被检测为TVDPI，而Kindle Fire HD是HDPI。如何基于模型 1280 * 800 进行相同的渲染？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T23:55:54.960

好吧，看来您已经发现了为什么两者存在差异，这是因为它们报告了不同的密度比例因子：

*   Nexus 7：TVDPI：比例因子 = 1.333
*   Kindle Fire HD：HDPI：比例因子 = 1.5

**那么，当它们在技术上具有相同的物理尺寸和分辨率时，为什么它们会报告不同的结果呢？**

CORE 问题实际上存在，因为一台设备是 Google Play 设备 (Nexus)，而另一台不是 (Kindle)。所有具有 Google Play（和其他 Google 应用程序）的 Android 设备只能通过称为兼容性测试套件 (CTS) 的东西来做到这一点，该套件会验证此类设置是否符合他们提出的标准。标准本身记录在每个版本的兼容性定义文档 (CDD) 中。 [这是 Android 4.0 的 CDD 的链接](http://source.android.com/compatibility/4.0/android-4.0-cdd.pdf)（第 7.1 节涉及屏幕尺寸和密度）。CDD 告诉设备制造商他们应该报告数字上最接近屏幕实际 DPI 的比例因子，在这种情况下实际上是 TVDPI。

亚马逊设备不使用任何 Google 应用程序，包括 Google Play。虽然遵循相同的标准可能符合他们的最大利益，但他们不受这些标准的约束，而且通常不被遵循。当 TVDPI 出现在 Nexus 7 上时，每个人都在偷偷摸摸，但如果亚马逊在设计过程中引用了 CDD，他们就会知道这一点。

**这如何导致他们表现不同？**

差异不在您的布局选择中。显然，从您的屏幕截图来看，这两种设备都按照您的预期选择了正确的布局。更改`sw`布局目录上的值只会影响哪些设备将选择该布局......它不会改变任何关于事物如何缩放的内容。不要费心尝试将布局本身放置在密度特定的目录中......布局应该是灵活的。

相反，问题在于在与密度无关的像素单元（即 dip 或 dp）上进行的任何尺寸或尺寸计算，例如文本尺寸、您可能创建的任何固定视图尺寸以及可绘制尺寸。

因为这两种设备**选择**了不同的资源缩放，所以您使用的任何可绘制资源或您在“dp”中定义的任何值都会导致微小的变化。让我举两个例子：

您定义 a 的文本大小`TextView`为`16dp`。在 Nexus 7 上，这将在 21 像素处绘制文本。Kindle Fire HD 将以 24 像素绘制相同的文本。差异很小......但它存在。

可绘制图像也是如此。如果您只`drawable-mdpi`在 48x48中定义了一个图像，而`drawable-hdpi`在 72x72 中定义了相同的图像，Kindle 有一个 72px 的图像可以直接使用，而 Nexus 会创建一个比例为 64px 的图像，因此两个资产之间存在 8 个像素的差异。

**我该怎么做才能使两者看起来更相似？**

在大多数情况下，我会说你不应该。通常，所做的缩放不会在很大程度上影响应用程序的结果，除非布局的约束设置了太多的硬编码大小。

但是，一般而言，如果您需要为此目的专门更改 UI 的某些部分，则解决方案是为`-tvdpi`您认为需要它们的情况定义特定的资源和维度（同样，我不建议扩展所有内容）你的应用程序来满足这种情况）。

对于文本或视图大小等内容，这意味着您可能需要一个`values-tvdpi/dimensions.xml`文件和一个默认`values/dimensions.xml`文件。使用上面的示例，您可以将默认文本大小定义为 16dp，但在该`-tvdpi`位置，定义与 18dp 相同的尺寸。这将导致两个设备将最终文本缩放到 24 像素。在使用实际尺寸的代码中，将其作为`@dimen/myTextSize`而不是`16dp`直接引用。

对于可绘制项目，添加一个`drawable-tvdpi`目录并缩放这些资产以匹配您认为它们应该在 Nexus 7 等设备上绘制的方式。再次与我们之前的示例一样，将相同的图像文件从`drawable-hdpi`文件夹复制到`drawable-tvdpi`文件夹中，这样两个设备将绘制相同的图片为 72 像素。

为避免在多个位置复制相同的资产，您还可以使用别名来执行此操作。将图像本身放入`drawable/`一个特殊的名称中，并在两个地方使用`values-tvdpi/drawables.xml`和`values-hdpi/drawables.xml`引用单个资产。有关别名的更多信息，[请参阅此文档](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)。这些示例适用于布局，但相同的范例适用于可绘制对象（或任何资源），方法是更改​​为`type="drawable"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T01:53:10.373

因为 Nexus7 是 tvdpi 设备，它使用 layout-sw600dp 资源（基于 213dpi 计算），FireHD 是 HDPI 设备并最终使用 layout-sw533dp 资源（基于 240dpi 计算）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:49:36.347

也许您应该使用 layout-tvdpi 和 layout-hdpi？

# php - 来自 MySQL 的 Json 菜单结构

> ID：13156159
> 
> 赞同：0
> 
> 时间：2012-10-31T10:48:10.587
> 
> 标签：php, mysql, json

我一直在为这个问题转来转去，似乎很简单。我正在尝试使用 PHP/MYSQL 生成菜单/子菜单 json：这些是表：

```
 CREATE TABLE `menuHome` 
  `id`,
  `titleName`

   CREATE TABLE `menu` 
  `id`,
  `parentmenu`,
  `name` 
```

'menuHome' 将有 'titleName' 例如 'About Us' 通过 'parentmenu' 在 'menu' 上加入 'id' 这将有多个条目，例如 'history'、'Owners'、'News'。

我试图实现的结构是：

```
`
 {
  "menu" : {
    "sections" : [
      {
        "title" : "About Us",
        "items" : [
          {
            "name" : "History",
            "id" : "0909"
          },
          {
            "name" : "Owners",
            "id" : "0910"
          },
          {
            "name" : "News",
            "id" : "0916"
          }
        ]
      },
      {
        "title" : "Contact Us",
        "items" : [
          {
            "name" : "Address",
            "id" : "0949"
          },
          {
            "name" : "Map",
            "id" : "0978"
          }
        ]
      },
      {
        "title" : "Products",
        "items" : [
          {
            "name" : "Jeans",
            "id" : "1010"
          },
          {
            "name" : "Tables",
            "id" : "1088"
          },
          {
            "name" : "Shoes",
            "id" : "2424"
          }
        ]
      }
    ]
  }
}

` 
```

我已经尝试过，虽然，对于，对于很多配置中的每一个，但我不能让它构建正确的数组结构来编码为 json。我现在处于代码盲区阶段，所以任何帮助都会得到很大的帮助

这是我最后一次尝试：

```
 $sql_query  = 'SELECT menuHome.titleName, menuHome.id FROM menuHome';
        $result = $mysqli->query($sql_query);
        $menu = array();
        while ($row = $result->fetch_assoc()) {

        $menuid = $row["id"];

        $sql_query2  = 'SELECT menu.name, menu.id FROM menu WHERE menu.parentmenu = "' .  $menuid . '"';

        $result2 = $mysqli->query($sql_query2);

        while ($row2 = $result2->fetch_assoc()) {

         $menu[$row["titleName"]][] = $row2;

         }
        }

return json_encode($menu); 
```

这是上面带来的结果：

```
{
  "About Us" : [
    {
      "name" : "History",
      "id" : "1"
    },
    {
      "name" : "Owners",
      "id" : "2"
    },
    {
      "name" : "News",
      "id" : "3"
    }
  ],
  "Contact Us" : [
    {
      "name" : "Address",
      "id" : "4"
    },
    {
      "name" : "Map",
      "id" : "5"
    }
  ],
  "Products" : [
    {
      "name" : "Jeans",
      "id" : "6"
    },
    {
      "name" : "Tables",
      "id" : "7"
    },
    {
      "name" : "Shoes",
      "id" : "8"
    }
  ]
} 
```

问题是我无法事先获得“对”-“标题”=“关于我们”......这很简单，但我对这个问题已经脑死了。

我可以在 json_encode 之前添加这个：

```
 $menuoutput = array("menu" => array("sections" => array($menu))); 
```

但是如何在“关于我们”之前显示“关键”“标题名称”或仅“标题”...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:06:04.913

*   首先我假设你的数据是这样的 -

> 插入`menu`
> ( `id`, `parentmenu`, `name`)
> 值
> (1,1,"history"),
> (2,1,"owners"),
> (3,1,"news"),
> (4,2,"address"),
> (5, 2,"map"),
> (6,3,"jeans"),
> (7,3,"tables"),
> (8,3,"shoes");

> INSERT INTO menuHome
> ( `id`, `titleName`)
> VALUES
> (1,"关于我们"),
> (2,"Contact Us"),
> (3,"Products");

*   其次，我建议您将查询更改为-

> SELECT pm.id, cm.id, pm.titleName, cm.name FROM menu as cm
> LEFT JOIN (menuHome as pm)
> ON (pm.id = cm.parentmenu);

*   第三，让我们开始编码

为了我们的目的，我们想要这样的东西 -

> $arys = ["menu"=>["sections" => [
> ["title" => "关于我们", "items" => [
> ["name"=>"History","id"=>1] ,
> ["name"=>"Owners","id"=>2],
> ["name"=>"News","id"=>3]
> ]],
> ["title" => "联系我们", "items" => [
> ["name"=>"Address","id"=>4],
> ["name"=>"Map","id"=>5]
> ]],
> ["title" => "Products", "items" => [
> ["name"=>"Jeans","id"=>6],
> ["name"=>"Tables"," id"=>7],
> ["name"=>"鞋子","id"=>8]
> ]]
> ]
> ]
> ];

所以让我们建立它

> $querys = "Select pm.id AS pmd , cm.id AS cmd, pm.titleName AS pmt, cm.name AS cmt from menu as cm left join (menuHome as pm) on (pm.id = cm.parentmenu) 订单通过 pmd, cmd ";
> $result = mysql_query($querys);
> $jsary = ["menu" => ["sections" => []]];
> $lastPid = 0;
> $currentPid = 0;
> $title = "";
> $ifff = 0;
> $elss = 0;
> while($row = mysql_fetch_array($result))
> {
>         $currentPid = $row['pmd'];
>         $title = $row['pmt'];

```
 $cmd = $row['cmd'];
    $cmt = $row['cmt'];

    if($lastPid != $currentPid)
    {
            $insAry = [];
            $insAry = ["title"=> $title, "items" => [["name" => $cmt, "id" => $cmd]]];
            array_push($jsary["menu"]["sections"], $insAry);
            $lastPid = $currentPid;
            $ifff = $ifff + 1;
            $currentPid = 0;
    }
    else
    {
            $ind = 0;
            if($ifff > 0)
            {
                    $ind = $ifff-1;
            }
            $insAry = [];
            $insAry = ["name" => $cmt, "id" => $cmd];
            array_push($jsary["menu"]["sections"][$ind]["items"], $insAry);
    }} 
```

现在只需调用 json_encode()

> json_encode($jsary);

你会得到你想要的输出

# windows-8 - 在意外的时间调用了一个方法。（来自 HRESULT 的异常：0x8000000E）异常被一个方法抛出

> ID：13156163
> 
> 赞同：2
> 
> 时间：2012-10-31T10:48:23.023
> 
> 标签：windows-8

我在 Windows 8 应用程序中的 C# 中创建了一个方法，我从 XML 文件中读取数据并将其存储在对象中并将对象值绑定到 UI 元素中。

我正在使用一些异步文件读取和写入方法，由于我在主页构造函数中调用此方法，我无法使用 await 关键字，所以我得到以下异常。“在意外的时间调用了一个方法。（来自的异常HRESULT: 0x8000000E)"

当我在没有调试的情况下运行应用程序但当我通过单步执行代码（使用 F11）进行调试时，我得到了所需的输出。如何在不调试的情况下获得所需的输出

我已经粘贴了下面的代码片段

```
public object mymethod()
{
    var FileshareDetails = Windows.Data.Xml.Dom.XmlDocument.LoadFromFileAsync(file, localsettings);
    var QFileshare = FileshareDetails.GetResults();
    XmlNodeList nodeList = QFileshare.SelectNodes("/FileShareDetails/FileShare");

    foreach (IXmlNode node in nodeList)
    {
        QSFileShare FileShare = new QSFileShare();
        FileShare.FileShareName = node.Attributes[0].InnerText;
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T19:57:59.453

`GetResults`是非阻塞的，即它会立即尝试从异步执行的方法中获取结果，即使该方法尚未完成运行并且尚未获得结果。

您必须将`await`关键字与以异步结尾的方法一起使用。这意味着您的方法`mymethod`必须符合异步模式。`async`如果您正在编写 Windows 8 应用程序，则值得一读。

Async 是一种编译器技巧，旨在使其更容易，并让人们不阻塞 UI 线程并制作更具响应性的应用程序。

或者，如果你想阻塞线程，你可以`GetResults()`用`AsTask().Result`.

除了单元测试或肮脏的研究/演示代码之外，没有太多阻止的充分理由。如果你不得不阻塞，你可能在架构层面做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:44:52.753

您可以将代码放在 onNavigatedTo 事件中

# c# - 在实体框架中查询

> ID：13156165
> 
> 赞同：0
> 
> 时间：2012-10-31T10:48:26.643
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在研究实体框架，我创建了一个返回我的表列表的方法，我正在检索基于 grpID 的数据（这是外键，所以我可以有多个记录）我已经将这些 grpID 保存在一个数组中所以我想在实体框架上运行 IN 命令，以便我可以在单个列表中获取记录，我如何应用 In 命令，我的代码如下

```
 public List<tblResource> GetResources(long[] grpid)
        {
            try
            {               
                return dataContext.tblResource.Where(c => c.GroupId == grpid && c.IsActive == true).ToList();//This code is not working as i am having array of groupIds

            }
            catch (Exception ex)
            {                
                return ex;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:50:16.670

您可以使用 Contains 来模仿`Select IN`查询之类的内容

```
dataContext.tblResource.Where(c=> gripid.Contains(c.GroupId) 
                                  && c.IsActive == true)
                       .ToList(); 
```

`grpid`您的 ID 数组在哪里。

您可以考虑以下示例。假设您有具有两个属性 ID 和 Name 的 Product 类，以及包含 ID 的 ProductList 数组。Select IN 查询应该类似于：

```
int[] productList = new int[] { 1, 2, 3, 4 };
List<Product> products = new List<Product>();
products.Add(new Product { ID = 1, Name = "Test" });
products.Add(new Product { ID = 2, Name = "Test" });
products.Add(new Product { ID = 6, Name = "Test" });
var myProducts = from p in products
                 where productList.Contains(p.ID)
                 select p;
var methodChainingQuery = products.Where(c => productList.Contains(c.ID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:53:06.153

怎么样...

```
dataContext.tblResource.Where(c=> gripid.Any(GroupId) 
                                && c.IsActive == true).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:51:58.463

将[**IEnumerable.Contains**](http://msdn.microsoft.com/en-us/library/bb352880.aspx)与组 id 数组一起使用。

```
List<tblResource> GetResources(long grpid)
{
     try
     {               
         return dataContext.tblResource.Where(c => grpIDArray.Contains(c.GroupId)
         && c.IsActive == true).ToList();    
     }
     catch (Exception ex)
     {                
          return ex;
     }
 } 
```

# iphone - 每天下午 5 点重复 UILocalNotification

> ID：13156166
> 
> 赞同：2
> 
> 时间：2012-10-31T10:48:27.673
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uilocalnotification

如何每天下午 5 点重复 UILocalNotification ？以下是我设置自定义时间的代码。但我想每天在自定义或可能是静态时间通知用户。我正在使用 iOS 6。

```
 -(void)scheduleNotification{

 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateFormat:@"h:mm a"];
NSDate *dateFromString = [[NSDate alloc] init];

dateFromString = [dateFormatter dateFromString:timeStr];

UILocalNotification *localNotif = [[UILocalNotification alloc] init];

if (localNotif == nil)
    return;

localNotif.fireDate = dateFromString;

localNotif.repeatInterval = kCFCalendarUnitDay;
localNotif.timeZone = [NSTimeZone defaultTimeZone];

// Notification details
localNotif.alertBody = @"Reminder is set";
// Set the action button
localNotif.alertAction = @"Ok";

localNotif.soundName = UILocalNotificationDefaultSoundName;
localNotif.applicationIconBadgeNumber = 1;

// Specify custom data for the notification
NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:@"Local Push received while running", @"key", nil];
localNotif.userInfo = infoDict;

// Schedule the notification
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T11:21:21.703

用这个。它可以帮助你

```
NSDateFormatter *dat= [[NSDateFormatter alloc]init];
[dat setLocale:[NSLocale currentLocale]];
[dat setTimeZone:[NSTimeZone systemTimeZone]];

//[dat setDateFormat:@"YYYY-MM-dd"];// YYYY-MM-dd hh:mm a
//NSString *dateM=[dat stringFromDate:datM];
//[dat setDateFormat:@"YYYY-MM-dd h:mm a"];
NSDate *reminderDate=[NSDate date];
reminderDate =[reminderDate dateByAddingTimeInterval:1*24*60*60];

UILocalNotification  *missingDreamNotify=[[UILocalNotification alloc]init];
missingDreamNotify.fireDate=reminderDate;
missingDreamNotify.timeZone = [NSTimeZone defaultTimeZone];
missingDreamNotify.alertBody = @"Reminder is set";
missingDreamNotify.alertAction = @"Show me";
missingDreamNotify.soundName = UILocalNotificationDefaultSoundName;
missingDreamNotify.applicationIconBadgeNumber = 1;
missingDreamNotify.repeatInterval = NSDayCalendarUnit;

[[UIApplication sharedApplication] scheduleLocalNotification:missingDreamNotify]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T17:02:07.040

这是我使用 NSCalendar 的解决方案：

```
// called in didFinishLaunchingWithOptions
/* 

 cancel all local notifications at start up and reset them
 as repeating notifications.

 processDailyNotifications
    register to system
    cancel all
    for i in notifArray:
        setDailyNotificationAtHour:minute:

 setDailyNotificationAtHour:minute:
 */

- (void)processDailyNotifications
{

    UIApplication *application = [UIApplication sharedApplication];
    // are you running on iOS8?
    if ([application respondsToSelector:@selector(registerUserNotificationSettings:)])
    {
        UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:(UIUserNotificationTypeBadge|UIUserNotificationTypeAlert|UIUserNotificationTypeSound) categories:nil];
        [application registerUserNotificationSettings:settings];
    }
    else // iOS 7 or earlier
    {
        UIRemoteNotificationType myTypes = UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound;
        [application registerForRemoteNotificationTypes:myTypes];
    }

    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    [@[@{@"hour":@0,@"minute":@58},@{@"hour":@0, @"minute":@59}] enumerateObjectsUsingBlock:^(NSDictionary *item, NSUInteger idx, BOOL *stop) {
        [self setDailyNotificationAtHour:[[item valueForKey:@"hour"] integerValue] minute:[[item valueForKey:@"minute"] integerValue]];
    }];
}

- (void)setDailyNotificationAtHour:(NSInteger)hour minute:(NSInteger)minute
{
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDate *now = [NSDate date];
    NSDate *expected = [calendar dateBySettingHour:hour minute:minute second:0 ofDate:now options:NSCalendarMatchStrictly];

    UILocalNotification *notification = [[UILocalNotification alloc] init];
    notification.fireDate = expected;
    notification.alertAction = @"记录";
    notification.alertBody = @"记录时间";
    notification.soundName = UILocalNotificationDefaultSoundName;
    notification.applicationIconBadgeNumber = 1;
    notification.repeatInterval = NSDayCalendarUnit;
    ALog(@"%ld, %ld, %@", (long)hour, (long)minute, [expected descriptionWithLocale:[NSLocale currentLocale]]);

    [[UIApplication sharedApplication] scheduleLocalNotification:notification];
} 
```

# c - 在脚本中定义特定日期 - unix date

> ID：13156167
> 
> 赞同：-2
> 
> 时间：2012-10-31T10:48:31.900
> 
> 标签：c, unix, date, ocaml

我寻找一种方法来定义一个月中的特定工作日，以在名为“Liquidsoap”的音频广播语言脚本中操作开关功能。该语言是使用 C 和 oCaml 构建的，并最终输出到 IceCast。

我只需要有人为我简化此代码..我不知道如何将其翻译成我需要的..

```
use the date
function from unix to build a function which will choose the good day (and
do almost whatever you want in this way). For instance,

# Function returning true if this is a good day and false otherwise
def good_day() =
  # Name of the current day
  day_name = get_process_output("date +%A")
  # Remove trailing \n
  day_name = string.replace(pattern="\n",fun (_) -> "", day_name)
  # Number of current week
  week = int_of_string(get_process_output("date +%U"))
  # Return true on tuesday every four week
  (day_name == "Tuesday") and (week mod 1 == 0)
end

out = switch([(good_day, good_day_playlist), ...]) 
```

我基本上需要在那里定义每月的工作日......可以说，每月的第二个星期二......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:07:31.410

您可以在 C 标准库中使用`time`and来获取包含对应于当前工作日（基于 0）的成员的结构：[http ://www.cplusplus.com/reference/clibrary/ctime/](http://www.cplusplus.com/reference/clibrary/ctime/)`mktime``<time.h>`

# c++ - 单流 TCP 套接字将用于入站和出站连接

> ID：13156168
> 
> 赞同：0
> 
> 时间：2012-10-31T10:48:38.027
> 
> 标签：c++, sockets, winsock

是否可以使用一个流套接字来接受入站连接并启动出站连接。这个概念是因为我想使用同时打开的套接字通过 TCP 进行 NAT 遍历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:23:12.990

I don't understand what do you mean by one stream socket, do you mean some stream sockets on one address? if this is true in TCP you can use `setsockopt` to set `SO_REUSEADDR` to `1` and then multiple sockets can share same address

# internet-explorer - IE9 不呈现背景图像

> ID：13156172
> 
> 赞同：0
> 
> 时间：2012-10-31T10:48:45.623
> 
> 标签：internet-explorer, css, internet-explorer-9, background-image

我发现很多关于 IE9 不呈现背景图像的问题，但找不到适合我需要的解决方案。

我为我的背景使用了 CSS3 渐变生成器，它适用于除 IE9 之外的所有现代浏览器。

我使用的代码是：

```
body {
 background-size: cover;
 background-repeat: no-repeat;
 background-image: linear-gradient(bottom, rgb(184,190,227) 49%, rgb(118,135,250) 80%);
 background-image: -o-linear-gradient(bottom, rgb(184,190,227) 49%, rgb(118,135,250) 80%);
 background-image: -moz-linear-gradient(bottom, rgb(184,190,227) 49%, rgb(118,135,250) 80%);
 background-image: -webkit-linear-gradient(bottom, rgb(184,190,227) 49%, rgb(118,135,250) 80%);
 background-image: -ms-linear-gradient(bottom, rgb(184,190,227) 49%, rgb(118,135,250) 80%);
 background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0.49, rgb(184,190,227)),color-stop(0.8, rgb(118,135,250)));
} 
```

我设置了一个 jsFiddle 页面：http: [//jsfiddle.net/nUA98/](http://jsfiddle.net/nUA98/)

因此，如果有人知道为什么它在 IE9 中不起作用，将不胜感激评论/回答。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:53:40.220

不是IE9不渲染背景图片，只是如果要在IE9中使用渐变，就必须使用SVG。使用[ColorZilla](http://www.colorzilla.com/gradient-editor/)创建渐变，并确保最后选中“IE9 支持”选项。它会自动生成一个 data-uri SVG 供您使用，而无需实际使用图像文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:52:36.907

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff', endColorstr='#f2f2f2'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:07:58.633

ie9 不支持 rgba 格式所以试试这个
`filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f8cbd6', endColorstr='#edeeec',GradientType=0 ); /* IE6-9 */`

# c# - 如何绑定 NSObject 在单触？

> ID：13156182
> 
> 赞同：1
> 
> 时间：2012-10-31T10:49:37.960
> 
> 标签：c#, ios, xamarin.ios

我目前正在尝试将 Objective-C 库（示例）映射到 Monotouch。该类定义如下：

```
@interface MFSideMenu : NSObject<UIGestureRecognizerDelegate> 
```

因此，当开始在 Monotouch 的 Binding 库中映射它时，您会怀疑：

```
[BaseType (typeof (NSObject<UIGestureRecognizerDelegate>))]
interface MFSideMenu
{
} 
```

但这不起作用：非泛型类型“Monotouch.Foundation.NSObject”不能与类型参数一起使用。

任何想法如何映射这个定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:58:06.227

你只需要继承自`UIGestureRecognizerDelegate`.

所以使用：

`[BaseType(typeof(UIGestureRecognizerDelegate))]`

# jquery - WordPress：提交表单而不刷新

> ID：13156185
> 
> 赞同：0
> 
> 时间：2012-10-31T10:49:59.667
> 
> 标签：jquery, ajax, forms, wordpress

我目前正在开发自己的 WordPress 模板，该模板在管理区域中具有可以上传图片的功能。上传，移动到文件夹并在管理区域中显示工作正常，但是，我无法删除它们。

在图片下方，我想要一个输入按钮。当我单击它时，它应该执行一个 PHP 脚本（删除存储图片 URL 的自定义字段）并删除上面的图片。

问题：我希望这一切都动态发生，这意味着无需刷新页面。我发现这个脚本正是这样做的：

```
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#myform").validate({
            submitHandler: function(form) {
                $.post('process.php', $("#myform").serialize(), function(data) {
                    $('#results').html(data);
                });
            }
        });
    });
    </script>
</head>
<body>

<form name="myform" id="myform" action="" method="POST">
    <input type="submit" class="button" value="Delete" />
</form>

<div id="results"></div>
</body> 
```

当我单击“删除”按钮时，将执行 process.php - 在这种情况下，只是一个简单的回显，它显示在“结果” div 容器中。

我不能让这个脚本在 WordPress 中工作。`wp_register_script`我复制了表单并通过和添加了 jquery.validate.min.js `wp_enqueue_script`。我省略了脚本的 jQuery，因为 WordPress 已经加载了它自己的。当我通过取消注册并再次注册来将 WordPress 的 jQuery 替换为脚本中的 jQuery 时，它也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T03:03:20.240

我知道这个问题很老，但万一其他人偶然发现它......

我不知道是否还有其他问题，但第一个问题是 Wordpress 默认不识别 $ 符号。将所有的 "$(" 替换为 "jQuery(" 以使其在 WP 中工作。

# java - 如何获取ArrayList中所有字符串的总长度 ?

> ID：13156196
> 
> 赞同：2
> 
> 时间：2012-10-31T10:50:23.700
> 
> 标签：java, string, arraylist

如果我对这个问题举个例子，很容易理解：

```
ArrayList<String> array;
String str = toString(array);

String toString(ArrayList<String> array) {
    StringBuilder sb = new StringBuilder();
    for( String string : array ) {
        sb.append(string);
    }
    return sb.toString();
} 
```

问题是：如何在不显式转换为字符串`str`的情况下有效地获取 ' 长度？`array`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T10:52:03.893

```
int length = 0;
for(String str : array){
  length += str.length();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-31T10:52:01.833

```
int length = 0;
for (String str : array) {
    length += str.length();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T10:52:10.740

您可以遍历`ArrayList<String>`并添加每个元素的长度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T11:15:37.420

添加递归变体只是为了好玩......

```
public static int length(List<String> list) {
    if (list.size() == 0) {
        return 0;
    }
    return list.get(0).length() + length(list.subList(1, list.size()));
} 
```

也许不是最有效的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-15T09:50:40.417

```
int length = array.stream().mapToInt(String::length).sum(); 
```

# java - 最新的 Java swing JTABLE GRID 高级免费开源库有哪些？

> ID：13156197
> 
> 赞同：0
> 
> 时间：2012-10-31T10:50:26.717
> 
> 标签：java, swing, grid, jtable

需要干净的开源和免费许可的 JTable Java Swing 库，易于排序、导出到 excel、pdf 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:53:18.733

[SwingX](http://swingx.java.net/)提供了更好的表格实现和一些附加功能（有一个很好的 Webstart 演示，您应该尝试）。要获得更好的过滤器选项，您可以使用[swing bits](https://github.com/eugener/oxbow)。但是恐怕您找不到提供您列出的所有功能的免费表。

# c# - 使用主题时更改按钮的默认背景颜色？

> ID：13156199
> 
> 赞同：4
> 
> 时间：2012-10-31T10:50:46.590
> 
> 标签：c#, wpf, themes

我的网格中有以下资源 XML：

```
<Grid.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/PresentationFramework.Classic;component/themes/classic.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Grid.Resources> 
```

这很有效，我加载了经典主题。但是经典的主题按钮背景很白？有什么方法可以更改此主题中按钮的默认背景颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:58:24.157

您可以使用样式仅将背景颜色设置为不同的颜色。

```
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}">
      <Setter Property="Background" Value="Green" />
</Style> 
```

这里的关键是使用`BasedOn="{StaticResource {x:Type Button}}"`，因为这将确保我们基于当前的 Button `style/theme`。在这种情况下，将是`Classic`。如果我们不指定任何值，它将仅基于原始主题，即`Aero`.

* * *

我通常有一个 XAML 文件，我在其中存储所有自定义主题数据并加载它

```
<ResourceDictionary Source="Themes\MyTheme.xaml"/> 
```

在这种情况下，它将包含以下内容

```
<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008">

    <Style TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}">
        <Setter Property="Background" Value="Green" />
    </Style>

</ResourceDictionary> 
```

# sql - 我们可以在 sqlserver 的连接条件中传递别名作为参考吗

> ID：13156202
> 
> 赞同：0
> 
> 时间：2012-10-31T10:50:59.410
> 
> 标签：sql, sql-server

我有以下查询，但是当我传递此别名列名的参考名称时，它显示无效的列名我该怎么做

```
select OM.*,
       convert(int,Replace(Ltrim(Replace(left(OM.mstrefc,6), '0', ' ')), ' ', '0')) as partycode,
       OI.*,
       Ac.AcctName,
       Ac.acctaddr,
       UN.UnitName
from ordemst OM
  join ordeitd OI
    on OM.mstCode = OI.ItdCode
  join Account Ac 
    on OM.partycode = Ac.acctcode
  left join unitdet UN
    on OI.ItdUnit = UN.unitcode and 
       OI.CompCode = UN.CompCode 
where OM.MstCode = 47 and 
      OM.MstType =79 and 
      OM.CompCode =117 and 
      AC.compcode =117 and 
      OI.Compcode=117 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:54:55.753

您不能在连接子句中使用来自 select 子句的别名。

> column_alias 可用于 ORDER BY 子句，但不能用于 WHERE、GROUP BY 或 HAVING 子句

显然不在连接子句中。

您必须用真实的东西替换别名：

```
join Account Ac 
on convert(int,Replace(Ltrim(Replace(left(OM.mstrefc,6), '0', ' ')), ' ', '0')) = Ac.acctcode 
```

[取自 MSSQL 文档](http://msdn.microsoft.com/en-us/library/ms173451.aspx)

# jquery - jqGrid multiplesearch - 如何为每一行添加和/或列？

> ID：13156208
> 
> 赞同：0
> 
> 时间：2012-10-31T10:51:18.370
> 
> 标签：jquery, jquery-plugins, jqgrid

我有一个 jqGrid 多重搜索对话框，如下所示：

（注意每行中的第一个空 td）。

![现在的jqGrid](../Images/c383c82bf9665c4f54379abe2a99fe74.png)

我想要的是这样的搜索网格（如下），其中：

1.  第一个 td 相应地用“和/或”填充。
2.  相应的搜索过滤器也是这样构建的。

![jqGrid想要](../Images/0a27542de65b00979954fbb475047189.png)

默认情况下，空的 td 在那里，所以我假设这是我可以打开的标准 jqGrid 功能，但我似乎无法在文档中找到它。

我的代码如下所示：

```
<script type="text/javascript">

    $(document).ready(function () {

        var lastSel;
        var pageSize = 10; // the initial pageSize

        $("#grid").jqGrid({
            url: '/Ajax/GetJqGridActivities',
            editurl: '/Ajax/UpdateJqGridActivities',
            datatype: "json",
            colNames: [
                'Id',
                'Description',
                'Progress',
                'Actual Start',
                'Actual End',
                'Status',
                'Scheduled Start',
                'Scheduled End'
            ],
            colModel: [
                { name: 'Id', index: 'Id', searchoptions: { sopt: ['eq', 'ne']} },
                { name: 'Description', index: 'Description', searchoptions: { sopt: ['eq', 'ne']} },
                { name: 'Progress', index: 'Progress', editable: true, searchoptions: { sopt: ['eq', 'ne', "gt", "ge", "lt", "le"]} },
                { name: 'ActualStart', index: 'ActualStart', editable: true, searchoptions: { sopt: ['eq', 'ne', "gt", "ge", "lt", "le"]} },
                { name: 'ActualEnd', index: 'ActualEnd', editable: true, searchoptions: { sopt: ['eq', 'ne', "gt", "ge", "lt", "le"]} },
                { name: 'Status', index: 'Status.Name', editable: true, searchoptions: { sopt: ['eq', 'ne']} },
                { name: 'ScheduledStart', index: 'ScheduledStart', searchoptions: { sopt: ['eq', 'ne', "gt", "ge", "lt", "le"]} },
                { name: 'ScheduledEnd', index: 'ScheduledEnd', searchoptions: { sopt: ['eq', 'ne', "gt", "ge", "lt", "le"]} }
            ],
            jsonReader: {
                root: 'rows',
                id: 'Id',
                repeatitems: false
            },
            rowNum: pageSize, // this is the pageSize 
            rowList: [pageSize, 50, 100],
            pager: '#pager',
            sortname: 'Id',
            autowidth: true,
            shrinkToFit: false,
            viewrecords: true,
            sortorder: "desc",
            caption: "JSON Example",
            onSelectRow: function (id) {
                if (id && id !== lastSel) {
                    $('#grid').jqGrid('restoreRow', lastSel);
                    $('#grid').jqGrid('editRow', id, true);
                    lastSel = id;
                }
            }
        });

        // change the options (called via searchoptions)
        var updateGroupOpText = function ($form) {
            $('select.opsel option[value="AND"]', $form[0]).text('and');
            $('select.opsel option[value="OR"]', $form[0]).text('or');
            $('select.opsel', $form[0]).trigger('change');
        };

        // $(window).bind('resize', function() {
        //    ("#grid").setGridWidth($(window).width());
        //}).trigger('resize');

        // paging bar settings (inc. buttons)
        // and advanced search
        $("#grid").jqGrid('navGrid', '#pager', 
            { edit: true, add: false, del: false }, // buttons
            {}, // edit option - these are ordered params!
            {}, // add options
            {}, // del options            
            {closeOnEscape: true, multipleSearch: true, closeAfterSearch: true, onInitializeSearch: updateGroupOpText, afterRedraw: updateGroupOpText}, // search options
            {}
        );

    // TODO: work out how to use global $.ajaxSetup instead
        $('#grid').ajaxError(function (e, jqxhr, settings, exception) {
            var str = "Ajax Error!\n\n";
            if (jqxhr.status === 0) {
                str += 'Not connect.\n Verify Network.';
            } else if (jqxhr.status == 404) {
                str += 'Requested page not found. [404]';
            } else if (jqxhr.status == 500) {
                str += 'Internal Server Error [500].';
            } else if (exception === 'parsererror') {
                str += 'Requested JSON parse failed.';
            } else if (exception === 'timeout') {
                str += 'Time out error.';
            } else if (exception === 'abort') {
                str += 'Ajax request aborted.';
            } else {
                str += 'Uncaught Error.\n' + jqxhr.responseText;
            }
            alert(str);
        });

        $("#grid").jqGrid('bindKeys');
        $("#grid").jqGrid('inlineNav', "#grid");

    });

</script>

<table id="grid"/> <div id="pager"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:20:49.193

没关系，找到了 - 只需要使用 multipleGroup: true

# javascript - 为什么局部变量名优先于 JavaScript 中的函数名？

> ID：13156209
> 
> 赞同：1
> 
> 时间：2012-10-31T10:51:19.260
> 
> 标签：javascript

在 JavaScript 中，您可以通过多种不同的方式定义函数：

```
function BatmanController () {
}

var BatmanController = function () {
}

// If you want to be EVIL
eval("function BatmanController () {}");

// If you are fancy
(function () {
    function BatmanController () {
    }
}()); 
```

今天偶然遇到了一个意想不到的行为。当声明一个与函数同名的局部变量（以花哨的方式）时，局部变量出现在局部范围内。例如：

```
(function () {
    "use strict";

    function BatmanController () {
    }

    console.log(typeof BatmanController); // outputs "function"

    var RobinController = function () {
    }

    console.log(typeof RobinController); // outputs "function"

    var JokerController = 1;
    function JokerController () {

    }
    console.log(typeof JokerController); // outputs "number", Ehm what?
}()); 
```

有谁知道为什么`var JokerController`不被覆盖`function JokerController`？我在 Chrome、Safari、Canary、Firefox 中对此进行了测试。我猜这是由于在 V8 和 JägerMonkey 引擎中完成的一些“前瞻性”JavaScript 优化。但是有什么技术解释可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:53:01.510

因为函数和变量*声明*被提升到它们发生的范围的顶部，但*赋值*发生在适当的位置。您的代码被有效解释为：

```
(function () {
    "use strict";

    function BatmanController () {} // Declarations are hoisted
    function JokerController () {}

    var RobinController, // Declarations are hoisted
        JokerController;

    RobinController = function () {} // Assign function to RobinController

    // outputs "function" (declaration was hoisted to top of scope)
    console.log(typeof BatmanController);

    // outputs "function" (assignment of number hasn't happened yet)
    console.log(typeof RobinController);

    JokerController = 1; // Assign number to JokerController

     // outputs "number" (assignment of number has now happened)
    console.log(typeof JokerController);
}()); 
```

有关完整的技术细节，我建议您阅读[规范的第 10.5 节](http://es5.github.com/#x10.5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:02:23.867

声明`JokerController`函数的方式会导致函数定义被提升到作用域的顶部。换句话说，实际运行的代码是这样的：

```
 function JokerController (){}
 var JokerController = 1; 
```

如果您将函数声明为*匿名函数对象，引用/分配给变量*，则函数定义是表达式的一部分，因此不能提升到当前范围的顶部。

[请参阅 MDN 上标题为 Function 的段落](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet)

# php - jquery函数用完整的单词替换缩写

> ID：13156211
> 
> 赞同：0
> 
> 时间：2012-10-31T10:51:28.950
> 
> 标签：php, jquery, replace, textarea, ckeditor

我的 jquery 脚本遇到了一些问题。

这是代码

```
<script>

 $(function()
{

    $('#suivi').keyup(function(e){
    var code = e.which ? e.which : e.keyCode;
    var input = this.value;
    console.log(input);
          if (input == "ABS") {
       this.value = "Le débiteur est absent, nous le relançons par courrier. Nous agendons également une visite domiciliaire s'il s'avérait que ce dernier restait sans réponse."

    };

});

});

</script> 
```

问题是它用完整的单词替换缩写，例如 tel 将替换为电话。问题是，当且仅当文本区域为空时，此代码才有效，例如，如果我写并引用：“给我电话”而不带引号，它不会改变单词，但如果我只写电话，它工作，我想这样做我可以添加许多缩写，而不仅仅是在开头，

有没有办法我可以做到这一点？

而且我经常使用ckeditor，当用ckeditor插入textarea时，它就不起作用了。

有什么办法可以改变吗？

任何帮助将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:25:03.567

我建议以下使用对象将首字母缩写词/缩写映射到给定短语，如果检测到缩写，则用完整短语替换该缩写：

```
var abbreviations = {
    'PSI': 'pounds per square inch',
    'TLA': 'three-letter acronym'
};

function abbrReplace(el, abbrs) {
    if (!el || !abbrs) {
        return false;
    }
    else {
        var val = el.value,
            words = val.split(/\s/);
        for (var i = 0, len = words.length; i<len; i++) {
            if (abbrs[words[i]]) {
                words[i] = abbrs[words[i]];
            }
        }
        return words.join(' ');
    }
}
document.getElementById('test').onblur = function(){
    this.value = abbrReplace(this, abbreviations);
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/UHG4z/)。

但是，这是区分大小写的，因此，在上面，缩写`tla`不会匹配，只会匹配`TLA`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:06:52.580

```
$(function() {
    $('#suivi').on('keyup', function(e){
       var code = e.which; //normalized by jQuery
       if (this.value.toLowerCase().indexOf("abs")!=-1) {
           this.value = this.value.replace(/ABS/g, 'Anal Bitch Slapper');
       }
    });
}); 
```

不要替换整个值，用它在字符串中代表的任何东西替换缩写，你需要一个标准的正则表达式来全局替换，上面的字符串替换只是替换第一次出现。

# android - 自定义文件类型的意图过滤器

> ID：13156212
> 
> 赞同：2
> 
> 时间：2012-10-31T10:51:34.790
> 
> 标签：android, android-intent, intentfilter

我已经尝试了很多方法来获得一个意图过滤器来检测我的自定义文件类型，并让我用我的程序从 gmail 打开它，但没有任何效果，至少在 Android 4.1（cyanogen mod）上。不幸的是，我目前无法在其他任何东西上测试它，但我需要它在尽可能多的版本上工作。

这就是我现在所拥有的，取自[这里](https://stackoverflow.com/questions/9518318/android-how-to-create-intent-filter-for-custom-file-extension-that-does-not-make)，这似乎是关于这个问题的最新答案：

```
<intent-filter>
   <action android:name="android.intent.action.VIEW" />
   <category android:name="android.intent.category.DEFAULT" />
   <data android:scheme="file" />
   <data android:mimeType="*/*" />
   <data android:pathPattern=".*\\.myext" />
   <data android:host="*" />
</intent-filter> 
```

我也尝试了其他问题的其他解决方案，但都没有奏效。我可能错过了一些东西，所以如果您认为它们应该有效，请随时再次提出相同的解决方案，但请不要关闭为重复项。

有人在 4.1 上有这方面的经验吗？我只关心能够从 gmail 应用程序打开它。从其他应用程序（包括文件浏览器）打开并不重要。我怎样才能做到这一点并让它在所有 Android 版本上运行？

**更新 2：**

添加此项会在我的设备上以 gmail 格式打开文件，但是当在通知栏中点击电子邮件时，我会收到一个提示，询问我是否要使用 gmail 或我的应用程序打开它。此外，使用 2.3 设备的人告诉我它根本不起作用（gmail 中没有保存/查看按钮）。

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/*" android:pathPattern=".*\\.myext" android:scheme="content" />
</intent-filter> 
```

**更新1：**

[这里](https://stackoverflow.com/questions/6656987/android-intent-filter-custom-filetype)的答案正确地导致我自己的文件从根资源管理器中用我的应用程序打开。但是，Gmail 仍然无法识别它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:31:55.697

我通过另一个用户在另一个问题上找到了解决方案。你需要改变你的意图过滤器来显示这个

如果您只使用“application/*”，您会遇到从 gmail 捕获通知的问题。到目前为止，上述解决方案对我来说完美无缺。

* * *

归功于用户：@richardleggett

* * *

此线程的原始答案，请参阅评论： [Intent filter to download attachment from gmail apps on Android](https://stackoverflow.com/questions/8148629/intent-filter-to-download-attachment-from-gmail-apps-on-android/8915389#comment19752291_8915389)

# c - 如何在 WM5 上使用 XML 配置删除配置的网络？

> ID：13156213
> 
> 赞同：5
> 
> 时间：2012-10-31T10:51:44.233
> 
> 标签：c, xml, windows-mobile-5.0

我正在尝试删除 WM5 移动设备上所有已配置的 WiFi 网络。我有以下代码，但每次都返回“失败”：

```
LPWSTR ReturnedMessage2 = NULL;

WCHAR deleteAllNetsXml[] = L""\
L"<wap-provisioningdoc>"\
    L"<nocharacteristic type=\"Wi-Fi\"/>"\
L"</wap-provisioningdoc>";
ProcessWinCEConfig(deleteAllNetsXml, &ReturnedMessage2);

BOOL ProcessWinCEConfig(const WCHAR* ConfigString, LPWSTR *message)
{
    HRESULT hr = DMProcessConfigXML(ConfigString, CFGFLAG_PROCESS, message);
    if (hr == S_OK)
    {
        MessageBox(0, *message, L"SUCCESS", MB_OK|MB_SETFOREGROUND);
    return TRUE;
    }

    MessageBox(0, *message, L"FAILURE", MB_OK|MB_SETFOREGROUND);
    return FALSE;
} 
```

我尝试了使用 XML 的不同方法，例如添加标签并仅删除接入点类型的 WiFi，但似乎没有任何效果:(

我调用 ProcessWinCEConfig 以使用 XML 分配新网络：

```
L"<wap-provisioningdoc>"\
    L"<characteristic type=\"Wi-Fi\">"\
        L"<characteristic type=\"access-point\">"\
        L"<characteristic type=\"My-Network\">"\
            L"<parm name=\"Authentication\" value=\"4\"/>"\
            L"<parm name=\"Encryption\" value=\"4\"/>"\
            L"<parm name=\"NetworkKey\" value=\"network-key\"/>"\
            L"</characteristic>"\
        L"</characteristic>"\
    L"</characteristic>"\
L"</wap-provisioningdoc>"; 
```

它工作正常。我在看什么？

# python - 如何理解将 IP 字符串转换为整数的函数式编程代码？

> ID：13156216
> 
> 赞同：5
> 
> 时间：2012-10-31T10:51:49.773
> 
> 标签：python, functional-programming, ip

在 python 讨论中，我看到了一个以函数式编程方式将 IP 字符串转换为整数的函数。这是[链接](http://www.daniweb.com/software-development/python/code/282977/ip-number-conversion-between-dotnumber-string-and-integer)。

该功能在一行中实现。

```
def ipnumber(ip):
    return reduce(lambda sum, chunk: sum <<8 | chunk, map(int, ip.split("."))) 
```

但是，我对函数式编程的想法很少。有人能详细解释一下这个功能吗？我对“map”和“reduce”有一些了解。但我不知道什么是“|” 和“块”在这里的意思。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T10:58:58.023

`sum`并且`chunk`是`lambda`传递给的函数的参数`reduce`。`|`是二元或运算符。

事情是这样的：

*   `ip.split(".")`返回一个字符串列表，每个字符串对应一个带点的字符串 ( `"192.168.0.1"`=> `["192", "168", "0", "1"]`;

*   `map`将其第一个操作数应用于其第二个操作数 ( `["192", "168", "0", "1"]`=> `[192, 168, 0, 1]`) 的每个元素；

*   `reduce`从列表中获取前两个参数并将其应用于`lambda`它们；然后它使用 lambda 的结果和列表的下一个元素再次执行此操作；等等。

*   该`labmda`函数（现场定义的匿名函数）执行以下操作：获取第一个参数，将其移动 8 位，然后将新块与它进行 OR 运算；因此，结果是这样计算的：

    ```
    (((192<<8 | 168) << 8 | 0)<<8 | 1) = 192<<24 | 168<<16 | 0<<8 | 1 
    ```

    这正是“点形式”所代表的（它只是表示 32 位无符号整数的简写，这就是 IPv4 中的 IP - 你可以说它有点像用 base 256 表示它）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T10:55:10.600

`|`是[按位、逻辑或](http://docs.python.org/2/reference/expressions.html#binary-bitwise-operations)：

```
>>> 0 | 1
1
>>> 1 | 1
1 
```

减少`lambda`使用当前运行总计和`map()`函数输出的下一个（整数）值调用。因此，它在循环中执行以下操作：

```
sum = 0
for chunk in map(int, ip.split(".")):
    sum = (sum << 8) | chunk 
```

其中`map(int, ip.split("."))`将 IP 地址转换为整数序列；`1.2.3.4`变成`[1, 2, 3, 4]`.

是`<<`按[位左移](http://docs.python.org/2/reference/expressions.html#shifting-operations)，在这种情况下为 8 位：

```
>>> 1 << 8
256 
```

因此，对于 IP 地址的每个整数部分，它将值向左移动 8 个位置，并将地址的下一部分的位添加到该数字。

这很有意义，因为 IP 地址只不过是一个 32 位数字，而字符串表示法将该数字分成 4 个 8 位块，并`.`用之间。

它有助于将每个阶段打印为二进制数：

```
>>> map(int, '1.2.3.4'.split('.'))
[1, 2, 3, 4]
>>> bin(1)
'0b1'
>>> bin(2)
'0b10'
>>> bin(3)
'0b11'
>>> bin(4)
'0b100'
>>> bin(1 << 8)
'0b100000000'
>>> bin(1 << 8 | 2)
'0b100000010'
>>> bin((1 << 8 | 2) << 8)
'0b10000001000000000'
>>> bin((1 << 8 | 2) << 8 | 3)
'0b10000001000000011'
>>> bin(((1 << 8 | 2) << 8 | 3) << 8)
'0b1000000100000001100000000'
>>> bin(((1 << 8 | 2) << 8 | 3) << 8 | 4)
'0b1000000100000001100000100' 
```

# ruby-on-rails-3 - elasticsearch/tire 如何正确返回默认记录集？

> ID：13156218
> 
> 赞同：1
> 
> 时间：2012-10-31T10:51:55.743
> 
> 标签：ruby-on-rails-3, elasticsearch, tire

处理默认记录集返回的最佳方法是什么？如果没有返回搜索结果。目前使用下面的代码，但感觉不是正确的方法。

```
def self.search(params)

      puts "SEARCH PARAM ="
      puts params

      if params
        tire.search(load: true, page: params[:page], per_page: 20, :default_operator => 'AND', :use_dis_max => true) do
          query do
            boolean do
              must { string 'gamers:2' } if params[:gamers] == "2"
              must { string 'gamers:4' } if params[:gamers] == "4"
            end
          end
          to_curl
        end
      else
        puts "search params not found"
        @gamers = Gamers.where(:level => "rookie")
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:29:41.587

看起来您仅在没有传入参数时才放入默认集，而没有返回搜索结果。

我会得到搜索结果并检查**!results.total.zero?** ，然后相应地拉出默认设置

# google-apps-script - 谷歌脚本 openById 不起作用？

> ID：13156230
> 
> 赞同：5
> 
> 时间：2012-10-31T10:52:31.847
> 
> 标签：google-apps-script, google-docs

这是我写的代码：

```
function importEventData(){
  var dFile = DocsList.getFileById("0Ar2YhVnsK7LLdGVrUFdpRUVQTHJ0aG1SVkp6V0JMMkE");
  var text = DocumentApp.openById("0Ar2YhVnsK7LLdGVrUFdpRUVQTHJ0aG1SVkp6V0JMMkE").editAsText().getText();
  return text;
}; 
```

该函数的第一行有效。但不幸的是，谷歌编译器在第二行停止并说：“文档丢失。（也许它已被删除。）”现在我尝试了几个小时，在网上搜索，但找不到问题。该脚本有权访问我的 gDrive。虽然我试图从 dFile.getId() 函数中获取 id。但这会产生相同的字符串和相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T07:35:27.893

```
var text = DocumentApp.openById("0Ar2YhVnsK7LLdGVrUFdpRUVQTHJ0aG1SVkp6V0JMMkE").getBody().editAsText().getText(); 
```

您需要在`.getBody()`之前添加，`.editAsText()`因为`DocumentApp.openByID('id')`返回一个文档类对象，并且 editastext 方法仅适用于正文对象。这可以在 Google 的文档中看到：[https ://developers.google.com/apps-script/reference/document/document-app](https://developers.google.com/apps-script/reference/document/document-app)

# c# - 使用 API 启用 Gmail POP3 设置

> ID：13156236
> 
> 赞同：1
> 
> 时间：2012-10-31T10:52:43.533
> 
> 标签：c#, .net, api, gmail

我想通过 POP3 访问 Gmail 邮件。问题是我需要让用户始终转到他/她的帐户设置并选择：`"Enable POP for all mail (even mail that's already been downloaded)"`我想知道 Gmail 是否为此设置提供了 API。我正在用 C# 编写我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:43:39.900

我目前正在使用这个 API：[ActiveUp 满足](http://mailsystem.codeplex.com/)我所有的 POP3 和 IMAP4 需求。我建议您看看它，如果您需要任何帮助，请给我留言！希望这有帮助！

# java - 如何从java中的zip文件中删除字节？

> ID：13156237
> 
> 赞同：-2
> 
> 时间：2012-10-31T10:52:43.230
> 
> 标签：java, zip

我制作了一个项目来加密文件，方法是将其转换为 zip 文件，然后向其中添加一个字节数组。
添加后点击文件时，返回“损坏的文件”。

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileWriter;

public class TestByteSyt {  
byte[] data;
public void choos(String path){
try{
data=getBytesContent(path);}catch(Exception e){
   System.out.print("there is problem");
  }   
}
  public  byte[] getBytesContent(String path){
    byte[] filedata = null;
    try{
      File file = new File(path);
      filedata = new byte[(int)file.length()];
      FileInputStream input = new FileInputStream(file);
      FileOutputStream output= new FileOutputStream(file);
      //input.read(filedata);
      String pass="the password is sobhi saede";
      byte[] b=pass.getBytes();
       System.out.print(b);
       output.write(b);
       input.close();
       output.close();
        // System.out.print( file.delete());
        BufferedWriter out = new BufferedWriter(new FileWriter(file));
        out.close();
        } catch (Exception e) 
    {System.out.print("no file ");}
    return filedata;
  }} 
```

如何从 zip 文件中删除添加的字节以使其再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:04:10.463

如果您*真的*想加密您的 zip 文件，请查看[zip4j](http://www.lingala.net/zip4j/)。

# node.js - node.js 中与 fs.createWriteStream 关 联的事件

> ID：13156243
> 
> 赞同：27
> 
> 时间：2012-10-31T10:53:35.437
> 
> 标签：node.js, stream

写入流时到达 EOF 时会触发什么事件？我的代码如下。它是按照[http://docs.nodejitsu.com/articles/advanced/streams/how-to-use-fs-create-write-stream](http://docs.nodejitsu.com/articles/advanced/streams/how-to-use-fs-create-write-stream)

但令人惊讶的是，我的“结束”事件从未被触发。当我检查[http://nodejs.org/api/stream.html#stream_event_end](http://nodejs.org/api/stream.html#stream_event_end)时，我看到可写流在“结束”上没有任何事件

* * *

```
var x = a1.jpg;
var options1 = {'url': url_of_an_image, 'encoding': null};
var r = request(options1).pipe(fs.createWriteStream('/tmp/imageresize/'+x));

r.on('end', function(){
    console.log('file downloaded to ', '/tmp/imageresize/'+x);
} 
```

如何捕获 EOF 事件？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-31T11:51:17.850

# 2013 年 10 月 30 日更新

[当底层资源完成写入时，](http://nodejs.org/api/stream.html#stream_event_close)可读 Steam[会发出`close`](http://nodejs.org/api/stream.html#stream_event_close)事件。

```
r.on('close', function(){
  console.log('request finished downloading file');
}); 
```

`fs`但是，如果您想捕捉完成将数据写入磁盘的时刻，则需要[Writeable Stream`finish`事件](http://nodejs.org/api/stream.html#stream_event_finish)：

```
var w = fs.createWriteStream('/tmp/imageresize/'+x);

request(options1).pipe(w);

w.on('finish', function(){
  console.log('file downloaded to ', '/tmp/imageresize/'+x);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-07T13:09:56.203

这真的很旧，但这仍然为我节省了很多时间。

1.  [leonid-beschastny](https://stackoverflow.com/users/1202461/leonid-beschastny)的解决方案是正确的。但是，调用的完整顺序有一个非常细微的差别。解决方案都来自专家，像我这样的新手迷路了 - 由于简单的差异 - 如何创建流或描述中遗漏的对象。

2.  此外，这是许多其他场景的通用解决方案。当您通过管道传输到 writableStream 时 - 并且到包含此操作的异步函数时 - 返回。流式传输尚未完成 - 因此正在传输到的可能的图像/文档/pdf 尚未创建。它将大小为 0 KB。

3.  在这里分享简单的步骤。

    ```
    a. createPdfKitDocument with your definition as required.

    b. Create the writeStream the way you want as per your design.

    c. Pipe your prepared document to this stream.

    d. Add this finish event to your writeStream.

    e. Most important - without this it doesn't work. 
    ```

这里

```
var pdfStream = printer.createPdfKitDocument(docDefinition); //a
let writerStream = fs.createWriteStream(fullfileName); //b
pdfStream.pipe(writerStream); //c
writerStream.on('finish', function () {
    //This could be your callback function.
    callback());
}) //d
pdfStream.end(); //e 
```

4.  我还提到了这些链接 - 他们可能会帮助某人。[在 NodeJS 中使用 PDFMake 下载 PDF 失败](https://stackoverflow.com/questions/59472194/pdf-download-fails-using-pdfmake-in-nodejs)这给了我发布的线索。

5.  主要问题是 - createWriteStream 没有完成 [由于任何原因] - 到包含它的异步函数 - 返回时。

6.  leonid [-beschastny](https://stackoverflow.com/users/1202461/leonid-beschastny)也说得对，比赛条件不会发生 - 我通过交换位置来测试我的代码`pdfStream.pipe(writerStream);`

和

```
writerStream.on('finish', function () {
    //This could be your callback function.
    callback());
}) 
```

希望它可以帮助更多的人。

# mobiscroll - 具有长/可变高度的 Mobiscroll，环绕文本选项

> ID：13156246
> 
> 赞同：2
> 
> 时间：2012-10-31T10:53:42.393
> 
> 标签：mobiscroll

我希望将 Mobiscroll 用作完美的选择器界面（使用我正在加载自定义轮子的自定义图像/文本路径）。唯一的问题是我拥有的文本选项是长句子，所以我想看看是否有一种简单的方法来动态处理可变行/高度文本。

我有一个部分解决方案，将最小高度修改为最大高度（否则轮子会不断扩大），从 li 中移除 nowrap，并将突出显示栏高度和高度/行高修改为最大长度，但是我想知道是否有人提出了更好/更优雅的解决方案？

# javascript - 如何使用 javascript 移动嵌入在 DIV 中的 Flash 电影？

> ID：13156248
> 
> 赞同：1
> 
> 时间：2012-10-31T10:53:41.810
> 
> 标签：javascript, flash, move

全部：我在 HTML 中创建了一个 DIV，并在 DIV 中嵌入了一个 Flash。下面是HTML：

```
<head>
...
<script src="Scripts/swfobject_modified.js" type="text/javascript"> </script>
<script src="Scripts/GHAnimateObjectMove.js" type="text/javascript"> </script>
<style type="text/css">
.GHLogoAniFlashDiv {
    margin: auto auto auto auto;
    height: 302px;
    width: auto;
    left: 0px;
    top: 0px;
    overflow:hidden;
}
.FlashID {
    margin: auto auto auto auto;
    height: 302px;
    width: 402px;
    left: auto;
    top: auto;
    overflow:hidden;
}  
</style>
</head>

<body>
<!-- align="center" align="absmiddle" align="center"  -->
<div id="GHLogoAniFlashDiv" > 
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="402" height="302"     class="FlashID" id="FlashID" title="GHLogoAniFlash">
<param name="movie" value="Animate/GHLogoAniFlash.swf" />
<param name="quality" value="high" />
<param name="wmode" value="transparent" />
<param name="swfversion" value="6.0.65.0" />
<param name="expressinstall" value="Scripts/expressInstall.swf" />
<param name="SCALE" value="noscale" />
<embed src="Animate/GHLogoAniFlash.swf" quality="high" 
    width="402" height="302" name="movie"  
    play="true"
    loop="ture"
    quality="high"
    allowScriptAccess="sameDomain"
    type="application/x-shockwave-flash"
    pluginspage="http://www.adobe.com/go/getflashplayer">
</embed>
<!-- No IE -->
<!--[if !IE]> align="absmiddle"-->
<object data="Animate/GHLogoAniFlash.swf" type="application/x-shockwave-flash" width="402" height="302" >
 <!--[end if]-->
  <param name="quality" value="high" />
  <param name="wmode" value="transparent" />
  <param name="swfversion" value="6.0.65.0" />
  <param name="expressinstall" value="Scripts/expressInstall.swf" />
  <param name="SCALE" value="noscale" />
  <!-- Version of Flash Player <6.0 -->
  <div>
    <h4>Need Latest Adobe Flash Player。&lt;/h4>
    <p><a href="http://www.adobe.com/go/getflashplayer"><img  src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash Player" width="112" height="33" /></a></p>
  </div>
  <!--[if !IE]>-->
  </object>
  <!--<![end if]-->
  </object>
  </div>
  ... 
```

然后我在“GHAnimateObjectMove.js”中使用 javascript 将 flash 移动到浏览器的一个位置：

```
function SetGHLogoDivLocation()//Set Logo DIV location;
{
        var leftoffset=0;
    var rightoffset=0;
    LogoDivObj=document.getElementById("GHLogoAniFlashDiv");
    FlashObj=document.getElementById("FlashID");    
    try{
        findDimensions();
        leftoffset=parseInt(600);
        rightoffset=parseInt(300);
        LogoDivObj.style.postion="relative";
        if(LogoDivObj && FlashObj)
        {
            LogoDivObj.style.left=leftoffset+"px";
            LogoDivObj.style.top=rightoffset+"px";
            FlashObj.style.left=LogoDivObj.style.left;
            FlashObj.style.top=LogoDivObj.style.top;
        }
    }
    catch(err){
        window.alert(err.message);
    }
} 
...
window.onresize=function (){SetGHLogoDivLocation();};
window.onload=function () {SetGHLogoDivLocation()}; 
```

但它似乎无法将 flash 移动到新位置（600px，300px）。它仍然停留在页面的左侧。为什么？有人知道吗？我在 IE 9 win7 上测试。我在eclipse中调试。我看到 LogoDivObj.style.left 、LogoDivObj.style.top、FlashObj.style.left 和 FlashObj.style.top 已经改变了。但是为什么 flash 不能移动到新的位置呢？

# jquery - 使用 jQuery 获取多个元素的组合高度

> ID：13156249
> 
> 赞同：0
> 
> 时间：2012-10-31T10:53:44.303
> 
> 标签：jquery

是否可以在不迭代它们的情况下获得多个元素的组合高度？请注意，`<li>`元素可能具有不同的高度。

以下不起作用，如果切片从零开始，只会返回一个值（未组合）。

```
$('#myList li').slice(4,8).count(); 
```

# shell - 在 Mac 上编写一个 rsync shell 脚本来持续同步本地目录和远程 web 服务器

> ID：13156250
> 
> 赞同：1
> 
> 时间：2012-10-31T10:53:45.773
> 
> 标签：shell, synchronization, cron, rsync, web-deployment

我需要在 Mac OS X Mountain Lion 上设置一个 shell 脚本，以使用 SSH 连接（隧道）或 SFTP 将本地目录同步到远程目录（Web 服务器），并让它每 30 秒连续运行一次。

我还需要从同步中排除某些文件或文件夹。

同步将是单向的（mac -> webserver）。

我需要实现的基本参数如下：

```
Local path: /Volumes/path/to/local/directory
Remote server: example.com
username: someUser
password: somePassword
Remote path: /path/from/server/root/to/htdocs
Files to exclude: '.ht*', '*.sublime-*'
Folders to exclude: 'cache','administrator/cache' 
```

我还需要帮助编写 crontask 并将其添加到我的系统中以自动执行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:23:38.917

1.  您应该考虑使用用户名/密码来进行 ssh 密钥身份验证，因为您必须以明文形式存储它们。[SSH 密钥认证方法](http://www.debian-administration.org/articles/530)

2.  使用您的排除项创建一个文件并调用它，例如。`excludeList.lst`（请参阅[rsync 排除文件 - 示例](http://www.thegeekstuff.com/2011/01/rsync-exclude-files-and-folders/)

3.  的命令`rsync`是这样的（阅读文档：`man rsync`，有很多例子，包括你的问题的解决方案）

    rsync -avz --exclude-from 'excludeList.lst' /Volumes/path/to/local/directory -e ssh somUser@example.com:/path/from/server/root/to/htdocs

4.  测试脚本

5.  添加`cron` [cron 作业 - 每 30 秒](http://forum.slicehost.com/index.php?p=/discussion/2767/is-it-possible-to-run-a-cron-task-every-30-seconds/p1)或`launchd` [在 Mac 上每 30 秒运行一次脚本](https://superuser.com/questions/241972/run-script-every-30-seconds-on-mac)：

顺便提一句。你也可以进行这项研究……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:28:33.347

这是我要做的：

首先，测试是否可以使用 ssh（使用用户名和密码登录）：

```
$ ssh example.com
^D 
```

创建 SSH 密钥：

```
$ ssh-keygen 
```

（不要输入密码）

这将创建`~/.ssh/id_rsa`（私钥）和`~/.ssh/id_rsa.pub`（公钥文件）

您需要将公钥 ( `id_rsa.pub`) 传输到远程服务器 ( `example.com`)，然后在远程服务器上执行以下操作：

```
$ cat id_rsa.pub >> ~/.ssh/authorized_keys
$ rm id_rsa.pub
^D 
```

这会将公钥添加到授权密钥集中。

您现在可以使用 ssh 连接到远程服务器，而无需使用用户名和密码。

接下来是使用 rsync 命令，以下内容就足够了：

```
$ rsync -avz -e ssh 
     --exclude '*.ht*' --exclude '*.sublime-*' --exclude 'cache/' 
     --exclude 'administrator/cache'
     someUser@example.com:/directory/on/server /directory/on/local 
```

（应该都在一条线上）

现在，一旦您对这对您感到满意，您就想将该命令放入一个 shell 脚本 ( `rsync_script.sh`)

然后，您可以使用`launchctl`它来安排它：

在`~/Library/LaunchAgents/`, 创建`com.example.rsync.plist`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.example.rsync</string>
    <key>KeepAlive</key>
    <true/>
    <key>ProgramArguments</key>
    <array>
        <string>/bin/sh</string>
        <string>/path/to/rsync_script.sh</string>
    </array>
    <key>StartInterval</key>
    <integer>30</integer>
</dict>
</plist> 
```

几个陷阱：

*   确保 rsync_script.sh 是可执行的，即执行`chmod 755 /path/to/the/rsync_script.sh`
*   确保创建 SSH 密钥的用户与设置`launchd`plist 的用户相同。

# java - Intent.getInt() 不适用于 ICS，但适用于 JB

> ID：13156254
> 
> 赞同：0
> 
> 时间：2012-10-31T10:53:53.583
> 
> 标签：java, android, android-intent, nullpointerexception

当我开始一个新的活动时，我使用这个代码来发送参数：

```
Intent inputForm = new Intent(getActivity(), InputForm.class);

Bundle b = new Bundle();
b.putInt("item", Integer.parseInt(mItem.id)); //Your id
inputForm.putExtras(b); //Put your id to your next Intent
startActivity(inputForm); 
```

我使用这段代码来读取 inputForm Activity 中的参数：

```
 Bundle b = getIntent().getExtras();
    if (b != null) {
        int value = b.getInt("item");
        ID = value;
    }

Toast.makeText(getApplication(), "MIJN ID:" + Integer.toString(ID), Toast.LENGTH_LONG).show(); 
```

当我在我的三星 Tab 10.1 GT-P7510 ID（和我的三星 Tab 2 10.1 3G GT-P5100）上运行此代码时，始终为 0，当我在带有 JB 的 Galaxy S3 上运行相同的代码时，代码运行良好。当我使用此代码时，我收到此错误：

```
Intent inputForm = new Intent(getActivity(), InputForm.class);
inputForm.putExtra("item", mItem.id);
startActivityForResult(inputForm, 0);

//Read Settings in new Activity

String message;

message = getIntent().getExtras().getString("item"); //<---Nullpointerexception
Toast.makeText(getApplication(), message,Toast.LENGTH_LONG).show(); 
```

> E/AndroidRuntime(2274)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.obat.tabtasks/com.obat.tabtasks.InputForm}：java.lang.NullPointerException

提前致谢，

OBAT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:58:13.633

尝试：

```
Intent inputForm = new Intent(getActivity(), InputForm.class);
inputFrom.putExtra("item",Integer.parseInt(mItem.id));
startActivity(inputForm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:27:00.260

你能把线分开吗

```
 Intent intent = getIntent();
   Bundle bundle = intent.getExtras();
   String message = bundle.getString("passed"); 
```

并再次检查 NPE 在哪里？

# jquery - scrolltop() 在 chrome 和 safari 中运行不顺畅，但在 Firefox 中运行

> ID：13156255
> 
> 赞同：3
> 
> 时间：2012-10-31T10:53:56.803
> 
> 标签：jquery, css, cross-browser, scroll

如果您检查此链接[http://jsfiddle.net/Hbkdt/](http://jsfiddle.net/Hbkdt/)。

```
$(window).scroll(function() {
       $(".fixed").css("top", $(window).scrollTop() + "px");
    }); 
```

向下移动滚动条。然后你可以看到**.fixed** DIV 在 FF 中运行顺畅，但在 Safari 和 Webkit 中运行不顺畅。

我不知道我该如何解决它。任何帮助表示赞赏:)

我在 mac 中使用 Chrome 版本 22.0.1229.94。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:04:28.597

您只是在元素上使用`position: absolute`和设置`scrollTop`，因为当`position: fixed`使用时，如果窗口宽度小于元素的宽度，则元素的一部分将被隐藏，即使您向右滚动以尝试查看它：

[http://jsfiddle.net/Hbkdt/11/](http://jsfiddle.net/Hbkdt/11/)

解决此问题的另一种方法是坚持使用`position: fixed`，然后解决隐藏部分元素的问题：

[http://jsfiddle.net/thirtydot/Hbkdt/26/](http://jsfiddle.net/thirtydot/Hbkdt/26/)

元素的`left`属性在滚动集上，使其看起来水平滚动按需要工作：

```
$(window).scroll(function() {
    $(".fixed").css("left", -$(window).scrollLeft() + "px"); 
}); 
```

由于`position: fixed`现在再次使用，垂直滚动非常流畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:13:22.517

我建议一个*替代方案*。赋予平滑效果的最有利的选择是动画位置变化，假装缓动。

像这样的东西

```
$(window).scroll(function(){
    $(".fixed").stop(false, true).animate({ "top" : $(window).scrollTop()}, 1000); 
}); 
```

### [演示](http://jsfiddle.net/Starx/LKYjm/)

这很好用，但是当您开始使用滚动窗格滚动时，它又开始结结巴巴了。

但是，要克服这个问题，您可以使用[去抖动技术](http://benalman.com/projects/jquery-dotimeout-plugin/)。

```
$(window).scroll(function(){
    $.doTimeout( 'scroll', 250, function(){
                         // ^ This time prevents the following code to run, 
                         //   if another scrolling occurs within this time

                         //   Thus enabling us to give a smooth scroll effect
                         //   Once the user is done scroll

        $(".fixed").stop(false, true) //break the queue fast
                   .animate({ "top" : $(window).scrollTop()}, 200);
    });
}); 
```

### [演示](http://jsfiddle.net/Starx/LKYjm/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T18:16:03.670

在固定的 div 中添加一个相对 div 并在调整大小时调整其宽度。

```
<div class="fixed">
    <div class="container">
         <ul>
            <li>Resize frame</li>
            <li>Test1</li>
            <li>Test1</li>
            <li>Test1</li>
        </ul>
        <div class="victim">Why i am not visible</div>
    </div>
</div> 
```

​</p>

js：

```
jQuery(document).ready(function($) {
    var fitWidth = function() {
        $(".fixed .container").width(Math.min(
            $(window).width(), $(".fixed").width()
        ));
    };

    $(window).resize(fitWidth);
    fitWidth();
});​ 
```

CSS：

```
.fixed {
    border:1px solid #ccc;
    position:fixed;
    top:0;
    left:0;
    width:1000px;
    background:red;
}

.container {
    background: #ff0;
    position: relative;
}

... 
```

​jsfiddle [示例](http://jsfiddle.net/Hbkdt/25/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:36:05.083

在您的情况下，要将您的 div 固定在页面的固定位置，您需要使用 CSS 位置`fixed`而不是`absolute`

你的滚动事件可以被删除，你的 CSS 应该是这样的：

```
.fixed {
    padding:20px;
    border:1px solid #ccc;
    position:fixed;
    top:0;
    left:0;
}​ 
```

这是更新的小提琴：http: [//jsfiddle.net/Hbkdt/17/](http://jsfiddle.net/Hbkdt/17/)

# asp.net-mvc - EF dbContext IQueryable 方法依赖项不起作用

> ID：13156258
> 
> 赞同：0
> 
> 时间：2012-10-31T10:54:11.583
> 
> 标签：asp.net-mvc, entity-framework

我试图像这样向我的 dbContext 类添加一些辅助方法

```
public IQueryable<Tool> GetAllToolsInCompanyGroup(string userName)
{
    var user = GetUserByName(userName);
    return Tools.Where(t => Companies.Any(c => user.Company.CompanyGroupId == c.CompanyGroupId && c.Id == t.CompanyId));
} 
```

但是如果我从我的控制器调用它，我会得到这个异常：

```
Unable to create a constant value of type 'myNamespace.Models.Company'. Only primitive types or enumeration types are supported in this context. 
```

如果我像这样在我的控制器中做同样的事情：

```
db.Tools.Where(t => db.Companies.Any(c => user.Company.CompanyGroupId == c.CompanyGroupId && c.Id == t.CompanyId)) 
```

有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:07:23.307

我通过使用一些这样的连接来解决它：

```
var user = GetUserByName(userName);
var tools = from t in Tools
            join u in Users on t.CompanyId equals u.CompanyId
            join c in Companies on u.Company.CompanyGroupId equals c.CompanyGroup.Id
            select t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:15:29.887

您的 Tool 类是实体类还是 DbContext 类？因为我猜你正在返回“工具”（你以前的方法中的一个实体类，这就是它抛出异常的原因

# php - 带有 JSON 和 AJAX 的 PHP 会话

> ID：13156260
> 
> 赞同：2
> 
> 时间：2012-10-31T10:54:16.470
> 
> 标签：php, jquery, ajax, json, session

因此，我正在尝试为 Web 应用程序创建登录功能。

登录由 JSON 接口处理。用户输入经过检查的用户名和密码，如果正确，则 JSON 接口发回一个令牌。我猜这就是会话应该开始的地方。

```
<script>  
  $(document).ready(function(){
   $("#loginForm").validate({
    rules: {
      username: {
        required: true,
        digits: true
      },
      password: {
        required: true
      }
    },

    submitHandler: function(form) {
      data = JSON.stringify({
        "jsonrpc": "2.0",
        "method": "login",
        "params": {
          "params": {
            "username": $('#username').val(),
            "password":  $('#password').val()
          }
        }
      });

      $.ajax({
        url:"http://domain.local:1234/trip",
        type:"POST",
        crossDomain: true,
        dataType: "json",
        data : data,
        headers: {
          'Content-Type': "application/json; charset=utf-8"
        },
        success: function(data){
          if(data.result.token != null) {
            window.location.href = "functions/login.php?token=" + data.result.token;
          }

          else $("#result").html("Invalid username and/or password."); 
        }
      });
      return false;
      }
    });
  });
</script> 
```

我`login.php`是应该进行会话处理的地方（对吗？）。如果可能的话，我不想使用cookies。到目前为止，这是我唯一拥有的（这是我第一次尝试会话）。

```
<?php
  session_start();
  $token = $_POST['token'];
?> 
```

当用户登录时，我需要将它们发送到overview.php。当有令牌时，应该从`login.php`文件中完成，还是应该从而`index.php`不是前往`login.php`？

另外，如何检查用户访问的页面上是否有活动会话？我需要每个页面上的令牌来对 JSON 接口进行新的调用。

最后，当用户需要注销时，我想我会把他们带到`logout.php`或类似的地方并在那里结束会话？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:29:13.120

这些是可用于简单（不安全）登录系统的基本设置。

登录.php：

```
<?php
    session_start();
    if(isset($_GET['token']) && !empty($_GET['token']))
        $_SESSION['token']== $_GET['token'];

    if(isset($_SESSION['token'] && [OTHER CHECKS YOU MIGHT WANT TO DO TO SEE WETHER HE IS LOGGED IN]){
        header('Location: overview.php');
    }
?> 
```

注销.php

```
<?php
    session_start();
    unset($_SESSION['token']);
    //redirect to desired page
?> 
```

此外，在您只想向已登录用户显示的每个页面上，您需要添加`session_start();`并检查他是否仍在使用`$_SESSION['token']`. 如果他不再登录，您需要将他重定向到其他地方。

# jquery - 制作循环无限滚动

> ID：13156261
> 
> 赞同：2
> 
> 时间：2012-10-31T10:54:17.497
> 
> 标签：jquery

我正在尝试制作一个可滚动`<div>`的内容以包含该循环的可变数量的项目（2-20）。我想给它一个轮子的外观，就像在 iOS 轮子选择器中一样![在此处输入图像描述](../Images/c5312f4a27ea9c2d1d4959ffa1622d7e.png)

我用 jQuery 搜索了无限滚动，但是当你接近页面底部时，我只会在加载更多内容时得到著名的 twitter 和 facebook 功能的结果。我想要的是复制 div 边缘的项目，这样如果你靠近底部，开始的项目会不断出现，而不仅仅是附加更多（它会变得太大）。

我正在考虑自己做这件事的一种方法，在开始时附加项目时不会弄乱滚动，但我确信已经有一个插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:37:31.863

我认为这对你有好处。

[http://jscroller.markusbordihn.de/](http://jscroller.markusbordihn.de/)

# android - Android 下拉颜色选择器

> ID：13156264
> 
> 赞同：3
> 
> 时间：2012-10-31T10:54:27.280
> 
> 标签：android, android-arrayadapter, android-spinner, color-picker

我想创建一个下拉颜色选择器，像这样（对不起丑陋的图像）：

![颜色下拉选择器](../Images/37a3b2e51c5f6392cf50bd40e7d736c2.png)

我只需要一些颜色（比如说 6 种），所以我不需要完整的颜色选择器，下拉菜单可以正常工作。

我知道我必须为 Spinner 扩展数组适配器并覆盖**getDropDownView**和**getView**。

我不知道的是如何创建一个带有边框和纯色背景的方形框。

我知道我可以在 drawable 中定义自己的形状。无论如何，我必须在运行时设置背景颜色，所以我还需要更改视图并设置正确的背景颜色。

最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T11:55:33.310

如果您只想使用背景颜色，则可以像此示例一样使用。

```
public class CustomSpinnerAdapter<T extends BaseEntity> extends ArrayAdapter implements SpinnerAdapter {    

    private final List<T> objects; // android.graphics.Color list

    public CustomSpinnerAdapter(Context context, List<T> objects) {
        super(context, R.layout.yourLayout, objects);
        this.context = context;
        this.objects = objects;

    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        super.getDropDownView(position, convertView, parent);

        View rowView = convertView;

        if (rowView == null) {
            // Get a new instance of the row layout view
            LayoutInflater inflater = this.activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.yourLayout, null);

            rowView.setBackgroundColor(objects.get(position));

        } else {
            rowView.setBackgroundColor(objects.get(position));
        }

        return rowView;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;

        if (rowView == null) {
            // Get a new instance of the row layout view
            LayoutInflater inflater = this.activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.yourLayout, null);

            rowView.setBackgroundColor(objects.get(position));

        } else {
            rowView.setBackgroundColor(objects.get(position));
        }

        return rowView;
    }
} 
```

# php - 想要从 gmail 获取未读邮件

> ID：13156265
> 
> 赞同：0
> 
> 时间：2012-10-31T10:54:27.423
> 
> 标签：php, gmail

我想知道如何从 gmail 帐户中获取未读电子邮件。我有一个 gmail 帐户，我希望所有来自 gmail 帐户的未读电子邮件都通过 php 发送到我的网站。我一直在实施各种代码，但它们对我没有帮助。请帮我解决这个问题。

我有一个用于从 gmail 获取邮件的代码，但邮件没有被获取。

```
<?php 
/* connect to gmail */

$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
$username = 'abc@gmail.com';
echo $password = 'abcd';

/* try to connect */
$inbox =  imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());
 echo "got inbox";
/* grab emails */
$emails = imap_search($inbox);

/* if emails are returned, cycle through each... */
if($emails) {
  echo "got emails";
  /* begin output var */
  $output = '';

  /* put the newest emails on top */
  rsort($emails);

  /* for every email... */
  foreach($emails as $email_number) {
    /* get information specific to this email */
    $overview = imap_fetch_overview($inbox,$email_number,0);
    $message = imap_fetchbody($inbox,$email_number,2);

    /* output the email header information */

    $output.= '<div class="toggler '.($overview[0]->seen ? 'read' : 'unread').'">';
    $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
    $output.= '<span class="from">'.$overview[0]->from.'</span>';
    $output.= '<span class="date">on '.$overview[0]->date.'</span>';
    $output.= '</div>';

    /* output the email body */
    $output.= '<div class="body">'.$message.'</div>';
     break;
  }

  echo $output;
} 

/* close the connection */
imap_close($inbox);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:08:09.163

要获取未读消息，请执行以下操作：

```
$inbox =  imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());
$unread_msgs = imap_search($inbox, 'UNSEEN'); 
```

您也可以参考相应的[手册](http://php.net/manual/en/function.imap-search.php)了解其他选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:58:08.913

使用`imap_open`：

```
$inbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX",$username,$password); 
```

[请参阅此处](http://davidwalsh.name/gmail-php-imap)的示例。

# jquery - 在jQuery中不必要地触发Mouseleave函数？

> ID：13156267
> 
> 赞同：0
> 
> 时间：2012-10-31T10:54:32.040
> 
> 标签：jquery, ckeditor, mouseleave

大家好，我正在`mouseleave`这里处理 jquery 事件`ckeditor`。当我进入鼠标时我需要显示`ckeditor`，当鼠标离开这里时需要开火。我已经做到了。

输入时，它会显示（第一张图片）并在`ckeditor`写一些文字时，当应用一些字体（第二张图片）时，它的触发装置`ckeditor`将隐藏（第三张图片）。我认为字体在某个单独的 div 中打开，但是一旦鼠标离开 div，我就需要触发它`ckeditor`。

请检查一次这是我的代码：

```
 <script type="text/javascript">
    $(document).ready(function () {

        $('#btndiv1').hide();

        $('#btndiv').hover(function () {
            $('#btndiv1').show();
        });
        });
</script>
<script type="text/javascript">
    $(document).ready(function () {
    var editor = CKEDITOR.editor.replace('editor1');
    $('#btndiv').mouseleave(function (event) {
        $('#btndiv1').hide("slow");
            alert(1);
            var value = editor.getData();
            alert(value);
            $('#btndiv').append(value);

        });
    });

       </script> 
```

这是我的html代码：

```
 <div id="btndiv" style="height:400px;width:800px; border:1px solid ">
    <div id="btndiv1" style="height:auto;width:auto; border: 1px solid  ;">
    <textarea  rows="10"   id="editor1"> </textarea>

        </div>
</div> 
```

这是鼠标输入时的ckeditor

![在此处输入图像描述](../Images/a65005cec1775e8ca5a12d1e77118177.png)

这是选择应用字体的时候

![当我选择样式时](../Images/3fbe30c8e31565e92ca3bda28f2b2340.png)

在这里它被解雇了

![在此处输入图像描述](../Images/4fe8ec393bd0f33685d3e8c20978fdbe.png)

但是当用户完成自己的文本设计时我需要触发它。我怎样才能做到这一点？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:24:50.657

CKEditor 在 DOM 的最末端附加浮动框，例如字体选择器，就在正文结束标记之前。因此它在您的 div#btndiv1 之外，所以这就是它触发 mouseleave 事件的原因。

附加的 div 总是具有相同的类“cke_skin_kama”，所以也许你可以在决定隐藏编辑器之前检查我们是否正在填充这个 div。

像这样的东西（未经测试）：

```
$('#btndiv').mouseleave(function (event) {
    if (!event.toElement.hasClass('cke_skin_kama')) {
        $('#btndiv1').hide("slow"); 
    }
}); 
```

# linux - 如何通过计算 AWK 或 bash 中字符的出现来过滤行？

> ID：13156268
> 
> 赞同：3
> 
> 时间：2012-10-31T10:54:31.163
> 
> 标签：linux, shell, sed, awk

输入是这样的：

```
CNNCC
NCNCN
NNNCC
CCNNN
CCCCN 
```

输出应该是这样的：

```
CNNCC
CCCCN 
```

这意味着，如果出现**3 次以上`N`，则该行将被过滤掉**，否则将被保留。（在我的工作中，我需要过滤掉超过**500** N 的 100000 行，所以性能可能很重要）

我知道如何`N`在awk中按连续过滤，但我不知道如何计算不连续的..

有人对此有想法吗？解决方案`shell` 也可以。

**在所有答案中，我认为这个可能是最简单的：**

```
awk -FN 'NF<=3' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:11:49.803

```
awk -FN -vcount=3 'NF<=count' 
```

`awk`或者，对于不支持该`-v`选项的老年人，

```
awk -FN 'NF<=count' count=3 
```

该命令使用目标字符作为字段分隔符，最大允许出现次数为`count`. 通过将生成的字段数与我们进行比较，`count`我们可以有选择地打印符合我们标准的行。

该声明的意图不是很明显，因此可读性较差。然而，它确实具有 char 和`count`参数化的优点，因此可以轻松地重复用于不同的设置。

诚然，这对于大量`count`. 将最大字段数设置为`count+1`将克服此性能问题，不幸的`-mf`是 gawk 忽略了该选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T12:22:38.443

这可能对您有用（GNU sed）：

```
sed -r '/(.*N){3}/d' file 
```

或者

```
sed 's/N/&/3;T;d' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T11:11:11.820

`sed`使用相同正则表达式的解决方案：

```
% sed '/N.*N.*N/d' 
```

`d`删除*任何地方*包含三个或更多`N`字符的每一行。

**例子：**

```
% sed '/N.*N.*N/d' <<EOF
`heredoc> CNNCC
`heredoc> NCNCN
`heredoc> NNNCC
`heredoc> CCNNN
`heredoc> CCCCN
`heredoc> EOF
CNNCC
CCCCN 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T15:06:17.237

没有爱`grep`？

```
count=3
egrep -v "(.*N){$count}" file 
```

* * *

更多信息：

`-v`反转匹配，因此这会查找不包含 3 个 N 的行（如果该行有超过 3 个 N，则它包含 3 个 N）。

`egrep`等同于`grep -E`使用扩展正则表达式 (ERE)，在此处使用，因此`( )`不必`{ }`转义。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-31T11:15:15.063

你可以`gsub`用来计算：

```
awk 'gsub(/N/,"N") < 3' file.txt 
```

结果：

```
CNNCC
CCCCN 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T14:11:12.533

Perl 单行

```
perl -ne 'print if tr/N/N/ < 3' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T10:57:44.680

这将做到：

```
gawk '/N.*N.*N/ { next; } { print; }' 
```

# perl - 使用对匿名数组的引用作为数组的元素

> ID：13156269
> 
> 赞同：2
> 
> 时间：2012-10-31T10:54:34.727
> 
> 标签：perl

我正在尝试以我理解的各种方式使用对数组的引用。
这是我的一个试验：-

```
my $RoR = [[2, 3], [4, 5, 7]];
my @AoA = ([2, 3], [[2, 3], [4, 5, 7]]);
my @AwR = ([2, 3], @{$RoR});

print $AoA[1][1][1], "\n";      # 1
print $AoA[1]->[1][1], "\n";    # 2

#print $RoR[0][1], "\n";        # 3
print $RoR->[0][1], "\n";       # 4

print $AwR[1][1][1], "\n";          # 5
print $AwR[1]->[1][1], "\n";        # 6 
```

如您所见，我有三个不同的数组。

*   `$RoR`-> 是对匿名数组的引用，其中包含两个匿名数组

*   `@AoA`-> 是一个包含 2 个匿名数组的数组。第二个匿名数组与引用指向的数组相同`$RoR`

*   `@AwR`-> 与 几乎相同`@AoA`，但不同之处在于，我没有使用新的匿名数组，而是在其中添加了引用`@{$RoR}`本身。所以，基本上我认为，最后两个数组实际上是相同的。

现在，问题是，**他们的行为方式不同**。

*   打印语句`1`，并且`2`工作正常，并打印出值`5`作为结果。

*   打印语句`3`给出错误，我知道为什么，所以没有问题。正如预期的那样，print 语句`4`正在打印 value 。`3`

*   现在，当我尝试运行程序时，打印语句`5`和抛出一些错误。`6`

    ```
    "Can't use string ("2") as an ARRAY ref while \"strict refs\" in use at 
    D:/_Perl Practice/3perldsc/array_of_array.pl line 15." 
    ```

然后我尝试使用： -

```
print $AwR[1][1]->[1], "\n";    
print @{$RoR}[1]->[1]; 
```

在哪里，我`$AwR[1]`用`@{$RoR}`, 替换为`$AwR[1]`contains `@{$RoR}`。第二个工作正常，而第一个仍然抛出错误。

`1st two`那么，the和`last two`print 语句之间究竟有什么区别呢？我认为它们是相同的，因此应该为相同的索引访问提供相同的结果。但事实并非如此。我是否以某种错误的方式使用了参考？

* * *

好的，现在上面的疑问很清楚了。所以，我发布了一个答案，积累了与这个问题相关的一般内容。请看下面。在那，我对`5th and 6th`打印语句有疑问，为了理解它，我尝试了以下测试： -

```
print $AwR[1][1];   # Allowed as `$AwR[1]` is same as `$$RoR`.
print $$RoR[1];     # Allowed as in 3(b)
print $AwR[1]->[1]; # Confused here. It is allowed
print $$RoR->[1];   # But this is not. 
```

前三个语句打印相同`reference value`。但最后一个失败了。因此，可以肯定 :-`$AwR[1]`与`$$RoR`. 但是，为什么`$$RoR->[1]`工作时`$AwR[1]->[1]`不工作？它向我抛出了这个错误：-

```
Not a SCALAR reference at D:/_Perl Practice/3perldsc/array_of_array.pl line 24. 
```

那么，以两种不同的方式使用它有什么区别呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:13:02.473

在分配给`@AwR`您时取消引用您对匿名数组的引用`$RoR`，因此您基本上会得到以下行为：

```
my @AwR = ([2, 3], [2, 3], [4, 5, 7]); 
```

没想到：

```
my @AwR = ([2, 3], [[2, 3], [4, 5, 7]]); 
```

**更新**

如果我们有多维数组（array of arrays，AoA），那么 first 之后的每个维度都必须是一个引用。所以没有必要显式地使用解引用箭头，但它是允许的。所以，如果我们有`AoA`作为参考，我们需要取消引用第一维显式，我们可以通过两种方式`$$AoA`或`$AoA->`，但我们不能像你注意到的那样取消引用它两次（`$$RoR->[1]`在你的例子中）。

当我们需要对某个元素的地址时，我们可以省略任何以下维度的取消引用箭头，因此有两种等效用法：

```
my @AoA = ([2, 3], [ [2, 3], [4, 5, 7, [11, 12, [111, 112] ] ] ], [0]);
print "A: $AoA[1][1][3][2][0] \n";          # == 111
print "B: $AoA[1]->[1]->[3]->[2]->[0] \n";  # == 111 
```

或`AoA`作为参考

```
my $AoA = [ [2, 3], [ [2, 3], [4, 5, 7, [11, 12, [111, 112] ] ] ], [0] ];
print "A: $$AoA[1][1][3][2][0] \n";           # == 111
print "B: $AoA->[1]->[1]->[3]->[2]->[0] \n";  # == 111 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:18:28.430

您似乎期望@AoA 和@AwR 是相同的，但事实并非如此。您可以通过一个简单的测试脚本看到这一点：

```
#!/usr/bin/perl

use strict;
use warnings;
use Test::More;

my $RoR = [[2, 3], [4, 5, 7]];
my @AoA = ([2, 3], [[2, 3], [4, 5, 7]]);
my @AwR = ([2, 3], @{$RoR});

is_deeply(\@AwR, \@AoA, 'arrays match'); 
```

这是因为您将 $RoR 插入 @AwR 的方式。要创建与 @AoA 相同的数组，请创建 @AwR 而不取消引用 $RoR：

```
my @newAwR = ([2, 3], $RoR); 
```

并测试以确认这是正确的：

```
is_deeply(\@newAwR, \@AoA, 'arrays match'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:13:30.450

好的，既然我已经弄清楚了，我想我会发布我的答案：-

```
use strict;
use warnings;
use Test::More;

my $RoR = [[2, 3], [4, 5, 7]];
my @AoA = ([2, 3], [[2, 3], [4, 5, 7]], [0]);
my @AwR = ([2, 3], $RoR, [0]);

print "1: ", $AoA[1][1][1], "\n";       # 1
print "2: ", $AoA[1]->[1][1], "\n";     # 2

#print "3(a): ", $RoR[0][1], "\n";      # 3(a) 
print "3(b): ", $$RoR[0][1], "\n";      # 3(b)          
print "4: ", $RoR->[0][1], "\n";        # 4

print "5: ", $AwR[1][0][1], "\n";       # 5
print "6: ", $AwR[1]->[0][1], "\n";     # 6

print "7: ", $AwR[1][1]->[1], "\n";     # 7
print "8: ", @{$RoR}[1]->[1], "\n";     # 8
print "9: ", @{$AwR[1]}[1]->[1], "\n";  # 9 
```

**解释： -**

*   前两个打印语句是直截了当的。他们都将打印价值`5`
*   3(a) 将无法编译，因为我们无法在没有`arrow`.
*   3(b) 有效，因为现在，我们已经`reference - $RoR`通过使用取消引用我们的`$$RoR`

*   第 4 条打印语句，类似于`3(b)`, 并且是一种清晰的方式来做`3(b)`正在做的事情。因为`RoR`是对匿名数组的引用，所以我们不能像普通数组那样访问元素。我们必须使用箭头 ( `->`)。之后`arrow`我们可以将索引添加到任何级别以访问嵌套`anonymous`数组。

`$$RoR[0][1]`之所以有效，是因为它与左侧`$RoR`的取消引用器绑定比与右侧的运算符更紧密地绑定。因此，首先取消引用以获取数组，然后再应用。`$``subscript``$RoR``subscript`

**这是Perl 文档**的引用：-

> Perl 对其五个前缀解引用器的优先级规则（看起来像是有人在发誓：$ @ * % &）使它们比后缀下标括号或大括号绑定得更紧密。
> Perl 中看似等效的构造，$$aref[$i] 首先对 $aref 进行 deref，使其将 $aref 作为对数组的引用，然后取消引用，最后告诉你第 i 个值$AoA 指向的数组

*   第 5 条和第 6 条打印语句与 3(b) 类似。由于仅`$AwR[1]`包含参考`$RoR`。因此，`$AwR[1]`转换为：`$$RoR`. 因此，`$AwR[1][0][1]`类似于`$$RoR[0][1]`第 5 条语句。第 6 条语句： -`$AwR[1]->[0][1]`被转换为： - `$$RoR->[0][1]`。现在这是我的疑问。声明是如何`6th`工作的。为什么我们可以`an arrow`在`de-referenced reference`.

*   在`7th`print 语句中，`$AwR[1][1]->[1]`类似于`${$RoR}[1]->[1]`. 因此，很明显，取消引用是在下标运算符之前完成的。因此，我们可以访问在引用`2nd`之后获得的数组上的元素。`de-referencing``$RoR`

*   `8th`和`9th`打印语句几乎相同。此外，我们正在取消引用`reference $RoR`. 但是现在，我们`de-referencing`要的是`array`a 而不是 a `scalar`。

* * *

我试图以最好的方式解释。以上说明如有错误或遗漏，请指出。这将帮助我了解更多。

另外，有人可以解释一下`5th`并`6th`打印声明。我将把它添加到上面的问题中。

# php - 使用盐登录的 Symfony 2 总是返回错误的凭据

> ID：13156274
> 
> 赞同：3
> 
> 时间：2012-10-31T10:54:50.667
> 
> 标签：php, security, symfony, login, salt

如果我使用 salt 来解码我的密码，登录总是返回“错误凭据”。

我正在使用 Fixture 创建一些测试数据：

```
public function load(ObjectManager $manager)
{
    $encodeFactory = $this->container->get('security.encoder_factory');

    $user = new User();
    $user->setUsername('admin');
    $user->setEmail('webmaster@aranox.de');

    $encoder = $encodeFactory->getEncoder($user);
    $user->setPassword($encoder->encodePassword('admin', $user->getSalt()));

    $user->setIsEnabled(true);

    $manager->persist($user);
    $manager->flush();

    $this->addReference('user-admin', $user);
} 
```

我在 security.yml 中设置了编码：

```
security:
    encoders:
        Aranox\UserBundle\Entity\User:
            algorithm: sha512 
```

使用以下方法在我的用户实体中创建盐：

```
...
/**
 * @ORM\Column(type="string", length=255)
 */
private $password;
/**
 * @ORM\Column(type="string", length=255)
 */
private $salt;

...
function __construct()
{
    $this->groups               = new ArrayCollection();
    $this->salt                 = md5(uniqid(null, true)); 
... 
```

如果不创建盐 ($this->salt = "")，一切正常。

这怎么会发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:12:05.530

请检查实体文件中的密码字段长度，如果小于则将其增加到 255，因为 sha512 包含长字符串。

# iphone - 为 UIImageView 生成 BarCode

> ID：13156276
> 
> 赞同：1
> 
> 时间：2012-10-31T10:54:53.930
> 
> 标签：iphone, ios, zxing, zbar-sdk

我想在一些 UIImage 或 UIImageView 上生成条形码。有可能吗？我正在使用[它](https://github.com/kuapay/iOS-QR-Code-Generator/downloads)来生成条形码。

请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:01:17.577

另一种选择是使用在线条形码生成器的 URL 作为 UIImage 的源。例如：

```
NSString *barCodeValue = @"0123456789";
NSString *barCodeURL = [NSString stringWithFormat:@"http://www.barcodesinc.com/generator/image.php?code=%@&style=197&type=C128B&width=200&height=100&xres=1&font=3", barCodeValue];
barCodeImage.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:barCodeURL]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:17:30.933

我不确定，但你可以试一试：

1) 转换`UIImage`成[Base64 字符串。](http://iphonesdksnippets.com/post/2010/03/14/Convert-image-tofrom-text-%28Base64%29.aspx)

2) 现在，您使用此字符串生成条形码。

`[barcode setupQRCode:base64String];`

希望对你有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:20:46.197

如果在 UIView 之类的组件上生成 BarCode，您可以截取此视图的屏幕截图并从此视图获取图像希望这对您有所帮助

```
-(UIImage *)getFinalImageAndBarCodeView:(UIView*)view{
////Create a new render context of the UIView size, and set a scale so that the full stage will render to it.
UIGraphicsBeginImageContext(CGSizeMake(view.bounds.size.width, view.bounds.size.height));
CGContextScaleCTM(UIGraphicsGetCurrentContext(),1.0f,1.0f);

//Render the stage to the new context
[view.layer renderInContext:UIGraphicsGetCurrentContext()];

// Get an image from the context
UIImage* viewImage=0;
viewImage=UIGraphicsGetImageFromCurrentImageContext();

// Kill the render context
UIGraphicsEndImageContext();

return viewImage; 
```

}

# entity-framework - 将实体框架用于运行时定义的元数据

> ID：13156281
> 
> 赞同：1
> 
> 时间：2012-10-31T10:55:01.353
> 
> 标签：entity-framework

我们实际上是在分析将我们当前的数据库管理系统迁移到实体框架的影响。截至今天（迁移之前），该产品使最终用户能够从管理界面在 ASP .Net 应用程序中创建自己的对象类型。然后将这些对象类型转换为字段和表的数据库表创建/删除/更新。通常，一个用户可以从最终用户界面创建一个新的 MyCar 对象类型，创建一些属性，并且一旦验证，他就可以创建新值。这在数据库中明显体现为一个新的 MyCar 表、两个字段和新的插入。

我遇到的主要问题与集成实体框架的方式有关，以便我们可以作为第一步通过 Linq 查询来查询这些表。我知道理想情况下我们应该使用代码优先或模型优先的方法，但我们希望逐步进行。

做了一些研究后发现：

1.  实体框架不提供直接更新内部元数据的能力
2.  我们可以利用动态类型创建，以便实体框架基于代码优先模型（运行时，但仍然是代码优先:-)），并且动态关键字将允许我们通过后期绑定检索属性。看到这个[linq](http://www.codeproject.com/Articles/206416/Use-dynamic-type-in-Entity-Framework-4-1-SqlQuery)。

希望我提供了大图。请告诉我我是否遗漏了什么，以及第二个要点中描述的方法是否是解决我的问题的正确答案。挑战之一是可以创建字段或类型：如果我必须使用反射检查运行时创建的类型，我将无法做到这一点。在这种情况下，我可以使用 appdomains（并在我必须进行重置时重新创建一个新的），但这可能会引入新问题（可访问性/性能/实体框架与其他 appdomains 中定义的类型不兼容 / ...）。

我非常了解 IQToolkit，而且我知道如何在运行时轻松重新定义元数据，而无需引入 .Net 类型——在这方面，IQToolkit 可能是首选的解决方案......

欢迎任何建议！

# javascript - Javascript 间隔缺点

> ID：13156284
> 
> 赞同：0
> 
> 时间：2012-10-31T10:55:06.267
> 
> 标签：javascript

我正在开发一个主要针对手机和平板电脑的网站。我只是想问一下使用太多的Interval有什么缺点吗？至于现在，我使用 1 个 5000 毫秒的间隔来获取和检查当前时间，并使用 1 个 100 毫秒的间隔来检查设备的宽度是否发生变化（用于响应目的）

我听前辈说过，我们应该尽量少使用这些间隔，这可能会导致一些漏洞和滞后等。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:13:30.117

这里的两位受访者都有正确的想法——浏览器可以在调整大小时告诉你，以避免你不断检查和比较缓存值，这将是非常糟糕的性能。但是你的前辈关于不必要的调用的论点仍然是正确的，因为许多浏览器在调整大小操作（尤其是 IE）期间不断触发调整大小，这可能会导致大量开销。

减轻这些性能问题的两种想法的组合是使用一种称为“节流”的技术来监听事件，但只是每隔一段时间触发一次响应。

这里有一个很好的插件：http: [//benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

在我看来，一个健康的限制是每秒不超过 6-7 次调用，即只允许最终函数每 150 毫秒运行一次（从@Tsunamis 的回答开始）：

```
$(window).resize($.throttle(150, function(){ /* do something */ })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:16:01.330

**更新：**
[检查此页面，以及所有感兴趣的链接文章](http://javascript.info/tutorial/events-and-timing-depth)：特别是 Web Workers、Asynchronous events 和 Timeout

* * *

使用间隔的主要缺点是我所知道的所有当前 JS 实现都是单线程的。因此，如果您设置一个间隔以每 100 毫秒调用一次函数，然后每 500 毫秒调用另一个函数，则这些间隔将不会同时执行。如果您严重依赖在使用第二个间隔执行的代码中返回的第一个间隔，那么您迟早会遇到麻烦。

您可能会注意到的另一件事是间隔不是很准确。100ms 应该被看成是~100ms，毫无疑问，设定的时间间隔和实际的时间间隔可能相差很大（100ms 的时间间隔很容易变成 150ms）。

最重要的是，你的*主管*是对的，尽可能避免。但是，有时别无选择，只能使用间隔。在这种情况下，列出所有区间，找到最小公分母并设置一个大区间，当*“他们的时间到了”时，该区间使用闭包调用各种函数*

```
var allIntervals = (function()
{
    var interval100MS = function(){};
    var interval200MS = function(){};//etc...
    var timesCalled = 0;
    var timer = setInterval(function()
    {
       if (++timesCalled%2)
       {
           return interval100MS();
       }
       interval100MS();
       return interval200MS();
    },100);
    return timer;//<-- expose so you can clear the interval, of course
}()); 
```

您可以扩展它以返回一个对象，该对象允许您设置额外的间隔、更改主要间隔时间、取消设置某些间隔等...

*编辑*
我忽略了您使用间隔的事实。那只是没有必要：`window.onresize`或者`window.addEventListener('resize',handlerFunction,false);`会这样做。在幕后，JS 有一个事件循环/循环，它比任何类型的自制代码更有效地处理事情。
人们常说，最好的开发人员本质上是懒惰的人：他们会经历很多麻烦，只是为了确保他们需要的东西以前没有做过。如果他们发现了可以满足他们需要的东西，他们会使用它，而不是自己编写相同的东西。

无论如何，我已经在我的答案的最上面添加了一个链接，我将在[这里](http://javascript.info/tutorial/events-and-timing-depth)再次添加它。检查一下，尤其是对**web workers**的引用，如果你检查时间（不确定你在那里做什么/为什么/做什么），这可能会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:02:01.760

您将任务设置为每 X 秒执行一次。这些任务需要 CPU 时间并降低您网站的性能。当然，这取决于您在这些任务中所做的工作。但是，如果您这样做，即每 1000 毫秒而不是 5000 毫秒，您的性能就会降低。因此，为您的间隔选择尽可能高的值总是更好的选择。

如果您使用的是 jQuery，您可以使用以下代码来检查设备宽度的变化，这将比您自己的间隔实现使用更少的性能：

```
$(window).resize(function() { /* do something */ }); 
```

# c# - 为什么我的会话购物车列表是空的？

> ID：13156287
> 
> 赞同：0
> 
> 时间：2012-10-31T10:55:12.260
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3, session

当我调试我的 actionresult AddToCart 时。我的购物车获得了 productId 的值，该值在这里运行良好：

```
public ActionResult AddToCart(int productID)
    {
        List<int> cart = (List<int>)Session["cart"];
        if (cart == null){
           cart = new List<int>();
        }
        cart.Add(productID);

        return new JsonResult() { Data = new { Status = "Success" } };
    } 
```

我正在使用 ajax 来获取 productID：

```
$(function () {
            $(".a").live("click", function () {
                var $this = $(this),
            productID = $this.data('productID');
                $.ajax({
                    url: '/Home/AddToCart',
                    type: "post",
                    cache: false,
                    data: { productID: productID },
                    success: function (data) {
                        data = eval(data);
                        $this.addClass('productSelected');
                    },
                    error: function (result) {
                        $(".validation-summary-errors").append("<li>Error connecting to server.</li>");
                    }

                });
            });

        }); 
```

但是当我实现这个 actionresult 时，我的购物车为空：

```
public ActionResult ShoppingCart()
{
    var cart = Session["cart"] as List<int>;

    var products = cart != null ? cart.Select(id => 
             {
                 var product = repository.GetProductById(id);
                 return new ProductsViewModel
                    {
                       Name = product.Name,
                       Description = product.Description,
                       price = product.Price
                    }
             }) : new List<ProductsViewModel>();

    return PartialView(products);
} 
```

我究竟做错了什么？为什么 actionresult Shoppingcart 有空值这是怎么发生的？当我调试 AddToCart 时，Cart 得到一个值并被添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:58:08.687

您应该在向其添加项目后更新会话内的购物车对象：

```
public ActionResult AddToCart(int productID)
{
    List<int> cart = (List<int>)Session["cart"];
    if (cart == null){
       cart = new List<int>();
    }
    cart.Add(productID);

    Session["cart"] = cart;

    return new JsonResult() { Data = new { Status = "Success" } };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:05:14.343

您还需要更新会话购物车，就像这样......

```
public ActionResult AddToCart(int productID)
{
    List<int> cart = (List<int>)Session["cart"];
    if (cart == null){
       Session["cart"] = cart = new List<int>();
    }
    cart.Add(productID);

    return new JsonResult() { Data = new { Status = "Success" } };
} 
```

# snmp - NET-SNMP：了解更多有关 Disman 陷阱的详细信息

> ID：13156289
> 
> 赞同：1
> 
> 时间：2012-10-31T10:55:13.097
> 
> 标签：snmp, net-snmp

我正在使用 NET-SNMP 和 DISMAN Event MIB 处理陷阱

使用以下 snmpd.conf 配置：

```
createUser disman MD5 sercrt@1
rouser disman auth
agentSecName disman
#defaultMonitors yes
disk / 90%
disk /var 85%
disk /opt 95%
disk /opt/pkgs 90%
disk /ufda 90%
proc cron
proc rtrcopy 1 1
proc socks1081 1 1
# monitor must have ".." in the line
monitor -u disman -r 30 -o prNames.1 -o prErrMessage.1 "Cron not running" prErrorFlag.1 != 0
monitor -u disman -r 30 -o prNames.2 -o prErrMessage.2 "rtrcopy running" prErrorFlag.2 != 0
monitor -u disman -r 30 -o prNames.3 -o prErrMessage.3 "socks1081 running" prErrorFlag.3 != 0
monitor -u disman -r 30  -o dskPath.1 -o dskErrorMsg.1 "/ is below 90%" dskErrorFlag.1 != 0
monitor -u disman -r 30  -o dskPath.2 -o dskErrorMsg.2 "/var is below 90%" dskErrorFlag.2 != 0
monitor -u disman -r 30  -o dskPath.3 -o dskErrorMsg.3 "/opt is below 90%" dskErrorFlag.3 != 0
monitor -u disman -r 30 -o dskPath.4 -o dskErrorMsg.4 "/opt/pkgs is below 90%" dskErrorFlag.4 != 0
monitor -u disman -r 30  -o dskPath.5 -o dskErrorMsg.5 "/ufda is below 90%" dskErrorFlag.5 != 0 
```

我发现 disman 陷阱正在填充以下变量：

```
$1 = mteHotTrigger           dskTable  
$2 = mteHotTargetNameThe     '' 
$3 = mteHotContextName       ''
$4 = mteHotOID               .1.3.6.1.4.1.2021.9.1.100.2
$5 = mteHotValue             1 
```

在事件列表中，这对操作员来说信息量不是很大。我想如果我可以用某种有用的文本填充 mteHotContextName，例如“/低于 90%”，那么这将更有用

我看不到如何使用 monitor 指令执行此操作

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:42:05.410

这实际上是 -o 开关的用途：它允许您将其他对象添加到正在发送的通知中。在您的情况下，如果您想要包含在错误消息值中的“有用文本”，那么您正在做正确的事情，即使用 -o 开关包含这些对象。为什么它不适合你，我不确定。但是您不需要每行条目单独的监控线。相反，使用一个检查每一行的值。例如，`defaultMonitors`配置令牌实际上指定了这一点：

```
monitor   -o prNames -o prErrMessage "process table" prErrorFlag != 0 
```

它一次检查每个 prErrorFlag。

您在引号中使用的名称只是触发器的名称，并且该信息不会在陷阱中发送，并且您不能强制它发送，不幸的是。它只是内部使用的监视器的管理名称，并且在 DISMAN-MIB 条目本身中用于报告监视器。

# ssh - 有没有办法只允许 SSH 本地端口转发到某些端口

> ID：13156297
> 
> 赞同：1
> 
> 时间：2012-10-31T10:55:38.013
> 
> 标签：ssh, openssh

PermitOpen 允许同时基于 IPAddress 和端口进行过滤。我只想过滤某些端口。PermitOpen 是否支持该功能，或者我们可以通过其他任何方式做到这一点？

# java - android从数据库查看数据到列表视图

> ID：13156298
> 
> 赞同：-3
> 
> 时间：2012-10-31T10:55:38.703
> 
> 标签：java, android, sqlite

```
public List<Contact> getAllContacts() {
        List<Contact> contactList = new ArrayList<Contact>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Contact contact = new Contact();
                contact.setID(Integer.parseInt(cursor.getString(0)));
                contact.setPerkara(cursor.getString(1));
                contact.setTarikhKejadian(cursor.getString(2));
                contact.setMasaMula(cursor.getString(3));
                contact.setMasaAkhir(cursor.getString(4));
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    } 
```

这就是我用来从`SQLite`. 数据在那里。但我不知道如何调用它并将数据放在列表视图中。

我`List<Contact> contacts = db.getAllContacts();`在我的 java 程序中使用，然后我坚持了这个例子，我只展示了如何查看日志中的数据。

我应该使用什么方法从数据库中调用数据并在列表视图中查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:50:19.690

如上所述，您必须使用我自己创建的适配器并将其添加到您的 ListView。这大致就是你的做法，代码有点粗糙，因为在这里直接输入文本编辑器：

```
public class ContactListAdapter extends ListAdapter<String> {

 private final List contacts;

//Call to super to set up the adapter
  public ContactListAdapter(Context context, List<Contact> contacts) {
    super(context, R.layout.rowlayout, values);
    this.contacts = contacts;
}

@Override
  public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //Get your View
    View rowView = inflater.inflate(R.layout.rowlayout, parent, false);

    //create the emelements you want to add to list
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    textView.setText(contacts.get(position).getId())

    return rowView
}
} 
```

然后将此适配器添加到您的 ListView 并初始化它

希望这可以帮助你

# android - IllegalStateException：适配器的内容发生了变化但ListView没有收到通知

> ID：13156299
> 
> 赞同：7
> 
> 时间：2012-10-31T10:55:41.747
> 
> 标签：android, filter, android-arrayadapter

我正在使用自定义 ArrayAdapter 在 AutocompleteTextView 上设置适配器（AddressAdapter 扩展了 ArrayAdapter）。

```
public class AutoCompleteAdapter extends ArrayAdapter<String> implements Filterable {
private ArrayList<String> mData;
ArrayList<String> listTempPrefix = new ArrayList<String>();
ArrayList<String> listTemp = new ArrayList<String>();
String valueText;
String[] words;
String ulcase;

public AutoCompleteAdapter(Context context, int textViewResourceId, ArrayList<String> bS) {
    super(context, textViewResourceId);
    mData = bS;//new ArrayList<String>();
}

@Override
public int getCount()
{
    synchronized (listTempPrefix)
    {
        return listTempPrefix.size();
    }
}

@Override
public String getItem(int index)  
{
    synchronized (listTempPrefix)
    {
        try {
            //Log.e("Error", listTempPrefix.get(index));
            return listTempPrefix.get(index);
        } catch(IndexOutOfBoundsException e) {
            Log.e("Error", "IndexOutOfBoundsException");
            return "";
        }
    }

}

@Override
public Filter getFilter()
{
    Filter myFilter = new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint)
        {

            FilterResults filterResults = new FilterResults();
            synchronized (filterResults)
            {
                listTempPrefix.clear();
                listTemp.clear();
                //Log.e("1", "1");

                try {
                if(constraint != null) {
                    // A class that queries a web API, parses the data and returns an ArrayList<Style>
                    //StyleFetcher fetcher = new StyleFetcher();
                    //try {
                        //mData = fetcher.retrieveResults(constraint.toString());
                    //}
                    //catch(Exception e) {}
                    // Now assign the values and count to the FilterResults object

                    for(String value: mData) {
                        valueText = value.toLowerCase();

                        //System.out.println("constraintH - " + constraint);

                        constraint.toString().toLowerCase();
                        ulcase = constraint.toString().toLowerCase();
                        //System.out.println("ulcase - " + ulcase);

                        if (valueText.startsWith(ulcase)) {
                            listTempPrefix.add(value);
                        } else {
                            words = valueText.split(" ");
                            //final int wordCount = words.length;

                            // Start at index 0, in case valueText starts with space(s)
                            for (int k = 0; k < words.length; k++) {
                                if (words[k].startsWith(ulcase)) {
                                    listTemp.add(value);
                                    break;
                                }
                            }
                        }

                        ///listTemp.add(mData.get(i));
                        //filterResults.count = mData.size();
           //           System.out.println("mData" + i + mData.get(i));
                    }
                    //Log.e("2", "2");
           //       System.out.println("size " + listTemp.size() + " value" + listTemp);

                    listTempPrefix.addAll(listTemp);

                    filterResults.values = listTempPrefix;

                    filterResults.count = listTempPrefix.size();
                    //System.out.println("size " + filterResults.count + " value" + filterResults.values);

                    //System.out.println("constraint" + constraint);

                }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    }
                return filterResults;
            }
        }

        @Override
        protected void publishResults(CharSequence contraint, FilterResults filterResults) 
        {
            synchronized (filterResults)
            {
                if(filterResults != null && filterResults.count > 0) {
                notifyDataSetChanged();
                //Log.e("notifyDataSetChanged", "notifyDataSetChanged");
                }
                else {
                    notifyDataSetInvalidated();
                    //Log.e("notifyDataSetInvalidated", "notifyDataSetInvalidated");
                }
            }
        }
    };
    return myFilter;
} 
```

}

我有时得到的：请注意，这种情况很少发生。但我想完全摆脱这个错误。这是部分堆栈跟踪：

```
java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(-1, class android.widget.AutoCompleteTextView$DropDownListView) with Adapter(class com.example.test.AutoCompleteAdapter)]. 
```

问题可能是来自键盘的快速输入，方法 notifyDataSetChanged () 没有调用。但我不确定。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-18T20:01:43.997

将发布结果更改为

```
@Override 
protected void publishResults(final CharSequence contraint, final FilterResults filterResults) { 
    listTempPrefix = (List) results.values;
    if(filterResults != null && filterResults.count > 0) {
        notifyDataSetChanged();
    } else {
        notifyDataSetInvalidated();
    }
} 
```

这样，GUI 线程会更新结果，而不是在后台线程中运行的 performFiltering。

从 performFiltering 中删除 listTempPrefix 引用并使用本地变量来存储结果并通过 FilterResults 返回它们

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T11:44:52.520

您正在更改`listTempPrefix`数组`performFiltering`（使用 clear 和 addAll），因此您需要调用`notifyDataSetChanged`以避免此异常。

但是`performFiltering`不会在 ui 线程上调用，所以调用`notifyDataSetChanged`也会引发异常。

解决这个问题最好的办法就是改变里面的listTempPrefix数组`publishResults`，然后调用`notifyDataSetChanged`。

`listTempPrefix`删除对方法所做的更改`performFiltering`（您可能需要根据过滤器逻辑创建一个临时数组）。

在 上，使用 上包含的值`publishResults`更新您的数组，然后调用。`listTempPrefix``filterResults``notifyDataSetChanged`

这是基于您的代码的示例：

```
@Override
public Filter getFilter()
{
    Filter myFilter = new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint)
        {

            FilterResults filterResults = new FilterResults();
            synchronized (filterResults)
            {
                //listTempPrefix.clear(); // Don't change listTempPrefix here
                 ...
                        ulcase = constraint.toString().toLowerCase();
                        //System.out.println("ulcase - " + ulcase);

                        if (valueText.startsWith(ulcase)) {
                            //listTempPrefix.add(value); // Don't change listTempPrefix
                            // To keep your logic you might need an aux array 
                            // for this part
                        } else {
                            ...
                        }

                    //listTempPrefix.addAll(listTemp); // Don't change it

                    filterResults.values = listTempPrefix; // No problem here

                    filterResults.count = listTempPrefix.size(); // No problem here
                    //System.out.println("size " + filterResults.count + " value" + filterResults.values);

                    //System.out.println("constraint" + constraint);

                }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    }
                return filterResults;
            }
        }

        @Override
        protected void publishResults(CharSequence contraint, FilterResults filterResults) 
        {
            // At this point, make the changes you need to listTempPrefix
            // using filterResults.values
            synchronized (filterResults)
            {
                if(filterResults != null && filterResults.count > 0) {
                notifyDataSetChanged();
                //Log.e("notifyDataSetChanged", "notifyDataSetChanged");
                }
                else {
                    notifyDataSetInvalidated();
                    //Log.e("notifyDataSetInvalidated", "notifyDataSetInvalidated");
                }
            }
        }
    };
    return myFilter;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:00:28.893

您必须在数据集（ 、、等）支持您的更改时立即调用该`notifyDataSetChanged()`方法。否则你会得到这个。`ArrayList``Array``Cursor``Adapter``Exception`

# sql - 在 oracle 中加入表和子查询

> ID：13156302
> 
> 赞同：0
> 
> 时间：2012-10-31T10:55:55.287
> 
> 标签：sql, oracle, ora-00933

我不明白这个查询有什么问题。它给了我一个“命令未正确结束”的编译时错误。

内部查询给了我四条记录。

```
select WGN3EVENTPARTICIPANT.EVENTUID 
from 
    (Select WGN_V_ADDRESS_1.ADDRESSUID1 as add1,
            WGN_V_ADDRESS_1.ADDRESSUID2 as add2 
     from WGN3USER inner join 
          WGN_V_ADDRESS_1 on WGN_V_ADDRESS_1.USERID=wgn3user.USERID 
      where WGN3USER.USERNAME='FIRMWIDE\khuraj'
    ) as ta
    ,WGN3EVENTPARTICIPANT 
 where (ta.ADDRESSUID1=WGN3EVENTPARTICIPANT.ADDRESSUID1) AND    
       (ta.ADDRESSUID2=WGN3EVENTPARTICIPANT.ADDRESSUID2) 
```

我在 Oracle 中运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:03:38.753

正如其他人所指出的，您的原始代码示例包含几个错误。但是，导致您报告的特定错误 (ORA-00933) 的原因是这个。

在 Oracle`AS`中仅用于*列*别名。所以你需要像这样给你的内联视图起别名：

```
... where WGN3USER.USERNAME='FIRMWIDE\khuraj'
    )  ta 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:59:13.927

您应该更改 where 子句以使用字段别名：

```
 where (ta.add1=WGN3EVENTPARTICIPANT.ADDRESSUID1) AND    
       (ta.add2=WGN3EVENTPARTICIPANT.ADDRESSUID2) 
```

**已编辑**

尝试删除`as`表别名中的保留字：

```
) as ta -> ) ta 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:01:49.717

'\' 是一个需要转义的转义字符：

变化`'FIRMWIDE\khuraj'`_`'FIRMWIDE\\khuraj'`

并且外部 where 子句引用了错误的别名：`ta.ADDRESSUID1`代替`ta.add1`和`ta.ADDRESSUID2`代替`ta.add2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:05:06.183

```
select WGN3EVENTPARTICIPANT.EVENTUID 
from 
    (Select WGN_V_ADDRESS_1.ADDRESSUID1 as add1,
            WGN_V_ADDRESS_1.ADDRESSUID2 as add2 
     from WGN3USER inner join 
          WGN_V_ADDRESS_1 on WGN_V_ADDRESS_1.USERID=wgn3user.USERID 
      where WGN3USER.USERNAME='FIRMWIDE\khuraj'
    ) as ta
    left outer join WGN3EVENTPARTICIPANT on 
 ta.ADDRESSUID1=WGN3EVENTPARTICIPANT.ADDRESSUID1 AND
       ta.ADDRESSUID2=WGN3EVENTPARTICIPANT.ADDRESSUID2 
```

# javascript - jQuery datepicker：编辑文本框时禁用日历更改

> ID：13156311
> 
> 赞同：0
> 
> 时间：2012-10-31T10:56:21.837
> 
> 标签：javascript, jquery, jquery-ui-datepicker

当我编辑它的文本框时，我想禁用日历层的更改。目前，当我输入例如 2012-10-10 时，日历层会自动更新为 2012-10-1。我想阻止更改，直到用户点击“输入”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:47:39.727

最简单的解决方案是简单地禁用文本字段并只允许用户从日期选择器中选择日期。为了禁用该字段，您必须将`disabled`属性设置为`true`.

# javascript - 覆盖系统事件：文本字段清除

> ID：13156318
> 
> 赞同：1
> 
> 时间：2012-10-31T10:56:44.780
> 
> 标签：javascript, sencha-touch-2

我的应用程序中有很多 TextField，都存在相同的问题：按下右侧的清除图标后，此文本框的焦点丢失。

[该解决方案](https://stackoverflow.com/questions/7343006/sencha-touch-textfield-clear-event) 有效但效率不高，因为那时我必须为每个文本字段都这样做：

```
 {
                    xtype: 'textfield',
                    label: 'Name',
                    onClearIconTap: function() {
                                        this.setValue('');
                                        console.log('onClearTap');
                                    }
                } 
```

我遇到了[这个页面](http://www.sencha.com/forum/showthread.php?124405-How-to-detect-when-someone-clears-a-textfield)，覆盖了该事件，但它不起作用。这将是一个首选的解决方案：

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:08:40.890

以下是如何在 Sencha Touch 2 的 app.js 启动函数中覆盖该函数：

```
Ext.field.Text.override({
        onClearIconTap: function() {
            this.setValue('');
            this.focus();
            console.log('global onClearTap');
        }
    }); 
```

[http://jsfiddle.net/QYJpc/46/](http://jsfiddle.net/QYJpc/46/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T08:16:32.893

一个更好的解决方案（适用于 touch 2.3.0）：

```
Ext.define('MyApp.override.field.Text', {
    override: 'Ext.field.Text',
    // @private
    doClearIconTap: function(me, e) {
        me.setValue(this.originalValue);

        me.focus();

        //sync with the input
        me.getValue();
    }
}); 
```

# javascript - 如何将 ACE 编辑器集成到 Qooxdoo 构建中？

> ID：13156321
> 
> 赞同：3
> 
> 时间：2012-10-31T10:57:00.133
> 
> 标签：javascript, qooxdoo

我通过将所需的 .js 和 .css 文件放到资源目录中并使用[#asset](http://ace.ajax.org/) (...)源中的指令。

虽然这工作正常，但感觉不对。是否有机会以让 qooxdoo 构建脚本将其集成到生成的大 JS 和 CSS 文件中的方式集成 ACE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:30:31.543

这是一个不错的方法。至于单个构建脚本，您需要将 ACE 代码包装到 qooxdoo 类中才能实现。一般来说，最好让外部库自己留下，因为生成器可以以任意 JS 代码部分不可能的方式处理 qooxdoo 代码。关于链接。

对于 qooxdoo 应用程序，通常没有 CSS 文件。

# elasticsearch - elasticsearch / 轮胎：如何定义必须始终匹配的基本搜索条件？

> ID：13156322
> 
> 赞同：1
> 
> 时间：2012-10-31T10:57:00.640
> 
> 标签：elasticsearch, tire

***使用 Tire.gem 搜索我无法找到有关如何设置“默认搜索条件”的文档的正确部分***谁知道如何执行此操作或可以指向相关文档部分？提前谢谢！

希望将某些标准用作基础，例如，仅将符合此标准的配置文件作为搜索结果返回（在搜索参数旁边）

*   搜索所有 profile.completed = true 的配置文件
*   搜索所有符合搜索条件的个人资料

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:51:07.207

对您的查询使用过滤器（我确定您是动态生成的）

所以

```
 Profile.search do
      query { string your_query_string }
      filter :term, :commpleted => true
    end 
```

# java - Firebird JDBC 驱动连接字符编码

> ID：13156329
> 
> 赞同：11
> 
> 时间：2012-10-31T10:57:25.800
> 
> 标签：java, jdbc, firebird, fedora

我有一个 JSF 应用程序在 Fedora 17 的 tomcat6 上运行，使用 firebird 作为数据库，并且从数据库到应用程序的所有寄存器都带有编码问题。

语言是巴西葡萄牙语，所以我需要 é 和 ã 和 ç，而这里所有这些特殊字符都有问题。

原始源代码中的é和ã是可以的，只有直接来自数据库的那些给我带来了麻烦......

知道发生了什么吗？

这是一个奇怪的角色应该是é的图像

![有问题的数据表](../Images/8f58ceb7e743c3bced7b8d38e452f533.png)

当它从数据库中恢复时，就会出现问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-31T17:59:32.753

在 JDBC 连接 URL 中使用`encoding=ISO/UTF/WIN...`查询参数已经解决了这个问题。

例如：

```
jdbc:firebirdsql:url:db?encoding=ISO8859_1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T13:53:52.530

当您没有在 Jaybird 中指定连接字符集（`encoding`使用 Firebird 字符集名称或`charSet`使用 Java 字符集名称的属性）时，Jaybird 会退回到 Firebird 的连接字符集概念`NONE`，这意味着服务器不会从 (VAR)CHAR 列的存储表示中音译字符并按原样发送其字节。

这意味着 Jaybird 接收到未知字符集中的字节序列。Jaybird 然后将使用 Java 安装的默认字符集将这些字节转换为字符串。因此，如果 db（或列）字符集与您的 Java 字符集不匹配，那么它可能会产生不正确的结果。更糟糕的是：以这种方式从具有不同默认 java 字符集的不同系统中读取和写入会产生完全的垃圾或音译错误。

解决方案：始终指定显式连接字符集。更好的是确保您的数据库具有默认字符集（或者每个`(VAR)CHAR`列都有明确定义的字符集）。

如果没有指定明确的连接字符集来强制用户考虑这个问题，Jaybird (2.3) 的下一个版本可能会拒绝连接（如果他们仍然想要旧的行为，那么他们可以明确指定`encoding=NONE`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T12:56:09.343

自从我通过 Google 来到这里寻找答案以来，我的 2 美分。我在使用旧版 jaybird 驱动程序（v1.5）时遇到了 interbase 7.5.80 的问题。除了“NONE”之外，我在连接上使用的任何编码都会导致连接超时。最终我继续使用'NONE'：

```
FBWrappingDataSource dataSource = new FBWrappingDataSource();
dataSource.setDatabase("url");
dataSource.setType("TYPE4");
dataSource.setEncoding("NONE");
dataSource.setLoginTimeout(10);
java.sql.Connection c = dataSource.getConnection("sysdba", "masterkey"); 
```

并在创建具有特定编码的新 String 实例时使用了 getBytes：

```
String column = new String(rs.getBytes("column"), "Windows-1255"); 
```

[rs当然是ResultSet]

祝你好运！

# sql - 如何通过存储过程使用 SQL Server 2008 Express 连接到 SQL Server 2008 R2

> ID：13156336
> 
> 赞同：0
> 
> 时间：2012-10-31T10:57:52.617
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-server-2008-express

如何使用 SQL Server 2008 Express 通过存储过程连接访问 SQL Server 2008 R2 数据库中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:25:00.307

首先，您需要创建一个链接服务器。有关详细信息，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

接下来，您将需要使用 4 部分名称。例如：

```
SELECT * FROM Server.Database.Schema.Table 
```

# ios6 - 堆栈跟踪方法名称已编辑

> ID：13156342
> 
> 赞同：12
> 
> 时间：2012-10-31T10:58:11.247
> 
> 标签：ios6, stack-trace

当我的应用在他们的设备上崩溃时，我有用户通过电子邮件向我发送堆栈跟踪。在 iOS 6 之前，它们看起来像这样：

```
CRASH: NSInvalidArgumentException (*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil)

TRACE: (
0  CoreFoundation                      0x355e58a7 __exceptionPreprocess + 186
1  libobjc.A.dylib                     0x3798c259 objc_exception_throw + 32
2  CoreFoundation                      0x3553a1d7 -[__NSArrayM insertObject:atIndex:] + 186
3  MYAPP                               0x0006c0f7 MYAPP + 188663
4  MYAPP                               0x000652a3 MYAPP + 160419
5  Foundation                          0x3512ac29 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 16
6  Foundation                          0x350826d9 -[NSURLConnectionInternalConnection invokeForDelegate:] + 28
7  Foundation                          0x350826a3 -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 198
8  Foundation                          0x350825c5 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 60
9  CFNetwork                           0x34de77f5 _ZN19URLConnectionClient23_clientDidFinishLoadingEPNS_26ClientConnectionEventQueueE + 192
10  CFNetwork                          0x34ddc4a5 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 424
11  CFNetwork                          0x34ddc1a3 _ZN19URLConnectionClient13processEventsEv + 106
12  CFNetwork                          0x34ddc0d9 _ZN17MultiplexerSource7performEv + 156
13  CoreFoundation                     0x355b9ad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
14  CoreFoundation                     0x355b929f __CFRunLoopDoSources0 + 214
15  CoreFoundation                     0x355b8045 __CFRunLoopRun + 652
16  CoreFoundation                     0x3553b4a5 CFRunLoopRunSpecific + 300
17  CoreFoundation                     0x3553b36d CFRunLoopRunInMode + 104
18  GraphicsServices                   0x371d7439 GSEventRunModal + 136
19  UIKit                              0x33047cd5 UIApplicationMain + 1080
20  MYAPP                              0x0003fbcf MYAPP + 7119
21  MYAPP                              0x0003fb84 MYAPP + 7044
) 
```

从 CoreFoundation 等方法名称并询问用户发生了什么，我可以很好地了解崩溃发生的位置。

然而，自从 iOS 6 发布以来，我的崩溃报告都是这样的：

```
CRASH: NSRangeException (*** -[__NSArrayI objectAtIndex:]: index 2147483670 beyond bounds [0 .. 11])

TRACE: (
0  CoreFoundation                     0x3a3872bb <redacted> + 186
1  libobjc.A.dylib                    0x32ca697f objc_exception_throw + 30
2  CoreFoundation                     0x3a2d1e8d <redacted> + 164
3  MYAPP                              0x000ff721 MYAPP + 214817
4  MYAPP                              0x000e8999 MYAPP + 121241
5  UIKit                              0x372f60ad <redacted> + 72
6  UIKit                              0x372f605f <redacted> + 30
7  UIKit                              0x372f603d <redacted> + 44
8  UIKit                              0x372f58f3 <redacted> + 502
9  UIKit                              0x372e1287 <redacted> + 526
10  UIKit                             0x37373f3d <redacted> + 748
11  UIKit                             0x3721e52b <redacted> + 318
12  UIKit                             0x3720b809 <redacted> + 380
13  UIKit                             0x3720b123 <redacted> + 6154
14  GraphicsServices                  0x362085a3 <redacted> + 590
15  GraphicsServices                  0x362081d3 <redacted> + 34
16  CoreFoundation                    0x3a35c173 <redacted> + 34
17  CoreFoundation                    0x3a35c117 <redacted> + 138
18  CoreFoundation                    0x3a35af99 <redacted> + 1384
19  CoreFoundation                    0x3a2cdebd CFRunLoopRunSpecific + 356
20  CoreFoundation                    0x3a2cdd49 CFRunLoopRunInMode + 104
21  GraphicsServices                  0x362072eb GSEventRunModal + 74
22  UIKit                             0x3725f301 UIApplicationMain + 1120
23  MYAPP                             0x000ccbd3 MYAPP + 7123
24  MYAPP                             0x000ccb88 MYAPP + 7048
) 
```

我从这里获取堆栈跟踪，当重新打开应用程序时，系统会提示用户发送电子邮件：

```
void uncaughtExceptionHandler(NSException *exception) {
    //make a file name to write the data to using the documents directory:
    NSString *fileName = [NSString stringWithFormat:@"%@/crashlog.txt", documentsDirectory];
    //create content - four lines of text
    NSString *content = [NSString stringWithFormat:@"CRASH: %@ (%@)\n\nTRACE: %@", [exception name], [exception reason], [exception callStackSymbols]];
    //save content to the documents directory
    [content writeToFile:fileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil];
} 
```

没有方法名称，这比无用更糟糕。有没有办法让这些方法名称回到我的堆栈跟踪中？这是一个发布配置，而不是调试。

**编辑：**

我已按照[此答案](https://stackoverflow.com/a/4954949/970789)中的说明进行操作。

我正在从包中提取`.app`和`.dSYM`文件`.xcarchive`并运行`atos -arch armv7 -o 'MyApp.app'/'MyApp'`

但是，我仍然没有从`atos`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:10:44.173

您是否偶然安装了任何 iOS 6 测试版？我遇到了同样的问题。

这个[问题](https://stackoverflow.com/questions/12809174/how-to-stop-symbolicate-adding-redacted-pieces-to-ios-crash-log)帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T20:50:37.803

OP 提到了在他的 EDIT 中使用的错误文件。

这篇文章包含了完成这项工作所需的所有信息：

[使用 atos 通过 dSYM 确定崩溃的方法名称](https://stackoverflow.com/questions/13654376/using-atos-to-determine-crashed-method-name-with-dsym)

关于在哪里找到正确的文件以使用 atos 运行的明确说明：

[Atos 无法从归档应用程序的 dSYM 中获取符号](https://stackoverflow.com/questions/7675863/atos-cannot-get-symbols-from-dsym-of-archived-application)

确保使用正确的架构；我试图使用 armv7，但我需要指定 arm64

# asp.net-mvc - 在 jqGrid 中单击单元格时打开模式对话框

> ID：13156343
> 
> 赞同：2
> 
> 时间：2012-10-31T10:58:11.940
> 
> 标签：asp.net-mvc, jqgrid, modal-dialog

我是 jqGrid 的新手。你能帮我解决这个要求吗？

当在 jqGrid 中双击单元格时，我想打开一个新的模式对话框。每个单元格将打开一个不同的模式对话框，这取决于列、行组合。所以这必须动态决定。

我正在使用 asp.net mvc 视图显示在对话框中。

添加我正在处理的代码：（仍然没有格式化）

```
 $.ajax(
                {
                    type: "GET",
                    url: "/Forecast/GetColumnsAndData/",
                    data: "",
                    dataType: "json",
                    success: function (result) {
                        colN = jQuery.parseJSON(result.colNames);
                        colM = jQuery.parseJSON(result.colModel);
                        jQuery("#rowed2").jqGrid({
                            url: '/Forecast/GridData/',
                            datatype: 'json',
                            mtype: 'GET',
                            colNames: colN,
                            colModel: colM,
                            rowNum: 10,
                            rowList: [10, 20, 30],
                            viewrecords: true,
                            onCellSelect: function (rowid, iCol, cellcontent) {
                                //Need to add the code for modal dialog and criteria check
                            },
                            gridComplete: function () {
                                var ids = jQuery("#rowed2").jqGrid('getDataIDs');
                                for (var i = 0; i < ids.length; i++) {
                                    var cl = ids[i];
                                    be = "<input style='height:22px;width:20px;' type='button' value='E' onclick=\"editrows('" + cl + "');\"  />";
                                    se = "<input style='height:22px;width:20px;' type='button' value='S' onclick=\"jQuery('#rowed2').saveRow('" + cl + "', '','/Forecast/GridDataSave/');\"  />";
                                    ce = "<input style='height:22px;width:20px;' type='button' value='C' onclick=\"jQuery('#rowed2').restoreRow('" + cl + "');\" />";
                                    jQuery("#rowed2").jqGrid('setRowData', ids[i], { act: be + se + ce });
                                }
                            },

                            caption: "Forecast Details"
                        });
                        jQuery("#rowed2").jqGrid('navGrid', "#prowed2", { edit: true, add: false, del: false });
                        jQuery("#rowed2").jqGrid('setGroupHeaders', {
                            useColSpanStyle: true,
                            groupHeaders: [
                                { startColumnName: 'Hours1', numberOfColumns: 2, titleText: '<center>October</center>' },
                                { startColumnName: 'Hours2', numberOfColumns: 2, titleText: '<center>November</center>' }
                              ]
                        });
                    },
                    error: function (x, e) {
                        alert(x.readyState + " " + x.status + " " + e.msg);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:14:01.537

有一个[用于双击的 jqGrid 事件](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)，您可以在 jqGrid 中使用它

```
ondblClickRow: function (rowId, iRow, iCol, e) {
    //new modal based on above
} 
```

# css - 调整 Galleria 中缩略图的渲染

> ID：13156345
> 
> 赞同：1
> 
> 时间：2012-10-31T10:58:20.793
> 
> 标签：css, internet-explorer-8, galleria

我正在研究 Galleria 的经典主题来展示画廊。这里的要求是如果缩略图列表 div 宽度增加超过 24，则使用水平滚动条按以下顺序显示两行缩略图。

```
1 3 5 7 9  11 13 15 17 19 21 23 ..

2 4 6 8 10 12 14 16 18 20 22 24 .. 
```

如果图像小于 24 且大于 12，则订单应呈现为两行：-

```
1 2 3 4 5 6 7 8 9 10 11 12

13 14 15 .. 
```

如果图像少于 12 个，则图像应在一行中呈现为：-

```
1 2 3 4 5 6 7... 
```

目前我所做的是我使用 css3 列属性根据图像计数使用不同的类来执行此操作。这适用于所有浏览器，但在 IE8 中。

那么，是否有任何替代 IE8 或更低版本的 css3 列属性。或者一些更好的方法来实现在 IE 中也可以正常工作的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:59:16.987

IE8 中的列没有直接替代品。要解决此问题，您将需要检测缩略图的数量，然后适当地分配类，并编写自定义 css 类。

因此，您可以向缩略图持有者添加一个“列”类，然后编写您已经必须使列正确显示的 css（可能进行调整），然后编写另一个类以具有不同的显示。

也就是说，Galleria 确实没有最简单的 API。

# html - Img src 不适用于文件夹

> ID：13156350
> 
> 赞同：4
> 
> 时间：2012-10-31T10:58:31.480
> 
> 标签：html, image, src

这个小代码到底怎么不起作用？

```
<html>
<head></head>
<body>
    <img src="/logok/35_Facebook.png" alt="Smiley face" height="80" width="80"> 
</body>
</html> 
```

如果图像在同一个文件夹中，它会加载图像。如果它在“logok”文件夹中，那么它不会。我试过：“logok/...”、“/logok/...”、“logok//....”、“logok/...”等。

**EDIT1：** 我的 html 文件位于一个名为“mdh”的文件夹中，在此文件夹中有一个“logok”文件夹，图像所在的位置。

**EDIT2：** 我也试过绝对路径，还是不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T11:29:34.303

是的，这是一个权限问题，该文件夹具有读取权限，但其中的文件没有感谢您的帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T05:14:11.073

给出完整路径：

```
<html>
<head></head>
<body>
    <img src="http://localhost/logok/35_Facebook.png" alt="Smiley face" height="80" width="80"> 
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:02:13.907

您的图像未加载，因为您的路径可能错误，请尝试提供完整路径名

```
<html>
<head></head>
<body>
    <img src="http://www.mysite.com/logok/35_Facebook.png" alt="Smiley face" height="80" width="80"> 
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-12T15:07:50.333

这行得通...

```
src="file:///C:/folder/img.xxx" 
```

# php - MySQL，PHP，GROUP 中有多少个

> ID：13156353
> 
> 赞同：0
> 
> 时间：2012-10-31T10:58:36.240
> 
> 标签：php, mysql

我正在尝试创建一个表，该表输出用户列表以及他们登录的次数。

每次有人登录时都会在表中创建一个新行，因此一个用户有多个行。

现在，我正在尝试使用以下语句来提取数据：

```
SELECT * FROM logins GROUP BY user ORDER BY timestamp DESC 
```

哪个工作正常，但现在我的 HTML 表中有一个列应该显示用户登录的次数。我如何计算每个组中的行数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:00:31.890

试试这个：

```
SELECT *, COUNT(*) AS count FROM logins GROUP BY user ORDER BY timestamp DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:00:36.957

```
SELECT user, count(timestamp) as login_count 
FROM logins
GROUP BY user
ORDER BY login_count DESC 
```

获取按登录次数排序的用户

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:01:11.630

使用 count()... 试试这个

```
SELECT *, COUNT(*) as totalcounts FROM logins GROUP BY user ORDER BY timestamp DESC 
```

COUNT() 函数返回与指定条件匹配的行数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T11:01:25.483

```
SELECT user,count(*) as NoOfTimes
 FROM logins 
GROUP BY user 
ORDER BY timestamp DESC 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T11:01:31.817

使用`COUNT`：

```
SELECT user, COUNT(user) 'How Many Times he logged in'
FROM logins 
GROUP BY user 
ORDER BY timestamp DESC 
```

# jboss5.x - Jboss 5.1.0：java.lang.LinkageError：类 javax.sql.DataSource 的加载程序约束冲突

> ID：13156362
> 
> 赞同：0
> 
> 时间：2012-10-31T10:59:16.257
> 
> 标签：jboss5.x

我已经阅读了很多有关此错误的信息，原因是：

1.  多个包含此类的 jar 已包含在类路径中，
2.  将罐子放入两次或更多次，

但在我的情况下，这个类是 jdk 类，我在我的应用程序下没有找到这个类。

任何线索都会非常有帮助。

异常堆栈：

```
2012-10-31 14:09:58,319 WARN  [org.jboss.detailed.classloader.ClassLoaderManager] (http-0.0.0.0-8080-1:) Unexpected error during load of:javax.sql.DataSource
java.lang.LinkageError: loader constraint violation: loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) previously initiated loading for a different type with name "javax/sql/DataSource"
      at java.lang.ClassLoader.defineClass1(Native Method)
      at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
      at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
      at org.jboss.classloader.spi.base.BaseClassLoader.access$200(BaseClassLoader.java:67)
      at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:633)
      at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:592)
      at java.security.AccessController.doPrivileged(Native Method)
      at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:591)
      at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:568)
      at org.jboss.classloader.spi.base.BaseDelegateLoader.loadClass(BaseDelegateLoader.java:135)
      at org.jboss.classloader.spi.filter.FilteredDelegateLoader.loadClass(FilteredDelegateLoader.java:131)
      at org.jboss.classloader.spi.base.ClassLoadingTask$ThreadTask.run(ClassLoadingTask.java:455)
      at org.jboss.classloader.spi.base.ClassLoaderManager.nextTask(ClassLoaderManager.java:267)
      at org.jboss.classloader.spi.base.ClassLoaderManager.process(ClassLoaderManager.java:166)
      at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:287)
      at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1163)
      at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:862)
      at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:502)
      at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:447)
      at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
      at com.lombardrisk.webgui.dwr.ajax_search.UmbrellaNettingFundsSearch.getBranchesByAgreementId(UmbrellaNettingFundsSearch.java:199)
      at com.lombardrisk.webgui.dwr.ajax_search.UmbrellaNettingFundsSearch.buildConditionOfPrinAndCpty(UmbrellaNettingFundsSearch.java:177)
      at com.lombardrisk.webgui.dwr.ajax_search.UmbrellaNettingFundsSearch.getFunds(UmbrellaNettingFundsSearch.java:58)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:597)
      at org.directwebremoting.impl.ExecuteAjaxFilter.doFilter(ExecuteAjaxFilter.java:34)
      at org.directwebremoting.impl.DefaultRemoter$1.doFilter(DefaultRemoter.java:428)
      at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:431)
      at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:283)
      at org.directwebremoting.servlet.PlainCallHandler.handle(PlainCallHandler.java:52)
      at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:101)
      at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:146)
      at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
      at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
      at com.lombardrisk.webgui.filter.ValidRequestFilter.doFilter(ValidRequestFilter.java:41)
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
      at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
      at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
      at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
      at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
      at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
      at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
      at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.internalProcess(ActiveRequestResponseCacheValve.java:74)
      at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:47)
      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
      at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
      at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:599)
      at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451)
      at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T01:57:38.920

此问题已解决

确实有另一个包含此类的 jar(jdbc2_0-stdext.jar)，并且由我们带到应用程序中。

B类是可以的，因为statment con = ds.getConnection是在另一个X.jar中调用的，而A类是在它自己的Y.war中调用的，而这个jdbc2_0-stdext.jar是在Y.war中的包

# javascript - 浏览器扩展：识别浏览器活动

> ID：13156363
> 
> 赞同：0
> 
> 时间：2012-10-31T10:59:17.863
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, safari

我可以从 Safari/Chrome/Firefox/IE 扩展（插件或附加组件）检测系统/浏览器活动吗？我想在特定应用程序中保持会话处于活动状态（如“用户活动”/“用户离开”），即使用户远离我感兴趣的选项卡（想象一个聊天应用程序）但在其他任何地方进行活动（在其他选项卡或理想情况下在系统中）。

我知道 javascript 安全限制阻止它在运行文档之外收集此类信息（如果我得到纠正的话），所以我希望通过自定义扩展来克服限制。我说的是在企业 Intranet 中运行的应用程序，因此我可以“强制”安装扩展。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:23:02.903

You can make a plugin work on all url's and you can also bind clicks and what not from a plugin.

Not sure about all browser plugin models but they probably all have a global storage and you can make your chat application check this storage on an interval(and there might just be useful events you can use, but none that I know)

If the browsers` plugin model does not have a global storage, you can probably use an external storage.

This is a pretty generic answer, you probably should just try something :)

# amazon-web-services - 如何安排 Elastic MapReduce 作业流

> ID：13156366
> 
> 赞同：3
> 
> 时间：2012-10-31T10:59:29.973
> 
> 标签：amazon-web-services, amazon-dynamodb, elastic-map-reduce

我想每小时将我所有的 dynamodb 表数据转储到 s3 文件中。安排弹性 mapreduce 作业流程的最佳方法是什么？我可以使用 Amazon Simple 工作流程服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:20:38.053

查看亚马逊的新数据管道服务。我成功地用它来做一些非常相似的事情。

[http://aws.amazon.com/datapipeline/](http://aws.amazon.com/datapipeline/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T17:50:56.523

Elastic MapReduce 有一个命令行 (Ruby) 客户端，您可以在任何机器上的 cron 作业中编写脚本，[**可从 AWS 获得**](http://aws.amazon.com/developertools/2264)。

# c# - 如何在winrt应用程序中沿路径动画创建文本运动？

> ID：13156368
> 
> 赞同：1
> 
> 时间：2012-10-31T10:59:35.817
> 
> 标签：c#, windows, xaml, windows-runtime, winrt-xaml

如何在winrt应用程序中沿路径动画创建文本运动？在 silverlight 和 wpf 中搜索了一下后，我发现 PathListBox 可以做这种动画！但我找不到**Winrt**应用程序的 PathListBox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:53:38.710

在这里找到控件[http://pathtextblock.codeplex.com/](http://pathtextblock.codeplex.com/)。也许它应该工作

# javascript - 自动完成小部件如何工作？

> ID：13156369
> 
> 赞同：-2
> 
> 时间：2012-10-31T10:59:37.190
> 
> 标签：javascript, jquery, autocomplete

我是这个 jquery 的新手，所以请通过示例帮助我了解有关自动完成小部件过程的详细信息。请你帮助我好吗？提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:11:05.203

您可以在下面给定的链接上找到演示和文档..

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

祝一切顺利

# stream - 在类似框中流式传输不“完整”

> ID：13156370
> 
> 赞同：3
> 
> 时间：2012-10-31T10:59:43.050
> 
> 标签：stream, facebook-likebox

我创建了一个类似的盒子，工作正常。问题：到目前为止，我的[页面](http://www.ehcb-spirit.ch/elite-facebook.php)上的点赞框流中只显示了我自己的帖子，但没有显示其他用户的帖子，例如[粉丝页面](http://www.facebook.com/pages/Elite-EHC-Biel-Bienne-Spirit/460498567325498)上的 Theo Schmid 的帖子。

有没有可能显示所有帖子？谢谢你的帮助 ：-）

# php - PHP正则表达式不起作用

> ID：13156371
> 
> 赞同：1
> 
> 时间：2012-10-31T10:59:45.940
> 
> 标签：php, regex, email

我的一个正则表达式有问题；如果你能帮助我 ：

```
<?php 
$ptn = "/[\S]*[A-Za-z0-9_-]*.*[A-Za-z0-9_-]+@[A-Za-z0-9_-]*.*[A-Za-z0-9_-]*[\S]*/";
$str = "Contact name: Wahyu van Schneppanginen Email: perm@perotozair.com ";
preg_match($ptn, $str, $matches);
print_r($matches);
?> 
```

然而结果是：

```
 Array
   (
       [0] =>                           Email:                    perm@perotozair.com  
   ) 
```

但我想要 ：

```
 Array
   (
       [0] => perm@perotozair.com  
   ) 
```

如果你们中的任何人可以帮助我，我会很高兴

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:06:51.757

这将起作用：

```
<?php 
$ptn = '/[\w\d-]+(?:\.[\w\d-]+)*@[\w\d-]+(?:\.[\w\d-]+)+/';
$str = "Contact name: Wahyu van Schneppanginen Email: perm@perotozair.com bla bla bla xxx@yyy.com";
preg_match_all($ptn, $str, $matches);
print_r($matches);
?> 
```

您的问题是您使用的单词边界：`[\S]*`. 您应该改为使用`\b`它。我还通过对某些部分进行分组来简化和改进您的正则表达式，以正确匹配电子邮件地址。请注意使用`preg_match_all()`来匹配字符串中所有出现的电子邮件地址。

**输出**

```
Array
(
    [0] => Array
        (
            [0] => perm@perotozair.com
            [1] => xxx@yyy.com
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:13:04.233

试试这个 ：-

```
 <?php 
    $ptn = "/[A-Za-z0-9_-].[A-Za-z0-9_-]+@[A-Za-z0-9_-]*.*[A-Za-z0-9_-]*/";
    $str = "Contact name: Wahyu van Schneppanginen Email: perm@perotozair.com ";
    preg_match($ptn, $str, $matches);
    print_r($matches);
    ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T11:07:17.967

你为什么不使用爆炸？

```
$str = "Contact name: Wahyu van Schneppanginen Email: perm@perotozair.com ";
$strArr = explode("Email: ",$str);
if(isset($strArr[1]))
    $email = $strArr[1]; //output: perm@perotozair.com
else
    echo "Email not found"; 
```

# jquery - 在 jquery roundrr 插件中暂停动画 onhover

> ID：13156372
> 
> 赞同：0
> 
> 时间：2012-10-31T10:59:54.473
> 
> 标签：jquery

我正在使用[这个插件](http://addyosmani.com/blog/jquery-roundrr)，我已经设置了动画`autoplay : true`。但我想停止动画`mouseover`并`mouseout`在`roundrr_container` `div`. 我试图编辑代码，但无法完成。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:44:27.523

addyosmani 有两个活动。

```
onImageFocus: 
```

在“pick”模式下，当图像出现在pick下时执行的函数

```
onImageBlur: 
```

在“pick”模式下，当图像不在pick下时执行的函数

和

```
hide()//Hide items
show()//show items in roundr 
```

您可以做的是`onImageFocus`使用`hide()`事件停止动画并`onImageBlur`使用`show()`恢复动画效果。

所以使用类似这样的东西

```
$(document).ready(function() { 
    $('#roundrr_container').hover(function() {    
       $(this).roundrrwheel(  
    {  
        autoplay: false  
    });
}, function() {
    $(this).roundrrwheel(  
    {  
        autoplay: true 
    });
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:48:38.100

最后解决的问题

```
<script type="text/javascript">
$(document).ready(function() {                                     $('.my_class').mouseover(function(event)                                                            {                                                                   ap=1;                                                               });                            $('.my_class').mouseout(function(event)                                                              {                                                                   ap=0;                                                                   });
});
</script>` 
```

然后它检查了 jquery.roundrr.js 页面

在函数声明之前在页面顶部首先声明变量 ap 然后将函数 switchitems 循环中的代码更改为

```
function switchItems($m, remove, add, posOffset, direction){if(ap==0){
    if(remove==add) add = remove - 1; 
    var $remove = $($m.raditems()[remove]); 
    var toAddto = $m.raditems()[add]; 
    if(remove>add) $remove.insertBefore(toAddto);
    else $remove.insertAfter(toAddto);
    animateWheel($m,posOffset, direction); }};` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:14:17.280

我没有用过这个，但试试类似的东西：

```
$(document).ready(function() { 
    $('img').hover(function() {    
        $("#roundrr_container").roundrrwheel(  
        {  
            autoplay: false  
        });
    }, function() {
        $("#roundrr_container").roundrrwheel(  
        {  
            autoplay: true 
        });
    });
}); 
```

# windows-7 - 在 InnoSetup 配置文件的 [Run] 段中检查 Windows 版本

> ID：13156373
> 
> 赞同：8
> 
> 时间：2012-10-31T10:59:56.917
> 
> 标签：windows-7, 64-bit, driver, inno-setup

我必须在安装过程中安装驱动程序`InnoSetup`。为此，我有两个32 位/64 位的*.msi*安装文件。现在在Win7中，这个驱动已经包含了，所以我不需要再次安装它。到目前为止，我这样做了：

```
[Tasks]                
Name: "install_usb"; Description: "Install USB driver"; GroupDescription: "Drivers:";

[Files]
Source: "xy\driver\*"; DestDir: "{tmp}"

[Run]    
Filename: "msiexec.exe"; Parameters: "/i ""{tmp}\driver_32bit.msi"""; StatusMsg: "Installing 32bit USB driver"; Check: not IsWin64(); Tasks: install_usb; Flags: skipifsilent
Filename: "msiexec.exe"; Parameters: "/i ""{tmp}\driver_64bit.msi"""; StatusMsg: "Installing 64bit USB driver"; Check: IsWin64(); Tasks: install_usb; Flags: skipifsilent 
```

因此，用户可以选择是否要安装驱动程序。如果他选择这样做，正确的驱动程序就会运行。这工作正常。现在，如果 >=Win7 正在运行，我想选择不安装驱动程序。我读过`OnlyBelowVersion: 6.1`但我似乎无法在该`[Run]`部分中执行以下操作：

```
[Run]    
... Check: IsWin64() and OnlyBelowVersion:6.1; ... 
```

**我如何`OnlyBelowVersion`在该部分中使用（或类似的东西）`[Run]`？**

**另外，我想确保*.msi*以正确的模式运行（64 位系统的 64 位模式）。**因为我认为，现在情况并非如此。有可能强制执行吗？我发现了`ArchitecturesInstallIn64BitMode=x64`，我必须把它放在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T16:12:56.250

[`OnlyBelowVersion`](http://jrsoftware.org/ishelp/topic_commonparams.htm#OnlyBelowVersion)不能在语句中使用的参数[`Check`](http://jrsoftware.org/ishelp/topic_scriptcheck.htm)，而是作为单独的参数。

```
[Run]    
Filename: "msiexec.exe"; Parameters: "/i ""{tmp}\driver_32bit.msi"""; OnlyBelowVersion: 6.1; StatusMsg: "Installing 32bit USB driver"; Check: not IsWin64(); Tasks: install_usb; Flags: skipifsilent
Filename: "msiexec.exe"; Parameters: "/i ""{tmp}\driver_64bit.msi"""; OnlyBelowVersion: 6.1; StatusMsg: "Installing 64bit USB driver"; Check: IsWin64(); Tasks: install_usb; Flags: skipifsilent 
```

对于您的第二个问题，该[`IsWin64`](http://jrsoftware.org/ishelp/topic_isxfunc_iswin64.htm)函数在所有 64 位版本的 Windows 上都返回 True，所以这就是您正确的。从参考：

> 此函数将始终在 x64 版本的 Windows 上返回 True。

要在您正确提到的 64 位模式下运行 InnoSetup 安装，您至少需要指定[`ArchitecturesInstallIn64BitMode`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_architecturesinstallin64bitmode)指令。如果您使用至少一个可用值指定此指令，则您的设置将在具有您指定的处理器架构的计算机上以 64 位模式运行，如果您在具有 x86 处理器的计算机上运行设置，则以 32 位模式运行.

# entity-framework - SQL数据库中的一对一关系

> ID：13156374
> 
> 赞同：0
> 
> 时间：2012-10-31T11:00:13.210
> 
> 标签：entity-framework, database-design, relational-database

我有两个表：“人员”和“详细信息”。Person 应该与 Details 具有一对一的关系。我有两个选择：

1.  将DetailsId写入Details表并使其FK到Details.Id(PK);
2.  将Details.PersonId同时作为PK和FK到Person.Id；

在这两种情况下，关系都是一对一的。你能解释一下哪一个更好，在什么情况下？

编辑：

我正在使用实体框架并希望获得这样的详细信息：Person.Detail，而不是 Person.Details.First()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:10:51.037

制作两个表“Person”和“Details”。在“详细信息”表中，取一个字段“person_id”，这将是您的 FK，它将引用“Person”表的 id 字段（PK）。那是更好的解决方案。因为“详细信息”表将需要比“人员”表更多的操作，如更新等。因此，将“Person”表设为 Master，将“Details”设为从机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:55:35.263

“人”有专门的子类吗？在这种情况下，您可能希望有两个以上的表，每个子类都有一个不同的子类表。请参阅 SO 中的标签“[Class Table Inheritance]”。您还应该查找标签“[Shared-Primary-Key]”。它比为子类表使用单独的 FK 和 PK 效果更好。

您还需要考虑选择单表解决方案的好处和成本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T19:04:32.520

对于真正的**1:1**关系，您的默认解决方案应该是将表合并在一起，除非有[特定的理由](https://stackoverflow.com/a/12321323/533120)反对它。

但我怀疑你实际上是在谈论**1:0..1**，在这种情况下 (2) 将模拟你所需要的。

我不明白 (1) - 那里自引用 FK 的目的是什么？您实际上是指 FK in Person 引用详细信息吗？

# linux - linux上两个.tar.gz文件列表的区别

> ID：13156383
> 
> 赞同：23
> 
> 时间：2012-10-31T11:01:00.230
> 
> 标签：linux, tar

有两个不同的 .tar.gz 文件：第二个 .tar.gz 是第一个 .tar.gz 的子集。

我需要一个单行命令来查找第二个 .tar.gz 中丢失的文件。

**例如：**

**1.tar.gz文件列表：**

```
1.jsp
2.txt
3.htm 
```

**2.tar.gz文件列表：**

```
1.jsp
3.htm 
```

**输出应该是：**

```
2.txt 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-31T11:09:43.983

只需列出内容并执行以下操作`diff`：

```
diff <(tar -tvf 1.tar.gz | sort) <(tar -tvf 2.tar.gz | sort) 
```

# wpf - 如何在 WPF 组件中使用百分比来调整大小？

> ID：13156389
> 
> 赞同：3
> 
> 时间：2012-10-31T11:01:14.343
> 
> 标签：wpf, xaml

我正在使用 WPF 矩形，并且在重新调整窗口大小时需要重新调整大小。我尝试了几个帮助发布了几个地方，例如在大小后使用星号（“*”），但没有奏效。关于这个问题有什么帮助吗？

```
 <StackPanel>
   <Rectangle Height="5">
   <Rectangle Height="495">
     <Rectangle.Fill>
       <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
         <GradientStop Color="#F7F6EF" Offset="0.0"></GradientStop>
         <GradientStop Color="#E5DABE" Offset="1.0"></GradientStop>
       </LinearGradientBrush>
     </Rectangle.Fill>
   </Rectangle>
 </StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:19:23.853

Just change StackPanel to DockPanel

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:21:57.030

调整网格及其子元素的大小，然后将其放在视图框中。它会很好地扩展和收缩。

```
<Viewbox Stretch="Uniform" MinHeight="700" MinWidth="258">   
<Grid Height="700" Width="250">
<Grid Width="235" Margin="0,15,0,0" Height="620">
</Grid>
</Grid>
</Viewbox> 
```

那种东西你甚至可以创造出很好的东西，比如强制拉伸均匀，这就是我认为你所追求的。

请记住，您需要在顶部：

```
ResizeMode="CanResizeWithGrip" 
```

显然它不需要有握力，只是不是假的，但我喜欢握力。编辑：我认为默认情况下是真的。

请注意，视图框只能有一个孩子，因此请确保仍然有一个网格/画布等来像平常一样绘制矩形。如果您尝试巧妙地在视图框中动态设置网格的大小，它也可能会搞砸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:38:55.890

如果您希望将内部矩形绑定到网格的侧面并缩放比例，请使用水平对齐和垂直对齐。这会将子元素的侧面“固定”到父容器。

```
<Grid.ColumnDefinitions>
   <ColumnDefinition MinWidth="1*"></ColumnDefinition>
   <ColumnDefinition Width="2*"></ColumnDefinition>
</Grid.ColumnDefinitions>
<Rectangle Column="0" HorizontalAlign="stretch" VerticalAlign="stretch"/> 
```

使用星形使用内部算法，根据设置值划分元素（ 1* 和 2* 相当于第一列占据屏幕的 1/3，第二列占据屏幕的 2/3）

# titanium - 在 Titanium for ios 中获取有关当前用户的信息时出错

> ID：13156391
> 
> 赞同：0
> 
> 时间：2012-10-31T11:01:24.317
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我开发了一个应用程序，它有一个登录应用程序的屏幕。我需要在主页显示当前用户的详细信息。当我第一次登录应用程序时效果很好。但是我收到一个错误：当我在注销后再次尝试登录时，**您需要先登录或注册才能继续。**具有相同代码的android os中没有问题

这是一个示例代码，

```
var win = Ti.UI.createWindow({
    backgroundColor : '#520000'
});

var btnLogin = Ti.UI.createButton({

    title   : 'Login',
    top     : '20%',
    width   : '50%'
});
var Cloud = require('ti.cloud');

win.add(btnLogin);
win.open();

btnLogin.addEventListener('click', Login);

function Login(){

    Cloud.Users.login({
        login: 'anand@gmail.com',
        password: 'anandt'
    }, function (e) {
        if (e.success) {
            var user = e.users[0];  
            var mainWin = Ti.UI.createWindow({
                backgroundColor : '#005200',
                url             : 'logout.js'
            });

            mainWin.open();

        } else {
            alert('Error: ' + ((e.error && e.message) || JSON.stringify(e)));
        }
});
} 
```

申请主页面

```
var Cloud = require('ti.cloud');

var logoutWin = Ti.UI.currentWindow;

var btnLogout = Ti.UI.createButton({    
    title   : 'Logout',
    top     : '20%',
    width   : '50%'
});

logoutWin.add(btnLogout);
logoutWin.addEventListener('open', function(){
    Cloud.Users.showMe(function (e) {
        if (e.success) {
            var user = e.users[0];
            alert('user is ' + 'first name: ' + user.first_name + ' ' + 'last name: ' + user.last_name);
        } else {
            alert('Error: ' + ((e.error && e.message) || JSON.stringify(e)));
        }
    });
});
btnLogout.addEventListener('click', Logout);

function Logout()
{
    Cloud.Users.logout(function (e) {
        if (e.success) {
            logoutWin.close();
        } else {
            alert('Error: ' + ((e.error && e.message) || JSON.stringify(e)));
        }
    });
} 
```

这是用户第一次登录后显示的屏幕，没有任何注销

![这是用户第一次登录后显示的屏幕，没有任何注销](../Images/7178b77c077b5ba871a18032fe9de6b3.png)

这是用户登录一次或多次注销后显示的屏幕（无需重新启动应用程序） ![这是用户登录一次或多次注销后显示的屏幕（无需重新启动应用程序）](../Images/f170982b0b758a11ebac9acc3b9b6725.png)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:30:50.977

使用 URL 加载窗口会导致会话 ID 在上下文之间错位。不要使用网址。

# python - Python加载带有UTF-8 BOM标头的json文件

> ID：13156395
> 
> 赞同：53
> 
> 时间：2012-10-31T11:01:29.107
> 
> 标签：python, json

我需要解析其他工具生成的文件，该工具无条件地输出带有 UTF-8 BOM 标头（EFBBBF）的 json 文件。我很快发现这是问题所在，因为 Python 2.7 模块似乎无法解析它：

```
>>> import json
>>> data = json.load(open('sample.json'))

ValueError: No JSON object could be decoded 
```

删除BOM，解决了，但我想知道是否有另一种解析带有BOM头的json文件的方法？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-31T11:20:32.277

您可以打开`codecs`：

```
import json
import codecs

json.load(codecs.open('sample.json', 'r', 'utf-8-sig')) 
```

或自己解码`utf-8-sig`并传递给`loads`：

```
json.loads(open('sample.json').read().decode('utf-8-sig')) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2019-06-06T22:38:16.213

简单的！您甚至不需要导入`codecs`.

```
with open('sample.json', encoding='utf-8-sig') as f:
    data = json.load(f) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-31T11:21:33.327

由于在引擎盖下`json.load(stream)`使用`json.loads(stream.read())`，编写一个 lstrips BOM 的小 hepler 函数不会那么糟糕：

```
from codecs import BOM_UTF8

def lstrip_bom(str_, bom=BOM_UTF8):
    if str_.startswith(bom):
        return str_[len(bom):]
    else:
        return str_

json.loads(lstrip_bom(open('sample.json').read())) 
```

在其他需要包装流并以某种方式修复它的情况下，您可能会考虑从`codecs.StreamReader`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-30T15:24:49.093

您也可以使用关键字**with**

```
import codecs
with codecs.open('samples.json', 'r', 'utf-8-sig') as json_file:  
    data = json.load(json_file) 
```

或更好：

```
import io
with io.open('samples.json', 'r', encoding='utf-8-sig') as json_file:  
    data = json.load(json_file) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-04T08:51:45.000

如果这是一次性的、非常简单的、对我有用的超高科技解决方案……

*   在您喜欢的文本编辑器中打开 JSON 文件。
*   全选
*   创建一个新文件
*   粘贴
*   节省。

BOOM，BOM 标头不见了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-24T01:01:19.800

我使用 Linux 命令手动删除了 BOM。

首先，我检查文件是否有`efbb bf`字节，使用`head i_have_BOM | xxd`.

然后我跑`dd bs=1 skip=3 if=i_have_BOM.json of=I_dont_have_BOM.json`。

`bs=1`每次处理 1 个字节`skip=3`，跳过前 3 个字节。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-10T11:20:43.023

我只使用 utf-8-sig 和 import json

```
with open('estados.json', encoding='utf-8-sig') as json_file:
data = json.load(json_file)
print(data) 
```

# php - 替换 PHP 中的模式

> ID：13156398
> 
> 赞同：-9
> 
> 时间：2012-10-31T11:01:41.310
> 
> 标签：php, regex

我有字符串中的模式要替换为其他内容。

例如

```
$str = '{1} Foo Bar {4}'; 
```

我希望将上面的字符串转换为：

```
$str = arg(0). 'Foo Bar'.arg(4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:14:54.237

在这种情况下，最好使用[`preg_replace_callback()`](http://php.net/preg_replace_callback). 目前还不清楚什么`arg(4)`是变量或真正的函数调用。

只有当您可以约束匹配的值时，您才可以使用[`preg_replace`](http://php.net/preg_replace)with `/e`：

```
 $text = preg_replace('~ [{] (\d+) [}] ~xie', 'arg($1)', $text); 
```

这将`arg($decimal)`调用`{n}`. 如果您只匹配示例中的小数，则可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:06:21.243

通过这个函数

[**str_replace**](http://php.net/manual/en/function.str-replace.php)

[**preg_replace**](http://php.net/manual/en/function.preg-replace.php)

```
for(i=0;i<n;i++){

$str = str_replace("{i}", arg(i), $str);
} 
```

# python - Python：从一些讨厌的 html 中提取数据

> ID：13156399
> 
> 赞同：0
> 
> 时间：2012-10-31T11:01:41.090
> 
> 标签：python, html, parsing, text-extraction

我的问题与[HTMLParser](http://docs.python.org/2/library/htmlparser.html)的使用有关，但与一些 nast html 代码有关。
我有一个包含多个 html/css 条目的文件/网页，并且在某些行中，我得到了我需要解析以提取某些特定数据的 html 代码的这个经常重复的部分。

**例如：**

1)
第 66 号要提取
第 123456 号要从这条评论中提取

```
<h3 class="s KB8NC">66.&hsbc; 
<!--
        <A name="simp123456" href="text.php?p=1&i_simp_z_boc_nb_sec=123456&i_simp_s_vitrazka=1">
-->
ristill advocka, sygint: SURVE/123-021/11-2/XX</h3> 
```

还有另一个成对出现的频繁条目：

2)由于要提取的空“数据” 编号**123456**
， 第一个条目将被**忽略**

 **```
<p class="monozzio"></p>
<p class="monozzio"><a href="text.php?p=1&pup;i_simp_z_boc_nb_sec=123456&pup;i_simp_s_vitrazka=1">monozzio...</a></p> 
```

到目前为止，这是我的第一堂课，但它开始超出我的技能，任何帮助表示赞赏。

```
from HTMLParser import HTMLParser
class MyParser(HTMLParser):  
   def __init__(self):
HTMLParser.__init__(self)
self.recording = 0
self.data = []
   def handle_starttag(self, tag, attributes):
     if tag != 'p':
       return
     if self.recording:
       self.recording += 1
       return
     for name, value in attributes:
     if name == 'class' and value == 'monozzio':
        break
     else:
     return
     self.recording = 1

def handle_endtag(self, tag):
  if tag == 'p' and self.recording:
    self.recording -= 1

def handle_data(self, data):
  if self.recording:
    ##############################
    #here parse data to get 123456
    ##############################
  self.data.append(data)

p = MyParser()
f = open('file.html', 'r')
htm = f.read()
p.feed(htm)
print '\n'.join(p.data)
p.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:20:59.617

这不是直接解决您的问题的方法，但[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)是一个可以更轻松地解析 HTML 的库。

然后您可以执行以下操作：

```
import re
from bs4 import BeautifulSoup

html = BeautifulSoup(your_html_content)
for link in html.find_all('p.monozzio a'):  # use css selectors
    href = link.get('href')
    reg = re.compile('i_simp_z_boc_nb_sec=([0-9]+)')
    nbrs = reg.findall(href)  # regex to extract values 
```

请注意，我没有测试代码，这只是一个大概的想法。**

# batch-file - 如何使用批处理获取显卡信息？

> ID：13156400
> 
> 赞同：0
> 
> 时间：2012-10-31T11:01:44.960
> 
> 标签：batch-file

我想使用 Batch 获取显卡的一些信息。但我不知道密码。我已经尝试过wmic。但它没有获取显卡信息的命令。我怎样才能得到这些信息。

这是我在 Batch 上显示的示例（如 GPU-Z）

```
Name: NVIDIA GeForce 210
Memory Size: 512 MB
GPU Clock: 589 MHz
Memory: 400 MHz
Shader: 1402 MHz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:16:05.737

如果您正在寻找类似的东西.. 尝试 dxdiag 获取日志文件并解析它

```
---------------  
Display Devices  
---------------  
          Card name: NVIDIA GeForce 410M  
       Manufacturer: NVIDIA  
          Chip type: GeForce 410M  
           DAC type: Integrated RAMDAC  
         Device Key: Enum\PCI\VEN_10DE&DEV_1055&SUBSYS_908B104D&REV_A1  
     Display Memory: 1241 MB  
   Dedicated Memory: 482 MB  
      Shared Memory: 758 MB  
       Current Mode: 1366 x 768 (32 bit) (60Hz)  
       Monitor Name: Generic PnP Monitor  
      Monitor Model: unknown  
         Monitor Id: LGD02DC  
        Native Mode: 1366 x 768(p) (59.996Hz)  
        Output Type: Internal  
        Driver Name: nvd3dumx.dll,nvwgf2umx.dll,nvwgf2umx.dll,nvd3dum,nvwgf2um,nvwgf2um  
Driver File Version: 8.17.0012.6721 (English)  
     Driver Version: 8.17.12.6721  
        DDI Version: 11  
       Driver Model: WDDM 1.1  
  Driver Attributes: Final Retail  
   Driver Date/Size: 3/29/2011 14:42:52, 12840040 bytes 
```

# asp.net-mvc - 动态现场配置的最佳实践是什么？

> ID：13156401
> 
> 赞同：1
> 
> 时间：2012-10-31T11:01:46.573
> 
> 标签：asp.net-mvc, design-patterns, configuration, jira

我将实现一个**Asp.net MVC 4.0**应用程序，在该应用程序中使用可以更改其上的**字段位置**。在管理面板中有一个页面，用户可以**在屏幕上选择字段位置**。用户还可以**更改某些字段属性**。（类似于**Atlassian Jira** [字段配置](https://confluence.atlassian.com/display/JIRA/Specifying+Field+Behaviour)和**[屏幕配置](https://confluence.atlassian.com/display/JIRA/Defining+a+Screen)**）

我不知道我应该如何创建最终页面。实际上，我正在寻找一种**最佳实践**，它可以让我从服务中读取页面的内容并基于该重新排序页面元素。

任何帮助都会得到帮助。

# iphone - 在我的 iOS 付费应用合同生效之前，我可以在开发沙盒中的应用购买中使用 iOS

> ID：13156404
> 
> 赞同：2
> 
> 时间：2012-10-31T11:01:53.003
> 
> 标签：iphone, objective-c, ios, in-app-purchase

我从商店收到无效的产品标识符，但我相信我已经正确设置了一切。

我认为这可能是因为我没有有效的付费合同。

![在此处输入图像描述](../Images/aad2de6a4ac5a4ad1c4240159937fc35.png)

我被允许在 iTunes 连接中设置应用程序的产品，而没有完成合同，这表明我可能不需要完成付费合同（我宁愿不需要，因为这是一个概念验证应用程序）。

有谁知道在设置之前您是否可以在沙箱中进行测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:36:27.303

事实证明，您只需要请求合同并输入税务信息。即您不需要为沙盒输入银行信息。

根据我的经验，它的工作方式如下：

*   请求付费应用合同。

    您现在可以在您的应用上设置应用内购买。但是，如果您尝试使用 StoreKit，您将从 StoreKit 获得“无效的产品标识符”。

*   输入税务信息。

    现在可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:08:07.590

如果不签署合同，您将无法设置付费应用程序。因此，您无法在未签署合同的情况下测试应用内购买。

# sql - 主键搜索和字段搜索SQL的区别

> ID：13156415
> 
> 赞同：4
> 
> 时间：2012-10-31T11:02:26.537
> 
> 标签：sql, primary-key

当我们搜索/选择具有主键和其他相同大小字段的记录时，性能有什么不同吗？

此外，以 GUID 作为主键和 Int 作为主键的此类查询的性能比较会有所不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:09:56.557

Unique Keys：没有两行相似的列

主键：可以唯一标识表中每一行的最小列数的集合（即在构成主键的所有列中没有两行是相似的）。一个表中可以有多个主键。如果存在唯一键，则它是表中的主键（不是“主键”）。如果不存在唯一键，则需要多个列值来标识行，例如（first_name，last_name，father_name，mother_name）可以在某些表中构成主键。

索引：用于优化查询。如果您要根据某个列多次搜索或排序结果（例如，大多数人会按姓名而不是他们的卷号来搜索学生。）那么如果列值都是“索引”，例如使用二叉树算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T22:11:52.380

键是数据库的逻辑特征，而性能完全由物理特征决定：存储格式、索引和内部用于数据访问的方法。因此，原则上答案是*否定*的。没有根本原因为什么需要通过键或任何其他非键属性访问数据之间存在差异。只有当我们了解有关存储、索引和您使用的 DBMS 的更多信息时，才有可能获得更具体的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:11:56.400

不同之处在于主键具有索引，因此按主键搜索通常比其他没有索引的字段更快。无论如何，您可以在不是主键的字段上建立索引，那么搜索就没有区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:12:39.510

是的。存在性能问题。

使用主键搜索比使用其他字段搜索要快得多。因为主键是唯一的 + notnull 并且它也有索引。

# android - android中是否有可能在方向更改时动态调整画布宽度和高度

> ID：13156418
> 
> 赞同：5
> 
> 时间：2012-10-31T11:02:43.973
> 
> 标签：android

我在画布上使用了背景图像并尝试在设备方向改变时相应地重新调整它的大小，任何人都可以建议我在 android 中是否可以在方向改变时重新调整画布尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:39:23.517

我认为不可能调整画布的大小。如果您在画布上使用覆盖整个屏幕的背景图像，那么您可以做的是在方向更改时按以下方式缩放此图像：

```
@Override
        public void onSurfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {

            // orientation change
            if (_width == width && _height == height) {
                _orient = 0;//portrait
                this.width = width;
                this.height = height;
                            this._holder=holder;
                this.bgBitmap =Bitmap.createScaledBitmap(BitmapFactory
                .decodeResource(res, R.drawable.bg), (_holder
                        .getSurfaceFrame().width()), _holder.getSurfaceFrame()
                        .height(), false);

            } else {
                _orient = 1;//landscape
                this.width = width;
                this.height = height;
                his.bgBitmap =Bitmap.createScaledBitmap(BitmapFactory
                .decodeResource(res, R.drawable.bg), (_holder
                        .getSurfaceFrame().width()), _holder.getSurfaceFrame()
                        .height(), false);

            }

            super.onSurfaceChanged(holder, format, width, height);
        } 
```

这个方法是在我的代码中扩展[Engine](http://developer.android.com/reference/android/service/wallpaper/WallpaperService.Engine.html)的类的一部分。我的代码很长，所以我在这里只发布相关部分。

# mapreduce - 具有分析功能的 NoSQL

> ID：13156423
> 
> 赞同：7
> 
> 时间：2012-10-31T11:03:22.990
> 
> 标签：mapreduce, nosql, analytic-functions

我正在寻找像 Oracle/SQL Server/Postgres 那样`NoSQL`支持分析功能（简称）的任何系统（最好是开源系统） 。`AF`我没有找到任何内置功能。我读过一些关于`Hive`但它没有`AF`（windows、first_last 值、ntiles、lag、lead 等）的实际特征，只是直方图和 ngram。还有一些 NoSQL 系统（`Redis`例如）支持 map/reduce，但我不确定是否`AF`可以用它替换。

我想进行性能比较以选择 Postgres 或 NoSQL 系统。

所以，简而言之：

1.  搜索`NoSQL`系统`AF`
2.  我可以依靠 map/reduce 来替换`AF`吗？它是否快速、可靠、易于使用。

附言。我试图让我的问题更具建设性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:18:16.083

一旦你真正理解了 MapReduce 是如何工作的，你就可以用几行代码做一些令人惊奇的事情。

这是一个很好的视频课程：

[http://code.google.com/intl/fr/edu/submissions/mapreduce-minilecture/listing.html](http://code.google.com/intl/fr/edu/submissions/mapreduce-minilecture/listing.html)

真正的困难因素在于您可以使用单个 MapReduce 实现的功能与需要链接 MapReduce 的功能之间。此外，一些不错的 MapReduce 实现（如 CouchDB）不允许您（轻松地）链接 MapReduce。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:04:25.130

当某些函数涉及某种聚合之王（平均、中值、标准差）或某种排​​序（第一、最后）时，它会使用所有现有数据的知识。

如果你想要一个开箱即用的支持 AF 的分布式 NOSQL 解决方案，系统将需要依赖一些集中式索引和元数据来保存所有节点中的数据信息，从而拥有一个主节点，并且可能存在单点故障.

您必须询问您希望使用 NoSQL 完成什么。您想要无模式表吗？分布式数据 ? 为非常简单的查询提供更好的原始性能？

根据您的需要，我在这里看到三个主要选择：

1 - 使用没有单点故障的分布式 NoSQL（即：[Cassandra](http://cassandra.apache.org/)）来存储您的数据并使用 map/reduce 处理数据并为所需功能生成结果（几乎所有主要的 NoSQL 解决方案都支持[Hadoop](http://hadoop.apache.org/)）。需要注意的是，map/reduce 查询不是实时的（执行查询可能需要几分钟或几小时）并且需要额外的设置和学习。

2 - 使用支持多个服务器的传统 RDBMS，如[MySQL Cluster](http://www.mysql.com/products/cluster/)

[3 - 使用具有主/从拓扑的 NoSQL，支持像Mongo](http://www.mongodb.org/display/DOCS/Querying)这样的临时和聚合查询

至于第二个问题：是的，可以依靠M/R来代替AF。你几乎可以用 M/R 做任何事情。

# r - 自 R 2.15.2 起，包存储库的子目录结构是否发生了变化？

> ID：13156426
> 
> 赞同：1
> 
> 时间：2012-10-31T11:03:47.973
> 
> 标签：r, repository, cran

有点尴尬/不行，但是由于我从“纯用户”转变为“初学者-开发人员”的时间不长，所以当新的 R 版本问世时，我从未真正阅读过 CHANGELOG - 直到今天（我觉得我应该养成这个习惯）;-)

然而，我不确定假设的更改是否真的发生了，因为我在第一次看到RR 2.15.2的[CHANGELOG](http://cran.at.r-project.org/bin/windows/base/NEWS.R-2.15.2.html)时找不到任何关于它的信息：

## 实际问题

包存储库的（子目录）结构是否可能从

`./bin/windows/contrib/2.xx/`

至

`./src/contrib/2.xx/`甚至`./src/contrib`？

或者至少该`PACKAGES`文件现在需要保存在这里：`./src/contrib/PACKAGES`？

## 背景资料

直到版本 2.15.1，以下路径可以从我的本地包存储库安装包：

```
path.repos  <- "L:/R/packages"
repos       <- file.path("file://", path.repos) 
```

函数`contrib.url`会将`repos`其扩展至正确的子目录：

```
> contrib.url(repos)
[1] "file:///L:/R/packages/bin/windows/contrib/2.15" 
```

但是当我尝试运行时`install.packages()`，我收到 R 2.15.2 的以下错误：

```
> install.packages("mypkg", 
+     lib=file.path(R.home(), "library"),
+     repos=repos,
+     type="win.binary"
+ )
Error in read.dcf(file = tmpf) : cannot open the connection
In addition: Warning message:
In read.dcf(file = tmpf) :
  cannot open compressed file 'L:/R/packages/src/contrib/PACKAGES', probable reason 'No such file or directory'
> 
```

当我对 R 2.15.1 做同样的事情时，一切都很顺利。

## 尽职调查

[CHANGELOG](http://cran.at.r-project.org/bin/windows/base/NEWS.R-2.15.2.html)中有一些关于存储库的参考，但我发现的唯一部分给了我一些证据表明发生了假设的变化是这样的：

> 包安装
> 
> > 对于 Windows 或 Mac OS X 二进制包安装， install.packages() 将检查源包是否在相同的存储库中可用，并报告它是否是更高版本或有源包但没有可用的二进制包。

刚刚再次查看了[官方文档](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)，并得到了可能 arg`type`没有正确传递的想法，`contrib.url()`因为在我看来，我`install.package()`正在寻找`type="source"`包裹的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:06:49.937

这个特殊的错误与[我](https://stackoverflow.com/questions/13132111/my-package-doesnt-work-for-r-2-15-2#comment17892021_13132111)的不同。

此问题与`install.packages()`安装前现在运行的检查有关。正如 Rappster 所说，它[试图找到一个源包来比较二进制版本](http://stat.ethz.ch/R-manual/R-devel/NEWS)：

> 对于 Windows 或 Mac OS X 二进制包安装， install.packages() 将检查源包是否在相同的存储库中可用，并报告它是否是更高版本或有源包但没有可用的二进制包。

因此，压缩此消息的一种简单方法是创建`R/src/contrib`目录并在该目录中运行`tools::write_PACKAGES()`以创建（空）`PACKAGES`文件。

当然，您在 2.15.1 中没有收到此消息的原因是它没有执行 2.15.2 执行的检查（请参阅上面的 R NEWS 引用）。

我已经提交了我的问题的[错误报告](https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=15092)。还没有消息。也可以将其发布到 R 邮件列表。

# c# - 如何在后台线程中为图像加载图像？

> ID：13156427
> 
> 赞同：1
> 
> 时间：2012-10-31T11:04:03.083
> 
> 标签：c#, multithreading, windows-phone-7

我正在使用具有图像和文本块的全景页面。

图像的图像是从网络加载的，我有图像链接和列表中的标题。现在我在 xaml 中为图像和文本块使用绑定。

图像会自动加载，但是当由于更多的 parorama 页面需要更多时间时，我的应用程序会由于 UI 响应时间的超时而关闭。

所以我希望图像应该从 UI 线程和其他后台线程中加载。

有没有可能在延迟加载中加载这些类型的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:44:56.367

我建议使用 David Ansons 的 LowProfileImageLoader 加载图像。[您可以在此处](http://blogs.msdn.com/b/delay/archive/2010/10/04/there-s-no-substitute-for-customer-feedback-improving-windows-phone-7-application-performance-now-a-bit-easier-with-lowprofileimageloader-and-deferredloadlistbox-updates.aspx?Redirected=true)找到有关它的更多信息并[从 nuget](https://nuget.org/packages/PhonePerformance)下载一个包。这是一个使用后台线程下载和解码图像的聪明库。

在处理图像时，它对我的​​性能问题有很大帮助。它也很容易使用。

# java - 这是使用强制插件强制执行特定 Spring 版本的正确方法吗？

> ID：13156428
> 
> 赞同：2
> 
> 时间：2012-10-31T11:04:08.123
> 
> 标签：java, maven, maven-plugin, maven-enforcer-plugin

[我希望使用maven-enforcer 插件](http://maven.apache.org/plugins/maven-enforcer-plugin/index.html)的**[bannedDependencies](http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html)**规则来强制执行特定的Spring 版本（3.1.2） 。

这是配置执行器插件以实现这一目标的正确方法吗？

```
<configuration>
    <rules>
        <bannedDependencies>
            <searchTransitive>true</searchTransitive>
            <excludes>
                <exclude>org.springframework</exclude>
            </excludes>
            <includes>
                <include>org.springframework:*:3.1.2</include>
            </includes>
        </bannedDependencies>
    </rules>
    <fail>true</fail>
    <failFast>true</failFast>
    <ignoreCache>true</ignoreCache>
</configuration> 
```

以上似乎可行，并且`mvn enforcer:enforce`在命令行上突出显示 v3.1.0 或 org.springframework:spring-oxm 被作为传递依赖项引入。

似乎有人可能想要使用**[dependencyConvergence](http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html)**规则，但它突出了许多依赖错误，这些错误被maven自动排除为“冲突”。

这是一个包含更多上下文的片段：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-enforcer-plugin</artifactId>
            <version>${maven.enforcer.plugin}</version>
            <executions>
                <execution>
                    <id>enforce-versions</id>
                    <goals>
                        <goal>enforce</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                        <rules>
                            <bannedDependencies>
                                <searchTransitive>true</searchTransitive>
                                <excludes>
                                    <exclude>org.springframework</exclude>
                                    <exclude>org.springframework.security</exclude>
                                    <exclude>org.slf4j</exclude>
                                </excludes>
                                <includes>
                                    <include>org.springframework:*:${spring.version}</include>
                                    <include>org.springframework.security:*:${spring-security.version}</include>
                                    <include>org.slf4j:*:${slf4j.version}</include>
                                </includes>
                            </bannedDependencies>
                            <requireJavaVersion>
                                <version>${enforce.jdk.version}</version>
                            </requireJavaVersion>
                        </rules>
                        <fail>true</fail>
                        <failFast>true</failFast>
                        <ignoreCache>true</ignoreCache>
            </configuration>
        </plugin>
 .....
</plugins> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:17:48.347

上面问题中的`bannedDependencies`代码段不起作用，因为`<include>`标签不理解`groupId:artifactId:version:type`符号。因此，通配符不能用来代替整个部分来表达`include all versions of ALL artifacts in a group`。

但是，通过使用 Maven[依赖版本范围](http://docs.codehaus.org/display/MAVEN/Dependency+Mediation+and+Conflict+Resolution#DependencyMediationandConflictResolution-DependencyVersionRanges)，可以强制执行特定的依赖。

给定给定工件的以下版本（按它们发布的顺序）：

`3.0.0`, `3.0.1`, `3.1.0`, `3.2.0.RELEASE`,`3.3.0`

假设我们想告诉强制插件排除所有内容，但`3.2.0.RELEASE`唯一的方法是：

`exclude versions X where X < DESIRED_VERSION OR X > DESIRED VERSION`

以上将有效地意味着： `exclude all versions X where X != DESIRED_VERSION`

由于 maven 依赖版本表示法不允许使用“非版本”表示法，因此我们必须将小于和大于表示法组合使用，如下所示：

`(,3.2.0.RELEASE),(3.2.0.RELEASE,)`

这意味着： `version < '3.2.0.RELEASE' or version > '3.2.0.RELEASE'`。

最后，一个有效的片段如下：

```
<bannedDependencies>
    <searchTransitive>true</searchTransitive>
    <excludes>
        <exclude>org.springframework:*:(,${spring.version}),(${spring.version},)</exclude>    
    </excludes>
</bannedDependencies> 
```

# apache - 在tomcat中从一个上下文切换到另一个上下文时会话丢失

> ID：13156430
> 
> 赞同：3
> 
> 时间：2012-10-31T11:04:13.887
> 
> 标签：apache, session, tomcat, tomcat6

我有一个 tomcat 服务器，在上面部署了 10 个 Web 应用程序。我有一个过滤器，它从一个应用程序（比如“A”）读取传入请求，读取某个 cookie 值，并根据 cookie 的值从数据库中获取另一个上下文名称（比如“B”）。然后，该过滤器将具有上下文 A(eg ) 的请求重写为`http://1.1.1.1/A/XYZServlet`具有上下文 B (eg ) 的新请求`http://1.1.1.1/B/XYZServlet`。

这样做时，执行新请求时所有会话变量都将丢失。当我的过滤器将旧请求（上下文 A）重定向到新请求（上下文 B）时，如何确保保留会话和所有会话变量（与上下文 A 相关）？由于某些架构原因，在 server.xml 中设置 emptySessionPath = "true" 不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:00:06.893

Tomcat 会话的范围仅限于单个 Web 应用程序。在您的情况下，当您切换到不同的上下文时，会话数据不会丢失，但根本不适用于新的上下文。范围由会话 cookie 的路径控制，它将包含创建 Web 应用程序的上下文，因此仅针对该上下文中的请求发送到 Tomcat。

如果您想扩展会话的范围，可以想到几个选项： 您可以将会话 cookie（`JSESSIONID`默认情况下）修改为根上下文路径`/`。然而，会话 cookie 管理非常深入地嵌入在 Tomcat 中，并且很难（如果不是不可能）修改。我曾经尝试将会话 cookie 更改为具有固定有效期的持久性，但没有找到这样做的方法。

一个不太优雅但可能有效的方法是复制会话 cookie。我不确定它是否会起作用，但在您的过滤器中，您可以读取会话 cookie 并创建一个以目标上下文作为路径的副本。在后续请求中，将包含伪造的会话 cookie，可能使您之前的会话数据可用。

# objective-c - NSXMLParser 不能在 iPhone 中添加所有对象？

> ID：13156432
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:04:20.283
> 
> 标签：objective-c, nsxmlparser

当我尝试使用 NSXMLParser 解析 XML 文件时，我无法解析所有元素.. XML 响应如下所示：

```
<List>
   <Details>
          <AId>1</AId>
          <Date>10/31/2012</Date>
          <Time>11:00 AM</Time>
       <User>
          <Employee>
              <Name>Rosy</Name>
              </Employee>
              <Company>
                  <Customer>
                     <CustName>Williams</CustName>
                     <CustPhone>1232322</CustPhone>
                 </Customer>
             </Company>
       </User>
  </Details>
<Details>
          <AId>2</AId>
          <Date>10/31/2012</Date>
          <Time>11:30 AM</Time>
       <User>
          <Employee>
              <Name>Mary</Name>
              </Employee>
              <Company>
                  <Customer>
                     <CustName>Christopher</CustName>
                     <CustPhone>123233323</CustPhone>
                 </Customer>
             </Company>
       </User>
  </Details>
</List> 
```

如何获取所有 XML 标记中的所有元素？

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"AList"])
{
    arr=[[NSMutableArray alloc] init];

}
    if([elementName isEqualToString:@"Details"]||[elementName isEqualToString:@"User"])
    {
        drr=[[NSMutableDictionary alloc] init];
    }

srr=[[NSMutableString alloc] init];

} 

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    [srr appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"AId"])
    {

        [drr setObject:srr forKey:@"AId"];
        [srr release],srr=nil;
        return;
    }  

    if([elementName isEqualToString:@"Date"])
    {

        [drr setObject:srr forKey:@"Date"];
        [srr release],srr=nil;
       return;    
    }
    if([elementName isEqualToString:@"Time"])
    {

        [drr setObject:srr forKey:@"Time"];
        [srr release],srr=nil;
     return;      
    }
    if([elementName isEqualToString:@"Name"])
    {

        [drr setObject:srr forKey:@"Name"];
        [srr release],srr=nil;
        return;
    }
        if([elementName isEqualToString:@"CustName"])
    {
        [drr setObject:srr forKey:@"CustName"];
        [srr release],srr=nil;

       return;
    }

    if([elementName isEqualToString:@"CustPhone"])
    { 
        [arr addObject:drr]; 

    }    

    if([elementName isEqualToString:@"AList"])
    {

        [drr release];

    }

    [srr release],srr=nil;

} 
```

我怎么能得到它......无法理解我哪里出错了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:19:28.740

您在 DidEndElement 方法中使用以下代码它将帮助您...

```
-(void)parser:(NSXMLParser*)parser
didEndElement:(NSString*)elementName
 namespaceURI:(NSString*)namespaceURI
qualifiedName:(NSString*)qualifiedName
{
    if ([elementName isEqualToString:@"list"]) {
        return;
    }
else if ([elementName isEqualToString:@"Details"]){
[yourarray addObject:yourDictionary];
}
    else{
        if (currentElementValue.length>0) {
            [yourDictionary setObject:currentElementValue forKey:elementName];
            currentElementValue = nil;
            NSLog(@"this is the offer details---%@",[yourDictionary description]);
        }
    }
}

-(void)parser:(NSXMLParser*)parser
foundCharacters:(NSString*)string
{
    currentElementValue=[NSString stringWithString:[string stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]]];
}
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    currentElementValue = [[NSMutableString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
} 
```

# symfony - Symfony2 FOSUserBundle 邀请：仅适用于拥有方关联

> ID：13156433
> 
> 赞同：0
> 
> 时间：2012-10-31T11:04:22.367
> 
> 标签：symfony, fosuserbundle, invitation

实体/用户

```
namespace My\SampleBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends \FOS\UserBundle\Entity\User
{
    /** @ORM\Id @ORM\Column(type="integer") @ORM\GeneratedValue(strategy="AUTO") */
    protected $id;

    /**
     * @ORM\OneToOne(targetEntity="Invitation", inversedBy="user")
     * @ORM\JoinColumn(referencedColumnName="code")
     * @Assert\NotNull(message="Your invitation is wrong")
     */
    protected $invitation;

    public function setInvitation(Invitation $invitation)
    {
        $this->invitation = $invitation;
    }

    public function getInvitation()
    {
        return $this->invitation;
    }
} 
```

实体/邀请

```
namespace My\SampleBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/** @ORM\Entity */
class Invitation
{
    /** @ORM\OneToOne(targetEntity="User", mappedBy="invitation", cascade={"persist", "merge"}) */
    protected $user;

    /** @ORM\Id @ORM\Column(type="string", length=6) */
    protected $code;

    /** @ORM\Column(type="string", length=256) */
    protected $email;

    /**
     * When sending invitation be sure to set this value to `true`
     *
     * It can prevent invitations from being sent twice
     *
     * @ORM\Column(type="boolean")
     */
    protected $sent = false;

    public function __construct()
    {
        // generate identifier only once, here a 6 characters length code
        $this->code = substr(md5(uniqid(rand(), true)), 0, 6);
    }

    public function getCode()
    {
        return $this->code;
    }

    public function getEmail()
    {
        return $this->email;
    }

    public function setEmail($email)
    {
        $this->email = $email;
    }

    public function isSent()
    {
        return $this->sent;
    }

    public function send()
    {
        $this->sent = true;
    }

    public function getUser()
    {
        return $this->user;
    }

    public function setUser(User $user)
    {
        $this->user = $user;
    }

    /**
     * Set code
     *
     * @param string $code
     * @return Invitation
     */
    public function setCode($code)
    {
        $this->code = $code;

        return $this;
    }

    /**
     * Set sent
     *
     * @param boolean $sent
     * @return Invitation
     */
    public function setSent($sent)
    {
        $this->sent = $sent;

        return $this;
    }

    /**
     * Get sent
     *
     * @return boolean 
     */
    public function getSent()
    {
        return $this->sent;
    }
} 
```

错误

> 您无法搜索关联字段“My\SampleBundle\Entity\Invitation#user”，因为它是关联的反面。查找方法仅适用于拥有方关联。500 内部服务器错误 - ORMException

我是刚刚执行文档的阶段。

> [https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/adding_invitation_registration.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/adding_invitation_registration.md)

捆绑包的显示是正常的。但是，如果我提交注册表，则它已成为错误。

有什么帮助吗？

编辑：

实际上，我一开始就设置了“inversedBy”。
一个前置问题。
[Symfony2 FOSUserBundle Invitation : 'inversedBy' 映射错误](https://stackoverflow.com/questions/13149930/symfony2-fosuserbundle-invitation-inversedby-mapping-errors)
从表面上看，它确实有效。但是，分析器会显示映射错误。

> My\SampleBundle\Entity\Invitation# 不包含所需的“inversedBy”属性。

所以，我根据建议改变了它。我不知道该怎么想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:50:52.990

正如错误所说。而不是 mappedBy，您应该在 Invitation 实体上使用 inversedBy，并在 $invitation 的 User 实体上使用 mappedBy。

```
/** @ORM\OneToOne(targetEntity="User", inversedBy="invitation", cascade={"persist", "merge"}) */
    protected $user; 
```

您还可以通过创建自定义存储库方法来根据邀请查找用户来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:28:55.067

有解决办法。
[https://github.com/FriendsOfSymfony/FOSUserBundle/issues/800](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/800)

```
public function reverseTransform($value)
{
    // ...

    return $this->entityManager
        ->getRepository('My\SampleBundle\Entity\Invitation')
        ->findOneBy(array(
            'code' => $value,
            'user' => null,        <= Removing 'user' solves the issue
        ));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T22:24:12.263

我最终将我的变压器修改为以下内容：

```
public function reverseTransform($value)
{
    if (null === $value || '' === $value) {
        return null;
    }

    if (!is_string($value)) {
        throw new UnexpectedTypeException($value, 'string');
    }

    $invitation = $this->entityManager
        ->getRepository('SixString\PearBundle\Entity\Invitation')
        ->findOneBy(array(
            'code' => $value,
        ));
    if($this->entityManager->getRepository('SixString\PearBundle\Entity\User')->findOneBy(array("invitation" => $invitation))){
        return null;
    }

    return $invitation;
} 
```

我删除了`'user' => null`但添加了一个检查以查看邀请是否已被使用

# c# - 使用 Automapper 将 DTO 映射到实体

> ID：13156437
> 
> 赞同：12
> 
> 时间：2012-10-31T11:04:36.017
> 
> 标签：c#, entity-framework, automapper

我有一个具有以下结构的实体框架 POCO。

```
public class Entity
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
} 
```

我为此实体创建了一个数据传输对象，供我的视图使用。

```
public class EntityDto
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

现在，我的 Global.asax 文件中有以下映射代码。

```
Mapper.CreateMap<Entity, EntityDto>();
Mapper.CreateMap<EntityDto, Entity>(); // not sure whether I need this as well? 
```

一切正常，我将 DTO 传递给我的视图，我可以`Entity`从我的`EntityDto`模型创建一个新实例。当我尝试编辑我的`Entity`; 我知道这归因于 AutoMapper 丢失了 EF 创建的用于跟踪对象更改的实体键，但是在阅读了一些来源之后，似乎没有一个明确的解决方案。这是我用来编辑我的实体的操作。

```
public ActionResult EditEntity(EntityDto model)
{
    var entity = context.Entities.Single(e => e.Id == model.Id);
    entity = Mapper.Map<EntityDto, Entity>(model); // this loses the Entity Key stuff
    context.SaveChanges();

    return View(model);
} 
```

现在，我该怎么做才能解决这个问题？我可以吗：

1.  以某种方式告诉 AutoMapper`.Ignore()`实体键属性？
2.  获取 AutoMapper 以复制实体键属性？
3.  `.Attach()`我的映射`Entity`并将状态设置为已修改？

任何帮助总是很感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T11:12:06.140

尝试将实体作为第二个参数传递给您的映射。

```
entity = Mapper.Map<EntityDto, Entity>(model, entity); 
```

否则，您的实体实例将被新实例覆盖，并且您将丢失在第一行中创建的实体。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-31T11:26:32.903

> .Attach() 我的映射实体并将状态设置为已修改？

```
public ActionResult EditEntity(EntityDto model)
{
    var entity = Mapper.Map<Entity>(model);
    context.Set<Entity>().Attach(entity); // (or context.Entity.Attach(entity);)
    context.Entry<Entity>(entity).State = System.Data.EntityState.Modified;
    context.SaveChanges();
    return View(model);
} 
```

您的上下文在哪里实例化？您应该在您的 EditEntity 操作 imo 中执行此操作。

```
public ActionResult EditEntity(EntityDto model)
{
    using(var context = new MyContext())
    {
        var entity = Mapper.Map<Entity>(model);
        context.Set<Entity>().Attach(entity); // (or context.Entity.Attach(entity);)
        context.Entry<Entity>(entity).State = System.Data.EntityState.Modified;
        context.SaveChanges();
        return View(model);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-27T20:41:17.537

不需要 Automapper 进行 DTO 到实体转换的替代答案是使用 DbEntry：

```
 var oldEntity = DbSet.FirstOrDefault(x => x.Id == updatedEntity.Id);
        var oldEntry = Context.Entry(oldEntity);

        oldEntry.CurrentValues.SetValues(updatedEntity); 
```

您不需要任何附加/状态检查，因为您首先获取旧实体，因此它附加了更改跟踪。此外，CurrentValues.SetValues 可以接受不同的类型，在此示例中，updatedEntity 是 DTO。设置值文档解释如下：

> 通过从给定对象中读取值来设置此字典的值。给定的对象可以是任何类型。将读取对象上名称与字典中的属性名称匹配且可以读取的任何属性。其他属性将被忽略。例如，这允许从简单的数据传输对象 (DTO) 复制属性。

所以似乎它已经可以以自动映射器式的方式执行。

# c# - 如何避免在从文本框、asp.net 获取的数据库中存储的值后出现空格？

> ID：13156438
> 
> 赞同：0
> 
> 时间：2012-10-31T11:04:39.397
> 
> 标签：c#, asp.net

每当我从文本框将字符串值插入数据库时​​，在 asp.net 中，在数据库行中的字符串值之后存储随机数量的空格？如何避免？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T11:08:43.627

您可以使用 Trim() 函数，或者您可能还想检查您的数据库设置。

如果您使用了 char 或 nchar，您将始终被分配 x 个字节空间，并且您的字符串将被填充。为避免这种情况，请使用 varchar，它只会存储您发送的字符。

如果您发送“测试”

char(10) 将存储“测试”

然而 varchar(10) 将存储“测试”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:13:01.100

检查数据库中列的定义。是 CHAR(x) 还是 NCHAR(x)？还是 VARCHAR(x) 或 NVARCHAR(x)？

如果它不是 VARCHAR 或 NVARCHAR，它是一个固定长度的字段，这意味着它后面总会有空格（假设你的字符串的长度不完全是字段的长度）。

除非您从头开始编码，否则更改数据库中字段的定义可能很重要（并且更改它不会从所有现有行中删除空格）。但这*可能*就是正在发生的事情。

如果在存储过程参数中或在为 SqlCommand 创建参数时使用 CHAR(x) 或 NCHAR(x)，也可能会发生这种情况。

为了修剪字符串中的空格，我喜欢 Habib 的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:08:04.920

```
string content= TextBox1.Text.Trim(); 
```

现在将此`content`值存储到数据库中。

如果这没有帮助，则问题可能不在您的应用程序端。

您还可以执行此查询以删除空格-

```
UPDATE
    your_table
SET 
    your_column = TRIM(your_column); 
```

这将确保您删除列的所有值中的任何空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:49:43.683

如果您使用的是 c#，则始终可以使用 trim() 选项。例如，如果您有一个文本字符串“名称”，则可以通过以下方式避免任何以下空格：

```
string newstr = name.trim(); 
```

这将确保字符串末尾没有空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T11:06:52.020

```
Use trim() function in c# or SQL Query side ..
Ex:
String str = " C# ";
Console.WriteLine("Hello{0}World!", str);
string trStr = str.Trim(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T11:07:03.017

```
textbox1.Text.Replace(" ",""); 
```

也许不是最干净的方法，但它应该工作

# excel - 列每周更改的总数 vba

> ID：13156439
> 
> 赞同：1
> 
> 时间：2012-10-31T11:04:43.267
> 
> 标签：excel, vba, automation, range

更新：公式出现了一个新问题，由于公式中的文本，它无法正常工作，公式（取自 excel）应该是，

```
=IF(D2<=0,"No Sales Price",E2/D2) 
```

我已经尝试了尽可能多的组合，但“无销售价格”导致引号出现问题。我目前的代码是

```
For i = 2 To LastRowG   
Range("Q" & i).Formula = "=IF(D" & i & "<=0," & "(No Sales Price)",  & "(E" & i & "/D" & i & "))"    
Next i 
```

环顾四周，但没有看到任何解决问题的方法，任何启示都会得到最大的赞赏

编辑：这是通过插入以下行来解决的；

```
For i = 2 To LastRowG  
Range("Q" & i).Formula = "=IF(D" & i & "<=0," & Chr(34) & "No Sales Price" & Chr(34) & "," & "E" & i & "/" & "D" & i & ")"
Next i 
```

Chr(34) 插入与该数字相关的 ASCII 字符，恰好是“。程序不会将其读取为已键入引号并继续正确读取代码行，然后将“否销售价格”在公式中正确。

它将按照公式的预期输出行，并且 Chr(34) 就像写““无销售价格””而没有不可避免的“预期语句结束”错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:14:06.077

我的建议会导致这样的结果：

```
LastRow = Cells(Rows.Count, "C").End(xlUp).Row
Cells(LastRow + 1, 3).Formula = "=SUM(C1:C" & LastRow & ")" 
```

**额外 1**

是否可以使用此公式在左侧单元格中输入单词 Total？

```
Range("B" & LastRow + 1) = "Total" 
```

**额外2**

还有一个只是为了推动我的运气，如何将公式一直复制到最后一个单元格的列中？`=G2*57.5 copied until the last row in I`

```
LastRowG = Cells(Rows.Count, "G").End(xlUp).Row

For i = 2 To LastRowG
    Range("I" & i).Value = "=G" & i & "*57.5"
Next i 
```

# dynamic - WPF MVVM 动态控件创建

> ID：13156445
> 
> 赞同：0
> 
> 时间：2012-10-31T11:05:15.827
> 
> 标签：dynamic, mvvm, telerik, controls

我正在开发一个 MVVM/WPF 应用程序，其中我有一个设计为 Applicatio 表单的用户控件（WPF），最后有别名和电子邮件 ID（键/值对）字段，将在文本框中输入并且这些文本框应该在单击按钮（+）时动态生成，我关心的是从视图模型中将控制放在视图中 - 因为我正在使用网格行/列。

别名 1 电子邮件 1 别名 2 电子邮件 2

任何指针或指导将不胜感激。

# r - 如何在不丢失行名的情况下对只有一列的 data.frame 进行排序？

> ID：13156448
> 
> 赞同：38
> 
> 时间：2012-10-31T11:05:38.247
> 
> 标签：r, sorting, dataframe

```
data = c(1,2,3,4)
names = c("foo", "bar", "baz", "yak")
d = data.frame(data, row.names=names) 
```

这将返回：

```
 data
foo    1
bar    2
baz    3
yak    4 
```

现在，我想按列对这个数据框进行排序，而不会丢失附加的行名。所以，我的结果是：

```
 data
yak    4
baz    3
bar    2
foo    1 
```

* * *

我已经尝试过以下方法：

*   `d[order(-d$data),]`，这当然只给了我一维列表。

*   `arrange(d, desc(data))`从`plyr`包中删除行名。

*   用 找出顺序`o = order(-d$data)`，然后用 重建框架

    ```
    data.frame(d[o,], row.names=rownames(d)[o]) 
    ```

    …这仍然给我留下了错误的列名。

有什么理智的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-31T11:08:19.803

您的第一次尝试很接近，只是忘记了使用`drop = FALSE`：

```
> d[order(-d$data), , drop = FALSE]
    data
yak    4
baz    3
bar    2
foo    1 
```

# java - Java 简单通配符匹配

> ID：13156449
> 
> 赞同：1
> 
> 时间：2012-10-31T11:05:40.487
> 
> 标签：java, regex, wildcard

我正在制作一个 java IRC lib，我需要一种方法来查看某个用户是否匹配可以包含通配符的主机掩码`*`。不使用正则表达式的最简单方法是什么？

一些例子：

```
 // Anything works
    *
            server.freenode.net ✔

    // Any nickname/user/host works
    *!*@*:
            any!thing@works ✔

    // Any nickname works (may have multiple nicknames on the same user)
    *!nebkat@unaffiliated/nebkat:
            nebkat!nebkat@unaffiliated/nebkat ✔
            123456!nebkat@unaffiliated/nebkat ✔
            nebkat!nebkat@unaffiliated/hacker ✘

    // Anything from an ip
    *!*@123.45.67.8:
            nebkat!nebkat@123.45.67.8 ✔
            123456!user2@123.45.67.8 ✔
            nebkat!nebkat@87.65.43.21 ✘

    // Anything where the username ends with nebkat
    *!*nebkat@*
            nebkat!nebkat@unaffiliated/nebkat ✔
            nebkat!prefix_nebkat@unaffiliated/nebkat ✔
            nebkat!nebkat_suffix@unaffiliated/nebkat ✘ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-13T14:04:01.083

使用 org.apache.commons.io.FilenameUtils#wildcardMatch() 方法。更多细节在回答[https://stackoverflow.com/a/43394347/466677](https://stackoverflow.com/a/43394347/466677)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:04:39.313

结束了这个：

```
public static boolean match(String host, String mask) {
    String[] sections = mask.split("\\*");
    String text = host;
    for (String section : sections) {
        int index = text.indexOf(section);
        if (index == -1) {
            return false;
        }
        text = text.substring(index + section.length());
    }
    return true;
} 
```

# mysql - mysql 选择然后更新/加入？

> ID：13156454
> 
> 赞同：0
> 
> 时间：2012-10-31T11:06:02.850
> 
> 标签：mysql, select

我已经阅读了几个小时，但我的学习曲线并没有帮助！我试图通过执行 select 语句来查找几行，然后当它匹配时，我需要获取结果并将其与另一个表配对，然后进行更新。不知何故，从我正在阅读和应用的内容来看，这对我没有多大帮助。

请帮助我，因为如果没有看到和应用我正在做的事情，我无法理解这些事情......这是我的代码：

```
select code as codea from routes where r1=1 (update plans set active=1 where code=codea) limit 100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:08:10.443

您可以`JOIN`像这样更新：

```
UPDATE plans p 
INNER JOIN routes r ON p.code = r.codea
SET p.active = 1 
WHERE r.r1 = 1
LIMIT 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:10:46.763

这是你需要的吗？

```
update plans set
active = 1 
where code = (select code as codea
              from routes
              where r1=1) 
```

# ios - 将文件从 ios App 传输到 PC 上运行的 App

> ID：13156456
> 
> 赞同：1
> 
> 时间：2012-10-31T11:06:13.833
> 
> 标签：ios, file-transfer

我的 iOS 应用程序在运行时会在其文档文件夹中创建文件

我需要在 PC 上（最终在 Mac 上）编写一个应用程序，以便当 iOS 应用程序正在运行并且 PC 应用程序正在运行时 - iOS Documents 文件夹中的文件应该是可见的并且可以从 iOS 下载到通过 WiFi 网络的 PC。

其他一些帖子建议使用 iTunes 或 iCloud，但我的要求表明

*   我不能强制用户使用 iTunes 传输文件
*   没有 iCloud 或 DropBox
*   没有第三方为 Web 服务注册新帐户

即需要PC/Mac上的专用客户端App

是否有可用的**标准框架**来实现这一点？

iTalk 录音机就是一个很好的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:36:45.240

我想你应该看看 Apple 的 Bonjour 服务。这些文档可能会提供一个很好的起点：

[卓悦概览](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NetServices/Introduction.html)

[NSNetServices 简介和 CFNetServices 编程指南](https://developer.apple.com/library/ios/#documentation/Networking/Conceptual/NSNetServiceProgGuide/Introduction.html)

此外，在Brad Larson 的[这个回答](https://stackoverflow.com/questions/2477602/bonjour-for-iphone)中，您会找到有关 Bonjour 的更多信息

这是 Apple 的一个示例项目，展示了 Bonjour 的用法：[BonjourWeb](https://developer.apple.com/library/ios/#samplecode/BonjourWeb/Introduction/Intro.html)

# mysql - 具有 LIMIT 降序排列的 MySQL 查询不适用于内部联合表

> ID：13156457
> 
> 赞同：2
> 
> 时间：2012-10-31T11:06:20.087
> 
> 标签：mysql, sql-order-by, inner-join, sql-limit

所以我有两个看起来像这样的表：

表**如下**：

```
follower   |   following
-----------+-------------
1          |   2
-----------+-------------
1          |   3
-----------+-------------
2          |   1
-----------+-------------
1          |   4         
-----------+------------- 
```

（这基本上是包含哪个用户在网站上关注哪个用户的表格......数字是用户 ID）

表**文章**：

```
id    |    title    |   writer
------+-------------+---------
1     |    a test   |   2      
------+-------------+---------
2     |    testing  |   3     
------+-------------+---------
3     |    another  |   2     
------+-------------+---------
4     |    again    |   4
------+-------------+--------- 
```

（`id`是一个自动增量字段..`title`包含文章的标题..`writer`包含编写它的用户的 id）

现在我有一个如下所示的 mysql**查询**：

`SELECT * FROM follows f INNER JOIN articles a ON f.following = a.writer WHERE f.follower = 1 ORDER BY a.id DESC LIMIT 4, 2;`

但是我没有得到任何结果 **，我想从表中取出 2 篇文章，它们的`id`SMALLER 比 4 小。这就是为什么我试图放一个`DESC`before `LIMIT`。**

（所以我想获得具有`id`2 和 3 的文章。）

但它不起作用。我怎么能这样做？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:11:53.127

> 我想从表中取出 id 小于 4 的 2 篇文章

然后试试这个：

```
SELECT *
FROM follows f 
INNER JOIN
(
     SELECT *
     FROM articles
     WHERE id > 1 
        OR id < 4
) a ON f.following = a.writer
WHERE f.follower = 1
ORDER BY a.id 
```

**或者：**

```
SELECT *
FROM follows f 
INNER JOIN articles a ON f.following = a.writer
WHERE f.follower = 1 
  AND (a.id > 1 OR a.id < 4 )

ORDER BY a.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:27:12.587

您`LIMIT`在查询中使用错误。您的查询返回**4 行**，其中包含您关注的作者撰写的所有文章，按 article.id 降序排序。但是您`LIMIT 4, 2`正在跳过前 4 行，然后返回前 2 行。由于只找到 4 行，因此您的结果为空。

你的结果排序正确，所以如果你想要**最后两篇文章**，你需要**选择前两行**：

```
SELECT * 
FROM 
  test_follows f INNER JOIN test_articles a ON f.following = a.writer 
WHERE 
  f.follower = 1
ORDER BY 
  a.id DESC 
LIMIT 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:12:32.750

不确定这是否是你想要的……试试这个。

```
mysql_query("SELECT * FROM follows f INNER JOIN articles a ON f.following = a.writer WHERE f.follower = 1  and a.id < 4 ORDER BY a.id "); 
```

如果得到文章。id 小于（小于）4 希望这会有所帮助。

# googletest - 枚举成员每次迭代的新测试夹具

> ID：13156471
> 
> 赞同：2
> 
> 时间：2012-10-31T11:07:06.350
> 
> 标签：googletest

我的测试包含在声明的函数中，`TEST_F`以便我可以在测试之间使用新的测试夹具对象。对于每个`TEST_F`，都会创建一个新的测试夹具实例。但是如果我想在我的测试中循环一个枚举并为每次迭代都有一个新的测试夹具实例呢？在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:52:06.233

听起来您想使用[value-parameterized tests](https://github.com/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#value-parameterized-tests)。

您可以像这样遍历枚举的值：

```
#include <iostream>
#include "gtest/gtest.h"

enum Malt { bowmore = 10, talisker, scapa };

class Whisky {
 public:
  explicit Whisky(const Malt& malt) : malt_(malt) {}
  bool IsIslay() const { return malt_ == bowmore; }
 private:
  Malt malt_;
};

class DramTest : public testing::TestWithParam<Malt> {
 protected:
  DramTest() : whisky_(GetParam()) {}
  Whisky whisky_;
};

TEST_P(DramTest, IsIslay) {
  if (GetParam() == bowmore)
    EXPECT_TRUE(whisky_.IsIslay());
  else
    EXPECT_FALSE(whisky_.IsIslay());
}

INSTANTIATE_TEST_CASE_P(AllMalts, DramTest,
                        testing::Values(bowmore, talisker, scapa));

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
} 
```

如果您有大量枚举值，则可以使用`Range`生成器而不是生成器`Value`：

```
testing::Range<int>(bowmore, scapa + 1) 
```

但这需要在整数和枚举类型之间的夹具中进行一些转换。

两种选择都存在维护问题；如果添加新的枚举值，则需要记住更改测试。

# java - InputStream 从偏移量读取数据

> ID：13156480
> 
> 赞同：0
> 
> 时间：2012-10-31T11:07:28.507
> 
> 标签：java, inputstream

我想实现一个通用的、可重用的类，允许在读取数据之前在流上设置 Offset。理想情况下，我希望它能够与所有 InputStreams 一起使用，这样当我从不同的来源获取它们时，我就不必包装它们中的每一个。

我在 SO 中找到了关于[PositionInputStream](https://stackoverflow.com/questions/240294/given-a-java-inputstream-how-can-i-determine-the-current-offset-in-the-stream)的解决方案，但这并不是我想要的。任何人都可以推荐偏移输入流的现有实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:32:41.567

我认为最后，所有实现最多只能读取第一个“偏移字节”，
但不会将其呈现给用户，
然后返回用户他期望读取的字节。

例如，假设您的基础设施基于[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)模式，并且将“包装”的 InputStream 作为成员。

read 方法的代码（带有偏移量和长度参数）看起来或多或少像：

```
public int read(byte[] b,
                int off,
                int len)
         throws IOException {
    innerInputStream.read(b,off,len);
}

InputStreamDecorator d = new InputStreamDecorator(new FileInputStream("myfile.txt")); 
```

您还可以有一个跳过的包装实现。
您可以决定拥有一个 CTOR，它具有要跳过的字节数的参数，并且此 CTOR 将调用内部跳过方法。
例如：

```
public class InputStreamDecorator extends InputStream {
   public InputStreamDecorator(InputStream is, long toSkip) {
      this.internalStream = is;
      is.skip(toSkip);
   }
} 
```

# asp.net - 试图在asp中总gridview

> ID：13156483
> 
> 赞同：1
> 
> 时间：2012-10-31T11:07:36.760
> 
> 标签：asp.net, vb.net

我正在尝试合计添加到 gridview 的所有产品的价格和数量，但我似乎无法弄清楚为什么总数没有显示在页脚中。我为vb拥有的代码应该将数量乘以价格并将其放入gridview的页脚中。gridview 页脚是可见的，所以我知道这不是问题所在。任何帮助，将不胜感激。

ASP：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataSourceID="Cart" AllowSorting="True" BackColor="White" 
    BorderColor="#999999" BorderStyle="None" BorderWidth="1px" CellPadding="3" 
    GridLines="Vertical" ShowFooter="True" AutoGenerateEditButton="True" 
    AutoGenerateDeleteButton="True" DataKeyNames="cartID">
    <AlternatingRowStyle BackColor="Gainsboro" />
<Columns>
<asp:BoundField DataField="cartID" HeaderText="cartID" SortExpression="cartID" 
        InsertVisible="False" ReadOnly="True" Visible="False"></asp:BoundField>
    <asp:BoundField DataField="cartNO" HeaderText="cartNO" SortExpression="cartNO" 
        Visible="False" />
    <asp:BoundField DataField="productID" HeaderText="productID" 
        SortExpression="productID" InsertVisible="False" ReadOnly="True" />
    <asp:BoundField DataField="productName" HeaderText="productName" 
        SortExpression="productName" InsertVisible="False" ReadOnly="True" />
    <asp:BoundField DataField="price" HeaderText="price" 
        SortExpression="price" InsertVisible="False" ReadOnly="True" />
    <asp:BoundField DataField="quantity" HeaderText="quantity" 
        SortExpression="quantity" />
        <asp:TemplateField HeaderText="SubTotal" SortExpression="subTotal" >
        <ItemTemplate>
        <%# Eval("price") * Eval("quantity")%>
        </ItemTemplate>
       <%-- <FooterTemplate>
      <asp:Label ID="sum" runat="server"/>
        </FooterTemplate>--%>
        </asp:TemplateField> 
```

VB公共类MyCart

```
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim strcartNO As String = ""
    Dim cookieBack As HttpCookie
    cookieBack = HttpContext.Current.Request.Cookies("cartNO")
    strcartNO = cookieBack.Value
    'sqldscartLine.selectCommand = "Select * from cartLine where cartNO = '" & strcartNO & "'"
    GridView1.DataBind()

End Sub

Public Shared Sub DeleteMethod(ByVal original_OrderID As Integer, _
ByVal original_ProductID As Integer)

End Sub

Dim priceTotal As Decimal = 0
Dim quantityTotal As Integer = 0
Sub GridView1_RowDataBound(ByVal sender As Object, _
  ByVal e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
        ' add the UnitPrice and QuantityTotal to the running total variables
        priceTotal += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, _
         "price"))
        quantityTotal += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, _
          "quantity"))
    ElseIf e.Row.RowType = DataControlRowType.Footer Then
        e.Row.Cells(2).Text = "Totals:"
        ' for the Footer, display the running totals
        e.Row.Cells(3).Text = priceTotal.ToString("c")
        e.Row.Cells(4).Text = quantityTotal.ToString("d")

        e.Row.Cells(3).HorizontalAlign = HorizontalAlign.Right
        e.Row.Cells(4).HorizontalAlign = HorizontalAlign.Right
        e.Row.Font.Bold = True
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:25:25.910

不确定是否有人看到评论，所以将其放在答案中 - 这可能会帮助其他人（如果我是正确的..）

您的代码包含以下内容

```
 <%-- <FooterTemplate>
  <asp:Label ID="sum" runat="server"/>
    </FooterTemplate>--%> 
```

`<%--`and是注释，所以你的`--%>`页脚被注释掉了。

将其更改为

```
 <FooterTemplate>
  <asp:Label ID="sum" runat="server"/>
    </FooterTemplate> 
```

它应该显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:22:38.460

数据绑定创建数据行。页脚不是数据行，因此在`RowDataBound`创建事件时不会调用该事件。因此，您的事件处理程序`GridView1_RowDataBound`将永远不会执行生成总数的代码，因为表达式

```
e.Row.RowType = DataControlRowType.Footer 
```

...在该方法的任何执行过程中永远不会是真的。

尝试处理`RowCreated`事件，如下所示：

```
Sub GridView1_RowCreated(ByVal sender As Object, _
  ByVal e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.Footer Then
        e.Row.Cells(2).Text = "Totals:"
        ' for the Footer, display the running totals
        e.Row.Cells(3).Text = priceTotal.ToString("c")
        e.Row.Cells(4).Text = quantityTotal.ToString("d")

        e.Row.Cells(3).HorizontalAlign = HorizontalAlign.Right
        e.Row.Cells(4).HorizontalAlign = HorizontalAlign.Right
        e.Row.Font.Bold = True
    End If
End Sub 
```

# javascript - 在剃刀页面上下文中运行 javascript jquery

> ID：13156484
> 
> 赞同：0
> 
> 时间：2012-10-31T11:07:36.637
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我有一个 asp.net razor 部分视图，它在一页上多次使用。在那个部分视图中，我在 $(document).ready() 中有 javascript，我想在部分视图的内容上做一些 jQuery 的东西。

```
<div class="someclass">
</div>
<script>
    $(document).ready(function() {
        $('.someclass').dosomething();
    ));
</script> 
```

所以问题是当这个局部视图在一页上多次使用时，$('.someclass') 返回到很多元素。我怎样才能实现 $('.someclass') 只返回预期的元素？

我看到的唯一解决方案是为元素生成一个唯一的 id 并在 jQuery 选择器中使用它。但我不喜欢为此生成 id。

还有其他解决方案的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:14:14.653

一个快速的解决方法是将该类仅用于 init 并在初始化后将其删除，如下所示：

```
<div class="someclass initSomething">
</div>
<script>
    $(document).ready(function() {
        $('.initSomething').dosomething().removeClass('initSomething');
    ));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:13:08.050

作为一般规则，您不应在局部视图中包含脚本，如果多次使用/加载局部视图，它将产生意外行为。此外，内联脚本避免了它们被浏览器缓存。尽管有时我们会感到懒惰，但将脚本与视图分开总是最好的做法。

# java - 如何在图像上显示 JButton？

> ID：13156488
> 
> 赞同：0
> 
> 时间：2012-10-31T11:07:50.210
> 
> 标签：java, swing, graphics, jbutton, paint

我使用以下代码在图像上显示一个 jbutton。但是直到我将光标放在按钮位置上，他的按钮才会显示。代码中的更正是什么？

文件*Project31.java*

```
package project31;

import javax.swing.JFrame;
import java.awt.*;

public class Project31 {

    public static void main(String[] args) {

        studentinfo studentinfo=new studentinfo();
        studentinfo.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        studentinfo.setSize(1368,768);
        studentinfo.setVisible(true);
    }
} 
```

文件*studentinfo.java*

```
package project31;

import java.io.*;
import javax.sound.sampled.*;
import sun.audio.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class studentinfo extends JFrame{

    private JButton plainJButton;
    Image stuinfo=Toolkit.getDefaultToolkit().getImage("stuinfo.png");

    public studentinfo(){
            setLayout(new FlowLayout());
            plainJButton=new JButton("Search");
            add (plainJButton);
            ButtonHandler handler=new ButtonHandler();
            plainJButton.addActionListener(handler);
    }

    private class ButtonHandler implements ActionListener{

        public void actionPerformed(ActionEvent event){

        }
    }

    public void paint(Graphics g){
        g.drawImage(stuinfo,16,10,this);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:32:23.440

您还必须重新绘制按钮。但我建议您使用 JPanel 并在其上绘制图像。然后绘制JButton：

```
class ImagePanel extends JPanel{
   private Image stuinfo;
   public ImagePanel() {
      stuinfo = Toolkit.getDefaultToolkit().getImage("stuinfo.png");
   }
   public void paintComponent(Graphics g){ 
      super.paintComponent(g);
      g.drawImage(stuinfo,16,10,this);
   }
} 
```

然后：

```
1\. Create your JFrame
2\. Add an object of ImagePanel to the JFrame with `setContentPane()`
3\. Add your button. 
```

现在您在图像顶部有一个按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:59:57.663

您还可以将您的图像`Icon`设置为按钮，如此处和[此处](https://stackoverflow.com/a/4170233/230513)[所示](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)。

# sql - 如何在不使用 CTE 的情况下从日期范围创建日期列表

> ID：13156493
> 
> 赞同：1
> 
> 时间：2012-10-31T11:08:05.407
> 
> 标签：sql, sql-server, stored-procedures

以下链接说明了如何将日期范围转换为日期列表。我使用了这种方法，它工作正常，但查询没有执行（我使用 Maxrecursion 0 来无限）。

[http://blog.justinstolle.com/sql-turn-a-date-range-into-a-list-of-dates/](http://blog.justinstolle.com/sql-turn-a-date-range-into-a-list-of-dates/)

有没有其他解决方案来完成这项工作？（使用子查询或声明表？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:11:02.240

尝试

```
declare @datestart date = '2012-1-1',   @dateend date = '2012-10-31'

declare @days int = datediff(d,@datestart,@dateend)

select
    dateadd(d, number, @datestart)
from master..spt_values 
where type='p'
    and number<=@days 
```

如果您的日期范围超过 2047 天，您可以通过自行加入表格来延长它 - 下面将允许您长达 27 年。

```
select
    dateadd(d, v1.number+v2.number*2048, @datestart)
from master..spt_values v1
    cross join (select number from master..spt_values where number<5 and type='p') v2       
where type='p'
    and (v1.number+v2.number*2048)<=@days 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T11:42:55.183

这是链接中的相同查询，稍作修改（使用 CTE）。请检查：

```
DECLARE @dateranges TABLE (range_id VARCHAR(2), date_begin DATETIME, date_end DATETIME)
INSERT @dateranges SELECT 'A', '2010-01-01', '2010-01-03'
INSERT @dateranges SELECT 'B', '2008-02-27', '2008-03-01'
INSERT @dateranges SELECT 'C', '2010-04-26', '2010-04-26'
INSERT @dateranges SELECT 'D', '2000-02-01', '2001-02-05'

;WITH cte (id, d)
AS (SELECT tbl.range_id AS id, tbl.date_begin AS d
    FROM @dateranges tbl
    WHERE DATEDIFF(DAY, tbl.date_begin, tbl.date_end) >0
    UNION ALL
    SELECT tbl.range_id AS id, DATEADD(DAY, 1, cte.d) AS d
    FROM cte INNER JOIN @dateranges tbl
    ON cte.id = tbl.range_id
    WHERE cte.d < tbl.date_end)
SELECT id AS range_id, d AS date_within_range FROM cte
ORDER BY id, d
OPTION (MAXRECURSION 0); 
```

# jquery - 如何制作允许所有语言但不允许特殊字符的正则表达式？

> ID：13156500
> 
> 赞同：0
> 
> 时间：2012-10-31T11:08:26.073
> 
> 标签：jquery, regex

我真的不明白这一点。我对正则表达式很陌生。

我尝试使用 jQuery Validate 和正则表达式规则来验证其中包含名称的表单。我已经设法编写了函数，但需要正确的正则表达式。

这些字段应该允许所有语言的名称，但不允许像“$∞§€”这样的特殊字符以及所有那些不属于名称的字符。

关于如何做到这一点的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:10:04.160

您需要使您的正则表达式与 Unicode 一起使用，如此处所示[，](http://www.regular-expressions.info/unicode.html)您需要执行以下操作：`\p{L} or \p{Letter}: any kind of letter from any language`

# c# - 聚合扩展方法和最终字符删除

> ID：13156501
> 
> 赞同：0
> 
> 时间：2012-10-31T11:08:38.273
> 
> 标签：c#

我有一个整数列表。当这个列表是

`1,2,3`

我想创建一个字符串

`'1|2|3'`.

所以，我做了这个

```
string valueIds = selectedAttributeValueIds.Aggregate("'", (current, valueId) => current + valueId + "|") + "'"; 
```

问题是这给了

`'1|2|3|'`

如果它存在，我如何避免在`'|'`不编写丑陋的代码来删除它的情况下获得最终结果？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:09:42.693

而不是 Aggregate 使用[string.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx) ;

```
string valueIds = string.Join("|",listofInt); 
```

`listofInt`你的号码列表在哪里。

编辑：*错过了将单引号添加到字符串的部分。你可以做：*

```
string valuesIds = "'" + string.Join("|", listOfInt) + "'"; 
```

或者

```
string valuesIds = string.Concat("'", string.Join("|", listOfInt), "'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:11:34.797

您可以[`string.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)更简单地使用：

```
 var list = new[] {1, 2, 3};
 var result = string.Format("'{0}'", string.Join("|", list)); 
```

# c - 两个指针变量的比较

> ID：13156504
> 
> 赞同：0
> 
> 时间：2012-10-31T11:08:46.377
> 
> 标签：c

我在 C 中遇到了一个程序，并看到了指针比较程序。我不明白的是这两个陈述。

```
j=&arr[4];
k=(arr+4); 
```

第一条语句保存第五个元素的地址，第二条语句的语法是我第一次看到的。谁能解释我的第二个陈述。并且在执行程序后 j 和 k 相等。所以他们指向同一个位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:12:17.383

> k=(arr+4);

`k`mean衰减为`arr`指向`index 0`.

数组名称衰减到指向它的零索引的指针。通过添加 4 意味着它将指向第 5 个元素。

![在此处输入图像描述](../Images/1b29fca90655a3f340185b05fd7d6ea5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:11:03.627

这是臭名昭著的指针算法！该语句只是将元素的地址分配给指向的地址，`arr`并向右偏移4个元素。`arr + 4`指向 的地址`arr[4]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:12:40.897

这只是指针算术，混合了 C 的索引<->指针延迟等价。

前者意味着表达式`arr + 4`导致`arr`（数组的名称）简单地衰减为指向数组第一个参数的指针。换句话说，`arr == &arr[0]`是真的。

后者是这种等价性，对于任何指针 a 和整数 i：

```
a[i] === *(a + i) 
```

这意味着第一个表达式（对 的赋值`j`）可以读作`j = &(*(a + 4))`，这使得（非常）清楚的是，它只是获取索引为 4 的元素的地址，就像该`k`行所做的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:15:32.580

每个 arr[4] 语句都扩展到 (arr+4); 由编译器本身声明。

这两个是等价的，可以互换使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T11:12:38.353

这段代码使用了一个简单的指针算术案例。它将数组的地址（+4 地址，因此它是第 5 个元素）分配给指针 k。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-31T11:40:46.427

It's basic pointer arithmetic. k is a pointer, arr is a pointer to the first element of the array (a pointer to arr[0]). So by adding 4 to k, you move the pointer on 4 elements. Therefore k=(arr+4) means k points to arr[4], which would be the fifth element, and the same as j.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-31T11:14:19.963

两者都是获取指针值的方法。

首先`arr[x]`返回 (x+1) 数组内容，您可以使用 & 运算符获取其地址。第二个称为指针算术，返回 arr 指针的地址加上 x 个位置，即 x+1 地址。

# jquery-ui - 带有内部元素的 jQuery UI 可调整大小的句柄

> ID：13156505
> 
> 赞同：0
> 
> 时间：2012-10-31T11:08:50.303
> 
> 标签：jquery-ui, jquery-ui-resizable

我试图将一个内部 div 放置到我的可调整大小的句柄上，但它使句柄无用。

```
<div class="layer" style="width: 150px;">
<div class="left ui-resizable-handle ui-resizable-w">
    <div><<< div</div>
</div>
<div class="right ui-resizable-handle ui-resizable-e">>>></div>
</div>
​
$('.layer').resizable({
    handles: null
});
​ 
```

[http://jsfiddle.net/MatteS75/3dwVp/15/](http://jsfiddle.net/MatteS75/3dwVp/15/)

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:17:50.563

将 jquery ui 可调整大小小部件中的 _mouseCapture 方法更改为此使其工作：

```
_mouseCapture: function(event) {
    var capture = false;
    for (var i in this.handles) {
        var handle = $(this.handles[i])[0];
        if (handle == event.target || $.contains(handle, event.target)) {
            capture = true;
        }
    }

    return !this.options.disabled && capture;
}, 
```

我还为此创建了一张票和拉取请求：

[http://bugs.jqueryui.com/ticket/8756](http://bugs.jqueryui.com/ticket/8756)

# c# - 网格自动宽度

> ID：13156508
> 
> 赞同：0
> 
> 时间：2012-10-31T11:09:11.317
> 
> 标签：c#, wpf, silverlight, microsoft-metro

这个问题很简单，1x1，我想答案也很简单。

我想让我的网格的宽度和高度适合它的内容。因此，如果我从代码中更改内容的大小，我希望网格具有相同的大小。

我尝试了以下方法：

```
 <Grid x:Name="ContainerGrid" Background="Cyan" MouseDown="ContainerGrid_Tapped_1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Column="0" Grid.Row="1">
            <Rectangle x:Name="small" Fill="Red" Width="100" Height="100" Visibility="Visible"/>
            <Rectangle x:Name="big" Fill="Green" Width="500" Height="500" Visibility="Collapsed"/>
        </StackPanel>
        <Grid x:Name="SelectedCheckMark"  Grid.Column="1" Grid.Row="0" Visibility="{Binding ElementName=big,Path=Visibility}">
            <Path x:Name="SelectedEarmark" Data="M0,0 L40,0 L40,40 z" 
                  Fill="BlueViolet" Stretch="Fill"/>
            <Path Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" 
                  Fill="White" FlowDirection="LeftToRight" 
                  HorizontalAlignment="Right" Height="15"  Stretch="Fill" VerticalAlignment="Top" Width="15"/>
        </Grid>
    </Grid> 
```

相关部分背后的代码：

```
 private void ContainerGrid_Tapped_1(object sender, MouseButtonEventArgs e)
    {
        //Set opoosite visibility
        small.Visibility = (small.Visibility == Visibility.Visible) ? Visibility.Collapsed : Visibility.Visible;
        big.Visibility = (big.Visibility == Visibility.Visible) ? Visibility.Collapsed : Visibility.Visible;
    } 
```

我希望在网格的任何状态下都看不到青色。但是现在 ContainerGrid 的宽度不适合它的内容。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:59:50.217

尝试使用`HorizontalAlignment`和`VerticalAlignment`的属性`ContainerGrid`。

例如

```
<Grid x:Name="ContainerGrid" Background="Cyan" MouseDown="ContainerGrid_Tapped_1" Margin="0,0,0,0" ShowGridLines="True" Height="Auto" Width="Auto" HorizontalAlignment="Left" VerticalAlignment="Top"> 
```

它们的默认值是 Stretch，这意味着网格将在其父元素给定的整个空间内拉伸，而与内容无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:56:45.327

尝试将您的 XAML 更改为以下内容：

```
<Grid x:Name="ContainerGrid" Background="Cyan" MouseDown="ContainerGrid_Tapped_1" HorizontalAlignment="Center" VerticalAlignment="Center">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <StackPanel Grid.Column="0" Grid.Row="1">
        <Rectangle x:Name="small" Fill="Red" Width="100" Height="100" Visibility="Visible"/>
        <Grid>
            <Rectangle x:Name="big" Fill="Green" Width="500" Height="500" Visibility="Collapsed"/>
            <Grid x:Name="SelectedCheckMark"  Grid.Column="1" Grid.Row="0" Visibility="{Binding ElementName=big,Path=Visibility}" HorizontalAlignment="Right" VerticalAlignment="Top">
                <Path x:Name="SelectedEarmark" Data="M0,0 L40,0 L40,40 z" 
                      Fill="BlueViolet" Stretch="Fill"/>
                <Path Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" 
                      Fill="White" FlowDirection="LeftToRight" 
                      HorizontalAlignment="Right" Height="15"  Stretch="Fill" VerticalAlignment="Top" Width="15"/>
            </Grid>
        </Grid>
    </StackPanel>
</Grid> 
```

# mysql - 使用聚集索引重新排列表中的记录

> ID：13156510
> 
> 赞同：0
> 
> 时间：2012-10-31T11:09:13.210
> 
> 标签：mysql, database, indexing, clustered-index

假设：在聚集索引的情况下，磁盘上记录的顺序与聚集索引的顺序相同。

问题：每次插入新记录时，磁盘上的数据是否都会重新排列？这不是对在磁盘上执行数据移动的性能造成很大影响吗？

MySQL 的即兴创作：每个索引页都有一个保留空间，即为将来更新保留的索引页空间的 1/16。

我的问题：当这个空间（保留空间）用尽并且新记录等待写入时会发生什么？这是否会重新排列该索引页之后的所有数据以适应此新记录？这对表演不是很大吗？如果是，有哪些可能的解决方法？

一些额外的参考：这是否直接映射到操作系统处理内部碎片的方式，并且文件系统试图将与同一文件对应的所有块尽可能地存储在磁盘上以节省磁盘寻道时间？如果可能的话，如果两者相关以及如何相关，是否有解释？

我发现[Gary Mcgill的帖子（](https://stackoverflow.com/users/98422/gary-mcgill)[由于聚集索引导致 SQL 查询缓慢](https://stackoverflow.com/questions/1147499/clustered-index)）上的答案对此非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:16:35.997

是的，使用聚集索引并在中间插入一些东西会很痛苦。这就是为什么只有在以线性方式插入时才必须小心使用聚集索引的原因，因此对于 AUTO_INCREMENT ID 和其他列，在最后一个“之前”插入行是不常见的......

我遇到的一个有趣的情况是，当 ID 字段是用两个字符前缀和一个序列号构造时......数字部分本身就是一个很好的候选者，但是有两个字母前缀，插入`ZZ1234`并`AA1235`导致一个问题。

可能的解决方法：当情况不适合时，重组索引以不使用集群。

> 这是否直接映射到操作系统处理内部碎片的方式，并且文件系统试图将与同一文件对应的所有块尽可能地存储在磁盘上以节省磁盘寻道时间？

我不认为这些是直接相关的。在某些 DBMS 中，可以让 DBMS 完全控制块设备，并且没有 OS 层影响磁盘/SSD/其他任何东西上的数据布局……

# c++ - 使用命令行将二维数组传递给 C++

> ID：13156514
> 
> 赞同：1
> 
> 时间：2012-10-31T11:09:36.043
> 
> 标签：c++, arrays, command-line

我有一个要求，我需要从命令行调用 C++ 应用程序，并且需要将 int 类型的二维数组传递给它。谁能让我知道如何做到这一点，以及如何使用 argv 参数在 C++ 应用程序中解释它

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T11:12:23.237

在`argv`你只能传递一个包含字符串的一维数组，它是

```
char* argv[] 
```

所以，你不能真正传递二维数组，但你可以“模拟”它。

例如，传递 2 个参数，说明矩阵的大小是多少 - 行数和列数，然后一一传递所有元素。

然后解析程序中的参数，知道你将使用什么格式。

* * *

例如：如果你想通过

```
1 2 3
4 5 6 
```

你可以像这样运行你的程序：

```
./my_program 2 3 1 2 3 4 5 6 
```

这样，您就会知道，即`argv[1]`行数，`argv[2]`s 列数，它们是二维数组的所有元素，从左上角开始。

不要忘记，那`argv`是数组，包含`char*`指针。换句话说，您需要转换所有参数`int`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:22:53.847

I would recommend passing a file as the only argument. Or data in the same format on stdin as @j_random_hacker suggests. If no human needs to edit it, it could be a binary file. One possible format:

4 bytes = size of first dimension 4 bytes = size of second dimension 4 bytes * size of first * size of second = contents of array

When reading, everything is aligned. Just read every four byte int and interpret as above.

If it needs to be human readable I would do csv or space-delimited. There would be no need to specify the dimensions in that case because each row ends in newline.

# java - 在 repaint() 之后删除 JPanel 时，对 JPanel 的绘制会中断；

> ID：13156515
> 
> 赞同：1
> 
> 时间：2012-10-31T11:09:41.977
> 
> 标签：java, swing, jframe, jpanel, repaintmanager

我正在尝试为我正在编码的应用程序创建一个 2D 渲染器。
我正在使用paintComponent 将所有图像绘制到JPanel，并且很好。事情出了问题。

首先，我使用了这个：

```
frame.getContentPane().add(p);
frame.getContentPane().validate();
frame.getContentPane().repaint(); 
```

这工作得很好，除了框架会因 JPanel 过载。

当我将其用作我的代码时，一切都运行良好：

```
frame.getContentPane().add(p);
frame.getContentPane().validate();
frame.getContentPane().repaint();
frame.getContentPane().list()
System.out.print("\n\n\n");
frame.getContentPane().remove(p); 
```

这非常适合我的需要。除了我不希望控制台被内容窗格上的内容发送垃圾邮件。

所以我决定删除 list 方法并这样做：

```
frame.getContentPane().add(p);
frame.getContentPane().validate();
frame.getContentPane().repaint();
frame.getContentPane().remove(p); 
```

那是它**变坏的时候。**

**这是我得到的错误。**

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: No such child: 1
at java.awt.Container.getComponent(Container.java:302)
at javax.swing.JComponent.rectangleIsObscured(JComponent.java:4340)
at javax.swing.JComponent.paint(JComponent.java:1028)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5139)
at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:302)
at javax.swing.RepaintManager.paint(RepaintManager.java:1188)
at javax.swing.JComponent._paintImmediately(JComponent.java:5087)
at javax.swing.JComponent.paintImmediately(JComponent.java:4897)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:783)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:735)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
at javax.swing.RepaintManager.access$700(RepaintManager.java:58)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1593)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:670)
at java.awt.EventQueue.access$400(EventQueue.java:96)
at java.awt.EventQueue$2.run(EventQueue.java:631)
at java.awt.EventQueue$2.run(EventQueue.java:629)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:640)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

***有人对如何修复有任何建议吗？***

# python - 如何存储 itertools.chain 并多次使用它？

> ID：13156518
> 
> 赞同：7
> 
> 时间：2012-10-31T11:09:45.547
> 
> 标签：python, memoization, itertools

我想使用`itertools.chain`有效的列表连接（记忆），但我需要能够`map`多次阅读（或等）结果。这个例子说明了这个问题：

```
import itertools
a = itertools.chain([1, 2], [3, 4])
print list(a) # => [1, 2, 3, 4]
print list(a) # => [] 
```

避免此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T11:10:51.863

与所有生成器一样，您需要将其转换为列表并存储该结果：

```
a = list(a) 
```

这是生成器的基本原理，它们只被期望生成*一次*序列。

此外，您不能简单地存储生成器以用于记忆目的，因为基础列表*可能会更改*。在几乎所有的记忆用例中，您应该存储列表。生成器通常只是一种有效转换或过滤底层序列的方法，并不代表您要记忆的数据本身。就好像你在存储一个函数，而不是它的输出。在您的特定情况下，如果您所做的所有事情都是`chain()`用来连接现有列表，请*直接存储这些列表*。

请注意，这使生成器能够生成无穷无尽的序列，因此在转换为列表时要小心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T11:13:14.407

试试[itertools.tee](http://docs.python.org/2/library/itertools.html#itertools.tee)：

```
import itertools
a = itertools.chain([1, 2], [3, 4])
a, b = itertools.tee(a)
print list(b) # => [1, 2, 3, 4]
a, b = itertools.tee(a)
print list(b) # => [1, 2, 3, 4] 
```

# java - 休眠中的多对一，获取列类型

> ID：13156519
> 
> 赞同：0
> 
> 时间：2012-10-31T11:09:48.447
> 
> 标签：java, hibernate, properties

在 Hibernate 中，当我得到简单的 Pojo 时，例如用户：

```
private class User{
   private String name;
} 
```

当我想获得“名称”的属性时，只需使用：

```
sessionFactory.getClassMetadata(User.class).getPropertyType("name") 
```

但是当我向我的用户添加一个类 Grou 时：

```
private class User{
   private String name;
   private Group group;
} 
```

我以前的代码：

```
 sessionFactory.getClassMetadata(User.class).getPropertyType("group.name") 
```

不起作用。有什么办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:45:01.607

为了`group.name`工作，您还必须为 Group 类指定映射。如果您已经指定了映射但仍然无法正常工作，请在此处共享映射文件。问题可能仅存在于映射中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:23:12.600

Split your query `group.name` into the corresponding parts `group` and `name`.

```
Class<?> currentClass = User.class;
for(String field: "group.name".split("\\Q.\\E")) {
    currentClass = sessionFactory.getClassMetadata(currentClass).getPropertyType(field);
} 
```

# objective-c - 为什么当我隐藏并再次显示 iOS 工具栏视图时，它会添加到我的加载视图之上？

> ID：13156523
> 
> 赞同：0
> 
> 时间：2012-10-31T11:09:58.667
> 
> 标签：objective-c, ios, xcode, uiview

1.  我有一个基于导航的普通 iOS 应用程序
2.  我有“加载视图”，我从我的应用程序委托启动并在整个应用程序中使用，只需显示和隐藏它。
3.  这工作正常，但是一旦我在应用程序的一个视图中隐藏底部工具栏并再次显示它，工具栏现在似乎显示在我的通用“加载视图”顶部

![第一个视图](../Images/71376447be7eaf2ffa1f03836cb3498c.png)![它应该如何工作](../Images/022c97b1734084142c1eed0b1cbe36ec.png)![损坏的版本 - 工具栏现在似乎与加载视图重叠](../Images/d69d5ffc94d6bfc7463a6794da47da28.png)

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:19:05.107

你如何添加你的底部栏？显然不是视图本身，对吧？比它可能在覆盖之下。

此外，您应该使用一个额外的窗口来加载叠加层。那将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:25:44.127

我基本上最终删除了加载视图并每次重新创建它。它现在每次都出现在视图层次结构的顶部。这解决了问题。

# javascript - 动态添加内容后如何重新定位 jQuery Mobile 对话框页面？

> ID：13156526
> 
> 赞同：0
> 
> 时间：2012-10-31T11:10:07.873
> 
> 标签：javascript, jquery-mobile, modal-dialog

动态添加内容后如何重新定位 jQuery Mobile 对话框页面？我需要它再次回到屏幕中央。谢谢！

编辑：添加的内容是将对话窗口放大到底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:57:49.747

发现需要使用 .ui-dialog-contain 来抓取对话窗口。比简单的 jQuery 就足够了……

```
function reCenter() {
    $('#box').find('.ui-dialog-contain').css("position","absolute");
    $('#box').find('.ui-dialog-contain').css("top", Math.max(0, (($(window).height()/2 - $('#box').find('.ui-dialog-contain').outerHeight()) / 2)) + "px");
    $('#box').find('.ui-dialog-contain').css("left", Math.max(0, (($(window).width() - $('#box').find('.ui-dialog-contain').outerWidth()) / 2) + $(window).scrollLeft()) + "px");
} 
```

# android - Android：为什么我无法为 TextView 背景使用选择器

> ID：13156529
> 
> 赞同：3
> 
> 时间：2012-10-31T11:10:35.687
> 
> 标签：android, selector

我的选择器是：

```
<item android:state_pressed="true" android:color="@color/bg_grey"/>
<item android:state_focused="true" android:color="@color/bg_grey"/>
<item android:color="@color/white"/> 
```

我的 TextView 为：

```
 <TextView
        android:id="@+id/tv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:background="@drawable/textview_selector"
        android:padding="5dp"
        android:text="Some Text"
        android:textColor="@color/text_grey"
        android:textSize="16dp" /> 
```

这样我得到：

```
android.view.InflateException: Binary xml file line #68: Error inflating class <unknown> 
```

如果我使用这个选择器作为`android:textColor="@drawable/textview_selector"`它的工作正常

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T11:14:34.613

这里的问题是您不能使用颜色选择器定义背景颜色，您需要一个可绘制的选择器。因此，必要的更改如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_pressed="true"
        android:drawable="@drawable/selected_state" />
</selector> 
```

您还需要将该资源移动到可绘制目录，因为它本身不是颜色选择器，因此更有意义。

然后你必须像这样创建 res/drawable/selected_state.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <solid android:color="@color/bg_grey" />
</shape> 
```

最后，你会像这样使用它：

```
android:background="@drawable/selector" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:02:21.253

您正在定义 Color 代替 Selectors xml 中的背景可绘制对象，请尝试使用可绘制的背景

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T04:39:27.560

您只需要确保颜色在 colors.xml 文件中，并且不要将十六进制颜色直接放入选择器项中。

my_selector.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:drawable="@color/category_item_selected_color" android:state_selected="true"/>
        <item android:drawable="@color/category_item_selected_color" android:state_pressed="true"/>
        <item android:drawable="@color/white" />
    </selector> 
```

并使您的文本视图看起来像这样：

```
 <TextView
    android:id="@+id/tv_name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:letterSpacing="0.05"
    android:textColor="#000000"
    android:gravity="center"
    android:textSize="17sp"
    tools:text="New In"
    android:clickable="true"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:background="@drawable/my_selector"
    android:layout_gravity="center"
    /> 
```

# java - Hadoop安装错误

> ID：13156531
> 
> 赞同：0
> 
> 时间：2012-10-31T11:10:50.490
> 
> 标签：java, python, apache, hadoop, hadoop-streaming

我正在尝试通过查看[此处](http://hadoop.apache.org/docs/r0.15.2/quickstart.html)`Hadoop`安装在 Fedora 机器上

1.  安装了java（并验证了java是否存在`java -version`）并且它存在
2.  我安装了 ssh（因为它是 linux）
3.  `hadoop 1.0.4`从[这里](http://apache.techartifact.com/mirror/hadoop/common/hadoop-1.0.4/)下载最新版本

我已经按照安装教程（上面给出的链接）中显示的过程如下

```
$ mkdir input 
$ cp conf/*.xml input 
$ bin/hadoop jar hadoop-examples.1.0.4.jar grep input output 'dfs[a-z.]+' 
```

然后我收到以下错误，我无法理解

```
sh-4.2$ bin/hadoop jar hadoop-examples-1.0.4.jar grep input output 'dfs[a-z.]+'
12/10/31 16:14:35 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/10/31 16:14:35 WARN snappy.LoadSnappy: Snappy native library not loaded
12/10/31 16:14:35 INFO mapred.FileInputFormat: Total input paths to process : 8
12/10/31 16:14:35 INFO mapred.JobClient: Cleaning up the staging area file:/tmp/hadoop-thomas/mapred/staging/shivakrishnab-857393825/.staging/job_local_0001
12/10/31 16:14:35 ERROR security.UserGroupInformation: PriviledgedActionException as:thomas cause:java.io.IOException: Not a file: file:/home/local/thomas/Hadoop/hadoop-1.0.4/input/conf
java.io.IOException: Not a file: file:/home/local/thomas/Hadoop/hadoop-1.0.4/input/conf
    at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:215)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:989)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:981)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    at org.apache.hadoop.examples.Grep.run(Grep.java:69)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.examples.Grep.main(Grep.java:93)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
    at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
    at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

谁能让我知道我的机器/或代码有什么问题，如何避免这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:15:55.520

这可能与 JVM 有关，并且 Hadoop（某些版本）中的文件权限存在已知问题。所以请查看此链接：

```
 https://issues.apache.org/jira/browse/HADOOP-7682 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:07:44.763

首先，ssh 预装并不意味着它已经配置好了。您需要 ssh 和 sshd 以及密钥对。它应该是无密码的，“最好”。只需确保您能够 ssh 托管而不会出现任何错误。此外，请确保所有 hadoop 守护程序都运行良好。如果我们可以看看您的错误会更好日志。我已经在[此处](http://cloudfront.blogspot.in/2012/07/how-to-configure-hadoop.html)编写了配置 hadoop 的完整过程，以防您需要任何帮助。

# android - Android ASR 多定位器

> ID：13156534
> 
> 赞同：1
> 
> 时间：2012-10-31T11:10:52.460
> 
> 标签：android, ios, speech-recognition

我正在寻找可以同时处理许多 locutors 的 Android 自动语音识别解决方案。我需要一个能够理解谁在说什么的解决方案。

例如，如果我的应用前面有两个用户，如果他们同时说话，我需要知道谁说“是”，谁说“不”。我的语法很简单，如果有帮助的话......

我已经测试了 Android Recognizer Intent 并实现了 SpeechRecognizer，所以我已经可以识别这些单词，但我无法将它们与特定的 locutors 相关联。

顺便说一句，如果您知道这种适用于其他平台（例如 iOS 或基于 Web 的应用程序）的解决方案，我也会接受 :)。

谢谢你。

# ruby - Ruby 1.9.3 - 由于某种原因无法加载此类文件

> ID：13156535
> 
> 赞同：0
> 
> 时间：2012-10-31T11:10:54.140
> 
> 标签：ruby, gem, ruby-1.9

Ruby 1.9.3 非常简单的代码和我无法处理的非常简单的问题：

```
gem list --local
nokogiri (1.5.5)

gem q --local
nokogiri (1.5.5) 
```

但是一个红宝石脚本（不是Rails）：

```
require 'nokogiri'
doc = Nokogiri.XML("some valid xml....") 
```

给我

```
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- nokogiri (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/alex/test.rb:3:in `<main>'
[Finished in 0.1s with exit code 1] 
```

我知道没有必要使用`require 'rubygems'`，但即使我这样做，它也不起作用。

```
gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/alex/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /home/alex/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /home/alex/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/alex/.rvm/gems/ruby-1.9.3-p194
     - /home/alex/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/

gem which nokogiri
/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5/lib/nokogiri.rb 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:45:06.093

这是因为错误的 Sublime Text 构建系统。正确的在这里[How to run ruby​​ files in sublime-text-2](https://stackoverflow.com/questions/11851566/how-to-run-ruby-files-in-sublime-text-2)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-31T11:32:42.443

您需要将 Nokogiri 添加到 Gemfile（使用 gem 'nokogiri' 行）。

# collections - 如何在 groovy 地图中使用正则表达式

> ID：13156536
> 
> 赞同：1
> 
> 时间：2012-10-31T11:10:54.160
> 
> 标签：collections, groovy, map

我有一张类似的地图。

```
 xxx-10.name ='welcome'
     xxx-10.age  ='12'
     xxx-10.std  ='2nd'

     xxx-12.name ='welcome'
     xxx-12.age  ='12'
     xxx-12.std  ='2nd'

     yyy-10.name ='welcome'
     yyy-10.age  ='12'
     yyy-10.std  ='2nd'

     yyy-12.name ='welcome'
     yyy-12.age  ='12'
     yyy-12.std  ='2nd' 
```

wen 用户给 xxx 我必须返回包含所有 xxx 条目的子图，而不管与之关联的数字是多少。有没有办法使用正则表达式来实现这一点？或者没有迭代键？

SubMap 我可以使用该实用程序获得..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:31:20.817

groovy 中有一个用于集合的过滤器功能。见[API](http://groovy.codehaus.org/groovy-jdk/java/util/Map.html#findAll%28groovy.lang.Closure%29)

```
def result = [a:1, b:2, c:4, d:5].findAll { it.value % 2 == 0 }
assert result.every { it instanceof Map.Entry }
assert result*.key == ["b", "c"]
assert result*.value == [2, 4] 
```

在您`yourSearchString`使用[String.startsWith()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)搜索时：

```
map.findAll { it.key.startsWith(yourSearchString) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:21:31.387

这应该做你想要的。

```
def fileContents = '''xxx-10.name ='welcome'
                     |xxx-10.age  ='12'
                     |xxx-10.std  ='2nd'
                     |xxx-12.name ='welcome'
                     |xxx-12.age  ='12'
                     |xxx-12.std  ='2nd'
                     |yyy-10.name ='welcome'
                     |yyy-10.age  ='12'
                     |yyy-10.std  ='2nd'
                     |yyy-12.name ='welcome'
                     |yyy-12.age  ='12'
                     |yyy-12.std  ='2nd'''.stripMargin()

// Get a Reader for the String (this could be a File.withReader)
Map map = new StringReader( fileContents ).with {
  // Create a new Properties object
  new Properties().with { p ->
    // Load the properties from the reader
    load( it )
    // Then for each name, inject into a map
    propertyNames().collectEntries {
      // Strip quotes off the values
      [ (it): p[ it ][ 1..-2 ] ]
    }
  }
}

findByPrefix = { pref ->
  map.findAll { k, v ->
    k.startsWith( pref )
  }
}

findByPrefix( 'xxx' ) 
```

祈祷你不要删除这个问题;-)

# javascript - 如何使用 ExtJs 在单个元素的左侧获取标签？

> ID：13156537
> 
> 赞同：1
> 
> 时间：2012-10-31T11:10:55.830
> 
> 标签：javascript, extjs

我有一个标签：

```
var tabs = new Ext.TabPanel({
                                xtype:'tabpanel',
                                activeTab: 0,
                                autoScroll: false,
                            //  layoutOnTabChange: true,
                                  defaults:{
                                    bodyPadding: 10,
                                    layout: 'anchor'
                                },
                                items: [{
                                    title:'Общие сведения',
                                    layout:'column',
                                    items:[{
                                        columnWidth:.5,
                                        layout: 'form',
                                        items: [{
                                            xtype:'textfield',
                                            fieldLabel: 'Площадь кв.м.',
                                            name: 'area',
                                            anchor:'80%'
                                        },{
                                            labelAlign: 'left',
                                            xtype:'checkbox',
                                            fieldLabel: 'Межевание',
                                            name: 'mezj',
                                            anchor:'80%'
                                        },{
                                            xtype:'textfield',
                                            fieldLabel: 'Кадастровая стоимость',
                                            name: 'paid',
                                            anchor:'80%'
                                        },{
                                            xtype:'textfield',
                                            fieldLabel: 'Тип переоформленного права',
                                            name: 'right',
                                            anchor:'80%'
                                        },{
                                            xtype:'textfield',
                                            fieldLabel: 'Код документа',
                                            name: 'doc_id',
                                            anchor:'80%'
                                        }]
                                    }
////**///// 
```

以及它的外观：

![在此处输入图像描述](../Images/8db59f9e218133742de426942ae0703e.png)

您会看到所有标签都位于顶部。没关系，但我想把复选框的标签放在右边。

```
xtype:'checkbox',
fieldLabel: 'Межевание',
name: 'mezj',
anchor:'80%',
labelAlign: 'left', 
```

我用这个但没有帮助。IOts可以改变单个元素的labelAlign吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:19:51.843

使用 boxLabel 属性而不是 fieldLabel 将您的标签放在复选框的右侧。

# gradle - 由于 delta_set 中没有默认值，如何解决 dbdeploy 中的 SchemaVersionTrackingException？

> ID：13156538
> 
> 赞同：2
> 
> 时间：2012-10-31T11:11:00.290
> 
> 标签：gradle, database-migration, dbdeploy

我正在尝试进行自动数据库迁移。我正在使用 dbdeploy 。我按照此链接[http://blog.codeborne.com/2012/09/using-dbdeploy-in-gradle.html中的步骤操作](http://blog.codeborne.com/2012/09/using-dbdeploy-in-gradle.html)

我将更改日志表创建为：

```
CREATE TABLE changelog (
  change_number INTEGER NOT NULL,
  delta_set VARCHAR(10) NOT NULL,
  start_dt TIMESTAMP NOT NULL,
  complete_dt TIMESTAMP NULL,
  applied_by VARCHAR(100) NOT NULL,
  description VARCHAR(500) NOT NULL
);

ALTER TABLE changelog ADD CONSTRAINT Pkchangelog PRIMARY KEY (change_number, delta_set); 
```

build.gradle 中的 updateDatabase 任务是：

```
task updateDatabase << {
    ant.dbdeploy(driver: dbDriver,
            url: dbUrl,
            userid: dbUsername,
            password: dbPassword,
            dir: './src/main/resources/deploy/sql',
            dbms: 'mysql'

    )
} 
```

当我执行 gradle updateDatabase 时，我得到 com.dbdeploy.exceptions.SchemaVersionTrackingException：无法更新更改日志，因为：字段 'delta_set' 没有默认值。

我尝试在更改表日志文件中将“main”指定为默认值：

```
delta_set VARCHAR(10) NOT NULL DEFAULT 'Main' 
```

但是，我仍然有同样的例外。

我还删除了 delta_set 属性，我得到了同样的异常。这真的让我很困惑。

我对数据迁移完全陌生。因此，任何有关此错误以及我应该如何处理的帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:57:43.460

DBDeploy 文档对此不是很明确，但`changelog`表格式在 2.X 和 3.X 版本之间发生了变化（请参阅[升级说明](http://code.google.com/p/dbdeploy/wiki/UpgradingFromVersionTwo)）。我怀疑您使用的是 DBDeploy 3.X。

你需要：

1.  删除旧`changelog`表：

    ```
    DROP TABLE changelog; 
    ```

2.  使用新格式重新创建它：

    ```
    CREATE TABLE changelog (
      change_number INTEGER NOT NULL,
      complete_dt TIMESTAMP NOT NULL,
      applied_by VARCHAR(100) NOT NULL,
      description VARCHAR(500) NOT NULL
    );

    ALTER TABLE changelog ADD CONSTRAINT Pkchangelog PRIMARY KEY (change_number); 
    ```

在此之后，一切都应该工作。

# string - 在 MSBuild 中构建一个字符串作为基本字符串 n 次的串联

> ID：13156540
> 
> 赞同：2
> 
> 时间：2012-10-31T11:11:02.613
> 
> 标签：string, msbuild, msbuild-4.0

我在 MSBuild 的一个属性中有一个数字“n”。我还有一个字符串“Str”，需要复制 n 次才能获得最终字符串，即“Str”重复 n 次。

例如。如果 n 为 3 且 Str 为“abc”，我想要获得的是“abcabcabc”

由于无法在 MSBuild 中循环，我不知道如何实现这一点。也许有一个项目组，但我如何根据包含“n”计数的属性创建一个？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T18:32:29.707

要创建重复 n 次的字符串，您也可以这样做（至少在 MSBuild Tools v4.0 中）：

```
<SomeRepeatedString>$([System.String]::New("-", 40))</SomeRepeatedString> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:22:55.937

通常对于这样的事情，我决定使用内联 C#，因为它比在互联网上搜索找到“真正的”msbuild 解决方案花费的时间更少；干得好：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <MyString>abc</MyString>
    <Count>3</Count>
  </PropertyGroup>

  <UsingTask TaskName="RepeatString" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
    <ParameterGroup>
      <s ParameterType="System.String" Required="true" />
      <n ParameterType="System.Int32" Required="true" />
      <result ParameterType="System.String" Output="true" />
    </ParameterGroup>
    <Task>
      <Code Type="Fragment" Language="cs"><![CDATA[
        result = string.Concat( Enumerable.Repeat( s, n ) );
        ]]></Code>
    </Task>
  </UsingTask>

  <Target Name="doit">
    <RepeatString s="$(MyString)" n="$(Count)">
      <Output PropertyName="result" TaskParameter="result" />
    </RepeatString>
    <Message Text="Result = $(result)"/>
  </Target>

</Project> 
```

# android - 如何使用 CheckBox 取消屏蔽 editText 输入类型

> ID：13156542
> 
> 赞同：0
> 
> 时间：2012-10-31T11:11:03.237
> 
> 标签：android, android-checkbox

我需要使用复选框在我的 android 应用程序中添加显示密码功能。有没有一种特殊的方法可以做到这一点。我看到有一个可以使用的方法叫做 SetTransformationMethod 什么的。

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:18:12.733

使用 EditText 输入密码。和一个复选框来显示密码与否。

当它检查时，它显示密码。但是当它不检查时，它确实显示了星星。

这段代码应该适合你：

```
checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked) {
                    password.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);
                } else {
                    password.setInputType(129);
                }
            }
        }); 
```

129是设置android时设置的输入类型：inputType="textPassword"

希望这对您有所帮助。

# javascript - 连接矩形的线的算法

> ID：13156548
> 
> 赞同：5
> 
> 时间：2012-10-31T11:11:22.410
> 
> 标签：javascript, connection, gantt-chart

我正在寻找用于在矩形之间绘制连接线的算法或示例解决方案。在我的情况下，矩形是元素甘特图，连接显示依赖关系。我正在使用 Raphael JS 库来绘制矩形和线条。所以 JavaScript 的解决方案是最好的，但元语言或其他类似 JS 的算法也很好。

我找到[了一个看起来不错的例子，](http://sammyjoeosborne.com/Examples/Connector/ConnectorExample.html)但也许有人知道别的东西。

就我而言，有一些相关要求：

1.  只允许水平线和垂直线
2.  线不应相互交叉
3.  线条不应该跨越矩形我希望实现类似的东西：

![Visio 甘特图](../Images/c55484e55d7060fba51742accb96a4cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:52:08.373

看起来您正在寻找**javascript 甘特**图。看看这个：

[http://dhtmlx.com/docs/products/dhtmlxGantt/index.shtml](http://dhtmlx.com/docs/products/dhtmlxGantt/index.shtml)

*   可编辑图表
*   使用 JavaScript API 完全控制
*   多浏览器/多平台支持
*   从 XML 加载
*   序列化为 XML
*   可移动/可调整大小的活动
*   内置编辑菜单，以及自定义 dhtmlxMenu 支持
*   扩展属性弹出窗口
*   可选的树视图
*   可定制的任务订阅
*   百分比完成的阴影
*   依赖箭头
*   快速流畅的渲染
*   内置约束检查
*   打印友好模式

[http://www.bryntum.com/products/gantt/](http://www.bryntum.com/products/gantt/)

*   完全建立在网络标准 - HTML/CSS/JavaScript
*   与任何服务器（PHP、Java、ASP.NET）一起使用
*   支持依赖关系、领先/滞后和关键路径
*   导出为 PDF/PNG，MS 项目导入
*   项目、任务和资源日历
*   使用 Siesta 进行单元测试

[http://gxt-scheduler.com/](http://gxt-scheduler.com/)

*   完全基于 Web 标准 - HTML/CSS/GWT
*   与任何类型的后端集成
*   完全可主题化，只需要基本的 HTML/CSS 知识
*   轻松拖放和调整项目大小
*   支持所有主流浏览器

[http://gantter.com/](http://gantter.com/)

*   谷歌驱动集成
*   免费的基于云的项目调度

[http://gantt.twproject.com/](http://gantt.twproject.com/)

*   就地编辑
*   拖放
*   缩放
*   做/撤消
*   多重依赖
*   完整编辑
*   日期快捷方式
*   CSS皮肤
*   多浏览器
*   资源编辑
*   多重赋值
*   里程碑
*   以 JSON 格式导出数据
*   调整大小和滚动

# bash - shell 脚本调整 - 无法与 cron 一起正常工作

> ID：13156550
> 
> 赞同：0
> 
> 时间：2012-10-31T11:11:27.977
> 
> 标签：bash, shell, cron

我使用这个 bash 脚本来检查服务是否运行，如果运行该脚本将退出，否则它将运行另一个脚本，该脚本将执行一些命令，一旦完成，它将退出我的问题是当我手动运行我的脚本时它工作正常但是当我用 cron 运行它，它没有运行并且没有正确执行这是我的脚本

```
 #!/bin/sh
  SERVICE='loop2.sh'

  if ps ax | grep -v grep | grep $SERVICE > /dev/null
 then
     echo "$SERVICE service running, everything is fine"
 else
 /home//www/loop2.sh
 fi 
```

对我的脚本进行任何调整以在 cron 中正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:17:11.057

你说的不是很具体。你看到什么错误？

请注意，进程在具有缩减环境的 cron 下运行。特别是 PATH 等环境变量将从您的交互式 shell 中大大减少。

1.  记录您的脚本 stdout/stderr 例如`myscript 2>&1 >/tmp/script.log`
2.  `env`通过脚本中的命令检查您的环境是否符合预期
3.  这个脚本*真的*做你想要的吗？并与您希望的 cron 交互？如果您的服务没有运行，您会生成一个新服务，但我希望您将其放在后台，从而使其成为守护进程而不是进程的（孙）子`cron`进程
4.  您的脚本是否可以由下执行的任何用户执行`cron`？

# jsp - 如何使用 JSP 和 servlet 构建目录和文件层次结构上传功能？

> ID：13156552
> 
> 赞同：0
> 
> 时间：2012-10-31T11:11:35.017
> 
> 标签：jsp, servlets, file-upload

我正在使用 JSP 和 servlet 构建应用程序。我正在尝试在其中构建文件上传功能。我想确保将我在本地创建的文件夹结构传输到 Apache Web 服务器。有什么方法可以实现这一目标？我有一个表单，我在其中使用输入文件控件提供特定文件夹的路径。当我提交表单时，应在 Web 服务器上创建表单中所选文件夹下的任何文件和文件夹层次结构。如果文件夹包含任何文件，则文件应自动传输到服务器。有可能实现这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:45:49.920

上传文件时，您通常只会获得文件名和文件内容。您通常也不会获得整个客户端磁盘文件系统路径。只有糟糕的 MSIE 网络浏览器会由于安全错误而错误地发送此信息，但您应该将其关闭`/`或`\`仅以文件名结束，或者如果您使用的是 Apache Commons FileUpload，则由`FilenameUtils#getName()`.

至于服务器端的文件夹结构，只需将上传的文件以唯一的名称存储在固定文件夹中即可。不要不必要地创建其他文件夹，除非该文件夹应该识别登录用户或其他东西，当然。您可以使用`File#createTempFile()`基于文件名前缀和文件名后缀（扩展名）来创建唯一文件名，以避免偶然覆盖相同名称的上传文件。

至于服务器端上传文件夹位置，请确保它不在服务器文件夹结构中的 webapp 部署文件夹中。每次重新部署 webapp 时，这都会丢失，原因很简单，上传后新添加/更改的文件不包含在要部署的 WAR 中。

至于提供文件，只需将上传文件夹位置作为另一个虚拟主机添加到服务器配置中。不清楚您对“Apache Web 服务器”的确切含义是什么，因为 Apache 是一家构建许多软件产品的大型软件公司。你的意思是 Apache HTTPD 吗？阿帕奇 Tomcat？阿帕奇汤姆EE？阿帕奇杰罗尼莫？等等。当您在 JSP/Servlet 上下文中讨论时，我将假设 Apache Tomcat。然后前往这个答案：[我如何在 java webapp 中的服务器上保存和检索图像](https://stackoverflow.com/questions/8516387/how-i-save-and-retrieve-an-image-on-my-server/8521981#8521981)。

# python - 避免在 pyplot 中出现重合的线条和标记

> ID：13156563
> 
> 赞同：1
> 
> 时间：2012-10-31T11:12:09.713
> 
> 标签：python, plot, matplotlib

我有两个基于类似事实的问题。如果我使用 Matplotlib 绘制恰好部分位于该特定区域中的线，则仅显示其中之一。

示例一

```
import matplotlib.pyplot as plt
plt.plot([1,2],[1,1],'r-')
plt.plot([1.5,3],[1,1],'b-')
plt.show() 
```

示例二

```
import matplotlib.pyplot as plt
plt.plot([0.5,3],[0,0],'b-',marker='o')
ax = gca()
ax.set_xlim(0.4)
ax.spines['bottom'].set_position(('data',0))
ax.spines['left'].set_position(('data',0))
plt.show() 
```

我想让 Matplotlib 将它们分开 1 px，以便可以看到两条线，如果这无论如何可能的话。

第二件事与标记相同。我希望 matplotlib 设置为标记，这些标记必须被绘制到欧几里得空间中的同一个位置才能相互绘制，否则它们几乎不可见。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:37:39.773

少量更改数据确实是冒险的（而且冒险，我的意思是不道德的），因为您正在不透明地更改数据。如果你要移动数据，你应该大量移动，这样很明显。

更好的解决方案是使用虚线，例如：

```
import matplotlib.pyplot as plt
plt.plot([1,2],[1,1],'r-')
plt.plot([1.5,3],[1,1],'b--')
plt.show() 
```

它在实心红线（[线条样式示例](http://matplotlib.org/examples/pylab_examples/line_styles.html)）顶部为您提供了一条蓝色虚线。与`markevery`( [doc](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.plot) ) 一起，您可以将标记点沿线展开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T11:52:14.607

您可以编写一个函数来将所有数据点偏移一个小值并像这样绘制它们。

```
import matplotlib.pyplot as plt

def offsetPlot(ax,x,y,*args,**kwargs):
    ylim = ax.get_ylim()
    offset = (ylim[1]-ylim[0])/125
    return [ax.plot(x,[q+offset for q in y],*args,**kwargs)]

if __name__ == '__main__':
    fig = plt.figure()
    ax  = fig.add_subplot(111)    
    ax.set_ylim((0,1.25))
    ax.plot([1,2],[1,1],'r-')
    offsetPlot(ax,[1.5,3],[1,1],color='b',linestyle='-') #'b-' is also a valid argument
    plt.show() 
```

# asp.net - MVC - 工作单元 - 重复记录问题

> ID：13156568
> 
> 赞同：0
> 
> 时间：2012-10-31T11:12:29.430
> 
> 标签：asp.net, asp.net-mvc, unit-of-work

我正在处理这个项目，我们有一个保存实体的表单，在保存它之前，我们通过检查数据库上实体的唯一属性来检查记录是否不存在。

这工作得很好，除了在我们非常快速地多次按下提交表单按钮的情况下。在这种情况下，数据库检查不起作用，它会在数据库中创建多个记录条目。

我认为这是应用程序的设计问题，但我是工作单元模式的新手，我不明白为什么不工作。

这是我们在服务层做的检查：

```
 IEnumerable<Story> Stories = _unitOfWork.StoryRepository.Get(s => e.GUID.Equals(GUID));
    if (Stories.Count() > 0)
    {
        _unitOfWork. StoryRepository.Insert(newStory);
        _unitOfWork.Save();
    } 
```

任何人都可以帮助解决这个问题吗？

顺便说一句，我不是基于 javascript 的解决方案，只是服务器端。

谢谢

编辑：该服务使用 ninject 并具有传递工作单元的构造函数：

```
 private IUnitOfWork _unitOfWork;

    public StoryService(IUnitOfWork unitOfWork)
    {
        _unitOfWork = unitOfWork;
    } 
```

我的 UnitOfWork 类被声明为：

```
public class UnitOfWork : Disposable, IUnitOfWork 
```

数据库工厂.cs：

```
public class DatabaseFactory : Disposable, IDatabaseFactory
{
    private myContext _dataContext;
    private readonly object _door = new object();

    public myContext Get()
    {
        lock (_door)
        {
            return _dataContext ?? (_dataContext = new myContext());
        }
    }

    protected override void DisposeCore()
    {
        if (_dataContext != null)
            _dataContext.Dispose();
    }
} 
```

每次我按照 Pluc 的建议调用我的服务方法时，我是否应该创建一个 UnitOfWork 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:01:13.790

很有可能，您过早地创建了工作单元。您的工作单元应该是一个 IDisposable 实体，以便您可以在需要时使用它，然后立即摆脱它。对于这种情况，使用语句变得非常好：

```
using(var unitOfWork = new UnitOfWork())
{
    IEnumerable<Story> Stories = unitOfWork.StoryRepository.Get(s => e.GUID.Equals(GUID));
    if (Stories.Count() > 0)
    {
        unitOfWork.StoryRepository.Insert(newStory);
        unitOfWork.Save();
    }
} 
```

如果你的 UnitOfWork 是很早就创建的，并且 StoryRepository 很早就在另一个场合使用，那么 Stories 已经加载。如果您根据页面加载速度单击提交两次，那么您自己就有一个很好的竞争条件，如果您来自请求 #1 的 UnitOfWork 在请求 #2 延迟加载他之前没有保存他的上下文，那么这两个请求都会有完全相同的故事列表和条件都将通过。

如果您根据需要创建 UnitOfWork，它甚至不会加载 Stories，因此，进行不良条件测试的唯一窗口是 .Get() 存储库方法和 unitOfWork.Save 之间的 0.001ms ()。

请始终记住，UnitOfWork 可以通过一次批处理所有查询来优化您的数据访问。它不是数据缓存工具。创建它，使用它，倾倒它。在单个 Web 请求中创建两次或更多次没有害处。

# html - HTTPS 到 HTTP htaccess 重定向仅用于主页

> ID：13156574
> 
> 赞同：1
> 
> 时间：2012-10-31T11:12:40.943
> 
> 标签：html, .htaccess, http, redirect, https

我需要帮助才能将我正在构建的网站的主页从 HTTPS 重定向到 HTTP。

我正在构建的网站正在使用购物车 66，不幸的是，当网站在访问安全购物车页面后重定向回主页时，它停留在 HTTPS 中，并且首页的某些元素不再正确显示。

我认为进行重定向将是解决此问题的最佳选择。虽然我对其他建议持开放态度。

我已经在线搜索了解决方案，但我只能找到整个站点从 HTTPS 到 HTTP 的重定向，而不仅仅是单个页面或与我尝试做的相反的页面。我对 htaccess 太菜鸟了，无法尝试从我能找到的点点滴滴中逆向工程解决方案。

我还想保留向重定向添加多个页面的选项，以防万一我发现更多页面最终出现损坏。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:06:30.237

正如 apache wiki 上所建议的那样：

[http://wiki.apache.org/httpd/RewriteHTTPToHTTPS](http://wiki.apache.org/httpd/RewriteHTTPToHTTPS)

你可以使用：

```
RewriteEngine On
# This will enable the Rewrite capabilities

RewriteCond %{HTTPS} on
# This checks to make sure the connection is HTTPS

RewriteRule ^/?homepage\.html http://%{SERVER_NAME}/homepage\.html [R,L] 
```

将 homepage.html 更改为您的主页名称。

# css - 为什么图像精灵采用负坐标作为背景位置

> ID：13156575
> 
> 赞同：1
> 
> 时间：2012-10-31T11:12:41.410
> 
> 标签：css, css-sprites

我知道图像精灵中 css 中的流行功能。但我不明白为什么我们必须将背景位置坐标指定为负值。我知道对于任何图像精灵，左上角都是原点。我不明白为什么会这样？为什么不是其他角落，为什么不是图像精灵的中心。如果有任何机构知道这个问题的答案。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T11:45:32.863

我们需要一个坐标系来描述图像。计算机成像中使用的坐标系基于位图，而位图根据定义基于网格（行和列），其原点 (x = 0, y = 0) 在左上角（与笛卡尔相反）坐标系，其正空间的原点位于左下方。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:16:12.627

您使用负坐标是因为您希望图像“稍后开始”。

例如，我有一个 100 像素 x 100 像素的图像，以及一个从坐标 40,40 开始的正方形

我想将图像向左和顶部移动 40 像素，所以正方形进入我的视野，我这样做`background:url('sprite.png') -40px -40px;`

# wkhtmltopdf - 如何在特殊标签上重置 wkhtmltopdf 页码

> ID：13156581
> 
> 赞同：13
> 
> 时间：2012-10-31T11:12:58.760
> 
> 标签：wkhtmltopdf

当我在文档正文中获得一个特殊标签时，我正在尝试重置页码（例如，当我得到 a 时`<DIV STYLE="page-break-before:always" />`，我希望下一页页脚说“x 的第 1 页”，其中 x 是下一个分页符之前的页面）

事实上，它应该和我拆分正文文档并单独转换它一样。

有没有办法做到这一点？

列出每个分页符及其页码可以解决这个问题，但我也不知道这是否可能。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-22T10:26:01.560

我想你可以先用一些脚本下载和修改 html 文件，或者只使用[C 库文档](http://wkhtmltopdf.org/libwkhtmltox/)。

顺便说一句，对于 html 文件到图片，我认为 phantomjs 比 xkhtmltopdf 更好。

# c++ - 二项式系数

> ID：13156584
> 
> 赞同：0
> 
> 时间：2012-10-31T11:13:04.503
> 
> 标签：c++, binomial-coefficients

我有一个计算二项式系数的代码，但是当数字大于 20 时，它开始计算错误，问题出在哪里？谢谢

```
#include <iostream>
using namespace std;

long int bin(long int x)
{
    if(x==0)
        return 1;
    long int r = x;
    for(int i = r-1;i>0;i--)
    {
        r = r*i;
    }
    return r;
}
int main()
{
    cout << "Write n and k: " << endl;
    long int n=0;
    long int k=0;
    cin >> n;
    cin >> k;
    long int result = 0;
    long int fn = bin(n);
    long int fk = bin(k);
    long int fnk = bin(n-k);

    result = fn/(fk*fnk);

    cout << endl << "C = " << result << endl;

    return 0;
} 
```

例如 12 和 5 = 792 这是正确的，但 20 和 4 = -2 这是不正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:16:05.013

您的`bin`函数计算阶乘。21 的阶乘不适合`long`.

您已经依赖于实现细节。`long`只需要 32 位，但在您的系统上是 64 位。如果它只有 32 位，那么您会很快失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:16:18.247

20！= 2432902008176640000，这远远超出了`long int`可以容纳的范围（通常为 2147483647）。改为使用`double`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T11:17:03.360

您正在使用计算 n 的阶乘

```
bin(n); 
```

当 n >=20 时，您将超过 long 的限制。

正如@SteveJessop 在评论中指出的那样，即使您使用**unsigned long long**（最长的定点类型），其范围从`0 to 18446744073709551615`

您可以使用 int-array 来存储您的结果，详见**[此处](http://www.cquestions.com/2010/08/factorial-of-big-numbers-in-c.html)**。

# php - Codeigniter 插入数据（带插入功能）

> ID：13156593
> 
> 赞同：0
> 
> 时间：2012-10-31T11:13:48.050
> 
> 标签：php, codeigniter

我有简单的模型，需要将数据插入到我的表中。当我使用 sql 和查询时一切正常，但是当我尝试使用插入函数时，我得到一个错误，我需要使用 set ??

我数据库中的 id 是自动递增的，日期是时间戳

```
class Article extends CI_Model {

private $id;
private $title;
private $text;
private $date;

public function __construct()
{
    $this->load->database();
}

public function save_article($title,$text)
{
    $this->title=$title;
    $this->text=$text;
    $this->id='';
    $this->load->helper('date');
    $this->date=now();
    print_r($this);
    //"INSERT INTO article VALUES ('','".$title."','".$text."',NOW())")
    $this->db->insert('articles',$this);
}
} 
```

> 文章对象（[id:Article:private] => [title:Article:private] => rrrrrrrrrrrr [text:Article:private] => rrrrrrrrrrrrrrrrrr [date:Article:private] => 1351680951）
> 
> 发生数据库错误
> 
> 您必须使用“set”方法来更新条目。
> 
> 文件名：C:\Program Files (x86)\EasyPHP-12.1\www\blog\system\database\DB_active_rec.php
> 
> 行号：1174

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:30:53.220

你的成员变量`Article`是`private`. Active Record 类无法使用`get_object_vars`.

```
private $id;
private $title;
private $text;
private $date; 
```

将它们作为`public`或传入一个键值对数组到`insert`.

# iphone - 我如何使用生成的 RSA 公钥以及如何在 iOS 中加密

> ID：13156599
> 
> 赞同：2
> 
> 时间：2012-10-31T11:14:05.997
> 
> 标签：iphone, objective-c, ios, security, encryption

您好，我是新手开发人员。刚刚给了我一个iOS项目，但我必须加密部分信息。

我必须使用 1024 位 RSA。他们给我的唯一东西是公钥：

```
BitStrength = 1024

RSAKeyValue

Modulus = xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Exponent = Xxxx

RSAKeyValue 
```

**示例：**未加密和加密的字符串

**未加密的字符串：**

```
Prueba de Encriptacion 
```

**上面的加密字符串：**

```
uaUbBBR6Ghx/6EaspBB1QD024uUZ7O+koeNd0PTAt/wnM5w8s8TqRSGnB9iK7oSyRce4BPuVzFzsB2P34/fq5MoyuKvPG6vDZp8Ck/GifZAOZN1dbCRgOdE8qboKcWYH3WcZieUfpBepBwR6usY2xWaH9/56PCeSaDgncSPGrWc=bcrcdoaSp0zSv6hKc0jqh2oyVtLOaMmSqLxNRVpD62ojwfkFFb8zTJVFBUpxNmDCU4b0xgP0iYu9rRVBlo0Yp2GhoCgz/cR9+PRwOXWJYoV4Qd1j7zHZDsMy7njE8hBoU6N6ZVYkEhIfQ8z1TqOQyWeNUcll3JqaHNEqsF4w0Io= 
```

我必须得到加密的字符串。*无需解密*

这是我第一次使用 RSA 加密和真相，我不知道该怎么做，也不明白使用发送给我的指数，因为我读到这个加密有效，但不知道如何实现 iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:25:01.670

这个问题可能对你有帮助

[Objective C 中的 RSA 实现](https://stackoverflow.com/questions/10222524/rsa-implementations-in-objective-c)

[(IOS) RSA 加密/解密 AES 密钥](http://www.example-code.com/ios/rsa_encryptKey.asp)

# php - wordpress 自定义 orderby 语句

> ID：13156602
> 
> 赞同：0
> 
> 时间：2012-10-31T11:14:13.323
> 
> 标签：php, wordpress, loops

我正在尝试显示一个自定义帖子类型列表，该列表按位于其自己表中的值排序。我正在使用一个名为 wti_like_posts 的插件，它允许用户通过拇指向上/向下的方式对帖子进行评分。

该表包含附加到它的分数和 post_id。我希望能够在查询中为“orderby”的现有选项添加一个选项“rating”，以便在我查询帖子时考虑该分数。

你知道这样做的好方法吗？我想我必须使用 add_filter，但我已经尝试过但无法弄清楚。任何帮助将不胜感激 ！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:09:36.877

您必须构建一个自定义 sql 查询来连接两个表以获得结果。

```
global $wpdb; 
$sql = "SELECT * FROM ".$wpdb->prefix."wp_posts, ".$wpdb->prefix."ratings_table WHERE wp_post.id = ratings_table.post_id";
$posts = $wpdb->get_results($sql);
echo "<ul>";
foreach ($posts as $post){
    echo '<li>'.$post->title.'|'.$post->score.'<br/>';
    echo '</li>';
}
echo "</ul>"; 
```

未测试！

您将不得不调整表和列名。

[更新] 可以使用 get_posts() 你必须将你的 orderby=rating&meta_key=foo 更改为 orderby=meta_value&meta_key=rating

见下文：

```
$args = array(
 'numberposts'     => 10,
 'offset'          => 0,
 'orderby'         => 'meta_value',
 'order'           => 'ASC', 
 'meta_key'        => 'rating', 
 'post_type'       => 'post',
 'post_status'     => 'publish' 
 );
 $results = get_posts( $args ); 
```

# subquery - 更新我从中子选择的表

> ID：13156607
> 
> 赞同：0
> 
> 时间：2012-10-31T11:14:20.733
> 
> 标签：subquery, sql-update

当我尝试更新 a_fees 表时，为什么会出现以下错误？据我所知，您不能将子选择标准建立在正在更新的表上吗？是因为 SQL 是向后读取的吗？我怎样才能解决这个问题？

**错误消息：1093 - 您不能在 FROM 子句中指定目标表 'a_fees' 进行更新**

```
UPDATE a_fees
SET active = 'N'
WHERE a_fees.fee_id IN
(
SELECT fee_id
FROM a_fees
WHERE verified = 'N'
HAVING audit_fees + audit_related_fees + tax_fees + other_fees < 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:32:42.840

HAVING 子句与 GROUP BY 子句结合使用，您必须在 HAVING 子句上使用 SUM 之类的聚合函数，如下所示：

```
SELECT fee_id
FROM a_fees
WHERE verified = 'N'
GROUP BY fee_id
HAVING SUM(audit_fees + audit_related_fees + tax_fees + other_fees) < 5000; 
```

this `sums autid_fees`, `audit_related_fees`,`tax_fees`和`other_fees`具有相同 fee_id 的每一行，然后检查它是否 < 5000。

但如果 fee_id 是唯一的，则意味着您必须求和的所有字段都在同一行，因此无需使用 GROUP BY 子句，您的查询可以简化为：

```
SELECT fee_id
FROM a_fees
WHERE
  verified = 'N'
  AND (audit_fees + audit_related_fees + tax_fees + other_fees) < 5000; 
```

然后您的 UPDATE 查询变为：

```
UPDATE a_fees
SET active = 'N'
WHERE a_fees.fee_id IN (
  SELECT fee_id
  FROM a_fees
  WHERE verified = 'N'
    AND audit_fees + audit_related_fees + tax_fees + other_fees < 5000); 
```

你是对的：MySql 不允许你更新你在选择部分使用的同一个表，你应该只使用 JOINS 重写更新查询。

但如果 fee_id 是唯一的，则无需使用子查询，最好只使用不带子查询的 UPDATE：

```
UPDATE a_fees
SET active = 'N'
WHERE verified = 'N'
  AND audit_fees + audit_related_fees + tax_fees + other_fees < 5000; 
```

# c# - c# webrequest 挂起

> ID：13156608
> 
> 赞同：3
> 
> 时间：2012-10-31T11:14:26.113
> 
> 标签：c#, .net

我正在做一个项目，它多次调用一个网址

```
request = (HttpWebRequest)WebRequest.Create(url);
request.GetResponse(); 
```

这是我的代码。它在一个循环中，它工作了 2 次，但在第三次迭代时它挂起。没有崩溃或错误。请帮忙。任何帮助将不胜感激。

错误：等待 20 分钟后。

```
System.Net.WebException was unhandled
Message=The operation has timed out
Source=System
StackTrace:
   at System.Net.HttpWebRequest.GetResponse()
   at ConsoleApplication1.Program.Main(String[] args) in C:\WorkSpace\ConsoleApplication1\ConsoleApplication1\Program.cs:line 48
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

内部异常：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:18:29.303

尝试以下操作：

```
var response = request.GetResponse();
//do stuff with response
response.Close(); 
```

该`WebResponse`实例持有活动连接，您必须在与同一服务器建立新连接之前关闭该连接。

你也可以用一个`using`子句来做到这一点，这完全取决于你：

```
using (var response = request.GetResponse())
{
    //do stuff with response
} 
```

# jquery - 使用 Stellar.js 垂直滚动修改水平位置

> ID：13156612
> 
> 赞同：1
> 
> 时间：2012-10-31T11:14:43.953
> 
> 标签：jquery, jquery-plugins, scroll, parallax

我在当前项目中使用**stellar.js**来生成视差滚动网页。

虽然我有一些使用默认功能的元素（在上下滚动时修改元素的垂直位置），**但我希望修改它以调整水平位置。**

可以在这里看到一个例子（即潜艇）： [http ://titanic.q-music.be/](http://titanic.q-music.be/)

我知道有“偏移”数据属性，但我不确定如何让它链接到滚动事件。有什么建议么？？？

提前感谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T22:10:23.043

您链接到的站点似乎实际上同时使用了 parralax.js ( [http://jonraasch.com/blog/scrolling-parallax-jquery-plugin](http://jonraasch.com/blog/scrolling-parallax-jquery-plugin) ) 和 scrollorama ( [http://johnpolacek.github.io/scrollorama/](http://johnpolacek.github.io/scrollorama/) ) .

通过使用 chrome 的开发人员工具并转到脚本选项卡，您可以确定正在使用哪些 javascript 库。

您可以查看 scrollorama 链接以获取有关如何使用它通过垂直滚动更改水平位置的更多信息。

# php - query_posts 在循环中从摘录和标题中创建不需要的链接

> ID：13156614
> 
> 赞同：0
> 
> 时间：2012-10-31T11:14:50.397
> 
> 标签：php, wordpress

出于某种原因，在第一次发布之后，从`the_excerpt`和检索到的内容创建了链接`the_title`。任何想法为什么会发生这种情况？

```
<?php 
if ( have_posts() ) : ?>

<?php query_posts('category_name=uncategorized&showposts=3'); ?> <?php
while (have_posts()) : the_post(); ?>
<br /> 
<?php echo the_post_thumbnail( 'latest-news'); ?>
<?php 
the_title(); ?> &nbsp; <br />
<?php
the_excerpt();
endwhile;
wp_reset_postdata();
endif; 
?> 
```

这是网站，向下滚动后是“最新消息”部分... [http://hailstorm_new.hailstormcommerce.com/](http://hailstorm_new.hailstormcommerce.com/) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:47:59.707

我修复了它，为“继续阅读”部分`<a>`创建的标签很`the_excerpt`早就被切断了，这意味着第一个标签永远不会关闭，它后面的所有内容都作为链接。

无论如何感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:38:56.073

query_posts() 应该在循环的开头， wp_reset_postdata() 应该在最后。像这样：

```
<?php 
    query_posts('category_name=uncategorized&showposts=3');
    if ( have_posts() ) :
        while (have_posts()) : the_post(); ?>
<br /> 
<?php 
            echo the_post_thumbnail( 'latest-news');
            the_title(); ?> &nbsp; <br />
<?php
            the_excerpt();
        endwhile;
    endif;
    wp_reset_postdata();
?>` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:22:51.487

```
<?php query_posts('category_name=uncategorized&showposts=3'); ?>
<?php if ( have_posts() ) : while (have_posts()) : the_post(); ?>
<br /> 
   <?php echo the_post_thumbnail( 'latest-news'); ?>
   <?php the_title(); ?>
   <br />
   <?php the_excerpt();
endwhile;
endif; 
wp_reset_postdata();
?> 
```

I've come across it before, can't remember the exact solution but I think your loop is ordered wrong... Try doing what I've posted above first, then post whether it fixed it or not.

# android - 如何使用通知，广播位置

> ID：13156616
> 
> 赞同：1
> 
> 时间：2012-10-31T11:14:55.520
> 
> 标签：android, service, location, broadcast

我正在制作一个应用程序。作为位置任务提醒。当用户到达特定位置时，如果有与该位置相关的任务，他/她将获得该任务的其余部分。

我已经完成了一半以上的应用程序。当用户在该位置时，我可以显示任务。但它是手动的。用户必须手动打开 d app n chk。

`Notifications`我的问题是：当用户到达特定位置时如何弹出该任务。这里是`Broadcast Receiver`必需的吗？以及将其用作`Service`

这是我的代码。它仅用于在列表中显示位置任务。通过单击 ToggleButton，它仅将那些任务显示到附近 1 公里（LOCATION_FILTER_DISTANCE）的位置。在这如何使用 NotificationManger.Also 我认为服务是必需的，因为当前位置没有被更新......！

```
public class ViewTasksActivity extends  ListActivity implements LocationListener {
protected static final long LOCATION_FILTER_DISTANCE = 1000;
private Button addButton;
private Button removeButton;

private TaskManagerApplication app;
private TaskListAdapter adapter;

private LocationManager locationManager;
private Location latestLocation;
private TextView locationText;
private ToggleButton localTasksToggle;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setUpViews();

    app=(TaskManagerApplication)getApplication();
    adapter=new TaskListAdapter(app.getCurrentTasks(),this);
    setListAdapter(adapter);
    setUpLocation();

    LocationManager locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);         

    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000L,500.0f, this);
    Location location = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    latestLocation=location;

    String locationString=String.format("  @%f, %f ,%s", 
            location.getLatitude(),
            location.getLongitude(),
            location.getProvider());
    locationText.setText(locationString);

    Toast.makeText(getApplicationContext(),locationString, Toast.LENGTH_LONG).show();

}

protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER , 60,5,this);

    locationManager.removeUpdates(this);

    adapter.forceReload();

}

    @Override
    protected void onPause() {

        super.onPause();
        locationManager.removeUpdates(this);

    }

    @Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    adapter.toggleTaskCompleteAtPosition(position);
    Task t=adapter.getItem(position);
    app.saveTask(t);

}
    protected void removeCompletedTasks() {
        Long[]  ids=adapter.removeCompletedTasks();
        app.deleteTasks(ids);
    }

    private void setUpLocation() {
        locationManager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER , 60,5,this);
}

    private void setUpViews() {
    // TODO Auto-generated method stub
    addButton=(Button)findViewById(R.id.add_button);
    removeButton=(Button)findViewById(R.id.remove_button);
    locationText=(TextView)findViewById(R.id.location_text);
    localTasksToggle=(ToggleButton)findViewById(R.id.show_local_task_toggle);
    addButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent i=new Intent(ViewTasksActivity.this,AddTaskActivity.class);
            startActivity(i);
        }
    });
    removeButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            removeCompletedTasks();

        }
    });
    localTasksToggle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            showLocalTasks(localTasksToggle.isChecked());

        }

        private void showLocalTasks(boolean checked) {
                if(checked){
            adapter.filterTasksByLocation( latestLocation,LOCATION_FILTER_DISTANCE);
                }else
                {
                    adapter.removeLocationFilter();
                }

        }
    });

}

    public void onLocationChanged(Location location) {}
    /*  latestLocation=location;
        String locationString=String.format("       @ %f,%f  +/-% fm    ",
                location.getLatitude(),
                location.getLongitude(),
                location.getAccuracy());

                locationText.setText(locationString);
    } 
```

下面的另一个活动：

```
public class TaskListAdapter extends BaseAdapter {

private ArrayList<Task> tasks;
private Context context;
private ArrayList<Task> filterTasks;
private ArrayList<Task> unfilteredTasks;

public TaskListAdapter(ArrayList<Task> tasks, Context context) {

    this.tasks = tasks;
    this.unfilteredTasks=tasks;
    this.context = context;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return tasks.size();
}

@Override
public Task getItem(int position) {
    // TODO Auto-generated method stub
    return (null==tasks)?null:tasks.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TaskListItem tli;
    if(null==convertView){
        tli=(TaskListItem)View.inflate(context, R.layout.task_list_item,null);
    }else
    {
        tli=(TaskListItem)convertView;

    }
    tli.setTask(tasks.get(position));
    return tli;
}

public void forceReload() {
    notifyDataSetChanged();

}

public void toggleTaskCompleteAtPosition(int position) {

    Task t=tasks.get(position);
    t.toggleComplete();
    notifyDataSetChanged();

}

public Long[] removeCompletedTasks() {

    ArrayList<Task> completedTasks=new ArrayList<Task>();
    ArrayList<Long> completedIds=new ArrayList<Long>();
    for(Task task : tasks){
            if(task.isComplete()){
                    completedIds.add(task.getId());
                    completedTasks.add(task);
            }
    }
    tasks.removeAll(completedTasks);
    notifyDataSetChanged();

    return completedIds.toArray(new Long[]{});
}

public void filterTasksByLocation(Location latestLocation,  long locationFilterDistance) {
    filterTasks=new ArrayList<Task>();
    for(Task task:tasks){
        if(task.hasLocation() && taskIsWithinGeofence(task,latestLocation,locationFilterDistance)){
                filterTasks.add(task);//chking all tasks with location tasks

            Toast.makeText(context, task.getName(), Toast.LENGTH_LONG).show();//displaying name of the tasks(as per location)
        }
    }
    tasks=filterTasks;
    notifyDataSetChanged();

}

private boolean taskIsWithinGeofence(Task task, Location latestLocation,
        long locationFilterDistance) {

    float[] distanceArray=new float[1];
    Location.distanceBetween(
            task.getLatitude(),
            task.getLongitude(),
            latestLocation.getLatitude(), 
            latestLocation.getLongitude(),
            distanceArray);

    return (distanceArray[0]<locationFilterDistance);
}

public void removeLocationFilter() {
    tasks=unfilteredTasks;
    notifyDataSetChanged();
} 
```

}

还有一个问题是应用程序没有在后台运行。位置只有在我启动应用程序时才会更新。感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:19:48.917

昨天我在我的应用程序中做了同样的事情（通知位置）这是我的代码，可以帮助你..

```
NotificationManager nmanager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Notification notification = new Notification();
    notification.icon = R.drawable.deal_image;
    notification.tickerText = "new deal found";
    notification.when = System.currentTimeMillis();
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    Log.d(TAG, "notifying deal is" + placename);

          // After clicking on perticular notification i open my own activity like this 

    Intent intent = new Intent(getApplicationContext(),
            ActDisplaylistdata.class);
    intent.putExtra("lat", Currentlatitude);
    intent.putExtra("long", Currentlongtitude);
    Log.d(TAG, "checked value " + _checkedCategory.toString());
    intent.putStringArrayListExtra("category", _checkedCategory);

    PendingIntent pintent = PendingIntent.getActivity(
            getApplicationContext(), i, intent, 0);
    notification.setLatestEventInfo(getApplicationContext(), placename,
            placename + " is " + distance + " away", pintent);
    notification.number += 1;

    nmanager.notify(i, notification); 
```

仅供参考，不需要广播接收器或服务（实际上我们使用的是 location_service，它将根据传递给 locationmanager 的参数来做所有事情）。

祝你好运

# sql - SQL 查询缓存

> ID：13156617
> 
> 赞同：0
> 
> 时间：2012-10-31T11:14:57.947
> 
> 标签：sql, sql-server-2008

以下查询的第一次运行大约需要 45 秒，接下来的所有查询只需要 1 秒。您能否解释一下原因是什么以及如何使查询在第一次执行时运行得更快？

```
OPEN SYMMETRIC KEY TEST_KEY DECRYPTION BY PASSWORD='password'

SELECT this.ID FROM SeparationFiles this
INNER JOIN BarcodeValues b ON this.FIRST_BARCODE_ID = b.ID
WHERE DecryptByKey(b.ENCRYPTED_VALUE, 0) = 'Peter' 
```

这是执行计划：

![执行计划](../Images/7e0c8e93315c6989b4335ae338e61a2f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:34:40.823

SeparationFiles 表中有多少行？您在扫描 SeparationFiles 表时获得了 50% 的查询成本。在我看来，您可能在 FIRST_BARCODE_ID 列上没有索引。如果您在该列上确实有索引，则可能需要在索引中包含 ID 列。

第一次运行这个查询时，表，或者它的一部分，被缓存在内存中。第二次是从内存中读取的。这可能解释了为什么第二次更快。但在我看来，真正的问题是索引问题，具体取决于 SeparationFiles 表中的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:25:23.623

正如 Randy 所说，第一次运行时，SeparationFiles 表中的数据可能会从磁盘读取并缓存。下次执行查询时，数据在内存中，因此速度更快。

正如 Randy 指出的那样，您应该考虑更改查询以使其使用索引搜索，但您遇到的问题是您的 where 子句是非 SARGable 的，因此无论如何都不会使用索引。您可能应该将 where 子句更改为：

```
 Where b.encrypted_value = EncryptByKey(key_GUID('password'), 'Peter') 
```

然后确保您在 encrypted_value 上有一个索引

# jquery - $.getJson 函数，标题中有特殊字符

> ID：13156618
> 
> 赞同：2
> 
> 时间：2012-10-31T11:15:02.260
> 
> 标签：jquery, html, json, getjson

我遇到了这个问题：我尝试将 .json 文件中的数据加载到我的网站，但我遇到了标题中的特殊字符（Ó、Í、É、空格）的问题。我只能更改 .HTML 文件这是一个示例：

**.json：**

```
{
    "Bibliotecas": [
        {
            "BIBLIOTECA": "Biblioteca General de Navarra ",
            "DIRECCIÓN ": "Plaza de San Francisco",
            "COD. POSTAL": 31001,
            "POBLACIÓN": "Pamplona",
            "TELÉFONO": 848427797,
             ..................... 
```

**.html：**

```
<!DOCTYPE HTML> 
<html>
    <head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">

    <title>JSON multiple zombies
    </title> 

    <script src="HostFiles/jquery.js"></script>
    <link href="reset.css" rel="stylesheet" type="text/css" media="screen">

    <script>

        $(document).ready(function() {
                 $.getJSON('json/bibliotecas.json', function(json) { 

                 $.each(json.Bibliotecas, function () {

                 $('<article class="json"></article>').append(

                 '<p> ' + this.BIBLIOTECA + '</p>'  + 
                 '<p> ' + this["DIRECCIÓN "] + '</p>' + 
                 '<p> ' + this.POBLACIÓN + '</p>' + 
                 '<p> ' + this.TELÉFONO + '</p>'  + 

                 '</br></br>'
                 ).appendTo('body');

    });          

  });

});

    </script>

</head> 
<body> 

</body>
    </html> 
```

**结果：**

```
Biblioteca General de Navarra

undefined

undefined

undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:16:18.467

您应该使用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)：

```
$.each(json.Bibliotecas, function() {
    $('<article class="json"></article>').append(
        '<p> ' + this["BIBLIOTECA"] + '</p>'  +   
        '<p> ' + this["DIRECCIÓN"] + '</p>' + 
        '<p> ' + this["POBLACIÓN"] + '</p>' +  
        '<p> ' + this["TELÉFONO"] + '</p>'  +
        // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:25:27.837

在 Javascript 中，这些特殊字符不是有效的标识符，因此您可以使用它们来定义对象和/或变量。
因此，您不能使用它们来使用点语法遍历您的对象。

但是，您可以使用以下`[key]`语法访问它们：

```
var direction = obj["Bibliotecas"][0]["DIRECCIÓN "]; 
```

正如你[在这里](http://jsfiddle.net/QDcNn/)看到的。

你的循环会变成这样：

```
$.each(json["Bibliotecas"], function (index, value) {
    $('<article class="json"></article>').append(
        '<p> ' + value["BIBLIOTECA"] + '</p>'  +
        '<p> ' + value["COD. POSTAL"] + '</p>' + 
        '<p> ' + value["DIRECCIÓN "] + '</p>' + 
        '<p> ' + value["POBLACIÓN"] + '</p>' +  
        '<p> ' + value["TELÉFONO"] + '</p>' + ...
    );
}); 
```

* * *

### 更新 1

该[`$.each()`](http://api.jquery.com/jQuery.each/)方法使用两个参数调用回调，`function (index, value)`用于数组和`function (key, value)`对象映射；它也不适用不同的上下文。
因此，我们必须使用回调参数**而不是使用** `this`. 我已经更新了代码以反映这一点。

# c# - 通过反射调用 this[int index]

> ID：13156620
> 
> 赞同：11
> 
> 时间：2012-10-31T11:15:06.923
> 
> 标签：c#, reflection, office-interop

我尝试为 Microsoft Office 实现一个基于反射的后期绑定库。Office COM 对象的属性和方法调用方式如下：

```
Type type = Type.GetTypeFromProgID("Word.Application");
object comObject = Activator.CreateInstance(type);
type.InvokeMember(<METHOD NAME>, <BINDING FLAGS>, null, comObject, new object[] { <PARAMS>}); 
```

InvokeMember 是唯一可能的方法，因为 Type.GetMethod / GetProperty 无法与 COM 对象一起工作。

可以使用 InvokeMember 调用方法和属性，但现在我必须解决以下问题：

office-interop 包装器中的方法：

```
Excel.Workbooks wb = excel.Workbooks;
Excel.Workbook firstWb = wb[0]; 
```

分别

```
foreach(Excel.Workbook w in excel.Workbooks)
  // doSmth. 
```

如何通过反射调用 Excel.Workbooks 的 this[int index] 运算符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:26:08.940

我可能误解了您的问题，但希望这对您有所帮助。

当您有工作簿时，这将获得第 n 个工作簿：

```
typeof(Workbooks).GetMethod("get_Item").Invoke(excel.Workbooks, new object[] { n }); 
```

`GetMethod`似乎对我来说工作很费钱，你使用的是什么版本的 .NET？

否则这可能会起作用：

```
typeof(Workbooks).InvokeMember("Item", BindingFlags.Public | BindingFlags.Instance | BindingFlags.GetProperty, null, excel.Workbooks, new object[] { n }); 
```

这个（计数）也非常有用：

```
typeof(Workbooks).InvokeMember("Count", BindingFlags.Public | BindingFlags.Instance | BindingFlags.GetProperty, null, excel.Workbooks, null). 
```

如果 type 是 excel 类型，则获取工作簿：

```
type.InvokeMember("Workbooks", BindingFlags.Public | BindingFlags.Instance | BindingFlags.GetProperty, null, excel.Workbooks, null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:36:27.480

尝试调用“get_Item”。

这就是索引属性的编译方式，作为称为 get_Item 的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:07:21.193

我通过枚举 COM 对象解决了我的问题：

```
public Workbook this[int iIndex]
{
 get
 {
  int c = 0;
  foreach (Workbook wb in this)
  {
   if (c == iIndex)
     return wb;
   c++;
  }
  return null;
 }
}

// ...

// The Workbook object is a wrapper for the COM object Excel.Workbook
IEnumerator<Workbook> IEnumerable<Workbook>.GetEnumerator()
{
 foreach (var obj in (IEnumerable)m_COMObject)
  yield return obj == null ? null : new Workbook(obj, this);
} 
```

我知道这是一个令人不快的解决方案，但它确实有效。:-)

感谢您的帮助

# linux - 打印所有平台设备

> ID：13156621
> 
> 赞同：0
> 
> 时间：2012-10-31T11:15:07.857
> 
> 标签：linux, linux-kernel

如何从 platform_device 列表中打印所有平台设备名称？我在内核中添加了对 omap-board 的支持，但有错误喜欢它：

```
omap_uart.0: failed to claim resource 814 
```

并且不调用 omap_serial 的探针，但调用了 serial8250 的探针。我找不到问题。

# c# - 加入 2 个具有多列的数据表

> ID：13156626
> 
> 赞同：0
> 
> 时间：2012-10-31T11:15:20.753
> 
> 标签：c#, linq, join, concat

我有一个问题，想加入 2 个具有相同列的表。表 1 有 Name、LastName 列和许多其他列，表 2 有 Name、Comment 和许多其他列。我想将它们与名称列一起加入，结果应该是名称、姓氏、评论和其他列。我尝试使用左外 Linq，但不知道如何编写 select new，因为不知道我还有多少其他列。

我的表1：

```
Name1   LastName ...
Niki   Row      ...
Hube   Slang    ...
Koke   Mi       ... 
...    ...      ...
...    ...      ... 
```

表 2：

```
Name  Comment   ...
Koke   "Hello"  ...
Niki   "Hi"     ... 
```

结果应该是：

```
Name   LastName   Comment ...
Niki    Row        "Hi"   ...
Hube    Sland             ...
Koke    Mi         "Hello"...
...     ...               ... 
```

所以我试图将这些行相互连接起来。但是它说 table1 中的数组比 table 2 中的数组长。还有其他方法可以加入吗？

```
 foreach (DataRow tbE in Table1.Rows)
        {
            foreach (DataRow opT in Table2.Rows)
            {
                if (tbE["Name"].ToString() == opT["Name"].ToString())
                {
                    var row = Result.NewRow();
                    row.ItemArray = tbE.ItemArray
                                       .Concat(opT.ItemArray).ToArray();

                    Result.Rows.Add(row);
                }
                else
                    Result.ImportRow(tbE);

            }
        } 
        Result.Columns.Remove(Name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:22:10.113

[你可以在这里使用我最近为另一个问题](https://stackoverflow.com/q/12278978/284240)从头开始编写的这个方法（所以它没有真正经过测试）。它允许通过一个公共键合并多个表。如果没有指定键，它将只使用默认[`DataTable.Merge`](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)方法：

```
public static DataTable MergeAll(this IList<DataTable> tables, String primaryKeyColumn)
{
    if (!tables.Any())
        throw new ArgumentException("Tables must not be empty", "tables");
    if(primaryKeyColumn != null)
        foreach(DataTable t in tables)
            if(!t.Columns.Contains(primaryKeyColumn))
                throw new ArgumentException("All tables must have the specified primarykey column " + primaryKeyColumn, "primaryKeyColumn");

    if(tables.Count == 1)
        return tables[0];

    DataTable table = new DataTable("TblUnion");
    table.BeginLoadData(); // Turns off notifications, index maintenance, and constraints while loading data
    foreach (DataTable t in tables)
    {
        table.Merge(t); // same as table.Merge(t, false, MissingSchemaAction.Add);
    }
    table.EndLoadData();

    if (primaryKeyColumn != null)
    {
        // since we might have no real primary keys defined, the rows now might have repeating fields
        // so now we're going to "join" these rows ...
        var pkGroups = table.AsEnumerable()
            .GroupBy(r => r[primaryKeyColumn]);
        var dupGroups = pkGroups.Where(g => g.Count() > 1);
        foreach (var grpDup in dupGroups)
        { 
            // use first row and modify it
            DataRow firstRow = grpDup.First();
            foreach (DataColumn c in table.Columns)
            {
                if (firstRow.IsNull(c))
                {
                    DataRow firstNotNullRow = grpDup.Skip(1).FirstOrDefault(r => !r.IsNull(c));
                    if (firstNotNullRow != null)
                        firstRow[c] = firstNotNullRow[c];
                }
            }
            // remove all but first row
            var rowsToRemove = grpDup.Skip(1);
            foreach(DataRow rowToRemove in rowsToRemove)
                table.Rows.Remove(rowToRemove);
        }
    }

    return table;
} 
```

你可以这样调用它：

```
var tables = new[] { Table1, Table2 };
tables.MergeAll("Name"); 
```

**编辑**：这是来自调试器的屏幕截图以及您的示例数据：

![在此处输入图像描述](../Images/91e6578d457d3462be10d5f50d41083a.png)

所以它有效:)

样本数据和测试在这里：

```
var Table1 = new DataTable();
var Table2 = new DataTable();
Table1.Columns.Add("Name");
Table1.Columns.Add("LastName");

Table2.Columns.Add("Name");
Table2.Columns.Add("Comment");

Table1.Rows.Add("Niki", "Row");
Table1.Rows.Add("Hube", "Slang");
Table1.Rows.Add("Koke", "Mi");

Table2.Rows.Add("Koke", "Hello");
Table2.Rows.Add("Niki", "Hi");

var tables = new DataTable[] { Table1, Table2 };
DataTable merged = tables.MergeAll("Name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T15:31:47.057

这是我的一点贡献。此部分代码可用于连接指定列名上的任意两个 DataTable。（您不需要知道其余列）以下是一些功能：

1.  生成的 DataTable 不会有用于连接的重复列。例如，如果您加入“名称”列，最后您将只有一个“名称”列，而不是每个表中的一个副本。
2.  如果存在未在连接中使用的重复列，则将通过在末尾附加“_2”来重命名第二个表中的重复列。它可以以其他方式表现，只需更改那部分代码。
3.  支持多个连接列。为此，为它们创建了一个 JoinKey 类，以便 LINQ 进行比较。
4.  这段代码是我在网上找到的代码和我的反复试验的混合体。我是LINQ的新手，请随意批评~

    ```
    public class JoinKey
    {
        List<object> objects { get; set; }

        public JoinKey(List<object> objects)
        {
            this.objects = objects;
        }

        public override bool Equals(object obj)
        {
            if (obj == null || obj.GetType() != typeof(JoinKey))
                return false;
            return objects.SequenceEqual(((JoinKey)obj).objects);
        }

        public override int GetHashCode()
        {
            int hash = 0;
            foreach (var foo in objects)
            {
                hash = hash * 31 + foo.GetHashCode();
            }
            return hash;
        }
    }

    public enum JoinType
    {
        Inner = 0,
        Left = 1
    }

        //Joins two tables and spits out the joined new DataTable. Tables are joined on onCol column names
        //If the right table has column name clashes with the left column, the column names will be appended "_2" and added to joined table
        public static DataTable Join(DataTable left, DataTable right, JoinType joinType, params string[] onCol)
        {
            Func<DataRow, object> getKey = (row) =>
            {
                return new JoinKey(onCol.Select(str => row[str]).ToList());
            };
            var dt = new DataTable(left.TableName);
            var colNumbersToRemove = new List<int>();
            //Populate the columns
            foreach (DataColumn col in left.Columns)
            {
                if (dt.Columns[col.ColumnName] == null)
                    dt.Columns.Add(new DataColumn(col.ColumnName, col.DataType, col.Expression, col.ColumnMapping));
            }
            for (int colIdx = 0; colIdx < right.Columns.Count; ++colIdx)
            {
                var col = right.Columns[colIdx];
                //if this is joined column, it will be removed.
                if (onCol.Contains(col.ColumnName))
                {
                    colNumbersToRemove.Add(colIdx);
                }
                else
                {
                    //if this is duplicate column, it will be renamed.
                    if (dt.Columns[col.ColumnName] != null)
                    {
                        col.ColumnName += "_2";
                    }
                    dt.Columns.Add(new DataColumn(col.ColumnName, col.DataType, col.Expression, col.ColumnMapping));
                }
            }

            if (joinType == JoinType.Left)
            {
                var res = from l in left.AsEnumerable()
                          join r in right.AsEnumerable()
                          on getKey(l) equals getKey(r) into temp
                          from r in temp.DefaultIfEmpty()
                          select l.ItemArray.Concat(((r == null) ? (right.NewRow().ItemArray) : r.ItemArray).Minus(colNumbersToRemove)).ToArray();
                foreach (object[] values in res)
                    dt.Rows.Add(values);
            }
            else
            {
                //Inner Join
                var res = from l in left.AsEnumerable()
                          join r in right.AsEnumerable()
                          on getKey(l) equals getKey(r) into temp
                          from r in temp
                          select l.ItemArray.Concat(((r == null) ? (right.NewRow().ItemArray) : r.ItemArray).Minus(colNumbersToRemove)).ToArray();
                foreach (object[] values in res)
                    dt.Rows.Add(values);
            }
            return dt;
        } 
    ```

# php - Mysql - 选择具有最高平均值的不同客户端代码

> ID：13156627
> 
> 赞同：0
> 
> 时间：2012-10-31T11:15:23.520
> 
> 标签：php, mysql

我有一个 mysql 表，其中存储了客户端的星级，所以：

**参考，客户代码，日期，评论，星星**

相同的客户端代码可以出现多次。

我需要选择具有最高平均星数的不同客户端代码。任何建议如何得到这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:28:27.623

```
SELECT
    t1.clientcode clientcode,
    t2.sum sum,
    t3.count count,
    CASE t3.count WHEN 0 THEN 0 ELSE t2.sum / t3.count END average
FROM
    t1
    LEFT JOIN
    (
        SELECT
            clientcode, 
            SUM(stars) sum
        FROM t1
        GROUP BY clientcode
    ) t2 ON t1.clientcode = t2.clientcode
    LEFT JOIN
    (
        SELECT
            clientcode, 
            COUNT(stars) count
        FROM t1
        GROUP BY clientcode
    ) t3 ON t1.clientcode = t3.clientcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:58:16.120

Please try query given below.

```
select avg(`stars`) AS `avgstar` ,`clientcode`  from `t1` group by `clientcode` order by `avgstar` DESC 
```

Here `group by clientcode` will be get record for every distinct `clientcode` and `order by avgstar` where `avgstar is average of stars field value for each clientcode` in Descinding order.

thanks

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:28:01.217

这将显示不同客户端代码的星级平均值

```
SELECT avg(stars) from t1 group by clientcode; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:20:15.917

```
SELECT 
    t1.* 
FROM 
    table t1 
WHERE 
    t1.stars IN 
    (
        SELECT 
            MAX(t2.stars) 
        FROM 
            table t2 
        WHERE  
            t2.clientcode = t1.clientcode
    ) 
```

# android - 如何将数据从服务器发送到 android 应用程序到特定的 USER 和 GROUP

> ID：13156629
> 
> 赞同：-3
> 
> 时间：2012-10-31T11:15:23.490
> 
> 标签：android

我想制作一个 android 应用程序，其中管理员从服务器发送消息。管理员可以选择发送谁，例如特定用户**或**某个部门的所有用户**或**所有用户。我正在考虑**谷歌云消息传递**。我想要解决方案如何完成。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:06:43.073

是的，正是 GCM 是满足此要求的最佳方式。专心阅读本文档，您将实现目标。因为我体验过 GCM：http: [//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

也让我们看看这个视频，它对你也有更多帮助：[https ://www.youtube.com/watch?v=YoaP6hcDctM](https://www.youtube.com/watch?v=YoaP6hcDctM)

# javascript - 移动浏览器上的 positionYOffset 和 scrollTop

> ID：13156630
> 
> 赞同：0
> 
> 时间：2012-10-31T11:15:27.733
> 
> 标签：javascript, jquery, mobile-safari, mobile-website

是否有任何解决方案可以在移动浏览器上获取 window.positionYOffset 或 window.scrollTop？现在它返回 0。在所有浏览器中一切正常，除了移动浏览器。有小费吗？我搜索了有关此主题的其他线程，但没有可行的选项对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:25:27.340

不确定您要达到的目标。你试过window.offset.top吗？

# c# - Windows 形式的 4 x 4 板设计

> ID：13156639
> 
> 赞同：-4
> 
> 时间：2012-10-31T11:15:39.523
> 
> 标签：c#, winforms

我只需要一点 Windows 形式的帮助。我只想以 Windows 形式设计一个 4 x 4 板，如下所示。谢谢![在此处输入图像描述](../Images/c05a1ce63ebe23a956dc9aa35e7e8034.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:19:14.437

使用 TableLayoutPanel，你可以在这里阅读

[http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)

# events - LWUIT：更改显示表单上的组件文本

> ID：13156641
> 
> 赞同：2
> 
> 时间：2012-10-31T11:15:44.937
> 
> 标签：events, netbeans, java-me, lwuit, codenameone

我使用代号，我想更改一些标签文本或用数据库中的动态数据填充表格。所以，我的问题是：

1.什么事件有利于在显示表单上更改组件文本？

2.如何创建数据库并从中加载数据或插入数据？

我的应用程序详细信息：我有一个带有按钮列表的主表单，每个按钮都映射为显示另一个表单。除主窗体外的窗体组件必须动态设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:23:25.233

如果您使用的是 GUI 构建器，那么您有`beforeShow`可以做到这一点的事件。如果您使用代码，那么只需在调用`form.show()`.

如果您的需求很简单，我建议您使用`Storage`该类，它支持存储简单对象。您还可以在智能手机（不是 J2ME 等）上使用 SQlite 数据库，但这对大多数人来说是多余的。两者都在 Codename One[开发人员指南](http://www.codenameone.com/developer-guide.html)中有详细记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:47:32.073

谢谢夏。正如 Shai 所说，要为表单的组件设置值，我们可以在 form.Show() 之前执行此操作。

我收到错误是因为我调用了 findLblTimeVlaue() 但是当我将其更改为 findLblTimeVlaue(String, Form) 时，我的错误消失了。这是代码：

```
@Override
protected void beforeReminderUI(Form f) {
    com.codename1.ui.Label lbl = 
            (com.codename1.ui.Label)findByName("lblTimeValue", f);
    lbl.setText("Hi 2013213");
} 
```

# c# - 需要多个声音输出到多个扬声器

> ID：13156643
> 
> 赞同：2
> 
> 时间：2012-10-31T04:54:35.543
> 
> 标签：c#, audio

如何在我的电脑上同时播放 3 首不同的音乐曲目，这样歌曲 1 在扬声器 1 中播放，歌曲 2 在扬声器 2 中播放...

这可能以编程方式吗？我需要什么额外的硬件？我需要3个单独的声卡吗？鉴于硬件已经到位，我如何将特定歌曲的声音输出“路由”到特定扬声器。

或者，是否有可以处理多个输入和输出的特殊硬件？

感谢您的专家意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:59:53.257

[http://www.esi-audio.com/products/maya44usb+/](http://www.esi-audio.com/products/maya44usb+/)用 NAudio c# 库试试这个，看看 AsioOut 和 MultiplexingWaveProvider

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:06:21.780

假设您的输出（总数）与您已设置的歌曲一样多（我假设您只会以单声道播放每首歌曲）。解决此问题的最简单方法是为每首歌曲打开一个“流”并通过该流播放歌曲。您必须做一些工作以使用正确数量的频道打开每个流，并确保歌曲在正确的频道中播放。

该技术存在两个潜在问题： 1\. 某些音频 API/硬件组合不允许多个流访问同一设备。这是 windows/ASIO 上最常见的问题，但在其他情况下可能是一个问题——我不是 windows 专家。2\. 确保所有流完全同步有点棘手。如果您需要紧密同步，您应该使用单个流和单个硬件设备。

如果上述问题是一个问题，那么您应该获得一些至少具有三个输出的音频硬件，并打开一个可以访问三个通道的流。

您可以使用 PortAudio 进行音频 I/O，使用 libsoundfile 读取声音文件（当然，这两个任务还有其他选项）。

# php - 轴上带有日期时间的 HighChart

> ID：13156644
> 
> 赞同：0
> 
> 时间：2012-10-31T11:15:50.773
> 
> 标签：php, ajax, highcharts

我不知道我在这段代码中哪里出错了。
我需要做的是使用数据库中的值绘制 HighCharts。这些值可能随时更改。
- x 轴应标记为“11 月 30 日”作为最后一个点到“10 月 30 日”作为第一个点，这意味着 30 天（我只想在 30 天显示图表）。这是一个示例，日期可能随时间变化。- JS通过ajax发送请求，结果以json格式返回。这是其中一行：`{"time":"2012-08-07 21:15:05","value_1":"1.241110","value_2":"1.241103"}` 该图有两条线（ value_1 和 value_2 ）并且都对应于 x 轴上的相同时间。
我在某处读到我必须将日期格式转换为 UTC。这是功能

```
function get_and_display_data(symbol_1,price_1,period_1,bars_1,constraints_1){

var highchartsOptions = Highcharts.setOptions(Highcharts.theme);

var options = {
    chart: {
        renderTo: 'graph',
        type: 'line',
        marginRight: 130,
        marginBottom: 25,
        reflow: false,
        borderWidth: 0
    },
    title: {
        text: 'Data',
        x: -20 //center
    },
    xAxis: {
        type:'datetime',
        dateTimeLabelFormats: {
            year: '%b \'%y'
        }
    },
    yAxis: {
        title: {
            text: 'This is a text !'
        },
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },
    tooltip: {
        formatter: function() {
            return '<b>'+ this.series.name +'</b><br/>'+
            Highcharts.dateFormat ('%A, %b %e, %Y', this.point.x) +': '+ this.y;
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -10,
        y: 100,
        borderWidth: 0
    },
    plotOptions: {
        series: {
            marker: {
                enabled: false,
                states: {
                    hover: {
                        enabled: true,
                        radius: 3
                    }
                }
            }
        }
    },
    series: [{
        name: ''
        }, {
        name: ''
    }]
}
$.ajax({
    url: url_base+"show_page/graph_data.do",
    type: 'POST',
    data: 'symbol='+symbol_1+"&price="+price_1+"&period="+period_1+"&bars="+bars_1+"&constraints="+constraints_1,
    cache: false,
    dataType: "json",
    success: function(html) {
        var data_array = [];
        var data_1 = [];
        var data_2 = [];
        var i = 0;
        var time_x_axis = [];
        var sLegend = [];
        try{
            data_array = html;
            sLegend = price_1.split(',');
            if(html == null){
                alert('No data was found. Try it again ');
            }else{
                for(i=0;i<data_array.length;i++)
                {
                    time_x_axis[i] = data_array[i]['time'];
                    data_1[i] = '['+Date.UTC(time_x_axis[i].substr(0, 4), time_x_axis[i].substr(5,2), time_x_axis[i].substr(8,2), time_x_axis[i].substr(11,2), time_x_axis[i].substr(14,2), time_x_axis[i].substr(17,2))+','+parseFloat(data_array[i]['value_1'])+']';
                    data_2[i] = '['+Date.UTC(time_x_axis[i].substr(0, 4), time_x_axis[i].substr(5,2), time_x_axis[i].substr(8,2), time_x_axis[i].substr(11,2), time_x_axis[i].substr(14,2), time_x_axis[i].substr(17,2))+','+parseFloat(data_array[i]['value_2'])+']';                        
                }
            }
        }catch(e){ }
        options.series[0].data = '['+data_1+']';
        options.series[0].name = sLegend[1];
        options.series[1].data = data_2;
        options.series[1].name = sLegend[2];
        chart = new Highcharts.Chart(options);
    }
});} 
```

在这里，我得到了 html 变量的结果并将它们影响到 Data_array[] 。因为系列数据的格式应该是*Data:[[],[],[]..[]]*，所以我把 *options.series[0].data = '['+data_1+']'; * .
对于 *data_1[i]*，我必须减去时间以获取年、月、日、小时、分钟和秒。
我在代码中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:38:53.073

您可以尝试以下更改吗？

`[...,...]`通过使用而不是将 data_1[i] 和 data_2[i] 设为数组`'[' + ... + ',' + ... + ']'`（这实际上导致字符串而不是数组）

```
 data_1[i] = [parseInt(Date.UTC(time_x_axis[i].substr(0, 4), time_x_axis[i].substr(5,2), time_x_axis[i].substr(8,2), time_x_axis[i].substr(11,2), time_x_axis[i].substr(14,2), time_x_axis[i].substr(17,2))),parseFloat(data_array[i]['value_1'])];
                data_2[i] = [parseInt(Date.UTC(time_x_axis[i].substr(0, 4), time_x_axis[i].substr(5,2), time_x_axis[i].substr(8,2), time_x_axis[i].substr(11,2), time_x_axis[i].substr(14,2), time_x_axis[i].substr(17,2))),parseFloat(data_array[i]['value_2'])]; 
```

和

从系列数据中删除`'[' + ... + ']'`，因为 data_1 已经是一个数组数组，您不需要使用任何连接添加方括号。由于连接，您的方法无论如何都会再次导致字符串。

```
 options.series[0].data = data_1; 
```

相关： [Highcharts 返回错误 14](https://stackoverflow.com/questions/12485560/highcharts-returning-error-14/12489695#12489695)

# python - 在python中制作字符串值的直方图

> ID：13156657
> 
> 赞同：9
> 
> 时间：2012-10-31T11:16:35.890
> 
> 标签：python, string, histogram

好的，所以我有六个可能的数据值，分别是“32”、“22”、“12”、“31”、“21”和“11”。我将这些存储为字符串。python是否有可能对数据进行排序并只制作六个垃圾箱并显示我有多少个垃圾箱？还是直方图的输入必须是数字的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T11:48:55.607

```
data =  ['32', '22', '12', '32', '22', '12', '31', '21', '11']
dict((x, data.count(x)) for x in data) 
```

**结果**

```
{'11': 1, '12': 2, '21': 1, '22': 2, '31': 1, '32': 2} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T12:30:45.707

你考虑过使用[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)吗？

```
# python 2.7
>>> l = ['32', '22', '12', '31', '21', '11', '32']
>>> import collections
>>> collections.Counter(l)
Counter({'32': 2, '11': 1, '12': 1, '21': 1, '22': 1, '31': 1}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T11:46:21.810

```
data =  ['32', '22', '12', '32', '22', '12', '31', '21', '11']
sm = {i:0 for i in ['32', '22', '12', '31', '21','11']}
for i in data:
    sm[i] += 1
print sm 
```

像这样的东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:53:11.643

假设`data`是一个列表，并且您想计算箱中的数字。我将`bins`用作字典。

```
bin = {'11': 0, '12': 0, '21': 0, '22': 0, '31': 0, '32': 0}

for element in data:
    if element in bin:  # Ignore other elements in data if any
        bin[element] = bin[element] + 1 
```

`bins`字典将具有数据列表中每个元素的频率。现在您可以使用`bins`图表库来绘制条形图。也许您可以使用这篇[文章](https://stackoverflow.com/questions/7871338/creating-bar-charts-in-python?lq=1)来检查 matplotlib 用于绘制条形图的情况。

# python - 计算 Pandas 中第一个事件的第 n 天

> ID：13156660
> 
> 赞同：2
> 
> 时间：2012-10-31T11:16:57.187
> 
> 标签：python, datetime, pandas

我有以下数据框，从我的原始数据框中子集，包含列*event*、*unixtime*和*day*，我想添加另一列*arbday*，这是自第一个事件以来的第 n 天（第一次访问是第 1 天）：

```
import numpy as np  
import datetime as dt  

>>> testdf = pd.DataFrame({'event': range(1,4), 'unixtime': [1346617885925, 1346961625305,1347214217566]},index=[343352,343353,343354])
>>> testdf['day'] = testdf['unixtime'].apply(lambda x: dt.datetime.utcfromtimestamp(x/1000).date())

        event       unixtime         day   arbday
343352      1  1346617885925  2012-09-02        1
343353      2  1346961625305  2012-09-06        5
343354      3  1347214217566  2012-09-09        8 
```

环顾四周后，我尝试通过以下方式做到这一点：

```
>>> testdf2['arbday'] = np.where(testdf2['event']==1, 1, testdf2.day.apply(lambda x: x-x[:1]))  
        event       unixtime         day   arbday
343352      1  1346617885925  2012-09-02        1
343353      2  1346961625305  2012-09-06      NaN
343354      3  1347214217566  2012-09-09      NaN

or  

>>> testdf2['arbday'] = np.where(testdf2['event']==1, 1, testdf2.day.apply(lambda x: dt.timedelta(x-x[:1])))
TypeError: 'datetime.date' object is not subscriptable 
```

这样做的正确方法是什么？非常感谢任何指针！

**编辑**：关于将其应用于组的后续问题是[here](https://stackoverflow.com/questions/13175251/compute-the-nth-day-from-the-first-event-within-each-group-in-pandas)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:36:22.417

```
df = DataFrame({'event': range(1,4), 'unixtime': [1346617885925, 1346961625305,1347214217566]})
df['day'] = df['unixtime'].apply(lambda x: datetime.fromtimestamp(x/1000).date())
df['arbday']=df['day'].map(lambda x: (x-df.get_value(df[df.event == 1].first_valid_index(), 'day')).days+1)
print df 
```

输出：

```
 event       unixtime         day  arbday
0      1  1346617885925  2012-09-02       1
1      2  1346961625305  2012-09-06       5
2      3  1347214217566  2012-09-09       8 
```

# android - 如何知道 onCreateView 函数中哪个选项卡处于活动状态？

> ID：13156662
> 
> 赞同：1
> 
> 时间：2012-10-31T11:16:58.310
> 
> 标签：android

我怎么知道哪个选项卡在我的

> public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 函数？？？

以下代码仅适用于拳头导航，但之后在每个选项卡中显示最后一个布局。

```
public final class RobozoxFragment extends Fragment {
private static final String KEY_CONTENT = "RobozoxFragment:Content";
private static int currentPosition = 100;
public static RobozoxFragment newInstance(String content,int position) {
    currentPosition = position;
    RobozoxFragment fragment = new RobozoxFragment();
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < 20; i++) {
        builder.append(content).append(" ");
    }
    builder.deleteCharAt(builder.length() - 1);
    fragment.mContent = builder.toString();
    return fragment;
}
@Override

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View myFragmentView;

    if(currentPosition == 1){
        myFragmentView = inflater.inflate(R.layout.first, container, false);
    }else if(currentPosition == 2){
        myFragmentView = inflater.inflate(R.layout.second, container, false);
    }else if(currentPosition == 3){

        myFragmentView = inflater.inflate(R.layout.third, container, false);
    }else if(currentPosition == 4){
        myFragmentView = inflater.inflate(R.layout.fourth, container, false);
    }else if(currentPosition ==5){
        myFragmentView = inflater.inflate(R.layout.fifth, container, false);
    }else{
        myFragmentView = inflater.inflate(R.layout.activity_main, container, false);
    }
    return myFragmentView;
} 
```

我认为问题出`onCreateView`在我无法获得活动标签位置的功能上。

我怎样才能完成这件事。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:11:26.610

得到了解决方案 :) 通过使用 Bundle 和传递参数来获取当前位置。下面的示例代码..

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView;
    Bundle args = getArguments();
    int currentView = args.getInt(Constants.ARG_SECTION_NUMBER)-2;

    if(currentView == 0){
        rootView = inflater.inflate(R.layout.lay1, container, false);
    }else if(currentView == 1){
        rootView = inflater.inflate(R.layout.lay2, container, false);
    }else {
        rootView = inflater.inflate(R.layout.activity_main, container, false);
    }

    return rootView;
}

@Override
public Fragment getItem(int i) {
    switch (i) {
    case 0:
        // The first section of the app is the most interesting -- it offers
        // a launchpad into the other demonstrations in this example
        // application.
        return new LaunchpadSectionFragment();

    default:
        // The other sections of the app are dummy placeholders.
        Fragment fragment = new RobozoxSectionFragment();
        Bundle args = new Bundle();
        args.putInt(Constants.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }
} 
```

# javascript - 其他类型的网络脚本语言？

> ID：13156666
> 
> 赞同：18
> 
> 时间：2012-10-31T11:17:10.537
> 
> 标签：javascript, html

```
<script language="javascript" type="text/javascript"></script> 
```

我从未见过网络上使用过任何其他脚本语言。现在这是出于好奇，但是除了 JavaScript 之外，还有其他语言在 Web 上使用并且是脚本语言吗？这可能是一个愚蠢的问题，但我从未见过脚本标签中使用过任何其他语言。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T11:24:57.740

简短的回答？不，JavaScript 或众所周知的[ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)是唯一可用的客户端脚本语言。

长答案：是的。

通过插件，人们可以使用[ActionScript](http://en.wikipedia.org/wiki/ActionScript)、[Silverlight](http://en.wikipedia.org/wiki/Microsoft_Silverlight)和[Java](http://en.wikipedia.org/wiki/Java_%28programming_language%29)来创建动态内容。

Chromium 也支持[Dart](http://en.wikipedia.org/wiki/Dart_%28programming_language%29)，但是 Dart 可以编译成 JavaScript 并在任何浏览器上运行。[CoffeeScript](http://en.wikipedia.org/wiki/CoffeeScript)和 Dart 一样，也可以编译成 JavaScript 并在浏览器中运行。

ECMAScript 是“唯一”客户端语言的主要原因是每个浏览器都必须实现自己的规范版本。这就是为什么大多数供应商倾向于使用能够运行他们的脚本语言的插件，而不是试图说服浏览器供应商为他们的语言实现虚拟机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:19:10.613

Microsoft 曾经在 Internet Explorer 中添加了一个[**VBScript**](http://en.wikipedia.org/wiki/VBScript)解释器作为 JavaScript 的替代方案。他们还使用术语[**JScript**](http://en.wikipedia.org/wiki/JScript)而不是 JavaScript 来实现自己的实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T11:19:27.587

您可以有多种类型，请参阅此链接： [http ://www.w3schools.com/tags/att_script_type.asp](http://www.w3schools.com/tags/att_script_type.asp)

类型示例：

> text/javascript（默认）
> text/ecmascript
> application/ecmascript
> application/javascript
> text/vbscript
> text/jscript

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:19:36.977

VBScript，你可以有 java 小程序（它们很旧而且我不会），它几乎总结了客户端编码，然后服务器端（CGI）你有 PHP、ASP.NET、Python、C 之类的东西

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T11:20:15.337

如果您加载正确的解析器，您可以使用一些语言：

*   [咖啡脚本](http://coffeescript.org/)
*   [加工](http://processing.org/)
*   [活泼的内核](http://www.lively-kernel.org/)
*   还有一些

有关更多示例，请参阅[编译为 JavaScript 的语言列表。](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T11:23:12.567

如果您检查 w3c，您可以找到支持脚本的参考。

那里指定的三个主要脚本是

1.  JavaScript

2.  VBScript

3.  tcl

[http://www.w3.org/TR/html4/interact/scripts.html](http://www.w3.org/TR/html4/interact/scripts.html)

有关支持的脚本类型的更多信息。请通过这个 SO 帖子

[HTML 脚本标签中允许哪些语言类型？](https://stackoverflow.com/questions/2872037/what-language-types-are-allowed-in-the-html-script-tag)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T11:26:36.380

JavaScript 将是唯一被广泛（如果不是普遍）支持的。

VBScript 可以在 IE 中作为 JavaScript 的替代品使用，但从未流行起来。

现在有很多语言可以**编译成 JavaScript**并且可以用于前端 Web 开发，例如：

*   [咖啡脚本](http://coffeescript.org/)
*   [镖](http://www.dartlang.org/)
*   [打字稿](http://www.typescriptlang.org/)
*   [脚本＃](http://scriptsharp.com/)

这些不会被浏览器本地解释（Chrome 支持的 Dart 除外）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-02T05:40:53.137

有可能使用像 requirejs 这样的客户端模块加载器，例如可以加载本地 Coffeescript 文件并在客户端上编译它们。

但是我不会这样做，因为它会增加加载和执行时间。

# ios - TableView NSInternalInconsistencyException

> ID：13156668
> 
> 赞同：2
> 
> 时间：2012-10-31T11:17:31.927
> 
> 标签：ios, objective-c, xcode, uitableview, cocoa-touch

更新：似乎我设法识别了单元格，因此解决了原始问题。但是现在，剪断相同的代码，我收到以下错误：

```
2012-10-31 15:21:41.857 Laktase[22658:11603] -[NSManagedObject isEqualToString:]: unrecognized selector sent to instance 0x74a5a30
2012-10-31 15:21:41.858 Laktase[22658:11603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObject isEqualToString:]: unrecognized selector sent to instance 0x74a5a30'
*** First throw call stack:
(0x1f9f012 0x13dce7e 0x202a4bd 0x1f8ebbc 0x1f8e94e 0x1714af 0x171674 0x4430 0xd2f4b 0xd301f 0xbb80b 0xcc19b 0x6892d 0x13f06b0 0x259bfc0 0x259033c 0x259beaf 0x1078cd 0x501a6 0x4ecbf 0x4ebd9 0x4de34 0x4dc6e 0x4ea29 0x51922 0xfbfec 0x48bc4 0x48dbf 0x48f55 0x51f67 0x15fcc 0x16fab 0x28315 0x2924b 0x1acf8 0x1efadf9 0x1efaad0 0x1f14bf5 0x1f14962 0x1f45bb6 0x1f44f44 0x1f44e1b 0x167da 0x1865c 0x268d 0x25b5 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

// 更新结束

我正在尝试查询数据库，然后第一次在表中列出结果。

当我将 numberOfRowsInSection 从 0 更改为 [matchingData count] 时，应用程序崩溃并出现 NSInternalInconsistencyException 错误。matchData 是一个包含核心数据结果的数组。我只是不知道为什么 [matchingData count] 不起作用。

这是我的代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Tablette" inManagedObjectContext:context];
    NSFetchRequest *request = [NSFetchRequest new];
    [request setEntity:entity];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"dosis >= 0"]; // @"ANY Tablette.dosis like '1'"];
    [request setPredicate:predicate];
    NSError *error;
    NSArray *matchingData = [context executeFetchRequest:request error:&error];
    return [matchingData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

// Configure the cell...

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Tablette" inManagedObjectContext:context];
NSFetchRequest *request = [NSFetchRequest new];
[request setEntity:entity];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"dosis >= 1"];
[request setPredicate:predicate];
NSError *error;
NSArray *matchingData = [context executeFetchRequest:request error:&error];

cell.textLabel.text = [matchingData objectAtIndex:indexPath.row];

return cell;
} 
```

这是一个例外：

```
2012-10-31 12:10:38.995 Laktase[21797:11603] *** Assertion failure in -[UITableView dequeueReusableCellWithIdentifier:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:4460
2012-10-31 12:10:38.996 Laktase[21797:11603] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'unable to dequeue a cell with identifier Cell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard'
*** First throw call stack:
(0x1f9f012 0x13dce7e 0x1f9ee78 0xb66f35 0xc9d14 0x4078 0xd2f4b 0xd301f 0xbb80b 0xcc19b 0x6892d 0x13f06b0 0x259bfc0 0x259033c 0x259beaf 0x1078cd 0x501a6 0x4ecbf 0x4ebd9 0x4de34 0x4dc6e 0x4ea29 0x51922 0xfbfec 0x48bc4 0x48dbf 0x48f55 0x51f67 0x15fcc 0x16fab 0x28315 0x2924b 0x1acf8 0x1efadf9 0x1efaad0 0x1f14bf5 0x1f14962 0x1f45bb6 0x1f44f44 0x1f44e1b 0x167da 0x1865c 0x249d 0x23c5 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:32:09.777

您必须为 Nib/Storyboard 中的原型单元分配正确的单元标识符。

错误很明显：'无法使具有标识符 Cell 的单元出队 - 必须注册一个 nib 或一个类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:16:53.880

代替：

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

尝试以下操作：

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

测试单元格是否为空非常重要，总是发生在部分配置的第一个单元格上

```
if (cell == nil)
{ //alloc the cell explicitily

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:kCellID];
    .....
}

// Configure the cell.
[self configureCell:cell atIndexPath:indexPath]; 
```

祝你今天过得愉快

# java - proguard 没有正确混淆

> ID：13156669
> 
> 赞同：1
> 
> 时间：2012-10-31T11:17:38.483
> 
> 标签：java, proguard

我尝试使用 proguard 混淆 jar 文件中的两个类。我的一个班有 12 种方法。我以命令和 gui 形式运行 proguard。但是只有 12 种方法中的两种方法被混淆了，另外 10 种方法消失了。任何人都知道为什么会发生这种情况？（它的运行没有错误）另一个问题是我在一个类中的公共方法转换为私有，因此当我将我的 jar 文件添加到新项目时，它在另一个项目中不可访问。谢谢

```
 this is my config file:
-injars       PKTB.jar
-outjars      PKTB_out.jar
-libraryjars  "J:\Program Files (x86)\Java\jdk1.6.0\jre"
-libraryjars   "C:\Users\Mohsen\Downloads\bcprov-jdk15on-147.jar"
-libraryjars  "C:\Users\Mohsen\Downloads\bcpkix-jdk15on-147.jar"

-printmapping proguard.map
-keep public class pktb.PKTB{
    public static void main(java.lang.String[]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:21:58.060

proguard 删除未使用的类、方法和变量。在“收缩选项”下查看[`-dontshrink`此处](http://proguard.sourceforge.net/#manual/usage.html)

您需要保留在 jar 之外使用的方法/类名称，而不仅仅是主要方法。查看`-keep`“保留选项”下同一链接中的选项

# jsf - 如何注入@FacesConverter？

> ID：13156671
> 
> 赞同：14
> 
> 时间：2012-10-31T11:17:48.900
> 
> 标签：jsf, jakarta-ee, dependency-injection, cdi

我写了一个转换器。我正在使用 CDI 和注入并行。在这种情况下，类不会被注入。我怎样才能使注射成为可能？

```
@FacesConverter(forClass = MyClass.class)

public class MyConverter implements Converter{

    @EJB
    private ClassForEJB classForEJB;

    @Inject
    private ClassForInject classForInject;

// Converter Methods
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-31T11:26:10.890

`@FacesConverter`不是合格的注入目标。将其替换为`@ManagedBean`或`@Named`。如果您也想使用 CDI，请使用`@Named`.

```
@Named
@ApplicationScoped // I assume that your converter doesn't have any state.
public class MyConverter implements Converter {
    // ...
} 
```

您只需要更改在视图中引用它的方式。你不能再依赖`forClass`了。您需要将其明确指定为`#{myConverter}`.

```
<h:inputSomething ... converter="#{myConverter}" /> 
```

或者

```
<h:inputSomething ...>
    <f:converter binding="#{myConverter}" />
</h:inputSomething> 
```

如果你真的需要`@FacesConverter`支持`forClass`，那么你需要通过 JNDI 手动获取 EJB。[此博客文章](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#GettingAnEJBInFacesConverterAndFacesValidator)中显示了一个具体示例。但是，对于 CDI bean，我不能说。

JSF 人员已经确认了这一令人尴尬的疏忽，他们将`@FacesConverter`在即将到来的 JSF 2.2 中将其作为合格的注入目标~~，另请参阅[JSF 规范问题 763](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-763)~~ JSF 2.3。

### 也可以看看：

*   [如何在@FacesConverter 中注入@EJB、@PersistenceContext、@Inject、@Autowired 等？](https://stackoverflow.com/questions/7665673/how-to-inject-ejb-persistencecontext-inject-autowired-etc-in-facesconve)

* * *

**如果您碰巧使用 JSF 实用程序库[OmniFaces或愿意使用它，请](http://omnifaces.org)**更新**，因为它的 1.6 版，当只有 OmniFaces JAR in 时，您的 webapp 中的`/WEB-INF/lib`所有`@FacesConverter`s（和s）都会[自动](http://showcase.omnifaces.org/cdi/FacesConverter)符合 CDI 和 EJB 注入的条件，而无需任何额外努力。`@FacesValidator`**

# html - 将图像添加到输入字段的前面

> ID：13156675
> 
> 赞同：0
> 
> 时间：2012-10-31T11:18:19.833
> 
> 标签：html, css

我想将图像添加到输入字段的前面，就像您在登录面板上看到的那样，它可能会在用户输入字段的前面显示用户的图标。然而，我所有的谷歌搜索返回都将背景图像添加到输入字段。

有人知道任何教程或有如何完成的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:20:52.770

将它包裹在一个div中，将背景图像放在div上。

```
.input_wrapper{background:url('myimage.png');}
input{background:none} 
```

# sphinx - 没有搜索的狮身人面像过滤器

> ID：13156676
> 
> 赞同：0
> 
> 时间：2012-10-31T11:18:25.263
> 
> 标签：sphinx

我需要获取过滤数据，而不需要一些搜索关键字。基本上想象这样的查询

```
select  ras.resource_id
from    resource_account_share ras, resource_account_share_contract rasc,
                                contract cnt
where   ras.id=rasc.share_id and rasc.contract_id=cnt.id and
                                (cnt.assignor_id='28' or cnt.assignee_id='28'))) 
```

在我的 sphinx.conf 中，我将属性设置为 assignor_id 和 assignee_id ，然后过滤插入 assignee id 和 assignor id ，但 api 需要插入一个我不需要的查询字符串。我什至没有搜索字符串的字段，也不需要它/。我只需要按 assignee_id 或 assignor_id 过滤数据。

那么我如何获得这些数据呢？

* * *

**[在http://sphinxsearch.com/info/faq/](http://sphinxsearch.com/info/faq/)上找到**编辑****

 *****如何在没有字符串属性的情况下按字符串列过滤、排序或分组？***

除了对多个索引进行精确的任意长度排序之外，您可以执行所有这些操作。

要过滤和分组，您可以将字符串替换为唯一的数字 ID。有时可以在数据库中创建一个查找字典（例如，对于城市或国家的固定列表），或者甚至使用现有的字典，用该字典中的 ID 替换字符串，然后对该 ID 进行过滤和分组。如果没有，您总是可以用它的校验和替换字符串，例如。在索引时从 MD5() 中获取 CRC32() 或（任何）64 位（无需更改表！），分别使用 sql_attr_uint 或 sql_attr_bigint 存储它，然后对该校验和属性进行过滤或分组。（请注意，如果您有数百万个字符串，则存在一定的 CRC32() 冲突机会，但 MD5() 冲突的机会几乎为零。）

排序更难，但在某种程度上也是可能的。首先，您可以使用 sql_attr_str2ordinal 将每个字符串替换为其序号（该索引中提到的所有 uniqie 字符串的排序列表中的序号）。但是，一次查询多个索引时会产生乱码结果，因为每个索引都会将自己的序号分配给相同的字符串。IE。字符串“zzz”可能是索引 A 中的数字 1000，但同时索引 B 中的数字 1，并且在搜索 A+B 时错误地浮动到顶部。其次，您可以提取 4 字节或 8 字节子字符串，将它们存储为属性，然后对这些属性进行排序。这将适用于不同的索引，但仅对几个前字节进行排序。

但是真的不明白怎么做。

* * *

**编辑#2**

好的..基本上它有很多表和一个巨大的 sql 查询，但我会采取其中的一小部分并使其尽可能简单，这说明了我的问题，因为其他一切都基本相同.. 所以......

**表**

记录表

```
CREATE TABLE `recording` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(500) NOT NULL DEFAULT ''
) ENGINE=InnoDB AUTO_INCREMENT=4888 DEFAULT CHARSET=utf8; 
```

资源帐户共享

```
CREATE TABLE `resource_account_share` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `resource_id` int(10) unsigned NOT NULL,
  `account_id` int(10) unsigned NOT NULL
) ENGINE=InnoDB AUTO_INCREMENT=33392 DEFAULT CHARSET=utf8; 
```

**mysql查询**

```
select  cmp.id, cmp.title_en as `title`,
                    date_format(cmp.released_date, '%d.%m.%Y') released_date,
                    cmp.ean, cmp.isrc, cmp.performers
            from    recording cmp
            where 1=1
            and (cmp.id in (select resource_id from resource_account_share where account_id='?') 
```

? - 是 account id ，在提交搜索时插入。

我很确定我想做的是用 setSelect 做的，但由于我不明白它是如何工作的，所以我的计划是......

1) 索引记录表

2）索引resource_account_share表

3) 然后我 sphinx.conf 设置 2 个来源：来源记录和来源 resource_account_share

```
source recording
{
    type            = mysql

    sql_host        = localhost
    sql_user        = user
    sql_pass        = password
    sql_db          = db
    sql_port        = 3306  # optional, default is 3306

    sql_query       = \
        select  cmp.id, cmp.title_en as `title`,\
                    date_format(cmp.released_date, '%d.%m.%Y') released_date,\
                    cmp.ean, cmp.isrc, cmp.performers\
            from    recording cmp

    sql_attr_uint       = id
    sql_query_info      = SELECT * FROM recording WHERE id=$id
}

source resource_account_share
{
    type            = mysql

    sql_host        = localhost
    sql_user        = user
    sql_pass        = password
    sql_db          = db
    sql_port        = 3306  # optional, default is 3306

    sql_query       = \
        select resource_id from resource_account_share

    sql_attr_uint       = account_id
    sql_query_info      = SELECT * FROM recording WHERE id=$id
} 
```

`$cl->SetFilter('account_id',array('28'));`4）然后在php文件中通过account_id（ ）过滤resource_account_share

5) 从resource_account_share 索引中获取数据并将此数据插入到记录表过滤器中

```
$cl->SetFilter('id',array(data_fetched_from_resource_account_share)); 
```

这里可能会出错，因为 a 是在运行中编写的，只是将一些真正的查询切成两半，但你明白了.....我的问题是我不知道如何将这些表与 sphinx 链接，这就是我想要的原因先过滤resource_account_share表，但是卡在了问题上，我不能过滤，我也需要搜索一些关键字，我在这里不需要......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-07T09:35:47.810

根据文档[http://sphinxsearch.com/docs/archives/1.10/matching-modes.html](http://sphinxsearch.com/docs/archives/1.10/matching-modes.html)

> SPH_MATCH_FULLSCAN，匹配查询，强制使用“全扫描”模式，如下所示。注意，任何查询词都将被忽略，因此过滤器、过滤器范围和分组仍将被应用，但没有文本匹配。

你应该使用

```
$cl->setMatchMode(SPH_MATCH_FULLSCAN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:16:20.880

只需插入一个空查询字符串，例如 $sphinx->Query('','indexname')**

# ravendb - RavenStudio 使用什么查询和索引来聚合集合选项卡中显示的文档类型？

> ID：13156680
> 
> 赞同：0
> 
> 时间：2012-10-31T11:18:33.670
> 
> 标签：ravendb

我想为我的 Raven 数据库中的每个文档获取 Raven-Clr 类型。我尝试了以下索引，但仅检索文档 ID：

地图：

```
from doc in docs 
let DocumentType = doc[""@metadata""][""Raven-Entity-Name""]
let Id = doc[""@metadata""][""Id""]
let LastModified = (DateTime)doc[""@metadata""][""Last-Modified""]
select new {DocumentType = doc[""@metadata""][""Raven-Entity-Name""], Id, LastModified} 
```

转换：

```
from result in results
            select new {Id = result.Id, DocumentType = result.DocumentType, LastModified = result.LastModified} 
```

我的目标是获取文档元数据并显示不同的集合/文档类型列表，例如 RavenStudio。我想创建一个投影并填充以下类的列表：

```
public class MetaDocument
{
  public string Id{get; set;}
  public string DocumentType {get; set;}
  public DateTime LastModified {get; set;}
} 
```

我只能获取 doc id，其他值返回为 null。

**注意** 我按照 Fitzchak 的建议检查了 Raven-Entity-Name。它是人口。

**编辑**

我[在 Google Groups 上发现了这种方法，](https://groups.google.com/forum/#!msg/ravendb/rtCTvW3Giy4/mhoqmlR9ozMJ)其中 Map 被更改为包含

```
DocumentType = ((dynamic)doc)[""@metadata""][""Raven-Entity-Name""] 
```

结果是一样的。

**编辑 2**

我检查了 RavenStudio 中的查询结果，投影本身包含 LastModified 和 DocumentType 的 null。这些字段是否需要存储才能访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:33:04.330

RavenDB Studio 使用`Raven/DocumentsByEntityName`由工作室创建的索引（默认情况下）。它是一个简单的索引（仅限地图）。

地图：

```
from doc in docs 
let Tag = doc["@metadata"]["Raven-Entity-Name"]
select new { Tag, LastModified = (DateTime)doc["@metadata"]["Last-Modified"] }; 
```

# objective-c - 使用 iphone 中的预定通知数组将今天的日期与预定通知列表进行比较

> ID：13156681
> 
> 赞同：0
> 
> 时间：2012-10-31T11:18:33.677
> 
> 标签：objective-c, notifications, nsarray

我使用 [[UIApplication sharedApplication] scheduledLocalNotifications] 获得了所有计划通知的列表。

现在我想要所有被触发的数组将它与今天的日期进行比较，并给出一个警报视图，告诉今天到期的提醒。我是通过这种方式做到的，但不确定它是否能正常工作。请纠正我，因为我是 iPhone 开发的新手。

```
NSArray *arrayoflocalnotifications = [[NSArray alloc] initWithArray:[[UIApplication sharedApplication]scheduledLocalNotifications]];

for (UILocalNotification *localnotif in arrayoflocalnotifications)
{
     NSLog(@"array of firedate is %@", localnotif);

    if ([localnotif.fireDate isEqualToDate:[NSDate date]])
    {
        NSLog(@"Got a duetoday reminder...");

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"AlertView" message:@"Due reminder for today" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
        [alert show];
        [alert release];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:34:56.617

只需使用 compare: 函数来比较两个不同的日期。像这样使用它；

```
if(localnotif.fireDate compare:[NSDate date] == NSOrderedSame){
 // perform your operation here
} 
```

**compare：通过将日期与****NSOrderedAscending/NSOrderedDescending**进行比较，可以灵活地比较日期是在某个日期之前还是之后。

# c# - RadGrid 不分页

> ID：13156682
> 
> 赞同：0
> 
> 时间：2012-10-31T11:18:34.857
> 
> 标签：c#, data-binding, telerik, radgrid, page-index-changed

当显示 RadGrid 时，我会显示分页，但是当我尝试单击下一页时，RadGrid 消失了。

以下是可能有助于解决此问题的屏幕截图

![asp页面](../Images/21fd3ead032c0094ea8ba27bba9168bb.png)

![这是最初加载 RadGrid 的位置](../Images/32dbe5350865537ab5cae1dd6e381cc3.png)

![这是pageindexchanged](../Images/fb8e7b72ca6059bf9d974f602024e3bd.png)

请提供一些指导以帮助我解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:07:44.520

你不需要这个`PageIndexChanged`事件，因为你没有在那里做任何时髦的事情。

正如 Ali Issa 所说，您应该使用该`OnNeedDataSource`事件，该事件将在您获取下一页时被调用。

所以请按照以下步骤操作：

1.  删除以下代码：

    ```
    protected void RadGrid1_PageIndexChanged(object source, Telerik.Web.UI.GridPageChangedEventArgs e)
    {
        this.GridView1.CurrentPageIndex = e.NewPageIndex;
        GridView1.DataSource = tbl;
        GridView1.DataBind();
    } 
    ```

    在您的 aspx 文件中：

    `OnPageIndexChanged="RadGrid1_PageIndexChanged"`

2.  并添加以下代码：

    ```
    protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
    {
        GridView1.DataSource = tbl;
    } 
    ```

    在您的 aspx 文件中：

    `OnNeedDataSource="RadGrid1_NeedDataSource"`

最后一件事：不要忘记您的`tbl`变量必须在每次服务器调用时重新分配（除非`tbl`是`Session`变量）。因此，请确保 tbl 至少在您的文件中定义，`Page_Load`但最好是替换`tbl`为某些数据库调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:20:41.633

尝试在`NeedDataSource`事件上绑定网格，然后在`pageindexchanged`通话中`Gridview1.Rebind();`

# iphone - 每周上课时间表 IOS

> ID：13156688
> 
> 赞同：0
> 
> 时间：2012-10-31T11:19:10.043
> 
> 标签：iphone, ios, timetable

我查看了现有的日历 API，例如 Kal，但我希望有一种好方法来存储一周的讲座时间并以某种每周视图显示它们？

我不需要将 repeatInterval 选项与 datePicker 一起使用，因为我只需要将讲座设置为一周并保持不变

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:26:27.697

这可能会帮助你 [tapku -calender](https://github.com/devinross/tapkulibrary)

[ios-日历](https://github.com/vgrichina/ios-calendar)

# linq - Linq Left outer Join 与所有列选择并绑定到 Gridview

> ID：13156693
> 
> 赞同：0
> 
> 时间：2012-10-31T11:19:26.837
> 
> 标签：linq, entity-framework

我正在尝试将网格视图与 Linq 左外连接绑定（我想从“prdct in context.Products”中选择所有列）。

我的查询是：

```
gridProducts.DataSource = (from prdct in context.Products
                           join comp in context.ProductCompanies on prdct.productCompany equals comp.prdctCompId 
                           into firstJoin
                           from fj in firstJoin.DefaultIfEmpty()

                           join cat in context.ProductCategories on prdct.productCategory equals cat.prdctCatId
                           into finalresult
                           from fr in finalresult.DefaultIfEmpty()

                           select new
                                      {
                                          prd = prdct,
                                          fj.prdctCompName,
                                          fr.prdctCatName
                                      }).ToList();

gridProducts.DataBind(); 
```

我检查了查询生成的 SQL，它在 SQL Server 中显示记录，但在绑定到 gridview 时它在我的应用程序中引发错误：

> id 为“grdD”的 GridView 的数据源没有任何属性或属性可用于生成列。确保您的数据源有内容。

# linux - 如何使用 ip6tables 生成 ICMPv6 “packet-too-big”

> ID：13156695
> 
> 赞同：1
> 
> 时间：2012-10-31T11:19:29.553
> 
> 标签：linux, ipv6, iptables

使用 ip6tables 可以生成以下 ICMP 错误代码（根据手册页）：

```
--reject-with type
              The  type  given  can   be   icmp6-no-route,   no-route,   icmp6-adm-prohibited,   adm-prohibited, icmp6-addr-unreachable,  addr-unreach,  icmp6-port-unreachable  or  port-unreach  which return the appropriate ICMPv6 error message (port-unreach is the default). 
```

例子：

```
[root@outside-pc ~]# ip6tables -A INPUT -s 2001::/64 -p ICMPv6  -j REJECT --icmpv6-type destination-unreachable
[root@outside-pc ~]# ip6tables -S
-P INPUT ACCEPT
-P FORWARD ACCEPT
-P OUTPUT ACCEPT
-A INPUT -s 2001::/64 -p ipv6-icmp -m icmp6 --icmpv6-type 1 -j REJECT --reject-with icmp6-port-unreachable 
```

***是否可以使用 ip6tables 生成其他错误代码，例如“packet-too-big”（类型 2，代码 0）？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:02:15.630

不幸的是，您的问题的简单答案似乎是“不”。[您可以在此处](https://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=net/ipv6/netfilter/ip6t_REJECT.c;h=fd4fb34c51c7f5b9bd62294de2abb6da943ee494;hb=HEAD#l182)`REJECT`看到带有实现目标的内核代码，它看起来像这样：

```
static unsigned int
reject_tg6(struct sk_buff *skb, const struct xt_action_param *par)
{
    const struct ip6t_reject_info *reject = par->targinfo;
    struct net *net = dev_net((par->in != NULL) ? par->in : par->out);

    pr_debug("%s: medium point\n", __func__);
    switch (reject->with) {
    case IP6T_ICMP6_NO_ROUTE:
        send_unreach(net, skb, ICMPV6_NOROUTE, par->hooknum);
        break;
    case IP6T_ICMP6_ADM_PROHIBITED:
        send_unreach(net, skb, ICMPV6_ADM_PROHIBITED, par->hooknum);
        break;
    case IP6T_ICMP6_NOT_NEIGHBOUR:
        send_unreach(net, skb, ICMPV6_NOT_NEIGHBOUR, par->hooknum);
        break;
    case IP6T_ICMP6_ADDR_UNREACH:
        send_unreach(net, skb, ICMPV6_ADDR_UNREACH, par->hooknum);
        break;
    case IP6T_ICMP6_PORT_UNREACH:
        send_unreach(net, skb, ICMPV6_PORT_UNREACH, par->hooknum);
        break;
    case IP6T_ICMP6_ECHOREPLY:
        /* Do nothing */
        break;
    case IP6T_TCP_RESET:
        send_reset(net, skb);
        break;
    default:
        net_info_ratelimited("case %u not handled yet\n", reject->with);
        break;
    }

    return NF_DROP;
} 
```

如您所见，它仅支持您已经发现的类型。

# javascript - 如何将元素高度附加为其他元素样式值

> ID：13156697
> 
> 赞同：0
> 
> 时间：2012-10-31T11:19:37.320
> 
> 标签：javascript, jquery, css, height

我的脚本有点问题。我想获取某个元素的高度，并将这个 var/value 作为其他元素在 css 中的顶部位置。这是我的代码：

```
 var lb_img_size = $('.lb_photo_panel img').height();
 $('.lb_close_button').css('top', lb_img_size + 'px'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:22:09.747

用这个：

```
$('.lb_close_button').css('top',$('.lb_photo_panel img').css('height')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:21:34.893

这仅在您将`.lb_close_button`的`position`css 属性设置为 absolute时才有效

# mysql - 如何忽略错误 1139（模式错误的 REEXXP 运算符）？

> ID：13156698
> 
> 赞同：0
> 
> 时间：2012-10-31T11:19:38.023
> 
> 标签：mysql, regex

考虑下表：

```
mysql> select * from test;
+---------+
| col     |
+---------+
| ^test$  |
| tes$()t |
| X$%[    |
| test$   |
| ^test   |
| test    |
| [       |
+---------+
7 rows in set (0.04 sec) 
```

它包含有效和无效的模式。

如果我做 ：

```
mysql> select * from test where 'test' regexp col;
+--------+
| col    |
+--------+
| ^test$ |
| test$  |
| ^test  |
| test   |
+--------+
4 rows in set (0.04 sec) 
```

我得到模式匹配“测试”的所有行，而所有其他行（包括无效模式）都被忽略。

现在，如果我直接执行无效请求，则会收到模式语法错误：

```
mysql> select * from test where 'test' regexp '[';
ERROR 1139 (42000): Got error 'brackets ([ ]) not balanced' from regexp 
```

有没有办法（没有另一个表）强制 MySQL 忽略这些错误（例如会给出一个空结果）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:26:38.413

```
select * from test where 'test' like '['; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:27:24.373

好吧，我找到了一个可行的解决方案，这很棘手，但可行：

```
SELECT * FROM test WHERE 'test' REGEXP RIGHT(CONCAT(col, '['), LENGTH('[')); 
```

用您的正则表达式模式替换 '['。如果您允许您的客户使用正则表达式，可能会很有用。

# java - 使用 @BeforeClass 方法中设置的不同参数执行 TestNG 测试

> ID：13156699
> 
> 赞同：0
> 
> 时间：2012-10-31T11:19:41.593
> 
> 标签：java, parameters, testng

我想用不同的持久性单元测试一些代码。因此，我编写了两个相同的 TestNG 测试类，它们仅在我传递给以`Persistence#createEntityManagerFactory`获取正确工厂的持久性单元的名称上有所不同。

此调用位于使用 `@BeforeClass` 注释的设置方法中

```
@BeforeClass
public void setupClass() {
    emf = Persistence.createEntityManagerFactory("test-eclipselink-h2");
    em = emf.createEntityManager();
    // init with some dummy data

    // ... some more initialization
} 
```

使用不同的持久性单元执行这个测试类的选项是什么？在测试类中硬编码名称就足够了，无需在外部指定它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:15:18.893

```
public class A {
    private String s;

    @DataProvider
    public Object[][] dp() {
        return new Object[][] {
          new Object[] { "test-eclipselink-h1" },
          new Object[] { "test-eclipselink-h2" }
        };
      }

    @Factory(dataProvider = "dp")
    public A(String s) {
        System.out.println("Creating test class with " + s);
        this.s = s;
    }

    @Test
    public void test() {
        System.out.println("Test " + s);
    }
} 
```

# c++ - Qt：在哪里放置连接语句？

> ID：13156703
> 
> 赞同：3
> 
> 时间：2012-10-31T11:19:56.930
> 
> 标签：c++, qt

我有一个小部件 (mainWidget) 和另一个小部件 (childWidget)，它是它的子部件。

我想要：

```
connect(childWidget, SIGNAL(somethingHappened(...)), mainWidget, SLOT(handleIt(...)); 
```

我的问题是：是否将连接语句放在 mainWidget 或 childWidget 中？

*   如果我在 mainWidget 的构造函数中创建 childWidget 并将 connect 语句放在下一行，它就可以工作。但是，假设 childWidget 在创建后会执行某些操作，然后向
    mainWidget 发出成功信号。您可能会遇到这样的情况，即连接语句仅出现在发出信号的（childWidget 的）函数之后。

*   如果我将连接语句放在 childWidget 的构造函数中，
    问题是它不知道任何关于父
    插槽的信息。如果我让 childWidget 继承 mainWidget，它确实知道
    插槽 - 但这对我来说是一个糟糕的解决方案。无论如何都无法让它工作。可能有一种正确的方法可以做到这一点 - 我还在寻找。

我对 Qt 编程很陌生。提前：感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:28:27.733

你应该很好地设计你的代码以避免神秘错误的蔓延。在主小部件中编写连接会是一个更好的主意，理想情况下，子小部件的构造函数中不应该有发射。可能您可以将发出代码移到另一个块并在构建完成后进行调用。从 'mainWidget' 子类化 'childwidget' 只是为了访问它的插槽看起来像一个不灵活的设计。设计应该这样，如果任何类知道你的类发出的信号，另一个类应该能够灵活地连接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:02:48.620

我总是在创建子类的对象构造之后进行连接调用。原因很简单：创建孩子的对象知道孩子拥有什么信号/插槽以及它需要哪些信号/插槽，但孩子不能知道，更重要的是不应该知道。如果孩子对其父母的期望超过了必要的程度，您将限制代码的可重用性。

你是对的，构造函数中的信号不会被任何人听到。只是不要在构造函数中使用信号，就像不应该在构造函数中使用虚函数一样。如果您必须在初始化时发出信号，请编写一个单独的`ini`函数并在`connect`.

您也可以`qobject_cast`在运行时使用来确定父级的类型，但这只是糟糕的设计。

# mysql - MySQL GROUP BY 优化 - InnoDB 与 MyISAM？

> ID：13156706
> 
> 赞同：5
> 
> 时间：2012-10-31T11:20:05.273
> 
> 标签：mysql, sql, group-by, query-optimization

## 问题

有谁知道为什么基于 MyISAM 的表没有 GROUP BY 优化？（我使用的是这个版本：5.1.49-3）

## 测试表

```
CREATE TABLE `_test2_innodb` (
    `i` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `n` smallint(5) unsigned NOT NULL,
    `t` int(10) unsigned NOT NULL,
    `v` smallint(6) NOT NULL,
    PRIMARY KEY (`i`),
    KEY `i_n` (`n`),
    KEY `i_t` (`t`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1

CREATE TABLE `_test2_myisam` (
    `i` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `n` smallint(5) unsigned NOT NULL,
    `t` int(10) unsigned NOT NULL,
    `v` smallint(6) NOT NULL,
    PRIMARY KEY (`i`),
    KEY `i_n` (`n`),
    KEY `i_t` (`t`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

## 测试查询

```
SELECT MAX(i) FROM _test2_myisam GROUP BY n;

SELECT MAX(i) FROM _test2_innodb GROUP BY n; 
```

## 结果

```
id, select_type, table, type, poss_keys, key, key_len, ref, rows, extra

1, SIMPLE, _test2_myisam , ALL, , , , , 19998, Using temporary; Using filesort

1, SIMPLE, _test2_innodb, index, , i_n, 2, , 20024, Using index 
```

问题是，如果我使用 MyISAM，将完成一次全表扫描，这在大型表上需要几个小时......而且 MySQL 文档没有提到任何关于具有不同实现的表引擎（[http://dev. mysql.com/doc/refman/5.0/en/group-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)）。有谁知道为什么内部处理方式不同？

（注意：不，切换到 InnoDB 不是一个好的解决方案）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:44:39.960

尽管定义看似相同，但这两个表之间的区别在于 MyISAM 表是“堆”，而 InnoDB 表是聚集组织的表，例如聚集索引是表（通常是主键，`(i)`这里的索引）。

导致执行计划不同的另一个区别是，在 InnoDB 中，所有非聚集索引（`(n)`在这种情况下是您的索引）也包括聚集索引的列，`(i)`在这种情况下，不需要全表扫描。

**换句话说，`(n)`InnoDB 索引大致相当于一个`(n, PK)`MyISAM 索引。**

MyISAM 引擎必须对索引进行全表扫描或索引扫描，`(n)`然后还要扫描表（以获取`i`列的值）。因此，它选择第一个计划（全扫描 + 文件排序来查找 MAX 值）。

* * *

`(n, i)`在 MyISAM 表中添加索引后，再次进行测试：

```
ALTER TABLE _test2_myisam
    ADD INDEX n_i (n, i) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:39:36.003

This is because InnoDB are stored in an index-organized way, based on the primary key. So the table scan and the primary key scan will be the same exact thing. Unfortunately for MyISAM, this is not the case, it will have to do a filesort.

# android - 全屏时 HTML 5 视频崩溃

> ID：13156707
> 
> 赞同：9
> 
> 时间：2012-10-31T11:20:05.580
> 
> 标签：android, webview, android-webview, html5-video, webchromeclient

我目前正在开发具有屏幕方向纵向的应用程序，并且我有需要全屏支持的 html 5 视频。我在 webview 中添加了一个 WebChromeClient，覆盖了一些方法。当我坚持纵向时一切正常，但是当我尝试在全屏时将方向切换到横向时，我遇到了崩溃。有什么线索吗？

重写方法：

```
public void onShowCustomView(View view, CustomViewCallback callback) {
    super.onShowCustomView(view, callback);
    if (mCustomViewContainer != null) {
        callback.onCustomViewHidden();
        return;
    }
    if(interfazWeb==null)
        interfazWeb = (FragTabActivity) getActivity();
        if (view instanceof FrameLayout) {
            mCustomViewContainer = (FrameLayout) view;
            mCustomViewCallback = callback;
            interfazWeb.getCustomContentView().setVisibility(View.INVISIBLE);
            interfazWeb.addContentView(mCustomViewContainer, new FrameLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT, Gravity.CENTER));
            interfazWeb.setBackDelegate(new BackDelegate(){

                public boolean shouldOverrideBackButton() {
                    if(mCustomViewCallback!=null){//first calling onHideCustomView()
                        onHideCustomView();
                        return true;
                    }
                    return false;
                }

            });
            mCustomViewContainer.bringToFront();
            //interfazWeb.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        }
    }

    @Override
    public void onHideCustomView() {
        // TODO Auto-generated method stub
            if(interfazWeb==null)
                interfazWeb = (FragTabActivity) getActivity();
            if(mCustomViewContainer!=null){
                ViewGroup parent = (ViewGroup) interfazWeb.getCustomContentView().getParent();
                if(parent!=null){
                    parent.removeView(mCustomViewContainer);
                    interfazWeb.getCustomContentView().setVisibility(View.VISIBLE);
                }
            }
            if(mCustomViewCallback!=null){
                mCustomViewCallback.onCustomViewHidden();
                mCustomViewCallback = null;
            }
            //interfazWeb.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }

        @Override
        public Bitmap getDefaultVideoPoster() {
            // TODO Auto-generated method stub
            return Bitmap.createBitmap(1, 1, Config.ARGB_8888);
        }

        @Override
        public View getVideoLoadingProgressView() {
            // TODO Auto-generated method stub
            return new ProgressBar((Context) getActivity());
        } 
```

日志说：

```
10-31 11:09:36.336: E/AndroidRuntime(8098): java.lang.NullPointerException
10-31 11:09:36.336: E/AndroidRuntime(8098):     at android.webkit.HTML5VideoView.isPlaying(HTML5VideoView.java:122)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at android.webkit.HTML5VideoViewProxy$VideoPlayer.isPlaying(HTML5VideoViewProxy.java:253)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at android.webkit.HTML5VideoViewProxy.handleMessage(HTML5VideoViewProxy.java:402)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at android.os.Looper.loop(Looper.java:137)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at android.app.ActivityThread.main(ActivityThread.java:4758)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at java.lang.reflect.Method.invokeNative(Native Method)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at java.lang.reflect.Method.invoke(Method.java:511)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-31 11:09:36.336: E/AndroidRuntime(8098):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：**我的清单中有这一行：

```
android:configChanges="keyboardHidden|orientation|locale|screenLayout" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:39:59.337

当您切换方向时，应用程序会从 oncreate 事件开始自行重置。它不仅仅是简单地改变高度和宽度以及相关的东西。这就是为什么您创建的控件之一出现空异常的原因这次不存在。可能是 HTML5View。

您应该做的是跟踪视频位置，并在切换时重新加载所有控件，从最后一个位置开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:35:37.110

您可以尝试通过将其添加到您的活动来处理清单中的方向更改：

```
android:configChanges="orientation|screenLayout" 
```

我曾经有同样的问题，但这对我有用。

# jquery - 如何使 Nivo 滑块响应

> ID：13156708
> 
> 赞同：4
> 
> 时间：2012-10-31T11:20:08.677
> 
> 标签：jquery, slider, responsive-design, nivo-slider

我在 WordPress 中使用 NivoSlider 并为主题实现了一些响应式 css，我还在 Nivo Slider 中修复了图像的宽度和高度以及背景大小，但它只显示正确的大小一次，然后在滑块中显示大图像。

这是网站的链接：[网站](http://rjmultimedia.in/innovatus/)

如果我遗漏了什么，请告诉我。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:31:53.817

nivo slider 正式宣布它是响应式的，这里是公告。

[http://nivo.dev7studios.com/2012/05/30/the-nivo-slider-is-responsive/](http://nivo.dev7studios.com/2012/05/30/the-nivo-slider-is-responsive/)

演示：

[http://nivo.dev7studios.com/responsive-demo/](http://nivo.dev7studios.com/responsive-demo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-20T03:59:07.190

css

```
 #nivoSlider, #nivoSlider img{width:100%;height:auto !important} 
```

HTML：

```
<div class="slider-wrapper theme-default">
    <div class="ribbon"></div>
    <div id="nivoSlider" class="nivoSlider">
       <img src="" />
    </div>
</div> 
```

# javascript - 为什么这个简单的“确认”javascript函数会出现意外行为

> ID：13156709
> 
> 赞同：1
> 
> 时间：2012-10-31T11:20:12.287
> 
> 标签：javascript, firefox

系统管理员和编码无知试图制作一个简单的工作页面。它有一个简单的javascript函数：

```
function run(job){
    var ok = confirm("Are you sure?");
    if(ok == true){
        location = 'job.php?op=' + job;
        window.location.href = location;
    } else {
        window.location.reload();
    }
} 
```

通过一个简单的按钮调用：

```
<button style="color: red" onclick="run('test1');">Test1</button> 
```

这里的关键字很简单，就像我的理解一样。

这在 Chrome 中有效，但该按钮在 Firefox（两种浏览器的当前版本）中没有任何作用。

在尝试调试脚本时，我在 .href 之前添加了一个简单的警告行，因此脚本如下所示：

```
function run(job){
    var ok = confirm("Are you sure?");
    if(ok == true){
        location = 'job.php?op=' + job;
        alert(location);
        window.location.href = location;
    } else {
        window.location.reload();
    }
} 
```

...然后该脚本也可以在 Firefox 中运行。我可以看到警报短暂出现，但它立即重定向并在几分之一秒内消失。但是在 Chrome 中，弹出窗口仍然存在，所以这不是一个好的解决方法，而且 Firefox 中的行为很奇怪，这告诉我我做错了。

我的问题是，为什么脚本的行为不一致，如何避免这种行为，使其在两个浏览器中保持一致，并且不需要额外的 alert()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:25:56.133

我认为这个问题可能`location`相当于`window.location`在那种情况下。由于您没有创建`location`局部变量，因此它将是隐含的全局变量。

将`location`变量重命名为其他名称或使用“var location”将其更改为局部变量：

```
 var location = 'job.php?op=' + job;
    alert(location);
    window.location.href = location; 
```

# objective-c - 更改日期时弹出窗口中的 NSDatePicker 图形表示

> ID：13156716
> 
> 赞同：0
> 
> 时间：2012-10-31T11:20:31.900
> 
> 标签：objective-c, macos, cocoa, popover, nsdatepicker

NSDatePicker 是否可以在更改日期时本机启用在弹出窗口中显示图形实现的功能？此类功能现在存在于 OS X 日历和提醒中。

或者我需要自己实现这样的功能？如果是这样，也许有这样的第三方实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:40:13.057

您可以创建一个弹出框并在其中放置一个 NSDatePicker，然后在 Interface Builder 中选择 NSDatePicker 是图形的。这就是它的全部内容，但也许你需要澄清这个问题，如果你所期待的还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T07:03:10.250

他问的是一些不同的东西。在 Apple 日历应用程序中，您有一个 TEXT NSDatePicker 控件。当用户点击控件时，它会扩展为图形日历的弹出框。

[https://www.dropbox.com/s/yzkeaqubq8u8cp4/Screenshot%202014-12-13%2000.02.19.png?dl=0](https://www.dropbox.com/s/yzkeaqubq8u8cp4/Screenshot%202014-12-13%2000.02.19.png?dl=0)

我个人也希望得到关于如何做到这一点的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T02:40:14.467

做@LighteningKid 的建议，然后像这样：#import

```
@interface DateCalendarPopOverViewController : NSViewController <NSDatePickerCellDelegate, NSPopoverDelegate>

@property (assign) IBOutlet NSDatePicker *graphicCalendar;

- (IBAction)datePicked:(id)sender;

@end 
```

# c# - 我想使用 C# 搜索以模式开头的字符串

> ID：13156717
> 
> 赞同：-3
> 
> 时间：2012-10-31T11:20:39.590
> 
> 标签：c#

我想搜索以另一个字符串开头的字符串。例子：

```
<br>
{<br>
Sujith,<br>
surjith,<br>
rejith,<br>
}</p><br> 
```

如果搜索词是“su”，应该：

```
return<br>
{<br>
Sujith,<br>
surjith,<br>
}</p><br>
but not rejith
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:23:18.013

You could use the [Regex](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx) class and build up yourself a [regular expression](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet) which does that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:23:18.793

You can use the StartsWith instance method on your string:

```
string searchString = "su";

List<string> result = nameList
                       .Where(x => x.StartsWith(searchString, true, System.Globalization.CultureInfo.CurrentCulture))
                       .ToList(); 
```

# c# - 如何告诉visual studio不需要第三方程序集签名？

> ID：13156718
> 
> 赞同：0
> 
> 时间：2012-10-31T11:20:39.270
> 
> 标签：c#, visual-studio, .net-assembly, signing, strongname

我有一个网站，其中包含一个经过严格签名的类库。

我需要使用尚未签名的第三方 .dll，并且我无权访问其源代码来对其进行签名。

我告诉视觉工作室不需要签署第三方程序集怎么可能？

它给了我以下错误：

错误 1 ​​程序集生成失败 - 引用的程序集“ThirdPartyDll”没有强名称。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:32:00.393

您不能使用已签名程序集中的未签名程序集，也无法按照您的要求进行操作。但是可以在没有源代码的情况下对程序集进行签名。

看看[这个](http://ryanfarley.com/blog/archive/2010/04/23/sign-a-.net-assembly-with-a-strong-name-without-recompiling.aspx)怎么做。

# javascript - 按值选择

> ID：13156721
> 
> 赞同：0
> 
> 时间：2012-10-31T11:20:46.587
> 
> 标签：javascript

```
<select id="selectBox">
  <option value="2"> two </option>
  <option value="4"> four</option>
  <option value="6"> six </option>
</select> 
```

我的值为 4，现在如何`selectBox`使用 javascript 选择值为 4？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:22:57.000

```
document.getElementById("selectBox").value=4;​ 
```

* * *

[**-- 查看演示 --**](http://jsfiddle.net/gptTP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:29:09.103

你也可以这样做

```
 <option value="4" selected="selected"> four</option> 
```

默认情况下，它被选中 vale 4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:46:20.303

你在找这个吗？

```
 <script type="text/javascript">
function fnc(myid,other1,other2)
{
    document.getElementById(myid).text=myid+" is selected";
    document.getElementById(other1).text=other1;
    document.getElementById(other2).text=other2;
}
</script>
<select id="selectBox">
  <option value="2" id="two" onclick="fnc(this.id,'four','six')"> two </option>
  <option value="4" id="four" onclick="fnc(this.id,'two','six')"> four</option>
  <option value="6" id="six" onclick="fnc(this.id,'two','four')"> six </option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:17:39.663

如果您使用的是 Jquery，您可以在 javascript 工作时进行编码。首先，您必须***选择***
`<option value="4"> four</option>`：`$("#selectBox option[value='4']")` 然后您必须将 selected 更改为 true。这是代码：

`$("#selectBox option[value='4']").attr('selected', true);`

# facebook - 用户在我的网络应用上使用 facebook 登录后如何显示 FB 昵称或个人资料图片

> ID：13156722
> 
> 赞同：0
> 
> 时间：2012-10-31T11:20:47.497
> 
> 标签：facebook

在 Facebook 连接到我的网络应用程序后，如何编辑以下代码以显示 Facebook 昵称或个人资料图片？

它目前工作正常，但登录后，登录按钮消失，没有显示 Facebook 用户信息。

```
<script src="//connect.facebook.net/en_US/all.js"></script>

<script type="text/javascript">

  // Initialize the Facebook JavaScript SDK
  FB.init({
    appId: 'APP_ID',
    xfbml: true,
    status: true,
    cookie: true,
  });

  // Check if the current user is logged in and has authorized the app
  FB.getLoginStatus(checkLoginStatus);

  // Login in the current user via Facebook and ask for email permission
  function authUser() {
    FB.login(checkLoginStatus, {scope:'email'});
  }

  // Check the result of the user status and display login button if necessary
  function checkLoginStatus(response) {
    if(response && response.status == 'connected') {
      alert('User is authorized');

      // Hide the login button
      document.getElementById('loginButton').style.display = 'none';

      // Now Personalize the User Experience
      console.log('Access Token: ' + response.authResponse.accessToken);
    } else {
      alert('User is not authorized');

      // Display the login button
      document.getElementById('loginButton').style.display = 'block';
    }
  }
</script>

<input id="loginButton" type="button" value="Login!" onclick="authUser();" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:03:46.637

```
<script type="text/javascript">

  // Initialize the Facebook JavaScript SDK
  FB.init({
    appId: '<APPID>',
    xfbml: true,
    status: true,
    cookie: true,
  });

  // Check if the current user is logged in and has authorized the app
  FB.getLoginStatus(checkLoginStatus);

  // Login in the current user via Facebook and ask for email permission
  function authUser() {
    FB.login(checkLoginStatus, {scope:'email'});
  }

function logout() {
FB.logout(function(response) {
  // user is now logged out
});

}

  // Check the result of the user status and display login button if necessary
  function checkLoginStatus(response) {
    if(response && response.status == 'connected') {
      alert('User is authorized');
      var userInfo = document.getElementById('user-info');
        FB.api('/me', function(response) {
        userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
        });i

      // Hide the login button
      document.getElementById('loginButton').style.display = 'none';

      // Now Personalize the User Experience
      console.log('Access Token: ' + response.authResponse.accessToken);
    } else {
      alert('User is not authorized');

      // Display the login button
      document.getElementById('loginButton').style.display = 'block';
    }
  }
</script>

<input id="loginButton" type="button" value="Login!" onclick="authUser();" />
<input id="logoutButton" type="button" value="Logout!" onclick="logout();" />
<div id="user-info"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:55:15.933

我想你就快到了！而不是警告“用户已授权”，您可以拥有以下内容：

`var userInfo = document.getElementById('user-info');`

`FB.api('/me', function(response) { userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' +
response.name;`

`});`

然后只需在您的登录按钮下创建一个 div：

`<div id="user-info"></div>`

# android - 保存片段状态时出现 NotSerializableException

> ID：13156727
> 
> 赞同：6
> 
> 时间：2012-10-31T11:21:07.867
> 
> 标签：android, android-fragments

我偶尔会看到我不太了解的异常。这就是我所做的：我有一个界面

```
public interface IResultProcessor<T> extends Serializable {

    void processResult(T result);

} 
```

，我在此类中使用的实例：

```
public class ConfirmationDialogFragment extends DialogFragment {

    public static void executeAfterConfirmation(FragmentActivity activity, IResultProcessor<Void> runnable,
        String title, String message, int icon, String positiveButtonText, String negativeButtonText) {

        ConfirmationDialogFragment fragment = new ConfirmationDialogFragment();
        Bundle args = new Bundle();
        args.putSerializable(ARG_RUNNABLE, runnable);
        fragment.setArguments(args);
        fragment.show(activity.getSupportFragmentManager(), "dialog");
    }

} 
```

在该`onCreateDialog()`方法中，`IProcessResult`如果用户确认，我会收到实例并执行它。

然后我在一个活动中使用所有这些，如下所示：

```
@SuppressWarnings("serial") 
IResultProcessor<Void> processor = new IResultProcessor<Void>() {

    @Override
    public void processResult(Void result) {
        new AsyncTask<Void, Void, String>() {

            @Override
            protected String doInBackground(Void... params) {
                DBFacade.INSTANCE.saveSession(session);
                return "My msg...";
            }

            @Override
            protected void onPostExecute(String result) {
                Toast.makeText(MyActivity.this, result, Toast.LENGTH_LONG).show();
            }

        }.execute((Void) null);
    }
};
ConfirmationDialogFragment.executeAfterConfirmation(this, processor, "Save session?", "dialog text", R.drawable.ic_dialog_info, "Save", "Don't save"); 
```

中保存的`session`对象`AsyncTask`没有实现`Serializable`（但`Parcelable`由于其他原因），是MyActivity的一个字段。

这是我看到的例外：

```
java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = MyActivity$3)
    at android.os.Parcel.writeSerializable(Parcel.java:1279)
    at android.os.Parcel.writeValue(Parcel.java:1233)
    at android.os.Parcel.writeMapInternal(Parcel.java:591)
    at android.os.Bundle.writeToParcel(Bundle.java:1619)
    at android.os.Parcel.writeBundle(Parcel.java:605)
    at android.support.v4.app.FragmentState.writeToParcel(Fragment.java:132)
    at android.os.Parcel.writeTypedArray(Parcel.java:1102)
    at android.support.v4.app.FragmentManagerState.writeToParcel(FragmentManager.java:357)
    at android.os.Parcel.writeParcelable(Parcel.java:1254)
    at android.os.Parcel.writeValue(Parcel.java:1173)
    at android.os.Parcel.writeMapInternal(Parcel.java:591)
    at android.os.Bundle.writeToParcel(Bundle.java:1619)
    at android.os.Parcel.writeBundle(Parcel.java:605)
    at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:2078)
    at android.app.ActivityThread$StopInfo.run(ActivityThread.java:2874)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.io.NotSerializableException: MyActivity
    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1364)
    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:368)
    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
    at android.os.Parcel.writeSerializable(Parcel.java:1274)
    ... 23 more
java.io.NotSerializableException: MyActivity
    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1364)
    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:368)
    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
    at android.os.Parcel.writeSerializable(Parcel.java:1274)
    at android.os.Parcel.writeValue(Parcel.java:1233)
    at android.os.Parcel.writeMapInternal(Parcel.java:591)
    at android.os.Bundle.writeToParcel(Bundle.java:1619)
    at android.os.Parcel.writeBundle(Parcel.java:605)
    at android.support.v4.app.FragmentState.writeToParcel(Fragment.java:132)
    at android.os.Parcel.writeTypedArray(Parcel.java:1102)
    at android.support.v4.app.FragmentManagerState.writeToParcel(FragmentManager.java:357)
    at android.os.Parcel.writeParcelable(Parcel.java:1254)
    at android.os.Parcel.writeValue(Parcel.java:1173)
    at android.os.Parcel.writeMapInternal(Parcel.java:591)
    at android.os.Bundle.writeToParcel(Bundle.java:1619)
    at android.os.Parcel.writeBundle(Parcel.java:605)
    at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:2078)
    at android.app.ActivityThread$StopInfo.run(ActivityThread.java:2874)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method) 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:52:47.527

我还没有完全理解，但显然解决了这个问题。当活动被破坏时抛出异常，因为另一个进入前台。我通过将匿名 IResultProcessor 类转换为我的活动的静态内部类来解决它。

# apache - 创建一个简单的重写规则

> ID：13156728
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:21:09.473
> 
> 标签：apache, mod-rewrite

我想改变这个：

```
http://example.com/hot-apps 
```

对此：

```
http://example.com/hot 
```

这是我使用的规则：

```
RewriteRule ^hot-apps$ iphone/hot 
```

但它不起作用？为什么，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:24:22.143

```
RewriteRule ^hot-apps$ hot 
```

这`iphone/`就是问题所在。

# python - 使用Python将单元格（X，Y）的值复制到Excel文件的同一张表中的单元格（A，B）

> ID：13156730
> 
> 赞同：1
> 
> 时间：2012-10-31T11:21:18.170
> 
> 标签：python, excel, xlrd, xlwt

我正在使用模块`xlwd`，`xlwt`并`xlutil`在 Python 中进行一些 Excel 操作。我无法弄清楚如何将单元`(X,Y)`格的值复制到`(A,B)`Python 中 Excel 文件的同一张表中的单元格。有人可以让我知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:47:38.610

```
import xlrd
import xlwt
import xlutils
from xlutils.copy import copy 

r_book = xlrd.open_workbook(fname)
w_book = xlutils.copy.copy(r_book)
r_sheet = r_book.sheets()[0] # Taking the first sheet
w_sheet = w_book.get_sheet(0)

x_y_value = r_sheet.cell(X, Y).value
w_sheet.write(A, B, x_y_value)
w_book.save(fname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:35:44.903

在数以万计的 2 个细胞上工作……相当微薄。通常，应该对行 x 列进行迭代。

# haskell - 沿着不同的“返回类型”函数定义和使用 StateT 的正确方法

> ID：13156732
> 
> 赞同：3
> 
> 时间：2012-10-31T11:21:26.993
> 
> 标签：haskell, monad-transformers

用一些数据来做我`State'`的程序状态。

```
type State' m a = StateT Int m a 
```

我会在一些计算中使用它。

例子：

```
-- genData, return some string (using Int value and State')
genData :: Int -> State' String
genData n = ...

-- genDatas, return multiple strings
genDatas :: Int -> State' [String]
genDatas n = mapM genData [1..n]

-- printLog, write log message (enumerating lines)
printLog :: String -> State' IO ()
printLog msg = do
  n <- get
  let n' = n + 1
  put n'
  liftIO $ putStrLn $ "Message #" ++ (show n') ++ ": " ++ msg 
```

我认为这不是正确的方法：

```
-- If I need a "in context function" returning a Int value...
--
-- addExtra, return current Int in state plus x
addExtra :: Int -> State' Identity Int
addExtra x = get >>= return.(+x) 
```

要`addExtra`在某些 monad 上下文中使用我的函数，我会这样做：

```
doComplex :: State' IO ()
doComplex = do
  printLog "Starting process..."

  -- It's ugly!
  s <- get
  Identity (w, s') <- return $ runStateT (addExtra 5) s
  put s' -- save state

  printLog $ "computed value: " ++ (show w) 
```

沿着不同功能共享我的`State'`monad 的正确方法是什么？（就像`IO a`做的那样）

谢谢！

（我已经阅读了一些教程和一些源代码，但我无法理解）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:38:05.883

## 回答你的问题

由于您的`addExtra`函数实际上并没有对底层 monad 做任何事情，因此您只需更改类型签名以使其与 monad 无关：

```
addExtra :: Monad m => Int -> State' m Int
addExtra x = get >>= return . (+x) 
```

现在你可以写这个

```
doComplex :: State' IO ()
doComplex = do
    printLog "Starting process..."

    w <- addExtra 5

    printLog $ "Computed value: " ++ show w 
```

哪个更漂亮，并且就像您的旧代码一样工作：

```
*Main> runStateT doComplex 0
Message #1: Starting process...
Message #2: Computed value: 6
((),2) 
```

## 在旁边

我可能很想重写`addExtra`以下内容之一。首先，要么使用 do 表示法

```
addExtra x = do s <- get
                return (s + x) 
```

或使用`liftM`，因为我们并没有真正使用我们有一个单子的事实

```
addExtra x = liftM (+x) get 
```

甚至使用[`gets`](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-State-Lazy.html#v%3agets)（感谢评论中的 Daniel Wagner）

```
addExtra x = gets (+x) 
```

当然，此时您可能不需要附加功能。你也可以写

```
doComplex = do printLog "Starting process..."
               w <- gets (+5)
               printLog $ "Computed value: " ++ show w 
```

同样，我可能会重写`printLog`. 如果您发现自己`get`对状态进行了操作，对其进行了操作并将`put`其返回，那么您可能只想使用`modify`.

```
printLog msg = do modify (+1)
                  n <- get
                  liftIO . putStrLn $ "Message #" ++ show n ++ ": " ++ msg 
```

# javascript - 是否有机会在所有情况下使用 onkeypress 功能

> ID：13156738
> 
> 赞同：-2
> 
> 时间：2012-10-31T11:21:34.620
> 
> 标签：javascript

我写了一个函数，其中有 onkeypress 函数，但它只是第一次工作。每次按键时我必须做什么才能运行此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:30:41.490

使用`document.write`创建一个新页面，该页面没有任何事件处理程序。或任何其他内容，就此而言。

# objective-c - 在 tableview 顶部查看

> ID：13156740
> 
> 赞同：0
> 
> 时间：2012-10-31T11:21:40.297
> 
> 标签：objective-c, uitableview, core-data, uiviewcontroller, nsfetchedresultscontroller

我正在构建一个有表格视图的应用程序。现在在那个 tableview 之上我想要 3 个按钮。当您单击这些按钮时，tableview 的数据会发生变化。此表视图源自

```
@interface MultimediaViewController : CoreDataTableViewController 
```

这是使用 NSFetchedResultController。目前我的故事板看起来像[这样](http://www.flickr.com/photos/74322780@N08/8108627410/in/photostream)。

我现在遇到的问题是，当我向下滚动时，我的 tableview 顶部的按钮消失了。我可以通过在我的情节提要中按以下顺序来解决这个问题。

*   看法
    *   表视图
    *   按钮 1
    *   按钮 2

但是然后我的 NSFetchedResultController 将无法正常工作。因为我的类是从 CorDataTableViewController 派生的。

谁能帮我解决这个烦人的问题。如果您需要更多详细信息，请询问。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:51:47.307

正如我正确理解的那样，您希望拥有具有相同操作的相同按钮，但它们固定在屏幕顶部，而表格垂直滚动。你可以：

1.  使用新按钮准备新视图，该按钮覆盖下面的表格。
2.  将新按钮操作连接到旧按钮操作以使它们的行为相同

这是我现在能想到的最快和最简单的解决方法。

您感兴趣的视图嵌入为`tableView.tableHeaderView`. 您可以创建自己的全新视图覆盖表格并移动按钮：

```
UIView *buttonsView = mainTableView.tableHeaderView;
[buttonsView removeFromSuperView];
[myOwnBrandNewOverlayView addSubview: buttonsView]; 
```

那是另一个讨厌的 hack，但这是我可以告诉你的所有内容，而不知道你的超类是如何构建的。

# matlab - 如何在matlab中将结构与数组连接起来？

> ID：13156741
> 
> 赞同：2
> 
> 时间：2012-10-31T11:21:48.970
> 
> 标签：matlab, networking

我想创建一个数据包，数据加载是一个数组。对于标题，我想创建一个结构，因为索引它的字段会更容易。对于传输，我需要连接结构和数组来创建一个数据包。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:24:20.563

您应该使用单元格数组：

```
 a = 1:10;
 b = struct('x',1,'y',2);
 packet = {a, b}; 
```

# excel - 在指定范围内清除工作表上的命名范围？

> ID：13156753
> 
> 赞同：0
> 
> 时间：2012-10-31T11:22:25.110
> 
> 标签：excel, vba

清除工作表部分中所有命名范围的最佳方法是什么？

就像是：

```
Sheets("A").Range("A1:D10").ClearNames 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:11:17.157

我不知道 ClearNames，但会这样做。样本：

```
Option Explicit

Sub DeleteNamedRanges()
  Dim targetWorksheet As Worksheet
  Dim targetRange As Range
  Dim nameObject As Name
  Dim namedRange As Range
  Dim unionedRange As Range

  Set targetWorksheet = Worksheets("MySheetName")
  Set targetRange = targetWorksheet.Range("A1:D10")

  For Each nameObject In ActiveWorkbook.Names
    Set namedRange = nameObject.refersToRange
    If (namedRange.Worksheet.Name <> targetWorksheet.Name) Then GoTo Continue

    Set unionedRange = Application.Union(namedRange, targetRange)
    If (unionedRange.Address = targetRange.Address) Then
      namedRange.Value = "" ' namedRange.Clear
    End If

Continue:
  Next nameObject
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:18:44.170

如果您打算删除该区域内的名称，这应该可以解决问题，请注意它会完全删除名称，而不仅仅是从目标区域中删除。因此，存在于 A1:D10 内部和外部的范围也将被删除。

```
Option Explicit

Public Sub DeleteRangeNames()
    Dim wsTarget As Worksheet
    Dim rTarget As Range
    Dim nTmp As Name

    'Determine the range to clear all names from
    Set wsTarget = Worksheets("enternamehere")
    Set rTarget = wsTarget.Range("A1:D10")

    'Loop through all Names in the worksheet
    For Each nTmp In ActiveWorkbook.Names
        'Check if they overlap (if no overlap the intersection is Nothing)
        If Not (Intersect(nTmp.RefersToRange, rTarget) Is Nothing) Then
            'Delete the Name object from the workbook
            nTmp.Delete
        End If
    Next nTmp
End Sub 
```

# c# - 对象列表。无法将对象添加到列表 I am trying to make list of object as List <feeditem>List_feeds = new List<feeditem>(); FeedItem objFeedItem = new FeedItem(); objFeedItem.feedId = feedNode.SelectSingleNode("id").I 问问题 问问题 2012-10-31T11:22:32.900 1333 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to make list of object as List <feeditem>List_feeds = new List<feeditem>(); FeedItem objFeedItem = new FeedItem(); objFeedItem.feedId = feedNode.SelectSingleNode("id").InnerText; . . . . objFeedItem.text = feedNode.SelectSingleNode("text").InnerXml; objFeedItem.imgthumb = thumbImage; objFeedItem.imglarge = largeImage; List_feeds.Add(objFeedItem); Error: "Object reference not set to an instance of an object." Some One asked for the compleate Code hear it is.. using System; using System.Collections.Generic; using System.Linq; using System.Web; using System.Xml; using System.Net; namespace FSB.Classes { public class FeedItem { public string feedId{ get; set; } public string feed_publishDate{ get; set; } public string feed_createDate{ get; set; } public string feed_modifieddate{ get; set; } public string title{ get; set; } public string description{ get; set; } public string text{ get; set; } public string imgthumb{ get; set; } public string imglarge{ get; set; } public string addedBy{ get; set; } public string edited{ get; set; } public string createDate{ get; set; } public string updateDat { get; set; } } public class Feeds { protected string newsURL; protected List <feeditem>List_feeds; public Feeds() { newsURL = @"http://api.brafton.com/55f3e621-2223-48de-bafc-4f3774e72533/news/"; List <feeditem>List_feeds = new List<feeditem>(); } public void updateAllFeeds() { getFeedList(); } private void getFeedList() { try { XmlDocument objFeedDoc = new XmlDocument(); var nodeFeedList = getFeedNodes(); foreach (XmlNode objFeedNode in nodeFeedList) { string feedDetailhref = objFeedNode.Attributes["href"].Value; string strFeedDetail = getFeedDetailXml(feedDetailhref); objFeedDoc.LoadXml(strFeedDetail); XmlNode feedNode = objFeedDoc.SelectSingleNode("newsItem"); FeedItem objFeedItem = new FeedItem(); objFeedItem.feedId =feedNode.SelectSingleNode("id").InnerText; objFeedItem.feedId = feedNode.SelectSingleNode("id").InnerText; objFeedItem.feed_publishDate = feedNode.SelectSingleNode("publishDate").InnerText; objFeedItem.feed_createDate = feedNode.SelectSingleNode("createdDate").InnerText; objFeedItem.feed_modifieddate = feedNode.SelectSingleNode("lastModifiedDate").InnerText; objFeedItem.title = feedNode.SelectSingleNode("headline").InnerText; objFeedItem.description = feedNode.SelectSingleNode("htmlMetaDescription").InnerText; objFeedItem.text = feedNode.SelectSingleNode("text").InnerXml; string thumbImage = ""; string largeImage = ""; /* try { string pictureURL = feedNode.SelectSingleNode("photos").Attributes["href"].Value; XmlNode imageNode = getFeedImage(pictureURL); foreach (XmlNode pic in imageNode) { if (pic.SelectSingleNode("type").InnerText.ToLower() == "large") { largeImage = pic.SelectSingleNode("url").InnerText; } if (pic.SelectSingleNode("type").InnerText.ToLower() == "thumb") { thumbImage = pic.SelectSingleNode("url").InnerText; } } } catch (Exception ex) { Console.Write(ex.Message); } */ objFeedItem.imgthumb = thumbImage; objFeedItem.imglarge = largeImage; List_feeds.Add(objFeedItem); } } catch (Exception ex) { Console.Write(ex.Message); } } private XmlNode getFeedImage(string pictureURL) { try { XmlDocument picDoc = new XmlDocument(); var client = new WebClient(); var content = client.DownloadString(newsURL); picDoc.LoadXml(content); return picDoc.SelectSingleNode("photos/photo/instances"); } catch (Exception ex) { Console.Write(ex.Message); } return null; } /*Extract the newsListItem from the xml Feeds */ private XmlNodeList getFeedNodes() { try { XmlDocument docFeed = new XmlDocument(); string strFeedXml = getFeedXml(); docFeed.LoadXml(strFeedXml); return docFeed.SelectNodes("news/newsListItem"); } catch (Exception ex) { Console.Write(ex.Message); } return null; } /*Get the Xml Feeds From the Live Server*/ private string getFeedXml() { try { var client = new WebClient(); var content = client.DownloadString(newsURL); return content; } catch (Exception ex) { Console.Write(ex.Message); } return null; } /*Get the Xml Feeds Details From the Live Server*/ private string getFeedDetailXml(string newsDetailURL) { try { var client = new WebClient(); var content = client.DownloadString(newsDetailURL); return content; } catch (Exception ex) { Console.Write(ex.Message); } return null; } } } Can the Authorize.Net CIM hosted form design be customized? When, submit form via getHostedProfilePageRequest, it will be redirect to https://test.authorize.net/profile/addpayment. Can we change css or design for it? c#listobject 4 3 回答 3 This answer is useful 1 Your declaration of protected List <feeditem>List_feeds; is never instantiated. Change it to protected List <feeditem>List_feeds = new List<feeditem>(); and remove this from the constructor: List <feeditem>List_feeds = new List<feeditem>(); This is because the code in the constructor was simply creating a local variable of the same name as your class level variable, instead of actually instantiating a class level object (as I think you intended) 于 2012-10-31T11:23:59.803 回答 This answer is useful 0 List <feeditem>List_feeds = new List<feeditem>(); 在构造函数中，您正在实例化一个局部变量而不是全局变量。 于 2012-10-31T11:49:22.067 回答 This answer is useful 0 var idNode = feedNode.SelectSingleNode("id"); if (idNode != null) { objFeedItem.feedId = idNode.InnerText; ... } var textNode = feedNode.SelectSingleNode("text"); if (textNode != null) { objFeedItem.text = textNode.InnerXml; ... } 于 2012-10-31T11:25:06.960 回答 Related 1 javascript - 为什么 Object.prototype 看起来像一个空对象？ 3 c# - 如何防止数据网格视图中的数据重复 2 c++ - 变量参数列表：使用 va_list 还是形式参数的地址？ 3 sql - 如何组合两个选择或两个查询？ 3 compiler-errors - 如何减少关于模板实例化的日志冗长 2 windows - 销毁窗口资源的正确方法 0 c# - 无法打印/保存由 System.Drawing 和 Response.OutputStream 生成的图像 2 javascript - 垂直平移 Google 柱形图 1 node.js - websocket 无法使用 nginx 在 ec2 上连接 2 c++ - 插入多维向量 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem></feeditem>

> ID：13156755
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：c#, list, object

I am trying to make list of object as

```
 List<FeedItem> List_feeds = new List<FeedItem>();
 FeedItem objFeedItem = new FeedItem();

objFeedItem.feedId = feedNode.SelectSingleNode("id").InnerText;
.
.
.
.
objFeedItem.text  = feedNode.SelectSingleNode("text").InnerXml;
objFeedItem.imgthumb = thumbImage;
objFeedItem.imglarge = largeImage;

 List_feeds.Add(objFeedItem); 
```

**Error**: "Object reference not set to an instance of an object."

Some One asked for the compleate Code hear it is..

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Xml;
using System.Net;

namespace FSB.Classes
{
    public class FeedItem
    {
        public string feedId{ get; set; }
        public string feed_publishDate{ get; set; }
        public string feed_createDate{ get; set; }
        public string feed_modifieddate{ get; set; }
        public string title{ get; set; }
        public string description{ get; set; }
        public string text{ get; set; }
        public string imgthumb{ get; set; }
        public string imglarge{ get; set; }
        public string addedBy{ get; set; }
        public string edited{ get; set; }
        public string createDate{ get; set; }
        public string updateDat { get; set; }
    }

    public class Feeds
    {

        protected string newsURL;
        protected List<FeedItem> List_feeds;

        public Feeds()
        {
            newsURL = @"http://api.brafton.com/55f3e621-2223-48de-bafc-4f3774e72533/news/";
             List<FeedItem> List_feeds = new List<FeedItem>();
        }

        public void updateAllFeeds()
        {
            getFeedList();

        }

        private void getFeedList()
        {
            try
            {
                XmlDocument objFeedDoc = new XmlDocument();
                var nodeFeedList = getFeedNodes();

                foreach (XmlNode objFeedNode in nodeFeedList)
                {
                    string feedDetailhref = objFeedNode.Attributes["href"].Value;
                    string strFeedDetail = getFeedDetailXml(feedDetailhref);

                    objFeedDoc.LoadXml(strFeedDetail);
                    XmlNode feedNode = objFeedDoc.SelectSingleNode("newsItem");

                    FeedItem objFeedItem = new FeedItem();

                    objFeedItem.feedId =feedNode.SelectSingleNode("id").InnerText;

                    objFeedItem.feedId              = feedNode.SelectSingleNode("id").InnerText;
                    objFeedItem.feed_publishDate    = feedNode.SelectSingleNode("publishDate").InnerText;
                    objFeedItem.feed_createDate     = feedNode.SelectSingleNode("createdDate").InnerText;
                    objFeedItem.feed_modifieddate   = feedNode.SelectSingleNode("lastModifiedDate").InnerText;
                    objFeedItem.title               = feedNode.SelectSingleNode("headline").InnerText;
                    objFeedItem.description         = feedNode.SelectSingleNode("htmlMetaDescription").InnerText;
                    objFeedItem.text                = feedNode.SelectSingleNode("text").InnerXml;

                    string thumbImage = "";
                    string largeImage = "";
                   /*
                    try
                    {

                        string pictureURL = feedNode.SelectSingleNode("photos").Attributes["href"].Value;
                        XmlNode imageNode = getFeedImage(pictureURL);
                        foreach (XmlNode pic in imageNode)
                        {
                            if (pic.SelectSingleNode("type").InnerText.ToLower() == "large")
                            {
                               largeImage = pic.SelectSingleNode("url").InnerText;

                            }
                            if (pic.SelectSingleNode("type").InnerText.ToLower() == "thumb")
                            {
                               thumbImage = pic.SelectSingleNode("url").InnerText;

                            }
                        }

                    }
                    catch (Exception ex)
                    {
                        Console.Write(ex.Message);
                    }
                    */
                    objFeedItem.imgthumb = thumbImage;
                    objFeedItem.imglarge = largeImage;

                    List_feeds.Add(objFeedItem);
                }

            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
        }

        private XmlNode getFeedImage(string pictureURL)
        {
            try
            {
                XmlDocument picDoc = new XmlDocument();
                var client = new WebClient();
                var content = client.DownloadString(newsURL);

                picDoc.LoadXml(content);
               return picDoc.SelectSingleNode("photos/photo/instances");
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
            return null;

        }

        /*Extract the newsListItem from the xml Feeds */
         private XmlNodeList getFeedNodes()
         {
             try
             {
                 XmlDocument docFeed = new XmlDocument();
                 string strFeedXml = getFeedXml();
                 docFeed.LoadXml(strFeedXml);
                 return docFeed.SelectNodes("news/newsListItem");
             }
             catch (Exception ex)
             {
                 Console.Write(ex.Message);
             }
             return null;
         }

        /*Get the Xml Feeds From the Live Server*/
        private string getFeedXml()
        {
            try
            {
                var client = new WebClient();
                var content = client.DownloadString(newsURL);
                return content;
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
            return null;
        }

        /*Get the Xml Feeds Details From the Live Server*/
        private string getFeedDetailXml(string newsDetailURL)
        {
            try
            {
                var client = new WebClient();
                var content = client.DownloadString(newsDetailURL);
                return content;
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
            return null;

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:23:59.803

Your declaration of

```
protected List<FeedItem> List_feeds; 
```

is never instantiated.

Change it to

```
protected List<FeedItem> List_feeds = new List<FeedItem>(); 
```

and remove this from the constructor:

```
List<FeedItem> List_feeds = new List<FeedItem>(); 
```

This is because the code in the constructor was simply creating a local variable of the same name as your class level variable, instead of actually instantiating a class level object (as I think you intended)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:49:22.067

```
List<FeedItem> List_feeds = new List<FeedItem>(); 
```

在构造函数中，您正在实例化一个局部变量而不是全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:25:06.960

```
var idNode = feedNode.SelectSingleNode("id");
if (idNode != null) {
    objFeedItem.feedId = idNode.InnerText;
    ...
}

var textNode = feedNode.SelectSingleNode("text");
if (textNode != null) {
    objFeedItem.text  = textNode.InnerXml;
    ...
} 
```

# c# - 时间选择器在网页中不起作用

> ID：13156758
> 
> 赞同：0
> 
> 时间：2012-10-31T11:22:40.003
> 
> 标签：c#, jquery, asp.net, jquery-ui, timepicker

Jquery 时间选择器在我的网页中不起作用。

[http://fgelinas.com/code/timepicker/](http://fgelinas.com/code/timepicker/)

我正在使用上面的 Timepicker。

```
<script src="Script/JQueryTimePicker/include/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="Script/JQueryTimePicker/include/jquery.ui.core.min.js" type="text/javascript"></script>
<script src="Script/JQueryTimePicker/include/jquery.ui.position.min.js" type="text/javascript"></script>
<script src="Script/JQueryTimePicker/include/jquery.ui.widget.min.js" type="text/javascript"></script>
<script src="Script/JQueryTimePicker/include/jquery.ui.tabs.min.js" type="text/javascript"></script>
<link href="Script/JQueryTimePicker/include/jquery-ui-1.8.14.custom.css" rel="stylesheet"
    type="text/css" />
<link href="Script/JQueryTimePicker/jquery.ui.timepicker.css" rel="stylesheet" type="text/css" />
<script src="Script/JQueryTimePicker/jquery.ui.timepicker.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#tb_DelTime').timepicker();
    });
    </script>

<span class="span">
    <label class="Informlabel">
        Del Time :
    </label>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <asp:TextBox ID="tb_DelTime" runat="server" Width="60%"></asp:TextBox>
</span> 
```

你能帮助我吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:35:31.210

你也可以使用：

```
$('[id*=tb_DelTime]').timepicker(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:31:41.333

要工作，您必须将呈现的 id 获取为：

```
$('#<%=tb_DelTime.ClientID%>').timepicker(); 
```

# authorize.net - Authorize.Net CIM 托管表单设计可以定制吗？

> ID：13156759
> 
> 赞同：0
> 
> 时间：2012-10-31T11:22:43.130
> 
> 标签：authorize.net, authorize.net-cim

当通过 getHostedProfilePageRequest 提交表单时，它将被重定向到[https://test.authorize.net/profile/addpayment](https://test.authorize.net/profile/addpayment)。我们可以改变css或设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:00:49.893

不，你不能改变它的设计。如果您想要更多地控制设计，您将需要使用非托管 CIM API。但是由于您可以将表单嵌入到 iframe 或灯箱中，因此无论如何您都可以将其直接集成到您的网站中，因此您想要对其进行的自定义应该是最少的。

# sql - 想要在 nvarchar 数据类型中存储 varbinary 值？

> ID：13156766
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:23:06.270
> 
> 标签：sql, nvarchar

我的桌子`testuidpwd`有：

用户：

```
Uid Password Passwordhash
----------------------------------------    
121 wrwrwr 0x0013531FA845AEA1E840BDE787336ED3CAEDFE6E
122 etetxw 0x79BAEFD23C2F4D146F9BD2FDF6C14CA25AC5D6AA 
```

*   `uid` `char`数据类型
*   `password` `nvarchar(100)`数据类型
*   `passwordhash` `nvarchar(100)`数据类型

我的问题是当我使用函数时`hashbytes('SHA1',password)`

```
update testdb.dbo.testuidpwd 
set pwdhash = HashBytes('SHA1', password) 
```

列`pwdhash`中是`nvarchar(100)`数据类型。

当我执行以下语句时

```
update testdb.dbo.testuidpwd 
set pwdhash=HashBytes('SHA1', password) 
```

我得到的`pwdhash`专栏是硽贕ڷד瘃快ﭙ寱캏엞这种格式

**但我想存储`varbinary`格式......在`pwdhash`列**

例如：

```
update testdb.dbo.testuidpwd 
set pwdhash = cast(hashbytes('SHA1', PWD) AS varbinary) 
```

这个说法也行不通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:08:57.930

将二进制值存储在`varbinary`列中会更简单。

也就是说，在 SQL 2008 及更高版本中，[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.100%29.aspx)函数为二进制到字符类型的转换添加了一个样式参数（请参阅 MSDN 页面的“二进制样式”部分）。

这应该有效（只要您使用的是 SQL 2008 或更高版本）：

```
update testdb.dbo.testuidpwd 
set pwdhash=CONVERT(NVARCHAR(100),HashBytes('SHA1', password),1) 
```

您可以将样式设置为，`2`而不是`1`您想要存储没有前导的值`0x`

# mysql - 将 IN 与 LIMIT 一起使用时输出是随机的吗？

> ID：13156771
> 
> 赞同：2
> 
> 时间：2012-10-31T11:23:12.107
> 
> 标签：mysql

如果我有一个 mysql 查询，例如：

```
SELECT * FROM table1 WHERE id IN(1,2,3,4) LIMIT 2 
```

mysql 会从表中返回 id 为 1 和 2 的行还是来自 1、2、3、4 的任意 2 个随机 id 的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:25:06.400

我不知道你的表结构、记录顺序和索引，所以我无法预测最终结果。

然而，对于这个精确的查询，除非你有一些奇怪的存储引擎，否则随机化是为了好玩（不是我知道的任何常见的 myslq 引擎），它总是结果集中的前两条记录。除非您更改表结构或记录，否则结果集应该始终相同。除非索引已更改或这些索引的相对基数已更改，否则查询优化器将始终计划和执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:27:27.487

它将返回它找到的前两条记录，其 id 在您指定的时间间隔内。**但是**，如果您不指定`ORDER BY`子句，则无法保证将按特定顺序获取项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:29:34.113

它返回在 中找到的前两条记录`IN`，但除非您指定，否则`order by`无法保证订单。数字是固定的（您的`IN`子句中的匹配数限制 (<=)`LIMIT`子句中指定的数字），顺序不是。现在通常可以说这是您的“主要”表

```
ID 

1
3
2
4 
```

这个查询

```
select * from main where id in (1,2,3,4) limit 2 
```

返回

```
1
3 
```

因为这就是表中值的方式。它返回数据存储的顺序（在正常的 MySQL 场景中）。有了订单，这变成了

```
select * from main where id in (1,2,3,4) order by id limit 2 
```

返回

```
1
2 
```

# php - how to insert a key with values into a specific place inside an array

> ID：13156784
> 
> 赞同：0
> 
> 时间：2012-10-31T11:23:46.650
> 
> 标签：php, arrays, multidimensional-array

Here is my example array

`$inputs = array();`

```
array(4) {
  [0]=>
  array(2) {
    ["id"]=>
    string(1) "1"
    ["name"]=>
    string(4) "13.1"
  }
  [1]=>
  array(2) {
    ["id"]=>
    string(1) "2"
    ["name"]=>
    string(4) "13.2"
  }
  [2]=>
  array(2) {
    ["id"]=>
    string(1) "3"
    ["name"]=>
    string(4) "14.1"
  }
  [3]=>
  array(2) {
    ["id"]=>
    string(1) "4"
    ["name"]=>
    string(4) "14.2"
  }
} 
```

During my foreach loop, I could be currently working with `$inputs[2]` and conditional logic would determine that immediately above this one a new array needs to be added. Please see next example..

```
array(4) {
  [0]=>
  array(2) {
    ["id"]=>
    string(1) "1"
    ["name"]=>
    string(4) "13.1"
  }
  [1]=>
  array(2) {
    ["id"]=>
    string(1) "2"
    ["name"]=>
    string(4) "13.2"
  } 
```

* * *

```
 [2]=>
  array(2) {
    ["id"]=>
    string(1) "NEW"
    ["name"]=>
    string(4) "NEW"
  } 
```

* * *

```
 [3]=>
  array(2) {
    ["id"]=>
    string(1) "3"
    ["name"]=>
    string(4) "14.1"
  }
  [4]=>
  array(2) {
    ["id"]=>
    string(1) "4"
    ["name"]=>
    string(4) "14.2"
  }
} 
```

How would I do this?

thanks for your help in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T11:30:27.377

你可以这样做[`array_splice`](http://php.net/array-splice)：

```
$inputs = ... your original array;
$newElement = array(array('id' => 'NEW', 'name' => 'NEW'));
array_splice($inputs, 2, 0, $newElement);

var_dump($inputs); // your desired array :) 
```

编辑：固定`$newElement`初始化，它必须是一个包含你的新元素的数组，所以它必须是一个包含你想要的新元素的数组，一个新的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:32:06.180

您可以在简单的 for 中使用 array_splice

```
for ($i = 0; $i < count($array); ++$i) {
    if (/* condition is true */) {
        array_splice($array, $i, 0, /* your new array */);
        ++$i;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:34:16.837

我是这样想的：

```
$new_array= array_merge( array_slice($array, 0, $pos), array(($pos+1)=>$value), array_slice($array, $pos, count($array)-$pos) ); 
```

那里可能有一个错误，但你明白了..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:31:38.287

您可以使用功能：

```
function insertIn($array, $position, $element)
{
    $output = array();
    for($i=0;$i<$position;$i++)
    {
         $output[$i] = $array[$i];
    }
    $output[$position] = $element;
    for($i=$position+1;$i<count($array)+1;$i++)
    {
         $output[$i] = $array[$i-1];
    }
    return $output;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T11:30:41.397

你需要建立一个新的`array`

尝试

```
$array = array(
        0 => array("id" => "1","name" => "13.1"),
        1 => array("id" => "2","name" => "13.2"),
        2 => array("id" => "3","name" => "14.1"),
        3 => array("id" => "4","name" => "14.2"));

$append = array("id" => "new","name" => "new");
$copy = array();
$id = 2 ; // add after this ID

foreach($array as $value)
{
    $copy[] = $value ;
    $id == $value['id'] AND $copy[] = $append ;

}

var_dump($copy); 
```

输出

```
array
  0 => 
    array
      'id' => string '1' (length=1)
      'name' => string '13.1' (length=4)
  1 => 
    array
      'id' => string '2' (length=1)
      'name' => string '13.2' (length=4)
  2 => 
    array
      'id' => string 'new' (length=3)
      'name' => string 'new' (length=3)
  3 => 
    array
      'id' => string '3' (length=1)
      'name' => string '14.1' (length=4)
  4 => 
    array
      'id' => string '4' (length=1)
      'name' => string '14.2' (length=4) 
```

# iphone - Iphone App crashing due to Received memory warning even if i am releasing

> ID：13156789
> 
> 赞同：0
> 
> 时间：2012-10-31T11:24:06.153
> 
> 标签：iphone, ios, memory-management, ios4, didreceivememorywarning

Every time is go to the view memory in use is increasing .. even if i am saving images. And afetr sometime the app crashed due to low memory warning. can someone tel me the solution so that the image memory is not increased.

```
 #import <UIKit/UIKit.h>
        #import "PatientStudiesViewController.h"
        #import "CareServices.h"

        @interface newImageComparison : UIViewController<UIScrollViewDelegate,ServerConnectionDelegate>
        {

            NSString *serverUrlStr;
            NSString *studyID;
            NSString *instID;
            NSString *urlEncodedKey;

            NSMutableArray *myCompareImage1;
            NSMutableArray *myCompareImage2;

            UIScrollView * _scrollView1;
            UIScrollView * _scrollView2;
            NSMutableArray *selectedStudyIDArr;
            NSMutableDictionary *SelectedImageTypeDict;
            NSMutableArray *selectedImagetypeTagsArr;
            BOOL isRightEyeSelectedAgain;
            BOOL isLeftEyeSelectedAgain;
            NSMutableArray *demoCompareODArr;
            NSMutableArray *demoCompareOSArr;
            CareServices *careServices;

        }

        -(void)prepareODImages_selectedStudyIDString1 :(NSString *)selectedIDString1;
        -(void)prepareOSImages_selectedStudyIDString2 :(NSString *)selectedIDString2;
        - (void)loadImageRightEyeImage:(NSMutableArray *)urlAndTagReference;
        - (void)loadImageLeftEyeImage:(NSMutableArray *)urlAndTagReference;

        @end

        #import "newImageComparison.h"
        #import "XMLParserForStudyDetails.h"
        #import "ColorSchemes.h"
        #import <CommonCrypto/CommonDigest.h>
        #import "mach/mach.h"

        @implementation newImageComparison

        - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
        {
            self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
            if (self) {
                // Custom initialization
            }
            return self;
        }

        - (void)didReceiveMemoryWarning
        {
            // Releases the view if it doesn't have a superview.
            [super didReceiveMemoryWarning];

            // Release any cached data, images, etc that aren't in use.
        }

        #pragma mark - View lifecycle

        - (void)viewDidLoad
        {
            careServices = [CareServices currentInstance];
            careServices.delegate = self;
            NSUserDefaults *selectedStudy = [NSUserDefaults standardUserDefaults];
            selectedStudyIDArr = [selectedStudy valueForKey:@"selectedStudyIDArray"];
            NSUserDefaults *selectedImagetype = [NSUserDefaults standardUserDefaults];
            SelectedImageTypeDict = [selectedImagetype valueForKey:@"imageTypeDict"];
            NSUserDefaults *selectedImageTypeTags = [NSUserDefaults standardUserDefaults];
            selectedImagetypeTagsArr = [selectedImageTypeTags valueForKey:@"selectedImageTypeTags"];
            NSMutableArray *imageType = [[NSMutableArray alloc]init];
            for (int count = 0; count <[selectedImagetypeTagsArr count]; count++) {

                [imageType addObject:[SelectedImageTypeDict valueForKey:[selectedImagetypeTagsArr objectAtIndex:count]]];
            }
             self.view.backgroundColor = [UIColor blackColor];
            [super viewDidLoad];
            myCompareImage1 = [[NSMutableArray alloc]init];
            myCompareImage2 = [[NSMutableArray alloc]init];
            NSUserDefaults *realUrl = [NSUserDefaults standardUserDefaults];
            serverUrlStr = [realUrl valueForKey:@"serverUrl"];
            NSString *key;
            NSUserDefaults *keyD = [NSUserDefaults standardUserDefaults];
            key = [keyD valueForKey:@"key"];
            urlEncodedKey = (NSString *) CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)key, NULL, CFSTR(":/?#[]@!$&’()*+,;="), kCFStringEncodingASCII);
            NSUserDefaults *studyID_D = [NSUserDefaults standardUserDefaults];
            studyID = [studyID_D valueForKey:@"studyID"];
            NSUserDefaults *instID_D = [NSUserDefaults standardUserDefaults];
            instID = [instID_D valueForKey:@"instID"];
            NSMutableArray *selectedDateArray = [[NSUserDefaults standardUserDefaults]valueForKey:@"selectedDateArray"];
            demoCompareODArr = [[NSMutableArray alloc]init];
            demoCompareOSArr = [[NSMutableArray alloc]init];
            UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(60, 2, 200, 20)];
            label.backgroundColor = [UIColor clearColor];
            label.text = [NSString stringWithFormat:@"%@/%@/%@",[selectedStudyIDArr objectAtIndex:0],[selectedDateArray objectAtIndex:0],[imageType objectAtIndex:0]];
            label.font = [UIFont systemFontOfSize:15];
            label.textAlignment = UITextAlignmentCenter;
            label.textColor = [UIColor greenColor];
            [self.view addSubview:label];
            [label release];

            label = [[UILabel alloc]initWithFrame:CGRectMake(60, 208, 200, 20)];
            label.text = [NSString stringWithFormat:@"%@/%@/%@",[selectedStudyIDArr objectAtIndex:1],[selectedDateArray objectAtIndex:1],[imageType objectAtIndex:1]];
            label.font = [UIFont systemFontOfSize:15];
            label.backgroundColor = [UIColor clearColor];
            label.textColor = [UIColor greenColor];
            label.textAlignment = UITextAlignmentCenter;
            [self.view addSubview:label];
            [label release];

           NSMutableDictionary *selectedDemoImagesDict = [[NSUserDefaults standardUserDefaults]valueForKey:@"selectedDemoImagesDict"];

            if ([[imageType objectAtIndex:0] isEqualToString:@"OD"]) {
                  [self prepareODImages_selectedStudyIDString1:[selectedStudyIDArr objectAtIndex:0]];
               }
               else {
                isLeftEyeSelectedAgain = YES;
                       [self prepareOSImages_selectedStudyIDString2:[selectedStudyIDArr objectAtIndex:0]];
             }

            if ([[imageType objectAtIndex:1]isEqualToString:@"OS"]) {
                       [self prepareOSImages_selectedStudyIDString2:[selectedStudyIDArr objectAtIndex:1]];

            }
            else {
                isRightEyeSelectedAgain = YES;
              [self prepareODImages_selectedStudyIDString1:[selectedStudyIDArr objectAtIndex:1]];
            }

            self.navigationItem.title = @"Image Comparsion";

            // Do any additional setup after loading the view from its nib.
        }

        - (void)viewDidAppear:(BOOL)animated {
             UIImageView *imageView1 = [[UIImageView alloc]initWithFrame:CGRectMake(27,23,265,184)];
            imageView1.image = [UIImage imageNamed:@"plainbg_3.png"];
            [self.view addSubview:imageView1];
            UIImageView *imageView2 = [[UIImageView alloc]initWithFrame:CGRectMake(27,228,265,184)];
            imageView2.image = [UIImage imageNamed:@"plainbg_3.png"];
            [self.view addSubview:imageView2];

             _scrollView1 = [[UIScrollView alloc]initWithFrame:CGRectMake(33,30,252,172)];
            _scrollView1.delegate = self;
            _scrollView1.backgroundColor = [UIColor clearColor];
            _scrollView1.pagingEnabled = YES;
            _scrollView1.scrollEnabled = YES;
            [self.view addSubview:_scrollView1];
             _scrollView2 = [[UIScrollView alloc]initWithFrame:CGRectMake(33,234,252,172)];
            _scrollView2.delegate = self;
            _scrollView2.backgroundColor = [UIColor clearColor];
            _scrollView2.pagingEnabled = YES;
            _scrollView2.scrollEnabled = YES;
            [self.view addSubview:_scrollView2];
            int x_val = -252;
            int y_val = 0;

            float dis  = 0;
            for (int seriesCount = 0; seriesCount <[myCompareImage1 count]; seriesCount++) {
                NSMutableArray *OD = [[NSMutableArray alloc]init];
                OD = [myCompareImage1 objectAtIndex:seriesCount];
                for (int count = 0; count <[OD count]; count++) {
                    dis = dis+252;
                    UIImageView *R_EyeImageView = [[UIImageView alloc]initWithFrame:CGRectMake(x_val+dis, y_val, 252, 172)];
                    R_EyeImageView.backgroundColor = [UIColor blackColor];
                    R_EyeImageView.tag = seriesCount *100+100+count;
                    [_scrollView1 addSubview:R_EyeImageView];
                    UIActivityIndicatorView *activity = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
                    [activity setFrame:CGRectMake(R_EyeImageView.frame.size.width/2.3,R_EyeImageView.frame.size.height/2.2, 40, 40)];
                    activity.tag = seriesCount*100+100+count;
                    [R_EyeImageView addSubview:activity];
                    [activity startAnimating];
                    [activity release];
                    [R_EyeImageView release];

                }
                       [self loadImageRightEyeImage:OD];
                       [OD release];
            }
            _scrollView1.contentSize = CGSizeMake(dis, 0);

            dis = 0;
            for (int seriesCount = 0; seriesCount <[myCompareImage2 count]; seriesCount++) {
                NSMutableArray *OS = [[NSMutableArray alloc]init];
                OS = [myCompareImage2 objectAtIndex:seriesCount];
                for (int count = 0; count <[OS count]; count++) {
                    dis = dis+252;
                    UIImageView *L_EyeImageView = [[UIImageView alloc]initWithFrame:CGRectMake(x_val+dis, y_val, 252, 172)];
                    L_EyeImageView.backgroundColor = [UIColor blackColor];
                    L_EyeImageView.tag = seriesCount *100+100+count;
                    [_scrollView2 addSubview:L_EyeImageView];
                    UIActivityIndicatorView *activity = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
                    [activity setFrame:CGRectMake(L_EyeImageView.frame.size.width/2.3,L_EyeImageView.frame.size.height/2.2, 40, 40)];
                    activity.tag = seriesCount*100+100+count;
                    [L_EyeImageView addSubview:activity];
                    [activity startAnimating];

                    [activity release];
                    [L_EyeImageView release];

                }

                [self loadImageLeftEyeImage:OS];

                [OS release];
            }
            _scrollView2.contentSize = CGSizeMake(dis, 0);

            [_scrollView1 release];
            [_scrollView2 release];
            [imageView1 release];
            [imageView2 release];
        }

        - (void)prepareODImages_selectedStudyIDString1:(NSString *)selectedIDString1 {
                NSMutableArray *arr = [[XMLParserForStudyDetails sharedManager].final_ImagesDict valueForKey:selectedIDString1];
                NSMutableArray *imageIDArr = [[XMLParserForStudyDetails sharedManager].imageID_RefDict_3D valueForKey:selectedIDString1];
                NSMutableArray *seriesID = [[XMLParserForStudyDetails sharedManager].SeriesRefID_Dict valueForKey:selectedIDString1];
                for (int count = 0; count <[seriesID count]; count++) {
                    NSMutableDictionary *imageDict = [arr objectAtIndex:0];
                    NSMutableArray *imageIDArr2 = [imageIDArr objectAtIndex:count];
                    NSString *seriesID1 = [seriesID objectAtIndex:count];
                    NSMutableArray *arr = [[NSMutableArray alloc]init];
                    NSMutableDictionary *imageDict2 = [imageDict valueForKey:seriesID1];
                    for (int count2 = 0; count2 <[imageIDArr2 count]; count2++) {
                        NSString *str;
                        NSMutableDictionary *imageDict3 = [imageDict2 valueForKey:[imageIDArr2 objectAtIndex:count2]];
                        if ([[imageDict3 valueForKey:@"imageType"] isEqualToString:@"image"]) {
                            if ([[imageDict3 valueForKey:@"num_frames"]isEqualToString:@"1"]) {

                                if ([[imageDict3 valueForKey:@"laterality"] isEqualToString:@"R"]) {
                                    str = [[NSString alloc]initWithFormat:@"http://%@/i2icareclientws/i2iCareAPI_Service.asmx/GetImage?key=%@&study_id=%@&series_id=%@&image_id=%@&image_level=3&format=&frame_number=&imageType=1",serverUrlStr,urlEncodedKey,selectedIDString1,seriesID1,[imageIDArr2 objectAtIndex:count2]];
                                    [arr addObject:str];
                                    [str release];

                                }
                            }
                        }
                    }
                    if (isRightEyeSelectedAgain == YES) {
                        [myCompareImage2 addObject:arr];
                        isRightEyeSelectedAgain = NO;

                    }
                    else {
                        [myCompareImage1 addObject:arr];
                    }
                    [arr release];
                }
        }

        - (void)prepareOSImages_selectedStudyIDString2:(NSString *)selectedIDString2 {
            NSMutableArray *arr = [[XMLParserForStudyDetails sharedManager].final_ImagesDict valueForKey:selectedIDString2];
            NSMutableArray *imageIDArr = [[XMLParserForStudyDetails sharedManager].imageID_RefDict_3D valueForKey:selectedIDString2];
            NSMutableArray *seriesID = [[XMLParserForStudyDetails sharedManager].SeriesRefID_Dict valueForKey:selectedIDString2];
            for (int count = 0; count <[seriesID count]; count++) {
                NSMutableDictionary *imageDict = [arr objectAtIndex:0];
                NSMutableArray *imageIDArr2 = [imageIDArr objectAtIndex:count];
                NSString *seriesID1 = [seriesID objectAtIndex:count];
                NSMutableArray *arr = [[NSMutableArray alloc]init];
                NSMutableDictionary *imageDict2 = [imageDict valueForKey:seriesID1];
                for (int count2 = 0; count2 <[imageIDArr2 count]; count2++) {
                    NSString *str;

                    NSMutableDictionary *imageDict3 = [imageDict2 valueForKey:[imageIDArr2 objectAtIndex:count2]];

                    if ([[imageDict3 valueForKey:@"imageType"] isEqualToString:@"image"]) {
                        if ([[imageDict3 valueForKey:@"num_frames"]isEqualToString:@"1"]) {

                            if ([[imageDict3 valueForKey:@"laterality"] isEqualToString:@"L"]) {

                                str = [[NSString alloc]initWithFormat:@"http://%@/i2icareclientws/i2iCareAPI_Service.asmx/GetImage?key=%@&study_id=%@&series_id=%@&image_id=%@&image_level=3&format=&frame_number=&imageType=1",serverUrlStr,urlEncodedKey,selectedIDString2,seriesID1,[imageIDArr2 objectAtIndex:count2]];
                                [arr addObject:str];
                                [str release];

                            }
                        }
                    }
                }

                            if (isLeftEyeSelectedAgain == YES) {
                                [myCompareImage1 addObject:arr];
                                isLeftEyeSelectedAgain = NO;
                            }
                            else {
                                [myCompareImage2 addObject:arr];
                             }

                [arr release];
            }

        }

        - (void)loadImageRightEyeImage:(NSMutableArray *)urlAndTagReference {
                for (int count = 0; count  <[myCompareImage1 count]; count ++) {
                for (int i = 0; i < [urlAndTagReference count]; i++) {

                    NSString *imagePath = [urlAndTagReference objectAtIndex:i];
                    imagePath = [imagePath stringByReplacingOccurrencesOfString:@"amp;" withString:@""];
                    imagePath = [imagePath stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
                    NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
                    NSString *key = [self sha1:imagePath];
                    NSString *fileToSave = [documentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.jpg",key]];

                    for ( UIImageView *imgView in _scrollView1.subviews) {
                        if (imgView.tag == count *100+100+i) {
                            for (UIActivityIndicatorView *activity in [imgView subviews]) {
                                if ([activity isKindOfClass:[UIActivityIndicatorView class]]) {
                                    if (activity.tag == count *100+100+i) {
                                        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:fileToSave];
                                        if (!fileExists)
                                        {
                                            dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW,  0ul);

                                            dispatch_async(queue, ^{
                                                NSData *imageData=[NSData dataWithContentsOfURL:[NSURL URLWithString:imagePath]];

                                                UIImage *image = [[UIImage alloc] initWithData:imageData];

                                                NSData *jpegData = UIImageJPEGRepresentation(image,0.001);

                                                [[NSFileManager defaultManager] createFileAtPath:fileToSave contents:jpegData attributes:nil];

                                                dispatch_sync(dispatch_get_main_queue(), ^{
                                                    imgView.image = image;
                                                    [activity stopAnimating]; 
                                                    [activity removeFromSuperview];
                                                });
                                            });

                                        }else{
                                            UIImage *image = [UIImage imageWithContentsOfFile:fileToSave];
                                            if(!image) image = [UIImage imageNamed:@"rest-blank-thumbnail.png"];
                                            imgView.image = image;
                                            [activity removeFromSuperview];

                                        }

                                    }

                                }
                            }
                        }
                    }
                }
            }
        }

        - (void)loadImageLeftEyeImage:(NSMutableArray *)urlAndTagReference {
            for (int count = 0; count  <[myCompareImage2 count]; count ++) {

                for (int i = 0; i < [urlAndTagReference count]; i++) {

                    NSString *imagePath = [urlAndTagReference objectAtIndex:i];
                    imagePath = [imagePath stringByReplacingOccurrencesOfString:@"amp;" withString:@""];
                    imagePath = [imagePath stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
                    NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
                    NSString *key = [self sha1:imagePath];
                    NSString *fileToSave = [documentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.jpg",key]];

                    for ( UIImageView *imgView in _scrollView2.subviews) {
                        if (imgView.tag == count *100+100+i) {
                            for (UIActivityIndicatorView *activity in [imgView subviews]) {
                                if ([activity isKindOfClass:[UIActivityIndicatorView class]]) {
                                    if (activity.tag == count *100+100+i) {
                                        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:fileToSave];
                                        if (!fileExists)
                                        {
                                            dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW,  0ul);
                                            dispatch_async(queue, ^{
                                                NSData *imageData=[NSData dataWithContentsOfURL:[NSURL URLWithString:imagePath]];

                                                UIImage *image = [[UIImage alloc] initWithData:imageData];

                                                NSData *jpegData = UIImageJPEGRepresentation(image,0.001);

                                                [[NSFileManager defaultManager] createFileAtPath:fileToSave contents:jpegData attributes:nil];
                                                dispatch_sync(dispatch_get_main_queue(), ^{
                                                    imgView.image = image;
                                                    [activity stopAnimating]; 
                                                    [activity removeFromSuperview];
                                                });
                                            });

                                        }else{
                                            UIImage *image = [UIImage imageWithContentsOfFile:fileToSave];
                                            if(!image) image = [UIImage imageNamed:@"rest-blank-thumbnail.png"];

                                            imgView.image = image;
                                            [activity removeFromSuperview];

                                        }

                                    }

                                    }
                                }
                            }
                        }
                       }
                   }
        }

        -(NSString*) sha1: (NSString *)str
        {
            const char *cstr = [str cStringUsingEncoding:NSUTF8StringEncoding];
            NSData *data = [NSData dataWithBytes:cstr length:str.length];

            uint8_t digest[CC_SHA1_DIGEST_LENGTH];

            CC_SHA1(data.bytes, data.length, digest);

            NSMutableString *output = [NSMutableString stringWithCapacity:CC_SHA1_DIGEST_LENGTH * 2];

            for(int i = 0; i < CC_SHA1_DIGEST_LENGTH; i++)
                [output appendFormat:@"%02x", digest[i]];
            return output;
        }

        - (void)viewDidUnload {

            _scrollView1 = nil;
            _scrollView2 = nil;

        }
        - (void)dealloc {
           [myCompareImage1 release];
            [myCompareImage2 release];

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:06:43.837

如果您打开了 Zombies（方案诊断），那么实际上不会删除任何内容。因此，在 RAM 较少的设备（如 iPad 1）上，您将很快耗尽内存并收到内存警告。模拟器通常没有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:30:45.973

您可以在 XCode 中使用 Profiler 查找内存泄漏 - 产品 | 主菜单中的配置文件。然后选择内存 -> 泄漏。

此外，您可以使用 Product | 找到一些有趣的建议。在 XCode 中分析。

# codeigniter - codeigniter cart：显示多个商店的购物车

> ID：13156793
> 
> 赞同：0
> 
> 时间：2012-10-31T11:24:12.317
> 
> 标签：codeigniter, cart

我的想法是，我将建立一个网站，使用 CodeIgniter 处理在我的网站上注册的一些不同商店的购买。当我想仅显示买家当前查看的商店中的商品时，挑战就来了。我偶然发现使用购物车的选项索引来传递商店 ID，以便我可以使用它来识别商品来自哪个商店。

但我不知道该怎么做，因为我不知道如何根据商店 ID 等标识符选择某些购物车内容。任何人都可以给出一个想法吗？提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:37:56.457

这只是正确管理表格的问题。

**非常基本的表格大纲**。

*   具有商店特定信息和唯一 ID 的商店表，每个商店都有自己的行。
*   包含产品特定信息的产品表。
*   用户表
*   库存表、数量、productID、storeID
*   购物车表存储用户和库存 ID（以及您需要的任何其他内容）

然后，当您进行购物车查询时，各个产品通过库存表链接到各个商店。

您可能需要更详细地考虑处理来自多个商店的单个产品、价格等，但这应该会让您走上正确的道路。这是我们在线应用程序的一个非常精简的版本。我们实际上也有定价表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:17:25.680

这有点小技巧，但您可以将 store_id 添加到项目选项中。

然后，当使用 foreach 遍历购物车内容时，循环的第一行会检查选项，如果 store_id 不匹配 - 跳过其余的循环代码（使用 continue;）。

或者，您可以扩展购物车类并覆盖 contents() 方法来为您执行此操作，以使您的视图代码更简洁。

# assembly - GCC 内联汇编到 IAR 内联汇编

> ID：13156795
> 
> 赞同：1
> 
> 时间：2012-10-31T11:24:12.733
> 
> 标签：assembly, embedded, inline-assembly, iar

我正在尝试将[BeRTOS](http://bertos.org)用于德州仪器 Stellaris Cortex-M3。我的工作环境是 IAR。为了适应 IAR 和我正在使用的特定 uC，进行了很多细微的更改，但我有一个似乎无法解决的问题……坦率地说，这有点超出我的想象。

这段代码：

```
1    void NAKED lm3s_busyWait(unsigned long iterations)
2    {
3       register uint32_t __n __asm("r0") = iterations;
4
5       __asm volatile (
6           "1: subs r0, #1\n\t"
7           "bne 1b\n\t"
8           "bx lr\n\t"
9           : : "r"(__n) : "memory", "cc");
10
11    } 
```

...正在产生一些错误和警告。

> 错误：预期一个“;” -----> 第 3 行
> 
> 错误：预期为“（” -----> 第 5 行
> 
> 错误：预期为“）” -----> 第 9 行
> 
> 警告：变量“__n”已声明但从未引用 -----> 第 3 行

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:20:32.750

~~我很确定 IAR 的编译器不支持内联汇编。至少当我在使用 IAR 的工具时需要在那个级别上做一些事情时，我总是使用一个实际的单独的汇编语言源文件。~~

您发布的代码看起来或多或少等同于以下 C 代码：

```
void lm3s_busyWait( unsigned long iterations)
{
    register volatile unsigned long n = iterations;

    while (--n) {
        /* do nothing */
    }
} 
```

您也许可以使用它来代替您的版本，但它会慢一些。这是否重要取决于您使用它的目的。编译器通常不会将 a`volatile`放入寄存器中，因此该函数可能会访问内存位置，而不是递减寄存器。

以下是一个小型 ARM 汇编函数，您可以将其放入一个名为的文件中并将`lm3s_busyWait.s`其添加到您的 IAR 项目中。它应该与您使用 GCC 的内联汇编的版本完全相同：

```
 /* C prototype:
     *
     *  void lm3s_busyWait( unsigned long iterations);
     *
     */
    PUBLIC  lm3s_busyWait

    SECTION .text:CODE:NOROOT(4)
    THUMB

lm3s_busyWait:
    subs r0, #1
    bne lm3s_busyWait
    bx lr

    end 
```

# c - 从内核模块中的串口读取

> ID：13156798
> 
> 赞同：2
> 
> 时间：2012-10-31T11:24:25.733
> 
> 标签：c, linux, linux-kernel

对于我的任务，我需要读取一些来自串行端口的字符串。这必须在内核模块中完成，所以我不能使用 stdio 库。我正在尝试这种方式：

```
#include <linux/module.h>
#include <linux/unistd.h>
#include <asm/io.h>
#include <asm/fcntl.h>
#define SERIAL_PORT "/dev/ttyACM0"

void myfun(void){
  int fd = open(SERIAL_PORT,O_RDONLY | O_NOCTTY);
  ..reading... 
```

}

但它给了我“函数打开的隐式声明”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:56:18.707

You want to use the `filp_open()` function, it is pretty much a helper to open a file in kernelspace. You can find the man on it [here](http://dev.man-online.org/man9/filp_open/)

The file pointer from `filp_open()` is of type `struct file` and don't forget to close it with filp_close() when you're done:

```
#include <linux/fs.h>
//other includes...

//other code...    

struct file *filp = filp_open("/dev/ttyS0");
//do serial stuff...
filp_close(filp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:47:52.410

在内核源代码中寻找自己的方式可能会非常可怕，因为它是如此之大。这是我最喜欢的命令：`find . -iname "*.[chs]" -print0 | xargs -0 grep -i "<search term>`.

简要说明：

*   发现（明显）
*   dot 是内核的根目录
*   iname 是查找名称忽略大小写
*   .c .h 和 .s 文件包含代码 - 查看它们
*   print0 prints them out null terminated as they are found
*   xargs takes an input and uses it as an argument to another command (-0 is to use null terminated)
*   grep - search for string (ignoring case).

So for this search: "int open(" and you'll get some hits with tty in the name (those will be for consoles) - have a look at the code and see if they are what you want.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T11:27:38.503

包含 的头文件`open`，通常`#include <unistd.h>`

编辑：

不确定内核使用，但做一个`man 2 open`.

在我的 linux 版本上，您可能需要以下所有内容：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h> 
```

取决于您使用的宏。

# static-libraries - 无法针对 armv7s 构建 idoubs

> ID：13156800
> 
> 赞同：6
> 
> 时间：2012-10-31T11:24:26.980
> 
> 标签：static-libraries, voip, xcode4.5, iphone-5, armv7

我在我的一个 VoIP 功能项目中使用 idoubs 开源。在 armv6 和 armv7 架构中一切正常。现在我正在更新我的项目以支持 iphone 5。我无法在 armv7s 架构中编译项目（我放弃了 armv6 架构。尝试在 armv7 和 armv7s 架构中编译）。我收到以下错误。

**ld: 找不到 -lsrtp 的库**

**collect2: ld 返回 1 个退出状态**

请分享您的建议以解决此问题。

**笔记：**

libsrtp.a 可用于除 armv7s 架构之外的所有架构（armv6、armv7 和 i386）。所以我不确定idoubs源代码是否真的更新了

我正在使用最新版本 r221 和 xcode 4.5。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:40:03.303

它也发生在我身上，我终于解决了。

当我为版本编译 Building 时`GPL`，它工作正常，但是当我构建非 GPL 版本时出现 17 个错误。首先，我遵循以下步骤：

```
In /mydoubs/iPhone/idoubs/branches/2.0/ios-idoubs/idoubs.xcodeproj 
 Right click on idoubs target => Get Info => Build tab => Other Linker Flags then:
        remove -lx264
        replace 
            -lswscale to -lswscale-lgpl
            -lavcore to -lavcore-lgpl
            -lavutil to -lavutil-lgpl
            -lavcodec to -lavcodec-lgpl 

 Right click on ios-ngn-stack target => Get Info => Build tab => Other C Flags then:
            replace -DHAVE_H264=1 with -DHAVE_H264=0 
```

然后技巧是按以下顺序构建库，在同一个项目中不要忘记（`idoubs.xcodeproj`）：

1.  Doubango(ios-ngn-stack) （注意这与其他 Dobango 不同）
2.  ios-ngn-堆栈
3.  Doubango（idoubs项目）
4.  神经网络
5.  iDoubs

它以这种方式为 armv7 工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T14:14:30.853

在选项中的“构建设置”中：“有效架构”仅保留 armv7 和用户定义（它在页脚“构建设置”中）包含在“Doubango libBS”armv7s 中并从目录“..youre private path../mydoubs”中选择库/doubango/branches/2.0/doubango/thirdpartys/iphone/lib”！是帮我！

# javascript - 在 Android 上强制正确的 CSS3 转换百分比解释

> ID：13156805
> 
> 赞同：28
> 
> 时间：2012-10-31T11:24:40.500
> 
> 标签：javascript, android, jquery, css, uiwebview

**tl;博士**？获取以下链接中演示的机制，以在 Android Chrome 和默认浏览器上使用 GPU 加速。

**更新 2** (2014-01-13 13:25:30Z)：根据[bref.it](https://stackoverflow.com/users/288906/bfred-it)下面的评论，报告的行为自 Android 4.4 KitKat 起已修复 - 但我在下面描述的修复现在破坏了它！索德定律。

**更新 1** (2012-11-01 17:54:09Z)：错误的行为可以从变换矩阵中推断出来，如变换元素的计算样式所报告的那样，它返回一个像素值。我将尝试为此编写一个 Modernizr 测试，为任何可能的解决方案铺平道路。

我开发了一种用于滑动容器以显示全宽、水平排列的子部分的机制。基本上是滑动标签。因为有很多性能密集型的东西和复杂的 Javascript 正在进行，所以我想将 JS 保持在最低限度，并尽可能多地在 CSS 中做纯粹的风格。我认为我做得很好，考虑到 - JS 只是更改了包装器上的一个属性：

**（带左）**

[http://jsfiddle.net/barney/VPJuq/](http://jsfiddle.net/barney/VPJuq/) （移动设备可以将/show/附加到这些fiddle URLs以自己查看结果）

关于这是如何工作的一句话：将选项卡视为`inline-block`s 允许我指定`white-space: nowrap`（最后几条规则中的其余代码基本上折叠了选项卡之间的空白）并允许它们水平堆叠而不清除/返回，一直每个都保持其父级的完整宽度。从那里开始，为包装器设置一个负的左偏移量就可以了。酷吧？

现在，有点背景：我正在开发的界面将在原生移动应用程序中运行——应用程序的核心功能依赖于尖端的移动特定技术（不要问——NDA）——通过 UIWebView，并且唯一的目前支持该技术的平台是 Android。

在这里，我的问题是双重的：比or过渡`transform: translate`更平滑（`translate3d`甚至更平滑），达到一个非常理想的临界点，尤其是在 Android 上，因为非翻译的过渡在最新版本中仍然结结巴巴最新操作系统的手机。考虑到这一点，问题的症结在于 Android 在与. 为了演示，这里有一个基于 -based 的版本，它与之前的 fiddle 做同样的事情，并且适用于所有支持 translate3d 的浏览器......</p> **（带翻译）**`left``margin-left``translate``transform`

**[http://jsfiddle.net/barney/EJ7ve](http://jsfiddle.net/barney/EJ7ve)**

 **如果您在 iPhone 上检查这一点（再次通过附加`/show`），您会注意到 iPhone 上的帧速率有所提高。在 Android 上运行的 Firefox 也是如此，可以说在 Chrome 和 Android 上的默认浏览器上也是如此，除了在这里，`translateX`-100% 的偏移量以某种方式指代所有三个选项卡所占用的空间，所以包装器滑动得足够多，以至于所有选项卡都不可见。这很奇怪，因为变换百分比被指定为与被变换元素的完整盒子模型相关——并且计算样式明确地将包装器宽度描述为与其父级相同（而不是，正如结果所暗示的那样，拉伸 3 倍到容纳标签）。

我们可以将其描述为一个错误吗？

据我所知，没有纯 CSS（我不反对媒体查询功能检测、CSS 供应商分叉或属性黑客）方法来推断和解决这个问题。事实上，我现在能想到的使相同的 CSS 机制起作用的唯一方法是嗅探 Android 的 UA 字符串并有条件地应用不同的规则。呸！如果我要制作一个仅限 Android-WebKit 的解决方案，并在其他任何地方破坏功能，我可以考虑事实上的行为并使百分比指的是分数：

**（带翻译 - 对于 Android*更新：Android 4.4 KitKat 上不必要和中断*）**

[http://jsfiddle.net/barney/nFt5t/](http://jsfiddle.net/barney/nFt5t/)

不理想，因为这使得 UI 浏览器特定，并且要求我们在编写 CSS 之前预先知道组中选项卡的数量。但这甚至不能完全解决那里的问题，因为在方向改变时（这真的很奇怪），偏移量会切换到其他浏览器显示的规范正确行为！

我还尝试将翻译应用到实际的选项卡，这在其他任何地方都可以使用，但是尽管正确地选择并应用了规则，Android 的浏览器不会呈现效果。陌生人和陌生人：

### **（带翻译，研究 Android 的理论，根本不研究 Android）**

[http://jsfiddle.net/barney/EJ7ve/9](http://jsfiddle.net/barney/EJ7ve/9)

非常感谢任何有关跨浏览器解决方案的见解或想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-07T07:28:49.090

我使用的是 Android 2.3，无法产生您描述的确切问题（关于您的评论*“-100% 以某种方式指的是所有三个选项卡占用的空间”*）。但是，我遇到了其他问题，导致间歇性/跳跃式转换和其他一些我没有真正调查过的奇怪现象。

为了便于讨论，我们假设“包装器”的宽度为 500 像素。

通过使用您的 inline-block/nowrap 技术（这是 YUI 中一种非常被低估的布局技术），您的 3 个选项卡面板占用了 1500 像素的水平空间。根据您的描述，您需要欺骗浏览器，使其认为所有选项卡面板一起占用了 500 像素的水平空间。查看我的小提琴，它本质上使用了一些负边距并转换为以我认为应该有效的方式欺骗​​浏览器，但我无法对其进行测试。无论哪种方式，我的示例都**解决**了我在 Android 2.3 上遇到的怪异问题——因此您可能希望以任何一种方式使用它。

[http://jsfiddle.net/ryanwheale/EJ7ve/29/](http://jsfiddle.net/ryanwheale/EJ7ve/29/)

（以及相关的 CSS）

```
.tabs > * {
    width: 100%;
    margin-left: -100%;
}
.tabs > *:first-child {
    -webkit-transform: translate3d(0%, 0, 0);
    -moz-transform: translate3d(0%, 0, 0);
    -ms-transform: translate3d(0%, 0, 0);
    -o-transform: translate3d(0%, 0, 0);
    transform: translate3d(0%, 0, 0);
}
.tabs > *:first-child + * {
    -webkit-transform: translate3d(100%, 0, 0);
    -moz-transform: translate3d(100%, 0, 0);
    -ms-transform: translate3d(100%, 0, 0);
    -o-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
}
.tabs > *:first-child + * + * {
    -webkit-transform: translate3d(200%, 0, 0);
    -moz-transform: translate3d(200%, 0, 0);
    -ms-transform: translate3d(200%, 0, 0);
    -o-transform: translate3d(200%, 0, 0);
    transform: translate3d(200%, 0, 0);
}
.tabs > *:first-child + * + * + * {
    -webkit-transform: translate3d(300%, 0, 0);
    -moz-transform: translate3d(300%, 0, 0);
    -ms-transform: translate3d(300%, 0, 0);
    -o-transform: translate3d(300%, 0, 0);
    transform: translate3d(300%, 0, 0);
} 
```

**注意：**我尝试使用相对定位而不是上面的变换，但我仍然得到与上面描述的相同的怪异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T14:51:10.100

我遇到了类似的问题。

对我来说，问题是：

```
* {
    box-sizing: border-box;
} 
```

我将边框框应用于所有元素。一旦我删除了这个，百分比 translate3d 就被正确应用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T19:11:49.220

如果 CSS 不工作（并且应该工作），您需要一个解决方法。请检查我的修改版本：

[http://jsfiddle.net/EG9v8/1/](http://jsfiddle.net/EG9v8/1/)

```
function makeCss(index){
    // Calculate the offset, given the tabs size
    var size = -$('.tabs').width() * index;
    // Create style for the given offset.
    var css = '-webkit-transform: translate3d('+size+'px, 0, 0);';
    css += '-moz-transform: translate3d('+size+'px, 0, 0);';
    css += '-ms-transform: translate3d('+size+'px, 0, 0);';
    css += '-o-transform: translate3d('+size+'px, 0, 0);';
    css += 'transform: translate3d('+size+'px, 0, 0);';
    return css;
}

$('.tabLinks a').on('click', function(e){
    e.preventDefault();

    var index = $(this).index();

    // Set the current style
    $('.tabs').attr('style', makeCss(index));
}); 
```**

# alfresco - 如何在 Alfresco Share 中扩展 toolbar.get.config.xml

> ID：13156806
> 
> 赞同：0
> 
> 时间：2012-10-31T11:24:43.433
> 
> 标签：alfresco, alfresco-share

我正在尝试在（share\WEB-INF\classes\alfresco\site-webscripts\org\alfresco\components\data-lists）中扩展toolbar.get.config.xml **。**

由于某些原因，这些仍然在 v4.0 之前的 stile 中完成。

[https://issues.alfresco.com/jira/browse/ALF-13592](https://issues.alfresco.com/jira/browse/ALF-13592)

像其他 DocumentLibrary 操作一样通过 share-config-custom 扩展它是理想的

非常感谢，罗科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:21:40.440

看看这个[法语博客](http://charles.torda.net/2012/05/08/simplifier-la-configuration-des-actions-multiples-dans-share/)（如果需要，可以使用谷歌翻译），很多事情就会清楚了。

# jquery - 用jquery替换点击内部的html

> ID：13156808
> 
> 赞同：0
> 
> 时间：2012-10-31T11:24:54.563
> 
> 标签：jquery, html, replace, selected

我想更改轮播之外的 DIV 的内容。

当您单击轮播 DIV 时，它会从其隐藏的 DIV 中获取内容，并替换轮播之外的其他 DIV 中的内容。我是一些创建这样的东西的东西，看看标题和描述在选择时是如何变化的。[http://bqworks.com/products/3d-carousel/example2.html](http://bqworks.com/products/3d-carousel/example2.html)

### HTML

```
<div class="carousel"> <!-- BEGIN CONTAINER -->     
    <div class="slides"> <!-- BEGIN CAROUSEL -->
        <div class="slideItem">
            <a href="#">
                <img src="images/cars/orange.png" />
            </a>
            <p class="title">The HEAD 1</p>
            <p class="description">Some big big paragraph 1</p>
        </div>

        <div class="slideItem">
            <a href="#">
                <img src="images/cars/covered.png" />
            </a> 
            <p class="title">The HEAD 2</p>
            <p class="description">Some big big paragraph 2</p>
        </div>

        <div class="slideItem">
            <a href="#">
                <img src="images/cars/orange.png" />
            </a>
            <p class="title">The HEAD 3</p>
            <p class="description">Some big big paragraph 3</p>
        </div>
    </div> <!-- END SLIDES -->
</div><!-- carousel END -->

<div id="text">    
    <p id="selected-title">THIS SHOULD GET TITLE FROM ABOVE</p>    
    <p id="selected-description">Description of the selected item</p>    
</div> 
```

### jQuery

```
$(document).ready(function(){       
    $(".slideItem").click(function() {
        var title = $('.title').html();
        var desc = $('.description').html();
        $('#text #selected-title').html.replace(title);
        $('#text #selected-description').html.replace(desc);
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T11:26:52.943

首先，考虑为每个单击的元素获取适当`.title`的元素。最后，使用方法替换内部 HTML：`.description``.slideItem`[`html()`](http://api.jquery.com/html/)

```
$(".slideItem").click(function() {
    var title = $(this).find(".title").html();
    var desc = $(this).find(".description").html();
    $("#selected-title").html(title);
    $("#selected-description").html(desc);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:26:23.403

用这个：

```
$('#text #selected-title').html(title);
$('#text #selected-description').html(desc); 
```

如果要附加使用，这将替换 html`.append(title);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:26:49.240

就这样做

```
$('#text #selected-title').html(title);
$('#text #selected-description').html(desc); 
```

无需使用`replace`方法替换内容

# c++ - 关于 C++ 虚继承的问题

> ID：13156810
> 
> 赞同：9
> 
> 时间：2012-10-31T11:24:58.340
> 
> 标签：c++, inheritance, virtual

以下代码来自《Inside the C++ object model》一书

```
#include <iostream>  
using namespace std;
class X{};
class Y: public virtual X{};
class Z: public virtual X{};
class A: public Y, public Z{};

int main()
{
     cout<<sizeof(X)<<" "<<sizeof(Y)<<" "<<sizeof(Z)<<" "<<sizeof(A)<<endl;
     return 0;
} 
```

在我的电脑（Windows，VS2010）中，输出为：

1 4 4 8

这是我的问题

1、大小(X)=1

书上说当 X 类型生成两个实例时，比如 xa 和 xb。编译在 A 中插入一个字节，以便 xa 和 xb 可以具有不同的地址。我不太明白其中的原因。

2、大小(Y)=4

通过使用虚拟继承，我们会有一个额外的虚拟指针吗？我想这可能与多态中的虚拟指针不同。谁能给我 Y 的内存布局？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T11:50:48.103

1.  当类为空时编译器新一个字符，因此它可以生成不同的对象
2.  sizeof(Y)=4 因为它是虚拟继承，构造会生成 vptr 表，在 32 位系统上是 4 字节
3.  如果您使用 Visual Studio，请在 properties->C/C++/Command 中使用 /d1reportAllClassLayout 来生成对象布局类 Y 对象布局将在 Visual Studio 上：
4.  Stanley B. Lippman 所著的《Inside C++ object model》一书很好地解释了这一点

```
 class Y size(4):
            +---
            0     | {vbptr}
            +---
            +--- (virtual base X)
            +---

      Y::$vbtable@:
       0    | 0
       1    | 4 (Yd(Y+0)X)  `vbi:     class  offset o.vbptr  o.vbte fVtorDisp
        X       4       0       4     0` 

            回答 #2

赞同：1

时间：2012-10-31T11:41:32.260

空类的 sizeof 始终返回 1。这是空类的单个虚拟字节。

A 持有虚拟表中的两个条目，一个用于 Y，另一个用于 Z  

所以两个指针的大小，即 8。

Y 和 Z 在它们的虚拟表中都有一个 X 条目，因此大小为 4。

            回答 #3

赞同：1

时间：2012-10-31T11:52:21.593

一个 A 对象将包括一个 Y 对象、一个 Z 对象（按此顺序）和只有*一个*X 对象（由 Y 和 Z 中的指针引用），因为 Y 和 Z 实际上都从 X 继承，因此意味着当多重继承出现时只玩一个 X 对象将在子类中实例化。A 仍然有两个对象（一个 Y，一个 Z），因此 sizeof = 8（因为它们的 sizeof = 4）。但是 Y 和 Z 中指向 X 对象的指针都指向同一个地址。

继承树将如下所示：

```
 X
 / \
 Y Z
 \ /
  A 
```

            回答 #4

赞同：0

时间：2012-10-31T12:32:28.110

类 - 必须 - 至少 1 个字节的原因是说我们有一个 X 数组。如果它们是 0 个字节，那么 &array[1] 将具有与 &array[3] 相同的地址，这是没有人预料到的，会破坏代码，如果您必须编写代码来检查这一点，那会很烦人，而且通常没有任何意义。

Y 将只是

```
static void* virtual_ptr1 //note this is in virtual table and cannot be edited 
```

您可以将 vtables（指向类和虚函数的虚拟指针）视为无法手动/代码编辑的静态变量（或至少不应该）。将其视为编译器保留的静态变量

```

# java - 如何在java中找到一组对应的字符串模式？

> ID：13156816
> 
> 赞同：0
> 
> 时间：2012-10-31T11:25:01.437
> 
> 标签：java

我有一个字符串

```
 "yes 12 /12 /yes /n
              yes 12 /12 /yes " 
```

如何检查字符串中有“yes”时是否有相应的“/yes”，同样，每当有“12”时，是否有相应的“/12”？例如，如果字符串为

```
 "yes 12 /12 /yes /n 
              yes 12 /12 " 
```

它应该给我一个错误，在第 2 行说错误，然后继续阅读文件的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:13:34.497

您可以使用一些递归来查找标签和相应的结束标签：

```
public class TagMatching {
    public static void main(String[] args) {
        List<String> lines = Arrays.asList("yes 12 /12 /yes /n",
                                           "yes 12 /12 /yes",
                                           "yes 12 a b /12 /yes",
                                           "yes 12 c /12 /yes");
        for (String line : lines) {
            boolean valid = validate(Arrays.asList(line.split(" ")));
            System.out.println("valid = " + valid);
        }
    }

    public static boolean validate(List<String> tags) {
        if (tags.size() == 0) {
            return true;
        }

        String first = tags.get(0);
        String last = tags.get(tags.size() - 1);
        if (last.equals("/" + first)) {
            return validate(tags.subList(1, tags.size()-1));
        }

        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:30:20.397

使用`String.contains()`方法

```
String s= "yes 12 /12 /yes /n"
if(s.contains("yes") && s.contains("/yes")){
   sysout("yes");
} 
```

对任何其他对做同样的事情:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:31:50.487

首先，您需要获取所有单词的列表。然后对于每个单词，尝试查看是否包含 /word。

```
String s = "12 a /12";
List<String> list = Arrays.asList(s.split("\\s"));
for (String value : list) {
  if (list.contains("/" + value)) {
    System.out.println("Does contain");
  } else {
    System.out.println("Doesn't contain");
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:33:03.450

您可以[`contains`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)在类中使用方法[`String`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)：

```
String str = ""yes 12 /12 /yes /n";
boolean isOk = str.contains("yes") && str.contains("/yes"); // isOk = true

str = "yes 12 /12 ";
isOk = str.contains("12") && str.contains("/12") // isOk = false 
```

# php - 关注用php发送邮件

> ID：13156822
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:25:19.253
> 
> 标签：php

我正在用 PHP/MySQL 编写一个时事通讯模块。

如何向网站订阅者发送不会导致我的邮件服务器被阻止的电子邮件？我的意思是它不会被视为垃圾邮件发件人，我该如何实现呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:29:07.460

1.  使用标题
2.  确保您发送的代码具有文本和 HTML 版本 - 而不仅仅是图像
3.  尝试使用 SwiftMailer 或 Sendgrid 之类的 SMTP 程序来避免阻止列表
4.  如果在共享主机上，请确保您的主机带有白色标签，否则您需要 MX 记录和 IP 列表等
5.  您通过 jQuery timeout 冷限制您的服务器连接，同时排列数据库，因此一次只能发送 100 封电子邮件等。

您的问题也没有告诉我们您的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:38:37.607

我不只是重申互联网上所说的所有内容，还不如为您指出一些好的文章，以扩大您对垃圾邮件过滤器如何工作的了解：

他们是怎么想的：

*   [http://kb.mailchimp.com/article/how-spam-filters-think](http://kb.mailchimp.com/article/how-spam-filters-think)

常用算法（他们如何从垃圾邮件刺客、akismet 等学习）：

*   [http://en.wikipedia.org/wiki/Bayesian_spam_filtering](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)

要避免的触发词：

*   [http://blog.hubspot.com/blog/tabid/6307/bid/30684/The-Ultimate-List-of-Email-SPAM-Trigger-Words.aspx](http://blog.hubspot.com/blog/tabid/6307/bid/30684/The-Ultimate-List-of-Email-SPAM-Trigger-Words.aspx)

除此之外，请确保您具有正确形成的标题，这可以通过使用[SwiftMail来实现](http://swiftmailer.org/)

另一种有助于确保您的邮件被送达且不被标记为垃圾邮件的好方法是使用纯文本（而不是 HTML）。尽管如果 HTML 是必须的，只要确保您还使用纯文本版本以及 HTML。

根据您的情况，您可以将所有这些都传递给诸如 mailchimp.com 之类的第三方邮件服务，它们将有助于确保您的电子邮件得到传递（通过正确形成标题，处理满足 CAN-SPAM 法案的法律要求ETC）。

哦，还有一个小提示，根本不要在您的电子邮件中添加“取消订阅”这个词，使用“我不再想要这些电子邮件”之类的内容，因为它根本不会触发如此强大的垃圾邮件触发词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:28:14.247

添加标题以避免这种情况 -

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

[参考](http://php.net/manual/en/function.mail.php)

另请查看此链接以进一步了解此链接`no sure shot`-[链接2](https://stackoverflow.com/questions/5935087/how-do-i-prevent-mails-sent-through-php-mail-from-going-to-spam)

# shell - 如何删除文件中的尾随空格并与前一行合并？

> ID：13156831
> 
> 赞同：1
> 
> 时间：2012-10-31T11:26:00.067
> 
> 标签：shell, unix, merge

我有一个文本文件，其内容如下：

```
Fri Oct 02 19:52:02 +0000 2009 | JeLLz Mamii;) | DopeAssDarLey | my b.iâ¥ BITCH!! | @_steffhoney lmfao oh Dayum gull inee hihup Walmart en boiy maself sum skoo sepplies

Tue Aug 30 23:29:47 +0000 2011 | Braydon Tyrrell | braydon_tyrrell | westlock. AB. canada | RT @Darkskin: RT @JazmineDukes: @Darkskin Who are you that U have a blue check mark by ur name?? &lt; 
I polish shoes at Walmart while pp ... 
```

可以看出“我擦鞋..”是第二条记录的一部分`Tues Aug 30`。但是在处理此文件时，它被视为第三条完全不同的记录。

我希望能够将“我擦鞋”行与它之前的行合并，即“用你的名字打勾？？” 有没有办法做到这一点。文件中的许多记录中都存在这种异常情况。所以我需要能够为所有此类记录执行此操作，以便我的输出看起来像

```
Fri Oct 02 19:52:02 +0000 2009 | JeLLz Mamii;) | DopeAssDarLey | my b.iâ¥ BITCH!! | @_steffhoney lmfao oh Dayum gull inee hihup Walmart en boiy maself sum skoo sepplies

Tue Aug 30 23:29:47 +0000 2011 | Braydon Tyrrell | braydon_tyrrell | westlock. AB. canada | RT @Darkskin: RT @JazmineDukes: @Darkskin Who are you that U have a blue check mark by ur name?? &lt; I polish shoes at Walmart while pp ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:37:51.553

如果它包含尾随空格，这将加入下一行：

```
sed '/ $/ N; s/\n//' file.txt 
```

但是，如果可能有多行带有尾随空格，则需要一个循环：

```
sed -e :a -e '/ $/ { $!N; s/\n//; ta }' file 
```

结果：

```
Fri Oct 02 19:52:02 +0000 2009 | JeLLz Mamii;) | DopeAssDarLey | my b.iâ¥ BITCH!! | @_steffhoney lmfao oh Dayum gull inee hihup Walmart en boiy maself sum skoo sepplies

Tue Aug 30 23:29:47 +0000 2011 | Braydon Tyrrell | braydon_tyrrell | westlock. AB. canada | RT @Darkskin: RT @JazmineDukes: @Darkskin Who are you that U have a blue check mark by ur name?? &lt; I polish shoes at Walmart while pp ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:37:13.177

你可以试试：

```
awk -v RS='\n\n+' '{ sub(/\n/, "", $0) ; print $0 "\n" }' log.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:00:40.250

```
perl -00 -lpe 's/\n//g' 
```

一次读取文件一个“段落”，并删除“内部”换行符。

# r - R中的字符POSIXct转换导致夏令时转换（CEST / CET）时区值错误）

> ID：13156836
> 
> 赞同：17
> 
> 时间：2012-10-31T11:26:18.567
> 
> 标签：r, posixct

我在将 POSIXct 转换为字符并返回到 R 中的 POSIXct 时遇到问题。我运行以下代码：

```
time_seq_01 <- seq(as.POSIXct("2012-10-28 02:00:00"), by = 900, length.out = 10)
time_seq_02 <- as.character(time_seq_01)
time_seq_03 <- as.POSIXct(time_seq_02) 
```

或同等学历：

```
time_seq_01 <- seq(as.POSIXct("2012-10-28 02:00:00"), by = 900, length.out = 10)
time_seq_02 <- format(time_seq_01,usetz = TRUE)
time_seq_03 <- as.POSIXct(time_seq_02) 
```

**这是 2012 年中欧夏令时 (CEST)**到**中欧时间 (CET)**的夏令时转换发生时的时间戳（10 月的最后一个星期日 02:00 - 03:00）。

当我调用这些元素时，我得到

```
time_seq_01
[1] "2012-10-28 02:00:00 CEST" "2012-10-28 02:15:00 CEST"
[3] "2012-10-28 02:30:00 CEST" "2012-10-28 02:45:00 CEST"
[5] "2012-10-28 02:00:00 CET"  "2012-10-28 02:15:00 CET" 
[7] "2012-10-28 02:30:00 CET"  "2012-10-28 02:45:00 CET" 
[9] "2012-10-28 03:00:00 CET"  "2012-10-28 03:15:00 CET" 
time_seq_02
[1] "2012-10-28 02:00:00 CEST" "2012-10-28 02:15:00 CEST"
[3] "2012-10-28 02:30:00 CEST" "2012-10-28 02:45:00 CEST"
[5] "2012-10-28 02:00:00 CET"  "2012-10-28 02:15:00 CET" 
[7] "2012-10-28 02:30:00 CET"  "2012-10-28 02:45:00 CET" 
[9] "2012-10-28 03:00:00 CET"  "2012-10-28 03:15:00 CET" 
time_seq_03
[1] "2012-10-28 02:00:00 CEST" "2012-10-28 02:15:00 CEST"
[3] "2012-10-28 02:30:00 CEST" "2012-10-28 02:45:00 CET" 
[5] "2012-10-28 02:00:00 CEST" "2012-10-28 02:15:00 CEST"
[7] "2012-10-28 02:30:00 CEST" "2012-10-28 02:45:00 CET" 
[9] "2012-10-28 03:00:00 CET"  "2012-10-28 03:15:00 CET" 
```

POSIXct 序列的创建确实可以正常工作（`time_seq_01`），也可以转换为字符（`time_seq_02`）。但是，从字符返回到 POSIXct 的转换会产生错误的时区 (CET/CEST) 值 ( `time_seq_03`)。当对这些元素进行排序时，可以清楚地看到这一点：

```
sort(time_seq_01)
[1] "2012-10-28 02:00:00 CEST" "2012-10-28 02:15:00 CEST"
[3] "2012-10-28 02:30:00 CEST" "2012-10-28 02:45:00 CEST"
[5] "2012-10-28 02:00:00 CET"  "2012-10-28 02:15:00 CET" 
[7] "2012-10-28 02:30:00 CET"  "2012-10-28 02:45:00 CET" 
[9] "2012-10-28 03:00:00 CET"  "2012-10-28 03:15:00 CET" 
sort(time_seq_03)
[1] "2012-10-28 02:00:00 CEST" "2012-10-28 02:00:00 CEST"
[3] "2012-10-28 02:15:00 CEST" "2012-10-28 02:15:00 CEST"
[5] "2012-10-28 02:30:00 CEST" "2012-10-28 02:30:00 CEST"
[7] "2012-10-28 02:45:00 CET"  "2012-10-28 02:45:00 CET" 
[9] "2012-10-28 03:00:00 CET"  "2012-10-28 03:15:00 CET" 
```

这会导致许多问题，例如在按这些时间戳合并对象时。有没有办法克服这个问题？

我使用的系统：

```
Windows 7 64bit
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)
locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252   
[3] LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    
attached base packages:
[1] tools     stats     graphics  grDevices utils     datasets  methods 
[8] base     
other attached packages:
[1] pkgtools_0.1-3 roxygen2_2.2.2 digest_0.5.2   rj_1.1.0-4    
loaded via a namespace (and not attached):
[1] brew_1.0-6    plyr_1.7.1    rj.gd_1.1.0-1 stringr_0.6.1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T14:31:27.457

这是一个从后`POSIXct`到`character`后`POSIXct`保留原始夏令时状态的解决方法。

```
Sys.setenv(TZ='Europe/Berlin') # to reproduce OP's example
time_seq_01 <- seq(as.POSIXct("2012-10-28 02:00:00"), by = 900, length.out = 10)
time_seq_02 <- format(time_seq_01,usetz = TRUE)

time_seq_02_lt <- as.POSIXlt(time_seq_02)
time_seq_02_lt$isdst <- as.POSIXlt(time_seq_01)$isdst
time_seq_03 <- as.POSIXct(time_seq_02_lt) 
```

据我所知，R 对 string-to-datetime 的支持不包括在字符串中指定的 DST 标志。

# objective-c - 如何在目标 c 中获取字符串作为用户输入（使用终端作为输入）？

> ID：13156852
> 
> 赞同：1
> 
> 时间：2012-10-31T11:26:52.630
> 
> 标签：objective-c, macos, terminal

我只是在创建一个简单的程序，它获取用户输入然后将其打印回终端。我不知道如何将用户输入作为 NSString 获取。我在 C 中读过有关 scanf() 的内容，但这似乎无法接受字符串。我想知道是否有可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:32:05.917

```
 scanf("%s",str);
       mystr = [NSString stringWithUTF8String:str]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:32:36.413

您可以使用 C 库函数`scanf`从标准输入读取 C 字符串，然后`NSString`使用`initWithCString:encoding:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:01:13.673

```
printf("Enter your string: ");
scanf("%s", str);                    // read and format into the str buffer
printf("Your string is %s\n", str);    // print buffer

// you can create an NS foundation NSString object from the str buffer
NSString *lastName = [NSString stringWithUTF8String:str];

// %@ calls description o object - in NSString case, prints the string
NSLog(@"lastName=%@", lastName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:09:20.030

使用以下两个字符串函数之一：

```
 #include <stdio.h>

 char *fgets(char * restrict str, int size, FILE * restrict stream);

 char *gets(char *str); 
```

使用`gets`更简单，但在生产代码中使用是不安全的。这是一个使用示例`fgets`：

```
#define MAX_LENGTH 80

- (void)example
{
    char buf[MAX_LENGTH];
    fgets(buf, MAX_LENGTH, stdin);

    NSString *s = [NSString stringWithUTF8String:buf];
    NSLog(@"%@", s);
} 
```

# asp.net-mvc - 在 RavenDB 中“加入”两个实体集的正确模式是什么？

> ID：13156853
> 
> 赞同：0
> 
> 时间：2012-10-31T11:26:55.570
> 
> 标签：asp.net-mvc, ravendb

在 ASP.NET MVC (4) 应用程序中使用 RavenDB，加载一组相关实体并将它们传递给视图的正确模式是什么？

以 Stack Overflow 为例，假设有以下实体：

```
class User
{
    public int Id { get; set; }

    public string UserName { get; set; }
}

class Comment
{
    public int Id { get; set; }

    public string Body { get; set; }

    public string Author{ get; set; }
}

class Question
{
    public int Id { get; set; }
    // ...
    public List<Comment> Comments { get; set; }

    public Question()
    {
        Comments = new List<Comment>();
    }
} 
```

我们要做的是在问题下的评论旁边显示用户信息，评论作为问题文档的一部分存储，所以`Include`我们`Comment.Author`

我们的查询可能如下所示：

```
var question = RavenSession.Include<Question>(x => x.Author)
                           .Include<Comment>(x => x.Author)
                           .Load<Question>(id); 
```

现在我们有了包含所有评论的问题对象，并且 Raven 客户端已经缓存了我们需要的所有用户配置文件，将**用户对象与相关评论对象配对的正确/最佳/最 RavenDB 认可的方法是什么？**

一个想法是我可以将`User`and`Comment`转换为 a`CommentViewModel`并将其发送给客户端，但这似乎很手动。

另一种选择是`Comment`为作者添加另一个属性，即`[JsonIgnore]`'d 和在 getter 中，从 Raven 会话延迟加载用户。这感觉很脏，因为 Comment 模型对象需要保存对 raven 会话的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:10:21.860

你想这样做：

```
var question = RavenSession.Include<Question>(x => x.Author)
                           .Include(x => x.Comments.Select(c=>c.Author))
                           .Load(id); 
```

这适用于 1.2，请注意。然后你可以调用 Load(question.Author) 从会话缓存中获取文档。

# sql - 从 yii 中的两个相关模型中检索两列的总和

> ID：13156854
> 
> 赞同：3
> 
> 时间：2012-10-31T11:27:01.840
> 
> 标签：sql, yii, model, yii-relations

我是 yii 的新手，但对 php 和 sql 有丰富的经验。我希望对 yii 更有经验的人可以为我指明正确的方向。我有两个模型，项目和成本，它们通过 project_cost 表以多对多关系相互关联。这样做的原因是成本可以在项目之间分摊。在 project_cost 表中有一个附加列，其中包含分配给特定项目的成本的多少。

所以项目模型关系看起来像这样，它非常适合获取所有细节：

```
class Project extends CActiveRecord
{

    /**
    * @return array relational rules.
    */
    public function relations()
    {
    return array(
        'projectcost'   => array(self::HAS_MANY,   'ProjectCost',    'project_id'),
        'cost'      => array(self::HAS_MANY, 'Cost', array('cost_id'=>'id'),'through'=>'projectcost'),
        //i.e. a many to many relation of cost through the projectcost model

        );
    }
    ...
} 
```

在成本模型中有一个名为 Value 的列，在 project_cost 表中有一个名为 Percent 的列。构造一个包含 sql 查询的函数很容易，它可以为我提供项目成本的总和，如下所示：

```
select sum(project_cost.Percent*cost.Value) 
from project_cost join cost on project_cost.cost_id=cost.id 
where project_cost.project_id=1 
```

但是有没有办法通过 yii 中的关系来做同样的事情？我知道 STAT 关系，但不清楚如何在这种情况下应用它们，因为到目前为止我所阅读的大部分内容都表明，如果关系中只有两个模型，则关系效果最好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:27:12.630

您可以创建一个范围来获取这些数据，在您的项目模型中创建一个方法，例如：

```
public function withAdjustedCost()
{
    $this->getDbCriteria()->mergeWith(array(
        'with'=>array(
            'projectcost',
            'cost',
        ),
        'select'=>'*, sum(projectcost.Percent*cost.Value) as adjustedCost',
    ));

    return $this;
} 
```

然后，您应该能够在获取项目模型时使用它；

```
$models = Project::model->withAdjustedCost()->findAll(); 
```

我还没有测试过它，你可能需要稍微修改一下，或者可能需要定义`$adjustedCost`为模型的属性才能访问它（再说一遍，也许不是）......无论如何，可能是一个方向去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:34:53.463

简单有效：

```
$sum = Yii::app()->db->createCommand("
    select sum(project_cost.Percent*cost.Value)
    from project_cost
    join cost on project_cost.cost_id=cost.id
    where project_cost.project_id=1
")->queryScalar(); 
```

$sum === false 如果有问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:16:14.410

您可能想看看[CDbCriteria](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)类，它可以让您使用 Yii 框架构建查询，因此“正确”。

另外，我认为您可以使用[CActiveRecord->getRelated()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getRelated-detail)方法提取数组中的所有 ProjectCost 模型，然后使用 foreach 循环以建立所需的总和。在您的 Project 模型中，您可以创建一个非常像这样的方法：

```
class Project extends CActiveRecord
{
  ...
  /**
  * @return the sum of all weighed Costs corresponding to this Project.
  */
  public function getTotalCost()
  {
      $projectCosts = $this->getRelated('projectcost'); // fetches array of ProjectCost models, which you can iterate over
      $sum = 0;
      foreach($projectCosts as $projectCost)
      {
          $sum += $projectCost->Percent * $projectcost->getRelated('cost')->Value;
      }
      return $sum;
  }
  ...
} 
```

这取决于以下想法：

```
$projectcost->getRelated('cost')->Value; 
```

您的 ProjectCost 模型具有如下关系：

```
'cost'   => array(self::HAS_ONE,   'Cost',    'cost_id'), 
```

它允许 getRelated() 获取相关的成本模型，只要您需要访问它。

因此，您基本上可以最终简单地使用`$model->getTotalCost()`来获取您在查询中表达的成本总和，但实际上是在模型中构建的，我认为这是正确的 MVC，而不是让数据库使用查询为您进行计算。

编辑： getRelated() 在处理相关记录时已被证明是一个真正的朋友，它获取一组记录或一条记录，具体取决于它所处理的关系的性质。

由于您似乎对数据库访问感到担忧，您还可以查看[CActiveRecord->afterFind()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#afterFind)，您可以重载它以计算项目总和，并在加载模型后仅将其设置为您的公共变量一次。所以你会有你的代码：

```
public $projectSum = 0;
public function afterFind(){
   //Fetch array of ProjectCost models, which you can iterate over
   foreach($this->getRelated('projectcost') as $projectCost)
   {
     $this->projectSum += $projectCost->Percent * $projectcost->getRelated('cost')->Value;
   }
} 
```

# hibernate - jpa儿童尺寸表现

> ID：13156856
> 
> 赞同：4
> 
> 时间：2012-10-31T11:27:07.770
> 
> 标签：hibernate, jpa

在我的 Web 应用程序中，我有一个与 Child 具有 OneToMany 关系的对象。选择我的对象时，我执行以下查询：

```
from Object o 
```

然后我应该为每个对象打印它有多少个孩子

```
// Foreach
object.children.size() 
```

假设对象有很多孩子（比如说 30'000）；调用 size() 是浪费资源还是 ORM 框架（在我的例子中是 Hibernate）会在不加载所有子项的情况下处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:01:52.367

**使用 JPA（标准）：**

*   您的 @OneToMany 关系默认是延迟加载的（即 fetch=FetchType.LAZY 的默认值）。但是调用`Entity.getCollection().size()`会触发延迟加载以检索所有子集合 - 所以是的，它会相当慢，除非您无论如何都需要对所有/大多数元素进行操作。注意：对于 JPA 的所有（正常）实现，这不会发出 30,000 个单独的查询 - 它会发出一个在结果集中返回 30,000 行的查询。
*   如果您需要大多数元素或者您想提前缓存更改为`@OneToMany(fetch=FetchType.EAGER)`
*   在不检索每个对象的情况下获取数据统计信息的常用方法是简单地使用 JPQL via `EntityManager.getQuery()/getTypedQuery()/getNamedQuery()`（甚至 SQL via `getNativeQUery()`）。这是非常简单且高性能的：

> ```
> int empSize = em.createQuery("SELECT SIZE(d.employees) FROM Department d")     
>                  .getSingleResult(); 
> ```

```
OR ALTERNATIVELY

// Pre-compiled query placed against entity class for highest performance   
@NamedQueries({
    @NamedQuery(name="Department.EmployeeSize",
                query="SELECT SIZE(d.employees) FROM Department"),
    ... // other named queries
})
@Entity
public class Department {

    ...

}

// Then to use the query:    
int empSize = em.createNamedQuery("Department.EmployeeSize", Integer.class)     
                 .getSingleResult(); 
```

*   您可以启用 2 级缓存。 [JPA 缓存摘要](http://weblogs.java.net/blog/caroljmcdonald/archive/2009/08/21/jpa-caching)

    静态配置 2 级缓存：

> ```
> Map propertiesMap = new HashMap();
> // Valid values are ALL, NONE, ENABLE_SELECTIVE, DISABLE_SELECTIVE
> propertiesMap.add("javax.persistence.sharedCache.mode", "ENABLE_SELECTIVE");
> EntityManagerFactory = Persistence.createEntityManagerFactory("myPUName", propertiesMap); 
> ```

```
ALTERNATIVELY use persistence.xml:

<persistence-unit name="EmployeeService">
    ...
    <shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>

</persistence-unit> 
```

然后标记哪些实体应该自动缓存在二级缓存中：

```
@Cacheable(true)
@Entity
public class Employee {
    ...
} 
```

*   还可以动态配置缓存，作为特定查询的一部分

**使用专有方法（例如 Hibernate “Extra-Lazy” 集合）：**

*   与简单地发出 JPQL/SQL 查询的性能相同
*   保存几行代码（@org.hibernate.annotations.LazyCollection(EXTRA) 注释 v @NamedQuery 注释和执行）
*   不标准 - 受过 JPA 培训的开发人员不会知道它
*   不可移植 - 只能与该供应商一起使用。远离专有特性的行业趋势是标准 JPA。那里有许多不同的 JPA 实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:41:12.783

在 JPA 实现中启用日志消息并查看真正发送到数据库的数据库查询总是一个好主意。在您的情况下，我会说 ORM 可能会延迟加载所有对象，因此效率会非常低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:10:12.603

Hibernate 有一个特殊的特性，称为“额外的惰性”集合，它可以完全按照您的建议进行操作。这意味着如果您调用`size()`这些超惰性集合之一，如果集合已经初始化，它将返回内存中的子节点数，但如果集合尚未初始化，它将查询数据库`count`。目的是避免在绝对必要之前初始化非常大的集合。其他一些非常懒惰的例子包括处理`Collection.contains`/`Map.containsKey`调用、`Map.get`调用`List.get(int)`等调用。

要使用注释将集合标记为超级懒惰，您会说`@org.hibernate.annotations.LazyCollection( EXTRA )`

# iphone - 如何将声音剪辑添加到图像

> ID：13156860
> 
> 赞同：1
> 
> 时间：2012-10-31T11:27:25.790
> 
> 标签：iphone

我是 iPhone 新手。我正在开发一个应用程序，我想将声音剪辑添加到 iPhone 中的图像中。我想合并一个图像和一个音频文件，是否可以这样做。

# import - 带有 Tornado 网络服务器的外部页面

> ID：13156867
> 
> 赞同：0
> 
> 时间：2012-10-31T11:27:48.767
> 
> 标签：import, handler, tornado

我在 Python 页面中有一个处理程序，它按照 Tornado Web 服务器的指南编写。我想把这个处理程序放在另一个页面中，总是与 Tornado 的主要 python 页面链接。

这样我可以创建一个新页面，这样我就可以拥有一个不错的项目，而不是数千行的独特页面吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:27:22.690

```
class BaseHandler(tornado.web.RequestHandler):
    @tornado.web.removeslash
    def get_current_user(self):
         return self.get_secure_cookie("mechtari")
    @property 
    def db(self):
        if not hasattr(BaseHandler,"_db"):
            _db = pymongo.Connection().essog
            return _db
    @property
    def fs(self):
        if not hasattr(BaseHandler,"_fs"):
            _fs = gridfs.GridFS(self.db)
            return _fs 
```

**现在我要做的所有事情都将继承自这个处理程序：**

```
class LoginHandler(BaseHandler):
    def post(self):
    # do a database search, so i need to connect to database, so no need to the database everytime and make the connection.

class AchatsHandler(BaseHandler):
    @tornado.web.authenticated
    def get(self):
        # render me a page that requires a user to be authentificated, so i always use the base handler 
```

并且在 url 规范中，您只需要精确的类名称以将它们绑定到 url。

```
urls = [
(r"/login", handlers.LoginHandler),
(r"/achats/*", handlers.AchatsHandler),
] 
```

**看，在 url 字典中没有 BaseHandler ！**

# google-maps - Google Fusion 地图中的复选框突然变得奇怪

> ID：13156871
> 
> 赞同：0
> 
> 时间：2012-10-31T11:28:15.853
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

这个带有三个复选框的 Google Fusion 地图（某种模板）在几周前可以正常工作。 [http://www.kaasogmulvad.dk/unv/fusion/skabeloner/template_checkbox.html](http://www.kaasogmulvad.dk/unv/fusion/skabeloner/template_checkbox.html)

我没有更改代码中的任何内容，但突然复选框的行为很奇怪。当我取消单击“黄色”时，一切都消失了。当我取消单击“红色”时，红色和绿色的点消失了。当我取消单击“绿色”时也是如此。不过，“全部”似乎有效。

这可能是一个暂时的错误，还是谷歌改变了一些东西让我的地图以这种方式运行？任何人都可以帮我解决它吗？

包含图标标记信息的表格： [https ://www.google.com/fusiontables/DataSource?dsrcid=4793185](https://www.google.com/fusiontables/DataSource?dsrcid=4793185)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:18:11.090

你有两个问题：

1.  使用列中的值进行字符编码
2.  您对两个不同的融合表使用相同的变量名称（层）（不好，不确定这是否是真正的问题）

[工作示例](http://www.geocodezip.com/v3_FusionTables_skabeloner_checkboxB.html)

# smb - 如何限制到远程主机的 smb 连接数量？

> ID：13156878
> 
> 赞同：1
> 
> 时间：2012-10-31T11:29:02.843
> 
> 标签：smb, tcpsocket

我正在尝试使用 libsmbclient 库查看具有 Windows 7/XP SMB 共享的远程主机的 fs 结构。代码是这样的：

```
bool open(QList<DirType> &resList){
    SMBCFILE* dh = smbc_getFunctionOpendir(ctx)(ctx,rootpath.toLocal8Bit());
    if (dh==NULL) return false;
    smbc_dirent *res;

    bool isitZeroLevel = false;
    while (res=smbc_getFunctionReaddir(ctx)(ctx,dh)){

        if (res->smbc_type==SMBC_FILE_SHARE) isitZeroLevel=true;
        struct stat aboutres;
        smbc_getFunctionStat(ctx)(ctx,(rootpath+"/"+smb_name).toLocal8Bit(),
                                  &aboutres);

        DirType d(res->smbc_type,res->name,aboutres.st_mtim.tv_sec);
        resList.push_back(d);
    }
    smbc_getFunctionClosedir(ctx)(ctx,dh);

    if(isitZeroLevel){
        smbc_setOptionOneSharePerServer(ctx,1);
        close();
    }
    return true;

} 
```

为服务器上的每个目录递归调用此代码，并且在我的 Samba 服务器上工作正常。但是 Windows 在某些时候会拒绝连接。我认为 Windows 对连接有一些限制，而 smbclient 使它们太多了。（使用 samba-3.5.15 在 linux-3.4.9 上运行）

# sql - T-SQL：如何转换日期的字符串表示

> ID：13156879
> 
> 赞同：0
> 
> 时间：2012-10-31T11:29:04.747
> 
> 标签：sql, tsql

我有一些以 varchar(10) 格式存储的日期。

日期是这样的：

```
2008-01-06
2008-01-13
2008-01-20
2008-01-27
2008-02-03
2008-02-10
2008-02-17
2008-02-24 
```

我希望它们采用 dd/mm/yyyy 格式（也是 DATE 数据类型）

我尝试了以下方法：

```
SELECT CONVERT(VARCHAR(max), startWeek, 103) date
FROM dbo.GoogledataFinal 
```

为什么会这样输出：

```
2008-01-06
2008-01-13
2008-01-20
2008-01-27
2008-02-03
2008-02-10
2008-02-17 
```

如果你能修复我的代码会很棒，但我对为什么会发生这种行为更感兴趣，所以像我 5 岁那样解释可能会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:31:44.487

您正在从 转换`varchar`为`varchar`。style 参数甚至不用于此。

相反，转换为`date`，然后返回`varchar`：

```
select convert(varchar(10), cast('2008-01-06' as datetime), 103) 
```

这打印：

```
06/01/2008 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:31:19.857

```
SELECT CONVERT(varchar(10), CONVERT(datetime, startWeek), 103) date
FROM dbo.GoogledataFinal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:38:37.537

您需要将 varchar 转换为日期时间，然后使用所需格式返回 varchar：

```
SELECT CONVERT( varchar(10), 
         CONVERT(DATETIME, '2008-02-03', 120) -- Varchar "yyyy-mm-dd" to Datetime
       , 103) -- Datetime to Varchar "dd/mm/yyyy" 
```

对于您的情况，SQL 可能是：

```
SELECT CONVERT( varchar(10), 
         CONVERT(DATETIME, startWeek, 120)
       , 103)
FROM dbo.GoogledataFinal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:36:04.173

尝试这个：

```
SELECT (SUBSTRING (startWeek,9, 2) + '/' + SUBSTRING (startWeek,6, 2) + '/' SUBSTRING (startWeek,1, 4))  AS date
FROM dbo.GoogledataFinal 
```

# spring - HttpServletRequest.getServletPath 正在返回解码字符串

> ID：13156882
> 
> 赞同：2
> 
> 时间：2012-10-31T11:29:10.263
> 
> 标签：spring, url, servlets

在我的网站上，我使用以下 URL：[http://example.com/test%2Ftest2.htm](http://example.com/test%2Ftest2.htm) 当我在 HandlerInterceptorAdapter 中打印 getServletPath 时，我看到解码的 servletPath: `/test/test2.htm`。如何获取未解码的字符串？像：`/test/test2&2Ftest2.htm`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:01:18.267

我想出了以下解决方案，关键是创建一个新的 URL 对象。

```
URL url = new URL(request.getServletPath());
String path = url.getPath(); 
```

这将返回所需的未解码字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:35:11.533

[`HttpServletRequest`](http://java.sun.com/products/servlet/2.5/docs/servlet-2_5-mr2/javax/servlet/http/HttpServletRequest.html)

> getRequestURL() - 重构客户端用来发出请求的 URL。
> 
> getQueryString() - 返回路径后面的请求 URL 中包含的查询字符串。

结合 getRequestURL() 和 getQueryString() 的结果应该可以得到你想要的结果。例如

```
String fullURL = request.getRequestURL().append("?").append( 
     request.getQueryString()).toString();

public static String getUrl(HttpServletRequest req) {
    String reqUrl = req.getRequestURL().toString();
    String queryString = req.getQueryString();   // d=789
    if (queryString != null) {
        reqUrl += "?"+queryString;
    }
    return reqUrl;
} 
```

或者

```
public static String getURL(HttpServletRequest req) {

    String scheme = req.getScheme();             // http
    String serverName = req.getServerName();     // hostname.com
    int serverPort = req.getServerPort();        // 80
    String contextPath = req.getContextPath();   // /mywebapp
    String servletPath = req.getServletPath();   // /servlet/MyServlet
    String pathInfo = req.getPathInfo();         // /a/b;c=123
    String queryString = req.getQueryString();          // d=789

    // Reconstruct original requesting URL
    StringBuffer url =  new StringBuffer();
    url.append(scheme).append("://").append(serverName);

    if ((serverPort != 80) && (serverPort != 443)) {
        url.append(":").append(serverPort);
    }

    url.append(contextPath).append(servletPath);

    if (pathInfo != null) {
        url.append(pathInfo);
    }
    if (queryString != null) {
        url.append("?").append(queryString);
    }
    return url.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T20:55:13.810

在 URL 中，%2F 完全等同于“/”。所以这是自动为您翻译的，我认为您无法判断这是否已完成。

这种类型的十六进制编码通常用于不允许作为 URL 字符的字符（例如，空格通常编码为 %20），但您可以通过这种方式将任何字符替换为其十六进制代码。

此技术还用于在 URL 语法中、参数名称/值中传递具有特殊含义的字符。例如“？” 和 '&' 用于*分隔参数，因此如果**在*表单/参数中使用它们，则需要对它们进行编码以准确地将它们作为数据传递给服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T09:13:50.783

解决方案：

```
URI uri = new URI(null, null, request.getServletPath(), null);
String encodedServletPath = uri.toString(); 
```

另见： [https ://zscribble.wordpress.com/2012/04/20/urlencoder-is-not-for-url-encoding-really/](https://zscribble.wordpress.com/2012/04/20/urlencoder-is-not-for-url-encoding-really/)

# paypal - 定期付款的 ExpressCheckout 需要哪些 API 调用

> ID：13156883
> 
> 赞同：2
> 
> 时间：2012-10-31T11:29:12.740
> 
> 标签：paypal, paypal-adaptive-payments, recurring

我的通话流程如下：

*   SetExpressCheckout
*   GetExpressCheckout
*   DoExpressCheckout

注意：paymentAction 是单次付款的销售和定期付款的授权

CreateRecurringProfile 初始金额（仅用于定期付款）

我发现：

钱有待抓获。

该个人资料还扣除了首期付款。

当我试图扣钱时，客户被扣了两次钱。

问题：

1.  请您告知我的 API 调用中缺少什么？
2.  对于定期付款，您认为我不需要在调用 CreateRecurringPaymentsProfile API 之前调用 DoExpressCheckout API？
3.  如果问题 2 为真，如果 CreateRecurringPaymentsProfile API 调用成功，即 $createRPProfileResponse->Ack == "SUCCESS"，那么这是否意味着我可以保证初始金额并且我可以允许访问我的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:33:01.193

听起来你对你正在做的事情有点不正常。您不会将定期付款资料设置为“授权”。

如果结帐只是定期付款，则无需调用 DoExpressCheckoutPayment。例如，您只需要在需要为您运送的产品一次性付款的情况下拨打这两个电话（DECP 和 CRPP），然后还要在此基础上创建订阅。在您的情况下，听起来您只需要 CRPP。

您仍然需要调用 SEC 和可选的 GECD，但您只需使用 CRPP 完成它。（旁注：确保您已在 SEC 请求中包含计费协议详细信息。这是很多人常犯的错误，他们在调用 CRPP 时最终会出现无效令牌错误。）

Ack of SUCCESS 并不意味着初始金额已获得批准。它只是意味着配置文件已成功创建。不过，请求中有一个可用的参数 FAILEDINITACTION，您可以使用该参数来指定是要让配置文件保持活动状态，还是在初始付款失败时立即暂停配置文件。它接受以下值：ContinueOnFailure / CancelOnFailure

不过，不要让这让你感到困惑。它实际上会将个人资料状态设置为暂停，而不是取消，因此您只需在他们付款后重新激活它。

当您构建登录系统以访问您网站的付费区域时，您可以使用 GetRecurringPaymentsProfileDetails API 检查配置文件的当前状态，并且仅在其处于活动状态时才允许访问。

希望有帮助！

# java - 分币算法的性能

> ID：13156894
> 
> 赞同：8
> 
> 时间：2012-10-31T11:29:55.667
> 
> 标签：java, arrays, performance, recursion, split

我的问题是关于 CodeFu 练习题（2012 年第 2 轮问题 3）。它基本上归结为将整数数组分成两个（几乎）相等的一半，并返回两者之间的最小可能差异。我在下面包含了问题描述。正如评论中所指出的，这可以描述为一个[平衡分区问题，这是一个](https://stackoverflow.com/questions/12781159/balanced-partition)[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)领域的问题。

现在已经讨论了很多类似的问题，但我无法为这个特定的问题找到有效的解决方案。问题当然是，对于蛮力搜索（至少在使用递归时），要遍历的可能组合的数量很快就会变得太大。我有一个递归解决方案，它适用于除最大问题集之外的所有问题。我尝试添加一些优化以提前停止递归，但性能仍然太慢，无法在 CodeFu 允许的 5 秒最大值内解决一些最大长度（30）的数组。任何有关如何改进或重写代码的建议都将受到欢迎。我也很想知道它是否有助于制作迭代版本。

**更新：**在[这个很好的网站上](http://people.csail.mit.edu/bdean/6.046/dp/)有一个关于平衡分区问题的理论讨论，它很好地说明了如何以动态方式进行和解决这个问题。这确实是我所追求的，但我不知道如何将理论付诸实践。电影中提到可以“使用反向指针的旧技巧”找到两个子集合中的元素，但我不明白如何。

## 问题

> 你和你的朋友有许多不同数量的硬币。您需要将硬币分成两组，以使这些组之间的差异最小。
> 
> 例如，大小为 1,1,1,3,5,10,18 的硬币可以拆分为： 1,1,1,3,5 和 10,18 1,1,1,3,5,10 和 18 或 1 ,1,3,5,10 和 1,18 第三种组合是有利的，因为在这种情况下，组之间的差异仅为 1。约束：硬币将具有 2 到 30 个元素，包括硬币的每个元素将介于 1 和100000 含
> 
> 返回值：将硬币分成两组时可能的最小差异

注意：CodeFu 规则规定在 CodeFu 的服务器上执行时间不得超过 5 秒。

## 主要代码

```
Arrays.sort(coins);

lower = Arrays.copyOfRange(coins, 0,coins.length-1);
//(after sorting) put the largest element in upper
upper = Arrays.copyOfRange(coins, coins.length-1,coins.length);            

smallestDifference = Math.abs(arraySum(upper) - arraySum(lower));
return findSmallestDifference(lower, upper, arraySum(lower), arraySum(upper), smallestDifference); 
```

## 递归代码

```
private int findSmallestDifference (int[] lower, int[] upper, int lowerSum, int upperSum, int smallestDifference) {
    int[] newUpper = null, newLower = null;
    int currentDifference = Math.abs(upperSum-lowerSum);
    if (currentDifference < smallestDifference) {
        smallestDifference = currentDifference;
    } 
    if (lowerSum < upperSum || lower.length < upper.length || lower[0] > currentDifference 
            || lower[lower.length-1] > currentDifference 
            || lower[lower.length-1] < upper[0]/lower.length) {
        return smallestDifference;
    }
    for (int i = lower.length-1; i >= 0 && smallestDifference > 0; i--) {           
       newUpper = addElement(upper, lower[i]);
       newLower = removeElementAt(lower, i);
       smallestDifference = findSmallestDifference(newLower, newUpper, 
               lowerSum - lower[i], upperSum + lower [i], smallestDifference);
    }
    return smallestDifference;
} 
```

## 数据集

这是一个需要很长时间才能解决的集合的示例。

> {100000,60000,600,600,600,60000,600,600,600,60000,60000,60000,60000,60000,600,600,600,600,600,600,600,60000,600,600,60000,60000,600,60000,600,600,600,60000,600,600,600,60000,600,600,600,60000,60000 ,60000,60000, 60000,60000,60000}

如果您想要完整的源代码，我已将其放在[Ideone](http://ideone.com/weHDoP)上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:32:59.073

**编辑** *只是为了清楚：在问题中指定在五秒内运行的额外限制之前，我已经写了这个答案。我也写了它只是为了表明有时蛮力是可能的，即使它看起来不是。所以这个答案并不意味着是这个问题的“最佳”答案：它恰恰意味着是一个蛮力解决方案。作为一个附带好处，这个小解决方案可以帮助某人编写另一个解决方案，以在可接受的时间内验证他们对“大”数组的回答是否正确。*

> 问题当然是，要遍历的可能组合的数量很快就会变得太大而无法进行蛮力搜索。

鉴于最初陈述的问题（在指定最大运行时间 5 秒之前），我完全不同意该陈述；）

您特别写道，最大长度为 30。

请注意，我不是在谈论其他解决方案（例如，考虑到您的限制，可能会或可能不会工作的动态编程解决方案）。

我要说的是*2 ^(30)*并不大。它有点多于十亿，仅此而已。

现代 CPU 可以在一个内核上每秒执行数十亿个周期。

你不需要递归来解决这个问题：递归会破坏你的堆栈。有一种简单的方法可以确定所有可能的左/右组合：简单地从 0 计数到 2 exp 30 - 1 并检查每一位（决定，比如说，有点打开意味着你把值放在左边，关闭意味着你把右边的值）。

因此，如果我没有记错以下方法，那么给出问题陈述，没有任何优化，应该可以工作：

```
 public static void bruteForce( final int[] vals) {
    final int n = vals.length;
    final int pow = (int) Math.pow(2, n);
    int min = Integer.MAX_VALUE;
    int val = 0;
    for (int i = pow -1; i >= 0; i--) {
        int diff = 0;
        for ( int j = 0; j < n; j++ ) {
            diff += (i & (1<<j)) == 0 ? vals[j] : -vals[j];

        }
        if ( Math.abs(diff) < min ) {
            min = Math.abs(diff);
            val = i;
        }
    }

    // Some eye-candy now...
    for ( int i = 0 ; i < 2 ; i ++ ) {
        System.out.print( i == 0 ? "Left:" : "Right:");
        for (int j = 0; j < n; j++) {
            System.out.print(((val & (1 << j)) == (i == 0 ? 0 : (1<<j)) ? " " + vals[j] : ""));
        }
        System.out.println();
    }
} 
```

例如：

```
bruteForce( new int[] {2,14,19,25,79,86,88,100});
Left: 2 14 25 79 86
Right: 19 88 100

bruteForce( new int[] {20,19,10,9,8,5,4,3});
Left: 20 19
Right: 10 9 8 5 4 3 
```

在 30 个元素的数组上，在我便宜的 CPU 上，它运行时间为 125 秒。那是针对“初稿”，在单核上运行的完全未优化的解决方案（所述问题对于并行化来说是微不足道的）。

您当然可以变得更漂亮并重用大量中间结果，从而在不到 125 秒的时间内解决包含 30 个元素的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T18:09:39.890

说`N`是所有硬币的总和。我们需要找到一个硬币子集，其中硬币的总和最接近`N/2`。让我们计算所有可能的总和并选择最好的一个。在最坏的情况下，我们可能期望 2^30 个可能的总和，但这可能不会发生，因为最大可能的总和是 100K*30，即 3M - 远小于大约 1G 的 2^30。因此，一个 3M 整数或 3M 位的数组应该足以容纳所有可能的总和。

所以我们有数组`a`，`a[m] == 1`当且仅当`m`是一个可能的总和。

我们从零数组开始，并且有`a[0]=1`，因为总和`0`是可能的（一个没有硬币）。

```
for (every coin)
  for (int j=0; j<=3000000; j++)
    if (a[j] != 0)
      // j is a possible sum so far
      new_possible_sum = j + this_coin
      a[new_possible_sum] = 1 
```

当您完成 30 * 3M 步时，您将知道所有可能的总和。找出`m`最接近的数`N/2`。你的结果是`abs(N-m - m)`。我希望我能适应时间和记忆的界限。

**编辑**：需要更正和 2 个优化：

1.  按降序遍历数组。否则一美元硬币会一次性覆盖整个数组。
2.  将数组的大小限制为`N+1`（包括 0），以更快地解决较小的硬币组。
3.  由于我们几乎总是得到 2 个相同的结果：`m`和`N-m`，将数组大小减小到`N/2`。为 .添加绑定检查`new_possible_sum`。扔掉更大的可能金额。

# ios - 如何测试报亭新刊？

> ID：13156895
> 
> 赞同：2
> 
> 时间：2012-10-31T11:30:03.727
> 
> 标签：ios, cocoa, newsstand-kit

而且我在appstore有一个报亭应用，现在我想用Newsstand添加添加新问题的功能，然后我的报亭图标将更改为带有[new] ribben的新截图，但我没有找到一些测试报亭环境增加新刊，有大神给点建议，万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T06:02:03.117

不幸的是，据我所知，没有测试环境来测试应用商店中正在更新的 Newsstand 图标。我的意思是，如果不将应用程序实际提交到应用程序商店，就无法进行测试。

如果您的应用在 iTunes Connect 中启用了报刊杂志，则转到应用详情页面中的报刊杂志部分。在那里您会找到“问题”部分，您可以在其中添加最新一期的详细信息，例如封面艺术、发布日期等，

您的更新会在大约 24 小时内反映在整个应用商店中。

# java - JavaFX 自动向下滚动滚动窗格

> ID：13156896
> 
> 赞同：4
> 
> 时间：2012-10-31T11:30:10.803
> 
> 标签：java, javafx-2

当 ScrollPane 控件的内容高度增加时，有什么方法可以自动向下滚动？例如，我在屏幕底部（在 ScrollPane 内）有一个 TitledPane，当我展开它时，我希望 ScrollPane 向下滚动，这样我就可以看到 TitledPane 的全部内容。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-07-15T19:16:12.877

您可以使用内部容器`bind`的`ScrollPane` `vvalue`属性。`heightProperty`例如，如果您`VBox`的`ScrollPane`:

```
scrollPane.vvalueProperty().bind(vBox.heightProperty()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:42:35.670

您可以通过结合`titledPane.localToScene()`和来实现该行为`scrollPane.setVvalue()`

第一个是获取 titledPane 的坐标，第二个是设置 scrollPane 的垂直条位置。请注意，它的范围在 0 - 1 之间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-09T14:31:00.100

在将值传递给垂直或水平条之前，您必须告诉滚动窗格当前坐标在哪里。

这段代码对我来说很好用：

```
// the owner's node of your scrollPane;
titledPane.layout(); 
// the maxValue for scrollPane bar ( 1.0 it's the default value )
scrollPane.setVvalue( 1.0d ); 
```

您必须在滚动窗格增长的地方对此进行编码。例如，如果您将节点添加到滚动窗格内部节点，则将侦听器添加到其子列表中。

如果滚动窗格的内部节点改变了它的高度，则向 heightProperty 添加一个侦听器。

例如，您的 scrollPane 的内部节点是一个 AnchorPane 并且您将节点添加到此窗格，所以这样做：

```
anchorPane.getChildren().addListener( 
    ( ListChangeListener.Change<? extends Node> c ) -> {
        titledPane.layout();
        scrollPane.setVvalue( 1.0d ); 
    }
); 
```

如果是身高增长...

```
heightProperty().addListener(
    (observable, oldValue, newValue) -> {
        titledPane.layout();
        scrollPane.setVvalue( 1.0d ); 
    }
); 
```

就是这样！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-07T07:10:58.957

您可以像这样向 TitledPane 的 height 属性添加一个侦听器：

```
titledPane.heightProperty().addListener((observable, oldValue, newValue) -> 
       vvalueProperty().set(newValue.doubleValue())); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-09T11:35:43.783

我有同样的问题，我在答案中尝试了不止一种方法。我的问题是`ScrollPane`内容正在从其他线程使用`Platform.runLater()`更新，如果更新非常快，所有以前的方法都不够好。对于所有面临此类问题的人，您可以简单地使用这个：

```
ScrollPane scrollPane = new ScrollPane();
scrollPane.needsLayoutProperty().addListener((observable, oldValue, newValue) -> {
    if (!newValue) {
        scrollPane.setVvalue(1.0);
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T21:16:31.987

Donno 如果它仍然相关，我有一个类似的问题，这个解决方案对我有用。我需要滚动条以 MVVM 模式自动滚动。我所做的是将视图中 textarea 的 scrollTopProperty 与 ViewModel 中的 SimpleDoubleProperty 绑定。唯一的问题是 scrollTopProperty，基本上是基于像素滚动的，所以我根据车道数 * 100 增加了它；

看法

```
textArea.textProperty().bindBidirectional(viewModel.SimpleStringProperty());
textArea.scrollTopProperty().bindBidirectional(viewModel.SimpleDoubleProperty()); 
```

视图模型

```
SimpleDoubleProperty.setValue(SimpleStringProperty.getValue().split("\n").length * 100); 
```

我知道代码并没有真正的代表性，但如果有人需要更多的实现细节，我可以详细说明......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-09T01:13:00.943

`innerPane.widthProperty().addListener((observable, oldValue, newValue) -> { scrollPane.setHvalue(1.0d); });`

如果您尝试通过侦听 innerPane 子列表的更改来更改滚动条位置，则不起作用，因为此时尚未使用 innerPane 布局计算此更改。因此，您必须注意属性的宽度或高度！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-12-26T22:09:54.890

我是通过使用 AnimationTimer 来完成的。我必须等待 100000000 纳秒才能确保 ScrollPane 已对扩展的 Titlepane 做出反应。

```
public void scrollNodeInTopScrollPane(Node n, ScrollPane s) {
    final Node node = n;
    final ScrollPane clientTopScrollPane = s;
    AnimationTimer timer = new AnimationTimer() {
        long lng = 0;
        @Override
        public void handle(long l) {
            if (lng == 0) {
                lng = l;                   
            }                
            if (l > lng + 100000000) {                   
                if (node.getLocalToSceneTransform().getTy() > 20) {                      
                    clientTopScrollPane.setVvalue(clientTopScrollPane.getVvalue() + 0.05);                        
                    if (clientTopScrollPane.getVvalue() == 1) {
                        this.stop();                          
                    }
                } else {
                    this.stop();
                }
            }                
        }
    };
    timer.start();
} 
```

# xcode - 当点击照片时，UICollectionView 从缩略图变为全屏

> ID：13156899
> 
> 赞同：1
> 
> 时间：2012-10-31T11:30:20.763
> 
> 标签：xcode, uicollectionview

我有`UICollectionView`一系列缩略图。当我点击一张图片时，我希望它像照片应用程序中那样变成全屏。我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:37:48.093

使用`UICollectionView's` `delegate`方法：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
  //get UIImage from source 
  //show (add subView) UIImageView with full screen frame
  //add gesture for double tap on which remove UIImageView
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:33:50.283

我为每个单元格添加了一个 UITapGestureRecognizer，并在操作回调方法中，我在按下的单元格顶部显示了一个新的 UIImageView，但其中包含一个全尺寸的图像，然后我将其动画以填充整个屏幕。

这样，您只需将缩略图保存在内存中，但是当用户单击缩略图时，它会立即动画成全尺寸图像。

# c - fdopen 和 fprintf

> ID：13156902
> 
> 赞同：0
> 
> 时间：2012-10-31T11:30:27.637
> 
> 标签：c, file-descriptor

以下代码预计会向 demo.txt 写入“一些文本”，但它不起作用：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <fcntl.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    FILE *fp;
    int fd;

    if ((fd = open("demo.txt", O_RDWR)) == -1) {
        perror("open");
        exit(1);
    }
    fp = fdopen(fd, "w");
    fprintf(fp, "some text\n");
    close(fd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:34:05.830

您应该`fflush(fp)`在关闭文件之前使用清除缓冲区。

当您写入文件描述符`fp`时，数据被缓冲。但是您`close(fd)`在将缓冲数据写入文件之前关闭文件`demo.txt`。因此，缓冲数据丢失。如果这样做`fflush(fp)`，它将确保缓冲的数据立即写入 demo.txt。

在为所有打开的文件`close()`做之前，你不应该打电话。`fclose()`

正确的做法是先做`fclose(fp)`后做`close(fd)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:40:31.210

传递给的模式标志`fdopen()`必须与文件描述符的模式兼容。文件描述符的模式是`O_RDWR`，但你正在做：

```
fp = fdopen(fd, "w"); 
```

这可能不起作用（这是未定义的行为。）相反，以`"r+"`模式打开：

```
fp = fdopen(fd, "r+"); 
```

或者，`O_WRONLY`用于文件描述符：

```
open("demo.txt", O_WRONLY) 
```

然后你就可以`fdopen()`进入`"w"`模式了。

最后，关闭`FILE`结构而不是关闭文件描述符：

```
fclose(fp); 
```

如果您不这样做，则会`fp`丢失其底层文件描述符。之后，您不得尝试手动关闭文件描述符。`fclose()`自己做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:36:13.590

使用 fclose(fp) 而不是 close(fd)

# javascript - 如何使用 XUL/Javascript 检查 Windows %temp% 文件夹中的文件是否存在？

> ID：13156904
> 
> 赞同：0
> 
> 时间：2012-10-31T11:30:27.700
> 
> 标签：javascript, firefox, firefox-addon, xul, xulrunner

在这里，我试图检查临时文件夹中是否存在文件 cmd.bat 然后不创建新文件，否则在临时文件夹中创建一个 cmd.bat 。但是临时文件夹路径“%temp%\cmd.bat”有问题，它显示错误：

```
Timestamp: 10/31/2012 3:21:40 AM
Error: NS_ERROR_FILE_UNRECOGNIZED_PATH: Component returned failure code: 0x80520001                  (NS_ERROR_FILE_UNRECOGNIZED_PATH) [nsILocalFile.initWithPath]
Source File: chrome://myext/content/overlay.js
Line: 9 
```

我的代码：

```
 var chk_file = Components.classes["@mozilla.org/file/local;1"]
             .createInstance(Components.interfaces.nsILocalFile);

        chk_file.initWithPath("%temp%\cmd.bat");

        if ( chk_file.exists() == false ) {
            Components.utils.import("resource://gre/modules/FileUtils.jsm");

            var file = FileUtils.getFile("TmpD", ["cmd.bat"]);
            file.createUnique(Components.interfaces.nsIFile.NORMAL_FILE_TYPE, FileUtils.PERMS_FILE);
        }
        else
        {
            alert("file already exists");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:47:15.793

initWithPath 仅采用完整的系统路径。

用这个去临时，然后尝试

```
var environment = Components.classes["@mozilla.org/process/environment;1"]
                            .getService(Components.interfaces.nsIEnvironment);

var path = environment.get("TEMP"); 
```

# java - 我无法写入我创建的文本文件

> ID：13156905
> 
> 赞同：2
> 
> 时间：2012-10-31T11:30:28.720
> 
> 标签：java, filewriter

我创建了一个带有一些标题的文本文件，然后将其关闭，然后当我有想要写入该文件的数据时，什么也没有发生，我的代码在下面以及我尝试打印到它时得到的堆栈跟踪。

```
public class Writetofile {

    BufferedWriter writer = null;

    public void recordData(String record) throws IOException {

        try {
            writer.append(record);
            writer.newLine();
            writer.close();
        } catch (Exception e) {e.printStackTrace();
        }
    }

    public void createtxtfile(String[] details) throws IOException {
        String machine = details[0];
        String date = details[1];
        String start_time = details[2];
        try {
            File new_cal = new File("C:\\Activity_Calibrator\\log\\" + machine + "//" + machine + ".txt");
            new_cal.getParentFile().mkdirs();
            FileWriter fwriter = new FileWriter(new_cal);
            writer = new BufferedWriter(fwriter);
            writer.append("Linear Calibration for " + machine + " carried out " + date);
            writer.newLine();
            writer.close();
        } catch (Exception e) {
        }
    }
}

Message that is recieved
java.io.IOException: Stream closed
  at java.io.BufferedWriter.ensureOpen(BufferedWriter.java:116)
  at java.io.BufferedWriter.write(BufferedWriter.java:221)
  at java.io.Writer.write(Writer.java:157)
  at java.io.Writer.append(Writer.java:227)
  at Writetofile.recordData(Writetofile.java:27)
  at UserInterFace.update(UserInterFace.java:75)
  at Comms.serialEvent(Comms.java:124)
  at gnu.io.RXTXPort.sendEvent(RXTXPort.java:732)
  at gnu.io.RXTXPort.eventLoop(Native Method)
  at gnu.io.RXTXPort$MonitorThread.run(RXTXPort.java:1575) 
```

这很难理解，因为我已经读过我应该在写入 Stream 后始终关闭它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:34:46.150

> 什么都没有发生，我没有收到错误

一个好的第一步是不要吞下异常 - 例如，您可以将堆栈跟踪打印到控制台：

```
} catch (Exception e) {
    e.printStackTrace();
} 
```

然后你会得到一个正确的异常消息，它应该可以帮助你找到你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:58:28.507

在这一行，您添加`"//"`到路径：

```
 File new_cal = new File("C:\\Activity_Calibrator\\log\\" + machine + "//" + machine + ".txt"); 
```

您可能打算添加`"\\"`.

我认为这会弄乱文件的创建，但如果没有测试，我不确定具体如何。它甚至可能依赖于操作系统。`File.getCanonicalFile()`确定返回的打印文件名。

# matlab - 如何在 matlab 彗星图中设置轴

> ID：13156908
> 
> 赞同：3
> 
> 时间：2012-10-31T11:30:31.543
> 
> 标签：matlab, plot, comet, axes

我正在制作一个彗星图，随着“时间”的发展，它可以很好地绘制实际曲线。我的问题是始终调整轴以使绘图完全填充图形。在这种情况下，绘图是一个椭圆，我希望 y 轴和 x 轴具有相同的范围，以便在椭圆和图形窗口边界之间有一些空间。

我试过放置`axes([-18 18 -18 18])`，`axes equal`到处都是。

我试过使用这样的东西（r12 是我的 x 和 y 坐标矩阵）

```
ax=axes;
set(ax,'xlim',[-18 18],'ylim',[-18 18]);
comet(ax,r12(:,1),r12(:,2)) 
```

但 MATLAB 一直将 y 轴置于 [-3 3] 并将 x 轴置于 [-1 18] （由于我的数据，椭圆约为 6 x 18）。

如何使用预定轴制作彗星图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:33:55.447

查看`comet`代码，您可能手头上有一个小错误。

一种可能的解决方法是将`hold`命令应用于您的轴：

```
ax=axes;
set(ax,'xlim',[-18 18],'ylim',[-18 18]);
hold (ax)
comet(ax,r12(:,1),r12(:,2)) 
```

# objective-c - 如何将 UIBarButtonItem 连接到 ViewController 的 IBAction

> ID：13156912
> 
> 赞同：1
> 
> 时间：2012-10-31T11:30:44.023
> 
> 标签：objective-c, ios

我处于需要从 ViewController 收集数据并将其传递给另一个 ViewController 的情况。我唯一的问题是当用户按下 UIBarButtonItem 时这样做。现在，如果我正确理解这一点，UIBarButtonItem 的父级就是 UINavigationController。那么我该如何解决我的问题呢？

这是相关视图的屏幕截图以及按钮（查看电子邮件），该按钮应该与下一个视图一起传递数据并传递给它。

![在此处输入图像描述](../Images/c9ae7c75fe577cb88c0a3eb808308e10.png)

我希望我已经设法解释我的问题是什么。基本上我想做的是沿着这些思路：

```
-(IBAction) reviewEmailButtonWasPushed: (UIBarButtonItem*)senderRecieved
{
    ViewControllerB *viewControllerB = [[ViewControllerB alloc] initWithNib=@"ViewControllerB" bundle=nil];
    viewControllerB.data = self.data;
    [self pushViewController:viewControllerB animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:35:43.130

这取决于您如何将按钮添加到导航栏。如果您在界面构建器中添加它，您可以简单地将操作链接到连接检查器中的按钮。但是，如果您想创建按钮并以编程方式将其链接到操作，请使用以下命令：

```
UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithTitle:@"Review e-mail" style:UIBarButtonItemStyleBordered target:self action:@selector(reviewEmailButtonWasPushed:)];
[self.navigationItem setRightBarButtonItem:myButton]; 
```

# objective-c - 编译的程序找不到文件

> ID：13156915
> 
> 赞同：0
> 
> 时间：2012-10-31T11:30:54.687
> 
> 标签：objective-c, osx-snow-leopard

```
NSFileManager *fm=[NSFileManager defaultManager];   
NSString *pathToFile=[NSString stringWithFormat:@"%@/sells", [fm currentDirectoryPath]];
if ([fm fileExistsAtPath:pathToFile] == NO)
{
    return NO;
}
else
{
    if(content)
    {
        [content release];  
    }
    content=[[NSMutableString alloc] initWithContentsOfFile:pathToFile encoding:NSUTF8StringEncoding error:nil];
}
return YES; 
```

它在 XCode 中正常工作，但 my.app 总是返回 NO（“sells”当然存在于它的目录中）。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:40:38.050

This is how you normally access a single file in the App bundle:

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"yourFile" ofType:@"ext"];  
NSData *fileData = [NSData dataWithContentsOfFile:filePath]; 
```

And this is how you should access a directory:

```
 NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *documentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *path = [documentsDir stringByAppendingPathComponent:@"fileName"];
    if(![fileManager fileExistsAtPath:path])
    {
        // foo bar
    } 
```

# php - 如何使用codeigniter url_title函数防止带加号？

> ID：13156917
> 
> 赞同：0
> 
> 时间：2012-10-31T11:31:06.730
> 
> 标签：php, codeigniter, preg-replace, str-replace, stripslashes

我正在使用该功能以防止错误的 URL 结构：

```
 <?
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

if (!function_exists('seo_helper')) {

function seo_link($deger) {
$turkce=array("ş","Ş","ı","(",")","'","ü","Ü","ö","Ö","ç","Ç"," ","/","*","?","ş","Ş","ı","ğ","Ğ","İ","ö","Ö","Ç","ç","ü","Ü");
$duzgun=array("s","S","i","","","","u","U","o","O","c","C","-","-","-","","s","S","i","g","G","I","o","O","C","c","u","U");
$deger=str_replace($turkce,$duzgun,$deger);
$deger = url_title_plus($deger);
return $deger;
}  

}  

if ( ! function_exists('url_title_plus'))
{
    function url_title_plus($str, $separator = 'dash', $lowercase = FALSE)
    {
        if ($separator == 'dash')
        {
            $search     = '_';
            $replace    = '-';
        }
        else
        {
            $search     = '-';
            $replace    = '_';
        }

        $trans = array(
                        '&\#\d+?;'              => '',
                        '&\S+?;'                => '',
                        '\s+'                   => $replace,
                        '[^a-z0-9\-\._]'        => '',
                        $replace            => $replace,
                        $replace.'$'            => $replace,
                        '^'.$replace            => $replace,
                        '\.+$'                  => ''
                    );

        $str = strip_tags($str);

        foreach ($trans as $key => $val)
        {
            $str = preg_replace("#".$key."#i", $val, $str);
        }

        if ($lowercase === TRUE)
        {
            $str = strtolower($str);
        }

        return trim(stripslashes($str));
    }
} 
```

输入字符串：

```
ATA'DAN MEZİTLİDE 4+1 HAVUZLU GÜVENLİKLİ KAÇMAZ!!! 
```

输出：

```
ATADAN-MEZITLIDE-41-HAVUZLU-GUVENLIKLI-KACMAZ 
```

我想要的是：

```
ATADAN-MEZITLIDE-4+1-HAVUZLU-GUVENLIKLI-KACMAZ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:45:31.083

替换这部分代码并检查它：-

```
'[^a-z0-9\-\+\._]'        => '', 
```

它的作用是允许加号（+）。而不是用''代替它。

# linux - 脚本不会在 Red Hat 上重新启动或关机时启动

> ID：13156918
> 
> 赞同：0
> 
> 时间：2012-10-31T11:31:07.607
> 
> 标签：linux, init

我在 /etc/init.d 中有一个名为“storelogs”的脚本，我在 /etc/rc0.d 和 /etc/rc6.d 中有一个名为“K01storelogs”的链接。

当我直接从 /etc/init.d 调用该脚本时，该脚本运行得非常好，但是当我尝试重新启动机器时，该脚本似乎从未被调用过。

该脚本实际上调用了一个 php 脚本，该脚本执行了一些操作——就像我说的，当我直接调用它时，该脚本运行良好。

脚本非常简单：

```
#!/bin/sh
/usr/bin/php /var/www/html/storeLogs.php 
```

我错过了一步吗？有什么简单的方法来调试这个？

提前干杯！

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:37:59.110

您确定脚本实际上是在启动时运行的吗？您可以尝试在脚本中添加类似 logger "my script is ruuning" 之类的内容来确定。

如果启动链接适合您的运行级别，请使用 chkconfig 工具检查

*   运行级别
*   “chkconfig --list”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:54:58.790

您的链接是 K01storelogs 还是 S01storelogs？

# javascript - jquery 不应用 css 属性

> ID：13156919
> 
> 赞同：0
> 
> 时间：2012-10-31T11:31:14.777
> 
> 标签：javascript, jquery, css

我正在为我正在编写的一个小函数而疯狂。

此函数需要将容器的高度设置为内部存在的最高 UL（总共 3 个 UL，具有绝对位置），如果第二个或第三个 UL 低于第一个，则将这些 UL 的高度设置为相等到第一个。

这是功能：

```
function fixNavHeight() {
    var cont = white,
        arr = [];
        lis = $('nav li');

    lis.each(function() {
        var li = $(this);
        li.mouseenter(function() {
            var childrenHeight = $(this).find(secondaryNavigation).height();
            cont.css('height', childrenHeight);
            setHeight(childrenHeight);
        });
    });

    function setHeight(base) {
        arr = [];
        cont.find('ul').each(function() {
            if($(this).is(':visible')) {
                var h = $(this).height();
                console.log(h);
                if(h <= base) {
                    $(this).css('height', base);
                }
                arr.push(h);
                var biggest = Math.max.apply(null, arr);
                cont.css('height', biggest);
            }
        });
    }
} 
```

一切正常，但如果 UL 低于`base`它不设置 css 高度，我不明白为什么。

你能帮我找到问题吗？

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:37:56.153

在应用高度或宽度时`.css()`添加**px**后缀，如下所示：

```
cont.css('height', biggest +'px'); 
```

对所有类似的呼叫执行相同的操作。

或者，如果您想仅使用数字使用当前语法，则将 css 属性作为对象传递给`.css()`，如下所示：

```
cont.css({'height': biggest}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:30:19.940

尝试回调中的`console.log`这些项目：`mouseenter`

```
secondaryNavigation
$(this).find(secondaryNavigation)
$(this).find(secondaryNavigation).height() 
```

检查是否`secondaryNavigation`已定义。它来自代码中的任何地方（可能是上面的几行），它必须是可访问的。

# c# - 对象数组的数据契约序列化

> ID：13156924
> 
> 赞同：1
> 
> 时间：2012-10-31T11:31:26.917
> 
> 标签：c#, wcf, serialization, svcutil.exe

我有以下情况，我无法找到解决方案：

`svcutil.exe`我有多个通过工具生成的数据合约代理。我正在尝试序列化`object[]`包含数据合同代理实例的实例。尝试以下：

```
public static string Serialize<T>(T obj)
{
   StringBuilder sb = new StringBuilder();
   var known = new List<Type>(){typeof(myDataContracClass), typeof(object[])};
   DataContractSerializer ser = new DataContractSerializer(typeof(T), known );
   ser.WriteObject(XmlWriter.Create(sb), obj);
   return sb.ToString();
} 
```

然后通过以下方式使用它：

```
object[] arrayToSerialize = new object[] { someGuid, myDatacontractProxyInstance};
var serialized = Serialize(arrayToSerialize); 
```

编辑：（进一步描述我的设置）

我放置了以下数据合同属性：

```
[DataContract(Namespace = "http://mynamespace-uri")] 
```

在 svcutil.exe 的代理生成中，我声明了 namespace `/n:*,My.Custom.Namespace`，这导致生成的代理具有与数据协定类不同的命名空间。

题外话：为什么微软最终得到了如此困难的序列化组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:45:38.947

[通过使用attributes](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)装饰 DataContractClass 来给 DataContractSerializer 提示。

尝试这个：

```
[TestFixture]
public class DataContractSerializerTests
{
    [Test]
    public void ArrayOfObjectsTest()
    {
        var dataContracClass = new DataContractClass() 
            { 
               Objects = new object[] { "Johan", 1 } 
            };
        StringBuilder sb = new StringBuilder();
        DataContractSerializer ser = new DataContractSerializer(dataContracClass.GetType());

        using (XmlWriter xmlWriter = XmlWriter.Create(sb))
        {
            ser.WriteObject(xmlWriter,dataContracClass);
        }
        string s = sb.ToString();
    }
} 
```

下面是一个类，其属性指定如何序列化该类。

```
[DataContract]
public class DataContractClass
{
    [DataMember]
    public object[] Objects { get; set; }
} 
```

# javascript - 如何使用 java 脚本（与所有浏览器兼容的代码）在浏览器中显示本地文件的内容？

> ID：13156925
> 
> 赞同：2
> 
> 时间：2012-10-31T11:31:28.013
> 
> 标签：javascript, html

我打算在我的本地创建一个应用程序。我需要一个 javascript 代码来呈现我使用 html 文件上传输入框从我的系统中选择的任何文件的内容。参考以下链接，但 [http://www.alecjacobson.com/weblog/?p=1645](http://www.alecjacobson.com/weblog/?p=1645)代码与其他浏览器不兼容，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:41:24.443

For security reasons you can't open a file from the browser. What you can actually do is upload it to the server and then write it back to the page. To upload the file I suggest you uploadify or jquery upload.

You are welcome.

If you don't care about the cross-browsing support then:

```
<input id="file" type="file" multiple="" onchange="startRead()">

<pre><code id="output"></code></pre>

function startRead() {
    //obtain input element through DOM  
    var file = document.getElementById('file').files[0];
    if (file) {
        getAsText(file);
    }
}
function getAsText(readFile) {
    var reader;
    try {
        reader = new FileReader();
    } catch (e) {
        document.getElementById('output').innerHTML = "Error: seems File API is not supported on your browser";
        return;
    }
    // Read file into memory as UTF-8      
    reader.readAsText(readFile, "UTF-8");
    // handle success and errors

    reader.onload = loaded;
    reader.onerror = errorHandler;
}

function loaded(evt) {
    // Obtain the read file data    
    var fileString = evt.target.result;
    document.getElementById('output').innerHTML = fileString;
}
function errorHandler(evt) {
    if (evt.target.error.code == evt.target.error.NOT_READABLE_ERR) {
        // The file could not be read
        document.getElementById('output').innerHTML = "Error reading file..."
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:51:16.923

我们正在开发各种基于 Web 的 GUI 编辑器。这个问题已经困扰很久了。

据我所知，您提到的网站中的方法是唯一的方法。我们正在使用 HTML5 文件系统。

在此之前，我们考虑过使用各种 Flash 模块、本地 Web 服务器、保管箱......

# tomcat - Tomcat 7 管理器 - 禁用“取消部署按钮”

> ID：13156926
> 
> 赞同：7
> 
> 时间：2012-10-31T11:31:35.887
> 
> 标签：tomcat, tomcat7, undeploy

我从 Tomcat 6 升级到 Tomcat 7 并且管理器有所不同。在 Tomcat 6 的管理器中，当我尝试停止或取消部署应用程序时，我会收到一个确认框，但在 Tomcat 7 中它只是发生了。

我的问题是，我可以禁用或至少将确认 javascript 附加到取消部署按钮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:12:29.290

简短的回答版本是否定的，因为 html 在 **硬编码**的 java 类中，如您在此处看到的：

[HTMLManagerServlet](http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/catalina/manager/HTMLManagerServlet.java)

但您仍然可以执行以下操作：

*   扩展 HTMLManagerServlet 并覆盖以下方法

    ```
    protected void list(HttpServletRequest request,
                        HttpServletResponse response,
                        String message,
                        StringManager smClient) throws IOException 
    ```

*   使用不同的变量而不是：

    ```
    STARTED_DEPLOYED_APPS_ROW_BUTTON_SECTION, args)); 
    ```

在**YOUR_STARTED_DEPLOYED_APPS_ROW_BUTTON_SECTION**变量中，您可以注入将处理 onclick 事件的 JS 代码，这也有帮助：

[内联 onclick JavaScript 变量](https://stackoverflow.com/questions/5586857/inline-onclick-javascript-variable)

然后编译**YourHTMLManagerServlet**并将 manager/WEB-INF/web.xml 更改为**：**

```
<servlet>
    <servlet-name>HTMLManager</servlet-name>
    <servlet-class>org.apache.catalina.manager.HTMLManagerServlet</servlet-class>
    <init-param> 
```

**至：**

```
<servlet>
    <servlet-name>HTMLManager</servlet-name>
    <servlet-class>your.own.YourHTMLManagerServlet</servlet-class>
    <init-param> 
```

将 jar 放入**tomcat/lib**目录，然后就可以使用了。

# iphone - UITableView 委托方法

> ID：13156927
> 
> 赞同：19
> 
> 时间：2012-10-31T11:31:38.163
> 
> 标签：iphone, ios, ipad, ios4

我需要一个`UITableView`需要在编译时从另一个函数调用的委托方法……有没有`UITableView`我可以使用的默认委托方法？如果没有，请评论如何在现有委托方法之外添加额外的委托方法。

提前致谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-31T11:55:27.447

确保`UITableview`以任何一种方式设置委托 - 从`NIB`或以编程方式

**从笔尖使用** 笔尖：-

![在此处输入图像描述](../Images/df021b4e95fe7940a324032752e5eef4.png)

以编程方式： - ![在此处输入图像描述](../Images/a15e49f8f1c23a70189c927c9d1e684b.png)

然后：-

```
-(void)viewWillAppear:(BOOL)animated
{
         tblService.delegate=self;
         tblService.dataSource=self;
         [super viewWillAppear:YES];
} 
```

使用以下代表：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;    //count of section
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [catagorry count];    //count number of row from counting array hear cataGorry is An Array
}

- (UITableViewCell *)tableView:(UITableView *)tableView
             cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *MyIdentifier = @"MyIdentifier";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

        if (cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                           reuseIdentifier:MyIdentifier] autorelease];
        }

        // Here we use the provided setImageWithURL: method to load the web image
        // Ensure you use a placeholder image otherwise cells will be initialized with no image
        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://example.com/image.jpg"]
                       placeholderImage:[UIImage imageNamed:@"placeholder"]];
            cell.textLabel.text = @"My Text";
        return cell;
    } 
```

`Below use for set height of cell`

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

        return 80;

} 
```

`Below use for gatting particular cells data by selecting row this method called`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        Yourstring=[catagorry objectAtIndex:indexPath.row];      

       //Pushing next view 
        cntrSecondViewController *cntrinnerService = [[cntrSecondViewController alloc] initWithNibName:@"cntrSecondViewController" bundle:nil];
        [self.navigationController pushViewController:cntrinnerService animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T11:40:35.143

我不知道这种方法是否存在，但如果您需要`UITableView`委托中的其他方法，您可以创建一个新的`UITableViewDelegate`.

# php - 以编程方式编辑后端数据，例如 Magento 中的类别描述

> ID：13156935
> 
> 赞同：0
> 
> 时间：2012-10-31T11:31:59.147
> 
> 标签：php, magento-1.7, magento

谁能阐明我如何使用 PHP 以编程方式编辑管理中可访问的数据，例如 Magento 中的类别描述、产品名称等？

我已经搜索了谷歌，但根本找不到任何类似的东西。

我听说一个似乎使用 SOAP 的 Magento API，也许可以使用它？无论如何，我的所有代码都将是 Magento 安装的本地代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:44:42.997

如果您的代码是本地代码，则按类别 id（或该类别唯一的任何参数）加载类别模型并更改描述

```
Mage::getModel('catalog/category')->load(categoryid);->setYourvariable('yournewvalue')->save(); 
```

# list - 在 Haskell 中处理列表列表

> ID：13156944
> 
> 赞同：5
> 
> 时间：2012-10-31T11:32:14.357
> 
> 标签：list, haskell

我是 Haskell 的初学者，所以我在严格类型的东西上有点挣扎，只是想知道是否有人可以帮助我完成我正在尝试构建的功能。基本上，它需要一个列表列表，例如：

```
[[1,2,3], [7,6,8], [0,3,4]] 
```

并将它们一起添加到一个列表中，将后面的列表按其位置数进行翻译。因此，处理示例列表实际上会执行以下操作：

```
foldl (zipWith +) [] [[1,2,3],[0,7,6,8],[0,0,0,3,4]] 
```

这是我当前的函数（会出现类型错误）：

```
 addLists :: [[Integer]] -> [Integer]
    addLists [[]] = []
    addLists [[x]] = [x]
    addLists [x:xs] = zipWith (+) [x] ([0]++ (addLists xs)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T12:21:07.943

请注意，`([0]++)`它与 相同`(0:)`，这将使它看起来更整洁并为我们节省一两纳秒。（我在拿纳秒开玩笑——没有人能分辨出什么时候比纳秒快，但无论如何这种方式更好。）

让我们首先考虑制作您需要的列表。我们想要

```
postponeLists [[1,2,3], [7,6,8], [10,20,30,40]] 
             = [[1,2,3], [0,7,6,8], [0,0,10,20,30,40]]
             = [1,2,3] : ones that should have zero in front of them 
```

这对定义来说已经足够了：

```
postponeLists [] = []
postponeLists (l:ls) = l : map (0:) (postponeLists ls) 
```

现在你说

```
foldl (zipWith +) [] [[1,2,3],[0,7,6,8],[0,0,0,3,4]] 
```

但你的意思是

```
foldl (zipWith (+)) [] [[1,2,3],[0,7,6,8],[0,0,0,3,4]] 
```

但不幸的是，这给了你`[]`因为`zipWith`一旦任何列表用完元素就会停止。我们需要一些不停地压缩它们的方法。

解决方案1：找到最长的一个，`maxlength`使用`take maxlength.(++ repeat 0)`
解决方案2：编写另一个不会停止的zipWith函数。

我更喜欢方案2。我们看一下[定义`zipWith`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-List.html#zipWith)

```
zipWith :: (a->b->c) -> [a]->[b]->[c]
zipWith f (a:as) (b:bs) = f a b : zipWith f as bs
zipWith _ _      _      = [] -- here's the problem - it stops as soon as any list is empty 
```

好的，我们不要停下来：

```
zipWithMore :: (a -> a -> a) -> [a] -> [a] -> [a]
zipWithMore f (a:as) (b:bs) = f a b : zipWithMore f as bs
zipWithMore f []      bs      = bs -- if there's more in bs, use that
zipWithMore f as      []      = as -- if there's more in as, use that 
```

现在您可以替换`zipWith (+)`为`zipWithMore (+)`. 我会把重点留给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T12:14:21.730

我认为这可以满足您的要求

```
import Data.List (transpose)

addLists :: Num a => [[a]] -> [a]
addLists xs = map sum . transpose $ zipWith (\n x -> replicate n 0 ++ x) [0..] xs 
```

# ruby-on-rails - Rails 查询语法

> ID：13156945
> 
> 赞同：3
> 
> 时间：2012-10-31T11:32:22.160
> 
> 标签：ruby-on-rails, syntax

我是 Rails 船上的新手，我想知道两种查询语法之间的区别

我尝试的第一个是：

```
User.limit(8).order('created_at DESC').group('created_at').count 
```

第二个，似乎更加高效和强大：

```
User.count(:order =>'DATE(created_at) DESC', :group =>["DATE(created_at)"], :limit => 8) 
```

但我并不真正了解两者的用例。无论如何，我确信这很明显......谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T11:45:00.450

第一个是 rails 3 语法。并且每个方法都用在那里，即`limit, order, group`是`ActiveRecord:: Relation`方法。使用第一种方法有很多优点。ActiveRecord::Relation 是 rails 3 的核心特性之一，除了资产管道等。

请阅读这个，

[http://asciicasts.com/episodes/239-activerecord-relation-walkthrough](http://asciicasts.com/episodes/239-activerecord-relation-walkthrough)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:35:24.590

第二种语法是不推荐使用的老式语法。也称为哈希选项重载。第一个，链接，语法是前进的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:47:38.713

第二个是强大和高效。因为第一个将占用所有行（和所有列）然后它会计数。但第二个将只计算行数。

第二个将使用以下查询。

从表名中选择计数（*）；

# android - 使用录音篡改语音

> ID：13156951
> 
> 赞同：1
> 
> 时间：2012-10-31T11:32:44.353
> 
> 标签：android

我正在使用**`AudioRecord`**课堂录制我的声音，并且我正在使用**`AudioTrack`**

我怎样才能改变我的声音听起来像什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:17:58.370

您可以使用 SoundPool 类：

[https://developer.android.com/reference/android/media/SoundPool.html](https://developer.android.com/reference/android/media/SoundPool.html)

例如，使用该`setRate (int streamID, float rate)`方法，您可以更改播放声音的速率。如果你提高速率，你会听起来像花栗鼠:-)

# servlets - 在单个 JVM 实例中部署 Clojure 应用程序

> ID：13156952
> 
> 赞同：5
> 
> 时间：2012-10-31T11:32:45.947
> 
> 标签：servlets, clojure, jvm, osgi, application-server

假设我在 Clojure 中使用 ZeroMQ 和 BSON 作为协议开发了两个或更多不同的服务器应用程序。如何使用单个 JVM 实例部署它们，同时共享公共依赖项？

为每个独立应用程序使用一个 JVM 实例似乎很浪费内存。我计划未来开发几个 Clojure 应用程序，VPS 内存并不便宜。

虽然没有明确说明，但在应用服务器（Jetty、Glassfish）中运行的应用程序似乎共享相同的 JVM，同时隔离它们的状态。但是，它们需要一个容器，而且 Servlet 或 Enterprise JavaBeans 都没有我可以轻松适应我的自定义协议的实现。

我一直在考虑使用 Servlet 并实现一个虚拟 service() 方法，尽管我不喜欢有一个毫无意义的 HTTP 服务器开销的想法。至于 EJB 容器，我什至无法弄清楚它的实现。

有一个只需要 init() 和 destroy() 方法的容器会很好，但我找不到提供它的应用程序服务器。

也许有办法，或者我什至不需要应用程序服务器。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:41:44.710

因此，您有两个应用程序共享相同的依赖关系，并且都希望在消息总线上响应和/或生成事件。

如果我明白你在说什么，这应该就像启动 JVM 并访问类路径中的所有代码并从 main 方法初始化消息总线和代码一样简单。

如果您想使用容器，您可以创建一些虚拟的消息驱动 bean，它们位于您的 clojure 代码和消息总线之间，假设您的消息总线有一个 JMS 适配器。使用 netbeans/glassfish，这可能还不错。您可能会在监控方面获得一些收益，但我不确定您还会获得什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:10:41.177

听起来您可以使用 EJB 容器，但前提是使用它更容易或更简单。你看过[Immutant](http://immutant.org/)吗？它基本上是针对 Clojure 的 JBossAS 的包装器，由 Red Hat 的人（他们也拥有 JBossAS）编写。

除了作为应用服务器之外，这些家伙还围绕 Clojure 封装了 JMS 和其他 Java-EE 功能，因此在应用程序之间发送消息[看起来非常简单](http://immutant.org/documentation/2.1.10/apidoc/guide-messaging.html)：

此外，它们有[守护进程](http://immutant.org/documentation/1.1.4/daemons.html)和[作业](http://immutant.org/documentation/1.1.4/jobs.html)，它们可能提供类似于您所描述的简单服务的内容`init()`和`destroy()`。

话虽这么说，我还没有使用它，所以我不能保证它的真棒/可怕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:38:37.030

我一直在寻找，发现一些实现[OSGi](http://en.wikipedia.org/wiki/OSGi)服务平台的应用服务器拥有比 Java EE 提供的更简单的轻量级容器。

[例如， Apache Karaf](http://karaf.apache.org/)可以直接从 JAR 文件加载 POJO 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:02:53.423

我不确定 DD 是什么，但任何 JAR 都是有效的捆绑包。由于 clojure 不是类型安全的，您将需要连接 clojure 世界和 OSGi/Java 世界，但 OSGi API 是这种桥梁的梦想。

并不是说在 OSGi 包中不会自动提供它们的内容，在 OSGi 中，包默认是私有的。但是，API 允许您在任何需要的地方打孔。

# ios - Xcode：如何在旧版本的 iOS 上测试我的应用程序

> ID：13156953
> 
> 赞同：7
> 
> 时间：2012-10-31T11:32:57.117
> 
> 标签：ios, xcode, testing

我想在旧版本的 iOS 上测试我的应用程序。“旧版本”是指 iOS 5.1 5.0 和 4.3。为此，我应该在 Xcode 中做什么？我已经（通过 Xcode）下载了所有相应的模拟器，但我不知道如何在特定的模拟器上构建和运行我的应用程序。我唯一的选择是在 iPhone/iPad 6.0 模拟器上运行我的应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T12:11:33.427

这两个答案都不够清楚，我添加这个是为了阻止人们做出错误的假设。

在较低版本的 iOS 上进行测试的唯一方法是在具有较低版本的设备或较低版本的模拟器之一上运行它。

“部署目标”在这里都错误地回答说在较低版本上运行应用程序，只是设置了应用程序将运行的最低安装操作系统版本。当您在 iOS 6 模拟器上运行它时 - 它仍在版本 6 上运行，而不是您设置的部署目标。

但是，如果不设置较低的部署目标，则无法使用不同的 iOS 模拟器。

最佳做法是使用可用的最新版本和 SDK 进行构建，并将部署目标设置为您的应用支持的最低版本。

至于在不同版本的模拟器上运行应用程序 - 查看 Xcode 左上角的下拉菜单 - 您可以从那里选择在哪个已安装的模拟器上运行您的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T11:36:34.737

我认为您的应用程序部署目标设置为`iOS 6.0`. 使其成为您想要的最低版本。我相信 iOS 4.3 是目前​​可能的最低版本。

要更改部署目标，

1.  在项目导航中选择项目文件
2.  点击你的目标
3.  在摘要选项卡中，选择您的部署目标。

**编辑：看到@Abizern 的答案后。** 好吧，我在问题中回答了这一部分。

> 我唯一的选择是在 iPhone/iPad 6.0 模拟器上运行我的应用程序。

OP 没有让旧版本的模拟器显示在下拉菜单中。这是因为他的项目基础 sdk 目标和部署目标设置为`iOS 6.0`. 通过将部署目标设置为较低版本，其他模拟器开始出现。

但正如@Abizern 正确指出的那样，要在较低版本的模拟器上运行，您必须从下拉菜单中选择正确的模拟器才能运行。好吧，只是为了说清楚。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T15:28:00.873

打开 Xcode 并在左上角的菜单中选择要运行的设备，单击“更多模拟器...”

Xcode 首选项的下载部分将打开，

单击“组件”选项卡。

您将看到可以安装的模拟器列表，单击安装您需要的版本。

模拟器需要重新启动才能安装。

要运行新安装的模拟器版本，只需从 Xcode 的运行菜单中选择它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T11:38:10.183

在左侧边栏，单击列表的第一个元素（通常是您的项目的名称）。将打开一个新菜单，就像我的屏幕截图一样。

![截屏](../Images/326cdca965bfba0804c9e998a37743cb.png)

只需选择您要模拟的目标。

# c++ - 将 DLL 制作成 COM 组件

> ID：13156954
> 
> 赞同：2
> 
> 时间：2012-10-31T11:32:59.513
> 
> 标签：c++, com

我是 COM 新手，所以这可能是一个愚蠢的问题，但无论如何我都会问。:)

据我了解，为了制作 DLL COM，我们需要在 .idl 文件中定义其接口，使用 MIDL 编译器对其进行编译，然后简单地实现使用定义的接口的类。然后我们需要暴露`DllRegisterServer`,`DllUnregisterServer`和`DllGetClassObject`。它应该足够了，对吧？

但是我做了这一切，当我尝试在客户端 C++ 程序中检查它时，我的视觉工作室说（在#import 语句中）它找不到 tlh 文件......

这就是我的 .idl 的样子：

```
import "someIdl.idl";

[
    uuid(some-guid-Num1),
    version(1.0),
    helpstring("The library's description")
]
library LibName
{
    importlib("stdole2.tlb");
    [
        uuid(some-guid-Num2),
        helpstring("Some Description")
    ]
    coclass ClassName
    {       
        interface Interface_defined_in_someIdl;
    }
}; 
```

我在 .idl 中遗漏了什么吗？我弄错了 COM 制作过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:51:42.713

问题是我没有将 TLB 文件作为资源嵌入到 DLL 中。

# php - 搜索两个值之间的所有 id

> ID：13156958
> 
> 赞同：-2
> 
> 时间：2012-10-31T11:33:11.037
> 
> 标签：php, symfony, doctrine-orm

我想使用实体管理器查找 1 到 100 之间的所有 id，例如：

我真的卡住了谁能帮帮我

```
$em = $this-> getDoctrine() -> getEntityManager();
$KPII = $em-> getRepository('AdminBlogBundle: AlertesBss2') -> findBy(array ('id' =>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:38:59.207

请参阅[文档](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html)：

```
$em
    ->createQuery('
        SELECT u.name 
          FROM User u 
         WHERE u.id BETWEEN :from AND :to'
    )
    ->setParameters([
        'from' => $form,
        'to'   => $to,
    ])
    ->getResult()
; 
```

# c++ - 异常安全将对象移出堆栈

> ID：13156959
> 
> 赞同：3
> 
> 时间：2012-10-31T11:33:18.280
> 
> 标签：c++, c++11

我正在编写一个带有以下函数的互斥保护堆栈，用于在可能失败的情况下从顶部弹出一个值：

```
bool try_pop(T& value)
{
    std::lock_guard<std::mutex> lock(mutex_);
    if (ctr_.empty())
        return false;
    value = std::move(ctr_.back());
    ctr_.pop_back();
    return true;
} 
```

我使用 a`std::vector`作为底层容器。为了将不可复制的 T 存储在堆栈中（例如`std::unique_ptr`），我曾经`std::move`将 T 从向量的背面取下，否则会进行复制。两个问题：a) 这是正确的吗？T 会被移动还是复制？b) 我担心异常安全。如果移动抛出，则堆栈不会被弹出，但顶部值可能处于半移动状态。这可能吗？我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T11:50:46.290

a) 它将被移动，假设它有一个移动构造函数。对于已定义复制构造函数但未定义移动构造函数的类型，它将被复制。

b) 如果您需要强异常保证，那么您应该使用仅在输入提供移动构造函数`std::move_if_noexcept`时才启用移动。`noexcept()`这样，如果移动构造函数可以抛出，它将求助于制作副本，因此如果抛出异常，则对象在堆栈上保持不变。 `std::move_if_noexcept`被明确提供以帮助在这种情况下提供强有力的保证。

编辑：正如 Howard Hinnant 指出的那样，当前的代码示例使用的是移动赋值，而不是移动构造，所以`std::move_if_noexcept`不太可能做你想做的事。要在使用分配时解决它，您需要编写自己的包装器，该包装器基于`std::move_if_noexcept`：

```
template <class T> typename std::conditional<
!std::is_nothrow_move_assignable<T>::value && std::is_copy_assignable<T>::value,
const T&, T&&>::type move_if_assign_noexcept(T& x) noexcept {
   return std::move(x);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:44:11.153

它是正确的（除了整个异常安全的事情）并且它将被移动（如果它支持移动）。

正如您所发现的，如果移动可以抛出，则不可能提供强有力的异常保证——在这种情况下，您必须求助于复制。不过，投掷动作是非常少见的东西，所以我不会多想。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T11:46:21.490

1) 将被移动，因为`unique_ptr`已经移动 c-tor。

2)

从 n3337 20.7.1.2

```
unique_ptr(unique_ptr&& u) noexcept;
unique_ptr& operator=(unique_ptr&& u) noexcept; 
```

# ffmpeg - 用 FFmpeg 优化图像？

> ID：13156961
> 
> 赞同：6
> 
> 时间：2012-10-31T11:33:27.480
> 
> 标签：ffmpeg, lossless-compression, google-pagespeed

Google PageSpeed 建议可以优化我网页上的图像。无损压缩将平均节省 11%，但是我的图像是使用以下 FFmpeg 命令创建的：

```
ffmpeg -i '$video_path' -vcodec mjpeg -vframes 1 -an -f rawvideo -ss 00:00:20 -s 145*108 $thumb_image 
```

有没有办法优化这些图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T18:19:43.923

首先`-s 145*108`不是一个有效的 ffmpeg 选项；它应该是`-s 145x108`。要正确缩放图像，请参阅[如何使用 ffmpeg 从 .flv 视频创建缩略图图像的答案？](https://superuser.com/a/496352/110524)对于一些可以保持纵横比的示例。您没有指定图像类型，所以我假设您正在输出到 jpeg。`-qscale:v`您可以使用（或者`-qscale`如果使用旧的 ffmpeg 语法）更改输出质量。jpeg 的范围是 1-31 的线性比例，其中 1 是最好的质量，31 是最差的质量。

### JPG

至于无损优化 jpeg，您可以使用`jpgcrush`or `jpegtran`：

```
jpegtran -optimize -copy none -perfect -v input.jpg > output.jpg 
```

我注意到 Opera 无法正确显示处理过的图像，`jpgcrush`但这是我前段时间检查的。

### PNG

对于 png，您有多种工具，包括`pngcrush`、`optipng`等`advpng`：

```
optipng -o7 input.png 
```

* * *

请记住，FFmpeg 使用问题更适合超级用户。

# mysql - 如何从数据库中的所有表中查找公共文件？

> ID：13156963
> 
> 赞同：0
> 
> 时间：2012-10-31T11:33:53.513
> 
> 标签：mysql, inner-join, columnname

我正在尝试找到一种方法来从数据库中的所有表中获取所有公共字段。这是我的代码

```
SELECT t.TABLE_NAME 
FROM information_schema.TABLES t
INNER JOIN information_schema.COLUMNS c 
   ON t.TABLE_NAME=c.TABLE_NAME
WHERE t.TABLE_SCHEMA = '<database_name>'
   AND c.COLUMN_NAME = '<column_name>'
GROUP BY t.TABLE_NAME 
```

我想在不输入特定列名的情况下做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:42:39.170

**已编辑**

```
SELECT col,cnt from (
SELECT c.COLUMN_NAME col, count(*) cnt
FROM information_schema.TABLES t
INNER JOIN information_schema.COLUMNS c 
   ON t.TABLE_NAME=c.TABLE_NAME
WHERE t.TABLE_SCHEMA = '<database_name>'
GROUP BY c.COLUMN_NAME 
) tbl WHERE cnt>=2; 
```

# sql - 如何选择与所有子公司签订合同的客户？

> ID：13156964
> 
> 赞同：-2
> 
> 时间：2012-10-31T11:33:55.623
> 
> 标签：sql, oracle, oracle11g

如何选择与所有子公司签订合同的客户？

```
R2
    UID | Subsidiary
    1   | 1
    1   | 2
    1   | 3
    2   | 1
    2   | 2
    3   | 1
    3   | 1 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:48:48.287

像这样的东西：

```
select u_r2.uid
from 
     (select uid
           , count(distinct subsidiary) as u_subs
     from r2
     group by uid )  u_r2
  , 
    (select count (distinct subsidiary) as tot_subs
     from r2) sub_r2
where sub_r2.tot_subs = u_r2.u_subs; 
```

# html - Chrome 和 Firefox 的 flexbox 行为差异

> ID：13156965
> 
> 赞同：8
> 
> 时间：2012-10-31T11:34:04.217
> 
> 标签：html, firefox, google-chrome, css, flexbox

该示例可以在[http://jsfiddle.net/GGYtM/](http://jsfiddle.net/GGYtM/)找到，这里是所要求的内联代码：

```
<html>
<style type='text/css>
.flex{
  /* old syntax */
  display: -webkit-box;
  display: -moz-box;

  /* new syntax */
  display: -webkit-flex; 
  display: -moz-flex; 
  display: -o-flex; 
  display: -ms-flex; 
  display: flex; 
}

.flex-direction-horizontal{
  /* old syntax */
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;

  /* new syntax */
  -webkit-flex-direction:raw;
  -moz-flex-direction:raw; 
  -o-flex-direction:raw; 
  -ms-flex-direction:raw; 
  flex-direction: raw;
}
.flex-cross-align-stretch{
  /* old syntax */
  -webkit-box-align:stretch;
  -moz-box-align:stretch;

  /* new syntax */
  -webkit-align-items:stretch;
  -moz-align-items:stretch;
  -o-align-items:stretch;
  -ms-align-items:stretch;
  align-items:stretch;
}  
.container{
  border: 1px solid gray;
  padding:5px;
  background:#ecd953;
  -moz-border-radius: 5px;
  border-radius: 5px;
}
.button{
  width:70px;
  height:50px;
  /*margin:5px;*/
  background: #1b486f;
  color : white;
  position:relative;
  text-align:center;
  padding-top:5px;
}

.wrap{
  margin:5px;
}
​
</style>
<body>
    <div class="flex flex-direction-horizontal flex-cross-align-stretch container" id='root'>
    <div class="wrap">
        <div id="elem2" class="button">
      <span id="txt">2</span>
    </div>
     </div>
    </div>
</body>
</html> 
```

在 Firefox 中，“根” div 元素不会增长到适合父元素的宽度，但会占据适合内容所需的空间 - 这是完美的。然而，在 Chrome 和 Safari 中，“根”div 元素会增长到占据父容器的整个宽度。这种差异的原因是什么？理想情况下，我想实现 FF 行为，这是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-02T18:24:00.300

你用

```
display: flex; 
```

但是，如果您不希望它增长到适合父元素的宽度，而是占用适合内容所需的空间，您应该使用

```
display: inline-flex; 
```

对于较旧的浏览器，您可能需要

```
display: -moz-box;
display: -ms-inline-flexbox;
display: -webkit-inline-flex;
display: inline-flex; 
```

```
.flex {
  /* old syntax */
  display: -moz-box;
  display: -ms-inline-flexbox;
  /* new syntax */
  display: -webkit-inline-flex;
  display: inline-flex;
}
.container {
  border: 1px solid gray;
  padding: 5px;
  background: #ecd953;
  -moz-border-radius: 5px;
  border-radius: 5px;
}
.button {
  width: 70px;
  height: 50px;
  background: #1b486f;
  color: white;
  position: relative;
  text-align: center;
  padding-top: 5px;
}
.wrap {
  margin: 5px;
}
```

```
<div class="flex container">
  <div class="wrap">
    <div id="elem2" class="button">
      <span id="txt">2</span>
    </div>
  </div>
</div>
```

# database - Visual Studio 2010 中的 SqlDataAdapter 对象

> ID：13156966
> 
> 赞同：2
> 
> 时间：2012-10-31T11:34:04.850
> 
> 标签：database, winforms, visual-studio-2010, sql-server-2008-express

我正在运行`Visual Studio 2010`和`SQL Server 2008 Express`版本。我在 SQL 中创建了一个名为**Hangman.mdf**的数据库。然后在`Visual Studio`我将`SqlDataAdapter`对象拖到我的表单中，它会调出向导，在数据源下的向导中，我选择`Microsoft SQL Server Database File`（SqlClient），然后浏览到我的**Hangman.mdf**文件。当我单击测试连接时，它会抛出此错误：

```
Unable to open physical file "C:\XXX\Hangman.mdf". Operating system error 5: "5(Failed to retrieve text for this error. Reason: 15105)" An attempt to attach an auto named database for file C:\XXX\Hangman.mdf failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share. 
```

我在奔跑`Windows 8`，我已经敞开心扉`Visual Studio`了。`SQL Server``Administrator`

我将不胜感激任何帮助。

谢谢

# javascript - YUIDoc，记录“返回”对象的最佳方式

> ID：13156971
> 
> 赞同：2
> 
> 时间：2012-10-31T11:34:21.470
> 
> 标签：javascript, yui, documentation-generation

我第一次在一个新项目中使用 YUIDoc。我正在创建对象（彼此隔离），这些对象将控制自己形状的创建和跟踪，这些形状稍后会写入屏幕。

我有我的主要对象——下面的伪代码中的“MakeOneOfThese”——使用“ThingMaker”方法返回形状定义。

当我生成 YUIDocs 时，左边有一长串类，它们之间没有关系。所以我以推荐的方式应用了@for，但我最左边的类列表仍然不代表类列表中的层次结构或类文档的主体。例如，类列表如下：

*   MakeOneOf these
*   形状一
*   形状二

我的解决方法是在 @class 名称中使用其父类作为层次结构的前缀。YUIDoc 然后给了我：

*   MakeOneOf these
*   MakeOneOfThese.shapeOne
*   MakeOneOfThese.shapeTwo

我很想知道更有经验的 YUIDoc 用户是如何解决这个问题的，以及如何将我的解决方案替换为更合适或改进的解决方案。

下面的伪代码已准备好放入文件并通过 YUIDoc 运行。

非常感谢您花时间在回复上。安东尼

```
 /**
    The main constructor
    @class MakeOneOfThese 
    @constructor
    @param [options]{Object}
      @param [options.gridSize] {Integer}  The pixel dimensions for the grid
      @default 20

    **/
    function MakeOneOfThese(options) {
      var that= {
          //game properties
          //game methods

        /**
        A shape chooser
        @method ThingMaker
        @constructor
        @param thingType {String}
        @return MakeOneOfThese.ThingMaker.piece {object} an object representing definition information for the
        named shape type
        **/
        ThingMaker: function(thingType) {
            var PieceDefinitions = {
                /**
                A shape definition
                @class MakeOneOfThese.shapeOne
                @return MakeOneOfThese.ThingMaker.piece {object} 
                **/
                shapeOne: function() {
                    var piece = {
                      name: "ShapeOne",
                      signature: {
                         n: [[1],[1,1],[0,1]],
                         e: [[0,1,1],[1,1]], 
                         s: [[1],[1,1],[0,1]],
                         w: [[0,1,1],[1,1]]
                      }
                    }
                    return piece;
                }
                /**
                A shape definition
                @class MakeOneOfThese.shapeTwo
                @return MakeOneOfThese.ThingMaker.piece {object} 
                **/         
                shapeTwo: function() {
                  var piece = {
                    name: "ShapeTwo",
                    signature: {
                       n: [[1],[0,1],[0,1]],
                       e: [[0,1,1],[1,1]], 
                       s: [[1],[0,1],[0,1]],
                       w: [[0,1,1],[0,1]]
                    }
                  }
                  return piece;
                }
          }
      }
      return that;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:51:00.803

或者，您也可以尝试 JsDuck，它使用与 YUIDoc 相同的标签（几乎全部），并且生成的文档不仅更漂亮，而且还维护了类层次结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:04:44.767

而不是@class MakeOneOfThese.shapeTwo，你可以我们

@namespace MakeOneOfThese

@class shapeTwo

# datetime - 将 ISO 8601 日期字符串转换为 .NET DateTime

> ID：13156972
> 
> 赞同：1
> 
> 时间：2012-10-31T11:34:26.650
> 
> 标签：datetime

将此字符串转换`2012-10-31T09:05:25+0000` 为 .NET DateTime 我从 facebook json 获取此字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:36:47.997

```
var myDate = DateTime.Parse("2012-10-31T09:05:25+0000"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:37:19.147

使用**[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)**。它是一个**[ISO 8601](http://www.w3.org/TR/NOTE-datetime)**日期字符串。

```
inputStr = "2012-10-31T09:05:25+0000";
DateTime dt = DateTime.ParseExact(inputStr, "u", System.Globalization.CultureInfo.InvariantCulture); 
```

# text - 将数据窗口保存为 powerbuilder 中的文本，并带有一些附加文本

> ID：13156977
> 
> 赞同：0
> 
> 时间：2012-10-31T11:34:55.763
> 
> 标签：text, powerbuilder, save-as, datawindow

```
***Process Date From:           
01/05/2012 0:00         
Group;Member        

 Status:****            
 Rcp Cd    Health Num        Rcp Name          Rcp Dob
1042231         1                  MARIA TOVAR DIAS 14-Feb-05
1042256         2                  KHALID KHAN      04-Mar-70
1042257         3                  SAMREEN ISMAT    25-Mar-80
1042257         5                  SAMREEN ISMAT    25-Mar-80
1042257         4                  SAMREEN ISMAT    25-Mar-80 
```

我希望我的 Powerbuilder 数据窗口另存为文本看起来像这样粗体文本是要添加的附加文本，其余文本是当前另存为文本结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:37:35.637

文本文件不能包含格式。无法在纯文本文件中获取粗体文本。我建议将文本添加到您的数据窗口标题带（粗体，带有一个表达式以确保它只显示在第一页上），然后将结果保存为 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:50:43.223

好吧，您没有提到您使用的是哪个版本的 PB，所以我假设是最近的版本，在这种情况下，您有一些更好的选项，例如**SaveAscii**和/或**SaveAsFormattedText**，它们在显示列标题、计算字段时提供了更大的灵活性，等等

如果您想添加顶部部分，我会在您的数据对象中**添加一个或多个额外的虚拟列**（或计算字段）以获取额外的数据。然后在检索后**手动填充虚拟列，****或者通过**计算字段中的表达式。您可以将所有这些放在一个计算域中，或者使用四个不同的计算域（例如 process_date_label、process_datetime、group_status、status）。

两个较新版本的 SaveAs 将更适合您，因为它们显示列标题值而不是列标题名称。SaveAscii 很早就在 PowerBuilder 版本 7 附近出现。SaveAsFormattedText 相对较新，大约在 PB 版本 11 左右出现，它与 SaveAsAscii 很相似，但它允许您选择文件编码。

如果您需要更明确的详细信息，请告诉我，但我相信您可以使用 SaveAscii 和额外的列获得一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:52:06.583

**伪代码**

```
Do the SaveAs to temp file
Open the temp file for read in line mode
Open output file for write (replace) in line mode 
Write your additional text lines to the output file (note: you can include CRLF to
write multiple lines at once)
Loop:
  Read line from temp file
  If EOF exit loop. Note: 0 is not EOF, -100 is EOF
  Write line to output file
Close temp file, output file
Delete temp file 
```

# php - 将域放入脚本

> ID：13156979
> 
> 赞同：-2
> 
> 时间：2012-10-31T11:35:01.303
> 
> 标签：php

我有一个 index.php 将在许多网站上加载

```
<?php
$id=$_GET[id];
header("HTTP/1.1 301 Moved Permanently");
header("Location: http://site1.com/?user_id=86&res=".base64_encode("site2.ru")."&dn=50&delay=1&de=".base64_encode("://SITE_DOMAIN/folder/?id=".$id));
exit;
?> 
```

如果我需要用加载 index.php 的域名填充“SITE_DOMAIN”位置，如何更改此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:47:28.993

您询问：

> 我需要用域名填充“SITE_DOMAIN”位置，在该位置加载 index.php

用于`$_SERVER['SERVER_NAME']`此。

有关详细信息，请参阅 PHP 手册：http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# android - java.io.IOException：setDataSource 失败。：状态=0x80000000

> ID：13156980
> 
> 赞同：26
> 
> 时间：2012-10-31T11:35:03.317
> 
> 标签：android, media-player, live-wallpaper, surfaceholder

我正在尝试在活动中使用媒体播放器播放 url：

```
mediaPlayer = MediaPlayer.create(getApplicationContext(),
Uri.parse("http://www.pocketjourney.com/downloads/pj/video/famous.3gp"),
holder); 
```

它工作正常。`@onSurfaceCreated`我用相同的代码将其设置为 in中的动态壁纸`WallpaperService`，它给了我以下错误日志

```
D/MediaPlayer( 4128): create failed: D/MediaPlayer( 4128):
java.io.IOException: setDataSource failed.: status=0x80000000
D/MediaPlayer( 4128):   at
android.media.MediaPlayer._setDataSource(Native Method) D/MediaPlayer(
4128):  at
android.media.MediaPlayer.setDataSource(MediaPlayer.java:844)D/MediaPlayer( 4128): at
android.media.MediaPlayer.setDataSource(MediaPlayer.java:806)...... 
```

如果我使用本地视频 uri 设置动态壁纸..它工作正常。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-22T08:04:37.300

您还记得将此权限添加到您的清单文件吗？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# python - Python 初始化文件名 约定

> ID：13156981
> 
> 赞同：0
> 
> 时间：2012-10-31T11:35:06.093
> 
> 标签：python, naming-conventions

我开始了一个新的 Python 项目，我希望从一开始就有一个好的结构。我正在阅读一些约定 Python 指南，但我没有找到有关如何命名主脚本的任何信息。这有什么规则吗？项目内的文件夹或文本文件（如自述文件）是否有任何其他类型的约定？

顺便说一句，我正在编写一个客户端-服务器应用程序，所以它无法成为一个包（至少在一个认为包的方式上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:44:37.033

如果您想打包您的应用程序以允许将包含它或其目录的 ZIP 文件作为参数传递给 python 解释器以运行应用程序，请将您的主脚本命名为`__main__.py`. 如果您不关心能够做到这一点（大多数 python 应用程序不关心），请随意命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:41:37.497

启动您的应用程序的 python 主脚本不存在这样的规则。不过，您可以遵循一些编码[指南](http://www.python.org/dev/peps/pep-0008/)(PEP8) 来保持代码整洁。

您可以检查现有的易于使用的 python 应用程序。可能是开源/自由软件项目，例如 yum（基于 rpm 的发行版）命令、许多[python 应用程序](http://en.wikipedia.org/wiki/List_of_Python_software#Applications)（您可以从公开可用的源代码管理系统例如 git repo 中检查它们）等。您可以检查它们遵循的基本原则。但是没有这样的限制。

# facebook-fql - FQL 仅返回一张照片

> ID：13156984
> 
> 赞同：1
> 
> 时间：2012-10-31T11:35:12.757
> 
> 标签：facebook-fql

我使用这个查询：

```
SELECT pid FROM photo WHERE owner=$friend_id; 
```

它工作正常，但对于某些用户（有超过 1 张照片），此查询仅返回 1 条记录。

然后我尝试了这个查询：

```
SELECT pid FROM photo WHERE owner=$friend_id LIMIT 10; 
```

但返回的结果是一样的——只有 1 条记录。

权限：

user_activities、user_photos、friends_activities、
friends_photos、publish_stream

我必须做什么才能为任何用户获得正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:46:24.970

这取决于朋友对他/她分享/上传的相册和照片的隐私设置。

另外，我注意到表中的`owner`字段`photo`不可索引，但它在`album`表中，因此您可能需要使用以下内容：

```
SELECT pid FROM photo WHERE owner = XXXXXX AND aid IN (
    SELECT aid FROM album WHERE owner = XXXXXX
) 
```

# iis-7 - IIS7 和 rewriteMap 的友好 URL

> ID：13156985
> 
> 赞同：1
> 
> 时间：2012-10-31T11:35:14.747
> 
> 标签：iis-7, web-config, rewrite, rewritemap

我有一个包含以下条目的外部“rewritemaps.config”文件：

```
<rewriteMaps>  

    <rewriteMap name="Cat1">
        <add value="2" key="wheels-and-castors" />
        <add value="3" key="agricultural" />
        <add value="4" key="hydraulic-hose-and-fittings" />
        <add value="5" key="engineering-plastics" />
        <add value="6" key="sealing-and-jointing" />
        <add value="7" key="health-and-safety" />
        <add value="8" key="hose-and-ducting" />
        <add value="9" key="hose-couplings-and-clamps" />
        <add value="10" key="general-consumables" />
        <add value="11" key="ceramics" />
        <add value="12" key="rubber-and-polyurethane" />
    </rewriteMap>

</rewriteMaps> 
```

如何重写 URL，例如： http: [//www.domain.com/wheels-and-castors/](http://www.domain.com/wheels-and-castors/)

到以下： [http ://www.domain.com/category.asp?catID=2](http://www.domain.com/category.asp?catID=2)

请注意，这是重写，而不是重定向。

我想我快到了最后的重写线，但我在比赛和条件上苦苦挣扎。我当前的最终重写行是：

```
<action type="Rewrite" url="category.asp?catID={Cat1:{C:1}}" appendQueryString="false" /> 
```

（其中 Cat1 是我的 rewriteMap 的名称）

谢谢你的帮助。干杯，克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:53:26.540

好的，经过一周的研究和反复试验，我已经开始工作了。这是我正在使用的完整规则，它引用了外部“rewritemaps.config”。

```
<rule name="Match Category URLs" stopProcessing="true">
    <match url="^(?![^/]+?\.(?:css|png|jpg|axd)$)([^/]+)/?$" />
    <conditions>
        <add input="{URL}" pattern="(.asp|.xml)" negate="true" />
    </conditions>
    <action type="Rewrite" url="category.asp?catID={CatMap:{R:1}}" appendQueryString="false" />
</rule> 
```

现在完美运行。

PS。我将 rewriteMap 重命名为“CatMap”（以避免任何人混淆，如果遵循这个）。

# tfs - 如何以编程方式将文件从本地文件夹签入到 TFS？

> ID：13156987
> 
> 赞同：0
> 
> 时间：2012-10-31T11:35:18.640
> 
> 标签：tfs, tfsbuild

任何人都可以帮助我如何将一组文件（尤其是 *.dll 文件）从本地文件夹中检入到 TFS 中将此构建的输出更新到 TFS 中的公共程序集文件夹。这些程序集由各种应用程序使用。这里我们使用 TFS 2010 构建定义进行构建自动化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:08:48.800

我已经通过下面的代码弄清楚了......

```
TfsTeamProjectCollection tfs = new TfsTeamProjectCollection(new Uri(tfsName));
// Get a reference to Version Control.              
VersionControlServer versionControl = tfs.GetService<VersionControlServer>();
Workspace workspace = 
    versionControl.CreateWorkspace("TempWorkSpace1", versionControl.AuthorizedUser);               

// Create a mapping using the Team Project supplied on the command line.
workspace.Map(tfsPath, path);
context.WriteBuildMessage("Sucessfully mapped to the folder " + path, 
    BuildMessageImportance.High);
// Get the files from the repository.

workspace.Get();
context.WriteBuildMessage("Sucessfully get the binaries from workspace", 
    BuildMessageImportance.High);

String files = tfsPath + "/*";

context.WriteBuildMessage(
    "Temporarily checking out the files from tfs path " + files, 
    BuildMessageImportance.High);

int pendedit = workspace.PendEdit(files, RecursionType.Full);

PendingChange[] pendingchanges = workspace.GetPendingChanges();

context.WriteBuildMessage(
    "Copying all the binaries from the DropLocation- " + 
    buildInformation.DropLocation, 
    BuildMessageImportance.High);

CopyAllFiles(buildInformation.DropLocation, path, false);

context.WriteBuildMessage("Copied all the binaries from the DropLocation", 
    BuildMessageImportance.High);

WorkspaceCheckInParameters parameters = 
    new WorkspaceCheckInParameters(pendingchanges, "***NO_CI***")
    {
        OverrideGatedCheckIn = true,
    };

int changeset = workspace.CheckIn(parameters);

context.WriteBuildMessage("Checking in all the files to workspace - " + tfsPath, 
    BuildMessageImportance.High);

// Cleanup the workspace.
workspace.Delete();      
DeleteMappedFolder(); 
```

# c# - 在 C# 中确定可执行文件是 64 位还是 32 位

> ID：13156989
> 
> 赞同：1
> 
> 时间：2012-10-31T11:35:22.227
> 
> 标签：c#, .net, header, 64-bit, exe

我正在寻找一种解决方案来确定给定的可执行文件是 64 位还是 32 位。

被测试的可执行文件可能是基于.NET 的，也可能不是。

我见过多种不同的技术，不确定一种与另一种有何不同。

我见过列出的技术：

*   使用 dumpbin.exe（随 Visual Studio 或 Windows SDK 提供）
*   Win32 函数 GetBinaryType [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364819(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364819(v=vs.85).aspx)
*   检查文件的标题（在这个问题中演示：[如何确定可执行文件是为哪个平台编译的？](https://stackoverflow.com/questions/197951/how-can-i-determine-for-which-platform-an-executable-is-compiled)）

最强大的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:01:59.767

我知道有两种方法：
1\. 如果您需要在运行时检查它：使用 IsWow64Process。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms684139(v=vs.85).aspx?ppud=4](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684139(v=vs.85).aspx?ppud=4)
如果它是 x86 进程 - 它将返回 true，否则 - false。
2\. 如果您需要在运行时检查它，只需检查 EXE PE 格式。
如果 NT Header -> Optional header->Magic == IMAGE_NT_OPTIONAL_HDR64_MAGIC 它是 x64 exe/dll。

# asp.net - 桌面实施的 Ext.Net 方法

> ID：13156990
> 
> 赞同：0
> 
> 时间：2012-10-31T11:35:23.350
> 
> 标签：asp.net, ext.net

我想开始使用 Ext.Net 桌面（我将它用作其他应用程序的“普通页面”）。

我想知道从数据库数据初始化桌面的最佳方法。我的实际做法是： 1\. 从没有任何模块的“最小”桌面页面（开始菜单 ecc...）开始；2.从数据库中读取数据（基于相同的参数）并创建动态模块（我认为使用DesktopModuleProxy）带有用户控件（例如，我将用户控件的路径/标题/等保存在数据库中）；3.创建用户控件并在桌面渲染

我从这个例子开始：[http ://examples.ext.net/#/Desktop/Introduction/Overview/](http://examples.ext.net/#/Desktop/Introduction/Overview/)

方法 AddNewModule() 仅在有提交时才有效（例如使用启动器），但它不适用于 Page_Load 事件，并且我有这个 javascript 错误：

`"Cannot read property 'length' of undefined" in ext.axd:93`

也许我使用了错误的生命周期页面？

最后也许我使用网络表单而不是用户控件，但我有同样的情况，我必须使用用户控件......

谢谢！

.aspx 文件

```
<ext:Desktop ID="Desktop1" runat="server">            
        <StartMenu Title="Ext.Net Desktop" Icon="Application" Height="300">
            <ToolConfig>
                <ext:Toolbar ID="Toolbar1" runat="server" Width="100">
                    <Items>
                        <ext:Button ID="Button1" runat="server" Text="Settings" Icon="Cog" />
                        <ext:Button ID="Button2" runat="server" Text="Logout" Icon="Key">
                            <DirectEvents>
                                <Click OnEvent="Logout_Click">
                                    <EventMask ShowMask="true" Msg="Ciao..." MinDelay="1000" />
                                </Click>
                            </DirectEvents>
                        </ext:Button>
                    </Items>
                </ext:Toolbar>
            </ToolConfig>
        </StartMenu>

        <TaskBar TrayWidth="100">
            <QuickStart>
                <ext:Toolbar ID="Toolbar2" runat="server">
                    <Items>
                        <ext:Button ID="Button3" runat="server" Handler="tile" Icon="ApplicationTileVertical">
                            <QTipCfg Text="Tile windows" />
                        </ext:Button>

                        <ext:Button ID="Button4" runat="server" Handler="cascade" Icon="ApplicationCascade">
                            <QTipCfg Text="Cascade windows" />
                        </ext:Button>
                    </Items>
                </ext:Toolbar>
            </QuickStart>

            <Tray>
                <ext:Toolbar ID="Toolbar3" runat="server">
                    <Items>
                        <ext:ToolbarFill ID="ToolbarFill1" runat="server" />
                    </Items>
                </ext:Toolbar>
            </Tray>
        </TaskBar>
        <DirectEvents>
            <Ready OnEvent="loadTest"></Ready>

        </DirectEvents>

    </ext:Desktop> 
```

.cs 文件

```
 [DirectMethod]
    public void loadTest(object sender, DirectEventArgs e)
    {
            DesktopModuleProxy control =     Ext.Net.Utilities.ControlUtils.FindControl<Ext.Net.DesktopModuleProxy>    (this.LoadControl("/user/default.ascx"));
            control.RegisterModule();
    } 
```

chrome 出错：未捕获 TypeError：无法读取未定义 Default.aspx 的属性“app”：31 未捕获 TypeError：无法读取未定义 ext.axd 的属性“长度”：93

这是我各种测试的“最后一个版本”。如果我通过按钮调用相同的方法“loadTest”（如原始示例）它可以工作。用户控件只有 1 个带有日期时间的标签。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-07T05:26:38.643

您可以在服务器上将 Ext.onReady 和 ext:ResourcePlaceHolder 与 DirectMethod 一起使用，如下所示：

```
<ext:ResourcePlaceHolder runat="server" Mode="Script" />
<script type="text/javascript">
    Ext.onReady(function () {
        App.direct.YourDirectMethod();
    });
</script> 
```

# google-maps-api-3 - 再次调用 xml 文件时更新 infowindows

> ID：13156995
> 
> 赞同：0
> 
> 时间：2012-10-31T11:35:28.260
> 
> 标签：google-maps-api-3, xml-parsing, infowindow

早上好。

我有下一个代码，它将一些标记从 xml 文件放入地图中，每 5 秒我再次调用 xml 文件并更新标记的位置，但问题是信息窗口没有更新。有谁知道如何更新它们=

这里有代码：

```
//<![CDATA[

var side_bar_html = ""; 

var gmarkers = []; 

var map = null;
var markerclusterer = null;

function myclick(i) {
    google.maps.event.trigger(gmarkers[i], "click");
    map.setZoom(map.getZoom()+2); 
}

function initialize() {
    // create the map
    var myOptions = {
        zoom: 12,
        center: new google.maps.LatLng(37.169619,-3.756981),
        mapTypeControl: true,
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
            },
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
}
function getMarkers() {
    google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
    });

    downloadUrl("vehiculos.asp", function(doc) {
        var xmlDoc = xmlParse(doc);
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            // obtain the attribues of each marker
            var lat = parseFloat(markers[i].getAttribute("lat"));
            var lng = parseFloat(markers[i].getAttribute("lng"));
            var point = new google.maps.LatLng(lat,lng);
            var imei = markers[i].getAttribute("imei");
            var alias = markers[i].getAttribute("alias");
            var speed= markers[i].getAttribute("speed");
            var timestamp= markers[i].getAttribute("timestamp");
            var estado= markers[i].getAttribute("estado");
            var conectado= markers[i].getAttribute("conectado");
            var altitude= markers[i].getAttribute("altitude");
            var angle= markers[i].getAttribute("angle");
            var html="<b>"+alias+" "+speed+" km/h <br/> "+timestamp;

            var marker = createMarker(point,alias+" "+imei,html,estado,alias, speed, timestamp, altitude, angle);
        }   
        markerCluster = new MarkerClusterer(map, gmarkers);

    });
}
var infowindow = new google.maps.InfoWindow(
{ 

    size: new google.maps.Size(150,60)
});

setInterval(function updateMarkers() {
    google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
    });

    downloadUrl("vehiculos.asp", function(doc) {
        var xmlDoc = xmlParse(doc);
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            // obtain the attribues of each marker
            var lat = parseFloat(markers[i].getAttribute("lat"));
            var lng = parseFloat(markers[i].getAttribute("lng"));
            var point = new google.maps.LatLng(lat,lng);
            var imei = markers[i].getAttribute("imei");
            var alias = markers[i].getAttribute("alias");
            var speed= markers[i].getAttribute("speed");
            var timestamp= markers[i].getAttribute("timestamp");
            var estado= markers[i].getAttribute("estado");
            var conectado= markers[i].getAttribute("conectado");
            var altitude= markers[i].getAttribute("altitude");
            var angle= markers[i].getAttribute("angle");

            var html="<b>"+alias+" a "+speed+" km/h <br/> "+timestamp;

            var newLatLng = gmarkers[i].setPosition(point,alias+" "+imei,html,estado,alias,speed,timestamp,altitude,angle);

        }   
        markerCluster = new MarkerClusterer(map, gmarkers); 
    });

}, 5000);
//finish updateMarkers

function createMarker(latlng, imei, html, estado, alias, speed, timestamp, altitude, angle) {
    if(estado == 1)
        image = '/artworks/icons/truck_green3.png';
    else
        image = '/artworks/icons/truck_red.png';

    var textoLabel= alias+" speed: "+ speed+" km/h";
    var contentString = html;
    var newLatLng = new MarkerWithLabel({
        position: latlng,
        icon: image,
        // map: map,
        draggable: true,

        flat: true,
        labelContent: textoLabel,
        labelAnchor: new google.maps.Point(40, 0),
        labelClass: "labels", // the CSS class for the label
        labelStyle: {
            opacity: 0.50
        },
        zIndex: Math.round(latlng.lat()*-100000)<<5
    });

    google.maps.event.addListener(newLatLng, 'click', function() {
        infowindow.setContent(timestamp + alias); 
        infowindow.open(map,newLatLng);
    });

    gmarkers.push(newLatLng);

// side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + imei +'<\/a><br>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:50:04.660

您没有在 setInterval 函数中分配事件处理程序，因此没有 infowindows。

创建标记后将此代码添加到 setInterval()

```
 google.maps.event.addListener(newLatLng, 'click', function() {
        infowindow.setContent(timestamp + alias); 
        infowindow.open(map,newLatLng); 
```

当您处于循环中时，这可能会导致关闭问题。因此，您可以执行类似将[for 循环中的值传递给事件侦听器 - Javascript 中](https://stackoverflow.com/questions/12563277/passing-values-in-for-loop-to-event-listeners-javascript)的解决方案。

# iphone - Facebook loginViewFetchedUserInfo 被调用两次

> ID：13156998
> 
> 赞同：16
> 
> 时间：2012-10-31T11:35:41.350
> 
> 标签：iphone, ios, facebook-graph-api, facebook-ios-sdk

我在我的应用程序中使用 facebook SDK 3.0。登录到 facebook 后，委托方法会被调用两次。

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {
    //loginThroughFb=TRUE;
    NSString *userId=[[NSString alloc] initWithString:[user id]];
    [self soapCallForLogin:@"" password:@"" deviceId:@"" fbid:userId];
    NSLog(@"%@",userId);
    [userId release];

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-18T21:06:09.333

我尝试了“HelloFacebookSample”项目，该方法只调用了一次。

所以我想这种情况的最佳解决方案是保留对最后一个用户对象的引用并将其与下一次调用的新对象进行比较，如果它们*相等*，则可以忽略该调用。

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user {
    if (![self isUser:cachedUser equalToUser:user]) {
        cachedUser = user;
        /// Do something
    }
}

- (BOOL)isUser:(id<FBGraphUser>)firstUser equalToUser:(id<FBGraphUser>)secondUser {
    return
        [firstUser.objectID isEqual:secondUser.objectID] &&
        [firstUser.name isEqual:secondUser.name] &&
        [firstUser.first_name isEqual:secondUser.first_name] &&
        [firstUser.middle_name isEqual:secondUser.middle_name] &&
        [firstUser.last_name isEqual:secondUser.last_name] &&
        ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-20T08:23:36.360

我也有这个问题。我设法用一个丑陋的黑客修复它，但它有效。我在 FBLoginView 委托中保留了一个计数器。当调用 fetchedUserInfo 时，我会检查计数器。如果大于零，则返回。否则，做两件事 - 1\. 增加消息计数器 2\. 触发延迟事件，再次将消息计数器归零。

因此，您的 fetchedUserInfo 方法将如下所示：

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                        user:(id<FBGraphUser>)user {

       if ([self messageCounter] >0)
           return;
       else
           {
    self.messageCounter++;
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 3 * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
        [self setMessageCounter:0];
    });}
// Do whatever you were going to do } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-14T11:45:01.877

[已在 2013 年 9 月 18 日发布的FB SDK 3.8](https://developers.facebook.com/docs/ios/)中修复。委托方法现在每次登录调用一次，无论重复注销和重新登录发生多少次。

* * *

我还能够在 FB SDK 3.7.1 和他们自己的示例程序“Scrumptious”中重现这一点

如前所述（至少对我而言），这只发生在：

1.  登录一次
2.  注销
3.  重新登录（*现在发生了*）

有趣的是重新登录时的调用顺序：

在第一次登录时，我看到的电话是：

```
- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView;
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user; 
```

在第二次（及以后）登录时，我看到：

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user;
- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView;
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user; 
```

这为在中间方法中设置标志提供了一个方便的小解决方法，如下所示：

```
- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {
    // Set flag
    self.isFirstLoginDone = YES;
}

- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user {

    // Check
    if(self.isFirstLoginDone) {
        // Execute code I want to run just once
        NSLog(@"fetched");
    }

    // Don't forget to clear the flag (I guess it shouldn't matter if everything is cleaned up)
    self.isFirstLoginDone = NO;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-23T09:40:02.480

可能还有另一个原因，我只是面对。

我的情况：

*   ViewController A 有一个登录名（使用 fbloginview 及其委托集）
*   用户选择注册，使用另一个 fbloginview 及其委托集移动到 ViewController B。

以上使代表两次开火。

我已通过在 ViewController A 中的 ViewWillDisappear 上将委托设置为 nil 来解决此问题。

```
-(void) viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    fbLoginButton.delegate=self;
}
-(void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
    fbLoginButton.delegate=nil;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-12T20:45:47.140

我使用了这个简单的技巧：（在您的界面中定义一个 int facebookCounter）

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                        user:(id<FBGraphUser>)user {

if (self.facebookCounter==0) {
    self.facebookCounter++;
    return;
}

//Do stuff here

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-23T21:41:08.093

我需要在这个方法中添加线程安全。一个简单的类变量不起作用。以下两个选项将起作用，具体取决于用例 -

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user {
//self.executedOnce = NO; in the init method of this class
    @synchronized(self){
         if(!self.executedOnce) {
           //do something once per init of this class
            self.executedOnce = YES;
          }
    }

//OR- This will only execute once in the lifetime of the app, thus no need for the executedOnce flag
    static dispatch_once_t onceToken;
       dispatch_once(&onceToken, ^{
            //do something once per lifetime of the app
     }); 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-08T14:18:05.110

只是在 loginViewFetchedUserInfo 方法中将 loginView 的委托设置为 nil。那么它永远不能被调用。如果您需要再次登录，请将委托设置为正确的对象。